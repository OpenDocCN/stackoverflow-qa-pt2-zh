# StackOverflow 问答 14057000-14057999

# c++ - 嵌套模板可变参数非类型列表的类型推导

> ID：14057002
> 
> 赞同：3
> 
> 时间：2012-12-27T15:23:37.460
> 
> 标签：c++, c++11, templates, metaprogramming, template-argument-deduction

考虑以下类：

```
template<class T, int...> struct MyClass1 {};
template<class T, unsigned int...> struct MyClass2 {};
template<class T, long long int...> struct MyClass3 {};
template<class T, unsigned long long int...> struct MyClass4 {}; 
```

我无法修改这些类。

是否可以编写一个帮助类或函数或其他东西，它将返回可变参数列表的类型：

```
something<MyClass1>::type (-> int)
something<MyClass2>::type (-> unsigned int)
something<MyClass3>::type (-> long long int)
something<MyClass4>::type (-> unsigned long long int) 
```

`size_t`如果可变参数列表为空？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T18:02:03.313

我想不出一种方法来定义*一个通用*元函数来实现它，但这里有一个可能的解决方法：

```
#include <iostream>
#include <type_traits>

using namespace std;

// PRIMARY TEMPLATE

template<typename T>
class something
{
};

// SPECIALIZATIONS FOR int

template<typename T, int... U, template<typename, int...> class L>
class something<L<T, U...>>
{
public:
    typedef int type;
};

template<typename T, template<typename, int...> class L>
class something<L<T>>
{
public:
    typedef size_t type;
};

// SPECIALIZATIONS FOR unsigned int

template<typename T, unsigned int... U, template<typename, unsigned int...> class L>
class something<L<T, U...>>
{
public:
    typedef unsigned int type;
};

template<typename T, template<typename, unsigned int...> class L>
class something<L<T>>
{
public:
    typedef size_t type;
};

/* ... OTHER SPECIALIZATIONS ... */

struct A {};
struct B {};

int main()
{
    static_assert(is_same<something<MyClass1<A, 1, 2>>::type, int>::value, "Error!");
    static_assert(is_same<something<MyClass1<A>>::type, size_t>::value, "Error!");
    static_assert(is_same<something<MyClass2<B, 1U, 2U, 3U>>::type, unsigned int>::value, "Error!");
    static_assert(is_same<something<MyClass2<B>>::type, size_t>::value, "Error!");
    return 0;
} 
```

我试图只编写涵盖所有情况的单一专业化，如下所示：

```
template<typename U, typename T, U... V, template<typename, U...> class L>
class something<L<T, V...>>
{
public:
    typedef U type;
}; 
```

但是 Clang 3.2 抱怨 U 的类型无法推断，所以`get_type`永远不会使用这种特化的。因此，如果您遵循这种方法，您将必须明确定义每个专业。这可能会或可能不会接受，具体取决于您的用例。希望能帮助到你。

# python - 删除行 not .isin('X')

> ID：14057007
> 
> 赞同：86
> 
> 时间：2012-12-27T15:24:13.760
> 
> 标签：python, filtering, pandas

抱歉刚刚进入 Pandas，这似乎应该是一个非常直截了当的问题。如何使用`isin('X')`删除列表**中**`X`的行？在 RI 中会写`!which(a %in% b)`.

* * *

## 回答 #1

> 赞同：123
> 
> 时间：2017-02-09T09:52:50.773

你有很多选择。整理上面的一些答案和[这篇文章中接受](https://stackoverflow.com/questions/19960077/how-to-implement-in-and-not-in-for-pandas-dataframe)的答案，你可以做：
1\. `df[-df["column"].isin(["value"])]`
2\. `df[~df["column"].isin(["value"])]`
3\. `df[df["column"].isin(["value"]) == False]`
4。`df[np.logical_not(df["column"].isin(["value"]))]`

注意：对于选项 4，您需要`import numpy as np`

**更新：**您也可以使用该`.query`方法。这允许[方法链接](https://tomaugspurger.github.io/method-chaining)：
5\. `df.query("column not in @values")`.
where`values`是您不想包含的值的列表。

* * *

## 回答 #2

> 赞同：74
> 
> 时间：2012-12-27T17:46:47.653

您可以使用[`numpy.logical_not`](http://docs.scipy.org/doc/numpy/reference/generated/numpy.logical_not.html#numpy.logical_not)反转返回的布尔数组`isin`：

```
In [63]: s = pd.Series(np.arange(10.0))

In [64]: x = range(4, 8)

In [65]: mask = np.logical_not(s.isin(x))

In [66]: s[mask]
Out[66]: 
0    0
1    1
2    2
3    3
8    8
9    9 
```

正如韦斯麦金尼在评论中给出的，你也可以使用

```
s[~s.isin(x)] 
```

* * *

## 回答 #3

> 赞同：28
> 
> 时间：2015-11-11T01:44:40.230

您所要做的就是创建一个数据框的子集，其中 isin 方法的计算结果为 False：

```
df = df[df['Column Name'].isin(['Value']) == False] 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-12-27T15:40:35.483

您可以使用以下[`DataFrame.select`](https://pandas.pydata.org/pandas-docs/stable/indexing.html#the-select-method)方法：

```
In [1]: df = pd.DataFrame([[1,2],[3,4]], index=['A','B'])

In [2]: df
Out[2]: 
   0  1
A  1  2
B  3  4

In [3]: L = ['A']

In [4]: df.select(lambda x: x in L)
Out[4]: 
   0  1
A  1  2 
```

# excel - 日期之间的 Excel SUMIF

> ID：14057010
> 
> 赞同：19
> 
> 时间：2012-12-27T15:24:36.320
> 
> 标签：excel, date, sumifs

我有 A 列，其日期值格式为`mm/dd/yyyy`. 如果 A >=DATE(2012,1,1) AND

`=SUM(B:B)`B 正确求和，但如果我尝试使用`=SUMIF(B:B,A:A>=DATE(2012,1,1))`返回的值是`0.00`. 我假设这与使用小数作为标准的总和和日期类型有关。有没有办法解决这个问题？

谢谢

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-12-27T15:30:44.840

您`SUMIF`的顺序不正确 - 它需要是范围、标准、总和范围。尝试：

```
=SUMIF(A:A,">="&DATE(2012,1,1),B:B) 
```

* * *

## 回答 #2

> 赞同：28
> 
> 时间：2012-12-27T15:48:40.590

要在日期之间进行 SUMIFS，请使用以下命令：

```
=SUMIFS(B:B,A:A,">="&DATE(2012,1,1),A:A,"<"&DATE(2012,6,1)) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-03-18T12:13:38.203

我找到了另一种解决这个问题的方法，我认为我会分享。

在我的情况下，我有长达数年的每日专栏（即 Jan-1、Jan-2...Dec-31），我必须提取每个月的总数。我是这样处理的：总结全年，减去之前和之后日期的总数。2 月份的总数如下所示：

```
=SUM($P3:$NP3)-(SUMIF($P$2:$NP$2, ">2/28/2014",$P3:$NP3)+SUMIF($P$2:$NP$2, "<2/1/2014",$P3:$NP3)) 
```

其中`$P$2:$NP$2`包含我的日期值，并且`$P3:$NP3`是我汇总的第一行数据。我`SUM($P3:$NP3)`全年的总数也是如此，我减去（两个`sumif`s 的总和）：

`SUMIF($P$2:$NP$2, ">2/28/2014",$P3:$NP3)`，合计 2 月之后的所有月份 `SUMIF($P$2:$NP$2, "<2/1/2014",$P3:$NP3)`， ，合计 2 月之前的所有月份。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-11-17T13:24:30.167

这很有效，并且可以适应数周或任何其他频率，即每周、每季度等......

=SUMIFS(B12:B11652,A12:A11652,">="&DATE(YEAR(C12),MONTH(C12),1),A12:A11652,"<"&DATE(YEAR(C12),MONTH(C12)+1 ,1))

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2016-03-15T07:25:18.440

当您想使用任何销售数据时的另一种解决方案（关键`C3`）

```
=SUMIF(Sheet6!M:M;CONCATENATE("<";TEXT(C3;"dd.mm.yyyy"));Sheet6!L:L) 
```

# swing - 用 Leiningen 制作的 uberjar 中的图标消失了

> ID：14057017
> 
> 赞同：4
> 
> 时间：2012-12-27T15:24:53.290
> 
> 标签：swing, clojure, leiningen, uberjar

我用一个简单的 Swing gui 在 Clojure 中制作了一个时髦的应用程序，其中包含一些带有一些图标的 JButton，我希望我的非程序员朋友也能够使用它。

当我使用“lein run”启动它时，它在我自己的计算机上一切正常，但是当我使用“lein uberjar”创建一个包并运行它时，图标消失了，JButtons 为空白。

图标是项目根目录中“resources”文件夹中的 .png，打包后在 .jar 中可见。要加载图标，我这样做：

```
(defn get-icon [icon]
  (.getFile (clojure.java.io/resource icon)))

(def some-button (JButton. (ImageIcon. (get-icon "foo.png")))) 
```

我试图放入一个小打印语句来查看发生了什么：

```
(println (get-icon "foo.png")) 
```

当做'lein run'时，它会打印

```
/home/pelle/lein/foo/resources/foo.png 
```

并且在打包的 .jar 上执行“java -jar”时会打印

```
file:/home/pelle/lein/foo/target/znuli-0.1.2-standalone.jar!/foo.png 
```

这正是 foo.png 所在的位置（除了我不完全确定感叹号发生了什么），但它仍然没有在 Swing gui 中绘制。

我也尝试过明确指定 project.clj 中的资源文件夹

```
:resource-paths ["resources"] 
```

但它什么也没改变。

所以基本上我的问题可以归结为：如何使用'lein uberjar'来创建一个工作的hello-world.jar，其中包含一个包含自定义png图像的JButton？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T16:30:37.293

`ImageIcon`应该可以在 URL 上正常工作。挂断`.getFile`电话，直接使用结果`clojure.java.io/resource`。

# android - 从主页返回我的活动时出现多个 onResume()

> ID：14057020
> 
> 赞同：1
> 
> 时间：2012-12-27T15:25:05.580
> 
> 标签：android, android-asynctask, android-activity

当我从我的（主要）活动中导航出来然后通过单击主屏幕上的图标返回时 - 活动会自动恢复->暂停->恢复。我只期待一个 onResume()。我的活动在 onResume() 函数中创建了一个 AsyncTask（该活动根本不调用其他活动），目前创建了两个额外的 AsyncTask，而不是一个。我做了一些测试，发现当这个活动在 Mainfest 中声明为“SingleTask”时会发生这种情况。使用“SingleTop”，一切正常，onResume() 只被调用一次。

帮助！

这是我的主要活动代码：

```
 public class HomeFinderActivity extends ListActivity implements LocationListener          {
  private TextView latituteField;
  private TextView longitudeField;
  private LocationManager locationManager;
  private String provider;
  private Location location;
  private static final String LOG_TAG = "::HomeFinderActivity->Asynctask";
  private ArrayList<Home> home_parts = new ArrayList<Home>();
  private ListViewAdapter m_adapter;

 /** Called when the activity is first created. */
  @Override
  public void onCreate(Bundle savedInstanceState) {
      super.onCreate(savedInstanceState);
      Intent intent = getIntent();
      setContentView(R.layout.main);
      latituteField = (TextView) findViewById(R.id.TextView02);
      longitudeField = (TextView) findViewById(R.id.TextView04);

      // instantiate  ListViewAdapter class
      m_adapter = new ListViewAdapter(this, R.layout.row, home_parts);
      setListAdapter(m_adapter);

      locationManager = (LocationManager) getSystemService(Context.LOCATION_SERVICE);

      // Define the criteria how to select the locatioin provider -> use
      // default
      Criteria criteria = new Criteria();
      provider = locationManager.getBestProvider(criteria, false);
      location = locationManager.getLastKnownLocation(provider);
  }

  //Asynctask to retrieve cursor from database and sort list by distance
  private class SortList extends AsyncTask<Location, Void, ArrayList<Home>> {
      @Override
      protected ArrayList<Home> doInBackground(Location... location) {
          try {
              if (home_parts.isEmpty()){
                  home_parts=Home.getHomeParts(location[0], getApplicationContext());
          }
              else{
                  for (Home d : home_parts){
                      if (location != null){
                          d.setmDistance((int) (d.getmLatitude()), d.getmLongitude(),(double) (location[0].getLatitude())
                                  , (double) (location[0].getLongitude()));               
                          }  
                  }
              }

          } finally {

          }
          Collections.sort(home_parts, new Comparator(){

              public int compare(Object o1, Object o2) {
                  Home p1 = (Home) o1;
                  Home p2 = (Home) o2;
                  return (int) p1.getmDistance()- (int) p2.getmDistance();
              }
          });
          return home_parts;
      }
      protected void onPostExecute(ArrayList<Home> address) {
            m_adapter = new ListViewAdapter(HomeFinderActivity.this, R.layout.row, address);

            // display the list.
            setListAdapter(m_adapter);
      }
  }
      @Override
  protected void onDestroy() {
      // TODO Auto-generated method stub
      super.onDestroy();

  }
  //starting handling location

  /* Request updates at startup */
  @Override
  protected void onResume() {
      super.onResume();
    Log.e(LOG_TAG, "onResume() started");
      if (location != null) {
          onLocationChanged(location);
      }
      else
      {
          latituteField.setText("Location not available");
          longitudeField.setText("Location not available");
      } 

      locationManager.requestLocationUpdates(provider, 400, 1, this);
  }

  /* Remove the locationlistener updates when Activity is paused */
  @Override
  protected void onPause() {
      super.onPause();
        Log.e(LOG_TAG, "onPause() started");
      locationManager.removeUpdates(this);
  }

  public void onLocationChanged(Location location) {
      int lat = (int) (location.getLatitude());
      int lng = (int) (location.getLongitude());
      latituteField.setText(String.valueOf(lat));
      longitudeField.setText(String.valueOf(lng));
      SortList showList = new SortList();
      showList.execute(location);
  }

  public void onStatusChanged(String provider, int status, Bundle extras) {
      // TODO Auto-generated method stub
  }

  public void onProviderEnabled(String provider) {
  }

  public void onProviderDisabled(String provider) {
  }

  /** Called when the user clicks the Add Entry button */
  public void goAddEntry(View view) {
      Intent intent = new Intent(this, AddEntry.class);
      startActivity(intent);
  } 

} 
```

# mule - 如何将自定义转换器放入转换器调色板

> ID：14057022
> 
> 赞同：2
> 
> 时间：2012-12-27T15:25:19.580
> 
> 标签：mule, mule-studio

我正在尝试制作一个简单的自定义变压器，所以我创建了一个简单的变压器，如下所示：

![在此处输入图像描述](../Images/60bef55e0b87f3bc5b561c52c1576358.png)

如何将其添加到 Transformer Palette： ![在此处输入图像描述](../Images/617f50638b8735ef023037a377f10b58.png)

我要做的流程是一个 Http 入站端点 -> 我的转换器 -> Echo。将提供的任何内容都应由自定义转换器附加“Hello”。

目的是学习构建自定义变压器。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-27T17:06:26.080

如果您想构建可以集成到 Studio 调色板中的 Mule 扩展（自定义转换器、消息处理器......），请使用[DevKit](http://docs-stg.mulesoft.com/anypoint-connector-devkit/v/3.8/)创建它们。

否则，要直接在 Studio 中使用您的自定义转换器，请使用 引用它`Java Transformer`，如下所示：

![Java 自定义转换器](../Images/6a6a7a3743a69b20405f3398f4c59667.png)

# actionscript - 项目渲染器的数据属性中的未知属性错误

> ID：14057025
> 
> 赞同：0
> 
> 时间：2012-12-27T15:25:45.180
> 
> 标签：actionscript, flash-builder, itemrenderer

我正在使用项目渲染器，但不断收到此操作脚本错误：

```
Error: Unknown Property: 'skillName'. at mx.collections::ListCollectionView/http://www.adobe.com/2006/actionscript/flash/proxy::getProperty()[E:\dev\4.y\frameworks\projects\framework\src\mx\collections\ListCollectionView.as:870]
       at mx.binding::PropertyWatcher/updateProperty()[E:\dev\4.y\frameworks\projects\framework\src\mx\binding\PropertyWatcher.as:338]
       at Function/http://adobe.com/AS3/2006/builtin::apply()
       at mx.binding::Watcher/wrapUpdate()[E:\dev\4.y\frameworks\projects\framework\src\mx\binding\Watcher.as:192]
       at mx.binding::PropertyWatcher/updateParent()[E:\dev\4.y\frameworks\projects\framework\src\mx\binding\PropertyWatcher.as:239]
       at mx.binding::Watcher/updateChildren()[E:\dev\4.y\frameworks\projects\framework\src\mx\binding\Watcher.as:138]
       at mx.binding::PropertyWatcher/updateProperty()[E:\dev\4.y\frameworks\projects\framework\src\mx\binding\PropertyWatcher.as:347]
       at Function/http://adobe.com/AS3/2006/builtin::apply()
       at mx.binding::Watcher/wrapUpdate()[E:\dev\4.y\frameworks\projects\framework\src\mx\binding\Watcher.as:192]
       at mx.binding::PropertyWatcher/eventHandler()[E:\dev\4.y\frameworks\projects\framework\src\mx\binding\PropertyWatcher.as:375]
       at flash.events::EventDispatcher/dispatchEventFunction()
       at flash.events::EventDispatcher/dispatchEvent()
       at mx.core::UIComponent/dispatchEvent()[E:\dev\4.y\frameworks\projects\framework\src\mx\core\UIComponent.as:13152]
       at spark.components::DataRenderer/set data()[E:\dev\4.y\frameworks\projects\spark\src\spark\components\DataRenderer.as:123]
       at spark.components::SkinnableDataContainer/updateRenderer()[E:\dev\4.y\frameworks\projects\spark\src\spark\components\SkinnableDataContainer.as:606]
       at spark.components.supportClasses::ListBase/updateRenderer()[E:\dev\4.y\frameworks\projects\spark\src\spark\components\supportClasses\ListBase.as:1106]
       at spark.components::DataGroup/setUpItemRenderer()[E:\dev\4.y\frameworks\projects\spark\src\spark\components\DataGroup.as:1157]
       at spark.components::DataGroup/initializeTypicalItem()[E:\dev\4.y\frameworks\projects\spark\src\spark\components\DataGroup.as:327]
       at spark.components::DataGroup/ensureTypicalLayoutElement()[E:\dev\4.y\frameworks\projects\spark\src\spark\components\DataGroup.as:384]
       at spark.components::DataGroup/measure()[E:\dev\4.y\frameworks\projects\spark\src\spark\components\DataGroup.as:1467]
       at mx.core::UIComponent/http://www.adobe.com/2006/flex/mx/internal::measureSizes()[E:\dev\4.y\frameworks\projects\framework\src\mx\core\UIComponent.as:8506]
       at mx.core::UIComponent/validateSize()[E:\dev\4.y\frameworks\projects\framework\src\mx\core\UIComponent.as:8430]
       at mx.managers::LayoutManager/validateSize()[E:\dev\4.y\frameworks\projects\framework\src\mx\managers\LayoutManager.as:665]
       at mx.managers::LayoutManager/doPhasedInstantiation()[E:\dev\4.y\frameworks\projects\framework\src\mx\managers\LayoutManager.as:816]
       at mx.managers::LayoutManager/doPhasedInstantiationCallback()[E:\dev\4.y\frameworks\projects\framework\src\mx\managers\LayoutManager.as:1180] 
```

奇怪的是它工作得很好，直到在某个时候我不断收到这个错误，出乎意料。我一直在谷歌和 Stackoverflow 上搜索它并访问了一些网站，但没有一个答案可以帮助我更进一步。似乎这个错误也主要出现在移动 AIR 项目中，但我的是一个 Flash Player 项目......

这是 itemrenderer 的外观：

```
<?xml version="1.0" encoding="utf-8"?>
<s:ItemRenderer xmlns:fx="http://ns.adobe.com/mxml/2009"
            xmlns:s="library://ns.adobe.com/flex/spark"
            xmlns:mx="library://ns.adobe.com/flex/mx"
            xmlns:components="components.*"
            width="100%" height="100%" autoDrawBackground="true"
            creationComplete="creationCompleteHandler(event)"
            height.login_edit_state="80"
                            color.login_edit_state="#000000"
            height.login_preview_state="80">
<fx:Script>
   <![CDATA[
      import mx.collections.ArrayCollection;
  import mx.controls.Alert;
  import mx.events.FlexEvent;
  import mx.rpc.events.FaultEvent;
  import mx.rpc.events.ResultEvent;
  import mx.utils.ArrayUtil;

  public var loggedin:Boolean = true;

  [Bindable]private var ac_projects:ArrayCollection;

  protected function creationCompleteHandler(event:FlexEvent):void
  {
     currentState = "login_preview_state";
     img_foldout_preview.addEventListener(MouseEvent.CLICK, changeState);
     img_edit_preview.addEventListener(MouseEvent.CLICK, changeState);

     http_projects.addEventListener(ResultEvent.RESULT, http_projects_resultEvent);
     http_projects.addEventListener(FaultEvent.FAULT, http_projects_faultEvent);
     http_projects.url = "http://localhost/sourcefoliocom.adobe.flexbuilder.project.flexbuilder/bindebug/php/getAllProjectsByUserSkill.php?id=" + data.userId + "&skill=" + data.skillId ;

                 trace("http://localhost/sourcefoliocom.adobe.flexbuilder.project.flexbuilder/bindebug/php/getAllProjectsByUserSkill.php?id="+ data.userId + "&skill=" + data.skillId);
     http_projects.send();
}

protected function http_projects_resultEvent(event:ResultEvent):void
{
   ac_projects = new ArrayCollection(ArrayUtil.toArray(event.result.projects.project));
       rpt_projects.dataProvider = ac_projects; 
}

protected function http_projects_faultEvent(event:FaultEvent):void
{
    trace("Kon projecten niet laden");
}

  ]]>
</fx:Script>

<fx:Declarations>
    <s:HTTPService id="http_projects"
               method="GET" />
</fx:Declarations>

<s:states>
    <s:State name="login_preview_state"/>
<s:State name="login_opened_state"/>
<s:State name="login_edit_state"/>
</s:states>
<s:layout.login_opened_state>
    <s:VerticalLayout horizontalAlign="right"/>
</s:layout.login_opened_state>

<!-- login_opened_state -->
<s:SkinnableContainer includeIn="login_opened_state" width="100%" height="80">
    <s:layout>
    <s:HorizontalLayout gap="20" paddingBottom="20" paddingLeft="20" paddingRight="20" paddingTop="20" verticalAlign="middle"/>
</s:layout>
<s:Label fontSize="20" fontWeight="bold" text="{data.skillName}"/>
<s:Label fontSize="20" text="junior"/>
<s:Spacer width="100%" height="10"/>
<s:Image id="img_edit_open" width="20" height="20" source="images/edit.png" buttonMode="true" useHandCursor="true"/>
<s:Image id="img_foldin_open" width="20" height="20" buttonMode="true" source="images/foldin.png" useHandCursor="true"/>
</s:SkinnableContainer>
<s:VGroup id="vg_opened" 
      visible="false" 
      width="900" height="1000" gap="0"
      horizontalAlign="right">
 <mx:VBox>
     <mx:Repeater id="rpt_projects" width="100%">
         <components:Project currentItem= {rpt_projects.currentItem}" loggedin="true"/>
     </mx:Repeater>
     <components:AddProject />
    </mx:VBox>
<s:Image x="824" width="76" height="51" source="images/edit_flag.png" useHandCursor="true"/>
</s:VGroup>  
</s:ItemRenderer> 
```

在这一行抛出错误：

```
<s:Label fontSize="20" fontWeight="bold" text="{data.skillName}"/> 
```

填充此渲染器的 ArrayCollection 是我自己的 Web 服务返回的 xml 文件。我已经测试了该文件，并且在这种情况下使用 SkillName 应该是正确的。

您需要查看更多代码或更多信息吗？让我知道！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-31T09:45:30.797

我发现我正在处理一个二维 ArrayCollection。我没有正确引用此 ArrayCollection 中的项目，这就是无法识别这些属性的原因。

# c# - 运行时中的装配位置更改

> ID：14057028
> 
> 赞同：2
> 
> 时间：2012-12-27T15:26:04.200
> 
> 标签：c#, assemblies, custom-attributes, coded-ui-tests

我正在运行编码的 ui 自动化并定义了一个方法属性，称为`[ExternalDataSource()]`读取文档（csv、xml ...）并将数据解析到一些字典中。我将它复制在这里，以便您更好地了解：

```
[System.AttributeUsage(System.AttributeTargets.Method)]
public class ExternalDataSource : System.Attribute
{
    public ExternalDataSource(string filename)
    {
        DirectoryInfo di = new DirectoryInfo(Assembly.GetExecutingAssembly().Location);

        string file = Path.Combine(Path.GetDirectoryName(di.FullName), filename);

        try
        {
            code
        }
        catch (Exception)
        {
            throw new UITestException("Cannot load data source document");
        }
    }
} 
```

在其中，我尝试访问`Assembly.GetExecutingAssembly().Location`以获取复制到 TestResult/Out 文件夹的文件。我将此属性仅分配给整个应用程序中的一个 TestMethod() ，在调试时，我发现应用程序两次进入该属性的 c'tor。两次位置都不一样。一旦它来自 bin/Debug 文件夹，另一次来自 TestResults/Out 文件夹。两个问题：

1.  如果我在应用程序中只调用一次，为什么调试器会两次输入该属性？
2.  为什么同一个程序集的位置会发生变化？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T16:04:21.693

好吧，似乎没有人有答案，但是在使用`mstest.exe`vs2012 JIT 调试器从命令行调试运行时，我发现了一件奇怪的事情：

将 a`System.Diagnostics.Debugger.Break()`放入此属性为 jitter 的类中时，从**MSTest.exe**调用了但当此断点位于`testmethod`使用此属性修饰时，调用了**QTAgent32.exe**。我已经实现了一个单例类来处理我的参数，并且当它由 MSTest 在此属性中填充到 ExternalDataSource 中时，在输入 QTAgent32（测试）时它是空的。

对我有用的解决方案就是用`[TestInitialize()]`.

希望这可以帮助某人。

# jquery - Uploadifive - formData 通过多选数组传递

> ID：14057038
> 
> 赞同：0
> 
> 时间：2012-12-27T15:26:59.427
> 
> 标签：jquery, uploadify

我一直在研究我的新的多上传系统。目前一切正常，但我遇到了问题。目前，我通过“formData”发送的所有相关表单数据都可以通过，但多选表单项除外。这应该是一个数组，但由于某种原因，它不会让我发送选定的选项。

```
var selectedAlbum = $('#upload_selection_albums').val();
var selectedFormats = $('#upload_selection_formats').val();

$('#file_upload').uploadifive({

'auto' : false,
'queueID' : 'queue',
'formData' : {'data_albums' : selectedAlbum,
'data_formats' : selectedFormats},
'uploadScript' : '/media/uploads/upload-file',

}); 
```

任何人都知道如何解决它，我已经调试了很长时间了。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-29T18:04:42.773

一直在进行适当的修复，结果证明非常简单。formData 元素不支持数组（据我所知）。所以我需要通过uploadScript 属性传递我的额外表单数据。

```
$(function() {

        $('#file-upload-test').on('click', function() {

            var uploadSettingsForm = $('#upload');
            var uploadSettingsFormData;

            uploadSettingsFormData = decodeURIComponent(uploadSettingsForm.serialize());
            uploadSettingsFormData = '/media/uploads/upload-file?' + uploadSettingsFormData;
            console.log(uploadSettingsFormData);

            $('#file_upload').data('uploadifive').settings.uploadScript = uploadSettingsFormData;
            $('#file_upload').uploadifive('upload');

            return false;

        });

        $('#file_upload').uploadifive({

            'auto'         : false,
            'queueID'      : 'queue',
            'itemTemplate' : '<div class="progress progress-striped active uploadifive-queue-item"><div class="bar progress-bar"><span class="filename"></span><span class="fileinfo"></span></div></div>',       
            'onDrop'       : function(file, fileDropCount) {
                $('#queue').removeClass('drag-drop-overlay');
            },
            'onSelect'     : function(queue) {
                $('#queue').removeClass('drag-drop-overlay');
            }

        });

    }); 
```

# c# - 同步重绘窗口控件（使用阻塞方法）

> ID：14057039
> 
> 赞同：6
> 
> 时间：2012-12-27T15:27:05.903
> 
> 标签：c#, winapi, gdi, invalidation, redraw

我要做的是使控件（在同一进程中，但我无法控制）重绘自身，**并让我的代码阻塞，直到它完成重绘**。

我尝试使用[`UpdateWindow`](http://msdn.microsoft.com/en-us/library/windows/desktop/dd145167%28v=vs.85%29.aspx)，但这似乎并没有等待重绘完成。

我需要等待它完成重绘的原因是我想在之后抓取屏幕。

该控件不是 dotNet 控件，而是常规的 windows 控件。

我已经确认：

*   手柄是正确的。
*   `UpdateWindow`返回真。
*   尝试`InvalidateRect(hWnd, IntPtr.Zero, true)`在调用之前发送`UpdateWindow`以确保窗口需要失效。
*   尝试在控件的父窗口上做同样的事情。

使用的代码：

```
[DllImport("user32.dll")]
[return: MarshalAs(UnmanagedType.Bool)]
private static extern bool InvalidateRect(IntPtr hWnd, IntPtr rect, bool bErase);

[DllImport("user32.dll")]
[return: MarshalAs(UnmanagedType.Bool)]
private static extern bool UpdateWindow(IntPtr hWnd);

public bool PaintWindow(IntPtr hWnd)
{
    InvalidateRect(hWnd, IntPtr.Zero, true);
    return UpdateWindow(hWnd);
}
//returns true 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T20:20:51.597

[您可以使用Application.DoEvents](http://msdn.microsoft.com/en-us//library/system.windows.forms.application.doevents.aspx)强制应用程序处理所有排队的消息（包括 WM_PAINT！）。像这样的东西：

```
public bool PaintWindow(IntPtr hWnd)
{
    InvalidateRect(hWnd, IntPtr.Zero, true);
    if (UpdateWindow(hWnd))
    {
        Application.DoEvents();
        return true;
    }

    return false;
} 
```

[`WM_PRINT`](http://msdn.microsoft.com/en-us/library/windows/desktop/dd145216%28v=vs.85%29.aspx)但如果你还是要抢屏，发消息一石两鸟不是更好吗？

您可以通过以下代码来完成：

```
internal static class NativeWinAPI
{
    [Flags]
    internal enum DrawingOptions
    {
        PRF_CHECKVISIBLE = 0x01,
        PRF_NONCLIENT = 0x02,
        PRF_CLIENT = 0x04,
        PRF_ERASEBKGND = 0x08,
        PRF_CHILDREN = 0x10,
        PRF_OWNED = 0x20
    }

    internal const int WM_PRINT = 0x0317;

    [DllImport("user32.dll", CharSet = CharSet.Auto)]
    internal static extern IntPtr SendMessage(IntPtr hWnd, UInt32 Msg,
        IntPtr wParam, IntPtr lParam);
}

public static void TakeScreenshot(IntPtr hwnd, Graphics g)
{
    IntPtr hdc = IntPtr.Zero;
    try
    {
        hdc = g.GetHdc();

        NativeWinAPI.SendMessage(hwnd, NativeWinAPI.WM_PRINT, hdc,
            new IntPtr((int)(
                NativeWinAPI.DrawingOptions.PRF_CHILDREN |
                NativeWinAPI.DrawingOptions.PRF_CLIENT |
                NativeWinAPI.DrawingOptions.PRF_NONCLIENT |
                NativeWinAPI.DrawingOptions.PRF_OWNED
                ))
            );
    }
    finally
    {
        if (hdc != IntPtr.Zero)
            g.ReleaseHdc(hdc);
    }
} 
```

# javascript - 带分页的数据表

> ID：14057041
> 
> 赞同：0
> 
> 时间：2012-12-27T15:27:11.790
> 
> 标签：javascript, api, datatable

嗨，我正在尝试在我的 API 上创建自定义分页，但我一无所知。

我在 API 上有一个复杂的 DataTable 对象，它是使用 severla 信息源创建的，这就是我在我的 API http//:myapi/getdata/2 中公开的内容

任何人都知道如何在 DataTable 上实现分页。我试图使用数据表的 select 方法，但我不确定我是否可以使用它执行复杂的查询另外我正在以 JSON 格式返回我的信息以在 RadGrid 中使用

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-28T12:48:40.813

我必须制作一个带有分页、排序和过滤的数据表。我尝试了很多以自定义方式制作它。但事实证明，这既麻烦又耗时。所以我搜索了这个可以轻松创建数据表的 jQuery 插件。这是链接： [带有 PHP 和 MySQL 的 jQuery Datatbles 插件](http://www.sharemycode.com/item/view/95/jquery-datatables-plugin-example-with-php-mysql)

希望这个插件可以帮助您创建自定义分页 API :)

# ruby-on-rails - 经纬度转换

> ID：14057044
> 
> 赞同：0
> 
> 时间：2012-12-27T15:27:21.020
> 
> 标签：ruby-on-rails, gps

我需要将 ddmm.mmmmm（小数点后 4 位的分钟数）格式的纬度转换为 ddmm.mmmmmm（小数点后 5 位的分钟数）格式。有什么好的公式可以转换吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T16:13:20.500

我得到了答案

我们需要按照以下步骤进行此转换 1\. 使用以下公式将 ddmm.mmmm 格式的值转换为 dd.ddddddd = dd + ( mm.mmmm / 60 )

1.  转换回 ddmm.mmmmm = concat(dd, (.dddddd * 60))

    例子：

    从 ddmm.mmmm 格式转换 3323.8733

    1.  转换为度数 (dd.dddd) 格式 33 + (23.8733 / 60 ) = 33.397888333333334

    2.  转换回 ddmm.mmmmm 格式将小数部分乘以 60 即 0.397888333333334 * 60 => 23.87330000000004 附加度数 3323.87330000000004

        因为我们需要 ddmm.mmmmm 我们可以四舍五入 5 位小数，即 3323.87330

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T21:01:23.577

没有其他信息，我建议遵循 mkk 的建议。

如果要将“ddmm.mmmmm”（小数点后 4 位）转换为“ddmm.mmmmm”（小数点后 5 位），您可能应该只在末尾添加一个零。

通过在小数点后第五位放置一个非零值，其他方法可能会给出更令人满意的结果。但他们*不能添加*比原始数字更多的信息。然而，由于数学计算[中重要性的丧失，可能会丢失信息。](https://en.wikipedia.org/wiki/Loss_of_significance)

# c# - 使用会员提供者登录用户

> ID：14057049
> 
> 赞同：0
> 
> 时间：2012-12-27T15:27:37.473
> 
> 标签：c#, asp.net, asp.net-mvc-3

嗨，我正在尝试使用 asp.net MVC3 创建一个电子商务网站。我在我必须将用户登录到我的应用程序的部分。我可以验证它的凭据，但我似乎无法让他登录。这是我到目前为止所拥有的：

```
if(Membership.ValidateUser(model.Username , model.Password))
{
    if(string.IsNullOrEmpty(returnUrl))
    {
        return RedirectToAction("Index", "Home");
    }
    else
    {
        return RedirectToAction("Index" , returnUrl);
    }
} 
```

我知道我仍然需要在此处添加一些内容才能将用户登录到我的应用程序，但我不知道是什么。谁能告诉我接下来我要做什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T15:30:22.980

如果您使用表单身份验证，则需要设置身份验证 cookie：

```
 if(Membership.ValidateUser(model.Username , model.Password))
    {
        FormsAuthentication.SetAuthCookie( model.UserName, model.RememberMe );
        if(string.IsNullOrEmpty(returnUrl))
            {//... 
```

此外，您应该阅读这篇关于[防止开放重定向攻击](http://www.asp.net/mvc/tutorials/security/preventing-open-redirection-attacks)的文章。

# html - 如何在 CSS、HTML 中引用这一行

> ID：14057054
> 
> 赞同：1
> 
> 时间：2012-12-27T15:27:56.127
> 
> 标签：html, css

一般来说，我对 CSS 和 HTML 还是很陌生，所以我的知识有限。我想将一些样式代码从我的 HTML 代码中移到 css 中。我有这个：

```
<fieldset class="login"> 
   ...
   <asp:Button class="mybutton" ID="_login" runat="server" Text="Login" style="float:right; margin-right:20px;"/>
   ...
</fieldset> 
```

在 CSS 中，我像这样引用整个登录框：

```
fieldset.login
{
    ...
} 
```

但我想不通的是“fieldset.login”的等价物，所以我可以参考这`<asp:Button>`条线。我试过了

```
fieldset.login Button {} 
```

和其他类似的东西，但它们似乎对我不起作用。谢谢你的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-27T15:30:41.187

你应该可以使用这个：

```
fieldset.login .mybutton{
...
} 
```

# android - Android - 使用 GridView 在 LongClick 上拖动 - 无法启动拖动

> ID：14057055
> 
> 赞同：3
> 
> 时间：2012-12-27T15:28:01.823
> 
> 标签：android, gridview, drag-and-drop, long-click

我正在开发 SdCard 上所有图片的缩略图马赛克。如果用户长按图片，我想开始拖放过程。

我显然设法获取所有图像文件并在 GridView 中使用我自己的 BaseAdapter 显示它们，但是这个过程很长，因为我以这种方式创建每个图像的预览：

```
uri = Uri.fromFile(file);
                try {
                    bitmap = BitmapFactory.decodeStream(getContentResolver().openInputStream(uri));
                    if (bitmap != null) {
                        newBitmap = Bitmap.createScaledBitmap(bitmap, 200, 200, true);
                        bitmap.recycle();
                        // here code to add the bitmap to the adapter (see after)
                    }
                } catch (IOException e) {
                    //Error fetching image, try to recover
                } 
```

因此，为了避免长时间等待，我将图像加载到 AsyncTask 中。该过程运行良好，图像一张一张出现，但现在 LongClick 上出现错误，代码如下：

```
mGrid.setOnItemLongClickListener(new OnItemLongClickListener()
    {
        public boolean onItemLongClick(AdapterView<?> adapter, View view, int position, long id) 
        {
            ClipData data = ClipData.newPlainText("AdapterPosition", String.valueOf(position) );
            view.startDrag(data, new DragShadowBuilder(view), null, 0);

            return true;
        }                       
    }); 
```

和错误：

```
 12-27 16:54:14.980: E/View(8089): Unable to initiate drag
12-27 16:54:14.980: E/View(8089): java.lang.NullPointerException
12-27 16:54:14.980: E/View(8089):   at android.view.View.startDrag(View.java:11470)
12-27 16:54:14.980: E/View(8089):   at renault.limandroid.widget.PartageWidgetActivity$9.onItemLongClick(PartageWidgetActivity.java:547) 
```

有人有想法吗？

这是我的代码的很大一部分：

```
 @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_partage_widget);

        // ... //

        mImageAdapter = new ImageAdapter(this);
        loadImages();
        mGrid.setOnItemLongClickListener(new OnItemLongClickListener()
        {
            public boolean onItemLongClick(AdapterView<?> adapter, View view, int position, long id) 
            {
                ClipData data = ClipData.newPlainText("AdapterPosition", String.valueOf(position) );
                view.startDrag(data, new DragShadowBuilder(view), null, 0);

                return true;
            }                       
        }); 
        mGrid.setAdapter(mImageAdapter);
}

        private void loadImages() 
    {
        // si c'est la première fois qu'on passe ici
        if (mLoadImageTask.getStatus() == AsyncTask.Status.PENDING)
        {
            mLoadImageTask.execute();
        }
        // si le scan est terminé mais qu'on veut le remettre à jour
        // on va recréer la tâche
        else if (mLoadImageTask.getStatus() == AsyncTask.Status.FINISHED)
        {
            mLoadImageTask = new LoadImagesFromSDCard();
            mLoadImageTask.execute();
        }
        }

@Override
        protected Object doInBackground(Object... params) {

            setProgressBarIndeterminateVisibility(true); 
            Log.d(TAG,"LoadImages - do in background");

            Bitmap bitmap = null;
            Bitmap newBitmap = null;
            Uri uri = null;            

            List<File> listFiles = new ArrayList<File>();
            listFiles = StorageManager.findImageFiles();

            for (File file : listFiles) 
            {
                            // mImageListFile contains the files that have already been loaded
                if (!mImageListFile.contains(file))
                {   
                    uri = Uri.fromFile(file);
                    try {
                        bitmap = BitmapFactory.decodeStream(getContentResolver().openInputStream(uri));
                        if (bitmap != null) {
                            newBitmap = Bitmap.createScaledBitmap(bitmap, 200, 200, true);
                            bitmap.recycle();
                            if (newBitmap != null) {
                                publishProgress(new LoadedImage(newBitmap));
                            }
                        }
                    } catch (IOException e) {
                        //Error fetching image, try to recover
                    }

                    mImageListFile.add(file);
                }
            }

            return null;
        }
        /**
         * Add a new LoadedImage in the images grid.
         *
         * @param value The image.
         */
        @Override
        public void onProgressUpdate(LoadedImage... value) 
        {
            mImageAdapter.addPhoto(value[0]); 
            mImageAdapter.notifyDataSetChanged();   
        }
        /**
         * Set the visibility of the progress bar to false.
         * 
         * @see android.os.AsyncTask#onPostExecute(java.lang.Object)
         */
        @Override
        protected void onPostExecute(Object result) 
        {
            setProgressBarIndeterminateVisibility(false);
            mGrid.invalidate();
        }
    }

class ImageAdapter extends BaseAdapter {

        private Context mContext; 
        private ArrayList<LoadedImage> photos = new ArrayList<LoadedImage>();

        public ImageAdapter(Context context) {
            mContext = context;
            photos.add(new LoadedImage(BitmapFactory.decodeResource(context.getResources(),
                    R.drawable.click)));
        }

        public void addPhoto(LoadedImage photo) 
        { 
            photos.add(photo); 
        } 

        public int getCount() { 
            return photos.size(); 
        } 

        public long getItemId(int position) { 
            return position; 
        } 

        public View getView(int position, View convertView, ViewGroup parent) 
        { 
            final ImageView imageView;  
            final int pos = position;

            if (convertView == null) { 
                imageView = new ImageView(mContext); 
            } else { 
                imageView = (ImageView) convertView; 
            } 

            imageView.setScaleType(ImageView.ScaleType.CENTER_INSIDE);
            imageView.setPadding(2, 2, 2, 2);
            imageView.setLayoutParams(new GridView.LayoutParams(parent.getWidth()/4, parent.getWidth()/4));
            imageView.setImageBitmap(photos.get(position).getBitmap());

            return imageView; 
        }

        public Object getItem(int position) 
        {
            return photos.get(position);
        } 

    }

    /**
     * A LoadedImage contains the Bitmap loaded for the image.
     */
    private static class LoadedImage {
        Bitmap mBitmap;

        LoadedImage(Bitmap bitmap) {
            mBitmap = bitmap;
        }

        public Bitmap getBitmap() {
            return mBitmap;
        }
    } 
```

# c++ - 如何在 WebView（QtQuick 2.0 和 QtWebKit 3）中使用 statusChanged？

> ID：14057057
> 
> 赞同：3
> 
> 时间：2012-12-27T15:28:06.067
> 
> 标签：c++, qml, qtwebkit, qt-quick

在 QtQuick 1.0 和 QtWebKit 1.0 中，我可以在页面准备好后执行 onLoadFinished 函数。如何分别在版本 2 和 3 中执行此操作？

文档中有一个 statusChanged。我不明白如何使用它。

以前我有：

```
import QtQuick 2.0
import QtWebKit 3.0

WebView {
    width: 700
    height: 800

    url:"http://www.yahoo.com"
    settings.developerExtrasEnabled : true

    id: webView
    objectName: "myWebView"

    onLoadFinished: evaluateJavaScript("window.setTimeout('window.location.reload()',5000);")

} 
```

但它显示错误：
无法分配给不存在的属性“onLoadFinished”

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-27T22:58:32.573

您必须使用`onLoadingChanged`信号和 loadRequest 对象来检查确切的状态：http: [//qt-project.org/doc/qt-5.0/qtwebkit/qml-qtwebkit3-webview.html#onLoadingChanged-signal](http://qt-project.org/doc/qt-5.0/qtwebkit/qml-qtwebkit3-webview.html#onLoadingChanged-signal)

```
import QtQuick 2.0
import QtWebKit 3.0

WebView {
    width: 700
    height: 800

    url:"http://google.com"

    id: webView
    objectName: "myWebView"

    onLoadingChanged: {
        console.log("onLoadingChanged: status=" + loadRequest.status);
        if (loadRequest.status == WebView.LoadStartedStatus) 
            console.log("Loading started...");
        if (loadRequest.status == WebView.LoadFailedStatus) {
           console.log("Load failed! Error code: " + loadRequest.errorCode);
           if (loadRequest.errorCode === NetworkReply.OperationCanceledError)
               console.log("Load cancelled by user");
        } 
        if (loadRequest.status == WebView.LoadSucceededStatus) 
            console.log("Page loaded!");
    }

} 
```

该`onLoadingChanged`信号在任何页面加载开始、结束或失败时出现。loadRequest 提供了各种只读参数：

*   url：正在加载的资源的位置。
*   status：反映三种负载状态之一：LoadStartedStatus、LoadSucceededStatus 或 LoadFailedStatus。请参阅 WebView::LoadStatus。
*   errorString：加载错误的描述。
*   errorCode：HTTP 错误代码。
*   errorDomain：高级错误类型，NetworkErrorDomain、HttpErrorDomain、InternalErrorDomain、DownloadErrorDomain 或 NoErrorDomain 之一。请参阅 WebView::ErrorDomain。

# git - GitHub 如何形成拉取请求

> ID：14057069
> 
> 赞同：5
> 
> 时间：2012-12-27T15:29:05.230
> 
> 标签：git, github, git-diff, pull-request

我有一个分支，它已经将 master 合并了几次（以获得该功能分支的最新错误修复）。现在我想看看我开始在那个分支工作后所做的所有更改，所以我尝试了`git diff start_commit..HEAD`. 但是我注意到 git 也显示了那些合并的提交，所以这不是我想要的。

然后我尝试从该分支创建一个拉取请求，看看是否同样适用于 GitHub 的拉取请求，但注意到拉取请求只显示我想要的更改。

分支看起来像这样

```
master: A---B---C---D---E---F
         \       \       \
feature:  G---H---I---J---K---L 
```

问题是 git diff A..L 正在显示来自 AL 的所有提交，但 GitHub 的拉取请求只显示我想要的 GL。

那么 GitHub 使用什么命令（或多个命令）来形成拉取请求？

编辑：添加了一张图片

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-27T15:38:57.943

看一下这个。来自 git 文档：

```
Comparing branches

    $ git diff topic master    <1>
    $ git diff topic..master   <2>
    $ git diff topic...master  <3>

1\. Changes between the tips of the topic and the master branches.

2\. Same as above.

3\. Changes that occurred on the master branch since when the topic branch was started off it. 
```

# jquery - Kendo Controls - SCRIPT28：堆栈空间不足

> ID：14057071
> 
> 赞同：2
> 
> 时间：2012-12-27T15:29:20.133
> 
> 标签：jquery, kendo-ui

我正在测试非常标准的剑道控件，例如，每次单击饼图或任何其他图表时，我都会在浏览器中获得“堆栈空间不足”。还有人得到这个吗？

```
$(document).ready(function () {
    $("#piechart").kendoChart({
        dataSource: ds_array
        seriesDefaults: {
            type: "pie",
            labels: {
                visible: true
            }
        },
        title: {
            text: "Monthly Revenue per Location"
        },
        legend: {
            position: "bottom"
        },
        series: [{
            field: "revenue",
            categoryField: "location"
        }],
        tooltip: {
            visible: true,
            format: "N0"
        }
    });
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T16:49:52.217

it seems that the version of the jquery js file was outdated. I downloaded the newest one (1.8.3) and it worked fine.

# ios - UICollectionViewController 中的 UIRefreshControl 移动了一半的移动

> ID：14057075
> 
> 赞同：1
> 
> 时间：2012-12-27T15:29:41.660
> 
> 标签：ios, objective-c, iphone, ios6

我想使用`UIRefreshControl`专`UITableViewController`为`UICollectionViewController`. 我将`UIRefreshControl`作为子视图添加到`UICollectionView`. 它工作正常，但它移动了我下拉的一半距离。因此，难以下拉刷新控制来更新/刷新内容。这就是为什么我要进行刷新控制以准确地下拉我下拉的量。你有什么解决办法吗？

# android - 在android中创建2个不同的弹出菜单

> ID：14057076
> 
> 赞同：1
> 
> 时间：2012-12-27T15:29:42.387
> 
> 标签：android, popupmenu

我的 sign_up.xml 文件是：

```
public class sign_upActivity extends Activity implements AlertPositiveListener{

private RadioGroup radioGenderGroup,radioEduGroup;
private RadioButton radioGenderButton,radioEduButton;
int position = 0;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.sign_up);
<LinearLayout
        android:id="@+id/linearLayout8"
        android:layout_width="match_parent"
        android:layout_height="wrap_content" >
        <Button
            android:id="@+id/gender_btn"
            android:layout_width="30dp"
            android:layout_height="34dp"
            android:layout_weight="0.06"
            android:background="@drawable/arraw_left" />

        <TextView
            android:id="@+id/gender_tv"
            android:layout_width="wrap_content"
            android:textColor="@color/Black"
            android:gravity="right"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:text="" />
    </LinearLayout>

    <LinearLayout
        android:id="@+id/linearLayout10"
        android:layout_width="match_parent"
        android:layout_height="wrap_content" >
        <Button
             android:id="@+id/education_btn"
             android:layout_width="30dp"
             android:layout_height="34dp"
             android:layout_weight="0.06"
             android:background="@drawable/arraw_left" />

        <TextView
            android:id="@+id/education_tv"
            android:layout_width="wrap_content"
            android:gravity="right"
            android:textColor="@color/Black"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:text="" />

    </LinearLayout> 
```

我有两个按钮。当单击其中一个时，会出现一个弹出菜单并要求用户选择单选按钮，然后单击确定。当单击另一个按钮时，会出现另一个弹出菜单并有另一个按钮。我的活动是：

```
 OnClickListener listener = new OnClickListener() {         
        @Override
        public void onClick(View v) {

            FragmentManager manager = getFragmentManager();
            AlertDialogRadio alert = new AlertDialogRadio();
            Bundle b  = new Bundle();
            b.putInt("position", position);
            alert.setArguments(b);
            alert.show(manager, "alert_dialog_radio");

        }
    }; 
    Button btn = (Button) findViewById(R.id.gender_btn);
    btn.setOnClickListener(listener);

}

@Override
public void onPositiveClick(int position) {

        this.position = position;
        TextView tv = (TextView) findViewById(R.id.gender_tv);
        tv.setText(Gender.code[this.position]); 
} 
```

}

和 AlertDialogRadio 是：

```
public class AlertDialogRadio  extends DialogFragment{

/** Declaring the interface, to invoke a callback function in the implementing activity class */
AlertPositiveListener alertPositiveListener;

/** An interface to be implemented in the hosting activity for "OK" button click listener */
interface AlertPositiveListener {
    public void onPositiveClick(int position);

    void onPositiveClick(int position, int type);
}

/** This is a callback method executed when this fragment is attached to an activity. 
 *  This function ensures that, the hosting activity implements the interface AlertPositiveListener 
 * */
public void onAttach(android.app.Activity activity) {
    super.onAttach(activity);
    try{
        alertPositiveListener = (AlertPositiveListener) activity;
    }catch(ClassCastException e){
        // The hosting activity does not implemented the interface AlertPositiveListener
        throw new ClassCastException(activity.toString() + " must implement AlertPositiveListener");
    }
}

/** This is the OK button listener for the alert dialog, 
 *  which in turn invokes the method onPositiveClick(position) 
 *  of the hosting activity which is supposed to implement it
 */ 
OnClickListener positiveListener = new OnClickListener() {      
    @Override
    public void onClick(DialogInterface dialog, int which) {
        AlertDialog alert = (AlertDialog)dialog;
        int position = alert.getListView().getCheckedItemPosition();            
        alertPositiveListener.onPositiveClick(position);            
    }
};

/** This is a callback method which will be executed 
 *  on creating this fragment
 */
@Override
public Dialog onCreateDialog(Bundle savedInstanceState) {

    /** Getting the arguments passed to this fragment */
    Bundle bundle = getArguments();     
    int position = bundle.getInt("position");

    /** Creating a builder for the alert dialog window */
    AlertDialog.Builder b = new AlertDialog.Builder(getActivity());

    /** Setting a title for the window */
    b.setTitle("Choose your version");      

    /** Setting items to the alert dialog */
    b.setSingleChoiceItems(Gender.code, position, null);

    /** Setting a positive button and its listener */
    b.setPositiveButton("OK",positiveListener);

    /** Setting a positive button and its listener */
    b.setNegativeButton("Cancel", null);

    /** Creating the alert dialog window using the builder class */
    AlertDialog d = b.create();

    /** Return the alert dialog window */
    return d;
} 
```

}

但我只能实现其中一个弹出菜单。有人帮我吗？

# python - 更改用户代理时在竹子中找不到测试

> ID：14057078
> 
> 赞同：2
> 
> 时间：2012-12-27T15:29:47.410
> 
> 标签：python, selenium, user-agent, bamboo

我有一组使用 Selenium 和 Python 在 Bamboo 中运行的测试。

我已将以下内容添加到我的脚本中（以便使用 iPhone 用户代理运行测试，而不是默认的）：

**

```
profile = webdriver.FirefoxProfile()
profile.set_preference("general.useragent.override",
                           "Mozilla/5.0 (iPhone; CPU iPhone OS 6_0 like Mac OS X) AppleWebKit/536.26 (KHTML, like Gecko) Version/6.0 Mobile/10A5376e Safari/8536.25")
driver = webdriver.Firefox(profile)
driver.implicitly_wait(15) 
```

**

在本地运行时，所有测试都正确运行，但在 Bamboo 中，我收到以下错误：“任务失败，因为预期有测试用例，但没有找到。”

我真的需要使用移动用户代理，否则，测试将在应用程序的桌面版本上运行，这不是我现在想要的。

任何建议将不胜感激。

# database - 如何测试我的 Oracle DB 版本是否支持 PIVOT 功能？

> ID：14057079
> 
> 赞同：4
> 
> 时间：2012-12-27T15:29:51.077
> 
> 标签：database, oracle, oracle11g

我需要找到一种方法来确定 Oracle 是 11g 还是更新版本，因为基本上我需要知道我正在运行的数据库是否支持 PIVOT。

ifself 获取版本号并不难，所以我有：

```
select * from v$version 
```

不幸的是，这并没有给出一个简单的数字，而是 5 条记录，包括 stings 和各种不同的版本号：

```
Oracle Database 10g Enterprise Edition Release 10.2.0.5.0 - 64bi
PL/SQL Release 10.2.0.5.0 - Production
CORE    10.2.0.5.0  Production
TNS for Linux: Version 10.2.0.5.0 - Production
NLSRTL Version 10.2.0.5.0 - Production 
```

那么，如果数据库支持 PIVOT 语句，有没有办法确定我的 Oracle 是 11g 或更高，甚至更好？

谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-27T15:48:32.607

确定您的 Oracle 版本是否支持的方法之一`PIVOT`是查询[V$RESERVED_WORDS](http://docs.oracle.com/cd/E11882_01/server.112/e25513/dynviews_2134.htm#i1412941)视图以找出保留字`PIVOT`是否存在。

```
SQL> select keyword
  2    from v$reserved_words
  3   where keyword = 'PIVOT'
  4  ;

KEYWORD
---------
PIVOT 
```

* * *

如果您正在编写一个代码（正如您在@Ben 的答案的评论中提到的那样， quote `I'm creating a procedure that generates and executes SQL statements for a datamart`）将利用您可以（并且它是首选方法）使用[dbms_db_version](http://docs.oracle.com/cd/B19306_01/appdev.102/b14258/d_dbver.htm)包进行条件编译的版本特定功能。例如：

```
 create or replace some_proc
 is
 begin
   $if dbms_db_version.ver_le_10_2 -- for example
   $then
     -- features up to 10g r2 version 
   $else
     -- current release  
   $end
 end; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-27T15:45:42.180

希望以下内容对你有所帮助

[检查 Oracle 版本](http://www.mydigitallife.info/check-oracle-version/)

[识别您的 Oracle 数据库软件版本](http://docs.oracle.com/cd/B28359_01/server.111/b28310/dba004.htm)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-27T15:46:10.920

我有点困惑为什么你不知道你已经在使用什么版本的 Oracle。

但是，您可以使用系统视图[PRODUCT_COMPONENT_VERSION](http://docs.oracle.com/cd/E11882_01/server.112/e25513/statviews_5148.htm#REFRN29037)来获取当前版本。这是 Oracle 建议[检查您当前版本号的](http://docs.oracle.com/cd/E11882_01/server.112/e25494/dba004.htm#ADMIN11039)方法。

```
select * from PRODUCT_COMPONENT_VERSION 
```

所以你可以看到输出；它也适用于[SQL Fiddle](http://www.sqlfiddle.com/#!4/d41d8/5573)。

# reporting-services - 在隐藏字段中添加“总页码”后出现 SSRS 错误？

> ID：14057084
> 
> 赞同：0
> 
> 时间：2012-12-27T15:30:26.913
> 
> 标签：reporting-services, page-numbering

在报告的页眉和页脚中添加了两个隐藏的文本框后，如下所示： ![在此处输入图像描述](../Images/fb54ee8acbe712ddd1e0cdc9ddb3c8db.png)

然后我收到以下错误：

![在此处输入图像描述](../Images/568b05d35f7dba3a3874aac05e2c5fe5.png)

内容如下：

> 本地报告处理过程中发生错误。报告 /RPT_Resp_Answr 的定义无效。tablix 'Tablix2' 有一个带有内部成员的详细信息成员。详细信息成员只能包含静态内部成员。

我对“详细信息成员只能包含静态内部成员”的部分感到困惑 - 是指页面 # 部分吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T16:09:02.233

我现在想通了，当我进入“Tablix 成员”时，“行组”部分下有一个特别引用的“详细成员”。

![在此处输入图像描述](../Images/41df5b4878f43df809e5e42bf66a0ce5.png)

然后我点击箭头广告说“删除组”

# sql - SQL SET DEFAULT 在 MS Access 中不起作用

> ID：14057085
> 
> 赞同：8
> 
> 时间：2012-12-27T15:30:29.147
> 
> 标签：sql, ms-access, default, alter-table, alter-column

> **可能重复：**
> [ALTER TABLE 语句中的 DEFAULT 子句导致语法错误](https://stackoverflow.com/questions/10440990/default-clause-in-alter-table-statement-resulting-in-syntax-error)

我正在尝试使用 MS Access 中的 SQL 查询执行以下语句；

```
ALTER TABLE [table] ALTER COLUMN [column] SET DEFAULT 'default value' 
```

但是，我得到一个显示错误的对话框`Syntax error in ALTER TABLE statement.`

当我单击确定时，它会突出显示单词`DEFAULT`。我还尝试了以下语句；

```
ALTER TABLE [table]
ADD CONSTRAINT [Default] DEFAULT 'default value' FOR [column] 
```

我得到另一个错误`Syntax error in CONSTRAINT clause.`

在 MS Access 中设置默认值的正确语法是什么？db 文件是 Access 2003 格式。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-27T15:54:20.123

`DEFAULT`Jet 4 (Access 2000) 的 Access DDL 中包含对 的支持。但是，它只能在从 ADO 连接执行的 DDL 中使用。

这适用于 Access 2007。

```
CurrentProject.Connection.Execute "ALTER TABLE MyTable " & _
    "ALTER COLUMN field2 SET DEFAULT ""foo"";" 
```

请注意，如果您的 db 文件是 Access 97 或更早版本，您将无法`DEFAULT`从 DDL 设置字段值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T16:09:54.773

看来，你的专栏会有`Constraint`问题。尽管遵循 DDL 语句是正确的方法。

```
ALTER TABLE Persons ALTER COLUMN City SET DEFAULT 'SANDNES' 
```

[参考](http://www.w3schools.com/sql/sql_default.asp)

# c# - 从该类的列表中的项目访问该类的成员

> ID：14057086
> 
> 赞同：1
> 
> 时间：2012-12-27T15:30:34.200
> 
> 标签：c#, list

```
class Section
{
    public string       Name;
    public List<Option> Options;

    public class Option
    {
        public string Name;
        public string Value;
        public string Path
        {
            get { return "SectionName.OptionName=Value"; }
        }
    }
} 
```

换句话说，我想从 Option 中访问 Section 的成员，该成员将始终用作列表。什么是实现这一点的优雅方法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-27T15:32:45.447

An`Option`需要对其的引用`Section`：

```
class Section
{
    public string       Name;
    public List<Option> Options;

    public class Option
    {
        public Section MySection { get; private set; }
        public string Name;
        public string Value;
        public string Path
        {
            get { return string.Format("{0}.{1}={2}", this.MySection.Name, this.Name, this.Value); }
        }

        public Option(Section mySection)
        {
            this.MySection = mySection;
        }
    }
} 
```

# java - 如何向所有 HTTP 请求方法发送“参数”？

> ID：14057089
> 
> 赞同：1
> 
> 时间：2012-12-27T15:30:40.507
> 
> 标签：java, api, http, rest, apache-httpclient-4.x

我正在尝试为使用 HTTP GET、POST、PUT 和 DELETE的[Gengo API](http://developers.gengo.com/v2/api_methods/)`HttpClient`编写 Java 客户端（使用 Apache ） 。但是，对于它们公开的每个 RESTful API“方法”，您必须将 API 密钥和签名作为“**参数**”传递。

 **这是否意味着查询字符串参数、POST 变量、键值对标头或其他内容？

我想我只是对所有这些不同 HTTP 请求方法的上下文中的“参数”一词的含义感到困惑。换句话说，当我可以使用 GET、POST、PUT 或 DELETE 时，我如何将 API 密钥作为“参数”传递给他们的 API？我的*理解*是只有 HTTP GET 可以处理查询字符串参数，而 HTTP POST 只能处理 POST 变量。而且我以前从未使用过 PUT 或 DELETE，所以我不确定它们需要什么。

所以我问：我可以使用什么机制通过所有4种请求方法发送API密钥/签名，或者它们都支持查询字符串参数的处理？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T16:28:45.960

你可以试试这个。它适用于我的带有 POST 请求的 HttpClient 应用程序。

```
DefaultHttpClient httpClient = new DefaultHttpClient();
httpClient.getParams().setParameter(name, value);
...... 
```

例如，我设置了连接超时：

```
httpClient.getParams().setIntParameter(HttpConnectionParams.CONNECTION_TIMEOUT, httpTimeout); 
```

然后，发送（执行）请求：

```
HttpResponse response = httpClient.execute([My HttpPost instance was here, but I think you can use HttpGet, HttpPut, and HttpDelete here as well]); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T15:56:57.267

所有动词都可以使用请求参数（也称为查询参数），并且无论您是否还发送正文，它们都将以相同的方式提供给服务器。

在您的示例（Gengo）中，页面上有一个关于[authentication](http://developers.gengo.com/v2/authentication/)的好示例。**

# bigdata - 什么是推荐的 Storm 发行版？

> ID：14057104
> 
> 赞同：1
> 
> 时间：2012-12-27T15:31:28.753
> 
> 标签：bigdata, apache-storm

我想尝试安装[Storm](https://en.wikipedia.org/wiki/Storm_%28event_processor%29)。

Storm 是否有像[Hadoop](http://en.wikipedia.org/wiki/Apache_Hadoop)（cloudera、mapr 等）这样的发行版？还是我应该自己安装（ZEROMQ、GZMQ 等）

版本呢？我在哪里可以找到要使用的版本？我看到 Storm 有 0.8.1。ZeroMq 已经是 3.2.2 版本。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-05T15:38:19.390

GitHub 上的[Storm-starter 项目](https://github.com/nathanmarz/storm-starter)是一个很好的起点。您可以轻松部署和运行本地拓扑（完全在您自己的机器上）。它对于启动并运行您的第一个拓扑非常有用。

如果您想将 Storm 部署到[Amazon AWS](http://en.wikipedia.org/wiki/Amazon_Web_Services)，您应该查看[Storm-deploy](https://github.com/nathanmarz/storm-deploy)项目。这将负责在 AWS（Zookeeper 等）上安装正确的依赖项。

学习曲线相当陡峭，但如果您阅读在线文档，您应该能够很快将示例拓扑部署到 AWS。

[Storm wiki](https://github.com/nathanmarz/storm/wiki)是 Storm 文档的主要来源。

# linq - 使用 linq 更新复杂对象列表的元素

> ID：14057105
> 
> 赞同：0
> 
> 时间：2012-12-27T15:31:33.110
> 
> 标签：linq, c#-4.0, linq-to-entities, linq-to-objects

大家好，提前感谢您的解决方案

我有这些物品

```
 List<AccessModuleInfo> listOfAccessModuleInfo = new List<AccessModuleInfo>();

    public class AccessModuleInfo
    {
       public int AccessModuleId { get; set; }
       public string AccessModuleName { get; set; }
       public List<AccessRoleInfo> ListOfAccessRole { get; set; }

     }

    public class AccessRoleInfo
    {
      public int AccessRoleId { get; set; }
      public string AccessRoleName { get; set; }
      public bool AccessRoleValue { get; set; }
    } 
```

我收到已经填充的 listOfAccessModuleInfo，当我尝试更新特定 AccessModuleInfo 中的 AccessRoleValue 时，所有具有相同 AccessRoleId 的 AccessRoleValue 都会更新。

我只想更新特定 AccessModuleInfo 的 AccessRoleValue（例如 AccessModuleId = 4）

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-14T13:29:38.677

通常这样的事情应该可以正常工作：

```
// You didn't confuse == vs = did you?
// Single also helps us debug and ensure we're only getting one result
var itemToUpdate = listOfAccessModuleInfo.Where(x => x.AccessModuleId == 4).Single();
itemToUpdate.ListOfAccessRole.ForEach(x => x.AccessRoleValue = newValue); 
```

# macos - 绘制了两个海关视图而不是一个

> ID：14057107
> 
> 赞同：0
> 
> 时间：2012-12-27T15:31:36.370
> 
> 标签：macos, cocoa, nsview

我正在 Cocoa 中开发一个带有两个自定义视图的小应用程序。自定义视图由两个独立的类控制。我在我的 AppDelegate 中设置了一个 NSTimer，它要求其中一个视图自行绘制，但问题是两个视图都在绘制。

我的方法如下所示：

```
- (void)timerMethod:(NSTimer *) theTimer
{
    [theOtherView setNeedsDisplay:YES];    // The View that needs to be drawn
    [theBackGroundView setNeedsDisplay:NO];    // Doesn't really do anything, thought it might though.
} 
```

我希望有人能指出我应该如何绘制我的观点的方向。

# php - php mail() 在服务器上不起作用

> ID：14057112
> 
> 赞同：1
> 
> 时间：2012-12-27T15:32:01.253
> 
> 标签：php, email, phplist

我的服务器上的 php mail() 函数有一点问题。它根本行不通。我使用了这样的简单脚本

```
<?php
$to      = 'myownemail@yahoo.com';
$subject = 'test title';
$message = 'hello';
$headers = 'From: admin@thisdomainlistedontheserver.com' . "\r\n" .
    'Reply-To: admin@thisdomainlistedontheserver.com' . "\r\n" .
    'X-Mailer: PHP/' . phpversion();

if( mail($to, $subject, $message, $headers) ){
    echo "SUCCESS";
}
else{
    echo "FAIL";
}
?> 
```

我已经在这台服务器上安装了 PHPList，所有的功能似乎都很好。我可以从我的 PHPList 安装中顺利发送测试电子邮件。所以我认为这可能与 sendmail 配置无关，相反，我的代码可能有问题。

但后来我在另一台服务器上测试了我的简单脚本。原来它工作得很好。在这个阶段我感到很困惑。那么这里的哪一部分有问题呢？是我的代码还是邮件服务器配置？

从哪里开始跟踪问题的好地方？

**更新**

我终于获得了访问邮件日志的特权...在 /var/log/mail.log 上，我有很多这行

`panther5 postfix/postdrop[4961]: warning: unable to look up public/pickup: No such file or directory`

我不知道这是什么错误？任何线索如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T10:40:52.590

尝试不使用**"$header"**。服务器上的标头可接受性很可能存在问题。此外，一些服务器使用带有**\@**的电子邮件地址。喜欢**myownemail\@yahoo.com**。

# java - 字符串验证器的可能改进？

> ID：14057117
> 
> 赞同：-1
> 
> 时间：2012-12-27T15:32:32.033
> 
> 标签：java, sql, jsf, validation

我已经制作了这个用于验证字符串插入表单字段的 Java 方法：

```
public void validateDatacenterName(FacesContext context, UIComponent component, 
                         Object value) throws ValidatorException, SQLException {
  String l;
  String s = value.toString().trim();

  if (s.length() > 18) {
    throw new ValidatorException(new FacesMessage(FacesMessage.SEVERITY_ERROR,
                        "  Value is too long! (18 digits max)", null));  
  }

  try {
    // l = Long.parseLong(s);
    // if (l > Integer.MAX_VALUE)
    // {
    //   throw new ValidatorException(new FacesMessage(FacesMessage.SEVERITY_ERROR,
    //                    "  '" + l + "' is too large!", null));  
    // }
  } catch(NumberFormatException nfe) { 
    l = null; 
  }

  if (s != null) {
    if (ds == null) 
      throw new SQLException("Can't get data source");

    Connection conn = null;
    PreparedStatement ps = null;
    ResultSet rs;
    int cnt = 0;
    try {
      conn = ds.getConnection();
      ps = conn.prepareStatement("SELECT count(1) from COMPONENTSTATS where COMPONENTSTATSID = ?");
      ps.setString(1, s);
      rs = ps.executeQuery();

      while(rs.next()) 
        cnt = rs.getInt(1);

      if (cnt > 0) {
        throw new ValidatorException(new FacesMessage(FacesMessage.SEVERITY_ERROR,
                        "  '" + s + "' is already in use!", null));                    
      }

    } catch(SQLException x) {
      throw new ValidatorException(new FacesMessage(FacesMessage.SEVERITY_ERROR,
                        "  SQL error!", null));                
    } finally {
      if (ps != null) 
        ps.close();
      if (conn != null) 
        conn.close();
    }                      
  } else {
    throw new ValidatorException(new FacesMessage(FacesMessage.SEVERITY_ERROR,
                        s.isEmpty() ? "  This field cannot be empty!" : "  '" + s + "' is not a valid name!", null));         
  }

} 
```

如何改进此代码？为了改进表单验证器，我可以添加任何其他检查吗？

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-27T15:53:27.030

*   StackOverflow 读者不会从您的描述中知道什么是有效的数据中心名称，因为我们不知道您的应用程序。它是数字的唯一要求吗？

*   如果该值应该是数字，为什么要注释掉调用的代码`parseLong()`？

*   检查 COMPONENTSTATS 中已使用的值会产生[竞争条件](http://en.wikipedia.org/wiki/Race_condition)。也就是说，即使在检查之后，其他一些应用程序线程也可以在您插入之前插入相同的值。为什么不用`UNIQUE`约束在数据库中强制执行唯一性？

*   `s.isEmpty()`当你知道的时候，你怎么能在你的`else`街区打电话`s == null`？

*   如果此方法是实现 javax.faces.validator.Validator 的类的一部分，该方法不应该命名`validate()`吗？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-27T15:50:21.290

*仅在确实需要*时才应使用正则表达式。使用您正在使用的当前验证，标准`String`方法就足够了。

您应该尽可能地保留验证相关任务的方法。为此，您应该将数据库调用提取到一个单独的方法中。

你也有一个`NullPointerException`等待发生在这里：

```
throw new ValidatorException(new FacesMessage(FacesMessage.SEVERITY_ERROR,
                        s.isEmpty() ? "  This field cannot be empty!" : "  '" + s + "' is not a valid name!", null)); 
```

此时`s`将被抛出，`null`然后`NullPointerException`才能抛出你的`ValidatorException`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-27T15:48:47.520

一些建议：

1.  用于通过定义一组允许的字符和/或符号`Regex`来验证's 结构`Stirng`
2.  将您的空检查逻辑移到`if(s.length() > 18)`. If `s`is`null`该子句将导致`NullPointerException`.
3.  修复您的空检查：`if (s != null)`将允许`s = ""`，因为它不为空，打破您尝试验证空字符串的 else 语句（这将在`NullPointerException`您创建验证消息时导致）。`if(s != null && !s.isEmpty())`如果您想在两种情况下执行不同的逻辑，请使用或将该验证一分为二。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-27T15:41:06.560

要么**我会在网络上搜索已经实现的验证**，要么我会制作一个字符列表，我希望允许使用字符串，然后检查输入，例如使用输入不包含任何其他字符的正则表达式。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-27T15:47:07.470

在`if (s.length() > 18)`检查之前我认为你应该检查 s 是否为空

```
if (s !=null && s.length() > 18) 
```

并且最好对字符串进行空检查`s.isEmpty()`

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-12-27T15:35:07.867

我会用正则表达式验证。

不幸的是，我不知道给出确切的字符串，但我确信每天使用它的人不会在 3 秒内使用它 :) 我知道这将是最好的方法。

# php - 动态选择文件的 PHP 文件大小

> ID：14057119
> 
> 赞同：3
> 
> 时间：2012-12-27T15:32:47.837
> 
> 标签：php, filesize

我有一个 php 脚本，需要在由单独的 php 脚本操作后确定文件系统上文件的大小。

例如，存在一个大小固定的 zip 文件，但会根据尝试访问它的用户将一个未知大小的附加文件插入其中。因此，提供文件的页面类似于 getfile.php?userid=1234。

到目前为止，我知道这一点：

```
filesize('getfile.php'); //returns the actual file size of the php file, not the result of script execution

readfile('getfile.php'); //same as filesize()

filesize('getfile.php?userid=1234'); //returns false, as it can't find the file matching the name with GET vars attached

readfile('getfile.php?userid=1234'); //same as filesize() 
```

有没有办法读取 php 脚本的结果大小而不仅仅是 php 文件本身？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T15:39:17.377

[文件大小](http://php.net/filesize)

> 从 PHP 5.0.0 开始，这个函数也可以与一些 URL 包装器一起使用。

就像是

```
filesize('http://localhost/getfile.php?userid=1234'); 
```

应该够了

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-27T16:50:29.933

有人发布了使用 curl 执行此操作的选项，但在否决后删除了他们的答案。太糟糕了，因为这是我让它工作的一种方式。所以这是他们对我有用的答案：

```
$ch = curl_init('http://localhost/getfile.php?userid=1234');
curl_setopt($ch, CURLOPT_RETURNTRANSFER, true); //This was not part of the poster's answer, but I needed to add it to prevent the file being read from outputting with the requesting script
curl_exec($ch);

$size = 0;

if(!curl_errno($ch))
{
    $info = curl_getinfo($ch);
    $size = $info['size_download'];
}

curl_close($ch);

echo $size; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-27T15:40:45.960

获得输出大小的唯一方法是运行它然后查看。根据脚本的不同，结果可能会有所不同，但对于实际使用，最好的办法是根据您的知识进行估计。即，如果您有一个 5MB 的文件并添加另一个 5k 用户特定的内容，它最终仍然是大约 5MB 等等。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-27T15:41:04.777

扩展伊万的答案：

您的字符串是带有或不带有 GET 参数的“getfile.php”，这被视为本地文件，因此检索 php 文件本身的文件大小。

它被视为本地文件，因为它不是以 http 协议开头的。有关支持的协议，请参阅[http://us1.php.net/manual/en/wrappers.php 。](http://us1.php.net/manual/en/wrappers.php)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-06-13T06:26:56.730

使用 filesize() 时出现警告：Warning: filesize() [function.filesize]: stat failed for ... *link* ... in .. *file* ... on line 233

而不是 filesize() 我找到了两个工作选项来替换它：

1) $headers = get_headers($pdfULR, 1); $fileSize = $headers['Content-Length']; 回声$文件大小；

2) 回声 strlen(file_get_contents($pdfULR));

现在它工作正常。

# ruby-on-rails - 未定义的局部变量或方法“customer_id”但存在 customer_id 字段并且存在一对多关联

> ID：14057122
> 
> 赞同：1
> 
> 时间：2012-12-27T15:32:59.363
> 
> 标签：ruby-on-rails, activerecord

尝试更新用户表中的 customer_id 列时出现此错误，但不知道原因。用户模型 has_many :orders 和 Order 模型 belongs_to :user，orders 表具有正确的 users_id 外键，其他依赖这种关系的东西工作正常。

错误：

```
undefined local variable or method `customer_id' for #<Order:0x007ff27014f9f0>

app/models/order.rb:16:in `save_with_payment'
app/controllers/orders_controller.rb:53:in `block in create'
app/controllers/orders_controller.rb:52:in `create' 
```

订单.rb

```
belongs_to :user

def save_with_payment
if valid?
  customer = Stripe::Customer.create(description: email, card: stripe_card_token)
  self.stripe_customer_token = customer.id
  self.user.update_column(customer_id, customer.id) # this is line 16
  save!

  Stripe::Charge.create(
      :amount => (total * 100).to_i, # in cents
      :currency => "usd",
      :customer => customer.id
  )

end
rescue Stripe::InvalidRequestError => e
logger.error "Stripe error while creating customer: #{e.message}"
errors.add :base, "There was a problem with your credit card."
false
end 
```

订单控制器.rb

```
def create
if current_user
  @order = current_user.orders.new(params[:order])
else
  @order = Order.new(params[:order])
end
respond_to do |format|        # this is line 52
  if @order.save_with_payment # this is line 53

    format.html { redirect_to auctions_path, :notice => 'Your payment has been successfully processed and your credit card has been linked to your account.' }
    format.json { render json: @order, status: :created, location: @order }
    format.js
  else
    format.html { render action: "new" }
    format.json { render json: @order.errors, status: :unprocessable_entity }
    format.js
  end
end
end 
```

用户.rb

```
has_many :orders 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-27T15:35:59.943

```
self.user.update_column(:customer_id, customer.id) 
```

# .net - 如何检测某些应用程序是否在特定时间间隔内工作

> ID：14057124
> 
> 赞同：0
> 
> 时间：2012-12-27T15:33:11.050
> 
> 标签：.net

*我有一些 RIA 服务的 WPF 客户端。*

该客户端定期发出请求并更新数据库中的**LastActivity 字段**( `DateTime`)。（实际上它每 10 秒更新一次此文件。）

现在我必须检测到这个应用程序工作**N 时间间隔，所以我可以停止它**。

是否可以仅使用一个字段来实现，或者我必须添加一些额外的方法/代码/数据库字段？甚至我必须创建一些检查此字段等的 Windows 服务？

感谢您的任何建议！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T09:47:55.660

你肯定需要更多的东西 - 我看到的最简单的解决方案是添加另一列，例如 ActivityTimeInSeconds

然后在服务收到更新请求后，您执行此操作（半伪）：

```
Dim ddiff as integer = DateDiff(DateInterval.Second,LastActivityField,Now)
If ddiff<20 then ''// if 20seconds not passed since last update recieved
   ActivityTimeInSeconds+=ddiff ''//add interval from last update to 
Else
   ActivityTimeInSeconds=0 ''//reset this if itivity was longer before this request
End If
LastActivityField = Now 
```

# html - 在 Twitter Bootstrap 中将网站大小调整为 940 像素或更低之前制作 .btn-navbar 显示

> ID：14057130
> 
> 赞同：0
> 
> 时间：2012-12-27T15:33:37.560
> 
> 标签：html, css, twitter-bootstrap

真的是基本问题。我喜欢 .btn-navbar 和它的响应能力。默认情况下，它将在 940px 或以下启动。我的问题是如何让 .btn-navbar 始终处于活动**状态**。我希望用户看到的只是要导航的 .btn-navbar。这是我现在拥有的代码，尽管我怀疑 .js 文件需要调整：

```
<div class="row-fluid">
    <nav class="navbar navbar-static-top navbar-inverse">
        <div class="navbar-inner">
            <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </a>
            <a class="brand" href="#">Home</a>
            <div class="nav-collapse">
                <ul class="nav">
                    <li class="active"><a href="#">Home</a></li>
                    <li><a href="#">About</a></li>
                    <li><a href="#">Blog</a></li>
                    <li><a href="#">Portfolio</a></li>
                    <li><a href="#">Resources</a></li>
                </ul>
            </div>

        </div>
    </nav>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T19:02:52.333

在**bootstrap-responsive.css**文件的第 1078 行，您会发现：

```
 .navbar .btn-navbar {
    display: block;
  } 
```

您可以将其更改为：

```
.navbar {
        display: block;
      } 
```

然后，在**bootstrap.css**中添加：

```
.btn-navbar {
        display: block;
      } 
```

这将`.btn-navbar`显示在所有屏幕宽度中。

# visual-studio - 在 VS 文本框 C++ 中显示 char* 值

> ID：14057131
> 
> 赞同：2
> 
> 时间：2012-12-27T15:33:40.957
> 
> 标签：visual-studio, c++-cli

如果这个问题被问了很多次，我事先道歉，但问题是我在这里找不到与我的问题完全匹配的问题，也找不到与 Google 的问题完全匹配的问题。

我正在尝试使用 VS C++ 2010（Windows 窗体项目），但找不到在文本框中显示简单字符串（使用 char *variablename）的合理方法。

我几乎想出了如何将其他任何内容放入文本框中：

```
String^ word1 = "hello";
int num1 = 23;
double num2 = 24.6;
float num3 = 25.9;

    //The above 4 work but the next 2 do not 
char *word2 = "hello";
string word3 = "hello"; //I have included <string>!

textBox1->Text = Convert::ToString(variablename); 
```

如果我使用 char* 它输出“true”，如果我使用字符串它似乎无法转换它。

我想使用 char* 或 string 的原因是你不能在课堂上使用 String^ ！如果我可以在一个类中使用 String^，那么我会，但它是托管代码。

谁能告诉我如何解决这个问题？

# android - 为蜂窝制作的应用程序可以在姜饼中使用吗？

> ID：14057133
> 
> 赞同：1
> 
> 时间：2012-12-27T15:33:41.983
> 
> 标签：android, compatibility, android-3.0-honeycomb, android-2.3-gingerbread

我正在为蜂窝创建一个应用程序，包括姜饼中不存在的所有小部件。（如 NumberPicker 等）。

这个应用程序可以在姜饼中使用吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T15:39:12.020

不可以。您可以尝试将 NumberPicker 的自定义端口包含到您的应用程序中，但您可能必须自己编写。

# java - 切换内容视图时，Android ListView 不显示新添加的项目并擦除旧项目

> ID：14057134
> 
> 赞同：0
> 
> 时间：2012-12-27T15:33:44.077
> 
> 标签：java, android, listview

我在我的 xml 布局文件中定义了一个自定义列表视图。`onCreate`我可以通过数组适配器将项目添加到这个 ListView 内部方法。

但是，当我从另一个内容视图添加项目然后返回到具有 ListView 的内容视图时，所有项目都消失了，并且没有列出任何内容。即使打电话后`.notifyDataSetChanged();`

似乎我只能在当前显示包含 ListView 的内容视图时添加到列表中。这是默认行为吗？

**尝试解决方法失败**

我使用另一个数组来保留新添加的项目，然后在 ListView 再次可见时尝试添加它们。我不得不重写`onContentChanged()`这样做，但仍然没有添加任何项目。

所以主要问题是

## 即使它看不见并且仍然保留旧项目，我如何动态地将项目添加到 ListView？

PS：我不得不说 Android API 是我遇到过***的最糟糕的 API 之一。***

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T16:18:26.653

如果您更改内容视图，那么之前的所有视图都将被销毁。你在使用适配器吗？如果是这样，那么将所有项目再次添加到列表中将非常容易。

除了在 onCreate 之外，不应该有任何理由在任何时候设置内容视图。

如果您希望拥有多个屏幕，而不是更改内容视图，请开始一个新活动。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-27T15:39:46.213

动态添加项目：

```
//add at the top of the list
mListView.addHeaderView(itemView);
// add at the bottom of the list
mListView.addFooterView(itemView); 
```

# python - Python中的“导入”到底是如何工作的？

> ID：14057136
> 
> 赞同：1
> 
> 时间：2012-12-27T15:33:49.270
> 
> 标签：python

我无法理解“import”语句在 Python 中的工作原理。

据说在返回的目录中搜索包`sys.path()`。然而，即使`sys`模块在每个 Python 程序中自动*可用，它也不会自动**导入*。引擎盖下的`import`语句导入模块也是如此吗？`sys`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-27T15:39:24.507

## `sys`模块与`import`语句 - 又名。“鸡还是鸡蛋？”

我相信[`sys`模块文档](http://docs.python.org/2/library/sys.html)说明了一切：

> 该模块提供对解释器使用或维护的一些变量以及与解释器进行强交互的函数的访问。它总是可用的。

因此，简而言之：**解释器有一些您可以使用`sys`模块**访问的变量-`sys.path`就是这样的变量之一。

## 问号 2\. -`import`工作原理

当谈到“`import`语句如何工作”时，您可以在这里阅读：http: [//docs.python.org/2/reference/simple_stmts.html#import](http://docs.python.org/2/reference/simple_stmts.html#import)。但是，它与您问题的主要部分并不真正相关：`import`语句和导入`sys`模块的关系。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-27T15:40:10.190

有两个阶段你会有点困惑。

1.  Python 必须找到您要导入的实际文件（包含代码），对其进行解析、执行并将其存储在某处。

2.  然后它必须将本地导入模块的名称绑定到模块对象。

也就是说，“找到模块`sys`并将其转化为模块对象”的过程与“定义变量`sys`表示模块”是不一样的。

您可以通过查看来检查哪些模块已加载`sys.modules`。

* * *

作为一个单独的问题，有一些 Python 基础知识实际上是硬编码到解释器中的，而不是在磁盘上表示为单独的文件。`sys`是这些模块之一：没有`sys.py`文件；相反，它是包含在`python.exe`二进制文件中的编译后的 C 代码。

# javascript - Javascript 中的 SQLite 访问

> ID：14057140
> 
> 赞同：0
> 
> 时间：2012-12-27T15:34:01.563
> 
> 标签：javascript, html, sqlite, blackberry-10

我想用 JavaScript 代码访问 Sql Lite 数据库。JavaScript 代码在 html5 中使用，必须部署在 blackberry 10 平台上。我使用以下代码没有成功：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
    <meta content="text/html; charset=ISO-8859-1" http-equiv="content-type">
    <title>Prova</title>
</head>
<body>
    <script type="text/javascript">
//Provenia SRL ITC - Paola Savioli
//Questa funzione apre il database SQL Lite
//Il parametro che va cambiato è il nome del database
function ApriDatabase() {
    try {
        if (window.openDatabase) {
            var shortName = 'Ristoranti.sqllite';
            var version = '1.0';
            var displayName = 'Ristoranti italia';
            var maxSize = 65536; // in bytes
            db = openDatabase(shortName, version, displayName, maxSize);
        }
    } catch (e) {
        alert('Apri Database' + e);
    }
}
//Provenia SRL ITC - Paola Savioli
// Questa funzione eseque una query su un database aperto con la funzione ApriDatabase
function EseguiQuery($query, callback) {
    try {
        ApriDatabase();
        if (window.openDatabase) {
            db.transaction(

            function (tx) {
                tx.executeSql($query, [], function (tx, result) {
                    if (typeof (callback) == "function") {
                        callback(result);
                    } else {
                        if (callback != undefined) {
                            eval(callback + "(result)");
                        }
                    }
                }, function (tx, error) {});
            });
            return rslt;
        }
    } catch (e) {
        alert('Esegui Query' + e);
    }
}

function VisualizzaComuni() {
    try {
        var schemanode = document.GetElementById('RCOMUNI');
        schemanode.innerHTML = "";
        var result = EseguiQuery('SELECT * FROM COMUNE');
        for (var i = 0; i < result.rows.lenght; ++i) {
            var row = result.row.item(i);
            var notediv = document.createElement('div');
            notediv.innerHTML = 'Codice Provincia:' + row['PROVINCIA'] + 'Nome:' + row['NAME'];
            schemanode.appendchild(notediv);
        }
    } catch (e) {
        alert('Visualizza Comuni' + e);
    }
}
</script>
    <input type="button" name='select' onClick="VisualizzaComuni()"
        value='Visualizza Comuni'>
    <div id="RCOMUNI"></div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T15:58:09.803

根据[http://caniuse.com/#feat=sql-storage](http://caniuse.com/#feat=sql-storage) ，您可以考虑使用 BlackBerry 7 和 10 支持的[WebSQL API](http://dev.w3.org/html5/webdatabase/)。

请注意，API 永远不会成为官方标准，并且它的开发已经停止。但如果你只是想瞄准黑莓，它可能是一个有效的选择。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-27T20:18:26.297

您发布的代码存在一些问题，包括在内置成功和错误处理程序时对块的引用和使用`.lenght`。所以我做了一个演示。`.length``try catch`

首先，它似乎没有什么区别，但这*是 HTML5*对吧？代替`HTML 4.01 Transitional`文档类型，使用 HTML5 文档类型：

```
<!DOCTYPE html>
<html>
<head>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
<title>demo by userdude</title>
... 
```

接下来，为了演示的目的，我修改了标记。在这种情况下，我们有：

```
<body>
<input type="button" id="run" value='Run Query'>
<div id="query"></div>
<table id="table" border="1" cellspacing="1" cellpadding="5"></table>
</body>
</html> 
```

在`head`元素中，我使用事件侦听器来等待 DOM 加载。请记住，我没有黑莓来测试它，并且对于黑莓或其他设备，您可能应该使用`deviceready`而不是`load`. 我认为。我还附加了`button`该运行的事件处理程序使用的查询`.addEventListener`，但请注意我*在负载处理程序*中执行此操作。在尝试访问 DOM 之前，您必须等待。

此外，IE 支持`attachEvent`而不是`addEventListener`. 我想黑莓支持后者，但我不确定。

```
window.addEventListener('load', function load(){
    var run = document.getElementById('run'),
        data = document.getElementById('table'),
        qtext = document.getElementById('query'),
        dropped = false,
        created = false,
        cities = ['Houston', 'Dallas', 'Paris', 'New York', 'Buenos Aires', 'London'],
        shortName = 'Cities',
        version = '1.0',
        displayName = 'Cities Demo',
        maxSize = 5 * 1024 * 1024,
        db = false,
        queries = [];

    run.addEventListener('click', query); 
```

这将建立我的数据库，包括运行对 populate() 的初始调用，以便我们使用一些数据。

```
 open(); 
```

这是我添加到运行按钮的功能。

```
 function query() {
        transact('SELECT * FROM Cities', view);
    } 
```

这只是为了将数据添加到数据库中。请参阅`cities`上面的变量。

```
 function populate(tx) {
        var city,
            i = 0; 
```

一旦我将`cities`条目数组清空到`INSERT`. `dropped`并为and交易`created`做同样的事情。`DROP``CREATE`

请*特别*注意我是如何做到这一点的；看到`transact('...', populate)`？我`populate`在这种情况下使用循环返回，直到我完成添加所有`cities`条目。这是异步的，因此您必须设置回调以在必要时等待前面的查询运行。在这种情况下，我最终可能会在添加行后删除表。所以我必须等待，*然后*遍历`cities`列表。

```
 if (cities) {
            if (!dropped) {
                dropped = true;
                transact('DROP TABLE IF EXISTS Cities', populate);

                return;
            }

            if (!created) {
                created = true;
                transact('CREATE TABLE IF NOT EXISTS Cities (id unique, City)', populate);

                return;

            } 
```

我不需要迭代回到`populate`这里，因为我只需要继续`INSERT`前进。

```
 while (city = cities.pop()) {
                transact('INSERT INTO Cities (id, City) VALUES (' + i++ + ', "' + city + '")');
            }

            cities = false;
        }
    } 
```

这个函数所做的只是给数据库一个打开的或新的引用，或者`return false`. 这会使 的执行短路`transact()`。

```
 function open() {
        if (!db && window.openDatabase) {
            db = window.openDatabase(shortName, version, displayName, maxSize);
        }

        if (cities) {
            db.transaction(populate);
        }

        return db;
    } 
```

这是剧本的精髓。我从 调用它`query()`，`callback`在这种情况下是`view`，它指向贯穿结果集并`table`从集合中创建 a 的函数。

```
 function transact(query, callback) {
        var cb = callback,
            qel = document.createElement('p'),
            qid = queries.length;

        if (!open()) {
            console.log('HTML5 Database not supported.');

            return false;
        }

        db.transaction(transact_cb);

        qel.innerHTML = query + ' Query Result: <span id="q' + qid + '">Pending...</span>';

        qtext.appendChild(qel);

        queries[qid] = query; 
```

注意最后两个参数，`transact_success, transact_error`。这就是您处理这些异步调用的方式。

```
 function transact_cb(tx) {
            tx.executeSql(query, [], transact_success, transact_error);
        } 
```

不太清楚为什么里面`eval`有...？

```
 function transact_success(tx, result) {
            var rtext = document.getElementById('q' + qid);

            rtext.className = 'success';
            rtext.innerHTML = 'Success.';

            if (typeof cb == "function") {
                cb(result);
            } else if (cb != undefined) {
                eval(cb + "(result)");
            }
        } 
```

注意`console.log(error);`.

```
 function transact_error(tx, error) {
            var rtext = document.getElementById('q' + qid);

            rtext.className = 'error';
            rtext.innerHTML = 'Error logged to console.';

            console.log(error);
        }
    } 
```

此函数创建`table`结果集视图。您可能会注意到我遍历每一行*和*每一行的列。

```
 function view(result) {
        var thead = '<thead><tr>',
            tbody = '<tbody>',
            row,
            col;

        for (var i = 0, rows = result.rows.length; i < rows; ++i) {
            row = result.rows.item(i);

            tbody += '<tr>';

            for (col in row) {
                if (i === 0) {
                    thead += "<th>" + col + "</th>";
                }

                tbody += '<td>' + row[col] + '</td>';
            }

            tbody += '</tr>';
        }

        thead += '</tr></thead>';
        tbody += '</tbody>';

        data.innerHTML = thead + tbody;
    }

}); 
```

您可以通过在此处下载 HTML 文件来下载该文件并在本地运行它（由于安全错误，它不会在 jsFiddle 上运行）：

[http://pastebin.com/FcSiu6ZZ](http://pastebin.com/FcSiu6ZZ)

所以你去。希望这将有助于使这更容易理解。如果您有任何问题，请告诉我。

# java - 字符编码问题 - GB2312

> ID：14057142
> 
> 赞同：1
> 
> 时间：2012-12-27T15:34:13.420
> 
> 标签：java, character-encoding, gb2312

我正在使用下面的代码片段显示从数据库中检索到的简体中文字符，但它显示的是垃圾字符

```
String text="×°ÏäÊ±ÇëÅÄÕÕ";  // retrieved from database 
String result=new String(text.getBytes("utf-8"),"GB2312"); 
```

实际输出为：�°�盲�卤�毛����

预期输出是：装箱时请电话

请帮忙

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-28T07:25:13.190

字符串总是应该有正确的字符。只有在转换为字节流的过程中，编码才会起作用。

所以你什么时候`text`从数据库中得到什么，那么你已经在从数据库中获取字符串时遇到了问题。

# android - 是否有任何屏幕尺寸大于 GL_MAX_TEXTURE_SIZE 的 Android 设备？

> ID：14057154
> 
> 赞同：7
> 
> 时间：2012-12-27T15:35:17.527
> 
> 标签：android, opengl-es, opengl-es-2.0

我一直在通过[glbenchmark.com](http://www.glbenchmark.com)搜索屏幕尺寸（宽度或高度）大于`GL_MAX_TEXTURE_SIZE`. 我发现了一百多台设备（例如[Acer A110](http://www.glbenchmark.com/phonedetails.jsp?benchmark=glpro25&D=Acer+A110&testgroup=gl)`GL_MAX_VIEWPORT_WIDTH` ），但没有设备的屏幕尺寸`GL_MAX_VIEWPORT_HEIGHT`大于. 所以我假设没有这样的设备。`GL_MAX_TEXTURE_SIZE``GL_MAX_TEXTURE_SIZE`

是否有任何规范可以保证每台设备（或 Android 设备）的屏幕尺寸小于或等于`GL_MAX_TEXTURE_SIZE`? 如果没有，是否有任何设备可以打破我的假设？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-28T06:40:36.440

您可以确定 GL_MAX_TEXTURE_SIZE 将始终大于或等于屏幕尺寸（SurfaceFlinger 需要这个）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T17:00:21.577

也许对于屏幕尺寸超过 2k 像素宽的最新设备，您可能会发现这一点，但硬件供应商不会将无法进行屏幕外渲染的移动 GPU 放入纹理目标，因为最大纹理尺寸小于设备屏幕。对于 GL_MAX_TEXTURE_SIZE 较小的旧设备，屏幕也小于 1024x1024。

# .net - 带有 C# .Net 的 TCP 客户端/服务器

> ID：14057155
> 
> 赞同：0
> 
> 时间：2012-12-27T15:35:24.263
> 
> 标签：.net, tcp

我正在关注这个 TCP 客户端/服务器示例

www.codeproject.com/Articles/1415/Introduction-to-TCP-client-server-in-C

我对 WinForms 比对控制台应用程序更熟悉，所以我决定在 WinForms 中重新编写代码。我有相同形式的客户端和服务器代码。初始化服务器时，我使用 AcceptSocket() 后表单被卡住，我无法使用按钮从客户端启动操作。这是否意味着我必须在单独的 WinForms 中编写客户端和服务器？=/

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-27T15:36:48.720

您需要在单独的线程中运行它们。确保您没有阻塞 UI 线程，否则 UI 将变得无响应。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-27T15:43:30.923

您需要能够在不占用 UI 线程的情况下读取套接字。否则，窗口将显示无响应。

你有两个选择。第一个，也是表面上最简单的，是如前所述显式使用线程。

第二种是使用接受/读/写函数的异步版本之一（`BeginXXX/EndXXX`或者`XXXAsync`，取决于您使用的 API），它为您从线程池启动另一个线程。（这些`Async`版本实际上在事件发生之前不会抓取线程，而`Begin`/`End`可能会立即抓取一个线程。）除非您实际上需要专门为一个新线程专门用于监视套接字（而您几乎从未真正这样做过），否则我更喜欢异步的东西。

无论哪种方式，您都需要了解一些关于多线程的知识。在这种情况下，您需要记住的重要事情是（1）无论您如何做，您的套接字内容几乎肯定会在另一个线程上发生；(2) WinForms 控件*讨厌*被其他线程直接访问；您将需要使用他们的`Invoke`方法来使事情发生在 UI 线程上。

# css - Chrome中的CSS下拉菜单问题

> ID：14057157
> 
> 赞同：-4
> 
> 时间：2012-12-27T15:35:27.433
> 
> 标签：css, html, drop-down-menu, positioning

我正在使用 CSS 下拉菜单（作为网站页面的包含）设计网站。应该发生的是，当您将鼠标悬停在菜单项上时，会出现一个下拉框，其中包含您可以向下拖动鼠标进行选择的选项。它在 IE 和 Firefox 中运行良好，但在 Chrome 中，当您将鼠标悬停在菜单项上并向下拖动鼠标时，容器 div（不在鼠标悬停位置附近）与下拉框重叠并消失。在 Chrome 中单击查看源代码时，我注意到了 div。我已附加下拉菜单的 CSS 和下拉菜单的链接包括。

我认为有问题的 CSS 是 #banner 类，它包含一个徽标、一个标题和一个登录表单。我将它设置为 #bannerContainer 包含 #banner 以便它可以以任何屏幕分辨率为中心（参见下面的代码）。对此问题的任何帮助将不胜感激！谢谢！

CSS： [http ://bridgedeck.org/newsite/pro_dropdown_n1.css](http://bridgedeck.org/newsite/pro_dropdown_n1.css)

```
#bannercontainer { /* centers banner items on any screen resolution */
position:absolute;
left:0px;
top:0px;
width:100%;
height:105px;
z-index:2000;
background-image: url(images/bannerOrigBlue.png); 
```

}

```
#banner { /* Holds wheel, mmp text and members login form*/
position:relative;
width:1000px;
height:100px;
z-index:0;
margin-top: 0px;
margin-right: auto;
margin-bottom: 0px;
margin-left: auto; 
```

}

HTML：

```
<div id="bannercontainer">
<div id="banner"> <!-- holds wheel, MMP text, and members login -->
    <a href="http://www.bridgedeck.org/newsite"><img src="images/wheellogocolor2.png" height="140" width="140"></a>
    <img class="mmpText" src="images/title_n1-2.png" alt="MMP" align="top"/>
        <div class="loginDiv">
            <form action="https://secure.bridgedeck.org/LoggedInHome.asp"  style="font-family:Calibri" method="post">
            <table>
            <tr>
                <td><b>Members Login</b></td>
            </tr>
            <tr>
                <td>Email:</td>
                <td><input type="text" name="Email" width="80px"></td>
            </tr>
            <tr>
                <td>Password:</td>
                <td><input type="password" name="password" width="80px"></td>
            </tr>
            <tr>
              <td height="29"><input type="submit" value="Login" class="submit"></td>
            </tr>
            </table>
            </form>
  </div>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T15:54:25.807

```
<pre><code>
     #nav li.top {
      display: block;
      float: left;
      height: 35px;
      padding-left: 5px;
      padding-right: 5px;
     }
</code></pre> 
```

更改 pro_dropdown_n1.css 中第 119 行的高度

注意你的高度造成的差距。

# c++ - `(void)varName;` 有什么作用？

> ID：14057159
> 
> 赞同：0
> 
> 时间：2012-12-27T15:35:42.600
> 
> 标签：c++, syntax

> **可能重复：**
> [将未使用的返回值转换为 void](https://stackoverflow.com/questions/689677/casting-unused-return-values-to-void)
> [C++ 转换为 void 的目的是什么？](https://stackoverflow.com/questions/4178695/c-what-is-the-purpose-of-casting-to-void)

在使用 CMake 下载并构建[GDCM](http://sourceforge.net/projects/gdcm/)代码后，我偶然发现了这一点：

```
void error_callback(const char *msg, void *) {
    (void)msg;
    gdcmErrorMacro( "Error in gdcmopenjpeg" << msg );
} 
```

第一行是做什么的？从来没有见过这样的事情。请记住，如果这很重要，我告诉 CMake 使用 Visual Studio 2010 进行构建。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-27T15:38:57.023

它可以防止*未使用的变量*警告。据推测，宏`gdcmErrorMacro()`可以`#define`d 作为空宏，`msg`在这种情况下不会被引用。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-27T15:39:00.103

这可以防止在函数中未使用函数的形式参数时发出编译器警告。

编译生产代码并将警告视为错误通常是一个好主意，因此这看起来像是在尝试清除之前`msg`在宏使用中提到的问题。

`msg`这也可以通过简单地不首先命名形式参数来解决 - 事实上，如果没有提及使用宏时，这就是我要做的 IRL ：

```
void error_callback(const char *, void *) {
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-27T15:39:36.870

该函数不使用该参数`msg`，编译器将抱怨（警告）未使用的参数。

该`(void)msg;`行只是“使用”该参数（没有效果）。这样，编译器不会生成警告。

编辑：实际上，该函数使用该参数，但是`gdcmErrorMacro`可以（通过编译定义的宏）设置宏以扩展为...什么都没有（例如，`do{}while(0);`按照Linux内核的习惯，扩展为空结构。

这样，编译器将在使用参数的函数体中看不到任何内容`msg`（请记住，编译器看到的是*预处理*的源文件，因此宏已经展开）。

在这种情况下，在预处理之后，编译器将看到：

```
void error_callback(const char *msg, void *) {
    (void)msg;
    do{ }while(0);
} 
```

并且参数的唯一“使用”`msg`是那一行`(void)msg;`。

# jquery - jquery - if(thing.is(:hover)) {做某事}

> ID：14057161
> 
> 赞同：0
> 
> 时间：2012-12-27T15:35:53.830
> 
> 标签：jquery

我不能让它工作。在鼠标悬停时，显示一个 div。在鼠标离开时，如果仍然显示元素继续显示该元素，否则淡出该元素。

```
$('#list_cont').on('mouseenter', '.show_map', function() {
    $(this).next('.map_cont').fadeIn(800);
}).on('mouseleave', '.show_map', function() {
    var mapcont = $(this).next('.map_cont');
    if (mapcont.is(':hover')) {
        mapcont.show();
    } else {
        $(this).next('.map_cont').delay(600).fadeOut(800);
    }
});​ 
```

问题是，元素永远不会离开。[这里](http://mgoode.com/index.php?option=com_mls&view=list)的例子。悬停地图图标。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T16:05:35.337

尝试更多类似的东西。在图标和地图上都使用事件处理程序，仅当鼠标离开两个元素时才会淡出：

```
$('#list_cont').on('mouseenter', '.show_map', function() {
    $(this).next('.map_cont').stop().fadeIn(800);
}).on('mouseleave', '.show_map', function() {
    if (!$(this).next('.map_cont').is(':hover')) {
        $(this).next('.map_cont').delay(600).stop().fadeOut(800);
    }
});

$('#list_cont').on('mouseenter', '.show_map', function() {
    $(this).stop().show();
}).on('mouseleave', '.map_cont', function() {
    $(this).delay(600).stop().fadeOut(800);
});​ 
```

[http://jsfiddle.net/JV89J/1/](http://jsfiddle.net/JV89J/1/)

# java - 使用ajax加载页面并提交表单所需的java selenium解决方案

> ID：14057165
> 
> 赞同：0
> 
> 时间：2012-12-27T15:36:29.620
> 
> 标签：java, ajax, selenium

Java - 我的目标是获取完整的网页源（html）填写表格并提交。

如今，网页阅读起来非常复杂，因为它们不会在一个页面请求调用中加载，它们在页面加载时执行脚本以从服务器获取数据并注入页面本身。

这就是我遇到问题的地方，我正在尝试使用多个 ajax 调用以在其中加载表单，我必须填写表单并务实地提交它以获得结果。

我尝试了“selenium”并使用 HtmlUnitDriver 在后台执行所有操作，但 selenium 在启用 js 后执行 Javascript 失败。

我想在一次调用中获取所有页面，无论它是否有 ajax 调用来加载页面的不同部分。

我猜测的一个解决方案可能是，如果有任何事情，比如运行服务器并使用 url 请求获取页面，该页面还维护会话以提交表单或类似的事情。

请随时分享您的想法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T15:45:56.787

我在工作中也做过类似的事情。我使用 HtmlUnit（因为它不渲染 -> 比 selenium 快）。一个小问题是等待 Ajax 加载完成。我轮询并查看页面中是否存在预期的 HTML 代码部分，这些部分是由 ajax 插入的。当我确定所有需要的部分都由 ajax 加载时，我填写表格并提交。

# qt4 - 如何使用本机 SDK 在黑莓 10 上访问文本文件

> ID：14057173
> 
> 赞同：1
> 
> 时间：2012-12-27T15:37:18.820
> 
> 标签：qt4, filesystems, blackberry-10, qfile

在名为 Resources 的文件夹中，我有一个名为“hello.txt”的文本文件。如何使用 cpp 使用 blackberry 10 native sdk 阅读它。我发现了类似使用 FileConnection 的东西。但是它的显示 FileConnection 没有声明！！。是否需要任何头文件？请注意我正在使用 cpp：

```
FileConnection fc = (FileConnection) Connector.open("Resources/hello.txt", Connector.READ); 
```

我该怎么做呢？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-28T06:10:38.460

使用 QFile 和 QTextStream 类来读取或写入文件。

```
QFile file("app/native/assets/text.txt");
if (file.exists()) {
    if (file.open(QIODevice::ReadOnly | QIODevice::Text)) {
        QTextStream textStream(&file);
        QString text = textStream.readAll();
        file.close();
    }
} else {
    qDebug() << "File doesn't exist";
} 
```

在这里， readAll() 将返回流的全部内容。如果您只想读取几段内容，可以使用 readLine() 方法。

# c# - 有没有办法轻松屏蔽 Inputbox 对象

> ID：14057181
> 
> 赞同：2
> 
> 时间：2012-12-27T15:37:38.670
> 
> 标签：c#, .net, vb.net, winforms

在我的 WinForms 项目中，我弹出了 2 个输入框，要求用户输入用户名和密码，我想屏蔽密码输入框中的文本条目。

目前，代码看起来像：

```
_Passwd = InputBox("Please Enter the Corresponding Password" & vbCrLf & _
                   "Leave blank to abort program", "New Credentials Needed", "") 
```

我想知道是否有一种方法可以屏蔽输入框中的文本，或者.Net 中是否有另一个预定义的对象，我可以在不使用屏蔽文本框创建自己的用户表单的情况下使用？（我知道这很容易，如果微软已经预先创建了它，这似乎比需要的麻烦更多）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T15:47:55.183

我还没有尝试过，但从描述中可以帮助你：

[http://visualstudiogallery.msdn.microsoft.com/1e5295a5-d7bd-4789-bced-361c608a3a7e](http://visualstudiogallery.msdn.microsoft.com/1e5295a5-d7bd-4789-bced-361c608a3a7e)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T15:46:30.110

没有任何内置功能 - 您必须创建自己的。

# c - 寻找可以操纵编译器优化功能的宏

> ID：14057182
> 
> 赞同：1
> 
> 时间：2012-12-27T15:37:41.343
> 
> 标签：c, compiler-optimization

有没有办法将代码块或函数标记为编译器优化功能的排除部分？

我有一个错误，只有在优化功能开启时才会出现。我对它可能在哪里有一些猜测，这个宏可以提供很好的帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-27T16:31:23.693

如果我看到其中包含的代码，我会非常担心`#pragma GCC optimize "O0"`。我***肯定会***要求任何与我一起工作的人就为什么有必要做出非常明确的评论，并且可能会向编译器供应商报告编译器错误，这就是它无法与优化一起工作的原因。

如果你甚至***考虑***向内核邮件列表或类似的提交一些东西，我会确保穿着三层或四​​层石棉，因为你的火焰会很强烈。

正确的做法是找出解决方法，说明为什么您的代码在优化时无法正确编译。如果您需要，您的代码可能有问题 - 通常它依赖于“您认为编译器如何做某事”，这在您优化代码时不会发生。那是糟糕的编码，绝对不应该通过禁用编译器优化来解决。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-27T15:50:08.910

在 gcc 中，您可以`optimize`在函数级别使用 pragma 来避免优化。

**[#pragma GCC optimize "O0"](http://gcc.gnu.org/onlinedocs/gcc/Function-Attributes.html#Function-Attributes)**可应用于函数以防止对该函数进行优化。但我不确定是否有办法防止*代码块*被优化。

因此，您可以对整个程序进行整体优化设置，这将使用给定的优化函数覆盖该设置`optimize`。

# c# - 转到覆盖 Visual Studio 中的方法定义

> ID：14057185
> 
> 赞同：4
> 
> 时间：2012-12-27T15:37:48.203
> 
> 标签：c#, visual-studio-2010, keyboard-shortcuts, visual-studio-extensions

我想 Visual Studio 中没有为此目的的内置功能，但如果有人可以指导我（如果可能的话，免费）可以做到这一点的扩展，我会很高兴。

```
 public class Program
{
    static void Main(string[] args)
    {
        Annoy annoy = new Tubo();
        annoy.DoTubo();
    }
}

public class Annoy
{
    public virtual void DoTubo()
    {
        Console.WriteLine("Annoy.DoTubo()");
    }
}

public class Tubo : Annoy
{
    public override void DoTubo()
    {
        Console.WriteLine("Tubo.DoTubo()");
    }
} 
```

当我使用`F12`(Go to definition) 时，carret 导航到`Annoy.DoTubo()`而不是`Tubo.DoTubo()`。
我在这里找到了一个用于类似目的的插件（仅适用于实现接口的类，而不是继承其他类的类[）](http://blog.rthand.com/page/Go-To-Implementator.aspx)。
我猜 ReSharper 和 VisualAssist 有这个功能，但如果有的话，我正在寻找一个免费的。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2016-07-06T16:42:27.390

在 Visual Studio 2015 中，您可以使用基本方法上的右键单击上下文菜单来调用“Go to Implementation”，这将列出覆盖函数声明的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T15:42:27.687

无需任何工具即可找到它的一种方法是查找所有参考资料，这将找到该方法的用法。

免费的是 DevExpress 的 CodeRush

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-27T16:03:48.097

据我记得在 Visual Studio 的上下文菜单中的“查找所有引用”中有构建，因此不需要第三方工具

# javascript - ExtJS MVC 使一个窗口对控制器不可见

> ID：14057187
> 
> 赞同：0
> 
> 时间：2012-12-27T15:37:52.890
> 
> 标签：javascript, extjs, extjs4, extjs-mvc

我有以下情况，在 ExtJS MVC 控制器中，我有以下行使自定义窗口可见：

```
this.control({
    'grid_file button[action=change_settings]': {
        click: this.open_settings
    }
}) 
```

进一步如下：

```
open_settings: function() {
    this.getView('browser.storage_settings').create().show();
}, 
```

我想添加一个取消按钮以使此窗口不可见，如果不添加一个，我将如何做到这一点`id`？什么是事件监听器，函数内部的代码是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T16:13:26.770

您可以指定 itemId（与 id 不同）来访问[`getComponent`](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.container.Container-method-getComponent)容器中的组件。
如果结构良好，up() 和 down() 方法也是检索组件的好方法。

IMO 解决问题的最佳方法是在窗口中定义一个按钮，如下所示：

```
buttons:[{
    text: 'Close',
    handler: function() {
        this.hide();
    }
}] 
```

[`.hide()`](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.panel.Panel-event-hide)您可以使用该方法使面板不可见（[`hideMode`](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.panel.Panel-cfg-hideMode)也可以查看配置以获取更多选项）。

# sql-server-2012 - 查找所有相关表

> ID：14057190
> 
> 赞同：3
> 
> 时间：2012-12-27T15:38:16.550
> 
> 标签：sql-server-2012

我有一个包含大约 1000 个表的数据库，我需要找到与特定表相关的所有表，比如说客户表。我该如何进行？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-27T16:00:36.410

当您要求查找与特定表相关的所有表时，我假设您要查找所有具有对“客户”表的外键引用的表。[这与之前的 Stack Overflow 问题](https://stackoverflow.com/questions/483193/how-can-i-list-all-foreign-keys-referencing-a-given-table-in-sql-server-2005)密切相关。以下使用系统目录视图的查询应该可以解决问题：

```
select t.name as TableWithForeignKey, fk.constraint_column_id as FK_columns , c.name as ForeignKeyColumn 
    from sys.foreign_key_columns as fk
        inner join sys.tables as t on fk.parent_object_id = t.object_id
        inner join sys.columns as c on fk.parent_object_id = c.object_id and fk.parent_column_id = c.column_id
    where fk.referenced_object_id = (select object_id from sys.tables where name = 'customers')
    order by TableWithForeignKey, ForeignKeyColumn 
```

[MSDN sys.foreign_key_columns](https://msdn.microsoft.com/en-us/library/ms186306.aspx)

# objective-c - 是否有一个包含运行时类型编码字符的枚举？

> ID：14057191
> 
> 赞同：1
> 
> 时间：2012-12-27T15:38:18.973
> 
> 标签：objective-c, encoding, objective-c-runtime

Objective-C 对原语使用单字母类型编码；例如，`'c'`是`char`，`'i'`是`int`。这些都记录在 Obj-C 运行时参考中。

是否存在`enum`模拟这些的模型？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T20:01:55.220

没有这样`enum`的。编码最初由编译器构建，它只是将文字字符串嵌入其代码中。您可以在 中看到它们[`ASTContext.cpp`](http://llvm.org/viewvc/llvm-project/cfe/trunk/lib/AST/ASTContext.cpp?view=markup)，特别是方法`getObjCEncodingForTypeImpl()`和`getObjCEncodingForPrimitiveKind()`。

[运行时库在](http://opensource.apple.com/source/objc4/objc4-532.2/runtime/)[objc-typeencoding.mm](http://opensource.apple.com/source/objc4/objc4-532.2/runtime/objc-typeencoding.mm)中有一组函数来读取这些字符串。你可以自己使用这些；该代码在 Apple 的开源许可下可用。（编译器`ASTContext`也有一种方法可以做到这一点，`DecodeTypeFromStr()`。）

显然，就这些编码而言，运行时和编译器必须保持同步。事实上，因为改变一个类型的编码字符会造成二进制不兼容，所以这根本不可能发生，当然也不是没有通知；您可以依靠运行时指南中的列表来保持稳定。

当然，这并不是说不会添加东西：`"@?"`是块的编码字符串，在引入它们之前并不存在（尽管它类似于/派生自`"^?"`表示函数指针的 ）。

您可能还对 Mike Ash[关于连接 libffi 和 Blocks 的文章](http://www.mikeash.com/pyblog/friday-qa-2011-05-06-a-tour-of-mablockclosure.html)感兴趣，其中他演示[了一系列宏](https://github.com/mikeash/MABlockClosure/blob/master/MABlockClosure.m#L119)来读取编码字符串并生成其真实类型。

# java - Java中的对象大小

> ID：14057192
> 
> 赞同：3
> 
> 时间：2012-12-27T15:38:37.670
> 
> 标签：java, object

假设我有：

```
Class A{
   int a;
}

A obj = new A(); 
```

那么obj的大小是多少？它的大小是否与 int 大小相同，就像在 C 中一样？

如果我能弄清楚这一点，那么我可以在不使用数据库的情况下将大型 HashMap 保存在 RAM 中。

提前致谢。

**编辑**

朋友们，

其实我有：

```
HashMap<Long, List<T>> map; 
```

和

```
class T{
   private int a;
   private int b;
   private int c;
   // constructor, getters and setters
} 
```

并且地图的大小可能会增长到拥有 10000000 个键，并且对于每个键，我将拥有大小为 100-1000 的列表。

整个地图会留在堆中吗？

**编辑 2**

当我用大约 70000 个键加载地图并将其序列化为文件时，文件大约为 18 MB，那么我的地图在堆中是否为 18 MB？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-27T15:45:17.587

It may depend on JVM, but in practice, for 32-bit JVM, an object = `8-byte header + fields`. Header consist of Id + reference to class.

Fields size depends on field type, reference - 8 bytes, boolean - 1 byte, etc

Besides objects are aligned to 8 bytes. That is your A takes 16 bytes. Minimum size = 8 bytes, no fields.

More here [http://www.javamex.com/tutorials/memory/object_memory_usage.shtml](http://www.javamex.com/tutorials/memory/object_memory_usage.shtml)

If you use Oracle JVM you can use sun.misc.Unsafe to investigate object structure, byte by byte.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T15:43:15.560

不，它永远不可能与 C 中的大小相同，因为对象是在堆上创建的，而引用变量是在堆栈上创建的。因此，它的大小不会相同。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-27T15:43:15.753

由于您的私人成员，它将是 Object 的大小加上 int 的大小。

"I can keep large HashMap in RAM without using database" just need to deal with persistentce: serialization and deserialization, and as Object stream it is be to much.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-27T01:48:04.153

64 bit system is different to 31 bit system

![64 bit system is different to 31 bit system](../Images/6c329df0f22d973e88a39a09049ac649.png)

# sql-server - 如何使用 try catch 管理嵌套事务

> ID：14057198
> 
> 赞同：0
> 
> 时间：2012-12-27T15:38:53.393
> 
> 标签：sql-server, try-catch, sqltransaction, savepoints, nested-transactions

```
--Drop Table Tab1

Begin Transaction TR1; 
Save Transaction TR1;
    Create Table Tab1(f1 decimal(10,0));
    Begin Transaction TR2
    Save Transaction TR2
        insert into Tab1 values(1);
        Begin Transaction TR3;
        Save Transaction TR3;
            insert into Tab1 values(2);
            Begin Try 
                insert into Tab1 values('OK');
                Commit Transaction TR3;
            END TRY
            BEGIN Catch
                print 'catch'
                RollBack Transaction TR3;
            End Catch

        insert into Tab1 values(3);
        Commit Transaction TR2
    insert into Tab1 values(4);
Commit Transaction TR1;
--Commit Transaction;
select * from Tab1;
Drop Table Tab1

Select @@TRANCount 
```

发生错误：

> 消息 3931，级别 16，状态 1，第 17 行当前事务无法提交，也无法回滚到保存点。回滚整个事务。

如何处理这个。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-27T16:17:21.833

当出现某些类型的错误时，您无法回滚到保存点。请参阅[Martin Smith对](https://stackoverflow.com/users/73226/martin-smith)[Rollback transaction to savepoint on failed ALTER TABLE ... ADD CONSTRAINT](https://stackoverflow.com/questions/5314568/rollback-transaction-to-savepoint-on-failing-alter-table-add-constraint/5324972#5324972)的回答。您检测到这一点的方法是进行测试`Xact_state()`。

但是，您的问题有些不同，因为您还尝试使用嵌套事务。嵌套事务在 SQL 中并不像我们期望的那样真正工作。

*   您只能命名最外层的事务。[请参阅事务（数据库引擎）](http://msdn.microsoft.com/en-us/library/ms190612%28v=sql.90%29.aspx)

例如，这失败了`Cannot roll back TR2\. No transaction or savepoint of that name was found.`

```
    开始交易 TR1；
    开始交易 TR2
    回滚交易 TR2
    提交事务 TR1

```

从[嵌套事务](http://msdn.microsoft.com/en-us/library/ms189336%28v=sql.90%29.aspx)

*   SQL Server 数据库引擎忽略提交内部事务

*   ROLLBACK TRANSACTION 语句的 transaction_name 参数引用一组命名嵌套事务的内部事务是不合法的。transaction_name 只能引用最外层事务的事务名

[Paul S. Randal 在每天的 SQL Server DBA 神话](http://www.sqlskills.com/blogs/paul/post.aspx?id=7900bf29-49ac-47bc-a554-0c5a85df19ed)中进一步探讨了这一点：(26/30) 嵌套事务是真实的

您可以做的最好的事情是使用保存点，并在您的捕获中和最后检查 Xact_state。

```
BEGIN TRANSACTION tr1; 

SAVE TRANSACTION tr2; 

CREATE TABLE tab1 
  ( 
     f1 DECIMAL(10, 0) 
  ); 

SAVE TRANSACTION tr3 

INSERT INTO tab1 
VALUES     (1); 

SAVE TRANSACTION tr4; 

INSERT INTO tab1 
VALUES     (2); 

BEGIN try 
    -- change the order of the follwoing two lines around to see the difference
    INSERT INTO tab1 VALUES (1 / 0); --Results in a rollback to savepoint
    INSERT INTO tab1 VALUES ('OK');  --Results in a complete rollback

    COMMIT TRANSACTION tr4; 
END try 

BEGIN catch 
    IF Xact_state() = -1 
      BEGIN 
          PRINT 'rollback transaction no other work can be done' 

          ROLLBACK TRANSACTION; 
      END 
    ELSE 
      BEGIN 
          PRINT 'rollback to savepoint' 

          ROLLBACK TRANSACTION tr4 
      END 
END catch 

IF Xact_state() > 0 
  BEGIN 
      INSERT INTO tab1 
      VALUES     (3); 

      INSERT INTO tab1 
      VALUES     (4); 

      COMMIT TRANSACTION tr1; 

      SELECT * 
      FROM   tab1; 

      DROP TABLE tab1 
  END 
```

# javascript - 我们可以将表单元素值传递给同一网页中的函数吗？

> ID：14057199
> 
> 赞同：0
> 
> 时间：2012-12-27T15:38:54.973
> 
> 标签：javascript, html, forms

```
 <html>
 <body>
 <form action="">
   ......any form elements......
 </form>
 </body>
 <script>
 function fn() {

 }
 </script>
 </html> 
```

有没有办法（或任何其他替代方式）将表单值传递给同一网页中的函数（在脚本标签内），而不是 action 属性中的 URL？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T16:05:33.697

这是我多年来的做法。它适用于所有浏览器 - 对于真正旧的浏览器，如果您将 name="form1" 添加到表单标签，您甚至可以将 document.getElementById("form1") 更改为 document.form1。

注意：在 jQuery 之前，很多地方都推荐使用[eventListeners](https://developer.mozilla.org/en/docs/DOM/element.addEventListener)，例如

```
document.getElementById("form1").addEventListener("submit",
  function(e) {
    e.preventDefault(); 
    ... some code 
  }); 
```

但我个人更喜欢 jQuery 或更简单的 onsubmit ......

```
<html>
<head>
<script>
window.onload=function() {
  document.getElementById("form1").onsubmit=function() {
    var val1 = this.field1.value;
    if (val1=="") {
      alert('Field1 cannot be empty');
      this.field1.focus();
      return false;
    }
    // return true to submit, return false to stay on the page.
    return true; 
  }
}
</script>
</head>
<body>
<form id="form1" action="">
  <input type="text" name="field1" value="" />
  .
  .
  .
</form>
</body>
</html> 
```

如果它必须是内联的，那么我强烈推荐

```
<head>
<script>
function validate(theForm) {
  var val1 = theForm.field1.value;
  .
  .
    return false;// cancel
  .
  .
  return true; // allow submit
}
</script>
</head>

<form onsubmit="return validate(this)"> 
```

**更新**

```
to just change some span or div on the page do this:

<html>
<head>
<script>
window.onload=function() {
  document.getElementById("form1").onsubmit=function() {
    var val1 = this.field1.value;
    document.getElementById("div1").innerHTML="This is the value "+val1;
    return false; // do not submit/refresh the page
  }
}
</script>
</head>
<body>
<form id="form1" action="">
  <input type="text" name="field1" value="" />
  <input type="submit" />
</form>
<div id="div1"></div>
</body>
</html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T15:44:24.443

html

```
<form  id="frm">    
<input type="button" onclick="fn()" value="Submit to function"/>
</form> 
```

javascript

```
function fn(){
var frm = document.getElementById("frm");
var elements = frm.elements;
var len = elements.length;
// do something with elements
 for(var i =0; i < len; i++){
  console.log("%s = %s", elements[i].name, elements[i].value);
 }
} 
```

# windows - 在 Windows 中批量重命名子目录

> ID：14057208
> 
> 赞同：3
> 
> 时间：2012-12-27T15:39:25.223
> 
> 标签：windows, batch-file, rename, command-prompt, subdirectory

我有一个包含数千个子目录的目录，这些子目录包含需要重命名的自己的子目录。我正在使用我没有管理员权限的 Windows 7 机器，因此我无法下载简单的程序来为我执行此操作。

现在我有一个测试目录`C:\test`，其中包含一些子目录，这些子目录名为`old`我试图更改为`new`使用批处理文件的子目录。

为了清楚起见，我想要以下内容：

```
C:\测试\1\旧
C:\测试\2\旧
C:\测试\3\旧

```

成为

```
C:\测试\1\新
C:\测试\2\新
C:\测试\3\新

```

感谢您提供任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T16:07:33.480

这是我很快想到的。我在本地进行了快速测试，它似乎可以满足您的要求：

```
@echo off

FOR /D %%D IN ("C:\test\*") DO CALL :RENAME %%D

:RENAME
SET CRITERIA=\old
FOR /D %%R IN (%1%CRITERIA%) DO RENAME %%R "new" 
```

将其保存到 bat 文件并试一试。希望这会有所帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-12-11T20:04:41.297

贾斯汀的回答对我的类似问题非常有帮助，尽管默认情况下它只处理 \A\B\C 的更简单模式，其中 A 是基本目录，B 是一些未确定的目录，C 是您寻找的目录。

我修改了他的脚本，通过任意数量的层递归基本目录 A，直到找到 C。

这是脚本，编写期望命令行参数：

```
@echo off

set BASEDIR=%1
SET CRITERIA=\%2
SET REPLACENAME=%3

call :FindDirs %BASEDIR%

GOTO END

:FindDirs
FOR /D %%F IN ("%1\*") DO CALL :RENAME %%F
GOTO:EOF

:RENAME
REM echo DIR=%1
FOR /D %%R IN ("%1%CRITERIA%") DO (
    if EXIST %%R RENAME %%R "%REPLACENAME%"
)
call :FindDirs %1
GOTO:EOF 
```

# php - PHP数组MySQL行和列？

> ID：14057216
> 
> 赞同：-1
> 
> 时间：2012-12-27T15:39:50.103
> 
> 标签：php, mysql, arrays

我有一个包含以下列的 MySQL 表：

```
id : title : message : date
1  : blah  : blah    : 27/12/2012 
```

我已经查询了它并将其存储在一个数组中。如果某个 ID，我如何获取各个列。例如，我想获取 ID = 1 的行并获取标题、消息等。然后我想要第 2 行和第 3 行。如何从数组中获取信息。喜欢

```
$array[1]["date"]; ( I tried it and it never worked) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T15:59:41.383

您基本上需要将结果作为关联数组获取并遍历所有结果。您的所有结果将采用以下形式

> 数组（
> 'id' => 1, 'title' => 'blah',
> 'message' => 'blah',
> 'date' => '27/12/2012'
> ）；

mysqli 实现的示例：[Mysqli Fetch Assoc Documentation](http://php.net/manual/en/mysqli-result.fetch-assoc.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T16:00:25.587

```
$array = array();
while ($row = fetch_assoc($result)) { // use your favorite fetch method here
    $array[$row['id']] = $row;
}

echo $array[1]["date"]; // now will work (if you have such id) 
```

# php - 从 PHP 中的打印函数分配变量

> ID：14057219
> 
> 赞同：-3
> 
> 时间：2012-12-27T15:40:03.597
> 
> 标签：php, variable-assignment

> **可能重复：**
> [可能捕获 PHP 回显输出？](https://stackoverflow.com/questions/3917057/possible-to-capture-php-echo-output)

我现在有：

```
function showwish()
{
  echo 'happy new year';
} 
```

我想分配`$somevariable = showwish;`

如何在没有任何错误的情况下完成此任务。

注意：不允许编辑showwish功能。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-27T15:42:31.157

你应该有

```
function showwish(){
    return 'happy new year';
} 
```

然后要么

```
echo showwish(); 
```

或者

```
$fish = showwish(); 
```

或者问更实际的问题

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-27T15:42:14.997

```
function showwish()
{
  ob_start();
  echo 'happy new year';
  return ob_get_clean();
} 
```

或者，如果您所做的只是返回一个字符串：

```
function showwish()
{
  return 'happy new year';
} 
```

* * *

根据[OP 的以下评论，他无法编辑 showwish fn](https://stackoverflow.com/questions/14057219/assign-variable-from-print-function-in-php/14057247#comment19426813_14057247)：

```
ob_start();
showwish();
$someVar = ob_get_clean(); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-27T15:45:01.327

```
function showwish() {
    return 'happy new year';
}

$somevariable = showwish();

echo $somevariable; 
```

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-12-27T16:07:42.527

您可以像常量一样使用变量

```
define('showwish', 'something');
function showwish() {
    echo 'happy new year';
}
$somevariable = showwish;
echo $somevariable; 
```

# debugging - ANTLRWorks 调试——不同颜色的含义？

> ID：14057224
> 
> 赞同：2
> 
> 时间：2012-12-27T15:40:33.613
> 
> 标签：debugging, antlr, grammar, antlrworks, ebnf

我正在使用 ANTLRWorks 的调试模式来测试我的 c 语法。在 ANTLRWorks 中进行调试非常有助于更好地理解，但我在理解输出树的不同颜色时遇到了问题。我`backtrack=true`在我的语法中使用。我认为红色意味着调试器走错了路，而绿色告诉我它走对了。但是深红色和深绿色呢？

我添加了一张“小树”的图片，它只匹配以下输入：

```
int test; 
```

![在此处输入图像描述](../Images/089323015cdaaac5a18ae2b1a08ea878.png)

如果有必要回答这个问题，这里是使用的 4 个最重要的规则。

```
start
: declaration*
;

declaration
: functionDefinition
| dataDeclaration //also used for Function Declaration
| assemblerDefinition
;

functionDefinition 
: declarationSpecifier* declarator Equals Default Semi
| declarationSpecifier* declarator Equals Delete Semi
| declarationSpecifier* declarator functionBody
;

dataDeclaration
:declarationSpecifier* declarator initializer? (Comma declarator initializer?)* Semi
; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T03:01:07.617

与其说是“正确”和“错误”，不如说是解析器试图找出与输入匹配的规则。当 ANTLR 必须回溯时，ANTLRWorks 将红色用于它认为*可能*匹配的分析树分支。绿色用于解析器实际探索的分支，黑色用于成功匹配输入的分支。较深和较浅的颜色是 ANTLRWorks 为嵌套级别的回溯提供视觉反馈 - 级别越深颜色越深。

此答案的主要来源来自[ANTLRWorks：](http://www.antlr.org/papers/antlrworks-draft.pdf)由 Bovet（创建 ANTLRWorks）和 Parr（创建 ANTLR）编写的 ANTLR Grammar Development Environment Unpublished Draft。

从第 8 页开始：

> 解析器采用的路径显示为绿色

从第 15 页开始：

> 当 ANTLR 必须回溯以区分替代产生式时，通常很难调试解析器，因为开发人员必须跟踪解析器何时推测以及何时不推测。ANTLRWorks 通过以红色显示解析树中的所有推测解析分支，清楚地区分了这两种模式。...第二个子树 [以黑色显示] 是规则**s**中成功匹配的第二个备选方案的解析树。在 ANTLR 必须嵌套回溯的情况下，ANTLRWorks 通过一系列渐变来更改颜色，每个回溯嵌套级别一个渐变。

# java - 如何调用使用 JNA 返回字符串的 Delphi 函数？

> ID：14057226
> 
> 赞同：6
> 
> 时间：2012-12-27T15:40:41.240
> 
> 标签：java, string, delphi, jna, freepascal

我正在从 Java 程序的 Delphi 编译 *.so 文件中调用函数。[经过一些研究， JNA](https://github.com/twall/jna)似乎是他要走的路。在深入研究一些复杂的 Delphi 代码之前，我正在尝试使用一些“Hello World”代码，但在获取 Delphi 函数返回的字符串时遇到了麻烦。

Delphi 代码（helloworld.pp）：

```
library HelloWorldLib;

function HelloWorld(const myString: string): string; stdcall;
begin
  WriteLn(myString);
  Result := myString;
end;

exports HelloWorld;

begin
end. 
```

**我使用“ fpc -Mdelphi helloworld.pp** ”从命令行编译它，生成**libhelloworld.so**。

现在我的Java类：

```
import com.sun.jna.Library;
import com.sun.jna.Native;

public class HelloWorld {
    public interface HelloWorldLibrary extends Library {
        HelloWorldLibrary INSTANCE = (HelloWorldLibrary) Native.loadLibrary("/full/path/to/libhelloworld.so", HelloWorldLibrary.class);

        String HelloWorld(String test);
    }

    public static void main(String[] args) {
        System.out.println(HelloWorldLibrary.INSTANCE.HelloWorld("QWERTYUIOP"));
    }
} 
```

但是，当我运行此 Java 代码时，我得到：

```
# A fatal error has been detected by the Java Runtime Environment:
#
#  SIGSEGV (0xb) at pc=0x00007f810318add2, pid=4088, tid=140192489072384
#
# JRE version: 7.0_10-b18
# Java VM: Java HotSpot(TM) 64-Bit Server VM (23.6-b04 mixed mode linux-amd64 compressed oops)
# Problematic frame:
# C  [libhelloworld.so+0xbdd2]  HelloWorld+0x6fea 
```

请注意，如果我更改我的 Delphi 方法（和相关的 Java 接口）以返回一个硬编码的整数，一切都会很好：我传递的字符串被打印出来，并且我得到了预期的 int。

奇怪的是，如果 Delphi 方法返回一个字符，我必须将我的 JNA 代理编写为返回一个字节并手动将其转换为字符（如果我将我的接口声明为返回一个字符，它会打印出一个垃圾字符）。

知道这里出了什么问题吗？

仅供参考，我使用的是 64 位 Ubuntu 12.04，使用 Sun JDK 1.7.0_10-b18、JNA 3.5.1 和 Free Pascal Compiler 版本 2.4.4-3.1。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-27T15:57:17.557

Delphi 或 FreePascal`string`是不能用作 JNA 类型的托管类型。[JNA 文档](http://jna.java.net/javadoc/overview-summary.html#strings)解释说，Java`String`被映射到一个指向以空字符结尾的 8 位字符数组的指针。用 Delphi 术语来说就是`PAnsiChar`.

因此，您可以将 Pascal 代码中的输入参数从`string`更改为`PAnsiChar`。

返回值更成问题。您将需要决定谁分配内存。分配它的人也必须释放它。

如果本机代码负责分配它，那么您需要堆分配以空字符结尾的字符串。并返回一个指向它的指针。您还需要导出一个释放器，以便 Java 代码可以要求本机代码释放堆分配的内存块。

在 Java 代码中分配缓冲区通常更方便。然后将其传递给本机代码并让它填充缓冲区的内容。这个 Stack Overflow 问题以 Windows API 函数`GetWindowText`为例说明了该技术：[How can I read the window title with JNI or JNA?](https://stackoverflow.com/questions/1173926/)

使用 Pascal 的示例如下：

```
function GetText(Text: PAnsiChar; Len: Integer): Integer; stdcall;
const
  S: AnsiString = 'Some text value';
begin
  Result := Length(S)+1;//include null-terminator
  if Len>0 then
    StrPLCopy(Text, S, Len-1);
end; 
```

在 Java 方面，我猜代码应该是这样的，记住我对 Java 一无所知。

```
public interface MyLib extends StdCallLibrary {
    MyLib INSTANCE = (MyLib) Native.loadLibrary("MyLib", MyLib.class);
    int GetText(byte[] lpText, int len);
}

....

int len = User32.INSTANCE.GetText(null);
byte[] arr = new byte[len];
User32.INSTANCE.GetText(arr, len);
String Text = Native.toString(arr); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-28T22:58:21.440

除此之外，在 64 位 Linux 上使用 stdcall 也不完全合乎逻辑。它可能有效，因为在 64 位目标上通常只有一个调用约定，但正确的是，它不是。使用 cdecl；

# ember.js - ember.js 中控制器的作用是什么

> ID：14057232
> 
> 赞同：3
> 
> 时间：2012-12-27T15:41:13.907
> 
> 标签：ember.js

在过去的几个月里，我一直在玩 ember.js，最后总是问“控制器扮演什么角色”，因为当我完成时它通常看起来像这样

```
App.Controller = Ember.Controller.extend({
  content: null
}); 
```

如果我有任何基本的验证要求，我倾向于在视图本身中执行这些操作。

如果我需要填充控制器内容，我会在路由器中执行此操作（尽管我更愿意减少此对象在当前版本的 ember 中似乎具有的职责数）。

我的模型通过 ember-data 使用单独的适配器进行持久化，并在需要时使用一些类似行为的域逻辑。

在我构建的每个应用程序中，我只剩下一个薄（非常非常少逻辑）控制器，如上所示。我确实发现这是对项目进行排序/分页/搜索/过滤/等的好地方，但是这个控制器对象在设计良好的 ember.js 应用程序中还应该负责什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-27T16:09:34.713

正如你所说，排序/分页/搜索/过滤（顺便说一句，Ember.ArrayController 支持其中的大部分）

我认为其他东西可以是围绕内容（模型）计算的属性，然后视图依赖于这些计算的属性，而不是自己完成这项工作。

也许它可能是一个跟踪和持久化视图状态（例如折叠/展开）的好地方，它不能在视图本身中持久化，因为它每次都被销毁/创建。

# android - 什么是 android 中的“点击事件”？

> ID：14057237
> 
> 赞同：2
> 
> 时间：2012-12-27T15:41:23.567
> 
> 标签：android, events, click, touch

在 iOS 世界中，有一个概念`touchUpInside`，触摸在视图中开始，用户在视图范围内抬起手指。

我在android中看到`touch`vs `click`（事件监听器），我想知道它们之间的区别。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-27T15:48:21.750

触摸事件更为基本。有很多品种。最常见的是：

`DOWN`：用户触摸项目

`MOVE`：用户**在触摸项目后围绕它移动**

`UP`：用户停止触摸项目

`CANCEL`：用户移开项目，但仍在触摸屏幕。

在 Android 中，`click`事件是触摸事件的组合。在`click`它的两个`DOWN`和`UP`行动的情况下。还有其他可以在`GestureDetector`. `Fling`例如，是、 和的组合`DOWN`，表示用户非常快速地滑动手指。`MOVE``UP`

**编辑：**

说明 Android 如何处理 onTouchEvent() 中的`true`和`false`。

它没有很好的文档记录，但是视图在 Android 中的工作方式是，当您触摸视图时，它会将触摸事件从父视图发送到所有子视图。然后每个孩子将事件发送给它的孩子。这是在`dispatchTouchEvent()`方法中完成的。

当父级从子级的方法`View`接收时，它将不再向该子级发送触摸事件。这意味着当您查看返回时，您的视图实际上是：`false``onTouchEvent()``false``onTouchEvent()`

`I am done processing touch events and all of my children are done as well.`

90% 的情况下，`onTouchEvent()`您会`return super.onTouchEvent()`返回`View`.

因此，让我们看一下您的点击示例。这是一种方法，您在`DOWN`事件中返回 false，但在 UP 中返回 true。

```
 @Override
  public boolean onTouchEvent(MotionEvent event) {

    switch (event.getAction()) {
    case MotionEvent.ACTION_DOWN:
      return false;
    case MotionEvent.ACTION_UP:
      return true;
      break;
    default:
      return false;
    }
} 
```

在这种情况下，它的父级`View`将立即收到 false。之后，它会停止向它发送触摸事件，`View`因为你说它已经完成了。

这是另一种方式：

```
 boolean mPossibleClick = false;

 @Override
  public boolean onTouchEvent(MotionEvent event) {

    switch (event.getAction()) {
    case MotionEvent.ACTION_DOWN:
      mPossibleClick = true;
      break;
    case MotionEvent.ACTION_UP:
      if(mPossibleClick) {
         // UP event immediately after DOWN. Perform click action
      }
    default:
      mPossibleClick = false;
    }
    return mPossibleClick;
} 
```

它相当粗糙，但基本上这就是将会发生的事情。当用户第一次触摸它时，您将收到`DOWN`返回 true 的信息。如果用户抬起手指，它将执行一个`click`动作，之后将返回 false，因为事件已完成。如果用户移动他的手指或执行任何其他操作，它将返回 false 并且单击将被取消。

最后一个**不是**实现点击的最佳方式，但我认为它说明了我想说的。在现实生活中，即使是几个像素，移动事件也非常普遍。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T15:46:47.743

每当引发任何视图的单击事件时都会使用 onClickListener，例如：Button、ImageButton 的单击事件。

每当您想要实现 Touch 类型的功能时，都会使用 onTouchListener，例如，如果您想获得您触摸的屏幕坐标。

定义：

onClickListner：单击视图时要调用的回调的接口定义。

onTouchListener：当一个触摸事件被调度到这个视图时，回调的接口定义。将在将触摸事件提供给视图之前调用回调。

细节：

onClickListener：http: [//developer.android.com/reference/android/view/View.OnClickListener.html](http://developer.android.com/reference/android/view/View.OnClickListener.html)

onTouchListener：http: [//developer.android.com/reference/android/view/View.OnTouchListener.html](http://developer.android.com/reference/android/view/View.OnTouchListener.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-27T15:47:34.320

参考***PH7的反应***

> 哪个更好用？

这真的取决于你的要求。 `onTouch`给你运动事件。因此，您可以做很多花哨的事情，因为它可以帮助您分离运动状态。仅举几个

*   `ACTION_UP`
*   `ACTION_DOWN`
*   `ACTION_MOVE`

这些是我们通常执行的常见操作，以获得期望的结果，例如在屏幕上拖动视图。

另一方面，`onClick`除了用户交互的视图之外，并没有给你太多。`onClick`是一个完整的事件，包括聚焦、按下和释放。因此，您几乎无法控制它。一方面是实现起来非常简单。

> 我们需要同时实施吗？

除非您想惹恼您的用户，否则没有必要。如果您只想要简单的点击事件，请选择`onClick`. 如果您想要的不仅仅是点击，请选择`onTouch`. 两者都做会使过程复杂化。

从用户的角度来看，如果你`onTouch`仔细实现看起来像`onClick`.

有关更多详细信息：请参阅[此](https://stackoverflow.com/questions/9122679/difference-between-ontouch-and-onclick-android)和[此](https://stackoverflow.com/questions/9923090/onclick-and-ontouch)

# jquery-ui - JQueryAutoComplete 不显示结果

> ID：14057241
> 
> 赞同：1
> 
> 时间：2012-12-27T15:41:40.833
> 
> 标签：jquery-ui, autocomplete, jquery-ui-autocomplete

我正在尝试绑定文本框和 JQuery 自动完成功能。当我检查 Firebug AJAX 请求和响应时，它返回如下。但是文本框没有显示任何项目。你能告诉我，我做错了什么吗？谢谢。

![在此处输入图像描述](../Images/b64a033ce5a38a0331132bdce12261ec.png) 这是我的编码：

```
$("#<%= TextBox1.ClientID %>").autocomplete({
            source: function (request, response) {
                $.ajax({
                    url: "/contractors/web_services/wsSM.asmx/SearchDrugs",
                    type: "POST",
                    dataType: "json",
                    data: {
                        'LocationID': "10543",
                        'Search': request.term
                    },
                    success: function (data) {                        
                        response($.map(data.d, function (item) {

                            return {
                                value: item.FullDrugName,
                                id: item.DrugID
                            }
                        }))
                    }
                });
            },
            delay: 1,
            minLength: 2,
            select: function (event, ui) {
                alert(ui.item.id);
            }
        }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T15:57:41.157

DataType 属性表示您期望从服务器返回的数据类型。您将数据类型定义为 json 但服务器会返回一个 xml 输出。您应该将 DataType 属性更改为 xml

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T16:31:24.007

除了[@fealin 的回答](https://stackoverflow.com/a/14057452/497356)之外，您还需要更改处理 xml 响应的方式。看起来您`d`在返回数据上没有属性，并且您还需要在 XML 结构中查找正确的节点并提取它们的文本以构建您返回到小部件的响应数组。

根据您提供的 XML，它可能看起来像这样：

```
$("#<%= TextBox1.ClientID %>").autocomplete({
    source: function (request, response) {
        $.ajax({
            url: "/contractors/web_services/wsSM.asmx/SearchDrugs",
            type: "POST",
            dataType: "json",
            data: {
                'LocationID': "10543",
                'Search': request.term
            },
            success: function (data) {                        
                response($(data).find("Drug").map(function (_, el) {
                    var $el = $(el);
                    return {
                        label: $el.find("FullDrugName").text(),
                        value: $el.find("DrugID").text()
                    };
            }));
        });
    },
    delay: 1,
    minLength: 2,
    select: function (event, ui) {
        alert(ui.item.id);
    }
}); 
```

这是一个仅使用 XML 字符串（没有 AJAX 请求）的示例：http: [//jsfiddle.net/J5rVP/29/](http://jsfiddle.net/J5rVP/29/)

# html - 封闭网络 Web 服务器 - 阻止视频下载

> ID：14057249
> 
> 赞同：0
> 
> 时间：2012-12-27T15:42:26.697
> 
> 标签：html, apache, video, squid

我正在做一个关于在 LAN 上运行的流服务器（Linux、Apache、Squid、DHCP）的项目。客户端通过网络浏览器连接到服务器并使用 HTML5 观看视频。使用 HTML5 非常简单，但客户端也可以通过右键菜单（或使用浏览器扩展）轻松下载视频。是否可以阻止用户使用 squid 代理服务器下载视频而他们可以使用浏览器播放视频？我试图阻止视频文件下载（使用 squid），但是使用这种方法 HTML5 视频也不会播放。我使用的用于阻止文件下载的 Squid 配置：

```
acl BlockExt url_regex -i \.mp4$    
http_access deny BlockExt all 
```

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T18:53:13.543

遗憾的是，在请求视频播放和请求下载视频的浏览器之间，无法区分服务器。

您可以通过 javascript 禁用右键单击来添加烦恼因素（这只会阻止真正的基本用户）或将视频拆分为多个片段并使用结束的事件跳转到下一个片段（当然有可能缓冲延迟，但为此处理音频的样本相当可靠 - [https://gist.github.com/1266499](https://gist.github.com/1266499)）

# javascript - 显示输入的用户内容

> ID：14057255
> 
> 赞同：1
> 
> 时间：2012-12-27T15:42:40.300
> 
> 标签：javascript, escaping

当用户在文本框中输入某个值时，它应该按原样显示在td 中**。**

这是我用**div**尝试过的代码，

```
<input type="text" name="userStr" id="userStr" onKeyUp="processValue()"/>
<div id="disp">
</div>
<script type="text/javascript" >
function processValue() {

var userval = document.getElementById("userStr").value;
//alert('userval'+userval);
document.getElementById("disp").innerHTML = userval;
} 
```

我输入值 <> ( ) # & ，但它显示为 <> ( ) # & 而不是原始字符串 (<> ( ) # & )

执行此操作的**标准**方法是什么。

虽然我键入的**stackoverflow**显示完全相同，但我现在将查看源代码，但要从您那里寻找见解。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T15:46:08.027

尝试：

```
document.getElementById("disp").innerHTML = userval.replace(/&/g, '&amp;').replace(/</g, '&lt;'); 
```

或者，您可以设置元素文本，但您必须处理浏览器的变化。

# javascript - jquery 或 javascript - 将文本编辑器中的文本添加到变量中

> ID：14057260
> 
> 赞同：0
> 
> 时间：2012-12-27T15:42:54.420
> 
> 标签：javascript, jquery, knockout.js

我有一个网页，其中包含一个名为“标题”的文本框和一个表示内容的文本编辑器窗口。我有这个 javascript 变量：

```
var article = {"title" : "I am a title", "content" : "I am the content"}; 
```

我必须承认，我以前从未在 javascript 中遇到过这种数组，这就是我需要帮助的原因。

这是我的 HTML 页面代码：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
...
<script type="text/javascript">
        var article = {"title" : "I am a title", "content" : "I am the content"};
    </script>

</head>
<body>
    <form name="myForm" method="post">
        <label>Title:</label><br />
        <input id="myTitle"></input><br /><br />
        <label>Content:</label><br />
        <textarea id="myContent" name="myContent" rows="15" cols="80" style="width: 80%">
</textarea><br /><br /> 
        <input type="submit" value="save" />
    </form>
</body>
</html> 
```

我需要添加到网页功能的是：

1.  当页面加载时，将标题文本框和文本区域（文本编辑器所在的位置）中的值放入文章变量中（在这种情况下，标题中的“我是标题”和编辑器中的“我是内容” ）。
2.  一旦我更改了这些文本框和文本区域中的值，变量本身应该更新为我编写的内容。

对我来说不幸的是，我从来没有遇到过这种变量，所以我很高兴得到一些指导。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T15:51:58.997

为此使用淘汰赛是一个不错的选择。首先，我建议您阅读淘汰赛的文档：http: [//knockoutjs.com/documentation/introduction.html](http://knockoutjs.com/documentation/introduction.html)

要跟踪对象状态，您应该使用`ko.observable`. 将以下代码放在页面底部：

```
<script type="text/javascript">
        var article = {
           title: ko.observable("I am a title"),
           content: ko.observable("I am the content")
        };

    ko.applyBindings(article);
</script> 
```

并更新您的表格如下：

```
<form name="myForm" method="post">
    <label>Title:</label><br />
    <input id="myTitle" data-bind="value: title"></input>
    <br /><br />
    <label>Content:</label><br />
    <textarea id="myContent" data-bind="value: content" name="myContent" rows="15" cols="80" style="width: 80%">
</textarea><br /><br />
    <input type="submit" value="save" />
</form> 
```

这是工作小提琴：http: [//jsfiddle.net/8gJAZ/](http://jsfiddle.net/8gJAZ/)

编辑：

也不要忘记添加对淘汰赛库的引用。

```
<script src='http://ajax.aspnetcdn.com/ajax/knockout/knockout-2.2.0.js' type='text/javascript'></script> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-27T15:48:53.663

如果您唯一的问题是“如何使用`object`”。您可以通过以下方式使用它：

```
var title = article.title;
var content = article.content; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-27T15:54:01.193

试试这个：

```
var article = {
    "title": "I am a title",
    "content": "I am the content"
};

$('#myTitle').val(article.title);
$('#myContent').val(article.content);

$('#target').click(function() {
    article.title = $('#myTitle').val();
    article.content = $('#myContent').val();
    alert(article.title + '\n' + article.content);
    return false;
});​ 
```

[**在这里演示**](http://jsfiddle.net/Hc4XD/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-27T16:23:20.673

我更喜欢为此目的使用闭包。您可以通过点语法使用下面注释的公共成员。您可能还想扩展和添加功能。

```
var Article = (function() {

    var title = "";
    var content = "";

    function setOrUpdateValues(t, c) {
        title = (t !== null) ? t : title;
        content = (c !== null) ? c : content;
    }

    function getValues() {
        return {
            title: title,
            content: content
        }
    }

    function setTitle(t) {
        title = t;
    }

    function setContent(c) {
        content = c;
    }

    function getTitle() {
        return title;
    }

    function getContent() {
        return content;
    }

    // public members
    return {
        title: title,
        content: content,
        getValues: getValues,
        setOrUpdateValues: setOrUpdateValues,
        updateTitle: setTitle,
        updateContent: setContent,
        getTitle: getTitle,
        getContent: getContent
    }
}());

// usage

Article.setOrUpdateValues("title", "content");

printValues();

Article.updateTitle("updated title");

printValues();

Article.setOrUpdateValues(null, "newContent");

printValues();

function printValues() {
    var values = Article.getValues();
    console.log("title: " + values.title + ", content: " + values.content);
} 
```

# php - 在查询中添加变量

> ID：14057261
> 
> 赞同：1
> 
> 时间：2012-12-27T15:42:59.333
> 
> 标签：php

我在这里有这个变量：

```
$prefix=$wpdb->base_prefix  ; 
```

哪个打印

```
wp_ 
```

现在，我确实有这个查询，我需要像这样插入它：

```
$path = $wpdb->get_results("SELECT * FROM $prefixbckg
 WHERE id = 1"); 
```

我的输出必须是这样的：

```
$path = $wpdb->get_results("SELECT * FROM wp_bckg
 WHERE id = 1"); 
```

我怎样才能做到这一点？因为我需要使前缀灵活，所以我需要在之前添加前缀，而不是预先定义它。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T15:44:27.613

正确的方法：

```
$path = $wpdb->get_results('SELECT * FROM '.$prefix.'bckg WHERE id = 1'); 
```

“我是 PHP 新手”的方式：

```
$path = $wpdb->get_results("SELECT * FROM {$prefix}bckg WHERE id = 1"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-27T16:35:32.007

尝试以下方法之一：

```
$prefix=$wpdb->base_prefix;
$mainPrefix = $prefix . 'bckg';
$path = $wpdb->get_results("SELECT * FROM $mainPrefix WHERE id = 1"); 
```

或者

```
$path = $wpdb->get_results("SELECT * FROM {$prefix}bckg WHERE id = 1"); 
```

两个结果是一样的：

```
SELECT * FROM wp_bckg WHERE id = 1 
```

但是哪个更快！？我做了一个简单的基准测试程序，下面是续集：

> 第一种方法时间为：0.0608940124512
> 
> 第二种方法时间为：0.0609350204468

所以第一种方法比第二种方法快一点:-)

祝你好运

# c++ - 在销毁期间使用 std::shared_ptr 的 Segfault 可能是由于堆栈上的函数调用过多

> ID：14057262
> 
> 赞同：18
> 
> 时间：2012-12-27T15:43:06.120
> 
> 标签：c++, c++11

以下代码编译并运行良好：

```
#include <memory>
struct MyTree {
    std::shared_ptr <MyTree> left;
    std::shared_ptr <MyTree> right;
    int val;
    MyTree(
        std::shared_ptr <MyTree> left_,
        std::shared_ptr <MyTree> right_,
        int val_
    ) : left(left_), right(right_), val(val_) {};
};
int main() {
    std::shared_ptr <MyTree> t(
        new MyTree( std::shared_ptr <MyTree>(),
                    std::shared_ptr <MyTree>(),
                    0)
    );  
    for(int i=0;i<10000;i++) {
        t.reset(new MyTree(t,t,0));
    }
} 
```

但是，当 for 循环从 10000 更改为 100000 时，我收到一个段错误。查看 gdb 中的结果，看起来由于 std::shared_ptr 中的垃圾收集而调用的析构函数创建了数千深的回溯。因此，我认为段错误是由于函数调用的堆栈空间不足。我有两个问题。首先，这是对段错误的正确评估吗？其次，如果是这样，是否有管理自定义数据结构的好方法，例如需要进行垃圾收集但可能非常大的树。谢谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-27T16:10:39.753

这通常不是问题，因为通常您会保持树平衡并且深度为 O(lg N)。

相反，你得到了一个奇怪的单链表，每个指针都有一个副本。这……很奇怪。

真正的单链表将是非常深的递归，但可能会受益于尾调用优化并且不会耗尽堆栈。

您遇到的问题对于您混合两种数据结构确实非常独特。这没有我能看到的好处。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-27T15:58:58.203

你的评估在我看来完全正确。看起来删除子子树的递归调用超过了 yoru 堆栈大小。这与我无关，`shared_ptr`因为我希望数据结构上的任何递归算法也会以同样的方式失败。

如果可能在您的平台上，处理此类大型结构需求的最简单方法就是增加堆栈的大小（例如`ulimit`）以允许自然递归算法运行。

如果这不可能，您将不得不自己遍历节点，将遍历结果存储到某种容器中，这样您就可以切分子节点，而不需要对树结构进行全深度遍历。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-27T17:10:00.477

这在我看来像是对`std::shared_ptr`. 还有一些非常糟糕的命名：你的类`MyTree`不是一棵树，而只是一个节点。树应该是一个单独的类，并且应该删除其析构函数中的所有节点。

话虽如此，就手头的问题而言，这不会有太大变化。您正在递归访问树上的节点（大约是唯一有意义的方式），如果您让树变得太深，堆栈将溢出，无论访问是否是隐式的（通过析构函数调用 in `std::shared_ptr`）或明确的。一开始就创建这样的树是没有意义的，因为在开始破坏*之前创建一个您无法访问其节点的树是没有意义的。*

## 编辑：

考虑到评论中关于垃圾收集的讨论。使用 Boehm 收集器或其他一些垃圾收集器将解决释放元素的问题。但是它仍然不允许你在释放之前访问它们，所以这样的树仍然没有用。（我认为在 C++ 中支持垃圾收集的观点非常强烈，但这不是其中之一。）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-27T21:12:58.250

我认为这种类型的错误可以在没有 shared_ptr 的情况下重现。这基本上是一个长递归调用。好的，我刚刚创建并删除了一半的树但是......

```
struct MyTree {
    MyTree *left;
    int val;
    MyTree()
    {
      left = 0;
    }
    MyTree(MyTree *left_)
     : left(left_) {};

    ~MyTree()
    {
      delete left;
    }
};
int main() {
    MyTree *t = new MyTree();
    for(int i=0;i<100000;i++) {
      t = new MyTree(t);
    }
    delete t;
} 
```

只需在 100000 之后再添加一个零，您就会收到相同的错误消息

# common-lisp - 使用波尔多线程等待信号或超时

> ID：14057267
> 
> 赞同：0
> 
> 时间：2012-12-27T15:43:19.320
> 
> 标签：common-lisp

我使用 sbcl 并且我有一个线程，它只执行特定任务（将某些内容写入文件），进入睡眠 30 秒并重复。

我想要实现的是：如果用户希望程序停止，线程应立即唤醒，写入文件并自行停止。

谁能给我一个提示？亲切的问候，帕特里克

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T18:30:20.010

Bordeaux-threads doesn't have such feature, so you should use the signal handling facilities of your implementation. Maybe [cl-signal-handler](https://github.com/orthecreedence/cl-signal-handler) can be useful. Also see [this question](https://stackoverflow.com/questions/9950680/unix-signal-handling-in-common-lisp) for some additional details.

# aop - 使用自定义注解匹配所有方法的切入点

> ID：14057270
> 
> 赞同：3
> 
> 时间：2012-12-27T15:43:39.947
> 
> 标签：aop, aspectj, spring-aop, spring-annotations

> **可能重复：**
> [带有特定注释的类的所有方法的@AspectJ 切入点](https://stackoverflow.com/questions/2011089/aspectj-pointcut-for-all-methods-of-a-class-with-specific-annotation)

我正在尝试为具有自定义注释的类的所有方法编写切入点。这是代码

*   注解：

    ```
    import java.lang.annotation.ElementType;
    import java.lang.annotation.Retention;
    import java.lang.annotation.RetentionPolicy;
    import java.lang.annotation.Target;

    @Retention(value = RetentionPolicy.RUNTIME)
    @Target(value = ElementType.METHOD)
    public @interface ValidateRequest {} 
    ```

*   控制器中的方法：

    ```
     @RequestMapping(value = "getAbyB", produces = "application/json")
     @ResponseBody
     @ValidateRequest
     public Object getAbyB(@RequestBody GetAbyBRequest req) throws Exception { 
         /// logic
     } 
    ```

*   方面：

    ```
     @Aspect
     @Component
     public class CustomAspectHandler {
         @Before("execution(public * *(..))")
         public void foo(JoinPoint joinPoint) throws Throwable {
             LOG.info("yippee!");
         }
     } 
    ```

*   应用上下文：

    ```
    `<aop:aspectj-autoproxy />` 
    ```

我一直在尝试各种建议，如下所述，但似乎没有一个有效（除了上面使用的那个）

*   `@Around("@within(com.pack.Anno1) || @annotation(com.pack.Anno1)")`
*   `@Around("execution(@com.pack.Anno1 * *(..))")`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T16:29:46.353

这应该有效：

```
 @Aspect
 @Component
 public class CustomAspectHandler {
    @Pointcut("execution(@ValidateRequest * *.*(..))")
    public void validateRequestTargets(){}

     @Around("validateRequestTargets()")
     public Object foo(JoinPoint joinPoint) throws Throwable {
         LOG.info("yippee!");
         return joinPoint.proceed();
     }
 } 
```

# android - 具有全局上下文的 Android 单例

> ID：14057273
> 
> 赞同：52
> 
> 时间：2012-12-27T15:44:07.810
> 
> 标签：android, application-singleton

根据 Android 文档，它指出：

> 通常不需要子类化 Application。在大多数情况下，静态单例可以以更模块化的方式提供相同的功能。如果您的单例需要全局上下文（例如注册广播接收器），则可以为检索它的函数提供一个上下文，该上下文`Context.getApplicationContext()`在首次构建单例时在内部使用。

如何创建一个具有全局上下文的静态单例，以便它能够在我的应用程序中更改的运行活动中幸存下来？有一个引用 getApplicationContext() 的静态上下文就足够了吗？

* * *

## 回答 #1

> 赞同：90
> 
> 时间：2012-12-27T16:23:26.380

***对问题的另一个编辑（2016）***

最近（截至 2016 年及以后）我一直在做的事情，以及我对任何开发人员的建议是：

只需使用 Dagger 2。无论您需要什么，`Context`您都可以：

```
@Inject Context context; 
```

就是这样。在此期间，注入所有其他单例的东西。

***编辑/改进的答案（2014）***

因为这个答案越来越受欢迎，所以我将使用我最近使用的示例代码（截至 2014 年 7 月）改进我自己的答案。

首先让应用程序保持对自身的引用。

```
public class App extends Application {
   private static App instance;
   public static App get() { return instance; }

   @Override
   public void onCreate() {
      super.onCreate();
      instance = this;
   }
} 
```

然后在需要访问的任何单身人士上，`context`我使用双重检查同步以线程安全的方式延迟加载单身人士，如此处所述[https://stackoverflow.com/a/11165926/906362](https://stackoverflow.com/a/11165926/906362)

```
private static SingletonDemo instance;

public static SingletonDemo get() {
   if(instance == null) instance = getSync();
   return instance;
}

private static synchronized SingletonDemo getSync() {
   if(instance == null) instance = new SingletonDemo();
   return instance;
}

private SingletonDemo(){
   // here you can directly access the Application context calling
   App.get();
} 
```

**原始答案**

文档的建议是使用[普通的单例模式](http://en.wikipedia.org/wiki/Singleton_pattern)

```
 public class SingletonDemo {
    private static SingletonDemo instance = null;

    private SingletonDemo() {       }

    public static SingletonDemo getInstance() {
            if (instance == null) {
                 instance = new SingletonDemo ();
            }
            return instance;
    }
} 
```

并在其中包含这样的方法：

```
 private Context context;
 init(Context context){
    this.context = context.getApplicationContext();
 } 
```

并记得调用它来初始化单例。

Application 方法和 Singleton 方法之间的区别以及 Singleton 更好的原因在文档中`same functionality in a more modular way`

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-11-22T00:36:49.433

我的应用程序中有这样的课程：

```
public class ApplicationContext {

    private Context appContext;

    private ApplicationContext(){}

    public void init(Context context){
        if(appContext == null){
            appContext = context;
        }
    }

    private Context getContext(){
        return appContext;
    }

    public static Context get(){
        return getInstance().getContext();
    }

    private static ApplicationContext instance;

    public static ApplicationContext getInstance(){
        return instance == null ?
                (instance = new ApplicationContext()):
                    instance;
    }
} 
```

然后例如在 Launch Activity 中初始化它：

```
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    //init
    ApplicationContext.getInstance().init(getApplicationContext());
    //use via ApplicationContext.get()
    assert(getApplicationContext() == ApplicationContext.get());
} 
```

# google-play - 如何删除我的旧 apk 并在 Google Play 市场上发布更新？

> ID：14057275
> 
> 赞同：1
> 
> 时间：2012-12-27T15:44:15.667
> 
> 标签：google-play

如何删除我的旧 APK 并在 Google Play 市场上发布更新？我有一个已发布的 APK，但我在代码中添加了一些额外的内容。我已经想出了如何取消发布我的应用程序，但是如何删除旧的并上传新的？我尝试停用并上传新的...并向我发送消息新的 apk 的 versionCode (1) 已经存在... .但是我已经修改了代码并进行了新的签名...如果更改包名称不被接受...我从清单中更新版本代码和名称并修复它！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-28T10:29:52.447

在新 APK 的 android 清单中更改这两行：

```
android:versionCode="the higher the number here, the newer the apk is to the android market- for ex. 2"
android:versionName="here is your version name- for ex. 1.0.2" 
```

之后发布apk

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-29T15:19:43.367

# 还要使用相同的 .keystore 文件对您的导出版本 .apk 文件进行签名::

尝试发布包含清单的新 .apk 文件 ::#

```
<application
android:versionCode="2.0" //higher number than your previous version(1.0) so 2.0 --> new version >      old version
android:versionName="2.0.0" //these version which would be display at Google Play Store
>  

</application> 
```

# jquery - 如何从 Jquery 覆盖中处理表单

> ID：14057280
> 
> 赞同：0
> 
> 时间：2012-12-27T15:44:35.493
> 
> 标签：jquery, ajax

好的，这就是我想要做的简单的事情。我有一个表格，每行都有一个复选框和输入字段。底部有一个按钮，允许用户批量编辑所有选中的行。单击按钮时，将打开一个覆盖（使用 Jquery 工具）（或者更确切地说，取消隐藏），其中包含一个输入字段和一个按钮。

```
<div id="batch">
<form>
<label>New text:</label>
<input type="text" />
</form>
</div>

<table>
<tr><td><input id="1234" type="checkbox" /></td><td>Some text (from database)</td></tr>
etc… 
```

到目前为止，一切都很好。

我现在想了解的是如何构造它以实际使用相关数据（即检查行的 ID 和新值）。

换句话说，当用户单击按钮时，我如何使某些事情发生？

# java - 返回 void 弄乱参考参数值

> ID：14057285
> 
> 赞同：3
> 
> 时间：2012-12-27T15:45:01.273
> 
> 标签：java, return, pass-by-reference, void

我编写此代码的目的是每次`recurse()`调用链时都会递增。但是，它会这样做（根据我在调试器中看到的）每次`recurse()`到达 return;，它会减少`b`. 如果您想了解我正在尝试做的事情，这是项目 euler #14。

[http://projecteuler.net/problem=14](http://projecteuler.net/problem=14)

```
private static void euler14()
{
    int currentstart=1000000;
    int longest = 0;
    int current=0;
    Integer chain=0;
    for(int i = currentstart; i>0; i--)
    {
        recurse(i,chain);
        if(chain > current)
        {
            current=chain;
            longest=i;
        }
        chain = 0;
    }
    System.out.print("Euler 14: " + longest + "\n");
}

private static void recurse(int a, Integer b)
{
    b++;
    if(a==1)
    {
        return;
    }
    else if(a%2==0)
    {
        recurse((a/2), b);
    }
    else if(a%2==1)
    {
        recurse(((a*3)+1), b);
    }
    return;

} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-27T15:49:48.627

尽管对 的引用`Integer`（按值）传递给`recurse`，但对象本身是不可变的。当你这样做`b++`时，增加的值被分配给`b`它是本地的`recurse`。一旦您返回，该值就会返回到`b`调用者中未更改的副本。

您可以创建`b`一个`static int`变量，并将其从参数列表中删除`recurse`以解决问题：

```
private static int b = 0;
private static void recurse(int a) {
    b++;
    if(a==1) {
        return;
    }
    if(a%2==0) {
        recurse((a/2), b);
    } else if(a%2==1) {
        recurse(((a*3)+1), b);
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-27T15:53:34.983

为了`b`在您的主要方法中查看更新，您需要在递归结束时将它们返回：

```
private static int recurse(int a, int b) {
    b++;
    if(a==1) return b;
    else if(a%2==0) return recurse((a/2), b);
    else if(a%2==1) return recurse(((a*3)+1), b);
    return b;
} 
```

在您的主要方法中，您`chain`使用新值更新您的：

```
chain = recurse(i,chain); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-27T15:54:06.977

由于您的方法当前没有返回值，因此您可以使用返回值来表示步数。只需将 1 添加到每个递归步骤：

```
private static int recurse(int a) {
    if(a==1) {
        return 1;
    }
    if(a%2==0) {
        return 1 + recurse(a/2);
    } else if(a%2==1) {
        return 1 + recurse((a*3)+1);
    }
} 
```

# mysql - 从 MySQL 数据库获取的数据生成服务器端流程图的 Javascript 模块？

> ID：14057295
> 
> 赞同：0
> 
> 时间：2012-12-27T15:45:56.393
> 
> 标签：mysql, javascript, flowchart

## MySQL DB -> HTML 中的流程图

我想在服务器端本身生成一些流程图并在 html 中显示。

流程图将从 MySQL 服务器中的数据创建。

是否有任何javascript模块（免费工具）可以让我获得这些功能，例如自动放置文本框和带有连接器标签的连接器或类似的东西可以实现我的目的。

# git - 如何取消暂存更改但继续跟踪 Mercurial 中的文件？

> ID：14057296
> 
> 赞同：1
> 
> 时间：2012-12-27T15:45:58.000
> 
> 标签：git, version-control, mercurial

例如，我有 2 个文件：`A`和`B`

然后它们都被跟踪和修改。我想要做的是一次提交一个文件。

在 git 中，我可以这样做：

```
git add A
git commit -m "add A"
git add B
git commit -m "add B" 
```

但在 Mercurial 中，我不知道如何做同样的事情。因为在第一次提交时，B 的更改也会自动提交。有人对此有想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-27T16:01:23.747

您必须`hg help commit` *仔细*阅读：

```
hg commit [OPTION]... [FILE]...

aliases: ci

commit the specified files or all outstanding changes 
```

即，如果您添加文件名，Mercurial**仅提交指定**的更改文件，没有文件名 - 全部

`hg ci -m "Add a" A & hg ci -m "Add B" B`将产生两个变更集（以 2 个命令而不是 4 个命令为代价，顺便说一句）

# php - Doctrine2 如何将实体映射到实体

> ID：14057297
> 
> 赞同：-1
> 
> 时间：2012-12-27T15:45:58.860
> 
> 标签：php, symfony, orm, doctrine

如何将一个学说实体映射到另一个（或多个）实体以进行抽象。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-27T16:12:52.157

您可以在手册中找到您需要的内容

[教义实体关系](http://symfony.com/doc/current/book/doctrine.html#entity-relationships-associations)

# eclipse - eclipse 导航器按原样显示图标文件

> ID：14057298
> 
> 赞同：1
> 
> 时间：2012-12-27T15:46:04.010
> 
> 标签：eclipse, eclipse-plugin

我的 rcp 项目中有一个仅包含 16x16 png 图标的文件夹。

我想知道有没有办法或hack，可以使包资源管理器按原样显示这些图标文件。这会让我觉得很方便。

![在此处输入图像描述](../Images/0ff8db81bee44a636e55657560799607.png)
这些图标显示为普通文档。

**当我尝试在 indigo for rcp 上安装 PDE-tool 时：**

```
Cannot complete the install because one or more required items could not be found.
  Software being installed: Jeeeyul's PDE-Tools 1.1.0.201211201045 (net.jeeeyul.pdetools.feature.feature.group 1.1.0.201211201045)
  Missing requirement: PDE-Tools 1.1.0.201211201045 (net.jeeeyul.pdetools 1.1.0.201211201045) requires 'bundle org.eclipse.ui.trace 0.0.0' but it could not be found
  Cannot satisfy dependency:
    From: Jeeeyul's PDE-Tools 1.1.0.201211201045 (net.jeeeyul.pdetools.feature.feature.group 1.1.0.201211201045)
    To: net.jeeeyul.pdetools [1.1.0.201211201045] 
```

**-------------------------------------------------- ----------------------------- 编辑**
我刚刚将 org.eclipse.ui.trace.jar 从 eclipse 4.2(juno) 复制到eclipse 3.7(indigo) rcp，然后成功安装 PDE-Tools。这似乎对我有用！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-28T07:38:20.100

安装[PDE 工具插件](https://github.com/jeeeyul/pde-tools)。它有一个图标预览装饰器，它[显示图标的内容](https://github.com/jeeeyul/pde-tools#icon-preview)而不是标准图标。

![截屏](../Images/701023a4c0298b8284541e10ea853083.png)

# javascript - 事件标识符 - ClientX 和 ClientY

> ID：14057302
> 
> 赞同：1
> 
> 时间：2012-12-27T15:46:11.400
> 
> 标签：javascript, events, identifier

我试图更好地理解事件属性 clientX 和 clientY 的用法。

当鼠标指针移过特定 div 时，我需要找到鼠标指针的顶部和左侧偏移量。projectImage(x) 函数附加到 div 的 onmouseover 上。x 是一个函数参数，基于它可以确定特定图像的 URL。

现在。clientX 是鼠标悬停事件发生时指针的左偏移量，所以我可以为 event.clientX 中的事件输入什么

下面的函数不起作用（由 JS 控制台报告为未定义）我认为是因为前两行中的语法错误。

```
function projectImage(x)
{

// Should the 1st two lines (right hand side) be x.clientY and x.clientX, 
// x is a function argument not event relevant to the pointer offset though

    var toffset = x.clientY ; // help_me_here.clientY

    var loffset = x.clientX ; // Event_Identifier_??.cleintX    

    var picdiv = document.getElementById("picdiv") ;
    picdiv.style.position = "absolute" ;
    picdiv.style.left = loffset + "px" ;
    picdiv.style.top = toffset + "px" ; 
    picdiv.innerHTML = "<img src='" + "http://imageServer.com/" + x.split("|")[1] + "' width='30px' />" ;

    picdiv.style.visibility = "visible";

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T16:02:44.653

您所要做的就是将事件对象传递给函数（也许重构一下参数）：

```
<div onmouseover="projectImage(event || window.event, 'Joey', 123);"> Joey </div> 
```

`event || window.event`需要，因为 IE 没有将事件对象作为参数传递给事件处理程序，因此必须通过`window`.

还要更改您的函数以能够访问这些参数：

```
function projectImage(event, name, id) {
    var toffset = event.clientY;
    var loffset = event.clientX;

    var picdiv = document.getElementById("picdiv") ;
    picdiv.style.position = "absolute" ;
    picdiv.style.left = loffset + "px" ;
    picdiv.style.top = toffset + "px" ; 
    picdiv.innerHTML = "<img src='http://imageServer.com/" + id + "' width='30px' />" ;

    picdiv.style.visibility = "visible";
} 
```

使用有意义的变量名有助于更容易理解代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-27T16:01:13.297

正如@FelixKling 提到的，您应该传递事件对象。

我建议切换到`addEventListener`/而不是使用内联事件，我[在这里](http://jsfiddle.net/nF6Kk/1/)`attachEvent`为您设置了一个示例。

```
var x = document.getElementById('x');
var y = document.getElementById('y');
document.getElementById('test').addEventListener('mousemove', function(e){
    x.innerHTML = 'X: ' + e.clientX;
    y.innerHTML = 'Y: ' + e.clientY;
});​ 
```

但是，如果您对内联事件一无所知，您可以通过`<div onmouseover="projectImage(event,'Joey|123');"> Joey </div>`

# c# - 在 IEnumerable 的上下文之外使用协方差

> ID：14057304
> 
> 赞同：4
> 
> 时间：2012-12-27T15:46:29.140
> 
> 标签：c#, inheritance, covariance

> **可能重复：**
> [C# 是否支持返回类型协方差？](https://stackoverflow.com/questions/5709034/does-c-sharp-support-return-type-covariance)
> [为什么我不能以这种方式实现接口？](https://stackoverflow.com/questions/10338004/why-cant-i-implement-an-interface-this-way)

考虑以下：

```
public interface IAnimal {
}

public class Animal : IAnimal {
}

public interface ICage {
     IAnimal SomeAnimal {get;}
}

public class Cage : ICage{
     public Animal SomeAnimal { get; set; }
} 
```

我已经阅读了很多关于 IEnumerable 的协变和逆变的内容，但我不确定如何让上述代码工作。我收到错误“Cage 未实现接口成员 IAnimal”。由于它定义了比 IAnimal 更定义的 Animal，因此协方差似乎应该照顾我。

我错过了什么？提前致谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-27T15:55:08.570

这在 C# 中目前是不可能的。

理论上，语言设计者可以添加它，只是他们还没有[还]。他们可能会也可能不会决定将它添加到 C# 的潜在未来版本中。

最好的解决方法可能是：

```
public class Cage : ICage
{
    public Animal SomeAnimal { get; set; }

    IAnimal ICage.SomeAnimal
    {
        get { return SomeAnimal }
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-27T15:55:11.710

Quoted from Eric Lippert, in response to me asking the same question here: [Why can't I implement an Interface this way?](https://stackoverflow.com/questions/10338004/why-cant-i-implement-an-interface-this-way)

> C# does not support return type covariance for the purposes of interface implementation or virtual method overrding. See this question for details:
> 
> [Does C# support return type covariance?](https://stackoverflow.com/questions/5709034/does-c-sharp-support-return-type-covariance/5709191#5709191)
> 
> C# does support generic covariance and contravariance of interfaces and delegate types that are constructed wtih reference types for the type arguments as of C# 4.
> 
> And C# does support return type covariance when converting a method that returns a reference type to a delegate type whose return type is a compatible reference type. (And similarly it supports parameter type contravariance.)
> 
> If this subject interests you, I have written a great many articles discussing various versions of variance that C# does and does not support. See
> 
> [http://blogs.msdn.com/b/ericlippert/archive/tags/covariance+and+contravariance/](http://blogs.msdn.com/b/ericlippert/archive/tags/covariance+and+contravariance/)
> 
> for details.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-27T16:00:21.797

```
public interface IAnimal {
}

public class Animal : IAnimal {
}

public interface ICage {
     IAnimal SomeAnimal {get;}
}

public class Cage : ICage{
     public Animal SomeAnimal { get; set; }
}

public class AnotherAnimal : IAnimal {
}

Cage c = new Cage();
ICage ic = (ICage)c;
ic.Animal = new AnotherAnimal(); 
```

this would be invalid because `AnotherAnimal` implements `IAnimal`, but it is not an `Animal`.

EDIT

the above would only be relevant if there was a setter defined in the interface. Because there is not, the proper answer here is that the desired functionality cannot be achieved in C#; it is a feature not included in the language.

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-12-27T16:08:35.663

To get covariance you should have something like this:

```
public interface IAnimal {
}

public class Lion : IAnimal {}
public class Sheep : IAnimal {}

// note the "out" on the T type parameter
public interface ICage<out T> where T:IAnimal {
     T SomeAnimal {get;}
}

public class Cage<T> : ICage<T> where T:IAnimal {
     public T SomeAnimal { get; set; }
} 
```

you can now do this:

```
// without covariance on ICage you can't assign a 'Cage<Sheep>' to 'ICage<IAnimal>'
ICage<IAnimal> sheeps = new Cage<Sheep>() {SomeAnimal=new Sheep()};
ICage<IAnimal> lions = new Cage<Lion>() {SomeAnimal=new Lion()}; 
```

or this (creating a heterogeneous list of `Cage<IAnimals>` with both Cages of Sheeps and Cages of Lions), which is an equivalent but probably more useful example:

```
// without covariance on ICage it errors: cannot convert from 'Cage<Sheep>' to 'ICage<IAnimal>'
var zoo = new List<ICage<IAnimal>>{
     new Cage<Sheep> {SomeAnimal=new Sheep()},
     new Cage<Lion> {SomeAnimal=new Lion()},
}; 
```

if you try removing the `out` from the declaration of `ICage` you will see the difference.

# oop - Matlab：清除期间未调用类析构函数？

> ID：14057308
> 
> 赞同：15
> 
> 时间：2012-12-27T15:46:47.627
> 
> 标签：oop, matlab, destructor

在 Matlab 我有一堂课

```
classdef myClass
    properties
       % some properties here...
    end
    methods ( Access = 'public' )
        function obj = myClass()
            % constructor...
        end
        function obj = delete( obj )
             % suppose to be destructor...
             fprintf(1, 'delete\n');
        end
    end % public methods
end 
```

当我`clear`是类型变量时，Matlab 的默认行为是什么`myClass`？例如：

```
>> m = myClass();
>> clear m 
```

我希望Matlab`m`在这个阶段调用析构函数，但似乎没有！

**我的问题：**

1.  变量时如何强制调用析构函数`clear`？

2.  Matlab 的这种默认行为是否有意义？`clear`在ing 变量时调用析构函数不是更合乎逻辑吗？

3.  Matlab的类是否可能没有detructor方法（即在类被销毁时没有要调用的默认方法）？还是我错过了什么？

4.  是否可能只有派生自的类`handle`具有析构函数（`delete`方法）？

谢谢！

**编辑：**按照[乔纳斯的回答](https://stackoverflow.com/a/14057698/1714410)，简要总结：

Matlab 有两种类型的类：[值类（默认）](http://www.mathworks.com/help/matlab/matlab_oop/user-defined-classes.html)和[句柄类（派生自`handle`超类）](http://www.mathworks.com/help/matlab/handle-classes.html)。值类倾向于提供更好的性能，但是，它们没有析构函数功能。

`handle`类确实有一个析构函数：`delete`当类被销毁时调用。从类析构函数的更多细节中查看[这个问题。](https://stackoverflow.com/questions/7236649/matlab-run-object-destructor-when-using-clear)`handle`

如果希望为值类提供类似析构函数的功能，Jona 的回答提出了一种利用`onCleanup`功能的方法。

感谢您的好答案和有见地的评论！

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-12-27T16:16:28.277

[Delete](http://www.mathworks.com/help/matlab/ref/handle.delete.html)仅被定义为句柄类的类析构函数，而不是值类（因此 Q4 的答案是“是”，请参阅文档的上一个链接）。值类的工作方式与标准 Matlab 数组非常相似，因为它们是通过值而不是通过引用传递的，而且许多内部结构（例如析构函数）对用户是隐藏的。作为交换，它们通常更快（例如参见[这个 SO question](https://stackoverflow.com/questions/1446281/matlabs-garbage-collector)）。

因此，如果您想调用删除方法，我建议使用[onCleanup](http://www.mathworks.com/help/matlab/ref/oncleanup.html)`delete(m)`功能（请注意，这实际上不会删除任何内容，因此您可能希望将其设为私有方法）。

```
classdef myTestClass
    properties
       % some properties here...
    end
    properties (Hidden)
        cleanup
    end
    methods ( Access = 'public' )
        function obj = myTestClass()
            % constructor...
            obj.cleanup = onCleanup(@()delete(obj));
        end
    end 
    methods ( Access = 'private' )
        %# I suggest hiding the delete method, since it does not
        %# actually delete anything
        function obj = delete( obj )
             fprintf(1, 'delete\n');
        end
    end % public methods
end 
```

# xslt - 如何在 xsl 模板中匹配这个或那个？

> ID：14057312
> 
> 赞同：2
> 
> 时间：2012-12-27T15:47:02.713
> 
> 标签：xslt

在我的 Sharepoint`fldtypes_custom.xsl`文件中，我有这段代码，它运行良好。但是，我想在三个或四个类似的字段上使用相同的代码。

有没有办法在同一个模板中匹配名为`status1`OR `status2`、 OR的字段？`status3`现在我必须拥有这段代码的三个副本，唯一的区别是`fieldref`名称。我想整理一下代码。

```
<xsl:template match="FieldRef[@Name='status1']" mode="body">
    <xsl:param name="thisNode" select="."/>
    <xsl:variable name="currentValue" select="$thisNode/@status1" />
    <xsl:variable name="statusRating1">(1)</xsl:variable>
    <xsl:variable name="statusRating2">(2)</xsl:variable>
    <xsl:variable name="statusRating3">(3)</xsl:variable>

    <xsl:choose>
        <xsl:when test="contains($currentValue, $statusRating1)">
            <span class="statusRatingX statusRating1"></span>
        </xsl:when>
        <xsl:when test="contains($currentValue, $statusRating2)">
            <span class="statusRatingX statusRating2"></span>
        </xsl:when> 
        <xsl:when test="contains($currentValue, $statusRating3)">
            <span class="statusRatingX statusRating3"></span>
        </xsl:when> 
        <xsl:otherwise>
            <span class="statusRatingN"></span>
        </xsl:otherwise>                    
    </xsl:choose>
</xsl:template> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T15:52:42.253

> 有没有办法在同一个模板中匹配名为 status1 OR status2、OR status3 的字段？

**使用**：

```
<xsl:template match="status1 | status2 | status3">
  <!-- Your processing here -->
</xsl:template> 
```

**但是**，我从提供的代码中看到，字符串`"status1"`和`"status2"`不是`"status3"`元素名称——它们只是元素`Name`属性的可能值`FieldRef`。

**在这种情况下，您的模板可能是**：

```
<xsl:template match="FieldRef
     [@Name = 'status1' or @Name = 'status2' or @Name = 'status3']">
  <!-- Your processing here -->
</xsl:template> 
```

**如果属性有许多可能的值`Name`，可以使用以下缩写**：

```
<xsl:template match="FieldRef
     [contains('|status1|status2|staus3|', concat('|',@Name, '|'))]">
  <!-- Your processing here -->
</xsl:template> 
```

# java - JUnit。并行运行。但是所有的测试方法都处理单例实例。怎么解决？

> ID：14057314
> 
> 赞同：3
> 
> 时间：2012-12-27T15:47:08.013
> 
> 标签：java, selenium, junit, parallel-processing, webdriver

所以，我有几个`JUnit`类，每个类都包含一个测试方法列表。每种方法都是相互独立的，没有直接的联系。但是我们有间接联系：所有方法都处理一个单例对象（它是`Selenium Web Driver`Instance，是的，我使用 1 个`Web Driver`Instance 进行所有测试，因为创建新对象实例需要花费大量时间！）。

一切正常，当测试方法在一个线程中逐步执行时。不过也太长了吧

所以，我决定提高速度，如何？- 我决定以并行模式运行所有测试方法。为此，我使用具有特殊配置的 maven 来执行并行测试。

但我认为，这是一个新问题的根源，因为 - 结果我们有并行方法执行，但我们仍然只使用**单个**Web 驱动程序实例。

我正在尝试找到最佳解决方案：

我希望测试将以并行模式执行——它真的很快。

我不希望每次测试都创建新对象 - 这是一个非常漫长的过程。

你能给我什么建议？

你会如何解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-27T16:17:10.193

对此没有其他选择。如果测试并行运行，则不能使用单个`WebDriver`实例，必须`WebDriver`为每个测试用例实例化一个实例。

通过连续运行测试来获得加速的一种方法是重用`WebDriver`对象，因为启动`WebDriver`往往是一个需要很长时间的步骤。另一个常见的优化是重用`FirefoxProfile`if a`FirefoxDriver`正在使用，因为配置文件的创建也很慢。

如果您确实选择重用该`WebDriver`对象，请确保您尝试在`tearDown`. 例如，通过清除 cookie：

```
driver.manage().deleteAllCookies(); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-28T09:40:43.147

不幸的是，webDriver 不是线程安全的。恕我直言，最佳实践是在单独的线程中使用单独的 webDriver 实例运行每个测试类。最佳线程数是 `int threadNum = Runtime.getRuntime().availableProcessors() * 2;`我的项目的执行时间从 30 分钟减少到 4 分钟。在 Thucydides 框架中使用完全相同的方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-27T16:18:21.400

根据测试中实际性能瓶颈的位置，您可以做一些粗暴的事情，例如`synchronized`在驱动程序周围添加一个包装器，这样您仍然只有一个，但对它的所有访问都是序列化的。

您可能会更改您的测试以`ThreadLocal`引用驱动程序，以便每个线程有一个驱动程序。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-05-18T10:40:06.233

[Jute maven 插件](https://github.com/raydac/jute)通过作为外部 JVM 进程启动来提供 JUnit 测试方法（！）的隔离，您也可以为测试定义特定的 JRE

# sql - 如何在两列之间找到缺失的数字？

> ID：14057316
> 
> 赞同：1
> 
> 时间：2012-12-27T15:47:17.923
> 
> 标签：sql, sql-server-2005

我正在寻找一种方法来查找范围内丢失的数字。我在同一张表中有一个起始编号列和一个结束编号列。

我正在尝试获取跳过的数字。我可以获得下一个跳过的数字，但不知道如何获取不在范围内的数字列表。如果有用的话，我有一个数字表。

这是我的例子：

```
doc_num_begin doc_num_end
------------- -----------
20000007      20000008
20000011      20000015
20000016      20000017 
```

我想得到`20000009,20000010`. 我已经搜索但无法找到如何使用开始列和结束列来执行此操作。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-27T15:55:52.753

如果你有一个数字表，那么这很容易：

```
select n.num
from Numbers n left outer join
     RangeTable rt
     on n.number between rt.doc_num_begin and doc_num_end
where rt.doc_num_begin is null 
```

这是从数字到范围表的左外连接，然后保留不匹配的那些。

虽然很容易表达，但由于非等值连接，性能可能会相当差。您可能还想在数字表中添加条件，因此您不要从 0、1、...开始。. .，当范围从 20000007 开始时。您可以这样做：

```
select n.num
from Numbers n join
     (select MIN(doc_num_begin) as MinVal, MAX(doc_num_end) as MaxVal from RangeTable) const
     on n.number between const.MinVal and const.MaxVal left outer join
     RangeTable rt
     on n.number between rt.doc_num_begin and doc_num_end
where rt.doc_num_begin is null 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-28T17:39:21.427

如果您只需要查找缺失的范围，则可以使用以下查询：

```
SELECT
  t1.doc_num_end + 1 as start_missing_range,
  MIN(t2.doc_num_begin) - 1 as end_missing_range
FROM
  your_table t1 INNER JOIN your_table t2
    ON t1.doc_num_end < t2.doc_num_begin
GROUP BY
  t1.doc_num_end
HAVING
  MIN(t2.doc_num_begin) - t1.doc_num_end > 1 
```

**编辑：**此查询可用于扩展范围：

```
SELECT num+start_missing_range
FROM
  (select 0 as num
   union all select 1 as num
   union all select 2 as num
   union all select 3 as num
   union all select 4 as num
   union all select 5 as num
   union all select 6 as num
   union all select 7 as num
   union all select 8 as num
   union all select 9 as num) numbers inner join
  (SELECT
    t1.doc_num_end + 1 as start_missing_range,
    MIN(t2.doc_num_begin) - 1 as end_missing_range
  FROM
    your_table t1 INNER JOIN your_table t2
      ON t1.doc_num_end < t2.doc_num_begin
  GROUP BY
    t1.doc_num_end
  HAVING
    MIN(t2.doc_num_begin) - t1.doc_num_end > 1) rg
  on end_missing_range-start_missing_range>=numbers.num 
```

（只有当一个范围最多包含 10 个数字时，它才会起作用，它可以很容易地扩展到更多......当然，总会有一个限制，但至少你不需要一个包含所有数字的表格)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-27T16:15:35.463

为此，您可以使用任何表或示例数据库中的已知序列号来使用此 id 进行过滤。交叉加入此 ID，将扩展您寻求的限制。

```
SELECT i from (select (w2.WorkOrderID-1)+(w1.WorkOrderID-1)*10000 as i
from    AdventureWorks.Production.WorkOrder w1
cross join AdventureWorks.Production.WorkOrder w2
where w1.WorkOrderID<10000 and w2.WorkOrderID<10000) as MyNumbers
WHERE i BETWEEN @StartRange and @EndRange
and not exists (SELECT 1 FROM MyTable
WHERE i BETWEEN doc_num_begin doc_num_end) 
```

# php - Symfony2 - 显示数据库中的所有表

> ID：14057317
> 
> 赞同：6
> 
> 时间：2012-12-27T15:47:20.623
> 
> 标签：php, mysql, symfony

我想以列表的形式检索我的数据库中的所有表。

我试图对查询执行“显示数据库”，但由于我没有使用我在 symfony 中定义的类（实体），所以它不起作用。

并使用 DQL ：

```
 $em = $this->getDoctrine()->getEntityManager();
   $query = $em->createQuery(
        'show databases');

    $result = $query->getResult(); 
```

这个错误：

```
[Syntax Error] line 0, col 0: Error: Expected SELECT, UPDATE or DELETE, got 'show' 
```

有什么想法可以帮助我吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2014-08-08T20:11:49.503

如另一个答案中所述，您可以使用`Doctrine\DBAL`：

```
/** @type \Doctrine\DBAL\Connection $connection */
$connection = ...;

/** @type \Doctrine\DBAL\Schema\MySqlSchemaManager $sm */
$sm = $connection->getSchemaManager(); 
```

然后将表格列为`Array`：

```
var_dump( $sm->listDatabases() ); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2017-04-24T18:59:15.927

我的 2 美分：

```
getContainer()->get('doctrine.dbal.default_connection')->getSchemaManager()->listTableNames() 
```

这将为您提供一组表名。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-12-27T16:00:09.687

我有几种情况需要使用在 DQL 中无法做到的复杂 sql 语句/函数。幸运的是，Symfony2/doctrine 提供了一种方法来获取当前的数据库连接并完全绕过学说。

```
//get connection
$conn = $this->get('database_connection');
//run a query
$users= $conn->fetchAll('select * from users'); 
```

但是，使用此方法时要**非常小心。**由于您绕过了原则，因此您需要自己处理任何安全问题，例如 SQL 注入。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2014-03-23T20:21:39.337

您可以将 Doctrine DBAL 添加到您的项目中，它将为您提供所需的工具。您可以列出数据库、数据库中的表、表中的列等

Doctrine DBAL 文档中的更多内容：http: [//docs.doctrine-project.org/projects/doctrine-dbal/en/latest/reference/schema-manager.html](http://docs.doctrine-project.org/projects/doctrine-dbal/en/latest/reference/schema-manager.html)

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-12-27T15:53:09.320

Doctrine 是一个 ORM，它并不打算列出所有数据库。除此之外，通常对于当前用户，您无权显示服务器中的所有数据库，这可能是一个重大的安全漏洞。

基本上，学说不知道如何解释您的查询，您必须为此使用本机查询：[Doctrine Native Query](http://docs.doctrine-project.org/en/2.0.x/reference/native-sql.html)

# openssl - OpenSSL 生成 RSA 密钥和 CA

> ID：14057318
> 
> 赞同：2
> 
> 时间：2012-12-27T15:47:21.587
> 
> 标签：openssl, certificate

我如何生成自己的 RSA 私钥和证书颁发机构。我想为我公司的网站设置证书。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T15:48:29.130

生成自签名证书将导致用户浏览器错误。普通客户端访问您的页面时，会在显示证书不安全的错误时将其关闭。

您最好的选择是从受信任的 CA 购买证书。

如果您仍想自己创建它，请使用以下命令：

```
genrsa -des3 -out ca/ca.key 4096 
```

生成 RSA 私钥。

```
req -new -x509 -days 3650 -key ca/ca.key -out ca/ca.cer 
```

创建自签名证书 CA

```
genrsa -des3 -out key.key 4096 
```

为 Web 证书创建 RSA 私钥

```
req -new -key key.key -out cerreq.csr 
```

创建企业社会责任

```
ca -policy policy_anything -cert ca/ca.cer -in cerreq.csr -keyfile ca/ca.key -days 365 -out cer.cer 
```

与您的 CA 签署证书

# c# - 如何将 Obj-C #define UMLOG_ERROR @"[UM Error]" 与 MonoTouch 绑定

> ID：14057319
> 
> 赞同：4
> 
> 时间：2012-12-27T15:47:23.960
> 
> 标签：c#, objective-c, ios, binding, xamarin.ios

我是 MonoTouch 的新手。我目前正在尝试将 Objective-C 库绑定到 MonoTouch，到目前为止我已经完成了很多工作，但是，我不知道如何绑定以下代码：

```
static inline NSString* UmRet_lookup(UmRet c) {
#define URLOOK(a) case a: return @#a;
switch (c) {
    URLOOK(UMRET_SUCCESS          )
    URLOOK(UMRET_NO_READER        )
    URLOOK(UMRET_SDK_BUSY         )
    URLOOK(UMRET_ALREADY_CONNECTED)
    URLOOK(UMRET_NOT_CONNECTED    )
    URLOOK(UMRET_LOW_VOLUME       )
    URLOOK(UMRET_UF_INVALID_STR   )
    URLOOK(UMRET_UF_NO_FILE       )
    URLOOK(UMRET_UF_INVALID_FILE  )
    default: return @"<unknown code>";
    }
    #undef URLOOK
} 
```

还有下一个代码：

```
#define UMLOG_ERROR    @"[UM Error] "
#define UMLOG_WARNING  @"[UM Warning] "
#define UMLOG_INFO     @"[UM Info] " 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-27T16:09:22.387

你不能绑定它，因为它不是*真正*的Objective-C 代码，而是一些 C**预**处理器指令。

在这种情况下，您需要将其重写为 C#。这看起来是将错误代码转换为字符串表示形式。根据您的应用程序，您可能希望使用 C# 字符串（而不是`NSString`）。

```
static public NSString UmRet_lookup (UmRet c)
{
   switch (c) {
   case UMRET_SUCCESS : return new NSString ("UMRET_SUCCESS");
   case UMRET_NO_READER : return new NSString ("UMRET_NO_READER");
   case UMRET_SDK_BUSY : return new NSString ("UMRET_SDK_BUSY");
   case UMRET_ALREADY_CONNECTED : return new NSString ("UMRET_ALREADY_CONNECTED");
   case UMRET_NOT_CONNECTED : return new NSString ("UMRET_NOT_CONNECTED");
   case UMRET_LOW_VOLUME : return new NSString ("UMRET_LOW_VOLUME");
   case UMRET_UF_INVALID_STR : return new NSString ("UMRET_UF_INVALID_STR");
   case UMRET_UF_NO_FILE : return new NSString ("UMRET_UF_NO_FILE");
   case UMRET_UF_INVALID_FILE : return new NSString ("UMRET_UF_INVALID_FILE");
   default: return new NSString ("<unknown code>");
   }
} 
```

其他定义应转换为 C# 静态，例如

```
static public NSString UMLOG_ERROR = new NSString ("[UM Error] ");
static public NSString UMLOG_WARNING = new NSString ("[UM Warning] ");
static public NSString UMLOG_INFO = new NSString ("[UM Info] "); 
```

同样，您可能想使用 C# `string`（并将它们`const`也转换为）。

# java - 低质量图像android开发

> ID：14057320
> 
> 赞同：1
> 
> 时间：2012-12-27T15:47:25.540
> 
> 标签：java, android, bitmap, png

我制作了一张 480x2500 的 Photoshop 图像，我想将其放入我的一项活动中。但是，安装 .apk 后，图像质量很差。我真的尝试了我在谷歌上找到的所有东西，但没有结果。我不是一个经验丰富的程序员，所以请花点时间解释一切可以帮助我的事情。这是我的代码：

XML:

```
<ScrollView
xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:padding="10dip"
android:tileMode="repeat"
android:dither="true">

<ImageView
    android:id="@+id/imageView2"
    android:layout_width="fill_parent"
    android:layout_height="1166dp"
    android:adjustViewBounds="true"
    android:scaleType="fitXY"
    android:src="@drawable/secondbutton3" /> 
```

Java 代码

```
import android.app.Activity;
import android.graphics.Bitmap;
import android.graphics.BitmapFactory;
import android.graphics.PixelFormat;
import android.graphics.drawable.BitmapDrawable;
import android.os.Bundle;
import android.view.Menu;
import android.view.WindowManager;

public class Secondbutton extends Activity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        setContentView(R.layout.activity_secondbutton);
        getWindow().setFormat(PixelFormat.RGBA_8888);
        getWindow().addFlags(WindowManager.LayoutParams.FLAG_DITHER);

        BitmapFactory.Options options = new BitmapFactory.Options();
        options.inPreferredConfig = Bitmap.Config.ARGB_8888;
        Bitmap gradient = BitmapFactory.decodeResource(getResources(), R.drawable.secondbutton, options);

        findViewById(R.id.imageView2).setBackgroundDrawable(new BitmapDrawable(gradient));

    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.activity_secondbutton, menu);
        return true;
    }

    } 
```

我试图擦除图像的一小部分（以获得透明背景）但没有结果。谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T16:04:23.030

你如何从photoshop保存图像？透明PNG！带网页导出

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-27T16:14:33.980

确保图像保存为 .png

此外，您可能希望通过 Android Asset Studio 运行它，它会自动缩放图像以适应不同的屏幕密度。

[安卓资产工作室](http://android-ui-utils.googlecode.com/hg/asset-studio/dist/index.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-27T17:54:50.297

This code worked for me

```
BitmapFactory.Options myOptions = new BitmapFactory.Options();
    myOptions.inDither = true;
    myOptions.inScaled = false;
    myOptions.inPreferredConfig = Bitmap.Config.ARGB_8888;
    myOptions.inDither = false;
    myOptions.inPurgeable = true;
    Bitmap preparedBitmap = BitmapFactory.decodeResource(yourAppName.getSharedApplication().getResources(),
            R.drawable.yourImage, myOptions);
    Drawable background = new BitmapDrawable(preparedBitmap);
    ((LinearLayout) findViewById(R.id.yourLayoutId))
        .setBackgroundDrawable(background); 
```

# c# - 在 ASP.NET MVC 中使用 SessionID 构建 url

> ID：14057323
> 
> 赞同：0
> 
> 时间：2012-12-27T15:47:37.407
> 
> 标签：c#, asp.net-mvc, session-cookies, session-state, sessionid

有没有办法为 ASP.NET MVC 中的 SessionID 内联操作构建 url？

我需要构建将由其他客户端应用程序使用的 url，这些客户端应用程序需要下载某种数据但识别原始会话，我希望有一个独立的 url 来做到这一点。

# android - 清理/解析由另一个站点包装的 url：不幸的是，Cleaner 已停止工作

> ID：14057324
> 
> 赞同：1
> 
> 时间：2012-12-27T15:47:43.540
> 
> 标签：android, android-intent

试图创建一个应用程序来“清理”由 facebook.com/l.php 包裹的 url。代码编译得很好，我什至可以从 facebook 应用程序调用它，但是我得到一个黑屏，而且我解析的新 url 似乎从未得到处理。

对 Java 来说不是新手，但对 droid 来说是新手..... :-o

无论如何，表现为：

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="fusco.leetum.fblinkcleaner"
android:versionCode="1"
android:versionName="1.0" >

<uses-sdk
    android:minSdkVersion="8"
    android:targetSdkVersion="15" />

<application
    android:allowBackup="true"
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppTheme" >
    <activity
        android:name="fusco.leetum.fblinkcleaner.Cleaner"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
        <intent-filter>
            <action android:name="android.intent.action.VIEW" />
            <category android:name="android.intent.category.DEFAULT" />
            <data android:scheme="http" android:host="facebook.com" /> 
            <data android:scheme="http" android:host="m.facebook.com" />
            <data android:scheme="http" android:host="www.facebook.com" />
        </intent-filter>
    </activity>
</application>

</manifest> 
```

并且活动 java ( finish() 在那里，因为如果用户启动它，它应该什么都不做，但是由于解析器代码在 onCreate() 方法中，它需要每次都启动)：

```
 package fusco.leetum.fblinkcleaner; `import android.net.Uri;
import android.os.Bundle;
import android.app.Activity;
import android.content.Intent;
import android.view.Menu;

public class Cleaner extends Activity {

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    //setContentView(R.layout.activity_cleaner);
    final Intent intent = getIntent();

    if (intent.getAction().equals(Intent.ACTION_VIEW)) {

        final String baseurl = intent.getDataString();
        String newurl = baseurl;
        if (baseurl.indexOf("?") != -1) {
            String[] parseurl = baseurl.substring(baseurl.indexOf("?")+3).split("%2F");
            newurl = "http:/";
            for (int i=2; i < parseurl.length; i++) {
                newurl = "/"+parseurl[i];
            }
        }

        final Intent viewnewpage = new Intent(Intent.ACTION_VIEW, Uri.parse(newurl));
        startActivity(viewnewpage);

    }

    this.finish();
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    // Inflate the menu; this adds items to the action bar if it is present.
    getMenuInflater().inflate(R.menu.activity_cleaner, menu);
    return true;
}

}` 

            回答 #1

赞同：0

时间：2012-12-28T02:33:20.757

傻我！而不是创建我自己的解析器，我只需要使用 Uri 类的东西。多么好的学习曲线。Android 与普通的桌面编程有点不同......我想你不能只是通过推土机来解决问题。哦，清单是一样的，但这里是“更好”的代码。Prolly 不是最好的，但仍然希望这对其他人有所帮助:-D

这进入 onCreate(...) 方法，替换除了超级调用之外的所有内容：

```
Intent intent = this.getIntent(); // get intent that started activity

    if (intent.getAction().equals(Intent.ACTION_VIEW)) { // if called by view action
        Uri raw = intent.getData(); // get raw uri
        Uri cleanedUri = raw; // assign to allow 'pass thru' of not a wrapper
        String wrappedUri = raw.getQueryParameter("u"); // get the url defined in l.php?u=

        if (wrappedUri != null) { // if there was a u= parameter
            cleanedUri = Uri.parse(Uri.decode(wrappedUri)); // decode %stuff and parse to the proper uri
        }

        startActivity(new Intent(Intent.ACTION_VIEW, cleanedUri)); // broadcast new intent with new URI
    }

    this.finish(); // clear out and close this activity 
```

```

# git - git合并拉取请求到私有存储库

> ID：14057326
> 
> 赞同：2
> 
> 时间：2012-12-27T15:47:52.513
> 
> 标签：git, version-control, pull-request

我从 git (dannycoates/v8-profiler) 克隆了一些存储库，安装时出现链接错误。我看到有人提交了一个拉取请求，假设要修复这个错误。现在我想尝试将此修复程序拉入我的私人本地仓库，我想知道使用哪个命令。拉取请求的标题为：

```
piaohai wants to merge 38 commits into dannycoates:master  from piaohai:3.6.2 
```

在这种情况下我可以使用 git pull 吗？我应该如何使用它？

谢谢，李

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T20:49:36.417

克隆存在拉取请求的存储库，获取他们的分支，确保您在他们指定请求的同一分支上（在本例中为 master），合并他们的更改。

```
git remote add piaohai git://github.com/piaohai/v8-profiler.git
git fetch piaohai
git checkout master
git merge piaohai/3.6.2 
```

# c# - 如何以秒为单位获得时间差？

> ID：14057329
> 
> 赞同：0
> 
> 时间：2012-12-27T15:47:56.037
> 
> 标签：c#, .net, datetime

在我的 C# 代码中，我使用**DateTime.Now**获取时间，稍后再使用。但是现在我怎样才能将这两个日期对象之间的差异以秒为单位作为整数值呢？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-27T15:49:12.267

```
long seconds = (long)(then - now).TotalSeconds; 
```

减去两个`DateTime`s 将返回一个`TimeSpan`对象，该对象具有整数`Seconds`属性（介于 0 和 60 之间）和浮点`TotalSeconds`属性。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-27T15:55:18.537

您是否考虑过使用`StopWatch`对象？

```
using System.Diagnostics;

Stopwatch watch = Stopwatch.StartNew();

// execute some code here....

parserWatch.Stop(); 
```

然后你可以得到这样的秒数：

```
int seconds = watch.ElapsedMilliseconds / 1000; 
```

或者一个`TimeSpan`对象，如果你想：

```
TimeSpan time = watch.Elapsed; 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-27T15:52:03.240

[使用减法](http://msdn.microsoft.com/en-us/library/system.datetime.subtract.aspx)的另一种方法：

```
 double second = then.Subtract(now).TotalSeconds; 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-12-27T16:02:03.897

```
 double starttime = Environment.TickCount;
  // do sth
 double endtime = Environment.TickCount;
 double millisecs = endtime - starttime;  // this is in milliseconds.
 double seconds = (millisecs / 1000);         //  this is in seconds. 
```

# java - ViewPager 上的 IllegalStateException

> ID：14057330
> 
> 赞同：0
> 
> 时间：2012-12-27T15:47:57.657
> 
> 标签：java, android, android-fragments, android-viewpager

我有一个使用 viewpager 的活动。由于数据可能无法从网络获得，因此我显示了一个进度条。当我有数据时，我通过将信息注入到一个包中来重置活动，然后调用 onCreate(bundle)。这以前有效，但是在 viewpager 活动中使用该技术时，我得到了以下结果。

```
12-27 15:44:00.875: E/AndroidRuntime(6568): FATAL EXCEPTION: main
12-27 15:44:00.875: E/AndroidRuntime(6568): java.lang.IllegalStateException
12-27 15:44:00.875: E/AndroidRuntime(6568):     at android.support.v4.app.FragmentManagerImpl.attachActivity(FragmentManager.java:1829)
12-27 15:44:00.875: E/AndroidRuntime(6568):     at android.support.v4.app.FragmentActivity.onCreate(FragmentActivity.java:185)
12-27 15:44:00.875: E/AndroidRuntime(6568):     at com.skinanalytics.skinuploader.ui.ActivityDashboard.onCreate(ActivityDashboard.java:77)
12-27 15:44:00.875: E/AndroidRuntime(6568):     at com.skinanalytics.skinuploader.ui.ActivityDashboard$3.onSuccess(ActivityDashboard.java:203)
12-27 15:44:00.875: E/AndroidRuntime(6568):     at com.loopj.android.http.AsyncHttpResponseHandler.handleSuccessMessage(AsyncHttpResponseHandler.java:160)
12-27 15:44:00.875: E/AndroidRuntime(6568):     at com.loopj.android.http.AsyncHttpResponseHandler.handleMessage(AsyncHttpResponseHandler.java:173)
12-27 15:44:00.875: E/AndroidRuntime(6568):     at com.loopj.android.http.AsyncHttpResponseHandler$1.handleMessage(AsyncHttpResponseHandler.java:85)
12-27 15:44:00.875: E/AndroidRuntime(6568):     at android.os.Handler.dispatchMessage(Handler.java:99)
12-27 15:44:00.875: E/AndroidRuntime(6568):     at android.os.Looper.loop(Looper.java:130)
12-27 15:44:00.875: E/AndroidRuntime(6568):     at android.app.ActivityThread.main(ActivityThread.java:3687)
12-27 15:44:00.875: E/AndroidRuntime(6568):     at java.lang.reflect.Method.invokeNative(Native Method)
12-27 15:44:00.875: E/AndroidRuntime(6568):     at java.lang.reflect.Method.invoke(Method.java:507)
12-27 15:44:00.875: E/AndroidRuntime(6568):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:867)
12-27 15:44:00.875: E/AndroidRuntime(6568):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:625)
12-27 15:44:00.875: E/AndroidRuntime(6568):     at dalvik.system.NativeStart.main(Native Method) 
```

# iframe - 在 youtube 上集成主页

> ID：14057338
> 
> 赞同：1
> 
> 时间：2012-12-27T15:48:30.363
> 
> 标签：iframe, youtube, webpage

我正在尝试找出如何在 YouTube 上集成个人主页，例如这个 iframe 示例：

[http://www.youtube.com/user/AudiofAmerica/home](http://www.youtube.com/user/AudiofAmerica/home) （来源：audiusafb.com/youtube2012/cms wordpress）

也许这个问题？ [http://support.google.com/youtube/bin/static.py?hl=en&topic=30085&guide=30071&page=guide.cs&answer=1727240](http://support.google.com/youtube/bin/static.py?hl=en&topic=30085&guide=30071&page=guide.cs&answer=1727240)

# java - 如何通过hibernate从java中的数据库加载数据

> ID：14057345
> 
> 赞同：-3
> 
> 时间：2012-12-27T15:48:55.900
> 
> 标签：java, database, hibernate, session

我正在写一个java项目。我使用 hibernate 作为 ORM 。现在我使用hibernate构建和填充我的数据库。问题是如何从数据库中加载记录并从中创建对象？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-27T15:54:51.470

这是任何在线可用的 Hibernate 教程的第一步： [这里](http://www.tutorialspoint.com/hibernate/hibernate_examples.htm)

# javascript - 标签选择器不会以动态形式出现

> ID：14057346
> 
> 赞同：0
> 
> 时间：2012-12-27T15:48:58.673
> 
> 标签：javascript, jquery, html, dynamic-forms

我想在选择器 .hapus-baris-makanan 上显示一个按钮，当 nama-makanan 的数组形式的数量超过一个时，选择器中的一个按钮 .hapus-baris-makanan 会出现，但是如果数组的数量-form nama-makanan blank / null ，选择器 .hapus-baris-makanan 中的按钮将被隐藏。我制作的以下编码

html

```
 <form id="formpembayaran" method="post" action="<?php echo base_url('pembayaran/simpanitempembayaran'); ?>">

    <table class="table table-striped area-table tabel-form-makanan">
        <thead>
            <tr>
                <th>Nama Makanan</th>
                <th>Jenis Makanan</th>
                <th>Harga Makanan</th>                            
            </tr>
        </thead>
        <tbody>
            <tr>
                <td>
                    <input type="text" name="nama-makanan[]" style="height: 30px; width: 280px;" class="nama-makanan" placeholder="ketikkan nama makanan"/>
                    <input type="hidden" name="id-makanan[]" class="id-makanan"/>
                </td>
                <td>
                    <input type="text" readonly name="nama-jenis-makanan[]" style="height: 30px; width: 280px;" class="nama-jenis-makanan" placeholder="nama jenis makanan"/>
                </td>
                <td>
                    <input type="text" readonly name="harga-makanan[]" style="height: 30px; width: 280px; text-align: right;" class="harga-makanan" placeholder="harga satuan makanan"/>
                </td>
                <td>
                    <a class="btn hapus-baris-makanan"><i class="icon-remove"></i></a>
                </td>
            </tr>
        </tbody>
    </table> 
```

javascript:

```
$(document).ready(function(){

    var myForm = document.forms.formpembayaran;
    var idMakanan = myForm.elements['nama-makanan[]'];

    if (idMakanan.length == null){
        $('.hapus-baris-makanan').hide();
    } else {
        $('.hapus-baris-makanan').show();
    }

    $('.tombol-tambah-makanan').on('click', function(){
        var tr = '<tr>\n\
                    <td><input type="text" name="nama-makanan[]" style="height: 30px; width: 280px;" class="nama-makanan" placeholder="ketikkan nama makanan"/><input type="hidden" name="id-makanan[]" class="id-makanan"/></td>\n\
                    <td><input type="text" readonly name="nama-jenis-makanan[]" style="height: 30px; width: 280px;" class="nama-jenis-makanan" placeholder="nama jenis makanan"/></td>\n\
                    <td><input type="text" readonly name="harga-makanan[]" style="height: 30px; width: 280px; text-align: right;" class="harga-makanan" placeholder="harga satuan makanan"/></td>\n\
                    <td><a class="btn hapus-baris-makanan"><i class="icon-remove"></i></a></td>\n\
                </tr>';
        $("table.tabel-form-makanan tbody").append(tr);                  
    });

    $('.tombol-reset-makanan').on('click', function(){
        $('table.tabel-form-makanan tbody tr:not(:first)').remove();
    });

    $('.tabel-form-makanan').on( 'click', '.hapus-baris-makanan', function(){
        $(this).closest('tr').remove()
    });
  }); 
```

我不知道故障的位置。请帮帮我。谢谢你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T16:11:07.397

这个：

```
var myForm = document.forms.formpembayaran;
var idMakanan = myForm.elements['nama-makanan[]'];

if (idMakanan.length == null){
    $('.hapus-baris-makanan').hide();
} else {
    $('.hapus-baris-makanan').show();
} 
```

应该：

```
if($('.nama-makanan').length){
    $('.hapus-baris-makanan').show();
} else {
    $('.hapus-baris-makanan').hide();
} 
```

`.hapus-baris-makanan`应该从风格开始`display:none`

# z3 - Z3 中的简化

> ID：14057349
> 
> 赞同：4
> 
> 时间：2012-12-27T15:49:04.393
> 
> 标签：z3

```
(declare-datatypes () ((SE BROKEN ON OFF)))
(declare-const s SE)
(declare-const a Int)
(simplify (or (= s ON) (= s OFF) (= s BROKEN)))
(simplify (and (> a 0) (> a 1))) 
```

结果是：

```
(or (= s ON) (= s OFF) (= s BROKEN))
(and (not (<= a 0)) (not (<= a 1))) 
```

但预期的结果是：

```
1
> a 1 
```

是否可以在 Z3 中简化此类表达式（此类表达式的组合）？谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-27T17:00:12.117

该`simplify`命令只是一个自下而上的重写器。它很快，但无法简化表达式，例如您帖子中的表达式。Z3 允许用户使用策略定义自己的简化策略。它们在[本文](http://research.microsoft.com/en-us/um/people/leonardo/strategy.pdf)和 Z3 教程（[Python](http://rise4fun.com/Z3Py/tutorial/strategies)和[SMT 2.0](http://rise4fun.com/Z3/tutorial/strategies)）中进行了描述。以下帖子还有其他信息：

*   [t>=1 或 t>=2 => t>=1](https://stackoverflow.com/questions/11507360/t-1-or-t-2-t-1)
*   [ctx-solver-simplify 中的不对称行为](https://stackoverflow.com/questions/13618192/asymmetric-behavior-in-ctx-solver-simplify)
*   [z3中的“简化”和“ctx-solver-simplify”有什么区别](https://stackoverflow.com/questions/11809034/whats-the-difference-between-simplify-and-ctx-solver-simplify-in-z3)

您的示例中的第一个查询可以使用该策略进行简化`ctx-solver-simplify`（也可以[在此处](http://rise4fun.com/Z3/SlpqN)在线获得）。

```
(declare-datatypes () ((SE BROKEN ON OFF)))
(declare-const s SE)
(declare-const a Int)
(assert (or (= s ON) (= s OFF) (= s BROKEN)))
(assert (and (> a 0) (> a 1)))
(apply ctx-solver-simplify) 
```

该命令`apply`将策略应用于`ctx-solver-simplify`断言集，并显示结果集。请注意，这种策略比 command 更昂贵`simplify`。

# html - HTML 表格单元格数据扩展超过 div

> ID：14057352
> 
> 赞同：0
> 
> 时间：2012-12-27T15:49:11.200
> 
> 标签：html, css

该图像基本上显示了正在发生的事情。我有一个 1270px 的包装器。在该包装器内（由右侧的垂直线指示）我有 4 个 div 和一个表。表格内容正在推过页面包装器。页面包装器没有浮动，因为它只是将页面上的内容居中。

我尝试了以下方法，但没有任何效果：

```
border: none;
padding: 0px;
border-collapse: collapse;
overflow: hidden;
table-layout: fixed; 
```

这是什么原因造成的？这也允许来自其他 4 个 div 的所有其他内容也可以推过页面包装器。

![在此处输入图像描述](../Images/bb736926f053fc1f18d8974e97981af0.png)

编辑：

```
<div id="wrap-page">
  <div id="wrap-content">
        <table id="content">
          <tbody>
            <tr>
              <td id="featured">
                <h1>h1</h1>
                <p>Lorem ipsum</p>

                <h2>h2</h2>
                <p>Lorem ipsum</p>
              </td>
              <td class="sidebar">
                <p>Lorem ipsum</p>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>

html, body{
  width:100%;
  margin:0;
  padding:0;
  background:#ccc;
  font-size:100%;
  line-height:1;
  font-family:Arial;
}

#wrap-page{
  float:left;
  margin:auto;
  width:1270px;
}

#wrap-content{
  margin:0 5px;
  border:1px solid;
}

#content{
  position:relative;
  float:left;
  border-collapse:collapse;
  width:1270px;
  margin:7px 0;
}

#featured{
  width:822px;
}

.sidebar{
  width:193px;
  vertical-align:top;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T15:58:29.180

您的内部 div 宽度和表格大于 1270 像素的外部包装。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T16:06:20.740

看起来您只是想为您的文本添加边框......

请尝试这个替代方案（没有表格）：http: [//jsfiddle.net/UXKTA/9/](http://jsfiddle.net/UXKTA/9/)

```
.test
{
    padding: 5px;
    border: 1px solid black;
    width: 200px;
}​ 
```

# android - 在图像编辑器中处理大位图

> ID：14057355
> 
> 赞同：5
> 
> 时间：2012-12-27T15:49:29.810
> 
> 标签：android, bitmap

对于我目前正在编写的程序，我需要一个简单的图像编辑器。本质上，用户只需从图库中选择图像即可导航到此编辑器。选择后，将创建图像编辑器活动，并应允许用户执行简单的编辑操作，例如旋转、亮度调整、缩放等。

目前，我已经设法相对轻松地实现了上述功能。我的问题在于将有问题的图像动态添加到`ImageView`. 你们中的许多人可能都知道；Binder 事务缓冲区有一个有限的固定大小，目前为 1Mb，由进程正在进行的所有事务共享。因此，我只能将位图的压缩版本加载到我的 ImageView 中，这对我来说是一个相当大的问题（我的程序主要设计用于平板电脑）。我对这个问题进行了大量研究，发现基本上可以将一个位图拆分为几个较小的位图，并将它们放在几个 ImageView 中，以创建一个连续图像的错觉`BitmapRegionDecoder`（如this [thread中所建议的）](https://stackoverflow.com/questions/6518215/display-huge-images-in-android)）。虽然这成功地允许我显示大图像，但我不知道应该如何使用多个`ImageView`. 有没有一种相对简单的方法可以做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-27T16:03:55.857

[观看来自 Google I/O](http://www.youtube.com/watch?v=gbQb1PVjfqM&list=PL46069800A957F535&index=10)的这段视频，他们在其中开发了具有图像编辑功能的高级图库应用。

[您可以在此处](http://code.google.com/p/iogallery/)下载应用程序的源代码。这是它打开图像编辑活动的方式：

```
private OnItemClickListener mPhotoClickListener = new OnItemClickListener() {
    @Override
    public void onItemClick(AdapterView<?> parent, View view, int position, long id) {
        // User clicked on photo, open our viewer
        final Intent intent = new Intent(AlbumActivity.this, PhotoActivity.class);
        final Uri data = ContentUris.withAppendedId(
                MediaStore.Images.Media.EXTERNAL_CONTENT_URI, id);
        intent.setData(data);
        startActivity(intent);
    }
}; 
```

图库还实现了图像编辑功能。该代码可能会有所帮助。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-27T17:03:12.480

你试过这个吗？options.inJustDecodeBounds 应设置为 true。

```
BitmapFactory.Options options = new BitmapFactory.Options();
options.inJustDecodeBounds = true;
BitmapFactory.decodeResource(getResources(), R.id.myimage, options);
int imageHeight = options.outHeight;
int imageWidth = options.outWidth;
String imageType = options.outMimeType; 
```

[http://developer.android.com/training/displaying-bitmaps/load-bitmap.html](http://developer.android.com/training/displaying-bitmaps/load-bitmap.html)

# python - 如果模式匹配，则将两个列表合并到字典中

> ID：14057357
> 
> 赞同：5
> 
> 时间：2012-12-27T15:49:40.420
> 
> 标签：python, list, dictionary

我基本上有一个文件夹中所有文件的列表，简化版本如下所示：

```
file_list = [ 'drug.resp1.17A.tag', 'drug.resp1.96A.tag', 'drug.resp1.56B.tag', 'drug.resp2.17A.tag', 'drug.resp2.56B.tag', 'drug.resp2.96A.tag'] 
```

另一个清单：

```
drug_list = [ '17A', '96A', '56B'] 
```

我想将这两个列表组合成一个字典，这样：

```
dictionary = {
    '17A' : ['drug.resp1.17A.tag' , 'drug.resp2.17A.tag' ], 
    '96A' : ['drug.resp1.96A.tag' , 'drug.resp2.96A.tag' ], 
    '56B' : ['drug.resp1.56B.tag' , 'drug.resp2.56B.tag' ]} 
```

我想这样做但卡住了！

```
dict_drugs = {}
for file in file_list:
    list_filename = file.split('.')
    for elem in drug_list:
        if elem in list_filename: 
```

在此之后我该怎么做才能将元素加入字典，还是我这样做完全错了？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-27T16:01:32.800

那么你不需要内循环

```
>>> file_list = [ 'drug.resp1.17A.tag', 'drug.resp1.96A.tag', 'drug.resp1.56B.tag', 'drug.resp2.17A.tag', 'drug.resp2.56B.tag', 'drug.resp2.96A.tag']
>>> dictonary = {}
... for i in file_list:
...     k = i.split('.')[-2]
...     if k in dictonary:
...         dictonary[k].append(i)
...     else:
...         dictonary[k] = [i]
>>> dictonary
62: {'17A': ['drug.resp1.17A.tag', 'drug.resp2.17A.tag'],
 '56B': ['drug.resp1.56B.tag', 'drug.resp2.56B.tag'],
 '96A': ['drug.resp1.96A.tag', 'drug.resp2.96A.tag']}
>>> 
```

* * *

再检查一次是否只需要 drug_list 中存在的那些值

表示如果 file_list 包含：

file_list = [' **drug.resp1.18A.tag** '，'drug.resp1.96A.tag'，'drug.resp1.56B.tag'，'drug.resp2.17A.tag'，'drug.resp2.56B。标签'，'drug.resp2.96A.tag']

```
>>> drug_list = [ '17A', '96A', '56B']
... dictonary = {}
... for i in file_list:
...     k = i.split('.')[-2]
...     if k in drug_list:
...         if k in dictonary:
...             dictonary[k].append(i)
...         else:
...             dictonary[k] = [i]
>>> 
```

**有效地做大写的另一种方法：**

```
dictonary = dict(((i,[]) for i in drug_list))

dictonary = {drug: [] for drug in drug_list}  # As @J.F. Sebastian suggested.

for file in file_list:
    k = file.split('.')[-2]
    if k in dictonary:
        dictonary[k].append(file) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-27T16:00:44.740

假设所有文件在药物列表中都有对应的匹配项：

```
dic = {d:[] for d in drug_list}
for file in file_list: dic[file.split('.')[-2]].append(file) 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-27T16:04:20.160

您可以尝试使用`itertools`and `groupby`（有关更多信息，请参阅[此处](http://docs.python.org/2/library/itertools.html#itertools.groupby)），其目标是提供一个`key`值，用于“分组”您的`file_list`（请注意，该`sorted`部分是必要的，因为项目需要按排序顺序正确分组） ：

```
In [1]: from itertools import groupby

In [2]: file_list = [ 'drug.resp1.17A.tag', 'drug.resp1.96A.tag', 'drug.resp1.56B.tag', 'drug.resp2.17A.tag', 'drug.resp2.56B.tag', 'drug.resp2.96A.tag']

In [3]: drug_list = [ '17A', '96A', '56B']

In [4]: grouper = lambda x: x.split('.')[-2]

In [5]: d = {}

In [6]: for key, group in groupby(sorted(file_list, key=grouper), key=grouper):
   ...:     d[key] = list(group)
   ...:     
   ...:     

In [7]: d
Out[7]: 
{'17A': ['drug.resp1.17A.tag', 'drug.resp2.17A.tag'],
 '56B': ['drug.resp1.56B.tag', 'drug.resp2.56B.tag'],
 '96A': ['drug.resp1.96A.tag', 'drug.resp2.96A.tag']} 
```

这样做是在拆分后按倒数第二个元素对您的每个项目进行`file_list`分组，然后将结果组分配给在该位置找到的键。部分是为了`grouper`节省一点空间 - 因为我们将通过我们的特殊键对列表进行排序，然后使用该`lambda`函数按相同的键进行分组，我们只是将该函数存储在一个单独的变量中，以便该`groupby`子句更易于阅读.

需要注意的一件事是，这不取决于您的`drug_list`，这可能对您很重要，也可能不重要。例如，这会将类似的东西分组`drug.resp1.1000A.tag`到`1000A`组中。

正如@JFSebastian 所提到的，您可以`drug_list`通过将列表转换为 a来有效地仅包含在您的列表中找到的那些药物`set`，这将仅包含唯一的项目，并且具有 O(1) 查找的好处（这意味着`if a in b`不需要搜索整个对象，与列表一样）：

```
In [10]: drug_list = set(drug_list)

In [11]: only_listed = (f for f in file_list if grouper(f) in drug_list)

In [12]: only_listed
Out[12]: <generator object <genexpr> at 0x24fcbe0>

In [13]: for key, group in groupby(sorted(only_listed, key=grouper), key=grouper):
   ....:     d[key] = list(group)
   ....:     
   ....:     

In [14]: d
Out[14]: 
{'17A': ['drug.resp1.17A.tag', 'drug.resp2.17A.tag'],
 '56B': ['drug.resp1.56B.tag', 'drug.resp2.56B.tag'],
 '96A': ['drug.resp1.96A.tag', 'drug.resp2.96A.tag']} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-27T15:59:44.003

试试这个：

```
dict_drugs = {s:[] for s in drug_list}

for file in file_list:
    list_filename = file.split('.')
    for elem in list_filename:
        if elem in drug_list:
            dict_drugs[elem].append(file) 
```

我更改了检查的顺序，因此它在字典中搜索文件名的一部分，而不是文件名中的药物。

另外，请注意字典在开始时初始化为每个药物的空列表。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-27T16:00:00.510

您可以使用 2 个推导来自然地循环数据结构。

```
dict((drug, [file for file in file_list if drug in file]) for drug in drug_list) 
```

让我们分解一下。我们需要创建一个字典，所以让我们为此使用列表推导。

```
dict((a, str(a + " is the value")) for a in [1, 2, 3]) 
```

最外面的部分是一个创建字典的列表理解。通过创建 (key, value) 形式的 2 元组，我们可以简单地调用 dict() 来获取字典。在我们的答案中，我们将药物设置为键，并将值设置为从另一个列表理解构建的列表。到目前为止，我们有：

```
{'17A': [SOMETHING],
 '56B': [SOMETHING],
 '96A': [SOMETHING]} 
```

现在我们需要填写一些东西，这就是内在理解所做的。看起来您的逻辑是检查药物文本是否出现在文件中。我们已经有了药物，所以我们可以说：

```
[file for file in file_list if drug in file] 
```

这将遍历文件列表并在药物出现时添加它。

在 Python 2.7 及更高版本中，您可以使用字典推导而不是使用 dict()。在这种情况下，它看起来像：

```
{drug: [file for file in file_list if drug in file] for drug in drug_list} 
```

这更清楚了，因为所有制作 2 元组和转换的样板都可以取消。

理解是编写代码的绝佳方式，因为它往往非常清楚地描述了您要做什么。值得注意的是，这并不是构建字典的最有效方法，因为它会遍历每种药物的每个文件。如果文件列表很长，这可能会很慢。

*编辑：我的第一个答案是胡说八道。作为忏悔，我做了这个详细的。*

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-12-27T16:05:09.257

`itertools.ifilter`可以把它变成单行字典理解。

```
>>> from itertools import ifilter
>>> file_list = [ 'drug.resp1.17A.tag', 'drug.resp1.96A.tag', 'drug.resp1.56B.tag', 'drug.resp2.17A.tag', 'drug.resp2.56B.tag', 'drug.resp2.96A.tag']
>>> drug_list = [ '17A', '96A', '56B']
>>> { k: list( ifilter( lambda v: k in v, file_list ) ) for k in drug_list }
{
    '56B': ['drug.resp1.56B.tag', 'drug.resp2.56B.tag'], 
    '96A': ['drug.resp1.96A.tag', 'drug.resp2.96A.tag'], 
    '17A': ['drug.resp1.17A.tag', 'drug.resp2.17A.tag']
} 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-12-27T16:07:34.277

如果药物列表中的字符串始终是文件列表中字符串的子字符串，则可以使用三个简单的代码行来完成。

```
In [1]: d = {}

In [2]: for drug in drug_list:
  ....:     d[drug] = [file for file in file_list if drug in file]

In [3]: d
Out[3]: 
{'17A': ['drug.resp1.17A.tag', 'drug.resp2.17A.tag'],
 '56B': ['drug.resp1.56B.tag', 'drug.resp2.56B.tag'],
 '96A': ['drug.resp1.96A.tag', 'drug.resp2.96A.tag']} 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2012-12-27T16:19:27.857

尽量使问题尽可能简单：

```
file_list = [ 'drug.resp1.17A.tag', 'drug.resp1.96A.tag', 'drug.resp1.56B.tag',      'drug.resp2.17A.tag', 'drug.resp2.56B.tag', 'drug.resp2.96A.tag']
drug_list = [ '17A', '96A', '56B']
result = {}

for drug in drug_list:
   result[drug] = []
   for file_name in file_list:
       if drug in file_name:
           result[drug].append(file_name) 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-12-27T16:04:15.197

这似乎有效

```
import re

file_list = [ 'drug.resp1.17A.tag', 'drug.resp1.96A.tag', 'drug.resp1.56B.tag', 'drug.resp2.17A.tag', 'drug.resp2.56B.tag', 'drug.resp2.96A.tag']
drug_list = [ '17A', '96A', '56B']
drugIdRegex = re.compile(r"drug\.resp\d+\.(?P<drugId>\d+\w+)\.tag")

if __name__ == "__main__":
    results = dict.fromkeys(drug_list, None)
    for file_name in file_list:
        matcher = drugIdRegex.match(file_name)
        if matcher and matcher.group("drugId") in results:
            if results[matcher.group("drugId")] is None:
                results[matcher.group("drugId")] = list()
            results[matcher.group("drugId")].append(file_name)
    print "Results: %s" % results 
```

尽管我很确定您可以在一行中使用列表推导来做到这一点！那会很酷（但我不知道如何）:)

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2012-12-27T16:31:47.480

```
 python 3.2

   {i:[v for v in file_list if i in v] for i in drug_list} 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2012-12-27T17:00:11.623

问题是你不知道药物的数量，未来可能会有新的药物出现。

我真的很喜欢 Faruk 的回答，这几乎是我的思维方式，但我会将其添加到 drug_list 创建中。

```
drug_list = list(set([x.split('.')[-2] for x in file_list])) 
```

# android - 链接 APK 以在我的网站上自动安装

> ID：14057362
> 
> 赞同：1
> 
> 时间：2012-12-27T15:50:01.010
> 
> 标签：android, hyperlink, installation

看起来我不能使用 WordPress 来托管我的 .apk，因为出于安全原因，该站点不允许这样做。其他人有这个问题吗？

下载 apk 时，Android 操作系统会自动启动安装活动吗？我知道亚马逊商店会自动将您带到安装活动，但是我如何通过直接链接到 apk 来实现这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-27T15:51:33.830

是的，您只需要为您的 *.apk 文件提供一个下载链接，Android 就会将其识别为 Android 应用程序，并在适当的时候启动安装。

如果您想在 Play 市场中支持指向您的应用的链接，您可以提供以下 URL：`https://play.google.com/store/apps/details?id=your.package.id`

# python - 新的 QGradient 类型。如何？

> ID：14057364
> 
> 赞同：2
> 
> 时间：2012-12-27T15:50:18.713
> 
> 标签：python, qt, pyqt

您好可以创建我自己的 QGradient 类型吗？例如，我们有 QLinearGradient，但我还需要不同的类型，例如 Exponential Up、Bump、Spike、Exponential Down。最好的方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T19:53:51.247

由于 python QGradiant 对象包装了相同的 C++ 变体，而这又可能映射到硬件或图形驱动程序支持，我想你所拥有的 Linear 类型从一般的角度来看就是你将要得到的一切。但是你总是可以使用线性梯度来合成这些。这是（未经测试）制作红色渐变的示例，该示例应用正方形来倾斜渐变的进展。

```
gradient = QLinearGradient(QPointF(100, 100), QPointF(200, 200))
for index in range(101):
    f = index / 100.0
    gradient.setColorAt(f, QColor((f ** 2) * 255, 0, 0, 255)) 
```

# android - 在android项目中添加“jfeinstein10 / SlidingMenu”的确切过程

> ID：14057367
> 
> 赞同：24
> 
> 时间：2012-12-27T15:50:34.687
> 
> 标签：android, android-layout

我对 android 完全陌生，我正在尝试实现`Sliding Menu having ListView with Swipe Gesture`，通过一些搜索我发现 [https://github.com/jfeinstein10/SlidingMenu](https://github.com/jfeinstein10/SlidingMenu) 正是我想要的，

有很多与此相关的问题正在指导如何将该库与项目集成，但没有一个问题适合像我这样的新手。github上给出的程序也不详细，我只知道如何添加.jar文件但是这个.zip和其他东西对我来说是全新的

这是我迄今为止所做的；

1.  从上面的链接下载的 zip
2.  提取到文件夹的链接
3.  在 Eclipse File->import->existing project into work-space..

现在它向我展示了包装中的许多错误`library.src.com.slidingmenu.lib.app`

例如

`The declared package "com.slidingmenu.lib.app" does not match the expected package "library.src.com.slidingmenu.lib.app"`

现在我不知道该怎么办...

请有人指导我如何在项目中集成和使用这个库的正确详细程序。

谢谢 ！

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2013-01-02T08:04:03.643

好吧，花了 3 天时间解决同样的问题，我找到了这件事的确切程序。[github](https://github.com/jfeinstein10/SlidingMenu)上的指南当然不适合我们这样的入门级人员，也没有这样的“分步教程”，所以需要时间。

重要提示：我没有包含“ `Sherlock ActionBar`”库，因为我想保持简单

*   首先将你的 eclipse 更新到最新`ADT`或最好的方式，你可以下载[它](http://developer.android.com/sdk/index.html) `ADT Bundle`，并确认一切在 new 中运行良好`ADTBundle`。

*   从“ [gitHub](https://github.com/jfeinstein10/SlidingMenu) ”下载最新的“ [zip for jfeinstein10 / SlidingMenu](https://github.com/jfeinstein10/SlidingMenu/archive/master.zip) ”，然后解压到任何你想要的地方。解压后，里面必须有这些文件和文件夹。

![解压后的文件夹](../Images/82f84ffee3b5cba4a0c8e06eaf9b9d20.png)

*   现在打开你的eclipse `File -> Import -> Android -> Existing Android Code Into Workspace`，浏览到你的文件夹最有可能“ `SlidingMenu-master`”，你应该看到以下

![在此处输入图像描述](../Images/842479042b6500d8bb672877e4cdac78.png)

点击`Finish`，如果 eclipse 显示一些错误，`Unable to resolve target`然后通过更改您的目标并检查您的 SDK 的`Right Click on project -> Properties -> Android`任何最新版本。`google API`

*   添加`Dependency`，通过右键单击`project -> properties -> android -> library -> add -> SlidingMenuActivity`，并清除两个项目。

*   添加名为`menu_frame`in your 的新 XML 布局，并将`res -> layout`以下内容放入其中。`Frame Layout``list view`

*   `ListView`还要在您的`mainActivity`XML 文件中添加一个。

*   现在是时候创建“菜单”，在您的`onCreate()`after中编写以下代码`setContentView(R.layout.activity_main)`。

    ```
    SlidingMenu menu;
    menu = new SlidingMenu(this);
    menu.setMode(SlidingMenu.LEFT);
    menu.setTouchModeAbove(SlidingMenu.TOUCHMODE_FULLSCREEN);
    menu.setShadowWidth(5);
    menu.setFadeDegree(0.0f);
    menu.attachToActivity(this, SlidingMenu.SLIDING_CONTENT);
    menu.setBehindWidth(200);
    menu.setMenu(R.layout.menu_frame); 
    ```

*   在显示错误的行中，按下`ctrl+1`并导入`com.slidingmenu.lib.SlidingMenu;`“

*   运行您的项目，您应该会看到菜单从左侧出现

*   现在下一个任务是为您的两个 ListView（即主屏幕和菜单）添加`adapter`和`listener`。

有关创建菜单时使用的功能的信息，您可以参考图书馆提供的示例应用程序或谷歌它们，有很多可用信息。

还要感谢“Jeremy Feinstein”提供了这么棒的图书馆

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T16:17:53.737

我相信你用不同的包名导入了包。

> 声明的包“com.slidingmenu.lib.app”与预期的包“library.src.com.slidingmenu.lib.app”不匹配

将其从*com.slidingmenu.lib.app*重命名为*library.src.com.slidingmenu.lib.app*并查看是否可以解决问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-27T16:32:22.550

您只需要在“库”文件夹中导入项目

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-18T10:20:59.823

我使用此代码将项目添加到我的 ListViews（菜单和主屏幕），但它仅适用于主屏幕

```
final Context context = this ;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    ListView lv = (ListView) findViewById(R.id.listView1);
    String[] items = new String[]{"xxx","xxx","xxx","xxx"};
    ArrayAdapter<String> adapter = new ArrayAdapter<String>(context ,android.R.layout.simple_list_item_1, android.R.id.text1, items); 
    lv.setAdapter(adapter);

    LayoutInflater inflater = (LayoutInflater) context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
    View view = inflater.inflate(R.layout.menu_frame, null);
    ListView lv2 = (ListView) view.findViewById(R.id.listView2);
    TextView tv2 = (TextView) view.findViewById(R.id.textView2);
    tv2.setText("Hello Mahdi");
    String[] items2 = new String[]{"xxx","xxx","xxx","xxx"};
    ArrayAdapter<String> adapter2 = new ArrayAdapter<String>(context ,android.R.layout.simple_list_item_1, android.R.id.text1, items2); 
    lv2.setAdapter(adapter2);

    SlidingMenu menu;
    menu = new SlidingMenu(this);
    menu.setMode(SlidingMenu.LEFT);
    menu.setTouchModeAbove(SlidingMenu.TOUCHMODE_FULLSCREEN);
    menu.setShadowWidth(5);
    menu.setFadeDegree(0.0f);
    menu.attachToActivity(this, SlidingMenu.SLIDING_CONTENT);
    menu.setBehindWidth(200);
    menu.setMenu(R.layout.menu_frame);
} 
```

# ios - 带有 iso10126 填充的 iOS 上的 AES256 解密

> ID：14057368
> 
> 赞同：2
> 
> 时间：2012-12-27T15:50:37.420
> 
> 标签：ios, aes, padding

我需要能够使用来自不受控制的服务器的 iso10126 填充来解密一大块 AES256 加密数据。CCCrypt 似乎只支持“kCCOptionECBMode”和“kCCOptionPKCS7Padding”作为选项，所以 CommonCrypto 库似乎无法满足我的要求。什么是最好的解决方案？

我也希望能够使用 iso7816 和 iso10126 填充，但它们的优先级较低。我知道这些填充选项被认为“可能不安全”，但由于我无法控制数据源，我希望仍然能够使用这些设置进行解密。

我相当肯定这些 AES 加密的数据片段是由 CryptoJS javascript 库加密的（它具有上面提到的所有填充选项）。我知道我可以通过 UIWebView 使用这个库并将结果返回到 Objective-C，但我想要比 javascript 库所能提供的更快的速度。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-27T20:05:18.507

填充是您实际上可以自己编程的东西之一（与许多其他加密算法不同）。只需在没有任何填充的情况下解密，然后自己进行取消填充以获得纯文本。如果你加密，显然先填充，然后加密。几乎所有的库都支持“NoPadding”之类的东西。[您可以通过查看Wikipedia 页面](http://en.wikipedia.org/wiki/Padding_(cryptography))轻松了解所有填充模式的工作原理。

请注意，您始终为给定模式填充/取消填充。因此，您可能必须添加一个完整的填充字节块。

请注意，ISO 7816 填充实际上并不存在。它是 ISO/IEC 9797-1 填充方法 2，用于字节而不是任何位数。它在 ISO/IEC 7816-4 中用于（未定义）安全消息传递（信息性）这一事实并不使其成为该标准的一部分。

无填充的其他问题/答案： [iOS 加密 AES128/CBC/nopadding 为什么不起作用？](https://stackoverflow.com/questions/10900894/ios-encryption-aes128-cbc-nopadding-why-is-not-working) 此链接应向您展示如何使用 iOS API 执行无填充加密/解密。

# asp.net - 如何比较asp.net单选按钮列表值

> ID：14057371
> 
> 赞同：3
> 
> 时间：2012-12-27T15:50:54.417
> 
> 标签：asp.net, radiobuttonlist

我正在尝试修复工作搜索工具。这是我第一次遇到 ASP.NET。当前的搜索工具有一个单选按钮列表，其中包含如何搜索我们的本地目录的三个选项。然而，在我之前从事这个项目的人没有完成代码并且已经退出。单选按钮不影响搜索查询，因为我注意到无论您选择什么选项，查询都是相同的。

这是我尝试重写搜索功能以合并三个单选按钮选项。但是，当我将此功能合并到其余代码中时，页面根本不会呈现，并且我没有收到错误消息。我认为我在查询字符串中没有出错，因为我采用了原始字符串并通过省略包含语句对其进行了变体。我假设错误来自我的 if 语句或我试图比较 asp.net RadioButtonList ListItem 值的方式。

```
protected void btnclick_WorkspaceSearch(object sender, EventArgs e){
    string strSearchTerm=tbSearch.Text.Trim() 

    if (rblSearchOption.SelectedValue == "all"){
        // Find the search term in either a file name or file content
        string indexQuery = "SELECT docauthor,doctitle, FileName, Path, Write, Size, Rank";
        indexQuery += "FROM " + "Workspace" + "..SCOPE() WHERE ";
        indexQuery += "CONTAINS(FileName, '\"" + strSearchTerm + "\"') ";
        indexQuery += "OR CONTAINS(Contents, '\"" + strSearchTerm + "\"') ";
        indexQuery += "ORDER BY Rank DESC";
    }
    if (rblSearchOption.SelectedValue=="names"){
        // Find the search term in a file name 
        string indexQuery = "SELECT docauthor,doctitle, FileName, Path, Write, Size, Rank";
        indexQuery += "FROM " + "Workspace" + "..SCOPE() WHERE ";
        indexQuery += "CONTAINS(FileName, '\"" + strSearchTerm + "\"') ";
        indexQuery += "ORDER BY Rank DESC";
    }
    if (rblSearchOption.SelectedValue =="contents") {
        // Find the search term in a file's content
        string indexQuery = "SELECT docauthor,doctitle, FileName, Path, Write, Size, Rank";
        indexQuery += "FROM " + "Workspace" + "..SCOPE() WHERE ";
        indexQuery += "CONTAINS(FileName, '\"" + strSearchTerm + "\"') ";
        indexQuery += "ORDER BY Rank DESC";
    }
    searchIndex(indexQuery);
    lit_strQueryString.Text = indexQuery;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T19:06:36.653

我解决了这个问题。对于那些评论感谢您的意见的人，我确实做了一些必要的更改以帮助纠正潜在的错误。至于比较 listItem 值的原始问题，我使用的行是：

```
if (rblSearchOption.SelectedItem.Value =="contents"){
//logic here
} 
```

我以前试过这个，但没有用。我假设是因为评论中指出的错误。

附加说明（基于评论）：上面的代码缺少 ; 在第 1 行

字符串索引查询应在 if 语句之外声明和启动。

再次感谢那些试图帮助我的人。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-28T05:51:57.890

很高兴你发现你的问题，有点不相关，但看看你的代码，我会说它需要一些认真的重构。这段代码可以简化为：

1）使用[switch](http://msdn.microsoft.com/en-us/library/vstudio/06tc147t.aspx)语句。这将有助于评估单选按钮列表的选定值一次，这与您的代码不同

2) 使用[StringBuilder](http://msdn.microsoft.com/en-us/library/system.text.stringbuilder.aspx)构造查询

3) 删除重复 -*名称*和*内容*的附加逻辑完全相同，您可以通过使用两个 case 表达式并提供一个执行语句来删除重复。

```
 System.Text.StringBuilder indexQuery = new System.Text.StringBuilder();
  indexQuery.Append("SELECT docauthor,doctitle, FileName, Path, Write, Size, Rank FROM Workspace..SCOPE() WHERE ");

    switch(rblSearchOption.SelectedItem.Value)
    {
        case "all":
        indexQuery.AppendFormat("CONTAINS(FileName,'{0}') ",strSearchTerm);
        indexQuery.AppendFormat("OR CONTAINS(Contents,'{0}')",strSearchTerm);
        indexQuery.AppendLine("ORDER BY Rank DESC");
            break;
        case "names":
        case "contents":
        indexQuery.AppendFormat("CONTAINS(FileName,'{0}')",strSearchTerm);
        indexQuery.Append("ORDER BY Rank DESC");
            break;
    }

    searchIndex(indexQuery.ToString());
    lit_strQueryString.Text = indexQuery; 
```

# windows - 我从哪里获得 wevutil？

> ID：14057373
> 
> 赞同：2
> 
> 时间：2012-12-27T15:50:57.820
> 
> 标签：windows, utility

我已经阅读了很多关于使用 wevutil.exe 的文章，它似乎正是我所需要的。但是，我找不到它。我在 Windows 2003 服务器、Windows 2008 服务器、Windows 7 等上进行了尝试。所有返回的结果都是“'wevutil' 未被识别为内部或外部命令”。TechNet（有使用它的文档）没有列出下载点，所以我认为它是随 Windows 提供的？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-27T15:54:20.127

我想你只是拼错了，它实际上是**WevtUtil**，并且位于`C:\Windows\System32`.

# php - 如何在 PHP 的 https 页面中使用私有 SSL 将锁定符号添加到我的网站

> ID：14057380
> 
> 赞同：0
> 
> 时间：2012-12-27T15:51:28.897
> 
> 标签：php, ssl, https, ssl-certificate

我刚刚从 hostgator 为我的网站购买了 SSL，这样当用户访问[https://www.mysite.com时，我可以在我的网站中添加锁定符号](https://www.mysite.com)

例如：i.stack.imgur.com/68EMA.png

现在他们已经安装了证书，但我无法在我的网站上显示这个东西。当我使用 https:// 打开网站时，它没有显示锁定符号。

请帮助我在我的 PHP 脚本中打开 https:// 页面时显示锁定符号和安全证书信息。

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-27T15:55:59.330

问题可能是您通过以`http://`. 将 URI 设为相对或将其更改为`https`. 这一切都假设您可以控制所有生成的内容。

# javascript - 如何在 Three.js 中通过鼠标拖动更改相机位置？

> ID：14057388
> 
> 赞同：1
> 
> 时间：2012-12-27T15:52:27.713
> 
> 标签：javascript, webgl, three.js

我制作了一种劳力士立方体几何形状，每层之间的“Z轴”有所不同。现在我想改变相机的位置，这样我就可以检查几何是否正是我所期望的。我的问题是如何在拖动窗口时更改相机位置，并且还应该能够根据鼠标事件操纵每个单独锥体的旋转。

这是我的 jsfiddle 链接：http: [//jsfiddle.net/sagh0900/gfraQ/8/](http://jsfiddle.net/sagh0900/gfraQ/8/)

示例代码，但请确保您访问 jsfiddle 以详细了解我的问题：

```
for ( var i = 0; i <nSize; i++)
{
    var k = i%10,
        j = (i-k)/10;

    j = j*2 - 10;
    k = k*2 - 10;

    var cone1 = lc_relationship.sensor1[i].Geometry; 
    scene.add(cone1);
    var cone2 = lc_relationship.sensor2[i].Geometry;
    scene.add(cone2);
    var cone3 = lc_relationship.sensor3[i].Geometry;
    scene.add(cone3);
    cone1.position.set(j, k, lc_relationship.sensor1[i].z_cordinate);
    cone2.position.set(j, k, lc_relationship.sensor2[i].z_cordinate);
    cone3.position.set(j, k, lc_relationship.sensor3[i].z_cordinate);
} 
```

如果有人可以更新我的 jsfiddle 或为我提供帮助就足够了。

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-27T16:22:09.143

我使用空（null）网格来添加对象而不是场景：Mesh

```
mesh = new THREE.Mesh(new THREE.Geometry());
scene.add(mesh);
/*[...]*/
mesh.add(cone1);
/*[...]*/
mesh.add(cone2);
/*[...]*/
mesh.add(cone3);
/*[...]*/ 
```

并添加这个来旋转这个网格：

```
var screenW = window.innerWidth;
var screenH = window.innerHeight; /*SCREEN*/
var spdx = 0, spdy = 0; mouseX = 0, mouseY = 0, mouseDown = false; /*MOUSE*/
document.addEventListener('mousemove', function(event) {
    mouseX = event.clientX;
    mouseY = event.clientY;
}, false);
document.body.addEventListener("mousedown", function(event) {
    mouseDown = true
}, false);
document.body.addEventListener("mouseup", function(event) {
    mouseDown = false
}, false);
function animate() {    
    spdy =  (screenH / 2 - mouseY) / 40;
    spdx =  (screenW / 2 - mouseX) / 40;
    if (mouseDown){
        mesh.rotation.x = spdy;
        mesh.rotation.y = spdx;
    }
} 
```

测试：http: [//jsfiddle.net/gfraQ/11/](http://jsfiddle.net/gfraQ/11/)

# python - Python IRC 机器人 /mode、/ban、/part、/join

> ID：14057395
> 
> 赞同：1
> 
> 时间：2012-12-27T15:53:19.680
> 
> 标签：python, bots, irc

Sooo 我有一个基于 Skybot（IRC 机器人）的 IRC 机器人。我已经查看了它的文档，但没有说明如何去做。我想让它加入、退出、部分、设置模式和其他 irc 命令，但从 chan 输入它们。简单的例子：

.part #hello ~ 分离chan .mode #hello +b Tom - 禁止汤姆

这就是它在有关事件的文档中的内容

> `@hook.event(irc_command)`
> 
> 每当发出特定的 IRC 命令时，都会调用事件挂钩。例如，如果您提供“*”作为参数，它将在每一行触发。如果您提供“PRIVMSG”，它只会在实际的聊天行（而不是昵称更改）上触发。
> 
> 在这些情况下，第一个参数将是 ["#channel", "text"] 形式的两元素列表。

这就是一个简单命令的工作原理。

```
from util import hook, http

@hook.command
def calc(inp,say=None):
    'Does calculation'

    h = http.get_html('http://www.google.com/search', q=inp)

    m = h.xpath('//h2[@class="r"]/text()')

    if not m:
        say("I can't calculate " + inp + ".")

    res = ' '.join(m[0].split())

    say(res + ".") 
```

**钩子.py**

```
 import inspect
import re

def _hook_add(func, add, name=''):
    if not hasattr(func, '_hook'):
        func._hook = []
    func._hook.append(add)

    if not hasattr(func, '_filename'):
        func._filename = func.func_code.co_filename

    if not hasattr(func, '_args'):
        argspec = inspect.getargspec(func)
        if name:
            n_args = len(argspec.args)
            if argspec.defaults:
                n_args -= len(argspec.defaults)
            if argspec.keywords:
                n_args -= 1
            if argspec.varargs:
                n_args -= 1
            if n_args != 1:
                err = '%ss must take 1 non-keyword argument (%s)' % (name,
                            func.__name__)
                raise ValueError(err)

        args = []
        if argspec.defaults:
            end = bool(argspec.keywords) + bool(argspec.varargs)
            args.extend(argspec.args[-len(argspec.defaults):
                        end if end else None])
        if argspec.keywords:
            args.append(0)  # means kwargs present
        func._args = args

    if not hasattr(func, '_thread'):  # does function run in its own thread?
        func._thread = False

def sieve(func):
    if func.func_code.co_argcount != 5:
        raise ValueError(
                'sieves must take 5 arguments: (bot, input, func, type, args)')
    _hook_add(func, ['sieve', (func,)])
    return func

def command(arg=None, **kwargs):
    args = {}

    def command_wrapper(func):
        args.setdefault('name', func.func_name)
        _hook_add(func, ['command', (func, args)], 'command')
        return func

    if kwargs or not inspect.isfunction(arg):
        if arg is not None:
            args['name'] = arg
        args.update(kwargs)
        return command_wrapper
    else:
        return command_wrapper(arg)

def event(arg=None, **kwargs):
    args = kwargs

    def event_wrapper(func):
        args['name'] = func.func_name
        args.setdefault('events', ['*'])
        _hook_add(func, ['event', (func, args)], 'event')
        return func

    if inspect.isfunction(arg):
        return event_wrapper(arg, kwargs)
    else:
        if arg is not None:
            args['events'] = arg.split()
        return event_wrapper

def singlethread(func):
    func._thread = True
    return func

def regex(regex, flags=0, **kwargs):
    args = kwargs

    def regex_wrapper(func):
        args['name'] = func.func_name
        args['regex'] = regex
        args['re'] = re.compile(regex, flags)
        _hook_add(func, ['regex', (func, args)], 'regex')
        return func

    if inspect.isfunction(regex):
        raise ValueError("regex decorators require a regex to match against")
    else:
        return regex_wrapper 
```

和**misc.py**，那里有一个 hook.event 命令：

```
#autorejoin channels
@hook.event('KICK')
def rejoin(paraml, conn=None):
    if paraml[1] == conn.nick:
        if paraml[0].lower() in conn.channels:
            conn.join(paraml[0])

#join channels when invited
@hook.event('INVITE')
def invite(paraml, conn=None):
    conn.join(paraml[-1])

@hook.event('004')
def onjoin(paraml, conn=None):
    # identify to services
    nickserv_password = conn.conf.get('nickserv_password', '')
    nickserv_name = conn.conf.get('nickserv_name', 'nickserv')
    nickserv_command = conn.conf.get('nickserv_command', 'IDENTIFY %s')
    if nickserv_password:
        conn.msg(nickserv_name, nickserv_command % nickserv_password)
        time.sleep(1)

    # set mode on self
    mode = conn.conf.get('mode')
    if mode:
        conn.cmd('MODE', [conn.nick, mode])

    # join channels
    for channel in conn.channels:
        conn.join(channel)
        time.sleep(1)  # don't flood JOINs

    # set user-agent
    ident, rev = get_version() 
```

**main.py**，其中定义了 conn 事物。

```
class Input(dict):
    def __init__(self, conn, raw, prefix, command, params,
                    nick, user, host, paraml, msg):

        chan = paraml[0].lower()
        if chan == conn.nick.lower():  # is a PM
            chan = nick

        def say(msg):
            conn.msg(chan, msg)

        def reply(msg):
            if chan == nick:  # PMs don't need prefixes
                conn.msg(chan, msg)
            else:
                conn.msg(chan, nick + ': ' + msg)

        def pm(msg):
            conn.msg(nick, msg)

        def set_nick(nick):
            conn.set_nick(nick)

        def me(msg):
            conn.msg(chan, "\x01%s %s\x01" % ("ACTION", msg))

        def notice(msg):
            conn.cmd('NOTICE', [nick, msg])

        dict.__init__(self, conn=conn, raw=raw, prefix=prefix, command=command,
                    params=params, nick=nick, user=user, host=host,
                    paraml=paraml, msg=msg, server=conn.server, chan=chan,
                    notice=notice, say=say, reply=reply, pm=pm, bot=bot,
                    me=me, set_nick=set_nick, lastparam=paraml[-1])

    # make dict keys accessible as attributes
    def __getattr__(self, key):
        return self[key]

    def __setattr__(self, key, value):
        self[key] = value 
```

我真的不明白我该怎么做。谢谢你的帮助！

# excel - 在列级别设置的日期格式

> ID：14057401
> 
> 赞同：1
> 
> 时间：2012-12-27T15:53:38.337
> 
> 标签：excel, vbscript

是否可以在运行时的列级别设置日期格式，比如`#9`我需要将日期格式设置为的列`[h]:mm:ss`？我将在将数组转置到该列之前设置格式。

**编辑**

```
Sub Macro1()
'
' Macro1 Macro
'

'
    Range("D1").Select
    Selection.Font.Bold = True
    With Selection.Interior
        .Pattern = xlSolid
        .PatternColorIndex = xlAutomatic
        .Color = 65535
        .TintAndShade = 0
        .PatternTintAndShade = 0
    End With
    With Selection.Font
        .Color = -16776961
        .TintAndShade = 0
    End With
End Sub 
```

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T18:38:31.027

> ob.Range.Column(9).format = [h]:mm:ss

上面必须写成

```
oXLWs.Columns(9).NumberFormat = "[h]:mm:ss" 
```

`oXLWs`相关表在哪里。例如，

```
Dim oXLApp, oXLWb, oXLWs

Set oXLApp = CreateObject("Excel.Application")

oXLApp.Visible = True

Set oXLWb = oXLApp.Workbooks.Add
Set oXLWs = oXLWb.Sheets("Sheet1")

oXLWs.Columns(9).NumberFormat = "[h]:mm:ss" 
```

**跟进**

这是你想要的吗？

```
Dim oXLApp, oXLWb, oXLWs

Set oXLApp = CreateObject("Excel.Application")

oXLApp.Visible = True

Set oXLWb = oXLApp.Workbooks.Add
Set oXLWs = oXLWb.Sheets("Sheet1")

With oXLWs.Columns(9)
    .NumberFormat = "[h]:mm:ss"
    .Interior.ColorIndex = 6 '<~~ Yellow
    .Font.Bold = True '<~~ Bold
    .Font.ColorIndex = 3 '<~~ Red
End With 
```

我参考这张旧照片的正常颜色（取自 dmcritchie 的[网站](http://dmcritchie.mvps.org/excel/colors.htm)）

![在此处输入图像描述](../Images/e9e249aac0f6051ff5638a03f779b87c.png)

# ruby-on-rails - select_date 在下拉列表中显示数字而不是月份名称

> ID：14057402
> 
> 赞同：0
> 
> 时间：2012-12-27T15:53:39.130
> 
> 标签：ruby-on-rails

嗨，我正在使用 select_date 函数在我的视图中仅显示月份名称的下拉菜单。但它在下拉列表中给了我数字而不是月份名称。有人可以帮忙吗？我的代码：

```
<%= select_date(Date.today, :order => [:month, :year], :discard_day => true, :use_short_month => true) %> 
```

在此先感谢 Sumanta

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-28T04:29:18.233

我没有看到任何语法问题，我尝试了同样的方法并得到了预期的结果 - 下拉列表中的月份。按照建议，请重新启动您的服务器。

# powershell - PowerShell Stop-Service/Start-Service 在特定服务器上不起作用

> ID：14057406
> 
> 赞同：3
> 
> 时间：2012-12-27T15:54:09.260
> 
> 标签：powershell, powershell-2.0

我有三台服务器，我们称它们为*Deploy1*、*Deploy2*、*Target*。所有服务器都运行完全更新的 Windows Server 2008R2。域用户*admin1*在所有服务器上都配置为管理员，这是我运行所有命令的用户。

以下命令适用于*Deploy1*：

```
Get-Service "MyService" -ComputerName Target | Stop-Service 
```

在*Deploy2*上运行相同的命令时，该命令失败并显示以下消息：

> 找不到服务名称为“MyService”的任何服务。

在*Deploy2*上，以下命令有效，并显示服务及其状态。

`Get-Service "MyService" -ComputerName Target`

现在，我知道还有其他方法可以通过 PowerShell 停止/启动服务，但我喜欢这种方法，因为它会自动等待服务器实际停止/启动。

那么*Deploy2*有什么问题呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-27T20:10:10.177

Powershell v2.0 在如何实现 Get-Service 返回的对象方面存在错误（功能？）。它实际上并没有正确设置 ComputerName 属性。因此，它只能影响本地服务。如果您升级到[Windows Management Framework 3.0](http://www.microsoft.com/en-us/download/details.aspx?id=34595)（进而升级到 Powershell v3），则该错误已修复并且可以正常工作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-27T19:20:53.367

这行得通吗？如果没有，是否产生错误？

```
(Get-Service "MyService" -ComputerName Target).Stop() 
```

# perl - 哈希的 Perl 哈希

> ID：14057407
> 
> 赞同：1
> 
> 时间：2012-12-27T15:54:14.640
> 
> 标签：perl, hash

我是 Perl 的新手，我正在尝试一些带有哈希的东西。我有一个哈希值，如下所示：

```
%HoH =   
(
    "Test1" => { checked => 1, mycmd => run1 },
    "Test2" => { checked => 1, mycmd => run2 },
) 
```

使用下面的代码，我将得到下面给出的输出：

```
for $family ( keys %HoH ) 
{
    print "$family: ";
    for $role ( keys %{ $HoH{$family} } ) 
    {
        print "$role=$HoH{$family}{$role} ";
    }
    print "\n";
} 
```

输出：

```
Test1: checked=1 mycmd=run1 
Test2: checked=1 mycmd=run2 
```

我的问题是，如何单独访问个人`checked`和`cmd`单独的？通过单独访问，我可以比较检查的内容并完成我的任务。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-27T16:40:45.130

从字面上使用关键字非常简单：

```
%HoH =   
(
    "Test1" => { checked => 1, cmd => run1 },
    "Test2" => { checked => 1, cmd => run2 },
);
if ($HoH{"Test1"}{checked}) {
print "Test1 is Checked with cmd: " . $HoH{"Test1"}{cmd} . "\n";
} 
```

> 使用 cmd 检查 Test1：run1

我是否正确理解了您的问题？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-27T20:48:52.493

```
for my $family ( keys %HoH )
{
    if ($HoH{$family}->{checked}) {
         # Do what you want...
    }
} 
```

# git - Git：防止外部用户访问特定分支

> ID：14057415
> 
> 赞同：2
> 
> 时间：2012-12-27T15:54:47.883
> 
> 标签：git, version-control, gerrit

我必须处理以下场景：假设我们有一个项目，我们为此目的使用 git。外部用户应该可以处理不受内部更改直接影响的部分代码（插件，...）。因此，由于 git 无法删除读取权限，您如何看待这个过程：

1.  创建两个仓库repo_int、repo_ext。Repo_ext 只有一个名为“shared”的分支。
2.  让外部开发者推送到那个分支
3.  使用本地克隆拉取并推送到第二个内部开发者分支

这可以按如下方式完成：

创建裸仓库

```
$ mkdir ~/remotes/repo_int.git
$ cd ~/remotes/repo_int.git && git init --bare
$ mkdir ~/remotes/repo_ext.git
$ cd ~/remotes/repo_ext.git && git init --bare 
```

创建新的语言环境存储库

```
$ cd /path/to/my/project && git init 
```

创建共享分支并签出

```
$ git checkout -b shared 
```

添加遥控器 repo_ext 和 repo_int

```
$ git remote add -t shared repo_ext ~/remotes/repo_ext.git 
$ git remote add repo_int ~/remotes/repo_int.git 
```

进行初步推动

```
$ git remote push repo_ext shared && git remote push repo_int * 
```

将 HEAD 从 repo_ext 设置为分支共享

```
$ git symbolic-ref HEAD refs/heads/shared 
```

获得对 repo_ext 的外部访问：

```
$ git clone ~/remotes/repo_ext.git 
```

做一些改变并推送东西

```
$ git push origin shared 
```

在内部存储库中执行分支检出并使用更改，例如合并或樱桃挑选

```
$ git clone ~/remotes/remote_int
$ git checkout -b shared repo_ext/shared 
... 
```

你会说什么，这是一种值得推荐的安全方式来处理这个问题吗？我听说过“gerrit”，这是一个代码审查工具，具有深远的用户权限管理。是否可以使用此工具处理问题？

非常感谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-27T15:58:31.880

Git 被构建为一个分散的版本控制系统。这意味着您可以轻松地在不同的存储库之间推送和拉取提交。

只需创建一个公共存储库和一个私有存储库，并让公共存储库仅拉取私有存储库的特定分支。当一个公共分支的提交被推送到任一存储库时，您应该使用 post-receive 钩子也将其推送到另一个。

实际上，这只不过是您在本地存储库上创建本地分支。您是唯一可以与当地分支机构合作的人，除非您允许某人将其从您那里拉走。

# batch-file - 需要帮助以特定格式批量重命名视频文件

> ID：14057417
> 
> 赞同：3
> 
> 时间：2012-12-27T15:54:55.597
> 
> 标签：batch-file, batch-processing, file-rename

我正在重命名来自数码相机视频记录的文件。它们以通用增量文件名输出文件，我不需要其中的任何信息。我的文件夹结构是：`x:\processing\01020304\VIDEO\0001.avi`.

我试图实现的文件名将用于此示例：

> 01-02-20121227-07h30m00s-03-04.avi

在本例中，`01-02`是`01020304`文件夹的前 4 个数字。`20121227`是视频的创建日期，`07h30m00s`作为视频的结束时间，通常以“最后修改时间”报告。最后`03-04`是之前使用的文件夹名称的后半部分。

我是编写这样的批处理文件的完全新手，但是找不到任何其他足以让自己开始的示例，因此将不胜感激。

编辑：到目前为止，我有：

```
 @echo off
setlocal EnableExtensions EnableDelayedExpansion

:: Setup
set "xPath=c:\processing\01010101\VIDEO"
set "xFolder="
set "xDateCreated="

:: Parse Folder Name
for /f "tokens=3 delims=\" %%A in ("%xPath%") do set "xFolder=%%A"

:: Loop through Videos
pushd %xPath%
for /f "tokens=1,2,3,4,*" %%A in ('dir *.avi /T:W /4') do if exist "%%~fE" (
    set "xDateCreated=%%~A %%~B %%~C"
    echo %xFolder:~0,2%-%xFolder:~2,2%-!xDateCreated:~6,4!!xDateCreated:~0,2!!

xDateCreated:~3,2!-!xDateCreated:~11,2!h-!xDateCreated:~14,2!m-00s-%xFolder:~4,2%-%

xFolder:~6,2%%%~xE
)
popd

endlocal
pause 
```

我们快到了，只是错过了几秒钟，如果可能的话 id 喜欢更改它，所以我不必提供目录，而是从处理文件夹中运行它并检查所有 01010101、02010101 等目录..

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-27T17:09:55.790

**更新的答案**

```
@echo off
setlocal EnableExtensions EnableDelayedExpansion

:: Create Empty Folder
rd /Q "%Temp%\Temp" 2>nul & mkdir "%Temp%\Temp"

:: Loop through Folders
pushd "xPath=x:\processing"
for /d %%D in (*) do call :Process "%%~fD"
popd
goto End

::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::
:Process <Parent>
:: Folder Name
set "xFolder=%~nx1"

:: Set Sub Folder
if not exist "%~1\VIDEO\" goto :eof
pushd "%~1\VIDEO"

:: Loop through Videos
for /f "delims=" %%A in ('dir *.avi /b') do if exist "%%~fA" (
    set "xDateWritten=%%~tA"
    set "xDateGMT=0000/00/00 00:00:00"
    for /f "tokens=1,2" %%X in ('robocopy . "%Temp%\Temp" "%%~nxA" /TS /FP /NS /NC /NP /NJH /NJS /NDL /L') do set "xDateGMT=%%X %%Y"
    rem Format = FF-FF-YYYYMMDD-HHh-MMm-SSs-FF-FF.ext
    echo %xFolder:~0,2%-%xFolder:~2,2%-!xDateWritten:~6,4!!xDateWritten:~0,2!!xDateWritten:~3,2!-!xDateWritten:~11,2!h-!xDateWritten:~14,2!m-!xDateGMT:~17,2!s-%xFolder:~4,2%-%xFolder:~6,2%%%~xA
)
popd
goto :eof

:End
endlocal
pause 
```

由于您将其更改为`T:C`，`T:W`我将脚本调整为仅使用 Last Written Date 并添加了文件夹递归。

准备好后用以下内容替换该`echo`行：

```
ren "%%~fA" "%xFolder:~0,2%-%xFolder:~2,2%-!xDateWritten:~6,4!!xDateWritten:~0,2!!xDateWritten:~3,2!-!xDateWritten:~11,2!h-!xDateWritten:~14,2!m-!xDateGMT:~17,2!s-%xFolder:~4,2%-%xFolder:~6,2%%%~xA" 
```

* * *

**原创 & 编辑**

好吧，为了保持脚本简单，我严格按照您发布的文件夹结构来设置格式。这只是一个让您入门的框架脚本。它有效，但没有获得视频的长度。长度可以根据已经检索到的信息来计算，但我现在不想做日期数学。:)

```
@echo off
setlocal EnableExtensions EnableDelayedExpansion

:: Setup
rd /Q "%Temp%\Temp" & mkdir "%Temp%\Temp" 2>nul
set "xPath=x:\processing\01020304\VIDEO"
set "xFolder="

:: Parse Folder Name
for /f "tokens=3 delims=\" %%A in ("%xPath%") do set "xFolder=%%A"

:: Loop through Videos
pushd %xPath%
for /f "tokens=1,2,3,4,*" %%A in ('dir *.avi /T:C /4') do if exist "%%~fE" (
    set "xDateWritten=%%~tE"
    set "xDateCreated=%%~A %%~B %%~C"
    set "xDateGMT=0000000000000000000"
    for /f "tokens=1,2" %%X in ('robocopy . "%Temp%\Temp" "%%~E" /TS /FP /NS /NC /NP /NJH /NJS /NDL /L') do set "xDateGMT=%%X %%Y"
    echo %xFolder:~0,2%-%xFolder:~2,2%-!xDateCreated:~6,4!!xDateCreated:~0,2!!xDateCreated:~3,2!-!xDateWritten:~11,2!h-!xDateWritten:~14,2!m-!xDateGMT:~17,2!s-%xFolder:~4,2%-%xFolder:~6,2%%%~xE
)
popd

endlocal
pause 
```

不幸的是，`t`选项和`dir`命令不提供秒所需的日期分辨率。要获取文件的完整最后修改时间戳，您可以使用`forfiles`or`robocopy`命令。

```
rd /Q "%Temp%\Temp" 2>nul & mkdir "%Temp%\Temp" && robocopy . "%Temp%\Temp" *.avi /TS /FP /NS /NC /NP /NJH /NJS /NDL /L 
```

**注意：** RoboCopy 以 GMT+0 形式返回文件的时间戳！它不会根据用户的时区设置返回时间戳。要确定您所在的时区，请使用`tzutil /g`.

请参阅[`RoboCopy /?`](http://technet.microsoft.com/en-us/library/cc733145%28v=ws.10%29.aspx)（Vista+ 或 XP 资源工具包）

```
forfiles /M *.avi /C "cmd /c echo @ftime" 
```

见[`ForFile /?`](http://technet.microsoft.com/en-us/library/cc753551%28v=ws.10%29.aspx)（Vista+）

**编辑：**

我更新了代码以将最后写入的小时和分钟包含在文件名中。所有需要做的就是`rename`在循环中添加命令。要从文件中获取时间戳的秒数，必须使用`robocopy`or命令。`forfiles`

**编辑 2：** 添加了有关 RoboCopy 和 GMT+0 文件时间戳的注释，并更新了代码以处理此限制。添加了`rd`and`mkdir`以确保我们有一个空文件夹，添加了文件时间戳的`for`解析，并添加了变量。这现在应该可以正常工作了，如果以后有时间，我会再清理一下。`robocopy``xDateGMT`

**编辑3：**

重新格式化答案以使其更清洁。请参阅上面的更新部分。

# node.js - 正在寻找 imagemagick nodejs npm？

> ID：14057426
> 
> 赞同：10
> 
> 时间：2012-12-27T15:55:52.140
> 
> 标签：node.js, imagemagick, node-imagemagick

我已经使用[node-imagemagick](https://github.com/rsms/node-imagemagick)几天了，并且已经意识到它有错误。

它有大约 100 个 fork，其中一些解决了我遇到的一些问题，但很难弄清楚我应该使用哪个 fork。

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-12-27T21:19:32.187

我曾经处于你的位置，在对有错误或奇怪 API 的模块感到非常沮丧之后，我开始通过生成子进程直接使用 imagemagic。Node.js 在这方面做得很好，所以实际上并不难。

```
var spawn = require('child_process').spawn;
var args = ['-ping', 'tree.gif' ];
var composite = spawn('identify', args); 
```

这也很棒，因为您可以只使用 imagemagic 文档。

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2013-01-06T00:43:28.597

我选择在我的一个项目中使用**gm** node 模块。它工作得很好。

见：[http ://aheckmann.github.com/gm/](http://aheckmann.github.com/gm/)

它基本上是**imageMagick**或**graphicsmagick**二进制文件的包装器。

这是一个简单的例子：

```
var gm = require('gm');
gm('/path/to/image.jpg')
.resize(353, 257)
.autoOrient()
.write(writeStream, function (err) {
  if (!err) console.log(' hooray! ');
}); 
```

# ruby-on-rails - nil:NilClass 的未定义方法“node_name”

> ID：14057428
> 
> 赞同：1
> 
> 时间：2012-12-27T15:55:56.250
> 
> 标签：ruby-on-rails, rspec

我在使用 rspec 时遇到了一些问题，它返回错误，即使一切都在 localhost 上运行。

```
 1) Item pages item creation with invalid information should not create an item
     Failure/Error: expect { click_button "Add" }.not_to change(Item, :count)
     NoMethodError:
       undefined method `node_name' for nil:NilClass
     # (eval):2:in `click_button'
     # ./spec/requests/item_pages_spec.rb:20:in `block (5 levels) in <top (required)>'
     # ./spec/requests/item_pages_spec.rb:20:in `block (4 levels) in <top (required)>' 
```

item_pages_spec.rb

```
require 'spec_helper'

describe "Item pages" do

  subject { page }

  let(:user) { FactoryGirl.create(:user) }
  let(:list) { FactoryGirl.create(:list, user: user)}
  before { sign_in user }

  describe "item creation" do
    before do 
      visit user_list_path(user, list)
      click_link "Add wish"
    end

    describe "with invalid information" do

      it "should not create an item" do
        expect { click_button "Add" }.not_to change(Item, :count)
      end

      # describe "error messages" do
      #   before { click_button "Add" }
      #   it { should have_content('error') } 
      # end
    end

    describe "with valid information" do

      before { fill_in 'item_title', with: "Lorem ipsum" }
      it "should create a item" do
        expect { click_button "Add" }.to change(Item, :count).by(1)
      end
    end
  end
end 
```

创建项目的表单

```
<% if signed_in? %>

  <div id="addWish" class="modal hide fade" tabindex="-1" role="dialog" aria-labelledby="addWishLabel" aria-hidden="true">
    <div class="modal-header">
      <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
      <h3 id="addWishLabel">Add wish</h3>
    </div>
    <div class="modal-body">
      <%= form_for(@item) do |f| %>
      <%= render 'shared/error_messages', object: f.object %>
      <div class="field">
        <%= f.hidden_field :list_id, value: @list.id %>
        <%= f.text_field :title, placeholder: "Title..." %>
        <%= f.text_field :link, placeholder: "Link..." %>
      </div>
    </div>
    <div class="modal-footer">
      <button class="btn" data-dismiss="modal" aria-hidden="true">Close</button>
      <%= f.submit "Add", class: "btn btn-primary" %>
      <% end %>
    </div>
  </div>
<% end %> 
```

我对 Rails 很陌生，非常感谢任何帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T20:29:02.517

不得不`click_button "Add"`改成`click_link "Add"`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T16:05:48.103

```
expect { click_button "Add" }.to_not change(Item.count)

expect { click_button "Add" }.to_not change(@items, :count) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-07-20T21:09:51.113

如果其他人落入此处，请检查@lucas 提到的您的 html 标签。这可能是你的情况。我在[这里](https://stackoverflow.com/questions/10613354/how-do-i-click-this-button-in-capybara)找到了这个。如果您的标签关闭严重，Capybara 将无法正确找到您的按钮。就我而言，我有这个：

```
 <div>
    <%= form_tag do %>
      <%= submit_tag %>
    </div>
    <% end %> 
```

关闭 form_tag 之外的 div 为我做了。

# ruby-on-rails - 仅限 Ruby 控制器 API

> ID：14057429
> 
> 赞同：2
> 
> 时间：2012-12-27T15:55:57.890
> 
> 标签：ruby-on-rails, devise

我是这个网站的新手，所以我希望我在创建这篇文章的过程中不要犯错误或违反任何规则（我已经阅读了所有规则，但还不是一切都清楚）。我有两个问题，我希望有人可以帮助我。我昨天从 php 切换到 ruby​​ on rails，使用最新的 ruby​​ 和 rails 版本进行 rvm 相当容易。在一些教程之后，我开始使用 devise 和 slim 应用程序。

现在我通过使用设计模型来`:token_authenticatable`启用所谓的 api 请求。现在我想创建一个名为*tasks*的控制器。如果我制作一个控制器，那么我可以通过互联网页面调用它，这不是本意。目的是这只能通过 api 请求来实现（我仍然需要弄清楚如何启用它）

是否可以调用只能通过 API 请求而不是通过 Web 浏览器检索的控制器？

感谢您的时间，感谢您的回答和帮助。

祝你今天过得愉快。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T16:53:27.873

根据其他人所说的，我认为您这样做的最佳方法有三个：

1)[`respond_to :json`](http://apidock.com/rails/ActionController/MimeResponds/InstanceMethods/respond_to)在控制器的开头和[`respond_with`](http://apidock.com/rails/ActionController/MimeResponds/respond_with)API 操作中调用。例如

```
class TasksController < ActionController::Base
  respond_to :json

  def api_call
    @something = Task.find(…)
    respond_with @something
  end
end 
```

2) 使用类似 RABL 的方式格式化您的回复（查看[这篇文章](http://blog.gomiso.com/2011/05/16/if-youre-using-to_json-youre-doing-it-wrong/)）

3）查看[rails-api](http://github.com/rails-api/rails-api)项目以获得灵感（或使用它）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T16:45:14.203

您可以将格式限制为仅接受任务控制器中的 json（或其他任何内容）。

# c# - 如何在 C# 中将字符串转换为 UTF-8？

> ID：14057434
> 
> 赞同：170
> 
> 时间：2012-12-27T15:56:20.427
> 
> 标签：c#, string, encoding, utf-8, character-encoding

我有一个从第三方应用程序收到的字符串，我想在我的 Windows Surface 上使用 C# 以任何语言正确显示它。

由于编码不正确，我的一段字符串在西班牙语中如下所示：

> 雅兴

而它应该是这样的：

> 行动

根据这个问题的答案： [How to know string encoding in C#](https://stackoverflow.com/questions/13993135/how-to-know-string-encoding-in-c-sharp/13994368#13994368)，我收到的编码应该已经出现在 UTF-8 上，但它是在 Encoding.Default 上读取的（可能是 ANSI？）。

我正在尝试将此字符串转换为真正的 UTF-8，但问题之一是我只能看到 Encoding 类的一个子集（仅限 UTF8 和 Unicode 属性），可能是因为我仅限于 Windows Surface API。

我尝试了一些我在互联网上找到的片段，但到目前为止，它们都没有被证明对于东方语言（即韩语）是成功的。一个例子如下：

```
var utf8 = Encoding.UTF8;
byte[] utfBytes = utf8.GetBytes(myString);
myString= utf8.GetString(utfBytes, 0, utfBytes.Length); 
```

我还尝试将字符串提取到字节数组中，然后使用 UTF8.GetString：

```
byte[] myByteArray = new byte[myString.Length];
for (int ix = 0; ix < myString.Length; ++ix)
{
    char ch = myString[ix];
    myByteArray[ix] = (byte) ch;
}

myString = Encoding.UTF8.GetString(myByteArray, 0, myString.Length); 
```

你们还有其他想法我可以尝试吗？

* * *

## 回答 #1

> 赞同：295
> 
> 时间：2012-12-27T16:15:30.617

如您所知，字符串正在进来，`Encoding.Default`您可以简单地使用：

```
byte[] bytes = Encoding.Default.GetBytes(myString);
myString = Encoding.UTF8.GetString(bytes); 
```

您可能需要记住的另一件事：如果您使用 Console.WriteLine 输出一些字符串，那么您也应该编写`Console.OutputEncoding = System.Text.Encoding.UTF8;`!!! 或者所有 utf8 字符串都将输出为 gbk...

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2012-12-27T16:30:59.433

```
string utf8String = "AcciÃ³n";
string propEncodeString = string.Empty;

byte[] utf8_Bytes = new byte[utf8String.Length];
for (int i = 0; i < utf8String.Length; ++i)
{
   utf8_Bytes[i] = (byte)utf8String[i];
}

propEncodeString = Encoding.UTF8.GetString(utf8_Bytes, 0, utf8_Bytes.Length); 
```

输出应该看起来像

> 行动
> 
> day's 显示日期

调用 DecodeFromUtf8();

```
private static void DecodeFromUtf8()
{
    string utf8_String = "dayâ€™s";
    byte[] bytes = Encoding.Default.GetBytes(utf8_String);
    utf8_String = Encoding.UTF8.GetString(bytes);
} 
```

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2012-12-27T15:58:39.403

您的代码正在读取 UTF8 编码字节序列，并使用 8 位编码对其进行解码。

您需要修复该代码以将字节解码为 UTF8。

或者（**不理想**），您可以将坏字符串转换回原始字节数组 - 通过使用不正确的编码对其进行编码 - 然后将字节重新解码为 UTF8。

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2016-12-05T14:06:44.240

```
 Encoding.Convert(Encoding.Default, Encoding.UTF8, Encoding.Default.GetBytes(mystring)); 
```

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2020-07-31T20:13:45.460

@anothershrubery 答案对我有用。我使用[StringEntensions 类](https://docs.microsoft.com/en-us/dotnet/api/system.web.webpages.stringextensions)进行了增强，因此我可以在我的程序中轻松转换任何字符串。

方法：

```
public static class StringExtensions
{
    public static string ToUTF8(this string text)
    {
        return Encoding.UTF8.GetString(Encoding.Default.GetBytes(text));
    }
} 
```

用法：

```
string myString = "AcciÃ³n";
string strConverted = myString.ToUTF8(); 
```

或者简单地说：

```
string strConverted = "AcciÃ³n".ToUTF8(); 
```

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2013-09-26T21:50:08.757

如果要将任何字符串保存到 mysql 数据库，请执行以下操作：->

您的数据库字段结构 i phpmyadmin [或任何其他控制面板] 应设置为 utf8-gerneral-ci

2）你应该改变你的字符串[例如。textbox1.text] 到字节，因此

2-1) 定义字节[] st2；

2-2）通过以下方式将您的字符串 [textbox1.text] 转换为 unicode [ mmultibyte string]：

```
byte[] st2 = System.Text.Encoding.UTF8.GetBytes(textBox1.Text); 
```

3）在任何查询之前执行此sql命令：

```
string mysql_query2 = "SET NAMES 'utf8'";
cmd.CommandText = mysql_query2;
cmd.ExecuteNonQuery(); 
```

3-2）现在您应该将此值插入到例如名称字段中：

```
cmd.CommandText = "INSERT INTO customer (`name`) values (@name)"; 
```

4）许多解决方案没有注意的主要工作是以下行：您应该使用 addwithvalue 而不是 add in command 参数，如下所示：

```
cmd.Parameters.AddWithValue("@name",ut); 
```

++++++++++++++++++++++++++++++++++++享受数据库服务器中的真实数据，而不是????

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2014-07-16T06:38:13.897

使用下面的代码片段从 csv 文件中获取字节

```
protected byte[] GetCSVFileContent(string fileName)
    {
        StringBuilder sb = new StringBuilder();
        using (StreamReader sr = new StreamReader(fileName, Encoding.Default, true))
        {
            String line;
            // Read and display lines from the file until the end of 
            // the file is reached.
            while ((line = sr.ReadLine()) != null)
            {
                sb.AppendLine(line);
            }
        }
        string allines = sb.ToString();

        UTF8Encoding utf8 = new UTF8Encoding();

        var preamble = utf8.GetPreamble();

        var data = utf8.GetBytes(allines);

        return data;
    } 
```

拨打以下电话并将其另存为附件

```
 Encoding csvEncoding = Encoding.UTF8;
                   //byte[] csvFile = GetCSVFileContent(FileUpload1.PostedFile.FileName);
          byte[] csvFile = GetCSVFileContent("Your_CSV_File_NAme");

        string attachment = String.Format("attachment; filename={0}.csv", "uomEncoded");

        Response.Clear();
        Response.ClearHeaders();
        Response.ClearContent();
        Response.ContentType = "text/csv";
        Response.ContentEncoding = csvEncoding;
        Response.AppendHeader("Content-Disposition", attachment);
        //Response.BinaryWrite(csvEncoding.GetPreamble());
        Response.BinaryWrite(csvFile);
        Response.Flush();
        Response.End(); 
```

# css - 在 Mvc4 的 _Layout.cshtml 中调用 Styles.Render 时出现 WebGrease 错误

> ID：14057437
> 
> 赞同：7
> 
> 时间：2012-12-27T15:56:28.887
> 
> 标签：css, asp.net-mvc-4, bundle, webgrease

我正在尝试将捆绑添加到我的 Mvc4 Web 项目中。我采取的步骤：

1.  添加了对我的项目的引用`System.Web.Optimization`
2.  添加`@Styles.Render("~/Content/css")`在`<head>`我的`_Layout.cshtml`
3.  添加`BundleConfig.RegisterBundles(BundleTable.Bundles);`到`Global.asax.cs`
4.  使用方法添加`BundleConfig.cs`到我的`App_Start`文件夹`bundles.Add(new StyleBundle("~/Content/css").Include("~/Content/site.css"));`中`RegisterBundles(...)`
5.  `site.css`在我的`Content`文件夹中添加了一个简单的。

我从上面的第 2 步上线的错误是`Could not load file or assembly 'WebGrease, Version=1.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35' or one of its dependencies. The system cannot find the file specified.`

![在此处输入图像描述](../Images/842c668c355b37040f83aa29e2098990.png)

我是否缺少 DLL 引用或其他内容？请注意，我最初是从一个空白的 Mvc4 项目开始的。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-02T02:43:33.610

在最后一天左右，我也遇到了这个问题，但我想出了一个解决方案。基本上你只需要更新“webgrease”。

这是我为更新 webgrease 所做的：

1.  在解决方案资源管理器中右键单击您的项目解决方案。
2.  单击“管理解决方案的 NuGet 包”
3.  转到左侧的更新部分
4.  搜索“WebGrease”
5.  然后更新“WebGrease”

当我构建我的解决方案时，这对我有用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-11-27T12:06:38.280

将 ASP.NET MVC 5 添加到运行 WebForms 的旧 ASP.NET Web 应用程序后，我遇到了同样的问题。我想添加新功能并在 MVC 平台上构建它们，因此让 MVC 和传统 Web 应用程序并行运行非常重要。我在这里写这个答案是因为我在 stackoverflow 和其他地方找到的所有解决方案，包括为您现在正在阅读的主题选择的解决方案，都没有帮助我。也许我的发现会对那里的人有所帮助......

当我将 MVC 5 添加到 Web 应用程序项目中时，它安装了一堆引用，例如 System.Web.Mvc、System.Web.Razor 等。还安装了名为 Microsoft.AspNet.Web.Optimization 的 NuGet 包，它参考了 WebGrease；你和我的参考有问题。

我的 Web 项目中安装的优化 dll 版本是 Microsoft.AspNet.Web.Optimization 1.1.3，这是目前的最新版本。WebGrease 版本 1.5.2 随附。

有趣的是我在_Layout.cs中执行@Styles.Render("~/Content/css")语句时得到的错误信息，指的是WebGrease 1.5.1版本。我不知道它从哪里得到 1.5.1 版本，因为 1.5.2 安装在我的 Web 项目中。我尝试卸载 WebGrease 并重新安装，尝试将 WebGrease 升级到最新版本（1.6.5135）。我确定这些 dll 都没有安装在 GAC 中（它们没有安装）。我删除了“C:\Windows\Microsoft.NET\Framework\v4.0.30319\Temporary ASP.NET Files\”中的所有临时文件，但都无济于事。

当我运行我的 Web 应用程序时，我使用名为 Fuslogvw.exe 的程序来记录所有绑定信息，希望我能找到一个合乎逻辑的原因，说明为什么我的应用程序在运行时坚持尝试加载旧的、不存在的 WebGrease 版本我的应用程序。有趣的是，日志的输出显示了应用程序在做什么，但遗憾的是没有告诉我原因。日志告诉我，尽管我安装了 Microsoft.AspNet.Web.Optimization 1.1.3 版和 WebGrease 1.5.2 版，但它尝试加载 Microsoft.AspNet.Web.Optimization 1.1.0.0 版，它也带有旧版本WebGrease 的。为什么这样做？我不知道，因为我以前从未在我的 PC 上的任何项目中添加过优化。

我的解决方案是同时删除 Microsoft.AspNet.Web.Optimization 和 WebGrease（按此顺序），然​​后在包管理器控制台中运行以下命令来安装 Microsoft.AspNet.Web.Optimization 1.1.0 版：

```
Install-Package Microsoft.AspNet.Web.Optimization -Version 1.1.0 
```

这导致安装了 WebGrease 1.3.0 版，在加载使用 _Layout.cshtml 页面的 MVC razor 视图时不会导致任何问题。

对于那些感兴趣的人：下面您可以看到 Fuslogvw.exe 生成的日志的输出，其中清楚地指出它试图加载不存在的 1.1.0 版本的优化：

```
*** Assembly Binder Log Entry  (26.11.2018 @ 13:19:59) ***

The operation failed.
Bind result: hr = 0x80131040\. No description available.

Assembly manager loaded from:  C:\Windows\Microsoft.NET\Framework64\v4.0.30319\clr.dll
Running under executable  c:\windows\system32\inetsrv\w3wp.exe
--- A detailed error log follows. 

=== Pre-bind state information ===
LOG: DisplayName = WebGrease, Version=1.5.1.25624, Culture=neutral, PublicKeyToken=31bf3856ad364e35
 (Fully-specified)
LOG: Appbase = file:///C:/Projects/MyProject/Web/
LOG: Initial PrivatePath = C:\Projects\MyProject\Web\bin
LOG: Dynamic Base = C:\Windows\Microsoft.NET\Framework64\v4.0.30319\Temporary ASP.NET Files\myproject\1db399c5
LOG: Cache Base = C:\Windows\Microsoft.NET\Framework64\v4.0.30319\Temporary ASP.NET Files\myproject\1db399c5
LOG: AppName = 3f7f1cb1
Calling assembly : System.Web.Optimization, Version=1.1.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35.
===
LOG: This bind starts in default load context.
LOG: Using application configuration file: C:\Projects\MyProject\Web\web.config
LOG: Using host configuration file: C:\Windows\Microsoft.NET\Framework64\v4.0.30319\aspnet.config
LOG: Using machine configuration file from C:\Windows\Microsoft.NET\Framework64\v4.0.30319\config\machine.config.
LOG: Post-policy reference: WebGrease, Version=1.5.1.25624, Culture=neutral, PublicKeyToken=31bf3856ad364e35
LOG: GAC Lookup was unsuccessful.
LOG: Attempting download of new URL file:///C:/Windows/Microsoft.NET/Framework64/v4.0.30319/Temporary ASP.NET Files/ipmvcang/1db399c5/3f7f1cb1/WebGrease.DLL.
LOG: Attempting download of new URL file:///C:/Windows/Microsoft.NET/Framework64/v4.0.30319/Temporary ASP.NET Files/ipmvcang/1db399c5/3f7f1cb1/WebGrease/WebGrease.DLL.
LOG: Attempting download of new URL file:///C:/Projects/MyProject/Web/bin/WebGrease.DLL.
LOG: Assembly download was successful. Attempting setup of file: C:\Projcets\MyProject\Web\bin\WebGrease.dll
LOG: Entering download cache setup phase.
LOG: Assembly Name is: WebGrease, Version=1.6.5135.21930, Culture=neutral, PublicKeyToken=31bf3856ad364e35
WRN: Comparing the assembly name resulted in the mismatch: Minor Version
ERR: The assembly reference did not match the assembly definition found.
ERR: Setup failed with hr = 0x80131040.
ERR: Failed to complete setup of assembly (hr = 0x80131040). Probing terminated. 
```

# java - 如何查看 Ant 在 Java 任务中使用的完整命令？

> ID：14057439
> 
> 赞同：16
> 
> 时间：2012-12-27T15:56:29.270
> 
> 标签：java, ant, command-line

我在 <java> 任务没有按照我期望的方式执行时遇到了一些问题，我想查看 ant 在命令行上调用的命令的实际文本，所以我可以检查它是否符合我的期望。有没有办法做到这一点？

向谷歌寻求如何做到这一点非常令人沮丧，因为我得到的只是关于如何设置在 ant 中传递的命令行参数的大量信息。我已经在这样做了，但是想知道在我开始深入研究其他可能的问题之前，我所期望的正在执行什么。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-12-27T16:00:20.837

```
$ ant -verbose -debug ... 
```

应该显示使用的命令（以及更多）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-27T16:00:28.217

您可以使用以下命令在调试模式下运行 ant： ant -d 它应该转储您在此上下文中需要的所有信息。

# lua - Corona：尝试连接全局“sceneName”

> ID：14057440
> 
> 赞同：8
> 
> 时间：2012-12-27T15:56:39.533
> 
> 标签：lua, storyboard, coronasdk, scene

我有这个代码：

```
local storyboard = require "storyboard"

local options =
{
    effect = "slideLeft",
    time = 800
}

storyboard.gotoScene( "scene1", options ) 
```

在同一目录中，我有一个名为“scene1.lua”的文件，但控制台报告此错误：

```
attempt to concatenate global 'sceneName' (a nil value) in function 'gotoScene' 
```

任何想法，因为发生这种情况？谢谢

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-12-28T07:57:12.760

我找到了解决方案：

在scene1.lua中必须有以下方法和事件监听器：

```
local storyboard = require( "storyboard" )
local scene = storyboard.newScene()

function scene:createScene( event )

end

function scene:enterScene( event )

end

function scene:exitScene( event )

end

function scene:destroyScene( event )

end

scene:addEventListener( "createScene", scene )
scene:addEventListener( "enterScene", scene )
scene:addEventListener( "exitScene", scene )
scene:addEventListener( "destroyScene", scene )

return scene 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-06-09T06:35:48.793

你只是失踪了

```
return scene 
```

在你的 scene1.lua 文件中。场景功能都是可选的。

# linux - Ghostscript（PDF到JPG转换）只设置高度

> ID：14057443
> 
> 赞同：1
> 
> 时间：2012-12-27T15:56:43.730
> 
> 标签：linux, pdf, ghostscript

我今天尝试使用 ghostscript 将 pdf 转换为 jpg。我想要结果为 500 像素高度的 jpg 图像。所以宽度取决于原始 pdf 页面的宽度。我从终端调用脚本：

```
gs -dNOPAUSE -dBATCH -sDEVICE=jpeg -dDEVICEHEIGHT=500 -dTextAlphaBits=4 -dGraphicsAlphaBits=4 -sOutputFile=/home/user/output/%d.jpg /home/user/input.pdf -c quit 
```

但是，我得到高度为 842 像素的 jpg 图像。输入pdf页面大小：6.73×9.49英寸

如何仅设置图像的高度？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T08:40:22.727

PDF 解释器将根据 PDF 的内容调用页面大小。除非您设置 -dFIXEDMEDIA，否则它将覆盖（大部分）您在命令行上设置的任何内容。您可能还想查看 PDFFitPage 选项。见 /gs/doc/use.html

# codeigniter - 我应该如何显示特定数据而不是数据库中的所有数据？

> ID：14057446
> 
> 赞同：1
> 
> 时间：2012-12-27T15:56:55.040
> 
> 标签：codeigniter

我遇到了一个基本问题，我想显示特定的“帐户”而不是数据库中的所有帐户数据。

就像**[这里](http://ellislab.com/?ACT=33&fid=49&aid=16429_9B4SZ7MK8EhZwpGybleE&board_id=1)**的图片一样，如果用户的帐户是*“chiquitta”*

当用户需要编辑她的帐户设置时

它应该只显示她的帐户信息，而不是数据库中的所有帐户信息。

我试图解决这个问题，但它仍然显示所有帐户〜我错过了什么吗？

[我的控制器]

```
function index($id = false)
 {
  $data['page_title'] = lang('admins');
  $data['admins']  = $this->auth->get_admin_specific($id);
  $this->load->view($this->config->item('admin_folder').'/admins', $data);
 } 
```

[我的模特]

```
function get_admin_specific($id)
 {
  $this->CI->db->select('*');

  if ($id)
  {
  $this->CI->db->where('id', $id);
  }

  $result = $this->CI->db->get('admin');
  $result = $result->result();

  return $result;
 } 
```

[我的观点]

```
<?php foreach ($admins as $admin):?>
<?php echo $admin->account; ?>
<?php endforeach; ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T17:01:32.717

嗨，“它应该只显示她的帐户信息，而不是数据库中的所有帐户信息。”是什么意思？一些领域？

好吧，如果你想从单个用户那里获取数据，你可以这样做

```
function get_id($where){
    $this->db->where($where);
    return $this->db->get($this->_table)->row();
} 
```

为 $where 设置您的自定义数组，以便它搜索具有您正在查找的 id 的唯一行。然后在你的控制器中：

```
$data['result'] = $this->your_model->get_id(array('id'=>$id));
$this->load->view('youview', $data); 
```

然后，您可以通过以下方式访问视图中的数据：

```
$result->field_name; 
```

# javascript - 在 windows 域中检查 JS/VB 用户是否已通过身份验证

> ID：14057454
> 
> 赞同：0
> 
> 时间：2012-12-27T15:58:01.380
> 
> 标签：javascript, windows, active-directory, ldap

我正在为一个 Windows 域中的用户开发 Intranet 站点。身份验证与 LDAP/Active Directory 集成。

如果可以在 Windows 中检查用户身份验证状态（已通过身份验证并且是正确的域）以自动登录他？

我希望解决方案仅适用于 IE（某些特定的 JS/VB 对象或其他东西）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T13:35:57.860

您使用 IIS，让服务器请求 Windows 身份验证 (SPNEGO)，然后您就完成了。您不需要执行任何 LDAP 绑定。

# php - 调整drupal节点上的SKU

> ID：14057455
> 
> 赞同：0
> 
> 时间：2012-12-27T15:58:02.660
> 
> 标签：php, drupal, views, ubercart

我正在尝试更改 600 个产品，以便将节点 SKU 设置为节点标题的值。我想使用 VBO 来完成此任务，并带有“执行任意 PHP 脚本”选项。这是我正在使用的代码：

```
$new_node = node_load($object->nid);
$new_node->model = $object->title;
node_save($new_node); 
```

但是，这不起作用。有谁知道我要去哪里错了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T16:42:32.143

为什么不使用令牌设置 sku。

对于您使用的 Drupal 商务：http: [//drupal.org/project/commerce_autosku](http://drupal.org/project/commerce_autosku)

对于 ubercart：[http ://drupal.org/project/uc_product_power_tools](http://drupal.org/project/uc_product_power_tools)

设置令牌规则后，您需要做的就是加载并保存所有节点。

不确定您上面的代码在做什么。我会使用开发执行 php 页面并只运行一个一次性脚本。就像是：

```
$sql = 'select nid from {node}'
$results = db_query($sql);
while ($nid = db_result($result)) {
  $node = node_load($nid);
  node_save($node);
} 
```

自从我使用 drupal 6 数据库 api 以来已经有一段时间了，所以我可能搞砸了上面的功能，但它应该给你正确的想法。

# database - 有两个主人的明细表可能吗？

> ID：14057458
> 
> 赞同：0
> 
> 时间：2012-12-27T15:58:12.463
> 
> 标签：database, master-detail

我的客户有一定的要求。我从他那里得到了 2 张桌子，让我们假设**X** & **Y**。这两个表都有 60 个字段。现在每个表都可以分解为主要细节。所以我们有以下情况

*   大师 => 细节
*   X => XD
*   Y => YD

现在 XD = YD，因为它们是相同的。

有什么办法可以让 DD 作为具有两个主控的详细表，以便 DD 中的某些记录有主控 X，其他记录有主控 Y？DD 中的任何记录都不能同时具有两个主控。

有没有可能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-31T05:38:45.900

我不确定您使用的是什么数据库，或者我是否正确理解了您的要求，但是，假设我这样做了，我会建议如下表格：

```
Master(MasterID (Primary Key), {Common fields})
X({X specific fields}, MasterID (Foreign Key))
Y({Y specific fields}, MasterID (Foreign Key)) 
```

# json - 数据表：未捕获的类型错误：无法读取未定义的属性“长度”

> ID：14057459
> 
> 赞同：4
> 
> 时间：2012-12-27T15:58:17.283
> 
> 标签：json, datatables

我正在尝试将 ajax 源与 Datatables 一起使用，但在执行过程中遇到了一些错误。以前 Ajax 没有与 Datatables 一起使用，它们工作正常，但是在尝试使用 Ajax 和 JSON 时出现了一些错误。

我收到的错误如下：

> 未捕获的类型错误：无法读取未定义的属性“长度”

**编辑：直接在此文本下方使用修改后的代码后，此错误不再存在，但 DataTables 仍然损坏（没有搜索、分页、排序等......）。有一个活生生的例子可能会有所帮助，所以试试这个网站：[fogest.com/test](http://fogest.com/test/index.php)**

在此处加载页面时创建表是代码：

```
$(document).ready(function() {
    $('#trades').dataTable( {
        "sDom": "<'row'<'span6'l><'span6'f>r>t<'row'<'span6'i><'span6'p>>",
        "sPaginationType": "bootstrap",
        "bProcessing": true,
        "bServerSide": true,
        "aoColumns": [
            { "mData": "id" },
            { "mData": "Minecraft_Username" },
            { "mData": "Block_Name" },
            { "mData": "Quantity" },
            { "mData": "Cost" },
            { "mData": "Trade_Status" },
          ],
        "sAjaxSource": "test.php"
    } );
} ); 
```

sAjaxSource test.php 包含以下内容：

```
<?php 
$tableName = "mctrade_trades";
$result = mysql_query("SELECT `id`, `Minecraft_Username`, `Block_Name`, `Quantity`, `Cost`, `Trade_Status` FROM $tableName");

$data = array();
while ( $row = mysql_fetch_assoc($result) )
{
    $data[] = $row;
}
header("Content-type: application/json");
echo json_encode( $data );    

?> 
```

test.php 的输出：

```
[{"id":"1","Minecraft_Username":"fog","Block_Name":"DIAMOND_PICKAXE","Quantity":"1","Cost":"100","Trade_Status":"1"},{"id":"2","Minecraft_Username":"fog","Block_Name":"DIAMOND_PICKAXE","Quantity":"1","Cost":"1002","Trade_Status":"1"},{"id":"3","Minecraft_Username":"fog","Block_Name":"DIAMOND_PICKAXE","Quantity":"1","Cost":"1035","Trade_Status":"1"},{"id":"4","Minecraft_Username":"fog","Block_Name":"DIAMOND_PICKAXE","Quantity":"1","Cost":"1035","Trade_Status":"1"},{"id":"5","Minecraft_Username":"fog","Block_Name":"DIAMOND_PICKAXE","Quantity":"1","Cost":"100","Trade_Status":"2"},{"id":"6","Minecraft_Username":"fog","Block_Name":"DIAMOND_PICKAXE","Quantity":"1","Cost":"100","Trade_Status":"2"},{"id":"7","Minecraft_Username":"fog","Block_Name":"DIAMOND_PICKAXE","Quantity":"1","Cost":"10000","Trade_Status":"2"}] 
```

表格已正确生成，但由于此错误，在表格上方显示“正在处理，您无法使用数据表的任何功能，例如搜索。

这是使用上述 JSON 的表格的图像： ![示例表输出](../Images/d1a9164d26afc2b64f41d3543501d537.png)

我假设错误在我的 JSON 输出中，但我不完全知道它有什么问题，也不知道我应该做什么来修复它。我是 Web 开发的新手，实现 Datatables 的学习曲线相当不错！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-03T21:23:54.237

您的 JSON 输出错误，原因如下：

1.  和`iTotalRecords`字段`iTotalDisplayRecords`丢失。这就是分页（和所有其他功能）被破坏的原因（请注意页脚部分中的消息“显示 1 到**NaN**的**NaN条目（从****NaN**总条目中过滤）”）。有关服务器端处理的更多详细信息，请参阅[此页面。](http://www.datatables.net/usage/server-side)
2.  JSON 响应后有一些 HTML 代码。

这是额外的 HTML 代码（取自[test.php](http://fogest.com/test/test.php)）：

```
<!-- Hosting24 Analytics Code -->
<script src="http://stats.hosting24.com/count.php"></script>
<!-- End Of Analytics Code --> 
```

在我看来，`test.php`脚本应该如下所示：

```
<?php 

$link = mysqli_init();

// Adjust hostname, username, password and database name before use!
$db = mysqli_real_connect($link, "hostname", "username", "password", "database") or die(mysqli_connect_error());

$SQL = 'SELECT `id`,`Minecraft_Username`,`Block_Name`,`Quantity`,`Cost`,`Trade_Status` FROM mctrade_trades';
$result = mysqli_query($link, $SQL) or die(mysqli_error($link));

$aaData = array();
while ($row = mysqli_fetch_assoc($result)) {
    $aaData[] = $row;
}

$response = array(
  'aaData' => $aaData,
  'iTotalRecords' => count($aaData),
  'iTotalDisplayRecords' => count($aaData)
);
if (isset($_REQUEST['sEcho'])) {
  $response['sEcho'] = $_REQUEST['sEcho'];
}

header('Content-type: application/json'); 
echo json_encode($response);

?> 
```

另请注意，这些`mysql_*`函数已被弃用，因此您应该改用[PDO](http://php.net/pdo)或[MySQLi](http://php.net/mysqli)；请查看[此答案](https://stackoverflow.com/questions/12859942/why-shouldnt-i-use-mysql-functions-in-php)以获取更多详细信息。

# python - 从父文件夹子文件夹相对导入模块

> ID：14057464
> 
> 赞同：41
> 
> 时间：2012-12-27T15:58:32.300
> 
> 标签：python, import, module, python-2.7

给定这样的目录结构

```
main/
    common/
        foo.py
    A/
        src/
            bar.py 
```

如何使用 Python 的*相对导入*来导入`foo`from `bar`？通过将其添加到路径中，我得到了一个可行的解决方案，但这很难看。有没有办法简单地使用`import`Python 2.7 中的一个？

这是这个问题的一个更复杂的版本：

[从父文件夹导入模块](https://stackoverflow.com/questions/714063/python-importing-modules-from-parent-folder)

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2012-12-27T16:06:31.847

正确的相对导入是这样的：

```
from ...common import foo 
```

但是，相对导入仅适用于一个包中。如果`main`是一个包，那么你可以在这里使用相对导入。如果`main`不是包，则不能。

因此，如果您在其中运行脚本`/main/`并执行类似的操作`import A.src.bar`，则相对导入将失败，并显示“尝试相对导入超出顶级包”。这是因为相对导入试图导入顶层包之外的东西`A`。

但是，如果您在其中运行脚本`/`并执行类似的操作`import main.A.src.bar`，那么该相对导入将成功，因为`main`现在是一个包。在这种情况下，以下两个将是等效的：

```
from ...common import foo
from main.common import foo 
```

回答您的评论： 的含义`.`不会根据脚本的运行位置而改变，它会根据包结构的不同而改变。

# excel - 如何设置类级别变量

> ID：14057466
> 
> 赞同：0
> 
> 时间：2012-12-27T15:58:35.430
> 
> 标签：excel, vba

我正在尝试在 VBA 类模块中设置一个变量，每次初始化该类的实例时该变量都会递增。

例如，该类的第一个实例将有一个数字“1”，下一个将是“2”，等等。

如果我的术语不正确，我深表歉意。

```
Private Sub Class_Initialize()
     Number=Number+1<-- This variable would increment every time there is a new instance
End Sub 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-29T00:09:03.310

在模块中声明一个全局或公共变量 `Public NumberOfInstances as Long`。

然后在类中使用此代码：

```
私有子类_Initialize()
    NumberOfInstances = NumberOfInstances + 1
结束子

```

如果你想知道每个实例的编号，你需要在类中添加一个成员变量并初始化它，例如：

```
私有 mInstanceCount 为 Long

公共属性 Get InstanceCount() as Long: InstanceCount = mInstanceCount: End Property

私有子类_Initialize()
    NumberOfInstances = NumberOfInstances + 1
    mInstanceCount = NumberOfInstances
结束子

```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T16:03:46.497

在类的顶部声明你的变量 - 静态数字

您不能在 VBA 中声明静态类变量！使用真正的面向对象语言（例如 Java）将是可能的。

# html - 获取 xpath 跟随兄弟以使用具有其值的模板

> ID：14057476
> 
> 赞同：1
> 
> 时间：2012-12-27T15:59:13.190
> 
> 标签：html, css, xml, xslt, xpath

我有以下 XSLT ：

```
 <xsl:if test="$CurPos mod 2 =1">
         <li style="width:604px;"> 
           <div class="content-left" style="width:300px; height:290px;float:left;">
                <xsl:if test="string-length($SafeImageUrl) != 0">
                  <div class="images-area-left">
                    <a href="{$SafeLinkUrl}" target="{$LinkTarget}">
                      <img class="image" src="{$SafeImageUrl}" alt="{@ImageUrlAltText}" />
                    </a>
                    <div class="Heading-desc">
                        <span class="NewsHeading"><h4><xsl:value-of select="@Title"/></h4></span>
                        <span class="Desc">
                            <xsl:value-of select="substring(@Comments,0,200)"/>
                            <xsl:if test="string-length(@Comments) &gt; 200">…&lt;/xsl:if>
<a href="{$SafeLinkUrl}" class="ReadMore"> Read More</a>    
                        </span>
                    </div>
                </div>
               </xsl:if>            
            </div>

            <div class="content-right" style="float:right; width:300px; height:290px;"> 
                <xsl:value-of select="following-sibling::*[1]/@PublishingRollupImage" disable-output-escaping="yes" />
                <span class="NewsHeading"><h4><xsl:value-of select="following-sibling::*[1]/@Title"/></h4></span>
                <span class="Desc" style="display:block; width:280px;"><xsl:value-of select="substring(following-sibling::*[1]/@Comments,0,200)"/>
                 <xsl:if test="string-length(following-sibling::*[1]/@Comments) &gt; 200">…&lt;/xsl:if><a href="{$SafeLinkUrl}" class="ReadMore"> Read More</a>    
                </span>
            </div>
         </li>
     </xsl:if> 
```

有一个变量 $SafeLinkUrl 来自另一个模板，用于获取当前行的页面 URL。由于我仍在当前节点上时正在关注兄弟姐妹，因此我无法获取以下兄弟姐妹的 URL。

```
 <xsl:variable name="SafeLinkUrl">
    <xsl:call-template name="OuterTemplate.GetSafeLink">
      <xsl:with-param name="UrlColumnName" select="'LinkUrl'"/>
    </xsl:call-template>
  </xsl:variable> 
```

============> 指向这个模板

```
<xsl:template name="OuterTemplate.GetSafeLink">
    <xsl:param name="UrlColumnName"/>
    <xsl:if test="$UseCopyUtil = 'True'">
        <xsl:value-of select="concat($RootSiteRef,'/_layouts/CopyUtil.aspx?Use=id&amp;Action=dispform&amp;ItemId=',@ID,'&amp;ListId=',@ListId,'&amp;WebId=',@WebId,'&amp;SiteId=',$SiteId,'&amp;Source=',$Source)"/>
    </xsl:if>
    <xsl:if test="$UseCopyUtil != 'True'">
        <xsl:call-template name="OuterTemplate.GetSafeStaticUrl">
            <xsl:with-param name="UrlColumnName" select="$UrlColumnName"/>
        </xsl:call-template>
    </xsl:if>
</xsl:template> 
```

这有一个调用 ====>

```
<xsl:template name="OuterTemplate.GetSafeStaticUrl">
    <xsl:param name="UrlColumnName"/>
    <xsl:variable name="Url">
        <xsl:call-template name="OuterTemplate.FormatColumnIntoUrl">
            <xsl:with-param name="UrlColumnName" select="$UrlColumnName"/>
        </xsl:call-template>
    </xsl:variable>
    <xsl:value-of select="cmswrt:EnsureIsAllowedProtocol($Url)"/>
</xsl:template> 
```

它再次调用另一个模板，不断=====>

```
<xsl:template name="OuterTemplate.FormatColumnIntoUrl">
    <xsl:param name="UrlColumnName"/>
    <xsl:variable name="Value" select="@*[name()=$UrlColumnName]"/>
    <xsl:if test="contains($DataColumnTypes,concat(';',$UrlColumnName,',URL;'))">
        <xsl:call-template name="OuterTemplate.FormatValueIntoUrl">
            <xsl:with-param name="Value" select="$Value"/>
        </xsl:call-template>
    </xsl:if>
    <xsl:if test="not(contains($DataColumnTypes,concat(';',$UrlColumnName,',URL;')))">
        <xsl:value-of select="$Value"/>
    </xsl:if>
</xsl:template> 
```

这是实际的 XML：[https ://gist.github.com/4380967](https://gist.github.com/4380967)

容器的 XSL：[https ://gist.github.com/4389989](https://gist.github.com/4389989)

单个行的 XSL：[https ://gist.github.com/4389997](https://gist.github.com/4389997)

我无法将 $SafeLinkUrl 用于以下兄弟：：* [1]，因为它适用于当前项目而不是直接兄弟。如何使变量也适用于兄弟姐妹？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T17:57:02.120

**使用**：

```
 <xsl:variable name="SafeLinkUrl">
   <xsl:for-each select="following-sibling::*[1]">
    <xsl:call-template name="OuterTemplate.GetSafeLink">
      <xsl:with-param name="UrlColumnName" select="'LinkUrl'"/>
    </xsl:call-template>
   </xsl:for-each>
  </xsl:variable> 
```

**或者更好的是，在模板中添加第二个参数：**

```
<xsl:template name="OuterTemplate.GetSafeLink">
    <xsl:param name="UrlColumnName"/>
    <xsl:param name="pContext" select="."/>

    <xsl:if test="$UseCopyUtil = 'True'">
        <xsl:value-of select="concat($RootSiteRef,'/_layouts/CopyUtil.aspx?Use=id&amp;Action=dispform&amp;ItemId=', $pContext/@ID,'&amp;ListId=',$pContext/@ListId,'&amp;WebId=',$pContext/@WebId,'&amp;SiteId=',$pContext/$SiteId,'&amp;Source=',$Source)"/>
    </xsl:if>
    <xsl:if test="$UseCopyUtil != 'True'">
        <xsl:call-template name="OuterTemplate.GetSafeStaticUrl">
            <xsl:with-param name="UrlColumnName" select="$UrlColumnName"/>
        </xsl:call-template>
    </xsl:if>
</xsl:template> 
```

对其他两个模板执行此操作。`$pContext`在调用两个内部模板中的任何一个时指定参数。

然后调用最外层的模板，将`$pContext`参数指定为`following-sibling::*[1]`.

# json - GitHub API 问题 - 列出已加星标的存储库

> ID：14057478
> 
> 赞同：10
> 
> 时间：2012-12-27T15:59:24.620
> 
> 标签：json, api, curl, github, repository

我正在尝试列出我目前主演的所有回购，我这样做：

```
curl -u 'user' https://api.github.com/user/starred 
```

它只给了我正在主演的回购的一个子集，而不是全部。我不知道这是 API 问题还是 repo 问题，但我似乎无法确定 GitHub 仅返回我已加星标的 repos 的一部分的标准是什么。

帮助！

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-12-27T20:24:43.027

GitHub 在他们的 API 结果上使用分页。`Link`请参阅API 文档中描述的响应标头：http: [//developer.github.com/v3/#pagination](http://developer.github.com/v3/#pagination)和[http://developer.github.com/v3/activity/starring/#list-repositories-being-starred](http://developer.github.com/v3/activity/starring/#list-repositories-being-starred)

无论如何，要获得其余结果，请使用`https://api.github.com/users/:user/starred?page=X&per_page=Y`，其中 X 是页码，Y 是页面大小（最大 100）。

# javascript - 如何为所有 jQuery 选择器插入前缀？

> ID：14057483
> 
> 赞同：0
> 
> 时间：2012-12-27T15:59:43.990
> 
> 标签：javascript, jquery

我需要扩展的主 jQuery 函数在传递给它的任何选择器之前插入一个前缀。

例如

```
jQuery.prefix = '#newBody ';
jQuery('.content') 
```

将与

```
jQuery('#newBody .content') 
```

我尝试运行此代码

```
window.oldJquery = jQuery;
window.jQuery = window.$ = function( selector, context) {
    console.log('+',selector);
    return oldJquery(selector, context );
} 
```

但我最后一个 jQuery 对象。

**

## 无需更改当前代码

**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-27T16:03:32.237

我不知道 jQuery 中有这样的功能，但你可以使用`find`

```
jQuery('#newBody').find('.content') 
```

您可以将它包装在一个函数中并调用该函数：

```
function my$(selector) {
  return jQuery('#newBody').find(selector);
} 
```

用法：

```
my$('.content'); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-27T16:04:09.617

我建议创建一个包装方法。只需创建一个接受选择器的小方法，并将前缀和选择器传递给 jQuery 并返回结果。

例子：

```
var prefix = '#newBody';

function jqPrefix(selector)
{
  return jQuery(prefix + ' ' + selector);
} 
```

然后你会打电话`jqPrefix('.content')`而不是`jQuery('.content')`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-27T16:05:47.257

有几种方法可以做到这一点而不会造成破坏（就像你现在一样）。一种方法如下：

```
var $prefix = jQuery('#newBody');
$prefix.find('.content'); 
```

另一种方式，可能会消耗更多资源，但仍然是非破坏性的，如下所示。

```
var $Prefix = function(selectors) {
    return jQuery("#newBody " + selectors);
};

$Prefix(".content"); //jQuery("#newBody .content"); 
```

**编辑：**如果您想替换 all`jQuery`以使它们成为特定元素的唯一子级，您可以尝试以下操作。本质上，我们正在做的是创建一个新范围并将`jQuery`变量重新定义为`$Prefix`（来自之前的代码片段），这样您就不需要重写所有内容。

```
var $Prefix = function(selectors) {
    return jQuery("#newBody " + selectors);
};

(function(jQuery){

}($Prefix)); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-27T16:13:53.673

你*应该*做的是更新你的代码。您可以使用正则表达式进行查找/替换，如下所示：

```
find: /\$\('(.*?)'\)/ig
replace: $('#newSelector \1') OR $('\1', '#newSelector') 
```

其中任何一个都将为您的搜索提供正确的上下文。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-27T17:16:30.600

一两个星期前我遇到了同样的问题。我所做的结果很乏味，但工作得很好。很容易验证它是否正确完成。

会有如下代码：

```
$(something)... 
```

你可能使用了 jQuery 而不是 $. 无论哪种方式，您都必须搜索它。没有办法解决它。如果你修改 jQuery 本身，你可以让它工作。JavascriptMVC 在他们的控制器中做到了。我怀疑他们花了很长时间来调试并验证它是否有效并且没有破坏任何东西。

在开头的某个地方放一些这样的代码：

```
var $prefix = $('#newBody '); 
```

在您找到它的每个地方，将其替换为以下代码：

```
$(something, $prefix)... 
```

请注意，您所做的只是在编辑器中插入或粘贴文本，这非常快，特别是如果您的编辑器能够搜索结束括号并将光标留在它之前。在 Eclipse 中，您可以使用带有正则表达式的搜索和替换字符串。它们将是这些（替换字符串中的逗号后有一个空格）。

```
(\$\([^\)]+)\)
\1, \$prefix\) 
```

请注意，在内部（在最近的 jQuery 版本中）这完全像：

```
$prefix.find(something)... 
```

它对我有用，我再说一遍，调试起来并不难。另外，它没有搞砸任何其他 jQuery 调用。

[在这个 StackOverflow 问题](https://stackoverflow.com/questions/5184535/context-vs-selector-specificy-in-jquery)中有一些关于这种形式的 jQuery 选择器的评论

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-27T16:05:16.950

你可以使用[$.extend](http://api.jquery.com/jQuery.extend/)。

```
$.extend($.expr['#'],{
    newBody: function(a) {
        return true;
    }
}); 
```

请参阅[示例](http://james.padolsey.com/javascript/extending-jquerys-selector-capabilities/)。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-12-27T16:17:27.347

最简单、最安全和......好吧，聪明的方法是使用包装器来实现所需的功能，而不是覆盖 jQuery。
如其他答案中所述，您可以制作一个将前缀添加到当前选择器（例如`jqPrefix`）的包装器，或者您可以为选择器本身制作一个包装器：

```
var $$ = getSelector = function(){
    return '#id ' + s;
}; 
```

而不是将选择器作为简单字符串传递给 jQuery，您可以将`getSelector`选择器作为第一个参数传递一个函数调用：

```
$($$('.some-class')) 
```

这转化为

```
$('#id .some-class') 
```

# iphone - 如何将位置的坐标与用户的当前坐标进行比较

> ID：14057485
> 
> 赞同：-1
> 
> 时间：2012-12-27T16:00:01.173
> 
> 标签：iphone, objective-c, ios, cllocationmanager, cllocationdistance

我正在将某个位置的坐标与用户的当前坐标进行比较。距离输出如下：6056609.511004132946254686

我不确定这是什么测量值。我希望最终测量的距离以公里为单位。

```
 // location of deal
CLLocation *locA = [[CLLocation alloc] initWithLatitude:latNum longitude:lngNum];

// user's current location
CLLocation *locB = [[CLLocation alloc] initWithLatitude:currentLatitude longitude:currentLongitude];

CLLocationDistance distanceToDeal = [locA distanceFromLocation:locB]; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-27T16:20:56.210

最粗略的阅读文档就会清楚地说明这一点。如果您打开快速帮助检查器（在 Xcode 4.5 中，按`command`++或从“查看”菜单的“实用程序”部分中选择“显示快速帮助检查器” `option`）`2`，然后`distanceFromLocation`在您的代码中单击，它会为您提供该方法的文档就在那里，清楚地表明它以米为单位。或者，在`option`将鼠标移到`distanceFromLocation`代码中的方法上时按住键，然后单击（同时按住`option`键），您将看到一个在线帮助弹出框。

在您在这里发布问题之前，您确实应该查看 Apple 文档。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-27T16:02:31.163

以米为单位，来自 Apple 文档：

`CLLocationDistance`

> 距现有位置的距离测量（以米为单位）。

`typedef double CLLocationDistance`

> 可用性 适用于 iOS 2.0 及更高版本。在 CLLocation.h 中声明

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-27T16:06:06.853

如[Apple 文档](https://developer.apple.com/library/mac/#documentation/CoreLocation/Reference/CLLocation_Class/CLLocation/CLLocation.html)中所述，distanceFromLocation 函数以米为单位返回值。因此，您要做的就是将米转换为公里；）

```
CLLocation *locA = [[CLLocation alloc] initWithLatitude:latNum longitude:lngNum];
CLLocation *locB = [[CLLocation alloc] initWithLatitude:currentLatitude longitude:currentLongitude];

//Compute distance in meters
CLLocationDistance distanceToDeal = [locA distanceFromLocation:locB];

//Convert meters to km
double km = distanceToDeal/1000; 
```

# javascript - Moment.js - 我如何获得自日期以来的年数，而不是四舍五入？

> ID：14057497
> 
> 赞同：163
> 
> 时间：2012-12-27T16:00:47.830
> 
> 标签：javascript, date, momentjs

我正在尝试使用[Moment.js](http://momentjs.com/)计算一个人的年龄，但我发现其他有用的[fromNow](http://momentjs.com/docs/#/displaying/fromnow/)方法会将年份四舍五入。例如，如果今天是 12/27/2012 并且此人的出生日期是 02/26/1978，则`moment("02/26/1978", "MM/DD/YYYY").fromNow()`返回“35 年前”。如何让 Moment.js 忽略月数，并简单地返回自日期以来的年数（即 34 年）？

* * *

## 回答 #1

> 赞同：279
> 
> 时间：2014-02-24T22:04:01.083

使用 moment.js 很简单：

```
var years = moment().diff('1981-01-01', 'years');
var days = moment().diff('1981-01-01', 'days'); 
```

如需更多参考，您可以阅读 moment.js[官方文档](https://momentjs.com/docs/#/displaying/difference/)。

* * *

## 回答 #2

> 赞同：41
> 
> 时间：2016-06-24T00:16:03.797

[http://jsfiddle.net/xR8t5/27/](http://jsfiddle.net/xR8t5/27/)

如果您不想要小数值：

```
var years = moment().diff('1981-01-01', 'years',false);
alert( years); 
```

如果你想要分数值：

```
var years = moment().diff('1981-01-01', 'years',true);
alert( years); 
```

单位可以是[秒、分钟、小时、天、周、月、年]

* * *

## 回答 #3

> 赞同：23
> 
> 时间：2012-12-27T18:01:34.687

似乎有一个[差异函数](http://momentjs.com/docs/#/displaying/difference/)可以接受要使用的时间间隔以及不舍入结果的*选项*。所以，像

```
Math.floor(moment(new Date()).diff(moment("02/26/1978","MM/DD/YYYY"),'years',true))) 
```

我没有尝试过，而且我对时刻并不完全熟悉，但似乎这应该得到你想要的（无需重置月份）。

* * *

## 回答 #4

> 赞同：13
> 
> 时间：2012-12-27T16:14:30.943

我发现将两个日期（提供的日期和现在）的月份重置为一月是可行的：

```
> moment("02/26/1978", "MM/DD/YYYY").month(0).from(moment().month(0))
"34 years ago" 
```

* * *

## 回答 #5

> 赞同：11
> 
> 时间：2016-12-23T21:46:53.817

这种方法简单而强大。

值是日期，“DD-MM-YYYY”是日期的掩码。

```
moment().diff(moment(value, "DD-MM-YYYY"), 'years'); 
```

* * *

## 回答 #6

> 赞同：8
> 
> 时间：2014-06-12T16:11:11.077

试试这个：

```
 moment("02/26/1978", "MM/DD/YYYY").fromNow().split(" ")[0]; 
```

解释：

我们收到类似这样的字符串：'23 days ago'。将其拆分为数组：['23', 'days', 'ago'] 然后取第一项'23'。

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2013-04-12T12:59:22.453

这种方法对我有用。它检查这个人今年是否过生日，否则减去一年。

```
// date is the moment you're calculating the age of
var now = moment().unix();
var then = date.unix();
var diff = (now - then) / (60 * 60 * 24 * 365);
var years = Math.floor(diff); 
```

编辑：第一个版本并不完美。更新的应该

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2016-06-09T05:04:03.527

如果您不想使用任何模块进行年龄计算

```
var age = Math.floor((new Date() - new Date(date_of_birth)) / 1000 / 60 / 60 / 24 / 365.25) 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2018-02-06T12:54:23.970

当您想显示年份和剩余天数时：

```
var m = moment(d.birthday.date, "DD.MM.YYYY");
var years = moment().diff(m, 'years', false);
var days = moment().diff(m.add(years, 'years'), 'days', false);
alert(years + ' years, ' + days + ' days'); 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2019-01-28T08:00:13.457

我更喜欢这种小方法。

```
function getAgeFromBirthday(birthday) {
    if(birthday){
      var totalMonths = moment().diff(birthday, 'months');
      var years = parseInt(totalMonths / 12);
      var months = totalMonths % 12;
        if(months !== 0){
           return parseFloat(years + '.' + months);
         }
    return years;
      }
    return null;
} 
```

# ruby-on-rails - 用于自定义主题的 Rails 资产管道

> ID：14057501
> 
> 赞同：4
> 
> 时间：2012-12-27T16:01:00.727
> 
> 标签：ruby-on-rails, asset-pipeline

我的 Rails 应用程序有一个自定义主题。该主题由 8 个结构复杂的文件夹（子文件夹、大量文件）组成。其中一个文件夹是 bootstrap，它由 css、js 和 img 子文件夹组成。其他一些文件夹和子文件夹也包含 css、js 和图像。

如何使用资产管道预编译这些文件以及如何从代码中访问它们？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-14T17:19:19.587

我最近购买了一个大型 HTML5 主题并执行了将其放入我的 Rails 项目并使用资产管道的工作。我必须做一些批量查找/替换才能让图像 URL 满意。这是我使用的整体方法：

1.  将所有提供的“图像”文件和目录放在 /vendor/assets/images 下。
2.  将所有提供的样式表放在 /vendor/assets/stylesheets 下
3.  将所有提供的 javascript 放在 /vendor/assets/javascripts 下

使用上述方法，所有相对路径都应按照主题供应商的要求进行维护。例如，我的主题供应商将所有图像都放在一个“img”目录下，所以我只是复制了那个目录，所以它是 /vendor/assets/images/img/...

现在，我们需要获取 application.css 和 application.js 文件以正确提取所需的文件：

1.  在 /app/assets/javascripts/application.js 添加要求行以添加您的主题供应商说您需要的所有 javascript
2.  在 /app/assets/stylesheets/application.css 添加要求行以添加所需的所有样式表

现在棘手的部分取决于您的 javascript 和样式表是否包含其他项目。对于任何这样做的文件，我建议您将它们重命名为 .erb（在文件名中添加 .erb），这样您就可以使用 rails 助手，例如**asset_path**和**image_path**：

```
.i24_arrow-180{ background-image: url(<%= asset_path 'img/icons/packs/fugue/24x24/arrow-180.png' %>); } 
```

或者，在您的 javascript 中：

```
'<%= asset_path('js/mylibs/charts/jquery.flot.orderBars') %>': 
```

一旦您修复了任何图像路径，您应该准备好使用新主题，并且它将与资产管道一起使用！

*警告*：我花了几个小时调试一个带有主题的资产编译问题，结果发现这是因为*其中一张*图片的文件名中有一个括号，而 sass 编译器对此作呕！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-27T16:30:49.730

对于引导程序，我建议使用 rails bootstrap gem。如果您将其余资产放在 app/assets/{javascripts|stylesheets} 目录中，它们将被打包到一个 application.{js|css} 文件中，因为您的清单默认具有 require_tree 指令。

对于图像，只需将它们放在 app/assets/images 中，就可以像在您的公共目录中一样访问它们

# c# - 如何通过 C# 启动/停止/查询 iis 应用程序（不是站点，不是应用程序池）？

> ID：14057506
> 
> 赞同：2
> 
> 时间：2012-12-27T16:01:43.467
> 
> 标签：c#, iis

我`ServerManager`用来远程管理应用程序站点和应用程序池。但是，没有方法可以控制或查询实际应用程序的状态。

![IIS 管理器上下文菜单](../Images/5c7796b367cc15bde89ef52f4f0d1791.png)

我有应用程序池的代码

```
public string StopAppPool(string poolName)
{
        using (var iis = ServerManager.OpenRemote(this._server))
        {
            return iis.ApplicationPools.First(ap => ap.Name == poolName).Stop().ToString();
        }
} 
```

和现场

```
public string StartSite(string site)
{
        using(var iis = ServerManager.OpenRemote(this._server))
        {
            return iis.Sites.First(s => s.Name == site).Start().ToString();
        }
} 
```

但是应用程序级别根本没有这些方法。

```
public string StartApp(string site,string path)
{
        using (var iis = ServerManager.OpenRemote(this._server))
        {
            iis.Sites[0].Applications[0]. // not here =(
        }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T16:33:54.460

您可能想阅读以下内容： [http ://www.iis.net/configreference/system.applicationhost/applicationpools](http://www.iis.net/configreference/system.applicationhost/applicationpools)

由于网络的工作方式，“应用程序”仅在请求处于活动状态时运行。因此，除非有一个长时间运行的线程，否则它只会在当前处理请求时处于活动状态。如果您需要对此进行检查，您可以使用一些 WMI 功能来获取活动请求的数量。然而，仅仅因为一个特定的应用程序当前没有处理请求并不意味着它不能这样做。

本质上，一个请求在 IIS 本身内部进入并开始。IIS 然后查找请求的处理程序并将其传递到正确的站点/应用程序池。根据您使用的是集成模式还是经典模式，存在细微差别，但对于您的问题，这些并不重要。

如果站点已关闭，或者其应用程序池已关闭，则该站点可能处于非活动状态。提供了这种粒度级别，以便您可以在多个站点之间共享应用程序池，并允许某些站点打开而其他站点关闭，或者一次关闭应用程序池中的所有站点。

在给定站点内，应用程序本身始终处于启用状态，前提是该站点已启用，因此无法控制该特定应用程序在整个站点打开或关闭的上下文之外是打开还是关闭。

如果您需要关闭特定的应用程序，那么您应该将它们拆分到不同的站点并在该级别控制它们。

# java - 使用 Apache Commons 配置跟踪更改

> ID：14057507
> 
> 赞同：2
> 
> 时间：2012-12-27T16:01:55.770
> 
> 标签：java, apache, configuration, change-tracking, apache-commons-config

对于即将到来的项目，我计划使用 Apache Commons Configuration。

我想使用该库从/向数据库读取和写入给定应用程序的所有配置。

我们要求跟踪所有配置更改（或配置版本）。此更改跟踪也应存储在数据库中。

配置更改不会经常发生。

我想知道实现此更改跟踪功能的最佳方法是什么？Apache Commons 本身是否有一些支持？是否有另一个适合的框架/库？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T16:19:03.800

不幸的是，我认为 Apache Commons 配置与您对更改跟踪配置数据库的要求之间没有任何重叠。

如果您需要将配置存储在数据库中，我怀疑您需要另一个框架或推出自己的解决方案。关于。数据库，2个想法：

1.  您可以使用有效起始/有效截止日期存储配置。当前配置将是具有空有效日期的配置，并且您将在更新配置时设置有效日期
2.  一些数据库支持版本化数据的概念。例如，Oracle 具有[闪回](http://docs.oracle.com/cd/B28359_01/appdev.111/b28424/adfns_flashback.htm)功能，您只需重新编写数据库实体，Oracle 会*在那时*记录该表的一个版本（具体情况可能要复杂得多）。如果您只是想要配置更改的历史记录用于审计目的，这可能是一个有用的解决方案。

另一种解决方案是使用 SCM 管理您的配置，并将此类配置与版本一起打包/部署。例如，在您的源代码存储库中创建 dev/test/prod 配置并管理那里的更改。将这些配置包装在您的可部署并发布到适当的环境中。您拥有 SCM 的更改跟踪功能，但无法轻松跟踪部署环境中发生的更改。您的变更管理流程可能/可能不允许这样做。

上面的修改版本将允许您在部署的环境中使用您的 SCM 解决方案，例如将配置检出到您的产品环境中。我承认，我没有看到这个使用了很多。这意味着您的开发和生产环境之间的桥梁/依赖关系，这可能是一座太远的桥梁。

# javascript - Jquery滚动动画在chrome上跳跃

> ID：14057509
> 
> 赞同：1
> 
> 时间：2012-12-27T16:02:08.887
> 
> 标签：javascript, jquery, autoscroll

当单击相应的链接时，我在使用 jquery animate() 时自动将页面滚动到所需的 div 时遇到问题。它在 FF 和 Safari 中完美运行，但在 chrome 中，单击时视图会快速跳转到 div 并返回到其原始位置（可能是 100 毫秒），然后根据需要继续滚动到相关 div。当其他浏览器不受影响时，我已经看到了 jquery 的帖子，但不是专门在 chrome 上。

这是JS

```
function initialize_autoscroll(){
  //Auto Scrolling Based on clicked links
  $('#home_button').click(function(){
     $('html, body').animate({scrollTop: 0}, 700);
     });

  $('#features_button').click(function(){
     $('html, body').animate({  scrollTop: $("#features").offset().top -50}, 700);
  });

  $('#examples_button').click(function(){
    $('html, body').animate({   scrollTop: $("#examples").offset().top -50}, 700);
  });

  $('#pricing_button').click(function(){
     $('html, body').animate({  scrollTop: $("#pricing").offset().top -50}, 700);
  });

  }

$(document).ready(function(){
  initialize_autoscroll();
}); 
```

这是一个触发滚动功能的标签示例

```
<a id="features_button" href="#features"><i class="icon-plus"></i> Features</a> 
```

这是它链接到的示例 div：

```
<div id="features" class="container-narrow" style="padding-bottom:50px">
</div 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T16:11:19.750

您需要`#anchors`使用 . 停止所有绑定中的默认操作[`Event.preventDefault()`](http://api.jquery.com/event.preventDefault/)。例如，

```
$('#home_button').click(function(evt){
  evt.preventDefault();
  $('html, body').animate({scrollTop: 0}, 700);
}); 
```

# django - Twitter API - 如何让用户通过 Twitter 登录以将文本提交到数据库

> ID：14057510
> 
> 赞同：0
> 
> 时间：2012-12-27T16:02:11.410
> 
> 标签：django, twitter, sqlite, python-twitter

我正在为新年前夜构建一个简单的网络应用程序。我正在使用 Django 并设置了 SQLite3 数据库。

Web 应用程序背后的想法是，有人使用他们的 Twitter 用户名提交一段文本（在主页上完成一个句子），然后该句子及其关联的@username 打印在主页上，用户也可以在推特上发布它，如果他们希望。

我需要了解如何...

*   让用户通过 Twitter 登录以验证他们的@username（可能使用包装器，例如 python-twitter 或您推荐的包装器）
*   将文本和@username 发布到数据库并与发布的日期/时间一起保存
*   从数据库中获取@username 和文本，并在主页上的帖子提要（Twitter 提要样式）中打印句子和@username（作为作者）

这是全新的领域，我感到压力很大，因为距离新年前夜只有几天了。任何帮助将非常感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T21:00:02.490

1.  要让用户使用 twitter 登录/验证，您需要使用[twitter API](https://dev.twitter.com/)和[Oauth](http://en.wikipedia.org/wiki/OAuth)。如果您正在寻找现成的解决方案，我建议您查看 Raymond Penners 的[django-allauth](https://github.com/pennersr/django-allauth)库，该库开箱即用。您可以使用这个[allauth 教程](http://techstricks.com/django-allauth-tutorial-step-by-step/)来了解设置它的基础知识。

2.  一旦你有 twitter 的工作 allauth 应用程序，你将需要创建一个`model`将保存信息，如消息、发布消息的日期和时间以及该消息的所有者。实现此目的的一个非常简单的模型可能如下所示。

    类消息（模型。模型）：

    ```
    """
    This is the message class that stores all the message
    objects.
    """

    message = models.TextField()
    time_posted = models.DateTimeField(auto_now_add=True)
    owner = models.ForeignKey(User) 
    ```

完成模型后，您将需要一个表单，用户将在其中实际发布消息。该表单可以是一个简单的 ModelForm，如下所示。

```
MessageForm(forms.ModelForm):
    """
    This is the base form for posting a message
    """

    class Meta:
        model = models.Message

        fields = ('message') 
```

现在您需要将表单传递给呈现模板的视图。也许是这样的。在同一视图中，您还可以处理发布消息。

```
def post_message(request):
    form = forms.MessageForm()
    if request.method == 'POST':
        p_form = forms.MessageForm(request.POST)
        if p_form.is_valid():
            data = p_form.save(commit=False)
            data.owner = request.user
            data.save()
            return redirect('/success/')  # Redirect to a success page
        else:
            raise ValidationError('The Form did not validate')
    return render_to_response('post_message.html', {'form' : form}, context_instance=RequestContext(request)) 
```

现在，您需要将一个名为“post_message”的模板写入您的模板`templates`，一旦请求上述视图，该模板就会被调用。一个非常简单的模板将如下所示。

```
{% if form.errors %}
    {{ form.errors %}
{% endif %}

<form action ="" method ="POST">
{% csrf_token %}
{{ form }}
<input type="submit" id="submit" value="Post Message" />
</form> 
```

准备好模板后，您可以在 urls.py 文件中使用一个简单的 url（定义如下）将请求的 url 连接到您的视图。因此，如果您希望在用户请求时调用上述视图`yourapp.com/post/`：

```
url(r'^post/$', 'yourapp.views.post_message', name="post"), 
```

就是这样。我还建议您阅读[Django 的基本投票应用程序教程](https://docs.djangoproject.com/en/1.4/intro/tutorial01/)，以更多地了解 django 实体是如何一起工作的。

希望以上示例对您的项目有所帮助。

# api - Google AdWords API 否定关键字阻止目标关键字

> ID：14057516
> 
> 赞同：0
> 
> 时间：2012-12-27T16:02:33.833
> 
> 标签：api, keyword, blocking, google-ads-api

我想知道是否有用于阻止目标关键字的否定关键字的 API 连接。

基本上，如果您创建一个关键字（例如“免费香蕉”），然后创建一个否定关键字（例如“免费”），则该否定关键字会导致目标关键字被屏蔽。AdWords 将此显示为通知，并建议删除否定关键字。

我想知道是否有人知道这些数据是否具有 API 连接性。

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-28T21:24:37.047

我从 Google AdWords API 团队成员那里得知，该数据当前未在 API 中公开。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-31T02:40:21.297

> 如果您没有任何免费的东西，请使用“免费”一词作为否定关键字。
> 
> 如果您有免费的东西，请不要使用“免费”否定词。尝试从分析中找出包含“免费”的确切搜索词。然后把整个短语定为否定。您需要将 AdWords 广告系列连接到分析。
> 
> 可以在广告系列和广告组级别添加否定关键字。你可以利用这个机会。

希望这可以帮助。不要犹豫，联系以获得进一步的帮助。

# c# - 使用声明的标识符检索身份验证提供程序类型

> ID：14057520
> 
> 赞同：0
> 
> 时间：2012-12-27T16:03:00.880
> 
> 标签：c#, asp.net, asp.net-mvc, openid, dotnetopenauth

我浏览了**DotNetOpenAuth**上的文档，找不到基于`ClaimedIdentifier`. 我正在寻找类似于以下的方法：

```
ProviderType providerType = ClaimedIdentifier.Parse(" .... ").Type; 
```

有没有检索提供者类型的方法？

*最好查询 DotNetOpenAuth 来检索此信息，而不是在应用程序中维护状态变量或将类型作为查询字符串参数传递。不过，看起来这可能是必要的......*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T16:19:45.083

我试图找到类似的东西，以确定返回的提供程序，但到目前为止，我刚刚开始为雅虎做类似的事情，response.Provider.Uri.ToString().Contains("yahoo")。如果有更好的东西会有所帮助，这似乎很俗气，但这是我现在唯一可以使用的东西。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-15T06:21:10.067

不要解析声明的标识符来试图找出提供者。虽然这可能适用于常见情况，但在某些有效情况下会失败，您也可能会为攻击敞开心扉。

您从 的实例中获取 ClaimedIdentifier `IAuthenticationRequest`。这个接口还有一个`Provider`属性，它返回一个`IProviderEndpoint`带有`Uri`属性的实例。这个 Uri 属性是您应该如何识别您特别感兴趣的提供者。例如：

```
public void Login(string userSuppliedIdentiifer, OpenIdRelyingParty rp) {
    IAuthenticationRequest request = rp.CreateRequest(userSuppliedIdentifier;
    if (request != null) {
        if (request.Provider.Uri == new Uri("https://www.google.com/o8/ud")) {
            // It's Google!
        } else if (request.Provider.Uri == new Uri("https://me.yahoo.com/whatever-it-is")) {
            // It's Yahoo!
        }

        request.RedirectToProvider();
    }
} 
```

我希望这有帮助。

# iphone - 如何在 Xcode 上将选项卡添加到选项卡式应用程序

> ID：14057522
> 
> 赞同：1
> 
> 时间：2012-12-27T16:03:02.547
> 
> 标签：iphone, ios, xcode, storyboard, uitabbar

我看过教程，但没有一个是最新版本的`xcode`，我拥有的版本。

他们都解释了如何在旧版本中执行此操作，但他们想要的一些选项在新版本中不存在。此外，旧版本的每个视图都有多个 .xib 文件，而最新版本的所有视图都有一个 .storyboard 文件。

那么任何人都可以给我一个详细的，易于理解的（因为我是应用程序开发的新手）如何做到这一点的指南吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T16:25:26.133

[Xcode 选项卡式应用程序 - 添加新选项卡视图](https://stackoverflow.com/questions/7952576/xcode-4-2-tabbed-application-adding-new-tab-view) 嘿，下次只需在网上搜索它；）但这次没关系。

# vbscript - 将 OpenTextFile 与 .tmp 文件一起使用

> ID：14057530
> 
> 赞同：0
> 
> 时间：2012-12-27T16:03:49.490
> 
> 标签：vbscript

我正在使用一个名为 Move It Central 的软件。它允许上传用于各种文件的 VBScript。该行`MICacheFilename()`返回`C:\TEMP\path\file.tmp`但是此文件是一个简单的 txt 文件。

我正在尝试使用该方法计算此文本文件中有多少行，`OpenTextFile`但出现错误`Object doesn't support this property or method`。我似乎无法弄清楚为什么我会得到这个。脚本如下。我相信很多问题都是用户错误，因为我对 VBS 非常陌生

```
Sub main()
    Dim objFSO, textInput, strTextFile, actualRows, testRows, mFunction, strTemp
    CONST ForReading = 1

    MISetTaskParam "cachedFile", mFile
    textInput = "the next line is the cachedFile"
    MILogMsg textInput
    MILogMsg mFile

    Set objFSO = CreateObject("Scripting.FileSystemObject")
    strTextFile = MICacheFilename()
    textInput = objFSO.OpenTextFile(strTextFile,ForReading)
    testRows = MIGetTaskParam("testRows")

    Do While textInput.AtEndOfStream <> True
        strTemp = textInput.SkipLine
    Loop
    IF textInput.Line-1 >= testRows THEN
        MILogMsg "true"
    ELSE
        MILogMsg "false"
    END IF
end sub
main 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-28T06:53:50.567

你错过了`SET`关键字

`set textInput = objFSO.OpenTextFile(strTextFile,ForReading)`

参考：http: [//msdn.microsoft.com/en-us/library/office/gg278834.aspx](http://msdn.microsoft.com/en-us/library/office/gg278834.aspx)

# ruby - 如何将 Capybara 包含到 Cucumber 项目的模块中

> ID：14057532
> 
> 赞同：6
> 
> 时间：2012-12-27T16:03:57.213
> 
> 标签：ruby, cucumber, capybara

我定义了一个模块：

```
module Support
  include Capybara::DSL

  def self.do_something
    click_link 'Questions'
  end
end 
```

它位于 features/support/support.rb

我的环境.rb：

```
require 'capybara'
require 'cucumber'
require 'capybara/cucumber'

Capybara.app_host = "http://www.stackoverflow.com"
Capybara.run_server = false
Capybara.default_driver = :selenium 
```

我在steps.rb中调用模块的功能：

```
Support::do_something 
```

我有一个例外：

```
undefined method `click_link' for Support:Module (NoMethodError) 
```

如何使 Capybara 在支持模块中可用？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-27T16:26:18.587

Capybara 应该是`extend`-ed，而不是`include`-ed：

```
module Support
  extend Capybara::DSL

  def self.do_something
    click_link 'Questions'
  end
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-27T16:35:59.327

```
module SupportModule
    class Support
        include Capybara::DSL

        def do_something
            click_link 'Questions'
        end
    end
end

s = SupportModule::Support.new
s.do_something 
```

[http://rubydoc.info/github/jnicklas/capybara/master/Capybara/DSL](http://rubydoc.info/github/jnicklas/capybara/master/Capybara/DSL)

# r - 在箱线图中绘制 y 轴两侧的刻度

> ID：14057533
> 
> 赞同：1
> 
> 时间：2012-12-27T16:04:07.567
> 
> 标签：r

我正在使用以下代码制作箱线图。但是，我想将比例添加到 y 轴的两侧，而不仅仅是左侧？我怎样才能做到这一点？

```
boxplot(data_aod[state=="UTTARANCHAL",c(7,9,11,13,15,17)], 
        main="Maxt and Mint observed in UTTARANCHAL") 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T16:07:54.623

看一下`?axis`

```
axis(side = 4) 
```

在箱线图的右侧添加一个轴。例如：

```
boxplot(rnorm(100))
axis(side = 4) 
```

# jboss - JBoss 消息驱动 bean，未调用 onMessage

> ID：14057541
> 
> 赞同：1
> 
> 时间：2012-12-27T16:04:28.253
> 
> 标签：jboss, message-driven-bean

我正在开发一个使用 JBoss 6.1 作为后端的网络应用程序。
我用“destination”属性创建了一个消息驱动bean：“queue/searchtabQueue”和“destination type”属性“javax.jms.Queue”。

如[https://community.jboss.org/wiki/HowToCreateJMSQueuetopicInAS6](https://community.jboss.org/wiki/HowToCreateJMSQueuetopicInAS6)中所述，我设法创建了我的队列“queue/searchtabQueue”（“searchtab-hornetq-jms.xml”）：

```
<configuration xmlns="urn:hornetq"
            xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
            xsi:schemaLocation="urn:hornetq /schema/hornetq-jms.xsd">
     <queue name="searchtabQueue">
     <entry name="/queue/searchtabQueue"/>
   </queue>
</configuration> 
```

部署后，在管理控制台中，我在“JMS 队列”下看到状态为“up”的队列。

在无状态 bean 中，我正在查找队列，它工作正常，并且发送也不抛出异常：

```
Context ctx = new InitialContext(p); // Create the initial context
ConnectionFactory factory = (ConnectionFactory) ctx.lookup("ConnectionFactory");
Queue queue = (Queue) ctx.lookup("queue/searchtabQueue");
Connection connect = factory.createConnection();
javax.jms.Session session = connect.createSession(false, 0);
MessageProducer sender = session.createProducer(queue);
TextMessage msg = session.createTextMessage();
msg.setText("abc");
sender.send(msg);
connect.close(); 
```

但是没有调用消息驱动bean的onMessage方法。

我错过了什么？

非常感谢提前

沃尔夫冈

更新：我的 MDB 代码：

我的消息驱动 bean 具有以下代码：

```
@MessageDriven(activationConfig =  {
        @ActivationConfigProperty(propertyName = "destinationType",
                                  propertyValue = "javax.jms.Queue"),
        @ActivationConfigProperty(propertyName = "destination",
                                  propertyValue = "queue/searchtabQueue"),
        @ActivationConfigProperty(propertyName = "acknowledgeMode",
                                  propertyValue = "Auto-acknowledge")
    })
public class SearchTableBean implements MessageListener {

   public void onMessage (Message message) {
  }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T15:04:08.327

现在它正在工作，我改变了看法。

查找代码：

```
Context ctx = new InitialContext(p); // Create the initial context
Queue queue = (Queue) ctx.lookup("java:jboss/exported/jms/queue/searchtab");
QueueConnectionFactory factory = (QueueConnectionFactory)
  ctx.lookup("ConnectionFactory");
QueueConnection connect = factory.createQueueConnection();
javax.jms.QueueSession session = connect.createQueueSession(false,
  QueueSession.AUTO_ACKNOWLEDGE);
TextMessage msg = session.createTextMessage("Hello World");
QueueSender sender = session.createSender(queue);
sender.send(msg);  
connect.close(); 
```

队列创建 xml 文件：

```
<configuration xmlns="urn:hornetq"
            xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
            xsi:schemaLocation="urn:hornetq /schema/hornetq-jms.xsd">
   <queue name="searchtabQueue">
      <entry name="queue/searchtab"/>   
      <entry name="java:jboss/exported/jms/queue/searchtab"/>
   </queue>
</configuration> 
```

数据库代码：

```
@MessageDriven(activationConfig =  {
        @ActivationConfigProperty(propertyName = "destinationType",
                                  propertyValue = "javax.jms.Queue"),
        @ActivationConfigProperty(propertyName = "destination",
                                  propertyValue = "queue/searchtab"),       
        @ActivationConfigProperty(propertyName = "acknowledgeMode",
                                  propertyValue = "Auto-acknowledge")
    })
public class SearchTableBean implements MessageListener {
  public void onMessage (Message message) {
    System.out.println("abc");
 } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-23T19:57:04.470

根据规格，您必须致电

```
connect.start(); 
```

激活消息传递过程。

# windows - 在 Windows 资源管理器中应用文件夹属性

> ID：14057543
> 
> 赞同：3
> 
> 时间：2012-12-27T16:04:32.143
> 
> 标签：windows, attributes, directory, explorer

在 Windows 资源管理器详细视图中，我可以向视图添加各种列以显示元数据，涵盖许多不同的属性（标题、描述、作者、类别、标签等）。

对于文件，我可以打开相关文件的属性选项卡，转到详细信息，然后添加或更改文件的属性。这些属性随后会显示在 Windows 资源管理器的相关列中。

对于文件夹，您会假设这以相同的方式工作，但事实并非如此。

我真的希望能够在 Windows 中的文件夹中添加一些“描述”文本，这些文本显示在 Windows 资源管理器的相关列中。有谁知道实现这一目标的简单方法？

对于一些上下文，这是为我构建的项目文件系统添加一些可恢复性，如果主数据库应用程序受到破坏，则可以通过 Windows 资源管理器手动导航文件。

因此，例如，我的项目文件夹被命名为：

A0001

A0002

A0003 ...等等。

我真正想要的是一个单独的列，我可以按以下方式排序/排序：

A0001 ... 账单和发票

A0002 ... 收据和银行对账单

A0003 ... 采购订单

A0004 ... 其他行情

Windows 资源管理器非常接近能够做到这一点（它是为文件做的），我怀疑*一定*有办法吗？

# data-structures - 后缀树和 B 树

> ID：14057545
> 
> 赞同：1
> 
> 时间：2012-12-27T16:04:40.740
> 
> 标签：data-structures, b-tree, suffix-tree

只是一个简单的问题：

**请问后缀树（存储单词后缀的树）是一种b-tree吗？**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-27T16:13:31.687

不，两者并不完全一样。*一些*B 树*有点*类似于后缀树，因为它只存储了足够的唯一性密钥。然而，除此之外，两者之间几乎没有任何相似之处。特别是，B 树主要是根据平衡树来定义的，通常根本不与后缀树一起使用。

# android - 带有 ICS 的 Galaxy Tab 7.0 Plus 模拟器

> ID：14057551
> 
> 赞同：1
> 
> 时间：2012-12-27T16:05:08.863
> 
> 标签：android, android-emulator

如何为 Galaxy Tab 7.0 Plus 冰淇淋三明治制作模拟器。我的应用程序在 Galaxy Tab 2 7.0 上运行良好，但不能在带有 ICS 的 Galaxy Tab 7.0 Plus 上运行。所以我想在带有 ICS 的 Galaxy Tab 7.0 Plus 上测试我的应用程序。当时我有 Galaxy Tab 2 7.0 但没有 Galaxy选项卡 7.0 Plus ICS。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-27T16:17:27.387

> 如何为 Galaxy Tab 7.0 Plus 冰淇淋三明治制作模拟器

真的没有这个概念。欢迎您制作模拟 7 英寸屏幕并运行 Android 4.0 的模拟器映像。但是，除非三星发布模拟器 AVD——我不知道它们是——否则你无法制作运行三星固件的模拟器。

# google-sheets - 如何在 SPSS 中处理（Google 表单 - 电子表格）“复选框”答案

> ID：14057558
> 
> 赞同：3
> 
> 时间：2012-12-27T14:21:40.293
> 
> 标签：google-sheets, frequency, google-forms, spss

我正在分析使用 Google 表单进行的电子调查，但遇到以下问题。

其中一个问题可以以复选框的形式出现多个答案，如下图所示。问题是希腊语，所以我在每个答案旁边添加了一些 Choice1、Choice2、Choice3 等，以方便我的问题。

![在此处输入图像描述](../Images/99a5812a9c0802474224ad89ca5766c6.png)

在我的数据中，当有人选择让我们说 Choice1 和 Choice2 时，我将得到一个答案，即他检查的字符串的串联，用逗号分隔。

在这种情况下，它将是：

> 选择1，选择2

如果其他人检查了 Choice1、Choice2 和 Choice4，他在我的数据中的答案将是：

> 选择 1、选择 2、选择 4

问题是 SPSS 无法分隔子字符串（用逗号分隔）并了解每个案例的共同点。或者也许有办法，但我不知道:)

例如，当我对这个问题进行简单的频率分析时，它会生成一个表格，可以感知

> 选择1，选择2

作为一个完全不同的情况

> 选择 1、选择 2、选择 4

理想情况下，我想以某种方式告诉 SPSS 计算每个唯一选项（Choice1、Choice2、Choice3 等）的频率，而不是这些选项的每个唯一组合。那可能吗？如果是的话，你能指出我需要研究的文件吗？

多谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-28T09:02:56.490

假设您正在处理以下数据，这是您从在线表单下载的 CSV 文件。复制并粘贴下面的文本并将其保存到名为“CourseInterestSurvey.CSV”的文本文件中。

```
Timestamp,Which courses are you interested in?,What software do you use?
12/28/2012 11:57:56,"Research Methods, Data Visualization","Gnumeric, SPSS, R"
12/28/2012 11:58:09,Data Visualization,"SPSS, Stata, R"
12/28/2012 11:59:09,"Research Dissemination, Graphic Design",Adobe InDesign
12/28/2012 11:59:27,"Data Analysis, Data Visualization, Graphic Design","Excel, OpenOffice.org/Libre Office, Stata"
12/28/2012 11:59:44,Data Visualization,"R, Adobe Illustrator" 
```

使用以下语法将其读入 SPSS：

```
GET DATA
  /TYPE=TXT
  /FILE="path\to\CourseInterestSurvey.CSV"
  /DELCASE=LINE
  /DELIMITERS=","
  /QUALIFIER='"'
  /ARRANGEMENT=DELIMITED
  /FIRSTCASE=2
  /IMPORTCASE=ALL
  /VARIABLES=
  Timestamp A19
  CourseInterest A49
  Software A41.
CACHE.
EXECUTE.
DATASET NAME DataSet2 WINDOW=FRONT.
LIST. 
```

它目前看起来像下图——三列（一列时间戳，两列包含我们想要的数据）：

![在此处输入图像描述](../Images/eae97131aa345df838c32e52255ced82.png)

[使用此处](http://spssx-discussion.1045642.n5.nabble.com/Syntax-to-reverse-concatenate-in-SPSS-td1079531.html)的一些语法，我们可以将单元格拆分如下：

```
* We know the string does not excede 50 characters.
* We got that information while we were reading our data in.
STRING #temp(a50). 
* We're going to work on the "CourseInterest" variable.
COMPUTE #temp=CourseInterest. 
* We're going to create 3 new variables with the prefix "CourseInterest".
* You should modify this according to the actual number of options your data has
* and the maximum length of one of the strings in your data.
VECTOR CourseInterest(3, a25). 
* Here's where the actual variable creation takes place.
LOOP #i = 1 TO 3\. 
.  COMPUTE #index=index(#temp,","). 
.  DO IF   #index GT 0\. 
.    COMPUTE CourseInterest(#i)=LTRIM(substr(#temp,1, #index-1)). 
.    COMPUTE #temp=substr(#temp, #index+1). 
.  ELSE. 
.    COMPUTE CourseInterest(#i)=LTRIM(#temp). 
.    COMPUTE #temp=''. 
.  END IF. 
END LOOP IF #index EQ 0\. 
LIST. 
```

结果：

![在此处输入图像描述](../Images/3518743842af28c5b8db28e223f28fbc.png)

这一次只处理一列，我还不够熟悉，无法修改它以处理多列。但是，如果你要切换到 R，我已经有了一些[现成的](https://github.com/mrdwab/2657-R-Functions/blob/master/scripts/concat.split.R) [函数](https://github.com/mrdwab/2657-R-Functions/blob/master/scripts/multi.freq.table.R)来帮助处理这些情况。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-27T19:14:18.947

不幸的是，没有简单的“内置”方法来实现这一点，但使用电子表格公式或 Google Apps 脚本肯定可以实现。

使用公式，假设您的复选框问题位于 D 列中，这将产生一个“标准化”列表：

`=ArrayFormula(TRANSPOSE(SPLIT(CONCAENATE(D2:D&",");",")))`

您可以将其转换为两列列表并[查询](http://support.google.com/drive/bin/answer.py?hl=en&answer=1388882)它以返回频率表：

`=ArrayFormula(QUERY(TRANSPOSE(SPLIT(CONCATENATE(D2:D&",");","))&{"",""};"select Col1, count(Col2) group by Col1 label Col1 'Item', count(Col2) 'Frequency'";0))`

如果您的语言环境使用逗号作为小数分隔符，请替换`{"",""}`为`{""\""}`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-28T14:16:02.127

如上所述，很容易将字段拆分为单独的变量。现在将这些变量定义为多重响应集（分析 > 表格 > 多重响应集），您可以使用 CTABLES 或 MULT REPONSE 程序分析这些变量，并使用图表生成器绘制它们

# entity-framework - TPH 查询返回所有对象，尽管 OfType

> ID：14057561
> 
> 赞同：2
> 
> 时间：2012-12-27T16:05:39.033
> 
> 标签：entity-framework, entity-framework-5

我有一个非常简单的场景。

代码优先、EF5、默认模型约定

我的 Parent 类有一个 Child 的集合，它们都派生自一个抽象的 Child 类。假设我有 ConcreteChild1 和 ConcreteChild2。

如果我尝试仅检索 ConcreteChild1，`parent.Children.OfType<ConcreteChild1>()`则使用结果将是 ConcreteChild1 的列表，如承诺的那样。不幸的是，检查发出的 SQL 显示所有子项实际上都是从数据库中检索到的，因为 SQL 问题是“在（*每个子类型*）中的鉴别器”而不是“在（'ConcreteChild1'）中的鉴别器”，正如我所期望的那样。

我该怎么做才能只检索匹配类型的行？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T18:09:53.667

导航属性不支持查询，因为它们不支持`IQueryable`（它们当然支持 LINQ to 对象，但一切都支持）。

构造一个显式查询并执行它。

如果您过去使用过类似的导航属性（排序、过滤等），那么所有这些都不会在服务器上运行。我认为由于该限制，您想要使用导航属性访问子集合的情况*非常*罕见。它几乎从来没有意义。

# user-interface - 用于 VS2012 的具有拖放功能的良好 GUI 和 UI 设计器扩展

> ID：14057566
> 
> 赞同：1
> 
> 时间：2012-12-27T16:06:02.060
> 
> 标签：user-interface, visual-studio-2012

我编写了一个算法。现在我正在寻找一个优秀而简单的设计器，我可以在其中集成我的源代码。我的源代码是用 C/C++ 编写的，包括用于蓝牙设备的 WinAPI。

我用 winforms 尝试了 C++/CLR .NET，但效果不是很好。有人告诉我应该在 VS 2012 中使用 MFC，但这不是一种优雅的方式。

QT5Creator 也是不可能的：我认为我的代码与它不兼容。

您对 VS2012 的任何扩展有任何经验吗？

谢谢

# javascript - RaphaelJs 分形植物内存泄漏

> ID：14057567
> 
> 赞同：2
> 
> 时间：2012-12-27T16:06:04.767
> 
> 标签：javascript, graphics, web, raphael, fractals

我用 raphaeljs 创建了一个简单的动画。你可以在这里看看：http: [//jsfiddle.net/fJt96/](http://jsfiddle.net/fJt96/)

它生成随机分形植物并在它们之间混合。在显示第二个植物之前大约需要 8 秒，然后每次刷新大约需要 4 秒，具体取决于植物的复杂性。创建其中一张图纸的规则在此示例的描述中进行了说明（不是我制作的） [https://en.wikipedia.org/wiki/File:Fractal-plant.svg](https://en.wikipedia.org/wiki/File:Fractal-plant.svg)

在我的代码中，函数`applyRules`或多或少`draw`是从描述到 javascript 的直接翻译。

不幸的是，我的脚本中有内存泄漏，我不知道在哪里。唯一持久的变量是 RaphaelPaper 和两个 RaphaelSet 以及一个布尔切换。每组包含一个分形植物，并且切换存储当前显示的组和可以重绘的组。程序的其余部分依赖于局部变量，但仍然存在内存泄漏。

我有两个想法

*   我正在从一组中删除元素，因为它被重绘。为集合中的每个元素调用 Element.remove 就足够了吗？

*   Raphael 中是否存在内存泄漏？我不想显得粗鲁 - Raphael 的发明者当然是一位巧妙的策划者，但我在我的代码中找不到问题。也许有一些已知问题？

更新：这是代码

```
 var toggle = true;
window.onload = function () {
    var paper = Raphael(10, 50, 1000, 1000);
    var word = "X";
    paper.clear();
    var n = 4;
    for(var i = 0; i < n; i++) {
        word = applyRules(word);
    }
    var set1 = paper.set();
    draw(paper, word, set1);
    set1.attr("fill", "green");
    set1.attr("stroke", "green");
    set1.attr("opacity", "1");
    var set2 = paper.set();
    draw(paper, word, set2);
    set2.attr("fill", "green");
    set2.attr("stroke", "green");
    set2.attr("opacity", "0");
    var toggle = true;
    var interval = window.setInterval(function () {
        return redraw(paper, set1, set2);
    }, 3000);
};
var remove = function (Element) {
    Element.remove();
};
var redraw = function (paper, set1, set2) {
    var n = 3 + Math.floor(Math.random() * 4);
    var word = "X";
    for(var i = 0; i < n; i++) {
        word = applyRules(word);
    }
    var length = 2 + Math.floor(Math.random() * 2);
    var deltaRot = 15 + Math.floor(Math.random() * 20);
    if(toggle) {
        set2.attr("opacity", "1");
        set1.forEach(remove);
        draw(paper, word, set1, deltaRot, length);
        set1.attr("fill", "green");
        set1.attr("stroke", "green");
        set1.attr("opacity", "0");
        toggle = !toggle;
    } else {
        set1.attr("opacity", "1");
        set2.forEach(remove);
        draw(paper, word, set2, deltaRot, length);
        set2.attr("fill", "green");
        set2.attr("stroke", "green");
        set2.attr("opacity", "0");
        toggle = !toggle;
    }
};
var Entry = (function () {
    function Entry() { }
    return Entry;
})();
var List = (function () {
    function List() { }
    return List;
})();
var draw = function (paper, word, st, deltaRot, length) {
    if (typeof deltaRot === "undefined") { deltaRot = 25; }
    if (typeof length === "undefined") { length = 2; }
    var x = 0;
    var y = 0;
    var rot = 45;
    var stack = new List();
    for(var i = 0; i < word.length; i++) {
        var char = word[i];
        switch(char) {
            case "F": {
                var xend = x + Math.cos(rot / 180 * Math.PI) * length;
                var yend = y + Math.sin(rot / 180 * Math.PI) * length;
                st.push(paper.path("M" + x + "," + y + "L" + xend + "," + yend));
                x = xend;
                y = yend;
                break;

            }
            case "+": {
                rot = rot + deltaRot;
                break;

            }
            case "-": {
                rot = rot - deltaRot;
                break;

            }
            case "X": {
                break;

            }
            case "[": {
                var current = new Entry();
                current.Rot = rot;
                current.X = x;
                current.Y = y;
                var newlist = new List();
                newlist.head = current;
                newlist.tail = stack;
                stack = newlist;
                break;

            }
            case "]": {
                st.push(paper.circle(x, y, 1));
                var current = stack.head;
                x = current.X;
                y = current.Y;
                rot = current.Rot;
                stack = stack.tail;
                break;

            }
        }
    }
};
var applyRules = function (word) {
    var new_word = "";
    for(var i = 0; i < word.length; i++) {
        var char = word[i];
        switch(char) {
            case "X": {
                new_word = new_word + "F-[[X]+X]+F[+FX]-X";
                break;

            }
            case "F": {
                new_word = new_word + "FF";
                break;

            }
            case "+": {
                new_word = new_word + "+";
                break;

            }
            case "-": {
                new_word = new_word + "-";
                break;

            }
            case "[": {
                new_word = new_word + "[";
                break;

            }
            case "]": {
                new_word = new_word + "]";
                break;

            }
        }
    }
    return new_word;
};​ 
```

我猜 List 和 Entry 的用法会有点混乱。我用 Typescript 创建了这个并编写了一个自定义 List 实现。这是一些打字稿

```
class Entry { public X: number; public Y: number; public Rot: number;}

class List { public head: Entry; public tail: List; } 
```

# apache - .htaccess 根据浏览器重定向到特定网页

> ID：14057575
> 
> 赞同：8
> 
> 时间：2012-12-27T16:06:32.123
> 
> 标签：apache, .htaccess, webserver

我想根据他们使用的浏览器将访问者重定向到我的特定页面。

例如：所有访问者都会首先访问[http://www.example.com/xy/abc.html](http://www.example.com/xy/abc.html)。

如果访问者使用的是 firefox，他应该被重定向到[http://www.example.com/xy/firefox.html](http://www.example.com/xy/firefox.html)

如果访问者使用的是 chrome，他应该被重定向到[http://www.example.com/xy/chrome.html](http://www.example.com/xy/chrome.html)

我想为opera、chrome、firefox、IE、safari浏览器处理这个问题，并为未识别的浏览器提供默认重定向。

对代码有帮助吗？我试着查找，我发现所有浏览器都是一个重定向代码，而不是一个特定的。

感谢您的帮助。谢谢。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-12-27T16:30:43.960

您可以使用 mod_rewrite 的[RewriteCond 指令](http://httpd.apache.org/docs/current/mod/mod_rewrite.html#rewritecond)来测试报告的用户代理名称。在放置在 xy 目录中的 .htaccess 文件中，它看起来像这样：

```
RewriteCond %{HTTP_USER_AGENT} Opera
RewriteRule ^abc.html$ http://example.com/xy/opera.html [R=301] 
```

这会将在其用户代理字符串中某处包含 Opera 的浏览器永久重定向到 opera.html。[您可以在useragentstring.com](http://www.useragentstring.com/pages/useragentstring.php)上找到用户代理如何识别自己的一个不错的列表。您会注意到许多用户代理字符串实际上以“Mozilla”开头（由于一些邪恶的历史原因），但只需测试字符串是否包含浏览器的名称（IE 是“MSIE”）就足够了。

问题是，`HTTP_USER_AGENT`字符串是由浏览器报告的，浏览器可能会报告他们想要的任何东西。Opera 甚至有一个内置选项可以将自己伪装成 IE 或 FF。通常，基于用户代理字符串的浏览器嗅探很有可能最终会错过，然后用户会感到恼火。我强烈建议您让用户以某种方式覆盖自动重定向。

* * *

所以，这样的事情可能会作为第一种方法：

```
RewriteEngine on

RewriteCond %{HTTP_USER_AGENT} Opera
RewriteRule ^abcd.html$ opera.html [NC,L]

RewriteCond %{HTTP_USER_AGENT} MSIE
RewriteRule ^abcd.html$ ie.html [NC,L]

RewriteCond %{HTTP_USER_AGENT} Chrome
RewriteRule ^abcd.html$ chrome.html [NC,L]

RewriteCond %{HTTP_USER_AGENT} Safari
RewriteRule ^abcd.html$ safari.html [NC,L]

RewriteCond %{HTTP_USER_AGENT} Firefox
RewriteRule ^abcd.html$ firefox.html [NC,L]

RewriteRule ^abcd.html$ default.html [L] 
```

L 标志确保该规则是该通道中要执行的最后一个规则，因此如果浏览器报告自己带有包含 Firefox、Safari、MSIE 和 Opera 的字符串，那么第一个匹配的规则（在本例中为 Opera）将确定登陆页面。此版本执行软重定向（浏览器的地址栏不会改变）。如果您想要一个硬的 R=301 重定向，请确保拼写出着陆页的整个 URL，即`RewriteRule ^abcd.html$ http://example.com/xy/opera.html [NC,L,R=301]`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-12-22T18:25:29.863

以下重写规则将对 tecmint.html 的请求重定向到 tecmint-chrome.html、tecmint-firefox.html 或 tecmint-ie.html，具体取决于所使用的浏览器（Google Chrome、Mozilla Firefox 或 Internet Explorer）。

为此，HTTP_USER_AGENT 环境变量用于根据用户代理字符串识别浏览器。这里我们介绍 RewriteCond 指令，它允许我们指定一个必须满足的条件才能进行重定向。

```
RewriteCond "%{HTTP_USER_AGENT}"  ".*Firefox.*"
RewriteRule "^/tecmint\.html$"      "/tecmint-firefox.html" [R,L]
RewriteCond "%{HTTP_USER_AGENT}"  ".*Chrome.*"
RewriteRule "^/tecmint\.html$"      "/tecmint-chrome.html" [R,L]
RewriteCond "%{HTTP_USER_AGENT}"  ".*Trident.*"
RewriteRule "^/tecmint\.html$"      "/tecmint-ie.html" [R,L] 
```

参考：[https ://www.tecmint.com/mod_rewrite-redirect-requests-based-on-browser/](https://www.tecmint.com/mod_rewrite-redirect-requests-based-on-browser/)

# google-app-engine - 异常 java.lang.ClassNotFoundException: servlet - 但是 Servlet 存在；而 web.xml 是绝对正确的

> ID：14057576
> 
> 赞同：1
> 
> 时间：2012-12-27T16:06:57.427
> 
> 标签：google-app-engine, servlets, classnotfoundexception

刚刚用 Eclipse 6 月 4.2 创建了一个全新的项目 使用 Google App Engine SDK 1.7.4

Eclipse 创建一个 Servlet

```
public class ClockServlet extends HttpServlet {
    public void doGet(HttpServletRequest req, HttpServletResponse resp)
            throws IOException {
        resp.setContentType("text/plain");
        resp.getWriter().println("Hello, world");
    }
} 
```

和一个简单的 web.xml

```
 <servlet>
    <servlet-name>Clock</servlet-name>
    <servlet-class>clock.ClockServlet</servlet-class>
</servlet>
<servlet-mapping>
    <servlet-name>Clock</servlet-name>
    <url-pattern>/clock</url-pattern>
</servlet-mapping>
<welcome-file-list>
    <welcome-file>index.html</welcome-file>
</welcome-file-list> 
```

当我部署它时，我得到了通用的 HTML 错误页面：**错误：服务器错误** ，从日志中我得到：

```
 EXCEPTION java.lang.ClassNotFoundException: clock.ClockServlet
at com.google.appengine.runtime.Request.process-0925dcee3db2e16a(Request.java) 
```

但是 servlet 存在并且 web.xml 是正确的我哪里错了？

tnx

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-28T09:33:16.290

好吧，似乎 Servlet 和 Web.xml 是正确的，但是缺少使用 Google App Engine 必须的**标签。**我想知道为什么文档中没有下划线和大写字母。

标记是`<load-on-startup>1</load-on-startup>`

请参考[Java 应用程序配置](https://developers.google.com/appengine/docs/java/config/appconfig)

每个自定义 servlet 必须在启动时加载，以让 GA Engine 实例化类并接受请求。这是用于在 GAE 中部署应用程序的最终 web.xml

```
 <servlet>
    <servlet-name>Clock</servlet-name>
    <servlet-class>clock.ClockServlet</servlet-class>
    <load-on-startup>1</load-on-startup>
</servlet>
<servlet-mapping>
    <servlet-name>Clock</servlet-name>
    <url-pattern>/clock</url-pattern>
</servlet-mapping>
<welcome-file-list>
    <welcome-file>index.html</welcome-file>
</welcome-file-list> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-29T20:06:25.490

嗨，请看一下： [ClassNotFoundException with ServletContextlistener](https://stackoverflow.com/questions/7849452/classnotfoundexception-with-servletcontextlistener)

使用 servlet-api 检查问题（第二个）

# angularjs - AngularJs 和 Meteor 集成

> ID：14057581
> 
> 赞同：4
> 
> 时间：2012-12-27T16:07:30.080
> 
> 标签：angularjs, meteor, javascript-framework

在我使用 angular 的短时间内，我发现它非常酷。现在我遇到了 Meteor，和每个人一样，我对此感到非常兴奋。我正在开始一些带有角度的个人项目，我也想将它们与流星集成。
使两个框架协同工作的最佳方式是什么？

*注意：*我找到[了 Meteor_angularjs](https://github.com/lvbreda/Meteor_angularjs)，它是由 Angular 或 Meteor 开发人员开发的，还是只是“一个让我开心的帅哥”？我看到一个 youtube 视频，其中 AngularJs 成员谈到了他们关于流星集成的计划，这有关系吗？

**编辑：**问题是关于如何集成这两个框架，目前唯一可用的选择是 Lander Van Breda 的解决方案，所以我感谢他，我将把这个选项作为我的答案，但由于双方都表现出对将他们的框架相互集成的兴趣很高兴收到他们的来信，看看他们的官方实现是什么。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-10-07T22:22:57.447

我显然有偏见，但我们的团队编写并正在积极维护这个库 - [angular-meteor](https://github.com/Urigo/angular-meteor)，我们还发布了一个结合两者的教程 - [angular-meteor 教程](http://angularjs.meteor.com/tutorial)

很想听听你的想法！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-27T19:43:13.067

问题是什么？它来自 Angular 还是 Meteor？不，它来自@LanderVanBreda，所以我猜它来自“一个让你开心的帅哥”（顺便说一句，我也是）。

[Meteor 在他们的“愿望清单”](https://trello.com/card/examples-demonstrating-angular-ember-backbone-integrations/508721606e02bb9d570016ae/66)中有一些关于 Angular（和类似）的计划

我真的希望 angular + meteor 真正起飞，但现在由 Lander Van Breda 让我们了解他的[Meteor_angularjs](https://github.com/lvbreda/Meteor_angularjs)的最新情况，因为他是唯一维护它的人。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-03T20:38:21.060

有一个使用lvbreda包的角度流星排行榜样本，它可以帮助

[https://github.com/bevanhunt/meteor-angular-leaderboard](https://github.com/bevanhunt/meteor-angular-leaderboard)

# symfony - 类 MyProject\Bundle\QuestionsBundle\Entity\Doctrine\Common\Collections\Collection 不存在

> ID：14057585
> 
> 赞同：0
> 
> 时间：2012-12-27T16:07:50.137
> 
> 标签：symfony, doctrine-orm

我有一个 500 内部错误：

> 类 MyProject\Bundle\QuestionsBundle\Entity\Doctrine\Common\Collections\Collection 不存在

我不明白它来自哪里，这是我的要求：

```
$sessionsdejeuxbyuser = $this->sessiondejeux_user_repository->findBy(array('user' => $user->getId()), array('created' => 'desc'), 1); 
```

这是我的课： http: [//pastebin.com/ZkJjWraj](http://pastebin.com/ZkJjWraj)

我不知道它来自哪里，谷歌也没有给我任何线索......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T19:09:19.540

`\Doctrine\Common\Collection\Collection`我认为您的命名空间有问题，并且在某处使用声明......我认为它不是从根目录而是从命名空间寻找类`\MyProject\Bundle\QuestionsBundle\Entity`。

正如您在评论中所建议的，您可以在使用 grep 编写错误代码时快速搜索：

`grep -irn your_code src/MyProject/Bundle/QuestionsBundle/`

`i`：忽略大小写，如果你不想担心这个

`r`: 递归

`n`: 打印文件名后的行号

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T20:02:35.277

cram1010 有个大线索！您需要导入 Collection 类的命名空间。默认情况下，如果你不这样做，PHP 期望类属于当前命名空间。

问题出在课堂上的`setThematiques`方法上。`SessionDeJeux`

你为什么将你的命名空间与 Collection 连接起来？？？

```
/**
 * Set thematiques
 *
 * @param \Doctrine\Common\Collections\Collection $thematiques
 */
public function setThematiques(\Doctrine\Common\Collections\Collection $thematiques)
{
    $this->thematiques[] = $thematiques;
} 
```

相同的`setTags`：

```
/**
 * Set tags
 *
 * @param \Doctrine\Common\Collections\Collection $tags
 */
public function setTags(\Doctrine\Common\Collections\Collection $tags)
{
    $this->tags[] = $tags;
} 
```

# spss - 帮助：创建新类别以合并 2 个数据集

> ID：14057586
> 
> 赞同：0
> 
> 时间：2012-12-27T15:23:00.673
> 
> 标签：spss, dataset

我有 2000-2005 年的数据集和 2006-2008 年的数据集。

在第一个数据集中，我有以下年龄组：0-14 岁、15-29 岁、30-39 岁、40-49 岁、50-59 岁和 60 岁及以上。第二个，我有：0-5岁，5-14岁，15-24岁，25-34岁，35-44岁，45-54岁，55-64岁，65-74岁，75岁及以上。这些类别下的数据是二进制 (0-1)。在第一个数据集中，我有另一个变量提供所有受试者的年龄。我在第二个数据集中没有这样的信息（我只有上面提到的年龄组和 0-1 个条目）。

我希望合并两个数据集。我需要将年龄组重新分类为：15-24、22-34、35-64、65 岁及以上。我可以合并 2006-2008 年的类别，并使用年龄变量在第一个数据集中创建这些类别。

这个在spss上是怎么做的？我需要分步说明。

我期待着您的回复。非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-28T14:11:14.317

查看 RECODE 命令，Transform > Recode into different variables

# c# - HttpWebRequest 导致响应不以 HTTP.Data 开头

> ID：14057587
> 
> 赞同：0
> 
> 时间：2012-12-27T16:07:52.790
> 
> 标签：c#, .net, httpwebrequest, fiddler

我正在尝试通过执行以下操作来使用 craigslist 批量发布：

```
HttpWebRequest request = null;
Uri uri = new Uri("https://post.craigslist.org/bulk-rss/post");
request = (HttpWebRequest)WebRequest.Create(uri);
request.Method = "POST";
request.ContentType = "application/x-www-form-urlencoded";
request.ContentLength = FormattedXmlDocument.InnerXml.Length;
using (Stream writeStream = request.GetRequestStream())
{
    UTF8Encoding encoding = new UTF8Encoding();
    byte[] bytes = encoding.GetBytes(FormattedXmlDocument.InnerXml);
    writeStream.Write(bytes, 0, bytes.Length);
}
string result = string.Empty;

request.ProtocolVersion = System.Net.HttpVersion.Version11;
request.KeepAlive = false;
try
{
    using (HttpWebResponse response = (HttpWebResponse)request.GetResponse())
    {
        using (Stream responseStream = response.GetResponseStream())
        {
            using (System.IO.StreamReader readStream = new System.IO.StreamReader(responseStream, Encoding.UTF8))
            {
                result = readStream.ReadToEnd();
            }
        }
    }
}
catch (Exception exp)
{
    // MessageBox.Show(exp.Message);
} 
```

当执行这行代码时

```
using (HttpWebResponse response = (HttpWebResponse)request.GetResponse()) 
```

我得到了例外：

```
The remote server returned an error: (500) Internal Server Error. 
```

我使用提琴手来检查请求，它在那里得到以下错误：

```
Response does not start with HTTP.Data: 
```

包装看起来像这样：

```
POST https://post.craigslist.org/bulk-rss/post HTTP/1.1
Content-Type: application/x-www-form-urlencoded
Host: post.craigslist.org
Content-Length: 739
Expect: 100-continue
Connection: Keep-Alive

<rdf:RDF xmlns="http://purl.org/rss/1.0/" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns:cl="http://www.craigslist.org/about/cl-bulk-ns/1.0"><channel><items><rdf:li rdf:resource="TestJobPost1" /></items><cl:auth username="cl@flazingo.com" password="2749saturn" accountID="14" /></channel><item rdf:about="TestJobPost1"><cl:category>sof</cl:category><cl:area>nyc</cl:area><cl:subarea>stn</cl:subarea><cl:neighborhood>Grasmere</cl:neighborhood><cl:jobInfo compensation="100000.00" telecommuting="0" partTime="0" contract="0" nonprofit="0" internship="0" disability="0" recruitersOK="0" phoneCallsOK="0" okToContact="0" okToRepost="0" /><title>First Position</title><description><![CDATA[teset]]></description></item></rdf:RDF> 
```

任何帮助将非常感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T17:00:42.793

写入`request.GetRequestStream()`将开始向服务器发送数据。

之后设置请求属性将破坏协议。

# directx - ifstream w/directX 上的堆损坏

> ID：14057592
> 
> 赞同：0
> 
> 时间：2012-12-27T16:08:25.213
> 
> 标签：directx, logic, game-engine, ifstream, heap-corruption

我正在从这个链接[Loading An MD5 Model](http://www.braynzarsoft.net/index.php?p=D3D11MD51)移植一个动画代码，它是线性代码，所以我变成了定向的。

问题是，当我读取整个模型（已成功完成）时，调试器会在我的代码的另一部分（我加载另一个模型文件 - 静态模型）中指示错误。

原因是，当我尝试将数字写入 int 或 float 变量时会导致堆损坏，如果我写入 char 或 string 则不会导致任何错误。

在几次测试中我发现只有在执行这两个代码时才会出现这个错误，因为当只有一个发生时，程序运行正常。

这是代码：

加载 MD5 文件：（很大）

```
bool AnimationModelClass::LoadMD5Model(ID3D10Device* device, wstring filename)
{
    ifstream fin;
    char input=' ';
    string temp, temp2;
    int i;

    // Crear temp2

    temp2.clear();

    // Open the model file.
    fin.open(filename);

    // If it could not open the file then exit.
    if(fin.fail())
    {
        return false;
    }

    // Look for MD5 Version
    temp.clear();

    continue_after_string(fin, "MD5Version");

    // Store MD5 Version
    fin >> MD5Model.version;

    // Look for Command Line
    temp.clear();

    continue_after_string(fin, "commandline");

    // Skip line
    skip_lines(fin, 1);

    // Look for the number of joints
    temp.clear();

    continue_after_string(fin, "numJoints");

    // Store the number of meshes (subsets)
    fin >> MD5Model.numJoints;

    // Look for the number of joints
    temp.clear();

    continue_after_string(fin, "numMeshes");

    // Store the number of joints
    fin >> MD5Model.numSubsets;

    // Look for the joints
    temp.clear();

    continue_after_string(fin, "joints");

    continue_after_char(fin, '{');

    // Skip the rest of this line
    skip_lines(fin, 1);

    // - JOINTS - //

    // Fill each joint information
    Joint tempJoint;

    for(i=0; i < MD5Model.numJoints; i++){

        // Jump to name
        skip_chars(fin, 3, input);

        temp.clear();

        // Find closing brackets
        while(input!='"')
        {
        temp+=input;
        fin.get(input);

        }

        // Store tempJoint name
        tempJoint.name = temp;

        // Storte parent ID
        fin >> tempJoint.parentID;

        // Find the positions of this joint
        continue_after_char(fin, '(');

        // Store the positions
        fin >> tempJoint.pos.x >> tempJoint.pos.z >> tempJoint.pos.y;

        // Find the orientation of this joint
        continue_after_char(fin, ')');
        continue_after_char(fin, '(');

        // Store orientation
        fin >> tempJoint.orientation.x >> tempJoint.orientation.z >> tempJoint.orientation.y;

        // Compute the w axis of the quaternion (The MD5 model uses a 3D vector to describe the
        // direction the bone is facing. However, we need to turn this into a quaternion, and the way
        // quaternions work, is the xyz values describe the axis of rotation, while the w is a value
        // between 0 and 1 which describes the angle of rotation)
        float t = 1.0f - ( tempJoint.orientation.x * tempJoint.orientation.x ) - ( tempJoint.orientation.y * tempJoint.orientation.y ) - ( tempJoint.orientation.z * tempJoint.orientation.z );
        if ( t < 0.0f )
        {
            tempJoint.orientation.w = 0.0f;
        }
        else
        {
            tempJoint.orientation.w = -sqrtf(t);
        }

        // Skip the rest of this line
        skip_lines(fin, 1);

        // Store the joint into this models joint vector
        MD5Model.joints.push_back(tempJoint);

    }

    // Skip "}"
    continue_after_char(fin, '}');

    // Find meshes
    continue_after_string(fin, "mesh");

    // Skip "{"
    continue_after_char(fin, '{');

    temp.clear();

    // Variables to fill model subsets
    ModelSubset subset;
    int numVerts, numTris, numWeights;

    // End of file controller
    bool eof = false;
    int gg=0;

    // Read until EOF
    while(!eof){

        // Clear the temp string
        temp.clear();

        // Read until "}"

        while(temp!= "}"){

        if(!get_string(fin, temp)){

            // Break if we cant read anymore
            eof = true;
            break;
        }

            // Case we found shader
            if(temp == "shader"){

            // Store it
            get_string(fin, subset.fileNamePath);

            // Skip the rest of this line
            skip_lines(fin, 1);

            // CHECAR SE A TEXTURA FOI CARREGADA E CARREGA-LA SE NECESSÁRIO
            }

            // Case we found tex vertices
            else if(temp == "numverts"){

            // Store the number of tex vertices
            fin >> numVerts;    

            // Skip the rest of this line
            skip_lines(fin, 1);

            // Store stuff for each tex vertice
            for(int i = 0; i < numVerts; i++)
                {

                    Vertex tempVert;

                    // Skip "vert # ("
                    continue_after_char(fin, '(');

                    fin >> tempVert.texCoord.x;
                    fin >> tempVert.texCoord.y;

                    // Skip ")"
                    continue_after_char(fin, ')');

                    fin >> tempVert.StartWeight;
                    fin >> tempVert.WeightCount;

                    // Skip the rest of this line
                    skip_lines(fin, 1);

                    // Push back this vertex into subsets vertex vector
                    subset.vertices.push_back(tempVert);        
                }

            }

            // Case we found the triangles
            else if(temp == "numtris"){

            // Store the number of triangles
            fin >> numTris;
            subset.numTriangles = numTris;

            // Skip the rest of this line
            skip_lines(fin, 1);

            // Save stuff for each triangle
            for(int i = 0; i < numTris; i++)
                {
                    DWORD tempIndex;

                    // Skip "tri"
                    get_string(fin, temp);

                    // Skip tri counter
                    get_string(fin, temp);

                    // Store the 3 indices
                    for(int k = 0; k < 3; k++)                  
                        {
                            fin >> tempIndex;
                            subset.indices.push_back(tempIndex);
                        }

                    // Skip the rest of this line
                    skip_lines(fin, 1);
                }

            }

            // Case we found the weights
            else if(temp == "numweights"){

            // Store the number of weights
            fin >> numWeights;

            // Skip the rest of this line
            skip_lines(fin, 1);

            // Save stuff for each weight
            for(int i = 0; i < numWeights; i++)
                {
                    Weight tempWeight;

                    // Skip "weight"
                    get_string(fin, temp);

                    // Skip "#"
                    get_string(fin, temp);

                    // Store weight's joint ID
                    fin >> tempWeight.jointID;      

                    // Store weight's influence over a vertex
                    fin >> tempWeight.bias;

                    // Skip "("
                    continue_after_char(fin, '(');

                    // Store weight's pos in joint's local space
                    fin >> tempWeight.pos.x >> tempWeight.pos.z >> tempWeight.pos.y;

                    // Skip the rest of this line
                    skip_lines(fin, 1);

                    // Push back tempWeight into subsets Weight array
                    subset.weights.push_back(tempWeight);
                }

            }
        }

                //*** find each vertex's position using the joints and weights 
                for ( int i = 0; i < subset.vertices.size(); ++i )
                {
                    Vertex tempVert = subset.vertices[i];
                    tempVert.pos = D3DXVECTOR3(0, 0, 0);    // Make sure the vertex's pos is cleared first

                    // Sum up the joints and weights information to get vertex's position
                    for ( int j = 0; j < tempVert.WeightCount; ++j )
                    {
                        Weight tempWeight = subset.weights[tempVert.StartWeight + j];
                        Joint tempJoint = MD5Model.joints[tempWeight.jointID];

                        // Convert joint orientation and weight pos to vectors for easier computation
                        // When converting a 3d vector to a quaternion, you should put 0 for "w", and
                        // When converting a quaternion to a 3d vector, you can just ignore the "w"
                        D3DXQUATERNION tempJointOrientation = D3DXQUATERNION(tempJoint.orientation.x, tempJoint.orientation.y, tempJoint.orientation.z, tempJoint.orientation.w);
                        D3DXQUATERNION tempWeightPos = D3DXQUATERNION(tempWeight.pos.x, tempWeight.pos.y, tempWeight.pos.z, 0.0f);

                        // We will need to use the conjugate of the joint orientation quaternion
                        // To get the conjugate of a quaternion, all you have to do is inverse the x, y, and z
                        D3DXQUATERNION tempJointOrientationConjugate = D3DXQUATERNION(-tempJoint.orientation.x, -tempJoint.orientation.y, -tempJoint.orientation.z, tempJoint.orientation.w);

                        // Calculate vertex position (in joint space, eg. rotate the point around (0,0,0)) for this weight using the joint orientation quaternion and its conjugate
                        // We can rotate a point using a quaternion with the equation "rotatedPoint = quaternion * point * quaternionConjugate"
                        D3DXVECTOR3 rotatedPoint;
                        D3DXQUATERNION temp;

                        D3DXQuaternionMultiply(&temp, &tempJointOrientation, &tempWeightPos);
                        D3DXQuaternionMultiply(&temp, &temp, &tempJointOrientationConjugate);

                        rotatedPoint.x = temp.x;
                        rotatedPoint.y = temp.y;
                        rotatedPoint.z = temp.z;

                        // Now move the verices position from joint space (0,0,0) to the joints position in world space, taking the weights bias into account
                        // The weight bias is used because multiple weights might have an effect on the vertices final position. Each weight is attached to one joint.
                        tempVert.pos.x += ( tempJoint.pos.x + rotatedPoint.x ) * tempWeight.bias;
                        tempVert.pos.y += ( tempJoint.pos.y + rotatedPoint.y ) * tempWeight.bias;
                        tempVert.pos.z += ( tempJoint.pos.z + rotatedPoint.z ) * tempWeight.bias;

                        // Basically what has happened above, is we have taken the weights position relative to the joints position
                        // we then rotate the weights position (so that the weight is actually being rotated around (0, 0, 0) in world space) using
                        // the quaternion describing the joints rotation. We have stored this rotated point in rotatedPoint, which we then add to
                        // the joints position (because we rotated the weight's position around (0,0,0) in world space, and now need to translate it
                        // so that it appears to have been rotated around the joints position). Finally we multiply the answer with the weights bias,
                        // or how much control the weight has over the final vertices position. All weight's bias effecting a single vertex's position
                        // must add up to 1.
                    }

                    subset.positions.push_back(tempVert.pos);           // Store the vertices position in the position vector instead of straight into the vertex vector
                    // since we can use the positions vector for certain things like collision detection or picking
                    // without having to work with the entire vertex structure.
                }

                // Put the positions into the vertices for this subset
                for(int i = 0; i < subset.vertices.size(); i++)
                {
                    subset.vertices[i].pos = subset.positions[i];
                }

                //*** Calculate vertex normals using normal averaging 
                vector<D3DXVECTOR3> tempNormal;

                //normalized and unnormalized normals
                D3DXVECTOR3 unnormalized = D3DXVECTOR3(0.0f, 0.0f, 0.0f);

                //Used to get vectors (sides) from the position of the verts
                float vecX, vecY, vecZ;

                //Two edges of our triangle
                D3DXQUATERNION edge1 = D3DXQUATERNION(0.0f, 0.0f, 0.0f, 0.0f);
                D3DXQUATERNION edge2 = D3DXQUATERNION(0.0f, 0.0f, 0.0f, 0.0f);

                //Compute face normals
                for(int i = 0; i < subset.numTriangles; ++i)
                {
                    //Get the vector describing one edge of our triangle (edge 0,2)
                    vecX = subset.vertices[subset.indices[(i*3)]].pos.x - subset.vertices[subset.indices[(i*3)+2]].pos.x;
                    vecY = subset.vertices[subset.indices[(i*3)]].pos.y - subset.vertices[subset.indices[(i*3)+2]].pos.y;
                    vecZ = subset.vertices[subset.indices[(i*3)]].pos.z - subset.vertices[subset.indices[(i*3)+2]].pos.z;       
                    edge1 = D3DXQUATERNION(vecX, vecY, vecZ, 0.0f); //Create our first edge

                    //Get the vector describing another edge of our triangle (edge 2,1)
                    vecX = subset.vertices[subset.indices[(i*3)+2]].pos.x - subset.vertices[subset.indices[(i*3)+1]].pos.x;
                    vecY = subset.vertices[subset.indices[(i*3)+2]].pos.y - subset.vertices[subset.indices[(i*3)+1]].pos.y;
                    vecZ = subset.vertices[subset.indices[(i*3)+2]].pos.z - subset.vertices[subset.indices[(i*3)+1]].pos.z;     
                    edge2 = D3DXQUATERNION(vecX, vecY, vecZ, 0.0f); //Create our second edge

                    //Cross multiply the two edge vectors to get the un-normalized face normal
                    unnormalized.x = (edge1.y * edge2.z) - (edge1.z * edge2.y);
                    unnormalized.y = (edge1.z * edge2.x) - (edge1.x * edge2.z);
                    unnormalized.z = (edge1.x * edge2.y) - (edge1.y * edge2.x);

                    tempNormal.push_back(unnormalized);
                }

                //Compute vertex normals (normal Averaging)
                D3DXQUATERNION normalSum = D3DXQUATERNION(0.0f, 0.0f, 0.0f, 0.0f);
                int facesUsing = 0;
                float tX, tY, tZ;   //temp axis variables

                //Go through each vertex
                for(int i = 0; i < subset.vertices.size(); ++i)
                {
                    //Check which triangles use this vertex
                    for(int j = 0; j < subset.numTriangles; ++j)
                    {
                        if(subset.indices[j*3] == i ||
                            subset.indices[(j*3)+1] == i ||
                            subset.indices[(j*3)+2] == i)
                        {
                            tX = normalSum.x + tempNormal[j].x;
                            tY = normalSum.y + tempNormal[j].y;
                            tZ = normalSum.z + tempNormal[j].z;

                            normalSum = D3DXQUATERNION(tX, tY, tZ, 0.0f);   //If a face is using the vertex, add the unormalized face normal to the normalSum

                            facesUsing++;
                        }
                    }

                    //Get the actual normal by dividing the normalSum by the number of faces sharing the vertex
                    normalSum = normalSum / facesUsing;

                    //Normalize the normalSum vector
                    D3DXVECTOR3 temp;
                    temp.x = normalSum.x;
                    temp.y = normalSum.y;
                    temp.z = normalSum.z;

                    D3DXVec3Normalize(&temp, &temp);

                    //Store the normal and tangent in our current vertex
                    subset.vertices[i].normal.x = -temp.x;
                    subset.vertices[i].normal.y = -temp.y;
                    subset.vertices[i].normal.z = -temp.z;

                    //Clear normalSum, facesUsing for next vertex
                    normalSum = D3DXQUATERNION(0.0f, 0.0f, 0.0f, 0.0f);
                    facesUsing = 0;
                }

                // Create index buffer
                D3D10_BUFFER_DESC indexBufferDesc;
                ZeroMemory( &indexBufferDesc, sizeof(indexBufferDesc) );

                indexBufferDesc.Usage = D3D10_USAGE_DEFAULT;
                indexBufferDesc.ByteWidth = sizeof(DWORD) * subset.numTriangles * 3;
                indexBufferDesc.BindFlags = D3D10_BIND_INDEX_BUFFER;
                indexBufferDesc.CPUAccessFlags = 0;
                indexBufferDesc.MiscFlags = 0;

                D3D10_SUBRESOURCE_DATA iinitData;

                iinitData.pSysMem = &subset.indices[0];
                device->CreateBuffer(&indexBufferDesc, &iinitData, &subset.indexBuff);

                //Create Vertex Buffer
                D3D10_BUFFER_DESC vertexBufferDesc;
                ZeroMemory( &vertexBufferDesc, sizeof(vertexBufferDesc) );

                vertexBufferDesc.Usage = D3D10_USAGE_DYNAMIC;                           // We will be updating this buffer, so we must set as dynamic
                vertexBufferDesc.ByteWidth = sizeof( Vertex ) * subset.vertices.size();
                vertexBufferDesc.BindFlags = D3D10_BIND_VERTEX_BUFFER;
                vertexBufferDesc.CPUAccessFlags = D3D10_CPU_ACCESS_WRITE;               // Give CPU power to write to buffer
                vertexBufferDesc.MiscFlags = 0;

                D3D10_SUBRESOURCE_DATA vertexBufferData; 

                ZeroMemory( &vertexBufferData, sizeof(vertexBufferData) );
                vertexBufferData.pSysMem = &subset.vertices[0];

                HRESULT hr;

                hr = device->CreateBuffer( &vertexBufferDesc, &vertexBufferData, &subset.vertBuff);

                // Push back the temp subset into the models subset vector
                MD5Model.subsets.push_back(subset);

        if(eof == true){
            break;
        }

    i=i;

        }

    fin.clear();
    fin.close();

    return true;
} 
```

这里还有另一个代码：（这里有问题！）

```
bool ModelClass::LoadModel(char* filename)
{
    ifstream fin;
    char input;
    int i;

    // Open the model file.
    fin.open(filename);

    // If it could not open the file then exit.
    if(fin.fail())
    {
        return false;
    }

    // Read up to the value of vertex count.
    fin.get(input);
    while(input != ':')
    {
        fin.get(input);
    }

    // Read in the vertex count.
    fin >> m_vertexCount;

    // Set the number of indices to be the same as the vertex count.
    m_indexCount = m_vertexCount;

    // Create the model using the vertex count that was read in.
    m_model = new ModelType[m_vertexCount];
    if(!m_model)
    {
        return false;
    }

    // Read up to the beginning of the data.
    fin.get(input);
    while(input != ':')
    {
        fin.get(input);
    }
    fin.get(input);
    fin.get(input);

    // Read in the vertex data.
    for(i=0; i<m_vertexCount; i++)
    {

            ///////////// HERE IS THE PROBLEM!! //////////////

        fin >> m_model[i].x >> m_model[i].y >> m_model[i].z;
        fin >> m_model[i].tu >> m_model[i].tv;
        fin >> m_model[i].nx >> m_model[i].ny >> m_model[i].nz;
    }

    // Close the model file.
    fin.close();

    return true;
} 
```

我测试了放置断点，问题就在那里（上图）。

如果我这样做：

```
// Read in the vertex data.
for(i=0; i<m_vertexCount; i++)
{
            char a;

    fin >> a;
} 
```

它有效......但我不知道为什么我这样做：

```
// Read in the vertex data.
for(i=0; i<m_vertexCount; i++)
{
            float f;  // or int, but float is what I want

    fin >> f;
} 
```

砰，堆腐败！

如上所述，两个代码都可以正常工作。

对不起，我的英语不好。

如果有人可以提供帮助，因为这让我很烦......：D

* * *

Obs：如果我切换顺序都可以工作（那些代码）并且不会发生堆损坏

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T21:16:58.247

我在“AnimationModelClass”的声明中找到了问题的原因：

```
class AnimationModelClass
{
private:

    struct Vertex   //Overloaded Vertex Structure
    {
    Vertex(){}
    Vertex(float x, float y, float z,
    float u, float v,
    float nx, float ny, float nz,
    float tx, float ty, float tz)
    : pos(x,y,z), texCoord(u, v), normal(nx, ny, nz),
    tangent(tx, ty, tz){}

    D3DXVECTOR3 pos;
    D3DXVECTOR2 texCoord;
    D3DXVECTOR3 normal;
    D3DXVECTOR3 tangent;
    D3DXVECTOR3 biTangent;

    int StartWeight;
    int WeightCount;

    };

    struct Joint
    {
        string name;
        int parentID;

        D3DXVECTOR3 pos;
        D3DXVECTOR4 orientation;
    };

    struct Weight
    {
        int jointID;
        float bias;
        D3DXVECTOR3 pos;
    };

    struct ModelSubset
    {
        int texArrayIndex;
        int numTriangles;
        int numVertices;
        int numWeights;
        string fileNamePath;

        Vertex* m_vertices;
        DWORD* m_indices;
        Weight* m_weights;

        D3DXVECTOR3* m_positions;

        ID3D10Buffer* vertBuff; 
        ID3D10Buffer* indexBuff;
    };

    struct Model3D
    {
        int version;
        int numSubsets;
        int numJoints;

        Joint* m_joints;
        ModelSubset* m_subsets;
    };

private:

    wstring textureNamePath;

public:

    AnimationModelClass();
    AnimationModelClass(const AnimationModelClass&);
    ~AnimationModelClass();

    bool Initialize(ID3D10Device*);
    bool LoadModel(ID3D10Device*, wstring);
    bool render(ID3D10Device*);

private:

    bool LoadMD5Model(ID3D10Device*, wstring);

private:

    D3DXMATRIX* m_smilesWorld;
    Model3D* MD5Model;

    ID3D10Device* m_device;

}; 
```

我意识到我没有使用变量“textureNamePath”并决定删除它，然后一切都开始工作了。

我不知道为什么会这样，但是，它已经解决了！

# wpf - 我可以使用 WPF System.Windows.Controls.DataVisualization.Charting 绘制 OHLC 或烛台吗？

> ID：14057593
> 
> 赞同：1
> 
> 时间：2012-12-27T16:08:26.553
> 
> 标签：wpf, .net-4.0, charts, .net-4.5, wpftoolkit

我需要在 WPF 应用程序中快速而肮脏的 OHLC 或烛台图。我​​可以为此使用 System.Windows.Controls.DataVisualization.Charting 吗？有没有一个快速启动的例子？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T17:02:59.823

WPF Toolkit 没有开箱即用的此类图表，但您可以尝试搜索一些自定义实现。例如，此实现可能是您所需要的：[Candlestick Based off WPF Toolkit](http://www.codeproject.com/Articles/294704/Candlestick-based-off-WPF-Toolkit)

也有人问过类似的问题，您也可以看看：[对于 WPF，免费烛台示例？](https://stackoverflow.com/questions/5834144/for-wpf-free-candlestick-example)

# javascript - Javascript 无法从 HTML 中提取文本

> ID：14057596
> 
> 赞同：1
> 
> 时间：2012-12-27T16:08:52.747
> 
> 标签：javascript, html, text, extraction

我做了这个来尝试提取文本。

```
<script type = "text/javascript">
function extractText(node){
    var all = "";
    for (node=node.firstChild;node;node=node.nextSibling){
        alert(node.nodeValue + " = " + node.nodeType);
        if (node.nodeType == 3){
            all += node.nodeValue   
        }
    }
    alert(all);
}
</script> 
```

它位于 html 文档的头部。身体看起来是这样的……

```
<body onload = "extractText(document.body)">
Stuff
<b>text</b>
<script>
var x = 1;
</script>
</body> 
```

问题是`alert(all);`唯一显示**"Stuff"**，它添加了一堆我在做`alert(node.nodeValue + " = " + node.nodeType);`. 它说 null = 3 几次。谁能告诉我为什么这不能正常工作？提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-27T16:19:46.317

如果您想要文档中的文本，您可能需要查看递归调用。但是，如果您不关心孩子，请删除以下第一个`if (node.hasChildNodes()){}`条件：

```
function extractText(node){
    var txt = '';
    // recursive exploration and option to uncomment the check for a <script>
    // <script>s will have children as the the actual portion being executed
    // is considered a text node (nodeType===3)
    if (node.hasChildNodes()/* && node.nodeName !== 'SCRIPT'*/){
        for (var c = 0; c < node.childNodes.length; c++){
            txt += extractText(node.childNodes[c]);
        }
    }else if(node.nodeType===3){
        txt += node.textContent;
    }
    return txt;
}
alert(extractText(document.body)); 
```

此外，您可能想抢占先机[`textContent`](https://developer.mozilla.org/en-US/docs/DOM/Node.textContent)，`nodeValue`但这是您的决定。您还可以更细化并测试 if 是否[`nodeName`](https://developer.mozilla.org/en-US/docs/DOM/Node.nodeName)为 a`SCRIPT`并忽略 if （如果您选择了），但我会让您做出决定。

跟进：这是一个你可以玩的小提琴，带有`<script>`测试注释和可选的空格删除：http: [//jsfiddle.net/KZuk5/2/](http://jsfiddle.net/KZuk5/2/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-27T16:16:22.330

有不同类型的节点——具体来说，我们正在研究两种，一个文本节点和一个 HTML 节点。文本节点是一个对象，并且有一个名为`nodeValue`（您正在正确访问）的属性。但是，HTML 节点没有该`nodeValue`属性（或者更确切地说，它被设置为`null`）。

要获取 HTML 节点的内部值，请使用`.innerHTML`.

# java - 班级设计中的责任委派

> ID：14057599
> 
> 赞同：2
> 
> 时间：2012-12-27T16:09:06.020
> 
> 标签：java, oop

我在这里遇到一种情况，我希望验证什么是更好的（设计）方法。

假设我有一个包含/实例化“XObject”实例集合的类“XController”。而且，我有一个负责实例化 XController 的客户端。

现在，如果我希望对实例化的 XObjects 做一些事情，推荐以下哪一项：

# 方法一：

```
XController x = new XController(); // do something in the constructor to create XObjects with ids, x1, x2, so on...

x.doStuff(x1); // which does some stuff with the XObject with id 'x1' 
```

# 方法二：

```
XController x = new XController(); // do something in the constructor to create XObjects with ids, x1, x2, so on...

XObject xObj1 = x.getXObject(x1); 
xObj1.doStuff(); // which does some stuff with(in) itself 
```

## 笔记：

*   控制器在 doStuff() 之前/之后并没有真正做任何事情。
*   doStuff() 的实现通常只会更新该对象的状态。

任何关于为什么一个比另一个更好的参考都受到高度赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T17:49:31.410

首先，这是相当抽象的，所以只能猜测代码的意图。

这两种方法几乎是同一回事。在这两种情况下，消费代码都在告诉 x1 做一些事情。**您应该使用方法#2**，因为看起来消费代码是知道它有一个 x1 并且它希望 x1 做某事的实体。有一个原则叫**[信息专家](http://javaobsession.wordpress.com/grasp/)**；只有知道如何做某事的代码才应该是做这件事的代码。

如果您使用方法#1，您似乎所做的只是让另一个类负责调用一个对象，而消费代码已经知道应该调用它。事实上，如果消费者知道调用 x1.DoStuff()，为什么要把它交给其他东西并要求它做那件事呢？

话虽如此，这里还是缺少很多变量：控制器是否总是在对每个对象调用 DoStuff() 之前做一些事情？调用 DoStuff() 后控制器是否执行某些操作？调用 DoStuff() 会改变控制器中任何东西的状态吗？ETC...

在有更多细节之前，这是我能给你的最好的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T17:51:46.450

在不知道更多细节的情况下很难说。

但是如果调用代码现在不需要关于 XObject 的任何内容，那么第一个解决方案可能会更好，因为它们由 XController 包装。这样，如果需要，可以在不影响调用者的情况下更改 XObject。

如果您想更详细地描述您要编写的代码，则可以提供更好的建议。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-27T21:44:29.783

虽然没有提供足够的信息，但仅根据所提供的内容，第二种方法比第一种方法更好。因为，如果您想对 XObject 执行操作，通过中介（XController）执行此操作违反 OOP（封装等）原则，并且不必要地使代码复杂（它将工作单元分散在多个位置）。

此外，您在这里称为 Controller 的东西似乎是一种 Repositofy - 您向其提供某种 ID 并为您提供对象。这也是为什么在 XController 中对 XObject 执行“东西”可能不是一个好主意的另一个原因。

# css - CSS中的前导与行高

> ID：14057600
> 
> 赞同：3
> 
> 时间：2012-12-27T16:09:13.417
> 
> 标签：css

所以在传统的页面布局程序中，当你做前导时，它不会影响段落的第一行。但是，如果你在 CSS 中使用 line-height，无论你的数字是多少，都会影响第一行。有没有办法模仿 CSS 中的桌面领先？基本上，我只想让 line-height 应用于后续行，而不是第一行。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T16:12:28.627

您可以尝试以下方法：

```
.class {
    line-height: 1.5;
}
.class::first-line {
    line-height: 1;
}

/* If legacy browsers must be supported */
.class:first-line { 
    line-height: 1;
} 
```

[https://developer.mozilla.org/en-US/docs/CSS/::first-line](https://developer.mozilla.org/en-US/docs/CSS/::first-line)

[http://reference.sitepoint.com/css/pseudoelement-firstline](http://reference.sitepoint.com/css/pseudoelement-firstline)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-12T12:57:04.493

我想到了。我可以通过设置负边距顶部来执行传统的“领先”，如下所示：

```
h3 { 
color: #fff;
font-weight: normal;
padding-bottom: 0px;
font-size: 24px;
line-height: 22px;
margin-top:-1px;
} 
```

# ruby-on-rails - Rails：路由错误

> ID：14057601
> 
> 赞同：1
> 
> 时间：2012-12-27T16:09:16.180
> 
> 标签：ruby-on-rails, routes

rails generate 脚手架控制器 sportler name:string
rails generate model einheit ... sportler_id:integer

**/app/controllers/sportlers_controller.rb**
..
def add_einheit
sportler = Sportler.find(params[:id])
@einheit = Einheit.new(:sportler => sportler)
渲染 :template => "einheits/edit"
end
..

**/app/views/sportles/index.html.erb** - 当我将此源代码剪切到路由错误下方时，
不再出现

..

```
<td><br>
  <%= link_to "Trainingseinheit hinzufügen", :action => "add_einheit", :id => sportler %><br>
</td><br> 
```

..

**路线.rb**

FITAPP2::Application.routes.draw 做
资源 :sportlers

**路由错误**

没有路线匹配 {:action=>"add_einheit", :id=>#groesse: "3", created_at: "2012-12-27 15:56:04", updated_at: "2012-12-27 15:56: 04">,
:controller=>"sportlers"}
尝试运行 rake 路线以获取有关可用路线的更多信息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T16:21:23.150

由于路由错误建议您应该“尝试运行**rake 路由**以获取有关可用路由的更多信息。” 关键是您显然没有为 add_einheit 方法指定路由规则

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-28T18:40:31.237

我采用了 Kaders 解决方案。它起作用了，但现在我遇到了下一个路由错误。action => sportlers/update_einheit 不起作用。我不明白原理。

FITAPP2::Application.routes.draw 做资源 :sportlers do member do get "add_einheit" **get "update_einheit"** end end end

我尝试使用第二个条目 get update_einheit 扩展上面的路线 - 它确实功能路由错误

没有路由匹配 {:action=>"update_einheit", :id=>#, :controller=>"sportlers"} 尝试运行 rake 路由以获取有关可用路由的更多信息。

耙路线：

add_einheit_sportler GET /sportlers/:id/add_einheit(.:format) 运动者

# add_einheit

update_einheit_sportler GET /sportlers/:id/update_einheit(.:format) 运动者

# update_einheit

```
 sportlers GET    /sportlers(.:format)                    sportlers 
```

# 指数

```
 POST   /sportlers(.:format)                    sportlers 
```

# 创造

```
 new_sportler GET    /sportlers/new(.:format)                sportlers 
```

# 新的

```
 edit_sportler GET    /sportlers/:id/edit(.:format)           sportlers 
```

# 编辑

```
 sportler GET    /sportlers/:id(.:format)                sportlers 
```

# 节目

```
 PUT    /sportlers/:id(.:format)                sportlers 
```

# 更新

```
 DELETE /sportlers/:id(.:format)                sportlers 
```

# 破坏

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-27T23:12:10.257

你确定你在sportlers view文件夹下有一个html文件，比如view/sportlers/add_einheit.html.erb？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-27T16:21:16.973

```
resources :sportlers 
```

此代码将仅创建有关 CRUD 操作的路由（创建、新建、编辑、更新 vss...） 使用“add_einheit”操作编辑 routes.rb ；

```
resources :sportlers do
    member do
        get "add_einheit"
    end
end 
```

如果您发送像“id”这样的参数，请使用“member do”，否则在您的 routes.rb 文件中使用“collection do”。

# maven - ANTLR：“动态”测试台成语？

> ID：14057604
> 
> 赞同：1
> 
> 时间：2012-12-27T16:09:36.820
> 
> 标签：maven, antlr

我正在使用 Netbeans 7.1.1 和带有 ANTLR Maven 插件的 Maven 项目来生成 Lexer+Parser Java 类 - 这很有效。

我正在努力解决的问题：

如何在同一个项目中构建测试平台，以便在开发时找到 Lexer 和 Parser 类？

是否有一种 Maven 方式来指定：首先构建“生成的源代码”（即 Antlr 生成的）然后是我的“手动”源代码？

我应该建立一个依赖于第一个项目的辅助 Maven 项目吗？

是否存在用于构建 ANTLR 测试平台类的“通用”（动态？）机制，而 Parser/Lexer 类中并不存在？（'ClassForName' JDBC 风格的机制？）

澄清问题；这是我的 Test Rig 类的一个片段，它是不可编译的（由于 Lexer / Parsers 尚未构建......）：

```
...
    myLexer lexer = new myLexer(input);
    CommonTokenStream tokens = new CommonTokenStream(lexer);
    myParser parser = new myParser(tokens);
    parser.file();
... 
```

好的 - 在下面的建议和仔细检查生成的 java 之后 - 事实上我没有注意到我的语法文件（虽然布局在 java 包结构中）不包含 @header 指令来指定生成的目标 java 项目住的班级。

这就是我的测试（或者实际上是我的主程序）无法看到 Lexer/Parser 类的原因。（我只是试图访问与我想象的不同包结构的java类）。

另一个 StackOverFlow 案例对我来说是最后的决定：

[如何为 ANTLR 指定目标包？](https://stackoverflow.com/questions/1655854/how-to-specify-a-target-package-for-antlr)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T17:05:54.503

最重要的是像这样正确配置 antlr3-maven-plugin：

```
 <plugin>
    <groupId>org.antlr</groupId>
    <artifactId>antlr3-maven-plugin</artifactId>
    <version>3.4</version>
    <executions>
      <execution>
        <goals>
          <goal>antlr</goal>
        </goals>
      </execution>
    </executions>
  </plugin> 
```

此外，将语法放入正确的位置**src/main/antlr3**加上包名。通过使用它，语法将从它生成 java 代码，并且还将确保编译源代码。我[在一个小项目中使用了我自己的 ANTLR，你可以看看这个例子](https://github.com/khmarbaise/sapm/)。您还可以看到[使用生成的 parser 的单元测试示例](https://github.com/khmarbaise/sapm/blob/master/src/test/java/com/soebes/subversion/sapm/AccessRulesGroupGroupFromConfigFileTest.java)。

# ocaml - Ocaml lwt 符号

> ID：14057612
> 
> 赞同：2
> 
> 时间：2012-12-27T16:09:55.540
> 
> 标签：ocaml

关于 Ocaml Lwt 中此符号含义的任何建议：

```
>>= 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-27T17:13:33.753

请参阅 api[手册](http://ocsigen.org/lwt/api/Lwt)：

> val 绑定：'at -> ('a -> 'bt) -> 'bt
> 
> bind tf 是一个线程，它首先等待线程 t 终止，然后，如果线程成功，则表现为函数 f 对 t 的返回值的应用。如果线程 t 失败，则 bind tf 也会失败，但同样例外。
> 
> t >>= f 是 bind t f 的另一种表示法。

# python - Python 参数中的空格

> ID：14057614
> 
> 赞同：1
> 
> 时间：2012-12-27T16:10:08.117
> 
> 标签：python

几天前才开始学习 Python。

例如，当我键入参数时，`print "Hello, World"`是否有理由为什么我应该（或不应该）`print`在字符串和字符串之间放置一个空格？或者如果我想要变量，我应该在,等`name = raw_input ("name?")`之间有一个 spave吗？没有它似乎可以正常工作，但我不想开始养成将来会咬我的坏习惯。`name``=``raw_input`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-27T16:13:36.370

Python 确实有自己的风格指南（PEP 8），绝对值得您花时间阅读它。至于你说的：

```
 More than one space around an assignment (or other) operator to align it with another.

    x = 1
    y = 2
    long_variable = 3 
```

更多信息：http: [//www.python.org/dev/peps/pep-0008/#whitespace-in-expressions-and-statements](http://www.python.org/dev/peps/pep-0008/#whitespace-in-expressions-and-statements)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-27T16:13:11.047

Python 代码有一个样式指南 - PEP 8。空格用于增强可读性。您应该专门看一下[Whitespace in Expressions and Statements](http://www.python.org/dev/peps/pep-0008/#whitespace-in-expressions-and-statements)，它基本上说“是的，添加一个空格，但只有一个”。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-27T16:38:48.963

例如：

```
print"What's ur name?"
name=raw_input("Name: ")
print"Ok your name is %s."%name 
```

上面的代码可以正常工作。没有错误。但请阅读代码。它看起来不太好，可读性水平较低。而且，如果您编写大量这样的代码，下次阅读时会让您头晕目眩。

同样的代码写成：

```
print "What's ur name?"
name = raw_input("Name: ")
print "Ok your name is %s" % name 
```

这使代码更具可读性并且看起来更好。
因此，您的问题的答案是，它使您的代码有条理并且对您和其他人可读。

# php - 从 PHP 执行时在 WinSCP 命令行中转义空格

> ID：14057618
> 
> 赞同：2
> 
> 时间：2012-12-27T16:10:40.933
> 
> 标签：php, command-line, exec, winscp

我有一个应该是一个简单的问题。我正在尝试在 PHP 中执行以下代码。此代码的目标是使用名为 WinSCP 的程序将文件从一个文件夹上传到 FTP 中的另一个文件夹。

```
exec("C:\\xampp\\winscp.com backup /command \"option confirm off\" \"put C:\\big boy\\Documents\\dev notes\\\" \"exit\""); 
```

文件没有被传输，我认为我遇到的问题是因为我的目录中的空间`big boy`和`dev notes`位置。我尝试在以下之间添加另一个双引号：

```
C:\\big boy\\Documents\\dev notes\\\ 
```

但它没有用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-27T16:20:03.707

让我们首先把这一切带到地球上一点点。以下行：

```
exec("C:\\xampp\\upload.exe backup /command \"option confirm off\" \"put C:\\big boy\\Documents\\dev notes\\\" \"exit\""); 
```

您主要对命令的实际字符串感兴趣，让我们回顾一下：

```
C:\xampp\upload.exe backup /command "option confirm off" ⤦ 
⤥"put C:\big boy\Documents\dev notes\" "exit" 
```

因为它现在应该对您明显可见，所以这不是 shell 中的有效命令。`upload.exe`请查阅有关必须以哪种格式`/command`传递开关值的文档。

由于您没有提供任何参考`upload.exe`，因此我无法在这里给出更具体的建议。然而，处理这些问题的一种常见方法是首先将命令分配给一个变量，然后执行它。这允许显示调试信息，然后可以轻松修复问题：

```
$command = "C:\\xampp\\upload.exe backup /command \"option confirm off\" \"put C:\\big boy\\Documents\\dev notes\\\" \"exit\"";
exec($command); 
```

可能只是（仅猜测，这就是它的工作方式`cmd /k`）：

```
$command = 'C:\xampp\upload.exe backup /command ""option confirm off" ⤦ 
⤥"put "c:\big boy\Documents\dev notes\" "exit""'; 
```

* * *

***编辑：***现在你写它实际上是`winscp.com`命令，我假设：

```
$command = 'C:\xampp\upload.exe backup /command "option confirm off" ⤦ 
⤥"put ""c:\big boy\Documents\dev notes\""" "exit"'; 
```

遵循以下规则：

*   如果每个命令`"`包含空格，则必须将其括在引号中。

    ```
    option confirm off
    "option confirm off" 
    ```

*   如果命令还包含`"`引号，则必须加倍`""`

    ```
    put "c:\big boy\Documents\dev notes\"
    "put ""c:\big boy\Documents\dev notes\""" 
    ```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-27T16:11:59.507

像这样在它周围加上单引号：

```
exec("cd 'C:\\Program Files'"); 
```

# css - 使用 @font-face src: local with fonts.com web fonts

> ID：14057619
> 
> 赞同：2
> 
> 时间：2012-12-27T16:10:48.780
> 
> 标签：css, font-face, webfonts

[正如这里](https://gist.github.com/3890040)所讨论的，负担得起的 fonts.com 网络字体计划不允许通过 直接嵌入字体`@font-family`，或者看起来......

我想知道这是否可行：

```
@font-face {
    font-family: 'Main';
    src: local('FoobarBk'), local('FoobarBk Regular');
    font-weight: normal;
    font-style: normal;
}

@font-face {
    font-family: 'Main';
    src: local('FoobarMd'), local('FoobarMd Regular');
    font-weight: bold;
    font-style: normal;
}

@font-face {
    font-family: 'Main';
    src: local('FoobarIt'), local('FoobarIt Regular');
    font-weight: normal;
    font-style: italic;
}

@font-face {
    font-family: 'Main';
    src: local('FoobarMdIt'), local('FoobarMdIt Regular');
    font-weight: normal;
    font-style: normal;
} 
```

这个想法是，一旦 fonts.com 提供的脚本完成加载 FoobarBk、FoobarMd、FoobarIt 和 FoobarMdIt 字体，它们将作为本地字体（无需额外的页面加载）和任何指定`Main`为的CSS 样式`font-family`将立即使用他们。

我怀疑这只是一厢情愿，但我更希望有人以一种或另一种方式回答。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-27T16:20:16.050

根据我的经验，这里的“本地”一词意味着用户将字体安装到他们的操作系统中，而不是它只是浏览器中的本地缓存文件。

对于您网站的新用户，您希望能够保证他们获得您的字体，因此通常“本地”字体指向不存在的引用，因此他们必须从您的 Web 服务器下载。这是为了防止用户使用与您的名称相同的 naff 字体，并且设计看起来很糟糕。

也可以在 SO 上查看[笑脸答案](https://stackoverflow.com/questions/3698319/css-font-face-what-does-src-local-mean)

如果您处于一个受控环境中，您知道您可以信任客户端安装的字体（即它们安装了所有`Foobar`变体），那么您的方法将起作用。

# c# - Asterisk.NET：当人类拿起电话时如何挂钩事件？

> ID：14057620
> 
> 赞同：1
> 
> 时间：2012-12-27T16:10:51.603
> 
> 标签：c#, voip, asterisk

当人类拿起电话（例如： open `Notepad`）时，我会立即添加动作。我应该使用哪个`event`？我尝试了很多，`events`但`ManagerConnection`找不到解决方案。

**编辑：**我将执行与屏幕截图相同的功能（当人们拿起电话时，做一些事情）。ADAT 程序有这个功能，也将有。

![在此处输入图像描述](../Images/6624e5399a1ac8ec5cfb836f928d7ebd.png)

**编辑2：**我找到了解决方案。示例代码：

订阅活动

```
managerConnection.NewState += new NewStateEventHandler(Monitoring_NewState);

    private void Monitoring_NewState(object sender, NewStateEvent e)
    {
        string state = e.State;
        string callerID = e.CallerId;
        if ((state == "Ringing") | (e.ChannelState == "5"))
        {
            String connectedLineNum;
            String connectedLineName;

            Dictionary<String, String> attributes = e.Attributes;

            attributes.TryGetValue("connectedlinenum", out connectedLineNum);
            attributes.TryGetValue("connectedlinename", out connectedLineName);
            // "callerID" - called phone number
            // "connectedLineNum" - calling phone number

            // CallIn. Incoming call
        }
        else if ((state == "Ring") | (e.ChannelState == "4"))
        {
            // CallOut. Outcoming call
        }
        else if ((state == "Up") | (e.ChannelState == "6"))
        {
            String connectedLineNum;
            String connectedLineName;

            Dictionary<String, String> attributes = e.Attributes;

            attributes.TryGetValue("connectedlinenum", out connectedLineNum);
            attributes.TryGetValue("connectedlinename", out connectedLineName);
            // "callerID" - called phone number
            // "connectedLineNum" - calling phone number

            // human lifted up the phone right now
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T17:49:39.670

当人类在 voip 的情况下拿起电话时，什么也没有发生。Voip/sip 是数字网络，如果没有任何反应（用户未输入电话号码），电话（客户端）不会分发服务器。存在一些带有自动拨号＃的客户端（用于电话卡公用电话安装），但大多数电话只是没有通知服务器（星号）该事件。结果，您无法在程序中获得此事件。

# objective-c - cocoa-touch 如何将字符串插入字符串中的特定长度位置

> ID：14057624
> 
> 赞同：0
> 
> 时间：2012-12-27T16:10:59.280
> 
> 标签：objective-c, cocoa-touch

```
NSString * myText = @"This is my really long text view";
NSUInterger textLenght = [myText length]; //NSLog 32 
```

如何在所选长度位置插入任何文本。例如，长度为 10？

我试过这个，但它不起作用！

```
NSRange textRange = [myText rangeOfComposedCharacterSequenceAtIndex:10];
[myText stringByReplacingCharactersInRange:textRange withString:@"NEW"]; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-27T16:13:26.920

分配它：

```
myText=[myText stringByReplacingCharactersInRange:textRange withString:@"NEW"]; 
```

一个 NSString 是不可变的，你不能改变它的字符，这就是为什么 stringByReplacingCharactersInRange 不会重新排列字符，而是返回另一个从头开始构建的字符串。

考虑使用[NSMutableString](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSMutableString_Class/Reference/Reference.html)：

```
NSMutableString * myText = [[NSMutableString alloc]initWithString: @"This is my really long text view"];
NSRange textRange = [myText rangeOfComposedCharacterSequenceAtIndex:10];
[myText replaceCharactersInRange: textRange withString:@"NEW"]; 
```

# osb - Oracle Service Bus 重试服务调出

> ID：14057628
> 
> 赞同：2
> 
> 时间：2012-12-27T16:11:36.240
> 
> 标签：osb, oracle-fusion-middleware

我是 Oracle OSB 的新手，我正在尝试调用服务，但如果调用失败，请重试该调用最多 N 次。如果它失败 N+1 次，我想记录发生的情况。

任何人都可以帮助我或建议我一些文件吗？

干杯

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-28T08:53:56.040

我认为您已经在 osb 控制台中创建了以下服务： 1\. 代理服务 2\. 业务服务

我认为您想尝试额外调用 N 次服务，这将使最后一次尝试作为第 (N+1) 次尝试或第 N 次重试。

[现在，对于重试机制，将业务服务传输配置中的](http://docs.oracle.com/cd/E13159_01/osb/docs10gr3/consolehelp/businessServices.html#wp1095605)重试计数设置为 N。

如果第 N 次重试失败，您将在代理服务中收到错误消息。假设您从代理服务的路由节点调用业务服务。在这种情况下，您可以在 RouteNode[错误处理](http://docs.oracle.com/cd/E13159_01/osb/docs10gr3/consolehelp/proxyerrors.html#wp1243530)程序中捕获错误。您可以在此处记录详细信息。

# c# - DrawLines 画了一条多余的不需要的线

> ID：14057629
> 
> 赞同：0
> 
> 时间：2012-12-27T16:11:38.960
> 
> 标签：c#, forms, gdi+

我的应用程序将点保存在一个数组中，然后调用`System.Drawing.Graphic.DrawLines(Pen, Point[])`以绘制连接这些点的线。它有效，但绘图线似乎总是在数组的第一个点和表单的左上角之间放置一条额外的线。

好的，等一下，我把样品弄得一团糟，尽快修复

代码示例：

```
Pen black = new Pen(Color.black, 2);
MyGraphicObject = Graphics.FromImage(picture);
Point[] linee = new Point[5];
public void check (int a, int b)
{         
     linee[0].X = (b) * 30 + 13;
     linee[0].Y = (a-1) * 30 + 13; 
     linee[1].X = (b+1) * 30 + 13;
     linee[1].Y = (a) * 30 + 13; 
     linee[2].X = (b) * 30 + 13;
     linee[2].Y = (a+1) * 30 + 13; 
     linee[3].X = (b-1) * 30 + 13;
     linee[3].Y = (a) * 30 + 13; 
     linee[4].X = (b) * 30 + 13;
     linee[4].Y = (a-1) * 30 + 13; 
     MyGraphicObject.DrawLines(black, linee);
} 
```

有问题的图片

![在此处输入图像描述](../Images/d4fd870d954868e8b5a3d50a10bdd5d3.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T16:21:03.567

[Graphics.DrawLines](http://msdn.microsoft.com/en-us/library/7ewkcdb3.aspx)方法：

> 绘制一系列连接端点数组的线。数组中的前两个点指定第一行。每个附加点指定一条线段的终点，其起点是前一条线段的终点。

我认为你在数组的开头或结尾都有一个额外的点，它是用默认值初始化的。可能的原因 - 您创建了长度为 N+1 的点数组（其中 N 是点数）。而且您没有为第一点或最后一点提供 X 和 Y。因此它保持默认`X = 0, Y = 0`

# ruby-on-rails - Elasticsearch 词条过滤器慢

> ID：14057631
> 
> 赞同：1
> 
> 时间：2012-12-27T16:11:40.947
> 
> 标签：ruby-on-rails, ruby, indexing, elasticsearch, tire

我们目前正在运行一个具有 2 个索引的 2 节点弹性搜索集群，它的性能非常好（750k 文档和 1110 万文档）。

我们现在正在尝试添加一个包含 3540 万个文档的新索引，但搜索性能很慢。一个术语过滤器大约需要 2 秒才能返回。

映射：

```
tire do
  mapping _routing: { required: true, path: :order_id } do
    indexes :id,            type: 'string', index: :not_analyzed
    indexes :order_id,      type: 'string', index: :not_analyzed

    [:first_name, :last_name, :company_name, :title, :email, :city, :state_region_province, :postal_code].each do |attribute|
      indexes attribute, type: 'string', analyzer: 'keyword'
    end

    indexes :metadata,      type: 'string'
    indexes :clicks,        type: 'integer', index: :not_analyzed, include_in_all: false
    indexes :view_count,    type: 'integer', index: :not_analyzed, include_in_all: false
    indexes :sender,        type: 'boolean', index: :not_analyzed, include_in_all: false
    indexes :bounced,       type: 'boolean', index: :not_analyzed, include_in_all: false
    indexes :unsubscribed,  type: 'boolean', index: :not_analyzed, include_in_all: false
  end
end 
```

搜索：

```
Model.tire.search(load: true, page: page, per_page: per_page, routing: order_id) do |search|
  search.query do
    match :metadata, query, type: 'phrase_prefix', max_expansions: 10
  end if query.present?

  search.filter :term, order_id: order_id
  search.filter :term, sender: false
end 
```

我正在做的搜索只是指定要过滤的 order_id；返回结果大约需要 2 秒。我该如何加快速度？

**编辑：** 我现在正在索引 user_id 并将其用作路由路径。我创建了一个包含 30 个分片的新索引来测试过度分配。

**编辑 2：** 使用 30 个分片，索引性能更高，但仍然需要一秒钟才能返回第一个查询的数据。我不确定如何加快速度或我做错了什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T20:26:38.320

如果您没有在查询中使用构面，我建议将您的查询转换为[过滤查询](http://www.elasticsearch.org/guide/reference/query-dsl/filtered-query.html)，并将术语过滤器从顶级移动到过滤查询中的过滤器。另请参阅[弹性查询的性能](https://stackoverflow.com/questions/14007078/performance-of-elastic-queries)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-27T17:01:11.120

如果将`order_id`字段分析切换为 会发生什么`:keyword`？从：

```
indexes :order_id,      type: 'string', index: :not_analyzed 
```

至：

```
indexes :order_id,      type: 'string', index: :keyword 
```

[文档](http://www.elasticsearch.org/guide/reference/index-modules/analysis/keyword-analyzer.html)说：

> 将整个流“标记”为单个标记的类型关键字分析器。这对于邮政编码、ID 等数据很有用。

这似乎适用于`order_id`.

# python - 是否可以获得类似于 kwargs(python) 的传入参数字典？

> ID：14057632
> 
> 赞同：3
> 
> 时间：2012-12-27T16:11:42.047
> 
> 标签：python, python-2.7

我目前正在创建这样的对象：

```
class Obj(object):
    def __init__(self,**kwargs):
        params = ['val1','val2','val3','val4',...]
        for p in params:
            setattr(self,p,kwargs.get(p,None)) 
```

我正在这样做，所以我不必这样做：

```
class Obj(object):
    def __init__(self,val1=None,val2=None,val3=None,val4=None,...):
        self.val1=val1
        self.val2=val2
        self.val3=val3
        self.val4=val4
        ... 
```

我的问题是，你能把两者混合起来吗？我可以在哪里定义预期的参数，但仍然循环参数来设置属性？我喜欢定义预期参数的想法，因为它是自我记录的，其他开发人员不必搜索使用了哪些 kwargs。

我知道这看起来很琐碎，但我正在从一些 XML 创建一个对象，所以我将传递许多参数，它只会使代码混乱并让我感到困惑。

我用谷歌搜索了这个但找不到任何东西，可能是因为字典和 kwargs 一起指向 kwarg 示例。

**更新：**更具体地说，是否可以获得传入参数的字典，所以**我根本不必使用 kwargs**？

须藤代码：

```
class Obj(object):
    def __init__(self,val1=None,val2=None,val3=None,val4=None,...):
        for k,v in dictionary_of_paramters.iteritems():
            setattr(self,k,v) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T16:28:49.290

您可以使用该`inspect`模块：

```
import inspect

def myargs(val1, val2, val3=None, val4=5):
        print inspect.currentframe().f_locals 
```

它显示了当前堆栈帧上所有可用的局部变量。

```
myargs('a','b')
==>  {'val3': None, 'val2': 'b', 'val1': 'a', 'val4': 5} 
```

（注意：不保证在所有 Python 解释器上都实现）

**编辑**：我同意这不是一个很好的解决方案。我会做的更像是：

```
def _yourargs(*names):
        "returns a dict with your named local vars"
        alllocs = inspect.stack()[1][0].f_locals
        return {n:alllocs[n] for n in names}

def askformine(val1, val2, val3=None, val4=5):
        "example to show just those args i'm interested in"
        print _yourargs('val1','val2','val3','val4')

class Obj(object):
        "example inserting some named args as instance attributes"
        def __init__(self, arg1, arg2=4):
                 self.__dict__.update(_yourargs('arg1','arg2')) 
```

**edit2**稍微好一点：

```
def pickdict(d,*names):
    "picks some values from a dict"
    return {n:d[n] for n in names}

class Obj(object):
    "example inserting some named args as instance attributes"
    def __init__(self, arg1, arg2=4):
        self.__dict__.update(pickdict(locals(),'arg1','arg2')) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-27T16:27:03.657

没有很好的方法来获取函数所有参数的字典。该`**kwargs`语法只收集额外的关键字参数，而不是与函数定义中的显式参数匹配的那些。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-27T16:29:46.333

尽管不使用 kwargs 或检查模块（请参阅其他答案），您将无法获取参数，但您可以执行以下操作...

```
class Obj(object):
    def __init__(self, **kwargs):
        self.__dict__.update(**kwargs) 
```

每个对象都有一个存储所有属性的字典，您可以通过`self.__dict__`. 然后，您只需使用[update](http://docs.python.org/2/library/stdtypes.html#dict.update)来设置该对象的内部字典中的所有属性。

有关此方法的一些讨论，请参阅[此问题。](https://stackoverflow.com/questions/9728243/is-self-dict-updatekwargs-good-or-poor-style)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-27T16:38:56.333

如果要在方法的最顶部获取 args dict，则在定义任何本地之前，这很简单：

```
class Obj(object):
    def __init__(self,val1=None,val2=None,val3=None,val4=None):
       kwargs = dict(locals()) 
```

稍后要阅读此字典，需要一些自省魔法：

```
class Obj(object):
    def __init__(self,val1=None,val2=None,val3=None,val4=None):

       # feel free to add more locals

       loc = dict(locals())
       fun = sys._getframe().f_code
       kwargs = {x:loc[x] for x in fun.co_varnames[:fun.co_argcount]} 
```

您还可以通过添加如下函数使后者可重用：

```
def getargs():
    f = sys._getframe(1)
    return {x:f.f_locals[x] for x in f.f_code.co_varnames[:f.f_code.co_argcount]} 
```

接着：

```
class Obj(object):
    def __init__(self,val1=None,val2=None,val3=None,val4=None):

       # feel free to add more locals

       kwargs = getargs() 
```

我猜这是特定于 cpython 的。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-27T16:51:50.250

一种丑陋的解决方法：将额外的参数注入 kwargs 并在要循环所有关键字参数的地方使用它（PS 这是检查模块的示例用法，但*不*建议用于生产使用）：

```
#!/usr/bin/env python

import inspect

def inject_defaults(func):
    """ injects '__defaults' key into into kwargs, 
        so it can be merged with kwargs in the decorated method """

    args, varargs, varkwargs, defaults = inspect.getargspec(func)
    have_defaults = args[-len(defaults):]
    defaults_dict = dict(zip(have_defaults, defaults))

    def fun(*args, **kwargs):
        kwargs['__defaults'] = defaults_dict
        return func(*args, **kwargs)

    return fun

@inject_defaults
def f1(a,b,c, x=1, **kwargs):
    kwargs.update(kwargs['__defaults'])
    del kwargs['__defaults']

    for k, v in kwargs.items():
        # here, x, y and z will appear
        print(k, v)

f1(1, 2, 3, y=3, z=2)
# prints
# ('y', 3)
# ('x', 1)
# ('z', 2) 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-27T16:24:37.863

是的，您可以将两者混合使用。见下文：

```
def method(a, b=1, *args, **kwargs):
    '''some code''' 
```

这是有效的。这里：

```
'a' is a required argument
'b' is a default argument
'args' will have all the non-keyword arguments and
'kwargs' will have all the keyword arguments. 
```

例子：

```
method(1,2,3,4,5,test=6,test1=7) 
```

此调用将具有：

```
a=1
b=2
args=(3,4,5)
kwargs={'test':6,'test1':7} 
```

# android - 模拟器没有安装应用程序

> ID：14057634
> 
> 赞同：0
> 
> 时间：2012-12-27T16:11:53.027
> 
> 标签：android, emulation

我是 android 开发人员的新手。我正在关注[http://developer.android.com/training/basics/firstapp/building-ui.html](http://developer.android.com/training/basics/firstapp/building-ui.html)。当我第一次在模拟器上运行简单的 hello world 应用程序时。现在我正在尝试运行下一个应用程序。应用程序未安装在模拟器上，即模拟器没有显示应用程序名称和应用程序图标。然后我从包资源管理器中删除了两个应用程序并重新启动笔记本电脑。然后我再次创建第二个应用程序并尝试安装在 emulator.Emulator 上再次没有显示应用程序。然后我尝试在模拟器上安装 hello world 应用程序，这也不起作用。我检查了最小值。android manifest.xml 中的 sdk 版本和目标 sdk 版本都是正确的。Hello 是第二个应用程序的项目名称。

控制台正在显示

```
[2012-12-28 21:23:21 - Hello] ------------------------------
[2012-12-28 21:23:21 - Hello] Android Launch!
[2012-12-28 21:23:21 - Hello] adb is running normally.
[2012-12-28 21:23:21 - Hello] Performing com.example.hello.MainActivity activity launch
[2012-12-28 21:23:21 - Hello] Automatic Target Mode: launching new emulator with compatible AVD 'Froyo'
[2012-12-28 21:23:21 - Hello] Launching a new emulator with Virtual Device 'Froyo'
[2012-12-28 21:23:21 - Emulator] Failed to load libGL.so
[2012-12-28 21:23:21 - Emulator] error libGL.so: cannot open shared object file: No such file or directory
[2012-12-28 21:23:21 - Emulator] Failed to load libGL.so
[2012-12-28 21:23:21 - Emulator] error libGL.so: cannot open shared object file: No such file or directory
[2012-12-28 21:23:21 - Emulator] emulator: emulator window was out of view and was recentered
[2012-12-28 21:23:21 - Emulator] 
[2012-12-28 21:23:21 - Hello] New emulator found: emulator-5554
[2012-12-28 21:23:21 - Hello] Waiting for HOME ('android.process.acore') to be launched...
[2012-12-28 21:23:28 - Hello] emulator-5554 disconnected! Cancelling 'com.example.hello.MainActivity activity launch'!
[2012-12-28 21:23:43 - Hello] ------------------------------
[2012-12-28 21:23:43 - Hello] Android Launch!
[2012-12-28 21:23:43 - Hello] adb is running normally.
[2012-12-28 21:23:43 - Hello] Performing com.example.hello.MainActivity activity launch
[2012-12-28 21:23:44 - Hello] Automatic Target Mode: launching new emulator with compatible AVD 'Froyo'
[2012-12-28 21:23:44 - Hello] Launching a new emulator with Virtual Device 'Froyo'
[2012-12-28 21:23:45 - Emulator] Failed to load libGL.so
[2012-12-28 21:23:45 - Emulator] error libGL.so: cannot open shared object file: No such file or directory
[2012-12-28 21:23:45 - Emulator] Failed to load libGL.so
[2012-12-28 21:23:45 - Emulator] error libGL.so: cannot open shared object file: No such file or directory
[2012-12-28 21:23:45 - Emulator] emulator: emulator window was out of view and was recentered
[2012-12-28 21:23:45 - Emulator] 
[2012-12-28 21:23:45 - Hello] New emulator found: emulator-5554
[2012-12-28 21:23:45 - Hello] Waiting for HOME ('android.process.acore') to be launched...
[2012-12-28 21:23:59 - Hello] emulator-5554 disconnected! Cancelling 'com.example.hello.MainActivity activity launch'! 
```

activity_mail.xml 的代码是

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="horizontal">

<EditText android:id="@+id/edit_message"
    android:layout_weight="1"
    android:layout_width="0dp"
    android:layout_height="wrap_content"
    android:hint="@string/edit_message"
    />

<Button android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="@string/button_send"/>

 </LinearLayout> 
```

string.xml 的代码是

```
<?xml version="1.0" encoding="utf-8"?>
<resources>
<string name="app_name">My First App</string>
<string name="edit_message">Enter a message</string>
<string name="button_send">Send</string>
<string name="menu_settings">Settings</string>
<string name="title_activity_main">MainActivity</string>
</resources> 
```

安装 libGL.so 后控制台不显示 Failed to load libGL.so [2012-12-28 21:23:45 - Emulator] 错误 libGL.so：无法打开共享对象文件：没有这样的文件或目录 [2012-12 -28 21:23:45 - Emulator] Failed to load libGL.so [2012-12-28 21:23:45 - Emulator] error libGL.so: cannot open shared object file: No such file or directory but still application won ,t 安装在模拟器上。

这是 hello 应用程序的 androidmanifest.xml 文件

```
 <?xml version="1.0" encoding="utf-8"?>
 <manifest xmlns:android="http://schemas.android.com/apk/res/android"
  package="com.example.second"
  android:versionCode="1"
   android:versionName="1.0" >

<uses-sdk
    android:minSdkVersion="8"
    android:targetSdkVersion="17" />

<application
    android:allowBackup="true"
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppTheme" >
    <activity
        android:name="com.example.second.Second"
        android:label="@string/app_name" android:icon="@drawable/ic_launcher"                android:theme="@style/AppBaseTheme" android:showOnLockScreen="true">
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
</application>

</manifest> 
```

带着敬意

杰伊

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T16:16:47.053

看起来您正在 Linux 上进行开发。您需要将一个工作 libGL.so 符号链接到您的 32 位 lib 目录中。这可以像“sudo ln -s /usr/lib/libGL.so.1 /usr/lib/libGL.so”一样简单。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T16:19:21.803

libGL.so 属于 Mesa libGL 运行时库。模拟器抱怨，因为它找不到 32 位 Mesa 库。为 i386 / i686 架构安装 Mesa：

# javascript - 从 twitter 搜索 API 中提取数据并使用 Jquery 在 HTML 上打印的说明

> ID：14057635
> 
> 赞同：0
> 
> 时间：2012-12-27T16:11:56.647
> 
> 标签：javascript, jquery, json, twitter

我对 javascript 和 jquery 很陌生。我正在制作一个需要来自 twitter 的数据的网络应用程序。这是我有的两个代码。第一个来自朋友，另一个是我的版本。现在我的版本不工作了。所以这是我的几个问题：

1) 在版本 1 中，为什么我们将 e 传递给函数？2) 为什么我们在 dataType 中使用“jsonp”？3）是什么让我的代码不起作用？

和

是什么让代码版本 1 工作？

**工作版本**

```
$('#input').submit(function(e){
    e.preventDefault();
    e.stopPropagation();
       var hashtag = $(this).find('input[name="hashtag"]').val();
        var twitterapi = "http://search.twitter.com/search.json?";
        jQuery.ajax({
          type: "GET",
          url: twitterapi,
          data: {
            "q": hashtag,
            "rpp": 1000
          },
          dataType: 'jsonp'
        }).done(function (response) {
          var results = response.results;
          for (var i = 0; i < results.length; i++) {
            $("#tweet").append("<p class='tweet'>" +
              "<span class='username'>" +
              results[i].from_user +
              "</span> <span class='tweet_content'> " +
              results[i].text + "</span></p>");
          }
        }); 
```

**我的版本**

```
var hashtag = $(this).find('input[name="hashtag"]').val();
        var twitterapi = "http://search.twitter.com/search.json?";
        var tweetspresent = results.length;
         jQuery.ajax(
         {
              type: "GET",
              url: twitterapi ,
              data: {"q": hashtag,"rpp":1000},
              dataType: 'jsonp',
            });
        }).done(function(results)
            {
               for(i=0;i<tweetspresent;i++)
                 {
                   $("#tweet").html("<p> Name: " + results[i].from_user + " - " + results[i].text + "</p>");
                 }
            });
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T16:32:14.690

1）“e”代表*事件*，在这种情况下，它是传递给函数的*提交*事件对象。[您可以在此处](http://www.w3schools.com/js/js_htmldom_events.asp)找到有关活动的更多信息。[这](http://api.jquery.com/event.preventDefault/)是一个更详细的解释，例如 preventDefault 方法的作用。

2) 当您使用来自不同域的 ajax 调用获取数据时（例如 your-website.com 执行从 twitter.com 获取数据的 javascript），我们说的是“跨域”请求。出于安全原因，这是不允许的。有几种方法可以解决这个问题。其中之一是[jsonp](http://en.wikipedia.org/wiki/JSONP)。使用原生支持[CORS](http://en.wikipedia.org/wiki/Cross-origin_resource_sharing)的较新浏览器，您不再需要使用 jsonp 类型。

3）你没有说什么不工作，所以首先使用console.log（变量）做一点调试（在现代浏览器中），检查你的完成回调是否被调用，如果是，记录响应以查看是什么结构（或更好地检查 twitter api）。

**编辑** 您不必将任何东西传递给`done`函数 - 这仅取决于您的需要。当您执行 jQuery.ajax 函数时，它将执行您告诉它执行的操作，并在完成时返回您可以进一步使用的对象。在您的情况下，您需要一种方法来访问从 Twitter 返回的数据。我强烈建议您多阅读 jQuery [ajax](http://api.jquery.com/jQuery.ajax/)。

# mercurial - 如何使用 Mercurial 重新定义不可变的变更集？

> ID：14057640
> 
> 赞同：5
> 
> 时间：2012-12-27T16:12:04.247
> 
> 标签：mercurial, rebase

我正在尝试重新调整我在本地机器上所做的一些更改。我收到错误：

```
abort: can't rebase immutable changeset 110e73ed65a4
(see hg help phases for details) 
```

即使在我改变了我正在重新设置的变更集的阶段之后，我也会得到同样的错误（并且阶段改变似乎是成功的）。使用：

```
hg phase -f -d REV 
```

我想知道历史记录中是否有一个我丢失并且仍然不可变的变更集，如果是这样，是否有一种方法可以通过一个命令将变更集历史记录中的所有变更集更改为可变。

或者，有没有办法强制变基，即使是不可变的变更集？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-30T06:07:10.097

对公开的更改进行变基被认为是一个[非常糟糕的主意](http://mark-dot-net.blogspot.com/2012/02/to-rebase-or-not-to-rebase-that-is.html)。您不应该更改任何已推送的历史记录 -[阶段](https://www.mercurial-scm.org/wiki/Phases)的重点是跟踪尚未推送哪些更改（以便能够修改它们）以及已推送哪些更改（因此它们是不可变的）。从[变基文档](https://www.mercurial-scm.org/wiki/RebaseExtension)：

> 您不应该重新设置已经与他人共享的变更集。这样做将迫使其他所有人执行相同的变基，否则在拉入您的变基变更集后，他们将最终得到重复的变更集。

最好是合并您的更改或将它们[嫁接](http://www.selenic.com/hg/help/graft)。嫁接（也称为樱桃采摘）采用一个或多个更改集并将它们复制到您当前的分支。

# ruby-on-rails-3 - rails中的一对多关系可以创建父对象吗？

> ID：14057641
> 
> 赞同：0
> 
> 时间：2012-12-27T16:12:11.483
> 
> 标签：ruby-on-rails-3, model-associations

如果我的`category`课程有很多`products`，并且每个产品只有一个类别，那么我的模型看起来像这样：

```
class Product < ActiveRecord::Base
 belongs_to :category
end 
```

还有这个：

```
class Category < ActiveRecord::Base
  has_many :products
end 
```

然后，从`belongs_to`产品方面，我可以使用以下方法在我的产品模型中创建一个 category_name `create_category`：？我如何知道在产品方面我可以使用哪些自动生成的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T16:33:48.683

> 我如何知道在产品方面我可以使用哪些自动生成的方法？

通过阅读[api.rubyonrails.org](http://api.rubyonrails.org/)上的相应文档（即[has_many](http://api.rubyonrails.org/classes/ActiveRecord/Associations/ClassMethods.html#method-i-has_many)和[belongs_to](http://api.rubyonrails.org/classes/ActiveRecord/Associations/ClassMethods.html#method-i-belongs_to)）。它告诉您添加了哪些方法。

在您的情况下，您可以使用`my_product.create_category`许多`my_category.products.create`其他方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T16:23:40.283

当某个类别不存在时，您可以使用嵌套表单创建一个类别，或者如果新产品创建表单中已经存在该类别，则可以选择一个。

这个来自 railscast 的视频应该会有所帮助

[http://railscasts.com/episodes/196-nested-model-form-part-1](http://railscasts.com/episodes/196-nested-model-form-part-1)

# r - 列表对象不能被强制输入'double

> ID：14057643
> 
> 赞同：3
> 
> 时间：2012-12-27T16:12:16.067
> 
> 标签：r

我使用 R，当我尝试运行以下代码时：

```
f = scan(file="c:\\myfile.txt", sep=' ', what=list('numeric'))

MY_MATRIX.M = matrix(f, ncol = 4, byrow = TRUE)

Var.names = c('column1','column2', 'column3', 'column4')
colnames(MY_MATRIX.M) = Var.names

TEST = data.frame(MY_MATRIX.M)

t1 = TEST[which(TEST[,4] == 0, arr.ind = TRUE),]
t2 = TEST[which(TEST[,4] == 1, arr.ind = TRUE),] 
```

我有以下错误：

```
Error in which(TEST[,4] == 0, arr.ind = TRUE : 
  (list) object cannot be coerced to type 'double' 
```

我的文件有 4 列，由数组等数字组成。谁能帮我解决这个问题？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-27T18:48:28.737

您遇到的问题是由于争论`what=list(numeric)`。您想告诉`R`文件只有`numeric`值，*而不是*包含带有数字元素的列表。所以只需使用`what=numeric`，或根本不使用`what`。

我不经常导入文本文件，但当我这样做时，我更喜欢`read`.

# lotus-domino - LotusNotes 代理将输出写入外部位置

> ID：14057645
> 
> 赞同：0
> 
> 时间：2012-12-27T16:12:25.180
> 
> 标签：lotus-domino, lotusscript

执行数据导出的 Lotus Notes 计划代理，但不导出到 Notes 服务器，而是导出到网络上的共享位置。有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-27T16:32:36.363

我曾经在两个不同的步骤中做到这一点：

1.  在多米诺服务器上本地创建文件
2.  使用计划任务或 cron 作业将文件复制到所需的网络目标

我想要拆分的原因是我只能为计划任务创建一个专用用户。此用户必须有权在 domino 服务器上运行任务以及对网络共享的写访问权。此外。如果与网络共享的连接出现问题，代理不会失败。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T16:24:13.463

您可以将共享位置映射为驱动器（在服务器端）并将文件写入其中。

# joomla - 在joomla 2.5中动态添加输入框到编辑表单

> ID：14057649
> 
> 赞同：1
> 
> 时间：2012-12-27T16:12:47.640
> 
> 标签：joomla, joomla2.5, joomla-component

我按照[本教程](http://docs.joomla.org/Developing_a_Model-View-Controller_%28MVC%29_Component_for_Joomla!2.5)介绍了如何为 joomla 2.5 构建组件，但现在我被卡住了。

我想要做什么：除了在 admin\models\forms\.xml 中定义的那些字段之外，我还想**动态**添加表单字段。字段列表应从数据库中读取。

我有一个：

*   主表`#__tours(id, title)`，
*   字段列表表`#__tourfields(id,lable,description,position)`
*   字段值表`#__tourfieldvalues(tourid,fieldid,fieldvalue)`

`#__tourfields`包含附加字段的列表，用户可能希望为 中的每个条目指定这些字段`#__tours`。`#__tourfieldvalues`将包含附加字段的值。

所以现在我需要弄清楚如何将输入框添加到编辑表单中的每一行`#__tourfields`，读取`#__tourfieldvalues`当前要显示的条目中的值`#__tours`。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T12:41:32.477

这是一个非常复杂的问题。以小书为准：）

通常，您必须为每个字段类型创建类，并为`#__tourfields`. 此类必须扩展`JFormField`并`getInput()`覆盖方法。

然后在循环中获取您的字段。

像这样的东西。但我相信你必须有更具体的问题。这听起来像是“如何从头开始创建像 Joomla 这样的 CMS？”

# wpf - WPF Bing Maps and Manipulation，如何禁用旋转但保留缩放/平移功能

> ID：14057652
> 
> 赞同：0
> 
> 时间：2012-12-27T16:12:54.963
> 
> 标签：wpf, bing-maps

我正在使用 WPF Bing Maps SDK，它运行良好。但是，默认情况下，在触摸屏上，地图是可操作的（很像默认情况下滚轮缩放和点击拉动地图的方式）。这很好，除了地图允许旋转，我们想明确禁止旋转。有没有办法明确禁用旋转？如果没有，我知道有几个操作事件可以挂钩处理程序。但是，如果我挂钩一个处理程序，我最终会覆盖默认的缩放/平移/旋转处理程序吗？如果我编写一个处理程序，我是否必须再次实现整个操作功能？或者是否有一个事件我可以检查旋转角度并在每次操作时将其重新设置为 0？如果是这样，我应该听什么事件？操纵开始，还是操纵开始？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T16:42:05.483

这是非常微不足道的，现在我很尴尬地回答我自己的问题。

Bing 地图允许通过以下属性指定允许的操作：

SupportedManipulations="平移、缩放"

# java - 使用 jni 在同一个项目中加载多个 dll

> ID：14057659
> 
> 赞同：0
> 
> 时间：2012-12-27T16:13:16.163
> 
> 标签：java, java-native-interface, c++-cli

我有项目cli c++，我在java中需要它，所以我使用jni来访问这些方法，并且没有dll引用的示例项目很好，但是当我包含任何其他dll时，jre崩溃了，

有关更多详细信息，我有这个例子：

test 是第一个使用 dllNet 的 cli c++ 项目，我在我的 java 项目中使用 i：

测试代码：

```
using namespace dllNet;
JNIEXPORT jstring JNICALL Java_alquasar_aimetis_AimetisCallJNI_getAllCameras
(JNIEnv *env, jclass cls, jobject srv, jobject cams){
dllNet::Class1::SayHi();
return env->NewStringUTF( "Hello, World!" );
} 
```

dllNet代码：

```
using System;

namespace dllNet
{
    public class Class1
    {
        public static void SayHi()
        {
            System.Console.WriteLine("Hiiiiiiiiiiiiiiiiii .....");
        }
    }
} 
```

爪哇代码：

```
public class AimetisCallJNI {

    static{
                System.load("C:/Users/alquasar/Desktop/mejdi/Aimetis/bin/dllNet.dll");
        System.load("C:/Users/alquasar/Desktop/mejdi/Aimetis/bin/test.dll");
    }
public static native String getAllCameras(ServerAis srv, CamerasAis list);
public static void main(String[] args) {
        ServerAis srv = new ServerAis("192.168.0.42", "admin", "admin");
        CamerasAis list = new CamerasAis();
new AimetisCallJNI().getAllCameras(srv, list);
} 
```

这是错误：

```
 A fatal error has been detected by the Java Runtime Environment:
#
#  Internal Error (0xe0434f4d), pid=4956, tid=4732
#
# JRE version: 6.0_37-b06
# Java VM: Java HotSpot(TM) Client VM (20.12-b01 mixed mode, sharing windows-x86 )
# Problematic frame:
# C  [KERNELBASE.dll+0xc6e3]
#
# An error report file with more information is saved as:
# C:\Users\alquasar\workspaceMejdi\tn.waycon.alquasar.video.aimetis.impl\hs_err_pid4956.log
#
# If you would like to submit a bug report, please visit:
#   http://java.sun.com/webapps/bugreport/crash.jsp
# The crash happened outside the Java Virtual Machine in native code.
# See problematic frame for where to report the bug.
# 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-01-01T00:20:10.323

您不能也不需要加载 C# DLL。您只需要加载包含您的 JNI 代码的 DLL。

# colors - 形象的形成

> ID：14057667
> 
> 赞同：-1
> 
> 时间：2012-12-27T16:13:40.020
> 
> 标签：colors

如何在matlab中制作一个图像（510 * 510），上排为红色，绿色，bue，下排为青色洋红色和黄色，所有图像均等。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T16:34:59.483

你的问题有点模糊，但我*想*我知道你在问什么。HSV 图像的色调通道通常被认为是 0 到 360 度的范围，因为它是[RGB 颜色模型中点的柱坐标表示](http://en.wikipedia.org/wiki/HSL_and_HSV)。但是，对于您的图像，色调通道的值可能介于 0 到 1 之间，这就是您从函数[RGB2HSV](http://www.mathworks.com/help/matlab/ref/rgb2hsv.html)获得的输出，如果这是您用来获取 HSV 贴图的输出。

因此，如果您想将色调移动 120 度，则必须将范围移动 1/3。换言之，假设正偏移 120 度，应将范围从 0 到 1/3 的值更改为从 1/3 到 2/3 的范围。[您可以使用REM](http://www.mathworks.com/help/matlab/ref/rem.html)函数来实现这一点，如下所示：

```
H = rem(H + 1/3, 1); 
```

对于 120 度的负位移，您可以应用等效的 240 度正位移，如下所示：

```
H = rem(H + 2/3, 1); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-27T17:23:11.140

对于@gnovice 答案的穷人版本，我建议按照@JasonD 的建议简单地交换 R、G 和 B 频道

假设您有一个存储在数组中的 n×m×3 RGB 图像`img`。然后，您按如下方式移动频道

```
shiftedImg = img(:,:,[2 3 1]); 
```

或者

```
shiftedImg = img(:,:,[3 1 2]); 
```

# algorithm - 盒对齐代数

> ID：14057671
> 
> 赞同：1
> 
> 时间：2012-12-27T16:14:15.197
> 
> 标签：algorithm, text, alignment, algebra

我正在寻找用于 2d 框对齐的算法（或代数）。（递归）框的对齐在 TeX 和 Lout 等类型设置系统中实现，但也在 Web 浏览器中实现。例如，框可以水平或垂直对齐，分布在可用空间上并递归组合。是否有论文或实现在类型设置之外实现此类系统？如何最好地描述此类系统是否达成共识？

编辑：[Haskell Diagrams](http://projects.haskell.org/diagrams/)包看起来是一种非常彻底的组合图形对象的方法。它可以处理任何形状，而不仅仅是盒子。它的弱点似乎是处理对类型设置、Web 浏览器和 GUI 非常重要的文本。

编辑：[LaTeX3](https://tex.stackexchange.com/a/44159/3083)中的棺材看起来很相关。

# cuda - cuda 矩阵按列乘法

> ID：14057678
> 
> 赞同：0
> 
> 时间：2012-12-27T16:15:03.653
> 
> 标签：cuda, matrix-multiplication

我正在尝试在 cuda 中进行矩阵乘法。我的实现与 cuda 示例不同。

cuda 示例（来自 cuda 样本）通过将第一个矩阵的行中的每个值乘以第二个矩阵的列中的每个值来执行矩阵乘法，然后将乘积相加并将其存储在输出向量中的索引处来自第一个矩阵的行。

我的实现将第一个矩阵的列中的每个值乘以第二个矩阵的行的单个值，其中行索引 = 列索引。然后它在全局内存中有一个输出向量，它的每个索引都更新了。

cuda 示例实现可以有一个线程更新输出向量中的每个索引，而我的实现可以有多个线程更新每个索引。

我得到的结果只显示了一些值。例如，如果我让它执行 4 次更新迭代，它只会执行 2 或 1 次。

我认为线程可能会相互干扰，因为它们都试图写入全局内存中向量的相同索引。所以也许，当一个线程正在写入索引时，另一个可能无法插入它的值并更新索引？

只是想知道这个评估是否有意义。

例如。将以下两个矩阵相乘：

```
[3 0 0 2         [1       [a
 3 0 0 2    x     2   =    b
 3 0 0 0          3        c
 0 1 1 0]         4]       d] 
```

Cuda 示例使用 4 个线程以下列方式进行矩阵乘法，其中 a、b、c、d 存储在全局内存中：

```
Thread 0:   3*1 + 0*2 + 0*3 + 2*4 = a
Thread 1:   3*1 + 0*2 + 0*3 + 2*4 = b
Thread 2:   3*1 + 0*2 + 0*3 + 0*4 = c
Thread 3:   0*1 + 1*2 + 1*3 + 0*4 = d 
```

我的实现如下所示：

```
a = b = c = d = 0

Thread 0:
3*1 += a
3*1 += b
3*1 += c
0*1 += d

Thread 1:
0*2 += a
0*2 += b
0*2 += c
1*2 += d

Thread 2:
0*3 += a
0*3 += b
0*3 += c
1*3 += d

Thread 3:
2*4 += a
2*4 += b
0*4 += c
0*4 += d 
```

因此，所有四个线程都可能同时尝试更新其中一个索引。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T14:49:20.143

为了解决这个问题，我使用**atomicAdd**来执行**+=**操作。当一个线程执行**3*1 += a**的操作（例如）时，它做了三件事。

> 1.  **它获取a**的先前值
> ***   它通过执行**3*1 +** **a 的**先前值来更新值***   **然后它将新值存储**到****

 ******通过使用[atomicAdd](http://docs.nvidia.com/cuda/cuda-c-programming-guide/index.html#atomic-functions)，它保证这些操作可以由线程进行，而不会被其他线程中断。如果不使用 atomicAdd，thread0 可以获取 a 的先前值，**而****thread0**正在更新该值，thread1 可以获取**a**的先前值并执行自己的更新。这样，**+=**操作就不会发生，因为线程无法完成它们的操作。

如果**使用 a += 3*1**而不是**atomicAdd(&a, 3*1)**，那么 thread1 可能会在 thread0 完成它正在做的事情之前干扰和更改 thread0 的值。它创造了一个竞争条件。

**atomicAdd**是一个**+=**操作。您将使用以下代码来执行操作：

```
__global__ void kernel(){    
int a = 0;   
atomicAdd(&a, 3*1);  //is the same as a += 3*1
} 
```******

# java - 如何找出某个类属于哪个 JAR 文件？

> ID：14057683
> 
> 赞同：0
> 
> 时间：2012-12-27T16:15:13.110
> 
> 标签：java, class, jar

我正在寻找某个类包含在哪个 JAR 文件中。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T16:18:58.447

看看[JarFinder](http://www.jarfinder.com/)。这将帮助你。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-27T16:19:31.840

*   [Class Locator](http://sourceforge.net/projects/classlocator/)一个 Eclipse 插件，如果您使用的是 Eclipse，它可能会对您有所帮助。

*   [FindJar.com](http://www.findjar.com/class/activation/Locator.html)从互联网上找到它。

*   还有[Jboss tattletale](http://www.jboss.org/tattletale/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-27T16:19:42.400

如果您使用的是 Eclipse，您可以使用 ctrl+shift+t 来搜索目标。你必须给出类名，它会显示与它相关的 jars。也不应该将这些 jar 附加到构建路径中。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-27T16:19:13.557

如果您需要在运行时定位类 - 您可以尝试以下操作：

```
obj.getClass().getProtectionDomain().getCodeSource().getLocation() 
```

但请注意，`getCodeSource`可以返回`null`某些类，例如来自`rt.jar`.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-27T16:22:11.403

如果您使用 eclipse 只需按 F3 味道，您将在打开窗口的顶部看到 jar 信息

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-27T16:23:29.580

检查这个

[找到给定类名的jar文件](http://sacharya.com/find-the-jar-file-given-a-class-name/)

[如何检查类文件属于哪个 Jar 文件？](https://developer.atlassian.com/pages/viewpage.action?pageId=2031766)

# android - 通过蓝牙发送和接收列表

> ID：14057690
> 
> 赞同：-1
> 
> 时间：2012-12-27T16:15:58.790
> 
> 标签：android, list, bluetooth

我的应用程序必须具备的功能之一是将它创建的列表与另一部手机创建的具有相同格式的列表进行比较。为了做到这一点，我需要实现蓝牙文件传输，但我对此一无所知。有人可以给我一个先机吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T16:28:15.023

如果有人有同样的问题，我只是使用了蓝牙聊天示例，对于我需要的简单事情，它就像一个魅力！应该在问之前做的，对此感到抱歉。

# cakephp - cakephp 选择相关元素的字段以在视图中显示

> ID：14057691
> 
> 赞同：1
> 
> 时间：2012-12-27T16:16:01.690
> 
> 标签：cakephp, cakephp-2.0

我在 cakephp 中有这个，我尝试在 cake php 中创建相关数据时选择要在组合框中显示的字段。

```
<?php echo $this->Form->create('Round'); ?>
    <fieldset>
        <legend><?php echo __('Add Round'); ?></legend>
    <?php
        echo $this->Form->input('description');
        echo $this->Form->input('text_marked');
        echo $this->Form->input('project_id');
        echo $this->Form->input('User');
    ?>
    </fieldset>
<?php echo $this->Form->end(__('Submit')); ?> 
```

我尝试在表项目中选择一个带有 project_title 的项目，而不是通过“project_id”。标题不是唯一的，但比 id 更具描述性。我可以在蛋糕 php 中做到这一点吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T16:32:22.163

答案很简单，因此我们选择要在关联的其他视图中显示的字段。有人说：

> 公共 $displayField = 'titte'

在圆形模型中。

# php - 在 Doctrine 2 / CodeIgniter 2 中找不到实体模型

> ID：14057693
> 
> 赞同：1
> 
> 时间：2012-12-27T16:16:07.147
> 
> 标签：php, codeigniter, orm, doctrine, doctrine-orm

我一直在关注一些让 Doctrine 运行的教程，当我尝试将对象插入数据库时​​似乎挂断了。作为参考，这就是我所关注的：[教义2教程](http://wildlyinaccurate.com/integrating-doctrine-2-with-codeigniter-2)

*   Doctrine 安装在 application/libraries 文件夹中
*   Doctrine.php 引导程序位于 application/libraries 文件夹中
*   在 application/ 文件夹中创建一个 cli.php 文件
*   教程没有说我的第一个实体模型放在哪里，所以我把它放在应用程序/模型中

命名空间实体；

```
use Doctrine\Common\Collections\ArrayCollection;

/**
 * @Entity
 * @Table(name="user")
 */
class User
{

/**
 * @Id
 * @Column(type="integer", nullable=false)
 * @GeneratedValue(strategy="AUTO")
 */
protected $id;

/**
 * @Column(type="string", length=32, unique=true, nullable=false)
 */
protected $username;

/**
 * @Column(type="string", length=64, nullable=false)
 */
protected $password;

/**
 * @Column(type="string", length=255, unique=true, nullable=false)
 */
protected $email;

/**
 * The @JoinColumn is not necessary in this example. When you do not specify
 * a @JoinColumn annotation, Doctrine will intelligently determine the join
 * column based on the entity class name and primary key.
 *
 * @ManyToOne(targetEntity="Group")
 * @JoinColumn(name="group_id", referencedColumnName="id")
 */
protected $group;

}

/**
 * @Entity
 * @Table(name="group")
 */
class Group
{

/**
 * @Id
 * @Column(type="integer", nullable=false)
 * @GeneratedValue(strategy="AUTO")
 */
protected $id;

/**
 * @Column(type="string", length=32, unique=true, nullable=false)
 */
protected $name;

/**
 * @OneToMany(targetEntity="User", mappedBy="group")
 */
protected $users;

} 
```

*   在数据库中创建我的架构没有问题：php cli.php orm:schema-tool:create
*   得到“使用原则”设置下的最后一步
*   尝试在我的控制器中使用以下代码，但出现错误

    ```
    $em = $this->doctrine->em;

    $user = new models\User;
    $user->setUsername('Joseph');
    $user->setPassword('secretPassw0rd');
    $user->setEmail('josephatwildlyinaccuratedotcom');

    $em->persist($user);
    $em->flush(); 
    ```

生产

```
Fatal error: Class 'models\User' not found in C:\wamp\www\ci\application\controllers\Home.php on line 11 
```

我唯一的想法是路径可能有问题，因为我在 Windows 中，或者我将实体模型放在错误的位置。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T17:03:50.740

从[您正在关注的教程](http://wildlyinaccurate.com/integrating-doctrine-2-with-codeigniter-2)中，有一个重要的设置：

```
// With this configuration, your model files need to be in
// application/models/Entity
// e.g. Creating a new Entity\User loads the class from
// application/models/Entity/User.php
$models_namespace = 'Entity'; 
```

这是您的 Doctrine 实体（模型）必须使用的命名空间，看起来您正在正确地使用它`namespace Entity;`作为模型的第一行。您可以将其设置为任何您想要的。

**使用此配置，您的模型文件需要在`application/models/Entity`**

创建实体实例时，请使用您配置的命名空间 - 而不是模型路径：

```
// $user = new models\User; "models" is not the right namespace
$user = new Entity\User; 
```

# ruby-on-rails - 为什么我的代码会将我带到不同的 URL？

> ID：14057695
> 
> 赞同：1
> 
> 时间：2012-12-27T16:16:08.977
> 
> 标签：ruby-on-rails, ruby-on-rails-3, routing

首先，我的资源在社区模型中 使用**to_param嵌套在 slug 中。**

我在 example.com/shop/walmart/topic/14/edit 。
如果我在没有验证码输入的情况下按更新，显然应该让我再次返回编辑页面并显示 Flash 错误消息。
然而，它带我去 example.com/shop/14/topic/14/edit 。<= 它采用相同的参数。它应该采用 'walmart' ，即**community_name**作为第一个参数，**:id**作为主题。
所有字段的设置都与我在上一页输入的内容相同。我怎样才能避免这种情况？它应该重定向到与上一页相同的 url。

**路线.rb**

```
resources :communities, :path => "shops", do
    resources :community_topics, :path => "topics"      
end 
```

**控制器**

```
def simple_captcha_check
    if !simple_captcha_valid?
        flash[:error] = 'Wrong Captcha!'

        if request.put? # We came from an edit request
          @community_topic = CommunityTopic.find(params[:id])
          @community_topic.attributes = params[:community_topic]
          render :action => :edit
        elsif request.post? # We came from a new request
          @community_topic = CommunityTopic.new params[:community_topic]
          render :action => :new
        end

    end
end 
```

**models/community.rb**请注意，我在这里使用 slug

```
def to_param
  "#{community_name}"
end 
```

**意见/community_topics/_form.html.erb**

```
<%= form_for @community_topic, :html => { :class => 'form-horizontal' } do |f| %>
  <div class="control-group">
    <%= f.label :title, :class => 'control-label' %>
    <div class="controls">
      <%= f.text_field :title, :class => 'text_field' %>
    </div>
  </div>
  <div class="control-group">
    <%= f.label :body, :class => 'control-label' %>
    <div class="controls">
      <%= f.text_area :body, :class => 'text_area' %>
    </div>
  </div>

    <div class="control-group">
      <div class="controls">
  <%= show_simple_captcha(:label => "human authentication") %>
    </div>
  </div>

  <div class="form-actions">
    <%= f.submit nil, :class => 'btn btn-primary' %>
    <%= link_to t('.cancel', :default => t("helpers.links.cancel")),
                community_topic_index_path, :class => 'btn' %>
  </div>
<% end %> 
```

**耙路线 | grep community_topic**

```
 community_community_topics GET    /shops/:community_id/topics(.:format)          community_topics#index
                                 POST   /shops/:community_id/topics(.:format)          community_topics#create
   new_community_community_topic GET    /shops/:community_id/topics/new(.:format)      community_topics#new
  edit_community_community_topic GET    /shops/:community_id/topics/:id/edit(.:format) community_topics#edit
       community_community_topic GET    /shops/:community_id/topics/:id(.:format)      community_topics#show
                                 PUT    /shops/:community_id/topics/:id(.:format)      community_topics#update
                                 DELETE /shops/:community_id/topics/:id(.:format)      community_topics#destroy 
```

顺便说一句，我在控制器中的索引操作就是这样，并且运行良好！

**community_topics_controller.rb #index**

```
 def index
    @community = Community.find_by_community_name(params[:community_id])
    @community_topics = @community.community_topics

    respond_to do |format|
      format.html # index.html.erb
      format.json { render json: @community_topics }
    end
  end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T16:32:31.770

我看不到您的控制器操作，也不知道变量的名称，但无论如何，在嵌套路由的情况下，您必须使用命名路由或多态助手（就像我一样）精确定义所有 url。

因此，您的表单助手必须如下所示：

```
<%= form_for([@community, @community_topic], :html => { :class => 'form-horizontal' }) do |f| %> 
```

它必须向 /shop/walmart/topic/14/update 发送请求（如果 @community_topic 是新记录，则为“new”）

社区.rb：

```
you can just

def to_param
  community_name
end 
```

路线.rb：

```
resources :communities, :path => "shop", do
  resources :community_topics, :path => "topic"#, :as => :'topic' *
end

# * named route 'community_topic' can conflict with 'community_topics' of standalone route for CommunityTopic. Let it be by default: 'community_community_topic'. 
```

# c# - 如何检测实体是否在 SQL Server 2008 中使用？

> ID：14057696
> 
> 赞同：2
> 
> 时间：2012-12-27T16:16:10.787
> 
> 标签：c#, asp.net, sql-server, sql-server-2008, tsql

我想知道有什么方法可以知道一条记录是否与其他记录一起使用。

除了捕获参照完整性异常之外，还有其他方法可以找到它吗？

我通常会捕获此异常并告诉用户不删除或无法删除记录。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T16:19:02.997

您可以对相关表运行查询。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-28T01:40:37.447

创建一个使用系统表中的 FK 为每个表构建自定义视图的存储过程。在每个视图中，查询所有相关表。每次添加或删除 FK 时运行 SP，以便它适当地更新所有视图。

问题解决了。

# c# - 在 Selenium C# 中的文本之间检索文本

> ID：14057699
> 
> 赞同：7
> 
> 时间：2012-12-27T16:16:30.053
> 
> 标签：c#, selenium-webdriver, html

我在使用 Selenium webdriver-C# 从未读邮件中检索邮件的主题标题时遇到问题。

这是 HTML 代码：

```
<div class="ae4 UI UJ" gh="tl">
 <div class="Cp">
  <div>
    <table id=":8e" class="F cf zt" cellpadding="0">
    <colgroup>
    <tbody>
      <tr id=":8d" class="zA zE">
       <td class="PF xY"></td>
       <td id=":8c" class="oZ-x3 xY" style="">
       <td class="apU xY">
       <td class="WA xY">
       <td class="yX xY ">
       <td id=":87" class="xY " role="link" tabindex="0">
        <div class="xS">
         <div class="xT">
          <div id=":86" class="yi">
          <div class="y6">
          **<span id=":85">
             <b>hi</b>
            </span>**
            <span class="y2">
          </div>
         </div>
        </div>
       </td>
       <td class="yf xY "> </td>
       <td class="xW xY ">
     </tr> 
```

我可以在控制台中打印“emailSenderName”，但无法打印“文本”（在这种情况下，主题行即“hi”），因为它位于跨度标签之间。这是我的代码。

```
 //Try to Retrieve mail Senders name and Subject
        IWebElement tbl_UM = d1.FindElement(By.ClassName("Cp")).FindElement(By.ClassName("F"));
        IList<IWebElement> tr_ListUM = tbl_UM.FindElements(By.ClassName("zE"));
        Console.WriteLine("NUMBER OF ROWS IN THIS TABLE = " + tr_ListUM.Count());
        foreach (IWebElement trElement in tr_ListUM)
        {
            IList<IWebElement> td_ListUM = trElement.FindElements(By.TagName("td"));
            Console.WriteLine("NUMBER OF COLUMNS=" + td_ListUM.Count());
            string emailSenderName = td_ListUM[4].FindElement(By.ClassName("yW")).FindElement(By.ClassName("zF")).GetAttribute("name");
            Console.WriteLine(emailSenderName);
            string text = td_ListUM[5].FindElement(By.ClassName("y6")).FindElement(By.TagName("span")).FindElement(By.TagName("b")).Text;
            Console.WriteLine(text);
        } 
```

我还尝试直接从第 5 列 (td) 的标签中选择文本，其中包含主题文本（在我的情况下），但没有结果。

我可能在某个地方出错了，或者可能有其他方法。

请建议，提前谢谢:)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-25T09:51:25.680

Selenium Web Driver 的 Java 实现中可用的“getText”方法似乎比 C# 中可用的等效“文本”属性做得更好。

我找到了一种实现相同目的的方法，虽然有些复杂，但效果很好：

```
public static string GetInnerHtml(this IWebElement element)
{
    var remoteWebDriver = (RemoteWebElement)element;
    var javaScriptExecutor = (IJavaScriptExecutor) remoteWebDriver.WrappedDriver;
    var innerHtml = javaScriptExecutor.ExecuteScript("return arguments[0].innerHTML;", element).ToString();

    return innerHtml;
} 
```

它通过将 IWebElement 作为参数传递给浏览器中执行的某些 JavaScript 来工作，浏览器将其视为普通 DOM 元素。然后，您可以访问其上的属性，例如“innerHTML”。

我只在 Google Chrome 中对此进行了测试，但我看不出它为什么不能在其他浏览器中运行。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2016-05-18T07:17:01.303

使用`GetAttribute("textContent")`而不是`Text()`为我做了诀窍。

```
Driver.FindElement(By.CssSelector("ul.list span")).GetAttribute("textContent") 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-27T17:44:06.043

试试这个

```
findElement(By.cssSelector("div.y6>span>b")).getText(); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-02-19T10:34:42.063

我有同样的问题。在 PhantomJS 上工作。解决方案是使用 GetAttribute("textContent") 获取值：

```
Driver.FindElementsByXPath("SomexPath").GetAttribute("textContent"); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2018-11-07T19:56:53.357

可能为时已晚，但可能对某人有所帮助。

```
 IWebElement spanText= driver.FindElement(By.XPath("//span[contains(text(), 'TEXT TO LOOK FOR')]"));
        spanText.Click();

        IWebElement spanParent= driver.FindElement(By.XPath("//span[contains(text(), 'TEXT TO LOOK FOR')]/ancestor::li"));
        spanParent.FindElement(By.XPath(".//a[contains(text(), 'SIBLING LINK TEXT')]")).Click(); 
```

一旦找到 span 元素，这里的奖励内容将查找此文本的兄弟姐妹，从 parent 开始查找兄弟姐妹。我在这里寻找一个锚链接。XPath 开头的点表示您从元素 spanParent 开始查找

```
<li>
<span> TEXT TO LOOK FOR </span>
<a>SIBLING LINK TEXT</a>
</li> 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-09-25T21:23:07.073

这在 Visual Studio 2017 单元测试项目中对我有用。我正在尝试从 typeahead 控件中查找搜索结果。

```
 IWebElement searchBox = this.WebDriver.FindElement(By.Id("searchEntry"));
searchBox.SendKeys(searchPhrase);
System.Threading.Thread.Sleep(3000);

IList<IWebElement> results = this.WebDriver.FindElements(By.CssSelector(".tt-suggestion.tt-selectable"));
if (results.Count > 1)
{

    searchResult = results[1].FindElement(By.TagName("span")).GetAttribute("textContent");
} 
```

# r - 选择每组的前 n 个观察值

> ID：14057701
> 
> 赞同：1
> 
> 时间：2012-12-27T16:11:28.780
> 
> 标签：r

我和我的同事轮流输入数据。一天我做，下周别人做，我们总是一次输入 50 个观察值（到 Excel 表中）。所以我可以很确定我输入了从 101 到 150 和 301 到 350 的案例。然后我们将数据读入 R 来处理它。如何只选择我输入的案例？

现在我知道我可以通过从 excel 表中复制来做到这一点，但是，我想知道它在 R 中是否可行？

我检查了几个关于使用 R 子集数据的文档，还尝试了类似的东西

```
data<-data[101:150 & 301:350,] 
```

但没有用。如果有人能指导我获得更全面的指南来回答这个问题，我将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-27T16:34:55.110

您给出的具体示例的答案是

```
data[c(100:150,300:350),] 
```

您能否更具体地说明您想要哪些案例？是每 100 人中的前 50 人，还是每 300 人中的前 50 人，还是……？`n`要获取每种情况下的第一个索引，`m`您可以使用类似

```
c(outer(0:4,seq(1,100,by=10),"+")) 
```

（这里`n`=5，`m`=10）；`outer`是广义的外积。另一种（可能更直观）的解决方案将使用`rep`，例如

```
rep(0:4,10) + rep(seq(1,100,by=10),each=5) 
```

因为 R 会在必要时自动回收向量，所以您实际上可以将其缩短为：

```
0:4 + rep(seq(1,100,by=10),each=5) 
```

但我会推荐稍微长一点的公式，因为这样更容易理解。

# sql-server - 困惑：为什么 SSMS 为具有标识的主键创建默认聚集索引

> ID：14057712
> 
> 赞同：1
> 
> 时间：2012-12-27T16:17:34.773
> 
> 标签：sql-server, database-design, indexing, ssms-2012

我刚刚执行了以下脚本

```
CREATE TABLE Test
(
    ID INT IDENTITY PRIMARY KEY,
    Info nvarchar(50)
) 
```

令我惊讶的是，SSMS 为 ID 列创建了一个聚集索引。所以，我的问题是为什么不是非聚集索引？

根据我的理解，在这种情况下使用非聚集索引会更好，因为由于二叉树，查找具有 X 值的 ID 而不是使用值的聚集索引要快得多以某种方式分组。此外，如果我考虑接收数据，则必须以某种方式快速访问 ID。正如在许多文章中所写的那样，二叉树是接收特定或多个 ID 的最快方式。除此之外，在大多数情况下，我看到任何表的主键都是具有自动递增值的 ID。因此，使用这种自增原理的方法是很常见的。

那么，使用非聚集密钥有什么优势，为什么 SSMS 中默认使用此密钥？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-27T16:46:21.927

默认情况下，表的主键由聚集索引支持——这只是 SQL Server 的默认行为。如果需要，它可以更改：

```
CREATE TABLE Test
(
    ID INT IDENTITY PRIMARY KEY NONCLUSTERED,
    Info nvarchar(50)
) 
```

但尤其是在这种`INT IDENTITY`情况下，这几乎是您可以在表上想象的完美聚集索引 - 所以 SQL Server 做出这个默认选择是一件“好事”。

SQL Server 中的每个“严肃”表都应该有一个精心挑选的聚集索引（因为替代方案 -*堆*- 在各个方面进行微调更慢且更麻烦） - 以及一个小的（4 字节）静态（从不改变)，唯一列 like`INT IDENTITY`非常适合作为此表上的聚集索引。

如果您想了解更多关于如何明智地选择集群键以及为什么这样做如此重要的信息，您应该查看 Kimberly Tripp 就该主题所说的所有内容：

*   [Kimberly Tripp 谈集群键](http://www.sqlskills.com/blogs/kimberly/category/clustering-key.aspx)
*   [Kimberly Tripp 谈聚集索引](http://www.sqlskills.com/blogs/kimberly/category/clustered-index.aspx)

# javascript - Phonegap jQuery：无法调用未定义的方法确认

> ID：14057716
> 
> 赞同：1
> 
> 时间：2012-12-27T16:18:23.833
> 
> 标签：javascript, jquery, cordova, jquery-mobile

我正在使用 jQuery mobile 创建一个简单的基于 phonegap 的应用程序。

这是我的 HTML 的标题

```
<script src="scripts/jquery-1.8.2.min.js"></script>
<script src="scripts/jquery.mobile-1.1.1.min.js"></script>
<script src="scripts/jquery.jsonp-2.4.0.min.js"></script>
<script type="text/javascript" charset="utf-8" src="scripts/cordova-2.2.0.js"></script>
<script src="scripts/my.js"></script> 
```

在我添加了所有 HTML 代码之后的正文中

```
<script>
$(document).ready(function() {
navigator.notification.confirm('Do you want to quit', 
        function(){
            if(button == "1"){
                 navigator.app.exitApp(); }
        }, 
        'QUIT TITLE', 
        'OK,Cancel'  
    );
</script> 
```

我得到错误

> 12-27 21:28:17.998: D/CordovaLog(17212): Uncaught TypeError: 无法调用未定义的方法“确认” 12-27 21:28:17.998: D/CordovaLog(17212): file:///android_asset/ www/app.html：第 227 行：未捕获的类型错误：无法调用未定义的方法“确认”

如您所见，我已经加载了所有必要的脚本，并且正在调用 `navigator.notification.confirm`内部`$(document).ready`

不知道为什么我会收到这个错误。请帮忙。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-27T16:27:23.590

首先，您的脚本标签内的代码未正确关闭。

您正在尝试在成功加载之前使用 Phonegap 库。***$(document).ready(function() {***不应与 jQuery mobile 一起使用（您将在底部链接中找到有关此的更多信息），它也不会告诉您是否加载了 phonegap 库。

您的代码应该像这样初始化：

```
document.addEventListener("deviceReady", deviceReady, false);

function deviceReady() {
    navigator.notification.confirm('Do you want to quit', 
        function(){
            if(button == "1"){
                navigator.app.exitApp(); 
            }
        }, 
        'QUIT TITLE', 
        'OK,Cancel'  
    );
} 
```

您可以在此处找到更多相关信息：[https](https://stackoverflow.com/a/14010308/1848600) ://stackoverflow.com/a/14010308/1848600和此处：[http ://docs.phonegap.com/en/1.0.0/phonegap_events_events.md.html](http://docs.phonegap.com/en/1.0.0/phonegap_events_events.md.html)

# php - 如何将图像值从表单发送到另一个页面？

> ID：14057718
> 
> 赞同：-4
> 
> 时间：2012-12-27T16:18:25.930
> 
> 标签：php, html, mysql

我正在开发一个项目，其中用户填写了一个表单，并且该值显示在另一个页面中。我在另一个页面中获得的所有数据但图像无法在该页面上显示，仅显示图像名称。我想显示图像，我该怎么做？

第 1 页

`<form action="save.php" class="contact-form" method="post" name="inputname">`
`<table>`
`<tr>`
`<td class="label">Name:</td>`
`<td><input type="text" class="input-text" name="pname" /></td>`
`</tr>`
`<tr>`
`<td class="label">City:</td>`
`<td><input type="text" class="input-text" name="pcity" /></td>`
`</tr>`
`<tr>`
`<td class="label">Country:</td>`
`<td><input type="text" class="input-text" name="pcountry" /></td>`
`</tr>`
`<tr>`
`<td class="label">Email:</td>`
`<td><input type="text" class="input-text" name="pemail" /></td>`
`</tr>`
`<tr>`
`<td class="label">Upload Your Photo:</td>`
`<td><input type="file" accept="image/jpg,image/gif" class="input-text" name="pphoto"/></td>`
`</tr>`

第 2 页 save.php

```
mysql_connect("localhost","root","");
mysql_select_db("my_db");
$p_name=$_POST['pname'];              
$p_city=$_POST['pcity'];
$p_country=$_POST['pcountry'];
$p_email=$_POST['pemail'];
$p_photo=$_POST['pphoto'];

<table>  
<ul>  
<tr>  
<td><li class="image"><img src="<? echo $p_photo; ?>" /></li></td>  
<li class="text">  
<td class="label">  
Name: <? echo $p_name; ?></br>    
City: <? echo $p_city; ?></br>  
Country: <? echo $p_country; ?></br>  
E-Mail: <? echo $p_email; ?></br>  
</td>  
</li>  
</tr>  
</ul>
</table> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T16:23:46.117

如果您将图像作为文件上传，那么您应该使用 $_FILES 数组。你应该先保存上传的图像。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T06:37:44.860

```
@$file = fopen($_FILES['file'] ['tmp_name'], "r");
@$image = addslashes(fread($file, filesize($_FILES['file']['tmp_name']))); 
```

使用您的文件名而不是“文件”。

# java - java.io.InputStream 及其子类型中数据的稳健跳过

> ID：14057720
> 
> 赞同：13
> 
> 时间：2012-12-27T16:18:40.360
> 
> 标签：java, stream, inputstream, java-io, skip

我正在处理一个二进制流，需要有效地跳过一系列我不感兴趣的数据，然后转到一些将要处理的数据。

`InputStream.skip(long)`在保证方面没有多大作用：

> 跳过并丢弃此输入流中的 n 字节数据。由于各种原因，skip 方法最终可能会跳过一些较小的字节数，可能是 0。这可能是由许多条件中的任何一个引起的；在跳过 n 个字节之前到达文件末尾只是一种可能性。返回实际跳过的字节数。

我需要知道发生了两件事之一：

1.  直播结束
2.  字节被跳过

很简单。但是，此描述中提供的宽大处理意味着，例如，`BufferedInputStream`可以跳过几个字节并返回。当然，它告诉我它只是跳过了那几个，但不清楚为什么。

所以我的问题是：您能否以`InputStream.skip(long)`您知道流何时结束或跳过成功完成的方式使用？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-18T14:26:37.150

我不认为我们可以得到一个真正*健壮*的实现，因为`skip()`方法契约相当奇怪。一方面，at 的行为`EOF`没有很好的定义。如果我想跳过 8 个字节并`is.skip(8)`返回`0`，那么决定是否应该再试一次并不是一件容易的事，如果某些实现选择返回，则存在无限循环的`0`危险`EOF`。而且`available()`也不值得信任。

因此，我提出以下建议：

```
/**
 * Skips n bytes. Best effort.
 */
public static void myskip(InputStream is, long n) throws IOException {
    while(n > 0) {
        long n1 = is.skip(n);
        if( n1 > 0 ) {
            n -= n1;
        } else if( n1 == 0 ) { // should we retry? lets read one byte
            if( is.read() == -1)  // EOF
                break;
            else 
                n--;
        } else // negative? this should never happen but...
        throw new IOException("skip() returned a negative value. This should never happen");
    }
} 
```

我们不应该返回一个值来告知“真正跳过”的字节数吗？还是一个布尔值来通知 EOF 已达到？我们不能以稳健的方式做到这一点。例如，如果我们调用`skip(8)`一个[`FileInputStream`](http://docs.oracle.com/javase/6/docs/api/java/io/FileInputStream.html#skip%28l)对象，即使我们在 at ，或者文件只有 2 个字节，[它也会返回 8 。](https://stackoverflow.com/questions/11511093/java-inputstream-skip-return-value-near-end-of-file)`EOF`但是从某种意义上说，该方法是健壮的，因为它可以执行我们想要的操作：跳过`n`字节（如果可能）并让我继续处理它（如果我的下一次读取返回`-1`，我会知道`EOF`已经达到）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-27T16:21:25.863

这似乎适用于跳过`n`字节：

```
long skippedTotal = 0;
while (skippedTotal != n) {
    long skipped = _stream.skip(n - skippedTotal);
    assert(skipped >= 0);
    skippedTotal += skipped;
    if (skipped == 0)
        break;
}
boolean skippedEnough = skippedTotal == n; 
```

但是，尚不清楚它是否适用于`InputStream`可以传递给我的库的所有实现。我想知道是否实现我自己的缓冲跳过方法是要走的路。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2018-09-19T01:02:40.953

我对这个问题迟到了 6 年。

原则上，skip(int n) 和 readFully(int n) 之间没有区别。在跳过的情况下，您对字节不感兴趣。

对于直播，即。tcp 套接字或附加到的文件，skip(n) 可能会阻塞（等待）一旦它«跳过»0 个字节，具体取决于用户的等待偏好。

返回 EOF 或 -1 表示流结束，应该将其返回给最终用户，因为在那之后不会发生任何其他事情。

为了有效地跳过文件中的字节，我会探索随机 io、通道。但是这种优化不能在任何输入流中通用。

# c# - 与之前相同的线程中的继续任务

> ID：14057721
> 
> 赞同：18
> 
> 时间：2012-12-27T16:18:43.563
> 
> 标签：c#, task-parallel-library, impersonation

我有一个创建任务和延续任务的 WebService。

在第一个任务中，我们设置**Thread.CurrentPrincipal**

因此，当 ContinuationTask 启动时，它不再具有 Thread.CurrentPrincipal。

我想在**ContinuationTask**中指定它**应该在与其前件相同的线程中运行**。

我在网上搜索过，但我只发现线程在 SynchronizationContext 中运行的要求，因此我开始认为我缺少一些基本规则，特别是关于 Thread.Principal 应该如何工作。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-12-27T16:47:39.757

首先，请勿`TaskContinuationOptions.ExecuteSynchronously`用于此目的！您不能在同一线程上强制继续。它只适用于非常高的概率。总有它不起作用的情况：递归过多会导致 TPL 不能同步执行。Custom`TaskScheduler`也没有义务支持这一点。

这是一个常见的误解，尤其是因为它在网络上被错误地传播。以下是关于该主题的一些阅读：http: [//blogs.msdn.com/b/pfxteam/archive/2012/02/07/10265067.aspx](http://blogs.msdn.com/b/pfxteam/archive/2012/02/07/10265067.aspx)

如果您需要在同一线程上运行，请执行以下操作：

```
Task.Factory.StartNew(() => { First(); Second(); }); 
```

太简单。

让我通过展示一个替代解决方案来说明为什么会这样：

```
void MyCompositeTask()
{
  var result = First();
  Second(result);
}
Task.Factory.StartNew(() => MyCompositeTask()); 
```

这看起来更直观：我们传递`MyCompositeTask`给 TPL 来运行。TPL 不关心我们在回调中做了什么。我们可以做任何我们想做的事情，包括调用多个方法和传递结果。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-27T16:27:34.250

来自我的 C# 教科书（C# 4.0 in a Nutshell）：

> `TaskContinuationOptions.ExecuteSynchronously`您可以通过指定调用时间来强制它们[延续任务]在同一个线程[作为它们的前件]上执行`ContinueWith`：这可以通过减少间接性来提高非常细粒度的延续中的性能。

原则上我没有尝试过，但它似乎是您正在寻找的，并且可以与 Thread.CurrentPrincipal 结合使用。

这是[MSDN 文章](http://msdn.microsoft.com/en-us/library/dd321576%28v=vs.100%29.aspx)的链接，其中还包含一些更具体的示例

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-28T08:24:05.327

设置池线程的标识不是一个好主意。如果您忘记在异常处理程序中清除身份，它将您与此特定线程联系起来，并且有可能在发生异常时“泄露”身份。您最终可能会使用“泄露”的身份运行不相关的任务。

尝试将 WindowsIdentity 对象传递给任务并使用[WindowsIdentity.Impersonate](http://msdn.microsoft.com/en-us/library/w070t6ka.aspx)进行模拟。这将允许您使用任何可用的线程，并且即使发生异常也会安全地清除身份。

你可以尝试这样的事情：

```
WindowsPrincipal myPrincipal=...;
...
var identity=(WindowsIdentity)myPrincipal.Identity;
var task=Task.Factory.StartNew(ident=>{
        var id=(WindowsIdentity)ident;
        using(var context=id.Impersonate())
        {
            //Work using the impersonated identity here
        }
        return id;
    },identity).
.ContinueWith(r=>{
        var id = r.Result;
        using(var context=id.Impersonate())
        {
            //Work using the impersonated identity here
        }
}); 
```

这些`using`语句确保即使发生异常也会清除模拟身份。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-07-24T04:41:53.750

使用 TaskScheduler.FromCurrentSynchronizationContext() 调用延续：

```
Task UITask= task.ContinueWith(() =>
{
 this.TextBlock1.Text = "Complete"; 
}, TaskScheduler.FromCurrentSynchronizationContext()); 
```

复制自[https://stackoverflow.com/a/4331287/503969](https://stackoverflow.com/a/4331287/503969)

# asp.net - 使用 httphandler 检索图像 url 时遇到问题

> ID：14057730
> 
> 赞同：-1
> 
> 时间：2012-12-27T16:19:13.620
> 
> 标签：asp.net

我正在尝试编写一个 httphandler 来检索图像 url，然后将其显示在图像控件上我正在使用此代码，但它不起作用

```
OleDbConnection mDB = new OleDbConnection(
     ConfigurationManager.ConnectionStrings["AccessConnection"].ConnectionString);
     mDB.Open();
     OleDbCommand cmd = new OleDbCommand("select pProductId from Products where pProductId=" + context.Request.QueryString["ImageID"], mDB);
     OleDbDataReader rdr = cmd.ExecuteReader();
     rdr.Read();
     context.Response.BinaryWrite((byte[])rdr[0]);
     mDB.Close();
     context.Response.End(); */ 
```

抱歉，我之前在 SELECT 语句中造成了混淆，pProductId 不包含图像的 URL，而是 pProductImage 是包含 URL 的字段。我正在使用 Id 来确定要相应显示的图像。

这是我的预期输出：

```
<img src="ImgHandler.ashx?pProductId=2" alt="" /> 
```

我无法放置图像这是我的错误消息的链接：http: [//imgur.com/Cix67](http://imgur.com/Cix67)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T16:56:19.763

这是一个两步的答案。在页面中，您可以执行以下操作：

```
 using (OleDbConnection mDB = new OleDbConnection(ConfigurationManager.ConnectionStrings["AccessConnection"].ConnectionString))
        {
            mDB.Open();
            using (OleDbCommand cmd = new OleDbCommand("select pProductId from Products where pProductId=" + context.Request.QueryString["ImageID"], mDB))
            {
                using (OleDbDataReader rdr = cmd.ExecuteReader())
                {
                    rdr.Read();
                    context.Response.Write("<img src=\"ImgHandler.ashx?pProductId=");
                    context.Response.Write((int)rdr[0]);  // I suppose pProductId is an int, adapt accordingly
                    context.Response.Write("\" />");
                }
            }
        } 
```

并在隐式触发的 HTTP 处理程序中，如下所示：

```
public class MyHandler : IHttpHandler
{
    public bool IsReusable
    {
        get { return true; }
    }

    public void ProcessRequest(HttpContext context)
    {
        using (OleDbConnection mDB = new OleDbConnection(ConfigurationManager.ConnectionStrings["AccessConnection"].ConnectionString))
        {
            mDB.Open();
            // select the file data (I put pData here as a placeholder, and assume it will be a byte[])
            using (OleDbCommand cmd = new OleDbCommand("select pData from Products where pProductId=" + context.Request.QueryString["ImageID"], mDB))
            {
                using (OleDbDataReader rdr = cmd.ExecuteReader())
                {
                    rdr.Read();
                    context.Response.ContentType = "image/png";// put the content type here
                    context.Response.BinaryWrite((byte[])rdr[0]);
                }
            }
        }
    }
} 
```

请注意使用模式，该模式可确保在使用后进行适当的资源清理。此外，理想情况下，您可以使用适当的缓存 HTTP 标头（如 if-modified-since）在客户端缓存数据，但这是另一回事......

# opengl - /usr/bin/ld: 找不到 -lGL (Nvidia, (L)Ubuntu 12.10)

> ID：14057737
> 
> 赞同：2
> 
> 时间：2012-12-27T16:19:51.273
> 
> 标签：opengl, linker, libraries, ld, ubuntu-12.10

我无法在我的 C++/Qt5 项目中链接到 OpenGL。我使用以下命令链接：

```
g++ -m64 -Wl,[...] -o [...] [...].o                               \
    -L/usr/X11R6/lib64 -L[...]/qt-5.0.0/5.0.0/gcc_64/lib          \
    -lQt5Widgets -lQt5Network -lQt5Gui -lQt5Core -lGL -lpthread 
```

我希望`[...]`他们没有隐瞒一些重要的事情。如果你认为他们是，请告诉我。

我收到以下错误：

```
/usr/bin/ld: cannot find -lGL 
```

我在 Lubuntu 12.10 系统上并使用来自[http://qt-project.org/downloads](http://qt-project.org/downloads)的 Qt5 。由于系统是新安装的，我做的第一件事是安装 Ubuntu 的`nvidia-current`软件包，然后我重新启动。其中，我的系统上安装了以下库：

```
$ ll /usr/lib/nvidia-current/
[...]
lrwxrwxrwx   1 root root       10 Oct  6 04:58 libGL.so -> libGL.so.1
lrwxrwxrwx   1 root root       15 Oct  6 04:58 libGL.so.1 -> libGL.so.304.43
-rw-r--r--   1 root root  1076560 Oct  6 04:58 libGL.so.304.43
[...] 
```

我用谷歌搜索了如何将此路径添加到默认库搜索路径，因为我猜它`g++`不会在子文件夹中查找，`nvidia-current`而仅在`/usr/lib`. 所以我`ld.conf.d`在Ubuntu中添加了路径。`ldconfig`我使用以下命令进行了更新和检查：

```
$ ldconfig -p | grep libGL.so
        libGL.so.1 (libc6,x86-64) => /usr/lib/nvidia-current/libGL.so.1
        libGL.so.1 (libc6) => /usr/lib32/nvidia-current/libGL.so.1
        libGL.so (libc6,x86-64) => /usr/lib/nvidia-current/libGL.so
        libGL.so (libc6) => /usr/lib32/nvidia-current/libGL.so 
```

所以一切看起来都很好！仍然（即使在重新启动后），仍然会出现上面的错误。我错过了什么吗？

**编辑：**

添加后`-L/usr/lib/nvidia-current/`，一切正常。但这似乎不是在默认路径中链接库的*正确方法。*

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-27T17:14:50.687

发行版通常不将图形驱动程序的 libGL 安装到系统库路径中，而是安装一些附加目录`/usr/lib`以允许`libGL.so`在同一系统上安装不同的变体。然后到活动`libGL.so`的符号链接由一些集中配置系统创建，例如`alternatives`Ubuntu 和 Debian 使用的。这个配置步骤很可能失败了。

`/usr/lib/nvidia-current`不是标准库路径，因此找不到该库；这也应该意味着，OpenGL 程序不应该工作。也许 Ubuntu 的人对环境变量做了一些事情`LD_LIBRARY_PATH`来规避这个问题。

我个人建议您添加符号链接，因为您应该始终`libGL.so`在默认库路径中添加符号链接，最好`/usr/lib`是在 32/64 位多库系统中`/usr/lib64`和`/usr/lib32`

```
/usr/lib/libGL.so.1 => /usr/lib/nvidia-current/libGL.so.1
/usr/lib32/libGL.so.1 => /usr/lib32/nvidia-current/libGL.so.1
/usr/lib/libGL.so => /usr/lib/nvidia-current/libGL.so
/usr/lib32/libGL.so => /usr/lib32/nvidia-current/libGL.so 
```

您也可以使用`alternatives`系统执行此操作，添加新的替代方案。

# javascript - jquery“slideToggle（）”不起作用

> ID：14057742
> 
> 赞同：0
> 
> 时间：2012-12-27T16:20:47.627
> 
> 标签：javascript, jquery, html, css

我有一个列表，它有一个主列表名称，下面有 10 个子列表，我不想一次显示在我的 html 页面上。我想在页面上显示 4 个子列表，并将链接显示为“更多”。当我将鼠标悬停在“更多”链接上时，它应该会显示其余的子链接。这是我的完整代码：

```
 <!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
    "http://www.w3.org/TR/html4/loose.dtd">
    <html>
    <head>
    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js">
    </script>
    <script > 
     $(document).ready(function(){
      $("#planning_more").hover(function(){
        $("#planning_panel").slideToggle("fast");
      });
    });
    </script>
    <style type="text/css">
    <!--
    a:link {color:#03F; text-decoration:none; text-emphasis:none}    /* unvisited link */
    a:visited {color:#03F; text-decoration:none} /* visited link */
     a:hover {color:#F30; text-decoration:none}   /* mouse over link */
    #planning_panel,#planning_more
    {
     text-align:center;
    }
    #planning_panel
     {
     padding:50px;
     display:none;
    }
     .style2 {font-size: 13px;
        font-family:"Franklin Gothic Medium", "Arial Narrow", Arial, sans-serif;
    }
    .style4 {
        font-size: 18px;
        font-weight: bold;
        color: #FF6600;
    }
    .style44 {
       background-image:url('Background.jpg');
    }
     .style45 { border-left-style: solid; border-left-color: #F60; border-left-width:thin; }
     .style46 { position:relative; top: 50px; }
     .style6 {color: #000000}
     .auto-style1 {
        color:#039;
     }
    -->
     </style>
    </head>

     <body>
      <div align="center">
        <img border="0" src="banner1.jpg" width="800" height="120" alt="Ecommerce Knowledge Base">
      <table width="800" border="0" cellspacing="0" cellpadding="5" height="627"         class="style44">
        <tr>
          <td colspan="2" height="11" width="790">
          </td>
         </tr>
        <tr>
      <td width="263" valign="top" height="602" align="left">
     <table class="style46"> 
           <tr><td><font color="#0000FF" face="Georgia, Times New Roman, Times, serif" size="4" >Planning</font></td></tr>
          <tr><td>web-ecommerce--where-to-begin</td></tr>
          <tr><td>introduction-to-ecommerce</td></tr>
          <tr><td>web-site-analysis----a-study-in-damag</td></tr>
          <tr><td>set-up-your-own-blog-free</td></tr>
          <tr id="planning_more"><td align="right">More...</td></tr><br>
          <div id="planning_panel">
          planning
          </div>

          <tr><td><font color="#0000FF" face="Georgia, Times New Roman, Times, serif" size="4" >Designing & Hosting</font></td></tr>
          <tr><td></td></tr>
          <tr><td></td></tr>
          <tr><td></td></tr>
          <tr><td></td></tr>
          <tr><td align="right">More...</td></tr>

           <tr><td><font color="#0000FF" face="Georgia, Times New Roman, Times, serif" size="4" >Marketing</font></td></tr>
           <tr><td></td></tr>
           <tr><td></td></tr>
           <tr><td></td></tr>
           <tr><td></td></tr>
           <tr><td align="right">More...</td></tr>

          <tr><td><font color="#0000FF" face="Georgia, Times New Roman, Times, serif" size="4" >Technology</font></td></tr>
          <tr><td></td></tr>
           <tr><td></td></tr>
           <tr><td></td></tr>
          <tr><td></td></tr>
           <tr><td align="right">More...</td></tr>
          </table></td>
         <td width="537" valign="top" height="602" class="style45">
           <h1 align="center"><span class="auto-style1"><font size="5">eCommerce: What is it?</font></span><br>
         </h1>

          <p class="MsoNormal" align="left" height="12" class="style45"><span     class="style2">my text
          </span>
            </p>
         </tr>
        </table>

         <hr width="800" noshade>
         <span class="style6"><br>
         <span class="style2"></span></span></div>
          </body>
          </html> 
```

但这不起作用。请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T16:26:47.410

在此处查看工作代码：http: [//jsfiddle.net/loesch/rhTNC/](http://jsfiddle.net/loesch/rhTNC/)

您丢失的`</table>`标签似乎会导致问题。尝试

```
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
<script> 
   $(document).ready(function(){
     $("#planning_more").hover(function(){
       $("#planning_panel").slideToggle("fast");
     });
   });
</script>
<style type="text/css">
   <!--
      #planning_panel,#planning_more
      {
         text-align:center;
      }

      #planning_panel
       {
           padding:50px;
           display:none;            
       }
       -->
</style>
<table class="style46">
   <tr>
      <td><font color="#0000FF" face="Georgia, Times New Roman, Times, serif" size="4">Planning</font></td>
   </tr>
   <tr>
      <td>web-ecommerce--where-to-begin</td>
   </tr>
   <tr>
      <td>introduction-to-ecommerce</td>
   </tr>
   <tr>
      <td>web-site-analysis----a-study-in-damag</td>
   </tr>
   <tr>
      <td>set-up-your-own-blog-free</td>
   </tr>
   <tr id="planning_more">
      <td align="right">More...</td>
   </tr>
   <br />
</table>
<div id="planning_panel">
   planning
</div> 
```

# asp.net - 安排 Crystal Reports 自动运行

> ID：14057749
> 
> 赞同：1
> 
> 时间：2012-12-27T16:21:24.820
> 
> 标签：asp.net, visual-studio-2010, crystal-reports, business-objects, crystal-reports-2010

我目前正在使用 Crystal Reports 版本 13 处理 ASP.NET 4.0 / .NET 4.0 项目。

报告有一个开始日期和结束日期作为参数，我能够呈现托管在业务对象服务器上的报告。

有没有办法安排报告自动运行？我从来没有做过预定的水晶报告，我正在寻找选择。我感谢您的支持！

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T16:48:50.520

I have use this free software [Crystal Delivery](http://www.groffautomation.com/) in past job. works fine

# macos - 进程特定的 /etc/hosts

> ID：14057753
> 
> 赞同：0
> 
> 时间：2012-12-27T16:21:45.130
> 
> 标签：macos, unix, networking, testing, hosts

我正在开发一种与其他服务对话的服务。为了测试这些交互，我有一个假的 http 服务器。我正在使用 node.js 并通过 http 请求进行测试。测试在进程外部运行，所以我不能（也不想）模拟请求/响应。

到目前为止，我有一个环境变量允许我在服务本身内切换主机。但是，我不能将虚假请求/响应基于主机名。

我还运行与真实外部服务交互的服务的开发版本。我可以在测试运行期间以编程方式更改 /etc/hosts，因为我可能不会在运行测试时“使用”开发服务，但我宁愿保持测试沙箱的纯度。

理想情况下，我希望 /etc/hosts 的一个版本仅适用于该进程。这将允许伪造的 http 服务器也收集请求的预期主机。

我也对实现测试主机名沙箱的不同方法持开放态度。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T00:29:25.820

这适用于很多实现，但对您来说可能不可行。你有一个 UNIX/OSX 标签，所以：

你必须把你的进程放在相当于 chroot 监狱的地方。chroot 将根更改为`/`其他位置，例如：`/localroot`.

然后，您可以在`/localroot/etc/hosts`. chroot 进程将其视为 /etc/hosts

有很多关于如何在网络上设置的信息。您创建的任何用户帐户都被“锁定”在那里。

我找不到基本的 OSX chroot 信息，这是更高级的，主要用于 sftp 用户。：

[http://www.macresearch.org/restricted-sftp-mac-os-x-leopard](http://www.macresearch.org/restricted-sftp-mac-os-x-leopard)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-27T16:29:32.443

`/etc/hosts`由`gethostbyname()`实际执行解析的系统调用使用。

没有简单的方法可以按照您想要的方式进行操作。

使用虚假名称/地址的本地 DNS 服务器怎么样？

# ios - 了解AFNetworking ios库AFXMLRequestOperation

> ID：14057754
> 
> 赞同：0
> 
> 时间：2012-12-27T16:21:47.177
> 
> 标签：ios, afnetworking

嗨，我是 AFNetworking 库的新手，我第一次将它集成到我的 iPAD 应用程序中。但是，我很难找到一个可供参考的工作示例。

我在这里找到了 rckoenes AFNetworking POST 的以下解决方案[并获取数据](https://stackoverflow.com/questions/11863817/afnetworking-post-and-get-data-back)。但是我很难实现它。由于该答案已被标记为正确。我假设该库自那时以来已发生更改，并且该示例可能不相关。

非常感谢任何有关工作示例参考的帮助。

```
NSURLRequest *request =  [wsu generateURLRequest:getFavAPI method : @"GET" arguments:nil eventName:USER_FAVS_SUCCESS_NOTIF contentType:nil];
NSLog(@"Request %@", request.description);
AFXMLRequestOperation *favOpertion = [[AFXMLRequestOperation alloc] initWithRequest:request];
//favOpertion.responseXMLParser = [NSXMLParser initialize]; // error: setting the readOnly property.
[favOpertion setCompletionBlockWithSuccess:^(AFHTTPRequestOperation *favOpertion, id responseObject) {
NSLog(@"Response: %@",[favOpertion responseString]); // Never reached here
} failure:^(AFHTTPRequestOperation *favOpertion, NSError *error) {
NSLog(@"Error: %@",[favOpertion error]);   // never reached here
}]; 
```

该代码将请求 desc 打印为有效：http://[server name]/favorites/folders/user/[uid]>

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-28T15:38:53.463

这是默认 SAX 样式解析的[示例](https://stackoverflow.com/questions/10996986/get-the-xml-content-with-afnetworking-library)。人们还进行了一些其他 XML 请求操作，可以为您提供一个实际的 XML 文档：

1.  [AFKissXML请求操作](https://github.com/AFNetworking/AFKissXMLRequestOperation)
2.  [AFGXML请求操作](https://github.com/shawnwall/AFGXMLRequestOperation)

# c# - EF 4.1 使用代码首先不要创建新数据库

> ID：14057756
> 
> 赞同：1
> 
> 时间：2012-12-27T16:21:51.400
> 
> 标签：c#, .net, asp.net-mvc-3, entity-framework, ef-code-first

我使用具有单独层的实体框架 4.1 代码优先方法创建了一个新的 Web：

在模型层，我定义了类模型

在数据层，我定义了存储库类

在数据库层，我实现了存储库类。创建上下文，我实现了 DbContext 来自定义我自己的表。

最后，我将图层的引用添加到网站（表示层）。运行我的网站后，EF 4.1 不在 App_Data 文件夹中创建数据库。我想知道我做错了哪些步骤。请查看我的代码并给我一些建议。提前致谢 ！

我只是添加了我认为其中包含错误的类的代码。模型层中的其他类模型和数据层中的类存储库与错误无关。所以我不在这里写它们。

网络配置：

```
<add name="ApplicationServices" connectionString="Data Source=DESKTOP\Neven;Initial Catalog=aspnetdb;Integrated Security=True" providerName="System.Data.SqlClient" />
      <add name="FashionShopData" connectionString="Data Source=|DataDirectory|FashionShopData.mdf;Initial Catalog=FashionShopData;Integrated Security=True" providerName="System.Data.SqlClient" /> 
```

在 Global.asax 中：

```
 protected void Application_Start()
        {

            AreaRegistration.RegisterAllAreas();

            RegisterGlobalFilters(GlobalFilters.Filters);
            RegisterRoutes(RouteTable.Routes);

            ModelMetadataProviders.Current = new MetadataProvider();
            InitialDatabase();
        }

private static void InitialDatabase()
        {
            var repositoryInitializer = new RepositoryInitializer();
            repositoryInitializer.Initialize();
        } 
```

在数据库 SQL 层中：

上下文

```
 using System.ComponentModel.DataAnnotations;
using System.Data.Entity;
using FashionShop.Data.Repositories;
using FashionShop.Models;

namespace FashipShop.Data.Sql
{

    public partial class FashionShopContext : DbContext, IUnitOfWork
    {
        /// <summary>
        /// This method sets up the database appropriately for the available model objects.
        /// This method only sets up the data tier.  
        /// Any shared or model level requirements (data validations, etc) are on the model objects themselves.
        /// </summary>
        /// <param name="modelBuilder">The model builder object for creating the data model.</param>
        public FashionShopContext()
        : base("name=FashionShopData")
    {

    }
        protected override void OnModelCreating(DbModelBuilder modelBuilder)
        {

            SetupUserEntity(modelBuilder);

            SetupCategoryEntity(modelBuilder);

            SetupProductEntity(modelBuilder);

            SetupOrderEntity(modelBuilder);

        }

        private static void SetupUserEntity(DbModelBuilder modelBuilder)
        {
            modelBuilder.Entity<User>().HasKey(r => r.UserId);
            modelBuilder.Entity<User>().Property(r => r.UserId).HasDatabaseGeneratedOption(
                DatabaseGeneratedOption.Identity);

            modelBuilder.Entity<User>().HasMany(o => o.Orders);

            modelBuilder.Entity<User>().Property(r => r.Email).IsRequired();
        }

        private static void SetupCategoryEntity(DbModelBuilder modelBuilder)
        {
            modelBuilder.Entity<Category>().HasKey(c => c.CateId);
            modelBuilder.Entity<Category>().Property(c => c.CateId).HasDatabaseGeneratedOption(
                DatabaseGeneratedOption.Identity);
            modelBuilder.Entity<Category>().Property(c => c.ParentId).IsOptional();
            modelBuilder.Entity<Category>().HasMany(p => p.Products);
        }

        private static void SetupProductEntity(DbModelBuilder modelBuilder)
        {
            modelBuilder.Entity<Product>().HasKey(p => p.ProductId);
            modelBuilder.Entity<Product>().Property(p => p.ProductId).HasDatabaseGeneratedOption(
                DatabaseGeneratedOption.Identity);

            modelBuilder.Entity<Product>().HasRequired(c => c.Category).WithRequiredPrincipal().WillCascadeOnDelete(true);
        }

        private static void SetupOrderEntity(DbModelBuilder modelBuilder)
        {
            modelBuilder.Entity<Order>().HasKey(o => o.OrderId);
            modelBuilder.Entity<Order>().Property(o => o.OrderId).HasDatabaseGeneratedOption(
                DatabaseGeneratedOption.Identity);
            modelBuilder.Entity<Order>().HasMany(p => p.Products).WithMany(o => o.Orders).Map(op =>
                                                                                                  {
                                                                                                      op.ToTable(
                                                                                                          "ProductOrder");
                                                                                                      op.MapLeftKey(
                                                                                                          "OrderId");
                                                                                                      op.MapRightKey(
                                                                                                          "ProductId");
                                                                                                  });
        }

        public DbSet<User> Users { get; set; }

        public DbSet<Category> Categories { get; set; }

        public DbSet<Product> Products { get; set; }

        public DbSet<Order> ShoppingCarts { get; set; }

        void IUnitOfWork.SaveChanges()
        {
            base.SaveChanges();
        }
    }
} 
```

存储库初始化代码：

```
 using System.Data.Entity;
using System.Data.Entity.Infrastructure;
using FashionShop.Data.Repositories;

namespace FashipShop.Data.Sql
{
    public class RepositoryInitializer : IRepositoryInitializer
    {

        public RepositoryInitializer()
        {
            Database.DefaultConnectionFactory = new SqlConnectionFactory();
        }

        public void Initialize()
        {
            Database.SetInitializer(new CreateDatabaseIfNotExists<FashionShopContext>());
        }
    }
} 
```

通用存储库：

```
 using System;
using System.Data;
using System.Linq;
using System.Linq.Expressions;
using FashionShop.Data.Repositories;

namespace FashipShop.Data.Sql.Repositories
{    
    public abstract class GenericRepository<T>: IGenericRepository<T> where T:class {
        protected IUnitOfWork UnitOfWork { get; set; }
        protected FashionShopContext Context { get { return (FashionShopContext)this.UnitOfWork; } }

        public GenericRepository(IUnitOfWork unitOfWork)
        {
            if (unitOfWork == null) throw new ArgumentNullException("unitOfWork");
            this.UnitOfWork = unitOfWork;
        }

        public virtual IQueryable<T> GetAll()
        {
            IQueryable<T> query  = Context.Set<T>();
            return query;
        }

        public IQueryable<T> FindBy(Expression<Func<T, bool>> predicate)
        {
            IQueryable<T> query = Context.Set<T>().Where(predicate);
            return query;
        }

        public virtual void Add(T entity)
        {
            Context.Set<T>().Add(entity);
            Context.SaveChanges();
        }

        public virtual void Delete(T entity)
        {
            Context.Set<T>().Remove(entity);
            Context.SaveChanges();
        }

        public virtual void Edit(T entity)
        {
            Context.Entry(entity).State = EntityState.Modified;
            Context.SaveChanges();
        }
    }

} 
```

我发现了错误，因为我从未在表示层中使用代码，所以 EF 不初始化数据库，我需要添加

```
FashionShopContext context = new FashionShopContext(); 
context.Database.Initialize(true); 
```

进入 Application_Start()。但是在我更改代码之后，还有另一个错误：

```
"A network-related or instance-specific error occurred while establishing a connection to SQL Server. The server was not found or was not accessible. Verify that the instance name is correct and that SQL Server is configured to allow remote connections. (provider: Named Pipes Provider, error: 40 - Could not open a connection to SQL Server" 
```

这是我使用的连接字符串：

```
<add name="FashionShopData" connectionString="Data Source=|DataDirectory|FashionShopData.mdf;Initial Catalog=FashionShopData;Integrated Security=True" providerName="System.Data.SqlClient" /> 
```

我的连接字符串是错误的吗？我该如何纠正？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T17:37:45.400

尝试..

```
<add name="ContextName" connectionString="Data Source=ServerName;Initial Catalog=DBCataloName;Integrated Security=True;MultipleActiveResultSets=True;App=EntityFramework"
   providerName="System.Data.SqlClient" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T17:47:02.520

您的**问题是启动**您在 DbContext 派生类上设置的连接字符串。

它应该如下所示。

```
public partial class FashionShopContext : DbContext, IUnitOfWork
{

   public static string ConnectionString { get; set; }

   public FashionShopContext() : base(ConnectionString ?? "FashionShopData")
    {

    }
} 
```

**全球.asax**

```
protected void Application_Start()
{
FashionShopContext.ConnectionString = ConfigurationManager.ConnectionStrings["FashionShopData"].ConnectionString;
} 
```

我希望这对你有帮助。

# objective-c - 在 appDelegate 中保存 UIViewController

> ID：14057757
> 
> 赞同：0
> 
> 时间：2012-12-27T16:21:52.850
> 
> 标签：objective-c, uiviewcontroller

我正在使用 Xcode 4.3 并且需要知道当前视图的父视图控制器。

我也在使用故事板。

`self.parentViewController`总是返回`nil`。

`AppDelegate`我看到了将类中的父视图控制器保存为属性的不同答案。例如，要创建一个变量：`UIViewController parentViewController`在 AppDelegate 和代码中编写：

```
appDelegate.parentViewController = self; 
```

我担心它会消耗内存 - 因为这是一个沉重的物体。

`aretnViewController`使用故事板时最好的方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T16:42:48.293

只要您仅存储对它的引用（在您的情况下，在应用程序委托中），对象是否“重”并不重要。创建第二个对象会有所不同，但这条线

```
appDelegate.parentViewController = self; 
```

不这样做，它只是存储对对象的引用。

我知道这并不能回答您的直接问题，但我认为您应该继续使用“在应用程序委托中存储引用”方法。

# asp.net - 从 Sitecore 中的内容项获取每个清单项的布尔值

> ID：14057760
> 
> 赞同：0
> 
> 时间：2012-12-27T16:22:04.477
> 
> 标签：asp.net, sitecore, sitecore6

我在 Sitecore 中有一个项目，其中包含一个内容部分，它是一个清单。此清单包含我已输入到 Sitecore 的多个 Active Directory 组的名称。

当项目加载时，我试图循环检查清单中的所有复选框以查看它是否被选中。

在上一篇文章的帮助下，我能够使用以下代码获取每个复选框旁边列出的名称（您还可以查看我尝试使用的注释掉的代码以获取复选框的值。） ：

```
 Dim ADCheckList As Sitecore.Data.Fields.MultilistField = Sitecore.Context.Item.Fields("ADGroupAccess")

    If ADCheckList IsNot Nothing Then
        Dim i As Integer = 0
        For i = 0 To ADCheckList.Count - 1
            If IsInGroup(ADCheckList.GetItems(i).Fields("name").Value.ToString) Then
                Response.Write("User in group. Now let's see if the group is checked.")
            ''' Trying to see if checkbox is checked or not. 
            ''' Dim isChecked = DirectCast(ADCheckList.GetItems(i).Fields("name").Section, Boolean)
            End If
        Next
     End IF 
```

如何获取复选框的布尔值？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T17:12:19.247

字段类型仅存储您选择的项目的 ID（作为管道分隔列表），它不存储整个可能性列表。

如果您查看`Template`创建项目的 ，您将看到`datasource`该字段的 。这将是一个项目的路径，即`/sitecore/content/home/myfolderofthings`该项目的子项将是您在`checklist`.

例如，您可以遍历数据源位置中的项目，获取它们的`item.ID`属性并查看是否`ADCheckList.Items.Contains(item.ID)`（或类似的东西）来获取布尔值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-29T13:41:43.870

斯蒂芬的回答正确地指出，该`checklist`字段仅存储选定 ID 的管道分隔列表，您可以通过在内容编辑器或[Sitecore Rocks](http://visualstudiogallery.msdn.microsoft.com/44a26c88-83a7-46f6-903c-5c59bcd3d35b)中查看原始值来查看这一点。

我已经包含了一些示例代码，这些代码具有获取清单中显示的所有项目的列表的方法以及仅检索所选项目的方法。我希望这有帮助。

```
using System;
using System.Collections.Generic;

using Sitecore.Data.Fields;
using Sitecore.Data.Items;

namespace Cms.Website.layouts
{
    public partial class CheckList_SO : System.Web.UI.UserControl
    {
        protected void Page_Load(object sender, EventArgs e)
        {
            if (!IsPostBack)
            {
                var contextItem = Sitecore.Context.Item;
                const string checkListFieldName = "List";

                SelectedItems.DataSource = contextItem.SelectedItemsInChecklist(checkListFieldName);
                SelectedItems.DataBind();

                FullItemList.DataSource = contextItem.AllItemsInChecklist(checkListFieldName);
                FullItemList.DataBind();
            }
        }
    }

    public static class ItemExtensions
    {
        private static readonly Item[] EmptyItemArray = new Item[] { };

        public static IEnumerable<Item> AllItemsInChecklist(this Item item, string checkListFieldName)
        {
            var fieldItem = item.Template.GetField(checkListFieldName);
            if (fieldItem != null)
            {
                var listSource = fieldItem.Source;
                if (!string.IsNullOrEmpty(listSource))
                {
                    var sourceRoot = Sitecore.Context.Database.GetItem(listSource);
                    if (sourceRoot != null)
                    {
                        return sourceRoot.Children.ToArray();
                    }
                }
            }

            return EmptyItemArray;
        }

        public static IEnumerable<Item> SelectedItemsInChecklist(this Item item, string checkListFieldName)
        {
            MultilistField checklist = item.Fields[checkListFieldName];
            return checklist != null ? checklist.GetItems() : EmptyItemArray;
        }
    }
} 
```

# wpf - 将 FrameworkElement 及其 DataContext 保存到图像文件没有成功

> ID：14057763
> 
> 赞同：7
> 
> 时间：2012-12-27T16:22:13.070
> 
> 标签：wpf, render, datacontext

我有一个名为 UserControl1 的简单 UserControl，其中包含一个 TextBlock：

```
 <UserControl x:Class="WpfApplication2.UserControl1"
         xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
         xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
         xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
         xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
         mc:Ignorable="d" 
         d:DesignHeight="300" d:DesignWidth="300">
     <Grid>
         <TextBlock Text="{Binding}"/>
     </Grid>
</UserControl> 
```

我初始化了它的一个新实例，并在代码中给它一个 DataContext。当窗口关闭时，我必须将此控件绘制到图像文件中。UserControl 不会呈现已创建文件中的有界文本。

![在此处输入图像描述](../Images/88460105b5a467cfbed07b0eb2833525.png)

这是我使用用户控件的代码：

```
public partial class MainWindow : Window
{
    public MainWindow()
    {
        InitializeComponent();

        Closing += MainWindow_Closing;
    }

    void MainWindow_Closing(object sender, CancelEventArgs e)
    {
        UserControl1 uc = new UserControl1();
        uc.DataContext = "hello";
        uc.Height = 100;
        uc.Width = 100;
        uc.Background = Brushes.LightBlue;
        DrawToImage(uc);
    }

    private void DrawToImage(FrameworkElement element)
    {
        element.Measure(new Size(double.PositiveInfinity, double.PositiveInfinity));
        element.Arrange(new Rect(element.DesiredSize));

        RenderTargetBitmap bitmap = new RenderTargetBitmap((int)element.Width, (int)element.Height,
                                                           120.0, 120.0, PixelFormats.Pbgra32);
        bitmap.Render(element);

        BitmapEncoder encoder = new PngBitmapEncoder();
        encoder.Frames.Add(BitmapFrame.Create(bitmap));

        using (Stream s = File.OpenWrite(@"C:\555.png"))
        {
            encoder.Save(s);
        }
    }
} 
```

我希望它足够清楚，任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-30T12:42:47.290

您只是在手动测量/排列控件后忘记强制对控件进行布局更新（这不足以强制绑定解析）。

[对UpdateLayout](http://msdn.microsoft.com/fr-fr/library/system.windows.uielement.updatelayout%28v=VS.95%29.aspx)的简单调用使其工作：

```
private void DrawToImage(FrameworkElement element)
{
    element.Measure(new Size(double.PositiveInfinity, double.PositiveInfinity));
    element.Arrange(new Rect(element.DesiredSize));
    element.UpdateLayout();

    RenderTargetBitmap bitmap = new RenderTargetBitmap((int)element.Width, (int)element.Height,
                                                        120.0, 120.0, PixelFormats.Pbgra32);
    bitmap.Render(element);

    BitmapEncoder encoder = new PngBitmapEncoder();
    encoder.Frames.Add(BitmapFrame.Create(bitmap));

    using (Stream s = File.OpenWrite(@"C:\555.png"))
    {
        encoder.Save(s);
    }
} 
```

编辑：有关何时解决绑定的更多信息：[链接](https://stackoverflow.com/questions/13875537/when-are-data-bindings-applied/13879146#13879146)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T17:02:32.640

尝试在 userControl1.Loaded 事件上调用函数 SaveImage()

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-30T10:21:00.207

如果我这样做它会起作用，但不确定这是你想要的：

```
<Window x:Class="DrawImage.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml" xmlns:DrawImage="clr-namespace:DrawImage"
        Title="MainWindow" Height="350" Width="525">
    <Grid>
        <DrawImage:UserControl1 x:Name="uc" Visibility="Hidden"/>
    </Grid>
</Window>

void MainWindow_Closing(object sender, CancelEventArgs e)
{
    uc.DataContext = "hello";
    uc.Height = 100;
    uc.Width = 100;
    uc.Background = Brushes.LightBlue;
    uc.Visibility = Visibility.Visible;
    DrawToImage(uc);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-30T10:28:07.707

**编辑**

我现在能够重现该问题。如果我在 Window 构造函数中设置 DataContext ，那么它就可以工作。如果我在 Winndow_Closed 事件中设置它，我会得到与你得到的完全相同的结果。

我想可能没有解决方法，因为 WPF 需要一些时间才能在 UI 线程上实际呈现文本。如果在 WPF 在 UI 线程上呈现文本之前呈现 PNG，它将不会出现在 PNG 上。似乎不存在解决方法，因为在`Closed`事件处理程序运行时窗口将被销毁。一方面，当您希望 UI 线程呈现控件时，无法阻止 UI 线程防止窗口被破坏。

我建议在渲染控件后立即渲染图像，并在关闭窗口时保存图像文件。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-03-02T09:25:48.933

我在我的博客中发布了一篇文章（将 png 透明度放入帐户（导致黑色背景））：将 [FrameworkElement 保存为图像](http://blog.gamadev.com/?p=11185)

```
FrameworkElement element = myControl.Content;
// you can set the size as you need.
Size theTargetSize = new Size(1500,2000)
element.Measure(new System.Windows.Size(double.PositiveInfinity, double.PositiveInfinity));
element.Arrange(new Rect(theTargetSize ));
// to affect the changes in the UI, you must call this method at the end to apply the new changes
element.UpdateLayout(); 
```

您可以在博客文章中找到完整的鳕鱼。

# jquery - jQuery 插件 - 添加功能

> ID：14057770
> 
> 赞同：1
> 
> 时间：2012-12-27T16:23:13.433
> 
> 标签：jquery, plugins

我有一个使用流行插件模式的 jquery 插件。该插件打开一个模态窗口，也可以关闭模​​态窗口。我还想添加更多功能，例如通过按退出键关闭窗口或通过单击模式外部关闭窗口。如何将此新代码集成到插件中？

注意：还要注意，事件处理程序附加到使用插件创建的模态窗口之外的正文和文档容器。我知道为了向插件添加东西，我可以将方法附加到 Plugin.prototype.xxx。我可以在这里做同样的事情还是我们应该以不同的方式处理这种情况？

```
//press 'Esc' key - hide Modal
        $('body').bind('keydown', function(e) {
            if (e.keyCode == 27) { // "Esc" Key
                   if ( $('.show').is(':visible') ) {
                       $('.Close').click();
                   }  
                   return false;
            }
        });

        //click outside Modal - hide Modal
        $(document).mouseup(function (e){
            var container = $(".Window");
            if (!container.is(e.target) && container.has(e.target).length === 0){
                 $('.Close').click();
            }
        }); 
```

我用于插件的流行插件模式：

```
;(function ( $, window, document, undefined ) {
    // Create the defaults once
    var pluginName = 'defaultPluginName',
        defaults = {
            propertyName: "value"
        };

    // The actual plugin constructor
    function Plugin( element, options ) {
        this.element = element;

        this.options = $.extend( {}, defaults, options) ;

        this._defaults = defaults;
        this._name = pluginName;

        this.init();
    }

    Plugin.prototype.init = function () {

    };

    $.fn[pluginName] = function ( options ) {
        return this.each(function () {
            if (!$.data(this, 'plugin_' + pluginName)) {
                $.data(this, 'plugin_' + pluginName, 
                new Plugin( this, options ));
            }
        });
    }

})( jQuery, window, document ); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T16:32:15.193

只需在 init 方法中添加代码，但请确保您只针对所需的元素。

```
Plugin.prototype.init = function(){
    this.bindEventHandlers();
}
Plugin.prototype.bindEventHandlers = function(){
    var self = this;

    $('body').bind('keydown', function(e) {
        if (e.keyCode == 27) { // "Esc" Key
               if ( $('.show', self.element).is(':visible') ) {
                   $('.Close', self.element).click();
               }  
               return false;
        }
    });

    //click outside Modal - hide Modal
    $(document).mouseup(function (e){
        var container = $(".Window", self.element);
        if (!container.is(e.target) && container.has(e.target).length === 0){
             $('.Close', self.element).click();
        }
    });
} 
```

# oracle - Oracle ODI JKM for PostgreSQL：创建触发器

> ID：14057771
> 
> 赞同：0
> 
> 时间：2012-12-27T16:23:13.760
> 
> 标签：oracle, postgresql, triggers, jython, oracle-data-integrator

我需要实现从 PostgreSQL 数据库到 Oracle 数据库的更改数据捕获 (CDC)。

由于 PostgreSQL 的 CDC 没有日志化知识模块，我正在尝试调整 JKM Oracle Simple，如[https://forums.oracle.com/forums/thread.jspa?threadID=620355](https://forums.oracle.com/forums/thread.jspa?threadID=620355)中所述。

但是，我在使用 Jython“创建触发器”命令时遇到了问题。

在 ODI 中，我已将“创建触发器”命令替换为以下内容：

```
drop trigger if exists public_t_payment on public.payment;

drop sequence if exists idSequence;

CREATE SEQUENCE idSequence;

CREATE OR REPLACE FUNCTION public_t_payment_trigger() RETURNS TRIGGER AS $$
declare
    V_FLAG  VARCHAR(1);
    V_id    integer NOT NULL DEFAULT nextval('idSequence');
begin
    if inserting then
        V_id := NEW.id;
        V_FLAG := 'I';
    end if;

    if updating then
        V_id := NEW.id;
        V_FLAG := 'I';
    end if;

    if deleting then
        V_id := OLD.id;
        V_FLAG := 'D';
    end if;

    insert into public.j$payment
    (
        JRN_SUBSCRIBER,
        JRN_CONSUMED,
        JRN_FLAG,
        JRN_DATE,
        id
    )
    select  JRN_SUBSCRIBER,
        '0',
        V_FLAG,
        sysdate,
        V_id
    from    public."SNP_SUBSCRIBERS"
    where   JRN_TNAME = 'public.payment';
    /* The following line can be uncommented for symetric replication */
    /* and  upper(USER) <> upper(''postgres'') */
end; $$ LANGUAGE plpgsql;

create trigger public_t_payment
after insert or update or delete on public.payment
for each row
execute procedure public_t_payment_trigger(); 
```

上面的代码在 PostgreSQL 上复制和执行时效果很好，但是当我在源表上执行“启动日志”时，ODI 给了我以下错误：

```
ODI-1217: Session payment (712013) fails with return code 7000.
ODI-1226: Step payment fails after 1 attempt(s).
ODI-1231: An error occurred while performing a Journal operation on datastore payment.
Caused By: org.apache.bsf.BSFException: exception from Jython:
SyntaxError: ("no viable alternative at character '$'", ('<string>', 6, 19, 'returns trigger as $test\n')) 
```

问题似乎与触发器的返回“as”名称（$$）有关，但我不知道如何在 Jython 中解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T09:38:48.627

我设法解决了这个问题。

“创建触发器”命令的技术设置为 Jython，但我的代码纯粹是 PostgreSQL。

将技术下拉列表从“Jython”更改为“PostgreSQL”允许执行创建触发器命令而不会出现任何错误。

但是，由于我希望使命令尽可能与原始命令相似，因此我更新了上述代码以包含必要的 Jython 语法。

请注意，尽管上述问题中发布的 SQL 在 PostgreSQL 中执行，但它并不完全正确，因为在触发触发器时它仍然会出错。

我已将在 PostgreSQL 源数据库上执行的 Create Trigger 命令的完整 Jython 代码粘贴在下面，也许有人会发现它很有用，因为 Oracle JKM 没有 PostgreSQL。

```
triggerCmd = """
drop trigger if exists "<%=odiRef.getJrnInfo("JRN_FULL_TRIGGER")%>" on <%=odiRef.getJrnInfo("FULL_TABLE_NAME")%>;

drop sequence if exists "seq_<%=odiRef.getJrnInfo("JRN_FULL_TRIGGER")%>_id";

create sequence "seq_<%=odiRef.getJrnInfo("JRN_FULL_TRIGGER")%>_id";

create or replace function "fn_<%=odiRef.getJrnInfo("JRN_FULL_TRIGGER")%>"()
returns trigger as $$
declare
    V_FLAG  VARCHAR(1);
    V_id integer NOT NULL DEFAULT nextval('"seq_<%=odiRef.getJrnInfo("JRN_FULL_TRIGGER")%>_id"');
begin
    if (TG_OP = 'INSERT') then
        <%=odiRef.getColList("", "V_[COL_NAME] := new.[COL_NAME];", "\n\t\t", "", "PK")%>
        V_FLAG := 'I';
    end if;

    if (TG_OP = 'UPDATE') then
        <%=odiRef.getColList("", "V_[COL_NAME] := new.[COL_NAME];", "\n\t\t", "", "PK")%>
        V_FLAG := 'I';
    end if;

    if (TG_OP = 'DELETE') then
        <%=odiRef.getColList("", "V_[COL_NAME] := old.[COL_NAME];", "\n\t\t", "", "PK")%>
        V_FLAG := 'D';
    end if;

    insert into  <%=odiRef.getJrnInfo("JRN_FULL_NAME")%>
    (
        JRN_SUBSCRIBER,
        JRN_CONSUMED,
        JRN_FLAG,
        JRN_DATE,
        <%=odiRef.getColList("", "[COL_NAME]", ",\n\t\t", "", "PK")%>
    )
    select  JRN_SUBSCRIBER,
        '0',
        V_FLAG,
        now(),
        <%=odiRef.getColList("", "V_[COL_NAME]", ",\n\t\t", "", "PK")%>
    from    <%=odiRef.getJrnInfo("SNP_JRN_SUBSCRIBER")%>
    where   JRN_TNAME = '<%=odiRef.getJrnInfo("FULL_TABLE_NAME")%>';
    /* The following line can be uncommented for symetric replication */
    /* and  upper(USER) <> upper('<%=odiRef.getInfo("DEST_USER_NAME")%>') */
return new;
end $$ language plpgsql;

create trigger "<%=odiRef.getJrnInfo("JRN_FULL_TRIGGER")%>"
after insert or update or delete on <%=odiRef.getJrnInfo("FULL_TABLE_NAME")%>
for each row    
execute procedure "fn_<%=odiRef.getJrnInfo("JRN_FULL_TRIGGER")%>"();
"""

# Create the statement
myStmt = myCon.createStatement()

# Execute the trigger creation
myStmt.execute(triggerCmd)

myStmt.close()
myStmt = None

# Commit, just in case
# myCon.commit() 
```

# list - Haskell 代数类型和函数转换

> ID：14057772
> 
> 赞同：0
> 
> 时间：2012-12-27T16:23:16.770
> 
> 标签：list, haskell, algebraic-data-types

我必须制作一个将 House 转换为 NHouse 的功能。

```
data House = House { hworking :: Working, hfinished :: Finished}

type Working = [Roof] , type Finished = [Roof]

data NHouse = NHouse {rot :: [NRoof]} 

data NRoof = NRoof {h :: Roof, st :: Status }

data Status = Working | Finished 
```

我想过做一个辅助功能，将 NRoof 中的每个屋顶转换，然后将其应用于房屋中的每个屋顶。

但我就是想不通。我正在做这样的事情：

```
nWorking :: Roof -> NRoof
nWorking x = NRoof {x, Working } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T16:31:27.533

是的，你正朝着正确的方向前进。您可以创建一个函数来转换`Roof`为`NRoof`给定的状态。

```
transform :: Status -> Roof -> NRoof
transform s r = NRoof r s 
```

然后你可以把这个函数映射到你房子里的屋顶列表上。

```
h2n :: House -> NHouse
h2n (House w f) = NHouse $
                map (transform Working) w ++
                map (transform Finished) f 
```

在一行中，这可以写成

```
h2n (House w f) = NHouse $ map (flip NRoof Working) w ++ map (flip NRoof Finished) f 
```

# iphone - 无法将界面方向旋转为纵向颠倒

> ID：14057778
> 
> 赞同：6
> 
> 时间：2012-12-27T16:23:26.973
> 
> 标签：iphone, ios6, storyboard, portrait, interface-orientation

在 iPhone 模拟器和 iPhone 3GS (iOS 6) 上，我都无法将方向设置为纵向倒置。我只有一个 ViewController。我在其中添加了这段代码：

```
-(BOOL) shouldAutorotate{
 return YES; 
}

-(UIInterfaceOrientation) preferredInterfaceOrientationForPresentation{
 return UIInterfaceOrientationPortraitUpsideDown;
}

- (NSUInteger)supportedInterfaceOrientations{
 return UIInterfaceOrientationPortrait | UIInterfaceOrientationPortraitUpsideDown;
}

-(BOOL) shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)toInterfaceOrientation{
  if (toInterfaceOrientation==UIInterfaceOrientationPortrait || toInterfaceOrientation==UIInterfaceOrientationPortraitUpsideDown) {
    return YES;
  }
 return NO;
} 
```

我还将它添加到 AppDelegate.m：

```
-(NSUInteger) application:(UIApplication *)application supportedInterfaceOrientationsForWindow:(UIWindow *)window{
    return UIInterfaceOrientationPortrait | UIInterfaceOrientationPortraitUpsideDown;
} 
```

我还检查了 plist 文件，两个方向都在那里。在我的故事板上，Simulated Metrics Orientation 设置为 Inferred。我在 applicationDidFinishLaunchingWithOptions 中什么都不做，除了返回 YES。我刚刚在这个 ViewController 中添加了一个 UIImageView。是否有可能使这种定向工作？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-27T16:38:10.330

`supportedInterfaceOrientations`返回一个`NSUInteger`. 它返回视图控制器支持的所有界面方向，一个界面方向值的掩码。

您需要返回`UIInterfaceOrientationMask`Enum 中定义的值，如下所示：

```
- (BOOL)shouldAutorotate {
    return YES;
}

- (NSUInteger)supportedInterfaceOrientations {
    return (UIInterfaceOrientationMaskPortrait | UIInterfaceOrientationMaskPortraitUpsideDown);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T10:33:25.583

我知道有一个有效的答案，但对于仍然遇到同样问题的其他人：

我有一个与 Xcode 相关的类似问题：尽管在所有情况下都返回`YES`，但不支持纵向旋转。`- (BOOL) shouldAutorotateToInterfaceOrientation:`结果是在我的目标项目编辑器的摘要窗口中启用了“支持的界面方向”：

![在此处输入图像描述](../Images/e452294d114bd44942e6b30037ce0cc9.png)

上面的“iPhone/iPad 部署信息”选择没有这样做，尽管我只使用 iPhone sim，但似乎是“iPad 部署信息”部分控制了模拟器将做什么。一旦我在该部分中启用了相同的方向，iPhone 模拟就会工作，我能够测试模拟器旋转时发生的情况......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-08-02T06:35:19.577

我为此尝试了很多方法。它似乎只是一种工作方式，但通过应用程序全局，不仅适用于特定的视图控制器。

首先，您必须在目标常规设置中检查设备方向的颠倒。

[![检查设备方向颠倒](../Images/25cc6410889a19bb2fd04a760e9d3991.png)](https://i.stack.imgur.com/2O9Um.png)

然后，在导航控制器扩展中，您覆盖该`supportedInterfaceOrientations`方法

```
extension UINavigationController {
    override public func supportedInterfaceOrientations() -> UIInterfaceOrientationMask {
        return .All
    }
} 
```

# jquery - 防止元素在圆形 CSS3 动画中自行旋转

> ID：14057780
> 
> 赞同：9
> 
> 时间：2012-12-27T16:23:32.653
> 
> 标签：jquery, html, css

好的，所以这对我来说真的很沮丧，首先，如果我的问题框架有误，请编辑它（如果你这么认为）......好吧，因为我的屏幕会向你解释，但我仍然希望我的元素应该保持特定的形状而不是随着动画旋转，我错过了一些非常愚蠢的东西吗？

**我想要什么**：

![我想要的是](../Images/bd1aae657012e91befb6ba47bd8ae662.png)

**发生了什么**：

![发生了什么](../Images/89211acb85235d60f85e099890fff863.png)

*欢迎使用 jQuery 解决方案（但我更喜欢 CSS3 解决方案）*

> 注意：不要继续元素的不透明度，1 是用 Paint 和其他用 Photoshop 制作的，What Matter's Is Square 应该旋转为方形

HTML

```
<div><span></span></div> 
```

CSS

```
@keyframes round_round {
    from {
        transform: rotate(0deg);
    }
    to {
        transform: rotate(360deg);
    }
}

div {
    width: 50px;
    height: 50px;
    animation: round_round 3s linear infinite;
    margin: 50px auto 0;
    transform-origin: 50% 150px;
    background-color: #8FC1E0;
}

span {
    display: inline-block;
    margin: 5px;
    height: 5px;
    width: 5px;
    background: #c00000;
} 
```

[**演示**](http://jsfiddle.net/s7Bsn/)

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-12-27T16:36:58.757

绝对定位，不要更改`transform-origin`，将其保留在`50% 50%`。

[然后简单地旋转元素，通过半径值平移它，然后取消第一次旋转 - 你可以在这里](http://dabblet.com/gist/3866686)看到链式变换是如何工作的。

```
@keyframes rot {
  0% { transform: rotate(0deg) translate(150px) rotate(0deg); }
  100% { transform: rotate(360deg) translate(150px) rotate(-360deg); }
} 
```

# [演示](http://dabblet.com/gist/4389712)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-27T16:58:52.637

我刚刚为那些不想使用 CSS 3 动画（例如出于兼容性原因）的人编写了一个纯 JavaScript 实现。

# [演示](http://jsfiddle.net/JQSU4/2/)

```
// requestAnim shim layer by Paul Irish
window.requestAnimFrame = (function(){
  return  window.requestAnimationFrame       || 
          window.webkitRequestAnimationFrame || 
          window.mozRequestAnimationFrame    || 
          window.oRequestAnimationFrame      || 
          window.msRequestAnimationFrame     || 
          function(/* function */ callback, /* DOMElement */ element) {
            window.setTimeout(callback, 1000 / 60);
          };
})();

function CircleAnimater(elem, radius, speed) {
    this.elem = elem;
    this.radius = radius;
    this.angle = 0;
    this.origX = this.elem.offsetLeft;
    this.origY = this.elem.offsetTop;

    this.shouldStop = false;
    this.lastFrame = 0;
    this.speed = speed;
}

CircleAnimater.prototype.start = function () {
    this.lastFrame = +new Date;
    this.shouldStop = false;
    this.animate();
}

CircleAnimater.prototype.stop = function () {
    this.shouldStop = true;
}

CircleAnimater.prototype.animate = function () {
    var now    = +new Date,
        deltaT = now - this.lastFrame;

    var newY = Math.sin(this.angle) * this.radius;
    var newX = Math.cos(this.angle) * this.radius;

    this.elem.style.left = (this.origX + newX) + "px";
    this.elem.style.top = (this.origY + newY) + "px";
    this.angle += (this.speed * deltaT);

    this.lastFrame = +new Date;

    if (!this.shouldStop) {
        var $this = this;
        requestAnimFrame(function () {
            $this.animate();
        });
    }        
} 
```

# emulation - Windows Phone 8 模拟器的 Hyper V 安全权限错误

> ID：14057786
> 
> 赞同：3
> 
> 时间：2012-12-27T16:23:50.810
> 
> 标签：emulation, windows-phone-8, hyper-v

启动 Windows Phone 8 模拟器时遇到问题。我看到以下消息

[http://i.stack.imgur.com/bHqGT.png](http://i.stack.imgur.com/bHqGT.png)

我遵循了[Windows Phone Emulator 故障排除站点](http://msdn.microsoft.com/en-us/library/windowsphone/develop/ff626524%28v=vs.105%29.aspx)上的指南（它位于页面的中间），但它不起作用。我对我的计算机具有管理员访问权限。我在控制台管理器中看不到本地 Hyper-V 管理员组。有任何想法吗？

编辑：澄清一下，我可以启动模拟器，只是每次都会出现这个弹出窗口，要求我将自己添加到本地 hyper-v 安全组。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-05-19T16:11:50.570

我只是以“以管理员身份运行”身份打开 Visual Studio。它解决了我的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T18:21:35.020

我有类似的问题 - 这解决了它 -

[http://blogs.msdn.com/b/virtual_pc_guy/archive/2008/01/17/allowing-non-administrators-to-control-hyper-v.aspx](http://blogs.msdn.com/b/virtual_pc_guy/archive/2008/01/17/allowing-non-administrators-to-control-hyper-v.aspx)

干杯。

# c# - 为什么要使用 yield 关键字，而我只能使用普通的 IEnumerable？

> ID：14057788
> 
> 赞同：171
> 
> 时间：2012-12-27T16:24:26.130
> 
> 标签：c#, yield

鉴于此代码：

```
IEnumerable<object> FilteredList()
{
    foreach( object item in FullList )
    {
        if( IsItemInPartialList( item ) )
            yield return item;
    }
} 
```

为什么我不应该这样编码？：

```
IEnumerable<object> FilteredList()
{
    var list = new List<object>(); 
    foreach( object item in FullList )
    {
        if( IsItemInPartialList( item ) )
            list.Add(item);
    }
    return list;
} 
```

我有点理解`yield`关键字的作用。它告诉编译器构建某种东西（迭代器）。但为什么要使用它？除了代码稍微少一点之外，它对我有什么用？

* * *

## 回答 #1

> 赞同：241
> 
> 时间：2012-12-27T16:28:09.033

使用`yield`会使集合变得*懒惰。*

假设您只需要前五个项目。按照您的方式，我必须遍历*整个列表*才能获得前五个项目。使用`yield`，我只遍历前五个项目。

* * *

## 回答 #2

> 赞同：128
> 
> 时间：2012-12-27T16:29:59.427

迭代器块的好处是它们可以懒惰地工作。所以你可以写一个这样的过滤方法：

```
public static IEnumerable<T> Where<T>(this IEnumerable<T> source,
                                   Func<T, bool> predicate)
{
    foreach (var item in source)
    {
        if (predicate(item))
        {
            yield return item;
        }
    }
} 
```

这将允许您根据需要过滤流，从不一次缓冲超过一个项目。例如，如果您只需要返回序列中的第一个值，为什么要将*所有内容*复制到新列表中？

作为另一个示例，您可以使用迭代器块轻松创建*无限流。*例如，这是一个随机数序列：

```
public static IEnumerable<int> RandomSequence(int minInclusive, int maxExclusive)
{
    Random rng = new Random();
    while (true)
    {
        yield return rng.Next(minInclusive, maxExclusive);
    }
} 
```

您将如何在列表中存储无限序列？

我的[Edulinq 博客系列](http://codeblog.jonskeet.uk/category/edulinq/)提供了一个 LINQ to Objects 的示例实现，它*大量*使用了迭代器块。LINQ 从根本上讲是懒惰的——把东西放在一个列表中根本行不通。

* * *

## 回答 #3

> 赞同：42
> 
> 时间：2012-12-27T16:29:19.783

使用“列表”代码，您必须先处理完整列表，然后才能将其传递到下一步。“yield”版本将处理过的项目立即传递到下一步。如果那个“下一步”包含一个“.Take(10)”，那么“产量”版本将只处理前 10 个项目而忘记其余的。“列表”代码将处理所有内容。

这意味着当您需要进行大量处理和/或要处理很长的项目列表时，您会看到最大的不同。

* * *

## 回答 #4

> 赞同：23
> 
> 时间：2012-12-27T16:32:18.280

您可以使用`yield`返回不在列表中的项目。这是一个小示例，它可以在列表中无限迭代直到取消。

```
public IEnumerable<int> GetNextNumber()
{
    while (true)
    {
        for (int i = 0; i < 10; i++)
        {
            yield return i;
        }
    }
}

public bool Canceled { get; set; }

public void StartCounting()
{
    foreach (var number in GetNextNumber())
    {
        if (this.Canceled) break;
        Console.WriteLine(number);
    }
} 
```

这写

```
0
1
2
3
4
5
6
7
8
9
0
1
2
3
4 
```

...ETC。到控制台，直到取消。

* * *

## 回答 #5

> 赞同：10
> 
> 时间：2012-12-27T16:30:39.960

```
object jamesItem = null;
foreach(var item in FilteredList())
{
   if (item.Name == "James")
   {
       jamesItem = item;
       break;
   }
}
return jamesItem; 
```

当上面的代码用于遍历 FilteredList() 并假设 item.Name == "James" 将满足列表中的第二个项目时，使用的方法`yield`将产生两次。这是一种懒惰的行为。

其中使用 list 的方法会将所有 n 个对象添加到列表中，并将完整列表传递给调用方法。

这正是可以突出显示 IEnumerable 和 IList 之间差异的用例。

* * *

## 回答 #6

> 赞同：8
> 
> 时间：2013-04-22T22:42:17.940

我见过的最好的真实世界例子`yield`是计算斐波那契数列。

考虑以下代码：

```
class Program
{
    static void Main(string[] args)
    {
        Console.WriteLine(string.Join(", ", Fibonacci().Take(10)));
        Console.WriteLine(string.Join(", ", Fibonacci().Skip(15).Take(1)));
        Console.WriteLine(string.Join(", ", Fibonacci().Skip(10).Take(5)));
        Console.WriteLine(string.Join(", ", Fibonacci().Skip(100).Take(1)));
        Console.ReadKey();
    }

    private static IEnumerable<long> Fibonacci()
    {
        long a = 0;
        long b = 1;

        while (true)
        {
            long temp = a;
            a = b;

            yield return a;

            b = temp + b;
        }
    }
} 
```

这将返回：

```
1, 1, 2, 3, 5, 8, 13, 21, 34, 55
987
89, 144, 233, 377, 610
1298777728820984005 
```

这很好，因为它允许您快速轻松地计算出无限级数，使您能够使用 Linq 扩展并仅查询您需要的内容。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2014-07-23T23:31:38.793

> 为什么使用[产量]？除了代码稍微少一点之外，它对我有什么用？

有时有用，有时没用。如果必须检查并返回整个数据集，那么使用 yield 将没有任何好处，因为它所做的只是引入了开销。

当 yield 真正发挥作用时，只有部分集合被返回。我认为最好的例子是排序。假设您有一个对象列表，其中包含今年的日期和美元金额，并且您希望查看该年度的前几 (5) 条记录。

为了做到这一点，列表必须按日期升序排序，然后取前 5 个。如果在没有产量的情况下这样做，则必须对*整个*列表进行排序，直到确保最后两个日期是有序的。

但是，对于产量，一旦确定了前 5 个项目，排序就会停止并且结果可用。这可以节省大量时间。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-01-02T11:48:21.327

yield return 语句允许您一次只返回一项。您正在收集列表中的所有项目并再次返回该列表，这是内存开销。

# java - 拆分链表节点多个数据并显示结果

> ID：14057789
> 
> 赞同：0
> 
> 时间：2012-12-27T16:24:26.623
> 
> 标签：java, split, linked-list, key, nodes

我想使用文本文件来使用 Java SE 应用程序填充链接列表。文本文件具有以下格式：

名字姓氏移动家庭办公室

我想将这些行作为节点插入到链表中！然后我想从已从文本文件填充的链表中搜索特定节点！

使用 firstnamelastname 作为键，我想在找到特定节点后将其与节点数据进行比较（数据将被拆分为与“键”进行比较），我想使用 split("") 拆分该节点数据；并显示结果！

我只是想知道提示做这一切我会非常感谢提前请帮助我！

我已经生成了一个 java 源代码，但它不能正常工作，因为它总是给我最后的节点数据，所以如果它完全错误的话，请检查我犯的错误给你的任何想法！

```
 try {
        String fullname;
        String mobile;
        String home;
        String mobile2;
        String office;

        Node current = first;

        while (current.data != key) {

            String splitter[] = current.data.split(" ");

            fullname = splitter[0];
            mobile = splitter[1];
            home = splitter[2];
            mobile2 = splitter[3];
            office = splitter[4];

            if (fullname == null ? key == null : fullname.equals(key)) {
                mobilefield.setText(mobile);
                homefield.setText(home);
                mobilefield2.setText(mobile2);
                officefield.setText(office);
            } else {
                throw new FileNotFoundException(
                        "SORRY RECORD NOT LISTED IN DATABASE");
            }
            break;
        }
    } catch (Exception e) {
        JOptionPane.showMessageDialog(this, e.getMessage()
                + "\nPLEASE TRY AGAIN !", "Search Error",
                JOptionPane.ERROR_MESSAGE);
    }

(key is as=firstname+lastname;) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T16:37:27.960

我会使用 ArrayList （需要更少的内存，对大多数操作有更好的性能）

代码对我来说看起来不错，但我不会`current.data`为每个条目拆分。

我会使用类似的测试

```
if(current.data.startsWith(key)){
  String splitter[]=current.data.split(" ");

  ...

} 
```

只有当这是真的我才会分开`current.data`因为只有在这种情况下你才需要*移动**家庭**办公室*

# android - 是否可以从地址中找到位置？

> ID：14057790
> 
> 赞同：0
> 
> 时间：2012-12-27T16:24:27.613
> 
> 标签：android, android-location

我不确定这是否可以在android中完成。我有一个地方的方向（例如：Langestraat 44 2018 Antwerpen），我想知道纬度和经度。我要求太多还是可以做到？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T16:39:15.167

是的，您可以使用以下代码从地址获取纬度和经度

```
 List<Address> addressList = geocoder.getFromLocationName(  
                locationName, 5);  
        if (addressList != null && addressList.size() > 0) {  
            int lat = (int) (addressList.get(0).getLatitude() * 1000000);  
            int lng = (int) (addressList.get(0).getLongitude() * 1000000);  
            GeoPoint pt = new GeoPoint(lat, lng);  
            mapView.getController().setZoom(15);  
            mapView.getController().setCenter(pt);  
        } 
```

# mysql - 带有连接、HAVING 和 GROUP BY 的 MySQL DELETE 语句

> ID：14057791
> 
> 赞同：3
> 
> 时间：2012-12-27T16:24:28.033
> 
> 标签：mysql, sql, sql-delete

我有一个项目表和另一个报告。每个报告都有一个外键链接到正在报告的项目。

我正在尝试删除此查询中显示的所有项目：

```
SELECT items.id, title, SUM(weight) AS total_weight, SUM(weight)*10/views AS score 
FROM items, reports 
WHERE items.id = reports.item_id 
GROUP BY items.id 
HAVING score >= 50; 
```

尝试这样的事情：

```
DELETE items 
FROM (SELECT items.id, title, SUM(weight) AS total_weight, SUM(weight)*10/views AS score 
    FROM items, reports 
    WHERE items.id = reports.item_id 
    GROUP BY items.id 
    HAVING score >= 50)
AS T; 
```

给我这个错误信息：

```
ERROR 1109 (42S02): Unknown table 'items' in MULTI DELETE 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-27T16:37:06.573

在 MySQL 中，您必须小心子查询。我认为以下工作：

```
DELETE FROM items 
WHERE id IN (select *
             from (SELECT items.id 
                   FROM items join reports 
                        on items.id = reports.item_id 
                   GROUP BY items.id 
                   HAVING SUM(weight)*10/views >= 50
                  )
            ) 
```

它通过使用额外的子查询来欺骗编译器接受查询。我还修正了你的`join`语法。

但是，以下使用相关子查询将查询重写为更常见的语法：

```
delete from items
where exists (select r.item_id
              from reports r
              where r.item_id = items.item_id 
              group by r.item_id
              having SUM(r.weight)*10/items.views >= 50
             ) 
```

这是猜测，`weight`而是`views`来自`reports. Otherwise, you need to put the`前面的 items 别名。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-27T16:26:32.480

```
DELETE FROM items 
WHERE 
  id IN (
    SELECT 
      items.id 
    FROM items, reports 
    WHERE items.id = reports.item_id 
    GROUP BY items.id 
    HAVING SUM(weight)*10/views >= 50) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-27T16:27:50.890

我相信你的`delete`说法是错误的。应该是`delete from tablename where [condition]`。

```
 DELETE FROM items 
    WHERE 
      id IN (
        Select T.id from (SELECT items.id, title, SUM(weight) AS total_weight, SUM(weight)*10/views AS score 
FROM items, reports 
WHERE items.id = reports.item_id 
GROUP BY items.id 
HAVING score >= 50) T) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-27T16:40:28.587

尝试这个：

```
DELETE FROM items 
WHERE id IN (SELECT id 
             FROM (SELECT i.id itemId, (SUM(weight) * 10 / views) score
                   FROM items i INNER JOIN reports r ON i.id = r.item_id 
                   GROUP BY itemId HAVING score >= 50
                  ) AS A
            ); 
```

# twitter-bootstrap - jQuery Elastic SlideShow 是否与 Twitter Bootstrap 兼容？

> ID：14057792
> 
> 赞同：1
> 
> 时间：2012-12-27T16:24:36.263
> 
> 标签：twitter-bootstrap

我在 Twitter Bootstrap 中使用 Elastic Image Slide Show 来自以下内容：

[http://tympanus.net/codrops/2011/11/21/elastic-image-slideshow-with-thumbnail-preview/](http://tympanus.net/codrops/2011/11/21/elastic-image-slideshow-with-thumbnail-preview/)

它在主图像的右侧显示了额外的边距，并且图像在较小的屏幕中缩小了。但是如果我禁用脚本，图像看起来很完美，并且在移动视图中不会缩小（只有 1 个图像可见）但是插件根本不起作用......

所以这意味着这个插件不能与引导程序一起使用？？

或者任何人有任何解决方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-07T08:45:09.090

解决方案是使用此代码覆盖引导 img 属性

```
.ei-slider img{
    max-width: none;
} 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-02-28T08:22:27.373

当然可以，问题在于 css 本身可能有 css 属性相互重叠并导致它中断。现在，要找到它可以是什么，将是一项艰巨但具有指导意义的工作。

祝你好运！

# javascript - 使用successfunc的jqGrid内联编辑

> ID：14057802
> 
> 赞同：1
> 
> 时间：2012-12-27T16:25:24.547
> 
> 标签：javascript, jquery, jqgrid

我有一个允许内联编辑的网格。这是我处理它的onselect：

```
onSelectRow: function(id)
        {

            $('tr[id="'+id+'"]').change(function () {

                saveparameters = {
                    "successfunc" : function(response) {

                        alert(response)

                    },
                    "url" : null,
                    "extraparam" : {},
                    "aftersavefunc" : null,
                    "errorfunc": null,
                    "afterrestorefunc" : null,
                    "restoreAfterError" : true,
                    "mtype" : "POST"
                }

                $('#breakdownGrid').jqGrid('saveRow', id, saveparameters);

            });

            if(id && id!==lastsel)
            {

                editparameters = {
                    "keys" : false,
                    "oneditfunc" : null,
                    "successfunc" : null,
                    "url" : null,
                    "extraparam" : {},
                    "aftersavefunc" : null,
                    "errorfunc": null,
                    "afterrestorefunc" : null,
                    "restoreAfterError" : true,
                    "mtype" : "POST"

                }

                $('#breakdownGrid').jqGrid('restoreRow',lastsel);
                $('#breakdownGrid').jqGrid('editRow',id, editparameters); lastsel=id;
            }
        }

    }); 
```

您可以看到我在 tr 上有一个更改事件，该事件触发并运行 saveRow。如果不使用successfunc或者我只是在successfunc中返回true，这可以正常工作。我试图弄清楚如何在成功函数中使用来自服务器的响应。我需要对我的 editurl 页面进行额外检查。我不确定我需要从该页面发回什么。我可以在该页面上完成所有工作并返回真假，但它不起作用。我现在有警报，它只显示 [object object]。

我也尝试过发回 JSON 并解析它，但我无法让它工作。

对此的任何帮助都会很棒。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-29T10:26:08.997

请尝试 alert(response.responseText);

# javascript - 搞清楚 Node.js + Redis + Express.js 和可爱的异步回调

> ID：14057807
> 
> 赞同：0
> 
> 时间：2012-12-27T16:25:34.463
> 
> 标签：javascript, node.js, asynchronous, express, redis

首先，请原谅我，这对我来说是一个非常未知的领域......

得到以下内容：

```
app.get('/user/:user_id/followings', function(req, res) {
    var response = {}
      , userId = req.params.user_id
      , ids = req.param('id').split(',')
      , prefix = 'user'
      , suffix = 'follower_ids';

    for (var i=0; i<ids.length; i++) {
      var id = ids[i]
        , key = prefix+':'+ids[i];

      console.log('1: ' + key);
      checkMembership(userId, id, key, suffix, function(error, reply){
        response[key] = reply;
        console.log('2: ' + key + ': ' + reply);
      });
    }

    res.json(response);
  });

  function checkMembership(userId, id, key, suffix, callback) {
    var lookup = key+':'+suffix;

    client.sismember(lookup, userId, callback);
  } 
```

对于以下路径：/user/1/followings?id=1,2,3,4,1000

我在控制台中得到了这个：

```
1: user:1
1: user:2
1: user:3
1: user:4
1: user:1000
2: user:1000: 0
2: user:1000: 1
2: user:1000: 1
2: user:1000: 1
2: user:1000: 0 
```

这在浏览器中：{}

我知道它正在发生，因为事情是异步发生的......我只是不确定如何解决它。

checkMembership 函数中记录的键是错误的。控制台应为第二个回调输出如下：

```
2: user:1: 0
2: user:2: 1
2: user:3: 1
2: user:4: 1
2: user:1000: 0 
```

帮助！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-27T20:39:20.057

你是对的，因为 checkMembership 是异步的。因此，您的 for 循环已完成，而 checkMembership 仍在等待答案。

让我们从简化您的示例开始：

```
for (i = 0; i < 3; i += 1) {     

  console.log('inside: ', i);  

  process.nextTick(function () {  
    console.log('outside: ', i);    
  });                           

};      

console.log('end'); 
```

输出：

```
inside:  0
inside:  1
inside:  2  
end                              
outside:  2
outside:  2
outside:  2 
```

所以第一个问题是当计数器已经为 2 时执行回调。您可以通过创建闭包来解决此问题。

```
for (i = 0; i < 3; i += 1) {

  console.log('inside: ', i);

  (function () {
    var j = i; 
    process.nextTick(function () {
      console.log('outside: ', j);
    });    
  })(); 

};    

console.log('end'); 
```

输出：

```
inside:  0 
inside:  1 
inside:  2  
end
outside:  0                         
outside:  1 
outside:  2 
```

这将解决您的问题`response[key] = reply;`。

这个例子的第二个问题是 end 在 async 函数完成之前被记录。在您的代码中，这意味着在完成设置键+回复`res.json`之前将调用它。`checkMembership`

因此，我们需要找出所有回调何时完成，然后才能记录结束。因为你知道你的列表有多大，你也知道有多少回调。这意味着我们可以计算每次回调完成的时间。如果计数大小相等，您就知道调用了所有回调。

在代码中它看起来像这样：

```
var size = 3;                               
var counter = 0;                            

var globalCallback = function () {    

  counter += 1;                             

  if (counter === size) {                   
    console.log('end');                     
  }                                         

}                                           

for (i = 0; i < size; i += 1) {             

  console.log('inside: ', i);               

  (function () {                            
    var j = i;                              
    process.nextTick(function () {          
      console.log('outside: ', j);          
      globalCallback();                     
    });                                     
  })();                                     

}; 
```

我们的最终输出：

```
inside:  0
inside:  1
inside:  2
outside:  0
outside:  1
outside:  2
end 
```

我更喜欢使用控制流库，而不是每次你有一个异步函数列表时都写一个这样的计数器。像 async.js 这样的东西非常流行。

帮助我的是对我的代码有一个更实用的视图。您必须将其视为值列表，并且对于要应用函数的每个值。这也是 async.js 看起来有点像 underscore.js 的原因。

# gwt - GWT + RPC 服务 - 错误 404 NOT_FOUND

> ID：14057808
> 
> 赞同：0
> 
> 时间：2012-12-27T16:25:49.960
> 
> 标签：gwt, servlets

我正在用 gmaps 构建一个 gwt 应用程序。当我通过单击按钮调用服务时，eclipse 中的控制台会显示以下内容： PS：该服务仅用于测试目的。我还没有实现真正的服务！

```
[WARN] 404 - POST /findmeagasstationweb/inserirpostorpc (127.0.0.1) 1422 bytes
Request headers
  Host: 127.0.0.1:8888
  User-Agent: Mozilla/5.0 (Windows NT 6.1; WOW64; rv:17.0) Gecko/20100101 Firefox/17.0
  Accept: text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8
  Accept-Language: pt-pt,pt;q=0.8,en;q=0.5,en-us;q=0.3
  Accept-Encoding: gzip, deflate
  Connection: keep-alive
  Referer: http://127.0.0.1:8888/FindMeAGasStationWeb.html?gwt.codesvr=127.0.0.1:9997
  X-GWT-Permutation: HostedMode
  X-GWT-Module-Base: http://127.0.0.1:8888/findmeagasstationweb/
  Content-Type: text/x-gwt-rpc; charset=utf-8
  Content-Length: 225
  Pragma: no-cache
  Cache-Control: no-cache
  Response headers
  Content-Type: text/html; charset=iso-8859-1
  Content-Length: 1422 
```

我的应用程序的以下代码：

定义的 Servlet

```
<!-- Servlets -->
<servlet>
<servlet-name>insereServlet</servlet-name>
<servlet-class>com.pz.findmeagasstationweb.server.InsereNovoPostoImpl</servlet-class>
</servlet>

<servlet-mapping>
<servlet-name>insereServlet</servlet-name>
<url-pattern>/inserirpostorpc/</url-pattern>
</servlet-mapping> 
```

类 FindMeAGasStationWeb

```
package com.pz.findmeagasstationweb.client;
//imports are omitted 

public class FindMeAGasStationWeb implements EntryPoint {

   Label latLabel = new Label("Latitude");
   TextBox latBox = new TextBox();

   Label longLabel = new Label("Longitude");
   TextBox longBox = new TextBox();

   Label nameLabel = new Label("Nome do Posto");
   TextBox nameBox = new TextBox();

   Label descLabel = new Label("Descricao");
   TextBox descBox = new TextBox();

   Label sc95Label = new Label("Preco Gasolina 95");
   TextBox sc95Box = new TextBox();

   Label sc98Label = new Label("Preco Gasolina 98");
   TextBox sc98Box = new TextBox();

   Label gasoleoLabel = new Label("Preco Gasoleo");
   TextBox gasoleoBox = new TextBox();

   Button inserir = new Button("Inserir Posto");

   Grid grid = new Grid(2, 8);

   public int controlo;

public void onModuleLoad() {

    final AsyncCallback<String> callback = new AsyncCallback<String>(){
        public void onFailure(Throwable caught){
            Window.alert("Falha a inserir os dados."+caught);

        }

        public void onSuccess(String result){
            Window.alert(""+result);
        }
    };

    grid.setWidget(0, 0, latLabel);
    grid.setWidget(0, 1, latBox);
    grid.setWidget(1, 0, longLabel);
    grid.setWidget(1,  1, longBox);
    grid.setWidget(0, 2, nameLabel);
    grid.setWidget(0, 3, nameBox);
    grid.setWidget(1, 2, descLabel);
    grid.setWidget(1, 3, descBox);
    grid.setWidget(0, 4, sc95Label);
    grid.setWidget(0, 5, sc95Box);
    grid.setWidget(1, 4, sc98Label);
    grid.setWidget(1, 5, sc98Box);
    grid.setWidget(0, 6, gasoleoLabel);
    grid.setWidget(0, 7, gasoleoBox);
    grid.setWidget(1, 7, inserir);

    latBox.setEnabled(false);
    longBox.setEnabled(false);

    RootPanel.get().add(grid);

    inserir.addClickHandler(new ClickHandler() {
       public void onClick(ClickEvent event) {

           //.inserirPosto(latBox.getText(), longBox.getText(), nameBox.getText(),     descBox.getText(), 
           try{
               InsereNovoPostoAsync getServico = (InsereNovoPostoAsync)     GWT.create(InsereNovoPosto.class);
               ServiceDefTarget serviceDef = (ServiceDefTarget) getServico;
               serviceDef.setServiceEntryPoint(GWT.getModuleBaseURL()
                        + "inserirpostorpc");
               getServico.inserirPosto("1","2", "a", "b", "1", "2", "3",     callback);

           }
           catch(Exception ex){
               Window.alert(""+ex);
           }
           //getServico().inserirPosto(latBox.getText(), longBox.getText(),     nameBox.getText(), descBox.getText(), sc95Box.getText(), sc98Box.getText(),     gasoleoBox.getText(), callback);
          /*
          (latBox.getText(), longBox.getText(), nameBox.getText(),
                   descBox.getText(), sc95Box.getText(), sc98Box.getText(), 
                   gasoleoBox.getText(), callback);

          /*RootPanel.get().add(
                new Label("Thanks for your submission."));
          Window.alert("Submit name=" + nameBox.getText()
                + "\naddress=" + addrBox.getText() + "\nphone="
                + phoneBox.getText());*/
       }
    });

    MapWidget mapWiget = new MapWidget(LatLng.newInstance(48.136559, 11.576318), 13);
    mapWiget.setSize("1024px", "500px");
    mapWiget.addControl(new SmallMapControl());
    mapWiget.addControl(new MapTypeControl());
    mapWiget.addMapClickHandler(new MapClickHandler() {
      public void onClick(MapClickEvent e) {
        MapWidget sender = e.getSender();
        Overlay overlay = e.getOverlay();
        LatLng point = e.getLatLng();
        if (overlay != null && overlay instanceof Marker) {
          sender.removeOverlay(overlay);
          latBox.setText("");
          longBox.setText("");
          controlo = 0;
        } else {
            if(controlo==0){
                String a[] = point.toString().split(",");
                String b = a[0].toString();
                b = b.substring(1);
                String c = a[1].toString();
                c = c.substring(0, c.length()-1);
                latBox.setText(""+b);
                longBox.setText(""+c);
                sender.addOverlay(new Marker(point));
                controlo=1;
            }

        }
      }
    });
    RootPanel.get().add(mapWiget);
 }
} 
```

服务：InsereNovoPosto

```
package com.pz.findmeagasstationweb.client;

import com.google.gwt.user.client.rpc.RemoteService;
import com.google.gwt.user.client.rpc.RemoteServiceRelativePath;

@RemoteServiceRelativePath("inserirpostorpc")
public interface InsereNovoPosto extends RemoteService {
public String inserirPosto(String lat, String longi, String nome, 
        String descricao, String sc95, String sc98, String gasoleo);
} 
```

InsereNovoPostoAsync

```
package com.pz.findmeagasstationweb.client;

import com.google.gwt.user.client.rpc.AsyncCallback;

public interface InsereNovoPostoAsync {
public void inserirPosto(String lat, String longi, String nome, 
        String descricao, String sc95, String sc98, String gasoleo,     AsyncCallback<String> callback);
} 
```

InsereNovoPostoImpl

```
package com.pz.findmeagasstationweb.server;

import com.pz.findmeagasstationweb.client.InsereNovoPosto;
import com.google.gwt.user.client.Window;
import com.google.gwt.user.server.rpc.RemoteServiceServlet;

@SuppressWarnings("serial")
public class InsereNovoPostoImpl extends RemoteServiceServlet implements InsereNovoPosto {

@Override
public String inserirPosto(String lat, String longi, String nome,
        String descricao, String sc95, String sc98, String gasoleo) {
    Window.alert(""+lat+"-"+longi+"-"+nome+"-"+descricao+"-"+sc95+"-"+sc98+"-"+gasoleo);
    return nome;
}
} 
```

查找megasstationweb.gwt.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<!--
When updating your version of GWT, you should also update this DTD reference,
so that your app can take advantage of the latest GWT module capabilities.
-->
<!DOCTYPE module PUBLIC "-//Google Inc.//DTD Google Web Toolkit 2.5.0//EN"
"http://google-web-toolkit.googlecode.com/svn/tags/2.5.0/distro-source/core/src/gwt-module.dtd">
<module rename-to='findmeagasstationweb'>
<!-- Inherit the core Web Toolkit stuff.                        -->
<inherits name='com.google.gwt.user.User'/>

<!-- Inherit the default GWT style sheet.  You can change       -->
<!-- the theme of your GWT application by uncommenting          -->
<!-- any one of the following lines.                            -->
<inherits name='com.google.gwt.user.theme.clean.Clean'/>
<!-- <inherits name='com.google.gwt.user.theme.standard.Standard'/> -->
<!-- <inherits name='com.google.gwt.user.theme.chrome.Chrome'/> -->
<!-- <inherits name='com.google.gwt.user.theme.dark.Dark'/>     -->

<!-- Other module inherits                                      -->
<inherits name='com.google.gwt.maps.GoogleMaps'/>
<script src='http://maps.google.com/maps?gwt=1&amp;file=api&amp;v=2' />

<!-- Specify the app entry point class.                         -->
<entry-point class='com.pz.findmeagasstationweb.client.FindMeAGasStationWeb'/>

<!-- Specify the paths for translatable code                    -->
<source path='client'/>
<source path='shared'/>

</module> 
```

知道出了什么问题吗？任何帮助都会很棒...在此先感谢，并为我的英语不好感到抱歉！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-28T05:32:43.790

这里是完整的登录 rpc：

onModuleLoad：

```
private final String loginRpc="loginrpc";
private final LoginServiceAsync loginService = GWT.create(LoginService.class);
((ServiceDefTarget) loginService).setServiceEntryPoint(loginRpc);

    loginService.LoginRPC(
                new AsyncCallback<obj>() {

                    @Override
                    public void onFailure(Throwable caught) {
                        caught.printStackTrace();

                    }
                     @Override
                    public void onSuccess(Object obj) { 
//TODO
                    }}
                }); 
```

Web.xml

```
 <servlet>
    <servlet-name>loginrpc</servlet-name>
    <servlet-class>com.my.test.LoginServiceImpl</servlet-class>
  </servlet>

  <servlet-mapping>
    <servlet-name>loginrpc</servlet-name>
    <url-pattern>/loginrpc</url-pattern>
  </servlet-mapping> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T17:18:01.600

这是web.xml中的url模式问题，请更改它。

```
<url-pattern>/findmeagasstationweb/inserirpostorpc/</url-pattern> 
```

要调用 RPC，您编写了如下代码

```
 serviceDef.setServiceEntryPoint(GWT.getModuleBaseURL()
                        + "inserirpostorpc"); 
```

这里 GWT.getModuleBaseURL() 是“项目模块名称”+ inserirpostorpc。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-27T17:35:20.723

您与发出 RPC 请求的 url 不匹配。

1) rpc 创建中的 URL 模式

```
serviceDef.setServiceEntryPoint(GWT.getModuleBaseURL()
                        + "inserirpostorpc"); 
```

或者

2) 您在 web.xml 中的 URL 模式

```
<url-pattern>/inserirpostorpc/</url-pattern> 
```

您可以更改其中任何一个以避免 404 错误。删除 GWT.getModuleBaseURL() 或将 web.xml 中的 URL 模式更改为 / **findmeagasstationweb** /inserirpostorpc/

只需保持所有 rpc 创建和 web.xml 映射的一致性。

# iphone - 初始化自定义 UIViewController

> ID：14057811
> 
> 赞同：1
> 
> 时间：2012-12-27T16:26:11.970
> 
> 标签：iphone, objective-c, uiviewcontroller, initialization

我有基于 TabBar 的 iPhone 应用程序，并且在应用程序委托中 2 个默认视图控制器由苹果初始化（如果您在创建应用程序时选择标签栏基础应用程序）。

```
UIViewController *rootViewController = [[tabBarBetFirstViewController alloc] initWithNibName:@"tabBarBetFirstViewController" bundle:nil];
UIViewController *accountViewController = [[tabBarBetSecondViewController alloc] initWithNibName:@"tabBarBetSecondViewController" bundle:nil]; 
```

为什么它没有像这样初始化：

```
tabBarBetFirstViewController *rootViewController = [[tabBarBetFirstViewController alloc] initWithNibName:@"tabBarBetFirstViewController" bundle:nil];
tabBarBetSecondViewController *accountViewController = [[tabBarBetSecondViewController alloc] initWithNibName:@"tabBarBetSecondViewController" bundle:nil]; 
```

？？？

那是一样的吗？还是只是苹果添加的那些默认值？如果我想再添加一个标签，我会写：

```
UIViewController *third = [ThirdViewController alloc].....]; 
```

或者

```
ThirdViewController *third = [ThirdViewController alloc]....]; 
```

当然最后我有：

```
self.tabBarController = [[UITabBarController alloc] init];
self.tabBarController.viewControllers = [NSArray arrayWithObjects:rootViewController, accountViewController, third, nil]; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T16:32:24.053

`ThirdViewController`是 的子类`UIViewController`，所以你可以两者都写。但是，如果您以后想使用该变量`third`来调用特定于 的方法`ThirdViewController`，那么您应该使用

```
ThirdViewController *third = [ThirdViewController alloc]....]; 
```

总结一下：在这个简单的场景中，没有一种正确的“做”方式。从这个问题中吸取的重要教训（如果还不清楚的话）是理解*为什么*可以将`ThirdViewController`实例分配给`UIViewController`变量（因为子类关系）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T16:55:40.587

1）如果你想在你的 ThirdViewController 中使用任何实例方法或属性，那么你必须使用

```
ThirdViewController *third = [ThirdViewController alloc]....]; 
```

2）如果您不需要这样做，您可以使用

```
UIViewController *third = [ThirdViewController alloc]....]; // it'd make no difference 
```

为了更安全，imo，第一种情况是一种很好的做法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-27T16:58:37.007

在这种情况下，我看不出有什么区别，我宁愿按照你的方式去做。但在类似于以下情况的情况下，Apple 的方式似乎更好：

```
UIViewController *vc;

if ( some_case ){

    vc = [YourViewController1 alloc]// ...;
    [ (YourViewController1 *) vc doSomeThing]; // You might need to use casting for instance messages
    //...
}

else {

    vc = [YourViewController2 alloc]//...;
}

[self.navigationController pushViewController:vc animated:YES];
[vc release]; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-27T16:30:28.750

您使用

```
ThirdViewController *third = [ThirdViewController alloc]....]; 
```

方法。不知道为什么 Apple 使用另一种方法。我这个简单的例子没有任何区别。但是，当您有要设置的属性时，最好使用类名。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-27T16:32:13.833

这取决于，如果您有一个想要自定义界面的视图控制器，您将希望它成为 UIViewController 的子类。如果 ThirdViewController 是 UIViewController 的子类，那么您在此处所述的代码：

```
ThirdViewController *third = [ThirdViewController alloc]....]; 
```

会产生预期的结果。Apple 的方法仅适用于没有任何属性的通用 View Controller，因此理想情况下，您希望所有选项卡都是 UIViewController 子类。

# javascript - 尝试遍历主干中的集合以输出 DOM 中的属性

> ID：14057812
> 
> 赞同：0
> 
> 时间：2012-12-27T16:26:15.323
> 
> 标签：javascript, backbone.js

我最近将我的主干 js 文件更新到了最新版本，你知道什么东西正在破坏 - 太令人沮丧了。我在一个视图中实例化一个集合，我试图遍历集合，但它只输出集合中的最后一项无法弄清楚为什么这是我的代码

```
 NavView = Backbone.View.extend({  
el : $('ul'), 
initialize: function(){

 _.bindAll(this, 'render');
  this.navCollection = new NavigationCollection([ {name: "home", href: '/home'},{name: "about", href:'/about'},{name: "contact", href: '/contact'}]); 
  this.render();

}, 
```

我已经尝试了很多方法来呈现下面的集合代码

```
 render : function() {
  this.navCollection.each(function (item) {
        $(this.el).append("<li><a href=" + item.get("href") + ">" + item.get("name") + "</a></li>");
    }, this);
    return this; // remember this for chaining
  //also tried this method as well

 _.each(this.navCollection.models, function(item){
        //$(this.el).append("<li><a href=" + item.get("href") + ">" + item.get("name") + "</a></li>");
        $("<li><a href=" + item.get("href") + ">" + item.get("name") + "</a></li>").appendTo(this.el);
    },this)
    return this; // remember this for chaining
 }, 
```

无论哪种方式，它只输出最后一个项目联系人而不是三个项目，请参见此处[http://dalydd.com/projects/backbone/backbone.html](http://dalydd.com/projects/backbone/backbone.html)

```
var NavigationItem = Backbone.Model.extend({
    defaults: {
        name: '',
        href: '',
        last: false,
        id: ''
    },
    initialize: function() {

    }
});

var NavigationCollection = Backbone.Collection.extend({
    model: NavigationItem,
}); 
```

在它输出所有内容之前，但是当我将主干更新到较新版本时，它只打印出 1 - 一如既往地感谢任何帮助。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T16:56:48.283

在 NavigationItem 定义中，将 id 的默认值设置为空字符串：

```
var NavigationItem = Backbone.Model.extend({
    defaults: {
        name: '',
        href: '',
        last: false,
        id: ''
    }
}); 
```

在 Backbone 0.9.9 中，模型以相反的顺序添加，[重复的模型被拒绝](http://documentcloud.github.com/backbone/docs/backbone.html#section-84)，一个空字符串被接受为有效的 id，留下你收藏中的最后一个模型。删除 id 的默认值以解决您的问题

```
var NavigationItem = Backbone.Model.extend({
    defaults: {
        name: '',
        href: '',
        last: false
    }
}); 
```

*   重现您的问题的小提琴：http: [//jsfiddle.net/nikoshr/PmFEz/](http://jsfiddle.net/nikoshr/PmFEz/)
*   修改后的小提琴：http: [//jsfiddle.net/nikoshr/PmFEz/1/](http://jsfiddle.net/nikoshr/PmFEz/1/)

# powershell - 文件计数差异

> ID：14057814
> 
> 赞同：1
> 
> 时间：2012-12-27T16:26:18.333
> 
> 标签：powershell

我正在使用 Powershell 获取存储在服务器上的文件列表。毕竟，我用 Windows 属性做了一个比较。我注意到文件数量之间存在差异。这可能是什么原因造成的？

这是我使用的代码 - 它返回了**70453**行/文件

```
Get-ChildItem  \\server\share -recurse | Where {!$_.PsIsContainer} | 
Select-Object Directory, Name, Length, CreationTime, LastWriteTime | 
ConvertTo-Csv | Tee -FilePath "H:\CSV - All Files\AllFiles.csv" | ConvertFrom-Csv 
```

当我在共享上执行 Windows 属性时，它返回了**72308 个**文件（12,589 个文件夹）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T16:52:47.763

我运行了与上面相同的代码，但添加了 -force 命令（在谷歌搜索如何使用 Powershell 搜索系统文件之后）。数字一致。

# jakarta-ee - ServletContextListener 中的异常及其影响

> ID：14057816
> 
> 赞同：0
> 
> 时间：2012-12-27T16:26:27.477
> 
> 标签：jakarta-ee, servlets

在我们的 Web 应用程序中，我们需要一些来自 Web 服务列表的信息。一旦我们得到这些信息，我们就把它放进去`Application Context`。我们在应用程序启动时使用`ServletContextListener`.

让我们假设 Web 服务由于某种原因而关闭并`ServletContextListner`给出了一些`ConnectionTimeOutException`.

这会影响应用程序中所有 servlet 的初始化吗？

保存这个最好的地方是哪个？`Servlet`还是`ServletContextListener`？我们可以将此信息放在`init()`servlet 的方法中，并将其设置`load-startup-value`为正数。

你能告诉我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T16:30:52.383

这似乎不是最强大的解决方案。您正在将启动依赖项构建到服务的核心中。我认为你最好将初始化构建到应用程序中，这样它就不必在启动时成功（甚至运行？），并且会优雅地失败。

Ideally you should be able to retry that initialisation request (perhaps lazt instantiation and/or via a user request) such that your service is recovery-oriented and can retain some functionality in the face of downstream failures.

# android - 我们可以自定义 Facebook 返回的图像和文本吗？

> ID：14057820
> 
> 赞同：0
> 
> 时间：2012-12-27T16:26:49.377
> 
> 标签：android, facebook

当我将 URL 传递给 Facebook 墙贴时，我得到类似于这张图片的情况

![](../Images/4e93901f58f781ed9b7fbf98663d82e7.png)

是否可以自定义 Facebook API 返回的图像（第 1 点）和文本（第 2 点）？

在这种情况下，URL 仍会指向 www.google.com，但图像和文本将是自定义的。

我需要对此进行自定义，因为返回的某些图像和文本不适合我的需要。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T16:31:39.320

看看[Facebook Sharer 在分享我的 URL 时如何选择图片和其他元数据？](https://stackoverflow.com/questions/1138460/how-does-facebook-sharer-select-images)这解释了正在共享的页面如何具有填充这些值的元标记

# eclipse - 使用“Eclipse 产品导出”生成的存储库目录

> ID：14057825
> 
> 赞同：4
> 
> 时间：2012-12-27T16:27:04.710
> 
> 标签：eclipse, eclipse-plugin

当我[导出独立的无头 eclipse RCP](http://prosseek.blogspot.com/2012/12/headless-rcp-standalone.html)时，我有两个目录：eclipse 和存储库。存储库目录是做什么用的？我可以删除这个目录吗？

我看到插件目录在 eclipse 和存储库中。

![在此处输入图像描述](../Images/5907207ffbe9f20c0b50a2a1dc3aa601.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-29T00:52:52.907

它是为您正在导出的插件/功能生成的 p2 存储库，如果您不熟悉它，则用于配置这里是一个链接[Equinox p2](http://eclipse.org/equinox/p2/)如果您不确定它是什么，听起来您不需要。在产品导出向导中有一个复选框，您可以取消选中以生成我认为它称为的存储库元数据。为了回答您的问题，是的，您可以将其删除，它不会对应用程序产生影响。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-29T01:58:34.853

根据邓肯的回答，我取消选中“生成元数据存储库”以不生成目录。

![在此处输入图像描述](../Images/26fb55376e5bc2c7c8ad1bc29a2f1eb2.png)

# python - CSS/Python/Django：样式表中引用的图像的自动版本控制

> ID：14057826
> 
> 赞同：0
> 
> 时间：2012-12-27T16:27:11.270
> 
> 标签：python, css, django

我只是将我的 CSS 移到它自己的文档中。它曾经写在我的 html 模板标题中的样式标记中。

但是，现在我的背景图像的自动版本控制存在问题。我的 html 模板包含查找每个图像的最后修改日期然后将其添加为图像版本的代码（一个 Django 标记）。它还允许我使用变量作为 url；如果我以后想更改位置，那就太好了。

```
.my_class{
    background-image:url({{static_url}}myimage.jpg?version={% get_date_modifed 'my_image.jpg' %});
} 
```

我也参考了 PIE.htc。如果派人决定制作新版本，不必担心手动更新 css 会很好。

```
behavior: url({{static_url}}css/PIE.htc 
```

处理这个有什么巧妙的技巧吗？我想知道为什么我不只是将所有内容都留在标题中。我不想拆分我的css，一些在单独的文件中，一些在标题中。

# php - 在表单中选择类别时从子类别中的数据库中进行选择

> ID：14057827
> 
> 赞同：0
> 
> 时间：2012-12-27T16:27:14.060
> 
> 标签：php, html, mysql, forms, categories

我目前有这个表格 - 下面是其中的一个片段：

```
 <li>
            <label for="Catid">Pick a Category:</label>
            <select name="Catid">
              <?php
                  $Products = New Products();
                  $Products->form_Cat_Picker();
                ?>
            </select>
          </li>
          <li>
            <label for="Subcatid">Sub Category:</label>
            <select name="Subcatid">
              <?php
                  $Products = New Products();
                  $Products->form_Subcat_Picker();
                ?>
            </select> 
```

好的，然后这将发送到 products.php，它在 products 类中执行以下操作：

```
function form_Cat_Picker() {
    $mysqli = new mysqli(DB_SERVER, DB_USER, DB_PASSWORD, DB_NAME);
    if (!$mysqli) {
        die('There was a problem connecting to the database.');
    }       
    $catPicker = "SELECT Catid, Catname
            FROM ProductCats
            ORDER BY Catid";
    if ($Result = $mysqli->query($catPicker)){
        if (!$Result) {
            echo 'Could not run query: ' . mysql_error();
            exit;
        }
        else {
            $Result = $mysqli->query($catPicker);
        }
        while ($row = $Result->fetch_assoc()) {
            echo '<option value="'.$row["Catid"].'">'.$row["Catname"]."</option>";
        }
    }
    $mysqli->close();
}
function form_Subcat_Picker() {
    $mysqli = new mysqli(DB_SERVER, DB_USER, DB_PASSWORD, DB_NAME);
    if (!$mysqli) {
        die('There was a problem connecting to the database.');
    }       
    $catPicker = "SELECT Subcatid, Subcatname, Parentid
            FROM ProductSubCats
            ORDER BY Subcatid";
    if ($Result = $mysqli->query($catPicker)){
        if (!$Result) {
            echo 'Could not run query: ' . mysql_error();
            exit;
        }
        else {
            $Result = $mysqli->query($catPicker);
        }
        while ($row = $Result->fetch_assoc()) {
            echo '<option value="'.$row["Subcatid"].'">'.$row["Subcatname"]."</option>";
        }
    }
    $mysqli->close();
} 
```

这两者本质上都是从数据库中返回类别和子类别的列表，以填充表单的下拉列表。

问题是，除非在初始下拉框中选择了它们的父类别，否则我不希望出现子类别。我怎样才能做到这一点？我目前在 ProductSubCats 表中有一个额外的列，它是 Parentid，ProductCats 中有一个是 Catid，它们连接起来。

但是我将如何设置一个条件首先创建一个选择选项/值的变量，然后说“这个变量 $selected”。我会知道如何将它传递给该代码并使用条件 WHERE $selected =无论如何，但它已经到了让我感到困惑的地步。谢谢

编辑 - 似乎我的错误在于忘记 php 将在页面加载时运行一次。所以我应该让它呈现所有数据，然后使用 jquery 只显示那些已被选中的数据。但我也应该有一个值 0 和一个空白条目。例如，如果我有一个值为 1 的类别和 2 个父 id 为 1 的子类别我将如何让 jquery 显示那些父 id 为 1 的子猫，而不是说那些父 id 为 2 的子类别？用户选择后？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T16:34:34.477

有几种方法可以处理这个问题，但大多数都在前端。

如果您想使用 PHP 执行此操作，则只需检查是否设置了 $_POST['Catid']，并在更改时自动提交第一个类别。您必须对这种行为进行一些编码。

但是，如果您想在不加载页面的情况下完成此操作，则需要使用 AJAX 尝试动态填充第二个选择，或者隐藏/过滤值。无论哪种情况，您都可能希望/需要使用 jQuery 来让您的生活变得更简单。

但是，您似乎忘记了 PHP 是一种服务器端语言。因此，PHP 无法在用户做出选择后填充第二个选择框。Javascript 可以，因为它在浏览器中运行，或者您可以刷新/重新提交页面并获取 POST 数据并使用它，但 PHP 仅在第一次点击页面时“运行一次”，然后生成所有选择/数据.

更新：如果您希望以“快速而肮脏”的方式执行此操作，您可以填充每个子类别选择，并将它们各自放在一个 div 中。然后，给他们一个父类别的 ID，并将他们的可见性设置为 false：

```
 <div id='parentId1' style="display:none">
        <select name="Subcatid">
          <?php
              $Products = New Products();
              $Products->form_Subcat_Picker();
            ?>
        </select>
        </div> 
```

您现在可以在父选择器中设置 onChange 函数，该函数显示/隐藏适当的其他值`$("#parentId" + parentId).show()`。这将为您提供很多帮助，但是如果您花时间学习如何进行 AJAX 调用，那么使用 jQuery 很容易做到，并且可能会得到您想要的东西。这是一个很好的 SO 问题，它显示了如何做到这一点： [jquery getJson populate Select Menu Question](https://stackoverflow.com/questions/1502649/jquery-getjson-populate-select-menu-question)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-27T16:39:15.193

您要做的是创建一个默认选项并将其值设置为 0

```
<select name="main">
    <option value="0">Please Select an Option...</option>
    <option value="1">Option 1</option>
    <option value="2">Option 2</option>
</select> 
```

接下来在您的 php 中，您需要检查用户是否选择了某些内容

```
$selected = (int)$_POST["main"];
if(!empty($selected)){
    // They selected something other than 0
    // 0 is considered empty
} 
```

如果是这样，请获取子结果类别。

# java - 使用 Java 读取 Google Drive Form 文件

> ID：14057828
> 
> 赞同：-1
> 
> 时间：2012-12-27T16:27:17.323
> 
> 标签：java, google-drive-api

我目前在我的云端硬盘帐户的特定文件夹中有多个 Google 表单文件。我能够创建一个 Google File 对象列表并像这样遍历它们。

```
 for (File f : formFiles) {

            System.out.println("-----------------------------");
            System.out.println(f.getId());
            System.out.println(f.getTitle());
            System.out.println(f.getMimeType());
            System.out.println("-----------------------------");
            System.out.println("  ");

        } 
```

我想做的是读取表单文件的所有行和列。我的第一个想法是下载它们，但 f.getDownloadUrl() 返回一个空值。上述文件的 mime 类型是“application/vnd.google-apps.form”

非常感谢您在使用 Google 表单方面提供的任何帮助。

谢谢，马特

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T17:28:28.760

与所有 Google 原生文档格式一样，您不能使用该`downloadUrl`字段下载其内容。相反，您应该检查`exportLinks`集合以将表单导出为一种受支持的格式：

[https://developers.google.com/drive/manage-downloads#downloading_google_documents](https://developers.google.com/drive/manage-downloads#downloading_google_documents)

# macos - 卸载 Mac 中 sshfs 挂载的目录

> ID：14057830
> 
> 赞同：186
> 
> 时间：2012-12-27T16:27:27.383
> 
> 标签：macos, sshfs, umount

我已经安装`OSXFUSE`在我的 mac 中并用于`sshfs`挂载远程目录。现在我想卸载它，但找不到方法。我的操作系统是 OSX 10.8 Mountain。任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：209
> 
> 时间：2013-05-21T16:25:25.783

尝试这个：

```
umount -f <absolute pathname to the mount point> 
```

例子：

```
umount -f /Users/plummie/Documents/stanford 
```

如果这不起作用，请尝试与 root 相同的命令：

```
sudo umount -f ... 
```

* * *

## 回答 #2

> 赞同：182
> 
> 时间：2014-04-07T19:11:56.893

不要使用`umount`.

利用

```
fusermount -u PATH 
```

* * *

## 回答 #3

> 赞同：40
> 
> 时间：2017-08-29T15:55:48.043

```
sudo diskutil unmount force PATH 
```

每次都有效:)
注意`force`标签

* * *

## 回答 #4

> 赞同：17
> 
> 时间：2016-04-09T19:53:00.547

至少在 10.11 (El Capitan) 中，umount 的手册页指出：

> 由于 Mac OS X 的复杂性和交织性，umount 可能经常失败。建议改用 diskutil(1)（如“diskutil unmount /mnt”）。

这种方法（例如，“diskutil umount *path/to/mount/point* ”）允许我卸载 sshfs 挂载的内容，并且不需要 sudo。（而且我相信它应该至少可以恢复到 10.8。）

* * *

## 回答 #5

> 赞同：13
> 
> 时间：2015-09-26T21:47:10.930

用于`ps aux | grep sshfs`查找 sshfs 的 PID（它将是用户名旁边的数字）

然后`kill -9 $PID`，如果其他解决方案不起作用

* * *

## 回答 #6

> 赞同：7
> 
> 时间：2014-11-14T19:45:03.980

以下对我有用：

```
hdiutil detach <path to sshfs mount> 
```

例子：

```
hdiutil detach /Users/user1/sshfs 
```

也可以在 Finder 中找到 sshfs 创建的卷，右击，选择弹出。据我所知，也就是上述命令的 GUI 版本。

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2018-12-13T22:29:50.597

In my case (Mac OS Mojave), the key is to use the **full path** `$umount -f /Volumnes/fullpath/folder`

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2019-04-23T04:14:39.757

作为参考，让我引用[osxfuse 常见问题解答](https://github.com/osxfuse/osxfuse/wiki/FAQ#48-how-should-i-unmount-my-fuse-for-os-x-file-system-i-cannot-find-the-fusermount-program-anywhere)

> 4.8\. 我应该如何卸载我的“FUSE for OS X”文件系统？我在任何地方都找不到 fusermount 程序。
> 
> 只需在 OS X 中使用标准的 umount 命令。您不需要带有“FUSE for OS X”的 Linux 特定 fusermount。

如上所述，要么`diskutil unmount`或`umount`应该工作

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2019-12-11T09:10:56.833

如果您的问题是您使用 SSHFS 安装了一个网络驱动器，但 ssh 连接被切断并且您由于类似的错误而无法重新安装它`mount_osxfuse: mount point /Users/your_user/mount_folder is itself on a OSXFUSE volume`，那么 github 用户[theunsa](https://github.com/theunsa)找到了一个适合我[的解决方案。](https://github.com/osxfuse/osxfuse/issues/45#issuecomment-21943107)引用他的回答：

* * *

我目前的解决方法是：

找出罪魁祸首 sshfs 进程：

```
$ pgrep -lf sshfs 
```

杀了它：

```
$ kill -9 <pid_of_sshfs_process> 
```

sudo 强制卸载“不可用”目录：

```
$ sudo umount -f <mounted_dir> 
```

用 sshfs 重新挂载现在“可用”的目录……然后明天早上回到步骤 1。

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2014-05-27T16:20:24.917

如果您对命令有问题，`fusermount`您可以终止该进程：

> ps -ax | grep "sshfs"

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2020-08-24T13:55:53.527

如果你想杀死所有挂载的 sshfs 连接，你可以使用它。我用ubuntu试过了。

```
ps -ef | grep "sshfs" | awk '{print $2}' | xargs kill -9 
```

我将它添加到 bash_aliases

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2017-07-27T21:30:45.220

仅供参考，我发现这对我有用。

diskutil 卸载 /path/to/directory/

当我使用 umount 命令时，我收到一个错误，建议使用此 diskutil 命令。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2019-01-08T21:12:31.760

您始终可以从 finder 执行此操作。只需导航到挂载所在的目录，然后点击挂载文件夹上方的弹出图标，该文件夹的名称中将包含 SSHFS（在查找器中）。从终端在查找器中打开文件夹的快捷方式是

`open .`

这将在新的查找器窗口中打开当前目录。代替 ”。” 与您选择的目录。

# python - python中需要更多的小数位

> ID：14057835
> 
> 赞同：10
> 
> 时间：2012-12-27T16:27:55.977
> 
> 标签：python

我正在编写一个 python 代码，它需要将数字评估到很多小数位 - 大约 14 或 15。

我希望结果会平稳增长，例如：

```
0.123456789101997
0.123456789101998
0.123456789101999
0.123456789102000
0.123456789102001 
```

但我似乎只得到数字（当我打印出来时）到小数点后 12 位，所以我的数字实际上是在逐步跳跃：

```
0.123456789101
0.123456789101
0.123456789101
0.123456789102
0.123456789102 
```

起初，我假设这个数字在幕后列出了更多的小数位，但只是打印到 12，但是当我打印结果时，它们似乎也在逐步绘制，而不是平滑。

如果有人能指出正确的方向来解决这个问题，我将不胜感激 - 谢谢。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-12-27T16:32:10.823

试试 Decimal 模块怎么样？

```
In [2]: import decimal

In [3]: d = decimal.Decimal('0.123456789101997')

In [4]: print d
0.123456789101997 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-12-27T16:36:06.227

使用`repr()`,`print`将`str()`小数位数减少到 12 位以使输出用户友好。

```
In [17]: a=0.123456789101997

In [18]: str(a)
Out[18]: '0.123456789102'

In [19]: repr(a)
Out[19]: '0.123456789101997' 
```

或字符串格式：

```
In [21]: "{0:.15f}".format(a)
Out[21]: '0.123456789101997' 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2017-08-04T21:12:05.873

为此，您可以选择使用模块[小数。](https://docs.python.org/3.6/library/decimal.html)

您需要导入模块。

```
>>> from decimal import * 
```

然后，您需要通过调用 getcontext() 函数来指定所需的小数位数。以下代码要求 25 个小数点。

```
>>> getcontext().prec = 25 
```

然后，您需要指定您的算术。以下代码确定 pi 的近似值，最多 25 个小数点。

```
>>> Decimal(22) / Decimal(7) 
```

输出是

```
>>> Decimal('3.142857142857142857142857') 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-12-27T18:15:08.217

正如前面的答案中所建议的，您可以通过[小数](http://docs.python.org/2/library/decimal.html)模块使用小数，或者在打印浮点值时可以指定 15 位小数，以覆盖默认的 12 位。

在许多 Python 实现中，普通浮点数是与 IEEE 754 兼容的（[1、2](http://en.wikipedia.org/wiki/IEEE_754-1985)） “binary64”[双](http://en.wikipedia.org/wiki/IEEE_754-2008)精度数，因此尾数中实际上有 53 位。与`53*math.log(2)/math.log(10)`15.95 一样，binary64 数字支持超过 15 个十进制数字的精度，但不完全是 16。

这是您可以尝试的示例，并显示其输出：

```
u=1e-15
v=0.123456789101997
for k in range(13):print '{:20.15f}'.format(v+k*u)
   0.123456789101997
   0.123456789101998
   0.123456789101999
   0.123456789102000
   0.123456789102001
   0.123456789102002
   0.123456789102003
   0.123456789102004
   0.123456789102005
   0.123456789102006
   0.123456789102007
   0.123456789102008
   0.123456789102009 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-27T16:31:56.327

您可以使用[Decimal](http://docs.python.org/2/library/decimal.html)以获得更好的精度。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2020-10-16T01:19:29.137

要显示更多小数点，请将其添加到代码的末尾：

```
print('%.60f' % value_x) 
```

“.60”表示要显示 60 位小数，“value_x”表示您想要显示的任何值。

除了科学计数法的默认输出之外，当我需要将 P 值输出为实十进制数时，我会使用它。

例子：

```
In [1]: pearson_coef, p_value = stats.pearsonr(df['horsepower'], df['price'])
In [2]: print("The Pearson Correlation Coefficient is", pearson_coef, " with a P-value of P = ", p_value, "or ")
In [3]: print('%.50f' % p_value)
Out [4]: The Pearson Correlation Coefficient is 0.8095745670036559  with a P-value of P = 6.369057428260101e-48 or 0.00000000000000000000000000000000000000000000000637 
```

* * *

## 回答 #7

> 赞同：-2
> 
> 时间：2020-04-06T14:53:30.823

```
x=56.0
print("{:.2f}".format(x)) 
```

如果我们执行这段代码，我们将得到——

输出：56.00

# excel - Excel VBA For循环循环太早

> ID：14057836
> 
> 赞同：1
> 
> 时间：2012-12-27T16:27:59.927
> 
> 标签：excel, vba

当我单步执行代码时，在“Cells(r_count, 5) = temp + totalDays”行之后，它会回到“For c_count”循环的开头，并且代码永远不会进入下一部分，因此计数器没有被定罪。

```
For c_count = 7 To 42 Step 5
    For r_count = 4 To 80
        If Cells(r_count, c_count) = "pass" Then
            If Not (IsEmpty(Cells(r_count, (c_count + 1)))) Then
                If Not (IsEmpty(Cells(r_count, (c_count + 2)))) Then
                    s_date = Cells(r_count, (c_count + 1))
                    e_date = Cells(r_count, (c_count + 2))
                    totalDays = DateDiff("d", s_date, e_date)
                    temp = Cells(r_count, 5)
                    Cells(r_count, 5) = temp + totalDays
                End If
            End If
        End If
    Next r_count
Next c_count 
```

我必须在我的代码中监督一些愚蠢的事情。我应该将我的 IF 语句变成一个而不是多个语句吗？有什么帮助吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T17:07:28.483

Worksheet_Change 事件是否会调用此代码？我假设是这样，因为您在该`Cells(r_count, 5) = temp + totalDays`行上说它会回到开头-这是因为该行设置了单元格的值，因此触发了 Worksheet_Change 事件，这也是它最终完成的原因。

如果是这样，那么您可以在执行更新时将 Application.EnableEvents 设置为 False（实际上是 Philip 的建议）。例如：

```
Private Sub Worksheet_Change()

    Application.EnableEvents = False

    ....your code here....

    Application.EnableEvents = True

End Sub 
```

# css - Css - 将一个浮动列调整为与另一列相同的高度

> ID：14057840
> 
> 赞同：1
> 
> 时间：2012-12-27T16:28:22.033
> 
> 标签：css, responsive-design, fluid-layout, multiple-columns

阅读一些类似问题的答案，我仍然不清楚这是否可能。

考虑一个 clearfixed 容器内的 2 个浮动列的情况。Column1 的内容可以增长并确定容器的高度。Column2 的内容始终保证小于 Column1，但其高度应拉伸以填充容器。

究竟如何让 Column2 伸展？

[这是 jsbin（Column2 不拉伸）](http://jsbin.com/uzokiv/1/edit)

我不想做的事情

*   使用 javascript
*   绝对位置
*   使用表格 html

我可以用这些技术找出一些东西，但把它当作一种学术练习。我试图弄清楚 css 是否提供了一个“正确”的解决方案，我可以只提交内存并完成它。我怀疑答案可能是我尚未完全理解的以下技术之一。

*   使用表格 css 显示类型
*   整个 flexbox 即将推出
*   不管 twitter bootstrap 做什么

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T16:32:29.217

就像您怀疑的那样，只要您不需要支持 oldIE ，表格 CSS[就可以工作：](http://jsbin.com/uzokiv/3)

```
section {
  width: 50%;
  display: table-cell;
  box-sizing: border-box;
  border: solid grey 1px;
} 
```

Flexbox 也可以工作，但要注意当前在浏览器中[实现的](http://www.w3.org/TR/2009/WD-css3-flexbox-20090723/)[内容与当前草案所说](http://www.w3.org/TR/css3-flexbox/)的内容之间的显着差异。

我没有在愤怒中使用 Twitter 引导程序，所以我无法对此发表评论。

# hadoop - 在 Pig 中计算统计模式

> ID：14057841
> 
> 赞同：2
> 
> 时间：2012-12-27T16:28:24.990
> 
> 标签：hadoop, apache-pig

在不使用 UDF 的情况下，如何计算 Apache Pig 中数据集的统计模式？

```
A,20
A,10
A,10
B,40
B,40
B,20
B,10

data = LOAD 'myData.txt' USING PigStorage(',') AS key, value;
byKey = GROUP data BY key;
mode = FOREACH byKey GENERATE MODE(data.value);  -- How to define MODE() ??
DUMP mode;
-- Correct answer:  (A, 10), (B, 40) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-30T19:19:15.597

这是一个版本，每个键只能找到一个结果：

```
data = LOAD 'mode_data.dat' USING PigStorage(',') AS (key, value);
byKeyValue = GROUP data BY (key, value); 
cntKeyValue = FOREACH byKeyValue GENERATE FLATTEN(group) AS (key, value), COUNT(data) as cnt;
byKey = GROUP cntKeyValue BY key;
mode = FOREACH byKey {
    freq = ORDER cntKeyValue BY cnt DESC;
    topFreq = LIMIT freq 1; -- one of the most frequent values for key of the group
    GENERATE FLATTEN(topFreq.(key, value));
}; 
```

这个版本会为同一个键找到所有同样频繁的值：

```
data = LOAD 'mode_data.dat' USING PigStorage(',') AS (key, value);
byKeyValue = GROUP data BY (key, value);
cntKeyValue = FOREACH byKeyValue GENERATE FLATTEN(group) AS (key, value), COUNT(data) as cnt;
byKey = GROUP cntKeyValue BY key;
mostFreqCnt = FOREACH byKey { -- calculate the biggest count for each key
    freq = ORDER cntKeyValue BY cnt DESC;
    topFreq = LIMIT freq 1;
    GENERATE FLATTEN(topFreq.(key, cnt)) as (key, cnt);
};

modeAll = COGROUP cntKeyValue BY (key, cnt), mostFreqCnt BY (key, cnt); -- get all values with the same count and same key, used cogroup as next command was throwing some errors during execution
mode = FOREACH (FILTER modeAll BY not IsEmpty(mostFreqCnt)) GENERATE FLATTEN(cntKeyValue.(key, value)) as (key, value); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-28T10:13:33.473

我有一个简单的 UDF 用于计算这里的模式（它使用 apache commons-math3，pig 0.10.0）：

```
public class MODE extends EvalFunc<DataBag> {
    TupleFactory mTupleFactory = TupleFactory.getInstance();
    BagFactory mBagFactory = BagFactory.getInstance();

    public DataBag exec(Tuple inputTuple) throws IOException {
        if (inputTuple == null || inputTuple.size() == 0) {
            return null;
        }
        try {
            Frequency frequency = new Frequency();
            DataBag output = mBagFactory.newDefaultBag();
            DataBag values = (DataBag) inputTuple.get(0);
            for (Iterator<Tuple> it = values.iterator(); it.hasNext();) {
                Tuple tuple = it.next();
                frequency.addValue((Long) tuple.get(0));
            }
            Set<Long> setOfMostFrequentVals = new HashSet<Long>();
            Long greatestFrequency = 0l;
            for (Iterator<Comparable<?>> it = frequency.valuesIterator(); it.hasNext();) {
                Long val = (Long) it.next();
                if (frequency.getCount(val) >= greatestFrequency) {
                    if (frequency.getCount(val) > greatestFrequency) {
                        setOfMostFrequentVals.clear();
                        greatestFrequency = frequency.getCount(val);
                    }
                    setOfMostFrequentVals.add(val);
                }
            }
            for (Long mostFequentVal : setOfMostFrequentVals) {
            output.add(mTupleFactory.newTuple(mostFequentVal));
        }
    return output;
        } catch (Exception e) {
            int errCode = 2106;
            String msg = "Error while computing mode in " + this.getClass().getSimpleName();
            throw new ExecException(msg, errCode, PigException.BUG, e);
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-27T21:43:10.190

为.编写[Eval Function 用户定义函数](http://pig.apache.org/docs/r0.10.0/udf.html)`MODE`。

一般来说，Pig 的评估函数数量非常有限，当您开始做比 min/max/count 更复杂的事情时，您需要熟悉编写 UDF。

# c++ - 增量运算符不适用于 sizeof

> ID：14057842
> 
> 赞同：8
> 
> 时间：2012-12-27T16:28:25.867
> 
> 标签：c++, operators, sizeof

只是想知道为什么增量运算符在下面的代码片段中不起作用：

```
 int main()
    {
        int a = 10;
        int b = sizeof(a++);
        cout<<"a: "<<a<<endl;
        cout<<"b: "<<b<<endl;
        return 0;
    } 
```

输出-

一个：10

乙：4

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-27T16:29:35.740

`sizeof`不评估其论点。它在编译时静态计算参数的大小，而不会导致任何代码被执行。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-12-27T16:31:58.533

当 sizeof 的表达式类型不是可变修改的数组类型时，则不计算表达式，因为该类型在编译时是完全已知的。`int`没有可变修改的部分。

在 C++ 中（至少 C++11）没有可变修改的类型（至少不像 C 的概念那样 - 你可以争辩说`new int[a++]`使用可变修改的数组类型；但该类型不会转义到任何其他部分语言的. 特别是, 不是`sizeof`), 所以在 C++ 中, sizeof 的表达式永远不会被计算。在 C 中，如果表达式不影响可变修改的数组类型的大小，是否计算表达式是未指定的。例如

```
int main()
{
    int a = 10;
    int b = sizeof(int[a++ ? 1 : 1]);
    cout<<"a: "<<a<<endl;
    cout<<"b: "<<b<<endl;
    return 0;
} 
```

在 C 中（从 C99 开始），这可能会输出`11`for `a`，但也可能会输出`10`，这取决于编译器是否足够聪明，可以省略评估`a++`，推断 sizeof`int[10]`是在编译时计算的。

* * *

脚注：可变修改数组类型也称为 VLA（可变长度数组）类型。简而言之，可变修改类型是一种类型，它要么是 VLA 类型，要么是依赖于 VLA 类型的类型。例如`int(*)[a++]`.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-27T16:29:28.717

运算符的操作数`sizeof`未使用，未计算。这是标准行为。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-27T16:30:42.223

sizeof 不是 C 中的函数。

它的参数没有真正评估，只有它的类型是，这是在编译时完成的。在您的代码中，分配等效于（在您的体系结构中）：

```
int b = 4 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-27T16:36:01.953

在未*评估的上下文中*，只有类型很重要。调用函数时也会发生同样的情况：

```
void f();

sizeof(f()); // f not called 
```

# eclipse - STS 中 Grails 的类路径容器

> ID：14057844
> 
> 赞同：3
> 
> 时间：2012-12-27T16:28:29.477
> 
> 标签：eclipse, grails, build-dependencies, spring-tool-suite

我对 Grails 依赖项上的 STS 有疑问。有一个条目，它指向错误的目录。由于错误，内部 STS 构建失败：

```
Problems occurred when invoking code from plug-in: "org.eclipse.core.resources".

  java.lang.NullPointerException
    at org.codehaus.jdt.groovy.internal.compiler.ast.JDTClassNodeBuilder.toRawType(JDTClassNodeBuilder.java:116)
    at org.codehaus.jdt.groovy.internal.compiler.ast.JDTClassNodeBuilder.configureParameterizedType(JDTClassNodeBuilder.java:290)
    at org.codehaus.jdt.groovy.internal.compiler.ast.JDTClassNodeBuilder.configureType(JDTClassNodeBuilder.java:56)
    at org.codehaus.jdt.groovy.internal.compiler.ast.JDTClassNodeBuilder.build(JDTClassNodeBuilder.java:46)
    at org.codehaus.jdt.groovy.internal.compiler.ast.JDTClassNode.makeClassNode(JDTClassNode.java:399)
    at org.codehaus.jdt.groovy.internal.compiler.ast.JDTClassNode.makeParameter(JDTClassNode.java:379)
    at org.codehaus.jdt.groovy.internal.compiler.ast.JDTClassNode.makeParameters(JDTClassNode.java:366)
    at org.codehaus.jdt.groovy.internal.compiler.ast.JDTClassNode.methodBindingToMethodNode(JDTClassNode.java:339)
    at org.codehaus.jdt.groovy.internal.compiler.ast.JDTClassNode.initializeMembers(JDTClassNode.java:256)
    at org.codehaus.jdt.groovy.internal.compiler.ast.JDTClassNode.initialize(JDTClassNode.java:227)
    at org.codehaus.jdt.groovy.internal.compiler.ast.JDTClassNode.lazyClassInit(JDTClassNode.java:158)
    at org.codehaus.groovy.ast.ClassNode.getUnresolvedSuperClass(ClassNode.java:1087)
    at org.codehaus.groovy.ast.ClassNode.getUnresolvedSuperClass(ClassNode.java:1079)
    at org.codehaus.groovy.ast.ClassNode.getSuperClass(ClassNode.java:1073)
    at org.codehaus.groovy.ast.ClassNode.isDerivedFrom(ClassNode.java:1013)
    at org.codehaus.groovy.classgen.ClassCompletionVerifier.visitCatchStatement(ClassCompletionVerifier.java:448)
    at org.codehaus.groovy.ast.stmt.CatchStatement.visit(CatchStatement.java:41)
    at org.codehaus.groovy.ast.CodeVisitorSupport.visitTryCatchFinally(CodeVisitorSupport.java:84)
    at org.codehaus.groovy.ast.ClassCodeVisitorSupport.visitTryCatchFinally(ClassCodeVisitorSupport.java:244)
    at org.codehaus.groovy.ast.stmt.TryCatchStatement.visit(TryCatchStatement.java:42)
    at org.codehaus.groovy.ast.CodeVisitorSupport.visitBlockStatement(CodeVisitorSupport.java:35)
    at org.codehaus.groovy.ast.ClassCodeVisitorSupport.visitBlockStatement(ClassCodeVisitorSupport.java:179)
    at org.codehaus.groovy.ast.stmt.BlockStatement.visit(BlockStatement.java:69)
    at org.codehaus.groovy.ast.CodeVisitorSupport.visitIfElse(CodeVisitorSupport.java:56)
    at org.codehaus.groovy.ast.ClassCodeVisitorSupport.visitIfElse(ClassCodeVisitorSupport.java:219)
    at org.codehaus.groovy.ast.stmt.IfStatement.visit(IfStatement.java:41)
    at org.codehaus.groovy.ast.CodeVisitorSupport.visitBlockStatement(CodeVisitorSupport.java:35)
    at org.codehaus.groovy.ast.ClassCodeVisitorSupport.visitBlockStatement(ClassCodeVisitorSupport.java:179)
    at org.codehaus.groovy.ast.stmt.BlockStatement.visit(BlockStatement.java:69)
    at org.codehaus.groovy.ast.CodeVisitorSupport.visitClosureExpression(CodeVisitorSupport.java:174)
    at org.codehaus.groovy.ast.expr.ClosureExpression.visit(ClosureExpression.java:45)
    at org.codehaus.groovy.ast.ClassCodeVisitorSupport.visitProperty(ClassCodeVisitorSupport.java:142)
    at org.codehaus.groovy.classgen.ClassCompletionVerifier.visitProperty(ClassCompletionVerifier.java:349)
    at org.codehaus.groovy.ast.ClassNode.visitContents(ClassNode.java:1160)
    at org.codehaus.groovy.ast.ClassCodeVisitorSupport.visitClass(ClassCodeVisitorSupport.java:51)
    at org.codehaus.groovy.classgen.ClassCompletionVerifier.visitClass(ClassCompletionVerifier.java:74)
    at org.codehaus.groovy.control.CompilationUnit$6.call(CompilationUnit.java:838)
    at org.codehaus.groovy.control.CompilationUnit.applyToPrimaryClassNodes(CompilationUnit.java:1152)
    at org.codehaus.groovy.control.CompilationUnit.doPhaseOperation(CompilationUnit.java:588)
    at org.codehaus.groovy.control.CompilationUnit.processPhaseOperations(CompilationUnit.java:566)
    at org.codehaus.groovy.control.CompilationUnit.compile(CompilationUnit.java:543)
    at org.codehaus.jdt.groovy.internal.compiler.ast.GroovyCompilationUnitDeclaration.processToPhase(GroovyCompilationUnitDeclaration.java:171)
    at org.codehaus.jdt.groovy.internal.compiler.ast.GroovyCompilationUnitDeclaration.generateCode(GroovyCompilationUnitDeclaration.java:1555)
    at org.eclipse.jdt.internal.compiler.Compiler.process(Compiler.java:838)
    at org.eclipse.jdt.internal.compiler.ProcessTaskManager.run(ProcessTaskManager.java:137)
    at java.lang.Thread.run(Unknown Source) 
```

Grails 命令**run-app**工作正常。

我通过不需要将**插件类**链接到

```
C:\Documents and Settings\<myUserName>\.grails\1.3.7\projects\<ProjectName>\plugin-classes 
```

现在我正在寻找一种删除此条目的方法，但是在 Project->Build Path-> Configure Build Path -> Libraries 下，**删除按钮**被禁用。

如果我查看 .classpath 文件，我会看到以下条目：

```
<classpathentry kind="con" path="org.grails.ide.eclipse.core.CLASSPATH_CONTAINER"/> 
```

Google 关于 CLASSPATH_CONTAINER 不成功。**conf**目录中的文件没有变化（与颠覆不同）

我已经尝试过：

1.  删除 .ivy2 文件夹
2.  删除 .grails 文件夹
3.  圣杯清洁
4.  Grails-> 刷新依赖项
5.  项目 -> 清洁
6.  删除项目并从 SVN 导入最新版本
7.  删除工作区并创建一个新的
8.  1..7 的任意组合

请帮忙！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T16:54:50.290

1.  删除 .ivy2 文件夹
2.  删除 .grails 文件夹
3.  删除 .m2 文件夹
4.  从 application.properties 中删除所有添加的插件
5.  从 BuildConfig.groovy 中删除所有添加的插件
6.  尝试重新启动您的项目 - 现在应该可以工作
7.  重新安装你的插件

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-02T11:11:09.350

以下步骤解决了我的问题：

1.  删除 .grails 文件夹
2.  删除 .ivy2 文件夹
3.  删除工作区
4.  重新安装eclipse（这是缺少的步骤）
5.  项目清单
6.  将项目导入新工作区
7.  确保没有为此项目升级 grails 和 groovy 编译器版本。

我不确定可以省略哪个步骤。拉尔夫，谢谢你的建议。

# mod-rewrite - 使用 mod rewrite 重写 URL

> ID：14057846
> 
> 赞同：0
> 
> 时间：2012-12-27T16:28:35.353
> 
> 标签：mod-rewrite

是否可以在重写中执行以下操作？

鉴于此网址，

[http://www.stockportovenrepairs.co.uk/spares/cda/cooker-oven/cd200ss/element-12345/12/](http://www.stockportovenrepairs.co.uk/spares/cda/cooker-oven/cd200ss/element-12345/12/)

`cda/cooker-oven/cd200ss/element-12345/12/`我目前用 `url=cda/cooker-oven/cd200ss/element-12345/12/`QSA重写这部分 。

这很好用，但更适合我的情况是如果我可以将其重写为：

```
url=cda;cooker-oven;cd200ss;element-12345;12; 
```

即将正斜杠交换为分号，然后将其附加到查询字符串。这甚至可以通过 mod-rewrite 实现，如果可以的话，你有什么指示吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T16:38:25.660

如果您在 Apache 中使用 mod-rewrite，请尝试反向引用（假设 url 将具有已知数量的段或设置格式）。就像是

```
RewriteRule /spares/([^/]*)/([^/]*)/([^/]*)/([^/]*)/([^/]*)/ http://host/something.do?url=$1;$2;$3;$4;$5; [NE] 
```

这应该将您的示例重写为

```
http://host/something.do?url=cda;cooker-oven;cd200ss;element-12345;12;
```

这看起来像你想要的。

编辑：为了防止分号被转义，您需要添加上面的 [NE] 指令。

# jquery - textarea 高度不增加以匹配表格单元格高度

> ID：14057855
> 
> 赞同：0
> 
> 时间：2012-12-27T16:29:24.623
> 
> 标签：jquery, html, css

我有一个文本区域，它适合一个名为`.question`. 现在我遇到的问题是，如果表格单元格的高度扩大到增加的高度，则 textarea 的高度不会增加，因此在顶部表格单元格边框和 textarea 边框顶部之间留下一个间隙，它也会留下一个间隙在 textarea 的底部边框和表格单元格的底部边框之间。

如果表格单元格的高度足够低，那么看起来 textarea 已经填满了表格单元格的高度。

但我的问题是，无论表格单元格的高度是否已更改，文本区域都应始终填充表格单元格的高度。我的问题是，我怎样才能改变下面的 css、HTML 和 jquery 来做到这一点？

CSS：

```
 .question { 
        max-width:0.1%;
        border:1px black solid;
        border-collapse:collapse;
        line-height: 0;
    }

    .question textarea {
        width:auto;
        resize:none;
        height:100%;
        font-size:100%;
        display: block; 
        overflow:auto;

    } 
```

查询：

```
function setWidth() {
    var questionCellHeight = $("#qandatbl_onthefly tbody .question").height();
    $(".textAreaQuestion").css({
        "height": (questionCellHeight) + "px"
    });
} 
```

HTML表格：

```
<table id="qandatbl" align="center" cellpadding="0" cellspacing="0" border="0">
<thead>
<tr>
    <th class="question">Question</th>
</tr>
</thead>
</table>
<div id="qandatbl_onthefly_container">
<table id="qandatbl_onthefly" align="center" cellpadding="0" cellspacing="0" border="0">
<tbody>
<tr class='optionAndAnswer' align='center'>
<td class='question'>
<textarea class='textAreaQuestion'></textarea>
</td>
</tr>
</tbody>
</table> 
```

更新：

`.question textarea`我更改为`.textAreaQuestion`并删除了 height 属性的 css 的轻微更新：

```
.textAreaQuestion{
    resize:none;
    font-size:100%;
    display: block; 
    overflow:auto;
} 
```

我相信需要编辑jquery，以便如果表格单元格增加，它将文本区域的高度增加到与增加表格单元格相同的高度。（观点）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T15:48:15.740

如果您只想再次调用 jQuery 函数，请尝试添加类似`$(".gridBtns").click(setWidth);`处理 Grid 的任何内容。

恐怕我不确切知道您需要什么，因为要了解的信息太多或太少。尝试缩小您的问题范围，并将问题放在 jsfiddle 中。之前有人问你的时候，你做了相反的事情。您只是不断添加代码来复制您的问题。

在旁注中，请停止使用`tables`for layout，这就是`divs`for。

# excel - 在 Excel 2010 中将总计线添加到数据透视图

> ID：14057861
> 
> 赞同：4
> 
> 时间：2012-12-27T16:29:40.733
> 
> 标签：excel, excel-2010, pivot-table

我有一个非常简单的数据透视表，它基本上总结了所有数据记录的小时数，并将月份作为行标签，将可计费/不可计费作为列标签。数据透视表实际上显示了一个总计列，该列是按月计费小时数和非计费小时数的总和。

我创建了一个数据透视图来表示数据，它包括计费小时数和非计费小时数行，但由于某种原因，我无法获得第三行来显示总小时数。这些数字存在于我的数据透视表中，但我只是不确定如何将这些数据点绘制在图表上。根据我的研究，计算字段似乎可以解决问题，但这令人沮丧——我讨厌添加一个计算字段来计算数据透视表中已经显示的值（尽管如果我不得不这样做，我会这样做- 也无法让它工作）。有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T19:21:35.500

除非您需要数据透视图的灵活性，否则请使用简单的单元格引用将您的数据透视表值放到表格下方的常规单元格中，然后使用新范围的值创建一个常规图表。

例如，如果数据透视表结果位于单元格中，例如 A1-E5，包括行和列标签以及总计行，则将结果下拉到单元格 F7-E10。也就是说，F7 公式将为“=A1”等。然后，使用范围 F7-E10 插入新图表。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-04-04T21:28:53.440

可以添加计算项，到字段到列标签，如 [Excel数据透视表计算项所示](http://www.contextures.com/excelpivottablecalculateditem.htm)

此后，您将在图表中看到第三条线，但要注意在数据透视表中，总计将显示适当数量的两倍，因为现在它考虑了总“计算项目”和其他项目！

# java - 将泛型类的实例转换为另一个有什么用？

> ID：14057867
> 
> 赞同：0
> 
> 时间：2012-12-27T16:29:56.387
> 
> 标签：java, generics, types, casting

我知道这是可能的，但有什么用？因为它只能投射与被投射对象相同的类型？

```
class Example<X>{ 
//statements
}

//then this is declared
Example<Integer> x = new Example<Integer>();

//This is allowed
(Example<Integer>) x;

//this is not allowed, so what's the use?
(Example<Long>) x; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-27T16:42:45.783

我在第一个中看到了一些用处。由于 java 在运行时决定类型，在这种特殊情况下，您可以将 x 声明为对象的实例，并通过在该行中向下转换它，您告诉编译器 x 确实是 Example。

我认为您的示例中不允许使用第二个，因为 Long 不是 Integer 的子类，更像是兄弟，因为我认为两者都继承自 Number。

检查文档：[长](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/Long.html)|| [整数](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/Integer.html)

所以，如果你做了类似的事情：

```
Example<Number> x = new Example<Number>();

(Example<Integer>) x;
(Example<Long>) x; 
```

然后，如果您将 x 放入访问者之类的东西中，并且重载，您的 x 将落入您的`Example<Long>`实现而不是您的`Example<Integer>`实现中。

猜猜我在那里有点困惑，但希望它有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T16:52:25.357

书中的引文并没有说你以身作则。这本书说，只要**类型参数相同**，您就可以简单地应用正常的转换规则。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-27T19:56:51.943

> 那么有什么用呢？

有很多用途。

例如，将通配符参数转换为特定参数或更具体的通配符参数：

```
Example<?> x;
Example<? extends Number> y;
Example<Integer> z;
y = (Example<? extends Number>)x;
z = (Example<Integer>)x;
z = (Example<Integer>)y; 
```

或将实际类转换为更具体的类：

```
Example<Integer> x;
SubExample<Integer> y;
y = (SubExample<Integer>)x; 
```

# c - 链表展平算法指针

> ID：14057869
> 
> 赞同：2
> 
> 时间：2012-12-27T16:30:05.387
> 
> 标签：c, algorithm, linked-list

我正在查看以下算法来展平“Programming Interviews Exposed”一书中的树状链表系统：

```
void flattenList( Node *head, Node **tail)
    Node *curNode =  head;
    while( curNode ){
        /* The current node has a child */
        if( curNode->child ){
            append( curNode->child, tail );
        }
        curNode = curNode->next;
    }
}

/* Appends the child list to the end of the tail and updates
 * the tail.
 */
void append( Node *child, Node **tail ){
    Node *curNode;

    /* Append the child child list to the end */
    (*tail)->next = child;
    child->prev = *tail;

    /*Find the new tail, which is the end of the child child
     *list.
     */
    for( curNode = child; curNode->next;
         curNode = curNode->next )
        ; /* Body intentionally empty */

    /* Update the tail pointer now that curNode is the new
     * tail.
     */
    *tail = curNode;
} 
```

我知道我们正在传递`**tail`而不是传递`*tail`给`append`函数以确保更改`*tail`持续存在，但我不明白为什么我们不对孩子做同样的事情（意味着我们为什么不传递`**child`而不是传递`*child`）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T16:59:43.560

C 使用“按值调用”参数传递语义。这意味着，如果您调用类似 的函数`f(x)`，则只会将 的值`x`传递给函数，而不是变量`x`本身。当您为函数内部的参数赋值时，`x`用于调用函数的参数不会改变。

如果您希望能够更改变量本身，则必须像在此调用中一样传递地址，`f(&x)`如果您随后对`*x`已更改变量的函数内部进行赋值`x`。

之所以`flattenList`按原样声明是因为它是`head`按值传递的（它不会改变），但是`tail`是用它的地址传递的，因为函数必须改变它。

这与`append`函数类似。第一个参数不会更改，而第二个参数必须在函数内部更改。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-27T17:03:47.297

立即回答您的问题。a的`child`成员`Node`永远不会更新。它们仅用于遍历底层子列表。

老实说，参数名称`child`（`parent`看看以下是否更清楚。它利用了 C 是一个 byval-call 系统这一事实，并且实际上使用其中一个参数（节点指针）来查找从给定节点开始的列表的结尾，而无需任何临时指针（我们使用节点指针本身作为走，因为它是byval）：

```
void append( Node *node, Node **tail )
{
    /* Append the child child list to the end */
    (*tail)->next = node;
    node->prev = *tail;

    /*Find the new tail, which is the end of the child child
     *list.
     */
    while (node->next)
        node = node->next;

    /* Update the tail pointer now that curNode is the new
     * tail.
     */
    *tail = node;
} 
```

我应该节点，反正这不是很好的代码。它不对任何参数等的 NULL 进行检查。这应该得到显着加强。我选择放弃错误检查和非空验证，只是因为原始代码也忽略了所有这些。如果您想要一个更强大的版本，请告诉我。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-27T16:51:43.687

里面的评论说的`append`很清楚

```
/* Update the tail pointer now that curNode is the new
 * tail.
 */
*tail = curNode; 
```

因为您正在更新尾指针本身（而不仅仅是它所引用的节点），所以您需要传递`pointer to a pointer`才能使更新在函数外部可见。

对于`child`指针，我们只更新它所指的节点，而不是指针本身。因此，没有理由通过添加另一个间接级别来进一步复杂化代码。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-11-11T18:38:48.540

```
struct node *flatten_nr(struct node *root)
{  

    struct node *temp1, *temp2;

    if (NULL == root) return NULL;
    temp2 = root;
    while (root != NULL)
    {
        if( root->next != NULL)
        {
            temp1 = root;
            /* go to the end of the list and append */
            while (temp1->down != NULL)
            {
                temp1 = temp1->down;
            }
            temp1->down = root->next;
        }
        root = root->down;
    }
    return temp2;
} 
```

# git - git push 到 GitHub 存储库分支给出错误“src refspec master does not match any”

> ID：14057870
> 
> 赞同：5
> 
> 时间：2012-12-27T16:30:06.083
> 
> 标签：git, github

我分叉了 Flask 存储库并从 GitHub 克隆了它的网站分支，例如

```
git clone --recursive https://github.com/lovesh/flask.git -b website 
```

然后我配置远程像

```
git remote add upstream https://github.com/lovesh/flask.git -t website
git fetch upstream 
```

然后我进行了更改（我没有创建任何其他文件，但修改了 2 个文件）我必须进行然后添加文件并提交这样的更改

```
git add .
git commit . 
```

这提示我对提交发表评论，然后我输入了评论。现在它向我展示了

```
2 files changed, 69 insertions(+), 7 deletions(-) 
```

但是当我尝试将这些更改推送到我的 GitHub 帐户时

```
git push origin master 
```

它显示错误

```
error: src refspec master does not match any.
error: failed to push some refs to 'https://github.com/lovesh/flask.git' 
```

我环顾四周，遇到这个问题的人说他们没有像[这里](https://stackoverflow.com/a/7572252)和[这里](https://stackoverflow.com/q/5802426/535962)那样提交更改。但我确实提交了，即使它向我显示了这个错误。确认我试过

```
git status 
```

它显示了

```
# On branch website
# Your branch is ahead of 'origin/website' by 1 commit.
#
nothing to commit (working directory clean) 
```

还会`git log`在日志中显示我的提交。我是 git 新手。我错过了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T16:39:22.777

试试`git push origin website` 可能是你用这个名字配置了你的主分支。试着让我知道。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-27T16:49:06.790

首先，克隆你的仓库后你没有 master 分支。
[`git clone`](http://git-scm.com/docs/git-clone)细节：

```
--branch <name>
-b <name> 
```

> 不要将新创建的指向`HEAD`克隆存储库指向的分支`HEAD`，而是指向`<name>`分支。
> 在非裸存储库中，这是将被检出的分支。
> `--branch`还可以在结果存储库中获取标签并分离该`HEAD`提交。

因此，在您的情况下，如果您想创建本地网站分支并将其跟踪到原点，您需要：

```
git push -u origin website 
```

（在那之后，一个简单的`git push`就足够了：更多关于“ [git - `push current`vs. `push upstream`(tracking)](https://stackoverflow.com/questions/13751319/git-push-current-vs-push-upstream-tracking/13751847#13751847) ”中的推送策略）

* * *

您的其他远程 ' `upstream`' 也将只跟踪`upstream/website`分支：

该[`git remote`](http://git-scm.com/docs/git-remote)文档确实提到：

> 使用`-t <branch>`选项，而不是远程跟踪所有分支的默认 glob refspec，而是创建`refs/remotes/<name>/ namespace`一个仅跟踪的 refspec `<branch>`。
> 您可以提供`-t <branch>`多个分支来跟踪多个分支，而无需抓取所有分支。

在您的情况下，您只跟踪`upstream/website`（`+refs/heads/website:refs/remotes/upstream/website`）而不是[默认的 refspec](https://stackoverflow.com/a/7169390/6309)（`+refs/heads/*:refs/remotes/upstream/*`）。

# javascript - Javascript拖放返回坐标

> ID：14057871
> 
> 赞同：0
> 
> 时间：2012-12-27T16:30:06.713
> 
> 标签：javascript, jquery, html, mouseevent

我一直在寻找关于 javascript 拖放的好教程。不要将元素作为 div 或画布移动或调整其大小，而只是返回拖动的移动。

例子：

*   就像愤怒的小鸟中的弹弓一样，或者通过拖动来在画布中移动图像。
*   通过鼠标拖动移动“地图”。
*   在一个 Div 中，我在同一个元素中从点 A 拖动到 B 而不移动它，只是返回移动而不停止所有已经运行的代码

到目前为止，我发现的示例是通过使整个元素可拖动来通过不同的框架移动元素，这不是我所追求的，所以请指出正确的方向，你将成为我今天的英雄

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T17:18:19.670

如果您只需要鼠标指针的坐标，您可以使用事件的`clientX`和`clientY`属性`mousemove`。

```
window.addEventListener("mousemove",function(e) { 
    console.log(e.clientX,e.clientY); 
},false); 
```

该示例将侦听器附加到`window`object ，但您可以对其他元素执行相同操作.. 例如。`document.getElementById('mydiv').addEventListener`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T16:42:18.047

这是我通常的做法，非常简单：

1 在 mousedown 上，将鼠标的坐标保存在一个对象中并绑定一个计算距离的 mousemove 函数。

2 在 mouseup 上，取消绑定 mousemove 处理程序。

下面是一些代码示例：

```
var coords; // the starting point

var move = function(e) {
      var diffX = e.pageX - coords.x; // the moved x distance
      var diffY = e.pageY - coords.y; // the moved y distance
      console.log('move: '+diffX+'(x) '+diffY+'(y)');
    };

$(document).mousedown(function(e) {
  coords = {x: e.pageX, y: e.pageY}; // saves the mouse position on mousedown
  $(this).mousemove(move);
}).mouseup(function() {
  $(this).unbind('mousemove', move);
}); 
```

演示： http: [//jsbin.com/okatoj/1](http://jsbin.com/okatoj/1)（观看控制台）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-27T16:36:19.437

检查此链接：

[http://jqueryui.com/draggable/](http://jqueryui.com/draggable/)

它在左右窗格中有大量示例，以及如何使用它们的详细信息，希望对您有所帮助。

或者，您总是可以只使用 mousedown、mouseup 和 mousemove 事件来手动计算它们。找我你觉得舒服的。

# c# - 我可以为 XAML 中的属性选择多个值吗？

> ID：14057873
> 
> 赞同：6
> 
> 时间：2012-12-27T16:30:16.397
> 
> 标签：c#, xaml, windows-runtime, winrt-xaml

我正在为 Windows 商店应用程序在 XAML 中使用 ManipulationMode 进行试验。我想直接在我的 xaml 中有尽可能多的设置，所以我不必使用太多的代码。当我找到一个让我的滑动识别工作的解决方案时，我在后面的代码中发现了一些可以做的事情，如下所示：

```
myGrid.ManipulationMode = ManipulationModes.TranslateX | ManipulationModes.TranslateY; 
```

现在我尝试通过使用一些 xaml 代码来完成这项工作。然后我用这个

```
<Grid Style="{StaticResource LayoutRootStyle}" ManipulationMode="TranslateY" ManipulationCompleted="manipulationCompleted"> 
```

这很好用，但我没有找到同时使用 ManipulationMode TranslateX 和 TranslateY 的方法。

我尝试在属性中添加一些布尔运算符，并在我的网格中添加以下代码段。

```
<Grid.ManipulationMode>
   <ManipulationModes>TranslateX</ManipulationModes>
   <ManipulationModes>TranslateY</ManipulationModes>
</Grid.ManipulationMode> 
```

我做错了什么或者不可能在纯 XAML 中做到这一点？

谢谢赫尔曼

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-27T16:32:42.183

您需要使用逗号分隔值。

# iphone - 布尔值没有在正确的时刻设置

> ID：14057874
> 
> 赞同：0
> 
> 时间：2012-12-27T16:30:25.047
> 
> 标签：iphone, objective-c, ios, boolean

我有一个`BOOL loginStatus`要在登录流程中使用的。

* * *

## 代码

```
- (IBAction)login:(id)sender {
    if ([self credentialsValidated]) {
            [self performSegueWithIdentifier:@"showLogin" sender:self];
     }else {
       NSLog(@"not valid");
     }
}

- (BOOL)credentialsValidated {
     [[API sharedInstance] loginCommand:[NSMutableDictionary dictionaryWithObjectsAndKeys:_txtLogin.text,@"email",_txtPass.text,@"pwd", nil] onCompletion:^(NSDictionary *json){
     //completion
         if(![json objectForKey:@"error"]){
             if([[json valueForKeyPath:@"data.status"]intValue] == 200){
                //Create user object
                 NSLog(@"tot hier");
                loginstatus =  YES;
             }else{
                 //show validation
                 NSString *message = [NSString stringWithFormat:@"%@",[json valueForKeyPath:@"data.text"]];
                 [[[UIAlertView alloc]initWithTitle:@"Fout" message:message delegate:nil cancelButtonTitle:@"Ok" otherButtonTitles:nil]show];
                 _txtLogin.text = @"";
                 _txtPass.text = @"";
                 loginstatus = NO;
             }
         }else {
             NSLog(@"Cannot connect to the server");
         }
     }];
     if(loginstatus){
         NSLog(@"true");
    }else{
        NSLog(@"false");
    }
     return loginstatus;
} 
```

* * *

我的问题是我`BOOL`的没有立即设置。在正确设置布尔值之前，我总是需要按两次登录按钮。

有任何想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-27T16:34:24.303

布尔值不会立即设置，因为它是在完成块中设置的，在异步操作完成之前不会调用它。您应该做一些事情来让用户在 API 工作时等待。

例如，您可以禁用这些字段并显示一个旋转的进度指示器，直到登录操作完成。您可以在调用 login 之前将 UI 配置为禁用，并在完成块中将其重新设置为启用。

# ajax - kendoGrid：来自 json 数据的组合框字段

> ID：14057875
> 
> 赞同：2
> 
> 时间：2012-12-27T16:30:24.987
> 
> 标签：ajax, combobox, kendo-ui

这是字段：

```
{ field: "category", title: "Category", width: 100, editor: categoryDropDownEditor }, 
```

自定义编辑器：

```
function categoryDropDownEditor(container, options) {
  console.log('used editor')
  $('<input data-text-field="category" data-value-field="category" data-bind="value:'+options.field+'"/>')
    .appendTo(container)
    .kendoDropDownList({
      autoBind: false,
      dataSource: {
        type: "json",
        transport: {
          read: "/api/notes/dumpcats"
        }
      }
    })
} 
```

也在model.fields中：

```
 category: {
    type: "combobox",
    editable: true,
    validation: { required: true }
  }, 
```

没有错误，只是空的组合框以及输入类别时出错的输入框。

未捕获的类型错误：对象 [object Object] 的属性“_parse”不是函数

我[在这里使用了示例](http://demos.kendoui.com/web/grid/editing-custom.html)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T13:43:34.190

问题已解决，正如 Burke Holland 指出的在下面发布答案：

```
 function categoryDropDownEditor(contrainer, options) {
    $('<input data-text-field="category" data-value-field="category" data-bind="value:' + options.field + '"/>"')
      .appendTo(contrainer)
      .kendoComboBox({
        index: 0,
        placeholder: "Select category",
        dataTextField: "category",
        dataValueField: "category",
        dataSource: {
          transport: {
            read: {
              url: '/api/notes/cats',
              dataType: 'json',
              type: 'GET',
            },
          },
          schema: {
            data: function(reply) {
              return reply.rows
            },
          }
        }
      })
  } 
```

# visual-c++ - 为什么 ofstream::get() 和 put() 会导致信息丢失？

> ID：14057878
> 
> 赞同：2
> 
> 时间：2012-12-27T16:30:34.827
> 
> 标签：visual-c++

我的函数是copy2，我在cplusplus.com上找到了函数copy1，我使用copy2有问题，但是copy 1没问题，copy2导致丢失关于atist，title，...的信息用于测试的文件mp3，我可以不明白为什么？

```
 #include <fstream>
 #include <iostream>
using namespace std;

void copy1()
{
    char * buffer;
    long size;

    ifstream infile ("Test.mp3",ifstream::binary);
    ofstream outfile ("Test2.mp3",ofstream::binary);

    // get size of file
    infile.seekg(0,ifstream::end);
    size=infile.tellg();
    infile.seekg(0);

    // allocate memory for file content
    buffer = new char [size];

    // read content of infile
    infile.read (buffer,size);

    // write to outfile
    outfile.write (buffer,size);

    // release dynamically-allocated memory
    delete[] buffer;
    cout<<"xong";
    outfile.close();
    infile.close();
    return ;
}
void copy2(){
    ifstream infile ("Test.mp3",ios::binary);
    ofstream outfile ("Test1.mp3",ios::binary);
    char c;
    while(!infile.eof())
    {
    infile.get(c);
    outfile.put(c);
    }
}
int main () {
    copy2();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T16:38:46.587

您`while(!infile.eof())`可能会造成麻烦，因为它可能会在某些条件下返回错误的结果。我有过类似的问题。尝试使用这样的东西：

```
while (getline(infile,data))                                           
     {                                        
          cout<<data<<endl;
     } 
```

# java - struts 从请求中获取特定消息

> ID：14057891
> 
> 赞同：1
> 
> 时间：2012-12-27T16:31:06.207
> 
> 标签：java, model-view-controller, struts

我在请求范围内有几条警告消息，它是这样保存的，

```
 if ((warningMessages != null) && !warningMessages.isEmpty()){
                    // saves message in request scope
                    saveMessages(request, warningMessages);

} 
```

我想检索特定的警告消息。我是这样的，

```
ActionMessages warningMessages = getMessages(request); 
```

但是什么都没有设置。我错过了什么还是有其他方法可以检索？请建议。

# asp.net - html 下拉列表 - 下拉列表中的第一项无法选择

> ID：14057893
> 
> 赞同：2
> 
> 时间：2012-12-27T16:31:09.777
> 
> 标签：asp.net, jquery-mobile

我的 jquery 移动应用程序中有一个从数据库填充的 html 下拉列表。但是第一项是可选择的，但无法在选择控件中显示。如何做到这一点？

我的代码是

```
<div data-role="fieldcontain" style="width: 50%">
    <label for="selectmenu22">
        <span style="font-family: times new roman,times; 
font-size: medium;">
            <b>Address Type:</b>
        </span>
     </label>
     <select name="ddlAddressType" id="ddlAddresstype" 
         data-theme="b" data-mini="true" runat="server" required="required">
     </select>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-28T03:01:23.943

jQuery Mobile 和 asp.net web 表单不能很好地结合在一起。Ajax 加载和 PostBack 模型只是不网格化。您尚未提供可疑的 JavaScript，但请考虑关闭 Ajax 加载。

```
<form runat="server" data-ajax="false">
   ...
</form> 
```

# neo4j - 如何探索由嵌入式 Neo4j Java 应用程序创建并存储在 /data 目录之外的数据库？

> ID：14057897
> 
> 赞同：2
> 
> 时间：2012-12-27T16:31:22.760
> 
> 标签：neo4j

在[Neo4j Web 管理工具](http://docs.neo4j.org/chunked/milestone/tools-webadmin.html)（http://127.0.0.1:7474/webadmin/）中，我只能探索通过该界面创建的节点和关系。

但是，它不显示由我的 Java 应用程序创建的数据库，这些应用程序使用嵌入式 Neo4j 并将数据库存储在 /data 目录之外。如何探索这些数据库？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-28T08:33:11.943

Webadmin 与 neo4j 服务器实例进行了交谈。您可以使用配置它`config/neo4j-server.properties`，请参阅[http://docs.neo4j.org/chunked/snapshot/server-configuration.html](http://docs.neo4j.org/chunked/snapshot/server-configuration.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-01-09T16:53:03.740

这个问题已经得到了正确的答案，但是我遇到了一个愚蠢的问题，所以我将其发布为其他初学者的提示。

要检查的一个明显的事情是，您是否在 Java 代码中导入与要启动的服务器相同版本的 Neo4j 包。打开使用比服务器更新的 neo4j 创建的数据库可能会导致问题。

在 console.log 我得到

> “将启动超时设置为：基于 -1 的 120000 毫秒检测到错误地关闭数据库，执行恢复..”

我只能从 data/graph.db/messages.log 调试问题。

# eclipse - 终止在 Eclipse 中运行的 maven-jetty-plugin

> ID：14057898
> 
> 赞同：1
> 
> 时间：2012-12-27T16:31:24.597
> 
> 标签：eclipse, maven, jetty, m2eclipse

我正在使用 maven-jetty-plugin 快速运行和调试我在 Eclipse/m2eclipse 下开发的 WebApp。它启动正常，我可以完全使用调试器，但我不能优雅地停止应用程序。

当我在控制台视图中执行 ctrl+c 时，尽管在启动器配置中启用了“分配控制台”，但它什么也不做。

在简单的 java 项目中， ctrl+c 选项工作正常（在 windows 上测试）。所以这似乎是一些远程/嵌入式 jvm 问题。我的应用程序使用持久 JMS 队列，因此每次重新启动后，我都需要手动终止另一台服务器上的会话。这不是很敏捷。

任何人都知道问题的根源是什么？或者也许有一些已知的解决方法？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-27T17:09:37.163

如果您使用 m2eclipse 插件，您可以直接从 eclipse 运行 maven。

1 转到您调试配置并在 maven build 下创建一个新条目。
2 给它一个名字。
3 选择 maven 项目的基本目录。
4 为一个目标输入 jetty:run 然后点击调试按钮。

一切都应该很好。您可以从 Eclipse 内的控制台视图中将其杀死。所有断点都应该照常工作。

要从 Eclipse 中正常关闭应用程序，您必须执行以下操作。将以下配置添加到您的 pom 中以获取 jetty 插件。这里的重要部分是停止键和停止端口。

```
<configuration>
    <tmpDir>target/not/necessary</tmpDir>
    <webAppConfig>
        <contextPath>/${project.name}</contextPath>
    </webAppConfig>
    <stopPort>9966</stopPort> 
    <stopKey>jetty-stop</stopKey>
</configuration> 
```

接下来为 maven 添加另一个运行配置，但这次将目标设置为 jetty:stop。它将执行正常关机。

为了使其更加自动化：可以将目标设置为 jetty:stop jetty:start。这样，如果该进程未运行，则会出现一个小警告，但启动过程将继续。否则其他进程将被优雅地关闭，然后服务器将被启动。

只需要一个命令，它可以通过一个快捷方式（运行最后一个构建）运行，从而减少上下文切换。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-12-30T08:41:42.253

**解决方法 1**

1.  从命令提示符 cd 到您的 webApp 项目（例如，主 pom.xml 所在的位置）。
2.  从那里运行 Jetty`mvn jetty:run`
3.  从那里开始用 ctrl+c 杀戮！（至少使用 Windows cmd）

**解决方法 2**

1.  安装[VisualVM](https://visualvm.java.net/)
2.  [](https://visualvm.java.net/plugins.html)*在新的 VisualVM 上[安装](https://visualvm.java.net/plugins.html)[*Kill Application*](https://visualvm.java.net/plugins.html)[插件](https://visualvm.java.net/plugins.html)*
**   右键单击 VisualVM 列表中的 Jetty 应用程序，然后“杀死应用程序”*

# java - 在 java 中使用 dbgview

> ID：14057909
> 
> 赞同：1
> 
> 时间：2012-12-27T16:32:16.797
> 
> 标签：java, eclipse, log4j, sysinternals, debugview

我正在编写 java 代码并想使用 dbgview （如果可能的话，还有 log4j ）。通过搜索 log4j 的文档，似乎与 log4net 不同，log4j 不支持`OutputDebugStringAppender`将输出重定向到 dbgview 所听的内容。

如何创建一个 dbgview 可以解析的日志文件？如何从 java 将字符串发送到调试流？java是否有任何debugview替代方案？

我正在使用 eclipse、Windows 7 和最新的 log4j jar。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-31T07:33:34.150

Java 没有将调试打印发送到 Windows 调试输出的本机功能。

但是，您可以通过使用 JNA 导入 Windows OutputDebugString 函数来轻松完成此操作。它会破坏任何多平台功能（您将只能在 Windows 上运行），但它会起作用。

你可以这样做：

```
import com.sun.jna.Library;
import com.sun.jna.Native;

public interface Kernel32 extends Library
{
    public void OutputDebugStringA(String Text);
} 
```

调用 OutputDebugString 时，您需要这样做：

```
 Kernel32 lib = (Kernel32) Native.loadLibrary(“kernel32″, Kernel32.class);
 lib.OutputDebugStringA(message); 
```

# windbg - 如何在 WinDbg 中为 operator new/operator delete 设置模块断点（bu）？

> ID：14057910
> 
> 赞同：1
> 
> 时间：2012-12-27T16:32:17.140
> 
> 标签：windbg

这是我的问题：

```
0:001> x xerces_depdom_2_8!xercesc_2_8::DOMStringHandle::operator*
00000000`06645e10 xerces_depdom_2_8!xercesc_2_8::DOMStringHandle::operator delete (void *)
00000000`06645be0 xerces_depdom_2_8!xercesc_2_8::DOMStringHandle::operator new (unsigned int)
0:001> bu "xerces_depdom_2_8!xercesc_2_8::DOMStringHandle::operator delete"
0:001> bu "xerces_depdom_2_8!xercesc_2_8::DOMStringHandle::operator new"
breakpoint 0 redefined
0:001> bu xerces_depdom_2_8!xercesc_2_8::DOMStringHandle::operator delete
Couldn't resolve error at 'xerces_depdom_2_8!xercesc_2_8::DOMStringHandle::operator delete'
0:001> bu xerces_depdom_2_8!xercesc_2_8::DOMStringHandle::operator\ delete
Couldn't resolve error at 'xerces_depdom_2_8!xercesc_2_8::DOMStringHandle::operator\ delete' 
```

首先，我尝试引用函数名称。没有骰子 - 尝试在 上设置断点`operator new`会删除上的那个`operator delete`。意思是，断点首先设置不正确。

未引用的尝试也不起作用。

那么，我该怎么做呢？

**编辑**

我想使用 bu 而不是 bp 是有原因的。断点在脚本中设置。对断点使用实际地址并不是一个好主意，因为它们可能会随着运行而改变，这与函数名称不同。此外，bu 允许在加载相应模块之前设置断点，这又与 bp 不同。

所以，让我澄清一下这个问题 - 在加载各个模块之前设置断点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T23:22:24.693

如果要使用的符号名称中有空格，则需要使用大括号：

```
bu (blah!operator new) 
```

请参阅[链接](http://msdn.microsoft.com/en-us/library/windows/hardware/ff538936%28v=vs.85%29.aspx)，特别是有关*使用复杂文本的断点的部分*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-19T04:40:52.307

另一种选择是 using `bu @!"blah!operator new"`，它的优点是可以引用在模板方法中大量使用的字符`'<'`。`'>'`EdChum的答案的链接中也提到了这一点。

# java - 如何使用 Hibernate 从 SQL Server 存储过程中获取执行结果？

> ID：14057912
> 
> 赞同：0
> 
> 时间：2012-12-27T16:32:18.173
> 
> 标签：java, sql-server, hibernate

我需要得到存储过程执行的结果，假设我正在使用这个接口：org.hibernate.SQLQuery。

目前代码如下所示：

```
SQLQuery query = s.createSQLQuery("exec myProc :list, :out);                                
query.setString("list", list);
query.setInteger("out", out);
try {
    query.executeUpdate();
} catch (HibernateException e) { ... } 
```

如果我将其更改为： - 它会工作吗？

```
 SQLQuery query = s.createSQLQuery("DECLARE @totalRes INT ; exec myProc
 :list, @myInnerParam=@totalRes OUTPUT; select @totalRes");

 query.setString("list", list);query.setInteger("out", out); try {
     Object result = query.uniqueResult(); } catch (HibernateException e) { ... } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T16:45:56.593

这是来自 Hibernate 的存储过程的示例。

我没有使用这里建议的所有技术，但我通常使用 NamedQuery 方法

**存储过程：（**这将根据底层数据库而变化）

```
ALTER PROCEDURE [dbo].[CL_ServiceHoursImport]
    @orderId int = 0  
AS
   select Id, Name from OrderProducts where OrderId = @orderId; 
```

**定义命名查询：（**有不同的方法可以定义它）

```
<sql-query name="myProcNamedQuery">
<return alias="output" class="com.stackoverflow.StoredProcedureOutput"/>
<![CDATA[exec GetStocks :orderId]]>
</sql-query> 
```

**输出类**

```
public class StoredProcedureOutput{
     private int Id;
     private String Name;

     @Override 
      public String toString(){
         return Id + " " + Name + "\n";
      }

    //  getter setters
} 
```

**调用 NamedQuery ：（**取自博文中的示例）

```
Query query = session.getNamedQuery("myProcNamedQuery")
    .setParameter("orderId", orderId);

for(int i=0; i<result.size(); i++){
    StoredProcedureOutput output = (StoredProcedureOutput)result.get(i);
    System.out.println(output);
} 
```

**更新**

使用 NamedQuery 只是个人选择。

我会建议最适合您正在从事的项目的方法。

# linux - Tomcat syslog 在日志文件中添加自定义标签

> ID：14057920
> 
> 赞同：0
> 
> 时间：2012-12-27T16:32:41.507
> 
> 标签：linux, tomcat, syslog-ng

我们在单个框中为不同的不同应用程序运行多个 tomcats 实例，并且我们使用 tomcat 配置中的以下行将日志发送到 syslog。

```
JAVA_OPTS="$JAVA_OPTS -Dserver.syslog.host=logserver1.example.com"
JAVA_OPTS="$JAVA_OPTS -Dserver.syslog.level=WARN" 
```

无论如何我可以在日志文件中添加自定义标签，以便我可以根据每个实例记录它们吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T17:51:48.867

为什么不使用 log4j ？

您可以为每个实例配置 log4j.properties，然后为每个实例选择不同的 PatternLayout/ConversionPatterns。

您应该能够在提及模式时添加自定义标签。

# c# - 在两个不同的 EDMX 映射中使用一个表/模型

> ID：14057922
> 
> 赞同：0
> 
> 时间：2012-12-27T16:32:42.447
> 
> 标签：c#, entity-framework, ado.net

所以我有一个使用 EntityFramework 的带有 mysql 数据库的正常运行的 Ado.Net 项目。我有几个表格，所有表格都有纬度和经度字段。我最近添加了一个坐标地址表，并通过用坐标地址 ID 字段替换所述字段来修改我所有现有的带有纬度/经度字段的表。现在，我几乎所有的查询都失败并出现以下错误：

```
Schema specified is not valid. Errors: 

The relationship 'myModel.device_locations_ibfk_2' was not loaded because the type 'myModel.coordinate_addresses' is not available.
The following information may be useful in resolving the previous error:
The required property 'device_locations' does not exist on the type 'myNamespace.Database_Maps.coordinate_addresses'. 
```

实际上有几个这样的错误，关系发生了变化，但所需的属性保持不变。我完全重新创建了我的 EDMX 地图，但没有成功。

如果需要更多信息，我会尽力提供！

编辑：所以我有两个 EDMX 文件。当我在一个上运行自定义工具时，它会从另一个上删除坐标地址。实际上，每次我修复一个 EDMX 时，我都会破坏另一个。我不能在两个不同的数据库连接器中使用相同的模型吗？请协助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T16:56:40.543

如果您的 edmx 文件在同一个命名空间中，请尝试更改它们。很可能自定义发现在同一个命名空间中创建两个具有相同名称的对象是冲突的。

# android - 记录和显示错误详细信息的正确方法？

> ID：14057923
> 
> 赞同：0
> 
> 时间：2012-12-27T16:32:43.553
> 
> 标签：android, exception-handling

我知道`printStackTrace()`应该避免在 Android 应用程序中使用，我们应该使用`Log`类。

在此之后，我尝试记录如下错误：

```
try {
   //do something  
} catch (Exception e) {
   Log.d(TAG, "General Exception:\n", e);
} 
```

我得到这样的输出：

```
Log level: Verbose
12-27 17:20:21.468: DEBUG/MyApp Page two fragment(11193): General IOException: 
```

我没有得到关于`IOException`.

有人可以告诉我我做错了什么吗？！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T16:35:06.787

改为这样做：

```
 Log.d(TAG, e.getClass().getSimpleName() + ": " + e.getMessage()); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-27T17:47:59.840

~~没有第三个参数！~~

如果您**阅读**sdk 文档，[android.utils.Log](http://developer.android.com/reference/android/util/Log.html)需要两个参数，这是使用的一般准则：

1.  标识消息的标签（通常可以定义为`public static final String TAG="myActivity";`
2.  一条消息，请注意这是一个字符串，因此在您的情况下，它需要是这样的：

```
尝试 {
   //做点什么  
} 捕捉（异常 e）{
   Log.d(TAG, "一般例外:\n" + e);
}

```

注意字符串连接运算符的用法。

***编辑：***注意：日志确实有一个重载，它确实可以采用第三个参数，但通常使用具有两个参数的方法，关于第三个参数，即[SDK](http://developer.android.com/reference/java/lang/Throwable.html)`Throwable`中记录的。尽管如此，我很少在我的项目中使用它，因为具有两个参数的方法足以满足我的需求。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-27T16:36:08.863

您将获得通用异常，一个顶级对象，避免口袋妖怪异常处理（必须全部捕获）并捕获特定异常。但这不是您没有看到异常详细信息的原因：尝试`ioe.getMessage()`：

```
 try{
       startActivity( alertIntent );
   }catch(IOException ioe)
   {
       Log.e("error", "startActivity exception "+ ioe.getMessage());
   } 
```

如果您需要知道日志记录方法的签名，只需查看文档：http: [//developer.android.com/reference/android/util/Log.html](http://developer.android.com/reference/android/util/Log.html)

更多细节和想法： http: [//blog.nelsondev.net/ ?p=187](http://blog.nelsondev.net/?p=187)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-27T17:31:55.093

```
Log.v(); // Verbose
Log.d(); // Debug
Log.i(); // Info
Log.w(); // Warning
Log.e(); // Error 
```

了解更多[信息](http://developer.android.com/reference/android/util/Log.html)

```
Log.e("error", String.valueOf(e.getMessage())); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-27T17:53:21.193

改为执行这些操作::

```
try {
 //do something  
    } 
catch (Exception e) {
    Log.e(TAG, "General Exception::"+e);
    } 
```

# python - Python - 保存在 GNU Nano 2.2.4 中编辑的文件

> ID：14057924
> 
> 赞同：25
> 
> 时间：2012-12-27T16:33:03.820
> 
> 标签：python, nano

我对编程和使用 Raspberry Pi 以及在 Youtube 上遵循教程非常陌生。

我在 GNU Nano 2.2.6 中打开了一个文件，例如：`nano my_File.py`并更改了一些数据。

我正在努力解决如何覆盖文件（或保存文件），因为当我在新窗口中运行它时，它会使用原始数据......

谢谢。

* * *

## 回答 #1

> 赞同：49
> 
> 时间：2012-12-27T16:37:04.497

如果按`Ctrl-X`, 退出，它会询问您是否要保存文件。 `Ctrl-O`用于在不退出编辑器的情况下保存文件。

`Ctrl-G`用于组合键的帮助。

# algorithm - 选择应该在地图上显示的内容的算法

> ID：14057926
> 
> 赞同：0
> 
> 时间：2012-12-27T16:33:05.537
> 
> 标签：algorithm, geometry, game-engine

在游戏中，它们只渲染屏幕上可见的部分场景。例如，如果一个物体在玩家身后，它不会被渲染，或者如果它太远，直到它靠近它才会被渲染。

我想知道他们使用什么样的算法/**数据结构**来确定他们是否应该显示一个对象。

我需要一些非常**快**的东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T17:12:02.897

您需要的是[**二进制空间分区**](http://en.wikipedia.org/wiki/Binary_space_partitioning)(BSP)，它是一种通过超平面将空间递归地细分为凸集的方法。这种细分通过称为**BSP 树**的树数据结构产生空间内对象的表示。

另请参阅[四叉树](http://en.wikipedia.org/wiki/Quadtree)和[八叉树](http://en.wikipedia.org/wiki/Octree)。

StackExchange 周围还有另外两个相关主题：

*   [何时使用二进制空间分区、四叉树、八叉树？](https://stackoverflow.com/questions/99796/when-to-use-binary-space-partitioning-quadtree-octree)
*   [https://gamedev.stackexchange.com/questions/19883/how-does-a-bsp-tree-work-for-z-sorting](https://gamedev.stackexchange.com/questions/19883/how-does-a-bsp-tree-work-for-z-sorting)

# ruby-on-rails - 在 Rails 中扩展设计的多用户特定邮件类

> ID：14057930
> 
> 赞同：0
> 
> 时间：2012-12-27T16:33:28.627
> 
> 标签：ruby-on-rails, ruby-on-rails-3, devise

我有一个 rails 3 应用程序和 2 个用户模型，用于使用 devise gem 进行身份验证。
第一类命名为 StandartUser，第二类命名为 AdminUser。
我可以覆盖设计控制器，但我想为 reset_password_instructions 使用特定邮件。
只是想更改邮件主题。
对于 StandartUser -> 邮件主题应该是“重置密码邮件”
对于 AdminUser -> 邮件主题应该是“bla bla bla bla”
我如何在我的应用程序中实现这个想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T18:59:03.457

生成[设计视图](https://github.com/plataformatec/devise#configuring-views)将允许您修改其中的内容。这将允许您更改内容，但为了更改主题，您必须通过[创建自己的邮件程序](http://guides.rubyonrails.org/action_mailer_basics.html#walkthrough-to-generating-a-mailer)并让设计人员使用它来[覆盖设计邮件程序。](https://github.com/plataformatec/devise/blob/master/lib/generators/templates/devise.rb#L10)

```
class MyMailer < ActionMailer::Base
 default :from => "notifications@example.com"

 def welcome_email(user)
   @user = user
   @url  = "http://example.com/login"
   # your code you want to change subject
   if ...
     @subject = ...
   else
     @subject = ...
   end
   mail(:to => user.email, :subject => @subject)
 end
end 
```

然后在设计配置中：

```
config.mailer = "MyMailer" 
```

# php - PHP+AJAX：如何切换数据排序？

> ID：14057931
> 
> 赞同：0
> 
> 时间：2012-12-27T16:33:43.300
> 
> 标签：php, jquery, mysql, ajax, toggle

我有一个非常简单的页面，数据库中的用户列表在哪里。此页面上有一个包含这些信息的表格，包括**name**、**surname**、**age**、**city**。

我想做一个切换，当我单击**名称**标题时，所有名称将按**ASC**排序，然后当我再次单击**名称**标题时，所有名称将实时按**DESC排序。**

你能给我一个建议吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T16:37:09.303

老实说，您应该为此考虑 JavaScript/jQuery：

[jQuery 表格排序器](http://tablesorter.com/docs/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T16:36:36.197

看看 jQuery 的[Datatables 插件](http://www.datatables.net/ "jQuery 的数据表插件")。我为此广泛使用它，而且它很容易实现。论坛也得到了很好的响应时间。

# java - javax.xml.bind.JAXBException: Class *** 或其任何超类对此上下文都是已知的

> ID：14057932
> 
> 赞同：60
> 
> 时间：2012-12-27T16:33:44.617
> 
> 标签：java, rest, jaxb, jax-rs

我正在尝试通过 REST Web 服务传递一个对象。以下是我的课程使用一些示例代码解释了我需要的功能。

**Rest Web 服务类方法**

```
@POST
@Path("/find")
@Consumes(MediaType.APPLICATION_FORM_URLENCODED)
@Produces({MediaType.APPLICATION_JSON})
public Response getDepartments(){
    Response response = new Response();

    try {

        response.setCode(MessageCode.SUCCESS);
        response.setMessage("Department Names");
        Department dept = new Department("12", "Financial");
        response.setPayload(dept);

    } catch (Exception e) {
        response.setCode(MessageCode.ERROR);
        response.setMessage(e.getMessage());
        e.printStackTrace();
    }       
    return response;
} 
```

**响应类**

```
import java.io.Serializable;
import javax.xml.bind.annotation.XmlRootElement;

@XmlRootElement

public class Response implements Serializable{

    private static final long serialVersionUID = 1L;

    public enum MessageCode {
        SUCCESS, ERROR, UNKNOWN
    }

    private MessageCode code;
    private String message;
    private Object payload;

    public MessageCode getCode() {
        return code;
    }

    public void setCode(MessageCode code) {
        this.code = code;
    }

    public String getMessage() {
        return message;
    }

    public void setMessage(String message) {
        this.message = message;
    }

    public Object getPayload() {
        return payload;
    }

    public void setPayload(Object payload) {
        this.payload = payload;
    }
} 
```

**部门班**

```
@XmlRootElement
public class Department implements java.io.Serializable {

    private String deptNo;
    private String deptName;

    public Department() {
    }

    public Department(String deptNo, String deptName) {
        this.deptNo = deptNo;
        this.deptName = deptName;
    }

    public String getDeptNo() {
        return this.deptNo;
    }

    public void setDeptNo(String deptNo) {
        this.deptNo = deptNo;
    }

    public String getDeptName() {
        return this.deptName;
    }

    public void setDeptName(String deptName) {
        this.deptName = deptName;
    }

} 
```

当我在其余 Web 服务类中调用 getDepartments 方法时，它会返回以下异常。但是如果我在响应类中将**有效负载的类型****对象**更改为**部门**，它会正确返回 json 响应。但是由于我需要将这个 Response 类用于不同类型的类，所以我无法将有效负载重新字符串化为一种类类型。任何人都可以在这件事上帮助我吗？

 ******堆栈跟踪**

```
Dec 27, 2012 9:34:18 PM com.sun.jersey.spi.container.ContainerResponse logException
SEVERE: Mapped exception to response: 500 (Internal Server Error)
javax.ws.rs.WebApplicationException: javax.xml.bind.MarshalException
 - with linked exception:
[javax.xml.bind.JAXBException: class Department nor any of its super class is known to this context.]
    at com.sun.jersey.core.provider.jaxb.AbstractRootElementProvider.writeTo(AbstractRootElementProvider.java:159)
    at com.sun.jersey.spi.container.ContainerResponse.write(ContainerResponse.java:306)
    at com.sun.jersey.server.impl.application.WebApplicationImpl._handleRequest(WebApplicationImpl.java:1437)
    at com.sun.jersey.server.impl.application.WebApplicationImpl.handleRequest(WebApplicationImpl.java:1349)
    at com.sun.jersey.server.impl.application.WebApplicationImpl.handleRequest(WebApplicationImpl.java:1339)
    at com.sun.jersey.spi.container.servlet.WebComponent.service(WebComponent.java:416)
    at com.sun.jersey.spi.container.servlet.ServletContainer.service(ServletContainer.java:537)
    at com.sun.jersey.spi.container.servlet.ServletContainer.service(ServletContainer.java:699)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:820)
    at org.mortbay.jetty.servlet.ServletHolder.handle(ServletHolder.java:511)
    at org.mortbay.jetty.servlet.ServletHandler.handle(ServletHandler.java:401)
    at org.mortbay.jetty.security.SecurityHandler.handle(SecurityHandler.java:216)
    at org.mortbay.jetty.servlet.SessionHandler.handle(SessionHandler.java:182)
    at org.mortbay.jetty.handler.ContextHandler.handle(ContextHandler.java:766)
    at org.mortbay.jetty.webapp.WebAppContext.handle(WebAppContext.java:450)
    at org.mortbay.jetty.handler.HandlerWrapper.handle(HandlerWrapper.java:152)
    at org.mortbay.jetty.Server.handle(Server.java:326)
    at org.mortbay.jetty.HttpConnection.handleRequest(HttpConnection.java:542)
    at org.mortbay.jetty.HttpConnection$RequestHandler.content(HttpConnection.java:945)
    at org.mortbay.jetty.HttpParser.parseNext(HttpParser.java:756)
    at org.mortbay.jetty.HttpParser.parseAvailable(HttpParser.java:218)
    at org.mortbay.jetty.HttpConnection.handle(HttpConnection.java:404)
    at org.mortbay.io.nio.SelectChannelEndPoint.run(SelectChannelEndPoint.java:410)
    at org.mortbay.thread.QueuedThreadPool$PoolThread.run(QueuedThreadPool.java:582)
Caused by: javax.xml.bind.MarshalException
 - with linked exception:
[javax.xml.bind.JAXBException: class Department nor any of its super class is known to this context.]
    at com.sun.xml.bind.v2.runtime.MarshallerImpl.write(MarshallerImpl.java:323)
    at com.sun.xml.bind.v2.runtime.MarshallerImpl.marshal(MarshallerImpl.java:177)
    at com.sun.jersey.json.impl.BaseJSONMarshaller.marshallToJSON(BaseJSONMarshaller.java:103)
    at com.sun.jersey.json.impl.provider.entity.JSONRootElementProvider.writeTo(JSONRootElementProvider.java:136)
    at com.sun.jersey.core.provider.jaxb.AbstractRootElementProvider.writeTo(AbstractRootElementProvider.java:157)
    ... 23 more
Caused by: javax.xml.bind.JAXBException: class Department nor any of its super class is known to this context.
    at com.sun.xml.bind.v2.runtime.XMLSerializer.reportError(XMLSerializer.java:250)
    at com.sun.xml.bind.v2.runtime.XMLSerializer.reportError(XMLSerializer.java:265)
    at com.sun.xml.bind.v2.runtime.XMLSerializer.childAsXsiType(XMLSerializer.java:657)
    at com.sun.xml.bind.v2.runtime.property.SingleElementNodeProperty.serializeBody(SingleElementNodeProperty.java:156)
    at com.sun.xml.bind.v2.runtime.ClassBeanInfoImpl.serializeBody(ClassBeanInfoImpl.java:344)
    at com.sun.xml.bind.v2.runtime.XMLSerializer.childAsSoleContent(XMLSerializer.java:597)
    at com.sun.xml.bind.v2.runtime.ClassBeanInfoImpl.serializeRoot(ClassBeanInfoImpl.java:328)
    at com.sun.xml.bind.v2.runtime.XMLSerializer.childAsRoot(XMLSerializer.java:498)
    at com.sun.xml.bind.v2.runtime.MarshallerImpl.write(MarshallerImpl.java:320)
    ... 27 more
Caused by: javax.xml.bind.JAXBException: class Department nor any of its super class is known to this context.
    at com.sun.xml.bind.v2.runtime.JAXBContextImpl.getBeanInfo(JAXBContextImpl.java:611)
    at com.sun.xml.bind.v2.runtime.XMLSerializer.childAsXsiType(XMLSerializer.java:652)
    ... 33 more 
```

* * *

## 回答 #1

> 赞同：75
> 
> 时间：2012-12-28T18:17:07.340

JAX-RS 实现自动支持基于可发现的 JAXB 注释的类的编组/解组，但是由于您的有效负载被声明为`Object`，我认为创建的类`JAXBContext`错过了`Department`类，并且何时编组它不知道如何。

一个快速而肮脏的修复方法是[`XmlSeeAlso`](http://docs.oracle.com/javaee/6/api/javax/xml/bind/annotation/XmlSeeAlso.html)向您的响应类添加注释：

```
@XmlRootElement
@XmlSeeAlso({Department.class})
public class Response implements Serializable {
  .... 
```

或者更复杂一点的事情是`Response`通过使用 a 来“丰富”类的 JAXB 上下文`ContextResolver`：

```
import javax.ws.rs.Produces;
import javax.ws.rs.core.MediaType;
import javax.ws.rs.ext.ContextResolver;
import javax.ws.rs.ext.Provider;
import javax.xml.bind.JAXBContext;
import javax.xml.bind.JAXBException;

@Provider
@Produces({ MediaType.APPLICATION_JSON, MediaType.APPLICATION_XML })
public class ResponseResolver implements ContextResolver<JAXBContext> {
    private JAXBContext ctx;

    public ResponseResolver() {
        try {
            this.ctx = JAXBContext.newInstance(

                        Response.class, 
                        Department.class

                    );
        } catch (JAXBException ex) {
            throw new RuntimeException(ex);
        }
    }

    public JAXBContext getContext(Class<?> type) {
        return (type.equals(Response.class) ? ctx : null);
    }
} 
```

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2016-11-03T10:01:55.390

我有同样的问题，我通过向 Jaxb2marshaller 添加要探索的包来解决它。对于 spring 将定义一个这样的 bean：

```
@Bean
    public Jaxb2Marshaller marshaller() {
        Jaxb2Marshaller marshaller = new Jaxb2Marshaller();
        String[] packagesToScan= {"<packcge which contain the department class>"};
        marshaller.setPackagesToScan(packagesToScan);
        return marshaller;
    } 
```

通过这种方式，如果您的所有请求和响应类都在同一个包中，则不需要在 JAXBcontext 上特别指出类

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-09-26T11:21:19.513

可以通过指定完整的类路径来解决此异常。

**例子：**

如果您使用的是名为`ExceptionDetails`

* * *

**传递参数的错误方式**

```
JAXBContext jaxbContext = JAXBContext.newInstance(ExceptionDetails.class); 
```

* * *

**传递论据的正确方法**

```
JAXBContext jaxbContext = JAXBContext.newInstance(com.tibco.schemas.exception.ExceptionDetails.class); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2017-01-07T21:13:14.993

我在使用 JAXB 参考实现和 JBoss AS 7.1 时遇到了类似的问题。我能够编写一个集成测试，确认 JAXB 在 JBoss 环境之外工作（暗示问题可能是 JBoss 中的类加载器）。

这是给出错误的代码（即不工作）：

```
private static final JAXBContext JC;

static {
    try {
        JC = JAXBContext.newInstance("org.foo.bar");
    } catch (Exception exp) {
        throw new RuntimeException(exp);
    }
} 
```

这是有效的代码（ValueSet 是从我的 XML 编组的类之一）。

```
private static final JAXBContext JC;

static {
    try {
        ClassLoader classLoader = ValueSet.class.getClassLoader();
        JC = JAXBContext.newInstance("org.foo.bar", classLoader);
    } catch (Exception exp) {
        throw new RuntimeException(exp);
    }
} 
```

在某些情况下，我得到了这个类，也没有它的任何超类在这种情况下是已知的。在其他情况下，我也遇到了 org.foo.bar.ValueSet cannot be cast to org.foo.bar.ValueSet 的异常（类似于此处描述的问题：[ClassCastException when cast to the same class](https://stackoverflow.com/questions/826319/classcastexception-when-casting-to-the-same-class)）。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2018-07-11T10:03:36.307

在支持一个应用程序时，我遇到了类似的错误。这是关于为 SOAP Web 服务生成的类。

该问题是由于缺少课程而引起的。当 javax.xml.bind.Marshaller 试图编组 jaxb 对象时，它没有找到使用 wsdl 和 xsd 生成的所有依赖类。在类路径中添加包含所有类的 jar 后，问题已解决。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2019-01-15T10:03:19.033

[Ftrujillo 的回答](https://stackoverflow.com/a/40398632/6157415)效果很好，但如果你只有一个包裹要扫描，这是最短的形式::

```
 @Bean
    public Jaxb2Marshaller marshaller() {
        Jaxb2Marshaller marshaller = new Jaxb2Marshaller();
        marshaller.setContextPath("your.package.to.scan");
        return marshaller;
    } 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2019-03-31T21:45:38.043

例如，当我们为 Jaxb2Marshaller 使用相同的方法名称时会发生此错误：

```
 @Bean
    public Jaxb2Marshaller marshallerClient() {
        Jaxb2Marshaller marshaller = new Jaxb2Marshaller();
        // this package must match the package in the <generatePackage> specified in
        // pom.xml
        marshaller.setContextPath("library.io.github.walterwhites.loans");

        return marshaller;
    } 
```

在其他文件上

```
 @Bean
    public Jaxb2Marshaller marshallerClient() {
        Jaxb2Marshaller marshaller = new Jaxb2Marshaller();
        // this package must match the package in the <generatePackage> specified in
        // pom.xml
        marshaller.setContextPath("library.io.github.walterwhites.client");

        return marshaller;
    } 
```

即使是不同的班级，您也应该以不同的方式命名它们

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2019-02-01T14:43:36.453

我知道这是一个老问题，但您可以使用参数 (P) 更改响应：

```
public class Response<P> implements Serializable{

private static final long serialVersionUID = 1L;

public enum MessageCode {
    SUCCESS, ERROR, UNKNOWN
}

private MessageCode code;
private String message;
private P payload;

...
public P getPayload() {
    return payload;
}

public void setPayload(P payload) {
    this.payload = payload;
} 
```

}

该方法是

```
public Response<Departments> getDepartments(){...} 
```

我现在不能尝试，但应该可以。

否则可以扩展 Response

```
@XmlRootElement    
public class DepResponse extends Response<Department> {<no content>} 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2021-07-13T08:54:39.473

就像@ftrujillo 已经提出的那样，如果您使用 Spring Jaxb2Marshaller，您可以设置要扫描的包。在某些情况下，如果有一个更复杂的具有继承的 XSD 模型，或者只是具有更广泛的模型，那么在类层次结构中获取要扫描的包的信息可能会出现问题，那么您可以使用对象层次结构的扫描. 在这种情况下，我利用了以下函数来处理普通的 POJO 层次结构（我相信它可能会针对非简单的 POJO 进行增强）：

```
....
            Jaxb2Marshaller locMarshaller = new Jaxb2Marshaller();
            locMarshaller.setPackagesToScan(
                    resolveJaxb2MarshallerPackagesToScan(
                            someFaultContentContainerClass,
                            someFaultContentClass
                    )
            );
...

    /**
     * Resolves the packages which have to be passed into the Spring Jaxb2Marshaller
     * to be able to perform the serialization/deserialization action
     * @param aClassesToBeMarshalled classes which has to be marshalled. Null array items
     *   are ignored without any error.
     * @return packages which have to be scanned by Spring Jaxb2Marshaller for it.
     */
    public static String[] resolveJaxb2MarshallerPackagesToScan(Class<?>... aClassesToBeMarshalled) {
        List<String> locResultList = new ArrayList<>();
        for (Class<?> locProcessedTopLevelClass : aClassesToBeMarshalled) {
            Class<?> locProcessedClass = locProcessedTopLevelClass;
            while (locProcessedClass != null) {
                if (!locResultList.contains(locProcessedClass.getPackageName()))
                    locResultList.add(locProcessedClass.getPackageName());
                locProcessedClass = locProcessedClass.getSuperclass();
            }
        }
        return locResultList.toArray(new String[0]);
    } 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2021-12-21T20:48:01.073

我有一个类似的错误，同样的错误信息，但不同的原因。

在我的情况下，问题是一个不完整的 ObjectFactory 实现，它自动创建为空。在为我的主类编写 ObjectFactory 后，问题就解决了。

```
@XmlRegistry
public class ObjectFactory {

    /**
     * Create a new ObjectFactory that can be used to create new instances of schema derived classes for package: x
     * 
     */
    public ObjectFactory() {
    }

    public CartaPorte createCartaPorte() {
        return new CartaPorte();
    }
} 
```****

# mysql - 不喜欢也不喜欢

> ID：14057934
> 
> 赞同：1
> 
> 时间：2012-12-27T16:33:54.020
> 
> 标签：mysql

请让我知道以下有什么问题：（不返回任何行）

```
 Select * 
 from class 
 where sem NOT LIKE concat('%',(Select sem_id from semester ),'%') 
```

我问这个原因以下技巧工作正常：（返回 8 行）

```
 Select * 
 from class 
 where sem NOT IN (Select sem_id from semester ) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T16:44:56.423

为此，您需要连接语法。据推测，您正在尝试查找其学期与表中的任何学期都不相同的课程。首先找到匹配的，然后使用以下方法过滤掉它们`having`：

```
Select c.*
from class c left outer join
     semester s
     on c.sem like concat('%', s.sem_id, '%')
group by c.class_id
having max(s.sem_id) is null  -- there are no matching semesters 
```

您可以`group by`通过编写这样的查询来消除：

```
 Select c.*
 from class 
 where not exists (select s.sem_id
                   from semester s
                   where class.sem like ('%', s.sem_id, '%')
                   limit 1
                  ) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T16:43:05.473

它们是两个不同的查询，尽管它们都很奇怪。我怀疑每个班级都有一个学期。如果您有适当的外键约束，`sem`最多可以是`null`，在这种情况下，您的查询将变为：

```
select * 
from class 
where sem is null 
```

但是第二个查询应该可以工作，并且应该返回所有具有`sem`不在表中的值的类`semester`。

但是，第一个查询将在`semester`. 此外，它对（假定的）数字字段进行字符串比较。总而言之，第一个查询没有意义。

# ruby-on-rails - nomethoderror 导轨布局

> ID：14057937
> 
> 赞同：0
> 
> 时间：2012-12-27T16:33:58.220
> 
> 标签：ruby-on-rails, undefined, nomethoderror

我是 Rails 新手，并试图在我的标题中创建一个链接以登录/退出个人资料。我不是以下代码的问题，特别是粗体（**）区域：

```
<body>
<div class="navbar navbar-fixed-top">
    <div class="navbar-inner">
        <div class="container">
            <a href="#" class="brand"> Test App</a>
            <ul class="nav">
        <li><%= link_to "All Statuses", statuses_path %></li>
      </ul>
      <ul class="nav pull-right">
        **<li><%= link_to current_user.full_name, "#" %></li>**

      </ul>
        </div>
    </div>
</div>
<div class="container">
<p class="notice"><%= notice %></p>
   <p class="alert"><%= alert %></p>
    <%= yield %>
</div> 
```

我不断收到一条错误消息：

状态中的 NoMethodError#index

显示 /Users/test_app/app/views/layouts/application.html.erb 其中第 18 行提出：

nil:NilClass 的未定义方法 `full_name' 提取的源代码（第 18 行附近）：

```
 <li><%= link_to "All Statuses", statuses_path %></li>
      </ul>
      <ul class="nav pull-right">
        <li><%= link_to current_user.full_name, "#" %></li>

      </ul>
    </div> 
```

状态控制器代码是：

```
class StatusesController < ApplicationController
 # GET /statuses
 # GET /statuses.json
  def index

@statuses = Status.all
respond_to do |format|
  format.html # index.html.erb
  format.json { render json: @statuses }
end
   end

# GET /statuses/1
  # GET /statuses/1.json
  def show
    @status = Status.find(params[:id])

    respond_to do |format|
      format.html # show.html.erb
      format.json { render json: @status }
    end
  end

  # GET /statuses/new
  # GET /statuses/new.json
  def new
    @status = Status.new

    respond_to do |format|
      format.html # new.html.erb
      format.json { render json: @status }
    end
  end

  # GET /statuses/1/edit
  def edit
    @status = Status.find(params[:id])
  end

  # POST /statuses
  # POST /statuses.json
  def create
    @status = Status.new(params[:status])

    respond_to do |format|
      if @status.save
        format.html { redirect_to @status, notice: 'Status was successfully created.' }
        format.json { render json: @status, status: :created, location: @status }
      else
        format.html { render action: "new" }
        format.json { render json: @status.errors, status: :unprocessable_entity }
      end
    end
  end

  # PUT /statuses/1
  # PUT /statuses/1.json
  def update
    @status = Status.find(params[:id])

    respond_to do |format|
      if @status.update_attributes(params[:status])
        format.html { redirect_to @status, notice: 'Status was successfully updated.' }
        format.json { head :no_content }
      else
        format.html { render action: "edit" }
        format.json { render json: @status.errors, status: :unprocessable_entity }
      end
    end
  end

  # DELETE /statuses/1
  # DELETE /statuses/1.json
  def destroy
    @status = Status.find(params[:id])
    @status.destroy

    respond_to do |format|
      format.html { redirect_to statuses_url }
      format.json { head :no_content }
    end
  end
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T16:53:18.513

在你调用的视图`current_user.full_name`中，但是`current_user`is`nil`和method 不能在它上面调用。您可以执行以下操作：

```
<ul class="nav pull-right">
  <% if current_user %>
    <li><%= link_to current_user.full_name, "#" %></li>
  <% end %>
</ul> 
```

这将仅在用户登录时显示您的链接（这意味着`current_user`将返回用户实例，而不是`nil`）

# php - 使用 PHP 生成带有 MySQL 数据的静态单元格计数的 HTML 表

> ID：14057943
> 
> 赞同：0
> 
> 时间：2012-12-27T16:34:17.097
> 
> 标签：php, mysql, html-table

我有一位客户要求我修改他们的一个脚本以显示已删除的文件名表。我不允许将 mysql 修改为 mysqli，因为这不是我的网站。

他不想将它们全部排成一行并分页，而是想要列，以便信息可以放在一页上。我尝试了几种方法，但似乎都没有正常工作

方法 1：显示正确的列数，但在每个单元格中重复相同的文件名：

```
$q = "SELECT `name` FROM `files` WHERE `deleted` = 1";
$r = mysql_query($q);
$rows = mysql_num_rows($r); 
$deleted = mysql_fetch_assoc($r);

// Build table and iterate through the results
    $end = $rows; // total # of results
    $t_rows =ceil($end/5); // number of cells per row
    $x = 0;
    $start = 0;

    echo "<table>";
    while($x <= $t_rows){
        echo "<tr>";
        for($y = 0; $y < 5; $y++, $start++){
            if($start <= $end){
                echo "<td>".$deleted['name']."</td>";
            }
        }
        echo "</tr>";
        $x++;
    }
    echo "</table>"; 
```

方法 2：显示正确的列数，但在每一行上重复一个文件名 5x。（例如，第 1 行有 5 次第一个记录的名称，第 2 行有第 2 个文件的名称等）。

```
$q = "SELECT `name` FROM `files` WHERE `deleted` = 1";
$r = mysql_query($q);
$rows = mysql_num_rows($r); 

// Build table and iterate through the results
    $end = $rows; // total # of results
    $t_rows =ceil($end/5); // number of cells per row
    $x = 0;
    $start = 0;

    echo "<table>";
    while($x <= $t_rows){
        echo "<tr>";
        while($deleted = mysql_fetch_assoc($r)){
            for($y = 0; $y < 5; $y++, $start++){
                if($start <= $end){
                    echo "<td>".$deleted['name']."</td>";
                }
            }
            echo "</tr>";
            $x++;
        }
    }
    echo "</table>"; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T16:43:19.900

```
$q = "SELECT `name` FROM `files` WHERE `deleted` = 1";
$r = mysql_query($q);

// Build table and iterate through the results
$cols = 5; //number of columns
$x = 0;

echo "<table>";
while($deleted = mysql_fetch_assoc($r)){
    if($x % $cols == 0) echo '<tr>'; // when $x is 0, 5, 10, etc.
    echo "<td>".$deleted['name']."</td>";
    if($x % $cols == $cols-1) echo "</tr>"; // when x is 4, 9, 14, etc.
    $x++;
}
if($x%$cols!=0) echo "</tr>"; // add a closing </tr> tag if the row wasn't already closed
echo "</table>"; 
```

（这是未经测试的，但我认为它会工作）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-31T22:07:28.587

在过去几天对此进行了修补后，我想出了一个解决方案：

```
// Build table and iterate through the results
$int = 1;

echo "<table>";
while($deleted = mysql_fetch_assoc($r)){
    if($int%5==1){
        echo "<tr>";
    }

    echo "<td>".htmlspecialchars($deleted['name'])."</td>";

    if($int%5==0){
        echo "</tr>";
    }
    $int++;
}
echo "</table>"; 
```

# sql - 删除记录，其中 2 列可能包含来自同一集合的 id 记录

> ID：14057953
> 
> 赞同：1
> 
> 时间：2012-12-27T16:35:22.333
> 
> 标签：sql, postgresql-9.1

给定带有列的表

```
| user_id | owner_id | something | 
```

我需要删除所有记录，其中**user_id OR owner_id**存在于另一个表中

像：

```
delete from permission 
  where 
    user-id in (select user_id from users where  a = 2) 
      or 
        owner_id in (select user_id from users where a = 2) 
```

如果不调用两次相同的查询，我应该如何做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T16:16:57.833

尝试使用`USING`子句：

```
DELETE FROM permissions
USING users
WHERE users.user_id IN (permissions.user_id, permissions.owner_id)
/*
or:
WHERE (permissions.user_id = users.user_id OR permissions.owner_id = users.user_id)
*/
  AND users.a = 2
; 
```

参考：

*   [删除（PostgreSQL 文档）](http://www.postgresql.org/docs/8.1/static/sql-delete.html)

注意：此语法不是标准的，如手册中所述。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T16:44:17.063

您可以使用 join 来查找满足您条件的权限行：

```
delete from permissions
  where (user_id, owner_id) in
      (select p.user_id, p.owner_id 
       from permissions p 
            join users on (u.user_id = p.user_id or u.user_id = p.owner_id)) 
```

如果您在 user_id 和 owner_id 上有索引，则可以归结为几个连接的索引扫描。

# xaml - 在 AppBar-Button 中引用 resources.resw

> ID：14057959
> 
> 赞同：0
> 
> 时间：2012-12-27T16:35:36.833
> 
> 标签：xaml, windows-runtime, winrt-xaml

我需要在 AppBar-Button 中引用 resources.resw 文件中的文本，但它设置为`AutomationProperties.Name=""`.
我不能只是将它添加到 resources.resw 中`AppBarSearch.AutomationProperties.Name`，那么我该如何引用它呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T17:33:06.880

`AutomationProperties.Name`是一个附加属性，你需要以[不同](http://msdn.microsoft.com/en-us/library/windows/apps/xaml/hh965329.aspx)的方式处理它，即你需要在资源键中包含它的命名空间：

```
AppBarSearch.[using:Windows.UI.Xaml.Automation]AutomationProperties.Name 
```

# database - 多次调用数据库的依赖注入

> ID：14057963
> 
> 赞同：0
> 
> 时间：2012-12-27T16:35:50.037
> 
> 标签：database, zend-framework, dependency-injection, mapper

我试图在我的代码中更好地实现 OOP 和依赖注入，并遇到以下问题。

我为涉及雇主和公司的客户提供服务（使用相应的模型、映射器和数据库表）：

```
class Service
{
    protected $clientId;
    protected $client;
    protected $employerId;
    protected $employer;
    protected $companyId;
    protected $company;

    public function setClient(Client $client)
    {
       $this->client = $client;       
    }

    public function setEmployer(Employer $client)
    {
        $this->employer = $employer;
    }

    public function setCompany(Company $company)
    {
        $this->company = $company;
    }

    // more
} 
```

为了获得一个 Service 对象，我首先实例化 Service 对象，该对象从数据库中返回一个 clientId。使用 clientId 实例化一个 Client 对象（并将其附加到服务），这涉及再次访问数据库。雇主和公司也一样。

我可以通过连接从数据库中一次性检索服务、客户、雇主和公司，但这会使我的映射器更加复杂。例如，客户、雇主和公司都有地址，所以我需要为这些列加上别名并将它们映射到各自的模型。这比单独从每个表中检索所有列并将它们单独映射到每个模型（例如，使用一些逻辑将带下划线的列转换为 ZF camelCase）、重用我的客户、雇主和公司映射器更不干净。

是否有最佳实践解决方案，还是取决于个人喜好和情况（性能与可维护性）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T16:51:12.250

首先，有一篇关于 PHP 依赖注入的好文章，我认为[值得](http://www.potstuck.com/2009/01/08/php-dependency-injection/)一试。其次，您的问题并不是关于依赖注入的问题，因为您的主要问题都是关于您应该查询数据库的次数。

如果您将对象注入到 Service 中，那么一次调用它们或一个接一个调用它们并不重要。真正的问题只是“我能负担得起多次访问数据库”。依赖注入的最大优点是您可以轻松更改所提供对象的来源（因此，如果您有数据库帮助程序类或类似的东西，依赖注入非常适合内部可更改的数据库对象）。

你只需要问自己这里的常规 MySQL 问题即可收集这些信息（性能与可维护性）。实际上，如果您有一个关系表，那么重点是能够使用连接查询它，并映射出这些表。

您可以查看其他 ORM 如何从数据库中补充其对象，但您是最了解您的应用程序的人。可维护性在这里应该是一个很大的问题，因为你已经很好地抽象了一些东西。

如果您的 DB 发生变化，您只需要更改映射对象，并且如果您的业务逻辑发生变化，则无需触及 DBAL。

# android - 如何保存微调器并从微调器单击重新加载 EditText 输入

> ID：14057964
> 
> 赞同：0
> 
> 时间：2012-12-27T16:35:52.963
> 
> 标签：android, eclipse, android-edittext, spinner, android-sqlite

我创建了一个 EditText 来插入我的名字和一个来插入我的姓氏。当我单击添加时，它必须将我的名字保存到微调器中，当我单击它时，我想将我的名字和姓氏显示在 edittext 中。我已经创建了此代码，但它保存并仅将名称重新加载到 EditText Name 和 EditText Surname 中。我该怎么办？是否可以仅单击名称微调器重新加载姓氏？这是我的代码：

```
 // Spinner element
Spinner spinner;

// Add button
Button btnAdd, btnReset;

// Input text
EditText inputLabel, surname, cf, age;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    // Spinner element
    spinner = (Spinner) findViewById(R.id.spinner);

    // add button
    btnAdd = (Button) findViewById(R.id.btn_add);

    //reset Button
    btnReset =(Button) findViewById (R.id.btn_reset);

    // new label input field
    inputLabel = (EditText) findViewById(R.id.editTextName);
    surname = (EditText) findViewById(R.id.editTextSurName);
    cf = (EditText) findViewById(R.id.editTextCodicefiscale);
    age = (EditText) findViewById(R.id.editTextAge);

    // Spinner click listener
    spinner.setOnItemSelectedListener(this);

    // Loading spinner data from database
    loadSpinnerData();

    /**
     * Add new label button click listener
     * */
    btnAdd.setOnClickListener(new View.OnClickListener() {

        public void onClick(View arg0) {
            String label = inputLabel.getText().toString();
            String label2 = surname.getText().toString();

            if (label.trim().length() > 0) {
                // database handler
                DatabaseHandler db = new DatabaseHandler(
                        getApplicationContext());

                // inserting new label into database
                db.insertLabel(label);
                db.insertLabel2(label2);

                // making input filed text to blank
                inputLabel.setText("");
                surname.setText("");

                // Hiding the keyboard
                InputMethodManager imm = (InputMethodManager) getSystemService(Context.INPUT_METHOD_SERVICE);
                imm.hideSoftInputFromWindow(inputLabel.getWindowToken(), 0);
                imm.hideSoftInputFromWindow(surname.getWindowToken(), 0);

                // loading spinner with newly added data
                loadSpinnerData();
            } else {
                Toast.makeText(getApplicationContext(), "Please enter label name",
                        Toast.LENGTH_SHORT).show();
            }

        }
    });

    btnReset.setOnClickListener(new View.OnClickListener() {

        public void onClick(View v) {
            // TODO Auto-generated method stub
            inputLabel.setText("");
            surname.setText("");
            cf.setText("");
            age.setText("");
        }
    });
}

/**
 * Function to load the spinner data from SQLite database
 * */
private void loadSpinnerData() {
    // database handler
    DatabaseHandler db = new DatabaseHandler(getApplicationContext());

    // Spinner Drop down elements
    List<String> lables = db.getAllLabels();

    // Creating adapter for spinner
    ArrayAdapter<String> dataAdapter = new ArrayAdapter<String>(this,
            android.R.layout.simple_spinner_item, lables);

    // Drop down layout style - list view with radio button
    dataAdapter
            .setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);

    // attaching data adapter to spinner
    spinner.setAdapter(dataAdapter);
}

public void onItemSelected(AdapterView<?> parent, View view, int position,
        long id) {
    // On selecting a spinner item
    String label = parent.getItemAtPosition(position).toString();
    String label2 =  parent.getItemAtPosition(position).toString();
    inputLabel.setText(label);
    surname.setText(label2);
    // Showing selected spinner item
    Toast.makeText(parent.getContext(), "You selected: " + label,
            Toast.LENGTH_LONG).show();

}

public void onNothingSelected(AdapterView<?> arg0) {
    // TODO Auto-generated method stub

} 
```

}

这是我的数据库处理程序：

```
 // Database Version
private static final int DATABASE_VERSION = 1;

// Database Name
private static final String DATABASE_NAME = "spinnerExample";

// Labels table name
private static final String TABLE_LABELS = "labels";

// Labels Table Columns names
private static final String KEY_ID = "id";
private static final String KEY_NAME = "name";
private static final String KEY_SURNAME = "surname";

public DatabaseHandler(Context context) {
    super(context, DATABASE_NAME, null, DATABASE_VERSION);
}

// Creating Tables
@Override
public void onCreate(SQLiteDatabase db) {
    // Category table create query
    String CREATE_CATEGORIES_TABLE = "CREATE TABLE " + TABLE_LABELS + "("
            + KEY_ID + " INTEGER PRIMARY KEY," + KEY_NAME + KEY_SURNAME + " TEXT)";
    db.execSQL(CREATE_CATEGORIES_TABLE);

}

// Upgrading database
@Override
public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
    // Drop older table if existed
    db.execSQL("DROP TABLE IF EXISTS " + TABLE_LABELS);

    // Create tables again
    onCreate(db);
}

/**
 * Inserting new lable into lables table
 * */
public void insertLabel(String label){
    SQLiteDatabase db = this.getWritableDatabase();

    ContentValues values = new ContentValues();
    values.put(KEY_NAME, label);

    // Inserting Row
    db.insert(TABLE_LABELS, null, values);
    db.close(); // Closing database connection
}

public void insertLabel2(String label2){
    SQLiteDatabase db = this.getWritableDatabase();

    ContentValues values2 = new ContentValues();
    values2.put(KEY_SURNAME, label2);

    // Inserting Row
    db.insert(TABLE_LABELS, null, values2);
    db.close(); // Closing database connection
}

/**
 * Getting all labels
 * returns list of labels
 * */
public List<String> getAllLabels(){
    List<String> labels = new ArrayList<String>();

    // Select All Query
    String selectQuery = "SELECT  * FROM " + TABLE_LABELS;

    SQLiteDatabase db = this.getReadableDatabase();
    Cursor cursor = db.rawQuery(selectQuery, null);

    // looping through all rows and adding to list
    if (cursor.moveToFirst()) {
        do {
            labels.add(cursor.getString(1));
        } while (cursor.moveToNext());
    }

    // closing connection
    cursor.close();
    db.close();

    // returning lables
    return labels;
} 
```

}

# javascript - 在 KineticJS 中移除舞台

> ID：14057965
> 
> 赞同：5
> 
> 时间：2012-12-27T16:35:56.243
> 
> 标签：javascript, jquery, html, canvas, kineticjs

如何`Stage`删除 KineticJS？

**问题：** `stage.removeChildren()`成功删除它的孩子喜欢`layers`. 但是`stage.remove()`并没有移除舞台，如下面的jsfiddle所示，`console.log(stage)`移除后仍然显示舞台没有被移除！！！

*`.kineticjs-content`与 a 一起创建的 div在执行`Kinetic.Stage`后也保留下来`.remove()`。*

**jsfiddle：http:** [//jsfiddle.net/jfaUg/](http://jsfiddle.net/jfaUg/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T17:16:17.267

该阶段无法删除，因为根据 KineticJS 的当前状态没有适用的删除功能。

```
。消除（）
```

您尝试使用的功能适用于“容器”类（[文档](http://kineticjs.com/docs/symbols/Kinetic.Container.php#remove)）的子级，而不适用于容器对象本身（阶段扩展容器），即说 `layer.remove()`有效但`stage.remove()`不会

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-29T16:54:24.457

您可以随时添加：

```
stage=null;
document.getElementById("canvas").innerHTML = ''; 
```

[http://jsfiddle.net/jfaUg/1/](http://jsfiddle.net/jfaUg/1/)

# c# - 依赖倒置原则以及接口的放置位置

> ID：14057968
> 
> 赞同：3
> 
> 时间：2012-12-27T16:36:03.620
> 
> 标签：c#, asp.net-mvc, inversion-of-control, solid-principles, dependency-inversion

我正在 asp.net 中构建一个简单的 MVC 应用程序。我想遵循[依赖倒置原则](https://docs.google.com/file/d/0BwhCYaYDn8EgMjdlMWIzNGUtZTQ0NC00ZjQ5LTkwYzQtZjRhMDRlNTQ3ZGMz/edit?hl=en)，不知道自己做得对不对。

我目前正在研究身份验证系统。我有一个 AccountController，它在里面使用 Authenticator 服务。Authenticator 服务通过构造函数注入注入到控制器中。

```
public class AccountController : Controller
{
    private IAuthenticator _authenticator;

    public AccountController(IAuthenticator authenticator)
    {
        _authenticator = authenticator;
    }

    //
    // POST: /Account/Login

    [HttpPost]
    public ActionResult Login(LoginModel model, string redirectToUrl = null)
    {

     ...

    } 
```

文件的结构是这样的：

![在此处输入图像描述](../Images/61bf4ca8e9ad33f32b082ded8aaf635e.png)

但我在想，如果我想完全颠倒控制器及其依赖项之间的规范，我将不得不将身份验证服务的接口移动到控制器旁边。像这样的东西：

![在此处输入图像描述](../Images/1e3776ef86daced333576da626f93d29.png)

这样，客户端 - 控制器 - 和服务的抽象将位于同一个命名空间中。因此，服务接口的变化将来自客户端，并将传播到服务实现。而不是前一种方式，服务中发生的变化被传播到客户端。依赖是倒置的——服务依赖于客户端。

当客户端和服务位于不同的程序集中时，我可以看到这样做的好处，但我不确定当涉及到同一个程序集时是否应该这样做。

让我知道我是否正确执行此操作以及我应该使用第一个文件结构还是第二个文件结构。

谢谢， 阿西尔

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-27T16:38:45.927

代码文件的位置几乎没有区别 - 这是组织源代码的问题，与控制反转无关。

重要的是您将依赖项注入到控制器中，您就是这样。

# linux - 无法在 VIM 中设置配色方案

> ID：14057971
> 
> 赞同：2
> 
> 时间：2012-12-27T16:28:57.530
> 
> 标签：linux, vim

我正在尝试在 VIM中设置配色方案[Wombat 。](http://www.vim.org/scripts/script.php?script_id=1778)我按照以下说明进行操作：

1.  将 wombat.vim 文件下载到该位置`~/.vim/colors/ directory`
2.  打开VIM编辑器并设置配色方案`:colorscheme wombat`

但是，运行命令后编辑器保持不变。我在这里错过了什么吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-28T18:48:23.327

试试`set t_Co=256`你的 .vimrc。这可能是您的终端不支持 256 色的问题。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-27T17:08:52.933

首先尝试一些完全不同的配色方案，例如`murphy`，然后切换回袋熊。如果没有任何变化，那么 vim 可能无法读取您的`wombat.vim`，请检查文件和颜色目录的权限以确定。

否则，如果您看到颜色，但缺少灰色背景，则很可能意味着您的终端不支持 @maverik 提到的 256 种颜色。尝试将您的终端仿真设置为`xterm-256color`（如果您的操作系统支持它）并重试。

# php - php有更大的字体吗？

> ID：14057973
> 
> 赞同：1
> 
> 时间：2012-12-27T16:36:14.540
> 
> 标签：php, fonts, gd, dynamic-image-generation

如此处所述[，](http://de.php.net/manual/en/function.imageloadfont.php)您可以使用

> 图像加载字体（文件）

在 PHP 中获取字体，例如用于写入生成的图像。现在我想知道从哪里获得这样的字体文件，比如是否有某种转换器可以将“普通”字体转换为 PHP 使用的这种奇怪的格式？或者是否有某种此类字体的集合？

我的验证码生成器需要这个，它需要一个比可用的最大标准 PHP 字体更大的字体。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-27T16:44:04.463

您可以使用 php 使用 Nice True Type 字体制作图像验证码，在我的网站上，我有一个非常好的示例说明如何制作一个！

[http://phpsnips.com/43/Advanced-Image-Captcha#.UNx6mNdQC0x](http://phpsnips.com/43/Advanced-Image-Captcha#.UNx6mNdQC0x)

# ruby-on-rails - Tar2RubyScript 出错

> ID：14057981
> 
> 赞同：1
> 
> 时间：2012-12-27T16:36:39.397
> 
> 标签：ruby-on-rails

我正在关注如何分发 Rails 应用程序

[http://www.erikveen.dds.nl/distributingrubyapplications/rails.html](http://www.erikveen.dds.nl/distributingrubyapplications/rails.html)

但是，当我这样做时：

```
$ ruby tar2rubyscript.rb desktopApp/ 
```

输出是：

```
tar2rubyscript.rb:623:in `replace': can't modify frozen String (RuntimeError)
        from tar2rubyscript.rb:623:in `block in <main>'
        from tar2rubyscript.rb:577:in `block in newlocation'
        from tar2rubyscript.rb:505:in `block in newlocation'
        from tar2rubyscript.rb:472:in `newlocation'
        from tar2rubyscript.rb:505:in `newlocation'
        from tar2rubyscript.rb:577:in `newlocation'
        from tar2rubyscript.rb:621:in `<main>' 
```

# iphone - UIview中5个标签的界面构建器中的NSLayoutConstraints

> ID：14057983
> 
> 赞同：1
> 
> 时间：2012-12-27T16:36:50.330
> 
> 标签：iphone, ios, ios6

我认为我对这些新的限制有一个根本性的问题。

想象一下，你在 UIView 中从上到下放置了 5 个标签。顶部标签在视图顶部与其下方的下一个标签之间等距分布。然后每个标签也是等距的。

我想要发生的是，当 UIView 高度变小或变大时，每个标签之间的空间会平均变化吗？

我应该瞄准什么。我应该使第三个标签在视图中垂直居中，然后从中心向其他标签添加约束，还是应该将 1 和 2 约束到视图的顶部、3 中心和 4 和 5 到底部？

提前感谢您的所有建议。

**编辑：** 添加以下答案后，我已经使用了界面构建器中的约束，虽然我不是 100% 确定我已经回答了它，但我认为我可以正常工作。

在所有标签之间我有一定的距离。但我也有一定的最小距离，比如跟随苹果 HIG 我认为标签之间是 15。所以我的是 30，我设置了大于或等于 15 的约束。现在，当超级视图发生变化时，iOS 会为我完成从 30 到 15 的所有移动。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T19:51:47.853

我最初是用按钮来做这个的，我可以让它工作的唯一方法是在每个按钮之间添加标签（没有文本，所以它们是不可见的），它会自动调整到视图框架大小（旋转时），在包含视图和第一个和最后一个按钮之间。这些按钮都有一个固有的大小，而标签没有，所以它们可以自由地改变它们的高度来填充空间。我修改了代码以使用所有标签，其中“b”标签是带有文本的标签。

```
-(void)viewDidLoad {
    [super viewDidLoad];

    NSMutableDictionary *viewsDict = [NSMutableDictionary dictionary];
    for (int i=1; i<5; i++) {
        UILabel *b = [[UILabel alloc] initWithFrame:CGRectMake(0, 0, 150, 44)];
         b.text = @"This is my label";
        [b setTranslatesAutoresizingMaskIntoConstraints:NO];
        [viewsDict setObject:b forKey:[NSString stringWithFormat:@"b%d",i]];
    }

    for (int i=1; i<6; i++) { // these are the spacer labels
        UILabel *l = [[UILabel alloc ]init];
        [l setTranslatesAutoresizingMaskIntoConstraints:NO];
        [viewsDict setObject:l forKey:[NSString stringWithFormat:@"l%d",i]];
    }

    for (id obj in viewsDict.allKeys) 
        [self.view addSubview:viewsDict[obj]];

    NSArray *constraints = [NSLayoutConstraint constraintsWithVisualFormat:@"V:|[l1][b1][l2(==l1)][b2][l3(==l1)][b3][l4(==l1)][b4][l5(==l1)]|"
                                                                   options:NSLayoutFormatAlignAllLeading
                                                                   metrics:nil
                                                                     views:viewsDict];

    NSArray *constraints2 = [NSLayoutConstraint constraintsWithVisualFormat:@"|-[b1]"
                                                                   options:0
                                                                   metrics:nil
                                                                     views:viewsDict];

    [self.view addConstraints:constraints];
    [self.view addConstraints:constraints2];
} 
```

这将产生均匀间隔的标签，标准空间位于视图的左边缘。

# javascript - 无限垂直滚动条

> ID：14057989
> 
> 赞同：-1
> 
> 时间：2012-12-27T16:37:23.427
> 
> 标签：javascript, html

我有一个非常适合我的垂直滚动脚本，但问题是它会在一段时间后停止。如何修改脚本，使其一次又一次地从上到下无限滚动？
这是代码：

```
<html>
<head>
<style type="text/css">
.frame {
font:12px arial;
width:200;
height:300;
border:none;
overflow: hidden;
border:1px solid black;
padding:5;
}
</style>
<script language="javascript">
i = 0
var speed = 1
function scroll() {
i = i + speed
var div = document.getElementById("news")
div.scrollTop = i
if (i > div.scrollHeight - 160) {i = 0}
t1=setTimeout("scroll()",100)
}
</script>
</head>
<body onload="scroll()">
<div class="frame" id="news" onmouseover="clearTimeout(t1)" onmouseout="scroll()" >
Some Text text 1<br>
Some Text text 2<br>
Some Text text 3<br>
Some Text text 4<br>
Some Text text 5<br>
Some Text text 6<br>
Some Text text 7<br>
Some Text text 8<br>
Some Text text 9<br>
Some Text text 10<br>
Some Text text 11<br>
Some Text text 12<br>
Some Text text 13<br>
Some Text text 14<br>
Some Text text 15<br>
Some Text text 16<br>
Some Text text 17<br>
Some Text text 18<br>
Some Text text 19<br>
Some Text text 20<br>
Some Text text 21<br>
</div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T16:55:46.940

它实际上并没有停止。
尝试将 if() 条件更新为

```
if (i > div.scrollHeight - 300) {i = 0} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T16:56:12.757

你的问题是你只有在 scrollHeight 减去 160 之后才重置它

它应该是 scrollHeight - divHeight

# c# - Linq 两张桌子合二为一

> ID：14057994
> 
> 赞同：0
> 
> 时间：2012-12-27T16:37:47.253
> 
> 标签：c#, .net, linq, entity-framework

我有两张桌子：

1.  Id、名字、姓氏、地址、日期
2.  ID、名字、姓氏、电子邮件、电话、日期

现在我想收到结果：

*   Id、名字、姓氏、地址、日期
*   ID、名字、姓氏、电子邮件、电话、日期
*   Id、名字、姓氏、地址、日期
*   ID、名字、姓氏、电子邮件、电话、日期
*   Id、名字、姓氏、地址、日期
*   ID、名字、姓氏、电子邮件、电话、日期

如何通过使用 Linq 做到这一点？

好的，我有自己的进一步解释，这是我的任务：两者之间必须存在关系，才能同时从两个表中收集信息以创建预填充的 PDF。我必须使用 Linq 和 MVC 4.5

我以为这会很容易，但圣诞节后我有一些头脑盲区。

这就是我想要实现的目标：

```
var last24h = DateTime.Now.AddHours(-24);
        var resultL = db.Loans.Where(p => p.CreatedDate >= last24h).Select( p=> new PDFList() {
            Id = p.Id,
            Amount = p.Amount,
            Term = p.Term,
            Purpose = p.Purpose,
            FirstName = p.FirstName,
            LastName = p.LastName,
            Address = p.Address,
            Email = p.Email,
            PropertyValue = 0,
            CreatedDate = p.CreatedDate,
            Seen = p.Seen,
            AdvisorId = p.AdvisorId
        });
        var resultM = db.Mortgages.Where(p => p.CreatedDate >= last24h).Select(p => new PDFList()
        {
            Id = p.Id,
            Amount = p.Amount,
            Term = p.Term,
            Purpose = "",
            FirstName = p.FirstName,
            LastName = p.LastName,
            Address = p.Address,
            Email = p.Email,
            PropertyValue = p.PropertyValue,
            CreatedDate = p.CreatedDate,
            Seen = p.Seen,
            AdvisorId = p.AdvisorId
        });
        var resultLM = resultL.Concat(resultM).OrderByDescending(p=>p.CreatedDate).ToList(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T16:51:47.573

您可以按照下面提到的类型内连接为您的表。试试吧。

**这是 Linq 内部连接的示例**

```
public void Linq102() 
{ 

    string[] categories = new string[]{  
        "Beverages",   
        "Condiments",   
        "Vegetables",   
        "Dairy Products",   
        "Seafood" };  

    List<Product> products = GetProductList(); 

    var q = 
        from c in categories 
        join p in products on c equals p.Category 
        select new { Category = c, p.ProductName }; 

    foreach (var v in q) 
    { 
        Console.WriteLine(v.ProductName + ": " + v.Category);  
    } 
} 
```

您可以获得更多详细信息[**LINQ - 在此处加入运算符**](http://code.msdn.microsoft.com/LINQ-Join-Operators-dabef4e9)

我希望这对你有帮助。

# coldfusion - 从 excel 中提取数据并创建自定义 CSV - ColdFusion

> ID：14057995
> 
> 赞同：3
> 
> 时间：2012-12-27T16:37:58.993
> 
> 标签：coldfusion, coldfusion-9

我正在从我们的客户那里接收 excel 文件，我需要从它们中创建一个 csv 文件。我的问题是 excel 文件中的值不符合我们仅通过复制来创建 csv 文件的标准。在创建文件时，我需要获取这些值并将它们按正确的顺序排列。我通读了 CF 的 livedocs，但找不到任何有用的东西。

我正在考虑创建一个结构并将数据拉出其中，然后根据我的结构创建 csv 文件，但我之前没有做过类似的事情，我不确定它是否可能。我也想过用 listGetAt 代替 struct 但还没有尝试过。

以前有人做过这样的事情吗？我正在尝试对尽可能少的值进行硬编码，因为如果我们有第二个客户遇到同样的问题，我认为这将成为未来的问题。

更新（过去几天我更改了很多代码，所以这就是我目前所拥有的）

```
<cfset DataDirectory = "E:\testfolder\test.xlsx"> 

<cfspreadsheet action="read" src="#DataDirectory#" excludeHeaderRow="true" headerrow="1"  query="queryData"> 

 <cfquery name="contact" datasource="#ds#">
        select ClientBrandID 
        from ClientBrands 
        where surveyReferralID IN
                                (select surveyReferralID from clientAdmin where username = '#res#')
     </cfquery>

    <cfscript>
        dataFile = structNew();
        StructInsert(datafile,"ClientBrandID",contact.ClientBrandID);
        StructInsert(datafile,"surveyType", queryData.surveyType);  
    </cfscript>
 <cfscript> 

    ///We need an absolute path, so get the current directory path. 
    theFile=  "E:\testfolder\NewTest.csv";
    //Create a new Excel spreadsheet object and add the query data. 
    theSheet = SpreadsheetNew("PatientData"); 

    SpreadsheetAddRow(theSheet, "ClientBrandID,SurveyType,Location,ClientContactID,FirstName,LastName,HomePhone,WorkPhone,CellPhone,Email"); <!---This is the header of the new CSV --->
    SpreadsheetAddRows(theSheet, "datafile.clientbrandid, datafile.surveytype"); <!--- This is my latest failed attempt. Tried to pass in data from my struct, probably the quotes are the issue but haven't tried it without them --->
</cfscript> 

<!--- Write the spreadsheet to a file, replacing any existing file. ---> 
<cfspreadsheet action="write" filename="#theFile#" format="csv" name="theSheet" overwrite=true > 
```

所有这些操作都需要在 cfloop 中才能遍历我的测试文件夹中的所有文件。现在我正在硬编码一个文件来解决手头的问题，然后再做任何其他事情。另外，我错过了另一个循环，它需要遍历文件的所有值。它应该类似于`<cfloop query='queryData'>`我从 cfspreadsheet 获得的查询。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-27T17:28:38.337

你可以让它接受任何订单，但你仍然需要将预期的列标题硬编码到一个数组或其他东西中，考虑到它只是供你内部使用，我只需按照它应该的顺序将数据添加回 CSV参加。上次我从查询中制作电子表格时，我是这样做的。也许它会有所帮助。

```
<cfscript>
    sMySpreadSheet = spreadsheetNew();
    column = 1;
    <!--- header row --->
    <!--- Remember what is expected from SpreadsheetSetCellValue --->
    <!--- SpreadsheetSetCellValue(spreadsheetObj, value, row, column) --->

    spreadsheetSetCellValue(sMySpreadSheet ,"First Name",1,column); column++;
    spreadsheetSetCellValue(sMySpreadSheet ,"Last Name",1,column); column++;
    spreadsheetSetCellValue(sMySpreadSheet ,"DOB",1,column); column++;
    spreadsheetSetCellValue(sMySpreadSheet ,"Phone Number",1,column); column++;
    spreadsheetSetCellValue(sMySpreadSheet ,"Number of Kids",1,column); column++;

    <!--- data rows --->
    <!--- if you're not using a header row with real titles you can just use the 
          default col_x 
          example: spreadsheetSetCellValue(sMySpreadSheet , queryData.col_1[q], q+1, column); column++; --->
    for(q=1; q LTE queryData.recordCount; q++){
        column = 1;
        spreadsheetSetCellValue(sMySpreadSheet , queryData.first[q], q+1, column); column++;
        spreadsheetSetCellValue(sMySpreadSheet , queryData.last[q], q+1, column); column++;
        spreadsheetSetCellValue(sMySpreadSheet , queryData.dob[q], q+1, column); column++;
        spreadsheetSetCellValue(sMySpreadSheet , queryData.phoneNumber[q], q+1, column); column++;
        spreadsheetSetCellValue(sMySpreadSheet , queryData.kidCount[q], q+1, column); 

    }
    <!--- make it purdy (optional) --->
    spreadsheetFormatRow(queryData, {fgcolor="light_cornflower_blue"},1);   
</cfscript> 
```

如果您想简单地添加到 CSV，您可以执行以下操作（如果您有资格，将您的东西包装在 " 中）：

```
<cfsetting enableCFoutputOnly = "Yes">
<cfsaveContent variable = "myCSV">
<cfset newline = #chr(13)#&#chr(10)#>
<cfoutput>First Name,Last Name,DOB,Phone Number,Number of Kids#newline#</cfoutput>
  <cfoutput query="queryData">#queryData.first#,#queryData.last#,#queryData.dob#,#queryData.phoneNumber#,#kqueryData.idCount##newline#/cfoutput>
</cfsaveContent>
</cfsetting>
<cffile action = "append" file = "[your file]" output = "#myCSV#"> 
```

如果 cfsavecontent 导致空白问题并且 cfsetting 没有帮助，这里是另一种选择。

```
<cfset myCSV = "First Name,Last Name,DOB,Phone Number,Number of Kids#newline#">
<cfloop query="queryData">
  <cfset myCSV &= "#queryData.first#,#queryData.last#,#queryData.dob#,#queryData.phoneNumber#,#queryData.kidCount##newline#">
</cfloop> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T17:27:20.773

以下是基于已编辑问题的一些建议。即使编辑后的问题没有明确说明您要达到的目标，我也在制作它们。

关于“所有这些操作都需要在 cfloop 中才能遍历我的测试文件夹中的所有文件”，您可以在该文件夹上使用 cfdirectory。它将返回一个 ColdFusion 查询，您可以通过该查询进行循环。

您的其余代码看起来比它需要的更复杂。阅读电子表格为您提供了一个查询对象 - 到目前为止一切都很好。

您的数据库查询，命名为联系人看起来很可疑。您引用了一个名为 res 的变量，但不清楚它的来源。如果它来自电子表格，那么值列表可能更合适。顺便说一下，使用查询参数。

您似乎希望您的 csv 文件将电子表格中的数据和数据库查询中的数据结合起来。如果是这种情况，查询查询可能会很有用。

如果是我，我会使用 cffile action="write" 创建我的 csv 文件。我还会用双引号将每个值括起来，以防它们中的任何一个包含逗号。