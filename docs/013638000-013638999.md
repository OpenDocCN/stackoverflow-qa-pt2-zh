# StackOverflow 问答 13638000-13638999

# php - mysql_fetch_array() 并分块输出

> ID：13638000
> 
> 赞同：0
> 
> 时间：2012-11-30T02:09:26.513
> 
> 标签：php, mysql, arrays, fetch

所以我有一个包含 45 条记录的表（但可以是动态的），我使用 mysql_fetch_array() 从数据库中获取数据。一次输出 5 条记录的最佳方法是什么？所以我需要做记录 1-5，然后有记录 6-10、11-15 等的链接。我想过用 array_chunk 做点什么，但不知道如何跟踪记录号。感谢您的提示。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T02:13:41.773

您在查询中需要 LIMIT 0,5。在网上搜索 php 分页器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T02:14:19.677

我建议在您的查询中使用限制和增量偏移量。您的第一个查询将是：

```
select * from TABLE limit 0,5; 
```

您的链接有一个引用下一个偏移量的参数，因此下一个查询将是：

```
select * from TABLE limit 5,5; 
```

等等。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-30T02:25:53.490

要从表格中获取前 5 个结果：

```
table从ORDER BY  中    选择 * table。column_name升速限制 0, 5

```

*   从“表”中选择
*   按列名升序排序
*   限制 0,5 选择前 5 个结果，从 0 开始。

将 LIMIT 0,5 更改为 5,5 以列出结果 6-10（从记录 5 开始，并继续 5 条记录。）

订购只是确保一致性的好习惯。在大多数情况下，如果您有一个自动递增的“id”列，请将其设置为“id”。如果您希望结果按日期排序，请按时间戳列排序。如果要反转数据，请按 DESC 排序。

您可以通过 PHP 会话、传递 GET 参数、临时数据库表以及我可能错过的其他一些方法来跟踪查询的位置。

其他解决方案：

使用从 mysql_fetch_array() 返回的数组并使用[http://php.net/manual/en/language.types.array.php](http://php.net/manual/en/language.types.array.php)

这种方法的明显缺点是它会获取表中的所有行。如果您的行数永远不会超过可管理的数量，这没关系。在您的情况下，假设它们不是巨大的行，45 应该没问题。如果您想要预加载数据，这种方法也可能有用。

# java - Java中的AVL树旋转

> ID：13638005
> 
> 赞同：4
> 
> 时间：2012-11-30T02:09:47.000
> 
> 标签：java, avl-tree

我想实现 Java AVL 树并左右旋转树。我没有得到这个。

任何人都可以通过查看下面的代码告诉我如何左右旋转树，然后使用修复这两个函数来平衡 AVL 树？

我希望这里有人可以指导我完成这个。

```
import java.util.Random;
import java.util.SortedSet;
import java.util.TreeSet;

public class AVLTree<T> extends 
BinarySearchTree<AVLTree.Node<T>, T> implements SSet<T> {

    Random rand;

    public static class Node<T> extends BSTNode<Node<T>,T> {
        int h;  // the height of the node
    }

    public AVLTree() {
        sampleNode = new Node<T>();
        rand = new Random();
        c = new DefaultComparator<T>();
    }

    public int height(Node<T> u) {
        return (u == null) ? 0 : u.h;
    }

    public boolean add(T x) {
        Node<T> u = new Node<T>();
        u.x = x;
        if (super.add(u)) {
            for (Node<T> w = u; w != nil; w = w.parent) {
                // walk back up to the root adjusting heights
                w.h = Math.max(height(w.left), height(w.right)) + 1;
            }
        fixup(u);
        return true;
    }
    return false;
}

public void splice(Node<T> u) {
    Node<T> w = u.parent;
    super.splice(u);
    for (Node<T> z = u; z != nil; z = z.parent)
        z.h = Math.max(height(z.left), height(z.right)) + 1;            
    fixup(w);
}

public void checkHeights(Node<T> u) {
    if (u == nil) return;
    checkHeights(u.left);
    checkHeights(u.right);
    if (height(u) != 1 + Math.max(height(u.left), height(u.right))) 
        throw new RuntimeException("Check heights shows incorrect heights");
    int dif = height(u.left) - height(u.right);
    if (dif < -1 || dif > 1)
        throw new RuntimeException("Check heights found height difference of " + dif);
}

/**
 * TODO: finish writing this method
 * @param u
 */
public void fixup(Node<T> u) {
    while (u != nil) {
        int dif = height(u.left) - height(u.right);
        if (dif > 1) {
            // TODO: add code here to fix AVL condition 
            // on the path from u to the root, if  necessary
        } else if (dif < -1) {
            // TODO: add code here to fix AVL condition
            // on the path from u to the root, if necessary                 
        }
        u = u.parent;
    }
}

public Node rotateLeft() {
    return rotateLeft(u.parent);
}

public void rotateLeft(Node<T> u) {
    // TODO: Recompute height values at u and u.parent
}

public void rotateRight(Node<T> u) {
    // TODO: Recompute height values at u and u.parent
}

public static <T> T find(SortedSet<T> ss, T x) {
    SortedSet<T> ts = ss.tailSet(x);
    if (!ts.isEmpty()) {
        return ts.first(); 
    }
    return null;
}

/**
 * This just does some very basic correctness testing
 * @param args
 */
public static void main(String[] args) {
    AVLTree<Integer> t = new AVLTree<Integer>();
    Random r = new Random(0);
    System.out.print("Running AVL tests...");
    int n = 1000;
    for (int i = 0; i < n; i++) {
        t.add(r.nextInt(2*n));
        t.checkHeights(t.r);
    }
    for (int i = 0; i < n; i++) {
        t.remove(r.nextInt(2*n));
        t.checkHeights(t.r);
    }
    System.out.println("done");

    t.clear();
    System.out.print("Running correctness tests...");
    n = 100000;
    SortedSet<Integer> ss = new TreeSet<Integer>();
    Random rand = new Random();
    for (int i = 0; i < n; i++) {
        Integer x = rand.nextInt(2*n);
        boolean b1 = t.add(x);
        boolean b2 = ss.add(x);
        if (b1 != b2) {
            throw new RuntimeException("Adding " + x + " gives " + b2 
                    + " in SortedSet and " + b1 + " in AVL Tree");
        }
    }
    for (int i = 0; i < n; i++) {
        Integer x = rand.nextInt(2*n);
        Integer x1 = t.find(x);
        Integer x2 = find(ss, x);
        if (x1 != x2) {
            throw new RuntimeException("Searching " + x + " gives " + x2 
                    + " in SortedSet and " + x1 + " in AVL Tree");
        }
        ss.headSet(x);
    }
    for (int i = 0; i < n; i++) {
        Integer x = rand.nextInt(2*n);
        boolean b1 = t.remove(x);
        boolean b2 = ss.remove(x);
        if (b1 != b2) {
            throw new RuntimeException("Error (2): Removing " + x + " gives " + b2 
                    + " in SortedSet and " + b1 + " in AVL Tree");
        }
    }
    for (int i = 0; i < n; i++) {
        Integer x = rand.nextInt(2*n);
        Integer x1 = t.find(x);
        Integer x2 = find(ss, x);
        if (x1 != x2) {
            throw new RuntimeException("Error (3): Searching " + x + " gives " + x2 
                    + " in SortedSet and " + x1 + " in AVL Tree");
        }
        ss.headSet(x);
    }
    System.out.println("done");
 }
} 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-11-10T01:37:14.943

完整的 AVL 树实现：

```
public class AVLTree<T> {

    private AVLNode<T> root;

    private static class AVLNode<T> {

        private T t;
        private int height;
        private AVLNode<T> left;
        private AVLNode<T> right;

        private AVLNode(T t) {
            this.t = t;
            height = 1;
        }
    }

    public void insert(T value) {
        root = insert(root, value);
    }

    private AVLNode<T> insert(AVLNode<T> n, T v) {
        if (n == null) {
            n = new AVLNode<T>(v);
            return n;
        } else {
            int k = ((Comparable) n.t).compareTo(v);
            if (k > 0) {
                n.left = insert(n.left, v);
            } else {
                n.right = insert(n.right, v);
            }
            n.height = Math.max(height(n.left), height(n.right)) + 1;
            int heightDiff = heightDiff(n);
            if (heightDiff < -1) {
                if (heightDiff(n.right) > 0) {
                    n.right = rightRotate(n.right);
                    return leftRotate(n);
                } else {
                    return leftRotate(n);
                }
            } else if (heightDiff > 1) {
                if (heightDiff(n.left) < 0) {
                    n.left = leftRotate(n.left);
                    return rightRotate(n);
                } else {
                    return rightRotate(n);
                }
            } else;

        }
        return n;
    }

    private AVLNode<T> leftRotate(AVLNode<T> n) {
        AVLNode<T> r = n.right;
        n.right = r.left;
        r.left = n;
        n.height = Math.max(height(n.left), height(n.right)) + 1;
        r.height = Math.max(height(r.left), height(r.right)) + 1;
        return r;
    }

    private AVLNode<T> rightRotate(AVLNode<T> n) {
        AVLNode<T> r = n.left;
        n.left = r.right;
        r.right = n;
        n.height = Math.max(height(n.left), height(n.right)) + 1;
        r.height = Math.max(height(r.left), height(r.right)) + 1;
        return r;
    }

    private int heightDiff(AVLNode<T> a) {
        if (a == null) {
            return 0;
        }
        return height(a.left) - height(a.right);
    }

    private int height(AVLNode<T> a) {
        if (a == null) {
            return 0;
        }
        return a.height;
    }

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-10-15T14:37:53.527

> 这是Java中AVL树的完整实现

```
class Node {
    int key;
    Node left;
    Node right;
    int height;

    Node(int value) {
        key = value;
        left = null;
        right = null;
        height = 1;
    }
}

class AVLTree {
    Node root;

    int height(Node root) {
        if (root == null)
            return 0;

        return root.height;
    }

    int findHeight() {
        return height(root);
    }

    int findHeightFrom(int value) {
        Node node = search(root, value);
        if (node == null)
            return -1;

        return node.height;
    }

    Node search(Node root, int value) {
        if (root == null)
            return null;
        else {
            if (value == root.key)
                return root;
            else if (value < root.key)
                return search(root.left, value);
            else
                return search(root.right, value);
        }
    }

    boolean find(int value) {
        Node node = search(root,value);

        if (node == null)
            return false;

        return true;
    }

    int max(int one, int two) {
        return (one > two) ? one : two;
    }

    Node rightRotate(Node root) {
        Node rootLeftChild = root.left;
        root.left = rootLeftChild.right;
        rootLeftChild.right = root;

        root.height = max(height(root.left), height(root.right)) + 1;
        rootLeftChild.height = max(height(rootLeftChild.left), height(rootLeftChild.right)) + 1;

        return rootLeftChild;
    }

    Node leftRotate(Node root) {
        Node rootRightChild = root.right;
        root.right = rootRightChild.left;
        rootRightChild.left = root;

        root.height = max(height(root.left), height(root.right)) + 1;
        rootRightChild.height = max(height(rootRightChild.left), height(rootRightChild.right)) + 1;

        return rootRightChild;
    }

    Node insertNode(Node root, int value) {
        if (root == null)
            root = new Node(value);
        else {
            if (value < root.key)
                root.left = insertNode(root.left, value);
            else
                root.right = insertNode(root.right, value);
        }

        root.height = max(height(root.left), height(root.right)) + 1;

        int balanceFactor = height(root.left) - height(root.right);

        if (balanceFactor > 1) {
            // either left-left case or left-right case
            if (value < root.left.key) {
                // left-left case
                root = rightRotate(root);
            } else {
                // left-right case
                root.left = leftRotate(root.left);
                root = rightRotate(root);
            }
        } else if (balanceFactor < -1) {
            // either right-right case or right-left case
            if (value > root.right.key) {
                // right-right case
                root = leftRotate(root);
            } else {
                // right-left case
                root.right = rightRotate(root.right);
                root = leftRotate(root);
            }
        }

        return root;
    }

    void insert(int value) {
        root = insertNode(root, value);
    }

    void inorder(Node root) {
        if (root != null) {
            inorder(root.left);
            System.out.print(root.key + " ");
            inorder(root.right);
        }
    }

    void inorderTraversal() {
        inorder(root);
        System.out.println();
    }

    void preorder(Node root) {
        if (root != null) {
            System.out.print(root.key + " ");
            preorder(root.left);
            preorder(root.right);
        }
    }

    void preorderTraversal() {
        preorder(root);
        System.out.println();
    }
}

public class AVLTreeExample {
    public static void main(String[] args) {
        AVLTree avl = new AVLTree();
        avl.insert(10);
        avl.insert(20);
        avl.insert(30);
        avl.insert(40);
        avl.insert(50);
        avl.insert(25);

        System.out.print("Inorder Traversal : "); avl.inorderTraversal();
        System.out.print("Preorder Traversal : "); avl.preorderTraversal();
        System.out.println("Searching for 10 : " + avl.find(10));
        System.out.println("Searching for 11 : " + avl.find(11));
        System.out.println("Searching for 20 : " + avl.find(20));
        System.out.println("Height of the tree : " + avl.findHeight());
        System.out.println("Finding height from 10 : " + avl.findHeightFrom(10));
        System.out.println("Finding height from 20 : " + avl.findHeightFrom(20));
        System.out.println("Finding height from 25 : " + avl.findHeightFrom(25));
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-10T01:29:54.493

为了向右旋转，您需要首先检查父级是否不是根，然后如果父级是祖父级的右侧，则将祖父级的右侧设置为子级，否则将祖父级的左侧设置为给孩子

否则，根是孩子

# javascript - 从键盘输入后启用/禁用文本区域

> ID：13638010
> 
> 赞同：4
> 
> 时间：2012-11-30T02:09:54.847
> 
> 标签：javascript, html, dom-events

我有一个默认禁用的文本区域。然后在按下“编辑”时，我会从用户那里得到一些输入。如果有效，我想启用 textarea。这是我现在拥有的代码：

```
<textarea name="comment" cols="5" rows="2" disabled="true"><%= $tmp_com %></textarea>
<a href="javascript:validateUser()">Edit</a>

function validateUser(){
var name=prompt("Please enter the password");

    if (name=="1234")
    {
       document.getElementByName("comment").disabled="false";
    }
} 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-30T02:11:19.333

JavaScript 中没有 getElementByName。最简单的解决方案，添加一个 id，然后使用 getElementById。

```
<textarea name="comment" id="comment" cols="5" rows="2" disabled="true"> 
```

和 JavaScript

```
document.getElementById("comment").disabled="false"; 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-11-30T02:17:10.137

最好使用 id 而不是 name。无论如何，我在这里使用名称来关注问题。

```
<a href="javascript:validateUser()">Edit</a>
<textarea name="comment" cols="5" rows="2" disabled="disabled">aaaaa</textarea>

<script type="text/javascript">
    function validateUser(){
        var name=prompt("Please enter the password");
        if (name=="1234")
        document.getElementsByName("comment")[0].disabled=false;
    }
</script> 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-11-30T02:14:47.653

使用 jQuery

```
$("[name='comment']").attr('disabled', true);
$("[name='comment']").attr('disabled', false); 
```

或按 ID

```
$("#comment").attr('disabled', true); 
```

# algorithm - 数组位置/字符串的（这个特定的）异或散列算法的名称

> ID：13638011
> 
> 赞同：2
> 
> 时间：2012-11-30T02:09:58.783
> 
> 标签：algorithm, hash, xor, lzw

我从这里得到以下 C 代码：

[http://marknelson.us/1989/10/01/lzw-data-compression/](http://marknelson.us/1989/10/01/lzw-data-compression/)

它声明它使用 XOR 散列算法来避免必须搜索子字符串数组元素，而是为子字符串生成一个“地址”。

然后是一个散列函数，在我看来，下面的行是主要部分：

```
index = (hash_character << HASHING_SHIFT) ^ hash_prefix; 
```

*   这里我们有一个整数值，它从左移 4 位（根据常量的定义）。

*   然后这个值得到一个与另一个整数值应用的 XOR。

我很确定移位部分只是为了摆脱未使用的位，然后将一个简单的 XOR 操作应用于一个非常短的子字符串，从 12 位到 16 位；尽管我可能对此非常错误。

**解释此特定 XOR 散列算法的名称或可能的算法名称列表是什么，或者如果可能的话，是适用于此子字符串应用程序的算法名称列表（如 LZW 子字符串字典等）？**

* * *

* * *

* * *

* * *

```
#define BITS 12                   /* Setting the number of bits to 12, 13*/
#define HASHING_SHIFT (BITS-8)    /* or 14 affects several constants.    */
#define MAX_VALUE (1 << BITS) - 1 /* Note that MS-DOS machines need to   */
#define MAX_CODE MAX_VALUE - 1    /* compile their code in large model if*/
                                  /* 14 bits are selected.               */
#if BITS == 14
  #define TABLE_SIZE 18041        /* The string table size needs to be a */
#endif                            /* prime number that is somewhat larger*/
#if BITS == 13                    /* than 2**BITS.                       */
  #define TABLE_SIZE 9029
#endif
#if BITS <= 12
  #define TABLE_SIZE 5021
#endif 
```

……

……

……

```
/*
** This is the hashing routine.  It tries to find a match for the prefix+char
** string in the string table.  If it finds it, the index is returned.  If
** the string is not found, the first available index in the string table is
** returned instead.
*/

int find_match(int hash_prefix,unsigned int hash_character)
{
int index;
int offset;

  index = (hash_character << HASHING_SHIFT) ^ hash_prefix;
  if (index == 0)
    offset = 1;
  else
    offset = TABLE_SIZE - index;
  while (1)
  {
    if (code_value[index] == -1)
      return(index);
    if (prefix_code[index] == hash_prefix &&
        append_character[index] == hash_character)
      return(index);
    index -= offset;
    if (index < 0)
      index += TABLE_SIZE;
  }
} 
```

* * *

* * *

* * *

* * *

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-01T22:10:19.010

Bruno Preiss 的“Data Structures and Algorithms with Object-Oriented Design Patterns in Java”John Wiley & Sons, 2000 中描述了类似的哈希函数

一个不错但有些过时的散列函数调查在[这里](http://www.partow.net/programming/hashfunctions/index.html)。该函数在调查中被命名为“BPhash”。LZW 哈希函数对我来说看起来很简单。现在可能有更好的散列函数可以产生较少的冲突，从而提高散列效率/有效性。

# javascript - JQuery 无法让星级评定表工作

> ID：13638012
> 
> 赞同：0
> 
> 时间：2012-11-30T02:10:01.287
> 
> 标签：javascript, jquery, html

在我将它构建到我的网站之前，我正在做一个测试星级的东西。我知道它已经完成了很多次，并且有很多免费下载。我知道我知道。我正在尝试学习 JQuery，所以我想我会自己尝试。我得到了使用一系列图像的想法，该图像来自此处的广播组 jquery 问题中的隐藏广播组。我不记得是哪一个：（没有星星，你点击带有单词（NO STARS）的图片，这就是它的注册方式。我在 JQuery 上做错了什么？这是进行星级评定的有效方法吗？

所以form.html：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="starrating.js"></script>
<style type="text/css">
.stars {
        visibility:hidden;
       }
 </style>
 <title>star rating</title>
 </head>

 <body>
 <form>
 <div id="starrating">
 <p>Star form example</p>
 <p>
         <label><img src="nostar.jpg" alt="no stars" id="star0" /></img>
            <input type="radio" name="rating" value="0" checked="checked" class="stars" id="rstar0"/>
         </label>
         <label><img src="staroff.jpg" alt="no stars" id="star1" /></img>
            <input type="radio" name="rating" value="1" visible="hidden" class="stars" id="rstar1"/>
         </label>
         <label><img src="staroff.jpg" alt="no stars" id="star2" /></img>
            <input type="radio" name="rating" value="2" visible="hidden"  class="stars" id="rstar2"/>
         </label>
         <label><img src="staroff.jpg" alt="no stars" id="star3" /></img>
            <input type="radio" name="rating" value="3" visible="hidden"  class="stars" id="rstar3"/>
         </label>
         <label><img src="staroff.jpg" alt="no stars" id="star4" /></img>
            <input type="radio" name="rating" value="4" visible="hidden"  class="stars" id="rstar4"/>
         </label>
         <label><img src="staroff.jpg" alt="no stars" id="star5" /></img>
            <input type="radio" name="rating" value="5" visible="hidden"  class="stars" id="rstar5"/>
         </label>
</p>
</div>
</form>
</body>
</html> 
```

星级.js：

```
function changestars()
{
    var num = ['0','1','2','3','4','5'];
    var img = '#star';
    var rst = '#rstar';
    for( var i=1;i<6;i++ )
    {
        var check = rst + num[i];
        var img1 = img + num[i];
        if( "input:radio[id='"+check+"']:checked" )
        {
             for( var j=i; j>0; j-- )
             {
                 var img2 = img + num[j];
                 $(img2).attr("src","staron.jpg");
             }
        }
        else
        {
             $(img1).attr("src","staroff.jpg");
        }
     }
}
document.ready(
    $('img').on('click',
    function()
    {
         var rad = 'r'+$(this).attr('id');
         $(rad).attr('checked','checked');
         changestars();
    })
); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T02:17:11.703

更高效的事件处理：

改变：

```
document.ready(
    $('img').on('click',
    function()
    {
         var rad = 'r'+$(this).attr('id');
         $(rad).attr('checked','checked');
         changestars();
    })
); 
```

至：

```
$(function(){
  $("#starrating").on("click","img",changestars);
}); 
```

并将 changestars 修改为：

```
function changestars()
{
    var num = ['0','1','2','3','4','5'];
    var img = '#star';
    var rst = '#rstar';

    var rad = 'r'+$(this).attr('id');
    $(rad).attr('checked','checked'); 
```

# php - 从存储在另一个类中的实例访问类常量

> ID：13638014
> 
> 赞同：3
> 
> 时间：2012-11-30T02:10:23.847
> 
> 标签：php, oop, class, object, static

我定义了一个类，它有几个通过 `const FIRST = 'something'; 定义的常量；

我已经将该类实例化为`$class = new MyClass()`

然后我有另一个类，它将一个`MyClass`实例作为它的构造函数参数之一并将其存储为`$this->model = $myClassInstance;`

这工作正常。

但我想知道如何从该实例访问常量？

我试过`$this->model::STATE_PROCESSING`了，但我的 IDE 告诉我

> 对静态类成员的访问不正确。

PHP告诉我

> 意外的'::' (T_PAAMAYIM_NEKUDOTAYIM) 在...

我知道我可以做到`MyClass::STATE_PROCESSING`，但我想知道是否有办法根据实例获取它们？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-30T02:26:04.497

好像你在旧版本的 php 上？PHP 5.3 允许以您描述的方式访问常量......但是，如果没有这种固有能力，您可以这样做：

```
class ThisClass
{
    const FIRST = 'hey';

    public function getFIRST()
    {
        return self::FIRST;
    }
}

class ThatClass
{
    private $model;

    public function setModel(ThisClass $model)
    {
        $this->model = $model;
    }

    public function getModel()
    {
        return $this->model;
    }

    public function Hailwood()
    {
        $test = $this->model;
        return $test::FIRST;
    }
}

$ThisObject = new ThisClass();
echo $ThisObject ->getFIRST(); //returns: hey
echo $ThisObject ::FIRST; //returns: hey; PHP >= 5.3

// Edit: Based on OP's comments
$ThatObject= new ThatClass();
$ThatObject->setModel($Class);
echo $ThatObject->getModel()->getFIRST(); //returns: hey
echo $ThatObject->Hailwood(); //returns: hey 
```

基本上，正在创建一个“getter”函数来访问常量。与外部访问私有变量的方式相同。

请参阅 OOP 类常量文档： http: [//php.net/manual/en/language.oop5.constants.php](http://php.net/manual/en/language.oop5.constants.php)

# symfony - 升级到 Symfony 2.1 中断了 WebTestCase 功能测试会话

> ID：13638018
> 
> 赞同：0
> 
> 时间：2012-11-30T02:10:50.380
> 
> 标签：symfony, symfony-2.1

在 2.0 中，下面的代码可以正常工作，因为升级到 2.1 会话变量正在 MIA。

```
public function __construct()
{

    $this->client = static::createClient(array(), array(
        'PHP_AUTH_USER' => 'unittest@test.com',
        'PHP_AUTH_PW'   => 'test',
    ));

    //set the session
    $this->container = $this->client->getContainer();
    $this->client->getCookieJar()->set(new \Symfony\Component\BrowserKit\Cookie(session_name(), true));
    $this->session = $this->container->get('session');
    $this->session->set('company_id', '9999');
    $this->session->save();

}

public function testGetClientsAction()
{

    $this->client->request(
       'GET',
       '/clients',
        array(),
        array(),
        array('HTTP_X-Requested-With' => 'XMLHttpRequest', 'HTTP_accept' => 'application/json')
    );

    $content = $this->client->getResponse()->getContent();
    $status = $this->client->getResponse()->getStatusCode();

    $this->assertNotEmpty($content);
    $this->assertEquals(200, $status);
} 
```

# xml - 在 FreeMarker 模板中访问名称包含句点/点的 XML 元素

> ID：13638020
> 
> 赞同：4
> 
> 时间：2012-11-30T02:11:12.550
> 
> 标签：xml, spring, xml-parsing, freemarker

我有一个 XML 格式：

```
<root>
<x.y>
data
<x.y>
</root> 
```

我需要使用 freemarker(ftl) 模板访问值“数据”。如果我们尝试使用“。”来访问它。符号它应该是：

${root.xy}

但这不起作用。如何才能做到这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-06-20T01:16:57.897

> 不就是这样吗：
> 
> > 根[“xy”]

**参考**

*   [命令式 XML 处理 > 通过示例学习：使用 XPath 表达式](http://freemarker.org/docs/xgui_imperative_learn.html#autoid_72)

# spring - 如何更改 Spring MVC 默认控制器名称及其位置

> ID：13638021
> 
> 赞同：0
> 
> 时间：2012-11-30T02:11:15.683
> 
> 标签：spring, spring-mvc

我是 Java 和 Spring 框架的新手。我正在使用 Spring STS 3.1.0.RELEASE 和 tomcat 7。我使用以下说明创建 Spring MVC 项目。文件 > Spring 模板项目 > Spring MVC 项目。以下是 web.xml 文件代码：

```
 <?xml version="1.0" encoding="UTF-8"?>
<web-app version="2.5" xmlns="http://java.sun.com/xml/ns/javaee"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd">

    <!-- The definition of the Root Spring Container shared by all Servlets and Filters -->
    <context-param>
        <param-name>contextConfigLocation</param-name>
        <param-value>/WEB-INF/spring/root-context.xml</param-value>
    </context-param>

    <!-- Creates the Spring Container shared by all Servlets and Filters -->
    <listener>
        <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
    </listener>

    <!-- Processes application requests -->
    <servlet>
        <servlet-name>appServlet</servlet-name>
        <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
        <init-param>
            <param-name>contextConfigLocation</param-name>
            <param-value>/WEB-INF/spring/appServlet/servlet-context.xml</param-value>
        </init-param>
        <load-on-startup>1</load-on-startup>
    </servlet>

    <servlet-mapping>
        <servlet-name>appServlet</servlet-name>
        <url-pattern>/</url-pattern>
    </servlet-mapping>

</web-app> 
```

以下是 servlet-contxt.xml 文件：

```
 <?xml version="1.0" encoding="UTF-8"?>
<beans:beans xmlns="http://www.springframework.org/schema/mvc"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:beans="http://www.springframework.org/schema/beans"
    xmlns:context="http://www.springframework.org/schema/context"
    xsi:schemaLocation="http://www.springframework.org/schema/mvc http://www.springframework.org/schema/mvc/spring-mvc.xsd
        http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd
        http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context.xsd">

    <!-- DispatcherServlet Context: defines this servlet's request-processing infrastructure -->

    <!-- Enables the Spring MVC @Controller programming model -->
    <annotation-driven />

    <!-- Handles HTTP GET requests for /resources/** by efficiently serving up static resources in the ${webappRoot}/resources directory -->
    <resources mapping="/resources/**" location="/resources/" />

    <!-- Resolves views selected for rendering by @Controllers to .jsp resources in the /WEB-INF/views directory -->
    <beans:bean class="org.springframework.web.servlet.view.InternalResourceViewResolver">
        <beans:property name="prefix" value="/WEB-INF/views/" />
        <beans:property name="suffix" value=".jsp" />
    </beans:bean>

    <context:component-scan base-package="org.dave.foo" />

</beans:beans> 
```

我想更改控制器的默认名称和位置。为此，我创建了新包 org.dave.bar 并将 IndexController 移动到该包中。我还在 servlet-context.xml 文件中进行了如下所述的更改：

```
<context:component-scan base-package="org.dave.bar" /> 
```

但是在重新启动 Web 服务器并在此 url (http://localhost:8080/bar/) 上运行代码后，我收到 404 错误。有人可以指导我我做错了什么以及如何纠正它。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T13:07:55.633

首先在 web.xml 中，您需要定义您希望 Spring MVC Dispatcher Servlet 处理的 URL 映射（通过控制器中的请求映射方法）。根据我对您问题的理解，您将希望将 URL 映射设置如下（在 web.xml 中）

```
 <servlet>  
     <servlet-name>spring</servlet-name>  
       <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>  
        <load-on-startup>1</load-on-startup>  
    </servlet>  
    <servlet-mapping>  
        <servlet-name>spring</servlet-name>  
        <url-pattern>/*</url-pattern>  
   </servlet-mapping> 
```

其次，在 org.dave.foo 下，您需要放置 Spring MVC 控制器（使用 @Controller 注释的类和 URL 映射方法）。在您的控制器中，您将需要一个映射到 spring dispatcher servlet URL 映射的根的方法（在 web.xml DispatcherServlet 中定义）：因此对于上面的定义，您将需要一个这样的方法：

```
@RequestMapping(value = "/")  
 public ModelAndView index(HttpServletRequest request,  
         HttpServletResponse response) {  
        ...
  } 
```

请注意，通常最具体的请求映射“获胜”。这意味着，如果您在控制器中除了“/”请求映射之外还有“/abc”的请求映射，那么，请求 localhost/myapp/abc 将“赢得”localhost/myapp/

您可以在这里查看更详细的示例：http: [//www.commonj.com/blogs/2012/11/30/spring-mvc-default-controller-name/](http://www.commonj.com/blogs/2012/11/30/spring-mvc-default-controller-name/)

希望它有所帮助。

# actionscript-3 - 在停用/激活事件中删除事件侦听器 - AS3

> ID：13638024
> 
> 赞同：1
> 
> 时间：2012-11-30T02:11:20.817
> 
> 标签：actionscript-3, flash, air

我正在为我的移动 Air 应用程序使用来自 Flash Cs6 的代码片段。如何正确删除侦听器？（我收到错误 1120：访问未定义的属性 ocean_slider。）使用以下代码。谢谢你的帮助。

```
/* Deactivate/Activate Event
Conserve CPU and battery life by suspending expensive processes, such as ENTER_FRAME     and TIMER events, when the application is not in focus.

Instructions:
1\. Start timers and add event listeners in "fl_Activate".
2\. Stop timers and remove event listeners in "fl_Deactivate".
*/

stage.addEventListener(Event.ACTIVATE, fl_Activate);
stage.addEventListener(Event.DEACTIVATE, fl_Deactivate);

function fl_Activate(event:Event):void
{
// Start timers and add event listeners here.

naturepage.sliders.ocean_slider.addEventListener(Event.ENTER_FRAME, ocean_slider);

function ocean_slider(e:Event):void
{
    ocean_transform.volume = (naturepage.sliders.ocean_slider.value/100);
    ocean_channel.soundTransform = ocean_transform;

}
}

function fl_Deactivate(event:Event):void
{
// Stop timers and remove event listeners here.
naturepage.sliders.ocean_slider.removeEventListener(Event.ENTER_FRAME, ocean_slider);

} 
```

好的。我只是将代码更改为以下，但仍然有问题。监听器肯定会被添加，因为这些函数在没有 removeEventListener 的情况下发布后在我的应用程序中工作。但是，一旦我添加了删除侦听器的代码，当我尝试发布时就会收到错误 1120。

```
stage.addEventListener(Event.ACTIVATE, fl_Activate);
stage.addEventListener(Event.DEACTIVATE, fl_Deactivate);

function fl_Activate(event:Event):void
{

addEventListener(Event.ENTER_FRAME,myFunction);
function myFunction(event:Event):void
{
ocean_transform.volume = (naturepage.sliders.ocean_slider.value/100);
ocean_channel.soundTransform = ocean_transform;
}
}

function fl_Deactivate(event:Event):void
{
removeEventListener(Event.ENTER_FRAME,myFunction);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T02:44:53.073

看起来您的括号已关闭 - 是您复制和粘贴的代码还是您尝试运行的代码。在您确认括号为何如此之后，我将编辑代码 - 特别是 ocean_slider 函数中的 2 '}'

无论如何，这意味着 ocean_slider 不可用并且尚未添加到舞台中。因此，如果有，您需要检查以确保在一切准备就绪之前您没有调用 fl_Deactivate。而且您还有一个具有相同名称的函数调用和舞台项目 - ocean_slider - 我会更改它，看看它是否有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-01T06:57:29.397

行。我认为它现在正在工作。我把这个功能一直放在外面。感谢您的帮助和回复。

```
function myFunction(event:Event):void
{
ocean_transform.volume = (naturepage.sliders.ocean_slider.value/100);
ocean_channel.soundTransform = ocean_transform;
}

stage.addEventListener(Event.ACTIVATE, fl_Activate);
stage.addEventListener(Event.DEACTIVATE, fl_Deactivate);

function fl_Activate(event:Event):void
{
addEventListener(Event.ENTER_FRAME,myFunction);
}

function fl_Deactivate(event:Event):void
{
removeEventListener(Event.ENTER_FRAME,myFunction);
} 
```

# macos - 无法在 Mac 上的 localhost 上提供使用 Yii 框架创建的页面

> ID：13638027
> 
> 赞同：0
> 
> 时间：2012-11-30T02:11:34.077
> 
> 标签：macos, yii, http-status-code-403

我有一个在 Yii 框架中设计的网站。我不得不把它移到一台新的 Mac 上，因为旧的 Mac 快死了。我把所有东西都移过来了，但我无法从浏览器访问网页，我收到 403 禁止错误。我对文件进行了 CHMOD 处理以查看是否有帮助，但无济于事。我似乎也无法在 Yii 论坛上找到答案。即使文件权限完全开放，似乎也无法访问此站点上的任何文件。我似乎在 htaccess 或 httpd 中找不到任何有帮助的东西。关于我如何告诉 Yii/Apache 可以提供这些页面的任何想法？

编辑：

所以我在 apache2 error_log 文件中看到了这一点：

选项 FollowSymLinks 或 SymLinksIfOwnerMatch 关闭，这意味着禁止 RewriteRule 指令：/Users/me/Sites/website/index.php

诡异的。当我将网站从我的旧电脑上传到网络时，我从来没有得到任何 403，但只有在这台 Mac 上我得到了这个。

# nsdate - 在日期格式化程序之后获取空值

> ID：13638028
> 
> 赞同：0
> 
> 时间：2012-11-30T02:11:35.000
> 
> 标签：nsdate, nsdateformatter

有谁知道为什么我在通过我的日期格式化程序后得到一个空日期值？

```
 //Sets expire date for listing to String
NSString *expireDate = [[_itemDetailArray valueForKey:@"expireDate"]description]; //returns my date correctly

NSString *formattedStringDate = [NSString stringWithFormat:@"%@",[formatter dateFromString:expireDate]]; //comes out null 
```

任何想法为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T05:36:04.130

您的格式化程序的格式错误。试试这个

```
[formatter setDateFormat:@"yyyy-MM-dd hh:mm:ss zzz"]; 
```

# sql - 使用 SQL 获取 rails 参数/值

> ID：13638031
> 
> 赞同：3
> 
> 时间：2012-11-30T02:11:41.460
> 
> 标签：sql, ruby-on-rails

假设我有一个非常简单的表，它只有一个几何列（点），用户可以更新：

```
CREATE TABLE m_point (
id int(11) NOT NULL AUTO_INCREMENT,
point geometry NOT NULL,
deleted_at datetime DEFAULT NULL,
created_at datetime DEFAULT NULL,
updated_at datetime DEFAULT NULL,
PRIMARY KEY (id) ) 
```

我如何使用导轨插入其中，因为几何列需要实际几何？

我原以为这会起作用：

```
loc = MPoint.new
loc.point = "POINT(#{params[:x]},#{params[:y]})"
loc.save! 
```

但我得到了错误：

```
Mysql2::Error: Cannot get geometry object from data you send to the GEOMETRY field: INSERT INTO `m_point` (`point`) VALUES ('POINT(35, 10)') 
```

因为 POINT(X,Y) 被视为轨道作为字符串。如何获得它以便 rails 接受 POINT(#{params[:x]},#{params[:y]}) 作为未引用的命令？

是的，这样做很简单`INSERT`，但我想知道除了安装 gem 之外，是否还有其他方法可以让它与 rails 一起使用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T02:58:23.710

一种方法是在 MPoint 模型中包含点属性的设置器，然后执行手动 SQL 来更新列。

例如。

```
def set_point(x, y)
   connection.execute("UPDATE m_point SET point = POINT(#{x}, #{y}) WHERE ID = #{self.id}")
end 
```

您可以通过在模型的 after_save 回调中调用它来进一步改进它，并在模型中使用虚拟属性以在 set_point 方法中使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T02:59:58.377

我不希望这适用于香草 Rails。如果我没记错的话，GEOMETRY 类型是特定于 MySQL 的，并且仅适用于启用空间扩展。

你可以看看[activerecord-mysql2spatial-adapter](http://github.com/dazuma/activerecord-mysql2spatial-adapter)

# c# - Thread.join 问题

> ID：13638034
> 
> 赞同：0
> 
> 时间：2012-11-30T02:11:49.927
> 
> 标签：c#, multithreading, join

我想知道如何让主线程在我的新线程完成之前等待它的进程，然后再使用它加入主线程`threadname'.join();`

```
BMove.Start(); 
```

`BMove.Join()`: <<---在这里，我希望`BMove`线程在重新加入启动它的主线程之前完成其进程的运行。

我相信我的问题是它太早地将我的新线程加入到主线程中。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-11-30T02:49:27.253

你打算阻塞调用（主）线程吗？

编辑：修改了代码。在 CurrentThread（前台）上调用 join 实际上不起作用。它可以在创建的新线程上调用。

需要更多详细信息才能回答您的问题。

```
var newThread = ...
newThread.Join(); // Will join on calling thread and block execution until newThread is running. 
```

# c# - 我可以在不重新编译的情况下将用户控件动态添加到 Silverlight 应用程序吗？

> ID：13638035
> 
> 赞同：1
> 
> 时间：2012-11-30T02:11:50.100
> 
> 标签：c#, silverlight

我有一个带有几个菜单按钮的 silverlight 应用程序，每个按钮都在中心“工作空间”区域打开一个用户控件。它工作正常。现在我想做的是制作更多的用户控件，将它们编译成一个 dll，然后通过一个配置文件，让 silverlight 应用程序添加一个新的菜单按钮，并使其显示其中一个新控件。困难的部分是，我希望能够在不重新编译 silverlight 应用程序的情况下做到这一点。我希望另一个开发人员能够制作一个执行某些操作的用户控件，将其编译为 dll，然后将其放入 silverlight 目录，并对配置文件进行一些更改，以使主应用程序加载它。是我有办法做到这一点吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T02:44:07.713

因为还没有人回复：

您要做的是在运行时反映类形成第三方 dll。对于 SO 来说，这可能是一个太大的主题，我真正推荐的只是查找它的示例，也许还有[关于它的 msdn 部分](http://msdn.microsoft.com/en-us/library/ms173183%28v=vs.80%29.aspx)。

您还需要在 C# 和 silverlight 中查找序列化和反序列化（[这个问题](https://stackoverflow.com/questions/513215/how-to-serialize-a-derived-class-in-silverlight)可能是一个好的开始）。

抱歉，我无法提供更多帮助，但希望更有经验的人会发表有用的文章或类似的文章。

祝你好运 ：）

# css - 样式表优先顺序

> ID：13638038
> 
> 赞同：28
> 
> 时间：2012-11-30T02:12:09.037
> 
> 标签：css, stylesheet

如果我有以下样式表：

```
user important declarations
user normal declarations
author normal declarations
user agent declarations
author important declarations 
```

并且需要从最高优先级到最低优先级应用它们，我应该按什么顺序使用它们？

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2012-11-30T02:14:38.077

正确的优先顺序是从最不重要到最重要：

1.  用户代理
2.  普通用户
3.  作者 普通
4.  作者 重要
5.  用户重要

如规范中所[定义](https://www.w3.org/TR/CSS22/cascade.html#cascading-order)

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2015-04-22T11:17:08.867

CSS 声明按以下顺序应用（从最低到最高优先级）：

1.  用户代理声明（浏览器应用于元素的默认样式）
2.  用户正常声明（用户自己的样式表，如果他们正在使用）
3.  作者正常声明（这是您的正常样式表）
4.  作者重要的声明（任何你的重要标记）
5.  用户重要声明（用户样式表中的任何重要样式）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-03-07T08:44:36.777

以下内容取自**[这里](https://www.html5rocks.com/en/tutorials/internals/howbrowserswork/#Style_sheet_cascade_order)**。

Style 属性可以出现在任意数量的样式表中，并且在单个样式表中出现多次。因此，应用规则的顺序非常重要。这称为“级联”顺序。根据 CSS2 规范，级联顺序是（从低到高）：

1.  浏览器声明
2.  用户正常声明
3.  作者正常声明
4.  作者重要声明
5.  用户重要声明

a) 浏览器声明最不重要；
b) 仅当声明被标记为重要时，用户才覆盖作者。
c) 具有相同顺序的声明将按**[特异性](https://www.html5rocks.com/en/tutorials/internals/howbrowserswork/#Specificity)**排序，然后是它们指定的顺序。
d) HTML 视觉属性被翻译成匹配的 CSS 声明。
e) 它们被视为低优先级的作者规则。

# spring - Spring RequestMapping 使用 PathVariable 导致 404

> ID：13638042
> 
> 赞同：3
> 
> 时间：2012-11-30T02:12:28.773
> 
> 标签：spring, http

我有一个弹簧应用程序，但我无法解决问题。当我使用 a`PathVariable`时， my`RequestMapping`中的值被添加到 URI 中并且`DispatchHandler`变得混乱。

例如，当我请求`/Dashboard/project/1131/`

我明白了`HTTP Status 404 - /Dashboard/project/1131/WEB-INF/jsp/projectDetail.jsp`

project/1131 出于某种原因被添加到路径中

当我请求`/Dashboard/projects`Spring 找到我的 .jsp 并呈现它时。/`project/{projectId}`不起作用 - 我得到了上述行为。

这是我的控制器

```
@Controller
public class ProjectController {

protected final Log logger = LogFactory.getLog(getClass());

@RequestMapping(value = "projects", method=RequestMethod.GET)
public String projects() {
    return "/projects";
}

@RequestMapping(value="/project/{projectId}", method=RequestMethod.GET)
public String project(@PathVariable("projectId") String projectId, ModelMap map) {
    map.put("projectId", projectId);
    logger.info("Project Id: " + projectId);
    return "/projectDetail";
}

} 
```

我的配置

web.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xmlns="http://java.sun.com/xml/ns/javaee"
    xmlns:web="http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd"
xsi:schemaLocation="http://java.sun.com/xml/ns/javaee 
    http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd"
version="3.0">

<!-- Webapp name -->
<display-name>Dashboard</display-name>

<!-- default file name -->
<welcome-file-list>
    <welcome-file>home</welcome-file>
</welcome-file-list>

<!-- spring listener (all spring jars need to be in WEB-INF/lib -->
<listener>
    <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
</listener>

<!-- set servlet to DispatcherService -->
<servlet>
    <servlet-name>dashboard</servlet-name>
    <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
    <load-on-startup>1</load-on-startup>
</servlet>

<!-- hand all requests to dispatcher service -->
<servlet-mapping>
    <servlet-name>dashboard</servlet-name>
    <url-pattern>/</url-pattern>
</servlet-mapping>

</web-app> 
```

应用配置

```
@Configuration
public class AppConfig {

@Bean
ViewResolver viewResolver() {
    InternalResourceViewResolver resolver = new InternalResourceViewResolver();
    resolver.setPrefix("WEB-INF/jsp/");
    resolver.setSuffix(".jsp");
    return resolver;
}

} 
```

仪表板-servlet.xml...

```
<?xml version="1.0" encoding="UTF-8"?>

<beans xmlns="http://www.springframework.org/schema/beans"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xmlns:mvc="http://www.springframework.org/schema/mvc" 
xmlns:context="http://www.springframework.org/schema/context"
xsi:schemaLocation="http://www.springframework.org/schema/beans
http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
http://www.springframework.org/schema/mvc
http://www.springframework.org/schema/mvc/spring-mvc-3.0.xsd
http://www.springframework.org/schema/context
http://www.springframework.org/schema/context/spring-context-3.0.xsd">

<!-- the packages to scan for annotations -->
<context:component-scan base-package="com.dennisstevens.dashboard.controller" />
<context:component-scan base-package="com.dennisstevens.dashboard" />
<context:component-scan base-package="com.dennisstevens.dashboard.domain" />

<!-- Tell Spring that MVC components are @Annotation Driven -->
<mvc:annotation-driven />

<!-- Tell Spring Dispatch Handler to look in WebContent/resources/ for resources -->
<mvc:resources mapping="/resources/**" location="/resources/" />

<!-- Tell Spring to scan for config annotations -->
<context:annotation-config/>

<!--  TODO: Figure out how to load this in AppConfig -->
<bean id="messageSource"
    class="org.springframework.context.support.ResourceBundleMessageSource">
    <property name="basename" value="messages" />
</bean>

</beans> 
```

这必须很简单——但我已经查看了文档并在互联网上搜索了几个小时。从我所看到的看来，我所做的一切都是正确的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-30T02:21:17.287

我认为有一个前导斜线`resolver.setPrefix("/WEB-INF/jsp/");`应该为你解决它。

# css - Twitter bootstrap：在表单字段之间添加边距、位置图片和空格

> ID：13638046
> 
> 赞同：0
> 
> 时间：2012-11-30T02:13:00.147
> 
> 标签：css, forms, twitter-bootstrap, margin

直奔主题，我是 CSS 的初学者。我发现 twitter bootstrap 看起来很有前途且易于使用……好吧，并非如此。

请看一下[这个](http://xacumigo.herokuapp.com)。

我需要：

1）将徽标（带有X）放在现在位于其下方的正方形内

2）从顶部添加一些边距。现在，浏览器 url 栏和徽标/字段之间几乎没有空间

3）在输入字段水平时在输入字段之间添加一些空格，例如。字段：“Seu Número de Celular：”、“Boleto Bancario”和“Conta de Consumo”。现在，它们几乎是粘在一起的。

我也很感激关于 CSS 教程的任何好的建议。如果这很重要，我正在使用 django。

谢谢你的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T02:28:31.450

[W3C Schools](http://www.w3schools.com/css/)是从 CSS 入手的好地方。

1) 了解`position:relative`或使用`background`并放置盒子作为`background-url`

```
.your-square-image /*You will need to put class="your-square-image" to the squarebox*/
{
position: relative;
top: -120px;
z-index: -1;
} 
```

2）只需使用`margin-top`从顶部调整边距

```
.logo {
margin-top: 50px;
} 
```

3）`margin-right`用于所有输入（或将其放入适当的位置`class`）

```
input 
{
margin-right: 15px;
} 
```

上面所有的 css 都可以放在你的 html 页面的顶部，或者放在单独的 css 文件中并从你的页面链接它（推荐）。

# codeigniter - 如何在codeigniter 2中传递变量

> ID：13638048
> 
> 赞同：0
> 
> 时间：2012-11-30T02:13:29.213
> 
> 标签：codeigniter, codeigniter-2

我有以下

```
<?php if ( ! defined('BASEPATH')) exit('No direct script access allowed');
class Hello extends CI_Controller {
  var $name = 'test';
  function index() {
    $this->name = 'Andy';
    $data['name'] = $this->name;
    $this->load->view('you_view', $data);  // THIS WORKS
  }

  function you() {
    $data['name'] = $this->name;
    $this->load->view('you_view', $data);  // BUT THIS DOESN'T WORK
  }
} 
```

我的问题是如何通过`$this->name = 'Andy';`to `you()`??

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T01:29:56.150

如果它的值是类的一部分，您可以将它放在构造函数中

```
 class Hello extends CI_Controller {

public function __construct() {
    parent::__construct();

    // will be available to any method in the class
    $this->name = 'andy';

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T02:24:45.203

由于它是在控制器的不同方法中设置的，这相当于代码中的另一个请求，因此您需要将其存储在会话变量中以使其在页面请求中保持不变。

```
function index() {
    $this->name = 'Andy';
    $data['name'] = $this->name;
    $this->session->set_userdata('name', $this->name);
    $this->load->view('you_view', $data);  // THIS WORKS
  }

  function you() {
    $data['name'] = $this->session->userdata('name');
    $this->load->view('you_view', $data);  // BUT THIS DOESN'T WORK
  } 
```

# asp.net-mvc-3 - 使用 C# 构建带有折扣的定价工具

> ID：13638050
> 
> 赞同：1
> 
> 时间：2012-11-30T02:13:35.997
> 
> 标签：asp.net-mvc-3, c#-4.0

好吧，也许我只是没有使用正确的搜索词，但我似乎无法在任何地方在线找到任何东西。

本质上，我正在尝试为工作构建定价工具。此定价工具需要能够考虑折扣代码和捆绑定价。

我需要以一种可以有一个管理部分的方式构建它，我可以在其中输入折扣代码和该折扣代码的值以及该折扣代码用于哪些产品。

我不希望有人告诉我如何做到这一点我是一个大男孩，可以阅读和研究它，但我刚开始就有一个问题。如果有人知道网上有什么像样的文章如何为这类事情做一些基本的设计，请指导我。从那里我可以弄清楚其余的。

哦，顺便说一句，我打算使用 C# ASP.NET MVC 3

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T05:47:54.547

我会看看一些流行的电子商务网站（我想到了 nopcommerce）。他们都有管理部分，任何体面的电子商务网站都将支持每种产品的优惠券和折扣。您甚至可以借用一些（开源）代码......

# python - 从文件中获取数字，并找到行数变化的平均值？

> ID：13638061
> 
> 赞同：2
> 
> 时间：2012-11-30T02:14:08.620
> 
> 标签：python, loops, file-io, python-3.x, readfile

我正在尝试制作一个程序，该程序从文件中获取数字列表（可能会改变行数和大小），然后打印出所有数字的总和和平均值。当我有一定数量的 linereads 时，我这样做没有问题，但是当 lineread 每次运行都会改变时，我对“正确”的方式感到困惑。

这是我正在进行的代码。我阅读了一下并找到了正确的（？）循环文件以查找长度的方法，但不确定如何实现它，因为它当前会引发某种类型的 IO 错误。谢谢您的帮助！

```
def main():
    filename = input("Enter file name (name.txt):")
    try:
        file = open(filename, "r")
    except IOError:
        print("Error opening file!")

    totalLines = totalLineGet(filename)

    results = []
    for x in range(totalLines):
            results.append(getLineNumber(x+1, file))

    print("Total = ", numTotal)
    print("Average = ", numAvg)

def totalLineGet(_filename):
    count = 0
    _file = open(_filename, "r")
    for x in open(_file):
        count+= 1
    return count

def getLineNumber(linetoget, _file):
    try:
        intNumber = int(number = _file.readline())
    except ValueError:
        print("Error in file data!")

    return intNumber

main() 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T02:21:05.670

我不确定你想做什么......但你应该能够一口气得到答案。[`enumerate()`](http://docs.python.org/3/library/functions.html#enumerate)如果您需要知道项目/行号计数，您可以使用对可迭代对象（在本例中为文件）进行编号。

假设每行有一个 int()：

```
with open(filename, "r") as in_f:
    numbers = []
    for line in in_f: 
        line = line.strip() # remove whitespace
        if line: # make sure there is something there
            number_on_line = int(line) 
            numbers.append(number_on_line)
    sum_of_numbers = sum(numbers)
    avg_of_numbers = sum(numbers)/len(numbers) 
```

如果这是您应该使用该[`csv`](http://docs.python.org/3/library/csv.html)模块查看的 CSV 数据，它会为您将行/列拆分为行/列。

```
import csv
filename = "somefile"
with open(filename, "rb") as in_f: # <-- notice "rb" is used
    reader = csv.reader(in_f)
    for row in reader:
        for col in row:
            # do stuff
            ... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-30T02:27:30.373

一个简单的解决方案，做你想做的......

```
filename = 'tmp.txt'
f = open(filename)
s, totnum = 0, 0
for line_number, line in enumerate(f):
    nums = map(int, line.split())
    s += sum(nums)
    totnum += len(nums)

print "numbers:", totnum, "average:", 1.0*s/totnum 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-30T02:45:48.387

这假设您的文件每行只有数字而不是字符，否则您将得到一个`TypeError`.

```
list_of_numbers = []

with open('somefile.txt') as f:
   for line in f:
      if line.strip(): # this skips blank lines
          list_of_numbers.append(int(line.strip()))

print 'Total ',len(list_of_numbers)
print 'Average ',1.0*sum(list_of_numbers)/len(list_of_numbers) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-30T02:48:13.297

关于如何做你想做的事，有一些很好的答案。至于 IO 错误，内置的 input() 尝试评估用户的输入，这既危险又不是您想要的。

尝试使用 raw_input() 内置。这会将用户的输入作为字符串返回。为了好玩，尝试运行您的脚本并将其`__name__`作为文件名，看看会发生什么。

# node.js - 在 Node.js 中，由 fs.createFileStream 生成的 Stream 在另一个流被读取到末尾后是不可读的

> ID：13638064
> 
> 赞同：2
> 
> 时间：2012-11-30T02:14:26.300
> 
> 标签：node.js, stream, zipstream

我正在使用[node-zipstream](https://github.com/wellawaretech/node-zipstream/)在 node.js 中创建 ZIP 文件。在将流添加到 ZIP 时，我创建了一个简单的包装器来创建同步 API 的错觉（包含在下面的代码中）。

使用[请求](https://github.com/mikeal/request)流时，一切都按预期工作，但是当我使用文件流时，第二个流在第一个流完成后变得不可读。

```
var zipstream = require('zipstream');
var fs = require('fs');

function ZipQueue(out, options) {
    var zip = zipstream.createZip(options);
    zip.pipe(out);

    var queue = new Array();

    this.addFile = function(readStream, options) {
        queue.push({stream: readStream, options: options});
    }
    this.runQueue = function(cb) {
        for(var element in queue) {
            queue[element].stream.on('error', function(err) {
                console.dir(err);
            })
        }
        function run() {
            i++;
            if (queue.length > i) {
                console.log("Queue:");
                console.dir(queue);
                console.log("\n");
                zip.addFile(queue[i].stream, queue[i].options, run);
            }
            else {
                zip.finalize(cb);
            }
        }
        var i = -1;
        run();
    }
}

var out = fs.createWriteStream('out.zip');

var q = new ZipQueue(out, { level: 1 });
q.addFile(fs.createReadStream("1.txt"), { name: 'files/1.txt' });
q.addFile(fs.createReadStream("2.txt"), { name: 'files/2.txt' });
q.runQueue(function(written) { console.log(written + ' total bytes written'); }); 
```

控制台输出：

```
>node zip.js
Queue:
[ { stream:
     { path: '1.txt',
       fd: null,
       readable: true,
       paused: false,
       flags: 'r',
       mode: 438,
       bufferSize: 65536,
       _events: [Object] },
    options: { name: 'files/1.txt' } },
  { stream:
     { path: '2.txt',
       fd: null,
       readable: true,
       paused: false,
       flags: 'r',
       mode: 438,
       bufferSize: 65536,
       _events: [Object] },
    options: { name: 'files/2.txt' } } ]

Queue:
[ { stream:
     { path: '1.txt',
       fd: 4,
       readable: false,
       paused: false,
       flags: 'r',
       mode: 438,
       bufferSize: 65536,
       _events: [Object],
       reading: false },
    options:
     { name: 'files/1.txt',
       version: 20,
       bitflag: 8,
       method: 8,
       moddate: 1098783117,
       offset: 0,
       crc32: -137262718,
       compressed: 7,
       uncompressed: 5 } },
  { stream:
     { path: '2.txt',
       fd: 5,
       readable: false,
       paused: false,
       flags: 'r',
       mode: 438,
       bufferSize: 65536,
       _events: [Object],
       reading: false },
    options: { name: 'files/2.txt' } } ] 
```

# c++ - AVL 插入和平衡回路

> ID：13638065
> 
> 赞同：2
> 
> 时间：2012-11-30T02:14:36.070
> 
> 标签：c++, algorithm, avl-tree

我在自己的代码上用 C++ 实现 AVL 树，但这个问题更多的是关于**理解**AVL 树而不是代码本身。如果它不适合这里，我很抱歉，但我已经通过互联网爬行，但我仍然没有找到解决我的问题的方法。

我的代码在相对较小的输入（~25-30 位）下按预期工作，所以我想它应该可以工作更多。我正在使用一个数组，在其中保存我在插入期间访问过的节点，然后使用 while 循环我在需要时提高每个节点的高度，我知道当我找到一个*高度相等的节点时，**这个过程必须结束*（他们的减法结果是0就是）。

 *问题是在平衡方面。虽然我可以找到每个节点的*平衡因子*并正确平衡树，**但我不确定是否应该在平衡后停止调整高度并结束插入循环**或继续执行直到条件成立，我只是想不通现在出来了。我知道在删除节点和重新平衡树期间，我应该继续检查，但我不确定插入和平衡。

任何人都可以对此提供任何见解，也许还有一些文档？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T09:07:48.213

如果一次只插入一个项目：在插入使其失去平衡后，只需要一次（单次或双次）旋转来重新调整 AVL 树。[http://cis.stvincent.edu/html/tutorials/swd/avltrees/avltrees.html](http://cis.stvincent.edu/html/tutorials/swd/avltrees/avltrees.html)知道结论后大概可以自己证明。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T16:07:55.043

仅供未来读者参考，如果您像我的示例一样实现了二叉树，则无需编辑平衡节点上方的节点高度**：**

```
 10
        (1)/ \(2)
         8   16
          (1)/ \(0)
            11 

(Numbers in parenthesis are the height of each sub tree) 
```

假设在上面的树上我们插入一个节点，`data=15`然后生成的子树如下：

```
 10
        (1)/ \(2)
         8   16
          (1)/ \(0)
            11
        (0)/  \(1)
              15 
```

请注意尚未编辑子树的先前高度。成功插入后，我们通过插入路径返回，在本例中为`(11, 16, 10)`. 通过这条路径返回后，我们在需要时编辑高度。这意味着**16 的子树的左侧高度将为 2**，而**子树的右侧高度为 0**，导致 AVL 树不平衡。用双旋转平衡树后，子树为：

```
 15
         (1)/  \(1)
           11  16 
```

因此子树的高度最大为 1，就像以前一样，因此该子树根上方的高度没有改变，`return`现在必须改变高度的函数。*

# php - CURL 没有抓取。这个功能的alternet是什么？

> ID：13638069
> 
> 赞同：0
> 
> 时间：2012-11-30T02:15:07.740
> 
> 标签：php, curl

我想制作一个脚本来显示网站的反向 ip。为此，我将使用第 3 方网站。所以我的脚本是：

```
<?php
$ip='http://viewdns.info/reverseip/?host=barnesandnoble.com';
$useragent='Mozilla/5.0 (BlackBerry; U; BlackBerry 9700; pt) AppleWebKit/534.8+ (KHTML, like Gecko) Version/6.0.0.546 Mobile Safari/534.8+';
$ch = curl_init();
curl_setopt($ch, CURLOPT_URL, $ip);
curl_setopt($ch, CURLOPT_FOLLOWLOCATION, 0);
curl_setopt($ch,CURLOPT_RETURNTRANSFER,1);
curl_setopt($ch, CURLOPT_HEADER, 0);
curl_setopt($ch, CURLOPT_USERAGENT, $useragent);
$file = curl_exec($ch);
echo ($file); //this is for testing that files are getting or not
?> 
```

但这并没有返回任何东西。我的代码错误吗？还是 CURL 无法获取此类网页？

# mysql - 在 MYSQL 中获取每次拍卖的最高出价

> ID：13638072
> 
> 赞同：0
> 
> 时间：2012-11-30T02:15:19.220
> 
> 标签：mysql

> **可能重复：**
> [组在组中获得最大行数？](https://stackoverflow.com/questions/10876910/group-getting-maximum-row-in-group)

所以我有一个包含出价的表 具有auction_id 和bid_price 和bidder_id 我需要获得一个包含每次拍卖的最高出价的结果集。有没有办法让我获得每个auction_id 的最大值？谢谢

编辑

SELECT MAX(bid_price)、auction_id、bidder_username 来自bids GROUP BYuction_id；

这就是我现在正在做的事情，但它没有返回正确的bidder_username。

MAX(bid_price) 拍卖 ID

71.32 10 个客户 99.00 11 个客户

但在数据库中，出价 71.32 的 1 不是那个用户

拍卖 ID bidder_user_name bid_time bid_price

10 测试 1991-11-26 12:12:12 71.32

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T04:37:08.180

根据您的查询：

```
SELECT MAX(bid_price), auction_id,bidder_username From bids GROUP BY auction_id; 
```

您只是按auction_id 分组，因此您将获得`MAX`所有记录中的bid_price。

您要做的是按拍卖*和*用户分组，例如：

```
SELECT auction_id, bidder_username, MAX(bid_price) as max_price
from bids
GROUP BY auction_id, bidder_username; 
```

我认为如果 GROUP BY 项目在 SELECT 中清楚地显示并且功能在最后，那么查询也会变得更加清晰，但这可能只是个人喜好。

# assembly - 在哪里放置 MARS 的 .txt 文件

> ID：13638073
> 
> 赞同：1
> 
> 时间：2012-11-30T02:15:41.263
> 
> 标签：assembly, input, io, mips, mips32

我正在使用 MARS 程序编写一些 MIPS 汇编代码，而我正在编写的程序需要接收一个输入文件，然后对其进行迭代以更改一些数字。我已经编写了所有代码主体，但我不确定如何实际接收文件。我有以下代码读取输入并存储地址：

```
.data 0x0
magicNum:       .asciiz "P2"  #magic number
zero:   .word 0
newLine:        .asciiz "\n"  #new line character

.text 0x3000

main:
        ori $v0, $0, 8          #8 is syscall to read string
        ori $a0, $0, 100        #stores address of input buffer
        ori $a1, $0, 3          #max character to read in
        syscall

#the rest of the code is down here 
```

但是我实际上应该将文件放在 Windows 上的哪个位置以获取它呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T13:23:12.900

您必须使用 syscall 13 打开文件，然后使用 syscall 14 从中读取并将其内容存储到缓冲区中。

这是一个让您入门的片段，只需用您的代码填补空白：

```
.data
filename: .asciiz "file.txt"
buffer: .space 1024

.text

    la $a0, filename
    li $a1, 0       # readonly
    li $a2, 0
    li $v0, 13
    syscall         # open file
    bltz $v0, file_error
    move $a0, $v0    
    la $a1, buffer
    li $a2, 1024
read_file:
    li $v0, 14
    syscall
    beqz $v0, read_done
    bltz $v0, read_error
    addu $a1, $a1, $v0   # adjust buffer pointer
    subu $a2, $a2, $v0
    bnez $a2, read_file   # If buffer not full and not EOF, continue reading
read_done:
   # File copied to buffer
   # Your code goes here

file_error:
   # Code to take action if file errors occur (e.g. file not found)

read_error: 
   # Code to take action if read errors occur 
```

如果您使用 MARS，则该文件应位于当前目录（您启动 MARS 的位置）中。

# asp.net - 如何在运行时更改 web.config 设置的 customError 配置？

> ID：13638074
> 
> 赞同：1
> 
> 时间：2012-11-30T02:15:44.433
> 
> 标签：asp.net, web-config, custom-error-pages, custom-error-handling

我目前在我的 web.config 中有一个 customError 节点，如下所示：

```
<customErrors mode="On" redirectMode="ResponseRewrite" defaultRedirect="~/error.aspx">
    <error statusCode="404" redirect="~/themes/generic/common/error-notfound.aspx"/>
</customErrors> 
```

在运行时，我希望能够更改应用程序行为，就像将属性 redirectMode 设置为 ResponseRedirect 而不是 ResponseRewrite 一样。我必须能够在不更改 web.config 文件的情况下执行此操作。这可能吗，如果可以，怎么办？预先感谢您的任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T18:37:19.013

我找到了答案。在 IHttpModule 中，附加错误 HttpApplicationEvent 的事件处理程序。此事件处理程序应仅在 web.config 的 customErrors 部分设置为 ResponseRewrite 时触发。事件处理程序在 customError 配置之前执行。

```
public class ErrorHandlingHttpModule : IHttpModule
{
    public void Init(HttpApplication context)
    {
        // Read web.config
        var configuration = WebConfigurationManager.OpenWebConfiguration("~");
        var systemWebSection = configuration.GetSectionGroup("system.web") as SystemWebSectionGroup;

        if (systemWebSection == null || 
            systemWebSection.CustomErrors == null || 
            systemWebSection.CustomErrors.Mode == CustomErrorsMode.Off ||
            systemWebSection.CustomErrors.RedirectMode != CustomErrorsRedirectMode.ResponseRewrite)
        {
            return;
        }

        var customErrorsSection = systemWebSection.CustomErrors;
        context.Error +=
            (sender, e) =>
            {
                if (customErrorsSection.Mode == CustomErrorsMode.RemoteOnly && context.Request.IsLocal)
                {
                    return;
                }

                var app = (HttpApplication)sender;
                var httpException = app.Context.Error as HttpException;

                // Redirect to a specific url for a matching status code
                if (httpException != null)
                {
                    var error = customErrorsSection.Errors.Get(httpException.GetHttpCode().ToString("D"));
                    if (error != null)
                    {
                        context.Response.Redirect(error.Redirect);
                        return;
                    }
                }

                // Redirect to the default redirect
                context.Response.Redirect(customErrorsSection.DefaultRedirect);
            };
    }

    public void Dispose()
    {
    }
} 
```

# php - 具有多个名称的网站网址？(myblog.tumblr.com/myweb.webs.com)

> ID：13638079
> 
> 赞同：-1
> 
> 时间：2012-11-30T02:16:13.733
> 
> 标签：php, mysql, web

tumblr 如何为每个用户创建新的 url？那不是要花很多钱吗？如果没有，怎么可能？会用 php、html 或其他方式完成吗？它会通过服务器完成吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-30T02:20:09.007

子域是免费的。

但是，这些站点通常使用通配符 VHost，接受对`[literally anything goes here].domain.com`. 然后，它使用`Host`标头来确定请求了哪个子域（以及谁的数据）。

# android - 我的安卓插件在哪里？

> ID：13638090
> 
> 赞同：1
> 
> 时间：2012-11-30T02:18:03.930
> 
> 标签：android, eclipse, eclipse-plugin

我在我的 Eclipse Indigo（Ubuntu 12.04 LTS）中更新 API 17（Android 4.2）的 android 插件，所以当我重新启动 Eclipse 时，插件已经消失，我无法打开我的最后一个项目！我尝试再次安装插件，但它说我已经安装了。我该如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T02:21:41.487

这个问题我只见过一次。我找不到任何方法来修复它，并选择了卸载和重新安装的路径。

**要卸载：** 关于 Eclipse -> 安装详细信息 -> 选择所有以 Android 开头的 -> 卸载 ...

这很痛苦，但至少它可以让你重新安装插件。

# java - 将 OS X 10.8 通知中心 (NSUserNotification) 与 Java 一起使用

> ID：13638092
> 
> 赞同：5
> 
> 时间：2012-11-30T02:18:10.033
> 
> 标签：java, macos, jna, nsusernotification

我在 OS X 10.8 中的通知中心苦苦挣扎。我编写了一个包装器来通过 JNA 提供对 NSUserNotification 和 NSUserNotificationCenter 类的 Java 访问，但是功能是有限的。我可以发送通知，只要 .jar 通过 JavaApplicationStub 从 .app 包运行，它就会显示。但是，当通知样式设置为“警报”时，以下行始终会记录到控制台：

```
11/29/12 8:37:12.537 PM usernoted[162]: Failed to validate application at (null) -67061 
```

接下来，单击通知会导致以下内容被记录到控制台：

```
11/29/12 8:38:15.291 PM usernoted[162]: Cannot find originating application to launch for event action.  file://localhost/Users/geoffodonnell/Projects/bin/GuiTest.app/ is not the same app as the one that sent the original notification. 
```

我确实为 NSUserNotificationCenter 类提供了一个委托，但是这些方法只有在 .jar 在包之外执行时才会运行。自然，这违背了目的，因为通知将永远不会显示。

谁能提供对上述两个错误的任何见解？

我想知道 JavaApplicationStub 是否妨碍了我，但是当谈到典型应用程序将如何响应通知中心事件时，我一无所知。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-09T16:32:07.680

通过更新到位于此处的 JDK 7u10（开发者预览版）解决了这个问题，

[http://jdk7.java.net/download.html](http://jdk7.java.net/download.html)

并使用此处描述的 appbundle 工具，

[http://docs.oracle.com/javase/7/docs/technotes/guides/jweb/packagingAppsForMac.html](http://docs.oracle.com/javase/7/docs/technotes/guides/jweb/packagingAppsForMac.html)

创建您的应用程序包。该工具使用不同的可执行存根文件创建应用程序包，因此可能是 JavaApplicationStub（和/或 JRE 1.6）是罪魁祸首。

# php - 安装 php_svn windows & linux

> ID：13638097
> 
> 赞同：2
> 
> 时间：2012-11-30T02:19:08.473
> 
> 标签：php, windows, svn, pecl

我正在使用 Windows 机器进行本地开发，我想安装 php_svn，以便我可以在 php 中编写一些代码，为 Web 应用程序提供 svn 接口，以便客户端可以轻松下载所有文件。php4win 站点已关闭，我在任何地方都找不到 php_svn.dll 并且运行 pecl.bat install svn donae 也可以。“找不到 DSP svn.dsp” 如果有人知道如何在 Windows 上安装这个 php 扩展，我将不胜感激，并且 /pierre 站点似乎不包含其中的 php_svn 扩展。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-02-10T15:46:42.593

只需根据您的请求进行一些快速搜索，我也找不到它。看起来您要么必须自己为 Windows 编译库，要么尝试 Björn 在[此答案](https://stackoverflow.com/a/5636228/3257871)中提到的方法。

> 阿林，谢谢你的努力。我最终直接从 php 使用 svn 命令行客户端。像这样 $Res = svn --non-interactive ls -R -v "file:///C:/Proj/Svn/..." 然后解析结果字符串。

# python - 使用扭曲的重复函数调用

> ID：13638100
> 
> 赞同：3
> 
> 时间：2012-11-30T02:19:16.760
> 
> 标签：python, twisted

我有一个基本的 IRC 机器人，看起来像这样（见下文），我想做的是使用类似于`_5_mins`每 5 分钟调用一次的函数`LoopingCall`

```
import sys
import re
from twisted.internet import reactor, task, defer, protocol
from twisted.python import log
from twisted.words.protocols import irc
from twisted.application import internet, service
import time

HOST, PORT = 'irc.freenode.net', 6667

class IrcProtocol(irc.IRCClient):
    nickname = 'BOTSNAME'
    password = 'NICKPASSWORD'
    timeout = 600.0

    def signedOn(self):
        pMess = "IDENTIFY %s" % self.password
        self.msg("NickServ",pMess)
        time.sleep(10)
        for channel in self.factory.channels:
            self.join(channel)

    def _5_mins(self):
        self.msg(self.factory.channels[0],"5 minutes have elapsed")

class IrcFactory(protocol.ReconnectingClientFactory):
    channels = ['#BOTCHANNEL']
    protocol = IrcProtocol

if __name__ == '__main__':
    reactor.connectTCP(HOST, PORT, IrcFactory())
    log.startLogging(sys.stdout)
    reactor.run()

elif __name__ == '__builtin__':
    application = service.Application('IrcBot')
    ircService = internet.TCPClient(HOST, PORT, IrcFactory())
    ircService.setServiceParent(application) 
```

如何更改`signedOn`功能与`task.LoopingCall`功能的配合，还是有更好的方法？

编辑：我真的很接近解决方案，以下是我所采用的

```
def signedOn(self):
    pMess = "IDENTIFY %s" % self.password
    self.msg("NickServ",pMess)
    time.sleep(10)
    for channel in self.factory.channels:
        self.join(channel)
    lc = task.LoopingCall(self._5_mins)
    lc.start(self.timeout) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T15:28:20.440

```
def signedOn(self):
    pMess = "IDENTIFY %s" % self.password
    self.msg("NickServ",pMess)
    time.sleep(10)
    for channel in self.factory.channels:
        self.join(channel)
    lc = task.LoopingCall(self._5_mins)
    lc.start(self.timeout) 
```

# c# - 即使对于 Ajax，也可以完全加载 DOM

> ID：13638101
> 
> 赞同：1
> 
> 时间：2012-11-30T02:19:21.000
> 
> 标签：c#, dom

是否有任何库能够执行 javascript 并加载所有 ajax 页面并构造 DOM 并在 C# 中将完全构造的 DOM 返回给我？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T02:49:40.503

您最好的选择是`WebBrowser`在您的应用程序中托管一个实例，这样 IE Javascript 引擎就可以了，并且 DOM 通过`.Document`属性公开。您也可以绑定到 DOM 事件。

`WebBrowser`可用于 WinForms 和 WPF/Silverlight 应用程序，但是如果您想以无头方式执行任何操作，您可能会遇到问题。这是在服务器应用程序还是桌面应用程序中？

# list - Haskell 初学者：柯里化/列表关联性

> ID：13638103
> 
> 赞同：0
> 
> 时间：2012-11-30T02:19:29.853
> 
> 标签：list, haskell, currying, associativity

来自Learn You a Haskell：

> 想想这个列表：`[5]`。这只是`5:[]`. 在 的左侧`:`，有一个值；在右侧，有一个列表。在这种情况下，它是一个空列表。现在名单怎么样`[4,5]`？好吧，这对`4:(5:[])`. 查看第一个 :，我们看到它的左侧还有一个元素，右侧还有一个列表 , `(5:[])`。 **类似的列表也是如此`3:(4:(5:6:[]))`，它可以写成这样或类似`3:4:5:6:[]`（因为`:`是右关联的）或`[3,4,5,6]`.**

对于粗体部分，我期待不断增长的列表最终以`3:(4:(5:(6:[])))`. 这与我对柯里化、关联性或两者缺乏理解有关。有人能告诉我我的想法的缺陷吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-30T02:21:53.900

乘法是关联的。这意味着`(x * y) * z`与 相同`x * (y * z)`。但是，`:`不是关联的。

然而，术语“左结合”和“右结合”是不同的，并且与术语“结合”无关。

*   如果`*`是左结合，则`x * y * z`与 相同`(x * y) * z`。括号是多余的。

*   如果`*`是右结合，则`x * y * z`与 相同`x * (y * z)`。括号是多余的。

柯里化与此无关。

由于`:`是右结合的，`[3,4,5,6]`可以写成：

```
3:(4:(5:(6:[])))
3:4:(5:(6:[]))
3:(4:5:(6:[]))
3:4:5:(6:[])
3:(4:(5:6:[]))
3:4:(5:6:[])
3:(4:5:6:[])
3:4:5:6:[] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-30T02:32:52.340

这只是一个错字。示例中应该有一个括号（但由于关联性，它是没有括号的相同行为）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-30T02:38:04.963

1.  你说“我期待不断增长的名单最终达到高潮`3:(4:(5:(6:[])))`”。

    确实你是对的。如果你想消除所有的语法糖`[3,4,5,6]`，你会得到`3:(4:(5:(6:[])))`

2.  正如您在问题的评论中所说的“这本书说`3:(4:(5:6:[]))`”，您对此感到困惑。

    再说一次，你是对的。为了保持演示的统一，不应该这样做；这可能是一个错字。

就 Haskell 语法和语义而言，写作 `3:(4:(5:6:[]))`而不是`3:(4:(5:(6:[])))`. 这归结为是否`5:6:[]`相同的问题`5:(6:[])`。根据右结合性的定义，它是。因为`:`是右联想`x:y:z`= `x:(y:z)`。

只是在这里添加一个令人讨厌的注释：通过利用`:`' 的右关联性（即不使用括号），可以`3:(4:(5:(6:[])))`非常简洁地编写：`3:4:5:6:[]`. 这仅比其语法糖长的单个字符`[3,4,5,6]`。

另请参阅：[http](http://en.wikipedia.org/wiki/Operator_associativity) ://en.wikipedia.org/wiki/Operator_associativity以获取有关关联性的更多信息。

# ios - CLGeocoder 在 iOS 5.1 和 6.0 模拟器上返回不同的地标

> ID：13638105
> 
> 赞同：2
> 
> 时间：2012-11-30T02:20:16.957
> 
> 标签：ios, ios-simulator, geocoding, core-location, clgeocoder

我正在使用`CLGeocoder`方法`geocodeAddressString:completionHandler:`来获取地标。

用像*Avinguda de Madrid 100*这样的字符串测试它，我得到：

*   6.0 模拟器中有 3 个结果
*   5.1 模拟器中有 1 个结果

这在 iPhone 和 iPad 模拟器上都会发生。

我认为我的代码是错误的，但 Apple 的[Geocoder Demo 项目](http://developer.apple.com/library/ios/#samplecode/GeocoderDemo/Introduction/Intro.html)也有这个问题，正如您在下面的两个屏幕截图中看到的那样（注意两个屏幕截图中的点指向的结果）：

![在此处输入图像描述](../Images/3e17d199448b4f54c1e6f4c8e99a954e.png) ![在此处输入图像描述](../Images/af3ef52d4b836db354487e1637883f4e.png)

如果你想在 Apple 的示例代码上重现它，

*   选择*转发*选项卡（默认打开）。
*   在文本字段中输入*Avinguda de Madrid 100 。*
*   点击*Geocode String*按钮（不启用*Include Hint Region*）。

你以前有过这个问题吗？我错过了什么吗？还是应该转移到 Google Places API？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T14:41:38.197

iOS 6 SDK 同时支持 iOS5 和 iOS6。MapKit 在 iOS5 上与 Googles API 一起工作，在 iOS6 上与他们自己的 Apple API 一起工作。（依赖于系统版本，而不是 SDK 版本。）

我猜，`CLGeocoder`iOS 6 SDK 在 5.1 模拟器中使用 Google API，在 6.0 模拟器中使用 Apple API。因此，我会期待不同的结果。

如果`CLGeocoder`在这两种情况下都使用 Apple 服务，我仍然预计会因上述变化而有所不同。

# linux - 绘制折线图的其他选项

> ID：13638106
> 
> 赞同：1
> 
> 时间：2012-11-30T02:20:24.907
> 
> 标签：linux

是否有任何工具/库允许我通过命令行绘制折线图并将结果保存到图像中？

像这样的东西让我使用自己的数据来生成折线图？但是这个是基于网络的。 [https://google-developers.appspot.com/chart/interactive/docs/gallery/linechart](https://google-developers.appspot.com/chart/interactive/docs/gallery/linechart)

我正在寻找一些可以通过命令行运行的东西，以便它可以编写脚本。

我在 Ubuntu/cygwin 上运行。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T03:41:52.723

There is also rrdtool.

[http://aplawrence.com/Girish/gv-rrdtool.html](http://aplawrence.com/Girish/gv-rrdtool.html)

This site contains some examples of how to interface with rrdtool from shell. This is what mrtg and ganglia have used for years to generate traffic flow graphing.

I prefer gnuplot myself. But, rrdtool is a powerful tool for time series charting.

# java - 气氛：通过单个 HttpConnection 进行多个订阅

> ID：13638108
> 
> 赞同：6
> 
> 时间：2012-11-30T02:20:35.743
> 
> 标签：java, atmosphere

我在我的 Spring MVC 应用程序中使用 Atmosphere 来促进推送，使用`streaming`传输。

在我的应用程序的整个生命周期中，客户端将订阅和取消订阅许多不同的主题。

Atmosphere 似乎对每个订阅使用一个 http 连接 - 即，每次调用`$.atmosphere.subscribe(request)`都会创建一个新连接。这很快耗尽了允许从浏览器到大气服务器的连接数。

我不想每次都创建新资源，而是希望能够在`AtmosphereResource`初始创建后向广播公司添加和删除。

但是，由于`AtmosphereResource`是入站请求的一对一表示，每次客户端向服务器发送请求时，它都会到达一个新的`AtomsphereResource`，这意味着我无法引用原始资源，并将其附加到话题的`Broadcaster`。

我已经尝试使用两者`$.atmosphere.subscribe(request)`并调用`atmosphereResource.push(request)`从原始`subscribe()`调用返回的资源。然而，这并没有什么不同。

解决这个问题的正确方法是什么？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-13T19:55:21.183

这是我如何让它工作的：

首先，当客户端进行初始连接时，请确保在调用之前浏览器接受特定于大气的标头`suspend()`：

```
@RequestMapping("/subscribe")
public ResponseEntity<HttpStatus> connect(AtmosphereResource resource)
{
    resource.getResponse().setHeader("Access-Control-Expose-Headers", ATMOSPHERE_TRACKING_ID + "," + X_CACHE_DATE);
    resource.suspend();
} 
```

然后，当客户端发送额外的订阅请求时，尽管它们来自不同的`resource`，但它们包含`ATMOPSHERE_TRACKING_ID`原始资源的 。这允许您通过以下方式查找它`resourceFactory`：

```
@RequestMapping(value="/subscribe", method=RequestMethod.POST)
public ResponseEntity<HttpStatus> addSubscription(AtmosphereResource resource, @RequestParam("topic") String topic)
{
    String atmosphereId = resource.getResponse().getHeader(ATMOSPHERE_TRACKING_ID);
    if (atmosphereId == null || atmosphereId.isEmpty())
    {
        log.error("Cannot add subscription, as the atmosphere tracking ID was not found");
        return new ResponseEntity<HttpStatus>(HttpStatus.BAD_REQUEST);
    }
    AtmosphereResource originalResource = resourceFactory.find(atmosphereId);
    if (originalResource == null)
    {
        log.error("The provided Atmosphere tracking ID is not associated to a known resource");
        return new ResponseEntity<HttpStatus>(HttpStatus.BAD_REQUEST);
    }

    Broadcaster broadcaster = broadcasterFactory.lookup(topic, true);
    broadcaster.addAtmosphereResource(originalResource);
    log.info("Added subscription to {} for atmosphere resource {}",topic, atmosphereId);

    return getOkResponse();
} 
```

# mysql - 如何创建 capistrano 任务以下载最新的 database_backup.tgz 并在本地导入？

> ID：13638112
> 
> 赞同：3
> 
> 时间：2012-11-30T02:20:51.880
> 
> 标签：mysql, ruby-on-rails, capistrano, sysadmin

`heroku db:pull`如果您熟悉它，我正在尝试使用类似于功能的 Capistrano 任务来做一些事情。

我有一个远程服务器。`/path/db_backups/`在该服务器上，我在文件夹中有一堆备份。在那个文件夹中每天都有数据库的备份。

我想做的就是

1.  在客户端机器上下载最新的备份。
2.  解压它。
3.  将其导入本地 mysql 数据库。

有人知道处理这个问题的好方法吗？有没有我不知道的宝石？有手头的脚本吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-05T10:47:45.893

我不确定是否有宝石。我通常在 capistrano (config/deploy.rb) 上复制/粘贴此任务，以从服务器中提取压缩数据库并将其存储在我的开发环境中

```
namespace :utils do
  desc 'pull the DB from the server'
  task :pull_db, :roles => :db, :only => { :primary => true } do

    website = "http://www.my_website.com"
    filename = "#{application}.dump.#{Time.now.to_f}.sql"
    filename_bz2 = "#{filename}.bz2"
    remote_file = "#{current_path}/public/#{filename_bz2}"

    text = capture "cat #{deploy_to}/current/config/database.yml"
    yaml = YAML::load(text)

    on_rollback { run "rm #{remote_file}" }
    run "mysqldump -h#{yaml[rails_env]['host']} -u #{yaml[rails_env]['username']} -p #{yaml[rails_env]['database']} | bzip2 -c > #{remote_file}" do |ch, stream, out|
      ch.send_data "#{yaml[rails_env]['password']}\n" if out =~ /^Enter password:/
    end

    local_text = run_locally("cat config/database.yml")
    local_yaml = YAML::load(local_text)

    run_locally("wget #{website}/#{filename_bz2}")
    run_locally("bzip2 -d #{filename_bz2}")

    run_locally("bundle exec rake db:drop")
    run_locally("bundle exec rake db:create")

    if local_yaml['development']['password'] && !local_yaml['development']['password'].blank?
      run_locally("mysql -h#{local_yaml['development']['host']} -u#{local_yaml['development']['username']} -p#{local_yaml['development']['password']} #{local_yaml['development']['database']} < #{filename}")
    else
      run_locally("mysql -h#{local_yaml['development']['host']} -u#{local_yaml['development']['username']} #{local_yaml['development']['database']} < #{filename}")
    end

    run_locally("rm #{filename}")
    run "rm #{remote_file}"
  end
end 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-03T08:57:39.180

以下脚本应该实现这一点：

```
# Find out which file to copy and save its name in a local text file:
# ssh allows you to specify a command that should be executed on the remote
# machine instead of opening a terminal session on it. I use this to get
# a sorted (ls -t sorts by modification date) list of all backups. I then
# truncate this list to one entry using head -1 and save the file name in a
# local file (filename.txt).
# (12.34.56.78 is a placeholder for the ip/hostname of your server)
ssh 12.34.56.78 ls -t /path/to/backups/ | head -1 > filename.txt

# Copy the backup specified in filename.txt to the tmp dir on your local machine.
scp 12.34.56.78:/path/to/backups/`cat filename.txt` /tmp/db_backup.sql.tar

# Untar the backup archive.
cd /tmp && tar -xf db_backup.sql.tar

# Import into database of choice.
mysql -u your_username -p database_to_import_to < /tmp/db_backup.sql 
```

（这假设您在 UNIX 系统上并且安装了 scp 和 tar...）

# javascript - Jquery 插件可使用 PHP 中的值进行编辑

> ID：13638119
> 
> 赞同：1
> 
> 时间：2012-11-30T02:21:36.123
> 
> 标签：javascript, jquery, jquery-plugins

我正在使用 jquery 可编辑插件[http://www.appelsiini.net/projects/jeditable](http://www.appelsiini.net/projects/jeditable)。

我需要从数据库中填充我的下拉选择。

所以我有这样的事情：

```
$(".edit_company").editable("banner-save.php", { 
indicator : '<img src="img/indicator.gif">',
data   : "{ 'Package 1' : 'Package 1', 'Package 2' : 'Package 2'  }",
type   : "select",
submit : "OK",
event     : "dblclick",
submitdata : function() {
  return {type : 'package'};
} 
```

});

那里的“数据”，我需要从一个数组中填充它，比如

```
$query=mysql_query("select * from company"); 
while ($query as $comp) { 
  // how 
} 
```

如何将我从查询中获得的值传递到 js 中的“数据”中？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T02:30:01.937

将您的查询行累积到 PHP 关联数组中，然后`json_encode()`将其累积到 jQuery 插件中。

```
$data = array();
// Assuming you had a column called `name` in your query...
while ($row = mysql_fetch_assoc($query)) {
  $data[$row['name']] = $row['name'];
} 
```

这会产生一个类似于以下内容的数组。从您的查询中提供正确的列名以获得`key : value`您需要的对。

```
Array
(
    [Name 1] => Name 1
    [Name 2] => Name 2
    [Name 3] => Name 3
) 
```

..产生JSON：

```
{"Name 1":"Name 1","Name 2":"Name 2","Name 3":"Name 3"} 
```

通过 . 将其传递到 jQuery 插件中`json_encode()`。

```
$(".edit_company").editable("banner-save.php", { 
  indicator : '<img src="img/indicator.gif">',
  // json_encode() will supply the correct format.
  data   : '<?php echo json_encode($data); ?>',
  type   : "select",
  ...
}); 
```

奇怪的是 JSON 作为字符串而不是普通对象传递到 JavaScript 中，但这与[插件文档中的](http://www.appelsiini.net/projects/jeditable)示例一致。

根据文档，如果您希望默认选择特定选项，您可以在 PHP 数组中设置它，例如：

```
// Start with Name 3 selected
$data['selected'] = 'Name 3'; 
```

# arrays - MongoDB 嵌入式 vs 数组子文档性能

> ID：13638122
> 
> 赞同：18
> 
> 时间：2012-11-30T02:22:04.043
> 
> 标签：arrays, mongodb, nosql

鉴于以下具有多达 100,000 位朋友的竞争模式，我有兴趣找到最适合我需求的模式。

Doc1（user_id 上的索引）

```
{
"_id" : "…",
"user_id" : "1",
friends : {
    "2" : {
        "id" : "2",
        "mutuals" : 3
    }
     "3" : {
         "id" : "3",
         "mutuals": "1"
    }
   "4" : {
         "id" : "4",
         "mutuals": "5"
    }
}
} 
```

Doc2（user_id 和friends.id 上的复合多键索引）

```
{
"_id" : "…",
"user_id" : "1",
friends : [
   {
        "id" : "2",
        "mutuals" : 3
    },
    {
         "id" : "3",
         "mutuals": "1"
    },
   {
         "id" : "4",
         "mutuals": "5"
    }
]} 
```

我似乎找不到任何有关子字段检索效率的信息。我知道 mongo 在内部将数据实现为 BSON，所以我想知道这是否意味着投影查找是二进制 O(log n)？

具体来说，给定一个 user_id 来查找是否存在具有friend_id 的朋友，每个模式上的两个不同查询将如何比较？（假设上述索引）请注意，返回什么并不重要，如果朋友存在，则返回 not null 。

```
Doc1col.find({user_id : "…"}, {"friends.friend_id"})
Doc2col.find({user_id : "…", "friends.id" : "friend_id"}, {"_id":1}) 
```

同样有趣的是 $set 修饰符是如何工作的。对于模式 1，给定查询`Doc1col.update({user_id : "…"}, {"$set" : {"friends.friend_id.mutuals" : 5})`，friends.friend_id 上的查找如何工作？这是一个 O(log n) 操作（其中 n 是朋友的数量）吗？

对于模式 2，查询`Doc2col.update({user_id : "…", "friends.id" : "friend_id"}, {"$set": {"friends.$.mutuals" : 5})`与上述查询相比如何？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-12-01T03:02:34.963

如果一个人的主要要求是在一个易于管理的包中向 ui 呈现数据，则 doc1 更可取。使用投影仅过滤所需数据很简单`{}, {friends.2 : 1}`

doc2 是您最强的匹配项，因为您的用例不关心结果*请注意，返回的内容并不重要*，索引将加快获取速度。

最重要的是 doc2 允许更简洁的语法

```
db.doc2.findOne({user_id: 1, friends.id : 2} ) 
```

相对

```
db.doc1.findOne({ $and : [{ user_id: 1 }, { "friends.2" : {$exists: true} }] }) 
```

然而，最后一点，可以在 doc1 上创建一个[稀疏索引](http://docs.mongodb.org/manual/core/index-sparse/)（并使用 $exists），但是您可能有 100,000 个朋友——每个朋友都需要一个稀疏索引——这很荒谬。与合理数量的条目相反，说人口统计性别 [男性，女性]，年龄组 [0-10,11-16,25-30,..] 或更多暗示的东西 [杜松子酒，威士忌，伏特加，...]

# string - 为什么在 R 中“优先于”

> ID：13638123
> 
> 赞同：18
> 
> 时间：2012-11-30T02:22:14.353
> 
> 标签：string, r

来自`help("'")`：

> 单引号和双引号分隔字符常量。它们可以互换使用，但首选双引号（字符常量使用双引号打印），因此单引号通常仅用于分隔包含双引号的字符常量。

如果它们可以互换，为什么首选双引号？在我自己的用法中，我还没有发现它们之间的区别。特别令人惊讶的是允许混合字符向量：

```
> c("a",'b',"c")
[1] "a" "b" "c" 
```

**编辑**

我真的在这里问两个问题，我猜：

1.  是否有任何情况`'`和`"`行为不同？
2.  如果不是，为什么`"`按惯例被选为首选版本？

到目前为止，答案都与 (2) 有关，但 (1) 至少同样令人感兴趣。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-30T02:44:45.453

我不知道单引号与双引号不同的任何情况。我认为首选是由于可读性和避免单引号与反引号的潜在混淆，这些反引号*的*处理方式不同。湿件中的眼脑系统可能很难识别与单引号配对的不匹配的反引号。

```
> `newfn` <- function() {}
> newfn
function() {}
> "newfn" <- function() {}
> newfn
function() {}
> 'newfn' <- function() {}
> newfn
function() {}
> var <- c(`a`, "b", 'c')
Error: object 'a' not found
> var <- c( "b", 'c')
> var
[1] "b" "c"
> a <- 1
> identical(`a`, a)
[1] TRUE 
```

因此，对于名称的分配，它们（s-quotes、d-quotes 和 back-ticks）在 LHS 的分配 from 上都是相同的处理方式，但未引用和反`function`引号在命令行上是相同的，并且是不同于引用的“a”或“a”。`a``a`

另一种可能存在差异的情况是数据输入。人名可能有单引号，您可能希望查看`read.table`函数对两种不同类型引号的处理。默认情况下，它使用两种类型的引号，但可能需要通过设置“关闭”单引号的引用操作，`quote="\""`以免将大块数据错误地转换为单个文本字段。该`count.fields`函数具有与 read.table 相同的默认值，因此使用它进行初步运行以检查由不匹配的单引号引起的缩短的行是有意义的：

```
 table( count.fields('filnam.ext') ) 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-11-30T02:26:19.380

我的猜测是“单引号”更频繁地作为撇号出现，因此更喜欢双引号将减少用撇号搞砸事情的机会。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-30T12:14:34.783

关于第一个问题，*在任何情况下 ' 和 " 的行为是否不同？*，我认为重要的是要注意，因为

```
identical("a", 'a')
TRUE 
```

R 用户（包括包开发人员）无法区分两者，因此无法为其中一个或另一个创建不同的行为。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-30T05:18:49.940

为了避免那些习惯于使用 C 系列语言（C、C++、Java）编程的人感到困惑，因为单引号和双引号的含义有所不同。AC 程序员将“a”读取为单个字符，将“a”读取为由字母“a”组成的字符串，后跟一个空字符以终止字符串。在 R 中没有字符数据类型，只有字符串。为了与其他语言保持一致，如果字符串用双引号分隔会很有帮助。R 中的单引号版本是为了方便。在大多数键盘上，您不需要使用 shift 键来输入单引号，但您确实需要 shift 来输入双引号。

# sql - SQL Server 2008 索引多列 一些不一直使用

> ID：13638125
> 
> 赞同：1
> 
> 时间：2012-11-30T02:22:33.433
> 
> 标签：sql, sql-server, performance, sql-server-2008, indexing

我有一个有列的表

```
ParameterValueId, SiteId, LocationId, ParameterId, SampleDateTime 
```

和其他一些专栏。

`ParameterValueId`是主键。

我想创建一个不是唯一的索引来加快对`SiteId, LocationId, ParameterId, SampleDateTime`.

*   我所有的查询都将使用`SiteId`
*   我 75% 的查询将使用`SiteId`和`LocationId`
*   我 50% 的查询将使用`SiteId`, `LocationId`, 和`ParameterId`
*   我 25% 的查询将使用`SiteId`, `LocationId`, `ParamterId`, 和一个过滤器`>=/<= SampleDateTime`

我可以只创建一个索引`SiteId, LocationId, ParameterId, SampleDateTime`吗？

还是我需要创建 4 个索引？

我想我的问题是如果我在 4 列上创建索引，如果我只使用这些列中的 1、2 或 3 列而不是全部 4 列，它是否会被使用并仍然提高性能？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-30T02:45:39.990

作为一般经验法则，鉴于您所描述的场景，所有四列上的一个索引可能是一个很好的起点。但是，根据数据的性质和形式（例如，SiteID 的差异程度如何？它是否唯一？单个值是否占数据的 20% 以上），您可能需要做其他事情来提高性能那个柱子？）。

简短回答：将使用一个覆盖索引，即使查询中并未使用所有覆盖的列。

# c# - GTK# ProgressBar 在进程完成之前不会更新（我已经尝试过 Application.Invoke()）

> ID：13638129
> 
> 赞同：2
> 
> 时间：2012-11-30T02:23:25.460
> 
> 标签：c#, mono, gtk#

我是 GTK# 的新手（以及一般的桌面开发）。我在 MonoDevelop 中设置了一个小应用程序，只有一个进度条和一个按钮来测试它。问题是在我的假进程完成之前它不会更新。我看到其他帖子说 Application.Invoke() 根据此链接[Mono Best Practices](http://www.mono-project.com/Best_Practices)是必需的。但是我仍然无法让这件事起作用，这可能是我理解的一个根本缺陷。这是我的代码：

```
using System;
using Gtk;
using System.Diagnostics;
using System.Threading;

public partial class MainWindow: Gtk.Window
{   
    public MainWindow (): base (Gtk.WindowType.Toplevel)
    {
        Build ();
    }

    protected void OnDeleteEvent (object sender, DeleteEventArgs a)
    {
        Application.Quit ();
        a.RetVal = true;
    }

    protected void OnOkClicked (object sender, EventArgs e)
    {
        for (int i = 0; i < 100; i++){
            Thread.Sleep(1000);
            Application.Invoke (delegate {
                progressbar1.Fraction = i / 100.0;
            });
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T14:44:06.877

可能发生的情况是处理进度条视觉更新的事件（信号）的优先级较低，因此尽管发送了它们，但进度条视觉显示不会更新，而只会在关键部分结束时更新在代码中。

您也可以通过强制处理信号来绕过它。例如：

```
progressbar1.GdkWindow.ProcessUpdates (true); // Request visual update
while(Application.EventsPending()) Application.RunIteration(true); // Process any messages waiting in the Application Message Loop 
```

希望有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T07:25:28.917

我在[Mono Responsive Applications](http://www.mono-project.com/Responsive_Applications)找到了一个关于 Application.Invoke 的示例，它帮助我弄清楚我需要做什么。这是我的代码的更新版本：

```
using System;
using Gtk;
using System.Threading;

public partial class MainWindow: Gtk.Window
{   
    public MainWindow (): base (Gtk.WindowType.Toplevel)
    {
        Build ();
    }

    protected void OnDeleteEvent (object sender, DeleteEventArgs a)
    {
        Application.Quit ();
        a.RetVal = true;
    }

    protected void OnOkClicked (object sender, EventArgs e)
    {
        Thread thr = new Thread (new ThreadStart (ThreadRoutine));
        thr.Start ();
    }

    void ThreadRoutine ()
    {
        for (int i = 0; i < 100; i++)
        {
            LargeComputation ();
            Application.Invoke (delegate {
                progressbar1.Fraction = i / 100.0;
            });
        }
    }

    void LargeComputation ()
    {
        // lots of processing here
        Thread.Sleep(1000);
    }
} 
```

# facelets - iceFaces - facelets URL 栏地址未显示

> ID：13638136
> 
> 赞同：0
> 
> 时间：2012-11-30T02:24:38.303
> 
> 标签：facelets, icefaces-1.8

我的公司有*Spring-Ifaces* 1.8 标准，可以与 IBM WAS 6.1 解决方案一起使用。在阅读了 icefaces 教程后，我决定实施一个 facelets 解决方案来进行更好的模板管理。

在 faces-config.xml 中，我将下一行用于配置 facelets：

```
 <view-handler>com.icesoft.faces.facelets.D2DFaceletViewHandler</view-handler> 
```

web.xml 配置为在上下文中搜索 index.jsp 作为主页：

```
<welcome-file-list>
    <welcome-file>index.jsp</welcome-file>
</welcome-file-list> 
```

索引转发到我的导航逻辑的第一页。

```
 <body>
    <jsp:forward page="paso1.iface" /> 
  </body> 
```

但在浏览器 URL 栏地址上，我仍然看到*http://server.com/context*路径。

当表单数据已经写入时，我提交，运行我的操作，导航规则将我发送到下一页。

但同样，在浏览器的网址栏地址上，仍然是*http://server.com/context*路径。

```
<navigation-rule>
    <from-view-id>/step1.jspx</from-view-id>
    <navigation-case>
        <from-action>#{actionBean.action}</from-action>
        <from-outcome>success</from-outcome>
        <to-view-id>/step2.jspx</to-view-id>
    </navigation-case>
    <navigation-case>
        <from-action>#{actionBean.action}</from-action>
        <from-outcome>fail</from-outcome>
        <to-view-id>/step1.jspx</to-view-id>
    </navigation-case>
</navigation-rule> 
```

我不能使用重定向，因为有一些会话数据。甚至我尝试使用标准的 Java EE Facelets 标记*com.sun.facelets.FaceletViewHandler*，但无法呈现页面。

如何强制或正确配置 IceFaces Facelet 以向我显示我已经踩到的网页？

--- web.xml ---

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app
    id="WebApp_ID"
    version="2.4"
    xmlns="http://java.sun.com/xml/ns/j2ee"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://java.sun.com/xml/ns/j2ee http://java.sun.com/xml/ns/j2ee/web-app_2_4.xsd">
    <display-name>venta-directa-web</display-name>
    <welcome-file-list>
        <welcome-file>index.jsp</welcome-file>
    </welcome-file-list>
    <servlet>
        <servlet-name>Faces Servlet</servlet-name>
        <servlet-class>javax.faces.webapp.FacesServlet</servlet-class>
        <load-on-startup>1</load-on-startup>
    </servlet>
    <servlet>
        <servlet-name>Blocking Servlet</servlet-name>
        <servlet-class>com.icesoft.faces.webapp.xmlhttp.BlockingServlet</servlet-class>
        <load-on-startup>1</load-on-startup>
    </servlet>
    <servlet>
        <servlet-name>Persistent Faces Servlet</servlet-name>
        <servlet-class>com.icesoft.faces.webapp.xmlhttp.PersistentFacesServlet</servlet-class>
        <load-on-startup>1</load-on-startup>
    </servlet>
    <servlet>
        <servlet-name>uploadServlet</servlet-name>
        <servlet-class>com.icesoft.faces.component.inputfile.FileUploadServlet</servlet-class>
        <load-on-startup>1</load-on-startup>
    </servlet>
    <servlet>
        <servlet-name>SimpleCaptcha</servlet-name>
        <servlet-class>nl.captcha.servlet.SimpleCaptchaServlet</servlet-class>
    </servlet>
    <servlet>
        <servlet-name>StickyCaptcha</servlet-name>
        <servlet-class>nl.captcha.servlet.StickyCaptchaServlet</servlet-class>
        <init-param>
            <param-name>width</param-name>
            <param-value>250</param-value>
        </init-param>
        <init-param>
            <param-name>height</param-name>
            <param-value>75</param-value>
        </init-param>
    </servlet>
    <servlet>
        <servlet-name>ChineseCaptcha</servlet-name>
        <servlet-class>nl.captcha.servlet.ChineseCaptchaServlet</servlet-class>
        <init-param>
            <param-name>width</param-name>
            <param-value>265</param-value>
        </init-param>
        <init-param>
            <param-name>height</param-name>
            <param-value>50</param-value>
        </init-param>
    </servlet>
    <context-param>
        <param-name>com.icesoft.faces.actionURLSuffix</param-name>
        <param-value>.iface</param-value>
    </context-param>
    <context-param>
        <param-name>com.icesoft.faces.debugDOMUpdate</param-name>
        <param-value>false</param-value>
    </context-param>
    <context-param>
        <param-name>com.icesoft.faces.delegateNonIface</param-name>
        <param-value>true</param-value>
    </context-param>
    <context-param>
        <param-name>com.icesoft.faces.concurrentDOMViews</param-name>
        <param-value>true</param-value>
    </context-param>
    <context-param>
        <param-name>com.icesoft.faces.synchronousUpdate</param-name>
        <param-value>false</param-value>
    </context-param>
    <context-param>
        <param-name>com.icesoft.faces.heartbeatRetries</param-name>
        <param-value>10</param-value>
    </context-param>
    <context-param>
        <param-name>com.icesoft.faces.standardRequestScope</param-name>
        <param-value>false</param-value>
    </context-param>
    <context-param>
        <param-name>com.icesoft.faces.component.OutputTextTag</param-name>
        <param-value>false</param-value>
    </context-param>
    <context-param>
        <param-name>com.icesoft.faces.uploadDirectory</param-name>
        <param-value>upload</param-value>
    </context-param>
    <context-param>
        <description>La cantidad en bytes de un archivo a subir por icefaces.</description>
        <param-name>com.icesoft.faces.uploadMaxFileSize</param-name>
        <param-value>4048576</param-value>
    </context-param>
    <context-param>
        <param-name>com.sun.faces.enableRestoreView11Compatibility</param-name>
        <param-value>true</param-value>
    </context-param>
    <context-param>
        <param-name>facelets.DEVELOPMENT</param-name>
        <param-value>true</param-value>
    </context-param>
    <context-param>
        <param-name>javax.faces.CONFIG_FILES</param-name>
        <param-value>/WEB-INF/faces-config.xml</param-value>
    </context-param>
    <context-param>
        <param-name>javax.faces.DEFAULT_SUFFIX</param-name>
        <param-value>.jspx</param-value>
    </context-param>
    <context-param>
        <param-name>javax.faces.STATE_SAVING_METHOD</param-name>
        <param-value>server</param-value>
    </context-param>
    <context-param>
        <param-name>contextConfigLocation</param-name>
        <param-value>
            classpath:app-web-context.xml
            classpath:app-core-context.xml
            classpath:app-ws-context.xml
            classpath:app-dao-context.xml
        </param-value>
    </context-param>
    <context-param>
        <param-name>log4jConfigLocation</param-name>
        <param-value>classpath:log4j.properties</param-value>
    </context-param>
    <listener>
        <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
    </listener>
    <servlet-mapping>
        <servlet-name>Faces Servlet</servlet-name>
        <url-pattern>/mainservlet/*</url-pattern>
    </servlet-mapping>
    <servlet-mapping>
        <servlet-name>Blocking Servlet</servlet-name>
        <url-pattern>/block/*</url-pattern>
    </servlet-mapping>
    <servlet-mapping>
        <servlet-name>Persistent Faces Servlet</servlet-name>
        <url-pattern>/xmlhttp/*</url-pattern>
    </servlet-mapping>
    <servlet-mapping>
        <servlet-name>Persistent Faces Servlet</servlet-name>
        <url-pattern>*.iface</url-pattern>
    </servlet-mapping>
    <servlet-mapping>
        <servlet-name>uploadServlet</servlet-name>
        <url-pattern>/uploadHtml</url-pattern>
    </servlet-mapping>
    <servlet-mapping>
        <servlet-name>SimpleCaptcha</servlet-name>
        <url-pattern>/simpleImg</url-pattern>
    </servlet-mapping>
    <servlet-mapping>
        <servlet-name>StickyCaptcha</servlet-name>
        <url-pattern>/stickyImg</url-pattern>
    </servlet-mapping>
    <servlet-mapping>
        <servlet-name>ChineseCaptcha</servlet-name>
        <url-pattern>/chineseImg</url-pattern>
    </servlet-mapping>
    <error-page>
        <exception-type>java.lang.Throwable</exception-type>
        <location>/checkService.jsp</location>
    </error-page>
</web-app> 
```

--- faces-config.xml 应用程序配置 ---

```
<application>
    <view-handler>com.icesoft.faces.facelets.D2DFaceletViewHandler</view-handler>
    <variable-resolver>org.springframework.web.jsf.DelegatingVariableResolver</variable-resolver>

    <locale-config>
        <default-locale>es</default-locale>
        <supported-locale>es</supported-locale>
        <supported-locale>en</supported-locale>
        <supported-locale>en_US</supported-locale>
    </locale-config>
</application> 
```

希望有人有答案。问候。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T17:32:52.963

一个丑陋的解决方案，但对我有用。关于覆盖 Viewandler： [http ://www.logikdev.com/2010/03/24/how-to-personalise-the-urls-with-faces-navigation/](http://www.logikdev.com/2010/03/24/how-to-personalise-the-urls-with-faces-navigation/)

# iis - 通过 ip 而不是主机名访问站点核心媒体时遇到问题

> ID：13638145
> 
> 赞同：2
> 
> 时间：2012-11-30T02:25:24.863
> 
> 标签：iis, sitecore

我有一个问题，由于这里的网络问题，我需要通过 IP 而不是主机名访问我的站点。这会导致 IIS 将请求识别为发往 IP (10.0.6.63) 而不是环回 12.0.0.1

它会发现 sitecore_media.ashx 很好，但媒体处理程序然后重定向到 404 而不是为媒体提供服务。

有人可以告诉我如何让媒体处理程序接受这个请求或指向解释它如何工作的文档吗？

谢谢吉姆

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-09T08:21:51.313

媒体处理程序依靠 SiteResolver 来确保返回正确的媒体项。

正如@Martin 所说 - 您需要确保您`<site hostName="">`的配置正确。主机名属性值针对`HttpContext.Current.Request.Url.Host`. 如果您访问您的网站，`http://127.0.0.1/sitecore`那么您的主机名是`127.0.0.1`.

另请注意，您可以通过管道 (|)将多个条目分隔到单个**hostName属性中。**

# javascript - 调整浏览器窗口大小时内容消失

> ID：13638147
> 
> 赞同：-2
> 
> 时间：2012-11-30T02:25:37.827
> 
> 标签：javascript, html, browser, resize

我正在做一个网站，但我有一个小问题。当我在浏览器上用全尺寸窗口打开它时没有问题，但是当我改变我的窗口大小并使其更小时，文本消失并且图像内容大小发生变化。

必须是 javascript 或 css 的东西。如果您能找到解决此问题的任何方法，请给我一个建议。

谢谢！

* * *

这是HTML代码：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
        <title>Untitled Document</title>
        <link href="../css/style.css" rel="stylesheet"
        type="text/css" />
        <script src="../css/SpryTabbedPanels.js" type="text/javascript"></script>
        <link href="../css/SpryTabbedPanels.css" rel="stylesheet" type="text/css"
        />
        <link rel='stylesheet' id='NextGEN-css' href='http://www.markandlona.com/core/wp-content/plugins/nextgen-gallery/css/nggallery.css?ver=1.0.0'
        type='text/css' media='screen' />
        <link rel='stylesheet' id='colorpicker.css-css' href='http://www.markandlona.com/core/wp-content/themes/crius/js/colorpicker/css/colorpicker.css?ver=1.2'
        type='text/css' media='all' />
        <link rel='stylesheet' id='fancybox_css-css' href='http://www.markandlona.com/core/wp-content/themes/crius/js/fancybox/jquery.fancybox.css?ver=1.2'
        type='text/css' media='all' />
        <link rel='stylesheet' id='fancybox_thumb_css-css' href='http://www.markandlona.com/core/wp-content/themes/crius/js/fancybox/jquery.fancybox-thumbs.css?ver=1.2'
        type='text/css' media='all' />
        <link rel='stylesheet' id='grid_css-css' href='../css/grid.css' type='text/css'
        media='all' />
        <link rel='stylesheet' id='google_fonts-css' href='http://fonts.googleapis.com/css?family=Alice&#038;ver=3.3.2'
        type='text/css' media='all' />
        <link rel='stylesheet' id='jquery.lightbox.min.css-css' href='http://www.markandlona.com/core/wp-content/plugins/wp-jquery-lightbox/styles/lightbox.min.css?ver=1.3.4'
        type='text/css' media='all' />
        <script type='text/javascript' src='http://www.markandlona.com/core/wp-includes/js/jquery/jquery.js?ver=1.7.1'></script>
        <script type='text/javascript' src='http://www.markandlona.com/core/wp-content/plugins/nextgen-gallery/js/jquery.cycle.all.min.js?ver=2.9995'></script>
        <script type='text/javascript' src='http://www.markandlona.com/core/wp-content/plugins/nextgen-gallery/js/ngg.slideshow.min.js?ver=1.06'></script>
        <script type='text/javascript' src='http://www.markandlona.com/core/wp-content/themes/crius/js/jquery.ui.js?ver=1.2'></script>
        <script type='text/javascript' src='http://www.markandlona.com/core/wp-content/themes/crius/js/colorpicker.js?ver=1.2'></script>
        <script type='text/javascript' src='http://www.markandlona.com/core/wp-content/themes/crius/js/fancybox/jquery.fancybox.pack.js?ver=1.2'></script>
        <script type='text/javascript' src='http://www.markandlona.com/core/wp-content/themes/crius/js/fancybox/jquery.fancybox-thumbs.js?ver=1.2'></script>
        <script type='text/javascript' src='http://www.markandlona.com/core/wp-content/themes/crius/js/jquery.easing.js?ver=1.2'></script>
        <script type='text/javascript' src='http://www.markandlona.com/core/wp-content/themes/crius/js/jquery.nivoslider.js?ver=1.2'></script>
        <script type='text/javascript' src='http://www.markandlona.com/core/wp-content/themes/crius/js/jquery.touchwipe.1.1.1.js?ver=1.2'></script>
        <script type='text/javascript' src='http://www.markandlona.com/core/wp-content/themes/crius/js/jquery.validate.js?ver=1.2'></script>
        <script type='text/javascript' src='http://www.markandlona.com/core/wp-content/themes/crius/js/browser.js?ver=1.2'></script>
        <script type='text/javascript' src='http://www.markandlona.com/core/wp-content/themes/crius/js/jquery.backstretch.js?ver=1.2'></script>
        <script type='text/javascript' src='http://www.markandlona.com/core/wp-content/themes/crius/js/hint.js?ver=1.2'></script>
        <script type='text/javascript' src='http://www.markandlona.com/core/wp-content/themes/crius/js/jquery.flip.min.js?ver=1.2'></script>
        <script type='text/javascript' src='http://www.markandlona.com/core/wp-content/themes/crius/js/fancybox/jquery.mousewheel-3.0.6.pack.js?ver=1.2'></script>
        <script type='text/javascript' src='http://www.markandlona.com/core/wp-content/themes/crius/js/jquery.jplayer.min.js?ver=1.2'></script>
        <script type='text/javascript' src='http://www.markandlona.com/core/wp-content/themes/crius/js/kenburns.js?ver=1.2'></script>
        <script type='text/javascript' src='http://www.markandlona.com/core/wp-content/themes/crius/js/jwplayer.js?ver=1.2'></script>
        <script type='text/javascript' src='../css/custom.js'></script>
        <style type="text/css">
            .post_header h2, h1, h2, h3, h4, h5 {
                color: #222222;
            }
            .nav li a {
                font-size:30px;
            }
            .nav li ul li a {
                font-size:21px;
            }
            h1 {
                font-size:40px;
            }
            h2 {
                font-size:32px;
            }
            h3 {
                font-size:26px;
            }
            h4 {
                font-size:24px;
            }
            h5 {
                font-size:22px;
            }
            h6 {
                font-size:18px;
            }
            a {
                color:#000000;
                font-family:"ヒラギノ角ゴ Pro W3", "Hiragino Kaku Gothic Pro", メイリオ, Meiryo, Osaka, "ＭＳ Ｐゴシック", "MS PGothic", sans-serif;
            }
            #nav_wrapper, #thin_nav, .post_date {
                background: #ffffff;
                overflow: visible;
                position: absolute;
                visibility: visible;
                width: 310px;
            }
            input[type=submit], input[type=button], a.button {
                background: #000000;
                text-shadow: -1px 0 1px #333;
            }
            input[type=submit], input[type=button], a.button {
                color: #ffffff;
            }
            input[type=submit]:hover, input[type=button]:hover, a.button:hover {
                color: #ffffff;
            }
            input[type=submit], input[type=button], a.button {
                border: 1px solid #111111;
            }
            .post_header h2, h1, h2, h3, h4, h5 {
                color: #222222;
            }
            h1, h2, h3, h4, h5, h6, .nav li a, #kenburns_title, #kenburns_desc, .personal_contact h6 {
                font-family:'Alice';
            }
            h1, h2, h3, h4, h5, h6, .nav li a, #gallery_title, #gallery_desc, .nav li a, .nav_page_number li {
                text-transform: none;
            }
            .nav li a, .nav_page_number li {
                color: #000000;
            }
            .nav li ul {
                border-left: 1px solid #000000;
            }
            .nav li.current-menu-item > a, .nav li > a:hover, .nav li > a.hover, .nav li > a:active, .nav li.current-menu-parent > a, .nav li.current-menu-item ul li a:hover, .nav li ul li a:hover, .nav li ul li:hover a, .nav li ul li.current-menu-item a {
                color: #ff8e01;
            }
            h1.menu_header, #footer {
                color: #919191;
            }
        </style>
        <link href="../css/screen.css" rel="stylesheet" type="text/css"
        />
        <style type="text/css">
            h1, h2, h3, h4, h5, h6 {
                font-family: Dosis;
            }
        </style>
    </head>

    <body>
        <!-- Begin logo -->
        <!-- End logo -->
        <!-- Begin main nav -->
        <div id="nav_wrapper">
            <div class="nav_wrapper_inner">
                <div id="menu_border_wrapper">  <a id="custom_logo" class="logo_wrapper" href="http://www.markandlona.com/core"><img src="../images/verrisgolf_small.jpg" alt="" width="151" height="42"/></a>

                    <ul
                    id="main_menu" class="nav">
                        <li id="menu-item-418" class="menu-item menu-item-type-post_type menu-item-object-page current-menu-item page_item page-item-2 current_page_item menu-item-418"><a href="http://www.markandlona.com/core/">HOME</a>
                        </li>
                        <li id="menu-item-87" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-87"><a href="http://www.markandlona.com/core/about">ABOUT</a> 
                        </li>
                        <li id="menu-item-92" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-92"><a href="http://www.markandlona.com/core/visual">COLLECTIONS</a>

                            <ul class="sub-menu">
                                <li id="menu-item-93" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-93"><a href="http://www.markandlona.com/core/visual/models">A/W 2012</a>
                                </li>
                                <li id="menu-item-94" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-94"><a href="http://www.markandlona.com/core/visual/movie">S/S 2012</a>
                                </li>
                            </ul>
                        </li>
                        <li id="menu-item-95" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-95"><a href="http://www.markandlona.com/core/product%ef%bc%8b">ARCHIVES</a>

                            <ul
                            class="sub-menu">
                                <li id="menu-item-96" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-96"><a href="http://www.markandlona.com/core/product%ef%bc%8b/men">A/W 2011</a>
                                </li>
                                <li id="menu-item-97" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-97"><a href="http://www.markandlona.com/core/product%ef%bc%8b/women">S/S 2011</a>
                                </li>
                                <li id="menu-item-" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-96"><a href="http://www.markandlona.com/core/product%ef%bc%8b/men">A/W 2010</a>
                                </li>
                                <li id="menu-item-2" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-97"><a href="http://www.markandlona.com/core/product%ef%bc%8b/women">S/S 2010</a>
                                </li>
                                </ul>
                        </li>
                        <li id="menu-item-101" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-101"><a href="http://www.markandlona.com/core/press%ef%bc%8b">BLOG</a>

                        </li>
                        <li id="menu-item-104" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-104"><a href="http://www.markandlona.com/core/news">ONLINE STORE</a>
                        </li>
                        <li id="menu-item-519" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-519"><a href="http://www.markandlona.com/core/shoplist">SHOP LIST</a>
                        </li>
                        </ul>
                </div>
            </div>
        </div>
        </div>
    </body>

</html> 
```

这是我的 JavaScript：

```
var $j = jQuery.noConflict();

/* jquery.imagefit 
 *
 * Version 0.2 by Oliver Boermans <http://www.ollicle.com/eg/jquery/imagefit/>
 *
 * Extends jQuery <http://jquery.com>
 *
 */
(function($) {
    $.fn.imagefit = function(options) {
        var fit = {
            all : function(imgs){
                imgs.each(function(){
                    fit.one(this);
                    })
                },
            one : function(img){
                $(img)
                    .width('100%').each(function()
                    {
                        $(this).height(Math.round(
                            $(this).attr('startheight')*($(this).width()/$(this).attr('startwidth')))
                        );
                    })
                }
        };

        this.each(function(){
                var container = this;

                // store list of contained images (excluding those in tables)
                var imgs = $('img', container).not($("table img"));

                // store initial dimensions on each image 
                imgs.each(function(){
                    $(this).attr('startwidth', $(this).width())
                        .attr('startheight', $(this).height())
                        .css('max-width', $(this).attr('startwidth')+"px");

                    fit.one(this);
                });
                // Re-adjust when window width is changed
                $(window).bind('resize', function(){
                    fit.all(imgs);
                });
            });
        return this;
    };
})(jQuery);

$j.fn.getIndex = function(){
    var $jp=$j(this).parent().children();
    return $jp.index(this);
}

jQuery.fn.extend({
  slideRight: function() {
    return this.each(function() {
        jQuery(this).show();
    });
  },
  slideLeft: function() {
    return this.each(function() {
        jQuery(this).hide();
    });
  },
  slideToggleWidth: function() {
    return this.each(function() {
      var el = jQuery(this);
      if (el.css('display') == 'block') {
        el.slideRight();
      } else {
        el.slideLeft();
      }
    });
  }
});

$j.fn.setNav = function(){
    $j('#main_menu li ul').css({display: 'none'});

    $j('#main_menu li').each(function()
    {   
        var $jsublist = $j(this).find('ul:first');

        $j(this).hover(function()
        {   
            $jsublist.css({opacity: 1});

            $jsublist.stop().css({overflow:'visible', height:'auto', display:'none'}).fadeIn(200, function()
            {
                $j(this).css({overflow:'visible', height:'auto', display: 'block'});
            }); 
        },
        function()
        {   
            $jsublist.stop().css({overflow:'visible', height:'auto', display:'none'}).fadeOut(200, function()
            {
                $j(this).css({overflow:'visible', display:'none'});
            }); 
        }); 

    });

    $j('#main_menu li').each(function()
    {

        $j(this).hover(function()
        {   
            $j(this).find('a:first').addClass('hover');
        },
        function()
        {   
            $j(this).find('a:first').removeClass('hover');
        }); 

    });

    $j('#menu_wrapper .nav ul li ul').css({display: 'none'});

    $j('#menu_wrapper .nav ul li').each(function()
    {   

        var $jsublist = $j(this).find('ul:first');

        $j(this).hover(function()
        {   
            $jsublist.css({opacity: 1});

            $jsublist.stop().css({overflow:'visible', height:'auto', display:'none'}).fadeIn(200, function()
            {
                $j(this).css({overflow:'visible', height:'auto', display: 'block'});
            }); 
        },
        function()
        {   
            $jsublist.stop().css({overflow:'visible', height:'auto', display:'none'}).fadeOut(200, function()
            {
                $j(this).css({overflow:'visible', display:'none'});
            }); 
        }); 

    });

    $j('#menu_wrapper .nav ul li').each(function()
    {

        $j(this).hover(function()
        {   
            $j(this).find('a:first').addClass('hover');
        },
        function()
        {   
            $j(this).find('a:first').removeClass('hover');
        }); 

    });
}

$j(document).ready(function(){ 

    $j(document).setNav();

    $j('#thin_nav').mouseenter(
        function() {
            setTimeout(function() {
                $j('#nav_wrapper').animate({"right": "0px"}, { duration: 300 });
                $j(this).css('display', 'none');
            }, 300);
        }
    );

    $j('#nav_wrapper').mouseleave(
        function() {
            $j(this).animate({"right": "-250px"}, { duration: 300 });
            $j('#thin_nav').css('display', 'block');
        }
    );

    $j('#nav_wrapper').touchwipe({
        wipeRight: function(){ 
            $j('#nav_wrapper').animate({"right": "-250px"}, { duration: 300 });
            $j('#thin_nav').css('display', 'block');
        }
    });

    $j('#thin_nav').touchwipe({
        wipeLeft: function(){ 
            $j('#nav_wrapper').animate({"right": "0px"}, { duration: 300 });
            $j('#thin_nav').css('display', 'none');
        }
    });

    $j('.pp_gallery a').fancybox({ 
        padding: 0,
        overlayColor: '#000', 
        transitionIn: 'fade',
        transitionOut: 'fade',
        overlayOpacity: 0.9
    });

    $j('.flickr li a').fancybox({ 
        prevEffect  : 'none',
        nextEffect  : 'none',
        helpers : {
            title   : {
                type: 'outside'
            },
            overlay : {
                opacity : 0.9,
                css : {
                    'background-color' : '#000'
                }
            },
            thumbs  : {
                width   : 60,
                height  : 60
            }
        }
    });

    $j('a.fancy-gallery').fancybox({ 
        prevEffect  : 'none',
        nextEffect  : 'none',
        helpers : {
            title   : {
                type: 'outside'
            },
            overlay : {
                opacity : 0.9,
                css : {
                    'background-color' : '#000'
                }
            },
            thumbs  : {
                width   : 60,
                height  : 60
            }
        }
    });

    $j('.img_frame').fancybox({ 
        padding: 0,
        overlayColor: '#000', 
        overlayOpacity: 0.9
    });

    $j('.lightbox_youtube').fancybox({ 
        padding: 0,
        overlayColor: '#000', 
        transitionIn: 'fade',
        transitionOut: 'fade',
        overlayOpacity: 0.9,
        scrolling: 'no'
    });

    $j('.lightbox_vimeo').fancybox({ 
        padding: 0,
        overlayColor: '#000', 
        transitionIn: 'fade',
        transitionOut: 'fade',
        overlayOpacity: 0.9,
        scrolling: 'no'
    });

    $j('.project_single').fancybox({ 
        padding: 0,
        overlayColor: '#000', 
        transitionIn: 'fade',
        transitionOut: 'fade',
        overlayOpacity: 0.9,
        scrolling: 'no'
    });

    $j('input[title!=""]').hint();

    $j('textarea[title!=""]').hint();

    $j('.one_fourth.gallery4').hover(
        function(){
            var $jthis = $j(this);
            $jthis.children('a').children('img').stop().animate({
                    'height':'185px',
                    'top':'0px',
                    'left':'0px'
                }, 400);

        },
        function(){
            var $jthis = $j(this);
            $jthis.children('a').children('img').stop().animate({
                'height':'200px',
                'top':'0px',
                'left':'0px'
                }, 400);
        }
    );

    $j('.one_third.gallery3').hover(
        function(){
            var $jthis = $j(this);
            $jthis.children('a').children('img').stop().animate({
                    'height':'240px',
                    'top':'0px',
                    'left':'0px'
                }, 400);
        },
        function(){
            var $jthis = $j(this);
            $jthis.children('a').children('img').stop().animate({
                    'height':'260px',
                    'top':'0px',
                    'left':'0px'
                }, 400);
        }
    );

    $j('.one_half.gallery2').hover(
        function(){
            var $jthis = $j(this);
            $jthis.children('a').children('img').stop().animate({
                    'height':'320px',
                    'top':'0px',
                    'left':'0px'
                }, 400);
        },
        function(){
            var $jthis = $j(this);
            $jthis.children('a').children('img').stop().animate({
                'height':'340px',
                'top':'0px',
                'left':'0px'
                }, 400);
        }
    );

    //Firefoxがフリーズするのでブロック
    //$j('.post_img').hover(
//      function(){
//          var $jthis = $j(this);
//          $jthis.children('a').children('img').stop().animate({
//                  'height':'250px',
//                  'top':'0px',
//                  'left':'0px'
//              }, 400);
//      },
//      function(){
//          var $jthis = $j(this);
//          $jthis.children('a').children('img').stop().animate({
//              'height':'260px',
//              'top':'0px',
//              'left':'0px'
//              }, 400);
//      }
//  );

    //$j('.post_img').click(
//      function(event){
//          $j(this).children('a').trigger('click');
//      }
//  );

    var calScreenHeight = $j(window).height()-108;
    $j('#page_content_wrapper').css('top', '0px');

    setTimeout(function() {
        $j('#menu_wrapper').fadeIn();
        $j('#jp_interface_1').fadeIn();
        $j('#controls').fadeIn();
        $j('#page_content_wrapper').fadeIn();
        $j('.page_control').fadeIn();
        $j('#page_maximize').trigger('click');
        $j('#tray-button').trigger('click');
    }, 1012);

    var miniRightPos = 1012;

    $j('#page_minimize').click(function(){
        var calScreenHeight = $j(window).height()-120;

        $j(this).css('display', 'none');
        $j('#page_maximize').css('display', 'block');
        $j('#page_content_wrapper').animate({ 'left': -miniRightPos+'px' }, 200);
        $j('.page_control').animate({ 'left': '332px' }, 0);
        $j('.personal_contact').fadeOut('slow');
        $j('.gallery_social').fadeOut('slow');
        $j('#kenburns_title').fadeIn('slow');
        $j('#kenburns_desc').fadeIn('slow');
    });

    $j('#page_maximize').click(function(){
        var calScreenHeight = $j(window).height()-120;

        $j(this).css('display', 'none');
        $j('#page_minimize').css('display', 'block');
        $j('#page_content_wrapper').animate({ 'left': '332px' }, 400);
        $j('.page_control').animate({ 'left': miniRightPos+'px' }, 400);
        $j('.personal_contact').fadeIn('slow');
        $j('.gallery_social').fadeIn('slow');
        $j('#kenburns_title').fadeOut('slow');
        $j('#kenburns_desc').fadeOut('slow');
    });

    // Create the dropdown base
    $j("<select />").appendTo("#menu_border_wrapper");

    // Create default option "Go to..."
    $j("<option />", {
       "selected": "selected",
       "value"   : "",
       "text"    : "- Main Menu -"
    }).appendTo("#menu_border_wrapper select");

    // Populate dropdown with menu items
    $j(".nav li").each(function() {
     var current_item = $j(this).hasClass('current-menu-item'); 
     var el = $j(this).children('a');
     var menu_text = el.text();

     if($j(this).parent('ul.sub-menu').length > 0)
     {
        menu_text = "- "+menu_text;
        $j('ul.sub-menu li').css('display', 'block');
     }

     if($j(this).parent('ul.sub-menu').parent('li').parent('ul.sub-menu').length > 0)
     {
        menu_text = el.text();
        menu_text = "- - "+menu_text;

     }

     if(current_item)
     {
        $j("<option />", {
             "selected": "selected",
             "value"   : el.attr("href"),
             "text"    : menu_text
         }).appendTo("#menu_border_wrapper select");
     }
     else
     {
        $j("<option />", {
            "value"   : el.attr("href"),
            "text"    : menu_text
        }).appendTo("#menu_border_wrapper select");
     }
    });

    $j("#menu_border_wrapper select").change(function() {
        window.location = $j(this).find("option:selected").val();
    });

    //  $j('.sub-menu').touchwipe({
//          wipeRight: function(){ 
//              $j('.sub-menu').animate({"left": "0px"}, { duration: 300 });
//          $j('ul.sub-menu').css('display', 'block');
//          }
//    });
//    

}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T02:30:37.380

发生这种情况可能有多种原因，但我能否指出您的网页的性能会因大量 http 请求而变得糟糕。

您需要捆绑您的 css 和 js 文件并至少对其进行压缩，并具有某种缓存策略。我强烈建议你研究这个话题。

# asp.net-mvc - ASP.Net MVC 4 区域和查看配置

> ID：13638151
> 
> 赞同：0
> 
> 时间：2012-11-30T02:26:10.270
> 
> 标签：asp.net-mvc, asp.net-mvc-4

我在这里阅读了很多线程，但似乎没有一个解决方案对我有用。

我在创建区域和查找相关视图时遇到了麻烦。我创建了一个全新的项目，除了默认代码之外什么都没有，并创建了一个名为“Assignment”的区域。在分配区域内，我有一个名为“AssignmentDetails”的控制器，带有相应的视图文件夹。

当我尝试查看 localhost:1234/AssignmentDetails/ 时出现错误：未找到视图“索引”或其主视图或没有视图引擎支持搜索的位置

```
~/Views/AssignmentDetails/Index.aspx
~/Views/AssignmentDetails/Index.ascx
~/Views/Shared/Index.aspx
~/Views/Shared/Index.ascx
~/Views/AssignmentDetails/Index.cshtml
~/Views/AssignmentDetails/Index.vbhtml
~/Views/Shared/Index.cshtml
~/Views/Shared/Index.vbhtml 
```

**Globals.asax** AreaRegistration.RegisterAllAreas()

```
 WebApiConfig.Register(GlobalConfiguration.Configuration)
    FilterConfig.RegisterGlobalFilters(GlobalFilters.Filters)
    RouteConfig.RegisterRoutes(RouteTable.Routes)
    BundleConfig.RegisterBundles(BundleTable.Bundles)
    AuthConfig.RegisterAuth() 
```

**分配区域注册**

```
 context.MapRoute( _
            "Assignment_default", _
           "Assignment/{controller}/{action}/{id}", _
            New With {.action = "Index", .id = UrlParameter.Optional} _
        ) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T02:39:51.640

从区域分配查看控制器应该在

```
~/Areas/Assignment/Views/ControllerName 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T02:31:47.610

如果你有一个名为的区域`Assignment`并且`AssignmentDetails`在其中，你会在这个 url 找到索引：

```
localhost:1234/Assignment/AssignmentDetails/Index 
```

# objective-c - xcode4获取文本框的值

> ID：13638153
> 
> 赞同：0
> 
> 时间：2012-11-30T02:26:31.963
> 
> 标签：objective-c, xcode, cocoa, xcode4, applescript

我正在 xcode 4 中创建一个 applescript 应用程序，并寻求一些指导。我已经做了很多阅读和搜索互联网，但找不到我正在寻找的答案。我有一个带有文本框和按钮的主窗口。我希望能够用 hostname123 替换文本框中的文本，以便命令是：执行 shell 脚本“sudo scutil --set HostName”和 [文本框的值]。我设置了按钮事件，以便在单击时执行命令。有人可以协助获取文本框的值以便在命令中使用它吗？

```
on ButtonHandlerVolumeSetting0_(sender)
    do shell script "sudo scutil --set HostName hostname123" 
end ButtonHandlerVolumeSetting0_ 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T04:25:20.923

首先，我假设这是 in `AppleScriptObjC`，而不是旧的`AppleScript Studio`.

首先，您需要使 AppleScript 等效于 an `IBOutlet`，它是一个实例变量（或属性），它引用文本字段并允许 Objective-C 代码（或 AppleScript）与之通信。在 AppleScript 脚本的顶部，添加如下一行：

```
script MDAppDelegate
    property parent : class "NSObject"

    property hostNameTextField : missing value -- add this line 
```

然后，您需要从 nib 文件中的脚本实例按住 Control 并拖动到窗口中的文本字段以“连接”此插座。

[更新]：从您收到的错误消息来看，听起来您没有`hostNameTextField`在 nib 文件中正确设置此连接。

下图中显示的 nib 文件中的`MDAppDelegate`蓝色立方体图标代表 AppleScript 脚本的一个实例，该脚本将在加载该 nib 文件时在运行时创建。您可能已经正确地建立了从按钮到蓝色 AppleScript 立方体的“连接”，它指定当您单击按钮时，它应该调用`ButtonHandlerVolumeSetting0_()`函数（又名 AppleScript 处理程序）。您现在需要选择您的蓝色 AppleScript 立方体实例，如下图所示，然后右键单击（或按住 Control 单击）并从蓝色立方体拖动到您的输入文本字段，如下图所示。

![在此处输入图像描述](../Images/7deed15b1a36685220108573968eea94.png)

当您松开鼠标按钮时，它应该会显示一个黑色弹出面板，其中包含您可以“连接”到文本字段的可能属性。选择`hostNameTextField`。

![在此处输入图像描述](../Images/65743efc8d848f74dd961058c06d61be.png)

之后，当您选择蓝色 AppleScript 立方体时，在右侧实用工具区域的连接检查器中，您可以看到 AppleScript 脚本的连接。在 下`Outlets`，您会看到`hostNameTextField`出口，在 下`Received Actions`，您会看到`ButtonHandlerVolumeSetting0_()`。

虽然该`hostNameTextField`属性在 AppleScript 中设置为初始值`missing value`（AppleScript 等效于 Objective-C 的`nil`），但通过在 nib 文件中建立此连接，在运行时，该值`hostNameTextField`将设置为`NSTextField`您指定的值。这将允许脚本和归档到 nib 文件中的对象层次结构之间的通信。

[更新结束]

An继承了从其超类`NSTextField`命名的方法。此方法将文本字段的内容作为（等同于 AppleScript ）返回。因此，在按钮单击处理程序中，您可以获得字符串值，如下所示：[`stringValue`](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/ApplicationKit/Classes/NSControl_Class/Reference/Reference.html#//apple_ref/occ/instm/NSControl/stringValue)`NSControl``NSString``string`

```
on ButtonHandlerVolumeSetting0_(sender)
    set hostName to hostNameTextField's stringValue()
    do shell script ("/usr/sbin/scutil --set HostName " & hostName) with administrator privileges
end ButtonHandlerVolumeSetting0_ 
```

使用 时`do shell script`，通常最好`sudo`从脚本本身中省略任何包含，而是添加`with administrator privileges`限定符。这对 AppleScript 意味着您需要以提升的权限运行脚本，它将处理显示标准身份验证对话框。

# php - php fwrite 仅适用于本地主机而不是服务器？

> ID：13638155
> 
> 赞同：0
> 
> 时间：2012-11-30T02:26:35.413
> 
> 标签：php, localhost

我是一名新的 PHP 开发人员。我正在尝试在服务器上编写一个平面文件，并且我有以下代码。

```
<?php 
$myfile= "file1.txt";
if(isset($_POST['ta'])){
    $newData = nl2br(htmlspecialchars($_POST['ta']));
    $handle = fopen($myfile, "w");
    fwrite($handle, $newData);
    fclose($handle);
}

if(file_exists($myfile)){
    $myData=file_get_contents($myfile);
}
?>

<form action="file.php" method="post">
    <textarea name="ta" cols="64" rows="10"><?php echo $myData; ?></textarea>
    <br/> <br />
    <input name="myBtn" type="submit" />
</form>
<br/> 
<br/> 

<?php echo $myData; ?> 
```

我不明白的是，上面的程序为什么在 localhost 上完美运行，但在实际服务器上却什么也没做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T04:07:08.177

您需要检查文件是否可由运行 Web 服务器的用户写入，这可能类似于`www`，`apache`或其他东西，并且与您的用户不同 -`wjones17`或例如。如果您的权限看起来像

```
-rw-r--r--   1 wjones17  group     17 Nov 17 20:02 index.php 
```

然后您的用户有权更改该文件，但没有其他人可以更改，包括 Web 服务器，因此您的 php 脚本运行为`www`，`apache`或其他。

就如何解决这个问题而言，您的选择可能在共享环境中受到限制，但授予所有用户完全权限绝对是个坏主意；尽管它似乎可以“解决”问题，但您只是在向更大的问题敞开大门。您可能会问自己是否有其他方法可以完成您想要的，例如使用数据库。这一切都取决于你的情况以及你想要做什么。

# heroku - lein-heroku 0.1.1 与 leiningen 2 兼容吗？

> ID：13638156
> 
> 赞同：1
> 
> 时间：2012-11-30T02:26:39.157
> 
> 标签：heroku, clojure, leiningen

我在使用 lein-heroku 0.1.1 和 lein 2 时遇到了一些问题。

我在 OS X Lion 上从[https://github.com/technomancy/leiningen/wiki/Upgrading全新安装了 lein。](https://github.com/technomancy/leiningen/wiki/Upgrading)

以下是生命体征：

```
$ lein --version
Leiningen 2.0.0-preview10 on Java 1.7.0_09 Java HotSpot(TM) 64-Bit Server VM

$ cat ~/.lein/profiles.clj 
{:user {:plugins [ 
    [lein-heroku "0.1.1"]
    [lein-difftest "2.0.0"]
    [lein-pprint "1.1.1"]
]}}

$ lein help
...
leiningen.heroku  Problem loading: Could not locate leiningen/main__init.class or leiningen/main.clj on classpath:
... 
```

其他插件加载成功。

这是类路径：

```
$ lein repl
user=> (println (seq (.getURLs (java.lang.ClassLoader/getSystemClassLoader))))
(#<URL file:/Users/bnorton/.lein/self-installs/leiningen-2.0.0-preview10-standalone.jar> 
#<URL file:/Users/bnorton/.m2/repository/org/clojure/core.cache/0.6.1/core.cache-0.6.1.jar> 
#<URL file:/Users/bnorton/.m2/repository/quoin/quoin/0.1.0/quoin-0.1.0.jar> 
#<URL file:/Users/bnorton/.m2/repository/lein-heroku/lein-heroku/0.1.1/lein-heroku-0.1.1.jar> 
#<URL file:/Users/bnorton/.m2/repository/stencil/stencil/0.3.0/stencil-0.3.0.jar> 
#<URL file:/Users/bnorton/.m2/repository/lein-pprint/lein-pprint/1.1.1/lein-pprint-1.1.1.jar> 
#<URL file:/Users/bnorton/.m2/repository/org/apache/httpcomponents/httpclient/4.1.2/httpclient-4.1.2.jar> 
#<URL file:/Users/bnorton/.m2/repository/slingshot/slingshot/0.8.0/slingshot-0.8.0.jar> 
#<URL file:/Users/bnorton/.m2/repository/commons-logging/commons-logging/1.1.1/commons-logging-1.1.1.jar> 
#<URL file:/Users/bnorton/.m2/repository/org/apache/httpcomponents/httpcore/4.1.2/httpcore-4.1.2.jar> 
#<URL file:/Users/bnorton/.m2/repository/org/clojars/technomancy/heroku-http-apache/0.1-SNAPSHOT/heroku-http-apache-0.1-SNAPSHOT.jar> 
#<URL file:/Users/bnorton/.m2/repository/scout/scout/0.1.0/scout-0.1.0.jar> 
#<URL file:/Users/bnorton/.m2/repository/org/clojure/clojure/1.3.0/clojure-1.3.0.jar> 
#<URL file:/Users/bnorton/.m2/repository/lein-difftest/lein-difftest/2.0.0/lein-difftest-2.0.0.jar> 
#<URL file:/Users/bnorton/.m2/repository/org/clojure/tools.cli/0.2.1/tools.cli-0.2.1.jar> 
#<URL file:/Users/bnorton/.m2/repository/commons-codec/commons-codec/1.4/commons-codec-1.4.jar> 
#<URL file:/Users/bnorton/.m2/repository/bultitude/bultitude/0.1.7/bultitude-0.1.7.jar> 
#<URL file:/Users/bnorton/.m2/repository/com/google/code/gson/gson/1.7.1/gson-1.7.1.jar> 
#<URL file:/Users/bnorton/.m2/repository/org/clojars/technomancy/heroku-json-gson/0.1-SNAPSHOT/heroku-json-gson-0.1-SNAPSHOT.jar> 
#<URL file:/Users/bnorton/.m2/repository/lein-newnew/lein-newnew/0.3.5/lein-newnew-0.3.5.jar> 
#<URL file:/Users/bnorton/.m2/repository/org/clojars/technomancy/heroku-api/0.1-SNAPSHOT/heroku-api-0.1-SNAPSHOT.jar> 
#<URL file:/Users/bnorton/.m2/repository/doric/doric/0.6.0/doric-0.6.0.jar>) 
```

我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T03:13:42.980

您可能需要从 master 获取最新版本的 lein-heroku。

提交日志显示了一些支持 Leiningen 2 的更改，但这些更改比上一个版本更新。

查看提交：[https ://github.com/technomancy/lein-heroku/commits/master](https://github.com/technomancy/lein-heroku/commits/master)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T18:23:11.273

它已针对 2.x 进行了更新，但不再维护。由于启动时间问题和不必要的重复工作，我建议改用 Heroku Toolbelt。[http://toolbelt.herokuapp.com](http://toolbelt.herokuapp.com)

# php - 如何以 OOP 风格使用 mysqli_free_result？

> ID：13638157
> 
> 赞同：1
> 
> 时间：2012-11-30T02:26:44.940
> 
> 标签：php, mysqli

我在摆弄 mysqli，我对 mysqli_free_result() 方法有疑问。（或者它是一个函数？还是要学习OOP）。

如果我以程序方式运行代码，我会像这样调用函数：

```
/*
Destroy the result set and free the memory used for it.
*/
mysqli_free_result($result); 
```

如何以 OOP 风格运行此功能？

```
$mysqli->free_result(); // does not work. Any ideas why? 
```

我是否应该在完成 mysqli 工作后不释放结果并关闭连接，最后是：

```
$mysqli->close; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T02:27:41.790

您忘记了方法调用的括号。此外，`free_result()`是[`mysqli_stmt`类](http://www.php.net/manual/en/class.mysqli-stmt.php)而不是`mysqli`类的方法。

```
$mysqli_stmt->free_result();
$mysqli->close(); 
```

# c# - TcpClient、TcpListener、网络流

> ID：13638158
> 
> 赞同：0
> 
> 时间：2012-11-30T02:26:45.757
> 
> 标签：c#

我创建了一个 Instant Messanger，它允许客户端之间通过服务器进行通信。

服务器存储登录的客户端的网络流和用户名，客户端发送的消息也用于确定服务器应该将消息路由到谁。

我遇到的问题是从一个客户端到另一个客户端的前两条消息有效，例如：

*   Client1 向 Client2 发送消息
*   服务器接收client1的消息并路由到client2（目标）
*   Client2 接收消息（礼物）

反之亦然。

在客户端 1 发送初始消息后，客户端 2 不再接收来自客户端 1 的消息。

我看到的问题是服务器确实收到了消息并且似乎将其发送到正确的流，但预期的客户端没有收到它。

在这种情况下，接收客户端，client2 不能/不接收消息，但可以发送消息，并且 client1 确实接收它们。

如果需要更多信息，请告诉我。

我可以保证我使用的代码是准确的，我唯一能想到的就是网络流或 tcpclient 的性质。

```
int accountThreadCount = 0;

while (accountThreadCount < login.newClientLogin.clientList.Count())
{
    AccountThread newAccountThread = login.newClientLogin.clientList[accountThreadCount];

    if (newAccountThread.username == comm.to)
    {
        Stream relayMessageStream = newAccountThread.tcpc.GetStream();
        iff.Serialize(relayMessageStream, comm);
    }

    accountThreadCount++;
} 
```

AccountThread 存储了TcpClient 和username 等东西。现在假设这是完美的工作，否则前两个将无法工作。正如我上面已经说过的，这对我来说很奇怪，我尝试重新编码无济于事。

# ant - Jenkins Ant 和动态 build.properties 文件

> ID：13638159
> 
> 赞同：5
> 
> 时间：2012-11-30T02:26:55.183
> 
> 标签：ant, jenkins

我有一个基于单一代码的用于构建多个平台的应用程序。

在本地，我设置了一个主要的 build-env.properties 文件和一系列附加的 *.properties 文件，这些文件用于为我发布到的不同平台切换设置。

在命令行上进行构建我只需使用以下命令：

```
ant build -propertyfile dev-build.properties 
```

我怎样才能在詹金斯做到这一点？

我目前使用“Invoke Ant”构建步骤，目标设置为构建，但不知道如何指定辅助属性文件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T09:33:49.043

[参数化构建插件](https://wiki.jenkins-ci.org/display/JENKINS/Parameterized+Build)可能会对您有所帮助。这是假设您要更改的属性数量是一两个。因此，当您运行作业时，您会得到一个下拉菜单来选择您的操作系统并继续。

虽然，正如我在[这里](https://stackoverflow.com/questions/11985358/how-to-configure-jenkins-in-order-to-build-project-using-ant-and-custom-args/12002799#12002799)提到的，与此插件不符的是它使流程手动

* * *

在这个线程[Hudson / Jenkins: share parameters between several jobs](https://stackoverflow.com/questions/12427871/hudson-jenkins-share-parameters-between-several-jobs/12454622#12454622) 您可以阅读 Anders 回答中的第二个选项作为替代方法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-30T06:50:02.537

虽然不完全相同，但您可以使用属性高级字段将这些属性的内容放入 Jenkins Invoke Ant 构建步骤。

**最基本的方法：**

*   您将需要为您希望使用的每组不同的子属性创建一个新任务。

*   在您的“Invoke Ant”构建步骤中，如果您按下`Advanced...`，这将显示一个“Properties”字段，您可以将您的 *.properties 文件之一中的属性复制到该字段中。

*   对您希望使用的每个不同的属性文件重复此操作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-15T10:57:28.830

更好的方法是使用带有文件参数的参数化作业（请参阅创建构建的[文档）。](https://wiki.jenkins-ci.org/display/JENKINS/Parameterized+Build)将文件位置称为“ **propertyfile** ”会有所帮助。这比一次又一次地重新配置作业以运行构建（将属性文件复制到输入位置）要好。

# android - android将参数从一个类传递给另一个

> ID：13638160
> 
> 赞同：0
> 
> 时间：2012-11-30T02:27:18.450
> 
> 标签：android

我有下面的代码片段将参数从一个类（活动）传递到另一个类。为此，使用过`sharedPreferences`，但我尝试在我的第二类中获取保存在主要活动中的值，我得到 java.lang.Nullpointer 异常。我在这里做错了什么？

```
public class Secondclass extends Activity { 
//other functions....
private void get_file_name() {

        final  main m=new  main();
        String myvalue=m.set_paramater();
        //I want to access FOLDER_NAME here
         Log.e("TAG","the value "+myvalue);

}
}

public class main extends Activity{
String FOLDER_NAME;
 @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
         FOLDER_NAME="a_name";
      Save_file_name("APP_NAME",FOLDER_NAME);
}
private void Save_file_name(String key,String value){
        SharedPreferences sharedPreferences = getPreferences(MODE_PRIVATE);
        SharedPreferences.Editor editor = sharedPreferences.edit();
        editor.putString(key, value);
        editor.commit();

        }

 public String set_paramater(){
         SharedPreferences sharedPreferences = getPreferences(MODE_PRIVATE);
         String strSaveddata = sharedPreferences.getString("APP_NAME", "");
         return strSaveddata;
    }
}

} 
```

这是跟踪文件：

```
 E/AndroidRuntime(10622): FATAL EXCEPTION: main
 E/AndroidRuntime(10622): java.lang.NullPointerException
E/AndroidRuntime(10622): at android.content.ContextWrapper.getPackageName(ContextWrapper.java:120)
 E/AndroidRuntime(10622): at android.app.Activity.getLocalClassName(Activity.java:3488)
 E/AndroidRuntime(10622): at android.app.Activity.getPreferences(Activity.java:3522) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T02:47:27.900

从另一个 Activity 实例化一个 Activity 是不好的做法，在您的情况下使用以下行：

```
final  main m=new  main(); 
```

Android 会处理您所有活动的创建，您不必自己动手。如果你这样做，Activity 将没有有效的应用程序上下文。没有有效的应用程序上下文`getPreferences(MODE_PRIVATE)`将返回 null。

此外，最好使用：

```
PreferenceManager.getDefaultSharedPreferences(this) 
```

使用`getPreferences(...)`将使偏好对您的活动私有化。使用`getDefaultSharedPreferences(this)`将使您的首选项可用于其他活动，而不仅仅是创建它的活动。这使您可以在两个活动中共享您的数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T02:35:52.377

```
final  main m=new  main(); 
```

这是错误的！当你使用

```
SharedPreferences sharedPreferences = gePreferences(MODE_PRIVATE); 
```

这需要`Context`. 在您致电时哪个为空`set_paramater()`

就`set_paramater()`进去吧`Secondclass`。它将解决您的问题！

```
package com.example.test;

import android.app.Activity;
import android.content.Intent;
import android.content.SharedPreferences;
import android.os.Bundle;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;

public class main extends Activity {
    String FOLDER_NAME;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        FOLDER_NAME = "a_name";
        Save_file_name("APP_NAME", FOLDER_NAME);
        Button nextButton=(Button)findViewById(R.id.next_button);
        nextButton.setOnClickListener(new OnClickListener() {

            public void onClick(View v) {
                startActivity(new Intent(main.this,Secondclass.class));

            }
        });

    }

    private void Save_file_name(String key, String value) {
        SharedPreferences sharedPreferences = getSharedPreferences(
                "myPreffFile", MODE_PRIVATE);
        SharedPreferences.Editor editor = sharedPreferences.edit();
        editor.putString(key, value);
        editor.commit();

    }

} 
```

和...

```
 package com.example.test;

import android.app.Activity;
import android.content.SharedPreferences;
import android.os.Bundle;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.Toast;

public class Secondclass extends Activity {
    // other functions....
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        Button nextButton = (Button) findViewById(R.id.next_button);
        nextButton.setText("Show Value");
        nextButton.setOnClickListener(new OnClickListener() {

            public void onClick(View v) {
                get_file_name();

            }
        });

    }

    private void get_file_name() {
        Toast.makeText(this, set_paramater(), Toast.LENGTH_SHORT).show();

    }

    public String set_paramater() {
        SharedPreferences sharedPreferences = getSharedPreferences(
                "myPreffFile", MODE_PRIVATE);

        String strSaveddata = sharedPreferences.getString("APP_NAME", "");
        return strSaveddata;
    }
} 
```

注意：它是完全测试代码。我运行这个..如果仍然出现错误，那么故障就在其他地方。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-30T02:37:15.903

`Activity.getPreferences()`检索一个`SharedPreferences`对象以访问此活动私有的首选项，这意味着在两个活动中您获得了不同的`SharedPreferences`.

您可以使用`Context.getSharedPreferences()`相同的名称来获得相同的`SharedPreferences`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-30T03:34:52.150

不是您的问题的答案，而只是一些信息。您可以通过扩展 Android Application 类在应用程序的活动之间共享数据。

扩展 Application 类并创建您自己的类。

```
package com.foo.bar;
import android.app.Application;
public class MyApplication extends Application {
    private boolean foo;
    @Override
    public void onCreate() {
        foo = false;
    }
    public void SetFoo(boolean fooValue) {
        foo = fooValue;
    }
    public boolean GetFoo() {
        return foo;
    }
} 
```

您的清单必须设置应用程序类。

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.foo.bar"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion="10"
        android:targetSdkVersion="16"/>

    <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:name=".MyApplication">
        <activity
            android:label="@string/app_name"
            android:name=".MyActivity" >
            <intent-filter >
                <action android:name="android.intent.action.MAIN" />
                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
    </application>
</manifest> 
```

您可以在这样的活动中访问应用程序类实例。

```
MyApplication mApp = (MyApplication)getApplication(); 
```

# dojo - Dojo 构建 profile.layers 与 profile.dependencies.layers？

> ID：13638161
> 
> 赞同：6
> 
> 时间：2012-11-30T02:27:24.717
> 
> 标签：dojo, build-process, dojo-build

哇，这完全令人困惑，dojo 1.8 文档似乎是围绕构建层的完整 clusterf**k。有人知道那里发生了什么吗？

在构建脚本示例配置文件中，示例 amd.profile.js 具有**profile.layers["dojo/dojo"]**并且[教程](https://dojotoolkit.org/documentation/tutorials/1.8/build/)遵循相同的语法。

除了教程之外，在 1.8[构建文档](http://dojotoolkit.org/reference-guide/1.8/build/)中没有提到这种结构，而是**profile.dependencies.layers[n]**。

该文档还引用了非 AMD 语法，并且为了增加另一个混淆“层”，还有一个**profile.dependencies.layers[n].dependencies**。

我应该使用哪个？这实际上是否以任何一致性或清晰性记录在任何地方？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-30T21:23:17.383

我了解到 Dojo 1.8 参考指南包含有关构建配置文件的过时信息，但 Dojo 1.8 构建教程是最新的：

[http://dojotoolkit.org/documentation/tutorials/1.8/build/](http://dojotoolkit.org/documentation/tutorials/1.8/build/)

该教程推荐此博客文章以获取有关图层和构建优化的更多信息：[http ://www.sitepen.com/blog/2012/06/11/dgrid-and-dojo-nano-build/](http://www.sitepen.com/blog/2012/06/11/dgrid-and-dojo-nano-build/)

# mysql - 更改默认值

> ID：13638164
> 
> 赞同：1
> 
> 时间：2012-11-30T02:27:43.350
> 
> 标签：mysql

好的，让我改写一下。这就是我的桌子的描述。

```
 mysql> describe department;
+---------+-------------+------+-----+---------+-------+
| Field   | Type        | Null | Key | Default | Extra |
+---------+-------------+------+-----+---------+-------+
| dnumber | int(1)      | NO   | PRI | NULL    |       |
| dname   | varchar(15) | YES  |     | NULL    |       |
| mgrssn  | varchar(9)  | YES  |     | NULL    |       |
+---------+-------------+------+-----+---------+-------+
3 rows in set (0.00 sec) 
```

这就是我需要将我的表描述为：

```
+--------------+-------------+------+-----+---------+
| Field        | Type        | Null | Key | Default |
+--------------+-------------+------+-----+---------+
| dnumber      | int(1)      | NO   | PRI | NOT NULL|
| dname        | varchar(15) | YES  |     | NULL    |
| mgrssn       | varchar(9) | YES  |     | NULL    |
+--------------+-------------+------+-----+---------+ 
```

如何更改 dnumber 的默认值以使其不为空？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T03:27:52.857

因为`dnumber`是`department`表的主键，所以*不能*有空值。

那么，如果你真的尝试插入以下内容会发生什么？

```
INSERT INTO department(dname, mgrssn) VALUES ("test", "123456789"); 
```

您希望插入失败并出现错误。但是不，它成功了，（尽管有警告）：

```
mysql> INSERT INTO department(dname, mgrssn) VALUES ("test", "123456789");
Query OK, 1 row affected, 1 warning (0.04 sec) 
```

刚才发生了什么？好吧，事实证明这是 MySQL 的[许多陷阱](http://sql-info.de/mysql/gotchas.html#1_1)之一，其中“ *NULL is NOT NULL* ”。今天的 MySQL 手册[说的几乎一样](http://dev.mysql.com/doc/refman/5.5/en/create-table.html#id913518)：

> 如果列定义不包含显式 DEFAULT 值，MySQL 将按照[第 11.5 节“数据类型默认值”</a> 中所述确定默认值。](http://dev.mysql.com/doc/refman/5.5/en/data-type-defaults.html)
> 
> [](http://dev.mysql.com/doc/refman/5.5/en/data-type-defaults.html)

 [那么，到底插入了什么？让我们来看看：

```
mysql> select * from department;
+---------+-------+-----------+
| dnumber | dname | mgrssn    |
+---------+-------+-----------+
|       0 | test  | 123456789 |
+---------+-------+-----------+
1 row in set (0.00 sec) 
```

这里发生的事情是，MySQL 采用了隐式尝试插入的插入语句，`NULL`并`dnumber`悄悄地将其转换为默认值`INT`或 0。](http://dev.mysql.com/doc/refman/5.5/en/data-type-defaults.html) 

[还有一个](http://dev.mysql.com/doc/refman/5.5/en/data-type-defaults.html)[非常好的视频](http://www.youtube.com/watch?v=1PoFIohBSM4)，更详细地描述了 MySQL 所做的这些和其他奇怪的事情（与[PostgreSQL](http://www.postgresql.org/)相比）。

最后，让我再补充一条建议——因为它是主键，所以创建`dnumber`一个自增列是一个非常好的做法，如下所示：

```
mysql> ALTER TABLE department MODIFY dnumber int(1) AUTO_INCREMENT;
Query OK, 1 row affected (0.27 sec)
Records: 1  Duplicates: 0  Warnings: 0

mysql> desc department;
+---------+-------------+------+-----+---------+----------------+
| Field   | Type        | Null | Key | Default | Extra          |
+---------+-------------+------+-----+---------+----------------+
| dnumber | int(1)      | NO   | PRI | NULL    | auto_increment |
| dname   | varchar(15) | YES  |     | NULL    |                |
| mgrssn  | varchar(9)  | YES  |     | NULL    |                |
+---------+-------------+------+-----+---------+----------------+
3 rows in set (0.00 sec) 
```

这样，未来的插入`department`不会总是尝试插入另一个 0 来`dnumber`导致重复键错误，而是会使用下一个最低的可用整数值，例如 1，然后是 2，然后是 3，等等。

希望这可以帮助！

# php - 获取参数 PHP 的 if 或 Switch

> ID：13638167
> 
> 赞同：0
> 
> 时间：2012-11-30T02:27:50.980
> 
> 标签：php

我有很多`php`文件。

要访问每个`php`我正在使用的参数。

示例 : `index.php?route=changepassword`, `index.php?route=aboutus`, 等

我必须`route.php`将参数链接到正确的文件

它更好地使用

`If-Else statement`

```
$route = $_GET['route'];
if ($route==changepassword) {
   //statement
} else if ($route==aboutus) {
   //statement
} 
```

的使用`switch-case`？

```
$route = $_GET['route'];
switch ($route) {
case "changepassword" :
   //statement
   break;
case "aboutus" :
   //statement
   break;
} 
```

这只是2个文件，我有10多个文件，用什么更好？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-30T02:38:05.757

您应该尽可能使用数组映射：

```
$map = array(
    "changepassword" => "includes/changepw.php",
    "aboutus" => "templ/aboutus.php",
); 
```

在那种简单的情况下（您没有详细说明您的`//statements`），您可以将它们用作：

```
incude( $map[$_GET["route"]] ); 
```

通常，您可以将它们映射到类或回调或匿名函数上。

但最后，地图更简洁，更易于维护。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-30T02:34:50.490

对于这些情况，如果使用任何一种解决方案都可以获得任何性能，请在性能之前先确保代码清晰。

我肯定会去`switch-case`。

请参阅具有类似答案的[其他线程。](https://stackoverflow.com/questions/3399755/if-versus-switch)

# c# - 如何在多行文本框中保留格式

> ID：13638169
> 
> 赞同：1
> 
> 时间：2012-11-30T02:28:08.180
> 
> 标签：c#, asp.net

我有一个网站，我在运行时根据一些选择创建一个多行文本框，例如，它们指定行数和宽度，然后我创建文本框并将其放在下一页的面板中。我的问题是他们想在文本框中写这样的东西：

```
 Company Name
   123 Test Avenue
   New York, NY 10001 
```

我想保留格式，我的意思是将下一行保留为一个块，现在如果他们在文本框中输入它，它将显示如下：

```
Company Name 123 Test Avenue New York, NY 10001 
```

有没有办法用`<asp:TextBox/>`多线做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T03:17:38.600

您需要使用[ckeditor 之](http://ckeditor.com/download)类的控件。（[asp.net 的富文本编辑器](http://www.google.com.au/search?hl=en&tbo=d&q=free%20asp.net%20rich%20text%20editor&oq=free%20asp.net%20rich%20text%20editor&gs_l=serp.3..0j0i30j0i8j0i8i30l6j0i22.5934.7477.0.7754.9.7.2.0.0.0.265.1210.1j2j4.7.0.les;..0.0...1c.1.FaZb_kFN7IQ)）

TextArea (asp:textbox with mode="multiline") 不保存格式，在您的情况下是`<br/>`

要将富文本持久化到数据库中，您需要提前考虑可能存在的问题。

[如何在 Sql Server 中保存 HTML 数据](https://stackoverflow.com/questions/3490648/how-to-save-html-data-in-sql-server)

[如何将html保存到数据库字段](https://stackoverflow.com/questions/2914464/how-to-save-html-to-a-database-field)

[http://forums.asp.net/t/1669475.aspx/1](http://forums.asp.net/t/1669475.aspx/1)

# c - 在 C 源代码中使用 linux 命令

> ID：13638171
> 
> 赞同：2
> 
> 时间：2012-11-30T02:28:14.817
> 
> 标签：c, linux

我想在 C 源代码中使用 Linux 命令。

我可以使用该`System()`功能吗？这在Linux上可能吗？

如果我不能使用 System() 函数，我该怎么办？我想“tar xvf example.tar”。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-30T02:33:53.637

您可以使用`system()`和`exec()`功能

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-30T03:37:29.573

If you just want to execute shell command and not looking for any return value then you can use system() function call.

Using system call is not advisable (see system man page). I would recommend you using exec() which should be invoked in child process after doing fork().

The next alternative can be using popen().

```
 piff = (FILE *)popen("ls -l", "r");
    if (piff == (FILE *)0)
            return (-1);
    while ((i = read(fileno(piff), buff, sizeof (buf))) == -1) {
    if (errno != EINTR) {
        break;
    }
    (void)pclose(piff); 
```

# javascript - 在 Opera 和 Safari 中捕获“不允许加载本地资源”错误

> ID：13638172
> 
> 赞同：2
> 
> 时间：2012-11-30T02:28:24.507
> 
> 标签：javascript, filesystems, onerror

我使用以下 Ecmascript 来确定是否允许访问本地文件系统：

```
var intranetImg = new Image();
intranetImg.onerror = function(){
    //overide the onclick event for all appropriate links to display:
    alert("please right click & copy link location into your address bar")
}
intranetImg.src = "file://localServer/a/b/testimg.gif" 
```

在 ie 6+、chrome 和 firefox 中运行良好

我在 safari 和 chrome 的控制台中收到“不允许加载本地资源”错误（即正是我想知道的），但 onerror 事件没有触发，并且围绕 src 的分配出现了 try/catch 块属性也没有捕捉到任何东西。

关于解决方法的任何想法 +/- Safari 和 Opera 浏览器控制台出现错误的地方。

谢谢

# python - 将字符串从 C 传递给 Python，Python 服务器将其视为什么？

> ID：13638176
> 
> 赞同：3
> 
> 时间：2012-11-30T02:28:39.877
> 
> 标签：python, c, client-server, python-server-pages

> **可能重复：**
> [如何让 python 服务器将 recvline 转换为字符串？](https://stackoverflow.com/questions/13634821/how-to-get-a-python-server-to-convert-recvline-to-a-string)

我可以轻松地从我的 C 客户端与我的 python 服务器进行通信。服务器可以打印我的客户端发送的内容，但由于某种原因没有将数据类型视为字符串？为什么是这样？

# java - Java swing - 如何设置指定树节点可编辑而不是整个树

> ID：13638178
> 
> 赞同：1
> 
> 时间：2012-11-30T02:29:03.750
> 
> 标签：java, swing, jtree

我需要一个只有叶节点可以编辑的 JTree。但我不知道如何进行自定义设置。有没有人可以帮忙？谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-30T03:44:38.950

You can override the [`isCellEditable()`](https://docs.oracle.com/javase/8/docs/api/javax/swing/tree/DefaultTreeCellEditor.html#isCellEditable-java.util.EventObject-) method of [`DefaultTreeCellEditor`](https://docs.oracle.com/javase/8/docs/api/javax/swing/tree/DefaultTreeCellEditor.html) in a way that limits editing to leaf nodes, as shown in this [example](https://stackoverflow.com/a/11113648/230513).

```
@Override
public boolean isCellEditable(EventObject e) {
    return super.isCellEditable(e)
        && ((TreeNode) lastPath.getLastPathComponent()).isLeaf();
} 
```

# ruby-on-rails - 从 Rails 的主页搜索

> ID：13638179
> 
> 赞同：1
> 
> 时间：2012-11-30T02:29:24.727
> 
> 标签：ruby-on-rails, search, redirect, rails-routing

我正在开发我的第一个 Web 和 Rails 应用程序，但不知道如何从我的主页中获取搜索功能到其中一个控制器。

如何发送请求并重定向到结果页面以显示搜索结果。我无法让它工作，因为我不确定如何以我的变量@histories 将保留结果并显示在显示页面上的方式进行路由。

我希望能深入了解任何页面的搜索并在专用页面上显示结果。

这是我到目前为止在控制器、模型和部分方面的内容。

# 出货型号：

```
def self.search(search)
    search_condition = search
    find_by_sql("SELECT cargo_transit_histories.current_location,cargo_transit_histories.updated_at     FROM cargo_transit_histories
INNER JOIN shipments ON shipments.id = cargo_transit_histories.shipment_id WHERE  shipments.tracking_number='search_condition'")
end 
```

# 跟踪控制器：

```
def search
  @histories = Shipment.search(params[:search])
  render('show')
end 
```

# 显示（在跟踪视图中找到）：

```
<div class="search_result">
<%= render 'track/search_results' %>
</div> 
```

# _search（部分）：

```
<%= form_tag :controller => 'tracking', :action => 'search', :method => 'get' do %>
  <%= text_field_tag :search, params[:search], :id => 'search_field' %>
  <%= submit_tag "Search", :name => nil %> 
  <%= link_to_function "Clear", "$('search_field').clear()" %>
<% end %> 
```

# _search_results（部分）：

```
<div class="Results list">

  <table class="Resultslisting" summary="Result list">
  <tr class="header">
  <th>Current Location</th>
  <th>Date/Time</th>
  </tr>
<% if !@histories.empty? %>
  <% @histories.each do |result| %>
  <tr>
  <td><%= result.current_location %></td>
  <td><%= result.updated_at %></td>
  </tr>
  <% end %>
  </table>
<% else %>
   <p> The tracking number does not exist!</p>
<% end %>

</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T04:07:45.717

尝试类似以下改编示例：

[https://gist.github.com/4173716](https://gist.github.com/4173716)

但是您需要更深入地研究 Rails 3 以了解原因。

# linux - 新贵导致两个过程 - 为什么？

> ID：13638182
> 
> 赞同：0
> 
> 时间：2012-11-30T02:29:42.060
> 
> 标签：linux, bash, upstart

我正在使用 upstart 启动使用 NVM（节点版本管理器）的 NodeJS 进程。

暴发户命令是这样的：

```
description "Service to start node app"
author "Barry Steyn"

setuid devuser
setgid devuser

env DIR=/home/devuser/nodejs/authentication

script
    chdir $DIR
    exec bash -c 'source /home/devuser/nvm/nvm.sh && node app'
end script

respawn 
```

这可以很好地启动节点，但是当我执行 a 时`ps wax | grep node`，我得到了这两个过程：

```
 4284 ?        Ss     0:00 bash -c source /home/devuser/nvm/nvm.sh && node app
 4316 ?        Sl     1:09 node app 
```

为什么我得到两个进程？无论如何，这是否效率较低？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T05:04:42.087

第一个进程是启动 node.js 的 bash 实例。第二个进程是实际的 node.js 进程。

bash 进程正在使用一些资源（主要是内存），但只是在等待 node.js 退出。

我相信你可以通过这样做摆脱额外的 bash：

代替：

exec bash -c 'source /home/devuser/nvm/nvm.sh && 节点应用程序'

和：

exec bash -c 'source /home/devuser/nvm/nvm.sh && **exec** node app'

这让 bash 进程执行 node.js，而无需先使用 fork。大多数情况下，这意味着它不会等待 node.js 退出。

# objective-c - ios - reloadData 表格视图和核心数据

> ID：13638186
> 
> 赞同：0
> 
> 时间：2012-11-30T02:30:16.100
> 
> 标签：objective-c, ios, uitableview, core-data

我在重新加载在 UIViewController 中设置的 tableView 时遇到了一些麻烦。

*   它填充了CoreData（这有效）
*   它还有一个用于某些设计目的的自定义 TableViewCell

现在通常我会使用的是：`[_mainTableView reloadData];`

这次不行。

这是因为自定义 Cell 还是 Core Data 的 FetchRequest 最初加载良好并在我重新启动应用程序时显示数据？

我已经看过一些关于 SO 和 Google 的问题和教程，但它们似乎都不适用于我的情况。

我也探索了这些方法：

```
- (void)controllerWillChangeContent:(NSFetchedResultsController *)controller
{
    [self.tableView beginUpdates];
}

- (void)controllerDidChangeContent:(NSFetchedResultsController *)controller
{
    [self.tableView endUpdates];
} 
```

在这里找到：[beignUpdates](https://stackoverflow.com/a/8678450/892628)

任何建议表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T04:07:56.597

你有没有合成你的表格视图？请试试这个：

[self.mainTableView reloadData];

希望，它会工作。而且，由于您在 viewWillAppear 重新加载它，请确保它既不会分配新时间，也不会再次分配委托/数据源，如果是，那么第一次做这样的事情：

_mainTableView.delegate = nil; _mainTableView.delegate = self;//同理，对于数据源...

而且，您需要显式调用您的 viewWillAppear（我想您已经在这样做了。）

如有任何疑问，请告诉我。

谢谢。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T04:17:13.853

谢谢你的输入，我终于把它整理好了。

`[_mainTableView reloadData]`我不得不再次调用 fetchmethod而不是调用。

```
 if (_managedObjectContext == nil)
{
    _managedObjectContext = [(AppDelegate *)[[UIApplication sharedApplication] delegate] managedObjectContext];
    NSLog(@"After _managedObjectContext: %@", _managedObjectContext);
}

[self setupFetchedResultsController]; 
```

# javascript - 强调 点击 MAXIMAGE2

> ID：13638189
> 
> 赞同：0
> 
> 时间：2012-11-30T02:30:33.070
> 
> 标签：javascript, jquery, html-lists, highlight

我是 jquery 问题中的一个非常非常的菜鸟，我正在使用 maximage 插件开发一个网站，似乎每一个都可以完美地工作，但我不知道如何突出显示

*   链接什么时候点击它，对不起我糟糕的英语。

    这是我正在开发的网站。 [http://aranasoluciones.com/azulejera/ejemplo-ok.html](http://aranasoluciones.com/azulejera/ejemplo-ok.html)

    还有js

    ```
    <script type="text/javascript" charset="utf-8">
    $(function(){
    $('#maximage').maximage({
    cycleOptions: {
    fx: 'fade',
    speed: 3000, // Has to match the speed for CSS transitions in jQuery.maximage.css (lines 30 - 33)
    timeout: 0,
                        prev: '#arrow_left',
                        next: '#arrow_right',

                        },

                    onFirstImageLoaded: function(){
                        jQuery('#cycle-loader').hide();
                        jQuery('#maximage').fadeIn(1500);
                        jQuery('.in-slide-content').delay(1200).fadeIn('slow');

                    }
                }); 
            });
        $('.toggle').bind('click', function(e){e.preventDefault();
        $('#maximage').cycle('toggle');

    });

    $("#2").click(function(e) {
        $('#maximage').cycle(1); 
        return false; 
    });

     $("#1").click(function(e) {
        $('#maximage').cycle(0); 
        return false; 
    });

     $("#3").click(function(e) {
        $('#maximage').cycle(2); 
        return false; 
    });

        </script> 
    ```

    请帮忙！！！！！我会非常感谢！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T02:45:08.353

如果我使用代码

```
$("#maximage").cycle(1);

$("#maximage").cycle(2); 
```

在您使用萤火虫指定的网站中明确指定图像正在更改。请检查是否定义了id为“#1”、“#2”的按钮以及为其定义的事件是否正确，点击事件的定义应在$(function(){})中定义；或准备好文件。请检查以下代码。

```
<script type="text/javascript" charset="utf-8">
$(function(){
$('#maximage').maximage({
cycleOptions: {
fx: 'fade',
speed: 3000, // HastomatchthespeedforCSStransitionsinjQuery.maximage.css(lines 30 - 33)
timeout: 0,
                prev: '#arrow_left',
                next: '#arrow_right',

                },

            onFirstImageLoaded: function(){
                jQuery('#cycle-loader').hide();
                jQuery('#maximage').fadeIn(1500);
                jQuery('.in-slide-content').delay(1200).fadeIn('slow');

            }
        }); 
    });
$('.toggle').bind('click', function(e){e.preventDefault();
$('#maximage').cycle('toggle');
$("#2").click(function(e) {
$('#maximage').cycle(1); 
return false; 
});
$("#1").click(function(e) {
$('#maximage').cycle(0); 
return false; 
});
$("#3").click(function(e) {
$('#maximage').cycle(2); 
return false; 
});
});
</script> 
```

谢谢

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T02:46:33.000

这会做你需要的：

```
$("#nav li a").click(function () {
    $("#nav li a").removeClass("selected"); // OR $("#nav li a").css("background-color");
    this.addClass("selected"); // OR $("#nav li a").css("background-color","#0070ba");
}); 
```

但是，建议您将导航链接更改`id`为更有意义的内容（而不是`#1 #2 #3`）`#nav1 #nav2 #nav3`。

# xcode - 我如何知道我的 XCode 输出来自哪里？

> ID：13638192
> 
> 赞同：0
> 
> 时间：2012-11-30T02:30:47.593
> 
> 标签：xcode

例如，在我的控制台中，我有如下输出：

```
2012-11-29 21:25:40.696 Program[31053:707] -[Staff Shifts]: unrecognized selector sent to instance 0x107d6fdd0
2012-11-29 21:25:40.697 Program[31053:707] Exception detected while handling key input. 
```

我想知道是否有一种简单的方法可以找出这是从哪里来的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T02:45:02.073

调试控制台只能告诉你这么多。根据错误，您正在尝试访问该类`Staff`的实例无法识别的类中的选择器（可能）。

但是，您可以使用这些信息在该类中设置断点并单步执行方法，直到异常再次发生。然后，您可以在该方法处设置断点并单步执行，直到找到问题为止。

您还可以`gdb po`在运行时使用来检查 nil/unexpected 对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T02:35:17.297

这`[Staff Shifts]`可能表明`[Staff Shifts]`您的代码中有一个导致错误的类。An`unrecognized selector`表示您具有以下条件：

```
selector: @selector(FunctionName:) 
```

但是该功能`FunctionName:`不存在...

# java - eclipse 重绘编辑器屏幕 (~= vi ctrl-L)

> ID：13638194
> 
> 赞同：2
> 
> 时间：2012-11-30T02:31:09.513
> 
> 标签：java, eclipse, editor

我的 Eclipse 经常显示黄色弹出窗口，其中包含有关代码的参考信息（比我关心的更频繁）。不幸的是，有时在我移动鼠标后，部分弹出窗口仍保留在屏幕上。

当前的解决方法是将代码（和弹出窗口保留）向上滚动出屏幕，然后向下滚动。 **eclipse 中是否有命令/键序列强制屏幕重绘/刷新？** vi（或 ViM）中的等价物是`ctrl-L`键序列。

开发环境为GNU/Linux（Debian stable）工作站| eclipse 版本：Indigo Service Release 2 Build id：20120216-1857 | java版本“1.7.0_05”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T02:41:10.083

我也遇到过这个问题。我能够清除弹出窗口的唯一方法是使用向上或向下箭头键将光标移动到受影响的行中。这会导致逐行刷新。

# javascript - iPhone 不一致地执行 javascript

> ID：13638195
> 
> 赞同：1
> 
> 时间：2012-11-30T02:31:46.110
> 
> 标签：javascript, iphone, ios

我有以下链接：

```
<a href='external-url' class='track' data-type='event' data-category='category'>
   Link
</a> 
```

单击链接时，将执行以下函数：

```
$('a.track').on('click', function(e){
   e.preventDefault();

   var type     = $(this).data("type");
   var category = $(this).data("category");

   track(type, category);
   window.location = $(this).attr("href");
}); 
```

track 函数通过 ajax 发布数据并将其存储在数据库中。在桌面浏览器上，这完全有效。在 Android 上，这也完全有效。

在 iPhone 上，我看到它*不能*工作大约 10 次（链接将我带到外部站点而不添加到数据库），然后它会神奇地开始工作大约 10 次！任何人都可以确定问题可能是什么，无论是在我的代码中还是在我忽略的 iOS 中？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-30T02:44:10.580

这可能`track()`是一个异步操作。

在其他浏览器中，也许它足够快（而且你很幸运）它在`window.location`执行之前完成了所有任务。但是，这种行为很奇怪。

但是，在 iPhone 上，`track()`可能执行太慢以至于执行`window.location`已经取消操作，因为页面正在退出到另一个页面。这是异步操作的正确行为。它也应该在所有浏览器上都具有相同的作用。

而不是这个顺序代码，尝试使用回调。你传入一个函数，一旦 track 完成它的工作就会执行：

```
function track(type,category,callback){
    //track operations up here and your ajax setup
    //execute callback when ajax operation replies
    if(ajaxStatus === 200){
        callback();
    }
}

//using track, we pass in parameters and the callback
//which when executed, runs the code inside it
track(type,category,function(){
    window.location  = ...;
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-30T02:43:53.190

你有一个竞争条件。您必须希望请求能够实现。

当页面退出时，它会终止打开的请求。我很惊讶它可以在桌面浏览器上运行，它们应该有同样的问题。将它放在网络速度较慢的远程服务器上，我打赌他们不会成功。

在过去，很容易让它与 while 循环一起工作，但 chrome/firefox 杀死了它。

如果是外部站点，请在新窗口中打开它。保持您的网站开放。

# pushdown-automaton - 如何跟踪下推自动机的字符串索引？

> ID：13638201
> 
> 赞同：0
> 
> 时间：2012-11-30T02:33:04.737
> 
> 标签：pushdown-automaton

我必须构建这个 PDA，但我对如何跟踪字符串索引 xi 和 yi 感到困惑？提前致谢

> > 构造一个接受 { x#y | 的 PDA x, y in {0, 1}* 使得 x ≠ y 和 xi = yi 对于某些 i, 1 ≤ i ≤ min(|x|, |y|) }。

# jquery - 基于body类的jquery改变表单动作

> ID：13638202
> 
> 赞同：1
> 
> 时间：2012-11-30T02:33:43.823
> 
> 标签：jquery, forms

我正在尝试设置我的表单，以便动作会根据身体类别而改变。

表格设置 -

```
<form action="basicURL" method="post" id="quoteForm"> 
```

jQuery设置 -

```
if ($('body').hasClass('hosting')) {
$('#quoteForm').attr('action', 'hostingURL');
} 
```

我所看到的一切似乎都表明它应该可以工作，但事实并非如此。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T02:40:04.580

您的代码确实有效。

您需要将您的 JQuery 包装在一个准备好的函数中，以确保它在您的页面绘制后加载。

```
$('document').ready(function () {
    if ($('body').hasClass('hosting')) {
        $('#quoteForm').attr('action', 'hostingURL');
    }
}); 
```

这是一个工作[小提琴](http://jsfiddle.net/27sAD/)

# bash - BASH - 如何自动完成位、KB、MB、GB

> ID：13638203
> 
> 赞同：-2
> 
> 时间：2012-11-30T02:33:50.093
> 
> 标签：bash

我总是咬人 (4521564 b)

```
if the result is > 1 YB - print result in YB
if the result is > 1 ZB and < 1 YB - print result in ZB
if the result is > 1 EB and < 1 ZB - print result in EB
if the result is > 1 PB and < 1 EB - print result in PB
if the result is > 1 TB and < 1 PB - print result in TB
if the result is > 1 GB and < 1 TB - print result in GB
if the result is > 1 MB and < 1 GB - print result in MB
if the result is > 1 KB and < 1 MB - print result in KB 
```

不知道可以计算它的 bash 吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-30T04:59:13.617

使用 awk：

f.awk 内容：

```
$ cat f.awk
function calc(num,i)
{
        if (num>=1024)
            calc(num/1024,i+1);
        else
           printf "%.2f %s\n", num,a[i+1];
}

BEGIN{
        split("b KB MB GB TB PB EB ZB YB",a);
        calc(val,0)
} 
```

像这样运行上面的 awk 程序：

```
$ awk -v val=4521564  -f f.awk
4.31 MB 
```

这里使用的逻辑是不断将数字除以 1024，直到原始数字变得小于 1024。并且在每次除法期间增加一个计数。计数最终映射到单位以获得适当的单位。函数 calc 被递归调用。

例如：I/p：1000bytes：在这种情况下，因为没有。小于 1024，不进行除法，计数器为 0。计数器映射到字节索引。

I/p : 2050 : 除以 1024 并且计数加 1。除法后，由于没有。小于 1024，则以计数器指向的单位打印，在本例中为 Kb。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-30T05:44:26.600

shell 在没有帮助器的情况下不做浮点运算，所以这个 shell 函数会舍入

```
byteme(){
v=$1
i=0
s=" KMGTPEZY"
while [ $v -gt 1024 ]; do
    i=$((i+1))
    v=$((v/1024))
done
echo $v${s:$i:1}b
}

byteme 1234567890
1Gb 
```

# xml - XML 与 XML 模式与 XML 有何不同？

> ID：13638209
> 
> 赞同：-1
> 
> 时间：2012-11-30T02:35:08.060
> 
> 标签：xml

XML 与 XML 模式有何不同？

我读了维基百科，但我仍然不清楚。“XML 模式是对一种 XML 文档类型的描述，通常以对该类型文档的结构和内容的约束来表示，超出 XML 本身所施加的基本句法约束。”

[http://en.wikipedia.org/wiki/XML_schema](http://en.wikipedia.org/wiki/XML_schema)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-30T02:44:03.933

`XML Schema`就像规则或约束或语法一样，用于描述`XML`文档中应该使用哪些元素，这些元素的结构。`XML schema`是`XML`文档的蓝图。我认为这有点像Java类和Java对象实例之间的区别。

例如，

```
`<xs:element name="Company">`
    <xs:complexType>
        <xs:sequence>
          <xs:element name="name" type="xs:string"/>
          <xs:element name="address" type="xs:string"/>
          <xs:element name="city" type="xs:string"/>
          <xs:element name="country" type="xs:string"/>
       </xs:sequence>
    </xs:complexType>
 </xs:element> 
```

此 XML 模式定义，在 XML 文档中，它只能使用`Company`、`name`、和元素，并且`address`必须是根元素。`city``country``Company`

```
<?xml version="1.0"?>
<Company>
  <name>ABC</name>
  <address>Wall Street</address>
  <city>New York</city>
  <country>USA</country>
</Company> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-30T06:00:31.227

XML 和 XML 模式之间最常见的类比是架构蓝图和实际构造。

我遇到的其他很好的类比和解释是 [http://www.brainbell.com/tutorials/XML/Schemas_And_XML_Data_Modeling.htm](http://www.brainbell.com/tutorials/XML/Schemas_And_XML_Data_Modeling.htm)

希望有帮助

米林德

# java - Jackson 2.1 多态反序列化：如何在 pojo 上填充类型字段？

> ID：13638211
> 
> 赞同：8
> 
> 时间：2012-11-30T02:35:30.373
> 
> 标签：java, jackson

我正在从 REST 服务中提取类别和项目树。类别具有包含类别和/或项目列表的“子”属性。它们的类型在“种类”字段中指定。

Jackson 的多态类型处理非常棒，所有工作都按预期工作，除了一个小问题：“kind”字段本身没有填充。有没有一种简单的方法可以将这些数据放到 pojos 上？我希望不必编写自定义反序列化器。

这是 Category 和 Item 的基类。这两个子类添加了几个标量字段，并且不是很有趣。

```
@JsonIgnoreProperties(ignoreUnknown=true)
@JsonTypeInfo(  
    use = JsonTypeInfo.Id.NAME,  
    include = JsonTypeInfo.As.PROPERTY,  
    property = "kind",
    defaultImpl = EntityBase.Impl.class
    )
@JsonSubTypes({
    @Type(value = Item.class, name = "Item"),  
    @Type(value = Category.class, name = "Category")
    })  
public abstract class EntityBase {
    String title;
    String kind;

    public void setTitle(String title) { this.title = title; }
    public String getTitle() { return title; }

    public void setKind(String kind) { this.kind = kind; }
    public String getKind() { return kind; }

    public static class Impl extends EntityBase {}  
} 
```

我正在使用 ObjectMapper 进行反序列化，如下所示：

```
ObjectMapper mapper = new ObjectMapper();
Category category = mapper.readValue(inputStream, Category.class); 
```

我认为它是如此无关紧要，甚至不值得一个标签，但以防万一，这是在一个 Android 应用程序中。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-30T02:35:30.373

像往常一样，我在发布这个问题之前花了几分钟搜索，以确保我没有错过任何明显的东西。

我不会说它很明显，但我找到了一张带有答案[的已解决的 jira 票。](http://jira.codehaus.org/browse/JACKSON-437)该票在[http://jackson-users.ning.com/](http://jackson-users.ning.com/)上的帖子下的评论中链接，尽管我丢失了该帖子的链接。

**JsonTypeInfo 注释上有一个“可见”属性，它就是这样做的。**

```
@JsonTypeInfo(  
    use = JsonTypeInfo.Id.NAME,  
    include = JsonTypeInfo.As.PROPERTY,  
    property = "kind",
    visible = true,                    // <----- add this
    defaultImpl = EntityBase.Impl.class
    )
public abstract class EntityBase {
    ...
} 
```

事实证明，这记录在 javadocs 中。由于旧 1.5 文档上出色的 SEO，我错过了它（jackson.codehaus.org 和 fastxml.com 之间令人困惑的二分法没有帮助），但现在我已经吸取了教训，我正在查看文档这里： [http](http://wiki.fasterxml.com/JacksonJavaDocs) ://wiki.fasterxml.com/JacksonJavaDocs 。

# asp.net - 如何在 asp.net 中使用军事时间验证

> ID：13638214
> 
> 赞同：-1
> 
> 时间：2012-11-30T02:35:45.803
> 
> 标签：asp.net, regex

我正在尝试验证军事时代。我想接受像 19:25 这样的时间，但不是 1925。我当前的表达式不接受`:`. 我在这里想念什么？

```
([01][0-9])|(2[0-3])[0-5][0-9] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T02:39:26.693

接受不带冒号的时间`(([01][0-9])|(2[0-3]))[0-5][0-9]`：（您缺少一组括号。）

如果您想接受带冒号的时间：`(([01][0-9])|(2[0-3])):[0-5][0-9]`

如果您希望冒号是可选的：`(([01][0-9])|(2[0-3])):?[0-5][0-9]`

# php - 无法弄清楚如何从查询中获得我想要的结果

> ID：13638219
> 
> 赞同：2
> 
> 时间：2012-11-30T02:36:30.557
> 
> 标签：php, mysql

我是数据库和 mysql 的新手。我什至很难确定我面临的问题是什么，而且我真的不知道相关的谷歌搜索会是什么。如果这是一个令人难以置信的智障问题，请原谅我。我有两张桌子`tabs`和`cats`.

`tabs`是这样的：

```
name | order
tab1 | 3
tab2 | 0
tab3 | 1
tab4 | 2 
```

`cats`是这样的：

```
name | tab_name
cat1 | tab3
cat2 | tab3
cat3 | tab1
cat4 | tab1
cat5 | tab1 
```

我猜这是标签与猫的一对多关系。我的问题是如何构造一个只返回不同选项卡名称的查询，每个选项卡名称都有其所有关联的猫？我可以得到所有猫和许多重复标签的结果。或者我只能获得不同的标签，但每个标签只能获得一只猫。也许我应该用我的 php 代码测试重复的选项卡？或者查询标签然后查询每个标签的所有猫？似乎必须有一个更直接的方法。我目前正在使用此查询：

```
SELECT t.name AS tab, c.name AS cat FROM tabs t
LEFT JOIN categories c
ON t.name=c.tab_name
ORDER BY t.order; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-30T02:40:48.100

如果这是您想要的，您可以使用 MySQL[`GROUP_CONCAT()`](http://dev.mysql.com/doc/refman/5.0/en/group-by-functions.html#function_group-concat)生成逗号分隔的列表：`cat`

```
SELECT
  t.name AS tab,
  GROUP_CONCAT(c.name) AS cats
FROM 
  tabs t 
  LEFT JOIN categories c ON t.name = c.tab_name
GROUP BY tab
ORDER BY t.`order`   /* ORDER is a reserved keyword and has to be quoted as `order` */ 
```

这将产生如下输出：

```
tab      cats
------------------------------
Tab1     Cat1,Cat2,Cat3,Cat4
Tab2     Cat4,Cat3,Cat6,Cat7 
```

### 然而，

您拥有的每个产生多行的查询`tab`是一种更传统的处理方式。在您的应用程序代码中，您将遍历这些`tab cat`对并测试`tab`. 如果您使用`GROUP_CONCAT()`上述内容，您还需要`,`在应用程序代码中拆分它。

无论哪种方式，您都无法在 SQL 中逐行获得分层结果 - 您必须`tab`为每一行重复。这就是结果集的二维结构的本质。所以它需要一些应用程序端的处理。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-30T03:08:22.520

SQL 不是最适合分层查询的；但是，您的查询输出非常适合在应用程序内部进行处理：

```
$tabs = array();
while ($row = $stmt->fetch()) {
    $tabs[$row['tab']][] = $row['cat'];
} 
```

如果您还需要不同的类别：

```
 $tabs[$row['tab']][$row['cat']] = $row['cat']; 
```

它生成一个二维数组，其中选项卡作为第一个维度，类别作为第二个维度。

# javascript - 发送一个，拦截和修改，提交重新加载（错误的）页面

> ID：13638220
> 
> 赞同：1
> 
> 时间：2012-11-30T02:36:36.460
> 
> 标签：javascript, forms, submit, greasemonkey, prototype

我在 Firefox 中使用 Greasemonkey 脚本来拦截提交过程，以修改某个 post 变量。我保存旧的提交例程以便稍后调用它并`HTMLFormElement.prototype.submit`用我的拦截（修改）函数覆盖。

我目前面临的问题是某些东西会删除 post 变量`post=Submit`并在修改后调用（旧）提交函数将我带回当前页面。

```
var intercept_complete = false;

window.addEventListener('submit', function (e) {
    e.stopPropagation();
    e.preventDefault();
    interceptor(e);
}, true);

function interceptor_setup() {
    HTMLFormElement.prototype.real_submit = HTMLFormElement.prototype.submit;
    HTMLFormElement.prototype.submit = interceptor;
}

function interceptor(e) {
    var frm = e ? e.target : this;
    if (!interceptor_onsubmit(frm)) {
        return false;
    }

    if (!intercept_complete) {
        ModifyAndPost(frm);
        return false;
    } else {
        HTMLFormElement.prototype.real_submit.apply(frm);
        return true;
    }
}

function interceptor_onsubmit(f) {
    return !f.onsubmit || f.onsubmit();
}

function ModifyAndPost(f) {
    var attrs = new Array('name', 'type', 'value');

    for (var i = 0; i < f.elements.length; i++) {
        for (var a = 0; a < attrs.length; a++) {
            if (attrs[a] == 'name') {
                if (f.elements[i][attrs[a]] == "message") {
                    var current_message = f.elements[i][attrs[a + 2]];
                    if (current_message.indexOf("hello") != -1) {
                        var do_replace = confirm("Detected hello, would you like to replace that with bye?");
                        if (do_replace) {
                            f.elements[i][attrs[a + 2]] = current_message.replace("hello", "bye");
                        }
                    }
                }
            }
        }
    }
    PerformSubmit(f);
}

function PerformSubmit(f) {
    HTMLFormElement.prototype.real_submit.apply(f);
}

interceptor_setup(); 
```

基本上，脚本可以正常工作并成功修改 post 变量，但是在调用`HTMLFormElement.prototype.real_submit.apply(f);`提交修改后的表单时，请求缺少`Post=Submit`变量并且提交失败。

我尝试删除`e.stopPropagation()`，`e.preventDefault()`然后有时它会起作用，但仍然偶尔会删除该帖子变量。

如果有人能在这个问题上为我指出正确的方向，那就太好了。;)

# java - subString 结合for循环的做法

> ID：13638222
> 
> 赞同：0
> 
> 时间：2012-11-30T02:36:39.397
> 
> 标签：java, if-statement, for-loop, substring

我从服务器得到一长串字符串

```
 AS=  String1 ~ String2 ~ String3 ~ 
```

可以确定。“~”代表每条数据的结束。我知道每个String的字数限制最多为22，但我不知道他的实际长度。

所以我使用这段代码来确定每个字符串的值

```
//////////////////////////Use of substring Get every character
String T1=AS.substring(0,1);
String T2=AS.substring(1,2);
             .              
             .              
             .              
String T22=AS.substring(21,22);

 if (T2.equals("~")) {
    DATA=T1;
}

 if (T3.equals("~")) {
    DATA=T1+T2;
}
//Confirm T3 "~" Get DATA = T2 + T1

String LG=LG+DATA.length()+1;
//The second document must be added to the number of words in the document "~"
String TT1=AS.substring(0+LG,1+LG); 
```

确定字符串 100 重复 100 次 我已经制造了 8000 多行代码 有没有更简单的方法可以达到我的要求？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T03:02:54.697

只是一点点帮助你。

```
String[] TKG = new String[GUY.length];

for (int i = 0; i < GUY.length - 1; i++)
{
  TKG[i] = GUY.substring(i, i+1);
} 
```

接着

```
StringBuilder DETA5 = new StringBuilder();

for (int i = 1; i < TKG.length; i++)
{
  if (TKG[i].equals("~"))
  {
    for (int x = 0; x < i; x++)
    {
      DETA5.append(TKG[x]);
    }
  }
}

int D = D + DETA5.length();

String[] TKC = new String[6];

for (int i = 0; i < 6; i++)
{
  TKC[i] = GUY.substring(i+D1, i + 1 + D1);
}

StringBuilder DETA_1_1 = new StringBuilder();

for (int i = 1; i < TKC.length; i++)
{
  if (TKC[i].equals("~"))
  {
    for (int x = 0; x < i; x++)
    {
      DETA_1_1.append(TKC[x]);
    }
  }
} 
```

祝你好运！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-30T02:57:04.760

看起来好像一个简单`String#split(...)`的就可以为您解决问题。你有没有尝试过类似的东西

```
String[] tokens = guy.split("~"); 
```

也许在稍微清理一下边缘字符串之后，你就会得到你想要的。

# silverlight - Silverlight 中的黑屏

> ID：13638227
> 
> 赞同：0
> 
> 时间：2012-11-30T02:37:53.613
> 
> 标签：silverlight, google-chrome, runtime-error

这真的很令人费解，但是我的用户昨天报告了一个错误：弹出了一系列错误消息，并且*bam！*Silverlight 屏幕变黑。这发生在 Chrome 中；我无法复制它（我不知道如何），所以它完全让我......

有没有人遇到过这个问题？有没有办法重现或解决它？非常感谢...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T10:47:36.197

这对我来说也是一个问题。浏览器挂起一秒钟，直到 silverlight 对象崩溃。

对我来说，解决方案是在 Loaded 事件中而不是在构造函数中执行服务器调用和加载逻辑，例如：

```
public MyUserControl()
{
   this.Loaded += new RoutedEventHandler(MyUserControl_Loaded);
   // this.DoAllBuisnessStuff() should not be here.
}

private void MyUserControl_Loaded(object sender, RoutedEventArgs e)
{
   this.DoAllBuisnessStuff();
} 
```

# firefox - 更改由 firefox 创建临时配置文件的默认文件夹

> ID：13638228
> 
> 赞同：1
> 
> 时间：2012-11-30T02:38:00.250
> 
> 标签：firefox, watir, profile, headless

尝试在 Firefox 上无头运行 watir 测试时出现 Errno::ENOSPC 错误。实际上，此错误的原因是我是从非 root 用户登录的，当我运行测试时，它会尝试在“tmp”文件夹中为临时 Firefox 配置文件创建目录。因为它不使用'sudo'，所以它给出了这个错误。

如果我在“tmp”中执行“mkdir xyz”，则会出现“设备中没有空间”错误，与上述相同。

如何更改 webdriver 尝试创建临时配置文件的默认配置文件文件夹（即“/tmp”）？我希望 webdriver 自己创建临时配置文件，但在我可以设置的文件夹中。

我正在使用 Linux、ruby 1.9.2p320、selenium-webdriver 2.26.0 和 watir-webdriver 0.6.1。

感谢你的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-30T17:59:20.923

我相信您必须修补 selenium-webdriver，因为似乎没有内置方法来指定包含临时配置文件的目录。

**背景**

Seleium-webdriver（因此是 watir-webdriver）`directory in \selenium-webdriver-2.26.0\lib\selenium\webdriver\firefox\profile.rb`使用以下方法创建临时 Firefox 配置文件：

```
def layout_on_disk
    profile_dir = @model ? create_tmp_copy(@model) : Dir.mktmpdir("webdriver-profile")
    FileReaper << profile_dir

    install_extensions(profile_dir)
    delete_lock_files(profile_dir)
    delete_extensions_cache(profile_dir)
    update_user_prefs_in(profile_dir)

    profile_dir
end 
```

临时文件夹由以下人员创建：

```
Dir.mktmpdir("webdriver-profile") 
```

这是在[tmpdir 库](http://www.ruby-doc.org/stdlib-1.9.3/libdoc/tmpdir/rdoc/Dir.html)中定义的。对于该`Dir.mktmpdir`方法，第二个可选参数定义父文件夹（即创建临时配置文件的位置）。如果未指定任何值，如在本例中，将在 中创建临时文件夹`Dir.tmpdir`，在您的情况下是“tmp”文件夹。

**解决方案**

要更改创建临时文件夹的位置，您可以修改`layout_on_disk`方法以在对`Dir.mktmpdir`. 它看起来像：

```
require 'watir-webdriver'

module Selenium
module WebDriver
module Firefox
class Profile
    def layout_on_disk

        #In the below line, replace 'your/desired/path' with
        #  the location of where you want the temporary profiles
        profile_dir = @model ?
            create_tmp_copy(@model) : 
            Dir.mktmpdir("webdriver-profile", 'your/desired/path')

        FileReaper << profile_dir

        install_extensions(profile_dir)
        delete_lock_files(profile_dir)
        delete_extensions_cache(profile_dir)
        update_user_prefs_in(profile_dir)

        profile_dir
    end
end
end
end
end

browser = Watir::Browser.new :ff
#=> The temporary directory will be created in 'your/desired/path'. 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-03-18T12:56:20.007

设置环境变量[TMPDIR](http://en.wikipedia.org/wiki/TMPDIR)足以让 ruby​​ 和 selenium 将它们的临时文件写入您想要的位置。

从[http://ruby-doc.org/stdlib-1.9.3/libdoc/tempfile/rdoc/Tempfile.html](http://ruby-doc.org/stdlib-1.9.3/libdoc/tempfile/rdoc/Tempfile.html)：

`Dir.tmpdir‘s return value might come from environment variables (e.g. $TMPDIR).`

所以，如果你在你的 shell 中：

`export TMPDIR="/whatever/you/want/"`

# clojure - 如何在clojure中比较不同的数字类型

> ID：13638231
> 
> 赞同：2
> 
> 时间：2012-11-30T02:38:06.537
> 
> 标签：clojure, bigdecimal

Clojure新手在这里。使用 clojure 1.4.0 REPL；

```
(== 2    2.0)      ; true
(== 2.0  2.0M)     ; true
(== 2    2.0M)     ; false 
```

这不是违反逻辑吗？如果前两个是真的，那么第三个不也是真的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T19:45:34.403

bigDecimals 仅当它们的**值和比例**相同时才被认为是相等的，在这种情况下，它们中的一个比另一个具有更多的有效数字：

```
user> (== 2 (. 2.0M stripTrailingZeros))
true
user> (== 2 2.0M )
false 
```

甚至在大小数之间也会出现一个更荒谬的例子：

```
user> (== 0.000000M 0.0M)
false 
```

我个人认为这在数学意义上是“错误的”，并打开[了这个错误](http://dev.clojure.org/jira/browse/CLJ-1118)，看看是否有兴趣改变它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-30T03:50:27.667

`==`是`type-independent`，试试这个：

```
user=> (== (bigdec 2.0) 2.0M)
true
user=> (type (bigdec 2.0))
java.math.BigDecimal
user=> (type 2.0M)
java.math.BigDecimal 
```

# php - 使用 php 获取带有 URL 的链接的父元素

> ID：13638232
> 
> 赞同：0
> 
> 时间：2012-11-30T02:38:11.640
> 
> 标签：php, parent, href

我正在尝试为断开的链接实施“查找和替换”系统。问题是，对于某些链接，没有替代品。所以，我需要注释掉某些 li 元素。你可以在下面看到我的代码来做到这一点。（我从 HTML 表单开始）。

```
<?php

$brokenlink = $_POST['brokenlink'];
$newlink = $_POST['newlink'];

$brokenlink = '"' . $brokenlink . '"';
$newlink = '"' . $newlink . '"';

$di = new RecursiveDirectoryIterator('hugedirectory');
foreach (new RecursiveIteratorIterator($di) as $filename => $file) {
  //  echo $filename . ' - ' . $file->getSize() . ' bytes <br/>';

    $filetoedit = file_get_contents($file);
    if(strpos($filetoedit, $brokenlink)) {

    echo $brokenlink . "found in " . $filename . "<br/>";
    $filetoedit = str_replace($brokenlink, $newlink, $filetoedit);
    file_put_contents($filename, $filetoedit);

    }

}

?> 
```

我想要完成的是：如果我有一个 URL，我希望能够找到它的 li 父级。[例如，如果用户以 HTML 形式输入http://www.espn.com](http://www.espn.com)，我希望 PHP 能够注释掉下面的代码，我希望 php 在我的服务器上找到这个元素：

```
 <li><a href="http://www.espn.com" target="_blank" data-new="20120627">Sports</a></li> 
```

并将其替换为：

```
 <!-- <li><a href="http://www.espn.com" target="_blank" data-new="20120627">Sports</a></li> --> 
```

这可能吗？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T02:42:29.563

我会尝试使用它来解析 DOM。

[http://simplehtmldom.sourceforge.net/](http://simplehtmldom.sourceforge.net/)

您可以为所有要注释掉的类设置一个类。然后使用此工具查找这些类并立即将它们全部注释掉。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T03:34:02.580

为什么不使用正则表达式来查找和替换链接，它还可以处理可能昂贵的链接循环。这是匹配网址的正则表达式 [http://daringfireball.net/2010/07/improved_regex_for_matching_urls](http://daringfireball.net/2010/07/improved_regex_for_matching_urls)

然后 preg_replace 用新的损坏的，或者用损坏的链接的注释掉的版本替换损坏的

或者，您可以通过 shell_exec 在目录上运行 grep，这样您就不必自己打开/读取和解析文件。

[还可以使用正则表达式](https://stackoverflow.com/questions/3904482/match-url-pattern-in-php-using-regular-expression)查看 php 中的这个匹配 url 模式

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-30T03:50:15.963

我建议您使用文件内容构造[DOMDocument](http://php.net/manual/en/class.domdocument.php)并使用[XPath](http://www.w3schools.com/xpath/xpath_syntax.asp)搜索损坏的链接节点。

```
$dom = new DOMDocument();
@$dom->loadHTML($filetoedit);

$xpath = new DOMXPath($dom);

$nodes = $xpath->query('//li/a[@href="' . $brokenlink . '"]');
for ($i = 0; $i < $nodes->length; $i++) {
    $node = $nodes->item($i);
    // Do whatever you want here
} 
```

# git - git checkout 远程参考

> ID：13638235
> 
> 赞同：17
> 
> 时间：2012-11-30T02:38:40.507
> 
> 标签：git, github

我在 github 上有一个拉取请求列表。我可以像这样获取拉取请求：

```
git fetch origin +refs/pull/*:refs/remotes/origin/pr/* 
```

我得到这样的输出：

```
* [new ref]         refs/pull/1/head -> origin/pr/1/head
* [new ref]         refs/pull/1/merge -> origin/pr/1/merge
* [new ref]         refs/pull/10/head -> origin/pr/10/head
* [new ref]         refs/pull/10/merge -> origin/pr/10/merge
* [new ref]         refs/pull/11/head -> origin/pr/11/head
* [new ref]         refs/pull/11/merge -> origin/pr/11/merge 
```

现在我想检查其中一个裁判。我尝试的任何方法似乎都不起作用：

```
$ git checkout refs/pull/1/head
error: pathspec 'refs/pull/1/head' did not match any file(s) known to git. 
```

或者：

```
git checkout origin/pr/1/head
error: pathspec 'origin/pr/1/head' did not match any file(s) known to git. 
```

如何查看此参考资料？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-11-30T03:37:03.163

The first command (`git checkout refs/pull/1/head`) didn't work because `refs/pull/1/head` is the name of the reference in the remote repository. You don't have a reference with that name in your local repository because your `fetch` refspec translated it to `refs/remotes/origin/pr/1/head`.

The second command (`git checkout origin/pr/1/head`) should have worked, although it should have given you a "detached HEAD" warning. Was there a typo that you fixed when posting your question to Stack Overflow?

Your `fetch` refspec told git to translate the remote references into local references in the `refs/remotes` directory. The references in that directory are treated specially -- they're "remote references" meant to indicate the state of the remote repository the last time you did a `fetch`. Normally you don't want to check those refs out directly -- you want to create a local branch that is configured to "follow" or "track" the remote reference (which enables special convenience shortcuts such as the `@{u}` revision parameter and easier `push`/`pull` usage).

Try:

```
git fetch origin +refs/pull/*:refs/remotes/origin/pr/*
git checkout -b whatever-branch-name-you-want origin/pr/1/head 
```

The above creates a new local branch called `whatever-branch-name-you-want` (I recommend calling it `pr/1/head`) pointing at the same commit as `origin/pr/1/head`, configures `whatever-branch-name-you-want` to track `origin/pr/1/head`, then switches to the new branch.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T02:43:33.183

Check out what's available to checkout with

```
git branch -a 
```

# c# - 如何将 xml 元素名称绑定到 WPF XAML 文件中的 ListView 列

> ID：13638237
> 
> 赞同：0
> 
> 时间：2012-11-30T02:39:23.553
> 
> 标签：c#, wpf, xaml, data-binding, xpath

我有类似于下面示例的 XML 数据，我正在尝试将其绑定到 ListView。我无法绑定元素名称，即示例中的汽车品牌。我从这篇文章[Xaml Support for Local Name in XPath](https://stackoverflow.com/questions/1638694/xaml-support-for-local-name-in-xpath)中发现 xaml 不支持 xpath 函数名称。因此，local-name() 不起作用。但是必须有办法做到这一点......

```
<Window x:Class="WpfApplication4.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="MainWindow"
        Height="350"
        Width="525">
  <Window.Resources>
    <XmlDataProvider x:Key="DataSource">
      <x:XData>
        <Cars xmlns="">
          <Data>
            <Honda Year="2012"
                   Color="Red"
                   Model="Accord" />
            <Subuar Year="2008"
                    Color="Blue"
                    Model="Outback" />
            <Ford Year="2000"
                  Color="Black"
                  Model="Focus" />
          </Data>
        </Cars>
      </x:XData>
    </XmlDataProvider>
  </Window.Resources>
  <ListView ItemsSource="{Binding XPath=Cars/Data/*}"
            DataContext="{StaticResource DataSource}">
    <ListView.View>
      <GridView>
        <GridViewColumn DisplayMemberBinding="{Binding XPath=???}"
                        Header="Brand" />
        <GridViewColumn DisplayMemberBinding="{Binding XPath=@Year}"
                        Header="Year" />
        <GridViewColumn DisplayMemberBinding="{Binding XPath=@Color}"
                        Header="Color" />
        <GridViewColumn DisplayMemberBinding="{Binding XPath=@Model}"
                        Header="Model" />
      </GridView>
    </ListView.View>
  </ListView>
</Window> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T03:02:54.447

我认为您不能绑定到元素名称，需要“name()”或“local-name()”XPath 函数，但 Xaml 不支持它们。您可以解决它，请参阅此 URL：

[XPath 中对 local-name() 的 XAML 支持](https://stackoverflow.com/questions/1638694/xaml-support-for-local-name-in-xpath)

但这确实有效，并且不像 hack-ar 那样丑陋，只需要稍微不同的 XML 输入：

```
<Window.Resources>
    <XmlDataProvider x:Key="DataSource">
        <x:XData>
            <Cars xmlns="">
                <Data>
                    <Car Brand="Honda" Year="2012" Color="Red" Model="Accord"/>
                    <Car Brand="Subuaru" Year="2008" Color="Blue" Model="Outback"/>
                    <Car Brand="Ford" Year="2000" Color="Black" Model="Focus"/>
                </Data>
            </Cars>
        </x:XData>
    </XmlDataProvider>
</Window.Resources>
<ListView ItemsSource="{Binding XPath=Cars/Data/*}" DataContext="{StaticResource DataSource}">
    <ListView.View>
        <GridView>
            <GridViewColumn DisplayMemberBinding="{Binding XPath=@Brand}" Header="Brand"/>
            <GridViewColumn DisplayMemberBinding="{Binding XPath=@Year}" Header="Year"/>
            <GridViewColumn DisplayMemberBinding="{Binding XPath=@Color}" Header="Color"/>
            <GridViewColumn DisplayMemberBinding="{Binding XPath=@Model}" Header="Model"/>
        </GridView>
    </ListView.View>
</ListView> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-30T08:24:56.520

如果你使用正常`Binding.Path`的应该绑定到`DataContext`应该是一个对象的属性，[`XmlElement`](http://msdn.microsoft.com/en-us/library/system.xml.xmlelement.aspx)所以只是尝试`{Binding Name}`。

# vb.net - vb.net从文本文件ReadLine设置自定义类属性，字符串不能转换为字符串数组

> ID：13638243
> 
> 赞同：0
> 
> 时间：2012-11-30T02:40:12.993
> 
> 标签：vb.net, string, class, file-io

我是自定义类的新手。这是我的类定义：

```
Public Class game
    Private strName As String()

    Property name As String()
        Get
            Return strName
        End Get
        Set(ByVal Value As String())
            strName = Value
        End Set
    End Property
End Class 
```

这是我从文件中读取并创建“游戏”实例的代码

```
Public Sub loadGames()
    Dim game As New game

    Dim dir As New IO.DirectoryInfo(gameFolder)
    Dim fs As IO.FileInfo() = dir.GetFiles("*.gemui")
    Dim f As IO.FileInfo
    For Each f In fs
        Dim path As String = f.FullName
        Dim fi As New FileInfo(path)
        Dim sr As StreamReader = fi.OpenText()
        Dim s As String = ""
        While sr.EndOfStream = False
            game.name = sr.ReadLine() '"Value of type 'String' cannot be converted to '1-dimensional array of String'."
            MsgBox(sr.ReadLine()) 'shows a message box with exactly what I expect to see
        End While
        sr.Close()

    Next
End Sub 
```

**game.name = sr.ReadLine()**是问题所在。 *“‘字符串’类型的值不能转换为‘字符串的一维数组’。”*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T02:45:09.963

您的问题是，在您的类定义中，您不是在声明字符串，而是在声明字符串数组。更正的代码是：

```
Public Class game
    Private strName As String

    Property name As String
        Get
            Return strName
        End Get
        Set(ByVal Value As String)
            strName = Value
        End Set
    End Property
End Class 
```

或更简单地在 .net 4.0+ 中

```
Public Class game
    Property name As String
End Class 
```

在这种情况下，私有变量称为 _name

# bash - 带有 bash 的子命令

> ID：13638248
> 
> 赞同：4
> 
> 时间：2012-11-30T02:41:10.673
> 
> 标签：bash, subcommand

是否可以为 bash 脚本实现子命令。我有这样的想法：

[http://docs.python.org/dev/library/argparse.html#sub-commands](http://docs.python.org/dev/library/argparse.html#sub-commands)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-30T04:11:02.467

这是一个简单的不安全技术：

```
#!/bin/bash

clean() {
  echo rm -fR .
  echo Thanks to koola, I let you off this time,
  echo but you really shouldn\'t run random code you download from the net.
}

help() {
  echo Whatever you do, don\'t use clean
}

args() {
  printf "%s" options:
  while getopts a:b:c:d:e:f:g:h:i:j:k:l:m:n:o:p:q:r:s:t:u:v:w:x:y:z: OPTION "$@"; do
    printf " -%s '%s'" $OPTION $OPTARG
  done
  shift $((OPTIND - 1))
  printf "arg: '%s'" "$@"
  echo
}

"$@" 
```

这一切都非常酷，但它并不限制子命令可以是什么。因此，您可能希望将最后一行替换为：

```
if [[ $1 =~ ^(clean|help|args)$ ]]; then
  "$@"
else
  echo "Invalid subcommand $1" >&2
  exit 1
fi 
```

有些系统允许您在子命令之前放置“全局”选项。`getopts`如果需要，您可以在子命令执行之前放置一个循环。记得`shift`在你陷入子命令执行之前；此外，重置`OPTIND`为 1 以便子命令 getopts 不会混淆。

# javascript - 对 JSON 完全一无所知

> ID：13638250
> 
> 赞同：2
> 
> 时间：2012-11-30T02:41:41.333
> 
> 标签：javascript, jquery, json, get

我一直在阅读一些 JSON 教程，结构和语法对我来说很有意义.. 但我正在尝试做一个需要我做 GET 的项目，这似乎暗示我可以用 JSON 做到这一点。

我读过 JSON 和 AJAX 可以很好地比较，所以我认为这是可能的。如果可以指导我阅读有关如何以这种方式使用 JSON 的内容，或者对其进行解释，我将不胜感激。

谢谢

编辑：请重新打开这个......它首先被关闭的事实令人震惊。正在进行一场完全合法的讨论。没有一个关闭它的人会费心添加任何东西。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-30T02:49:15.613

您可能试图*让 JSON*不*使用 JSON*。JSON 只是响应的“格式”（符号），而不是检索方法。

您标记了[javascript](/questions/tagged/javascript "显示标记为“javascript”的问题")但没有标记[jquery](/questions/tagged/jquery "显示标记为“jquery”的问题")（尽管您提到`get`它`AJAX`通常是 jQuery 的[`.get()`](http://api.jquery.com/jQuery.get/)AJAX 调用的同义词。）因为它比普通的 jane JavaScript 简单得多，并且为了简洁起见，下面是一个使用[`.getJSON`](http://api.jquery.com/jQuery.getJSON/).

让我们假设服务器上有一个返回 JSON 数据（位于`/my/service.json`）的方法，其效果如下：

```
{
  "first_name": "Brad",
  "last_name": "Christie"
} 
```

^(注意：这基本上是输出类似于面向对象语言的“帐户”类的内容，具有两个属性：`first_name`&`last_name`但以JSON 格式表示为其他语言（您的 AJAX 查询）可以理解信息*）*)

您可以使用 AJAX 来检索它，如下所示：

```
<script type="text/javascript" src="scripts/jquery.js"></script>
<script type="text/javascript">
  $(document).ready(function(){
    $getJSON('/my/service.json'.function(data){
      alert(data.first_name + ' ' + data.last_name); // shows "Brad Christie"
    });
  });
</script> 
```

* * *

跟进：我看到您对 C++ 有疑问，所以让我们尝试提供一个工作示例。我假设您使用过`struct`，所以假设您有以下内容：

```
struct stockitem {
  int itemid;
  float price;
  string description; // :grin: this example #include <string> ;-)
} mystock;

mystock.itemid = 21;
mystock.price = 20.12;
mystock.description = "This Year"; 
```

如果您要将这些信息发送给某物，您可以用很多不同的方式对其进行序列化。其中一种方法是使用 JSON（可能看起来像这样）：

```
{
  "itemid":21,
  "price":20.12,
  "description":"This Year"
} 
```

现在，另一端真的不会知道它是结构体还是类或其他数据类型，但在 javascript 中它将成为具有类似功能和访问权限的基本对象：

```
var mystock = /*the above JSON */;
alert(mystock + '. ' + mystock.description + ' for $' + mystock.price.toFixed(2));
// above outputs: 21\. This Year for $20.12 
```

而且，最重要的是，您只是使用 JSON 来传输（公证）原始结构。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-30T02:45:59.193

问题是 JSON 数据通常在 HTTP 请求的负载中传输。获取请求没有正文，因此没有 JSON（被传输到服务器）。但是，您可以通过 GET 请求接收 JSON 数据。

POST 没有这个限制，因为数据是在请求的有效负载中发送的。

# java - driver.findElement() 带有 iframe 和没有 ID 的元素

> ID：13638255
> 
> 赞同：1
> 
> 时间：2012-11-30T02:42:33.740
> 
> 标签：java, xpath, selenium, webdriver

Java 代码：

```
driver.switchTo().frame(0);
                WebElement elemText = driver.findElement(By.xpath("/html/body[contains(@class='forum')]"));
                //WebElement elemText = driver.findElement(By.xpath("//td[@id='cke_contents_vB_Editor_001_editor']/textarea"));
                elemText.sendKeys(message);
                elemText.submit();
                forumLink =  driver.getCurrentUrl(); 
```

HTML 代码：

```
<td id="cke_contents_vB_Editor_001_editor" class="cke_contents" style="height:1726px" role="presentation">
<iframe style="width:100%;height:100%" frameborder="0" title="Rich text editor, vB_Editor_001_editor, press ALT 0 for help." src="" tabindex="-1" allowtransparency="true">
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html dir="ltr" lang="en" contenteditable="true">
<head>
<title data-cke-title="Rich text editor, vB_Editor_001_editor, press ALT 0 for help.">Rich text editor, vB_Editor_001_editor, press ALT 0 for help.</title>
<base href="http://fairplay.garena.com/" data-cke-temp="1">
<link type="text/css" rel="stylesheet" href="http://fairplay.garena.com/clientscript/vbulletin_css/style00008l/editor_contents.css">

<style type="text/css" data-cke-temp="1">
form{border: 1px dotted #FF0000;padding: 2px;}

img.cke_hidden{background-image: url(http://fairplay.garena.com/clientscript/ckeditor/plugins/forms/images/hiddenfield.gif?t=B37D54V);background-position: center center;background-repeat: no-repeat;border: 1px solid #a9a9a9;width: 16px !important;height: 16px !important;}
img.cke_iframe{background-image: url(http://fairplay.garena.com/clientscript/ckeditor/plugins/iframe/images/placeholder.png?t=B37D54V);background-position: center center;background-repeat: no-repeat;border: 1px solid #a9a9a9;width: 80px;height: 80px;}
img.cke_anchor{background-image: url(http://fairplay.garena.com/clientscript/ckeplugins/vblink/images/anchor.gif?t=B37D54V);background-position: center center;background-repeat: no-repeat;border: 1px solid #a9a9a9;width: 18px !important;height: 18px !important;}
a.cke_anchor{background-image: url(http://fairplay.garena.com/clientscript/ckeplugins/vblink/images/anchor.gif?t=B37D54V);background-position: left center;background-repeat: no-repeat;border: 1px solid #a9a9a9;padding-left: 18px;}
</style>
</head>
<body class="forum" spellcheck="true">
</body>
</html>
</iframe>
</td> 
```

图片：[http ://s9.postimage.org/nwyvq3san/Screen_Shot038.jpg](http://s9.postimage.org/nwyvq3san/Screen_Shot038.jpg)

我找不到在 iframe 中获取元素且没有 id 的方法。

你能帮助我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T05:01:00.117

```
driver.switchTo().frame(driver.findElementByXpath("//iframe"));
WebElement elemText = driver.findElement(By.xpath("//body[@class='forum')]")); 
```

应该管用。

# python - Python：线程中的异常

> ID：13638257
> 
> 赞同：0
> 
> 时间：2012-11-30T02:42:49.203
> 
> 标签：python, multithreading, ipc

我试图在 python 子进程中执行一个程序：

```
class MiThread(threading.Thread):  
      def __init__(self):  
          threading.Thread.__init__(self)   

      def run(self):
        try:
            from Queue import Queue, Empty
        except ImportError:
    #from queue import Queue, Empty  # python 3.x
            print "error"
        ON_POSIX = 'posix' in sys.builtin_module_names

        def enqueue_output(out, queue):
            for line in iter(out.readline, b''):
                queue.put(line)
            out.close()
        p= Popen(["java -Xmx256m -jar bin/HelloWorld.jar"],cwd=r'/home/karen/sphinx4-1.0beta5-src/sphinx4-1.0beta5/',stdout=PIPE, shell=True, bufsize= 4024)
        q = Queue()
        t = Thread(target=enqueue_output, args=(p.stdout, q))
        print "estoy en el hilo"
        t.daemon = True # thread dies with the program
        t.start()

                print l 
```

但是当我执行线程时它失败并出现以下错误：

```
Exception in thread Thread-1:
Traceback (most recent call last):
  File "/usr/lib/python2.7/threading.py", line 551, in __bootstrap_inner
    self.run()
  File "/usr/lib/python2.7/site-packages/GNS3/Workspace.py", line 65, in run
    t = Thread(target=enqueue_output, args=(p.stdout, q))
NameError: global name 'Thread' is not defined

QObject::connect: Cannot queue arguments of type 'QTextCursor'
(Make sure 'QTextCursor' is registered using qRegisterMetaType().) 
```

我不知道！怎么了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T02:51:31.343

尝试改变：

```
t = Thread(target=enqueue_output, args=(p.stdout, q)) 
```

到：

```
t = threading.Thread(target=enqueue_output, args=(p.stdout, q)) 
```

在您当前的命名空间中，`Thread`作为`threading.Thread`（`threading`模块的成员）存在，因此当您`Thread`单独说时，Python 找不到匹配项并抛出该错误。

# c# - 如何在 C# 中读写智能引号（和其他愚蠢的字符）

> ID：13638258
> 
> 赞同：7
> 
> 时间：2012-11-30T02:42:54.733
> 
> 标签：c#, unicode, encoding, ascii, stringbuilder

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-11-30T12:46:46.147

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-30T03:32:49.330

文本可能是 UTF8。

```
File.ReadAllText(filePath, Encoding.UTF8) 
```

再加上

```
File.WriteAllText(destinationFile, sb.ToString(), Encoding.UTF8) 
```

应该掩盖处理 Unicode 字符。如果你做一个或另一个，你将得到垃圾输出，要么两者都有，要么什么都没有。

# android - Android USB bulktransfer

> ID：13638259
> 
> 赞同：4
> 
> 时间：2012-11-30T02:43:03.977
> 
> 标签：android

I'm developing an Android application using the USB Host API connected to a FT232 USB chip. The FT232 device transmits large amounts of samples (20KBps) to the Android SBC. However, I noticed that occasionally I'm losing some samples. I have a USB analyzer connected to see the communication between the two endpoints. I can see a delay in some of the USB packets.

The FT232 USB packets are 64KB and my thread is repeatedly calling the bulktransfer api to retrieve the next packet and to fill the circular buffer. I have another thread that is reading the data from the circular buffer. Both threads are synchronized when reading and writing to the circular buffer. I'm not sure if the reading thread is blocking too long, which causes the writing thread to the miss some of the packets? Any ideas or suggestions on improving this?

Baud Rate 460800, 8, N, 1

Below is my code snippet.

```
public class UsbClass {

private static final int MAX_BUFFER_SIZE = 512000;
private byte[] circularBuffer = new byte[MAX_BUFFER_SIZE];
private int writeIndex=0;
private int readIndex=0;

ReadUsbThread usbReadThread;
ParseDataThread parseThread;

public UsbClass() {
    super();
      usbReadThread = new ReadUsbThread();
      usbReadThread.start();

      parseThread = new ParseDataThread();
      parseThread.start();
}

// Read data from USB endpoint
public class ReadUsbThread extends Thread {
    public ReadUsbThread() {

    }
    int length;
    byte[] buffer = new byte[64];
    public void run() {
        while(true)
        {
            length = conn.bulkTransfer(epIN, buffer, buffer.length, 100);
            if(length>2)
            {
                writeCircularBuffer(buffer, length);
            }
            else
                Thread.sleep(1);
        }
    }
}

// Parse the data from circular buffer
public class ParseDataThread extends Thread {
    public ParseDataThread() {

    }
    byte[] data;
    public void run() {
        while(true)
        {
            data = readCircularBuffer(1);
            // do something with data
        }
    }
}

// Write to circular buffer
public synchronized void writeCircularBuffer(byte[] buffer, int length)
{
        for(int i = 2; i<length; i++)
        {
            circularBuffer[writeIndex++] = buffer[i];
            if(writeIndex == MAX_BUFFER_SIZE)
                writeIndex=0;
        }
}

// Read from circular buffer
public synchronized byte[] readCircularBuffer(int length)
{
    byte[] buffer = new byte[length];
    for(int i = 0; i<length; i++)
    {

        buffer[i] = circularBuffer[readIndex++];

        if(readIndex == MAX_BUFFER_SIZE)
            readIndex=0;
    }
    return buffer;
} 
```

}

# actionscript-3 - 在 Tree UIComponent FLEX 4.6 中获取所选项目的名称

> ID：13638261
> 
> 赞同：1
> 
> 时间：2012-11-30T02:43:28.620
> 
> 标签：actionscript-3, flash, apache-flex, flex4, flash-builder

这是我使用 FLEX 和 AS 3.0 的第二天，所以我对此很陌生。我正在尝试获取树组件中所选项目的值，在这种情况下它只是一个名称。下面是我创建的树。树的内容已经用一个名为“cat”的数组以编程方式填充。树被填充得很好，但我不知道如何获取当前选定项目的名称。

```
<mx:Tree id="category_tree" x="10" y="80" width="160" height="169" showRoot="true" dataProvider="{cat}" labelField="name"> 
```

我使用了 selectedItem.toString() 函数，但这似乎只返回对象的类型而不是值。目前它返回“对象对象”在我的脚本中我有......

```
category_tree.selectedItem.toString(); 
```

对此的任何帮助将不胜感激。提前感谢您的宝贵时间。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T03:00:52.160

您可以将更改事件添加到树并使用类似于以下内容的回调：

```
 private function changeEvt(event:Event):void {
        var lableData:*;
        var label:String;

        if (event.currentTarget.selectedItem.@data) {
           labelData = event.currentTarget.selectedItem.@data;
        }

        label = event.currentTarget.selectedItem.@label; 
     }
 } 
```

或直接访问该值

```
category_tree.selectedItem.@label; 
```

# c# - Changing single route parameter in ActionLink

> ID：13638263
> 
> 赞同：1
> 
> 时间：2012-11-30T02:43:33.670
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-4

I am trying to implement a language chooser which is visible on all pages.

My application currently has two routes:

```
routes.MapRoute(
    name: "EventDriven",
    url: "{language}/{eventid}/{controller}/{action}/{id}",
    defaults: new { language = "en", controller = "Home", action = "Index", id = UrlParameter.Optional }
);

routes.MapRoute(
    name: "Default",
    url: "{language}/{controller}/{action}/{id}",
    defaults: new { language = "en", controller = "Home", action = "Index", id = UrlParameter.Optional }
); 
```

And in my shared `_layout.cshtml` file I have the following action links:

```
@Html.ActionLink("English", ViewContext.RouteData.Values["action"].ToString(), new {language="en"})
@Html.ActionLink("Français", ViewContext.RouteData.Values["action"].ToString(), new {language="fr"}) 
```

The problem I am encountering is I want the `{eventid}` route segment preserved, but it's not applicable on every url.

On the home index page `http://localhost/MySite/`, the two action links are as follows:

```
English: http://localhost/MySite/
French: http://localhost/MySite/fr 
```

Which is good, but on my interior page `http://localhost/MySite/en/2/Donation` the action links are:

```
English: http://localhost/MySite/en/2/Donation
French: http://localhost/MySite/fr/Donation 
```

If I go to `http://localhost/MySite/fr/2/Donation` then the action links are:

```
English: http://localhost/MySite/en/Donation
French: http://localhost/MySite/fr/2/Donation 
```

The problem is the change language action link does not contain the eventid `2` information.

How do I make it so both links contain the event and language information (and any other route parameters unforeseeable in the future) without having to program explicitly for them?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T12:47:45.430

您最终可能使用的是 Html.RouteLink()

在这种情况下，我会这样称呼它（如果需要多种语言，则更改为数组）：

```
@{
   var enRoute = new RouteValueDictionary(ViewContext.RouteData.Values);
   enRoute["language"] = "en";
   ....
} 
```

（记住新的 RouteValueDictionary()，你不想覆盖现有的）

接着：

```
@Html.RouteLink("English", enRoute) 
```

这有点讨厌，如果不使用视图变量（我不喜欢）你就无法绕过它，但是你可以获得链接的整个路径。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-03-09T20:14:55.693

使用此方法的内联方式：

```
@Html.ActionLink("English", this.ViewContext.RouteData.Values["controller"].ToString(), new RouteValueDictionary(ViewContext.RouteData.Values) {["language"] = "en"}) 
```

# ruby-on-rails - About the use of @ in Rails

> ID：13638264
> 
> 赞同：2
> 
> 时间：2012-11-30T02:43:39.007
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, activerecord

I was reading the book of Dave Thomas, *"Agile Web Development with Rails"*, Fourth Edition. Inside a class named **Cart**, he called an attribute named "line_items" provided by a relationship between the classes **Cart** and **LineItem**.

Inside the method that uses this attribute int the **Cart** class, the attribute is called without the "@" that is used when we invoke the attributes of a instance. Can someone say to me why this work? Because I was expecting that he had used the "@" symbol. The code is shown below:

```
class Cart < ActiveRecord::Base
 has_many :line_items, :dependent => :destroy
 def add_product(product_id)
 #In this line below, I was expecting @lineitems.find_by ..... 
  current_item = line_items.find_by_product_id(product_id)
  if current_item
   current_item.quantity += 1
  else
   current_item = line_items.build(:product_id => product_id)
  end
  current_item
 end 
end 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-30T02:49:00.253

之所以有效，是因为为 --`has_many`创建了一个读取器和写入器方法，`line_items`其方式类似于 using`attr_accessor`为该属性名称创建读取器和写入器方法。它与以下内容非常相似：

```
class Cart
  def line_items
    @line_items
  end

  def line_items=(value)
    @line_items = value
  end
end 
```

Rails 为您创建了许多这样的方法，包括针对您正在使用的模型的数据库的每一列的方法，以及针对所有关联的方法（例如`line_items`这里）。

有关为特定关联添加哪些方法的详细信息，请参阅 Rails 指南中[“Active Record 关联指南”的第 4 章。](http://guides.rubyonrails.org/association_basics.html#detailed-association-reference)

# c# - c#中这两个变量赋值有什么区别？

> ID：13638272
> 
> 赞同：2
> 
> 时间：2012-11-30T02:44:29.710
> 
> 标签：c#, oop, inheritance

这两个任务有什么区别？A 继承自 Base。

```
Base b = new A();
A c = new A(); 
```

如果第二个被声明为 A 型，我不明白为什么会这样。

```
List<Base> vals = new List<Base>();
values.Add(b);
values.Add(c); 
```

我应该查找什么以了解更多信息？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T02:47:25.283

继承构成了一个*is*关系：如果`A`继承`Base`，则表示`A`可以去任何`Base`允许去的地方。这正是您的代码片段所显示的内容：您可以将 的实例`A`，的子类添加`Base`到*任何子*类都可以去的`List<Base>`地方。*`Base`*

 ** * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-30T02:48:07.920

这是因为继承是可传递的。[正如 MSDN 所说](http://msdn.microsoft.com/en-us/library/ms173149.aspx)：

> 如果 ClassC 是从 ClassB 派生的，而 ClassB 是从 ClassA 派生的，则 ClassC 会继承 ClassB 和 ClassA 中声明的成员。

因此，在您的情况下，由于`A`继承自`Base`, `A`"is-a" `Base`，因此可以添加到 a `List<Base>`; 该列表的每个元素都是一个`Base`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-30T02:51:10.440

这两个陈述对我来说很清楚。因为首先，我们有一个原始对象 Base，它像一个专业化一样被实例化。在第二个中，A 像它自己的类型一样被实例化。您必须记住的是 A 类型也是 Base 类型。这个特性被称为多态性。您可以在[http://en.wikipedia.org/wiki/Polymorphism_in_object-oriented_programming中阅读更多内容](http://en.wikipedia.org/wiki/Polymorphism_in_object-oriented_programming)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-30T02:53:45.170

当您将 C 添加到 vals 时，编译器会自动将 c 强制转换为 Base In OOP -> 从子级强制转换为父级 => 没关系

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-30T02:57:44.963

```
Base b = new A(); 
```

由于 A implement Base 这是有效的。

b 将只有 Base 的属性和方法。

但不同的是，您可以将 b 强制转换为 A，然后使用 A 的属性和方法。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-30T03:15:18.260

这些关于继承的问题是 C# 以及任何面向对象语言的基础。你应该从一本好书 [Pro C# 5.0 and the .NET 4.5 Framework, Sixth Edition](http://my.safaribooksonline.com/book/programming/csharp/9781430242338) 或一些免费的在线教程开始，比如[Microsoft C# 教程](http://msdn.microsoft.com/en-us/library/aa288436%28v=vs.71%29.aspx) 或这里的[c#](http://msdn.microsoft.com/en-us/library/kx37x362) 它们无处不在……如果你认真学习并喜欢教学视频。访问 www.pluralsight.com 大约 30 美元/月，您会看到一些由专家制作的精彩视频。50 美元/月，您可以下载练习。

回到你的问题。生病交换A和B

```
//Base Class A is Animal.  Class B might be a Bird. 
Animal A = new bird();   // but A has visibility of or can access the features common to all animals Ie access a bird but with a narrower view.
Bird C  = new Bird() ; works for the obvious reason. 

but thats just the beginning... 
```

您需要考虑抽象和虚拟类和属性。覆盖属性。而且由于您的示例有一个列表，您甚至可能会遇到 COVARIANCE 问题。

事实上跳到最深处... [http://msdn.microsoft.com/en-us/vstudio/ee672314](http://msdn.microsoft.com/en-us/vstudio/ee672314) 协变和逆变。只是为了尝尝。

最近（在过去的 12 个月中）学习了 c#，如果你是认真的，我建议你按照上面建议的书或视频课程的方式学习。如果您搜索，您会发现大量有关 c# 问题的信息。

如果您的兴趣是偶然的，那么我不知道该建议什么。*

# mysql - 更好地为多个用户添加单独的表？

> ID：13638276
> 
> 赞同：0
> 
> 时间：2012-11-30T02:45:00.640
> 
> 标签：mysql, database

我对数据库设计比较陌生，所以我还在学习很多东西。我正在研究的是一个在线时间卡时钟。我只是在弄乱它以了解更多信息。我的全职工作是为操作重型设备的叔叔工作，他对我表示有些头疼。当检查考勤卡时，一些员工的手写字难以阅读，一些员工没有正确添加时间，所以他总是要仔细检查他们的数学，还有一些人没有按时交出考勤表。大多数员工都有智能手机，所以我的解决方案是制作一个简单的网站，其中有一个“打卡”和“打卡”按钮，它还包含几个文本字段来描述员工当天的操作和工作地点他们在。所有这些都将被添加到一个数据库中，该数据库将在工作周结束时通过电子邮件发送给老板。我的问题是为此设置数据库的最佳方法是什么？我应该为每个员工添加一个单独的表还是将它们全部保存在一个表中？将有大约 20 名员工使用该网站。提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-30T02:54:20.603

一般数据库原则：

考虑面向对象。对象的类别。

*   “员工”就是这样一个类，因此您应该有一个存储员工的表。
*   诸如打卡或打卡之类的“事件”是两种特定情况的一般类别，例如ClockIn 和ClockOut。
    *   您可以考虑用一张表来存储一个事件，其中一个字段用于事件的日期和时间，一个字段用于员工（外键），一个字段指示它是进还是出
    *   您也可以考虑将一张表用于 ClockIn，一张用于 ClockOut，但这可能并不有利，具体取决于您希望稍后在打印报告时如何扫描数据。我个人建议不要使用这种方法，只是指出这是一种选择。
*   理想情况下，每个表都应该有一个数字主键
    *   考虑键值对
    *   员工
        *   1 乔恩·多伊
        *   2 胡安·戈麦斯
        *   ETC...
    *   事件
        *   1 2012-11-29 08:59 打卡 2
        *   这意味着胡安·戈麦斯今天早上 9 点之前打卡

# java - 更改 SQLException 消息？爪哇

> ID：13638283
> 
> 赞同：0
> 
> 时间：2012-11-30T02:45:37.180
> 
> 标签：java, exception, message

当尝试将一些重复数据插入 JTextField 时，会出现该消息：

> 键“P​​RIMARY”的重复条目“1”

如何将其更改为更直观的内容，例如“系统中已注册的代码”？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T03:44:59.650

在插入之前，使用 select 语句检查记录是否已经在数据库中。如果已经存在，请提供您的用户通知，否则插入数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T03:42:06.313

You can try this:

```
if (the user inserts duplicate data into a JTextField) {
     throw new SQLException("Code already registered in the system.");
} 
```

That will allow you to change the message. Hope that helps a bit!

# java - Java链表查找和删除方法

> ID：13638289
> 
> 赞同：1
> 
> 时间：2012-11-30T02:46:13.550
> 
> 标签：java, linked-list

我有一个计算机科学课项目，除了一种方法外，我什么都做完了。删除方法。基本上我正在从用户输入创建一个链接列表，我需要能够删除所有节点（已完成）并删除单个指定节点。所以我需要在节点列表中搜索找到要删除的节点并删除它。任何可以提供帮助的东西都会受到赞赏。如果您有解决方案，请提供解释，因为我正在努力学习并解决问题。

我不会给你 GUI，因为我认为没有必要，但这里是节点类。

```
public class MagazineList {
private MagazineNode list;

    public MagazineList(){
        list = null;
    }

public void add(Magazine mag){
    MagazineNode node = new MagazineNode(mag);
    MagazineNode current;

    if(list == null) {
        list = node;
    }
    else {
        current = list;
        while(current.next != null)
            current = current.next;
        current.next = node;
    }   
}
public void insert(Magazine mag) {
  MagazineNode node = new MagazineNode (mag);

  // make the new first node point to the current root
  node.next=list;

  // update the root to the new first node
  list=node;
}

public void deleteAll() {
    if(list == null) {

    }

    else {
        list = null;
    }
}
public void delete(Magazine mag) {
    //Delete Method Goes Here
}

public String toString(){
    String result = " ";

    MagazineNode current = list;
    while (current != null){
        result += current.magazine + "\n";
        current = current.next;     
    }
    return result;
}
private class MagazineNode {
    public Magazine magazine;
    public MagazineNode next;

    public MagazineNode(Magazine mag){
        magazine = mag;
        next = null;
    }
}
} 
```

更新

这是我放在一起的方法，它通过第一部分进入 while 循环，并且永远不会识别列表中的相同项目。我对输入和删除方法使用了完全相同的东西，但它不会识别它。任何帮助表示赞赏。

```
public void delete (Magazine mag) {
MagazineNode current = list;
MagazineNode before;

before = current;

if(current.equals(mag)){
    before.next = current;
    System.out.println("Hello");
}

while ((current = current.next)!= null){
    before = current.next;
    System.out.println("Hello Red");

    if(current.equals(mag)){
        current = before;
        System.out.println("Hello Blue");
    }
}
 } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-30T02:50:28.787

不用勺子喂你答案。删除有点像删除链中的一个链接 - 你切断链接并将两个（新）末端连接起来。

所以，删除“B”意味着改变

```
A --> B --> C --> D 
```

对此

```
A --> C --> D 
```

在伪代码中，算法将是：

*   从第一个节点开始算法
*   检查它是否是您要删除的那个
*   如果不是，则转到下一个节点并再次检查（返回上一步）
*   如果是，则使前一个节点的下一个节点成为该节点的下一个节点
*   删除从这个节点到下一个节点的引用

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-30T03:06:56.750

```
public void delete (Magazine mag) {
    MagazineNode current = this.list;
    MagazineNode before;

    //if is the first element
    if (current.equals(mag)) {
        this.list = current.next;
        return;     //ending the method
    }

    before = current;

    //while there are elements in the list
    while ((current = current.next) != null) {

        //if is the current element
        if (current.equals(mag)) {
            before.next = current.next;
            return;     //endind the method 
        }

        before = current;
    }

    //it isnt in the list
} 
```

评论应该解释发生了什么

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-30T02:52:44.827

您需要做的就是在列表中搜索，跟踪您的位置。当要删除的节点在您面前时，将当前节点的“下一个”设置为要删除的节点之后的节点：

```
for(Node current = list; current.next() != null; current = current.next()){
   if(current.next().magazine().equals(toDelete)) current.setNext(current.next().next());
} 
```

类似的东西。希望有帮助！

# sql-server - 如何使用 COT 计算开始日期和结束日期之间的天数

> ID：13638293
> 
> 赞同：0
> 
> 时间：2012-11-30T02:46:59.487
> 
> 标签：sql-server

目前我正在使用 Code On Time 来开发我的系统。

我有一个默认的当前日期和时间，在用户从查找中选择一个完成的日期后，我想计算用户花费了多少天和多少小时。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T02:53:02.657

这就是你所追求的吗？

```
declare @dateTimeNow datetime = getutcdate()
, @dateTimeThen datetime = '2012-11-28 12:00:00'

select case when DATEPART(hour,(@dateTimeNow - @dateTimeThen)) >0 then day(@dateTimeNow - @dateTimeThen)-1 else day(@dateTimeNow - @dateTimeThen) end days
, DATEPART(hour,(@dateTimeNow - @dateTimeThen)) hours 
```

或者

```
select DATEDIFF(day,@datetimethen, @datetimenow) - case when (DATEDIFF(Hour,@datetimethen, @datetimenow)) % 24 = 0 then 0 else 1 end  days
, DATEDIFF(hour,@datetimethen, @datetimenow) % 24 hours 
```

# oauth - Twitter OAuth 值

> ID：13638294
> 
> 赞同：0
> 
> 时间：2012-11-30T02:47:20.830
> 
> 标签：oauth, twitter, twitter-oauth

我的目标是在用户的 Twitter 页面上发表评论。在这里，我有这个 php 代码...

```
$connection = new tmhOAuth(array(
'consumer_key' => 'CONSUMER_KEY',
'consumer_secret' => 'CONSUMER_SECRET',
'user_token' => 'USER_TOKEN',
'user_secret' => 'USER_SECRET', 
```

));

[消费者密钥和消费者秘密是我从https://dev.twitter.com/apps](https://dev.twitter.com/apps)创建应用程序时获得的值吗？

那么用户令牌和用户密码将是我试图发表评论的个人 Twitter 帐户？

我创建了一个开发 Twitter 应用程序并从 OAuth 设置中输入了消费者密钥/秘密，并创建了我的访问令牌并将“访问令牌”和“访问令牌秘密”作为用户。然后在运行脚本时，它给了我一个响应代码：401

有任何想法吗？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T03:08:12.380

解决了我自己的问题。如果有人关心，您必须转到您的应用程序并转到设置页面以确保它具有读写访问权限。

# richfaces - 如何移动富模态面板

> ID：13638298
> 
> 赞同：1
> 
> 时间：2012-11-30T02:47:45.493
> 
> 标签：richfaces, move, modalpopup

我无法移动模态面板。
尽管我使用的是可移动的="true" 属性。我在该模式面板中包含一个 jsp 页面。

主.jsp

```
<f:view>
   <html>
     <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
     </head>
     <body>
        <h:form id="modalPanelForm">
                <a4j:outputPanel id="outputPanel">
                        <a4j:commandButton value="Show Modal Panel" onclick="#{rich:component('modalPanel')}.show();"/>
                </a4j:outputPanel> 
        </h:form> 
                 <rich:modalPanel id="modalPanel" moveable="true">
                       <f:subview id="jobSchedulerSubView">
                            <jsp:include page="test1.jsp" flush="true"/>
                       </f:subview> 
                 </rich:modalPanel> 

</body></html></f:view> 
```

test1.jsp

```
<%@page contentType="text/html" pageEncoding="UTF-8"%>
<!DOCTYPE html>
<%@ taglib uri="http://java.sun.com/jsf/html" prefix="h" %>
<%@ taglib uri="http://java.sun.com/jsf/core" prefix="f" %>
<%@ taglib uri="http://richfaces.org/a4j" prefix="a4j"%>
<%@ taglib uri="http://richfaces.org/rich" prefix="rich"%>
  <f:verbatim>
     <html>
        <head>
           <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        </head>
        <body>
  </f:verbatim>
           <h:form id="testForm"> 
               <rich:panel id="testRichPanel"> 
                  <f:facet name="header">
                      <h:outputText value="SecondModalpanel"/>
                  </f:facet> 

                     <a4j:outputPanel id="testOutputPanel">
                          <a4j:commandButton value="Close Modal Panel" 
                                      onclick="#{rich:component('modalPanel')}.hide();"
                                      reRender="modalPanel"/>
                     </a4j:outputPanel> 
               </rich:panel>
</h:form>

<f:verbatim></body></html><f:verbatim> 
```

我有很多页面，例如 first.jsp、second.jsp、third.jsp、fourth.jsp 等。
每个页面都有模态面板，每个模态面板都包含“test1.jsp”页面。
这就是为什么我使用喜欢

```
<rich:modalpanel ....>             
      <f:subview ....>
          <jsp:include page="test1.jsp" .../> 
      </f:subview>         
</rich:modalpanel> 
```

帮我。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T08:00:54.047

将标题添加`facet`到您的`modalPanel`. `moveable`属性的默认值是`true`，不需要`true`手动设置。

```
<rich:modalPanel id="modalPanel">
   <f:facet name="header"> 
     <h:panelGroup>
       <h:outputText value="PO-Select Supplier"></h:outputText>
     </h:panelGroup>
   </f:facet>
  ...more.............
</rich:modalPanel> 
```

# java - Java - 使用 TestMode 和 TestConnection 争论来覆盖连接是什么意思？

> ID：13638302
> 
> 赞同：1
> 
> 时间：2012-11-30T02:48:21.080
> 
> 标签：java, sql-server-2005, jdbc

我从我的教授那里找不到任何与这项任务相关的东西。他希望我们使用 TestMode 和 TestConnection 参数来覆盖与数据库的连接以进行单元测试。具体来说，这里首先是成绩单，其次是 powerpoint 要点。

1.  您会发现我们可以使用 TestMode 和 TestConnection 参数覆盖连接的最低级别。通常，最好引入一个 TestMode 或 TestConnection，然后用使用现有参数的函数包装它们。对于任何 Sequel 语句，我们还将引入 Testmode 或 TestConnection 参数以及使用 Sequel、调用数据库、执行存储过程的任何函数，然后我们将引入参数以便我们可以测试它们。然后我们还将创建另一个函数，一个包装器，它接受原始参数，然后只调用修改后的函数，而不是在 TestMode 和空白的 TestConnection 中。引入代码但不破坏任何已经存在的东西。

2.  • 找到可以使用TestMode 和TestConnection 参数或其他合适方法覆盖连接的最低级别。

    • 查找使用连接对象的位置

    • 将TestMode 和TestConnection 参数引入函数

    • 创建一个包装器（wrapper），它接受原始参数并使用 TestMode = false 和 TestConnection = “”</p> 的参数调用修改后的函数

* * *

**这是显示 TestMode 和 TestConnection agrs 的项目规范。**

所有类修改：

*   实施了单元测试所需的更改。向返回 Connection 对象的现有函数添加了 TestMode 和 TestConnection

*   修改函数以使用 TestMode 和 TestConnection 值

*   使用修改后的函数的先前参数创建包装器。这允许应用程序使用代码更改进行编译

    ConnectionManager.java - 描述任何类特定的修改

功能改变：

公共连接 testFunction() 抛出异常

- 包装器创建用于：

公共连接 getWlsConnection() 抛出异常

公共连接getWlsConnection（字符串文件名，布尔TestMode，字符串TestConnection）抛出异常

公共连接 getLocalConnection(String className, String url, String userId, String passwd) 抛出异常

# codeigniter - CodeIgniter - 在 CI 之外访问数据库凭据

> ID：13638304
> 
> 赞同：1
> 
> 时间：2012-11-30T02:48:34.250
> 
> 标签：codeigniter

我正在使用 CodeIgniter 和 CometChat 软件构建一个应用程序。

我需要将 CometChat 连接到 CI 使用的同一数据库。

我真的不想在整个网站上输入数据库详细信息，所以我想从 CI database.php 文件中提取详细信息。

我已经尝试过`require`database.php 文件，但它似乎不起作用。

如果有人有解决方法，我会很乐意提供帮助。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-30T02:55:50.383

大多数 codeigniter 文件都包含以下保护：

```
if ( ! defined('BASEPATH')) exit('No direct script access allowed'); 
```

您必须在包含它之前定义基本路径，如下所示：

```
define('BASEPATH', 'dummy');

$db = array('default' => array());

require 'path/to/config/database.php'; 
```

然后你应该能够做到：

```
echo $db['default']['hostname']; // this might echo 'localhost' 
```

当然，您必须查看您的`database.php`文件以了解其布局。

# windows-phone-7 - 为什么每次加载页面时都会发生 Slider 值更改事件的 Null 引用异常

> ID：13638314
> 
> 赞同：3
> 
> 时间：2012-11-30T02:49:51.233
> 
> 标签：windows-phone-7

我是创建 Windows Phone 7 应用程序的新手，我在页面中添加了一个滑块，我已经自定义了外观但是当我在页面加载之前在模拟器中加载页面时，我得到一个“NullReferenceException”我认为这是因为我没有初始化滑块，所以我将设置方法更改为

```
public settings()
    {
        InitializeComponent();
        sldPassLegnth.Value = (double)3;
    } 
```

值更改事件如下所示：

```
private void Slider_ValueChanged(object sender, RoutedPropertyChangedEventArgs<double> e)
    {
        double d;
        d = sldPassLegnth.Value;
    } 
```

滑块的 xml 是：

```
<Slider Style="{StaticResource SliderStyle1}" Margin="24,75,22,352" Name="sldPassLegnth" ValueChanged="Slider_ValueChanged" Background="Black" Foreground="#FF3399FF" Maximum="15" Minimum="3" /> 
```

对此的任何见解都会很棒！提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T02:53:05.273

试试这个：

```
private void Slider_ValueChanged(object sender, RoutedPropertyChangedEventArgs<double> e)
    {
        double d;
        d = e.NewValue;
    } 
```

# ios - iOS 6 自动布局未正确调整大小

> ID：13638315
> 
> 赞同：0
> 
> 时间：2012-11-30T02:49:58.393
> 
> 标签：ios, ios6, footer, autolayout

所以我要做的就是在屏幕底部放一个图像视图。在 iOS6 自动布局之前，我可以点击底部的“I”，如果屏幕变短（即屏幕尺寸从 568 到 480 点高），它会将其保持在底部并向上推。但是现在我一直试图在 0 处为 Superview 添加一个底部间距，但我似乎无法做任何事情来摆脱顶部间距约束以停止搞砸我。如果我将顶部间距转换为用户约束然后将其删除（认为垂直约束将由底部间距处理）但它会自动重新创建该约束......有什么想法吗？

![截屏](../Images/4619a64221bdd993d6254a6d67ac159f.png)

**更新**似乎是因为我将它作为滚动视图的子视图（打算用它来水平滚动，而不是垂直滚动）。任何人都知道为什么它不会让我这样做？似乎您仍然应该能够约束到滚动视图的底部。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T02:58:47.070

可能是 Button 的约束在某种程度上是错误的。具有高度、宽度、底部距离和水平居中应该足以定义其位置。尝试删除按钮并将图像视图集中在超级视图上，看看是否允许您删除该顶部约束。

# javascript - 在 javascript 函数中传递 ruby 变量

> ID：13638316
> 
> 赞同：0
> 
> 时间：2012-11-30T02:50:17.617
> 
> 标签：javascript, html, javascript-events

我的 HTML 中有以下代码，我试图将 ruby​​ 变量传递给 Javascript 函数。有人可以帮我语法。

```
<% @level2.each_with_index do |row2, index2| %> 
................................................
................................................
<a href="javascript:validateUser_com("<%= #{index2} %>")" >Edit</a> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T02:53:27.403

您使用了两次双引号。例如，如果`index2`是`1`，您最终会得到以下 JavaScript：

```
<a href="javascript:validateUser_com("1")" > 
```

由于您对 HTML 属性使用双引号，因此您应该转义内引号或使用单引号。此外，Ruby 表达式不是字符串，因此不需要插值：

```
<a href="javascript:validateUser_com('<%= index2 %>')" > 
```

# silverlight - 找不到已安装的 Silverlight Developer 运行时版本。请安装 silverlight 开发者运行时

> ID：13638320
> 
> 赞同：0
> 
> 时间：2012-11-30T02:51:01.173
> 
> 标签：silverlight, visual-studio-lightswitch

我正在使用 Visual Studio 2012 专业版。我正在尝试使用电灯开关。我收到错误消息：“找不到安装的 Silverlight Developer 运行时版本。请安装 Silverlight 开发者运行时。”

我正在尝试打开项目

文件 -> 新项目 -> 模板 -> 灯开关 -> 灯开关应用程序（visual c#）

然后我闪烁着这个错误。

我从链接[http://www.microsoft.com/silverlight/](http://www.microsoft.com/silverlight/) 如何修复它下载了银灯。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T02:57:56.863

我以前也遇到过这个问题，我通过在安装 VS 2012 Pro 后立即执行 Windows 更新解决了这个问题，它缺少一个服务包，我假设我的服务包和更新后我能够安装和运行Light Switch没有问题。我希望这对你有帮助，我的朋友。祝你好运

# android - Android - 自定义 ArrayAdapter 类中的 notifyDataSetChange

> ID：13638321
> 
> 赞同：8
> 
> 时间：2012-11-30T02:51:01.140
> 
> 标签：android, android-arrayadapter

我有一个名为 InteractiveArrayAdapter 的自定义 ArrayAdapter，它将按钮和按钮侦听器添加到列表视图中的每个项目。在适配器内部有一个 getView 方法可以创建一个视图充气器。这里里面是我的按钮被创建和 buttonListener 被创建的地方。单击按钮时，我会删除与该按钮关联的 ArrayList 中的元素。问题是我无法弄清楚如何在此 OnClick 方法中调用 notifyDataSetChange，或者以另一种方式通知适配器需要更新 listView。

自定义适配器：

```
public class InteractiveArrayAdapter extends ArrayAdapter<String> {

  private final List<String> list;
  private final Activity context;
  private ListView listV;

  public InteractiveArrayAdapter(Activity context, List<String> list) {
    super(context, R.layout.rowbuttonlayout, list);
    this.context = context;
    this.list = list;

  }

  static class ViewHolder {
    protected TextView text;
    protected Button button;
  }

  @Override
  public View getView(int position, View convertView, ViewGroup parent) {
    View view = null;

    if (convertView == null) {
      LayoutInflater inflator = context.getLayoutInflater();
      view = inflator.inflate(R.layout.rowbuttonlayout, null);
      final ViewHolder viewHolder = new ViewHolder();
      viewHolder.text = (TextView) view.findViewById(R.id.label);
      viewHolder.button = (Button) view.findViewById(R.id.add);
      viewHolder.button
          .setOnClickListener(new Button.OnClickListener() {

//            @Override
//            public void onButtonClicked(Button buttonView,
//                boolean isChecked) {
//              String element = (String) viewHolder.button
//                  .getTag();
//              element.setSelected(buttonView.isChecked());
//
//            }

            public void onClick(View v) {
                String tag = (String) viewHolder.button.getTag();
                list.remove(list.indexOf(tag));
                // TODO Auto-generated method stub

            }
          });
      view.setTag(viewHolder);
      viewHolder.button.setTag(list.get(position));
    } else {
      view = convertView;
      ((ViewHolder) view.getTag()).button.setTag(list.get(position));
    }
    ViewHolder holder = (ViewHolder) view.getTag();
    holder.text.setText(list.get(position));

    return view;
  }
} 
```

活动：

```
public class InventoryActivity extends Activity {
    public Inventory appInv;
    private ListView lv1 = null;
    private ListView lv2 = null;

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        SharedPreferences prefs = getPreferences(MODE_PRIVATE);
        appInv = new Inventory(prefs);

        setContentView(R.layout.inventory);

        // Get UI references.
        //
        lv1 = (ListView) findViewById (R.id.list1);
        lv2 = (ListView) findViewById (R.id.list2);
        ArrayAdapter<String> adapter1 = new InteractiveArrayAdapter (this, appInv.inventory);
        ArrayAdapter<String> adapter2 = new InteractiveArrayAdapter (this,  appInv.ingredients);
        lv1.setAdapter(adapter1);
        lv2.setAdapter(adapter2);
        // TODO Auto-generated method stub
    }
} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-30T03:28:06.277

```
 public void onClick(View v) {
                    String tag = (String) viewHolder.button.getTag();
                    list.remove(list.indexOf(tag));
                    notifyDataSetChanged()
                    // TODO Auto-generated method stub

                } 
```

只需在您的 onClickListener 中添加 notifyDataSetChanged()。

# ios - 您在哪里更新应用程序内消耗品的服务器？

> ID：13638322
> 
> 赞同：3
> 
> 时间：2012-11-30T02:51:04.260
> 
> 标签：ios, ios5, in-app-purchase

因此，我有一个购买了消耗品的应用程序，并且从我所阅读的内容来看，更多的工作涉及在服务器上保留一些信息。

我不清楚的是，成功购买后在哪里更新服务器？是吗

*   (void)completeTransaction:(SKPaymentTransaction *)transaction;

??

如果确实是上面提到的功能，难道只是打个web调用，更新一下server server吗？我只是想了解最佳实践，并希望得到任何帮助。

非常问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T20:12:56.750

*我*做到了并且做到了

```
- (void)paymentQueue:(SKPaymentQueue *)queue updatedTransactions:(NSArray *)transactions
...
 case SKPaymentTransactionStatePurchased: 
 case SKPaymentTransactionStateRestored:
      [self sendReceiptToServerAndValidateFurther:transaction.receiptData 
```

然后它只是对服务器端脚本的网络调用，它可以使用 iTunes 验证收据并更新其数据库/发送数据

顺便说一句，一些服务器 php

```
function itunes_verify2($receiptData,$sandboxed) {
    //itunes store url -- sandbox or not :)
    $itunes_storeURL = "https://buy.itunes.apple.com/verifyReceipt";
    if($sandboxed == true) {
        $itunes_storeURL = "https://sandbox.itunes.apple.com/verifyReceipt";
    }

    log_action('itunes_verify2 using ' . $itunes_storeURL);

    $post = array("receipt-data" => $receiptData ); 
    $postData = json_encode($post);

    $responseData = post_doRequest( $itunes_storeURL, $postData );
    $response = json_decode($responseData);

    if($responseArray->status == 0) {
        return "YES";
    } else {
        log_action('failed to get status ok from ' . $reponseData);
        return "NO";
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T20:00:07.720

我不知道这是否算作一个有效的答案，但你也许应该看看[这篇](http://troybrant.net/blog/2010/01/in-app-purchases-a-full-walkthrough/)文章。这篇博文是 2010 年的，所以可以说它已经过时了！但我认为值得一看，提供的示例（completeTransaction 方法实现）也应该有效。

让应用程序购买工作比实际情况要痛苦得多。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-11T01:02:00.280

我会在这里为这个 SO 问题投票。好像有几个例子。 [https://stackoverflow.com/questions/4178214/ios-in-app-purchase-sample-code](https://stackoverflow.com/questions/4178214/ios-in-app-purchase-sample-code)

据我所知，消耗品确实需要您自己的主机，如此处所述： [iOS In App Purchases for Subscriptions and Consumables products](https://stackoverflow.com/questions/7577004/ios-in-app-purchases-for-subscriptions-and-consumables-products)

我对消耗品没有个人经验，只有升级类型的 IAP，这并*不太*痛苦（相对而言）。

# scheduled-tasks - 如何处理 Web 服务器上的大量计划任务？

> ID：13638323
> 
> 赞同：1
> 
> 时间：2012-11-30T02:51:04.947
> 
> 标签：scheduled-tasks, lamp

我正在开发一个必须处理许多用户制作的调度任务的网站（使用 LAMP 堆栈）。它的工作原理如下：一个用户创建一个事件并设置一个日期，其他用户（多达 63 个）可以加入。在设定日期前几个小时，系统必须向每个订阅该事件的用户发送电子邮件。就是这样。

但是，我从来没有处理过调度，我知道的唯一工具（很差）是 cron 和 at。我的计划是为每个事件创建一个 at 工作，这将调用一个脚本来获取所有订阅者的电子邮件并邮寄给他们。

我的问题是：我的计划/设计好吗？是否可扩展？我应该注意哪些更好的选择？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T03:12:21.060

为什么每个事件都有单独的 cron 作业？我为时事通讯做了类似的事情，cron 作业每小时运行一次，如果有任何时事通讯要发送，它只会处理它们。在您的情况下，您将有一个每小时运行一次的脚本，并获取在所需时间间隔内发生的事件的用户列表。

它会起作用的。就可扩展性而言，至少要确保脚本在它自己的进程中运行，这样它就不会不必要地阻塞服务器。

也许创建一个 php-cli 脚本？

我现在大部分工作都是在 Rails 中完成的，有很多后台处理库，其中之一是 Resque，它使用 redis 服务器来跟踪我找到的 PHP 克隆[https://github.com/chrisboulton /php-resque](https://github.com/chrisboulton/php-resque)

可能对您的用例来说有点过头了，但不妨试一试

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-30T03:18:49.843

如果您考虑使用应用程序服务器（而不是简单的 Web 服务器）的适当框架，[Spring](http://www.springsource.org/)有一个易于使用的[任务调度层。](http://static.springsource.org/spring/docs/3.0.x/reference/scheduling.html)在服务器上调度作业确实需要的不仅仅是简单的 LAMP 安装所能做的，但我有一段时间没有使用 PHP，所以也许有一个等价物。

[这](http://www.web4j.com/Criticisms_Drawbacks_Pitfalls_Spring_Rails_PHP.jsp)是一篇比较您的一些选项的文章。

# objective-c - 目标-c：依赖dealloc

> ID：13638325
> 
> 赞同：3
> 
> 时间：2012-11-30T02:51:20.890
> 
> 标签：objective-c, object, memory-management, automatic-ref-counting

依赖确定性 dealloc（例如：用于清理）是一种合法的做法吗？

由于 ARC，甚至手动引用计数，本质上是确定性的，我想知道其他人对*依赖*立即调用 dealloc 的想法（相对而言，考虑 autoreleasepool）。

在其他现代编程语言（如 C#）中，当您需要确定性清理时，会使用类似 dispose 的模式。我会想象带有垃圾收集的 Obj-C 也会鼓励这种行为。

因此，话虽如此，一个例子是 UIViewController，它取消了 dealloc 中的未完成操作，而不是尝试围绕 viewDidDisappear 有时令人沮丧的语义进行编程。

另一个示例是流对象，它分别在 init 和 dealloc 中隐式打开和关闭，而不需要调用 open 或 close。

由于 Apple 已弃用 GC，我想这些模式不会很快被打破，而且它们非常方便，尽管我找不到任何关于是否应该鼓励这样做的文档。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T02:57:35.817

您是绝对正确的，您可以依赖在`dealloc`最后一个引用发布后相对较快的调用（手动或通过 ARC，没关系）。与 GC 不同，在系统有空闲时间时调用终结器，或者在某些情况下从不调用，它`dealloc`被非常可靠地调用。Apple 通过建议我们应该在内部执行所有资源清理任务来允许甚至鼓励使用这种模式`dealloc`。

但是，这并不意味着您应该`dealloc`完全依赖。例如，看一下[`NSStream`](https://developer.apple.com/library/ios/#documentation/Cocoa/Reference/Foundation/Classes/NSStream_Class/Reference/Reference.html)类：它为您提供了一个显式`close`方法，让您可以随意强制关闭流，而无需等待调用的`dealloc`发生。如果资源非常昂贵（文件句柄、信号量等），这是一个非常好的模式：释放这些资源的主要机制应该是一个单独的`close`方法。该`dealloc`方法也应该释放资源，但它也应该发出警告，通知您您错过了`close`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-30T07:19:36.693

无论您的内存管理系统如何，将昂贵的资源（例如文件和套接字、图像、视图、大内存分配等）绑定到对象生命周期都是有风险的。即使您手动保留和释放，您也可能在不知不觉中将对象保留在某处并忘记它（或以其他方式不必要地延迟其释放）。ARC 使这些事情更有可能发生，因为保留的来源以及相应的发布何时生效并不那么明显。当然，GC 使这一切变得完全不确定。

通常，对于昂贵和/或有限的资源，您应该尝试遵循独资模式。是的，您仍然可以正常保留/释放以防止过早解除分配，但是应该明确定义主导所有者并负责在完成时清除对象-例如调用无效或关闭或任何适当的方法。这在很多常见情况下都非常有意义 - 例如，您通常知道何时完成了文件或套接字，因此即使它们恰好封装在某个包装类中，您也应该明确地关闭它们。

在某些情况下，这还可以帮助找到原本隐藏或难以追踪的错误。例如，如果您的文件包装类在文件关闭后调用 read 或 write 时引发异常，您很快就会发现这些情况。*然而，如果您在认为*已完成文件时没有关闭文件，则读取和写入将照常进行，您可能不会注意到文件中包含意外数据。

您也可以使用相同的原则来打破保留周期。

# python - 有什么方法可以使用 python 中的注释在 django 中编写 URL

> ID：13638326
> 
> 赞同：2
> 
> 时间：2012-11-30T02:51:23.653
> 
> 标签：python, django, django-urls

我来自 Java Hibernate 和 Symfony2 背景，我曾经在这样的函数顶部的控制器内编写路由：

```
/**
 * @Route("/blog")
 */
class PostController extends Controller
{ 
```

我知道它在 Django 中不可用，但有什么方法可以编写一些装饰器等，以便我可以像这样提及 URL：

```
@URL("/mytest")
class myView():
    pass 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-30T03:20:58.023

虽然它会*非常 undjangonic*，但你可以尝试这样的事情：

```
project/
    decorators.py
    views.py
    urls.py

# decorators.py
from django.conf import settings
from django.utils.importlib import import_module
from django.conf.urls.defaults import patterns, url

def URL(path):
    path = r'^%s$' % path[1:]  # Add delimiters and remove opening slash
    def decorator(view):
        urls = import_module(settings.ROOT_URLCONF)
        urls.urlpatterns += patterns('', url(path, view))
        return view
    return decorator

# views.py
from .decorators import URL

@URL('/')
def home(request):
    # your view

@URL('/products')
def products(request):
    # your view

# urls.py
from django.conf.urls import patterns

from . import views  # import the modules with your views

urlpatterns = patterns('',)  # create an empty url dispatcher to append to 
```

并确保在处理 url 之前导入包含此装饰器的每个文件（例如，通过在 urls 文件中导入它们）。

# jquery - jquery 将内容传递给 $(this).text

> ID：13638328
> 
> 赞同：1
> 
> 时间：2012-11-30T02:51:36.337
> 
> 标签：jquery, fade

我正在制作一个菜单，在滚动时，链接的文本会发生变化（淡入）。我刚刚从另一个线程复制并粘贴了一段代码

```
<script type="text/javascript">
    function fade_new_text(){
        $('#what').animate({'opacity': 0}, 500, function () {
            $(this).text('new text');
        }).animate({'opacity': 1}, 500);
    }
    function revert(){
        $('#what').animate({'opacity': 0}, 500, function () {
            $(this).text('do something');
        }).animate({'opacity': 1}, 500);
    }
</script> 
```

然后在正文部分我有菜单本身

```
<body>
    <a href="#" id="what" onmouseover="fade_new_text();" onmouseout="revert();">Do something</a>
</body> 
```

这适用于一个链接，但我需要创建其中的 7 个，并希望将来重用此代码。因此，我需要将链接 ID 和新文本都传递给 Jquery 函数以获取其他 6 个链接，希望来自“onmouseover”和“onmouseout”，因为它最有意义？我对 Jquery 完全陌生，希望您能就如何做到这一点提出建议。

测试文件位于[http://www.voxcommunications.ca/test.html](http://www.voxcommunications.ca/test.html)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-30T03:19:31.083

与 JofryHS 的回答类似，您可以利用锚标记上的数据属性以及您可以使用 jQuery 将多个事件绑定到同一个处理程序这一事实来简化事情。

HTML

```
<a href="#" class="hoverlink" id="what" data-mouseover="Hovering over what" data-mouseout="Do something">Do something</a>

<a href="#" class="hoverlink" id="what1" data-mouseover="Hovering over what1" data-mouseout="Do something else">Do something else</a> 
```

JS：

```
$(".hoverlink").bind("mouseover mouseout", function(e) {
    var elem = $(this);
    var text = elem.data(e.type); // e.type will have name of the current event

    elem.animate({"opacity": 0}, 500, function() {
        elem.text(text);
    }).animate({"opacity": 1}, 500);
}); 
```

[JSFIDDLE](http://jsfiddle.net/dxKnr/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-30T03:45:48.257

一般来说，这种类型的菜单将是一个样式化的无序列表 (ul) 元素，类似这样。

```
<ul id="menu">
    <li><a href="#" data-mouseover="Text A">Do 1</a></li>
    <li><a href="#" data-mouseover="Text B">Do 2</a></li>
    <li><a href="#" data-mouseover="Text C">Do 3</a></li>
    <li><a href="#" data-mouseover="Text D">Do 4</a></li>
</ul> 
```

为了使标记尽可能简单，我们只对替代（鼠标悬停）文本进行编码。

第一次访问每个链接时，jQuery 会确保保留原始文本的记录。

```
$("#menu").on('mouseenter mouseleave', "a", function(e) {
    var $this = $(this);
    $this.stop(true).animate({'opacity': 0}, 500, function() {
        if(!$this.data('mouseout')) {
            $this.data('mouseout', $this.text());
        }
        $this.text($this.data(e.type));
    }).animate({'opacity': 1}, 500);
}); 
```

[演示](http://jsfiddle.net/f8Xh8/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-30T02:57:36.730

重用你的函数像这样重写你的函数

```
<script type="text/javascript">
function fade_new_text(id, txt){
$('#'+id).animate({'opacity': 0}, 500, function () {
    $(this).text(txt);
}).animate({'opacity': 1}, 500);
}
function revert(id, txt){
$('#'+id).animate({'opacity': 0}, 500, function () {
    $(this).text(txt);
}).animate({'opacity': 1}, 500);
 }
</script> 
```

然后在你的身体部分使用类似下面的东西

```
<body>
<a href="#" id="what" onmouseover="fade_new_text('what','Natalia');" onmouseout="revert('what','Natalia1');">Do something
</a>

<a href="#" id="what1" onmouseover="fade_new_text('what1','Natalia1');" onmouseout="revert('what1','Natalia2');">Do something
</a>

....so on...
</body> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-30T03:33:41.767

根据Bryans的回答，这种方式可以防止在不必要时重复出现动画，还可以动态添加数据鼠标，而不是在每个链接的数据鼠标中重写链接文本。

这是一个工作示例[**FIDDLE**](http://jsfiddle.net/videsignz/gYMyF/)

**HTML**

```
<a class="hoverlink" data-mouseover="Hovering here">Do something</a><br />
<a class="hoverlink" data-mouseover="Hovering again">Do something else</a><br />
<a class="hoverlink" data-mouseover="Hovering some more">Do something yet again</a><br />
<a class="hoverlink" data-mouseover="Hovering yet once more">Do something one last time</a><br /> 
```

**jQuery**

```
//Add the link text dynamically
$('.hoverlink').each(function() {
    $(this).data('mouseout', $(this).text());
});

//Perform hover function and prevent recurring animations
$("body").on("mouseover mouseout", '.hoverlink', function(event) {

    var text = $(this).data(event.type);

    $(this).stop().animate({"opacity": 0}, 500, function() {
        $(this).stop().text(text).animate({"opacity": 1}, 500);
    });

}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-30T03:09:45.360

我可以建议这个：

```
function fade_new_text(text){
$('#what').animate({'opacity': 0}, 500, function () {
    $(this).text(text);
}).animate({'opacity': 1}, 500);
}
function revert(text){
$('#what').animate({'opacity': 0}, 500, function () {
    $(this).text(text);
}).animate({'opacity': 1}, 500);
 }

$(".coolLink").hover(
  function() {

    fade_new_text($(this).attr("data-text"));
  },
  function() {
    revert($(this).attr("data-original"));
  }
); 
```

并对您的 HTML 进行一点点修改：

```
<a href="#" id="what" class="coolLink" data-original="Do something" data-text="New Text">Do something 
```

如果文本基本上在两个文本之间来回切换，这将起作用。现在对于其他链接，只需使用相同`class="coolLink"`的`data-original`and`data-text`就可以了。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-30T03:23:30.253

我会采用使用数据属性向 HTML 添加行为的方式，您可以使用以下方法：

```
<a href="#" data-fade-text="some text">link one</a>
<a href="#" data-fade-text="some text 2">link two</a>
<a href="#" data-fade-text="some text 3">link three</a> 
```

-

```
$('[data-fade-text]').each(function(){
    var self = $(this);
    self.data('original-text', self.text());
});

$('[data-fade-text]').hover(
    function(){
        var self = $(this);
        self.animate({'opacity': 0}, 500, function () {
            self.text(self.data('fade-text'));
        }).animate({'opacity': 1}, 500);
    },
    function(){
        var self = $(this);
        self.animate({'opacity': 0}, 500, function () {
            self.text(self.data('original-text'));
        }).animate({'opacity': 1}, 500);
    }
);​ 
```

示例[http://jsfiddle.net/fY5pj/](http://jsfiddle.net/fY5pj/)

# emacs - 是否有可能让emacs具有像010编辑器文件格式分析的功能？

> ID：13638329
> 
> 赞同：2
> 
> 时间：2012-11-30T02:52:06.117
> 
> 标签：emacs, hex, reverse-engineering

最近做了一些逆向工程，但是在Linux中找不到像010编辑器这样的十六进制编辑器。我听说 emacs 可以通过 lisp 自定义很多东西。我想知道emacs是否可以有010编辑器模板功能。如果可以的话，我决定用 lisp 学习 emacs。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-30T04:06:27.550

我不知道 010 编辑器，所以我无法判断 Emacs 对十六进制编辑的支持是否接近可比（Emacs 的十六进制编辑模式不是特别复杂），但您可以尝试使用`M-x hexl-mode RET`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-30T23:41:58.673

Emacs 不是您选择的工具。它并不是对所有事情都是最好的（尽管我们都在尝试）。hexl-mode 很好，但是如果您尝试打开一个非常大的文件或磁盘映像或类似的东西，那么事情会很快走下坡路。

你最好帮助改进现有的开源十六进制编辑器，它们有很多。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-30T11:37:43.090

如果您需要在 Linux 上探索二进制文件，可以尝试使用[hach​​oir](https://bitbucket.org/haypo/hachoir/wiki/Home)。它是一个用 python 编写的库，可以帮助检索和浏览内部文件结构，以及基于它构建的几个查看器应用程序。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-12-14T14:21:45.163

[当然，您现在可以使用VLF 次要模式](https://github.com/m00natic/vlfi)打开非常大的文件。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-03T12:48:17.413

Emacs 确实支持解码二进制数据，但它比 010 编辑器更手动 - 请参阅emacs 手册中的[bindat](http://www.gnu.org/software/emacs/manual/html_node/elisp/Byte-Packing.html#Byte-Packing "绑定")。

基本上，您为数据描述了一个模板，然后使用 elisp 对其进行解码，因此您需要进行一些基本的 elisp 编码，但该页面底部显示的示例应该可以帮助您入门。

# java - 序列化为 Json 时避免 ConcurrentModificationException？

> ID：13638331
> 
> 赞同：4
> 
> 时间：2012-11-30T02:52:23.137
> 
> 标签：java, json, serialization, concurrency

我们有一个`Document`使用类型的私有成员`Map<String, Object>`作为存储的类。这种类型的对象保存在内存中，并且（非常频繁地）被（可能）多个线程修改。这些对象（或者，特别是底层 Maps）也会根据请求通过 HTTP 序列化。序列化格式为Json，目前使用的库是谷歌的`Gson`

当序列化作为引入新的修改同时发生时，`Map.Entry`我们会看到`ConcurrentModificationExceptions`. 这在直觉上很有意义，因为 Gson 可能正在迭代`entrySet`正在修改的内容。

我们怎样才能避免这种情况？我们是否需要总是将 Map 的深层副本传递给 Gson？在这种情况下，鉴于地图可以包含所有 Json 原语，包括`List`and ，您将如何实现所述深拷贝`Map`？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-30T03:21:28.257

虽然我质疑序列化经常更新的对象是否明智，但使用[ConcurrentHashMap](http://docs.oracle.com/javase/6/docs/api/index.html?java/util/concurrent/ConcurrentHashMap.html)至少应该可以缓解您的并发问题。

# ruby-on-rails - Ruby on Rails 中的水平数据库缩放

> ID：13638333
> 
> 赞同：6
> 
> 时间：2012-11-30T02:52:54.683
> 
> 标签：ruby-on-rails, ruby, postgresql, activerecord

我有一个带有 PostgreSQL 数据库的 Ruby on Rails 应用程序，它具有以下结构：

```
class A < ActiveRecord::Base
   has_many :B
end
class B < ActiveRecord::Base
    has_many :C
end
class C < ActiveRecord::Base
    attr_accessible :x, :y :z
end 
```

只有几个 A，而且增长缓慢（比如一个月 5 个）。每个 A 有数千个 B，每个 B 有数万个 C（因此每个 A 有数百万个 C）。

A 是独立的，来自不同 A 的 B 和 C 永远不需要在一起（即在同一个查询中）。

我的问题是，现在我只有几个 A，ActiveRecord 查询需要很长时间。当 C 的表有数千万行时，查询将永远持续下去。

我正在考虑水平扩展数据库（即A 的一个表，B 的一个表和每个A 的一个C 的表）。但我不知道该怎么做。我猜这是一种分片，但我不知道如何动态创建数据库表并使用 ActiveRecord 访问数据，如果表依赖于我正在使用的 A。

非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T04:06:02.310

如果您只有几行甚至几百万行的性能问题，您需要退后一步，然后再尝试设计解决方案。您描述的问题很容易通过索引解决；创建额外的物理表没有任何优势，而且您会引入令人难以置信的复杂性。

正如@mu-is-too-short 已经说过的那样：注意您的查询计划。使用您的工具来分析性能。

话虽如此，您可以使用[表分区](http://www.postgresql.org/docs/9.0/static/ddl-partitioning.html)将数据存储物理地和透明地存放到不同的分片表中，这对于增长非常快但仅在给定时间框（如一个月）内有用的数据特别有用。您还可以使用存档位标志列来执行此操作，以将旧的或已删除的记录传送到一些较慢的存储（例如，由旋转 rust 组成的标准 RAID），同时将活动记录保留在较快的存储上（如 SSD 的 RAID）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T09:25:45.010

所以看起来你有一个树状结构。如果真的不需要以某种交叉引用的方式将它们从数据库中提取出来，那么你的 A 就具有“文档”的属性，看看 MongoDB。A 将与他们的所有 B 一起保存，而 C 在一条记录中。

[http://www.mongodb.org/](http://www.mongodb.org/)

如果您正在寻找 ORM，请检查

[http://mongoid.org/en/mongoid/index.html](http://mongoid.org/en/mongoid/index.html)

# visual-studio-2008 - 在没有 msbuild-task 的情况下，使用 VS2008 和 .Net 3.5 进行自动化构建

> ID：13638339
> 
> 赞同：-2
> 
> 时间：2012-11-30T02:53:38.150
> 
> 标签：visual-studio-2008, msbuild, nant

我尝试使用 NAnt 0.92 更快地构建 VS2008 解决方案。我正在使用解决方案任务，但它不起作用。在互联网上说必须使用 msbuild-task 而不是 solution-task。但是通过 msbuild-task 构建与在 VS2008 中构建没有什么不同。还有其他方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T07:12:03.573

如果您的主要目标是更快地构建解决方案，那么您的主要目标不应该是避免使用 MSBuild。以下是一些关于如何加快构建速度的一般建议：

*   使用专用的构建服务器。一台除了构建解决方案而无需与其他任务共享资源之外没有其他责任的机器很可能会加速您的构建。
*   你有性能问题吗？听从[Jeff Atwood 的建议](http://www.codinghorror.com/blog/2008/12/hardware-is-cheap-programmers-are-expensive.html)，在上面扔硬件。
*   **使用**MSBuild 而不是 Visual Studio 进行构建。通过这种方式，您可以避免 GUI 消耗任何开销资源。`/m`此外，您可以通过与 MSBuild 的开关并行构建来加快构建速度。[在 Scott Hanselman 的博客上](http://www.hanselman.com/blog/FasterBuildsWithMSBuildUsingParallelBuildsAndMulticoreCPUs.aspx)找到更多信息。

# c# - 通过网络安装的打印机服务器端打印 PDF 文件

> ID：13638343
> 
> 赞同：0
> 
> 时间：2012-11-30T02:54:02.927
> 
> 标签：c#, asp.net, printing-web-page, system.printing, jdf

浏览了关于这个主题的现有帖子，但我的要求有些不同。

在客户端浏览器中执行操作后，通过网络安装的打印机打印作业。Web 服务器已将所有打印机放入其中，根据客户端数据，我们需要立即使用客户端给定的配置进行打印，将作业发送到打印机（可能是不同的位置 - 但这不是问题，因为打印机在同一个网络）。我见过打印架构、Win32_print 类、SNMP、System.drawing.Printing、System.Printing.... 但找不到实现这一点的方法.. (Asp.net,C#)

- 文件已经存在于服务器文件夹中，我只需要拿起并发送到带有客户端选择配置的打印机...

更新：我必须使用 JDF 方法，因为所有文件都是 PDF 文件。我能够使用选定的配置创建 JDF 文件，但是将此 JDF 发送到打印机（启用 JDF）让我很难...有 JMF 将 JDF 发布到打印机，但不知道如何实现它..仍在寻找方法，如果有人对此有所帮助，那就太好了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-04-13T13:21:18.960

有什么我可以回答的！8-) 我现在实际上正在开发一个使用它的项目。

不要将 Acrobat Reader 用作任何类型的服务器应用程序。它有一个用户界面，会在一个不存在的屏幕上弹出，在一个意想不到的时间冻结你的应用程序，等待永远不会发生的点击。

使用 Ghostscript。Ghostscript 是免费的、开源的，可以完美地满足您的需求。开箱即用的它由一个 DLL 和一个命令行接口组成，但是有一个 API 和大量不同的接口，包括 .Net，以及适用于 Windows 和 Linux 的版本。

在更“概述”类型的注释中，您可以将 PDF 拖到工作站上的打印机中的原因是因为 Acrobat Reader 包含允许执行此操作的代码和挂钩。Windows 实际上不包含打印 PDF 的本机功能。

# c# - 列表 自定义排序

> ID：13638346
> 
> 赞同：3
> 
> 时间：2012-11-30T02:54:31.473
> 
> 标签：c#, asp.net, list, sorting

我目前有一个`List<string>`存储以下 HTML 字符串的对象，主要是 URL，例如

```
List[0] = "<a href='#' id='1'>Banana</a>";
List[1] = "<a href='#' id='2'>Orange</a>";
List[2] = "<a href='#' id='3'>Apple</a>";
List[3] = "<a href='#' id='4'>Mango</a>";
... 
```

而且，当我对`List<string>`对象进行排序时，通过执行`URLList.Sort(); (assume that`URLList `object has been instantiated.)`，它给出了这样的顺序**Banana=>Orange=>Apple=>Mango**，这并不是我想要的。

我想根据这些水果的字母顺序对其进行排序，就像**Apple=>Banana=>Mango=>Orange**。

那么如何实现这种自定义排序呢？有什么建议么？谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-30T03:15:33.923

如果您想要一种简单的方法，并且希望您的数组不会发生太大变化：

**2012 年 11 月 30 日编辑**

```
List.Sort((x, y) => x.Substring(x.IndexOf(">") + 1, 1).CompareTo(y.Substring(y.IndexOf(">") + 1, 1))); 
```

* * *

![在此处输入图像描述](../Images/00c16cc0b4974bd66607544cb56da8f6.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-30T02:59:39.530

我会考虑把你`List<string>`变成一个`List<KeyValuePair<string, string>>`. `Key`您可以使用设置为“Banana”、“Apple”等以及`Value`url 本身来填充它。然后就可以排序了`Key`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-30T02:58:02.433

****字符串**的**默认排序**是**按字母顺序排列**的，在这种情况下由`id`属性控制，因为这是**字符串的第一部分不同**。您可能希望使用**[带有比较对象](http://msdn.microsoft.com/en-us/library/w56d4y5z.aspx)****的sort**版本并提供您**自己的比较函数**，该函数可以正确解析您的标签并返回顺序。或者，将您的 HTML 标记读入一个类，并将其存储为这些对象的列表，这将使代码更具可读性。**

 *** * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-30T02:58:31.640

这是意料之中的。您正在对简单字符串进行排序，它们的第一个不同之处在于`id`属性的值。

我假设它正在调用`ToString()`以确定排序顺序，因此您可以尝试覆盖它以仅返回内部文本。但我真的认为你需要一个类，而不仅仅是字符串。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-30T03:07:24.050

我是 C# 和 ASP.NET 的新手，但也许你可以使用 a`System.Web.UI.WebControls.HyperLink`而不是字符串：

```
List<HyperLink> links = new List<HyperLink>();

links.Add(new HyperLink() { NavigateURL = "#", ID = "1", Text = "Banana" });
links.Add(new HyperLink() { NavigateURL = "#", ID = "2", Text = "Apple" });
links.Add(new HyperLink() { NavigateURL = "#", ID = "3", Text = "Orange" });
links.Add(new HyperLink() { NavigateURL = "#", ID = "4", Text = "Mango" });

links.Sort((x, y) => x.Text.CompareTo(y.Text)); 
```

然后可以将这些链接附加到页面上的另一个控件，例如 a`<div>`等：

```
Control parent = Page.FindControl("id-of-control");
foreach (HyperLink l in links)
    parent.Controls.Add(l); 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-11-30T02:58:49.377

因为在您的列表中，字符串`<a href='#' id='1'>Banana</a>`包含`id`属性，其值为`1`，它小于`<a href='#' id='2'>Orange</a>`，其`id`值为`2`。所以结果`URLList.Sort();`是正确的。

我认为您需要创建自己的 String 类，并覆盖 equals 函数，或者实现`Comparable`接口，然后覆盖`compare`函数。**

# sql-server - 数据库邮件 - 无法从数据库中读取邮件配置信息 - 无异常

> ID：13638347
> 
> 赞同：0
> 
> 时间：2012-11-30T02:54:39.870
> 
> 标签：sql-server, database-mail

我已经尝试了几个小时来让数据库邮件在 SQL Server 2008 R2 上运行，并且已经走到了死胡同。

我已经完成了数据库邮件配置工具，确保 SQL 浏览器已打开并遵循了数据库邮件故障排除联机丛书中的所有步骤。

当我跑步时`SELECT * FROM sysmail_event_log`，我在描述栏中得到的只是

**无法从数据库中读取邮件配置信息。**

我试过用谷歌搜索这个，但大多数匹配都来自拥有异常堆栈的人。我没有任何例外可以使用。

有什么线索吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T02:54:39.870

在玩了太久之后，我有了运行 SQL Profiler 的灵感，捕捉所有错误（不知道为什么我之前没有想到这一点！）。

在发送测试邮件过程中，它显示

**对象“sysmail_help_configure_sp”、数据库“msdb”、模式“dbo”的执行权限被拒绝。**针对 System\NT AUTHORITY

所以我给那个用户添加了一堆权限，突然一切都正常了！

我的 NT AUTHORITY 用户现在在**msdb**数据库中具有以下权限：

*   DatabaseMailUserRole 的成员

执行以下权限：

*   dbo.sp_ProcessResponse
*   dbo.sp_readrequest
*   dbo.sysmail_configure_sp
*   dbo.sysmail_help_account_sp
*   dbo.sysmail_help_admin_account_sp
*   dbo.sysmail_help_configure_sp
*   dbo.sysmail_help_configure_value_sp
*   dbo.sysmail_help_principalprofile_sp
*   dbo.sysmail_help_profile_sp
*   dbo.sysmail_help_profileaccount_sp
*   dbo.sysmail_help_profileaccount_sp
*   dbo.sysmail_help_profileaccount_sp
*   dbo.sysmail_help_profileaccount_sp

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-05-13T20:30:40.713

请参考以下链接：

[http://www.practicalsqldba.com/2012/03/sql-server-2005-database-mail-stopped.html?showComment=1463171213768#c7726740071461349854](http://www.practicalsqldba.com/2012/03/sql-server-2005-database-mail-stopped.html?showComment=1463171213768#c7726740071461349854)

更新**msdb**`sysmail_help_admin_account_sp`中的存储过程解决了该问题。

# c++ - 如何静态初始化包含联合的结构数组？

> ID：13638349
> 
> 赞同：1
> 
> 时间：2012-11-30T02:54:49.377
> 
> 标签：c++, arrays, visual-studio-2010, initialization, unions

我在 Visual Studio 2010 中将一些旧代码从 C 移植到 C++，我遇到了这个问题：

```
typedef struct OptionDef {
    const char *name;
    int flags;
    union {
        void *dst_ptr;
        int (*func_arg)(void *, const char *, const char *);
        size_t off;
    } u;
    const char *help;
    const char *argname;
} OptionDef;

static const OptionDef options[] = {
    { "x", HAS_ARG, { .func_arg = opt_width }, "force displayed width", "width" },
    ... 
```

现在失败并出现语法错误。我已经看到[在 C++ 中静态初始化匿名联合](https://stackoverflow.com/questions/3031605/statically-initialize-anonymous-union-in-c)的响应，但是重载构造函数将不起作用，因为我正在设置一个数组。有没有其他方法可以做到这一点（而不是仅仅重写代码不使用联合）？

更新：我应该更具体 - 数组包含使用联合的所有部分的不同初始化器：

```
static int is_full_screen;

    { "fs", OPT_BOOL, { &is_full_screen }, "force full screen" }, 
```

所以仅仅改变工会的顺序是无济于事的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T03:03:27.247

C++ 没有 C 的`.member`初始化语法。

您可以对联合使用聚合初始化，但只能在第一个成员上使用。

因此，用您要设置为第一个成员的那个重写它：

```
union {
    int (*func_arg)(void *, const char *, const char *);
    void *dst_ptr;
    size_t off;
} u;

static const OptionDef options[] = {
    { "x", HAS_ARG, { opt_width }, "force displayed width", "width" }, 
```

你也可以给你的结构一个构造函数——C++11应该允许你使用大括号初始化器。

例子：

```
struct foo {
    int flags;
    struct uwrap {
      uwrap(int (*func_arg)(void *, const char *, const char *))
      : func_arg(func_arg) {}
      uwrap(int off)
      : off(off) {}
      union {
          void *dst_ptr;
          int (*func_arg)(void *, const char *, const char *);
          int off;
      };
    } u;
};

int func(void *, const char *, const char *) {}

int main() {
    foo f[] = { { 1, {func}}, { 2, {0}} };
} 
```

在 C++03 中，如果结构具有构造函数，则可以使用临时对象来执行此操作：

```
foo f[] = { foo(1, func), foo(3, 0) }; 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-30T03:01:06.397

只需这样做：

```
static const OptionDef options[] = {
   { "x", HAS_ARG, {opt_width }, "force displayed width", "width" },
    ... 
```

# java - Netty：在 ChannelBuffer 中来回交换 ByteOrder

> ID：13638350
> 
> 赞同：3
> 
> 时间：2012-11-30T02:54:55.693
> 
> 标签：java, netty, endianness

我目前正在使用 Netty 3.5.10.Final 为使用具有混合字节顺序的二进制协议的服务器实现客户端。也就是说，在协议中有很多情况，我必须以大端顺序读取/写入一组字节，然后以小端顺序读取另一组字节，然后再切换回大端。

我发现（据我所知）没有一种简单的方法来处理这种情况，特别是当字节顺序不同时 ChannelBuffers.wrappedBuffer(ChannelBuffer buf) 抛出 IllegalArgumentException 。我正在学习 Netty 和这个协议，所以当我开始的时候我不知道我会遇到这个问题。

其他人是如何处理这个问题的，尤其是在 Netty 3.x 框架的范围内？不过，我很想听听所有解决方案。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-03T05:48:34.837

如果您正在实现的协议具有混合字节顺序的字段，那么您可以选择一个字节顺序作为默认值（例如大端）并交换特定字段的字节顺序：

```
ChannelBuffer buf = ...;
int littleEndianField = ChannelBuffers.swapInt(buf.readInt()); 
```

根据字段的宽度，您可以使用以下之一：`swapShort()`、`swapMedium()`、`swapInt()`和`swapLong()`。

# asp.net - Asp.net 菜单 XML 无法正确读取

> ID：13638352
> 
> 赞同：0
> 
> 时间：2012-11-30T02:55:02.553
> 
> 标签：asp.net

我正在构建我的第一个 asp.net 应用程序，我插入了菜单控件（水平）并将其绑定到我制作的 XML 文件。不幸的是，在呈现页面时，菜单显示名为 SubMenu、SubMenu、SubMenu 的子项，并且我的文本属性未应用，链接也始终指向 #。我在网上查看了其他人的代码，我无法发现差异。代码：

```
<%@ Master Language="C#" AutoEventWireup="true" CodeFile="OuterShell.master.cs" Inherits="OuterShell" %>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
<title></title>
<link href="~/Styles/style1.css" rel="Stylesheet" type="text/css" />

<asp:ContentPlaceHolder id="HeadContent" runat="server">
</asp:ContentPlaceHolder>
</head>
<body>

<form id="form1" runat="server">
<asp:Menu ID="Menu1" runat="server" DataSourceID="XmlDataSource1" 
    Orientation="Horizontal" BackColor="#F7F6F3" DynamicHorizontalOffset="2" 
    Font-Names="Verdana" Font-Size="0.8em" ForeColor="#7C6F57" 
    StaticSubMenuIndent="10px">
    <DynamicHoverStyle BackColor="#7C6F57" ForeColor="White" />
    <DynamicMenuItemStyle HorizontalPadding="5px" VerticalPadding="2px" />
    <DynamicMenuStyle BackColor="#F7F6F3" />
    <DynamicSelectedStyle BackColor="#5D7B9D" />
    <DynamicItemTemplate>
        <%# Eval("Text") %>
    </DynamicItemTemplate>
    <StaticHoverStyle BackColor="#7C6F57" ForeColor="White" />
    <StaticMenuItemStyle HorizontalPadding="5px" VerticalPadding="2px" />
    <StaticSelectedStyle BackColor="#5D7B9D" />
</asp:Menu>
<asp:XmlDataSource ID="XmlDataSource1" runat="server" 
    DataFile="~/App_Data/menu_h.xml" EnableCaching="False"></asp:XmlDataSource>

<div>
    <asp:ContentPlaceHolder id="MainContent" runat="server">
    </asp:ContentPlaceHolder>
</div>
</form>

</body>
</html> 
```

XML 代码：

```
<Main Text="Main Menu" url="~/Main.aspx"> 
<SubMenu Text="Start Configuring" url="~/Config1.aspx"></SubMenu>
<SubMenu Text="About Us" url="~/About.aspx"></SubMenu>
<SubMenu Text="Contact Us" url="~/Contact.aspx"></SubMenu>
</Main> 
```

任何帮助表示赞赏。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T17:10:12.863

我想到了。将菜单绑定到 XML 文件后，您必须转到：菜单属性->数据绑定（单击集合）->选择需要读取数据的菜单项，点击添加，然后选择添加的项目并编辑其属性，如用于读取 XML 文件中正确标签的文本和 URL。就是这样，数据现在被完美读取了。

这是一个图片解释： http: [//shawpnendu.blogspot.ca/2010/04/how-to-bind-menu-control-with-xml-file.html](http://shawpnendu.blogspot.ca/2010/04/how-to-bind-menu-control-with-xml-file.html)

干杯，L

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T03:22:36.010

修改您的数据绑定代码

```
<%# Eval("Text") %> 
```

至

```
<%# XPath("@Text") %> 
```

看看它是否有帮助。

# language-agnostic - 客户端-服务器连接响应超时问题

> ID：13638353
> 
> 赞同：1
> 
> 时间：2012-11-30T02:55:03.083
> 
> 标签：language-agnostic, timeout, client-server

用户`folder`在客户端和客户端代码中创建了一个 API 到服务器以使该用户持久化。但在某些情况下，我的服务器太忙以至于请求超时。服务器已执行我的请求，但在将响应发送回客户端之前超时。客户端的超时设置为 10 秒。此时客户端认为服务器尚未执行其请求（创建文件夹）并最终再次发送它。现在我在服务器上有 2 个文件夹，但用户在客户端只创建了 1 个文件夹。如何防止这种情况？

解决此问题的方法之一是对每个新请求使用唯一 ID。因此，ID 可以区分来自客户端的新旧请求。但这会导致将这些 ID 存储在我的服务器上，并对我想要避免的每个 API 调用进行查找。

另一种方法是增加超时时间。但我不想从 10 秒开始改变它。

有些事情告诉我有更好的解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T06:33:34.520

使用某种序列号，以便在您重新发送请求时，它具有与原始请求相同的序列号。然后服务器可以很容易地丢弃重复的请求。

您还应该研究*为什么*服务器响应如此缓慢。十秒钟对一台电脑来说是很**长**的时间。

# mysql - MYSQL查询，SQL

> ID：13638357
> 
> 赞同：2
> 
> 时间：2012-11-30T02:56:20.337
> 
> 标签：mysql, sql

我很难将一些查询放在一起。

```
SELECT `part_num`, COUNT(`part_num`) AS `total` 
    FROM `job_sheet` 
    WHERE `qty`!=0 AND `completion`=1 
    GROUP BY `part_num` 
    ORDER BY `total` DESC 
    LIMIT 10 
```

这基本上提取了最常见的零件编号，并显示了它在“总”变量中出现的次数。在这种情况下，我还限制了前 10 个零件号。这些零件编号还有一个数量列“数量”，显示有多少零件：

```
part_num | qty 

1001     | 1000
1004     | 200 
1003     | 360 
1001     | 1000
1001     | 1000 
```

在这种情况下，我的第一个语句将显示零件编号 1001 将出现 3 次，项目编号 4 将出现一次，依此类推。我的问题是我想将 qty 列与我的语句相加，以表明项目 1001 出现 3 次，“数量”总和为 3000。

关于如何做到这一点的任何想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-30T03:39:48.043

You don't need to use `DISTINCT` as you are already using a `GROUP BY`.

To show the sum you simply need to add the field with the `SUM()` function.

```
SELECT part_num, COUNT(part_num) AS total, SUM(qty) as total_qty 
    FROM job_sheet 
    WHERE qty!=0 AND completion=1 
    GROUP BY part_num 
    ORDER BY total DESC 
    LIMIT 10; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-30T02:59:00.393

使用 DISTINCT

```
SELECT DISTINCT part_num, COUNT(part_num) AS total 
FROM job_sheet WHERE qty!=0 AND completion=1 
GROUP BY part_num 
ORDER BY total DESC 
LIMIT 10 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-30T03:00:06.460

@JohnConde 的答案更有效（+1），但以防万一您想在 PHP 中执行此操作：

```
$totals= array();

foreach ($data as $v) {
    isset($totals[$v['part_num']])) ?
        $totals[$v['part_num']] += $v['qty'] :
        $totals[$v['part_num']] = $v['qty'];   
} 
```

# jsf - JSF 数据表项删除

> ID：13638363
> 
> 赞同：1
> 
> 时间：2012-11-30T02:57:07.173
> 
> 标签：jsf, xhtml

有一些与此类似的问题，但我还没有找到任何真正解决我的问题的东西。开始...

这里有一个可用的简化示例：

```
 http://134.154.10.163:8000/yyudatatable/ 
```

这些文件在这里可见：

[http://whywhyewej.sci.csueastbay.edu/~yyu/cs6522/facelets/datatable/](http://whywhyewej.sci.csueastbay.edu/~yyu/cs6522/facelets/datatable/)

令我困惑的是：当我检查一个不是最后一个项目并点击“删除”时，该项目被删除。（如果检查了多项，只有最上面的一项会消失。我现在不担心这种行为。）

当我刷新时，之前删除的项目正下方的项目也被删除。我可以重复这个，刷新和观察项目消失了，只要还有低于原始删除目标的项目。

我怀疑这与数据表呈现信息的方式有关；复选框的值可以达到新的目标。但我不知道如何阻止它。

提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T05:54:44.337

这是由于表单而发生的`re-submission`。当您刷新页面时，您的表单会再次提交。这是 Web 应用程序中的常见问题。为了克服这个问题，只需在触发动作后重定向到当前页面。`JSF`最简单的方法是这样。
在方法的末尾添加这一行`check()`。

```
FacesContext.getCurrentInstance().getExternalContext().redirect("your_current_page.jsf"); 
```

# java - 对 PriorityQueue 使用比较器和单独的 compareTo 方法

> ID：13638364
> 
> 赞同：2
> 
> 时间：2012-11-30T02:57:07.770
> 
> 标签：java, priority-queue, comparator, compareto

如果我有一个由 T 个对象组成的 PriorityQueue，并且 T 有一个 compareTo() 方法并实现了可比较，但我的 PriorityQueue 也将比较器作为参数，那么我的 PriorityQueue 将寻找什么元素的顺序？

换句话说，哪一个决定了对象的优先级？compareTo() 方法还是提供的比较器？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-30T02:59:09.630

对于标准 PriorityQueue，如果您使用 构造它`Comparator<T>`，那么它将确定优先级。如果没有，那么`Comparable<T>`将决定它。[这在PriorityQueue API](http://docs.oracle.com/javase/7/docs/api/java/util/PriorityQueue.html)中有很好的描述

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-30T02:59:44.493

构造函数参数的文档`comparator`指出

> `comparator`- 用于排序此优先级队列的比较器。如果为 null，则顺序取决于元素的自然顺序。

这意味着当`comparator`指定 a 时，方法建立的自然顺序将`compareTo`被忽略。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-30T03:03:01.623

我正在阅读 Oracle 类实现的源[代码](http://www.docjar.com/html/api/java/util/PriorityQueue.java.html "Oracle 实现的源代码")`PriorityQueue`，它检查是否正在使用 Comparator 并首先使用它。否则，它使用 Comparable 对象。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-30T03:09:18.017

Comparable 定义集合中类的自然顺序，而 Comparator 允许您提供不同的顺序。如果您决定提供不同的比较器，它将覆盖自然顺序。通过不输入比较器，它将恢复到 compareTo 方法设置的自然顺序。

# java - 设计一个 api 获取服务、executorservice 和可变的端点列表

> ID：13638373
> 
> 赞同：1
> 
> 时间：2012-11-30T02:57:53.133
> 
> 标签：java, api, executorservice

我的服务必须进行几十个 API 调用，但是哪些调用以及我调用它们的频率取决于当前登录系统的用户。

因此，如果我目前有 500 人登录系统，他们的请求将优先于当前未登录的人。

我应该如何或使用哪种类型的集合是线程安全的，并且我可以根据用户优先级进行迭代和变异，以及我将根据应该首先进行哪些调用来确定的其他分数。

你会建议我使用 executorservice 来创建一组线程池吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T03:08:35.393

至于关于集合的第一个问题，您可以查看[PriorityBlockingQueue](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/concurrent/PriorityBlockingQueue.html)，它是 PriorityQueue 的线程安全版本。您可以实施比较器来为当前在线的用户优先考虑项目。我没有使用它，但我怀疑它不允许根据用户的当前状态动态更改顺序，而是在将项目添加到队列时根据用户的状态进行排序。

使用该集合，您可以使用 executorservice 或任何其他设备从队列中拉出并执行 API 调用。

# rest - Microsoft HPC 不允许使用 REST 接口取消作业

> ID：13638375
> 
> 赞同：0
> 
> 时间：2012-11-30T02:57:59.997
> 
> 标签：rest, hpc

我很难弄清楚为什么我不能取消工作。我运行的命令是：

```
 https://head_node_name:port/WindowsHPC/HPC_cluster_name/Job/job_identifier/Cancel 
```

来自[http://msdn.microsoft.com/en-us/library/hh560253(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/hh560253(v=vs.85).aspx) 我得到的错误是 *Service : Method not allowed*。我正在运行**Windows HPC 2008 R2 Service Pack 3**。我的调度器配置为排队，优雅抢占，自动调整资源，15秒任务取消宽限期。我在网格上有管理员权限。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T00:15:25.450

如果所需资源的请求方法不匹配（例如 GET 而不是 POST），通常会出现 405 错误（不允许使用方法）。

建议使用 Chrome 并安装扩展 Simple REST Client，这是一种即时发送 GET/POST 请求的简单方法。

# regex - 测试字符串中的数字元素

> ID：13638377
> 
> 赞同：58
> 
> 时间：2012-11-30T02:58:11.517
> 
> 标签：regex, r

我想测试一个字符串，看看哪些元素实际上可能是数字。我可以使用正则表达式来测试整数是否成功，但我希望查看哪些元素具有所有数字和 1 个或更少的小数。以下是我尝试过的：

```
x <- c("0.33", ".1", "3", "123", "2.3.3", "1.2r")
!grepl("[^0-9]", x)   #integer test

grepl("[^0-9[\\.{0,1}]]", x)  # I know it's wrong but don't know what to do 
```

我正在寻找一个逻辑输出，所以我希望得到以下结果：

```
[1] TRUE TRUE TRUE TRUE FALSE FALSE 
```

* * *

## 回答 #1

> 赞同：72
> 
> 时间：2012-11-30T03:01:33.167

也许有一些其他数据更复杂的原因会破坏这一点，但我的第一个想法是：

```
> !is.na(as.numeric(x))
[1]  TRUE  TRUE  TRUE  TRUE FALSE FALSE 
```

正如下面 Josh O'Brien 所指出的，这不会拾取诸如之类`7L`的东西，R 解释器会将其解析为整数 7。如果您需要将它们包含为“似是而非的数字”，则一种方法是使用正则表达式来挑选它们第一的，

```
x <- c("1.2","1e4","1.2.3","5L")
> x
[1] "1.2"   "1e4"   "1.2.3" "5L"   
> grepl("^[[:digit:]]+L",x)
[1] FALSE FALSE FALSE  TRUE 
```

...然后从使用`gsub`和索引的那些元素中去除“L”。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2014-01-16T06:14:58.760

我最近遇到了一个类似的问题，我试图编写一个函数来格式化从另一个函数作为字符串传递的值。格式化的值最终会出现在一个表格中，我想创建逻辑来识别 NA、字符串和数字的字符表示，以便我可以`sprintf()`在生成表格之前应用它们。

虽然阅读起来更复杂，但我确实喜欢这种方法的稳健性`grepl()`。我认为这得到了评论中提出的所有示例。

```
x <- c("0",37,"42","-5","-2.3","1.36e4","4L","La","ti","da",NA)

y <- grepl("[-]?[0-9]+[.]?[0-9]*|[-]?[0-9]+[L]?|[-]?[0-9]+[.]?[0-9]*[eE][0-9]+",x) 
```

这将被评估为（格式化以帮助可视化）：

```
x
[1] "0"  "37"   "42"  "-5"   "-2.3"   "1.36e4" "4L" "La"     "ti"     "da"     NA 

y
[1] TRUE  TRUE   TRUE  TRUE   TRUE     TRUE    TRUE FALSE   FALSE    FALSE    FALSE 
```

正则表达式为 TRUE：

*   不超过一位小数的正数或负数或
*   正整数或负整数（例如 4L）或
*   科学计数法中的正数或负数

如果数据集包含格式不佳的数字，则可以添加其他术语来处理没有前导数字的小数或带有小数点但小数点后没有数字的数字。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-08-01T02:01:38.870

[`check.numeric()`](https://www.rdocumentation.org/packages/varhandle/versions/2.0.3/topics/check.numeric)避免使用from package **varhandle**重新发明轮子。

该函数接受以下参数：

> **v**字符向量或因子向量。（强制的）
> 
> **na.rm**合乎逻辑。该函数是否应该忽略 NA？默认值为 FLASE，因为 NA 可以转换为数字。（选修的）
> 
> **only.integer**逻辑。只检查整数，不接受浮点数。默认值为假。（选修的）
> 
> **异常**包含字符串的字符向量，这些字符串应被视为有效转换为数字。（选修的）
> 
> **ignore.whitespace**逻辑。在评估向量是否可以转换为数字之前，请忽略前导和尾随空白字符。默认值为 TRUE。（选修的）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-03-24T16:20:53.817

另一种可能：

```
x <- c("0.33", ".1", "3", "123", "2.3.3", "1.2r", "1.2", "1e4", "1.2.3", "5L", ".22", -3)
locs <- sapply(x, function(n) {

    out <- try(eval(parse(text = n)), silent = TRUE)
    !inherits(out, 'try-error')

}, USE.NAMES = FALSE)

x[locs]
## [1] "0.33" ".1"   "3"    "123"  "1.2"  "1e4"  "5L"   ".22"  "-3"  

x[!locs]
## [1] "2.3.3" "1.2r"  "1.2.3" 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-11-13T01:30:46.037

受此处答案的启发，我的函数修剪前导和尾随空格，可以处理 na.strings，并且可以选择将 NA 视为数字。正则表达式也得到了增强。有关详细信息，请参阅帮助信息。所有你想要的！

```
check if a str obj is actually numeric
@description check if a str obj is actually numeric
#' @param x a str vector, or a factor of str vector, or numeric vector. x will be coerced and trimws.
#' @param na.strings case sensitive strings that will be treated to NA.
#' @param naAsTrue whether NA (including actual NA and na.strings) will be treated as numeric like
#' @return a logical vector (vectorized).
#' @export
#' @note Using regular expression
#' \cr TRUE for any actual numeric c(3,4,5,9.9) or c("-3","+4.4",   "-42","4L","9L",   "1.36e4","1.36E4",    NA, "NA", "","NaN", NaN): 
#' \cr positive or negative numbers with no more than one decimal c("-3","+4.4") OR
#' \cr positive or negative integers (e.g., c("-42","4L","39L")) OR
#' \cr positive or negative numbers in scientific notation c("1.36e4","1.36E4")
#' \cr NA, or na.strings
is.numeric.like <- function(x,naAsTrue=TRUE,na.strings=c('','.','NA','na','N/A','n/a','NaN','nan')){
    x = trimws(x,'both')
    x[x %in% na.strings] = NA
    # https://stackoverflow.com/a/21154566/2292993
    result = grepl("^[\\-\\+]?[0-9]+[\\.]?[0-9]*$|^[\\-\\+]?[0-9]+[L]?$|^[\\-\\+]?[0-9]+[\\.]?[0-9]*[eE][0-9]+$",x,perl=TRUE)
    if (naAsTrue) result = result | is.na(x)
    return((result))
} 
```

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2019-05-23T09:32:20.327

您还可以使用：

```
readr::parse_number("I am 4526dfkljvdljkvvkv") 
```

得到4526。

# html - 为什么隐藏的可见性必须在css中添加绝对位置？

> ID：13638386
> 
> 赞同：3
> 
> 时间：2012-11-30T02:59:11.047
> 
> 标签：html, css, xhtml

这是我的代码：

```
<html>
<head>
<style type="text/css">
 ul {list-style:none; margin:0; padding:0;   }
  li{ float:left;  background-color:#444444; text-align: center; width: 100px;  
  border-right:1px solid white; color: white; }

li ul li { float: none;
         border-top:1px solid white;}

         li ul { visibility:hidden; position: absolute;}
        li:hover ul {visibility:visible;}
  </style>
</head>
<body>
     <ul>
       <li>home</li>
       <li id="up">pages
       <ul class="down">
       <li>a</li>
       <li>b</li>
       <li>c</li>                  
      </ul>
       </li> 
     </ul>    
</body>
</html> 
```

在 li ul 部分，如果我只放置可见性：隐藏，它不会隐藏在那里仍然有一列，为什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-30T03:01:46.830

`visibility: hidden;`这与和说之间的区别有关`display: none;`

`visibility: hidden;`隐藏元素，但它仍然占用布局中的空间。

`display: none;`从文档中完全删除元素。它不占用任何空间，即使它的 HTML 仍在源代码中。

`position: absolute;`该元素完全从正常流程中移除。

# asp.net-mvc - Kendo：将父模型传递给 Ajax 数据源

> ID：13638387
> 
> 赞同：2
> 
> 时间：2012-11-30T02:59:25.340
> 
> 标签：asp.net-mvc, kendo-ui

我在 MVC4 [ChildAction] 中有一个简单的网格。

```
@(Html.Kendo().Grid(Model)    
   .Name("Grid")
.Columns(columns =>
{
    columns.Bound(p => p.UserLoginID);
    columns.Bound(p => p.UserName);
    columns.Bound(p => p.UserStatus);
})
.Pageable()
.Sortable()
.Scrollable()
.Filterable()
.DataSource(dataSource => dataSource
    .Ajax()
    .Read(read => read.Action("SearchUserResult_Read", "Search"))
)
) 
```

如何在上面的 .Ajax() 调用中传递父模型（搜索查询条件）？

请注意，我确实通过此代码将父模型传递给动作，因此将其放在控制器的 ChildAction 中，而不是在 Ajax 调用中：

```
@Html.Action("SearchUserResultGrid", "Search",
       new {SearchQueryCriteriaViewModel = Model}) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T07:33:36.690

你可以试试这个：

```
.Read(read => read.Action("SearchUserResult_Read", "Search", new { SearchQueryCriteriaViewModel = Model})) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-02T19:08:51.027

找到了：

只需将模型传递给视图：

```
View(model) 
```

然后在 Razor 视图中

```
@(Html.Kendo().Grid(Model) 
```

# ruby-on-rails - 使用引用创建 mongoid 模型

> ID：13638395
> 
> 赞同：1
> 
> 时间：2012-11-30T03:00:28.413
> 
> 标签：ruby-on-rails, model, reference, mongoid

我想创建引用另一个模型：

```
class User  
  include Mongoid::Document  
  field :name, :type => String
  belongs_to :post
end 

class Post
  include Mongoid::Document  
  field :content, :type => String  
  has_one :author, :class_name => 'User'
end 
```

但我很困惑如何使 mongoDB 根据模型文件（user.rb，post.rb）的规则工作。

首先我创建了模型抛出命令行：

```
rails generate model User name:string
rails generate model Post content:string 
```

然后我手动编辑了模型文件。我添加了这一行

```
belongs_to :post
has_one :author, :class_name => 'User' 
```

然后我在一个动作中运行代码：

```
post = Post.new
post.content = "text"
post.author = User.new
post.save! 
```

作为数据库的结果，我只看到内容字段。没有作者字段。

我应该怎么做，我做错了什么？

[ANSWER] 我混淆了 has_to 和 belongs_to 地方。所以正确的模型看起来像：

```
class User  
  include Mongoid::Document  
  field :name, :type => String
  has_many :post
end 

class Post
  include Mongoid::Document  
  field :content, :type => String  
  belongs_to :author, :class_name => 'User'
end 
```

其他一切都保持不变。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T21:02:34.977

尝试使用现有的用户对象而不是用户User.new，你也可以尝试使用belongs_to而不是has_one，我猜它存储相同的数据，祝你好运

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-30T15:18:20.000

好吧，首先我想说说帖子属于用户而不是相反的感觉更好，但这只是一个选择问题。

你是什​​么意思

> “在数据库中，我只看到内容字段。没有作者字段。”

如果您只是在 rails 控制台中键入“post”，您不应该看到作者，因为它是一个参考字段。如果要查看所有属性，`post.attributes`将列出所有内容，包括引用。并将`post.attributes.inspect`向您展示它是如何存储在数据库中的

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-12-11T10:37:18.130

已经六年了，但我会回复的。我发现解决这个问题的方法是在新方法中将嵌入式模型作为参数传递。在我的情况下，它是一个端点调用，所以我会收到一个 user_id 并想创建一个 post `p = Post.new(:user_id => params[:user_id])`。

这样做，当我保存新帖子时，它会进行正确的连接。我相信，对于新用户，如果您之前创建了用户，请保存它并使用 ID 建立连接，它应该像对我一样工作。

# php - PHP自动方法参数到同名属性？

> ID：13638396
> 
> 赞同：0
> 
> 时间：2012-11-30T03:00:37.287
> 
> 标签：php, eclipse

我在制作类时经常这样做，发现它真的很麻烦，尤其是当我有 20 个左右属性的类时。

有没有办法缩短这个：

```
class SomeClass {
    public $property1, $property2, $property3;

    function __construct($property1, $property2, $property3) {
        $this->property1 = $property1;
        $this->property2 = $property2;
        $this->property3 = $property3;
    }
} 
```

我真的用谷歌搜索了所有想到但没有找到任何结果的东西，所以这可能是不可能的？

如果无法以编程方式进行，有没有办法让 Eclipse PDT 根据我的要求自动为我写下这段代码？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T03:41:12.817

把它放到你的构造函数中

```
$reflector = new ReflectionClass(__CLASS__);
$parameters = $reflector->getMethod(__FUNCTION__)->getParameters();
$variables = get_class_vars(__CLASS__);
foreach($parameters as $parameter)
{
    foreach ($variables as $variable => $value)
    {
        if ($parameter->name == $variable)
        {
            $this->$variable = ${$parameter->name};
            break;
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T03:11:15.957

也许你可以使用一个数组

```
class SomeClass {
    public $property

    function __construct($property) {
        $this->property = $property;
    }
}
b = new SomeClass(array($property1, $property2, $property3)); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-30T04:30:34.100

我认为这就是你要找的：

```
class MyTestClass
{
    public $att1, $att2, $att3;

    function __construct($att1, $att2, $att3)
    {
         $class = new ReflectionClass('MyTestClass');
         $construct = $class->getConstructor();
         foreach ($construct->getParameters() as $param)
         {
            $varName = $param->getName();
            $this->$varName = ${$param->getName()};
         }

    }

    function confirm()
    {
        print "att1 = ". $this->att1 . "<br>";
        print "att2 = ". $this->att2 . "<br>";
        print "att3 = ". $this->att3 . "<br>";
    }

}

// Example for non-class functions
function init($a, $b, $c)
{

    $reflector = new ReflectionFunction('init');

    foreach ($reflector->getParameters() as $param) {
        print $param->getName(). " = ".${$param->getName()}."<br>";
    }

}

init ("first", "second", "third");
$testClass = new MyTestClass("fourth", "fifth", "sixth");
$testClass->confirm(); 
```

结果：

```
a = first
b = second
c = third
att1 = fourth
att2 = fifth
att3 = sixth 
```

# asp.net-mvc - asp.Net MVC - 在运行时或部署之前删除空格

> ID：13638398
> 
> 赞同：2
> 
> 时间：2012-11-30T03:00:59.640
> 
> 标签：asp.net-mvc

我有一个 asp.Net MVC 4 项目。在我的项目中只呈现大报告（使用 table html 元素）所以我有一个考虑：我应该在运行时删除空格，就像[我如何从 ASP.NET MVC 中删除空格一样＃ 输出？](https://stackoverflow.com/questions/5197225/how-can-i-remove-white-spaces-from-asp-net-mvc-output) 或在我编写 html 代码时删除所有空格。这意味着我将在部署之前手动删除 Visual Studio 中的所有空格

大家帮帮我？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T05:05:44.287

如果运行时解决方案（在链接中描述）在生产中不会成为问题，我想您正在尝试获得答案，对吗？好吧，正如这里提到的：

[String.Replace .NET Framework 的内存效率和性能](https://stackoverflow.com/questions/399798/)

你应该做一些自己的基准测试。可以肯定的是，`big report`为许多用户替换 a 的字符不会影响性能。

但我的建议是在运行时进行。在 AOP 过滤器中可能会更好。**一次**，当所有响应完成时（我正在做类似的功能替换一些字符串）。

```
public virtual void OnResultExecuted(ResultExecutedContext filterContext)
{
  // Change result as needed
  filterContext.HttpContext.Response.Filter = 
    new ResponseStream(filterContext.HttpContext.Response.Filter);
} 
```

这是溪流

```
protected class ResponseStream : MemoryStream
{
    readonly Stream _stream;
    public ResponseStream(Stream stream)
    {
        _stream = stream;
    }

    public override void Write(byte[] buffer, int offset, int count)
    {
        //base.Write(buffer, offset, count);
        string html = System.Text.Encoding.Default.GetString(buffer);

        // TODO - here remove spaces...

        byte[] outdata = System.Text.Encoding.Default.GetBytes(html);

        //write bytes to stream
        _stream.Write(outdata, 0, outdata.GetLength(0));
    }
} 
```

第二个想法，可能是在您的 IIS 上启用**动态压缩**（如果使用 IIS 7.0，请阅读[http://technet.microsoft.com/en-us/library/cc753681%28v=ws.10%29.aspx](http://technet.microsoft.com/en-us/library/cc753681%28v=ws.10%29.aspx)）

# python - httplib 调用内部服务器

> ID：13638400
> 
> 赞同：0
> 
> 时间：2012-11-30T03:01:08.157
> 
> 标签：python, internal, httplib

我编写了一个简单的程序来渲染请求国家的国旗 svg 图像。为了确保图像存在，我想先检查一下。但是，我得到以下异常： HTTPException: Deadline exceeded while waiting for HTTP response from URL: [http://localhost:8087/images/flag_images/Flag_of_Nepal.svg](http://localhost:8087/images/flag_images/Flag_of_Nepal.svg)

无论我为超时设置的值如何，都会发生这种情况。不能用相同的端口调用内部服务器吗？顺便说一句，我正在使用 GAE。

```
class backbone(Handler):
def render_front(self):
    User_id = self.request.cookies.get('user_id')
    if User_id:
        Valid_User = check_secure_val(User_id)
        if Valid_User:
            p  = UserAccount.get_by_id(int(Valid_User))
            User = p.User
        else:
            User = ""
    else:
        User = ""
    self.render("backbone.html", image = "")

def get(self):
    self.render_front()

def post(self):
    a = self.request.get('country')
    image = self.exists('localhost', 8087, ("/images/flag_images/Flag_of_%s.svg" %a))
    if image:
        self.render('backbone.html', image = '<img src = "/images/flag_images/Flag_of_%s.svg" alt="" width="60" height="45"/>'  % a)    
    else:
        self.render('backbone.html', image = '<img src = "/images/flag_images/NoFlag.svg" alt="" width="60" height="45"/>'  % a)    

def exists(self, site, port, path):
    conn = httplib.HTTPConnection(site, port, timeout= 40)
    conn.request('GET', path)
    response = conn.getresponse()
    conn.close()
    return response.status == 200 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T03:22:05.933

你不能像 GAE 那样使​​用 localhost。您需要一个外部 URL 引用。如果您尝试从本地计算机获取图像到 GAE，您需要在路由器上打开该端口，查看[http://portforward.com/](http://portforward.com/)，然后按照从[https://www获取的 IP 地址插入您的 IP 地址.google.com/?q=what+is+my+ip](https://www.google.com/?q=what+is+my+ip)作为网址。例如，对我来说，它会是这样的`http://67.84.162.157:8000/images/usa.svg`

# javascript - 空函数和只返回什么的函数之间有区别吗？

> ID：13638404
> 
> 赞同：1
> 
> 时间：2012-11-30T03:01:38.773
> 
> 标签：javascript

> **可能重复：**
> [有和没有返回语句的函数之间有区别吗？](https://stackoverflow.com/questions/9435703/is-there-a-difference-between-a-function-with-and-without-a-return-statement)

空函数和只返回什么的函数之间有区别吗？

空函数：

```
function a() {
} 
```

什么都不返回的函数：

```
function b() {
    return;
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-30T03:02:29.627

不，`return`如果在第一个中省略，则暗示。两人都回来了`undefined`。

```
// In the console:
a();
// undefined
b();
// undefined 
```

为了进一步扩展，这与返回不同`null`：

```
function c() {
    return null;
}

c();
// null (which is a value, albeit a null one)

// Because
a() === c();
// false
null === undefined;
// false 
```

# c++ - 覆盖单个文件的编译标志

> ID：13638408
> 
> 赞同：129
> 
> 时间：2012-11-30T03:02:37.387
> 
> 标签：c++, cmake, compiler-warnings

我想使用一组全局标志来编译项目，这意味着在我的顶级 CMakeLists.txt 文件中我指定了：

```
ADD_DEFINITIONS ( -Wall -Weffc++ -pedantic -std=c++0x ) 
```

但是，对于子目录中的特定文件（比如说“foo.cpp”），我想将编译标志切换为不应用 -Weffc++（包含的商业库我无法更改）。为了简化仅使用 -Wall 的情况，我尝试了：

```
 SET_SOURCE_FILES_PROPERTIES( foo.cpp PROPERTIES COMPILE_FLAGS -Wall )
 ADD_EXECUTABLE( foo foo.cpp ) 
```

，这不起作用。我也试过

```
SET_PROPERTY( SOURCE foo.cpp PROPERTY COMPILE_FLAGS -Wall )
ADD_EXECUTABLE( foo foo.cpp ) 
```

和

```
ADD_EXECUTABLE( foo foo.cpp )
SET_TARGET_PROPERTIES( foo PROPERTIES COMPILE_FLAGS -Wall ) 
```

，其中两者都不起作用。

最后，我尝试删除此定义：

```
REMOVE_DEFINITIONS( -Weffc++ )
ADD_EXECUTABLE( foo foo.cpp )
ADD_DEFINITIONS( -Weffc++ ) 
```

，这也不起作用（意思是，我收到了很多关于商业图书馆的风格警告）。（**注意：如果我在构建可执行文件后不重新包含 -Weffc++ 指令，则会抑制警告。）

我还尝试暂时删除编译标志： [http://www.cmake.org/pipermail/cmake/2007-June/014614.html](http://www.cmake.org/pipermail/cmake/2007-June/014614.html) ，但这没有帮助。

没有一个优雅的解决方案吗？

* * *

## 回答 #1

> 赞同：144
> 
> 时间：2012-11-30T05:19:46.773

您上面的尝试正在向您的文件/目标添加更多标志，而不是像您预期的那样覆盖。例如，来自[源文件属性的文档 - COMPILE_FLAGS](http://www.cmake.org/cmake/help/v3.3/prop_sf/COMPILE_FLAGS.html "CMake v3.3 文档")：

> 当此源文件构建时，这些标志将添加到编译标志列表中。

您应该能够`-Weffc++`通过执行来取消 foo.cpp 的标志

```
set_source_files_properties(foo.cpp PROPERTIES COMPILE_FLAGS -Wno-effc++) 
```

这应该有在编译器命令中添加`-Wno-effc++`after的效果`-Weffc++`，后者设置获胜。要查看完整的命令并检查是否确实如此，您可以执行

```
make VERBOSE=1 
```

顺便说一句，GNU C++ 标准库的维护者之一对这个答案提出了相当负面`-Weffc++`的[看法](https://stackoverflow.com/a/11529328/2556117)。

另一点是，您[`add_definitions`](http://www.cmake.org/cmake/help/v3.3/command/add_definitions.html "CMake v3.3 文档")在将其用于编译器标志而不是预期的预处理器定义的意义上是在滥用。

最好使用[`add_compile_options`](http://www.cmake.org/cmake/help/v3.3/command/add_compile_options.html "CMake v3.3 文档")

```
add_compile_options(-Wall -Weffc++ -pedantic -std=c++0x) 
```

或者对于 CMake 版本 < 3.0 来执行类似的操作：

```
set(CMAKE_CXX_FLAGS "${CMAKE_CXX_FLAGS} -Wall -Weffc++ -pedantic -std=c++0x") 
```

* * *

为了回答下面评论中的进一步问题，我认为不可能可靠地*删除*单个文件上的标志。原因是对于任何给定的源文件，它都应用了其目标的[`COMPILE_OPTIONS`](http://www.cmake.org/cmake/help/v3.3/prop_tgt/COMPILE_OPTIONS.html "CMake v3.3 文档")和¹，但这些不会显示在该源文件的任何属性中。[`COMPILE_FLAGS`](http://www.cmake.org/cmake/help/v3.3/prop_tgt/COMPILE_FLAGS.html "CMake v3.3 文档")

您可以查看从目标中剥离问题标志`COMPILE_OPTIONS`，然后将其分别应用于目标的每个源，并根据需要从特定源文件中省略它。

然而，虽然这可以在许多情况下工作，但它有几个问题。

第一源文件的[属性](http://www.cmake.org/cmake/help/v3.3/manual/cmake-properties.7.html#properties-on-source-files "源文件属性的 CMake v3.3 文档")不包括`COMPILE_OPTIONS`. `COMPILE_FLAGS`这是一个问题，因为`COMPILE_OPTIONS`目标的 可以包含[生成器表达式](http://www.cmake.org/cmake/help/v3.3/manual/cmake-generator-expressions.7.html "生成器表达式的 CMake v3.3 文档")，但`COMPILE_FLAGS`不支持它们。所以你必须在搜索你的标志时适应生成器表达式，事实上，如果你的标志包含在一个或多个中，你甚至可能不得不“解析”生成器表达式，以查看它是否应该重新应用于剩余的源文件。

其次 - 从 CMake v3.0 开始，目标可以指定[`INTERFACE_COMPILE_OPTIONS`](http://www.cmake.org/cmake/help/v3.3/prop_tgt/INTERFACE_COMPILE_OPTIONS.html "CMake v3.3 文档"). 这意味着你的目标的依赖可以`COMPILE_OPTIONS`通过它的`INTERFACE_COMPILE_OPTIONS`. 因此，您还必须递归地遍历所有目标的依赖项（这不是一项特别容易的任务，因为[`LINK_LIBRARIES`](http://www.cmake.org/cmake/help/v3.3/prop_tgt/LINK_LIBRARIES.html "CMake v3.3 文档")目标的列表也可以包含生成器表达式）以找到应用问题标志的任何内容，并尝试将其从那些目标”`INTERFACE_COMPILE_OPTIONS`也是。

在这个复杂的阶段，我希望向 CMake 提交一个补丁，以提供从源文件中无条件删除特定标志的功能。

* * *

1：请注意，与`COMPILE_FLAGS`源文件上的`COMPILE_FLAGS`属性不同，目标上的属性已被弃用。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2018-08-13T16:32:56.430

只是添加到@Fraser 的正确答案。

如果您想将特殊标志添加到特定文件夹，您可以执行以下操作：

```
file(GLOB SPECIAL_SRC_FILES
        "path/one/src/*.cpp"
        "path/two/src/*.cpp")
set_property(SOURCE ${SPECIAL_SRC_FILES} PROPERTY COMPILE_FLAGS -Wno-effc++) 
```

或者

```
file(GLOB SPECIAL_SRC_FILES
        "path/one/src/*.cpp"
        "path/two/src/*.cpp")
set_source_files_properties(${SPECIAL_SRC_FILES} PROPERTIES COMPILE_FLAGS -Wno-effc++) 
```

请注意，不建议使用[此处讨论的 GLOB](https://stackoverflow.com/a/1060061/2248627)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-11-14T08:08:21.620

使用@Fraser 答案，我创建了以下内容来处理 Qt 包含，因为该变量包含由分号分隔的多个路径。这意味着我必须首先添加一个`foreach()`循环并*手动*创建包含标志。但这允许我有一个例外：*foo.cpp*（该文件现在使用 Qt，但从长远来看，我想删除该依赖项，并且我想确保 Qt 不会在其他任何地方蔓延）。

```
find_package(Qt5Core REQUIRED)
set(QT_INCLUDE_PROPERTIES "")
foreach(DIR ${Qt5Core_INCLUDE_DIRS})
    set(QT_INCLUDE_PROPERTIES "${QT_INCLUDE_PROPERTIES} -isystem ${DIR}")
endforeach()
set_source_files_properties(foo.cpp PROPERTIES
    COMPILE_FLAGS
        ${QT_INCLUDE_PROPERTIES}
) 
```

另请注意，我使用`-isystem`而不是`-I`避免 Qt 标头生成的一些警告（我打开了大量警告）。

# javascript - google-maps-api-3 的动画热图

> ID：13638411
> 
> 赞同：0
> 
> 时间：2012-11-30T03:02:49.937
> 
> 标签：javascript, google-maps, google-maps-api-3, heatmap

这让我发疯...

我正在使用带有热图的谷歌地图 api v3。我已经成功绘制了数据点，那里没有问题。但是，我想要一个无限循环的动画。目前，我有以下代码。（地图出现，但没有任何数据点。）

```
var _data = [];
pointArray = new google.maps.MVCArray(_data);
var heatmap = new google.maps.visualization.HeatmapLayer({
    data: pointArray,
});

heatmap.setData(_data);
heatmap.setMap( map );

play = function(){
    for( var j = 0; j < data_arr.length; j++ ){
        pointArray.clear();

        for( var i = 0; i < data_arr[j].length; i++ ){
            pointArray.push( new google.maps.LatLng(data_arr[j][i]['lat'], data_arr[j][i]['lon']) );
        }

        setInterval(function(){
            play();
        }, 3000);
    }
}

google.maps.event.addListenerOnce(map, "idle", function(){
    play();
}); 
```

任何帮助，都是最受欢迎的！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T17:35:19.907

问题是热图数据在当前执行的脚本暂停之前不会更新。到那时，所有数据都已更改，因此没有任何动画。

不幸的是，这意味着简单的方法行不通。无需直接循环更改数据，您将不得不将数据划分为动画步骤，仅更改几个数据点，然后使用 setTimeout 调用链中的下一步。这将暂停，以便库有机会实际进行您指定的更改。

另外，您的使用`setInterval`不正确（我相信您的意思是`setTimeout`在这种情况下）。您正在`setInterval`循环调用并且永远不会清除它。循环的每次迭代都会导致新的定时执行，因此您很快就会有数百个间隔都调用您的`play`函数。`setTimeout`只会再执行一次。

# javascript - 选择导航项后将类添加到导航项

> ID：13638420
> 
> 赞同：2
> 
> 时间：2012-11-30T03:04:43.947
> 
> 标签：javascript, jquery, css, sinatra

我的导航设置如下：

```
<ul class="nav nav-pills">
  <li><a href="/questions/all">All</a></li>
  <li><a href="/questions/popular">Popular</a></li>
  <li><a href="/questions/fun">Fun</a></li>
</ul> 
```

单击其中之一时，它会映射到我的 Sinatra 路线（即`get '/questions/:filter' do...`）。单击其中任何一个都会更新页面，但它们仍然使用相同的`.erb`视图。

我试图弄清楚如何将类“ `active`”应用于`<li>`当前正在查看的导航项。这样，导航项将突出显示，因此用户将知道他们在哪个视图上（无需查看实际 URL）。

任何帮助将非常感激。如果需要，我可以访问 jQuery。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-30T03:14:28.150

您可以使用`window.location.pathname`变量来选择锚标记。

```
$('a[href="' + window.location.pathname + '"]').addClass('active') 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-30T03:08:41.773

使用 jQuery，您可以添加一个类来指示它处于活动状态：

```
$(this).addClass('active'); 
```

将 (this) 替换为您希望添加类的任何 div 元素。这将允许您根据 div 类 ID 设置样式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-30T03:28:39.207

试试这个：

```
$(document).ready(function () {
   $('.nav a[href="' + window.location.pathname + '"]').addClass('active')
 }); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-30T03:33:36.063

如果您正在重新加载页面，您可以通过 erb 模板中的 ruby​​ 使用 ruby​​，如果当前路由与 li 标签的关联锚 href 匹配，则将类添加到 li 标签。

在控制器中：

```
...
@body_class = "page2"
@nav_links = ['page1', 'page2', 'page3']
... 
```

在视图模板中：

```
<body class="<%= @body_class %>">
...
<ul class="nav">
    <% @nav_links.each do |link| %>
        <li <% if link.eql?(@body_class) %>class="selected"<% end %>><a href="<%= link %>"><%= link %></a></li>
    <% end %>
</ul>
...
</body> 
```

如果您只想使用当前 URL 并跳过控制器：

```
<ul class="nav">
    <li class="<% if request.fullpath.eql?('/this/items/endpoint') %>selected<% end %>"><a href="/this/items/endpoint">Page 1</a></li>
</ul> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-30T03:34:41.887

知道您的视图每次都由您的 sinatra webapp 提供服务，我建议您使用变量和简单的 if 语句向其中添加逻辑。一种（在 php 中）：

```
<ul>
<?php
  $filters = array("all", "popular", "fun");
  foreach($filters as $filter):
?>

<li>
<a href="/questions/<?php echo $filter; ?>"
  <?php if ($filter == $currentfilter) { ?>class="active"<?php }; ?>>
  <?php echo $filter; ?>
</a>
</li>

<?php endforeach; ?>
</ul> 
```

重要的是，您的视图直接提供。向活动页面添加类不是 javascript 的业务，除非您使用基于 javascript 的导航（充满 ajax 等）。

# python - 更改 `voting_approval` 的输出

> ID：13638424
> 
> 赞同：0
> 
> 时间：2012-11-30T03:05:38.450
> 
> 标签：python, list

我正在尝试编写一个函数，该函数接受一个参数，该参数是 4 元素列表的列表，代表单次骑行的批准选票；内部列表元素的顺序对应于称为 的当事方列表中当事方的顺序`PARTY_INDICES`。

“赞成”票数最多的一方获胜。

它应该返回一个 2 元组，其中第一个元素是获胜方的名称，第二个元素是一个四元素列表，其中包含每一方的赞成票数。列表元素的顺序对应于 中各方的顺序`PARTY_INDICES`。

我的代码是：

```
def voting_approval(approval):
    parties = ['NDP','GREEN','LIBERAL','CPC']
    values = [0,0,0,0]
    for decision in approval:
        for no, item in enumerate(decision):
            if item == 'Yes':
                values[no] += 1
                total = [(values) for x in zip(approval)]

    return (parties[values.index(max(values))], total) 
```

如果我尝试：

```
voting_approval([['Yes', 'No', 'Yes', 'No'],['No', 'No', 'Yes', 'No']]) 
```

它吐出：

```
('LIBERAL', [[1, 0, 2, 0], [1, 0, 2, 0]]) 
```

但我希望结果是：

```
('LIBERAL', [1, 0, 2, 0]) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T17:37:01.647

本质上，如果您将每个投票列表视为列表中的一行`approval`，那么您要做的就是统计或汇总列中出现的赞成票数。做到这一点的一个好方法是转置（或交换行和列）这个列表列表，然后合计每个结果行中的数量。

这里的代码显示了这是如何轻松完成的。请注意，返回的元组中的第一项是*`list`*一方名称，而不是单个值，因为可能有关联，如所示的测试值所示。我还会考虑更改`approval`以`approvals`更好地反映其内容。

```
approval = [['Yes', 'No', 'Yes', 'No'],
            ['No', 'No', 'Yes', 'No'],
            ['Yes', 'No', 'No', 'No'],]

def voting_approval(approval):
    parties = ['NDP','GREEN','LIBERAL','CPC']
    tallies = [sum(int(v =='Yes') for v in col) for col in zip(*approval)]
    most_yes = max(tallies)
    return ([party for i,party in enumerate(parties) if tallies[i] == most_yes], tallies)

print voting_approval(approval) 
```

输出：

# 

```
(['NDP', 'LIBERAL'], [2, 0, 2, 0]) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T03:26:39.580

尚未进行广泛测试，但您可以尝试：

```
In [7]: def voting_approval(approval):
   ...:     parties = ['NDP', 'GREEN', 'LIBERAL', 'CPC']
   ...:     values = [sum(1 if i == 'Yes' else 0 for i in group) for group in zip(*approval)]
   ...:
   ...:     return (parties[values.index(max(values))], values)
   ...:

In [8]: voting_approval([['Yes', 'No', 'Yes', 'No'],['No', 'No', 'Yes', 'No']])
Out[8]: ('LIBERAL', [1, 0, 2, 0]) 
```

这会在开始时将您的列表压缩在一起，将`Yes`'s 相加并创建一个包含总计的新列表，然后用于提取所需的信息。如果这不是您想要的，很高兴进行调整。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-30T03:27:07.710

您已经将每方的“是”数量存储在值中。只需按以下方式更改您的代码。

```
def voting_approval(approval):
    parties = ['NDP','GREEN','LIBERAL','CPC']
    values = [0,0,0,0]
    for decision in approval:
        for no, item in enumerate(decision):
            if item == 'Yes':
                values[no] += 1

    return (parties[values.index(max(values))], values) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-30T03:32:50.360

你不需要那个`total`变量。`values`已经是你想要的了。

```
def voting_approval(approval):
    parties = ['NDP','GREEN','LIBERAL','CPC']
    values = [0,0,0,0]
    for decision in approval:
        for no, item in enumerate(decision):
            if item == 'Yes':
                values[no] += 1

    return (parties[values.index(max(values))], values)

approvals = [
    ['Yes', 'No', 'Yes', 'No'],
    ['No', 'No', 'Yes', 'No'],
]

print voting_approval(approvals) 
```

* * *

```
matt@wraith:~/Dropbox/Public/StackOverflow$ python 13638424.py 
('LIBERAL', [1, 0, 2, 0]) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-30T03:34:10.717

我对其进行了格式化，以便您可以看到您的代码几乎得到了答案。

```
def voting_approval(approval):
    parties = ['NDP','GREEN','LIBERAL','CPC']
    values = [0,0,0,0]
    for decision in approval:
        for no, item in enumerate(decision):
            if item == 'Yes':
                values[no] += 1
                total = [(values) for x in zip(approval)]

    return (parties[values.index(max(values))], total)

almostAnswer = voting_approval([['Yes', 'No', 'Yes', 'No'],['No', 'No', 'Yes', 'No']])
answer = [sum(a) for (a) in zip(almostAnswer[1][0], almostAnswer[1][1])]
print answer 
```

您有问题`[sum(a) for a in zip(array1,array2)]`，但是您指向了批准中包含的元素的错误部分-因此需要`[1][0]`and `[1][1]`。

# sql-server - 对特定数据库的最后执行查询

> ID：13638435
> 
> 赞同：88
> 
> 时间：2012-11-30T03:07:48.557
> 
> 标签：sql-server, sql-server-2012

我知道如何在 SSMS 中使用以下 SQL 获取最后执行的查询 -

```
SELECT deqs.last_execution_time AS [Time], dest.text AS [Query]
FROM sys.dm_exec_query_stats AS deqs
CROSS APPLY sys.dm_exec_sql_text(deqs.sql_handle) AS dest
ORDER BY deqs.last_execution_time DESC 
```

但我想为特定的数据库找到它们。如果不需要，我不想使用 SQL Profiler。另外，我不认为 SQL Profiler 将允许我查看在未打开分析的情况下已经运行的查询。我需要从 SSMS 执行此操作。

* * *

## 回答 #1

> 赞同：100
> 
> 时间：2013-05-16T18:27:00.397

这对我来说可以在实例中的任何数据库上查找查询。我是实例的系统管理员（检查您的权限）：

```
SELECT deqs.last_execution_time AS [Time], dest.text AS [Query], dest.*
FROM sys.dm_exec_query_stats AS deqs
CROSS APPLY sys.dm_exec_sql_text(deqs.sql_handle) AS dest
WHERE dest.dbid = DB_ID('msdb')
ORDER BY deqs.last_execution_time DESC 
```

这与 Aaron Bertrand 提供的答案相同，但没有放在答案中。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2021-10-14T14:51:52.593

以下对我来说非常有效：希望这会有所帮助

```
SELECT
    deqs.last_execution_time AS [Time], 
    dest.TEXT AS [Query]
 FROM 
    sys.dm_exec_query_stats AS deqs
    CROSS APPLY sys.dm_exec_sql_text(deqs.sql_handle) AS dest
ORDER BY 
    deqs.last_execution_time DESC 
```

# jquery - 使用 jquery 更改表单操作 URL

> ID：13638442
> 
> 赞同：8
> 
> 时间：2012-11-30T03:08:55.683
> 
> 标签：jquery, forms

我需要根据页面的主体类更改表单操作 URL。到目前为止我有

```
$('document').ready(function () {
 if ($('body').hasClass('hosting')) {
      $('#quoteForm').attr('action', 'hostingURL');
      }
}); 
```

而且效果很好。但我需要扩展它以包含更多的身体类。我试过了

```
$('document').ready(function () {
 if ($('body').hasClass('hosting')) {
      $('#quoteForm').attr('action', 'hostingURL');
      }
 elseif ($('body').hasClass('workspace')) {
      $('#quoteForm').attr('action', 'workspaceURL');
      }
 else{}
}); 
```

但它不起作用。任何建议表示赞赏。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-30T03:14:38.043

`elseif`在like中添加空格`else if`

# sql - SQL 组求和

> ID：13638443
> 
> 赞同：1
> 
> 时间：2012-11-30T03:09:04.573
> 
> 标签：sql, sum

好的，假设我有两列，Person 和 Donation。例如，将这些作为行：

```
+++++++++++++++
Fred | $1000 
Fred |  $500 
Bob  | $1000
Bob  | $7000
Sally|  $500
Joe  |  $100  
+++++++++++++++ 
```

我怎样才能让它显示以下内容？

```
+++++++++++++++
Fred | $1500
Bob  | $8000
Sally|  $500
Joe  |  $100  
+++++++++++++++ 
```

换句话说，我如何将某个人的所有捐款归为一类，并加以总结？可以实现此目的的示例查询是什么？（如果可能的话，一般来说，这不涉及在 select/sum 子句中单独命名人员）

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-30T03:11:27.153

当您使用`GROUP BY`带有聚合函数（如 ）的子句时，`SUM`将为每个组计算聚合。

```
SELECT Name, SUM(Donation) FROM Donations GROUP BY Name 
```

如果您想获得更具体的结果，例如总捐款超过 500 美元的人，请引入一个`HAVING`条款。这有点像`WHERE`聚合结果：

```
SELECT Name, SUM(Donation) FROM Donations GROUP BY Name 
    HAVING SUM(Donation) > 500 
```

SQL 小提琴：[http ://sqlfiddle.com/#!2/2de84/1/0](http://sqlfiddle.com/#!2/2de84/1/0)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-30T03:11:03.813

```
select sum(a.donation),a.person from a_table as a group by a.person; 
```

a_table 是你的桌子；

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-30T06:25:03.973

您可以为此使用以下查询：

```
SELECT Name "Name", SUM(Donation) "Donation" FROM Donations GROUP BY Name 
```

# jsp - 检查jsp文件中的servlet会话属性值

> ID：13638446
> 
> 赞同：11
> 
> 时间：2012-11-30T03:09:37.103
> 
> 标签：jsp, servlets

我有一个没有框架的 java 应用程序。它由用于视图的 jsp 文件和用于业务逻辑的 servlet 组成。我必须将用户会话设置为带有 firstName 参数的 servlet。在 jsp 文件中，我需要检查我的 firstName 参数是否有值。如果设置了firstName参数，我需要在jsp文件中显示一些html。如果没有设置，我需要在jsp文件中显示不同的html。

Servlet.java：

```
HttpSession session = request.getSession();
session.setAttribute("firstName", customer.getFristName());
String url = "/index.jsp";
RequestDispatcher dispatcher = getServletContext().getRequestDispatcher(url);
dispatcher.forward(request, response); 
```

header.jsp：

```
// Between the <p> tags bellow I need to put some HTML with the following rules
// If firstName exist: Hello ${firstName} <a href="logout.jsp">Log out</a>
// Else: <a href="login.jsp">Login</a> or <a href="register.jsp">Register</a>

<p class="credentials" id="cr"></p> 
```

最好的方法是什么？

更新：

这是我在 JSTL 上找到的一个很棒的教程，以防万一有人需要它： [http ://www.tutorialspoint.com/jsp/jsp_standard_tag_library.htm](http://www.tutorialspoint.com/jsp/jsp_standard_tag_library.htm)

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-30T03:16:00.337

```
<% if (session.getAttribute("firstName") == null) { %>
    <p> some content </p>
<% } else {%>
    <p> other content </p>
<% } %> 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2016-10-26T05:03:40.037

我认为最好的方法是使用 jstl 标签。因为对于简单的 jsp 应用程序，将所有 java 代码添加到 html 可能是个好主意，但更重的应用程序最好在 html 上使用最少的 java 代码。（从逻辑中分离视图层）（阅读更多[https://stackoverflow。 com/a/3180202/2940265](https://stackoverflow.com/a/3180202/2940265)）
为了您的期望，您可以轻松使用如下代码

```
<c:if test="${not empty firstName}">
    <%--If you want to print content from session--%>
    <p>${firstName}</p>

    <%--If you want to include html--%>
<%@include file="/your/path/to/include/file.jsp" %>

    <%--include only get wrong if you give the incorrect file path --%>
</c:if>
<c:if test="${empty firstName}">
    <p>Jaathi mcn Jaathi</p>
</c:if> 
```

如果您没有正确包含 jstl，您将无法获得预期的输出。请参阅此事件以了解此类事件[https://menukablog.wordpress.com/2016/05/10/add-jstl-tab-library-to-you-project-correctly/](https://menukablog.wordpress.com/2016/05/10/add-jstl-tab-library-to-you-project-correctly/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-30T05:01:55.467

在servlet中你可以写如下

```
 HttpSession session = request.getSession(true);
        session.setAttribute("firstName", customer.getFristName())
        response.sendRedirect("index.jsp"); 
```

`request.getSession(true)`如果它不存在任何会话，则返回一个新会话，否则它将返回当前会话。并且，在`index.jsp`页面中您可以执行以下操作：

```
<%
if(session.getAttribute("firstName")==null) {
%>
<jsp:include page="firstPage.html"></jsp:include>
<%
} else {
%>
<jsp:include page="secondPage.html"></jsp:include>
<%
}%> 
```

在这里，如果`firstName`为 null 那么`firstPage.html`将被包含在页面中，否则`secondPage.html`。

# php - 从 Facebook 用户信息中获取真实信息

> ID：13638450
> 
> 赞同：1
> 
> 时间：2012-11-30T03:10:10.553
> 
> 标签：php, parsing, facebook-graph-api, get, userinfo

我已经阅读了 Google 上的官方文档和大量文档。我想打印用户信息，但是当我运行我的代码时，我得到了这个：

```
Array
(
[id] => xxxx
[name] => Vinicius 
[first_name] => Vinicius
[last_name] => M
[link] => http://www.facebook.com/xxx
[username] => vinicius
[birthday] => 01/04/1989
... 
```

我的代码是，获取用户信息：

```
//if user is logged in and session is valid.
if ($user){
//get user basic description
$userInfo = $facebook->api("/$user"); 
```

并展示：

```
<?php d($userInfo);  ?> 
```

我想这样打印（或类似的东西）：

```
Name: Vinicius
Last name: M
Birthday: 01/04/1989 
```

我遵循了 Thinkdiff 教程。他们的很多代码。

嵌套数组怎么样？

```
[location] => Array (
    [id] => 110703698957912
    [name] => Campinas, Sao Paulo 
) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T03:14:15.093

尝试这个：

```
echo 'First name: ' . $userInfo['first_name'];
echo 'Last name: ' . $userInfo['last_name'];
echo 'Birthday: ' . $userInfo['birthday']; 
```

对于嵌套数组，例如：

```
[location] => Array (
    [id] => 110703698957912
    [name] => Campinas, Sao Paulo 
) 
```

您可以通过以下方式访问它们：

```
$userInfo['location']['id'];
$userInfo['location']['name']; 
```

# php - 尾递归比 PHP 中的正常递归慢？

> ID：13638452
> 
> 赞同：3
> 
> 时间：2012-11-30T03:10:36.233
> 
> 标签：php, recursion, tail-recursion

我在 PHP 中做了 2 个版本的阶乘函数用于基准测试，一个使用普通递归，另一个使用尾递归。后者应该更快，但结果显示并非如此。我在这里错过了什么吗？

我的代码如下，包括基准测试：

```
<?php
benchmark();

function benchmark()
{
    $n = 10;
    $multiplier = 10000;
    $functions = array('factorial_recursive', 'factorial_tailRecursive');

    foreach ($functions as $function) {
        $start = microtime(true);
        echo $function . '<br>';
        echo $function($n) . '<br>';
        echo ($multiplier * (microtime(true) - $start)) . '<br><br>';
    }
}

function factorial_recursive($n)
{
    if ($n == 1) {
        return $n;
    }

    return $n * factorial_recursive($n - 1);
}

function factorial_tailRecursive($n, $result = 1)
{
    if ($n == 1) {
        return $result;
    }

    return factorial_tailRecursive($n - 1, $result * $n);
} 
```

打印输出：

```
factorial_recursive
3628800
2.4199485778809

factorial_tailRecursive
3628800
2.5296211242676 
```

任何见解表示赞赏 - 谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T04:00:11.463

我拿了你的代码并稍微修改了它以在命令行上运行（将 br 转换为换行符，调整了输出格式）。此外，我对其进行了更改，以使基准测试运行 25 次迭代，而不仅仅是一次：

```
<?php
foreach (range(1, 25) as $iteration) {
    benchmark($iteration);
}

function benchmark($iteration)
{
    $n = 10;
    $multiplier = 10000;
    $functions = array('factorial_recursive', 'factorial_tailRecursive');

    echo "\nIteration {$iteration}:\n";
    foreach ($functions as $function) {
        $start = microtime(true);
        echo $function . "\n";
        echo $function($n) . "\n";
        echo ($multiplier * (microtime(true) - $start)) . "\n\n";
    }
}

function factorial_recursive($n)
{
    if ($n == 1) {
        return $n;
    }

    return $n * factorial_recursive($n - 1);
}

function factorial_tailRecursive($n, $result = 1)
{
    if ($n == 1) {
        return $result;
    }

    return factorial_tailRecursive($n - 1, $result * $n);
} 
```

这是我的 php cli 版本：

```
$ php --version
PHP 5.3.10-1ubuntu3.4 with Suhosin-Patch (cli) (built: Sep 12 2012 19:00:43) 
Copyright (c) 1997-2012 The PHP Group
Zend Engine v2.3.0, Copyright (c) 1998-2012 Zend Technologies
    with Xdebug v2.1.0, Copyright (c) 2002-2010, by Derick Rethans 
```

这是我 25 次迭代的结果：

```
$ php ./benchmark.php 

Iteration 1:
factorial_recursive
3628800
0.46014785766602

factorial_tailRecursive
3628800
0.33855438232422

Iteration 2:
factorial_recursive
3628800
0.26941299438477

factorial_tailRecursive
3628800
0.26941299438477

Iteration 3:
factorial_recursive
3628800
0.27179718017578

factorial_tailRecursive
3628800
0.2598762512207

Iteration 4:
factorial_recursive
3628800
0.26941299438477

factorial_tailRecursive
3628800
0.2598762512207

Iteration 5:
factorial_recursive
3628800
0.28848648071289

factorial_tailRecursive
3628800
0.28848648071289

Iteration 6:
factorial_recursive
3628800
0.27894973754883

factorial_tailRecursive
3628800
0.27894973754883

Iteration 7:
factorial_recursive
3628800
0.29087066650391

factorial_tailRecursive
3628800
0.2598762512207

Iteration 8:
factorial_recursive
3628800
0.25033950805664

factorial_tailRecursive
3628800
0.25033950805664

Iteration 9:
factorial_recursive
3628800
0.25033950805664

factorial_tailRecursive
3628800
0.2598762512207

Iteration 10:
factorial_recursive
3628800
0.25033950805664

factorial_tailRecursive
3628800
0.24795532226562

Iteration 11:
factorial_recursive
3628800
0.25033950805664

factorial_tailRecursive
3628800
0.27894973754883

Iteration 12:
factorial_recursive
3628800
0.27894973754883

factorial_tailRecursive
3628800
0.27894973754883

Iteration 13:
factorial_recursive
3628800
0.2598762512207

factorial_tailRecursive
3628800
0.25033950805664

Iteration 14:
factorial_recursive
3628800
0.25033950805664

factorial_tailRecursive
3628800
0.27179718017578

Iteration 15:
factorial_recursive
3628800
0.25033950805664

factorial_tailRecursive
3628800
0.24795532226562

Iteration 16:
factorial_recursive
3628800
0.24080276489258

factorial_tailRecursive
3628800
0.25033950805664

Iteration 17:
factorial_recursive
3628800
0.27179718017578

factorial_tailRecursive
3628800
0.25033950805664

Iteration 18:
factorial_recursive
3628800
0.24080276489258

factorial_tailRecursive
3628800
0.25033950805664

Iteration 19:
factorial_recursive
3628800
0.25033950805664

factorial_tailRecursive
3628800
0.25033950805664

Iteration 20:
factorial_recursive
3628800
0.25033950805664

factorial_tailRecursive
3628800
0.2598762512207

Iteration 21:
factorial_recursive
3628800
0.24795532226562

factorial_tailRecursive
3628800
0.23841857910156

Iteration 22:
factorial_recursive
3628800
0.30040740966797

factorial_tailRecursive
3628800
0.29087066650391

Iteration 23:
factorial_recursive
3628800
0.30994415283203

factorial_tailRecursive
3628800
0.26226043701172

Iteration 24:
factorial_recursive
3628800
0.29087066650391

factorial_tailRecursive
3628800
0.32186508178711

Iteration 25:
factorial_recursive
3628800
0.27894973754883

factorial_tailRecursive
3628800
0.30040740966797 
```

看看这些结果，我不得不说差异可以忽略不计，太接近了。它们在运行时实际上是相同的，至少在 Big-O 方面是这样。

# ruby-on-rails - 使用标记的方法端点搜索 Tumblr 标签

> ID：13638453
> 
> 赞同：2
> 
> 时间：2012-11-30T03:10:39.517
> 
> 标签：ruby-on-rails, ruby, gem, tumblr

我正在尝试使用 tagged 方法搜索 Tumblr。有没有办法用 Tumblr gem 做到这一点？如果没有，我如何解析 API 响应并将帖子存储在数据库中？我使用的 gem 叫做 Tumblr Wrapper：[https](https://github.com/forthemakers/tumblr_wrapper) ://github.com/forthemakers/tumblr_wrapper 。文档中没有关于使用标记方法的任何内容。我正在尝试在 Tumblr 标记的媒体中搜索标签 Kanye West。这是我在 Post 模型中尝试的方法。

```
 def self.pull_tumblr 
        Tumblr.tagged("kanye+west", :type => "photo").each do |post|
          unless exists?(post_id: post.id)
            create!(
              post_id: post.id,
              content: post.caption,
              username: post.blog_name,
              profile_photo: post.avatar_url,
              created_at: post.date,
              photo: post.photo.url
            )
          end
        end
      end 
```

# c# - 如何使用 c# 防止在应用程序外部单击鼠标

> ID：13638454
> 
> 赞同：5
> 
> 时间：2012-11-30T03:10:43.420
> 
> 标签：c#, mouse

我试图控制两只“老鼠”。主鼠标（鼠标）用于控制普通 UI 控件的光标（我不想拦截），而辅助“鼠标”只能用作我正在编写的应用程序的输入，否则忽略。

我成功地捕获了鼠标消息并根据需要进行了过滤。即使我的应用程序不在焦点上（根据需要），我也可以成功捕获鼠标输入。

剩下的唯一问题是我似乎无法阻止鼠标与其他应用程序交互。所以我基本上可以监视鼠标，但不能完全使用消息。

我“相信”当我处理过滤后的鼠标消息时，我正在阻止调用“base.WndProc（ref message）”，但系统似乎仍在点击鼠标。

C# (Visual Studio Express 2010) 能做到这一点吗？

感谢您提供的任何帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-03T12:32:18.093

原始输入可能是您正在寻找的。 [这](http://social.msdn.microsoft.com/Forums/en-US/winforms/thread/6f8bb366-d0b4-40a9-8004-367f186cd639/)是一个 MSDN 讨论，有一个类似的问题，它链接到关于在 C# 中处理多个键盘的代码项目文章。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-03T09:31:49.073

您可以使用全局鼠标挂钩。我不记得我在哪里找到的，但这[是](http://www.cyberforum.ru/attachment.php?attachmentid=12838&d=1257464294)示例

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-08T17:12:29.947

正如其他人所说，这至少在点网中很麻烦。我强烈建议您切换到 C++ / Win32 来实现这一点。我认为从长远来看，您将为自己省去很多麻烦。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-08T02:50:29.640

我认为不可能通过 C# .Net 阻止鼠标单击。但是，您可以通过 ClipCursor 将鼠标指针锁定在一个位置。下面的链接可能会帮助你。

如果您本质上想阻止使用一只鼠标，为什么不直接禁用鼠标，如果您转到设备管理器并单击“禁用”。这可以按照[此处](https://stackoverflow.com/questions/4097000/how-do-i-disable-a-system-device-programatically)解决的方式以编程方式完成。

这是从上面的链接复制的代码：

```
public static class DisableHardware
{
    const uint DIF_PROPERTYCHANGE = 0x12;
    const uint DICS_ENABLE = 1;
    const uint DICS_DISABLE = 2;  // disable device
    const uint DICS_FLAG_GLOBAL = 1; // not profile-specific
    const uint DIGCF_ALLCLASSES = 4;
    const uint DIGCF_PRESENT = 2;
    const uint ERROR_INVALID_DATA = 13;
    const uint ERROR_NO_MORE_ITEMS = 259;
    const uint ERROR_ELEMENT_NOT_FOUND = 1168;

    static DEVPROPKEY DEVPKEY_Device_DeviceDesc;
    static DEVPROPKEY DEVPKEY_Device_HardwareIds;

    [StructLayout(LayoutKind.Sequential)]
    struct SP_CLASSINSTALL_HEADER
    {
        public UInt32 cbSize;
        public UInt32 InstallFunction;
    }

    [StructLayout(LayoutKind.Sequential)]
    struct SP_PROPCHANGE_PARAMS
    {
        public SP_CLASSINSTALL_HEADER ClassInstallHeader;
        public UInt32 StateChange;
        public UInt32 Scope;
        public UInt32 HwProfile;
    }

    [StructLayout(LayoutKind.Sequential)]
    struct SP_DEVINFO_DATA
    {
        public UInt32 cbSize;
        public Guid classGuid;
        public UInt32 devInst;
        public IntPtr reserved;     // CHANGE #1 - was UInt32
    }

    [StructLayout(LayoutKind.Sequential)]
    struct DEVPROPKEY
    {
        public Guid fmtid;
        public UInt32 pid;
    }

    [DllImport("setupapi.dll", SetLastError = true)]
    static extern IntPtr SetupDiGetClassDevsW(
        [In] ref Guid ClassGuid,
        [MarshalAs(UnmanagedType.LPWStr)]
string Enumerator,
        IntPtr parent,
        UInt32 flags);

    [DllImport("setupapi.dll", SetLastError = true)]
    static extern bool SetupDiDestroyDeviceInfoList(IntPtr handle);

    [DllImport("setupapi.dll", SetLastError = true)]
    static extern bool SetupDiEnumDeviceInfo(IntPtr deviceInfoSet,
        UInt32 memberIndex,
        [Out] out SP_DEVINFO_DATA deviceInfoData);

    [DllImport("setupapi.dll", SetLastError = true)]
    static extern bool SetupDiSetClassInstallParams(
        IntPtr deviceInfoSet,
        [In] ref SP_DEVINFO_DATA deviceInfoData,
        [In] ref SP_PROPCHANGE_PARAMS classInstallParams,
        UInt32 ClassInstallParamsSize);

    [DllImport("setupapi.dll", SetLastError = true)]
    static extern bool SetupDiChangeState(
        IntPtr deviceInfoSet,
        [In] ref SP_DEVINFO_DATA deviceInfoData);

    [DllImport("setupapi.dll", SetLastError = true)]
    static extern bool SetupDiGetDevicePropertyW(
            IntPtr deviceInfoSet,
            [In] ref SP_DEVINFO_DATA DeviceInfoData,
            [In] ref DEVPROPKEY propertyKey,
            [Out] out UInt32 propertyType,
            IntPtr propertyBuffer,
            UInt32 propertyBufferSize,
            out UInt32 requiredSize,
            UInt32 flags);

    [DllImport("setupapi.dll", SetLastError = true)]
    static extern bool SetupDiGetDeviceRegistryPropertyW(
      IntPtr DeviceInfoSet,
      [In] ref SP_DEVINFO_DATA  DeviceInfoData,
      UInt32 Property,
      [Out] out UInt32  PropertyRegDataType,
      IntPtr PropertyBuffer,
      UInt32 PropertyBufferSize,
      [In,Out] ref UInt32 RequiredSize
    );

    static DisableHardware()
    {
        DisableHardware.DEVPKEY_Device_DeviceDesc = new DEVPROPKEY();
        DEVPKEY_Device_DeviceDesc.fmtid = new Guid(
                0xa45c254e, 0xdf1c, 0x4efd, 0x80, 0x20, 0x67,
                0xd1, 0x46, 0xa8, 0x50, 0xe0);
        DEVPKEY_Device_DeviceDesc.pid = 2;

        DEVPKEY_Device_HardwareIds = new DEVPROPKEY();
        DEVPKEY_Device_HardwareIds.fmtid = new Guid(
            0xa45c254e, 0xdf1c, 0x4efd, 0x80, 0x20, 0x67,
            0xd1, 0x46, 0xa8, 0x50, 0xe0);
        DEVPKEY_Device_HardwareIds.pid = 3;
    }

    public static void DisableDevice(Func<string, bool> filter, bool disable = true)
    {
        IntPtr info = IntPtr.Zero;
        Guid NullGuid = Guid.Empty;
        try
        {
            info = SetupDiGetClassDevsW(
                ref NullGuid,
                null,
                IntPtr.Zero,
                DIGCF_ALLCLASSES);
            CheckError("SetupDiGetClassDevs");

            SP_DEVINFO_DATA devdata = new SP_DEVINFO_DATA();
            devdata.cbSize = (UInt32)Marshal.SizeOf(devdata);

            // Get first device matching device criterion.
            for (uint i = 0; ; i++)
            {
                SetupDiEnumDeviceInfo(info,
                    i,
                    out devdata);
                // if no items match filter, throw
                if (Marshal.GetLastWin32Error() == ERROR_NO_MORE_ITEMS)
                    CheckError("No device found matching filter.", 0xcffff);
                CheckError("SetupDiEnumDeviceInfo");

                string devicepath = GetStringPropertyForDevice(info,
                                           devdata, 1); // SPDRP_HARDWAREID

                // Uncomment to print name/path
                //Console.WriteLine(GetStringPropertyForDevice(info,
                //                         devdata, DEVPKEY_Device_DeviceDesc));
                //Console.WriteLine("   {0}", devicepath);
                if (devicepath != null && filter(devicepath)) break;

            }

            SP_CLASSINSTALL_HEADER header = new SP_CLASSINSTALL_HEADER();
            header.cbSize = (UInt32)Marshal.SizeOf(header);
            header.InstallFunction = DIF_PROPERTYCHANGE;

            SP_PROPCHANGE_PARAMS propchangeparams = new SP_PROPCHANGE_PARAMS();
            propchangeparams.ClassInstallHeader = header;
            propchangeparams.StateChange = disable ? DICS_DISABLE : DICS_ENABLE;
            propchangeparams.Scope = DICS_FLAG_GLOBAL;
            propchangeparams.HwProfile = 0;

            SetupDiSetClassInstallParams(info,
                ref devdata,
                ref propchangeparams,
                (UInt32)Marshal.SizeOf(propchangeparams));
            CheckError("SetupDiSetClassInstallParams");

            SetupDiChangeState(
                info,
                ref devdata);
            CheckError("SetupDiChangeState");
        }
        finally
        {
            if (info != IntPtr.Zero)
                SetupDiDestroyDeviceInfoList(info);
        }
    }
    private static void CheckError(string message, int lasterror = -1)
    {

        int code = lasterror == -1 ? Marshal.GetLastWin32Error() : lasterror;
        if (code != 0)
            throw new ApplicationException(
                String.Format("Error disabling hardware device (Code {0}): {1}",
                    code, message));
    }

    private static string GetStringPropertyForDevice(IntPtr info, SP_DEVINFO_DATA devdata,
        uint propId)
    {
        uint proptype, outsize;
        IntPtr buffer = IntPtr.Zero;
        try
        {
            uint buflen = 512;
            buffer = Marshal.AllocHGlobal((int)buflen);
            outsize=0;
            // CHANGE #2 - Use this instead of SetupDiGetDeviceProperty 
            SetupDiGetDeviceRegistryPropertyW(
                info,
                ref devdata,
                propId,
                out proptype,
                buffer,
                buflen,
                ref outsize);
            byte[] lbuffer = new byte[outsize];
            Marshal.Copy(buffer, lbuffer, 0, (int)outsize);
            int errcode = Marshal.GetLastWin32Error();
            if (errcode == ERROR_INVALID_DATA) return null;
            CheckError("SetupDiGetDeviceProperty", errcode);
            return Encoding.Unicode.GetString(lbuffer);
        }
        finally
        {
            if (buffer != IntPtr.Zero)
                Marshal.FreeHGlobal(buffer);
        }
    }

} 
```

[http://msdn.microsoft.com/en-us/library/windows/desktop/ms648383%28v=vs.85%29.aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/ms648383%28v=vs.85%29.aspx) [http://www.pinvoke.net/default.aspx/user32/ClipCursor.html](http://www.pinvoke.net/default.aspx/user32/ClipCursor.html)

# c++ - 允许 C++ 抽象类使用 Objective-C 委托

> ID：13638459
> 
> 赞同：2
> 
> 时间：2012-11-30T03:11:39.640
> 
> 标签：c++, ios, delegates, abstract-class

我有一个抽象类和他的具体类实现。我想做的是在 iOS 应用程序（Objective-C）中公开具体类，并使用协议将事件分派到 ViewController。

这个想法是向这个具体的类添加一个符合 adHoc 协议的目标 C 委托。任何想法如何实现它？

不幸的是，我读到 Objective-C++ 不能从 C++ 类继承。

先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-04-07T11:09:09.423

一个客观的 c++ 类不能从一个 c++ 类继承，但它可以包含一个

```
@interface DelegateObject : NSObject
{
}
- (id) init;
- (void) do_something: (NSObject*) thing;
@end

struct cpp_thing
{
    // this could be a template if you wished, or you could take a copy
    // or whatever you want
    void do_something(NSObject* thing) { };
};

@implementation DelegateObject
{
    std::shared_ptr<cpp_thing> _cpp;
}

- (id) init
{
    if (self = [super init])
    {
        _cpp = std::make_shared<cpp_thing>();
    }
    return self;
}

- (void) do_something: (NSObject*) thing
{
    _cpp->do_something(thing);
}

@end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T03:49:29.943

尝试一种有关系。目标 C++ 对象有一个 C++ 对象，反之亦然。然后让它们足够了解对方，以便目标 C++ 对象将消息中继到 C++ 对象。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-30T04:06:06.000

如果你声明了一个指向 id 的弱指针，你可以声明一个抽象委托（NSObject 中的一个类别），然后在 CPP 源中自由调用方法。只需导入包含抽象委托的文件，然后在 ObjC 类中实现方法本身，您就可以在不声明实际委托的情况下获得委托。

# bison - 使用 yacc 将 while 语句从 c 转换为程序集

> ID：13638463
> 
> 赞同：0
> 
> 时间：2012-11-30T03:12:15.913
> 
> 标签：bison, yacc, lex, flex-lexer, att

我正在尝试为一个程序编写一个 yacc 源文件，它将一个简单的 while 语句从 C 语言（比如说 ANSI 89）转换为汇编 at&t。以下是我的语法，yacc 文件的核心部分。

```
%%
while_statement     :   'w' 'h' 'i' 'l' 'e' '(' control_statement ')' '{'  block '}'
{printing of the assembly code;}
control_statement   :   expression '>' expression   { $$ = strcat(write exp jg back,) ;}
        |   expression '<' expression   { $$ = strcat(write exp jl back,) ;}
        |   expression '==' expression  { $$ = strcat(write exp je back,) ;}
        |   expression '<=' expression  { $$ = strcat(write exp jle back,) ;}
        |   expression '>=' expression  { $$ = strcat(write exp jge back,) ;}
        |   expression '!=' expression  { $$ = strcat(write exp jne back,) ;}
        |   expression { $$ = $1;}

block           :   expression ';'
        |   block expression ';'

expression      :       expression '+' expression   { $$ = $1 + $3;}
        |       expression '-' expression   { $$ = $1 - $3;}
        |       expression '*' expression   { $$ = $1 * $3;}
        |       expression '/' expression   { if($3 == 0)
                                yyerror("divide by zero");
                              else
                                $$ = $1 / $3;}
        |       '-' expression          { $$ = -$2;}
        |       '(' expression ')'      { $$ = $2;}
        |   string '=' expression       { create new variable called string with expression value }
        |       number              { $$ = $1;}

string          :   letter {$$ = $1;}
        |   string letter {strcat($$, ??;}

letter          :   A {strcat($$, 'A');}
        .........

number          :   digit       { $$ = $$ + $1;}
        |       number digit    { $$ = ($1 * 10) + $2;}

digit   : '0' {$$ = 0;}
| '1' {$$ = 1;} 
| '2' {$$ = 2;}
| '3' {$$ = 3;}
| '4' {$$ = 4;}
| '5' {$$ = 5;}
| '6' {$$ = 6;}
| '7' {$$ = 7;}
| '8' {$$ = 8;}
| '9' {$$ = 9;}     
%% 
```

我的问题是：我应该使用哪种函数来连接最终字符串的值？或者我应该使用哪种数据类型、结构、联合等？提前感谢您的答案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T18:19:32.217

唔。
据我了解您的语法，您刚开始使用 yacc。为此，这还不错，所以我只给你一些提示如何继续
...... 您知道，目前您的所有表达式只能是常量，因为您在编译时评估它们，例如您在 plus-case 中编写`{$$ = $1 + $3}`，并且在 yacc 运行时评估此表达式。如果您希望在运行时对其进行评估，则需要发出正确的汇编程序指令`{emit ("add", allocReg(), $1, $3);}`，例如这个要编写的函数`emit`在开始时可能只期望在`$1`and中的寄存器名称`$3`。
湾。然后，如果您要更改数字案例中的操作以将数字加载到寄存器中（您需要为此做一些内务处理），也就是说，数字的操作将是

```
{reg=allocReg();
 emit ("mov", reg, $$);
} 
```

（当然，当它们不再使用时，您需要释放所有已分配的寄存器，例如在它们作为加法在加法运算中使用之后）。
C。在您可以根据条件进行跳转之前，您需要发出一些比较指令。比较，例如`cmp $1, $3`
d. 使用 yacc 时，您通过将数据分配给 $$ 来“向上”传输数据，并使用其他规则生成的 $1...$n。这些数据可以有不同的类型，具体取决于规则。因此，您为此使用联合的想法是一种方法（所有内容都在您的语法文件中）：

```
typedef union {
  int                number;
  char               singleChar;
  VarName            *var;
  ...
} dataVariant;
#undef YYSTYPE
#define YYSTYPE dataVariant 
```

有了这个，你可以在你的语法中写出类似 $$.number=$1.number 的东西。yacc 里面还有一个 %union-construct 更舒服，你可以在那里读到一些关于它的东西：[Lex and YACC prime](http://www.tldp.org/HOWTO/Lex-YACC-HOWTO-6.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-02T01:52:44.213

好吧，对于一个while循环，你想要的是这样的：

```
start-label:
code to evaluate condition
conditional branch if-false to end-label
code for the body of the loop
unconditional branch to start-label
end-label: 
```

所以在你的伪代码中，它看起来像：

```
while_statement: WHILE '(' condition ')' '{' block '}'
    { $$ = concatenate("start-label:", $3, "jfalse end-label", $6, "jmp start-label", "end-label:"); } 
```

`concatenate`你用来从一堆其他字符串中构建字符串的东西在哪里。

那是假设您通过将字符串连接在一起来构建汇编代码（这似乎是您试图从伪代码中执行的操作。）此外，如果您想允许多个循环，您将需要为每个标签创建唯一的标签，而不是使用固定的字符串。

# pattern-matching - 按最大值还是按总值标准化？

> ID：13638464
> 
> 赞同：4
> 
> 时间：2012-11-30T03:12:18.820
> 
> 标签：pattern-matching, normalization, similarity

我正在做一些涉及文档比较的工作。为此，我正在分析每个文档，并且基本上计算了某些关键字在每个文档中出现的次数。例如：

```
Document 1:                          Document 2:
    Book   -> 3                          Book   -> 9
    Work   -> 0                          Work   -> 2
    Dollar -> 5                          Dollar -> 1
    City   -> 18                         City   -> 6 
```

所以在计数过程之后，我将所有这些数字序列存储在一个向量中。这个数字序列将代表每个文档的特征向量。

```
Document 1: [ 3,  0,  5, 18]
Document 2: [ 9,  2,  1,  6] 
```

最后一步是对范围内的数据进行归一化`[0 1]`。但在这里我意识到这可以通过两种不同的方法来完成：

1.  将每个数字序列除以总重复次数
2.  将每个数字序列除以最大重复次数

按照第一种方法，标准化的结果将是：

```
Document 1: [ 0.11538,  0.00000,  0.19231, 0.69231]   (divided by 26)
Document 2: [ 0.50000,  0.11111,  0.05556, 0.33333]   (divided by 18) 
```

在采用第二种方法时，结果将是：

```
Document 1: [ 0.16667,  0.00000,  0.27778, 1.00000]   (divided by 18)
Document 2: [ 1.00000,  0.22222,  0.11111, 0.66667]   (divided by  9) 
```

对于这种特定情况：

*   这两种方法中哪一种会增强特征向量的表示和比较？
*   结果会一样吗？
*   这些方法中的任何一种在特定的相似性度量（欧几里得、余弦）下会更好吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T02:57:18.450

## 符号

假设您有两个向量`A`和`B`，您将`x`其用作 的归一化常数`A`和`y`的归一化常数`B`。由于您正在计算单词出现次数，我们可以假设`x > 0`和`y > 0`。

## 余弦距离

对于下面显示的余弦距离，将抵消归一化常数。很容易看出，你最终会`1/(xy)`在 enumerator 处得到一个常数，`1/(xy)`在 denominator 处得到一个相同的常数。所以你可以取消`1/(xy)`。

![在此处输入图像描述](../Images/d5612424f487bb7c6b1ff8cde2b3aaa6.png)

## 欧几里得距离

对于欧几里得距离，情况并非如此。我在下面列出了一个示例，假设`A`并且`B`是二维向量。n 维向量只是一个简单的扩展。`A'`和分别是和`B'`的归一化向量。`A``B`

![在此处输入图像描述](../Images/ff17ee6cdbe45c40b0c9362cf76e80c7.png)

比较 的`dist(A,B)`未归一化版本和 的归一化版本`dist(A',B')`，您可以看到：您选择的归一化常数（最大值或总和）决定了 的权重`x1^2+x2^2`和`y1^2+y2^2`交互项。因此，不同的归一化常数会给你不同的距离。

## 特征向量

如果这是出于某些信息检索目的或主题提取，您是否尝试[过 TF-IDF](http://en.wikipedia.org/wiki/Tf-idf)？这可能比纯粹计算术语的出现更好。

# java - 匿名可运行类中的变量是否总是线程安全的？

> ID：13638468
> 
> 赞同：1
> 
> 时间：2012-11-30T03:13:22.580
> 
> 标签：java, multithreading, interface, concurrency, runnable

我创建了一个类 UnSafeTask：

```
package com.threads;

import java.util.Date;
import java.util.concurrent.TimeUnit;

public class UnsafeTask implements Runnable {
    private Date startDate;

    @Override
    public void run() {
        startDate = new Date();
        System.out.printf("Starting Thread: %s : %s\n", Thread.currentThread().getId(), startDate);
        try {
            TimeUnit.SECONDS.sleep((int) Math.rint(Math.random() * 10));
        } catch (InterruptedException e) {
            e.printStackTrace();
        }
        System.out.printf("Thread Finished: %s : %s\n", Thread.currentThread().getId(), startDate);
    }    
} 
```

我在一个核心类中使用它，如下所示：

```
package com.threads;

import java.util.concurrent.TimeUnit;

public class Core {

    public static void main(String[] args) {
        UnsafeTask task = new UnsafeTask();

        for (int i = 0; i < 10; i++) {
            Thread thread = new Thread(task);
            thread.start();
            try {
                TimeUnit.SECONDS.sleep(2);
            } catch (InterruptedException e) {
                e.printStackTrace();
            }
        }
    }
} 
```

结果与预期一致（变量由线程共享）。当我按如下方式重构 Core 以使用匿名可运行类时：

```
package com.threads;

import java.util.Date;
import java.util.concurrent.TimeUnit;

public class Core {

    public static void main(String[] args) {

        for (int i = 0; i < 10; i++) {
            Thread thread = new Thread(new Runnable() {
                Date startDate = new Date();

                @Override
                public void run() {
                    startDate = new Date();
                    System.out.printf("Starting Thread: %s : %s\n", Thread.currentThread().getId(), startDate);
                    try {
                        TimeUnit.SECONDS.sleep((int) Math.rint(Math.random() * 10));
                    } catch (InterruptedException e) {
                        e.printStackTrace();
                    }
                    System.out.printf("Thread Finished: %s : %s\n", Thread.currentThread().getId(), startDate);    
                }    
            });
            thread.start();
            try {
                TimeUnit.SECONDS.sleep(2);
            } catch (InterruptedException e) {
                e.printStackTrace();
            }
        }
    }
} 
```

现在变量 (startDate) 是线程安全的。为什么在这种情况下变量线程是安全的？提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-30T03:17:22.910

在第一个示例中，您有一个 Runnable 实例（在所有线程之间共享）。在第二个示例中，您有 10 个 Runnable 实例，每个线程 1 个实例（不共享，因此是线程安全的）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-30T03:21:52.897

线程安全不取决于类是否有名称。在第一种情况下，您在所有线程之间共享一个命名类的*实例*；您可以轻松地在第二堂匿名课上做同样的事情！

`final`此外，您可以在匿名类的实例之间共享在外部范围中声明的变量。尽管变量必须是 final 的，但这并不意味着它的实例是*不可变*的。在这种情况下，匿名类肯定是非线程安全的。

因此，您的标题问题的答案是“不，并非所有匿名类都是线程安全的”。无论是否命名，您都需要在考虑线程安全的情况下显式设计您的类。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-06T21:17:57.107

请注意，您的第二个示例与第一个示例的细微修改相同：

```
public static void main(String[] args) {

    for (int i = 0; i < 10; i++) {
        // Task object instantiation now inside for loop:
        UnsafeTask task = new UnsafeTask();   
        Thread thread = new Thread(task); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-30T03:26:54.993

一个类是否匿名与线程安全无关。

匿名类就像一个普通类，除了它的源不在它自己的`.java`文件中（以及其他一些非常小的东西）。

# javascript - 使用 pubnub 方法推送更新

> ID：13638469
> 
> 赞同：1
> 
> 时间：2012-11-30T03:13:31.420
> 
> 标签：javascript, php, database, pubnub

我想知道 PubNub 是否可以做到这一点。我想通过使用 PHP 完成的数据库处理在我的应用程序中实现实时通信，并使用 JavaScript 在 HTML 页面中显示更新。这是场景：

1.  通过在 PHP 文件中运行的插入/更新/删除 SQL 更改数据库。
2.  同样的 PHP 文件调用如下：

    $pubnub->publish(array('channel' => 'my_test_channel', 'message' => array('database_id' => '100')));

3.  然后，JavaScript 浏览器会监听发布给它的任何更新：

    function(message) { if ('database_id' in message) { // 做更多事情 } } );

这种方法可以在用户注册并执行上述步骤的情况下工作，然后管理员可以立即在新用户的管理面板上接收更新，而无需使用数据库触发器、程序或使用 ajax 轮询？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T18:15:49.517

# 在 UPDATE、INSERT 和 DELETE 和 PHP 上通过 MySQL 触发器调用 PubNub PUSH 消息

有几种方法可以从您的服务器调用更新到 Web 应用程序管理界面和移动应用程序。一个简单的方法是在注册发生时使用 PHP API 发布，但是你可以比使用 MySQL 触发器更底层！

MySQL 使通过存储过程将您的编码包装成易于访问的触发器变得简单**。**你可以用 Pusher 创建类似的东西，虽然我知道如何用 PubNub 来做；所以这里是 PubNub 和 MySQL 的快速指南。简单是您所追求的，这就是您的解决方案！我将引导您通过一种简单的方法将表上的任何**UPDATE**、**INSERT**和**DELETE**操作绑定到每次都会调用的存储函数，使用 PubNub 轻松地向您的移动和 Web 应用程序发送推送通知。

## PubNub 推送消息

```
DELIMITER $$
CREATE PROCEDURE push_message
(p1   DOUBLE,
 p2   DOUBLE,
 p3 BIGINT)
BEGIN
 DECLARE cmd CHAR(255);
 DECLARE result CHAR(255);
 SET cmd = CONCAT('curl https://pubsub.pubnub.com/publish/demo/demo/0/mysql_triggers/0/%22',p1, ',' ,p2, ',' ,p3,'%22');
 SET result = sys_eval(cmd);
END$$; 
```

*注意：确保您的 PROCEDURE 类型是正确的**DOUBLE**或**VARCHAR**或**TEXT**。*

## MySQL 触发代码 INSERT 示例

```
CREATE TRIGGER push_message_trigger AFTER INSERT ON your_table_name_here
FOR EACH ROW
CALL push_message(NEW.Column1, NEW.Column2, NEW.Column3); 
```

*注意：确保在推送消息中包含您需要的列。*

## MySQL 触发代码更新示例

```
CREATE TRIGGER push_message_trigger AFTER UPDATE ON your_table_name_here
FOR EACH ROW
CALL push_message(NEW.Column1, NEW.Column2, NEW.Column3); 
```

## 通过调试控制台监控推送消息

[http://www.pubnub.com/console?sub=demo&pub=demo&channel=mysql_triggers](http://www.pubnub.com/console?sub=demo&pub=demo&channel=mysql_triggers) - 您可以通过 PubNub 开发控制台观看您的触发器。通过这种方式，您可以了解您需要更改哪些参数，以及哪些数据对您来说很重要，这些数据对于您可以包含在 PubNub websocket 可以接收的每个推送通知中，以及移动和 Web 设备上的更多内容。

## 在 JavaScript 中接收推送消息

```
<div id=pubnub ssl=on></div>
<script src=//pubnub.a.ssl.fastly.net/pubnub-3.3.1.min.js></script>
<script>(function(){

    PUBNUB.init({
        subscribe_key : 'demo',
        ssl           : true
    }).subscribe({
        channel  : 'mysql_triggers',
        callback : function(mysql_trigger_details) {
            alert(mysql_trigger_details);
        }
    });

})();</script> 
```

现在，您拥有了通过简单过程直接从 MySQL发送和接收**更改事件所需的步骤。**还有一些方法可以优化此方法，例如向将 HTTPS 推送通知排队和汇集的守护进程发出信号。这应该很有效。

# windows-store-apps - ASHWID：如何确定要存储为唯一 ID 的组件

> ID：13638470
> 
> 赞同：0
> 
> 时间：2012-11-30T03:13:33.870
> 
> 标签：windows-store-apps, winjs

根据参考帮助

[http://msdn.microsoft.com/en-us/library/windows/apps/jj553431.aspx](http://msdn.microsoft.com/en-us/library/windows/apps/jj553431.aspx)

下面是一个简单的示例，说明了您可以在云服务中处理硬件漂移的一种方法：

```
If [(Component_1_previous == Component_1_current) x Weight_1 + 
(Component_2_previous == Component_2_current) x Weight_2 + 
(Component_3_previous == Component_3_current) x Weight_3 + ……..
(Component_n_previous == Component_n_current) x Weight_n]>= [Threshold_for_being_the_same_device]
Then It_is_the_same_device 
```

在设备识别中使用相对权重

*相对权重取决于您的业务逻辑以及您确定的可接受的硬件偏差。没有对权重的值提出明确的建议。与其他组件相比，某些组件不太可能发生变化，因此应获得更高的权重。例如，与音频适配器相比，BIOS 更改的可能性较小。根据连接到系统的驱动器数量，可能会显示多个磁盘驱动器。安装操作系统的驱动器的组件 ID 不太可能更改。大多数 x86/x86-64 系统上的处理器组件 ID 相当稳定。如果您发现扩展坞组件返回相同的组件 ID，则为其分配零权重是有意义的。*

我们如何实际确定要使用哪些组件。如何以编程方式实现这一点。有这方面的样本吗？我想将其用作 id 作为正在安装应用程序的设备的唯一 id，而不管哪个用户正在登录设备。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-29T21:32:23.157

这些示例可能会有所帮助：

[http://code.msdn.microsoft.com/windowsapps/How-to-use-ASHWID-to-3742c83e](http://code.msdn.microsoft.com/windowsapps/How-to-use-ASHWID-to-3742c83e) [http://code.msdn.microsoft.com/windowsapps/Generate-UniqueID-based-on-4aeeabde](http://code.msdn.microsoft.com/windowsapps/Generate-UniqueID-based-on-4aeeabde)

我不得不说，我不明白为什么微软让获取操作系统安装的唯一 ID 变得如此复杂。

# python - 在 Python 中连续解析文件

> ID：13638472
> 
> 赞同：3
> 
> 时间：2012-11-30T03:13:38.760
> 
> 标签：python, parsing

我正在编写一个脚本来解析一个带有 HTTP 流量行的文件，并取出域，目前只是将它们打印到屏幕上。我正在使用 httpry 将流量连续写入文件。这是我用来去除域名的脚本

```
#!/usr/bin/python

import re

input = open("results.txt","r")

for line in input:
    domain = line.split()[6]
    if domain != "-":
        print domain 
```

虽然这个脚本工作得很好，但我想要一种方法来持续运行这个脚本，这样当新的流量被添加到输入文件时，脚本就能够把它去掉。我不能只在 httpry 的输出上运行 awk，因为我最终会将这些域输入到 Mongo 数据库中，而且我也需要脚本来执行此操作。如果有人能给我一些想法，如何在输出上不断地运行这个 python 脚本，而不是重新打印以前的条目，那将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-30T03:16:32.100

尝试在[http://code.activestate.com/recipes/157035-tail-f-in-python/](http://code.activestate.com/recipes/157035-tail-f-in-python/)`tail -f`中找到的这个实现

```
import time

while 1:
    where = file.tell()
    line = file.readline()
    if not line:
        time.sleep(1)
        file.seek(where)
    else:
        print line, # already has newline 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T03:44:41.623

Node.js 有一个不错的[readline](http://nodejs.org/api/readline.html)模块，应该可以很好地处理这个问题：

```
var readline = require('readline')
  , fs = require('fs')

var input = process.stdin; // or: fs.createReadStream('input.txt');
var output = process.stdout; // or: fs.createWriteStream('output.txt')

var reader = readline.createInterface({
  input: input,
  output: output
});

reader.on('line', function(line) {
  this.write(line.split(/[ ]+/)[6]);
}); 
```

将其保存在 .js 文件中并执行`node domains.js`，或您命名的任何内容。或`cat file | node domains.js`。

将来它也应该与 mongodb 很好地集成:)

# linux - 在 git commit 之后，我在 putty 终端中看到了长长的“Y”行

> ID：13638474
> 
> 赞同：-1
> 
> 时间：2012-11-30T03:13:50.743
> 
> 标签：linux, git, putty, bitbucket

我第一次在我的 linux 机器上提交了 git。我还将远程仓库添加到 Bit 存储桶帐户中。

当我在`git commit`最后 40 分钟点击 then 时，我看到 y 的连续线是这样的

```
y
y
y
y
y 
```

在我的腻子终端中。我想知道这是正常的还是我应该中断操作

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-30T03:19:09.460

你有没有碰巧输入“是”？有一个名为的实用程序`yes`，它只是`y`一遍又一遍地打印。它用于自动化说“你确定吗？（y/n）”的实用程序。您可能在某个时候不小心输入了“yes”，并且您的系统在返回`yes`后勤奋地运行。`git`

按 Ctrl-C 应该可以摆脱它。

# c# - 在安装期间运行可执行文件并在安装后将其删除

> ID：13638483
> 
> 赞同：0
> 
> 时间：2012-11-30T03:15:26.657
> 
> 标签：c#, .net, wix

我有一个 WIX 项目，想在复制所有文件后执行 .exe。但我不希望这个 .exe 被“安装”。我怎样才能做到这一点？原因是，我的安装程序将文件放在 IIS 的虚拟文件夹中，并在安装后将 .exe 放在那里不是一个选项。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T21:32:11.977

我选择将文件放在无法通过 IIS 访问的文件夹中，以便在安装过程中需要运行 .exe 的每个安装程序都指向那里。前任：

```
<Property Id="EXEAPPLOCATION">
      <DirectorySearch Id="mpfAppFolder" Depth="1" Path="C:\Program Files\mypath\Tools\">
        <FileSearch Id="my.exe" Name="my.exe"  />
      </DirectorySearch>
    </Property>

    <CustomAction Id="RunExecutable" 
                  Property="EXEAPPLOCATION" 
                  ExeCommand='-source="c:\test.txt"'
                  Execute="deferred" 
                  Return="check" 
                  Impersonate="no"/> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T12:01:58.413

您可以使用 SfxCa.exe 将 exe 打包到自定义操作包装 dll 中。这将导致 exe 在安装期间被提取到临时目录并在之后被删除。然后可以使用自定义操作在安装期间执行文件。那将是运行临时 exe 的一种更简洁的方法。

# java - id 必须存在于 Container 中或作为生成的列，缺少 id: id

> ID：13638491
> 
> 赞同：1
> 
> 时间：2012-11-30T03:17:13.003
> 
> 标签：java, web-applications, vaadin

关于为什么会出现此错误的任何想法，我已经尝试了所有命名约定（小写/大写）

我正在使用 Vaadin，这是我的代码片段：

```
 public class Usercontainer extends BeanItemContainer<Users> implements Serializable{
    public static final Object[] NATURAL_COL_ORDER = new Object[] {"id", "empCode"};

    public static final String[] COL_HEADERS_ENGLISH = new String[] {"User Id", "Emp code"};

    public Usercontainer() throws IllegalArgumentException {
        super(Users.class);
    }

    public static Usercontainer createTestData(){
        Usercontainer users = null;     
        try
        {
            users = new Usercontainer();
            for(int i=0; i<10;i++){
                Users user = new Users();
                user.setId(i*10);
                user.setEmpcode("C00"+i);
                users.addItem(user);
            }
        }
        catch(Exception e){System.out.println("Error :"+e.getMessage());}       
        return users;       
    }
} 
```

* * *

```
@Entity
@Table(name="_user")
public class Users {
    //private String name;
    public int id;
    public String empcode;

        @Id
    public int getId() {
        return id;
    }

    public void setId(int id) {
        this.id = id;
    }

    public String getEmpcode() {
        return empcode;
    }
    public void setEmpcode(String empcode) {
        this.empcode = empcode;
    }

} 
```

* * *

```
 public class UserTable extends Table {

    public UserTable(App1Application app){
        setSizeFull();
        setContainerDataSource(app.getDataSource());
        setVisibleColumns(Usercontainer.NATURAL_COL_ORDER);
        setColumnHeaders(Usercontainer.COL_HEADERS_ENGLISH);
        this.setColumnReorderingAllowed(true);
        setSelectable(true);
        setImmediate(true);
        addListener((Property.ValueChangeListener)app);
        setNullSelectionAllowed(false);

    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T09:27:11.923

如果你使用`"empCode"`in`NATURAL_COL_ORDER`那么你应该`getEmpCode()`在实体类中使用 getter 方法（而不是`getEmpcode()`）恕我直言。

# .net - 将程序集加载到另一个 AppDomain 和类型检查

> ID：13638493
> 
> 赞同：4
> 
> 时间：2012-11-30T03:17:30.577
> 
> 标签：.net, reflection, mono, appdomain, .net-assembly

我正在尝试将程序集加载到另一个应用程序域（以便能够在不需要时卸载它们），但我也希望能够检查加载的程序集中的类型并创建我的类型的实例（通过 Activator）。此外，我不希望程序集在加载时被锁定。

我不明白这怎么可能。我尝试过的事情：

*   Loading Assembly.Load(File.ReadAllBytes(path)) 帮助我加载程序集而不锁定它，因此它可以被删除/移动。这会将程序集加载到当前的 appdomain 中，因此无法卸载它。

*   创建另一个 AppDomain 并使用 AppDomain.Load() 将程序集加载到新的 AppDomain 中，但无法检查加载的 AppDomain 中的所有类型。除非我知道类型完全限定的类型名称，否则我无法创建任何东西，即使那样它们也必须是可序列化的或从 MarshallByRef 派生的。另一个 AppDomain 的东西只能通过代理工作，所以如果没有合同/共享接口等，就很难创建东西。

*   MEF 还将程序集加载到当前的 AppDomain 中，因此它基本上是在做同样的事情。

*   Mono.Cecil 允许对加载的程序集进行类型检查，但是我无法使用 TypeReference 创建类型。也许如果有办法将 TypeReference 转换为 Type？

我检查了 ILSpy 是如何做到这一点的，毫不奇怪，它使用 Mono.Cecil 加载/卸载程序集，但话又说回来，它不会创建任何类型的实例，只是进行可能通过 Mono.Cecil 进行的类型检查路线。

现在的问题是，这甚至可能吗？我错过了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T21:24:12.187

如果您将程序集加载到另一个应用程序域，那么您当然应该在那里创建实例并在那里使用它们。除此之外，不确定您遇到了什么问题。

**更新**

1.  添加代码以从列表中选择类型
2.  更改为仅将跨域的类型名称作为字符串传递

* * *

```
using System;
using System.IO;
using System.Reflection;
using System.Runtime.Remoting;

public class MainClass : MarshalByRefObject
{
    static void Main(string[] args)
    {
        if (args.Length == 0)
        {
            Console.WriteLine("usage: {0} assembly", Path.GetFileName(Assembly.GetExecutingAssembly().Location));
            return;
        }
        AppDomain other = AppDomain.CreateDomain("other");
        Type myType = typeof(MainClass);
        // create a loader instance in the new domain
        MainClass loader = (MainClass)other.CreateInstanceAndUnwrap(myType.Assembly.FullName, myType.FullName);
        string assemblyName;
        string[] types = loader.LoadAssembly(args[0], out assemblyName);
        Console.WriteLine("Loaded assembly {0}.", assemblyName);
        Console.WriteLine("Types:");
        for(int i = 0; i < types.Length; i += 1)
        {
            Console.WriteLine("[{0}] {1}", i, types[i]);
        }
        Console.Write("Enter index of type to create, -1 to exit: ");
        int create = Int32.Parse(Console.ReadLine());
        if (create < 0)
        {
            return;
        }
        Console.WriteLine("Creating instance of type {0}", types[create]);
        Console.WriteLine("Type of the created instance was: {0}", loader.CreateInstance(assemblyName, types[create]));
    }

    string[] LoadAssembly(string path, out string assemblyName)
    {
        Console.WriteLine("LoadAssembly executing in appdomain {0}", AppDomain.CurrentDomain.FriendlyName);
        Assembly assembly = Assembly.Load(File.ReadAllBytes(path));
        assemblyName = assembly.FullName;
        return Array.ConvertAll<Type, string>(assembly.GetExportedTypes(), x => x.FullName);
    }

    string CreateInstance(string assemblyName, string typeName)
    {
        Console.WriteLine("CreateInstance executing in appdomain {0}", AppDomain.CurrentDomain.FriendlyName);
        object instance = Activator.CreateInstance(assemblyName, typeName).Unwrap();
        // do something useful with the instance here
        return instance.GetType().FullName;
    }

    public override object InitializeLifetimeService()
    {
        return null;
    }
} 
```

示例输出`log4net.dll`：

```
$ mono main.exe log4net.dll
LoadAssembly executing in appdomain other
Loaded assembly log4net, Version=1.2.10.0, Culture=neutral, PublicKeyToken=a5715cc6d5c3540b.
Types:
[0] log4net.Core.SecurityContext
[1] log4net.Core.LoggerWrapperImpl
[2] log4net.Core.LogImpl
[3] log4net.Core.DefaultRepositorySelector
...
[160] log4net.Appender.AspNetTraceAppender
[161] log4net.Appender.FileAppender
...
[197] log4net.Repository.LoggerRepositoryConfigurationResetEventHandler
[198] log4net.Repository.LoggerRepositoryConfigurationChangedEventHandler
Enter index of type to create, -1 to exit: 161
Creating instance of type log4net.Appender.FileAppender
CreateInstance executing in appdomain other
Type of the created instance was: log4net.Appender.FileAppender 
```

# java - 余额 -= 10，但减去 20？

> ID：13638497
> 
> 赞同：3
> 
> 时间：2012-11-30T03:17:48.520
> 
> 标签：java

我正在尝试在我的课堂上使用一种收费的方法。方法是这样的：

```
 public double chargeFee()
  {
    balance -= 10;
    return balance;
  } 
```

但是，它减去了 20。我尝试重新编译它，但找不到导致问题的原因。

完整代码：

```
public class ManageAccounts
{
    public static void main(String[] args)
    {
     Account acct1, acct2; 

    //create account1 for Sally with $1000
    acct1 = new Account(1000, "Sally", 1111);
    acct2 = new Account(500, "Joe", 2222);//create account2 for Joe with $500

    System.out.println("Depositing $100 into Account 2222...");
    acct2.deposit(100.00);//deposit $100 to Joe's account
    System.out.println("New Balance for Account 2222: $" + acct2.getBalance());//print Joe's new balance (use getBalance())
    System.out.println();
    System.out.println("Withdrawing $50 from Account 1111...");
    acct1.withdraw(50);//withdraw $50 from Sally's account

    System.out.println("New Balance for Account 1111: $" + acct1.getBalance());//print Sally's new balance (use getBalance())
    System.out.println();
    acct1.chargeFee();
    acct2.chargeFee();//charge fees to both accounts
    System.out.println("Charging usage Fees...");
    System.out.println("Account balance after fees:");
    System.out.println("Account 1111: $" + acct1.chargeFee());
    System.out.println("Account 2222: $" + acct2.chargeFee());
    System.out.println();
    System.out.println("Changing name on Account 2222...");
    acct2.changeName("Joseph");//change the name on Joe's account to Joseph
    System.out.println();
    System.out.println("Printing account summaries...");
    System.out.println(acct1.toString());
    System.out.println(acct2.toString());//print summary for both accounts

    }
}

import java.text.NumberFormat;

public class Account
{
  private double balance;
  private String name;
  private long acctNum;
    NumberFormat money = NumberFormat.getCurrencyInstance();
  //----------------------------------------------
  //Constructor -- initializes balance, owner, and account number
  //----------------------------------------------
  public Account(double initBal, String owner, long number)
  {
    balance = initBal;
    name = owner;
    acctNum = number;
  }

  //----------------------------------------------
  // Checks to see if balance is sufficient for withdrawal.
  // If so, decrements balance by amount; if not, prints message.
  //----------------------------------------------
  public void withdraw(double amount)
  {
    if (balance >= amount)
       balance -= amount;
    else
       System.out.println("Insufficient funds");
  }

  //----------------------------------------------
  // Adds deposit amount to balance.
  //----------------------------------------------
  public void deposit(double amount)
  {
    balance += amount;
  }

  //----------------------------------------------
  // Returns balance.
  //----------------------------------------------
  public double getBalance()
  {
    return balance;
  }

  //----------------------------------------------
  // Returns a string containing the name, account number, and balance.
  //----------------------------------------------
  public String toString()
  {
    return ("Name: " + name + "\tAccount Number: " + acctNum + "\tBalance: " + money.format(balance));
  }

  //----------------------------------------------
  // Deducts $10 service fee
  //----------------------------------------------
  public double chargeFee()
  {
    balance -= 10;
     return balance;
  }

  //----------------------------------------------
  // Changes the name on the account 
  //----------------------------------------------
  public void changeName(String newName)                          
  {
    name = newName;
  }

} 
```

一些示例输出：

```
Depositing $100 into Account 2222...
New Balance for Account 2222: $600.0

Withdrawing $50 from Account 1111...
New Balance for Account 1111: $950.0

Charging usage Fees...

Account balance after fees:

Account 1111: $930.0
Account 2222: $580.0

Changing name on Account 2222...

Printing account summaries...
Name: Sally Account Number: 1111    Balance: $930.00
Name: Joseph    Account Number: 2222    Balance: $580.00 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-30T03:20:37.170

您在两个帐户上调用`chargeFee`了两次，一次是在您收取实际费用时，另一次是在您打印结果时。

为了将来参考，有一个称为[“单独的命令和查询”](http://en.wikipedia.org/wiki/Command-query_separation)或 CQS 的指南。您可能想阅读它。为了说明您的情况：

*   您正在使用`chargeFee`作为查询（即，您返回余额）
*   而你`chargeFee`用作命令，扣钱。

更改`chargeFee`为返回一个`void`（或者`this`如果您想要方法链接），您不会不小心将它用作查询。

[http://en.wikipedia.org/wiki/Command-query_separation](http://en.wikipedia.org/wiki/Command-query_separation)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-30T03:20:53.797

它为每个帐户扣除 2 笔费用。

```
acct1.chargeFee();
acct2.chargeFee();//charge fees to both accounts
System.out.println("Charging usage Fees...");
System.out.println("Account balance after fees:");
System.out.println("Account 1111: $" + acct1.chargeFee());
System.out.println("Account 2222: $" + acct2.chargeFee()); 
```

可以说，`chargeFee()`不应该返回平衡，而是`void`像`deposit()`or `withdraw()`。另请注意，财务问题通常以数字`int`而非`double`数字来处理。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-30T03:22:12.913

```
System.out.println("New Balance for Account 1111: $" + acct1.getBalance());//print Sally's   new balance (use getBalance())
System.out.println();
acct1.chargeFee();------------------------//First time
acct2.chargeFee();//charge fees to both accounts
System.out.println("Charging usage Fees...");
System.out.println("Account balance after fees:");
System.out.println("Account 1111: $" + acct1.chargeFee());------------------------//second time
System.out.println("Account 2222: $" + acct2.chargeFee()); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-30T03:23:36.003

```
1) 
acct1.chargeFee();
acct2.chargeFee();//charge fees to both accounts

2)
System.out.println("Account 1111: $" + acct1.chargeFee());
System.out.println("Account 2222: $" + acct2.chargeFee()); 
```

注意你如何调用`chargeFee()`两次。这就是给你带来混乱结果的原因。您只需要调用一次，然后只需在第二次打印每个帐户中的余额（第 2 部分）。

```
System.out.println("Account 1111: $" + Account 1111's balance);
System.out.println("Account 2222: $" + Account 2222's balance); 
```

希望有帮助！

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-30T03:31:57.403

您已经有几个正确答案指出了程序中的问题。这并不是一个真正的答案，而是对您如何自己发现这个问题的扩展评论。

给定一个理论，即方法 chargeFee 减去 20，下一步是添加断点或打印输出以检查它的实际作用：

```
public double chargeFee() {
  System.out.println("Before subtract: " + balance + " Account: " + acctNum);
  balance -= 10;
  System.out.println("After subtract: " + balance + " Account: " + acctNum);
  return balance;
} 
```

带有附加打印输出的程序的输出很明显，每次调用chargeFee 只减去10，但每个帐户调用两次。

# java - 我可以在 tomcat 上托管一个 webapp 并监听不同的 SOAP 端口吗？

> ID：13638499
> 
> 赞同：0
> 
> 时间：2012-11-30T03:18:27.587
> 
> 标签：java, soap, wsdl, axis

假设我有一个部署在 tomcat 80 端口上的 webapp。

是否可以让这个 webapp 监听不同的 SOAP 端口，比如 8080。所以其他应用程序可以将 SOAP 请求发送到 8080 而不是 80？

顺便说一句，我正在使用轴

# php - 在运行 OSX ML 10.8 的 MacBook 上测试 PHP

> ID：13638501
> 
> 赞同：2
> 
> 时间：2012-11-30T03:18:46.650
> 
> 标签：php, apache, webserver, osx-mountain-lion

我正在寻找开始学习 PHP。我希望我能得到一些关于如何在我的 MacBook 上测试我的 .php 文件的信息。我相信我已经成功启用了我的“Apache Web 服务器”，因为当我`http://localhost/`在 Web 浏览器中访问时，我看到了“它可以工作！”的消息。我的问题是我需要采取哪些进一步的步骤才能使我的计算机能够执行此操作？此外，一旦配置了我的 .php 和 .html 文件在我的机器上的什么位置？我已经阅读了一些关于 /Sites/ 文件夹的文章，但我相信它给了我一个权限被禁止的错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T03:55:40.560

我强烈推荐 XAMPP。这是我多年来在我的 Macbook 上使用的东西。OS X 版本的链接在这里：

[http://www.apachefriends.org/en/xampp-macosx.html](http://www.apachefriends.org/en/xampp-macosx.html)

通过 thenewboston 这里有很棒的在线教程：

[http://www.youtube.com/watch?v=k6ZiPqsBvEQ](http://www.youtube.com/watch?v=k6ZiPqsBvEQ)

基本上，一旦安装了它，您的站点文件夹就会存储在应用程序的 htdocs/ 文件夹中，并且一旦连接到 Apache 服务器，您就可以转到`http://localhost/my_site`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-30T06:32:31.043

我建议使用 [MAMP](http://www.mamp.info/en/index.html)软件。

# ruby - Ruby 的 Fiber 4kB 堆栈大小的后果

> ID：13638503
> 
> 赞同：12
> 
> 时间：2012-11-30T03:18:58.307
> 
> 标签：ruby, fibers, stack-size

纤维对我来说是一个相对较新的概念。我知道每根光纤的堆栈大小限制为 4kB，我一直在读我应该“提防”这一点。这个限制对现实世界的影响究竟是什么？

编辑：

看起来这个 4kB 的限制毕竟不是一个障碍，它需要光纤本身内的大量局部变量 (4,045) 才能引发 SystemStackError。

```
count = 0
loop do
  count += 1
  puts count
  varlist = String.new
  count.times do |i|
    varlist += "a#{i} = 1\n"
  end
  s = "fiber = Fiber.new do \n #{varlist} \n end \n fiber.resume"
  eval(s)
end 
```

不是最优雅的代码，但它似乎证明了光纤堆栈的局限性。似乎它只是返回值、局部变量（所有这些都包含对堆上对象的引用）和方法调用被放入堆栈。我没有测试从光纤调用的方法中的局部变量等是否是光纤堆栈的一部分。

编辑2：

修改了上面的代码。看起来被调用方法中的变量等成为了光纤堆栈的一部分。如果是这种情况，那么调用深度（即使没有递归）可能会成为一个更大的问题，因为方法本身可能需要比变量更多的堆栈空间（这似乎是对堆上对象的透明引用）。

以下代码在第 4,031 次迭代中失败，并表明被调用方法中的变量成为光纤堆栈的一部分：

```
count = 0
loop do
  count += 1
  puts count
  varlist = String.new
  count.times do |i|
    varlist += "a#{i} = 1\n"
  end
  m = "def meth\n #{varlist} \n end"
  eval(m)
  fiber = Fiber.new do
    meth
  end
  fiber.resume
end 
```

编辑3：

刚刚尝试在 Rubinius 2.0 上运行初始代码示例。它的纤维似乎没有 4kB 的堆栈限制，尽管超过大约 3,500 次迭代它变得越来越慢，并且在大约 5,000 次迭代时它平均每秒迭代一次。我不知道 RBX 是否有限制，因为我在超过 5,100 次迭代时退出了执行。RBX 使用的内存也比 MRI 1.9.3 多几倍。

JRuby 1.7 似乎也没有 4kB 的光纤堆栈大小，如果光纤有最大堆栈大小，我不知道。我完成了第一个代码示例的 5,000 次迭代，没有出现任何问题，尽管正如可以预料的那样，JVM 消耗了几百 MB 的 RAM。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-30T03:57:01.793

正如安东在他的回答中提到的那样，您在光纤中的内存密集型代码。可能（可能）占用大量内存的示例：

*   大字符串（即：包含大小合适的 HTTP 响应的字符串）
*   递归函数（堆栈级别太深！）
*   流或类似流的对象：对流缓冲区要非常小心；如果它们接近或超过 4k，您将开始看到一些非常奇怪的行为

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-30T03:29:27.620

这样做的后果是您必须更加注意 Fiber 代码的内存，因为您可能会出现内存泄漏。

一些递归函数可能会给你带来问题

# hadoop - 我们如何知道哪些 Hadoop 恶魔在给定集群的哪个节点上运行

> ID：13638504
> 
> 赞同：0
> 
> 时间：2012-11-30T03:19:04.000
> 
> 标签：hadoop

让我们假设我是一个已经构建了多个节点的 Hadoop 集群的新手，我想知道哪些恶魔正在这个特定集群中的哪个节点上运行，有什么办法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T12:29:53.093

命令行
hadoop dfsadmin -report
将为您提供数据节点列表以及有关它们的基本统计信息。如果需要，它可以相对容易地以编程方式解析。
要获取任务跟踪器列表，我建议在 JobTracker 上打开 Web UI（端口 50030）。据我所知，有任务跟踪器列表。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T08:37:54.687

我们可以使用“jps”工具来了解节点上正在运行哪些守护进程。JPS 代表 Java 虚拟机进程状态工具。

jps 将列出系统中正在运行的所有 java 进程。

# asp.net - 如何从另一个按钮在编辑模式下保存详细视图

> ID：13638510
> 
> 赞同：0
> 
> 时间：2012-11-30T03:19:37.350
> 
> 标签：asp.net

有没有办法从不属于DetailView的另一个按钮保存处于编辑模式的detailview？换句话说，我有一个处于编辑模式的详细视图，并且有“保存”或“更新”按钮，但有时用户忘记单击“保存”按钮，他们只是继续单击页面底部的另一个按钮。我想确保当他们单击另一个按钮时首先保存他们在 DetailView 中输入的数据。我有这个命令名称：

```
<EditItemTemplate>
                        <asp:Button ID="Button1" runat="server" CausesValidation="True" 
                            CommandName="Update" Text="Save Changes" />
                        &nbsp;<asp:Button ID="Button2" runat="server" CausesValidation="False" 
                            CommandName="Cancel" Visible="false" Text="Cancel" />

                    </EditItemTemplate>

                    <ItemTemplate>
                        <asp:Button ID="Button1" runat="server" CausesValidation="False" 
                            CommandName="Edit" Text="Save Changes" />
                    </ItemTemplate> 
```

这是我在您提出建议后所做的：

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T03:26:26.627

根据他们单击的其他按钮，一种可行的方法是让其他按钮在执行操作之前单击更新按钮。但是，如果另一个按钮回发到服务器，则其中一个或另一个可能无法正常工作。

如果另一个按钮是 asp:Button，那么您可以添加以下标签（请注意，由于您要添加 javascript，因此您需要获取 Button1 的客户端 ID - 我通常使用前缀来执行此操作，因为我永远不记得如何获取服务器标签内的 ClientID）：

```
OnClientClick="document.getElementById('MainContent_DetailsView2_Button1').click();" 
```

您需要此前缀，因为 ASP 会自动创建嵌套在父控件内的唯一 ID。

# c# - 使用线程分离 UI

> ID：13638512
> 
> 赞同：3
> 
> 时间：2012-11-30T03:19:44.513
> 
> 标签：c#, multithreading

我是 C# 和线程的新手，我有一个项目，我有一个黑白棋游戏，我必须制作多线程，经过几天的试验，我没有进一步前进。我必须将 UI 与代码分开，基本上这样需要一段时间才能加载的进程不会“冻结”程序，从而允许用户访问按钮和用户界面位。

我研究了后台工作人员、任务、一般线程。

这是代码的几个关键部分，当我单击移动按钮时，我希望运行 dowork 方法，使 UI 保持交互。

```
 private void playerMoveButton_Click(object sender, EventArgs e)
    {
        _bw = new BackgroundWorker
        {
            WorkerReportsProgress = true,
            WorkerSupportsCancellation = true
        };
        _bw.DoWork += bw_DoWork;
        if (_bw.IsBusy) _bw.CancelAsync();
    }

  public void bw_DoWork(object sender, DoWorkEventArgs e)
    {

        if (gameOver)
        {
            moveLabel.Text = "Game Over";
            moveTypeLabel.Text = "";
            return;
        }

        // Now the computer plays
        moveLabel.Text = "My Move";

        // Does it have any legal moves?
        int numComputerMoves = theGame.CountLegalMovesMoves();
        if (numComputerMoves != 0)
        {
            if (computerPlayStyle == PlayStyle.RANDOM)
            {
                moveTypeLabel.Text = "Guessing...";

                moveTypeLabel.Visible = true;
                this.Refresh();
                // Sleep for a little to give player time to see what's
                // going on
                Thread.Sleep(1000);
                // get a move at random
                int[] movePos = theGame.FindRandomMove();
                // make move
                theGame.MakeMove(movePos[0], movePos[1]);
                boardLayoutPanel.Refresh();
            }
            else
            {
                moveTypeLabel.Text = "Thinking...";

                moveTypeLabel.Visible = true;
                this.Refresh();

                // Get best move
                int[] movePos = theGame.FindGoodMove(minimaxDepth);
                // make move
                theGame.MakeMove(movePos[0], movePos[1]);
                boardLayoutPanel.Refresh();
            }
        }
        else
        {
            moveTypeLabel.Text = "I've no legal moves.";

            moveTypeLabel.Visible = true;
            this.Refresh();
            // Sleep for a little to give player time to see what's
            // going on
            Thread.Sleep(1000);
            // Change current player
            theGame.SwapCurrentPlayer();
        }

        //Reset for the player move
        moveLabel.Text = "Your Move";

        int blackScore = theGame.BlackCellCount();
        int whiteScore = theGame.WhiteCellCount();

        string bscoreMsg = "Black: " + blackScore;
        string wscoreMsg = "White: " + whiteScore;

        blackScoreLabel.Text = bscoreMsg;
        whiteScoreLabel.Text = wscoreMsg;

        // Does player have any legal moves

        int numPlayerMoves = theGame.CountLegalMovesMoves();

        if (numPlayerMoves == 0)
        {
            moveTypeLabel.Text = "You have no legal moves.";
            playerMoveOKButton.Visible = true;
            // If computer player has no legal moves game over!
            if (numComputerMoves == 0)
            {
                gameOver = true;
            }
        }
        else
        {
            moveTypeLabel.Text = "Select cell or choose";
            randomMoveButton.Visible = true;
            playerMoving = true;
        }
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T03:57:17.517

在 Windows 窗体中，您可以使用[Control.Invoke 方法](http://msdn.microsoft.com/en-us/library/zyzhdc6b.aspx)从后台线程影响 UI。如果制作单独的方法没有意义，您可以使用 lambda 表达式：

```
public void bw_DoWork(object sender, DoWorkEventArgs e)
{
    string str;
    //count str value...
    textBox1.Invoke(new Action<string>((s) =>
                    {
                         textBox1.Text = s;
                    }),
                    str);
} 
```

或者你可以制作一个单独的方法：

```
private void SetText(string s)
{
    textBox1.Text = s;
} 
```

并像这样使用它：

```
textBox1.Invoke(new Action<string>(SetText), str); 
```

我使用[Action Delegate](http://msdn.microsoft.com/en-us/library/018hxwa8.aspx)来指定`Invoke`方法的委托。它为您提供了创建所需的任何方法签名的机会。

* * *

另请查看[Thread Synchronization (C# Programming Guide)](http://msdn.microsoft.com/en-us/library/ms173179%28v=vs.80%29.aspx)。只要您的代码尝试在线程之间共享一些变量，您就需要这个。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-30T04:05:36.880

你需要代表。

这是一个相当简单的示例，说明如何使用委托进行此操作：

```
 public partial class Form1 : Form
    {
        private Thread _worker;
        private delegate void SendErrorDelegate(Exception exception);
        private delegate void SetCurrentStatus(string status);
        private void button1_Click(object sender, EventArgs e)
        {
            try
            {
                 this._worker = new Thread(new ThreadStart(MyMethod));
                 this._worker.Start();
            }
            catch (Exception ex)
            {
                HandleError(ex);
            }
        }
        private void MyMethod()
        {
            //you can do work like crazy here, but any time you want to update UI from this method,
            //it should be done with a delegate method like:
            SetStatusLabel("this happened");
            //and
            SetStatusLabel("I just did something else");
        }
        private void SetStatusLabel(string status)
        {
           if (this.InvokeRequired)
           {
                this.Invoke(new SetCurrentStatus(SetStatusLabel), status);
                return;
           }
           this.lblStatusLable.Visible = true;
           this.lblStatusLabel.Text = status;
        }
        private void HandleError(Exception ex)
        {
             if (this.InvokeRequired)
             {
                this.Invoke(new SendErrorDelegate(HandleError), ex);
                return;
             }
             //update some UI element from delegate now. eg-
             this.txtExceptionBox.Text = ex.Message; //or ex.ToString() etc 
             //LogException(exception);               
         }
    } 
```

所以基本上 - 任何时候你想从另一个线程上的方法的上下文中更新用户界面，你只需确保通过根据需要调用委托 void/方法来做到这一点。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-30T03:28:12.037

两个步骤应该让你更接近：
1) 将需要更新 UI 的任何代码分离到单独的方法中。
2) 从你的 DoWork 方法中，当你想调用一个方法来更新 UI 时，使用`Dispatcher.Invoke`来调用将要更新 UI 的方法。这可确保该方法在 UI 的线程中执行。

# java - 为返回值的函数实现多线程时的难题

> ID：13638514
> 
> 赞同：2
> 
> 时间：2012-11-30T03:20:22.737
> 
> 标签：java, android, design-patterns

TokenCache 类被传递给 Facebook 类来做`save()`和`load()`令牌。`TokenCache`具有以下功能：

```
public abstract void save(Bundle bundle);
public abstract Bundle load(); 
```

现在我想在多个线程中进行保存和加载，所以我`AsyncTask`在`load()`. 问题是它已经被设计为返回一个 Bundle！如何实现它以使值仅在`AsyncTask`完成时返回？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T03:25:53.900

您可能会使用回调机制。在AsyncTask中，load()完成后，调用回调方法根据返回的bundle进行操作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-30T03:33:42.463

只需在您的 load() 方法返回的 TokenCache 实现中包含一个 Bundle 字段。只需确保您尚未将 TokenCache 的引用传递给 FB，直到该 Bundle 由某些 init(bundle) 方法初始化，例如

```
 static class BundleRetrievalTask extends AsyncTask<String, Void, Bundle> {

        @Override
        protected Bundle doInBackground(String... strings) {
            return someLongOperationThatFetchesBundle(strings[0]);
        }

        @Override
        protected void onPostExecute(Bundle bundle) {
            super.onPostExecute(bundle);
            MyFacebookTokenCache tokenCache = MyFacebookTokenCache.init(bundle);
            doSomethingWithCache(tokenCache);

        }
    }

    static class MyFacebookTokenCache extends TokenCache {

        private Bundle mBundle;

        public MyFacebookTokenCache(Bundle bundle) {
            mBundle = bundle;
        }

        public static MyFacebookTokenCache init(Bundle bundle) {
            return new MyFacebookTokenCache(bundle);
        }

        @Override
        public Bundle load() {
            return mBundle;
        }

        @Override
        public void save(Bundle bundle) {
            //todo
        }

        @Override
        public void clear() {
            //todo
        }
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-30T03:48:43.453

```
public static BundleAsyncTask extends AsyncTask<Void, Void, Void>{
    public Bundle result;
    private final CountDownLatch latch;
    public BundleAsyncTask(CountDownLatch latch){
        this.latch = latch;
    }

    public void doInBackground(){
        //get the bundle
        latch.countDown();
    }
}

public Bundle load(){
    final CountDownLatch latch = new CountDownLatch(1);
    BundleAsyncTask task = new BundleAsyncTask(latch);
    task.execute();
    try{
        latch.await();
        return task.result;
    }catch(InterruptedException e){
        return null;
    }
} 
```

顺便说一句：我真的不明白你为什么要在这里使用 AsyncTask 。

# facebook - 单击 facebook like 按钮时避免弹出帖子

> ID：13638517
> 
> 赞同：1
> 
> 时间：2012-11-30T03:20:44.157
> 
> 标签：facebook, facebook-social-plugins

我有一个客户的页面标签应用程序，他们希望粉丝门除了页面标签框右上角的标准 FB 按钮之外，还包括页面中间的 FB 按钮。我添加了like按钮，效果很好。然而，当用户点击喜欢时，我想将他们重定向到主登录页面。

我订阅了 edge.create 事件，一切正常，但是当你点击 Like 按钮时，它会弹出一个评论框，让你在墙上分享一些东西。尽管这不会停止重定向，但这是我想避免的不必要的干扰。我有哪些选择？

我可以以某种方式检测该框何时关闭然后执行重定向吗？我可以完全禁用它吗？

# html - 列表溢出到 div

> ID：13638525
> 
> 赞同：0
> 
> 时间：2012-11-30T03:21:59.457
> 
> 标签：html, css

感谢您提前提供任何帮助。

看看这里： http: [//www.martialgear.com/martial-arts-gear/sparring-gear.html](http://www.martialgear.com/martial-arts-gear/sparring-gear.html)

将鼠标放在第一个产品上，填充武器防护头饰

请注意上面的整个类别部分如何在悬停时更改颜色。由于某种原因，这使我的有序列表与其上方的 DIV 部分重叠。应该发生的只是产品部分的背景切换颜色。

它适用于第 2、第 3 和第 4 产品等。

我尝试了对 CSS 和 html 的各种调整，但无法做到这一点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T03:34:46.613

发生这种情况是因为第一个产品上方的所有元素都是浮动的并且永远不会被清除。

一个简单的解决方法是将其添加到您的 css 中：

```
#products-list {
    clear: both;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-30T03:39:36.660

Also, your Ordered List `<ol>` is followed directly by a `<div>`, which is followed by an `<li>`. The `<li>` should go directly after the `<ol>`.

Here is what you have:

```
<ol class="products-list" id="products-list">
    <div id="product-listing" onclick="location.href='http://www.martialgear.com/martial-arts-gear/sparring-gear/padded-weapons-protective-headgear.html';" style="cursor:pointer;" class="odd">
    <li class="item"> 
```

Try changing this to

```
<ol class="products-list" id="products-list">
    <li class="item">
    <div id="product-listing" onclick="location.href='http://www.martialgear.com/martial-arts-gear/sparring-gear/padded-weapons-protective-headgear.html';" style="cursor:pointer;" class="odd"> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-30T03:34:23.507

您的整个事情都在“项目”类中，并且您有以下代码。

```
.products-list li.item {border-bottom:1px solid #d9ddd3; padding:5px 10px 5px 10px; }
.products-list li.item:hover { background:#EEEEEE; } 
```

因此，当您将鼠标悬停在产品上时，您实际上是在“项目”上悬停。消除

```
.products-list li.item:hover { background:#EEEEEE; } 
```

并将类似的悬停添加到您希望在悬停时更改颜色的特定元素。

# multithreading - 为什么 boost::shared_ptr 在它不是线程安全的时候会打扰原子引用计数？

> ID：13638526
> 
> 赞同：1
> 
> 时间：2012-11-30T03:22:00.213
> 
> 标签：multithreading, shared-ptr, atomicreference

这更像是一个好奇的问题，但由于 boost::shared_ptr 不是线程安全的，为什么还要使用原子引用计数呢？由于析构函数不能安全地跨线程使用，我没有看到这一点。

例如，如果您将 shared_ptr 的副本传递给线程，它总是会破坏，至少在线程最迟结束时是这样。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-30T03:26:53.433

我认为您误解了共享指针的线程安全限制。共享指针本身不是线程安全的，因为您不想在两个不同的线程中操作相同的共享指针。然而，同时在两个不同的线程中操作同一个对象几乎是不安全的，而且对于大多数对象来说这不是线程安全的。

在两个不同的线程中操作两个不同的共享指针*是*完全线程安全的，即使它们是指向同一个对象的指针。

例如，一个线程可以创建一个对象和一个指向它的共享指针。然后它可以创建另一个指向同一个对象的共享指针。然后一个线程可以操作第一个共享指针，另一个线程可以操作第二个共享指针。当两个共享指针中的最后一个（以及任何额外的副本）消失时，对象将被销毁。

# windows-phone-7 - WP7 BackgroundAudioPlayer 错误代码

> ID：13638528
> 
> 赞同：1
> 
> 时间：2012-11-30T03:22:09.183
> 
> 标签：windows-phone-7, background-audio

`BackgroundAudioPlayer`在 Windows Phone 7 应用程序中使用时。它有时会导致错误，并`OnError`会处理它。问题是它只显示错误代码，我们不知道。在阅读[Paul Annets 的文章](http://blogs.msdn.com/b/wpukcoe/archive/2012/02/11/background-audio-in-windows-phone-7-5-part-3.aspx)时。我发现了一些错误代码的含义。

```
Exception.Message   Hex equivalent  Meaning
“-2147012889”       80072EE7        Can’t find the server (e.g. phone is in flight mode)
“-2147012696”       80072FA8        No available network connection
"-1072889830”       C00D001A        Can’t find media file (e.g. the MP3 file you were pointing to is no longer on the server)
“-2147467259”       80004005        Non-specific error code 
```

目前我遇到错误代码“-2147012865”（error.Data是类型`ListDictionaryInternal`），我想知道它的含义？

P/S：如果您有其他错误代码的含义，在这里分享会很棒

# objective-c - 如何从网站读取文本文件并将其加载到 UITableview

> ID：13638531
> 
> 赞同：2
> 
> 时间：2012-11-30T03:23:10.730
> 
> 标签：objective-c, arrays, uitableview

我的公司向我投了一颗炸弹……我必须从网站上的文本文件中获取内容，例如`http://mysite.com/file.txt`. 该文件包含大约 500 行，每行有 3 个字段`account number`：`last name`和`first name`.

我需要将这些行读入一个数组并显示在 a`tableview`中`lastname`，`firstname`然后在从中选择时，`tableview`我需要将帐号发送到一个变量，我可以将其发送回另一个程序。我需要在我的 .h 和 .m 文件中添加什么来完成这项工作？

# sql-server - 被黑的 SQL Server 数据库需要正则表达式

> ID：13638532
> 
> 赞同：1
> 
> 时间：2012-11-30T03:23:26.193
> 
> 标签：sql-server, database

我的一个客户的一个数据库被黑了。我正在尝试重建数据。该站点正在运行带有 SQL Server 数据库的经典 ASP。我相信我已经找到了黑客的弱点，并暂时删除了该入口点。

数据库中的每个文本列都附加了一些 html 标记和内联 script/js 标记。

下面是一个字段示例：

```
all</title><script>
    document.write("<style>.aq21{position:absolute;clip:rect(436px,auto,auto,436px);}</style>");
</script>
<div class=aq21>
    <a href=http://samedaypaydayloansonlineelqmt.com >same day payday loans online</a>
    <a href=http://samedaypaydayloan 
```

此示例在列中的`Users`表中`UserRights`。初始值为`all`，但随后您可以看到附加的链接。

我需要编写一个正则表达式脚本，它将搜索数据库中每个表的每一列中的所有字段并删除这个额外的标记。

本质上，如果我尝试匹配`</table>`，那么该字符串及其附加的所有内容都可以替换为空白字符串。

对于同一列中的每个字段，所有这些附加字符串都是相同的。但是，每个表中有多个列。

这就是我到目前为止一直在做的事情，替换被黑的部分，但是一个好的正则表达式可能会帮助我，尽管我的正则表达式技能......很糟糕。

```
UPDATE [databasename.[db].[databasetable]
set 
UserRights = replace(UserRights,'</title><script>document.write("<style>.aq21{position:absolute;clip:rect(436px,auto,auto,436px);}</style>");</script><div class=aq21><a href=http://samedaypaydayloansonlineelqmt.com >same day payday loans online</a><a href=http://samedaypaydayloan',''); 
```

感谢任何正则表达式帮助和/或提示。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T14:49:48.000

这就是我最终要做的（非常感谢@Bohemian）：

我浏览了每个表并检查了哪一列受到了影响。然后我在每一列上运行以下脚本：

```
UPDATE [tablename]  
set columnname = substring(columnname, 1, charindex('/', columnname)-1)
where columnname like '%</%'; 
```

如果该列中有任何标记，那么我最终会手动更新这些记录。（幸运的是我只有几张唱片）。

如果有人有更好的解决方案，请随时发表评论。

谢谢！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-30T06:14:48.663

由于不好的东西以 a 开头`<`，而且这是一个通常很难找到的不寻常字符，我会使用普通的文本函数，如下所示：

```
update mytable set
mycol = substr(mycol, 1, charindex('<', mycol) - 1)
where mycol like '%<%'; 
```

并有条不紊地对每个表的每一列进行此操作。

请注意，我只是在猜测要使用的正确函数，因为我不熟悉 SQL Server，但你明白了。

我欢迎有人编辑 SQL 来改进它。

# python - 在提供 pdf 文件以在 django 中下载时出错

> ID：13638533
> 
> 赞同：0
> 
> 时间：2012-11-30T03:23:28.187
> 
> 标签：python, django, download

这是我的网址

```
url(r'download/$', views.DownloadView.serve_pdf, name="pdfdata-ddl" ) 
```

这是我的看法

```
class DownloadView():

    def serve_pdf(request):
        #pdf_data = magically_create_pdf()

        response = HttpResponse(mimetype='application/pdf')
        response['Content-Disposition'] = 'attachment; filename="/test/angular.pdf"'
        return response 
```

错误是这个

```
unbound method serve_pdf() must be called with DownloadView instance as first argument (got WSGIRequest instance instead) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T03:38:49.650

您需要`self`作为第一个参数传入您的方法：

```
class DownloadView(object):
    def serve_pdf(self, request):
        #pdf_data = magically_create_pdf()

        response = HttpResponse(mimetype='application/pdf')
        response['Content-Disposition'] = 'attachment; filename="/test/angular.pdf"'
        return response 
```

[编辑]对不起，我忘了提到你还需要在 URL 定义中实例化类：

```
url(r'download/$', views.DownloadView().serve_pdf, name="pdfdata-ddl" ) 
```

要使用 Python 创建 PDF，请查看[Pisa](http://pypi.python.org/pypi/pisa)。

# python - 生成器错误地产生空列表

> ID：13638536
> 
> 赞同：0
> 
> 时间：2012-11-30T03:23:40.170
> 
> 标签：python

我已经阅读了这个网站上[的 Python Yield Keyword Explained](https://stackoverflow.com/questions/231767/the-python-yield-keyword-explained)，并且在我的一些函数中使用了它，但是对于我的生活，我一直无法解决这个问题。

我有以下生成器函数，当输入示例值时：

```
import collections
import itertools
import pprint
import copy

partition = []
def partition_prime_factors(partition_structure, prime_factors):
    # partition_structure is a list
    # prime_factors is a collections.Counter object

    global partition    

    for subsection_size in reversed(partition_structure):
        partition_structure.remove(subsection_size)        
        subsections = list(itertools.combinations(prime_factors.elements(), subsection_size))

        for subsection in subsections:
            prime_factors -= collections.Counter(subsection)
            partition.append(list(subsection))

            if len(prime_factors) == 0:
                pprint.pprint(globals()['partition'])

                yield copy.copy(partition)
            else:
                for j in partition_prime_factors(partition_structure, prime_factors):
                    pass

            prime_factors += collections.Counter(subsection)
            partition.remove(list(subsection))

        partition_structure.append(subsection_size)

print [i for i in partition_prime_factors([1, 3], collections.Counter([2, 2, 3, 5]))]

>>> [[2, 2, 3], [5]]
>>> [[2, 2, 5], [3]]
>>> [[2, 3, 5], [2]]
>>> [[2, 3, 5], [2]]
>>> [[2], [2, 3, 5]]
>>> [[2], [2, 3, 5]]
>>> [[3], [2, 2, 5]]
>>> [[5], [2, 2, 3]]
>>> [] 
```

所以分区正在被正确评估，但没有产生。如何！？！？！？！哈哈！我什至在屈服之前制作了每个分区的副本，以避免因引用同一个对象而被搞砸。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T03:32:41.943

您不会产生从递归调用中获得的值`partition_prime_factors`。当你递归时：

```
for j in partition_prime_factors(partition_structure, prime_factors):
    pass 
```

您需要重新生成值：

```
for j in partition_prime_factors(partition_structure, prime_factors):
    yield j 
```

# database - 如何强制更新数据库网格？

> ID：13638537
> 
> 赞同：1
> 
> 时间：2012-11-30T03:23:48.170
> 
> 标签：database, delphi, dbgrid

为了我自己的利益，我可能太聪明了：-/

我有一张桌子，里面有一些压力测量值。这些始终存储为 PSI，但用户可以选择单选组按钮在 PSI 和 BAR 之间切换。

为了保持代码干净并将工作推送到数据库，我为`configuration`项目创建了第二个表，只有一行。当用户切换无线电组时，一列`psi_bar_conversion`将采用值 1 或 14.5。

在 Delphi 中，与我的数据库网格相关联的查询是使用如下语句设置的

```
SELECT ROUND(inlet_waterPressure_psi  /  
                  (SELECT psi_bar_conversion FROM configuration), 
             (SELECT float_precision FROM configuration))
       AS inlet_waterPressure, 
FROM measurements 
```

所有这些都很好（也许我解释得太多了）。

我要做的就是在处理单选按钮切换的函数中添加一些代码，以强制我的数据库网格刷新其内容，因为我刚刚更新了`configuration.psi_bar_conversion`（但没有我的查询的直接字段，也没有我的数据源）。

我应该调用`Refresh()`或`Invalidate()`或`SomeOtherFunction()`- 数据库网格、查询、数据源吗？这就是让我困惑的地方。

在此先感谢您的帮助....

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T13:30:09.607

TDBGrid 表示依赖于连接的 TDataSet（通过 TDataSource）。

`TDataSet`要更新网格值，您必须使用方法刷新数据`TDataSet.Refresh`。

要更新特殊的 Grid，您可以像这样刷新连接的 DataSet：

```
DBGrid1.DataSource.DataSet.Refresh; 
```

但是一些 TDataSet 后代不会刷新，Embarcadero 记录了这一点

[TDataSet.Refresh](http://docwiki.embarcadero.com/Libraries/XE3/en/Data.DB.TDataSet.Refresh)

这取决于您使用的组件（我用 UniDAC 进行了测试，它工作正常）

```
procedure TForm1.RadioGroup1Click( Sender : TObject );
var
  LRate : Extended;
begin
  case RadioGroup1.ItemIndex of
    0 :
      LRate := 1;
    1 :
      LRate := 14.5;
  end;
  UniConnection1.ExecSQL( 'UPDATE configuration SET psi_bar_conversion = :conversion', [LRate] );
  DBGrid1.DataSource.DataSet.Refresh;
end; 
```

如果您的组件在调用 Refresh 时没有重新获取数据，那么您必须关闭并重新打开（也由文档说明）

```
DBGrid1.DataSource.DataSet.Close;
DBGrid1.DataSource.DataSet.Open; 
```

恕我直言，此类组件尚未完全实现，因此这只是一种解决方法，在调用某些可能不需要的事件（BeforeClose、AfterClose、BeforeOpen、AfterOpen）时会产生副作用，这些事件不会使用 Refresh 触发。

但它根本与 SubSelects 无关。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-30T03:31:39.087

您需要关闭然后重新打开查询以使更改生效`psi_bar_conversion`并`float_precision`生效。两个子选择（对于 from 的值`configuration`）仅在执行查询时发生。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-06T13:41:09.193

我很害怕我无法帮助你解决德尔福方面的问题。

在数据库方面......

是否有任何理由不能将 bar 和 psi 值都存储在数据库中？

您可以在保存时进行转换，然后您只需在要查看数据时对数据进行简单的选择。这可以通过执行保存的软件或数据库中的触发器来完成。

我建议这样做的原因是 psi-bar 转换率不会改变，因此您每次查看不需要的数据时都会进行大量处理......

# android - 带有导出活动权限的 Eclipse 警告

> ID：13638538
> 
> 赞同：0
> 
> 时间：2012-11-30T03:23:50.780
> 
> 标签：android, android-manifest

我的 Android 清单中有这个：

```
 <activity
        android:name=".Planner"
        android:label="---" >
        <intent-filter>
            <action android:name="com.---.---.PLANNER" />

            <category android:name="android.intent.category.DEFAULT" />
        </intent-filter>
    </activity> 
```

但我在 Eclipse 中收到警告：`Exported Activity Does not Require Permission`

所以我把它改成这样：

```
 <activity
            android:name=".Planner"
            android:label="---" /> 
```

警告消失，但一旦启动此活动，它就会强制关闭。这是LogCat：

```
11-29 19:22:03.569: E/AndroidRuntime(434): FATAL EXCEPTION: main
11-29 19:22:03.569: E/AndroidRuntime(434): android.content.ActivityNotFoundException: No Activity found to handle Intent { act=com.---.---.PLANNER }
11-29 19:22:03.569: E/AndroidRuntime(434):  at android.app.Instrumentation.checkStartActivityResult(Instrumentation.java:1409)
11-29 19:22:03.569: E/AndroidRuntime(434):  at android.app.Instrumentation.execStartActivity(Instrumentation.java:1379)
11-29 19:22:03.569: E/AndroidRuntime(434):  at android.app.Activity.startActivityForResult(Activity.java:2827)
11-29 19:22:03.569: E/AndroidRuntime(434):  at android.app.Activity.startActivity(Activity.java:2933)
11-29 19:22:03.569: E/AndroidRuntime(434):  at com.---.---.ManageDebts$3.onClick(ManageDebts.java:135)
11-29 19:22:03.569: E/AndroidRuntime(434):  at android.view.View.performClick(View.java:2485)
11-29 19:22:03.569: E/AndroidRuntime(434):  at android.view.View$PerformClick.run(View.java:9080)
11-29 19:22:03.569: E/AndroidRuntime(434):  at android.os.Handler.handleCallback(Handler.java:587)
11-29 19:22:03.569: E/AndroidRuntime(434):  at android.os.Handler.dispatchMessage(Handler.java:92)
11-29 19:22:03.569: E/AndroidRuntime(434):  at android.os.Looper.loop(Looper.java:123)
11-29 19:22:03.569: E/AndroidRuntime(434):  at android.app.ActivityThread.main(ActivityThread.java:3683)
11-29 19:22:03.569: E/AndroidRuntime(434):  at java.lang.reflect.Method.invokeNative(Native Method)
11-29 19:22:03.569: E/AndroidRuntime(434):  at java.lang.reflect.Method.invoke(Method.java:507)
11-29 19:22:03.569: E/AndroidRuntime(434):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
11-29 19:22:03.569: E/AndroidRuntime(434):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
11-29 19:22:03.569: E/AndroidRuntime(434):  at dalvik.system.NativeStart.main(Native Method) 
```

这是第 135 行：

```
startActivity(new Intent("com.---.---.PLANNER")); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T03:37:41.447

此警告意味着您在没有获得许可的情况下公开您的活动。

将您的清单更改为

```
<activity
    android:name=".Planner"
    android:label="---" 
    android:exported = "false"
> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-30T03:32:56.157

您需要使用不同的意图。采用

```
Intent intent = new Intent(YourFirstClass.this, PlannerActivity.class);
startActivity(intent); 
```

其中 PlannerActivity 是您在 Eclipse 中看到的活动的名称。

# shell - 在不使用 wc 的情况下计算文件中的单词

> ID：13638540
> 
> 赞同：2
> 
> 时间：2012-11-30T03:24:35.447
> 
> 标签：shell, unix

在此处使用 shell 脚本，尝试在不使用 wc 命令的情况下计算文件中的单词/字符/行数。我可以将文件分成几行并轻松计算那些，但我在这里努力获取单词和字符。

```
#define word_count function
count_stuff(){
    c=0
    w=0
    l=0
    local f="$1"
    while read Line
    do
        l=`expr $line + 1`
        # now that I have a line I want to break it into words and characters???
    done < "$f"
    echo "Number characters:  $chars"
    echo "Number words: $words"
    echo "Number lines: $line" 
```

}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T00:32:30.767

至于字符，试试这个（将 echo "test" 调整到你得到输出的位置）：

```
expr `echo "test" | sed "s/./ + 1/g;s/^/0/"` 
```

至于线条，试试这个：

```
expr `echo -e "test\ntest\ntest" | sed "s/^.*$/./" | tr -d "\n" | sed "s/./ + 1/g;s/^/0/"` 
```

===

至于你的代码，你想要这样的东西来计算单词（如果你想完全原始的话）：

```
while read line ; do
 set $line ;
 while true ; do
  [ -z $1 ] && break
  l=`expr $l + 1`
  shift ;
 done ;
done 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-03-18T16:22:01.670

您可以使用以下 Bash shell 脚本执行此操作：

```
count=0
for var in `cat $1`
do
    count=`echo $count+1 | bc`
done
echo $count 
```

# vb.net - 视觉基础等于或大于

> ID：13638541
> 
> 赞同：3
> 
> 时间：2012-11-30T03:25:12.400
> 
> 标签：vb.net

我正在尝试编写一些代码，如果`textbox1`在 10 之间等于 0，则 HandDecimal = 1。否则，如果`textbox1`等于 10.1 到 100，则 HandDecimal = 3。否则，如果`textbox1`等于 100.1 且大于 HandDecimal = 5。

这是我的代码，但它似乎对我不起作用。

```
 If WeightDecimal = 0 <= 10 Then

            HandDecimal = 1

        ElseIf WeightTextBox.Text = 10 <= 100 Then

            HandDecimal = 3

        ElseIf WeightTextBox.Text >= 100.1 Then

            HandDecimal = 5

        End If 
```

我如何必须更改代码才能使其工作？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-30T03:28:02.170

```
 Dim weight as Decimal = Decimal.Parse(WeightTextBox.Text) 
   If weight  >= 0 AndAlso weight <= 10 Then

        HandDecimal = 1

    ElseIf weight  > 10 AndAlso weight <= 100 Then

        HandDecimal = 3

    ElseIf weight > 100 Then

        HandDecimal = 5

    End If 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-30T03:54:22.937

`Select Case``To`带运算符的语句

```
Select Case WeightDecimal
Case 0 To 10
    HandDecimal = 1
Case 10.1 To 100
    HandDecimal = 3
Case Else 
    HandDecimal = 5
End Select 
```

# android - 无法从服务中获取活页夹对象

> ID：13638544
> 
> 赞同：2
> 
> 时间：2012-11-30T03:25:26.337
> 
> 标签：android, android-service

我在我的 BootReceiver 类中收到一个启动完成的意图，并在我收到该意图时启动一项服务。

```
@Override
public void onReceive(Context arg0, Intent arg1) {
    Intent myIntent = new Intent(arg0, BootService.class);
    arg0.startService(myIntent);    
} 
```

该服务已正常启动，现在我想在服务中使用 binder 对象。这是服务代码。

```
public class BootService extends Service implements IBinder{
private IBinder binder;

public class LocalBinder extends Binder {
    IBinder getService() {
        return BootService.this;
    }
}

@Override
public void onCreate() {
    super.onCreate();
    Log.d("BootService", "onCreate()");

}

@Override
public int onStartCommand(Intent intent, int flags, int startId) {
    Log.d("BootService", "onStartCommand()");
    binder = new LocalBinder().getService();
    //This doesn't seem to work
    //I wana use this binder object here

    return START_STICKY;
}
.....
} 
```

我不确定这是否是获得活页夹的正确方法。任何帮助深表感谢！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T03:51:48.713

```
In ur Acivity 
@Override
    protected void onStart() {
        super.onStart();

        Intent intent = new Intent(getApplicationContext(), MyService.class);
        bindService(intent, mConnection, Context.BIND_AUTO_CREATE);
    }
    @Override
    protected void onStop() {
        super.onStop();
        unbindService(mConnection);
    }

    private ServiceConnection mConnection = new ServiceConnection() {

        @Override
        public void onServiceDisconnected(ComponentName name) {

        Toast.makeText(getApplicationContext(), "Service disconnected", 1000).show();
        mBindr = false;
        }

        @Override
        public void onServiceConnected(ComponentName name, IBinder service) {
            Toast.makeText(getApplicationContext(), "Service connected", 1000).show();
            LocalBinder mLocalBinder = (LocalBinder) service;
            myService = mLocalBinder.getSrvice();
            mBindr = true;
        }
    }; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T03:37:31.527

Update your code

```
import android.app.Service;
import android.content.Intent;
import android.os.Binder;
import android.os.IBinder;
import android.util.Log;

public class BootService extends Service {
    private IBinder binder = new LocalBinder();

    @Override
    public IBinder onBind(Intent arg0) {
    // TODO Auto-generated method stub
    return binder;
}

public class LocalBinder extends Binder {
    BootService getService() {
        return BootService.this;
    }
}

@Override
public void onCreate() {
    super.onCreate();
    Log.d("BootService", "onCreate()");

}

@Override
public int onStartCommand(Intent intent, int flags, int startId) {
    Log.d("BootService", "onStartCommand()");
    //binder = new LocalBinder().getService();
    //This doesn't seem to work
    //I wana use this binder object here

    return START_STICKY;
}

.....

} 
```

# r - 将 200 万行日期字符串加速转换为 POSIX.ct

> ID：13638545
> 
> 赞同：12
> 
> 时间：2012-11-30T03:25:27.410
> 
> 标签：r, posix, time-series, xts, posixct

我有一个 csv，其中包含大约 200 万行日期字符串，格式如下：

```
2012/11/13 21:10:00 
```

让我们称之为`csv$Date.and.Time`

**我想尽快将这些日期（及其随附数据）转换为 xts**

我已经编写了一个脚本，可以很好地执行转换（见下文），但它非常慢，我想尽可能加快速度。

这是我目前的方法。有没有人对如何使这个更快有任何建议？

```
 dt <- as.POSIXct(csv$Date.and.Time,tz="UTC")

idx <- format(dt,tz=z,usetz=TRUE) 
```

因此脚本将这些日期字符串转换为`POSIX.ct`. 然后它使用`format`(`z`是代表我要转换的 TZ 的变量) 进行时区转换。然后，我定期`xts`调用以将其与 csv 中的其余数据一起设为 xts 系列。

这 100% 有效。它只是非常非常缓慢。我试过并行运行它（它什么也没做；如果有的话，它会使情况变得更糟）。“慢”是什么意思？

```
 user    system   elapsed 
155.246  16.430 171.650 
```

那是在 3GhZ、16GB ram 2012 mb pro 上。我可以在 Win7 机器上使用 32GB RAM 的类似处理器获得大约一半

我敢肯定有人有更好的主意-我愿意接受`Rcpp`等方面的建议。但是，**理想情况下，该解决方案适用于 csv 而不是其他方法，例如设置数据库**。话虽如此，我将通过任何能提供最快转换的方法来做到这一点。

我会非常感谢任何帮助。提前致谢。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-11-30T04:09:38.850

您需要 Simon 提供的小而简单的[fasttime](http://rforge.net/fasttime)包，它以最快的方式做到这一点——不调用时间解析函数，而只使用 C 级字符串函数。

它不支持像`strptime`. 事实上，它甚至没有格式字符串。但是格式良好的 ISO 格式变体`yyyy-mm-dd hh:mm:ss.fff`可以正常工作，而且您的`/`分隔符也可以正常工作。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-30T15:17:55.273

尝试使用`lubridate`- 它使用正则表达式进行所有日期时间解析，因此不仅速度更快，而且更灵活。

# regex - 使用 Grep 查找两个短语（包括短语）之间的文本块

> ID：13638546
> 
> 赞同：3
> 
> 时间：2012-11-30T03:25:28.350
> 
> 标签：regex, linux, unix, grep, bbedit

是否可以使用 grep 来精简所有以以下开头的文本：

```
mutablePath = CGPathCreateMutable(); 
```

并以：

```
CGPathAddPath(skinMutablePath, NULL, mutablePath); 
```

在这两个短语之间哪里有任意数量的文本？

注意：我必须使用 grep，因为我使用的是 BBEdit。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-30T03:53:25.280

您将需要使用`GNU grep`：

```
grep -oPz 'mutablePath = CGPathCreateMutable\(\);.*?(\n.*?)*.*?CGPathAddPath\(skinMutablePath, NULL, mutablePath\);' file 
```

如果你没有`GNU grep`，你可以使用`pcregrep`来达到同样的目的：

```
pcregrep -M 'mutablePath = CGPathCreateMutable\(\);.*(\n|.)*CGPathAddPath\(skinMutablePath, NULL, mutablePath\);' file 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T03:29:29.920

您可以像这样使用 sed：

```
sed -n '/mutablePath = CGPathCreateMutable();/,/CGPathAddPath(skinMutablePath, NULL, mutablePath);/p' infile 
```

**编辑：**

不确定`-P`BBEdit 是否支持 grep 标志。如果是，那么你可以使用这个：

```
grep -oP 'mutablePath = CGPathCreateMutable();\X*CGPathAddPath(skinMutablePath, NULL, mutablePath);/' infile 
```

根据 grep 手册页：

> -P, --perl-regexp 将 PATTERN 解释为 Perl 正则表达式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-30T03:31:18.260

如果您想打印这些之间的行并包括这些行，您可以使用：

```
perl -ne '/start line/ .. /end line/ and print' 
```

# php - 如何限制用户可以在表单中输入的内容（字段中必须有@）

> ID：13638553
> 
> 赞同：1
> 
> 时间：2012-11-30T03:26:25.747
> 
> 标签：php, html, forms, character, limit

我正试图从我的表单中阻止一点垃圾邮件。这是一个电子邮件列表，只需将框中的任何文本提交到我的数据库中即可。有没有办法让我检查用户是否在字段中添加了@？

```
echo '<style type="text/css">';
include 'style.css';
echo '</style>';
if( $_POST )
{
    $con = mysql_connect("localhost","flickey_emails","");

    if (!$con)
    {
        die('Could not connect: ' . mysql_error());
    }

    mysql_select_db("flickey_emailsubscribe", $con);

    $users_email = $_POST['email'];

    $users_email = htmlspecialchars($users_email);

    $query = "INSERT INTO `flickey_emailsubscribe`.`emails` (`id`, `email`) VALUES (NULL, '$users_email');";

    mysql_query($query);

    echo "<h2>Thanks for joining the email list!</h2>";

    mysql_close($con); 
```

HTML

```
 <form action="contact.php" method="post">
Email: <input type='text' name='email' id='email' /><input type='submit' value='Submit' />  
</form> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T03:30:41.800

如果你只是想检查提交的是否有@，你可以使用 indexOf()：

```
var form_text = "random text";
if(form_text.indexOf("@") == -1) {
  //@ was not found, show message, error, etc.
} else {
  //submit form
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-30T03:31:01.053

我建议您在这种情况下使用正则表达式。Tyr this

```
`'/^[^\W][a-zA-Z0-9_]+(\.[a-zA-Z0-9_]+)*\@[a-zA-Z0-9_]+(\.[a-zA-Z0-9_]+)*\.[a-zA-Z]{2,4}$/'` 
```

您可以严格用户。`@`即使这也可以用于验证完整的电子邮件地址格式
这是测试脚本

```
$string = "first.last@domain.co.uk";
if (preg_match(
`'/^[^\W][a-zA-Z0-9_]+(\.[a-zA-Z0-9_]+)*\@[a-zA-Z0-9_]+(\.[a-zA-Z0-9_]+)*\.[a-zA-Z]{2,4}$/'`,
$string)) {
echo "example successful.";
}> 
```

您也可以为此使用[filter_var](http://php.net/manual/en/function.filter-var.php)

```
if (filter_var($email, FILTER_VALIDATE_EMAIL)) {
  echo "Valid email address.";
} else {
  echo "Invalid email address.";
} 
```

# android - Viewpager 和后台线程

> ID：13638559
> 
> 赞同：1
> 
> 时间：2012-11-30T03:27:32.850
> 
> 标签：android, android-viewpager

每当我在 ViewPager 中滑动时，我都有以下过程

1.  在 instantiateItem 中创建一个新的 ListView 实例。
2.  将此 ListView 添加到 ViewPager 中。
3.  启动后台线程加载数据，然后向 UI 线程发送消息，将加载的数据设置为步骤 1 中创建的 Listview。

我的问题是，如果我刷的非常快，我的猜测是在第 3 步中创建的线程很多，不需要运行，那么，我该如何处理这种情况？如何阻止这些线程运行？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T10:50:00.897

我建议使用`ViewPager.setOffscreenPageLimit(MAX_SIZE)`并将 MAX_SIZE 设置为您喜欢的任何内容。页面超出此范围后

```
public void destroyItem(ViewGroup container, int position, Object object) 
```

将被调用。在这种情况下，您可以通过调用取消来处理线程并执行该页面所需的任何其他操作。无论您滚动浏览的速度有多快，这都会限制同时运行的线程数。

当用户滚动回其范围时，将再次调用 instanceiteItem 项。

# php - OpenCart：在联系我们页面添加电子邮件地址

> ID：13638562
> 
> 赞同：1
> 
> 时间：2012-11-30T03:27:41.727
> 
> 标签：php, opencart

我需要在联系我们页面上显示我客户的电子邮件地址。我怎样才能做到这一点？是否有任何`vqmod`插件或任何其他解决方案？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-11-15T15:37:59.983

刚刚来到这里寻找相同的答案并在其他地方找到它，我想我会更新这个线程，因为它在搜索这个主题时出现在谷歌上。

在上述文件中`../catalog/view/theme/YOUR_THEME/template/information/contact.tpl`执行以下操作。

添加`<?php echo $this->config->get('config_email'); ?>`您希望电子邮件出现的位置。这会从管理员设置页面获取电子邮件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T03:45:01.933

我找到了我的问题的解决方案。

我需要编辑这个文件：

```
...../catalog/view/theme/YOUR_THEME/template/information/contact.tpl 
```

**寻找**

```
 <div style="float: right; display: inline-block; width: 50%;">
    <?php if ($telephone) { ?>
    <b><?php echo $text_telephone; ?></b><br />
    <?php echo $telephone; ?><br />
    <br />
    <?php } ?>
    <?php if ($fax) { ?>
    <b><?php echo $text_fax; ?></b><br />
    <?php echo $fax; ?>
    <?php } ?> 
```

**改成**

```
 <div style="float: right; display: inline-block; width: 50%;">
            <?php if ($telephone) { ?>
            <b><?php echo $text_telephone; ?></b><br />
            <?php echo $telephone; ?><br />
            <br />
            <?php } ?>
            <?php if ($fax) { ?>
            <b><?php echo $text_fax; ?></b><br />
            <?php echo $fax; ?>
            <?php } ?>
            <br />
<b>Email:</b><br />
            EMAIL@YOURSITE.com<br />
          </div>
        </div>
      </div> 
```

工作得很好。

# visual-studio-2010 - 获取页面所有者联系电子邮件并在 SharePoint 2010 Masterpage 中显示

> ID：13638572
> 
> 赞同：2
> 
> 时间：2012-11-30T03:29:07.197
> 
> 标签：visual-studio-2010, sharepoint-2010, master-pages, spservices

我已经构建了一个解决方案，其中包含多个母版页/页面布局作为一组 SharePoint 2010 发布网站集的功能。

一个一致的要求是能够获取页面所有者联系电子邮件并将其显示在母版页的页脚中。如果没有输入联系电子邮件页面，那么我需要从人员选取器中获取页面所有者数据，并从中获取联系电子邮件。

我不想将每个发布页面布局都添加到我的解决方案中，并手动将联系人电子邮件列添加到占位符中，这对我来说似乎很疯狂。我认为必须有一种方法可以从母版页中获取页面所有者数据，但我无法弄清楚。我开始查看 jQuery SPServices 库，但到目前为止我也无法弄清楚。

有没有人有使用 Masterpage 中提供的页面所有者联系信息添加联系电子邮件的经验？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T10:21:18.740

好的，为了解决这个问题，您需要在您的站点上安装 jQuery 1.7.x+ 和[SPServices jQuery 库](http://spservices.codeplex.com/)版本 0.7.2 或更高版本。

使用[GetListItems](http://spservices.codeplex.com/wikipage?title=GetListItems&referringTitle=Lists)作为来自 SPServices 的操作。

我在 Pages 目录中搜索页面，所以 listName 是“Pages”。

CAML 视图字段基本上是 PublishingContactEmail 和 PublishingContact 的列。我发现那些使用[u2u 的 CAML builder 版本 4.0.0.0](http://www.u2u.be/res/tools/camlquerybuilder.aspx)

ows_ 变量可以在 firebug 的 POST 对象的 xml 视图中找到。

ows_PublishingContact 返回联系人信息的长字符串。幸运的是，电子邮件地址被 包围`,#`，这使得将其拆分为一个数组，然后搜索电子邮件 @ 很容易，但这就是存在的原因。

```
function get_page_contact_email() {    
    var thisPageID = _spPageContextInfo.pageItemId;    
    var e;    
    $().SPServices({    
        operation: "GetListItems",    
        async: false,    
        listName: "Pages",    
        CAMLViewFields: "<ViewFields><FieldRef Name='PublishingContactEmail' /><FieldRef Name='PublishingContact' /></ViewFields>",    
        CAMLQueryOptions: "<QueryOptions><ExpandUserField>True</ExpandUserField></QueryOptions>",    
        completefunc: function (xData, Status) {    
            $(xData.responseXML).SPFilterNode("z:row").each(function () {    
                if (thisPageID == $(this).attr("ows_ID")) {    
                    if ($(this).attr("ows_PublishingContactEmail")) { // if page email is set    
                        e = $(this).attr("ows_PublishingContactEmail");    
                    } else if ($(this).attr("ows_PublishingContact")) { //otherwise use contact info    
                        var contact = $(this).attr("ows_PublishingContact").split(",#");    
                        for (var c = 0; c < contact.length; c++) {    
                            if (contact[c].indexOf("@") != -1) {    
                                e = contact[c];    
                            }    
                        }    
                    } else { //or nothing is set.    
                        e = false;    
                    }    
                }    
            });    
        }    
    });    
    return e;    
} 
```

# soap - SOAP/WSDL、AXIS2 和数字签名 SOAP 消息

> ID：13638573
> 
> 赞同：1
> 
> 时间：2012-11-30T03:29:11.670
> 
> 标签：soap, wsdl, certificate, axis2, soapheader

我们需要将 SOAP 消息发送到 Web 服务。这是一个新的领域，所以我们有点困惑......即使在搜索和阅读该主题时也是如此。以下是我们所知道/所做的：

1)**我们必须通过使用 Base64 中的数字证书**进行身份验证（获得颁发 CSR - 证书签名请求）。

2) **SOAP 消息必须包含一个 Security Header** (wss:Security xmlns:wss="http://schemas.xmlsoap.org/ws/2002/12/secext") 和一个 Body。

3) **WSDL 文件不包含 HEADER 部分**，但我们有标题“字段结构”

4)**我们决定使用 Axis2/xmlbeans ，并使用**[https://axis.apache.org/axis2/java/core/tools/eclipse/wsdl2java-plugin.html](https://axis.apache.org/axis2/java/core/tools/eclipse/wsdl2java-plugin.html)创建 JAVA 类

5）我们可以使用提供的同步/异步寄存器存根方法**轻松创建存根并发送 WSDL 主体元素（我假设 Axis2 将生成正确的 SOAP 消息）**

## 问题

1)**我们如何将 WS-Security(?) HEADER 添加到 SOAP 消息**中。我们是否必须操作 AXIS2 生成的代码？

2)**我们如何使用数字证书进行身份验证**？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T20:02:44.977

1) 我们如何将 WS-Security(?) HEADER 添加到 SOAP 消息中。我们是否必须操作 AXIS2 生成的代码？

```
ServiceClient client = stub._getServiceClient();
SOAP11Factory factory = new SOAP11Factory();
OMNamespace SecurityElementNamespace = factory.createOMNamespace("http://schemas.xmlsoap.org/ws/2002/12/secext", "wss");

OMElement usernameTokenEl = factory.createOMElement("UsernameToken", SecurityElementNamespace);
OMElement usernameEl = factory.createOMElement("Username", SecurityElementNamespace);
OMElement passwordEl = factory.createOMElement("Password", SecurityElementNamespace);
usernameEl.setText(username);
passwordEl.setText(password);
usernameTokenEl.addChild(usernameEl);
usernameTokenEl.addChild(passwordEl);

SOAPHeaderBlockImpl block = new SOAP11HeaderBlockImpl("Security", SecurityElementNamespace, factory);
block.addChild(usernameTokenEl);

client.addHeader(block); 
```

# php - 如何将数据添加到文本输入中并在下拉菜单中选择数据？

> ID：13638578
> 
> 赞同：0
> 
> 时间：2012-11-30T03:29:49.407
> 
> 标签：php, javascript, html

我有一个简单的应用程序，你可以在这里看到：[应用程序](http://helios.hud.ac.uk/u0867587/Mobile_app/editcourse.php)

在应用程序中，您将看到一个下拉菜单，只需从下拉菜单中选择一门课程，您将看到以下文本输入中显示的详细信息：

下面是应用程序的代码：

**Javascript：**

```
<script type="text/javascript">

$(document).ready( function(){
$('#coursesDrop').change( function(){
if( $(this).val() !== '' ){
var text = $(this).find('option:selected').text();
var split = text.split(' - ');
$('#currentCourseNo').val( split[0] );     
$('#currentCourseName').val( split[1] );       
$('#newCourseNo').val( split[0] );  
$('#newCourseName').val( split[1] ); 
}
else{
$('#currentCourseNo,#currentCourseName,#currentDuration').val('');   
$('#newCourseNo,#newCourseName,#newDuration').val('');                 
}
});
});

</script> 
```

**PHP/HTML：**

```
<?php

// connect to the database
include('connect.php');

/* check connection */
if (mysqli_connect_errno()) {
printf("Connect failed: %s\n", mysqli_connect_error());
die();
}

?>

<h1>EDIT COURSE</h1>

<?php

$min_year = 1;
$max_year = 10;
$years = range($min_year, $max_year); // returns array with numeric values of 1900 - 2012
$durationHTML = '';
$durationHTML .= '<select name="duration" id="newDuration">'.PHP_EOL; 
$durationHTML .= '<option value="">Please Select</option>'.PHP_EOL;  

foreach ($years as $year) {
$durationHTML .= "<option>$year</option>".PHP_EOL;  
if ($year != $max_year) {
$nextYear = $year + 1;
$durationHTML .= "<option>$year/$nextYear</option>".PHP_EOL;              
}
}
$durationHTML .= '</select>'; 

$newCourseNo = (isset($_POST['CourseNoNew'])) ? $_POST['CourseNoNew'] : '';

$coursequery = "
SELECT CourseId, CourseNo, CourseName, Duration
FROM Course
ORDER BY CourseNo
";

$courseqrystmt=$mysqli->prepare($coursequery);
// You only need to call bind_param once

$courseqrystmt->execute(); 

$courseqrystmt->bind_result($dbCourseId,$dbCourseNo,$dbCourseName,$dbDuration);

$courseqrystmt->store_result();

$coursenum = $courseqrystmt->num_rows();     

$courseHTML = '';

$courseHTML = '<select name="courses" id="coursesDrop">'.PHP_EOL;
$courseHTML .= '<option value="">Please Select</option>'.PHP_EOL;           

while ( $courseqrystmt->fetch() ) {

$courseHTML .= sprintf("<option value='%s'>%s - %s</option>", $dbCourseId,$dbCourseNo,$dbCourseName) . PHP_EOL; 
}

$courseHTML .= '</select>';

$courseform = "
<form action='".htmlentities($_SERVER['PHP_SELF'])."' method='post' id='courseForm'>
<p><strong>Course:</strong> {$courseHTML} </p>   
</form>";

echo $courseform;

$editsession = "
<form id='updateCourseForm'>

<p><strong>Current Course Details:</strong></p>
<table>
<tr>
<th>Course ID:</th>
<td><input type='text' id='currentCourseNo' name='CourseNocurrent' readonly='readonly' value='' /> </td>
</tr>
<tr>
<th>Course Name:</th>
<td><input type='text' id='currentCourseName' name='CourseNamecurrent' readonly='readonly' value='' /> </td>
</tr>
<tr>
<th>Duration (Years):</th>
<td><input type='text' id='currentDuration' name='Durationcurrent' readonly='readonly' value=''/> </td>
</tr>
</table>
<div id='currentAlert'></div>

<p><strong>New Course Details:</strong></p>
<table>
<tr>
<th>Course ID:</th>
<td><input type='text' id='newCourseNo' name='CourseNoNew' value='' /> </td>
</tr>
<tr>
<th>Course Name:</th> 
<td><input type='text' id='newCourseName' name='CourseNamenew' value='' /> </td>
</tr>
<tr>
<th>Duration (Years):</th> 
<td>{$durationHTML}</td>
</tr>
</table>
<div id='newAlert'></div>

</form>

";

echo $editsession;

?>

</body>
</html> 
```

现在我有两个小问题都涉及课程的持续时间：

**问题1：**

在您选择课程后的应用程序中，您可以在“当前课程详细信息”部分下看到课程 ID 和课程名称文本输入已填写，但持续时间文本输入尚未填写。现在我可以' t 填写持续时间文本输入的方式与我为填写其他两个文本输入的编码方式相同，因为我没有也不想在下拉菜单中包含每门课程的持续时间。所以我的问题是，当从下拉菜单中选择课程时，为了能够填写所选课程的持续时间文本输入，正确和最佳的方法是什么？

**问题2：**

这类似于问题 1，但它处理“更新课程详细信息”部分中的持续时间的下拉菜单。我想要的是，当用户选择一门课程时，应在 Duration 下拉菜单中选择所选课程的持续时间。目前，在用户选择课程后，持续时间下拉菜单中仍然显示“请选择”

**更新：**

我已将 id='data' 添加到`<td>{$durationHTML}</td>`.

下面是javascript：

```
var data = document.getElementById('newDuration').value;

$('#coursesDrop').change(function()
{
  var index = this.selectedIndex;

  /* part 1 */
  var data_to_display = data[index];
  $('#data').text(data_to_display);

  /* part 2 */    
  $('#durationDrop')[0].selectedIndex = index;    

}).trigger('change'); 
```

上面的代码不起作用，因为它没有从所选课程的持续时间下拉菜单中选择持续时间。我做错了什么？

课程详情来自以下数据库：

课程表：

```
CourseId CourseNo CourseName                             Duration
1        INFO101  Information Communication Technology   3/4
2        INFO102  Computing                              2 
```

现在我的课程下拉菜单显示数据库中的课程信息，如下所示：

```
Please Select
INFO101 - Information Communication Technology
INFO102 - Computing 
```

现在下面是持续时间下拉菜单的样子：

```
Please Select
1
1/2
2
2/3
3
3/4
4
4/5
5
5/6
6
6/7
7
7/8
8
8/9
9
9/10
10 
```

现在，如果我在课程下拉菜单中选择以下课程：

```
INFO101 - Information Communication Technology 
```

然后正如您在数据库中看到的，该课程的持续时间为，一旦用户在课程下拉菜单中选择了课程`3/4`，则持续时间下拉菜单应选择该选项。`3/4``INFO101 - ....`

现在，如果我在课程下拉菜单中选择以下课程：

```
INFO102 - Computing 
```

然后正如您在数据库中看到的，该课程的持续时间为，一旦用户在课程下拉菜单中选择了课程`2`，则持续时间下拉菜单应选择该选项。`2``INFO102 - ....`

不明白的请给我评论：）

**更新 2：**

```
<?php

// connect to the database
include('connect.php');

/* check connection */
if (mysqli_connect_errno()) {
    printf("Connect failed: %s\n", mysqli_connect_error());
    die();
}

?>

<h1>EDIT COURSE</h1>

<?php

$min_year     = 1;
$max_year     = 10;
$years        = range($min_year, $max_year); // returns array with numeric values of 1900 - 2012
$durationHTML = '';
$durationHTML .= '<select name="duration" id="newDuration">' . PHP_EOL;
$durationHTML .= '<option value="">Please Select</option>' . PHP_EOL;

foreach ($years as $year) {
    $durationHTML .= "<option>$year</option>" . PHP_EOL;
    if ($year != $max_year) {
        $nextYear = $year + 1;
        $durationHTML .= "<option>$year/$nextYear</option>" . PHP_EOL;
    }
}
$durationHTML .= '</select>';

$newCourseNo = (isset($_POST['CourseNoNew'])) ? $_POST['CourseNoNew'] : '';

$coursequery = "
SELECT CourseId, CourseNo, CourseName, Duration
FROM Course
ORDER BY CourseNo
";

$courseqrystmt = $mysqli->prepare($coursequery);
// You only need to call bind_param once

$courseqrystmt->execute();

$courseqrystmt->bind_result($dbCourseId, $dbCourseNo, $dbCourseName, $dbDuration);

$courseqrystmt->store_result();

$coursenum = $courseqrystmt->num_rows();

$courseHTML = '';

$courseHTML = '<select name="courses" id="coursesDrop">' . PHP_EOL;
$courseHTML .= '<option value="">Please Select</option>' . PHP_EOL;

$courseInfo = array();

while ($courseqrystmt->fetch()) {
    $courseHTML .= sprintf("<option value='%s'>%s - %s</option>", $dbCourseId, $dbCourseNo, $dbCourseName) . PHP_EOL;

    $courseData               = array();
    $courseData["CourseId"]   = $dbCourseId;
    $courseData["CourseNo"]   = $dbCourseNo;
    $courseData["CourseName"] = $dbCourseName;
    $courseData["Duration"]   = $dbDuration;

    array_push($courseInfo, $courseData);
}

$courseHTML .= '</select>';

$courseform = "
<form action='" . htmlentities($_SERVER['PHP_SELF']) . "' method='post' id='courseForm'>
<p><strong>Course:</strong> {$courseHTML} </p>   
</form>";

echo $courseform;

$editcourse = "
<form id='updateCourseForm'>

<p><strong>New Course Details:</strong></p>
<table>
<tr>
<th>Duration (Years):</th> 
<td id='data'>{$durationHTML}</td>
</tr>
</table>

</form>
";

echo $editcourse;

?>

< script type = "text/javascript" > 
$(document).ready(function() {

    var courseinfo = '<?php=json_encode($courseInfo);?>';

    $('#coursesDrop').change(function() {

        var courseId = $(this).val(),
        coursedata;

        for (var i = 0, l = courseinfo.length; i < l; i++) {
            if (courseinfo[i].courseId = courseId) {
                coursedata = courseinfo[i];
            }
        }

        var index = $('#newDuration option[value="' + courseData.Duration + '"]').index('#newDuration option');

        $('#newDuration')[0].selectedIndex = index;

    });
});
 < /script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T04:05:09.413

问题1：

您应该找到一种方法将持续时间“链接”到下拉列表中的项目，所以......您不想做的事情（将所有内容放在选项标签中）看起来是最好的答案。无论如何，您可以编写一个 javascript 数组并使用 selectedIndex 值指向好的数据，如下所示：

```
$('select').change(function()
{
   var index = this.selectedIndex;
   $('input').val(duration_data[index]);
} 
```

问题2：

正如你所说，和第一个一样。使用 selectIndex 属性通过代码设置默认值。

```
$('select')[0].selectedIndex = n 
```

# wikipedia - 如何从 Wikimedia 标记中的 Wikipedia [[File:...]] 标签构造完整 URL？

> ID：13638579
> 
> 赞同：1
> 
> 时间：2012-11-30T03:29:54.447
> 
> 标签：wikipedia, wikimedia

`[[File:...]]`给定维基媒体标记或信息框行中的标签，维基百科使用什么逻辑来生成文章中图像的完整 URL `|image=...`？

url 似乎总是以 开头`http://upload.wikimedia.org/wikipedia/commons/`，后跟两个似乎不可预测的 url 段，再加上可以从标签中预测的图像名称。

例如，

```
[[File:Michael Jordan UNC Jersey cropped.jpg|thumb|left|Michael Jordan's jersey in the rafters of The [[Dean Smith Center]]]] 
```

产量：

```
http://upload.wikimedia.org/wikipedia/commons/thumb/6/6a/Michael_Jordan_UNC_Jersey_cropped.jpg/220px-Michael_Jordan_UNC_Jersey_cropped.jpg 
```

有没有办法以编程方式确定`/6/6a`url 的一部分，或者这是在维基百科服务器上的查找？

另一个例子，在信息框中：

```
|image = Jordan Lipofsky.jpg 
```

产量：

```
http://upload.wikimedia.org/wikipedia/commons/b/b3/Jordan_Lipofsky.jpg 
```

可以`/b/b3`预测 URL 的部分吗？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T22:26:46.120

原来它是从 MD5 哈希生成的。Scala 中类似下面的东西会起作用——尽管我不确定如何预测它是在 /commons 中还是在 /en 中。

```
import org.apache.commons.codec.digest.DigestUtils
def getImageUrl(fileName: String, rootUrl: String): String = {

    val messageDigest = DigestUtils.md5Hex(fileName.replace(" ", "_"))
    val md5 = messageDigest

    val hash1 = md5.substring(0, 1)
    val hash2 = md5.substring(0, 2)

    rootUrl + hash1 + "/" + hash2 + "/" + fileName

} 
```

小心前导零，如此处所述：

[维基百科是否使用不同的方法来计算图像路径的哈希部分？](https://stackoverflow.com/questions/8389616/does-wikipedia-use-different-methods-to-compute-the-hash-part-of-an-image-path)

[http://lists.wikimedia.org/pipermail/mediawiki-api/2011-December/thread.html#2446](http://lists.wikimedia.org/pipermail/mediawiki-api/2011-December/thread.html#2446)

# vb.net - 动态按钮上的 AddHandler 事件，VB.NET 中不正确的实例属性

> ID：13638582
> 
> 赞同：0
> 
> 时间：2012-11-30T03:30:09.367
> 
> 标签：vb.net, class, methods, event-handling

我是自定义类的新手。我有一门叫做“游戏”的课。在课堂上，我有一个名为“addGame()”的方法，它创建了一个名为“pBox”的动态图片框。创建控件后，我正在执行以下操作来注册单击事件：

```
AddHandler pBox.Click, AddressOf Me.launchGame 
```

这是launchGame：

```
Public Sub launchGame()
    MsgBox(Me.name)
End Sub 
```

问题是，“Me.name”始终是最近添加的实例名称，而不是我点击的那个。

* * *

根据一个建议，我也试过这个：

```
Public Sub launchGame(ByVal sender As Object)
    MsgBox(sender.name)
End Sub 
```

但是现在“ **AddHandler pBox.Click, AddressOf Me.launchGame** ”说

> 方法“Public Sub launchGame(sender As Object)”没有与委托“Delegate Sub EventHandler(sender As Object, e As System.EventArgs)”兼容的签名

并且“ **AddHandler pBox.Click, AddressOf Me.launchGame(Me)** ”说

> AddressOf 操作数必须是不带括号的方法的名称

* * *

```
Public Sub launchGame(ByVal sender As Object, ByVal sender as EventArgs)
    MsgBox(sender.name)
End Sub 
```

现在没有错误，但 msgBox 是空白的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T16:08:53.577

我认为问题在于 pBox 始终是最新的图片框控件。我基于*[在 Visual Basic .NET 和 Visual C# .NET](http://msdn.microsoft.com/en-us/library/aa289500%28v=vs.71%29.aspx)* (MSDN) 中创建控件数组创建了一个控件数组。

现在我在我的 pBoxArray 类的 AddNewpBox() 方法中执行 AddHandler。正如 David Brunow 所建议的，我还创建了一个列表来处理“游戏”类。然后我将pictureBox“Tag”属性设置为“games”数组中游戏的索引。

所以现在我的点击处理程序如下所示，它似乎工作得很好。

```
Public Sub pBoxClick(ByVal sender As Object, e As EventArgs)
    MsgBox(games(sender.tag).name)
End Sub 
```

# c++ - 我可以在任何平台上运行 C 和 C++ 吗？

> ID：13638590
> 
> 赞同：5
> 
> 时间：2012-11-30T03:31:52.093
> 
> 标签：c++, c, operating-system

例如，如果我用 C 或 C++ 编写：Windows。是否保证我可以在任何其他操作系统（如 Mac OS、Linux、类 Unix 系统）上编译和运行它？那么，这是否意味着 C 或 C++ 是跨平台语言？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-11-30T03:33:13.020

如果您编写的 C 或 C++ 程序严格遵守某些标准，那么该程序应该可以在任何提供符合该标准的工具链的平台上运行。从这个意义上说，C 和 C++ 是跨平台语言。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-30T03:33:23.223

不......有许多许多平台的 C 和 C++ 编译器，但不同的编译器有自己的怪癖，并且它们链接到的库在不同的平台上完全不同。Mozilla 制定了使用哪些功能以及避免哪些功能以使您的软件跨平台的指南。

像 cygwin 这样的环境有助于在 windows *nix 中实现跨平台兼容性。

您可以编写标准 C 的库，这些库不依赖于非常可移植的平台库

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-30T03:44:52.113

如果您**直接**访问任何 Windows API，它将**无法在其他平台上运行（甚至编译）**。如果您使用间接访问正确 API 的**标准**函数，或者如果您添加**#ifdef 保护**并访问正确的平台 API，那么答案会**更好**。前者*应该*是跨平台的。后者将在您的代码迎合的平台上工作。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-11-30T03:47:45.387

对于 Mac OSX、Linux，当然还有 Windows，您可以编写和编译 C++。根据个人经验，我一直认为 Windows 最适合 C++ 的使用，紧随其后的是 Linux，Max OSX 远远落后。根据我的经验，编译器往往是喜怒无常的，或者是因为支持社区更适合 Windows 上的 C++，或者因为它自然更适合编程，所以我在使用 Windows 时遇到的问题总是较少。尽管我将它标记为第二名，但我在 Linux 方面没有太多经验。

编辑：你说“保证”运行和编译。对于基本的 C++ 来说，情况确实如此，但一些更高级的功能可能会在不同平台上提供不同的支持。

# objective-c - 如何从一个模态视图控制器添加新的表格单元格数据？

> ID：13638591
> 
> 赞同：0
> 
> 时间：2012-11-30T03:31:53.247
> 
> 标签：objective-c, uitableview, modalviewcontroller, reloaddata

这是我目前的流程：

1) 点击添加按钮 2) 在我的模态视图控制器中填写 UITextFields 3) 点击保存按钮 4) 将数据添加到 UITableViewCell 5) 重复步骤 1 - 3 6) 将新数据添加到第二个单元格，但两者中的数据单元格来自新输入

如何使用相同的模态视图控制器添加新数据并将其保留在我以前的单元格中，甚至在我点击这些单元格时查看数据？

这是我进入模态视图控制器并向其添加数据的过程：

```
 -(IBAction)goToModalView:(id)sender
 {
    if (self.educationViewController == nil)
    {
        EducationViewController * temp = [[EducationViewController alloc] initWithNibName:@"EducationViewController" bundle:[NSBundle mainBundle]];
        self.educationViewController = temp;

        _dataArray = [[NSMutableArray alloc] init];
        [_dataArray addObject:temp];
    }
    else
    {
        [self addEducation:sender];
    } 

    [self presentViewController:self.educationViewController animated:YES completion:nil];
}

-(IBAction)addEducation:(id)sender
{
    [_myTableView beginUpdates];
    [_dataArray addObject:self.educationViewController.majorString];
    NSArray * paths = [NSArray arrayWithObject:[NSIndexPath indexPathForRow:[_dataArray count]-1 inSection:0]];
    [_myTableView insertRowsAtIndexPaths:paths withRowAnimation:UITableViewRowAnimationTop];
    [_myTableView endUpdates];
} 
```

这是我在模态视图控制器中保存文本的位置：

```
 -(IBAction)saveData
 {
     if (_majorTextField.text == nil)
     {
        _majorString = @"";
     }
     else
     {
        _majorString = [[NSString alloc] initWithFormat:@"%@", _majorTextField.text];
        [_majorTextField setText:_majorString];
        NSUserDefaults * majorDefault = [NSUserDefaults standardUserDefaults];
        [majorDefault setObject:_majorString forKey:@"major"];
     }
     // Other text field code here

     [self dismissViewControllerAnimated:YES completion:nil];
 } 
```

任何建议表示赞赏！非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T03:45:01.730

我不明白 goToModalView() 为什么你做“[_dataArray addObject:temp];”。但是请保留它，在 addEducation() 中，您可以使用

```
[_myTableView reloadData]; 
```

阅读整个表格。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T03:38:26.670

Instead of adding the data directly to the UITableView, I would add it to an NSMutableArray. I would then use that array as the datasource for the table, and after the save button is pressed, I would call

```
[_myTableView reloadData]; 
```

# iphone - iOS：Sqlite 的单元测试

> ID：13638593
> 
> 赞同：3
> 
> 时间：2012-11-30T03:32:02.113
> 
> 标签：iphone, ios, unit-testing

请帮我回答这个问题：我应该为与 iOS 应用程序的本地数据库交互的数据访问编写单元测试，在这种情况下是 SQLite 数据库。如果应该，我该怎么写？使用模拟或使用 db 文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-10T23:12:45.297

过去，我通过为每个测试用例创建一个新的 SQLite DB 文件来做到这一点。在测试用例中，我将测试我的代码写入数据库并读取与写入数据库完全相同的内容。这样所有的测试数据都在代码中，所以测试用例更清晰。

这种方法牺牲了速度，但我的单元测试仍然运行得很快。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T16:37:38.760

假设您要测试程序的逻辑而不仅仅是访问 SQLite 的能力，那么测试替身（模拟对象或虚拟对象）将为您提供比单独的 db 文件更容易维护的测试。一个单独的 db 文件必须在正确的行中有正确的数据，如果您在一个测试中修改它，您必须在下一个测试之前重置它。如果您的测试数据不同步，您的测试将开始失败。具有文字测试值的模拟对象永远不会不同步。

使用模拟几乎会迫使您使用依赖注入，因此您可以将其替换为真实的数据对象。使用 db 文件不会强制您使用依赖注入。因此，如果您正在使用大量不遵循 DI 模式的现有代码，则 db 文件将是“简单”的选择，尽管从面向对象的角度来看不是最佳选择。

# c# - 基于服务的数据库文件区别

> ID：13638595
> 
> 赞同：0
> 
> 时间：2012-11-30T03:32:27.810
> 
> 标签：c#, database, winforms

我正在创建一个使用 .mdf 数据库的 C# winform 应用程序，我正在通过 Add New -> Service Based Database 创建并附加到项目中。我可以通过 Visual Studio 以编程方式添加数据库和添加表。但是当我在 Visual Studio 中查看数据时，我插入的数据不存在。我相信这是因为 Visual Studio 看到和读取的 .mdf 文件位于项目文件夹中，而代码修改的 .mdf 文件位于 bin 文件夹中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T04:00:34.663

请参考 MSDN 链接：[How to: Manage Local Data Files in Your Project](http://msdn.microsoft.com/en-us/library/ms246989.aspx)

# exception - Drupal 7 Solr 索引错误，显示“EntityMalformedException：taxonomy_term 类型的实体上缺少捆绑属性”

> ID：13638596
> 
> 赞同：0
> 
> 时间：2012-11-30T03:32:35.120
> 
> 标签：exception, drupal, solr, indexing

在 Drupal 7.14 中，当我索引我的整个站点时，Solr 显示以下错误：

```
AJAX HTTP error occurred. HTTP Result Code: 500 Debugging information follows. 
Path: /batch?id=1938&op=do StatusText: Service unavailable (with message)
ResponseText: EntityMalformedException: Missing bundle property on entity of type taxonomy_term. in entity_extract_ids() (line 7539 of /project/path/includes/common.inc). 
```

因此，当我查看`/includes/common.inc`（围绕行：7537）中的行时：

```
// Explicitly fail for malformed entities missing the bundle property.
if (!isset($entity->{$info['entity keys']['bundle']}) || $entity->{$info['entity keys']['bundle']} === '') {
  throw new EntityMalformedException(t('Missing bundle property on entity of type @entity_type.', array('@entity_type' => $entity_type)));
} 
```

*   请问那段代码（in `common.inc`）实际上在做什么？
*   我怎样才能克服这个错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-06T14:18:53.780

请尝试这个模块[https://drupal.org/project/taxonomy_orphanage](https://drupal.org/project/taxonomy_orphanage)它将删除所有空包。

# c# - 添加很长的代码行时崩溃

> ID：13638602
> 
> 赞同：0
> 
> 时间：2012-11-30T03:33:03.057
> 
> 标签：c#, visual-studio-2010

我正在为 C# 使用 VS 2010 express。

我正在制作一个随机的中文名称生成器。

我有近 20 万个名字要抽。

当我添加一个非常长的代码时，这些名字就像

```
string[] firstname = new string[] {"A","B",...} 
```

当我打开项目或尝试单击该行时，VS 负载很重。实际上，添加该行后，我什至无法打开该项目。

我猜这是由于自动调试功能，因为当我尝试在记事本++中编辑时它并没有那么滞后。

关于处理绘制大量元素的问题有什么建议吗？或者如何停止自动调试功能？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T03:37:49.530

```
string[] firstname = 
    System.IO.File.ReadAllLines("list-of-names-one-per-line.txt"); 
```

你真的应该考虑从某种存储中读取。这也将允许您在不重新编译程序的情况下更改单词列表。

如果必须，工具->选项->文本编辑器->C#->高级取消选中显示实时语义错误 ![屏幕截图](../Images/7a665e2e26329a62723345bdcb4cca1f.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-30T03:38:32.193

从文件中读取值。如果要确保内容包含在可执行文件中，请将文件作为资源嵌入到项目中并从那里读取内容。

# django - 使用简单缩略图为 Tastypie API 生成缩略图

> ID：13638603
> 
> 赞同：3
> 
> 时间：2012-11-30T03:33:09.370
> 
> 标签：django, api, thumbnails, tastypie, easy-thumbnails

我正在尝试使用脱水方法来生成我的缩略图，如下所示：

```
class PostResource(ModelResource):
    user = fields.ForeignKey(UserResource, 'user')

    class Meta:
        queryset = Post.objects.all()
        resource_name = 'post'
        authentication = Authentication()
        authorization = DjangoAuthorization()
        filtering = {
            'published': ALL,
            'type': ALL,
        }
        ordering = [
            'hot_score',
            'likes',
            'date_created',
        ]

    def dehydrate(self, bundle):
        bundle.data['thumb'] = get_thumbnailer(self.image1, "image.jpg").get_thumbnail({'size': (95, 95),}).url
        return bundle 
```

我得到的是这个错误：“'FileField'对象没有属性'关闭'”

我得到这个是因为 self.image1 不是一个“真正的” FileField 对象（它是一个很好吃的.fields.FileField，它似乎不是基于 Django 的 FileField），所以它没有所有容易的常用方法 -缩略图需要？如果是这样，是否有解决方案？

如果解决方案是改用 sorl-thumbnail，我会理解 :) 感谢您提供的任何帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T03:55:34.507

转换评论：

从 Django 模型而不是从资源中获取图像：

```
get_thumbnailer(bundle.obj.image1, "image.jpg").get_thumbnail({'size': (95, 95),}).url 
```

# javascript - jQuery选择列表问题

> ID：13638609
> 
> 赞同：0
> 
> 时间：2012-11-30T03:33:25.553
> 
> 标签：javascript, jquery

我有一个类似的代码

```
 if($('#nodeNo').val() == null){
              cityChange(1);                      
              $('#nodeNo option[value=<%=request.getAttribute("nodeval")%>]').attr('selected','selected');
    } 
```

cityChange(1) 中有一个 Ajax 调用来填充 nodeNo 选择列表，然后下一条语句设置选择的值。但是由于并行执行，上面的代码不起作用。ajax 调用和设置值一起执行。另一个 Ajax 调用需要一些时间，到那时下一条语句完成执行。因此列表已正确填充，但无法设置所选值。

请帮忙！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T03:41:21.350

您正在进行 ajax 调用，并在 ajax 调用成功或完成时为该选择元素设置数据源，我建议您在 cityChange(1) 的 ajax 完成中设置所选值；方法。

问候，

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T03:36:16.143

你必须转移

```
$('#nodeNo option[value=<%=request.getAttribute("nodeval")%>]').attr('selected','selected'); 
```

进入`cityChange`方法内部的ajax成功回调。

# c# - 为什么将初始化代码放在 OnActionExecuted 中而不是 Controler 的构造函数中？

> ID：13638610
> 
> 赞同：1
> 
> 时间：2012-11-30T03:33:35.320
> 
> 标签：c#, asp.net-mvc-3, controller

在我的 MVC3 C# 项目中，我一直在寻找在控制器代码中构建导航菜单并将其传递给母版页的方法。（我想在控制器中初始化菜单，以便我可以进行一些授权和角色检查等......）

到目前为止，我在这里找到了几个答案，似乎都需要覆盖 BaseController 的 OnActionExecuted 方法（所有其他控制器都从该方法扩展）

示例 1（参见接受的答案）：[如何使用 ASP.NET MVC 中的基本控制器创建强类型母版页](https://stackoverflow.com/questions/768236/how-to-create-a-strongly-typed-master-page-using-a-base-controller-in-asp-net-mv)

示例 2：[“安全意识”操作链接？](https://stackoverflow.com/questions/2721869/security-aware-action-link/2722026#2722026)

但是为什么不把相同的代码放在基本控制器的构造函数中呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T03:36:52.070

If all your controllers inherit from the same base controller, there is no reason why you could not do it this way.

The advantage of an `ActionFilterAttribute` is that it allows you to insert your logic on any controller by simply decorating it with the attribute, allowing you the freedom of inheriting from any base class you choose.

# c++ - 默认与推导模板参数？

> ID：13638623
> 
> 赞同：2
> 
> 时间：2012-11-30T03:34:51.573
> 
> 标签：c++, c++11, templates, standards-compliance, template-argument-deduction

在下面的 ：

```
template<typename Type>
struct MyClass
{
    template<typename OtherType> MyClass(const MyClass<OtherType>& x);
    template<typename OtherType = Type> void test(const MyClass<OtherType>& x);
}; 
```

* * *

在函数`test`中做了什么：

**情况1：**默认参数为priority：`MyClass<Type>(const MyClass<OtherType>& x)`隐式调用转换构造函数并被`MyClass<Type>::test<Type>(const MyClass<Type>& x)`调用。

**情况2：**推导的参数是优先级：`MyClass<Type>::test<Type>(const MyClass<OtherType>& x)`被调用。

* * *

我认为好的答案是第二个，但我不确定。您能否向我确认（并且这种情况已被标准明确定义）？

* * *

编辑：测试功能由以下人员调用：

```
MyClass<double> d;
MyClass<unsigned int> ui;
d.test(ui); // <- So the question is : is ui implicitely 
            //    converted to MyClass<double> or not ? 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-30T03:50:14.170

`test`将被称为

```
MyClass<double>::test(const MyClass<unsigned int> &) 
```

即不会有`ui`from`MyClass<unsigned int>`到的转换`MyClass<double>`。

默认模板参数永远不会覆盖给定的参数。它仅在没有给出模板参数并且编译器无法从函数参数中推断出来时使用。

来自 C++11 标准：

> (§14.8.2/5) 得到的替换和调整的函数类型用作模板参数推导的函数模板的类型。如果没有推导出模板参数，则使用其默认模板参数（如果有）。[ 例子：
> 
> ```
> template <class T, class U = double>
> void f(T t = 0, U u = 0);
> void g() {
>   f(1, ’c’);      // f<int,char>(1,’c’)
>   f(1);           // f<int,double>(1,0)
>   f();            // error: T cannot be deduced
>   f<int>();       // f<int,double>(0,0)
>   f<int,char>();  // f<int,char>(0,0)
> } 
> ```
> 
> —结束示例]

# ios - 应用程序可以抑制 iOS 的多任务手势吗？

> ID：13638626
> 
> 赞同：3
> 
> 时间：2012-11-30T03:34:59.507
> 
> 标签：ios, multitasking-gestures

有没有办法抑制手势识别？启发我提出这个问题的原因是看着我蹒跚学步的孙女使用 iPad。很多时候，她会不小心调用一个手势识别器来切换应用程序。这方面的一个例子是四指手势，您可以在其中滑动应用程序。

对于“儿童证明”应用程序，是否可以抑制这些？如果做不到这一点，是否可以禁止切换到另一个应用程序？乍一看，这似乎超出了应用程序的范围，但也许有办法做到这一点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T03:41:44.830

我有同样的要求，但你不能覆盖手势识别。它优先于您的应用程序。实际上我想为我的宝宝做一个应用程序并且有同样的要求！但是你不能在非越狱设备上禁用手势识别;(

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-30T03:44:48.370

您不需要在您的应用程序中执行此操作，因为它是 iOS 6 的一项辅助功能。它被称为“引导式访问”，您可以在“学习”部分的“设置”->“常规”->“辅助功能”中启用它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-30T05:10:03.013

[不可以，但您可以在设置中手动](http://0.tqn.com/d/ipad/1/0/e/2/-/-/multitasking-gestures.PNG)将其关闭。转到设置>常规>多任务手势。我不认为我们可以通过对普通应用程序的编码来控制它，但您可以在使用应用程序之前通过警报通知用户在此处禁用它。这是目前最合适的方式。

# c# - 子 IIS 应用程序中的 RegisterClientScriptResource NullReferenceException

> ID：13638627
> 
> 赞同：2
> 
> 时间：2012-11-30T03:35:12.103
> 
> 标签：c#, orchardcms, asp.net-4.5

我从 .Net 4.5 Beta 升级到 RTM 版本，现在当我有一个标准的 WebForm 页面时，我有一个通用的 <asp:RequiredFieldValidator /> 标签，我得到一个如下所示的 NullReferenceException：

[NullReferenceException：对象引用未设置为对象的实例。] System.Web.UI.WebControls.ValidatorCompatibilityHelper.RegisterClientScriptResource(Control control, String resourceName) +180 System.Web.UI.WebControls.BaseValidator.OnPreRender(EventArgs e) +253 System.Web.UI.Control.PreRenderRecursiveInternal() +170 System.Web.UI.Control.PreRenderRecursiveInternal() +255 System.Web.UI.Control.PreRenderRecursiveInternal() +255 System.Web.UI.Control.PreRenderRecursiveInternal () +255 System.Web.UI.Control.PreRenderRecursiveInternal() +255 System.Web.UI.Page.ProcessRequestMain(布尔includeStagesBeforeAsyncPoint，布尔includeStagesAfterAsyncPoint) +4047

我什至创建了一个示例页面（没有母版页 - 只是下面的 HTML），一旦我添加了验证器，我就会得到上述错误。这是它的HTML：

```
<form runat="server">
     <asp:Textbox runat="server" ID="txTest" />
     <asp:RequiredFieldValidator runat="server" ControlToValidate="txTest" />
</form> 
```

此服务器上其他站点的其他页面工作正常，所以我怀疑这与它是 IIS 中的子应用程序有关，而父应用程序是 Orchard。关于我如何解决这个问题的任何建议？由于它只是一个标准标签，我什至不知道从哪里开始寻找。

**编辑**：我想出了导致它崩溃的原因，尽管我希望果园团队的某个人能够澄清为什么这样做。在默认配置中，有一个正在编译程序集的部分，其中有许多程序集被删除。我把整个列表拿出来，我的内页工作了，所以我开始一次添加它们，当我添加 System.Web.Extensions 的删除条目时它坏了。我可以轻松地将它添加到我的子应用程序中，但我很好奇为什么它会首先被删除。这是它通常的样子，我删除了 System.Web.Extensions 的条目以使我的子应用程序工作：

```
 <compilation debug="false" targetFramework="4.0" batch="true" numRecompilesBeforeAppRestart="250" optimizeCompilations="true">
  <buildProviders>
    <add extension=".csproj" type="Orchard.Environment.Extensions.Compilers.CSharpExtensionBuildProviderShim" />
  </buildProviders>
  <assemblies>
    <add assembly="System.Web.Mvc, Version=3.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35, processorArchitecture=MSIL" />
    <add assembly="System.Web.Abstractions, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35, processorArchitecture=MSIL" />
    <add assembly="System.Web.Routing, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35, processorArchitecture=MSIL" />
    <add assembly="System.Data.Linq, Version=4.0.0.0, Culture=neutral, PublicKeyToken=B77A5C561934E089" />
    <remove assembly="System.Configuration, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a" />
    <remove assembly="System.Web, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a" />
    <remove assembly="System.Data, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" />
    <remove assembly="System.Web.Services, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a" />
    <remove assembly="System.Xml, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" />
    <remove assembly="System.Drawing, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a" />
    <remove assembly="System.EnterpriseServices, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a" />
    <remove assembly="System.IdentityModel, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" />
    <remove assembly="System.Runtime.Serialization, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" />
    <remove assembly="System.ServiceModel, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" />
    <remove assembly="System.ServiceModel.Activation, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" />
    <remove assembly="System.ServiceModel.Web, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" />
    <remove assembly="System.Activities, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" />
    <remove assembly="System.ServiceModel.Activities, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" />
    <remove assembly="System.WorkflowServices, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" />
    <remove assembly="System.Web.Extensions, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" />
    <remove assembly="System.Data.DataSetExtensions, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" />
    <remove assembly="System.Web.ApplicationServices, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" />
  </assemblies>
</compilation> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T20:30:05.063

在 Orchard 的 web.config 中，一些程序集被显式删除，因为 Orchard 本身不使用它们。如果您需要它们，那么重新启用它们是安全的。

# php - 如何在 msql 中创建 timein 和 timeout 表

> ID：13638628
> 
> 赞同：1
> 
> 时间：2012-11-30T03:35:21.917
> 
> 标签：php, mysql, date, time

我是 mysql 和 php 的新手。我的问题是我想在`CREATE A TABLE FOR TIME-IN AND TIME-OUT` 其中记录学生的进出时间。

但是我有一个名为 的表`tblinfo`，`id as varchar`其中`name, course`的与表`id`中的 相同（如何创建这个？）。 `id``timeinout`

如何在这两个表之间建立关系？

在创建表时`timeinout`，我希望我的字段和数据类型是这样的：

```
id varchar  
timein time  
timeout time  
date date 
```

请帮我为此编写一些代码。
提前致谢 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T03:50:53.617

我对您正在寻找的答案的范围有点困惑

您可以按照您所说的方式创建表格

`mysql_query("CREATE TABLE tblinfo (id varchar, timein time, timeout time, date date)");`

尽管我建议将 id 作为 int 而不是 varchar。

至于如何获得超时/超时，例如，当学生登录或注销甚至进入页面然后离开它时，实际上取决于您要查找的内容。

前一种方法很简单，因为当学生登录时，您可以启动一个`$_SESSION`变量并使用`"INSERT INTO tblinfo VALUES(1, ".time().", 'NA', '".date("D M j G:i:s T Y")."')"`，并为他们注销做同样的事情。

让它知道学生何时离开页面有点复杂，但您可以使用一些技巧来记录超时。

也许您应该在编程方面详细说明您正在尝试做的事情。

# javascript - 带有参数的Javascript函数指针作为函数中的参数

> ID：13638635
> 
> 赞同：16
> 
> 时间：2012-11-30T03:36:57.467
> 
> 标签：javascript, function, parameter-passing, function-pointers

不确定标题的措辞是否正确，或者是否有更好的表达方式，但我认为还可以。

无论如何，到目前为止，我了解以下内容：

```
a.b("a", "b", "c", foo); 
```

其中“foo”是在别处定义的函数，不接受任何参数只会导致函数 ab() 运行，并带有上述参数。然后可以在函数 ab() 中简单地调用参数“foo”作为“foo()”。换句话说，我理解上述调用是使用函数指针作为函数 ab 中的参数作为参数。

好的，现在这就是我想要做的......

我希望能够做与上述类似的事情，除了这次我希望 foo 在该参数中传递一个参数，如下所示：

```
a.b("a", "b", "c", foo("bar")); 
```

现在问题来了。这将导致使用参数“a”、“b”、“c”和**foo(“bar”) 的结果**。我不想要这个。我希望 foo("bar") 按字面意思传入，以便在函数 ab 中看起来像这样（作为标题）：

```
a.b(first, second, third, fourth); 
```

可以引用并调用第四个参数：

```
fourth(); 
```

即使“第四”有一个论点。我似乎无法找到解决这个问题的方法，有什么建议吗？

谢谢！

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-11-30T03:38:09.560

使用匿名函数来包装您的`foo`通话。

```
a.b("a", "b", "c", function() {return foo("bar");}); 
```

* * *

如果您需要保留`this`将给出的值，您可以使用`.call`. 您还可以传递给定的任何参数。

```
a.b("a", "b", "c", function(arg1, arg2) {return foo.call(this, "bar", arg1, arg2);}); 
```

* * *

当然，函数不一定需要是匿名的。您也可以使用命名函数。

```
function bar(arg1, arg2) {
    return foo.call(this, "bar", arg1, arg2);
}
a.b("a", "b", "c", bar); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-30T04:18:20.353

使用函数 BIND 真的很容易

```
a.b("a", "b", "c", foo.bind(undefined, "bar")); 
```

因此，当您`foo()`在函数内部调用时，它已经具有第一个绑定参数。您可以根据需要使用`bind`.

请注意，`bind`始终将参数应用于函数并将它们放在首位。如果你想申请并使用这个：

```
 if (!Function.prototype.bindBack) {
    Function.prototype.bindBack = function (_super) {
        if (typeof this !== "function") 
            throw new TypeError("Function.prototype.bindBack - can not by prototyped");

    var additionalArgs = Array.prototype.slice.call(arguments, 1), 
        _this_super = this, 
        _notPrototyped = function () {},
        _ref = function () {
            return _this_super.apply((this instanceof _notPrototyped && _super) ? this : _super, (Array.prototype.slice.call(arguments)).concat(additionalArgs));
        };

    _notPrototyped.prototype = this.prototype;
    _ref.prototype = new _notPrototyped();

    return _ref;
  }
}

function tracer(param1, param2, param3) {
console.log(arguments)
}

function starter(callback) {
callback('starter 01', 'starter 02')
}
// See here!!!
// function starter call 'calback' with just 2 params, to add 3+ params use function.bindBack(undefined, param, param, ...)                
    starter(tracer.bindBack(undefined, 'init value')); 
```

参见示例[http://jsfiddle.net/zafod/YxBf9/2/](http://jsfiddle.net/zafod/YxBf9/2/)

# android - Android：带有进度条的自定义列表适配器

> ID：13638637
> 
> 赞同：1
> 
> 时间：2012-11-30T03:37:26.173
> 
> 标签：android, listadapter

我有一个自定义列表适配器，我正在尝试使用其中带有进度条的布局。

我的问题是，当视图第一次膨胀时，我将进度条可见性设置为 false。单击该项目时，我将进度条可见性设置为 true。但是，如果你向下滚动列表，随机项目的进度条就会变得可见（由于视图的回收？）。

有什么简单的方法可以解决这个问题吗？

```
public View getView(int position, View convertView, ViewGroup parent) {

    ViewHolder holder = null;

    if (convertView == null) {
        convertView = inflater.inflate(R.layout.imagegriditem, null);

        holder = new ViewHolder();
        holder.heroName = (TextView) convertView.findViewById(R.id.heroName);
        holder.heroImage = (ImageView)convertView.findViewById(R.id.heroImage);
        holder.progressBar = (ProgressBar) convertView.findViewById(R.id.progressBar);
        holder.progressBar.setIndeterminate(false);
        holder.progressBar.setVisibility(View.INVISIBLE);
        holder.progressBar.setIndeterminate(false);
        holder.progressVisible = View.INVISIBLE;
        convertView.setTag(holder);
    }
    else{
        holder = (ViewHolder) convertView.getTag();
    }

    if(holder != null){
        holder.heroName.setText(heroes[position]);
        holder.heroImage.setImageResource(android.R.drawable.ic_dialog_email);
        holder.progressBar.setProgress(10);
    }

    final int pos = position;

    final ViewHolder hold = holder;

    convertView.setOnClickListener(new View.OnClickListener() {
        @Override
        public void onClick(View view) {
            hold.progressBar.setProgress(hold.progressBar.getProgress() + 10);
            hold.progressVisible = View.VISIBLE;
            hold.progressBar.setVisibility(View.VISIBLE);
        }
    });

    return convertView;
} 
```

这基本上是概念验证代码..所以它不是很漂亮。但是，只是想把这个想法记下来，这样我才能正确使用它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T07:05:35.313

你是对的。由于视图可以回收并用作另一个位置的项目，因此您应该始终根据 getView 中的位置设置进度条的可见性。使用 AdapterView.OnItemClickListener 而不是 View.OnClickListener。使用数组跟踪进度条的可见性。

```
 public class AdapterItem
    {
        public Boolean IsInProgress;
    }

...    
    Public class CustomAdapter extends BaseAdapter
    {

        ArrayList<AdapterItem> _list = new ArrayList<AdapterItem>()
        ...

        public View getView(int position, View convertView, ViewGroup parent)
        {
           ...

           if (holder != null && _list.size() > position)
           {
                AdapterItem item = _list.get(position);

            holder.progressVisible = Item.IsInProgress ? View. VISIBLE : View.INVISIBLE
           }
        }

        public void onItemClick(int position)
        {
            AdapterItem item = _list.get(position);
            item.IsInProgress = !item.IsInProgress;
        }
    }

    ...

    listView.setOnItemClickListener(new OnItemClickListener() 
    {
        @Override
        public void onItemClick(AdapterView<?> parent, View view,
                        int position, long id) {

            CustomAdapter adpt = (CustomAdapter)parent.getAdapter();
            adpt.onItemClick(position);
        }
    } 
```

# javascript - How to enable pinch to zoom in jquery mobile?

> ID：13638640
> 
> 赞同：1
> 
> 时间：2012-11-30T03:37:39.030
> 
> 标签：javascript, android, cordova, jquery-mobile, pinchzoom

How to enable pinch to zoom in jquery mobile? I am trying to enable pinch zoom on my mobile website. I'm using the iscroll 4 i tried the hammer js but also didn't work

```
<!DOCTYPE HTML>
<html>
  <head>
<link rel="stylesheet" href="http://code.jquery.com/mobile/1.0a3/jquery.mobile-1.0a3.min.css" />
<script src="http://code.jquery.com/jquery-1.5.min.js"></script>
<script src="http://code.jquery.com/mobile/1.0a3/jquery.mobile-1.0a3.min.js"></script>

<script type="application/javascript" src="iscroll.js"></script>
<script type="text/javascript">

var myScroll;
function loaded() {
myScroll = new iScroll('gallerycontent', { zoom:true });
} 
```

`$(function(){`

```
function gonext() {
    var current = $('a.selectedimg');
    if (current.hasClass('last')) {
        var next = $('a.first')
    } else {
        var next = current.next();
    }

    var src = next.find('img').attr("src");
    var alt = next.find('img').attr("alt");
    next.addClass('selectedimg');
    current.removeClass('selectedimg');
    $('#dialogcontent').empty().append('<a href="#gallerypage"><img src="' + src + '" style="width:100%; height:100%;"/></a>' );
    $('#dialoghead').empty().append('<center><h2>' + alt + '</h2></center>' );
} 

function goprev() {
var current = $('a.selectedimg');
    if (current.hasClass('first')) {
        var prev = $('a.last')
    } else {
        var prev = current.prev();
    }
    var src = prev.find('img').attr("src");
    var alt = prev.find('img').attr("alt");
    prev.addClass('selectedimg');
    current.removeClass('selectedimg');
    $('#dialogcontent').empty().append('<a href="#gallerypage"><img src="' + src + '" style="width:100%; height:100%;"/></a>' );
    $('#dialoghead').empty().append('<center><h2>' + alt + '</h2></center>' );
}

$('.gallerycontent img').bind('tap',function(event, ui){
    var src = $(this).attr("src");
    var alt = $(this).attr("alt");
    $('#dialogcontent').empty().append('<a href="#gallerypage"><img src="' + src + '" style="width:100%; height:100%;"/></a>' );
    $('#dialoghead').empty().append('<center><h2>' + alt + '</h2></center>' );
    $(this).parent().addClass('selectedimg');
});

$('#nextbtn').bind('tap',function(event, ui){
    gonext();
});

$('#imgshow').bind('swipeleft',function(event, ui){
    gonext();
});

$('#prevbtn').bind('tap',function(event, ui){
    goprev();
});

$('#imgshow').bind('swiperight',function(event, ui){
    goprev();
});
    }); 
```

```
 <meta http-equiv="content-type" content="text/html; charset=UTF-8">
 <title>jQuery Mobile Dialog-Based Gallery</title>

 <style type="text/css">

 #pagecontent {
text-align:center;
}

.gallerycontent a img {
height:80px;
width:80px;
padding:3px;
background-color:#222;
}

#prevbtn, #nextbtn {
margin:10px 15px;
}

</style>

</head>

<body>
<div data-role="page" id="gallerypage" data-theme="a">

<div data-role="header">
<h1 class="headtitle">Gallery</h1>
</div> <!--header-->

<div data-role="content" id="pagecontent">
<div class="gallerycontent">
<a href="#imgshow" data-transition="pop" data-rel="dialog" class="first">
  <img src="images/1.jpg"/>
</a>
<a href="#imgshow" data-transition="pop" data-rel="dialog">
  <img src="images/2.jpg"/>
</a>
<a href="#imgshow" data-transition="pop" data-rel="dialog">
  <img src="images/3.jpg"/>
</a>
<a href="#imgshow" data-transition="pop" data-rel="dialog">
  <img src="images/4.jpg"/>
</a>
<a href="#imgshow" data-transition="pop" data-rel="dialog">
  <img src="images/5.jpg"/>
</a>
<a href="#imgshow" data-transition="pop" data-rel="dialog">
  <img src="images/6.jpg"/>
</a>
<a href="#imgshow" data-transition="pop" data-rel="dialog">
  <img src="images/7.jpg"/>
</a>
<a href="#imgshow" data-transition="pop" data-rel="dialog">
  <img src="images/8.jpg"/>
</a>
<a href="#imgshow" data-transition="pop" data-rel="dialog">
  <img src="images/9.jpg"/>
</a>
<a href="#imgshow" data-transition="pop" data-rel="dialog">
  <img src="images/10.jpg"/>
</a>
<a href="#imgshow" data-transition="pop" data-rel="dialog">
  <img src="images/11.jpg"/>
</a>
<a href="#imgshow" data-transition="pop" data-rel="dialog" class="last">
   <img src="images/12.jpg"/>
</a>
</div>
</div> <!--/content-->

<div data-role="footer" style="height:40px;line-height:40px;">
<center>jQuery Mobile Galeery</center>
</div> <!--/footer-->

</div> <!--/page-->

<div data-role="dialog"  id="imgshow"  data-theme="a">
<div data-role="header" data-theme="a">
 <div id="dialoghead"></div>
</div><!-- /header -->

<div data-role="content" data-theme="a">
<center><div id="dialogcontent"></div></center>
</div>

<div data-role="footer">
<center>
<a href="#" id="prevbtn" data-role="button" data-iconpos="notext" data-icon="arrow-     l">Previous</a>
<a href="#" id="nextbtn" data-role="button" data-iconpos="notext" data-icon="arrow-r">Next</a>
</center>
</div>
</div>

</body>
</html> 
```

Any ideas why i can't zoom pictures?

# php - php三元运算符解释

> ID：13638643
> 
> 赞同：0
> 
> 时间：2012-11-30T03:37:53.240
> 
> 标签：php

我很困惑。我在 index.php 中设置了以下代码，以在 xampp 和服务器数据库配置文件之间自动切换：

```
define('ENVIRONMENT', isset($_SERVER['SERVER_NAME'])=='my_domain_name.com' ? 'production' : 'development');

    echo 'SERVER_NAME  '.$_SERVER['SERVER_NAME']; // getting localhost
    echo 'env '.ENVIRONMENT; // getting production. 
```

在本地的 Xampp 中，我认为这会导致使用 $_SERVER['SERVER_NAME']=localhost 将 ENVIRONMENT 常量设置为“开发”。有人介意解释我在这里做错了什么吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-30T03:39:50.793

```
define('ENVIRONMENT', isset($_SERVER['SERVER_NAME'])=='my_domain_name.com' ? 'production' : 'development'); 
```

在这里，您正在比较`isset()`to的结果`'my_domain_name.com'`；您正在将布尔值与字符串进行比较。

您要检查“*已`$_SERVER['SERVER_NAME']`设置且`$_SERVER['SERVER_NAME']`等于`my_domain_name.com`？* ”，如下所示：

```
define('ENVIRONMENT', (isset($_SERVER['SERVER_NAME']) && $_SERVER['SERVER_NAME'] == 'my_domain_name.com') ? 'production' : 'development'); 
```

*（或者......只是完全删除`isset()`。）*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-30T03:40:11.677

在这种情况下你不需要使用`isset`（你知道它已经设置好了）：

```
define('ENVIRONMENT', 
    ($_SERVER['SERVER_NAME']) == 'my_domain_name.com' ? 'production' : 'development'
); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-30T03:41:57.287

试试这个：

```
define('ENVIRONMENT', ((isset($_SERVER['SERVER_NAME']) && ($_SERVER['SERVER_NAME']=='my_domain_name.com')) ? 'production' : 'development')); 
```

# javascript - 单击图像以重定向到定义的 url

> ID：13638644
> 
> 赞同：0
> 
> 时间：2012-11-30T03:37:59.543
> 
> 标签：javascript

我想单击图像并重定向到具有子域 $platform 和过滤器 $search_filter 的 url。这就是我到目前为止所拥有的。请帮忙？

```
<head>
<script>      
  function search_platform() {
    var $platform=document.getElementById("search_platform").value;
    var $search_filter=document.getElementById("search_filter").value;
    if ($platform !== '0') {
      document.location.href='http://www.' + $platform + 'domain.com/index.php?filter_name=' + $search_filter;
    }
  }
</script>
</head>
<body>

  <select id="search_platform">
    <option value="0" selected="selected"><?php echo 'Select Platform'; ?></option>
    <option value="platform1">Platform 1</option>
    <option value="platform1">Platform 1</option>
    <option value="platform1">Platform 1</option>
  </select>
  <input type="text" name="filter_name"/>
  <img src="test.png" width="264" height="110"  onclick="search_platform()"/>

</body> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T03:43:47.687

试试这个 ：

```
 <head>
    <script>      
      function search_platform() {
       //Removed $ from variables name
        var platform=document.getElementById("search_platform").value;
        var search_filter=document.getElementById("search_filter").value;
        if (platform !== '0') {
          document.location.href='http://www.' + platform + 'domain.com/index.php?filter_name=' + search_filter;
        }
      }
    </script>
    </head>
    <body>

      <select id="search_platform">
        <option value="0" selected="selected"><?php echo 'Select Platform'; ?></option>
        <option value="platform1">Platform 1</option>
        <option value="platform1">Platform 1</option>
        <option value="platform1">Platform 1</option>
      </select>
      <input type="text" name="filter_name" id="search_filter"/> <!-- Added id -->
      <img src="test.png" width="264" height="110"  onclick="search_platform()"/>

    </body> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T03:43:56.640

您在输入字段中缺少 ID：

```
<input type="text" name="filter_name" id="search_filter"/> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-30T03:44:06.677

我认为您的问题是从选择元素中获得价值。试试下面

```
<script>      
  function search_platform() {
    var $platform=document.getElementById("search_platform").value;
    var $selectedplatform = platform.options[platform.selectedIndex].value;
    var $search_filter=document.getElementById("search_filter").value;
    if ($platform !== '0') {
      document.location.href='http://www.' + $selectedplatform + 'domain.com/index.php?filter_name=' + $search_filter;
    }
  }
</script> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-30T04:06:13.977

我尝试修改您的所有代码以使其更加标准。

```
<head>
   <script type="text/javascript">
      function search_platform() {
         var platform=document.getElementById("search_platform").value;
         var search_filter=document.getElementById("search_filter").value;
         if (platform !== '0') {
            document.location.href='http://www.' + platform + '.domain.com/index.php?filter_name=' + search_filter;                                                                        
         }
      }
  </script>
</head>
<body>
   <select id="search_platform">
      <option value="0" selected="selected"><?php echo 'Select Platform'; ?></option>
      <option value="1mmtform1">Platform 1</option>
      <option value="platform2">Platform 2</option>
      <option value="platform3">Platform 3</option>
   </select>
   <input type="text" name="filter_name" id="search_filter"/>
   <img src="test.png" width="264" height="110" onclick="javascript:search_platform()" />
 </body> 
```

# django - Migrating from twitter anywhere api

> ID：13638648
> 
> 赞同：0
> 
> 时间：2012-11-30T03:38:37.790
> 
> 标签：django, twitter, twitter-anywhere

I m using twitter anywhere api for allowing user to sign in with twitter and get their twitter data to store it my table.Since twitter anywhere api is going to expire soon how can i migrate this functionality to oauth.

my javascript:

```
<script src="https://platform.twitter.com/anywhere.js?id={{twitterappid}}&v=1"></script>
<script type="text/javascript">
var twt_connected = 0;
var Uuid = '2334443224';
$(function(){
if ($('#twtlogin').length) {
  // do something
twttr.anywhere(function(twitter) {
if(twitter.isConnected()){
//alert('Welcome, you are connected');
currentUser = twitter.currentUser;
screenName = currentUser.data('screen_name');
jQuery.ajax({url:"/twitter/Uuid="+Uuid+"/" ,
             type: "POST",
             data: {user: JSON.stringify(currentUser) },
             dataType: "json",
             success: function(result) {
                        }});
document.getElementById("twtlogin").innerHTML = '<img src="/images/icon_tconnected.gif" width="153" height="37" alt="Connected" />';
 }
 });
 }
 });

$("#login").click(function(e){
    e.preventDefault();
    if (twt_connected == 0){
    $.post("/twt-click-time/Uuid="+Uuid+"/","clicked",function(data){})
    twttr.anywhere(function (T) {
             T.bind("authComplete", function (e, user) {
            document.getElementById("twtlogin").innerHTML = '<img src="/images/icon_tconnected.gif" width="153" height="37" alt="Connected" />';
             twt_connected = 1;
             currentUser = T.currentUser;
             screenName = currentUser.data('screen_name');
             jQuery.ajax({url:"/twitter/Uuid="+Uuid+"/" ,
                         type: "POST",
                         data: {user: JSON.stringify(currentUser) },
                         dataType: "json",
                         success: function(result) {
                        }});

             });
             T.signIn();
             });
             }
             });

</script> 
```

I m using django at my backend.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T04:41:51.607

我现在正在为烧瓶做这个。最简单的选择就是插入一些服务器端的 oauth 调用。

这是相当多的代码，所以我不会在这里复制和粘贴整个内容，但 simplegeo 的 oauth2 的 github 页面实际上有一个“[使用 twitter 登录 django](https://github.com/simplegeo/python-oauth2#logging-into-django-w-twitter) ”演练，应该会有所帮助。

在经历了一些选择之后，我认为我最喜欢[twython](https://github.com/ryanmcgrath/twython)。这只是做oauth的第一步：

```
from twython import Twython

t = Twython(app_key='key',
            app_secret='secret',
            callback_url='http://google.com/')
auth_props = t.get_authentication_tokens()
print auth_props 
```

# c++ - SGI STL sub-allocation free-lists

> ID：13638649
> 
> 赞同：0
> 
> 时间：2012-11-30T03:38:44.533
> 
> 标签：c++, stl

In sub-allocation of SGI STL allocator, there are 16 free-lists which separately manage small blocks of size 8,16,....,128\. The structure of the free-lists' node is:

```
union obj{
    union obj *free_list_link;
    char client_data[1];
} 
```

My question is : why it is designed like this? What is the member client_data used for?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T04:06:19.187

这是一种常见的设计模式。client_data[] 实际上是 8、16、.. 128 字节。如果您查看分配 obj 的位置，它可能看起来像 malloc( sizeof(obj) + 128 ) 用于 128 字节块。

# c - Copying struct problems

> ID：13638653
> 
> 赞同：0
> 
> 时间：2012-11-30T03:39:08.353
> 
> 标签：c, struct

Assume: `struct foo_t { int X,Y,Z; }`. Some function take an array of `struct foo_t` and set some values to it; something like this:

```
void foo(struct foo_t *f, size_t limit, size_t *result_length)
{
   int i = 0;
   struct foo_t a;
   a.X = 5;
   //...
   struct foo_t b;
   b.X = 10;
   // ...
   struct foo_t c;
   c.X = 4;
   //...
   f[i++] = a;
   f[i++] = b; 
   f[i++] = c;
   *result_length = i;
} 
```

and then:

```
struct foo_t buf[12];
struct foo_t positive[12];
struct foo_t negative[12];
size_t len;
foo(buf, sizeof(buf)/sizeof(buf[0]), &len);
int c,positive_len,negative_len;
for(c = positive_len = negative_len = 0; c < len; c++) 
{
   if(buf[c].X < 8) 
      positive[positive_len++] = buf[c];
   else
      negative[negative_len++] = buf[c];
} 
```

And finally:

```
puts("POSITIVE:");
int i;
for(i = 0; i < positive_len; i++)
   printf("%d\n", positive[i].X);
puts("NEGATIVE:");
for(i = 0; i < negative_len; i++)
   printf("%d\n", nagative[i].X); 
```

The problem is the following: instead of getting `"POSITIVE:\n4\n5"`, `"NEGATIVE:10"` I'm getting `5 and 5` and `10` isn't printed. In other words, only the last value set. Why is this happening? I've reduced significantly my code to try to get some help here because the real function is around 300 lines of code that includes database management, etc; If really needed I will post here. Before to use = operator, I'd used `memcpy()` to do copy of struct to my positive/negative arrays.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T04:07:46.487

您的代码中有错字：

```
 struct foo_t c;
   b.X = 4; // this should be c.X = 4;
   //... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-30T04:09:51.670

您在上面的示例中有两个错别字/错误：

1.  你没有设置 c

    结构 foo_t c;

    bX = 4;

2.  此 printf 中的变量拼写错误

    for(i = 0; i <negative_len; i++)

    printf("%d\n", nagative[i].X);

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-30T04:14:05.170

有几个错误。有些是拼写，并且从未在您的“foo”函数中分配“c”。

```
#include <stdlib.h>
#include <stdio.h>
#include <memory.h>

typedef struct foo_t
{
    int X, Y, Z;
}foo_t;

void foo(struct foo_t *f, size_t limit, size_t *result_length)
{
   int i = 0;
   struct foo_t a, b, c;
   a.X = 5;
   //...
   b.X = 10;
   // ...
   c.X = 4; // CHANGE HERE FROM "B" to "C".
   //...
   f[i++] = a;
   f[i++] = b; 
   f[i++] = c;
   *result_length = i;
}

int main(int argc, char** argv)
{

    // CORRECTED ALL SPELLING ERRORS!!! (POSITIVE / NEGATIVE)
    struct foo_t buf[12];
    struct foo_t positive[12];
    struct foo_t negative[12];
    size_t len;
    int c, positive_len, negative_len;

    foo(buf, sizeof(buf)/sizeof(buf[0]), &len);

    for(c = positive_len = negative_len = 0; c < len; c++) 
    {
       if(buf[c].X < 8) 
          positive[positive_len++] = buf[c];
       else
          negative[negative_len++] = buf[c];
    }

    { // <-- IGNORE THIS BADNESS
        int i;
        puts("POSITIVE:");

        for(i = 0; i < positive_len; i++)
           printf("%d\n", positive[i].X);
        puts("NEGATIVE:");
        for(i = 0; i < negative_len; i++)
           printf("%d\n", negative[i].X);
    }

    getchar();
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-30T04:14:15.530

这是从您的代码生成的 SSCCE（[简短、独立、完整的示例）：](http://sscce.org/)

```
#include <stdio.h>

struct foo_t { int X; };

static void foo(struct foo_t *f, size_t limit, size_t *result_length)
{
   size_t i = 0;
   struct foo_t a;
   a.X = 5;
   struct foo_t b;
   b.X = 10;
   struct foo_t c;
   c.X = 4;
   if (i < limit)
       f[i++] = a;
   if (i < limit)
       f[i++] = b; 
   if (i < limit)
       f[i++] = c;
   *result_length = i;
}

int main(void)
{
    struct foo_t buf[12];
    struct foo_t positive[12];
    struct foo_t negative[12];
    size_t len;
    foo(buf, sizeof(buf)/sizeof(buf[0]), &len);
    size_t c,positive_len,negative_len;
    for (c = positive_len = negative_len = 0; c < len; c++) 
    {
        if (buf[c].X < 8) 
            positive[positive_len++] = buf[c];
        else
            negative[negative_len++] = buf[c];
    }

    puts("POSITIVE:");
    for (size_t i = 0; i < positive_len; i++)
        printf("%d\n", positive[i].X);
    puts("NEGATIVE:");
    for (size_t i = 0; i < negative_len; i++)
        printf("%d\n", negative[i].X);
} 
```

它产生：

```
POSITIVE:
5
4
NEGATIVE:
10 
```

我不得不修复`nagative`to`negative`和`postive`to `positive`。我初始化了`c.X`. 我曾经`limit`确保没有溢出（并修复警告）。我更改了各种`int`计数器变量以`size_t`避免有关有符号与无符号比较的警告。我从结构中删除了 Y 和 Z 成员，因为在这个最小示例中没有使用它们。

# opengl - 传递给 OpenCL 内核时 image2d_t 损坏

> ID：13638654
> 
> 赞同：4
> 
> 时间：2012-11-30T03:39:10.773
> 
> 标签：opengl, haskell, opencl

我正在用 Haskell 和 OpenCL 编写路径跟踪器，但在将 image2d_t 传递给内核以将输出写入时遇到问题。也就是说，`get_image_*`在 image2d_t 上调用 OpenCL 中的任何函数都会返回无意义的值（通常是 0 或 2^24-1），并且`write_imagef`什么也不做。这只发生在 GPU 上运行时——CPU 运行良好。调用`clGetImageInfo`主机返回正确的值。OpenCL 的 Haskell 绑定将错误代码转换为异常，因此不必忘记检查错误。clinfo 将我的版本报告为“OpenCL 1.2 AMD-APP (1084.2)”。我应该注意到我遇到（并报告了）多个导致 OpenCL 编译器出现段错误或无法链接的错误，所以这可能是我的代码中的错误而不是错误的结果。

我像这样初始化 OpenCL（希望对不了解 Haskell 的人来说应该比较容易理解）：

```
(platform:_) <- clGetPlatformIDs
(device:_) <- clGetDeviceIDs platform CL_DEVICE_TYPE_GPU
glContext <- glXGetCurrentContext
glDisplay <- glXGetCurrentDisplay
context <- clCreateContext [CL_GL_CONTEXT_KHR glContext, CL_GLX_DISPLAY_KHR glDisplay] [device] putStrLn
queue <- clCreateCommandQueue context device []
source <- readFile "pt.cl"
program <- clCreateProgramWithSource context source
clBuildProgram program [device] "-cl-strict-aliasing"
        `catch` (λe -> case (e :: CLError) of
                            CL_BUILD_PROGRAM_FAILURE -> putStrLn "Building OpenCL program failed:"
                                                     >> clGetProgramBuildLog program device >>= putStrLn
                                                     >> throw e
                            _                        -> return ())
kernel <- clCreateKernel program "sample"
pCorners <- mallocArray 4
buffer <- clCreateBuffer context [CL_MEM_READ_ONLY, CL_MEM_USE_HOST_PTR] (4*sizeOf (undefined :: V.Vec4F), castPtr pCorners)
clSetKernelArgSto kernel 1 buffer
tex@(TextureObject texid) <- head <$> (genObjectNames 1)
activeTexture $= TextureUnit 0
textureBinding Texture2D $= Just tex
textureFilter Texture2D $= ((Nearest, Nothing), Nearest)
textureWrapMode Texture2D S $= (Repeated, Clamp)
textureWrapMode Texture2D T $= (Repeated, Clamp)
texImage2D Nothing NoProxy 0 RGBA′ (TextureSize2D initialWidth initialHeight) 0 (PixelData RGBA UnsignedByte nullPtr)
image <- clCreateFromGLTexture2D context [CL_MEM_READ_WRITE] gl_TEXTURE_2D 0 texid
clSetKernelArgSto kernel 2 image 
```

我称之为（稍微简化）来运行内核并渲染结果：

```
clSetKernelArgSto kernel 0 position
pokeArray pCorners orientedCorners -- update the pCorners array
finish -- This is glFinish()
clEnqueueAcquireGLObjects queue [image] []
clEnqueueNDRangeKernel queue kernel [width, height] [] []
clEnqueueReleaseGLObjects queue [image] []
clFinish queue
drawElements TriangleFan 4 UnsignedInt offset0
swapBuffers 
```

最后，测试内核：

```
__kernel void sample(float3 position, __constant float3 corner[4], image2d_t output) {
        write_imagef(output, (int2)(get_global_id(0), get_global_id(1)), (float4)(0, 0.5f, 1, 1));
} 
```

其输出是一个全屏四边形，显示 GPU 内存的随机未初始化区域。它*应该*是全屏青色四边形。我在那里有一些`printf`s 来显示`get_image_*`函数的结果，但是它们已经开始导致程序挂起。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T09:38:20.517

OpenCL 规范对此有规定——`image2d_t`对象需要访问限定符。

有两个这样的限定符：

*   `read_only`（或`__read_only`）
*   `write_only`（或`__write_only`）

它们是互斥的，不能一起使用（因此您不能同时读取和写入纹理 - 如果您打算对图像进行累积工作，这一点很重要，我怀疑蒙特卡洛就是这种情况应用程序，例如路径跟踪）。省略限定符是有效的，因为它只是默认为`read_only`，但不幸的是，这是输出图像的错误选择。

解决方案是使用 限定您的图像参数`write_only`，或者如果您也需要从中读取，请使用某种交换系统（或使用可以同时读取和写入的全局内存缓冲区，但这使得CL/GL 互操作有点困难，而且你会失去采样功能......）。

我认为它在 CPU 上工作的原因是，因为在 CPU 上没有只读的“纹理内存”，所以即使写入图像在技术上是非法的，它也是可能的，运行时允许你这样做。另一方面，GPU 确实具有只读内存部分，无论您多么努力（或者您的 GPU 设备的运行时间可能更严格），都无法在内核运行时写入这些部分。

*当我说运行时，我指的是支持 OpenCL 的设备，当然不是你的程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T10:01:10.147

我有一个类似的问题。重新排序内核参数后，所有 image2d_t 参数都是第一个参数，它起作用了。特别是调用 get_image_dim 返回了正确的结果。不知道，如果这是一个错误。我的显卡：ATI Radeon 7950。

# css - 使用CSS基于设备方向的动画？

> ID：13638657
> 
> 赞同：0
> 
> 时间：2012-11-30T03:39:31.430
> 
> 标签：css, animation, mobile, screen-orientation, screen-rotation

我创建了一个页面，该页面根据设备方向显示和隐藏内容，但是我发现当您旋转并且内容显示/隐藏时会有一些跳跃/滞后。

是否可以仅使用 css 在显示/隐藏的 lelements 之间制作更平滑的过渡动画？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T06:52:46.757

对于动画进出视图的元素，您可以使用`transition-property: all;`和`transition-duration: 1s;`（或您想要的任何持续时间）淡入/滑入所述元素。当然，这些 CSS 属性需要在某些浏览器中添加前缀。

# linq - Linq Projection is not including all data from the original entity

> ID：13638659
> 
> 赞同：2
> 
> 时间：2012-11-30T03:39:40.510
> 
> 标签：linq, linq-to-entities, automapper

I have encountered a LINQ issue and hope that you can help me to figure it out.

Here is what is happening.

1.  I get an `IQueryable<LicenseEntity>` of entities from the repository.
2.  I look at the fields in these entities and see that they contain valid data. There is a field for a related entity `Customer` in the LicenseEntity. It contains valid data, too, because I loaded it with the LicenseEntity.
3.  I use `.Select` to project each LicenseEntity to a LicenseViewModel.
4.  For each LicenseEntity, a LicenseEntity is passed into `AutoMapper.Mapper.Map` and is loaded into a LicenceViewModel entity.
5.  After all of the entities have been processed, when I look at the list of LicenseViewModels in the debugger, it reports a null reference exception and there are no items to view.
6.  To determine whether AutoMapper what causing my problem, I replaced it with a `MapMe()`. When I stopped at the return statement in MapMe and looked at the `s` parameter, which is the original entity, I found that the data in it is okay except that the customer field is now null. I assume that `Select` has done something that I don't know about.

How I can make `Select` retain all of the information in the original entity when it is doing its projection? Our solution cannot materialize the list because it may be very, very large. I've included my test code below and would really appreciate your help.

```
// Get the IQueryable<LicenseEntity> list of licenses from the repository.
var list = LicenseRepository.List();

// Convert the IQueryable<LicenseEntity> to an IQueryable<LicenseViewModel>
var vmlist = list.Select(x => MapMe(x, new LicenseViewModel()));
//var vmlist = list.Select(x => AutoMapper.Mapper.Map(x, new LicenseViewModel()));

// This function was used to see the LicenseEntity that was passing into Map().
// I discovered that the entity has all the correct data except for a related
// entity field, which was present in the original LicenseEntity before         
public LicenseViewModel MapMe(LicenseEntity s, LicenseViewModel d)
{
    return d;
} 
```

The following code works properly however it materializes the entities, which we cannot do.

```
List<LicenseViewModel> vms = new List<LicenseViewModel>();
foreach (var item in list)
{
    var vm = AutoMapper.Mapper.Map(item, new LicenseViewModel());
    vms.Add(vm);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T04:08:53.450

您已对此进行了标记，`LINQ-to-Entities`但文本中没有提及底层技术。但是问题很可能是由关联对象的延迟加载引起的。

这是适用于我使用过的大多数 ORM 的设计选择。加载对象时，默认情况下不加载连接的对象。如果它们是默认加载的，很明显你会很快破坏一切

*   当您加载许可证时，相关的客户会自动加载
*   加载客户时，加载所有相关对象 - 公司、地址、所有其他许可证等
*   对于这些对象中的每一个，都会加载每个相关的对象......

答案是您需要指定要加载哪些相关对象。在实体框架中，您可以[使用`Include`方法](http://msdn.microsoft.com/en-us/library/bb738708.aspx)执行此操作。

因为您使用的是存储库抽象，所以您可能会发现这比需要的更困难，但在不了解更多信息的情况下，我无法提供任何建议。这种类型的功能——非常基本的东西——对于存储库和“工作单元”模式来说总是一个困难。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-01T07:09:27.860

我找到了将域实体投影到视图模型的解决方案。如果您遇到与我相同的问题，请查看以下链接：

[http://lostechies.com/jimmybogard/2011/02/09/autoprojecting-linq-queries/](http://lostechies.com/jimmybogard/2011/02/09/autoprojecting-linq-queries/) http://www.devtrends.co.uk/blog/stop-using-automapper-in-your-data-access-代码

顺便说一句，在我的域实体中，我有一个带有一些“计算”属性的部分类......其值是从数据库记录中的其他字段生成的属性。这些不能在域实体中，因为它们会干扰上述解决方案。我将它们移至我的 ViewModel 类，这是真正需要它们的地方，一切都很好。

希望这些信息能帮助...

麦克风

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-30T04:15:36.817

我认为您的映射应该更像：

```
var vms = Mapper.Map<List<LicenseEntity>, List<LicenseViewModel>>(list); 
```

（即 - 你不需要`foreach`循环）。

但不幸的是，我非常怀疑这是否会解决您的问题，因为我怀疑这也会实现您的实体。

# android - AsyncTask Control UI-Thread

> ID：13638662
> 
> 赞同：1
> 
> 时间：2012-11-30T03:39:56.280
> 
> 标签：android

Code i have use

```
public class DemoAsynTask extends AsyncTask{
@Override
 protected void onPreExecute(){      
     try{           

         MainActivity myActivity = new MainActivity();
         myActivity.super.onCreate(savedInstanceState);
         myActivity.setContentView(R.layout.activity_main);

         EditText txtInformation = (EditText) myActivity.findViewById(R.id.txtInformation);
     txtInformation.setText("TESTING");
     }catch(Exception ex){
        ex.printStackTrace(); 
     }
}
    @Override
    protected Object doInBackground(Object... params) {
        // TODO Auto-generated method stub
        return null;
    }
} 
```

The DemoAsynTask class is not inside, i have seen an example is work but class inside MainActivity

```
public class MainActivity extends activity{
   public class DemoAsynTask extends AsyncTask{
   }
} 
```

The DemoAsynTask class is seperate files and i want call it seperately but it have null pointer exception.

```
public class MainActivity extends activity{
}
public class DemoAsynTask extends AsyncTask{
} 
```

Error Log java.lang.NullPointerException

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T04:44:58.207

嘿，您创建了 MainActivity（无需实例化 MainActivity，让它根据活动生命周期进行实例化）并将 DemoAsyncTask 作为另一个类或作为 MainActivity 的内部类。在 onPreExecute() 中，您设置状态“TESTING”，并在 onPostExecute() 中根据您在 doInBackground() 中获得的结果更改状态。

# java - 产生错误的 XML 输出

> ID：13638663
> 
> 赞同：0
> 
> 时间：2012-11-30T03:40:11.187
> 
> 标签：java, xmlhttprequest

附上两个屏幕截图和我的代码。我正在尝试将 animation_sequence 作为结束和结束括号，我已尽力而为，但现在我寻求您的帮助。请帮忙。我的代码将其生成为

代码：

```
 DocumentBuilderFactory factory = DocumentBuilderFactory.newInstance();
        DocumentBuilder builder = factory.newDocumentBuilder();
        Document testDoc = builder.parse(new File("./data/sprite_types/" + spriteName + "/" + spriteName + ".xml"));
        Element state = testDoc.createElement("state");
        state.setTextContent(element);
        Element animationState = testDoc.createElement("animation_state");
        Element sequence = testDoc.createElement("animation_sequence");
        testDoc.getElementsByTagName("animations_list").item(0).appendChild(animationState).appendChild(state);
        testDoc.getElementsByTagName("animation_state").item(testDoc.getElementsByTagName("state").getLength() - 1).appendChild(sequence);
        DOMSource source = new DOMSource(testDoc);
        PrintStream ps = new PrintStream("./data/sprite_types/" + spriteName + "/" + spriteName + ".xml");
        StreamResult result = new StreamResult(ps);
        TransformerFactory transformerFactory = TransformerFactory.newInstance();
        Transformer transformer = transformerFactory.newTransformer();
        transformer.transform(source, result); 
```

![不好](../Images/46e5f5f121cc465da3e0475e55da4e8c.png) ![好的](../Images/7c0f83c26bbd8a8f5289444a5399cae8.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T03:48:41.553

原因是您正在创建`animation_sequence`元素，但没有在其下创建任何子节点。实际上，您正在创建一个空元素。空元素，当序列化为字符串时，将始终显示为`<tag/>`，而不是`<tag></tag>`。

为避免这种情况，您需要添加一个空`Text`节点作为`animation_sequence`元素的子节点：

```
sequence.appendChild(testDoc.createTextNode("")); 
```

（或者，如果您使用 Commons Lang，请替换`""`为`StringUtils.EMPTY`）

# regex - vbscript regex match two string

> ID：13638666
> 
> 赞同：1
> 
> 时间：2012-11-30T03:40:44.843
> 
> 标签：regex, vbscript, string-matching

How do I use vbscript to find two texts that match within a singe line? For example:

```
This UserName is Logged on already. 
```

How do I search for "UserName" and "Logged on"?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-02T21:43:45.470

在这种情况下，正则表达式可能是多余的。我建议使用[`InStr()`](http://msdn.microsoft.com/en-us/library/wybb344c%28v=vs.84%29)这种检查：

```
s = "This UserName is Logged on already."
If InStr(s, "UserName") > 0 And InStr(s, "Logged on") > 0 Then
  '...
End If 
```

`InStr()`如果您想让检查更具可读性，您可以包装一个辅助函数：

```
s = "This UserName is Logged on already."
If Contains(s, "UserName") And Contains(s, "Logged on") Then
  '...
End If

Function Contains(str1, str2)
  Contains = False
  If InStr(str1, str2) > 0 Then Contains = True
End Function 
```

# php - 如何在 Zend 2 的自动加载目录中检索 ModuleName.global.php 配置文件的值？

> ID：13638667
> 
> 赞同：-2
> 
> 时间：2012-11-30T03:40:46.483
> 
> 标签：php, module, zend-framework2, servicemanager

我一直在寻找有关此问题的信息，但我能找到的唯一答案是查看其他模块如何处理此问题。到目前为止，我已经看到了这个：

在 Module.php 中使用 CdliTwoStageSignup

```
 'factories' => array(
                    .
                    .
            'cdlitwostagesignup_module_options' => function($sm) {
                $config = $sm->get('Configuration');
                return new Options\ModuleOptions($config['cdli-twostagesignup']);
            },
                    .
     } 
```

在 Module.php 中使用 ZfcUser

```
 'factories' => array(

            'zfcuser_module_options' => function ($sm) {
                $config = $sm->get('Config');
                return new Options\ModuleOptions(isset($config['zfcuser']) ? $config['zfcuser'] : array());
            }, 
```

根据 Zend 2 文档，ModuleManager 合并了每个模块的所有 module.config.php，并在服务管理器中设置。此外， .config/autoload 目录中的配置文件可以覆盖模块配置文件。

要访问配置，这两个模块似乎使用了关键字：“Config”和“Configuration”。

*   这些总是与服务管理器一起用于访问配置文件的关键字吗？
*   选择一个而不是另一个有什么区别吗？

感谢您提供的任何答案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T04:39:02.313

使用的键应该是`config`. 在内部，afaik、所有键、别名等将从 CamelCase 转换为破折号分隔小写。所以就配置而言，`Config`等于。`config`

现在，当它归结为`configuration`vs.`config`我假设`configuration`它可以作为`config`. 在某一时刻，我认为 beta 4 或 beta 5 他们已经决定将所有`configuration`出现的`config`. 如果有任何情况发生`configuration`，不能作为`config`所有社区的后备，将感谢您在 github 上打开一个问题以修复它。

# bash - Adding Counter in shell script

> ID：13638670
> 
> 赞同：70
> 
> 时间：2012-11-30T03:41:07.863
> 
> 标签：bash, shell

I have below code in my shell script which will keep on sleeping if it doesn't finds any file. And it sleeps for half an hour but currently I don't have any counter like only execute the below code 20 times and then exit the program if the files are still are not there (means don't do anything after 20 checks and exit the full script).

What's the best way to do this problem? So that I am also aware by looking at the emails that it has tried 20 times.

Hope I am clear enough.

```
while true; do
  if /home/hadoop/latest/bin/hadoop fs -ls /apps/hdtech/bds/quality-rt/dt=$DATE_YEST_FORMAT2 then
       echo "Files Present" | mailx -s "File Present"  -r admin@host.com admin@host.com
       break
  else
       echo "Sleeping for half an hour" | mailx -s "Time to Sleep Now"  -r admin@host.com admin@host.com
       sleep 1800
  fi
done 
```

* * *

## 回答 #1

> 赞同：119
> 
> 时间：2012-11-30T03:44:21.227

Here's how you might implement a counter:

```
counter=0
while true; do
  if /home/hadoop/latest/bin/hadoop fs -ls /apps/hdtech/bds/quality-rt/dt=$DATE_YEST_FORMAT2 then
       echo "Files Present" | mailx -s "File Present"  -r admin@host.com admin@host.com
       exit 0
  elif [[ "$counter" -gt 20 ]]; then
       echo "Counter: $counter times reached; Exiting loop!"
       exit 1
  else
       counter=$((counter+1))
       echo "Counter: $counter time(s); Sleeping for another half an hour" | mailx -s "Time to Sleep Now"  -r admin@host.com admin@host.com
       sleep 1800
  fi
done 
```

**Some Explanations:**

*   `counter=$((counter+1))` - this is how you can increment a counter. The `$` for `counter` is optional inside the double parentheses in this case.
*   `elif [[ "$counter" -gt 20 ]]; then` - this checks whether `$counter` is not greater than `20`. If so, it outputs the appropriate message and breaks out of your while loop.

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2012-11-30T07:52:34.227

尝试这个：

```
counter=0
while true; do
  if /home/hadoop/latest/bin/hadoop fs -ls /apps/hdtech/bds/quality-rt/dt=$DATE_YEST_FORMAT2 then
       echo "Files Present" | mailx -s "File Present"  -r admin@host.com admin@host.com
       break
  elif [[ "$counter" -gt 20 ]]; then
       echo "Counter limit reached, exit script."
       exit 1
  else
       let counter++
       echo "Sleeping for another half an hour" | mailx -s "Time to Sleep Now"  -r admin@host.com admin@host.com
       sleep 1800
  fi
done 
```

**解释**

*   `break`- 如果文件存在，它将中断并允许脚本处理文件。
*   `[[ "$counter" -gt 20 ]]`- 如果计数器变量大于 20，脚本将退出。
*   `let counter++`- 每次通过时计数器加 1。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2021-02-16T01:17:35.833

您可以使用`for`循环而不是`while`：

```
max_loop=20
for ((count = 0; count < max_loop; count++)); do
  if /home/hadoop/latest/bin/hadoop fs -ls /apps/hdtech/bds/quality-rt/dt=$DATE_YEST_FORMAT2 then
       echo "Files Present" | mailx -s "File Present"  -r admin@host.com admin@host.com
       break
  else
       echo "Sleeping for half an hour" | mailx -s "Time to Sleep Now"  -r admin@host.com admin@host.com
       sleep 1800
  fi
done

if [ "$count" -eq "$max_loop" ]; then
  echo "Maximum number of trials reached" >&2
  exit 1
fi 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-07-23T16:33:32.837

```
#!/usr/bin/env bash
counter=0
while [[ "$counter" -lt 20 ]] 
do
  if [[ $counter -gt 0 ]] ; then
    echo "Counter: $counter time(s); Sleeping for another half an hour" | mailx -s "Time to Sleep Now"  -r admin@host.com admin@host.com
    sleep 1800  
  fi
  if /home/hadoop/latest/bin/hadoop fs -ls /apps/hdtech/bds/quality-rt/dt=$DATE_YEST_FORMAT2 ; then
       echo "Files Present" | mailx -s "File Present"  -r admin@host.com admin@host.com
       exit 0
  fi
  : $((counter++))
done

echo "Counter: $counter times reached; Exiting loop!"
exit 1 
```

这是对此的另一种看法。我添加了这段代码来说明这些要点：

1.  可以将`while`您的计数器作为条件 - 这消除了检查循环中变量值的需要。
2.  由于 if 分支会导致循环结束（通过 break 或 exit），因此不需要 final `else`。
3.  我提供了不同的语法来增加计数器。老实说，我从未见过 koola 的版本（`let counter++`）但我非常喜欢它（它对我来说更简单）。
4.  我不是 100% 确定某些 while 循环提供的答案实际上循环了 20 次。相反，我认为其中一些循环了 21 次。
5.  所提出的解决方案实际上给管理员发送了额外的时间 - 如果您要退出，则无需告诉管理员您要睡半个小时。我在 while 循环的开头添加了一个额外的 if 以避免额外的电子邮件（和睡眠）。

这是 20 次找不到文件的运行的输出：

```
Counter: 1 time(s); Sleeping for another half an hour
Counter: 2 time(s); Sleeping for another half an hour
...
Counter: 19 time(s); Sleeping for another half an hour
Counter: 20 times reached; Exiting loop! 
```

if 的短处是我们检查文件 20 次，但只休眠 19 次。

# linux - Redirecting Input in Linux

> ID：13638673
> 
> 赞同：1
> 
> 时间：2012-11-30T03:41:20.103
> 
> 标签：linux, redirect, terminal

I have a 2 files: test and input1\. The following is my "test" file:

```
echo $1 $2 
```

Changing the output works as when I write in the terminal:

```
./test foo bar > input1 
```

the string "foo bar" is written to input1. Yet, when I write in the terminal:

```
./test < input1 
```

all that is printed in the terminal is a skipped line.

Any ideas why "foo bar" is not getting printed to the terminal?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T03:45:17.803

这是因为**test**不回显**标准输入**，它回显**命令参数**。

值`$1`和`$2`代表命令行上的第一个和第二个参数，它们是测试的回声。

小于 ("<") 表示法重定向标准输入（默认情况下，交互式 shell 中的控制台），并且您将发送到**test**的标准输入重定向到来自**input1**，但**test**甚至不查看标准输入，它只查看命令行参数。

为了让 shell 表现得更像你期望的那样，你必须获取**input1**的内容并将其放入传递给**test**的命令参数中。

也许这就是你想要的：

```
./test $(cat input1) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T03:47:25.437

做你想做的事，你应该做：

```
./test `cat input1` 
```

这样， input1 的内容将作为参数传递给命令，而不是作为标准输入。

假设 input1 的内容是：

```
a b c 
```

这与调用你的脚本是一样的：

```
./test a b c 
```

在您的脚本中，您将收到 a、b 和 c 作为变量：

```
$# = 3
$1 = 'a'
$2 = 'b'
$3 = 'c' 
```

但是，假设您想在脚本中使用 input1 作为标准输入。所以你会这样调用你的脚本：

```
./test < input1 
```

在您的脚本中，假设您要将 input1 的内容传递给`grep`. 你会做这样的事情：

```
grep b <1 
```

这将在 input1 文件中搜索字符串“b”。

要查看更多示例，请查看此页面： http: [//www.mathinfo.u-picardie.fr/asch/f/MeCS/courseware/users/help/general/unix/redirection.html](http://www.mathinfo.u-picardie.fr/asch/f/MeCS/courseware/users/help/general/unix/redirection.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-02-12T20:56:27.717

输入可以在 bash 中重定向如下（我还是 Linux 新手）：

`cat <& 0`

这里, `0`, 代表`Console Input`, 而, `1`, 将代表`Console Output`and,`2`代表`Console Error Output`.

# matlab - How to vectorize the code in MATLAB

> ID：13638679
> 
> 赞同：1
> 
> 时间：2012-11-30T03:42:19.900
> 
> 标签：matlab, octave, vectorization, euclidean-distance

I have some Cluster Centers and some Data Points. I want to calculate the distances as below (norm is for Euclidean distance):

```
 costsTmp = zeros(NObjects,NClusters);
            lambda = zeros(NObjects,NClusters);
            for clustclust = 1:NClusters
                for objobj = 1:NObjects
                    costsTmp(objobj,clustclust) = norm(curCenters(clustclust,:)-curPartData(objobj,:),'fro');
                    lambda(objobj,clustclust) = (costsTmp(objobj,clustclust) - log(si1(clustclust,objobj)))/log(si2(objobj,clustclust));
                end
            end 
```

How can I vectorize this snippet? Thanks

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T07:30:37.753

这种矢量化可以非常优雅地完成（如果我可以这么说的话）使用`bsxfun`. **不需要**任何`repmat`s

```
costsTemp = bsxfun( @minus, permute( curCenters, [1 3 2] ), ...
                            permute( curPartData, [3 1 2] ) );
% I am not sure why you use Frobenius norm, this is the same as Euclidean norm for vector
costsTemp = sqrt( sum( costsTemp.^2, 3 ) ); % now we have the norms
lambda = costsTmp -reallog(si1)./reallog(si2); 
```

您可能需要对`permute`维度向量的顺序进行一些操作以使输出完全相同（就转置而言）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-30T05:24:52.663

尝试这个：

```
 Difference = zeros(NObjects,NClusters);
    costsTmp = zeros(NObjects,NClusters);
    lambda = zeros(NObjects,NClusters);
    for clustclust = 1:NClusters
    repeated_curCenter = repmat(curCenter(clustclust,:), NObjects, 1); 
    % ^^ This creates a repeated matrix of 1 cluster center but with NObject
    % rows. Now, dimensions of repeated_curCenter equals that of curPartData

    Difference(:,clustclust) = repeated_curCenter - curPartData;
    costsTmp(:,clustclust) = sqrt(sum(abs(costsTmp(:,clustclust)).^2, 1)); %Euclidean norm
    end 
```

方法是尝试制作相同维度的矩阵。您也可以通过制作 2 个 3D 数组来扩展此概念，从而消除当前的 for 循环，如下所示：

costTmp = zeros(NObjects,NClusters); lambda = zeros(NObjects,NClusters);

```
 %Assume that number of dimensions for data = n
    %curCenter's dimensions = NClusters x n
    repeated_curCenter = repmat(curCenter, 1, 1, NObjects);
    %repeated_curCenter's dimensions = NClusters x n x NObjects

    %curPartData's dimensions = NObject x n
    repeated_curPartData = repmat(curPartData, 1, 1, NClusters);
    %repeated_curPartData's dimensions = NObjects x n x NClusters

    %Alligning the matrices along similar dimensions. After this, both matrices
    %have dimensions of NObjects x n x NClusters
    new_repeated_curCenter = permute(repeated_curCenter, [3, 2, 1]);

    Difference = new_repeated_curCenter - repeated_curPartData;

    Norm = sqrt(sum(abs(Difference)).^2, 2); %sums along the 2nd dimensions i.e. n
    %Norm's dimensions are now NObjects x 1 x NClusters. 

    Norm = permute(Norm, [1, 3, 2]); 
```

在这里，Norm 有点像 costTmp，只是多了一个维度。我还没有提供 lambda 的代码。我也不知道问题代码中的 lambda 是什么。

# mongodb - MongoDB map/reduce "NoMethodError: undefined method `map_reduce' for # 我正在尝试通过 ruby 控制台在集合上使用 map_reduce，但我收到“NoMethodError: undefined method `map_reduce' for # results = Thing.collection.map_ 问问题 问问题 2012-11-30T03:42:26.907 1203 次 This question shows research effort; it is useful and clear 2 This question does not show any research effort; it is unclear or not useful Bookmark this question. Show activity on this post. 我正在尝试通过 ruby 控制台在集合上使用 map_reduce，但我收到“NoMethodError: undefined method `map_reduce' for # results = Thing.collection.map_reduce(map, reduce, out: "vr") Mongoid 3 中的 Map Reduce 的工作方式略有不同。您拥有的语法适用于 mongo ruby 驱动程序。在 Mongoid 3 中，您将其从类或标准中调用，如下所示： 从一个标准： Model.where(field: value).map_reduce(map, reduce).out(inline: true) 从一个类： SomeClass.map_reduce(map, reduce).out(replace: "mr-results").each do |document| #do something end 您可以在Mongoid 文档中找到更多信息 mongodbmongoid 4 1 回答 1 This answer is useful 7 Mongoid 3 中的 Map Reduce 的工作方式略有不同。您拥有的语法适用于 mongo ruby 驱动程序。在 Mongoid 3 中，您将其从类或标准中调用，如下所示： 从一个标准： Model.where(field: value).map_reduce(map, reduce).out(inline: true) 从一个类： SomeClass.map_reduce(map, reduce).out(replace: "mr-results").each do |document| #do something end 您可以在Mongoid 文档中找到更多信息 于 2012-11-30T05:53:02.343 回答 Related 1 iphone - 访问iOS6短信数据库 2 c - Linux C - 实现程序可以自我更新的能力 1 wcf - 基于 TCPIP 的 REST 兼容性 1 javascript - 如何为 Angular.js 表单设置默认值和可变值 0 eclipse - 将 Visual c++ 项目导入 Eclipse 2 django - mod_wsgi apache 和 django 配置不工作 1 variables - Dyn_Variable 的 Tsung 问题 1 python - Unpickling 失败， __new__() 只需要 1 个参数（给定 2 个） 2 ios - 动画受到多任务处理的干扰 1 mysql - 如果 id 不存在，则 MySQL UPDATE 表 1 和表 2 上的 INSERT Reference php × 1429865 c/c++ × 756500 nginx × 49975 mongodb × 159057 mybatis × 3233 anaconda × 13410 pycharm × 14671 python × 1902243 vscode × 56040 docker × 110988 github × 49000 flask × 49129 ffmpeg × 24037 jmeter × 16910 matplotlib × 63493 bootstrap × 54641

> ID：13638681
> 
> 赞同：2
> 
> 时间：
> 
> 标签：mongodb, mongoid

我正在尝试通过 ruby​​ 控制台在集合上使用 map_reduce，但我收到“NoMethodError: undefined method `map_reduce' for #

```
results = Thing.collection.map_reduce(map, reduce, out: "vr") 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-30T05:53:02.343

Mongoid 3 中的 Map Reduce 的工作方式略有不同。您拥有的语法适用于 mongo ruby​​ 驱动程序。在 Mongoid 3 中，您将其从类或标准中调用，如下所示：

从一个标准：

```
Model.where(field: value).map_reduce(map, reduce).out(inline: true) 
```

从一个类：

```
SomeClass.map_reduce(map, reduce).out(replace: "mr-results").each do |document|
  #do something
end 
```

您可以在[Mongoid 文档中找到更多信息](http://mongoid.org/en/mongoid/docs/querying.html#map_reduce)

# r - How to catch "need at least two non-NA values to interpolate"

> ID：13638682
> 
> 赞同：2
> 
> 时间：2012-11-30T03:42:34.003
> 
> 标签：r

From [Find x-intercept and y-intercept of a loop in R](https://stackoverflow.com/questions/13555468/find-x-intercept-and-y-intercept-of-a-loop-in-r) I got this nice solution. But it crashes, if there is no interception of course like in this example:

```
x <- sin(seq(0,2*pi,0.2) + rnorm(1))
y <- cos(seq(0,2*pi,0.2) + rnorm(1))

intercepts(x,y+10)

intercepts <- function(x,y) {
  x.s <- approxfun(x[y<=0], y[y<=0])(0)
  x.n <- approxfun(x[y>=0], y[y>=0])(0)
  y.w <- approxfun(y[x<=0], x[x<=0])(0)
  y.e <- approxfun(y[x>=0], x[x>=0])(0)

  list(x.s, x.n, y.w, y.e)
} 
```

How can I prevent the function from crashing and return `NA` s **if no interception could be found**?

What I tried so far is:

```
getIntercept <- function(x,y) {

  xydf <- data.frame(x,y)
  xy.n <- subset(xydf,y>=0)
  xy.s <- subset(xydf,y<=0)
  xy.e <- subset(xydf,x>=0)
  xy.w <- subset(xydf,x<=0)

  if ((length(xy.n$y) * length(xy.s$y) >=1) & (length(xy.e$y) * length(xy.w$y) >=1)) {
   ## interception in north and south
    Ra <- approxfun(xy.n$x,xy.n$y)(0)
    Rb <- approxfun(xy.s$x, xy.s$y)(0)

   ## interception in east and west
    Ca <- approxfun(xy.e$x,xy.e$y)(0)
    Cb <- approxfun(xy.w$x,xy.w$y)(0)
    return(data.frame(Ra,Rb,Ca,Cb,
                      Rmean=mean(Ra,-Rb), Rerr=(Ra+Rb)/2,
                      Cmean=mean(Ca,-Cb), Cerr=(Ca+Cb)/2))
  } else { return(data.frame(Ra=0,Rb=0,Ca=0,Cb=0, Rmean=0, Rerr=0, Cmean=0, Cerr=0));  }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-30T06:08:34.737

Straightforward solution, returns NA in the case of any error:

```
intercepts <- function(x,y) {
  x.s <- tryCatch(approxfun(x[y<=0], y[y<=0])(0), error=function(e) NA)
  x.n <- tryCatch(approxfun(x[y>=0], y[y>=0])(0), error=function(e) NA)
  y.w <- tryCatch(approxfun(y[x<=0], x[x<=0])(0), error=function(e) NA)
  y.e <- tryCatch(approxfun(y[x>=0], x[x>=0])(0), error=function(e) NA)

  list(x.s, x.n, y.w, y.e)
} 
```

# firefox - Is it possible to use firefox's google search bar directly from command line?

> ID：13638683
> 
> 赞同：0
> 
> 时间：2012-11-30T03:42:45.207
> 
> 标签：firefox, ubuntu, command-line

I checked through firefox's supposedly supported command line arguments and found this distinctly lacking, but I can't help but assume it must be somehow possible. Any thoughts on how? Currently running Ubuntu 11.10 if that changes anything.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T04:04:17.057

如果您在谈论[Developer Toolbar](https://developer.mozilla.org/en-US/docs/Tools/GCLI)，它看起来不像可以访问内置搜索。它主要用于快速访问开发人员任务（键入`help`以查看其访问的全部内容），而不是用于驱动常规浏览任务。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-09-19T07:23:35.157

在 ubuntu 中使用终端安装 googler 第 1 步：安装 git（如果未安装）

```
 sudo apt-get install git 
```

步骤 2：更改目录

```
 cd /tmp 
```

步骤 3：使用命令从下面给出的链接克隆它

```
 git clone https://github.com/jarun/googler.git 
```

第四步：进入 googler 目录

```
 cd googler 
```

第五步：

```
 sudo make install 
```

第6步：之后移动到bash目录

```
 cd auto-completion/bash/ 
```

Step-7: 最后将文件复制到etc/bash_completion.d

```
 sudo cp googler-completion.bash /etc/bash_completion.d/ 
```

现在从终端打开 googler

```
 googler your_query 
```

如需进一步查询，请参阅 [此处](https://fossbytes.com/how-to-google-search-in-command-line-using-googler/)

使用 man googler 获取更多选项

# cakephp - How to use function find('list') get data from other table beside its model?

> ID：13638685
> 
> 赞同：0
> 
> 时间：2012-11-30T03:42:52.383
> 
> 标签：cakephp

I am new of Cakephp I stuck by using function find('list') to get data from other table inside User model. Example i have User Model want get List of group andgroup has table "groups" but i don't want create php files for group controller and group model.

```
 <?php
      //User model
       class User extends AppModel {

         public function getGroupList() {
            /* Here i want return list all group by use function find('list') 
             * but group has table name "groups" and i don't want use sql query string.
             * Note that group i don't create  files php in controller and model.
             */

         }

       } 
    ?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T03:48:55.950

你为什么不想创建一个组控制器？做事蛋糕的方式通常会让你的生活更轻松。

在任何一种情况下都会涉及一个额外的 sql 查询（或至少是连接）。

# iphone - image picker not dismissing when picture tapped

> ID：13638690
> 
> 赞同：0
> 
> 时间：2012-11-30T03:43:48.517
> 
> 标签：iphone, objective-c, ipad

when the bar button item is tapped the popover view shows fine but it does not dismiss when a photo is selected. Am I missing something? What should i do?

```
-(IBAction)addPhoto:(UIBarButtonItem *)sender
{
    UIImagePickerController *imagePicker = [[UIImagePickerController alloc] init];
    popover = [[UIPopoverController alloc] initWithContentViewController:imagePicker];
    [popover presentPopoverFromBarButtonItem:sender permittedArrowDirections:UIPopoverArrowDirectionAny animated:YES];
}

- (void)imagePickerController:(UIImagePickerController *)picker didFinishPickingImage:(UIImage *)selectedImage editingInfo:(NSDictionary *)editingInfo
{   
    // Delete any existing image.
    NSManagedObject *oldImage = imageClass.image;
    if (oldImage != nil)
    {
        [imageClass.managedObjectContext deleteObject:oldImage];
    }

    // Create an image object for the new image.
    NSManagedObject *myImage = [NSEntityDescription insertNewObjectForEntityForName:@"Image" inManagedObjectContext:imageClass.managedObjectContext];
    imageClass.image = myImage;

    // Set the image for the image managed object.
    [image setValue:selectedImage forKey:@"image"];

    [popover dismissPopoverAnimated:YES];
}

- (void)imagePickerControllerDidCancel:(UIImagePickerController *)picker
{
    [[picker parentViewController] dismissViewControllerAnimated:YES completion:nil];
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T03:50:26.043

问题是您试图关闭图像选择器控制器，但您需要关闭它所在的弹出框。需要根据它们的呈现方式来关闭它们。

改变：

```
[self dismissViewControllerAnimated:YES completion:nil]; 
```

至：

```
[popover dismissPopoverAnimated:YES]; 
```

如果您已调用`dismissViewControllerAnimated:completion:`，则将使用调用`presentViewController:animated:completion:`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-30T05:38:12.113

要在从图库中选择照片时关闭 UIPopoverViewController，您需要`didFinishPickingMediaWithInfo`在选择图像后在方法中添加以下行。

```
- (void)imagePickerController:(UIImagePickerController *)imagePicker didFinishPickingMediaWithInfo:(NSDictionary *)info {
     [popover dismissPopoverAnimated:YES];
     [imagePicker dismissModalViewControllerAnimated:YES];
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-30T04:35:21.997

你还没有自我设定`delegate`。`imagePicker`另外，您需要`popover`在委托方法中将其作为实例变量来解除。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-30T04:49:01.587

1) 在你的 .h 中你必须添加`<UIImagePickerControllerDelegate>` 2) 添加`imagePicker.delegate=self;`所以你的`addPhoto`方法应该如下所示：

```
-(IBAction)addPhoto:(UIBarButtonItem *)sender {
UIImagePickerController *imagePicker = [[UIImagePickerController alloc] init];
imagePicker.delegate=self;  //add this line to your code
popover = [[UIPopoverController alloc]
           initWithContentViewController:imagePicker];

[popover presentPopoverFromBarButtonItem:sender
                permittedArrowDirections:UIPopoverArrowDirectionAny
                                animated:YES];
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-30T05:10:41.110

只需给代表`UIPopoverControllerDelegate`和文件`UIImagePickerControllerDelegate``.h`

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-07-05T16:01:32.643

如果有人在使用 UIImagePickerController 时仍然遇到这个臭名昭著的错误：

```
Assigning to 'id <UINavigationControllerDelegate,UIImagePickerControllerDelegate>' from   incompatible type 'DetailViewController *const __strong' 
```

试着移动

```
UIImagePickerController *imagePicker = [[UIImagePickerController alloc] init];
imagePicker.delegate = self; 
```

到

```
- (void)viewDidLoad{
  //do your stuff
} 
```

并且不要忘记在相应的 .h 文件中包含委托协议定义 (<UINavigationControllerDelegate,UIImagePickerControllerDelegate>)。

这解决了我的问题，希望它会帮助别人。不知道它是否是最好的解决方案，但在类似的情况下对我有用。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-11-30T05:48:21.060

您必须将 UIImagePickerControllerDelegate 添加到相应的 .h 文件中，并检查此代码

```
 -(IBAction)addPhoto:(UIBarButtonItem *)sender 
{
  UIImagePickerController *imagePicker3 = [[UIImagePickerController alloc] init];
  imagePicker3.delegate = self;
  imagePicker3.sourceType = UIImagePickerControllerSourceTypeCamera;
  imagePicker3.allowsEditing = YES;
  imagePicker3.mediaTypes = [NSArray arrayWithObject:@"public.image"]
  [self presentModalViewController:imagePicker3 animated:YES];

}
-(void)imagePickerController:(UIImagePickerController *)picker didFinishPickingMediaWithInfo:(NSDictionary *)info { 
[self dismissModalViewControllerAnimated:YES];
_imageselected.image=[info valueForKey:UIImagePickerControllerEditedImage];

}
- (void)imagePickerControllerDidCancel:(UIImagePickerController *)picker {
[self dismissModalViewControllerAnimated:YES];

 } 
```

# java - Hibernate OneToMany 映射

> ID：13638702
> 
> 赞同：4
> 
> 时间：2012-11-30T03:44:42.293
> 
> 标签：java, hibernate, jpa

我有两个模型类：Equity 和 EquityData。从 Equity 到 EquityData 存在 OneToMany 关系。我很难让 Hibernate 以我想要的方式绑定。

```
@Entity
@Table(name="equities")
public class Equity
{
    @Id
    @GeneratedValue
    @Column(name="Equity_ID")
    private Integer id;

    private String symbol;

    @OneToMany(mappedBy="equity")
    private List<EquityData> equityData;
    ...
}

@Entity
public class EquityData 
{   
    @Id
    @GeneratedValue
    @Column(name="id")
    private Integer id;

    @ManyToOne
    @JoinColumn(name="Equity_ID")
    private Equity equity;

    @Column(name="quote_time") private Date quoteTime;
    @Column(name="quote_type_id") private Integer quoteTypeId;
    @Column(name="value") private BigDecimal value;
    ...
} 
```

现在一个 Equity 可以有许多 EquityQuotes，但总会有一个“最近的”报价（具有最新报价时间的报价）。现在，我将 Hibernate 绑定到我的实体的方式，它将检索 Equity 和所有 EquityData。我只希望它为每个 EquityDataType 检索最新的 EquityData（即我不关心昨天的数据，只关心今天的数据）。

在 SQL 中，它看起来像这样：

```
select d.equity_id, d.quote_type_id, d.value, max(quote_time) 
from equities e, equity_data d
where e.equityID = d.equity_id and e.symbol = :symbol
group by d.equity_id, d.quote_type_id; 
```

我会很感激任何帮助！我认为这并不重要，但我在 Stripes Web 框架中使用它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-05-26T15:46:28.853

您可以创建另一个字段以仅从今天恢复 EquityData，向其中添加 @Where 子句：

```
@OneToMany(mappedBy = "equity")
@Where(clause = "quoteTime >= TODAY")
private List<EquityData> equityDataFromToday; 
```

然后，您必须使用字段EquityDataFromToday 来访问您的数据，而不是equityData（将包含所有这些）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T04:58:55.680

您可以在您的权益数据列表中将获取类型设置为 LAZY，然后编写一个命名查询并仅获取今天的权益数据。由于您使用的是 Hibernate，因此您也可以使用 Criteria API 来实现这一点。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-30T10:06:35.347

您可以设置标准以从数据库中获取最新报价，例如，

```
Criteria crit = session.createCriteria(Equity.class);
//your criteria goes here....
crit.createCriteria(last_quoted);
List<?> entity = crit.list();
for(Iterator<?> it = equity.iterator();it.hasNext();){
Equity equity = (Equity) it.next();
//print the latest quotes based on the criteria you provided
}
session.close();
}
//catch(Exception e){ //display exeption;} 
```

# php - Yii：当调用 setState/Set Session 超过 1 次时，getState 函数结果不稳定

> ID：13638709
> 
> 赞同：1
> 
> 时间：2012-11-30T03:45:07.277
> 
> 标签：php, javascript, ajax, yii

例如，我有会话“globalunit”，我想使用 setState 函数设置该会话值。所以我在我的 Controller 类中创建 actionSetUnit 和 actionGetUnit 函数，以便在我的 View 类中由 ajax 调用

```
 //to set globalunit
 public function actionSetUnit(){
   if (isset($_POST['unit']) && $_POST['unit'] !== null){
         Yii::app()->user->setState('globalunit',$_POST['unit']);
         echo 'globalunit value now is :'.Yii::app()->user->getState('globalunit');
    }
 }

 //to get globalunit
 public function actionGetUnit(){
    echo 'globalunit value now is :'.Yii::app()->user->getState('globalunit');
 } 
```

当我在我的视图中更改/单击我的组合单元时，我经常在我的视图中调用 actionSetUnit。但是当我在我的视图中调用 getUnit 函数来显示 globalunit 值时，结果/响应不稳定。根据我在组合单元中选择的最后一个单元，有时响应是正确的。有时响应是错误的（不会根据我在组合单元中选择的最后一个单元的值进行更改）:(...
也许我太多调用 setState 函数来设置具有相同名称的值会话。
我的代码中是否缺少任何内容？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T07:43:10.870

确保仅在填充 $_POST 时设置状态

```
 //to set globalunit
 public function actionSetUnit(){
    if (isset($_POST['unit']) && $_POST['unit'] !== null)
        Yii::app()->user->setState('globalunit',$_POST['unit']);
 } 
```

我猜你有时会用空值覆盖它。尝试使用 Yii::trace() 或 Yii::log() 您的 $_POST 值，以确保每次调用都填充它。

# c# - 如何在 C# 中向 Windows Phone 应用程序添加一个类？

> ID：13638711
> 
> 赞同：-3
> 
> 时间：2012-11-30T03:45:10.493
> 
> 标签：c#, windows-phone-7

我尝试通过转到**Project**然后**Add Class**添加一个类，但这不起作用，我的应用程序在运行时失败。我尝试将类重命名为**Class.xaml.cs**，但没有占上风。

编辑：我实际上没有收到任何错误。它会尝试加载但不会。没有错误。我假设我无法将 ac# 类添加到 WP7 应用程序？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T05:14:48.157

右键单击要添加类的项目或文件夹，然后选择“添加”，然后选择“类”。看起来您正在添加扩展名为 .xaml 的页面或用户控件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-30T06:11:49.710

您可以添加一个 C# 类。

右键单击解决方案资源管理器中的项目>单击添加>选择类。

或项目> 添加类

将不会有与您创建的任何类链接的 XAML 页面，但要创建一个新页面

右键单击解决方案资源管理器中的项目>单击添加>选择空白页

# java - 在java中模拟类变量值的问题

> ID：13638713
> 
> 赞同：0
> 
> 时间：2012-11-30T03:45:17.987
> 
> 标签：java, unit-testing, junit, refactoring, mockito

我有一个类初始化为私有类变量

```
public class MyClass{

    private BusinessObject businessObject = BusinessObjectGenerator.getBusinessObject();

    public MyClass(){

    }

    public Object myMethodToTest(){
    return businessObject.getObject();
    }
} 
```

现在，我正在尝试进行单元测试，`myMethodToTest`我想发送一个模拟对象来代替`businessObject`. 我使用 mockito 进行模拟并`spy(new MyClass())`用于部分模拟，但在模拟 get 调用时遇到了麻烦`businessObject`。1.是否可以模拟对businessObject的调用？如果有怎么办？2.在编写单元测试时如何重构此代码以提供帮助。任何指向这一点的资源都会有很大帮助。

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-30T04:10:52.110

要正确重构此代码，您需要：

```
private BusinessObject businessObject;

public void setBusinessObject(BusinessObject instance) {
    businessObject = instance;
}

private BusinessObject getBusinessObject() {
    if (businessObject == null) {
        // represents existing implementation in original code sample
        businessObject = BusinessObjectGenerator.getBusinessObject();
    }
    return businessObject;
}

/* rest of your code */ 
```

现在您可以在测试站点自己将您的模拟注入到课程中。

我建议使用像[Guice](https://code.google.com/p/google-guice/)这样的框架的依赖注入来做到这一点。这将是值得您花时间的。

# php - 如何以 DD/MM/YY 格式按日期输出数据库条目？

> ID：13638715
> 
> 赞同：0
> 
> 时间：2012-11-30T03:45:21.013
> 
> 标签：php, mysql, sql-order-by

我正在使用以下代码输出数据库条目：

```
<div id="main_area">
<div  id="container">
<div id="php_container" role="main">
<?php
include('connect_it.php');
$sqlget= "SELECT * FROM dbtablename";
$sqldata= mysqli_query ($dbcon,$sqlget) or die('this is an error');
while ($row = mysqli_fetch_array($sqldata, MYSQLI_ASSOC)) {
echo $row[ 'li' ] ;
}
?>
</div>
</div>
</div> 
```

在页面加载时，我希望数据库条目按其日期（从最近到最近）排序，该日期存储在名为“已添加”的 mysql 字段中，格式为 DD/MM/YY。

我不确定它是否可以完成，但作为另一种选择，日期在定义的范围内，`<span id="date">date: 27/11/11</span>`所以也许这个范围可以用来订购数据？

所以我的问题是，我怎样才能使初始输出按日期从最近到最近？

我试过了：

```
$sqlget= "SELECT * FROM dbtablename ORDER BY added ASC"; 
```

但我得到了意想不到的结果。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T03:53:32.627

如果您添加的列是 DATE、DATETIME 或 TIMESTAMP 类型，您可以像这样使用 DATE_FORMAT，

```
$sqlget= "SELECT *, DATE_FORMAT(added,'%d/%m/%y') as addedFormated FROM dbtablename ORDER BY added ASC"; 
```

见，[https://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_date-format](https://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_date-format)

否则，如果它是一个字符串尝试（虽然它确实应该是一个 DATE 类型），

```
$sqlget= "SELECT *, STR_TO_DATE(added,'%d/%m/%y') as addedFormated FROM dbtablename ORDER BY STR_TO_DATE(added,'%d/%m/%y') ASC"; 
```

[https://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_str-to-date](https://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_str-to-date)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-30T03:58:13.233

首先是一些小事情（还有更多），`<span id="date">...</span>`因为 id 属性应该是唯一的，所以无效，请`<span class="date">...</span>`改用。浏览器会渲染它，甚至在大多数情况下都能正确渲染它，但不是正确使用“id”属性。

您需要选择查询中的所有列吗？如果没有，请仅选择您需要的那些。

您想要的查询是：

```
SELECT * FROM dbtablename ORDER BY added DESC 
```

但这将选择所有行和所有列。现在是棘手的部分。您说您的数据以“dd/mm/yyy”格式存储，因此此查询将不起作用，因为每年每月大约有 30 天。您需要使用`datetime`列类型，它将以`yyyy-mm-dd 00:00:00`格式存储您的日期数据。如您所见，这将纠正您的所有问题。

或者，正如其他人所说，用于`STR_TO_DATE(added,'%d/%m/%y')`提取数据。

然后，在您提取的数据中，在 PHP 中，使用（`$var`您的日期值在哪里）：

```
echo date('d/m/y',strtotime($var)); 
```

希望有帮助。

# java - 单击按钮时显示图像

> ID：13638716
> 
> 赞同：0
> 
> 时间：2012-11-30T03:45:33.293
> 
> 标签：java, image, swing, jbutton

我正在尝试`JButton`在 Netbeans 中编写 a 代码，并且我想在单击按钮时显示本地磁盘中的图像。此按钮位于面板内。

单击按钮时如何显示图像？

# forms - PDF Adob e Cycle 中的动态控件

> ID：13638719
> 
> 赞同：0
> 
> 时间：2012-11-30T03:46:00.627
> 
> 标签：forms, pdf, livecycle

有谁知道如何在 PDF 中添加控件（例如：字段）？我正在使用 Adob​​e LiveCycle ES2；需要那段 JavaScript....

谢谢你们 -

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T23:28:55.180

我之前尝试过做类似的事情，但从来没有找到在表单上动态创建对象的方法。
您可以使用 addInstance 命令添加新表单的实例，并且可以向表中添加其他行，但除此之外，我发现唯一可行的方法是从工具箱中添加对象，然后显示/隐藏他们。这确实意味着您正在向表单添加其他对象，但如果使用正确，这对文件大小并没有太大影响，但它确实涉及额外的编码。

# javascript - 自动刷新 Google Apps 脚本 webapp UI？

> ID：13638721
> 
> 赞同：0
> 
> 时间：2012-11-30T03:46:28.483
> 
> 标签：javascript, web-applications, google-apps-script

我使用 Google Apps Scripts 创建了一个简单的 webapp。UI 仅显示几个在 FusionTable 中持续更新的数字。一个定制的数据采集系统在我家本地运行，每分钟向 FusionTable 发送新的结果。我希望每隔一分钟更新我的 GAS webapp 上的 UI，以便显示新数字。

通过运行时间驱动程序触发器定期从 FusionTable 中获取数据并将数字存储在我的脚本自己的 ScriptDb 中，我解决了一半的问题。因此，这可以很好地将我的数据放在正确的附近。但我仍然看不到如何使用新数据定期更新我的 UI 中的文本框。

到目前为止，我已经在 UI 上手动配置了一个刷新按钮，用户可以单击该按钮以使用 ScriptDb 中存储的最新数字更新显示。我是如此接近，我可以品尝它！

有人有想法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-30T07:54:30.033

您可以使用该`UiInstance.addTimer`方法进行自动刷新，但它没有记录在案并且可能不受支持。

它的语法是`UiInstance.addTimer( ServerHandler , interval);`

请参阅下面的示例代码。

```
function doGet(e) {

  var app = UiApp.createApplication();

  app.add(app.createLabel(new Date()).setId("label"));

  app.addTimer(app.createServerHandler("update") , 1000);

  return app;

}

function update(e){

  var app = UiApp.getActiveApplication();

  app.getElementById("label").setText(new Date());

  app.addTimer(app.createServerHandler("update") , 1000);

  return app;

} 
```

可以在[此处](https://script.google.com/macros/s/AKfycbwdWnOawaCKZk85ZIBpm5DPupcdby3kn-PeOkqj5dxBUXUhmTQ/exec)找到示例应用程序。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-05T14:12:39.507

使用电子表格进行显示。他们自动更新。

Stackoverflow，这不是感谢，而是解决方案，而是为您：

1.  制作电子表格
2.  添加发布服务
3.  有服务更新电子表格
4.  观看电子表格

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-30T06:24:11.413

不幸的是，Google Apps 脚本还没有一个计时器工具来频繁更新 UI。但是，我不久前写了一个 hack，可以在旧的 Apps 脚本论坛中找到 [http://productforums.google.com/forum/#!topic/apps-script/2pqhh_eTIvQ](http://productforums.google.com/forum/#!topic/apps-script/2pqhh_eTIvQ)

您可以在 stackoverflow 中进行搜索，但基本前提保持不变，即您可以利用这样一个事实，即您可以以编程方式更改复选框的值并触发其更改处理程序。

# fortify - 加强自定义规则以检查是否调用了单例类的方法

> ID：13638722
> 
> 赞同：1
> 
> 时间：2012-11-30T03:46:49.383
> 
> 标签：fortify

加强自定义规则以检查是否调用了单例类的方法。此规则会引发警告问题，例如，如果有任何调用

```
com.abc.UserLookupHome.getInstance().findUserById(String id); 
```

如果您能以任何方式帮助我，我们将不胜感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T16:57:12.590

这是一个可能适合您需求的语义规则：

```
<?xml version="1.0" encoding="UTF-8"?>
<RulePack xmlns="xmlns://www.fortifysoftware.com/schema/rules">
  <RulePackID>D82118B1-BBAE-4047-9066-5FC821E16456</RulePackID>
  <SKU>SKU-Singleton-Method</SKU>
  <Name><![CDATA[SKU-Singleton-Method]]></Name>
  <Version>1.0</Version>
  <Description><![CDATA[SKU-Singleton-Method]]></Description>
  <Rules version="3.14">
    <RuleDefinitions>
      <SemanticRule formatVersion="3.14" language="java">
        <MetaInfo>
          <Group name="Accuracy">5.0</Group>
          <Group name="Impact">5.0</Group>
          <Group name="RemediationEffort">1.0</Group>
          <Group name="Probability">5.0</Group>
        </MetaInfo>
        <RuleID>CE6FE84B-25A2-4EAC-AFA7-F40C601EEACD</RuleID>
        <VulnCategory>Singleton Method Call</VulnCategory>
        <DefaultSeverity>4.0</DefaultSeverity>
        <Description/>
        <Type>default</Type>
        <FunctionIdentifier>
          <NamespaceName>
            <Pattern>com.abc</Pattern>
          </NamespaceName>
          <ClassName>
            <Pattern>UserLookupHome</Pattern>
          </ClassName>
          <FunctionName>
            <Pattern>findUserById</Pattern>
          </FunctionName>
          <ApplyTo implements="true" overrides="true" extends="true"/>
        </FunctionIdentifier>
      </SemanticRule>
    </RuleDefinitions>
  </Rules>
</RulePack> 
```

# android - 在 XML 中查看 AppWidgetProvider

> ID：13638723
> 
> 赞同：0
> 
> 时间：2012-11-30T03:46:53.437
> 
> 标签：android, xml, layout

我有一个 XML 文件布局，我想在其中添加一条水平线。为此，我添加了以下内容：

```
<View
    android:layout_width="match_parent"
    android:layout_height="1dp"
    android:background="@android:color/black" /> 
```

不幸的是，这个布局被 AppWidgetProvider 使用，我的 apk 崩溃了以下错误：

```
W/AppWidgetHostView(  517): updateAppWidget couldn't find any view, using error view
W/AppWidgetHostView(  517): android.view.InflateException: Binary XML file line #25: Error inflating class android.view.View 
```

从那里我不知道如何解决它。我想让我的线路出现并出现在我的 XML 中。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T04:58:53.527

用这个

```
 <TextView
    android:layout_width="match_parent"
    android:layout_height="1dp"
    android:background="@android:color/black" /> 
```

# c++ - 如何调试加载共享库

> ID：13638728
> 
> 赞同：5
> 
> 时间：2012-11-30T03:47:53.313
> 
> 标签：c++, c, debugging, gdb, remote-debugging

我有一个使用 uclibc 在 MIPS CPU 上运行的多进程程序，它是用 gcc 4.5.3 编译的。其中一个进程（名称为“tv”）需要与一个共享库（libtest.so）链接，该库也是由我编写的。“tv”进程是用 C++ 编写的，而 libtest.so 是用 C 编写的。

我还从 libtest.so 中转储了 elf 头文件，它同时设置了 PIC 和 CPIC 标志，所以我认为库的创建是可以的。

当我尝试运行该程序时，除了“tv”进程之外，所有进程都可以正常启动。没有错误信息。当我使用 ps 检查它的状态时，它已经变成了一个僵尸进程。

我试过以下

1.  如果我从链接过程中删除 libtest.so，并删除对 libtest.so 的任何引用，则“tv”进程可以毫无问题地运行。

2.  如果我删除了对 libtest.so 的任何引用，但将 libtest.so 保留在链接过程中，“tv”进程仍然不会运行。

3.  我尝试使用 LD_DEBUG=all 进行调试，但它在我的板上不起作用，因为没有有效的输出。

所以我猜当 ld 在“tv”进程启动时尝试加载 libtest.so 时出现了问题。但是不知道怎么调试？我应该如何确定 libtest.so 的哪一部分导致了问题？

欢迎任何建议。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T15:16:58.530

You have error in load process. So write simplest application which loads your library and unloads it immediatelly and debug it.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T12:30:37.300

确保这与错过作为 C 函数调用的 API 的 extern C 声明无关。

# javascript - jQuery 函数和 Javascript 函数不能一起工作

> ID：13638729
> 
> 赞同：0
> 
> 时间：2012-11-30T03:48:09.007
> 
> 标签：javascript, jquery, validation, colorbox

我正在尝试使用其他一些 Javascript 函数运行 jQuery 函数。我想我没有正确理解语法。我有一个在页面加载时打开的颜色框，其中包含一个表单。提交表单后，我尝试先运行验证，然后如果成功运行关闭 Colorbox 并验证父窗口的 jQuery 函数。这就是我现在所处的位置（顺便说一句，我一直在这个圈子里。我已经能够让 jQuery 函数工作，我已经让验证函数工作但我已经从来没有让他们一起工作。如果我偏离了基础，我深表歉意，但我认为自从我尝试一些新事物以来我已经偏离了方向）：

刚试过这个：

```
window.echeck(str) = function {

    var at="@"
    var dot="."
    var lat=str.indexOf(at)
    var lstr=str.length
    var ldot=str.indexOf(dot)
    if (str.indexOf(at)==-1){
       alert("Invalid E-mail ID")
       return false
    }

    if (str.indexOf(at)==-1 || str.indexOf(at)==0 || str.indexOf(at)==lstr){
       alert("Invalid E-mail ID")
       return false
    }

    if (str.indexOf(dot)==-1 || str.indexOf(dot)==0 || str.indexOf(dot)==lstr){
        alert("Invalid E-mail ID")
        return false
    }

     if (str.indexOf(at,(lat+1))!=-1){
        alert("Invalid E-mail ID")
        return false
     }

     if (str.substring(lat-1,lat)==dot || str.substring(lat+1,lat+2)==dot){
        alert("Invalid E-mail ID")
        return false
     }

     if (str.indexOf(dot,(lat+2))==-1){
        alert("Invalid E-mail ID")
        return false
     }

     if (str.indexOf(" ")!=-1){
        alert("Invalid E-mail ID")
        return false
     }

     return true                    
}

window.ValidateForm() = function{
var emailID=document.MailingList.emailaddress

if ((emailID.value==null)||(emailID.value=="")){
    alert("Please Enter your Email ID")
    emailID.focus()
    return false
}
if (echeck(emailID.value)==false){
    emailID.value=""
    emailID.focus()
    return false
}
return true
}

$(document).ready(function() {  
    $('#submitbutton').live('click', function(e) {     
        ValidateForm();
        parent.$.fn.colorbox.close(); 
        parent.location.href = "/SearchResults.asp?Cat=1854";
    });
}); 
```

我没有执行任何功能。

当我删除 ValidateForm(); 从 jQuery 和当我把 javascript 函数的语法放回`function ValidateForm();`而不是`window.ValidateForm = function()`jQuery 作品时，当然其他 javascript 函数没有。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T03:51:30.823

> 我没有在主 jQuery 函数中创建嵌套函数

您不能从`$(document).ready(function() { });`块外部引用函数，因为它是私有范围。您需要在范围之外定义一个函数，以便它可以访问——

```
$(document).ready(function() {

    // define in the global scope (window) so that it's accessible anywhere
    window.ValidateForm = function() { ... }
});

// this works
ValidateForm(); 
```

或使用`on`--连接您的事件

```
$(document).ready(function() {
    $("#theform").on("submit", ValidateForm);
}); 
```

# asp.net-mvc - ActiveDirectoryMembershipProvider 和 Forms 身份验证

> ID：13638730
> 
> 赞同：1
> 
> 时间：2012-11-30T03:48:14.670
> 
> 标签：asp.net-mvc, active-directory, asp.net-membership

我有一个使用表单身份验证的 ASP.NET MVC Web 应用程序。

我正在使用 ActiveDirectoryMembershipProvider 针对我们的域验证用户。

```
if (Membership.ValidateUser(m.Username, m.Password))
{

    FormsAuthentication.SetAuthCookie(m.Username, true);

    .... 
```

这意味着用户只有在登录时才会得到验证。

问题当然是，如果用户的密码更改，他们仍然保持登录状态。或者更糟糕的是，用户带着怨恨离开我们公司，他们仍然可以访问。

我原以为这样一个简单的用例会有一个明显的答案，但我已经坚持了一段时间了。

我可以将用户密码放入会话中，然后每次都对其进行验证，但这感觉不对。

处理此问题的建议/正确方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T04:12:09.887

典型的解决方案是在用户取消订阅服务或更改密码时强制注销。使用[此方法](http://msdn.microsoft.com/en-us/library/system.web.security.formsauthentication.signout.aspx)：

```
 FormsAuthentication.SignOut();
    FormsAuthentication.RedirectToLoginPage(); 
```

如果可以在应用程序之外（即 Active Directory）停用用户，则典型做法是依赖会话超时，并且可能会再次请求凭据以进行关键操作。如果您绝对不能在会话仍处于活动状态时允许停用的用户工作，那么是的，您必须检查每个请求的凭据。由于在应用程序中存储密码是一个非常糟糕的主意，这意味着您必须在每个请求上都要求提供凭据，这可以说是一个更糟糕的主意。

至于密码更改，通常不会修改用户的权限，因此允许他们继续工作应该是无害的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T00:57:06.787

答案是定期（每 30 分钟左右）检查 User.IsApproved 和 User.LastPasswordChangedDate 以确保用户凭据仍然有效。

为此，您需要手动创建 FormsAuthenticationTicket 和 cookie，而不是使用 FormsAuthentication.SetAuthCookie。

将验证用户的日期放在 UserData 中，并将其与 LastPasswordChangedDate 进行比较。

我已经实现了这一点，并且效果很好。

更多信息在这里

[检查 Active Directory 密码是否与 cookie 不同](https://stackoverflow.com/questions/12804625/check-if-active-directory-password-is-different-from-cookie)

# ipc - linux ipc需要锁吗？

> ID：13638731
> 
> 赞同：0
> 
> 时间：2012-11-30T03:48:34.000
> 
> 标签：ipc, contention

System V有三种ipc方式：MessageQueue、SharedMemory、Semaphore。当两个进程同时对其进行读写时，我应该使用线程锁之类的同步吗？

和 POSIX IPC？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T03:51:26.540

如果两个进程读/写 MessageQueue，则不需要额外的保护。但是如果两个进程读/写 SharedMemory，你可以使用 Semaphore 来保护。

鉴于您的问题，如果两个进程读/写它们，线程锁如何提供帮助？线程锁仅在进程内部起作用。

# javascript - Firefox 中的缓存未清除

> ID：13638734
> 
> 赞同：1
> 
> 时间：2012-11-30T03:48:44.157
> 
> 标签：javascript, firefox, caching, browser, firebug

我有一个带有一个 JS 文件的 ASPX 页面。JS 文件未在 Firefox 中更新。我已经清除了firefox的缓存。

以下是尝试但仍然获取旧 JS 文件的选项：-

1.  工具->清除缓存
2.  工具-> 选项-> 高级-> 缓存的Web 内容-> 立即清除。
3.  工具-> 清除最近的历史记录。

火狐版本：13.0.1

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-30T03:55:23.490

Ctrl + R（硬刷新）和/或向 js src 添加查询字符串，例如：

```
<script src="scripts/myjavascript.js?v=1"></script> 
```

有关此技术的更多信息： [在链接和脚本标记中将“？v=1”附加到 CSS 和 Javascript URL 有什么作用？](https://stackoverflow.com/questions/3466989/what-does-appending-v-1-to-css-and-javascript-urls-in-link-and-script-tags-do)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-30T03:52:18.370

如果您似乎无法清除缓存，您可以尝试将查询字符串添加到文件路径中。只要您添加的查询字符串在每次页面加载时通过增量或某种随机生成器进行更改，那么将无法从缓存中检索文件。所以：

```
<script type="text/javascript" src="main.js"> 
```

变成

```
<script type="text/javascript" src="main.js?randomstring"> 
```

# java - 找不到类 EqualsBuilder，但我已经包含了 commons-lang

> ID：13638735
> 
> 赞同：1
> 
> 时间：2012-11-30T03:48:45.170
> 
> 标签：java, apache-commons

我正在尝试在 apache commons 库中使用 EqualsBuilder。因此，我`commons-lang3-3.1.jar`从 apache 站点下载，并在 Eclipse 中配置了构建路径以将其添加到我的库集中。我看到它在我的库中列出，如果我点击 cmd+shift+o 它会自动添加这个导入：

```
import org.apache.commons.lang3.builder.EqualsBuilder; 
```

但是，当我运行我的应用程序并尝试使用它时，我得到：

```
Could not find class 'org.apache.commons.lang3.builder.EqualsBuilder', referenced from method com.gnychis.awmon.DeviceAbstraction.Interface.equals 
```

有什么我想念的简单的东西吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T03:49:37.697

在构建路径中只满足编译时间要求

您还需要将它添加到您的项目运行时（如果它是 web-app，请将其添加到 lib 文件夹）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-02-18T14:16:00.747

如果您使用的是 maven，请将以下依赖项添加到您的 pom.xml 文件中：

```
<dependency>
  <groupId>org.apache.commons</groupId>
  <artifactId>commons-lang3</artifactId>
  <version>3.9</version>
</dependency> 
```

或者，如果您需要“lang”依赖而不是“lang3”，请改用这个：

```
 <groupId>commons-lang</groupId>
        <artifactId>commons-lang</artifactId>
        <version>2.6</version>
    </dependency> 
```

# android - 为什么应用程序在通过 3g 下载而不是通过 WiFi 下载时会崩溃？

> ID：13638739
> 
> 赞同：1
> 
> 时间：2012-11-30T03:49:14.003
> 
> 标签：android, crash, download

出于某种原因，每次用户在使用 3g 数据时单击下载按钮，屏幕就会完全变黑，并且应用程序会请求强制关闭。

```
 private final String PATH = Environment.getExternalStorageDirectory() + "/folder";

    public void DownloadFromUrl(String fileName, String saveTo) {  
            try {
                    URL url = new URL("http://example.com/" + fileName + ".png");
                    File file = new File(fileName + ".png");

                    long startTime = System.currentTimeMillis();

                    URLConnection urlconnection = url.openConnection();

                    InputStream iS = urlconnection.getInputStream();
                    BufferedInputStream bis = new BufferedInputStream(iS);

                    ByteArrayBuffer baf = new ByteArrayBuffer(50);
                    int current = 0;
                    while ((current = bis.read()) != -1) {
                            baf.append((byte) current);
                    }

                    FileOutputStream fos = new FileOutputStream(PATH + saveTo);
                    fos.write(baf.toByteArray());
                    fos.close();
                    Toast t= Toast.makeText(getApplicationContext(), "Downloaded '" + saveTo + "' to '" + PATH + "'.", Toast.LENGTH_SHORT);
                    t.show();
            } catch (IOException e) {
                    Log.d("ImageManager", "Error: " + e);
            }

    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T03:52:59.143

因为您正在使用长时间运行的操作阻塞 UI 线程。

相反，请尝试在后台线程、[Handler](http://developer.android.com/reference/android/os/Handler.html)、[Service](http://developer.android.com/reference/android/app/Service.html)、[IntentService](http://developer.android.com/reference/android/app/IntentService.html)、[AsyncTask](http://developer.android.com/reference/android/os/AsyncTask.html)或其他线程中发出请求，这样 UI 线程就不会卡住。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-30T04:13:45.800

这里的优秀教程：[http ://android-developers.blogspot.com/2010/07/multithreading-for-performance.html](http://android-developers.blogspot.com/2010/07/multithreading-for-performance.html)

[此外，从 google android api](http://developer.android.com/reference/android/os/AsyncTask.html)中查看ASYNC作为@Robert 建议的选项：

```
private class DownloadFilesTask extends AsyncTask<URL, Integer, Long> {
     protected Long doInBackground(URL... urls) {
         int count = urls.length;
         long totalSize = 0;
         for (int i = 0; i < count; i++) {
             totalSize += Downloader.downloadFile(urls[i]);
             publishProgress((int) ((i / (float) count) * 100));
             // Escape early if cancel() is called
             if (isCancelled()) break;
         }
         return totalSize;
     }

     protected void onProgressUpdate(Integer... progress) {
         setProgressPercent(progress[0]);
     }

     protected void onPostExecute(Long result) {
         showDialog("Downloaded " + result + " bytes");
     }
 } 
```

# language-agnostic - 告诉数组的 OpenMP 线程部分是只读的

> ID：13638740
> 
> 赞同：0
> 
> 时间：2012-11-30T03:49:21.893
> 
> 标签：language-agnostic, openmp

这是在 F90 中，但问题适用于任何支持 OpenMP 的语言。为需要多个存储阵列进行时间集成的模拟代码构建数据的典型方法是（目前为二维）：

```
REAL, DIMENSION(imax,jmax,n_sub_timesteps) :: vars 
```

然后将使用以下内容进行更新：

```
DO J = 1, jmax
  DO I = 1, imax
    vars(I,J,2) = func(vars(:,:,1))
  END DO
END DO 
```

根据我的经验，OpenMP 实际上不会并行化这些循环，因为它认为`vars`不是线程安全的。但对程序员来说，显然是这样。

让我们假设进一步的实际情况，使`vars`线程本地化太昂贵而无法将数据复制到其中。

那么，有没有办法温和地暗示（又名强制）OpenMP 不锁定`vars`，因为它可能无法确定没有线程依赖问题但实际上没有？我知道有办法告诉它某些东西不是线程安全的并且需要锁定，但是有没有办法在不为每个线程制作副本的情况下指定逆向？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-30T10:56:41.937

看起来您将 OpenMP 误认为是自动并行化。我不知道任何执行数据锁定的 OpenMP 实现，除非通过引入部分或语句（或在带有子句的并行区域的末尾）**明确告知。**OpenMP 编译器**不会**检查您的代码是否存在可能的数据依赖关系，也不会阻止您并行运行 - 这完全由您决定。如果您想进行不受保护的并发访问，您可以这样做，并且没有支持 OpenMP 的编译器会阻止您这样做。以下代码将始终生成一个并行区域，并将外部循环分配给团队中的线程：`CRITICAL``ATOMIC``REDUCTION`

 **```
!$OMP PARALLEL DO PRIVATE(I)
DO J = 1, jmax
  DO I = 1, imax
    vars(I,J,2) = func(vars(:,:,1))
  END DO
END DO
!$OMP END PARALLEL DO 
```

另一方面，大多数编译器中的内置自动并行器非常保守和谨慎，通常不会在没有程序员明确提示的情况下并行化像您这样的案例。这些提示通常采用编译器特定指令的形式（在 Fortran 中格式化为注释或在 C/C++ 中格式化为 pragma）。例如，英特尔 Fortran 支持`!DEC$ PARALLEL`提示它忽略指令后循环中假定的数据依赖关系的指令：

```
!DEC$ PARALLEL
DO J = 1, jmax
  DO I = 1, imax
    vars(I,J,2) = func(vars(:,:,1))
  END DO
END DO 
```

许多编译器重用其 OpenMP 实现和运行时库以实现自动并行化功能，因此生成的可执行文件的工作通常由 OpenMP 环境变量（如`OMP_NUM_THREADS`.

如果您的并行 OpenMP 程序运行速度比预期慢，还有许多其他原因，主要与错误共享、缓存垃圾、TLB 垃圾、内存带宽限制、NUMA 系统上的非本地内存访问、使用非临时加载/存储共享变量等，因此看起来 OpenMP 正在执行自动数据锁定，但实际上并没有。**

# python - 如何将多个元组中的第一个元素作为字典中的键返回

> ID：13638748
> 
> 赞同：1
> 
> 时间：2012-11-30T03:50:29.087
> 
> 标签：python

例如，如果

```
a = {('a','b','c'):2, ('b','c','d'):3} 
```

我只想返回`'a','b'`。

我试过了：

```
for key in a:

    return key[0] 
```

但它只返回`'a'`。

是否有一种不使用 lambda 或计数器或类似的东西（这是 python 的基础课程）找到第一个元素的正确方法。所以，没有其他输入程序。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-30T03:52:54.027

该函数（以及因此您的`for`循环）一旦命中就结束`return`。您应该将值存储在列表中，然后返回。就像是：

```
def getFirstElems(dic):
    firstElems = []
    for key in dic:
        firstElems.append(key[0])
    return firstElems 
```

然后，如果您像这样运行该功能：

```
a = {('a','b','c'):2, ('b','c','d'):3}
elem1, elem2 = getFirstElems(a)
print "elem1:", elem1
print "elem2:", elem2 
```

你得到这个输出：

```
elem1: a
elem2: b 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-30T03:54:51.687

你想要这样的东西吗

```
In [4]: a = {('a','b','c'):2, ('b','c','d'):3}

In [5]: [key[0] for key in a.keys()]
Out[5]: ['a', 'b'] 
```

您的代码的问题是`return`声明...您应该在返回之前保留所有结果...

如果您每次都想要单独的元素可以使用`generators`

```
In [19]: def mygenerator():
   ....:     a = {('a','b','c'):2, ('b','c','d'):3}
   ....:     for k in a.keys():
   ....:         yield k[0]
   ....:

In [20]: mg = mygenerator()

In [21]: print(mg)
<generator object mygenerator at 0x035FA148>

In [22]: for i in mg:
   ....:     print i
   ....:
a
b 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-11-30T03:53:49.683

据我所知，您想遍历字典的键。尝试

```
for k in a.keys(): 
```

# asp.net-mvc-4 - 带有 UrlParameter.Optional 的 MVC 4 路由需要参数

> ID：13638750
> 
> 赞同：0
> 
> 时间：2012-11-30T03:50:56.777
> 
> 标签：asp.net-mvc-4, asp.net-mvc-routing

在我的 MVC 解决方案中，我有不同的区域。该地区的注册之一是下面显示的类。

```
 public class CommercialAreaRegistration : AreaRegistration
    {
        public override string AreaName
        {
            get
            {
                return "Commercial";
            }
        }

        public override void RegisterArea(AreaRegistrationContext context)
        {

            context.MapRoute(
                "Commercial_default",
                "Commercial/{controller}/{action}/{id}",
                new {  action = "Index", id = UrlParameter.Optional }
            );
        }
    } 
```

基于此，url *hxxp://localhost:63363/Commercial/VesselManagement*应该调用 VesselManagement 控制器的 Index 操作方法。它确实偶尔会按预期调用。但是现在它不执行 action 方法。

但是，如果我将 Url 键入为*hxxp://localhost:63363/Commercial/VesselManagement/index/abc*，则会调用 Action 方法 Index 并传递参数 abs。

不仅对于此操作方法，而且对于整个应用程序中的所有操作方法，都必须以这种模式调用 url。可能是什么问题。提前感谢大家的帮助。

## **注意：**我使用了 hxxp insted of http

* * *

全球.asx

```
 protected void Application_Start()
        {
            AreaRegistration.RegisterAllAreas();

            FilterConfig.RegisterGlobalFilters(GlobalFilters.Filters);
            RouteConfig.RegisterRoutes(RouteTable.Routes);
            BundleConfig.RegisterBundles(BundleTable.Bundles);

            //RouteDebug.RouteDebugger.RewriteRoutesForTesting(RouteTable.Routes);
            //Configure FV to use StructureMap
            var factory = new StructureMapValidatorFactory();

            //Tell MVC to use FV for validation
            ModelValidatorProviders.Providers.Add(new FluentValidationModelValidatorProvider(factory));
            DataAnnotationsModelValidatorProvider.AddImplicitRequiredAttributeForValueTypes = false;
        }
    } 
```

* * *

VesselManagement Index() 操作

```
public ActionResult Index()
        {

            InitialData();
            return View();
        } 
```

**注意：**刚才我注意到 index 不带任何参数，但我知道这会影响路由。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T04:17:55.403

我真的很抱歉这个问题是由于我的一位同事在创建区域时犯了一个错误，并且对于区域注册，他错误地提到了路由规则。

```
 public class SharedAreaRegistration : AreaRegistration
    {
        public override string AreaName
        {
            get
            {
                return "Shared";
            }
        }

        public override void RegisterArea(AreaRegistrationContext context)
        {
            context.MapRoute(
                "Shared_default",
                "{controller}/{action}/{id}", //<---- This made the issue with routing

                new { action = "Index", id = UrlParameter.Optional }
            );
        }
    } 
```

我是如何找出错误的，我将解释以下步骤，以便对您有所帮助。

首先我安装了[路由调试器](http://nuget.org/packages/routedebugger)

然后在 Global.asx 中写了 Application_Error 来处理错误。如果不这样写，Route Debugger 将无法找到路由。

```
protected void Application_Error(object sender, EventArgs e)
        {
            Exception exception = Server.GetLastError();
            // Log the exception.

            //ILogger logger = Container.Resolve<ILogger>();
           // logger.Error(exception);

            Response.Clear();

            HttpException httpException = exception as HttpException;

            RouteData routeData = new RouteData();
            routeData.Values.Add("controller", "Error");

            if (httpException == null)
            {
                routeData.Values.Add("action", "Index");
            }
            else //It's an Http Exception, Let's handle it.
            {
                switch (httpException.GetHttpCode())
                {
                    case 404:
                        // Page not found.
                        routeData.Values.Add("action", "HttpError404");
                        break;
                    case 500:
                        // Server error.
                        routeData.Values.Add("action", "HttpError500");
                        break;

                    // Here you can handle Views to other error codes.
                    // I choose a General error template  
                    default:
                        routeData.Values.Add("action", "General");
                        break;
                }
            }

            // Pass exception details to the target error View.
            routeData.Values.Add("error", exception);

            // Clear the error on server.
            Server.ClearError();

            // Avoid IIS7 getting in the middle
            Response.TrySkipIisCustomErrors = true;

            // Call target Controller and pass the routeData.
            //IController errorController = new ErrorController();
            //errorController.Execute(new RequestContext(
            //     new HttpContextWrapper(Context), routeData));
        } 
```

然后我输入了 URL hxxp://localhost:63363/Commercial/VesselManagement 并且输出是 ![在此处输入图像描述](../Images/2bd2952252552b808f1bbe64b9cfe533.png)

在输出的路由数据和数据令牌中明确表示它试图在共享区域内找到商业控制器和 VesselManagement ACtion。

错误的原因是错误地指定了共享区域路由，当通过在前面添加共享来纠正时，它得到了解决。

public override void RegisterArea(AreaRegistrationContext context) { context.MapRoute( "Shared_default", "Shared/{controller}/{action}/{id}", new { action = "Index", id = UrlParameter.Optional } ); }

感谢 RouteDebugger

**注意：**路由从上到下工作，一旦找到匹配的路由，它将忽略其余的。

# java - Google oauth java 客户端获取访问令牌失败，出现“400 Bad Request {“error”：“invalid_request”}”

> ID：13638758
> 
> 赞同：3
> 
> 时间：2012-11-30T03:52:10.270
> 
> 标签：java, oauth-2.0, google-oauth

我正在使用此处显示的“Web 服务器应用程序”示例。在我的回调 servlet 中，我想检索一个访问令牌，但我无法成功地做到这一点。以下是我的代码

```
 @Override
  protected String getUserId(HttpServletRequest req) throws ServletException, IOException {
    // return user ID
      Iterator<String> iterator = req.getParameterMap().keySet().iterator();
        while (iterator.hasNext()) {
            String string = iterator.next();

            System.out.println(string+"---++--"+req.getParameter(string));
        }
        GoogleAuthorizationCodeTokenRequest newTokenRequest = new GoogleAuthorizationCodeFlow.Builder(new NetHttpTransport(), new JacksonFactory(),
                                                             "2XXXXXX7218.apps.googleusercontent.com", "KugD_XXX_7vqnGZVXXXXX1M",
                                                              Collections.singleton("https://gdata.youtube.com"))
                                                              .build().newTokenRequest(req.getParameter("code"));
        //GoogleAuth
        GoogleTokenResponse token = newTokenRequest.setRedirectUri("/").execute();
        String accessToken = token.getAccessToken();
        System.out.println("accesstoken:"+accessToken);
        return "";
  } 
```

运行此代码后，我收到以下错误

```
com.google.api.client.auth.oauth2.TokenResponseException: 400 Bad Request
{
  "error" : "invalid_request"
} 
```

简而言之，我得到“代码”参数（请求代码）我不确定如何将其转换为访问令牌。我已经看到 [Google API - 来自 Oauth2 的令牌请求返回“invalid_request”](https://stackoverflow.com/questions/10799947/google-api-request-for-token-from-oauth2-returns-invalid-request) [Google OAuth 2：令牌请求时的 response_type 错误，](https://stackoverflow.com/questions/11696526/google-oauth-2-response-type-error-on-token-request)但我的代码中没有多少可以使用

**编辑**

google API 对我不起作用，所以我在不使用任何库的情况下编写了以下代码

```
 URL url = new URL("https://accounts.google.com/o/oauth2/token");
    connection = (HttpURLConnection) url.openConnection();
    String urlParameters = "code=" + req.getParameter("code") + "&client_id=29852.apps.googleusercontent.com&client_secret=KugD_LVi_7vqnssssxxxNRBz1M"+
            "&redirect_uri=https://flixomnia.com/oauth2callback&grant_type=authorization_code&scope=https://gdata.youtube.com&response_type=token";
    connection.setDoOutput(true);
    connection.setDoInput(true);
    connection.setInstanceFollowRedirects(true);
    connection.setRequestMethod("POST");
    connection.setRequestProperty("Content-Type", "application/x-www-form-urlencoded");
    connection.setRequestProperty("Authorization", "Bearer 4/q3Xh_pJI458XXXXXXXkh-lxe3-8.cmaD6o7V5BkQXE-XXXXX-edgI");
    connection.setRequestProperty("Content-Length", "" + Integer.toString(urlParameters.getBytes().length));
    connection.setRequestProperty("X-GData-Key", "key=AI39siXXXXXXM7tyHBvXEM1lLcORetit6QSArQ3sjelBxXXXXXXtgLSPdZPxvsF_vkntOQMnAEYAuVFqhN7oUw");
    connection.setRequestProperty("GData-Version", "2");

    connection.setUseCaches(false);
    //com.google.gdata.client.youtube.YouTubeService service = new com.google.gdata.client.youtube.YouTubeService("","");
    //YouTubeMediaGroup g = new YouTubeMediaGroup();

    DataOutputStream wr = new DataOutputStream(connection.getOutputStream());

    wr.writeBytes(urlParameters);
    wr.flush();
    InputStream inputStream = connection.getInputStream();
    byte[] b = new byte[1024];
    while (inputStream.read(b) != -1) {
        System.out.print(new String(b));

    }
    System.out.println("");
    wr.close();
    connection.disconnect(); 
```

但我仍然收到以下错误

```
 {  "error" : "invalid_request"}
java.io.IOException: Server returned HTTP response code: 400 for URL: https://accounts.google.com/o/oauth2/token
    at sun.net.www.protocol.http.HttpURLConnection.getInputStream(HttpURLConnection.java:1615)
    at sun.net.www.protocol.https.HttpsURLConnectionImpl.getInputStream(HttpsURLConnectionImpl.java:254)
    at com.broadcastr.servlets.YouTubeCallbackService.getUserId(YouTubeCallbackService.java:168)
    at com.google.api.client.extensions.servlet.auth.oauth2.AbstractAuthorizationCodeCallbackServlet.doGet(AbstractAuthorizationCodeCallbackServlet.java:130)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:621)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:225)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:123)
    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:168)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:98)
    at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:927)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
    at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1001)
    at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:579)
    at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:312)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
    at java.lang.Thread.run(Thread.java:722) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-11T22:19:22.310

1.  在`setRedirectUri`上面初始代码中获取访问令牌的方法中，`redirect_uri`没有正确设置。`redirect_uri`应使用在客户端注册时指定的。

2.  在 EDIT 代码中，在向访问令牌端点发送所需参数的同时，`response_type`还会随请求一起发送不受支持的参数。删除`response_type`参数应该可以解决目的。

    此外，根据[OAuth2 RFC 草案](http://tools.ietf.org/id/draft-ietf-oauth-v2-31.html#rfc.section.5.2)`invalid_request`，如果请求使用多种机制对客户端进行身份验证，访问令牌端点也可能出错。因此，将`Authorization`标头删除`URLConnection`也应该解决目的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-10-09T06:33:03.360

我也浪费了我 2 天的时间来解决这个问题。我无法使用`HttpUrlConnection`. `HttpClient`为我工作。

以下是工作代码：

1) 传递的值：

```
String url = "https://accounts.google.com/o/oauth2/token";
List<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>(1);
nameValuePairs.add(new BasicNameValuePair("grant_type", "authorization_code"));

nameValuePairs.add(new BasicNameValuePair("client_id",client_id));
nameValuePairs.add(new BasicNameValuePair("client_secret", client_secret));
nameValuePairs.add(new BasicNameValuePair("redirect_uri", "http://example.com/bin/showcase/servlet/googlecallback"));
nameValuePairs.add(new BasicNameValuePair("code", code));

StringBuffer postResult =  sendPost(url, nameValuePairs); 
```

2) 方法

```
private StringBuffer sendPost(String url, List<NameValuePair> postParams) 
        throws Exception {

    HttpPost post = new HttpPost(url);
    HttpClient client = new DefaultHttpClient();

    // add header
    post.setHeader("Host", "accounts.google.com");
    post.setHeader("Accept", 
            "text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8");
    post.setHeader("Accept-Language", "en-US,en;q=0.5");
    post.setHeader("Connection", "keep-alive");
    post.setHeader("Referer", "https://accounts.google.com/o/oauth2/token");
    post.setHeader("Content-Type", "application/x-www-form-urlencoded");

    post.setEntity(new UrlEncodedFormEntity(postParams));

    HttpResponse response = client.execute(post);

    int responseCode = response.getStatusLine().getStatusCode();

    BufferedReader rd = new BufferedReader(
            new InputStreamReader(response.getEntity().getContent()));

    StringBuffer result = new StringBuffer();
    String line = "";`enter code here`
    while ((line = rd.readLine()) != null) {
        result.append(line);
    }
    return result;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-30T23:44:07.010

上面的 Richard 是对的，在 setRedirectUri 中，您需要使用您在注册应用程序时指定的完整重定向 URI。这不应该是相对的，而是绝对的。（希望是https）

达韦普

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-11T02:19:48.647

在让 Java 应用程序和 Android 应用程序访问我的 Oauth 服务器时，我发现以下两个库很有用 - 但它们的用途不同 - 也许一个比另一个更适合您的需求。

1.  google-oauth-java-client 在 DailyMotion 中使用。 [https://code.google.com/p/google-oauth-java-client/](https://code.google.com/p/google-oauth-java-client/) , [http://samples.google-oauth-java-client.googlecode.com/hg/dailymotion-cmdline-sample/instructions.html](http://samples.google-oauth-java-client.googlecode.com/hg/dailymotion-cmdline-sample/instructions.html) 此库/示例代码允许您从 Java 访问您自己的 OAuth2 服务器。

2.  google-api-java-client 用在：Android中的Auth2流（Latitude）[http://blog.doityourselfandroid.com/2011/08/06/oauth-2-0-flow-android/](http://blog.doityourselfandroid.com/2011/08/06/oauth-2-0-flow-android/) 这个库/示例代码具体用于通过 OAuth2 访问 Google API。

我不确定您要解决哪个问题，但是这两个中的一个应该会有所帮助。两者都经历了将“代码”交换为“authToken”的过程，但方式略有不同。RB

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-08-07T14:04:08.337

请从请求 URL 中删除“&response_type=token”参数，这是 EDIT 代码中的问题，您的问题将得到解决。

# asp.net-mvc - 如何在 IIS7 上托管 nop commerce 2.65？

> ID：13638759
> 
> 赞同：0
> 
> 时间：2012-11-30T03:52:14.960
> 
> 标签：asp.net-mvc, iis-7, nopcommerce

我下载了 nopCommerce 2.65。谁能告诉我在 Win7 上的 IIS 上托管该网站的程序？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T05:46:22.553

Nopcommerce 在根文件夹中有一个部署脚本。执行此脚本，它将创建一个“可部署”文件夹。从那里您需要做的就是在 IIS 中创建一个站点并将可部署文件移动到该站点的虚拟目录

# algorithm - 真正大数据的不相交集

> ID：13638769
> 
> 赞同：2
> 
> 时间：2012-11-30T03:53:46.107
> 
> 标签：algorithm, bigdata, disjoint-sets, union-find

对于真正的大数据（例如超过 2^32 个元素和超过 2^32 对联合），是否有任何增强的不相交集算法？

显然最大的问题是我无法制作这么大的数组，所以我想知道是否有更好的算法或更好的数据结构来完成我的任务？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T18:02:04.313

处理真正大数据的一种方法是在外部存储器中运行。[http://terrain.cs.duke.edu/pubs/union-find.pdf](http://terrain.cs.duke.edu/pubs/union-find.pdf) (I/O-Efficient Batched Union-Find and Its Applications to Terrain Analysis) 包含理论算法，由相当复杂的调用序列组成到其他批处理算法，以及（第 3 节）一种自包含的递归算法，它的渐近效率不高，但看起来似乎很实用。

# .net - Visual Studio 2010 中的团队项目是什么

> ID：13638771
> 
> 赞同：7
> 
> 时间：2012-11-30T03:53:47.787
> 
> 标签：.net, visual-studio-2010, team-project

我是 .Net 框架的新手，我发现很难理解 VS2010 中的所有术语和工具。当您想创建新项目时，可以选择“团队项目”。

我试图在[MSDN 论坛](http://msdn.microsoft.com/en-us/library/vstudio/ms181477.aspx)和[MSDN 杂志](http://msdn.microsoft.com/en-us/magazine/gg983486.aspx)上查找文档，但他们解释它的方式超出了我的想象。

谁能用更简单的方式向我解释

*   什么是团队项目？
*   以及如何以及何时使用它？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-30T03:58:32.193

团队项目是 Team Foundation Server 的一项功能，它是 Microsoft 在 ALM（应用程序生命周期管理）中提供的产品。如果您不使用 TFS，则不必担心。

TFS 提供：

*   源代码控制（版本控制）
*   工作项跟踪（错误、任务、要求）
*   自动化构建、测试、部署（和测试）
*   QA 实验室环境的管理
*   报告上述情况
*   协作环境

以及更多。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-30T04:00:47.877

您为 Visual Studio Team Foundation Server (TFS) 创建一个团队项目，以提供开发特定软件技术或产品的中心点。团队项目提供源代码和工作项的存储库。

请阅读更多：

[http://msdn.microsoft.com/en-us/library/vstudio/ms181477.aspx](http://msdn.microsoft.com/en-us/library/vstudio/ms181477.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-30T04:05:22.820

Visual Studio 可以与 MS Team Foundation Server 集成以进行源代码控制和 ALM。团队基础服务器将其数据组织到项目集合中，其中包含团队项目。一个团队项目可能包含许多 Visual Studio 解决方案。

在工作中，我们有一个项目集合，每个团队项目都是我们构建的完整系统，包含一个或多个解决方案。

请记住，TFS 是一个单独的产品，因此您需要一个单独的许可证才能运行它，并且安装和维护它是一种负担。

使用 TFS 有几个原因，但最重要的是能够控制多个开发人员对代码的访问。它控制签入、签出、合并和历史/版本控制。这些功能对单个开发人员也很有价值，但顾名思义，一般要点是使开发人员团队能够在系统上进行协作。

# user-interface - 在 Cygwin 中用 GTK2 编译 Vim

> ID：13638775
> 
> 赞同：0
> 
> 时间：2012-11-30T03:54:14.963
> 
> 标签：user-interface, vim, compilation, gtk, cygwin

我正在尝试在 Cygwin 上编译 Vim，以获得 Ruby 和 Python 脚本支持。

`vim.exe`--这是终端vim-编译并运行良好，但`gvim.exe`没有。问题出在 GTK+ 2 库中，但我已经安装了它们——来自 cygwin 的 setup.exe。我也尝试过使用更高版本和更低版本的 GTK。

这是配置脚本的相关部分。欢迎任何想法......

```
checking --enable-gui argument... GTK+ 2.x GUI support
checking --disable-gtktest argument... gtk test enabled
checking for GTK - version >= 2.2.0... no
checking X11/SM/SMlib.h usability... yes
checking X11/SM/SMlib.h presence... yes
checking for X11/SM/SMlib.h... yes
checking X11/xpm.h usability... yes
checking X11/xpm.h presence... yes
checking for X11/xpm.h... yes
checking X11/Sunkeysym.h usability... yes
checking X11/Sunkeysym.h presence... yes
checking for X11/Sunkeysym.h... yes
checking for XIMText in X11/Xlib.h... yes
no GUI selected; xim has been disabled 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T08:35:20.837

1.  安装所有需要的 -devel 包，包括

    *   gtk2
    *   glib2
    *   盘古
    *   攻击力
    *   开罗
    *   像素人
    *   x11
    *   libXt 开发
2.  安装`gcc4`cygwin包（解决`libffi`问题）

3.  跑

    `./configure --prefix=/usr --enable-multibyte --enable-pythoninterp --enable-gui=gtk2 --enable-rubyinterp --disable-gtktest`

    gtktest在cygwin上有问题，原因我没挖

4.  `make && make install`

# delphi - Delphi - 使用 Wininet 下载文件？

> ID：13638778
> 
> 赞同：1
> 
> 时间：2012-11-30T03:54:41.000
> 
> 标签：delphi, download, wininet

注意：此代码在 Delphi XE2 中。

我正在尝试在不使用 UrlMon.dll 的情况下下载文件。

我只想使用wininet。到目前为止，这是我想出的：

```
uses Windows, Wininet;

procedure DownloadFile(URL:String;Path:String);
Var
  InetHandle:Pointer;
  URLHandle:Pointer;
  FileHandle:Cardinal;
  ReadNext:Cardinal;
  DownloadBuffer:Pointer;
  BytesWritten:Cardinal;
begin
  InetHandle := InternetOpen(PWideChar(URL),0,0,0,0);
  URLHandle := InternetOpenUrl(InetHandle,PWideChar(URL),0,0,0,0);
  FileHandle := CreateFile(PWideChar(Path),GENERIC_WRITE,FILE_SHARE_WRITE,0,CREATE_NEW,FILE_ATTRIBUTE_NORMAL,0);
  Repeat
    InternetReadFile(URLHandle,DownloadBuffer,1024,ReadNext);
    WriteFile(FileHandle,DownloadBuffer,ReadNext,BytesWritten,0);
  Until ReadNext = 0;
  CloseHandle(FileHandle);
  InternetCloseHandle(URLHandle);
  InternetCloseHandle(InetHandle);
end; 
```

我认为问题在于我的循环和“ReadNext”。执行此代码时，它会在正确的路径中创建文件，但代码完成并且文件为 0 字节。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-30T04:27:28.760

我改进了一些你的日常工作，它对我有用：

```
procedure DownloadFile(URL: string; Path: string);
const
  BLOCK_SIZE = 1024;
var
  InetHandle: Pointer;
  URLHandle: Pointer;
  FileHandle: Cardinal;
  BytesRead: Cardinal;
  DownloadBuffer: Pointer;
  Buffer: array [1 .. BLOCK_SIZE] of byte;
  BytesWritten: Cardinal;
begin
  InetHandle := InternetOpen(PWideChar(URL), 0, 0, 0, 0);
  if not Assigned(InetHandle) then RaiseLastOSError;
  try
    URLHandle := InternetOpenUrl(InetHandle, PWideChar(URL), 0, 0, 0, 0);
    if not Assigned(URLHandle) then RaiseLastOSError;
    try
      FileHandle := CreateFile(PWideChar(Path), GENERIC_WRITE, FILE_SHARE_WRITE, 0,
        CREATE_NEW, FILE_ATTRIBUTE_NORMAL, 0);
      if FileHandle = INVALID_HANDLE_VALUE then RaiseLastOSError;
      try
        DownloadBuffer := @Buffer;
        repeat
          if (not InternetReadFile(URLHandle, DownloadBuffer, BLOCK_SIZE, BytesRead) 
             or (not WriteFile(FileHandle, DownloadBuffer^, BytesRead, BytesWritten, 0)) then
            RaiseLastOSError;
        until BytesRead = 0;
      finally
        CloseHandle(FileHandle);
      end;
    finally
      InternetCloseHandle(URLHandle);
    end;
  finally
    InternetCloseHandle(InetHandle);
  end;
end; 
```

例如一个电话：

```
 DownloadFile
    ('https://dl.dropbox.com/u/21226165/XE3StylesDemo/StylesDemoSrcXE2.7z',
    '.\StylesDemoXE2.7z'); 
```

奇迹般有效。

我所做的更改是：

*   提供缓冲区
*   检查对 WriteFile 的调用结果，如果它为 false 或写入的字节数与读取的字节数不同，则引发异常。
*   更改了变量名称。
*   命名常量
*   [编辑后] Proper Function 结果检查
*   [编辑后] 使用 try/finally 块进行资源泄漏保护

**编辑**感谢 TLama 提高对最后两点的认识。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2018-01-31T12:03:20.133

首先这是错误的。

```
InetHandle := InternetOpen(PChar(URL), 0, 0, 0, 0); 
```

需要是

```
InetHandle := InternetOpen(PChar(USERANGENT), 0, 0, 0, 0); 
```

并且在这里缺少一个 )....

```
(not InternetReadFile(URLHandle, DownloadBuffer, BLOCK_SIZE, BytesRead) ")" 
```

# python - 在 python+gtk3 中使用 vpaned 调整无边框窗口的大小

> ID：13638782
> 
> 赞同：0
> 
> 时间：2012-11-30T03:55:16.853
> 
> 标签：python, pygtk, gtk3, pygobject, borderless

我想用窗格（分隔符）对象调整无边框窗口的大小，如果您知道终端应用程序 guake 会使用 motion-notify-event

这是代码：

```
self.resizer.connect('motion-notify-event', self.on_resizer_drag)

def on_resizer_drag(self, widget, event):
    """Method that handles the resize drag. It does not actuall
    moves the main window. It just set the new window size in
    gconf.
    """
    (x, y), mod = event.device.get_state(widget.window)
    if not 'GDK_BUTTON1_MASK' in mod.value_names:
        return

    max_height = self.window.get_screen().get_height()
    percent = y / (max_height / 100)

    if percent < 1:
        percent = 1

    self.client.set_int(KEY('/general/window_height'), int(percent)) 
```

Resizer 是窗格对象，但此代码使用 pygtk (gtk2) 我正在使用带有 gtk3 event.device.get_state(window) 方法的 python-gobject 已弃用或更改。这对我不起作用，关于使用对象拖动调整窗口无边框窗口大小的任何建议或解决方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T01:37:27.537

我自己实现了Guake的代码到Gtk3。

首先连接运动通知事件，调整大小是窗格对象。

```
self.resizer.connect('motion-notify-event', self.on_resize) 
```

下一次写入调整大小事件

```
def on_resize(self, widget, event):
    if Gdk.ModifierType.BUTTON1_MASK & event.get_state() != 0:
        mouse_y = event.device.get_position()[2]
        new_height = mouse_y - self.get_position()[1]
        if new_height > 0:
            self.resize(self.get_allocation().width, new_height)
            self.show() 
```

现在你可以用装订线扩展你的窗口。

# python - Python CSV 模块，将列添加到侧面，而不是底部

> ID：13638790
> 
> 赞同：1
> 
> 时间：2012-11-30T03:56:09.047
> 
> 标签：python, csv

我是 python 新手，我需要一些帮助。我制作了一个 python 脚本，它从一个文件中获取两列并将它们复制到一个“新文件”中。但是，我不时需要向“新文件”添加列。我需要在侧面而不是底部添加列。我的脚本将它们添加到底部。有人建议使用 CSV，我读过它，但我无法将新列添加到先前列的一侧。非常感谢任何帮助。

这是我写的代码：

```
import sys
import re

filetoread = sys.argv[1]
filetowrite = sys.argv[2]

newfile = str(filetowrite) + ".txt"

openold = open(filetoread,"r")
opennew = open(newfile,"a")

rline = openold.readlines()

number = int(len(rline))
start = 0

for i in range (len(rline)) :
    if "2theta" in rline[i] :
        start = i

for line in rline[start + 1 : number] :
    words = line.split()
    word1 = words[1]
    word2 = words[2]
    opennew.write (word1 + " " + word2 + "\n")

openold.close()
opennew.close() 
```

这是我使用 CSV 编写的第二个代码：

```
import sys
import re
import csv

filetoread = sys.argv[1]
filetowrite = sys.argv[2]

newfile = str(filetowrite) + ".txt"

openold = open(filetoread,"r")

rline = openold.readlines()

number = int(len(rline))
start = 0

for i in range (len(rline)) :
    if "2theta" in rline[i] :
        start = i

words1 = []
words2 = []

for line in rline[start + 1 : number] :
    words = line.split()
    word1 = words[1]
    word2 = words[2]
    words1.append([word1])
    words2.append([word2])

with open(newfile, 'wb') as file:
    writer = csv.writer(file, delimiter= "\n")
    writer.writerow(words1)
    writer.writerow(words2) 
```

这些是输入文件的一些示例：

*   [https://dl.dropbox.com/u/63216126/file5.txt](https://dl.dropbox.com/u/63216126/file5.txt)
*   [https://dl.dropbox.com/u/63216126/file6.txt](https://dl.dropbox.com/u/63216126/file6.txt)

我的第一个脚本“几乎”工作得很好，除了它将新列写在底部并且我需要它们在前面的列旁边。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T04:37:21.517

正确的使用方法`writerow`是给它一个包含*所有*列数据的列表。

```
words.append(word1)
words.append(word2)
writer.writerow(words) 
```

# java - 在Java中绘制像素的最快方法是什么

> ID：13638793
> 
> 赞同：6
> 
> 时间：2012-11-30T03:56:36.313
> 
> 标签：java, performance, pixel, bufferedimage

我有一些代码可以在随机位置生成粒子，并以随机方向和速度移动。

通过循环的每次迭代，我移动所有粒子，并在我的 jpanel 上调用 repaint。

对于 1,000 个粒子，我每秒的速度大约为 20 到 30 帧。我计划最终拥有 100,000 到 1,000,000 个粒子。

在绘画中，如果窗口大小改变，我只会创建一个新的缓冲图像。我将像素绘制到缓冲图像，然后调用 drawImage 来显示图像。

每个粒子都是一个像素，我已经确定所有时间都在实际绘制像素上。因此，增加粒子数量将大大降低帧速率。

我试过 g.drawline(x,y,x+1,y), img.setRGB(x,y,color)，通过调用 img.getRaster().getDataBuffer().getData() 得到一个像素数组，然后设置 pixelData[y*width+x] = color.

通过这些不同的像素绘制方式，我在帧速率上只得到了很小的差异。

这是我的问题：绘制像素的最快方法是什么？缓冲图像甚至是要走的路吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T23:19:56.707

使用 img.getRaster().getDataBuffer().getData() 时，您应该在标准计算机上获得更快的帧速率。我知道这是一个事实，因为我可以以每秒 20-30 帧的速度绘制整个屏幕，并且屏幕总共有 1,000,000 个像素。我通过将渲染例程一分为二并使用两个线程来获得这种速度。我的 CPU 是 1.5GHz。

因此，我认为您可能在移动像素时出现了编码错误。请记住：创建新对象的操作比添加操作长 100 倍。另请参阅是否可以删除任何 if 语句。

另外，这可能很愚蠢，但我假设您每帧只调用一次 img.getRaster().getDataBuffer().getData() ？

在相关说明中，绘制多像素粒子自然需要很长时间。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T10:07:18.020

尝试使用[java.awt.image.VolatileImage](http://docs.oracle.com/javase/6/docs/api/java/awt/image/VolatileImage.html)。它可以在没有任何 CPU 渲染的情况下与完整的硬件加速一起使用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-04T09:50:33.917

我认为通过缓冲图像的数据缓冲区直接进行像素操作是使用标准库绘制内容的最快方法，因为您可以将图形对象开销降至最低。

但是正如 Perception 所说，如果你想显示 100'000 个或更多粒子，你应该考虑使用 OpenCl 进行 GPU 编程。

[LWJGL 用于小型且易于使用的 Java-OpenGL/CL/AL 绑定](http://www.lwjgl.org)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-05-07T19:26:18.580

我看到在设置 BufferedImage 数据的字节方面有了很大的改进。为此，您需要从 BufferedImage 中获取数据，将其转换为字节数组，设置每个字节（取决于图像的类型，字节排列会有所不同。例如：ARGB 将有一个字节用于 alpha ，一个代表红色，一个代表绿色，一个代表蓝色。一个像素将是一个由 4 个连续字节组成的块。）在[此处](https://stackoverflow.com/questions/6524196/java-get-pixel-array-from-image)阅读有关获取数据的更多信息

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2016-01-27T03:04:47.710

永远不要调用 repaint(); 那是给新手的，在你不必调用 repaint(); 的地方玩这个。在过去的两个月里，这种方法给我带来了如此多的痛苦和不适，我很难过没有人告诉我还有另一种方法。1,000,000 个粒子会很快变得昂贵，因此您可能需要考虑蒙特卡罗方法，请参阅[http://raytracey.blogspot.com/](http://raytracey.blogspot.com/)以获得更便宜的渲染选项。我不知道在坚持 20-30fps 的情况下你是否能负担得起所有这些粒子的操作，我刚刚观看了一个 10 秒的流体模拟，在 2.4ghz 6gb ram 机器上花了 3 周时间。我道歉是因为我在 BufferedImage 中的唯一经验是导入 .png 以使用 Graphics g 进行绘制。我最近参与了一个计算成本非常高的项目，并且由于时间线我无法加速我的程序，所以如果你在同一条船上，试试这个包宠物；

```
import java.awt.Color;
import java.awt.Dimension;
import java.awt.Graphics;
import java.awt.event.MouseEvent;
import java.awt.event.MouseListener;
import java.io.IOException;
import javax.swing.*;

public class pet extends JPanel implements MouseListener{
public static JFrame frame = new JFrame("frame");
public pet() throws IOException{
 setPreferredSize(new Dimension(870, 675));         //configuring panel
 addMouseListener(this);
}
public static void main(String[] args) throws IOException{
    frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    JComponent newContentPane = new pet();
    newContentPane.setOpaque(true);
    frame.setContentPane(newContentPane);
    frame.pack();
    frame.setVisible(true);
    frame.addMouseListener(new pet());
}
public void paintRectangleAtPoint(Graphics g, int x, int y){
g.setColor(Color.BLACK);
g.drawRect(x, y, 100,100);
}
public void paintStuff(Graphics g, int x, int y){
g.setColor(Color.BLACK);
g.drawRect(x, y, 100,100);
}
@Override
public void mouseClicked(MouseEvent e) {
paintStuff(frame.getGraphics(),e.getX(), e.getY());

}
@Override
public void mousePressed(MouseEvent e) {
// TODO Auto-generated method stub

}
@Override
public void mouseReleased(MouseEvent e) {
// TODO Auto-generated method stub

}
@Override
public void mouseEntered(MouseEvent e) {
// TODO Auto-generated method stub

}
@Override
public void mouseExited(MouseEvent e) {
// TODO Auto-generated method stub

}
} 
```

# jsp - 在单击提交按钮之前阻止jsp运行

> ID：13638794
> 
> 赞同：0
> 
> 时间：2012-11-30T03:56:37.527
> 
> 标签：jsp

我有一个带有表单的 jsp 页面。

```
<form action="search.jsp" method="get">
<input type="submit" value="submit" />
</form> 
```

在表单下方，我将有一个基于数据库查询的表。问题是，页面加载时会输出标题。是否可以等到按下提交按钮来运行查询/jsp？

```
<%
try{
Class.forName("com.mysql.jdbc.Driver");
Connection con = DriverManager.getConnection("connection");
Statement st=con.createStatement();
ResultSet rs=st.executeQuery("query here);
%>

<h2>Something <% out.print(something); %> with something <% out.print(something); %> </h2>

<%
while (rs.next()) {

        output =rs.getString(1) + "  "  + rs.getString(2)  + " something "  + rs.getString(3) ;
        %>
        <tr>
        <td>  
        <%

        out.println(output);

       %>
       </td>
       </tr>           
       <%
}

con.close();

}
catch(Exception e) {
    System.out.println(e);
}
%> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T04:05:59.970

假设您正在提交到同一页面

为提交按钮添加名称

```
 <input type="submit" value="submit" name="submit /> 
```

然后仅在参数存在时才显示标题

```
<%if(request.getParameter("submit") != null){%>
<h2>Something <% out.print(something); %> with something <% out.print(something); %> </h2>
<%}%> 
```

# python-3.x - CherryPy 在 Windows 上运行 tut01 文件

> ID：13638796
> 
> 赞同：3
> 
> 时间：2012-11-30T03:57:03.133
> 
> 标签：python-3.x, cherrypy

一点信息：Python 3.2.3，Cherrypy 版本 3.2.2。Windows 7 64 位。

安装 Cherrypy，使用正确的 Python 目录设置 PATH 等。但是，每当我运行教程文件（tut01，Hello world）或任何其他具有相同代码的 python 文件时，我都会得到以下输出：

> F:\Code>python helloworld.py [29/Nov/2012:22:37:22] 引擎监听 SIGTERM。[29/Nov/2012:22:37:22] ENGINE Bus STARTING CherryPy Checker：安装在“”的应用程序有一个空配置。
> 
> [29/Nov/2012:22:37:22] ENGINE 启动了监控线程“_TimeoutMonitor”。[2012 年 11 月 29 日：22:37:22] ENGINE 启动了监控线程“自动重装器”。[2012 年 11 月 29 日:22:37:22]“启动”侦听器中的引擎错误 > 回溯（最近一次调用最后一次）：文件“C:\Python32\lib\site-packages\cherrypy\process\wspbus.py” ，第 197 行，发布 output.append(listener(*args, **kwargs)) 文件“C:\Python32\lib\site-packages\cherrypy_cpserver.py”，第 150 行，开始
> 
> ```
> self.httpserver, self.bind_addr = self.httpserver_from_self()   File "C:\Python32\lib\site-packages\cherrypy\_cpserver.py", line 140, 
> ```
> 
> 在 https erver_from_self from cherrypy import _cpwsgi_server File "C:\Python32\lib\site-packages\cherrypy_cpwsgi_server.py"，第 7 行，在 from cherrypy import wsgiserver File "C:\Python32\lib\site-packages\cherrypy\wsgiserver__init__. py”，第 14 行，在 exec('from .wsgiserver3 import *') 文件“”，第 1 行，在 ImportError 中：没有名为 wsgiserver3 的模块
> 
> [29/Nov/2012:22:37:22] ENGINE 由于启动侦听器中的错误而关闭：回溯（最近一次调用最后）：文件“C:\Python32\lib\site-packages\cherrypy\process\wspbus. py”，第 235 行，开始 self.publish('start') 文件“C:\Python32\lib\site-packages\cherrypy\process\wspbus.py”，第 215 行，在发布中提高 exc cherrypy.process.wspbus .ChannelFailures: ImportError('No module named wsgiserver 3',)
> 
> [29/Nov/2012:22:37:22] ENGINE Bus STOPPING [29/Nov/2012:22:37:22] ENGINE HTTP Server 尚未关闭 [29/Nov/2012:22:37:22] ENGINE停止线程“自动重新加载器”。[29/Nov/2012:22:37:22] 引擎停止线程“_TimeoutMonitor”。[29/Nov/2012:22:37:22] ENGINE Bus STOPPED [29/Nov/2012:22:37:22] ENGINE Bus EXITING [29/Nov/2012:22:37:22] ENGINE Bus EXITED

当它应该显示 Hello World 时，将浏览器指向 localhost:8080 什么也不做。

可以肯定的是，我根据 Cherrypy 网站上的安装指南正确地完成了所有操作。不完全确定如何修复它，但我猜它与导入错误有关。有没有其他人在 Windows 上为 python3 安装cherrypy 成功？

找到了解决方案：[https ://bitbucket.org/cherrypy/cherrypy/issue/1110/cherrypy-322win32exe-installer-didnt](https://bitbucket.org/cherrypy/cherrypy/issue/1110/cherrypy-322win32exe-installer-didnt)

原始安装程序缺少 wsgiserver3 模块，这是它在 Python 3.x 上工作所必需的。上面的安装程序应该可以解决这个问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-27T17:18:42.690

我为此苦苦挣扎，有一个简单的解决方案：

1.  将存储库克隆到本地计算机。
2.  导航到根文件夹并执行以下命令：`python setup.py install`

它[在官方源代码库](https://bitbucket.org/cherrypy/cherrypy/src)的 README.txt 中提到。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-06T20:11:26.597

只是要注意这是一个已回答的问题，引用 rashdanml：

> 找到解决方案：[https](https://bitbucket.org/cherrypy/cherrypy/issue/1110/cherrypy-322win32exe-installer-didnt) ://bitbucket.org/cherrypy/cherrypy/issue/1110/cherrypy-322win32exe-installer-didnt ？
> 
> 原始安装程序缺少 wsgiserver3 模块，这是它在 Python 3.x 上工作所必需的。上面的安装程序应该可以解决这个问题。

# ruby - 使用 Datamapper 在 Sinatra 中选择、复选框和单选按钮元素

> ID：13638797
> 
> 赞同：4
> 
> 时间：2012-11-30T03:57:15.177
> 
> 标签：ruby, sinatra, haml

将 Datamapper 与 Sinatra 一起使用，保存文本属性非常容易：

```
DataMapper::setup(:default, "sqlite3://#{Dir.pwd}/tailor.db")  
class Person  
  include DataMapper::Resource  
  property :id, Serial  
  property :name, String, :required => true
  property :height, String, :required => false
end  
DataMapper.finalize.auto_upgrade!

...

put '/:id/edit' do
  p = Person.get params[:id]
  p.name = params[:name]
  p.height = params[:height]
  p.save
end 
```

和观点：

```
%form
  %input{:type => 'text', :name => 'name'}
  %input{:type => 'text', :name => 'height'}
  %input{:type => 'submit', :value => 'Save'} 
```

有了`:type => 'text'`它是一件轻而易举的事。但是，我在尝试`property :test, Boolean, :required => false`使用复选框设置布尔值 ( ) 时遇到了麻烦。[这个问题](https://stackoverflow.com/questions/3176367/how-do-i-work-with-checkboxes-with-datamapper-and-sinatra)是相似的，但没有解决如何做一个简单的布尔值。

此外，设置不接受任何字符串的值的最简单方法是什么，而只是一组预定义的选项——无论是作为允许一个选择的选择，还是一组允许多个选择的单选按钮？

**编辑：**

我想出了复选框：

```
p.bool = !params[:bool].nil? 
```

在视图中：

```
 %input{:type => 'checkbox', :name => 'bool', :value => "#{@bool}", :checked => @p.bool} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-01T09:44:24.570

当您使用 提交表单时`checkbox`，如果您未指定`value`表单，则默认为 string `on`。此外，如果未选中该复选框，则根本不会提交。所以结果是在你的处理程序中，`params[:test]`（假设`checkbox`被命名`test`）要么`nil`是未选中，要么是字符串`on`。

Datamapper 中的布尔属性期望被分配一个布尔值（`true`或`false`），或者[它会隐式转换的一小组值](https://github.com/datamapper/dm-core/blob/v1.2.0/lib/dm-core/property/boolean.rb#L8-9)中的一个。`on`并且`nil`不在这些值中，因此当您尝试将值分配给 Datamapper 时，它将失败验证并且不保存：

```
...
p.test = 'on'
if !p.save
  p p.errors[:test]
end 
```

产生：

```
["Test must be of type TrueClass"] 
```

解决此问题的一种方法是检查您的处理程序并在分配给属性时将值显式转换为布尔值：

```
p.test = params[:test] == 'on' ? true : false 
```

另一种技术是将`value`HTML 复选框中的 设置为 Datamapper 将转换的值之一，以便您可以直接传递它。一个表单中可以有多个同名的控件，它们将按照它们在页面中出现的顺序提交。Sinatra 在创建哈希时只会使用最后一个`params`，因此如果您在复选框*之前*`hidden`添加与复选框同名的输入，则如果未选中，则该值将是隐藏输入的值。如果它被选中，它的值将覆盖隐藏输入的值。

 *```
%input{:type => 'hidden', :name => 'foo', :value => 'f'}
%input{:type => 'checkbox', :name => 'foo', :value => 't'} 
```

现在`params[:test]`将是`'f'`或者`'t'`,，这两个 Datamapper 都会为您转换，所以您可以简单地做

```
p.test = params[:test] 
```*

# javascript - 使用 JavaScript 将变量传递给隐藏的表单字段

> ID：13638804
> 
> 赞同：-4
> 
> 时间：2012-11-30T03:58:20.727
> 
> 标签：javascript, hidden-field

有人可以建议以下代码的替代方法来传递隐藏的表单字段值吗？提前感谢您的建议

```
//Working Fine but breaks some forms
document.write("<INPUT TYPE=\"hidden\" id=\"Field1\" name=\"Field1\" VALUE=\"" + VarXYZ + "\">\r\n"); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T04:04:23.470

不好的方法。首先，在加载完所有 DOM 元素之前，您不应该触摸元素。

如果加载了 DOM 元素，您会喜欢以下内容。

```
document.getElementById('Field1').value = VarXYZ;
document.getElementById('Field2').value = VarABC; 
```

关于处理加载文档的方式，在某些浏览器中存在差异。所以你最好使用 jQuery 或一些有用的库。最简单的方法是：

```
window.onload = function() {
    document.getElementById('Field1').value = VarXYZ;
    document.getElementById('Field2').value = VarABC;
} 
```

# python - 稍微改变一下输出

> ID：13638807
> 
> 赞同：0
> 
> 时间：2012-11-30T03:59:03.343
> 
> 标签：python, list

问题是：

```
voting_borda: 
```

(str 列表列表) -> (str, list of int) 的元组

该参数是一个 4 元素列表的列表，代表单次选区的排名投票。

博尔达计数是通过根据排名分配积分来确定的。一方每获得第一名得3分，每名第二名得2分，每名第三名得1分。（排名第四不得分。）例如，上面显示的排名投票将为自由党计数贡献 3 分，为绿色计数贡献 2 分，为 CPC 计数贡献 1 分。得分最多的一方赢得席位。

返回一个元组，其中第一个元素是根据 Borda Count 的获胜方的名称，第二个元素是一个四元素列表，其中包含每一方的总点数。列表元素的顺序对应于 PARTY_INDICES 中各方的顺序。

这是我的代码：

```
def voting_borda(*args):
results = {}
for sublist in args:
    for i in range(0, 3):
        if sublist[i] in results:
            results[sublist[i]] += 3-i
        else:
            results[sublist[i]] = 3-i

winner = max(results, key=results.get)
results_sort = sorted(results,key=lambda x:x[1],reverse=True)
return winner, results_sort 
```

但是，如果我尝试

```
voting_borda(['GREEN','NDP', 'LIBERAL', 'CPC'],['GREEN','CPC','LIBERAL','NDP'],['LIBERAL','NDP', 'CPC', 'GREEN']) 
```

我明白了，

```
('GREEN', {'NDP': 4, 'CPC': 3, 'GREEN': 6, 'LIBERAL': 5}) 
```

但是，我希望第一个参数是赢家（那部分很好），第二个参数只是值，并且也是 PARTY_INDICES 的顺序，即 `PARTY_INDICES = [NDP_INDEX, GREEN_INDEX, LIBERAL_INDEX, CPC_INDEX]`.

有什么解决方案或方法可以让这变得更好吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T04:17:57.967

索引的东西（NDP_INDEX 等）真的是不必要的和非 Python 的。只需使用字符串，如果您需要根据某些内容对其进行排序，请使用元组列表。

```
 vv = [ ('republican',3), ('democrat',9), ('libertarian',73), ('green',-2) ]
 vsort = sorted(vv,key=lambda x:x[1],reverse=True)
 print(list(party for party, value in vsort)) 
```

你可以做[类似](http://wiki.python.org/moin/HowTo/Sorting/)的事情来得到你的答案。讨厌为你完成整个任务......

# html - 在黑莓中遇到内存问题

> ID：13638808
> 
> 赞同：0
> 
> 时间：2012-11-30T03:59:31.337
> 
> 标签：html, cordova, memory-management, blackberry

我在 Blackberry 和这个应用程序中使用 HTML、CSS、jquery 开发一个 phonegap 应用程序，有时当我重新启动应用程序时，我收到内存警报并且应用程序退出。我已将我正在使用的所有图像放在一个文件夹中。我该如何处理内存问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T06:41:19.367

即使我在我的 HTML5+Phonegap BB 应用程序中也面临设备内存不足的类似问题。我在 BB 6.0 设备中经常遇到这个问题，但在 BB 7.0(9900) 中我还没有遇到这个问题。在 tennesha 发布的链接的第 24 页上，tneil 简要解释了 BB 内存架构。我引用

“物理分配的内存量因设备型号而异，但平均而言大约是 40MB 的 RAM。这个内存量分配给运行 WebKit（将引擎加载到内存、运行 JavaScript、显示页面、计算布局、缩放）图像等），并在视图中加载您的内容。

设备上的所有应用程序共享相同的 WebKit 实例，因此每个人共享相同的 40MB 空间。将使用 Web 视图的每个应用程序视为在同一个 Web 工具包实例中创建一个“虚拟选项卡”。”

这是供您参考的链接。希望对您有所帮助。

[http://supportforums.blackberry.com/t5/Web-and-WebWorks-Development/Device-memory-is-Low-issue-for-an-WebWork-app/td-p/1166441/page/24](http://supportforums.blackberry.com/t5/Web-and-WebWorks-Development/Device-memory-is-Low-issue-for-an-WebWork-app/td-p/1166441/page/24)

希望他们早日解决这个问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T04:13:01.347

Blackberry 存在尚未解决的内存泄漏问题。我曾经使用 html 5 为 blackbery 开发应用程序，但几乎放弃了。该平台存在太多问题，尚未准备好进行 html5 应用程序开发。您可以点击此链接，看看是否有任何有用的东西可以从中获得：http: [//supportforums.blackberry.com/t5/Web-and-WebWorks-Development/Device-memory-is-Low-issue-for -an-WebWork-app/td-p/1166441](http://supportforums.blackberry.com/t5/Web-and-WebWorks-Development/Device-memory-is-Low-issue-for-an-WebWork-app/td-p/1166441)。哦，顺便说一句，不要指望能从黑莓那里得到太多真正的帮助。

# sql-server - Powershell 脚本自动化

> ID：13638809
> 
> 赞同：1
> 
> 时间：2012-11-30T03:59:33.917
> 
> 标签：sql-server, powershell, ssms

我设法掌握了 for-each 和 SSMS 应用程序编程的概念，并通过这个问题从 excel 文件中读取

[将服务器添加到 SQL Management Studio](https://stackoverflow.com/questions/9256207/adding-servers-to-sql-management-studio)

这是现在为我工作的代码

```
Import-Csv C:\sl.csv | ForEach-Object { New-Item $(Encode-Sqlname $_.Name) -ItemType Registration -Value ("server=;$($_.Name);integrated security=true") } 
```

但是我在自动配置用户名和密码时遇到问题，这意味着将上面的代码更改为此

```
Import-Csv C:\sl.csv | ForEach-Object { New-Item $(Encode-Sqlname $_.Name) -ItemType Registration -Value ("server=;$($_.Name);integrated security=false") } 
```

但这没关系，这就是我交付脚本的人喜欢的方式，出于安全目的。（即使我想知道如何完成它:)）现在为了进一步增强，有相当多的镜像服务器， 喜欢

服务器 1/实例 2a

server2/instance2b

所以事情是我想在注册的服务器窗口中知道 ![在此处输入图像描述](../Images/ae48393a39bea6647199fac4b5d5eb50.png)

有镜像服务器和主服务器，这意味着当服务器注册时，我想让它看起来像这样，***server1/isntance2a (mirror)***，所以当用户想要登录时，他很容易知道哪个是镜像服务器或主服务器. 所以要确定这个sql查询是这样的。

```
select mirroring_role_desc from sys.database_mirroring where database_id > 4 and mirroring_state is NOT NULL 
```

这个的输出会给我这个

```
mirroring_role_desc
PRINCIPAL
PRINCIPAL
PRINCIPAL
PRINCIPAL
PRINCIPAL 
```

此查询将运行并首先确定它是否是镜像实例，如果是则显示实例中主体数据库的数量。从这里我想根据我上面提到的规范获取输出并显示注册的服务器名称。

但是当发生故障转移时，注册的服务器名称仍然显示为***server1/instance2a***，即使它现在是镜像的，所以现在你可以理解我正在尝试使这个脚本动态化，这样用户就可以在他想要的时候运行它或者它每两周运行一次或类似的（暂时不用担心时间表）

# javascript - 当应该隐藏/显示消息时，如何在 javascript 中隐藏/显示消息？

> ID：13638810
> 
> 赞同：0
> 
> 时间：2012-11-30T03:59:48.400
> 
> 标签：javascript, html

我在下面有一个代码，其中包含一个包含文本输入下拉菜单的表单：

```
$editsession = "
    <form id='updateCourseForm'>

        <p><strong>Current Course Details:</strong></p>
        <table>
        <tr>
        <th>Course ID:</th>
        <td><input type='text' id='currentCourseNo' name='CourseNocurrent' readonly='readonly' value='' /> </td>
        </tr>

        </table>
        <div id='currentAlert'></div>

        <p><strong>New Course Details:</strong></p>
        <table>
        <tr>
        <th>Course ID:</th>
        <td><input type='text' id='newCourseNo' name='CourseNoNew' value='' /> </td>
        </tr>
        </table>
        <div id='newAlert'></div>

        </form>

        <p id='submitupdatebtn'><button id='updateSubmit'>Update Course</button></p>

    ";

    echo $editsession; 
```

现在我想使用 Javascript 验证表单，下面是 javascript 验证的代码：

```
function editvalidation() {

var isDataValid = true;

var currentCourseO = document.getElementById("currentCourseNo");
var newCourseNoO = document.getElementById("newCourseNo");

var currentCourseMsgO = document.getElementById("currentAlert");
var newCourseMsgO = document.getElementById("newAlert");

if (currentCourseO.value == ""){
currentCourseMsgO.innerHTML = "Please Select a Course to edit from the Course Drop Down Menu";
$('#newAlert').hide();
isDataValid = false; 
}else{
currentCourseMsgO.innerHTML = ""; 
}

if (newCourseNoO.value == ""){
newCourseMsgO.innerHTML = "Please fill in the Course ID in your Edit";
$('#newAlert').show();
isDataValid = false;
} else{
newCourseMsgO.innerHTML = ""; 
}

return isDataValid;

} 
```

现在这是我遇到的问题：

我想在我的 javascript 验证中说明的是，如果`#currentCourseNo`为空（文本输入为空白），那么它会显示属于 div 标签的错误消息`#currentAlert`，但它会隐藏显示在 div 标签中的消息`#newAlert`。如果 `#currentCourseNo`不为空，则显示`#newAlert`错误消息（如果有）。

我遇到的问题是，`#newAlert`当文本输入为空时，它仍然显示错误消息`#currentCourseNo`，而它确实应该被隐藏。为了实现我想要实现的目标，需要在上面的 javascript 中进行哪些更改？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T04:17:28.033

首先，了解 jQuery。

对于您的流程，我的常见流程是在输入的模糊事件上添加第一次验证，并在表单的提交事件上添加第二次（完全相同）验证，例如：

```
var error = $('.errormsg');

var checks =
{
  "fieldName1": function(val) { return /*true or an error string*/ },
  "fieldName2": function(val) { return /*true or an error string*/ }
};

$('input')
.focus(function()
{
  $(this).removeClass('error');
})
.blur(function()
{
  error.slideUp(200);

  var check = checks[this.name];
  if (!check) { return; }

  var validation = check(this.value);

  if (typeof validation === "string")
  {
    $(this).addClass('error');
    error.text(validation).slideDown(200);
  }
});

$('form').submit(function(e)
{
  //e.preventDefault();

  if ($('input.error').length != -1)
  {
    error.text('All fields are required').slideDown(200);
    return;
  }

  for(var check in checks)
  {
    var field = $('input[name="' + check + '"]');
    if (field.length == -1) { continue; }

    var validation = check(field.val());

    if (typeof validation === "string")
    {
      field.addClass('error');
      error.text(validation).slideDown(200);
      return;
    }
  }
}); 
```

# facebook - 呈现社交视图控制器 Cocos2d

> ID：13638818
> 
> 赞同：2
> 
> 时间：2012-11-30T04:00:37.447
> 
> 标签：facebook, uiviewcontroller, cocos2d-iphone, social

我试图使用社交框架从 Cocos2d 中呈现“发布到 Facebook”视图控制器。这是我通常在故事板应用程序中使用的代码

```
if ([SLComposeViewController isAvailableForServiceType:SLServiceTypeFacebook]) {
    SLComposeViewController *facebook = [[SLComposeViewController alloc] init];
    facebook = [SLComposeViewController composeViewControllerForServiceType:SLServiceTypeFacebook];
    [facebook setInitialText:[NSString stringWithFormat:@"text"]];
    [self presentViewController:facebook animated:YES completion:nil];
    [facebook setCompletionHandler:^(SLComposeViewControllerResult result) {
        NSString *output;
        switch (result) {
            case SLComposeViewControllerResultCancelled:
                output = @"Action Cancelled";
                break;
            case SLComposeViewControllerResultDone:
                output = @"Posted";
                NSUserDefaults *ud = [NSUserDefaults standardUserDefaults];
                [ud setInteger:1 forKey:@"Shared"];
                [ud synchronize];
            default:
                break;
        }
        UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Facebook" message:output delegate:nil cancelButtonTitle:@"Okay" otherButtonTitles:nil, nil];
        [alert show];
    }];
} 
```

我将如何在 Cocos2d 中启动并运行它？目前它会对该行发出警告

```
[self presentViewController:facebook animated:YES completion:nil]; 
```

提前致谢

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-30T04:43:51.083

在 cocos2d 2.0 中，您可以`[CCDirector sharedDirector]`使用`self`.

```
[[CCDirector sharedDirector] presentViewController:facebook animated:YES completion:nil]; 
```

这是有效的，因为`CCDirector`继承自`UIViewController`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T15:11:30.513

这对我有用....

-（无效）facebookWithInitialText：（NSString *）文本{

```
if([SLComposeViewController isAvailableForServiceType:SLServiceTypeFacebook]) {

    CCLOG( @"can post to Facebook");

    AppController *app = (AppController*) [[UIApplication sharedApplication] delegate];

    SLComposeViewController *controller = [SLComposeViewController composeViewControllerForServiceType:SLServiceTypeFacebook];

    [controller setInitialText:text]; // set initial text 
    [controller addImage:[UIImage imageNamed:@"Icon-72.png"]];  //add an image 
    [controller addURL:[NSURL URLWithString:@"http://www.cartoonsmart.com"]];  //add a URL to it

    [[app navController] presentViewController:controller animated:YES completion:nil ];

    [controller setCompletionHandler:^(SLComposeViewControllerResult result){

        [[app navController] dismissModalViewControllerAnimated:YES];

        NSString *outout = [[NSString alloc] init];

        switch (result) {
            case SLComposeViewControllerResultCancelled:
                outout = @"Post Cancled";
                break;
            case SLComposeViewControllerResultDone:
                outout = @"Post Done";

            default:
                break;
        }
        UIAlertView *myalertView = [[UIAlertView alloc]initWithTitle:@"Facebook" message:outout delegate:nil cancelButtonTitle:@"Ok" otherButtonTitles:nil, nil];
        [myalertView show];
    }];

}  else {

    CCLOG( @"Facebook not accessible or one account not setup.");
} 
```

}

# database - 许多服务器上的 couchdb 复制

> ID：13638822
> 
> 赞同：3
> 
> 时间：2012-11-30T04:01:19.837
> 
> 标签：database, couchdb, cluster-computing

我目前正在查看 CouchDB，并且我知道我必须手动指定所有复制。如果我想在 100 个节点上使用它，我将如何进行复制？

*   在每个节点上执行 99 次“复制到”和 99 次“复制自”
    *   感觉有点过头了，因为节点复制包括所有其他节点复制到它
*   做 1 次复制到下一个以形成一个圆圈（如 A -> B -> C -> A）
    *   会一直工作到一次崩溃，然后一切都等到它回来
    *   从第一个复制到最后一个的延迟会很大

有没有办法说：“这里有3个IP在全网。连接到他们，并像独立的P2P一样与大家分享你认为合适的”？

感谢您的洞察力

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T13:18:26.647

BigCouch 不会提供开箱即用的跨数据中心的东西。Cloudant DBaaS（基于 BigCouch）确实已经跨多个数据中心进行了此设置。

BigCouch 是 Apache CouchDB 的分片“Dynamo 风格”分支——它将在未来合并到“主线”Apache CouchDB，fwiw。分片跨位于同一数据中心的节点（服务器）上。使用“经典”CouchDB 样式的复制（afaik）来保持各个数据中心中的 BigCouches 不同步。

CouchDB 风格的复制（n-master）是基于变更的，所以复制只包括最新的变更。

您需要为每个节点/数据库组合设置到/从复制对。但是，如果您的所有服务器都打算完全相同，那么复制实际上不会经常发生——它只会在需要时发生。

如果`A`发生更改，复制将其发送到`B`和`C`（等）。但是，如果`B`- 刚刚获得该更改 - 将其复制到`C`之前`A`也有机会 - 由于网络延迟等 - 当`A`最终尝试时，它将意识到数据已经存在，并且不会打扰发送更改再次。

如果这是您设置的标准部分（即，每次创建数据库时，您都希望将其复制到其他任何地方），那么我强烈建议您自动化设置。

此外，检查 _replicator 数据库。管理正在发生的事情要容易得多： [https ://gist.github.com/fdmanana/832610](https://gist.github.com/fdmanana/832610)

希望里面的东西有用。:)

# java - 在 JFrame 中使用 JBusyComponent 和 JTable

> ID：13638823
> 
> 赞同：1
> 
> 时间：2012-11-30T04:01:24.467
> 
> 标签：java, swing, noclassdeffounderror, jcomponent, busyindicator

我得到以下异常

```
Exception in thread "AWT-EventQueue-0" java.lang.NoClassDefFoundError: org/divxdede/text/TimeFormat
at org.divxdede.swing.busy.ui.BasicBusyLayerUI.<init>(BasicBusyLayerUI.java:102)
at org.divxdede.swing.busy.ui.BasicBusyLayerUI.<init>(BasicBusyLayerUI.java:138)
at org.divxdede.swing.busy.JBusyComponent.<init>(JBusyComponent.java:105)
at jewelleryerpapplication.GUI.Gold.IssueToRep1.<init>(IssueToRep1.java:136)
at jewelleryerpapplication.GUI.Gold.IssueToRep1.Instance(IssueToRep1.java:164) 
```

我在我的项目中添加了以下库

*   jbusycomponent-1.2.2.jar
*   SwingX 1.6
*   JXLayer 3.0.4
*   Jarvis-Commons 0.1

当我使用下面的代码将`JXBusyLayer`组件添加到我的`JFrame`（同时用组件包装现有`JTable`组件时）`JXBusyLayer`

```
 JBusyComponent<JTable> busytblDetailInfo = new JBusyComponent<JTable>(tblDetailInfo);
     myJFrame.add(busytblDetailInfo); 
```

使用[链接](http://code.google.com/p/jbusycomponent/wiki/GettingStarted)！

```
 Edit 
```

添加了库 Commons-0.2 并且异常消失了。

```
Error 2 ! 
```

现在在 JBusyControl 包装的控件（JTable）上看不到任何数据。

```
Edit 2 
```

添加了下面的代码（通过@MadProgrammer 的评论），但问题仍然没有要查看的数据。

```
 jFrame.remove(tblDetailInfo);
        DefaultTableModel dtm = new DefaultTableModel(data, header);
        tblDetailInfo.setModel(dtm);
        JBusyComponent<JTable> busytblDetailInfo = new JBusyComponent<JTable>(tblDetailInfo_OrderInfo);
        jFrame.add(busytblDetailInfo); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-30T05:01:00.150

我发现它不喜欢被包裹在`JScrollPane`我认为很奇怪的东西中：P

(I lie, `BusyComponent` "likes" being added to a `JScrollPane`; but you probably don't want to)

![enter image description here](../Images/477f26a483255b9b2e20f1a7977361af.png)

```
public class TestBusy {

    public static void main(String[] args) {
        new TestBusy();
    }

    public TestBusy() {
        EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                try {
                    UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
                } catch (ClassNotFoundException | InstantiationException | IllegalAccessException | UnsupportedLookAndFeelException ex) {
                }

                JFrame frame = new JFrame();
                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                frame.setLayout(new BorderLayout());
                frame.add(new ContentPane());
                frame.pack();
                frame.setLocationRelativeTo(null);
                frame.setVisible(true);
            }
        });
    }

    public class ContentPane extends JPanel {

        private JTable table;

        public ContentPane() {
            setLayout(new BorderLayout());
            table = new JTable();
            table.setFillsViewportHeight(true);

            DefaultTableModel model = new DefaultTableModel();
            model.addColumn("One");
            model.addColumn("Two");
            model.addColumn("Three");
            model.addColumn("Four");
            model.addColumn("Five");
            model.addColumn("Six");
            model.addColumn("Seven");
            table.setModel(model);
            JScrollPane scrollPane = new JScrollPane(table);

            JBusyComponent<JScrollPane> busyComponent = new JBusyComponent<JScrollPane>(scrollPane);
            add(busyComponent);

            busyComponent.getBusyModel().setMinimum(0);
            busyComponent.getBusyModel().setMaximum(10000);

            busyComponent.setBusy(true);
            BusySwingWorker<Object, Object[]> worker = new BusySwingWorker<Object, Object[]>(busyComponent.getBusyModel()) {

                @Override
                protected void process(List<Object[]> chunks) {
                    DefaultTableModel model = (DefaultTableModel) table.getModel();
                    for (Object[] chunk : chunks) {
                        model.addRow(chunk);
                    }
                }

                @Override
                protected Object doInBackground() throws Exception {
                    for (int index = 0; index < 1000; index++) {
                        setProgress(Math.round((index / 1000f) * 100f));
                        publish(new Object[]{index, "B", "C", "D", "E", "F", "G"});
                        Thread.sleep(5);
                    }
                    return null;
                }
            };
            worker.execute();
        }
    }
} 
```

# javascript - JQuery 解析 JSON 对象 - 不工作？

> ID：13638826
> 
> 赞同：-1
> 
> 时间：2012-11-30T04:02:05.950
> 
> 标签：javascript, jquery, json

我有一个有效的 json 对象，但是当我尝试使用 jquery/javascript 从中提取内存时，它总是返回为“未定义”。

```
var json = (the string below).

var obj = $.parseJSON(JSON.stringify(JSON.stringify(json))); 

alert(obj);       // alerts the object correctly.

alert(obj.HotelInformationResponse);    // undefined..?
alert(obj.HotelInformationResponse.HotelImages); // undefined..? 
```

有谁知道我如何`hotelImageId`从下面的这个 json 对象中提取一个？

nb：JSON.stringify 两次，因为当我执行一次时，它仍然显示 [Object object]

* * *

```
{
   "HotelInformationResponse":{
      "@hotelId":"106347",
      "customerSessionId":"[xxx]",
      "HotelImages":{
         "@size":"27",
         "HotelImage":[
            {
               "hotelImageId":7092462,
               "name":"",
               "category":1,
               "type":0,
               "caption":"Exterior",
               "url":"http://images.travelnow.com/hotels/1000000/10000/5900/5900/5900_57_b.jpg",
               "thumbnailUrl":"http://images.travelnow.com/hotels/1000000/10000/5900/5900/5900_57_t.jpg",
               "supplierId":13,
               "width":350,
               "height":350,
               "byteSize":0
            },
            {
               "hotelImageId":7130885,
               "name":"",
               "category":0,
               "type":0,
               "url":"http://images.travelnow.com/hotels/1000000/10000/5900/5900/5900_58_b.jpg",
               "thumbnailUrl":"http://images.travelnow.com/hotels/1000000/10000/5900/5900/5900_58_t.jpg",
               "supplierId":13,
               "width":350,
               "height":350,
               "byteSize":0
            },
            {
               "hotelImageId":7147393,
               "name":"",
               "category":0,
               "type":0,
               "url":"http://images.travelnow.com/hotels/1000000/10000/5900/5900/5900_59_b.jpg",
               "thumbnailUrl":"http://images.travelnow.com/hotels/1000000/10000/5900/5900/5900_59_t.jpg",
               "supplierId":13,
               "width":350,
               "height":350,
               "byteSize":0
            },
            {
               "hotelImageId":7147394,
               "name":"",
               "category":0,
               "type":0,
               "url":"http://images.travelnow.com/hotels/1000000/10000/5900/5900/5900_60_b.jpg",
               "thumbnailUrl":"http://images.travelnow.com/hotels/1000000/10000/5900/5900/5900_60_t.jpg",
               "supplierId":13,
               "width":350,
               "height":350,
               "byteSize":0
            },
            {
               "hotelImageId":7147395,
               "name":"",
               "category":0,
               "type":0,
               "url":"http://images.travelnow.com/hotels/1000000/10000/5900/5900/5900_61_b.jpg",
               "thumbnailUrl":"http://images.travelnow.com/hotels/1000000/10000/5900/5900/5900_61_t.jpg",
               "supplierId":13,
               "width":350,
               "height":350,
               "byteSize":0
            },
            {
               "hotelImageId":7147396,
               "name":"",
               "category":0,
               "type":0,
               "url":"http://images.travelnow.com/hotels/1000000/10000/5900/5900/5900_62_b.jpg",
               "thumbnailUrl":"http://images.travelnow.com/hotels/1000000/10000/5900/5900/5900_62_t.jpg",
               "supplierId":13,
               "width":350,
               "height":350,
               "byteSize":0
            },
            {
               "hotelImageId":7147397,
               "name":"",
               "category":0,
               "type":0,
               "url":"http://images.travelnow.com/hotels/1000000/10000/5900/5900/5900_63_b.jpg",
               "thumbnailUrl":"http://images.travelnow.com/hotels/1000000/10000/5900/5900/5900_63_t.jpg",
               "supplierId":13,
               "width":350,
               "height":350,
               "byteSize":0
            },
            {
               "hotelImageId":7147398,
               "name":"",
               "category":0,
               "type":0,
               "url":"http://images.travelnow.com/hotels/1000000/10000/5900/5900/5900_64_b.jpg",
               "thumbnailUrl":"http://images.travelnow.com/hotels/1000000/10000/5900/5900/5900_64_t.jpg",
               "supplierId":13,
               "width":350,
               "height":350,
               "byteSize":0
            },
            {
               "hotelImageId":7147399,
               "name":"",
               "category":0,
               "type":0,
               "url":"http://images.travelnow.com/hotels/1000000/10000/5900/5900/5900_65_b.jpg",
               "thumbnailUrl":"http://images.travelnow.com/hotels/1000000/10000/5900/5900/5900_65_t.jpg",
               "supplierId":13,
               "width":350,
               "height":350,
               "byteSize":0
            },
            {
               "hotelImageId":7147400,
               "name":"",
               "category":0,
               "type":0,
               "url":"http://images.travelnow.com/hotels/1000000/10000/5900/5900/5900_66_b.jpg",
               "thumbnailUrl":"http://images.travelnow.com/hotels/1000000/10000/5900/5900/5900_66_t.jpg",
               "supplierId":13,
               "width":350,
               "height":350,
               "byteSize":0
            },
            {
               "hotelImageId":7147401,
               "name":"",
               "category":0,
               "type":0,
               "url":"http://images.travelnow.com/hotels/1000000/10000/5900/5900/5900_67_b.jpg",
               "thumbnailUrl":"http://images.travelnow.com/hotels/1000000/10000/5900/5900/5900_67_t.jpg",
               "supplierId":13,
               "width":350,
               "height":350,
               "byteSize":0
            },
            {
               "hotelImageId":7147402,
               "name":"",
               "category":0,
               "type":0,
               "url":"http://images.travelnow.com/hotels/1000000/10000/5900/5900/5900_68_b.jpg",
               "thumbnailUrl":"http://images.travelnow.com/hotels/1000000/10000/5900/5900/5900_68_t.jpg",
               "supplierId":13,
               "width":350,
               "height":350,
               "byteSize":0
            },
            {
               "hotelImageId":7147403,
               "name":"",
               "category":0,
               "type":0,
               "url":"http://images.travelnow.com/hotels/1000000/10000/5900/5900/5900_69_b.jpg",
               "thumbnailUrl":"http://images.travelnow.com/hotels/1000000/10000/5900/5900/5900_69_t.jpg",
               "supplierId":13,
               "width":350,
               "height":350,
               "byteSize":0
            },
            {
               "hotelImageId":7147404,
               "name":"",
               "category":0,
               "type":0,
               "url":"http://images.travelnow.com/hotels/1000000/10000/5900/5900/5900_70_b.jpg",
               "thumbnailUrl":"http://images.travelnow.com/hotels/1000000/10000/5900/5900/5900_70_t.jpg",
               "supplierId":13,
               "width":350,
               "height":350,
               "byteSize":0
            },
            {
               "hotelImageId":7147405,
               "name":"",
               "category":0,
               "type":0,
               "url":"http://images.travelnow.com/hotels/1000000/10000/5900/5900/5900_71_b.jpg",
               "thumbnailUrl":"http://images.travelnow.com/hotels/1000000/10000/5900/5900/5900_71_t.jpg",
               "supplierId":13,
               "width":350,
               "height":350,
               "byteSize":0
            },
            {
               "hotelImageId":7147406,
               "name":"",
               "category":0,
               "type":0,
               "url":"http://images.travelnow.com/hotels/1000000/10000/5900/5900/5900_72_b.jpg",
               "thumbnailUrl":"http://images.travelnow.com/hotels/1000000/10000/5900/5900/5900_72_t.jpg",
               "supplierId":13,
               "width":350,
               "height":350,
               "byteSize":0
            },
            {
               "hotelImageId":7147407,
               "name":"",
               "category":0,
               "type":0,
               "url":"http://images.travelnow.com/hotels/1000000/10000/5900/5900/5900_73_b.jpg",
               "thumbnailUrl":"http://images.travelnow.com/hotels/1000000/10000/5900/5900/5900_73_t.jpg",
               "supplierId":13,
               "width":350,
               "height":350,
               "byteSize":0
            },
            {
               "hotelImageId":4694165,
               "name":"",
               "category":0,
               "type":0,
               "url":"http://images.travelnow.com/hotels/1000000/10000/5900/5900/5900_30_b.jpg",
               "thumbnailUrl":"http://images.travelnow.com/hotels/1000000/10000/5900/5900/5900_30_t.jpg",
               "supplierId":13,
               "width":350,
               "height":350,
               "byteSize":0
            },
            {
               "hotelImageId":4694166,
               "name":"",
               "category":0,
               "type":0,
               "url":"http://images.travelnow.com/hotels/1000000/10000/5900/5900/5900_31_b.jpg",
               "thumbnailUrl":"http://images.travelnow.com/hotels/1000000/10000/5900/5900/5900_31_t.jpg",
               "supplierId":13,
               "width":350,
               "height":350,
               "byteSize":0
            },
            {
               "hotelImageId":4694168,
               "name":"",
               "category":0,
               "type":0,
               "url":"http://images.travelnow.com/hotels/1000000/10000/5900/5900/5900_33_b.jpg",
               "thumbnailUrl":"http://images.travelnow.com/hotels/1000000/10000/5900/5900/5900_33_t.jpg",
               "supplierId":13,
               "width":350,
               "height":350,
               "byteSize":0
            },
            {
               "hotelImageId":4694171,
               "name":"",
               "category":0,
               "type":0,
               "url":"http://images.travelnow.com/hotels/1000000/10000/5900/5900/5900_36_b.jpg",
               "thumbnailUrl":"http://images.travelnow.com/hotels/1000000/10000/5900/5900/5900_36_t.jpg",
               "supplierId":13,
               "width":350,
               "height":350,
               "byteSize":0
            },
            {
               "hotelImageId":4694172,
               "name":"",
               "category":0,
               "type":0,
               "url":"http://images.travelnow.com/hotels/1000000/10000/5900/5900/5900_37_b.jpg",
               "thumbnailUrl":"http://images.travelnow.com/hotels/1000000/10000/5900/5900/5900_37_t.jpg",
               "supplierId":13,
               "width":350,
               "height":350,
               "byteSize":0
            },
            {
               "hotelImageId":4694177,
               "name":"",
               "category":0,
               "type":0,
               "url":"http://images.travelnow.com/hotels/1000000/10000/5900/5900/5900_42_b.jpg",
               "thumbnailUrl":"http://images.travelnow.com/hotels/1000000/10000/5900/5900/5900_42_t.jpg",
               "supplierId":13,
               "width":350,
               "height":350,
               "byteSize":0
            },
            {
               "hotelImageId":4694180,
               "name":"",
               "category":0,
               "type":0,
               "url":"http://images.travelnow.com/hotels/1000000/10000/5900/5900/5900_45_b.jpg",
               "thumbnailUrl":"http://images.travelnow.com/hotels/1000000/10000/5900/5900/5900_45_t.jpg",
               "supplierId":13,
               "width":350,
               "height":350,
               "byteSize":0
            },
            {
               "hotelImageId":4694181,
               "name":"",
               "category":0,
               "type":0,
               "url":"http://images.travelnow.com/hotels/1000000/10000/5900/5900/5900_46_b.jpg",
               "thumbnailUrl":"http://images.travelnow.com/hotels/1000000/10000/5900/5900/5900_46_t.jpg",
               "supplierId":13,
               "width":350,
               "height":350,
               "byteSize":0
            },
            {
               "hotelImageId":4694182,
               "name":"",
               "category":0,
               "type":0,
               "url":"http://images.travelnow.com/hotels/1000000/10000/5900/5900/5900_47_b.jpg",
               "thumbnailUrl":"http://images.travelnow.com/hotels/1000000/10000/5900/5900/5900_47_t.jpg",
               "supplierId":13,
               "width":350,
               "height":350,
               "byteSize":0
            },
            {
               "hotelImageId":6601500,
               "name":"",
               "category":0,
               "type":0,
               "url":"http://images.travelnow.com/hotels/1000000/10000/5900/5900/5900_56_b.jpg",
               "thumbnailUrl":"http://images.travelnow.com/hotels/1000000/10000/5900/5900/5900_56_t.jpg",
               "supplierId":13,
               "width":350,
               "height":350,
               "byteSize":0
            }
         ]
      }
   }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T04:17:32.527

你写

```
var json = (the string below). 
```

所以变量`json`就是`string`类型。

```
var obj = $.parseJSON(JSON.stringify(JSON.stringify(json))); 
```

这个意思

```
JSON.stringify(json) 
```

将字符串序列化为 JSON 编码的字符串。所以`'"a"'`成为`"\"a\""`

```
JSON.stringify(JSON.stringify(json)) 
```

嗯，看来你喜欢 stringify... 更多编码...

```
$.parseJSON(JSON.stringify(JSON.stringify(json)) 
```

为什么你不`JSON.parse()`。并且双重编码的字符串不会回复您。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T04:11:21.640

你将不得不循环你的对象

然后对于你可以做的每一个项目

Foreach（对象，项目）警报（项目。酒店信息响应）；

检查完美的代码，我给了你 sudo 的想法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-30T04:23:46.030

这是一个 jsfiddle 示例，向您展示如何根据您的请求提取单个hotelImageId：

[http://jsfiddle.net/nickadeemus2002/9knzN/](http://jsfiddle.net/nickadeemus2002/9knzN/)

这是示例中的代码片段：

```
 var hotelImage = jsonObj.HotelInformationResponse.HotelImages.HotelImage[0],
    singleImageId = hotelImage.hotelImageId; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-30T04:34:08.147

它工作正常，这是一个 jsFiddle 来证明它：http: [//jsfiddle.net/jesus_tesh/xL4Gw/](http://jsfiddle.net/jesus_tesh/xL4Gw/)

我什至喜欢它并使用颜色框 - 单击缩略图，它将显示全尺寸图像。

**JS**

```
var images = json.HotelInformationResponse.HotelImages.HotelImage;
$.each(images, function(idx, data) {
    $("#images")
        .append($("<div></div>")
        .append($("<a></a>").prop("href", data.url).addClass("colorbox")
        .append($("<img></img>").prop("src", data.thumbnailUrl)))
        .append($("<span></span>").text(data.caption || data.hotelImageId)));
    console.log("data", data);
});

$(".colorbox").colorbox(); 
```

**CSS**

```
html { padding: 20px; }
#images div { display: inline-block; width: 90px; height: 100px; }
#images img { display: block; width: 70px; margin: 0 auto; }
#images span { display: block; text-align: center; } 
```

​</p>

# php - PHP没有更新mySQL数据库

> ID：13638827
> 
> 赞同：-2
> 
> 时间：2012-11-30T04:02:28.833
> 
> 标签：php, android, mysql, json

我尝试从 TripTracker Android 应用程序通过我的 php 服务器将位置数据添加到 mysql 数据库。这在 php 中，但它仍然无法正常工作。请帮帮我。使用 for 循环，它会在数据库中创建一个空行。当我删除它时，它根本不起作用。

```
<?php
    $json = $_GET['locations'];//get the post you sent...
    //$data = $_GET['locations'];
    $data = json_decode($json); //decode the json formatted string...
    $data = array();
    print_r($data);
    echo ($data);
    //foreach ($data as $x=>$loc){
    $loctime = $data->time;
    $latitude = $data->latitude;
    $longitude = $data->longitude;

    $con = mysql_connect("localhost","root","");
    if (!$con)
        die('Could not connect: ' . mysql_error());

    mysql_select_db("gpscoordinates", $con);
    $loctime = $_POST['time'];
    $latitude = $_POST['latitude'];
    $longitude = $_POST['longitude'];

    $sql = "INSERT INTO  `gpscoordinates`.`locations`
            (`id`, `loctime`, `latitude`, `longitude`)
            VALUES (NULL, '$loctime', '$latitude', '$longitude')";
    if (!mysql_query($sql,$con))
      die('Error: ' . mysql_error());

    mysql_close($con);
    //}
    //echo json_encode($variable);
?> 
```

下面是一个可用的 Rails 等价物。

```
params[:locations].each do |x,loc|
    l = Tripcoord.new
    l.created_at = Time.at(loc[:time].to_i)
    l.latitude = loc[:latitude]
    l.longitude = loc[:longitude]
    l.save!
  end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T04:06:50.337

您从 $_POST 数组中设置值：

```
$loctime = $_POST['time'];
$latitude = $_POST['latitude'];
$longitude = $_POST['longitude']; 
```

但是您的数据来自 $_GET 数组？

```
 $json = $_GET['locations']; 
```

我错过了什么吗，因为这显然行不通。

改变

```
$_GET['locations'] to $_POST['locations'] 
```

（或反之亦然，视情况而定）。更何况，

```
$data = array(); 
```

如果 $_POST 中有任何内容，将清空这些值。

我希望我没有完全误解......

# python - 如何修复scrapy源代码测试失败：FifoDiskQueue

> ID：13638829
> 
> 赞同：2
> 
> 时间：2012-11-30T04:02:42.257
> 
> 标签：python, unit-testing, scrapy

下载 Scrapy 0.16 的源代码后，我尝试在我的 Macbook 上使用 ./bin/runtests.sh 运行测试。令人惊讶的是，测试失败了。它给出了这些结果：失败（跳过=46，失败=9，成功=887）。大家有遇到过这个问题吗？你如何解决它？

```
[FAIL]
Traceback (most recent call last):
  File "/Users/lws/Downloads/scrapy-scrapy-7b5310d/scrapy/tests/test_utils_queue.py", line 128, in test_close_open
    self.assertEqual(q.pop(), 'c')
  File "/System/Library/Frameworks/Python.framework/Versions/2.7/Extras/lib/python/twisted/trial/unittest.py", line 270, in assertEqual
    % (msg, pformat(first), pformat(second)))
twisted.trial.unittest.FailTest: not equal:
a = None
b = 'c'

[FAIL]
Traceback (most recent call last):
  File "/Users/lws/Downloads/scrapy-scrapy-7b5310d/scrapy/tests/test_utils_queue.py", line 128, in test_close_open
    self.assertEqual(q.pop(), 'c')
  File "/System/Library/Frameworks/Python.framework/Versions/2.7/Extras/lib/python/twisted/trial/unittest.py", line 270, in assertEqual
    % (msg, pformat(first), pformat(second)))
twisted.trial.unittest.FailTest: not equal:
a = 'e'
b = 'c' 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-01T16:42:45.593

是的，这是 scrapy 中的一个错误，它似乎不会在 GNU/Linux 上表现出来，只在 mac os 上表现出来。这是由于 FifoDiskQueue 将无缓冲文件读取与缓冲文件查找混合在一起造成的。

我写了一个[PR](https://github.com/scrapy/scrapy/pull/201)来解决这个问题以及发现的其他一些兼容性问题。不确定修复程序何时会使其成为新版本。

Scrapy 在 mac os 上确实可以正常工作（FifoDiskQueue 是默认情况下不使用的替代队列机制）。

# twitter-bootstrap - Bootstrap Popover 在放大/缩小或调整浏览器窗口大小时显示在错误的位置

> ID：13638831
> 
> 赞同：2
> 
> 时间：2012-11-30T04:03:10.657
> 
> 标签：twitter-bootstrap, position, popover

当我通过放大或缩小重新调整任何浏览器的窗口大小时。Popover 没有更新位置并显示在错误的位置。

如何在重新调整/缩放浏览器窗口时更改 Bootstrap Popover 的位置/位置。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T04:20:04.503

它似乎在 Bootstrap 2.2.1 中运行良好（除非我理解你的问题是错误的）。[试试http://twitter.github.com/bootstrap/javascript.html#modals](http://twitter.github.com/bootstrap/javascript.html#modals)上的现场演示，看看这是否是您正在寻找的。我对窗口使用 onresize 事件来正确设置复杂模式及其内部的大小。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-07-12T12:44:43.840

它不适用于具有多个弹出框的页面，因为它会在窗口调整大小时显示所有弹出框

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-12-09T20:07:12.743

我试图自己重新定位它`offset().top`，`outerHeight()`但遇到了问题。我的解决方案是再次简单地回忆弹出框的`show`事件：

```
 $(window).off("resize").on("resize", function() {
        $(".popover").each(function() {
            var popover = $(this);
            if (popover.is(":visible")) {
                var ctrl = $(popover.context);
                ctrl.popover('show');
            }
        });
    }); 
```

# python - 需要帮助完成 Python 分级程序

> ID：13638832
> 
> 赞同：0
> 
> 时间：2012-11-30T04:03:49.440
> 
> 标签：python, average, if-statement, assignment-operator

我想创建一个执行以下操作的 python 程序：

1.  询问用户他们课程中的测试、作业、测验和实验室的数量。
2.  询问用户是否存在与上述测试不同的权重的期末考试，例如，一个课程有 2 次测试，每项重量为 12.5%，1 次最终重量为 15%。
3.  对于每个类别的数字 > 0 a。提示用户输入 100% 中的加权百分比，所有类别的总和应为 100%！！！湾。获取类别的分数。C。如果类别是实验室，则将所有分数相加。d。否则，平均分数。e. 计算类别的加权平均值。
4.  使用每个类别的加权平均值，计算课程中的成绩。
5.  询问用户他/她是否想计算另一个班级的成绩。
6.  如果用户回答是，则返回步骤 1。
7.  否则，结束程序。

到目前为止，我所拥有的是输入部分：

```
tests = raw_input("Enter the number of tests in course: ")
tests = int
assignments = raw_input("Enter the number of assignments in course: ")
quizzes = raw_input("Enter the number of quizzes in course: ")
labs = raw_input("Enter the number of labs in course: ")
sepweightfinal = raw_input("Is there a final with a separate weight? ") 
```

当我在输入后尝试做任何事情时，我无法让它工作。

如 if tests > 0 percent = input("什么是测试的加权百分比？：")

我的程序总是说 > 和 0 无效，有没有办法做到这一点？

在此先感谢，基本上我理解逻辑和我想要完成的事情，代码只是没有在我的脑海中点击。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T04:08:28.407

您需要使用以下方法将返回的字符串转换`raw_input()`为整数`int`：

```
tests_string = raw_input("Enter the number of tests in course: ")
tests = int(tests_string) 
```

或更简洁地说：

```
tests = int(raw_input("Enter the number of tests in course: ")) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T06:58:52.353

这应该可以解决问题：

```
tests = int(raw_input(" Enter the number of tests in course: ")) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-30T06:20:09.807

使用另一个变量作为加权百分比，例如

```
if test>0:
    test_weight=float(raw_input("Enter the weight of the tests:")
else:
    test_weight=0
if assignments>0:
    assign_weight=float(raw_input("Enter the weight of the assignments:")
else:
    assign_weight=0 
```

如果所有权重的总和等于 100，则 chk

```
if (test_weight+assign_weight+lab_weight+final_weight)!=100:
    print "The weights are not accurate"
    break 
```

使用浮点数获取每一项的分数，使用 for 循环获取测试次数。

```
for i in range(0,test):
    test_score.append(float(raw_input("Enter the score for the test:"))) 
```

其中 test_score 是一个列表。现在您已经列出了分数的不同组成部分的所有分数，您可以用它们计算总和、平均值等，并最终使用 if 语句计算成绩。

```
if weightedavg>=60:
    grade='A'
elif weightedavg>=40:
    grade='B'
else:
    grade='C' 
```

把整个事情放在一个while循环中

```
while(1): 
```

如果用户对第 6 点不回答，则中断循环

```
if user_resp=='N':
    print "Goodbye"
    break 
```

为了更好的可读性而不是有很多变量，我建议您将所有数据放入带有键的字典中，作为课程的不同组成部分。处理有组织的东西会容易得多。

# objective-c - 如何通过 iOS 编程保存和加载

> ID：13638837
> 
> 赞同：0
> 
> 时间：2012-11-30T04:04:38.570
> 
> 标签：objective-c, ios, uiimagepickercontroller

我有一个应用程序，我想使用 a 拍照`UIImagePickerController`，然后将生成的图像粘贴在缩略图视图中。但是，当您退出应用程序时，我想重新显示与用户上次离开时​​相同的缩略图。我的问题有三个：

1.  在应用程序生命周期之间实现保存和加载图像的最佳方法是什么？

2.  用户拍照时如何更改默认快门声音？

3.  如果用户选择，我如何将上述所有设置重置为默认设置？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T04:15:18.383

尝试使用核心数据或 NSUserDefault.. 一些链接让你开始：1\. [http://www.raywenderlich.com/934/core-data-on-ios-5-tutorial-getting-started](http://www.raywenderlich.com/934/core-data-on-ios-5-tutorial-getting-started) 2\. [http://maniacdev .com/2012/03/tutorial-getting-started-with-core-data-in-ios-5-using-xcode-storyboards/](http://maniacdev.com/2012/03/tutorial-getting-started-with-core-data-in-ios-5-using-xcode-storyboards/) 3\. 一些代码：

```
//Saving:  
[[NSUserDefaults standardUserDefaults] setObject:UIImagePNGRepresentation(image)forKey:key];
//Loading:     
NSData* imageData = [[NSUserDefaults standardUserDefaults] objectForKey:key];
    UIImage* image = [UIImage imageWithData:imageData]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T04:12:48.617

您可以在委托处做什么，您只需将图像保存在本地（我通常更喜欢 sqlite），当您启动应用程序时，您只需要执行选择查询来检查图像是否存在，如果存在，则只需检查哪个是最新的一个（或你想拿起的案例）。

希望，它会给你工作的想法。

如有任何疑问，请通知我。:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-30T04:26:35.817

您可以将图像数据保存到`NSUserDefaults`（由其他人提及）或应用程序的沙箱，或者您也可以将图像保存到`didFinishPickingMediaWithInfo`委托中设备的相机胶卷中，如下所示：

```
ALAssetsLibrary *library = [[ALAssetsLibrary alloc] init];  
//Block Request to save the image to camera roll  
[library writeImageToSavedPhotosAlbum:[[info objectForKey:UIImagePickerControllerOriginalImage] CGImage] orientation:(ALAssetOrientation)[[info objectForKey:UIImagePickerControllerOriginalImage] imageOrientation] completionBlock:^(NSURL *assetURL, NSError *error){  
    if (error) {  
        NSLog(@"Error saving to Albums");  
    } else {
        NSLog(@"Saved Image Url %@", assetURL);
    }  
}];  
[library release]; 
```

然后，委托`- (void)imagePickerController:(UIImagePickerController *)picker didFinishPickingMediaWithInfo:(NSDictionary *)info`信息字典对象具有密钥的图像 url，`UIImagePickerControllerReferenceURL`然后您可以使用它来获取图像，再次使用[ALAssetsLibrary](http://developer.apple.com/library/ios/#documentation/AssetsLibrary/Reference/ALAssetsLibrary_Class/Reference/Reference.html)。HTH。

# php - 使用 PHP 驱动程序将具有私有成员的对象保存到 MongoDb 时出错

> ID：13638839
> 
> 赞同：2
> 
> 时间：2012-11-30T04:05:09.550
> 
> 标签：php, mongodb

谁能告诉我是否有解决方案将带有私有成员的 PHP 类保存到 MongoDb？我不断收到以下错误

```
zero-length keys are not allowed, did you use $ with double quotes?' 
```

我看到至少有两个与同一个问题有关的现有问题，但没有真正的答案。
[问题 1](https://stackoverflow.com/questions/13313278/mongodb-saving-throws-error-for-php-class-private-members) [问题 2](https://stackoverflow.com/questions/9809103/unable-to-save-php-objects-in-mongodb)

我所有的持久性类都有一个我需要可用的私有成员，但我不想创建一个函数来避免私有成员的必要性，因为这是一个基于实例的类，它具有利用私有成员的多个功能。

网络服务器 Apache/2.2.22

PHP 版本 PHP 5.4.6

PHP 扩展 mongo/1.2.6

这将是一个示例实现，请不要批评代码本身，它只是为了说明行为的类型，即 $this 的 Save 和基本类型中的 $private 成员：

```
<?php

class PersistableObject extends AbstractBasePersistableObject
{
   public  $PublicSubTypeProperty;

    public function __construct()
    {
       parent::__construct();
    }

    public function GetDalConfigurationFromSubType()
    {
        //This object is just a wrapper DAL implemented based on
        //the php Mongo, MongoDb and MongoCollection objects
        return new MongoBasedDal();
    }
}

abstract class AbstractBasePersistableObject
{
   private $dalRef = null;
   public $PublicBaseProperty;

   public abstract function GetDalConfigurationFromSubType();

   public function __construct()
   {
      $this->dalRef = $this->GetDalConfigurationFromSubType();
   }

   public function Save()
   {
       $this->dalRef->Save($this);
   }
}

?> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-07T09:43:24.370

> 谁能告诉我是否有解决方案将带有私有成员的 PHP 类保存到 MongoDb？

正如您从 Google Groups 了解到的，问题在于 PHP 驱动程序实际上在保存时忽略了私有变量和受保护变量。这是驱动程序本身核心中的一个基本问题，因此没有简单的解决方法。你也知道 Derick 为此创建了一个 JIRA：[https ://jira.mongodb.org/browse/PHP-624](https://jira.mongodb.org/browse/PHP-624)

@harald 实际上确实说明了方法，创建您自己的 _to_array() 并将其提供给 save 函数，不幸的是，这再次引发了您如何构建类的基本问题。您必须像这样使用反射：

```
$reflect = new ReflectionClass(get_class($this));
$class_vars = $reflect->getProperties(ReflectionProperty::IS_PUBLIC | ReflectionProperty::IS_PROTECTED | ReflectionProperty::IS_PRIVATE);

foreach ($class_vars as $prop) {
    $doc[$prop->getName()] = $this->{$prop->getName()};
} 
```

然后`$doc`在保存内使用。

但是，您可以稍微更改您的编程以避免反射（或者只是缓存反射的结果以节省资源消耗），方法是创建一个预定义的数组，`$schema`其中包含您希望保存的所有字段。当您希望按需添加新字段时，您可以创建`__set`并`__get`更新内存模式数组。这样您就可以完全避免反射，而只是去获取模式数组及其值。

这是很多框架用来解决这个问题的方法，包括 Lithium、Yii、Kohona、CakePHP 等等。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-30T08:54:03.443

问题可能是，Mongo 正在尝试将您的对象转换为数组。如果您正在查看...的输出

```
class Address{
    private $name;
    private $company;
    private $zip;

    public function __construct($name,$company,$zip){
        $this->name = $name;
        $this->company = $company;
        $this->zip = $zip;
    }
}

print_r((array)new Address('name', 'company', 'zip')); 
```

...使用 hexdump，它将显示以下内容：

```
harald:$ ~/test.php | hexdump -C
00000000  41 72 72 61 79 0a 28 0a  20 20 20 20 5b 00 41 64  |Array.(.    [.Ad|
00000010  64 72 65 73 73 00 6e 61  6d 65 5d 20 3d 3e 20 6e  |dress.name] => n|
00000020  61 6d 65 0a 20 20 20 20  5b 00 41 64 64 72 65 73  |ame.    [.Addres|
00000030  73 00 63 6f 6d 70 61 6e  79 5d 20 3d 3e 20 63 6f  |s.company] => co|
00000040  6d 70 61 6e 79 0a 20 20  20 20 5b 00 41 64 64 72  |mpany.    [.Addr|
00000050  65 73 73 00 7a 69 70 5d  20 3d 3e 20 7a 69 70 0a  |ess.zip] => zip.|
00000060  29 0a                                             |).|
00000062 
```

看看 .Address.name 中的那些点，它们是空字节，可能不允许在键中使用，因此会导致奇怪的错误消息。

由于 PHP（还）没有魔术方法 __to_array，您可能需要自己的辅助方法将对象“转换”为数组。其他可能性是只使用“公共”属性，但这也不是一个好的解决方案。

# javascript - 如何使用 javascript 库在 Facebook Canvas 应用程序中进行 AJAX 调用？

> ID：13638853
> 
> 赞同：0
> 
> 时间：2012-11-30T04:06:36.973
> 
> 标签：javascript, jquery, facebook

我正在编写一个 Facebook 画布应用程序，该应用程序需要在用户向朋友发送应用程序请求后进行一些 AJAX 调用。但是，每次我加载一个 javascript 库来帮助处理 AJAX 调用时，都会导致 Facebook Javascript SDK 停止工作。

我正在按照 Facebook 文档中的说明在标签之后加载 Javascript SDK。

当用户单击按钮向朋友发送请求时，它会调用如下函数：

```
function sendrequest() {
    FB.ui({method: 'apprequests',
        message: 'Play this game!',
        max_recipients: 1,
    }, 
    function(response) {
        var to = response.to;
        var requestid = response.request;
        //here I want to send these to a PHP page
        //via AJAX for processing
    });
} 
```

`<head>`我从在和之间加载 jQuery 开始`</head>`，但突然`FB.ui`发送应用程序请求的函数停止工作。控制台说该`sendrequest()`函数未定义。

[StackOverflow 上的另一个问题](https://stackoverflow.com/questions/3418640/facebook-app-ajax-and-internet-explorer)建议使用 PHPLiveX，它适用于提出该问题的人。但是，加载此 javascript 会产生完全相同的问题。如果页面加载除 Facebook javascript SDK 之外的任何 javascript 库，则 SDK 将停止工作。

关于可能导致这种情况的任何想法？我意识到我可以使用 XMLHttpRequest，但我希望使用库来节省大量 AJAX 调用的时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T13:05:11.143

我发现了我的问题。我通过从头开始键入代码来包含 jQuery，并暂时忘记了[脚本标签不能自动关闭](https://stackoverflow.com/questions/69913/why-dont-self-closing-script-tags-work)：

```
<script src="jquery.min.js" /> 
```

不工作。但

```
<script src="jquery.min.js"></script> 
```

工作正常。

# php - 使用回声时设置文本字段的样式？

> ID：13638854
> 
> 赞同：0
> 
> 时间：2012-11-30T04:06:46.280
> 
> 标签：php

这是一种形式的错误处理。如果输入字段为空，那么我希望它改变颜色。

```
echo " <input type=\"text\"  name=\"name\"  style=\"".background-color:$color1_name."\"
          value=\"".$name."\">"; 
```

任何有想法的人将不胜感激

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-30T04:07:42.577

更轻松：

```
<input type="text"  
       name="name"   
       style="background-color:<?php echo $color1_name ?>" //This line
       value="<?php echo $name ?>"> //And this 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-30T04:14:48.460

```
<input type="text" name="name" style="background-color:<?php echo $color1_name;?>;" value="<?php echo $name;?>"> 
```

或者：

```
echo '<input type="text"  name="name"  style="background-color:'.$color1_name.';" value="'.$name.'">'; 
```

# database - 日期处理的实践建议

> ID：13638857
> 
> 赞同：2
> 
> 时间：2012-11-30T04:06:59.830
> 
> 标签：database, date, datetime

之前有个类似的话题：[夏令时和时区最佳实践](https://stackoverflow.com/questions/2532729/daylight-saving-time-and-timezone-best-practices)

我想问的是相关的，但不同的。

日期处理的建议做法是什么？

我正在寻找一个更“合乎逻辑”的日期。例如，我们申请的营业日期，或某些人的出生日期。

通常我将它存储为日期（在 Oracle 中），时间为 0:0:0。如果我的应用程序的所有组件都在同一个时区，这将正常工作。因为数据库中的日期意味着数据库时区的 0:0:0，如果我将我的数据呈现给另一个时区的用户，它很容易出现问题，因为例如，日期 2012-12-25 0:0:0伦敦时间实际上是香港时间 2012-12-24 16:0:0。

我想了两种方法来解决，但它们都有其不足之处。

首先，我们将其存储为字符串。缺点很明显：我需要在我们的应用程序或查询中进行大量对话，并​​且丢失了很多日期算术

第二种方法是将其存储为日期，但具有预定义的时区（例如 UTC）。当应用程序显示日期时，它必须显示为 UTC 时区。但是，我需要在我的应用程序代码中进行大量时区操作。

处理日期的建议方法是什么？还是大多数人只是使用上述 3 种方法中的一种（包括假设为相同时区的方法）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T05:47:43.707

在任何地方使用 UTC 使事情变得简单和一致。将日期（作为时间点）保存为数据库中的 UTC，在 UTC 中对它们进行数学运算，仅在视图层中显式转换为本地时间，将用户输入日期转换为 UTC 将为您需要的任何操作或计算提供相当稳定的基础跟他们。您实际上并不需要以 UTC 向用户显示日期 - 实际上以本地时间显示它们并暗示您可以向它们显示 UTC 提供了更多有用的信息。
如果您只需要保留日期（例如生日，您在评论中提到的内容），请明确删除此类信息（例如在数据库级别从 DateTime 转换为 Date 或任何代码级别的可能性）。
这是良好规范化的示例 - 您在代码页上使用 UTF 或保持相同单位进行物理计算时所做的事情相同。
使用这种方法，不同日期的代码会简单得多。在显示 UTC 和本地人之间的日期和转换的情况下，许多框架（甚至语言本身）为您提供了处理本地人的工具，同时使用 UTC 等。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-06T01:20:22.347

日期是一种标识一天的方式，一天是相对于当地的时区，也就是太阳。一天是 24 小时周期（尽管由于闰秒和其他恒星校正，24 小时只是一个非常接近的近似值）。因此，伦敦的 12 月 5 日日期与纽约的 12 月 5 日日期命名不同的 24 小时时段。这样做的后果之一是，如果您想对不同时区之间的日期进行算术运算，则只能达到 +/- 1 的精度。作为一种数据结构，这是一个传统的日期（例如，年份和天偏移量）和一个由与 UTC 的小时偏移量标识的时区（请注意，那里有一些 1/2 小时的偏移量）。

应该清楚的是，将一个时区的日期转换为另一个时区的日期是不可能的，因为它们代表不同的时间间隔。（大多数情况下。相邻时区可能有例外，一个是夏令时，一个不是。）出于同样的原因，不同时区之间的日期计算通常也不能完成。有时没有足够的数据来获得完美的答案。

但是，您提出的问题背后的问题的完整答案取决于日期的含义。例如，如果它们是诸如截止日期之类的合法日期，那么这些日期通常是相对于办公楼的位置来获取的，例如截止日期的计时地点。在这种情况下，日期边界遵循一个时区，冗余存储它是没有意义的。时间将在存储时转换为该时区的日期。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-11T18:28:00.303

我曾经设计并领导构建了一个实时交易系统，该系统在多个时区处理客户，但都在一个时区的时间段内开具发票。

对我来说效果很好的解决方案是在每条记录上存储 UTC 时间和本地时间。这是在使用该系统几年后才意识到日期列确实有两种不同的用途，因此数据以这种方式存储。

尽管它在磁盘上多用了几个字节（大不了——磁盘很便宜），但它在查询时让事情变得如此简单；“临时”查询（例如搜索客户交易的帮助台）使用本地时间列，“正式”查询（例如会计部门发票批处理运行）使用 UTC 列。

它还处理了每次夏令时倒退一小时时本地时间“重温”一小时交易的问题，如果您是 24 小时营业的企业，那么仅使用本地时间会变得非常痛苦。

# java - 查询字符串中的 Java SQL 引号

> ID：13638859
> 
> 赞同：0
> 
> 时间：2012-11-30T04:07:00.663
> 
> 标签：java, sql, keyword, quotes

我有以下代码来执行 sql 查询：

```
query = String.format("select * from users where user_name = '%s';", results.getString(1));
results2 = mStmt.executeQuery(query); 
```

数据集中的一个 user_name 的值为“O'brien”。由于“O'brien”中的单括号，这破坏了我的查询。查询将变为：

```
select * from users where user_name = 'O'brien' 
```

克服这个问题而不修改数据的策略是什么？

**编辑**：准备好的语句确实解决了单引号问题，但这只是问题的一部分。我拥有的字符串值之一包含单词“UNDER”。这是一个 SQL 关键字。例如，我有一个名为 insertAll 的preparedStatement，查询如下：

```
insert into names (id, val1, val2, val3, val4, tTime, val5) values (?, ?, ?, ?, ?, ?, ?) 
```

感谢所有的帮助！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-30T04:14:05.347

使用 prepareStatement 设置参数。您的代码是书中的 SQL 注入可利用代码。 [http://docs.oracle.com/javase/tutorial/jdbc/basics/prepared.html](http://docs.oracle.com/javase/tutorial/jdbc/basics/prepared.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-30T04:19:02.527

为什么不改用[PreparedStatement](http://docs.oracle.com/javase/1.4.2/docs/api/java/sql/PreparedStatement.html)，避免在 sql 查询中完全转义引号这一繁琐且容易出错的问题？

可能看起来像这样（对不起，我实际上并没有运行它，但你应该明白了）：

```
query = "select * from users where user_name = ?";
PreparedStatement p = new PreparedStatement(con, query);
p.setString(1, results.getString(1));
results2 = p.executeQuery(); 
```

# java - 无法多次匹配两个注释之间的代码

> ID：13638860
> 
> 赞同：0
> 
> 时间：2012-11-30T04:07:06.343
> 
> 标签：java, regex

我想在某个文件中的两条评论之间获取内容。

像一个文件 x

```
#user code
alert("");
alert("");
#user code

{
 ===
====
}

#user code
alert("as");
alert("as");
#user code 
```

我正在使用这个正则表达式模式来匹配

```
final Pattern pat = Pattern.compile("//#User code\r?\n(.*)\r?\n//#User code" ,    Pattern.DOTALL); 
```

但它从第一个#user 代码到文件末尾的匹配。

请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T04:08:54.950

一个快速的解决方法是使用`.*?`而不是仅仅使用`.*`. 将`?`更改`*`为非*贪婪*重复，它将匹配到最近的`#user code`，而不是最远的。

# ios - CGDataProviderCopyData 泄漏

> ID：13638863
> 
> 赞同：0
> 
> 时间：2012-11-30T04:07:40.377
> 
> 标签：ios, memory-management

所以 xcode 工具告诉我下面的代码有泄漏

```
imageRef = [[_originalGridView image] CGImage];
_width = CGImageGetWidth(imageRef);
_height = CGImageGetHeight(imageRef);

//leak?
pixelData = (NSData*)CGDataProviderCopyData(CGImageGetDataProvider(imageRef));

rawData = (unsigned char*) [pixelData bytes]; 
```

问题是如果我尝试释放pixelData会崩溃，我在这里有点不知所措。有没有另一种方法可以做我目前正在做的事情，或者我应该释放我没有的东西。

编辑：对于那些说我应该发布像素数据的人，这是我尝试时会发生的事情

malloc：*** 对象 0x547b000 的错误：未分配被释放的指针 ***在 malloc_error_break 中设置断点以进行调试

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-27T11:14:24.120

在转换之前创建 CGDataRef 数据的副本，然后转换为 NSData，在处理完您拥有的 CGDataRef 副本之后，然后像这样释放副本。

```
 CFDataRef theData; 
    theData = CGDataProviderCopyData(CGImageGetDataProvider(imageRef));
// caste 
    NSData *data = (__bridge NSData *)theData; 

    //.. do some stuff 

    //Releaase data 

    CFRelease(theData); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T04:31:21.930

我认为你需要保留第`rawData`一个然后你可以释放pixelData，`CFRelease(pixelData)` 不要忘记`rawData`在使用后释放。

# python - pandas：将 MultiIndex DataFrame 与 Series 相乘

> ID：13638865
> 
> 赞同：2
> 
> 时间：2012-11-30T04:07:44.503
> 
> 标签：python, numpy, pandas

我有一个包含这些值的 MultiIndex DataFrame：

```
 AAPL
           minor          
2007-09-14 OC     0.024436
2007-09-15 CC     0.030293
           CO     0.017518
           OC     0.024688
           OO     0.031835

# to_dict():

{'AAPL': {(<Timestamp: 2007-09-14 00:00:00>, 'OC'): 0.024436265475779286,
  (<Timestamp: 2007-09-15 00:00:00>, 'CC'): 0.030293017084353703,
  (<Timestamp: 2007-09-15 00:00:00>, 'CO'): 0.017518449703066673,
  (<Timestamp: 2007-09-15 00:00:00>, 'OC'): 0.024688182799779634,
  (<Timestamp: 2007-09-15 00:00:00>, 'OO'): 0.031834725061579666}} 
```

--

和一个包含这些值的系列：

```
CC    15.874508
CO    18.590320
OC    30.503468
OO    15.874508

# to_dict():

{'CC': 15.874507866387544,
 'CO': 18.590320061795602,
 'OC': 30.503467646507644,
 'OO': 15.874507866387544} 
```

我想将所有次要索引 CC 值乘以系列中的 CC 值，并且与其他值相同。我在这里看到了另一个问题，它给了我 .mul 方法，但是当我尝试这样做时，即使使用 level='minor'，它也会告诉我：

> TypeError：只能与其他分层索引对象一起调用

我已经取消堆叠次要索引以使其成为列，并指定 level='minor', axis='columns' 具有相同的结果。

最后，最终结果是能够在主要列是几个股票的 DataFrame 上运行相同的计算——在这种情况下，.mul() 是否也适用于每个股票？

感谢你的协助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-03T16:56:40.940

基于系列的它适用于`level`：

```
df["C01"].mul(s, level=1)

major       minor
2007-09-14  OC       0.745391
2007-09-15  CC       0.480887
            CO       0.325674
            OC       0.753075
            OO       0.505361 
```

然后你可以将它再次插入到你的 DataFrame 中。但这也应该适用于 DataFrames，也许你可以建议它。

# mamp - 更改了 php.ini 中的 upload_max_filesize 但 phpinfo 未显示更改

> ID：13638868
> 
> 赞同：5
> 
> 时间：2012-11-30T04:07:52.617
> 
> 标签：mamp, php

基本上phpinfo说upload_max_filesize是2M，但是我在php.ini文件中把它改成了8M。我正在使用 MAMP，所以我重新启动了 MAMP，phpinfo 仍然显示 2M。我检查了 phpinfo 显示的 php.ini 文件的路径，它完全匹配。请参阅我记录所有这些的 YouTube 视频。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-08-01T02:37:22.190

您应该更改 /Applications/MAMP/bin/php/php5.4.10/conf/php.ini 中的文件

在你应该重置 MAMP 之后。我之前也更改了所有的php.ini，并且phpinfo（）没有更改，但我不确定它是否需要工作，所以如果只更改上面路径中的文件，请尝试更改其他文件。

我希望对你有所帮助。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2019-10-22T13:37:04.890

在**MAC**操作系统上，确保您在正确的位置`path`：

`/Applications/MAMP/bin/php/phpx.x.x/conf/php.ini`

我看到很多人对此有疑问，因为还有另一个 conf 目录

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2018-10-30T16:30:52.913

可以肯定的是，用这个 PHP 内容编写一个文件：

```
<?php

phpInfo();

?> 
```

并将其保存在您的主 MAMP 文档根目录中（与任何其他网页一样），名称为`info.php`

与任何其他 MAMP 网页一样，在浏览器中将该文件作为 Web URL 打开，例如：`http://127.0.0.1:8888/info.php`

`php.ini`在该页面中搜索字符串： 。

你会发现这样一行：

`Configuration File (php.ini) Path /Applications/MAMP/bin/php/php7.2.8/conf`

该行将向您显示 PHP 在那一刻使用的 ini 文件的正确路径。这取决于您使用的 PHP 版本。

删除（或用难以猜测的名称重命名）info.php 文件，之后（避免向世界提供所有这些信息）。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-11-30T04:54:43.093

在 httpd.conf 文件中，PhpIniDir 的路径错误。它被一个目录关闭。这就是解决办法！

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2021-08-20T01:50:05.240

您可以使用以下方法更新 PHP 配置：

```
File(menu) -> Open template -> PHP -> {select PHP version that you want update} 
```

资料来源：[http ://blog-en.mamp.info/2009/09/increase-php-memory-limit-with-mamp-pro.html](http://blog-en.mamp.info/2009/09/increase-php-memory-limit-with-mamp-pro.html)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-10-02T08:38:14.727

我对 MAMP（非专业版）也有同样的问题，MAM 已停止我正在使用的当前 php 版本是 php7.2.20，我在 /Applications/MAMP/bin/php/php7.2.20 和 /Applications/MAMP/ 中的所有地方都进行了更改conf/php7.2.20

post_max_size = 128M upload_max_filesize = 128M

我重新启动 MAMP，我得到 php7.2.20 post_max_size = 8M upload_max_filesize = 32M

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-08-24T14:30:26.840

MAMP PRO php 配置文件是从其他路径加载的。

我在替换 mamp/bin/php/ 目录中的所有 php 信息后发现它没有结果。

```
/Applications/MAMP PRO/MAMP PRO.app/Contents/Resources/php(VERSION).ini 
```

# google-maps-api-3 - 带有融合表的 SQL 大圆距离

> ID：13638870
> 
> 赞同：1
> 
> 时间：2012-11-30T04:08:05.247
> 
> 标签：google-maps-api-3

我在使用地理编码器和 X 列和 Y 列存储长纬度的融合表时遇到了搜索位置半径函数的困难。实际上问题出在查询的 WHERE 条件中。如果可以调试，谢谢。这是我的功能：

```
function CP_query() {
  CPsearch = document.getElementById('CP_Input').value;
  geocoder.geocode( { 'address': CPsearch}, function(results, status) {
    if (status == google.maps.GeocoderStatus.OK) {
      mylat = results[0].geometry.location.lat();
      mylon = results[0].geometry.location.lng();
      //alert("lat : " + mylat + "long: " + mylon);
      layer_imm = new google.maps.FusionTablesLayer({
          query: {
              select: 'geometry',
              from: '1ckqpE8ZxVzfgJ5bT-vAkpBwjVANbV-KiNjfScjw',
              where: '6371 * acos( cos( radians(' + mylat + ') ) * cos( radians( Y ) ) * cos( radians( X ) - radians(' + mylon + ') ) + sin( radians(' + mylat + ') ) * sin( radians( Y ) ) ) < 2'
           }
       }); 
       layer_imm.setMap(map);
       map.setCenter(results[0].geometry.location);
       var marker = new google.maps.Marker({
       map: map,
       position: results[0].geometry.location
       });
   } else {
     alert("Geocode was not successful for the following reason: " + status);
   }
 });
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T04:38:13.323

使用[ST_INTERSECTS](https://developers.google.com/fusiontables/docs/v1/sql-reference#Select)

3218米是圆的半径。

```
query: {
  select:'geometry'
  from:  '1ckqpE8ZxVzfgJ5bT-vAkpBwjVANbV-KiNjfScjw',
  where: 'ST_INTERSECTS(geometry,CIRCLE(LATLNG('+ mylat + ',' + mylon + '), 3218))'
} 
```

[工作示例](http://www.geocodezip.com/v3_simpleMap_SO_FusionTableQuery.html)

# java - 将内部可运行类导出到 jar（剪辑）中

> ID：13638875
> 
> 赞同：1
> 
> 时间：2012-11-30T04:08:43.403
> 
> 标签：java, multithreading, runnable

我在导出我正在处理的项目时遇到问题，该项目通过实现可运行来调用线程事件的内部类。它在eclipse中可以正常工作，但是在导出时，它会无法启动内部类。这只发生在实现可运行的类中。

这仅在导出的 jar 格式中发生，但在 eclipse 中可以很好地工作。

我正在调用线程：

```
new Thread(new SomeRunnable()).start(); 
```

SomeRunnable 在哪里

```
public class SomeRunnable implements Runnable {

@Override
public void run() {
    //Create a clip
    try {
        Clip clip;
        clip = AudioSystem.getClip();
        AudioInputStream audioIn = AudioSystem.getAudioInputStream(soundFile);
        clip.open(audioIn);
        clip.loop(reps);
    } catch (LineUnavailableException e1) {
        e1.printStackTrace();
        System.exit(0);
    } catch (UnsupportedAudioFileException e1) {
        e1.printStackTrace();
        System.exit(0);
    } catch (IOException e1) {
        e1.printStackTrace();
        System.exit(0);
    }
    System.out.println("Successful.");
} 
```

导出为runnable jar格式后，程序会正确启动并显示GUI，但是当它被告知运行线程SomeRunnable时，它什么也不做，甚至不进入try catch语句，因为它不播放剪辑，也不退出程序。这表明 jar 无法识别类文件并且不会从 main 方法调用它们。

什么会导致 jar 的工作方式与 eclipse 处理代码的方式不同？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T19:39:07.587

It turns out the actual solution was that I was storing my sound files inside the jar, thus my references to the directories were not working, because it had moved the directories. When the sound files were moved to outside of the jar, it worked and read the files and ran the threads.

# login - Perl 中的无效登录尝试

> ID：13638885
> 
> 赞同：0
> 
> 时间：2012-11-30T04:10:36.477
> 
> 标签：login, login-attempts

我正在使用 perl 处理登录表单。我希望在 30 分钟内限制 3 次无效登录尝试。我应该以哪种方式使用。给我一些想法，在哪里存储无效的登录尝试。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T04:32:15.053

你有几个不同的选择：

Cookies - 最不安全，因为不同的浏览器、清除 cookie 等都会影响这一点。不推荐，但为了完整性而列出。

数据库 - 如果您使用的是数据库，那么您可以创建一个记录每次*失败*登录尝试的表。在此表中`login_attempts`，您记录以下值：`date`、`username`。然后在任何尝试登录期间（*伪 SQL*）`SELECT COUNT(*) FROM login_attempts WHERE username = '$the_user_name' AND date BETWEEN '$now' AND '$now-30m'`。如果返回值 >= 3，则拒绝登录。确保在用户名和日期降序上创建聚集索引。如果您担心空间问题，那么您可以有一个每晚运行的作业，并删除日期早于 8 小时的任何记录。（虽然保留完好，但它可以用作审计日志。）

文件系统——这个选项太拜占庭了，我不打算深入描述它，假设你已经有某种数据库后备存储。如果你必须走这条路，那么它看起来像上面的数据库解决方案，没有 SELECT 语句，并且可能涉及用户名作为目录，其中包含每个登录尝试的文件，并且 (mtime + 30m < now) 必须是true 允许成功登录。当然，您需要确保为磁盘启用了 mtime，或者在文件中记录时间。

# jquery - jquerymobile如何隐藏listview的搜索栏

> ID：13638886
> 
> 赞同：1
> 
> 时间：2012-11-30T04:10:44.067
> 
> 标签：jquery, jquery-mobile

我有 3 个列表视图，其中 2 个具有 data-filter="true" 并且当用户单击上一个列表视图（例如分类过滤器）时，我以编程方式执行过滤器。

当前隐藏过滤栏的方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T19:48:48.290

可以尝试`$(selector).removeAttr("data-filter")`然后刷新列表视图。否则，您可以切换`display`通过 CSS。

当您说隐藏时，您的意思是禁用或只是使其对该列表不可见？

**编辑：**

快速示例：http: [//jsfiddle.net/Twisty/YF3nN/](http://jsfiddle.net/Twisty/YF3nN/)

过滤器是通过 JQM 添加的：

```
<form class="ui-listview-filter ui-bar-c" role="search">
    <div class="ui-input-search ui-shadow-inset ui-btn-corner-all ui-btn-shadow ui-icon-searchfield ui-body-c">
        <input class="ui-input-text ui-body-c" placeholder="Filter items..." data-type="search">
        <a class="ui-input-clear ui-btn ui-btn-up-c ui-shadow ui-btn-corner-all ui-fullsize ui-btn-icon-notext ui-input-clear-hidden" title="clear text" href="#" data-corners="true" data-shadow="true" data-iconshadow="true" data-wrapperels="span" data-icon="delete" data-iconpos="notext" data-theme="c" data-mini="false">
    </div>
</form> 
```

所以你所要做的就是选择正确的`form`，你可以隐藏它。

# java - 使用 ant 创建可执行 jar：如何将外部库文件添加到可执行 jar

> ID：13638890
> 
> 赞同：3
> 
> 时间：2012-11-30T04:11:22.907
> 
> 标签：java, ant, build

> **可能重复：**
> [Ant - 如何在特定文件夹中获取所有文件的名称](https://stackoverflow.com/questions/3796824/ant-how-to-get-all-files-name-in-a-specific-folder)

我使用 ant 为我的项目创建了一个 jar 文件。我的项目有一些外部库。如何将这些外部库文件添加到可执行 jar。
我在 Manifest 中添加了带有外部 jar 的 Class-path 属性。但它不起作用。
如何添加外部库。
提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-30T04:26:50.233

像这样：

```
<jar destfile="${jar.file}" 
    basedir="${build.dir}" 
    manifest="${manifest.file}">
    <fileset dir="${classes.dir}" includes="**/*.class" />
    <zipgroupfileset dir="${lib.dir}" includes="**/*.jar" />
</jar> 
```

也许这也可以帮助：

[http://code.google.com/p/jarjar/](http://code.google.com/p/jarjar/)

并且还阅读这个：

[http://docs.oracle.com/javase/tutorial/deployment/jar/downman.html](http://docs.oracle.com/javase/tutorial/deployment/jar/downman.html)

# html - 网页缩放

> ID：13638891
> 
> 赞同：0
> 
> 时间：2012-11-30T04:11:37.820
> 
> 标签：html

我正在学习网络开发，到目前为止已经创建了[这个](http://mygolfscore-app.com/)应用程序来跟踪我的高尔夫数据

现在，您可以通过手机或 PC 看到一切都非常小。这主要是一个手机应用程序，因为你会在高尔夫球场本身上使用它，所以我希望能够按百分比缩放它，比如第一页上的按钮占据了`20%`高度（其余的是空间) 并且它们在高度上均匀分布。它们也可能占据`75%`浏览器的宽度并居中。

过去我会使用`HTML`桌子，但我听说现在这被认为是不可以的。那么我将如何实现这种缩放/定位的想法是什么。任何例子或指针？

# java - 路径“file:///android_asset/”记录在哪里？

> ID：13638892
> 
> 赞同：18
> 
> 时间：2012-11-30T04:11:41.977
> 
> 标签：java, android

互联网上有许多页面都在谈论“file:///android_asset/”路径（有时在末尾附加一个*s* ...）以访问 assets 文件夹。我无法在此路径/功能上找到任何类型的官方或值得信赖的文档。

这条路径是否有任何适当的文档？Android 团队记录了吗？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-09-10T13:35:30.930

Android 是开源的，它的源代码是最准确的文档。这里来自[`android.webkit.URLUtil`](https://android.googlesource.com/platform/frameworks/base.git/+/android-4.2.2_r1/core/java/android/webkit/URLUtil.java)：

```
// to refer to bar.png under your package's asset/foo/ directory, use
// "file:///android_asset/foo/bar.png".
static final String ASSET_BASE = "file:///android_asset/";
// to refer to bar.png under your package's res/drawable/ directory, use
// "file:///android_res/drawable/bar.png". Use "drawable" to refer to
// "drawable-hdpi" directory as well.
static final String RESOURCE_BASE = "file:///android_res/"; 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-30T04:16:59.980

奇怪的是，我在以下搜索中只找到了一个命中：

*   [“android_asset”网站：android.com](https://www.google.com/search?q=%22android_asset%22+site%3Aandroid.com)

该搜索结果是 for [`WebSettings`](https://developer.android.com/reference/android/webkit/WebSettings.html)，其中顺便提到了`android_asset`和`android_res`路径。

但是，我确定我之前已经阅读过“官方”文档...

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-09-10T00:54:35.847

我找到了这个：

[http://developer.android.com/tools/projects/index.html](http://developer.android.com/tools/projects/index.html)

它提供了项目的目录结构。

有趣的部分说：

*   资产/这是空的。您可以使用它来存储原始资产文件。您在此处保存的文件将按原样编译为 .apk 文件，并保留原始文件名。您可以使用 URI 以与典型文件系统相同的方式导航此目录，并使用 AssetManager 将文件作为字节流读取。例如，这是放置纹理和游戏数据的好位置。

*   res/ 包含应用程序资源，例如可绘制文件、布局文件和字符串值。有关详细信息，请参阅应用程序资源。

    *   anim/ 用于编译成动画对象的 XML 文件。请参阅动画资源类型。

    *   color/ 用于描述颜色的 XML 文件。请参阅颜色值资源类型。

    *   drawable/ 用于位图文件（PNG、JPEG 或 GIF）、9-Patch 图像文件和描述可绘制形状或包含多种状态（正常、按下或聚焦）的可绘制对象的 XML 文件。请参阅可绘制资源类型。

    *   layout/ XML 文件被编译成屏幕布局（或屏幕的一部分）。请参阅布局资源类型。

    *   menu/ 用于定义应用程序菜单的 XML 文件。请参阅菜单资源类型。

    *   raw/ 用于任意原始资产文件。将资产文件保存在此处而不是 assets/ 目录中仅在您访问它们的方式上有所不同。这些文件由 aapt 处理，并且必须使用 R 类中的资源标识符从应用程序中引用。例如，这是存放 MP3 或 Ogg 文件等媒体的好地方。

    *   values/ 用于编译成多种资源的 XML 文件。与 res/ 目录中的其他资源不同，写入此文件夹中的 XML 文件的资源不被文件名引用。相反，XML 元素类型控制在其中定义的资源如何放入 R 类中。

    *   xml/ 用于配置应用程序组件的其他 XML 文件。例如，定义 PreferenceScreen、AppWidgetProviderInfo 或可搜索性元数据的 XML 文件。有关配置这些应用程序组件的更多信息，请参阅应用程序资源。

# tfs - TFS 和 Scrum - 区域、迭代、积压迭代、冲刺迭代的最佳实践配置

> ID：13638896
> 
> 赞同：26
> 
> 时间：2012-11-30T04:12:50.737
> 
> 标签：tfs, scrum, backlog, sprint

*这组问题试图引出关于如何使用 Scrum 2 设置 TFS 2012 区域和迭代的最佳实践答案。*

**背景：** 自 TFS 2005 以来，我们一直在使用 Team System，最初为我们拥有的每个产品创建了一个团队项目，然后使用了我们最终稍微调整的 MSF 4.2 流程模板（仅向某些工作项类型添加了一些字段）。

向前推进到今天，我们现在运行 TFS 2012 和 VS 2012。考虑到过去的经验和社区反馈，我们将转移到单个团队项目和 Scrum 2.1，然后使用区域来分离产品和团队。以下链接很好地阅读了这种方法：

*   [http://blog.hinshelwood.com/when-should-i-use-areas-in-tfs-instead-of-team-projects-in-team-foundation-server-2010/](http://blog.hinshelwood.com/when-should-i-use-areas-in-tfs-instead-of-team-projects-in-team-foundation-server-2010/)
*   [TFS 区域、优化定义和配置](https://stackoverflow.com/questions/8582557/tfs-areas-optimal-definition-and-configuration)
*   [Team Foundation Server - 区域/迭代](https://stackoverflow.com/questions/5106557/team-foundation-server-area-iteration)

我们计划申请区域的典型布局如下：

```
-> Team Project (Area root)
 |--> Client A (This is also out team boundary - ie. we have a TFS Team for Client A)
    |---> Product A
    |   |---> Feature Area 1
    |   |---> Feature Area 2
    |   |---> Feature Area 3
    |
    |---> Product B
    |   |---> Feature Area 1
    |   |---> Feature Area 2
    |
    | (ETC)

 |--> Client B (This is also out team boundary - ie. we have another TFS Team for Client B)
    |---> Product C
    |   |---> Feature Area 1
    |   |---> Feature Area 2
    |
    | (ETC) 
```

从概念上讲，我们对上述内容非常满意，因为它对我们的环境是合乎逻辑的。根据以上内容，我们将有以下团队：*“客户 A 团队”*“客户 B 团队”

**问题 1)**我们认为，由于我们的团队规模不大，并且为了使管理更易于管理，我们不想为每个产品定义团队，因为我们实际上每个客户都有团队，他们监督该客户的所有产品。这是一个错误，还是可以？

**问题 2）**假设上述团队配置正常，那么我们是否正确将上述每个区域“映射”到每个团队，即对于团队“客户 A 团队”，指定区域“客户 A”（以及所有子区域）为该团队拥有的区域。那么默认区域呢，将“客户端A”区域的根设置为团队默认区域可以吗？

至于迭代布局，我们计划类似的东西，像这样：

```
-> Team Project (iteration root)
 |--> Client A (This is also out team boundary - ie. we have a TFS Team for Client A)
    |---> Product A
    |   |---> Release 1
    |   |   |---> Sprint 1
    |   |   |---> Sprint 2
    |   |   |---> Sprint 3
    |   |
    |   |---> Release 2
    |   |   |---> Sprint 1
    |   |   |---> Sprint 2
    |   |   |---> Sprint 3
    |   |
    |   |---> Release 3
    |
    |---> Product B
    |   |---> Release 1
    |   |   |---> Sprint 1
    |   |   |---> Sprint 2
    |   | 
    |   |---> Release 2
    |   |   |---> Sprint 1
    |   |   |---> Sprint 2
    |
    | (ETC)

 |--> Client B (This is also out team boundary - ie. we have another TFS Team for Client B)
    |---> Product C
    |   |---> Release 1
    |   |   |---> Sprint 1
    |   |   |---> Sprint 2
    |   |
    |   |---> Release 2
    |   |   |---> Sprint 1
    |   |   |---> Sprint 2
    |
    | (ETC) 
```

**问题 3)**正确进行迭代似乎比较棘手，尤其是在 TFS 显示积压时。具体来说，对于 TFS Scrum 2 迭代设置，我似乎应该只选择（复选框）那些用于规划和后续开发的叶级迭代。因此，扩展上面的示例，我们可能会认为“客户 A 团队”将在接下来的 4 周（假设 2 周的 sprint）中开始新产品 B 的工作。那么我们是否*只能*从 Release 1 中选择（复选框）“Sprint 1”和“Sprint 2”？我是否正确理解/使用它？

**问题 4)**团队待办事项迭代选择——这可能是有问题的，因为我们的概念是每个客户都有团队，而不是每个产品都有团队，但也许我只是理解错了。在 TFS 区域设置中，您指定哪个迭代是“团队的积压迭代”。我的问题是我们的 PBI（产品待办事项）将是特定于产品的，并且不希望将它们与其他产品的 PBI 混合。所以我还无法理解的是，如果我们选择区域“客户 A”作为“团队的待办事项迭代”而不是“产品 B”，将会产生什么影响。我想我在这里让自己感到困惑 - 什么是明智的选择？

上述问题使我不了解这些迭代、区域、团队积压迭代和默认区域的选择将对每个定义的 TFS 2012 团队产生什么影响。我在此设置中遇到的一些问题是 TFS 无法正确识别团队的产品待办事项和冲刺待办事项。

我不知道是否有一个团队项目和多个产品领域（通常建议）使问题复杂化。

**问题 5)** TFS Web 访问网站 - 对于“工作 | 工作项 | 共享查询”下的任何给定团队，在名为“当前 Sprint”（阻止任务；Sprint 积压等）的文件夹下都有预定义的查询，但似乎这些查询针对“Root Project\Release 1\Sprint 1”进行了硬编码——在给定针对迭代定义的日期的情况下，这些是否不应该自动发现当前的 sprint？如果不是，那么维护这些查询的最佳做法是什么？

您是否知道一些高质量的 TFS 2012 和 Scrum 2 特定培训/教程可能有助于解决这些问题，或者为成功的 Scrum 2 TFS 设置提供一些指导？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-12-05T19:45:14.053

我希望你找到了我的帖子的用途，我还建议你看一下[One Team Project to rule them all](http://blog.hinshelwood.com/one-team-project/)和[TFS vNext：Configuring your project to have a master backlog and sub-teams](http://blogs.msdn.com/b/greggboer/archive/2012/01/27/tfs-vnext-configuring-your-project-to-have-a-master-backlog-and-sub-teams.aspx)。

这是我尽力回答您的问题：

> > 问题 1) 我们认为，由于我们的团队规模不大，并且为了使管理更易于管理，我们不想为每个产品定义团队，因为我们实际上每个客户都有团队，他们监督该客户的所有产品。这是一个错误，还是可以？

这很好，可以让你像你的团队一样成长。如果您的团队成员跨多个客户工作，您可能会遇到优先级和上下文切换问题，您可以通过将团队提升一个级别，或者拥有一个统一的积压工作和单独的子团队，但仍然专注于客户工作而不是产品工作，可以最大限度地减少这些问题。对于您拥有的布局，我确实会推荐这种方法。

> > 问题 2）假设上述团队配置正常，那么我们是否正确将上述每个区域“映射”到每个团队，即对于团队“客户 A 团队”，将区域“客户 A”（和所有子区域）指定为该团队拥有的区域。那么默认区域呢，将“客户端A”区域的根设置为团队默认区域可以吗？

这确实是正确的，并且当使用这些默认值选择该团队时，应该会创建所有工作项。许多组织还创建了一个父积压或主积压，其中创建、排序并划分为适当的团队积压，如 Greg Boer，TFS 敏捷规划工具的产品负责人，在他的帖子[TFS vNext：配置您的项目以拥有一个主积压和子团队](http://blogs.msdn.com/b/greggboer/archive/2012/01/27/tfs-vnext-configuring-your-project-to-have-a-master-backlog-and-sub-teams.aspx)。

只要您的团队不跨越客户端之间的边界，您的迭代布局确实看起来不错，否则您将开始难以将区域和迭代映射到团队。如果您认为您可能需要将一个团队或一组团队映射到多个客户，那么您可能需要更多类似的东西：

```
-> Team Project (Iteration root)
 |—&gt; Team Boundary (This could be one or more teams)
    |--> Client A (This is also out team boundary - ie. we have a TFS Team for Client A)
        |---> Product A
        |   |---> Release 1
        |   |---> Release 2
        |   |---> Release 3
        |
        |---> Product B
        |   |---> Release 1
        |   |---> Release 2
        |
        | (ETC)

    |--> Client B (This is also out team boundary - ie. we have another TFS Team for Client B)
        |---> Product C
        |   |---> Release 1
        |   |---> Release 2
        |
        | (ETC) 
```

虽然仍然不是动态的，但这将启用该场景。但是，我仍会保留我的 $\TeamProject\Client A\ProductA 源代码控制结构，而不是对其进行过滤。它只是对规划过程的划分，不应该溢出到 ALM 解决方案的其他部分。

> > 问题 3) 正确进行迭代似乎比较棘手，尤其是在 TFS 显示积压时。具体来说，对于 TFS Scrum 2 迭代设置，我似乎应该只选择（复选框）那些用于规划和后续开发的叶级迭代。因此，扩展上面的示例，我们可能会认为“客户 A 团队”将在接下来的 4 周（假设 2 周的 sprint）中开始新产品 B 的工作。那么我们是否只能从 Release 1 中选择（复选框）“Sprint 1”和“Sprint 2”？我是否正确理解/使用它？

你是，但你真的在寻找 3 个 Sprint 以作为 Scrum 流程的一部分来获得可操作的积压工作。我建议您按顺序对您的 sprint 进行连续编号，以便在 UI 中您不会对 Sprint 2 感到困惑，如果您也勾选 Sprint 4（如果它称为 Sprint 1）。保持对当前团队的经验水平的统计也很好.

```
-> Team Project (Iteration root)
 |—&gt; Team Boundary (This could be one or more teams)
    |--> Client A (This is also out team boundary - ie. we have a TFS Team for Client A)
        |---> Product A
        |   |---> Release 1
        |   |   |---> Sprint 1
        |   |   |---> Sprint 2
        |   |   |---> Sprint 3
        |   |---> Release 2
        |   |   |---> Sprint 4
        |   |   |---> Sprint 5
        |   |   |---> Sprint 6
        |   |---> Release 3
        |   |   |---> Sprint 7
        |   |   |---> Sprint 8
        |   |   |---> Sprint 9
        |
        | (ETC) 
```

但是您对所涉及的技术过程及其将达到的结果基本上是正确的。

> > 问题 4) 团队待办事项迭代选择——这可能是有问题的，因为我们的概念是每个客户都有团队，而不是每个产品都有团队，但也许我只是理解错了。在 TFS 区域设置中，您指定哪些迭代是“团队的积压迭代”。我的问题是我们的 PBI（产品待办事项）将是特定于产品的，并且不希望将它们与其他产品的 PBI 混合。所以我还无法理解的是，如果我们选择区域“客户 A”作为“团队的待办事项迭代”而不是“产品 B”，将会产生什么影响。我想我在这里让自己感到困惑 - 什么是明智的选择？

您不会混淆自己，并且将某些内容输入团队积压的人将需要将默认值更改为他们想要更改的产品的迭代/区域。至少在默认情况下，您将获得正确的团队，并且对于输入项目的人、产品负责人或团队成员来说，正确分类应该是一件容易的事。

默认情况下，您指定为团队默认值的区域下的任何内容都包含在您看到的项目中。您可以“右键单击”团队的默认区域并取消选择“包括子区域”，这样您就只能看到顶层，这是用于 Greg 的 Master Backlog 的技术。但是，我建议您保持“包括子区域”的设置，以提高团队内部的可见性和透明度。

> > 我不知道是否有一个团队项目和多个产品领域（通常建议）使问题复杂化。

它可以。一些组织更喜欢将“团队”的下拉列表添加到他们的工作项目（如 Conchango/EMC 模板）中，并将其用作他们的团队名称，可以在敏捷规划工具配置中将其配置为默认值。这样，如果您遇到问题，您就不需要在区域或迭代中指定团队。如果没有有关您的组织如何配置的更多信息，我没有任何建议。

> > 问题 5) TFS Web 访问网站 - 对于“工作 | 工作项 | 共享查询”下的任何给定团队，在名为“当前 Sprint”（阻止任务；Sprint 积压等）的文件夹下都有预定义的查询，但似乎这些查询针对“Root Project\Release 1\Sprint 1”进行了硬编码——在给定针对迭代定义的日期的情况下，这些是否不应该自动发现当前的 sprint？如果不是，那么维护这些查询的最佳做法是什么？

选项 1：每个 Sprint 花费 2 分钟来更改查询

选项 2：创建一个工具来为您执行此操作

选项 3：在您的版本中添加一个额外的“当前”迭代节点，并将当前活动的迭代移动到该节点下方。然后将查询设置为指向“Client A\Product A\Release 1\Current”的“Under”。然后更改一次嵌套迭代会更快，所有查询都可以工作。然后，您只需要更改当前版本，但每个版本一次。

> > 您是否知道一些高质量的 TFS 2012 和 Scrum 2 特定培训/教程可能有助于解决这些问题，或者为成功的 Scrum 2 TFS 设置提供一些指导？

我会推荐来自 Scrum.org 的专业 Scrum 开发人员培训或/并与 ALM 顾问合作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-01T13:32:22.187

与此问题以及有关 TFS 结构、项目和团队的所有事情相关，@MrHinsh 有以下关于使用 TFS 团队**而不**将它们分配到区域的博客文章。但这并非没有谨慎。

更多在他的博客： http: [//nakedalm.com/team-foundation-server-2012-teams-without-areas/](http://nakedalm.com/team-foundation-server-2012-teams-without-areas/)

# python - 如何在 Python 3 中使用过滤器、映射和归约

> ID：13638898
> 
> 赞同：353
> 
> 时间：2012-11-30T04:12:53.020
> 
> 标签：python, python-3.x, filter, functional-programming, reduce

`filter`, `map`, 并`reduce`在 Python 2 中完美运行。这是一个示例：

```
>>> def f(x):
        return x % 2 != 0 and x % 3 != 0
>>> filter(f, range(2, 25))
[5, 7, 11, 13, 17, 19, 23]

>>> def cube(x):
        return x*x*x
>>> map(cube, range(1, 11))
[1, 8, 27, 64, 125, 216, 343, 512, 729, 1000]

>>> def add(x,y):
        return x+y
>>> reduce(add, range(1, 11))
55 
```

但在 Python 3 中，我收到以下输出：

```
>>> filter(f, range(2, 25))
<filter object at 0x0000000002C14908>

>>> map(cube, range(1, 11))
<map object at 0x0000000002C82B70>

>>> reduce(add, range(1, 11))
Traceback (most recent call last):
  File "<pyshell#8>", line 1, in <module>
    reduce(add, range(1, 11))
NameError: name 'reduce' is not defined 
```

如果有人能向我解释为什么会这样，我将不胜感激。

代码截图更清楚：

[![Python 2 和 3 的 IDLE 会话并排](../Images/e299169e216955a80a06aed3741d2ea4.png)](https://i.imgur.com/WekeD.png)

* * *

## 回答 #1

> 赞同：376
> 
> 时间：2012-11-30T04:22:03.457

您可以阅读[Python 3.0 中的新增功能](http://docs.python.org/3.0/whatsnew/3.0.html)中的更改。当您从 2.x 迁移到 3.x 时，您应该仔细阅读它，因为已经发生了很多变化。

这里的整个答案是文档中的引用。

**[视图和迭代器代替列表](http://docs.python.org/3.0/whatsnew/3.0.html#views-and-iterators-instead-of-lists)**

> 一些著名的 API 不再返回列表：
> 
> *   [...]
> *   [`map()`](http://docs.python.org/3.0/library/functions.html#map)并[`filter()`](http://docs.python.org/3.0/library/functions.html#filter)返回迭代器。如果你真的需要一个列表，一个快速的解决方法是 eg `list(map(...))`，但更好的解决方法通常是使用列表推导（尤其是当原始代码使用 lambda 时），或者重写代码使其根本不需要列表。`map()`对于函数的副作用调用特别棘手；正确的转换是使用常规`for`循环（因为创建列表只是浪费）。
> *   [...]

**[内置](http://docs.python.org/3.0/whatsnew/3.0.html#builtins)**

> *   [...]
> *   已删除`reduce()`。[`functools.reduce()`](http://docs.python.org/3.0/library/functools.html#functools.reduce)如果您确实需要，请使用它；但是，在 99% 的情况下，显式`for`循环更具可读性。
> *   [...]

* * *

## 回答 #2

> 赞同：98
> 
> 时间：2012-11-30T04:17:44.600

`map`and的功能`filter`被有意更改为返回迭代器，reduce 被从内置中删除并放置在`functools.reduce`.

因此，对于`filter`和，您可以像以前一样`map`将它们包装起来以查看结果。`list()`

```
>>> def f(x): return x % 2 != 0 and x % 3 != 0
...
>>> list(filter(f, range(2, 25)))
[5, 7, 11, 13, 17, 19, 23]
>>> def cube(x): return x*x*x
...
>>> list(map(cube, range(1, 11)))
[1, 8, 27, 64, 125, 216, 343, 512, 729, 1000]
>>> import functools
>>> def add(x,y): return x+y
...
>>> functools.reduce(add, range(1, 11))
55
>>> 
```

现在的建议是您使用生成器表达式或列表推导替换您对 map 和 filter 的使用。例子：

```
>>> def f(x): return x % 2 != 0 and x % 3 != 0
...
>>> [i for i in range(2, 25) if f(i)]
[5, 7, 11, 13, 17, 19, 23]
>>> def cube(x): return x*x*x
...
>>> [cube(i) for i in range(1, 11)]
[1, 8, 27, 64, 125, 216, 343, 512, 729, 1000]
>>> 
```

他们说 for 循环在 99% 的时间里比 reduce 更容易阅读，但我还是坚持使用`functools.reduce`.

**编辑**： 99% 的数字直接来自Guido van Rossum 编写的[Python 3.0 中的新增功能页面。](https://docs.python.org/3.0/whatsnew/3.0.html "Python 3.0 的新特性")

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2016-08-31T04:00:39.980

作为其他答案的补充，这听起来像是上下文管理器的一个很好的用例，它将这些函数的名称重新映射到返回列表并`reduce`在全局命名空间中引入的函数的名称。

快速实现可能如下所示：

```
from contextlib import contextmanager    

@contextmanager
def noiters(*funcs):
    if not funcs: 
        funcs = [map, filter, zip] # etc
    from functools import reduce
    globals()[reduce.__name__] = reduce
    for func in funcs:
        globals()[func.__name__] = lambda *ar, func = func, **kwar: list(func(*ar, **kwar))
    try:
        yield
    finally:
        del globals()[reduce.__name__]
        for func in funcs: globals()[func.__name__] = func 
```

使用如下所示：

```
with noiters(map):
    from operator import add
    print(reduce(add, range(1, 20)))
    print(map(int, ['1', '2'])) 
```

哪个打印：

```
190
[1, 2] 
```

只是我的 2 美分 :-)

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2018-06-25T02:20:24.877

由于该`reduce`方法已从 Python3 的内置函数中删除，因此不要忘记`functools`在代码中导入。请看下面的代码片段。

```
import functools
my_list = [10,15,20,25,35]
sum_numbers = functools.reduce(lambda x ,y : x+y , my_list)
print(sum_numbers) 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2020-05-23T05:53:35.937

map、filter 和 reduce 的优点之一是当您将它们“链接”在一起以执行复杂的操作时它们变得多么清晰。但是，内置语法不清晰，都是“倒退”的。所以，我建议使用这个`PyFunctional`包（[https://pypi.org/project/PyFunctional/](https://pypi.org/project/PyFunctional/)）。 **这是两者的比较：**

```
flight_destinations_dict = {'NY': {'London', 'Rome'}, 'Berlin': {'NY'}} 
```

**PyFunctional 版本**

非常清晰的语法。你可以说：

> “我有一系列航班目的地。如果 city 在 dict 值中，我想从中获取 dict 键。最后，过滤掉我在此过程中创建的空列表。”

```
from functional import seq  # PyFunctional package to allow easier syntax

def find_return_flights_PYFUNCTIONAL_SYNTAX(city, flight_destinations_dict):
    return seq(flight_destinations_dict.items()) \
        .map(lambda x: x[0] if city in x[1] else []) \
        .filter(lambda x: x != []) \ 
```

**默认 Python 版本**

都是倒退。你需要说：

> “好的，所以，有一个列表。我想从中过滤掉空列表。为什么？因为如果城市在 dict 值中，我首先得到 dict 键。哦，我这样做的列表是 flight_destinations_dict。 "

```
def find_return_flights_DEFAULT_SYNTAX(city, flight_destinations_dict):
    return list(
        filter(lambda x: x != [],
               map(lambda x: x[0] if city in x[1] else [], flight_destinations_dict.items())
               )
    ) 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2018-12-18T07:35:26.953

以下是 Filter、map 和 reduce 函数的示例。

> > > 数字 = [10,11,12,22,34,43,54,34,67,87,88,98,99,87,44,66]

//筛选

> > > 奇数 = 列表（过滤器（λ x：x%2 ！= 0，数字））
> > > 
> > > 打印（奇数）

//地图

> > > multiplyOf2 = list(map(lambda x: x*2, numbers))
> > > 
> > > 打印（乘以 2）

//减少

reduce 函数因为不常用，所以从 Python 3 的内置函数中删除。它仍然在 functools 模块中可用，所以你可以这样做：

> > > 从 functools 导入减少
> > > 
> > > sumOfNumbers = reduce(lambda x,y: x+y, 数字)
> > > 
> > > 打印（总和）

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-09-22T16:28:49.500

```
from functools import reduce

def f(x):
    return x % 2 != 0 and x % 3 != 0

print(*filter(f, range(2, 25)))
#[5, 7, 11, 13, 17, 19, 23]

def cube(x):
    return x**3
print(*map(cube, range(1, 11)))
#[1, 8, 27, 64, 125, 216, 343, 512, 729, 1000]

def add(x,y):
    return x+y

reduce(add, range(1, 11))
#55 
```

它按原样工作。要获取 map 的输出，请使用 * 或 list

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2021-01-13T23:05:23.423

### 拉姆达

尝试了解普通的 def 定义函数和 lambda 函数之间的区别。这是一个返回给定值的立方体的程序：

```
# Python code to illustrate cube of a number 
# showing difference between def() and lambda(). 
def cube(y): 
    return y*y*y 

lambda_cube = lambda y: y*y*y 

# using the normally 
# defined function 
print(cube(5)) 

# using the lamda function 
print(lambda_cube(5)) 
```

输出：

```
125
125 
```

不使用 Lambda：

*   在这里，它们都返回给定数字的立方体。但是，在使用 def 时，我们需要定义一个名为 cube 的函数，并且需要向它传递一个值。执行后，我们还需要使用 return 关键字从调用函数的位置返回结果。

使用 Lambda：

*   Lambda 定义不包含“return”语句，它总是包含一个返回的表达式。我们还可以将 lambda 定义放在任何需要函数的地方，我们根本不必将它分配给变量。这就是 lambda 函数的简单性。

* * *

Lambda 函数可以与内置函数一起使用，例如`filter()`,`map()`和`reduce()`.

### lambda() 和 filter()

Python 中的`filter()`函数接受一个函数和一个列表作为参数。这提供了一种优雅的方式来过滤掉序列“sequence”的所有元素，函数为其返回`True`.

```
my_list = [1, 5, 4, 6, 8, 11, 3, 12]

new_list = list(filter(lambda x: (x%2 == 0) , my_list))

print(new_list)

ages = [13, 90, 17, 59, 21, 60, 5]

adults = list(filter(lambda age: age>18, ages)) 

print(adults) # above 18 yrs 
```

输出：

```
[4, 6, 8, 12]
[90, 59, 21, 60] 
```

### lambda() 与 map()

Python 中的`map()`函数接受一个函数和一个列表作为参数。使用 lambda 函数和一个列表调用该函数，并返回一个新列表，其中包含该函数为每个项目返回的所有 lambda 修改项。

```
my_list = [1, 5, 4, 6, 8, 11, 3, 12]

new_list = list(map(lambda x: x * 2 , my_list))

print(new_list)

cities = ['novi sad', 'ljubljana', 'london', 'new york', 'paris'] 

# change all city names 
# to upper case and return the same 
uppered_cities = list(map(lambda city: str.upper(city), cities)) 

print(uppered_cities) 
```

输出：

```
[2, 10, 8, 12, 16, 22, 6, 24]
['NOVI SAD', 'LJUBLJANA', 'LONDON', 'NEW YORK', 'PARIS'] 
```

### 减少

`reduce()``map()`与和的工作方式不同`filter()`。它不会根据`function`我们传递的和迭代返回一个新列表。相反，它返回一个值。

此外，在 Python 3`reduce()`中不再是内置函数，它可以在`functools`模块中找到。

语法是：

```
reduce(function, sequence[, initial]) 
```

`reduce()`通过调用`function`我们为序列中的前两项传递的来工作。返回的结果与下一个（在本例中为第三个）元素一起`function`用于另一个调用中。`function`

如果存在可选参数`initial`，则在此“循环”的开头使用第一次调用中的第一个元素`function`。在某种程度上，该`initial`元素是第一个元素之前的第 0 个元素（如果提供）。

### lambda() 和 reduce()

Python 中的 reduce() 函数接受一个函数和一个列表作为参数。该函数使用 lambda 函数和一个可迭代的函数调用，并返回一个新的缩减结果。这对可迭代的对执行重复操作。

```
from functools import reduce

my_list = [1, 1, 2, 3, 5, 8, 13, 21, 34] 

sum = reduce((lambda x, y: x + y), my_list) 

print(sum) # sum of a list
print("With an initial value: " + str(reduce(lambda x, y: x + y, my_list, 100))) 
```

```
88
With an initial value: 188 
```

* * *

这些函数是便利函数。它们在那里，因此您可以避免编写更繁琐的代码，但避免过多地使用它们和 lambda 表达式，因为“你可以”，因为它通常会导致难以维护的难以辨认的代码。仅当您在查看函数或 lambda 表达式时绝对清楚发生了什么时才使用它们。

# java - 如何根据表中的客户数将sql查询中的计数值存储到变量中以创建customerid？

> ID：13638900
> 
> 赞同：0
> 
> 时间：2012-11-30T04:13:10.410
> 
> 标签：java, sql, variables, count

我想将收到的计数值存储到变量计数中，然后可以将其附加到字符串以准备客户 ID，但它给了我光标无效错误。请看下面并帮助我。提前致谢。:)

```
 **package components;
    import java.awt.geom.GeneralPath;
    import java.sql.Connection;
    import java.sql.DriverManager;
    import java.sql.ResultSet;
    import java.sql.SQLException;
    import java.sql.Statement;
    public class genrateid {

        public void generateid(){

    int count;

            try {
                Class.forName("sun.jdbc.odbc.JdbcOdbcDriver");
                Connection conn = DriverManager.getConnection("jdbc:odbc:XE",
                        "system", "tiger");
                System.out.println("Connection Successfull");
                System.out.println(conn); 

                //--------------------------------------------------------------------
                Statement stmt = conn.createStatement();
                String query1= "select count(*) as customercount from customers";

                ResultSet rs= stmt.executeQuery(query1);
    count = rs.getInt(1);
            } catch (ClassNotFoundException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            } catch (SQLException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }

            }

        public static void main(String[] args) {
            genrateid gen = new genrateid();
            gen.generateid();

        }
        }**

I am receiving the following error in  in eclipse IDE: 
```

输出：

```
Connection Successfull
sun.jdbc.odbc.JdbcOdbcConnection@39b27b
java.sql.SQLException: [Microsoft][ODBC Driver Manager] Invalid cursor state
    at sun.jdbc.odbc.JdbcOdbc.createSQLException(Unknown Source)
    at sun.jdbc.odbc.JdbcOdbc.standardError(Unknown Source)
    at sun.jdbc.odbc.JdbcOdbc.SQLGetDataInteger(Unknown Source)
    at sun.jdbc.odbc.JdbcOdbcResultSet.getDataInteger(Unknown Source)
    at sun.jdbc.odbc.JdbcOdbcResultSet.getInt(Unknown Source)
    at components.genrateid.generateid(genrateid.java:29)
    at components.genrateid.main(genrateid.java:43) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T04:47:26.160

插入这一行

```
if(rs.next()) 
```

前

```
 count = rs.getInt(1); 
```

你会好起来的。但是，正如 Dems 所说，考虑使用 IDENTITY 列（或者因为您使用的是 Oracle - SEQUENCE）

# jquery - 从 $.each 循环创建键值对对象

> ID：13638908
> 
> 赞同：0
> 
> 时间：2012-11-30T04:14:32.470
> 
> 标签：jquery, javascript-objects

我正在尝试通过一些 DOM 元素循环创建具有键值对的对象。

关于我正在做的整体背景的一些背景：这部分代码是我正在创建的问卷的一部分。

这是有问题的代码：

```
var resultsView = {};        
function sumAnswers(className) {
       //some stuff here

        $(className:checked).each(function() {
        //some other code here to sum answers  

        var text = $(this).siblings('.question').text();
        var answer = $(this).next('label').text();
        resultsView[text] = answer;
        });
  } 
```

我正在尝试将问题文本和选定的答案文本以键/值关系添加到对象，这样我以后可以通过 AJAX 将其传递给 PHP 文件。

问题是，当我 console.log resultsView 时，它只会多次添加一个问题/答案。将运算符更改为 += 也不起作用。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T04:40:50.993

我看不到这样的问题，请您在下面的 jsfiddle 中检查一下

[http://jsfiddle.net/sZYaf/19/](http://jsfiddle.net/sZYaf/19/)

我在上面指定的情况下创建了类似的代码

```
$("#check").click(function(){

var resultsView = {};
$(".check:checked").each(function() {
    //some other code here to sum answers  

    var text = $(this).siblings('.question').text();
    var answer = $(this).next('label').text();
    resultsView[text] = answer;

    });
 alert(resultsView["question1"]  + resultsView["question2"] );
}); 
```

谢谢

# c# - 获取通过输入文件类型选择的文件的完整路径

> ID：13638910
> 
> 赞同：0
> 
> 时间：2012-11-30T04:14:45.330
> 
> 标签：c#, javascript, asp.net, input-type-file, file-location

从我的网页，我只想浏览一个视频文件，然后获取它的完整路径，这样我就可以使用该路径通过 VLC 流式传输视频文件，使用命令行过程。

为此，我将一个文件类型控件放到了我的网页中。

选择文件后，当我检查输入字段的值时。然后我只得到文件的名称

即，如果我从桌面上选择一个名为 1.mov 的文件，则默认文本框中显示的位置为输入文件类型`C:\Users\xx\Desktop\1.mov`

但是当我检查输入字段的值时，它只给出视频文件的名称，即`1.mov`

谁能给我一个合适的解决方法，或者可能是其他方式来获取所选文件的完整路径。

任何帮助将不胜感激。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T04:29:17.820

您必须先在服务器上上传文件，然后您可以使用以下方法获取根路径，

`Server.MapPath("~")`：它将物理路径返回到应用程序的根目录。

# c++ - 同一行上的错误 C2144 和错误 C4430

> ID：13638912
> 
> 赞同：1
> 
> 时间：2012-11-30T04:14:52.787
> 
> 标签：c++

我正在为一项任务编写“韦诺之战”代码。今天在编译时遇到以下错误（我之前编译项目时没有收到这些错误）：

代码是（它是一个 .hpp 文件）：

```
/* $Id: pathfind.hpp 54806 2012-07-20 22:17:33Z jamit $ */
/*
   Copyright (C) 2003 - 2012 by David White <dave@whitevine.net>
   Part of the Battle for Wesnoth Project http://www.wesnoth.org/

   This program is free software; you can redistribute it and/or modify
   it under the terms of the GNU General Public License as published by
   the Free Software Foundation; either version 2 of the License, or
   (at your option) any later version.
   This program is distributed in the hope that it will be useful,
   but WITHOUT ANY WARRANTY.

   See the COPYING file for more details.
*/

/**
 * @file
 * This module contains various pathfinding functions and utilities.
 */

#ifndef PATHFIND_H_INCLUDED
#define PATHFIND_H_INCLUDED

class gamemap;
class team;
class unit;
class unit_map;
class unit_movement_type;

#include "map_location.hpp"

#include <map>
#include <list>
#include <functional>

namespace pathfind {

class teleport_map;

enum VACANT_TILE_TYPE { VACANT_CASTLE, VACANT_ANY };
enum PATH_TYPE { MOVE, VISION, JAMMING };

/// Function that will find a location on the board that is as near
/// to @a loc as possible, but which is unoccupied by any units.
map_location find_vacant_tile(const map_location& loc,
                              VACANT_TILE_TYPE vacancy=VACANT_ANY,
                              const unit* pass_check=NULL,
                              const team* shroud_check=NULL);
/// Wrapper for find_vacant_tile() when looking for a vacant castle tile
/// near a leader.
map_location find_vacant_castle(const unit & leader);

/** Determines if a given location is in an enemy zone of control. */
bool enemy_zoc(team const &current_team, map_location const &loc,
               team const &viewing_team, bool see_all=false);

struct cost_calculator
{
    cost_calculator() {}

    virtual double cost(const map_location& loc, const double so_far) const = 0;
    virtual ~cost_calculator() {}

    static double getNoPathValue() { return (42424242.0); }
};

/**
 * Object which contains all the possible locations a unit can move to,
 * with associated best routes to those locations.
 */
struct paths
{
    paths()
        : destinations()
    {
    }

    /// Construct a list of paths for the specified unit.
    paths(gamemap const &map,
          unit_map const &/*units*/, // Not used
          const unit& u, std::vector<team> const &teams,
          bool force_ignore_zocs, bool allow_teleport,
          const team &viewing_team, int additional_turns = 0,
          bool see_all = false, bool ignore_units = false);
    /// Virtual destructor (default processing).
    virtual ~paths();

    struct step
    {
        map_location curr, prev;
        int move_left;
    };

    /** Ordered vector of possible destinations. */
    struct dest_vect : std::vector<step>
    {
        const_iterator find(const map_location &) const;
        bool contains(const map_location &) const;
        void insert(const map_location &);
        std::vector<map_location> get_path(const const_iterator &) const;
    };
    dest_vect destinations;
};

/**
 * A refinement of paths for use when calculating vision.
 */
struct vision_path : public paths
{
    /// Construct a list of seen hexes for a unit.
    vision_path(gamemap const &map, const unit& viewer,
                map_location const &loc, const std::map<map_location, int>& jamming_map);
    virtual ~vision_path();

    /// The edges are the non-destination hexes bordering the destinations.
    std::set<map_location> edges;
};

/**
 * A refinement of paths for use when calculating jamming.
 */
struct jamming_path : public paths
{
    /// Construct a list of jammed hexes for a unit.
    jamming_path(gamemap const &map, const unit& jammer,
                map_location const &loc);
    virtual ~jamming_path();

    /// The edges are the non-destination hexes bordering the destinations.
    //std::set<map_location> edges;
};

/** Structure which holds a single route between one location and another. */
struct plain_route
{
    plain_route() : steps(), move_cost(0) {}
    std::vector<map_location> steps;
    /** Movement cost for reaching the end of the route. */
    int move_cost;
};

/** Structure which holds a single route and marks for special events. */
struct marked_route
{
    marked_route()
        : route()
        , steps(route.steps)
        , move_cost(route.move_cost)
        , marks()
    {
    }

    marked_route(const marked_route& rhs)
        : route(rhs.route)
        , steps(route.steps)
        , move_cost(route.move_cost)
        , marks(rhs.marks)
    {
    }

    marked_route& operator=(const marked_route& rhs)
    {
        this->route = rhs.route;
        this->steps = this->route.steps;
        this->move_cost = this->route.move_cost;
        this->marks = rhs.marks;
        return *this;
    }

    struct mark
    {
        mark(int turns_number = 0, bool in_zoc = false,
                bool do_capture = false, bool is_invisible = false)
            : turns(turns_number), zoc(in_zoc),
              capture(do_capture), invisible(is_invisible) {}
        int turns;
        bool zoc;
        bool capture;
        bool invisible;

        bool operator==(const mark& m) const {
            return turns == m.turns && zoc == m.zoc && capture == m.capture && invisible == m.invisible;
        }
    };
    typedef std::map<map_location, mark> mark_map;
    plain_route route;

    //make steps and move_cost of the underlying plain_route directly accessible
    std::vector<map_location>& steps;
    int& move_cost;

    mark_map marks;
};

plain_route a_star_search(map_location const &src, map_location const &dst,
        double stop_at, const cost_calculator* costCalculator,
        const size_t parWidth, const size_t parHeight,
        const teleport_map* teleports = NULL);

/**
 * Add marks on a route @a rt assuming that the unit located at the first hex of
 * rt travels along it.
 */
marked_route mark_route(const plain_route &rt);

struct shortest_path_calculator : cost_calculator
{
    shortest_path_calculator(const unit& u, const team& t, const unit_map& units,
        const std::vector<team> &teams, const gamemap &map,
        bool ignore_unit = false, bool ignore_defense_ = false,
        bool see_all = false);
    virtual double cost(const map_location& loc, const double so_far) const;

private:
    unit const &unit_;
    team const &viewing_team_;
    unit_map const &units_;
    std::vector<team> const &teams_;
    gamemap const &map_;
    int const movement_left_;
    int const total_movement_;
    bool const ignore_unit_;
    bool const ignore_defense_;
    bool see_all_;
};

struct move_type_path_calculator : cost_calculator
{
    move_type_path_calculator(const unit_movement_type& mt, int movement_left, int total_movement, const team& t, const gamemap& map);
    virtual double cost(const map_location& loc, const double so_far) const;

private:
    const unit_movement_type &movement_type_;
    const int movement_left_;
    const int total_movement_;
    team const &viewing_team_;
    gamemap const &map_;
};

/**
 * Function which only uses terrain, ignoring shroud, enemies, etc.
 * Required by move_unit_fake if the normal path fails.
 */
struct emergency_path_calculator : cost_calculator
{
    emergency_path_calculator(const unit& u, const gamemap& map);
    virtual double cost(const map_location& loc, const double so_far) const;

private:
    unit const &unit_;
    gamemap const &map_;
};

/**
 * Function which doesn't take anything into account. Used by
 * move_unit_fake for the last-chance case.
 */
struct dummy_path_calculator : cost_calculator
{
    dummy_path_calculator(const unit& u, const gamemap& map);
    virtual double cost(const map_location& loc, const double so_far) const;
};

}

#endif 
```

错误：

> c:\users...\trunk\wesnoth-1.11.0\src\pathfind\pathfind.hpp(24):**错误 C2144: 语法错误: 'gamemap' 前面应该有 ';'** 1>c:\users...s\trunk\wesnoth-1.11.0\src\pathfind\pathfind.hpp(24)：**错误 C4430：缺少类型说明符 - 假定为 int。注意：C++ 不支持默认整数**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-30T04:20:46.530

在包含此文件的所有位置中检查您在此之前包含的标题。

其中一个将以缺少最后一个分号的类/结构结尾：

```
class Foo
{
}  // <-- missing semicolon here is not picked up until
   //     the next declaration in another file 
```

添加分号并收工:-)

# drupal - Drupal 7 - 如何为每个页面添加唯一的类名？

> ID：13638915
> 
> 赞同：0
> 
> 时间：2012-11-30T04:15:23.860
> 
> 标签：drupal, drupal-7

我进入 Drupal 的第二天并且很困惑......我需要在 body 标记中添加一个唯一的类名来标识每个页面，因为整个站点的每个页面上都有许多独特的样式（重复元素）。

我在网上找到了几个代码片段，但它们没有用。例如，我已将此添加到`template.php`文件中，但它不起作用：

```
function testtheme_preprocess_html(&$vars) { // my theme is called "testtheme"
  $path = drupal_get_path_alias($_GET['q']);
  $aliases = explode('/', $path);

  foreach($aliases as $alias) {
    $vars['classes_array'][] = drupal_clean_css_identifier($alias);
  } 
} 
```

假设在 body 标签中添加一个类，但我没有显示任何内容。我错过了什么还是有人可以提供另一种解决方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T16:48:34.607

Rainfall 的答案是正确的，但是：在 body 元素 page-NAMEPAGE 中的 drupal 中已经有唯一的逐页分类

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T09:21:37.987

抱歉，如果我没有正确理解您的意思，但是您可以在 html.tpl.php 文件中的 body 标记中添加代码，使其看起来像这样：

```
<body class="<?php print $classes; ?>" <?php print $attributes;?>> 
```

就这样。之后，您的 body 标签将根据页面自动具有 css 类。此外，您还将获得有关节点类型的信息、有关用户是否登录的信息、节点 ID。

让我知道它是否有效或者我是否犯了一些错误。谢谢，祝你好运！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-06-21T18:27:37.763

您可以修改[https://www.drupal.org/project/node_class](https://www.drupal.org/project/node_class)模块：

1）在node_class.module中注释函数node_class_preprocess_node

2) 插入

```
$node_classes = node_class($node);
if (!empty($node_classes)) $node_classes .= ' ';
$content_column_class = str_replace(' class="','', $content_column_class);
$content_column_class = ' class="'. $node_classes . $content_column_class; 
```

在 page.tpl.php 之前

```
<section<?php print $content_column_class; ?> id="content_col"> 
```

# ajax - Struts2 AJAX : 获取 struts 2 动作消息作为 ajax 响应

> ID：13638924
> 
> 赞同：0
> 
> 时间：2012-11-30T04:17:00.543
> 
> 标签：ajax, json, jquery, struts2

我正在尝试通过使用 Ajax 调用从操作中获取 actionMessage。我能够通过 AJAX 调用获取结果列表，但不确定如何获取操作消息。

请给我一些想法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T18:03:58.327

我能够解决我的问题。将成功操作消息分配给字符串变量（为其添加了 getter）后，我可以在 firebug 中看到该消息！！！

# jquery - jQuery/Ajax 这个网站是如何做到这一点的？

> ID：13638926
> 
> 赞同：-2
> 
> 时间：2012-11-30T04:17:24.047
> 
> 标签：jquery, ajax

我正在查看此站点[slideone](http://themes.goodlayers.com/slideone/)，每当您单击链接时，它都会将内容加载到同一个容器/div/无论他们使用什么中。我想知道我是否可以在我的网站上获得类似的东西，但我不知道如何去做。有什么帮助吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T04:27:31.707

它是隐藏和显示内容的混合体。当您与加载另一个部分的链接交互时，会发生以下情况：

*   请求通过 ajax 发送到服务器，服务器发回 html。
*   淡出父级的内容并将从服务器收到的 HTML 附加到隐藏的 div 中
*   淡入新内容
*   看起来棒极了

编辑

[这是一个很好的链接，可以让你开始如何轻松地做这样的事情](https://stackoverflow.com/questions/13632756/jquery-use-letters-as-an-id/13632892#13632892)

编辑 2：这是 jQuery 工作的要点：

```
$(function(){
    $(".exposer").click(function(){
        var $ele = $(this);
        $ele.parent().siblings().hide('fade');
        if($(this).data('url') == undefined){
       $(this).siblings('.visContent').hide('slide')
           $(this).siblings('.hidContent').show('slide'); 
        }else{
            var url = $(this).data('url');
            $.ajax({
                url: '/echo/json',
                type: "GET",
                success:function(data){
                    var dt = new Date();
                    data = "You would have loaded HTML from " + url + ".<br /> This was loaded at " + dt;
                    //You would normally use the HTML from data to populate the html
                    //in this example a pre-built string will suffice
                    console.log(data,$ele, url);
               $ele.siblings('.visContent').hide('slide');
               $ele.siblings('.hidContent').append("<div class='ajaxload'>" + data + "</div>").addClass('ajaxload').show('slide');            
                },error:function(xhr, status){
                  alert('error loading page');
                }                    
            })
        }
    });
    $(".closer").live('click',function(){
        $(".ajaxload").hide('fade');
       var $mainp = $(this).parent().parent(); 
        $(this).parent().hide('slide');
        $(this).parent().parent().children('.visContent').show('slide');
                $(this).parent().parent().siblings('.childWrap').show('slide');
    });
}); 
```

​我为你创建了一个小提琴来展示它的基础是如何工作的。 [这是我建立的小提琴示例](http://jsfiddle.net/TNCodeMonkey/XmHga/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T04:32:56.923

[这个 jQuery waypoints 插件](http://imakewebthings.com/jquery-waypoints/)是一个很好的起点，它使您能够轻松监控滚动，在特定点触发 ajax 事件，触发事件以更改在特定滚动点菜单中选择的内容。

如果可以使用更简单的版本，您总是可以像在他们的网站中那样制作动画并滚动到不同的点，而不会发生其他事件

# android - 如何在 pinchzoom 上处理 viewpager 滑动禁用？

> ID：13638935
> 
> 赞同：3
> 
> 时间：2012-11-30T04:18:17.643
> 
> 标签：android, android-viewpager, zooming

我是 viewpager 组件中的新手，我使用自定义 viewpager 和多个图像。我想在我的图像在缩放模式下在此期间滑动禁用和滑动启用该时间缩放启用时这样做。有没有可能我的代码在这里。提前致谢。

浏览器

```
public class SwipeableViewPager extends ViewPager {

private boolean enabled;

public SwipeableViewPager (Context context, AttributeSet attrs) {
    super(context, attrs);
}

@Override
public boolean onTouchEvent(MotionEvent event) {
    if (this.enabled) {
        return super.onTouchEvent(event);
    }
    return false;
}

@Override
public boolean onInterceptTouchEvent(MotionEvent event) {
    if (this.enabled) {
        return super.onInterceptTouchEvent(event);
    }
    return false;
}

public void setPagingEnabled(boolean enabled) {
    this.enabled = enabled;
} 
```

}

图像视图缩放

```
public class TouchImageView extends ImageView {
Matrix matrix = new Matrix();

// We can be in one of these 3 states
static final int NONE = 0;
static final int DRAG = 1;
static final int ZOOM = 2;
int mode = NONE;
static  NonSwipeableViewPager PagerLeft;
// Remember some things for zooming
PointF last = new PointF();
PointF start = new PointF();
float minScale = 1f;
float maxScale = 3f;
float[] m;
static boolean b =false;
float redundantXSpace, redundantYSpace;

float width, height;
static final int CLICK = 3;
float saveScale = 1f;
float right, bottom, origWidth, origHeight, bmWidth, bmHeight;

ScaleGestureDetector mScaleDetector;

Context context;

public TouchImageView(Context context) {
    super(context);
    sharedConstructing(context);
}

public TouchImageView(Context context, AttributeSet attrs) {
    super(context, attrs);
    sharedConstructing(context);
 }

private void sharedConstructing(Context context) {
    super.setClickable(true);
    this.context = context;
    mScaleDetector = new ScaleGestureDetector(context, new ScaleListener());
    matrix.setTranslate(1f, 1f);
    m = new float[9];
    setImageMatrix(matrix);
    setScaleType(ScaleType.MATRIX);

    setOnTouchListener(new OnTouchListener() {
        @Override
        public boolean onTouch(View v, MotionEvent event) {
            mScaleDetector.onTouchEvent(event);
            matrix.getValues(m);
            float x = m[Matrix.MTRANS_X];
            float y = m[Matrix.MTRANS_Y];
            PointF curr = new PointF(event.getX(), event.getY());
            switch (event.getAction()) {
            case MotionEvent.ACTION_DOWN:
                Log.v("event","ACTION_DOWN");
                TouchImageView.b = false;
                last.set(event.getX(), event.getY());
                start.set(last);
                mode = DRAG;
                break;
            case MotionEvent.ACTION_MOVE:
                if (mode == DRAG) {

                    float deltaX = curr.x - last.x;
                    float deltaY = curr.y - last.y;
                    float scaleWidth = Math.round(origWidth * saveScale);
                    float scaleHeight = Math.round(origHeight * saveScale);
                    if (scaleWidth < width) {
                        deltaX = 0;
                        if (y + deltaY > 0){
                            deltaY = -y;
                        }
                        else if (y + deltaY < -bottom){
                            deltaY = -(y + bottom);
                        }
                    } else if (scaleHeight < height) {
                        deltaY = 0;
                        if (x + deltaX > 0)
                            deltaX = -x;
                        else if (x + deltaX < -right)
                            deltaX = -(x + right);
                    }else {
                        if (x + deltaX > 0){
                            deltaX = -x;
                        }
                        else if (x + deltaX < -right){
                            deltaX = -(x + right);
                        }
                        if (y + deltaY > 0){
                            deltaY = -y;
                        }
                        else if (y + deltaY < -bottom){
                            deltaY = -(y + bottom);
                        }
                    }
                    matrix.postTranslate(deltaX, deltaY);
                    last.set(curr.x, curr.y);
                }
                break;

            case MotionEvent.ACTION_UP:
                Log.v("event","ACTION_UP");
                mode = NONE;
                int xDiff = (int) Math.abs(curr.x - start.x);
                int yDiff = (int) Math.abs(curr.y - start.y);
                if (xDiff < CLICK && yDiff < CLICK){
                    Log.v("event","ACTION_UP  xDiff < CLICK && yDiff < CLICK");
                    performClick();
                }
                break;

            case MotionEvent.ACTION_POINTER_UP:
                TouchImageView.b = true;
                Log.v("event","ACTION_POINTER_UP");
                mode = NONE;
                break;
            case MotionEvent.ACTION_POINTER_3_DOWN:
                Log.v("event","ACTION_HOVER_MOVE");
                break;
            }
            /*getLayoutParams().height = (int) getWidthFromMatrix(matrix,
                    TouchImageView.this);
            getLayoutParams().width = (int) getHeightFromMatrix(matrix,
                    TouchImageView.this);*/
            setImageMatrix(matrix);
            invalidate();
            return true; // indicate event was handled
        }
    });
}
@Override
public void setImageBitmap(Bitmap bm) {
    super.setImageBitmap(bm);
    if (bm != null) {
        bmWidth = bm.getWidth();
        bmHeight = bm.getHeight();
    }
}

public void setMaxZoom(float x) {
    maxScale = x;
}

private class ScaleListener extends
        ScaleGestureDetector.SimpleOnScaleGestureListener {
    @Override
    public boolean onScaleBegin(ScaleGestureDetector detector) {
        mode = ZOOM;
        return true;
    }

    @SuppressLint("NewApi")
    @TargetApi(8)
    @Override
    public boolean onScale(ScaleGestureDetector detector) {
        float mScaleFactor = (float) Math.min(
                Math.max(.95f, detector.getScaleFactor()), 1.05);
        float origScale = saveScale;
        saveScale *= mScaleFactor;
        if (saveScale > maxScale) {
            saveScale = maxScale;
            mScaleFactor = maxScale / origScale;
        } else if (saveScale < minScale) {
            saveScale = minScale;
            mScaleFactor = minScale / origScale;
        }
        right = width * saveScale - width
                - (2 * redundantXSpace * saveScale);
        bottom = height * saveScale - height
                - (2 * redundantYSpace * saveScale);
        if (origWidth * saveScale <= width
                || origHeight * saveScale <= height) {
            matrix.postScale(mScaleFactor, mScaleFactor, width / 2,
                    height / 2);
            if (mScaleFactor < 1) {
                matrix.getValues(m);
                float x = m[Matrix.MTRANS_X];
                float y = m[Matrix.MTRANS_Y];
                if (mScaleFactor < 1) {
                    if (Math.round(origWidth * saveScale) < width) {
                        if (y < -bottom)
                            matrix.postTranslate(0, -(y + bottom));
                        else if (y > 0)
                            matrix.postTranslate(0, -y);
                    } else {
                        if (x < -right)
                            matrix.postTranslate(-(x + right), 0);
                        else if (x > 0)
                            matrix.postTranslate(-x, 0);
                    }
                }
            }
        } else {
            matrix.postScale(mScaleFactor, mScaleFactor,
                    detector.getFocusX(), detector.getFocusY());
            matrix.getValues(m);
            float x = m[Matrix.MTRANS_X];
            float y = m[Matrix.MTRANS_Y];
            if (mScaleFactor < 1) {
                if (x < -right)
                    matrix.postTranslate(-(x + right), 0);
                else if (x > 0)
                    matrix.postTranslate(-x, 0);
                if (y < -bottom)
                    matrix.postTranslate(0, -(y + bottom));
                else if (y > 0)
                    matrix.postTranslate(0, -y);
            }
        }
        return true;
    }
}

@Override
protected void onMeasure(int widthMeasureSpec, int heightMeasureSpec) {
    super.onMeasure(widthMeasureSpec, heightMeasureSpec);
    width = MeasureSpec.getSize(widthMeasureSpec);
    height = MeasureSpec.getSize(heightMeasureSpec);
    // Fit to screen.
    float scale;
    float scaleX = (float) width / (float) bmWidth;
    float scaleY = (float) height / (float) bmHeight;
    scale = Math.min(scaleX, scaleY);
    matrix.setScale(scale, scale);
    setImageMatrix(matrix);
    saveScale = 1f;

    // Center the image
    redundantYSpace = (float) height - (scale * (float) bmHeight);
    redundantXSpace = (float) width - (scale * (float) bmWidth);
    redundantYSpace /= (float) 2;
    redundantXSpace /= (float) 2;

    matrix.postTranslate(redundantXSpace, redundantYSpace);

    origWidth = width - 2 * redundantXSpace;
    origHeight = height - 2 * redundantYSpace;
    right = width * saveScale - width - (2 * redundantXSpace * saveScale);
    bottom = height * saveScale - height
            - (2 * redundantYSpace * saveScale);
    setImageMatrix(matrix);
    }

} 
```

# java - Java中的字符串到整数的转换

> ID：13638938
> 
> 赞同：-6
> 
> 时间：2012-11-30T04:18:27.817
> 
> 标签：java, android

对于我的一个项目，我必须将字符串转换为整数。java中如何将`"16:45:20"`字符串转换为整数。我在用

```
int time = Integer.parseInt(string) 
```

它给了我`NumberFormatException`错误。如何解决这个问题

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T04:25:26.813

你希望它返回什么？时间跨度中的秒数？或者这是 24 小时制的时间？您希望从示例输入字符串中得到什么整数？如果您只想将数字字符作为整数，那么是的，您需要在冒号上拆分字符串，然后将其连接起来，然后解析 int。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-30T04:19:29.903

您不能直接转换为整数，因为`"16:45:20"`它不是有效的整数

您可能需要根据`:`分隔符进行拆分

然后循环`String[]`并将每个转换为相应的 int。

您将获得三个独立的整数 16,45,20

```
String[] tempArr = str.split(":");
int val1 = Integer.valueOf(tempArr[0]); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-06-10T20:02:36.237

如果您需要获取时间，可以使用如下代码：

```
package stackoverflow.time;
import java.time.LocalTime;
import java.time.format.DateTimeFormatter;
import java.util.Scanner;
public class JavaTime {
    public static void main(String[] args) {
        Scanner s = new Scanner(System.in);
        System.out.printf("Type the hour and press 'Enter': ");
        String time = s.next();
        DateTimeFormatter formatter = DateTimeFormatter.ofPattern("HH:mm:ss");
        LocalTime localTime = LocalTime.parse(time, formatter);
        System.out.println("The time typed was: " + localTime);
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-30T04:20:52.703

您首先需要用“：”分割字符串，然后附加到字符串

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-30T04:22:01.850

对于java检查下面的代码你可以像这样转换..

```
public class ConvertStringToInt {
  public static void main(String[] args) {
    String aString = "78";
    int aInt = Integer.parseInt(aString);

    System.out.println(aInt);
  }
} 
```

另一个例子

```
import java.io.*;
import java.lang.*;

public class  StringToInt{
  public static void main(String[] args)throws IOException {
  BufferedReader bf = new BufferedReader(new InputStreamReader(System.in));
  System.out.println("Enter an integer number: ");
  String str = bf.readLine();
  int i = Integer.parseInt(str);
  System.out.println("String: " + str);
  System.out.println("Integer: " + i);
  }
} 
```

例如这里有两种方式（区别在于返回类型）：

```
Integer x = Integer.valueOf(str);
int y = Integer.parseInt(str); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-30T04:33:07.787

您不能直接转换为整数，因为“16:45:20”不是有效的整数

您可能需要拆分。

试试这个方法：

```
 String str = "16:45:20";

    String[] split = str.split(":");
    System.out.println("Hour :========>"+split[0]);
    System.out.println("Min :========>"+split[1]);
    System.out.println("Sec :========>"+split[2]);

    int hour = Integer.valueOf(split[0]);
    int Min = Integer.valueOf(split[1]);
    int Sec = Integer.valueOf(split[2]); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-11-30T04:41:23.737

**-**在将其转换为 int 之前，您需要将using作为**分隔符进行****拆分。**`String``:`

 ****例如：**

```
String s = "16:45:20";
String[] arr = s.split(":");

int x = Integer.parseInt(arr[0]);
int y = Integer.parseInt(arr[1]);
int z = Integer.parseInt(arr[2]); 
```**

# java - JPA RollbackException 持久化事务导致后续有效事务失败？

> ID：13638944
> 
> 赞同：1
> 
> 时间：2012-11-30T04:20:01.287
> 
> 标签：java, exception, jpa, transactions

我有一个 @Transactional 服务对 oracle DB 执行持久操作。如果我运行持久性破坏唯一违规，我会得到预期的 rollbackException:ConstraintException。

问题是任何后续请求（即使没有打破唯一约束）坚持都会引发相同的异常。

似乎 JPA 没有清除对象以从其事务管理器中持久保存？我什至接近吗？我需要一点解释。

回购：

```
@Repository
public class UserRepository {

    @PersistenceContext(type=PersistenceContextType.EXTENDED)
    private EntityManager em;

    public User findUserById(long id){
        CriteriaBuilder builder = em.getCriteriaBuilder();
        CriteriaQuery<User> query = builder.createQuery(User.class);

        Root<User> root = query.from(User.class);

        Predicate whereClause = builder.equal(root.get(User_.userId), id);

        return em.createQuery(query.where(whereClause)).getSingleResult();
    }

    public User findUserByCredentials(String credentials){

        CriteriaBuilder builder = em.getCriteriaBuilder();
        CriteriaQuery<User> query = builder.createQuery(User.class);

        Root<User> root = query.from(User.class);

        Predicate whereClause = builder.equal(root.get(User_.credentials), credentials);

        return em.createQuery(query.where(whereClause)).getSingleResult();
    }

    public void registerUser(User user){
         em.persist(user);
    }
} 
```

服务实现：

```
@Transactional(readOnly=true)
@Service("userService")
public class UserServiceImpl implements UserService {

    @Resource
    private UserRepository userRepository;
    public void setUserRepository(UserRepository userRepository) {
        this.userRepository = userRepository;
    }

    public User findUserById(long id) {
        return userRepository.findUserById(id);
    }

    public User findUserByCredentials(String credentials){
        return userRepository.findUserByCredentials(credentials);
    }

    @Transactional(readOnly=false)
    public void registerUser(User user){
        userRepository.registerUser(user);
    }

} 
```

错误抛出端点：

```
@PayloadRoot(localPart="RegisterUserRequest", namespace = "http://www.missingwire.com/schemas/User")
public RegisterUserResponseDocument registerUser(RegisterUserRequestDocument requestDoc){

    RegisterUserRequest request = requestDoc.getRegisterUserRequest();
    User user = new User();
    user.setCredentials(request.getCredentials());
    user.setPassword(request.getPassword());
    user.setHonorRating(BigDecimal.valueOf(STARTING_USER_HONOR_RATING));
    user.setAccountActive(true);
    user.setDateCreated(new Date());
    user.setVerified(false);

    UserProfile userProfile = new UserProfile();
    userProfile.setEmailAddress(request.getEmail());
    userProfile.setFirstName(request.getFirstName());
    userProfile.setLastName(request.getLastName());
    userProfile.setDateCreated(new Date());
    userProfile.setUser(user);
    user.setUserProfile(userProfile);

    **userService.registerUser(user);**  //HERE IS THE EXCEPTION THROW

    RegisterUserResponseDocument responseDoc = RegisterUserResponseDocument.Factory.newInstance();
    RegisterUserResponse response = responseDoc.addNewRegisterUserResponse();
    UserType userType = response.addNewUser();
    userType.setAccountActive(user.getAccountActive());
    userType.setCredentials(user.getCredentials());
    userType.setDateCreated(DateConverter.convertDateToXML(user.getDateCreated()));
    userType.setUserId(user.getUserId());
    userType.setVerified(user.getVerified());

    return responseDoc;

} 
```

例外：

> org.springframework.orm.jpa.JpaSystemException：提交事务时出错；嵌套异常是 javax.persistence.RollbackException: Error while committing the transaction at org.springframework.orm.jpa.vendor.HibernateJpaDialect.translateExceptionIfPossible(HibernateJpaDialect. java:102) 在 org.springframework.orm.jpa.ExtendedEntityManagerCreator$ExtendedEntityManagerSynchronization.afterCommit(ExtendedEntityManagerCreator.java:481) 的 org.springframework.orm.jpa.ExtendedEntityManagerCreator$ExtendedEntityManagerSynchronization.convertException(ExtendedEntityManagerCreator.java:501) .transaction.support.TransactionSynchronizationUtils。
> 
> 在 oracle.jdbc.driver.OraclePreparedStatement.executeBatch(OraclePreparedStatement.java:10070) 在 oracle.jdbc.driver.OracleStatementWrapper.executeBatch(OracleStatementWrapper.java:213) 在 org.hibernate.jdbc.BatchingBatcher.doExecuteBatch(BatchingBatcher.java:70) ) 在 org.hibernate.jdbc.AbstractBatcher.executeBatch(AbstractBatcher.java:268)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-30T15:26:32.283

您正在为扩展的持久性上下文注入实体管理器。这意味着持久性上下文的生命周期与事务的生命周期无关：它保持打开状态，直到您明确关闭它。

由于您收到了 RollbackException，因此持久性上下文处于肮脏、不一致的状态，您唯一能做的就是立即关闭它。

如果持久性上下文是事务性上下文，它将自动关闭。但是由于您使用的是扩展上下文，因此您可以明确地关闭它。

确保阅读并理解 Spring 文档的以下部分：

> @PersistenceContext 注解有一个可选的属性类型，默认为 PersistenceContextType.TRANSACTION。这个默认值是您接收共享 EntityManager 代理所需要的。替代方案 PersistenceContextType.EXTENDED 是完全不同的事情：这会导致所谓的扩展 EntityManager，它不是线程安全的，因此不能在并发访问的组件中使用，例如 Spring 管理的单例 bean。扩展的 EntityManager 只应该用在有状态的组件中，例如，驻留在会话中，EntityManager 的生命周期不依赖于当前事务，而是完全取决于应用程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-10T13:50:11.887

添加：

```
@TransactionAttribute(TransactionAttributeType.NOT_SUPPORTED) 
```

对于要排除事务性的方法（例如查询），您将避免此问题。

# php - 是否有更详细/最新的 Wordpress 插件 API 参数参考？

> ID：13638947
> 
> 赞同：0
> 
> 时间：2012-11-30T04:20:37.153
> 
> 标签：php, api, wordpress

我曾尝试使用[此处](http://wp.tutsplus.com/tutorials/creative-coding/interacting-with-wordpress-plug-in-theme-api/)的示例代码来获取一长串插件，其中只有某些字段。但是，过滤器无法按预期工作。根据文档：

> "fields - 一个数组，其中可能的字段（如下所列）作为键和 true 或 false 值以返回该字段的数据或不返回该字段的数据。包含的字段构成了上面返回对象的属性。可能的字段是（默认设置为真，除非另有说明）：”

列出的字段似乎不起作用，数组值设置、未设置、true 或 false。似乎 API 可能已更改，但没有更新文档？是否有更详细的文档，最好是显示如何查询多个 slugs/names/etc 的文档？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T04:50:16.333

API 有点受限，但我注意到一个有用的功能：

[http://api.wordpress.org/plugins/info/1.0/nextgen-gallery](http://api.wordpress.org/plugins/info/1.0/nextgen-gallery)将提供关于 nextgen 画廊数据的 php 变量。同样，[http:](http://api.wordpress.org/plugins/info/1.0/nextgen-gallery.json) //api.wordpress.org/plugins/info/1.0/nextgen-gallery.json 以 JSON 格式提供，[http://api.wordpress.org/plugins/info/1.0/nextgen-gallery。 xml](http://api.wordpress.org/plugins/info/1.0/nextgen-gallery.xml)给出 xml 格式。

# cakephp - CakePHP 每天发送电子邮件

> ID：13638952
> 
> 赞同：0
> 
> 时间：2012-11-30T04:21:18.723
> 
> 标签：cakephp, heroku, cron, email

我是 CakePHP 的新手，我正在制作一个应用程序，用户填写表单，然后表单上指定的其他用户必须添加到数据中。在每天结束时，我想向当天在表单上引用的所有用户发送一封电子邮件，并告诉他们需要向多少个新表单添加信息。

我知道如何运行我的查询来确定我需要给谁发送电子邮件以及如何构建电子邮件，但是我如何让它每天或在任何设定的时间发生一次？我在研究中发现了一些关于 cron 工作的信息，但我不完全理解或不知道这是否对我有用。我在 Windows 环境中工作，目前在 heroku 服务器上启动我的应用程序。

感谢您提供任何信息！

干杯，乔恩

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T07:13:35.243

尽管这个问题与 CakePHP 无关，而是与 Heroku 相关，但我建议您安装[Heroku Scheduler Addon](https://devcenter.heroku.com/articles/scheduler)。

安装后，可以编写一个shell脚本，如下所示：

```
#!/bin/sh

php -f path_to/your_php_file/which_sends_emails.php 
```

并将其命名为 sendemailjob.sh 或其他名称。使其可执行

```
sudo chmod +x sendemailjob.sh 
```

之后，您只需要告诉 Heroku Scheduler 每天执行该文件即可。不应该有太多的魔法。

虽然我不太确定你是否真的有 shell 访问权限，因为你在 Windows 上，但也许 Windows 有不同的解决方案。

# java - Java：抛出和捕获异常以验证输入的正确方法

> ID：13638954
> 
> 赞同：1
> 
> 时间：2012-11-30T04:21:27.123
> 
> 标签：java, exception-handling, try-catch

我正在编写一个家庭作业程序，我需要验证用户输入，然后创建一个对象并将其添加到数组列表中。我已经包含了我认为是相关代码的内容，但我肯定是初学者，所以如果您需要查看其他内容，请告诉我。

我让用户输入一个字符串，然后检查它是否是双精度的。如果它不是双重的，我会抛出一个我创建的异常

```
 try{
        price = Double.parseDouble(strPrice);
     }
     catch(NumberFormatException nfe){
        CDException cde = new CDException();
        cde.setMessage("Price must be a number,\nCannot create CD");
        throw cde;
     } 
```

在确保它是一个数字之后，在我的另一堂课中，我检查以确保它在我想要的范围内。（在这种情况下为非负数）然后创建一个具有值的对象

```
public void setPrice(double newPrice)throws Exception{
    if(newPrice >= 0){
        this.price = newPrice;
    }
    else{
        CDException cde = new CDException();
        cde.setMessage("CD Price cannot be negative,\nCannot create CD");
        throw cde;
    }
} 
```

所以我的问题是...

有没有办法一步完成，检查用户输入的数字和数字是否为非负数。另一件事是，如果输入为空白，那就是结束输入循环的指令。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T04:30:18.977

好吧，您**可以**将代码更改为：

```
try {
    price = Double.parseDouble(strPrice);
    if (price < 0) {
        throw new CDException("Can't be negative");
    }
} catch (NumberFormatException ex) {
     ...
} 
```

但问题是你是否真的愿意这样做。从设计的角度来看，在内部进行“否定”检查可能更有意义`setPrice`，而不是作为解析逻辑的一部分进行。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-30T04:31:40.077

在我看来，将其拆分为单独的功能会更好。您可以更好地分离关注点，从而促进代码重用。但是，如果您坚持组合功能（我认为您不应该这样做），这是一个非常简单的“混搭”：

```
public void setPrice(String newPriceStr) throws CDException {
    if(newPriceStr == null) throw new CDException("Null value given for price");

    double newPrice = -1;

    try {
        newPrice = Double.valueOf(newPriceStr);
    } catch(final NumberFormatException nfe) {
        throw new CDException("Price must be a number,\nCannot create CD");
    }
    if(newPrice >= 0){
        this.price = newPrice;
    }
    else{
        throw new CDException("CD Price cannot be negative,\nCannot create CD");
    }
} 
```

请注意创建和抛出异常的缩写形式。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-30T04:38:15.557

我知道这是家庭作业，您的班级讲师可能不会接受这个答案，但在“现实世界”中，我会使用验证框架而不是重新发明轮子，例如 Java EE 6 中的内置框架：[http： //en.wikipedia.org/wiki/Bean_Validation](http://en.wikipedia.org/wiki/Bean_Validation)

这是使用它们的教程：http: [//docs.oracle.com/javaee/6/tutorial/doc/gircz.html](http://docs.oracle.com/javaee/6/tutorial/doc/gircz.html)

一些例子：

```
public class CD {
    @NotNull
    @Size(min=1, max=16)
    private String CDName;

    @Digits(integer=6, fraction=2)
    BigDecimal price;

} 
```

好处

*   DRY（不要重复自己，例如声明一次验证）
*   可读（清晰且有记录）

缺点

*   Java EE 有一些过于复杂的倾向，但它仍然是一个有效的选择
*   不是每个人都喜欢使用注解的“魔力”，喜欢看自己眼中的代码

我敢肯定还有更多的优点/缺点，但这超出了这个答案/问题的范围。

# jquery - jquery .mouseover() 和 .mouseout() 与淡入淡出

> ID：13638955
> 
> 赞同：1
> 
> 时间：2012-11-30T04:21:44.097
> 
> 标签：jquery, html, css

当用户将鼠标悬停在父 div 上时，我想用 jquery 淡入 div。

我有以下代码：

HTML：

```
<!DOCTYPE html>
<html lang="en">

    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
        <title>Explore D&amp;D Creative</title>
        <link rel="stylesheet" href="media/css/explore.css" />
        <script type="text/javascript" src="media/js/jquery.min.js"></script>
        <script type="text/javascript" src="media/js/jquery.custom.js"></script>
    </head>

    <body id="home">

        <!-- BEGIN CONTENT -->
        <div id="content">

            <!-- BEGIN CONTENT TOP SLIDESHOW -->
            <div id="top-slide">
                <div class="wrapper">

                </div>  
                <div id="select">...</div>          
            </div>
            <!-- END CONTENT TOP SLIDESHOW -->

            <!-- BEGIN CONTENT TWITTER -->
            <div id="twitter-main">
                <div class="wrapper">
                    <i class="icon-twitter"></i>
                    <span class="divider"></span>
                    <h2 class="feed">THIS IS SOME TWITTER TEXT</h2>
                    <p class="info">@DandDCreative - SOME TIME AGO</p>
                </div>            
            </div>
            <!-- END CONTENT TWIITER -->

        </div>
        <!-- END CONTENT -->

    </body>

</html>​ 
```

CSS：

```
/*============================================
    CONTENT
============================================*/
#content {
    min-height:100%;
    margin-top:55px;
    padding-top:10px;
}
/*============================================
    HOME.PHP
============================================*/
#home #content #top-slide {
    background-color:#3D3B37;
    height:300px;
    position:relative;
}

#home #content #top-slide #select {
    height:48px;
    width:100%;
    position:absolute;
    bottom:0;
    background:url(../img/home/bg-slie-select.png) repeat;
    display:none;
}

#home #content #twitter-main {
    background-color:#cccccc;
    height:200px;
    margin:10px 0;
    padding-top:30px;
    text-align:center;
}

#home #content #twitter-main i.icon-twitter {
    background:url(../img/common/social/twitter.png) no-repeat center;
    width:37px;
    height:37px;
    margin:0px auto 20px auto;
    display:block;
}

#home #content #twitter-main span.divider {
    border-top:1px solid #535353;
    height:0;
    width:100px;
    display:block;
    margin:0 auto;
}

#home #content #twitter-main h2.feed {
    margin:40px 0;
}

#home #content #twitter-main p.info {
    font-size:10px;
    color:#666666;
} 
```

和JS：

```
$(document).ready(function() {

    //HOME.PHP

    $('#top-slide').mouseover(function() {
        ('#select').fadeIn(600);
    });

    $('#top-slide').mouseout(function() {
        ('#select').fadeOut(600);
    });           

});​ 
```

此代码分别在鼠标移入和移出时出现以下错误：

`Uncaught TypeError: Object #select has no method 'fadeIn'`

`Uncaught TypeError: Object #select has no method 'fadeOut'`

我认为这可能与 mouseover / mouseout 方法有关，但也尝试使用 click 方法，但它也是如此。

我可能做了一些愚蠢的事情，但我找不到问题。

这是一个适合所有人的 JSFIDDLE：http: [//jsfiddle.net/Ze28y/1/](http://jsfiddle.net/Ze28y/1/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-30T04:23:37.607

试试这个，你错过了`$`

```
 $('#top-slide').mouseover(function() {
        $('#select').fadeIn(600);
    });

    $('#top-slide').mouseout(function() {
        $('#select').fadeOut(600);
    }); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-30T04:24:25.970

利用`$`

```
 $('#top-slide').mouseover(function() {
    $('#select').fadeIn(600);
});

$('#top-slide').mouseout(function() {
    $('#select').fadeOut(600);
}); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-30T04:24:32.163

你忘了`$`声明一个 jquery 对象

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-11-30T04:28:41.813

你错过了`$`进入处理程序。

```
$('#top-slide').bind("mouseenter", function()
{
  $('#select').stop(true).fadeIn(600); //$('#select'), not ('#select')
});

$('#top-slide').bind("mouseleave", function()
{
  $('#select').stop(true).fadeOut(600); //$('#select'), not ('#select')
}); 
```

此外，您应该`stop`在淡入淡出之前添加一个 first，[以防止多个淡入淡出到 queue](http://api.jquery.com/stop/)。并且，因为`#select`是 的孩子`#top-slide`，您应该使用事件`mouseenter`and`mouseleave`而不是`mouseover`and `mouseout`。（与[此](https://stackoverflow.com/questions/7286532/jquery-mouseenter-vs-mouseover)有关）

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-11-30T04:26:08.000

缺少 $ ，你最好使用悬停。

```
$('#top-slide').hover(
    function() { $('#select').fadeIn(600); },
    function() { $('#select').fadeOut(600); }
); 
```

# c# - 服务器端验证将文件上传大小限制为 5mb

> ID：13638959
> 
> 赞同：0
> 
> 时间：2012-11-30T04:22:02.310
> 
> 标签：c#, asp.net-4.0

我想添加一个自定义验证器，以确保文件上传大小不应大于 5MB。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T04:44:34.967

**使用web.config**文件的 标签（在标签内）的**`maxRequestLength`**属性定义大小。`<httpRuntime>``<system.web>`

 **前任：

```
<system.web>
    ...
    <httpRuntime 
      ...
      maxRequestLength="5242880"   //Number of Bytes (5MB)
      ...
    />
   ...
</system.web> 
```

**更新大文件时向用户显示警报**

在文件上传事件处理程序中，检查“PostedFile”的“ContentLength”。

```
if (FileUpload1.HasFile && FileUpload1.PostedFile.ContentLength > 5242880)
{
   // Relevant error message goes here...
} 
```

参考[FileUploadClass MSDN 页面](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.fileupload%28v=vs.100%29.aspx)也会很有用。**

# python - 烧瓶 Windows Apache 问题

> ID：13638961
> 
> 赞同：1
> 
> 时间：2012-11-30T04:22:09.790
> 
> 标签：python, windows, apache, flask

我试图让 Flask 在 Windows 上运行 apache，我遇到了下面的错误消息。关于可能导致此问题的任何想法？

错误信息：

```
mod_wsgi (pid=4380): Exception occurred processing WSGI script 'C:/I4/importicus/importicus.wsgi'.
[Fri Nov 30 14:47:47 2012] [error] [client 192.168.100.109] Traceback (most recent call last):
[Fri Nov 30 14:47:47 2012] [error] [client 192.168.100.109]   File "C:\\Python26\\lib\\site-packages\\flask-0.9-py2.6.egg\\flask\\app.py", line 1701, in __call__
[Fri Nov 30 14:47:47 2012] [error] [client 192.168.100.109]     return self.wsgi_app(environ, start_response)
[Fri Nov 30 14:47:47 2012] [error] [client 192.168.100.109]   File "C:\\Python26\\lib\\site-packages\\flask-0.9-py2.6.egg\\flask\\app.py", line 1689, in wsgi_app
[Fri Nov 30 14:47:47 2012] [error] [client 192.168.100.109]     response = self.make_response(self.handle_exception(e))
[Fri Nov 30 14:47:47 2012] [error] [client 192.168.100.109]   File "C:\\Python26\\lib\\site-packages\\flask-0.9-py2.6.egg\\flask\\app.py", line 1687, in wsgi_app
[Fri Nov 30 14:47:47 2012] [error] [client 192.168.100.109]     response = self.full_dispatch_request()
[Fri Nov 30 14:47:47 2012] [error] [client 192.168.100.109]   File "C:\\Python26\\lib\\site-packages\\flask-0.9-py2.6.egg\\flask\\app.py", line 1360, in full_dispatch_request
[Fri Nov 30 14:47:47 2012] [error] [client 192.168.100.109]     rv = self.handle_user_exception(e)
[Fri Nov 30 14:47:47 2012] [error] [client 192.168.100.109]   File "C:\\Python26\\lib\\site-packages\\flask-0.9-py2.6.egg\\flask\\app.py", line 1358, in full_dispatch_request
[Fri Nov 30 14:47:47 2012] [error] [client 192.168.100.109]     rv = self.dispatch_request()
[Fri Nov 30 14:47:47 2012] [error] [client 192.168.100.109]   File "C:\\Python26\\lib\\site-packages\\flask-0.9-py2.6.egg\\flask\\app.py", line 1344, in dispatch_request
[Fri Nov 30 14:47:47 2012] [error] [client 192.168.100.109]     return self.view_functions[rule.endpoint](**req.view_args)
[Fri Nov 30 14:47:47 2012] [error] [client 192.168.100.109] TypeError: application() takes exactly 2 arguments (0 given) 
```

我的 WSGI 文件如下所示：

```
import sys
sys.path.insert(0, "c:\i4\importicus")

from importicus import importicus_main as application
application.debug = True 
```

我的应用程序文件如下所示：

```
from flask import Flask, render_template,jsonify, request
from werkzeug import secure_filename
import importicus_functions
import ast, os, sys
importicus_main = Flask(__name__)

UPLOAD_FOLDER = 'uploads'
TEMPLATE_FOLDER = 'templates'
importicus_main.config['UPLOAD_FOLDER'] = UPLOAD_FOLDER
importicus_main.config['TEMPLATE_FOLDER'] = TEMPLATE_FOLDER

@importicus_main.route('/')
def application(environ, start_response):
        status = '200 OK'
        output = "Hello World! INSIDE"
        response_headers = [('Content-type', 'text/plain'),
                            ('Content-Length', str(len(output)))]
        start_response(status, response_headers)
        return [output] 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-30T06:52:16.717

主要问题是您正在尝试编写 WSGI，而不是 Flask。（烧瓶更容易。）

这就是你想要的：

```
@importicus_main.route('/')
def application():
  return "Hello World! INSIDE" 
```

控制器（如应用程序函数）不带参数，除非您的 url 字符串中有参数。一个例子是：

```
# /blog/1 would be a valid URL here
@importicus_main.route('/blog/<int:post_id>')
def blog_post(post_id):
  return "This would be blog post number %s" % post_id 
```

如果您跳过它，请查看 Flask 教程 - 它非常棒。我还建议让您的应用程序使用内置测试服务器运行。您可以稍后轻松移植到 mod_wsgi（或其他）。

# python-3.x - 元组和我搞砸

> ID：13638962
> 
> 赞同：1
> 
> 时间：2012-11-30T04:22:25.513
> 
> 标签：python-3.x

我正在尝试将除 'A' 之外的所有内容从元组附加到 new_tuple

```
>>> tuple=('A', 'B', 'C', 'D')
>>> for i in tuple:
        new_tuple=()
        if i!='A':
            new_tuple+=(i,)

>>> new_tuple
('D',) 
```

它只打印 ('D',) 而不是 ('B','C','D')

但有趣的是，您可以循环遍历每个元素并打印它....

```
>>> for i in tuple:
        print (i)   
A
B
C
D 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T04:25:56.733

您`new_tuple`通过每次迭代重新初始化。放在`new_tuple=()`循环之前，它应该可以工作。

```
tuple = ('A', 'B', 'C', 'D')

new_tuple = ()
for i in tuple:
    if i != 'A':
        new_tuple += (i,)

print new_tuple 
```

# python - 从随机建议中排除当前对象

> ID：13638963
> 
> 赞同：0
> 
> 时间：2012-11-30T04:22:45.467
> 
> 标签：python, django

我当前的代码如下：

```
suggestions = Photo.objects.extra(where=['id!=%s'], params=[p.id]).order_by('?')[:10] 
```

我想知道是否有更好的解决方案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-30T04:26:03.003

看起来你可以只使用一个基本的[`exclude`](https://docs.djangoproject.com/en/dev/ref/models/querysets/#exclude)：

```
suggestions = Photo.objects.exclude(id=p.id).order_by('?')[:10] 
```

# c# - 使用 SQL Server 在 Asp 中自定义 Gridview

> ID：13638965
> 
> 赞同：0
> 
> 时间：2012-11-30T04:23:07.867
> 
> 标签：c#, asp.net, sql-server

我有一个从 sqldatasource 中提取的 gridview，这个 sql 数据源从一个名为survey的表中提取，可以说这个调查表有：survey_id、survey_name、survey_description 和 category_id。类别 ID 是引用类别表的外键。类别表有 category_id、名称和描述。有没有办法我可以替换 gridview 中的 category_id 并取其 ID 等于调查表中的 ID 的名称？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T04:28:03.383

是的你可以！您将需要更改 SQLDataSource 的 SelectCommand，以便在类别表上进行内部连接。然后，您可以从类别表中选择名称，并将其绑定到 gridview。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-30T04:41:10.727

试试这个**MS SQL 命令**

```
SELECT SR.survey_id, SR.survey_name, SR.survey_description,CA.name
FROM Tbl_Survey SR
INNER JOIN Tbl_Category CA 
ON SR.category_id.Id=CA.category_id; 
```

# azure - Azure 容器已经存在？

> ID：13638966
> 
> 赞同：1
> 
> 时间：2012-11-30T04:23:16.250
> 
> 标签：azure

在 Azure SDK for PHP 中，有没有办法检查帐户中是否已经存在容器？是否存在任何可能让我知道容器存在的函数或调用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T07:31:59.060

你可以尝试这样的事情：

```
$blobRestProxy = ServicesBuilder::getInstance()->createBlobService($connectionString);

try {
    $blobRestProxy->getContainerProperties("mycontainer");
    // The container exists.
}
catch(ServiceException $e){
    // Code ContainerNotFound (404) means the container does not exist.
    $code = $e->getCode();
} 
```

# ruby-on-rails - 列出来自液体对象的唯一数据

> ID：13638967
> 
> 赞同：2
> 
> 时间：2012-11-30T04:23:34.517
> 
> 标签：ruby-on-rails, ruby, liquid, locomotivecms

我需要能够获取液体中的对象列表并以特定格式在页面上显示它们。

如果我有一组对象（页面），我需要能够通过以下方式打印它们：

列出类别名称（page.category.name）

列出每个子类别名称以及每个子类别名称下的页面列表（page.subcategory.name 和 page.title）

通常在 ruby​​ 中，我会简单地对页面进行分组，但我不能在液体中这样做。我尝试的另一件事是捕获页面的唯一类别和子类别列表，但我找不到从数组中获取唯一项目列表的方法。任何建议的帮助都会很棒。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-07-09T16:50:20.220

我回答你的问题有点晚了，但也许这会帮助其他人在同样的问题上苦苦挣扎。这有点 hacky，因为 Liquid 逻辑往往如此，但它有效（至少对我来说，在 Shopify 上）。

假设您有一个如下所示的“页面”数组：

```
pages = [
    { name: 'Page 1', category: { name: 'pants'  } },
    { name: 'Page 2', category: { name: 'pants'  } },
    { name: 'Page 3', category: { name: 'shoes'  } },
    { name: 'Page 4', category: { name: 'shirts' } },
    { name: 'Page 5', category: { name: 'shoes'  } }
] 
```

此代码将仅返回唯一的类别名称：

```
{% assign delimiter = "," %}
{% assign names_str = "" %}
{% assign names = pages | map: 'category' | map: 'name' %}

{% for name in names %}
    {% assign names_arr = names_str | split: delimiter %}
    {% unless names_arr contains name %}
        {% assign names_str = names_str | append: delimiter | append: name %}
    {% endunless %}
{% endfor %}
{% assign names_uniq = names_str | remove_first: delimiter | split: delimiter %} 
```

结果：

```
names_uniq => [ 'pants', 'shoes', 'shirts' ] 
```

# maps - 在 LeafletJS 中使用自定义地图图像图块？

> ID：13638969
> 
> 赞同：56
> 
> 时间：2012-11-30T04:23:41.500
> 
> 标签：maps, leaflet, openmap

我的瓷砖需要遵守任何特定规格吗？

我有一个大图像文件，我想用 LeafletJS 把它变成一张地图。我将使用 Python Imaging Library 将其切割成我需要的所有各种图块。

但是，我找不到有关在 Leaflet 中使用自定义地图的任何信息。我是否以某种方式向 Leaflet 提供 X、Y、Z 信息的范围？我是否给它每个图块的像素大小？它自己能解决这个问题吗？

把我的问题变成一个简洁的问题：我需要做什么才能让图像文件可以兼作 LeafletJS 的地图图块，如果有的话，我需要在前端脚本中做什么？（除了我的自定义 URL 的明显指定之外）

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-11-30T08:22:06.623

您正在寻找[TileLayer](http://leafletjs.com/reference.html#tilelayer)。在这个 TileLayer 中，您将要获取的图像的 URL 提供给带有如下模板的传单：

```
http://{s}.somedomain.com/blabla/{z}/{x}/{y}.png 
```

当您处于指定的缩放、x 和 y 级别时，Leaflet 将自动获取您提供的 URL 上的图块。

然而，根据您要显示的图像，大部分工作将在图块生成中。默认情况下，瓷砖的大小为 256x256px（可以在 TileLayer 选项中更改），如果您使用地理数据，则使用的投影是墨卡托投影。获得正确的磁贴 ID 可能需要一些时间。[这是一个](http://www.maptiler.org/google-maps-coordinates-tile-bounds-projection/)关于 tile id 如何工作的示例。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2015-04-21T13:30:34.977

您甚至可以直接从数据库中提供切片。

传单指定的格式非常灵活。

Leaflet 仅使用 z,x,y 占位符来请求特定的图块。

例如：

```
L.tileLayer('http://localhost/tileserver/tile.aspx?z={z}&x={x}&y={y}', {
    minZoom: 7, maxZoom: 16,
    attribution: 'My Tile Server'
}).addTo(map); 
```

**Tiles.aspx**在哪里

 **```
Option Strict On

Partial Class tile
    Inherits System.Web.UI.Page

    Protected Sub Page_Load(sender As Object, e As EventArgs) Handles Me.Load
        Dim z, x, y As Integer

        z = CInt(Request.QueryString("z"))
        x = CInt(Request.QueryString("x"))
        y = CInt(Request.QueryString("y"))

        Dim b() As Byte = DB.GetTile(z, x, y)

        Response.Buffer = True
        Response.Charset = ""
        'Response.Cache.SetCacheability(HttpCacheability.NoCache)
        Response.ContentType = "image/png"
        Response.AddHeader("content-disposition", "attachment;filename=" & y & ".png")
        Response.BinaryWrite(b)
        Response.Flush()
        Response.End()
    End Sub 
```**

# java - 如何关联 JTextArea 和 Object？如何知道哪个对象属于哪个jtextArea？

> ID：13638971
> 
> 赞同：0
> 
> 时间：2012-11-30T04:23:48.007
> 
> 标签：java, swing, hashtable, jtextarea

我正在编写一个程序，允许用户提供 RSS 提要的 URL，下载并解析信息，然后将其显示给`JTextArea`s。

*   用户可以根据需要添加任意数量的提要类别。（每个类别都显示在单独的窗格中）
*   用户可以根据需要在一个类别中添加任意数量的提要。
*   用户可以添加新的提要或新的类别。

我有一个 ArrayList(ArrayList) = categoryList。它的每个项目都是类别 = ArrayList。Feed 对象包含一个返回 ArrayList 的 getContents() 方法。

我想将每个 Feed 与一个 JTextArea 相关联。然后我想遍历 FeedItems，同时在相应的 JTextArea 中显示它们。

我真的一直在寻找一种方法来将 Feed <=> JTextArea 之间的一对一映射关联起来。

这是我的尝试：

```
if (category_list.size() > 0)
    {
        final java.util.Iterator<ArrayList<Feed>> categoryListIterator = category_list.iterator();
        final ArrayList<Feed> currCategory;
        final java.util.Iterator<Feed> currFeedIterator;

        while (categoryListIterator.hasNext())
        {
            currCategory = categoryListIterator.next();
            while (((java.util.Iterator<ArrayList<Feed>>) currCategory).hasNext())
            {
                ArrayList<Feed> currFeed = ((java.util.Iterator<ArrayList<Feed>>) currCategory).next();

                currFeedIterator = currFeed.iterator();
                while (currFeedIterator.hasNext())
                {
                    Feed feed = currFeedIterator.next();
                    final java.util.Iterator<FeedItem> feedIterator = feed.getContents().iterator();
                                            while (feedIterator.hasNext())
                                            {
                                              // find the appropriate JTextArea
                                              // iterate through the articles.

                                                 correspondingJtextArea.setText(feedIterator.next().toString());
                                            }

                }
            }
        }
    } 
```

请让我知道，跟踪`JTextArea`我应该更改文本的最佳方式是什么。

我是否正确地遍历了这里的所有提要？一个说明我的情况的简短示例将非常有帮助。

**更新**：

好的，现在我可以遍历所有提要了。我只需要找到一种方法来编写将 Feed 与 JTextArea 相关联的 HashMap。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T05:35:03.173

是否有与每个提要相关的标识？如果是，您可以拥有一个 HashMap，其键为 id，值为 JTextArea 对象。如果不是，那么您可以为每个提要创建一个自定义 ID，并使用 HashMap 进行关联。关于迭代提要，您需要使用循环而不是 ifs。

```
public static JTextArea getTextAreaByFeedId(int id)
{
    JTextArea correspondingJtextArea = id_txtareaMap.get(id); 
    if(correspondingJtextArea == null)
    {
        correspondingJtextArea = new JTextArea();
        id_txtareaMap.put(id, new JTextArea()); 
    }
    return correspondingJtextArea;
}
// Reads in an array of integers, sorts them,
// then prints them in sorted order.
public static void main (String[] args) {
    HashMap<Integer, JTextArea> id_txtareaMap = new HashMap<>(); 
    if (category_list.size() > 0)
    {

        final java.util.Iterator<ArrayList<Feed>> categoryListIterator = category_list.iterator();
        final ArrayList<Feed> currCategory;
        final java.util.Iterator<Feed> currFeedIterator;

        while (categoryListIterator.hasNext())
        {
            currCategory = categoryListIterator.next();
            while (((java.util.Iterator<ArrayList<Feed>>) currCategory).hasNext())
            {
                ArrayList<Feed> currFeed = ((java.util.Iterator<ArrayList<Feed>>) currCategory).next();

                currFeedIterator = currFeed.iterator();
                while (currFeedIterator.hasNext())
                {
                    Feed feed = currFeedIterator.next();
                    final java.util.Iterator<FeedItem> feedIterator = feed.getContents().iterator();
                    while (feedIterator.hasNext())
                    {
                        // find the appropriate JTextArea
                        // iterate through the articles.
                        JTextArea correspondingJtextArea = getTextAreaByFeedId(FeedItem.getId());
                        correspondingJtextArea.setText(feedIterator.next().toString());
                    }

                }
            }
        }
    }
} 
```

# php - 通过 PHP 中的回调更改数组

> ID：13638973
> 
> 赞同：1
> 
> 时间：2012-11-30T04:24:00.427
> 
> 标签：php, callback

我有一个 WorkerPool 类，它的数组声明为

```
private $live_resources = array(); 
```

在类中有一个循环，在一定条件下，像这样将一个项目添加到数组中

```
$this->live_resources[$id] = 0; 
```

在此之后，有一个工人作为一个新进程启动。一旦工作人员完成了一项任务，它就会通过回调的方式调用 WorkerPool 上名为 live_fixture_processed() 的方法。回调定义为

```
$callback = array($this, 'live_fixture_processed'); 
```

然后在worker中调用回调

```
call_user_func($callback, $id); 
```

此方法像这样更改数组中的值

```
$this->live_resources[$id] = 1; 
```

然后它调用另一个使用该数组的方法，对数组的更改看起来已经成功。

与此同时，该类继续其循环，一段时间后它开始使用 $this->live 资源数组，但该值已恢复为 0！

我还添加了一个字符串变量

```
private $called = '' 
```

这也在回调中设置，但在后续循环中也没有更改。回调中使用的私有变量的范围是否存在问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-22T20:54:41.523

简短的回答：我不能这样做。

长答案：我忘记了工人实际上是与工人池运行进程分开的物理进程。我正在做的事情可能看起来有效，但那是因为当子进程从池进程中分叉时，它包含原始父进程的所有代码，但它现在只是运行自己的事件循环。如果我需要子进程与父工作池进程进行简单的退出信号以外的任何通信，我必须使用某种形式的 IPC（进程间通信）

# ios - ios 套接字编程 - NSStream 不起作用

> ID：13638977
> 
> 赞同：0
> 
> 时间：2012-11-30T04:24:42.647
> 
> 标签：ios, sockets, nsstream

我正在使用一个名为 WiFly 的设备，其 IP 地址为：169.254.1.1 和端口 2000。我正在尝试通过 iOS 应用程序连接到该设备。我使用以下代码进行连接：

```
CFReadStreamRef readStream;
CFWriteStreamRef writeStream;

UInt32 port = 2000;
CFStringRef host = CFSTR("169.254.1.1");

CFStreamCreatePairWithSocketToHost(kCFAllocatorDefault, host, port, &readStream, &writeStream);

inputStream = (__bridge NSInputStream *)readStream;
outputStream = (__bridge NSOutputStream *)writeStream;

// set the delegates to this view controller
[inputStream setDelegate:self];
[outputStream setDelegate:self];

// Set run loops to continuous receive information
[inputStream scheduleInRunLoop:[NSRunLoop currentRunLoop] forMode:NSDefaultRunLoopMode];
[outputStream scheduleInRunLoop:[NSRunLoop currentRunLoop] forMode:NSDefaultRunLoopMode];

// Finally, open the connection
[inputStream open];
[outputStream open]; 
```

然后我使用以下内容来处理流事件：

```
- (void)stream:(NSStream *)theStream handleEvent:(NSStreamEvent)streamEvent {
    NSLog(@"stream event %i", streamEvent);

    switch (streamEvent) {

        case NSStreamEventOpenCompleted:
            NSLog(@"Stream opened");
            break;

        case NSStreamEventHasBytesAvailable:
            if (theStream == inputStream) {

                uint8_t buffer[1024];
                int len;

                while ([inputStream hasBytesAvailable]) {
                    len = [inputStream read:buffer maxLength:sizeof(buffer)];
                    if (len > 0) {

                        NSString *output = [[NSString alloc] initWithBytes:buffer length:len encoding:NSASCIIStringEncoding];

                        if (nil != output) {
                            NSLog(@"server said: %@", output);
                            [self messageReceived:output];
                        }
                    }
                }
            }
            break;

        case NSStreamEventErrorOccurred:
            NSLog(@"Can't connect to server");
            break;

        case NSStreamEventEndEncountered:
            [theStream close];
            [theStream removeFromRunLoop:[NSRunLoop currentRunLoop] forMode:NSDefaultRunLoopMode];
            break;

        default:
            NSLog(@"Unknown event");
    } 
```

因此，我可以看到前两个流已正确打开。然后紧随其后的是流事件 4，据我了解，这是可以预料的。但是，然后我尝试调用一个函数：

```
- (IBAction)moveForward
{
    NSLog(@"move forward called");
    NSString *response  = [NSString stringWithFormat:@"2"];
    NSData *data = [[NSData alloc] initWithData:[response dataUsingEncoding:NSASCIIStringEncoding]];
    [outputStream write:[data bytes] maxLength:[data length]];
} 
```

哪个应该通过wifly从arduino uno返回“前进”。但是，当我单击时，由于某种原因，我得到了另一个 NSStreamEvent 4。我还通过终端远程登录到设备：

> 远程登录 169.254.1.1 2000

然后键入“2”...这立即返回了所需的“转发”。从 iPad 的角度来看，我做错了什么？

此外，这段代码在几周前就开始工作了。但是一旦我更新了模拟器，它就停止了工作......连接正常打开，但 arduino 设备似乎没有从 iOS 获得输出。

非常感谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-20T19:55:40.897

NSStreamEvent 4 是 NSStreamEventHasSpaceAvailable。您必须等到输出流有可用空间后才能发送数据。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-07-23T12:55:40.083

尝试替换 NSString *response = [NSString stringWithFormat:@"2"]; 使用这个 NSString *response = [NSString stringWithFormat:@"%d",2]; 在 moveForward 方法中。

# java - Java Servlets 覆盖初始化（ServletConfig 配置）

> ID：13638978
> 
> 赞同：8
> 
> 时间：2012-11-30T04:24:48.967
> 
> 标签：java, servlets, init

我正在尝试覆盖 init(ServletConfig config) 方法。我的代码是：

```
 public void init(ServletConfig config) throws ServletException {
    ServletContext sc = getServletContext(); // ----- NullPointerException
} 
```

这是给 NullPointerException 。

如果我将其修改为：

```
 public void init(ServletConfig config) throws ServletException {
    ServletContext sc = config.getServletContext(); // ----- works fine
} 
```

这工作正常。我知道我们应该重写 init() 方法而不是 init(ServletConfig config) 但是
任何人都可以给我正确的理由来解释为什么会发生这种情况吗？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-11-30T04:40:41.463

比较文档`init(ServletConfig)`：

```
公共无效初始化（ServletConfig 配置）抛出 ServletException
由 servlet 容器调用以向 servlet 指示 servlet
正在投入使用。

请参阅 Servlet#init。此实现存储 ServletConfig 对象
它从 servlet 容器接收以供以后使用。覆盖时
这种形式的方法，调用super.init(config)。

```

并将其与以下文档进行比较`init()`：

```
public void init() 抛出 ServletException
一种可以被覆盖的便捷方法，因此无需
调用 super.init(config)。

无需重写 init(ServletConfig)，只需重写此方法
它将由 GenericServlet.init(ServletConfig config) 调用。这
ServletConfig 对象仍然可以通过 getServletConfig() 检索。

```

覆盖`init(ServletConfig)`时，必须做的第一件事是调用：

```
super.init(config); 
```

如果你这样做，那么`getServletContext()`在你的方法中直接调用将不再导致 NPE。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-30T04:43:28.673

发生这种情况是因为您覆盖了错误的方法机制如果您覆盖

```
 public void init(ServletConfig config) throws ServletException {
        super.init(config);
            ServletContext sc = getServletContext(); 
     } 
```

而不是覆盖`init(ServletConfig)`，只需覆盖下面的方法，它将被调用`GenericServlet.init(ServletConfig config)`

```
 public void init() throws ServletException {
 ServletContext sc = getServletContext(); 
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-30T04:41:23.647

因为在：

```
public void init(ServletConfig config) throws ServletException
{
    ServletContext sc = getServletContext();
} 
```

你不调用`super.init(ServletConfig)`. 因此，ServletConfig 没有存储在 servlet 实例中，后续调用 getServletConfig 将返回 null。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-06-05T05:50:32.943

只需将 super init(config) 放在覆盖方法的第一行

```
public void init(ServletConfig config) throws ServletException 
```

# c++ - c++ 中带 *& 的技巧是什么意思？

> ID：13638983
> 
> 赞同：0
> 
> 时间：2012-11-30T04:25:31.617
> 
> 标签：c++

> **可能重复：**
> [指向引用的指针和指向指针的引用之间的区别](https://stackoverflow.com/questions/1898524/difference-between-pointer-to-a-reference-and-reference-to-a-pointer)

我是 C++ 的新手，我从事一个非常复杂的项目。当我试图弄清楚一些事情时，我看到了一件有趣的事情：

```
n->insertmeSort((Node *&)first); 
```

当我们深入insertmeSort时，我们可以看到同样的情况：

```
 void Node::insertme(Node *&to)
{
   if(!to) {
      to=this;
      return;
   }
   insertme(value>to->value ? to->right : to->left);
} 
```

所以我的问题的原因是：`Node *&`- 星号和＆符号，为了什么？

它看起来很棘手，对我来说很有趣。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T04:27:11.863

它是对指针的引用。像任何常规引用一样，但底层类型是指针。

在引用之前，必须使用双指针来完成逐个引用的引用（一些具有 C 思想的人仍然这样做，我偶尔也是其中之一）。

以免有任何疑问，试试这个真正沉入其中：

```
#include <iostream>
#include <cstdlib>

void foo (int *& p)
{
    std::cout << "&p: " << &p << std::endl;
}

int main(int argc, char *argv[])
{
    int *q = NULL;
    std::cout << "&q: " << &q << std::endl;
    foo(q);

    return EXIT_SUCCESS;
} 
```

**输出**（你的值会不同，但是 &p == &q）

```
&q: 0x7fff5fbff878
&p: 0x7fff5fbff878 
```

希望很清楚`p`in`foo()`确实是对指针`q`in的引用`main()`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-30T04:27:22.977

这不是技巧，它只是类型——“对指针的引用`Node`”。

`n->insertmeSort((Node *&)first);`调用`insertmeSort`结果`first`为 a `Node*&`。

`void Node::insertme(Node *&to)`声明`insertme`将指向 a 的指针的引用`Node`作为参数。

引用和指针如何工作的示例：

```
int main() {
    //Initialise `a` and `b` to 0
    int a{};
    int b{};
    int* pointer{&a}; //Initialise `pointer` with the address of (&) `a`
    int& reference{a};//Make `reference` be a reference to `a`
    int*& reference_to_pointer{pointer_x}; 

    //Now `a`, `*pointer`, `reference` and `*reference_to_pointer`
    //can all be used to manipulate `a`.
    //All these do the same thing (assign 10 to `a`):
    a = 10;
    *pointer = 10;
    reference = 10;
    *reference_to_pointer = 10;

    //`pointer` can be rebound to point to a different thing. This can
    //be done directly, or through `reference_to_pointer`.
    //These lines both do the same thing (make `pointer` point to `b`):
    pointer = &b;
    reference_to_pointer = &b;

    //Now `b`, `*pointer` and `*reference_to_pointer` can
    //all be used to manipulate `b`.
    //All these do the same thing (assign 20 to `b`):
    b = 20;
    *pointer = 20;
    *reference_to_pointer = 20;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-30T04:31:51.583

*& 表示您通过引用传递指针。所以在这种情况下，你通过引用这个函数来传递一个指向对象的指针。没有参考，这条线将没有效果

```
if(!to) {
  to=this;
  return; 
```

}

# sql-server - 聚合函数返回 null

> ID：13638990
> 
> 赞同：3
> 
> 时间：2012-11-30T04:26:26.437
> 
> 标签：sql-server, sql-server-2005, null, aggregate-functions

我有这个样本数据

```
+------+------------+------------+
| CODE | START_DATE | END_DATE   |
+------+------------+------------+
| 0001 | 2012-01-01 | 2012-01-31 |
+------+------------+------------+
| 0001 | 2012-02-01 | 2012-02-29 |
+------+------------+------------+
| 0001 | 2012-03-01 | NULL       |
+------+------------+------------+
| 0002 | 2012-02-01 | 2012-02-29 |
+------+------------+------------+
| 0002 | 2012-03-01 | 2012-03-31 |
+------+------------+------------+
| 0002 | 2012-04-01 | NULL       |
+------+------------+------------+
| 0003 | 2012-02-01 | 2012-02-29 |
+------+------------+------------+
| 0003 | 2012-03-01 | 2012-03-31 |
+------+------------+------------+ 
```

DDL

```
CREATE TABLE SAMPLE
(
    CODE VARCHAR(4),
    START_DATE DATETIME,
    END_DATE DATETIME
)

INSERT INTO SAMPLE (CODE, START_DATE, END_DATE) VALUES ('0001', {d '2012-01-01'}, {d '2012-01-31'})
INSERT INTO SAMPLE (CODE, START_DATE, END_DATE) VALUES ('0001', {d '2012-02-01'}, {d '2012-02-29'})
INSERT INTO SAMPLE (CODE, START_DATE, END_DATE) VALUES ('0001', {d '2012-03-01'}, NULL)

INSERT INTO SAMPLE (CODE, START_DATE, END_DATE) VALUES ('0002', {d '2012-02-01'}, {d '2012-02-29'})
INSERT INTO SAMPLE (CODE, START_DATE, END_DATE) VALUES ('0002', {d '2012-03-01'}, {d '2012-03-31'})
INSERT INTO SAMPLE (CODE, START_DATE, END_DATE) VALUES ('0002', {d '2012-04-01'}, NULL)

INSERT INTO SAMPLE (CODE, START_DATE, END_DATE) VALUES ('0003', {d '2012-02-01'}, {d '2012-02-29'})
INSERT INTO SAMPLE (CODE, START_DATE, END_DATE) VALUES ('0003', {d '2012-03-01'}, {d '2012-03-31'}) 
```

我希望得到这些数据

```
+------+------------+------------+
| CODE | START_DATE | END_DATE   |
+------+------------+------------+
| 0001 | 2012-01-01 | NULL       |
+------+------------+------------+
| 0002 | 2012-02-01 | NULL       |
+------+------------+------------+
| 0003 | 2012-02-01 | 2012-03-31 |
+------+------------+------------+ 
```

目前在**SQL Server 2005**中，我使用这个查询

```
SELECT  CODE,
        MIN(START_DATE) AS START_DATE,
        CASE
            WHEN    MAX(ISNULL(END_DATE, {d '9999-12-31'})) = {d '9999-12-31'}
            THEN    NULL
        ELSE
            MAX(END_DATE)
        END AS END_DATE
FROM    SAMPLE
GROUP BY    CODE 
```

**迄今为止，**我在欺骗NULL 值 9999-12-31

 **我正在为此寻找更好的解决方案

谢谢你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T10:04:26.053

`COUNT`您可以利用of`NULL`和`NOT NULL`列不同的事实。所以脚本可以是这样的：

```
SELECT  CODE,
        MIN(START_DATE) AS START_DATE,
        CASE 
            WHEN    COUNT(*) > COUNT(END_DATE)
            THEN    NULL
        ELSE
            MAX(END_DATE)
        END AS END_DATE
FROM    SAMPLE
GROUP BY    CODE 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T06:09:17.977

此脚本使用 cte（公用表表达式）首先获取 null end_dates 并对其进行左连接。它消除了您使用的硬编码任意日期的需要。

由于它需要额外的查询，因此它会比您的初始解决方案慢。

因此，在决定最佳解决方案时，它还取决于记录的数量和调用此脚本的频率。

```
;WITH NULL_END_DATES_CTE AS (SELECT CODE FROM SAMPLE WHERE END_DATE IS NULL)
SELECT  S.CODE,
    MIN(S.START_DATE) AS START_DATE,
    CASE WHEN C.CODE IS NULL THEN MAX(S.END_DATE) ELSE NULL END AS END_DATE
FROM    SAMPLE S
LEFT JOIN NULL_END_DATES_CTE C ON C.CODE = S.CODE 
GROUP BY S.CODE,C.CODE
ORDER BY S.CODE 
```**

# python - Qt：未注册 qRegisterMetaType()

> ID：13638993
> 
> 赞同：3
> 
> 时间：2012-11-30T04:26:35.767
> 
> 标签：python, multithreading, qt, ipc

我是 Qt 的新手，我试图在 python 子进程中执行一个程序：

```
class MiThread(threading.Thread):  
      def __init__(self):  
          threading.Thread.__init__(self)   

      def run(self):
        try:
            from Queue import Queue, Empty
        except ImportError:
    #from queue import Queue, Empty  # python 3.x
            print "error"
        ON_POSIX = 'posix' in sys.builtin_module_names

        def enqueue_output(out, queue):
            for line in iter(out.readline, b''):
                queue.put(line)
            out.close()
        p= Popen(["java -Xmx256m -jar bin/HelloWorld.jar"],cwd=r'/home/karen/sphinx4-1.0beta5-src/sphinx4-1.0beta5/',stdout=PIPE, shell=True, bufsize= 4024)
        q = Queue()
        t = Thread(target=enqueue_output, args=(p.stdout, q))
        print "estoy en el hilo"
        t.daemon = True # thread dies with the program
        t.start() 
```

但是当我执行它失败并出现以下错误：

```
QObject::connect: Cannot queue arguments of type 'QTextCursor'
(Make sure 'QTextCursor' is registered using qRegisterMetaType().) 
```

我该如何解决？

# java - Java实现负/正按钮状态机计算器

> ID：13638994
> 
> 赞同：1
> 
> 时间：2012-11-30T04:26:43.580
> 
> 标签：java, calculator, state-machine

我试图实现我的负/正按钮，所以如果有人想输入负数，他们可以，但我的代码有运行时错误。

它似乎卡在 enterState6()

我似乎无法让它脱离状态 6 继续计算我需要某种循环吗？

```
package javacalculator;

import java.awt.*;
import java.awt.event.*;
import javax.swing.*;
import java.lang.Math.*;

public class JavaCalculator extends JFrame implements ActionListener
{
    private final int ADD = 10;
    private final int SUB = 11;
    private final int MUL = 12;
    private final int DIV = 13;
    private final int EQL = 14;
    private final int CLR = 15;
    private final int NEG = 16;
    private final int ERR = -1;

    private JTextField display; 
    private int state = 0;
    private double m0, m1;
    private int op;

    private JButton createButton(String tag)
    {
        JButton button = new JButton(tag);
        button.setActionCommand(tag);
        button.addActionListener(this);
        return button;
    }

    public JavaCalculator()
    {
        display = new JTextField("0.0");
        display.setHorizontalAlignment(JTextField.RIGHT);
        display.setEditable(false);
        display.setFont(new Font(display.getFont().getFontName(), display.getFont().getStyle(), 23));

        JPanel panel = new JPanel();
        panel.setLayout(new GridLayout(6,6,3,3));
        panel.setBorder(BorderFactory.createEmptyBorder(16, 16, 16, 16));

        panel.add(createButton("7"));
        panel.add(createButton("8"));
        panel.add(createButton("9"));
        panel.add(createButton("+"));
        panel.add(createButton("4"));
        panel.add(createButton("5"));
        panel.add(createButton("6"));
        panel.add(createButton("-"));
        panel.add(createButton("1"));
        panel.add(createButton("2"));
        panel.add(createButton("3"));
        panel.add(createButton("*"));
        panel.add(createButton("0"));
        panel.add(createButton("="));
        panel.add(createButton("C"));
        panel.add(createButton("/"));
        panel.add(createButton("-/+"));

        getContentPane().add(display, BorderLayout.NORTH);
        getContentPane().add(panel, BorderLayout.CENTER);
        setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        setTitle("Badass Calculator");
        setSize(300, 300);
        setVisible(true);
    }

    /**************************************************************************************************/

    private int convertEvent(ActionEvent event)
    {
        if(event.getActionCommand().equals("0"))
            return 0;
        if(event.getActionCommand().equals("1"))
            return 1;
        if(event.getActionCommand().equals("2"))
            return 2;
        if(event.getActionCommand().equals("3"))
            return 3;
        if(event.getActionCommand().equals("4"))
            return 4;
        if(event.getActionCommand().equals("5"))
            return 5;
        if(event.getActionCommand().equals("6"))
            return 6;
        if(event.getActionCommand().equals("7"))
            return 7;
        if(event.getActionCommand().equals("8"))
            return 8;
        if(event.getActionCommand().equals("9"))
            return 9;
        if(event.getActionCommand().equals("+"))
            return ADD;
        if(event.getActionCommand().equals("-"))
            return SUB;
        if(event.getActionCommand().equals("*"))
            return MUL;
        if(event.getActionCommand().equals("/"))
            return DIV;
        if(event.getActionCommand().equals("="))
            return EQL;
        if(event.getActionCommand().equals("C"))
            return CLR;
        if(event.getActionCommand().equals("-/+"))
            return NEG;

        return ERR;
    }

    private boolean isNumber(int i)
    {
        return i >= 0 && i <= 9;
    }

    private boolean isOperation(int i)
    {
        switch(i)
        {
            case ADD:
            case SUB:
            case MUL:
            case DIV: return true;
        }
        return false;
    }

    /***********************************************************************************************/

    private void enterState0(int key)
    {
        state = 0;
        m0 = 0;
        display.setText(Double.toString(m0));

    }

    private void enterState1(int key)
    {
        state = 1;
        m0 = m0 * 10 + key;
        display.setText(Double.toString(m0));

    }

    private void enterState2(int key)
    {
        state = 2;
        op = key;
        m1 = 0;
    }

    private void enterState3(int key)
    {
        state = 3;
        m1 = m1 * 10 + key;
        display.setText(Double.toString(m1));

    }

    private void enterState4(int key)
    {
        state = 4;
        switch(op)
        {
        case ADD: m1 = m0 + m1; break;
        case SUB: m1 = m0 - m1; break;
        case MUL: m1 = m0 * m1; break;
        case DIV: m1 = m0 / m1; break;
        }
        display.setText(Double.toString(m1));
        m0 = 0;
    }

    private void enterState5(int key)
    {
        state = 5;
        switch(op)
        {
        case ADD: m0 = m0 + m1; break;
        case SUB: m0 = m0 - m1; break;
        case MUL: m0 = m0 * m1; break;
        case DIV: m0 = m0 / m1; break;
        }
        display.setText(Double.toString(m0));
        m1 = 0;
        op = key;
    }

    private void enterState6(int key)
    {
        state = 6;

        m0 = m0 * (-1);

        display.setText(Double.toString(m0));
        op = key;
        m1 = 0;

    }

    public void actionPerformed(ActionEvent event)
    {
        int key = convertEvent(event);

        switch(state)
        {
        case 0:
            if(isNumber(key))
                enterState1(key);
            else if(key == NEG)
                enterState6(key);
            return;
        //number    
        case 1:
            if(key == CLR)
                enterState0(key);
            else if(isNumber(key))
                enterState1(key);
            else if(isOperation(key))
                enterState2(key);
            else if(key == NEG)
                enterState6(key);
            return;
        //operator  
        case 2:
            if(key == CLR)
                enterState0(key);
            else if(isNumber(key))
                enterState3(key);
            return;

        //number
        case 3:
            if(key == CLR)
                enterState0(key);
            else if(isNumber(key))
                enterState3(key);
            else if(key == EQL)
                enterState4(key);
            else if(key == op)
                enterState5(op);
            else if(key == NEG)
                enterState6(key);
            return;
        //equals    
        case 4: 
            if(key == CLR)
                enterState0(key);
            else if(isNumber(key))
                enterState1(key);
            else if(key == op)
                enterState5(op);
            return;
        //equals + another number   
        case 5:
            if(key == CLR)
                enterState0(key);
            else if(isNumber(key))
                enterState3(key);
            else if(key == NEG)
                enterState6(key);
            return;
        }
    }

    /************************************************************************************/

    public static void main(String[] args)
    {
        new JavaCalculator();
    }
}

// negative numbers needs its own state m0 = m1 * -1 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2021-04-29T17:01:55.097

您可以使用此功能将模式从正向更改为负向，反之亦然。单击“+/-”按钮时调用该函数。

```
public void NegPos() {
    int num=Integer.parseInt(TextBox.getText());
    if(num>=0) {
    int resultneg=num*-1;
    TextBox.setText(resultneg+"");
    }else
    {
        int resultpos=num*-1;
        TextBox.setText(resultpos+""); 

    }
} 
```

文本框是对象。希望我有所帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T04:35:39.847

您的方法中的`switch`语句`actionPerformed`有以下情况：

```
 case 0:
        case 1:
        case 2:
        case 3:
        case 4: 
        case 5: 
```

特别是，它*没有*`case 6:`. 结果，一旦`state`成为`6`，就再也不会发生任何事情了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2022-01-28T10:12:47.397

```
newValue = displayLabel.getText();
int neg = Integer.parseInt(newValue);
displayLabel.setText(neg*-1+""); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2022-01-30T15:19:37.063

你可以这样做：

```
 num = Double.parseDouble(txt_value.getText());

        double negative_result = num * -1;
        txt_value.setText(negative_result + ""); 
```

# sql - 替换不“适合”某种编码的字符

> ID：13638995
> 
> 赞同：2
> 
> 时间：2012-11-30T04:26:47.483
> 
> 标签：sql, sql-server, ssis

我在 SQL Server 2008 数据库 (10.0.2841) 中有一个列，我需要将其插入另一个数据库 (10.0.5500)。在我插入目标数据库之前，我必须确保该列仅包含 windows-1252 字符。

我目前正在使用 SSIS 包来执行此操作。我的源查询有一堆有效的“替换”，但它非常丑陋，而且肯定很快就无法维护。

```
select replace(replace(rep.......etc(column, 'º', ''), nchar(0x9D), ''), ......etc from table 
```

肯定有更好的方法来做到这一点，但我不知道它是什么。那么，我该如何在查询中（或者可能在脚本组件中？）说“如果这里有一个字符在这种编码中不起作用，请给我一个空字符串来代替它？”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T07:32:36.310

我假设您的源数据库的排序规则与您的目标数据库不同。也许您可以使用 COLLATE 将排序规则更改为目标数据库的排序规则。例如：

```
SELECT
  column COLLATE Latin1_General_CI_AS
FROM table 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-01T11:12:51.267

我可能会在数据流中添加一个脚本转换并应用 .NET 框架，例如 Encoding.Convert，参考[http://msdn.microsoft.com/en-us/library/kdcak6ye.aspx](http://msdn.microsoft.com/en-us/library/kdcak6ye.aspx)

# grails - 在 Grails 中，我如何获得鉴别器值？

> ID：13638997
> 
> 赞同：3
> 
> 时间：2012-11-30T04:26:59.533
> 
> 标签：grails, grails-2.0, discriminator

我有这样的课：

```
class Apple extends Fruit {
    static mapping = {
        discriminator "AppleType"
    }
} 
```

有没有办法在控制器/视图中获得这个鉴别器值？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-30T11:13:43.827

您可以使用[Mapping](http://grails.org/doc/latest/api/org/codehaus/groovy/grails/orm/hibernate/cfg/Mapping.html)类检查域类的映射。例子：

```
def mapping = GrailsDomainBinder.getMapping(Apple)
println mapping.discriminator 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-08-25T16:21:45.470

作为 Sergio 回答的补充，`GrailsDomainBinder`从 2.3 开始，该方法不再具有`getMapping()`静态方法。您必须改为实例化一个`GrailsDomainBinder`.

```
def mapping = new GrailsDomainBinder().getMapping(Apple)
println mapping.discriminator 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-10-10T05:03:45.667

我过去使用过这个hack。在查询鉴别器列的基类上创建派生属性。

```
static mapping = {
    fruitType formula: "class"  // discriminator column defaults to 'class'
}

String fruitType 
```

这添加了一个fruitType 属性，每次从数据库中提取该类时都会设置该属性。

**在从数据库中获取该属性之前，该属性将为空。**

如果您更改您的鉴别器列，只需相应地更改公式。

```
static mapping = {
    discriminator column: "custom_column_name"
    fruitType formula: "custom_column_name"
}

String fruitType 
```