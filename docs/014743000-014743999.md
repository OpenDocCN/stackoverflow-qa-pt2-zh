# StackOverflow 问答 14743000-14743999

# list - 如何检查Prolog列表中的每个元素是否大于0？

> ID：14743005
> 
> 赞同：1
> 
> 时间：2013-02-07T03:28:04.197
> 
> 标签：list, recursion, prolog

我有以下 Prolog 谓词原型：solution(+InputVector)，其中 InputVector 是长度未知的值的列表。如果列表中的所有值都大于 0，我会打印出一条消息。我该怎么做呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-08T16:13:42.760

如果您有兴趣将您的学习扩展到“高阶”谓词，请考虑[maplist](http://www.swi-prolog.org/pldoc/doc_for?object=maplist/2) /2：

```
3 ?- maplist(<(0), [1,2,3]).
true.

4 ?- maplist(<(0),[0,1,2,3]).
false. 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-07T03:29:18.487

尝试检查列表是 [] 还是 [X|Xs]，并采取相应措施。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-08T04:35:42.267

你快到了。考虑以下内容（感谢@aBathologist 更新）：

```
 1|  solution([X]) :- 
  2|     X > 0, 
  3|     !,
  4|     write_ln('Success!').
  5|  solution([X|Y]) :- 
  6|     X > 0,
  7|     solution(Y). 
```

让我们逐行考虑这实际上是如何工作的：

1.  定义谓词的第一个子句，`solution/1`它接受一个包含作为参数的*单元素*列表。`X`
2.  测试 item`X`是否为`> 0`. 如果不是，谓词将在此处终止并失败。否则，Prolog 将继续下一行。
3.  虽然不是绝对必要的，但`!`这里的 cut ( ) 删除了 Prolog 在 (1) 处生成的选择点，因为第 (6) 行的第二个子句也可以使用 input 执行`[X]`，因为这相当于`[X|Y]`where `Y`= `[]`。因此，这只是为了提高效率而进行的所谓的“格鲁特”削减。
4.  由于列表`[X]`包含所有大于零的元素，谓词打印一条消息并成功。
5.  定义谓词的第二个子句，`solution/1`它接受一个包含*一个或多个*项目`X`的列表，其中是列表的头部，并且`Y`是列表的尾部（剩余部分）（它本身就是一个可以为空的列表：）`[]`。
6.  与第 (2) 行相同。
7.  继续递归测试列表的其余部分，`Y`.

请注意，上面的定义假定`solution/1`必须仅在大于零的数字的*非空列表上成功。*如果您希望允许此谓词在空列表上成功，则可以使实现更加简单：

```
solution([]) :- 
    write_ln('Success!').
solution([X|Y]) :-
    X > 0, 
    solution(Y). 
```

在这个版本中，根据参数执行两个*子句*中`solution/1`的一个：第一个处理空列表，第二个处理大于零的数字的非空列表。此处不需要cut ( `!`)，因为谓词参数是不可统一的 ( `[]`\= `[X|Y]`)，并且 Prolog 不会为第一个子句的任何调用生成选择点。

我希望这对您有所帮助，并使 Prolog 语法的一些语义对您来说更加清晰。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-08T15:41:50.160

我会这样写谓词：

```
all_greater_than_zero([]).
all_greater_than_zero([H|T]) :-
    H > 0,
    all_greater_than_zero(T). 
```

我认为空列表是可以接受的。如果没有，您可以删除第一个子句。

# c++ - 如何将表达式作为参数/参数传递？

> ID：14743007
> 
> 赞同：0
> 
> 时间：2013-02-07T03:28:08.860
> 
> 标签：c++, function, parameters, arguments, expression

假设我有一个多项式函数 f(x)，我想将此表达式用于表达式 g(x) 或 h(x)，具体取决于用户选择。这可能吗？

例如

```
int main() {

   float fexpression = /* polynomial function f(x) here */;    

   /* some code where user picks g(x) or h(x) */

   if (/* gexpression == true */)
        cout << gfunction(fexpression);
   else /* h expression == true */
        cout << hfunction(fexpression);

return 0;
    }

 float gfunction(float j){

     float var = /* some function representing g(f(x)) == g(j) */;
  return var;
  }

 float hfunction(float j){
       float var = /* some function representing h(f(x)) == h(j) */;
  return var;
      } 
```

在我看来，我可以传递一个作为表达式的变量，例如

```
float fexpression = .... 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-07T03:36:58.797

你想要一个[函数指针](http://en.wikipedia.org/wiki/Function_pointer)。

使表达式成为函数。

```
float fexpression( float x )
{
   return (5*(pow(x,4))) + (3*(pow(x, 3))) + (10 * x) - 5
} 
```

正如您编写的那样，此代码将传递功能本身。

```
 if (/* gexpression == true */)
        cout << gfunction(fexpression);
   else /* h expression == true */
        cout << hfunction(fexpression); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-07T04:18:00.603

我试图在德鲁答案的评论部分解释这个细节，但它在格式中丢失了......所以不得不开始另一个答案。

@DrewDorman 的说法是正确的，您只需将表达式定义为一个函数：

```
float fexpression( float x )
{
   return (5*(pow(x,4))) + (3*(pow(x, 3))) + (10 * x) - 5
} 
```

（对您而言）缺少的是以下内容（您可以通过阅读 Drew 的链接...）：

定义`gfunction`如下（例如）

```
float gfunction(float (*funcp)(float)) {
    // lots of stuff to determine the value of x
    return (*funcp)(x);
} 
```

这就是 gfunction 如何评估您的多项式。做类似的事情`hfunction`

调用 gfunction 时，必须引用`fexpression`如下：

```
cout << gfunction(&fexpression); 
```

问题......德鲁的`&`回答也没有。

# javascript - 无法遍历 chrome 中的节点列表

> ID：14743011
> 
> 赞同：3
> 
> 时间：2013-02-07T03:28:37.943
> 
> 标签：javascript, google-chrome, google-chrome-extension

我正在开发 chrome 扩展程序，但遇到了 nodelist 类型的问题。

```
var compoentChange = document.getElementById("component_change");
var items = compoentChange.getElementsByTagName("option"); 
```

当我`console.log(items)`，它显示`[item: function]`。当我展开它时，它具有所有选项元素和长度属性。

问题是我无法访问这些元素。当我`console.log(items.length)`，我得到`undefined`。

如何迭代`items`变量？

`for(i in items){}`和`for`循环不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T03:36:55.663

你仍然可以这样做`items.length`，所以只需像这样创建一个 for 循环。我建议将它推入一个数组。

```
var myArray = [];

for(var i=0; i<items.length; i++){
     myArray.push(items[i]);
} 
```

好吧，如果这不是一个选项，可以尝试这样的事情：

```
var myArray = [];
for(var i=0, e=1; i<e; i++ ){
   if(items[i] != undefined){
      e++;
      myArray.push(items[i]);
   }else{
      break;
   }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T03:37:35.210

NodeLists 是类似数组的对象。您可以使用常规`for`循环（不是`for..in`）进行迭代：

```
for (var i = 0; i < items.length; i++) { ... } 
```

或者，您可以将此类数组对象转换为真正的数组并在其上使用本机数组方法：

```
[].forEach.call(items, function(item) { ... }); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-12-02T17:50:42.357

如果您在页面加载期间记录这两个，您可以 console.log() 的原因`NodeList`，而不是`length`属性是因为它`NodeList`是一个“实时”集合。在 DOM 完成加载之前，两者都是未定义的，但由于`NodeList`是实时的，它将在 Chrome 控制台中更新。该`length`属性在记录时未定义，并且因为它不是实时的，所以它将保留`undefined`在控制台中。

您可以随时设置一个变量来引用 nodeList，但要等到 DOM 准备好后再尝试使用数据（使用`document.ready`函数或可能`document.addEventListener()`）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-05-31T18:13:05.580

我和你遇到了类似的问题。事实证明，这是因为我应该在 DOM 完成加载后访问数据。

```
document.addEventListener("DOMContentLoaded", function () {
    divs = document.getElementsByTagName("div");
    console.log(divs);
}, false); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-01-08T19:25:44.960

for...of 可以用于这种情况。但是由于[一个错误](https://code.google.com/p/chromium/issues/detail?id=401699)，这个机会不能用于铬。

# c++ - 将 const 字符串转换为整数数组？

> ID：14743014
> 
> 赞同：0
> 
> 时间：2013-02-07T03:28:43.013
> 
> 标签：c++

您好，我正在尝试将 const 字符串转换为整数数组，但是当我尝试时它不允许这样做。我的代码是：

```
int isRegistered(const char str[]) {

int isbnInt[10], i;
//char isbnArray[10];

//isbnArray = str;  ----> something I tried

for (i = 0; i < 10; i++)
{
    isbnInt[i] = atoi(str[i]);
    cout << isbnInt[i] << endl;
}
} 
```

但是当我尝试编译它时，我收到一条错误消息“从 char 到 const char* 的转换无效”

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-07T03:30:40.060

`atoi`call 需要`const char *`争论，当你通过 a`char`时，这就是问题所在。

您只需执行以下操作即可将字符转换为数字。这会从字符本身中减去 ascii 值`0`（因为 0-9 在 ascii 代码中是按顺序增加的。）

```
isbnInt[i] = str[i] - '0'; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T03:31:16.540

尝试：

```
for (i = 0; i < 10; i++)
{
    isbnInt[i] = str[i] - '0';
    cout << isbnInt[i] << endl;
} 
```

[atoi](http://en.cppreference.com/w/c/string/byte/atoi)`const char*`作为输入而不是单个字符。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-07T03:33:47.480

你的代码也可以写成：

```
for (i = 0; i < 10; i++)
{
    char foo = str[i];
    isbnInt[i] = atoi(foo);
    cout << isbnInt[i] << endl;
} 
```

哪个行不通（如您所见）；atoi 需要一个 char*，而不是一个 char。

尝试：

```
 int isbm = atoi(str); 
```

看看这是否符合您的要求。

# xcode4.5 - 我的朋友将他的 iPhone 升级到 6.1 后，Xcode 不再编译

> ID：14743016
> 
> 赞同：1
> 
> 时间：2013-02-07T03:28:46.830
> 
> 标签：xcode4.5

没有提供兼容 iOS 版本的预置 iOS 设备。将 iOS 设备与最新版本的 iOS 连接以运行您的应用程序或选择 iOS 模拟器作为目标。

我仍然可以在我的 iPhone 上编译，但不能在我朋友的 iPhone 上编译。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-07T03:30:23.373

iOS 6.1 设备需要 Xcode 4.6

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-07T03:34:17.707

是的，您需要 Xcode 4.6 ..检查链接以获取更多信息...

[Xcode 4.6 与 iOS 6.1 一起发布](http://www.tuaw.com/2013/01/28/xcode-4-6-released-alongside-ios-6-1/)

# tsql - 如何在 SQL 中动态选择要加入的列？

> ID：14743017
> 
> 赞同：1
> 
> 时间：2013-02-07T03:28:55.867
> 
> 标签：tsql, join

假设我在 SQL Server (2008) 中有下表：

```
Person

|PersonID|NickName|FirstName|LastName|
|1       |Jim     |James    |Leahy   |
|2       |Mike    |Michael  |Ross    |
|3       |Bob     |Robert   |Helberg | 
```

我想知道在 SQL 中是否可以执行以下操作。我有一个主表，我想根据`NickName`和`FirstName`列在另一个表上查找匹配项。但是，我希望以特定顺序加入列。

我想加入上面（`NickName`或`FirstName`）的第一列，它将与下表中的标识符匹配

```
|Identifier|PersonId|
|Jim       |1       | <- should return PersonId = 1
|Michael   |2       | <- should return PersonId = 2 
```

因此，如果有匹配项，`NickName`则选择该行。如果没有匹配项，`NickName`请查看`FirstName`.

有什么方法可以按特定顺序查询列吗`NickName`？`FirstName`

我不认为`COALESCE`会起作用，因为我们不能保证任何列都会`NULL`- 我们只知道列上可能不会发生匹配。

*如果您需要澄清，请告诉我；我可能没有很好地措辞。*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T05:10:23.970

由于您没有指定主表的架构，因此我假设它具有`Identifier varchar(100)`字段，该字段可以包含`nickname`或`firstname`。在这种情况下，[查询](http://sqlfiddle.com/#!3/53fac/7)应如下所示：

```
select m.identifier, 
PersonId = isnull(p1.PersonID,p2.PersonID)
from maintable m
left join persons p1 on p1.nickname = m.identifier
left join persons p2 on p2.firstname = m.identifier 
```

# mysql - 使用子查询连接三个表

> ID：14743021
> 
> 赞同：0
> 
> 时间：2013-02-07T03:29:37.530
> 
> 标签：mysql, subquery

我正在尝试加入 3 个表以按下面显示的顺序提取信息，但我尝试的查询仅显示lead_assign 表中存在的记录。我知道我必须做一个子查询，但我不确定它会如何写。有人可以指出我正确的方向吗？谢谢

我正在寻找的格式：

```
rec_date, source, phone, email, fname lname 
```

表设计：

![在此处输入图像描述](../Images/cfcc5f06c1e57a9e764d0f604013a63c.png)

我尝试的查询：

```
select
l.rec_date,
l.source,
l.name,
l.phone,
l.email,
l.comments,
u.fname,
u.lname
from leads l
inner join lead_assign la
on l.id = la.lead_id
inner join users u
on la.user_id = u.id
where l.is_deleted=0 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T03:31:59.400

我认为你只需要使用一个`LEFT JOIN`：

```
select
   l.rec_date,
   l.source,
   l.name,
   l.phone,
   l.email,
   l.comments,
   u.fname,
   u.lname
from leads l
   left join lead_assign la
      on l.id = la.lead_id
   left join users u
      on la.user_id = u.id
where l.is_deleted=0 
```

这将返回潜在客户表中的所有记录，并且仅显示存在匹配行的 u.fname 和 u.lname。

祝你好运。

# sql - 使用字符串方法从文本 TSQL 中提取页码

> ID：14743022
> 
> 赞同：1
> 
> 时间：2013-02-07T03:29:44.217
> 
> 标签：sql, sql-server, tsql

`<Page_No>10</Page_No>`我想提取包含在检索 10之间的页码。

文字就像

```
 <root>
  <Image>
    <File_image>07Feb13Kol030.jpg</File_image>
    <Page_no>10</Page_no>
    <Logo>N</Logo>
    <Photo>N</Photo>
    <Color>B</Color>
  </Image>
</root> 
```

这是行不通的。仅返回前两个字符。

```
select 

substring(convert(varchar(max),fileimage),charindex(convert(varchar(max),fileimage),'Page_no')+8,2) 

from mytable 
```

请帮忙

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T03:37:24.847

尝试使用`CROSS APPLY`-- 这里是样机来帮助：

```
SELECT 
   x.value('(Page_no)[1]', 'int') AS 'Page_no'
FROM XMLTable x
CROSS APPLY x.myXMLField.nodes('/root/Image') 
  n(x) 
```

这是[SQL Fiddle](http://sqlfiddle.com/#!3/c1161/5)。根据 XML 的完整结构，您可能需要将 .nodes('/') 更改为父节点。

如果有帮助，我已经更新了我的答案以包含您的字段名称。

祝你好运。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T03:38:22.787

根据[Janosch Worschitz](http://janisch.worschitz.org)的说法，TSQL[自 2005 年以来就支持 XQuery](https://janosch.woschitz.org/parse-xml-in-t-sql-via-xquery/)，所以不要`substring`在 XML 上做其他奇怪的事情，试试这个：

```
SELECT
    Page  = item.value'(//Page_no), INT)
FROM @XML.nodes('//root/Image') AS Facility(item); 
```

# c - C：未定义对地板的引用

> ID：14743023
> 
> 赞同：4
> 
> 时间：2013-02-07T03:29:44.870
> 
> 标签：c, gcc, eclipse-cdt, ubuntu-12.04, math.h

我在 Ubuntu 上使用 Eclipse 来编写/编译/运行 C 代码。我正在尝试构建我的项目。以下是 Eclipse 控制台中的输出。

```
22:18:31 **** Build of configuration Debug for project Project1 ****
make all 
Building file: ../project1.c
Invoking: GCC C Compiler
gcc -I/lib/i386-linux-gnu -O0 -g3 -Wall -c -fmessage-length=0 -pthread -lm -MMD -MP -MF"project1.d" -MT"project1.d" -o "project1.o" "../project1.c"
../project1.c: In function ‘main’:
../project1.c:146:6: warning: unused variable ‘this_thread_id’ [-Wunused-variable]
../project1.c: In function ‘_pre_init’:
../project1.c:126:1: warning: control reaches end of non-void function [-Wreturn-type]
Finished building: ../project1.c

Building file: ../scheduler.c
Invoking: GCC C Compiler
gcc -I/lib/i386-linux-gnu -O0 -g3 -Wall -c -fmessage-length=0 -pthread -lm -MMD -MP -MF"scheduler.d" -MT"scheduler.d" -o "scheduler.o" "../scheduler.c"
Finished building: ../scheduler.c

Building target: Project1
Invoking: GCC C Linker
gcc -L/lib/i386-linux-gnu -lm -pthread -o "Project1"  ./project1.o ./scheduler.o   
./project1.o: In function `advance_global_time':
/home/akshay/Cworkspace/Project1/Debug/../project1.c:50: undefined reference to `floor'
collect2: ld returned 1 exit status
make: *** [Project1] Error 1 
```

谁能帮我弄清楚问题是什么以及如何解决？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-07T06:27:37.987

您需要在目标文件之后链接库。

你有：

```
gcc -L/lib/i386-linux-gnu -lm -pthread -o "Project1"  ./project1.o ./scheduler.o 
```

你需要：

```
gcc -L/lib/i386-linux-gnu -pthread -o "Project1"  ./project1.o ./scheduler.o -lm 
```

链接器的工作方式似乎发生了变化——有时，可以在目标文件之前指定共享库（例如数学库），并且一切都可以工作。但是，如今，如果共享库在扫描时不满足任何符号，则从链接过程中将其省略。确保在库修复此问题之前列出目标文件。

另请参见[未定义的对 'pthread_create' 的引用](https://stackoverflow.com/questions/9253200/undefined-reference-to-pthread-create)；同样的问题，同样的解决方案。而且我怀疑这是否是SO中唯一这样的问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-07T03:35:10.013

您需要链接数学库，即`-lm`在链接行的末尾添加。不知道如何在 Eclipse 中做到这一点，抱歉。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-07T03:45:22.597

请注意，输出中的链接标志看起来是乱序的。也许您试图`-lm`通过 Eclipse 中的链接器标志添加。这会导致 Eclipse 出现问题。我建议你试试...

> 右键单击您的项目 -> 属性 -> C/C++ 构建 -> 设置 -> GCC 链接器 -> 库 -> 添加“m” -> 应用 -> 构建

或者，在最上面的列表中，确保 -L 和 -l 参数位于链接过程中的 .o 文件之后。

我今天刚被这个击中，它躲避了我一段时间。

# google-api - 创建具有唯一链接的环聊会话

> ID：14743033
> 
> 赞同：3
> 
> 时间：2013-02-07T03:30:32.270
> 
> 标签：google-api, google-plus, hangout

我正在创建一个环聊应用程序。发起者可以创建具有唯一链接的视频群聊会话，并通过提供该唯一链接邀请其他用户（称为与会者）。因此，当与会者单击该链接时，他只能参加该环聊会话。

我创建了一个应用程序。使用 Google 提供的基本 XML 文件，但无法弄清楚如何为每个环聊会话创建唯一链接。Hangout API 中是否有任何功能？据我阅读 API 文档，我没有找到这样的功能。有人可以建议我怎么做吗？

请帮我....

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T04:05:28.130

这个 YouTube 视频讨论了如何做你想做的事：[http ://www.youtube.com/watch?v=Al4SbeVyLm4](http://www.youtube.com/watch?v=Al4SbeVyLm4)

发起人的一般程序是使用您网站上的链接创建视频群聊，并在创建链接的过程中启动视频群聊应用程序。此应用程序将环聊的 URL 发送回您的网站，然后可以将其发送给与会者。

# ios - Obj-c 如何继承具有参数数组的方法？

> ID：14743036
> 
> 赞同：4
> 
> 时间：2013-02-07T03:30:35.643
> 
> 标签：ios, objective-c, c

我了解关键字“va_list”“va_start”“va_arg”“va_end”的用法。我的晚餐班有一个 init 方法，如下所示：

超级班：

```
- (id) initWithChildren:(NSObject*)firstChild, ... NS_REQUIRES_NIL_TERMINATION{
    if(self = [super init]){
        va_list children;
        va_start(children, firstChild);

        self.children = [[NSMutableArray alloc] initWithObjects:firstChild, nil];
        firstChild.father = self;

        NSObject* child;
        while ((child = va_arg(children, NSObject*)) != nil){
            [_children addObject:child];
        }
        va_end(children);
    }
    return self;
} 
```

它运作良好。但我很难继承它。

子类

```
- (id) initWithName:(NSString*)name children:(NSObject*)firstChild, ... NS_REQUIRES_NIL_TERMINATION{
    self = [super initWithChildren:"what should I write here?"];
    if (self){
        self.name = name;
        //other subclass work
    }
    return self;
} 
```

有什么想法吗？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T03:43:21.757

为了做到这一点，你的超类需要公开一个指定的初始化器，它`va_list`作为参数。[`vprintf`](http://www.cplusplus.com/reference/cstdio/vprintf/)有关如何在标准库中完成的示例，请参阅。

```
- (id) initWithChildren:(NSObject*)firstChild, ... NS_REQUIRES_NIL_TERMINATION {
    va_list args;
    va_start(args, firstChild);
    id res = [self initWithChildren:firstChild varArg:args];
    va_end (args);
    return res;
}

- (id) initWithChildren:(NSObject*)firstChild, varArg:va_list args {
    // Do the actual initialization here
    ...
} 
```

# bash - 带有多个提示和选项的 shell 脚本

> ID：14743044
> 
> 赞同：0
> 
> 时间：2013-02-07T03:31:24.957
> 
> 标签：bash, shell, sh

我正在编写一个脚本来自动化 Linux 内核构建过程。在我的脚本中，我有提示，有些是/否，有些是特定的操作。这是我的问题：如何正确关闭函数并在该函数运行后移至下一个选项？如何跳转到指定的操作并绕过其间的提示/操作？这是一个例子：

```
#!/bin/bash
echo "Do you need to install the necessary compiling tools?"
select yn in "Yes" "No"; do
    case $yn in
        Yes ) sudo apt-get install tools; break;;
        No ) <Here I want to skip to the next step. I originally left it 
              blank and removed the "done" command (after esac command) 
              to do this, but if I choose yes, it skips to the end 
              (where the next "done" command is and ends the script>
    esac

<I had to flip the yes/no for the script to skip to the next prompt>
echo "Do you need to eidt your configuration?"
select ny in "No" "Yes"; do
    case $ny in
        No ) <what do I put here to skip to the next tag 
             (labeled compile for example purposes); break;;
        Yes ) 
    esac

echo "You have 3 options with how you can edit you config file."
select yn in "Gtk" "KDE" "Terminal"; do
    case $yn in
    Gtk ) make gconfig; break;;
    KDE ) make xconfig; break;; 
        Terminal ) make menuconfig; break;;
    esac
done
done
done        <I had to insert all these "done" to end the file, but 
                 the scripts doesn't work the way I want it to...>
echo "Are you ready to compile"
select yn in "Yes" "No"; do
    case $yn in
        Yes ) make; break;;
        No ) exit;;
    esac
done 
```

所以基本上脚本是分阶段运行的。1\. 是否需要安装工具 - 如果是，安装它们并进行下一步 - 如果没有，进行下一步 2\. 是否要编辑配置文件 - 如果是，如何；- opt1 - opt2 - opt3 -然后，完成后，跳到下一步 -如果没有，则跳到下一步 3.编译

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T03:41:37.883

嗯...

```
echo "Do you need to eidt your configuration?"
select ny in "No" "Yes"; do
    case $ny in
        No ) break;;
        Yes ) 
          echo "You have 3 options with how you can edit you config file."
          select yn in "Gtk" "KDE" "Terminal"; do
              case $yn in
              Gtk ) make gconfig; break;;
              KDE ) make xconfig; break;; 
                  Terminal ) make menuconfig; break;;
              esac;
             ...
          break;;
    esac 
```

或者更好的是，将每个部分放在一个函数中并根据需要调用它们。

# python - 使用 Tornado 连接 MySQL 数据库时出现问题（OSX Lion；python 2.7.1）

> ID：14743048
> 
> 赞同：0
> 
> 时间：2013-02-07T03:31:42.137
> 
> 标签：python, mysql, phpmyadmin, tornado

我的电脑上同时安装了 Tornado 和 XAMPP。传统上，我使用 PhpMyAdmin 来完成我所有的 MySQL 工作。但是，我也想用 Tornado 来完成这项工作。当我尝试通过 Tornado 连接到 MySQL 时，出现以下错误：

```
Traceback (most recent call last):
  File "__server.py", line 20, in <module>
    class Application(tornado.web.Application):
  File "__server.py", line 40, in Application
    password=options.mysql_password
  File "/Library/Python/2.7/site-packages/tornado-2.4.1-py2.7.egg/tornado/database.py",     line 59, in __init__
    args = dict(conv=CONVERSIONS, use_unicode=True, charset="utf8",
NameError: global name 'CONVERSIONS' is not defined 
```

这个错误让我相信 Tornado 认为我的计算机上没有安装 MySQL。

以下是相关的 Tornado 代码，`__server.py`如果它有什么不同的话：

```
import tornado.database
import tornado.options
import unicodedata
from tornado.options import define, options

define("port", default=8888, help="run on the given port", type=int)
define("mysql_host", default="localhost", help="database host") #127.0.0.1:3306 – this was the      default (should I change it? I didn't get this far in the setup process to know)
define("mysql_database", default="Godzillian1", help="database name")
define("mysql_user", default="root", help="database user")
define("mysql_password", default="", help="database password")

class Application(tornado.web.Application):
    self.db = tornado.database.Connection(
        host=options.mysql_host, 
        database=options.mysql_database,
        user=options.mysql_user, 
        password=options.mysql_password
    ) 
```

因此我的问题是：我是否需要更改 Tornado 配置文件中的某些内容或其他内容？目前任何 MySQL 文件都位于我的 XAMPP 文件夹中。这对我来说似乎有问题，但在我移动所有东西之前，我想检查一下。或者，我是否需要完全“重新下载”MySql？或者它与龙卷风`__server.py`本身有关。（注意：为此，我删除了密码并制作了`username=root`，试图找出解决方案。）

编辑：我已经成功安装了 MySQL5（64 位）和 MySQL-Python，但我仍然收到同样的错误`NameError: global name 'CONVERSATIONS' is not defined`。我应该安装 32 位版本的 MySQL 以使其与 MySQL-Python 兼容吗？（我认为 Lion 需要 64 位 MySQL ......但我现在显然一无所知）。这很令人困惑！

非常感谢的想法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T22:12:44.740

我想出了解决这个问题的方法。MySQL-Python 必须*正确*（重新）安装。我还必须将我的 python 2.7.1 切换到 32 位版本而不是 64 位，并且在 OSX *Lion*上，MySQL 必须安装为 64 位。兼容性似乎很难轻松实现，因此许多人用来安装 MySQL 和 MySQL-Python 的另一个可行选择是安装/使用[MacPorts](http://www.macports.org/install.php)，然后使用这两个命令：

```
sudo port install py26-mysql 
sudo port install mysql5-server 
```

无论如何，如果这还不够，请参阅这个 SO 问题以获得对解决方案的更全面的解释： [如何在 Mac OS X 上安装 MySQLdb (Python 数据访问库到 MySQL)？](https://stackoverflow.com/questions/1448429/how-to-install-mysqldb-python-data-access-library-to-mysql-on-mac-os-x)

# javascript - 使用 Express.js 从 Amazon S3 流式传输资产 (JS/CSS/图像)

> ID：14743053
> 
> 赞同：4
> 
> 时间：2013-02-07T03:32:26.410
> 
> 标签：javascript, node.js, amazon-s3, express, appfog

我最近在 AppFog 上部署了我的 Node.js 博客。我计划在 Amazon S3 上使用存储桶来流式传输我的资产（javascript/样式表/图像）。

如何确保 Express.js 将静态资产获取到我的 Amazon S3 存储桶而不是常规存储桶`/public`？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-07T03:47:00.647

我不会通过节点服务器流式传输资产——这是一种资源浪费，而且您将不得不处理 HTTP 缓存标头。

相反，您的 HTML 应直接链接到 S3 存储桶。代替：

```
<script src="/js/script.js"></script> 
```

做：

```
<script src="//s3.amazonaws.com/bucket/js/script.js"></script> 
```

鉴于您正在迁移，只需设置一个永久重定向。

```
app.get(/^\/(js|css|images)\/.*/, function(req, res) {
    res.redirect(301, '//s3.amazonaws.com/bucket' + req.path);
}); 
```

这会将 js、css 和 images 文件夹中的所有请求重定向到 S3 存储桶。例如，/js/script.js 将重定向到 //s3.amazonaws.com/bucket/js/script.js。

这将有助于简化转换，但您仍应将站点的引用迁移到 S3 URL，以消除由于重定向造成的不必要的 HTTP 往返原因。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T03:36:19.750

如果您确实需要这样做，请使用请求库中的 pipe()： [https ://github.com/mikeal/request#streaming](https://github.com/mikeal/request#streaming)

# java - 如何通过在jsp中发送邮件来进行电子邮件验证

> ID：14743055
> 
> 赞同：2
> 
> 时间：2013-02-07T03:32:32.860
> 
> 标签：java, registration

我有注册表。提交后转到另一个 JSP 页面，在那里它获取该表单的数据并将其存储在我的数据库中。现在我想将电子邮件发送到他为确认而提供的用户 ID。我对此一无所知。请给我代码。这是我的注册表单操作并提交代码。

```
<form action="signupdata.jsp" method="POST">
<input type="submit" onclick="" value="submit"> 
```

这是在 signupdata.jsp 上将数据保存在我的数据库中。

```
int i=st.executeUpdate("insert into userdetails(firstname,lastname,email,password,cpassword,category) values('"+fname+"','"+lname+"','"+emal+"','"+pwd+"','"+cpwd+"','"+ctgry+"')"); 
```

现在我想像大多数网站提供的那样将确认电子邮件发送到用户的电子邮件 ID。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T04:11:31.777

问题的确切代码取决于您的项目，并且可能太大而无法在此处发布。我建议您不要寻找代码片段，而是询问适合您的问题域的通用解决方案/库，然后在谷歌上搜索基于此的代码示例。

在这种情况下，您可以使用`Java Mail API`发送邮件。只需 google 即可获取 Java Mail 代码示例。

如果你使用 Spring 框架`JavaMailSenderImpl`提供了一种方便的方式来发送邮件。

```
<bean id="mailSender" class="com.kshitiz.MailUtil"
    init-method="init" destroy-method="destroy">
    <constructor-arg index="0">
        <bean id="mailSenderMain" class="org.springframework.mail.javamail.JavaMailSenderImpl"
            p:host="${host}" p:port="${port}"
            p:username="${username}" p:password="${password}">
            <property name="javaMailProperties">
                <props>
                    <prop key="mail.debug">true</prop>
                    <prop key="mail.smtp.auth">true</prop>
                </props>
            </property>
        </bean>
    </constructor-arg>
</bean> 
```

然后在代码中 -

```
public class MailUtil {
    private MailSender mailSender;

    public MailUtil(MailSender mailSender)
    {
        this.mailSender=mailSender;
    }
    public void sendResetPasswordMail(String email, String password) {
        SimpleMailMessage message = new SimpleMailMessage();
        message.setFrom("mymail@gmail.com");
        message.setTo(email);
        message.setSubject("Your new password!");
        message.setText("Here is your new account login password - " + password);
        mailSender.send(message);
    }
} 
```

为了验证，您可以`auth_token`在 user_accounts 表中添加一个字段。此 auth_token 是`UUID`在注册时生成的。然后创建一个 servlet，它接受一个参数并根据数据库验证它。在邮件中发送指向此 servlet 的链接。如果验证成功，请擦除将`auth_token`用户标记为已验证的字段。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-07T04:20:46.513

**在firtPage.jsp**中编写以下代码

 **```
<form action="signupdata.jsp" method="POST">
Please enter email : <input type="text" name="email">
<input type="submit" onclick="" value="submit">
</form> 
```

**在signupdata.jsp**中编写以下代码

 **```
 // Recipient's email ID needs to be mentioned.
      String to = request.getParameter("email");

      // Sender's email ID needs to be mentioned
      String from = "SENDER_EMAIL";

      // Assuming you are sending email from localhost
      String host = "YOUR_EMAIL_HOST";

      // Get system properties
      Properties properties = System.getProperties();

      // Setup mail server
      properties.setProperty("mail.smtp.host", host);

      // Get the default Session object.
      Session session = Session.getDefaultInstance(properties);

      try{
         // Create a default MimeMessage object.
         MimeMessage message = new MimeMessage(session);

         // Set From: header field of the header.
         message.setFrom(new InternetAddress(from));

         // Set To: header field of the header.
         message.addRecipient(Message.RecipientType.TO,
                                  new InternetAddress(to));

         // Set Subject: header field
         message.setSubject("SUVJECT_LINE");

         // Now set the actual message
         message.setText("YOUR MESSAGE GOES HERE");

         // Send message
         Transport.send(message);
         System.out.println("Sent message successfully....");
      }catch (MessagingException mex) {
         mex.printStackTrace();
      }
   } 
```****

# ruby-on-rails - 范围与连接使 SQL 安全

> ID：14743057
> 
> 赞同：0
> 
> 时间：2013-02-07T03:32:49.717
> 
> 标签：ruby-on-rails, sql-injection, rails-activerecord

我也有返回用户有权访问的项目列表的范围。他们要么在参与者名单上，要么拥有他们列出的项目。查询工作正常，但它不是 SQL 安全的。我不知道如何使 JOIN 安全。where 子句是安全的，但尝试与 join 相同的操作不起作用。我似乎在这里找不到文档或答案。猜我错过了一些基本的东西。

```
scope :manageable_by_user, lambda { |user| 
  joins("LEFT JOIN participants ON 
         participants.project_id = projects.id 
         AND participants.user_id = #{user.id}").
  where("projects.user_id = ? OR projects.user_id IS NOT NULL",user.id)
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T03:36:15.163

采用`ActiveRecord::Base.sanitize(string)`

# r - R, ggplot - 共享相同 y 轴但具有不同 x 轴刻度的图

> ID：14743060
> 
> 赞同：23
> 
> 时间：2013-02-07T03:32:59.800
> 
> 标签：r, ggplot2

# 语境

我有一些数据集/变量，我想绘制它们，但我想以紧凑的方式进行。为此，我希望它们共享相同的 y 轴但不同的 x 轴，并且由于分布不同，我希望其中一个 x 轴进行对数缩放，另一个进行线性缩放。

# 例子

假设我有一个长尾变量（我希望 x 轴在绘制时按对数缩放）：

```
library(PtProcess)
library(ggplot2)

set.seed(1)
lambda <- 1.5
a <- 1
pareto <- rpareto(1000,lambda=lambda,a=a)
x_pareto <- seq(from=min(pareto),to=max(pareto),length=1000)
y_pareto <- 1-ppareto(x_pareto,lambda,a)
df1 <- data.frame(x=x_pareto,cdf=y_pareto)

ggplot(df1,aes(x=x,y=cdf)) + geom_line() + scale_x_log10() 
```

![长尾巴](../Images/dcb49348ca0b6f45c8d978532866d95f.png)

和一个正常的变量：

```
set.seed(1)
mean <- 3
norm <- rnorm(1000,mean=mean)
x_norm <- seq(from=min(norm),to=max(norm),length=1000)
y_norm <- pnorm(x_norm,mean=mean)
df2 <- data.frame(x=x_norm,cdf=y_norm)

ggplot(df2,aes(x=x,y=cdf)) + geom_line() 
```

![普通的](../Images/a89d22bcd6f1db36af27f20910207e4c.png)

我想使用相同的 y 轴并排绘制它们。

## 尝试#1

我可以用 facets 来做到这一点，看起来很棒，但我不知道如何使每个 x 轴具有不同的比例（`scale_x_log10()`使它们都按比例缩放）：

```
df1 <- cbind(df1,"pareto")
colnames(df1)[3] <- 'var'
df2 <- cbind(df2,"norm")
colnames(df2)[3] <- 'var'
df <- rbind(df1,df2)

ggplot(df,aes(x=x,y=cdf)) + geom_line() + 
       facet_wrap(~var,scales="free_x") + scale_x_log10() 
```

![刻面尝试](../Images/d2f86f3449d7f9a0b5fb613b502272f2.png)

## 尝试#2

使用`grid.arrange`，但我不知道如何使两个绘图区域保持相同的纵横比：

```
library(gridExtra)
p1 <- ggplot(df1,aes(x=x,y=cdf)) + geom_line() + scale_x_log10() +
      theme(plot.margin = unit(c(0,0,0,0), "lines"),
            plot.background = element_blank()) +
      ggtitle("pareto")
p2 <- ggplot(df2,aes(x=x,y=cdf)) + geom_line() + 
      theme(axis.text.y = element_blank(), 
            axis.ticks.y = element_blank(), 
            axis.title.y = element_blank(),
            plot.margin = unit(c(0,0,0,0), "lines"),
            plot.background = element_blank()) +
      ggtitle("norm")
grid.arrange(p1,p2,ncol=2) 
```

![网格尝试](../Images/9161cd561793ade683293460434bb095.png)

**PS：地块的数量可能会有所不同，所以我不是专门为 2 个地块寻找答案**

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-07T12:29:39.913

扩展您的尝试＃2，`gtable`也许可以帮助您。如果两个图表中的边距相同，那么两个图中唯一改变的宽度（我认为）是 y 轴刻度标记标签和轴文本占用的空间，这反过来会改变面板的宽度. 使用[此处](https://stackoverflow.com/a/13295880/419994)的代码，轴文本占用的空间应该相同，因此两个面板区域的宽度应该相同，因此纵横比应该相同。但是，结果（右侧没有边距）看起来并不漂亮。所以我在 p2 的右边添加了一点边距，然后在 p2 的左边去掉了相同的量。p1 也是如此：我在左边加了一点，但在右边去掉了相同的量。

```
library(PtProcess)
library(ggplot2)
library(gtable)
library(grid)
library(gridExtra)

set.seed(1)
lambda <- 1.5
a <- 1
pareto <- rpareto(1000,lambda=lambda,a=a)
x_pareto <- seq(from=min(pareto),to=max(pareto),length=1000)
y_pareto <- 1-ppareto(x_pareto,lambda,a)
df1 <- data.frame(x=x_pareto,cdf=y_pareto)

set.seed(1)
mean <- 3
norm <- rnorm(1000,mean=mean)
x_norm <- seq(from=min(norm),to=max(norm),length=1000)
y_norm <- pnorm(x_norm,mean=mean)
df2 <- data.frame(x=x_norm,cdf=y_norm)

p1 <- ggplot(df1,aes(x=x,y=cdf)) + geom_line() + scale_x_log10() +
      theme(plot.margin = unit(c(0,-.5,0,.5), "lines"),
            plot.background = element_blank()) +
      ggtitle("pareto")
p2 <- ggplot(df2,aes(x=x,y=cdf)) + geom_line() + 
      theme(axis.text.y = element_blank(), 
            axis.ticks.y = element_blank(), 
            axis.title.y = element_blank(),
            plot.margin = unit(c(0,1,0,-1), "lines"),
            plot.background = element_blank()) +
      ggtitle("norm")

gt1 <- ggplotGrob(p1)
gt2 <- ggplotGrob(p2)

newWidth = unit.pmax(gt1$widths[2:3], gt2$widths[2:3])

gt1$widths[2:3] = as.list(newWidth)
gt2$widths[2:3] = as.list(newWidth)

grid.arrange(gt1, gt2, ncol=2) 
```

![在此处输入图像描述](../Images/e7ec850bc2b1217225d6a34223426911.png)

**编辑** 要在右侧添加第三个绘图，我们需要对绘图画布进行更多控制。一种解决方案是创建一个新的 gtable，其中包含三个绘图的空间和一个用于右边距的额外空间。在这里，我让图中的边距处理图之间的间距。

```
p1 <- ggplot(df1,aes(x=x,y=cdf)) + geom_line() + scale_x_log10() +
      theme(plot.margin = unit(c(0,-2,0,0), "lines"),
            plot.background = element_blank()) +
      ggtitle("pareto")
p2 <- ggplot(df2,aes(x=x,y=cdf)) + geom_line() + 
      theme(axis.text.y = element_blank(), 
            axis.ticks.y = element_blank(), 
            axis.title.y = element_blank(),
            plot.margin = unit(c(0,-2,0,0), "lines"),
            plot.background = element_blank()) +
      ggtitle("norm")

gt1 <- ggplotGrob(p1)
gt2 <- ggplotGrob(p2)

newWidth = unit.pmax(gt1$widths[2:3], gt2$widths[2:3])

gt1$widths[2:3] = as.list(newWidth)
gt2$widths[2:3] = as.list(newWidth)

 # New gtable with space for the three plots plus a right-hand margin
gt = gtable(widths = unit(c(1, 1, 1, .3), "null"), height = unit(1, "null"))

# Instert gt1, gt2 and gt2 into the new gtable
gt <- gtable_add_grob(gt, gt1, 1, 1)
gt <- gtable_add_grob(gt, gt2, 1, 2)
gt <- gtable_add_grob(gt, gt2, 1, 3)

grid.newpage()
grid.draw(gt) 
```

![在此处输入图像描述](../Images/b773558879620f6baad772a8b943c408.png)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2019-08-10T23:47:04.147

公认的答案正是让人们在使用 R 绘图时奔跑的原因！这是我的解决方案：

```
library('grid')
g1 <- ggplot(...)  # however you draw your 1st plot
g2 <- ggplot(...)  # however you draw your 2nd plot
grid.newpage()
grid.draw(cbind(ggplotGrob(g1), ggplotGrob(g2), size = "last")) 
```

这可以毫不费力地处理 y 轴（次要和主要）指南以在多个图中对齐。

删除一些轴文本，统一图例，......是在创建单独的图时可以处理的其他任务，或者通过使用[grid](https://www.rdocumentation.org/packages/grid/versions/3.6.1)或[gridExtra](https://cran.r-project.org/web/packages/gridExtra/index.html)包提供的其他方式。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-12-24T02:33:25.883

接受的答案对我来说有点太吓人了。所以我找到了两种方法来以更少的努力解决它。两者都基于您的尝试 #2`grid.arrange()`方法。

1\. 使情节 1 也没有 y 轴

```
theme(axis.text.y = element_blank(), 
      axis.ticks.y = element_blank(), 
      axis.title.y = element_blank() 
```

所以所有的情节都是一样的。您不会遇到不同纵横比的问题。您将需要使用 R 或您最喜欢的图像编辑应用程序生成单独的 y 轴。

2\. 修正并尊重纵横比

添加`aspect.ratio = 1`或您想要`theme()`的单个地块的任何比例。然后`respect=TRUE`在你的`grid.arrange()`

这样，您可以将 y 轴保留在 plot1 中，并且仍然保持所有图中的纵横比。受到[这个答案](https://stackoverflow.com/a/26090137/2852816)的启发。

希望这些对您有所帮助！

# sqlite - sqlite3_exec 没有回调

> ID：14743061
> 
> 赞同：6
> 
> 时间：2013-02-07T03:33:32.323
> 
> 标签：sqlite, callback

有什么方法可以在不通过回调的情况下获得 sqlite3_exec() 结果？当我进行搜索时，我想直接获得结果，最像函数的返回还是作为 OUT 参数？

谢谢。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2016-01-19T09:33:08.773

我已经编写了一些代码，允许我们根据 sql 查询（zSql）从打开的数据库（db）中读取数据而无需回调。请注意，此代码有效，但可能仍需要一些工作（例如，我不确定我们是否需要释放文本数据......）

```
int RunSqlNoCallback(sqlite3 * db, const char * zSql)
{
    sqlite3_stmt *stmt = NULL;
    int rc = sqlite3_prepare_v2(db, zSql, -1, &stmt, NULL);
    if (rc != SQLITE_OK)
        return rc;

    int rowCount = 0;
    rc = sqlite3_step(stmt);
    while (rc != SQLITE_DONE && rc != SQLITE_OK)
    {
        rowCount++;
        int colCount = sqlite3_column_count(stmt);
        for (int colIndex = 0; colIndex < colCount; colIndex++)
        {
            int type = sqlite3_column_type(stmt, colIndex);
            const char * columnName = sqlite3_column_name(stmt, colIndex);
            if (type == SQLITE_INTEGER)
            {
                int valInt = sqlite3_column_int(stmt, colIndex);
                printf("columnName = %s, Integer val = %d", columnName, valInt);
            }
            else if (type == SQLITE_FLOAT)
            {
                double valDouble = sqlite3_column_double(stmt, colIndex);
                printf("columnName = %s,Double val = %f", columnName, valDouble);
            }
            else if (type == SQLITE_TEXT)
            {
                const unsigned char * valChar = sqlite3_column_text(stmt, colIndex);
                printf("columnName = %s,Text val = %s", columnName, valChar);
                free(valChar);
            }
            else if (type == SQLITE_BLOB)
            {
                printf("columnName = %s,BLOB", columnName);
            }
            else if (type == SQLITE_NULL)
            {
                printf("columnName = %s,NULL", columnName);
            }
        }
        printf("Line %d, rowCount = %d", rowCount, colCount);

        rc = sqlite3_step(stmt);
    }

    rc = sqlite3_finalize(stmt);

    return rc;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-10-20T10:31:34.980

`sqlite3_exec`是一个方便的包装器。

如果你不需要回调，你应该使用底层函数：`sqlite3_prepare_v2()`, `sqlite3_step()`, 和`sqlite3_finalize()`直接。

1.  编译sql查询`sqlite3_prepare_v2()`
2.  根据需要运行`sqlite3_step()`多次以执行查询，使用 `sqlite3_column_bytes()`等来检索数据
3.  销毁准备好的查询`sqlite3_finalize()`

但它需要更多的编码和仔细的错误处理。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-07T08:33:03.303

调用回调是`sqlite3_exec`设计的工作方式。

如果你想要一个为结果分配所有内存并返回的函数，你需要一个不同的函数，比如[`sqlite3_get_table`](http://www.sqlite.org/c3ref/free_table.html).

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-06-06T17:37:58.960

回调是`sqlite3_exec ()`用于返回一个或多个结果的机制。看起来它的主要用途是使用 select SQL 语句。如果 select SQL 语句返回多行结果，则指定的回调函数由每行的 sqlite 功能调用。

我不确定您使用的是 C 还是 C++ 或其他一些语言，但是我有一个可能的解决方案供您使用 C 和 SQLite。

回调函数的第一个参数是一个 void 指针，它可以指向几乎任何东西。例如，它可以指向一个结构，该结构包含指向为结果分配的内存区域的指针以及指示内存区域大小的参数。

我回答了这个 stackoverflow 问题，[使用 sql3_exec](https://stackoverflow.com/questions/1805982/use-of-sqlite3-exec/16964389)，并举例说明了使用一个使用 select SQL 语句的结果填充 C 结构的回调。在此示例中，我有一个回调，它从选择中获取一个或多个行结果，并将结果转换为数据值以放入 C 结构中。当`sqlite3_exec()`函数返回时，我使用 C 结构处理来自 select 的结果。

这可能是您正在寻找的，因为您可以创建选择 SQL 语句、设置结果结构、调用`sqlite3_exec()`指定结果结构以及指向回调的函数指针以使用结果结构处理结果，以及何时`sqlite3_exec()`返回你有你选择的结果。选择的结果将在您调用的位置`sqlite3_exec()`。

# c++ - 映射随机数

> ID：14743063
> 
> 赞同：-2
> 
> 时间：2013-02-07T03:34:01.157
> 
> 标签：c++, c

```
for(int i=0;i<100;i++)
   for(int j=0;i<6;j++)
   {
      cout<<rand()%6<<"," // Store these numbers in a map
   }
cout<<endl; 
```

说，假设我将这些随机数存储在内部 for 循环中`map<int,myRandomNumbers>`

在一些随机游戏中，游戏制作者也创建了一个类似的调用`rand()%6`来获取所有 6 个数字。这 6 个数字是否有任何可能与其中一个完全或部分相同`myRandomNumbers`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T03:39:51.217

好吧，你可以计算它，假设`rand()`给出一个完全均匀的分布（它没有，但我们假设它无论如何都会这样做）。如果在该范围内生成 6 个随机数，`[0, 5]`则从同一范围内生成的另一组 6 个随机数完全相同的概率是`(1/6)^6 ~ 2.14e-5`。您可以使用[二项分布](http://en.wikipedia.org/wiki/Binomial_distribution)来计算它们部分相似的概率，即在`n`n in 的位置匹配`[0, 6]`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T03:41:33.493

`rand()`除非您通过调用来播种函数，否则您`srand()`很有可能会得到完全相同的数字（假设随机数是由不同的进程创建的）。

# ruby - 在 xpath/Nokogiri 中嵌入 Ruby

> ID：14743066
> 
> 赞同：0
> 
> 时间：2013-02-07T03:34:14.197
> 
> 标签：ruby, xpath, nokogiri, mechanize

可能是一个非常简单的问题：

我正在使用 Mechanize、Nokogori 和 Xpath 来解析一些 html，如下所示：

```
category = a.page.at("//li//a[text()='Test']") 
```

现在，我希望我正在搜索的术语`text()=`是动态的......即我想创建一个局部变量：

```
term = 'Test' 
```

并将该本地 ruby​​ 变量嵌入到 Xpath 中，如果这有意义的话。

有什么想法吗？

我的直觉是将其视为字符串连接，但这行不通：

```
term = 'Test'
category = a.page.at("//li//a[text()=" + term + "]") 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-07T03:36:50.770

当你使用`category = a.page.at("//li//a[text()=" + term + "]")`. 方法的最终结果是`//li//a[text()=Test]`test 不在引号中。因此，要在字符串周围加上引号，您需要使用转义字符`\`。

```
 term = 'Test'
   category = a.page.at("//li//a[text()=\"#{term}\"]") 
```

或者

```
 category = a.page.at("//li//a[text()='" + term + "']") 
```

或者

```
 category = a.page.at("//li//a[text()='#{term}']") 
```

例如：

```
>> a="In quotes" #=> "In quotes"

>> puts "This string is \"#{a}\""  #=> This string is "In quotes"
>> puts "This string is '#{a}'"    #=> This string is 'In quotes'
>> puts "This string is '"+a+"'"   #=> This string is 'In quotes' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-10T16:13:48.467

可能与您的问题相关的一个很少使用的功能是 Nokogiri 在评估 XPath 表达式时调用 ruby​​ 回调的能力。

[您可以在http://nokogiri.org](http://nokogiri.org)`Node#xpath`的( [http://nokogiri.org/Nokogiri/XML/Node.html#method-i-xpath](http://nokogiri.org/Nokogiri/XML/Node.html#method-i-xpath) )方法文档下阅读有关此功能的更多信息，但这里有一个示例解决您的问题问题：

```
#! /usr/bin/env ruby

require 'nokogiri'

xml = <<-EOXML
<root>
  <a n='1'>foo</a>
  <a n='2'>bar</a>
  <a n='3'>baz</a>
</root>
EOXML
doc = Nokogiri::XML xml

dynamic_query = Class.new do
  def text_matching node_set, string
    node_set.select { |node| node.inner_text == string }
  end
end

puts doc.at_xpath("//a[text_matching(., 'bar')]", dynamic_query.new)
# => <a n="2">bar</a>
puts doc.at_xpath("//a[text_matching(., 'foo')]", dynamic_query.new)
# => <a n="1">foo</a> 
```

HTH。

# mysql - SQL在一个查询中选择两个表

> ID：14743070
> 
> 赞同：-1
> 
> 时间：2013-02-07T03:34:50.470
> 
> 标签：mysql, sql

我的mysql数据库中有两个相互关联的表，用户和user_info。users 表包含用户名、密码等，而我的 user_info 表包含用户的基本信息，如姓氏、名字等。我想知道如何在不使用两个 select 语句的情况下显示来自两个表的一行。

它是这样的：（我知道这不是正确的格式。抱歉）

```
SELECT * FROM users AND user_info WHERE users.user_id == user_info.user_id 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-07T03:40:20.243

你想要的是一个`inner join`.

```
SELECT *
FROM Users
INNER JOIN User_Info on Users.User_Id = User_Info.User_Id 
```

您可以在此处阅读有关选择语句、连接等的更多信息：
[MySQL 参考 - 选择语法](http://dev.mysql.com/doc/refman/5.0/en/select.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-07T03:43:12.930

尝试这个：

```
SELECT users.user_id, user_info.user_id 
FROM users, user_info 
WHERE users.user_id = user_info.user_id; 
```

# c++ - boost::shared_polymorphic_downcast 在 boost 1.53.0 中消失了。我应该改用什么？

> ID：14743071
> 
> 赞同：6
> 
> 时间：2013-02-07T03:34:51.730
> 
> 标签：c++, boost, shared-ptr

`boost::shared_polymorphic_downcast`在 boost [1.52.0](http://www.boost.org/doc/libs/1_52_0/boost/smart_ptr/shared_ptr.hpp)和[1.53.0](http://www.boost.org/doc/libs/1_53_0/boost/smart_ptr/shared_ptr.hpp)之间消失。[发行说明](http://www.boost.org/users/history/version_1_53_0.html)中没有提及此内容，提交 (r81463) 仅包含神秘的日志消息“更新 shared_ptr casts”。

我不清楚我现在应该使用什么，或者为什么删除了这个功能。有人可以帮忙吗？

编辑：感谢大家有见地的评论。我发现自己有点沮丧，因为 boost 会在没有任何理由或通知的情况下在发布中做出向后不兼容的更改，而且我还发现它们删除了有用的功能令人沮丧。但是根据回复，我可以用两行代码而不是一行代码来做我想做的事情，所以我认为这就足够了。尽管如此，我仍然“未回答”这个问题，因为没有人提供一种简单的方法来获得 ; 的旧行为`boost::shared_polymorphic_downcast`。也就是说，在`dynamic_cast`启用调试时使用 a ，在不启用调试时使用 a `static_cast`。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-07T03:43:44.350

使用`boost::dynamic_pointer_cast`.

它所说的更新是为了匹配 C++11 的设计。在 C++11 中，指针转换被概括为函数`std::dynamic_pointer_cast`（和朋友），以允许我们编写：

```
template <typename PointerToBase> // models Base* in some way
void foo(PointerToBase ptr)
{
    auto ptrToDerived = std::dynamic_pointer_cast<Derived>(ptr);
} 
```

所以这`PointerToBase`可能是 raw`Base*`或 a `std::shared_ptr<Base>`，而无需我们编写案例。

Boost 当然只是想尽可能地匹配 C++。

# sql-server - 多维数据集处理错误 - 数据库“主”中的 CREATE DATABASE 权限被拒绝。；42000

> ID：14743073
> 
> 赞同：0
> 
> 时间：2013-02-07T03:35:03.530
> 
> 标签：sql-server, odbc, oledb, cube, olap-cube

这些是我在 SQL Server 2008（在 VMWare 上的 Windows 8 x64 上）处理多维数据集时遇到的错误（重复了几次）。

```
OLE DB error: OLE DB or ODBC error: Cannot attach the file '\\vmware-host\Shared Folders\Downloads\AdventureWorks2008R2_Database\AdventureWorks2008R2_Data.mdf' as database 'Adventure Works'.; 42000; CREATE DATABASE permission denied in database 'master'.; 42000.

Errors in the high-level relational engine. A connection could not be made to the data source with the DataSourceID of 'Adventure Works', Name of 'Adventure Works'.

Errors in the OLAP storage engine: An error occurred while the dimension, with the ID of 'Address', Name of 'Address' was being processed.

Errors in the OLAP storage engine: An error occurred while the 'Territory ID' attribute of the 'Address' dimension from the 'MultidimensionalProject1' database was being processed. 
```

任何建议将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T04:12:20.927

我想到了。双击我的数据源，转到模拟信息选项卡并从使用服务帐户更改为使用特定的 Windows 用户名和密码。

归功于：[http ://www.sqlservercentral.com/Forums/Topic1032175-17-1.aspx](http://www.sqlservercentral.com/Forums/Topic1032175-17-1.aspx)

# php - 非常基本的PHP数组问题

> ID：14743074
> 
> 赞同：0
> 
> 时间：2013-02-07T03:35:08.737
> 
> 标签：php, arrays

我正在创建一个表单，用户在其中选择他们可能感兴趣的“服务”复选框，然后表单会通过电子邮件发送给我。问题是天气是否选中了一个框，所有结果都被填写了。我该如何正确地做到这一点？

大约有 25 个，但这里只是几个：

```
 $services = array();
if($_POST['master_planning']) {$services[] = "Master planning";} 
if($_POST['snow_plowing']) {$services[] = "Snow plowing";} 
if($_POST['fine_gardening']) {$services[] = "Fine Gardening";} 
if($_POST['deer_protection']) {$services[] = "Deer Protection";} 

$interested = implode(", ", $services); 
```

我知道这是一个非常基本的事情，但我似乎无法自己解决它

HTML就像：

```
<li><label for="planting"><input type="checkbox" name="planting" id="planting" value="x" /> Planting</label></li> 
```

好的，我想（我认为）为什么所有值都返回 true，即使未单击复选框，现在我该如何解决它......

我想我应该提到这是表单（process.php）的第 2 页，实际表单是 index.php，我正在使用 ajax 脚本来传递值。

```
 <script type="text/javascript">
$(document).ready(function() {
    $('#submit').click(function () {        

        var name = $('input[name=name]');
        var phone = $('input[name=phone]');
        var email = $('input[name=email]');
        var master_plan = $('input[name=master_plan]');
        var front_foundation = $('input[name=front_foundation]');
        var backyard_plan = $('input[name=backyard_plan]');
        var specialty_garden = $('input[name=specialty_garden]');
        var lawn_cutting = $('input[name=lawn_cutting]');
        var lawn_plant_health_care = $('input[name=lawn_plant_health_care]');
        var organic_property_care = $('input[name=organic_property_care]');
        var seasonal_clean_ups = $('input[name=seasonal_clean_ups]');
        var pruning = $('input[name=pruning]');
        var fine_gardening = $('input[name=fine_gardening]');
        var deer_protection = $('input[name=deer_protection]');
        var snow_plowing = $('input[name=snow_plowing]');
        var planting = $('input[name=planting]');
        var walk = $('input[name=walk]');
        var terrace = $('input[name=terrace]');
        var wall = $('input[name=wall]');
        var outdoor_kitchen = $('input[name=outdoor_kitchen]');
        var fireplace = $('input[name=fireplace]');
        var driveway = $('input[name=driveway]');
        var fencing = $('input[name=fencing]');
        var pergola = $('input[name=pergola]');
        var swimming_pool = $('input[name=swimming_pool]');
        var irrigation = $('input[name=irrigation]');
        var lighting = $('input[name=lighting]');
        var grading_drainage = $('input[name=grading_drainage]');

        var newsletter = $('input[name=newsletter]');
        var comments = $('textarea[name=comments]');

        if (name.val()=='') {
            name.addClass('hightlight');
            return false;
        } else name.removeClass('hightlight');

        if (email.val()=='') {
            email.addClass('hightlight');
            return false;
        } else email.removeClass('hightlight');

        var data = 
        'name=' + name.val() + 
        '&phone=' + phone.val() + 
        '&email=' + email.val() + 
        '&master_plan=' + master_plan.val()+            
        '&front_foundation=' + front_foundation.val()+
        '&backyard_plan=' + backyard_plan.val()+
        '&specialty_garden=' + specialty_garden.val()+
        '&lawn_cutting=' + lawn_cutting.val()+
        '&lawn_plant_health_care=' + lawn_plant_health_care.val()+
        '&organic_property_care=' + organic_property_care.val()+
        '&seasional_clean_ups=' + seasional_clean_ups.val()+
        '&pruning=' + pruning.val()+
        '&fine_gardening=' + fine_gardening.val()+
        '&deer_protection=' + deer_protection.val()+
        '&snow_plowing=' + snow_plowing.val()+
        '&planting=' + planting.val()+
        '&walk=' + walk.val()+
        '&terrace=' + terrace.val()+
        '&wall=' + wall.val()+
        '&outdoor_kitchen=' + outdoor_kitchen.val()+
        '&fireplace=' + fireplace.val()+
        '&driveway=' + driveway.val()+
        '&fencing=' + fencing.val()+
        '&pergola=' + pergola.val()+
        '&swimming_pool=' + swimming_pool.val()+
        '&irrigation=' + irrigation.val()+
        '&lighting=' + lighting.val()+
        '&grading_drainage=' + grading_drainage.val()+

        '&newsletter=' + newsletter.val() + 
        '&comments='  + encodeURIComponent(comments.val());

        $('.text').attr('disabled','true');
        $('.loading').show();

        $.ajax({
            url: "process.php", 
            type: "GET", 
            data: data, 
            cache: false, 
            success: function (html) { 
                if (html==1) { 
                    $('.form').fadeOut('slow'); 
                    $('.done').fadeIn('slow'); 
                } else alert('Sorry, unexpected error. Please try again later.'); 
            } 
        });
        return false;
    });                         
}); 
</script> 
```

这可能是显示每个结果的原因吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T03:52:39.370

您的支票不正确。假设您的表单中的复选框有以下 HTML 代码：

```
<input type="checkbox" name="master_planning" value="yes" /> 
```

然后在你的 PHP 上你想做这样的检查：

```
if(isset($_POST['master_planning']) && $_POST['master_planning'] == 'yes'){
    array_push($services, "Master planning"];        
} 
```

函数**array_push**在数组末尾添加一个或多个给定元素，因此这将是一种“动态”填充数组的简单方法。

# javascript - 如何使弹出框出现在我的鼠标进入悬停目标的位置？

> ID：14743076
> 
> 赞同：8
> 
> 时间：2013-02-07T03:35:12.573
> 
> 标签：javascript, jquery, twitter-bootstrap, bootstrap-popover, mouse-cursor

这是一个示例代码，用于在我的按钮下方显示弹出窗口：

```
$.fn.popover.defaults = $.extend({} , $.fn.tooltip.defaults, {
placement: 'bottom', content: '' 
```

现在我希望弹出窗口出现在我的光标移动的位置（不仅是顶部/底部/左侧/右侧，而是取决于用户将光标放在哪里的特定位置）。

如何得到它？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-02-07T21:29:18.273

在 bootstrap-tooltip.js 中，替换（大约在第 72 行）

```
 , enter: function (e) { 
```

和

```
 , enter: function (e) {
       var mousePos = { x: -1, y: -1 };
       mousePos.x = e.pageX;
       mousePos.y = e.pageY;
       window.mousePos = mousePos; 
```

并替换（大约在第 144 行）

```
 case 'right':
            tp = {top: pos.top + pos.height / 2 - actualHeight / 2, left: pos.left + pos.width}
            break 
```

和

```
 case 'right':
        tp = {top: pos.top + pos.height / 2 - actualHeight / 2, left: pos.left + pos.width}
        break
      case 'mouse':
        tp = {top: window.mousePos.y, left: window.mousePos.x}
        break 
```

然后像这样调用你的弹出窗口：

```
$('.pop').popover({'placement': 'mouse'}); 
```

这是一种快速而肮脏的方法（破解核心文件），但它确实有效。也许其他人有更好的方法。请注意，弹出指针需要一些工作，因为它不会出现。

此示例在 Bootstrap 2.0.3 中进行了测试，但代码在 2.2.2 中看起来相似。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2015-08-14T09:37:02.060

对于引导程序 3.xx

1.  将属性**atMouse:false**添加到内联类 Tooltip.DEFAULTS{}。

    ```
    Tooltip.DEFAULTS = {
     animation: true,
     placement: 'top',
     selector: false,
     template: '<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',
     trigger: 'hover focus',
     title: '',
     delay: 0,
     html: false,
     container: false,
     atMouse: false,
     viewport: {
       selector: 'body',
       padding: 0
     }
    } 
    ```

2.  转到方法“Tooltip.prototype.enter”中的第 1368 行并更改以下代码：

    ```
    if (obj instanceof $.Event) {
      self.inState[obj.type == 'focusin' ? 'focus' : 'hover'] = true
    } 
    ```

    到：

    ```
    if (obj instanceof $.Event) {
      self.inState[obj.type == 'focusin' ? 'focus' : 'hover'] = true
      self.options.mousePos = {posX: obj['pageX'], posY: obj['pageY']}
    } 
    ```

3.  在“Tooltip.prototype.show”方法内添加以下代码：

    ```
    if(this.options.atMouse) {
      pos['posY'] = this.options.mousePos['posY'];
      pos['posX'] = this.options.mousePos['posX'];
    } 
    ```

    在这行代码之前：

    ```
    var calculatedOffset = this.getCalculatedOffset(placement, pos,
            actualWidth, actualHeight) 
    ```

4.  在 Tooltip.prototype.getCalculatedOffset 方法的主体前添加以下代码：

    ```
    if(this.options.atMouse) {
      return placement == 'bottom' ? {top: pos.top + pos.height, left: pos.posX - (actualWidth / 2)} :
      placement == 'top' ? {top: pos.top - actualHeight, left: pos.posX - (actualWidth / 2)} :
      placement == 'left' ? {top: pos.top + pos.height / 2 - actualHeight / 2, left: pos.posX - actualWidth} :
      {top: pos.top + pos.height / 2 - actualHeight / 2, left: pos.posX}
    } 
    ```

5.  像这样调用工具提示/弹出框：

    ```
    $("[data-toggle='popover']").popover({
        html: true,
        container: 'body',
        atMouse: true,
        trigger: 'hover',
        animation: false,
        placement: "top auto"
      }); 
    ```

为我工作。

# php - JSON 字符编码

> ID：14743077
> 
> 赞同：0
> 
> 时间：2013-02-07T03:35:34.803
> 
> 标签：php, json

我在 mySQL 数据库表中有一些欧洲字符。我的 JSON 代码为这些返回 null 对象。我还定义了标头和 utf8 编码，结果仍然为空。我在这里附上了我的代码片段

标题：

```
header("Content-Type: text/javascript; charset=utf-8"); 
```

JSON编码

```
while ( $aRow = mysql_fetch_array( $rResult ) )
{
    $row = array();
    for ( $i=0 ; $i<count($aColumns) ; $i++ )
    {
        if ( $aColumns[$i] == "version" )
        {
            /* Special output formatting for 'version' column */
            $row[] = ($aRow[ $aColumns[$i] ]=="0") ? '-' : $aRow[ $aColumns[$i] ];
        }
        else if ( $aColumns[$i] != ' ' )
        {
            /* General output */
            $row[] = $aRow[ $aColumns[$i] ];
        }
    }
    $output['aaData'][] = $row;
}

echo utf8_encode(json_encode( $output )); 
```

JSON导致萤火虫：

```
{"sEcho":1,"iTotalRecords":"190458","iTotalDisplayRecords":"4","aaData":[["University of Toronto ","Canada","72","17","41","144","7","16","6"],["The University of British Columbia ","Canada","71","22","44","176","11","16","7"],["University of Calgary","Canada","65","31","45","145","11","15","6"],[null,"Canada","63","18","45","125","12","26","6"]]} 
```

在 JSON 结果中，大学名称中的一个字段为空，因为大学名称是欧洲字符。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T05:14:47.573

最后我通过改变这个得到了我的答案

```
 $row[] = $aRow[ $aColumns[$i] ]; 
```

进入

```
 $row[] = utf8_encode($aRow[ $aColumns[$i] ]); 
```

我将返回的整个输出编码为 utf-8，现在可以在数据表中看到这些字符。希望它可以帮助某人。

# javascript - 将项目从 .Net2.0 转换为 .Net4.0 后 WebMethod 调用失败

> ID：14743079
> 
> 赞同：2
> 
> 时间：2013-02-07T03:35:49.673
> 
> 标签：javascript, asp.net, web-services

ASP.Net with C# Project 由VS2005 开发，在Windows Server2003 和IIS6 下运行。由于我们正在计划硬件升级，我们尝试将项目移动到带有 .Net4.0 和 IIS7 的 VS2012。解决方案从 VS2005 到 VS2012 与 .Net4.0 并部署到 IIS7 的转换是顺利的。该网站在 IE9 下运行良好，除了来自 javascript 的 WebMethod 调用抛出错误消息：500-服务器方法“LookupTest”失败。

这就是 WebMethod 部分：

```
[WebService(Namespace = "http://tempuri.org/")]
[WebServiceBinding(ConformsTo = WsiProfiles.BasicProfile1_1)]
[System.Web.Script.Services.ScriptService]
public class LookupMethods : System.Web.Services.WebService
{
    [WebMethod]
    [System.Web.Script.Services.ScriptMethod]
    public UNLookupResult LookupTest(int objectID)
    {
        return new UNLookupResult();
    }
} 
```

对 WebMethod 的 JavaScript 调用：

```
this._WebRequest = Sys.Net.WebServiceProxy.invoke(this._SearchPath, "LookupContractTest", false, { "objectID":20 }, Function.createDelegate(this, this.LookupComplete), Function.createDelegate(this, this.LookupError)); 
```

1.  我在IIS7下调试程序时无法调用LookupTest函数。
2.  如果我修改 LookupTest 函数不带参数，它运行良好，没有任何错误。像这样： public UNLookupResult LookupTest()
3.  该项目使用 AjaxControlToolkit.dll v1.1。如果项目使用.Net4.0会不会有问题？

任何提示或建议？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T05:29:23.773

从 IIS6 迁移到 IIS7 时，需要在 web.config中进行[一些更改。](http://world.episerver.com/Documentation/Items/Tech-Notes/EPiServer-CMS-5/EPiServer-CMS-5-R2-SP1/Changes-Between-IIS6-and-IIS7/)这是您的问题的最可能原因。

在 IIS7 中不会读取您的`<httpHandlers>`和`<httpModules>`. 您需要为 IIS7 配置它们，如下所示：

参考：[配置 Asp.net AJAX](http://www.asp.net/AJAX/Documentation/Live/ConfiguringASPNETAJAX.aspx)

```
<system.webServer>
  <validation validateIntegratedModeConfiguration="false" />
  <modules>
    <add name="ScriptModule" 
      preCondition="integratedMode" 
      type="System.Web.Handlers.ScriptModule, System.Web.Extensions, Version=1.0.61025.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35"/>
  </modules>
  <handlers>
    <remove name="WebServiceHandlerFactory-ISAPI-2.0"/>
    <add name="ScriptHandlerFactory" verb="*" path="*.asmx" 
      preCondition="integratedMode"
      type="System.Web.Script.Services.ScriptHandlerFactory, System.Web.Extensions, Version=1.0.61025.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35"/>
    <add name="ScriptHandlerFactoryAppServices" verb="*" 
      path="*_AppService.axd" preCondition="integratedMode"
      type="System.Web.Script.Services.ScriptHandlerFactory, 
      System.Web.Extensions, Version=1.0.61025.0, Culture=neutral, 
      PublicKeyToken=31bf3856ad364e35"/>
    <add name="ScriptResource" preCondition="integratedMode" 
      verb="GET,HEAD" path="ScriptResource.axd" 
      type="System.Web.Handlers.ScriptResourceHandler, 
      System.Web.Extensions, Version=1.0.61025.0, Culture=neutral, 
      PublicKeyToken=31bf3856ad364e35" />
  </handlers>
</system.webServer> 
```

如果没有这些，您的 Web 服务代理将无法正常工作。
您可以使用[fiddler](http://www.fiddler2.com/fiddler2/)检查请求并验证它是否有效。

# php - 需要帮助对 php 数组进行分组以使其更好

> ID：14743081
> 
> 赞同：0
> 
> 时间：2013-02-07T03:35:58.627
> 
> 标签：php, arrays, multidimensional-array

首先，我的分组正在工作，但我觉得它很脏。需要有人让它看起来更干净更好。我有以下 foreach

```
$data['new_array'] = array();  //I have to use $data['new_array'] because I need to pass it to template.
foreach ($get_topics as $topic) {
    //Is that possible to make these 4 lines shorter?
    $data['new_array'][$topic['tid']]['tid'] = $topic['tid'];   
    $data['new_array'][$topic['tid']]['title'] = $topic['title'];
    $data['new_array'][$topic['tid']]['yes'] = $topic['yes'];
    $data['new_array'][$topic['tid']]['no'] = $topic['no'];

    //The belows are subarray grouping, it actually works but I need better solutions
    //$new_array[$topic['tid']]['vid'][$topic['vid']][] = $topic['vid'];
    //$new_array[$topic['tid']]['vid'][$topic['vid']][] = $topic['yesno'];
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T10:48:44.223

我什至不会试图让它更短，但这是你的代码在一个好看的版本中。

```
$data['new_array'] = array();

foreach ($get_topics as $topic) {
    $data['new_array'][$topic['tid']] = array(
        'tid' => $topic['tid'],
        'title' => $topic['title'],
        'yes' => $topic['yes'],
        'no' => $topic['no']
    );
} 
```

不确定 $topic['tid'] 是什么类型，但在使用非连续数字作为数组键时应该小心。

# java - 从 Java DOM 中的 XML 获取元素名称

> ID：14743088
> 
> 赞同：18
> 
> 时间：2013-02-07T03:36:33.157
> 
> 标签：java, xml, dom

我想获取元素名称并打印 XML 中的数据，但不确定如何获取特定元素下的数据。

这是 XML 示例和我的代码。

```
 <mdb>
    <movies>
    <movie id="godfather">
      <title>The Godfather</title>
      <year>1972</year>
      <directors>
        <director idref="francisfordcoppola"/>
      </directors>
      <genres>
        <genre>Crime</genre>
        <genre>Drama</genre>
      </genres>
       <cast>
        <performer>
          <actor idref="marlonbrando"/>
          <role>Don Vito Corleone</role>
        </performer>
     </cast>
    </movie>
    </movies>

    <performer id="kimnovak">
      <name>Marilyn Pauline Novak</name>
      <dob>1933-02-13</dob>
      <pob>Chicago, Illinois, USA</pob>
      <actedin>
        <movie idref="vertigo"/>
      </actedin>
    </performer>
    </mdb>

try {
        File fXmlFile = new File(filename);
        DocumentBuilderFactory dbFactory = DocumentBuilderFactory.newInstance();
        DocumentBuilder dBuilder = dbFactory.newDocumentBuilder();
        Document doc = dBuilder.parse(fXmlFile);

        NodeList nodes = doc.getElementsByTagName("movie");
         System.out.println("nodes length"+ nodes.getLength());
        for (int i = 0; i < nodes.getLength(); i++){
            Element element = (Element) nodes.item(i);
            NodeList name = element.getElementsByTagName("title");
            Element line = (Element) name.item(0);
            System.out.println(": " + line.getFirstChild().getTextContent()); 
```

我只想获取电影中的元素。但是下面的代码也读取了 `<movie idref="vertigo"/>`执行者的内部（如果我想获取内容会导致 Nullpointer 异常）；我想知道是否有任何可能的方法来避免通过使用 DOM 来阅读性能下的内容？

```
NodeList nodes = doc.getElementsByTagName("movie"); 
```

我第一部电影的最终输出应该是这样的

```
('godfather', 'The Godfather', '1972', 'Crime;Drama') 
```

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-02-08T06:59:32.223

一种方法是从电影标签而不是电影标签开始读取。不知道这是否是你要找的！

```
NodeList nodes = doc.getElementsByTagName("movies");

Element element = (Element) nodes.item(0);
NodeList movieList = element.getElementsByTagName("movie");
for (int i = 0; i < movieList.getLength(); i++) {
    Element movieElement = (Element) movieList.item(i);
    System.out.println(movieElement.getAttributes().getNamedItem("id").getNodeValue());
    NodeList name = movieElement.getElementsByTagName("title");
    NodeList year = movieElement.getElementsByTagName("year");
    NodeList genres = movieElement.getElementsByTagName("genres");
    Element genreline = (Element) genres.item(0);

    System.out.println(name.item(0).getFirstChild().getTextContent());
    System.out.println(year.item(0).getFirstChild().getTextContent());
    System.out.println(genreline.getElementsByTagName("genre").item(0).getTextContent() 
               + ":" + genreline.getElementsByTagName("genre").item(1).getTextContent());
} 
```

输出 ：

> : 教父
> : 教父
> : 1972
> : 犯罪：戏剧

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-07T03:38:09.303

我建议您阅读[XPath](http://www.ibm.com/developerworks/library/x-javaxpathapi/index.html)。这里有几个[例子](http://www.w3schools.com/xml/xpath_examples.asp)。

例如，要读取电影的年份，您可以使用 XPath...

```
/mdb/movies/movie/year/text() 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2019-01-17T03:32:00.137

我有同样的问题，这是我的实现，

```
public String getTagValue(org.w3c.dom.Document xmlDoc, String tagName) throws Exception {
        xmlDoc.getDocumentElement().normalize();

        NodeList nodeList = xmlDoc.getElementsByTagName(tagName);

        for (int temp = 0; temp < nodeList.getLength(); temp++) {
            Node nNode = nodeList.item(temp);
            if (nNode.getNodeType() == Node.ELEMENT_NODE) {
                org.w3c.dom.Element eElement = (org.w3c.dom.Element) nNode;
                return eElement.getFirstChild().getNodeValue();
            }
        }
        return "-1";
    } 
```

# matlab - 如何将 FOR 循环中的所有迭代结果输出到矩阵中并绘制图形

> ID：14743091
> 
> 赞同：2
> 
> 时间：2013-02-07T03:36:50.407
> 
> 标签：matlab

我有两个`for`嵌套格式的循环。我的第二个循环计算最终方程。结果的显示在第二个循环之外，以便在第二个循环完成时显示。

下面是我在 MATLAB 中使用的逻辑。我需要绘制`eqn2`vs x 的图表。

```
L=100
for x=1:10
    eqn1
       for y=1:L
          eqn2
       end 
       value = num2strn eqn2
       disp value
end 
```

目前我面临的问题是值或输出`eqn2`总是在每个周期后被替换，直到`x`达到 10。因此，`eqn2`和值的工作区表只显示最后一个值。我的目的是记录`value`从 1:10 开始的 x 的每个周期中的所有输出值。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T05:14:07.517

你的伪代码对我来说有点太强烈了——我试图重构你想要做的事情。如果我理解正确，这应该可以解决您的问题（将计算的中间结果存储在数组 Z 中）：

```
L=100
z = zeros(L,10);
for x=1:10
   % perform some calculations
   eqn1
   for y=1:L
   % perform some more calculations; it is not clear whether the result of 
   % this loop over y=1:L yields one value, or L. I am going to assume L values
       z(y, x) = eqn2(x, y)
   end 

   value =num2strn eqn2

   disp value
end

% now you have the value of each evaluation of the innermost loop available. You can plot it as follows:

figure; 
plot( x, z); % multiple plots with a common x parameter; may need to use Z' (transpose)...
title 'this is my plot'; 
xlabel 'this is the x axis'; 
ylabel 'this is the y axis'; 
```

至于您在评论中提出的其他问题，您可能会从以下内容中找到灵感：

```
L = 100;
nx = 20; ny = 99;  % I am choosing how many x and y values to test
Z = zeros(ny, nx); % allocate space for the results
x = linspace(0, 10, nx); % x and y don't need to be integers
y = linspace(1, L, ny);
myFlag = 0;              % flag can be used for breaking out of both loops

for xi = 1:nx            % xi and yi are integers
    for yi = 1:ny
         % evaluate "some function" of x(xi) and y(yi)
         % note that these are not constrained to be integers
         Z(yi, xi) = (x(xi)-4).^2 + 3*(y(yi)-5).^2+2;

         % the break condition you were asking for
         if Z(yi, xi) < 5
             fprintf(1, 'Z less than 5 with x=%.1f and y=%.1f\n', x(xi), y(yi));
             myFlag = 1; % set flag so we break out of both loops
             break
         end
    end
    if myFlag==1, break; end % break out of the outer loop as well
end 
```

这可能不是您的想法 - 我无法理解“运行循环直到 z(y,x) <5 的所有值，然后它应该输出 x”。如果你运行外循环完成（这是你知道“z（y，x）的所有值”的唯一方法，那么你的 x 值将是它的最后一个值......这就是我建议运行的原因x 和 y 的所有值，收集整个矩阵 Z，然后检查 Z 以获得您想要的东西。

例如，如果您想知道是否存在所有 Z < 5 的 X 值，您可以这样做（如果您没有跳出`for`循环）：

```
highestZ = max(Z, [], 1); % "take the highest value of Z in the 1 dimension
fprintf(1, 'Z is always < 5 for x = %d\n', x(highestZ<5)); 
```

等等

如果你不能从这里弄清楚，我放弃......

# android - findViewById 在带有 setRetainInstance(true) 的 Fragment 上返回 null

> ID：14743096
> 
> 赞同：0
> 
> 时间：2013-02-07T03:37:10.340
> 
> 标签：android, android-fragments

我正在尝试创建响应更快的布局，因此我选择在我的片段上使用 setRetainInstance 以防止在设备旋转时重新请求我的 web 服务。问题是，当我尝试从片段中获取对片段活动中的 TextView 的引用时，findViewById 始终返回 null。

```
this.getActivity().findViewById(R.id.textView_currentAddress) 
```

怎么了？

# arrays - 取消引用 postgres 二维数组

> ID：14743097
> 
> 赞同：2
> 
> 时间：2013-02-07T03:37:22.073
> 
> 标签：arrays, postgresql

所以我注意到当你取消引用只有一维的二维数组时，postgres (9.0) 不喜欢它。这是一个有趣的例子

```
WITH my_table(arr) AS ( VALUES (ARRAY[[10,11],[20,21]]) )
SELECT arr[2][1] AS good, arr[1] AS bad FROM my_table;

 good | bad
------+-----
   20 |
(1 row) 
```

如您所见`null`，当您不指定第二个维度时，它会返回。理想情况下，我希望它返回内部数组`{10,11}`。所以为了解决这个问题，我写了这个函数

```
CREATE OR REPLACE FUNCTION deref_2d(orig_arr numeric[][], inner_arr int)
RETURNS numeric[] AS $$
DECLARE
  index int;
  len int;
  return_arr numeric[];
BEGIN
  len := array_upper(orig_arr,2);
  FOR index IN 1 .. len LOOP
    return_arr[index] := orig_arr[inner_arr][index];
  END LOOP;
  RETURN return_arr;
END
$$ LANGUAGE plpgsql; 
```

现在我可以写：

```
WITH my_table(arr) AS ( VALUES (ARRAY[[10,11],[20,21]]) )
SELECT deref_2d(arr,1) FROM my_table;
 deref_2d
----------
 {10,11} 
```

但是关于这方面的很多事情让我对我的解决方案感到不安。有一个更好的方法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-07T04:07:10.107

在你注销之前考虑一下这部西部片的完整演员阵容：

```
WITH tbl(arr) AS (SELECT (ARRAY[[10,11],[20,21]]))
SELECT arr[2][1]    AS the_good
      ,arr[1]       AS the_bad
      ,arr[1:1]     AS the_ugly   -- first slice of 2D-array
      ,arr[1][1:2]  AS the_ugly_twin -- 2D-array with elements 1 & 2 of 1st slice
      ,ARRAY((SELECT unnest(arr[1:1]))) AS the_righteous -- 1D-array of 1st slice
FROM   tbl; 
```

[**-> sqlfiddle**](http://sqlfiddle.com/#!12/1beb2/5)有更多的例子。

[此处](http://www.postgresql.org/docs/current/interactive/arrays.html)和[此处](http://www.postgresql.org/docs/current/interactive/sql-expressions.html#SQL-SYNTAX-ARRAY-CONSTRUCTORS)的手册中的一些背景。

# sql-server - 带有 VS 2012 和 SQL Server 2012 的 Windows 8 上的 msnodesql

> ID：14743101
> 
> 赞同：1
> 
> 时间：2013-02-07T03:37:26.940
> 
> 标签：sql-server, node.js, windows-8

我有一个在 Windows 7 上运行的小型 node.js 应用程序，它成功地从 SQL Server 2008 数据库中检索数据。

我最近买了一台新电脑并安装了 Windows 8，带有 VS 2012 和 SQL Server 2012。我安装了最新版本的节点。我去安装节点 sql 驱动程序，发现在[http://www.microsoft.com/en-us/download/details.aspx?id=29995有一个安装程序](http://www.microsoft.com/en-us/download/details.aspx?id=29995)

我下载了最新版本（0.2.1-v0.8）并运行了这个安装程序。我运行该应用程序，但它没有连接也没有给我一个错误。

我尝试按照 github 上推荐的“老式”方式进行安装：[https](https://github.com/WindowsAzure/node-sqlserver) ://github.com/WindowsAzure/node-sqlserver这似乎也不起作用。（这意味着我必须安装 VS 2010 和 Python。）

Windows 8（64 位）是否支持此 sql 驱动程序？

如果有人有任何建议，我愿意尝试任何事情。

**更新：** 我在一个新的节点项目中尝试了这个，我从头开始，按照说明从 npm 安装 msnodesql 驱动程序后，我让它工作了。

我认为在构建驱动程序的最初步骤中，一定出了问题。以下是我使用 SQL Server 从 Windows 8 上的 SQL db 检索数据所遵循的步骤：

1.  npm 安装 msnodesql
2.  转到项目的 .\node_modules\msnodesql 目录
3.  节点gyp配置
4.  节点 gyp 构建
5.  然后将msnodesql目录下build\Release目录下的sqlserver.node文件复制到lib目录下
6.  正常使用模块

当然......这就是 git 页面上的说明......也许我从不同的目录运行构建......或者只是做了一些愚蠢的事情......但是 Windows 8 可以毫无问题地运行 msnodesql。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-17T09:31:09.523

安装节点 0.6.20

在 Azure Powershell 中：

```
..node>New-AzureServiceProject AzureNode
..node\AzureNode>Add-AzureNodeWorkerRole NodeServer
..node\AzureNode>npm install express -g
..node\AzureNode\Webrole1>npm install node-gyp 
..node\AzureNode\Webrole1>express
..node\AzureNode\Webrole1>Y
..node\AzureNode\Webrole1>del server.js
..node\AzureNode\Webrole1>ren app.js server.js 
```

从这里下载 msnodesql-0.2.1-v0.6-ia32.msi：[MSNodeSQL v0.6](http://www.microsoft.com/en-ie/download/details.aspx?id=29995)到

```
..node\AzureNode\Webrole1\node-modules\ 
```

运行 msi 并在之后将其删除

```
..node\AzureNode\Webrole1\node-modules\msnodesql>node-gyp configure

..node\AzureNode\Webrole1>npm install 
```

用您的代码替换 server.js（当前已损坏）

```
..node\AzureNode\Webrole1>node server.js 
```

请享用！

# mercurial - 如何将 Smartgit 链接到 BitBucket

> ID：14743104
> 
> 赞同：2
> 
> 时间：2013-02-07T03:37:47.027
> 
> 标签：mercurial, bitbucket, smartgit

我正在尝试将 SmartGit/Hg 客户端连接到我的 BitBucket 帐户。所有的在线搜索似乎都获取了 GitHub 结果。

任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-07T22:03:56.247

刚刚注意到我们可以连接到 BitBucket 并从 Clone 对话框中从我们的存储库中进行选择。感谢懒惰獾的指针。

![在此处输入图像描述](../Images/36c4558c72a5b20c18b1f42ad2023053.png) ![在此处输入图像描述](../Images/e956b9d9ebb96538bea8272966b5d40c.png) ![在此处输入图像描述](../Images/1dc30000b3308e98ec2f4969618fec34.png)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-07T04:13:15.557

最新的 SmartGit/HG4（4.0.1 测试）在支持的提供者列表中有 BitBucket

![在此处输入图像描述](../Images/58f1c679587d065f10a1bde54b2e592f.png)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-07T03:43:23.977

如果您通过命令行从[bitbucket](http://bitbucket.org)克隆并将项目添加到 SmartGit，您应该是[黄金](http://tech.leolink.net/2012/11/how-to-install-and-config-smartgit-git.html)。

# asp.net - 来自 IIS 的限制响应

> ID：14743109
> 
> 赞同：0
> 
> 时间：2013-02-07T03:38:30.200
> 
> 标签：asp.net, iis-7

假设我的网站上有一个 URL `http://foo.com/RobotTrap`，. 这不是一个真实的页面，但机器人出于某种原因一直试图抓取它。

我怎样才能使 IIS 限制对这一请求的响应？假设我想返回字符串`"Silly robot, there is nothing here for you 10110110"`，每 5 秒返回一个字节。

我也想在不占用 asp.net 工作线程的情况下做到这一点。这甚至可能吗？

# matlab - 在matlab中有效地叠加多个图像

> ID：14743111
> 
> 赞同：1
> 
> 时间：2013-02-07T03:38:45.267
> 
> 标签：matlab, image-processing, graphics

我正在尝试在单个 matlab 图形中绘制多个图像以创建全景图。我的代码有效，但它只是`image(im, x, y)`在 for 循环中使用来覆盖图像。

因为我有这么多的图像，这导致 matlab 不得不进行大量的 alpha 混合，并且在短时间内，绘图会变慢。

我需要一种方法将迄今为止绘制的图像展平为单个图像，以便有效地将图形作为背景。

有什么建议么？

**编辑** 或者，有没有办法使用 image(im, x, y) 或类似的东西在背景中绘制到矩阵缓冲区，然后将单个缓冲区绘制到图形？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-23T21:34:32.710

查看博客文章：[使用 MATLAB 混合图像](http://imageprocessingblog.com/blend-images-with-matlab/)，带有很好的示例（包括多个图像叠加）和 MATLAB 代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T05:45:00.933

您可以创建一个由所有图像合成的单个图像（特别是因为它看起来没有透明度）。然后 Matlab 将一次只渲染一个图像，而不是计算多个图像。您必须预先定义您的边界，以防您需要剪辑。之后，您只需用新像素替换像素（在内存中，而不是在磁盘上）。这是否可能取决于您正在绘制什么样的图片。如果这很难，那么 Ben 的方法的变体将起作用 - 使用该 `getframe`函数（请参阅[此链接](http://www.mathworks.com/help/matlab/ref/getframe.html)）。它会拍摄您的人物快照，然后您可以将其绘制回屏幕。虽然它通常用于制作电影，但在这种情况下它没有理由不起作用......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-07T03:42:57.723

我不确定这是否会帮助您提高速度，但在您完成该过程后可能会有所帮助。

您可以使用

```
saveas(figureHandle, 'filename', 'filetype') 
```

将图形保存到图片文件。然后，您可以像以前一样使用关闭当前图形`close all`并重新应用新图片，只是现在它将是单个图像。

每隔几张图片就这样做，它可能会加快你的程序。它肯定会加快您查看图片的速度。

# excel - Excel：比较两列之间的字符串，如果匹配，修剪/删除匹配的字符串

> ID：14743116
> 
> 赞同：0
> 
> 时间：2013-02-07T03:39:25.097
> 
> 标签：excel

我不擅长高级 Excel 公式，需要帮助在 excel 中清理数据以进行迁移。这是我的场景：

```
Column A                                             Column B 

DocName                                              EmployeeName 
ACCT6789_John_Smith_ACCOUNT_DOC_25_JAN_2007          John_Smith
ACCT1122_Jane_Doe_ACCOUNT_DOC_EID00022_21_DEC_2009   Jane_Doe
ACCT1462_Phil_Morris_ACCOUNT_DOC_EID0252             Phil_Moris 
```

我需要 ColumnA 的字符串来找到与 ColumnB 的完全匹配。如果匹配，则从 ColumnA 中删除匹配的字符串。如果没有完全匹配，则不会有任何操作，脚本将继续检查下一行。我知道双下划线会有问题，我希望任何两个单词之间只有一个下划线。

例如上面的期望结果将是：

```
ACCT6789_ACCOUNT_DOC_25_JAN_2007              John_Smith 
ACCT1122_ACCOUNT_DOC_EID00022_21_DEC_2009     Jane_Doe
ACCT1462_Phil_Morris_ACCOUNT_DOC_EID0252      Phil_Moris 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T03:58:24.900

仅使用电子表格中的公式，您可以执行以下操作：

假设 C 列可用（如果不可用，则找到一个空列）。在第 1 行中输入此公式（如果第 1 行中有标题，请在第一个可用行中输入并调整`1`行号）：

```
=FIND(B1, A1) 
```

这将发现`B1`("John Doe") 在`A1` `("ACCT6789_John_Smith_ACCOUNT_DOC_25_JAN_2007")`

在下一列中，您键入

```
=LEFT(A1, C1-1) & RIGHT(A1, LEN(a1) - C1 - LEN(B1)) 
```

这需要“我们找到的字符串之前的 A1 位”加上“我们找到的东西之后的位”。

现在一直复制这个公式（选择C1和D1，然后双击右下角的小框是一直向下拖动的快捷方式......）。D 列现在有您想要的结果。

最后，要将它们复制回 A 列，选择所有 D 列，点击复制，然后在 A 列中粘贴特殊值。最后，删除 C 列和 D 列。

顺便说一句 - 此方法假定您找到的名称的两侧都有下划线，并且实际上会删除尾随的下划线。如果您不能确定，您应该将 D 列中的公式更改为

```
=LEFT(A1, C1-1) & RIGHT(A1, LEN(a1) - C1 - LEN(B1) + 1) 
```

然后再做一轮以删除双下划线并用单下划线替换它们......不过，在我看来你不需要那个。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-11-24T12:13:54.587

虽然这个线程很旧，但我从另一个线程中获取了一些代码并尝试过，看起来解决方案给出了近似匹配。在这里，我试图将 sheet1 的一列与 sheet2 的一列匹配：

1.  在excel中添加命令按钮
2.  输入以下代码并单击/运行按钮和函数为您提供选定列的结果

```
 Private Sub CommandButton21_Click()
     Dim ws As Worksheet
     Dim LRow As Long, i As Long, lval As String

   '~~> Change this to the relevant worsheet
    Set ws = ThisWorkbook.Sheets("Sheet1")

With ws
    '~~> Find Last Row in Col G which has data
    LRow = .Range("D" & .Rows.Count).End(xlUp).Row

    If LRow = 1 Then
        MsgBox "No data in column D"
    Else
        For i = 2 To LRow

             lval = "D"
            .Range("G" & i).Value = FuzzyFind(lval & i, .Range("PWC"))
        Next i
    End If
    End With

    End Sub

    Function FuzzyFind(lookup_value As String, tbl_array As Range) As String
    Dim i As Integer, str As String, Value As String
    Dim a As Integer, b As Integer, cell As Variant

    For Each cell In tbl_array
     str = cell
     For i = 1 To Len(lookup_value)
      If InStr(cell, Mid(lookup_value, i, 1)) > 0 Then
     a = a + 1
     cell = Mid(cell, 1, InStr(cell, Mid(lookup_value, i, 1)) - 1) & Mid   (cell, InStr(cell, Mid(lookup_value, i, 1)) + 1, 9999)
    End If
     Next i
     a = a - Len(cell)
     If a > b Then
       b = a
       Value = str
    End If
       a = 0
    Next cell
      If Value <> "" Then
         FuzzyFind = Value
      Else
         FuzzyFind = "None"
      End If
End Function 
```

# jquery - 如何让用户在 HTML5 网络表单中输入持续时间而不打扰他们？

> ID：14743118
> 
> 赞同：15
> 
> 时间：2013-02-07T03:40:06.390
> 
> 标签：jquery, jquery-ui, css, user-experience

我的用户需要输入以天、小时和分钟为单位的持续时间。

现在我刚刚将它实现为三个字段，这很好并且可以工作，但这并不是一个很好的设计。另一种方法是只有 1 个字段并让他们输入`2 days, 3 hours, 45 minutes`or `15 m`、 or `1d 2h 35m`、`90m`or`2 days`等​​。这似乎需要一些非平凡的解析才能真正正确，并且国际化很复杂。

允许用户简单地输入时间长度的 Web UI 组件有哪些“最佳实践”示例？

请注意，这不是一个`DatePicker`，而是一个持续时间输入组件。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-10T06:35:49.450

在考虑了这里的反馈之后，我决定实现一个具有简洁输入样式和一些智能解析的表单字段。有关最终结果，请参见[http://jsfiddle.net/davesag/qgCrk/6/](http://jsfiddle.net/davesag/qgCrk/6/)。当然欢迎改进。

```
function to_seconds(dd,hh,mm) {
  d = parseInt(dd);
  h = parseInt(hh);
  m = parseInt(mm);
  if (isNaN(d)) d = 0;
  if (isNaN(h)) h = 0;
  if (isNaN(m)) m = 0;

  t = d * 24 * 60 * 60 +
      h * 60 * 60 +
      m * 60;
  return t;
}

// expects 1d 11h 11m, or 1d 11h,
// or 11h 11m, or 11h, or 11m, or 1d
// returns a number of seconds.
function parseDuration(sDuration) {
  if (sDuration == null || sDuration === '') return 0;
  mrx = new RegExp(/([0-9][0-9]?)[ ]?m/);
  hrx = new RegExp(/([0-9][0-9]?)[ ]?h/);
  drx = new RegExp(/([0-9])[ ]?d/);
  days = 0;
  hours = 0;
  minutes = 0;
  if (mrx.test(sDuration)) {
    minutes = mrx.exec(sDuration)[1];
  }
  if (hrx.test(sDuration)) {
    hours = hrx.exec(sDuration)[1];
  }
  if (drx.test(sDuration)) {
    days = drx.exec(sDuration)[1];
  }

  return to_seconds(days, hours, minutes);
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-07T04:18:33.450

需要考虑的事项：

*   您期望的可能输入范围有多广？例如，是否有可能一个用户输入“10 天”而另一个用户输入“2 分钟”？

*   你想要效率还是第一次直观的行为？一些应用程序不是直接直观的，但经过培训可以比“更容易”的应用程序更有效地使用。

*   您的用户更喜欢键盘还是鼠标，他们的熟练程度如何？数据输入专业人士将有与“双指打字员”不同的需求/需求。

当然，没有一个正确的解决方案。几个选项：

*   请记住许多浏览器中提供的新 (HTML 5) 输入 type="range" 和 input type="number"。Range 经常显示为一个滑块（尽管它的名字，它不一定用于输入一个范围）；number 显示为带有可指定增量的数字向上/向下。这可以简化数据输入。

*   如果您期望输入范围广泛，则 3 个下拉列表（一个代表天、小时、分钟）可能是最简单的选择。这还具有完整的浏览器支持，不依赖任何 JavaScript，在主要移动设备上可预测等。

*   如果您有常见的持续时间（例如 90 分钟、2 小时、4 小时），您可能会显示一个带有指定持续时间的下拉列表和一个“高级”按钮，该按钮允许对特殊情况进行更精细的规范。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-07T13:52:15.920

想想人们已经知道的日期和/或时间选择。行为模式已经为您设置好了。你只需要遵循它。想想在移动设备上正在做什么。从那里您可以利用该模式。

看看： http: [//mobiscroll.com/](http://mobiscroll.com/)
它有很多功能，并且经过一些小的调整，看起来你可以让它做你需要的事情。

从 UX 的角度来看，使用类似的东西也会让你的应用对用户来说更熟悉，因为这是他们已经理解的常见模式。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-07T03:43:53.147

你考虑过[**jQuery Datepicker**](http://jqueryui.com/datepicker/)吗？

如果您不想直接选择日期，可以在上下文中调整它以获得时间长度。

# asp.net-web-api - OData“序列包含多个元素”错误

> ID：14743125
> 
> 赞同：0
> 
> 时间：2013-02-07T03:41:12.160
> 
> 标签：asp.net-web-api, odata

> 序列在 System.Web.Http.OData.Builder.ODataConventionModelBuilder.RemoveBaseTypeProperties(EntityTypeConfiguration derivedEntity, EntityTypeConfiguration baseEntity) 在 System.Web.Http 的 System.Linq.Enumerable.SingleOrDefault[TSource](IEnumerable`1 source) 包含多个元素.OData.Builder.ODataConventionModelBuilder.DiscoverInheritanceRelationships()...

这是我的绑定代码：

```
var modelBuilder = new ODataConventionModelBuilder();
modelBuilder.EntitySet<PeopleDto>("People"); 
```

这是我的控制器代码：

```
[Queryable]
public IEnumerable<PeopleDto> Get(
        [FromUri] Credentials credentials, 
        ODataQueryOptions<PeopleDto> options, 
        int departmentId,
        DetailLevel detail = DetailLevel.Low)
{
    var count = _repository.Filter(x => x.DepartmentId == departmentId && x.Active);
    options.ApplyTo(count);
    int total = count.Count();

    switch (detail)
    {
        case DetailLevel.Low:
            return new Paginable<PeopleDto>(GetMyPeopleLo(departmentId, options), total);
        // [...]
    }
} 
```

`Paginable<T>`实现`IEnumerable<T>`。并且`GetMyPeopleLo()`（不是真实姓名）方法将选项应用于附加查询。（我不再需要额外的查询，因为我已经移动了分页代码的位置，但我还没有重构那部分）。

这是 oData 的预发布版本存在问题的情况之一吗？

*更新：*如果我注释出该`Queryable`属性，它似乎有效，但是在将选项应用于`count`查询时，我将无法实际应用在QueryString中指定的任何过滤器。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-07T14:54:01.100

有几件事在这里跳出来：

*   您不应该使用 [Queryable] 和 ODataQueryOptions。它们用于做同样的事情。在这种情况下，ODataQueryOptions 似乎更合适，因此您应该删除 [Queryable]。
*   您没有使用查询结果。而不是这个

    ```
    var count = _repository.Filter(x => x.DepartmentId == departmentId && x.Active);
    options.ApplyTo(count);
    int total = count.Count(); 
    ```

    你应该这样写：

    ```
    var count = _repository.Filter(x => x.DepartmentId == departmentId && x.Active);
    var queryResults = options.ApplyTo(count) as IQueryable<PeopleDto>;
    int total = queryResults.Count(); 
    ```

    这样，您的总数将考虑 OData 查询选项。

*   考虑使用`PageResult<T>`而不是 Paginable，因为 OData 格式化程序将进行计数并将其正确插入 OData 提要。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-01-20T12:19:41.793

我在以下两种情况下看到了这个错误。

1.  影子实体成员 - 派生自影子实体而不是覆盖实体的类中的成员（请参阅[差异讨论](http://msdn.microsoft.com/en-us/library/ms172785.aspx)）。切换到覆盖解决了这里的问题。请注意，我可以通过在 Visual Studio 生成的警告中进行搜索来找到这些。
2.  [BitmapImage](http://msdn.microsoft.com/en-us/library/system.windows.media.imaging.bitmapimage%28v=vs.110%29.aspx)类型的实体 Partial 类中的属性 - 将属性的类型更改为[BitmapSource](http://msdn.microsoft.com/en-us/library/system.windows.media.imaging.bitmapsource(v=vs.110).aspx)（BitmapImage 的直接继承父级）是此处的修复。

# python - python - 将二进制数据转换为 utf-8

> ID：14743127
> 
> 赞同：4
> 
> 时间：2013-02-07T03:41:20.507
> 
> 标签：python, utf-8

```
_f = open("c:/go-next.png", "rb")
data = _f.read()
_f.close()
data.encode("utf-8")

# Error: UnicodeDecodeError: file <maya console> line 1: ascii # 
```

如您所见，我打开一个图像文件，数据是类型。但我必须将其转换为 utf-8。也许二进制数据有一些额外的字符（或没有），它与转换冲突。有什么办法可以解决吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-07T04:06:38.067

您始终可以将 a 映射`str`到`unicode`使用`latin-1`编解码器。一旦你有了一个`unicode`，你总是可以将它编码为`utf-8`：

```
data.decode('latin-1').encode("utf-8") 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-07T03:43:19.847

文本编码仅适用于文本。不要尝试在二进制数据上使用它们。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-07T04:17:26.283

您想要完成的工作可能可以通过 base64 编码来实现。

```
 import base64
 encoded = base64.b64encode(image_binary_data) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-07T04:19:13.533

编码意味着将字符串转换为可存储的字节。
解码意味着将字节转换为可读的字符串。

您的`data`代码中的 已经编码。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-07-27T12:18:11.603

图像无法转换为 utf8 中的章程之类的内容。

# ruby-on-rails - cancan授权规则

> ID：14743132
> 
> 赞同：0
> 
> 时间：2013-02-07T03:41:37.047
> 
> 标签：ruby-on-rails, authorization, cancan

我有一个 cancan 授权问题。

我的场景是这样的。

```
User has_one Student 
```

在 StudentsController 我有这样的用户和学生

```
@user = User.where(:username => params[:username]).first
@student = @user.student 
```

现在我如何编写cancan授权规则来编辑/更新**@student记录**，以便**登录用户只能编辑他的学生记录**，前提是**@user**可能是也可能不是登录用户。它只是具有用户名表单参数的用户。

我希望问题很清楚:)

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T03:57:53.407

查看 CanCan 的 wiki：

[https://github.com/ryanb/cancan/wiki/Defining-Abilities](https://github.com/ryanb/cancan/wiki/Defining-Abilities)

您应该能够通过执行以下操作在能力模型中定义该能力：

```
can :edit, Student, :user_id => user.id 
```

# symfony - 安全性：密码检查删除和自定义用户提供程序

> ID：14743135
> 
> 赞同：3
> 
> 时间：2013-02-07T03:42:11.117
> 
> 标签：symfony

我正在创建 Symfony2（版本 2.0.16）`custom User Provider`来使用我们的 LDAP 服务器，但是根据[如何创建自定义用户提供程序](http://symfony.com/doc/2.0/cookbook/security/custom_provider.html)文档，密码检查是在 Symfony2 端完成的：

> 当用户提交用户名和密码时，身份验证层要求配置的用户提供程序返回给定用户名的用户对象。Symfony 然后检查此用户的密码是否正确并生成一个安全令牌，以便用户在当前会话期间保持身份验证。

首先，我不喜欢将用户密码传回 Symfony 的想法。其次，我们已经有 LDAP Web 服务，它会检查密码是否匹配，如果更改密码会出现问题。

**问题：**如何从 Symfony 中删除密码检查并让它依赖返回布尔`IsAuth`标志的 LDAP Web 服务？

这就是我现在查询 LDAP Web 服务的方式：

```
// The output has IsAuth flag
$this->get('LDAP_user_provider')
  ->searchMember($request->get('username'), $request->get('password')); 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-07T05:21:02.597

好的，这不是微不足道的，但我会尽力为您提供尽可能多的信息。Symfony 2.0 需要做一些小改动，我的解决方案是 2.1。我希望没有复制/粘贴问题，也没有拼写错误或缺少配置。首先，您需要创建一个`AuthenticationProvider`，例如：

```
<?php

namespace Acme\DemoBundle\Security\Authentication\Provider;

use Symfony\Component\Security\Core\Authentication\Provider\AuthenticationProviderInterface;
use Symfony\Component\Security\Core\User\UserProviderInterface;
use Symfony\Component\Security\Core\Exception\AuthenticationException;
use Symfony\Component\Security\Core\Authentication\Token\TokenInterface;
use Symfony\Component\Security\Core\Encoder\EncoderFactory;

use Beryllium\CacheBundle\Cache;

use Acme\DemoBundle\Security\Authentication\Token\RestToken;

/**
 * The Provider is the component of the authentication system that authenticates tokens.
 */
class LdapProvider implements AuthenticationProviderInterface
{
    private $userProvider;
    private $encoderFactory;

    /**
     * Constructor
     * @param UserProviderInterface $userProvider
     * @param String                $cacheDir
     * @param EncoderFactory        $encoderFactory
     */
    public function __construct(UserProviderInterface $userProvider, EncoderFactory $encoderFactory)
    {
        $this->userProvider   = $userProvider;
        $this->encoderFactory = $encoderFactory; // usually this is responsible for validating passwords
    }

    /**
     * This function authenticates a passed in token.
     * @param  TokenInterface          $token
     * @return TokenInterface
     * @throws AuthenticationException if wrong password or no username
     */
    public function authenticate(TokenInterface $token)
    {
        if (!empty($token->username)) {
            $user    = $this->userProvider->loadUserByUsername($token->username);
            $encoder = $this->encoderFactory->getEncoder($user);

            if ($token->needsAuthentication && !$token->isLdapAuthenticated()) {
                throw new AuthenticationException('Password wrong');
            }
        } else {
            throw new AuthenticationException('No user');
        }

        $token->setUser($user);
        $token->setAuthenticated(true);

        return $token;
    }

    /**
     * @inheritdoc
     * @param  TokenInterface $token
     * @return Boolean
     */
    public function supports(TokenInterface $token)
    {
        return $token instanceof RestToken;
    }
} 
```

注册服务（使用 XML）：

```
 <service id="ldap.security.authentication.provider"
      class="Acme\DemoBundle\Security\Authentication\Provider\LdapProvider" public="false">
        <argument /> <!-- User Provider -->
        <argument type="service" id="security.encoder_factory"/>
    </service> 
```

或者使用 YAML：

```
 ldap.security.authentication.provider:
       class: Acme\DemoBundle\Security\Authentication\Provider\LdapProvider
       public: false
       arguments:
           - ~
           - "@security.encoder_factory" 
```

创建安全工厂：

```
<?php

namespace Acme\DemoBundle\Security\Factory;

use Symfony\Component\DependencyInjection\ContainerBuilder;
use Symfony\Component\DependencyInjection\Reference;
use Symfony\Component\DependencyInjection\DefinitionDecorator;
use Symfony\Component\Config\Definition\Builder\NodeDefinition;
use Symfony\Bundle\SecurityBundle\DependencyInjection\Security\Factory\SecurityFactoryInterface;

class LdapFactory implements SecurityFactoryInterface
{
    public function create(ContainerBuilder $container, $id, $config, $userProvider, $defaultEntryPoint)
    {
        $providerId = 'security.authentication.provider.ldap.'.$id;
        $container
            ->setDefinition($providerId, new DefinitionDecorator('ldap.security.authentication.provider'))
            ->replaceArgument(0, new Reference($userProvider))
        ;

        $listenerId = 'security.authentication.listener.ldap.'.$id;
        $listener   = $container->setDefinition($listenerId, new DefinitionDecorator('ldap.security.authentication.listener'));

        return array($providerId, $listenerId, $defaultEntryPoint);
    }

    public function getPosition()
    {
        return 'pre_auth';
    }

    public function getKey()
    {
        return 'ldap';
    }

    public function addConfiguration(NodeDefinition $node)
    {}
} 
```

并将其注册到您的捆绑包中：

```
<?php

namespace Acme\DemoBundle;

use Symfony\Component\HttpKernel\Bundle\Bundle;
use Symfony\Component\DependencyInjection\ContainerBuilder;

use Acme\DemoBundle\Security\Factory\LdapFactory;

class AcmeDemoBundle extends Bundle
{
    public function build(ContainerBuilder $container)
    {
        parent::build($container);

        $extension = $container->getExtension('security');
        $extension->addSecurityListenerFactory(new LdapFactory());
    }
} 
```

并创建您自己的令牌：

```
namespace Acme\DemoBundle\Security\Authentication\Token;

use Symfony\Component\Security\Core\Authentication\Token\AbstractToken;

/**
 * This is a class that represents a security token that is used for logged in users.
 */
class LdapToken extends AbstractToken
{
    public $sessionId;
    public $username;
    public $password;
    public $member;
    public $needsAuthentication = true;

    public function __construct(array $roles = array())
    {
        parent::__construct($roles);
    }

    public function getCredentials()
    {
        return '';
    }

    public function getRoles()
    {
        if ($this->getUser()) {
            return $this->getUser()->getRoles();
        } else {
            return array();
        }
    }

    public function isLdapAuthenticated()
    {
         return true; // Left as an exercise
    }
} 
```

然后您需要在侦听器中创建该令牌，例如：

```
<?php

namespace Acme\ApiBundle\Security\Firewall;

use Symfony\Component\HttpFoundation\Request;
use Symfony\Component\HttpFoundation\Response;
use Symfony\Component\HttpFoundation\Cookie;

use Symfony\Component\HttpKernel\Event\FilterResponseEvent;
use Symfony\Component\HttpKernel\Event\GetResponseEvent;
use Symfony\Component\HttpKernel\KernelEvents;

use Symfony\Component\Security\Http\Firewall\ListenerInterface;
use Symfony\Component\Security\Http\Authentication\AuthenticationSuccessHandlerInterface;

use Symfony\Component\Security\Core\Exception\AuthenticationException;
use Symfony\Component\Security\Core\SecurityContextInterface;
use Symfony\Component\Security\Core\Authentication\AuthenticationManagerInterface;
use Symfony\Component\Security\Core\Authentication\Token\TokenInterface;

use Symfony\Component\EventDispatcher\EventDispatcher;

use Acme\DemoBundle\Security\Authentication\Token\LdapToken;

use Symfony\Component\HttpFoundation\Session\Attribute\AttributeBag;

/**
 * Class that will listen for log ins and then authorize the user.
 */
class LdapListener implements ListenerInterface
{
    /**
     * A security context
     * @var SecurityContextInterface
     */
    protected $securityContext;

    /**
     * A authentication manager that we will be able to authenticate against
     * @var AuthenticationManagerInterface
     */
    protected $authenticationManager;

    /**
     * Constructor
     *
     * @param SecurityContextInterface              $securityContext
     * @param AuthenticationManagerInterface        $authenticationManager
     */
    public function __construct(SecurityContextInterface $securityContext,
        AuthenticationManagerInterface $authenticationManager
    ) {
        $this->securityContext              = $securityContext;
        $this->authenticationManager        = $authenticationManager;
    }

    /**
     * This function is handling the authentication part.
     *
     * @param GetResponseEvent $event
     * @return
     */
    public function handle(GetResponseEvent $event)
    {
        $request = $event->getRequest();

        $token = new LdapToken();

        // now populate it with whatever information you need, username, password...

        try {
            $returnValue = $this->authenticationManager->authenticate($token);

            if ($returnValue instanceof TokenInterface) {
                if ($token->needsAuthentication) {
                    if ($event->hasResponse()) {
                        $response = $event->getResponse();
                    } else {
                        $response = new Response();
                        $event->setResponse($response);
                    }
                }

                return $this->securityContext->setToken($returnValue);
            } elseif ($returnValue instanceof Response) {
                return $event->setResponse($response);
            }
        } catch (AuthenticationException $e) {
            // Do nothing in this case. We are returning a 401 below
        }

        $response = new Response('UNAUTHORIZED');
        $response->setStatusCode(HTTPCodes::HTTP_UNAUTHORIZED);
        $event->setResponse($response);
    }
} 
```

并将其注册为服务（使用 XML）：

```
 <service id="ldap.security.authentication.listener"
      class="Acme\DemoBundle\Security\Firewall\RestListener" public="false">
        <argument type="service" id="security.context"/>
        <argument type="service" id="security.authentication.manager" />
    </service> 
```

或 YAML：

```
 ldap.security.authentication.listener:
        class: Acme\DemoBundle\Security\Firewall\RestListener
        public: false
        arguments: 
            - "@security.context"
            - "@security.authentication.manager" 
```

希望这能让你开始！

# android - 如何指定 ArrayAdapter 的哪个字符串用于 ListFragment？

> ID：14743136
> 
> 赞同：1
> 
> 时间：2013-02-07T03:42:10.993
> 
> 标签：android, android-arrayadapter, android-listfragment

我有一个简单的 ListFragment 来显示自定义对象的列表。

`MyListFragment extends ListFragment`

```
private ArrayList<CustomObject> mArrayOfCustomObject;
private ArrayAdapter<CustomObject> mAdapter;

mAdapter = new ArrayAdapter<CustomObject>(context,
    android.R.layout.simple_list_item1,
    mArrayOfCustomObject);
setListAdapter(mAdapter); 
```

问题是我得到了一个长长的列表，如下所示：

```
com.example.CustomObject@40XXXXXX
com.example.CustomObject@40XXXXXX
com.example.CustomObject@40XXXXXX
com.example.CustomObject@40XXXXXX
.... 
```

我这样做是因为我希望能够单击一个项目并显示有关它的更多信息。这就是为什么我将适配器链接到 a`List<CustomObject>`而不是`List<String>`.

**我知道 a`List<String>`会正确显示它，但是每个项目都只是一个随机字符串，与它的 CustomObject 没有任何联系。**

解决这个问题的最佳方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T03:44:13.430

除了创建您自己的自定义适配器之外，为了简单的修复，只需覆盖其中的`toString()`方法`CustomObject`并让它返回可读的内容。当您使用的适配器填充其行时，它会调用`toString()`您的 CustomObject 然后显示该结果。

假设您在`CustomObject`被调用中有一个字段`timePassed`

```
long timePassed = 100000l;
@Override
  public String toString()
  {
    return "Time passed: " + timePassed + " milliseconds";
  } 
```

# java - 扩展 JButton 时按钮不执行任何操作，但它使用返回 JButton 的方法执行此操作

> ID：14743138
> 
> 赞同：0
> 
> 时间：2013-02-07T03:42:18.377
> 
> 标签：java, swing, inheritance, constructor, jbutton

你好吗？，我有一个问题，我确信这真的很愚蠢，但我不知道它是什么。我正在尝试创建一个按钮，所以每次我想使用那个按钮来执行我想要的操作时，我所做的就是创建已经拥有该操作和 resourceBundle 的新按钮。

我的代码是这样的：

```
public class AcceptNewTaskButton extends JButton {

 private ActionManager actionManager;
 private JButton acceptNewTaskButton;

public AcceptNewTaskButton(JDialog dialog,JDateChooser dateChooser,JTextField      textField){

    super(ResourceBundle.getBundle("Language").getString("locale_button_accept"));
    actionManager = new ActionManager(dialog,dateChooser,textField);

    acceptNewTaskButton = new   JButton(actionManager.getNewTaskAction(dialog,dateChooser,textField));

}} 
```

这段代码没有做我想要的，因为当我编码时

```
okbutton = new AcceptNewTaskButton(dialog,datechooser,newTaskName); 
```

该按钮已创建，但它不执行任何操作。

但是，另一方面，当我编写此代码时

```
public class AcceptNewTaskButton extends JButton {

private ActionManager actionManager;
private JButton acceptNewTaskButton;

public JButton AcceptNewTaskButton(JDialog dialog,JDateChooser dateChooser,JTextField textField){

    actionManager = new ActionManager(dialog,dateChooser,textField);
    acceptNewTaskButton = new JButton(actionManager.getNewTaskAction());
    acceptNewTaskButton.setText(ResourceBundle.getBundle("Language").getString("locale_button_accept"));

    return acceptNewTaskButton;

}} 
```

我输入这个

```
okButton = new AcceptNewTaskButton().AcceptNewTaskButton(dialog,dateChooser,newTaskName); 
```

动作完美执行。

我想知道为什么会这样，我认为这很简单，但我看不到。我想这样做是因为我想在一个名为按钮的包中拥有一个每个按钮的类，并以这种方式使我的代码更加“面向对象”

太感谢了！

pd：如果我犯了任何语法错误，请原谅，英语不是我的母语

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T04:25:16.480

您的类已经扩展了 JButton，因此您不想创建新按钮。

我认为你应该这样做：

```
// acceptNewTaskButton = new   JButton(actionManager.getNewTaskAction(dialog,dateChooser,textField));
setAction(  actionManager.getNewTaskAction(dialog,dateChooser,textField) ); 
```

# ios - ObjC：在init中我可以做self = [self initWithMyGenericMethod]吗？

> ID：14743140
> 
> 赞同：1
> 
> 时间：2013-02-07T03:42:39.003
> 
> 标签：ios, objective-c

在我的课堂上，我有一个通用初始化程序：

```
- (id)initWithSettings:(MySettings *)settings
{
    self = [super init];
    if (self)
    {
     /// ...
    }
    return self;
} 
```

它还有另一个具有固定设置的初始化程序

```
- (id)initWithSettingsForCaseA
{
    return [self initWithSettings:[MySettings genericSettings]];
} 
```

我可以这样做吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T03:47:30.100

当然可以！

这实际上是一个很好的做法。

initWithSettings: 被称为“指定初始化器”。没有定义指定初始化程序的编程方式。这更像是一种设计模式/最佳实践。

以 UIViewController 的指定初始化程序为例，initWithNibName:bundle:..您仍然可以调用普通的 ol' init，只要您的 nib 与您的视图控制器子类命名相同，一切都会正常工作。UIViewController 只需调用其指定的初始化程序并为两个参数传递 nil。

你基本上在做同样的事情！

# vb.net - Visual Basic 中的日期计算器

> ID：14743141
> 
> 赞同：0
> 
> 时间：2013-02-07T03:42:50.390
> 
> 标签：vb.net, datetime

所以我想做的是创建一个可以输入日期的函数，计算 X 天/周/月后（或之前）并输出结果日期。诀窍是要记住计算闰年、多于或少于 30 天的月份等。我对 Visual Basic 很陌生，所以我真的不知道从哪里开始。我有一些想法在我的脑海里转来转去，但没有什么我可以真正投入到代码中。我不只是希望有人为我编写所有代码，而是给我一些关于从哪里开始等的想法。

我现在想的是让用户点击一个按钮（btnCalc），提示用户输入他们希望计算的日期，另一个输入框询问他们希望从该日期添加/减去多少时间。这些值将被传递给执行计算的CalculateDate 函数。我正在考虑让用户输入一个负数，如果他们希望在输入日期之前获得一个日期，因此我可以有一个 if /else 子句来根据数字是 > 还是 < 0 来确定要执行哪个计算。这个是我迷路的地方。我不知道如何告诉 Visual Basic 日期是什么，或者如何确定月份中有多少天或注意闰年。任何帮助将不胜感激，请告诉我我是否朝着完全错误的方向前进。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T14:28:44.193

该类`DateTime`已经包含所有这些方法。

```
result = theDate.AddDays(1)
result = theDate.AddDays(-100)
result = theDate.AddMonths(42)
result = theDate.AddYears(-10)
...etc... 
```

有关更多详细信息，请参阅[文档](http://msdn.microsoft.com/en-us/library/system.datetime.aspx)。

# r - 如何在R中的矩阵中删除NA

> ID：14743142
> 
> 赞同：-2
> 
> 时间：2013-02-07T03:42:55.407
> 
> 标签：r, matrix

> 我有一个 2020 X 4 的矩阵。但是从第 2000 行到 2020 行的值都是 NA。我想删除这些行，我的矩阵现在应该是 2000 X 4 矩阵。有没有一种简单的方法可以做到这一点。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-07T03:46:01.093

只需重新分配矩阵，仅选择您想要的值

如果您的矩阵被调用`x`，并且您只想要前 2000 行

你可以创建一个新对象`newx`

```
newx <-   x[1:2000,] 
```

或者只是重新分配`x`什么

```
x <-   x[1:2000,] 
```

# c++ - 没有 typedef 的函数指针的动态数组

> ID：14743144
> 
> 赞同：2
> 
> 时间：2013-02-07T03:43:00.993
> 
> 标签：c++, pointers, function-pointers

我有这个：

```
void (**funcs)();
funcs = new void (*)()[n]; 
```

并且收到关于 void、括号等的错误。什么是正确的语法？

我知道向量，但我只想知道如何以这种方式完成。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-07T03:44:38.777

如果您出于某种原因坚持使用原始指针，或者您只是好奇，那么语法是：

```
void (**funcs)() = new (void(*[100])()); 
```

但说真的，只需使用`std::vector`：

```
std::vector<void(*)()> vec; 
```

# python - 如何检查 Python 数组中是否存在元素（相当于 PHP in_array）？

> ID：14743156
> 
> 赞同：16
> 
> 时间：2013-02-07T03:43:53.103
> 
> 标签：python, arrays, lookup

我是 Python 新手，我正在寻找一个标准函数，它可以告诉我数组中是否存在元素。我找到了该`index`方法，但如果找不到该元素，它会引发异常。我只需要一些简单的函数，`true`如果元素在数组中或`false`不在数组中，它就会返回。

基本上相当于 PHP `in_array`。

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2013-02-07T03:45:24.820

```
>>> 1 in [0, 1, 2, 3, 4, 5]
True 
```

# iphone - 自 2 月 6 日起无法使用 Facebook iOS SDK 进行 OAuth

> ID：14743157
> 
> 赞同：0
> 
> 时间：2013-02-07T03:43:54.677
> 
> 标签：iphone, ios, facebook-graph-api, facebook-oauth, django-authentication

我有一个关于 Facebook OAuth 的问题。

自 2 月 6 日起，我无法在开发 iOS 应用程序中连接到 Facebook。以前，我可以做到。

而且，我尝试测试添加 iOS SDK 的 Facebook 示例应用程序。iOS6.0 中的示例BooleanOGSample，可以连接Facebook，但iOS5.0 版本无法连接。

也许，6.0 版被 SDK 中的 'FBUserSettingsViewController' 使用，但 5.0 版是通过网页连接的。但是网页404。

iOS5.0、iOS5.1如何连接Facebook OAuth？facebook sdk 是 3.1.1（2012 年 10 月发布）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T04:07:30.797

看来您使用的是较旧的 facebook sdk，您应该下载 iPhone 版 facebookSDK 的较新版本，然后尝试，如果仍然无法从 Oauth 传递，请尝试在 developer.facebook.com 上创建一个新应用程序。

希望它会帮助你。

# windows - 批量替换特定行并读取并将我读取的内容设置为变量

> ID：14743158
> 
> 赞同：1
> 
> 时间：2013-02-07T03:44:05.937
> 
> 标签：windows, command-line, batch-file, dos

我想做一个这样的菜单：

```
mode 59, 300
set line===========================================================
echo %line%
echo         Tool colour menu!
echo %line%
Echo.
echo     Choose your BACKGROUND colour!
echo.
echo         1  =   Blue        
echo         2  =   Green       
echo         3  =   Aqua        
echo         4  =   Red     
echo         5  =   Purple      
echo         6  =   Yellow      
echo         7  =   White
echo         8  =   Gray
echo         9  =   Light Blue
echo         10 =   Light Green
echo         11 =   Light Aqua
echo         12 =   Light Red
echo         13 =   Light Purple
echo         14 =   Light Yellow
echo         15 =   Bright White
echo.
set /p background_app=Enter the number of the colour that you want for background (or enter for default): 
```

所以那个菜单就是 background_app 变量！

接着：

```
mode 59, 300
set line===========================================================
echo %line%
echo         Tool color menu!
echo %line%
Echo.
echo     Choose your TEXT color!
echo.
echo         1  =   Blue        
echo         2  =   Green       
echo         3  =   Aqua        
echo         4  =   Red     
echo         5  =   Purple      
echo         6  =   Yellow      
echo         7  =   White
echo         8  =   Gray
echo         9  =   Light Blue
echo         10 =   Light Green
echo         11 =   Light Aqua
echo         12 =   Light Red
echo         13 =   Light Purple
echo         14 =   Light Yellow
echo         15 =   Bright White
echo.
set /p text_app=Enter the number of the color that you want for text (or enter for default): 
```

这将是变量 %text_app%

用户输入后，我想将此变量保存在 txt 文件中，以便稍后检索这些值，以防用户运行该工具（以保留该人选择的颜色）

但目前我已经尝试过：

```
:saveVars
(
ECHO Backuground=%background_app%
ECHO Text=%text_app%
) >colors.txt
GOTO :EOF 
```

例如，它将像这样保存：

```
Background=1
Text=7 
```

现在进退两难了，因为我只想从 colors.txt 中读取值并将其设置为变量：

```
%background_apptxt%
%text_apptxt% 
```

我怎样才能只读取背景和文本的值？谢谢你的帮助 ：）

* * *

好吧，理解 FOR 很容易，但例如：

Colors.txt 包含以下行：

```
Background=1
Text=2 
```

所以例如我用这个批次创建了一个测试批次：

```
@echo off
set background_app=black
set text_app=green

:saveVars
(
ECHO Background=%background_app%
ECHO Text=%text_app%
) >colors.txt

for /f "tokens=1,2 delims==" %%A in (colors.txt) do set "%%A_app=%%B" 
```

如何回显 %background_app% 并再次回显 %text_app% ？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T05:18:29.103

使用 FOR /F 循环来读取和解析每一行。您可以将令牌分隔符设置为，`=`以便获得 2 个令牌。

```
for /f "tokens=1,2 delims==" %%A in (colors.txt) do set "%%A_app=%%B" 
```

如果您的文本文件包含每个变量的全名，则代码可能会更容易。然后你可以简单地使用

```
for /f "delims=" %%A in (colors.txt) do set "%%A" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T19:07:54.723

很好地找到了另一种保存和读取 ini 的方法：

[http://www.horstmuc.de/wbat32.htm#inifile](http://www.horstmuc.de/wbat32.htm#inifile)

希望有人和我一样觉得这很有用:)

# jquery - Jquery Knob 在 IE 8 中不起作用。

> ID：14743161
> 
> 赞同：1
> 
> 时间：2013-02-07T03:44:13.280
> 
> 标签：jquery, jquery-knob

JQuery Knob 在 IE 8 中不起作用。如果您查看网站 [http://anthonyterrien.com/knob/](http://anthonyterrien.com/knob/) ，您会发现问题所在。可比性模式似乎也不起作用。有什么建议么 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-25T09:20:22.720

只需在 user2147420 的答案中添加更多信息，您就可以在此处获取 excanvas.js [https://code.google.com/p/explorercanvas/downloads/detail?name=excanvas_r3.zip](https://code.google.com/p/explorercanvas/downloads/detail?name=excanvas_r3.zip)

该下载有示例，但如果您想快速了解如何使用它，这里有一个链接[https://code.google.com/p/explorercanvas/wiki/Instructions](https://code.google.com/p/explorercanvas/wiki/Instructions)

只需将其添加到您的 html 的 head 部分。

```
<!--[if lt IE 9]>
        <script src="pathToFile/excanvas.js"></script>
<![endif]--> 
```

**注意-我在上面指出的页面说：** “如果您动态创建了画布元素，则不会将 getContext 方法添加到元素中。要使其正常工作，您需要在 G_vmlCanvasManager 对象上调用 initElement 。”

即将此代码添加到jquery旋钮javascript文件中的适当位置

```
var el = document.createElement('canvas');
G_vmlCanvasManager.initElement(el);
var ctx = el.getContext('2d'); 
```

# c - C - 如果缓冲区更大，如何处理文件的最后一部分？

> ID：14743163
> 
> 赞同：4
> 
> 时间：2013-02-07T03:44:24.270
> 
> 标签：c, file, io

是否可以读取小于缓冲区大小的文件中剩余的字节？

```
char * buffer = (char *)malloc(size);
FILE * fp = fopen(filename, "rb");

while(fread(buffer, size, 1, fp)){
     // do something
} 
```

假设大小为 4，文件大小为 17 字节。我认为 fread 也可以处理最后一个操作，即使文件中剩余的字节小于缓冲区大小，但显然它只是终止 while 循环而不读取最后一个字节。

我尝试使用较低的系统调用 read() 但由于某种原因我无法读取任何字节。

如果 fread 无法处理小于缓冲区大小的最后一部分字节，我该怎么办？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-07T03:47:59.913

是的，把你的参数调过来。

`size`您应该请求1 个字节的块，而不是请求一个字节`size`块。然后该函数将返回它能够读取多少块（字节）：

```
int nread;
while( 0 < (nread = fread(buffer, 1, size, fp)) ) ... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T04:10:35.847

尝试使用“man fread”

它清楚地提到了以下本身回答您的问题的事情：

```
SYNOPSIS
size_t fread(void *ptr, size_t size, size_t nitems, FILE *stream);

DESCRIPTION
  fread() copies, into an array pointed to by ptr, up to nitems items of
  data from the named input stream, where an item of data is a sequence
  of bytes (not necessarily terminated by a null byte) of length size.
  fread() stops appending bytes if an end-of-file or error condition is
  encountered while reading stream, or if nitems items have been read.
  fread() leaves the file pointer in stream, if defined, pointing to the
  byte following the last byte read if there is one.

  The argument size is typically sizeof(*ptr) where the pseudo-function
  sizeof specifies the length of an item pointed to by ptr.

RETURN VALUE
  fread(), return the number of items read.If size or nitems is 0, no
  characters are read or written and 0 is returned.

  The value returned will be less than nitems only if a read error or
  end-of-file is encountered.  The ferror() or feof() functions must be
  used to distinguish between an error condition and an end-of-file
  condition. 
```

# java - 用单个数字排列的简单数字

> ID：14743165
> 
> 赞同：7
> 
> 时间：2013-02-07T03:44:49.653
> 
> 标签：java, arrays, digits

我对编程非常陌生，但我正在努力提高我作为程序员的技能。目前，我正在解决我给自己的一个问题，我试图获取一个可变数字并将其每个数字作为数组中的单独数字。我不在乎数字的顺序，所以如果它们颠倒了，那对我来说就没有关系了。我知道人们已经多次问过这个问题，但他们似乎总是使用很多我不明白的东西。由于我的学校不提供任何 Java 课程，我只知道我自己学到的东西，所以如果你能解释你在代码中使用的任何不是非常琐碎的术语，那就太好了。现在，我已经写了：

```
int number = 1234567890;
    while (number > 0) {
        System.out.println(number%10);
        number = number/10; 
```

这适用于单独打印数字，但我不知道如何将它们添加到数组中。我非常感谢您提供的任何帮助，请记住，我更喜欢简单而不是小尺寸。先感谢您！

PS 我看到的一些类似问题的回答包括我认为的字符串数组。为了让我正在工作的程序部分仍然可以工作，我认为我需要使用一个整数数组。如果你好奇的话，剩下的代码就是用来判断数组中的数字是否全不相同，以达到判断一个数字的位数是否全不同的最终结果。它看起来像这样：

```
int repeats=0;
int[] digitArray;
digitArray = new int[10];
for (int i = 0; i < digitArray.length; i++) 
    for (int j = 0; j < digitArray.length; j++)
        if ((i != j) && (digitArray[i]==digitArray[j])) unique = unique+1;
System.out.println(unique==0); 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-07T03:52:17.130

方法 number.toString().length() 将返回位数。这与您需要的数组的长度相同。然后你像以前一样使用你的代码，而不是打印你将数字添加到数组中。

```
int number = 1234567890;
int len = Integer.toString(number).length();
int[] iarray = new int[len];
for (int index = 0; index < len; index++) {
    iarray[index] = number % 10;
    number /= 10;
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-07T03:50:40.930

我宁愿建议您使用 an [`ArrayList`](http://docs.oracle.com/javase/7/docs/api/java/util/ArrayList.html)，因为要使用数组，您必须提前分配大小，为此您需要知道数字中的位数，而您不知道。

因此，要么使用数组，然后对数字进行两次迭代——一次用于查找大小，下一次用于实际工作。否则，继续前进`ArrayList`。

向 an 添加元素`ArrayList`非常简单。您只需要[`List#add(E)`](http://docs.oracle.com/javase/7/docs/api/java/util/List.html#add%28E%29)使用适当的参数调用 - 方法。

因此，这是您的解决方案的扩展：-

```
// Declare a List<Integer>, since it will store integers only.
List<Integer> digits = new ArrayList<Integer>():

int number = 1234567890;
while (number > 0) {
    int digit = number % 10;  // Store digit in a variable
    number = number/10;

    // Add digit to the list
    digits.add(digit);
} 
```

或者，如果您只想在 中包含唯一数字`List`，那么您应该使用 a `HashSet`，它会自动删除重复项。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-01-02T05:47:33.780

使用 Java 8：

Integer.toString(n).chars().map(a->a-'0').toArray()

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-07-16T16:49:38.730

```
char [] arr = scan.next().toCharArray(); 
```

此代码将从中读取一个数字`scan.next()`，然后将其作为输入提供给`char`数组，该数组将在其索引处以单个数字为单位的数字。

希望这会有所帮助。

# php - 无法使用 urldecode 从数据库中获取信息

> ID：14743175
> 
> 赞同：0
> 
> 时间：2013-02-07T03:46:01.570
> 
> 标签：php, mysql, urldecode

我曾经`urldecode`从以前的站点接收过会员 ID。URL 中显示了正确的 ID，但我无法从数据库中获取信息。

成员.php：

```
 <?php

$query = "SELECT name, memberID FROM members";

if(!$result = $db->query($query)){
    die('There was an error running your query[' . $db->error . ']');
}

while($row = $result->fetch_assoc()){
  printf ('<li><a href="profiles.php?memberID=' . urlencode($row['memberID']) . '">' . $row['name'] . '</a></li>');

}
?> 
```

配置文件.php：

```
 <?php

$id = isset($_GET['memberID']);

$query = "SELECT * FROM members WHERE memberID = '".$id."'";

if ($result = $db->query($query)) {

while ($row = $result->fetch_assoc()){
    printf("%s (%s)\n", $row["memberID"], $row['name']);
}
}
 var_dump($query);
?> 
```

我得到的只是一个空白屏幕。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T03:51:20.273

确保使用正确的`memberId`vs.大小写`memberID`。这个非常重要。

不要通过 GET/POST 传递***从***GET/POST 检索到的值`urldecode`。 [他们已经是](http://php.net/manual/en/reserved.variables.get.php#refsect1-reserved.variables.get-notes)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T04:59:00.843

我在代码中发现了几个问题：

**成员.php**

```
while($row = $result->fetch_assoc()){
  printf ('<li><a href="profiles.php?memberID=' . urlencode($row['memberID']) . '">' . $row['name'] . '</a></li>');

} 
```

在这里，您使用的`printf`函数具有字符串**格式的第一个参数。**`echo`使用如下语句更正：

```
while($row = $result->fetch_assoc()){
  echo '<li><a href="profiles.php?memberID=' . urlencode($row['memberID']) . '">' . $row['name'] . '</a></li>';

} 
```

**配置文件.php**

```
$id = isset($_GET['memberID']); 
```

在这里，您正在设置`$id`with isset() 函数的返回值。您应该设置 GET 参数的值，如下所示：

```
if(isset($_GET['memberID']))    $id = $_GET['memberID']; 
```

现在看看它是否有效。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-07T05:13:10.233

请根据您的代码尝试以下操作并让我们知道结果：

```
<?php
$id = isset($_GET['memberID']) ? $_GET['memberID'] : 0;
if($id > 0){
    $query = "SELECT * FROM members WHERE memberID = '".$id."'";
    $result = $db->query($query);
    if($result){
        echo "Rows found: " + $result->num_rows;
    } else {
        echo "No rows found";
    }
} else {
    echo "memberID is 0";
}
?> 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-02-07T03:51:08.603

memberID 是数据库中的 int 字段还是字符串字段？如果它是一个 int 字段，则删除您对profiles.php 的查询中的单引号。

# c# - 将 MS Oracle 客户端转换为 Oracle 数据提供程序 - OracleException

> ID：14743185
> 
> 赞同：2
> 
> 时间：2013-02-07T03:47:26.543
> 
> 标签：c#, oracle, oracle11g, odp.net

我正在将产品从 System.Data.OracleClient 转换为 Oracle.DataAccess.Client，遇到了一个问题下面是一些代码片段：

```
try
{
    //some db code
}
catch (System.Data.OracleClient.OracleException ex)
{
    if (ex.Code == 00904)
    {
        // log specific error
    }
} 
```

问题是，`Oracle.DataAccess.Client.OracleException`没有`Code`财产。它有一个`Number`属性。这是同一件事吗？[文档](http://docs.oracle.com/cd/E20434_01/doc/win.112/e23174/OracleExceptionClass.htm#autoId6)是这样说的——

> 此错误号可以是 Oracle 生成的最高级别的错误，也可以是特定于提供程序的错误号。

该`Code`属性包含 ORA- 错误代码。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T16:39:28.270

是的，它们是一样的。`Oracle.DataAccess.Client.OracleException.Number`是相同的信息`System.Data.OracleClient.OracleException.Code`。

# java - 如何将原始 html 传递给 Play 框架视图？

> ID：14743199
> 
> 赞同：22
> 
> 时间：2013-02-07T03:49:37.357
> 
> 标签：java, playframework, playframework-2.0

我正在尝试将一个简单的 URL 传递给播放框架应用程序中的视图，但是当作为字符串传递时，`&`URL 中的 会更改为`&amp;`导致 URL 不起作用。

如果我将参数更改为 Html，即更改`@(url: Srting)`为`@(url: Html)`，那么当我尝试将 url 作为字符串传递给`view.render()`方法时会出现错误。

如何将 url 转换为 Html 并将其传递？

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2013-02-07T04:13:38.653

为了防止视图上的动态内容发生默认转义，您需要包装`String`with`@Html(String)`函数：

看法：

```
@(url: String)
<div class="myLink">
   Go to: @Html(url) <br>
   not to: @url
</div> 
```

控制器：

```
public static Result displayLink(){
   return ok(view.render("<a href='http://stackoverflow.com/'>Stack Overflow</a>"));
} 
```

有关更多信息，请参阅文档上[的模板引擎](http://www.playframework.com/documentation/2.0.4/JavaTemplates)页面（特别是最底部的“转义”部分）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-02-12T09:05:25.487

如果要呈现 HTML 内容而不是将其显示为原始文本，请返回 content `.as("text/html")`。例子：

```
WS.url("http://www.stackoverflow.com").get().map(resp => Ok(resp.body).as("text/html")) 
```

# c# - 关于添加先决条件以在 Microsoft Visual Studio 2008 上制作安装文件

> ID：14743202
> 
> 赞同：1
> 
> 时间：2013-02-07T03:50:02.560
> 
> 标签：c#, .net, installation, prerequisites, deployment-project

我知道，如果您希望您的安装文件检测 pc 是否安装了 .Net Framework 3.5，您必须在 Setup Properties 中配置先决条件。有 3 个选项可供选择，我不太明白第二个选项是什么意思：“从与我的应用程序相同的位置下载先决条件”。是不是我必须先准备好 .Net Framework 3.5 安装文件？我应该把这个安装文件放在哪里？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T08:35:55.007

它用于通过安装程序分发先决条件（如离线安装程序）：

[http://msdn.microsoft.com/en-us/library/vstudio/hh873130.aspx](http://msdn.microsoft.com/en-us/library/vstudio/hh873130.aspx)

# javascript - 2个字符串替换javascript

> ID：14743204
> 
> 赞同：1
> 
> 时间：2013-02-07T03:50:21.997
> 
> 标签：javascript, regex

我是初学者，如何结合它们：

```
var mystring = "my.email@computer.com";
document.write(mystring.replace(/@/, "&&")); 
```

印刷`my.email&&computer.com`

```
var mystring = "my.email@computer.com";
document.write(mystring.replace(/\./, "##")); 
```

印刷`my##email@computer.com`

我有两个问题：如何将这个正则表达式 (mystring.replace(/./, "##")`@`更改`dot`为之后，`##` 以及如何将这两行合二为一，最终读取是：`my.email&&computer##com`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-07T03:53:36.153

输入 ：`my.first.last.email@example.computer.com`

结果 ：`my.first.last.email&&example##computer##com`

解决方案1：

```
var mystring = "my.first.last.email@example.computer.com";
//replace '.' after '@' with '##', then replace '@' with '&&'.
var result = mystring.replace(/(?!.*@)\./g, "##").replace(/@/, "&&");
document.write(result); 
```

解决方案2（可配置）：

```
var mystring = "my.email@computer.com";

var replacements = {
                    '@' : '&&',
                    '.' : '##'
                   };

var str =  "my.first.last.email@example.computer.com";

//match latter part of the string
var result = str.replace(/@\w+(\.\w+)+/g, function(at_and_after) {
    //replace all '.' and '@' in that part.
    return at_and_after.replace(/@|\./g, function(m) { return replacements[m]});
});
document.write(result);  //console.log(result) or alert(result) is a better way for demo 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-07T03:55:03.190

试试这个...

```
var mystring = "my.email@computer.com";
document.write(mystring.replace(/(.*@.*)\./, "$1##").replace(/@/, "&&")); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-07T03:52:58.460

您可以使用 split 在 /@/ 处拆分字符串并将第二个正则表达式应用于字符串的第二部分，然后将结果与 && 重新连接在一起。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-07T04:10:02.357

这应该有效：

```
var mystring = "my.email@computer.com";
document.write(mystring.replace(/(.*?)(@)(.*?)(\.)(.*)/, "$1&&$3##$5")); 
```

结果：

```
my.email&&computer##com 
```

在这里看到它的工作：http: [//jsfiddle.net/gnB85/](http://jsfiddle.net/gnB85/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-07T04:03:19.173

试试这个：

```
var mystring = "my.email@computer.com"
document.write(mystring.replace(/\.(?!\w+@)/, '##').replace(/@/, '&&')); 
```

# php - GD imagecopy 后空白空间被黑色填充但仅在某些情况下

> ID：14743205
> 
> 赞同：0
> 
> 时间：2013-02-07T03:50:22.317
> 
> 标签：php, gd

我遇到了一个问题，我允许用户调整容器中的图像大小，然后需要创建一个结果图像，该图像是容器的大小，但图像会根据用户的选择进行缩放和调整。

例如，假设容器为 400 x 200，用户希望能够放入 600 x 100 的徽标，他们可能希望缩小徽标以使其适合并在顶部和底部留出空间。我需要能够将其保存为 400x200 的图像，顶部和底部有适当的间隙。

但我发现，如果图像内容（本例中的徽标）超出容器的顶部和右侧，一切都很好，或者如果它没有超出任何一个，那很好，但如果它超出一个而不是另一个然后我得到黑色填充 - 或类似的东西 - 见下面的例子......

下面是一些结果示例，这是我正在使用的代码......

```
$cropped =  wp_imagecreatetruecolor( $frame_w, $frame_h);
    $backgroundColor = imagecolorallocatealpha($cropped, 0, 0, 0, 127);
    //imageantialias( $cropped, true );
    //if $img_y or $img_x are negative we need to apply the value to $img_x and $img_y
    //if $img_y or $img_x are positive we need to apply the value to $dest_x and $dest_y
    $dest_x = strstr($img_x,'-') ? 0 : abs($img_x);//if neg is true = 0 else offset inside
    $dest_y = strstr($img_y,'-') ? 0 : abs($img_y);
    $img_x = strstr($img_x,'-') ? abs($img_x) : 0;//if neg is true offset outside else 0
    $img_y = strstr($img_y,'-') ? abs($img_y) : 0;
    $img_w = $img_w > $frame_w ? $frame_w : $img_w;
    $img_h = $img_h > $frame_h ? $frame_h : $img_h;
    imagecopy( $cropped, $resized, $dest_x, $dest_y, $img_x, $img_y, $img_w, $img_h);
    //imagecopymerge( $cropped, $resized, $dest_x, $dest_y, $img_x, $img_y, $img_w, $img_h,100);
    //imagecopyresampled( $cropped, $resized, $dest_x, $dest_y, $img_x, $img_y, $frame_w, $frame_h, $img_w, $img_h );
    imagefill($cropped, 0, 0, $backgroundColor);//putting this after the copy makes any black borders transparent again unless $resized does not extend beyond both dimensions 
```

例子

图像没有超出顶部或超出右侧（罚款） ![图像没有超出顶部或超出右侧（罚款）](../Images/92d0edd70eff400f678320a35dae4ff4.png)

图像超出底部但不正确（不好） ![图像超出底部但不正确（不好）](../Images/cc052eab8ea9f99b8008e9d17e306677.png)

图像超出两者（很好） ![图像超出两者（很好）](../Images/061fc1019587708b30c46518393c44f8.png)

图像超出右侧但未超出底部（不好） ![图像超出右侧但未超出底部（不好）](../Images/27418be907c5dbcefd56fecea20fe0cf.png)

图像既不超出（罚款） ![图像既不超出（罚款）](../Images/c10381a50f27d8604b4e18082c4b3570.png)

我一直在努力解决这个问题，并尝试了所有可能的imagesavealpha、imagecopymerged、imagecolorallocatealpha、imagealphablending等我能想到的组合，但似乎没有什么能解决这个问题......

那么这是GD的错误/限制吗？或者有人可以来救我吗！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T03:59:10.193

我不知道这是否会帮助你，但我今天早些时候遇到了这个问题。盒子扩大了，但该区域是黑色的。这是我的代码（修复它）：

```
<?php
function createImage($text)
{
    // Adds an extra space to fill underline
    $text = " $text";
    // Adds one line at the end
    $text .= "\n";
    // Wrap the text to fit the image
    $text = wordwrap($text, 40, "\n");
    // Count new lines
    $newlines = substr_count($text, "\n");
    // Count how long to expand
    if($newlines == 0)
    {
        $height = 30;
    }
    else
    {
        $height = 30*$newlines-$newlines*5;
    }

    putenv('GDFONTPATH=' . realpath('.'));
    header('Content-Type: image/png');
    // Adding underline
    $e = explode('<', $text);
    for($i=0;$i<count($e);$i++)
    {
        $e[$i] = implode('&#x0332;', str_split($e[$i]));
    }
    // Creating image
    $text = implode(' ', $e);
    $im = imagecreatetruecolor(315, $height);
    $white = imagecolorallocate($im, 255, 255, 255);
    $grey = imagecolorallocate($im, 128, 128, 128);
    $black = imagecolorallocate($im, 0, 0, 0);
    $purple = imagecolorallocate($im, 97, 26, 139);
    imagefilledrectangle($im, 0, 0, 399, $height, $white);
    $font = 'arialbd.ttf';

    imagettftext($im, 11, 0, 10, 20, $purple, $font, $text);
    imagepng($im);
    imagedestroy($im);
}

createImage("asbdasddsa");
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T12:23:01.713

我认为这只会发生在使用其他格式的 PNG 检查

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-07T15:14:40.587

我不确定这是否是一个实际的答案，因为它基本上是“使用 ImageMagick”，但无论如何对于那些选择 ImageMagick 的人来说，下面的代码可能会帮助他们实现与我在上面尝试的相同的事情......基本上是 ImageMagick看起来比 GD 好得多，旋转图像周围没有边框，透明度没有麻烦，没有想要的黑色填充，如果你正在放大，更清晰的调整大小......

```
$img_x = -50; //left offset of the image within the frame
$img_y = 50; //top offset of the image within the frame
$img_w = 400; //width of the image to be put in the frame
$img_h = 200; // height of the image to be put in the frame
$angle = 45; //rotation to be applied to the image before it is put into the frame
$frame_w = 300; //width of the frame the image is going into
$frame_h = 300; //height of the frame the image is going into
$img_path = 'path/to/image/file.jpg';
$image = new Imagick( $img_path );
$size = $image->getImageGeometry();
$orig_w = $size['width']; $orig_h = $size['height'];
$image->scaleImage( $img_w, $img_h );
//rotate if necessary
if($angle)
    {
    $image->rotateImage( new ImagickPixel('none'), $angle );
    $size = $image->getImageGeometry();
    $img_w = $size['width']; $img_h = $size['height'];
    }
//composite into frame
//in imagemagick we create an image that is the size of the frame and make it transparent
$frame = new Imagick();
$frame->newImage($frame_w, $frame_h, new ImagickPixel("none"));
//then we composite the image itself into this with the respective offset values
$frame->compositeImage( $image, Imagick::COMPOSITE_DEFAULT, $img_x, $img_y );
//save it
$destfilename = "{$dir}/{$name}-{$img_suffix}.{$ext}";
$frame->writeImage($destfilename);
$frame->clear();
$frame->destroy();
$image->clear();
$image->destroy(); 
```

![上面的代码产生](../Images/438cec6f6476dbc96f7892ecea1dc87e.png) 上面的代码产生了这个......耶！

# playframework-2.0 - 玩 2.0 多个 Akka 期货来修改相同的数据库记录

> ID：14743212
> 
> 赞同：2
> 
> 时间：2013-02-07T03:51:29.120
> 
> 标签：playframework-2.0, akka, ebean

我正在使用 Play 2.0.4 Java。有两个api，一个是从频道对象中删除成员详细信息，另一个是添加。两个 API 都使用 Akka.future()。当两个 api 都被非常接近地调用以修改相同的数据库对象（相同的记录）时，如何避免来自 Play 的 ebean 异常（见下文）？

模型对象

```
public class Channel extends Model {
  .....
  @OneToMany(cascade=CascadeType.ALL, mappedBy="channelInfo")
  private Set<ChannelDetailMember> members;

  public void addMemberId(String memberId) {
      List<String> memberIdslList = this.getMemberIdsList();
      if (!memberIdslList.contains(memberId)) {
        ChannelDetailMember dMember = new ChannelDetailMember(memberId, this);
        dMember.save();
        membersCount++;
        this.getMembers().add(dMember);
       }
   }

   public void removeMemberId(String memberId) {
       Iterator<ChannelDetailMember> iter = this.getMembers().iterator();
       while (iter.hasNext()) {
          ChannelDetailMember dMember = iter.next();
          if (dMember.getMemberId().equals(memberId)) {
            dMember.delete();
            iter.remove();
            membersCount--;
            break;
           }
       }
   }
} 
```

请求 1：从对象通道的成员列表中删除一个 memberId

```
public static Result removeMemberIdFromChannel(final String name, final String memberId) {  
   Promise<ObjectNode> promiseRemove = Akka.future(
     new Callable<ObjectNode>() {
       public ObjectNode call() {
            Channel channel = find.where().eq("name", name).findUnique();
            channel.removeMemberId(memberId);
       }
     }
   )
   .....
} 
```

请求 2：从对象通道的成员列表中添加一个 memberId

```
public static Result addMemberIdToChannel(final String name, final String memberId) {   
   Promise<ObjectNode> promiseRemove = Akka.future(
     new Callable<ObjectNode>() {
       public ObjectNode call() {
            Channel channel = find.where().eq("name", name).findUnique();
            channel.addMemberId(memberId);
       }
     }
   )
   ....
} 
```

当两个请求被非常接近地调用时，我从 Play 中得到了异常。

```
[error] play - Waiting for a promise, but got an error: Data has changed. updated [0] rows sql[update channel set members_count=?, update_date=? where id=? and channel_name=? and conversation_id=? and members_count=? and created_date=? and update_date=?] bind[null]
 at com.avaje.ebeaninternal.server.persist.dml.UpdateHandler.execute(UpdateHandler.java:106) ~[ebean-2.7.3.jar:na]
 at com.avaje.ebeaninternal.server.persist.dml.DmlBeanPersister.update(DmlBeanPersister.java:85) ~[ebean-2.7.3.jar:na]
 javax.persistence.OptimisticLockException: Data has changed. updated [0] rows sql[update channel set members_count=?, update_date=? where id=? and channel_name=? and conversation_id=? and members_count=? and created_date=? and update_date=?] bind[null]
    at com.avaje.ebeaninternal.server.persist.dml.DmlBeanPersister.execute(DmlBeanPersister.java:105) ~[ebean-2.7.3.jar:na]
    at com.avaje.ebeaninternal.server.persist.dml.DmlHandler.checkRowCount(DmlHandler.java:123) ~[ebean-2.7.3.jar:na]
    at com.avaje.ebeaninternal.server.persist.DefaultPersistExecute.executeUpdateBean(DefaultPersistExecute.java:110) ~[ebean-2.7.3.jar:na]
    at com.avaje.ebeaninternal.server.core.PersistRequestBean.executeNow(PersistRequestBean.java:531) ~[ebean-2.7.3.jar:na] 
```

# java - ArrayLists 数组空指针异常

> ID：14743213
> 
> 赞同：-2
> 
> 时间：2013-02-07T03:51:41.583
> 
> 标签：java, arrays, arraylist, nullpointerexception

我在以下代码上遇到空指针异常（较大程序的一部分-在调用“add”的行上引发异常）。

```
public class A
{
    static ArrayList<Integer> sets[];
    public static void main(String[] args)
    {
         sets = new ArrayList[5];
         sets[0].add(1);
    }
} 
```

我也不明白为什么编译器要求我将任何类级变量设为静态（例如 ArrayList）。据我所知，这些东西不应该在静态上下文中（就编码实践而言，而不是编译器问题），但编译器需要它。

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-07T03:53:03.013

```
 sets = new ArrayList[5]; 
```

只需填满 5 个位置`null`

您需要在调用`ArrayList()`之前明确设置每个位置。`add()`

例子：

```
sets[0] = new ArrayList<Integer>();
sets[0].add(5); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T03:53:07.797

线

```
sets = new ArrayList[5]; 
```

分配数组，但不在数组的任何元素中放置 ArrayList。

你需要

```
sets[0] = new ArrayList<Integer>();
sets[0].add(1); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-07T03:52:38.793

这是因为您的数组是用`null`值初始化的。

```
//it will initialize sets variable
sets = new ArrayList[5];
//but set[0], set[1]... and on are null 
```

您还应该在使用它们之前初始化数组项

```
sets[0] = new ArrayList<Integer>();
sets[0].add(1); 
```

此外，为了更好的设计，您应该面向接口而不是类进行编程。请参阅 [“编程到接口”是什么意思？](https://stackoverflow.com/q/383947/1065197)了解更多信息。

简而言之，您的代码应如下所示

```
public class A {
    static List<Integer> sets[];
    public static void main(String[] args) {
        sets = new List[5];
        sets[0] = new ArrayList<Integer>();
        sets[0].add(1);
        //extending your code in order to use more than one value of the List array
        sets[1] = new ArrayList<Integer>();
        sets[1].add(20);
        for(List<Integer> list : sets) {
            if (list != null) {
                System.out.println(list.get(0));
            }
        }
    }
} 
```

# c - ls 通过管道输入命令行

> ID：14743216
> 
> 赞同：0
> 
> 时间：2013-02-07T03:52:06.627
> 
> 标签：c, bash, ls

我一直在尝试将结果`ls`从命令行输入我正在编写的 C 程序（在 Unix 中）。我希望能够拥有文件的索引，所以我打算使用 argv。这就是我认为它应该工作的方式：

```
./foo &(ls ~/path) 
```

它不起作用 - 将输出`ls`作为参数传递给命令的正确方法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-07T03:55:32.503

你的语法*有点*不对...

```
./foo $(ls ~/path) 
```

请注意，这会阻塞包含某些字符的文件。请改用数组来解决此问题。

```
pushd ~/path
files=(*)
popd
./foo "${files[@]}" 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-07T04:02:18.503

您指定的符号有两件事：

```
./foo & 
```

在后台运行程序`foo`（除了命令名之外没有其他参数）。然后：

```
(ls ~/path) 
```

`ls`在子 shell 中运行命令（在此上下文中，与在主 shell 中运行命令相同）。问题是您打算（或需要）使用`$`.`&`

```
./foo $(ls ~/path) 
```

这将运行命令并捕获输出，该输出被拆分为单词（使用变量`ls ~/path`中列出的分隔符​​）。`$IFS`然后根据需要将每个单词作为参数提供给 command `./foo`。

然后我们可以讨论使用这样的输出是否明智`ls`，但除非您的文件名包含空格（制表符、换行符等），否则您会没事的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-07T05:25:51.980

您知道 Unix 工具如何接受 glob 模式，因此您可以执行`cat *.txt`or `rm ~/Pictures/Vacation*.jpg`，而无需管道/扩展`ls`？

这是你的 shell 为你的程序免费提供的一种能力！

只需使用`./foo ~/path/*`and `argv[1]`will contain `/home/you/path/fileone`，`argv[2]`will contain`/home/you/path/filetwo`等等。

这些文件名可能是相对的或绝对的，但始终可以直接传递给`open`//`fopen`或`execve`您要使用的任何函数。

按照你的描述使用`ls`只会给你文件名的最后一部分，没有目录，所以你不知道文件在哪里对它们做任何事情（尽管如果这是你想要的，只需使用`basename(argv[1]))`.

# ios - 如何找到数组中最接近给定位置的 CCSprite？

> ID：14743218
> 
> 赞同：1
> 
> 时间：2013-02-07T03:52:25.327
> 
> 标签：ios, objective-c, arrays, cocos2d-iphone, sprite

我一直在尝试为我的 Enemy 类创建 AI，但在更新最接近 Player 的 Enemy 时遇到问题。它在只有两个敌人但有 3 个或更多敌人时才有效。我只想要最近的攻击，但除​​了最远的敌人之外的所有敌人。我认为这是因为三个或更多的精灵可以在其他精灵之间使他的位置安全位置和攻击位置，但是当任何临时敌人在他们面前时，我如何让中间的敌人意识到呢？

```
 CCArray *fellowEnemy = [self allyArray];
for (int i = 0; i<[fellowEnemy count]; i++) {
    Enemy *tempEnemy = [fellowEnemy objectAtIndex:i];
    if (tempEnemy == self) continue;
    CGPoint tempDifference = ccpSub(player.position, tempEnemy.position);
    CGPoint selfDifference = ccpSub(player.position, self.position);
    float tempToPlayer = ccpLength(tempDifference);
    float selfToPlayer = ccpLength(selfDifference);

    if (tempToPlayer > selfToPlayer) {
        newPosition = attackPosition;

    }else if (tempToPlayer < selfToPlayer){
        newPosition = safePosition;

    }else{
        newPosition = safePosition;
    }
}

[self setPosition:newPosition]; 
```

谢谢你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T20:39:10.030

如果我正确理解了您的问题，那么您正在尝试确定离玩家最近的敌人。中间的那个永远是最接近玩家的。所以你只需要找出与玩家距离最小的那个。

```
 CCArray *fellowEnemy = [self allyArray];
    if( fellowEnemy.count > 0 )
    {
        Enemy *closestEnemy = nil;
        float minDistance = 0;

        for (int i = 0; i<[fellowEnemy count]; i++) {
            Enemy *tempEnemy = [fellowEnemy objectAtIndex:i];
            if (tempEnemy == self) continue;

            if( closestEnemy == nil )
            {
                closestEnemy = tempEnemy;
                minDistance = ccpDistance(player.position, closestEnemy.position);
                continue;
            }

            float curDistance = ccpDistance(player.position, tempEnemy.position);
            if( curDistance < minDistance )
            {
                minDistance = curDistance;
                closestEnemy = tempEnemy;
            }
        }

        if( closestEnemy != nil )
        {
            // Here you have closest enemy 
            // Write your remaining logic (position, attack... whatever)
        }
    } 
```

# sed - sed -e '/pattern/ {d;n}'

> ID：14743219
> 
> 赞同：0
> 
> 时间：2013-02-07T03:52:26.413
> 
> 标签：sed

sed -e '/pattern/ {d;n}'

sed -e '/模式/ {d}'

这两个命令在 Linux 上是否相同？把 n 放在最后有意义吗？

从“man sed”，我得到：

> n N 读取/追加下一行输入到模式空间。

实际上，我读到了这一行（u-boot helper.mk）：

> ```
> sed -n -e '/.*\.u_boot_list[^ ]\+/ ! {d;n}' \
>       -e 's/.*\(\.u_boot_list[^ ]\+\).*$$$$/\1/' \
>       -e 's/\.[^\.]\+$$$$//' \
>       -e ':s /^.\+$$$$/ { p;s/^\(.*\)\.[^\.]*$$$$/\1/;b s }' 
> ```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T04:16:42.537

这两个命令的存在是为了服务于两个不同（虽然看起来相似）的目的。但是，在您的情况下，“n”是多余的。记起：

“n”命令将打印出当前模式空间（除非使用“-n”标志），清空当前模式空间，并读入下一行输入。

“d”命令删除当前模式空间，读入下一行，将新行放入模式空间，中止当前命令，并在第一个 sed 命令处开始执行。这被称为开始一个新的“循环”。

这份简报取自[grymoire 网站](http://www.grymoire.com/Unix/Sed.html)。[您可以在此处](http://www.grymoire.com/Unix/Sed.html#uh-51)阅读有关使用多行的更多信息。

# android - Android 偏好设置文本大小

> ID：14743223
> 
> 赞同：0
> 
> 时间：2013-02-07T03:52:48.463
> 
> 标签：android, android-preferences

我正在使用来自：[https ://stackoverflow.com/a/10608622/1261256 的时间选择器类](https://stackoverflow.com/a/10608622/1261256)

在偏好屏幕上，除了与上述时间选择器类相关的“时间”之外，我还有几个选项（例如铃声）。

但是，“时间”的文本大于其他首选项的文本。我怎样才能使它统一？

这是 settings.xml：

```
<PreferenceScreen xmlns:android="http://schemas.android.com/apk/res/android" >

<CheckBoxPreference
    android:defaultValue="true"
    android:key="notification" />

<com.xxxx.TimePreference
    android:key="notification_time"
    android:dependency="notification"
    android:title="@string/pref_notification_time" />

<RingtonePreference
    android:defaultValue="content://settings/system/notification_sound"
    android:dependency="notification"
    android:key="notification_ringtone"
    android:ringtoneType="notification"
    android:title="@string/pref_title_ringtone" />

</PreferenceScreen> 
```

上面的 xml 文件使用以下方法添加：

```
addPreferencesFromResource(R.xml.settings); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T09:47:59.970

我也遇到了这个。

该类`TimePreference`在其 2 参数构造函数中`0`为第三个参数调用 3 参数构造函数，该参数使用默认样式。由于这是一个 Preference 类，它应该将其`android.R.attr.preferenceStyle`作为第三个参数调用以使用首选项样式。对代码进行更改，使两个参数的构造函数如下所示：

```
 public TimePreference(Context ctxt, AttributeSet attrs) {
            this(ctxt, attrs, android.R.attr.preferenceStyle);
    } 
```

# ruby-on-rails - 无法让 Array 的计数方法与块一起使用

> ID：14743225
> 
> 赞同：1
> 
> 时间：2013-02-07T03:52:58.887
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

我有一个包含`TeamSeason`模型类的 Rails 应用程序。该类`has_one`与`Team`模型类有关联，并`has_many`与另一个`TeamSeason`称为`opponents`. 我现在正在尝试编写一个传入 a`Team`并确定它的任何对手是否与它相关联的方法`Team`。我写的方法是这样的：

```
def plays?(against_team)
  total = opponents.count {|opponent| opponent.team == against_team}
  return (total > 0)
end 
```

该`count`方法应该计算在我指定的块中产生真值的数组元素的数量。但是，它似乎总是返回数组的全长。就好像我指定的块总是产生一个真实的值，无论如何。

我添加了各种`puts`调用来尝试找出我的逻辑出错的地方。以下是我的观察：

*   `puts`当我在 count 方法旁边的块内添加任何调用时，我看不到这些语句的任何输出。似乎该块的内容从未被执行

*   当我使用对手数组的方法和一个块插入一个额外的循环时`each`，我可以打印我的数组对象的值并确认它们是按预期计算的。我什至可以`puts`评估`opponent.team == against_team`并验证我编写的块在`false`某些时候评估，因为它应该。

我在这里想念什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-07T04:03:40.753

`opponents`不是标准的 ruby​​ 数组 - 它是 ActiveRecord 关联代理，并且对于某些方法表现不同。 `count`将查询数据库中对手的数量，并且您正在传递的块将不会被评估。一种更简单的方法来做你想做的事情是这样的：

```
def plays?(against_team)
  opponents.joins(:team).where(teams: {id: against_team.id}).exists?
end 
```

这将询问数据库您想要什么，并避免在您仅检查特定比赛时加载所有对手。或者，您可以加载整个对手列表并使用`any?`：

```
def plays?(against_team)
  opponents.any?{|opponent| opponent.team == against_team.id}
end 
```

请注意，这不仅会加载所有对手，还会一次加载每个对手的团队 - 导致 N+1 查询（这会导致性能问题）。您可以通过使用以下方法预先加载相关团队来避免这种情况`includes()`：

```
opponents.includes(:team).any?{...} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T04:02:36.273

您正在尝试的功能可以使用[`include?`](http://www.ruby-doc.org/core-1.9.3/Array.html#method-i-include-3F "`包括？`")方法来实现。

尝试：

```
def plays?(against_team)
  opponents.collect(&:team).include?(against_team)
end 
```

# mysql - mysql查询路径/半径

> ID：14743226
> 
> 赞同：0
> 
> 时间：2013-02-07T03:52:59.873
> 
> 标签：mysql, sql

我有 2 张桌子：`city`和`city_neighbor`.

`city`包含所有城市的列表，同时`city_neighbor`包含给定城市的邻居：`insert into city_neighbor (city_id, neighbor_id) Values(1,2)`- 其中 neighbor_id 是`city`表中另一个城市的 id。没什么太花哨的。

我必须建立一个页面，用户可以在其中选择给定半径内的所有城市。例如：选择半径为 5 个城市的所有邻近芝加哥的城市。重要提示：它是 5 个城市的半径。我不能使用英里/公里的半径，我需要使用这种半径的路径样式（请不要与纬度/经度相关的回复）。

第二个场景：用户想要选择所有按跳跃次数升序排列的城市（其中一个跳跃是一个城市，为了从 A（芝加哥）到 B 必须经过一个城市）。

有任何想法吗？

PS 我的数据库包含约 8,000 个城市。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-07T06:23:26.107

```
FUNCTION: CountNeighbors
IMPORT: city, depth
EXPORT: neighbors
ALGORITHM:
   neighbors = SET
   ++depth
   direct_neighbors = SELECT NEIGHBORS OF city
   neighbors += direct_neighbors
   IF depth < 5
       FOR EACH neighbor IN direct_neighbors
           neighbors += CountNeighbors(neighbor, depth, result) 
```

# c# - ModalPopupExtender ASP MessageBox 未关闭

> ID：14743229
> 
> 赞同：0
> 
> 时间：2013-02-07T03:53:18.520
> 
> 标签：c#, asp.net

我想要一个弹出消息框，它会显示类似“完成！”的内容。当我的gridview中的行成功删除时，如果出现错误，还有其他内容。我使用了 ModalPopupExtender。模态弹出窗口显示正常，但即使我单击“确定”按钮，它也只会保留在页面上。这是我的代码：

ASP：

```
<!--ModalPopup for "Done" message-->
<asp:ModalPopupExtender ID="ModalPopupExtDone" runat="server" PopupControlID="donePanel" TargetControlID="donePanel" CancelControlID="donePanelBtn">
</asp:ModalPopupExtender>
<div class="panel">
    <asp:Panel ID="donePanel" runat="server" Width="200px" Height="41px" 
            BackColor="#FF9900">
        <asp:Label ID="donePanelLabel" runat="server" ForeColor="#FF3300"></asp:Label>
        <br />
        <asp:Button ID="donePanelBtn" runat="server" Text="OK" 
                onclick="donePanelBtn_Click"  />
    </asp:Panel>
</div> 
```

代码背后：

```
protected void GridViewDept_RowDeleting(object sender, GridViewDeleteEventArgs e)
{
    //some other code
    if (delSuccess)
    {
        donePanelLabel.Text = "Record deleted!";
        ModalPopupExtDone.Show();
        this.RefreshGridView();
    }
    else
    {
        donePanelLabel.Text = "Record not deleted! Please try again!";
        ModalPopupExtDone.Show();
    }
} 
```

我究竟做错了什么？

# javascript - 我怎样才能通过使用 HTML、CSS 和 JavaScript 来实现这样的效果（见内部）？

> ID：14743235
> 
> 赞同：-1
> 
> 时间：2013-02-07T03:53:49.337
> 
> 标签：javascript, html, css, blur

我现在有了答案。请投票关闭此问题。非常感谢你。

就像您在 Google Chrome 设置中单击清除浏览数据一样。后面的屏幕是模糊的，然后出现清除浏览数据窗口。除非您关闭清除浏览数据，否则您无法返回现在模糊的设置。我不知道这个效果叫什么，也不知道怎么做。

![在此处输入图像描述](../Images/c4448c636987ea2e06269fdfc406779d.png)

请告知或提供参考。

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T03:58:36.057

如果浏览器支持，您可以使用 css3 过滤器：

```
div {
  -webkit-filter: blur(2px);
} 
```

对于对话框，请查找“模态对话框”。然后，您可以根据对话框是打开还是关闭来切换 css 类。

**模糊演示：http:** [//jsbin.com/atisiz/1/edit](http://jsbin.com/atisiz/1/edit)

# c# - VSTO 合并为 PDF

> ID：14743236
> 
> 赞同：1
> 
> 时间：2013-02-07T03:53:51.607
> 
> 标签：c#, vsto, office-interop, office-2007

我有一个 VSTO Word 插件，它执行邮件合并到 pdf，它必须为每条记录生成一个 pdf，每条记录都有自己的名称。

我的代码工作正常，但生成每个 PDF 需要花费大量时间，并且会显示一些不希望的视觉效果。

还有另一种方法可以执行此任务吗？

这是我的代码：

```
public void Mezclar(Word.Document Doc)
{
    decimal nRecords = Doc.MailMerge.DataSource.RecordCount;
    for (int i = 1; i <= nRecords; i++)
    {
        Doc.MailMerge.DataSource.FirstRecord = i;
        Doc.MailMerge.DataSource.LastRecord = i;
        Doc.MailMerge.Destination = Word.WdMailMergeDestination.wdSendToNewDocument;
        Doc.MailMerge.Execute();
        Word.Document DocMezcla = this.Application.ActiveDocument;
        DocMezcla.SaveAs("d:\\clientes\\Pruebas" + i.ToString().Trim() + ".pdf", Word.WdSaveFormat.wdFormatPDF);
        DocMezcla.Close(Microsoft.Office.Interop.Word.WdSaveOptions.wdDoNotSaveChanges, null, null);
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T01:55:42.227

依靠 vsto 进行 pdf 转换可能会很痛苦，而且您无法为视觉做任何事情。我建议查看第三方工具，例如 Easy pdf sdk 或 ASPOSE

# c++ - C++ 保存指向模板对象的指针集合，所有这些都派生自非模板类

> ID：14743239
> 
> 赞同：0
> 
> 时间：2013-02-07T03:54:07.217
> 
> 标签：c++, generics, inheritance, collections, generic-collections

我有一个对象“标识符”列表（一个长枚举列表，每个“标识符”都有一个唯一值）：

```
enum Identifier {
  Enum0,  // an identifier for a bool value
  Enum1,  //  ... for a float value
  Enum2,  //  ... for an int value
  // etc.
}; 
```

我希望维护与这些标识符关联的 Value 对象的集合。这些 Value 对象包含单个值，但该值可能是整数、浮点数、布尔值或其他一些（简单）类型。这是在管理系统中的一组配置值的上下文中。稍后我计划扩展这些值类型以支持内部值的验证，并将一些值与其他值相关联。

但是我希望为这些值类使用模板，因为我想一般地对这些值编写操作。如果我要使用继承，我将拥有 BaseValue，然后从 BaseValue 派生 IntValue、FloatValue 等。相反，我有价值、价值等。

但我也想在单个集合中存储对这些值中的每一个的访问机制。我希望一个类实例化所有这些并将它们维护在集合中。如果我使用继承，我可以使用指向 BaseValue 的指针向量。但是因为我使用的是模板，所以这些类之间并没有多态相关。

所以我考虑让它们基于一个**没有**参数化的（空的？）抽象基类：

```
class BaseParameter {
};

template<typename T>
class Parameter : public BaseParameter {
 public:
  explicit Parameter(T val) : val_(val) {}
  void set(ParameterSource src) { val_ = extract<T>(src); }
  T get() { return val_; };
 private:
  T val_;
}; 
```

请注意，“set”成员函数采用“ParameterSource”，它是由特定“to_type”函数“重新解释”的值的来源。这是我无法控制的 API 函数 - 我必须自己解释类型，因为我知道类型的含义，设置如下。这就是 extract 的作用——它专门用于各种 T 类型，如 float、int、bool。

然后我可以像这样将它们添加到 std::vector 中：

```
std::vector<BaseParameter *> vec(10);
vec[Enum0] = new Parameter<bool>(true);   // this is where I state that it's a 'bool'
vec[Enum1] = new Parameter<float>(0.5);   //  ... or a float ...
vec[Enum2] = new Parameter<int>(42);      //  ... or an int ... 
```

我知道我可能应该使用 unique_ptr 但现在我只是想让它工作。到目前为止，这似乎工作正常。但我对此持谨慎态度，因为我不确定实例化模板的完整类型是否会在运行时保留。

稍后我想通过任意枚举值索引“vec”，检索参数并在其上调用成员函数：

```
void set_via_source(Identifier id, ParameterSource source) {
  // if id is in range...
  vec[id]->set(source);
} 
```

使用这些配置值（因此知道类型）的其他代码可以通过以下方式访问它们：

```
int foo = vec[Enum2]->get() * 7; 
```

在大多数情况下，这似乎奏效了。它编译。我遇到了一些我无法解释的奇怪崩溃，这也往往会使调试器崩溃。但我对此非常怀疑，因为我不知道 C++ 是否能够确定指向对象的真实类型（包括参数化类型），因为基类本身没有参数化。

不幸的是，在我看来，如果我参数化基类，那么我基本上消除了这些值类之间的共性，这些类允许它们存储在单个容器中。

我看了一下 boost::any 看看是否有帮助，但我不确定它是否适用于这种情况。

在更高的层次上，我想做的是连接来自外部源（通过 API）的大量配置项，这些配置项根据项目提供不同类型的值，并将它们存储在本地，以便我的其余部分代码可以轻松地访问它们，就好像它们是简单的数据成员一样。我还想避免编写一个巨大的 switch 语句（因为这样会起作用）。

这是 Type Erasure 可以帮助我解决的问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T06:34:33.317

如果您在编译时知道与每个枚举关联的类型，则可以“轻松”地执行此操作，无论是否使用`boost::variant`类型擦除甚至继承。（**编辑**：第一个解决方案使用了很多 C++11 功能。我在最后放置了一个不太自动化但符合 C++03 的解决方案。）

```
#include <string>
#include <vector>
#include <boost/variant.hpp>
#include <boost/variant/get.hpp>

// Here's how you define your enums, and what they represent:
enum class ParameterId {
  is_elephant = 0,
  caloric_intake,
  legs,
  name,
  // ...
  count_
};
template<ParameterId> struct ConfigTraits;

// Definition of type of each enum
template<> struct ConfigTraits<ParameterId::is_elephant> {
  using type = bool;
};
template<> struct ConfigTraits<ParameterId::caloric_intake> {
  using type = double;
};
template<> struct ConfigTraits<ParameterId::legs> {
  using type = int;
};
template<> struct ConfigTraits<ParameterId::name> {
  using type = std::string;
};
// ...

// Here's the stuff that makes it work.

class Parameters {
  private:
    // Quick and dirty uniquifier, just to show that it's possible
    template<typename...T> struct TypeList {
      using variant = boost::variant<T...>;
    };

    template<typename TL, typename T> struct TypeListHas;
    template<typename Head, typename...Rest, typename T>
    struct TypeListHas<TypeList<Head, Rest...>, T>
        : TypeListHas<TypeList<Rest...>, T> {
    };
    template<typename Head, typename...Rest>
    struct TypeListHas<TypeList<Head, Rest...>, Head> {
      static const bool value = true;
    };
    template<typename T> struct TypeListHas<TypeList<>, T> {
      static const bool value = false;
    };

    template<typename TL, typename T, bool B> struct TypeListMaybeAdd;
    template<typename TL, typename T> struct TypeListMaybeAdd<TL, T, false> {
      using type = TL;
    };
    template<typename...Ts, typename T>
    struct TypeListMaybeAdd<TypeList<Ts...>, T, true> {
      using type = TypeList<Ts..., T>;
    };
    template<typename TL, typename T> struct TypeListAdd
        : TypeListMaybeAdd<TL, T, !TypeListHas<TL, T>::value> {
    };

    template<typename TL, int I> struct CollectTypes
        : CollectTypes<typename TypeListAdd<TL,
                                            typename ConfigTraits<ParameterId(I)>::type
                                           >::type, I - 1> {
    };
    template<typename TL> struct CollectTypes<TL, 0> {
      using type = typename TypeListAdd<TL,
                                        typename ConfigTraits<ParameterId(0)>::type
                                       >::type::variant;
    };

  public:
    using value_type =
        typename CollectTypes<TypeList<>, int(ParameterId::count_) - 1>::type;

    template<ParameterId pid>
    using param_type = typename ConfigTraits<pid>::type;

    // It would be better to not initialize all the values twice, but this
    // was easier.
    Parameters() : values_(size_t(ParameterId::count_)) {
       clear(std::integral_constant<int, int(ParameterId::count_) - 1>());
    }

    // getter for when you know the id at compile time. Should have better
    // error checking.
    template<ParameterId pid>
    typename ConfigTraits<pid>::type get() {
      // The following will segfault if the value has the wrong type.
      return *boost::get<typename ConfigTraits<pid>::type>(&values_[int(pid)]);
    }

    // setter when you know the id at compile time
    template<ParameterId pid>
    void set(typename ConfigTraits<pid>::type new_val) {
      values_[int(pid)] = new_val;
    }

    // getter for an id known only at runtime; returns a boost::variant;
    value_type get(ParameterId pid) {
      return values_[int(pid)];
    }

  private:
    // Initialize parameters to default values of the correct type
    template<int I> void clear(std::integral_constant<int, I>) {
       values_[I] = param_type<ParameterId(I)>();
       clear(std::integral_constant<int, I - 1>());
    }
    void clear(std::integral_constant<int, 0>) {
      values_[0] = param_type<ParameterId(0)>();
    }

    std::vector<value_type> values_;
};

// And finally, a little test
#include <iostream>
int main() {
  Parameters parms;
  std::cout << ('(' + parms.get<ParameterId::name>() + ')')<< ' '
            << parms.get<ParameterId::is_elephant>() << ' '
            << parms.get<ParameterId::caloric_intake>() << ' '
            << parms.get<ParameterId::legs>() << std::endl;
  parms.set<ParameterId::is_elephant>(true);
  parms.set<ParameterId::caloric_intake>(27183.25);
  parms.set<ParameterId::legs>(4);
  parms.set<ParameterId::name>("jumbo");
  std::cout << ('(' + parms.get<ParameterId::name>() + ')')<< ' '
            << parms.get<ParameterId::is_elephant>() << ' '
            << parms.get<ParameterId::caloric_intake>() << ' '
            << parms.get<ParameterId::legs>() << std::endl;

  return 0;
} 
```

* * *

为了那些还不能使用 C++11 的人的利益，这里有一个使用非类枚举的版本，它不够聪明，无法`boost::variant`自行构建类型，所以你必须手动提供它：

```
#include <string>
#include <vector>
#include <boost/variant.hpp>
#include <boost/variant/get.hpp>

// Here's how you define your enums, and what they represent:
struct ParameterId {
  enum Id {
    is_elephant = 0,
    caloric_intake,
    legs,
    name,
    // ...
    count_
  };
};
template<int> struct ConfigTraits;

// Definition of type of each enum
template<> struct ConfigTraits<ParameterId::is_elephant> {
  typedef bool type;
};
template<> struct ConfigTraits<ParameterId::caloric_intake> {
  typedef double type;
};
template<> struct ConfigTraits<ParameterId::legs> {
  typedef int type;
};
template<> struct ConfigTraits<ParameterId::name> {
  typedef std::string type;
};
// ...

// Here's the stuff that makes it work.

// C++03 doesn't have integral_constant, so we need to roll our own:
template<int I> struct IntegralConstant { static const int value = I; };

template<typename VARIANT>
class Parameters {
  public:
    typedef VARIANT value_type;

    // It would be better to not initialize all the values twice, but this
    // was easier.
    Parameters() : values_(size_t(ParameterId::count_)) {
       clear(IntegralConstant<int(ParameterId::count_) - 1>());
    }

    // getter for when you know the id at compile time. Should have better
    // error checking.
    template<ParameterId::Id pid>
    typename ConfigTraits<pid>::type get() {
      // The following will segfault if the value has the wrong type.
      return *boost::get<typename ConfigTraits<pid>::type>(&values_[int(pid)]);
    }

    // setter when you know the id at compile time
    template<ParameterId::Id pid>
    void set(typename ConfigTraits<pid>::type new_val) {
      values_[int(pid)] = new_val;
    }

    // getter for an id known only at runtime; returns a boost::variant;
    value_type get(ParameterId::Id pid) {
      return values_[int(pid)];
    }

  private:
    // Initialize parameters to default values of the correct type
    template<int I> void clear(IntegralConstant<I>) {
      values_[I] = typename ConfigTraits<I>::type();
      clear(IntegralConstant<I - 1>());
    }
    void clear(IntegralConstant<0>) {
      values_[0] = typename ConfigTraits<0>::type();
    }

    std::vector<value_type> values_;
};

// And finally, a little test
#include <iostream>
int main() {
  Parameters<boost::variant<bool, int, double, std::string> > parms;
  std::cout << ('(' + parms.get<ParameterId::name>() + ')')<< ' '
            << parms.get<ParameterId::is_elephant>() << ' '
            << parms.get<ParameterId::caloric_intake>() << ' '
            << parms.get<ParameterId::legs>() << std::endl;
  parms.set<ParameterId::is_elephant>(true);
  parms.set<ParameterId::caloric_intake>(27183.25);
  parms.set<ParameterId::legs>(4);
  parms.set<ParameterId::name>("jumbo");
  std::cout << ('(' + parms.get<ParameterId::name>() + ')')<< ' '
            << parms.get<ParameterId::is_elephant>() << ' '
            << parms.get<ParameterId::caloric_intake>() << ' '
            << parms.get<ParameterId::legs>() << std::endl;

  return 0;
} 
```

# visual-c++ - Voip 示例应用程序错误 -> 应用程序无法正确启动 (0xc000007b)

> ID：14743257
> 
> 赞同：0
> 
> 时间：2013-02-07T03:56:40.333
> 
> 标签：visual-c++, voip

我正在将我的 32 位示例 Voip 应用程序升级到 64 位。升级我的应用程序 .exe 文件后出现问题：

> **应用程序无法正确启动 (0xc000007b)**

我的电脑是 64 位的。我用 64 位构建它

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T09:32:25.360

我意识到这对您来说可能已经晚了，但对于任何查看此问题的人来说，问题是您在启动时混合了 32 位和 64 位组件 (DLL)。由于您的应用程序是 64 位构建的，因此您可能仍有一些 32 位 DLL，系统尝试在进程中加载​​但失败（因为 32 位模块无法在 64 位进程中加载​​）。

# c - 语法错误：在 ';' 之前缺少 ']' C中的数组声明错误

> ID：14743263
> 
> 赞同：1
> 
> 时间：2013-02-07T03:57:06.137
> 
> 标签：c, arrays, array-initialization

我正在用 c 编写，使用 Visual c++。

编译器给我下面的代码错误：

```
#define SIZE 3;
int myMatrix[SIZE][SIZE];
void funcMatrix(int M[SIZE][SIZE]); 
```

我得到的错误：

```
error C2143: syntax error : missing ']' before ';' 
error C2059: syntax error : ']' 
```

我尝试过在 main 内部和外部以不同的方式声明常量。它仍然不起作用。如果有人可以帮助我，我将不胜感激...

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-07T03:59:27.880

你应该使用`#define SIZE 3`.

预处理器作为原始字符串替换工作，所以用`#define SIZE 3;`你`SIZE`的替换为`3;`你得到：

```
int myMatrix[3;][3;];
void funcMatrix(int M[3;][3;]); 
```

作为最终结果，因此错误。这是一个常见的错误，然后你习惯于放在`;`C 表达式的末尾。然而，[预处理器](http://en.wikipedia.org/wiki/C_preprocessor) `#define`-s 实际上不是 C 代码，而是在编译之前发生的一个简单（或不那么简单）的字符串处理操作。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-07T04:00:37.610

在这种情况下，您的代码`SIZE`将被定义替换，`3;`因此您将拥有

```
int myMatrix[3;][3;];
void funcMatrix(int M[3;][3;]); 
```

这会导致语法错误，因此请使用`#define SIZE 3`（不带`;`）而不是`#define SIZE 3;`.

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-07T04:01:11.870

A`#define NAME`从字面上插入 NAME 之后的任何值。

您的宏扩展为

```
int myMatrix[3;][3;]; 
```

删除`;`宏定义中的 。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-07T04:00:31.123

你改变：

```
#define SIZE 3; 
```

至

```
#define SIZE 3 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-07T04:00:31.783

您需要删除`;`.`#define SIZE 3`

`#define`s 不需要分号

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-02-07T04:02:13.957

`#define SIZE 3`不是`#define SIZE 3;`

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-02-07T04:39:05.867

您可以看到编译器看到的内容。如果您不注释掉包含的头文件可能会一团糟，而且我不知道如何在 Visual C++ 中执行此操作，但是使用 GCC 您可以运行

```
gcc -E xx.c > xx.e 
```

并且您会看到在处理#define 之后您的代码扩展为什么。也必须有某种方法可以用 Visual C++ 做到这一点。然后您仍然可以将 .e 文件编译为 c 代码。

# objective-c - 如何在目标c的另一个线程中显示uialertview

> ID：14743264
> 
> 赞同：2
> 
> 时间：2013-02-07T03:57:22.920
> 
> 标签：objective-c, multithreading, ios6

我创建了另一个线程，它的功能运行良好。但唯一的情况是在新线程中我们不能使用 UIControllers。例如，我不能在新线程中使用 UIAlerview。我怎么能爱它？我尝试过的代码如下。

```
- (IBAction)btnCopyImage:(id)sender
{
    [NSThread detachNewThreadSelector:@selector(DownloadCheck) toTarget:self withObject:nil];

   // [self performSelectorOnMainThread:@selector(DownloadCheck) withObject:nil waitUntilDone:NO];
    NSLog(@"My name is ");
    int sum =0;
    for (int i=1; i<=1000; i++)
    {
        sum =sum+i;
    }
    NSLog(@"sum %d",sum);

}

-(void)DownloadCheck
{
    [UIApplication sharedApplication].networkActivityIndicatorVisible = YES;

    NSString *documentsDirectory = [NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES) lastObject];
    NSString *path = [documentsDirectory stringByAppendingPathComponent:@"Download"];
    NSString* saveDialogURL = @"/Volumes/Inbox/7\. Debugging and Troubleshooting.zip";
    NSString* fileNameWithExtension = saveDialogURL.lastPathComponent;

    NSLog(@"path %@ ",fileNameWithExtension);

    NSString *pathWithExtention=[NSString stringWithFormat:@"%@/%@", path,fileNameWithExtension];
    NSLog(@"path %@",pathWithExtention);

    //Remove existing file
    NSFileManager *filemgr;
    filemgr = [NSFileManager defaultManager];
    NSError *error;
    [filemgr removeItemAtPath:pathWithExtention error:&error];

    //Copy file to i phone created directory
    if ([filemgr copyItemAtPath: saveDialogURL toPath: pathWithExtention error: NULL]  == YES)
    {
        UIAlertView *alertView = [[UIAlertView alloc] initWithTitle:@"Download"
                                                            message:@"Downloaded Sucessfully"
                                                           delegate:self
                                                  cancelButtonTitle:nil
                                                  otherButtonTitles:@"OK", nil];
        [alertView show];
        NSLog (@"Copy successful");

    }
    else
    {
        UIAlertView *alertView = [[UIAlertView alloc] initWithTitle:@"Error"
                                                            message:@"Download Faild"
                                                           delegate:self
                                                  cancelButtonTitle:nil
                                                  otherButtonTitles:@"OK", nil];
        [alertView show];
         NSLog (@"Copy Faild");
    }
    [UIApplication sharedApplication].networkActivityIndicatorVisible = NO;
} 
```

`[self performSelectorOnMainThread:@selector(DownloadCheck) withObject:nil waitUntilDone:NO];`这不能使用，因为它在同一个线程上工作。

那么我应该如何使用相同的代码呢？

# asp.net-mvc - 使用无障碍 JQuery 在局部视图中显示错误消息时面临问题

> ID：14743271
> 
> 赞同：2
> 
> 时间：2013-02-07T03:58:33.730
> 
> 标签：asp.net-mvc, asp.net-mvc-3, razor

以下是我在 MVC3 中的区域

![在此处输入图像描述](../Images/0af554e3e0273ce7fede8ce37e9f9c07.png)

**模型**

```
public class AdminModule
{
    [Display(Name = "My Name")]
    [Required]
    public String MyName { get; set; }
} 
```

**局部视图**

```
@model _1.Areas.Admin.Models.AdminModule
@using (Html.BeginForm(null, null, FormMethod.Post, new { id = "myForm" }))
{
    @Html.LabelFor(i => i.MyName)
    @Html.TextBoxFor(i => i.MyName)
    @Html.ValidationMessageFor(i => i.MyName)
    <p id="getDateTimeString">
    </p>
    <input type="submit" value="Click here" id="btn" />
}

<script language="javascript" type="text/javascript">
    $('#btn1').click(function () {
        debugger;
        var $form = $("#myForm");

        // Unbind existing validation
        $form.unbind();
        $form.data("validator", null);

        // Check document for changes
        $.validator.unobtrusive.parse(document);

        // Re add validation with changes
        $form.validate($form.data("unobtrusiveValidation").options);

        if ($(this).valid()) {
            var url = '@Url.Action("Index_partialPost", "Admin", 
                                                new { area = "Admin" })';
            $.post(url, null, function (data) {
                alert(data);
                $('#myForm').html(data);
            });
        }
        else

        return false;
    });
</script> 
```

**控制器动作**

```
[HttpPost]
public ActionResult Index_partialPost(AdminModule model)
{
    return PartialView("_PartialPage1", model);
} 

[HttpGet]
public ActionResult Index_partial()
{
    return PartialView("_PartialPage1");
} 
```

**每当我提交表格并将必填字段留空时。我想它去了服务器。我在这里检查...**

![在此处输入图像描述](../Images/bd4a902050b598beca5a4fb4f7194c14.png)

**我的困惑是**=> 如何修改下面提到的代码以使用 $.post 在客户端显示模型中提到的相同验证消息？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T07:43:31.960

您可以启用不显眼的客户端验证。首先添加以下脚本引用：

```
<script type="text/javascript" src="@Url.Content("~/scripts/jquery.validate.unobtrusive.js")"></script> 
```

进而：

```
@model _1.Areas.Admin.Models.AdminModule
@using (Html.BeginForm(null, null, FormMethod.Post, new { id = "myForm" }))
{
    @Html.LabelFor(i => i.MyName)
    @Html.TextBoxFor(i => i.MyName)
    @Html.ValidationMessageFor(i => i.MyName)
    <p id="getDateTimeString"></p>
    <input type="submit" value="Click here" />
}

<script type="text/javascript">
    $('#myForm').submit(function () {
        if ($(this).valid()) {
            $.post(this.action, $(this).serialize(), function(data) {
                $('#myForm').html(data);

                $('#myForm').removeData('validator');
                $('#myForm').removeData('unobtrusiveValidation');
                $.validator.unobtrusive.parse('#myForm');
            });
        }
        return false;
    });
</script> 
```

* * *

更新：

现在您通过电子邮件向我发送了您的实际代码，我发现它存在很多问题。与其经历所有这些，我更喜欢从头开始完全重写所有内容。

所以我们从`~/Areas/Admin/Views/Shared/_LayoutPage1.cshtml`：

```
<!DOCTYPE html>
<html>
<head>
    <title>@ViewBag.Title</title>
</head>
<body>
    <div>
        <ul>
            <li>@Html.ActionLink("Home", "Index", "Home", new { area = "" }, null)</li>
        </ul>
        @RenderBody()
    </div>
    <script src="/Scripts/jquery-1.4.1.min.js" type="text/javascript"></script>
    <script src="/Scripts/jquery.validate.js" type="text/javascript"></script>
    <script src="/Scripts/jquery.validate.unobtrusive.js" type="text/javascript"></script>
    @RenderSection("Scripts", required: false)
</body>
</html> 
```

请注意我如何将所有脚本移至文件底部，并添加了一个专门用于放置自定义脚本的部分。

接下来我们转到`~/Areas/Admin/Views/Admin/Index.cshtml`：

```
@model _1.Areas.Admin.Models.AdminModule
@{
    ViewBag.Title = "Index";
    Layout = "~/Areas/Admin/Views/Shared/_LayoutPage1.cshtml";
}

<div id="formContainer" data-url="@Url.Action("Index_partial", "Admin", new { area = "Admin" })"></div>
<input id="BTN" type="button" value="Button" />

@section Scripts {
    <script type="text/javascript" src="@Url.Content("~/areas/admin/scripts/myscript.js")"></script>
} 
```

在这里您可能会注意到，我已将按钮的类型从`submit`to替换为，`button`因为此按钮不包含在要提交的表单中。我还摆脱了`<p>`您使用的元素，`id="myForm"`它不仅没用，而且最终在 DOM 中出现了重复的 id，这是无效的标记。我还使用`data-url`容器 div 上的 HTML5 属性来指示将加载表单的服务器端脚本的 url。我在这个文件中做的最后一件事是`scripts`用自定义脚本覆盖我们之前在布局中定义的部分。

所以下一部分是自定义脚本`~/areas/admin/scripts/myscript.js`：

```
$('#BTN').click(function () {
    var $formContainer = $('#formContainer');
    var url = $formContainer.attr('data-url');
    $formContainer.load(url, function () {
        var $form = $('#myForm');
        $.validator.unobtrusive.parse($form);
        $form.submit(function () {
            var $form = $(this);
            if ($form.valid()) {
                $.post(this.action, $(this).serialize(), function (data) {
                    $form.html(data);
                    $form.removeData('validator');
                    $form.removeData('unobtrusiveValidation');
                    $.validator.unobtrusive.parse($form);
                });
            }
            return false;
        });
    });
    return false;
}); 
```

非常标准的代码在这里。我们订阅按钮的单击事件并使用 AJAX 调用加载部分。一旦完成，我们就会指示不显眼的验证框架将新添加的内容解析到我们的 DOM。下一步是通过订阅`.submit`事件来 AJAXify 表单。因为在`success`处理程序中我们再次替换了容器的内容，所以我们需要指示不显眼的验证框架来解析新内容。

最后是部分：

```
@model _1.Areas.Admin.Models.AdminModule

@using (Html.BeginForm("Index_partialPost", "Admin", FormMethod.Post, new { id = "myForm" }))
{
    @Html.LabelFor(i => i.MyName)
    @Html.TextBoxFor(i => i.MyName)
    @Html.ValidationMessageFor(i => i.MyName)
    <p id="getDateTimeString"></p>
    <input type="submit" value="Click here" />
} 
```

在这里你可以注意到我已经完全摆脱了任何 javascript 的痕迹。javascript 属于单独的文件。它与视图无关。你不应该混合标记和脚本。当您有单独的脚本时，不仅您的动态标记会小得多，而且您还可以利用浏览器缓存外部脚本、缩小等功能......在本部分中您会注意到的另一件事是我删除了`<script>`节点您在其中引用 jQuery 和 jQuery.validate 脚本。您已经在布局中这样做了，不要重复两次。

# internet-explorer - 如何摆脱“嵌套评论”。JSLint 抛出的错误？

> ID：14743275
> 
> 赞同：0
> 
> 时间：2013-02-07T03:58:53.057
> 
> 标签：internet-explorer, conditional, jslint

在以下示例中：

```
 <!--[if lt IE 9]>
    <script src="./js/lib/modernizr.custom.js"></script>
    <![endif]--> 
```

JSLint 在最后一行抛出一个错误，说“嵌套注释。”。我似乎无法在 Internet 上找到“修复”此问题的方法。有人有解决方案吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T07:50:34.713

在我看来，这似乎是 JSLint 中的一个错误（或者可能是一个疏忽）。处理 HTML 注释的代码如下：

```
// ...
case '<!--':
    length = line;
    for (;;) {
        i = source_row.indexOf('--');
        if (i >= 0) {
            break;
        }
        i = source_row.indexOf('<!'); // This line causes the problem
        if (i >= 0) {
            stop_at('nested_comment', line, character + i);
        }
        if (!next_line()) {
            stop_at('unclosed_comment', length, c);
        }
    }
    // ... 
```

基本上，当 JSLint 遇到打开的注释标记 ( `<!--`) 时，它会遍历源代码的行，直到遇到关闭的注释标记 ( `-->`，上面的代码片段中没有显示)。如果在该迭代期间它`<!`在注释的任何行的任何位置遇到字符串，它将引发您看到的“嵌套注释”错误。

不幸的是，除了不使用 JSLint 进行标记验证（我通常会推荐）之外，实际上并没有办法解决这个问题。我会看看我是否能找到一个很好的方法来修复它，然后提交一个补丁。

# javascript - JavaScript 插件帮助 - ContentFlow

> ID：14743277
> 
> 赞同：0
> 
> 时间：2013-02-07T03:59:03.933
> 
> 标签：javascript, contentflow

我最近下载了一个 JavaScript 插件（在这里找到：[http](http://www.jacksasylum.eu/ContentFlow/download.php) ://www.jacksasylum.eu/ContentFlow/download.php ），我正在尝试对其进行一些更改。到目前为止，我对代码所做的所有编辑都是通过阅读该站点上文档选项卡下的演练完成的。我已经搜索和搜索，我只能找到一段我认为可能是我需要更改的代码。我只是没有足够的 JavaScript 知识来做这件事。

如果您之前已经下载过该插件，或者您阅读了一些文档选项卡，那么这里是正在发生的事情的图片。

![在此处输入图像描述](../Images/1074c338ed05f3f3ac5c90ac5b1f7fa4.png)

图标分散得太远了。（忽略图标，我只使用 Facebook 和 Twitter，因为它们很简单。）我需要它们更接近。（它们分布在 960px 宽的 div 上！）

我发现这段代码可能是我正在寻找的。它被称为 StepWidth。我不知道这是否是我需要的。谁能给我填？

```
calcStepWidth: function(diff) {
        var vI = this.conf.visibleItems;
        var items = this.items.length;
        items = items == 0 ? 1 : items;
        if (Math.abs(diff) > vI) {
            if (diff > 0) {
                var stepwidth = diff - vI;
            } else {
                var stepwidth = diff + vI;
            }
        } else if (vI >= this.items.length) {
            var stepwidth = diff / items;
        } else {
            var stepwidth = diff * ( vI / items);
            //var stepwidth = diff/absDiff * Math.max(diff * diff,Math.min(absDiff,0.3)) * ( vI / this.items.length);
            //var stepwidth = this.flowSpeedFactor * diff / this.visibleItems;
            //var stepwidth = this.flowSpeedFactor * diff * ( this.visibleItems / this.items.length)
            //var stepwidth = this.flowSpeedFactor * diff / this._millisecondsPerStep * 2; // const. speed
        }
        return stepwidth; 
```

如果您有插件，这可能会更容易，但任何知识都会有所帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T20:20:59.633

首先，这不是一个 JQuery 插件。您的问题在于图像的大小和 contentFlow 容器的宽度。小图标展开以填充 960px 容器。您需要增加图像的大小和/或减少内容流的包含 div 的宽度。您可以使用 px 或 %。例如，在 contentflow 网站上，您可以看到主页右侧的图库有一个 div width:70%;。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-04-27T08:15:09.710

首先安装**ContentFlowAddOn_DEFAULT.js**，然后搜索“ *calcCoordinates: function (item)* ”你会发现：

* * *

```
calcCoordinates: function (item) {
            var rP = item.relativePosition;
            //var rPN = item.relativePositionNormed;
            var vI = this.conf.visibleItems; 

            var f = 1 - 1/Math.exp( Math.abs(rP)*0.75);
            var x =  item.side * vI/(vI+1)* f; 
            var y = 1;

            return {x: x, y: y};
        }, 
```

* * *

尝试将值最小化 0.75（即 0.3）或更小，直到达到您正在寻找的正确距离

# javascript - 显示成功消息不起作用

> ID：14743281
> 
> 赞同：0
> 
> 时间：2013-02-07T03:59:25.540
> 
> 标签：javascript

我有一个用 Javascript 编写的简单愿望清单脚本，可将项目添加到愿望清单中。该脚本成功地将项目添加到用户列表中，但我似乎无法显示成功消息。

我正在使用下面的代码来尝试显示成功消息。该脚本最初工作，然后突然停止工作。

```
function AddItem(ToDoItem) {
    if ((ToDoItem != null) && (ToDoItem != "undefined" )) {
        NumToDoItems++;
        SetCookie('PT_ToDoItem'+NumToDoItems, ToDoItem, exp);
        SetCookie('PT_NumToDoList',NumToDoItems, exp);
        $(window).humanMsg('Added '+ToDoItem+' to Wishlist');
    }
} 
```

你能看看代码并给我一些建议吗？

更多信息：

我的html：

```
<div class="add-to-wishlist">
<a href="javascript:AddItem('<?php print htmlentities($title, ENT_QUOTES); ?>')">
<img class="add-to-wishlist" src="/images/add-to-wishlist-button.gif" border="0" /></a>
</div> 
```

这是humanMsg。jQuery插件

```
(function($, window){

$.fn.humanMsg = function( message, options ) {
    return this.each(function(){
        var container = this == window || this == document ? document.body : this;
        !$.data(container, 'humanMsg') && $.data(container, 'humanMsg', new     $.humanMsg (container, message, options) );
    });
};

$.humanMsg = function( container, message, options ) {
    if (typeof message == 'object') {
    options = message;
    message = null;
}

var s = $.extend({}, $.humanMsg.defaults, options);

var $m,
    sizeContainer = container == document.body ? window : container;

$m = $('<div class="humanized-message '+s.addClass+'"/>')
.html(message || s.message)
.click(remove)
.appendTo(container);

$m.css({
    display: 'none',
    visibility: 'visible',
    top: ($(sizeContainer).height()-$m.innerHeight())/2,
    left: ($(sizeContainer).width()-$m.innerWidth())/2
})
.fadeIn(s.speed);

s.autoHide && setTimeout(remove, s.autoHide);   

function remove() {
    $m.fadeOut(s.speed, function(){
        $m.remove();
        $.removeData(container, 'humanMsg');
    });
}

};

$.humanMsg.defaults = {
message: 'no message was set',
autoHide: 3000,
addClass: '',
speed: 300
};

})(jQuery, this); 
```

查看错误控制台我有这个：

```
Uncaught TypeError: Property '$' of object [object Window] is not a function 
(anonymous function)
closing script tag manually 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T04:12:18.250

该错误表明 jQuery 尚未包含在脚本中。

# java - RCP 应用程序中不同元素的路径

> ID：14743285
> 
> 赞同：0
> 
> 时间：2013-02-07T03:59:55.903
> 
> 标签：java, eclipse, exception, eclipse-rcp

我正在使用 eclipse 创建一个 RCP 应用程序，但我无法加载图像，因为我不知道如何在生成的代码中找到它。我将尝试解释我的特定问题。

注意：该项目是一个游戏编辑器，它位于：http: [//chelder86.github.com/ArcadeTongame/](http://chelder86.github.com/ArcadeTongame/)

首先，这是项目结构：

![在此处输入图像描述](../Images/1ce2bdf510504f334bf5294a402211f5.png)

[下一个代码在 Eclipse 运行配置中更改工作工作区](https://stackoverflow.com/questions/2792870/java-cant-find-file-when-running-through-eclipse/2793322#2793322)后，在 Eclipse 中正确运行 RCP 应用程序。

```
package figures;

(...)

public class Sound extends ImageFigure {

  public Sound()  { 

      String picturePath = "src/figures/Sound48.png";
      // or String picturePath = "bin/figures/Sound48.png";

      Image image = new Image(null, picturePath);
      this.setImage(image); 
  }
} 
```

**但是当我创建产品并将其导出为 RCP 应用程序时它不起作用。我的意思是，RCP 应用程序可以工作，但它不会加载该图像。** 注意： build.properties 已检查图像。

我尝试了不同的组合，结果相同：java.io.FileNotFoundException，当我在 Eclipse 中运行它时：

```
package figures;
(...)

public class Sound extends ImageFigure {

  public Sound()  { 

      String picturePath = getClass().getResource("Sound48.png").getPath();
      // or String picturePath = this.getClass().getClassLoader().getResource("bin/figures/Sound48.png").getPath(); 
      // or String picturePath = this.getClass().getClassLoader().getResource("figures/Sound48.png").getHost(); 
      // or similars

      Image image = new Image(null, picturePath);
      this.setImage(image);
    }
} 
```

我怎样才能正确加载它？

谢谢你的帮助！:)

卡洛斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T06:55:55.593

尝试在“icons”文件夹旁边创建一个单独的“figures”文件夹。仅将图像文件放在那里，而不是 .java 文件。不要忘记将它添加到类路径和 build.properties。然后这样的事情应该工作：

```
InputStream in = getClass().getResourceAsStream("figures/Sound48.png");
Image image = new Image(Display.getDefault(), in); 
```

# cloud-foundry - 如何访问 Cloud Foundry 上的 ~/.vmc/crash 文件夹

> ID：14743288
> 
> 赞同：0
> 
> 时间：2013-02-07T04:00:09.777
> 
> 标签：cloud-foundry

CFoundry::AppStopped: 305: Operation not allowed on a stop app 有关详细信息，请参阅 ~/.vmc/crash

Noobie，所以我想知道如何访问这个文件夹......

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-07T06:15:12.573

这是一个文本文件，所以尝试：

```
cat ~/.vmc/crash 
```

# sql - 返回泛型类型的实体框架自定义 SQL 查询

> ID：14743290
> 
> 赞同：2
> 
> 时间：2013-02-07T04:00:25.027
> 
> 标签：sql, entity-framework, xtragrid

我正在尝试制作一个通用的报告系统，以便我可以动态地将报告添加到我的程序中，而不是每次我必须在报告中添加时发布一个新版本的程序。
目前，我有部分工作；
我的自定义报告 SQL 与报告名称一起存储在一个表中。报告名称用于用户单击的按钮，当他们单击按钮时，我希望 SQL 执行并绑定到 gridview，因此它尽可能通用。

这似乎是麻烦来的地方。获取 SQL 并执行它很好，但将其绑定到 gridview 似乎是不可能的，我只得到一列，称为 Column，它显示 1 行，值为 System.Object。

我认为问题是因为我从多个表中返回数据，即

```
SELECT c.CertificateName, e.EntityName, 
       ce.CertificateDate, ce.CertificateExpiry, ce.CertificateNumber 
FROM FCERTSTest.dbo.CertificateEntries ce 
INNER JOIN FCERTSTest.dbo.Certificates c 
ON c.CertificateID = ce.Certificate_ID 
INNER JOIN FCERTSTest.dbo.Entities e 
ON e.EntityID = ce.Entity_ID 
WHERE FirstNotificationSent = '1' 
```

我目前正在使用

```
using (DBContainer db = new DBContainer())
{
    grid.DataSource = db.Database.SqlQuery<dynamic>(SQLCommand).ToList();
} 
```

我尝试替换`dynamic`为`object`并遇到相同的问题...我知道最好的解决方案是拥有一个自定义类并替换`dynamic`为该自定义类，但随后我失去了通用性的好处，因为不同的报告可能不会返回相同的结果，我需要一个新的自定义类...

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-07T08:54:05.287

使用`SqlDataAdapter`和`DataSet`。EF 不适用于没有特殊类型的结果集的“动态查询”。

# php - 如何将大量变量传输到 PHP 脚本中的函数

> ID：14743291
> 
> 赞同：0
> 
> 时间：2013-02-07T04:00:27.167
> 
> 标签：php, variables

好的，我有 one.php 和 two.php，我在 two.php 上有一个函数，但我在 one.php 上有我的变量，将大量变量传输到 two.php 的最佳方法是什么？

我使用过`function($variable1, $variable2, $variable3)'`，但由于某种原因，它在我有 14 个或更多参数后停止工作。

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-07T04:01:33.683

您可以将变量放入数组中，然后将数组传递给函数。

```
$array = array("var1" => "", "var2" => "", "var3" => "");

function process($input) {
  $input['var1'];
  $input['var2'];
  $input['var3'];
}

process($array); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T04:05:00.313

您也可以将所有变量放在 one.php 中。只需在 two.php 中包含 one.php。所以变量将在 two.php 中可用，您可以使用它。

```
 <?php include("one.php"); ?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-07T04:16:14.617

您还可以将 php`func_get_args()`用于可变数量的参数 -

参考示例 -

```
<?php
function foo()
{
    $numargs = func_num_args();
    echo "Number of arguments: $numargs<br />\n";
    if ($numargs >= 2) {
        echo "Second argument is: " . func_get_arg(1) . "<br />\n";
    }
    $arg_list = func_get_args();
    for ($i = 0; $i < $numargs; $i++) {
        echo "Argument $i is: " . $arg_list[$i] . "<br />\n";
    }
}

foo(1, 2, 3);
?> 
```

来源 - [func-get-args](http://php.net/manual/en/function.func-get-args.php)

# c++ - Merge Sort C++ Compile Error

> ID：14743300
> 
> 赞同：2
> 
> 时间：2013-02-07T04:01:08.430
> 
> 标签：c++, compiler-errors, mergesort

I'm trying to implement a merge sort function and I'm getting a compiler error that says "no match for 'operator=' " It occurs on my recursive assignment of left_list = mergesort(left_list) and the same error in the following line using right_list.

It compiles correctly if I take out the assignment and just have mergesort(left_list) but then it doesn't sort correctly. I thought that the way I have it now should merge sort correctly, but given that it doesn't, either the error has something to do with those lines or it's elsewhere in the mergesort() or merge() function.

Any help would be appreciated.

```
void mergesort(vector<int> &data) {

vector<int> left_list;
vector<int> right_list;

if ( data.size() <= 1 ) {
    return;
}

// creates a middle point to separate into 2 sub lists
int middle =  ( data.size() / 2 );

// create a list of elements to the left of middle
for ( int i = 0; i < middle; i++ ) {
    left_list.push_back(data[i]);
}

// create a list of elements to the right of middle
for ( unsigned int i = middle; i < data.size(); i++ ) {
    right_list.push_back(data[i]);
}

// break down the sub lists until they are of size 1
left_list = mergesort(left_list);
right_list = mergesort(right_list);

// merge the sublists in the correct order
merge(left_list, right_list);

}

vector<int> merge(vector<int> &left, vector<int> &right) {

vector<int> result;

unsigned left_it = 0;
unsigned right_it = 0;

while( left_it < left.size() && right_it < right.size() ) {

    // the smaller value is put into the result vector
    if( left[left_it] < right[right_it] ) {

        result.push_back(left[left_it]);
        left_it++;
    }
    else
    {
        result.push_back( right[right_it] );
        right_it++;
    }
}

// Put the rest of the data from both vectors onto result
while( left_it < left.size() ) {

    result.push_back( left[left_it] );
    left_it++;
}

while( right_it < right.size() ) {

    result.push_back( right[right_it] );
    right_it++;
}

return result;

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T04:09:22.193

You have code that is trying to accept a return value from the `mergesort` function. If that is what you want, my original answer addresses that. However, if `mergesort` is supposed to update the input parameter with the sorted result, then it need not return any value, and `void` is fine. Then, the assignment statements getting its return result is in error and should be changed.

```
mergesort(left_list);
mergesort(right_list); 
```

However, the call to `merge` needs to assign the result to the input parameter.

```
data = merge(left_list, right_list); 
```

My original answer follows:

You should change your `mergesort` function to return the same type that `merge` returns.

```
vector<int> mergesort(vector<int> &data) { 
```

You then need to update the `mergesort` implementation so that the first `return` statement returns the input parameter:

```
return data; 
```

The last statement should be changed to return the result:

```
return merge(left_list, right_list); 
```

I haven't looked at the implementation of the algorithm itself.

# ios - 在很长的 UITextField 中执行全选时，iOS 应用程序崩溃

> ID：14743302
> 
> 赞同：2
> 
> 时间：2013-02-07T04:01:17.467
> 
> 标签：ios, crash, uitextfield

我有一个`UItextField`显示很长的字符串。

我尝试在此文本字段中“全选”（触摸屏幕然后选择“全选”）文本，应用程序崩溃。

在调试视图中，我看到：

`-[NSNull dominantLanguageForScript:]:`无法识别的选择器发送到`instance 0x3d571080`

我不知道如何解决这个问题。

有没有人有任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T04:12:07.113

乍一看，这似乎与文本字段中的文本量无关（但可能是间接相关）。

似乎您正在尝试`dominantLanguageForScript:`在对象上调用该方法。您期望（我认为）该对象是 NSOrthography 类的一个实例。但实际上，无论出于何种原因，它都是 NSNull 的一个实例。也许您将 NSOrthography 的实例存储在字典或数组中，但它没有按您的预期存储？

# joomla - jomsocial 2.8.2 版中的错误

> ID：14743304
> 
> 赞同：-1
> 
> 时间：2013-02-07T04:01:25.087
> 
> 标签：joomla, joomla2.5, joomla-extensions

我对我刚才注意到的 jomsocial 有一个问题，那就是当我们在 jomsocial 中创建任何讨论主题时，任何人都可以在不登录的情况下删除或编辑它，甚至他不是那个的管理员团体。我真的不知道为什么会这样。有谁知道它的修复？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T05:26:29.550

我已经解决了这个问题，因为关于我的 acl 存在问题，我授予公共和注册成员可以编辑和删除任何内容的权限。

# php - 单击文本字段时，JQuery UI Timepicker 未打开

> ID：14743305
> 
> 赞同：0
> 
> 时间：2013-02-07T04:01:24.993
> 
> 标签：php, jquery

我有一个关于 JQuery UI Timepicker 的问题。我有多个文本字段。

```
<input type="text" style="width: 31px;" id="timepicker.[1]" name="mon1" readonly="true"/>
<input type="text" style="width: 31px;" id="timepicker.[2]" name="mon2" readonly="true"/>
<input type="text" style="width: 31px;" id="timepicker.[3]" name="mon3" readonly="true"/> 
```

我已经使用它调用了 jquery 函数。

```
$('#timepicker\\.\\[1\\]').timepicker();
$('#timepicker\\.\\[2\\]').timepicker();
$('#timepicker\\.\\[3\\]').timepicker(); 
```

他们在工作。当我单击第一个文本字段时，时间选择器出现。第二个时间选择器也有同样的行为。但是当我点击第三个文本字段时，它不会出现。我必须先在文本字段外单击，然后再次单击第三个文本字段，然后时间选择器出现。其余的文本字段也是如此（我有很多文本字段）。有什么问题，我可以知道如何解决吗？

谢谢各位，赞一个。。。。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T04:02:43.330

像这样试试

```
$("input[id^=timepicker]").timepicker(); 
```

# c# - 投射 WCF e.result 和 Generic 类

> ID：14743308
> 
> 赞同：0
> 
> 时间：2013-02-07T04:01:41.250
> 
> 标签：c#, wcf, silverlight-4.0

我的 wcf 服务中有实体类，并且将返回一个方法`List<MainClass>`。

在silverlight 应用程序e.Result 中消费服务时需要访问ForthClass。如何投射 e.result ？

```
public class MainClass
{
    public List<SecondClass> SecondClassList { get; set; }
}

public class SecondClass
{
    public List<ThirdClass> ThirdClassList { get; set; }
}

public class ThirdClass
{
    public string Name { get; set; }
} 
```

UI 服务调用：

```
ServiceClient.getNameCompleted += (s, e) =>
{
    ObservableCollection<ThirdClass> test = ((ThirdClass)e.Result[0].SecondClassList).ThirdClassList ;
}; 
```

# c# - 如何更改 TextWriter 对象中的编码？

> ID：14743310
> 
> 赞同：7
> 
> 时间：2013-02-07T04:01:47.313
> 
> 标签：c#, xml, encoding, utf-8, linq-to-xml

我有 xml，我通过 API 在另一个资源中发送。我通过 XDocument 创建它：

```
XDocument xDoc = new XDocument(
    new XDeclaration("1.0", "utf-8", "yes"),
    new XElement("Entity",new XAttribute("Type", "attribute1"),
        new XElement("Fields",... 
```

当我将其放入请求中时，它已在未声明的情况下发送。所以我接下来做：

```
StringBuilder builder = new StringBuilder();
TextWriter writer = new StringWriter(builder);

using (writer)
{
    xDoc.Save(writer);
} 
```

但是现在 TextWriter 将 xml 中的编码更改为 utf-16。我需要在 utf-8 上再次更改它。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-02-07T04:32:55.333

这看起来很奇怪，但`StringWriter`如果你想输出到`string`xml 中的 utf-8 编码，你似乎必须进行子类化。

```
public class Program
{
    public static void Main(string[] args)
    {
        XDocument xDoc = new XDocument(
            new XDeclaration("1.0", "utf-8", "yes"),
            new XElement("Entity",new XAttribute("Type", "attribute1")));

        StringBuilder builder = new StringBuilder();
        using (TextWriter writer = new EncodingStringWriter(builder, Encoding.UTF8))
        {
            xDoc.Save(writer);
        }

        Console.WriteLine(builder.ToString());
    }
}

public class EncodingStringWriter : StringWriter
{
    private readonly Encoding _encoding;

    public EncodingStringWriter(StringBuilder builder, Encoding encoding) : base(builder)
    {
        _encoding = encoding;
    }

    public override Encoding Encoding
    {
        get { return _encoding;  }                
    }
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-07T04:06:22.910

尝试

```
TextWriter ws = new StreamWriter(path, true, Encoding.UTF8); 
```

或者

```
TextWriter ws = new StreamWriter(stream, Encoding.UTF8); 
```

# c++ - 将数组传递给函数，但如果它不返回 true 我想传递一个额外的数字？

> ID：14743311
> 
> 赞同：0
> 
> 时间：2013-02-07T04:01:52.420
> 
> 标签：c++

所以对于我的代码，我想将一个参数传递给一个函数，如果它不返回 true，我希望它传递 int 数组中的下一个索引数字。

所以如果 areaIntA[0] = 0; 不返回 true，我希望它通过 areaIntA[0][1] = 01; 如果不返回 true，areaIntA[0][1][2] = 012; ETC...

我更新的代码：

```
areaInt = areaIntA[0];

do {
    areaCheck = isRegistered(file, areaInt);
    if (areaCheck != 1)
    {
    areaInt = areaIntA[i] * 10 + areaIntA[i+1];
    i++;
    }
} while (areaCheck != 1);

cout << areaCheck << endl; 
```

这编译但它显示一个分段错误，有人知道为什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T04:13:11.527

让函数接受一个列表（向量）。每次调用都在末尾添加一个新元素。

例如。

```
List< int?> areaIntList;

do {
    areaIntList.Add(areaInt[i]);
    areaCheck = isRegistered(file, areaInt[i]);
    if (areaCheck != 1)
    {
        i++;
    }
} while (areaCheck != 1); 
```

isRegistered 接受您使用的类型的列表。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T04:30:41.220

我对你的问题的理解是这样的：

1.  `isRegistered`是一个函数，它接受一个文件和一个可变长度的数字字符串，`1`如果字符串已注册，则返回，`0`否则返回。
2.  `areaInt`是一个 C 风格的字符串，如`"31526"`.
3.  你想要的是看是否`"3"`被注册；如果没有，看是否`"31"`注册；如果没有，请尝试`"315"`等，直到 的所有数字`areaInt`都用完。
4.  最终结果应该是一个`areaInt`注册字符串最短的子字符串，如果没有找到注册字符串，则返回错误。

我就是这样做的。

> 1.  如果输入字符串`areaInt`为空，则返回错误。
> 2.  将计数器从 1 循环`i`到字符串的长度：
>     1.  `s`从 中的第一个`i`字符构造一个测试字符串`areaInt`。
>     2.  测试是否`s`注册。如果是，则跳出循环并返回`s`。如果没有，继续循环。
> 3.  如果循环在末尾完成`areaInt`并且没有找到已注册的字符串，则返回错误。

**笔记。**确保在结束时停止`areaInt`。否则，如果您到了末尾，`areaInt`仍然没有找到已注册的字符串，那么您将溢出缓冲区并尝试读取不在字符串中的元素。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-07T04:20:18.850

您在某种字符串上下文中奇怪地将数组整数值等同起来。这通常意味着以 10 为底的数学。

尝试：

```
int val = 0;
do {
    val = 10 * val + areaInt[i];
    areaCheck = isRegistered(file, val);
    if (areaCheck != 1)
        i++;
} while (areaCheck != 1); 
```

在第一次通过时，`val`将是`areaInt[0]`; 在第二遍时，它将`areaInt[0]`紧随其后`areaInt[1]`（例如，0 和 1 变为 1，1 和 2 变为 12）。等等。

# mysql - LIMIT x, y 是否完全等同于 MySQL 中的 OFFSET x LIMIT y？

> ID：14743312
> 
> 赞同：4
> 
> 时间：2013-02-07T04:01:57.437
> 
> 标签：mysql

我主要将此问题发布为其他人的资源，因为我在网上找不到任何明确回答的内容：`LIMIT x,y`语法在性能上是否等同于`OFFSET x, LIMIT y`？

根据官方[MySQL 文档](http://dev.mysql.com/doc/refman/5.6/en/select.html)：

> 为了与 PostgreSQL 兼容，MySQL 还支持 LIMIT row_count OFFSET 偏移量语法。

这对我来说意味着它们是绝对等价的。

但是我找不到任何官方文档这么明确地说。所以我 99% 确信没有任何低级差异，但我会喜欢官方的认可印章和安心。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T04:09:08.903

实际上我不确定，我也找不到任何文档，但我测试了它，它似乎工作得很好。结果：

```
andrew@uf ~ $ mysql --version
mysql  Ver 14.14 Distrib 5.1.66, for debian-linux-gnu (x86_64) using readline 5.1
...

mysql (sandbox) > SELECT * FROM db1.t1 LIMIT 1, 2;
+-------+------------+-----------------------------+
| grpID | grpCode    | grpDesc                     |
+-------+------------+-----------------------------+
|     2 | INTL_LEADS | International leads         |
|     3 | CPE_LEADS  | CPE-specific Domestic leads |
+-------+------------+-----------------------------+

mysql (sandbox) > SELECT * FROM db1.t1 LIMIT 2 OFFSET 1;
+-------+------------+-----------------------------+
| grpID | grpCode    | grpDesc                     |
+-------+------------+-----------------------------+
|     2 | INTL_LEADS | International leads         |
|     3 | CPE_LEADS  | CPE-specific Domestic leads |
+-------+------------+-----------------------------+ 
```

是的。我做了比这更多的测试，但我不想发布所有这些。这很容易知道，因为这种语法对我来说更有意义。

# c - 如何在 C 中正确实现健壮的堆栈

> ID：14743313
> 
> 赞同：0
> 
> 时间：2013-02-07T04:02:01.763
> 
> 标签：c, stack, heap-memory, buffer-overflow

## 先验知识

我已经阅读并了解了一些关于堆栈和数据结构的知识，但找不到这个特定问题的答案。我知道任何有价值的程序员都会在他们的程序中实现超出默认值的安全异常处理。

## 情况

我想了解如何用 C 编写一个程序，该程序建立一个相对健壮的堆栈，并对某些任意情况 S 进行异常处理。我的目标是从这个非常具体的信息中辨别为什么（据我所知）总是有可能在程序中利用 SEH 并执行任意代码。

问题**不**在于我不理解溢出缓冲区的概念 - 我不明白**为什么（非常具体地，与 CPU 架构相关的原因）在堆栈（金丝雀等）上实现的安全性不能充分解决这些问题**（如堆溢出无法停止？）。

## 参考信息

“没有明智的方法来改变结构中的数据布局；预计模块之间的结构是相同的，尤其是对于共享库。缓冲区之后的结构中的任何数据都无法用金丝雀保护；因此，程序员必须非常小心它们如何组织变量和使用它们的结构。在 C 和 C++ 中，带有缓冲区的结构应该是 malloc()ed 或使用 new 获得的。- 通过[http://en.wikipedia.org/wiki/Buffer_overflow_protection#Implementations](http://en.wikipedia.org/wiki/Buffer_overflow_protection#Implementations)

还：

[http://blogs.msdn.com/b/michael_howard/archive/2006/08/16/702707.aspx](http://blogs.msdn.com/b/michael_howard/archive/2006/08/16/702707.aspx)

如果有人知道理解此材料的好*资源*或可以提供*代码片段*，我将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T05:58:52.467

*可以*使堆栈的安全性足够安全以应对堆栈溢出：

[http://msdn.microsoft.com/en-us/library/9a89h429(VS.80).aspx](http://msdn.microsoft.com/en-us/library/9a89h429(VS.80).aspx)

关于为什么需要注册的异常处理程序（*安全*-SEH）以及为什么普通的异常处理程序不会削​​减它的问题是因为您会遇到非常大的堆栈溢出。

假设我有开始的功能

```
try {
   char buffer[N];
   strcpy(&buffer, &attacker);
} __except(...) { } 
```

这可能会转化为汇编代码

```
push ebp
mov ebp, esp
; GS if you want to here

; install the exception handler:
push lbl_Exceptionhandler
push dword ptr [fs:0]
mov dword ptr[fs:0], esp

; setup the locals inside the stack
sub esp, LOCALS
; GS if you want to here

; call strcpy
lea ecx [ebp + offset_to_buffer];
push ecx
lea edx, [ebp + offset_to_attacker]
push edx
call _strcpy
add esp, 8

; uninstall the locals
mov esp, ebp

; uninstall the exception handler
pop dword ptr [fs:0]

; return
pop ebp

; optionally check GS cookies that we might have also inserted at any point in this function.
call _checksecuritycookie
ret 
```

或者换句话说，堆栈看起来像这样：

```
RET PTR 
/GS1
SAVED EBP
/GS2
SAVED FS:0
/GS3
LOCAL char buffer[N] 
```

GS1、GS2 和 GS3 是堆栈金丝雀可能选择写入堆栈 cookie 的位置。注意cookie只会在函数结束时被检查（这在计算机安全中很重要。当你引入检查时，你不仅需要考虑检查是否会检测到溢出，还要考虑它是否会在溢出之前检测到它已经太晚了；这需要考虑检查将在哪里进行。对于堆栈cookie，cookie仅在函数退出时检查，因为堆栈cookie通常只是为了保护返回地址，而不是保护局部变量）。

正常异常处理程序的问题是如果攻击者缓冲区非常大会发生什么。假设它*太大*了，它会破坏整个堆栈，写入线程的保护页面并触发错误？

好吧，内核回调到 ntdll 并告诉它排序它的进程，而 ntdll 的第一个调用端口是查看是否有任何注册的异常处理程序。现在它如何找到要调用的异常处理程序？好吧，它查看 fs:0，它指向堆栈上的异常处理程序，并调用异常处理程序指针。除了攻击者刚刚销毁的堆栈上的异常处理程序。

哎呀。现在攻击者控制了 EIP 而你输了。

Safe-SEH 通过指出您可能想要调用的异常处理程序列表实际上是一个完全在编译时确定的有限列表来解决这个问题。通过将此列表写入 PE 文件本身，ntdll 有机会再次检查它应该跳转到的异常处理程序实际上是一个真正的异常处理程序，而不是某些邪恶攻击者阴谋接管您的 EIP 的原因。

Safe-SEH 有成本（因此选择加入），但成本是捕获异常变得更加昂贵，因为 ntdll 现在将在您的异常处理程序接管之前完成更多工作。

尽管如此，我的建议是 SafeSEH 应该始终打开。由于您的应用程序的性能严重依赖于抛出异常的速度，因此更容易丢失客户的信用卡详细信息，这表明开发人员的心态如此糟糕，以至于他们应该立即投入大炮并被发射到阳光下以避免他们的破坏社会的可怕代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T04:21:11.040

在 C 中实现堆栈的常规方法是使用链表。例如：

```
struct stack_entry {
    struct stack_entry *previous;
    /* other fields for the actual data */
}

struct stack_entry *stack_top = NULL;

void push(struct stack_entry *entry) {
    entry->previous = stack_top;
    stack_top = entry;
}

struct stack_entry *pop(void) {
    struct stack_entry *entry;

    entry = stack_top;
    if(entry != NULL) stack_top = entry->previous;
    return entry;
} 
```

这与任何其他普通代码一样强大且难以利用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-07T04:52:55.503

如果您没有在 C 中实现堆栈，而是在实现 C 编译器（以任何语言），那么..

可以创建一个检测编程错误并生成安全代码的 C 编译器。例如，对于每次读取或写入，编译器可以插入检查以确保读取或写入包含在一个存储区域内（例如，您不会尝试在 char 数组的末尾写入 4 个字节或其他内容）；如果其中一项检查失败，则会引发信号（例如“SIGSEGV”）。

由于 C 的性质，这些检查将涉及扫描堆之类的东西，并且需要插入更多代码来跟踪堆栈上的东西的大小。

没有实现的主要原因是它会产生大量的性能问题，因此会破坏使用 C 开始的目的。

但是，有一些调试工具（例如 valgrind）通过在虚拟机中运行应用程序来进行这种类型的检查（虚拟机跟踪存储区域的大小并能够在执行之前检查读/写）。

# c# - BHO如何替换javascript事件处理程序结果？

> ID：14743318
> 
> 赞同：1
> 
> 时间：2013-02-07T04:02:42.060
> 
> 标签：c#, javascript, event-handling, bho

因为拖动超链接中的图像，无法获取“FileDrop”或“DIB”数据，所以我想使用 C# 编写一个 BHO 来增强拖放图像。

我在文档上注入了 dragstart 事件，它工作正常，但是：

如果 javascript 设置了这样的 ondragstart 事件处理程序：

```
<script>
ondragstart = function(){
  var obj = event.srcElement;
  if(obj.tagName == "A"){
    event.dataTransfer.setData("text", "TTTTTTTTTTTTTTT");
  }
  window.document.title = event.srcElement.tagName;
}
document.attachEvent("ondragstart", ondragstart);
</script> 
```

AND BHO ondragstart 事件处理程序：

```
...
if (!string.IsNullOrWhiteSpace(src))
{
    try
    {
        var info = WinInetAPI.GetUrlCacheEntryInfo(src);
        src = info.lpszLocalFileName;
    }
    catch
    {

    }
    eventObj.dataTransfer.setData("Text", src);
}
... 
```

最后的结果是：TTTTTTTTTTTTTT。

在调试器中，我可以看到 BHO ondragstart 事件处理程序在 javascript 事件处理程序之前被调用。

那么，无论如何在 javascript 事件处理程序之后调用 BHO 事件处理程序？

对不起我的英语。请帮忙。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T08:04:16.633

我找到了解决方案：在 BHO Event handler 中，添加以下代码：

(eventObj as IHTMLEventObj).cancelBubble = true;

这个问题困扰了我一整天

# html - 使 UL 更改其父母尺寸的正确方法是什么？

> ID：14743320
> 
> 赞同：0
> 
> 时间：2013-02-07T04:02:52.417
> 
> 标签：html, css, html-lists

我在获取无序列表以更改其父项大小时遇到​​了一些麻烦。

我有这样的东西

HTML

```
<div class="content">
    <div id="product-range">
        <ul>
            <div class="product-container">sup</div>
            <div class="product-container">sup</div>
            <div class="product-container">sup</div>
            <div class="product-container">sup</div>
            <div class="product-container">sup</div>
        </ul>
    </div>
</div> 
```

CSS

```
.content {
    position:relative;
    background:white;
    max-width:1299px;
    margin: 0 auto;
    padding:0;
}
#product-range {
    position:relative;
    margin-left:25px;
    margin-right:15px;
    background:blue;
}
.product-container {
    position:relative;
    width:398px;
    height:500px;
    float:left;
    margin-right:20px;
    margin-top:15px;
    background:green;
} 
```

这导致 [http://jsfiddle.net/qfUTq/](http://jsfiddle.net/qfUTq/)

父母崩溃了。我能够解决这个问题的唯一方法是添加一个`clear:both`像这样的空 div：

[http://jsfiddle.net/eE6XQ/](http://jsfiddle.net/eE6XQ/)

有没有合适的方法来做这件事？我尝试将相同的属性添加到所有其他类或 ID，但它不会产生相同的效果。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T04:13:19.450

在#product-range 上玩溢出属性：auto,scroll,...;

我猜溢出：自动无法解决您的问题，但这不是最好的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T04:36:38.943

将溢出：隐藏应用于#product-range，它将环绕元素。

# c++ - C++ 哪个数字不属于？

> ID：14743326
> 
> 赞同：0
> 
> 时间：2013-02-07T04:03:22.853
> 
> 标签：c++

我是编程的初学者，但是在编写自己的程序时，我遇到了一个似乎无法绕过的障碍。

无论如何，在数组中给定一组这样的数字：

```
4
14
24
27
34 
```

您可以看到除了一个之外的所有数字在个位上都有一个 4。我将如何编写一个可以返回不同位置的数字的函数，在这种情况下为 27？每次运行程序时，数字都会有所不同，但由于场景的原因，其中 4 个将始终在一个位置具有相同的数字。它们不一定按数字顺序排列。

我似乎无法找到一种数学方法，也无法通过搜索找到任何东西。有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-07T05:29:32.413

这是完成这项工作的一种方法。绝对不是最有效的，但无论如何都很好。这个适用于任意数量的输入，只要只有一个与其他输入不同（显然是个位数）。

```
#include <algorithm>
#include <iostream>
#include <vector>

int main() {
    std::vector<int> n = {4, 14, 27, 24, 34};

    std::sort(std::begin(n), std::end(n),
        [](int a, int b) { return a%10 < b%10;});

    std::cout << ((n[0]%10 < n[1]%10) ? n.front() : n.back());
} 
```

编辑：我决定添加另一个。虽然这仍然比@Rici 的（非常好的）解决方案进行更多的比较，但它至少是线性的（并且不会重新排列原始数据）：

```
#include <algorithm>
#include <iostream>
#include <vector>

int main() {
    std::vector<int> n = {4, 14, 27, 24, 34};

    auto pos = std::adjacent_find(std::begin(n), std::end(n),
        [](int a, int b) { return a%10 != b%10; });

    if (pos != std::begin(n))
        std::cout << pos[1];
    else
        std::cout << n[n[1]%10 != n[2]%10];
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-07T06:58:30.227

Jerry Coffin 的解决方案是不必要的`O(log N)`；它可以通过使用`std::partition`而不是改进`std::sort`：

```
#include <algorithm>
#include <iostream>
#include <vector>

int main() {
    std::vector<int> n = {4, 14, 27, 24, 34};

    int first = n[0]%10;    
    std::partition(std::next(std::begin(n)), std::end(n),
                   [&](int a) { return first == a%10;});

    std::cout << ((first != n[1]%10) ? n.front() : n.back());
} 
```

但这仍然做了太多的比较。这个问题最多可以通过`(N+1)/2`比较来解决：

```
#include <iostream>
#include <vector>

int odd_man_out(const std::vector<int> n) {
    size_t i;
    for (i = 0; i + 2 < n.size(); i += 2) {
      if (n[i]%10 != n[i+1]%10)
        return n[i]%10 != n[i+2]%10 ? i : i + 1;
    }
    if (i + 2 == n.size() && n[i]%10 == n[i-1]%10)
      return i + 1;
    else
      return i;
}

int main() {
    std::vector<int> n = {4, 14, 27, 24, 34};
    std::cout << n[odd_man_out(n)];
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-07T04:06:09.657

编写一个程序，使用`%`算子取个位值

```
void check ()
{
    int i, changeIndex =0;
    for ( i = 0; i < 5; i++)
    {
        for (int k = 0; k < 5; k++)
        {
            if (a[i]%10 == a[k]%10)
            {
                changeIndex++;        
            }
        }
        if (changeIndex != 4)
        {
             break;
        }
        changeIndex = 0;

    }
    cout<<a[i];
} 
```

这将适用于 5 的计数，如果只有一个数字具有不同的单位位值

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-02-07T04:41:46.357

给你... :p

适用于任意数量的输入......甚至可以检测它们是否都相同。

```
#include <iostream>
int main() {
   int a[] = {4,14,24,34,27,94};
   // assume a has more than 2 elements, otherwise, it makes no sense
   unsigned ri = 0;

   if (a[1]%10 == a[0]%10) {
      for (ri = 2; (ri < sizeof(a)/sizeof(a[0])) && (a[ri]%10 == a[0]%10); ri++);
   } else if (a[2]%10 == a[0]%10)
      ri = 1;

   if (ri < sizeof(a)/sizeof(a[0]))
      std::cout << "weird number is a["<< ri <<"] = "<<a[ri] << std::endl;
   else
      std::cout<<"they're all the same" << std::endl;
   return 0;
} 
```

注意实际工作：

```
 if (a[1]%10 == a[0]%10) {
      for (ri = 2; (ri < sizeof(a)/sizeof(a[0])) && (a[ri]%10 == a[0]%10); ri++);
   } else if (a[2]%10 == a[0]%10)
      ri = 1; 
```

只有4行长！:p

[在 liveworkspace 上查看](http://liveworkspace.org/code/2aBqCp%2421)

运行时间为 max(1,[location of the exception #])，即 O(n)，其中 n 是 a 的大小。

# android - ZXING 扫描仪，如何返回上一个活动

> ID：14743332
> 
> 赞同：0
> 
> 时间：2013-02-07T04:03:51.730
> 
> 标签：android, zxing

在 Zxing 上，我将 Scanner 作为一个新的 Activity，我在另一个 Activity 上有一个按钮，它将启动一个新的 Intent，即 Scanner Activity。如果扫描成功，我怎样才能回到我的第一个活动？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T08:30:59.043

它已经自动执行此操作，并且一直如此。您必须仔细检查您的设置并提供更多信息，否则您正在做的事情比您在此处说明的要多。

# jquery - jquery 移动主题或 css

> ID：14743335
> 
> 赞同：0
> 
> 时间：2013-02-07T04:04:18.007
> 
> 标签：jquery, wordpress, jquery-mobile, wordpress-theming

我一直在摆弄 Jquery Mobile 主题滚轮，有几个问题我找不到答案。在我使用 themeroller 进行修补并下载我的 zip 文件后，我在其中看到了 CSS 文件。

该 CSS 文件是我在移动 wordpress 网站中的实际主题吗？我知道 zip 文件不是我可以简单地上传到我的 wordpress 中的东西，它将成为一个主题。

我应该用那个 CSS 文件做什么？不知道它去哪里。现在，作为我的主题，我在网上找到了一些普通的老式通用 jquery 移动主题。因为它没有给我自定义选项，所以我使用了themeroller。我只是不确定如何处理那个 CSS 文件......

任何帮助表示赞赏。先感谢您。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T05:37:02.980

您正在使用的[jQuery Mobile Wordpress 主题](http://www.mobilizetoday.com/freebies/jqmobile)有一个新的 Wordpress 管理选项，可让您轻松设置新主题。只需登录您的 Wordpress 管理区域并上传您的主题。该系统附带了一些 jQuery Mobile 主题（Velencia、Green、Default）。

这是他们给出的确切步骤。

> 上传方案：您可以选择使用 ThemeRoller Mobile 创建自己的配色方案。创建并下载您的自定义方案后，您可以通过单击“上传”按钮将其上传 [在管理页面上]。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T06:21:30.827

你在正确的轨道上。只需解压缩文件并在您的站点中插入 CSS。然后您必须将其链接或导入到您的 HTML 文档中。

```
<link rel="stylesheet" href="css/custom.css"/> 
```

如果您的文件夹名为“css”且文件名为“custom.css”，则这是您将包含在标题中的 ilne。

CSS 基于优先级工作。也就是说，您希望在其他文件之后加载此 CSS 文件。另外，在你的 CSS 选择器中要具体，或者使用 !important 来指定优先级。

希望这可以帮助。

# google-maps-api-3 - 如果从 Google 的 geocoder.geocode 服务返回多个结果，如何选择特定结果

> ID：14743341
> 
> 赞同：3
> 
> 时间：2013-02-07T04:05:14.023
> 
> 标签：google-maps-api-3

我创建了这个 dropPin 函数以从 Google 的 geocoder.geocode 服务获取地理坐标，以设置标记并填充几个隐藏的表单字段。但是，根据[他们的 docs](https://developers.google.com/maps/documentation/javascript/geocoding#GeocodingResponses)`results`可以包含多个`GeocoderResults`对象字面量数组。我无法弄清楚我如何引用一个特定的结果对象而不是另一个。

```
function dropPin() {

     var address = document.getElementById("map-search-input").value;
     var geocoder = new google.maps.Geocoder();

     geocoder.geocode({address: address}, function(results, status) {
       if (status == google.maps.GeocoderStatus.OK) {   

          latLng = results[0].geometry.location;

          marker.setPosition(latLng);

          document.getElementById("lat").value=latLng.lat();
          document.getElementById("lng").value=latLng.lng();

       } else {
         alert(address + ' not found');
       }
     }); 
```

# php - 如何正确使用 print_r 或 var_dump？

> ID：14743342
> 
> 赞同：7
> 
> 时间：2013-02-07T04:05:26.817
> 
> 标签：php, printing, var-dump

我在调试时经常使用以下代码段：

```
echo "<pre>" . var_dump($var) . "</pre>"; 
```

而且我发现我通常会得到一个很好的可读输出。但有时我就是不这样做。我现在对这个例子特别恼火：

```
<?php

$username='xxxxxx';
$password='xxxxxx';

$data_url='http://docs.tms.tribune.com/tech/tmsdatadirect/schedulesdirect/tvDataDelivery.wsdl';
$start=gmdate("Y-m-d\TH:i:s\Z",time());
$stop =gmdate("Y-m-d\TH:i:s\Z",time()+3600*24);

$client = new SoapClient($data_url, array('exceptions' => 0,
                                          'user_agent' => "php/".$_SERVER[SCRIPT_NAME],
                                          'login'      => strtolower($username),
                                          'password'   => $password));
$data = $client->download($start,$stop);

print_r($data);

?> 
```

当然，我不想透露我的凭据，但我被告知 print_r 在这种情况下将与我通常的代码片段一样，而实际上 print_r 和我的代码片段都不会产生除 runon 数据之外的任何东西而根本没有任何格式。我怎样才能让它漂亮？！

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-02-07T04:20:38.780

*[var_dump](https://www.php.net/manual/en/function.var-dump.php)*总是向您显示格式化数据中的数组，但有太多额外的东西

```
var_dump($data); 
```

但是如果你想要格式化数据，这里你需要使用`<pre>`标签：

```
echo '<pre>';
print_r($data);
echo '</pre>'; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-07T04:49:06.257

var_dump() 直接回显输出，因此如果要将其捕获到变量以提供自己的格式，则必须使用输出缓冲区：

```
 ob_start();
   var_dump($var);
   $s = ob_get_clean(); 
```

完成此操作后，变量 $s 现在包含 var_dump() 的输出，因此我们可以安全地使用：

```
 echo "<pre>" . $s . "</pre>"; 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-05-07T08:32:17.243

当您需要有关任何变量的更多详细信息时，使用[var_dump 。](https://www.php.net/manual/en/function.var-dump.php)

```
<?php 
    $temp = "hello" ;
    echo var_dump($temp);
?> 
```

它输出如下。**string(5) "hello"**表示它打印变量的数据类型和字符串的长度以及变量中的内容是什么。

而 print_r($expression) 用于打印数组或任何其他无法由 echo 语句直接打印的对象数据类型的数据。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-02-07T04:13:05.383

好吧，[print_r()](https://www.php.net/manual/en/function.print-r.php)用于打印数组，但为了以漂亮的方式显示数组，您还需要 HTML 标记。

只需执行以下操作：

```
echo "<pre>";
print_r($data);
echo "</pre>"; 
```

# math - 分数，求解到最简单的形式

> ID：14743344
> 
> 赞同：-1
> 
> 时间：2013-02-07T04:05:28.240
> 
> 标签：math, fractions

我无法解决这个表达式：

```
(x - 1)(7x + 6)        7
----------------- + -------
(x - 1)(x + 1)^2    (x + 1) 
```

解决这个问题的步骤是什么？

我知道您将 (x + 1)^2 扩展为 (x + 1)(x + 1) 并且您需要在将分子相加之前找到一个公分母。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T04:14:38.050

第 1 步 - 由于 (x-1) 在第一个分数的分子和分母上，请删除：

```
(7x + 6)        7
---------- + -------
(x + 1)^2    (x + 1) 
```

接下来，(x + 1)^2 等于 (x + 1)(x + 1)。这告诉您将 (x + 1) 乘以右手分数：

```
(7x + 6)            7(x + 1)
--------------- + --------------
(x + 1)(x + 1)    (x + 1)(x + 1) 
```

不，你有一个共同的分母，把你的分子加在一起：

```
(7x + 6) + 7(x + 1) = (7x + 6) + (7x + 7) = 14x + 13 
```

所以你的最终结果是这样的：

```
14x + 13           14x + 13
-------------- = --------------
(x + 1)(x + 1)     (x + 1)^2 
```

希望这有帮助，祝你好运！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T04:09:49.997

```
 (x-1)(7x+6)(x+1) + 7(x-1)(x+1)^2   14x+13
          -------------------------------- = ---------
           (x - 1)(x + 1)^3                   (x+1)^2 
```

通过将问题的分母相乘来找到共同分母。那就是`(x-1)(x+1)^2 * (x+1)`。然后乘以和`(x-1)(7x+6)`相加`(x+1)`得到分子。`7``(x-1)(x+1)^2`

# facebook - 找不到命令 :: org.apache.cordova.facebook.Connect

> ID：14743345
> 
> 赞同：1
> 
> 时间：2013-02-07T04:05:36.313
> 
> 标签：facebook, windows-phone-7, cordova, phonegap-plugins

使用 cordova 2.3.0 进行 Windows Phone 7 应用程序开发。我在 FB.login 上收到错误“无法找到命令 :: org.apache.cordova.facebook.Connect”。我从在 Android 中运行良好的代码库开始。我在 Windows 上遗漏了什么或做得不对？有关于 PhoneGap WP7 和 Facebook 插件集成的详细文档吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T12:01:31.927

尝试在调用方法中设置命名空间：

看我的例子：

Cordova.exec(null, null, "WP7GapClassLib.PhoneGap.Commands.MyCommand", "SendRequest", args);

# eclipse - maven2工具maven版

> ID：14743351
> 
> 赞同：1
> 
> 时间：2013-02-07T04:06:03.447
> 
> 标签：eclipse, maven

我通过将路径变量更改为指向 2.2.1 来更改 maven 版本，但是当我从 eclipse 运行 maven2 工具时，它使用 maven 版本 3。如何更改 maven2 工具配置。我怀疑 maven2 工具是否带有内置的 maven。

谢谢，斯里拉姆

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T06:07:38.820

Eclipse 有自己的嵌入式 Maven。指向你本地安装的 goto`Right Click Project --> Run As --> Run Configurations`你可以`Maven Runtime`在这里看到。单击`Configure`并添加您的本地 Maven 运行时。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T16:58:19.480

确保默认情况下始终调用所需版本的 Maven 的最佳方法是在 Window -> Preferences -> Maven Installations 下添加版本并选中该框以使其成为默认版本。

# ios - 如何使用滚动动画关注 UITableview 中的最后一个单元格？

> ID：14743353
> 
> 赞同：11
> 
> 时间：2013-02-07T04:06:17.330
> 
> 标签：ios, objective-c, cocoa-touch, uitableview

我的 xcode 项目中有一个 UITableview。其中列出了评论。如何通过滚动动画关注 TableView 的最后一个单元格？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-02-07T04:10:33.507

**下面的方法将找到您的表格视图的最后一个索引，并将通过动画聚焦到该单元格**

```
-(void)goToBottom
{
    NSIndexPath *lastIndexPath = [self lastIndexPath];

    [<YOUR TABLE VIEW> scrollToRowAtIndexPath:lastIndexPath atScrollPosition:UITableViewScrollPositionBottom animated:YES];
} 
```

**查找表格视图的最后一个索引的代码。**

```
-(NSIndexPath *)lastIndexPath
{
    NSInteger lastSectionIndex = MAX(0, [<YOUR TABLE VIEW> numberOfSections] - 1);
    NSInteger lastRowIndex = MAX(0, [<YOUR TABLE VIEW> numberOfRowsInSection:lastSectionIndex] - 1);
    return [NSIndexPath indexPathForRow:lastRowIndex inSection:lastSectionIndex];
} 
```

**在视图控制器的某处添加此代码**

```
[self performSelector:@selector(goToBottom) withObject:nil afterDelay:1.0]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-07T04:38:58.133

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-08-10T17:23:43.327

Swift 3:

```
let indexPath = IndexPath(row: /*ROW TO SCROLL TO*/, section: /*SECTION TO SCROLL TO*/)
tableView.scrollToRow(at: indexPath, at: .bottom, animated: true) 
```

# javascript - 在用户单击时，将一段 javascript 加载到页面中

> ID：14743354
> 
> 赞同：1
> 
> 时间：2013-02-07T04:06:20.080
> 
> 标签：javascript, html

我在我的 html 页面上添加了第三方评论插件。由于页面为加载评论插件而建立的连接数，该插件会稍微减慢页面加载速度。

评论插件将包含在一个 div 中。

我想延迟评论 javascript 的加载，直到访问者单击“添加/阅读评论”按钮/链接。

该页面的语言是html5。如果可能的话，我希望将我的页面保留为 .html 页面是 html5 和 css3。

我的 ccs3 和 html5 知识一般。我的javascript知识很差。我不知道的所有其他语言。

我本来打算使用“添加/阅读评论”按钮/链接，加载一个加载了第三方评论插件的重复页面，但觉得这是一种混乱的方式，并且增加了更多时间（然后再加载另一个页面）插件脚本）供用户等待才能发表评论。

在用户单击按钮之前，我根本不希望加载此评论插件，甚至在后台也不加载。这样做的原因是，当页面加载完成而评论插件不可见时，我不希望用户看到页面挂起/仍在加载的任何迹象。

我真诚地希望这对有人遵循是有意义的。

答案将不胜感激。感谢您的时间。

以下是livefyre给我插入到我的html中的代码..

```
<div id="SPLUG"> <--- that is the div i am surrounding the comment plugin in

<div id="livefyre-comments"></div>
<script type="text/javascript" src="http://zor.livefyre.com/wjs/v3.0/javascripts/livefyre.js"></script>
<script type="text/javascript">
(function () {
    var articleId = fyre.conv.load.makeArticleId(null);
    fyre.conv.load({}, [{
        el: 'livefyre-comments',
        network: "livefyre.com",
        siteId: "xxxxxx",
        articleId: articleId,
        signed: false,
        collectionMeta: {
            articleId: articleId,
            url: fyre.conv.load.makeCollectionUrl(),
        }
    }], function() {});
}());
</script>
<!-- END: Livefyre Embed -->

</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T04:24:07.133

您可以在单击按钮时将外部 JavaScript 动态插入网页：

```
<button onclick="addScript()">Click</button>

<script type="text/javascript">
    function addScript() {
        var headTag = document.getElementsByTagName("head")[0];         
        var newScript = document.createElement('script');
        newScript.type = 'text/javascript';
        newScript.src = 'http://code.jquery.com/jquery-1.9.1.min.js';
        headTag.appendChild(newScript);
    }
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T04:41:57.973

这并不难。现在需要延迟加载 JavaScript 或外部内容以加快页面加载速度。例如，一旦我的页面被加载，我想加载 Facebook/twitter 插件，因此一种方法是在 jQuery 的情况下初始化加载[window.onload](http://www.w3schools.com/jsref/event_onload.asp)或 $(window).load 的外部插件。

在您的情况下，在评论按钮 onclick 事件中，加载外部插件的 JavaScript。我们通常做的是使用文档对象模型 (DOM) 来操作元素。

例如，我想在单击按钮时加载 iframe：

```
<input type="button" id="btnComment" onclick="createframe();" style="height:50px; width:120px;" value="Click Me!" />
<div id="container"></div>

function createframe() {
    var i = document.createElement("iframe");
    i.src = "http://www.adilmughal.com";
    i.scrolling = "auto";
    i.frameborder = "0";
    i.width = "90%";
    i.height = "220px";
    document.getElementById("container").appendChild(i);
} 
```

这将做的是使用任何 src URL 创建一个新的 iframe 元素，并将其附加为容器的子元素。

输出和代码也可以在[http://jsfiddle.net/adilmughal/ZJZn7/上查看](http://jsfiddle.net/adilmughal/ZJZn7/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-07T06:10:14.620

我查看了 liveFire 文档，看起来应该很容易在点击时初始化它，而不是在页面加载时初始化它。

然而，liveFyre 实际上会尽快初始化 - 而不是玩得很好并等待页面准备好。这很可能是它减慢页面加载速度的原因。你的 liveFyre 代码是这样的吗？

```
<!-- START: LiveFyre Embed -->
<script type="text/javascript" src="http://livefyre.com/wjs/javascripts/livefyre.js"></script>
<script type="text/javascript">
  fyre = LF({
    site_id: xxxxx,
    version: '1.0'
  });
</script>
<!-- END: LiveFyre Embed --> 
```

如果是这样，请尝试将其更改为：

```
<!-- START: LiveFyre Embed -->
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.0/jquery.min.js"></script>
<script type="text/javascript" src="http://livefyre.com/wjs/javascripts/livefyre.js"></script>
<script type="text/javascript">
  $(function(){
    fyre = LF({
      site_id: xxxxx,
      version: '1.0'
    });
  });
</script>
<!-- END: LiveFyre Embed --> 
```

这应该只是让 livefyre 在尝试初始化之前等待页面是交互式的。它可能没有足够的帮助（或根本没有帮助），但首先尝试它是一个安全且简单的选择。如果它没有足够的帮助，请发回，我们将追求您的“点击初始化”选项。

- - 更新 - -

根据您对代码片段的评论，试试这个（我认为评论有点混乱 - 希望您可以将其翻译为 OK：

```
<script type="text/javascript" src="zor.livefyre.com/wjs/v3.0/javascripts/livefyre.js">
<script type="text/javascript"> 
  $(function(){
    var articleId = fyre.conv.load.makeArticleId(null);
    fyre.conv.load({}, [{
      el: 'livefyre-comments',
      network: "livefyre.com",
      siteId: "xxxxxx",
      articleId: articleId,
      signed: false,
      collectionMeta: {
        articleId: articleId,
        url: fyre.conv.load.makeCollectionUrl()
        }
      }]
      , function() {});
  })();    
</script> 
```

同样，这个想法只是在尝试初始化之前等待页面交互。让我们知道会发生什么！

# iphone - 使用 Xcode 4.3.2 在 iPhone 3GS os 6.1 上运行应用程序

> ID：14743356
> 
> 赞同：0
> 
> 时间：2013-02-07T04:06:23.113
> 
> 标签：iphone, xcode, ios6

我正在使用 Xcode 4.3.2 并想在 iPhone 3GS 上运行应用程序，但是当我打开管理器窗口并显示以下内容时：

“iPhone”上的 iOS 版本与此 iOS SDK 安装支持开发的任何 iOS 版本都不匹配。请将设备恢复到以下列出的操作系统版本，或更新到最新版本的 iOS SDK；可在此处获得。

安装在 iPhone 6.1 (10B141) 上的操作系统

Xcode 支持的 iOS 版本 最新 5.1 (9B176) 5.0 4.3 4.2

请建议我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T04:30:33.820

由于降级 iOS 版本很困难并且听起来不适合您，我认为您必须遵循另一个选项：

> 更新到最新版本的 iOS SDK

iOS 6.1 SDK 包含在[Xcode 4.6](http://itunes.apple.com/us/app/xcode/id497799835?ls=1&mt=12)中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T04:31:33.780

使您的代码与 ios 6.1 兼容并尝试使用 xcode 4.5

# php - 如何将独立的 PHP 文件转换为 Magento 的 MVC

> ID：14743362
> 
> 赞同：0
> 
> 时间：2013-02-07T04:06:52.123
> 
> 标签：php, magento, magento-1.7, magento-1.4

我的任务是将独立的 PHP 文件转换为 Magento 的 MVC。这些 PHP 文件是由另一个开发人员创建的。PHP 文件中的代码访问数据库，将结果转换为 JSONP 格式并转发给前端开发人员。

我对 Magento 的 MVC 没有任何了解。这个转换任务是否类似于`app/code/core/Mage`Magento 文件夹中的模块？我怎样才能做到这一点？magento MVC 和 PHP MVC 一样吗？

我包括需要转换为 Magento MVC 的 php 文件。所以你会更容易理解..

```
<?php header('content-type: application/json; charset=utf-8');
$link = mysqli_connect("localhost", "db_username", "password", "db_dbname");

/* check connection */
if (mysqli_connect_errno()) {
    printf("Connect failed: %s\n", mysqli_connect_error());
    exit();
}

$pid = $_REQUEST['prodid'];

/* Select queries return a resultset */

$result = mysqli_query($link, "SELECT round(rating_summary / 20) AS search_rating FROM review_entity_summary where store_id = 1 and entity_pk_value=" . $pid);

// printf("Select returned %d rows.\n" . "<br>\n", mysqli_num_rows($result)) . "<br>\n";
//$string = $_REQUEST['varname'];
    $rows = array();
  /*  while ($row = $result->fetch_row()) {
                printf("%s\n", $row[0]);
            }*/
//while($r = mysql_fetch_assoc($result)) {
while ($r = mysqli_fetch_assoc($result)) {
    $rows = $r;
//print_r ($rows) . "<br>\n";
}
$json_data = json_encode($rows);
print_r ($json_data);
    /* free result set */
   // mysqli_free_result($result)

mysqli_close($link);
?> 
```

那么如何将此文件转换为 Magento 的 MVC 样式？将此文件转换为magento MVC有必要吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T14:34:32.730

我认为他们要求你做的是转换看起来像的代码

```
require_once 'path/to/magento'. "/Mage.php";
umask(0);
Mage::app("default");
.... 
```

进入 Magento MVC（模块）

```
\app\code\local\MyNamespace 
```

如果您是 OOP 新手，请看这里：[http ://www.php.net/manual/en/language.namespaces.rationale.php](http://www.php.net/manual/en/language.namespaces.rationale.php)

```
\app\code\local\MyNamespace\Appname 
```

新自定义模块的名称 - 尝试至少保留首字母大写，否则 Magento 的理解会出现问题

```
\app\code\local\MyNamespace\Appname\Block 
```

在经典的 MVC 架构中，这代表了 MVC 的 View 部分

```
\app\code\local\MyNamespace\Appname\controllers 
```

这很容易理解，如果没有，玩得开心：[http ://en.wikipedia.org/wiki/Model%E2%80%93View%E2%80%93Controller](http://en.wikipedia.org/wiki/Model%E2%80%93View%E2%80%93Controller)

```
\app\code\local\MyNamespace\Appname \etc 
```

包含 Magento 的 MVC 架构中最重要的部分——将所有东西连接在一起的 xml 字段

```
\app\code\local\MyNamespace\Appname\Helper 
```

适用于包含可重复例程或简单程序方法的文件

```
 \app\code\local\MyNamespace\Appname\Model 
```

与控制器相同，请查看上面的链接

```
 \app\code\local\MyNamespace\Appname\sql 
```

找出它的用途是一件很有趣的事情，它是定义自定义数据库表并处理对您的扩展的任何升级。

```
 \etc\modules 
```

包含 Magento 中包含的所有模块 - 这是我们模块真正开始的地方

见[http://incho.net/ecommerce/magento/basic-folder-structure-for-new-magento-module/](http://inchoo.net/ecommerce/magento/basic-folder-structure-for-new-magento-module/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T20:35:54.563

有趣的问题。恕我直言，前段时间我对 Magento 的态度是你。编写和使用对 Magento 数据库的 mySql 查询不需要 MVC 模型中的任何内容。在我们的世界里，我把这些叫做巫毒文件。我为我的员工创建具有非常特定目的和未发布 URL 的工具。您可以将它们放在文件系统中的任何位置，只需确保目录名和文件名在 Magento 中没有任何神奇的含义，否则您可能会无意中禁用某些功能。我的销售税报告工具与您的完全相同，您可以在其中打开与 mySql 数据库的连接并对其进行直接手动查询。

RS 的答案是进入 MVC 的一个很好的入门。我也开始将它用于我的巫毒工具。通过他们的控制器以“Magento 方式”进行查询可以使从 EAV 中获取信息比尝试通过手动查询组合信息更容易，因为基础设施已经为您编码**。**一个例子是客户信息！我弄清楚了销售税查询（这不是一件小事），但获得完整的姓名、地址和电子邮件是荒谬的。

我创建了一个输出 JSON 数据的导出工具。然后我从工作服务器上将其卷曲，以将销售额存储到 mysql 数据库中。从那里，它们被导入到快速手册中。此订单导出工具是 100% Magento 对象，如下例所示。

这是我在我的 voodoo 客户信息工具中使用的代码：

```
// this limits access to the page to this IP address, perhaps your office?
    $remote_host_ip='198.75.43.24';
if( $_SERVER['REMOTE_ADDR'] != $remote_host_ip ){
    $error[ date("Y-m-d_H:i:s") ]="\$_SERVER['REMOTE_ADDR'] is ".$_SERVER['REMOTE_ADDR']." which is not the office ip! $remote_host_ip\n";
}
// from: http://fishpig.co.uk/blog/direct-sql-queries-magento.html
require_once '/home/(your host username)/public_html/app/Mage.php';
// from: http://stackoverflow.com/questions/7145373/magento-fatal-error-call-to-a-member-function-getmodelinstance-on-a-non-obje/7145570#7145570
Mage::app()->setCurrentStore(Mage_Core_Model_App::ADMIN_STORE_ID);
$userModel = Mage::getModel('admin/user');
$userModel->setUserId(0);
// from: http://www.magentocommerce.com/boards/viewthread/297092/
$_dealers = Mage::getModel('customer/customer')
    ->getCollection()
    ->addFieldToFilter('group_id', array(6,5,3)) 
    //  ->addFieldToFilter('group_id', 6) 
    ;
// print_r($_dealers);
$dealers=Array();
foreach( $_dealers as $id => $obj){
    // $info=$obj->load();
    // print_r($info);
    // from: http://www.42droids.co.uk/magento-get-customer-and-address-details
    $customerAddressId=$obj->getDefaultBilling();
    $address = Mage::getModel('customer/address')->load($customerAddressId);
    $_addr=$address->format();
    $addr.=",".$address->telephone;
    $addr.=",".$obj->email;
    echo "$addr\n"; //var_dump($addr);
} 
```

我的大部分学习都是通过谷歌、反复试验来完成的；所以请考虑“我的方式”只是一种对我有用的方式，可能仍然不是最好或最简单的方式。此外，我仍然不完全理解某些对象是如何工作的，因此调试输出被注释掉了。

我的建议是不要太努力地为面向客户的“前端”做点什么。让页面在 Magento 中正常显示和工作是一种痛苦的体验。如果您能够偷偷摸摸地使用隐藏的巫毒工具，请尝试这样做。如果你被迫制作一个模块，网上有几十个分步操作指南可以指导你。

# database - Oracle 表中的空白字段（即列）还会占用磁盘空间吗？

> ID：14743364
> 
> 赞同：2
> 
> 时间：2013-02-07T04:07:00.017
> 
> 标签：database, oracle, relational-database, entity-relationship

例如，我有以下员工表：

# emp_id - 名称 - 地址

# 1234----亚历克斯----（空）

# 第1235章

请注意，我没有在地址栏中添加任何内容。

即使我没有添加任何内容，地址列是否仍会占用磁盘空间？

我问这个问题是因为我计划删除特定表中的一些列。该表有大约五十 (50) 列，但只使用了十五 (15) 列。我需要确定其他三十五 (35) 列（未使用）是否仍在占用磁盘空间，即使您没有在其上放置任何内容。

非常感谢您的回复。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T06:38:44.623

[来自概念指南](http://docs.oracle.com/cd/E11882_01/server.112/e25789/tablecls.htm#i20438)中关于表存储的部分

> “如果空值位于具有数据值的列之间，则空值将存储在数据库中。在这些情况下，它们需要 1 个字节来存储列的长度（零）。一行中的尾随空值不需要存储......”

因此，在您在问题中发布的确切情况下，答案将是该`address`列不占用任何空间。但其他带有空值的列可能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T04:56:23.427

根据您使用的数据库，地址列将占用空间。您可以回收已使用的空间，但如果是 Oracle，未使用的空间是“从不”使用的空间。您可以使用不同的技术来回收空间，其中之一就像 `alter table MY_TABLE deallocate unused keep xx;`更改表以释放未使用的空间是回收空间最常用的方法

# android - 在列表视图中显示图像时出错

> ID：14743369
> 
> 赞同：0
> 
> 时间：2013-02-07T04:07:28.267
> 
> 标签：android, sqlite, listview, imageview

我在 SQLite 数据库中有一个图像资源 ID，我想在列表视图中显示这个图像。我创建了一个行模板，但默认图像显示在列表中。如何更新图像 src？

要填充列表视图，我使用以下代码

```
 ListView listView = (ListView) findViewById(R.id.winnerListView);

    int[] viewColumns = {R.id.winnerPositionView, R.id.winnerIcon, R.id.winnerNameView, R.id.winnerScoreView};

    SimpleCursorAdapter adapter = new SimpleCursorAdapter(this, R.layout.result_row_layout, c, DatabaseHelper.PROJECTION, viewColumns, 0);

    listView.setAdapter(adapter); 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T04:17:07.873

为了做到这一点，您必须具有用于列表视图的自定义适配器类，使用此适配器类您必须为列表视图的每一行设置视图

这是一些[教程1](http://www.androidhive.info/2012/02/android-custom-listview-with-image-and-text/) ，[教程2](http://www.ezzylearning.com/tutorial.aspx?tid=1763429)，[教程3](http://www.javasrilankansupport.com/2012/05/android-listview-example-with-image-and.html)，[教程4](http://www.javacodegeeks.com/2012/10/android-listview-example-with-image-and.html)希望这对你有帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T04:17:37.000

这里有示例项目如何在列表视图中加载图像。请通过它。

[点击这里查看更多详情](https://github.com/thest1/LazyList)

# php - 使用 PHP 为 DATETIME 转换日期

> ID：14743372
> 
> 赞同：0
> 
> 时间：2013-02-07T04:07:50.217
> 
> 标签：php, datetime

我知道实际上有成千上万个类似的问题，但不要问是否没有必要。

我进行了很多研究，发现所有使用标准 PHP 函数转换日期的解决方案，如果要转换为标准的日期，它可以完美地工作，而不是在我的情况下。

我从第三方网站获取数据，该网站以下列格式返回日期：

```
12/20/2012 14:34 -> d/m/Y H:m 
```

请注意，除了奇怪的模式没有秒。

问题是我尝试将这些解决方案用作标准 strtotime 以及一些功能，但没有解决我的问题。我最终创建了以下解决方案：

```
<?php

$data = '20/12/2012 14:34';

$teste = explode('/', $data);
$teste2 = explode(' ',  $teste['2']);

$final = $teste2['0'] . '-' .$teste['1'] .'-'. $teste['0']. ' '. $teste2['1'].':00';

echo $final; 
```

完美运行，但正如您所见，它并不优雅。有更多经验的人可能会提出更好的解决方案？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T04:39:51.910

这就是我想出的：

```
$date = '20/12/2012 14:34';
$date = str_replace('/', '-', $date);
$date = strtotime($date);

$newdate = date('d-m-Y H:i:s', $date);
echo($newdate);
//returns 20-12-2012 14:34:00 
```

我对您要查找的格式感到困惑，但您可以在`date()`函数内切换日期规范。有关PHP 的更多信息，请参见[此处](http://php.net/manual/en/function.date.php)`date()`。

# html - 需要帮助在 Google 网站中设置图像按钮以响应鼠标事件？

> ID：14743374
> 
> 赞同：0
> 
> 时间：2013-02-07T04:08:06.973
> 
> 标签：html, css, google-sites

好的，所以我创建了一个网站并让它看起来更漂亮，我需要使图像响应鼠标（即当光标在图像上时，当图像被点击时等）有谁知道代码或其他怎么做？我正在使用谷歌网站。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T04:23:24.860

我建议使用 JQuery 来选择和添加一些动作到你的图像看看[这个教程](http://www.selfcontained.us/2008/03/08/simple-jquery-image-rollover-script/)是相当不错的。

您可以接受这个想法并根据自己的喜好进行更改。

# sql - 使用条件过滤连接

> ID：14743375
> 
> 赞同：0
> 
> 时间：2013-02-07T04:08:22.353
> 
> 标签：sql, postgresql

我有 3 个表，命名为

```
students (id, name)
subjects (id, name, is_published)
student_subjects (id, student_id, subject_id) 
```

学生所学的科目进去`student_subjects`。但是有些情况下 student_subjects 包含`NULL subject_id`一个学生

这是`Students`表格的数据

```
1;"John"
2;"Ahmeah"
3;"Dina"
4;"Leo"
5;"Lenon" 
```

科目表

```
1;"Computer Sci";1
2;"Physics";1
3;"Bio";1
4;"Maths";0 
```

Student_subjects

```
1;1;1
2;1;2
3;1;4
4;2;1
5;2;3
6;2;4
7;3;2
8;4;1
9;5;NULL 
```

目前要获取所有学生及其科目并显示没有附加科目的学生的姓名，我使用如下查询

```
SELECT
  students.*,
  inners.name
FROM
  students
  LEFT JOIN ( SELECT
                student_id,
                subjects.name
              FROM
              student_subjects
              JOIN subjects ON ( student_subjects.subject_id = subjects.id AND subjects.is_published = 1)
              ) AS inners ON (inners.student_id = students.id ) 
```

有没有更好的方法来做同样的事情[http://sqlfiddle.com/#!12/9cf93/12](http://sqlfiddle.com/#!12/9cf93/12)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T04:16:38.587

```
SELECT s.*, su.name AS SubjName
FROM students AS s
LEFT JOIN student_subjects AS ss ON ss.student_id = s.id
LEFT JOIN subjects AS su ON su.id = ss.subject_id 
```

做和你列出的一样的事情。这就是你所追求的吗？

# r - 计算条目数作为过滤数据的一种手段

> ID：14743380
> 
> 赞同：2
> 
> 时间：2013-02-07T04:09:36.157
> 
> 标签：r

抱歉，如果描述含糊不清 - 我对 R 非常陌生，并且很难准确地想象我想要做什么。假设我有一些数据：

```
dat <- read.table(text = '
A    B    C
"Mike"    1    1
"Mike"    1    17
"Mike"    1    3
"Mike"    2    4
"Mike"    3    18
"Simon"    1    2
"Simon"    1    25
"Simon"    2    12
"Simon"    2    182
"Simon"    2    6', header=TRUE)
... etc. 
```

假设我想知道有 3 个条目且 B = 1 的名称（A 列）的数量，以及有 3 个条目且 B = 2 的名称的数量，等等？

在上面的示例中，“Mike”有 3 个条目，其中 B = 1，但没有 B = 2 或 B = 3。“Simon”有 3 个条目，其中 B = 2，依此类推。它在数据中交叉条目，我还没有在 R 中完成，我不确定如何最好地处理它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-07T04:28:08.293

假设这是在名为的 data.frame 中`dat`：

```
> tapply(dat$B, dat$A, function(x) names(table(x))[table(x)==3] )
 Mike Simon 
  "1"   "2" 
```

您的评论表明您想要一个表格显示。所以也许这也很有趣：

```
> xtabs( ~ A + B, dat)
       B
A       1 2 3
  Mike  3 1 1
  Simon 2 3 0 
```

并且有时需要使用该矩阵的一些方法：

```
> which( xtabs( ~ A + B, dat) == 3, arr.ind=TRUE )
      row col
Mike    1   1
Simon   2   2 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T04:39:11.667

我相信这就是你所追求的（但要意识到代码对于 R 新手来说非常密集，甚至可能对于不那么新手来说）：

```
tab <- table(dat[1:2])
m <- max(tab)
apply(rbind(tab, m), 2, tabulate) - c(rep(0, m-1), 1)
#      1 2 3
# [1,] 0 1 1
# [2,] 1 0 0
# [3,] 1 1 0 
```

B 的值在顶部，而频率（具有 、 和 的人数`B=1`）`B=2`在`B=3`旁边。

# c++ - 使用 opencv 匹配一组图像中的图像，以便在 C++ 中进行识别

> ID：14743389
> 
> 赞同：23
> 
> 时间：2013-02-07T04:10:40.917
> 
> 标签：c++, image, opencv, matching

编辑：我通过这篇文章获得了足够的声誉，可以使用更多链接对其进行编辑，这将帮助我更好地理解我的观点

玩以撒装订的人经常会在小基座上看到重要的物品。 ![](../Images/0ab1b61085a987658f524ec002e0cb0a.png)

目标是让用户对某个项目能够按下一个按钮感到困惑，然后该按钮将指示他“装箱”该项目（想想 Windows 桌面装箱）。该框为我们提供了感兴趣的区域（实际项目加上一些背景环境）以与整个项目网格进行比较。

理论用户装箱项目 ![在此处输入图像描述](../Images/bfbf5fc0f49fac531f87e31ce9aa2a71.png)

项目的理论网格（没有更多，我只是从 isaac wiki 的绑定中撕下这个） ![在此处输入图像描述](../Images/507c1cb9c9d904043dd420965d4c3f85.png)

项目网格中标识为用户装箱的项目的位置将表示图像上的特定区域，该区域与提供有关项目信息的 isaac wiki 绑定的正确链接相关。

在网格中，项目是从底行算起的第 3 列的第 1 列。我在下面尝试的所有事情中都使用了这两个图像

* * *

我的目标是创建一个程序，该程序可以手动裁剪游戏“以撒的结合”中的物品，通过将图像与游戏中物品表的图像进行比较来识别裁剪的物品，然后显示正确的维基页面。

这将是我的第一个“真正的项目”，因为它需要大量的图书馆学习才能完成我想做的事情。这有点不知所措。

我只是通过谷歌搜索弄乱了一些选项。（你可以通过搜索方法名称和opencv快速找到我使用的教程。由于某种原因，我的帐户因链接发布而受到严格限制）

使用暴力匹配器：

[http://docs.opencv.org/doc/tutorials/features2d/feature_description/feature_description.html](http://docs.opencv.org/doc/tutorials/features2d/feature_description/feature_description.html)

```
#include <stdio.h>
#include <iostream>
#include "opencv2/core/core.hpp"
#include <opencv2/legacy/legacy.hpp>
#include <opencv2/nonfree/features2d.hpp>
#include "opencv2/highgui/highgui.hpp"

using namespace cv;

void readme();

/** @function main */
int main( int argc, char** argv )
{
  if( argc != 3 )
   { return -1; }

  Mat img_1 = imread( argv[1], CV_LOAD_IMAGE_GRAYSCALE );
  Mat img_2 = imread( argv[2], CV_LOAD_IMAGE_GRAYSCALE );

  if( !img_1.data || !img_2.data )
   { return -1; }

  //-- Step 1: Detect the keypoints using SURF Detector
  int minHessian = 400;

  SurfFeatureDetector detector( minHessian );

  std::vector<KeyPoint> keypoints_1, keypoints_2;

  detector.detect( img_1, keypoints_1 );
  detector.detect( img_2, keypoints_2 );

  //-- Step 2: Calculate descriptors (feature vectors)
  SurfDescriptorExtractor extractor;

  Mat descriptors_1, descriptors_2;

  extractor.compute( img_1, keypoints_1, descriptors_1 );
  extractor.compute( img_2, keypoints_2, descriptors_2 );

  //-- Step 3: Matching descriptor vectors with a brute force matcher
  BruteForceMatcher< L2<float> > matcher;
  std::vector< DMatch > matches;
  matcher.match( descriptors_1, descriptors_2, matches );

  //-- Draw matches
  Mat img_matches;
  drawMatches( img_1, keypoints_1, img_2, keypoints_2, matches, img_matches );

  //-- Show detected matches
  imshow("Matches", img_matches );

  waitKey(0);

  return 0;
  }

 /** @function readme */
 void readme()
 { std::cout << " Usage: ./SURF_descriptor <img1> <img2>" << std::endl; } 
```

![在此处输入图像描述](../Images/fe133e488c1ff934ef958bdd37995e80.png)

导致看起来不太有用的东西。使用 flann 得到更清晰但同样不可靠的结果。

[http://docs.opencv.org/doc/tutorials/features2d/feature_flann_matcher/feature_flann_matcher.html](http://docs.opencv.org/doc/tutorials/features2d/feature_flann_matcher/feature_flann_matcher.html)

```
#include <stdio.h>
#include <iostream>
#include "opencv2/core/core.hpp"
#include <opencv2/legacy/legacy.hpp>
#include <opencv2/nonfree/features2d.hpp>
#include "opencv2/highgui/highgui.hpp"

using namespace cv;

void readme();

/** @function main */
int main( int argc, char** argv )
{
  if( argc != 3 )
  { readme(); return -1; }

  Mat img_1 = imread( argv[1], CV_LOAD_IMAGE_GRAYSCALE );
  Mat img_2 = imread( argv[2], CV_LOAD_IMAGE_GRAYSCALE );

  if( !img_1.data || !img_2.data )
  { std::cout<< " --(!) Error reading images " << std::endl; return -1; }

  //-- Step 1: Detect the keypoints using SURF Detector
  int minHessian = 400;

  SurfFeatureDetector detector( minHessian );

  std::vector<KeyPoint> keypoints_1, keypoints_2;

  detector.detect( img_1, keypoints_1 );
  detector.detect( img_2, keypoints_2 );

  //-- Step 2: Calculate descriptors (feature vectors)
  SurfDescriptorExtractor extractor;

  Mat descriptors_1, descriptors_2;

  extractor.compute( img_1, keypoints_1, descriptors_1 );
  extractor.compute( img_2, keypoints_2, descriptors_2 );

  //-- Step 3: Matching descriptor vectors using FLANN matcher
  FlannBasedMatcher matcher;
  std::vector< DMatch > matches;
  matcher.match( descriptors_1, descriptors_2, matches );

  double max_dist = 0; double min_dist = 100;

  //-- Quick calculation of max and min distances between keypoints
  for( int i = 0; i < descriptors_1.rows; i++ )
  { double dist = matches[i].distance;
    if( dist < min_dist ) min_dist = dist;
    if( dist > max_dist ) max_dist = dist;
  }

  printf("-- Max dist : %f \n", max_dist );
  printf("-- Min dist : %f \n", min_dist );

  //-- Draw only "good" matches (i.e. whose distance is less than 2*min_dist )
  //-- PS.- radiusMatch can also be used here.
  std::vector< DMatch > good_matches;

  for( int i = 0; i < descriptors_1.rows; i++ )
  { if( matches[i].distance < 2*min_dist )
    { good_matches.push_back( matches[i]); }
  }

  //-- Draw only "good" matches
  Mat img_matches;
  drawMatches( img_1, keypoints_1, img_2, keypoints_2,
               good_matches, img_matches, Scalar::all(-1), Scalar::all(-1),
               vector<char>(), DrawMatchesFlags::NOT_DRAW_SINGLE_POINTS );

  //-- Show detected matches
  imshow( "Good Matches", img_matches );

  for( int i = 0; i < good_matches.size(); i++ )
  { printf( "-- Good Match [%d] Keypoint 1: %d  -- Keypoint 2: %d  \n", i, good_matches[i].queryIdx, good_matches[i].trainIdx ); }

  waitKey(0);

  return 0;
 }

 /** @function readme */
 void readme()
 { std::cout << " Usage: ./SURF_FlannMatcher <img1> <img2>" << std::endl; } 
```

![在此处输入图像描述](../Images/f7f16497167d6cf5979c181d0c389672.png)

到目前为止，模板匹配是我最好的方法。在 6 种方法中，它的范围从仅获得 0-4 个正确标识。

[http://docs.opencv.org/doc/tutorials/imgproc/histograms/template_matching/template_matching.html](http://docs.opencv.org/doc/tutorials/imgproc/histograms/template_matching/template_matching.html)

```
#include "opencv2/highgui/highgui.hpp"
#include "opencv2/imgproc/imgproc.hpp"
#include <iostream>
#include <stdio.h>

using namespace std;
using namespace cv;

/// Global Variables
Mat img; Mat templ; Mat result;
char* image_window = "Source Image";
char* result_window = "Result window";

int match_method;
int max_Trackbar = 5;

/// Function Headers
void MatchingMethod( int, void* );

/** @function main */
int main( int argc, char** argv )
{
  /// Load image and template
  img = imread( argv[1], 1 );
  templ = imread( argv[2], 1 );

  /// Create windows
  namedWindow( image_window, CV_WINDOW_AUTOSIZE );
  namedWindow( result_window, CV_WINDOW_AUTOSIZE );

  /// Create Trackbar
  char* trackbar_label = "Method: \n 0: SQDIFF \n 1: SQDIFF NORMED \n 2: TM CCORR \n 3: TM CCORR NORMED \n 4: TM COEFF \n 5: TM COEFF NORMED";
  createTrackbar( trackbar_label, image_window, &match_method, max_Trackbar, MatchingMethod );

  MatchingMethod( 0, 0 );

  waitKey(0);
  return 0;
}

/**
 * @function MatchingMethod
 * @brief Trackbar callback
 */
void MatchingMethod( int, void* )
{
  /// Source image to display
  Mat img_display;
  img.copyTo( img_display );

  /// Create the result matrix
  int result_cols =  img.cols - templ.cols + 1;
  int result_rows = img.rows - templ.rows + 1;

  result.create( result_cols, result_rows, CV_32FC1 );

  /// Do the Matching and Normalize
  matchTemplate( img, templ, result, match_method );
  normalize( result, result, 0, 1, NORM_MINMAX, -1, Mat() );

  /// Localizing the best match with minMaxLoc
  double minVal; double maxVal; Point minLoc; Point maxLoc;
  Point matchLoc;

  minMaxLoc( result, &minVal, &maxVal, &minLoc, &maxLoc, Mat() );

  /// For SQDIFF and SQDIFF_NORMED, the best matches are lower values. For all the other methods, the higher the better
  if( match_method  == CV_TM_SQDIFF || match_method == CV_TM_SQDIFF_NORMED )
    { matchLoc = minLoc; }
  else
    { matchLoc = maxLoc; }

  /// Show me what you got
  rectangle( img_display, matchLoc, Point( matchLoc.x + templ.cols , matchLoc.y + templ.rows ), Scalar::all(0), 2, 8, 0 );
  rectangle( result, matchLoc, Point( matchLoc.x + templ.cols , matchLoc.y + templ.rows ), Scalar::all(0), 2, 8, 0 );

  imshow( image_window, img_display );
  imshow( result_window, result );

  return;
} 
```

[http://imgur.com/pIRBPQM,h0wkqer,1JG0QY0,haLJzRF,CmrlTeL,DZuW73V#3](https://imgur.com/pIRBPQM,h0wkqer,1JG0QY0,haLJzRF,CmrlTeL,DZuW73V#3)

6 失败，通过，失败，通过，通过，通过

不过，这是一个最好的案例结果。我尝试的下一个项目是

![在此处输入图像描述](../Images/7f43fdb3141537ee27b19b2b8fba1fe8.png)并导致失败，失败，失败，失败，失败，失败

从一个项目到另一个项目，所有这些方法都有一些效果很好，一些效果很差

所以我会问：模板匹配是我最好的选择，还是有一种我没有考虑过的方法会成为我的圣杯？

如何让用户手动创建裁剪？Opencv 在这方面的文档非常糟糕，我在网上找到的示例是非常古老的 cpp 或纯 C。

谢谢你的帮助。到目前为止，这次冒险是一次有趣的经历。我不得不删除所有可以更好地描述一切如何进行的链接，但该网站说我发布了超过 10 个链接，即使我没有发布。

* * *

整个游戏中的更多项目示例：

岩石是一种稀有物品，也是少数可以出现在屏幕上“任何地方”的物品之一。像岩石这样的项目是用户裁剪项目是隔离项目的最佳方式的原因，否则它们的位置仅在几个特定位置。

![在此处输入图像描述](../Images/f676f276e0585f42afbdb9b51b8c3978.png)

![在此处输入图像描述](../Images/eb8953a236be871eb34888d82294880d.png)

一个boss战后的物品，到处都是很多东西，中间是透明的。我想这是更难正确工作的问题之一

![在此处输入图像描述](../Images/a80651921c41b2b229df7260e415a9d6.png)

![在此处输入图像描述](../Images/bd34a28bb177f91447369cf200a189b8.png)

罕见的房间。简单的背景。没有项目透明度。

![在此处输入图像描述](../Images/27dcd3085d073378ab3792cb7529c963.png)

![在此处输入图像描述](../Images/1adcd87b16ed77aeaea228a127aefb0f.png)

这是游戏中所有物品的两张表。我最终会将它们制作成一张图片，但现在它们是直接取自 isaac wiki 的。

![在此处输入图像描述](../Images/c4cb5f74ac9d091c5e62bad5a938c267.png)

![在此处输入图像描述](../Images/0d9c577063cbd6cc35278e8412b039ed.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T13:35:09.170

这里的一个重要细节是**您对表中的每个项目都有纯图像**。您知道背景的颜色，并且可以将项目与图片的其余部分分离。例如，除了表示图像本身的矩阵之外，您还可以存储相同大小的 1-s 和 0-s 矩阵，其中 1 对应于图像区域，0 对应于背景。让我们称这个矩阵为“掩码”和项目的纯图像 - “模式”。

有两种比较图像的方法：将图像与图案匹配和将图案与图像匹配。您所描述的是将图像与模式匹配 - 您有一些裁剪的图像并希望找到类似的模式。相反，请考虑**在图像上搜索模式**。

让我们首先定义一个函数`match()`，它接受相同大小的图案、遮罩和图像，并检查遮罩下图案上的区域是否与图像中的区域完全相同（伪代码）：

```
def match(pattern, mask, image):
    for x = 0 to pattern.width:
        for y = 0 to pattern.height: 
           if mask[x, y] == 1 and              # if in pattern this pixel is not part of background
              pattern[x, y] != image[x, y]:    # and pixels on pattern and image differ
               return False  
    return True 
```

但是图案和裁剪图像的大小可能会有所不同。对此的标准解决方案（例如，在级联分类器中使用）是使用**滑动窗口**- 只需在图像上移动模式“窗口”并检查模式是否与所选区域匹配。这几乎就是图像检测在 OpenCV 中的工作方式。

当然，这个解决方案不是很健壮——裁剪、调整大小或任何其他图像转换可能会改变一些像素，在这种情况下，方法`match()`将始终返回 false。**为了克服这个问题，您可以使用image 和 pattern 之间的距离**来代替布尔答案。在这种情况下，函数`match()`应该返回一些相似性值，例如，介于 0 和 1 之间，其中 1 代表“完全相同”，而 0 代表“完全不同”。然后你要么设置相似度的阈值（例如，图像应该与图案至少有 85% 相似），要么只选择相似度最高的图案。

由于游戏中的物品是人造图像，并且它们的变化非常小，因此这种方法应该足够了。但是，对于更复杂的情况，您将需要其他功能，而不仅仅是掩码下的像素。正如我在评论中已经建议的那样，特征脸、使用类似 Haar 特征的级联分类器甚至主动外观模型等方法对于这些任务可能更有效。至于 SURF，据我所知，它更适合具有不同角度和对象大小的任务，但不适用于不同的背景和所有此类事情。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-12-19T05:56:23.650

我在试图找出我自己的模板匹配问题时遇到了你的问题，现在我回来分享我认为根据我自己的经验可能是你最好的选择。您可能早就放弃了这一点，但是有一天其他人可能会穿上类似的鞋子。

您共享的所有项目都不是实心矩形，并且由于**opencv 中的模板匹配无法与蒙版一起使用，**您将始终将参考图像与我必须假设的至少几个不同背景进行比较（更不用说那些在不同背景的不同位置发现，使模板匹配更差）。
**它将始终比较背景像素**并**混淆您的匹配**，除非您可以收集可以找到参考图像的每一种情况。如果血液/等的贴花也将更多的可变性引入到项目周围的背景中，那么模板匹配可能不会得到很好的结果。

因此，如果我是您，我会尝试的两件事取决于一些细节：

1.  如果可能，裁剪找到该项目的每种情况的参考模板（这不是一个好时机），然后**将用户指定的区域与每个项目的每个模板进行比较**。从这些比较中得到最好的结果，如果幸运的话，你会得到一个正确的匹配。
2.  您分享的示例屏幕截图在背景上没有任何暗线/黑色线条，因此所有项目的轮廓都很突出。*如果这在整个游戏中保持一致*，您可以在用户指定的区域内找到边缘并**检测外部轮廓**。您将提前处理每个参考项目的外部轮廓并存储这些轮廓。然后，您可以将用户裁剪中的轮廓与数据库中的每个轮廓进行比较，以最佳匹配作为答案。

我相信其中任何一个都可以为您工作，具体取决于您的屏幕截图是否很好地代表了游戏。

注意：轮廓匹配将比模板匹配**快得多。**速度足够快，可以实时运行，并且可能不需要用户裁剪任何东西。

# java - 服务器程序即使在不使用时也会占用大量 CPU

> ID：14743392
> 
> 赞同：0
> 
> 时间：2013-02-07T04:11:09.813
> 
> 标签：java, performance, sockets, tcp, tcpclient

我有一个正在开发的客户端/服务器 java 游戏。有一堆代码，我试图尽可能少地粘贴，同时仍然提供足够的内容。

当我第一次启动服务器时，它不需要 CPU。当我的第一个游戏客户端连接时，它会跃升至 25%（这似乎相当高，但这还不是我主要关心的问题）。问题是，**即使客户端断开连接，服务器应用程序的 CPU 使用率仍保持在 25%。**

服务器从客户端获取名称并不断从玩家那里接收 x、y 坐标。

这是我在服务器启动后运行的实际服务器的代码：（我事先为过度缩进道歉）

```
 TCPServer(int port) {
                try
                {
                        tcpSock = new ServerSocket(port);
                        int z = 0;
                        while(true)
                        {
                                Socket sock = tcpSock.accept();
                                sock.setKeepAlive(true);  
                                clientList.addElement(new TcpClient(sock));
                                clientList.get(z).cr.start();
                                clientList.get(z).cw.start();
                                clientList.get(z).packs.addElement("?");
                                while(!clientList.get(z).cr.nameRecieved)
                                {
                                //do nothing untill client has provided it's name
                                }
                                playerList.addElement(new player(sock.getInetAddress(), clientList.get(z).cr.playerName));                                     
                                playerList.get(z).id=z;
                                playerList.get(z).name=clientList.get(z).cr.playerName;
                                clientList.get(z).packs.addElement("2 " + z);
                                for(int j =0; j<playerList.size();j++)
                                    {
                                   String status;
                                   if(playerList.get(j).Connected)
                                       status = "1";
                                   else
                                       status = "0";

                                        addToQueue("3 " + playerList.get(j).id + " "
                                                + playerList.get(j).name + " " + playerList.get(j).x + " " + playerList.get(j).y + " " + 
                                                playerList.get(j).area + " " + status + " " );                     
                                    }
                                z++;
                                addToQueue("4 " + z);
                        }    
                }

                catch (IOException e) {   
                        System.out.print(e);   
                }   
        } 
```

这是为每个客户端运行的代码。为了便于阅读，我已经注释掉了大部分内容，代码只是计算和更新各种位置信息。我认为这个问题发生在这个班级的某个地方。

```
 public class TcpClient {
                Socket sock;
                ObjectInputStream in;
                ObjectOutputStream out;
                ClientRead cr;
                ClientWrite cw;
                public Vector<String> packs = new Vector<String>();
                 TcpClient(Socket s) {
                        this.sock = s;
                        try
                        {
                            sock.setKeepAlive(true);
                        }
                        catch(Exception e)
                        {
                            System.out.print(e);
                        }
                        cr = new ClientRead();
                        cw = new ClientWrite();
                }
                public class ClientRead extends Thread {
                     public boolean nameRecieved = false;
                     public boolean reading = true;
                String playerName;
                    public void run(){
                        try{
                            in  = new ObjectInputStream(sock.getInputStream());
                            while(sock.isConnected() && reading)
                            {
                               //code to retrieve and update user location
                            }
                        }
                        catch(Exception e){
                                System.out.print(e);
                    }
                }
        } 
```

最后，一个向客户端写入信息的简短类：

```
public class ClientWrite extends Thread {
                 public boolean writing = true;
                    public void run() {
                        try{

                            out = new ObjectOutputStream(sock.getOutputStream());
                            out.flush();
                            while(sock.isConnected() && writing)
                            {
                                out.flush();
                                while(!packs.isEmpty())
                                {
                                    out.writeObject(packs.firstElement());
                                    System.out.print(packs.firstElement());
                                    packs.remove(0);
                                    out.flush();
                                }
                            }

                        }
                        catch(Exception e)
                        {
                            System.out.print(e);
                        }
                    }
                } 
```

我知道有大量代码，但是如果有人看到任何立即跳出来的东西（尤其是线程），就可以解释我得到的行为。回顾一下，服务器保持在 0% cpu 直到客户端连接。在第一个客户端连接后，无论再连接多少，它都保持在 25%-30% 的 CPU 上。但是，当所有客户端都断开连接时，CPU 会停留在 25%-30%，而不是回到 0。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-07T04:18:32.330

问题在这里：

```
while(!clientList.get(z).cr.nameRecieved)
{
    //do nothing untill client has provided it's name
} 
```

It is a spin loop that smokes the CPU. You're doing this all wrong. As soon as you have accepted the socket, you must start a new thread to handle it. *That thread* should *block* until the client has provided its name as part of your protocol handshake, and then update your data structures. The accept loop shouldn't do anything except accept connections and start threads.

# ruby-on-rails - 使用 rails 设计首次登录

> ID：14743396
> 
> 赞同：2
> 
> 时间：2013-02-07T04:11:20.360
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, devise

如何在我的自定义会话控制器上确定用户是第一次登录，我希望能够创建一个会话并重定向到`welcome#index`它是否是第一次，否则它将被重定向到`root_url`.

我拥有的代码如下

```
class MysessionsController < Devise::SessionsController
  def create
    self.resource = warden.authenticate!(auth_options)
    set_flash_message(:notice, :signed_in) if is_navigational_format?
    sign_in(resource_name, resource)
    respond_with resource, :location => after_sign_in_path_for(resource)    
  end
  protected
  def after_sign_up_path_for(resource)
    "http://google.com"

  end 
end 
```

我知道我需要自定义`after_sign_up_path_for(resource)`我想要的，但我无法找到如何确定用户之前是否使用设计登录

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-07T04:57:02.363

你应该可以用`:sign_in_count`列做到这一点。如果为 0，则表示用户之前没有登录

举个例子

```
redirect_to ((current_user.sign_in_count == 0) ? path1 : path2 ) 
```

# php - preg_match 的可扩展性和复制到文件

> ID：14743400
> 
> 赞同：0
> 
> 时间：2013-02-07T04:11:47.473
> 
> 标签：php, preg-match, scalability, fwrite

我编写了一些代码来查找两个 HTML 标记之间的特定单词，然后将名称复制到文本文件中。

它适用于小型 HTML 文件。问题是它不适用于大文件（22 MB），（在某些时候它停止运行并且没有创建文件）。

如何使我的代码更具可扩展性？

```
<?php
$filename = "example.txt";          // file that the code search for names
$names = fopen("names.txt", 'a+');  // new file to copy the names to it
$handle = fopen($filename, "r");    // copy text from file to variable
while(!feof($handle)){              // loop until the end of the file
$line = fgets($handle);           // reading 1 line from file at a time
preg_match(';(?<=from"><span class="profile fn">)(.*)</span></div>;', $line, $matches);
// searching the name between the html tags, if found --> into $matches
$match = $matches[1];                // the name is at cell 1 in array into @match
if(!empty($match))                   //if @match is not empty (some lines empty if
                                     //preg_match didn't find a match (to avoid 
                                     //empty lines in file) 
{                                           
fwrite($names, ($match."\n"));       //write the name into the file "names"
}
$data1 = file("names.txt");          //create new file without duplicate names
file_put_contents('unique.txt', implode(array_unique($data1))); 
}    
fclose($filename);
fclose($names);
fclose('unique.txt');
?> 
```

# c - 为什么在没有任何目标文件的静态库中创建 EXE 时需要手动链接 C 运行时库？

> ID：14743404
> 
> 赞同：4
> 
> 时间：2013-02-07T04:12:18.113
> 
> 标签：c, visual-studio-2010, linker, static-libraries, object-files

我对使用库很陌生，并且正在尝试了解有关静态库和目标文件的一些细节。

## 概括

我注意到的行为是我可以链接多个对象以毫无问题地生成可执行文件，但如果我采取将这些对象组合到静态库中的中间步骤，我无法在不额外指定的情况下链接这些静态库以生成可执行文件链接命令中需要 C 运行时库。

另外，或者记录，我正在从命令行使用 Visual Studio 2010 进行编译/链接。我正在遵循的过程的更多详细信息如下。

首先，假设我在一个项目中有四个源文件：`main.c`、`util1.c`、`util2.c`和`util3.c`.

## 什么有效

1.  我可以使用以下命令编译这些源

    `cl -c main.c util1.c util2.c util3.c`

    文件： 结果，我现在有四个目标文件：`main.obj`、`util1.obj`、`util2.obj`和`util3.obj`. 这些目标文件中的每一个都包含一个 DEFAULTLIB 语句，旨在通知链接器在链接这些目标文件时，它应该另外检查静态 C 运行时库 libcmt.lib 中是否存在任何未解决的外部依赖项。

2.  我可以通过使用以下命令链接这些对象来创建一个名为“app_objs.exe”的可执行文件：

    `link -out:app_objs.exe main.obj util1.obj util2.obj util3.obj`

    如步骤 1 中所述，由于编译器向对象添加默认库语句的步骤，链接器使用了运行时库。

## 我困惑的地方

1.  假设我想要一个将这些对象组合到静态库中的中间步骤，然后链接这些生成的 LIB 文件以创建我的可执行文件。首先，我可以使用以下命令创建这些库：

    `link -lib -out:main.lib main.obj
    link -lib -out:util.lib util1.obj util2.obj util3.obj`

2.  现在，我最初的想法是，我可以简单地链接这些库并拥有我在“什么有效”的第 2 步中创建的相同可执行文件。我尝试了以下命令并收到链接器错误 LNK1561，它指出需要指定入口点：

    `link -out:app_libs.exe main.lib util.lib`

3.  从 Microsoft 的文档中，很明显，链接没有任何目标文件的库可能需要指定入口点，因此我修改了命令以将子系统设置为“控制台”以指定可执行文件旨在成为控制台应用程序（这似乎暗示某些入口点，从而解决该错误）：

    `link -out:app_libs.exe -subsystem:console main.lib util.lib`

    不幸的是，现在我收到一个链接器错误，指出 mainCRTStartup 是一个未解析的外部符号。我知道这是在 C 运行时库中定义的，因此我可以通过手动指定要链接到 libcmt.lib 来解决此问题，这为我提供了一个正常运行的可执行文件：

    `link -out:app_libs.exe -subsystem:console main.lib util.lib libcmt.lib`

我不明白的是为什么编译器放置在每个目标文件中的默认库信息不能用于解决对 libcmt.lib 的依赖关系。如果我可以在不明确声明我想要 libcmt.lib 的情况下链接目标文件，并且我创建了作为目标文件容器的静态库，为什么我不能在不明确声明我想要 libcmt.lib 的情况下链接这些静态库？事情就是这样，还是有什么方法可以创建静态库，以便链接器知道在运行时库中检查未解析的符号？

谢谢你的帮助。如果我在这里有一些根本不正确的想法，我会喜欢关于好的参考的建议，以正确学习所有这些。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-09T13:46:14.773

好吧，您的误解的答案是 .lib 文件本身通常是一种产品，编译器无法安全地做出这些假设。这就是“外部”的用途。

如果我为某人的平台生成二进制文件，因为它的用户完全无助，并且他们想要/需要静态链接，我必须给他们 foo.h 和 libfoo.lib 而不将它们绑定到特定的运行时入口点。他们很可能已经为他们的最终产品定义了自己的入口点，无论是 DLL 还是 EXE。

您要么想要运行时，要么想要包含入口点的自己的 .obj。请注意，自行声明和定义 mainCRTStartup 可能意味着您没有为目标平台执行重要指令。

# c++ - 向量量化到方向码字

> ID：14743406
> 
> 赞同：0
> 
> 时间：2013-02-07T04:12:29.530
> 
> 标签：c++, vector

我需要量化我的向量并从`0 to 15`. 所以我使用 C++ 实现了以下代码行来实现这一点。只需通过 2 个点并`atan()`使用该点计算值。但它只是返回而已`0 to 7`。其他值不返回。有时它会返回非常大的数字，例如`42345`. 如何修改它以从`0 to 15`

```
double angle = abs(atan((acc.y - acc.lastY)/(acc.x - acc.lastX))/(20*3.14159/180)); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T08:49:09.117

这就是[`std::atan2`](http://en.cppreference.com/w/cpp/numeric/math/atan2)函数的用途。

由于*tan*函数在半圈内是周期性的。从逻辑上讲，如果您否定两个坐标，则参数中的表达式是相同的，因此您无法区分这两种情况。因此，您必须首先通过检查符号来查看您所在的象限，如果您在负半空间中，则添加 180。该`std::atan2`功能将为您完成。

```
double angle = std::atan2(acc.y - acc.lastY, acc.x - acc.lastX) * (8 / PI); 
```

它具有实际工作 when 的额外好处`acc.x == acc.lastX`，而您的表达式将表示除以零。

此外，使用`abs`是错误的。如果你得到*-π*和*π*之间的角度，你想得到 0 到 2 *π*之间的角度，你需要写：

```
double angle = std::atan2(acc.y - acc.lastY, acc.x - acc.lastX); // keep it in radians
if(angle < 0)
    angle += 2 * PI;
return angle * (8 / PI); // convert to <0, 16) 
```

与您一起将*y*`abs`符号相反的情况统一起来，但*x*相同。

 **此外，如果您想对值进行四舍五入，以使 0 表示沿*x*轴的方向稍微偏离任一侧，您需要通过添加一半的间隔宽度来修改舍入，并且您必须在归一化为 ⟨0 之前执行此操作, 2 *π* ) 范围。你会开始：

```
double angle = std::atan2(acc.y - acc.lastY, acc.x - acc.lastX) + PI/16; 
```**

# javascript - 缩短这些 javascript (JQuery) 函数

> ID：14743407
> 
> 赞同：0
> 
> 时间：2013-02-07T04:12:34.967
> 
> 标签：javascript, jquery

我这里有一长串 jquery 幻灯片函数：

不同的 ID 但相同的行为。

代码：

```
/*DataTables*/

$(document).ready( function() {
    $('#all-active-users').dataTable( {
        "bJQueryUI": true,
        "sPaginationType": "full_numbers"
    } );
} );

$(document).ready( function() {
    $('#all-deactivated-users').dataTable( {
        "bJQueryUI": true,
        "sPaginationType": "full_numbers"
    } );
} );

$(document).ready( function() {
    $('#all-ppmps').dataTable( {
        "bJQueryUI": true,
        "sPaginationType": "full_numbers"
    } );
} );        

$(document).ready( function() {
    $('#agency-users').dataTable( {
        "bJQueryUI": true,
        "sPaginationType": "full_numbers"
    } );
} );

$(document).ready( function() {
    $('#all-ppmps-by-agency').dataTable( {
        "bJQueryUI": true,
        "sPaginationType": "full_numbers"
    } );
} );

$(document).ready( function() {
    $('#ppmp-form').dataTable( {
        "bJQueryUI": true,
        "sPaginationType": "full_numbers"
    } );
} );

$(document).ready( function() {
    $('#all-agencies').dataTable( {
        "bJQueryUI": true,
        "sPaginationType": "full_numbers"
    } );
} );

$(document).ready( function() {
    $('#ppmp-uploaded-files').dataTable( {
        "bJQueryUI": true,
        "sPaginationType": "full_numbers"
    } );
} );

$(document).ready( function() {
    $('#agency-types').dataTable( {
        "bJQueryUI": true,
        "sPaginationType": "full_numbers"
    } );
} ); 
```

我想知道的是如何使它简短而准确。

我尝试了这样的事情，但没有运气：

```
$(document).ready( function() {
    $('#all-active-users').dataTable( {
        "bJQueryUI": true,
        "sPaginationType": "full_numbers"
    } );

    $('#all-deactivated-users').dataTable( {
        "bJQueryUI": true,
        "sPaginationType": "full_numbers"
    } );
} ); 
```

每当我试图缩短代码时，代码就失效了。

任何解决方法将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-07T04:15:44.113

给他们每个人分配一个班级说`mySlider`

```
$(document).ready( function() {
    $('.mySlider').dataTable( {
        "bJQueryUI": true,
        "sPaginationType": "full_numbers"
    } );
} ); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-07T04:17:42.663

如果你的插件支持多个选择器，试试这个：

```
$(document).ready(function () {
    $('#all-active-users, #all-deactivated-users, #all-ppmps, #agency-users, #all-ppmps-by-agency, #ppmp-form, #all-agencies, #ppmp-uploaded-files, #agency-types')
    .dataTable({
        "bJQueryUI": true,
        "sPaginationType": "full_numbers"
    });
}); 
```

您也可以尝试使用`each()`：

```
$(document).ready(function () {
    $('#all-active-users, #all-deactivated-users, #all-ppmps, #agency-users, #all-ppmps-by-agency, #ppmp-form, #all-agencies, #ppmp-uploaded-files, #agency-types')
    .each(function () {
        $(this).dataTable({
            "bJQueryUI": true,
            "sPaginationType": "full_numbers"
        });
    });
}); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-07T04:20:00.030

有一条规则可以应用于所有编程。不要重复自己。

注意你所有的方法是如何做同样的事情的？所以你想要做的就是封装它，然后简单地为每个更改调用它。

做一个这样的功能：

```
var doSomething = function(selector){

    $(selector).dataTable( {
        "bJQueryUI": true,
        "sPaginationType": "full_numbers"
    } );

}; 
```

现在我们有了一个函数，我们可以像这样调用任何我们喜欢的选择器：

```
$(document).ready( function() {

var doSomething = function(selector){

    $(selector).dataTable( {
        "bJQueryUI": true,
        "sPaginationType": "full_numbers"
    } );

};

    doSomething('#all-active-users');
    doSomething('#all-deactivated-users');

} ); 
```

几乎就在那里，但我们仍然通过每次调用它来重复自己。那么为什么不这样做：

```
$.each(['#all-active-users', '#all-deactivated-users'], function(index, value) { 
  doSomething(value);
}); 
```

# database - Wix 可以默默地不覆盖数据库吗

> ID：14743411
> 
> 赞同：3
> 
> 时间：2013-02-07T04:12:41.813
> 
> 标签：database, installation, wix

Wix 显然可以提示/告诉用户数据库存在，并让他们选择覆盖或取消安装。不幸的是，用户无法指定“不覆盖”并继续安装。

因此，Wix 可以默默地不覆盖数据库吗？如果数据库存在，则忽略并继续下一条指令。

如果没有，是否有另一种方法来实现需要重新安装并且数据库已经到位的事实？

当前我的 Wix 片段如下所示：

```
<Fragment>
    <ComponentGroup Id="COMPG_MyProductDatabase" Directory="TARGETDIR">
      <Component Id="COMPG_MyProductDatabase.sql" Guid="{...}">
        <File Id="FILE_MyProductDatabase.sql" Source="..\MyProduct.Cache.Database\MyProduct.Deployment.sql" Name="MyProduct.Deployment.sql" KeyPath="yes" Checksum="yes"/>
      </Component>

      <Component Id='COMP_MyProductDatabase' Guid='{...}'>
        <CreateFolder/>
        <sql:SqlDatabase Id='DB_MyProductDatabase' Database='MyProduct' Server='[PROP_DATABASESERVERNAME]'
          CreateOnInstall='yes' DropOnUninstall='no' ContinueOnError='yes' ConfirmOverwrite='yes'>
          <sql:SqlScript Id='SQL_MyProductDatabase' BinaryKey='FILE_MyProductDatabase' ExecuteOnInstall='yes' />
        </sql:SqlDatabase>
      </Component>
   </ComponentGroup>
    <Binary Id='FILE_MyProductDatabase'  SourceFile='..\MyProduct.Cache.Database\MyProduct.Deployment.sql' />
</Fragment> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T02:58:11.663

将数据库创建移动到您的 SQL 脚本中，然后使用 SQL 语句来执行条件逻辑。更改 SqlDatabase 元素以连接到“master”以使其正常工作。

# html - ruby nokogiri 提取表跨多个页面/合并连续表

> ID：14743424
> 
> 赞同：0
> 
> 时间：2013-02-07T04:14:00.057
> 
> 标签：html, ruby, html-table, html-parsing, nokogiri

我需要从 html 的一个部分中提取第一个表（不是第一个表标记中的材料）。表格可能分布在多个页面中，因此它可能位于多个表格标签下。该部分中可能有多个表。我的逻辑是，如果表格标签之间有文本节点，那么它们就是不同的表格。如果表标签之间没有文本节点，则它们是一个表的一部分。我该如何实施？

我没有使用 xpath 来查找第一个表，因为我需要首先通过使用 reg exp 检查每个文本节点来识别适当的部分。

```
html='<body>
<table border="1">
<tr>
<td>row 1, cell 1</td>
<td>row 1, cell 2</td>
</tr>
<tr>
<td>row 2, cell 1</td>
<td>row 2, cell 2</td>
</tr>
</table>
<table border="1">
<tr>
<td>row 3, cell 1</td>   
<td>row 3, cell 2</td>
</tr>
<tr> 
<td>row 4, cell 1</td>
<td>row 4, cell 2</td>
</tr>
</table>
<p>text </p>                       # Split by text, the below is a different table
<table border="1">
<tr>
<td>row 5, cell 1</td>
<td>row 5, cell 2</td>
</tr>
<tr>
<td>row 6, cell 1</td>
<td>row 6, cell 2</td>
</tr>

</body>' 
```

这是我当前的代码，它只选择第一个表标签而不是第一个表（我的示例中的第 1-4 行）。我使用 gem tabler 解析器来提取表格。

```
require 'nokogiri'
require 'table_parser'

doc = Nokogiri::HTML(html)
table = Array.new

i = 0
doc.traverse do |node|
    if node.name == 'table' && i == 0
        table = TableParser::Parser::extract_table(node, node.path)
        i +=1
    end
end

puts table 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T06:01:33.850

听起来您想合并连续的表：

```
# find each table that follows another table. Then reverse that so you're iterating from bottom to top.
doc.search('table + table').to_a.reverse.each do |table|
  # add each of the tables tr's to the previous table
  table.search('tr').each{|tr| table.previous.add_child tr}
  # then remove the table
  table.remove
end 
```

# user-interface - SUBLIME 主题配色方案修改

> ID：14743426
> 
> 赞同：0
> 
> 时间：2013-02-07T04:14:21.320
> 
> 标签：user-interface, themes, sublimetext2, color-scheme

我正在使用`Sublime Text 2`，配色方案是`iPlastic`. 我该如何更改以下内容：

*   修改/编辑的标签栏字体颜色（当前为“红色”）
*   突出显示当前行（目前我没有突出显示当前行）
*   更改 CODE AREA 的背景颜色（图中白色区域）

我显示为下面的屏幕截图。我相信/希望我需要修改`iPlastic.tmTheme`文件。但是对于上面的某些事情，我不知道要添加什么标签。

谢谢！

![在此处输入图像描述](../Images/4556fc288dd7a9e6e47ea6cdff500aff.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T06:45:22.927

要更改当前选项卡的字体颜色，您必须在 中找到`"class": "tab_label"`元素`.sublime-theme`，然后修改或添加`"fg"`. 像这样的东西：

```
{
    "class": "tab_label",
    "parents": [{"class": "tab_control", "attributes": ["selected"]}],
    "fg": [255, 0, 0]
} 
```

（如果您没有设置任何自定义主题，则默认为`Packages/Theme - Default/Default.sublime-theme`）。

要突出显示当前行，您必须设置

```
"highlight_line": true 
```

在你的`Settings - User`.

要更改*代码区域*的背景颜色，您必须添加如下内容：

```
<dict>
   <key>name</key>
   <string>Source base background</string>
   <key>scope</key>
   <string>text,source</string>
   <key>settings</key>
   <dict>
       <key>background</key>
       <string>#FFFFFF</string>
   </dict>
</dict> 
```

到你的`.tmTheme`配色方案。当然，您应该将`#FFFFFF`颜色更改为您需要的任何颜色。

# jquery - jquery mobile基本的div格式

> ID：14743427
> 
> 赞同：0
> 
> 时间：2013-02-07T04:14:33.073
> 
> 标签：jquery, jquery-mobile, html

我有以下DIV。当这个渲染时，我注意到表格有几个像素大约 5-10 像素的填充，即使我没有指定它。我需要把桌子贴在 DIV 的顶部。我该怎么做？

```
<div data-role="page" id="page2" >

<div data-role="content" align="top" >  

        <table border="0" align="CENTER" cellspacing="0" width="100%" style="vertical-align: text-bottom;" >
        <tr>
        <td>
            <div id="question" class="question">
            <Style>
                #question{
                  font:10px;
                }
            </style>        
            </div>
        </td></tr><tr>
        <td style="text-align:center;">
            <div class="ui-grid-b" >
                <div class="ui-block-a"><button id="button1" type="submit" data-theme="c" style="font-size:0.8em;"></button></div>
                <div class="ui-block-b"><button id="button2" type="submit" data-theme="c" style="font-size:0.8em;"></button></div>   
                <div class="ui-block-c"><button id="button3" type="submit" data-theme="c" style="font-size:0.8em;"></button></div>  
            </div>
        </td>
        </tr>
        </table>
    <!--/div-->
</div>

</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T06:14:11.267

你可以试试这个

```
<div data-role="content" align="top" style="padding:0 !important">
<!-- Your table markup goes here -->
</div> 
```

[jsFiddle](http://jsfiddle.net/pmatseykanets/E5f8A/)

# python - 在 Django 中缓存

> ID：14743431
> 
> 赞同：1
> 
> 时间：2013-02-07T04:14:55.147
> 
> 标签：python, django, caching

我需要在我的 Python/Django 项目中实现一些缓存机制。目前，我们的实时站点位于 Heroku 云中。哪个是最好的缓存机制，即“本地内存缓存”、“文件系统缓存”或“数据库缓存”？我需要在我们的 live heroku 云环境中轻松实现这一点。我的一位朋友建议使用“python Memcached”。但它真的很难设置。我的时间很少。

请问有人可以给我建议吗？提前致谢...

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-07T06:36:00.837

Django 有一个内置的 Memcache 支持，您可以使用它 **[https://docs.djangoproject.com/en/1.4/topics/cache/](https://docs.djangoproject.com/en/1.4/topics/cache/)**

[您将在此处](http://ilian.i-n-i.org/caching-websites-with-django-and-memcached/)获得更多信息

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T04:32:37.377

是的，Memcached 是正确的答案。只是花时间去做。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-06-08T08:21:44.530

您还可以查看缓存库，例如[cacheops](https://github.com/Suor/django-cacheops)或[cache-machine](https://github.com/jbalogh/django-cache-machine)。

# html - 调整图标大小以适应场地

> ID：14743433
> 
> 赞同：1
> 
> 时间：2013-02-07T04:15:16.397
> 
> 标签：html, css, autoresize

我有一个输入字段，里面有一个图标，我是通过使用 css`background`

```
background: white url("user.png") right no-repeat; 
```

图像有点大，所以我想知道如何调整图像大小以适合该`<input>`字段。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-07T04:19:48.243

`background-size: cover`或者`background-size: 100% 100%`

它是 CSS 的属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T08:36:00.793

在 PS 或其他图像编辑器中调整图像大小，使其大小合适不是更容易吗？

# javascript - Javascripts弹出框位置

> ID：14743437
> 
> 赞同：1
> 
> 时间：2013-02-07T04:15:35.347
> 
> 标签：javascript, html, css, ajax

我正在尝试实现一个 javascript 弹出框，但我不确定如何修复弹出窗口的位置。请检查下面的小提琴。当我单击按钮时，该框以某种方式出现在页面中间。有没有办法让它出现在我的按钮下方？

[http://jsfiddle.net/kf9mS/](http://jsfiddle.net/kf9mS/)

```
<html lang="en" dir="ltr">
<head>
<style type="text/css">
.popup{
    position:relative;
    top:0px;
    left:0px;
    margin:0px auto;
    width:200px;
    height:150px;
    font-family:verdana;
    font-size:13px;
    padding:10px;
    background-color:rgb(240,240,240);
    border:2px solid grey;
    z-index:100000000000000000;
    display:none
    }

.cancel{
    display:relative;
    cursor:pointer;
    margin:0;
    float:right;
    height:10px;
    width:14px;
    padding:0 0 5px 0;
    background-color:red;
    text-align:center;
    font-weight:bold;
    font-size:11px;
    color:white;
    border-radius:3px;
    z-index:100000000000000000;
    }

.cancel:hover{
    background:rgb(255,50,50);
    }

</style>
</head>
<body>
<button onClick="openPopup();">click here</button>
<div id="test" class="popup">
    This is a test message
    <div class="cancel" onclick="closePopup();"></div>
</div>
</body>
</html> 
```

和

```
function openPopup() {
    document.getElementById('test').style.display = 'block';
}

function closePopup() {
    document.getElementById('test').style.display = 'none';
} 
```

（来自[javascript onclick create(element) div viz popup box](https://stackoverflow.com/questions/11542822/javascript-onclick-createelement-div-viz-popup-box)）

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T04:21:32.817

在您的 CSS`popup` 品牌`position: absolute;`和`remove top and left`属性中，您`popup`将成为

```
.popup{
    position:absolute;
    margin:0px auto;
    width:200px;
    height:150px;
    font-family:verdana;
    font-size:13px;
    padding:10px;
    background-color:rgb(240,240,240);
    border:2px solid grey;
    z-index:100000000000000000;
    display:none
    } 
```

休息一切都很好

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T04:21:51.093

删除`margin: 0 auto`属性。因为它强制元素位于中心。

[工作小提琴](http://jsfiddle.net/kf9mS/2/)

# javascript - 根据页面子域本地化脚本 URL

> ID：14743439
> 
> 赞同：1
> 
> 时间：2013-02-07T04:15:44.633
> 
> 标签：javascript, url, localization, greasemonkey

我是 Greasemonkey 脚本的新手，想使用当前 URL 本地化页面或脚本中的链接。

例如，使用类似的链接`http://en1.server.com/`，捕获`en1`零件。

目前该脚本使用：

```
// @include     /^http://en[0-9].forgeofempires.com/game/index.*$/ 
```

（Greasemonkey 的正则表达式 @include 语法）

在脚本下面有：

```
swfobject.embedSWF("http://cdn.en.forgeofempires.com/swf/Preloader.swf?1358930484", "content", "100%", "100%", swfVersionStr, xiSwfUrlStr, flashvars, params, attributes); 
```

但是，如果有人在匈牙利、法国或瑞典服务器上玩这个游戏，他必须手动修改脚本才能在 Linux 下正常运行游戏。

我想把脚本改成这样：

```
// @include     /^http://*[0-9]\.server\.com/game/index.*$/
var url = window.location.href;
var loc = "remove everything but url prefixe"
swfobject.embedSWF("http://cdn.(+loc+).forgeofempires.com/swf/Preloader.swf?1358930484", "content", "100%", "100%", swfVersionStr, xiSwfUrlStr, flashvars, params, attributes); 
```

但我不知道如何清理 URL，只保留 en、sw、it、fr 或其他本地化前缀。

我正在尝试修改此脚本：  [https ://userscripts.org/scripts/show/157358](https://userscripts.org/scripts/show/157358)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T05:05:54.610

更新更新问题：

关键是只获取主机名，`location.hostname`然后使用正则表达式`replace`提取子域并去除任何尾随数字。

因此该脚本将变为：

```
// ==UserScript==
// @name        Forge of Empires - Enable FoE to run with Adobe Flash 11.2
// @namespace   http://userscripts.org
// @description Forge of Empires, after the update on Jan 23rd 2013., requires that Adobe Flash Player V11.3 is installed on the system. This presents the problem mostly for Linux users, becouse only version 11.2 is available on Linux. This scripts enables game to run on Adobe Flash Player V11.2.
// @include     /^http://.+?\.forgeofempires\.com/game/index.*$/
// @grant       none
// @version     2
// ==/UserScript==

var swfVersionStr   = "11.2";
var baseHost        = location.hostname;
var subdomain       = baseHost.replace (/^(.+?)\d?\.forgeofempires\.com$/i, "$1");

swfobject.embedSWF (
    "http://cdn." + subdomain + ".forgeofempires.com/swf/Preloader.swf?1358930484", 
    "content", 
    "100%", "100%", 
    swfVersionStr, 
    xiSwfUrlStr, 
    flashvars, 
    params, 
    attributes
);
swfobject.addDomLoadEvent (createFullBrowserFlash); 
```

# ruby-on-rails - 加载所有数据，但不是从所有表中加载

> ID：14743441
> 
> 赞同：1
> 
> 时间：2013-02-07T04:15:51.277
> 
> 标签：ruby-on-rails, ruby-on-rails-3.2

我看了这个 rails cast [http://railscasts.com/episodes/22-eager-loading](http://railscasts.com/episodes/22-eager-loading)但我仍然对为这样的场景编写有效的 GET REST 服务的最佳方法是什么感到困惑：

假设我们有一个组织表，并且还有大约 20 个其他表，它们之间存在一个`belongs_to`和`has_many`关系。（所以所有这些表都有一个**organization_id**字段）。

现在，我想以 Rails REST 服务的形式编写一个 GET 和 INDEX 请求，该服务基于传递给 URL 中请求的组织 ID，它可以读取这些表并填充 JSON，但不能填充所有这些表，仅针对其中的几个，例如让我们假设患者、订单和访问表，而不是所有这 20 个表。

所以我仍然很难弄清楚如何写这样一个

```
.find( :all ) 
```

什么样的查询？有人可以展示一些示例，以便我了解如何进行此类查询吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T04:26:37.557

您可以在一个 SQL 查询中包含所有这些表：

```
@organization = Organization.includes(:patients, :orders, :visits).find(1) 
```

现在，当您执行以下操作时：

```
@organization.patients 
```

它将在内存中加载患者，因为它已经在原始查询中获取了它们。没有`includes`,`@organization.patients`会触发另一个数据库查询。这就是为什么它被称为“急切加载”的原因，因为您`patients`在实际引用它们之前（急切地）加载了组织的数据，因为您知道以后会需要这些数据。

`includes`无论使用`all`与否，您都可以随时使用。就我个人而言，当我将方法链接到模型上时，我发现它更加明确和清晰`includes`，而不是将其作为某种散列选项包含在内（如 Railscast 剧集中）。

# bazaar - 如何删除 bzr 存储库中的某些版本？

> ID：14743444
> 
> 赞同：0
> 
> 时间：2013-02-07T04:15:56.227
> 
> 标签：bazaar, bzr-svn

假设我在 bzr 存储库中有 10 个版本，我想删除最后 2 个版本。我尝试了“bzr revert -r -3”，但它只是将文件恢复到倒数第二个版本，并且下面的“bar log”仍然显示存储库中的所有 10 个版本。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T14:03:32.510

执行此操作的命令是`uncommit`：

```
bzr uncommit -r-3 
```

最后两个修订将从分支中删除。

# javascript - slidejs：如何用相同的上一个下一个按钮控制两张幻灯片？

> ID：14743445
> 
> 赞同：0
> 
> 时间：2013-02-07T04:16:00.453
> 
> 标签：javascript, jquery, slideshow

如何控制具有相同上一个，下一个按钮的两张幻灯片？当我单击上一个/下一个按钮时，我希望两张幻灯片都移动..如何实现此功能？

JS 斌：http: [//jsbin.com/osogig/1/edit](http://jsbin.com/osogig/1/edit)

```
$(function() {
    $("#slides, #slides1").slides({
        generatePagination : false,
        height : 50
    });
});

<div id="slides">
    <div class="slides_container">
        <div>sample text 1</div>
        <div>sample text 2</div>
        <div>sample text 3</div>
        <div>sample text 4</div>
    </div>
    <a href="#" class="next"> Next </a> &nbsp; &nbsp; &nbsp; <a href="#"
        class="prev"> Prev </a>
</div>
<div id="slides1">
    <div class="slides_container">
        <div>
            Lorem ipsum dolor sit amet <br /> Lorem ipsum dolor sit amet <br />
            Lorem ipsum dolor sit amet <br />
        </div>
        <div>
            Lorem ipsum dolor sit amet <br /> Lorem ipsum dolor sit amet <br />
            Lorem ipsum dolor sit amet <br />
        </div>
        <div>
            Lorem ipsum dolor sit amet <br /> Lorem ipsum dolor sit amet <br />
            Lorem ipsum dolor sit amet <br />
        </div>
        <div>
            Lorem ipsum dolor sit amet <br /> Lorem ipsum dolor sit amet <br />
            Lorem ipsum dolor sit amet <br />
        </div>
    </div>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T04:31:19.973

将此附加到#slides1：

```
<a href="#" class="next"> Next </a><a href="#" class="prev"> Prev </a> 
```

将此添加到您的 CSS 中：

```
#slides1 .next,
#slides1 .prev { display: none; } 
```

将此添加到您的 JS 中：

```
$('#slides .next').click(function() {
    $('#slides1 .next').click();
});
$('#slides .prev').click(function() {
    $('#slides1 .prev').click();
}); 
```

[http://jsfiddle.net/samliew/4JjMC/](http://jsfiddle.net/samliew/4JjMC/)

# ruby-on-rails - 通过 Carrierwave 从 WickedPDF 获取 PDF 以作为附件

> ID：14743447
> 
> 赞同：17
> 
> 时间：2013-02-07T04:16:23.130
> 
> 标签：ruby-on-rails, carrierwave, wkhtmltopdf, wicked-pdf

在 Rails3 中，我使用`WickedPDF gem`来呈现我的一个模型的 PDF 格式。这工作正常：`/invoices/123`返回 HTML，`/invoices/123.pdf`下载 PDF。

在我的 Invoice 模型中，我使用 state_machine gem 来跟踪 Invoice 状态。当发票从“未开票”状态变为“已开票”状态时，我想获取发票 PDF 的副本并使用 CarrierWave 将其附加到发票模型中。

我让三个部分分别工作：控制器创建 PDF 视图，模型跟踪状态并在进行正确转换时触发回调，以及正确设置 CarrierWave。但是，我很高兴让他们一起玩得很好。

如果我只想获取发票的 HTML 版本，我可以`render_to_string`从模型中调用。但`render_to_string`似乎在收到 PDF 二进制文件时感到窒息。如果我可以取回数据流，则很容易将该数据写入临时文件并将其附加到上传器，但我不知道如何获取数据流。

有什么想法吗？下面的代码：

发票控制器

```
def show
  @invoice = @agg_class.find(params[:id])

  respond_to do |format|
    format.pdf do
      render_pdf
    end
    format.html # show.html.erb
    format.json { render json: @aggregation }
  end
end 
```

...

```
def render_pdf(options = {})
  options[:pdf] = pdf_filename
  options[:layout] = 'pdf.html'
  options[:page_size] = 'Letter'
  options[:wkhtmltopdf] = '/usr/local/bin/wkhtmltopdf'
  options[:margin] = {
    :top      => '0.5in',
    :bottom   => '1in',
    :left     => '0in',
    :right    => '0in'
  }
  options[:footer] = {
    :html => {
      :template   => 'aggregations/footer.pdf.haml',
      :layout     => false,
    }
  }
  options[:header] = {
    :html => {
      :template   => 'aggregations/header.pdf.haml',
      :layout     => false,
    }
  }
  render options
end 
```

发票.rb

```
def create_pdf_copy

   # This does not work.    
   pdf_file = ApplicationController.new.render_to_string(
    :action => 'aggregations/show',
    :format => :pdf,
    :locals => { 
      :invoice => self
    }
  )

  # This part works fine if the above works.
  unless pdf_file.blank?
    self.uploads.clear
    self.uploads.create(:fileinfo => File.new(pdf_file), :job_id => self.job.id)
  end

end 
```

**更新**找到了解决方案。

```
def create_pdf_copy

    wicked = WickedPdf.new

    # Make a PDF in memory
    pdf_file = wicked.pdf_from_string( 
        ActionController::Base.new().render_to_string(
            :template   => 'aggregations/show.pdf.haml', 
            :layout     => 'layouts/pdf.html.haml',
            :locals     => { 
                :aggregation => self
            } 
        ),
        :pdf => "#{self.type}-#{self}",
        :layout => 'pdf.html',
        :page_size => 'Letter',
        :wkhtmltopdf => '/usr/local/bin/wkhtmltopdf',
        :margin => {
            :top      => '0.5in',
            :bottom   => '1in',
            :left     => '0in',
            :right    => '0in'
        },
        :footer => {
            :content => ActionController::Base.new().render_to_string({
                :template => 'aggregations/footer.pdf.haml', 
                :layout => false
            })
        },
        :header => {
            :content => ActionController::Base.new().render_to_string({
                :template => 'aggregations/header.pdf.haml', 
                :layout => false
            })
        }
    )

    # Write it to tempfile
    tempfile = Tempfile.new(['invoice', '.pdf'], Rails.root.join('tmp'))
    tempfile.binmode
    tempfile.write pdf_file
    tempfile.close

    # Attach that tempfile to the invoice
    unless pdf_file.blank?
        self.uploads.clear
        self.uploads.create(:fileinfo => File.open(tempfile.path), :job_id => self.job.id)
        tempfile.unlink
    end

end 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-07-15T17:36:14.047

解决方案：

```
def create_pdf_copy

    wicked = WickedPdf.new

    # Make a PDF in memory
    pdf_file = wicked.pdf_from_string( 
        ActionController::Base.new().render_to_string(
            :template   => 'aggregations/show.pdf.haml', 
            :layout     => 'layouts/pdf.html.haml',
            :locals     => { 
                :aggregation => self
            } 
        ),
        :pdf => "#{self.type}-#{self}",
        :layout => 'pdf.html',
        :page_size => 'Letter',
        :wkhtmltopdf => '/usr/local/bin/wkhtmltopdf',
        :margin => {
            :top      => '0.5in',
            :bottom   => '1in',
            :left     => '0in',
            :right    => '0in'
        },
        :footer => {
            :content => ActionController::Base.new().render_to_string({
                :template => 'aggregations/footer.pdf.haml', 
                :layout => false
            })
        },
        :header => {
            :content => ActionController::Base.new().render_to_string({
                :template => 'aggregations/header.pdf.haml', 
                :layout => false
            })
        }
    )

    # Write it to tempfile
    tempfile = Tempfile.new(['invoice', '.pdf'], Rails.root.join('tmp'))
    tempfile.binmode
    tempfile.write pdf_file
    tempfile.close

    # Attach that tempfile to the invoice
    unless pdf_file.blank?
        self.uploads.clear
        self.uploads.create(:fileinfo => File.open(tempfile.path), :job_id => self.job.id)
        tempfile.unlink
    end

end 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-03-20T13:53:17.213

有一个更好的方法：[Rails 中的 PDF 没有控制器](http://blog.arkency.com/2014/03/pdf-in-rails-without-controllers/)。

# html - 具有自定义布局的饼图

> ID：14743448
> 
> 赞同：-1
> 
> 时间：2013-02-07T04:16:32.123
> 
> 标签：html, css, d3.js

是否可以在 D3 中为饼图实现自定义布局，如下所示？

蓝色的东西的位置超出了圆圈边界。许多示例显示了如何绘制饼图，但这种布局几乎没有形状。我想知道这是否可能。

![样品馅饼](../Images/0cb832566423d3ad0c94dbf8a501a4c4.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T16:03:34.857

是的。您所要做的就是在使用 d3 的饼图功能绘制它们之后偏移这些部分@see [https://github.com/mbostock/d3/wiki/Pie-Layout](https://github.com/mbostock/d3/wiki/Pie-Layout)

# javascript - ReferenceError：从 iframe 调用时未定义函数

> ID：14743451
> 
> 赞同：1
> 
> 时间：2013-02-07T04:16:43.303
> 
> 标签：javascript, iframe

我正在尝试创建一个类似于 thefancy.com 网站的书签功能，我创建了一个书签按钮，单击该按钮时会加载一个位于其他网站[http://wonderstreet.localhost.com](http://wonderstreet.localhost.com)上的 js 文件并将其附加到头部当前文档的部分，然后它会创建一个 iframe 并将其附加到当前文档的正文中。

上面提到的 js 文件包含我需要从这个 iframe 调用的各种函数，例如，iframe 中有一个“关闭”按钮，单击该按钮时应该调用位于上述 js 文件中的函数（此函数将关闭或删除 iframe）

iframe 被正确创建和显示。（我需要获取当前文档的所有图像并在 iframe 中显示）问题是当我单击关闭按钮时它说：ReferenceError: function is not defined 有人可以帮忙让我知道我该如何解决这个问题？ **[我使用的是核心 javascript 而不是 jquery]**

这是js文件中的代码=>

```
function create_bookmarklet_iframe(thewonderstreet_userid) {
 var ifra=document.createElement('iframe');ifra.src="http://localhost.com/index.php/image_picker?userid="+userid;ifra.setAttribute("id","bookmarklet_iframe");ifra.setAttribute('allowtransparency',true);ifra.setAttribute('style','width:279px;height:372px;border:1px solid #4c515c;position:fixed;top:10px;right:10px;z-index:10000001;margin:0;background-color:#eff1f7;');void(document.body.appendChild(ifra)); 
```

}

```
function remove_bookmarklet_iframe(id) {
    var element = document.getElementById(id);
    element.parentNode.removeChild(element);
} 
```

这是书签代码：

```
javascript:%20(function%20()%20{%20%20%20%20%20userid%20=%20'724c5a0e49e4dac588a90e17233982493027197d';%20%20%20%20%20var%20search_url%20=%20'http://localhost.com/javascript/bookmarklet_js.js';%20scripts_finder%20=%20document.getElementsByTagName('script');%20var%20found_url%20=%200;%20for%20(var%20i%20=%20scripts_finder.length;%20i--;)%20{%20var%20actual_url%20=%20scripts_finder[i].src.split("?");%20if%20(search_url%20==%20actual_url[0])%20{%20found_url++;%20}%20}%20if(found_url%20<=%200)%20{%20s=document.createElement('SCRIPT');s.type='text/javascript';s.src='http://localhost.com/javascript/bookmarklet_js.js?_='+(Math.random());document.getElementsByTagName('head')[0].appendChild(s);%20}%20%20var%20s_id%20=%20'bookmarklet_iframe',%20%20%20%20%20%20%20%20%20s_avail%20=%20document.getElementById(s_id),%20%20%20%20%20%20%20%20%20can_continue%20=%20true,%20%20%20%20%20%20%20%20%20t;%20%20%20%20%20if%20(s_avail)%20{%20%20%20%20%20%20%20%20%20can_continue%20=%20false;%20%20%20%20%20%20%20%20%20alert('Alreadyopen');%20%20%20%20%20}%20%20%20%20%20setTimeout(function()%20{%20if%20(can_continue)%20{%20create_bookmarklet_iframe(userid);%20}%20},1000);%20})(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-26T07:32:23.667

好的，我自己解决了，我做错了，我没有创建 iframe，而是使用 div，所以基本上我消除了 iframe，通过 javascript 创建 div 并将其附加到文档正文。

# python - 计算字典中的值

> ID：14743454
> 
> 赞同：4
> 
> 时间：2013-02-07T04:17:00.713
> 
> 标签：python, dictionary

我有一本字典如下。

```
dictA = { 
    'a' : ('duck','duck','goose'), 
    'b' : ('goose','goose'), 
    'c' : ('duck','duck','duck'), 
    'd' : ('goose'), 
    'e' : ('duck','duck') 
    } 
```

我希望遍历 dictA 并输出一个列表，该列表将显示 dictA 中具有多个“鸭子”值的键。

例如，对于 dictA，此函数将输出以下列表。

```
list = ['a', 'c', 'e'] 
```

我确信有一种简单的方法可以做到这一点，但我是 Python 新手，这让我很困惑。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-02-07T04:18:39.230

```
[k for (k, v) in dictA.iteritems() if v.count('duck') > 1] 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-07T04:29:06.510

我认为这对初学者来说是一个好方法。不要打电话给你的名单`list`- 有一个名为`list`

```
>>> dictA = { 
...     'a' : ('duck','duck','goose'), 
...     'b' : ('goose','goose'), 
...     'c' : ('duck','duck','duck'), 
...     'd' : ('goose'), 
...     'e' : ('duck','duck') 
...     }
>>> my_list = []
>>> for key in dictA:
...     if dictA[key].count('duck') > 1:
...         my_list.append(key)
... 
>>> my_list
['a', 'c', 'e'] 
```

下一阶段是使用`.items()`，因此您无需查找每个键的值

```
>>> my_list = []
>>> for key, value in dictA.items():
...     if value.count('duck') > 1:
...         my_list.append(key)
... 
>>> my_list
['a', 'c', 'e'] 
```

当您理解这一点时，您会发现 Ignacio 的答案中的列表理解更容易理解。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-07T04:44:30.673

只是为了它 - 这是*另*一种方式：

```
>>> from collections import Counter
>>> [i for i in dictA if Counter(dictA[i])['duck'] > 1]
['a', 'c', 'e'] 
```

[`Counter`](http://docs.python.org/release/2.7/library/collections.html#collections.Counter)是为了——你猜对了——计算东西。

# asp.net - ASP.NET HttpModule RewritePath 虚拟目录缓存不刷新

> ID：14743458
> 
> 赞同：5
> 
> 时间：2013-02-07T04:17:17.770
> 
> 标签：asp.net, caching, url-rewriting, iis-7.5

我有一个 ASP.NET IHttpModule 实现，旨在重写服务文件的路径。该模块只处理一个事件，`PostAuthenticateRequest`，如下：

```
void context_PostAuthenticateRequest(object sender, EventArgs e)
{
    if (HttpContext.Current.Request.Path.ToLower().Contains("foobar"))
    {
        HttpContext.Current.RewritePath("virtdir/image.png");
    }
} 
```

路径“virtdir”是应用程序的虚拟目录子目录。应用程序本身运行在一个典型位置：C:\inetpub\wwwroot\IisModuleCacheTest\ 虚拟目录“virtdir”映射到 C:\TestVirtDir\

正如预期的那样，请求`http://myserver/iismodulecachetest/foobar`将从虚拟目录返回 image.png。同样，请求`http://myserver/iismodulecachetest/virtdir/image.png`将返回相同的图像文件。

然后我执行以下操作：

1.  要求`http://myserver/iismodulecachetest/foobar`
2.  直接修改 C:\testvirtdir\image.png （在paint中改变它的颜色并重新保存）。
3.  重复。

在间隔几秒钟重复 1 到 20 次后，返回的图像将是过期的副本。

一旦不高兴，服务器只会在经过未知的时间（从 10 秒到几分钟）后返回当前版本。如果我将步骤 1 中的 URL 替换为`http://myserver/iismodulecachetest/virtdir/image.png`，则似乎不会出现问题。但奇怪的是，在使用“foobar” URL 出现问题后，直接 URL*也*开始返回图像的过期副本。

**相关细节：**

1.  应用程序池的回收解决了该问题。
2.  稍等片刻即可解决问题。
3.  反复重新保存文件似乎没有效果。我想知道“文件修改”事件是否丢失了，但是一旦卡住，我可以保存六次修改并且 Iis 仍然不会返回新副本。
4.  在 web.config 中禁用缓存没有任何区别。`<caching enabled="false" enableKernelCache="false" />`
5.  这是一个虚拟目录这一事实似乎很重要，我无法复制 image.png 作为应用程序本身内容的一部分的问题。
6.  这**不是**客户端缓存，它肯定是服务器返回一个过时的版本。我已经通过检查请求标头、Ctrl+F5 刷新，甚至使用单独的浏览器来验证这一点。
7.  我已经在两台机器上复制了这个问题。Win7 Pro 6.1.7601 SP1 + IIS 7.5.7600.16385 和 Server 2008 R2 6.1.7601 SP1 + IIS 7.5.7600.16385。

**编辑 - 更多细节：**

1.  在服务器级别禁用缓存和内核缓存没有区别。
2.  向 URL 添加扩展名没有任何区别`http://myserver/iismodulecachetest/foobar.png`。
3.  将调试器附加到 IIS 表明`context_PostAuthenticateRequest`事件处理程序每​​次都被触发，并且无论缓存是否被卡住，其行为方式都相同。

**Edit2 - IIS 日志：**

我在 IIS 中启用了“失败的请求跟踪”（有趣的是，如果配置得当，这对于*非失败请求也是如何工作的。在步骤 17 之前，管道是相同的，其中返回过期版本的请求清楚地显示了缓存命中。*

第一个请求看起来很好，但缓存未命中：

![好的请求](../Images/e43739c943384cec994ddc8ca15ff41e.png)

但是一旦卡住，它就会反复显示缓存命中：

![错误的请求](../Images/3bd9732132013499bf8731b6ae4412e2.png)

可以理解，缓存命中后的事件与缓存未命中情况完全不同。看起来 IIS 完全满足于认为它的文件缓存是最新的，但它绝对不是！:(

再往下一点，我们看到第一个请求：

![好的请求 2](../Images/38416d7bf4590fde6cd8d2dece0b0d88.png)

然后是后续的（错误的）缓存命中请求：

![错误请求 2](../Images/b83d0068b83097a2999c3a649c24cf29.png)

另请注意*，*根据`FileDirmoned="true"`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T19:37:41.263

您可以执行以下操作。

```
void context_PostAuthenticateRequest(object sender, EventArgs e)
{
    if (HttpContext.Current.Request.Path.ToLower().Contains("foobar"))
    {
        Random rnd = new Random();
        int randomNumber = rnd.Next(int.MinValue, int.MaxValue);
        HttpContext.Current.RewritePath("virtdir/image.png?"+randomNumber);
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-22T09:56:24.787

`RewritePath`使用该方法处理虚拟目录中的静态资源时，我遇到了同样的问题。我没有使用此方法的解决方案，但最后我选择使用该方法`Server.TransferRequest`，这表明没有缓存问题。

```
HttpContext.Current.Server.TransferRequest(newUrl); 
```

请求传输由 再次处理，`IHttpModule`因此您需要小心不要产生循环。

# objective-c - NSTimer 性能

> ID：14743463
> 
> 赞同：0
> 
> 时间：2013-02-07T04:17:44.010
> 
> 标签：objective-c, cocoa, nstimer

我有一个 Foundation CLI 工具，它使用 5 个 NSTimers 在后台执行不同的方法。自从实现这些计时器（而不是 while 循环或类似的循环）以来，我注意到程序的 CPU 使用率飙升。有人有这方面的信息吗？

编辑：

这是一个代码片段（目前只实现了 3 个计时器）：

```
[NSTimer scheduledTimerWithTimeInterval:0.05 target:self selector:@selector(executeInterval0Update) userInfo:nil repeats:YES];
[NSTimer scheduledTimerWithTimeInterval:5 target:self selector:@selector(executeInterval1Update) userInfo:nil repeats:YES];
[NSTimer scheduledTimerWithTimeInterval:10 target:self selector:@selector(executeInterval2Update) userInfo:nil repeats:YES];

[runLoop run]; 
```

# mysql - 在 where 子句中操作字符串

> ID：14743465
> 
> 赞同：0
> 
> 时间：2013-02-07T04:17:49.800
> 
> 标签：mysql, sql

我有一个变量 list_name 包含由“：”分隔的名称列表

```
list_name=(rahul:john:steve) => list_name is of type 'string' 
```

该列表包含 1000 个名称无法更改 list_name 因为我们从其他部门/公司获得它

想要为如下所示的目的编写一个查询，但是对于该字符串操作将需要，即根据分隔符从 list_names 中提取名称 ':'

**从名字是 rahul 或 john 或 steve**的学生中选择 roll_no （问题部分）

建议在 sql 中使用一些字符串操作技术从字符串中提取名称

PS：我使用的是专有 sql，不支持循环

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T04:25:23.860

您可以使用以下标准的 SQL 执行此操作：

```
 select roll_no
 from students
 where concat(':', list_name, ':') like concat('%:', names, ':%') 
```

在某些数据库中，where 可能写为：

```
 where ':'+ list_name+':' like '%:'+names+':%' 
```

或者

```
 where ':'|| list_name||':' like '%:'||names||':%' 
```

# matrix - 使用 cuBLAS 访问子矩阵

> ID：14743466
> 
> 赞同：1
> 
> 时间：2013-02-07T04:17:50.423
> 
> 标签：matrix, cuda, fortran, partitioning, cublas

我已阅读以下帖子

[使用 LAPACK 访问子矩阵](https://stackoverflow.com/questions/5009513/accessing-submatrices-using-lapack)

我想做一些类似的从 Fortran 调用 cuBLAS 例程。

基本上，我有一个大矩阵被分割成`3 x 3`块，在循环的每一步中，分割都会发生变化。目前，我为每个单独的子块分配/释放指针，并在每一步将矩阵的相关部分复制到设备和从设备复制。这会产生很多我希望消除的开销。这可行吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-07T12:23:54.950

您可以使用与使用主机指针相同的方式在主机代码中进行设备指针运算。例如，如果您在 GPU 上存储了一个 MxN 矩阵：

```
 float *A_d;
 cudaMalloc((void **)&A_d, size_t(M*N)*sizeof(float)); 
```

并且您想对从 (x1,y1) 开始的子矩阵进行操作，然后您将传递`A+x1+M*y1` 给任何需要矩阵作为参数的 CUBLAS 函数。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-06-16T05:02:17.453

talonmies 已经满意地回答了这个问题。为了支持他的回答并可能对其他用户有用，我在这里提供了一个完整的示例，说明如何使用`cublas<t>gemm`在完整矩阵的子矩阵之间执行乘法`A`以及`B`如何将结果分配给完整矩阵的子矩阵`C`。

尽管问题与 Fortran 有关，但下面的代码是用 C/C++ 给出的，因为我没有将 Fortran 与 CUDA 结合使用，而且许多用户将 CUDA 与 C/C++ 结合使用。

该代码利用

1.  访问子矩阵的指针算法；
2.  前导维度和子矩阵维度的概念。

下面的代码考虑了三个矩阵：

1.  `A`- `10 x 9`;
2.  `B`- `15 x 13`;
3.  `C`- `10 x 12`。

矩阵`C`被初始化为所有`10`s。该代码在 Matlab 语言中执行以下子矩阵乘法：

```
C(1+x3:5+x3,1+y3:3+y3) = A(1+x1:5+x1,1+y1:4+y1) * B(1+x2:4+x2,1+y2:3+x2); 
```

`Utilities.cu`和`Utilities.cuh`文件在此处保留[，此处](https://github.com/OrangeOwlSolutions/CUDA_Utilities)省略。

```
#include <thrust/device_vector.h>
#include <thrust/random.h>

#include <cublas_v2.h>

#include "Utilities.cuh"

/********/
/* MAIN */
/********/
int main()
{
    /**************************/
    /* SETTING UP THE PROBLEM */
    /**************************/

    //const int Nrows1 = 10;            // --- Number of rows of matrix 1
    //const int Ncols1 = 10;            // --- Number of columns of matrix 1

    //const int Nrows2 = 15;            // --- Number of rows of matrix 2
    //const int Ncols2 = 15;            // --- Number of columns of matrix 2

    //const int Nrows3 = 12;            // --- Number of rows of matrix 3
    //const int Ncols3 = 12;            // --- Number of columns of matrix 3

    const int Nrows1 = 10;          // --- Number of rows of matrix 1
    const int Ncols1 = 9;           // --- Number of columns of matrix 1

    const int Nrows2 = 15;          // --- Number of rows of matrix 2
    const int Ncols2 = 13;          // --- Number of columns of matrix 2

    const int Nrows3 = 10;          // --- Number of rows of matrix 3
    const int Ncols3 = 12;          // --- Number of columns of matrix 3

    const int Nrows = 5;            // --- Number of rows of submatrix matrix 3 = Number of rows of submatrix 1
    const int Ncols = 3;            // --- Number of columns of submatrix matrix 3 = Number of columns of submatrix 2

    const int Nrowscols = 4;        // --- Number of columns of submatrix 1 and of rows of submatrix 2

    const int x1 = 3;               // --- Offset for submatrix multiplication along the rows
    const int y1 = 2;               // --- Offset for submatrix multiplication along the columns

    const int x2 = 6;               // --- Offset for submatrix multiplication along the rows
    const int y2 = 4;               // --- Offset for submatrix multiplication along the columns

    const int x3 = 3;               // --- Offset for submatrix multiplication along the rows
    const int y3 = 5;               // --- Offset for submatrix multiplication along the columns

    // --- Random uniform integer distribution between 0 and 100
    thrust::default_random_engine rng;
    thrust::uniform_int_distribution<int> dist(0, 20);

    // --- Matrix allocation and initialization
    thrust::device_vector<float> d_matrix1(Nrows1 * Ncols1);
    thrust::device_vector<float> d_matrix2(Nrows2 * Ncols2);
    for (size_t i = 0; i < d_matrix1.size(); i++) d_matrix1[i] = (float)dist(rng);
    for (size_t i = 0; i < d_matrix2.size(); i++) d_matrix2[i] = (float)dist(rng);

    printf("\n\nOriginal full size matrix A\n");
    for(int i = 0; i < Nrows1; i++) {
        std::cout << "[ ";
        for(int j = 0; j < Ncols1; j++) 
            std::cout << d_matrix1[j * Nrows1 + i] << " ";
        std::cout << "]\n";
    }

    printf("\n\nOriginal full size matrix B\n");
    for(int i = 0; i < Nrows2; i++) {
        std::cout << "[ ";
        for(int j = 0; j < Ncols2; j++) 
            std::cout << d_matrix2[j * Nrows2 + i] << " ";
        std::cout << "]\n";
    }

    /*************************/
    /* MATRIX MULTIPLICATION */
    /*************************/
    cublasHandle_t handle;

    cublasSafeCall(cublasCreate(&handle));

    thrust::device_vector<float> d_matrix3(Nrows3 * Ncols3, 10.f);

    float alpha = 1.f;
    float beta  = 0.f;
    cublasSafeCall(cublasSgemm(handle, CUBLAS_OP_N, CUBLAS_OP_N, Nrows, Ncols, Nrowscols, &alpha,
                   thrust::raw_pointer_cast(d_matrix1.data())+x1+Nrows1*y1, Nrows1, thrust::raw_pointer_cast(d_matrix2.data())+x2+Nrows2*y2, Nrows2,
                   &beta, thrust::raw_pointer_cast(d_matrix3.data())+x3+Nrows3*y3, Nrows3));

    printf("\n\nResult full size matrix C\n");
    for(int i = 0; i < Nrows3; i++) {
        std::cout << "[ ";
        for(int j = 0; j < Ncols3; j++) 
            std::cout << d_matrix3[j * Nrows3 + i] << " ";
        std::cout << "]\n";
    }

    return 0; 
} 
```

# ruby-on-rails - Omniauth 认证失败回调处理

> ID：14743471
> 
> 赞同：4
> 
> 时间：2013-02-07T04:18:32.667
> 
> 标签：ruby-on-rails, redirect, omniauth

我正在使用[omniauth](https://github.com/intridea/omniauth)和[omniauth-identity](https://github.com/intridea/omniauth-identity)通过Google、Facebook 和传统的用户名/密码进行身份验证。除了身份验证失败的情况外，我的一切工作都很好。失败时，例如输入无效密码时，omniauth 将调用`/auth/failure`. 我已经将它映射到一个控制器，该控制器重定向到一个适当的页面并显示一个 Flash 消息。我遇到的问题是我无法让闪光灯实际显示。示例代码：

在`routes.rb`：

```
match "/auth/failure" => "sessions#failure" 
```

在控制器中它调用：

```
def failure
  redirect_to root_url, alert: "Authentication failed, please try again."
end 
```

由于omniauth正在做的任何事情和重定向的结合，我觉得闪光灯正在丢失。我知道视图代码是正确的，因为它会闪烁其他内容，例如成功登录消息。我将不胜感激有关如何调整我的示例以显示 flash 消息的建议，或有关替代omniauth 故障处理机制的建议。谢谢。

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2013-02-07T05:28:18.133

我在上一个项目中遇到了同样的问题。这是一个错误。将以下猴子补丁添加到您的 config/initializers/omniauth.rb

```
 # Omniauth failure monkey patch
  on_failure do |env|
    message_key = env['omniauth.error.type']
    origin_query_param = env['omniauth.origin'] ? "&origin=#{CGI.escape(env['omniauth.origin'])}" : ""
    strategy_name_query_param = env['omniauth.error.strategy'] ? "&strategy=#{env['omniauth.error.strategy'].name}" : ""
    extra_params = env['omniauth.params'] ? "&#{env['omniauth.params'].to_query}" : ""
    new_path = "#{env['SCRIPT_NAME']}#{OmniAuth.config.path_prefix}/failure?message=#{message_key}#{origin_query_param}#{strategy_name_query_param}#{extra_params}"
    Rack::Response.new(["302 Moved"], 302, 'Location' => new_path).finish
  end 
```

# c++ - C++ 从循环构建排序链接列表

> ID：14743474
> 
> 赞同：0
> 
> 时间：2013-02-07T04:18:48.160
> 
> 标签：c++, list, insert, sorted

我已经把头撞在墙上大约 3 个小时了，现在试图解决这个问题，但我无法弄清楚。我的测试程序是这样写的......

```
int main()
{
  SimpList<int> intList;   // (empty) list of integers

  cout << "Let's build a sorted list of integers." << endl;
  cout << endl << "Uninitialized List: ";
  intList.print();
  cout << endl << "Length: " << intList.size() << endl;

  int intData[] = { 5, 3, -2, 7, 9, -8, 1, -4 };

  for (int i=0; i<8; i++)
    intList.insert( intData[i] );

  cout << endl << "After inserting 8 integers: ";
  intList.print();
  cout << endl << "Length: " << intList.size() << endl;

  system("PAUSE");
  return 0;
} 
```

所以链接列表是从一个数组和一个 for 循环中初始化的。我的节点和列表的类代码在这里......

```
 template < typename T >   // Forward declaration of the SimpList class
class SimpList;

template < typename T >
class Node                 // Node class for the SimpList class
{
  private:
    // Constructors
    Node () { next = 0; }  // default constructor

    // Complete the definition inline
    Node ( const T &initItem, Node<T> *ptr ) { }

    // Data members
    T           item;   // Node data item
    Node        *next;  // Pointer to the next node

  friend class SimpList<T>;
};

template < typename T >
class SimpList
{
  public:

    // Constructor (add your code inline)
    SimpList ()
    {
      head = &PHONY;
      length = 0;
    }

    // List manipulation operations
    void insert ( const T &newitem );   // insert a data item
    bool remove ( T &item );            // remove data item
    bool find ( T &item ) const;        // find data item
    void clear ();                      // empty the list

    bool isEmpty () const { 
     if (length == 0)
         return true;
     else
         return false;
    }

    // length accessor method
    int size () const { 
        return length;
    }

    // print the list items
    void print () const;

  private: // data members
    Node<T> PHONY;      // empty node that anchors the list
    Node<T> *head;      // pointer to the beginning of the list
    int length;         // length of list
}; 
```

然后插入和打印功能如下...

```
template < typename T >
void SimpList<T>::print() const
{
  if (length == 0)
  {
    cout << "List is empty." << endl;
    return;
  }

  Node<T> *ptr = head->next;
  while (ptr != NULL)
  {
    cout << ptr->item << "  ";
    ptr = ptr->next;
  }
  cout << endl;
}

template < typename T >
void SimpList<T>::insert(const T& newitem) {

        Node<T> *currN = head->next;
        Node<T> *prevN = 0;
        Node<T> *tmp = new Node<T>();
        tmp->item = newitem;

        if(head->next == NULL ) {
          head->next = tmp;
        }
        else {
            prevN = head;
            while(currN != NULL && currN->item < newitem) {
                prevN = currN;
                currN = currN->next;
            }
            prevN->next = tmp;
        }
        length++;
        print();
} 
```

我将最后一个“print（）”插入到插入函数中，作为调试正在发生的事情的一种方式，输出非常令人困惑，因为它给了我

5 3 -2 -2 7 -2 7 9 -8 -8 1 -8 -4

但我希望输出从小到大排序（-8 -4 -2 1 3 5 7 9）

编辑：已解决...忘记更新 tmp-> 在 currN 旁边。DERP。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T04:30:31.183

您需要解决的几件事：

1.  `PHONY->next`不为 null ，因此您的初始化将失败：

    ```
    if(head->next==NULL) {
      head->next=tmp;
      return;
    } 
    ```

2.  节点构造函数应该在 0 旁边初始化而不是`this`，因此您永远不会在列表末尾遇到 NULL 条件。

3.  在插入 else 语句中，您应该从 head->next 开始搜索，目前您从`currn`=开始搜索，`head`这`PHONY`是不正确的。

4.  您还需要`tmp->next`适当地设置，当您在列表中间插入时考虑这种情况。

# ios - GPUImageview 捕获后消失

> ID：14743475
> 
> 赞同：-1
> 
> 时间：2013-02-07T04:18:54.337
> 
> 标签：ios, objective-c, gpuimage

我尝试`GPUImageView`使用此[链接捕获](http://developer.apple.com/library/ios/#qa/qa1703/_index.html)

但是在我捕获它之后它`GPUImageview`就会消失，但如果它是`UIImageView`它就可以正常工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T18:50:01.980

我[在 GitHub 上的交叉发布问题](https://github.com/BradLarson/GPUImage/issues/821)中回答了您，但原因是上述链接文档中的一行：

> 请注意，CALayer/-renderInContext: 仅捕获您的 UIKit 和 Quartz 绘图。它不捕获 OpenGL ES 或视频内容。

GPUImageView 使用 OpenGL ES 呈现其内容，因此您无法使用`-renderInContext:`. 您需要提取过滤器的图像并将其与底层视图手动合成，或者使用混合过滤器在 GPUImage 本身内执行合成。

# ruby-on-rails - Rails 教程第 11 章错误“未初始化的常量 User::Relationships”

> ID：14743478
> 
> 赞同：3
> 
> 时间：2013-02-07T04:19:25.360
> 
> 标签：ruby-on-rails, syntax-error, railstutorial.org

我一直收到错误

```
 uninitialized constant User::Relationships 
```

在完成 rails 教程的第 11 章时。

这是我在浏览器中登录时尝试访问主页时的完整错误。

```
 Extracted source (around line #11):

8:          </a>
9:          <a href="<%= followers_user_path(@user) %>">
10:         <strong id="followers" class="stat">
11:             <%= @user.followers.count %>
12:         </strong>
13:         followers
14:     </a> 
```

我已经多次阅读本章并检查了每一行代码，但有时你的眼睛会欺骗你，所以这里是剩下的代码

用户.rb

```
class User < ActiveRecord::Base
attr_accessible :email, :name, :password, :password_confirmation
has_secure_password

has_many :microposts, dependent: :destroy 
has_many :relationships, foreign_key: "follower_id", dependent: :destroy
has_many :followed_users, through: :relationships, source: :followed 
has_many :reverse_relationships, foreign_key: "followed_id",
                               class_name: "Relationships",
                               dependent:   :destroy
has_many :followers, through: :reverse_relationships, source: :follower

before_save { |user| user.email = email.downcase}
before_save :create_remember_token

validates :name, presence:true, length: { maximum: 50 }

VALID_EMAIL_REGEX = /\A[\w+\-.]+@[a-z\d\-.]+\.[a-z]+\z/i
validates :email, presence: true, format: { with: VALID_EMAIL_REGEX},
                uniqueness: { case_sensitive: false }
validates :password, presence: true, length: { minimum: 6}
validates :password_confirmation, presence: true

def feed
  Micropost.where("user_id =?", id)
end

def following?(other_user)
  relationships.find_by_followed_id(other_user.id)
end

def follow!(other_user)
  relationships.create!(followed_id: other_user.id)
end

def unfollow!(other_user)
  relationships.find_by_followed_id(other_user.id).destroy
end

private
  def create_remember_token
    self.remember_token = SecureRandom.urlsafe_base64
  end

end 
```

这是类本身

```
class Relationship < ActiveRecord::Base
  attr_accessible :followed_id
  belongs_to :follower, class_name: "User"
  belongs_to :followed, class_name: "User"

  validates :follower_id, presence: true
  validates :followed_id, presence: true
end 
```

这就是教程中的内容...我添加了 :follower_id 以防万一，但它仍然无法正常工作。

而且我还建立了一个relationship_controller。

```
class RelationshipsController < ApplicationController
before_filter :signed_in_user

def create
  @user = User.find(params[:relationship][:follower_id])
  current_user.follow!(@user)
  respond_to do |format|
    format.html { redirect_to @user }
    format.js
  end
end

def destroy
  @user = Relationship.find(params[:id]).followed
  current_user.unfollow!(@user)
  respond_to do |format|
    format.html { redirect_to @user }
    fromat.js
  end
end 
```

结尾

而在路线...

```
 resources :users do
   member do
     get :following, :followers
   end
 end 
```

发生错误的页面如下所示：

```
<% @user ||= current_user %>
<div class = "stats">
<a href ="<%= following_user_path(@user)%>">
    <strong id="following" class="stat">
        <%= @user.followed_users.count %>
    </strong>
    following
</a>
<a href="<%= followers_user_path(@user) %>">
    <strong id="followers" class="stat">
        <%= @user.followers.count %>
    </strong>
    followers
</a>
</div> 
```

当我删除第二部分时，第二块之前的第一部分代码可以完美运行。只是由于某种原因没有建立“追随者”关系。我在控制台中使用它并没有调用它，而 user.followed_users 确实有效。我已经玩了四个小时，已经放下桌子并重建了它，但我无法让它工作。

我之前尝试查看堆栈溢出并发现：

[Ruby 错误（未初始化的常量 User::Relationship）](https://stackoverflow.com/questions/5304421/ruby-error-uninitialized-constant-userrelationship)

但是那里的解决方案都没有帮助。谢谢你的帮助！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-07T04:49:36.543

你有一个错字：

```
has_many :reverse_relationships, foreign_key: "followed_id",
                                 class_name: "Relationships", 
```

将最后一位更改为`class_name: "Relationship"`.

# android - 无法从 Android Gingerbread 2.3.9 手机运行我的应用程序

> ID：14743479
> 
> 赞同：0
> 
> 时间：2013-02-07T04:19:34.773
> 
> 标签：android

我正在使用 Android 10 Gingerbread 2.3.9 版本。我已经使用 Eclipse 在模拟器上测试了我的应用程序，它运行良好。现在我想在真实设备上测试我的应用程序。为此，我搜索了很多，发现我们需要从 SDK Manager 下载 Google USB 驱动程序包。

我已经从设备管理器下载并更新了我的驱动程序，然后它说您的驱动程序已成功更新。当我在设备管理器中将手机插入 PC 时，我有 2 个选项，例如展讯手机和 Android 手机，我已经更新了 Android 手机的驱动程序，对于展讯手机，它在左下角附近显示一个黄色条。我不知道它是什么，并用谷歌搜索找到一个驱动程序来更新它，但无法弄清楚。我离开了那部分并尝试了另一种方式。

我已将手机连接到我的电脑，然后将 .apk 文件复制到我的 SD 卡中，然后从我的电脑上拔下电缆。然后我点击我的 .apk 文件。我能跑了。但问题在于当我在连接手机时尝试从 eclipse 调试应用程序时。我从“运行配置”中选择了“允许我每次都选择一个设备”选项。但我无法在我的设备列表中看到我的设备，我也尝试从命令提示符“adb devices”它没有列出我的手机我连接了。我已经检查了“未知资源”，还检查了开发菜单选项中的“使用调试”。但没有什么能解决我的问题。

我尝试了很多代码示例，每个示例都以相同的方式进行，但我无法找出问题所在。请朋友告诉我是什么问题，因为我无法从我的 Eclipse 中进行调试，我也无法从 LogCat 中找出问题。

谢谢 Ganesh

# java - 在java中将字母表示为数字

> ID：14743481
> 
> 赞同：1
> 
> 时间：2013-02-07T04:19:48.147
> 
> 标签：java, numbers, alphabet

我想知道你如何在java中将字母表示为整数。我正在解决一个问题，我必须在两个字母的单词之间找到中间字母。例如，我会选择“go”这个词，并为每个字母提供一个指定的整数值以找到中点字母。任何人都可以帮我解决这个问题，或者只是指出我正确的方向来解决如何获得两个字母单词之间的中点字母？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-07T04:25:07.920

这很简单

```
 int a = 'a';
    int c = 'c';
    char mid = (char) ((a + c) / 2);
    System.out.println(mid); 
```

印刷

```
b 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T04:25:02.253

(int)str.charAt(i) 将为您提供一个整数值（ASCII 值）。对于“常规”字母，这应该可以让你做你想做的事。

```
str = "GO";
midLetter = Character.toChars(((int)str.charAt(0) + (int)str.charAt(1))/2); 
```

我想我得到了匹配的括号......

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-07T04:25:04.097

如果通过“字母”您指的是`char`原始类型，那么它们已经在幕后由整数表示。来自[Java 教程](http://docs.oracle.com/javase/tutorial/java/nutsandbolts/datatypes.html)：

> 数据类型是`char`单个 16 位 Unicode 字符。它的最小值为`'\u0000'`（或 0），最大值为`'\uffff'`（或 65,535，包括在内）。

因此，您可以将`char`文字分配给`int`变量，例如：

```
int g = 'g';
int o = 'o'; 
```

这应该足以让你开始。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-07T04:25:49.303

在 java（和大多数其他语言）中，字符实际上表示为数字。谷歌“ascii table”，你会发现小写`a`实际上是 97。

假设你想索引小写`a`为 0，然后给定字符串中的任意字符，你可以用 'a' 字符减去它，你会得到索引

```
String str = ...;
for(int i=0; i<str.length(); i++) {
   char c = str.charAt(i);
   int cIndex = c - 'a';

   // do something with cIndex...
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-07T04:25:30.897

如果给定的字母是 char，则转换类型 (int)yourword。然后找到中点

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-07T04:26:09.790

Character.getNumericValue 为每个字符返回一个数值。因此，每个字母通过 Character 类都有一个唯一的数值。

这可能是您订购的起点，尽管您可能需要考虑大小写等。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-02-07T04:27:42.860

您应该能够来回往返`int`并对您的值`char`执行算术运算：`char`

```
char median = 0;
for(char ch=65; ch<91; ch++) {
    System.out.println(ch);
    median += ch;
}
median = (char)(median/26);
System.out.println("=====");
System.out.println("Median leter in the alphabet: "+median); 
```

# arm - 如何为 ARM 交叉编译 Thrift

> ID：14743482
> 
> 赞同：1
> 
> 时间：2013-02-07T04:19:51.960
> 
> 标签：arm, thrift, cross-compiling

我试过这个命令来配置节俭，

`./configure CXX=arm-linux-gnueabi-g++ CC=arm-linux-gnueabi-gcc --prefix=/arms/thrift --host=arm-linux-gnueabi --with-cpp --with-boost=/path-to-boost-for-arm`

并遇到以下错误消息

> 检查 boostlib >= 1.40.0... 是 检查 libevent >= 1.0... 配置：错误：在 `/arms/thrift-0.9.0' 中：配置：错误：在交叉编译时无法运行测试程序

有什么解决办法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-17T22:38:43.740

Thrift 0.9.0***无法***进行交叉编译。您看到的部分问题是因为它们至少有一些（如果不是全部）不提供 pkg-config 东西答案的东西的静态路径。它现在正在你的 sysroot 之外寻找各种各样的东西。

他们的 Jira 中记录了一个问题，但他们采取的立场是“你设置了 --includedir 参数吗？” （呃，--includedir 指定了我的 sysroot 中的内容，并且您应该尊重关闭 PHP 构建（现在不是...叹息...）和 --with-libtool -sysroot 为所有内容添加前缀，以便您可以交叉编译。）因此，我认为在不久的将来任何时候都不会提供帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-21T15:17:44.653

您收到错误是因为它试图查找的依赖项丢失了。所以首先交叉编译它正在搜索的所有依赖项。

```
./configure --help 
```

在这里您可以找到如何包含依赖项。

```
--with-(dependency)=path-to-compiled-bin 
```

# regex - 正则表达式从字符串中提取数字

> ID：14743486
> 
> 赞同：1
> 
> 时间：2013-02-07T04:20:34.167
> 
> 标签：regex

我有一个这样的字符串

```
file-myfle_20130207_094852am.csv 
```

我该如何编写正则表达式以仅提取数字

```
20130207094852 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-07T04:22:43.690

像这样（这在正则表达式教程中很常见）

```
\d+ 
```

每组将是数字。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T05:01:35.090

有关上下文，请参阅我对问题的评论。

从外壳：

```
echo file-myfle_20130207_094852am.csv | tr -cd /0-9/
20130207094852 
```

使用 Perl：

```
echo file-myfle_20130207_094852am.csv | perl -pe 's/\D//g'
20130207094852 
```

# gwt - 将图标添加到 gwt 中的按钮

> ID：14743492
> 
> 赞同：1
> 
> 时间：2013-02-07T04:21:11.163
> 
> 标签：gwt, uibinder, gwt2

我有按钮，想为它设置一个图标以及里面***的文本。***他们没有像 smartGwt 中那样**向按钮添加图标**的属性..任何想法如何实现它请帮忙。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-07T08:35:27.780

有很多方法可以实现这一点。

## 方式1：简单的方式

只需通过代码设置背景图像。 `myButton.getElement().getStyle().setBackgroundImage("path");`

## 方式2：另一种简单的方式

设置自己的html `myButton.setHtml("Pass the html string");`

## 方式3：简单但提供更多控制权

`myButton.addStylename("buttonStyle")`

使用 css 设置样式

```
.buttonStyle{
color : red;
} 
```

## 方式4：根据我的最佳方式

创建您自己的拆分按钮，将其包裹在[flowpanel](http://google-web-toolkit.googlecode.com/svn/javadoc/latest/com/google/gwt/user/client/ui/FlowPanel.html)或[Horizo](http://google-web-toolkit.googlecode.com/svn/javadoc/latest/com/google/gwt/user/client/ui/HorizontalPanel.html) ​​ntalPanel 周围，图像作为您的第一个小部件，按钮作为您的另一个小部件。这使您可以对图像和按钮进行额外控制。您可以在图像和按钮上使用单击处理程序，并且可以单独设置它们的样式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-12-06T11:48:48.443

这就是我在 get:button 中设置图标的方式。

添加一个额外的样式类挂钩，我的下面是 btn-fa-group 到您的 gwt 按钮。如果您使用属性“addStyleNames”，您可以在样式表中定义它们并拥有多个类。

```
<g:Button text=" Post Your Answer" enabled="false" ui:field="showPostButton" addStyleNames="btn btn-default btn-fa-group" /> 
```

现在在您的 CSS 中定义以下声明：

```
btn-fa-group:before {
    color: #333333;
    content: "\f0c0";
    display: inline-block;
    font-family: "fontawesome";
} 
```

需要注意的一些重要事项；不要忘记 before 选择器，确保 unicode 以斜杠开头并安装了 fontAwesome。或者，如果您安装了字体，您可以使用另一个字形图标。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-07T05:55:52.633

```
Button bt = new Button();

bt.getElement().getStyle().setBackgroundImage("url('path/to/ur/image/imagename.extention')"); 
```

还将背景图像的大小设置为按钮的大小

```
bt.getElement().getStyle().setProperty("backgroundSize","30px"); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-07T06:48:37.113

向您的 Button 添加一个 Css 类可能是最好的解决方案。

button.addStyleName("ButtonIcon");

[您可以在此处](https://stackoverflow.com/questions/3490216/html-css-adding-an-icon-to-a-button)阅读如何定义 CSS 和 HTML 。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-07T04:57:24.667

您可以在按钮中设置带有图像的innerhtml，即

```
 Button button=new Button("<image src='abc.jpg' width='200px' height='300px' />Ok"); 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2013-02-07T05:31:12.833

是的，你可以 .Gwt 有一个`SmartGwt`名为的类型按钮`push buttopn`

```
com.google.gwt.user.client.ui.PushButton 
```

您可以将 Image 对象传递给它，如下所示

```
Image  image = new Image(GWT.getModuleBaseURL() + "/images/search-arrow.png");
RootPanel.get().add(new PushButton(image)); 
```

# javascript - jQuery 下拉菜单 链接在 Internet Explorer 中不起作用

> ID：14743494
> 
> 赞同：0
> 
> 时间：2013-02-07T04:21:23.427
> 
> 标签：javascript, jquery

我最近从这个开发者的网站实现了一个 jQuery 下拉列表：http: [//tympanus.net/codrops/2012/10/04/custom-drop-down-list-styling/](http://tympanus.net/codrops/2012/10/04/custom-drop-down-list-styling/)，它在我的 Chrome 网站上看起来和工作正常Firefox（我的网站是：[http](http://www.ExpeditionerSafaris.com) ://www.ExpeditionerSafaris.com ）。

但是，在 Internet Explorer（当然）中，li 链接不起作用。

这是代码：

```
function DropDown(el) {
    this.dd = el;
    this.initEvents();
}

DropDown.prototype = {
    initEvents: function () {
        var obj = this;

        obj.dd.on('click', function (event) {
            $(this).toggleClass('active');
            event.stopPropagation();
        });
    }
}

$(function () {

    var dd = new DropDown($('#dd'));

    $(document).click(function () {
        // all dropdowns
        $('.wrapper-dropdown-5').removeClass('active');
    });

}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T04:31:54.597

我认为您有`jquery confliction`参考[http://api.jquery.com/jQuery.noConflict/的问题](http://api.jquery.com/jQuery.noConflict/)

代码有问题

```
$(function () {//here is problem of `$` conflictions

    var dd = new DropDown($('#dd'));

    $(document).click(function () {
        // all dropdowns
        $('.wrapper-dropdown-5').removeClass('active');
    });

}); 
```

我检查了它并且代码有错误

```
Error: TypeError: $ is not a function
Source File: http://www.expeditionersafaris.com/
Line: 426 
```

使用`jQuery(function ()`代替`$(function ()`再试试，或者使用`jQuery.noConflict()`函数

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T04:36:41.873

在你的`initEvents`方法中。不要通过`event`，因为它与 IE 事件发生冲突，所以让它

```
obj.dd.on('click', function (evt) {
    //evt is jQuery normalized event object

    $(this).toggleClass('active');
    event.stopPropagation();
}); 
```

# ruby-on-rails - Rails 公共路由中的随机路由错误

> ID：14743499
> 
> 赞同：0
> 
> 时间：2013-02-07T04:21:33.333
> 
> 标签：ruby-on-rails

我正在编写一个 jQuery Mobile 网站，将其变成一个 PhoneGap/Cordova 应用程序。为此，我创建了一个全新的 Rails 项目，并在更改为 web 服务器的“瘦”gem 后，将整个 jQuery Mobile 应用程序放在新 Rails 项目的 public/myapp 文件夹中。

这一切都很好；我可以从 localhost:3000/myapp 访问我的移动应用程序，但经过几个小时的测试后，Rails 应用程序突然开始在各处抛出 404。可能发生了什么？

这是我在 rails 服务器日志中看到的错误之一：

```
ActionController::RoutingError (No route matches [GET] "/js/setlocation_address.js" 
```

基本上，我的标签中对 javascript 或 css 文件的每个引用都会`<head>`返回 404 错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T05:05:19.613

我认为解决方案是把

```
config.serve_static_assets = true 
```

在`config/environments/production.rb`文件中，但我不确定这是否解决了问题，因为它是一个间歇性问题。

编辑

实际上，问题似乎是我有时会去`localhost:3000/myapp`，有时会去`localhost:3000/myapp/index.html`。

尽管 Rails 每次都会将我路由到同一个 index.html 页面，但我的浏览器无法正确获取相对路径，并且会尝试使用 GET`localhost:3000/css/styles.css`而不是`localhost:3000/myapp/css/styles.css`.

# ios5 - 我应该有两个笔尖来支持 iPhone 5 / iPhone 4 的屏幕吗？

> ID：14743500
> 
> 赞同：0
> 
> 时间：2013-02-07T04:21:35.097
> 
> 标签：ios5, ios6, iphone-5, autolayout, iphone-4

我开始在一个需要为 iPhone 5 优化并且需要 iOS 5.x 或更高版本的应用程序中工作。

但是用户拥有 iPhone 4 和 iOS 5.x 的场景是可能的。但是在这些情况下，自动布局将是一个问题......

所以，我可以为 iPhone 5 使用 Autolayout，但是使用 iOS 5.x（iPhone 4 或更低版本）的用户会有问题，所以为了避免这种情况，我应该有两个笔尖来支持 iPhone 5 屏幕和另一个 iPhone 4？（这对我来说听起来很丑陋）。

有这样的东西...

```
如果（IPHONE5）{
//使用 AutoLayout 或不使用它来加载 iPhone 5 nib
}别的{
//加载iPhone 4或以下
}
```

无论如何，是否有更好的选择来支持两个屏幕但使用不同的 iOS 版本？对此有何建议？

从现在开始感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T14:45:33.130

这是我一直想知道的关于自己的事情。然而，我偶然发现了一个网页：“ [Drop iOS 5: Only support iOS 6](http://drewcrawfordapps.com/2.0/drop-ios-5-only-support-ios-6/ "放弃 iOS 5：仅支持 iOS 6") ”，它解释了如果可能的话，应该避免这种情况。

为旧操作系统进行开发似乎是合理的，但是......

*   人们更新手机的速度非常快（与 Android 不同）
*   开发时间增加
*   开发成本增加
*   维护代码更复杂
*   发布日期变晚

因此：

*   更多人升级到更新的操作系统
*   您的“较早的份额”变得不那么相关了
*   您的“销售损失”甚至更小
*   由于成本增加，您的“投资回报”已延长

我的建议：放弃 iOS-5

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T23:06:08.227

在 Github 上查看这个项目，它可能会有所帮助

[https://github.com/RolandasRazma/RRAutoLayout](https://github.com/RolandasRazma/RRAutoLayout)

基本上它可以帮助您处理 iOS5.x 上的一些 AutoLayout 功能。但由于这是通过对内部类进行一些破解来完成的，因此如果您将其应用于将在 App Store 上显示的应用程序，您应该小心。

无论如何，它可以帮助您了解执行此操作所需的管理。

但是，我建议继续使用“单独的笔尖”方法。

希望有帮助，

# visual-studio-2010 - VS2010 F# 编译器的正确 Web.Config 设置是什么？

> ID：14743506
> 
> 赞同：0
> 
> 时间：2013-02-07T04:22:08.267
> 
> 标签：visual-studio-2010, f#

我有一个这样的 ASPX 页面：

```
<%@ Page Language="F#" %>
<!DOCTYPE html>
<html>
<head>   
   <title></title>
</head>
<body>
   <%-- Try to output "This is a Test" 10 times --%>
   <% for i = 1 To 10 do  %>
      <p>This is a test</p>   
</body>
</html> 
```

和一个看起来像这样的 web.config：

```
<?xml version="1.0"?>
<configuration>
   <system.codedom>
      <compilers>
         <compiler language="F#;f#;fs;fsharp"
            extension=".fs"
            warningLevel="4"
            type="Microsoft.FSharp.Compiler.CodeDom.FSharpAspNetCodeProvider,
            FSharp.Compiler.CodeDom, Version=2.0.0.0,
            Culture=neutral,
            PublicKeyToken=a19089b1c74d0809">
            <providerOption name="CompilerVersion" value="v4.0" />
            <providerOption name="WarnAsError" value="false" />
         </compiler>
      </compilers>
   </system.codedom> 
   <system.web>
      <compilation debug="true" targetFramework="4.0" />
   </system.web>
</configuration> 
```

当我运行 VS2010 WebApp 时，出现如下错误：
“CodeDom 提供程序类型“Microsoft.FSharp.Compiler.CodeDom.FSharpAspNetCodeProvider,
FSharp.Compiler.CodeDom, Version=2.0.0.0,
Culture=neutral,
PublicKeyToken=a19089b1c74d0809”无法定位。”

我已经尝试了 manojlds [here](https://stackoverflow.com/questions/5839407/f-global-asax-language-not-supported)提到的设置，但它们似乎也不适合我。我认为这是因为我的 VS2010 Pro 副本具有更新版本的 F# 编译器，但我不知道如何确定。

有人可以帮我理解我应该在 VS2010 web.config 中为“compiler”和“providerOption”元素使用的正确版本设置吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T11:04:49.207

我还没有尝试过，但是您的配置文件对我来说是正确的 - 您可以检查`FSharp.Compiler.CodeDom`您的 GAC 中安装的程序集的版本（通过查看`C:\windows\assembly`）吗？

但是，目前，我真的不建议使用 F# 来编写网页的 ASPX 部分。它可以工作，但在将 C# 与 ASPX 混合或使用 Razor 模板引擎（用于 ASP.NET MVC）时，您不会获得如此流畅的体验。

我认为在 F# 中创建服务器端 ASP.NET Web 应用程序的最佳方法是将 F# 用于背后的代码（在传统 WebForms 中）或模型和控制器部分（在 MVC 中）。还有许多模板和教程描述了如何做到这一点：

*   [教程：使用在线模板在 F# 中创建 Web 项目](http://msdn.microsoft.com/en-us/library/hh304375%28v=vs.100%29.aspx)
*   [和ASP.NET MVC 4](http://visualstudiogallery.msdn.microsoft.com/3d2bf938-fc9e-403c-90b3-8de27dc23095)和旧版[ASP.NET MVC 3](http://visualstudiogallery.msdn.microsoft.com/f57aa816-e96b-4133-ab5d-9b9b99914ead)的模板
*   您可能还想查看[fsharp.org 上的 Web Stacks 页面](http://fsharp.org/webstacks/index.html)

# php - 如何使用 PHP/Javascript 检查 24 小时内出现“错误”的次数

> ID：14743508
> 
> 赞同：0
> 
> 时间：2013-02-07T04:22:27.840
> 
> 标签：php, javascript, ajax

我的页面中有一个 JavaScript 片段，其中包含 ajax 函数，用于从数据库查询中获取数据，代码如下：

```
$('#fpgo2').click(function () {
  var sanswer = $('#sanswer').val();
       if (sanswer != "") {                                                                                     
                    $.ajax({
                    type: 'POST',
                url: root_url + '/services/services.php?method=forgotpassword',
                    data: {email:email,sanswer:sanswer},
                    async: true,
                   success: function (data) {
                    //alert(data);
                    if (data == 1) {
                                 ************
                                 ************     
                          } else if (data == 2) {
                    $('#msg_noseqqstn').html('Wrong answer').show();
                     } else {
                      alert('**********');       
                      }
                      }
                      });
                       }
                      else{
                          ***********
                          }
                          }); 
```

在这里，我想计算以下代码在 24 小时内执行了多少次

```
else if (data == 2) {
                        $('#msg_noseqqstn').html('Wrong answer').show();
                         } 
```

条件是如果我在 24 小时内收到此响应 5 次，我将需要执行另一个功能。那么，谁能告诉我如何知道错误“错误答案”代码执行的次数以及如何设置时间段，即用户的 24 小时时间段。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T04:31:52.220

这是一个很好的数据库候选者。您可以有一个包含 3 个字段的表格：`IPAddress`, `Attemps`，`LastDate`这样对于每个 IP 地址，您就可以知道在当前最后日期进行了多少次尝试。

每当实际日期不再相同时，尝试计数将重置为 1。以下是该机制的伪代码：

```
if (same date) {
    if (attemps < 5) {
        if (!try_connect()) {
            attemps++;
        }
    } else {
        error();
    }
} else { // different date
    attemps = 1;
}

lastDate = actualDate; 
```

希望这可以帮助 ：）

# vb.net - 如何在 OK 和 UPDATE 模式下激活菜单

> ID：14743509
> 
> 赞同：0
> 
> 时间：2013-02-07T04:22:29.470
> 
> 标签：vb.net, sapb1

我在右键单击事件中启用了一些菜单。第一次效果很好。例如，按下“添加行”菜单，它会添加行。我再次右键单击按钮，它没有显示我在右键单击事件中启用的菜单。我需要一次又一次地添加行。

我怎样才能做到这一点？

```
Private Sub SBO_Application_RightClickEvent(ByRef eventInfo As SAPbouiCOM.ContextMenuInfo, ByRef BubbleEvent As Boolean) Handles SBO_Application.RightClickEvent
    Try
        oForm = SBO_Application.Forms.Item("TRADING")
        If (eventInfo.FormUID = "TRADING") Then
             oCombo = oForm.Items.Item("1000002").Specific
            Dim oMenus As SAPbouiCOM.Menus
            oMenus = SBO_Application.Menus
            oForm.EnableMenu("1287", True)
            oForm.EnableMenu("1292", True)
            oForm.EnableMenu("1293", True)
           If (oCombo.Selected.Value = "Open") Then
                oMenus.Item("1283").Enabled = True
            Else
                oMenus.Item("1283").Enabled = False
            End If

        End If
    Catch ex As Exception

    End Try

End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-06T09:54:14.020

根据您在帖子中提供的输入，可能有两次出错的机会。

1.  你第一次完美地添加了行，但下一次它不起作用..所以我认为代码没有完美处理。尝试在操作错误之前放置相同的代码。并尝试捕获您在项目事件中获得的操作结果，以便我们可以清楚地调试问题。
2.  要启用右键单击事件菜单，我们需要根据 oform.mode 分别处理右键单击菜单选项。

例如在采购订单屏幕中，我们将在添加更多和查找模式中获得不同的菜单。

# php - 通过 PHP 和 htaccess 重写特定语言的 URL

> ID：14743513
> 
> 赞同：0
> 
> 时间：2013-02-07T04:23:32.627
> 
> 标签：php, .htaccess

我需要一些像这样重写 URI 的 htaccess 规则：

```
http://sub.domain.tld/en/about?a=1&b=2 
```

对此：

```
http://sub.domain.tld/about.php?lang=en&a=1&b=2 
```

或更简单：

```
http://sub.domain.tld/about.php?a=1&b=2&lang=en 
```

没有不同...

但是用户应该看到第一个 URI 而不是转换后的 URI（不应该被重定向）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T04:44:15.347

你可以试试这个：

```
Options +FollowSymlinks
RewriteEngine On
RewriteBase /
RewriteCond %{REQUEST_URI} ^/([^/]+)/([^/]+) [NC]
RewriteCond %{QUERY_STRING} ([^/]+)  [NC]
RewriteRule .* %2.php?%3&lang=%1? [L] 
```

静默地图

`http://sub.domain.tld/LangCode/FileName?key1=val1&key2=val2`

带或不带斜杠。始终显示在浏览器的地址栏中，

至：

`http://sub.domain.tld/FileName.php?key1=val1&key2=val2&lang=LangCode`

对于永久重定向，替换`[L]`为`[R=301,L]`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T05:05:14.407

这是 .htaccess 代码：

```
Options +FollowSymLinks
RewriteEngine On
RewriteBase /

RewriteRule en/about?a=(.*)&b=(.*)$ about.php?lang=en&a=$1&b=$2 
```

# android - 旋转android模拟器显示

> ID：14743515
> 
> 赞同：2
> 
> 时间：2013-02-07T04:23:46.420
> 
> 标签：android, android-emulator

我如何旋转模拟器显示（不是完整的模拟器），因为我的 Honeycomb 显示倾斜 90 ^o。

我尝试按`Ctrl + F12`,`Num 7`和`9`，但完整的模拟器以纵向模式显示。我只需要倾斜显示器。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-10-31T12:09:35.710

Android 模拟器快捷方式

`Ctrl`+`F11`向后切换布局方向纵向/横向

Ctrl+F12 向前切换布局方向纵向/横向

1.  主要设备键

`Home`主页按钮

`F2`左软键/菜单/设置按钮（或`Page up`）

`Shift`+`F2`右软键/星号按钮（或`Page down`）

`Esc`返回键

`F3`呼叫/拨号按钮

`F4`挂断/结束通话按钮

`F5`搜索按钮

1.  其他设备密钥

`Ctrl`+`F5`提高音量（或`+`关闭 Num Lock 的数字键盘）`Ctrl`+`F6`降低音量（或`+`关闭 Num Lock 的数字键盘）`F7`电源按钮`Ctrl`+`F3`相机按钮

`Ctrl`+`F11`向后切换布局方向纵向/横向

`Ctrl`+`F12`切换布局方向纵向/横向向前

`F8`切换手机网络

`F9`切换代码分析

`Alt`+`Enter`切换全屏模式

`F6`切换轨迹球模式

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T04:30:01.610

`left ctrl+F11`您可以使用key更改模拟器的方向。

`Ctrl`+`F11`或`Ctrl`+`F12` 更改 android 模拟器在 windows 上的方向

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-07T04:30:03.260

只是屏幕不能倾斜。手机本身变成横向，然后是屏幕旋转。请参阅[此](https://stackoverflow.com/questions/2618967/switching-to-landscape-mode-in-android-emulator?rq=1)以获得更多帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-07T04:36:22.883

关于您的活动：-

```
setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_PORTRAIT); 
```

或者

在您的清单上：-

```
<activity android:name=".MyActivity"  
android:configChanges="keyboard|keyboardHidden|orientation" /> 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-02-07T04:30:30.923

试试这个，

请检查您的`manifest.xml`. 假设你给了 screenOrientation 请删除它。

```
 android:screenOrientation="portrait" 
```

# java - 在 Java 中创建地图

> ID：14743516
> 
> 赞同：98
> 
> 时间：2013-02-07T04:23:52.767
> 
> 标签：java, map

我想创建一个`map`包含以下条目的条目`(int, Point2D)`

我怎样才能在 Java 中做到这一点？

我尝试了以下失败。

```
HashMap hm = new HashMap();

hm.put(1, new Point2D.Double(50, 50)); 
```

* * *

## 回答 #1

> 赞同：137
> 
> 时间：2013-02-07T04:26:55.187

```
Map <Integer, Point2D.Double> hm = new HashMap<Integer, Point2D>();
hm.put(1, new Point2D.Double(50, 50)); 
```

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2018-04-28T06:59:50.073

**爪哇 9**

```
public static void main(String[] args) {
    Map<Integer,String> map = Map.ofEntries(entry(1,"A"), entry(2,"B"), entry(3,"C"));
} 
```

* * *

## 回答 #3

> 赞同：25
> 
> 时间：2017-06-04T08:30:33.130

甚至还有一种更好的方法来创建 Map 以及初始化：

```
Map<String, String> rightHereMap = new HashMap<String, String>()
{
    {
        put("key1", "value1");
        put("key2", "value2");
    }
}; 
```

有关更多选项，请查看此处[如何初始化静态地图？](https://stackoverflow.com/questions/507602/how-can-i-initialise-a-static-map)

* * *

## 回答 #4

> 赞同：11
> 
> 时间：2020-12-19T11:18:45.113

使用较新的 Java 版本（*即* Java 9 及更高版本），您可以使用：

```
Map.of(1, new Point2D.Double(50, 50), 2, new Point2D.Double(100, 50), ...) 
```

一般来说：

```
Map.of(Key1, Value1, Key2, Value2, KeyN, ValueN) 
```

但是请记住，如果您有多个可以使用的条目，那么它最多`Map.of`只适用**于大多数条目：** `10``10`

```
Map.ofEntries(entry(1, new Point2D.Double(50, 50)), entry(2,  new Point2D.Double(100, 50)), ...); 
```

* * *

## 回答 #5

> 赞同：10
> 
> 时间：2013-02-07T04:25:51.133

```
Map<Integer, Point2D> hm = new HashMap<Integer, Point2D>(); 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2020-04-02T09:54:50.647

多亏了 Java 9，我使用了这种 Map 人口。老实说，这种方法为代码提供了更多的可读性。

```
 public static void main(String[] args) {
    Map<Integer, Point2D.Double> map = Map.of(
        1, new Point2D.Double(1, 1),
        2, new Point2D.Double(2, 2),
        3, new Point2D.Double(3, 3),
        4, new Point2D.Double(4, 4));
    map.entrySet().forEach(System.out::println);
  } 
```

# c# - C# - 组合具有相同属性的多个 LINQ 集合

> ID：14743518
> 
> 赞同：6
> 
> 时间：2013-02-07T04:24:14.890
> 
> 标签：c#, linq, list, union

也许是深夜，但我被难住了。我正在尝试将具有相同属性的多个列表合并为一个。我认为 LINQ 的 .UNION 可以解决问题，但我错了。这是我的一些列表的示例：

```
LIST1 (report names):
Date      Name    Title         Product
02/01/13  Steve   Hello World   Report
02/05/13  Greg    Howdy         Report

LIST2 (song names):
Date      Name    Title         Product
01/01/13  John    Time          Song
01/05/13  Bob     Sorry         Song

LIST3 (games names):
Date      Name      Title         Product
12/01/12  Google    Bike Race     Game
12/05/12  Apple     Temple Run    Game 
```

我的课很简单。这是它的样子：

```
public class MyClass {
  public DateTime Date { get; set; }
  public string Name { get; set; }
  public string Title { get; set; }
  public string Product { get; set; }
} 
```

如果您想知道，我使用此 LINQ 查询来获取上述列表之一：

```
var finalList = Games
  .Select (s => new MyClass { 
    Date = (System.DateTime) s.Games.Creation_date,
    Name = s.Games.Last_name,
    Title = string.Format("{0} (Report)", s.Game.Headline),
    Product="Report"
  })
  ; 
```

到目前为止，这很容易，但我想将所有列表合并为 1。所以，我的最终列表应该如下所示：

```
Date      Name    Title         Product
02/01/13  Steve   Hello World   Report
02/05/13  Greg    Howdy         Report
01/01/13  John    Time          Song
01/05/13  Bob     Sorry         Song
12/01/12  Google  Bike Race     Game
12/05/12  Apple   Temple Run    Game 
```

我认为 UNION 命令可以做到这一点：

```
var newList = List1.Union(List2).Union(List3); 
```

但我没有得到想要的输出。

```
Date      Name    Title         Product
02/01/13  Steve   Hello World   Report
02/05/13  Greg    Howdy         Report
01/01/13  Bob     Time          Game
01/05/13  John    Sorry         Song
12/01/12  Google  Bike Race     Song
12/05/12  Apple   Temple Run    Game 
```

知道我在这里做错了什么吗？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-02-07T04:28:17.553

尝试：

```
list1.Concat(list2).Concat(list3); 
```

无论如何，您都不想使用`Union`（工作与否），因为它确实设置了联合。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T04:50:02.993

您可以尝试使用 AddRange 命令应该看起来像这样

```
var FullList = list1.AddRange(list2).AddRange(list3); 
```

或者故障安全方式应该是

```
var FullList = list1.Concat(list2).Concat(list3).ToList(); //Personally i would use this 
```

或者你也有

```
var FullList = new[] { list1, list2, list3 }.SelectMany(a => GetAllProducts(a)).ToList(); 
```

# ocr - 如果 OCR 具有高度针对性，它可以在瞬间运行吗？（小词典）

> ID：14743519
> 
> 赞同：2
> 
> 时间：2013-02-07T04:24:22.023
> 
> 标签：ocr, tesseract

我正在寻找一个使用字典来匹配单词的开源 ocr（可能是 tesseract）。例如，我知道这个 ocr 只会用于搜索某些名称。想象一下，我有一个主来宾列表（书面），我想用 ocr 在不到一秒的时间内扫描这个列表，并对照一个名称数据库检查它。

我知道传统的 ocr 可以尝试读取每个字母，然后我可以用 100 个名称交叉引用结果，但这需要太长时间。如果 ocr 只专注于这 100 个单词而不是其他任何东西，那么它应该能够在一瞬间完成所有这些。即没有必要猜测一个词可能是“Jach”，因为“Jach”在我的数据库中不是一个名字。ocr 应该能够推断出它是“Jack”，因为这是数据库中的实际名称。

这可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T08:35:44.907

这应该是可能的。可以这样想：不是让您的 OCR 寻找“J”，而是直接寻找“Jack”，有点：作为一个单独的*符号*。

因此，当您训练/校准您的 OCR 时，请使用整个单词的图像对其进行训练，类似于您对单个符号的训练方式。

（如果此功能在您的 OCR 中不直接可用，则首先将整个单词的图像映射到唯一的符号，然后将该符号转换为最终的单词字符串）

# java - hadoop中的瞬态变量和静态方法，dev寻求启示

> ID：14743530
> 
> 赞同：0
> 
> 时间：2013-02-07T04:25:19.853
> 
> 标签：java, multithreading, hadoop

我正在查看 hadoop 框架中没有意义的生产代码。为什么我们使用瞬态，为什么我不能将实用程序方法设为静态方法（领导告知不要将 isThinger 设为静态方法）？我查了瞬态关键字，它与序列化有关。这里真的使用序列化吗？

```
//extending from MapReduceBase is a requirement of hadoop
public static class MyMapper extends MapReduceBase {

    // why the use of transient keyword here?
    transient Utility utility;

    public void configure(JobConf job) {

        String test = job.get("key");

        // seems silly that we have to create Utility instance.
        // can't we use a static method instead?
        utility = new Utility();

        boolean res = utility.isThinger(test);

        foo (res);
    }

    void foo (boolean a) { }
}

public class Utility {
   final String stringToSearchFor = "ineverchange";

   // it seems we could make this static.  Why can't we?
   public boolean isThinger(String word) {
      boolean val = false;
      if (word.indexOf(stringToSearchFor) > 0) {
           val = true;
      }
      return val;
   }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T08:16:55.787

The problem in your code is the difference between the local mode (dev&testcases using it usually) and the distributed mode.

In the local mode everything will be inside a single JVM, so you can safely assume that if you change a static variable (or a static method that shares some state, in your case `stringToSearchFor`) the change will be visible for the computation of every chunk of input.

In distributed mode, every chunk is processed in its own JVM. So if you change the state (e.G. in `stringToSearchFor`) this won't be visible for every other process that runs on other hosts/jvms/tasks.

This is an inconsistency that leads to the following design principles when writing map/reduce functions:

1.  Be as stateless as possible.
2.  If you need state (mutable classes for example), **never** declare references in the map/reduce classes `static` (otherwise it will behave different when testing/develop than in production)
3.  Immutable constants (for example configuration keys as `String`) should be defined `static` and `final`.

`transient` in Hadoop is pretty much useless, Hadoop is not serializing anything in the usercode (Mapper/Reducer) class/object. Only if **you** do something with the Java serialization which we don't know of, this will be an issue.

*For your case*, if the `Utility` is really a utility and `stringToSearchFor` is an immutable constant (thus not be changed ever), you can safely declare `isThinger` as `static`. And please remove that `transient`, if you don't do any Java serialization with your `MapReduceBase`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T04:39:11.760

除非这里没有显示一些东西，否则我怀疑制作方法的问题`Utility`很大程度上`static`归结为风格。特别是，如果您没有注入`Utility`实例而不是在其中按需实例化它，那么它就毫无意义。正如它所写的那样，它不能被覆盖，也不能比`static`方法更容易测试。

至于`transient`，你是对的，没有必要。如果原始开发人员在继承或实现链中的某处使用序列化，并且他们通过将不可序列化的实例变量标记为`transient`.

# c - 如何在C中将数据包写入TAP接口？

> ID：14743535
> 
> 赞同：3
> 
> 时间：2013-02-07T04:25:32.767
> 
> 标签：c, linux, networking, driver

有谁知道如何将数据包写入C中的TAP接口？还是其他语言？

我自己构建了一个以太网数据报，我想将它写入特定的tap接口。

谢谢！:)

关于 TAP：[http ://en.wikipedia.org/wiki/TUN/TAP](http://en.wikipedia.org/wiki/TUN/TAP)

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-11T17:55:51.180

假设您已经创建了一个 TAP 接口（使用`ip tuntap add`），您可以使用**Packet Socket**将数据写入其中（尝试`man 7 packet`了解更多信息）。

首先，使用`int sockfd = socket(AF_PACKET, SOCK_DGRAM, htons(ETH_P_ALL))`创建一个数据包套接字。

第二步是找到TAP接口的**接口索引**（`ifindex`）。只需运行命令`ip link`并记下每行开头的数字。例如，

```
[nav@blumarine Test02]$ ip link
1: lo: <LOOPBACK,UP,LOWER_UP> mtu 65536 qdisc noqueue state UNKNOWN mode DEFAULT 
    link/loopback 00:00:00:00:00:00 brd 00:00:00:00:00:00
2: p12p1: <NO-CARRIER,BROADCAST,MULTICAST,UP> mtu 1500 qdisc pfifo_fast state DOWN mode DEFAULT qlen 1000
    link/ether 00:26:b9:24:82:16 brd ff:ff:ff:ff:ff:ff
3: eth0: <BROADCAST,MULTICAST,UP,LOWER_UP> mtu 1500 qdisc pfifo_fast state UP mode DORMANT qlen 1000
    link/ether c4:17:fe:8c:f7:c8 brd ff:ff:ff:ff:ff:ff 
```

的 ifindex 为`lo`1，的 ifindex 为`eth0`3。

第三步，填写一个`sockaddr_ll`结构体传递给`sendto()`api。此结构用于保存有关数据包目标地址的信息。完全这样填写：

```
struct sockaddr_ll SendSockAddr;
SendSockAddr.sll_family   = AF_PACKET;
SendSockAddr.sll_halen    = ETH_ALEN;
SendSockAddr.sll_ifindex  = ifindex;   // The number we just found earlier..
SendSockAddr.sll_protocol = htons(ETH_P_ALL);
SendSockAddr.sll_hatype   = 0;
SendSockAddr.sll_pkttype  = 0; 
```

最后，用于`sendto()`发送您的数据包。使用`man 3 sendto`以获取更多信息`sendto()`并`man 7 packet`深入了解`struct sockaddr_ll`.

祝你好运 ：）

# javascript - 多个键名，相同的对值

> ID：14743536
> 
> 赞同：40
> 
> 时间：2013-02-07T04:25:48.403
> 
> 标签：javascript

我正在尝试在具有多个名称的键的 JavaScript 脚本中设置对象文字。指的是相同的对象值，即我已经尝试过的类似的东西：

```
var holidays: {
    "thanksgiving day", "thanksgiving", "t-day": {
        someValue : "foo"
    }
}

var holidays: {
    ["thanksgiving day", "thanksgiving", "t-day"]: {
        someValue : "foo"
    }
} 
```

有没有办法我可以做到这一点？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-02-07T04:54:11.307

另一种方法是做一些后处理

```
function expand(obj) {
    var keys = Object.keys(obj);
    for (var i = 0; i < keys.length; ++i) {
        var key = keys[i],
            subkeys = key.split(/,\s?/),
            target = obj[key];
        delete obj[key];
        subkeys.forEach(function(key) { obj[key] = target; })
    }
    return obj;
}

var holidays = expand({
    "thanksgiving day, thanksgiving, t-day": {
        someValue : "foo"
    } 
}); 
```

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2013-02-07T04:41:35.420

JSON 不提供这样的功能，Javascript 对象文字也不提供。

您可能可以使用以下方法：

```
holidays = {
    thanksgiving: {foo: 'foo'},
    groundhogDay: {foo: 'bar'},
    aliases: {
        'thanksgiving day': 'thanksgiving',
        't-day': 'thanksgiving',
        'Bill Murrays nightmare': 'groundhogDay'
    }
} 
```

然后你可以检查

```
holidays[name] || holidays[holidays.aliases[name]] 
```

为您的数据。

这不是一个很好的解决方案。但是编写一个从以下表示创建这种对象的小函数并不难：

```
[
    {
        names: ['thanksgiving', 'thanksgiving day', 't-day'],
        obj: {foo: 'foo'}
    },
    {
        names: ['groundhogDay', 'Bill Murrays nightmare'],
        obj: {foo: 'bar'}
    },
] 
```

如果这样更容易维护。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2017-12-07T14:54:22.183

另一个解决方案，如果你能负担得起 RegExp 执行和 ES6 代理：

```
let align = new Proxy({

    'start|top|left': -1,
    'middle|center': 0,
    'end|bottom|right': 1,

}, {

    get: function(target, property, receiver) {

        for (let k in target)
            if (new RegExp(k).test(property))
                return target[k]

        return null

    }

})

align.start     // -1
align.top       // -1
align.left      // -1

align.middle    // 0
align.center    // 0

align.end       // 1
align.bottom    // 1
align.right     // 1 
```

请参阅[MDN 代理](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Proxy/handler/get)

2021 年编辑：使用[reduce](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/Reduce)和[defineProperty 的](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/defineProperty)
另一个（更清洁？）解决方案：

```
const myDict = [
    // list of pairs [value, keys],
    // note that a key should appear only once
    [-1, ['start', 'left', 'top']],
    [0, ['center', 'middle']],
    [1, ['end', 'right', 'bottom']],
].reduce((obj, [value, keys]) => {
    for (const key of keys) {
        Object.defineProperty(obj, key, { value })
    }
    return obj
}, {}) 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-02-07T04:30:54.913

我想你可以做这样的事情：

```
var holidays = {
  'thanksgiving day': {
    foo: 'foo'
  }
};

holidays.thanksgiving = holidays['t-day'] = holidays['thanksgiving day']; 
```

如果您看到自己经常这样做，或者您有更多的价值观，请考虑以下模式：

```
'thanksgiving, t-day, thanks, thank, thank u'.split(',').forEach(function(key) {
  holidays[key] = holidays['thanksgiving day'];
}); 
```

更好的方法是预先处理您的数据，而不是添加重复数据。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2017-07-20T17:38:25.923

这应该按预期工作：

```
function getItem(_key) {
    items = [{
        item: 'a',
        keys: ['xyz','foo']
    },{
        item: 'b',
        keys: ['xwt','bar']
    }];

    _filtered = items.filter(function(item) {
        return item.keys.indexOf(_key) != -1
    }).map(function(item) {
        return item.item;
    });
    return !!_filtered.length ? _filtered[0] : false;
} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2016-08-18T19:05:24.403

现在这对您来说可能有点过头了，但这里有一个通用函数，它将创建一个具有“多个键”的对象。它实际上所做的是拥有一个具有实际值的真实属性，然后定义 getter 和 setter 将操作从虚拟键转发到实际属性。

```
function multiKey(keyGroups) {
    let obj = {};
    let props = {};

    for (let keyGroup of keyGroups) {
        let masterKey = keyGroup[0];
        let prop = {
            configurable: true,
            enumerable: false,

            get() {
                return obj[masterKey];
            },

            set(value) {
                obj[masterKey] = value;
            }
        };

        obj[masterKey] = undefined;
        for (let i = 1; i < keyGroup.length; ++i) {
            if (keyGroup.hasOwnProperty(i)) {
                props[keyGroup[i]] = prop;
            }
        }
    }

    return Object.defineProperties(obj, props);
} 
```

这比您预期的要粗略，一旦创建对象就基本上没有性能损失，并且在枚举（`for...in`循环）和成员资格测试（`in`运算符）方面表现良好。这是一些示例用法：

```
let test = multiKey([
    ['north', 'up'],
    ['south', 'down'],
    ['east', 'left'],
    ['west', 'right']
]);

test.north = 42;
test.down = 123;

test.up; // returns 42
test.south; // returns 123

let count = 0;
for (let key in test) {
    count += 1;
}

count === 4; // true; only unique (un-linked) properties are looped over 
```

取自[我的 Gist](https://gist.github.com/rvighne/d31c57dd63a0bf1253f571389608db5a)，你可以分叉。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2017-12-07T15:06:56.520

相同的响应（ES6 Proxy、RegExp），但方式更短（并且可读性显着降低）

```
let align = new Proxy({

    'start|top|left': -1,
    'middle|center': 0,
    'end|bottom|right': 1,

}, { get: (t, p) => Object.keys(t).reduce((r, v) => r !== undefined ? r : (new RegExp(v).test(p) ? t[v] : undefined), undefined) })

align.start     // -1
align.top       // -1
align.left      // -1

align.middle    // 0
align.center    // 0

align.end       // 1
align.bottom    // 1
align.right     // 1 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2018-06-12T08:25:44.910

使用 ES6 你可以这样做，但这并不理想：

```
const holidays = {
    "single": {
        singleValue: "foo",
    },

    ...([
        "thanksgiving day", "thanksgiving", "t-day",
    ].reduce((a, v) => ({...a, [v]: {
        someValue: "foo",
    }}), {})),

    "other": {
        otherValue: "foo",
    },
}; 
```

我仍然认为最干净的解决方案可能是：

```
let holidays = {
    "t-day": {
        someValue: "foo",
    },
};
holidays["thanksgiving"] = holidays["t-day"];
holidays["thanksgiving day"] = holidays["t-day"]; 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2017-09-02T14:20:57.677

```
//create some objects(!) you want to have aliases for..like tags
var {learn,image,programming} = 
 ["learn", "image", "programming"].map(tag=>({toString:()=>tag }));

//create arbitrary many aliases using a Map
var alias = new Map();
alias.set("photo", image);
alias.set("pic", image);
alias.set("learning", learn);
alias.set("coding", programming);

//best put the original tagNames in here too.. 
//pretty easy huh? 

// returns the image object 
alias.get("pic");

// ;) 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2021-05-13T19:59:15.803

这是一种使用共享相同值的多个键初始化对象的方法

```
var holidays = {
    ...["thanksgiving day", "thanksgiving", "t-day"].reduce((acc, key) => ({ ...acc, [key]: 'foo' }), {})
} 
```

虽然我个人认为如果写出来会更清楚

# sql - SQL中的比例数

> ID：14743540
> 
> 赞同：1
> 
> 时间：2013-02-07T04:25:52.700
> 
> 标签：sql, sql-server-2005

我们正在编写一个盘点系统，我们需要说明预期数量和计数数量之间是否存在差异，然后我们需要使用整数将差异按比例分配到记录中。例如：

预期：

```
Item    |  Quantity  |  Shelf
Banana  |  2         |  1
Banana  |  1         |  2
Banana  |  2         |  3 
```

数：共9个。我们需要在 3 条记录中按比例分配 9 个（整根香蕉），给出：

```
Item    |  Quantity  |  Shelf
Banana  |  4         |  1
Banana  |  2         |  2
Banana  |  3         |  3 
```

最终数量应与原始数量大致相同，并且始终以整根香蕉为单位。不存在负香蕉，但记录可以以 0 结尾。

以上只是一个例子。如果存在不同的数量，结果应该是相似的。

我们尝试了：

```
Ceiling(CountedQty * Expected/OriginalTotal) WHERE ROWNUMBER = 1
FLOOR(CountedQty * Expected/OriginalTotal) WHERE ROWNUMBER > 1 
```

但这在 CountedQty - OriginalTotal > 2 时不起作用。

以前，这是在 C# 中使用循环完成的，并保持运行总数，由于业务需求，我们试图避免这种情况。

# java - 在字符串中查找 CRLF

> ID：14743541
> 
> 赞同：0
> 
> 时间：2013-02-07T04:25:57.513
> 
> 标签：java

我有一个文件，我想读取每一行的字符串。如果该行没有以 CRLF (\r\n) 结尾，我想打印一些东西。我通过重定向打印命令的输出来制作这个文件，类似于以下内容。

```
System.out.println("Test\r\n"); 
```

但是当我使用缓冲阅读器从文件中读取这一行时，它似乎没有捕捉到 CRLF。

我使用以下内容来检测 crlf（其中 inputline 是已读入的行）。

```
if(inputline.indexOf("\r\n")<0) 
```

它永远不会检测到 \r\n。我该如何补救？这是缓冲阅读器的问题吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-07T04:28:36.853

> 读线
> 
> 公共字符串 readLine() 抛出 IOException
> 
> 阅读一行文字。一行被认为是由换行符 ('\n')、回车符 ('\r') 或紧跟换行符的回车符中的任何一个终止的。
> 
> 回报：
> 
> 包含行内容的字符串，**不包括任何行终止字符**，如果已到达流的末尾，则为 null

来自[http://docs.oracle.com/javase/7/docs/api/java/io/BufferedReader.html](http://docs.oracle.com/javase/7/docs/api/java/io/BufferedReader.html)

因此，您可能需要编写一些自己的代码（或者使用这个，从[http://www.coderanch.com/t/276442//java/Reading-file-byte-array](http://www.coderanch.com/t/276442//java/Reading-file-byte-array)借来的）

```
private byte[] toByteArray(File file) throws FileNotFoundException, IOException{  
    int length = (int) file.length();  
    byte[] array = new byte[length];  
    InputStream in = new FileInputStream(file);  
    int offset = 0;  
    while (offset < length) {  
        offset += in.read(array, offset, (length - offset));  
    }  
    in.close();  
    return array;  
    } 
```

这将为您提供所有字节 - 没有任何内容被剥离。把自己弄出去寻找`\r\n`...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T04:33:44.050

您可以使用知道如何在文件（或文本）中查找行的 java.util.Scanner

```
Scanner sc = new Scanner(new File("filename"));
while(sc.hasNextLine()) {
    System.out.println(sc.nextLine());
} 
```

# javascript - JavaScript 验证适用于 Firefox，但不适用于 Chrome

> ID：14743542
> 
> 赞同：0
> 
> 时间：2013-02-07T04:26:04.313
> 
> 标签：javascript, google-chrome, firefox, cross-browser

我很沮丧，已经花了几个小时在这上面。你们能告诉我有什么问题吗？在表格末尾的开头尝试了 onsubmit。将其更改为 onChange 和 onClick 仍然是相同的问题。

如果我编写 onclick 函数，我也无法让提交按钮说感谢信息，因为它禁用了 onsubmit

```
<script type="text/javascript">
<!--
 // Form validation code will come here.
 function validate()
 {

 if( document.myForm.name.value == "" )
{
 alert( "Please provide your name!" );
 document.myForm.name.focus() ;
 return false;
 }
  if( document.myForm.email.value == "" )
 {
  alert( "Please provide your Email!" );
  document.myForm.email.focus() ;
 return false;
  }
 if( document.myForm.phone.value == "" ||
       isNaN( document.myForm.phone.value ) ||
       document.myForm.phone.value.length != 5 )
 {
   alert( "Please provide a phone number so we can reach you." );
   document.myForm.phone.focus() ;
    return false;
   }
return( true );
 }
   //-->
 </script>

<div class="iphorm-outer">
    <form class="iphorm" action="send_contact.php" name="myForm" method="post"  >
        <div class="iphorm-wrapper">
        <div class="iphorm-inner">
               <div class="iphorm-message"></div>
               <div class="iphorm-container clearfix">
                    <!-- Begin Name element -->
                    <div class="element-wrapper name-element-wrapper clearfix">
                        <label for="name">Name <span class="required">(required)</span></label>
                        <div class="input-wrapper name-input-wrapper">
                            <input class="name-element" id="name" type="text" name="name" />
                        </div>
                    </div>
                    <!-- End Name element -->
                    <!-- Begin Email element -->
                    <div class="element-wrapper email-element-wrapper clearfix">
                        <label for="email">Email <span class="required">(required)</span></label>
                        <div class="input-wrapper email-input-wrapper">
                            <input class="email-element" id="email" type="text" name="email" />
                        </div>
                    </div>
                    <!-- End Email element -->
                    <!-- Begin Phone element -->
                    <div class="element-wrapper phone-element-wrapper clearfix">
                        <label for="phone">Phone</label>
                        <div class="input-wrapper phone-input-wrapper">
                            <input class="phone-element" id="phone" type="text" name="phone" />
                        </div>
                    </div>
                    <!-- End Phone element -->
                    <!-- Begin Message element -->
                    <div class="element-wrapper message-element-wrapper clearfix">
                        <label for="message">Message <span class="required">(required)</span></label>
                        <div class="input-wrapper message-input-wrapper clearfix">
                            <textarea class="message-element" id="message" name="message" rows="7" cols="45"></textarea>
                        </div>
                    </div>
                    <!-- End Message element -->

                    <!-- Begin Submit button -->
                    <div class="button-wrapper submit-button-wrapper clearfix">
                        <div class="loading-wrapper"><span class="loading">Thank YOU, message sent.</span></div>
                        <div class="button-input-wrapper submit-button-input-wrapper">
                            <input class="ka-form-submit" type="submit" name="contact" onclick="return(validate())" value="Submit"/>
                        </div>
                    </div>
                    <!-- End Submit button -->
               </div>
           </div>
       </div>
    </form> 
```

除非功能验证为真，否则有人可以帮我编写一个禁用提交按钮的功能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T05:03:52.033

在浏览器高级设置中启用脚本调试并尝试

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T04:41:23.950

一切似乎都很好。尝试使用`CTRL + F5`清除浏览器缓存刷新页面。

# php - 如何在循环中执行计数

> ID：14743546
> 
> 赞同：2
> 
> 时间：2013-02-07T04:26:35.860
> 
> 标签：php, html

```
foreach ($arrQuestionId as $key=>$question) {

?>

<div class='lt-container'>
<p><strong>QUESTION <span id="quesnum"></span>:</strong></p>
</div>

<?php

}

?> 
```

在上面的代码中，我有一个 while 循环，它显示`QUESTION :`. 现在我想做的是介于两者之间`QUESTION`，`:`我想包含一个计数，以便每次`QUESTION`出现时，它旁边都包含一个计数，如下所示：

```
QUESTION 1:

QUESTION 2:

QUESTION 3:

... 
```

如何才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T04:35:06.957

你也可以试试下面的方法，

```
$countArray = array();
foreach ($arrQuestionId as $key=>$question) {
$countArray[] = $key;
}
count($countArray) or sizeOf() 
```

（或）直接你可以得到没有 for 循环本身，如下所示

```
count($arrQuestionId) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T04:29:25.697

取一个变量并增加它

```
$i=1;
foreach ($arrQuestionId as $key=>$question) {

?>

<div class='lt-container'>
<p><strong>QUESTION <span id="quesnum"><? echo $i; ?></span>:</strong></p>
</div>

<?php
$i++;
}

?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-07T04:29:33.500

```
$count = 1;
foreach ($arrQuestionId as $key=>$question) {

?>

<div class='lt-container'>
<p><strong>QUESTION <span id="quesnum"><?php echo $count++; $></span>:</strong></p>
</div>

<?php

}

?> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-07T04:29:56.180

```
$i=0;
foreach ($arrQuestionId as $key=>$question) {
$i=$i+1;
?>
<div class='lt-container'>
<p><strong>QUESTION <span id="quesnum"></span>:<?php echo $i;?></strong></p>
</div> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-07T04:30:49.037

```
$qno = 1;
foreach ($arrQuestionId as $key=>$question) {

?>

<div class='lt-container'>
    <p><strong>QUESTION <span id="quesnum"></span>:</strong><?php echo $qno?></p>
</div>

<?php
$qno++;
}

?> 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-07T04:28:20.520

创建一个变量并在 foreach 中递增它。

喜欢：

```
$s = 1;
foreach($value as $text) {
echo "Question #".$s." :".$text;
$s++;
} 
```

# php - Windows路径上的PHP带有反斜杠

> ID：14743548
> 
> 赞同：8
> 
> 时间：2013-02-07T04:26:37.103
> 
> 标签：php, windows, path

试图在我的 Windows 操作系统上设置一个 php 网站。我从某人那里得到的 PHP 代码有这样的行

```
$base_path = realpath('./../').'/'; 
```

这以字符串结束`c:\abc\xyz/`

我需要在 Windows 上进行哪些设置才能强制它附带`/`. 我读到了`DIRECTORY_SEPERATOR`，但是有很多地方我需要担心，因此如果我能拥有它以便真正的路径提出`/`它，将对我有很大的帮助。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2016-12-06T15:07:40.093

蒂莫西答案的变体，它使用`DIRECTORY_SEPARATOR`常量而不是条件来简化函数。

```
function platformSlashes($path) {
    return str_replace('/', DIRECTORY_SEPARATOR, $path);
}

$path = "/some/path/here";
echo platformSlashes($path); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-07T04:37:09.527

反斜杠是 Windows 平台上的目录分隔符。但是根据我的理解和经验，在解析路径时，您的 PHP 脚本仍然可以使用正斜杠。因此，您可以使用正斜杠编写所有代码，而不必担心。只有在向用户显示路径时，前/后斜杠才真正重要，例如在安装程序/安装程序脚本中（网站的大多数用户不需要了解目录结构，也不需要关心服务在哪个平台上运行）。您可以创建一个显示函数来识别平台并根据需要替换斜线，然后在显示它们之前通过它传递路径。以下是我建议的示例，尽管我尚未对其进行测试。

```
<?php
function platformSlashes($path) {
    if (strtoupper(substr(PHP_OS, 0, 3)) == 'WIN') {
        $path = str_replace('/', '\\', $path);
    }
    return $path;
}

$path = "/some/path/here";
echo platformSlashes($path); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-07T04:36:36.117

只需对您拥有的字符串进行替换：

```
$base_path = realpath('./../') . '/';
$base_path_mod = str_replace('\\', '/', $base_path); 
```

# android - pjsua Building for Android C 编译器无法创建可执行文件错误

> ID：14743552
> 
> 赞同：1
> 
> 时间：2013-02-07T04:27:02.770
> 
> 标签：android, android-ndk, pjsip

当我运行 ./configure-android 时出现以下错误

我已经阅读了来自[http://trac.pjsip.org/repos/wiki/Getting-Started/Android](http://trac.pjsip.org/repos/wiki/Getting-Started/Android)的指南 并且我安装了 gcc

我在ubuntu和windows都遇到了这个问题

* * *

海合会

```
root@kemal-Vostro-230:/home/kemal/Desktop/pjsua# gcc -v
Using built-in specs.
COLLECT_GCC=gcc
COLLECT_LTO_WRAPPER=/usr/lib/gcc/x86_64-linux-gnu/4.7/lto-wrapper
Target: x86_64-linux-gnu
Configured with: ../src/configure -v --with-pkgversion='Ubuntu/Linaro 4.7.2-2ubuntu1' --with-bugurl=file:///usr/share/doc/gcc-4.7/README.Bugs --enable-languages=c,c++,go,fortran,objc,obj-c++ --prefix=/usr --program-suffix=-4.7 --enable-shared --enable-linker-build-id --with-system-zlib --libexecdir=/usr/lib --without-included-gettext --enable-threads=posix --with-gxx-include-dir=/usr/include/c++/4.7 --libdir=/usr/lib --enable-nls --with-sysroot=/ --enable-clocale=gnu --enable-libstdcxx-debug --enable-libstdcxx-time=yes --enable-gnu-unique-object --enable-plugin --enable-objc-gc --disable-werror --with-arch-32=i686 --with-tune=generic --enable-checking=release --build=x86_64-linux-gnu --host=x86_64-linux-gnu --target=x86_64-linux-gnu
Thread model: posix
gcc version 4.7.2 (Ubuntu/Linaro 4.7.2-2ubuntu1) 
```

终端

```
root@kemal-Vostro-230:/home/kemal/Desktop/pjsua# ./configure-android
configure-android: APP_PLATFORM not specified, using android-14
configure-android: TARGET_ABI not specified, using armeabi
configure-android: calling ./configure with env vars:
 CC = /home/kemal/Desktop/Dev/Android/android-ndk-r8d/toolchains/arm-linux-androideabi-4.4.3/prebuilt/linux-x86/bin/arm-linux-androideabi-gcc
 CXX = /home/kemal/Desktop/Dev/Android/android-ndk-r8d/toolchains/arm-linux-androideabi-4.4.3/prebuilt/linux-x86/bin/arm-linux-androideabi-g++
 CFLAGS =  -I/home/kemal/Desktop/Dev/Android/android-ndk-r8d/platforms/android-14/arch-arm/usr/include
 CXXFLAGS =  -shared --sysroot=/home/kemal/Desktop/Dev/Android/android-ndk-r8d/platforms/android-14/arch-arm
 LDFLAGS =  -nostdlib -L/home/kemal/Desktop/Dev/Android/android-ndk-r8d/platforms/android-14/arch-arm/usr/lib/
 LIBS =  -lc -lgcc
checking build system type... x86_64-unknown-linux-gnu
checking host system type... arm-unknown-linux-androideabi
checking target system type... arm-unknown-linux-androideabi
checking for arm-linux-androideabi-gcc... /home/kemal/Desktop/Dev/Android/android-ndk-r8d/toolchains/arm-linux-androideabi-4.4.3/prebuilt/linux-x86/bin/arm-linux-androideabi-gcc
checking whether the C compiler works... no
aconfigure: error: in `/home/kemal/Desktop/pjsua':
aconfigure: error: C compiler cannot create executables
See `config.log' for more details 
```

* * *

配置日志

```
This file contains any messages produced by compilers while
running configure, to aid debugging if configure makes a mistake.

It was created by pjproject aconfigure 2.x, which was
generated by GNU Autoconf 2.69\.  Invocation command line was

  $ ./aconfigure --host=arm-linux-androideabi --disable-video

## --------- ##
## Platform. ##
## --------- ##

hostname = kemal-Vostro-230
uname -m = x86_64
uname -r = 3.5.0-17-generic
uname -s = Linux
uname -v = #28-Ubuntu SMP Tue Oct 9 19:31:23 UTC 2012

/usr/bin/uname -p = unknown
/bin/uname -X     = unknown

/bin/arch              = unknown
/usr/bin/arch -k       = unknown
/usr/convex/getsysinfo = unknown
/usr/bin/hostinfo      = unknown
/bin/machine           = unknown
/usr/bin/oslevel       = unknown
/bin/universe          = unknown

PATH: /usr/local/sbin
PATH: /usr/local/bin
PATH: /usr/sbin
PATH: /usr/bin
PATH: /sbin
PATH: /bin
PATH: /usr/games
PATH: /usr/local/games

## ----------- ##
## Core tests. ##
## ----------- ##

aconfigure:2335: checking build system type
aconfigure:2349: result: x86_64-unknown-linux-gnu
aconfigure:2369: checking host system type
aconfigure:2382: result: arm-unknown-linux-androideabi
aconfigure:2402: checking target system type
aconfigure:2415: result: arm-unknown-linux-androideabi
aconfigure:2463: checking for arm-linux-androideabi-gcc
aconfigure:2490: result: /home/kemal/Desktop/Dev/Android/android-ndk-r8d/toolchains/arm-linux-androideabi-4.4.3/prebuilt/linux-x86/bin/arm-linux-androideabi-gcc
aconfigure:2759: checking for C compiler version
aconfigure:2768: /home/kemal/Desktop/Dev/Android/android-ndk-r8d/toolchains/arm-linux-androideabi-4.4.3/prebuilt/linux-x86/bin/arm-linux-androideabi-gcc --version >&5
arm-linux-androideabi-gcc (GCC) 4.4.3
Copyright (C) 2009 Free Software Foundation, Inc.
This is free software; see the source for copying conditions.  There is NO
warranty; not even for MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.

aconfigure:2779: $? = 0
aconfigure:2768: /home/kemal/Desktop/Dev/Android/android-ndk-r8d/toolchains/arm-linux-androideabi-4.4.3/prebuilt/linux-x86/bin/arm-linux-androideabi-gcc -v >&5
Using built-in specs.
Target: arm-linux-androideabi
Configured with: /s/ndk-toolchain/src/build/../gcc/gcc-4.4.3/configure --prefix=/tmp/ndk-andrewhsieh/build/toolchain/prefix --target=arm-linux-androideabi --host=x86_64-linux-gnu --build=x86_64-linux-gnu --with-gnu-as --with-gnu-ld --enable-languages=c,c++ --with-gmp=/tmp/ndk-andrewhsieh/build/toolchain/temp-install --with-mpfr=/tmp/ndk-andrewhsieh/build/toolchain/temp-install --without-ppl --without-cloog --disable-libssp --enable-threads --disable-nls --disable-libmudflap --disable-libgomp --disable-libstdc__-v3 --disable-sjlj-exceptions --disable-shared --disable-tls --disable-libitm --with-float=soft --with-fpu=vfp --with-arch=armv5te --enable-target-optspace --enable-initfini-array --disable-nls --prefix=/tmp/ndk-andrewhsieh/build/toolchain/prefix --with-sysroot=/tmp/ndk-andrewhsieh/build/toolchain/prefix/sysroot --with-binutils-version=2.19 --with-mpfr-version=2.4.1 --with-mpc-version=0.8.1 --with-gmp-version=5.0.5 --with-gcc-version=4.4.3 --with-gdb-version=7.3.x --with-gxx-include-dir=/tmp/ndk-andrewhsieh/build/toolchain/prefix/include/c++/4.4.3 --with-bugurl=http://source.android.com/source/report-bugs.html --disable-bootstrap --disable-libquadmath --disable-plugin --with-arch=armv5te --program-transform-name='s&^&arm-linux-androideabi-&'
Thread model: posix
gcc version 4.4.3 (GCC) 
aconfigure:2779: $? = 0
aconfigure:2768: /home/kemal/Desktop/Dev/Android/android-ndk-r8d/toolchains/arm-linux-androideabi-4.4.3/prebuilt/linux-x86/bin/arm-linux-androideabi-gcc -V >&5
arm-linux-androideabi-gcc: '-V' option must have argument
aconfigure:2779: $? = 1
aconfigure:2768: /home/kemal/Desktop/Dev/Android/android-ndk-r8d/toolchains/arm-linux-androideabi-4.4.3/prebuilt/linux-x86/bin/arm-linux-androideabi-gcc -qversion >&5
arm-linux-androideabi-gcc: unrecognized option '-qversion'
arm-linux-androideabi-gcc: no input files
aconfigure:2779: $? = 1
aconfigure:2799: checking whether the C compiler works
aconfigure:2821: /home/kemal/Desktop/Dev/Android/android-ndk-r8d/toolchains/arm-linux-androideabi-4.4.3/prebuilt/linux-x86/bin/arm-linux-androideabi-gcc  -I/home/kemal/Desktop/Dev/Android/android-ndk-r8d/platforms/android-14/arch-arm/usr/include  -I/home/kemal/Desktop/Dev/Android/android-ndk-r8d/platforms/android-14/arch-arm/usr/include  -nostdlib -L/home/kemal/Desktop/Dev/Android/android-ndk-r8d/platforms/android-14/arch-arm/usr/lib/ conftest.c  -lc -lgcc >&5
Assembler messages:
Fatal error: invalid -march= option: `armv5te'
aconfigure:2825: $? = 1
aconfigure:2863: result: no
aconfigure: failed program was:
| /* confdefs.h */
| #define PACKAGE_NAME "pjproject"
| #define PACKAGE_TARNAME "pjproject"
| #define PACKAGE_VERSION "2.x"
| #define PACKAGE_STRING "pjproject 2.x"
| #define PACKAGE_BUGREPORT ""
| #define PACKAGE_URL ""
| /* end confdefs.h.  */
| 
| int
| main ()
| {
| 
|   ;
|   return 0;
| }
aconfigure:2868: error: in `/home/kemal/Desktop/pjsua':
aconfigure:2870: error: C compiler cannot create executables
See `config.log' for more details

## ---------------- ##
## Cache variables. ##
## ---------------- ##

ac_cv_build=x86_64-unknown-linux-gnu
ac_cv_env_CCC_set=
ac_cv_env_CCC_value=
ac_cv_env_CC_set=set
ac_cv_env_CC_value=/home/kemal/Desktop/Dev/Android/android-ndk-r8d/toolchains/arm-linux-androideabi-4.4.3/prebuilt/linux-x86/bin/arm-linux-androideabi-gcc
ac_cv_env_CFLAGS_set=set
ac_cv_env_CFLAGS_value=' -I/home/kemal/Desktop/Dev/Android/android-ndk-r8d/platforms/android-14/arch-arm/usr/include'
ac_cv_env_CPPFLAGS_set=set
ac_cv_env_CPPFLAGS_value=' -I/home/kemal/Desktop/Dev/Android/android-ndk-r8d/platforms/android-14/arch-arm/usr/include'
ac_cv_env_CPP_set=
ac_cv_env_CPP_value=
ac_cv_env_CXXFLAGS_set=set
ac_cv_env_CXXFLAGS_value=' -shared --sysroot=/home/kemal/Desktop/Dev/Android/android-ndk-r8d/platforms/android-14/arch-arm'
ac_cv_env_CXX_set=set
ac_cv_env_CXX_value=/home/kemal/Desktop/Dev/Android/android-ndk-r8d/toolchains/arm-linux-androideabi-4.4.3/prebuilt/linux-x86/bin/arm-linux-androideabi-g++
ac_cv_env_LDFLAGS_set=set
ac_cv_env_LDFLAGS_value=' -nostdlib -L/home/kemal/Desktop/Dev/Android/android-ndk-r8d/platforms/android-14/arch-arm/usr/lib/'
ac_cv_env_LIBS_set=set
ac_cv_env_LIBS_value=' -lc -lgcc'
ac_cv_env_build_alias_set=
ac_cv_env_build_alias_value=
ac_cv_env_host_alias_set=set
ac_cv_env_host_alias_value=arm-linux-androideabi
ac_cv_env_target_alias_set=
ac_cv_env_target_alias_value=
ac_cv_host=arm-unknown-linux-androideabi
ac_cv_prog_CC=/home/kemal/Desktop/Dev/Android/android-ndk-r8d/toolchains/arm-linux-androideabi-4.4.3/prebuilt/linux-x86/bin/arm-linux-androideabi-gcc
ac_cv_target=arm-unknown-linux-androideabi

## ----------------- ##
## Output variables. ##
## ----------------- ##

AR=''
CC='/home/kemal/Desktop/Dev/Android/android-ndk-r8d/toolchains/arm-linux-androideabi-4.4.3/prebuilt/linux-x86/bin/arm-linux-androideabi-gcc'
CC_CFLAGS=''
CC_DEF=''
CC_INC=''
CC_OPTIMIZE=''
CC_OUT=''
CFLAGS=' -I/home/kemal/Desktop/Dev/Android/android-ndk-r8d/platforms/android-14/arch-arm/usr/include'
CPP=''
CPPFLAGS=' -I/home/kemal/Desktop/Dev/Android/android-ndk-r8d/platforms/android-14/arch-arm/usr/include'
CXX='/home/kemal/Desktop/Dev/Android/android-ndk-r8d/toolchains/arm-linux-androideabi-4.4.3/prebuilt/linux-x86/bin/arm-linux-androideabi-g++'
CXXFLAGS=' -I/home/kemal/Desktop/Dev/Android/android-ndk-r8d/platforms/android-14/arch-arm/usr/include  -shared --sysroot=/home/kemal/Desktop/Dev/Android/android-ndk-r8d/platforms/android-14/arch-arm'
DEFS=''
ECHO_C=''
ECHO_N='-n'
ECHO_T=''
EGREP=''
EXEEXT=''
GREP=''
LD=''
LDFLAGS=' -nostdlib -L/home/kemal/Desktop/Dev/Android/android-ndk-r8d/platforms/android-14/arch-arm/usr/lib/'
LDOUT=''
LIBEXT2=''
LIBEXT=''
LIBOBJS=''
LIBS=' -lc -lgcc'
LTLIBOBJS=''
OBJEXT=''
PACKAGE_BUGREPORT=''
PACKAGE_NAME='pjproject'
PACKAGE_STRING='pjproject 2.x'
PACKAGE_TARNAME='pjproject'
PACKAGE_URL=''
PACKAGE_VERSION='2.x'
PATH_SEPARATOR=':'
PKG_CONFIG=''
RANLIB=''
SAVED_PKG_CONFIG_PATH=''
SHELL='/bin/bash'
ac_build_mak_vars=''
ac_cross_compile=''
ac_ct_CC=''
ac_ct_CXX=''
ac_external_gsm=''
ac_external_pa=''
ac_external_speex=''
ac_ffmpeg_cflags=''
ac_ffmpeg_ldflags=''
ac_has_ffmpeg=''
ac_host=''
ac_ios_cflags=''
ac_linux_poll=''
ac_main_obj=''
ac_no_g711_codec=''
ac_no_g7221_codec=''
ac_no_g722_codec=''
ac_no_gsm_codec=''
ac_no_ilbc_codec=''
ac_no_l16_codec=''
ac_no_large_filter=''
ac_no_opencore_amrnb=''
ac_no_small_filter=''
ac_no_speex_aec=''
ac_no_speex_codec=''
ac_no_ssl=''
ac_os_objs=''
ac_pa_cflags=''
ac_pa_use_alsa=''
ac_pa_use_oss=''
ac_pjdir=''
ac_pjmedia_snd=''
ac_pjmedia_video=''
ac_pjmedia_video_has_ios=''
ac_pjmedia_video_has_qt=''
ac_qt_cflags=''
ac_resample_dll=''
ac_sdl_cflags=''
ac_sdl_ldflags=''
ac_shlib_suffix=''
ac_v4l2_cflags=''
ac_v4l2_ldflags=''
bindir='${exec_prefix}/bin'
build='x86_64-unknown-linux-gnu'
build_alias=''
build_cpu='x86_64'
build_os='linux-gnu'
build_vendor='unknown'
datadir='${datarootdir}'
datarootdir='${prefix}/share'
docdir='${datarootdir}/doc/${PACKAGE_TARNAME}'
dvidir='${docdir}'
exec_prefix='NONE'
host='arm-unknown-linux-androideabi'
host_alias='arm-linux-androideabi'
host_cpu='arm'
host_os='linux-androideabi'
host_vendor='unknown'
htmldir='${docdir}'
includedir='${prefix}/include'
infodir='${datarootdir}/info'
libcrypto_present=''
libdir='${exec_prefix}/lib'
libexecdir='${exec_prefix}/libexec'
libssl_present=''
localedir='${datarootdir}/locale'
localstatedir='${prefix}/var'
mandir='${datarootdir}/man'
oldincludedir='/usr/include'
opencore_amrnb_h_present=''
opencore_amrnb_present=''
openssl_h_present=''
pdfdir='${docdir}'
prefix='NONE'
program_transform_name='s,x,x,'
psdir='${docdir}'
sbindir='${exec_prefix}/sbin'
sharedstatedir='${prefix}/com'
sysconfdir='${prefix}/etc'
target='arm-unknown-linux-androideabi'
target_alias=''
target_cpu='arm'
target_os='linux-androideabi'
target_vendor='unknown'

## ----------- ##
## confdefs.h. ##
## ----------- ##

/* confdefs.h */
#define PACKAGE_NAME "pjproject"
#define PACKAGE_TARNAME "pjproject"
#define PACKAGE_VERSION "2.x"
#define PACKAGE_STRING "pjproject 2.x"
#define PACKAGE_BUGREPORT ""
#define PACKAGE_URL ""

aconfigure: exit 77 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T23:11:11.610

我安装了 ia32-libs `sudo apt-get install ia32-libs`，一切都开始工作了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-18T13:20:46.113

您是否按照以下步骤操作？

```
$ cd /path/to/your/pjsip/dir
$ export ANDROID_NDK_ROOT=/path_to_android_ndk_dir 
$ ./configure-android 
```

在导出命令中，只给出带有前斜杠（/）的路径。例如，我这样写 -

```
$ export ANDROID_NDK_ROOT=D:/Softwares/android-ndk-r8e 
```

其中 D:/Softwares/android-ndk-r8e 是 ndk 位置。仅使用前斜线。

这解决了我的问题。

# asp.net - 添加后无法访问css 到 web.config

> ID：14743554
> 
> 赞同：0
> 
> 时间：2013-02-07T04:27:14.993
> 
> 标签：asp.net, authentication, config

我正在创建的网页无法访问 CSS 文件。

看看我的网络配置：

```
<configuration>
  <system.web>
    <compilation debug="true" targetFramework="4.0">
      <assemblies>
        <add assembly="MySql.Data, Version=6.2.5.0, Culture=neutral, PublicKeyToken=C5687FC88969C44D"/>
        <add assembly="System.Design, Version=4.0.0.0, Culture=neutral, PublicKeyToken=B03F5F7F11D50A3A"/>
        <add assembly="System.Web.Extensions.Design, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35"/>
        <add assembly="System.Windows.Forms, Version=4.0.0.0, Culture=neutral, PublicKeyToken=B77A5C561934E089"/>
      </assemblies>
    </compilation>
  </system.web>
  <location path="css">
    <system.web>
      <authentication mode="Forms">
        <forms name=".ASPXFORMSDEMO" loginUrl="Login.aspx" protection="All" path="/" timeout="60"/>
      </authentication>
      <authorization>
        <deny users="?"/>
        <allow users="*"/>
      </authorization>
    </system.web>
  </location>
</configuration> 
```

我在这里找到了一些答案：

[授权问题 - 匿名用户无法访问 .jpeg 或 .css](https://stackoverflow.com/questions/811396/authorization-issue-anonymous-users-cant-access-jpeg-or-css)

但是当我试图把

```
<location path="css"> 
```

在“system.web”之上，它不起作用。请帮我解决这个问题。感谢您的所有帮助！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-07T04:40:58.757

位置标签必须是配置的直接子代

把它放在你现有的`<system.web>`

```
<configuration>
   <system.web>
   ...
   </system.web>
   <location path="css">
      <system.web>
         <authorization>
            <allow users="?" />
         </authorization>
      </system.web>
   </location>
</configuration> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-07T04:46:15.407

因为您正在使用`<authentication mode="Forms">`，所以除了没有登录 `protection="All"`之外，您无法访问任何文件。如果你想在没有登录的情况下访问任何文件或文件夹，你应该在你的 web.config 文件中告诉这个，如下所示`loginUrl`

```
 <location path="file_name">
    <system.web>
        <authorization>
            <allow users="*" />
        </authorization>
    </system.web>
</location> 
```

或者，如果您希望无需登录即可访问任何文件夹，那么您应该按如下方式使用它

```
<location path="folder_name">
    <system.web>
        <authorization>
            <allow users="*" />
        </authorization>
    </system.web>
</location> 
```

该标签**`<allow users="*" />`**适合您。它允许用户无需登录即可访问该路径。
这里有一些很好的链接

[http://msdn.microsoft.com/en-us/library/b6x6shw7%28v=vs.71%29.aspx](http://msdn.microsoft.com/en-us/library/b6x6shw7%28v=vs.71%29.aspx)
[http://msdn.microsoft.com/en-us/library/ms178692% 28v=vs.100%29.aspx](http://msdn.microsoft.com/en-us/library/ms178692%28v=vs.100%29.aspx)

# php - Wordpress 不允许我们注册菜单

> ID：14743556
> 
> 赞同：0
> 
> 时间：2013-02-07T04:27:36.840
> 
> 标签：php, wordpress, menu

我第一次制作自己的自定义 wordpress 主题，但在尝试注册菜单时遇到了障碍。

我在[http://themeshaper.com/2012/10/22/the-themeshaper-wordpress-theme-tutorial-2nd-edition/](http://themeshaper.com/2012/10/22/the-themeshaper-wordpress-theme-tutorial-2nd-edition/)上按照教程构建主题，并在[http://justintadlock 上进行了查找。 com/archives/2010/06/01/goodbye-headaches-hello-menus](http://justintadlock.com/archives/2010/06/01/goodbye-headaches-hello-menus)但无论我做什么，注册菜单的代码都不起作用，因为我在 wp-admin 中看不到要添加项目的菜单。这是我在其中注册它们的功能：

```
if ( ! function_exists( 'eastmids_setup' ) ):
/**
 * Sets up theme defaults and registers support for various WordPress features.
 *
 * Note that this function is hooked into the after_setup_theme hook, which runs
 * before the init hook. The init hook is too late for some features, such as indicating
 * support post thumbnails.
 *
 * @since eastmids 1.0
 */
function eastmids_setup() {

/**
 * Custom template tags for this theme.
 */
require( get_template_directory() . '/inc/template-tags.php' );

/**
 * Custom functions that act independently of the theme templates
 */
require( get_template_directory() . '/inc/tweaks.php' );

/**
 * Make theme available for translation
 * Translations can be filed in the /languages/ directory
 * If you're building a theme based on eastmids, use a find and replace
 * to change 'eastmids' to the name of your theme in all the template files
 */
load_theme_textdomain( 'eastmids', get_template_directory() . '/languages' );

/**
 * Add default posts and comments RSS feed links to head
 */
add_theme_support( 'automatic-feed-links' );

/**
 * Enable support for the Aside Post Format
 */
add_theme_support( 'post-formats', array( 'aside' ) );

/**
 * This theme uses wp_nav_menu() in one location.
 */
register_nav_menus( array(
    'primary' => __( 'Primary Menu' ),
) );
}
endif; // eastmids_setup
add_action( 'after_setup_theme', 'eastmids_setup' ); 
```

这是我使用它的方式：

```
<nav role="navigation" class="site-navigation main-navigation">
     <?php wp_nav_menu( array( 'theme_location' => 'primary' ) ); ?>
</nav> 
```

而是显示的是一个 ul 标记，其中包含 Home 后跟我的页面。

看到我在 wp-admin 中看不到菜单，我认为寄存器以某种方式失败。

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T05:21:56.593

这是因为您还没有指定菜单。

为菜单设置代码后，您应该转到仪表板并从那里创建一个菜单 ( `Appearance`-> `Menu`)。或者你也没有看到这个菜单？您的代码中有一个迷路`endif;`，您可以发布整个代码吗？

输入菜单名称，将所需项目添加到菜单，然后单击`Create menu`。查看[外观菜单屏幕](http://codex.wordpress.org/Appearance_Menus_Screen)以了解其工作原理。

# php - 使其可链接

> ID：14743559
> 
> 赞同：-6
> 
> 时间：2013-02-07T04:27:55.267
> 
> 标签：php, html, css

好的，我下载了一个 css / html 模板，我的代码在下面，我已经尝试了所有方法，我该如何重新构建它，这样我就可以添加一个链接

```
<a class="dashboard-module">
    <img src="Crystal_Clear_write.gif"
         tppabs="http://www.xooom.pl/work/magicadmin/images/Crystal_Clear_write.gif"
         width="64" height="64" alt="edit" />
    <span>Upload Ad</span>
</a> 
```

显然我添加了一个这样的链接，但我相信它不是结束的原因

```
<a class="dashboard-module">
    <img src="Crystal_Clear_write.gif"
         tppabs="http://www.xooom.pl/work/magicadmin/images/Crystal_Clear_write.gif"
         width="64" height="64" alt="edit" />
    <span><a href="UploadContent.html">Upload Ad</span>
</a> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T04:32:37.913

`href`为您的锚添加一个属性：

```
<a class="dashboard-module" href="http://www.mylink.com">
    <img src="Crystal_Clear_write.gif"
         tppabs="http://www.xooom.pl/work/magicadmin/images/Crystal_Clear_write.gif"
         width="64" height="64" alt="edit" />
    <span>Upload Ad</span>
</a> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T04:33:07.117

试试这个代码：

```
<a class="dashboard-module" href="UploadContent.html">
    <img src="http://www.xooom.pl/work/magicadmin/images/Crystal_Clear_write.gif"
     tppabs="http://www.xooom.pl/work/magicadmin/images/Crystal_Clear_write.gif"
     width="64" height="64" alt="edit" />
    <span>Upload Ad</span>
</a> 
```

# mysql - 在 AWS RDS 上使用混合 MyISAM 和 InnoDB 的担忧

> ID：14743569
> 
> 赞同：1
> 
> 时间：2013-02-07T04:29:16.953
> 
> 标签：mysql, amazon-web-services, innodb, myisam, amazon-rds

我对 AWS 非常陌生，我想将我的数据库迁移到 AWS RDS。但我面临几个问题。该数据库完全使用 MyISAM 而不是 InnoDB 构建。根据我在 AWS RDS 文档中阅读的内容，我了解到如果我将 InnoDB 用于数据库，我可以享受 AWS RDS 的功能，例如每日备份和只读副本。

我使用 MyISAM 的主要原因是利用[全文搜索](http://dev.mysql.com/doc/refman/5.5/en//fulltext-search.html)和[空间索引](http://dev.mysql.com/doc/refman/5.6/en/optimizing-spatial-analysis.html)。直到今天，我了解到 AWS RDS 支持的 MySQL 版本仍然不支持全文搜索（据此[，](https://dev.mysql.com/doc/refman/5.5/en/innodb-storage-engine.html)它适用于 5.6.4），并且 InnoDB 仍然不支持空间索引。

所以这是我的问题

1.  假设我将不需要 FTS 和 Spatial 的所有剩余表转换为使用 InnoDB 引擎，我可以如何优化使用 AWS RDS 提供的功能（只读副本、每日备份等）？
2.  如果我将一个表分解为两个表，一个在 InnoDB 中，一个在 MyISAM 中，会更好吗？出现这种担忧是因为某些列经常被更新，因此这些列将被移动到 InnoDB 中以避免表锁定。另一方面，MyISAM 很少更新。
3.  假设我为全文使用单独的引擎，例如 Sphinx 或 Solr，我如何将它与 RDS 一起使用？是否有一个单独的空间索引引擎可以与 RDS 一起使用？
4.  有更好的主意吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T15:50:17.813

原因是 MyISAM 不被认为是 ACID 兼容的。这意味着如果您的数据库在事务中间发生了某些事情，它可能会处于不一致的状态。

就个人而言，我会使用为此目的而设计的全文搜索引擎。结果的质量通常比 mysql 提供的要好得多，您可以从 mysql 服务器上卸载一些工作。

# php - PHP 文件不能以 .html 扩展名存储吗？我听说某些浏览器不支持 .php 我不确定这可能是什么补救措施？

> ID：14743575
> 
> 赞同：5
> 
> 时间：2013-02-07T04:30:18.813
> 
> 标签：php, html

这是我的示例 Hello World 程序。哪个不适用于 .html 扩展名，但它适用于 . php 扩展。

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
      <title>Untitled Document</title>
   </head>

   <body>
       <div>
          <?php echo 'Hello World!!' ?>
       </div>
   </body>
</html> 
```

是否可以使用 .html 扩展名保存此文件？确实有些浏览器不支持 .php 文件吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-07T04:32:49.447

PHP 是服务器端语言，它与浏览器无关，下面的图片解释了 php 的工作原理

![在此处输入图像描述](../Images/5a7957682d790e9e91b1e1ff34c4322e.png)

[图片来源和良好的阅读](http://www.html.net/tutorials/php/lesson1.php)

通常只使用**`.php`**扩展名

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-07T04:31:47.440

没有不支持 PHP 文件的浏览器。PHP是服务器端的。

是的，可以使用`.html`扩展来保存它，但它可能不会做一些有意义的事情，具体取决于您的服务器配置。使用有什么问题`.php`？这是标准的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-07T04:33:52.123

Suhas，当您在代码中使用 PHP 时，除非您使用 smarty，否则它必须使用 PHP。PHP 是独立于平台的服务器端语言。它不依赖于浏览器。如果您想使用 .html 扩展名，请使用 Smarty。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-02-07T04:31:27.103

PHP 不是基于浏览器的，它是一种服务器语言……没有支持 PHP 的 Web 浏览器。

此外，如果您的文件中包含 PHP，请确保格式为 PHP（这种方式最好）。

如果您对 PHP 感兴趣，这里是[手册](http://php.net/manual/en/index.php)

# regex - Flex/Lex：正则表达式无法编译

> ID：14743585
> 
> 赞同：0
> 
> 时间：2013-02-07T04:30:55.583
> 
> 标签：regex, lex, flex-lexer

我正在尝试编写一个 flex 程序，该程序对由 a、b 和 c 的所有字符串组成的文本进行操作。我需要匹配的字符串格式为**abxba**，其中**x 不包含 ba 作为子字符串**（例如，abccabba，但不包含 abccbaba）。这是我试图用来执行此操作的 lex 正则表达式，但它不会编译：

```
^[a]{1}[b]{1}[abc|cab|bca|acb|ac|ca|ab|bc|cb][b]{1}[a]{1}$ 
```

我对 lex/flex 有点陌生，所以如果这是非常基本的，我深表歉意。有谁知道怎么了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T04:43:56.423

这将起作用：`^ab(a|c|b+[c])*b+a$`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T18:47:27.403

也尝试使用`^ab[a(b+c)*]*ba$`，看看是否有效。

# regex - Scala 地图数组

> ID：14743587
> 
> 赞同：0
> 
> 时间：2013-02-07T04:30:59.140
> 
> 标签：regex, arrays, scala, map

我试图通过将每个元素映射到数组中（元素，它匹配的正则表达式）将字符串数组转换为映射数组（字符串，字符串）。我的代码如下，但是当我运行它时它会抛出错误。

```
var articles:Array[Map[String,String]] = rawArticles map(x => x, x match {
    case ArticleRE(id) => id
    case _ => " " 
}
)).toMap 
```

rawArticles 是原始数组， ArticleRE 是我匹配的正则表达式。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T04:49:33.070

在我看来，您的问题是试图在不是 Seq [(A, B)] 的东西上调用 toMap。假设像这样的一个小例子（它在 Scala 2.10 中编译得很好，但有一些变化）：

```
val rawArticles = Array("articleOne", "articleTwo", "articleThree")
val articleRE = "(.*)".r
/* some place holder value for no match */
val noMatch = ""

val articles = rawArticles map { x => Map(
  x -> x match {
    case articleRE(id) => (id, articleRE.toString)
    case _             => ("", noMatch)
  })
} 
```

我认为您的问题是尝试转换不是元组序列的序列，您也可以直接`case`在 Map 中使用，因为 Map 可以采用`PartialFunction`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T07:31:37.157

如果您确定所需的类型，那么这应该有效：

```
var articles = rawArticles.map(x => Map(x -> (x match {
  case ArticleRE(id) => id
  case _ => " "
}))) 
```

# watir - 使用 watir 填充可操作表中的值

> ID：14743590
> 
> 赞同：0
> 
> 时间：2013-02-07T04:31:30.030
> 
> 标签：watir, handsontable

如何使用 Watir 自动执行在 handsontable 中填充值的任务？

我在excel中有值列表。Watir 读取这些值，然后在它们各自的列中填充handsontable。挑战在于handsontable中没有一个字段具有识别属性，这使工作变得更加困难。

* * *

请按要求查找 HTML 代码：

```
<html>
<head>
  <body>
      <form action="importer.php" method="POST">
        <div class="selections">
          <div id="buildingSelector" style="display: none;">
            <script src="js/importer/buildingselect.js">
            <script type="text/javascript">
              <div id="importdata" class="handsontable">
                <div class="wtHolder" style="position: relative; display: table;">
                 <div class="wtHider" style="position: relative; overflow: hidden; width: 1904px;">
                   <div class="wtSpreader">
                     <table class="htCore" style="display: table;">
                       <colgroup>
                         <thead>
                           <tr>
                            <thead>
                              <tbody>
                                 <tr>
                                   <td class=""></td>
                                   <td class=""></td>
                                   <td class=""></td>
                                 </tr> 
```

# c# - 创建一个可用的扩展

> ID：14743594
> 
> 赞同：0
> 
> 时间：2013-02-07T04:31:45.527
> 
> 标签：c#, lightswitch-2012

我已按照[此演练](http://msdn.microsoft.com/en-us/library/hh290140.aspx)为 Visual Studio Lightswitch 2012 创建自定义扩展。此扩展涉及创建自定义数据类型。

我在调试中运行它，它带来了一个“实验性”VS2012 窗口，经过一点调试后，扩展似乎工作正常。

我的问题是如何在我的实际项目中实际使用这个扩展？

我有一堆在演练开始时创建的项目文件夹。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T19:04:44.467

按照此处找到的“分发扩展”下的步骤操作：http: [//msdn.microsoft.com/en-us/library/gg674923.aspx](http://msdn.microsoft.com/en-us/library/gg674923.aspx)

> 分发扩展
> 
> 1.  为您的扩展打开 .Vsix 项目的 \bin\Debug 文件夹，然后选择 .vsix 文件。
> 2.  将文件复制到网络共享或可移动媒体。
> 3.  在安装了 LightSwitch 的目标计算机上，打开 .vsix 文件。
> 4.  在 Visual Studio 扩展安装程序对话框中，选择安装。
> 
> 下次启动 LightSwitch 时，该扩展应该可以使用了。

# jsp - JSP 中的 Google Motion 图表

> ID：14743600
> 
> 赞同：0
> 
> 时间：2013-02-07T04:32:06.323
> 
> 标签：jsp, google-visualization

我按照谷歌运动图表链接但是我使用jsp生成数据并将该数据传递给加载器jsp（jquery ajax请求）。下面是我的代码。请帮我解决这个问题。

## 显示jsp：（此页面调用ajax请求来自数据库的数据）

```
<html>
    <head>
    <title>Motion Chart</title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <script type="text/javascript" src="js/jsapi.js"></script>
    <script type="text/javascript" src="js/jquery-1.9.1.min.js"></script>
    <script type="text/javascript">
        function loadMotionChart(){
        var jsonData = $.ajax({
        url: "./chart-loaders/motion-chart-loader.jsp",
        dataType: "json",
        data:"DB="+'myDB',
        async: false
        }).responseText;
        var obj = jQuery.parseJSON(jsonData);
        var data = new google.visualization.arrayToDataTable(obj);
        var options = {
        title: 'Motion Chart', is3D : true
        };

        var motionchart  = new google.visualization.MotionChart(document.getElementById('motionChart'));
        motionchart.draw(data, options);
    }
    </script>
    </head>
    <body>

    <div id="container">
    <div id="motionBox">                
    <input type="button" value="Load Chart" onclick="loadMotionChart()" />
    </div>
    </div>
    <div id="motionChartContainer">
    <div id="motionChart" style="width: 800px; height: 400px;" />
    </div>
    </body>
</html> 
```

## loader jsp：（这个页面是我尝试创建json字符串并传回显示jsp的loader页面）

```
<%@ page import="java.sql.*, java.util.*, java.text.*" %>
<%@page import="net.sf.json.JSONObject,net.sf.json.JSONArray"%>
<%      
    Connection conn;
    .
    .
    .
    String data = "[[\"Item\",\"Date\",\"Amt1\",\"Amt2\"],";
    try
    {
        ResultSet rs=null;
        Statement stmt = conn.createStatement();
        monthOffset = "2013-01-01";
        monthLimit = "2013-02-28";
        rs = stmt.executeQuery("select dbo.doGetMotionChartData('" + monthOffset + "','"+monthLimit+"')"); 

        while (rs.next())
        {
            resultData = rs.getString(1);
        }

    itemTokens = new StringTokenizer(resultData, "#");
        itemSize = itemTokens.countTokens();

    // at this point I get whole data as one string("resultData") then I use string tokenizer to split and make data in required format.
    for (int i = 0; i < itemSize; i++){
            tmpitemToken = itemTokens.nextToken("#");
            collectionTokens = new StringTokenizer(tmpitemToken, "|");
            collectionSize = collectionTokens.countTokens();
            for (int j = 0; j < collectionSize; j++){
                tmpCollectionToken = collectionTokens.nextToken("|");
                collectionSplit = tmpCollectionToken.split(",");
                dateSplit = collectionSplit[1].split("-");

        data += "['" + collectionSplit[0] + "'," + "new Date("+dateSplit[2]+","+dateSplit[1]+","+dateSplit[0]+")" + "," + collectionSplit[2] + "," + collectionSplit[3] + "]" + "," ; 
        }
        }
     /*
    final Data = [["Item","Date","Amt1","Amt2"],['Item1',new Date(2013,01,01),618699.88,603694.00],['Item2',new Date(2013,01,01),2650229.78,3124956.02],['Item1',new Date(2013,02,01),179667.66,354520.00],['Item2',new Date(2013,02,01),229715.02,1208445.76]]
    */
     out.print(data);
        out.flush();
    }
    catch(Exception e){
        e.printStackTrace();
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T15:44:02.890

嗨，当我使用它时，我一直使用单引号作为文本，没有圆形日期

data.addRows([['PXPP-FND',新日期(2012,0,01),85336.35,2245.69,1012.70]]);

最好的巴里

附言

我总是使用谷歌的这个例子作为起点[https://developers.google.com/chart/interactive/docs/gallery/motionchart](https://developers.google.com/chart/interactive/docs/gallery/motionchart)

```
 var data = new google.visualization.DataTable();
    data.addColumn('string', 'Fruit');
    data.addColumn('date', 'Date');
    data.addColumn('number', 'Sales');
    data.addColumn('number', 'Expenses');
    data.addColumn('string', 'Location');
    data.addRows([
      ['Apples',  new Date (1988,0,1), 1000, 300, 'East'],
      ['Oranges', new Date (1988,0,1), 1150, 200, 'West'],
      ['Bananas', new Date (1988,0,1), 300,  250, 'West'],
      ['Apples',  new Date (1989,6,1), 1200, 400, 'East'],
      ['Oranges', new Date (1989,6,1), 750,  150, 'West'],
      ['Bananas', new Date (1989,6,1), 788,  617, 'West']
    ]); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-28T02:35:25.070

对于动态图表，编辑此行并代替`corechart`使用`motionchart`

```
google.load('visualization', '1', {'packages':['corechart']}); 
```

并代替`PieChart`添加`MotionChart`

```
var chart= new google.visualization.PieChart(
    document.getElementById('chart-div')
); 
```

# c# - 如何在vs2012中添加对程序集的引用

> ID：14743606
> 
> 赞同：8
> 
> 时间：2013-02-07T04:32:45.043
> 
> 标签：c#, .net, visual-studio-2012, reference, .net-assembly

我需要有关如何在 C# 代码中正确添加程序集的帮助。

我开始一个空白项目并尝试运行下面的简单代码。但有引用错误。我知道默认情况下 system.dll 包含在引用文件夹下。

那么为什么仍然抱怨“'System.Configuration没有被引用”？我错过了一些手动步骤吗？如果是这样，我该怎么做？

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Threading.Tasks;
using System.Net.Configuration;

namespace ConsoleApplication2
{
    class Program
    {
        static void Main(string[] args)
        {
            HttpWebRequestElement ae = new HttpWebRequestElement();
            ae.UseUnsafeHeaderParsing = false;
        }
    }
} 
```

**“System.Configuration.ConfigurationElement”类型是在未引用的程序集中定义的。您必须添加对程序集“System.Configuration, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a”的引用。**

感谢您的帮助

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-02-07T04:36:51.180

右键单击项目引用并添加对`System.Configuration`

![在此处输入图像描述](../Images/cfe67fb6c0f9af6b60e767e10e7e3b5d.png)

# android - 无法添加 到 android 应用小部件布局

> ID：14743619
> 
> 赞同：7
> 
> 时间：2013-02-07T04:33:44.903
> 
> 标签：android

我正在尝试为应用程序创建一个小部件，以下是我正在使用的布局。我试图将滚动视图添加到小部件的后半部分。我无法做到这一点，当我删除标签时，小部件正在显示，但是当带有标签时，android 无法加载小部件。我为此挠了两天。我不明白我做错了什么？

```
 <?xml version="1.0" encoding="utf-8"?>
<LinearLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:orientation="vertical"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:background="@android:color/background_light"
    >

        <RelativeLayout 
            xmlns:android="http://schemas.android.com/apk/res/android"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:background="@android:color/background_dark"
            android:id="@+id/widgetHeader"
            >

            <Button 
              android:background="@drawable/icon_quickword"
              android:id="@+id/widgetBtn"
              android:layout_width="wrap_content" 
              android:layout_height="wrap_content" 
              android:layout_gravity="center_vertical"
              android:layout_margin="5sp" 
             />

            <TextView android:text="@string/widget_title1"
              android:id="@+id/widget_title1" 
              android:textSize="18sp"   
              android:textStyle="bold"
              android:layout_width="fill_parent"
              android:layout_height="wrap_content"
              android:layout_gravity="center_vertical"
              android:textColor="@android:color/white"
              android:layout_toRightOf="@id/widgetBtn"
              android:layout_marginLeft="2sp"
              />

            <TextView android:text="@string/widget_title2"
              android:id="@+id/widget_title2" 
              android:textSize="15sp"   
              android:textStyle="italic"
              android:layout_width="fill_parent"
              android:layout_height="wrap_content"
              android:layout_gravity="center_vertical"
              android:textColor="@android:color/white"
              android:layout_toRightOf="@id/widgetBtn"
              android:layout_below="@id/widget_title1"
              android:layout_marginLeft="3sp"
              />

        </RelativeLayout>   

            <ScrollView
            android:layout_width="fill_parent"
            android:layout_height="fill_parent" 
            >

            <LinearLayout
                android:id="@+id/widgetContent"
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:orientation="vertical"
                android:background="@android:color/white"
                >

                <TextView android:text="@string/widget_content_info1"
                  android:id="@+id/widget_content_info1"
                  android:textStyle="bold" 
                  android:textSize="16sp"
                  android:layout_width="wrap_content"
                  android:layout_height="wrap_content"
                  android:layout_gravity="center_vertical"
                  android:textColor="@android:color/black" />

                <TextView android:text="@string/widget_content_info2"
                  android:id="@+id/widget_content_info2"
                  android:textSize="14sp" 
                  android:layout_width="wrap_content"
                  android:layout_height="wrap_content"
                  android:layout_gravity="center_vertical"
                  android:textColor="@android:color/black" />   

                <TextView android:text="@string/widget_content_info3"
                  android:id="@+id/widget_content_info3"
                  android:textSize="14sp" 
                  android:layout_width="wrap_content"
                  android:layout_height="wrap_content"
                  android:layout_gravity="center_vertical"
                  android:textColor="@android:color/black" />   

            </LinearLayout>
        </ScrollView>

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-06-28T06:17:08.340

仅在超过一个的类似小部件之上支持 Scrollview

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2015-09-18T07:25:54.110

您可以仅使用 1 个列表项（您的布局）的 ListView

[在此处](https://codeload.github.com/laaptu/appwidget-listview/zip/appwidget-listview1)获取列表视图的示例

并修改 ListProvider.java

```
public int getCount() {
return 1;
}
public RemoteViews getViewAt(int position) {
    RemoteViews remoteView = new RemoteViews(context.getPackageName(), R.layout.your_origin_layout);
    remoteView.setTextViewText(R.id.content, "your Text");
    // add other pocess here
    return remoteView;
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-07T04:42:04.790

```
 <ScrollView 
            android:layout_width="fill_parent"
    android:layout_height="fill_parent"
        >

    <LinearLayout
        android:id="@+id/widgetContent"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:orientation="vertical"
        android:background="@android:color/white"
        >

        <TextView android:text="@string/widget_content_info1"
          android:id="@+id/widget_content_info1"
          android:textStyle="bold" 
          android:textSize="16sp"
          android:layout_width="wrap_content"
          android:layout_height="wrap_content"
          android:layout_gravity="center_vertical"
          android:textColor="@android:color/black" />

        <TextView android:text="@string/widget_content_info2"
          android:id="@+id/widget_content_info2"
          android:textSize="14sp" 
          android:layout_width="wrap_content"
          android:layout_height="wrap_content"
          android:layout_gravity="center_vertical"
          android:textColor="@android:color/black" />   

        <TextView android:text="@string/widget_content_info3"
          android:id="@+id/widget_content_info3"
          android:textSize="14sp" 
          android:layout_width="wrap_content"
          android:layout_height="wrap_content"
          android:layout_gravity="center_vertical"
          android:textColor="@android:color/black" />   

    </LinearLayout>

    **</ScrollView>** 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-07-27T02:28:37.277

滚动视图只能承载一个孩子，最好使用 ListView

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-07T04:52:19.540

使用所有属性后，使用结束标记关闭您的视图。关闭您的`ScrollView`结束标记。

```
<ScrollView  android:layout_width="fill_parent"
    android:layout_height="fill_parent">
  <LinearLayout
        android:id="@+id/widgetContent"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:orientation="vertical"
        android:background="@android:color/white"
        >
    </LinearLayout>

 </ScrollView> 
```

# php - 使用 php strtotime() 计算未来日期没有给出正确答案

> ID：14743620
> 
> 赞同：-1
> 
> 时间：2013-02-07T04:33:51.647
> 
> 标签：php

我想在特定日期之后获得未来的日期，我使用这个`strtotime()`功能，但它对我不起作用

然后我使用以下代码

```
$d1='2012-11-08';
$d2=date($d1, strtotime('+3 days'));    
echo $d2; 
```

输出是 2012-11-08 2012-11-08

不是 2012-11-11

但输出不是 2012-11-11 输出是 2012-11-08 我无法解决这个问题我做错了什么以及如何解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-07T04:39:49.563

```
$d1='2012-11-08';
$d2=new DateTime($d1);
$d2->modify('+3 day');

echo $d2->format('Y-m-d'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T04:37:08.427

尝试使用`date_add`

```
$d1 = '2012-11-08';
$d2 = date_add($d1, date_interval_create_from_date_string('3 days'));
echo $d2; 
```

[http://www.php.net/manual/en/datetime.add.php](http://www.php.net/manual/en/datetime.add.php)

如果您没有运行 PHP 5.3，这应该可以工作：

```
$d1 = '2012-11-08';
$d2 = strtotime('+3 days', strtotime($d1));    
echo date('Y-m-d', $d2); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-07T04:44:00.387

实际上你错误地添加了`strtotime()`，当你使用当前日期时它可以工作，如果你想添加自定义日期，你可以试试这个，

```
<?php
 $d1='2012-11-08';
 $d2 = strtotime ( '+3 day' , strtotime ( $d1 ) ) ;
 $d3 = date ( 'Y-m-d' , $d2);
?> 
```

如果要从当前日期添加日期，请使用以下命令，

```
$d1 = Date('Y-m-d', strtotime("+3 days")); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-07T04:44:33.403

您使用的`date()`功能不正确。根据[文档](http://php.net/manual/en/function.date.php)，`date()`采用格式字符串，后跟可选的时间戳。你给它一个日期字符串和另一个日期。

你可以像这样做你想做的事，其中`strtotime`用于修改日期，

```
$date = "2012-11-08";
echo date("Y-m-d", strtotime($date. " + 3 days")); 
```

但是，如果您运行的是 PHP 5.2+，您可能应该使用[DateTime](http://php.net/manual/en/class.datetime.php)类，因为它具有更好的日期处理能力，并且更容易看到它发生了什么。

```
$datetime = new DateTime("2012-11-08");
$datetime->modify("+ 3 days");    
echo $datetime->format("Y-m-d"); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-07T04:38:47.823

虽然`strtotime()`是一个方便的工具，但它容易出现语言环境问题。

我会改为使用 PHP 的成熟`DateTime`类，例如

```
$dt = new DateTime($d1);
echo $dt->add(new DateInterval('P3D'))->format('Y-m-d'); 
```

# ruby-on-rails - 在测试中重新加载记录时关联清除

> ID：14743624
> 
> 赞同：1
> 
> 时间：2013-02-07T04:34:35.507
> 
> 标签：ruby-on-rails, testunit

我只熟悉 Rspec，但现在我需要修复一个使用 Test::Unit 的库。

我发现当我重新加载记录时，关联变为 nil

例如：

```
test "accepts nested attributes from subscription to user ()" do
  @user = User.create(name:'Ash')
  @subscription = @user.create_subscription()
  puts "user: " << @user.inspect
  puts "subscription: " << @user.subscription.inspect

  @subscription.update_attributes({ :user_attributes => { :notification_comment => true } })
  @user.reload
  puts "user: " << @user.inspect
  puts "subscription: " << @user.subscription.inspect
  assert @user.subscription, "should have an subscription"
end 
```

输出：

```
user: #<User id: 815823837, account_id: nil, name: "Ash", email: nil, settings: {}, created_at: "2013-02-07 04:28:51", updated_at: "2013-02-07 04:28:51">
subscription: #<Subscription id: 1, user_id: 815823837, created_at: "2013-02-07 04:28:51", updated_at: "2013-02-07 04:28:51">
user: #<User id: 815823837, account_id: nil, name: "Ash", email: nil, settings: {}, created_at: "2013-02-07 04:28:51", updated_at: "2013-02-07 04:28:51">
subscription: nil 
```

为什么会这样？我做了检查，我可以确认我可以`Subscription.find(@subscription.id)`，所以它保存在数据库中。

# ms-access - 访问查询会自动被截断吗？

> ID：14743625
> 
> 赞同：2
> 
> 时间：2013-02-07T04:34:42.500
> 
> 标签：ms-access, ms-access-2003

以前可能有人问过这个问题，但我似乎在任何地方都找不到任何相关的答案。

几周前，我在 Access (2003) 中写了几个长查询。我今天想使用这些查询，发现它们被截断了。查询按应有的方式开始，并且在中途某处说`AS [%$##@_Alias]`，其余的都丢失了。

这两个查询都只有几百个字符长，远低于 Access 允许的限制。

两个查询的结构都是这样的

```
SELECT Some calculated fields with a few IIF statements
FROM 
(
    SELECT Some fields calculated with lots of IIF statement
    FROM joined table
    WHERE some condition
)
ORDER BY Some fields 
```

我对 Access 没有特别苛刻的要求，当然不应该导致它愤怒地截断查询。那么为什么会这样呢？

请不要抨击我现在输入日文，下一部分仅供参考。我的一个实际（截断）查询如下所示：

```
SELECT 
    管理番号, 
    種別, 
    IIF(種別TYPE='', OTHER種別TYPE, IIF(種別TYPE='その他','その他' & OTHER種別TYPE,種別TYPE)) AS TYPE
FROM [
    SELECT 
        管理番号,
        IIF(建物か設備_建物,'建物',IIF(建物か設備_設備, '設備', '種別なし')) AS 種別,
        IIF(建物か設備_建物,IIF(建物用途_戸建住宅,'戸建住宅',IIF(建物用途_共同住宅,'共同住宅',IIF(建物用途_教育施設,'教育施設',IIF(建物用途_庁舎,'庁舎',IIF(建物用途_事務所,'事務所',IIF(建物用途_工場,'工場',IIF(建物用途_倉庫,'倉庫',IIF(建物用途_店舗,'店舗',IIF(建物用途_物置小屋,'物置小屋',IIF(建物用途_車庫,'車庫',IIF(建物用途_農作小屋,'農作小屋',IIF(建物用途_その他,'その他')))))))))))),
        IIF(建物か設備_設備,IIF(設備種別_物置,'物置',IIF(設備種別_駐車場,'駐車場',IIF([設備種別_運動場/庭等],'運動場/庭等',IIF(設備種別_電気設備等,'電気設備等',IIF(設備種別_畜舎など,'畜舎など',IIF(設備種別_ﾋﾞﾆｰﾙﾊｳｽ等,'ﾋﾞﾆｰﾙﾊｳｽ等',IIF(設備種別_その他,'その他'))))))),'')) AS 種別TYPE,
        '（' & REPLACE(REPLACE(TRIM(建物用途_その他記載欄),'(',''),')','') & '）' AS OTHER種別TYPE
    FROM 
        T_メイン INNER JOIN T対象 ON T_メイン.管理番号=T対象.調査番号]. AS [%$##@_Alias]; 
```

编辑

我重新检查了我的两个查询，不像我说的只有一个被截断了。另一个完好无损。异常诡异...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T05:15:21.910

我注意到，如果我不为子查询分配别名，Access 的查询设计器将为我分配一个别名。这些别名类似于您引用的别名，`[%$##@_Alias]`. 但是，我没有注意到它在添加这样的别名时会丢弃我的 SQL 文本的任何部分。因此，尽管这个建议可能是一个长期的建议，但请尝试分配您自己的别名，例如`FROM ( ... ) AS sub`，并查看查询设计器是否保留了您的 SQL 文本的其余部分。

# ruby-on-rails - 如何使用 twitter-bootstrap-rails gem 禁用部分 Twitter Bootstrap 响应式设计？

> ID：14743626
> 
> 赞同：0
> 
> 时间：2013-02-07T04:34:46.400
> 
> 标签：ruby-on-rails, twitter-bootstrap, responsive-design

我目前正在构建一个 Ruby on Rails 应用程序，我正在使用并开始使用css 调用`twitter-bootstrap-rails gem`对响应式布局进行大量修改。`@media`但是，为了保持特定类型的格式，我想禁用`large desktop @media (min-width 1200px)`. 我了解如何通过正常的 Twitter Bootstrap 流程来做到这一点，但更愿意维护 twitter-bootstrap-rails gem。

如果有什么可以指导我将哪个文件添加到我的文件`assets/stylesheets`或如何修改文件`@ call`，我将不胜感激！

我正在寻找最干净的方法来执行此操作，因此当我升级 gem 时它不会影响其他文件。谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-07T13:59:02.107

我假设您的布局将包含在一个容器流体中，并且您有一些用于站点特定样式的最终级 css。

把它放在你最低级别的css中怎么样

```
/*
* container
*/
.container-fluid {
  max-width: 1200px;
} 
```

将最大宽度设置为您想要的最大尺寸，并且不要费心使用引导程序进行破解。

# iphone - 如何使用自定义后退按钮返回上一个视图控制器？

> ID：14743629
> 
> 赞同：3
> 
> 时间：2013-02-07T04:35:19.957
> 
> 标签：iphone, uiviewcontroller, uinavigationcontroller

我是 iOS 开发的新手。我将使用以下语句进入下一个屏幕。

`locationViewController = [[LocationViewController alloc] initWithNibName:@"LocationViewController" bundle:nil];`

`[navigationController pushViewController:locationViewController animated:YES];`

现在我想通过点击当前屏幕顶部栏上的自定义后退按钮返回上一个屏幕。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-07T04:36:47.630

用这个：

```
-(IBAction)back:(id)sender
{
    [self.navigationController popViewControllerAnimated:YES];
} 
```

对于主页按钮：

```
NSArray *viewContrlls=[[self navigationController] viewControllers];
for( int i=0;i<[ viewContrlls count];i++)
{
    id obj=[viewContrlls objectAtIndex:i];
    if([obj isKindOfClass:[Rate_O_MeterViewController class]])
    {
        [[self navigationController] popToViewController:obj animated:YES];
        return;
    }
} 
```

代替 Rate_O_MeterViewController 给出您的控制器名称...将其添加到主页按钮的操作中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T04:39:53.570

创建一个返回按钮：

```
 UIBarButtonItem * backButton=[[UIBarButtonItem alloc]initWithTitle:@"Back" style:UIBarButtonItemStyleDone target:self action:@selector(goBack:)];
    self.navigationItem.leftBarButtonItem=backButton; 
```

并编写一个函数：

```
-(void)goBack:(id)sender
 {
      [self.navigationController popViewControllerAnimated:YES]
 } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-07T04:44:13.420

试试这个，

appDelegate.m - didFinishLaunchingWithOptions 方法

```
self.window = [[[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]] autorelease];
// Override point for customization after application launch.
self.viewController = [[[ViewController alloc] initWithNibName:@"ViewController" bundle:nil] autorelease];
//-----------navigation view--------------
UINavigationController *navHomeController = [[UINavigationController alloc] initWithRootViewController:self.viewController];
self.window.rootViewController = navHomeController; 
```

# parallel-processing - 使用openmp大大减慢

> ID：14743630
> 
> 赞同：2
> 
> 时间：2013-02-07T04:35:25.887
> 
> 标签：parallel-processing, openmp

我正在尝试测试一小段代码的速度，如下所示：

```
for(i=0;i<imgDim;i++)
        {
            X[0][i] = Z[i] - U1[i] * rhoinv;
            X[1][i] = Z[i] - U2[i] * rhoinv;
            X[2][i] = Z[i] - U3[i] * rhoinv;
        } 
```

迭代次数约为 200，imgDim 为 1000000。这段代码的总时间约为 2 秒。整个代码大约需要 15 秒。但是在我使用 openmp 来并行这段代码之后，例如：

```
omp_set_num_threads(max_threads);
    #pragma omp parallel shared(X,Z,U1,U2,U3,imgDim,rhoinv) private(i) 
    {
        #pragma omp for schedule(dynamic)
        for(i=0;i<imgDim;i++)
        {
            X[0][i] = Z[i] - U1[i] * rhoinv;
            X[1][i] = Z[i] - U2[i] * rhoinv;
            X[2][i] = Z[i] - U3[i] * rhoinv;
        }
    } 
```

max_threads 为 8。只有这一小段代码需要大约 11 秒，而整个代码大约需要 27 秒。最奇怪的是，如果我将 max_threads 更改为 1，时间会减少到 6 秒。但仍然比顺序代码长得多。

这花了我很多时间，我找不到问题。如果有人可以帮助我，我将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-07T11:54:44.357

`schedule(dynamic)`引入了巨大的运行时开销。它应该只用于每次迭代可能需要不同时间量的循环，并且改进的负载平衡将证明开销是合理的。对于像您这样的常规循环，动态调度是一种过度杀伤，因为它引入了不必要的开销，从而减慢了计算速度。

将计划类型更改为`static`：

```
#pragma omp parallel for schedule(static) 
for(i=0;i<imgDim;i++)
{
    X[0][i] = Z[i] - U1[i] * rhoinv;
    X[1][i] = Z[i] - U2[i] * rhoinv;
    X[2][i] = Z[i] - U3[i] * rhoinv;
} 
```

（注意：在外部范围内声明的变量默认是共享的，并行循环控制变量是隐式私有的）

# javascript - 在 Windows 8 HTML5/JavaScript 应用程序中使用 Facebook 对话框

> ID：14743633
> 
> 赞同：0
> 
> 时间：2013-02-07T04:35:36.353
> 
> 标签：javascript, facebook, iframe, windows-8, microsoft-metro

我正在按照对话框文档尝试在 Windows 8 应用商店应用程序 (html5/javascript) 中显示对话框。

[https://developers.facebook.com/docs/reference/dialogs/](https://developers.facebook.com/docs/reference/dialogs/)

在 Windows 8 应用商店应用程序中，我们必须使用 iframe 来显示另一个网页。这是我所做的一个例子：

```
<iframe src="https://www.facebook.com/dialog/feed?app_id=145634995501895&redirect_uri=http://www.facebook.com&show_error=true&display=iframe&access_token={access_token}"></iframe> 
```

由于它是 iframe，我指定 display=iframe 和 access_token={access_token}。如果您想尝试，请记得更改 access_token。

我收到以下错误：

```
API Error Code: 110
API Error Description: Invalid user id
Error Message: Missing user cookie (to validate session user) 
```

![在此处输入图像描述](../Images/5107b2032db43ba848ea4c0c327ff4d7.png)

我想这可能是由于用户尚未登录造成的。在文档（[https://developers.facebook.com/docs/reference/dialogs/](https://developers.facebook.com/docs/reference/dialogs/)）中，它说“如果用户尚未登录，Facebook 将在显示您调用的对话框之前提示他们登录。” 我想知道如何提示用户登录？我是否错过了提示用户登录的参数？我查看了参数，我似乎没有找到任何东西。

感谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T06:32:59.970

我看到你的不同行为，我将在这里记录，即使它可能不是“你的答案”。

我获得了自己的访问令牌，当我使用您的 IFRAME 时，我确实看到了重定向到 Facebook.com 以登录的尝试；然而，随之而来的是 JavaScript 控制台中的安全错误 - 包括以下内容：

> APPHOST9613：该应用程序无法导航到 [https://www.facebook.com/login.php?api_key=177388709024886&skip_api_login=1](https://www.facebook.com/login.php?api_key=177388709024886&skip_api_login=1) ... 因为这个错误： FORBIDFRAMING。

对 login.php 脚本的请求会生成一个带有[X-FRAME-OPTIONS 标头](https://developer.mozilla.org/en-US/docs/HTTP/X-Frame-Options?redirectlocale=en-US&redirectslug=The_X-FRAME-OPTIONS_response_header)的响应，以拒绝。这确实会阻止来自 Facebook 的登录页面出现在应用程序的 IFRAME 中 - 因此是 FORBIDFRAMING。

在 MSDN 论坛线程上也有[一些讨论](http://social.msdn.microsoft.com/Forums/en-US/winappswithhtml5/thread/a1cba639-3251-4df8-abd3-b6f6a95ba4ae)，它有点过时了，但从那时起我不知道有任何变化。

我没有尝试使用[Windows Azure Mobile Services](http://www.windowsazure.com/en-us/develop/mobile/)直接使用 Window 8 应用程序登录 Facebook ，但它可能是值得尝试的。Azure 移动服务的设置非常简单，因此您将很快知道 HTML5/JS Windows Store 应用程序中是否仍然存在问题。

# visual-c++ - Visual Studio 如何将 false 变为 true（也许通过 Timer Events）？

> ID：14743636
> 
> 赞同：0
> 
> 时间：2013-02-07T04:35:44.370
> 
> 标签：visual-c++, timer, event-handling, visual-studio-debugging

大约一个小时以来，我一直试图解释一些非常令人不安的行为，不确定它是由 Visual Studio 的编译器还是它的调试器引起的。我现在知道部分答案了。本质上，我在 MSVC2005 调试版本中编译并运行了以下内容：

```
DWORD timeStamp;
struct SomeEventStruct {
  DWORD timeStamp;
  // ... plus other data
};
void Magic( const SomeEventStruct & anEvent )
{
    if ( anEvent.timeStamp < timeStamp )
    {
      ASSERT( false ); // shouldn't happen! Time does not run backwards!
    }
    timeStamp = anEvent.timeStamp;
} 
```

`ASSERT( false )`甚至可以执行的唯一方法是`if`表达式的计算结果为真，对吗？那么，当`ASSERT()`火灾发生时，我闯入调试器检查变量的值，我经常发现它`timeStamp`是 0，这是怎么回事？根据定义，这是不可能的——无符号值永远不能小于零。

诚然，这是一个多线程应用程序，但没有其他线程涉及这些变量 - 它都在主 UI 线程中。我也简化了情况——它们实际上是成员变量和函数，我认为这并不重要。我认为相关的是变量值在第一次被`ASSERT()`解雇并邀请我闯入调试器时是合理的，在那里我发现了一个错误的时间戳。直到继续之后，事情才开始变得奇怪。

`if`最终，我发现语句和语句之间的 timeStamp 值被重置为零`ASSERT( false )`。我知道唯一可能执行此操作的代码行最终连接到计时器事件（与上面的时间戳事件不同 - 计时器触发以刷新我感兴趣的系统事件的显示）。

所以现在我想知道：Windows 计时器事件是否像中断一样，在某个时刻暂停线程执行，然后在稍后返回它......或者这里发生的其他事情是 VS 调试器特有的，还是的内部运作`ASSERT()`？如果我想阻止我的计时器事件处理程序运行直到上一次调用完成，是否由我来阻止重新进入？

# codeigniter - codeigniter_i18n 多语言

> ID：14743637
> 
> 赞同：1
> 
> 时间：2013-02-07T04:35:56.590
> 
> 标签：codeigniter, multilingual, codeigniter-url

我已经阅读并遵循此链接[codeigniter_i18 multilanguage](http://maestric.com/doc/php/codeigniter_i18n)中的说明并且它有效，但我在这里有一个小问题，我不知道可能在路由配置或脚本中。

例如，这个[http://mysite.com](http://mysite.com)是网站索引中的默认语言，但是如果我想为实例荷兰语更改不同的语言，那么如何实现我可以获得这样的网址[http:// /mysite.com/nl/](http://mysite.com/nl/)

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T04:55:13.363

在路径中使用它实际上会使事情变得更加复杂，因为您总是需要第一段是国家代码（因此您需要使用 /en 表示英语）

一个更容易考虑的方法是在他们选择一种语言时设置一个会话变量，并在“后台”执行它：

在您的 MY_Controller 中：

```
public function __construct()
{               
parent::__construct();
$lang_code = ($this->session->userdata('lang_code'))? $this->session->userdata('lang_code'):'english';
$this->lang->load('project_launch', $lang_code);
$this->lang->load('project_launch_template', $lang_code);
$this->lang->load('project_launch_uploader', $lang_code);
}

function lang_select(){
    $lang_code = $this->input->post('lang_code');
    $this->session->set_userdata('lang_code', $lang_code );
} 
```

并让您的语言选择器（下拉菜单、小标志等）调用 lang_select() 来更改语言并设置会话变量；该构造将检查每个页面加载的语言并加载适当的语言文件

# keyboard - iso_level3_shift 和锁存器的区别

> ID：14743638
> 
> 赞同：11
> 
> 时间：2013-02-07T04:36:00.450
> 
> 标签：keyboard, x11

ISO_Level3_Shift 和 ISO_Level3_Latch 之间有什么区别，例如，在 /usr/share/X11/xkb/symbols 中（我确定在 archlinux 和许多其他发行版中）找到的 level3 配置文件。

例如，我将此条目添加到我正在处理的自定义键盘中（对于逻辑学家，不要担心，⊥ → 很棒）。

```
// make right control do level3 shift stuff
default partial modifier_keys
 xkb_symbols "rctrl_switch" {
  key <RCTL> {
    type[Group1]="ONE_LEVEL",
    symbols[Group1] = [ ISO_Level3_Shift ]
    };
  include "level3(modifier_mapping)"
}; 
```

它按预期工作（按住右控制使我可以访问 3 级符号，例如，我对 us-intl 布局变体拥有的主要是 unicode 代码点），但我想知道为什么有些条目使用 ISO_Level3_Latch，以及那是什么甚至意味着。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2015-09-04T07:21:14.733

shift 样式的修饰符的工作方式是，您必须在按住它的同时按下另一个键才能修改该键。这就是常规大写转换键在普通键盘上的工作方式。

闩锁式修饰符的作用相同，但与 shift 式修饰符相反，如果在按下另一个键之前释放它，则该修饰符被锁定，这意味着您将按下的*下一个*键将被修改。此外，如果在锁定时按下，修改器将被锁定，直到再次按下修改器键。

使用大写字母的常规移位示例。考虑以下击键顺序：

```
- Press a
- Release a
- Press & release space
- Press shift
- Press a
- Release a
- Press a
- Release a
- Release shift
- Press & release space
- Press shift
- Release shift
- Press a
- Press a
- Press & release space
- Press shift
- Release shift
- Press shift
- Release shift
- Press a
- Press a
- Press a
- Press shift
- Release shift
- Press a 
```

如果 shift 设置为 shift-style，您将获得以下输出：

```
a AA aa aaaa 
```

如果 shift 设置为闩锁样式，您将获得以下输出：

```
a AA Aa AAAa 
```

因为在第三组之前的按下释放周期之后，shift 被锁定，并且当您按下 a 键时该锁定被消耗。在第四组中，在锁定时再次按下闩锁会使您进入锁定模式。

# entity-framework - 在“包管理器”中输入“启用迁移”Visual Studio 2012 时将迁移文件夹添加到我的解决方案时出错

> ID：14743640
> 
> 赞同：0
> 
> 时间：2013-02-07T04:36:12.743
> 
> 标签：entity-framework, migration

**PM> 启用迁移**

**我收到这样的错误（eManager）。**

1.  我的 VS 解决方案中有两个项目，名称如下：
    *   eManager.Domain
    *   eManager.Web

我向 eManager.Web 添加了 eManager.Domain 的引用，即使它每次都弹出相同的错误。

这里的错误：

```
More than one context type was found in the assembly 'eManager.Web'.
To enable migrations for eManager.Web.Infrastructure.DepartmentDb, use Enable-Migrations -ContextTypeName eManager.Web.Infrastructure.DepartmentDb.
To enable migrations for eManager.Web.Models.UsersContext, use Enable-Migrations -ContextTypeName eManager.Web.Models.UsersContext. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-06T14:13:33.437

在包管理器控制台中，您必须将 Default Projetc Drop 更改为您的 Web 项目，并在 exec enable-migrations 之后为您想要的上下文更改：

PM> Enable-Migrations -ContextTypeName Web.Infraestruture.DepartmentDb

但请记住，您已经将 web 设置为 Startproject。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T07:26:01.270

使用[这篇](http://odetocode.com/blogs/scott/archive/2012/09/23/perils-of-the-mvc4-accountcontroller.aspx)文章和这个[链接](http://entityframework.codeplex.com/workitem/578) 问题很容易解决。如错误所述，您可以使用 –ContextTypeName 标志来指定您的上下文类名称。请注意，您只能对一个项目中的一个上下文进行迁移，因此如果您想对这两个上下文进行迁移，您需要将一个迁移到另一个项目。同样，我的建议是删除 Internet 项目模板创建的现有 UsersContext，并在您自己的上下文中获取用户配置文件的所有权。

# java - 如何在java接口中定义事件

> ID：14743642
> 
> 赞同：0
> 
> 时间：2013-02-07T04:36:17.540
> 
> 标签：java, events, interface

我想在我的应用程序中使用 RMI。所以使用接口是必须的。我想强制开发人员实现事件。所以我想在我的界面中声明事件方法。我怎样才能做到这一点？任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T04:47:19.593

`public void handleXXXEvent(XXXEventType event);`

where`XXX`可以替换为 EventType 并且`XXXEventType`是事件的实例

最好你可以让你的实现类注册到一个`Listener`

喜欢`public void registerToXXXListener(XXXListner listener);`

# javascript - 在草坪椅回调中接收错误

> ID：14743649
> 
> 赞同：3
> 
> 时间：2013-02-07T04:36:54.400
> 
> 标签：javascript, lawnchair

如果我在草坪椅上调用一个方法并且它出错，我可以得到一个错误回调吗？我正在实现一个适配器，并且有一些已知的错误条件，我想将它们提供给客户端来处理。但我无法找出错误是如何在 API 中返回的。它们是节点样式吗？例如：callback(error, result) where error=null 在没有错误的情况下，还是别的什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-08-07T10:39:16.490

**简短回答：草坪椅适配器的方法没有进行任何重大错误处理。如果适配器中发生任何特别糟糕的事情，客户端将收到异常。**

下面是 DOM 适配器的 save 方法的代码——很明显，如果发生任何不好的事情，回调将不会被调用；应用程序的代码将不得不处理异常。

```
save: function (obj, callback) {
    var key = obj.key ? this.name + '.' + obj.key : this.name + '.' + this.uuid()
    // if the key is not in the index push it on
    if (this.indexer.find(key) === false) this.indexer.add(key)
    // now we kil the key and use it in the store colleciton    
    delete obj.key;
    storage.setItem(key, JSON.stringify(obj))
    obj.key = key.slice(this.name.length + 1)
    if (callback) {
        this.lambda(callback).call(this, obj)
    }
    return this
}, 
```

当然，您可以在适配器中进行内部错误处理，并将附加参数传递给回调。这样做会使您的适配器的行为与其他适配器不一致，这可能是一个缺点。

我建议您的适配器会像其他适配器一样抛出异常，除非可以从适配器内部的错误中恢复。

# php - 为我的数据库增加价值

> ID：14743653
> 
> 赞同：0
> 
> 时间：2013-02-07T04:37:16.193
> 
> 标签：php, mysql

我使用此代码来计算我的值。我用过这个

```
$SQL = "SELECT itm_no,itm_nme,itm_tot,itm_sld, (itm_tot-itm_sld) 
AS itm_stk FROM itm_tot"; 
```

获取`itm_stk`价值`(itm_tot-itm_sld)`。然后我想将此`itm_stk`值添加到我的数据库`itm_stk`列。我应该使用什么？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T05:38:27.463

//连接到本地主机

if($_POST['Submit']=='Save') `//on submittion of a form` { $edit="UPDATE athi_table SET Name='".$_POST["Name"]."','".$_POST["Email"]. "','".$_POST["Gender"]."','".$_POST["Degree"]."','".$_POST["Phone"]."','".$_POST ["技能"]."','".$_POST["位置"]."'";

mysql_query($edit); header("位置：redirectpage.php"); }`redirection`

$result = mysql_query("SELECT * FROM table_name WHERE ID='".$_REQUEST['ID']."'"); `//use WHERE`

$row=mysql_fetch_array($result);

?>`//end`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T04:42:10.397

您可以编写一个[触发器](http://dev.mysql.com/doc/refman/5.1/en/create-trigger.html)`itm_tot`，该触发器在向表中插入新行时执行。它应该做的是获取`(itm_tot-itm_sld)`并更新`itm_stk`.

阅读本文：[MySQL 插入后和更新后触发器](https://stackoverflow.com/questions/843031/mysql-after-insert-and-after-update-trigger)

# ios - 如何在目标c中编写http get和post？

> ID：14743658
> 
> 赞同：-1
> 
> 时间：2013-02-07T04:38:01.940
> 
> 标签：ios, objective-c, cocoa-touch, networking

我想使用 http Get 和 Post 来获取特定 URL 请求的请求和响应，

但我不知道如何在目标 c 中使用它们。

在建立连接时，哪个会先获取或发布。？

如何修改内容并将其发布回服务器..

谁能帮帮我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T04:57:44.230

**供使用：**

```
+(NSMutableURLRequest*)getURq_getansascreen:(NSString*)ws_name {

    NSLog(@"%@",ws_name);

    NSMutableURLRequest *urlReq = [[NSMutableURLRequest alloc] initWithURL:[NSURL URLWithString:ws_name] cachePolicy:NSURLRequestReloadIgnoringCacheData timeoutInterval:30];

    [urlReq addValue:@"text/xml; charset=utf-8" forHTTPHeaderField:@"Content-Type"];
    [urlReq setHTTPMethod:@"GET"];

    return urlReq;
} 
```

后期使用：

```
+(NSMutableURLRequest*)postURq_getansascreen:(NSString*)ws_name :(NSString*)service {

        NSString *tempUrl = domainURL;

        NSString *msgLength = [NSString stringWithFormat:@"%d",[ws_name length]];
        NSMutableURLRequest *urlReq = [[NSMutableURLRequest alloc] initWithURL:[NSURL URLWithString:[NSString stringWithFormat:@"%@Service=%@",tempUrl,service]] cachePolicy:NSURLRequestReloadIgnoringCacheData timeoutInterval:30];
        [urlReq addValue:@"application/x-www-form-urlencoded" forHTTPHeaderField:@"Content-Type"];
        [urlReq addValue:msgLength forHTTPHeaderField:@"Content-Length"];
        [urlReq setHTTPMethod:@"POST"];
        [urlReq setHTTPBody: [ws_name dataUsingEncoding:NSUTF8StringEncoding]];

        return urlReq;
    } 
```

//在视图中调用这个确实加载为`

```
WSPContinuous *wspcontinuous = [[WSPContinuous alloc] initWithRequestForThread:[webService getURq_getansascreen:[webService GetDetails:str_filter]] sel:@selector(WS_GetDetailsLoaded:) andHandler:self];` 
```

//创建类 WSPContinuous 并添加这些 fns..

```
-(id)initWithRequestForThread:(NSMutableURLRequest*)urlRequest sel:(SEL)seletor andHandler:(NSObject*)handler {

    if (self=[super init]) {

        self.MainHandler = handler;
        self.targetSelector = seletor;
        self.urlReq = urlRequest;

        [self performSelectorOnMainThread:@selector(startParse) withObject:nil waitUntilDone:NO];
    }
    return (id)urlReq;
}

-(void)startParse{

    NSLog(@"URL CALLING    %@",urlReq.URL);

    con = [[NSURLConnection alloc] initWithRequest:urlReq delegate:self];
    if (con) {
        myWebData = [[NSMutableData data] retain];

        NSLog(@"myWebData old....%@",myWebData);
    }
    else {
        [self.MainHandler performSelectorOnMainThread:targetSelector withObject:nil waitUntilDone:NO];
    }
}

//-------------------------------connection-----------------

-(void)connection:(NSURLConnection *)connection didReceiveResponse:(NSURLResponse *)response{
    [myWebData setLength:0];
}

-(void)connection:(NSURLConnection *)connection didReceiveData:(NSData *)data{
    [myWebData appendData:data];
}

-(void)connection:(NSURLConnection *)connection didFailWithError:(NSError *)error{

    [self.MainHandler performSelectorOnMainThread:targetSelector withObject:nil waitUntilDone:NO];

}

-(void)connectionDidFinishLoading:(NSURLConnection *)connection{

    NSString *thexml = [[NSString alloc] initWithBytes:[myWebData mutableBytes] length:[myWebData length] encoding:NSUTF8StringEncoding];

    NSLog(@"xmlDictionary %@",thexml);

    [thexml release];

    NSError *parseError = nil;
    NSDictionary *xmlDictionary = [XMLReader dictionaryForXMLData:myWebData error:&parseError];

    [AlertHandler hideAlert];

    [MainHandler performSelector:targetSelector withObject:xmlDictionary];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T05:08:33.980

如果你想开始，一个更好的主意是阅读 NSMutableURLRequest 和相关主题，如 NSURLConnection。

您可以随处获得示例代码。只是谷歌它。

谷歌搜索 ->[目标 c 获取并发布](http://www.google.co.in/search?client=safari&rls=en&q=objective%20c%20get%20and%20post&ie=UTF-8&oe=UTF-8&redir_esc=&ei=0jUTUfiCLMnIrQe6jYCQCw)

和 First hit -> [Tutorials for using HTTP POST and GET on iPhone in Objective-C](https://stackoverflow.com/questions/2346893/tutorials-for-using-http-post-and-get-on-the-iphone-in-objective-c)

# objective-c - 我怎么知道拖出会话在应用程序之外结束

> ID：14743659
> 
> 赞同：0
> 
> 时间：2013-02-07T04:38:20.750
> 
> 标签：objective-c, cocoa

如何知道拖出会话在应用程序之外结束。

例如，我有一个包含 3 张图像的应用程序，如果我拖出一张图像，那么我怎么知道拖出会话在应用程序之外而不是在应用程序内部结束。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T08:40:27.523

对照视图检查`mouseLocation`拖动`NSEvent`的位置以查看拖动结束的位置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T10:50:16.900

我找到了一种方法，即 - (void)draggingSession:(NSDraggingSession *)sessionendedAtPoint:(NSPoint)screenPoint operation:(NSDragOperation)operation

使用这种方法，我得到了屏幕坐标中的拖动终点，并使用 [window frame] 我得到了窗口的屏幕点。并且通过比较两个屏幕点很容易找出拖出是在应用程序内结束还是在应用程序窗口外结束。

# ejs - CanJS EJS 表格 - 出现在表格上方的行

> ID：14743661
> 
> 赞同：1
> 
> 时间：2013-02-07T04:38:27.167
> 
> 标签：ejs, canjs, canjs-view

我是 CanJS 的新手，正在尝试通过教程学习。曾经遇到困难的地方是当我将[todo 教程代码](http://jsfiddle.net/donejs/5zpFz/)转换为使用表格而不是 UL/LI 组合时。

可能是我犯了一些非常小的错误..但在过去 3 天里找不到相同的结果..有人可以帮忙吗？

用于 todo 教程（现在使用表格）的简短版本的 jsFiddle[在这里](http://jsfiddle.net/dharapvj/5zpFz/92/)您可以看到问题。

来自ejs的代码的症结在这里..

```
<script type='text/ejs' id='todosEjs'>
<table border="1">
    <thead>
    <tr>
        <th>id</th>
        <th>name</th>
        <th>status</th>
    </tr>
    </thead>
    <tbody>
<!-- bind to changes in the todo list -->
<% this.each(function( todo ) { %> 
    <!-- add the todo to the element's data -->
    <tr <%= (el) -> el.data('todo',todo) %>>
        <td>
            <input type="checkbox" <%= todo.attr('complete') ? 'checked' : '' %>>
        </td>
        <td><%= todo.attr('name') %></td>
        <td><%= todo.attr('id') %></td>
    </tr>
<% }) %>
 </tbody>
</table>

</script> 
```

期待伸出援助之手:-)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T17:23:01.083

**更新：这是一个现已修复[的错误的结果](https://github.com/bitovi/canjs/issues/271)**

看来评论是这里的问题。删除它们使其工作，请参阅[更新的 Fiddle](http://jsfiddle.net/5zpFz/93/)：

```
<table border="1">
    <tr>
        <th>id</th>
        <th>name</th>
        <th>status</th>
    </tr>
<% this.each(function( todo ) { %> 
    <tr <%= (el) -> el.data('todo',todo) %>>
        <td>
            <input type="checkbox" <%= todo.attr('complete') ? 'checked' : '' %>>
        </td>
        <td><%= todo.attr('name') %></td>
        <td><%= todo.attr('id') %></td>
    </tr>
<% }) %> 
```

# objective-c - 键入时密码可见，然后 ***

> ID：14743663
> 
> 赞同：0
> 
> 时间：2013-02-07T04:38:37.813
> 
> 标签：objective-c, xcode

我想让我的密码字段在输入时可见，完成后（更改为另一个字段）将其转换为***。由于我的应用程序只有一个密码字段（没有确认），因此用户很容易输入错误。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-07T05:11:16.657

尝试这个，

```
UITextField *txtPassword = [[UITextField alloc] init];
txtPassword.secureTextEntry =YES; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T04:59:21.167

您可以按照以下步骤操作：

*   放`pwdTextField.delegate = self`
*   实现`textfieldDidEndEditing`委托
*   用户输入文本时不做任何特别的事情
*   现在`textfieldDidEndEditing`将您当前的密码存储在一个变量中（以备将来使用）
*   代替`pwdTextField.text = noOfStarsEqualToLenghtOfString`

而已。快乐编码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-07T04:50:32.957

首先，我建议使用安全文本字段。否则试试这个：

```
- (BOOL)textFieldShouldReturn:(UITextField *)textField
{
    if (textField == txtPassword)
    {
         //Check total no of characters in that textfield & replace all with *.
    }
    return YES;
} 
```

并在单击确认按钮（注册/登录）时，使用您在替换为 * 之前添加的密码检查密码。考虑 * 只是为了显示目的。

# android - 如何独立于Eclipse打开logcat

> ID：14743671
> 
> 赞同：2
> 
> 时间：2013-02-07T04:39:07.377
> 
> 标签：android, eclipse, logcat

嗨，我对使用 Android 进行开发非常陌生，并且在 Eclipse IDE 方面有点新手。我想知道是否可以在单独的窗口中启动 logcat，现在嵌套在 eclipse 中？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-07T04:41:21.907

您可以使用命令 promt（在 windows 中）中的“ddms”命令来启动 logcat 窗口。通常 ddms 会出现在路径 \sdk\tools

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-07T04:44:41.187

它们作为循环内存缓冲区存储在设备上。它在 Eclipse 旁边没有任何单独的窗口，但您可以通过命令行提取日志：

```
android-sdk\platform-tools>adb logcat > c:\tmp\myfileandroid.log 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-07T04:44:25.847

如果您安装了 Android SDK，请找到 platform-tools 文件夹，其中会有一个名为 ADB 的二进制文件。您可以使用该二进制文件在 CLI 中启动以获得单独的 logcat。例如

C:\Users\Owner\Android SDK\platform-tools\adb logcat

有关更多信息，请查看[此处](http://developer.android.com/tools/help/adb.html)的文档。

# php - 使用 PHP 在 wwwroot 中自动下载文件（.sql）

> ID：14743677
> 
> 赞同：1
> 
> 时间：2013-02-07T04:39:46.190
> 
> 标签：php, mysql

到目前为止，我尝试过的可以下载 sql 文件，但它是空的

```
//test.php

 <?php
header("Content-type: application/octet-stream");
header('Content-Disposition: attachment; filename=wordpress_db1.sql');
?> 
```

这是我的根文件夹的样子

![在此处输入图像描述](../Images/82658c72d4f9c97ffc206a6846c5813e.png)

我想在运行 test.php 时下载 wordpress_db1.sql 文件，但我总是在它上面空着。我怎样才能解决这个问题？谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-07T04:44:47.550

下面的代码将为您解决问题。

```
<?php 
$file_name = 'file.sql';
$file_url = 'http://www.example.com/' . $file_name;
header('Content-Type: application/octet-stream');
header("Content-Transfer-Encoding: Binary"); 
header("Content-disposition: attachment; filename=\"".$file_name."\""); 
readfile($file_url);
?> 
```

**你做错了什么**是 `readfile($file_url);`。设置标题不会完成工作。你有用 `readfile($file_url);`

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-07T04:42:14.750

设置标题不会读取文件。您可以在附件中将文件命名为任何您想要的名称。您必须实际发出文件：

```
readfile('wordpress_db1.sql'); 
```

# php - CKEditor 在我的文本中添加了 div 和一些不需要的字符

> ID：14743680
> 
> 赞同：1
> 
> 时间：2013-02-07T04:39:53.187
> 
> 标签：php, jquery, ckeditor

我在我的网络应用程序中使用 CKEditor 作为后端。当我从另一个地方复制和粘贴文本时，它会`<div>Â</div>`在复制粘贴文本的末尾添加，当我发布到数据库中时，情况会变得更糟。`Â`它在不需要的区域添加了很多和字符。我该如何解决这个问题？我的网络应用程序中也有 jQuery 库。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-07T04:51:36.347

我通过将页面编码从 更改为`<META http-equiv="Content-Type" CONTENT="text/html; charset=iso-8859-1"/>`来修复它`<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />`。更多信息可以在[这里找到](https://stackoverflow.com/questions/1461907/html-encoding-issues-character-showing-up-instead-of-nbsp)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T04:45:03.543

使用“粘贴为纯文本”按钮进行所有粘贴。这个：![CKEditor 粘贴为纯文本](../Images/950ee88c2203aee2e8b3bcbe96e611fc.png)

# css - Sencha Touch 2：无法覆盖自定义 css 文件中的默认 css 类

> ID：14743688
> 
> 赞同：0
> 
> 时间：2013-02-07T04:41:31.473
> 
> 标签：css, extjs, sencha-touch, sencha-touch-2, sencha-touch-2.1

我正在尝试使用我的自定义图像更改选择字段中的默认图像。下面是在 sencha-touch-debug.css 中声明的类，需要重写这些类以进行此更改。

```
.x-selectmark-base, .x-field-select .x-component-outer:after {
content: "";
position: absolute;
width: 1em;
height: 1em;
top: 50%;
left: auto;
right: 0.7em;
-webkit-mask-size: 1em;
**-webkit-mask-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAA....');**
margin-top: -0.5em;
}

/* line 634, ../themes/stylesheets/sencha-touch/default/widgets/_form.scss */
.x-field-select .x-component-outer:after {
**background-color: #dddddd;**
} 
```

突出显示的红线分别负责应用图像和背景。

我试图通过在我的 css 类中再次声明它们来覆盖我的 css 类文件中的这些样式，但是这两个突出显示的属性无论如何都获得了优先级，尽管在我的自定义 css 文件中给出了 priority = important，但我无法覆盖它们在我的自定义 css 文件中。请参阅，如果我在 sencha-touch-debug.css 中注释突出显示的行，则仅应用自定义 css 类。

我的 CSS 课

```
.x-selectmark-base,.x-field-select .x-component-outer:after {
webkit-mask-image: url("../../resources/images/main_menu_arrow.png") !important;
margin-top: -0.5em;

}

.x-field-select .x-component-outer:after {

content: url("../../resources/images/main_menu_arrow.png") !important;
margin-top: -35px !important;
margin-right:8px !important;

} 
```

有任何想法吗？

谢谢 Gendaful

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T23:21:52.803

我能够克服这个问题并应用以下样式来覆盖 sencha 的默认样式，并在选择字段上应用自定义图像，如下所示。

用户定义的 CSS >> 应用以下样式来覆盖选择字段的默认 sencha 样式

```
.x-selectmark-base,.x-field-select .x-component-outer:after {

    webkit-mask-image: none !important;
    margin-top: -0.5em;

}

.x-field-select .x-component-outer:after {

    content: none !important;

}

// Applied this user defined class to specify the background color and background image on select field

.chooseCountrySelectField {
        background: url('../../resources/images/main_menu_arrow.png') no-repeat right,  -webkit-gradient(linear, left top, left bottom, color-stop(0%, #faebb0),
        color-stop(100%, #f3ce72));
} 
```

希望这个解决方案对其他人有用。

# android - SherlockActivity 无法解析为 android 中的类型

> ID：14743700
> 
> 赞同：1
> 
> 时间：2013-02-07T04:42:26.867
> 
> 标签：android, github, actionbarsherlock

嗨，我必须从[BBC NEWS READER开发 android BBC 新闻阅读器应用程序](https://github.com/okey666/BBC-News-Reader)

在这里我必须从上面的链接导入这些应用程序并运行该应用程序意味着我收到以下错误。我该如何解决这些错误？？？请帮我

错误是：

SherlockActivity 无法解析为一种类型...我在下一行收到错误...

```
public class WidgetConfigActivity extends SherlockActivity {
ListView listView; 
```

我也添加了库文件。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-07T05:13:29.257

*   [从这里](http://actionbarsherlock.com/)下载 ActionBarSherlock 。
*   解压缩下载的文件并将项目导入 Eclipse。
*   右键单击您的项目-> 属性
*   在 Android-> 库部分单击添加
*   如果您正确添加了 ActionBarSherlock 库，您可以在那里找到它。
*   将其添加到您的项目中

查看有关如何在 Eclipse 中引用库项目的[文档。](http://developer.android.com/tools/projects/projects-eclipse.html#ReferencingLibraryProject)

**编辑：**

要删除`android-support-library`依赖错误，请删除项目的**libs**部分中`android-support-v4.jar`存在的文件。

 **错误的原因是该库`ActionBarSherlock`已经有一个`android-support-v4.jar`。所以这两个文件之间出现了冲突**

# css - 使用浮动时的CSS问题div高度

> ID：14743709
> 
> 赞同：5
> 
> 时间：2013-02-07T04:43:33.567
> 
> 标签：css, css-float

我有一个`div`这样的区域：

```
<div class="con">
    <div class="container"></div>
    <div class="sidebar"></div>
</div> 
```

和 CSS：

```
.con{
    width:100%;     
}
.con .container{
    width:70%;
    min-height:500px;
    float:left;
    background:#f00;

}
.con .sidebar{
    width:30%;
    min-height:500px;
    float:right;
    background:#ccc;

} 
```

`container`和`sidebar`班级高度是动态的。当这些班级高度之一增加时，班级`con`也必须增加。但我的问题是班级`con`高度总是0，我似乎无法给`con`班级一个静态高度。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-07T04:48:25.220

添加`overflow: auto;`到`.con`：

```
.con {
    width: 100%; 
    overflow: auto;    
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-07T04:52:28.903

使用明确的类

```
<div class="con">
    <div class="container"></div>
    <div class="sidebar"></div>
    <div class="clear"></div>
</div>

.clear
{
   clear:both;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-07T04:46:00.913

我不确定为什么`.con`不延伸高度很重要，但这是一个非常臭名昭著的问题。添加`overflow: hidden`到`.con`. 如果这不起作用，请放在`<br style="clear: both;">`标签后面。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-07T04:54:52.807

试试这个

```
.con{
    width:auto; 
    overflow: auto;
    margin:0 auto;    
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-08-28T07:36:33.700

你可以使用喜欢..

```
.con{display: table;} 
```

# python - 如何优化这个 Python 脚本？

> ID：14743732
> 
> 赞同：2
> 
> 时间：2013-02-07T04:46:06.550
> 
> 标签：python

对于周长为 p 的整数直角三角形有许多解（a，b，c），对于所有这些解，a+b+c == p 和勾股定理也适用。我正在编写一个 Python 脚本来计算周长 <= 1000 的三角形可能的最大解决方案数。

我的脚本是正确的，但是它需要永远运行。我敢肯定即使使用我的 i7 处理器也需要 30 多分钟，所以我需要对其进行优化。有人能帮我吗？（这是 Project Euler 的一个问题，以防有人想知道）

```
def solutions(p):
    result = []

    for a in range(1, p + 1):
        for b in range(1, p - a + 1):
            for c in range(1, p - a - b + 1):
                if a + b + c == p and a < b and b < c:
                    d = a ** 2
                    e = b ** 2
                    f = c ** 2

                    if (d + e == f) or (e + f == d) or (f + d == e):
                        result.append((a, b, c))
    return len(result)

max_p = 0
max_solutions = 0

for p in range(3, 1001):
    print("Processing %d" % p)
    s = solutions(p)

    if s > max_solutions:
        max_solutions = s
        max_p = p

print("%d has %d solutions" % (max_p, max_solutions)) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T05:22:20.597

一个更好的：

```
def solution(n):
    count = 0
    for c in range(n // 3 + 1, n // 2):
        for a in range(1, n // 3):
            b = n - a - c
            if b <= 0:
                continue
            if a >= b:
                continue
            if a * a + b * b != c * c:
                continue
            count += 1
    return count 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T05:24:07.467

这是我对您的程序的重写。

首先，我预先计算所有平方值。这不仅避免了乘法，而且意味着 Python 不会不断地为所有平方值创建和垃圾收集对象。

接下来，我摆脱了三角形第三边的循环。一旦您选择了值`a`并且`b`只有一个可能的值符合标准`a + b + c == 1000`，所以这只是测试那个。这将问题从大约 O(n^3) 变为大约 O(n^2)，这是一个巨大的改进。

然后我尝试运行它。在我用了 4 年的电脑上，它在大约 46 秒内完成，所以我停在那里，你去吧。

我做了一个谷歌搜索，发现了这个问题的讨论；如果我看到的讨论是正确的，那么这个程序会打印正确的答案。

```
upper_bound = 1000

sqr = [i**2 for i in range(upper_bound+1)]

def solutions(p):
    result = []

    for a in range(1, p - 1):
        for b in range(1, p - a):
            c = p - (a + b)
            if a < b < c:
                d = sqr[a]
                e = sqr[b]
                f = sqr[c]

                if (d + e == f) or (e + f == d) or (f + d == e):
                    result.append((a, b, c))
    return len(result)

max_p = 0
max_solutions = 0

for p in range(3, upper_bound+1):
    print("Processing %d" % p)
    s = solutions(p)

    if s > max_solutions:
        max_solutions = s
        max_p = p

print("%d has %d solutions" % (max_p, max_solutions)) 
```

编辑：这是我正在玩的一个更快的版本。它在评论中包含了来自@gnibbler 的建议。

```
upper_bound = 1000

sqr = [i**2 for i in range(upper_bound+1)]

def solution(p):
    count = 0
    for a in range(1, p - 1):
        for b in range(a, p - a):
            c = p - (a + b)
            d = sqr[a]
            e = sqr[b]
            f = sqr[c]

            if (d + e == f):
                count += 1
    return count

c, p = max((solution(p), p) for p in range(3, upper_bound+1))
print("%d has %d solutions" % (p, c)) 
```

在我的电脑上，这个版本需要 31 秒而不是 46 秒。

使用的棘手业务`max()`并没有真正使它明显更快。我在没有预先计算平方的情况下尝试了它，它非常慢，太慢了，我不想等待确切的时间。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-07T05:29:30.687

知道了。它只是依赖于设置 a^2+b^2=c^2 然后替换 p - a - b = c

```
 1 from math import pow
  2 
  3 def see_if_right_triangle(p):
        solutions = 0
  4     # Accepts the perimeter as input
  5     for a in range(1, p): 
  6         for b in range(1, p):
  7             if 2*p*b + 2*p*a - pow(p, 2) == 2*a*b:
  8                solutions += 1
        print "The perimeter {p} has {sol} number of solutions".format(p=p, sol=solutions)
 10                        
 11 
 12 for p in range(3, 1001):
 13     see_if_right_triangle(p) 
```

我认为这可以进一步优化......特别是如果你找出一些数学来缩小你将接受的范围 a 和 b

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-07T18:49:48.307

这不是您优化的代码，而是我自己的代码（我用于此问题）。我开始做一些代数，以使程序非常简单，并且不必迭代`1000^3`次数（1-1000 用于`a`，然后 1-1000 用于的每个`b`值`a`，1-1000 用于.`c``b`

```
# Project Euler 9
'''
Algebra behind Final Method:
a + b + c = 1000 | a^2 + b^2 = c^2
c = 1000 - (a + b) # Solving for C
a^2 + b^2 = (1000 - (a + b))^2 # Substituting value for C
a^2 + b^2 = 1000000 - 2000a - 2000b + (a + b)^2 # simplifying
a^2 + b^2 = 1000000 - 2000a - 2000b + a^2 + b^2 + 2ab # simplifying again
0 = 1000000 - 2000a - 2000b + 2ab # new formula
2000a - 2ab = 1000000 - 2000b # isolating A
1000a - ab = 500000 - 1000b # divide by 2 to simplify
a(1000 - b) = 500000 - 1000b # factor out A
a = (500000 - 1000b) / (1000 - b) # solve for A
'''
def pE9():
   from math import sqrt
   a, b, c = 1, 1, 1
   while True:
      b += 1
      a = (500000 - 1000 * b) / (1000 - b)
      c = sqrt(a**2 + b**2)
      if a + b + c == 1000 and a**2 + b**2 == c**2:
         break
   print int(a * b * c)

from timeit import timeit
print timeit(pE9, number = 1) 
```

使用`number = 1`所以只需测试一次。

输出：

```
>>> 
# Answer hidden
0.0142664994414 
```

# c# - 为什么编译时有 dll 文件复制到我的项目的 Bin/Debug 文件夹中，尽管没有引用任何这些库？

> ID：14743737
> 
> 赞同：4
> 
> 时间：2013-02-07T04:46:42.060
> 
> 标签：c#, visual-studio, dll, visual-studio-2012

我很困惑为什么 Visual Studio 会在我的项目的 bin/Debug 文件夹中创建/复制大量库 dll，尽管我没有引用这些库中的任何一个？dll 代表在上述项目所在的同一解决方案的其他项目中使用的库，但我不明白为什么一个给定项目中未引用的库仍然复制到 bin/... 文件夹中。我使用 NuGet，但我确保解决方案范围的 NuGet 管理器仅包含所选库提供的特定项目。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-07T05:23:50.597

如果项目 A 引用项目 B 并且项目 B 引用 dll C，则项目 A 很可能在没有 dll C 的情况下无法运行（如果间接使用了此 dll 中的任何功能）。这就是为什么将 dll C 复制到项目 A 的“bin”文件夹的原因。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T05:37:13.720

如果您使用的是 NuGet，您是将包安装到每个项目，还是只选择使用它的包？我不清楚您的意思是否是“但我确保解决方案范围的 NuGet 管理器仅包含所选库提供的特定项目。”

# php - 使用 web 服务在 codeigniter 中上传图像

> ID：14743738
> 
> 赞同：0
> 
> 时间：2013-02-07T04:46:42.440
> 
> 标签：php, codeigniter

我有一个个人资料页面，我提供全名、电子邮件、密码值以使用 web 服务填写个人资料页面，如下面的方法

```
function signup($fullname,$email,$password)
{
$this->load->model('registration_model');
      $results =$this->registration_model->register($email,$password,$devicetoken,$devicetype,$logintype);
      echo json_encode($results);
} 
```

如何从上述功能将图像上传到个人资料页面

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T04:52:02.633

使用[此](http://smashingweb.info/code-igniter-image-uploader-file-uploader-multiple/)代码：

```
<form method="post" action="uploader/go" enctype="multipart/form-data">
  <input type="file" name="image1" /><br />
  <input type="file" name="image2" /><br />
  <input type="file" name="image3" /><br />
  <input type="file" name="image4" /><br />
  <input type="file" name="image5" /><br />
  <input type="submit" name="go" value="Upload!!!" />
</form> 
```

```
class Uploader extends Controller {
  function go() {
    if(isset($_POST['go'])) {
      /* Create the config for upload library */
      /* (pretty self-explanatory) */
      $config['upload_path'] = './assets/upload/'; /* NB! create this dir! */
      $config['allowed_types'] = 'gif|jpg|png|bmp|jpeg';
      $config['max_size']  = '0';
      $config['max_width']  = '0';
      $config['max_height']  = '0';
      /* Load the upload library */
      $this->load->library('upload', $config);

      /* Create the config for image library */
      /* (pretty self-explanatory) */
      $configThumb = array();
      $configThumb['image_library'] = 'gd2';
      $configThumb['source_image'] = '';
      $configThumb['create_thumb'] = TRUE;
      $configThumb['maintain_ratio'] = TRUE;
      /* Set the height and width or thumbs */
      /* Do not worry - CI is pretty smart in resizing */
      /* It will create the largest thumb that can fit in those dimensions */
      /* Thumbs will be saved in same upload dir but with a _thumb suffix */
      /* e.g. 'image.jpg' thumb would be called 'image_thumb.jpg' */
      $configThumb['width'] = 140;
      $configThumb['height'] = 210;
      /* Load the image library */
      $this->load->library('image_lib');

      /* We have 5 files to upload
       * If you want more - change the 6 below as needed
       */
      for($i = 1; $i < 6; $i++) {
        /* Handle the file upload */
        $upload = $this->upload->do_upload('image'.$i);
        /* File failed to upload - continue */
        if($upload === FALSE) continue;
        /* Get the data about the file */
        $data = $this->upload->data();

        $uploadedFiles[$i] = $data;
        /* If the file is an image - create a thumbnail */
        if($data['is_image'] == 1) {
          $configThumb['source_image'] = $data['full_path'];
          $this->image_lib->initialize($configThumb);
          $this->image_lib->resize();
        }
      }
    }
    /* And display the form again */
    $this->load->view('upload_form');
  }
} 
```

# google-app-engine - 获取数据存储实体的父键

> ID：14743747
> 
> 赞同：4
> 
> 时间：2013-02-07T04:47:40.930
> 
> 标签：google-app-engine, google-cloud-datastore

我正在尝试从某个实体获取父密钥。我有 2 个课程，相册和照片。相册是照片的父级，所以当我上传照片时，我将它所属的某个相册的键作为照片的父级分配。

```
album = db.get(self.album_key)
photo = Photo(parent=album) 
```

当我尝试从照片中查询父 ID 时出现问题。下面的代码只是给了我“父键：<”的输出

```
photo = db.get(photo_key)
photoparent =  photo.parent

self.response.out.write("parent key: %s" %photoparent) 
```

如何从 Photo 实例中正确提取父键？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-07T05:49:50.630

parent 是方法调用，而不是属性。

所以你的代码应该阅读

> photoparent = photo.parent()

请参阅文档[https://developers.google.com/appengine/docs/python/datastore/modelclass#Model_parent](https://developers.google.com/appengine/docs/python/datastore/modelclass#Model_parent)

同样当密钥输出时

> self.response.out.write("父键：%s" %photoparent)

键**str**方法使用 <> 输出对象的表示因此您可能希望对父对象做一些事情以使其 html 输出更加理智;-)

干杯

蒂姆

# php - 如何以随机顺序显示内容？

> ID：14743752
> 
> 赞同：0
> 
> 时间：2013-02-07T04:48:23.653
> 
> 标签：php, mysqli

使用下面的代码，我正在显示从数据库中检索到的问题：

```
 $qandaquery = "SELECT q.QuestionId, q.QuestionNo, q.QuestionContent
                    FROM Question q
                    WHERE SessionId = ?
                    GROUP BY q.QuestionId
                    ORDER BY q.QuestionId";

    $qandaqrystmt=$mysqli->prepare($qandaquery);
    // You only need to call bind_param once
    $qandaqrystmt->bind_param("i",$session);
    // get result and assign variables (prefix with db)
    $qandaqrystmt->execute(); 
    $qandaqrystmt->bind_result($qandaQuestionId,$qandaQuestionNo,$qandaQuestionContent);

    $arrQuestionId = array();
    $arrQuestionNo = array();
    $arrQuestionContent = array();

    while ($qandaqrystmt->fetch()) {
    $arrQuestionId[ $qandaQuestionId ] = $qandaQuestionId;
    $arrQuestionNo[ $qandaQuestionId ] = $qandaQuestionNo;
    $arrQuestionContent[ $qandaQuestionId ] = $qandaQuestionContent;

  }

    $qandaqrystmt->close();

foreach ($arrQuestionId as $key=>$question) {

?>

<div class='lt-container'>
<p><strong>QUESTION <span id="quesnum"></span>:</strong></p>
<p><?php echo htmlspecialchars($arrQuestionNo[$key]) . ": " .  htmlspecialchars($arrQuestionContent[$key]); ?></p>
</div>

<?php

}

?> 
```

现在它说`QUESTION`：

`<p><strong>QUESTION # <?php echo $q; ?> :</strong></p> <?php $q++; ?>`

我希望它留在同一个地方

但是它在哪里显示问题详细信息：

```
<p><?php echo htmlspecialchars($arrQuestionNo[$key]) . ": " .  htmlspecialchars($arrQuestionContent[$key]); ?></p> 
```

我希望它以随机顺序显示问题。因此，例如，如果我有以下 3 个问题：

```
QUESTION 1:

1\. What is 2+2?

QUESTION 2:

2\. What is 3+3?

QUESTION 3:

3\. What is 4+4? 
```

作为示例，它可以按此顺序显示：

```
QUESTION 1:

2\. What is 3+3?

QUESTION 2:

3\. What is 4+4?

QUESTION 3:

1\. What is 2+2? 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T04:49:24.267

而不是`ORDER BY q.QuestionId`使用`ORDER BY RAND()`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T04:50:28.257

该`shuffle()`函数随机化数组中元素的顺序。[阅读更多](http://php.net/manual/en/function.shuffle.php)

例子

```
<?php
$my_array = array("a" => "Dog", "b" => "Cat", "c" => "Horse");

shuffle($my_array);
print_r($my_array);
?>

rray ( [0] => Cat [1] => Horse [2] => Dog ) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-07T04:56:19.360

mysql rand() 函数怎么样

```
$qandaquery = "SELECT rand() as pos, q.QuestionId, q.QuestionNo, q.QuestionContent
                    FROM Question q
                    WHERE SessionId = ?
                    GROUP BY q.QuestionId
                    order by pos"; 
```

# java - 从另一个类调用方法时，该方法中的变量是否必须在调用该方法的类中实例化？

> ID：14743754
> 
> 赞同：0
> 
> 时间：2013-02-07T04:48:32.347
> 
> 标签：java

另一个类似的问题：当调用一个方法（从单独的类）返回一个从另一个类（从单独的类中）派生的值时。我们需要在那个调用方法中实例化派生类的变量吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T05:31:48.633

如果您正在调用另一个类中的方法，则变量已经被实例化。为了调用所述方法，您必须 a) 构造一个新对象，即

```
Object myObject = new Object();
myObject.myMethod(); 
```

或 b) 该方法是静态的，这意味着它已经实例化，您可以将其称为

```
Object.myMethod(); 
```

在任何一种情况下，类使用的变量都会在构造时实例化，而函数本地使用的变量会在调用函数时分配。

# javascript - Javascript 正则表达式匹配维基百科部分文本

> ID：14743757
> 
> 赞同：2
> 
> 时间：2013-02-07T04:48:38.043
> 
> 标签：javascript, regex, wikipedia, wikipedia-api

鉴于维基百科文章的文本（参见[http://test.wikipedia.org/w/index.php?title=Paris&action=raw](http://test.wikipedia.org/w/index.php?title=Paris&action=raw)），我想提取所有需要引用的部分。在 Wikipedia 标记中，需要引用由 表示，`{{Citation needed}}`而章节标题由两个等号表示主要部分（例如`==Section 1==`）或三个等号（例如`===Section 1A===`）表示小节。

**我的正则表达式：**

```
/(={2,3}[^==]+={2,3}[^==]+\{{2}Citation needed[^}}]*\}{2}[^==]*)(={2,3}[^==]+={2,3})?/g 
```

我的正则表达式适用于许多部分，但不适用于其他部分，我不明白为什么。

**匹配**：

> ===法国首都=== [[文件：爱丽舍宫，巴黎 2005.jpg|thumb|right|[[爱丽舍宫]]，[[法国总统|法国总统]]]]] 巴黎是法国国民政府的所在地。对于行政长官来说，这两位首席官员各有自己的官邸，同时也是他们的办公室。[[法国总统]]居住在[[巴黎第八区|第八区]]的[[爱丽舍宫]]，而[[法国总理|总理]]的席位在[[Hôtel Matignon]] 在[[巴黎第七区|第七区]]。政府部门分布在城市的各个地方；许多位于马蒂尼翁附近的第七区。
> 
> 法国议会的两院也位于[[左岸|左岸]]。上院 [[法国参议院|参议院]] 在 [[巴黎第六区|第六区]] 的 [[卢森堡宫]] 举行会议，而更重要的下院 [[Assemblée] Nationale]]，在 [[巴黎第七区|7th]] 的 [[Palais Bourbon]] 见面。[[法国参议院议长名单|参议院议长]]是法国仅次于共和国总统的第二高公职人员，居住在“小卢森堡”，是[[Palais]的一个较小的宫殿附属建筑。卢森堡]]。{{需要引用|日期=2010 年 6 月}}

不**匹配**：

> ===社区间=== 上述变化中很少有考虑到巴黎作为[[聚集]]的存在。与 [[Lille]] 和 [[Lyon]] 等法国大部分主要城市地区不同，巴黎市区没有 [[commune in France#Intercommunality|intercommunal]] 实体，没有处理整个地区密集的城市核心；巴黎对其郊区的疏离在今天确实是一个问题，许多人认为 {{Who|date=April 2011}} 是内乱的主要原因，例如 2005 年的郊区骚乱。这些不幸事件的直接结果是更有效的大都市结构以覆盖巴黎市和一些郊区的提议，从松散的“大都会会议”的社会主义理念（''
> 
> 这种不一致的主要原因之一是法国政府在如此巨大的聚集地面前感到恐惧，并渴望挖掘其财富。{{需要引用|date=2011 年 4 月}} 自中世纪以来，特别是自 1649 年的麻烦（拉弗朗德）以来，巴黎一直被认为是危险的源头。威权国王路易十四将凡尔赛建造为新的政治中心，远离危险的城市人群。国家与城市之间的冲突随着 1871 年革命（公社）达到高潮：波尔多的法国议会决定巴黎不再是首都，而巴黎公社则讨论宣布巴黎独立于法国。自那时候起，法国中央集权国家的基础之一是广泛分配巴黎的财富，同时剥夺集聚区并将其划分为 8 个部门和 1200 个公社。（有关对巴黎长期敌意的分析，请参阅 [http://www-ohp.univ-paris1.fr/] {{Verify source|date=April 2011}}）。在法国的 22 个大都市地区中，有 19 个定期获得补贴——主要来自巴黎的资源——而巴黎郊区则缺乏必要的设备。

我的正则表达式有什么问题？

## 编辑：下面的新工作正则表达式！

```
/(={2,3}((?!==).)+={2,3}((?!==)[^])+\{{2}Citation needed((?!}})[^])*\}{2}((?!==)[^])*)/g 
```

说明：匹配任何节或小节标题（==Section== 或 ===Subsection===），后跟不是两个等号的任何内容，然后是类似 {{Citation needed}} 的字符串，然后是其他所有内容那不是两个等号。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T05:21:37.353

问题来自这样的序列：`{{Who|date=`. 您用于匹配标题和 {{Citation Needed}} 之间的文本的代码在遇到`=`

# ruby - 初始化 `Time` 的子类

> ID：14743760
> 
> 赞同：2
> 
> 时间：2013-02-07T04:48:50.463
> 
> 标签：ruby, time

我想创建一个 的子类`Time`，比方说`MyTime`，这样我就可以定义（尤其是与格式相关的）方法而不会污染`Time`类。

```
class MyTime < Time; end 
```

对于在 上定义的一些构造方法`Time`，我可以`MyTime`像这样使用它们：

```
MyTime.now 
```

但有时我需要`MyTime`基于`Time`. 例如，我想要一个`MyTime`基于的实例​​：

```
File.mtime(path_to_some_file) 
```

这是一个`Time`例子。构造函数`Time#new`不接受`Time`实例，所以我不能使用它。我该怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-07T05:21:54.403

该类`Time`有一个将实例作为参数的[`at`](https://ruby-doc.org/core/Time.html#method-c-at)类方法：`Time`

> **在（时间）→ 时间**
> [...]
> 
> 使用 time 给定的值创建一个新的时间对象*，* [...]

所以你可以这样说：

```
>> class MyTime < Time; end
>> mt = MyTime.at(File.mtime(path_to_some_file))
>> mt.class
=> MyTime 
```

因此，将 a 转换`Time`为 a`MyTime`是一个简单的调用问题`MyTime.at`。

# java - 从响应 + java Web 服务获取标头字段值的问题

> ID：14743761
> 
> 赞同：0
> 
> 时间：2013-02-07T04:49:00.897
> 
> 标签：java, web-services

我正在使用 NetBeans IDE 编写 Web 服务客户端。我已经使用 WSDL 添加了 web 服务源，对于其中一种方法，响应 POJO 类仅包含两个参数：

```
@XmlAccessorType(XmlAccessType.FIELD)
@XmlType(name = "WithdrawTicket")
public class WithdrawTicket {

@XmlAttribute(name = "firstName")
protected String firstName;
@XmlAttribute(name = "lastName")
protected String lastName;
... //getters and setters 
```

响应 XML 在正文部分包含两个字段（名字和姓氏），还包含标题部分。标头部分包含用私钥和证书签名的 XML 正文以及正文的摘要值。我必须验证传入的 XML，我的问题是如何在 Header 部分获取字段值？提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T04:52:12.483

您可以定义一个 SOAP 处理程序来完成这项工作，或者只是在 SOAPMessage 实例上发出一个 .getHeader() 。详细[在这里](http://www.intertech.com/Blog/Post/Working-with-Headers-in-JAX-WS-SOAPHandlers.aspx)

# javascript - jquery .on() 触发事件两次

> ID：14743765
> 
> 赞同：1
> 
> 时间：2013-02-07T04:49:23.600
> 
> 标签：javascript, jquery

我有一些动态生成的表单字段。我想根据刚刚更改的值更新输入字段。摆弄下面的代码后，事件似乎触发了两次（因为警报触发了两次）。第一次触发改变了我想要的文本字段，但是在第二次触发时将其更改为零。为什么下面的代码会触发两次？我怎样才能防止这种情况？

咖啡脚本

```
$(document).on 'change','#qty', ->
  $('#amount').val($(this).val())
  alert($(this).val()) 
```

相当于上面的Javascript

```
$(document).on('change', '#qty', function() {
  $('#amount').val($(this).val());
  return alert($(this).val());
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T05:54:06.350

功能没有问题`on()`。看到[这个小提琴](http://jsfiddle.net/saeedneamati/f35HX/)。

编码：

```
$('body').append($('<input>').attr('id', 'dynamic'));
$(document).on('keyup', '#dynamic', function(e) {
    console.log(e, e.target);
    /*
    Since all functions in JavaScript has a return value, 
    and if you don't specify them they would default to undefined, 
    thus you might return something explicitly here. 
    But it has no effect upon the execution of the on() function.
    */
}); 
```

我猜你绑定了偶数处理程序两次。这是最有可能的情况。为了测试这一点，我建议您首先使用 . 检查附加到`#dynamic`元素的处理程序`$('#dynamic').data('events')`。如果它是未定义的，那么你还没有绑定任何处理程序，但如果它返回一个对象，那么你已经绑定了一些事件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T04:57:04.773

由于每次添加元素时都在运行代码，因此只需直接绑定到它。

```
$("#qty").on("change",... 
```

# mysql - 计算来自多个表的数据

> ID：14743770
> 
> 赞同：1
> 
> 时间：2013-02-07T04:49:40.110
> 
> 标签：mysql, sql

我有三个表：用户、问题和操作。这些保存与用户在教程网站上回答问题有关的数据。一旦他们回答了足够多的问题，他们就会进入新的问题部分。他们不断地从未回答的问题池中以随机顺序请求问题，直到他们全部完成。

如果用户没有为该部分获得足够的正确问题，并且该特定部分的数据库中的问题总数不足，我的代码需要循环返回并再次以随机顺序为他们提供所有部分的问题。

直到那时我一直在使用这个查询，

```
 SELECT action_int
    FROM actions
    WHERE user_id = '".$this->id."'
    AND action_type = 'given_question'
    AND action_details = 'weekly'
    AND action_int IN (
        SELECT action_int
        FROM actions
        WHERE user_id = '".$this->id."'
        AND action_type = 'answered_question'
        )
    AND action_int IN (
        SELECT id
        FROM questions
        WHERE section_id = '".$this->current_section."'
        ) 
```

action_int 是存储在操作表中的问题 ID。这将在用户当前部分返回所有已回答的问题，但如果代码已循环返回，则不会重复。

所以，我解决这个问题的第一种方法是，我想查询数据库，以便找出用户回答的每个问题，计算他回答了这个独特问题的次数（以防他们之前循环了所有问题） , 并从 count 最小 (MIN()) 的值中随机选择一个问题 id。

我已经试了，

```
SELECT q.id, a.count
FROM questions q

LEFT JOIN (
SELECT
    action_int AS id, count(action_int) AS 'count'
FROM
    actions
WHERE
    action_type = 'answered_question'
GROUP BY action_int) a
ON  a.id = q.id 
```

返回，

```
id  count

14  2
16  3
17  3
11  null
13  null
15  null
18  1
12  1
19  null 
```

这通常是我所追求的。

所以问题，

1.  有一个更好的方法吗？也许这样如果一个问题还没有得到回答，它会返回 0 而不是 null？
2.  如果我只想计算用户当前部分中已回答的问题（作为 section_id 存储在问题中，作为 current_section 存储在问题中），如何从部分编号返回仅包含 [id, count] 个问题的列？

# java - 如何根据行和列写入文件

> ID：14743772
> 
> 赞同：0
> 
> 时间：2013-02-07T04:49:48.040
> 
> 标签：java, list, text-files, converter

你能帮我写代码吗？我想将 List 转换为 text.txt 格式应该如下：

```
private List<String>expDelLst =null;   
expDelLst = new ArrayList<String>();
expDelLst = loginCountryBusServ.getExportDetails(userVO.getCtryCd());

FileWriter fos = new FileWriter("c:/data.txt");
PrintWriter out = new PrintWriter(fos);

for (int i = 0; i < expDelLst.size(); i++) {
out.write(StringUtils.join((Object[]) expDelLst.toArray()[i],"|"));
}
out.close();

and the how out put should be as: in text file.
F590|F590|CDG|590|FRDD|ESI|H|FR|GB|||11111111|598|598|T12|2012-12-20 12:10:30|
F590|F590|CDG|590|FRDD|ESU|W|FR|GB|||11111111|598|598|T12|2012-12-20 12:10:30|
F590|F590|CDG|590|FRDD|ESI|H|FR|FR|CDG|102|11111111|LF2|LF2|T33|2012-12-20 12:15:32|
F590|F590|CDG|590|FRDD|ESU|W|FR|FR|CDG|102|11111111|LF2|LF2|T33|2012-12-20 12:15:32|
F590|F590|CDG|590|FRDD|ESI|H|FR|FR|TLS|335|11111111|LF2|LF2|T57|2012-12-20 12:18:32|
F590|F590|CDG|590|FRDD|ESU|W|FR|FR|TLS|335|11111111|LF2|LF2|T57|2012-12-20 12:18:32|
F590|F590|CDG|590|FRDD|ESI|H|FR|FR|CDG|102|11111111|LF2|T33|B08|2012-12-20 12:25:52|
F590|F590|CDG|590|FRDD|ESU|W|FR|FR|CDG|102|11111111|LF2|T33|B08|2012-12-20 12:25:52| 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T06:28:03.273

[FileUtils.writeLines（（文件文件，集合行）](http://commons.apache.org/io/api-release/org/apache/commons/io/FileUtils.html#writeLines%28java.io.File,%20java.util.Collection%29)怎么样

# mysql - MySQL 联合计数

> ID：14743773
> 
> 赞同：1
> 
> 时间：2013-02-07T04:49:49.283
> 
> 标签：mysql, count, group-by, union

首先让我展示我的表格数据，然后我将解释我的问题。

**MySQL 表结构**

```
CREATE TABLE more_tags (
tag_id INT UNSIGNED NOT NULL AUTO_INCREMENT,
more_id INT UNSIGNED NOT NULL,
user_id INT UNSIGNED NOT NULL,
tag_name VARCHAR(255) NOT NULL,
PRIMARY KEY (tag_id),
UNIQUE KEY (more_id, user_id, tag_name)
);

CREATE TABLE tags(
tag_id INT UNSIGNED NOT NULL AUTO_INCREMENT,
another_id INT UNSIGNED NOT NULL,
user_id INT UNSIGNED NOT NULL,
tag_name VARCHAR(255) NOT NULL,
PRIMARY KEY (tag_id),
UNIQUE KEY (another_id, user_id, tag_name)
); 
```

**more_tads 表数据**

```
tag_id  tag_name
10      apple 
192     apple 
197     apple 
203     apple 
207     apple 
217     news 
190     bff
196     cape 
```

**标签表数据**

```
tag_id  tag_name
1       apple 
2       time 
3       bff 
```

好的，我之前问了一些类似的问题。但现在由于某种原因，我无法让查询计算两个表中的标签，它只计算一个表中的标签，如下例所示

**当前输出**

```
tag_id  tag_name    num
1       apple       5
2       bff         1
3       cape        1
4       time        1 
```

但是我想对所有类似的标签进行分组，并计算它们在表格中出现的次数，如下例所示

**期望的输出**

```
tag_id  tag_name    num
1       apple       6
2       bff         2
3       cape        1
4       time        1 
```

**当前的 MySQL 查询**

```
SELECT *
FROM(SELECT `more_tags`.`tag_id`, `more_tags`.`tag_name`, COUNT(`more_tags`.`tag_name`) as 'num' 
FROM `more_tags` 
INNER JOIN `users` ON `more_tags`.`user_id` = `users`.`user_id` 
WHERE `users`.`active` IS NULL 
AND `users`.`deletion` = '0' 
GROUP BY `more_tags`.`tag_name`
UNION(
SELECT `tags`.`tag_id`, `tags`.`tag_name`, COUNT(`tags`.`tag_name`) as 'num' 
FROM `tags` 
INNER JOIN `users` ON `tags`.`user_id` = `users`.`user_id` 
WHERE `users`.`active` IS NULL 
AND `users`.`deletion` = '0' 
GROUP BY `tags`.`tag_name`))
AS table_1 
GROUP BY `tag_name`  
ORDER BY `tag_name` ASC 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T05:23:06.273

这将输出您想要的结果。只需在子查询中添加用户联接。

```
SELECT a.tag_id, a.tag_name, SUM(a.num)
FROM (
     SELECT tag_id, tag_name, SUM(1) as num  FROM tags
        GROUP BY tag_name
     UNION
     SELECT tag_id, tag_name, SUM(1) as num  FROM more_tags
        GROUP BY tag_name
      ) a
GROUP BY a.tag_name 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T05:14:56.077

您想要的输出中的 tag_id 对我来说真的没有意义。没有它，这就是你如何得到你所要求的：

```
SELECT tag_name, SUM(num)
FROM(SELECT `more_tags`.`tag_name`, COUNT(*) as 'num' 
FROM `more_tags` 
INNER JOIN `users` ON `more_tags`.`user_id` = `users`.`user_id` 
WHERE `users`.`active` IS NULL 
AND `users`.`deletion` = '0' 
GROUP BY `more_tags`.`tag_name`
UNION ALL
SELECT `tags`.`tag_name`, COUNT(*) as 'num' 
FROM `tags` 
INNER JOIN `users` ON `tags`.`user_id` = `users`.`user_id` 
WHERE `users`.`active` IS NULL 
AND `users`.`deletion` = '0' 
GROUP BY `tags`.`tag_name`)
AS table_1 
GROUP BY `tag_name`  
ORDER BY `tag_name` ASC 
```

删除用户逻辑的 SQL Fiddle 演示关键点：[http ://sqlfiddle.com/#!2/ea44d/2](http://sqlfiddle.com/#!2/ea44d/2)

另外不要忘记 UNION **ALL**和**SUM**是您问题中缺少的关键部分。如果没有 UNION ALL，当某些行不在我在小提琴中给出的示例中时，它们可能会被拒绝为重复行。

# emacs - Emacs CUA 矩形：如何防止旧矩形再次出现？

> ID：14743775
> 
> 赞同：1
> 
> 时间：2013-02-07T04:49:52.860
> 
> 标签：emacs

命令序列

1.  **C-返回**
2.  移动光标创建矩形
3.  决定这个矩形不是我想要的**C-return**
4.  再次按**C-return ，原始矩形重新出现。**

这是不受欢迎的行为。我怎样才能关闭它？

# maven - 如何告诉子模块上的 Maven 程序集仅包含该模块所需的依赖项？

> ID：14743777
> 
> 赞同：1
> 
> 时间：2013-02-07T04:50:09.010
> 
> 标签：maven, dependencies, maven-assembly-plugin, multi-module

我正在使用这些模块开发一个多模块 Maven 项目

```
parent
  |-- restful    // this is a jersey restful service as a WAR
  |-- shared     // some stuff shared by all other modules as a jar
  |-- cl-client  // a commandline client to the restful service, needs assembly 
```

父 pom.xml 使用 dependencyManagement 列出所有模块使用的所有依赖项

cl-client 的 pom 包含程序集插件，配置为在打包阶段执行：

```
 <plugin>
      <artifactId>maven-assembly-plugin</artifactId>
      <version>2.4</version>
      <executions>
        <execution>
          <id>distro-assembly</id>
          <phase>package</phase>
          <goals>
            <goal>single</goal>
          </goals>
          <configuration>
            <descriptors>
              <descriptor>src/main/assembly/assembly.xml</descriptor>
            </descriptors>
          </configuration>
        </execution>
      </executions>
    </plugin> 
```

和 assembly.xml 如下：

```
<assembly>
  <id>commandlinable</id>
  <formats>
    <format>dir</format>
  </formats>
  <includeBaseDirectory>false</includeBaseDirectory>
  <moduleSets>
    <moduleSet>
      <useAllReactorProjects>true</useAllReactorProjects>
      <includes>
        <include>my:cl-client</include>
      </includes>
      <binaries>
        <outputDirectory>${artifactId}</outputDirectory>
        <unpack>true</unpack>
        <dependencySets>
          <dependencySet>
            <outputDirectory>${artifactId}/lib</outputDirectory>
            <useProjectArtifact>true</useProjectArtifact>
            <unpack>false</unpack>
            <scope>runtime</scope>
          </dependencySet>
        </dependencySets>
      </binaries>
    </moduleSet>
  </moduleSets>
</assembly> 
```

当我运行`mvn package`时，cl-client 模块组装得很好并确实创建了我希望的目录，但唯一的问题是所有依赖项 jar 都复制到 lib/ 目录中，即使是那些仅由“restful”使用的与球衣相关的 jars 等模块。我试图翻转`useProjectArtifact`旗帜，但似乎没有任何区别。

所以我只是想知道是否有办法告诉 Maven 程序集只包含 cl-client 模块所需的 jar。我在多模块项目的 Maven 程序集上浏览了相当多的在线资源，但无法得到任何明确的答案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-30T07:56:19.767

使用该`mvn dependency:tree`命令了解模块之间存在哪些依赖关系。你可能会发现一个工件对球衣有传递依赖，这就是它被包含在内的原因。

# sql - 将此 SQL 查询转换为 AREL（外连接）

> ID：14743780
> 
> 赞同：0
> 
> 时间：2013-02-07T04:50:35.250
> 
> 标签：sql, ruby, ruby-on-rails-3, activerecord, arel

我正在尝试将此查询转换为 AREL：

```
SELECT users.* FROM users LEFT OUTER JOIN (
      SELECT DISTINCT educations.user_id
      FROM educations
      INNER JOIN schools
      ON educations.school_id = schools.id
      WHERE schools.name = "school_name" ) AS x 
ON users.id = x.user_id WHERE x.user_id IS null 
```

我希望能够像这样链接这个查询：

```
class User < ActiveRecord::Base
  def find_by_school(school_name)
    ...
  end
end

myUser.find_by_school("school_name").where(...).joins(...)...etc 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T08:19:52.427

虽然这个问题有点过时，但我不知何故偶然发现了它......

如果我正确理解您的查询，您希望获得某所学校的所有未受过教育的用户......

如果是这样，我会走以下路线 - 鉴于您的关系都已正确设置：

```
class User < ActiveRecord::Base
  def self.find_educated_by_school_name(school_name)
    Education.pluck(:user_id).joins(:schools).where('schools.name = ?', school_name)
  end
end

User.where('users.id NOT IN (?)', User.find_educated_by_school_name('school_name')) 
```

还要记住，按照惯例，`myUser.find_by_*`这意味着“在给定的**用户实例**上查找某些东西”。因此，它应该利用用户实例来查找某些东西。

而`User.find_by_*`意思是“根据特定标准找到一般用户”。

希望我的意思很清楚！

# jquery - Jquery mobile listview autodividersSelector

> ID：14743781
> 
> 赞同：2
> 
> 时间：2013-02-07T04:50:38.873
> 
> 标签：jquery, jquery-mobile

我一直在网上（和这里）搜索，似乎无法弄清楚发生了什么。我有一个 jquery mobile (1.2) 页面，其中包含列表视图上的几个项目。我为每个 [li] 标签添加了一个自定义属性，并根据 jquery 移动演示将其设置为自动分隔符。

HTML

```
<div data-role="page" id="ScheduleDay">
<div data-role="header">
    <a href="#HomePage" data-icon="home" data-direction="reverse">Home</a>      
    <h1 id="ScheduleDayText">Schedule</h1>
</div>
<div data-role="content">   
    <ul data-role="listview" id="ScheduleList">
        <li time="3:30PM"><a href="#">Event 1</a></li>
        <li time="3:30PM"><a href="#">Event 2</a></li>
        <li time="4:30PM"><a href="#">Event 3</a></li>
   </ul>
</div>
</div> 
```

查询

```
$("#ScheduleList").listview({
autodividers: true,
autodividersSelector: function ( li ) {
    var out = li.attr('time');]
    return out;
}
});
$('#ScheduleList').listview('refresh'); 
```

我创建了一个[jsfiddle](http://jsfiddle.net/pYYAu/7/)来展示我想要完成的工作。

我似乎无法让分隔线出现，而且我确信我忽略了一些相当小的东西（或者完全错过了这艘船——我对 jquery 还是很陌生）。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-07T06:53:31.170

为了使它工作：

1.  仍然需要`data-autodividers="true"`在您的`<ul>`
2.  将代码放入适当的 jQM 处理程序`pageinit()`或`pagebeforeshow()`
3.  <中有一个错字`var out = li.attr('time');]`——你不需要最后的括号

话虽如此，您的列表视图的标记将如下所示：

```
<ul data-role="listview" id="ScheduleList" data-autodividers="true">
</ul> 
```

和 JS 代码将如下所示：

```
$(document).on("pageinit", "#ScheduleDay", function(){
    $("#ScheduleList").listview({
        autodividers: true,
        autodividersSelector: function (li) {
            var out = li.attr("time");
            return out;
        }
    }).listview("refresh");
}); 
```

这是[jsFiddle](http://jsfiddle.net/pmatseykanets/4fGT6/)

# php - 使用 MySQL 将数据插入我的数据库时出错

> ID：14743783
> 
> 赞同：-2
> 
> 时间：2013-02-07T04:50:45.710
> 
> 标签：php, mysql

我正在编写一个脚本以将用户添加到 PHP 中的数据库。在添加任何花哨的东西之前，我想先了解一下基础知识。请注意我是 PHP 新手，我知道我不应该使用 mysql_query 而我应该使用 PDO，但我想确保我有一些可以依赖的东西。

我得到的错误是：您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 6 行的 '' 附近使用正确的语法

我的查询如下：

```
$query = "INSERT INTO users(`username`,`password`,`email`,`regdate`,`isadmin`) VALUES(
`" . mysql_real_escape_string($data['fusername']) . "`,
`" . md5(sha1($data['fpass'])) . "`,
`" . mysql_real_escape_string($data['femail']) ."`,
`NOW()`,
`1`"; 
```

（请原谅密码散列，我稍后会添加盐）

我正在执行它：

```
$sql = mysql_query($query);

if(!$sql)
{
    die("Account was unsuccessfully created: " . mysql_error());
} 
```

我尝试将 $sql 添加到 die()，但它似乎返回空白。

我已经尝试删除反引号，用单引号替换它们，在 users() 函数中没有反引号 - 它们都不起作用。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T04:54:01.937

应该是这样的。希望它会帮助你。

```
$query = "INSERT INTO users(username,password,email,regdate,isadmin) VALUES(
'".mysql_real_escape_string($data['fusername'])."',
'".md5(sha1($data['fpass']))."',
'".mysql_real_escape_string($data['femail'])."',
'NOW()',
'1'"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T04:54:37.340

无需在值中包含块引号。每当您遇到错误时，请检查您的查询两次或三次。你可以试试这个

```
$query = "INSERT INTO users(`username`,`password`,`email`,`regdate`,`isadmin`) 
    VALUES('". mysql_real_escape_string($data['fusername']) . "', '" . md5(sha1($data['fpass'])) . "', '" . mysql_real_escape_string($data['femail']) ."', NOW(), '1')"; 
```

注意： mysql_real_escape_string 是不推荐使用的函数。 [http://php.net/manual/en/function.mysql-real-escape-string.php](http://php.net/manual/en/function.mysql-real-escape-string.php)

# java - 在控制台中打印ExamQuestion@143c8b3

> ID：14743784
> 
> 赞同：0
> 
> 时间：2013-02-07T04:50:51.200
> 
> 标签：java, class, methods, println, main-method

我有一个类，它有一个采用字符串的方法。然后我有一个方法返回上述方法的值。当我在我的主类中获得返回值并打印它时，打印的值为“ExamQuestion@143c8b3”。如何让它正确打印？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T04:53:49.960

您应该让 ExamQuestion 覆盖 toString()。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-07T04:58:28.773

每当您获得格式“@”时，这就是对象的 toString() 方法的默认格式。

来电`System.out.println(question);`来电`ExamQuestion.toString()`。如果方法没有被覆盖，超类中的版本将被调用，在这种情况下它将是`Object`的版本。

所以这就是你得到 ExamQuestion@143c8b3 的原因。

要解决此问题，请将以下方法放入您的 ExamQuestion 类中：

```
public String toString() {
    // return a string that means something here
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-07T04:56:31.007

您看到的输出是 java 如何将对象表示为字符串。

默认行为是：

```
this.getClass().getSimpleName() + "@" + Integer.toHexString(this.hashCode()); 
```

如果您希望对象的字符串表示更清晰，则应覆盖`toString()`类中的方法。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-07T05:04:52.220

这是@ValekHalfHeart 在他的回答中解释的默认行为。

如果要打印对象的内容，则需要覆盖`toString`类中的方法。

说我有这个代码：

```
class MyClass{
   int a,b;
} 
```

因此，当我创建此类的对象并将其传递给`println`：

```
public static void main(String args[]){
  MyClass m = new MyClass();
  m.a = 20;
  m.b = 30;
  System.out.println(m);
} 
```

`MyClass@143c8b3`它会像你的情况一样打印一些东西。

所以现在，如果我想要，每当我将对象传递给它时，`println`它应该打印一些其他的东西，比如我的变量的值，`a`并且`b`应该被打印出来。

然后我应该覆盖`tostring`方法`MyClass`：

```
class MyClass{
   int a,b;

   public String toString(){
     return "MyClass values: a = "+a+" and b = "+b;
   }
} 
```

所以现在当我说这个

```
public static void main(String args[]){
  MyClass m = new MyClass();
  m.a = 20;
  m.b = 30;
  System.out.println(m);
} 
```

它要打印`MyClass values: a = 20 and b = 30`

所以你必须为你的`ExamQuestion`班级这样做

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-07T05:01:22.090

所有类都（隐式）继承自`Object`，它具有`toString()`方法，其实现正在产生您所看到的输出。

要获得有意义的字符串表示，您必须*重写*此方法以提供适合您的类的实现。

# sql - SQL Where Exists 不过滤？

> ID：14743785
> 
> 赞同：2
> 
> 时间：2013-02-07T04:50:52.793
> 
> 标签：sql, sql-server, tsql, sql-server-2005-express

> System.Data.SqlClient.SqlException (0x80131904)：违反唯一键约束“AK_SeqNo”。无法在对象“dbo.SeqNo”中插入重复键。

我随机收到上述 SQL Server 2005 Express 错误。从下面的存储过程中可能每 3 周一次。谁能明白为什么？

```
CREATE PROCEDURE [dbo].[mspResetSeqNo] @Today DATETIME
AS 
BEGIN
  SET NOCOUNT ON;

  DECLARE @DateSrc DATETIME
  DECLARE @MyGUID UNIQUEIDENTIFIER

  -- Check Input is Valid
  IF @Today IS NULL 
     BEGIN
           RAISERROR (N'@Today cannot be NULL', 10, 1); 
           RETURN 1;
     END

  -- Chop off the time part:
  SET @DateSrc = DATEADD(d, 0, DATEDIFF(d, 0, @Today));

  -- Get Current Location GUID
  SET @MyGUID = dbo.MyGUID();

  -- If this is the first entry for the day then initialise
  INSERT INTO dbo.SeqNo(MyGUID, TheDay, LastNo)
  SELECT @MyGUID, @DateSrc, 0
  WHERE NOT EXISTS ( 
      SELECT 1 FROM dbo.SeqNo AS sn
      WHERE sn.MyGUID = @MyGUID AND sn.TheDay = @DateSrc 
      );

  RETURN(0);
END 
```

AK_SeqNo 的约束是：

```
ALTER TABLE [dbo].[SeqNo] ADD CONSTRAINT [AK_SeqNo] UNIQUE NONCLUSTERED 
(
[TheDay] ASC,
[MyGUID] ASC
)WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, SORT_IN_TEMPDB = OFF, IGNORE_DUP_KEY = OFF, ONLINE = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY] 
```

这两种数据类型的表列是：

```
[MyGUID] [dbo].[DForeignKey] NOT NULL,
[TheDay] [datetime] NOT NULL, 
```

用户定义的类型 DForeignKey 是：

```
CREATE TYPE [dbo].[DForeignKey] FROM [uniqueidentifier] NULL 
```

MyGUID() 函数只是检索本地系统 ID。每个位置都有不同的 ID。

```
CREATE FUNCTION [dbo].[MyGUID]()
RETURNS uniqueidentifier
AS
BEGIN
DECLARE @me as uniqueidentifier
SELECT @me = MyGUID FROM Self
RETURN @me
END 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T06:02:06.827

问题是并发问题。单实例检查移至调用此存储过程的代码点之后。谢谢你的帮助。至少我学到了 2 更多关于 t-sql 函数的知识。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T23:26:46.187

这是将记录添加到表中的唯一方法吗？

我也将`CONVERT`用于我的比较，如下所示：

```
 INSERT INTO dbo.SeqNo(MyGUID, TheDay, LastNo)
  SELECT @MyGUID, @DateSrc, 0
  WHERE NOT EXISTS ( 
      SELECT 1 FROM dbo.SeqNo AS sn
      WHERE sn.MyGUID = @MyGUID
      AND
      CONVERT(VARCHAR(11), sn.TheDay, 101) = CONVERT(VARCHAR(11), @Today, 101)
      ); 
```

这使您不必将中间值存储在变量中。

# iphone - UITextField 文本没有出现在中心

> ID：14743786
> 
> 赞同：11
> 
> 时间：2013-02-07T04:50:55.627
> 
> 标签：iphone, ios, objective-c

我只是使用a `UITextField`，问题是`UITextField`不出现在**中心**的文本。它位于我的textField的顶部位置。是否有任何我遗漏的默认设置。

提前致谢。

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2013-02-07T04:57:47.540

对于垂直对齐：

```
textField.contentVerticalAlignment = UIControlContentVerticalAlignmentCenter; 
```

垂直和水平居中：

```
theTextField.contentVerticalAlignment = UIControlContentVerticalAlignmentCenter;
theTextField.textAlignment = NSTextAlignmentCenter; 
```

在父容器中居中：

```
YourTextFieldName.center = parentViewField.center; 
```

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2014-02-09T12:58:23.053

从 iOS6 及更高版本开始， Constant`UITextAlignmentCenter`现在已被弃用。

你应该使用：

```
textField.textAlignment = NSTextAlignmentCenter; 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2018-08-28T17:52:28.237

斯威夫特 4：

```
// vertical alignment
textField.contentVerticalAlignment = .center

// horizontal alignment
textField.textAlignment = .center 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-02-16T12:27:52.120

**为了迅速**

垂直对齐使用

```
textField.contentVerticalAlignment = UIControl.ContentVerticalAlignment.center 
```

水平对齐使用

```
quantity.textAlignment = NSTextAlignment.center 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-07T05:35:06.357

```
textField.contentVerticalAlignment = UIControlContentVerticalAlignmentCenter; 
```

这一行代码对我来说非常完美

# python - Python super(Class, self).method vs super(Parent, self).method

> ID：14743787
> 
> 赞同：8
> 
> 时间：2013-02-07T04:51:18.600
> 
> 标签：python, inheritance, parent, super

这个问题来自以下[问题](https://stackoverflow.com/questions/14739809/django-overwriting-modelform-save-causes-recursion)，假设`class B`扩展`class A`

```
class A(object):
  def do_work(self):
    print 123

class B(A):
  def do_work(self):
    super(B,self).do_work() # versus the next statement
    super(A,self).do_work() # what's the difference? 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-02-07T04:59:17.820

```
super(B,self).do_work() 
```

将调用`do_work`父类所看到的函数`B`- 即`A.do_work`.

* * *

```
super(A,self).do_work() 
```

将调用-`do_work`的父类所看到的函数（它可能不存在，因此可能会引发异常）。`A``object.do_work`

# java - 从shell脚本获取值到java

> ID：14743788
> 
> 赞同：0
> 
> 时间：2013-02-07T04:51:22.813
> 
> 标签：java, shell

我有一个这样的shell脚本。

```
 #!/bin/sh

s=$1
pro=`ps -ef | grep $s | grep -v grep | grep -v test3.sh`
pro1=`ps -ef | grep $s | grep -v grep | grep -v test3.sh | wc -l`

echo $pro
echo $pro1

if [ $pro1 -eq 0 ]
    then
            echo "Service $s is DOWN..."
            echo "Service $s is DOWN..." >> processlogs.txt
            echo "Starting Service $s..."
            echo "Starting Service $s..." >> processlogs.txt
            java -jar clientApplication.jar "$s" &
            exit 0

    else
            echo "Service $s is Running..."
            echo "Service $s is Running..." >> processlogs.txt

   fi 
```

现在我想将 $s 的值传递给 java 程序。我应该为此做些什么。谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-07T04:57:17.897

这个...

```
Process p = Runtime.exec("myExeOrShellScript");
BufferedReader r = new BufferedReader(new InputStreamReader(p.getInputStream()));
String line;
while ((line = r.readLine())!=null) {
  // got the output in 'line' do something with it
}
r.close(); 
```

无论您在 shell 脚本中抽出什么，`echo`都将最终出现在 java 程序中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T04:53:06.530

检查参数：

```
public static void main(String[] args) 
```

# c++ - 时间增量的c ++谐波值

> ID：14743792
> 
> 赞同：0
> 
> 时间：2013-02-07T04:52:08.153
> 
> 标签：c++, algorithm, math

我有一个以毫秒为单位的计数器，在正常程序执行期间总是增加。我希望以数学方式将此计数器转换为谐波值：

```
float getHarmonicTime(int currentTime, int periodInMilliSeconds)
{
    // Some cool algorithm here
} 
```

此函数将在给定期间返回介于 -1 和 1 之间的浮点值，如下所示：

```
-1...-0.5...0...0.5...1...0.5...0...-0.5...-1 
```

我将如何在 c/c++ 中以算法和高效的方式执行此操作？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T05:01:13.017

您可能正在寻找的公式是`sin( 2 * M_PI * currentTime / period )`.

# icloud - 如何从 Caldav 客户端为 iCloud 日历删除重复的事件条目

> ID：14743799
> 
> 赞同：0
> 
> 时间：2013-02-07T04:52:50.260
> 
> 标签：icloud, webdav, icalendar, caldav

我正在为*Caldav 客户端*工作`iCloud Calendar`。当我们请求日历列表时，很少有如下日历在`iCloud`界面中不可见。

```
/calendars/notification/, /calendars/tasks/, /calendars/inbox/ 
```

与普通日历一样。

```
/calendars/home/, /calendars/work/ 
```

问题是主日历中的某些*事件*也在收件箱日历中重复。创建此案例邀请某人参加*活动*，因此此*活动*将出现在他的主日历和收件箱日历中。

我们怎样才能删除这些**重复的条目**。我们可以忽略这样的日历吗？如果可以，如何获取不可见日历的列表？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T07:33:21.160

发出 PRPOPFIND 请求时，您应该询问 DAV:resourcetype 属性。在来自服务器的响应中，正确的日历将在此属性中有一个 CALDAV:calendar 子元素（请参阅[https://www.rfc-editor.org/rfc/rfc4791#section-4.2](https://www.rfc-editor.org/rfc/rfc4791#section-4.2)），而收件箱将有一个 CALDAV:schedule -inbox 子元素（参见[https://www.rfc-editor.org/rfc/rfc6638#section-2.2](https://www.rfc-editor.org/rfc/rfc6638#section-2.2)）并且通知可能还有另一个值。

任务日历可能是包含 VTODO 的真实日历。

至于“重复事件”，这些不是实际的 CalDAV 日历资源，而是[iTIP 消息](https://www.rfc-editor.org/rfc/rfc5546)（邀请，还有回复和取消消息）。您可以使用它们通知您的用户他已收到邀请或与会者已回复他发送的邀请。

# jquery - jQuery 中的讨论板

> ID：14743801
> 
> 赞同：-1
> 
> 时间：2013-02-07T04:52:59.853
> 
> 标签：jquery

我使用 jQuery 和 PHP 创建了一个讨论板。它的动态。但是要获得更新，我不知道该怎么做。当新帖子和/或新回复出现时，我将如何更新页面？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T04:57:31.013

您可以每隔几秒钟请求 [ajax request] 服务器并将结果更新到您的讨论板。为此，您可以使用`setTimeInterval`JavaScript 函数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T05:02:41.587

根据您的页面使用代码

```
<div id="results"></div>

<script>
callAjax=function(){
   $.ajax({
      url: 'data.php',
      success: function(data){$('#results').html(data);}
   });
}
setInterval(function(){callAjax()},3000);//update data in every 3 seconds

</script> 
```

# c# - 有没有办法调用方法 () 通过从一个对象定义 T？

> ID：14743804
> 
> 赞同：0
> 
> 时间：2013-02-07T04:53:09.347
> 
> 标签：c#, generics

我正在尝试调用我创建的通用方法，称为`LoadItems<T>()`. `List<T>`此方法对从数据库返回的项目执行一系列操作。

我遇到的问题是调用该`LoadItems<T>()`方法。我所要处理的只是一个对象。我想将此对象解析为 T 以便我可以调用我的方法。

以伪方式解释：

```
object theObject = GetTheObject();
LoadItems<GetGenericType(theObject)>(); 
```

有没有办法做到这一点？

万分感谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-07T04:58:30.513

您将不得不使用反射或更改您的设计。

如果要使用反射，过程比较复杂：

```
// get the type of the object variable
var objType = theObject.GetType();

// I'm assuming that LoadItems() is a method in the current class
var selfType = GetType();

// you might need to use an overload of GetMethod() -- please read the documentation!
var methodInfo = selfType.GetMethod("LoadItems");

// this fills in the generic arguments
var genericMethodInfo = methodInfo.MakeGenericMethod(new[] { objType });

// this calls LoadItems<T>() with T filled in; I'm assuming it's a method on this class
var results = genericMethodInfo.Invoke(this, null); 
```

请注意，这`results`将是一个`object`. 如果您希望它成为特定`List<>`类型，那么您就不走运了。您在编译时不知道类型是什么。您可以将其转换为 non-generic `IList`，或使用一些 LINQ 表达式将其转换为更有用的东西，如下所示：

```
var niceResults = results.Cast<SomeBaseType>().ToList(); 
```

与往常一样，如果您不确定发生了什么，请阅读我上面列出的函数的文档。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-07T04:56:17.307

是的，使用反射：

```
MethodInfo mi = this.GetType().GetMethod("LoadItems").MakeGenericMethod(new Type[] { theObject.GetType() });

mi.Invoke(this, null); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-07T04:55:47.320

要获取您通常使用的对象类型

```
typeof(GetTheObject) 
```

或者

```
theObject.GetType() 
```

但是你不应该像这样定义你的功能吗？

```
 public void LoadItems<T>(T obj)
    {

    } 
```

并这样称呼它？

```
LoadItems(theObject); 
```

# java - -Dorg.apache.jasper.compiler.Parser.STRICT_QUOTE_ESCAPING 在 Websphere AS

> ID：14743805
> 
> 赞同：2
> 
> 时间：2013-02-07T04:53:14.940
> 
> 标签：java, jsp, websphere

我正在将我的应用程序从迁移`Tomcat 7`到`WebSphere 8.5`

在`Tomcat 7` *我*用过

> -Dorg.apache.jasper.compiler.Parser.STRICT_QUOTE_ESCAPING=false

为了在编译`JSP`页面时解决双引号问题，我正在搜索它的等效参数`WebSphere`。

我找到了一个 Web 容器自定义属性

> com.ibm.wsspi.jsp.evalquotedandescapedexpression=true

因为`WAS 8.5`但它不起作用。

我收到以下错误：

```
JSPG0055E: Unable to create an xml attribute from name [] value [%] 
```

基本错误发生在以下情况

```
<html:input value="<%="abc"%>"></html:input> 
```

现在解决方案是

```
<html:input value='<%="abc"%>'></html:input> 
```

但在我的情况下这是不可能的，因为有这么多的 JSP，在 Tomcat 中，这个问题是通过添加以下属性来解决的

> -Dorg.apache.jasper.compiler.Parser.STRICT_QUOTE_ESCAPING=false

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T16:31:28.260

如果您的 JSP 太多，您可以尝试下一个转换代码。它涵盖了许多情况，并且在您可以调整这些特殊情况之后：

```
package test;

import java.io.FileOutputStream;
import java.io.FileReader;
import java.io.LineNumberReader;
import java.util.regex.Matcher;
import java.util.regex.Pattern;

public class JSPParser {
    public static void main(String[] args) throws Exception {
        Pattern pattern = Pattern
            .compile("([A-Za-z]+\\w?\\s*=\\s*(\")<%=\\s*[^%>]*\"+[^>]*\\s*%>(\")\\s*)");

        // Pass the input JSP in the first argument
        FileReader fr = new FileReader(args[0]);
        LineNumberReader lnr = new LineNumberReader(fr);
        String fileName = args[0];
        int n = fileName.lastIndexOf("/");

        // You must have a "was" subdirectory from the source location
        fileName = fileName.substring(0, n + 1) + "was/" + fileName.substring(n + 1);

        FileOutputStream fos = new FileOutputStream(fileName);
        String line = null;
        while ((line = lnr.readLine()) != null) {
            Matcher matcher = pattern.matcher(line);
            while (matcher.find()) {
                n = matcher.groupCount();
                for (int i = 2; i <= n; i++) {
                    line = line.substring(0, matcher.start(i)) + "'"
                            + line.substring(matcher.end(i));
                }
            }
            fos.write(line.getBytes());
            fos.write("\n".getBytes());
        }
        fos.flush();
        fos.close();
        lnr.close();
    }
} 
```

# javascript - 合并到一个文件中时，缩小的 Javascript 不起作用

> ID：14743808
> 
> 赞同：4
> 
> 时间：2013-02-07T04:53:26.733
> 
> 标签：javascript, minify

我有 3 个我使用的 JS 库，它们位于它们自己的单独文件中。它们用每个单独文件中缩小的代码进行注释

```
file 1: http://jsfiddle.net/NGMVa/

file 2: http://jsfiddle.net/AzEME/

file 3: http://jsfiddle.net/qVkhn/ 
```

现在他们单独在我的应用程序中工作正常，不要抛出任何错误。但我想加载更少的文件，所以我将它们组合成一个文件，如下所示：http: [//jsfiddle.net/Gxswy/](http://jsfiddle.net/Gxswy/)

但是，在 Chrome 中，它会在文件的最后一行引发错误：

```
Uncaught TypeError: undefined is not a function 
```

然后它就不再起作用了。在合并它们之前我没有更改代码中的任何内容，我只是将前 3 个文件的内容复制并粘贴到新的文件中，它不再起作用了。不明白为什么将它们组合到一个文件中似乎会破坏功能

希望有人知道这里发生了什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-07T04:57:53.707

确保在每个文件的末尾添加分号或连接，然后 minify 和 minifier 应该注意这一点。

试试这个代码：[https ://gist.github.com/elclanrs/4728677](https://gist.github.com/elclanrs/4728677)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-19T05:28:18.927

## 原因

就我而言，这是因为我在`requirejs`'s中为已经支持 AMD 加载`shim`的库 ( ) 指定了依赖项。`perfect-scrollbar`结果是它的整个代码在完成其工作`define`后被绕过。`grunt-contrib-requirejs`

基本上，将 requirejs 文件连接在一起，`grunt-contrib-requirejs`将

```
// change this:
define(['d3'],function(d3){...});

// into this:
define('d3', ['d3'],function(d3){...}); 
```

而在里面`perfect-scrollbar`，已经有了

```
(function (factory) {
  'use strict';

  if (typeof define === 'function' && define.amd) {
    // AMD. Register as an anonymous module.

    define(['jquery'], factory); // <-------------------------- this part
    // after minification would become:
    // define('PerfectScrollbar', ['jquery'], factory);

  } else if (typeof exports === 'object') {
    factory(require('jquery')); // Node/CommonJS
  } else {
    factory(jQuery); // Browser globals
  }
}(function ($) {
  // perfect-scrollbar code here...
}); 
```

这与我在中指定的内容相冲突`shim`：

```
shim: {
    "PerfectScrollbar": ['jquery', 'jquery.mousewheel']
} 
```

因此，当`requirejs`到达`PerfectScrollbar`真正定义的部分时，它会跳过它，假设它已经完成了这项工作。

## 解决方案

不要`shim`为已经支持 AMD 的库指定依赖项。

## 问题

但是如果我需要指定依赖项怎么办？我需要在它的代码中已经指定的`jquery.mousewheel`之上。`jquery`

## 回答

要求该文件具有适当的要求，并正确获取其自身的依赖项：

```
define(['perfect-scrollbar', 'jquery.mousewheel'], function(){...}); 
```

当您需要的库支持 AMD 时，

```
// inside jquery.mousewheel:
require(['jquery'], factory); 
```

或者它没有

```
shim: {
    "IDontSupportAMD": ['jquery']
} 
```

# python - Apache 寻找 Python 2.6 而不是 2.7

> ID：14743809
> 
> 赞同：1
> 
> 时间：2013-02-07T04:53:27.513
> 
> 标签：python, django, apache, centos

我的操作系统已经有 Python 2.6.6，我已经安装了 Python 2.7.3 作为替代。（Python 工作正常）。我也安装了`mod_python`，但是当我尝试在 Apache 服务器上执行 Python 文件时，它向我显示了一个错误列表，我可以看到它正在寻找 Python 2.6.6 库。但我需要使用 python 2.7.3。谁能帮我摆脱它？

其实我不知道Apache是​​否配置好！

我在 CentOS 6.2 上。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T08:35:35.067

看看[这个](http://code.google.com/p/modwsgi/wiki/ConfigurationDirectives#WSGIPythonHome)。但是，请注意这部分：

> 如果您想使用与当前使用的不同版本的主要/次要 Python 版本，则必须针对 Python 的替代版本重新编译 mod_wsgi。

我不太确定如果你只是交换`WSGIPythonHome`变量它会起作用。如果你安装`mod_wsgi`了 with `yum`，你可能会有一个`mod_wsgi`for `Python 2.6.x`，它是随`CentOS 6.x`. 如果您真的想使用`Python 2.7.x`，您可能必须`mod_wsgi`从源代码构建（这实际上并不难）。

# vba - Vba Excel如何编辑特定列中的单元格值而不循环基于单元格内容的所有行？

> ID：14743811
> 
> 赞同：0
> 
> 时间：2013-02-07T04:53:39.540
> 
> 标签：vba, excel

我有一个带有如图所示数据的电子表格。**如果同一行中相应的SOA**列的值为**1A**，我想隐藏该行最后一列中单元格的值。我有数千行，所以我不想遍历所有行。有没有替代循环遍历所有行的替代方法？任何帮助将不胜感激。

* * *

![在此处输入图像描述](../Images/487609dcd36f0205f51c52186b878846.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T08:12:26.917

为此，您不需要 VBA。将以下公式插入单元格 F2 并填写：

`=IF(C2="1A","",E2)`

您也可以使用、按值`Format as Table`过滤然后删除行的内容来执行此操作。`SOA``1A``Exclusive`

最后，如果您必须使用 VBA，请使用类似于以下伪代码的程序逻辑：

```
For each cell in SOA
  If cell.value = "1A"
  Range("E" & cell.Row).Value = ""
Next cell 
```

# php - 如何使用str_replace替换单引号和双引号

> ID：14743812
> 
> 赞同：6
> 
> 时间：2013-02-07T04:53:45.827
> 
> 标签：php

我必须以用户将插入用户名和密码的形式创建一个登录名。我必须确保不处理 html 实体，并且我也不能允许处理单引号或双引号。我必须回显输入到表单中的数据并显示它。

我必须使用 htmlentities 和 str_replace。我的 htmlentities 正确，但不确定如何使用 str_replace 函数替换用户可能输入表单的单引号和双引号。任何帮助都是极好的。

这是我当前的 PHP（有效）

```
<?php
$username = htmlspecialchars($_POST['username']);
$password    = htmlspecialchars($_POST['password']);
$comment = htmlspecialchars($_POST['comment']);
?>
<html>
<body>
Your username is: <?php echo $username; ?><br />
Your password: <?php echo $password; ?><br />
Your Comment was: <?php echo $comment; ?> 
```

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-02-07T05:23:20.813

我猜你想要[这样..](http://codepad.org/81ddgzH9)，请检查

```
$yourPostVariable = "scor\"pi'on";

//$name = str_replace(array("'", "\""), "", htmlspecialchars($yourPostVariable ) );

echo str_replace(array("'", "\"", "&quot;"), "", htmlspecialchars($yourPostVariable ) ); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2015-08-25T10:34:57.887

```
 $keyItem = str_replace ("'","\'",$keyItem); 
```

这用“转义”单引号 \' 替换单引号。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-02-07T05:22:39.627

```
$username = htmlentities(str_replace(array('"', "'"), '', $_POST['username'])); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-02-07T04:55:55.377

```
$username = str_replace(array("'", "\""), "", htmlspecialchars($_POST['username'])); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-04-15T17:43:06.450

要删除引号，您可以使用以下命令：

```
$search = 'cars "black" in ...';
$search = str_replace("\"", "", $search);
// result: "cars black in ..." 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-07T04:55:48.420

尝试以下代码替换双引号

```
str_replace(chr(34), "replace_with", $content); 
```

对于单引号

```
str_replace("'", "replace_with", $content); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-11-03T21:07:36.353

```
$username_test = $_POST['username'];
$username = str_replace(array("'", "\"", "&quot;"), "",htmlspecialchars($username_test) );

//same for password :) 
```

# javascript - 以 jQuery 和下划线模块为参数的咖啡脚本模块

> ID：14743817
> 
> 赞同：1
> 
> 时间：2013-02-07T04:54:11.947
> 
> 标签：javascript, coffeescript

在已编译的咖啡脚本中，我们的代码自动包装在如下模块中：

```
(function() {
  //Code goes here
}).call(this); 
```

但我想将我的代码包装在一个模块中，如：

```
(function($, _) {
  //Code goes here
})(jQuery, _); 
```

和

```
var myModule = (function($, _) {
                 //Code goes here
               })(jQuery, _); 
```

所以我必须在咖啡脚本中使用它

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T05:30:31.957

您还可以`do`用于自动调用函数，如下所示：

```
do ($ = jQuery, _ = _) ->
  # Code goes here 
```

`do`它本身是一个表达式（它的计算结果是其主体中的最后一个表达式，就像任何函数调用一样），因此您可以将其值分配给一个变量：

```
myModule = do ($ = jQuery, _ = _) ->
  # Code goes here 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-07T05:00:03.340

```
(($, _) ->

#Code goes here
) jQuery, _ 
```

和

```
myModule = (($, _) ->

#Code goes here
)(jQuery, _) 
```

[http://js2coffee.org/](http://js2coffee.org/)

# sql - 从表 sybase 中选择第 n 行

> ID：14743821
> 
> 赞同：1
> 
> 时间：2013-02-07T04:54:36.887
> 
> 标签：sql, tsql, sybase

我正在使用 sybase 数据库。
我必须从我的表中选择每一行`selfjoin(id,salary);`

我用

```
select top 1 * from (select top 4 * from selfjoin order by id desc) order by id 
```

我得到一个错误。

```
An ORDER BY clause is not allowed in a derived table. 
```

下面的sql也会导致错误

```
select id from selfjoin order by id asc limit 2
--error :-`Incorrect syntax near 'limit'` 
```

下面的 sql 也会引发错误。

```
SELECT ROW_NUMBER() OVER (ORDER BY id ASC) AS rownumber,salary from selfjoin;
--error :- `Incorrect syntax near the keyword 'OVER'.` 
```

我也阅读[了这个链接](https://stackoverflow.com/questions/16568/how-to-select-the-nth-row-in-a-sql-database-table)，但没有任何查询有效。我也检查了[这个](http://troels.arvin.dk/db/rdbms/#select-limit)页面，但没有得到正确的结果。

问题变化：- 表中的薪水按升序排列。即按照工资升序查找第n行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T09:56:45.607

查看以下查询：-

SELECT * from selfjoin s1 where (n-1) =(select count(id) from selfjoin s2 where s1.id>s2.id)

其中 n 是行号

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T13:34:21.823

好吧，如果 id 是一些连续的增量数字，那么您可以执行以下操作：-

```
create table #tmp2(id numeric identity,name char(9))  
insert into #tmp2 values("B")    
insert into #tmp2 values("C")   
insert into #tmp2 values("D")  
insert into #tmp2 values("E")  
insert into #tmp2 values("F")  
insert into #tmp2 values("G")  
insert into #tmp2 values("H")  
insert into #tmp2 values("I")  
insert into #tmp2 values("J")  
insert into #tmp2 values("K")  
insert into #tmp2 values("L")  

select t1.* from #tmp2 t1,#tmp2 t2  
where t1.id=t2.id*2 ---(nth number) 
```

或者如果 id 不是从 1 开始，那么

```
select t1.* from #tmp2 t1,#tmp2 t2
where t1.id=((t1.id+1)-t2.id)*2 ---(nth number) 
```

结果：-

id 名称
2 C
4 E
6 G
8 I
10 K

# security - https页面访问非https资源

> ID：14743823
> 
> 赞同：1
> 
> 时间：2013-02-07T04:54:45.047
> 
> 标签：security, tomcat, servlets, https

我正在部署一个 Tomcat 服务，目的是存储 Web 静态资源和库（尤其是 Jquery）。该服务使用 https 为网站提供资源，而 Tomcat 服务使用普通 http 部署，因此浏览器会阻止 Tomcat 资源并阻止页面正常加载。

而且我无法在托管主网站的服务器上存储静态 Web 资源。

有人建议我为 Tomcat 启用 https，但这会降低网站的性能。有没有更好的解决方案？

谢谢， 阮明

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T06:49:05.347

最简单的解决方案是使用[Google 托管的 jQuery 库](https://developers.google.com/speed/libraries/devguide#jquery)，如果这就是您所需要的。

如果这不可接受，那么您可以考虑使用[Apache](http://httpd.apache.org/)或[Nginx](http://wiki.nginx.org/Main)来托管您的静态内容，而不是 Tomcat（它是用 Java 编写的动态 Web 应用程序的容器）。这两个建议都更常用于此用例，并且有很多选项可以优化您的性能。

话虽如此，无论使用何种 Web 服务，使用 HTTPS 总会对性能产生一些影响。这是因为 HTTPS 连接的大部分性能开销都与 SSL 握手相关（如果我记得的话，这涉及到一些次要的加密签名）。但是，这种影响在事物的计划中相对较小。对于像 jQuery 这样不经常更改的静态文件，您可以在文件上设置适当的缓存标头，并进一步减少这种影响。（同样，这种配置在 Apache 或 Nginx 中比在 Tomcat 中更容易完成。）

# javascript - 谷歌快速按钮多次使用

> ID：14743828
> 
> 赞同：0
> 
> 时间：2013-02-07T04:55:35.767
> 
> 标签：javascript, html, mobile

我已经在网页中实现了 Google FastButton 脚本。下列的：

[尝试实现谷歌的快速按钮](https://stackoverflow.com/questions/6300136/trying-to-implement-googles-fast-button)

代码效果很好。我的问题是如何为多个按钮实现此功能。我有几个动态创建的按钮。我不想用自己的功能定义每个按钮。我可以将此脚本与另一个传递一些变量的函数一起使用吗？

例如，`<button id="quick" onclick="someFunction(24);">button</button>`

当前实施

```
new FastButton(document.getElementById('quick'), function() {
       alert("hello");
    });
<button onclick="onLayerClick(8)">8</button> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T05:19:10.063

这是一种方法：根据您粘贴的链接，FastButton 原型接受一个函数作为其第二个参数 ( `this.FastButton = function(element, handler)`) 并将点击事件传递给该函数。因此，如果您执行以下操作：

HTML：

```
<button id="quick">24</button> 
```

JS：

```
var myHandler = function(event) {
    var el = event.target;
    console.log(el.innerHTML);
}

new FastButton(document.getElementById('quick'), myHandler); 
```

然后该`myHandler()`函数将可以访问单击事件起源的 DOM 元素 ( `event.target`)，这将是单击的任何按钮。因此，您将可以访问该按钮的 innerHTML，或者您可以`data-mynumber="24"`在按钮上放置一个属性并使用`el.getAttribute("data-mynumber")`而不是`el.innerHTML`...但是您想要识别按钮取决于您。

# javascript - Backbone.js 和 FormData

> ID：14743842
> 
> 赞同：15
> 
> 时间：2013-02-07T04:56:25.220
> 
> 标签：javascript, json, html, backbone.js, form-data

有什么方法可以使用 Backbone.js 及其模型架构，我可以将 formdata 对象发送到服务器？我遇到的问题是 Backbone 发送的所有内容都被编码为 JSON，因此 formdata 对象没有正确发送（显然）。

我正在通过发出直接的 jQuery ajax 请求并将 formdata 对象作为数据属性来临时解决这个问题，但这并不理想。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2014-01-17T17:51:07.433

这是通过覆盖该`sync`方法的解决方案，我使用该方法来允许文件上传。

在这种情况下，我会覆盖模型的`sync`方法，但这也可以是`Backbone.sync`方法。

```
var FileModel = Backbone.Model.extend({

  urlRoot: CMS_ADMIN_URL + '/config/files',

  sync: function(method, model, options){

    // Post data as FormData object on create to allow file upload
    if(method == 'create'){
      var formData = new FormData();

      // Loop over model attributes and append to formData
      _.each(model.attributes, function(value, key){
        formData.append(key, value);
      });

      // Set processData and contentType to false so data is sent as FormData
      _.defaults(options || (options = {}), {
        data: formData,
        processData: false,
        contentType: false
      });
    }
    return Backbone.sync.call(this, method, model, options);
  }
}); 
```

**编辑：**

要跟踪上传进度，您可以在选项中添加一个`xhr`选项：

```
...

_.defaults(options || (options = {}), {
  data: formData,
  processData: false,
  contentType: false
  xhr: function(){
    // get the native XmlHttpRequest object
    var xhr = $.ajaxSettings.xhr();
    // set the onprogress event handler
    xhr.upload.onprogress = function(event) {
      if (event.lengthComputable) {
        console.log('%d%', (event.loaded / event.total) * 100);
        // Trigger progress event on model for view updates
        model.trigger('progress', (event.loaded / event.total) * 100);
      }
    };
    // set the onload event handler
    xhr.upload.onload = function(){
      console.log('complete');
      model.trigger('progress', 100);
    };
    // return the customized object
    return xhr;
  }
});

... 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-08-23T14:51:45.787

只是为了添加这个问题的答案，这就是我如何去做而不必覆盖`sync`：

在我看来，我有类似的东西：

```
$('#' + $(e.currentTarget).data('fileTarget')).trigger('click').unbind('change').bind('change', function(){
    var form_data = new FormData();
    form_data.append('file', $(this)[0].files[0]);
    appManager.trigger('user:picture:change', form_data);
}); 
```

然后触发执行此操作的控制器中的函数：

```
var picture_entity = new appManager.Entities.ProfilePicture();
picture_entity.save(null, {
    data: data,
    contentType: false,
    processData: false,
}); 
```

那时，我正在`data`用我的`FormData`对象覆盖 jQuery。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2014-01-10T11:23:45.083

我有类似的要求，这就是我所做的：

在视图中：

```
var HomeView = Backbone.View.extend({
    el: "#template_loader",
    initialize: function () {
        console.log('Home View Initialized');
    },
    render: function () {
        var inputData = {
            cId: cId,
            latitude: latitude,
            longitude: longitude
        };

        var data = new FormData();

        data.append('data', JSON.stringify(inputData));

        that.model.save(data, {
            data: data,
            processData: false,
            cache: false,
            contentType: false,
            success: function (model, result) {
                alert("Success");
            },
            error: function () {
                alert("Error");
            }
        });
    }
}); 
```

希望这可以帮助。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-08-23T12:24:36.630

我遇到过同样的问题。您可以在上面看到我解决它的方式。

```
var $form = $("myFormSelector");

//==> GET MODEL FROM FORM
var model = new MyBackboneModel();
var myData = null;
var ajaxOptions = {};
// Check if it is a multipart request.
if ($form.hasFile()) {
    myData = new FormData($form[0]);
    ajaxOptions = {
        type: "POST",
        data: myData,
        processData: false,
        cache: false,
        contentType: false
    };
} else {
    myData = $form.serializeObject();
}

// Save the model.
model.save(myData, $.extend({}, ajaxOptions, {
    success: function(model, data, response) {
        //==> INSERT SUCCESS
    },
    error: function(model, response) {
        //==> INSERT ERROR
    }
})); 
```

hasFile 是扩展 JQuery 函数的自定义方法。

```
$.fn.hasFile = function() {
    if ($.type(this) === "undefined")
        return false;

    var hasFile = false;
    $.each($(this).find(":file"), function(key, input) {
        if ($(input).val().length > 0) {
            hasFile = true;
        }
    });

    return hasFile;
}; 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2015-03-27T13:12:24.083

只需使用`Backbone.emulateJSON = true;`：[http ://backbonejs.org/#Sync-emulateJSON](http://backbonejs.org/#Sync-emulateJSON)

> 将导致 JSON 在模型参数下被序列化，并使用 application/x-www-form-urlencoded MIME 类型发出请求，就像来自 HTML 表单一样。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2015-12-24T15:53:05.263

没有一个答案对我有用，下面是简单易行的解决方案。通过覆盖`sync`方法，`options.contentType`像这样：

```
sync: function(method, model, options) {
    options = _.extend({
        contentType : 'application/x-www-form-urlencoded;charset=UTF-8'
    }, options);

    options.data = jQuery.param(model.toJSON());

    return Backbone.sync.call(this, method, model, options);
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-08-11T06:44:21.767

一个简单的，希望这会对某人有所帮助。

1.  创建一个Backbone Model对象：

    ```
    var importModel = new ImportModel(); 
    ```

2.  调用 Backbone 模型的 Save[POST] 方法并传递 FormData 对象。

    ```
    var objFormData = new FormData();
    objFormData.append('userfile', files[0]);

    importModel.save(objFormData, {
     contentType: false, 
     data: objFormData, 
     processData: false,
     success: function(data, status, xhr) { },
     error: function(xhr, statusStr) { }
    }); 
    ```

# php - php会话在本地主机上工作，但不在vps网络服务器上

> ID：14743846
> 
> 赞同：3
> 
> 时间：2013-02-07T04:56:47.573
> 
> 标签：php, apache, session

```
<?php
session_start();
if(isset($_SESSION["counter"])){
echo session_id()." ".$_SESSION["counter"];
$_SESSION["counter"]++;
}
else{
$_SESSION["counter"]=0;
echo "start counter";
}
?> 
```

这只是会话的基本示例代码。它可以使用 XAMPP 找到我的 PC。但是当我将它放入我的 vps 网络服务器时它根本不起作用。输出仅包括“启动计数器”，并且从不更改我刷新页面的任何内容。我在 XAMPP 和 vps 上检查了 php.ini。variables_order = "GPCS" request_order = "GP" register_globals = Off session.save_handler = files 以上配置在 XAMPP 和 vps 上相同。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T05:05:59.600

这可能是由于您的会话在另一台服务器上过期太快的原因。首先确保您正确设置会话变量。会话可能未启用或未在`php.ini`服务器上的文件中正确配置。

您可以尝试将其放在文件前面以查看任何错误。当您看到错误时，您可以找出错误的地方。

```
error_reporting(E_ALL);
ini_set('display_errors', 1); 
```

# visual-studio-2012 - VS 2012 在单独的选项卡上打开设计和代码

> ID：14743851
> 
> 赞同：0
> 
> 时间：2013-02-07T04:57:09.720
> 
> 标签：visual-studio-2012

当我在 VS2012 上打开 HTML 文件时，我可以选择查看代码/拆分/设计。

是否可以在单独的选项卡/窗口上打开设计和代码？我想在编辑代码时更好地了解设计。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T15:08:53.217

拆分视图还不够吗？您是否尝试在垂直拆分模式下使用它？

将拆分视图显示设置更改为[此处](http://blogs.msdn.com/b/zainnab/archive/2010/12/05/vertical-split-view-vstipedit0081.aspx)解释的“垂直” 。

# c# - PerformanceCounter 在连接远程服务器时非常慢

> ID：14743852
> 
> 赞同：2
> 
> 时间：2013-02-07T04:57:17.837
> 
> 标签：c#, performancecounter, remote-server

我尝试使用 PerformanceCounter 来监控域环境中的远程服务器信息，例如：

```
var counter = new PerformanceCounter("PhysicalDisk", "Disk Bytes/sec", "_Total", "REMOTE_SERVER"); 
```

只有 1 行代码，运行上述代码将至少等待 50 秒。

我试图冒充管理员等，仍然是同一时间。

我也尝试过使用 PowerShell get-counter，或多或少的速度。

我尝试在计算机管理中使用 Windows 本机性能监控工具，连接到远程服务器，只需几秒钟。

知道如何提高连接速度吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-13T03:48:42.473

如果您正在监视本地计算机，我发现如果我尝试监视**localhost** ，则在设置*PerformanceCounter*对象时有时会等待 1 分钟或更长时间。如果我改为使用**127.0.0.1**它似乎有帮助。

但是，有时在监控远程机器时仍然会发生这种情况。如果我找到解决方案会更新，我相信还有一个名为 PDH 的替代库，我将对其进行研究。

# c# - 在 DataGridView 的单元格输入事件中更改当前单元格

> ID：14743857
> 
> 赞同：2
> 
> 时间：2013-02-07T04:57:32.207
> 
> 标签：c#, winforms, datagridview

我正在开发一个表格`datagridview`。

我想要的结果是：

*   当用户单击只读单元格时，光标将移动到可编辑单元格。
*   当用户单击可编辑单元格时，光标将位于此当前可编辑单元格上。

我做这个`Cell_Enter Event`（我有一些理由在`Cell_Enter`.我必须使用 Cell_Enter 上编码）。

```
DataGridViewCell cell = myGrid.Rows[cursorRow].Cells[cursorCol];
myGrid.CurrentCell = cell;
myGrid.BeginEdit(true); 
```

点击就`Editable Cell`OK了，点击就`ReadOnly Cell`报异常错误：

错误-> **操作无效，因为它会导致对 SetCurrentCellAddressCore 函数的可重入调用。**

那么，这个问题有解决方案吗？（当用户单击时`ReadOnly Cell`，光标将移动到`Editable`单元格。）

**编辑**：我想要的解决方案是如何将光标移动到不是当前单元格的其他单元格？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T07:34:45.313

我在[这里](http://social.msdn.microsoft.com/Forums/ja-JP/vcexpressja/thread/9bd773b3-652f-44a6-bc03-ddf74713a781)找到了解决这个问题的方法。

```
 private void myGrid_CellEnter(object sender, DataGridViewCellEventArgs e)
        {
            //Do stuff
            Application.Idle += new EventHandler(Application_Idle);

        }

        void Application_Idle(object sender, EventArgs e)
        {
            Application.Idle -= new EventHandler(Application_Idle);
            myGrid.CurrentCell = myGrid[cursorCol,cursorRow];
        } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T05:03:54.690

尝试使用`If.. else ..statement`

```
if (cursorCol == 1) //When user clicks on ReadOnly Cell, the Cursor will move to Editable Cell.
{
   myGrid.CurrentCell = myGrid[cursorRow, cursorCol];
}
else //When user clicks on Editable Cell, the Cursor will be on this Current Editable Cell.
{
  //Do stuff
  myGrid.BeginEdit(true);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-07T18:02:26.313

我不是 100% 确定这会在你的情况下工作，但由于我们客户的一个愚蠢的 UI 要求，我曾经遇到过这样的事情。快速修复是将代码包装在`BeginInvoke`. 例如：

```
BeginInvoke((Action)delegate
{
    DataGridViewCell cell = myGrid.Rows[cursorRow].Cells[cursorCol];
    myGrid.CurrentCell = cell;
    myGrid.BeginEdit(true);
}); 
```

本质上，这将使它在`CellEnter`事件发生后执行代码，允许`DataGridView`它在导致异常的幕后执行任何操作。

最终，它被重构为一个自定义控件，该控件可以扩展`DataGridView`并且`BeginInvoke`不再需要。

# html - 在锚点内居中图像

> ID：14743858
> 
> 赞同：2
> 
> 时间：2013-02-07T04:57:32.520
> 
> 标签：html, css, tags, anchor, centering

我正在尝试将包含在锚标记中的图像水平居中。我尝试将其设置为块并将边距设置为自动，但没有成功。我已经尝试将它包装在一个 div 标签中并做同样的事情，仍然没有运气。甚至尝试将 div 中的 img 居中在 div 中。我看了其他帖子，似乎没有任何帮助。无论我做什么，图像仍然与左侧对齐。

###HTML

```
<div id="slideWrapper">
    <h1 id="slideHeading">This is a Header</h1> 
    <hr/>       
    <div class="centerMe">
        <a href="javascript:slidelink()" class="slideA">
            <img src="./images/Slides/cheeseBoards.jpg" name="slide" id="slideImg"/>
        </a>
    </div>
    <hr/>
    <div class="centerMe">
        <a href="javascript:slidelink()"class="slideA" id="slideText">Check out our services and other great stuff.</a>
    </div>
</div> 
```

###CSS

```
.centerMe {
    margin-left: auto;
    margin-right: auto;
    border: 1px solid green;
    text-align: center;
}
#slideWrapper {
    border: 1px solid blue; 
}
#slideImg {
    display: block;
    height:500px;
    width:900px;
    border:1px solid red;
    margin-left: auto;
    margin-right: auto;
} 
```

我在所有东西周围都设置了边框，这样我就可以看到东西放在哪里了。由于某种原因，该图像似乎未包含在 div 中。这似乎应该如此简单。任何帮助将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-07T05:42:31.807

确保没有从父母那里继承的 float:left 。边距：0 自动；当你有 float:left; 时不起作用 或位置：绝对；

# c# - 在 ASP.Net 中使用 clickatell 发送短信

> ID：14743863
> 
> 赞同：1
> 
> 时间：2013-02-07T04:57:52.453
> 
> 标签：c#, asp.net, sms, sms-gateway, clickatell

我已经从他们的网站上尝试过这段代码

```
using System.Net;
using System.IO;
WebClient client = new WebClient();
// Add a user agent header in case the requested URI contains a query.
client.Headers.Add("user-agent", "Mozilla/4.0 (compatible; MSIE 6.0; Windows NT 5.2; .NET CLR 1.0.3705;)");
client.QueryString.Add("user", "xxxx");
client.QueryString.Add("password", "xxxx");
client.QueryString.Add("api_id", "xxxx");
client.QueryString.Add("to", "xxxx");
client.QueryString.Add("text", "This is an example message");
string baseurl = "http://api.clickatell.com/http/sendmsg";
Stream data = client.OpenRead(baseurl);
StreamReader reader = new StreamReader(data);
string s = reader.ReadToEnd();
data.Close();
reader.Close();
return s; 
```

我遇到代理身份验证失败

```
string baseurl ="http://api.clickatell.com/http/sendmsg"; 
```

谁能帮我吗？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T05:11:33.157

我认为您在代理后面，您的网络客户端需要进行身份验证。试试下面的代码：

```
string userName = "<user name>";
string password = "<password>";
ICredentials creds = new NetworkCredential(userName, password);
client.Credentials = creds; 
```

# android - 如何使用java代码检测android中的驾驶模式

> ID：14743866
> 
> 赞同：0
> 
> 时间：2013-02-07T04:58:04.903
> 
> 标签：android

嗨，我想开发一个能够检测到手机处于驾驶模式的应用程序。我对此一无所知。我做了很多谷歌搜索，但所有链接都显示了 android 手机中可用的驾驶模式选项。（果冻版）。我不知道开发它。我怎么能在我的应用程序中做到这一点。有驾驶模式的api吗？

我想在我的应用程序中使用该功能

[https://play.google.com/store/apps/details?id=com.picitup.iOnRoad&hl=en](https://play.google.com/store/apps/details?id=com.picitup.iOnRoad&hl=en)

功能- 24/7 自动驾驶检测保护

# azure - 当 SessionState 与 mode="Custom" 时，此上下文中的响应不可用

> ID：14743873
> 
> 赞同：0
> 
> 时间：2013-02-07T04:58:52.450
> 
> 标签：azure

这是我在运行从 Asp.net 迁移到 Windows Azure Cloud 的 Web 项目时遇到的异常。如果 web.config 中的 sessionstate 也可以正常工作

```
<sessionState mode="InProc" cookieless="false" timeout="30" />. 
```

但是，如果我将 web.config 会话状态设为

```
<sessionState mode="Custom" customProvider="AzureCacheSessionStoreProvider" >
      <providers>
        <add name="AzureCacheSessionStoreProvider" type="Microsoft.Web.DistributedCache.DistributedCacheSessionStateStoreProvider, Microsoft.Web.DistributedCache" cacheName="default" useBlobMode="true" dataCacheClientName="default"/>
      </providers>
    </sessionState> 
```

它给出了以下例外。没有关于异常的线索。请尽快有人帮忙。

例外：

```
{"Response is not available in this context."}
    [System.Web.HttpException]: {"Response is not available in this context."}
    Data: {System.Collections.ListDictionaryInternal}
    HelpLink: null
    InnerException: null
    Message: "Response is not available in this context."
    Source: "System.Web"

    StackTrace: "   at System.Web.UI.Page.get_Response()\r\n   at Writehome_aspxToXml(XmlWriterDelegator , Object , XmlObjectSerializerWriteContext , ClassDataContract )\r\n   at System.Runtime.Serialization.ClassDataContract.WriteXmlValue(XmlWriterDelegator xmlWriter, Object obj, XmlObjectSerializerWriteContext context)\r\n   at System.Runtime.Serialization.XmlObjectSerializerWriteContext.WriteDataContractValue(DataContract dataContract, XmlWriterDelegator xmlWriter, Object obj, RuntimeTypeHandle declaredTypeHandle)\r\n   at System.Runtime.Serialization.XmlObjectSerializerWriteContext.SerializeAndVerifyType(DataContract dataContract, XmlWriterDelegator xmlWriter, Object obj, Boolean verifyKnownType, RuntimeTypeHandle declaredTypeHandle, Type declaredType)\r\n   at System.Runtime.Serialization.XmlObjectSerializerWriteContext.SerializeWithXsiType(XmlWriterDelegator xmlWriter, Object obj, RuntimeTypeHandle objectTypeHandle, Type objectType, Int32 declaredTypeID, RuntimeTypeHandle declaredTypeHandle, Type declare
dType)\r\n   at System.Runtime.Serialization.XmlObjectSerializerWriteContext.InternalSerialize(XmlWriterDelegator xmlWriter, Object obj, Boolean isDeclaredType, Boolean writeXsiType, Int32 declaredTypeID, RuntimeTypeHandle declaredTypeHandle)\r\n   at System.Runtime.Serialization.XmlObjectSerializerWriteContextComplex.InternalSerialize(XmlWriterDelegator xmlWriter, Object obj, Boolean isDeclaredType, Boolean writeXsiType, Int32 declaredTypeID, RuntimeTypeHandle declaredTypeHandle)\r\n   at WritePlaceHolderToXml(XmlWriterDelegator , Object , XmlObjectSerializerWriteContext , ClassDataContract )\r\n   at System.Runtime.Serialization.ClassDataContract.WriteXmlValue(XmlWriterDelegator xmlWriter, Object obj, XmlObjectSerializerWriteContext context)\r\n   at System.Runtime.Serialization.XmlObjectSerializerWriteContext.WriteDataContractValue(DataContract dataContract, XmlWriterDelegator xmlWriter, Object obj, RuntimeTypeHandle declaredTypeHandle)\r\n   at System.Runtime.Serialization.XmlObjectSerializerWriteContext.S
erializeAndVerifyType(DataContract dataContract, XmlWriterDelegator xmlWriter, Object obj, Boolean verifyKnownType, RuntimeTypeHandle declaredTypeHandle, Type declaredType)\r\n   at System.Runtime.Serialization.XmlObjectSerializerWriteContext.SerializeWithXsiType(XmlWriterDelegator xmlWriter, Object obj, RuntimeTypeHandle objectTypeHandle, Type objectType, Int32 declaredTypeID, RuntimeTypeHandle declaredTypeHandle, Type declaredType)\r\n   at System.Runtime.Serialization.XmlObjectSerializerWriteContext.InternalSerialize(XmlWriterDelegator xmlWriter, Object obj, Boolean isDeclaredType, Boolean writeXsiType, Int32 declaredTypeID, RuntimeTypeHandle declaredTypeHandle)\r\n   at System.Runtime.Serialization.XmlObjectSerializerWriteContextComplex.InternalSerialize(XmlWriterDelegator xmlWriter, Object obj, Boolean isDeclaredType, Boolean writeXsiType, Int32 declaredTypeID, RuntimeTypeHandle declaredTypeHandle)\r\n   at WriteArrayOfControlToXml(XmlWriterDelegator , Object , XmlObjectSerializerWriteContext , Collection
DataContract )\r\n   at System.Runtime.Serialization.CollectionDataContract.WriteXmlValue(XmlWriterDelegator xmlWriter, Object obj, XmlObjectSerializerWriteContext context)\r\n   at System.Runtime.Serialization.XmlObjectSerializerWriteContext.WriteDataContractValue(DataContract dataContract, XmlWriterDelegator xmlWriter, Object obj, RuntimeTypeHandle declaredTypeHandle)\r\n   at System.Runtime.Serialization.XmlObjectSerializerWriteContext.SerializeAndVerifyType(DataContract dataContract, XmlWriterDelegator xmlWriter, Object obj, Boolean verifyKnownType, RuntimeTypeHandle declaredTypeHandle, Type declaredType)\r\n   at System.Runtime.Serialization.XmlObjectSerializerWriteContext.SerializeWithXsiType(XmlWriterDelegator xmlWriter, Object obj, RuntimeTypeHandle objectTypeHandle, Type objectType, Int32 declaredTypeID, RuntimeTypeHandle declaredTypeHandle, Type declaredType)\r\n   at System.Runtime.Serialization.XmlObjectSerializerWriteContext.InternalSerialize(XmlWriterDelegator xmlWriter, Object obj, Boolean isDec
laredType, Boolean writeXsiType, Int32 declaredTypeID, RuntimeTypeHandle declaredTypeHandle)\r\n   at System.Runtime.Serialization.XmlObjectSerializerWriteContextComplex.InternalSerialize(XmlWriterDelegator xmlWriter, Object obj, Boolean isDeclaredType, Boolean writeXsiType, Int32 declaredTypeID, RuntimeTypeHandle declaredTypeHandle)\r\n   at WriteArrayOfanyTypeToXml(XmlWriterDelegator , Object , XmlObjectSerializerWriteContext , CollectionDataContract )\r\n   at System.Runtime.Serialization.CollectionDataContract.WriteXmlValue(XmlWriterDelegator xmlWriter, Object obj, XmlObjectSerializerWriteContext context)\r\n   at System.Runtime.Serialization.XmlObjectSerializerWriteContext.WriteDataContractValue(DataContract dataContract, XmlWriterDelegator xmlWriter, Object obj, RuntimeTypeHandle declaredTypeHandle)\r\n   at System.Runtime.Serialization.XmlObjectSerializerWriteContext.SerializeWithoutXsiType(DataContract dataContract, XmlWriterDelegator xmlWriter, Object obj, RuntimeTypeHandle declaredTypeHandle)\r\n   a
t System.Runtime.Serialization.XmlObjectSerializerWriteContext.InternalSerialize(XmlWriterDelegator xmlWriter, Object obj, Boolean isDeclaredType, Boolean writeXsiType, Int32 declaredTypeID, RuntimeTypeHandle declaredTypeHandle)\r\n   at System.Runtime.Serialization.XmlObjectSerializerWriteContextComplex.InternalSerialize(XmlWriterDelegator xmlWriter, Object obj, Boolean isDeclaredType, Boolean writeXsiType, Int32 declaredTypeID, RuntimeTypeHandle declaredTypeHandle)\r\n   at WriteSerializableSessionStateStoreDataToXml(XmlWriterDelegator , Object , XmlObjectSerializerWriteContext , ClassDataContract )\r\n   at System.Runtime.Serialization.ClassDataContract.WriteXmlValue(XmlWriterDelegator xmlWriter, Object obj, XmlObjectSerializerWriteContext context)\r\n   at System.Runtime.Serialization.NetDataContractSerializer.InternalWriteObjectContent(XmlWriterDelegator writer, Object graph, DataContract contract, Hashtable surrogateDataContracts)\r\n   at System.Runtime.Serialization.NetDataContractSerializer.InternalWr
iteObject(XmlWriterDelegator writer, Object graph)\r\n   at System.Runtime.Serialization.XmlObjectSerializer.InternalWriteObject(XmlWriterDelegator writer, Object graph, DataContractResolver dataContractResolver)\r\n   at System.Runtime.Serialization.XmlObjectSerializer.WriteObjectHandleExceptions(XmlWriterDelegator writer, Object graph, DataContractResolver dataContractResolver)\r\n   at System.Runtime.Serialization.XmlObjectSerializer.WriteObject(XmlDictionaryWriter writer, Object graph)\r\n   at Microsoft.ApplicationServer.Caching.NetDataContractCacheObjectSerializer.Serialize(Stream stream, Object value)\r\n   at Microsoft.ApplicationServer.Caching.DataCacheObjectSerializationProvider.SerializeUserObject(Object userObject, Boolean isCompressionEnabled, ValueFlagsVersion flagsType)\r\n   at Microsoft.ApplicationServer.Caching.SocketClientProtocol.SerializeValue(Object obj)\r\n   at Microsoft.ApplicationServer.Caching.SocketClientProtocol.PutAndUnlock(String key, Object value, DataCacheLockHandle lockHandle,
 TimeSpan timeout, DataCacheTag[] tags, String region, IMonitoringListener listener)\r\n   at Microsoft.ApplicationServer.Caching.DataCache.InternalPutAndUnlock(String key, Object value, DataCacheLockHandle lockHandle, TimeSpan timeout, DataCacheTag[] tags, String region, IMonitoringListener listener)\r\n   at Microsoft.ApplicationServer.Caching.DataCache.<>c__DisplayClass9c.<PutAndUnlock>b__9b()\r\n   at Microsoft.ApplicationServer.Caching.MonitoringListenerFactory.EmptyListener.Microsoft.ApplicationServer.Caching.IMonitoringListener.Listen[TResult](Func`1 innerDelegate)\r\n   at Microsoft.ApplicationServer.Caching.DataCache.PutAndUnlock(String key, Object value, DataCacheLockHandle lockHandle, TimeSpan timeout)\r\n   at Microsoft.Web.DistributedCache.DataCacheWrapper.PutAndUnlock(String key, Object value, DataCacheLockHandle lockHandle, TimeSpan timeout)\r\n   at Microsoft.Web.DistributedCache.DataCacheForwarderBase.<>c__DisplayClass1c.<PutAndUnlock>b__1b()\r\n   at Microsoft.Web.DistributedCache.DataCacheFo
rwarderBase.<>c__DisplayClass31`1.<PerformCacheOperation>b__30()\r\n   at Microsoft.Web.DistributedCache.DataCacheRetryWrapper.PerformCacheOperation(Action action)\r\n   at Microsoft.Web.DistributedCache.DataCacheForwarderBase.PerformCacheOperation[TResult](Func`1 func)\r\n   at Microsoft.Web.DistributedCache.DataCacheForwarderBase.PutAndUnlock(String key, Object value, DataCacheLockHandle lockHandle, TimeSpan timeout)\r\n   at Microsoft.Web.DistributedCache.BlobBasedSessionStoreProvider.SetAndReleaseItemExclusive(HttpContextBase context, String id, SessionStateStoreData item, Object lockId, Boolean newItem)\r\n   at Microsoft.Web.DistributedCache.DistributedCacheSessionStateStoreProvider.SetAndReleaseItemExclusive(HttpContext context, String id, SessionStateStoreData item, Object lockId, Boolean newItem)\r\n   at System.Web.SessionState.SessionStateModule.OnReleaseState(Object source, EventArgs eventArgs)\r\n   at System.Web.HttpApplication.SyncEventExecutionStep.System.Web.HttpApplication.IExecutionStep.Exec
ute()\r\n   at System.Web.HttpApplication.ExecuteStep(IExecutionStep step, Boolean& completedSynchronously)"
    TargetSite: {System.Web.HttpResponse get_Response()} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T07:11:30.457

感谢您的所有帮助，我终于找到了问题的原因。出现问题是因为我试图将 System.Web.UI.WebControls 存储到会话中。

由于并非所有 System.Web.UI.WebControls 都是可序列化的，因此请避免将 WebControls 存储到会话中。

快乐的编码..

# jquery - jQuery消息框关闭超时

> ID：14743875
> 
> 赞同：2
> 
> 时间：2013-02-07T04:59:03.650
> 
> 标签：jquery

我正在使用来自[jquerymsgbox](http://jquerymsgbox.ibrahimkalyoncu.com/)的 jQuery 消息框插件。我要做的是显示一个消息框并使用timeOut = 30sec自动关闭它。

```
$.msgBox({
  title: "Ooops",
  content: "Ohh dear! You broke it!!!",
  type: "error",
  showButtons: false,
  opacity: 0.9,
  timeOut:30000
}); 
```

发布的代码不起作用。我只是一个初学者，不知道该怎么做。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T05:02:31.107

你错过了一些东西......在上面添加这个`timeout:30000`

```
autoClose:true 
```

所以你有了：

```
$.msgBox({
title: "Ooops",
content: "Ohh dear! You broke it!!!",
type: "error",
showButtons: false,
opacity: 0.9,
autoClose:true,
timeOut:30000}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T05:02:57.263

```
$.msgBox({
title: "Ooops",
content: "Ohh dear! You broke it!!!",
type: "error",
showButtons: false,
opacity: 0.9,
autoClose:true
}); 
```

采用`autoClose : true`

# ruby-on-rails - rails 中的 error_messages 未显示

> ID：14743876
> 
> 赞同：0
> 
> 时间：2013-02-07T04:59:08.337
> 
> 标签：ruby-on-rails, ruby-on-rails-3

在我的用户控制器中，我有新的和创建的动作..

```
def new
 @user = User.new
end
def create
  @user.save!
end 
```

而我`new.html.haml`的是..

```
 - form_for @user do |f|
  = f.error_messages
  = label_tag "User Name"
  = f.text_field :user_name
  %br
  = submit_tag 'Add', :disable_with => "Creating…" 
```

User.rb(模型)

```
validates_uniqueness_of  :config_name 
```

但是，如果我单击文本字段中已包含值的提交按钮，则不会显示错误消息。但抛出异常。

```
 ActiveRecord::RecordInvalid in UsersController#create

    Validation failed: has already been taken 
```

请任何人告诉我为什么它没有显示错误消息。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T05:00:31.053

您正在使用`#save!`which 在验证失败时引发异常。您应该使用`#save`或仍然使用`#save!`但将其包装在救援块内。

```
def create
  if @user.save
    redirect_to @user, notice: 'Created!'
  else
    render :new
  end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T05:15:01.407

看[保存！](http://api.rubyonrails.org/classes/ActiveRecord/Validations.html#method-i-save-21)

```
def create
  unless @user.save
     render :action => :new
  end
end 
```

# r - 在 R 中使用 Amelia() 进行多重插补

> ID：14743877
> 
> 赞同：0
> 
> 时间：2013-02-07T04:59:13.483
> 
> 标签：r

多重插补 (MI) 有 3 个步骤。

*   步骤1。估算
*   第2步。分析
*   第三步。合并（池化）

`Amelia`我使用R 中的包实现了这段代码。

```
> th.out <-amelia(th, m=5, ts="CTIME", cs="ID")   
 #'th' is a dataset related to temperature and humidity. 
```

结果`amelia()`是 5 个估算数据集。`(th.out$imputations[1], th.out$imputations[2] .... th.out$imputations[5])`.

似乎`amelia()` 只实现了第 1 步（估算）。如何进行第 2 步（分析）和第 3 步（组合）？你能推荐一些函数或包来执行剩下的两个步骤吗？

# string - 比较两个字符串（以 nul 结尾）而不是逐字节进行比较？

> ID：14743881
> 
> 赞同：4
> 
> 时间：2013-02-07T04:59:27.107
> 
> 标签：string, algorithm, assembly, string-comparison

就像`strlen()`glibc 执行一个很好的位操作和每次检查 4 个字节使函数如此之快，与大多数其他人所做的逐字节例程相比，是否有这样的东西来比较汇编中的两个字符串？我正在阅读一些关于 C 语言代码实现的页面，对字符串处理部分非常感兴趣，但我仍然没有找到这样的内容。我必须使这个函数尽可能快，因为它是我的应用程序的核心。（不推荐哈希表）

欢迎任何汇编程序。但是我对intel的汇编语法有点熟悉，如果你要提供的汇编不同，请评论。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-07T05:11:47.847

您可以逐字比较（例如一次 32 位或 64 位）。您只需要小心不要超过字符串的末尾。如果您正在制作字符串，那么您可以用零填充它们，以便它们是字长的倍数，那么您甚至不需要检查。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-07T14:15:15.263

假设以零结尾的字符串（尽管同样适用于`memcmp()`）；在汇编中进行字符串比较的最快方法取决于字符串的长度和特定的 CPU。

一般来说; SSE 或 AVX 的设置成本很高，但在运行后会提供更快的吞吐量，如果您要比较非常长的字符串（尤其是在大多数字符匹配时），这将使其成为最佳选择。

或者，使用通用寄存器一次处理一个字节的东西通常具有非常低的设置成本和较低的吞吐量，如果您要比较大量小字符串（甚至是大量大字符串，其中前几个字符可能不同）。

如果您为特定应用程序执行此操作，则可以确定比较的平均字符数并找到该平均值的最佳方法。您还可以针对不同的情况使用不同的功能 - 例如，如果存在混合，则实现 a`strcmp_small()`和 a 。`strcmp_large()`

尽管如此，如果字符串比较的性能很重要，那么比较字符串的最快方法很可能根本不比较字符串。基本上，“*我必须尽可能快地实现这个功能，因为它是我的应用程序的核心*”这句话应该让每个人都想知道为什么没有更好的方法来实现应用程序。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-07T08:34:07.983

## [FreshLib /strlib.asm 库](http://fresh.flatassembler.net/index.cgi?page=content/related/0_FreshLib.txt)中实现的 StrCompCase（区分大小写） 。

这是一些使用双字比较的代码：

请注意，这是首先检查字符串的长度。那是因为在提到的库中，字符串是以长度为前缀的，所以 StrLen 是即时的 O(1) 并且仅提供扫描终止 NULL 作为后备（请参阅此答案的第二部分）。

在实际比较之前比较长度可以使不同字符串的速度为 O(1)，这在搜索大数组的情况下可能会显着提高性能。

然后在 dwords 上进行比较，最后，如果字符串长度不是 4 的倍数，则将剩余的 1..3 个字节逐个字节地进行比较。

```
proc StrCompCase, .str1, .str2
begin
        push    eax ecx esi edi

        mov     eax, [.str1]
        mov     ecx, [.str2]

        cmp     eax, ecx
        je      .equal

        test    eax, eax
        jz      .noteq

        test    ecx, ecx
        jz      .noteq

        stdcall StrLen, eax
        push    eax
        stdcall StrLen, ecx

        pop     ecx
        cmp     eax, ecx
        jne     .noteq

        stdcall StrPtr, [.str1]
        mov     esi,eax
        stdcall StrPtr, [.str2]
        mov     edi,eax

        mov     eax, ecx
        shr     ecx, 2
        repe cmpsd
        jne     .noteq
        mov     ecx, eax
        and     ecx, 3
        repe cmpsb
        jne     .noteq

.equal:
        stc
        pop     edi esi ecx eax
        return

.noteq:
        clc
        pop     edi esi ecx eax
        return
endp 
```

## 关于 StrLen 代码：

这是StrLen的实现。

您可以看到，如果可能，它使用长度前缀字符串，这样执行时间为 O(1)。如果这是不可能的，它会退回到每个周期检查 8 个字节的扫描算法，它非常快，但仍然是 O(n)。

```
proc StrLen, .hString    ; proc StrLen [hString]
begin
        mov     eax, [.hString]
        cmp     eax, $c0000000
        jb      .pointer

        stdcall StrPtr, eax
        jc      .error

        mov     eax, [eax+string.len]
        clc
        return

.error:
        xor     eax, eax
        stc
        return

.pointer:
        push    ecx edx esi edi

; align on dword
.byte1:
        test    eax, 3
        jz      .scan

        cmp     byte [eax], 0
        je      .found

        inc     eax
        jmp     .byte1

.scan:
        mov     ecx, [eax]
        mov     edx, [eax+4]

        lea     eax, [eax+8]

        lea     esi, [ecx-$01010101]
        lea     edi, [edx-$01010101]

        not     ecx
        not     edx

        and     esi, ecx
        and     edi, edx

        and     esi, $80808080
        and     edi, $80808080

        or      esi, edi
        jz      .scan

        sub     eax, 9

; byte 0 was found: so search by bytes.
.byteloop:
        lea     eax, [eax+1]
        cmp     byte [eax], 0
        jne     .byteloop

.found:
        sub     eax, [.hString]
        clc
        pop     edi esi edx ecx
        return
endp 
```

请注意，以零结尾的字符串同时存在性能和安全问题。

最好使用大小前缀字符串。例如，提到的库使用动态字符串，其中字符串包含偏移量 -4 的 dword 字段（上面代码中的 string.len ），其中包含字符串的当前长度。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-02-07T11:13:07.107

更快的逐字节比较的第一条规则是对字符串或`.align 16`任何常量字符串进行 malloc 以确保

*   针对安全违规的鲁棒性（读取过去分配的区域）
*   xxm（或 64 位）处理的最佳对齐方式

# c++ - 查找未排序数组的主导模式

> ID：14743890
> 
> 赞同：-1
> 
> 时间：2013-02-07T05:00:52.287
> 
> 标签：c++, c, algorithm, recursion, master-theorem

请注意，这是家庭作业。

我需要找到数组的模式（正值），然后如果模式大于`sizeof(array)/2`主导值，则返回该值。有些阵列两者都没有。这很简单，但是有一个约束条件是在确定之前不能对数组进行排序，此外，复杂度必须在 O(nlogn) 的数量级上。

使用第二个约束和[主定理](http://en.wikipedia.org/wiki/Master_theorem)，我们可以确定时间复杂度 'T(n) = A*T(n/B) + n^D' 其中 A=B 和 log_B(A)=D 对于 O(nlogn ） 是真实的。因此，A=B=D=2。这也很方便，因为主导值必须在数组的第一、第二或两半中占主导地位。

使用 'T(n) = A*T(n/B) + n^D' 我们知道搜索函数将在每个级别 (A) 调用自身两次，在每个级别 (B) 将问题集除以 2。我一直在弄清楚如何让我的算法考虑到每个级别的 n^2。

制作一些代码：

```
int search(a,b) {
    search(a, a+(b-a)/2);
    search(a+(b-a)/2+1, b);
} 
```

我在这里缺少的“胶水”是如何组合这些划分的功能，我认为这将实现 n^2 复杂性。这里有一些技巧，其中主导必须是第一或第二半或两者中的主导，不太确定这如何帮助我现在解决复杂性约束。

我已经写下了一些小数组的例子，并且我已经画出了它的划分方式。我似乎无法找到一个始终返回主导值的单一方法的正确方向。

在级别 0，函数需要调用自身来搜索数组的前半部分和后半部分。这需要递归，并调用自己。然后在每一层，它需要执行 n^2 次操作。因此，在数组 [2,0,2,0,2] 中，它会将其拆分为对 [2,0] 的搜索和对 [2,0,2] 的搜索并执行 25 次操作。在 [2,0] 上的搜索将调用在 [2] 上的搜索和在 [0] 上的搜索并执行 4 次操作。我假设这些需要搜索数组空间本身。我打算使用 C++ 并使用 STL 中的东西来迭代和计算值。我可以创建一个大数组，并通过它们的索引更新计数。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T06:20:00.743

如果某个数字出现超过一半，则可以通过 O(n) 时间复杂度和 O(1) 空间复杂度来完成，如下所示：

```
int num = a[0], occ = 1;
for (int i=1; i<n; i++) {
    if (a[i] == num) occ++;
    else {
        occ--;
        if (occ < 0) {
            num = a[i];
            occ = 1;
        }
    }
} 
```

由于您不确定是否出现这样的数字，您需要做的就是先应用上述算法得到一个数字，然后第二次迭代整个数组以获取该数字的出现并检查它是否大于一半。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-07T05:32:35.733

如果你只想找到一个数组的主要模式，并递归地做，这里是伪代码：

```
def DominantMode(array):
    # if there is only one element, that's the dominant mode
    if len(array) == 1: return array[0]
    # otherwise, find the dominant mode of the left and right halves
    left = DominantMode(array[0:len(array)/2])
    right = DominantMode(array[len(array)/2:len(array)])
    # if both sides have the same dominant mode, the whole array has that mode
    if left == right: return left
    # otherwise, we have to scan the whole array to determine which one wins
    leftCount = sum(element == left for element in array)
    rightCount = sum(element == right for element in array)
    if leftCount > len(array) / 2: return left
    if rightCount > len(array) / 2: return right
    # if neither wins, just return None
    return None 
```

上述算法是 O(nlogn) 时间但只有 O(logn) 空间。

如果你想找到一个数组的模式（不仅仅是主模式），首先计算直方图。通过将直方图存储在将元素值映射到其频率的哈希表中，您可以在 O(n) 时间内完成此操作（仅访问数组的每个元素一次）。

计算出直方图后，您可以对其进行迭代（最多访问每个元素一次）以找到最高频率。一旦发现频率大于数组大小的一半，您可以立即返回并忽略直方图的其余部分。由于直方图的大小不能大于原始数组的大小，所以这一步也是O(n)时间（和O(n)空间）。

由于这两个步骤都是 O(n) 时间，因此产生的算法复杂度是 O(n) 时间。

# playframework - Playframework 2.1-RC4：使用 sbt 在 dev@cloud 上运行测试

> ID：14743892
> 
> 赞同：1
> 
> 时间：2013-02-07T05:00:59.113
> 
> 标签：playframework, jenkins, sbt, cloudbees, playframework-2.1

我正在尝试设置一个 Jenkins 任务，该任务定期检查一个 play 2.1-rc4 项目并执行所有在您进行“游戏测试”时正常运行的任务。

我们的 Jenkins 安装托管在 cloudbees (dev@cloud) 上。

我安装了 Jenkins sbt 插件并将其配置为指向 sbt（.11.？我认为）的有效副本。在我的构建中，我运行一个 sbt 测试，当前目录设置为 play 项目的根目录。

我的理解是，由于项目下的 build.properties 文件，sbt 会自行更新为 .12，下载并安装 play sbt 插件，解决所有依赖项，然后执行测试。

但是，sbt 无法解析 play sbt 插件：

注意：一些未解决的依赖项有额外的属性。检查这些依赖项是否与请求的属性一起存在。

警告播放：sbt-plugin:2.1-RC4 (sbtVersion=0.11.3, scalaVersion=2.9.1)

scala 和 sbt 版本属性似乎是错误的（play 2.1 使用 sbt .12）...我一直在尝试拼凑 play、sbt 和 Jenkins 如何一起玩并且有几个问题：

1.  如果 build.properties 需要更新版本，sbt .11 是否会为当前版本即时更新？
2.  play sbt 插件（在 plugins.sbt 中加载）为 sbt 添加了哪些功能？我可以用“纯”sbt 替换它吗？
3.  sbt.boot.properties 和 play 的 framework/sbt/boot 目录是干什么用的？当 play 运行 sbt 时，它会将 -Dsbt.boot.properties 设置为 framework/sbt 目录中的启动属性文件。该文件定义了一些存储库和 scala 版本等。在这个 sbt 目录中，有一个名为“boot”的子目录。在其中，有一个目录树，其中包含大量的 jar。这些引导材料是什么？它似乎没有包含在主要的 sbt 文档中。我的猜测是它与加载 sbt 本身有关（解决 sbt 的任何必要的 deps 等）
4.  有人让 dev@cloud 正确执行 play 2.1-rc4 测试吗？如果是这样，您是如何设置的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T21:47:41.283

我们的奴隶还没有 0.12，但是我（和其他人）做的是使用[https://github.com/paulp/sbt-extras](https://github.com/paulp/sbt-extras)来引导 sbt。您需要做的就是将 sbt 启动脚本复制到项目的根目录，然后在 jenkins 中调用 ./sbt。

play sbt 插件纯粹用于部署到 run@cloud，如果您所做的只是测试，则不需要它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-04T00:23:13.443

我最终采取了稍微不同的方法。

我能够在 cloudbees jenkins slaves 上使用旧版本的 SBT 执行大多数播放命令。将较新的版本上传到暂存空间并使用它可能会加快速度，但 sbt .11 bootstraps .12.2 很好。

非常简单的两步演练：

1.  在 jenkins config 中配置 SBT
2.  在构建中添加“使用 sbt 构建”步骤
    *   JVM 标志：-Xms512M -Xmx1536M -Xss1M -XX:+CMSClassUnloadingEnabled -XX:MaxPermSize=384M
    *   sbt 标志：-Dsbt.log.noformat=true -Dconfig.file=ifnecessary
    *   行动：“project PROJECT_NAME”干净编译测试（或其他）

潜在的陷阱/注意事项：

*   在某些情况下，所有引导似乎都在我的工作空间的根目录中创建了一个“.sbt”目录。然后 Sbt 假设这是项目目录并选择它而不是 play 的项目目录。（它会抛出关于使用旧目录布局的警告，但不会忽略它。）“project blah”（引号中）确保 sbt 使用正确的项目配置
*   JVM 标志：我从其中一个 play 构建脚本中获取了这些...我不知道哪些可以忽略
*   sbt flags：您似乎可以在此处或在 jvm flags 部分中传递诸如 config.file 之类的播放环境变量。
*   使用安装在 cloudbees 从属服务器上的默认版本的 sbt，在构建时似乎有一堆引导。我想将最新版本的 sbt 安装到您的暂存空间并使用它会缩短构建时间。

# ember.js - 我应该使用什么类型的控制器来表示不是（持久）模型的复杂对象？

> ID：14743898
> 
> 赞同：0
> 
> 时间：2013-02-07T05:01:41.997
> 
> 标签：ember.js

我正在编写一个*日历应用程序*，它需要按月显示*事件*。

虽然我需要创建对象来表示日历月，但我认为这些`CalenderMonth`对象不应该**是**“ `models`”（`Ember`术语），因为`CalendarMonth`对象不会持久保存到服务器（而`Event`对象会）。相反，`CalendarMonths`will be `'objects'`, build with a `CalendarMonth 'class'`,**扩展** `Ember.Object`

那么，我使用哪种*控制器*`CalendarMonth`作为（经常变化的）对象的代理？( `vanilla`) 控制器？一个`ObjectController`？一个`ArrayController`？

`ObjectController`似乎是要走的路，因为我确实打算让控制器充当单个对象的代理。我想我只是因为在相应的路由对象中，我会将`CalendarMonth`对象分配为控制器的*MODEL*。什么时候，它不是一个模型，它只是一个对象。

换句话说，我的问题是：

**将不是**模型的属性分配给属性`Ember object`是不好的做法吗？**`ObjectController's` `'model'`**

 *** * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T08:44:51.390

使用普通的 JS 对象作为控制器的模型/内容是不错的做法。重要的是视图将如何渲染模型。如果您一次只显示一个事件，或者该月的所有事件只显示一个月，那么这`ObjectController`是您的最佳选择。

An`ArrayController`用于当您想要在控制器中循环模型/内容并在视图中显示每个项目时。我不认为你应该太担心你应该使用什么控制器，一旦你决定如何创建你的视图，你想要哪个控制器就会变得很明显。

当 Ember 谈到将 a`Model`用于您的控制器时，您可以根据需要使用自己的 Ember 对象，然后在控制器中引用它，但它是自然 JS 对象还是 Ember 对象都没有关系。控制器看到两者都很好。**

# c# - 如何在 C# 中为 Office Com 代理方法创建委托？

> ID：14743903
> 
> 赞同：0
> 
> 时间：2013-02-07T05:02:45.490
> 
> 标签：c#, com, interop

问题与以下线程有关： [Access COM vtable from C#](https://stackoverflow.com/questions/3504848/access-com-vtable-from-c-sharp)

我要做的是通过来自 c# 的方法指针从 com 对象调用方法

我知道方法指针不是必需的，但在这种特殊情况下它是必需的。

为什么我需要方法指针？

我想通过后期绑定从 Word.Content Control 访问 SetPlaceholderText 方法。.NET->COM 中的所有后期绑定功能都使用 IDispatch 接口中的 Invoke 方法，从 com 对象实现。Word.ContentControl 类中的 Invoke 方法有 bug！它可以早期绑定，因为互操作运行时避免调用并使用方法指针。（这也是我想要处理的问题）。它不可能使用带有 vb 后期绑定、c# 动态或 GetType().Invoke 的方法...

我使用链接帖子中的代码作为模板：

```
[UnmanagedFunctionPointer(CallingConvention.StdCall)]
public delegate void SetPlaceHolderTextCallback(
      [MarshalAs(28)] [In] object BuildingBlock = null,
      [MarshalAs(28)] [In] object Range = null, 
      [MarshalAs(19)] [In] string Text = "");

object contentControl = GetContentControlProx();
IntPtr comPtr = Marshal.GetComInterfaceForObject(contentControl,
                                         typeof(ContentControl));
IntPtr vTable = Marshal.ReadIntPtr(comPtr); 

int start = Marshal.GetStartComSlot(typeof(ContentControl));
int end = Marshal.GetEndComSlot(typeof(ContentControl));

SetPlaceHolderTextCallback invoker = null;
ComMemberType mType = MemberTypes.Method;
for (int i = start; i < end; i++)
{
   System.Reflection.MemberInfo mi = 
   Marshal.GetMethodInfoForComSlot(typeof(ContentControl), i, ref mType);
   if (mi.Name == "SetPlaceholderText")
   {
      IntPtr methodPointer = Marshal.ReadIntPtr(vTable, i * 
                                  Marshal.SizeOf(typeof(IntPtr)));
      invoker = Marshal.GetDelegateForFunctionPointer(methodPointer,
      typeof(SetPlaceHolderTextCallback)) as SetPlaceHolderTextCallback;
      break;
   }
}

invoker(Type.Missing, Type.Missing, "helloWorld"); 
```

调用失败并出现 AccessViolationException。我暂时不知道......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T05:57:22.930

好像我的问题已经解决了。jochen manns 的博客文章给了我答案。第一个参数必须是类实例的 IntPtr。

```
<!-- language: lang-cs -->
    IntPtr adressPointer = Marshal.GetComInterfaceForObject(control, 
                                    typeof(Word.ContentControl));
    invoker(adressPointer, null, null, "helloWorld");
<!-- language: lang-cs --> 
```

工作！

# c++ - g++ 4.7.2 中缺少 std::stoi 吗？

> ID：14743904
> 
> 赞同：11
> 
> 时间：2013-02-07T05:02:55.237
> 
> 标签：c++, compiler-errors, g++, std, c++-standard-library

当我尝试使用 std::stoi 并尝试编译它时，我收到错误消息“stoi is not a member of std”。我从命令行使用 g++ 4.7.2，所以它不会是 IDE 错误，我的所有包含都按顺序排列，g++4.7.2 默认使用 c++11。如果有帮助，我的操作系统是 Ubuntu 12.10。有什么我没有配置的吗？

```
#include <iostream>
#include <string>

using namespace std;

int main(){
  string theAnswer = "42";
  int ans = std::stoi(theAnswer, 0, 10);

  cout << "The answer to everything is " << ans << endl;
} 
```

不会编译。但这并没有什么问题。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-02-07T05:31:05.297

`std::stoi()`[在C++11](http://www.cplusplus.com/reference/string/stoi/?kw=stoi)中是新的，所以你必须确保你编译它：

```
g++ -std=c++11 example.cpp 
```

或者

```
g++ -std=c++0x example.cpp 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-11-08T18:36:20.183

对于旧版本的 C++ 编译器不支持 stoi。对于旧版本，您可以使用以下代码段将字符串转换为整数。

```
#include <iostream>
#include <string>
#include <cstdlib>
using namespace std;

int main() {
    string input;
    cin >> input;
    int s = std::atoi(input.c_str());
    cout<<s<<endl;
    return 0;
} 
```

# jquery - 嵌套 div - 100% 宽度嵌套在固定宽度的容器中

> ID：14743905
> 
> 赞同：4
> 
> 时间：2013-02-07T05:02:56.290
> 
> 标签：jquery, html, css

`div B`当嵌套在`Div A`其中具有固定宽度 时，如何获得100% 的宽度？![在此处输入图像描述](../Images/ce50fc41791d3b2a64957931ab640eb0.png)

```
.divA{width:600px; margin:0 auto;}
.divB{width:100%; height:20px;  background-color:black}

.filler{height:800px; background-color:grey} 
```

```
<div class='divA'>
 <div class='filler'></div>
 <div class='divB'></div>
</div> 
```

**编辑**问题是：我`.divA`必须`position:relative`拿出

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T05:05:50.227

```
.divA {
    width: 600px;
    margin: 0 auto;
}.divB {
    width: 100 % ;
    height: 20px;
    background - color: black;
    position: absolute;
    left: 0
}

.filler {
    height: 800px;
    background - color: grey
} 
```

你可以设置`position:absolute`和`left:0`

**[演示](http://jsfiddle.net/eVprt/)**

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-07T05:10:44.317

采用

```
.divB {
    width:100%;
    height:20px;
    min-width:600px;
    background-color:black;
    position:absolute;
    left:0;
    right:0;

 } 
```

[全屏视图](http://jsfiddle.net/x4XKm/embedded/result/)

[**小提琴**](http://jsfiddle.net/x4XKm/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-07T05:16:57.563

```
.divA { width: 600px;    margin: 0 auto;}

.divB { width: 100 % ; height: 20px; background-color: black; position: absolute; left: 0;
}  

.filler {    height: 800px; background-color: grey;   } 
```

# django - Django DateField 不允许为空

> ID：14743908
> 
> 赞同：2
> 
> 时间：2013-02-07T05:03:22.077
> 
> 标签：django, forms, date, null, models

这似乎是一个常见问题，但此处其他问题中建议的补救措施似乎对我不起作用。

我正在通过 html 表单提交一些日期，有些不是必需的，可以为空白。但是我收到了错误

```
[u'Enter a valid date in YYYY-MM-DD format.'] 
```

下面是我的模型文件

```
class ProjectM(models.Model):
    order_received = models.DateField(null=True,blank=True) 
```

数据库

```
Field                  | Type         | Null | Key | Default | Extra
order_received         | date         | YES  |     | NULL    | 
```

因此，按照我的理解，我应该在模型文件中将其设置为 True 以表示 null 和空白，并确保在我的 mysql DB 中我允许 NULL。但是我仍然得到上面提到的验证错误，当我检查这个特定字段的 POST 数据中的值时，它是''。我尝试更改正在生成的 html 中的值以检查空字段并将值设为“null”，但这似乎也不起作用。

任何帮助，将不胜感激 ：）

更新：@Cathy，这里是描述问题的模式代码。我省略了一些与问题完全无关的代码，并对其进行了一些简化。基本上，我正在构建一个小型数据库网络前端，它只是将记录拉出，以表格格式显示在表单中，并允许您编辑和更新记录。它会很好地拉出一个空白日期字段，但不会让我更新。

模板

```
{% for record in records %}
<form method="post" action="">
<tr>
<td><input type="submit" value="{{ record.id }}" name="submit"></td>
<td><input type="text" value="{{ record.pm }}" name="pm"></td>
<td><input type="text" value="{{ record.spec }}" name="spec"></td>
<td><input type="date" value="{{ record.order_received|date:"Y-m-d" }}" name="order_received"></td>
</tr>
</form>
{% endfor %} 
```

楷模

```
class ProjectM(models.Model):
    pm = models.CharField(max_length="200")
    spec = models.CharField(max_length="200")
    order_received = models.DateField(null=True,blank=True) 
```

看法

```
def all(request):
    if request.method == 'POST':
        id = request.POST['submit']
        pm = request.POST['pm']
        spec = request.POST['spec']
        order_received = request.POST['order_received']
        if not order_received:
            order_received = 'None'
        update = ProjectM.objects.get(pk=int(id))
        update.pm = pm
        update.spec = spec
        update.order_received = order_received
        update.save() 
```

更新模板代码

```
{% if record.order_received %}
 <td>
  <div class="styled-dateentered">
   <input class="entered" name='order_received{{ record.id }}' id="order_received{{ record.id }}" type="date" value="{{ record.order_received|date:"Y-m-d" }}">
  </div>
 </td>
{% else %}
 <td>
  <div class="styled-datenotentered">
   <input class="notentered" id="order_received{{ record.id }}" name="order_received{{ record.id }}" type="date" value="None">
  </div>
 </td>
{% endif %} 
```

我希望这有帮助。我真的很感激帮助。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T07:46:49.503

如果您使用的是`ModelForm`wich 代表此模型`ProjectM`，例如：

```
class ProjectMForm(ModelForm):
    class Meta:
        model = ProjectM 
```

您应该没有任何问题，但请确保您没有这种名为 的字段，而 this`order_received`中没有`required=False`参数`form`。如果您想拥有一个具有此名称的字段，您应该这样做：`order_received = forms.DateField(required=False)`

# objective-c - “照片”的本地声明隐藏了实例变量

> ID：14743909
> 
> 赞同：0
> 
> 时间：2013-02-07T05:03:24.393
> 
> 标签：objective-c, properties, synthesize

编译器向我显示警告，因为“照片”的本地声明隐藏了实例变量。我不明白发生了什么事。

```
// PTKData.h

@interface PTKData : NSObject {

    UIImage *photo;
}

@property ( nonatomic, retain ) UIImage *photo;

- ( void ) doSomething: ( UIImage * )photo;

@end

// PTKData.m

@synthesize photo = _photo;

- ( void ) doSomething: ( UIImage * )photo {

    _photo = photo;
} 
```

据我了解， @synthesize **photo** **= _photo**在方法中存在相同的局部变量名称时将 photo重命名为**_photo 。**我无法在我的代码中查找导致警告的问题。

 ****先感谢您。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T05:16:27.097

在您的代码中，您正在创建两个 ivar：

顶部有这一行：

```
UIImage *photo;  // Creates an ivar called photo 
```

合成时的第二个`photo`：

```
@synthesize photo = _photo; // Creates an ivar called _photo 
```

我猜你只想要第二个，并且可以简单地删除整个第一行。`self.photo`（无论如何，它根本没有关联，就像`_photo`是。）****

# iphone - 接受或拒绝来自 iPhone 的蓝牙设备（如智能手表）上的呼叫？

> ID：14743912
> 
> 赞同：0
> 
> 时间：2013-02-07T05:03:42.053
> 
> 标签：iphone, ios, bluetooth, core-bluetooth, sony-smartwatch

在一些智能手表（如 pebble 和 meta watch）中，可以在智能手表上接听和拒绝电话。如何使用 MAP 或 PBAP 在 iPhone 和蓝牙设备之间传输通话相关信息。我想接听来自类似于耳机的蓝牙设备的电话，我可以通过蓝牙接听电话。

是否有任何合法的 api 或任何指针来完成这个？

编辑

Metawatch有内置麦克风和扬声器，它实现了HFP和PBAP。如果智能手表内置了麦克风和扬声器，如果它实现了HFP，则可以从手表接听电话，但Pebble没有内置麦克风和扬声器。Pebble 仍然能够接听电话并将其路由到耳机。Pebble 在 iOS 上支持 HFP、MAP、AVRCP 和 SPP，它是一个 MFi。如何在应用程序中实现相同的功能？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-02-07T18:32:59.537

您可以编写自己的应用程序来拦截来电事件，并使用您自己的通信机制（通过蓝牙）将此信息传达给您的设备（即手表）有了这个，您可以相当容易地将来电指示传递给手表，接受呼叫更复杂由于您需要能够拦截正在进行的蓝牙配置文件连接，Android 具有提供一些功能的 BluetoothHeadset 类，而 iOS 没有直接的方法（但有可能）

# android - Android 上下文菜单（类似于音乐应用）

> ID：14743913
> 
> 赞同：2
> 
> 时间：2013-02-07T05:03:47.603
> 
> 标签：android

我想为列表视图创建一个上下文菜单，类似于列表视图中谷歌播放音乐应用程序使用的菜单。（见截图。三角形按钮打开专辑的菜单。然后可以根据所选项目选择不同的选项。）但我也在其他应用程序中看到了这个元素。

[https://lh5.ggpht.com/IvSpTcmdyUOC9GoX-x528xAzy9jEPjWCLcNcru4CBEcUNZ-YHo0y2TQHcGmuvOQ2zg](https://lh5.ggpht.com/IvSpTcmdyUOC9GoX-x528xAzy9jEPjWCLcNcru4CBEcUNZ-YHo0y2TQHcGmuvOQ2zg)

问题是我既不知道如何正确实现三角形按钮（这只是一个普通的图像按钮吗？）也不知道如何为每个条目打开该弹出窗口。

我尝试过的一种方法是使用微调器。但问题是微调器总是和其中最长的元素一样宽，而不仅仅是三角形。否则这将是一个很好的解决方案。有没有办法将微调器设置为更小的尺寸并隐藏它下方的水平线？

或者微调器是完全错误的方法，我应该以不同的方式解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T05:59:36.980

您应该使用 Button 或 ImageButton 来触发 PopupMenu。您可以使用[Android Holo Colors](http://android-holo-colors.com/)创建背景图像。或者，Holo 默认微调器背景也可以解决问题。

单击 Button 时，您应该触发[PopupMenu](http://developer.android.com/guide/topics/ui/menus.html#PopupMenu)。Android PopupMenu 适用于 Android SDK API 11+。因此，如果您要支持较低版本，则应考虑使用[HoloEverywhere](https://github.com/ChristopheVersieux/HoloEverywhere)等外部库。

Spinner Widget 不适合您的目的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T05:27:40.663

我以前没有真正使用过音乐应用程序，但我会尝试根据我从屏幕截图中的理解来回答这个问题。在我看来，出现的选项显示在一个简单的对话框中。此对话框有一个列表，可以按照[此处](http://developer.android.com/guide/topics/ui/dialogs.html#AddingAList)给出的方式轻松实现。
所以，你可以做的是在列表项中包含一个`Button`、或`ImageView`、`ImageButton`或任何其他`View`项，然后单击它将显示对话框。

# emacs - 使用 org-mode 折叠/展开 .emacs 文件的部分

> ID：14743919
> 
> 赞同：8
> 
> 时间：2013-02-07T05:04:23.097
> 
> 标签：emacs, elisp, org-mode

我最近学习了 emacs 的 org-mode 的基础知识，不禁想象将折叠/展开概念应用于源文件的某些部分。我希望能够将我的 .emacs 文件分成子部分，并且只在加载时显示标题，有点像下面这样：

```
; ERC config...

; DIRED config...

; MISC config... 
```

一旦扩展，其中的每一个当然都会成为许多代码行的标题，如下所示：

```
; ERC config
(defun start-irc ()
  (interactive)
  (erc-tls :server "irc.freenode.net" :port 6697 :nick "foo"))

; DIRED config...

; MISC config... 
```

那么这可能吗？我怎么能用 emacs 24.2 完成这样的事情？

谢谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-07T05:11:29.330

尽管它很好`org-mode`，但它确实需要一些结构，我不相信它可以按照您在`.emacs`文件中想要的方式进行维护。

行之有效*的*是`folding-mode`. [在wiki 页面](http://www.emacswiki.org/emacs/FoldingMode)上查看它的信息，但基本上你所做的是围绕你想要折叠的代码块设置注释，如下所示：

```
;;{{{ some folder of some kind

(a few lines)
(of lisp)
(this "code" is just filler)

;;}}}

;;{{{ a different folder

(some more elisp code)

;;}}} 
```

当它折叠起来时，它看起来像：

```
;;{{{ some folder of some kind...

;;{{{ a different folder... 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-02-07T06:23:47.343

[Babel](http://orgmode.org/worg/org-contrib/babel)使您能够准确地实现这一点（即在 org 模式下管理您的 init 文件）。具体见： http: [//orgmode.org/worg/org-contrib/babel/intro.html#emacs-initialization](http://orgmode.org/worg/org-contrib/babel/intro.html#emacs-initialization)

我自己，我`outline-minor-mode`在我的 init 文件中使用了类似的目的。各种事物都被视为大纲标题，但您可以将其设置`outline-regexp`为文件局部变量以限制该行为，然后您可以切换事物的打开和关闭`outline-toggle-children`（您可以绑定到一些方便的键）。切换命令适用于该部分的任何位置，而不仅仅是标题。

我以默认情况下要折叠的标题开始，`;;;; *`并以以下方式结束我的 init 文件：

```
;;; Local Variables:
;;; outline-regexp: ";;;; "
;;; eval:(progn (outline-minor-mode 1) (while (re-search-forward "^;;;; \\* " nil t) (outline-toggle-children)))
;;; End: 
```

在您的实例中，您可以使用：

```
;;; Local Variables:
;;; outline-regexp: "; "
;;; eval:(progn (outline-minor-mode 1) (hide-body))
;;; End: 
```

在效果上与 Trey 的建议非常相似，尽管我希望通过折叠你可以轻松地嵌套我没有考虑的部分（没有必要这样做）。我觉得大纲方法使文件看起来稍微干净一些，如果这对你很重要的话。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-05-05T04:15:18.850

您还可以查看新的[Outshine](https://github.com/tj64/outshine)包，它与 outline-minor-mode 一起使用，使其感觉更像 org-mode。在 (e)lisp 文件中，outshine 将分号序列解释为标题，因此所有遵循标准注释约定的现有代码都可以折叠而无需任何更改。许多类似 org-mode 的键绑定（如 TAB 折叠/展开标题等）也可以工作。

# javascript - 将 Random.org 数据解析为 JS 中的 int

> ID：14743920
> 
> 赞同：3
> 
> 时间：2013-02-07T05:04:26.507
> 
> 标签：javascript, html

我有一个用于测试 CSS 动画[的小型网络应用程序。](http://misc.bhstudios.org/CSS%20Die.htm)我已经让它工作了，但我想要更多真正的随机性，所以我试图从[Random.org](http://www.random.org/integers/?num=1&min=1&max=6&col=1&base=10&format=plain&rnd=new)中提取。**如何将[Random.org 的结果](http://www.random.org/integers/?num=1&min=1&max=6&col=1&base=10&format=plain&rnd=new)转换为 JavaScript 变量并将其用作 int？**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-07T05:07:38.567

您用于`$.ajax`加载站点，然后`parseInt(x)`将其传递给处理随机性的函数。

例如：

```
$.ajax({
    "type": "GET",
    "url": "http://www.random.org/integers/?num=1&min=1&max=6&col=1&base=10&format=plain&rnd=new",
    "success": function( data, status, xhr ){
         send_the_number_to_a_handler( parseInt( data ) );
    }
}); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-07T05:22:21.270

什么？？，**您可以使用 JavaScript**本身生成随机数！

```
function getRandomInt(min, max){
    return Math.floor(Math.random() * (max - min + 1)) + min;
} 
```

除非有特定需要连接到该网站，我无法猜测

其次，为了理解这一点，我查看了您的代码，发现它与我朋友 desandro 的 3dtransforms 演示太相似[**了**](http://desandro.github.com/3dtransforms/examples/cube-02-show-sides.html)

# android - 如何在sqlite datadase中存储和检索xml响应

> ID：14743924
> 
> 赞同：1
> 
> 时间：2013-02-07T05:05:00.257
> 
> 标签：android

我想将xml响应存储在sqlite中，并在来自服务器的数据来自我的响应时检索..

```
<soap:Envelope><soap:Body><Login_ValidateAuthenticatedUserResponse><Login_ValidateAuthenticatedUserResult><xs:schema id="NewDataSet"><xs:element name="NewDataSet" msdata:IsDataSet="true" msdata:UseCurrentLocale="true"><xs:complexType><xs:choice minOccurs="0" maxOccurs="unbounded"><xs:element name="Table1"><xs:complexType><xs:sequence><xs:element name="ReturnValue" type="xs:int" minOccurs="0"/><xs:element name="UserId" type="xs:string" minOccurs="0"/></xs:sequence></xs:complexType></xs:element></xs:choice></xs:complexType></xs:element></xs:schema><diffgr:diffgram><NewDataSet><Table1 diffgr:id="Table11" msdata:rowOrder="0" diffgr:hasChanges="inserted"><ReturnValue>100</ReturnValue><UserId>bc43c80d-061e1</UserId></Table1></NewDataSet></diffgr:diffgram></Login_ValidateAuthenticatedUserResult></Login_ValidateAuthenticatedUserResponse></soap:Body></soap:Envelope> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T05:19:59.327

您可以先解析 xml，然后将字段存储在您的 sqlite 中。您的数据库架构应符合您要存储的信息。
[Android 开发网站](http://developer.android.com/training/basics/network-ops/xml.html)为您提供各种解析选项。
我真的不知道你为什么要存储文件并稍后解析它。即使你想存储，那为什么要存储在数据库中呢？还有其他[存储选项](http://developer.android.com/guide/topics/data/data-storage.html)。您应该将文件存储在外部存储中，然后在以后随时使用。[此](https://stackoverflow.com/questions/2455102/writing-a-file-to-sdcard)链接为您提供如何将文件写入外部存储。

# c# - 如何在没有边框的表单周围添加阴影？

> ID：14743926
> 
> 赞同：3
> 
> 时间：2013-02-07T05:05:17.340
> 
> 标签：c#, vb.net, winforms, visual-studio-2010, gdi+

我试图弄清楚如何使用 WinForms 在无边框表单周围添加完整的阴影。我正在考虑在表格的所有四个边上添加一个阴影。

我尝试过使用 DropShadow 类，尽管它只在底角和右侧角添加阴影。

我之前在搜索中看到过这个问题被问过很多次，但我发现的所有四个方面都没有答案。

我在我的解决方案中同时使用 C# 和 VB.net 语言，因此任何关于这两种语言的帮助都会有很大帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-07T18:00:30.487

您将不得不手动绘制它。我想我以前用闪屏做过类似的事情。您需要确定阴影与表单客户区域的偏移量，并创建一个容器（更容易布局）来托管其组成控件，或者如果您需要动态阴影大小，则以编程方式重新定义其客户矩形，然后绘制边框。如果没记错的话，您将使用 alpha blending + lineargradientbrush 将阴影透明度淡化到边缘，从而获得最佳效果。

# regex - 在正则表达式中，使用星号时，您可以在重复的正则表达式中制作一些星号，重复相同的次数吗？

> ID：14743930
> 
> 赞同：3
> 
> 时间：2013-02-07T05:05:41.257
> 
> 标签：regex, repeat

很抱歉这个冗长的问题。最好举个例子。

我正在尝试将矩阵匹配为字符串：

1.  `[[]]`
2.  `[[][][]]`
3.  `[[0][1][2]]`
4.  `[[,,][,,][,,]]`
5.  `[[0,1,2][3,4,5]]`

虽然正则表达式很少好看，但这是我想出的：

```
\[(\[-?(\d+(\.\d*)?)*(,-?(\d+(\.\d*)?)*)*\])+\] 
```

它匹配一切。但是，逗号必须始终重复 n 次。如果有 5 个逗号，然后是 4 个逗号，然后是 6 个逗号，则它不是有效矩阵。有我可以使用的标志或变量吗？还是超出了正则表达式的范围？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T19:14:11.603

不，正则表达式无法做到这一点。

[这](https://en.wikipedia.org/wiki/Pumping_lemma_for_regular_languages#Use_of_lemma)是一个正式的证据，证明与您的情况非常相似的情况是不可能的。它证明了语言 L = {a ^n b ^n : n ≥ 0} 不是“正则语言”，因此无法与正则表达式匹配。这种语言本质`a*b*`上是两颗星重复相同的次数。您的案例还涉及一个明星重复相同的次数，所以这也是不可能的。

在您的情况下，最好的选择可能是使用正则表达式来匹配矩阵的每个“行”，即：对每个匹配抓取组 1 进行全局搜索`\[([^][]*)\]`，这是行的内容，然后计算逗号的数量并比较所有计数（如果您确实需要数字，请使用您的语言的拆分操作对逗号进行拆分。）

PS：`[^][]`是除开括号和右括号外的所有字符的字符类。右括号必须是 ^ 之后的第一个字符，这是一种特殊情况。

# java - 用java打破for循环的另一种方法？

> ID：14743937
> 
> 赞同：1
> 
> 时间：2013-02-07T05:06:00.303
> 
> 标签：java

有没有其他方法可以在不使用实际***break***语句的情况下打破这个循环？问题是由于某种原因，我的教授不喜欢我们在***switch中的任何其他地方使用 break***

我在将对象添加到数组中下一个空白区域的对象数组中的方法中遇到问题

这是我的代码：（还有其他方法吗？）

```
public void add(Employee employeeObj)throws ArrayIndexOutOfBoundsException{
        try{
            for(int i= 0; i<MAX; i++){
                if(listEmployee[i] == null){
                    listEmployee[i] = employeeObj;
                    break;
                }

            }
        }catch(ArrayIndexOutOfBoundsException e){
            throw new ArrayIndexOutOfBoundsException("ERROR!");
        }
    } 
```

该方法只需要将employeeObj 添加到数组中，如果是这种情况，则会抛出异常。感谢您的帮助

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-07T05:07:56.680

试试这个：

```
 for(int i= 0; i<MAX; i++){
    if(listEmployee[i] == null){
        listEmployee[i] = employeeObj;
        i=MAX;
    } 
```

但我认为使用休息没有问题。在某些情况下，您希望停止处理循环，并且使用 a`break;`比将循环计数器设置为使循环在下一次迭代中停止的值更有意义（并且使其更具可读性！）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-07T05:07:20.770

`i = MAX`如果您没有这种微不足道的情况，您可以简单地执行或使用布尔标志。

作为个人笔记，禁止使用`break`外部`switch`声明没有任何意义。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-07T05:10:06.647

由于您的方法在这种情况下没有做任何其他事情，因此您可以使用`return`代替`break`：

```
public void add(Employee employeeObj)throws ArrayIndexOutOfBoundsException {
    try{
        for (int i= 0; i<MAX; i++) {
            if (listEmployee[i] == null) {
                listEmployee[i] = employeeObj;
                return;
            }

        }
    } catch(ArrayIndexOutOfBoundsException e) {
        throw new ArrayIndexOutOfBoundsException("ERROR!");
    }
} 
```

但总的来说，这里的其他答案更适用。也就是说，我会请你的教授解释为什么`break`不应该使用 - 恕我直言，替代品的可读性通常要低得多。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-07T05:29:32.160

> 我在将对象添加到数组中下一个空白区域的对象数组中的方法中遇到问题

我建议简单地找出数组的长度并将对象插入下一个位置。无需迭代数组的完整长度。

```
public void add(Employee employeeObj){
           int n = listEmployee.length;
                listEmployee[n] = employeeObj;        
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-07T05:30:46.213

或者你可以这样做

```
 int i = Arrays.asList(listEmployee).indexOf(null);
     if (i >= 0) {
         listEmployee[i] = employeeObj;
     } 
```

请注意， Arrays.asList 创建了一个数组视图，而不是一个新的 List

# c++ - C ++将char与字符串文字进行比较

> ID：14743941
> 
> 赞同：2
> 
> 时间：2013-02-07T05:06:21.547
> 
> 标签：c++, char, compare

初级程序员在这里...

我正在为我的计算机科学课编写一个非常简单的程序，我遇到了一个我想了解更多的问题。这是我的代码：

```
#include <iostream>

using namespace std;

int main(int argc, const char * argv[])
{
    char courseLevel;

    cout << "Will you be taking graduate or undergraduate level courses (enter 'U'"
            " for undergraduate,'G' for graduate.";
    cin >> courseLevel;

    if (courseLevel == "U")
    {
        cout << "You selected undergraduate level courses.";
    }

    return 0;
} 
```

我的 if 语句收到两条错误消息：1）未指定与字符串文字的比较结果（改用 strncmp）。2) 指针和整数的比较（'int' 和 'const char*'）。

我似乎已经通过将我的 U 用单引号括起来解决了这个问题，或者该程序至少可以正常工作。但是，正如我所说，我只是想了解为什么会出现错误，以便更好地了解我在做什么。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-07T05:12:20.350

您需要改用单引号。

在 C 语言（和许多其他语言）中，[**字符常量**](http://en.wikipedia.org/wiki/C_syntax#Character_constants)是包含在单引号中的*单个*字符^(1 ：)

```
'U' 
```

虽然[**字符串文字**](http://en.wikipedia.org/wiki/C_syntax#Strings)是包含在双引号中的任意数量的字符：

```
"U" 
```

您声明`courseLevel`为单个字符：`char courseLevel;`因此您只能将其与另一个 single 进行比较`char`。

当您这样做`if (courseLevel == "U")`时，左侧是 a `char`，而右侧是 a `const char*`--*指向*`char`该字符串文字 中第一个的指针。你的编译器告诉你这个：

> 指针和整数的比较（' `int`'和' `const char*`'）

* * *

所以你的选择是：

```
if (courseLevel == 'U')       // compare char to char 
```

或者，例如：

```
if (courseLevel == "U"[0])    // compare char to first char in string 
```

* * *

1.  完整性注意事项：您*可以*使用[多字符常量](https://stackoverflow.com/questions/699301/is-int-x-fooo-a-compiler-extension)：

    int a = 'abcd'; // GCC 中的 0x61626364

但这肯定不是你要找的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-07T05:17:20.313

拉普茨是对的，但我认为更多的阐述应该会有所帮助......

```
courseLevel == "U" 
```

在 C 和 C++ 中，双引号创建*字符串字面量*- 它是字符数组，以数字 0 ASCII-NUL 终止标记字符结尾，因此程序可以计算出文本结束的位置。所以，你基本上是在问一个字符是否等于一个字符数组......它们只是无法比较。类似的有效问题是：

*   此字符变量是否保存特定的字符值： `courseLevel == 'U'`
*   此字符变量是否出现在特定数组中： `strchr(courseLevel, "U")`
*   此字符变量是否匹配特定数组中的第一个元素： `courseLevel == "U"[0]`

当然，其中第一个是在您的程序中具有直观意义的那个。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-07T05:08:57.917

您收到错误的原因是因为 C 和 C++ 中的字符串文字以空字符结尾，`\0`而单个字符则没有。因此，当您将 a`char`与字符串文字进行比较时，您是将字符文字与 char 数组进行比较`{'U','\0'}`。

# actionscript-3 - Flex：在标签的UI组件构建之前，改变标签时如何调用titlewindow

> ID：14743942
> 
> 赞同：1
> 
> 时间：2013-02-07T05:06:30.037
> 
> 标签：actionscript-3, apache-flex

我的 Flex4 应用程序使用如下标签栏：

```
<s:TabBar id="tabs"/>
    <mx:ViewStack id="vs" height="100%" width="100%">
        <s:NavigatorContent label="Tab 1"  width="100%" height="100%">
            ...
        </s:NavigatorContent>
        <s:NavigatorContent label="Tab 2"  width="100%" height="100%">
            ...
        </s:NavigatorContent>
        <s:NavigatorContent label="Tab 3"  width="100%" height="100%">
            ...
        </s:NavigatorContent>
    </mx:ViewStack>
</s:TabBar> 
```

该应用程序默认使用 Tab 1 打开。Tab 2 尚未构建。

问题是，当我将选项卡更改为选项卡 2 时，Flex 需要很长时间来构建选项卡 2 UI 组件并显示选项卡内容。该应用程序在此过程中基本冻结。我需要向用户提供一些指示，表明他/她需要等待几秒钟。

我尝试使用光标管理器创建一个忙碌的鼠标图标。这不起作用（例如，光标仅在 Tab 2 完成构建时更改）。

我想在标签构建时简单地显示一个标题窗口。但是，当我切换选项卡时，我不知道如何启动它，这样标题窗口就会出现在选项卡 2 构建之前和期间。

我知道 mx ViewStack 可以有一个`change=""`属性，但是当我使用它时，标题窗口不会出现，直到 Tab 2 完成加载。

我不确定如何`callLater()`在以下场景中实现功能。

谁能帮我弄清楚如何触发标题窗口，以便它在 Tab 2 构建之前和期间出现？

参考：

[当应用程序繁忙时，我们如何在 flex 中实现“请稍候......”屏幕](https://stackoverflow.com/questions/2453508/how-we-implement-please-wait-screen-in-flex-when-app-is-busy)

[Flex：寻找设计模式以在我的应用程序“忙碌”时显示忙碌光标](https://stackoverflow.com/questions/14740583/flex-looking-for-design-pattern-to-display-busy-cursor-while-my-app-is-busy)

更新 1：

通过`createDeferredContent`下面 David的`setTimeout`评论和 weltraumpirat 在上面链接的上一篇文章中的评论，我能够拼凑出一个解决方案，导致在加载选项卡 2 中的内容时显示一个忙碌的光标。这是我所做的：

创建 Tab 2 作为实现以下功能的组件：

```
<s:VGroup 
    ...
    preinitialize="preinit"
    creationComplete="start1">

    private function preinit():void {
        mx.managers.CursorManager.setBusyCursor();
    }

    private function start1():void {
        setTimeout(start2,100);
    }

    private function start2():void {
        // create mxml components
        myBC.createDeferredContent();

        // place any required actionscript code here
        mx.managers.CursorManager.removeBusyCursor();
    }

    ...

    <s:BorderContainer id="myBC" creationPolicy="none">
        <!--- place all mxml code here to create layout -->
    </s:BorderContainer>

</s:VGroup> 
```

几点注意事项：

(1) 虽然在 Tab 2 完成构建之前确实显示了忙碌光标，但应用程序仍然冻结，并且当用户移动鼠标时，忙碌光标保持在屏幕上，而默认鼠标图标（箭头）在屏幕上移动，由用户直到 Tab 2 完成构建并显示。不理想，但至少繁忙的光标表明应用程序正在做某事。如果我愿意，我可以将繁忙的光标替换为一个标题窗口，指示繁忙等。

(2) 将超时时间从 100 ms 更改为 50 ms 仍然会产生良好的结果。但是将其减少到 10 毫秒会导致忙碌光标仅在构建和显示所有组件时出现。可以预料，将超时减少到某个阈值以下会导致这种行为。我想知道这个超时值的阈值（例如在 10 到 50 毫秒之间）是否取决于客户端计算机？或者，如果我使用 100 毫秒，是否可以安全地覆盖所有客户端计算机？（我们怎么知道它会？）

(3) 我原以为替换`setTimeout(start2,100);`和`callLater(start2);`删除`creationPolicy="none"`应该会产生类似的结果，但事实并非如此（例如，繁忙的光标永远不会出现，应用程序会冻结几秒钟，直到显示 Tab 2）。我以前从未使用`callLater()`过，所以也许我做错了什么（？）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T08:28:25.607

如果您在 Tab2 初始化期间有大量计算，您可以将它们分成小块并使用 callLater 机制连续执行它们。

这是非常简化的示例：

```
<?xml version="1.0" encoding="utf-8"?>
<s:Application xmlns:fx="http://ns.adobe.com/mxml/2009" 
           xmlns:s="library://ns.adobe.com/flex/spark" 
           xmlns:mx="library://ns.adobe.com/flex/mx" minWidth="955" minHeight="600">
<fx:Script>
    <![CDATA[
        import mx.core.FlexGlobals;
        import mx.events.FlexEvent;
        import mx.managers.CursorManager;

        private var i:int = 0;

        protected function nc2_initializeHandler(event:FlexEvent):void
        {
            FlexGlobals.topLevelApplication.enabled = false;                
            CursorManager.setBusyCursor();
            callLater(initTab2);
        }

        protected function initTab2():void
        {
            var j:int;

            //Part of calculations
            for (j=0; j< 10000; j++)
            {
                i++;
            }   

            //Check if completed
            if (i<1000000)
            {
                //If not call again
                callLater(initTab2);                    
            }
            else
            {
                //Finished
                CursorManager.removeBusyCursor();
                FlexGlobals.topLevelApplication.enabled = true;
            }
        }

    ]]>
</fx:Script>
<fx:Declarations>
    <!-- Place non-visual elements (e.g., services, value objects) here -->
</fx:Declarations>
<s:VGroup gap="10" top="10" left="10">
    <s:TabBar id="tabs"  dataProvider="{vs}"/>
    <mx:ViewStack id="vs" width="100%" >
        <s:NavigatorContent label="Tab 1"  width="100%" height="100%" >
            <s:Label text="Tab1 content"/>
        </s:NavigatorContent>
        <s:NavigatorContent id="nc2" label="Tab 2"  width="100%" height="100%">
            <s:Label text="Tab2 content" initialize="nc2_initializeHandler(event)"/>
        </s:NavigatorContent>
        <s:NavigatorContent label="Tab 3"  width="100%" height="100%">
            <s:Label text="Tab3 content"/>
        </s:NavigatorContent>
    </mx:ViewStack>

</s:VGroup> 
```

# backbone.js - 如何在视图元素上分配不同的类名

> ID：14743945
> 
> 赞同：1
> 
> 时间：2013-02-07T05:06:34.000
> 
> 标签：backbone.js, backbone-views

在我的 Backbone 视图中，我正在设置标记名、类名、临时值。除了类名之外，所有这些都可以正常工作。

我如何设置类名..或者我的代码有什么错误..

```
define(["singleton","listCollection","listModel"],function(singleton,collection,listModel){
    singleton.view = Backbone.View.extend({
        tagName     :'article',
        className   :'indBoard',
        projectName : true,
        template0   : _.template($('#listTemplate').html()),
        template1   : _.template($('#boardTemplate').html()),
        initialize  :function(options){
            this.template = this['template'+options.tempNo];
            this.tagName = options.tagName;
                    //i am changing to 'li' works
            this.className = options.cName; 
                    //changing to new class name not working
            console.log(options.cName);//consoles new class name properly
                  this.projectName = options.subTempNo == 0 ?true:false;                 
                   //condition as well works..
        },
        render:function(){
            var temp = this.template;
            this.$el.html(temp(this.model.toJSON()));
            return this;
        }
    });
    return singleton.view;
}); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-07T05:56:57.910

如果您`options.className`在创建视图实例时设置而不是`options.cName`，则不需要尝试`initialize`像那样设置它（对于 tagName 也是如此）。

尝试这样的事情：

`var view = new singleton.view({className: 'someClass'});`

`className`是 Backbone 在视图创建过程中寻找的特殊选项之一。

从[骨干源](http://backbonejs.org/backbone.js)：

```
// List of view options to be merged as properties.
var viewOptions = ['model', 'collection', 'el', 'id', 'attributes', 'className', 'tagName', 'events']; 
```

实际上，我认为`tagName`对您有用的原因是因为它正在被 Backbone 合并，而不是因为您将其设置为`initialize`.

# javascript - 如何通过javascript或jquery刷新选择中的默认显示选项？

> ID：14743946
> 
> 赞同：2
> 
> 时间：2013-02-07T05:06:47.417
> 
> 标签：javascript, html, select

html代码：

```
<select>
    <br>
    <option>1</option><br>
    <option>2</option><br>
</select> 
```

此选择将默认显示第一个选项（显示 1）。
现在我想在dom准备好时更改select以通过jquery显示第二项，但我尝试了几次，都失败了。以下是我的尝试：

1.  $('select').prop('selectIndex', 1);
2.  $('option').eq(1).attr('selected', 'selected');
3.  $('option').eq(1).prop('selected', true);
4.  默认在html代码中设置select的样式为'display:none'，然后尝试以上三种方式，最后调用$('select').show()

也许，我只是在设置 dom 值，而不是告诉浏览器刷新“选择”。

你知道在选择中刷新默认显示选项的另一种方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T05:15:18.240

您必须将`value`s 添加到您的选项中`select`。

```
<select>
  <option value="1">First</option>
  <option value="2">Second</option>
</select> 
```

然后，只需设置值“2”。

```
$("select").val("2"); 
```

或者，您可以简单地从 设置第二个值`select`。

```
$("select").val(2); 
```

[请参阅此处](http://goo.gl/pYrak)的工作示例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T05:12:32.497

这就够了

```
$("select").val(2); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-07T05:16:53.477

我想你想在页面加载时选择选项 2。

```
<select>
    <option>1</option>
    <option selected="selected">2</option>
</select> 
```

# javascript - 无法在javascript中将未定义转换为对象

> ID：14743947
> 
> 赞同：1
> 
> 时间：2013-02-07T05:06:52.577
> 
> 标签：javascript, jquery

更新：我添加了小提琴。请参考[这里](http://jsfiddle.net/fPVaJ/)。使用 Web 控制台查看错误。

我正在为旅行推销员问题编写代码。这是代码：

```
var ind =[];      //values selected 
var cp =[];
var X;
var Y;
var tour = [];

// no values selected in the starting
for(j=0;j<friends_cnt;j++) {
  ind[j] = 0;
}

// distances at i,i infinity
for(i=0;i<friends_cnt;i++) {
  distance[i][i] = 9999999999999;
}

var k = 0;
var X = 0;

tour[k] =  X;
ind[X] = 1;

var i =1;
while(i<friends_cnt &&  ind[i] === 0) {
  var min = 9999999999999;

    // finding minimum of the undeleted values
    for(j=0;j<friends_cnt;j++) {
      if(ind[j] === 0) {
        if(distance[X][j] < min) {
          min = distance[X][j];
          Y = j;  // y is the min city
        }
      }
    }

    k = k+1;               // counter for the starting city
    tour[k] = Y;           //city added
    ind[Y] = 1;            

   X = Y;
   i++;
}

k = k+1;
tour[k] = tour[1];

for(var q=0;q<k+1;q++) {
  console.log(tour[q]);
}

});
}); 
```

现在每当我运行我的程序时，它都会显示错误

`TypeError: can't convert undefined to object`

在行中

```
var min = 9999999999999; 
```

我的问题是这是因为 JavaScript 无法处理大数字或其他问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T05:11:43.060

Javascript 的最大数字是 1.7976931348623157e+308 （又名 var `Number.MAX_VALUE`），所以这应该不是问题。

如果你试图访问一个对象的一个​​对象，它是行不通的。

你有`distance[X][j]`. 试图访问`j`. `distance[X]`要解决此问题，请定义`distance[X]`为对象：

```
distance[X] = []; 
```

其他示例：

```
var distance = [];

distance[i]
//undefined;

distance[i][i]
//syntax error

distance[i] = [];

distance[i][i]
//undefined; 
```

对于 2D 数组，请参阅[此](https://stackoverflow.com/questions/966225/how-can-i-create-a-two-dimensional-array-in-javascript)问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T05:10:19.377

试试这个以获得最小数量 `var min = int.MinValue`
对于最大数量 `var max = int.MaxValue`

**编辑**
参考[参考](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Number/MAX_VALUE)

```
Number.Max_Value  
Number.Min_Value 
```

**更新**
如果你看到你的代码你已经填写了`ind[]`from`0`

```
for(j=0;j<friends_cnt;j++) {
  ind[j] = 0;
} 
```

在您的 while 条件下，您设置了`i`from的值`1`。所以对于最后一个元素，它可能会抛出错误

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-07T07:05:24.940

问题实际上在这里：

```
distance[i][i] = 9999999999999; 
```

如果`distance`is`undefined`或空数组，则该语句将失败。这应该解决它：

```
var distance = []; // <-- this is missing from the top of your code

// ...

if (!distance[i]) {
    distance[i] = [];
}
distance[i][i] = 9999999999999; 
```

# python - 使用来自 html 结构的索引来抓取数据的问题

> ID：14743948
> 
> 赞同：0
> 
> 时间：2013-02-07T05:07:04.720
> 
> 标签：python, html, python-2.7, html-parsing, beautifulsoup

我正在从 30-40 个网页中的以下 html 结构中抓取数据，例如`https://www.o2.co.uk/shop/tariffs/sony/xperia-z-purple/`：

```
 <td class="monthlyCost">£13<span>.50</span></td>
              <td class="phoneCost">£479.99</td>
              <td><span class="lowLight">24 Months</span></td>
    <td>50</td>
    <td>Unlimited</td>
    <td class="dataAllowance">100MB</td>
    <td class="extras"> 
```

我正在索引以抓取标签下存在的数据，这些`td`标签没有像**50** & **Unlimited**这样的类，它对应于数据集中的 Minutes 和 texts 列。我正在使用的代码是：

```
 results       = tariff_link_soup.findAll('td', {"class": None})
        minutes = results[1]
        texts = results[2]
        print minutes,texts 
```

所有这 30-40 个 webplink 都出现在`https://www.o2.co.uk/shop/phones/`网页上，我在这个网页上找到这些链接访问它们然后到达这个所需的网页，所有这些最终设备网页都遵循相同的结构。

**问题**：我希望只获得分钟和文本值，例如 50 & Unlimited、200 & Unlimited 并且出现在所有网页的第 2 和第 3 索引处。当我打印数据时，我仍然得到一些其他值，例如。`500MB`，`100MB`它们是`dataAllowance`class 和 td 标签下的值。我使用类作为`None`属性，但仍然无法获取所需的数据。我检查了 html 结构，它在页面之间是一致的。

请帮助我解决这个问题，因为我无法理解这种异常的原因。

**更新：**我正在使用的整个 Python 代码：

```
urls  =  ['https://www.o2.co.uk/shop/phones/',
          'https://www.o2.co.uk/shop/phones/?payGo=true']

plans =  ['Pay Monthly','Pay & Go']
for url,plan in zip(urls,plans):

    if plan == 'Pay Monthly':
        device_links = parse().direct_url(url,'span', {"class": "model"})

        for device_link in device_links:
            device_link.parent['href'] = urlparse.urljoin(url, device_link.parent['href'])            
            device_link_page           = urllib2.urlopen(device_link.parent['href'])
            device_link_soup           = BeautifulSoup(device_link_page)

        dev_names = device_link_soup.find('h1')
        for devname in dev_names:

            tariff_link = device_link_soup.find('a',text = re.compile('View tariffs'))

            tariff_link['href'] = urlparse.urljoin(url, tariff_link['href'])

            tariff_link_page    = urllib2.urlopen(tariff_link['href'])
            tariff_link_soup    = BeautifulSoup(tariff_link_page)
            dev_price     = tariff_link_soup.findAll('td', {"class": "phoneCost"})
            monthly_price = tariff_link_soup.findAll('td', {"class": "monthlyCost"})
            tariff_length = tariff_link_soup.findAll('span', {"class": "lowLight"})
            data_plan     = tariff_link_soup.findAll('td', {"class": "dataAllowance"})
            results       = tariff_link_soup.xpath('//td[not(@class)]')
            print results[1].text
            print results[2].text 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T13:00:41.187

我终于使用以下代码来解决我的问题：

```
 for row in tariff_link_soup('table', {'id' : 'tariffTable'})[0].tbody('tr'):                                                                                                                                                               
        tds = row('td')                                                                                                                                                   
        #print tds[0].text,tds[1].text,tds[2].text,tds[3].text,tds[4].text,tds[5].text
        monthly_prices = unicode(tds[0].text).encode('utf8').replace("Â£","").replace("FREE","0").replace("Free","0").strip()
        dev_prices     = unicode(tds[1].text).encode('utf8').replace("Â£","").replace("FREE","0").replace("Free","0").strip()
        tariff_lengths = unicode(tds[2].text).encode('utf8').strip()
        minutes        = unicode(tds[3].text).encode('utf8').strip()
        texts          = unicode(tds[4].text).encode('utf8').strip()
        data           = unicode(tds[5].text).encode('utf8').strip()
        device_names   = unicode(dev_names).encode('utf8').strip() 
```

我在这里使用数据所在的表格结构逐行访问所需的数据。我正在获取连续存在的所有元素，并将名称分配给我的数据中所需的元素。

# pdf - Adobe Reader 接受哪些脚本？

> ID：14743949
> 
> 赞同：1
> 
> 时间：2013-02-07T05:07:11.677
> 
> 标签：pdf, adobe-reader

我正在尝试控制 Edit->Preferences 中的一些基本设置，例如缩放级别和分辨率。有什么建议么？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T08:24:51.800

这可以通过设置查看器首选项来完成。有关一些示例，请参见[http://itextpdf.com/themes/keyword.php?id=229](http://itextpdf.com/themes/keyword.php?id=229)。

可以使用 JavaScript 更改查看器首选项，但最好的方法不是使用脚本，而是通过在 PDF 文档的根字典（又名 ）中为`/PageLayout`、`/PageMode`和键设置正确的条目。`/ViewerPreferences``/Catalog`

请查阅 ISO-32000-1 以了解这些键的所有可能值。ISO-32000-1 草案可以从 Adob​​e 网站免费下载。

# java - Hibernate 返回两个 Pojo 并使用 jstl 在 jsp 上显示结果

> ID：14743952
> 
> 赞同：1
> 
> 时间：2013-02-07T05:07:27.193
> 
> 标签：java, spring, hibernate, jstl, hibernate-mapping

我有我的 pojo 课程

掌握：

```
public class Master extends RecordSet{

private String empcode;
private String empname;
private String dept;

public String getEmpcode() {
    return empcode;
}
public void setEmpcode(String empcode) {
    this.empcode = empcode;
}
public String getEmpname() {
    return empname;
}
public void setEmpname(String empname) {
    this.empname = empname;
}
public String getDept() {
    return dept;
}
public void setDept(String dept) {
    this.dept = dept;
} 
```

日期范围：

```
public class DateRange extends RecordSet {
    private String  ddate;

    public String getDdate() {
        return ddate;
    }

    public void setDdate(String ddate) {
        this.ddate = ddate;
    }
} 
```

记录集：

```
public class RecordSet {
    private DateRange daterange;
    private Master master;  

public DateRange getDaterange() {
        return daterange;
    }
    public void setDaterange(DateRange daterange) {
        this.daterange = daterange;
    }
    public Master getMaster() {
        return master;
    }
    public void setMaster(Master master) {
        this.master = master;
    }

} 
```

我有我的休眠代码：

```
 SQLQuery query = session
                    .createSQLQuery("CALL AbsentReportproc(:_fromdate,:_todate)");
            query.addEntity(Master.class);
            query.addEntity(DateRange.class);
            query.setParameter("_fromdate", "2012-12-03");
            query.setParameter("_todate", "2012-12-04");

            List<Object[]> obj = query.list();
            System.out.println(obj);
            List<RecordSet> recordset = new ArrayList<RecordSet>();
            Iterator it = obj.iterator();
            while (it.hasNext()) {
                Object[] object = (Object[]) it.next();
                for (int i = 0; i < object.length; i++) {

    RecordSet set = (RecordSet) object[i];
     recordset.add(set);
        System.out.println(set);
//Here I am able to print
//edu.model.Master@15093f1
//edu.model.DateRange@e6f7d2
//edu.model.Master@19836ed
//edu.model.DateRange@3e0ebb
//edu.model.Master@39443f
//edu.model.DateRange@e6f7d2 etc................

                }
            }

    } 
```

我的要求是使用 JSTL 标签在 jsp 中显示两者（Master 和 DateRange）的结果

任何人都可以如何获得最终的 List 对象来迭代和显示两个 pojo 的结果

我想显示 Master Pojo 的 EmployeeName、Code、Dept 和 DateRange Pojo 的 ddate？

当我迭代 RecordSet 列表时，我无法打印值（获取空指针异常）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T07:51:37.020

你可以这样做：

```
<c:forEach var="record" items="${recordset}">
    <c:out value="${record.master.empcode}" />
    <c:out value="${record.master.empname}" />
    <c:out value="${record.master.dept}" />
    <c:out value="${record.daterange.ddate}" />
</c:forEach> 
```

**编辑**：

```
List<Object[]> obj = query.list(); 
List<RecordSet> recordset = new ArrayList<RecordSet>(); 
for (Object[] item: obj) {
    Master master = null;
    DateRange dateRange = null;
    if (item[0] instanceof Master) {
        Master master = (Master) item[0];
        DateRange dateRange = (DateRange) item[1];
    } else if (item[0] instanceof DateRange) {
        DateRange dateRange = (DateRange) item[0];
        Master master = (Master) item[1];
    }
    RocordSet record = new RecordSet();
    record.setMaster(master);
    record.setDateRange(dateRange);
    recordset.add(record);
} 
```

并将记录集对象返回给jsp。

希望这可以帮助。

# java - 你如何扫描所有包含空格的多个字符串？

> ID：14743954
> 
> 赞同：1
> 
> 时间：2013-02-07T05:07:39.423
> 
> 标签：java

我试图一个接一个地扫描字符串，有些可能包含空格。由于我的代码功能目前只有当您输入的每个字符串都是一个单词时它才会起作用。无论行中是否有空格，扫描连续文本行的正确方法是什么。

```
System.out.print("Enter your first name: ");
                fName = scan.next();

                System.out.print("Enter your last name: ");
                lName = scan.next();

                System.out.print("Enter your street and house number: ");
                address = scan.next();

                System.out.print("Enter your city: ");
                city = scan.next();

                System.out.print("Enter your state: ");
                state = scan.next();

                System.out.print("Enter your telephone number (no spaces): ");
                teleNum = scan.next();

                System.out.print("Enter your zip code: ");
                zip = scan.next(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T05:22:44.300

```
 String[] prompts = {
        "Enter your city: ",
        "Enter your state: ",
    };

    Scanner scanner = new Scanner(System.in);
    String line = "";
    for (String prompt : prompts) {
        System.out.println(prompt);
        if (scanner.hasNextLine()) { 
            line += scanner.nextLine();
        }
    }

    System.out.println(line); 
```

# java - 创建具有自定义外观的 JTable

> ID：14743960
> 
> 赞同：4
> 
> 时间：2013-02-07T05:07:58.163
> 
> 标签：java, swing, jtable, jtableheader

![在此处输入图像描述](../Images/f154300c3e8110c39b6b44603d06daaa.png)

我对 java swing 很陌生，我刚开始研究 JTable。我想创建一个类似于上图的 JTable？任何人都可以帮助我，因为我对 JTable 不太熟悉吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-07T05:40:12.297

[表格行渲染](http://tips4java.wordpress.com/2010/01/24/table-row-rendering/)显示了如何交替行颜色。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-07T07:54:07.020

> 如何实现如图表头的边框？

您可以获得给定 L&F 的默认表头渲染器的副本，如此处所示[，](https://stackoverflow.com/a/6644956/230513)并根据需要对其进行修改。需要[注意](https://stackoverflow.com/a/7146216/230513)的是，您可以修改特定的渲染器，如此[处](https://stackoverflow.com/a/7137801/230513)`TableColumn`所示。

# c - C - 试图在 charArray[n][] 中找到一个 char[] 并记录 n 的值

> ID：14743965
> 
> 赞同：2
> 
> 时间：2013-02-07T05:08:31.960
> 
> 标签：c, arrays, string, compare, multidimensional-array

我试图通过 fooArray 循环搜索 foo 的每个条目并在适当的条目中增加 fooCount 。正如它所代表的字符串： HAPY \0 已成功输入到 foo 和 fooArray[2] 但我无法让 fooArray[2] == foo 评估为真。

我应该为此使用 string.h 和 strcmp 还是 strstr ？
为什么 fooArray[2] == foo 不评估为真？

```
#include <stdio.h>
#include <stdlib.h>

int main(void){

    char foo[5] = "HAPY";
    static char fooArray[4][5] = {"abc", "123", "HAPY", "some"};
    int fooCount[4] = {0};
    int n;

    printf("size of fooArray: %d\n", ( sizeof(fooArray) / sizeof(fooArray[0])));

    for (n = 0; n < sizeof(fooArray) / sizeof(fooArray[0]); n++) {
        if (fooArray[n] == foo) {
            fooCount[n]++;
            break;
        }
    }

    for (n = 0; n < sizeof(fooArray) / sizeof(fooArray[0]); n++) 
        printf(" fooArray[%d] = %s \n", n, fooArray[n]);

    for (n = 0; n < sizeof(fooCount) / sizeof(fooCount[0]); n++) 
        printf(" fooCount[%d] = %d \n", n, fooCount[n]);

    system("pause");
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-07T05:19:14.153

字符串之间的`strcmp` 比较不仅仅是通过比较`==`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T05:24:05.397

正如 Raghu 所说，您需要在第一个 for 循环中使用 strcmp：

```
for (n = 0; n < sizeof(fooArray) / sizeof(fooArray[0]); n++) {
    if (!strcmp(fooArray[n], foo)) { /* if equal then strcmp() will return zero */
        fooCount[n]++;
        break;
    }
} 
```

# string - 在字符串中添加换行符（Matlab）

> ID：14743967
> 
> 赞同：1
> 
> 时间：2013-02-07T05:08:44.323
> 
> 标签：string, matlab, char, newline

如何在 Matlab 中为等效 Java 代码的字符串添加换行符？

```
String line;
line += "\n"; 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-07T05:18:35.640

从下面的链接

```
str = sprintf('test \n test')
or 
str = ['test ' char(10) ' 'test'] 
```

1.  [strcat](http://www.mathworks.com/help/matlab/ref/strcat.html)
2.  [Inserting_Newlines_into_Disp_Warn_and_Error](http://en.wikibooks.org/wiki/MATLAB_Programming/Inserting_Newlines_into_Disp_Warn_and_Error)
3.  [如何在字符串中添加换行符？](http://www.mathworks.com/matlabcentral/newsreader/view_thread/270680)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-07T05:30:12.563

“换行符”取决于您使用的操作系统......最好的解决方案是

```
line = sprintf('%s\n', line); 
```

这将强制 Matlab 使用操作系统的“正确”回车。

# r - 绘制图形时如何使用 xlim 在 R 中的 X 轴上设置不同的索引？

> ID：14743969
> 
> 赞同：1
> 
> 时间：2013-02-07T05:08:52.170
> 
> 标签：r, plot

我想为 1 周时间序列的每个小时绘制图表。X 轴应如下所示：

```
0 1 2 3 4 ....23 0 1 2 3 4....23 0 1 2 3 ....23 .......... 0 1 2 3 ...23
---星期一---- ------星期二---- ----星期三----------星期日--- --
```

我不知道如何为此设置 xlim，因为我需要 1 周内每小时表示的 x 轴。x 轴上共有 168 个点 (24*7=168)。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T06:59:37.407

如果有 168 个点，只需将其设置为`xlim=c(0,168)`，抑制轴并单独标记，例如

```
plot(...,xlim=c(0,168),xaxt="n")
axis(1,at=c(1:168),rep(1:24,7)) 
```

那样 x 轴可能有点满，所以也许你只想每 6 小时左右注释一次。然后您以时间点匹配的方式重新编码数据，例如“自开始以来的小时数”左右。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T08:01:01.847

不完全是您要找的东西，但我对同一问题的解决方案是使用 ggplot2... 并按星期几进行过度绘制 - 这向我表明 Sat 和 Sun 是不同的，但一周中的其他日子非常相似在行为上。

```
# some random data...
adf <- data.frame(day.of.week=rep(c('Mon','Tue','Wed','Thu','Fri','Sat','Sun'), 24),
      hour.of.day=rep(1:24, 7), y.to.be.plotted=runif(168))
qplot(hour.of.day, y.to.be.plotted, data=adf, colour=day.of.week, geom='line')
library(ggplot2)
qplot(as.integer(hour.of.day), y.to.be.plotted, data=my.data,
        colour=day.of.week, geom='line') 
```

# javascript - 使用 jquery 从外部 html 页面将 JavaScript 添加到 js 文件

> ID：14743970
> 
> 赞同：0
> 
> 时间：2013-02-07T05:08:55.480
> 
> 标签：javascript, jquery

```
$.ajax({   
    url: "sub_template5_js.php?content_id="+content_id,  
    dataType: 'html',
    success: function(data){  
        alert(data);
    }  
}); 
```

在上面的代码中，当我提供警报**数据**时，我得到带有 js 脚本的 html，我需要分离 javascript 并附加到外部 .js 文件 Pl。帮我

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T05:29:29.210

使用脚本作为选择器应该可以工作..

```
$('script').text(); // use attribute selector to get a particular one . 
```

[在这里摆弄](http://jsfiddle.net/bipen/7KJ5b/)

注意：如果您有多个脚本标签，则必须使用循环。

这只是一个让你开始的例子......

尚未使用您的数据部分进行测试，但您可以尝试..

```
 data.find('script').text(); 
```

# linux - 在 Linux 中禁用 Nagle 算法

> ID：14743971
> 
> 赞同：3
> 
> 时间：2013-02-07T05:08:56.723
> 
> 标签：linux, linux-kernel

我在网上找不到任何东西可以从 Linux 的命令行禁用 Nagle 算法。Solaris 确实具有从命令行启用/禁用它的机制。

请让我知道是否有任何方法可以在 Linux 上执行此操作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T05:13:48.237

它是每个套接字完成的，而不是从命令行完成的，`setsockopt()`用于设置 TCP_NODELAY 标志。我知道没有任何方法可以在全球范围内执行此操作，但如果 /proc/sys/net 下有一个文件可以执行此操作，我不会感到惊讶......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-10T15:19:49.963

您还可以将环境变量 SETTCPNODELAY 设置为任何值以禁用 Nagle 算法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-10T18:54:20.267

或者将 ACK 超时设置得更低并停止 TCP_RTS。超时时间为 2 毫秒。这是到下一个 rj45 接口或下一台机器的 ping 时间。不要将超时设置得太低，因为您可能会丢失数据包;-)。TCP.fin 有更高的超时时间。

```
echo 0.2 > /proc/sys/net/ipv4/tcp_ack_timeout
echo 0.2 > /proc/sys/net/ipv4/tcp_syn_timeout
echo 0.2 > /proc/sys/net/ipv4/tcp_synack_timeout
echo 0 > /proc/sys/net/ipv4/tcp_rst_timeout
echo 0.2.5 > /proc/sys/net/ipv4/tcp_fin_timeout
echo 0.2 > /proc/sys/net/ipv4/tcp_urg_timeout
echo 0.2 > /proc/sys/net/ipv4/tcp_psh_timeout
echo 10000 > /proc/sys/net/ipv4/tcp_syn_retries
echo 10000 > /proc/sys/net/ipv4/tcp_synack_retries
echo 0 > /proc/sys/net/ipv4/tcp_rst_retries
echo 10000 > /proc/sys/net/ipv4/tcp_psh_retries
echo 10000 > /proc/sys/net/ipv4/tcp_urg_retries
echo 10000 > /proc/sys/net/ipv4/tcp_ack_retries
echo 10000 > /proc/sys/net/ipv4/tcp_fin_retries
echo 0 > /proc/sys/net/ipv4/tcp_timestamps 
```

有可能：

```
echo 1 > /proc/sys/net/ipv4/tcp_dsack 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-10-31T02:43:55.997

对于 redhat Linux，您可以查看 /proc/sys/net/ipv4/tcp_delack_min 选项。对于其他发行版，您可能需要重新编译内核。

# java - Java中通过串口接收数据的效率更高

> ID：14743972
> 
> 赞同：2
> 
> 时间：2013-02-07T05:08:56.213
> 
> 标签：java, serial-port, javax.comm

这是代码片段

我在这里启动一个动作监听器

```
 try {

        port_seleted.addEventListener(this);

    } catch (TooManyListenersException e) {
        System.out.println("too many Listeners!");
    }

    port_seleted.notifyOnDataAvailable(true); 
```

当我收到数据时，这里会调用以下方法

```
public void serialEvent(SerialPortEvent Ack_Rec) {

    boolean first_flash = false;

    if (Ack_Rec.getEventType() == SerialPortEvent.DATA_AVAILABLE) {

        try {

            while (input_data.available() > 0) {
                input_data.read(rec_ack);
            }
        } catch (IOException e) {
            System.out.println("IO Exception in SerialEvent");
        } 
```

我没有正确接收数据，即

如果我发送一些数据为“你好，你今天过得怎么样”，它会被接收为“你好 h”“ow”“你好吗”“doin”“g today”

即串行事件方法被多次调用，即它在读取完整数据之前退出while循环。

如果我插入延迟

```
 try {

            while (input_data.available() > 0) {
                try {
                    Thread.sleep(20);
                } catch (InterruptedException e) {
                    e.printStackTrace();
                }

                input_data.read(rec_ack);
            }
        } catch (IOException e) {
            System.out.println("IO Exception in SerialEvent");
        } 
```

如上所示，它工作正常。请帮助我如何消除延迟，因为它会降低效率！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-14T06:03:05.303

解决方案来了。

由于我的项目与嵌入式微控制器有关，程序员的一点信息。

任何串行通信协议都无法一次性传输所有数据。这取决于调用传输函数的周期。

即，这取决于调用您的函数的 ms 任务是您使用的是 RTOS。

因此，如果数据很大，例如 1024 字节，则可能无法一次性传输所有数据，即在单个函数调用时，它可能需要多个周期才能完成工作。

由于 PC 端比控制器端快得多，因此 PC 必须等到所有数据都收到后才能开始处理数据。

好的，现在来解决上述问题，

我知道我在每笔交易中期望的字节数，比如说 1000 字节。

* * *

// 代码片段

```
public void serialEvent(SerialPortEvent Ack_Rec) {

        if (Ack_Rec.getEventType() == SerialPortEvent.DATA_AVAILABLE) {

            try {

                while (in.available() > 0) {
                  int totalbytesreceivedinSession = in.read(sessionRead);

                    for (int bytesreceieved = 0; bytesreceieved < totalbytesreceivedinSession; bytesreceieved++) {

                        temporaryPacket[recDataCount++] = sessionRead[bytesreceieved];
                    } 
                    if(recDataCount == 1000){
                      //Process the data 
                      }
            } 
```

希望这有帮助，

干杯!

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-07T05:23:17.227

仅根据计数读取可用的字节数`input_data.available()`

```
int bytesAvailable = 0;
while ((bytesAvailable=input_data.available()) > 0) {

                input_data.read(rec_ack,0,bytesAvailable);
            }
        } catch (IOException e) {
            System.out.println("IO Exception in SerialEvent");
        } 
```

# regex - 正则表达式：如何抓取所有字符直到达到另外两个字符？

> ID：14743975
> 
> 赞同：0
> 
> 时间：2013-02-07T05:09:03.880
> 
> 标签：regex, regex-negation

我有一个这样的字符串......

```
"test_test_test":"Hello \"Hello\" Hello","Oh_yea_oh_yea","Hi there buddy" 
```

我想抢

```
"test_test_test":"Hello \"Hello\" Hello" 
```

到目前为止，我的正则表达式是这个......

```
"test_test_test": 
```

这将抓住钥匙和冒号。我将永远知道是什么`"test_test_test"`，我只是不知道冒号后面的值是什么。如果我知道引文本身内部不会有转义的引文，那就很容易了，但确实有。谢谢！

编辑：

里面可以有逗号，里面不能有没有转义的引号。

我的想法是...

```
"test_test_test":"[^(",)]* 
```

在我的脑海中，这表示继续，直到找到单引号后跟逗号，（“，）然后停止。但是上面不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T05:23:49.823

这是 RAW 正则表达式。如果您放入字符串或包含分隔符，您可能需要添加更多转义。

```
"test_test_test":"(?:[^"\\]|\\[\\"])*" 
```

如果您需要灵活的间距：

```
"test_test_test" *: *"(?:[^"\\]|\\[\\"])*" 
```

关键部分在这里：`(?:[^"\\]|\\[\\"])*`. 它将匹配 0 个或多个：非引号或反斜杠，或转义引号`\"`或转义反斜杠`\\`。

上面的正则表达式仍然不精确：引用字符串中的内容允许跨越多行。好不好取决于引用字符串的语法。但是，我见过的语言中的多行引号字符串通常不会采用我的正则表达式中描述的形式。

正则表达式还将引用的字符串`"\n"`视为无效。不过，您可以轻松修改正则表达式以适应这些情况。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T05:16:22.977

如果我理解正确，您想选择逗号前的键和第一个条目。

## 更新：

无论其内容如何，​​您实际上都想要第一个引用的字符串。

所以你的正则表达式可能看起来像这样：`/"test_test_test".*?"(?:[^"\\])*"/`

# 更新 2：

此正则表达式不会因字符串内的转义而窒息：`"test_test_test".*?".*[^\\"].*?"(?=,)`

# objective-c - UIAlertView 滞后，留下暗淡的效果，然后导致屏幕在 iOS 6.1 上闪烁

> ID：14743978
> 
> 赞同：17
> 
> 时间：2013-02-07T05:09:24.297
> 
> 标签：objective-c, ios6

我有一段时间没有接触过[这段代码](https://github.com/ipwnstuff/shodan/blob/master/shodan/Classes/View%20Controllers/MasterViewController.m#L214)，所以我想知道是否有任何明显的事情会导致我遇到的问题。

`UIAlertView`在他们执行搜索查询后，我向用户显示。在我开始在 iOS 6.1（或者我正在使用的这个特定的 iPad 2）上进行测试之前，这一直很好。现在它正常运行，直到**关闭**，`UIAlertView`然后屏幕保持变暗几秒钟。

除了有点延迟之外，这似乎不是问题，直到我注意到我仍然可以在我的应用程序中触摸一个表格视图，这会导致屏幕闪烁。

代码在我的 github 上：[ipwnstuff/shodan](https://github.com/ipwnstuff/shodan/blob/master/shodan/Classes/View%20Controllers/MasterViewController.m#L214)

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-02-07T05:31:35.577

确保您在主线程上显示（如果以编程方式这样做则关闭）警报，以及与`UIKit`. 最简单的方法是使用块：

```
dispatch_async(dispatch_get_main_queue(), ^{
    // Display/dismiss your alert
}); 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-02-14T00:44:42.493

使用 lnafziger 的回答，我在主线程上显示了 alertView 而不是将其关闭。这也解决了这个问题。

```
[alert performSelectorOnMainThread:@selector(show) withObject:nil waitUntilDone:YES]; 
```

# django - python中数组和while循环的问题

> ID：14743980
> 
> 赞同：0
> 
> 时间：2013-02-07T05:09:27.960
> 
> 标签：django, while-loop, django-queryset

我正在从 django 中的原始 sql 查询中获取数据，但是我对数组和 while 循环感到困惑。假设我的选择查询返回 4 行，一个用户 2 行，因此四行将包含 2 个用户的数据。但是与一个用户对应的两行具有相似的数据，除了最后一列。

```
r1 --> a , b , c , d , 1 
r2 -- > a , b , c , d , 0 
```

在 php 中，我已经这样做了。$arr=数组（）；

```
while($result= mysql_fetch_assoc($select))
    { 
        if(!isset($arr[$result['entity_id']]['lastname'])){
            $arr[$result['entity_id']]['firstname'] = $result['info'];
        }
        $arr[$result['entity_id']]['lastname'] = $result['info'];
        $arr[$result['entity_id']]["email"]=$result['email'];
        $arr[$result['entity_id']]["style_quiz_score"]=$result['style_quiz_score'];
        $arr[$result['entity_id']]["style_quiz_answer"]=$result['style_quiz_answer'];
        $arr[$result['entity_id']]["date_joined"]=$result['date_joined'];
        $arr[$result['entity_id']]["is_active"]=$result['is_active'];

        $arr[$result['entity_id']]["username"]=normalize_str($result['email']);
    } 
```

但是我很惊讶如何在 django 中做到这一点，如何在 while 循环中使用多数组，如果我使用 for 循环或 while 循环，如下所示：

```
arr={}

    for row in cursor:
      arr[row['0']]['firstname']=row[0]

      **OR**
    while row in cursor:
        pass 
```

然后它给出错误。

所以请建议我如何在 django 中做到这一点，就像我在 PHP 中所做的那样。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T08:30:35.623

我从游标中获取行的方法（使用 MySQLdb 库）：

```
for row in cursor.fetchall():
    variable = row[number_of_column] 
```

检查元素是否存在于多数组中的一些代码：

```
array = [[1,2,3], [4,5,6]]
for element in array:
    if element[0] == 1:
        print 'ok' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T08:32:19.047

您是否直接查看了[https://docs.djangoproject.com/en/dev/topics/db/sql/#executing-custom-sql-direct](https://docs.djangoproject.com/en/dev/topics/db/sql/#executing-custom-sql-directly)？试试这种方式：

```
arr = {}
rows = dictfetchall(cursor)
for row in rows:
    if not arr.get(row['entity_id'], False):
        arr[row['entity_id']] = {}
    ... 
```

# ruby - 无法卸载捆绑程序 1.2.3

> ID：14743981
> 
> 赞同：1
> 
> 时间：2013-02-07T05:09:41.397
> 
> 标签：ruby, rubygems, bundler

我正在使用 ruby​​ 1.9.3 和 rails 版本 3.0.0。我有捆绑器版本 1.2.3。但是在运行 bundle install 时，它显示“这个 Gemfile 需要不同版本的 Bundler”。我正在尝试卸载这个 1.2.3，但它显示“INFO：gem“bundle”未安装”。请帮我解决这个问题..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T09:43:58.533

试试下面的。

```
 type  $ gem list | grep bundler  # it will list all the bundler version

       then $ rvmsudo gem uninstall bundler # it will list all the version to uninstall. we have to choose all versions.

       thats it. Then we can install our required version as follows.

        rvmsudo gem install bundler -v=1.0.21 
```

# php - 如何在循环中显示图像？

> ID：14743982
> 
> 赞同：1
> 
> 时间：2013-02-07T05:09:57.670
> 
> 标签：php, html, mysqli

我正在尝试从查询结果中检索数据。现在我正在尝试的是，如果问题没有图像，则只输出空白，否则如果问题确实有图像，则使用图像标签输出图像。唯一的问题是它一直在输出`Array`。

我哪里错了？

```
<?php foreach ($arrQuestionId as $key => $question) { ?>

    <div class='lt-container'>

        <p><?php echo htmlspecialchars($arrQuestionNo[$key]) . ": " . htmlspecialchars($arrQuestionContent[$key]); ?></p>

        <?php
//start:procedure image
        $img_result = '';
        if (empty($arrImageFile[$key])) {
            $img_result = '&nbsp;';
        } else {
            ?>

            <p>
                <img alt="<?php echo $arrImageFile[$key]; ?>" height="200" width="200" src="<?php echo $arrImageFile[$key]; ?>">
            </p>

            <?php
        }
//end:procedure image
        ?>

    </div>

<?php } ?> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-07T05:12:47.020

```
<p>
<?php foreach ($arrImageFile[$key] as $i) { ?>
    <img alt="<?= $i ?>" height="200" width="200" src="<?= 'ImageFiles/'.$i ?>">
<php } ?>
</p> 
```

# iphone - 使用 Corebluetooth 框架检测耳机

> ID：14743985
> 
> 赞同：1
> 
> 时间：2013-02-07T05:10:14.430
> 
> 标签：iphone, ios, uuid, core-bluetooth, headset

我有蓝牙耳机 4.0 LE。我想将该设备与 corebluetooth 框架连接。谁能告诉我相同的 UUID 是什么。目前我无法检测到耳机。我检查了 UUID 180A（广播配置文件）、1108（耳机）。但不为我工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T08:20:04.760

蓝牙 4.0 是该连接的最新标准。但是您需要知道，低功耗蓝牙符合蓝牙 4.0 标准，但不具备完整的数据传输能力。蓝牙 LE 专为满足某些需要长时间开启但不传输大量数据的设备而设计。示例心率监视器每 1 秒通过一个简单的 int 值。

通常 BTLE 设备的重量小于 20 克，使用新电池可以使用 6-8 个月。

你不能指望数据传输能力消耗如此超低的功率。因此，耳机可以支持蓝牙 4.0，但它不是蓝牙 LE 设备；而Corebluetooth 框架仅适用于BTLE 设备

# java - 为什么我们有 SortedMap/SortedSet 时还需要 TreeMap/TreeSet？

> ID：14743986
> 
> 赞同：4
> 
> 时间：2013-02-07T05:10:19.043
> 
> 标签：java, treemap, treeset

好的，所以`SortedMap`/`SortedSet`是一个接口，而`TreeMap`/`TreeSet`是它的实现。他们都保持元素排序，对吧？那么为什么我们需要`TreeMap`/ `TreeSet`？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-02-07T05:11:55.663

接口不提供任何功能，它们只是根据它提供的方法定义一个类的大致轮廓。`SortedMap`但是/内部没有代码`SortedSet`实现如何实际实现此功能。

事实上，您通常可以有多种方法来实现相同的功能。想一想接口`java.util.Set`：您可以将其实现为 a`TreeSet`也可以实现为`HashSet`. 通常，不同实现之间存在一些权衡：哈希集可能平均提供更快的访问时间，而树集可能更好地保持其项目的顺序。

然而，通常情况下，开发人员并不真正关心实现细节，只要他们知道他们可以将项目存储在集合中并检索它们。这个基本思想，但不是如何实现它，是由接口定义的。

这也是您无法实例化接口的原因。如果您尝试以下操作：

```
SortedSet<Integer> set = new SortedSet<Integer>(); 
```

你的编译器会抱怨。那是因为“SortedSet”本身并没有真正实现一个集合，它只是定义了一个有序集合的实现必须在方法方面提供什么。

这是一个人为的例子。想象一下，您想提供一个计算集合中正整数百分比的功能。你可以定义一个方法：

```
public double getPercentageOfPositives(Set<Integer> set) {
    if (set.size() == 0) {
        return 0.0;
    }

    int count = 0;

    for (Iterator<Integer> iter = set.iterator(); iter.hasNext();) {
        if (iter.next() > 0) count++;
    }

    return 100.0 * count / set.size();
} 
```

在这里，您并不真正关心您的方法的用户是给您 a`TreeSet`还是 a `HashSet`。给定类使用哪种原则并不重要，因为无论如何您只是在调用`size()`方法和方法。`iterator()`您所需要的只是相信任何集合都将具有这两种方法这一事实。一个界面给了你这种信任。

因此，您的方法签名只要求 a `Set`，这是一个接口，定义了所有实现它的类必须提供（以及其他）a`size()`和一个`iterator()`方法。如果你这样写：

```
public double getPercentageOfPositives(SortedSet<Integer> set) {
    ...
} 
```

我有一个实例，`HashSet`即使`HashSet`提供了`size()`，我也无法使用您的方法`iterator()`。:-(

从这个意义上说，接口就像一个超类，它定义了所有实现它的类必须具有的共性。但它本身不提供任何功能。

因此回到你原来的例子`SortedSet`：这个接口不提供任何功能。它只定义了排序集实现必须提供的方法。`TreeSet`就是这样一个实现。

同样的思路也适用于`SortedMap`.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-07T05:12:17.670

对，因为当我们有**类时我们需要****接口**。

 **`SortedMap`并`SortedSet`定义通过使用带有 a`TreeMap`和 a 的树来实现的功能`TreeSet`。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-07T05:13:04.487

`SortedMap`/`SortedSet`是接口，所以你不能实例化它们。 `TreeMap`/`TreeSet`是类，可以实例化和使用。我们需要`SortedMap`/的原因`SortedSet`是除了 Sun 的基于树的实现之外，可能还有其他实现。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-12-05T06:23:28.620

这是一张用于获取大图的备忘单（来源在图片中）

![在此处输入图像描述](../Images/3df6a310b2b6dda5f26081c9e477b0d4.png)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-07T05:14:56.427

答案就在你的问题中；`SortedMap`并且`SortedSet`是接口。它们定义了方法和属性，但实际上并没有实现它们，因此它们不提供任何功能。

`TreeMap`并且`TreeSet`是这些接口的实现。

良好的 OOP 设计实践建议您对接口而不是实现进行编码。这意味着您的所有方法签名都应该引用接口而不是类。

所以你会这样做：

```
Object squishObjects(SortedMap map); 
```

代替

Object squishObjects(TreeMap map);

这样，如果出现更好的实现`SortedMap`，您可以将其切换，而无需修改所有依赖于`TreeMap`.**

# c# - 使用 C# 在 Excel 中开发用户定义的函数？

> ID：14743990
> 
> 赞同：0
> 
> 时间：2013-02-07T05:10:30.230
> 
> 标签：c#, excel, vsto, add-in

我正在使用 VS 2010 中的 C# 和类库在 Excel 中开发用户定义的函数。我按照[如何使用 C# 在 Excel 中创建 UDF 中](http://blogs.msdn.com/b/eric_carter/archive/2004/12/01/273127.aspx)的教程进行操作 ，代码运行良好并且已注册。我可以在 InstalledAddIN 列表中看到我的插件。但是，在单击编辑栏中的“插入函数”按钮后。从可用公式的对话框中，“或选择一个类别”下拉框我看不到我构建的函数我使用的是 VS 2010（管理员模式），但是 excel 处于访客模式。权限是否与它有任何关系。 ??

还有谁能解释我如何安装我的插件？感谢您的时间

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-10T08:38:21.673

看看[Excel Dna](http://exceldna.codeplex.com/) 。它是一个用于将 Excel 与 .NET 集成的开源项目，也可以查看[Excel 2013 XLL](http://msdn.microsoft.com/en-us/library/office/bb687837.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-05-23T08:23:52.983

[您可以通过我的ESharper](https://vlasovstudio.com/esharper/)插件直接使用 C# 编写 Excel 用户定义函数，而无需额外的文件和注册。

# .htaccess - 简单的 RewriteRule 模式不起作用

> ID：14743993
> 
> 赞同：0
> 
> 时间：2013-02-07T05:10:42.013
> 
> 标签：.htaccess, mod-rewrite, seo

我的`.htaccess`文件中有以下内容

```
RewriteEngine On  
RewriteRule ^committees([^/]*)$ /committees/view.cfm?c=$1 [L] 
```

所以任何要求：

[http://www.acme.org/committees/12345abcd](http://www.acme.org/committees/12345abcd)
被路由到
[http://www.acme.org/committees/view.cfm?c=12345abcd](http://www.acme.org/committees/view.cfm?c=12345abcd)

不过，这条规则似乎永远不会匹配！有人可以阐明一下吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T05:38:40.523

我认为您应该指定 a`RewriteBase`并在委员会之后添加一个斜杠。

```
RewriteEngine On
RewriteBase /
RewriteRule ^committees/([^/]*)$ /committees/view.cfm?c=$1 [L] 
```

# mod-rewrite - 使用 modrewrite 将 URL 变量传递给 CSS 文件

> ID：14743997
> 
> 赞同：0
> 
> 时间：2013-02-07T05:11:01.093
> 
> 标签：mod-rewrite

我的一个页面上的一些 html 是用 CSS 设置样式的，为了使其具有动态性，CSS 代码必须包含一组特定的 PHP 变量。话虽如此，我编辑了我的`.htaccess`文件，以便真正的 PHP 文件被欺骗成 CSS 文件。该`.htaccess`文件如下所示：

```
RewriteRule ^/css/bars/([^/]*)/([^/]*)/([^/]*)/([^/]*).css$ /css/bars.php?one=$1&two=$2&three=$3&four=$4 [L] 
```

所以，在页面的头部，我有：

```
<link rel="stylesheet" type="text/css" href="/css/bars/0/0/15/2" /> 
```

但是，CSS 文件不会加载。在服务器上找不到该文件。让我相信重写规则是不正确的。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T05:49:09.117

你可以试试这个：

```
Options +FollowSymlinks
RewriteEngine On
RewriteBase /
RewriteCond %{REQUEST_URI} !bars\.php [NC]
RewriteCond %{REQUEST_URI} ^/css/bars/([^/]+)/([^/]+)/([^/]+)/([^/]+)/? [NC]
RewriteRule .* css/bars.php?one=%1&two=%2&three=%3&four=%4 [L] 
```

静默地图

`http://example.com/css/bars/0/0/15/2`

带或不带斜杠。始终显示在浏览器的地址栏中，

到：

`http://example.com/css/bars.php?one=0&two=0&three=15&four=2`

字符串`css`,`bars`和`bars.php`假定是固定的，而`0/0/15/2`全部假定为变量且数量为 4。

必须保留传入的 URL 结构以使规则集正常工作：第一个文件夹`/css`，然后`/bars`依此类推。

对于永久重定向，替换`[L]`为`[R=301,L]`

希望这是你需要的。

# matlab - dir()/find() 过滤掉隐藏文件

> ID：14743998
> 
> 赞同：0
> 
> 时间：2013-02-07T05:11:02.140
> 
> 标签：matlab, octave

我有一个脚本，它查看给定目录并获取所有文件进行处理。问题是我希望它忽略任何隐藏的 (.) 文件。我在[this](https://stackoverflow.com/questions/5234341/how-to-filter-hidden-files-after-calling-matlabs-dir-function)和[this](http://www.mathworks.com/matlabcentral/newsreader/view_thread/258220)等其他帖子中看到了很多方法，但我的情况很简单，我认为值得一问，因为我是 octave 的新手。值得一提的是，第二个链接很简单，但我不得不使用 for 循环来过滤似乎很奇怪......

这是我的代码：

```
dirname = strcat(pwd, '/fileset');
files = dir(dirname);
fileidx = find(~[files.isdir]);

for i = 1:length(fileidx)
    filename = [dirname, '/', files(fileidx(i)).name];
    fid = fopen(filename, 'r');
end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T05:20:47.297

我曾承诺对第一行“多一点爱”……“那行不行”。这里是。

有一些有趣的方法来操作单元数组，直到我对这个答案进行了更多研究，我才知道这些方法......特别是使用`cellfun()`. 我将分享我学到的东西。

例如，当您有一个文件名元胞数组时

```
fnames = {files.name}; 
```

您可以应用正则表达式来查找符合特定条件的文件（例如“不以点开头”）

```
crit = '^[^.]+';

% return cell array of results, [] if no match
rxResult = regexp( fnames, crit ); 

% loop over all cells, set true if regex matched
nodot = (cellfun('isempty', rxResult)==0); 

% The `nodot` array is a logical array telling us which are "good" files. 
totalGoodFiles = sum(nodot); 
```

现在你可以使用

```
fileidx = find(~[files.isdir] & nodot); 
```

另一方面，您已经在使用`for`循环，因此您可以将测试放在那里（编辑为包括文件数）：

```
fCount=0;
for i = 1:length(fileidx)
if( files(fileidx(i)).name(1) ~= '.')
      filename = [dirname, '/', files(fileidx(i)).name];
      fCount = fCount+ 1;
      fid = fopen(filename, 'r');
    end
end 
```

顺便说一句，您可以使用该功能[`fullfile()`](http://www.mathworks.com/help/matlab/ref/fullfile.html)来连接目录和文件名；它了解用于您的操作系统的正确文件分隔符。非常方便 - 比连接 '/' 更好。当您尝试在 Mac 上运行时，它会失败...

更进一步 - 内置常量`filesep`将返回正确的文件路径分隔符以在您的平台上使用；有利于使您的代码可移植。