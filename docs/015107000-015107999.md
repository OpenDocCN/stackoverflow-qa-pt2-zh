# StackOverflow 问答 15107000-15107999

# zend-framework - PHPUnit Selenium RC 测试覆盖适用于 GET 但不适用于 POST 请求？

> ID：15107000
> 
> 赞同：0
> 
> 时间：2013-02-27T08:07:29.323
> 
> 标签：zend-framework, selenium, phpunit, code-coverage

我继承了一个 Zend Framework Web 应用程序，它既不是面向对象的，也不是在很多方面都写得很好，而且它带有零测试。因此，虽然我很欣赏单元测试的价值，并且会在我添加或重写代码时编写它们，但具有代码覆盖率的功能测试似乎是最好的起点。它也是了解应用程序如何工作的绝佳学习工具。这是 Zend Framework 1.11，Matthew Weier O'Phinney 已经声明 Zend_Test 仅适用于 PHPUnit 到 3.4。所以我安装了最新的3.4.15。我已经验证我可以扩展 Zend_Test_PHPUnit_ControllerTestCase 并以这种方式对控制器进行单元测试。

对于通过 Selenium 进行的功能测试，我在让代码覆盖工作时遇到了一些麻烦。事实上，我怀疑根据 Selenium 服务器的工作方式获取覆盖数据在技术上是否可行，但在[PHPUnit_Selenium Code Coverage Work 的帮助下，它是否可行？](https://stackoverflow.com/questions/11270527/does-phpunit-selenium-code-coverage-work/12297192)和[PHPUnit_Selenium 代码覆盖是否有效？](https://stackoverflow.com/questions/11270527/does-phpunit-selenium-code-coverage-work)我终于让它与我的应用程序一起工作。能够看到代码的哪些部分被不同的请求击中真是太好了！

但我现在看到的问题是处理 POST 请求的代码似乎没有被报告。

例如，在控制器中，我有一个 contactAction 方法，其代码如下：

```
$this->view->form = $form;
 if ($this->getRequest()->isPost()) {
   if ($form->isValid($this->getRequest()->getPost())) {
     $values = $form->getValues(); 
```

这是用于联系我们的表格。在 Selenium 测试中，我打开 url，输入消息，单击提交按钮，然后等待页面加载。当我运行测试时，我可以在浏览器中看到这种情况，并收到带有由 selenium 键入的消息的电子邮件，所以我确定表单发布了有效数据，并且后两行确实执行了。但是在覆盖率报告中，前两行是绿色的，后两行是橙色的。

我检测了 prepend.php 和 append.php 脚本来记录以下信息：

```
 "(File: " . __FILE__ . "): REQUEST_METHOD: " . $_SERVER['REQUEST_METHOD'] . "\n" .
     "REQUEST_URI: " . $_SERVER['REQUEST_URI'] . "\n" .
     "_COOKIE['PHPUNIT_SELENIUM_TEST_ID']: '" . print_r(isset($_COOKIE['PHPUNIT_SELENIUM_TEST_ID']), 1) . "'\n" .
     "_GET['PHPUNIT_SELENIUM_TEST_ID']: '" . print_r(isset($_GET['PHPUNIT_SELENIUM_TEST_ID']), 1) . "'\n" .
     "_POST['PHPUNIT_SELENIUM_TEST_ID']: '" . print_r(isset($_POST['PHPUNIT_SELENIUM_TEST_ID']), 1) . "'\n" . 
```

一件奇怪的事情是，只有 prepend 脚本会被记录，而不是 append 脚本。我不知道为什么，但它似乎不会影响覆盖数据（至少对于 GET 请求）。我看到的唯一可以解释的事情是 Zend MVC 应用程序是否以 exit() 结尾？那有意义吗？

以下是与我们联系互动记录的内容：

```
(File C:\xampp\htdocs\myapp\public\prepend.php): REQUEST_METHOD: GET
REQUEST_URI: /index/contact
_COOKIE['PHPUNIT_SELENIUM_TEST_ID']: '1'
_GET['PHPUNIT_SELENIUM_TEST_ID']: ''
_POST['PHPUNIT_SELENIUM_TEST_ID']: ''
extension_loaded('xdebug'): '1'

(File C:\xampp\htdocs\myapp\public\prepend.php): REQUEST_METHOD: GET
REQUEST_URI: /index/contact
_COOKIE['PHPUNIT_SELENIUM_TEST_ID']: '1'
_GET['PHPUNIT_SELENIUM_TEST_ID']: ''
_POST['PHPUNIT_SELENIUM_TEST_ID']: ''
extension_loaded('xdebug'): '1'

(File C:\xampp\htdocs\myapp\public\prepend.php): REQUEST_METHOD: POST
REQUEST_URI: /index/contact
_COOKIE['PHPUNIT_SELENIUM_TEST_ID']: '1'
_GET['PHPUNIT_SELENIUM_TEST_ID']: ''
_POST['PHPUNIT_SELENIUM_TEST_ID']: ''
extension_loaded('xdebug'): '1'

(File C:\xampp\htdocs\myapp\public\prepend.php): REQUEST_METHOD: GET
REQUEST_URI: /default/index/contact
_COOKIE['PHPUNIT_SELENIUM_TEST_ID']: '1'
_GET['PHPUNIT_SELENIUM_TEST_ID']: ''
_POST['PHPUNIT_SELENIUM_TEST_ID']: ''
extension_loaded('xdebug'): '1'

(File C:\xampp\htdocs\myapp\public\prepend.php): REQUEST_METHOD: GET
REQUEST_URI: /default/index/contact
_COOKIE['PHPUNIT_SELENIUM_TEST_ID']: '1'
_GET['PHPUNIT_SELENIUM_TEST_ID']: ''
_POST['PHPUNIT_SELENIUM_TEST_ID']: ''
extension_loaded('xdebug'): '1'

(File C:\xampp\htdocs\myapp\public\prepend.php): REQUEST_METHOD: GET
REQUEST_URI: /phpunit_coverage.php?PHPUNIT_SELENIUM_TEST_ID=a85030b0bcdb0460bfb17a83a373d6b5
_COOKIE['PHPUNIT_SELENIUM_TEST_ID']: ''
_GET['PHPUNIT_SELENIUM_TEST_ID']: '1'
_POST['PHPUNIT_SELENIUM_TEST_ID']: ''
extension_loaded('xdebug'): '1' 
```

如您所见，GET 请求被记录两次，而 POST 只记录一次。也许这与似乎只有 GET 请求被覆盖而 POSTS 没有被覆盖的事实有关？但我真的不理解这种行为的几个方面，我不知道该怎么做才能帮助解决这个问题。

任何人都知道为什么我没有得到 POST 请求的报道，或者下一步可能是什么来追踪它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T20:07:12.513

在这个问题中，我推测如果 Zend 框架正在调用 exit()，这可能解释了为什么 append.php 脚本从未被记录。于是我在 ZF 库的整个源代码中搜索了对 exit() 的调用，结果只有三个：

```
library/Zend/Controller/Action/Helper/Redirector.php:        exit();
library/Zend/Oauth/Consumer.php:        exit(1);
library/Zend/OpenId.php:            exit(); 
```

在这种情况下，没有使用 Oauth 或 OpenId。但正如我在评论中指出的那样，POST 请求代码在登录失败并且重新显示表单时显示覆盖范围，但在成功并且重定向到欢迎页面时却没有。所以重定向器看起来像是检查的地方。

对于重定向，本应用的动作例程中的代码统一使用：

```
$this->_redirect("some-url"); 
```

而且我从未研究过它是如何工作的或任何选项，因为它从来都不是问题。但是由于它可能导致覆盖问题，我阅读了它的文档并浏览了 Zend 源代码。我发现有一个简单的选项可以导致重定向不调用 exit()。所以我把有问题的改成：

```
return $this->_redirect("some-url", array('exit'=>false)); 
```

瞧，POST 请求的缺失代码覆盖率出现了！

现在我想知道我是否应该覆盖 _redirect 以便它始终抑制退出调用，或者我是否应该只在测试环境中这样做。我猜想在重定向时立即终止脚本可能会节省一些生产周期。

这样主要的问题就解决了。但谜团仍然是，我在 append.php 脚本中输入的日志代码仍然没有产生任何输出—— prepend.php 脚本总是产生它的日志输出，但从不产生 append.php。正是 append.php 没有输出让我跟踪了 ZF 中的 exit() 调用，但似乎还有其他一些原因导致没有产生输出。

我终于也想出了这个。这只是附加脚本中的一个错字。我简直不敢相信，因为我“知道”我添加到 append.php 的日志记录代码与 prepend.php 中的代码相同，从 prepend 到 append 进行了复制粘贴。但显然我在副本上选择了胖手指，并错过了消息文本的最后一行。当我终于看到丢失的行时，我的第一反应是“这不可能，我应该得到一个语法错误，而不仅仅是缺少输出。” 这是我预期的代码：

```
$msg ="\n(File " . __FILE__ . "): REQUEST_METHOD: " . $_SERVER['REQUEST_METHOD'] . "\n" .
         "REQUEST_URI: " . $_SERVER['REQUEST_URI'] . "\n" .
         "_COOKIE['PHPUNIT_SELENIUM_TEST_ID']: '" . print_r(isset($_COOKIE['PHPUNIT_SELENIUM_TEST_ID']), 1) . "'\n" .
         "_GET['PHPUNIT_SELENIUM_TEST_ID']: '" . print_r(isset($_GET['PHPUNIT_SELENIUM_TEST_ID']), 1) . "'\n" .
         "_POST['PHPUNIT_SELENIUM_TEST_ID']: '" . print_r(isset($_POST['PHPUNIT_SELENIUM_TEST_ID']), 1) . "'\n" .
         "extension_loaded('xdebug'): '". print_r(extension_loaded('xdebug'), 1) . "'\n";
file_put_contents($GLOBALS['PHPUNIT_COVERAGE_DATA_DIRECTORY'] . "/msg.log", $msg, FILE_APPEND); 
```

但我不小心错过了 $msg 作业的最后一行。因此，当我意识到它丢失了，并在调用 file_put_contents() 之前看到了悬空的字符串连接运算符时，起初我很困惑，我没有收到语法错误。但是当然 php 很乐意使用 $msg 的旧值（在 prepend 脚本中分配的值）调用 file_put_contents()，并将其结果（写入的字节数）附加到分配给 $msg 的字符串（然后从未使用过）！*当您准确地看到代码时，实际上*并没有什么令人惊讶的，但是当您假设您的正确代码的复制粘贴不可能出错时，您的头脑会变得模糊不清！

# java - 如何将实体类与控件类解耦

> ID：15107007
> 
> 赞同：0
> 
> 时间：2013-02-27T08:08:04.047
> 
> 标签：java, uml

假设我的实体类实现了一个接口。我如何让我的控件类使用该接口，以便控件类可以将该接口实例化为一个对象。

最初我会使用我的控件类来实例化实体类的实例。但是，我想通过使用接口将它们解耦。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-27T08:18:54.460

似乎[抽象工厂](http://en.wikipedia.org/wiki/Abstract_factory_pattern)设计模式在这里可以提供帮助。

使用定义通用实体工厂的接口。一旦你的控件类有了一个工厂实例（作为一个接口），它就可以调用它的 createEntity() 方法来创建特定的实体实例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T08:36:44.077

您可以使用静态工厂方法来完成此操作

**示例实现**

```
public class ModelFactory implements ModelInterface{

    public static ModelInterface getNewInstance() {
        return new Model();
    }
}

public interface ModelInterface {

}

public class Model implements ModelInterface{

} 
```

现在在控制器类

```
 ModelInterface object =  ModelFactory.getNewInstance(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-27T08:17:57.443

一种方法是使用静态工厂方法来创建和返回`EntityInterface`引用。请参阅这个基本示例：

```
EntityInterface entity = EntityFactory.getEntity(); 
```

使用这样定义的类型：

```
class EntityFactory {
    public static EntityInterface getEntity() {
        return new Entity();
    }
}

interface EntityInterface {

}

class Entity implements EntityInterface {

} 
```

# opencv - OpenCV 代码出错 - 指定给 RtlFreeHeap 的地址无效

> ID：15107008
> 
> 赞同：0
> 
> 时间：2013-02-27T08:08:05.983
> 
> 标签：opencv, visual-studio-2012

我有以下代码，运行良好：

```
#include <opencv2/core/core.hpp>
#include <opencv2/highgui/highgui.hpp>
#include <opencv2/features2d/features2d.hpp>

using namespace std;
using namespace cv;

void main() {

    bool running = true;

    cv::OrbFeatureDetector OrbDetector;

    while (running) {
        IplImage *newFrame = cvLoadImage("x1.jpg");
        IplImage *newFrameBW = cvCreateImage(cvGetSize(newFrame), newFrame->depth, 1);
        cvConvertImage(newFrame, newFrameBW);
        vector<KeyPoint> KeyPoints;
    }
} 
```

但是，添加以下行：

```
OrbDetector.detect(newFrameBW, KeyPoints); 
```

到while循环会导致以下错误：

```
HEAP[Example 4.exe]: Invalid address specified to RtlFreeHeap( 006B0000, 02474D20 )
Example 4.exe has triggered a breakpoint. 
```

我确信代码没有问题，因为我刚刚看到它在别人的机器上成功运行。是否有任何与代码无关的东西可能导致这种情况？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T13:02:52.247

问题是您使用的 OpenCV 版本无法处理 MCVS 2012。这不是代码问题，因为我有一个类似的包含向量但无法正常工作的代码。看看本教程，它将向您展示如何重建 OpenCV 库并且您的代码将运行良好；）这是链接： [http ://answers.opencv.org/question/6495/visual-studio-2012-和-rtlfreeheap-错误/](http://answers.opencv.org/question/6495/visual-studio-2012-and-rtlfreeheap-error/)

# amazon-s3 - S3cmd 同步返回“已终止”

> ID：15107010
> 
> 赞同：9
> 
> 时间：2013-02-27T08:08:22.603
> 
> 标签：amazon-s3, amazon, s3cmd

我正在尝试在亚马逊 S3 上同步一些大存储桶。

当我运行我的 S3cmd sync --recursive 命令时，我得到一个回复​​说“被杀死”。

有谁知道这可能指的是什么？可以在 S3 中同步的文件数量是否有限制？

谢谢你的帮助

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-03T03:43:08.430

在阅读之后，看起来程序有内存消耗问题。特别是这可能会导致[OOM 杀手](http://linux-mm.org/OOM_Killer)（内存不足杀手）停止进程并防止系统陷入困境。在进程被杀死后快速查看`dmesg`通常会显示是否是这种情况。

考虑到这一点，我会确保您使用的是最新版本，其中指出了[发行说明](http://s3tools.org/s3cmd-150a1-released)中正在解决的内存消耗问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-11-13T02:59:34.893

老问题，但我想说的是，在您尝试添加更多物理内存或增加虚拟机内存之前，请尝试添加更多交换。

我用 4 台服务器（ubuntu 和 centos）做了这个，它们的内存很低（总共 700MB，只有 15MB 可用），现在运行良好。

# php - 使用多个关键字显示 2 个表的结果

> ID：15107011
> 
> 赞同：0
> 
> 时间：2013-02-27T08:08:22.183
> 
> 标签：php, mysql, database

编辑......我有一个基于学习环境的标准化数据库。我希望能够搜索名为“C_Search”的表中的一组关键字，并使用它们来提取存储在“C_Info”中的课程详细信息。我有一个基本的搜索功能，但它让我发疯了，因为我对所有这些都是新手，并尝试学习如何获得涉及的关键字......有时我们需要帮助

这些是相关的表和其中的字段。

## C_Info

Course_ID Course_Name C_Description C_Duration C_Cost C_Entry_Req C_Assessment_Type C_Progression C_Type

## C_搜索

Course_ID C_Key_Words C_NLC_Ref_No Awarding_Body C_UCAS_Code

有一个用逗号分隔的关键字列表。我想使用它们来允许用户在数据库中搜索可用的课程。

我知道我之前已经发布过这个，但有些答案令人困惑，我正在努力学习。

```
<?php
mysql_connect ("localhost", "jimbooth_test","test1")  or die (mysql_error());
mysql_select_db ("jimbooth_groupproject");
// first part of the main query (with dummy WHERE operator so you can then use AND operators)
$query .= " AND C_Description like '%{$keyword_row['keyword']}%'";
// query the keywords
$res1 = mysql_query("select keyword from C_Search") or trigger_error(mysql_error()
// loop through rows and add conditions to the main query
while ($keyword_row = mysql_fetch_assoc($res1)) {
    $query .= " AND C_Description like '%{$keyword_row['keyword']}%'";
}
$res2 = mysql_query($query);
die($query);
if (mysql_num_rows($res2) <= 0) {
// no results
echo 'Sorry, No results found.';
} else
while ($row = mysql_fetch_array($res2)){
    echo '<br/> <B>Course Title:</B> '.$row['Course_Name'];
    echo '<br/> <B>Course Info:</B> '.$row['C_Description'];
    echo '<br/> <B>Duration:</B> '.$row['C_Duration'];
    echo '<br/> <B>Entry Requirements:</B> '.$row['C_Entry_Req'];
    echo '<br/> <B>Course Cost: '.$row['C_Cost'];
        echo '<br/> <B>Course Progression: '.$row['C_Progression'];    
    echo '<br/><br/>';
    }
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T08:21:54.550

您的 SQL 查询失败：

> “从 C_Search 中选择关键字”

这意味着 $res1 不是结果。相反，它是一个布尔 FALSE 值。mysql_fetch_assoc 需要一个资源。您确定 C_Info 存在并且您没有输入任何拼写错误吗？

尝试添加：

```
$res1 = mysql_query("select keyword from C_Search") or trigger_error(mysql_error()); 
```

告诉我们是否有任何错误被吐到屏幕上。

**PS**：告诉您删除 WHERE 1 的人似乎没有意识到您正在这样做：

```
$query .= " AND C_Description like '%{$keyword_row['keyword']}%'"; 
```

更进一步。尽管我同意您可能应该使用 WHERE 1 = 1，因为这是动态构造查询时最常用的“始终为真”条件:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T08:24:38.923

我认为您与 DB 的连接设置不正确，请通过以下方式检查连接

```
<?php
// Create connection
$con=mysqli_connect("example.com","peter","abc123","my_db");

// Check connection
if (mysqli_connect_errno($con)){
  echo "Failed to connect to MySQL: " . mysqli_connect_error();
  }
?> 
```

# php - 使用javascript提交在while循环中发布表单

> ID：15107012
> 
> 赞同：0
> 
> 时间：2013-02-27T08:08:35.753
> 
> 标签：php, javascript, html

我有一个 while 循环，它创建如下形式：

```
$result3 = mysql_query("SELECT * FROM Afbeeldingen WHERE ImgId =$imgid  ORDER BY                   AfbeeldingPrior DESC");

while($row3 = mysql_fetch_array($result3))
{
?>
<form method=POST name="form3" action="kamer.php">

<input type="hidden" name="id" value="<?php echo$kamerid;?>">

<input type="hidden" name="afbeeldingplus" value="12345">

</form>
<?php
} 
```

我想用文本链接发布这些表格。通常我使用

```
<script>
function f3_submit()
{
document.form3.submit();
}
 </script> 
```

然后我把表格放在`echo "<a href=\"##\" onClick=\"f3_submit();\" >";` 表格下，但是因为我有很多同名的表格，所以这行不通。它没有发布任何内容！

我怎样才能发布这些带有文本链接的表单，所以没有提交按钮。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T08:12:32.763

记得返回false！

```
<script>
function submitForm(kamerid) {
  document.forms["form"+kamerid].submit();
  return false;
}
 </script> 
```

并且有

```
echo '<a href="#" onClick="return submitForm(\''.$kamerid.'\');" >'; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T08:14:14.717

我不确定您是否以您想要的方式创建这些表单。但是，如果您对它们的方式感到满意，那么您可以添加一个提交按钮，然后将其设置为看起来像带有 css 的文本链接：

```
form input[type="submit"]{

    background: none;
    border: none;
    color: blue;
    text-decoration: underline;
    cursor: pointer;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-27T08:14:33.470

如果我理解正确，您希望有许多不同的表单，以及提交不同表单的许多链接？如果这是真的，您必须以不同的方式命名表单，例如使用您从 DB 获得的 ID，然后在提交链接中使用这个生成的名称。

像：

```
<?php
$result3 = mysql_query("SELECT * FROM Afbeeldingen WHERE ImgId =$imgid  ORDER BY                   AfbeeldingPrior DESC");

while($row3 = mysql_fetch_array($result3))
{
?>
<form method=POST name="form3_<?php echo $kamerid;?>" action="kamer.php">
    <input type="hidden" name="id" value="<?php echo $kamerid;?>">
    <input type="hidden" name="afbeeldingplus" value="12345">
</form>
<a href="#" onClick="document.form3_<?php echo $kamerid;?>.submit(); return false;"><?php echo $kamerid;?></a>
<?php 
```

}

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-27T08:15:18.937

也许循环遍历这些值并生成两个逗号（或管道或任何适合任务）分隔的字符串，然后只创建一个表单并为“id”和“afbeeldingplus”字段分配这些值。您的 javascript 提交将正常工作，并且您的 HTML 更少，所有这些字段在一个表单或多个表单中重复。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-27T08:17:09.323

```
while($row3 = mysql_fetch_array($result3))
{
<form method=POST name="form3" action="kamer.php">

<input type="hidden" name="id" value="<?php echo$kamerid;?>">

<input type="hidden" name="afbeeldingplus" value="12345">
<button type="submit">Text to Submit here</buttton>
</form>
} 
```

然后将按钮设置为看起来像文本

# google-oauth - 是否有与谷歌应用程序 OAuth2 可嵌入小部件的签名，例如适用于 Google+？

> ID：15107014
> 
> 赞同：0
> 
> 时间：2013-02-27T08:08:53.337
> 
> 标签：google-oauth

特别是在此页面的顶部： [https](https://developers.google.com/accounts/docs/OAuth2Login) ://developers.google.com/accounts/docs/OAuth2Login有：

![在此处输入图像描述](../Images/0780d5c234d3b0c4408a6c738590746b.png)

看起来不错，但是当我更改范围时，它仍然在 Google+ 的上下文中，我只想使用 google 应用程序登录并请求联系权限。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T05:40:47.243

没有不包含 G+ 范围的可嵌入小部件。您引用的页面解释了如何在没有其他范围的情况下通过 OAuth2 进行基本登录身份验证，但没有小部件化实现。

一般来说，最简单的方法是使用 G+ 小部件。

# assembly - 为什么结果是 8000h 并且设置了奇偶校验标志？

> ID：15107025
> 
> 赞同：1
> 
> 时间：2013-02-27T08:09:22.720
> 
> 标签：assembly, x86

考虑以下代码：

```
.586
.model flat,stdcall
.data
.code
main PROC

mov ax,0
push ax
popf 
mov bx,7FFFh
add bx,1               //the value of bx is 8000h, but the parity flay is 1,why?
Ret
main endp
END main 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-27T08:20:54.883

奇偶校验标志仅受结果的最低字节影响。所以对于平价的计算，你的价值是零。

如果你想知道一个更宽值的奇偶校验，你可以将它的两半异或在一起，直到你得到一个 8 位的结果，在最后的异或之后，奇偶校验标志将反映整个原始值的奇偶校验。

例如在这种情况下，您可以这样做：

```
xor al, ah 
```

然后奇偶标志将反映 的奇偶性`ax`。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-02-27T08:15:18.467

Į 假设第一个数字仍然被认为是符号 būt，因此它被忽略了。我想还设置了溢出标志，这将使这个假设正确。

# jakarta-ee - JBoss seam中的参数含义

> ID：15107028
> 
> 赞同：1
> 
> 时间：2013-02-27T08:09:29.690
> 
> 标签：jakarta-ee, seam2, seam-gen

我对 Seam 应用程序框架比较陌生。我曾经`seam-gen`生成实体和视图文件（*.xhtml、*.page.xml）并观察了一些事情。

1.  {viewId}List.page.xml 文件有类似`<param name="from"/>`. 这是什么意思？我看到这个参数在 {viewId}List.xhtml 中被引用用于渲染和其他一些东西`empty from`。

2.  {viewId}Edit.page.xml 和 {viewId}.page.xml 文件有类似`<param name="{viewId}From"/>`. 这是什么意思？这也在相应的 xhtml 文件中被引用以进行空检查。

我试图了解这些的含义，但我没有得到它。
有人可以向我解释它们到底是什么意思吗？

提前致谢。

# windows-8 - Windows 8 XAML 中的页面导航（不使用代码隐藏）

> ID：15107040
> 
> 赞同：0
> 
> 时间：2013-02-27T08:10:12.280
> 
> 标签：windows-8, navigation, winrt-xaml

对于我的 Windows 8 应用程序，我试图在不使用代码的情况下在页面之间导航。例如，我的 UI 中有一个图像，但没有为该图像创建点击事件，我需要导航到另一个页面，

```
<Image Source="ms-appx:///Assets/Logo.png" Width="155" Height="110" Tapped="{ // Navigation method here }"/> 
```

是否可以在这样的页面之间导航......？如果可能的话，我怎样才能让它工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T10:16:24.847

如果您询问是否可以在 .xaml 文件中指定代码，那么不，这是不可能的。

如果您询问是否可以避免将代码添加到 .xaml.cs 文件，那么是的，这是可能的。您仍然需要指定一个方法，但它甚至可以作为一个简单的 lambda 来完成。您将需要使用命令挂钩而不是事件挂钩，例如

```
 <Button Command="{Binding GoConnectionCommand}" ... /> 
```

该命令的代码通常在 ViewModel 中定义为 MVVM 模式的一部分，[Josh Smith 对它的解释比我要好得多](http://msdn.microsoft.com/en-us/magazine/dd419663.aspx)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T08:49:50.680

XAML 只是一种没有操作部分的声明性语言，因此背后的代码是它的**重要**组成部分。所有交互都通过事件进行，事件只能在代码中处理。因此，使用 XAML（至少使用 WinRT XAML）不可能实现您想要的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-27T20:13:18.147

AlSki 提到使用 ViewModel。尽管从技术上讲，ViewModel 不是 XAML 文件的“代码隐藏”的一部分，但它仍然是代码，我相信您要求的是无代码解决方案。

ixSci 是正确的，如果没有 WinRT XAML 中的代码，就无法立即执行此操作。

在完整的 WPF 中，可以使用称为 NavigateToScreenAction 的行为来执行此操作。你可以在[这里](http://msdn.microsoft.com/en-us/library/ff723957%28v=expression.40%29.aspx)阅读。不幸的是，行为不会随 WinRT 开箱即用，但可以通过名为[WinRtBehaviors](http://winrtbehaviors.codeplex.com/)的开源项目重新添加。

WinRT 没有 NavigateToScreenAction 行为，但可以创建一个。[这里](http://blogs.u2u.be/diederik/post/2012/10/28/Using-Behaviors-in-Windows-8-Store-Apps.aspx)有一篇关于使用库创建行为的好文章。它显然需要代码来创建行为，但在创建之后，您可以在 XAML 中使用它而无需任何代码。

实际上，简短的回答是在 WinRT 上没有代码就无法导航。

开发支持、设计支持和更多的好处：http: [//bit.ly/winappsupport](http://bit.ly/winappsupport)

# javascript - 使用 jquery serialize() 函数进行简单的表单验证

> ID：15107049
> 
> 赞同：0
> 
> 时间：2013-02-27T08:10:34.260
> 
> 标签：javascript, jquery

```
$(document).ready(function(){

$('#send').click(function() { 

var names = $('#appontment_form').serialize();

//this is how my names variable look like
//doctor=Dr.Fathmath+Shahuda&date=2013-02-27&time=1900+-+1700&phone=

var doc = $(names).filter('doctor');

if(doc !='')
{
       $.ajax({
       type: "post",
       url:  "../../includes/jqueryRequireFiles/appointmentSave.php",
       data:names,
       success: function(data)
       { 
        $('#confir').text('Your Appointment Received..');
       }
       });
       return false;
 }
 });
}); 
```

我有一个预约表格。当我单击发送链接时，它将获取文本框中的所有值并通过 serialize() 函数将其放入名称变量中。我想过滤名称变量并找出是否有任何字段未填充..如果只有这样我将制作 ajax 部分..但它不起作用...任何帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T08:16:23.540

使用`$.serialize()`变量内容时的样子`?key=value1&key=value2`。如果您想验证表单，只需执行此操作而无需像这样进行序列化

```
var found_errors = false;
if($('#formfield1').val().trim() == "") {
    //Handle errors if field is empty
    found_errors = true;
} 
```

如果没有发现错误，序列化表单并发送。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T08:14:07.103

考虑使用 jQuery 验证插件。 [http://docs.jquery.com/Plugins/Validation](http://docs.jquery.com/Plugins/Validation)

# javascript - 如何为键值对象添加引号？

> ID：15107051
> 
> 赞同：0
> 
> 时间：2013-02-27T08:10:37.787
> 
> 标签：javascript, json, node.js, key-value

我怎样才能改变这个：

```
{"position":4} 
```

对此：

```
{"position":"4"} 
```

是否有任何 simpe 函数（在 javascript 或 node.js 包中），将引号放在 value 周围？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T08:20:23.483

也许是这样（在字符串中添加引号）：

```
var obj = {position: 4};
for (var p in obj)
    obj[p] = '"' + obj[p] + '"'; 
```

或者这个（将数字转换为字符串）：

```
var obj = {position: 4};
for (var p in obj)
    obj[p] = obj[p].toString(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T08:23:41.787

我去那里`4+""`，因为它把它变成了一个字符串。

但是您可能会重新考虑为什么需要将您的号码转换为字符串。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-27T08:15:58.873

我不认为有任何这样的功能，但你可以这样做：

编辑：如果您不知道属性值，请这样做：

```
var test=new Object();
test.position="4";
for (var prop in test) {
    test[prop]="\""+test[prop]+"\"";
      alert(prop + " = " + test[prop]);
   } 
```

检查更新[的 jsfiddle](http://jsfiddle.net/js6SB/3/)

# type-conversion - 使用 SSIS 从 .CSV 将字符串转换为整数

> ID：15107055
> 
> 赞同：1
> 
> 时间：2013-02-27T08:11:06.110
> 
> 标签：type-conversion, ssis

我正在使用 .CSV 文件，并且正在使用 SSIS 2008。

**来源**：.CSV

**目的地**：数据库

SSIS 将我的 .CSV 中的所有列视为字符串。

但我需要将 1 列推入**INT**类型的数据库列。

但是没有什么可以工作，我已经在源和目标之间的 SSIS 包中放置了一个 DataConversion，并且整数的数据类型都不想工作。

**错误信息：**

> 转换返回状态值 2 和状态文本“由于可能丢失数据，无法转换该值。”

关于这里发生了什么的任何输入？它甚至不想使用向导工作。

编辑：按要求提供样本数据-------------------------------------------- ----------------------------

> 姓名|身份证
> 
> 迈克|1266
> 
> 约翰|空

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-27T08:42:36.603

好的...您的问题是您的 CSV 中有物理值“NULL”。这些应该留空。通过在此处设置“NULL”，它试图将字符串“NULL”转换为它无法执行的 int。

只需确保所有“NULL”值都是空白的（零长度字符串）。那应该可以解决您的问题。

# javascript - 如何从jquery中的对象中删除值

> ID：15107057
> 
> 赞同：0
> 
> 时间：2013-02-27T08:11:29.067
> 
> 标签：javascript, jquery, jquery-ui

我将任意数据存储在一个对象中：

```
 $(".cat-list-table tr td").live("click",function(){
       if($("body").data($(this).html())){
            delete $("body").data().$(this).html(); // I am want to delete value if already exists 
      }else{
          $("body").data($(this).html(),$(this).html());
      }
   }); 
```

现在我想删除重复的值。

任何想法如何从对象中删除值。

提前致谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-27T08:13:50.497

使用[`removeData`方法](http://api.jquery.com/jQuery.removeData/)：

```
$("body").removeData($(this).html()); 
```

# pascal - 如何更改已经定义的函数的名称？费。writeNap 写（帕斯卡）

> ID：15107059
> 
> 赞同：1
> 
> 时间：2013-02-27T08:11:42.107
> 
> 标签：pascal

在上一课中，我们在单元文件中定义了几个函数和过程。

```
procedure WriteNap(const elo: string; const n: TNap; const uto: string);
begin
  Write(elo, Nap2Str(n), uto);
end;

function PredNap(const n: TNap): TNap;
begin
  case n of
    hetfo: PredNap := vasarnap;
    NemNap: PredNap := n;
  else  
    PredNap := Pred(n)
  end;
end;

function SuccNap(const n: TNap): TNap;
begin
  case n of
    NemNap: SuccNap := n;
  else
    SuccNap := Succ(n)
  end;
end; 
```

我必须去掉“Nap”这个词，这样我就可以在主程序中使用 Pred、Write、Succ 而不是 PredNap 等......我试图创建另一个使用这个单元并包含 Succ Pred 等功能的单元文件……真的没有成功。。

提前致谢 ：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T08:31:10.083

在文件的某处声明：

```
var Pred = Function (Const n:TNap):TNap; 
```

在您对程序主体执行任何操作之前，请编写：

```
Pred := @PredNap; 
```

这段代码的作用是，它创建一个与您的 PredNap() 具有相同签名的新函数指针，然后将 PredNap() 的地址分配给该指针。因此，无论何时调用 Pred()，实际调用的函数都是 PredNap()。希望这可以帮助。

# python - 用python读取National Instrument USB 6211的两个通道

> ID：15107062
> 
> 赞同：0
> 
> 时间：2013-02-27T08:11:54.583
> 
> 标签：python, nidaqmx

如果带有 python 的 USB 6211，我正在尝试同时读取两个通道。为此，我尝试通过更改行来调整[http://www.scipy.org/Cookbook/Data_Acquisition_with_NIDAQmx中的示例](http://www.scipy.org/Cookbook/Data_Acquisition_with_NIDAQmx)

```
CHK(nidaq.DAQmxCreateAIVoltageChan(
        taskHandle,
        "Dev1/ai0",
        "", 
        DAQmx_Val_Cfg_Default, 
        float64(-10.0),
        float64(10.0), 
        DAQmx_Val_Volts,
        None)) 
```

至

```
CHK(nidaq.DAQmxCreateAIVoltageChan(
    taskHandle,
    "Dev1/ai0:1",
    "", 
    DAQmx_Val_Cfg_Default, 
    float64(-10.0),
    float64(10.0), 
    DAQmx_Val_Volts,
    None)) 
```

但是，我不断收到错误消息“nidaq call failed with error -200229: 'Buffer is too small to fit read data”。添加行`CHK(nidaq.DAQmxCfgInputBuffer(taskHandle, uInt32(10000000)))`或增加数据数组的长度没有帮助......

有人可以指出我要更改的正确变量吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T07:46:47.527

我在这里找到了答案：[http ://www.physics.oregonstate.edu/~hetheriw/whiki/py/topics/ni/files/ni-daq_ctypes_multichannel_adc_usb_6008.txt](http://www.physics.oregonstate.edu/~hetheriw/whiki/py/topics/ni/files/ni-daq_ctypes_multichannel_adc_usb_6008.txt)

简而言之，nidaq.DAQmxReadAnalogF64() 的参数需要在taskHandle 之后附加参数“-1”。该行应如下所示：

```
CHK(nidaq.DAQmxReadAnalogF64(taskHandle, -1,float64(1.0),
    DAQmx_Val_GroupByScanNumber,#DAQmx_Val_GroupByChannel,#DAQmx_Val_GroupByScanNumber
    data.ctypes.data,max_num_samples,
    ctypes.byref(read),None)) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T21:38:31.620

这是我用 USB-6009 做 A 到 D 的对象。注意：底部是调用过程的示例。

```
#-------------------------------------------------------------------------------
# Name:       This is a object that takes data from the AtoD board
# Purpose:
#
# Author:      Carl Houtman
#
# Created:     12/10/2012
# Copyright:   (c) Carl Houtman 2012
# Licence:     none
#-------------------------------------------------------------------------------
from PyDAQmx import *
import numpy

class DAQInput:

    def __init__(self, num_data, num_chan, channel, high, low):
        """ This is init function that opens the channel"""
        # Declare variables passed by reference
        taskHandle = TaskHandle()
        read = int32()
        data = numpy.zeros((10000,),dtype=numpy.float64)
        sumi = [0,0,0,0,0,0,0,0,0,0]

        #Get the passed variables
        self.num_data = num_data
        self.channel = channel
        self.high = high
        self.low = low
        self.num_chan = num_chan

        # Create a task and configure a channel
        DAQmxCreateTask(b"",byref(self.taskHandle))
        DAQmxCreateAIVoltageChan(self.taskHandle,self.channel,b"",DAQmx_Val_Cfg_Default,
                                 self.low,self.high,DAQmx_Val_Volts,None)
        # Start the task
        DAQmxStartTask(self.taskHandle)

    def getData(self):
        """ This function gets the data from the board and calculates the average"""
        DAQmxReadAnalogF64(self.taskHandle,self.num_data,10.0,DAQmx_Val_GroupByChannel,
                           self.data,10000,byref(self.read),None)

        # Calculate the average of the values in data (could be several channels)
        i = self.read.value
        for j in range(self.num_chan):
            self.sumi[j] = numpy.sum(self.data[j*i:(j+1)*i])/self.read.value
        return self.sumi

    def killTask(self):
        """ This function kills the tasks"""
        # If the task is still alive kill it
        if self.taskHandle != 0:
            DAQmxStopTask(self.taskHandle)
            DAQmxClearTask(self.taskHandle)

if __name__ == '__main__':
    myDaq = DAQInput(100, 2, b"Dev1/ai0:1", 10.0, -10.0)
    result = myDaq.getData()
    print ("the average readings were {:.4f} and {:.4f} volts".format(result[0], result[1]))
    myDaq.killTask() 
```

# java - Java 向量数据分组

> ID：15107070
> 
> 赞同：1
> 
> 时间：2013-02-27T08:12:49.513
> 
> 标签：java, netbeans, apache-poi

我目前正在将 excel 数据导入 Java 中的向量中，但是现在我想对该数据进行分组，以便将具有相同 ID 的相似数据进行分组（在我的情况下为问题编号）。

这是我的导入代码：

```
import java.io.File;
import java.io.FileInputStream;
import java.util.Enumeration;
import java.util.Iterator;
import java.util.Vector;
import javax.swing.JFileChooser;
import org.apache.poi.ss.usermodel.Sheet;
import org.apache.poi.ss.usermodel.Workbook;
import org.apache.poi.ss.usermodel.WorkbookFactory;
import org.apache.poi.xssf.usermodel.XSSFCell;
import org.apache.poi.xssf.usermodel.XSSFRow;

public class FileChooser extends javax.swing.JFrame {
private String path ="";

public FileChooser() {
    initComponents();
}

private static Vector importExcelSheet(String fileName)
{
Vector cellVectorHolder = new Vector();
try
{
    Workbook workBook = WorkbookFactory.create(new FileInputStream(fileName));
    Sheet sheet = workBook.getSheetAt(0);
    Iterator rowIter = sheet.rowIterator();

    while(rowIter.hasNext())
    {
        XSSFRow row = (XSSFRow) rowIter.next();
        Iterator cellIter = row.cellIterator();
        Vector cellStoreVector=new Vector();

        while(cellIter.hasNext())
        {
            XSSFCell cell = (XSSFCell) cellIter.next();
            cellStoreVector.addElement(cell);
        }
        cellVectorHolder.addElement(cellStoreVector);
    }
}
catch (Exception e)
{
    System.out.println(e.getMessage());
}
return cellVectorHolder;
}

private void jButton1ActionPerformed(java.awt.event.ActionEvent evt) {
JFileChooser chooser = new JFileChooser();
    chooser.setFileSelectionMode(JFileChooser.FILES_ONLY);
    int option = chooser.showOpenDialog(this); // parentComponent must a component like JFrame, JDialog...
    if (option == JFileChooser.APPROVE_OPTION) {
    File selectedFile = chooser.getSelectedFile();
     path = selectedFile.getAbsolutePath();
     jTextField1.setText(path);
    }
}

private void jButton2ActionPerformed(java.awt.event.ActionEvent evt) {
Vector dataHolder = importExcelSheet(path);

    Enumeration e = dataHolder.elements();  // get all vector elements
    while (e.hasMoreElements()) {       // step through all vector elements
    Object obj = e.nextElement();
    System.out.println(obj);
    }// TODO add your handling code here:
} 
```

任何帮助或建议将不胜感激。

# jquery - jQuery .load() 不工作

> ID：15107074
> 
> 赞同：15
> 
> 时间：2013-02-27T08:13:13.130
> 
> 标签：jquery, url, html, dns, load

在我的网站上，我试图在我的论坛（托管在同一域上）中提取帖子的内容，并使用 jQuery 将其显示在主页上的 div 中。

这是标题的代码：

```
<script type="text/javascript" src="//ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"> 
```

```
<script type="text/javascript">
jQuery("#contain").load("http://examplepage.com/forum/showthread.php?tid=NN #pid_NN");
</script> 
```

然后，有我想显示帖子的 div：

```
<div id="contain"></div> 
```

需要考虑的事项：

*   该库加载得很好。
*   如果我输入任何其他代码，它就可以工作（例如测试警报（1）；）。
*   控制台不报告任何错误。
*   div 保持空白；事实上，它甚至没有显示。不过，它就在那里。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-27T08:17:36.710

你的代码应该是这样的

```
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"> 
```

js代码

```
 <script type="text/javascript">
   jQuery(document).ready(function(){
       jQuery("#contain").load("http://examplepage.com/forum/showthread.php?tid=NN #pid_NN");
   });
</script> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-07-26T22:33:41.070

`.load`可以单独传递你的 GET 参数：

```
.load("link to php", "http://examplepage.com/forum/showthread.php", "tid=NN#pid_NN") 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-27T08:20:26.360

您的 jQuery 包含需要一个结束`</script>`标记，并且您需要等待 dom 加载。

JS

```
<script type="text/javascript" src="//ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>

<script type="text/javascript">
    jQuery(document).ready(function(){
        jQuery("#contain").load("http://examplepage.com/forum/showthread.php?tid=NN#pid_NN");
    });
</script> 
```

HTML

```
<div id="contain"></div> 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-02-27T08:29:38.847

检查此代码。您应该在容器 ID 之后使用“>*”来在页面上加载特定于内容的容器。

```
jQuery('#contain').load("http://example.com/pageurl #somecontaineronpage >*",function(){
      //after loading completion code goes here                      
}); 
```

希望，这会有所帮助

# javascript - 使用 WinJS 的构造函数中的实例函数

> ID：15107076
> 
> 赞同：0
> 
> 时间：2013-02-27T08:13:16.507
> 
> 标签：javascript, windows-store-apps, winjs

我有一个大致定义如下的函数：

```
var myNamespace = WinJS.Namespace.define("MyNamespace", {    
    myClass: WinJS.Class.define(
        function (myVariable) {
             myFunction(myVariable);
        },
        {
            myFunction: function FunctionMine(myVariable) {
            // Do stuff
            }
        ... 
```

我正在使用 WinJS 编写一个 Windows 商店应用程序，而上述格式似乎不起作用 - 它无法识别`myFunction`为函数。是否可以从类构造函数中引用类的实例成员？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T16:44:44.420

您需要使用“this.myFunction”。

您的函数不在允许您以这种方式调用它的范围内。

# java - 我的任务是使用 for 循环建造房子。房子应该是这样的

> ID：15107080
> 
> 赞同：5
> 
> 时间：2013-02-27T08:13:25.510
> 
> 标签：java, printing, geometry

```
 *      
  *****
*********
*********
****  ***
****  *** 
```

到目前为止我只有这个

```
for (int i=1; i<10; i += 4)
    {

      for (int j=0; j<i; j++)
      {
        System.out.print("*");
      }
      System.out.println("");
    }
  }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T08:44:53.453

最简单的决定是：

```
 for (int y = 0; y < 6; y++) {
        int shift = y < 2 ? 4 / (y + 1) : 0;
        for (int x = 0; x < 9 - shift; x++) System.out.print(x >= shift && (y < 4 || (x < 4 || x > 5)) ? "*" : " ");
        System.out.println();
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T08:28:56.440

您可以像这样使用二维数组：

```
char matrice [][]= {{' ',' ',' ',' ' '*', ' ',' ',' ',' '},
        {' ',' ','*','*', '*', '*','*',' ',' '}}; 
```

（等等）。你基本上使用你的数组索引来绘制你的房子。

现在，当您必须打印一个字符时，您可以使用 System.out.print() 解析每一行，并在每行之间使用 System.out.println("") 解析。

它看起来像这样：

```
for(char[] line : house){

    for(char d : line){
        System.out.print(d);
    }

    System.out.println("");

} 
```

如果您不熟悉它，您应该查看[for-each 语句文档。](http://docs.oracle.com/javase/1.5.0/docs/guide/language/foreach.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-27T08:58:28.060

我认为安德烈的答案是最简洁的一个，但如果你想拥有*可配置*的房屋建筑，你可以使用下一个（尝试改变高度/宽度以查看效果）：

```
public class House {

    public static void main(String[] args) {
        final int HEIGHT = 6;
        final int WIDTH = 9;

        for (int i = 0; i < HEIGHT * 2; i += 2) {
            for (int j = 0; j < WIDTH; j++) {// check for roof
                if ((i + (i % 2) + (WIDTH) / 2) < j // right slope
                        || (i + (i % 2) + j) < (WIDTH) / 2)// left slope
                {
                    System.out.print(" ");
                } else {
                    if ((i / 2 >= HEIGHT * 2 / 3) && (j >= WIDTH / 2) && j < WIDTH / 2 + HEIGHT / 3) {// check for door
                        System.out.print(" ");
                    } else {// solid then
                        System.out.print("*");
                    }
                }
            }
            System.out.println();
        }

    }
} 
```

**编辑**- 回答评论：尝试运行下两个示例并比较输出：

```
public static void main(String[] args) {
    final int SIZE = 9;
    for (int i = 0; i < SIZE; i++) {
        for (int j = 0; j < SIZE; j++) {
            System.out.print(i < j ? "+" : "-");
        }
        System.out.println();
    }
} 
```

和

```
public static void main(String[] args) {
    final int SIZE = 9;
    for (int i = 0; i < SIZE; i++) {
        for (int j = 0; j < SIZE; j++) {
            System.out.print(i < SIZE - j - 1 ? "+" : "-");
        }
        System.out.println();
    }
} 
```

第一个会给你右坡和第二个左坡。这一切都来自点的几何特性。在第一种情况下，所有点在 x 轴上的值都将大于在 y 轴上的值。在第二个中，x 和 y 总和不会超过 SIZE。

您可以尝试修改语句内部的布尔表达式`if()`，看看会发生什么，但我鼓励您拿一张纸，尝试用纸和笔玩一下，看看某些点有什么属性。如果您需要更多解释，请告诉我。

# dart - indexed_db openCursor 最新变化

> ID：15107081
> 
> 赞同：0
> 
> 时间：2013-02-27T08:13:32.047
> 
> 标签：dart

以下代码已发布为 openCursor 的新处理。有人可以建议以下代码现在是否可以工作（Dart r18915），什么是“值”变量？

```
store.openCursor(autoAdvance: true).listen(
    (cursor) => values.add(onCursor(cursor)),
    onDone: () => completer.complete(values),
    onError: (e) => completer.completeError(e));
return completer.future; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T14:24:38.320

我不确定你的`onCursor()`函数正在做什么/调用。我假设您的 values 变量是一个列表。

我自己做了类似的事情，但使用回调而不是未来/完成者。你这里只有一个小函数片段。我将把它冲洗掉一些，希望能添加一些细节：

```
// Accept the indexeddb Database, and return a future which
// will provide the list of values from 'someKey'
Future<List<String>> getSomeKeyValues(Database db) {
  var values = new List<String>();
  var completer = new Completer();

  var store = db.transaction('DB_STORE', 'readwrite').objectStore('DB_STORE');
  store.openCursor(autoAdvance: true).listen((cursor) {
      if(cursor != null && cursor.value != null) {
        // Note cursor.value is actually a Map<String, String> 
        // of collection's key and value
        values.add(cursor.value['someKey']); // get the value key 'someKey'
      }
    }, onDone: () => completer.complete(values),
    onError: (e) => completer.completeError(e));

  return completer.future;
} 
```

然后我们会像这样调用这个函数：

```
getSomeKeyValues(myDatabase).then((results) {
  for(var value in results) {
    print(value);
  }
} 
```

# c# - 如何实现类型指定的泛型方法？

> ID：15107098
> 
> 赞同：1
> 
> 时间：2013-02-27T08:14:25.727
> 
> 标签：c#, generics

我有课`MyClass<T> where T : IComparable`，我想实现一个将被调用的方法 if `T`is `String`。我怎样才能做到这一点？

*现在我有以下代码：*

```
public void Method()
    {
        ... 

        Type typeParameterType = typeof(T);
        if (typeParameterType.Equals(typeof(String))) 
        {
            // here I can't do (String) anyTTypeValue
            // to call handleString(String) method
        }

        ...
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-27T08:28:21.823

您可以利用`as`运算符并检查是否`valString`不为空。然后，您将可以访问`string`特定的属性和方法。下一个代码片段将展示主要思想：

```
public void Method<T>(T val)
{
    string valString = val as string;
    if(valString != null)
    {
        Console.WriteLine (valString.Length);
    }
}

Method("tyto"); //prints 4
Method(5); //prints nothing 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-27T08:18:02.103

尝试 ：

```
(string)(object) anyTypeValue; 
```

顺便说一句，你不必做所有这些——你可以说：

```
if(anyTypeValue is string)
{
    string strValue = (string)(object)anyTypeValue;
    ...
} 
```

编辑：

正如@Ilya 建议的那样，您可以`as`在引用类型和`Nullable<T>`类型的情况下使用。由于`string`是引用类型，您可以这样做：

```
var strValue = anyTypeValue as string;
if(strValue != null)
{
    ...
} 
```

但是，你不能用 a 做同样的事情`int`：

```
var intValue = anyTypeValue as int; //compiler error 
```

另请注意，您无法判断`strValue != null`是 false 是因为`anyTypeValue`was`null`开始还是因为`anyTypeValue`was *not a string*。

在某些用例中，这些不是问题，因此`as`最好使用。

# django - 仅在生产 Django 中使用 S3

> ID：15107102
> 
> 赞同：0
> 
> 时间：2013-02-27T08:14:45.530
> 
> 标签：django, amazon-s3, django-storage

我将我的 base_settings.py 设置为`DEBUG = False`，在我的设置结束时，我有以下代码：

```
 if not DEBUG:
    AWS_STORAGE_BUCKET_NAME = 'bucket_name'
    STATICFILES_STORAGE = 'storages.backends.s3boto.S3BotoStorage'
    S3_URL = 'http://%s.s3.amazonaws.com/' % AWS_STORAGE_BUCKET_NAME
    STATIC_URL = S3_URL 
```

在我的 local_settings.py 中，我设置了`DEBUG = True`.

我的设置模块的**init .py 文件：**

```
from .base import *

try:
    from .local import *
except ImportError:
    pass 
```

出于某种原因，在本地工作时，尽管我没有设置 DEBUG，但它仍会尝试从 S3 中提取静态文件。我想到的原因是它首先读取基本文件并在实际导入 local_settings.py 之前测试 DEBUG。所以我的问题是：我该如何解决这个问题，所以 s3 文件只用于生产？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T08:22:25.547

假设您在本地有一个 .local 包，请尝试删除 .local 导入周围的 try/except 并查看是否引发任何错误。

此外，如果您在 base 中将 DEBUG 设置为 TRUE，并在 .locals 中设置您的 URLS 和存储，然后将 DEBUG 设置为 false，则您需要在 .locals 中重置您的 URLS 和存储。

.locals 是在你的基础文件已经被导入之后被导入的，所以你的行：

```
if not DEBUG: 
```

…在导入期间评估为 TRUE，将所有内容设置为使用 S3。

# unit-testing - 对于内部方法测试用例方法不可访问

> ID：15107103
> 
> 赞同：0
> 
> 时间：2013-02-27T08:14:52.540
> 
> 标签：unit-testing, c#-4.0

我正在为我的内部方法编写单元测试用例。我在我的邮件类项目 [assembly: InternalsVisibleTo("myunitest_assemblyname")] 的 AssemblyInfo.cs 中进行了必要的更改

现在我可以在单元测试用例方法中访问我的内部方法。但是当我编译代码时，它给出了如下错误

## 错误 1“主类项目名称”不包含“流程”的定义，并且找不到接受“主类项目名称”类型的第一个参数的扩展方法“流程”（您是否缺少 using 指令或程序集引用?)

我的主班有很强的名字。

如果我错过了某个点，那就太好了。

主类结构

```
namespace Renewals
{
    public class StateProcessor
    {
        internal virtual void PutEmailInQueue(DataTable dataTable)
        {    
        }
    }
} 
```

//测试类结构

```
namespace Renewals.Tests.Unit
{
    [TestClass]
    public class StateProcessorTest
    {

        [TestMethod]
        public void PutEmailInQueueTest()
        {
            DateTime processingDate = Convert.ToDateTime("27-feb-2013"); ;

            StateProcessor stateProcess = new StateProcessor(processingDate);
            stateProcess.PutEmailInQueue(new DataTable());
        }
    }
} 
```

PutEmailInQueue - 这种方法给我带来了问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T10:58:27.607

您写道，您的班级使用强名称。

我认为您必须使用公钥修改您的 InternalsVisibleTo() 语句。

例如：[组件：InternalsVisibleTo（ “friend_signed_B，公钥= 0024000004800000940000000602000000240000525341310004000001000100e3aedce99b7e10823920206f8e46cd5558b4ec7345bd1a5b201ffe71660625dcb8f9a08687d881c8f65a0dcf042f81475d2e88f3e3e273c8311ee40f952db306c02fbfc5d8bc6ee1e924e6ec8fe8c01932e0648a0d3e5695134af3bb7fab370d3012d083fa6b83179dd3d031053f72fc1f7da8459140b0af5afc4d2804deccb6”）]

有关详细信息，请参阅：http: [//msdn.microsoft.com/en-us/library/bb385180.aspx](http://msdn.microsoft.com/en-us/library/bb385180.aspx)

# java - BufferedReader 直接到 byte[]

> ID：15107104
> 
> 赞同：8
> 
> 时间：2013-02-27T08:14:52.867
> 
> 标签：java, sockets, bytearray, inputstream, bufferedreader

我的以下 BufferedReader 是否有可能将输入直接放入字节 []？

```
public static Runnable reader() throws IOException {
    Log.e("Communication", "reader");
    din = new DataInputStream(sock.getInputStream());
    brdr = new BufferedReader(new InputStreamReader(din), 300);
    boolean done = false;
    while (!done) {
       try {
       char[] buffer = new char[200];
           int length = brdr.read(buffer, 0, 200);
           String message = new String(buffer, 0, length);
           btrar = message.getBytes("ISO-8859-1");                      
           int i=0;
           for (int counter = 0; counter < message.length(); counter++) {
              i++;  
              System.out.println(btrar[counter] + " = " + " btrar "  + i);
           }
    ... 
```

那是读者的一部分，请看一下。

我想直接输入到 btrar，

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-02-27T08:16:08.297

> 我的以下 BufferedReader 是否有可能将输入直接放入字节 []？

Any`Reader`旨在让您读取*字符*，而不是字节。要读取二进制数据，只需使用`InputStream`- using`BufferedInputStream`来缓冲它。

目前还不清楚你要做什么，但你可以使用类似的东西：

```
BufferedInputStream input = new BufferedInputStream(sock.getInputStream());
while (!done) {
    // TODO: Rename btrar to something more meaningful
    int bytesRead = input.read(btrar);
    // Do something with the data...
} 
```

# asp.net - 消息弹出出现在表格“有触摸”上

> ID：15107109
> 
> 赞同：0
> 
> 时间：2013-02-27T08:15:18.970
> 
> 标签：asp.net, nexus

我正在开发 asp.net Web 应用程序。但是，客户报告说，现在他在通过表格（nexus 10 和 chrome 和 Firefox）浏览应用程序时收到奇怪的消息“已触摸”。

我真的不知道为什么会这样？请给我一些提示，看看。我什至没有桌子来测试这个。

我没有在谷歌找到任何东西，除了这个论坛 thred：[https](https://www.3dbuzz.com/forum/threads/200143-The-page-at-www-3dbuzz-com-says-has-Touch?p=1593842) ://www.3dbuzz.com/forum/threads/200143-The-page-at-www-3dbuzz-com-says-has-Touch?p=1593842 它提出了同样的问题，但没有说明此消息的来源或如何删除它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-06-20T17:55:59.110

我认为它来自 jquery.Tablednd.0.7.min.js。看起来它已在 github 上的最新版本中被删除。

[https://github.com/isocra/TableDnD/pull/6](https://github.com/isocra/TableDnD/pull/6)

祝你好运。

# asp.net - 无法识别日期时间

> ID：15107116
> 
> 赞同：0
> 
> 时间：2013-02-27T08:15:59.467
> 
> 标签：asp.net, datetime, calendar

FormatException 未被用户代码处理。
该字符串未被识别为有效的日期时间。

```
protected void Page_Load(object sender, EventArgs e)
    {

        // to simulate a database query
        socialEvents = new DataTable();
        socialEvents.Columns.Add(new DataColumn("Date", typeof(DateTime)));
        socialEvents.Columns.Add(new DataColumn("Description", typeof(string)));
        socialEvents.Columns.Add(new DataColumn("Url", typeof(string)));

        DataRow row;
        row = socialEvents.NewRow();
        row["Date"] = DateTime.Now.AddDays(-5);
        row["Description"] = "Work";
        row["Url"] = "http://www.url.cz";
        socialEvents.Rows.Add(row);
    } 
```

以下方法中的错误：

```
protected void Calendar1_DayRender(object sender, DayRenderEventArgs e)
        {
            **DataRow[] rows = socialEvents.Select(
             String.Format(
                "Date >= #{0}# AND Date < #{1}#",
                e.Day.Date.ToShortDateString(),
                e.Day.Date.AddDays(1).ToShortDateString()**
             )
          ); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T08:49:57.047

我建议使用 LINQ 来做到这一点：

```
protected void Calendar1_DayRender(object sender, DayRenderEventArgs e)
{
    var rows = socialEvents.Rows.Cast<DataRow>
               .Where(r => (DateTime)r["Date"] >= e.Day.Date 
                           && (DateTime)r["Date"] <= e.Day.Date.AddDays(1))
               .ToArray();
); 
```

字符串格式的查询不再麻烦：您可以使用基于实际值的过滤器。

当然，如果 Date 可以为空，您将不得不处理这个问题。告诉我，如果需要，我会编辑这段代码。

# c++ - DirectX9 中的 Alpha 混合问题

> ID：15107121
> 
> 赞同：0
> 
> 时间：2013-02-27T08:16:41.327
> 
> 标签：c++, directx, directx-9

我非常渴望在 DirectX 中实现所需的 alpha 混合结果。我正在尝试绘制纹理，并在其上绘制彩色三角形条。

尽管我做了所有尝试，但条带的颜色似乎受到之前绘制的纹理颜色的影响。即使我将 D3DRS_ALPHABLENDENABLE 设置为 FALSE，我仍然看到颜色受到影响。

这是图像的样子（使用 openGL 渲染）

![在此处输入图像描述](../Images/21d03b4bcd78bbfa61bd2f5324a4d754.png)

这是我使用 directX 渲染得到的结果：

![在此处输入图像描述](../Images/ea4628bd5f49b7f221f38b1e1658f174.png)

如您所见，第二个图像紫色条具有黄色阴影，没有任何特定原因:(（黄色矩形是纹理，而不是多边形）。

这是我在引擎初始化中使用的设置：

```
m_pDirect3D_Device->SetRenderState(D3DRS_ALPHABLENDENABLE, TRUE);
m_pDirect3D_Device->SetRenderState(D3DRS_SRCBLEND, D3DBLEND_SRCALPHA);
m_pDirect3D_Device->SetRenderState(D3DRS_DESTBLEND, D3DBLEND_INVSRCALPHA);

m_pDirect3D_Device->SetTextureStageState(0, D3DTSS_ALPHAOP, D3DTOP_BLENDDIFFUSEALPHA);
m_pDirect3D_Device->SetTextureStageState(0, D3DTSS_ALPHAARG1, D3DTA_TEXTURE);
m_pDirect3D_Device->SetTextureStageState(0, D3DTSS_ALPHAARG2, D3DTA_DIFFUSE); 
```

这些设置是唯一可以让我正确混合纹理的设置，但我无法实现正确的多边形混合。有什么帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T10:58:49.283

我最终想通了。除了 Alpha Blending，还有一个 Color Blending。所以 DirectX 将最后一个纹理的颜色与最后一个图元合并。为了解决它，我们需要设置：

```
m_pDirect3D_Device->SetTextureStageState(0, D3DTSS_COLOROP, D3DTSS_COLORARG1);
m_pDirect3D_Device->SetTextureStageState(0, D3DTSS_COLORARG1, D3DTA_DIFFUSE); 
```

在绘制图元之前 - 意味着只从图元（漫反射）中获取颜色，并且：

```
m_pDirect3D_Device->SetTextureStageState(0, D3DTSS_COLOROP, D3DTSS_COLORARG1);
m_pDirect3D_Device->SetTextureStageState(0, D3DTSS_COLORARG1, D3DTA_TEXTURE); 
```

在绘制纹理之前 - 意味着只使用纹理颜色。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-09-14T12:13:49.327

Old topic, but useful one!

I noticed a small detail, just to avoid some confusion: I think that the parameter to `SetTextureStageState` should be `D3DTOP_SELECTARG1` instead of `D3DTSS_COLORARG1` (same value anyway, so no big deal!).

# mysql - Mysql 只返回第一个结果

> ID：15107134
> 
> 赞同：0
> 
> 时间：2013-02-27T08:17:11.260
> 
> 标签：mysql, cakephp, cakephp-1.2

我有一个搜索表单的查询：

```
// General Query
$conditions = array(
    'editore LIKE' => "%$e%",
    'titolo LIKE' => "%$t%"
); 
```

现在，如果用户选择填写某个字段（例如作者、年份等），我有：

```
if (isset($menu)&&$menu!='')
    $conditions[]=array('classe LIKE' => "%$menu%"); 
```

或者：

```
if ($anno&&$anno2)
    $conditions[] = array('anno BETWEEN ? AND ?' => array($anno,$anno2)); 
```

如果用户为这本书选择了一些标签，我有：

```
$query_t = $CdBibliotem->query("SELECT codiceBiblio FROM cd_bibliotem WHERE codiceTematica IN (".implode(',', $fields).")");        
$query_t = Set::classicExtract($query_t,'{n}.cd_bibliotem.codiceBiblio'); 
$tot=implode(',', $query_t);
$conditions[]=array('codiceBiblio IN (?)'=> "$tot"); 
```

这应该可以，但是我不知道为什么，*它只给了我第一条记录*。

这是调试最终查询的示例，其中用户仅选择 1 个标签，而将其他字段留空：

```
Array (
[editore LIKE] => %%
[titolo LIKE] => %%
[0] => Array
    (
        [autori LIKE] => %%
    )

[1] => Array
    (
        [codiceBiblio IN (?)] => 118729,118656,118645,118554,118534,118533,118532,118531,118530,118529,118528,118527,118526,118121,117632,117515,117040,116562,115851,115787,114613,114612,113545,113385,113142
    ) ) 
```

在这种情况下，它给了我第一本书的所有细节（id=118729），同时它应该给我所有这些书的细节。

# java - 在android中静音时隐藏音量toast

> ID：15107142
> 
> 赞同：0
> 
> 时间：2013-02-27T08:17:42.167
> 
> 标签：java, android, android-audiomanager

我使用Android 4.0.3 上`setStreamMute(int, boolean)`的类中的方法。`AudioManager`每次我调用此方法时，UI 中都会显示当前音量的 toast。静音/取消静音时有没有办法隐藏音量吐司？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T08:38:55.040

您可以使用`setStreamVolume`将音量设置为最低。这为您提供了一种调整音量的方法，还提供了一个标志（请参见[此处](http://developer.android.com/reference/android/media/AudioManager.html#setStreamVolume%28int,%20int,%20int%29)）。最后一个`int`参数是[FLAG_SHOW_UI](http://developer.android.com/reference/android/media/AudioManager.html#FLAG_SHOW_UI)，它是这些消息的标志。

干杯

# windows-phone-7 - Windows Phone 继承的应用程序页面：设计器错误但可以编译

> ID：15107145
> 
> 赞同：0
> 
> 时间：2013-02-27T08:17:46.813
> 
> 标签：windows-phone-7, xaml, windows-phone-8

我有一个 XAML 页面，它继承自我的用户定义类：

```
<xpap:GenericListPage 
x:Class="my.View.ListPage"
xmlns:xpap="clr-namespace:my.View.Generic" ... /> 
```

最初我想为我的 XAML 页面使用通用基类，但这是不可能的（至少在 WP7 中；**在 WP8 中是否可以为页面使用通用基类？**）。所以我最终得到了这个解决方法（ExtendedPhoneApplicationPage 继承自 PhoneApplicationPage 添加了我的所有页面（如 ListPage 等）都应该具有的额外功能/行为）：

```
namespace my.View
{
    namespace Generic
    {
        public partial class GenericListPage : 
            ExtendedPhoneApplicationPage<ListViewModel>
        {
            ...
        }
    }

    public partial class ListPage : Generic.GenericListPage
    {
        ...
    }

    public class ExtendedPhoneApplicationPage<T> : 
        PhoneApplicationPage where T : class, IViewModelBase
    {
        ...
    }
} 
```

在我安装了 WP8 SDK 之前，这一切都很好（据我所知）。设计器说“无效标记”并且有一个错误说：“名称“GenericListPage”在命名空间“clr-namespace:my.View.Generic”中不存在。”

奇怪的是，该解决方案可以编译并可以部署在模拟器上。任何人都知道为什么或如何消除错误？

# java - '.bat' 文件中的 args 包含一些空格，我怎样才能正确获取 args？

> ID：15107146
> 
> 赞同：1
> 
> 时间：2013-02-27T08:17:48.197
> 
> 标签：java, batch-file, cmd

cmd中的stat命令：

```
start.bat -arg1 -ar g2 -arg3 
```

我怎样才能得到第二个参数？字符串 'ar g2' 包含一个空格。

我需要从 bat 文件中获取 args（可能包含空格字符），然后我将在 java 文件中处理它们。

有人可以给我一个解决方案吗？非常感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-27T08:26:24.177

在 (DOS/Windows) 命令行上，您应该始终用引号将包含空格的参数括起来。例如

```
start.bat -arg1 "-ar g2" -arg3 
```

用引号包围每个参数，即使是没有空格的参数，也不会受到伤害，但是您的批处理脚本需要删除引号（请参见下面的代码示例）。

从我记事起就是这种情况（Windows 3.1 之前的 DOS 时代）。当实现长文件名（可能包括空格）时，这变得更加普遍。例如

```
C:\Users\adam>copy "My Documents" "My Backup Files" 
```

（也可以不带引号尝试）。

这是 CMD 方式，任何从 CMD 调用的程序都会正确理解这一点。

代码示例（可能对调试有用，以查看实际返回的内容。使用参数列表运行批处理文件或 Java 类并进行操作。）

**批处理脚本**（**〜**（波浪号）字符很重要，它删除了周围的引号）：

```
    @echo 关闭
    FOR %%a IN (%*) DO 回显 [%%~a]

```

**Java**（自动删除周围的引号）

```
    公共类 TestArg {
        公共静态无效主要（字符串[]参数）{
            对于（字符串 a : args）{
                System.out.println("[" + a + "]");
            }
        }
    }

```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T08:25:39.400

是否可以用 | 分割字符串？字符，然后修剪值（左+右）？这应该保留它们之间的空间。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-27T08:29:21.257

你可以使用类似下面的东西......只是概念验证代码，其余的你需要自己做......或者像我一样买一本关于java编程的书。

```
public static void main(String argv[])
    {
    String argument1 = "";
    String argument2 = "";
    String argument2value = "";
    String argument3 = "";
    for(int c=0;c<argv.length;c++)
        {
        if(argv[c].indexOf("-")==0)
            {
            if(argument1.length() == 0)
                {
                argument1 = argv[c].substring(1,argv[c].length());
                }
            if(argument2.length() == 0)
                {
                argument2 = argv[c].substring(1,argv[c].length());
                }  
            }
        else
            {
            if(argument2.length() != 0)
                {
                argument2value = argument2value + argv[c]
                }
            }
        }
    } 
```

# java - addObserver() 方法，观察者模式和对象变量生命周期/范围，Java

> ID：15107152
> 
> 赞同：2
> 
> 时间：2013-02-27T08:18:01.730
> 
> 标签：java, observer-pattern

例如，当我使用 .addObserver() 方法时：

```
 class ExampleOne implements Observer {

  class ExampleTwo extends Observable {

  ExampleOne one = new ExampleOne();

  ExampleTwo two = new ExampleTwo();

  two.addObserver(one) 
```

在这种情况下，是实例对象“两个”和“一个”之间的连接还是 class.class 像静态情况一样，在我看来它像实例，但不确定，如果这是观察者和被观察者之间的连接，那么什么如果“一”或“二”被垃圾收集或超出范围，会发生什么？这会破坏观察者的设置吗？

例如，当服务器从客户端接收到字符串消息时，观察者用于通知何时有新的文本消息到达。如果其中一个实例变量超出范围并被垃圾收集，那么当消息到达时将不再有通知，因为系统将被破坏。它是否正确？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T08:22:55.030

`Observable`有一个`vector`包含对使用该方法注册的所有观察者**的引用。**`addObserver()`因此，即使观察者超出范围，对它的引用仍然存在于可观察对象中，并且**不会被垃圾回收**。

垃圾收集它调用`removeObserver`然后它将被垃圾收集。

如果`Observable`超出范围，那么是的，现在不会向观察者发送任何通知。并且观察者可以被垃圾收集。

> 在这种情况下，是实例对象“二”和“一”之间的连接还是 class.class 像静态的情况

是的，一切都发生在实例上，这里不涉及静态。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-27T08:21:06.943

Observable 保留对添加到它的每个观察者的引用，直到显式删除。因此，只有在 Observable 可以进行垃圾收集时，Observer 才有资格进行垃圾收集。

除非您的代码引入，否则从 Observer 到 Observable 没有反向引用。所以保持对 Observer 的引用并不会阻止 Observable 进行垃圾收集。

您可以随时查看 Observable 源代码以了解它是如何完成的：

```
public synchronized void addObserver(Observer o) {
    if (o == null)
        throw new NullPointerException();
if (!obs.contains(o)) {
    obs.addElement(o);
}
} 
```

Vector在哪里`obs`，它保留对其元素的引用。

# php - 在一个数据单元格中创建分隔值 SQL

> ID：15107159
> 
> 赞同：0
> 
> 时间：2013-02-27T08:18:33.197
> 
> 标签：php, sql, postgresql

我想创建一个朋友表，其中包含当前用户的用户 ID，以及当前用户朋友的其他用户 ID。

有点像这样：

```
userid    friends
456       345; 745; 769; 
```

我希望能够在当前用户每次获得朋友时更新[在旧值之后插入新值]此数据。

我已经看到有关分隔符和内爆/爆炸数据的主题，但我似乎无法确定如何开始。

任何想法，有人吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T08:22:00.817

重新考虑您的方法并使用一个简单的表，其中每个用户 ID/朋友对都有一条记录。

```
userid    friends
456       345
456       745
456       769 
```

这种方式很容易从中选择和维护数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T08:25:37.387

如果你必须保持现有的结构。要添加朋友：

1.  检查好友是否存在于当前好友列表中

假设`$rs['friends']`包含`345; 745; 769;`且新朋友 ID 为 999

```
// remove trailing `;`
$friend_list = substr($rs['friends'], 0, strlen($rs['friends'])-1);
$friends = explode('; ', $friend_list);
if(in_array(999, $friends)) {
  // friend exists
} else {
  $friend_list .= '; 999;';
  // then save back to DB
} 
```

但是，我建议改用关系表

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-27T08:29:26.867

嗯，我还在学习。您的所有意见都非常有帮助。谢谢大家！我会考虑每一个，并寻求更多的想法。

# ruby-on-rails - Rails ActionView::Template::Error: 资产编译后

> ID：15107164
> 
> 赞同：0
> 
> 时间：2013-02-27T08:18:42.277
> 
> 标签：ruby-on-rails, compiler-errors, asset-pipeline, assets

我正在写一个似乎激怒了我们在 Circle CI 上的一些测试的故事，所以我跳过了这个案例，只是发现我的机器上的测试因不同的事情而失败，即我忘记编译资产。然后我尝试像这样编译我的资产

```
bundle exec rake assets:precompile 
```

失败了

```
rake aborted!
database configuration does not specify adapter 
```

然后意识到我应该跑

```
bundle exec rake assets:precompile RAILS_ENV=development 
```

这很好，但是在运行我的测试服时，我的测试到处都是红色

丢出去

```
Failure/Error: visit login_page
 ActionView::Template::Error:
   undefined method `paid?' for nil:NilClass 
```

我尝试重新整理我的数据库，重新编译我的资产，但似乎没有什么能让它再次运行？

它是如此奇怪，因为在我编译资产之前这些测试很好吗？但据我所知，这个`ActionView::Template::Error:`错误的所有其他解决方案是编译资产，但我的是？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T08:40:19.803

所以我发脾气，开始把我的玩具扔出婴儿床！并尝试重置我的数据库，幸运的是我从我的测试数据库开始。

我跑了`RAILS_ENV=test bundle exec rake db:reset`，然后意识到如果我`test:prepare`那么它就不会播种。不知何故，我的 test:db 一定已经丢掉了种子？但现在它的工作

感谢并抱歉在没有尝试一切的情况下提出问题。

# jquery - 鼠标悬停时的选项卡式滑块

> ID：15107167
> 
> 赞同：0
> 
> 时间：2013-02-27T08:18:50.170
> 
> 标签：jquery, tabs, slider, mouseover, sliding

这是我正在使用的小提琴：http: [//jsfiddle.net/V6Vmh/5/](http://jsfiddle.net/V6Vmh/5/)

```
$(document).ready(function () {

    $('.lava').css({left:$('span.item:first').position()['left']});

    $('.item').mouseover(function () {
        $('.lava').stop().animate({left:$(this).position()['left']}, {duration:200});

        $('.panel').stop().animate({left:$(this).position()['left'] * (-2)}, {duration:200});
    });

}); 
```

我无法再添加一个选项卡并更改它的大小，CSS 代码中有很多宽度值让我感到困惑。当我试图改变某些东西时，一切都毁了。你能告诉我一些关于这个小提琴的快速提示，关于如何添加更多选项卡以及添加选项卡后我应该更改哪些 css 属性。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T08:56:29.513

查看您的代码，有一些无效标记（您有`UL`s - 列表容器 - 没有`LI`s - 列表项）。我创建了一个更新的 Fiddle 来更正代码（在某种程度上）并显示一个额外的内容项：

[http://jsfiddle.net/V6Vmh/6/](http://jsfiddle.net/V6Vmh/6/)

您*应该*可以添加更多，但是您需要更改五个宽度（行号参考 Fiddle 上的 CSS 面板）：

1.  “所有子元素都引用这个宽度”（第 17 行）：这是容器的宽度。
2.  'width = half size of #moving_tab'（第 47 行）：这是每个选项卡的宽度 - 应该是容器的宽度除以选项卡的数量（在这种情况下：300/3 = 100）
3.  'width = half size of #moving_tab'（第 64 行）：这应该与上面相同（它是选项卡后面的移动蓝色框
4.  'width 是 #moving_tab 的宽度乘以 2'（第 87 行）：这是包含内容项的列表的宽度。它应该是容器的宽度乘以选项卡的数量（在这种情况下，300x3 = 900）
5.  'width is the same with #moving_tab'（第 96 行）：这是每个内容元素的宽度。应该是容器的宽度，减去左右填充（本例中：300 - 10 -10 = 280）

希望这可以帮助...

# php - 如何从 2 个表中选择和更新

> ID：15107179
> 
> 赞同：-2
> 
> 时间：2013-02-27T08:19:21.547
> 
> 标签：php, mysql, sql

我正在使用 PHP 和 MySQL，我有 2 个包含字段`number`和`name`. 表 1 中的`name`字段默认为空，表 2 中有一行匹配的数字我想更新表 1 中的名称。

下面的伪代码说明了这一点：

```
select number, number 
from table1, table2 
  if number from table1 == number from table2
  then insert or update name from table1 with the value of name from table2 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T09:58:50.027

在 MySQL 你可以做

```
UPDATE table1 t1
INNER JOIN table2 t2 ON t1.number = t2.number
SET t1.name = t2.name 
```

如果您不能依赖加入更新语句，则更多的 ANSI 答案将依赖于子查询，例如：

```
UPDATE table1 t1
SET name = (SELECT name FROM table2 t2 WHERE t2.number = t1.number)
WHERE EXISTS (SELECT 1 FROM table2 t2 WHERE t2.number = t1.number) 
```

WHERE 确保您只更新存在匹配行的列。

# javascript - 在不增加 textarea 大小的情况下调整 textarea 中的字体大小

> ID：15107182
> 
> 赞同：1
> 
> 时间：2013-02-27T08:19:30.643
> 
> 标签：javascript, jquery, slider, textarea

我在搞乱一些 Jquery 来让滑块控制文本区域中字体的大小，并使用了类似的东西：

```
...  
slide: function( event, ui ) {
    $('#t_area').css("font-size", ui.value + "px");
}
.... 
```

在函数内控制滑块。我注意到即使文本区域中没有文本，当我移动滑块时它的大小仍然会增加（当其中有文本时也会变得太大。）所以我想知道是否有办法增加没有副作用的文本大小？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T08:21:16.623

CSS：

```
textarea { max-width:300px;max-height:300px; } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-27T08:21:49.353

您可以为此使用css。

```
textarea{
    width: 100px;
    height: 100px; 
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-27T08:23:09.353

在 上设置尺寸`textarea`。演示：http: [//jsfiddle.net/6qZAh/](http://jsfiddle.net/6qZAh/)

```
textarea {
    width: 100px;
    height: 50px;    
} 
```

如果没有明确的尺寸，尺寸将基于`textarea`. 即使没有明确设置这些值，用户代理也会使用默认值。

演示：http: [//jsfiddle.net/6qZAh/1/](http://jsfiddle.net/6qZAh/1/)

```
$("textarea").on("click",function(){
   var t = $(this);
   alert(t.prop("rows"));
   alert(t.prop("cols"));
}); 
```

在 Chrome 和 IE9 中，这显示了“2”和“20”。

这似乎是[规范驱动的](http://www.w3.org/TR/html5/forms.html#the-textarea-element)（强调我的）：

**行**

> 如果将解析非负整数的规则应用于属性的值会导致数字大于零，则元素的字符高度就是该值；否则**为 2。**

**科尔斯**

> 如果将解析非负整数的规则应用于属性值的结果大于零，则元素的字符宽度就是该值；否则**为 20。**

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-02-27T08:22:32.847

```
if($('#t_area').text() != ""){    
  $('#t_area').css("font-size", ui.value + "px");
} 
```

# wordpress - wordpress中每个页面的自定义标题

> ID：15107185
> 
> 赞同：0
> 
> 时间：2013-02-27T08:20:00.123
> 
> 标签：wordpress

我正在使用 Meteor Slides 插件在幻灯片中显示标题。现在我需要的是仅在主页上显示此标题并在不同页面中显示不同的标题图像。我有一个名为“WP Display header”的插件，用于为不同的页面显示不同的标题图像。但是幻灯片标题以及两个具有相同图像的自定义标题，我使用 WP Display Header 插件设置。如何解决这个问题，只在主页上显示幻灯片，在不同页面显示不同的标题？有人请帮助我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T09:36:06.577

我已经得到了答案。我已更改代码以在 functions.php 中添加流星幻灯片插件，以仅在主页中显示幻灯片。

```
<?php if ( is_front_page() ) {
if ( function_exists( 'meteor_slideshow' ) ) { 
     meteor_slideshow(); 
}
} ?> 
```

之后，我使用了一个名为[WP display header](http://wordpress.org/extend/plugins/wp-display-header/)的插件来为每个页面设置标题图像

# maven - Maven项目下无法用jar打包构建maven模块...！

> ID：15107190
> 
> 赞同：0
> 
> 时间：2013-02-27T08:20:15.120
> 
> 标签：maven

我无法使用 jar 包装构建 maven maodule。我收到错误

```
Could not calculate build plan: Failure to transfer org.apache.maven.plugins:maven-resources-plugin:pom:2.4.3 from http://repo1.maven.org/maven2 was cached in the local repository, resolution will not be reattempted until the update interval of central has elapsed or updates are forced. Original error: Could not transfer artifact org.apache.maven.plugins:maven-resources-plugin:pom:2.4.3 from/to central (http://repo1.maven.org/maven2): ConnectException 
```

我的机器被标记到公司网络，他们有代理问题吗？我尝试使用以下内容创建 settings.xml：

```
<settings xmlns="http://maven.apache.org/SETTINGS/1.0.0"
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xsi:schemaLocation="http://maven.apache.org/SETTINGS/1.0.0
                      http://maven.apache.org/xsd/settings-1.0.0.xsd">
  <localRepository>${user.home}/.m2/repository</localRepository>
  <interactiveMode>true</interactiveMode>
  <usePluginRegistry>false</usePluginRegistry>
  <offline>false</offline>
  <pluginGroups/>
  <servers/>
  <mirrors/>
  <proxies>
    <!-- proxy
     | Specification for one proxy, to be used in connecting to the network.
     |-->
    <proxy>
      <id>optional</id>
      <active>true</active>
      <protocol>http</protocol>      
      <host>proxy.tcs.com</host>
      <port>80</port>
      <nonProxyHosts>localhost|google.com</nonProxyHosts>
    </proxy>

  </proxies>
  <profiles/>
  <activeProfiles/>
</settings> 
```

我能够使用 pom 包装创建子模块，但不能使用 jar，请建议

如果我尝试更新 Maven 项目配置，控制台显示如下：

```
2/27/13 1:08:12 PM IST: Unable to update index for central|http://repo1.maven.org/maven2
2/27/13 1:08:12 PM IST: Updating index central|http://repo1.maven.org/maven2
2/27/13 1:11:37 PM IST: Refreshing settings C:\Users\346496\.m2\settings.xml
2/27/13 1:50:58 PM IST: Update started
2/27/13 1:50:59 PM IST: Update completed: 0 sec
2/27/13 1:51:04 PM IST: Update started
2/27/13 1:51:04 PM IST: Generating sources /common/pom.xml
2/27/13 1:51:04 PM IST: Build error for /common/pom.xml; org.apache.maven.plugin.PluginResolutionException: Plugin org.apache.maven.plugins:maven-resources-plugin:2.4.3 or one of its dependencies could not be resolved: Failed to read artifact descriptor for org.apache.maven.plugins:maven-resources-plugin:jar:2.4.3
2/27/13 1:51:04 PM IST: Downloaded http://repo1.maven.org/maven2/org/apache/maven/plugins/maven-compiler-plugin/2.3.2/maven-compiler-plugin-2.3.2.pom
2/27/13 1:51:04 PM IST: Failed to determine compiler source setting, assuming default
2/27/13 1:51:04 PM IST: Failed to determine compiler target setting, assuming default
2/27/13 1:51:04 PM IST: Failed to determine compiler source setting, assuming default
2/27/13 1:51:04 PM IST: Failed to determine compiler target setting, assuming default
2/27/13 1:51:04 PM IST: Failed to determine compiler test inclusions, assuming defaults
2/27/13 1:51:04 PM IST: Failed to determine compiler test exclusions, assuming defaults
2/27/13 1:51:04 PM IST: Failed to determine compiler inclusions, assuming defaults
2/27/13 1:51:04 PM IST: Failed to determine compiler exclusions, assuming defaults
2/27/13 1:51:04 PM IST: Adding source folder /common/src/main/java
2/27/13 1:51:04 PM IST: Adding resource folder /common/src/main/resources
2/27/13 1:51:04 PM IST: Adding source folder /common/src/test/java
2/27/13 1:51:04 PM IST: Adding resource folder /common/src/test/resources
2/27/13 1:51:04 PM IST: Update completed: 0 sec 
```

我已经`http://m2eclipse.sonatype.org/sites/m2e`使用 Eclipse 版本 Juno 和 Jdk 1.7 配置了 Maven 链接。我从网上尝试了所有可能的解决方案，但没有成功。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T11:52:17.207

问题出在代理设置上，因为我们在公司中使用代理网络 Maven 无法正确下载其插件，因此添加了带有代理设置的 settings.xml 文件，工作正常。

# android - 强制 Xamarin Mono Android 将运行时安装到外部存储

> ID：15107198
> 
> 赞同：2
> 
> 时间：2013-02-27T08:20:43.087
> 
> 标签：android, mono, external, sd-card, xamarin

我正在测试`Mono for Android`在较旧的 Android 设备上构建的应用程序（HTC Desire，目前使用的是 Android 2.3）。第一次，应用程序运行。它安装了 3 个软件包：

```
Shared runtime, Mono Android-16 and Mono Android-8 support. 
```

[在这里](http://docs.xamarin.com/releases/android/mono_for_android_1/mono_for_android_1.0)，他们说他们故意将其强制存储在内部存储中。但在我的设备上，共享运行时需要大约 40MB 的空间，并很快导致内存不足，因此应用程序本身根本无法安装。

有没有办法强制共享运行时安装到`SD`. 我可以手动移动它们，是的，但是 Mono 本身有设置吗？

# git - 如何仅对单个更改提出拉取请求？

> ID：15107200
> 
> 赞同：8
> 
> 时间：2013-02-27T08:20:51.277
> 
> 标签：git, github, pull-request

我对 git 或 github 几乎一无所知，我也不想要任何线索。但是我碰巧有一个针对开源项目的两行错误修复。本着合作的精神，我想回馈它。如果它不会让我付出太多的痛苦。

所以，很久以前，我对存储库进行了分叉，然后偶尔进行一些我自己的修改，然后最近才进行了这个两行错误修复。一切都已检查到主分支并推回原点。现在我想对两行错误修复提出拉取请求。似乎github没有提供任何这样的设施。

回想起来，在我进行两行错误修复之前，我可能应该创建一个完整的单独项目分支，但是 a) 这对两行代码来说太麻烦了 b) 我不知道我想贡献我写它时的错误修复。无论如何，现在为时已晚。

我可以创建一个新分支，但它仍然包含所有其他垃圾更改。所以它不会让我到任何地方。我想从上游创建一个新分支，不包括我所有的本地更改，然后只重做这个更改。但是除了制作一个全新的叉子之外，我看不到任何方法可以做到这一点，而且我不想要一个全新的叉子。

现在我最好的解决方案是放弃：代码现在对我有用，这不是我的问题。谁有更好的计划？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-27T08:34:02.360

最简单的方法是

1.  使用您当前的更改设置一个分支，然后返回上游分支（您的提交必须基于上游 repo）
2.  为拉取请求创建一个新分支
3.  拿起有 bug 修复的提交
4.  推送并创建拉取请求

这使

```
git branch my-changes
git stash #just in case you have uncommitted changes
git checkout -b bugfix upstream/master
git cherry-pick <bugfix-commit-sha>
git push --set-upstream origin bugfix 
```

`upstream`原始的分叉回购在哪里

# c++ - 输出无序映射内的结构变量

> ID：15107208
> 
> 赞同：0
> 
> 时间：2013-02-27T08:21:48.747
> 
> 标签：c++, struct, output, unordered

有谁知道如何输出一个结构变量，它在一个无序的映射中。我怎么能得到字典->例如单词

```
typedef struct dictionary{ 
std::string word; 
unsigned char hash[20]; 
std::string hex;
 } a_dictionary;

 typedef std::unordered_map<std::string, dictionary*> Mymap;

 std::unordered_map<std::string, dictionary* >::const_iterator got = c1.find(line);
                    if(out.is_open())
                    {
                        if ( got == c1.end() )
                        {
                        out << "????";
                        }
                        else
                        {
                        out << got->first << " , ";
                        }
                    }
                } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T08:24:29.843

迭代器的`second`成员是指向`a_dictionary`结构的指针，因此只需像访问普通结构指针一样访问它：

```
out << got->first << " , " << got->second->word; 
```

# css - 多个@Font-Face

> ID：15107209
> 
> 赞同：1
> 
> 时间：2013-02-27T08:21:54.773
> 
> 标签：css

我想在主css文件中的项目@font-face中加载多个@font-face。我下载了文件 woff，但它们没有加载到网页中。如何将字体用于本地文件？

```
@font-face {
  font-family: 'Ubuntu';
  font-style: normal;
  font-weight: 400;
  src: url('../Fonts/font1.woff');
  src: local('☺'), 
  url('font1.woff') format('woff');
}
@font-face {
  font-family: 'Ubuntu';
  font-style: normal;
  font-weight: 700;
  src: "../Fonts/font2.woff";
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T08:25:24.987

此解决方案是跨浏览器并适用于本地字体：

```
@font-face {
    font-family: "Exo";
    font-style: normal;
    font-weight: 400;
    src: url("/font/exo/Exo-Regular-webfont.eot?#iefix") format("embedded-opentype"),
         url("/font/exo/Exo-Regular-webfont.woff") format("woff"),
         url("/font/exo/Exo-Regular-webfont.ttf") format("truetype"),
         url("/font/exo/Exo-Regular-webfont.eot"), local("Exo-Regular"), 
         url("/font/exo/Exo-Regular-webfont.svg#ExoRegular") format("svg");
}

@font-face {
    font-family: "Exo";
    font-style: normal;
    font-weight: 700;
    src: url("/font/exo/Exo-DemiBold-webfont.eot?#iefix") format("embedded-opentype"),
    url("/font/exo/Exo-DemiBold-webfont.woff") format("woff"),
    url("/font/exo/Exo-DemiBold-webfont.ttf") format("truetype"),
    url("/font/exo/Exo-DemiBold-webfont.eot"), local("Exo-Bold"),
    url("/font/exo/Exo-DemiBold-webfont.svg#ExoDemiBold") format("svg");
} 
```

您可以添加其他字体，但请注意页面加载时间。

# c# - 在asp c#中重写URL

> ID：15107213
> 
> 赞同：0
> 
> 时间：2013-02-27T08:22:06.530
> 
> 标签：c#, asp.net

如何在 c# .net 或 asp.net 4.0 中基于注册客户端重定向 url。例如，如果客户注册为“client1”并且我们的网站是 www.mycompany.com，那么客户收益的每个页面都应该是 www.client1.mycompany.com。

更详细的例子：

例如，创建的另一个客户端是 Client2。我通常创建的页面就像

```
 "www.mycompany.com/product.aspx" 
 "www.mycompany.com/categories.aspx" should be shown as
 "www.client2.mycompany.com/product.aspx" and
 "www.client2.mycompany.com/categories.aspx" 
```

分别我在网上搜索并找到静态页面或在应用程序启动期间使用 Gloabal.asax 但在用户登录后没有找到任何东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T09:27:39.083

有几种方法可以做到这一点。ub1k 以一种方式陈述。

我认为最简单的方法是使用 global.aspx.cs （如果你没有 global.aspx 然后添加它）然后

```
protected void Application_BeginRequest(object sender, EventArgs e)
{
    var currentPath = Request.Path.ToLower(); //get the request
    var myContext = HttpContext.Current;
    if (currentPath == "/addUser" || currentPath == "/newuser") //decide what to do with the request
        myContext.RewritePath("/login.ashx?path="+ currentPath);
     else  //default value
        myContext.RewritePath("/default.aspx");
} 
```

简单，清晰且非常强大...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T08:45:41.280

如果您希望基于客户端登录进行重定向 - 这是一个内部应用程序（不能由 IIS 处理 - 就像 IIS Url Rewriter 一样），那么您可能应该创建一个`HttpModule`.

所以你应该做的是：

*   创建一个模块->实现的类`IHttpModule`
*   在这个模块中实现你的重定向逻辑
*   将其插入 web.config 部分：`<configuration><system.web><httpModules>`如：

    `<add name="MyModule" type="MyModule.Module, MyModule" />`

所有可以在以下位置找到：http: [//support.microsoft.com/kb/307996](http://support.microsoft.com/kb/307996)

请注意，您必须将您的逻辑与已完成身份验证的事件挂钩`after`。我也相信要阅读用户信息，您还应该实现您的模块`IRequiresSessionState`

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-05-16T12:08:31.350

```
 //DLL: Intelligencia.UrlRewriter.dll    

    //web.config
    <configuration>

      <configSections>
        <section name="rewriter" requirePermission="false" type="Intelligencia.UrlRewriter.Configuration.RewriterConfigurationSectionHandler, Intelligencia.UrlRewriter"/>
      </configSections>
    </configuration>

    <system.web>
        <httpModules>
          <add name="UrlRewriter" type="Intelligencia.UrlRewriter.RewriterHttpModule, Intelligencia.UrlRewriter"/>
        </httpModules>
    </system.web>

    <rewriter>
        <rewrite url="~/(.+)/CompanyHomePage" to="~/Home.aspx"/>
    </rewriter>

    //C#:

     string strTitle = Session["company_name"].ToString();
     strTitle = strTitle.Trim('-');
     strTitle = strTitle.ToLower();
     char[] chars = @"$%#@!*?;:~`+=()[]{}|\'<>,/^&"".".ToCharArray();
     strTitle = strTitle.Replace("c#", "C-Sharp");
     strTitle = strTitle.Replace("vb.net", "VB-Net");
     strTitle = strTitle.Replace("asp.net", "Asp-Net");
     strTitle = strTitle.Replace(".", "-");

    for (int i = 0; i < chars.Length; i++)
    {
        string strChar = chars.GetValue(i).ToString();
        if (strTitle.Contains(strChar))
        {
           strTitle = strTitle.Replace(strChar, string.Empty);
        }
    }
     strTitle = strTitle.Replace(" ", "-");
     strTitle = strTitle.Replace("--", "-");
     strTitle = strTitle.Replace("---", "-");
     strTitle = strTitle.Replace("----", "-");
     strTitle = strTitle.Replace("-----", "-");
     strTitle = strTitle.Replace("----", "-");
     strTitle = strTitle.Replace("---", "-");
     strTitle = strTitle.Replace("--", "-");
     strTitle = strTitle.Trim();
     strTitle = strTitle.Trim('-');

     Response.Redirect("~/" + strTitle + "/CompanyHomePage", false);//Redirect to ~/Home.aspx page

//reference: CompanyHomePage same in web.config  <rewrite url="~/(.+)/CompanyHomePage" to="~/Home.aspx"/> which company is log in to sight that company name show in url like this http://abcd//CompanyHomePage 
```

# java - Selenium 命令按钮单击不起作用 || PrimeFaces

> ID：15107215
> 
> 赞同：2
> 
> 时间：2013-02-27T08:22:21.513
> 
> 标签：java, testing, selenium, selenium-webdriver, selenium-rc

在测试 selenium 时，单击 primefaces 的命令按钮不起作用，我的示例代码是：

```
WebElement btnSaveSchedule= driver.findElement(By.id("j_idt70:btnSave"));
   btnSaveSchedule.click(); 
```

我也试过：

```
 btnSaveSchedule.sendKeys(Keys.RETURN);
        btnSaveSchedule.sendKeys(Keys.ENTER);
        btnSaveSchedule.submit(); 
```

此外，这个按钮在主要的面孔对话框上看起来很好。奇怪的是没有发生错误，但没有在服务器上调用，我也通过调试验证了..请指教

# php - PHP - 给定某个数字，获取最接近的数字？

> ID：15107218
> 
> 赞同：1
> 
> 时间：2013-02-27T08:22:29.813
> 
> 标签：php, numbers, closest

我正在修改 OpenCart 的产品过滤器之一，以按价格过滤产品。我所做的是获取属于某个类别的所有产品并提取它们的价格以将它们放在滑块中，但这根本不优雅或“专业”，我想编写一个适当的解决方案。

假设我有以下价格：125、270、517、1680 和 14790。我想做的（理想情况下）是得到最高的数字（在这个简短的例子中是 14790），然后从中得到类似“15000”的东西，所以我可以将它划分为给定因子（如 100）并将其放入滑块中。

是否有 PHP 函数可以进行这种计算？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-27T08:28:04.180

如果我理解您的问题，并且您要求四舍五入到最接近的 100，则没有特定的函数，但是通过一些数学运算，您可以像这样四舍五入到最接近的一百：

```
$price = ceil($price / 100) * 100; 
```

使用：

```
$price = ceil($price / 1000) * 1000; 
```

将四舍五入到最接近的 1000。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-27T08:28:22.937

获取最大数字，然后将其四舍五入到最接近的千位？

```
<?php

$largest = max(125, 270, 517, 1680, 14790);

$nearest = ceil($largest / 1000) * 1000; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-27T08:26:16.527

您可以遍历数字，边走边记住最高值。这是常见的编码实践。（好吧，确实还有一个 max() 函数，*echo max(1, 3, 5, 6, 7); // 7*）

然后你可以将最大的数字除以你的因数，把你得到的整数加一，然后再乘以这个因数，就可以了。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-27T08:27:51.703

就这样：x=floor(14790/100)；floor 函数返回下一个最小的整数值

# jquery - 如何更改tinymce jquery框的大小？

> ID：15107226
> 
> 赞同：2
> 
> 时间：2013-02-27T08:22:53.133
> 
> 标签：jquery, tinymce, width

我需要更改 tinymce 盒子的宽度以适合我的设计，但我不知道如何操作。上网查了一下，没有找到和jquery版本tinymce的宽度相关的东西。

```
<!-- Load jQuery build -->
<script type="text/javascript" src="{BASE_URL}/js/tiny_mce/jquery.tinymce.js"></script>
<script type="text/javascript">
        $(function() {

                $('textarea.tinymce').tinymce({
                        // Location of TinyMCE script
                        script_url : '{BASE_URL}/js/tiny_mce/tiny_mce.js',

                        // General options
                        theme : "advanced",             
                        plugins : "pagebreak,style,layer,table,save,advhr,advimage,advlink,emotions,iespell,inlinepopups,insertdatetime,preview,media,searchreplace,print,contextmenu,paste,directionality,fullscreen,noneditable,visualchars,nonbreaking,xhtmlxtras,template",

                        // Theme options
                        theme_advanced_buttons1 : "save,newdocument,|,bold,italic,underline,strikethrough,|,justifyleft,justifycenter,justifyright,justifyfull,styleselect,formatselect,fontselect,fontsizeselect",
                        theme_advanced_buttons2 : "cut,copy,paste,pastetext,pasteword,|,search,replace,|,bullist,numlist,|,outdent,indent,blockquote,|,undo,redo,|,link,unlink,anchor,image,cleanup,help,code,|,insertdate,inserttime,preview,|,forecolor,backcolor",
                        theme_advanced_buttons3 : "tablecontrols,|,hr,removeformat,visualaid,|,sub,sup,|,charmap,emotions,iespell,media,advhr,|,print,|,ltr,rtl,|,fullscreen",
                        theme_advanced_buttons4 : "insertlayer,moveforward,movebackward,absolute,|,styleprops,|,cite,abbr,acronym,del,ins,attribs,|,visualchars,nonbreaking,template,pagebreak",
                        theme_advanced_toolbar_location : "top",
                        theme_advanced_toolbar_align : "left",
                        theme_advanced_statusbar_location : "bottom",
                        theme_advanced_resizing : true,

                        // Example content CSS (should be your site CSS)
                        content_css : "css/content.css",

                        // Drop lists for link/image/media/template dialogs
                        template_external_list_url : "lists/template_list.js",
                        external_link_list_url : "lists/link_list.js",
                        external_image_list_url : "lists/image_list.js",
                        media_external_list_url : "lists/media_list.js",

                        // Replace values for the template plugin
                        template_replace_values : {
                                username : "Some User",
                                staffid : "991234"
                        }
                });
        });

</script>

<td>Description: </td><td><textarea style="height:150px;" name="description" class=" tinymce"></textarea></td> //textarea 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-27T08:25:53.893

您是否尝试过配置 tinymce 编辑器的宽度？见[http://www.tinymce.com/wiki.php/Configuration:width](http://www.tinymce.com/wiki.php/Configuration:width)

```
tinyMCE.init({
        ...
        width : "840"
}); 
```

对于 jQuery：

```
$(function() {

     $('textarea.tinymce').tinymce({
         //...
         width: "840"
     });
}); 
```

还要检查这个小提琴[http://fiddle.tinymce.com/eaaaab](http://fiddle.tinymce.com/eaaaab)

**在一行中启用太多按钮会阻止您使编辑器更窄。**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T08:25:25.470

```
tinyMCE.init({
    ...
    width : "640"
    // width: '100%',
}); 
```

检查[这里](http://www.tinymce.com/wiki.php/Configuration%3awidth)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-27T08:25:40.683

我在我的项目中使用 jQuery 插件版本。这就是你需要的：

```
$(selector).tinymce({
    theme: 'advanced', // basic or advanced
    theme_advanced_resizing : false,
    theme_advanced_resize_horizontal: false,
    theme_advanced_resizing_max_width: '500',
    theme_advanced_resizing_min_height: '300',
    width: '500',
    height: '300'
}); 
```

如果你想使用 CSS 强制宽度，试试这个：

```
.mceEditor > table {
    width: 200px !important;
} 
```

见（[TinyMCE宽高不听话！](https://stackoverflow.com/questions/6436934/tinymce-width-and-height-disobedient)）

# jquery - 如果收音机被隐藏，则不会触发 jquery 单选按钮更改事件

> ID：15107229
> 
> 赞同：1
> 
> 时间：2013-02-27T08:22:55.143
> 
> 标签：jquery, event-handling, radio-button

我在隐藏的单选按钮上使用此代码：

```
 $('input:radio[name="test"]').change(function(){
            console.log("test");
        }); 
```

不会触发更改事件。

PS：收音机是不可见的，因为我必须使用一个脚本来替换所有收音机并选择更好看的表示...

在 Firebug 中，我可以看到“已替换”的收音机没有显示，并且脚本添加或删除了 checked="checked"。

非常感谢，弗洛里安

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T08:37:01.877

从 API：

“当元素的**值**改变时，改变事件被发送到元素。”

这意味着如果您只更改`checked`属性，则不会触发更改事件。您必须更改`change`触发事件的单选按钮的值。

# java - 表模型转换行索引

> ID：15107230
> 
> 赞同：1
> 
> 时间：2013-02-27T08:23:02.447
> 
> 标签：java, swing, jtable, tablemodel

我发现了类似的主题并阅读了以下内容： [Java: Selected rows's index does not changed when sorted](https://stackoverflow.com/questions/2657947/java-selected-rowss-index-does-not-changes-when-sorted)

[当 JTable 已被用户排序时，如何跟踪行索引？](https://stackoverflow.com/questions/4151850/how-to-keep-track-of-row-index-when-jtable-has-been-sorted-by-the-user)

我使用三个相互关联的表

**KUNDE** .KUNDENNUMMER = **VORGANG** .KUNDENNUMMER **VORGANG** .ID = **VORGANG_AUGENPAAR** .VORGANG_ID

首先我在“masterTable”中选择我的客户，然后“detailTable”显示从 VORGANG 到该客户的所有行 = OK。(masterTable = list, detailTable = vorgangList) 现在我的 subTable 显示了从 VORGANG_AUGENPAAR 到这个 VORGANG = OK 的所有行

但是我有一个逻辑问题，如果我想在 subTable 中插入一个新行。对于插入，必须从表“detailTable”中获取正确的 VORGANG.ID。在我的 detailTable 中，VORGANG.ID 以正确的方式打印出来。

使用以下代码，我得到了正确的 ID：

```
 int selectedRowIndex = detailTable.getSelectedRow();
    int selectedColumnIndex = 2;
    //get the correct ID:
    int selectedObject = (int) detailTable.getModel().getValueAt(selectedRowIndex, selectedColumnIndex);
    System.out.println( selectedObject + "_correct ID Number" ); 
```

然后我得到这个结果：“700_correct ID Number”

在下一步中，我尝试将 detailTable 索引 Row 转换为正确的“vorgangList”模型。但是有一点不对：

```
 //this is wrong
    opticanuova.task.Vorgang vor  = vorgangList.get( detailTable.convertRowIndexToModel(selectedRowIndex));
    System.out.println( vor + "_wrong value" ); 
```

使用上面的代码，我得到了这个结果：“opticanuova.Vorgang[id=450]_wrong value”

我将 detailTable 索引转换为 vorgangList 索引时出错了。所以请给我你的建议。我还尝试了以下代码来测试索引号：

```
 //testing vor index value
    int test2 = (int) detailTable.convertRowIndexToView(selectedRowIndex);
    System.out.println( test2 + "IndexConverted_ToView_test2" );
    int convertedRowAtPoint = detailTable.convertRowIndexToModel(selectedRowIndex);
    System.out.println( convertedRowAtPoint + "IndexConverted_ToModel: false mapped Row" ); 
```

但我总是得到 detailTable 的索引号，而不是 vorgangList 的索引号。

* * *

更详细的例子：我试着做答案。**这是我的代码：**

```
 //this sequence get the correct ID:
    int selectedRowIndexInView = detailTable.getSelectedRow();
    int selectedRowIndexInModel = detailTable.convertRowIndexToModel(selectedRowIndexInView);    
    int idColumnIndex = 2;
    int selectedObject = (int) detailTable.getModel().getValueAt(selectedRowIndexInModel, idColumnIndex);
    //this is wrong
    opticanuova.task.Vorgang match  = vorgangList.get(detailTable.convertRowIndexToModel(selectedRowIndexInModel));
    //print out:
    System.out.println( selectedRowIndexInView  + " = selectedRowIndexInView " );
    System.out.println( selectedRowIndexInModel  + " = selectedRowIndexInModel " );
    System.out.println( selectedObject + " = selectedObject" );
    System.out.println( vorgangList + " = vorgangLIst" );
    System.out.println( match + " = match" ); 
```

这是结果：

```
1 = selectedRowIndexInView 
1 = selectedRowIndexInModel 
700 = selectedObject
[opticanuova.Vorgang[ id=400 ], opticanuova.Vorgang[ id=450 ], opticanuova.Vorgang[ id=550 ], opticanuova.Vorgang[ id=600 ], opticanuova.Vorgang[ id=650 ], opticanuova.Vorgang[ id=700 ]] = vorgangLIst
opticanuova.Vorgang[ id=450 ] = match 
```

你看，我已经有问题了。我需要具有与“匹配”变量中的“selectedObject”中存储的值相同的值（700 应该是 id=700 而不是 id=450）。所以请给我进一步的帮助。此致

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T09:09:39.000

`JTable.getSelectedRow()`返回所选行的*视图*索引。这意味着如果您对表格进行排序，然后选择表格中显示的第一行，您将获得`0`. 但是由于表格是排序的，所以这个索引不是*模型*中所选行的索引。要获取模型中的对应行，您必须调用`JTable.convertRowIndexToModel()`.

因此，获取明细表中所选对象的 ID 的正确顺序是：

```
int selectedRowIndexInView = detailTable.getSelectedRow();
int selectedRowIndexInModel = detailTable.convertRowIndexToModel();
int idColumnIndex = 2;
int selectedObject = 
    (int) detailTable.getModel().getValueAt(selectedRowIndexInModel, 
                                            idColumnIndex); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T07:53:18.070

现在我找到了解决问题的正确方法。有必要循环抛出我的 vorgangList 来比较所选值（ID），并找到正确的索引号。
`//find selected value`
`int selectedObject = (int) detailTable.getModel().getValueAt(selectedRowIndexInModel, idColumnIndex);`
`//find ID:`
`for(int i = 0; i < vorgangList.size(); i++) {`
`Vorgang vorgangs = vorgangList.get(i);`
`if (vorgangs.getId().equals(selectedObject) == true) {`
`System.out.println(vorgangs.getId() + " getId " + vorgangList.get(i));` `}`

感谢您的努力

# ckeditor - 如何删除“在此处插入段落”指针？在 CKEditor 中

> ID：15107233
> 
> 赞同：3
> 
> 时间：2013-02-27T08:23:09.040
> 
> 标签：ckeditor

当我将光标移动到 CKEditor 中的文本末尾时，会出现一个带有红线的指针，上面写着“此处插入段落”。为了更清楚，这是它的快照。

![](../Images/43e6bc20cdc69a1ccb1433f2cda04635.png)

请告诉我如何阻止它出现。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-27T08:44:05.243

这是一个魔术线插件。添加：

```
removePlugins: 'magicline' 
```

到您的配置文件/启动配置，它已经消失了。

# sql-server - 如果 SQL Server 中存在外键约束，如何删除表？

> ID：15107238
> 
> 赞同：29
> 
> 时间：2013-02-27T08:23:31.667
> 
> 标签：sql-server

我有以下内容：

```
DROP TABLE [dbo].[ExtraUserInformation];
DROP TABLE [dbo].[UserProfile];
DROP TABLE [dbo].[webpages_Membership];
DROP TABLE [dbo].[webpages_OAuthMembership];
DROP TABLE [dbo].[webpages_Roles];
DROP TABLE [dbo].[webpages_UsersInRoles];

CREATE TABLE [dbo].[ExtraUserInformation] (
    [Id]       INT            IDENTITY (1, 1) NOT NULL,
    [UserId]   INT            NOT NULL,
    [FullName] NVARCHAR (MAX) NULL,
    [Link]     NVARCHAR (MAX) NULL,
    [Verified] BIT            NULL,
    CONSTRAINT [PK_dbo.ExtraUserInformation] PRIMARY KEY CLUSTERED ([Id] ASC)
);

CREATE TABLE [dbo].[webpages_UsersInRoles] (
    [UserId] INT NOT NULL,
    [RoleId] INT NOT NULL,
    PRIMARY KEY CLUSTERED ([UserId] ASC, [RoleId] ASC),
    CONSTRAINT [fk_UserId] FOREIGN KEY ([UserId]) REFERENCES [dbo].[UserProfile] ([UserId]),
    CONSTRAINT [fk_RoleId] FOREIGN KEY ([RoleId]) REFERENCES [dbo].[webpages_Roles] ([RoleId])
); 
```

但是，这失败了，并显示一条消息：

```
Msg 3726, Level 16, State 1, Line 6
Could not drop object 'dbo.UserProfile' because it is referenced by a FOREIGN KEY constraint.
Msg 3726, Level 16, State 1, Line 9
Could not drop object 'dbo.webpages_Roles' because it is referenced by a FOREIGN KEY constraint.
Msg 2714, Level 16, State 6, Line 27
There is already an object named 'UserProfile' in the database.
Checking identity information: current identity value 'NULL', current column value 'NULL'.
DBCC execution completed. If DBCC printed error messages, contact your system administrator. 
```

在这种情况下，我怎样才能删除一张桌子？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-02-27T08:30:07.583

您必须先删除约束，然后才能删除表。否则它的规则违规可能会破坏数据库的引用完整性。

如何获得外键关系请参阅这个老问题。 [SQL DROP TABLE 外键约束](https://stackoverflow.com/questions/1776079/sql-drop-table-foreign-key-constraint)

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2014-03-18T14:33:46.890

1-首先，在删除表之后删除外键约束。

2-您可以通过执行以下查询删除所有外键：

```
DECLARE @SQL varchar(4000)=''
SELECT @SQL = 
@SQL + 'ALTER TABLE ' + s.name+'.'+t.name + ' DROP CONSTRAINT [' + RTRIM(f.name) +'];' + CHAR(13)
FROM sys.Tables t
INNER JOIN sys.foreign_keys f ON f.parent_object_id = t.object_id
INNER JOIN sys.schemas     s ON s.schema_id = f.schema_id

--EXEC (@SQL)

PRINT @SQL 
```

如果您执行打印结果@SQL，外键将被删除。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2014-04-25T19:32:35.647

删除包含外部约束的表的最佳答案是：

*   第 1 步：删除表的主键。
*   第二步：现在会提示是否删除所有的外引用。
*   第三步：删除表。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2018-07-05T05:42:59.000

```
 --Find and drop the constraints

    DECLARE @dynamicSQL VARCHAR(MAX)
    DECLARE MY_CURSOR CURSOR 

    LOCAL STATIC READ_ONLY FORWARD_ONLY 
    FOR
        SELECT dynamicSQL = 'ALTER TABLE [' +  OBJECT_SCHEMA_NAME(parent_object_id) + '].[' + OBJECT_NAME(parent_object_id) + '] DROP CONSTRAINT [' + name + ']'
        FROM sys.foreign_keys
        WHERE object_name(referenced_object_id)  in ('table1', 'table2', 'table3')
    OPEN MY_CURSOR
    FETCH NEXT FROM MY_CURSOR INTO @dynamicSQL
    WHILE @@FETCH_STATUS = 0
    BEGIN

        PRINT @dynamicSQL
        EXEC (@dynamicSQL)

        FETCH NEXT FROM MY_CURSOR INTO @dynamicSQL
    END
    CLOSE MY_CURSOR
    DEALLOCATE MY_CURSOR

    -- Drop tables
    DROP 'table1'
    DROP 'table2'
    DROP 'table3' 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2015-10-29T23:18:08.977

您必须在删除表之前删除约束。

您可以使用这些查询来查找表中的所有 FK，并在使用您的表的表中查找 FK。

```
Declare @SchemaName VarChar(200) = 'Your Schema name'
Declare @TableName VarChar(200) = 'Your Table Name'

-- Find FK in This table.
SELECT 
    ' IF  EXISTS (SELECT * FROM sys.foreign_keys WHERE object_id = 
OBJECT_ID(N''' + 
      '[' + OBJECT_SCHEMA_NAME(FK.parent_object_id) + '].[' + FK.name + ']'
+ ''') AND parent_object_id = OBJECT_ID(N''' + 
      '[' + OBJECT_SCHEMA_NAME(FK.parent_object_id) + '].[' + 
OBJECT_NAME(FK.parent_object_id) + ']' + ''')) ' +

    'ALTER TABLE ' +  OBJECT_SCHEMA_NAME(FK.parent_object_id) +
    '.[' + OBJECT_NAME(FK.parent_object_id) + 
    '] DROP CONSTRAINT ' + FK.name
    , S.name , O.name, OBJECT_NAME(FK.parent_object_id)
FROM sys.foreign_keys AS FK
INNER JOIN Sys.objects As O 
  ON (O.object_id = FK.parent_object_id )
INNER JOIN SYS.schemas AS S 
  ON (O.schema_id = S.schema_id)  
WHERE 
      O.name = @TableName
      And S.name = @SchemaName

-- Find the FKs in the tables in which this table is used
  SELECT 
    ' IF  EXISTS (SELECT * FROM sys.foreign_keys WHERE object_id =   
      OBJECT_ID(N''' + 
      '[' + OBJECT_SCHEMA_NAME(FK.parent_object_id) + '].[' + FK.name + ']'
  + ''') AND parent_object_id = OBJECT_ID(N''' + 
      '[' + OBJECT_SCHEMA_NAME(FK.parent_object_id) + '].[' + 
 OBJECT_NAME(FK.parent_object_id) + ']' + ''')) ' +

    ' ALTER TABLE ' +  OBJECT_SCHEMA_NAME(FK.parent_object_id) +
    '.[' + OBJECT_NAME(FK.parent_object_id) + 
    '] DROP CONSTRAINT ' + FK.name
    , S.name , O.name, OBJECT_NAME(FK.parent_object_id)
FROM sys.foreign_keys AS FK
INNER JOIN Sys.objects As O 
  ON (O.object_id = FK.referenced_object_id )
INNER JOIN SYS.schemas AS S 
  ON (O.schema_id = S.schema_id)  
WHERE 
      O.name = @TableName
      And S.name = @SchemaName 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2015-01-24T14:12:26.440

[BhupeshC 和 murat](https://stackoverflow.com/a/22482464/4489806)，这就是我想要的。但是 @SQL varchar(4000) 还不够大。所以，小小的改变

```
DECLARE @cmd varchar(4000)

DECLARE MY_CURSOR CURSOR 
  LOCAL STATIC READ_ONLY FORWARD_ONLY
FOR 

select 'ALTER TABLE ['+s.name+'].['+t.name+'] DROP CONSTRAINT [' + RTRIM(f.name) +'];' FROM sys.Tables t INNER JOIN sys.foreign_keys f ON f.parent_object_id = t.object_id INNER JOIN sys.schemas s ON s.schema_id = f.schema_id

OPEN MY_CURSOR
FETCH NEXT FROM MY_CURSOR INTO @cmd
WHILE @@FETCH_STATUS = 0
BEGIN
    -- EXEC (@cmd)
    PRINT @cmd
    FETCH NEXT FROM MY_CURSOR INTO @cmd
END
CLOSE MY_CURSOR
DEALLOCATE MY_CURSOR

GO 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-01-05T19:00:23.337

如果 MySQL 服务器中有外键约束，要删除表？

运行sql查询：

设置 FOREIGN_KEY_CHECKS = 0；删除表表名

希望能帮助到你！

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-11-16T17:43:41.873

重新删除约束并删除表，此脚本可以获取选定表列表的所有约束，然后删除约束，然后删除表。

```
DECLARE @id INT
DECLARE @strSQL NVARCHAR(max)
DECLARE @deleteCurser CURSOR
DECLARE @deleteTableCurser CURSOR

declare @SelectedTables table ([name] sysname, [object_id] int)
Insert into @SelectedTables ([name], [object_id])
SELECT t.name, t.object_id 
FROM sys.Tables t
where t.name in
-- Change Name of tables here
('table1','table2','table100')

SET @deleteTableCurser = CURSOR FOR
SELECT strSQL = 
'ALTER TABLE ' + s.name+'.'+t.name + ' DROP CONSTRAINT [' + RTRIM(f.name) +'];'
FROM @SelectedTables t
INNER JOIN sys.foreign_keys f ON f.parent_object_id = t.object_id
INNER JOIN sys.schemas     s ON s.schema_id = f.schema_id

OPEN @deleteTableCurser
FETCH Next 
FROM @deleteTableCurser INTO @strSQL
WHILE @@FETCH_STATUS = 0
BEGIN
    print(@strSQL)
    EXEC (@strSQL)
    FETCH NEXT
    FROM @deleteTableCurser INTO @strSQL
END

CLOSE @deleteTableCurser
DEALLOCATE @deleteTableCurser

SET @deleteCurser = CURSOR FOR
SELECT strSQL = 'DROP TABLE ['+ t.name+ '];'
FROM @SelectedTables t

OPEN @deleteCurser
FETCH Next 
FROM @deleteCurser INTO @strSQL
WHILE @@FETCH_STATUS = 0
BEGIN
    print(@strSQL)
    EXEC (@strSQL)
    FETCH NEXT
    FROM @deleteCurser INTO @strSQL
END

CLOSE @deleteCurser
DEALLOCATE @deleteCurser 
```

* * *

## 回答 #9

> 赞同：-3
> 
> 时间：2016-08-13T00:50:03.487

输入这个 ....`SET foreign_key_checks = 0;`
删除你的表然后输入`SET foreign_key_checks = 1;`

[MySQL – 暂时禁用外键检查或约束](https://gauravsohoni.wordpress.com/2009/03/09/mysql-disable-foreign-key-checks-or-constraints/)

# android - Youwave for Android 在远程桌面环境中使用瘦客户端

> ID：15107240
> 
> 赞同：27
> 
> 时间：2013-02-27T08:23:36.843
> 
> 标签：android, windows, thin-client, youwave-for-android

我在带有**Atrust Thin Client T60**系列的远程桌面环境中使用适用于**Android的****YouWave 。**当我运行**YouWave**模拟器时，出现黑屏并停在那里。

 ******主页、菜单和其他按钮（旋转按钮除外）也不起作用。当我尝试运行一个应用程序时，它说

> Android 操作系统尚未准备好。

当我第二次打开**YouWave**时，它​​说

> 另一个适用于 Android 的 YouWave 已在运行或之前的运行正在清理中。

即使我试图打开等待几分钟，这种情况也会重复。有什么补救措施吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-23T01:28:02.520

比 YouWave 或 Bluestacks 更好的选择是[GenyMotion](http://www.genymotion.com/)

它是我用过的最快的模拟器，一切正常，首先访问网站，注册一个帐户，然后下载 genymotion 应用程序。它适用于 Windows、Mac、Linux/Debian Linux。

安装后，使用注册数据登录，您将获得设备列表。这些是各种物理上可用的 Android 设备的图像，如 nexus 7、nexus s 等。下载所需的设备图像。

这些图像是植根的，有些带有间隙，您可以将模拟器链接到 android sdk 以直接在模拟器中测试您的应用程序。这个模拟器太棒了，你可以改变设备的分辨率。可以使用virtualbox添加共享文件夹，共享文件夹位于@mnt/shared/

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-15T20:35:34.140

I recommend you to use `BlueStacks`. I am using it, and it's working all right, i was also having issues with YouWave.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-27T14:45:56.417

试试这个并重新启动 YouWave

*   转到`Start`> `Run`（或按`Windows + R`）
*   将粗体文本复制并粘贴到对话框中：`%USERPROFILE%\.Virtualbox\HardDisks`
*   删除或重命名`youwave_vm01.vdi`
*   复制并重命名`youwave_vm01_golden.vdi`为`youwave_vm01.vdi`

注意：`youwave_vm01_golden.vdi`是一个干净的 Android 安装程序，请随时保留一份副本。******

# c++ - 在themida保护下的DLLmain死锁

> ID：15107241
> 
> 赞同：2
> 
> 时间：2013-02-27T08:23:39.913
> 
> 标签：c++, dll, clr, protection, mixed-mode

我必须保护我的程序，它是用 .NET 编写的。我决定使用 themida 保护器来虚拟化一个小 dll（用 C 编写），它将被加载到主程序中（通过 PInvoke）来激活它。

出于某种特定原因，我需要使用 /clr 键编译保护 dll。库不导出任何托管类型，因此可以在那里使用 themida。

但是我对受保护的 dll 有一些问题。当dll在clr支持下编译并受themida保护时，在DllMain中会死锁。在这种情况下，看起来themida 将一些托管调用放入 DllMain。有没有办法解决这个问题并防止死锁？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T05:54:04.133

根据 Oreans 的支持，“保护设计”不支持具有 clr 支持的 dll。

# android - 在 android 上读取 EM4102 RFID 标签

> ID：15107243
> 
> 赞同：2
> 
> 时间：2013-02-27T08:23:41.617
> 
> 标签：android, nfc, rfid

我正在探索使用 Nexus 4 上的 NFC 天线在工作中读取会员卡的可能性。这些卡是一个 EM4102 RFID 标签。

我在 Android Market 上找到了一个名为 NFC Reader 的小应用程序，但它对卡没有反应，但它读取另一个标签（我认为是 Mifare）非常好。

这是软件遗漏，还是天线无法读取 EM4102 标签？

我正在开发一个小型测试应用程序，看看我是否可以让它工作，但如果这里有人对此有任何经验，将不胜感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T08:35:27.940

我没有使用这些标签的经验，但[快速谷歌搜索](https://www.google.nl/search?q=EM4102)表明它们是 125kHz 技术。[NFC 仅支持 13.56MHz 技术](http://en.wikipedia.org/wiki/Near_field_communication)。

# java - 需要正则表达式帮助 - 拆线

> ID：15107248
> 
> 赞同：0
> 
> 时间：2013-02-27T08:24:13.367
> 
> 标签：java, regex

`(city = 'pune' AND country = 'india') OR (division = 'it') AND (resource = 'someresource' )`

我想根据括号将其分成几组。

第 1 组 -`(city = 'pune' AND country = 'india')`
第 2 组 -`(division = 'it')`
第 3 组 -`(resource = 'someresource' )`

有人可以提供Java中示例的正则表达式吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T08:27:26.913

**试试这个：（**演示：[http](http://regexr.com?33u8e) ://regexr.com?33u8e ）

```
(\(.+?\)) 
```

**代码示例（在 PHP 中）：**

```
<?php
     $subject = "(city = 'pune' AND country = 'india') OR (division = 'it') AND (resource = 'someresource' )";
     $pattern = '/(\(.+?\))/';
     preg_match($pattern, $subject, $matches);
     print_r($matches);
?> 
```

* * *

另一种方法：*尝试拆分（使用积极的后视）*

```
(?<=\))\s 
```

* * *

**编辑：最终答案（Java）**

```
String[] parts = str.split("(?<=\\))\\s"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T08:34:52.810

干得好：`\((.+?)\)`

```
string mystring = "(city = 'pune' AND country = 'india') OR (division = 'it') AND (resource = 'someresource' )";
Match results = Regex.Match(mystring, @"\((.+?)\)",RegexOptions.IgnoreCase);

foreach (Group g in results.Groups)
{
    string token = g.Value;
} 
```

## [现场演示](http://regexr.com?33u8h)

# django - 为用户提供单独的管理站点

> ID：15107257
> 
> 赞同：0
> 
> 时间：2013-02-27T08:25:17.657
> 
> 标签：django, django-admin

我对 Django 有点陌生，正在寻找一些关于中型项目的建议。我们的办公室管理员是一回事，但我们的用户也可以在线登录并查看类似（更有限，但大部分相同）的界面。

问题是用户的电子邮件是用户名，并且电子邮件不必是唯一的（但出于您理解的原因，密码必须是唯一的）。贫民区？是的。但这是他们所期望的。

是否可以创建第二个界面以及偏离传统的登录用户名？Django 1.5s 自定义用户模型在这里对我有什么帮助吗？是否可以使用两种用户模型——一种用于管理员，一种用于我们的用户？

最后，如果我完全走错了方向，请告诉我。这是我之前提出的问题的后续，但我忘记了一些细节。

编辑：尽管我很讨厌这样做，但我将分别对会员区进行编码。登录出现了更多的奇怪之处，所以我认为这将是最简单的解决方案，即使不是很干燥。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T08:44:26.263

1.  拥有两个管理界面可能很愚蠢。Django 的管理员支持强大的用户权限。

2.  保持用户名的唯一性，并使用电子邮件身份验证后端。这使用户可以根据需要使用他们的电子邮件地址。因为，至少在 1.4 中，电子邮件地址不必是唯一的，所以你很清楚。

3.  这是一个简单的电子邮件身份验证后端：

    ```
    from django.contrib.auth.backends import ModelBackend
    from django.contrib.admin.models import User

    class EmailAuthBackEnd(ModelBackend):
        def authenticate(self, email=None, password=None,**kwargs):
            try:
                user = User.objects.get(email=email)  
                if user.check_password(password):
                    return user
                return None
            except User.DoesNotExist:
                return None 
    ```

4.  将上述内容添加到您的一个应用程序中名为 backends.py 的文件中，然后将其添加到您的 settings.py 中：

    ```
    AUTHENTICATION_BACKENDS = AUTHENTICATION_BACKENDS + ('app.backends.EmailAuthBackEnd',) 
    ```

5.  就整个唯一密码而言……这很难处理。您可以继承 Django 的用户模型，并将密码更改为唯一字符串，或者您可以手动修补 PSQL 以强制执行该约束。或者您可能很懒惰，假设将分配密码，为每个用户分配一个随机用户名，确保您始终可以登录并“修复”有问题的帐户。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T09:02:17.763

我建议您允许用户保留他们当前的凭据（从可用性的角度来看，这将是一个很大的优势），然后根据他们的来源调整他们看到的内容。django 的 ModelAdmin 上有很多可以覆盖的方法。因此，在逐个模型的基础上，您可以这样做-

```
class MyModelAdmin(admin.ModelAdmin):
    def get_form(self, request, obj=None, **kwargs):
        self.exclude = []
        if request.META(REMOTE_ADDR) not in [# add list of internal ip's here]
            self.exclude.append('field_to_hide')
        return super(MyModelAdmin, self).get_form(request, obj, **kwargs) 
```

[就像这里](https://docs.djangoproject.com/en/1.4/ref/contrib/admin/#django.contrib.admin.ModelAdmin.get_form)的文档示例一样。（还可以在[这里查看](https://docs.djangoproject.com/en/1.4/ref/request-response/#django.http.HttpRequest.META)http 标头列表，了解如何进行检查）

如果您想更改主管理菜单上可用的对象列表，请查看覆盖[AdminSite](https://docs.djangoproject.com/en/1.4/ref/contrib/admin/#adminsite-objects)，以添加您自己的方法，该方法提供与我上面建议`get_urls()`的单个方法类似的功能。`get_form`

# android - OpenYouTubePlayerActivity 无法正常工作

> ID：15107258
> 
> 赞同：0
> 
> 时间：2013-02-27T08:25:18.250
> 
> 标签：android

我在用`OpenYouTubePlayerActivity.class`

当我把它`intent`写进我的`activity`

```
startActivity(new Intent(null, Uri.parse("ytv:NG3WygJmiVs"),   this,OpenYouTubePlayerActivity.class)); 
```

我收到以下**错误**`Class`：

```
The constructor Intent(null, Uri, new View.OnClickListener(){}, Class<OpenYouTubePlayerActivity>) is 
 undefined 
```

任何想法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T08:33:48.960

我认为你可以改变你开始活动的方式。

```
Intent intent = new Intent();
intent.setData(Uri.parse("ytv:NG3WygJmiVs"));
startActivity(context,OpenYouTubePlayerActivity.class); 
```

您在侦听器中使用“this”，因此您面临这个问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T08:29:33.060

改变这个：

```
startActivity(new Intent(null, Uri.parse("ytv:NG3WygJmiVs"),   this,OpenYouTubePlayerActivity.class)); 
```

至

```
startActivity(new Intent(null, Uri.parse("ytv:NG3WygJmiVs"),   OpenYouTubePlayerActivity.this,OpenYouTubePlayerActivity.class)); 
```

发生错误是因为，在这种情况下，`this`引用的是 的实例`OnClickListener`，但`Intent's`构造函数需要一个`Context`. 您必须传递的上下文是对活动本身的引用，因此您必须使用`OpenYouTubePlayerActivity.this`.

# jquery - 获取检查输入值到数组

> ID：15107267
> 
> 赞同：1
> 
> 时间：2013-02-27T08:25:55.507
> 
> 标签：jquery

我如何才能将所有检查的输入值放入数组？

我可以获取所有检查的输入，但无法获取值。

**jQuery：**

```
$("[id^='generate_']").click(function() {

    val=$(this).closest('tr').find("#cnt").text();  

    var obj = $("#testSlide_"+val).find(':checkbox');
    var childCount = obj.size();
    var checkedCount =  obj.filter(':checked').length;  

        var checkValues = [];
        $(childCount).each(function() {
             alert($(this).val());
        checkValues.push($(this)val());
});

}); 
```

我想使用 ajax 并发送到服务器端并使用 foreach 。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T08:28:10.127

您可以使用[`.map()`](http://api.jquery.com/map/)返回一个包含函数返回值的新 jQuery 对象：

```
var values = $("#testSlide_"+val).find(':checkbox:checked').map(function () {
    return this.value;
}).get(); 
```

调用[`.get()`](http://api.jquery.com/get/)将 jQuery 对象转换为本机数组。

# gcc - 在 64 位 CentOS 上为 ARM 构建 32 位二进制文 件

> ID：15107270
> 
> 赞同：0
> 
> 时间：2013-02-27T08:26:05.410
> 
> 标签：gcc, arm

似乎 gcc 不接受 ARM 目标的 -m32 选项。我不确定 gcc 在 64 位 Linux 上的行为如何，但如果 gcc 是在 64 位 Linux 上运行的 ELF32，它会自动生成 32 位二进制文​​件吗？

如果是这样，是否有任何解决方法？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T08:32:43.783

您需要使用交叉编译器从运行 x86 或 x86_64 的主机编译 ARM，原因是您的主机和目标是 2 个完全独立的架构。

交叉编译器通常配置为仅输出 32 位或 64 位 ARM 二进制文件（不是两者）。大多数 ARM 设备应用程序仅使用 32 位，因此使用不带任何额外参数的 arm 交叉编译器将构建 32 位二进制文​​件。

工具链还有其他 -m 标志来指定机器类型，例如 armv7、arm cortex a-8 等，以便进一步优化。您需要查看 ARM 交叉编译器的文档。

至于获得适用于您的目标并在 CentOS 下运行的正确工具链，最好从目标设备供应商的网站开始。

x86_64 版本的 gcc 提供的 -m32 选项使 gcc 编译 32 位二进制文​​件而不是 64 位，因为 x86 指令集和 x86_64（AMD64 或 Intel EMT64）非常相似。特别是它可以很容易地在 64 位模式下执行 32 位指令。

# ios - iOS：NSImageView 上的 NSURLConnection sendAsynchronousRequest 延迟操作

> ID：15107271
> 
> 赞同：1
> 
> 时间：2013-02-27T08:26:06.007
> 
> 标签：ios, http, asynchronous, nsurlconnection

我正在发送一个异步 http GET 请求，并且正在正确调用 completionHandler。像 NSLog 这样的回调中的代码会运行，因为我可以在日志中看到输出。但是，以下行： self.imageView.image = nil; 似乎直到 NSLog 语句“到达这里”几秒钟后才生效。有谁知道发生了什么？示例代码如下：

在 ViewController.m 中：

```
@interface ViewController ()
@property (weak, nonatomic) IBOutlet UIImageView *imageView;
@end

@implementation ViewController
@synthesize imageView = _imageView;

-void viewDidLoad {
    // ImageView
    UIImage *image = [UIImage imageNamed:@"test.jpg"];
    self.imageView.backgroundColor = [UIColor blackColor];
    self.imageView.clipsToBounds = YES;
    self.imageView.image = image;
}

-void test {

    NSMutableURLRequest *request = [NSMutableURLRequest requestWithURL:[NSURL URLWithString:@"http://someurl"] cachePolicy:NSURLRequestReloadIgnoringLocalAndRemoteCacheData timeoutInterval:10];
    [request setHTTPMethod:@"GET"];
    NSOperationQueue *queue = [[NSOperationQueue alloc] init];
    [NSURLConnection sendAsynchronousRequest:request queue:queue
completionHandler:^(NSURLResponse *response, NSData *data, NSError *error) {
        self.imageView.image = nil;
        NSLog(@"got here");
    }];
} 
```

@结尾

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-27T08:40:59.303

啊，看起来像将队列参数设置为 [NSOperationQueue mainQueue] 固定，因为它在这里：

[NSURLConnection sendAsynchronousRequest：queue：completionHandler：连续发出多个请求？](https://stackoverflow.com/questions/9409211/nsurlconnection-sendasynchronousrequestqueuecompletionhandler-making-multiple)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-27T08:41:58.837

正如 Undept 建议的那样，在主线程上调用这些行。像这样：

```
dispatch_async (dispatch_get_main_queue (),  ^{
self.imageView2.image = nil;
self.imageView.image = nil;
}); 
```

# html - Firefox/IE10 - HTML5 应用程序缓存和 Cookie

> ID：15107272
> 
> 赞同：0
> 
> 时间：2013-02-27T08:26:07.213
> 
> 标签：html, internet-explorer, firefox, cookies, application-cache

我在 Firefox 和 IE10 上遇到 HTML5 appCache 问题。

我已经构建了一个最小的测试用例： [https ://docs.google.com/file/d/0B7CVmRJOMgTNZUxkLWRDNmhtVU0/edit?usp=sharing](https://docs.google.com/file/d/0B7CVmRJOMgTNZUxkLWRDNmhtVU0/edit?usp=sharing)

访问“applicationCache/test.html”页面，浏览器将寻找正确的清单，并开始从其列表中的文件下载所有内容。

当我在列表中放入一个处理 COOKIES 的 .php 文件时，就会出现问题；例如，我添加了一个 .php 文件，它将调用 php 函数“session_start()”。Chrome 和 Safari 可以在应用程序缓存下载期间正确处理此类文件。Firefox 和 IE10 具有相同的行为：它们停止并发出一般错误信号。

经过长时间的搜索，我在 bugzilla 上找到了这张票：[https ://bugzilla.mozilla.org/show_bug.cgi?id=722683](https://bugzilla.mozilla.org/show_bug.cgi?id=722683)

有没有人可以提示我在 applicationCache 下载事件期间正确处理 COOKIES 而不会出错？我是在做错事还是违反标准？

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T08:35:50.483

我不确定，但你能用 localStorage 代替 cookie 吗？

# c++ - 更改控制台输出中的字体大小（IDE：MS Visual C++ 2010 Express）

> ID：15107273
> 
> 赞同：0
> 
> 时间：2013-02-27T08:26:07.433
> 
> 标签：c++, fonts, size

**总结**：

我对所有控制台功能的使用感到非常困惑。尤其是与

```
SetConsoleTextAttribute
SetConsoleCursorPosition
GetCusrsorPos
ScreenToClient
ClientToScreen 
```

我将为其中的每一个发布不同的问题。因为我无法在 SO 或 Google 上获得任何类型的“如何实施”信息。

**问题**

如何更改控制台输出的字体大小？（具体增加它，然后在输出上打印一些文本后恢复正常）

**我试过的**

查看了 MSDN 上有关控制台功能的帮助材料，但它们仅提供参数和有关每个参数的一些信息。找不到任何实施它的程序。

**我需要什么帮助**

请给我代码以将字体大小从现在（比如“a”）更改为我想要的（比如“b”），然后在屏幕上打印一些内容，然后将其改回“a”。

**眼镜**

Windows XP SP 3 IDE：Microsoft Visual C++ 2010 Express

# android - 为什么Android ScrollView 在其子项的高度小于屏幕时调用onScrollChanged()？

> ID：15107283
> 
> 赞同：3
> 
> 时间：2013-02-27T08:26:39.043
> 
> 标签：android, android-layout, android-ui, android-scrollview

我有`ScrollView`一个`RelativeLayout`作为唯一的孩子。最近我注意到该方法：

```
@Override
protected void onScrollChanged(int l, int t, int oldl, int oldt) {} 
```

即使孩子的身高小于`ScrollView`身高，也会被调用，如下所示： ![](../Images/1155fa87ba25086200835a24b3498d68.png)

this 指的是 my`ScrollView`而 rl 指的是`RelativeLayout`.

这是正常行为还是我错过了什么？

**编辑：** 我不断地添加和删除视图，`RelativeLayout`因此每次禁用滚动/触摸等似乎都不是一个好的解决方案。

我目前的解决方法是检查滚动是否真的改变了任何东西，如果没有，我只是忽略它：

```
 // in case no actual scroll has occurred - just return.
    if (t == oldt && l == oldl) {
        return;
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-27T08:38:43.390

这是正常行为

如果你想停止 ScrollView 滚动，那么你必须试试这个

```
scroll.setEnabled(false); 
scroll.setFocusable(false); 
scroll.setHorizontalScrollBarEnabled(false); 
scroll.setVerticalScrollBarEnabled(false); 
```

希望这会奏效

# android - 带到android中布局的前面部分

> ID：15107288
> 
> 赞同：1
> 
> 时间：2013-02-27T08:26:53.187
> 
> 标签：android

我的部分布局有问题。我正在以编程方式添加按钮，因为我想做一些类似面包屑的事情。我的解决方案效果很好。如果我在第一个活动中，我会显示一个按钮。如果我转到第二个，我会显示两个按钮。这是代码：

```
public class TabsGenerator extends LinearLayout{

    public TabsGenerator(Context context) {
        super(context);
    }

    public View addNewLinearLayout(Context context, ArrayList<String> descriptions) {
        final HorizontalScrollView horizontalView = new HorizontalScrollView(context);
        LinearLayout linearLayout = new LinearLayout(context);
        LinearLayout.LayoutParams params = new LinearLayout.LayoutParams(LayoutParams.MATCH_PARENT, LayoutParams.MATCH_PARENT);
        params.height = 60;
        linearLayout.setLayoutParams(params);
        horizontalView.setLayoutParams(params);
        postDelayed(new Runnable() {
            public void run() {
                horizontalView.fullScroll(HorizontalScrollView.FOCUS_RIGHT);
            }
        }, 100L);
        linearLayout.setGravity(Gravity.TOP);
        List<View> components = getButtons(context, descriptions);
        for(View component : components) {
           linearLayout.addView(component);
        }
        horizontalView.addView(linearLayout);

        return horizontalView;
    }
    public List<View> getButtons(Context context, ArrayList<String> descriptions) {
        List<View> buttons = new ArrayList<View>();
        for(int i = 0; i < descriptions.size(); i++) {
           buttons.add(createButton(context,i, descriptions));
        }
        return buttons;
    }

    public View createButton(final Context context, final int i, final ArrayList<String> descriptions){

         LinearLayout.LayoutParams params = new LinearLayout.LayoutParams(LayoutParams.MATCH_PARENT, LayoutParams.MATCH_PARENT);
            params.leftMargin = -20;
        final Button button = new Button(context);
        button.setText(SecondActivity.descriptions.get(i));
        button.setBackgroundDrawable(getResources().getDrawable(R.drawable.paseknawigacji));
        button.setHorizontallyScrolling(true);
        button.setEllipsize(TruncateAt.END);
        button.setSingleLine();
        button.setWidth(20);
        if(i==1)
            button.bringToFront();
        button.setLayoutParams(params);
        button.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {
                ActivityManager am = (ActivityManager) context.
                        getSystemService(Activity.ACTIVITY_SERVICE);
                String packageName = am.getRunningTasks(1).get(0).topActivity.getPackageName();
                String className = am.getRunningTasks(1).get(0).topActivity.getClassName();
                final String StringClassname = packageName+"."+descriptions.get(i);
                Class<?> c = null;
                if(StringClassname != null) {
                    try {
                        c = Class.forName(StringClassname );
                    } catch (ClassNotFoundException e) {
                        // TODO Auto-generated catch block
                        e.printStackTrace();
                    }
                }

                Intent intent = new Intent();
                intent.setClassName(context,StringClassname);
                intent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
                intent.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
                if(!(StringClassname.contains(className))){
                    for(int j = 0; j<descriptions.size()-1;j++)
                        if(i<descriptions.size()-1)
                            descriptions.remove(i+1);

                    context.startActivity(intent);

                }
            }
        });
        return button;
    }
} 
```

我有一个问题，因为按钮已添加到布局中，但每个按钮都以三角形结尾。当我添加第二个按钮时，他覆盖了这个形状。它的外观是这样的： ![在此处输入图像描述](../Images/a352a5d7cdb8344f21fe05074826eae9.png) 我想把每个按钮都放在前端。我怎么能这样做？

编辑：也许是在android中创建面包屑的其他方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T16:46:56.167

我认为您的布局不适用于线性布局，因为我注意到在线性布局中使用前置时，您会自动将其设置在总端（例如，它不再是按钮 1 按钮 2 按钮 3 而是按钮 1 按钮 3 按钮 2 ）。您将需要使用相对布局或类似的东西。这可能会为您的代码添加一些逻辑，但否则应该没问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T08:29:44.737

尝试以相反的顺序添加按钮

你的代码

```
 List<View> components = getButtons(context, descriptions);
    for(View component : components) {
       linearLayout.addView(component);
    } 
```

现在以相反的顺序

```
 List<View> components = getButtons(context, descriptions);
    for(int i = components.size() - 1; i >= 0; i --) {
       View component = components.get (i);
       linearLayout.addView(component);
    } 
```

（代码未编译，可能有错误）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-27T08:31:14.843

尝试这个

```
thirdButton.bringtoFront();
SecondButton.bringToFront(); 
```

您将看到第三个和第二个按钮的三角形形状。

希望这会奏效

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-08-24T22:09:40.893

也许您可以尝试在按钮中设置高度但我认为 leftMargin= -20 是您看不到结尾三角形的原因

# java - 如何检索 JFormattedTextField 整数值？

> ID：15107295
> 
> 赞同：0
> 
> 时间：2013-02-27T08:27:30.947
> 
> 标签：java

问题是 JFormattedTextField 会自动将 Integer 更改为格式化的 Integer（例如：5000000 到 5,000,000）。使用 JTextField，我可以使用 parseInt() 将 5000000 转换为 Integer。但是，当它的值为 5,000,000 时，我如何使用 JFormattedTextField 做到这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T08:46:11.063

使用 java.text 中的 Format 类之一：

```
String num = "5,000";
DecimalFormat format = new DecimalFormat("#,##0.###");
try {
    System.out.println(format.parse(num).toString()); // prints 5000
} catch (ParseException ex) {
    ...
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T08:48:49.180

我正在观看 JFormattedTextField 的 Java API，我注意到它有一个 setFormattedFactory(...) 方法，我认为您可以使用此方法来更改检索值的格式。

尝试按照这个问题的答案来使用该方法：[如何在运行时更改 JFormattedTextField 的格式？](https://stackoverflow.com/questions/5204705/how-to-change-the-format-of-a-jformattedtextfield-at-runtime)

相反，这里解释了如何用逗号解析大数字：[Convert a String to Double - Java](https://stackoverflow.com/questions/1097332/convert-a-string-to-number-java)

我希望它对你有用！再见

# android - android中的光学字符识别

> ID：15107296
> 
> 赞同：0
> 
> 时间：2013-02-27T08:27:42.277
> 
> 标签：android, ocr

如何在我的 android 应用程序中集成 OCR。我已经在 Windows 中使用过。

请为我提供一些指导。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-27T08:31:46.037

看看 Github 上的[tess-two](https://github.com/rmtheis/tess-two)库，它是 android tesseract 工具的一个分支，非常易于使用

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T09:27:57.903

看看下面的链接，它提供了用于 OCR 的 API 开源和演示。我希望它会帮助你。它非常易于使用并集成到您的应用程序中。检查文档以获取详细信息。

1)[链接 1](http://ocrapiservice.com/documentation/)
2)[演示链接](https://github.com/smart-mobile-software/ocrapiservice)

# json - ListBox 中的按钮从 JSON 发送参数

> ID：15107298
> 
> 赞同：0
> 
> 时间：2013-02-27T08:27:49.097
> 
> 标签：json, silverlight, windows-phone-7, xaml, webclient

在我正在创建的 Windows Phone 7.5 应用程序中，我遇到了将导航服务绑定到按钮的问题。该按钮位于 XAML 中的 ListBox 数据模板中，该模板是从 JSON 反序列化器的代码隐藏中填充的：

```
 void webClient_DownloadStringCompleted(object sender, DownloadStringCompletedEventArgs e)
    {
        if (e.Error != null)
        {
            return;
        }
        List<JSON> newslistJson = JsonConvert.DeserializeObject<List<JSON>>(e.Result);

        this.NewsList.ItemsSource = newslistJson;
    } 
```

NewsList 列表框在这里通过上面的代码和一个包含“getters”和“setters”的类文件来填充。但是，在 ListBox 和它的 DataTemplate 中，如前所述，有一个按钮：

```
 <Button x:Name="toNewsSite" Grid.Row="1" Content="Read More»" Height="auto" Width="auto" FontSize="19" Foreground="#FFFFFF"/> 
```

这个按钮应该通过第一个代码片段导航到每个项目的 news_id，这是处理公共 getter 和 setter 的类文件中的一个字符串。

所以我在这里的梦想场景是，在代码隐藏中，webClient_DownloadString...() 中的内容是这样的：

```
toNewsSite.NavigateService = ("TheNewPage.xaml/news?id={0}", JSON.news_id); 
```

Aaand 从那里，列表框中的每个新闻项将有一个单独的按钮，该按钮带有一个参数，说明它具有哪个 news_id，这将在“TheNewPage”页面上获取。

这真的有用吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-27T09:03:15.927

首先，Button 控件没有任何 NavigationService。为了导航到新页面，您需要调用 NavigationService.Navigate() 方法

所以，我要做的是将id绑定到按钮的标签

```
<Button x:Name="toNewsSite" Grid.Row="1" Click="OnButtonClick" Tag="{Binding news_id}" Content="Read More»" Height="auto" Width="auto" FontSize="19" Foreground="#FFFFFF"/> 

private void OnButtonClick(object sender, RoutedEventArgs e)
        {
           Button bt = (Button)sender;
           NavigationService.Navigate(new Uri("TheNewPage.xaml/news?id=" + bt.Tag.ToString(), UriKind.Relative));
        } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T09:39:29.523

在按钮的单击处理程序中，获取按钮的 DataContext，您将能够访问

```
private void OnButtonClick(object sender, RoutedEventArgs e)
{
   JSON item = (sender as FrameworkElement).DataContext;
   NavigationService.Navigate(new Uri("TheNewPage.xaml/news?id=" + item.news_id, UriKind.Relative));
} 
```

作为进一步的改进，我不会在 ItemTemplate 中添加按钮，而是处理您放在 DataTemplate 根目录中的任何内容的点击事件（我猜是 Grid 或 StackPanel）。

# highcharts - highcharts 线未完全绘制

> ID：15107302
> 
> 赞同：2
> 
> 时间：2013-02-27T08:28:02.473
> 
> 标签：highcharts

我有一个柱形图与图表上的线条图相结合。当将图表容器的宽度减小到小于 357px 的值时，水平线仅绘制到一半而不是全宽。

```
chart = new Highcharts.Chart({
            chart: {
                renderTo: 'chartcontainer',
                defaultSeriesType: 'column',
                borderRadius:0,
                marginRight: 22,
                marginBottom: 140
            },
            title: {
                text: 'test norm',
                align: 'left'
            },
            xAxis: [{
                title: {
                    text: 'x',
                    style: {

                    }
                },
                categories: ['2008','2009','2010','2011','2012'],
                labels: {
                    style: {
                    }
                }
            },
            { //secondary xAxis for range and norm values
              gridLineWidth: 0, 
              labels:{
                  enabled:false
              },
              lineWidth:0,
              tickWidth:0,
              opposite: true,
              minPadding:0,
              maxPadding:0
            }
            ],
            yAxis: {
                title: {
                    text: 'y',
                    style: {
                    }
                },
                labels: {
                    style: {
                    }
                }
            },
            legend: {
                layout: 'vertical',
                align: 'left',
                verticalAlign: 'bottom',
                width:700,
                borderRadius: 0,
                shadow:false,
                floating:true,          
                borderWidth: 0                                  
            },
            navigation: {
                buttonOptions: {
                    enabled: false
                }
            },
            tooltip: {
                borderRadius: 0,
                borderWidth: 1,
                backgroundColor: '#FFFFFF',
                shadow: false,
                style: {
                    font: 'bold 11px Arial, Verdana, sans-serif',
                    fontWeight: 'bold'
                },                          
                formatter: function() {
                        return '<b>'+ this.x +'</b><br/>'+ this.series.name +': '+ this.y +'<br/>';
                }
            },
            plotOptions: {
                column: {
                    dataLabels: {
                         enabled: false
                    },
                    shadow: false
                }
            },
            series: [{ name: 'A', shadow: false, data: [8,2,8,4,6] },{ name: 'B', shadow: false, data: [1,4,2,3,4] },{ name: 'C', shadow: false, data: [4,16,8,12,16] },{ name: 'E', shadow: false, data: [8,4,6,8,2] },{
type:'line',
name:'Norm',

data:[
    { 
        y:10.000000,            
        x:0.000000,
        dataLabels: {
            enabled: false,
            align: 'left',
            formatter:function(){return 'Norm: ' + this.y;},
            style: {fontWeight:'bold'}
        },

    },
    {
        y:10.000000,
        x:1.000000,
        dataLabels: {
            enabled: true,
            align: 'right',
            formatter:function(){return 'Norm: ' + this.y;},
            style: {fontWeight:'bold'}
        },
    }
],
color: '#01A1EB',
lineWidth:1,
dashStyle:'Solid',
shadow: {
    opacity:0.1
},
enableMouseTracking:false,
marker:{enabled:false},
xAxis:1,
showInLegend: true 
```

}] });

在此处查看我的 jsfiddle 示例：完全绘制的线：

[http://jsfiddle.net/ramon_ackermann/WwSbT/7/](http://jsfiddle.net/ramon_ackermann/WwSbT/7/)

这条线只有一半：http: [//jsfiddle.net/ramon_ackermann/WwSbT/8/](http://jsfiddle.net/ramon_ackermann/WwSbT/8/)

有什么想法可能导致这种情况吗？

干杯。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T09:13:40.177

在 y 轴上使用 Plotline：http: [//jsfiddle.net/paranoir/WwSbT/9/](http://jsfiddle.net/paranoir/WwSbT/9/)

```
plotLines: [{
    color: '#FF0000',
    width: 1,
    value: 10
}] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T14:20:27.600

Plotline 也是我的首选。

但是，如果出于某种原因需要将其作为系列，则可以这样做：

1）将线的最小 x 值设置为 -0.5，最大 x 值设置为 4.5 2）将 xAxis 最小值设置为 0，最大值设置为 4 3）忘记辅助 x 轴

[http://jsfiddle.net/jlbriggs/WwSbT/10/](http://jsfiddle.net/jlbriggs/WwSbT/10/)

```
for the x axis:
xAxis: [{
  min:0,
  max:4,
}]

and then in the data:
...
  y:10.000000,            
  x:-0.5,
...
  y:10.000000,
  x:4.5, 
```

第二个 x 轴似乎是问题的一部分。如果您隐藏标准系列，然后重新显示它，它会正确填充绘图区域。

# php - 我们可以在 jquery-ajax 的 url 部分使用 if 块吗？

> ID：15107308
> 
> 赞同：0
> 
> 时间：2013-02-27T08:28:19.870
> 
> 标签：php, jquery

```
function follow_or_unfollow(following,follower,action)
{
var dataString = "following=" + following + "&follower=" + follower;
$.ajax({  
    type: "POST",  
    url: "network.callaction.php",  
    data: dataString,
    cache: false,
    beforeSend: function() 
    {
        if ( action == "following" )
        {
            $("#following").hide();
            $("#loading").html();
        }
        else if ( action == "follow" )
        {
            $("#follow").hide();
            $("#loading").html();
        }
        else { }
    },  
    success: function(response)
    {
        if ( action == "following" )
        {
            $("#loading").html('');
            $("#follow").show();

        }
        else if ( action == "follow" )
        {
            $("#loading").html('');
            $("#following").show();
        }
        else { }
    }
}); 
} 
```

在这种情况下，如果 action 是 FOLLOW，那么应该调用不同的 url，如果 action 是 UNFOLLOW，那么应该调用不同的 url。

那么我们可以在 URL 部分使用 if 条件吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T08:32:21.853

很简单：

```
function follow_or_unfollow(following,follower,action)
{

    var actionUrl = 'follow.callaction.php';
    if(action == 'unfollow'){
        actionUrl = 'unfollow.callaction.php';
    }

    var dataString = "following=" + following + "&follower=" + follower;

    $.ajax({  
        type: "POST",  
        url: actionUrl,  
        data: dataString,
        cache: false,
        beforeSend: function() 
        {
            if ( action == "following" )
            {
                $("#following").hide();
                $("#loading").html();
            }
            else if ( action == "follow" )
            {
                $("#follow").hide();
                $("#loading").html();
            }
            else { }
        },  
        success: function(response)
        {
            if ( action == "following" )
            {
                $("#loading").html('');
                $("#follow").show();

            }
            else if ( action == "follow" )
            {
                $("#loading").html('');
                $("#following").show();
            }
            else { }
        }
    }); 
} 
```

你也可以这样做：

```
var actionUrl = action + '.callaction.php'; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T08:32:43.583

最好将条件从 AJAX 中取出并像这样分配变量。

```
if(condition) {
     var pageURL = "example.php";
} else {
     var pageURL = "example1.php";
}

$.ajax({  
    type: "POST",  
    url: pageURL, 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-27T08:31:45.903

外部ajax调用：

```
if(yourconditin){
   url = "url1.php";
}
else{
   url = "url2.php";
} 
```

在 ajax 中给它这样的：

```
url: url, 
```

# eclipse - 导出/导入 Eclipse cdt make 目标

> ID：15107309
> 
> 赞同：2
> 
> 时间：2013-02-27T08:28:20.953
> 
> 标签：eclipse, eclipse-cdt

我在我的 Eclipse cdt 项目中严重依赖 make 目标，并且定义了 50 多个 make 目标。

是否有可能将它们导出并导入另一个项目？

我在 Eclipse 中找不到任何 GUI 方法来执行此操作，但也许我只是在查看显而易见的内容，或者可能有一种方法可以通过直接编辑配置文件来完成此操作？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-12T18:46:02.763

查看工作区顶部的 .cproject 文件，您应该在文件中看到类似的内容。尝试将这些块剪切并粘贴到您的其他项目中。

```
<storageModule moduleId="org.eclipse.cdt.make.core.buildtargets">
    <buildTargets>
        <target name="all" path="directory1/directory2/directory3" targetID="org.eclipse.cdt.build.MakeTargetBuilder">
            <buildCommand>make</buildCommand>
            <buildArguments/>
            <buildTarget>all</buildTarget>
            <stopOnError>true</stopOnError>
            <useDefaultCommand>false</useDefaultCommand>
            <runAllBuilders>true</runAllBuilders>
        </target> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-20T07:57:14.943

您可以直接复制“Make targets”（CTL+C）并粘贴（CTL+V）在 Make target 视图中的好存储库下

# java - 如何确定字符串是英文还是阿拉伯文？

> ID：15107313
> 
> 赞同：31
> 
> 时间：2013-02-27T08:28:26.817
> 
> 标签：java

有没有办法确定一个字符串是英语还是阿拉伯语？

* * *

## 回答 #1

> 赞同：50
> 
> 时间：2013-02-27T08:50:33.193

这是我刚刚尝试过的一个简单逻辑：

```
 public static boolean isProbablyArabic(String s) {
    for (int i = 0; i < s.length();) {
        int c = s.codePointAt(i);
        if (c >= 0x0600 && c <= 0x06E0)
            return true;
        i += Character.charCount(c);            
    }
    return false;
  } 
```

当且仅当在文本中找到阿拉伯 unicode 代码点时，它将文本声明为阿拉伯文。您可以增强此逻辑以更适合您的需求。

范围 0600 - 06E0 是阿拉伯字符和符号的代码点范围（参见[Unicode 表](http://www.tamasoft.co.jp/en/general-info/unicode.html)）

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2016-10-03T09:55:59.380

Java 本身支持通过 unicode 进行的各种语言检查，也支持阿拉伯语。更简单和最小的方法是通过 UnicodeBlock

```
public static boolean textContainsArabic(String text) {
    for (char charac : text.toCharArray()) {
        if (Character.UnicodeBlock.of(charac) == Character.UnicodeBlock.ARABIC) {
            return true;
        }
    }
    return false;
} 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2015-03-04T12:51:08.947

覆盖所有阿拉伯字符和符号范围的小改动

```
private boolean isArabic(String text){
        String textWithoutSpace = text.trim().replaceAll(" ",""); //to ignore whitepace
        for (int i = 0; i < textWithoutSpace.length();) {
            int c = textWithoutSpace.codePointAt(i);
          //range of arabic chars/symbols is from 0x0600 to 0x06ff
            //the arabic letter 'لا' is special case having the range from 0xFE70 to 0xFEFF
            if (c >= 0x0600 && c <=0x06FF || (c >= 0xFE70 && c<=0xFEFF)) 
                i += Character.charCount(c);   
            else                
                return false;

        } 
        return true;
      } 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-02-27T08:30:48.557

您通常可以通过字符串本身的代码点来判断。阿拉伯语占据了 Unicode 代码空间中的[某些块](http://en.wikipedia.org/wiki/Arabic_script_in_Unicode)。

可以肯定的是，如果这些块中存在相当大比例的字符（例如`بلدي الحوامات مليء الثعابينة`），则它是阿拉伯文本。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2020-03-09T20:07:39.150

[这个答案](https://stackoverflow.com/a/15107721/3760297)有些正确。但是当我们结合波斯语和英文字母时，它返回**TRUE** !，这是不正确的。在这里我修改了相同的方法，使其运行良好

```
 public static boolean isProbablyArabic(String s) {
    for (int i = 0; i < s.length();) {
        int c = s.codePointAt(i);
        if (!(c >= 0x0600 && c <= 0x06E0))
            return false;
        i += Character.charCount(c);
    }
    return true;
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-27T08:30:31.893

您可以使用*基于 N-gram 的文本分类*（该短语用 google），但这不是一种防故​​障技术，它可能需要一个不太短的字符串。

您可能还认为只有 ASCII 字母的字符串不是阿拉伯语。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-12-05T18:32:23.910

英文字符往往在这 4 个 Unicode 块中：

*   BASIC_LATIN
*   LATIN_1_SUPPLEMENT
*   LATIN_EXTENDED_A
*   GENERAL_PUNCTUATION

    ```
    public static boolean isEnglish(String text) {

     boolean onlyEnglish = false;

     for (char character : text.toCharArray()) {

        if (Character.UnicodeBlock.of(character) == Character.UnicodeBlock.BASIC_LATIN
                || Character.UnicodeBlock.of(character) == Character.UnicodeBlock.LATIN_1_SUPPLEMENT
                || Character.UnicodeBlock.of(character) == Character.UnicodeBlock.LATIN_EXTENDED_A
                || Character.UnicodeBlock.of(character) == Character.UnicodeBlock.GENERAL_PUNCTUATION) {

            onlyEnglish = true;
        } else {

            onlyEnglish = false;
        }
     }

      return onlyEnglish;
    } 
    ```

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2014-09-24T12:33:07.347

尝试这个 ：

```
internal static bool ContainsArabicLetters(string text)

{

foreach (char character in text.ToCharArray())
{
    if (character >= 0x600 && character <= 0x6ff)
        return true;
    if (character >= 0x750 && character <= 0x77f)
        return true;
    if (character >= 0xfb50 && character <= 0xfc3f)
        return true;
    if (character >= 0xfe70 && character <= 0xfefc)
        return true;
}
return false;
} 
```

# android - Android bulkInsert 进度值？

> ID：15107314
> 
> 赞同：0
> 
> 时间：2013-02-27T08:28:32.577
> 
> 标签：android, progressdialog, bulkinsert, progress, android-contentresolver

我正在使用 Content Resolver 的**bulkInsert**方法来加速**AsyncTask**中的插入，它工作得很好，但我想在**publishProgress中更新****ProgressDialog 的**值。

 **这可能在**bulkinsert**中吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T08:31:32.043

对的，这是可能的。

1.  获取插入内容的长度。
2.  将值设置为 ProgessDialog。
3.  将进度值保持为全局变量。

做进度更新方法`onPreExecuteMethod()`；**

# delphi - 像 TRadioGroup 这样的 TPanel 中的标题？

> ID：15107316
> 
> 赞同：0
> 
> 时间：2013-02-27T08:28:52.170
> 
> 标签：delphi, c++builder

如何将 TPanel 的标题放在顶行，如 TRAdioGroup 的标题？

在一个表单中，我想创建几组控件。每个组都在一个矩形内，我需要将标题放在矩形的左上角，越过线条。可能吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-27T08:31:15.467

不要使用面板，而是使用[`TGroupBox`](http://docwiki.embarcadero.com/Libraries/XE3/en/Vcl.StdCtrls.TGroupBox)旨在将控件分组在其中并将标题绘制在您想要的位置的面板。

> TGroupBox 代表一个 Windows 组框。TGroupBox 组件代表一个标准的 Windows 组框，用于对窗体上的相关控件进行分组。当另一个控件组件放置在一个组合框中时，该组合框将成为该组件的父级。

![运行时的 GroupBox](../Images/607f5b36f35c7c3df8f3fe46c041a178.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T08:37:44.760

您可以在此面板上放置一个带有标题的 TLabel，或者作为 jachguate mentioend 使用 TGroupBox。

如果您坚持使用面板，不妨试试 TAdvSmoothPanel，它是一个 TMS 组件。

# javascript - 收音机的下一个/上一个按钮

> ID：15107320
> 
> 赞同：4
> 
> 时间：2013-02-27T08:29:03.027
> 
> 标签：javascript, jquery, html, radio

我正在尝试将“下一个”和“上一个”按钮添加到单选样式导航中。

HTML

```
<div class="month-picker"> 
    <button type="buton" class="month-picker-nav" onclick="dayNavigation('prev');">&lt;</button> 
    <fieldset class="month-picker-fieldset">
        <input type="radio" name="month" value="day1" id="day1" checked="checked">
        <label for="day1" class="month-picker-label">Day 1</label>
        <input type="radio" name="month" value="day2" id="day2">
        <label for="day2" class="month-picker-label">Day 2</label>
        <input type="radio" name="month" value="day3" id="day3">
        <label for="day3" class="month-picker-label">Day 3</label>
        <input type="radio" name="month" value="day4" id="day4">
        <label for="day4" class="month-picker-label">Day 4</label>
        <input type="radio" name="month" value="day5" id="day5">
        <label for="day5" class="month-picker-label">Day 5</label>
        <input type="radio" name="month" value="day6" id="day6">
        <label for="day6" class="month-picker-label">Day 6</label>
        </fieldset> 
        <button type="buton" class="month-picker-nav" onclick="dayNavigation('next');">&gt;</button>
</div> 
```

JAVASCRIPT：

```
dayNavigation = function (direction) {
    var all = $('.month-picker-fieldset input:radio');
    var current = $('.month-picker-fieldset input:radio:checked');
    var index;
    if (direction == 'prev') {
        index = all.index(current) - 1;       
    } else {
        index = all.index(current) + 1;        
    }    
    all.eq(index).attr('checked', 'checked');
    return false;
}; 
```

小提琴：http: [//jsfiddle.net/hTgv3/5/](http://jsfiddle.net/hTgv3/5/)

我的问题是上一个按钮不起作用，一旦手动调用选择或“单击”，下一个按钮就不再起作用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-27T08:40:39.423

您应该使用单击而不是 setAttribute 来执行正确的操作：

```
all.eq(index).click(); 
```

此外，您需要检查索引是否大于或等于最大列表大小。如果是，则循环回第一个元素 (0)：

```
if(index >= all.size()) index = 0; 
```

[http://jsfiddle.net/samliew/hTgv3/11/](http://jsfiddle.net/samliew/hTgv3/11/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T08:42:07.633

将“attr”更改为“prop”.. ala

```
all.eq(index).prop('checked', 'checked'); 
```

# macos - Intellij-idea：字母键的自动重复

> ID：15107321
> 
> 赞同：30
> 
> 时间：2013-02-27T08:29:07.810
> 
> 标签：macos, intellij-idea, pycharm, phpstorm, webstorm

在 OS X 上使用 Intellij-Idea 12，我有一个奇怪的问题：当我在编辑器中按住字母 ([az]) 键时，击键不会重复。不幸的是，这是一个问题，因为我想使用 vim 插件，并使用键 h,j,k,l 来移动光标。

其他非字母键在按住时会产生重复。在 Ubuntu 12.04 上我也没有遇到这个问题。

这是任何选择吗？有人知道在哪里设置击键重复的偏好吗？

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2015-01-17T00:42:04.683

您还可以更具体地更改并使用以下命令仅更改 IntelliJ 的行为。上述解决方案中的 -g 选项会针对所有应用程序更改它。

```
defaults write com.jetbrains.intellij ApplePressAndHoldEnabled -bool false 
```

对于 14.x 社区​​版，您可能需要使用不同的 URI：

```
defaults write com.jetbrains.intellij.ce ApplePressAndHoldEnabled -bool false 
```

这适用于 MacOSX 10.10 Yosemite 和 IntelliJ 13.1.6

* * *

## 回答 #2

> 赞同：34
> 
> 时间：2013-02-27T10:32:57.487

这是一个不特定于 Intellij IDEA的[系统偏好：](http://lifehacker.com/5826055/make-your-keyboard-keys-repeat-properly-when-held-down-in-mac-os-x-lion)

```
defaults write -g ApplePressAndHoldEnabled -bool false 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-03-06T14:59:49.013

我在使用 JetBrains 产品之一 PyCharm Pro 2017.3 的 macos 10.12.6 上遇到了同样的问题。使用 danslee 和 Dao 的答案，我想出了（用您正在使用的应用程序的名称替换 PyCharm）：

1.  退出 JetBrains 应用程序，
2.  `/Applications/PyCharm.app/Contents/Info.plist`通过编辑文件并查找键的值来查找控制键重复的参数的名称`CFBundleIdentifier`。这是我找到的参数： **com.jetbrains.pycharm**，对你来说可能会有所不同，
3.  将找到的参数设置为所需的值：`$ defaults write com.jetbrains.pycharm ApplePressAndHoldEnabled -bool true`。true 将设置自动重复，false 将设置不自动重复，
4.  您可以通过执行以下操作检查参数的值：`$ defaults read > defaults_read.txt`并在 defaults_read.txt 中查找“ApplePressAndHoldEnabled”，
5.  运行应用程序并检查。

# android - 在 onManagedUpdate 方法中设置碰撞后的速度时，AndEngine 精灵被锁定

> ID：15107322
> 
> 赞同：0
> 
> 时间：2013-02-27T08:29:10.930
> 
> 标签：android, andengine

我必须创建一个游戏，其中有一个玩家精灵和几个（大约 30 个）其他精灵在屏幕上随机移动而不会相互碰撞。我在避免碰撞方面遇到了问题，因为在检测到碰撞时，所有移动的精灵都被锁定了。下面是我的代码..在我的代码中，我创建了两个类，一个是`MainActivity`（这是使用该类扩展`BaseGameActivity`并创建大约 30 个`AnimatedSprites`的主类，`NewSprite`并包含 NewSprite 对象的静态数组列表“playerSprite”（大约 30 个随机创建的对象）第二个是`NewSprite`（它扩展`AnimatedSprite`并重载了该方法`onManagedUpdate()`，以防止这些移动`AnimatedSprites`离开屏幕并在它们之间发生碰撞。）

我只显示了`NewSprite`类..

```
public class NewSprite extends AnimatedSprite{
public PhysicsHandler physicsHandler;
Random randPos;

public NewSprite(final float pX, final float pY, final ITiledTextureRegio pTiledTextureRegion, final VertexBufferObjectManager pVertexBufferObjectManager) {
    super(pX, pY, pTiledTextureRegion, pVertexBufferObjectManager);

    randPos = new Random();
    float x1;
    float y1;
    while((x1 = randPos.nextFloat()) < 0.8f);
    while((y1 = randPos.nextFloat()) < 0.8f);
    if(randPos.nextInt() % 2 == 0)
        x1 *= -1;
    if(randPos.nextInt() % 2 == 0)
        y1 *= -1;

    physicsHandler = new PhysicsHandler(this);
    this.registerUpdateHandler(physicsHandler);

    physicsHandler.setVelocity(x1 * 100, y1 * 100);
}

@Override
protected void onManagedUpdate(float pSecondsElapsed) {
    // TODO Auto-generated method stub

    if(this.mX < 0){
        this.move++;
        float x2,y2;
        while((x2 = randPos.nextFloat()) < 0.8f);
        while((y2 = randPos.nextFloat()) < 0.8f);
        if(randPos.nextInt() % 2 == 0)
            y2 *= -1;
        physicsHandler.setVelocity( x2*40,  y2*40);
        this.prevX = this.mX;
        this.prevY = this.mY;
    }
    else if(this.mY < 0){
        this.move++;
        float x2,y2;
        while((x2 = randPos.nextFloat()) < 0.8f);
        while((y2 = randPos.nextFloat()) < 0.8f);
        if(randPos.nextInt() % 2 == 0)
            x2 *= -1;
        physicsHandler.setVelocity( x2*40,  y2*40);
        this.prevX = this.mX;
        this.prevY = this.mY;
    }
    else if(this.mX > (MainActivity.CAMERA_WIDTH - MainActivity.MONSTER_WIDTH)){
        this.move++;
        float x2,y2;
        while((x2 = randPos.nextFloat()) < 0.8f);
        while((y2 = randPos.nextFloat()) < 0.8f);
        x2 *= -1;
        if(randPos.nextInt() % 2 == 0)
            y2 *= -1;
        physicsHandler.setVelocity( x2*40,  y2*40);
        this.prevX = this.mX;
        this.prevY = this.mY;
    }
    else if(this.mY > (MainActivity.CAMERA_HEIGHT - MainActivity.MONSTER_HEIGHT)){
        this.move++;
        float x2,y2;
        while((x2 = randPos.nextFloat()) < 0.8f);
        while((y2 = randPos.nextFloat()) < 0.8f);
        if(randPos.nextInt() % 2 == 0)
            x2 *= -1;
        y2 *= -1;
        physicsHandler.setVelocity( x2*40,  y2*40);
        this.prevX = this.mX;
        this.prevY = this.mY;
    }

    for(int i=0 ; i < MainActivity.playerSprite.size(); i++){

        if(( MainActivity.playerSprite.get(i)).collidesWith(this) || this.collidesWith(MainActivity.playerSprite.get(i))){

            float x2, y2;
            while((x2 = randPos.nextFloat()) < 0.8f);
            while((y2 = randPos.nextFloat()) < 0.8f);

            if(randPos.nextInt() % 2 == 0)
                x2 *= -1;
            if(randPos.nextInt() % 2 == 0)
                y2 *= -1;

            this.physicsHandler.setVelocity( x2*100,  y2*100);
            break;
        }
    }   
    super.onManagedUpdate(pSecondsElapsed);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-24T17:05:24.817

您是否尝试将代码放在`super.onManagedUpdate(pSecondsElapsed);`?

# javascript - jquery检查空节点

> ID：15107326
> 
> 赞同：0
> 
> 时间：2013-02-27T08:29:17.200
> 
> 标签：javascript, jquery

我有一个 DOM 元素，如下所示；

```
<div id="myDiv">
<jstl:tag1 />
<jstl:tag2 />
</div> 
```

现在你可以看到，我有一个可以返回一些文本值的 JSTL 标签。

我最终需要使用 jQuery 检查我的 DOM 元素“myDiv”是否为空。

`$("#myDiv").html() == ""`不幸的是，即使 JSTL 标记不重新调整任何值，我也不能做一个简单的事情，我在 div 中得到新行字符为 \n 和所有

我如何解释那些检查空节点的原因？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T08:32:03.290

怎么样：

```
$('#myDiv').html().trim() == ""; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T08:40:02.817

您可以测试元素内非空白节点的数量：

```
var nodes = $('#myDiv')[0].childNodes;
var nonempty = [];
for(i=0; i<nodes.length;i++){
    if(nodes[i].nodeType !== 3 || nodes[i].nodeValue.trim() !== "" ){
        nonempty.push(nodes[i]);
    }
}

//this should be 0 if empty
alert(nonempty.length); 
```

这是一个演示：http: [//jsfiddle.net/DWx8R/](http://jsfiddle.net/DWx8R/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-27T08:40:27.713

```
var isEmpty = $.trim( $('#myDiv').text() ).length === 0; 
```

[**小提琴**](http://jsfiddle.net/WBU4a/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-27T08:32:26.537

尝试这样的事情，使用 text() 而不是 html()

```
 $("#myDiv").text().trim(); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-27T08:30:36.697

你可以做一个正则表达式测试

```
/\w+/.test($("#myDiv").html()) 
```

它将测试至少一个单词字符，例如字母数字字符。

# jquery - 如何通过 GitHub API 更新 Gist？

> ID：15107328
> 
> 赞同：2
> 
> 时间：2013-02-27T08:29:25.387
> 
> 标签：jquery, ajax, backbone.js, github, gist

在过去的几个小时里，我一直在尝试通过他们的 API 更新 GitHub Gist，但无济于事。我可以轻松地 POST 到[https://api.github.com/gists](https://api.github.com/gists)并创建一个新的 Gist，但我永远无法获得[https://api.github.com/gists/:id](https://api.github.com/gists/:id)的补丁来工作。如何通过他们的 API 更新 Gists？我错过了一些重要的细节吗？

这是我目前困境的 JSFiddle：http: [//jsfiddle.net/ZzUsv/4/](http://jsfiddle.net/ZzUsv/4/)

代码本身：

```
var Gist = Backbone.Model.extend({
    urlRoot: 'https://api.github.com/gists',
    defaults: {
        description: 'A terse gist',
        'public': true,
        files: {
            'html.html': {
                content: 'test'
            },
            'css.css': {
                content: 'test'
            },
            'js.js': {
                content: 'test'
            }
        }
    }
});

var my_gist = new Gist;
my_gist.save( my_gist.toJSON(), {
    success: function(){
        $('body').append('successfully created gist');
        my_gist.save({ description: '<div>A less terse gist</div>' }, {
            patch: true,
            success: function(){
                $('body').append('<div>successfully updated gist</div>');
            },
            error: function( model, xhr, options ){
                $('body').append('<div><b>error updating gist</b></div>');
                $('body').append( JSON.stringify( xhr ) );
            }
        });
    }
}); 
```

相关文档：http: [//developer.github.com/v3/gists/#edit-a-gist](http://developer.github.com/v3/gists/#edit-a-gist)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-27T16:52:41.007

看起来这是一个简单的文档不良案例。尽管向您提供了 ID，但您似乎无法编辑或删除匿名 Gists。

# angularjs - 我如何在角度 js 中显示嵌套列表

> ID：15107333
> 
> 赞同：2
> 
> 时间：2013-02-27T08:29:33.373
> 
> 标签：angularjs

我有这个用于学生记录的 html 代码，它运行良好

```
<li ng:repeat="student in students">
        <a href='#/student/{{ student.id }}'>{{ student.number }}</a>
</li> 
```

但我有几个嵌套的细节层次，我想像这样展示

```
<ul>
<li ng:repeat="student in students">
            <a href='#/student/{{ student.id }}'>{{ student.number }}</a>
             if {{ student.subjects}} > 0
              //some indenting
                 <ul>
             <li ng:repeat="subject in subjects">
                        <a href='#/student/subject/{{ subject.id }}'>{{ subject.name }}</a>
                         if {{ subjects.assignments}} > 0
                         <ul>
                         <li ng:repeat="subject in subjects">
                        <a href='#/student/subject/assignment/{{ assignment.id }}'>{{ assignment.name }}</a>
                        <li>
                         </ul>
            <li>
             </ul>
        </li>
        </ul> 
```

但我不知道角度语法，我该怎么做

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-27T08:39:01.343

您可以在子 UL 元素上使用 ng-show，并在其自己的 ng-repeat 中迭代每个级别。注意：您不需要`if {{ student.subjects}} > 0`（顺便说一句，这不是有效的 JS 代码）之类的东西。如果集合为空，则 ngRepeat 不会迭代：

```
<ul>
  <li ng-repeat="student in students">
    <a href='#/student/{{ student.id }}'>{{ student.number }}</a>
    <ul ng-show="student.subjects && student.subjects.length">
      <li ng-repeat="subject in student.subjects">
        <a href='#/student/subject/{{ subject.id }}'>{{ subject.name }}</a>
          <ul ng-show="subject.assignments && subject.assignments.length">
            <li ng-repeat="assignment in subject.assignments">
              <a href='#/student/subject/assignment/{{ assignment.id }}'>{{ assignment.name }}</a>
            <li>
          </ul>
      <li>
    </ul>
  </li>
</ul> 
```

# xslt - XSLT - 转换无法正常工作

> ID：15107336
> 
> 赞同：0
> 
> 时间：2013-02-27T08:29:42.343
> 
> 标签：xslt, xslt-1.0, xslt-2.0

我有一个如下的请求 XML，需要将其转换为不同的格式。可以请一些pne帮我解决这个问题。

```
<soap:Envelope xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/">
   <soap:Body>
      <ns2:fetchOrderListResponse xmlns:ns2="http://impl.lob.wipro.com/">
         <return>
            <customerOrderNumber>1</customerOrderNumber>
            <orderId>E147011D-AE9F-4AC8-AF37-05DC538AF1D0</orderId>
            <ordertotal>0</ordertotal>
         </return>
         <return>
            <customerOrderNumber>1</customerOrderNumber>
            <orderDetails>
               <itemPrice>50.0</itemPrice>
               <itemQty>2</itemQty>
               <itemUnit>0</itemUnit>
               <orderDetailsId>37516016-D71B-4790-951F-55D00B0CC159</orderDetailsId>
            </orderDetails>
            <orderDetails>
               <itemPrice>39.0</itemPrice>
               <itemQty>3</itemQty>
               <itemUnit>0</itemUnit>
               <orderDetailsId>6095ABC7-0D0D-4B2E-92E5-80F24E9092B8</orderDetailsId>
            </orderDetails>
            <orderId>84EC371D-40CA-455E-A0FA-7EA733E9BFD3</orderId>
            <ordertotal>217</ordertotal>
         </return>
         <return>
            <customerOrderNumber>1</customerOrderNumber>
            <orderId>54712493-2172-4ADB-814B-BC7AA0BB72C3</orderId>
            <ordertotal>0</ordertotal>
         </return>
         <return>
            <customerOrderNumber>1</customerOrderNumber>
            <deliverydate>2013-02-06T00:00:00+05:30</deliverydate>
            <orderDetails>
               <itemPrice>565.0</itemPrice>
               <itemQty>1</itemQty>
               <itemUnit>0</itemUnit>
               <orderDetailsId>9A5030BE-F95F-4C62-B5A2-41FF85423218</orderDetailsId>
            </orderDetails>
            <orderDetails>
               <itemPrice>4.0</itemPrice>
               <itemQty>90</itemQty>
               <itemUnit>0</itemUnit>
               <orderDetailsId>65A8B3BE-D407-43D8-8754-EA1E26AA56E4</orderDetailsId>
            </orderDetails>
            <orderId>0BDCB222-0117-47A9-8813-DF03A1D19E5E</orderId>
            <ordertotal>925</ordertotal>
         </return>
         <return>
            <customerOrderNumber>1</customerOrderNumber>
            <orderId>8E4220DC-884B-47BC-A565-E26B80BA5249</orderId>
            <ordertotal>0</ordertotal>
         </return>
         <return>
            <customerOrderNumber>1</customerOrderNumber>
            <deliverydate>2013-02-06T00:00:00+05:30</deliverydate>
            <orderDetails>
               <itemPrice>10.0</itemPrice>
               <itemQty>4</itemQty>
               <itemUnit>0</itemUnit>
               <orderDetailsId>5A2DF895-BB0F-4039-80DB-F44CED31697B</orderDetailsId>
            </orderDetails>
            <orderDetails>
               <itemPrice>20.0</itemPrice>
               <itemQty>3</itemQty>
               <itemUnit>0</itemUnit>
               <orderDetailsId>8034FBF4-B573-4B19-BDF5-FAF6C4247A55</orderDetailsId>
            </orderDetails>
            <orderId>60161E3E-3C4A-4CE6-AAC3-E4D2BC240046</orderId>
            <ordertotal>100</ordertotal>
         </return>
      </ns2:fetchOrderListResponse>
   </soap:Body>
</soap:Envelope> 
```

响应应采用以下格式。请帮助 XSLT 转换相同的

```
<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:ser="http://service.client.inmemory.eim.wipro.com/">
   <soapenv:Header/>
   <soapenv:Body>
      <ser:getOrderDetailResponse>
         <!--Zero or more repetitions:-->
         <return>
            <itemPrice>?</itemPrice>
            <itemQty>?</itemQty>
            <itemUnit>?</itemUnit>
            <!--Optional:-->
            <orderDetailsId>?</orderDetailsId>
            <!--Optional:-->
            <orderId>?</orderId>
         </return>
      </ser:getOrderDetailResponse>
   </soapenv:Body>
</soapenv:Envelope> 
```

我想出了一个 XSLT 来做到这一点。不幸的是，它不起作用，也没有提取任何数据。请让我知道我做错了什么

```
<?xml version="1.0" encoding="ISO-8859-1"?>
<xsl:stylesheet version="1.0"
xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
<xsl:template match="/">
<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:ser="http://service.client.inmemory.eim.wipro.com/">
   <soapenv:Header/>
   <soapenv:Body>
      <ser:getOrderDetailResponse>
         <!--Zero or more repetitions:-->
         <return>
<xsl:for-each select="return/orderDetails">
            <itemPrice><xsl:value-of select="return/orderDetails/itemPrice"/></itemPrice>
            <itemQty><xsl:value-of select="return/orderDetails/itemQty"/></itemQty>
            <itemUnit><xsl:value-of select="return/orderDetails/itemUnit"/></itemUnit>
            <orderDetailsId><xsl:value-of select="return/orderDetails/orderDetailsId"/></orderDetailsId>
            <orderId><xsl:value-of select="orderId"/></orderId>
</xsl:for-each>
         </return>
      </ser:getOrderDetailResponse>
   </soapenv:Body>
</soapenv:Envelope>
</xsl:template>
</xsl:stylesheet> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T09:12:23.680

不知道为什么您删除了第一个问题并再次发布完全相同的问题。添加 XSLT 后，这是一个可以回答的问题。

无论如何，问题是您的模板匹配`/`，但是您尝试`xsl:for-each`从`return/orderDetails`. 您确实必须注意 XSLT 中的上下文。

首先将适当的命名空间添加到`xsl:stylesheet`...

```
xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"
xmlns:ns2="http://impl.lob.wipro.com/" 
```

其次，相应地调整您的`select`：

```
<xsl:for-each select="/soap:Envelope/soap:Body/ns2:fetchOrderListResponse/return/orderDetails"> 
```

我不确定这是否会返回您正在寻找的内容，但它会返回数据。看到输出后应该可以调整

# jquery - jQuery 更新错误

> ID：15107344
> 
> 赞同：0
> 
> 时间：2013-02-27T08:30:09.470
> 
> 标签：jquery

![在此处输入图像描述](../Images/5ea4074a89b79db58f35abe3ef582543.png)![在此处输入图像描述](../Images/3610cc8e5d3d402dcf49b2435c039edb.png)

更新到 jquery 最新版本后，屏幕截图中出现错误。请建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T08:36:44.370

**版本的巨大跳跃显然引起了头疼，如果可能的话，在阅读每个版本的发行说明**以检查更改后尽快更新。

话虽这么说，您似乎使用的是过时的选择器或三个更新行，例如：

```
...@rel=... 
```

至：

```
...rel=... 
```

`@`不再需要该符号。任何其他使用元素属性的选择器也是如此。

# ios - 在 IOS 上查看时 Jsfiddle 无法正常运行

> ID：15107346
> 
> 赞同：2
> 
> 时间：2013-02-27T08:30:09.613
> 
> 标签：ios, google-chrome, mobile-safari, jsfiddle

这是我最近几天才遇到的问题；当点击 jsfiddle 的链接，甚至进入 jsfiddle 主页（在 IOS 6、iPad 2 上）时，jsfiddle 没有正确初始化，我看到的只是“初始化很棒”。即使登录并创建小提琴也不起作用。这个问题似乎只是在最近的一些停机时间之后才出现的，我认为他们在此期间正在更新 jsfiddle。有没有其他人遇到过这个问题/有解决办法？

注意：这发生在 safari 和 chrome 上。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-03T18:31:16.137

好的，我已经向 jsfiddle 支持发送了一封电子邮件，我得到了这样的回复：

> 我们正在努力。 [https://github.com/jsfiddle/jsfiddle-issues/issues/330](https://github.com/jsfiddle/jsfiddle-issues/issues/330)
> 
> 目前请使用草稿功能或将 /embedded/result 添加到 URL。
> 
> [http://doc.jsfiddle.net/basic/introduction.html#draft-page](http://doc.jsfiddle.net/basic/introduction.html#draft-page)
> 
> 问候， 彼得

希望这意味着该问题将很快得到解决，但与此同时，请使用：（例如） [http://jsfiddle.net/](http://jsfiddle.net/)（您的小提琴）/embedded/result

即，只需按照 Piotr 的建议将 /embedded/result 添加到 url 的末尾即可。

# node.js - Compound JS - 在 API 中使用 POST 方法

> ID：15107350
> 
> 赞同：0
> 
> 时间：2013-02-27T08:30:30.500
> 
> 标签：node.js

我正在研究 CompoundJS，我想为我的移动应用程序创建一个 api。

下面是预期的输出

1) 一个 api localhost:3000/test

2）一些数据必须发布到这​​个api说`number: 1`

3) API 应以发布的数字响应，结果应为 =`1`

我尝试了以下

1）创建了一个控制器说`test_controller.js`

2）`showtest`使用以下代码添加了一个动作

```
action(function showtest(req, res) {
  console.log(req.body);
}); 
```

3）添加了路由器配置，如

```
map.post('test', 'test#showtest') 
```

当我发布到 url localhost:3000/test 时，它显示 200 成功，但在 Firebug 控制台中，响应显示错误。

我究竟做错了什么？有没有像 Rails 一样的东西，`render :text => "hello"` 我们可以将它用于 CompoundJS。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T10:25:38.277

你的做法不正确。尝试这个：

```
action('showtest', function() {
  for (var key in req.body)
  {
    send(key.toString());
    break;
  }
}); 
```

Express 用于`.rawBody`在请求对象上公开一个属性，该属性将包含发布的原始数据，但从 Express 3.x 开始，此功能已被删除。上面代码中的`for`循环将返回`req.body`对象的第一个键（当 POST 的数据只是一个数字时，它将是那个数字）。

# jqgrid - 将子网格动态添加到相同的父网格

> ID：15107352
> 
> 赞同：0
> 
> 时间：2013-02-27T08:30:31.950
> 
> 标签：jqgrid, subgrid

我需要能够将随机数量的子网格添加到 jqgrid。基本上，子网格与父 jqgrid 相同，除了隐藏它们的列标题。有没有一种方法可以让我在 js 文件方法中定义网格一次，并将网格 ID 和数据 url 作为参数传入，然后在定义后将其自身的不同版本附加到其 subGridRowExpand 中。必须在另一个内部定义同一个 jqgrid 的多个版本似乎非常费力。

我可以做类似的事情吗

```
var i = 0;
var maxsubgrids = 5;

function CreateGrid(gridId, dataUrl) {
    $(gridId).grid(
                ...... Grid definition
    subGridRowExpand: function(subgrid_id, row_id) {
        if (subgridcount < maxsubgrids){
            CreateGrid('#subgridId' + i++, subgridDataURL);
        }
    }
    ......... continue with grid definition
} 
```

我知道以上内容不正确，而只是一个想法，但我认为如果可以在一个方法中只创建一次网格，然后找到一种方法在之后插入 subGridRowExpand 部分，那会更好。这甚至可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T12:01:45.373

您应该考虑使用[TreeGrid](http://www.trirand.com/jqgridwiki/doku.php?id=wiki%3aadjacency_model)而不是[Subgrids](http://www.trirand.com/jqgridwiki/doku.php?id=wiki%3asubgrid_as_grid)。重要的是要了解 TreeGrid 的子项始终具有与其父元素相同的列数。所以我想它符合你的要求。树节点的扩展，`nodeid`会自动添加到 URL 的参数列表中（参见[文档](http://www.trirand.com/jqgridwiki/doku.php?id=wiki%3aadjacency_model#what_we_post)）。`parentid``n_level`

# testing - 如何使 Test-Framework 报告 QuickCheck 失败的原因？

> ID：15107353
> 
> 赞同：3
> 
> 时间：2013-02-27T08:30:36.237
> 
> 标签：testing, haskell, test-framework

例如我有一个这样的测试代码：

```
import Data.Decimal
import Data.Ratio
import Data.Word
import Test.HUnit
import Control.Applicative

import Debug.Trace

import Test.QuickCheck
import qualified Test.QuickCheck.Property as P
import Test.Framework as TF (defaultMain, testGroup, Test)
import Test.Framework.Providers.HUnit
import Test.Framework.Providers.QuickCheck2 (testProperty) 
```

............

```
isEQ :: (Eq a, Show a) => a -> a -> P.Result
isEQ a b = if a == b
           then P.succeeded
           else P.failed {P.reason = show a ++ "\nis not equal to \n" ++ show b}

-- | "read" is the inverse of "show".
-- 
-- > read (show n) == n
prop_readShow :: Decimal -> P.Result
prop_readShow d =  isEQ (read (show d)) d 
```

......

```
tests = [
        testGroup "QuickCheck Data.Decimal" [
                testProperty "readShow"           prop_readShow,
                testProperty "readShowPrecision"  prop_readShowPrecision,
                testProperty "fromIntegerZero"    prop_fromIntegerZero, 
```

.....................

test-framerowk 的报告是这样的

```
 dist/build/Main/Main -a2000   
QuickCheck Data.Decimal:
  readShow: [Failed]
Arguments exhausted after 0 tests
  readShowPrecision: [Failed]
Arguments exhausted after 0 tests
  fromIntegerZero: [Failed] 
```

没有任何失败的原因。看起来相同的 HSpec 测试会在报告中打印失败原因，但测试框架测试不会。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-09-22T02:11:39.000

这里可能的问题是 QuickCheck 在发现太多不合适的测试用例后放弃了。`topt_maximum_unsuitable_generated_tests`加注将使 QuickCheck 有更多机会找到可接受的案例并完成测试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T06:45:51.737

那是一个不同的问题，实际上 test-framework-0.8 有一个错误[https://github.com/batterseapower/test-framework/issues/34](https://github.com/batterseapower/test-framework/issues/34)所以测试计数的高值（-a 参数）会导致失败。

您只需要将测试框架的版本降低到 0.7。

# c++ - [=](...){...} 在 C++ 中是什么意思？

> ID：15107371
> 
> 赞同：2
> 
> 时间：2013-02-27T08:31:30.263
> 
> 标签：c++, c++11, lambda

这个语句的作用是什么：

```
std::replace_if(ln.begin(),ln.end(),[=](int c){return c=='\n'||c==' ';},0); 
```

具体来说，我想知道：

什么意思

```
[=](int c){return c=='\n'||c==' ';} 
```

这个定义的语法在哪里？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T12:00:58.713

> [=](int c){return c=='\n'||c==' ';}

是一个 lambda 表达式，它创建一个未命名的函数对象。它可以用一个参数调用并返回一个布尔值。方括号是所谓的“lambda 引入器”，其中包含所谓的“捕获子句”。capture-clause 告诉编译器 lambda 对象如何捕获周围的局部变量。

> std::replace_if(ln.begin(),ln.end(),[=](int c){return c=='\n'||c==' ';},0);

replace_if 为一个序列接受两个迭代器，一个函子（更具体地说：一个谓词）和一些其他值。如果给定谓词（lambda 表达式）对该元素返回 true，它会遍历被调用序列的元素`ln`并用 0 替换每个元素。

`ln`因此，基本上，这行代码将用空终止符替换每个空格和换行符。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T08:33:41.050

这是一个 lambda 函数。一个没有名称并在代码中内联定义的函数。它已通过 C++11 标准添加到 C++。所以，它是相对较新的。

[你可以在这里](http://blogs.msdn.com/b/vcblog/archive/2008/10/28/lambdas-auto-and-static-assert-c-0x-features-in-vc10-part-1.aspx)阅读它们

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-27T08:33:52.747

这是一个拉姆达。它用if或替换`c`容器中的整数。由于容器似乎包含字符，因此您基本上可以说它用空终止字符替换空格和换行符。`ln``0``c == '\n'``c == ' '`

# android - java.lang.NullPointerException - android.content.ContextWrapper.getDir 同时从服务创建目录

> ID：15107373
> 
> 赞同：1
> 
> 时间：2013-02-27T08:31:30.797
> 
> 标签：android, android-context

我想从后台服务在应用程序文件夹中创建目录。我已经使用 getDir 创建了一个目录。我正在向 DataManager 发送服务上下文以创建目录。此外，我已经确认我没有收到空上下文。但我在“ `ctx.getDir("Application_Name", Context.MODE_PRIVATE)`”线上崩溃了。

```
private File systemDir;
private File dataDir;
public DataManager(Context ctx) {
    try{
    Log.e("xlogger", "DataManager Context : "+ctx);     
    systemDir = ctx.getDir("Application_Name", Context.MODE_PRIVATE );
    dataDir = new File(systemDir, "Data/");
    if(!dataDir.exists()){          
        dataDir.mkdir();
    }
    }catch (Exception e) {
        Log.e("xlogger", "DataManager Exception : "+Log.getStackTraceString(e));
    }
} 
```

崩溃报告：

```
02-27 13:46:13.100: D/xlogger(4762): DataManager Context = com.MyApp.engine.MyService@4055ad38  
02-27 13:46:13.110: E/xlogger(4762): DataManager Exception : java.lang.NullPointerException
02-27 13:46:13.110: E/xlogger(4762):    at android.content.ContextWrapper.getDir(ContextWrapper.java:198)
02-27 13:46:13.110: E/xlogger(4762):    at com.MyApp.utils.DataManager.<init>(DataManager.java:30)
02-27 13:46:13.110: E/xlogger(4762):    at com.MyApp.communication.MyAppClient.getRulesXML(MyAppClient.java:867)
02-27 13:46:13.110: E/xlogger(4762):    at com.MyApp.engine.MyService$5.doInBackground(MyService.java:862)
02-27 13:46:13.110: E/xlogger(4762):    at com.MyApp.engine.MyService$5.doInBackground(MyService.java:1)
02-27 13:46:13.110: E/xlogger(4762):    at android.os.AsyncTask$2.call(AsyncTask.java:185)
02-27 13:46:13.110: E/xlogger(4762):    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:306)
02-27 13:46:13.110: E/xlogger(4762):    at java.util.concurrent.FutureTask.run(FutureTask.java:138)
02-27 13:46:13.110: E/xlogger(4762):    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1088)
02-27 13:46:13.110: E/xlogger(4762):    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:581)
02-27 13:46:13.110: E/xlogger(4762):    at java.lang.Thread.run(Thread.java:1019) 
```

帮助高度赞赏。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T09:53:46.827

getDir() 或 openFileOutput() ：它们在 data/data// 中创建文件。这在任何非 root 手机上均不可用。所以，root 手机或者我建议你在 suj 案例中尝试在 EMULATOR 中。

否则，您可以在 sdcard 上使用 getExternalFilesDirectory() --> 但路径是 Android/data//files/ 并且它也是应用程序私有的。卸载该应用程序后，甚至这些文件也会被删除:-)

如果有帮助，请务必评价:-)

# python - 在 Windows 7 64 位中设置 pip

> ID：15107375
> 
> 赞同：3
> 
> 时间：2013-02-27T08:31:39.710
> 
> 标签：python, python-2.7, pip, setuptools, easy-install

我已经安装`easy_install`并`setuptools`在`Python 2.7`. 我在`pip`使用`easy_install pip`. 我已经关注了我的 SO 帖子和博客，但仍然没有帮助。

以下是我在 Windows 中收到的错误`cmd`：

```
Searching for pip
Reading http://pypi.python.org/simple/pip/
Download error: [Errno 10061] No connection could be made because the target mac
hine actively refused it -- Some packages may not be found!
Couldn't find index page for 'pip' (maybe misspelled?)
Scanning index of all packages (this may take a while)
Reading http://pypi.python.org/simple/
Download error: [Errno 10061] No connection could be made because the target mac
hine actively refused it -- Some packages may not be found!
No local packages or download links found for pip
Best match: None
Traceback (most recent call last):
  File "C:\Python27\Scripts\easy_install-script.py", line 8, in <module>
    load_entry_point('setuptools==0.6c11', 'console_scripts', 'easy_install')()
  File "C:\Python27\lib\site-packages\setuptools\command\easy_install.py", line
1712, in main
    with_ei_usage(lambda:
  File "C:\Python27\lib\site-packages\setuptools\command\easy_install.py", line
1700, in with_ei_usage
    return f()
  File "C:\Python27\lib\site-packages\setuptools\command\easy_install.py", line
1716, in <lambda>
    distclass=DistributionWithoutHelpCommands, **kw
  File "C:\Python27\lib\distutils\core.py", line 152, in setup
    dist.run_commands()
  File "C:\Python27\lib\distutils\dist.py", line 953, in run_commands
    self.run_command(cmd)
  File "C:\Python27\lib\distutils\dist.py", line 972, in run_command
    cmd_obj.run()
  File "C:\Python27\lib\site-packages\setuptools\command\easy_install.py", line
211, in run
    self.easy_install(spec, not self.no_deps)
  File "C:\Python27\lib\site-packages\setuptools\command\easy_install.py", line
434, in easy_install
    self.local_index
  File "C:\Python27\lib\site-packages\setuptools\package_index.py", line 475, in
 fetch_distribution
    return dist.clone(location=self.download(dist.location, tmpdir))
AttributeError: 'NoneType' object has no attribute 'clone' 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-04-19T16:10:50.357

我这样做了，我正在使用 Windows 7 x64。

```
 Installing Python 2.7 
```

[https://www.python.org/download/releases/2.7.2](https://www.python.org/download/releases/2.7.2) --------Windows x86 MSI Installer (2.7.2) (sig)

安装 python 2.7 后（我默认安装在 c:\python27），所以你准备好了。

```
 **Installing PIP:** 
```

下载文件 get-pip.py

[https://raw.github.com/pypa/pip/master/contrib/get-pip.py](https://raw.github.com/pypa/pip/master/contrib/get-pip.py)

将其保存在已知文件夹中：c:\pip\

转到 Windows - 运行 - 键入 cmd.exe

在 cmd.exe 里面输入：

cd c:\python27(或者你安装python的路径)

你会看到这个：

c:\python27

现在输入（记住您保存 get-pip.py 我们的案例 c:\pip 的路径）。

c:\python27\python.exe c:\pip\get-pip.py

将安装 Pip。

```
 Using Pip to Install Django 
```

现在安装了 Python 和 Pip 转到 Windows - 运行 - 键入 cmd.exe

在 cmd.exe 里面输入：

cd c:\python27

你会看到这个：

c:\python27

现在输入

python.exe -m pip install xxxxxxx

Pip 将安装您所需的 xxxxxx 包。

示例：pip install Django==1.6.2

注意：本指南适用于 Python 和 WINDOWS 的新手。

问候

erick.alfaro@adtein.com www.adtein.com

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T08:41:51.487

我认为在您的尝试过程中，您以某种方式弄乱了 Python 设置。虽然我确信您可以只使用 python.org 的 CPython 安装程序（我和其他许多人都这样做），但我强烈建议您重新开始（彻底删除您目前拥有的）并安装其中一个 Python 发行版具有更多功能，例如：

*   [主动Python](http://www.activestate.com/activepython)
*   Enthought [Python Distribution](http://www.enthought.com/products/epd.php) (EPD) 或
*   [蟒蛇（x，y）](http://code.google.com/p/pythonxy/)。

它们附带安装了几个额外的软件包，包括 pip。他们的安装程序还会正确设置您的 Windows PATH。因此，运行安装程序后，您可以继续，启动`cmd.exe`并运行`python`或`pip install ...`

可在[此处](http://www.enthought.com/products/epd_free.php)找到 EPD 的免费版本。我自己在 EPD 和 Python(x,y) 方面都有很好的经验。[这](http://code.google.com/p/pythonxy/wiki/StandardPlugins)是标准 Python(x,y) 安装程序带来的“插件”列表。请注意，对于 Windows，EPD 和 Python(x,y) 都只能作为 32 位版本提供……但是，用于 Windows 64 位的 ActivePython 是免费的（PyPM 包对于 64 位不是免费的）。根据您的需要，这可能不是问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-06-25T06:31:38.503

我去了[https://pypi.python.org/pypi/pip](https://pypi.python.org/pypi/pip) 有一个 tar 你可以从那里下载。下载后，只需从 Python\Scripts 文件夹中的命令提示符运行“easy_install pip-1.3.1.tar.gz”。似乎完成了这项工作。希望这可以帮助

# javascript - 有没有办法用溢出滚动div：隐藏

> ID：15107379
> 
> 赞同：0
> 
> 时间：2013-02-27T08:31:48.453
> 
> 标签：javascript, jquery, css

我有一个带有 css 的 div `overfow:hidden`。但我需要在此滚动`div`。我用谷歌搜索，发现解决方案是更改`overflow:scroll`并隐藏滚动条。但是在 macbook pro 中，我可以看到滚动条。有没有办法解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T08:37:19.927

Youtube`overflow-y: hidden; padding-right: 17px`通过`overflow-y: scroll; padding-right: 0;`在`:hover`.

它使它看起来整洁，并让用户知道您*可以*滚动。考虑告诉您的用户，而不是假设他们知道这一点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T08:34:00.287

Try`overflow: auto;`如果需要，这将显示滚动条，即 div 中内容的高度大于 div 的高度。否则，如果内容在 div 的范围内，则不会显示滚动条。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-27T08:39:24.383

像这样试试

```
<style type="text/css">
    .inside { width: 500px; overflow: auto; height: 200px; padding-right: 20px; }
    .outside { width: 500px; height: 300px; overflow: hidden; }
</style>

<div class="outside">
    <div class="inside">
        <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nam pretium enim blandit ligula pharetra pharetra. Curabitur posuere nibh at nibh tincidunt sed porta dui commodo. Suspendisse id vulputate magna. Cras non arcu ac lacus dignissim pretium. Aenean varius luctus ante, sed tincidunt neque euismod id. Sed aliquam dui eu purus dapibus venenatis. Praesent tortor sem, pretium in rhoncus eu, eleifend at lectus. Donec dignissim turpis et lectus interdum dignissim. Maecenas porttitor ante ut ligula tempus sit amet tincidunt arcu aliquam. Vivamus at velit massa. Nulla eget ligula sed dolor porta porta sit amet ac est. Vestibulum rhoncus tempus ligula quis vulputate. Nullam auctor, neque tristique ultrices iaculis, neque nisl semper est, id adipiscing ligula est eu diam.</p>

            <p>Cum sociis natoque penatibus et magnis dis parturient montes, nascetur ridiculus mus. Donec enim ante, rhoncus at egestas eget, imperdiet vitae sem. Mauris sed massa elit, ac posuere nibh. Integer ut metus et felis blandit pellentesque id eget velit. Quisque vehicula consectetur nibh sit amet posuere. Etiam egestas lacus id justo fringilla sodales. Donec scelerisque aliquam urna sed sodales. Cras ornare neque fringilla nisl molestie venenatis. Quisque quis lacus ut augue sodales tristique non id sapien. Sed risus nisl, egestas eu sodales ut, rhoncus id nisl. Maecenas hendrerit tellus neque. Aliquam sodales gravida luctus. Suspendisse porta porta libero at venenatis. Proin laoreet accumsan ipsum, et ultrices nisi pharetra et. Nullam in dolor quam, et adipiscing ipsum. In consequat interdum sollicitudin. </p>
    </div>
</div> 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-02-27T08:33:46.143

[你可以使用jquery scrolltop](http://api.jquery.com/scrollTop/)

# cordova - PhoneGap 上的 GPSDetector

> ID：15107380
> 
> 赞同：1
> 
> 时间：2013-02-27T08:31:49.890
> 
> 标签：cordova, phonegap-plugins

用phonegap**检测****GPS**是打开还是关闭的最佳方法是**什么**？
我正在使用这个：[https](https://github.com/BastienL/GPSDetector) ://github.com/BastienL/GPSDetector并且效果很好。

在 Android 4.x 上一切正常，但在 Android 2.x 上我有一个问题：

似乎问题出在这一行：

```
gpsDetect = cordova.require('cordova/plugin/gpsDetectionPlugin'); 
```

出现此错误：

```
02-26 22:54:59.181: E/Web Console(821): module cordova/plugin/gpsDetectionPlugin not found at undefined:0 
```

我的代码：

```
 //Check GPS On/Off
    function checkGPS(){
       var gpsDetect = cordova.require('cordova/plugin/gpsDetectionPlugin');
       gpsDetect.checkGPS(onGPS, onGPSError);
    }
    function onGPS(r){
        if(!r){
            Backbone.history.navigate('/errors/gps/', {trigger: true});
            return;
        }
        return true;
    }
    function onGPSError(){
        Backbone.history.navigate('/errors/gps/', {trigger: true});
        return;
    } 
```

任何提示/想法？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T09:27:50.370

我是这个插件的开发者。我刚刚在 Android 2.2 模拟器上对其进行了测试，但我无法解决您的问题。这篇文章怎么样：[找不到模块cordova/plugin/ios/nativecomm - PhoneGap 2.1 / Sencha 2.0](https://stackoverflow.com/questions/14384780/module-cordova-plugin-ios-nativecomm-not-found-phonegap-2-1-sencha-2-0)？它适用于 iOS，但问题似乎相同，因此您可以尝试他的技巧：在 onGPSError() 函数中使用 console.log() 而不是 alert()。问题是否仍然存在？

# image - DICOM 标准 MONOCHROME1 和 MONOCHROME2 中的图像类型

> ID：15107381
> 
> 赞同：6
> 
> 时间：2013-02-27T08:31:51.400
> 
> 标签：image, dicom

我对 dicom 标准中的图像类型有疑问。在 dicom 文档中，我发现图像类型有五种类型：

```
MONOCHROME1
MONOCHROME2 MPEG2 -single component data
YBR_ICT
YBR_RCT
YBR_PARTIAL_420 MPEG2 -multi-component data 
```

如果dicom文件中的图像类型是MONOCHROME1或MONOCHROME2，是压缩还是不压缩？两种类型之间有什么不同：MONOCHROME1 或 MONOCHROME2？谢谢

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-02-27T08:42:38.140

`MONOCHROME1`表示灰度范围从亮到暗，像素值递增，而灰度范围`MONOCHROME2`从暗到亮，像素值递增。

图像压缩与*光度解释 (0028,0004)*属性无关。压缩由*传输语法 UID (0002,0010)*属性提供。

[您可以在此处](https://web.archive.org/web/20150920230923/http://www.mccauslandcenter.sc.edu/mricro/dicom/index.html)阅读简短的 DICOM 介绍。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-05-01T21:30:59.287

还有更多类型的光度解释。正如 Anders 所说，这与 Transfer 语法无关。

我假设您需要一些有关**Photometric Interpretation**的附加信息，因为您需要这些信息才能显示 Dicom 图像。

我建议你看看[这里](http://www.medicalconnections.co.uk/kb/Photometric_Interpretations)和[这里](http://www.dabsoft.ch/dicom/3/C.7.6.3.1.2/)。

# javascript - 局部变量的垃圾收集和闭包

> ID：15107384
> 
> 赞同：0
> 
> 时间：2013-02-27T08:32:05.620
> 
> 标签：javascript, garbage-collection, closures

xmlHttp 会被垃圾收集吗？如果是，什么时候？

```
function foo (param)
{
    var xmlHttp = GetXmlHttpRequestObject();

    xmlHttp.onreadystatechange = function()
    {
        if (xmlHttp.readyState == 4 && xmlHttp.status == 200)
        {
            // do something involving param and xmlHttp.responseXML
        }
    }

    xmlHttp.open("GET", "GetAsyncData.ashx", true);
    xmlHttp.send();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T08:34:40.337

是的，垃圾收集器会在函数执行后立即自动销毁变量`foo`（因为变量是本地的，因此不能在给定范围之外使用）。

这也是为什么特别使用用`var`关键字声明的局部变量是一种好习惯的原因之一。

请注意，在您的特定上下文中，由于您执行异步 ajax 调用，因此您的函数在 ajax 调用仍在运行时返回，因此垃圾收集器将`xmlHttp`在函数返回且调用完成时销毁您的变量

# android - Phonegap android：如何从本地 html 页面打开外部 url？

> ID：15107389
> 
> 赞同：0
> 
> 时间：2013-02-27T08:32:23.440
> 
> 标签：android, url, cordova, external, local

我正在尝试从本地 html 文件打开外部 url。例如，我正在使用 super.loadUrl("file:///android_asset/www/index.html"); 调用本地文件，应用程序在 DroidGap 提供的浏览器中打开它。但是，外部网址存在问题。在 index.html 中，我试图通过图像按钮访问[http://www.google.com](http://www.google.com)，并且设备会打开另一个浏览器以显示 www.google.com（在我的设备中，chrome 正在打开以显示页面 www.google.com）。 google.com）。我想让 DroidGap 浏览器在 DroidGap 浏览器中打开外部和本地 url。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-10T22:38:45.067

我已经实现了这一点，因为我需要相同的解决方案。我假设您已经知道如何加载本地文件，但以防万一......

```
//By "SomeLocalFile.html" I mean an html file in the /www/ folder of the actual app installation **not** on the server
var ref = window.open('somelocalfile.html', '_blank', 'location=no'); 
```

首先将像这样的事件侦听器添加到您从中调用 var ref = window.open() 的应用程序的主 js 中。

```
ref.addEventListener('loadstart', LoadStart); // in YourMainJs.js 
```

然后在 /www/ 文件夹中的某个位置创建一个名为 closeInAppBrowser.html 的本地文件，碰巧地雷位于 /www/pages/

现在定义 LoadStart 函数，以便在页面开始加载时 LoadStart() 将触发

```
//I use match(/[^/]+$/g) because I find that matching the file name is just easier than the path.
// This code is place in in YourMainJs.js
fileName = event.url.match(/[^/]+$/g);
if(fileName[0] == "closeInAppBrowser.html"){
    // alert("fun load stop runs");
    ref.close();
} 
```

现在在您将要使用 window.open() 的 SomeLocalFile.html 中，放置一个链接和 js，如下所示。

```
// in SomeLocalFile.html that was called via the window.open()
<a class="close">Close This Window Like A BOSS!</a>

$('.close').click(function(){
    //We use window location cause you can't navigate to any other local file just by using an href in an <a> tag
    //We aslo use ../../ because that is the correct path usage from within InAppBrowser to another local file
    window.location = '../../pages/closeInAppBrowser.html';   
}); 
```

现在，当您单击该链接时，它将尝试导航到 closeInAppBrowser.html，这将触发 LoadStart()，它将检查 event.url 文件名是否与“closeInAppBrowser.html”匹配，如果匹配，它将关闭窗口。

我已经对此进行了测试，它可以 100% 工作。如果您还有其他问题，请告诉我

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T08:34:43.227

您想使用[ChildBrowser](https://github.com/phonegap/phonegap-plugins/tree/master/iOS/ChildBrowser)插件打开外部网页。然后你想将该`ChildBrowser.onLocationChange`属性设置为你自己的函数。然后，当此人离开远程页面时，您将收到位置更改通知，以便您可以关闭`ChildBrowser`并导航到新的本地页面。您甚至不需要触摸远程 html 页面。

因此，当用户离开远程页面时关闭浏览器：

```
cb.onLocationChange = function(loc){
    console.log("location = " + loc);
    if (loc != "http://example.com") {
        cb.close();
    }
}; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-27T09:17:59.017

其实不需要使用子浏览器插件，如果升级phonegap到2.3.0或以上，就可以使用[InAppBrowser了](http://docs.phonegap.com/en/2.3.0/cordova_inappbrowser_inappbrowser.md.html#InAppBrowser)

**样本**

```
 var ref = window.open(authorize_url, '_blank', 'location=no');
  ref.addEventListener('loadstart', function() {  me.locChanged(event.url,ref); }); 
```

# mysql - MYSQL 帮助获取最新的帖子或回复

> ID：15107395
> 
> 赞同：0
> 
> 时间：2013-02-27T08:32:40.537
> 
> 标签：mysql

我在 forum_reply 和 forum_post 下面有下表。我怎样才能得到最新的帖子或回复，这是匹配forum_category_id的最新的，比如1。我需要检索日期，作者和forum_（帖子或回复）_id，forum_category_id

```
forum_post_id   int(11) No  Primary NULL    auto_increment
    forum_category_id   int(11) No  None    NULL    
    forum_post_title    varchar(255)    No  None    NULL    
    forum_post_description  mediumtext  No  None    NULL    
    customer_id int(11) No  None    0   
    forum_post_author   varchar(64) No  None    NULL    
    forum_post_email    varchar(128)    No  None    NULL    
    is_lock tinyint(1)  No  None    0   
    is_stick    tinyint(1)  No  None    0   
    is_notify   tinyint(1)  No  None    0   
    status  tinyint(1)  No  None    0   
    view    int(8)  No  None    0   
    post_added  datetime    No  None    0000-00-00 00:00:00

post_rate   int(8)  No  None    0   
    ip  varchar(32) No  None    NULL    
    post_icon   varchar(128)    No  None    default.png 
```

和

```
 forum_reply_id  int(11) No  Primary NULL    auto_increment
    forum_post_id   int(11) No  None    NULL    
    forum_category_id   int(11) No  None    NULL    
    forum_reply_description mediumtext  No  None    NULL    
    customer_id int(11) No  None    0   
    forum_reply_author  varchar(255)    No  None    NULL    
    forum_reply_email   varchar(128)    No  None    NULL    
    is_notify   tinyint(1)  No  None    0   
    status  tinyint(1)  No  None    0   
    reply_added datetime    No  None    0000-00-00 00:00:00 
    reply_rate  int(8)  No  None    0   
    ip  varchar(32) No  None    NULL    
    reply_icon  varchar(128)    No  None    default.png 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T08:45:35.543

```
SELECT DISTINCT post_added, forum_post_author, forum_post_id, forum_category_id 
FROM forum_post WHERE forum_category_id = 1 
UNION 
SELECT DISTINCT reply_added, forum_reply_author, forum_reply_id, forum_category_id 
FROM forum_reply WHERE forum_category_id = 1 
ORDER BY post_added DESC LIMIT 1 
```

如果您尝试做我认为您正在做的事情，我认为应该这样做（但我也不是那么专业）。

更多信息在这里： [使用 ORDER BY 显示来自两个不同表的两个不同列](https://stackoverflow.com/questions/6828369/display-two-different-columns-from-two-different-tables-with-order-by)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T08:49:55.713

使用[`UNION`](http://dev.mysql.com/doc/refman/5.0/en/union.html)在一个`SELECT`语句中组合两个表应该可以帮助您：

```
SELECT
    forum_post_author,
    post_added,
    forum_post_id,
    forum_category_id,
    'post' as type
FROM
    forum_post
WHERE
    forum_category_id = 1

UNION
SELECT
    forum_reply_author,
    reply_added,
    forum_reply_id,
    forum_category_id,
    'reply' as type
FROM
    forum_reply
WHERE
    forum_category_id = 1

ORDER BY
    post_added DESC
LIMIT 1 
```

[SQL小提琴](http://sqlfiddle.com/#!2/87d3f/1/0)

# c - 反向位查找表（8位）生成背后的算法

> ID：15107398
> 
> 赞同：10
> 
> 时间：2013-02-27T08:32:49.200
> 
> 标签：c, algorithm, bit-manipulation, c-preprocessor, lookup-tables

我在这里找到了查找表[。](http://graphics.stanford.edu/~seander/bithacks.html#BitReverseObvious)该表生成为 8 位的反向位表。

我不知道它为什么起作用。请解释其背后的理论。谢谢

```
static const unsigned char BitReverseTable256[256] = 
{
 #   define R2(n)     n,     n + 2*64,     n + 1*64,     n + 3*64
 #   define R4(n) R2(n), R2(n + 2*16), R2(n + 1*16), R2(n + 3*16)
 #   define R6(n) R4(n), R4(n + 2*4 ), R4(n + 1*4 ), R4(n + 3*4 )
     R6(0), R6(2), R6(1), R6(3)
}; 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-02-27T09:07:32.180

首先发表评论：这种事情通常只在[IOCCC](https://fr.wikipedia.org/wiki/International_Obfuscated_C_Code_Contest)中完成。像这样的代码不应该在生产环境中使用，因为它是**不明显的**。我之所以提到这一点是为了消除这样的错误印象，即这具有任何性能或空间优势，编译后的代码将包含与将 256 个数字直接写入数组时相同的（数量）字节。

好的，现在看看它是如何工作的。它当然是递归地工作的，在顶层 R6 定义两个位，然后在下一个定义两个位......但是细节如何？行：

你得到的第一个线索是有趣的 0->2->1->3 序列。你应该问自己“*为什么？* ”。这是构建所需的构建块。二进制中的数字 0 1 2 3 是`00 01 10 11`，如果将每个数字反转：`00 10 01 11`即 0 2 1 3！

现在让我们看看我们希望表格做什么：它应该变成这样：

```
00000000 10000000 01000000 11000000 
00100000 10100000 01100000 11100000 
00010000 10010000 01010000 11010000
00110000 10110000 01110000 11110000 ... 
```

因为您希望它将索引 0 映射到 0，索引 00000001 到 10000000 等等。

请注意，每个数字的最重要（最左边）2 位：`00 10 01 11`对于每一行！

现在请注意，每个数字的第二个最重要的 2 位以相同的方式增加（00 10 01 11），但对于“列”。

我选择将数组排序为长度为 4 的行的原因是，我们发现一次写入 2 位，2 位可以创建 4 个模式。

`00 10 01 11`如果您然后继续观察表格的剩余数字（总共 256 个条目），您将看到如果您在 16 列中对表格进行排序，则可以发现第 3 2 位具有序列，而在按列排序时可以找到最后 2 位64 个。

现在我含蓄地告诉你原始宏扩展中的数字 16 和 64 是从哪里来的。

这就是细节，概括地说：递归的最高级别生成最低有效 2 位，中间两级执行它们的操作，最低级别生成最高有效 2 位。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-04-26T12:22:02.980

如果您正在使用 Python 并且碰巧在这里结束，这就是查找表的样子。尽管如此，[Bernd Elkemann 的](https://stackoverflow.com/users/618598/bernd-elkemann) [解释](https://stackoverflow.com/a/15108022/7695722)仍然成立。

```
# Generating the REVERSE_BIT_LUT while pre-processing
# LUT is shorthand for lookuptable
def R2(n, REVERSE_BIT_LUT):
    REVERSE_BIT_LUT.extend([n, n + 2 * 64, n + 1 * 64, n + 3 * 64])

def R4(n, REVERSE_BIT_LUT):
    return (
        R2(n, REVERSE_BIT_LUT),
        R2(n + 2 * 16, REVERSE_BIT_LUT),
        R2(n + 1 * 16, REVERSE_BIT_LUT),
        R2(n + 3 * 16, REVERSE_BIT_LUT),
    )

def R6(n, REVERSE_BIT_LUT):
    return (
        R4(n, REVERSE_BIT_LUT),
        R4(n + 2 * 4, REVERSE_BIT_LUT),
        R4(n + 1 * 4, REVERSE_BIT_LUT),
        R4(n + 3 * 4, REVERSE_BIT_LUT),
    )

def LOOK_UP(REVERSE_BIT_LUT):
    return (
        R6(0, REVERSE_BIT_LUT),
        R6(2, REVERSE_BIT_LUT),
        R6(1, REVERSE_BIT_LUT),
        R6(3, REVERSE_BIT_LUT),
    )

# LOOK_UP is the function to generate the REVERSE_BIT_LUT
REVERSE_BIT_LUT = list()
LOOK_UP(REVERSE_BIT_LUT) 
```

我正在努力在[此处提供](https://github.com/ianbrayoni/bithacks)[Sean](https://graphics.stanford.edu/~seander/bithacks.html)在 Python中的小技巧的代码片段。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-12-05T20:58:31.757

反向位表只是可能的离线生成常量之一。人们通过使用展开宏找到一种算法来定义它。不可能为另一个常数找到这样的算法。所以无论如何你都必须维护一些发电机基础设施。

```
#include <stdbool.h>
#include <stdint.h>
#include <stdio.h>
#include <stdlib.h>

#define BYTES_PER_LINE 16
#define BYTES_GLUE ", "
#define LINE_PREFIX "  "
#define LINE_TERMINATOR ",\n"

#define PRINT(string) fwrite(string, 1, sizeof(string), stdout)

static inline void print_reversed_byte(uint8_t byte) {
  uint8_t reversed_byte = 0;

  for (uint8_t bit_index = 0; bit_index < 8; bit_index++) {
    uint8_t bit_value = (byte >> bit_index) & 1;
    reversed_byte |= bit_value << (7 - bit_index);
  }

  printf("0x%02x", reversed_byte);
}

int main() {
  uint8_t index = 0;

  while (true) {
    if (index != 0) {
      if (index % BYTES_PER_LINE == 0) {
        PRINT(LINE_TERMINATOR);
        PRINT(LINE_PREFIX);
      } else {
        PRINT(BYTES_GLUE);
      }
    }

    print_reversed_byte(index);

    if (index == 255) {
      break;
    }
    index++;
  }

  return 0;
} 
```

`generated_constants.c.in`在cmake中使用它：

```
const uint8_t REVERSE_BITS_TABLE[256] = {
  @CMAKE_REVERSE_BITS_TABLE@
}; 
```

您将收到漂亮紧凑的桌子。

例如，请参阅它在[LZWS](https://github.com/andrew-aladev/lzws/tree/master/cmake/generators)中的用法。

# java - 使用当前年份的 JPA/Hibernate 主键值序列

> ID：15107399
> 
> 赞同：0
> 
> 时间：2013-02-27T08:32:49.780
> 
> 标签：java, spring, hibernate, jpa-2.0

我正在使用 Spring 3 和 Hibernate 4

我在实体类中有以下内容

```
 @Id
    @Column(name = "PROJECT_NO")
    private String projectNumber; 
```

当我将值插入数据库表时，是否可以`PROJECT_NO`按以下格式插入作为主键的值

`20131`其中 2013 是当前年份，下一个字符应递增 1。即下一个要插入的值应该是`20132`

如何使用 JPA/Hibernate 实现这一点

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-27T08:44:52.687

您必须查看[@GeneratedValue](http://docs.oracle.com/javaee/5/api/javax/persistence/GeneratedValue.html)和[@GenericGenerator](http://docs.jboss.org/hibernate/orm/3.5/api/org/hibernate/annotations/GenericGenerator.html)注释。

产生价值的可能性有多种。在您的情况下，我相信您需要创建如下内容：

```
@Id
@GeneratedValue(strategy = GenerationType.AUTO, generator = "year_gen")
@GenericGenerator(name = "year_gen", strategy = "com.example.generator.CustomGenerator")
@Column(name = "PROJECT_NO")
private String projectNumber; 
```

并且`CustomGenerator`应该实施`org.hibernate.id.IdentifierGenerator`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T08:42:51.877

将 JPA 注解放在 getter 上，并使用 getter 方法按您的喜好格式化数据怎么样？

```
@Entity
public class MyClass {
 private String projectNumber;

 @Column(name = "PROJECT_NO")
 public String getProjectNumber(){
  return doSomeFormatting(this.projectNumber);
 }
} 
```

像这样的东西应该工作。

# jsf - 如何在验证器中的 primefaces 2.2 中获取 DataTable 选择（复选框）

> ID：15107402
> 
> 赞同：1
> 
> 时间：2013-02-27T08:32:57.260
> 
> 标签：jsf, jsf-2, primefaces

在 Primefaces 2.2 中，如果要获取 DataTable 选择，则需要在没有验证失败或转换器失败的情况下提交数据表。

如下所示：

```
 <p:dataTable update="outputPanel" id="dataTable" var="car" 
                value="#{tableBean.cars}" selection="#{tableBean.selectedCars}">

                <p:column selectionMode="multiple" />
                <p:column style="width:200px" id="Model">
                    <f:facet name="header">
                        Model
                   </f:facet>
                    <h:outputText value="#{car.model}" />
                    <h:inputText value="#{car.model}" >
                        <f:attribute name="datatableClientId" value="form:dataTable" />
                        <f:attribute name="datatable" value="#{dataTableBinding}" />
                        <f:validator validatorId="dataTableRequiredValidator" />
                    </h:inputText>
                </p:column>

            </p:dataTable> 
```

当validator失效时，如何获取validator中的selectedCars？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T08:42:56.593

我查看了 Primefaces 2.2 源代码，解码数据表时将使用 DataHelper 类来解码选择。所以我复制代码来编写一个 util 类，如下所示：

```
//when the validator in a row, the datatable clientId will be wrong append the row number. so please specify the table clientId.
    public Object getDataTableSelection(FacesContext context, DataTable table, String dataTableclientId) {
        String clientId = dataTableclientId != null ? dataTableclientId : table.getClientId(context);
        Map<String, String> params = context.getExternalContext().getRequestParameterMap();

        String selection = params.get(clientId + "_selection");
        Object data = null;
        if (table.isSingleSelectionMode()) {
            data = decodeSingleSelection(table, selection);
        } else {
            data = decodeMultipleSelection(table, selection);
        }
        table.setRowIndex(-1); // clean
        return data;
    }

    private Object decodeSingleSelection(DataTable table, String selection) {
        Object data = null;
        if (isValueBlank(selection)) {
            table.setSelection(null);
            table.setEmptySelected(true);

        } else {
            int selectedRowIndex = Integer.parseInt(selection);
            int first = table.getFirst();
            int rows = table.getRows();
            int last = rows == 0 ? table.getRowCount() : rows;

            if (first <= selectedRowIndex && (first + last) > selectedRowIndex) {
                table.setRowIndex(selectedRowIndex);
                data = table.getRowData();
                table.setSelection(table.getRowData());
            }
        }
        return data;
    }

    private boolean isValueBlank(String value) {
        if (value == null)
            return true;

        return value.trim().equals("");
    }

    private Object decodeMultipleSelection(DataTable table, String selection) {
        Class<?> clazz =
            table.getValueExpression("selection").getType(FacesContext.getCurrentInstance().getELContext());
        Object data = null;
        if (isValueBlank(selection)) {
            data = Array.newInstance(clazz.getComponentType(), 0);
            table.setSelection(data);

        } else {
            if (!table.isCellSelection()) {
                String[] rowSelectValues = selection.split(",");
                data = Array.newInstance(clazz.getComponentType(), rowSelectValues.length);

                for (int i = 0; i < rowSelectValues.length; i++) {
                    table.setRowIndex(Integer.parseInt(rowSelectValues[i]));

                    Array.set(data, i, table.getRowData());
                }
                table.setSelection(data);
            }
        }
        return data;
    } 
```

所以你可以使用该`getDataTableSelection(current facescontext instance, datatable instance, table clientId)`方法来获取选择。它将返回一个数组对象（永远不会为空）。

注意：当validator在一行时，datatable的clientId会错误的追加行号。所以请指定表clientId。

# android - for循环中的整数值不会改变android

> ID：15107405
> 
> 赞同：0
> 
> 时间：2013-02-27T08:33:18.750
> 
> 标签：android, eclipse, google-maps, for-loop, google-places-api

我正在开发一个使用**Google Places API的****Android 应用程序**。一旦我得到所有地点的结果，我想根据算法对其进行排序。也就是说，如果算法> = 0，则位置结果只会被放入。但现在的问题是，当我运行它时，for循环中的算法结果在循环期间没有改变。**`Hash Map`**

 **我的算法是： `balance = user_hour-visi-duration`. `balance = 240-60-20 = 160`

假设余额为 160，它将保持 160 直到 for 循环结束。我希望每次循环时，余额的值都会减少直到负值。仅供参考，平衡变量不是局部变量。

有谁知道如何解决这个问题？这是代码的一部分。

```
// loop through each place
                        for (Place p : nearPlaces.results) {
                            balance = user_hour - duration - visit;
                            HashMap<String, String> map = new HashMap<String, String>();

                            //////////////////////////////////////////////////////////////////
                            googlePlaces = new GooglePlaces();
                            try {
                                placeDetails = googlePlaces.getPlaceDetails(p.reference);

                            } catch (Exception e) {
                                e.printStackTrace();
                            }

                            if(placeDetails != null){

                                String statuss = placeDetails.status;

                                // check place deatils status
                                // Check for all possible status
                                if(statuss.equals("OK")){

                                        lat = gps.getLatitude();
                                        lang = gps.getLongitude();
                                        double endlat = placeDetails.result.geometry.location.lat;
                                        double endlong = placeDetails.result.geometry.location.lng;

                                        Location locationA = new Location("point A");
                                        locationA.setLatitude(lat);
                                        locationA.setLongitude(lang);
                                        Location locationB = new Location("point B");
                                        locationB.setLatitude(endlat);
                                        locationB.setLongitude(endlong);
                                        double distance = locationA.distanceTo(locationB)/1000;
                                        Double dist = distance;
                                        Integer dist2 = dist.intValue();
                                        //p.distance = String.valueOf(dist2);
                                        p.distance = String.valueOf(balance);
                                        dist3 = p.distance;

                                }
                                else if(status.equals("ZERO_RESULTS")){
                                    alert.showAlertDialog(MainActivity.this, "Near Places",
                                            "Sorry no place found.",
                                            false);
                                }
                                }

                                ///////////////////////////////////////////////////////////////

                            if (balance > 0){

                                // Place reference won't display in listview - it will be hidden
                                // Place reference is used to get "place full details"
                                map.put(KEY_REFERENCE, p.reference);
                                // Place name
                                map.put(KEY_NAME, p.name);
                                map.put(KEY_DISTANCE, p.distance);
                                // adding HashMap to ArrayList
                                placesListItems.add(map);

                                }

                            else {
                                //

                            }

                        }//end for loop 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T08:43:09.257

你到底想在这里做什么？

你`balance = user_hour - duration - visit;`在 for 循环之后的第一行。我看不到`user_hour`, `duration`or`visit`的声明位置，但我假设它在循环之外。`Place`这意味着它对于每个in将始终是相同的值`nearPlaces.results`。如果此代码确实是您想要的，那么您不妨在循环之前声明它，因为您毫无意义地为每个`Place`.

除了将其打印出来或为其设置另一个值之外，您也从不做任何事情`balance`，因此很难计算出您期望发生的事情。**

# android - 如何避免画布中的内存泄漏？

> ID：15107407
> 
> 赞同：0
> 
> 时间：2013-02-27T08:33:37.493
> 
> 标签：android

我从[Romain Guy](http://www.curious-creature.org/2008/12/18/avoid-memory-leaks-on-android/)那里读到了关于避免 android 中的内存泄漏的信息。我明白我必须

用于`getApplicationContext()`避免内存泄漏。无论如何，我的代码如下：

`MainMenuActivity.java`

```
protected void onCreate(Bundle savedInstanceState) {
super.onCreate(savedInstanceState);
canvasMenu = new CanvasMainMenu(this);
setContentView(canvasMenu);
} 
```

`CanvasMainMenu.java`

```
public class CanvasMainMenu extends View {
       private TextView textChallenge;
       public CanvasMainMenu(Context context) {
              super(context);
                      textChallenge = null;
                      textChallenge = new TextView(context);
                      textChallenge.setTypeface(fontJoan);
                      textChallenge.setTextColor(Color.WHITE);
                      textChallenge.setText("99");
                      textChallenge.measure((int)Define.getScreenWidth(), (int)Define.getScreenHeight());
                      textChallenge.layout(0, 0, 200, 200);
                      textChallenge.setTextSize(TypedValue.COMPLEX_UNIT_PX, 20);
                      textChallenge.setDrawingCacheEnabled(true);
                      textChallenge.buildDrawingCache();
       }
} 
```

我的问题是，如果我的代码看起来像这样，我该如何避免内存泄漏。

我必须`static TextView`在文件 MainMenu.java 中创建吗？

如果我理解错误，请有人解释我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T08:39:40.280

为什么你会认为这段代码会泄漏内存？唯一奇怪的是`TextView`在`textChallenge`你的`CanvasMainMenu`. 你为什么要创造这个？它在你的课堂上似乎没有任何用处。

为了解决您的具体问题：通常，创建`static`视图引用是内存泄漏的来源，而不是避免它们的方法。除非您绝对必须（极其罕见的情况）并且您知道自己在做什么，否则不要这样做。

对于您的代码，我也看不到使用应用程序上下文将如何帮助解决内存泄漏。这通常仅在您需要能够在活动被破坏和重新创建后（例如在设备重新定向之后）继续存在的上下文引用时才有用。

# android - Android：从代码中计算以像素为单位的视图大小

> ID：15107415
> 
> 赞同：0
> 
> 时间：2013-02-27T08:33:56.780
> 
> 标签：android, size, pixels

我有一个`ListView`行有一个`TextView`。在我的代码中，我需要知道`height`每一行的值才能动态计算列表大小。这是每行中使用的布局：

```
<TextView xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/title_subgroup"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:gravity="center"
    android:padding="5dp"
    android:textSize="18sp"
    android:textStyle="bold" /> 
```

这是我用来获取像素大小的代码：

```
 float sizeInDip = 10f;
    float sizeInSp = 18f;
    ROW_HEIGHT = (int) (TypedValue.applyDimension(TypedValue.COMPLEX_UNIT_DIP, sizeInDip, getResources().getDisplayMetrics())
            + context.getResources().getDisplayMetrics().scaledDensity * sizeInSp); 
```

我得到的结果低于实际尺寸。有了这段代码，应该是这样`ROW_HEIGHT`的。为什么会有这样的区别？`36``45`

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T08:40:01.647

`myView.getParent()`您可以通过调用和 with来获取视图父级，`getWidth()`并`getHeight()`获得所需的像素。该文档为该主题提供了更多信息 [http://developer.android.com/reference/android/view/View.html](http://developer.android.com/reference/android/view/View.html)

# javascript - 插入Node后如何提升DOM范围？

> ID：15107418
> 
> 赞同：0
> 
> 时间：2013-02-27T08:34:01.497
> 
> 标签：javascript, dom

我插入一个节点，当插入另一个节点时，它会替换先前插入的节点。

我想我需要将范围放在第一个插入的节点之后，但是如何？

我定义了一个函数：

```
function EmoticonsMenu(jquery_element){
  var e = jquery_element;
  var top  = e.offset().top;
  var left = e.offset().left;
  var onIconClick_callback;

  this.onIconClick = function(eventObject){
    var html = $(eventObject.target).parent().html().replace(/\n\s+|\s+\n/g, '');
    onIconClick_callback(html);
    };

  e.blur(function(){
    e.css({visibility:'hidden'});
    e.hide();
    });

  this.attach_to = function(element, callback){
    onIconClick_callback = callback;
    var newTop  = element.offset().top  - top  - 10 - e.height();
    var newLeft = element.offset().left - left + 10;
    e.css({top:newTop, left:newLeft});
    e.css({visibility:'visible'});
    e.focus();
    };
}; 
```

并且有一个地方我将 Emoticon 绑定到我的 nicEditor 自定义按钮

```
 nicEditorExampleButton = nicEditorButton.extend({   
    mouseClick : function(eventObject) {
    // get nicEdit selected instance - se
    var se = this.ne.selectedInstance;

    var paste_icon_html = function(html){
      // create a DOM node from the string
      //var html = '<img src="/assets/emoticons/ac.gif">admin is here!</img>';
      var div = document.createElement('div');
      div.innerHTML = html;
      var node = div.childNodes[0];

      // get selection if any, insert html as a Node
      var range = se.getRng();
      range.deleteContents();
      range.insertNode(node.cloneNode(true));
      //range.setStart(node,0);
      //range.setEnd(node,0);
      };

    emoticonsMenu.attach_to($(this.button), paste_icon_html);
    }
  });
  nicEditors.registerPlugin(nicPlugin,nicExampleOptions); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T09:12:57.733

如果您不想替换任何内容，请删除对[`deleteContents`](https://developer.mozilla.org/en-US/docs/DOM/range.deleteContents).

此外，您可能会遇到这样的问题，即在重复调用此代码段时，您总是引用相同的`nodes[0]`，并且它只能存在一次 - 要多次插入它，您需要[克隆](https://developer.mozilla.org/en-US/docs/DOM/Node.cloneNode)它：

```
range.insertNode(nodes[0].cloneNode(true)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T09:12:17.933

这是需要更改的代码。代替：

```
 range.insertNode(node.cloneNode(true));
  //range.setStart(node,0);
  //range.setEnd(node,0);
  }; 
```

应该

```
 range.insertNode(node);
  range.setEndAfter(node);    //++
  range.setStartAfter(node);  //++
  }; 
```

# javascript - 在基本 javascript 中悬停和切换

> ID：15107419
> 
> 赞同：1
> 
> 时间：2013-02-27T08:34:01.703
> 
> 标签：javascript, hover, toggle

我有以下 JavaScript 代码用于使用 JQuery 的简单悬停：

```
$('.product_img_link').hover(function(){
  $(this).prev('.hoverProduct').show();
},function(){
  $(this).prev('.hoverProduct').hide();
}); 
```

`div`（使用 class找到前一个`hoverProduct`，并在悬停时显示它并在鼠标移出时隐藏它）。

如何在没有 JQuery 的情况下仅使用纯 JavaScript 编写此代码段？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-27T08:39:56.770

像这样的东西：

```
var links = document.querySelectorAll('.product_img_link');

[].forEach.call(links, function(link) {
  var prev = link.previousSibling;
  link.addEventListener('mouseover', function() {
    prev.style.display == 'block';
  });
  link.addEventListener('mouseout', function() {
    prev.style.display == 'none';
  });
}); 
```

在带有选择器的 jQuery中，**只有当**它与选择器匹配时才会`prev`获取前一个元素。如果您想在普通 JS 中具有相同的行为，您可以像这样进行测试：

 **```
...
var prev = link.previousSibling;
var hasClass = /\bhoverProduct\b/.test(prev.className);

if (hasClass) {
  // events
}
... 
```**

# php - 如何使用 PHP for 循环以下列方式打印字符串？

> ID：15107424
> 
> 赞同：-5
> 
> 时间：2013-02-27T08:34:09.420
> 
> 标签：php, loops, for-loop

我想知道，我们如何以这种格式在 PHP 中使用 For 循环打印数据。

```
XXXXX
XXXX
XXX
XX
X 
```

我是 PHP 的初学者，无法为此编写代码。

谢谢

山姆

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T08:37:59.423

我不知道你在这里要求什么，你的问题真的不清楚，但如果你想以这种方式打印输出，这样的事情可能会有所帮助，但又一次。我不知道你在这里想要什么。

正如其他人所说，你应该谷歌，因为我想这是一个家庭作业。

```
$count = 5;
for($i = $count; $i >0 ; $i--)
{
     for($j = 1; $j <= $i; $j++)
     {
           echo "X";
     }
     echo "</br>"; 

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T08:41:38.197

```
<?php
$i = 5;
while($i > 0){
    echo str_pad('', $i, 'X') . '<br>';
    $i--;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-27T08:42:06.810

你可以通过使用循环来做到这一点

```
$n = 5;
for($i=$n;$i>0;$i--)
  {
   for($j=1;$j<=$i;$j++)
   {
    echo "*";
   }
  echo"<br>";
} 
```

# cocos2d-x - CocosBuilder 中的“Doc root var”和“Owner var”有什么区别

> ID：15107426
> 
> 赞同：3
> 
> 时间：2013-02-27T08:34:11.120
> 
> 标签：cocos2d-x, cocosbuilder

在 CocosBuilder 中，有一个**Code Connections**部分。在第二行，它有三个选项：**Don't Assign**、**Doc root var**和**Owner var**。

有时，我在选择**Owner var时遇到错误，但在我将其更改为****Doc root var**后它工作正常。

我google了很多，但找不到满意的答案。

有谁可以清楚地解释差异？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-06T14:04:03.563

**不要分配**仅仅意味着您没有使用**代码连接**。

**Doc root var**表示您正在连接自定义 cocos2d 类。这会将文档（CCB 阶段/文件）中的对象粘合/连接到您的代码。此选项很方便，但您必须确保提供了根节点的控制器对象。

> 有时，您需要能够从 ccb 文件的根节点之外的另一个对象访问成员变量并获取回调。为此，您需要将所有者传递给 CCBReader。

如[与 cocos2d-x 连接中](https://github.com/cocos2d/CocosBuilder/blob/develop/Documentation/4c.%20Connecting%20with%20cocos2d-x.md)所述。

**Owner var**允许您连接到根节点以外的变量，从而为您提供[更大的灵活性。](https://github.com/cocos2d/CocosBuilder/blob/develop/Documentation/4c.%20Connecting%20with%20cocos2d-x.md#passing-an-owner-variable)您可以将其粘贴到您选择的任何变量上。

您收到的错误很可能是由于提供的名称不可用（变量不存在）引起的。请注意，将属性设置为**Doc root var**或**Owner var**并将该字段留空将导致此错误。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-05T14:24:11.043

[链接成员变量](https://github.com/cocos2d/CocosBuilder/blob/master/Documentation/4a.%20Connecting%20with%20Cocos2d%20JS.md#linking-member-variables)时，**Doc root var**将在根节点的控制器对象中添加一个成员。您可以通过`MainScene.myVar`假设您的 JS Controller 是 MainScene 来访问它。这是由场景根层 JS Controller 属性定义的。

或者，您可以通过 JS 控制器连接对不直接绑定到场景的自定义对象执行相同的操作。为此，您将使用**Owner var**属性。

**不分配**是默认设置，不执行任何操作。

从本质上讲，这些功能允许您轻松地从代码中引用那些 CCB 对象。

尝试使用[CocosBuilder JS 示例游戏](http://cocosbuilder.com/?page_id=11)可能会有所帮助。如果您还没有阅读有关[如何连接 cocos2d-x](https://github.com/cocos2d/CocosBuilder/blob/develop/Documentation/4c.%20Connecting%20with%20cocos2d-x.md)的文档，可能对您也有用。

# android - android.mk 链接错误，当链接到已经链接到共享库的静态库时

> ID：15107435
> 
> 赞同：0
> 
> 时间：2013-02-27T08:34:53.280
> 
> 标签：android, android-ndk, compiler-errors, shared-libraries, static-libraries

假设A是共享库，B是静态库，B链接到A。现在C（也是共享库）需要链接到B。链接错误是A中的函数（由B调用）找不到。下面是我的 android.mk

```
LOCAL_PATH := $(call my-dir)

include $(CLEAR_VARS)  
LOCAL_MODULE    := c

LOCAL_LDLIBS := -L/$(LOCAL_PATH)/libs
LOCAL_LDLIBS += -la

#LOCAL_SHARED_LIBRARIES := a
LOCAL_STATIC_LIBRARIES := b

LOCAL_EXPORT_C_INCLUDES := $(LOCAL_PATH)/inc
LOCAL_C_INCLUDES := $(LOCAL_EXPORT_C_INCLUDES)
LOCAL_SRC_FILES := src/c.cpp    

include $(BUILD_SHARED_LIBRARY) 
```

非常感谢，卡在这里好几天了

现在好像没事了，还是不知道哪里错了。也许我没有把a和b的lib放在C的正确目录下。

# iphone - 如何从 PhoneGap 中的 Web 服务 URL 获取 JSON 响应？

> ID：15107436
> 
> 赞同：0
> 
> 时间：2013-02-27T08:35:01.377
> 
> 标签：iphone, cordova, ios4

我在使用 PhoneGap 框架的 iOS 应用程序中遇到了一个问题。我有一个网络服务 URL。我需要从 Web 服务 URL 获取 JSON 响应。我已经建立了一些代码，但它不起作用。

这是我的代码：

```
<div data-role="content" data-theme="a" style="background: Black">
    <div data-theme="a">
        <span style="font-size: x-large; color: Orange;">Secure Log In</span></div>
    <div data-theme="a">
        <div data-theme="a">
            <input type="password" placeholder="PASSWORD" id="txtPassword" style="background-color: gray;" /></div>
     <div data-theme="a" align="right">
        <a href="#" data-role="button" onclick="callWebService()" data-corners="false"
                data-theme="a" id="clcik" cursor="pointer" style="width: 150px; border-radius: 5px 5px 5px 5px"
                data-clickload="show" data-transition="slidefade"><span style="color: Green">Log In</span>
            </a>
        </div>

        function callWebService(){

            var query = 'Ocean';
            var url = 'http://66.171.142.16/Accountservice/Security/ValidateAccess?accesscode=abcd&type=1';
            alert(url);

            $.getJSON(url,function(response){
                      alert('Here!');
                      });

        }; 
```

如何从 url 获取 JSON 响应？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T08:43:49.387

我使用 .Net Web Service 来访问 Web Service，还创建了一个插件来调用 .Net Web Service。在 Java 脚本中，我曾经调用 Web 服务方法，如下所述。

**在 script.js 中**

```
 $(".CategoryNavbar").click(function(e){
                     e.preventDefault();
                      window.plugins.webservice.GetFlights("service",function(r){printResult(r)},function(e){console.log(e)});
                     return false;  
                 });

  function printResult(fileInfo){

                var innerHtmlText=getHtml(fileInfo);  

                  $.mobile.changePage('#CategoryPage',{transition:'slide'});

                    $('#CategoryPageContent').html(innerHtmlText);

                    $("#CategoryList").listview();
                    $("#CategoryList").listview('refresh');

            }

  function getHtml(fileInfo){
                 var htmlText='<ul data-role="listview" id="CategoryList" data-theme="c" data-filter="true" data-filter-placeholder="Search">';

                 for(var index=0;index<fileInfo.Flights.length;index++){
                     htmlText=htmlText+'<li> <a href="">'+ fileInfo.Flights[index] +'</a></li>';
                     }

                 htmlText=htmlText+"</ul>";
                 return htmlText;

                 } 
```

**在插件文件中** /** * 构造函数 */ function WebService() { }

/** * @param methodn 我们想要的 webService 的方法名称 * @param successCallback 目录列出成功时调用的回调 * @param failureCallback 目录列出遇到错误时调用的回调 */

```
WebService.prototype.GetFlights = function(args, successCallback,
        failureCallback) {
    return cordova.exec(successCallback, failureCallback, 'WebService',
            'GetFlights', [ args ]);
};

if (!window.plugins) {
    window.plugins = {};
}
if (!window.plugins.webservice) {
    window.plugins.webservice = new WebService();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T09:03:03.533

嗨 Sudheer 请检查以下代码以使用 Ksoap 从 Web 服务获取响应

```
public class AndroidWebService extends Activity {

private final String NAMESPACE = "http://www.webserviceX.NET/";
private final String URL = "http://www.webservicex.net/ConvertWeight.asmx";
private final String SOAP_ACTION = "http://www.webserviceX.NET/ConvertWeight";
private final String METHOD_NAME = "ConvertWeight";

/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    SoapObject request = new SoapObject(NAMESPACE, METHOD_NAME); 

    String weight = "3700";
    String fromUnit = "Grams";
    String toUnit = "Kilograms";

    PropertyInfo weightProp =new PropertyInfo();
    weightProp.setName("Weight");
    weightProp.setValue(weight);
    weightProp.setType(double.class);
    request.addProperty(weightProp);

    PropertyInfo fromProp =new PropertyInfo();
    fromProp.setName("FromUnit");
    fromProp.setValue(fromUnit);
    fromProp.setType(String.class);
    request.addProperty(fromProp);

    PropertyInfo toProp =new PropertyInfo();
    toProp.setName("ToUnit");
    toProp.setValue(toUnit);
    toProp.setType(String.class);
    request.addProperty(toProp);

    SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(SoapEnvelope.VER11);
    envelope.dotNet = true;
    envelope.setOutputSoapObject(request);
    HttpTransportSE androidHttpTransport = new HttpTransportSE(URL);

    try {
        androidHttpTransport.call(SOAP_ACTION, envelope);
        SoapPrimitive response = (SoapPrimitive)envelope.getResponse();
        Log.i("myApp", response.toString());

        TextView tv = new TextView(this);
        tv.setText(weight+" "+fromUnit+" equal "+response.toString()+ " "+toUnit);
        setContentView(tv);

    } catch (Exception e) {
        e.printStackTrace();
    }
         }
     } 
```

这是在 jquery mobile 中使用 JSON 获取响应的示例代码，请查看下面的代码

```
$.ajax({
    cache: false,
    url: wcfServiceUrl + "Authenticate?CompanyID=" + escape(comp) + "&UserName=" + user + "&Password=" + escape(pass) + "&Auth=" + ipaddress+"",
    data: "{}",
    type: "GET",
    contentType: "application/javascript",
    dataType: "jsonp",
    beforeSend: function (XMLHttpRequest) {
        $.mobile.loadingMessageTextVisible = true;
        $.mobile.loadingMessage = "Loading Please Wait";
        $.mobile.showPageLoadingMsg();
    }, 
    complete: function (XMLHttpRequest, textStatus) {
        $.mobile.hidePageLoadingMsg();
    },
    error: function (xmlHttpRequest, status, err) {
                $.mobile.loadingMessageTextVisible = true;
                $.mobile.loadingMessage = "Web service is not responding. Try again";
                $.mobile.showPageLoadingMsg();
                var wait = setTimeout(function(){
                    $.mobile.hidePageLoadingMsg();
                },400);
    },
    error: function () {
        jAlert("list failed!",alertmessage);
    },
    success: function (list) {
        var rar = list.split(";");
        if(rar[0]=="Error")
        {
            jAlert(rar[1],alertmessage);
        }
        else if(rar[0]=="Success")
        {
            localStorage.setItem( "CompanyID", comp);
            localStorage.setItem( "Username", user);
            localStorage.setItem( "UserID", rar[1]);
            $.mobile.changePage( '#home', { transition: "pop", reverse: false } );
        }
        else if(rar[0]=="FirstLogin")
        {
            localStorage.setItem( "CompanyID", comp);
            localStorage.setItem( "Username", user);
            localStorage.setItem( "UserID", rar[1]);
            $.mobile.changePage( '#change-pass', { transition: "slide", reverse: false } );
        }
    }
}); 
```

# sql - 简单的选择技巧

> ID：15107439
> 
> 赞同：2
> 
> 时间：2013-02-27T08:35:24.963
> 
> 标签：sql, sql-server, sql-server-2008

我需要编写一个将列出所有客户端的选择，但是如果客户端的状态为 1 或 2，它应该用`*`之前的名称标记该客户端。它应该看起来像

```
 Vasya Pupkin 
* Masha Pupkina 
```

选择看起来像

```
select FirstName + ' '+ LastName, Address, DOB
from Clients 
Order By FirstName 
```

这意味着玛莎是活跃的客户。花了将近 2 个小时在互联网上搜索，但找不到任何有用的东西。因为这里提出的问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-27T08:36:58.317

```
select (case when status in (1, 2) then '* ' else '' end) + FirstName + ' '+ LastName, Address, DOB
from Clients 
Order By FirstName 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-27T08:47:24.660

您需要依靠使用该[`CASE`结构](http://technet.microsoft.com/en-us/library/ms181765%28v=sql.105%29.aspx)来检查状态字段。

[使用SQL Fiddle](http://sqlfiddle.com/#!3/7bbfb/1)上的示例数据检查此功能齐全的代码

```
SELECT (CASE
             WHEN status IN (1, 2) THEN '* '
             ELSE ''
        END) + FirstName + ' '+ LastName as Client_List
  FROM Clients
 ORDER BY FirstName 
```

数据：

```
[id]  [status]  [FirstName]  [LastName]
 1        3        Vasya       Pupkin
 2        2        Masha       Pupkina
 3        3        Sasha       Alexeivich
 4        1        Katya       Alexeivna 
```

结果：

```
CLIENT_LIST
* Katya Alexeivna
* Masha Pupkina
Sasha Alexeivich
Vasya Pupkin 
```

**编辑** 哎哟！为时已晚，muhmud 的答案是正确的

# ios - 处理自动合成的属性时如何使用 dealloc？

> ID：15107440
> 
> 赞同：2
> 
> 时间：2013-02-27T08:35:25.727
> 
> 标签：ios, objective-c, dealloc

我对iOS开发比较陌生，所以如果这是一个迟钝的问题，请原谅。我读过[这个](http://useyourloaf.com/blog/2012/08/01/property-synthesis-with-xcode-4-dot-4.html)，但仍然有点困惑。

我没有使用ARC。（是的，是的，我知道我应该，但我现在不这样做）在我的班级标题中，我有这个

```
/*-----------------------------------------------------------------------+
 | The name of the sender/receiver
 +-----------------------------------------------------------------------*/
@property (nonatomic, retain) NSString *name; 
```

我不合成这个变量，而是让编译器完成这项工作。

`dealloc`以下哪项被认为是该方法的最佳实践

**#1**释放 iVar

```
-(void) dealloc {
   [_name release];
   [super dealloc];
} 
```

**#2**释放财产

```
-(void) dealloc {
   [self.name release];
   [super dealloc];
} 
```

**#3**最后一个问题。是否习惯于在方法中设置`property`to ？IE`nil``dealloc`

```
-(void) dealloc {
   [self.name release];
   self.name = nil;
   [super dealloc];
} 
```

如果有人可以向我解释这一点，我将不胜感激。

问候！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T08:41:20.883

Jeff Lamarche 写了一篇关于在 dealloc 中释放变量的好文章：http: [//iphonedevelopment.blogspot.nl/2010/09/dealloc.html](http://iphonedevelopment.blogspot.nl/2010/09/dealloc.html)

他建议永远不要使用这种`self.`语法，因为它会在多线程环境中引起问题。

他的建议是在生产版本中使用`iVar`and 设置：`nil`

```
-(void) dealloc {
   [_name release], _name = nil;
   [super dealloc];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T08:51:18.567

方法一：

使用它是安全的。在 dealloc 方法中释放 iVar 并没有什么坏处。但是，当您将值分配给 name 时，它​​必须是通过 property 或通过 alloc 方法（而不是工厂方法）。

方法二：

在发布时，不要使用属性。

方法3：

不要使用属性，但您肯定可以将 nil 分配给 ivar。

# iphone - Corona SDK：场景推送/弹出

> ID：15107444
> 
> 赞同：0
> 
> 时间：2013-02-27T08:35:43.370
> 
> 标签：iphone, coronasdk

我对电晕场景有点困惑。

当点击按钮时，我想让我的主菜单（我不想释放或清除）推到一个水平。

到目前为止，我可以通过`storyboard.gotoScene("level1")`

但是，一旦 level1 完成，我想回到 mainMenu 场景（我使用我保留其位置的滚动视图）。我不想重新创建 mainMenu。

我到底应该怎么做？gotoScene 会自动释放我现有的 mainMenu 吗？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T16:34:32.863

您只需使用`gotoScene("")`

请记住，如果需要，Corona 会自动清除您的场景。

> 默认情况下，每当操作系统收到内存不足警告时，故事板将自动清除（例如，删除场景的显示组，同时将实际模块留在内存中）最近最少使用的场景。
> 
> 如果您想手动管理场景的清除并禁用此自动清除功能，您可以将 storyboard.disableAutoPurge 设置为 true。默认值为假。

要关闭自动清除：

```
-- turns "off" auto-purge on low memory functionality
storyboard.disableAutoPurge = true 
```

这将阻止 Corona 自动删除您的场景，这意味着您将负责此任务。

# c# - 在 MessageBox 或 WriteLine 中创建字符串

> ID：15107448
> 
> 赞同：-3
> 
> 时间：2013-02-27T08:35:57.897
> 
> 标签：c#, string, messagebox

我有一个问题，我现在真的不需要它来申请，但我只是好奇。

有没有办法创建一个字符串并将其填充在 WriteLine 或 Messagebox.Show 的括号之间？

我认为代码应该看起来像这样：

```
MessageBox.Show(String s = string.Format("Hello World")); 
```

那不是正确的代码，我唯一的**问题**是：这样的事情可能吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-27T08:37:16.463

您可以在这样的调用中声明一个字符串。但是，您可以分配它。

```
string s = string.Empty;
MessageBox.Show(s = string.Format("Hello World")); 
```

如果您可以在函数调用中声明字符串，则它不会在其他地方可见。因此，在语言中拥有该功能真的没有任何意义。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T08:48:17.443

Evelie's answer的替代方法可以让您将所有内容写在一行中，可以定义一个返回字符串的辅助方法：

```
public static string ShowMsg(string msg) {
    MessageBox.Show(msg);
    return msg;
} 
```

你的代码会变成：

```
string s = ShowMsg("Hello World"); 
```

或者

```
string s = ShowMsg(string.Format("Now is {0}.", DateTime.Now)); 
```

您还可以在辅助方法中执行格式化：

```
public static string ShowMsg(string format, params object[] args) {
    string mgs = string.Format(format, args);
    MessageBox.Show(msg);
    return msg;
} 
```

并将其用作：

```
string s = ShowMsg("Now is {0}.", DateTime.Now); 
```

# php - 通过ajax上传文件到php

> ID：15107453
> 
> 赞同：0
> 
> 时间：2013-02-27T08:36:42.187
> 
> 标签：php, jquery, file-upload

我的表单使用 javascript 警报与用户交流，因为这是我工作的公司的首选方法（与不断重定向到 php 处理程序文件和从 php 处理程序文件相反）。

因此，我通过 jquery 中的一些简单验证传递所有表单数据，并通过 ajax 将其发送到 php 处理程序。这是我如何做的基本情况......

```
var first_name = $(sender + ' #first_name');
var email = $(sender + ' #email');
var tel = $(sender + ' #telephone');
var comments = $(sender + ' #comments');

$.ajax({
    type: 'POST',
    url: 'sendmail.php',
    data: { first_name: first_name.val(),
        email: email.val(),
        telephone: tel.val(),
        comments: comments.val(),
        success: function clearFields() {
            first_name.val('');
            email.val('');
            tel.val('');
            comments.val('');
            alert('Thank you. We will contact you as soon as possible.');
        }
    }
}); 
```

将文件输入字段添加到如下这样的表单后，我在上传时遇到了问题。虽然电子邮件发送正确，但我认为 ajax 没有发送任何可用数据以上传到 php 文件

```
<input type="file" name="upload" id="upload" />

<script>

var upload = $("#upload");
$.ajax({
    type: 'POST',
    url: 'sendmail.php',
    data: { first_name: first_name.val(),
        email: email.val(),
        telephone: tel.val(),
        upload: upload.val(),
        comments: comments.val(),
        success: function clearFields() {
            first_name.val('');
            email.val('');
            tel.val('');
            upload.val('');
            comments.val('');
            alert('Thank you. We will contact you as soon as possible.');
        }
    }
});
</script> 
```

我为此找到了许多选项，但是我看过的所有选项对我[来说](http://www.ajaxf1.com/tutorial/ajax-file-upload-tutorial.html)似乎都是“骇人听闻的”。

有没有更简单的方法来做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T08:39:28.780

Ajax 不支持`file`上传操作。但是有很多插件使用 iframe 来异步上传文件。[您可以在此处](http://www.ajaxf1.com/tutorial/ajax-file-upload-tutorial.html)阅读有关此技术的更多信息。

少数几个支持表单上传的jQuery插件是
1\. [jQuery表单](http://malsup.com/jquery/form/)
2\. [jQuery-File-Upload](https://github.com/blueimp/jQuery-File-Upload)

在许多问答网站中都有很多关于此的问题答案，比如[这个](https://stackoverflow.com/questions/2320069/jquery-ajax-file-upload)。

[此处](https://stackoverflow.com/questions/166221/how-can-i-upload-files-asynchronously-with-jquery)讨论了使用 FormData的另一种使用 html 5 的解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T08:45:56.210

您必须通过 IFrame 执行此操作

所以你创建了一个隐藏的 iframe

```
<iframe id="upload_target" name="upload_target" style="display: none;" src="#"></iframe>
<!-- note the src="#" --> 
```

然后你创建一个带有一些按钮和你希望拥有的所有字段的表单

```
<form action="path/to/uploadscript.php" method="POST" enctype="multipart/form-data" target="upload_target">
<!--target will tell the browser to run it in the iFrame with name="upload_target" --> 
```

然后在 uploadscript.php 中，您可以使用所有表单值，就好像它们是常规 $_POST 值一样：

```
<?php upload_file($_FILES['file'], $_POST['name'], $_POST['whatever']); ?> 
```

这几乎与使用 AJAX 的感觉相同。

# javascript - HTML5 Audio在IOS中播放两种声音

> ID：15107457
> 
> 赞同：0
> 
> 时间：2013-02-27T08:36:54.027
> 
> 标签：javascript, html, html5-audio

我想在 ios 中播放 2 个声音，由于无法完成，我定义了 2 个音频对象。

我开始播放第一个声音，当想要播放第二个时，我暂停第一个并等到第二个结束，然后我从它到达的点继续播放第一个。

如果我删除警报（“测试”），您可以检查以下代码；第一个音频从零开始播放，因此当前时间不起作用！

请帮助。谢谢，

```
var PlayedTime = 0; ; //in seconds
var AudioObj;       
var audioType = '.mp3';
var isResume = false;
$(document).ready(function () {

    if (!!AudioSound.canPlayType('audio/ogg') === true) {
        audioType = '.ogg' //For firefox and others who do not support .mp3
    }

    AudioObj = document.getElementById('AudioSound');

    document.getElementById('AudioSound').addEventListener('ended', function () {                
        resume();
    });
});
function play1() {
    AudioObj.src = "Images/Sound1" + audioType;
    AudioObj.load();           
}
function play2() {
    PlayedTime = AudioObj.currentTime;  

    AudioObj.pause();
    AudioObj.src = "Images/Sound2" + audioType;
    AudioObj.load();         
    AudioObj.play();
}

function resume() {            
    isResume = true;
    AudioObj.pause();
    AudioObj.src = "Images/Sound1" + audioType;
    AudioObj.load();            
}

function JumpAudio() {
    AudioObj.currentTime = 36;
}
function DataLoadedtoPlay() {
    AudioObj.play();
    if (isResume) {
        isResume = false;
        try {
            alert("test");
            AudioObj.currentTime = PlayedTime;
        }
        catch (e) {
            alert("catch");
        }
    }
}

<div id="containerAud">
    <audio id="AudioSound" onloadeddata="DataLoadedtoPlay()"></audio>
</div>

<input type = "button" onclick="play1()" value="click1"/>
<input type = "button" onclick="play2()" value="click2" />
<input type = "button" onclick="JumpAudio()" value="JumpAudio" />    
</div> 
```

# java - 动态消息传递与延迟设计问题

> ID：15107458
> 
> 赞同：0
> 
> 时间：2013-02-27T08:36:57.833
> 
> 标签：java, performance, jakarta-ee, architecture, jms

我想从您的经验中了解您对我的设计的看法。

我正在设计一个具有非常关键部分的系统：

我有组件 A、B、C（在同一个 JVM 上）需要相互“交谈”。

我可以有两种方法这样做：

1.  方法调用方式（各自持有对方实例（注入、对象实例等）

2.  消息传递方式（主题/队列）

我知道有一个中间件混乱系统（选项2）的缺点。

但：

我说的是**延迟**考虑。我需要让这些消息以低延迟到达目标（谈论毫秒延迟）。

我想选择选项2（消息传递方式）。

根据您的经验，它会在多大程度上影响我的延迟？再次延迟是这个决定的一个非常重要的因素。

（使用 Java 编程，还不确定哪个应用程序容器（Spring、Jboss ..）

谢谢，雷。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T09:19:36.690

鉴于消息传递方式是内存中的，在同一个 JVM 中。然后通常大多数延迟来自争用（使用同步等）、调度（如何唤醒线程以完成其工作等）和 GC 的组合。这些延迟来源往往使其他一切相形见绌。

可以编写不会增加太多开销的相当轻量级的消息传递系统。[Akka](http://akka.io/)就是一个很好的例子，它越来越多地进入低延迟金融系统。它在 Scala 领域更为人所知，但它确实有一个 Java API。

总之，消息传递系统可以实现亚毫秒级的需求。但是，请确保它首先满足您的需求。仅仅因为你可以，并不意味着你应该。如果你在一个小型系统上工作，那么依赖注入/控制反转可能就是你需要有一个好的设计的全部。但是，如果您将消息传递视为一种将多个 cpu 内核混合在一起的方式，或者类似的方式，那么我建议您看看 Akka。即使只是作为案例研究。

# java - Java向量数据分组——相关代码

> ID：15107471
> 
> 赞同：1
> 
> 时间：2013-02-27T08:37:22.237
> 
> 标签：java, apache-poi

我目前正在将 excel 数据导入 Java 中的向量中，但是现在我想对该数据进行分组，以便将具有相同 ID 的相似数据进行分组（在我的情况下为问题编号）。

这是我的相关导入代码：

```
 public class FileChooser extends javax.swing.JFrame {
 private String path ="";

 public FileChooser() {
 initComponents();
 }

private static Vector importExcelSheet(String fileName)
{
Vector cellVectorHolder = new Vector();
try
{
Workbook workBook = WorkbookFactory.create(new FileInputStream(fileName));
Sheet sheet = workBook.getSheetAt(0);
Iterator rowIter = sheet.rowIterator();

while(rowIter.hasNext())
{
    XSSFRow row = (XSSFRow) rowIter.next();
    Iterator cellIter = row.cellIterator();
    Vector cellStoreVector=new Vector();

    while(cellIter.hasNext())
    {
        XSSFCell cell = (XSSFCell) cellIter.next();
        cellStoreVector.addElement(cell);
    }
    cellVectorHolder.addElement(cellStoreVector);
}
}
catch (Exception e)
{
 System.out.println(e.getMessage());
}
return cellVectorHolder;
}

private void jButton1ActionPerformed(java.awt.event.ActionEvent evt) {

   JFileChooser chooser = new JFileChooser();
   chooser.setFileSelectionMode(JFileChooser.FILES_ONLY);
   int option = chooser.showOpenDialog(this); // parentComponent must a component like JFrame, JDialog...
   if (option == JFileChooser.APPROVE_OPTION) {
   File selectedFile = chooser.getSelectedFile();
   path = selectedFile.getAbsolutePath();
   jTextField1.setText(path);
  }
}

private void jButton2ActionPerformed(java.awt.event.ActionEvent evt) {

     Vector dataHolder = importExcelSheet(path);
     Enumeration e = dataHolder.elements();  // get all vector elements
     while (e.hasMoreElements()) {       // step through all vector elements
     Object obj = e.nextElement();
     System.out.println(obj);
   }// TODO add your handling code here:

} 
```

这将选择 excel 电子表格并将所有值提取到向量中并将它们打印出来，我想知道的是，我可以将向量中的相同数据分组并输出该数据而不是整个数据。

所以假设我有一个手机合同电子表格，我想选择三星 Galaxy s3 的所有合同而不是所有合同，我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T09:17:34.523

你正在遭受[对象拒绝](https://stackoverflow.com/questions/3725703/how-to-store-more-than-one-string-in-a-map/3725728#3725728):-)

当我阅读您的代码时，您有`Vector`一行包含列向量，对吗？如果是这样，其中一列是否包含手机型号？

无论如何，您可以按照以下方式做一些事情：

```
// TODO seriously consider something else than Vector to store the rows and columns!
Map<String,Vector> map = new HashMap<String,Vector>()

while(rowIter.hasNext())
{
    boolean isFirst = false;
    String phoneModel = "";
    while( cellIter.hasNext() )
    {
        XSSFCell cell = (XSSFCell) cellIter.next();
        if ( isFirst ) { phoneModel = cell.getTheTextContentOrWhatever(); isFirst = false; }
        cellStoreVector.addElement(cell);
    }
    if ( map.get( phoneModel ) == null ) { map.put( phoneModel , new Vector() ); }
    map.get( phoneModel ).add( cellStoreVector );
} 
```

然后，地图键将是您的手机，值将是该`Vector`手机的行。这不是我认为漂亮的代码，需要在错误处理方面起作用，但你可以从那里开始工作。

干杯，

# php - 在页面重新加载时保存javascript复选框状态？

> ID：15107473
> 
> 赞同：0
> 
> 时间：2013-02-27T08:37:25.403
> 
> 标签：php, javascript, html, mysql, css

我在这里有这段代码：

```
<head>
    <script language="javascript">
        var showMode = 'table-cell';
        if (document.all) showMode='block';

        function toggleVis(btn){
            btn   = document.forms['tcol'].elements[btn];
            cells = document.getElementsByName('t'+btn.name);
            mode = btn.checked ? showMode : 'none';
            for(j = 0; j < cells.length; j++) cells[j].style.display = mode;
        }
    </script>

</head>
<body>
   <h1>Andmete kustutamine</h1>
   <hr>
   <div id="mainbox">
        <form name="tcol" onsubmit="return false">
            <p id="rand">Kuvatavad tulbad:</p>

            <table class="tabl">
                <tr>
                    <td id="nobord"><input type=checkbox name="col1" onclick="toggleVis(this.name)" checked> Osakond</td>
                    <td id="nobord"><input type=checkbox name="col2" onclick="toggleVis(this.name)" checked> Soetusaasta</td>
                    <td id="nobord"><input type=checkbox name="col3" onclick="toggleVis(this.name)" checked> IT Number</td>
                    <td id="nobord"><input type=checkbox name="col4" onclick="toggleVis(this.name)" checked> Tooterühm</td>
                </tr>
                <tr>
                    <td id="nobord"><input type=checkbox name="col5" onclick="toggleVis(this.name)" checked> Mudeli nimetus</td>
                    <td id="nobord"><input type=checkbox name="col6" onclick="toggleVis(this.name)" checked> SN</td>
                    <td id="nobord"><input type=checkbox name="col7" onclick="toggleVis(this.name)" checked> Riigivara nr</td>
                    <td id="nobord"><input type=checkbox name="col8" onclick="toggleVis(this.name)" checked> Inventaari nr</td>
                </tr>
                <td id="nobord"><input type=checkbox name="col9" onclick="toggleVis(this.name)" checked> Maja</td>
                <td id="nobord"><input type=checkbox name="col10" onclick="toggleVis(this.name)" checked> Ruum</td>
                <td id="nobord"><input type=checkbox name="col11" onclick="toggleVis(this.name)" checked> Vastutaja</td>
                <td id="nobord"><input type=checkbox name="col12" onclick="toggleVis(this.name)" checked> Märkus</td>
                <tr>
                    <td id="nobord"><input type=checkbox name="col13" onclick="toggleVis(this.name)" checked> ID</td>
                    <td id="nobord"><input type=checkbox name="col14" onclick="toggleVis(this.name)" checked> Kasutajanimi</td>
                </tr>
            </table>
        </form> 
```

一旦切换了某个复选框，它就应该隐藏列。我的问题是，每当我重新加载页面时......框中的勾号消失了，柱子又在那里了。有没有办法禁用它？提前致谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-27T08:40:46.857

刷新页面时无法保留本地 javascript 值，因此您要么必须将值保存在 HTML5 本地存储中，要么创建一个 cookie 并将值存储在其中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T08:47:09.480

您可以使用 javascript 将其存储在 cookie 中，或者使用 php，您可以将其存储在 $_SESSION 值中并在列上插入条件。
例子：

```
<?php if(!isset($_SESSION['display_column'])){ ?>insert html <?php } ?> 
```

如果您需要隐藏多个列，您可以使用数组（您可以始终将其存储在会话中）

# r - 如何让 R 中的 tabulate() 函数包含零值？还有其他选择吗？

> ID：15107476
> 
> 赞同：0
> 
> 时间：2013-02-27T08:37:30.080
> 
> 标签：r, matrix

我有一个名为“预测”的测试数据集，它是在从随机正态分布中抽取 100 个引导样本后得出的。Predicted 填充有整数数据（从 0 到 20）。

当我使用以下功能时：

```
predicted_output <- as.matrix(tabulate(predicted, 
    nbins = max(0, predicted, na.rm = FALSE))) 
```

我观察到与 [0,] 相关的所有计数都从结果矩阵中排除（根据表格数据中的描述，其中指出 NA 被（默默地）忽略）。我如何（或我可以）增加制表以提供一个矩阵，在我的情况下，该矩阵有 21 行，并且包括 NULL 值的计数？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T08:52:23.923

一个简单的解决方法是将`NA`值更改为`max(predicted)+1`. `0`您也可以通过以下方式获得计数`tabulate(predicted+1)`：

```
x <- c(1,1,0,0,0,2,3,7,10,NA,5,2,NA,10)
x[is.na(x)] <- max(x, na.rm=T) + 1
tabulate(x+1)

# [1] 3 2 2 1 0 1 0 1 0 0 2 2 
```

**请注意，****0 和 NA 的**计数也**包括**在上面。第一个值 = 3 是 0 的数量，最后一个是 NA 的计数。

您可以通过以下方式检查：

```
x <- c(1,1,0,0,0,2,3,7,10,NA,5,2,NA,10)
table(x, exclude=NULL)

# x
#    0    1    2    3    5    7   10 <NA> 
#    3    2    2    1    1    1    2    2 
```

# visual-studio - 在增量构建中检测已删除的源文件 - 如何？

> ID：15107477
> 
> 赞同：1
> 
> 时间：2013-02-27T08:37:32.540
> 
> 标签：visual-studio, incredibuild

使用 IncrediBuild 的增量构建如何检测源文件何时被删除？

当我修改一个源文件时，它将被重新编译并且相应的 dll 重新链接——但删除同一个文件什么都不做，即使完全重建会失败。如何指示 IncrediBuild 检查已删除的文件？

**更新** 我了解 Visual Studio 的行为方式相同，因此它并不是 IncrediBuild 的真正错误。尽管如此，我还是寻求以一种好的方式来纠正这种情况。考虑到要删除的文件是已知的，也许可以实现一个脚本来删除相应的目标文件或类似文件。或者也许有更好的方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T15:55:28.350

修改源文件和删除源文件是两件不同的事情。您所描述的场景是一种适当的增量构建行为，并且在使用 Visual Studio（没有 IncrediBuild）构建时您将看到相同的行为。删除文件然后执行增量构建时，构建系统将执行链接步骤，并且无论您使用 IncrediBuild 还是常规 Visual Studio 构建都会失败。

# php - 清除 $this->input->post()？

> ID：15107487
> 
> 赞同：0
> 
> 时间：2013-02-27T08:38:45.150
> 
> 标签：php, codeigniter

我们如何清除/重置`$this->input->post()`？可能类似于 clearing 的东西`$_POST`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T08:39:49.583

清除帖子使用

```
unset ($_POST); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-06-09T07:17:05.737

如果是必须的；

创建两个表单副本（最好在 view() 中的两个文件中；

1) 每种形式的类型

> echo form_input('username','','placeholder="username"').""; 顺其自然`main_form.php`；

2) 每种形式的类型

> echo form_input('username', set_value('username','username')).""; 顺其自然`sub_form.php`；

将所有重复的请求重定向到第二页

每当您不想要 POST 值时，请调用`main_form()`

[可能还有其他方法]。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-27T08:53:35.580

从页面的角度来看，最好使用 ajax-request 或在成功发布表单后重定向到同一页面，因此如果用户刷新页面将不会再次发布表单。

我认为是这样的`redirect(current_url());`（不确定）。

这将清除您的帖子并确保用户不会意外重复发布数据。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-03-24T07:23:29.753

只需调用 CI form_validation 方法。

$this->form_validation->clear_field_data();

# javascript - 为每个索引下划线？

> ID：15107488
> 
> 赞同：4
> 
> 时间：2013-02-27T08:38:51.110
> 
> 标签：javascript, underscore.js

我有一个包含以下结构的对象

```
{
Apples: Array[1],
Mangos: Array[2],
Oranges: Array[5],
Bananas: Array[11]
} 
```

这些值是使用

```
_.forEach(contents, function(values, key) {

} 
```

其中 the`key = apples`和 the`values`将是数组。我想知道如何在此`foreach`循环中获取当前索引？

即我明白了`1,2,3,4`吗？除了将它们推送到数组之外，可能没有其他方法可以做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-27T08:46:55.437

我不确定我是否完全得到了你的问题，但如果你正在寻找当前枚举的项目的索引，这里是一种使用“_forEach”等价物的方法

```
var test = {"a":"foo", "b":"bar"}
var index = 0;
for (key in test){ alert(key +"is at "+index+" position"); index++;} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2018-02-02T13:42:57.490

**试试这个：**

```
_.each(myArray,function(eachItem,index){
       console.log("item: "+ eachItem + "at index " + index);
    } 
```

例子：

```
var myArr = [
Apples: "One",
Mangos: "Two",
Oranges: "Three",
Bananas: "Four"
]

_.each(myArr,function(eachItem,index){
       console.log("item: "+ eachItem + "at index " + index);
    } 
```

**输出：**

项目：一个在索引 0

项目：两个在索引 1

项目：索引 2 处的三个

项目：四个在索引 3

**参考：** [下划线 JS 参考链接](http://underscorejs.org/#each)

# c# - 如何将 DocX 文档转换为 Microsoft.Office.Interop.Word.Document？

> ID：15107491
> 
> 赞同：1
> 
> 时间：2013-02-27T08:38:54.057
> 
> 标签：c#, c#-4.0, ms-word, docx

我想将现有的 DocX 单词文档转换或类型转换为 Microsoft.Office.Interop.Word.Document。

```
static DocX g_document;
....
....
function DoSomething()
{
    g_document = DocX.Load(@"C:\Users\RetailWrite.docx");
    Microsoft.Office.Interop.Word.Application wordApp = new  Microsoft.Office.Interop.Word.Application();
    Microsoft.Office.Interop.Word.Document doc = wordApp.Documents.Add(g_document); // Here i m getting error
} 
```

然后我想将 Microsoft.Office.Interop.Word 重新输入到 DocX 文档。我该怎么做？

# java - RestTemplate 使用

> ID：15107494
> 
> 赞同：3
> 
> 时间：2013-02-27T08:39:01.800
> 
> 标签：java, http, curl, put, resttemplate

我正在尝试使用`RestTemplate`以制作`PUT`. 出于某种原因，我无法重现`PUT`我使用`curl`它创建的内容，并且没有任何问题。

这是我的`curl`调用成功并返回 200：

```
curl https://www.exampe.com \
  -X PUT \
  -H "Content-Type: application/json" \
  -H "Authorization: Bearer <bearer-token>" \
  -v \
  -d '{"json":"object"}' 
```

这是试图复制此`curl`调用的 Java 代码。在我的情况下，此代码将抛出`HttpClientErrorException`status = 406：

```
boolean result = false; 
String url = "https://www.example.com";
String json = "{\"json\":\"object\"}";

RestTemplate rest = new RestTemplate();

HttpHeaders headers = new HttpHeaders();
headers.add("Content-Type", "application/json");
headers.add("Authorization", String.format("Bearer %s", authToken));

HttpEntity<String> requestEntity = new HttpEntity<String>(json, headers);
ResponseEntity<String> responseEntity = 
        rest.exchange(url, HttpMethod.PUT, requestEntity, String.class);

HttpStatus status = responseEntity.getStatusCode(); 
```

这些请求有什么区别？如何将 Java 版本收敛到`curl`版本？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T11:41:37.873

阿格尔，太愚蠢了。缺少的部分是`Accept`标题。显然默认`curl`添加`Accept: */*`。它可能是期望正确`Accept`标头的端点实现。添加这一行解决了这个问题：

```
headers.add("Accept", "*/*"); 
```

# windows-8 - 每次运行时是否都会创建 BackgroundTasks 的新实例？

> ID：15107495
> 
> 赞同：0
> 
> 时间：2013-02-27T08:39:01.877
> 
> 标签：windows-8

当 a`BackgroundTask`的`Run`方法被调用时，我可以依赖使用之前调用保存在类字段中的状态`Run`吗？如果有，什么时候？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T12:17:11.713

我针对`TimeTrigger`-triggered 后台任务对此进行了测试，每次触发和运行时都会创建一个新实例。

# java - 想要一个 java swing tableview 例子

> ID：15107496
> 
> 赞同：-4
> 
> 时间：2013-02-27T08:39:03.637
> 
> 标签：java, swing, tableview, jtextpane

## 我们正在开发一个java Swing应用程序。我想在a中添加一个表`JTextPane`，该表可以调整大小并且应该支持多跨度（行和列）。似乎java Swing表视图支持这个，但我找不到任何例子这个的。有人能帮我吗？

我不熟悉 java swing 视图结构，我只是不明白如何计算视图的跨度和偏移量。经过一次又一次的调试，我取得了一些进展。我会花更多时间在上面。谢谢大家。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T08:45:57.120

您可以将此视为示例[http://java-sl.com/JEditorPaneTables.html](http://java-sl.com/JEditorPaneTables.html)

它可以扩展为支持多跨度和调整大小功能。

# asp.net - 减少到数据库的往返次数

> ID：15107503
> 
> 赞同：2
> 
> 时间：2013-02-27T08:39:33.907
> 
> 标签：asp.net, database-connection

我正在使用 ASP.NET Web 窗体并尝试从 SQL 服务器加载数据。这是我如何做的伪代码：

```
connect1 = connect("database")
categories = connect.query("select * from category")
loop categories as category

     print category           

     connect2 = connect("database")
     subCategories = connect2.query("select * from subCategory where category = @0", category) 
     loop subCategories as subCategory

           print subCategory               

           connect3 = connect("database")
           items = connect3.query("select * from item where subCategory = @0", subCategory)
           loop items as item
                 print item
           end loop 'items
           connect3.close

     end loop 'subcategories
     connect2.close

end loop 'categories
connect1.close 
```

正如你所看到的，我的脚本中有很多往返，当我只有很少的记录时这很好，但是当处理数百或更多时，这需要很长时间才能显示数据。

我可以做些什么来减少往返次数？我想一次从数据库中获取所有数据，然后在应用程序端对它们进行分类，但这可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T08:48:54.357

为什么不通过一个带有连接的查询来获取所需的所有数据，然后在客户端进行过滤？或者你可以做的其他方式（它没有太多的数据）是获取数据作为 xml，将其反序列化为可枚举的迭代。

正如我所见，你做到了

```
categories = connect.query("select * from category"); 
```

所以你只需要：

```
whole_data = connect.query("select * from category c inner join subCategory sc on c.id = sc.id inner join item i on i.id = si.id") /*or some kind of*/
/*let me think that whole_data is a list of objects, not a dataset*/
categories = whole_data.Distinct(d => d.category);
subCategories = whole_data.Distinct(d => d.subCategories);
/*and then do your loops*/ 
```

手动映射的 c# 代码可能是这样的：

```
 using (var connection = new SqlConnection(connString))
        {
            connection.Open();
            var command = connection.CreateCommand();
            command.CommandText = "select * from ...";

            var reader = command.ExecuteReader();
            while (reader.Read())
            {
                var a = reader.GetInt32(0);
                var b = reader.GetString(1);
                /*so basically you read all fields that you get from DB and build object here, then you add it to List or any other kind of collection*/
            }
        } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-29T10:41:07.043

根据数据库的延迟，建立连接，即使是池化的，也可能需要很长时间。为避免这种情况，请将所有连接都放在循环之外。也就是说，不要嵌套连接。相反，它的结构如下：

```
Connect1 = connect("database")
Connect2 = connect("database")
Connect3 = connect("database")

sql 1 nest
    sql 2 nest
        sql 3 nest
        end nest
    end nest
end nest

close connections. 
```

如果每个循环有 10 个条目，并且连接需要 10 毫秒，那么您将花费 10 x 10 x 10 = 1000 毫秒来进行连接。将它们带到巢外，然后您只需花费 30 毫秒即可建立连接。在每个嵌套完成时关闭数据读取器，以便可以重复使用连接。

当然，对于您展示的示例，执行单个查询是最好的解决方案。但是，如果您的查询是选择性的，并且您需要执行一些无法在查询中组合的业务逻辑，那么请始终将您的连接移到循环之外。

# html - 仅使用 express 和jade 渲染到部分块

> ID：15107505
> 
> 赞同：0
> 
> 时间：2013-02-27T08:39:38.407
> 
> 标签：html, node.js, web, express, pug

我想知道是否可以使用 node.js 和 express 来渲染 express 应用程序的布局。我想在布局页面上播放一个流，但我担心每次我想渲染到我声明的块时它都会停止。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T20:08:43.200

简单的ajax示例：

```
$.get('url', function(response){
    $('#divToUpdateId').html(response);
}); 
```

或者这是相同的：

```
$('#divToUpdateId').load('url'); 
```

# objective-c - 如何清除可选属性的数据？

> ID：15107509
> 
> 赞同：0
> 
> 时间：2013-02-27T08:39:45.850
> 
> 标签：objective-c, core-data, nsnumber

我有一个`NSNumber`我想是可选的，没有默认值，没有一些代表“缺失”的幻数（例如 0 或 -1）。IE。在数据库上，我希望它的值为数字或空值。它从 null 开始没问题，但是一旦它得到一个数字，我怎样才能将它重置回“缺失”？

我试过了：

1.  `myAttribute = nil;`
2.  `myAttribute = [NSNull null];`
3.  `[self setValue:[NSNull null] forKey:@"myAttribute"];`
4.  `[self setPrimitiveValue:[NSNull null] forKey:@"myAttribute"];`

第一个不会崩溃，但我理解将核心数据属性设置为 nil 实际上是说它没有被获取。因此它不会更新。其他三个崩溃。

很多建议都建议`NSNumber`应该始终包含一个数字，所以我不希望这是答案。为了克服这个问题，假设我将数据存储在`NSString`. 如何获取核心数据以存储`NULL`在数据库中而不是空字符串？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T09:54:04.480

您可以将可选属性的值设置为`nil`，应该没有问题：

```
self.myAttribute = nil;
[self setValue:nil forKey:@"myAttribute"]; 
```

两者都有效。您的电话 2、3、4 失败，因为`NSNull`不是数字。

# android - 从三星 Galaxy XCover 在 Zebra MZ220 上打印

> ID：15107516
> 
> 赞同：1
> 
> 时间：2013-02-27T08:40:04.700
> 
> 标签：android

我们正在尝试在三星 Galaxy XCover 的 Zebra MZ220 上打印，但我们得到“无法确定打印机语言”。从其他设备上它工作正常。你有什么想法？你能发布你的代码示例吗？

经过研究，我们发现了这个[https://km.zebra.com/kb/index?page=content&id=SO8239&actp=LIST_RECENT](https://km.zebra.com/kb/index?page=content&id=SO8239&actp=LIST_RECENT)但它只是隐藏了错误消息，打印机仍然不会打印。Android 上也有这篇文章[蓝牙三星 Galaxy XCover 总是成功](https://stackoverflow.com/questions/11651311/bluetooth-on-android-samsung-galaxy-xcover-always-succeeds/15107022#15107022)，用户找到了解决方案但他没有分享。

固件是最新的。

```
 ZebraPrinterConnection thePrinterConn = new BluetoothPrinterConnection(
                              getAdressMac());

                              Looper.prepare();
                              try {
                                    thePrinterConn.open();

                                    ZebraPrinter printer;
                                    printer = ZebraPrinterFactory
                                                  .getInstance(thePrinterConn);
                                    Thread.sleep(500);
                                    Bitmap bitmap = StampilaPrint.getStampila(ctx, Print.this.idSpatiu);
                                    //com.zebra.android.comm.BluetoothPrinterConnection myConn = new com.zebra.android.comm.BluetoothPrinterConnection(macAdd);
                                    //com.zebra.android.printer.ZebraPrinter myPrinter = new com.zebra.android.printer.internal.ZebraPrinterCpcl(myConn); 
                                    printer.getGraphicsUtil().storeImage("IMAGE.PCX",
                                                  bitmap, 215, 215);

                                    printer.getToolsUtil().sendCommand(data);

                                    thePrinterConn.close(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T02:39:36.623

固件是 SDK 的关键。访问 www.zebra.com/firmware 并确保您的固件与当前发布的固件相同。这将在 99% 的时间里解决这个问题。

在另外 1% 的时间里，一点点示例代码永远不会受到伤害:)

# c# - 休息前在 foreach 中删除

> ID：15107517
> 
> 赞同：3
> 
> 时间：2013-02-27T08:40:05.520
> 
> 标签：c#, foreach

我知道有很多方法可以做得更好，但我已经在现有代码中看到了它，现在我想知道这是否会产生任何负面影响。请注意删除后的中断。因此，我一般不关心迭代器，但是，我确实关心意外行为（-> 潜在异常）。

```
foreach (var item in items)
{
    //do stuff
    if (item.IsSomething)
    {
        items.Remove(item); //is this safe???
        break;
    }
} 
```

编译器是否也有可能以我不期望的方式优化某些东西？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-27T08:46:12.420

编译器生成`Dispose()`对在块中执行的枚举器的调用`finally`，但这不应该是一个问题。如果您`break`在删除该项目后立即，不会发生任何不好的事情，因为您不再使用枚举器。

但是，如果您想以不同的方式进行操作（出于样式原因或其他原因），则可以这样做：

```
var item = items.FirstOrDefault(i => i.IsSomething);
if (item != null) {
    items.Remove(item);
} 
```

它也有点短:)（我假设您在集合中使用引用或可为空的类型）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-27T08:45:57.963

编译器和与您的应用程序相关的所有其他东西保证 SC-DRF（无数据竞争程序的顺序一致性），因此您不会看到您编写的程序和执行的程序之间的区别（即不一样）。假设`items`不是在多个线程之间共享，这写起来是完全安全的，并且`Remove`除了在循环外调用之外没有其他意外行为。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-27T08:59:42.167

在 foreach 中迭代时不能更改列表。

枚举时无法修改基础集合。一种标准方法是将要删除的项目保留在第二个列表中，然后在枚举完 Items 之后，从 Items 中删除每个项目。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-02-27T08:50:07.193

那么你可以这样做——在处理大列表时效率更高（假设实体框架）

```
var reducedList = items.where(a=>a.IsSomething).toList();
foreach(var item in reducedList)
{
    reducedList.Remove(item);
} 
```

这减少了`foreach`循环迭代

# python - 抓取数据时检查元素是否存在

> ID：15107519
> 
> 赞同：0
> 
> 时间：2013-02-27T08:40:10.407
> 
> 标签：python, web-scraping, scrape

我正在尝试从某些餐厅的开放表中提取评论，但由于其中一些餐厅没有评论而收到 TypeError。

我目前的代码是：

```
ratings = restDOM.by_id("RestPopLabel_ReviewsFormat")[0].attributes
ratings = ratings['title'] 
```

我正在尝试做类似的事情：

```
if restDOM.by_id("RestPopLabel_ReviewsFormat")[0] is present
    ratings = restDOM.by_id("RestPopLabel_ReviewsFormat")[0].attributes
    ratings = ratings['title']
else 
    ratings = 'not available' 
```

实现 if 语句的最佳方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T09:19:07.893

本的回答在这里是正确的，但我想我会用实际代码进行扩展：

```
try:
  ratings = restDOM.by_id("RestPopLabel_ReviewsFormat")[0].attributes
  ratings = ratings['title']
except KeyError:
  ratings = 'not available' 
```

# c - OpenGL 扩展，如何在 C 和 glsl 中正确使用它们

> ID：15107521
> 
> 赞同：6
> 
> 时间：2013-02-27T08:40:14.180
> 
> 标签：c, opengl, glsl, glew

我正在开发一个游戏引擎，它已经有了很大的发展。因为引擎也需要在 mac 上工作，所以我仍在使用 OpenGL 3.2 和 GLSL 1.2 :-(。我使用 GLEW，我认为它可以为我解决扩展问题。

编辑：同时，部分问题得到了回答-在下一个编辑中继续阅读：

我总是能够让着色器在 windows 和 mac 上工作，有时我必须在 GLSL 代码中添加一行，如**#extension GL_EXT_gpu_shader4 : enable**以使其在 Mac 上工作。然后似乎我的 Windows 版本在编译相同的着色器时会发出警告，但它会起作用。

但是自从我开始使用几何着色器之后，我的噩梦就开始了。出于某种原因，mac 期望我使用**#extension GL_EXT_gpu_shader4 : enable**而 windows 期望我使用**#extension GL_EXT_geometry_shader4 : enable**。这使得创建独立于平台的着色器变得不那么明显。

此外，这更令人讨厌：Windows 版本希望我使用：**glTransformFeedbackVaryings**，我认为 GLEW 可以使其可用于 mac，但我明确需要使用**glTransformFeedbackVaryingsEXT**，它不适用于 Windows 版本。所以我需要#ifdef 让**APPLE**使用需要的东西。**glBeginTransformFeedback**和**glBeginTransformFeedbackEXT**同样的问题。

但是两者都接受**glProgramParameteriEXT**，我不需要区分...

我知道只有转换反馈才有问题，但是……这到底是怎么回事？

我以为我了解 OpenGL 扩展的工作原理，但我开始失去这种理解。

到了这样的地步，我认为当我在另一个 windows 系统或另一个 mac 系统或另一个 linux 系统上运行代码时，我会遇到新的问题，因为有不同的图形适配器或其他东西。

谁能帮我理解这一点？我已经阅读了关于扩展的 OpenGL 手册，所以我遗漏了一些明显的东西。如何确保我的代码始终有效？

编辑：通过从 Mac 版本中完全删除 GLEW 并完全使用 Mac 自己的 OpenGL 3.2 实现，所有命名都是正常的，我可以从我的着色器中完全删除**#extension GL_EXT_gpu_shader4 : enable 。**现在唯一让我担心的是，对于几何着色器，我需要似乎不存在的函数**glProgramParameteri ，但****glProgramParameteriEXT**确实存在。出于某种原因，此功能也适用于 Windows。为什么？我可以确定它适用于所有系统/硬件吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-11T14:31:46.460

EXT 表示您正在使用几何着色器的扩展。这也应该在 Windows 上工作。几何着色器应该是 OpenGL 3.2 中的核心功能，但现在您使用的是扩展（基本上您使用的是旧 OpenGL 版本的功能，而不是实际的 3.2）。要使用核心几何着色器，您必须切换到 GLSL 1.5。

我不太精通 OpenGL，但我的假设是，如果您开始使用核心功能，glProgramParameteri() 实际上就不再需要了，这就是库头文件中缺少它的原因。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-09-21T02:24:06.853

如果您坚持匹配 OpenGL/GLSL 版本，您的生活会更轻松。

[http://en.wikipedia.org/wiki/OpenGL_Shading_Language](http://en.wikipedia.org/wiki/OpenGL_Shading_Language)

从中挑选：

*   OpenGL 2.1，带有 GLSL 120 + GL_EXT_gpu_shader4 + GL_EXT_geometry_shader4
*   OpenGL 3.2，带有 GLSL 150
*   OpenGL 3.3，带有 GLSL 330

如果您已经对使用 OpenGL 3.2 感到满意，请升级到 GLSL 150，因为它更接近现代 GLSL 330+。如果您想要最大的兼容性，请使用 OpenGL 2.1、GLSL 120 以及几何着色器扩展。（虽然我不确定它会给你带来多少兼容性）

只有在使用 GLSL 120 plus 扩展时，您才需要使用 glProgramParameteriEXT() 来指定几何着色器输入/输出基元类型和顶点数。例如：

```
glUseProgram(prog);
glProgramParameteriEXT(prog, GL_GEOMETRY_INPUT_TYPE_EXT, GL_TRIANGLES);
glProgramParameteriEXT(prog, GL_GEOMETRY_OUTPUT_TYPE_EXT, GL_TRIANGLE_STRIP);
glProgramParameteriEXT(prog, GL_GEOMETRY_VERTICES_OUT_EXT, max_output_verticies); 
```

[https://wiki.engr.illinois.edu/display/graphics/Geometry+Shader+Hello+World](https://wiki.engr.illinois.edu/display/graphics/Geometry+Shader+Hello+World)

在 OpenGL 3.2、GLSL 150+ 中，您可以在着色器中指定此信息，使用如下声明：

```
#version 150
layout (triangles) in;
layout (triangle_strip, max_vertices = 3) out; 
```

[http://www.lighthouse3d.com/tutorials/glsl-core-tutorial/geometry-shader/](http://www.lighthouse3d.com/tutorials/glsl-core-tutorial/geometry-shader/)

# javascript - 加载索引后启动锚点

> ID：15107523
> 
> 赞同：0
> 
> 时间：2013-02-27T08:40:17.763
> 
> 标签：javascript, jquery

好吧，我不是程序员，所以我根本无法处理这个问题。加载索引后，我需要启动网站的一部分。我一直在尝试一些 jquery 没有任何运气，即：

```
$("document").ready(function() {
    setTimeout(function() {
        $('#tensa-inicio').trigger('click');
    },1000);
}); 
```

您可以在此网址中看到该网站：3w[dot]tensa[dot]es。加载索引后，我需要显示 HOME 链接，但看不到如何执行此操作。

非常感谢任何帮助。

蒂亚！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T08:46:04.780

考虑到您正在尝试为 Anchor 标记触发点击事件，您也可以使用以下脚本使其工作

```
$("document").ready(function() {
    setTimeout(function() {
        window.location = $('#tensa-inicio').attr('href');
    },1000);
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T08:46:38.520

假设“tensa-inicio”是文档中锚元素的ID，你最好调用native`click()`方法而不是jQuery事件：

```
setTimeout(function() {
    var oLink = $('#tensa-inicio');
    if oLink.length === 1)
        oLink[0].click();
},1000); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-27T10:03:53.777

这是调整：

```
<script type="text/javascript">
    $(document).ready(function(){    
        $("#sliderpromo").easySlider({
            //auto: true, 
            //continuous: true,
            speed:500,
            pause:6000,
            numeric: true
        }, window.location="#!/tensa-inicio");
    });    
</script> 
```

现在，每次加载索引时，都会加载该 ID...；） 谢谢大家！

# magento - 在交易电子邮件中显示新产品

> ID：15107528
> 
> 赞同：1
> 
> 时间：2013-02-27T08:40:33.900
> 
> 标签：magento, magento-1.7

我创建了一个静态块，在其中插入了一个新的产品块。已设置新产品日期。

我将新产品块粘贴到事务性电子邮件模板中，如下所示：

{{block type="cms/block" block_id="enewarrival " }}

当交易电子邮件模板被预览或作为电子邮件发送时，除了来自新产品静态块的“新产品”图像之外的所有其他内容都会显示

1.  有新产品时，如何在 Transactional Email 中显示新产品图像以发送出去？

或者

2.  如何在交易电子邮件中显示“目录新产品列表”小部件？

注意：我已查看此链接： [Magento - 如何在交易电子邮件中插入产品图片](https://stackoverflow.com/questions/4103321/magento-how-to-insert-product-image-in-transactional-email)

当我在插入交易电子邮件的静态块中正常插入图像时，会显示图像。问题在于显示新产品图像

# ssas - 分组 MDX 查询结果

> ID：15107529
> 
> 赞同：0
> 
> 时间：2013-02-27T08:40:37.893
> 
> 标签：ssas, mdx

我有以下查询（基于 Microsoft® SQL Server® 2008 MDX 分步手册提供的示例数据）：

```
WITH
SET important_months AS
{
    ([Product].[Product Categories].[Subcategory].&[28].CHILDREN    , {[Date].[Month of Year].&[1], [Date].[Month of Year].&[2]}),
    ([Product].[Product Categories].[Product].&[477]                , {[Date].[Month of Year].&[3]})
}

SELECT [Measures].[Order Count] ON COLUMNS,
     important_months ON ROWS
FROM [Step-by-Step] 
```

该查询显示特定月份特定子类别中产品的订单数量。对于第 28 类中的所有产品，我需要计算 1 月或 2 月（第 1 个月或第 2 个月）的订单数量。例外情况是对产品 447 下的订单：在这种情况下，我还需要包括 3 月份下的订单数量。

然而，最后，我对月份的详细信息并不真正感兴趣：我想要的只是对特定产品下达的简单订单数量（即我想放松/隐藏有关下订单月份的信息） .

所以而不是

*   山瓶笼，176 年 1 月
*   183 年 2 月，山上的水壶架
*   公路水壶架，141 年 1 月
*   公路水壶架，152 年 2 月
*   水瓶 - 30 盎司，1 月，381
*   水瓶 - 30 盎司，2 月，403
*   水瓶 - 30 盎司，3 月，414

我需要：

*   山地水壶架，359 (176 + 183)
*   公路水壶架，293 (141 + 152)
*   水瓶 - 30 盎司，1198 (381 + 403 + 414)

我尝试将 important_months 集放入 where 子句中，但是（除了由于自定义集导致的循环引用错误）我将无法在行轴上投影类别（我会吗？）。另外，我考虑过使用子查询，但似乎我也无法引用其中设置的 important_months。

换句话说：我需要得到在 SQL 中我会通过发出的结果

```
SELECT SUM([Order Count]) 
FROM <MDX RESULT HERE> 
GROUP BY Product 
```

可以做到吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T09:46:48.150

有根据的猜测是[MDX 子查询](http://www.iccube.com/support/documentation/mdx/SubQueries.html)是解决方案。您是否尝试在 subselect 中使用元组：

```
 WITH
    SELECT [Measures].[Order Count] ON COLUMNS,
    {[Product].[Product Categories].[Subcategory].&[28].CHILDREN,[Product].[Product Categories].[Product].&[477]} ON ROWS
 FROM ( 
   SELECT 
     {([Product].[Product Categories].[Subcategory].&[28].CHILDREN,{[Date].[Month of Year].&[1], [Date].[Month of Year].&[2]}),
  ([Product].[Product Categories].[Product].&[477],{[Date].[Month of Year].&[3]})} ON 0
  FROM [Step-by-Step]
 ) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T17:31:48.770

您正在创建一个非对称集（仅适用于水瓶的 March），因此如果不将其包含在所有其他产品中，您就不能真正直接在 WHERE 子句中对其进行切片。

icCube 的答案对我来说看起来不错，还有一个小补充：在行选择中添加 DISTINCT 以将水瓶组合回一行。

```
WITH
  SELECT [Measures].[Order Count] ON COLUMNS,
  DISTINCT {[Product].[Product Categories].[Subcategory].&[28].CHILDREN, [Product].[Product Categories].[Product].&[477]} ON ROWS
FROM ( 
  SELECT 
    {([Product].[Product Categories].[Subcategory].&[28].CHILDREN,{[Date].[Month of Year].&[1], [Date].[Month of Year].&[2]}),
    ([Product].[Product Categories].[Product].&[477],{[Date].[Month of Year].&[3]})} ON 0
  FROM [Step-by-Step]
) 
```

# java - 字节[]接收器字节=新字节[缓冲区]；

> ID：15107531
> 
> 赞同：1
> 
> 时间：2013-02-27T08:40:39.533
> 
> 标签：java, c

我需要以下代码行的帮助。我正在用 C 编写我的代码，我需要一些替换 Java 中的以下代码行。因此，请帮助我并就如何为我的 C 代码修改它提出一些替代方案。我正在等待代码行。谢谢..

```
byte[] receiverByte = new byte[BUFFER]; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T08:41:49.633

```
byte[] receiverByte = new byte[BUFFER_SIZE ]; 
```

如果使用 C++ 编译器，则变为：

```
char* receiverByte = new char[BUFFER_SIZE ]; 
```

C中的其他内容：

```
char* receiverByte = malloc( BUFFER_SIZE ); 
```

请记住，尽管 C 不像 Java 那样进行内存管理，因此您需要在完成后调用 delete 来释放内存：

所以对于 C++：

```
delete[] receiverByte; 
```

对于 C：

```
free( receiverByte ); 
```

您也可以在堆栈上创建一个固定大小的数组。大小 BUFFER_SIZE 必须在编译时指定，并且向量大小不能改变或增长：

```
char receiverByte[BUFFER_SIZE]; 
```

编辑：如果您使用的是 c++ 编译器，您还可以访问 STL 库，从而无需直接使用 new[] 和 delete[]：

```
#include <vector>
...
std::vector<char> receiverByte;
receiverByte.resize( BUFFER_SIZE ); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-27T08:43:24.623

如果`BUFFER`定义为宏：

```
#define BUFFER 1234
unsigned char receiveBuffer[BUFFER]; 
```

或使用动态分配[`malloc()`](http://www.cplusplus.com/reference/cstdlib/malloc/)：

```
#include <stdlib.h>
unsigned char *receiveBuffer = malloc(BUFFER); 
```

正如@mic_e 所提到的，您应该乘以`BUFFER`a 的大小`unsigned char`以更加独立于平台，第二个示例变为：

```
unsigned char *receiveBuffer = malloc(BUFFER * sizeof(unsigned char)); 
```

第一个例子也是如此。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-27T08:45:01.893

```
unsigned char receiverByte[BUFFER]; 
```

或者

```
unsigned char* receiverByte = malloc(BUFFER);
if (!receiverByte ) my_do_with_error(....); 
```

和：

```
double data[19][4]; 
```

但是这里的动态数组会比较棘手（测试NULL）

```
int M= 19, N= 4;
double **data   =malloc(sizeof( *data)*M);
         data[0]=malloc(sizeof(**data)*M*N);
for(int i=1; i<M; ++i) data[i] =data[0]+i*N; 
```

......

```
free(data[0]);
free(data); 
```

编辑：[在 C 标准的 6.5.3.4 中，我们可以找到](http://www.drdobbs.com/the-new-cwhy-variable-length-arrays/184401444)：

```
#include <stddef.h>
size_t fsize3(int n)
{
  char b[n+3];     // variable length array
  return sizeof b; // execution time sizeof
}
int main()
{
  size_t size;
  size = fsize3(10); // fsize3 returns 13
  return 0;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-27T08:45:46.903

我建议使用`unsigned char*`它，因为它类似于 C 中的一个字节。所以它将是：

```
unsigned char* receiverByte = malloc(BUFFER * sizeof(unsigned char)); 
```

或者

```
unsigned char receiverByte[BUFFER]; 
```

# google-chrome-extension - 如何使用 URL 方案启动 chrome 打包的应用程序

> ID：15107534
> 
> 赞同：1
> 
> 时间：2013-02-27T08:40:57.623
> 
> 标签：google-chrome-extension

我有一个 chrome 打包应用程序，我会不时更新表单 - 当我创建更新时，我想通过该扩展程序的链接向订阅客户发送电子邮件 - 这将启动它。

任何人都知道是否有我可以使用的 chrome url 方案？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T02:45:49.037

目前这是不可能的，但是有一个 API 提案和一个正在为 chrome-app://appid URL 模式开发的实现，它几乎可以完成您所描述的工作。

关注[这里的状态](https://code.google.com/p/chromium/issues/detail?id=161054)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-16T04:55:34.283

我也希望能够做到这一点。似乎一种可能的解决方案是安装扩展程序和打包的应用程序，并让扩展程序注册一个上下文菜单，然后与应用程序通信，或类似的东西。

# php - wordpress 下拉菜单的样式不正确，因为它们从 parent 继承样式。想要为下拉菜单提供自定义背景

> ID：15107538
> 
> 赞同：0
> 
> 时间：2013-02-27T08:41:11.387
> 
> 标签：php, html, css, wordpress, wordpress-theming

这是我的导航代码 ----->

```
$main = array( 'theme_location' => 'header-menu' , 'link_before'     => '<span>',
'link_after'      => '</span>','container' => '',
'items_wrap' => '%3$s',

 );

wp_nav_menu( $main ); 
```

我正在将 span 标签应用于样式 li 项目。我真正想做的是span标签应该只应用于主菜单（层次结构中的深度= 1）而不是它的子菜单（在下拉菜单中）

```
html ouptut is something like 

<ul class=main>

<li><a href="http://127.0.0.1/samplesite/?page_id=19"><span>Testimonials</span></a></li> >
<li><a href="http://127.0.0.1/samplesite/?page_id=19"><span>Testimonials</span></a></li> >

<ul class ="sub=menu" >

<li><a href="http://127.0.0.1/samplesite/?page_id=19"><span>Testimonials</span></a></li> >
    </ul>
<li><a href="http://127.0.0.1/samplesite/?page_id=19"><span>Testimonials</span></a></li> >
 </ul> 
```

我不想在子菜单类 li 项目中使用 span 标签，有没有办法做到这一点。？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T08:51:30.730

如果您想以不同的方式设置子菜单的样式，您应该使用的标识符是，`.sub-menu`但取决于您使用的主题，主题的作者可能已经设置了菜单的 UL、LI 或 A 的样式。从 style.css 中找出它并为相同的标识符编写代码。

例如。如果 style.css 包含类似这样的内容

```
.menu li a { background: #fff; } 
```

那么你需要写下这一行：

```
.sub-menu { background: #888; } 
```

如果主题样式使用“背景”，则使用“背景颜色”也是一个好习惯，`background`如果主题样式使用`background-color`.

# python - 如果两个列表都包含公共元素，则在 python 中从两个元组列表中选择元组

> ID：15107541
> 
> 赞同：2
> 
> 时间：2013-02-27T08:41:46.163
> 
> 标签：python, list, tuples, set

如果 list1 中的元素在 list2 中存在或常见，我想从 list1 的元组创建一个新的元组列表。

```
list1 = [('We', 'all'), ('all', 'live'), ('live', 'in'), ('in', 'a'),
         ('a', 'yellow'), ('yellow', 'submarine.')]

list2 = [('A', 'live'), ('live', 'yellow'), ('yellow', 'submarine'),
         ('submarine', 'lifeform'), ('lifeform', 'in'), ('in', 'a'),
         ('a', 'sea.')] 
```

预期产出 =`[('live', 'in'), ('in', 'a'), ('a', 'yellow')]`

我的代码如下：它在这种情况下有效，但在大型数据集中以某种方式失败。

```
All_elements_set1 = set([item for tuple in list1 for item in tuple])

All_elements_set2 = set([item for tuple in list2 for item in tuple])

common_set = All_elements_set1 & All_elements_set2

new_list = [(i,v) for i,v in list1 if i (in common_set and v in common_set)]

print new_list 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-27T08:46:41.363

```
In [39]: from itertools import chain

In [40]: list1 = [('We', 'all'), ('all', 'live'), ('live', 'in'), ('in', 'a'),
    ...:          ('a', 'yellow'), ('yellow', 'submarine.')]
    ...: 
    ...: list2 = [('A', 'live'), ('live', 'yellow'), ('yellow', 'submarine'),
    ...:          ('submarine', 'lifeform'), ('lifeform', 'in'), ('in', 'a'),
    ...:          ('a', 'sea.')]
    ...: 

In [41]: elems = set(chain.from_iterable(list2))

In [42]: [tup for tup in list1 if elems.issuperset(tup)]
Out[42]: [('live', 'in'), ('in', 'a'), ('a', 'yellow')] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T11:09:31.633

基本上，您不需要为 list1 中的元素设置集合。如果检查列表 1 中的每个元组，您所需要的只是它们的元素是否在列表 2 中的某个元组中......

```
list1 = [('We', 'all'), ('all', 'live'), ('live', 'in'), ('in', 'a'),
         ('a', 'yellow'), ('yellow', 'submarine.')]

list2 = [('A', 'live'), ('live', 'yellow'), ('yellow', 'submarine'),
         ('submarine', 'lifeform'), ('lifeform', 'in'), ('in', 'a'),
         ('a', 'sea.')]

Elements_set2 = set([item for tuple in list2 for item in tuple])

print [(i,v) for i,v in list1 if (i in Elements_set2 and v in Elements_set2 )] 
```

由于您没有提供有关代码失败情况的详细信息，因此无法检查这是否适用于您失败的示例。

# java - 在 BaseAdapter 中填充数据时出现 NullPointerException

> ID：15107542
> 
> 赞同：1
> 
> 时间：2013-02-27T08:41:48.437
> 
> 标签：java, android, nullpointerexception

我正在尝试`listview`使用通过创建它的意图传递给活动的数据来填充。您看到的`println`语句确认数据正确传入（即打印了预期的内容，这意味着`ArrayList`适配器中的引用已正确初始化）。但是，我一直`NullPointerException`在线

```
content.setText(Html.fromHtml(cmts.get(position).content)); 
```

适配器中一定有问题 - 可能在 getItem() 中，或者我的调用`cmts.get(position)`没有按照我的想法进行，但此时我无法弄清楚。

```
public class CommentsView extends Activity {
ArrayList<Comment> cmts;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_comments_view);

    cmts = (ArrayList<Comment>) getIntent().getExtras().getSerializable("clist");

    for (Comment c : cmts) {
        System.out.println("CMTinCV: " + c.content);
    }

    ListView lv = (ListView)findViewById(R.id.commentsList);

    CommentAdapter ca = new CommentAdapter();

    lv.setAdapter(ca);

}   

class CommentAdapter extends BaseAdapter {
    public CommentAdapter(){

    }
@Override
public int getCount() {
    return cmts.size()-1;
}

@Override
public Object getItem(int position) {
    return cmts.get(position);
}

@Override
public long getItemId(int position) {
    return position;
}

@Override
public View getView(int position, View convertView, ViewGroup parent) {

    if (convertView == null) {
        convertView = getLayoutInflater().inflate(R.layout.commentbox, null);

        TextView content = (TextView)findViewById(R.id.commentText);
        TextView author = (TextView)findViewById(R.id.commentAuthor);            
        TextView date = (TextView)findViewById(R.id.commentDate);     

        content.setText(Html.fromHtml(cmts.get(position).content));
        author.setText(cmts.get(position).author.name);
        date.setText(cmts.get(position).date);   
    }

    return convertView;
}

}
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-27T08:52:34.580

您需要在 getview 方法中访问 textview，如下所示： `convertView.findViewById(R.id.commentText);`像这样访问它。

> ```
>  @Override
>    public View getView(int position, View convertView, ViewGroup parent) {
>    if (convertView == null) {
>     convertView = getLayoutInflater().inflate(R.layout.commentbox, null);
> 
>     TextView content = (TextView)convertView.findViewById(R.id.commentText);
>     TextView author = (TextView)convertView.findViewById(R.id.commentAuthor);            
>     TextView date = (TextView)convertView.findViewById(R.id.commentDate);     
> 
>     content.setText(Html.fromHtml(cmts.get(position).content));
>     author.setText(cmts.get(position).author.name);
>     date.setText(cmts.get(position).date);   
> }
>   return convertView;
>  } 
> ```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-27T08:46:27.233

将您的适配器的构造函数更改为此（如果它不是您的活动的内部类）：

```
ArrayList<Comment> cmts;
public CommentAdapter(ArrayList<Comment> mComments){
     this.cmts = mComments;
} 
```

这些行：

```
TextView content = (TextView)findViewById(R.id.commentText);
TextView author = (TextView)findViewById(R.id.commentAuthor);            
TextView date = (TextView)findViewById(R.id.commentDate); 
```

应该是这样的：

```
TextView content = (TextView) convertView.findViewById(R.id.commentText);
TextView author = (TextView) convertView.findViewById(R.id.commentAuthor);            
TextView date = (TextView) convertView.findViewById(R.id.commentDate); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-27T08:46:08.490

首先检查变量是否为空：

```
if(cmts.get(position) != null) {
    content.setText(Html.fromHtml(cmts.get(position).content));
    author.setText(cmts.get(position).author.name);
    date.setText(cmts.get(position).date); 
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-27T08:56:44.270

像这样创建适配器

```
CommentAdapter ca = new CommentAdapter(cmts); 
```

和`CommentAdapter`类来创建这样的构造函数

```
public CommentAdapter(ArrayList<Comment> cmts){
       this.cmts = cmts;
} 
```

并在 CommentAdapter 类中创建局部变量

```
 private ArrayList<Comment> cmts; 
```

# git - 获取给定 SHA1（子模块）提交的提交日期

> ID：15107545
> 
> 赞同：1
> 
> 时间：2013-02-27T08:41:58.763
> 
> 标签：git, git-submodules

非常特殊的问题：我已经集成了子模块，并且我的子模块 8-char long referenced commit state

```
$ git ls-tree HEAD MY_SUBMODULE | awk '{print $3}' | cut -c -8
03B446AB 
```

现在我想获取子模块的提交日期，最好是格式为 yyyy-mm-dd。你知道如何处理这个

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T08:56:55.053

您可以使用[`git show`](http://git-scm.com/docs/git-show)命令（对于提交者日期）：

```
git --git-dir=/path/to/submodule/.git show --format="%ci" <commit> 
```

[OP John Rumpel](https://stackoverflow.com/users/1020719/john-rumpel)[在评论](https://stackoverflow.com/questions/15107545/get-commit-date-of-a-given-sha1-submodules-commit/15107824#comment21310088_15107824)中建议：

```
git --git-dir=path/to/submodule/.git show --pretty=format:'%ad' --date=short <commit> 
# or
git log --git-dir=path/to/submodule/.git --pretty=format:'%ad %h' --date=short | grep <commit> 
```

# sql-server - 如何在 SQL 脚本中继续执行错误以执行批处理中的其他语句？

> ID：15107549
> 
> 赞同：1
> 
> 时间：2013-02-27T08:42:10.253
> 
> 标签：sql-server

我在 Visual Studio 2012 Server Explorer 中使用 New Query 窗口。这是我要执行的脚本：

```
ALTER TABLE [dbo].[webpages_UsersInRoles] DROP CONSTRAINT fk_UserId;
ALTER TABLE [dbo].[webpages_UsersInRoles] DROP CONSTRAINT fk_RoleId;

DROP TABLE [dbo].[ExtraUserInformation];
DROP TABLE [dbo].[UserProfile];
DROP TABLE [dbo].[webpages_Membership];
DROP TABLE [dbo].[webpages_OAuthMembership];
DROP TABLE [dbo].[webpages_Roles];
DROP TABLE [dbo].[webpages_UsersInRoles];

CREATE TABLE [dbo].[ExtraUserInformation] (
    [Id]       INT            IDENTITY (1, 1) NOT NULL,
    [UserId]   INT            NOT NULL,
    [FullName] NVARCHAR (MAX) NULL,
    [Link]     NVARCHAR (MAX) NULL,
    [Verified] BIT            NULL,
    CONSTRAINT [PK_dbo.ExtraUserInformation] PRIMARY KEY CLUSTERED ([Id] ASC)
); 
```

目前没有 pages_UsersInRoles 表，它给了我一条错误消息：

```
Msg 4902, Level 16, State 1, Line 5
Cannot find the object "dbo.webpages_UsersInRoles" because it does not exist or you do not have permissions. 
```

在此消息之后，脚本似乎停止并且在此之后无法创建其他表。在脚本通过预期的错误后，我可以让脚本继续吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T08:46:34.650

比继续跳过错误更好的是测试脚本中的失败条件，例如仅删除存在的表。

代替：

```
DROP TABLE [dbo].[webpages_UsersInRoles]; 
```

尝试：

```
IF OBJECT_ID('dbo.webpages_UsersInRoles', 'U') IS NOT NULL
  DROP TABLE dbo.webpages_UsersInRoles 
```

（来自[https://stackoverflow.com/a/7887033/163495](https://stackoverflow.com/a/7887033/163495)）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T08:49:21.520

这里有几个选项，这实际上取决于您认为适合您的脚本的内容。

*   您可以将语句放在 try/catch 块中，然后吞下错误。
*   您可以执行 SMO 在生成 T-SQL 时所做的事情，并将您的语句包装在 IF 语句中，以确保有问题的对象存在。
*   您应该能够使用 GO 语句分离出您的“部分”，因为这些是作为单独的批次发送到数据库的。

# wcf - 中毒消息 MSMQ 3.0 - WCF MSMQIntegrationBinding - 奇怪的问题

> ID：15107550
> 
> 赞同：1
> 
> 时间：2013-02-27T08:42:12.103
> 
> 标签：wcf, wcf-binding

我有一个带有 WCF MSMQIntegrationBinding 的事务性 MSMQ 正在监听它。我正在通过 IerrorHandler 进行毒消息处理。

根据文本，当出现毒消息时，它将使底层通道发生故障并将消息标记为毒队列。我正在将消息移出 IErrorHandler 中的位置 quque。

我看到了什么。当我设置配置 Retrycount = 1 retryCycledelay = 0 时。消息在错误时被移动到毒物队列，但它不会使通道出错。处理队列中的后续消息。

但是当我继续配置时，Retrycount =1 retrycycledelay = 00:00:30 (30s) 消息被移动到毒物队列并且基础通道出现故障。没有进一步消息的过程发生。

为什么通道仅在第二种情况下出现故障？注意：在这两种情况下我都没有给出 Maxretrycycle。

谢谢拉克什

# c++ - C++ 类参数默认常量初始化

> ID：15107551
> 
> 赞同：0
> 
> 时间：2013-02-27T08:42:12.730
> 
> 标签：c++, class, initialization

这可能是一个愚蠢的问题，因为我在网上找不到答案，我想这是因为答案是否定的。

我有一堂课：

```
class A{
    public:
        A();
    private:
        std::string a("a");
}; 
```

我想将 a 参数设置为“a”而不调用类构造函数。原因是我真正的班级我有很多不同的构造函数和很多参数，它们总是具有相同的（常量）值。如果有一天我决定用“b”替换“a”，我不想修改所有的构造函数。此外，我希望 a 只存在于我的班级中。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-27T08:45:38.180

在 C++11 中，您可以选择在声明时初始化非静态成员变量：

```
class A{
 public:
  A();
private:
  std::string a = "a"; // curly braces allowed too: std::string a{"a"};
}; 
```

C++11 还添加了委托构造函数，因此您可以从其他构造函数调用类的构造函数。这允许您`a`只在一个地方进行初始化：

```
#include <iostream>
#include <string>

struct Foo
{
  Foo() : a("Hello, Foo!") {}
  Foo(int) : Foo() {}
  Foo(int, int) : Foo() {}
  std::string a;
};

int main()
{
  Foo f1(42);
  Foo f2 (1,2);
  std::cout << f1.a << "\n";
  std::cout << f2.a << "\n";
} 
```

否则，请按照其他答案中的建议使用构造函数初始化列表：

```
class A{
 public:
  A() : a("a") {}
 private:
  std::string a;
}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T08:43:41.783

您在类构造函数[*初始化列表*](http://en.cppreference.com/w/cpp/language/initializer_list)中对其进行初始化：

```
A::A()
    : a("a")
{
} 
```

# soapui - 从 SOAP UI 将断言失败写入文本文件或 Excel 工作表

> ID：15107553
> 
> 赞同：0
> 
> 时间：2013-02-27T08:42:22.600
> 
> 标签：soapui

我一直在使用 SOAP UI 工具来测试我的 Web 服务的模式合规性。我想将架构合规性失败导出到 Excel 或文本文件。有没有可能的方法来做到这一点？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-10-28T07:37:54.580

解决此问题的一种更通用的方法是生成报告。SOAPUI 允许生成不同格式的报告，包括 SOAPUI 免费版中的 Junit 样式报告。当然，该报告将显示每个测试用例的失败原因。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T11:52:52.573

我通过多搜索网络找到了答案。:)

我们可以使用 SOAP UI 中的 Groovy 脚本来实现这一点。

```
filePath = 'D:/SchemaComplianceResult/'
def project = testRunner.testCase.testSuite.project
fos = new FileOutputStream( filePath + project.name + '.txt', true )
pw = new PrintWriter( fos )
def runner = project.testSuites['TestSuite 1'].testCases['TestCase 1'].run( null, true )
runner.waitUntilFinished()
def errArray = runner.testCase.getTestSteps()["Request 1"].getAssertionByName("Schema Compliance").getErrors()
pw.println(runner.results[0].getResponseContentAsXml())
pw.println("Schema Compliance Results:")
for(err in errArray){
    pw.println("Line Number:" + err.getLineNumber()+ "Error Message:"  + err.getMessage())
}
pw.close()
fos.close() 
```

希望能帮助到你。

# xml - XSLT 基于属性迭代兄弟姐妹

> ID：15107554
> 
> 赞同：2
> 
> 时间：2013-02-27T08:42:24.200
> 
> 标签：xml, xslt, adobe-indesign

我正在尝试通过 XSLT 将 XML 数据导入 Adob​​e InDesign。InDesign 似乎无法使用属性，即使它可以看到属性。

我可以访问这种格式的免费天气数据：[http ://www.yr.no/sted/Norge/Oslo/Oslo/Oslo/varsel.xml](http://www.yr.no/sted/Norge/Oslo/Oslo/Oslo/varsel.xml)

我不确定我使用 XSLT 将属性转换为常规 XML 格式的方法是否最好，但它确实有效。

我遇到的问题是我需要明天的天气数据，但我只得到今天的数据。数据存储在 weatherdata/forecast/tabular/time 中。

我`<xsl:param name="speedmps" select="weatherdata/forecast/tabular/time[@period='2']/windSpeed/@mps" />`用来选择数据，但这只会选择第一个匹配项。第一场比赛是今天的天气（从12:00到18:00），我想要的是第二场比赛（第二个时段='2'比赛，即明天12:00到18:00）。一天以 4 个时段呈现，XML 文件获取了几天的预报。理想情况下，我想为今天的天气制作一个 XSLT，为明天的天气制作一个等等。

我的代码主要是剪切和粘贴，然后我尝试对其进行编辑以执行我想要的操作。我尝试制作一个 if 块，但我找不到任何可以构建的示例。目前我在 XSLT 方面的技能太基础了，而且我的期限很短。我在源数据中发现的是，时间段会根据您获取数据的时间而变化。所以我不能说它应该选择第 6 个区块，因为明天 period='2' 可能是一天中这个时候的第 5 个。（期间='0' 是 00:00 到 09:00，因此期间 0 在 09:00 之后被删除，依此类推）。

现在的第一场比赛是：

```
<time from="2013-02-27T12:00:00" to="2013-02-27T18:00:00" period="2">
    <!-- Valid from 2013-02-27T12:00:00 to 2013-02-27T18:00:00 -->
    <symbol number="1" name="Klarvær" var="01d" />
    <precipitation value="0" />
    <!-- Valid at 2013-02-27T12:00:00 -->
    <windDirection deg="187.2" code="S" name="Sør" />
    <windSpeed mps="1.5" name="Flau vind" />
    <temperature unit="celsius" value="-1" />
    <pressure unit="hPa" value="1030.2" />
  </time> 
```

现在的第二场比赛是：

```
<time from="2013-02-28T12:00:00" to="2013-02-28T18:00:00" period="2">
    <!-- Valid from 2013-02-28T12:00:00 to 2013-02-28T18:00:00 -->
    <symbol number="1" name="Klarvær" var="01d" />
    <precipitation value="0" />
    <!-- Valid at 2013-02-28T12:00:00 -->
    <windDirection deg="181.3" code="S" name="Sør" />
    <windSpeed mps="3.1" name="Svak vind" />
    <temperature unit="celsius" value="2" />
    <pressure unit="hPa" value="1015.7" />
  </time> 
```

对不起，英语不是我的母语，我尽量解释清楚。

这是我的 XSLT 代码：

```
 <?xml version="1.0" encoding="ISO-8859-1"?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
<xsl:output method="xml" encoding="ISO-8859-1" indent="yes" omit-xml-declaration="no" cdata-section-elements="" />

<!-- params -->
<xsl:param name="location" select="weatherdata/location/name"/>
<xsl:param name="alternate" select="weatherdata/links/link[@id='overview']/@url"/>
<xsl:param name="base" select="'file:///d:/temp/yr/sky/'"/>
<!-- We use the text forecast dates or? -->
<xsl:param name="lastupdate" select="weatherdata/meta/lastupdate" />
<xsl:param name="symbolnumber" select="weatherdata/forecast/tabular/time[@period='2']/symbol/@number" />
<xsl:param name="symbolname" select="weatherdata/forecast/tabular/time[@period='2']/symbol/@name" />
<xsl:param name="symbolvar" select="weatherdata/forecast/tabular/time[@period='2']/symbol/@var" />
<xsl:param name="precip" select="weatherdata/forecast/tabular/time[@period='2']/precipitation/@value" />
<xsl:param name="directiondeg" select="weatherdata/forecast/tabular/time[@period='2']/windDirection/@deg" />
<xsl:param name="directioncode" select="weatherdata/forecast/tabular/time[@period='2']/windDirection/@code" />
<xsl:param name="directionname" select="weatherdata/forecast/tabular/time[@period='2']/windDirection/@name" />
<xsl:param name="speedmps" select="weatherdata/forecast/tabular/time[@period='2']/windSpeed/@mps" />
<xsl:param name="speedname" select="weatherdata/forecast/tabular/time[@period='2']/windSpeed/@name" />
<xsl:param name="tempvalue" select="weatherdata/forecast/tabular/time[@period='2']/temperature/@value" />

<xsl:template match="/">
<yr>
<testtag>   
    <title><xsl:value-of select="$location"/></title>
    <alternate><xsl:value-of select="$alternate"/></alternate>
    <base><xsl:value-of select="$base"/></base>
    <lastupdate><xsl:value-of select="$lastupdate"/></lastupdate>
    <symbolvar><xsl:value-of select="$symbolvar"/></symbolvar>
    <symbolnr><xsl:value-of select="$symbolnumber"/></symbolnr>
    <symbolname><xsl:value-of select="$symbolname"/></symbolname>
    <precip><xsl:value-of select="$precip"/></precip>
    <tempval><xsl:value-of select="$tempvalue"/></tempval>
    <speedname><xsl:value-of select="$speedname"/></speedname>
    <speedmps><xsl:value-of select="$speedmps"/></speedmps>
    <dirdeg><xsl:value-of select="$directiondeg"/></dirdeg>
    <dircode><xsl:value-of select="$directioncode"/></dircode>
    <dirname><xsl:value-of select="$directionname"/></dirname>
    <Image><xsl:attribute name="href"><xsl:value-of select="$base"/><xsl:value-of select="$symbolvar"/>.png</xsl:attribute></Image>
</testtag>  
</yr>
</xsl:template> 

</xsl:stylesheet> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T09:36:06.100

如果你想要第二个`time[@period = '2']`元素（换句话说，如果我理解正确的话），你可以使用`time[@period='2'][2]`.

然而，您的样式表并不是您真正使用 XSLT 的方式。与将节点值存储在`<xsl:param>`元素中然后稍后处理它们不同，约定是——显然我在这里简化了很多——为`<xsl:template>`要处理的输入文档中的每个节点都有一个元素。

有很多方法可以实现您想要的，但您可以使用下面的样式表作为您的代码的起点。

### 输入

第二`<time>`个`@period`属性值为`2`：

```
<time from="2013-02-28T12:00:00" to="2013-02-28T18:00:00" period="2">
    <!-- Valid from 2013-02-28T12:00:00 to 2013-02-28T18:00:00 -->
    <symbol number="1" name="Klarvær" var="01d" />
    <precipitation value="0" />
    <!-- Valid at 2013-02-28T12:00:00 -->
    <windDirection deg="181.3" code="S" name="Sør" />
    <windSpeed mps="3.1" name="Svak vind" />
    <temperature unit="celsius" value="2" />
    <pressure unit="hPa" value="1015.7" />
</time> 
```

### 样式表

```
<?xml version="1.0" encoding="ISO-8859-1"?>
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="1.0">
  <xsl:output method="xml" encoding="ISO-8859-1" indent="yes" omit-xml-declaration="no" cdata-section-elements=""/>
  <xsl:strip-space elements="*"/>

  <!--
  The position of the time[@period = '2'] element; indexing starts from 1.
  You can pass in this parameter to the transformation if you want the
  time[@period = '2'] element in some other position.
  -->
  <xsl:param name="time" select="2"/>
  <xsl:param name="base" select="'file:///d:/temp/yr/sky/'"/>

  <xsl:template match="/">
    <yr>
      <testtag>
        <xsl:apply-templates select="weatherdata"/>
      </testtag>
    </yr>
  </xsl:template>

  <xsl:template match="weatherdata">
    <xsl:apply-templates select="location/name"/>
    <xsl:apply-templates select="links/link[@id = 'overview']"/>
    <base><xsl:value-of select="$base"/></base>
    <xsl:apply-templates select="meta/lastupdate"/>
    <!-- Apply the <time period="2"> element in $time position -->
    <xsl:apply-templates select="forecast/tabular/time[@period = '2'][number($time)]"/>
  </xsl:template>

  <xsl:template match="tabular/time">
    <xsl:apply-templates select="symbol"/>
    <xsl:apply-templates select="precipitation"/>
    <xsl:apply-templates select="temperature"/>
    <xsl:apply-templates select="windSpeed"/>
    <xsl:apply-templates select="windDirection"/>

    <!--
    Use attribute value template (AVT) to construct the attribute value:
    http://lenzconsulting.com/how-xslt-works/#attribute_value_templates
    -->
    <Image href="{concat($base, symbol/@var, '.png')}"/>
  </xsl:template>

  <xsl:template match="location/name">
    <title>
      <xsl:value-of select="."/>
    </title>
  </xsl:template>

  <xsl:template match="links/link">
    <alternate>
      <!-- Use the value of the @url attribute of this element -->
      <xsl:value-of select="@url"/>
    </alternate>
  </xsl:template>

  <xsl:template match="temperature">
    <tempval>
      <xsl:value-of select="@value"/>
    </tempval>
  </xsl:template>

  <xsl:template match="windSpeed">
    <speedname>
      <xsl:value-of select="@name"/>
    </speedname>

    <speedmps>
      <xsl:value-of select="@mps"/>
    </speedmps>
  </xsl:template>

  <xsl:template match="windDirection">
    <dirdeg>
      <xsl:value-of select="@deg"/>
    </dirdeg>

    <dircode>
      <xsl:value-of select="@code"/>
    </dircode>

    <dirname>
      <xsl:value-of select="@name"/>
    </dirname>
  </xsl:template>

  <xsl:template match="precipitation">
    <precip>
      <xsl:value-of select="@value"/>
    </precip>
  </xsl:template>

  <xsl:template match="symbol">
    <symbolvar>
      <xsl:value-of select="@var"/>
    </symbolvar>

    <symbolnr>
      <xsl:value-of select="@number"/>
    </symbolnr>

    <symbolname>
      <xsl:value-of select="@name"/>
    </symbolname>
  </xsl:template>

  <xsl:template match="lastupdate">
    <!-- Copy the original node as is -->
    <xsl:copy>
      <xsl:apply-templates/>
    </xsl:copy>
  </xsl:template>
</xsl:stylesheet> 
```

### 输出

```
<?xml version="1.0" encoding="ISO-8859-1"?>
<yr>
  <testtag>
    <title>Oslo</title>
    <alternate>http://www.yr.no/sted/Norge/Oslo/Oslo/Oslo/</alternate>
    <base>file:///d:/temp/yr/sky/</base>
    <lastupdate>2013-02-27T06:39:00</lastupdate>
    <symbolvar>01d</symbolvar>
    <symbolnr>1</symbolnr>
    <symbolname>Klarv?r</symbolname>
    <precip>0</precip>
    <tempval>2</tempval>
    <speedname>Svak vind</speedname>
    <speedmps>3.1</speedmps>
    <dirdeg>181.3</dirdeg>
    <dircode>S</dircode>
    <dirname>S?r</dirname>
    <Image href="file:///d:/temp/yr/sky/01d.png"/>
  </testtag>
</yr> 
```

# ios - iOS "frame layout"

> ID：15107559
> 
> 赞同：1
> 
> 时间：2013-02-27T08:42:33.217
> 
> 标签：ios, layout

I'm new to iOS development but I would like to start with it. I would like to create a simple application for iPad which is simular to that one from the jpg attached.

![layout](../Images/5ec1769b4ce24fbb1fdf91557ad49829.png)

Main assumptions: - section A cointains some list of items representing some objects - I can drag and drop the element from A to B and then B cointains some graphical representation of a dragged item (some kind of canvas). - C contains a table which depends on what section B contains

For now, my main question is if it is possible to create such layout. I've made a research and found out something about UISplitView but as far as I've understood it supports only "two columns" layout. I'm affraid that TableView is not good for me as well (rows only).

I assume that I need (at least) - controler and model for displaying A content - controler and model for displaying B content - controler for C (model the same as for B) - and a root controller

Am I right?

I dont have much time for creating this app, so that's why Im asking you for any clues and advise **from what should I start learning** to not waste the time...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T08:56:16.763

From what you've described your layout should not be difficult to implement. If you have additional requirements (as in the question I asked) it will get more complicated. If it is a static layout you can just put your views in a container view just as you described. You can have the views hooked up to outlets on the UIViewController for the root view, or you can have controllers for individual views or subsets of views.

Perhaps you are coming from the Android world where layout views are used. On iOS there is less use of layout views. Instead any view is a container.

# android - 如何使用下面的 WRITE_APN_SETTINGS ICS

> ID：15107562
> 
> 赞同：1
> 
> 时间：2013-02-27T08:42:37.687
> 
> 标签：android

据我所知 WRITE_APN_SETTINGS 从 android 4.0 开始被锁定。但是对于较低版本是可能的。

带有最后安装插件 v21.1 的 Eclipse。不允许我把它写在清单中。（出现错误“仅授予系统应用程序权限”）。

我怎么做？

# python - 在 python 中使用 fileConfig 时出现 500 内部服务器错误

> ID：15107572
> 
> 赞同：1
> 
> 时间：2013-02-27T08:43:17.300
> 
> 标签：python, python-2.7, pylons

我是 python 新手，并开始使用它进行 Web 应用程序开发。因此，从 SVN 获取完整代码后，我已在本地（**Windows 7**）上对其进行了配置。为 apache 正确配置 vhost 后，我​​在 wsgi 文件中浏览了以下代码：

```
 import os, sys
    from paste.script.util.logging_config import fileConfig

    baseDir='D:/myapp'
    configFile = os.path.join(baseDir, 'development.ini')

    sys.path.append(baseDir)

    fileConfig(configFile)

    from paste.deploy import loadapp
    application = loadapp('config:%s' % configFile) 
```

问题是我在使用上面的代码时遇到了 500 内部服务器错误，但是如果我注释
**from paste.script.util.logging_config import fileConfig**和**fileConfig(configFile)**行，它可以正常工作。

谁能说出**fileConfig()**的用途以及为什么我在使用它时遇到 500 错误问题。

我正在使用**pylon 框架**和**python 2.7.3**。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T08:48:08.037

您可以简单地进行检查：

```
if os.path.exists(configFile): 
    ... 
```

或者如果文件存在：

```
try:
    fileConfig(configFile)
except Exception as e:
    print('There was a horrible error: {}'.format(e)) 
```

但要完全理解问题，请参阅带有完整错误回溯的 apache 错误日志。

# sql - 将 cdc 历史数据存储在自定义表/另一个数据库中

> ID：15107574
> 
> 赞同：0
> 
> 时间：2013-02-27T08:43:19.607
> 
> 标签：sql, sql-server, ssis, cdc

我想将“更改数据捕获”历史记录行存储在另一个数据库/表中。
我该如何实施？
我应该使用自己的服务，寻找 cdc 表和复制行吗？
我可以为此使用 SSIS cdc[包吗？](http://msdn.microsoft.com/en-us/library/bb895315.aspx)（我从不使用 SSIS，读完这篇文章后，我很困惑）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T09:09:42.400

我真的不认为这是开箱即用的。最好的办法是将 CDC 数据存储在单独的文件组中。这是使用 的`@filegroup_name`参数完成的`sys.sp_cdc_enable_table`。

如果您打算这样做，并且希望保留所有 CDC 内置内容，例如辅助视图/函数生成和更改查询系统函数，则需要：

(1) 创建一个与你的主数据库结构相同的空数据库

(2) 在新数据库中配置 CDC，就像在原来的数据库中一样

(3) 安排某种工作来复制数据（如果数据库要在不同的服务器上，您可以使用 SSIS，或者如果在同一台服务器上，您可以使用存储过程。如果您可以将 SP 也用于单独的服务器想使用链接服务器）从原始数据库中的 CDC 表中，包括`cdc.lsn_time_mapping`（可能还有其他系统表，但是，这是主要的），到新数据库中。

# c++ - 我们如何在 C++ 的类构造函数中初始化 std::vector？

> ID：15107580
> 
> 赞同：8
> 
> 时间：2013-02-27T08:43:35.970
> 
> 标签：c++, constructor, stdvector

我们如何在 C++ 的类构造函数中初始化 std::vector？

```
class MyClass
{
public:
    MyClass( int p_Var1, int* p_Vector ) : Var1( p_Var1 ) //, Initialize std::vector - MyVector with p_Vector
    {
    };
    ~MyClass( void );
private:
    int Var1;
    std::vector< int > MyVector;
}; 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-27T08:50:43.063

首先，`myVector`即使您什么也不做，也会被初始化，因为它具有非平凡的构造函数。如果你想给它一个指向序列的指针来初始化它`int`，你还必须知道长度。如果你有一个指针和长度，你可以这样做：

```
: myVector( pInitialValues, pInitialValues + length ) 
```

或者（更惯用），您将让调用者进行加法，并让构造函数获取两个指针，一个开始和结束：

```
: myVector( pBegin, pEnd ) 
```

（如果调用者使用的是 C++11，他可以使用`std::begin()`and从 C 风格的数组中获取这些`std::end()`。）

编辑：

只是为了清楚地说：只是一个`int*`没有提供足够的信息来做任何事情。An`int*`指向 C 风格数组的第一个元素；您还需要一些查找结束的方法：元素计数、结束指针等。在特殊情况下，可以使用其他技术；即，如果 C 样式数组仅包含非负数，则可以`-1`用作哨兵，例如`: myVector( pVector, std::find( pVector, NULL, -1 ) )`. 然而，这些都是特殊情况。

# android - 谷歌是否停止了地图 api v1？

> ID：15107601
> 
> 赞同：0
> 
> 时间：2013-02-27T08:45:15.873
> 
> 标签：android

谷歌地图 API v1 不工作.. 谷歌是否停止了他们的地图 API v1 服务因为我在我的应用程序中看不到任何地图，而是我只能看到一些网格。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T08:47:28.587

不，它没有停止。然而，谷歌地图 v1 已被弃用。如果您有 api 密钥，您应该仍然可以使用它（我刚刚注意到您仍然可以在接下来的几天内请求新密钥）。[你可以在这里](https://developers.google.com/maps/documentation/android/v1/)阅读更多关于它的信息：

> Google Maps Android API 版本 1 已于 2012 年 12 月 3 日正式弃用。这意味着从 2013 年 3 月 3 日起，您将无法再请求此版本的 API 密钥。Google Maps Android API v1 不会添加任何新功能。但是，使用 v1 的应用程序将继续在设备上运行。鼓励现有和新开发人员使用 Google Maps Android API v2。

关于您的问题，您是在设备上还是在模拟器上尝试。另外，所述设备/模拟器是否有连接？在浏览器上试试。

# ruby-on-rails - gmaps rails忽略缩放参数

> ID：15107602
> 
> 赞同：0
> 
> 时间：2013-02-27T08:45:18.663
> 
> 标签：ruby-on-rails, ruby

有人知道如何解决这个问题吗？看起来下一行中的缩放参数被忽略了。每次我都会以相同的缩放级别获得相同的视图。感谢您的任何提示。

```
=gmaps("map_options" => { "detect_location" => false, "center_on_user" => false, "zoom" => 9},"markers" => { "data" => @json }) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-22T23:37:59.027

您在 gmaps 方法中缺少 {}。您的所有参数都应该用括号括起来，如下所示：

```
<%= gmaps({
            "map_options"   => { "detect_location" => false, "center_on_user" => false, "zoom" => 9},
            "markers"       => { "data" => @json } 
    })
%> 
```

# c++ - 点围绕某个点的角度

> ID：15107604
> 
> 赞同：0
> 
> 时间：2013-02-27T08:45:28.503
> 
> 标签：c++, rotation, geometry, angle

我已经对从某个点和问题中以某个角度旋转一个点进行了一些调查：[C++：围绕某个点旋转一个向量到目前为止](https://stackoverflow.com/questions/620745/c-rotating-a-vector-around-a-certain-point)我已经想出了以下方法，但它没有给我正确的结果，有人可以识别吗问题

```
const float angle = -90.0;
const float degreePerRadian = 57.2957795;
const float s = sin(angle / degreePerRadian);
const float c = cos(angle / degreePerRadian);
int p1x = 320;
int p1y = 480;
int p2x = 320;
int p2y = 320;

float centerX = (p2x - p1x) / 2 + p1x;
float centerY = (p2y - p1y) / 2 + p1y;
p2x -= centerX;
p2y -= centerY;
double newX = centerX + (p2x * c - p2y * s);
double newY = centerY + (p2x * s + p2y * c); 
```

我得到：newX = 240 和 newY = 400

编辑：虽然我有一架奇怪的飞机

```
 |
                                |    ^
                                |    |
                                |
       -------> ^ (320, 480)    |   (y+)
            90° |               |    |
                |               |    |
                |               |
                . (320, 320)    |
                                |
                                |
      --------------------------(0,0)
                <-- (x+) -- 
```

如果我想找出点 (320, 480) 的 90 度角，如果线落在左边和右边

事实上，更准确地说，平原是颠倒的（基本上我使用的是 QGraphicsScene，所以左上角是 0,0，右下角是宽度（），高度（）

```
 (x+) --->
     (0,0) --------------------------
     |
     |
     |      . (320, 320)
     |      |
     |      |
     |      | 90°
     |      . (320, 480)----------
     |
     |
(y+) |
     |
     | 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T11:49:16.840

您链接中的第 16 行代码不正确。它应该是：

双newY = centerY + (p2x * s **+** p2y * c);

# ios - 使用 AAM 在 Opencv 中检测嘴唇

> ID：15107608
> 
> 赞同：6
> 
> 时间：2013-02-27T08:45:38.337
> 
> 标签：ios, opencv

我是 iOS 开发和 Opencv 的新手。我想检测确切的嘴唇位置及其宽度和高度。我使用了那些 haarcascade_mcs_mouth.xml 文件，但结果并不令人满意。因此，如果有人能给我一些关于 AAM 流程的想法，那将非常有帮助。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T09:04:15.753

[https://github.com/MasteringOpenCV/code](https://github.com/MasteringOpenCV/code) 第 6 章和第 7 章

（这本书部分在 google.books 上）

我认识的另外 2 个人：

[http://code.google.com/p/aam-opencv/](http://code.google.com/p/aam-opencv/)

[http://code.google.com/p/asmlib-opencv](http://code.google.com/p/asmlib-opencv)

和 ofc，STASM，[http://www.milbo.users.sonic.net/](http://www.milbo.users.sonic.net/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T09:15:09.057

为什么不使用 OpenCV 来检测嘴唇位置，为什么不使用 Core Image？使用级联提升计算量很大。我敢打赌，性能会受到一些“速度”的影响，不是吗？

通过使用核心图像：

```
CIDetector* detector = [CIDetector detectorOfType:CIDetectorTypeFace
context:nil options:[NSDictionary dictionaryWithObject:CIDetectorAccuracyHigh forKey:CIDetectorAccuracy]]; //You can adjust accuracy here
NSArray* features = [detector featuresInImage:image];

for(CIFaceFeature* faceFeature in features)
{
    if(faceFeature.hasMouthPosition)
    {
        //Access mouse position using 'faceFeature.mouthPosition'
        //track maybe?
        //use Lucas Kanade tracker or Fast Corner tracker
    }
} 
```

# android - 如何使用 zxing 库从一张图像中读取多个二维码

> ID：15107610
> 
> 赞同：19
> 
> 时间：2013-02-27T08:45:44.120
> 
> 标签：android, android-camera, qr-code, zxing

我目前正在开发一种扫描仪，可以读取一张图像中的多个二维码。我设法读取图像中的二维码，但结果不一致。假设图像中有 4 个 QR 码，有时我可以读取 2 个，有时可以读取 3 个或仅 1 个。与原始扫描仪（ZXing Scanner）不同，它解码速度很快。而在我的情况下，我必须确保有足够的光线并且图像不会模糊以对其进行解码。

我正在使用`QRCodeMultiReader`来解码图像。当前使用`ZXing`库来创建应用程序。

以下是我的代码片段：

```
public void onPictureTaken(byte[] data, Camera camera) {
   BitmapFactory.Options opt = new BitmapFactory.Options();
    opt.inMutable = true;
   Bitmap bitmap = BitmapFactory
            .decodeByteArray(data, 0, data.length, opt);
   Hashtable<DecodeHintType, Object> hints = new Hashtable<DecodeHintType, Object>();
   hints.put(DecodeHintType.TRY_HARDER, Boolean.TRUE);
   LuminanceSource source = new RGBLuminanceSource(bitmap);

   QRCodeMultiReader multiReader = new QRCodeMultiReader();
   Result[] results = multiReader.decodeMultiple(new BinaryBitmap(
   new HybridBinarizer(source)), hints);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-09-21T06:02:21.973

我已经为相机创建了一个应用程序，我将其用作`intent`默认的相机应用程序，每个 Andriod 操作系统都存在，通常它们比编写一个仅针对您的手机优化的通用相机应用程序更适合该设备......所以对于相机更好用`intent`。

为了从单个图像中提取多个 QR，我尝试了下面的代码。
但是结果不一致有时我得到 1 或 2 或 3 出 4 有时没有....它不是完美的解决方案

```
if(photo == null) 
        return;
    Bitmap ScaledQr = null;
    ScaledQr = Bitmap.createScaledBitmap(photo, 640,480, false);
    BinaryBitmap Qr = BitMap2BinayBitmap(ScaledQr);
    Result [] kpResultMulti = null;
    Result kpResultSingle = null;
    Hashtable<DecodeHintType, Object> hints = new Hashtable<DecodeHintType, Object>();
    hints.put(DecodeHintType.TRY_HARDER, true);
    //hints.put(DecodeHintType.PURE_BARCODE, true);

    try {
        kpResultMulti = kpReaderArr.decodeMultiple(Qr,hints);
    } catch (NotFoundException e) {
        // TODO Auto-generated catch block
        msbox("Exception","NotFoundException");
        e.printStackTrace();
    }

    if(kpResultMulti != null){
        msbox("Total Result" ,kpResultMulti.length +"");// + photo.getWidth() +     "Height=" + photo.getHeight());
        for(Result kp : kpResultMulti)
        {

            msbox("Results",kp.getText());
        }
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T09:56:41.537

您好，请检查 Zxing Barcode Scanner 应用程序，它在设置中具有扫描批量条形码的选项，因此您启用它并检查它您可以一次从一个或多个图像中读取多个 QR 码，还可以检查 Zxing 库的源代码到 Known详细信息。

[https://code.google.com/p/zxing/](https://code.google.com/p/zxing/)

# php - 如何在xml文件中编码html标签和特殊字符

> ID：15107611
> 
> 赞同：0
> 
> 时间：2013-02-27T08:45:44.930
> 
> 标签：php, xml, simplexml

我的 xml 文件中有一个`<text>`标签，我将数据库中的文章内容放入其中。它包含html标签。示例内容如下所示

```
lt;p class="align-justify"&gt;1\. Zagadnienia wst&#x119;pne&lt;/p&gt;&#xD;
&lt;p class="align-justify"&gt;2\. Wyja&#x15B;nienia do wzoru&lt;/p&gt;&#xD; 
```

同样的问题是国家特殊字符：/

在我的文件中看起来像这样。这个可以吗？我不能将它们保存为标签吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T08:49:19.913

您可以在 de CDATA 标记之间嵌入 html 代码。这将阻止您的 XML 处理器对 HTML 特殊字符进行转义。有关更多详细信息，请参阅[文档](http://www.w3schools.com/xml/xml_cdata.asp)。

# java - 渲染 10x10 立方体 openGl 1.0 es

> ID：15107612
> 
> 赞同：0
> 
> 时间：2013-02-27T08:45:45.060
> 
> 标签：java, android, opengl-es

有人可以告诉我这里出了什么问题；）我渲染了尺寸为 2x2 的立方体，结果是：

![那是错的](../Images/eab372bf23b3192a9faf69fbcc5eef32.png)

```
gl.glPopMatrix();

    for(int j=0;j<10;j++){
    gl.glTranslatef(-10, 0, 0f);
    cube.draw(gl);
    for(int i=0;i<9;i++){
    gl.glTranslatef(2.0f, 0, 0f);
    cube.draw(gl);
    }
    gl.glTranslatef(-8f, 0, -2);
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T08:54:30.357

您需要启用深度测试：

```
glEnable(GL_DEPTH_TEST); 
```

并且不要忘记清除颜色和深度缓冲区：

```
glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT); 
```

# xmpp - ejabberd jabber中奇怪的用户标识

> ID：15107619
> 
> 赞同：0
> 
> 时间：2013-02-27T08:45:59.353
> 
> 标签：xmpp, ejabberd, uid

我确实尝试过用谷歌搜索这个，但显然我不知道正确的问题......

我有自己的 jabber 服务器在 ejabberd 上运行。这是我管理联系人的公司服务器，所以我确定每个人的 vCard 中都设置了全名，其他字段为空。

困扰我的是，当用户在他的名单中给某人发短信时，他的昵称会以这种可怕的方式显示：

> martin.lukes@myserver.cz/36694788191361948416825289：测试消息

虽然当有人回短信时，他的名字会显示为全名（在他的 vCard 中设置）。

描述的行为是在 Pidgin 中，我也尝试了 Gajim，在那里我了解到这些数字可能意味着一些“位置”（捷克语中的“Zdroj”）。在对话历史记录中，Gajim 使用 vCard 中的全名，但对话窗口的标题仍然是：

> martin.lukes/36694788191361948416825289

这使我认为这将是 ejabberd 设置中的某些内容，但我不知道是什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T12:13:02.770

“奇怪的数字”是用户 JID 的资源部分（也称为“资源”）。它们通常与用户的位置无关，或者由 XMPP 客户端在登录时设置，或者，如果客户端没有指定资源，XMPP 服务器将为资源部分生成一个随机值。

[RFC 6121 1.4：](http://xmpp.org/rfcs/rfc6120.html#intro-terms)

> 术语**“裸 JID”**指的是 XMPP 地址 `localpart@domainpart`（对于服务器上的帐户）或 domainpart 形式（对于服务器）。
> 
> 术语**“完整 JID”**指的是表单的 XMPP 地址 `localpart@domainpart/resourcepart`（用于与帐户关联的特定授权客户端或设备）或表单 `domainpart/resourcepart`（用于与服务器关联的特定资源或脚本）。

它们用于区分同一用户的多个连接。与许多其他 IM 协议不同，XMPP 允许同一用户从多个设备“在线”。资源部分标识设备/连接。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T09:20:38.013

好的，Flow 的回答将我推向了正确的方向。

如果您想摆脱服务器生成的随机数，请设置您的资源（在帐户设置中的域和密码之间）。但请注意，它仍然会给你留下

> martin.lukes@myserver.cz/

更好的是，在帐户设置中设置您的本地别名，这将使用它而不是上面提到的任何内容。虽然我不明白为什么如果本地别名为空，Pidgin 不会自动使用 vCard（全名、姓名、姓氏）中的字段。我将尝试查找是否存在错误，如果没有则提交。

# php - 使用 PHP 预先确定页面顺序

> ID：15107627
> 
> 赞同：0
> 
> 时间：2013-02-27T08:46:11.597
> 
> 标签：php, forms

我正在为在线实验构建一个多页表单，其中将涉及向不同用户显示不同版本的问题。有没有一种简单的方法来创建包含不同页面文件组合的页面序列？假设我有这些文件：`1A.php`和`1B.php`（第 1 页）；`2A.php`和`2B.php`（第 2 页）；`3A.php`, `3B.php`, `3C.php`, `3D.php`,`3E.php`和`3F.php`（第 3 页）等等，我将如何创建一组独特的导航路径？例如，一个可能是 [ `1A.php`-> `2B.php`-> `3E.php`-> `4B.php`] 而另一个是 [ `1A.php`-> `2B.php`-> `3A.php`->`4C.php`]。（我是 PHP 新手，所以我怀疑这可能不是最复杂的做事方式，但只要可行，我就很高兴。）每个页面都有一个`<input type="submit">`按钮，并通过单独的 PHP 文件连接到数据库。

这个想法是将用户从起始页面随机重定向到（12）个预设序列之一。

有什么建议么？

**编辑**：这里的目标不是生成*所有*可能的问题集。澄清一下，目标是指定 12 种可能的页面组合（出于与实验设计有关的原因）。问卷将有一个起始页，从这里我想将受访者重定向到 12 个分支之一。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T09:02:28.517

所以你想根据你的选择将不同的内容加载到页面中？如果是，请执行以下操作：

```
<a href="1A.php?id=1B">1B</a>
if(isset($_GET["id"])){

//loads page 1A.php?id=1B with whatever html or php you want to load

}
else {

//loads page 1A.php ,with default content

} 
```

您可以添加任意数量的链接，并将所有内容加载到 1 个页面中，尽管如果您有两个以上的页面，您必须在一个巨大的开关中为每个页面编写代码，或者从数据库中加载内容（其中我建议）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T09:16:44.000

```
$questionaires = array('1a','1b',...,'2a','2b',...,'3a'...);//list all those filenames here

function generate_questionaire(&$array)
{
    $key = rand(0, count($array);
    unset($array[$key]);
    return $key;
}

so call that function every time you want to include a `php` file thus:
<?php
$questionNum = generate_questionaire($questionauires);
include_once($questionNum.'.php');
?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-27T09:46:12.500

这应该可以解决问题：来自答案[https://stackoverflow.com/a/10466745/1481489的](https://stackoverflow.com/a/10466745/1481489)[http://pyrus.sourceforge.net/Math_Combinatorics.html](http://pyrus.sourceforge.net/Math_Combinatorics.html) 顺便说一句，您正在谈论排列：[排列 - 所有可能的集合数字](https://stackoverflow.com/questions/5506888/permutations-all-possible-sets-of-numbers)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-27T11:25:56.753

在您的表单中，在每个页面上，都有一个名为 step 的隐藏字段，如下所示

```
<input type="hidden" name="step" value="1"> // this is for step 1.. value="2" for step 2 etc 
```

在重定向之前的处理文件中执行以下操作

```
$nextstep = (int)$_POST['step'];
$nextstep++;
$optionsarray = array('A','B','C','D','E','F','G','H','I','J','K','L');
header('Location: ' . $nextstep . $optionsarray[rand(0,11)] . '.php'); 
```

这将随机选择一个选项..但分配下一步编号（1,2,3等）

我想这就是你所追求的..

**编辑**：这个呢

```
$nextstep = (int)$_POST['step'];
$nextstep++;
$stepsarray = array('1'=>5,'2'=>6,'3'=>2,'4'=>6); // '1'=>5 (step 1, 5 posibilities)  '2'=>6 (step 2, 6 posibilities) etc..
$optionsarray = array('A','B','C','D','E','F','G','H','I','J','K','L');
header('Location: ' . $nextstep . $optionsarray[rand(0,$stepsarray[$nextstep])] . '.php'); 
```

所以它的作用是有一个名为的数组`$stepsarray`- 它告诉你每个步骤有多少可能性..然后使用`rand`仍然生成 url，但可能的最大数量是下一步的最大可能性..这可能对你更好，但如果你对你的设置很满意然后别担心:-)

# jquery - 如何将比率插件应用于新生成的 div？

> ID：15107629
> 
> 赞同：6
> 
> 时间：2013-02-27T08:46:25.123
> 
> 标签：jquery, raty

我有一个带有比率 div 的页面。使用经典代码`$('.raty').raty({...});`，插件可以在这些现有的 div 上完美运行。但是，当我通过 ajax 函数加载新的比率 div 时，新的 div 不会“转换为星星”。你能帮我找出我的错误吗？

```
$.ajax({
    url: '/ws/player/reviews/p/1',
    context: document.body,
    contentType: "application/json; charset=utf-8",
    dataType: "jsonp",
    jsonp: "callback",
    jsonpCallback: "jsonpCallbackfunction",
    success: function(data) {
        $.each(data.response.reviews, function( key, value ) {
            html = '';
            html += '<div class="raty read" data-rating="5"></div>';
            $('#reviews').append(html);
        });

    }
    data: {player_id: player_id, from: $('#reviews').data('from')}
}).done(function() {
    $(this).find('.raty').raty({
        path: '/img/raty/',
        readOnly: true,
        score: function() {return $(this).data('rating');}
    });
}); 
```

虽然，如果我尝试`$(this).find('.raty').html('blablabla');`“blablabla”正确地写在我所有的“.raty”div 中。

谢谢你的帮助，

杰里米

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-04-25T05:03:37.983

你犯了一个小错误

## 看到这个代码

```
$.ajax({
url: '/ws/player/reviews/p/1',
context: document.body,
contentType: "application/json; charset=utf-8",
dataType: "jsonp",
jsonp: "callback",
jsonpCallback: "jsonpCallbackfunction",
success: function(data) {
    $.each(data.response.reviews, function( key, value ) {
        html = '';
        html += '<div class="raty read" data-rating="5"></div>';
        $('#reviews').append(html);
    });
}
data: {player_id: player_id, from: $('#reviews').data('from')}}).done(function() {
$(this).find('#reviews .raty').raty({ // Changes
    path: '/img/raty/',
    readOnly: true,
    score: function() {return $(this).data('rating');}
});}); 
```

希望，此代码将工作

# iphone - 避免标题在 ios 中使用 UITableViewStylePlain 在 UITableView 中滚动？

> ID：15107632
> 
> 赞同：1
> 
> 时间：2013-02-27T08:46:30.587
> 
> 标签：iphone, ios, ipad, uitableview

嗨，我有一个简单的表格视图。顶部有标题..我只想滚动单元格而不是标题..有什么解决方案我也看到了，但它不起作用[是否可以使用 UITableViewStylePlain 禁用 UITableView 中的浮动标题？](https://stackoverflow.com/questions/1074006/is-it-possible-to-disable-floating-headers-in-uitableview-with-uitableviewstylep)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T09:10:35.977

你可以这样做，因为提到 babyPanda 就像你必须带一个进入你`UIView`的`UItableview`XIB 一样。

如下图“-

![在此处输入图像描述](../Images/6f58bdcdd73db7deb9d837664ad43ab5.png)

我只是为您创建一个演示，请检查下面的链接并尝试，希望它对您有所帮助

[http://www.sendspace.com/file/xguycm](http://www.sendspace.com/file/xguycm)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T08:49:43.690

一种可能的替代方法（可能不称为“解决方案”）是使标题视图成为部分中的第一个单元格。

注意：如果您尝试修复第一部分的标题，那么唯一可能的方法可能是使其成为一个视图，其框架位于表格视图的正上方。

# plsqldeveloper - PLS-00321 错误

> ID：15107636
> 
> 赞同：0
> 
> 时间：2013-02-27T08:46:42.003
> 
> 标签：plsqldeveloper

我已宣布如下记录

```
TYPE pg_wad_usr_portgrp_rec IS RECORD (
   user_id npe_user.user_id%TYPE,
   Portal_grp_name npe_portal_grp.protal_group_name%TYPE
); 
```

当我在以下过程中使用相同的值时出现错误

```
PROCEDURE add_rmv_usr_portal_grp (
                       p_user_portal_grp   IN   pg_wad_usr_portgrp_tab,
                       p_status            OUT   VARCHAR2 )
Begin
pg_wad_usr_portgrp_rec := p_user_portal_grp; 
```

**错误 ：**

```
02:34:11.795    DBMS    npeproc -- PLS-00321: expression 'PG_WAD_USR_PORTGRP_REC' is inappropriate as the left hand side of an assignment statement 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-26T12:19:03.663

该表达式未指定可以为其分配值的变量。例如，函数 SYSDATE 不能出现在赋值语句的左侧

类型 pg_wad_usr_portgrp_rec 是记录 (user_id npe_user.user_id%TYPE) pg_wad_usr_portgrp_data pg_wad_usr_portgrp_rec;

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-06-06T09:16:58.797

首先，定义是 pg_wad_usr_portgrp_rec 和参数类型 pg_wad_usr_portgrp_tab 所以不确定是否需要使用复合类型或复合类型的集合。无论如何，您不能为类型定义赋值。

```
DECLARE
  TYPE pg_wad_usr_portgrp_rec IS RECORD 
  (
     user_id npe_user.user_id%TYPE,
     Portal_grp_name npe_portal_grp.protal_group_name%TYPE
  );

  TYPE pg_wad_usr_portgrp_tab IS TABLE OF pg_wad_usr_portgrp_rec;

  PROCEDURE add_rmv_usr_portal_grp (
           p_user_portal_grp   IN   pg_wad_usr_portgrp_tab,
           p_status            OUT   VARCHAR2) AS

    lpg_wad_usr_portgrp_tab pg_wad_usr_portgrp_tab;
  BEGIN
    lpg_wad_usr_portgrp_tab := p_user_portal_grp;
  END;
BEGIN
  null;
END;
/ 
```

# ios - NSFileManager：如果存在重复文件

> ID：15107637
> 
> 赞同：1
> 
> 时间：2013-02-27T08:46:42.893
> 
> 标签：ios, nsfilemanager

复制文件时，我想在我的 iOS 应用程序中使用 OSX 行为：如果存在，请在其上附加一个计数器：

*   我的文件.png => 我的文件 1.png
*   我的文件20.png => 我的文件20 1.png
*   我的文件 20.png => 我的文件 21.png
*   ...

有没有内置的方法可以做到这一点，还是我必须自己构建该功能？我找不到类似的东西，但我不认为我是第一个需要这种行为的人......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T09:08:57.027

您可以执行以下操作，`requestedName`用户选择的文件名在哪里，文件`extension`的扩展名`basePath`是您尝试将其存储在的文件夹：

```
 NSFileManager *fm = [NSFileManager defaultManager];
 NSString * filename = requestedName;

 if ([fm fileExistsAtPath:[basePath stringByAppendingPathComponent:requestedName]]) 
{   
     unsigned int counter = 1;
     while ( [fm fileExistsAtPath: [basePath stringByAppendingPathComponent: filename]]) 
     {
         //NSLog(@"File already exists %@", filename);
         NSURL *originalFilePath = [NSURL URLWithString:[kTempPath stringByAppendingPathComponent:filename]];
         filename = [[NSString stringWithFormat: @"%@-%d",
         [requestedName stringByDeletingPathExtension], counter]stringByAppendingPathExtension: extension];
         counter ++;
         NSURL *newFilePath = [NSURL URLWithString:[kTempPath stringByAppendingPathComponent:filename]];
         [fm moveItemAtURL:originalFilePath toURL:newFilePath error:nil]; 
      // just in case
         if (counter > 512) break;
     }
} 
```

如果文件不存在，那么只需使用NSFileManager`moveItemAtURL`或`moveItemAtPath`从 NSFileManager 将其移动到正确的位置。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-10-17T01:36:26.443

您可以只更改源文件名，并将该名称用作源路径最后一个组件。像这样：

```
-(XMPFile*) duplicateDocument:(XMPFile*)file error:(NSError **)error
{
    NSString *filePath = [file path];
    NSString *destinationPath = [[file path] stringByDeletingLastPathComponent];
    NSString *pathExtension = [filePath pathExtension];

    NSFileManager *fileManager = [NSFileManager defaultManager];
    NSString *fileName = [[[file path] lastPathComponent] stringByDeletingPathExtension];

    unsigned int counter = 2;

    while ([fileManager fileExistsAtPath:filePath])
    {
        NSString *duplicatedFilePathLastComponent = [[NSString stringWithFormat: @"%@ %d", fileName, counter] stringByAppendingPathExtension: pathExtension];

        NSString *duplicatedFilePath = [destinationPath stringByAppendingPathComponent:duplicatedFilePathLastComponent];

        if (![fileManager fileExistsAtPath:destinationPath]) {
            if ([fileManager copyItemAtPath:filePath toPath:duplicatedFilePath error:error]) {
                XMPFile *duplicatedXMPFile = [[XMPFile alloc] initWithPath:duplicatedFilePath];
                return duplicatedXMPFile;
            }
        }

        counter ++;
    }
    return nil;
} 
```

如果需要，您也可以添加错误消息

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-27T08:53:44.690

I don't think there is any in built mechanism in NSFileManager. Most probably you will need to implement your own by inspecting error type. If error is of kind 'already exists' then try to append appropriate counter and copy.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-27T08:53:53.337

It is not supported by iOS.

You will need to generate the random counter (probably time tick) and append it to file name.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-05-19T17:49:26.677

我意识到这里已经有几个答案，但我觉得我的答案比提供的答案更直接。

我也需要解决这个问题。我刚刚定义了一个函数，以便可以轻松地对其进行单元测试。

```
- (NSString*)findNextValidFilePathAt:(NSString*)destination
                        withFileName:(NSString*)fileName
{
    NSFileManager* filemgr = [NSFileManager defaultManager];
    NSString* newFilePath = [destination stringByAppendingPathComponent:fileName];
    NSString* originalFilePathWithoutExtension = [newFilePath stringByDeletingPathExtension];
    NSString* pathExtension = [fileName pathExtension];
    int numberToAppend = 0;

    while ([filemgr fileExistsAtPath:newFilePath] && numberToAppend <= 99)
    {
        // find a new file path to try: <original_path> <number>.<extension>
        // Ex: /users/alex/desktop/image 1.png
        numberToAppend++;
        newFilePath = [NSString stringWithFormat:@"%@ %d.%@",
                       originalFilePathWithoutExtension,
                       numberToAppend,
                       pathExtension];
    }

    return newFilePath;
} 
```

# wpf - 在方法结束之前更新数据绑定

> ID：15107638
> 
> 赞同：0
> 
> 时间：2013-02-27T08:46:45.293
> 
> 标签：wpf, c#-4.0, data-binding, mvvm

过去我真的很喜欢在 stackoverflow.com 上阅读解决方案。现在我有一个我找不到答案的问题。开始了 ：-）

我在我的代码中使用了两个 3rd 方组件。一个是来自 Extenden WPF Toolkit 的繁忙指示器。请参阅 XAML。

```
<tool:BusyIndicator IsBusy="{Binding RequirementsModel.Working}" BusyContent="Fetching Data..." >
    <local:RequirementsTree Model="{Binding RequirementsModel}" x:Name="Sample" />
</tool:BusyIndicator> 
```

IsBusy 绑定到RequirementsModel.Working。RequirementsModel 是 DataContext 附带的我的视图模型的一部分。让我们看一下我的RequirementsModel 的摘录。

```
 class RequirementsModel : ITreeModel, INotifyPropertyChanged
  {

        private bool _working;
        public bool Working
        {
            get { return _working; }
            set { _working = value; RaisePropertyChanged("Working"); }
        }

        public bool HasChildren(object parent)
        {
            Working = true;

            /* Data access shall happen here
                Entered dummy code  */

            System.Threading.Thread.Sleep(2000);

            bool value = true;

            Working = false;

            return value;

        }

        public event PropertyChangedEventHandler PropertyChanged;

        public void RaisePropertyChanged(string propertyName)
        {
            PropertyChangedEventHandler handler = PropertyChanged;
            if (handler != null)
                handler(this, new PropertyChangedEventArgs(propertyName));
        }

    }

} 
```

如您所见，“工作”属性已更改，并且 WPF 视图中的绑定应该可以正常工作。但它什么也没发生。我猜这种情况的发生是因为视图的更新发生在方法结束之后。但是到那时工作又是错误的。我也知道我可以在调用方法中设置属性并使 HasChildren() 被异步调用，但这将包括更改其他 3rd 方组件。你知道如何让它工作吗？

谢谢简

# ruby - ROR + 从一周开始到一周结束的天数

> ID：15107640
> 
> 赞同：1
> 
> 时间：2013-02-27T08:46:57.367
> 
> 标签：ruby, ruby-on-rails-3.2

在我的应用程序中，我想显示一个月的天数。例如今天是 2 月 27 日。这里

我想从中生成插槽

```
[ 24 Febuary - 02 March]
[ 03 March - 09 March]
[ 10 March - 16 March]
[ 17 March - 23 March]
[ 24 March - 30 March] 
```

现在它的五个插槽。所以根据今天的日期，我想把所有这些放在任何数组中。我没有办法解决它。

![在此处输入图像描述](../Images/feec39d2c83fb4c3ce94734ce9dd1a10.png)

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T09:26:37.303

```
date_current = Date.current

5.times.map do |n|
  date = (date_current+ (n*7).days)
  [date.at_beginning_of_week, date.at_end_of_week]
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T09:33:27.983

我刚刚做了一点改变，因为我需要从周日开始一周。

![在此处输入图像描述](../Images/d9b007364ed9646537c7b8367130a5b9.png)

```
date_current = Date.current

5.times.map do |n|
  date = (date_current+ (n*7).days)
  [date.at_beginning_of_week-1.day, date.at_end_of_week-1.day]
end 
```

从一周的开始和一周的结束减去一天。

# javascript - 手风琴动画 Jquery

> ID：15107642
> 
> 赞同：1
> 
> 时间：2013-02-27T08:46:58.973
> 
> 标签：javascript, jquery, animation, accordion

您好，我希望#accordion 打开时消除 200px 的边距，如果关闭则插入 200px 的边距。我已将边距的消除与单击 h3 上的功能联系起来，当它打开时。#accordion 关闭时如何插入边距？

链接临时页面：[http ://www.davidxdesign.altervista.org/city.htm](http://www.davidxdesign.altervista.org/city.htm)

```
<script>
 $(function() {
 var stop = false;
 $("#accordion h3").click(function( event ){
 if ( stop )
{ event.stopImmediatePropagation();
 event.preventDefault(); stop = false } });
 $("#accordion").accordion({ 
header: "> div > h3",
 collapsible: true,
 active: false, 
autoHeight: false, 
changestart: function(event, ui){ ui.newHeader.parent().prependTo(this); } })
 .sortable({ 
axis: "y", 
handle: "h3", 
stop: function() { stop = true; } }) }); 
</script>
 <script> 
function zeromargindiv(){
 $('#accordion').animate({ 
marginTop: '0px' },
 2000, function() { }); } 
</script>**

<div id="accordion" style="margin-top:180px">

<div class="group">
    <h3  onclick="zeromargindiv()">Cosa Visitare</h3>
    <div>
   </br> 
<a onclick="go('map/duomo.htm')">Via del Duomo</a>  </br>
<a onclick="go('map/cavour.htm')">Corso Cavour</a>  </br>
<a onclick="go('map/palcapitano.htm')">Palazzo del Capitano del Popolo</a>  </br>
<a >Palazzo Comunale</a>  </br>
<a >Vicolo degli Artisti</a>  </br>
<a href="http://www.baduel.it" target="_blank"   >Libreria antiquaria Baduel</a>  </br>
<a href="http://www.bibliotecaorvieto.it/easyne2/LYT.aspx?IDLYT=8892&ST=SQL&SQL=ID_Documento=30&CODE=FUMI" target="_blank" >Biblioteca Fiumi</a>  </br></br>

 </div>
  </div> 
etc... 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T09:26:07.793

试试这个：- [http://jsfiddle.net/aidioo7/HpeM4/2/](http://jsfiddle.net/adiioo7/HpeM4/2/)

JS：-

```
$(function () {
    var stop = false;
    $("#accordion h3").click(function (event) {
        if (stop) {
            event.stopImmediatePropagation();
            event.preventDefault();
            stop = false;

        }
    });
    $("#accordion").accordion({
        header: "> div > h3",
        collapsible: true,
        active: false,
        autoHeight: false,
        changestart: function (event, ui) {
            ui.newHeader.parent().prependTo(this);
        },
        activate: function (event, ui) {
            if ($("#accordion").accordion("option", "active") === false) {

                $('#accordion').animate({
                    marginTop: '180px'
                },
                2000, function () {});
            }
        }

    })
        .sortable({
        axis: "y",
        handle: "h3",
        stop: function () {
            stop = true;
        }
    })
});

function zeromargindiv() {
    if ($("#accordion").accordion("option", "active") === false) {

        $('#accordion').animate({
            marginTop: '0px'
        },
        2000, function () {});
    }
} 
```

# git - 不能使用“git commit -a”

> ID：15107648
> 
> 赞同：1
> 
> 时间：2013-02-27T08:47:13.060
> 
> 标签：git

昨天我设置了一台新机器进行开发，这让我觉得我可能在某个地方错过了一步，因为当我运行时：

```
$ git commit -a 
```

我得到以下信息：

```
error: cannot run : No such file or directory
error: There was a problem with the editor ''.
Please supply the message using either -m or -F option. 
```

有什么想法吗？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T12:43:19.647

所以我忘了配置git编辑器，这就是我为vim做的。

```
$ git config --global core.editor vim 
```

# ios - 在 iOS 5 中使用 AFNetworking 解析 JSON

> ID：15107650
> 
> 赞同：0
> 
> 时间：2013-02-27T08:47:16.340
> 
> 标签：ios, json, parsing, ios5, afnetworking

我想用 iOS 5 中的 AFNetworking 框架解析从服务器接收到的 JSON 数据：

```
AFJSONRequestOperation *operation = [AFJSONRequestOperation JSONRequestOperationWithRequest:request success:^(NSURLRequest *request, NSHTTPURLResponse *response, id JSON) {
} failure:nil]; 
```

我要解析的 JSON 数据如下所示：

```
[ {
    addressReal = "\U6912\U6c5f\U89e3\U653e\U5357\U8def295\U53f7";
    areaTotal = 774;
    balance = 0;
    businessIncome = "556.49";
    equNoString = "";
    equStatusSting = "";
    id = 208;
    staff = 10;

},
    {
    addressReal = "\U53f0\U5dde\U5e02\U5e9c\U5927\U9053668\U53f7";
    areaTotal = 156;
    balance = 6463;
    businessIncome = "174.93";
    equStatusSting = "";
    id = 209;
    staff = 8;

}] 
```

我现在如何访问 JSON？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T09:23:35.890

这是我使用的，请随意满足您的需求：

```
-(void) loginWithUserID:(NSString*)usrID User:(NSString*)usr Password:(NSString *)psw Sender:(id)sender
{
    if ([sender respondsToSelector:@selector(startLoading)]){
        [sender performSelector:@selector(startLoading)];
    }

    baseURL = [NSString stringWithFormat:
                  @"http://xxx.xxx.xxx.xxx/test/service.svc/weblogin"];
    NSString* serviceURL = [NSString stringWithFormat:
                           @"%@?userID=%@&user=%@&password=%@",baseURL,usrID,usr,psw;

    NSURL *url = [NSURL URLWithString:[serviceURL stringByAddingPercentEscapesUsingEncoding: NSUTF8StringEncoding]];

    NSURLRequest *request = [NSURLRequest requestWithURL:url];

    AFJSONRequestOperation *operation = [AFJSONRequestOperation JSONRequestOperationWithRequest:request success:^(NSURLRequest *request, NSHTTPURLResponse *response, id JSON) {
        self.LoginOK = [JSON valueForKeyPath:@"LoginOK"];
        if (LoginOK.intValue == 1) {
            NSDictionary *usrData = [JSON valueForKeyPath:@"userData"];
            userData = [[UserData alloc]init];
            [userData readFromJSONDictionary:usrData];
            NSLog(@"Userdata: %@",userData);
            if ([sender respondsToSelector:@selector(loginSuccessful:)])
            {
                [sender performSelector:@selector(loginSuccessful:)];
            }
        }else{
            UIAlertView *alertView = [[UIAlertView alloc]initWithTitle:@"Error" message:@"No Correct Login Credentials" delegate:self cancelButtonTitle:@"OK" otherButtonTitles: nil];
            [alertView show];
            ;}

    } failure:^(NSURLRequest *request, NSHTTPURLResponse *response, NSError *error, id JSON) {
        if ([sender respondsToSelector:@selector(stopLoading)]){
            [sender performSelector:@selector(stopLoading)];
        }
        [[[UIAlertView alloc] initWithTitle:@"Error"
                                    message:@"Loginservice not available! Check your connection!"
                                   delegate:nil
                          cancelButtonTitle:@"OK"
                          otherButtonTitles: nil] show];
        NSLog(@"Error: %@", error);

    }];

    [operation start];
    }; 
```

并使用

```
-(void)readFromJSONDictionary:(NSDictionary *)d
{

    [self setProperty1:[d objectForKey:@"property1"]];
} 
```

方法将该字典中的所有属性获取到自定义类中。

所以在你的情况下它会使用

```
NSDictionary *data = [JSON valueForKeyPath:@"data"]; 
```

# memory-management - QEMU 监控命令 'info mem' 和 'info mtree' 有什么作用？

> ID：15107651
> 
> 赞同：7
> 
> 时间：2013-02-27T08:47:17.867
> 
> 标签：memory-management, virtual-machine, qemu

我正在尝试了解 QEMU 内存管理（使用 i386 来宾，没有 KVM）。QEMU 监视器允许列出 CPU 寄存器信息 ( `info registers`)、USB 设备 ( `info usb`)、网络 ( `info network`) 等。

但是`info mem`和`info mtree`命令呢？缺乏文档，很难弄清楚这些命令的作用。

例如，我从一些 linux ISO 启动 QEMU，并给它 128MB 的 RAM。`info mem`给出输出：

```
(qemu) 信息内存
00000000c0000000-00000000c009b000 000000000009b000 -rw
00000000c009b000-00000000c009d000 0000000000002000 -r-
00000000c009d000-00000000c7ffe000 0000000007f61000 -rw
00000000c87fe000-00000000c87ff000 0000000000001000 -rw
...和更多...
00000000c94f6000-00000000c94f7000 0000000000001000-rw
00000000c94f8000-00000000c94fd000 0000000000005000-rw
00000000c9500000-00000000c98c0000 00000000003c0000-rw
00000000ff7f5000-00000000ff7f7000 0000000000002000-rw
00000000ffffa000-00000000ffffc000 0000000000002000 -rw

```

帮助声明可用于`info mem`“显示活动的虚拟内存映射”。前两列给出虚拟内存范围，第三列显示范围长度。但是这些映射到底是什么？如果是虚拟内存，那么它属于哪个进程？

与`info mtree`命令类似的情况。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-08-18T16:27:45.413

# `info mtree`

此命令显示进程的内存层次结构。在 QEmu 的提交日志中，以下条目创建了此功能的第一个版本。`info mtree`所做的是打印系统内存到不同设备的映射。还表示了这些设备的层次结构。

```
commit 314e298735903035ba2b7b0f3cf39981f4171546
Author: Blue Swirl <blauwirbel@gmail.com>
Date:   Sun Sep 11 20:22:05 2011 +0000

    memory: simple memory tree printer

    Add a monitor command 'info mtree' to show the memory hierarchy
    much like /proc/iomem in Linux.

    Signed-off-by: Blue Swirl <blauwirbel@gmail.com>
    Signed-off-by: Avi Kivity <avi@redhat.com> 
```

[Qemu-devel 列表](https://lists.nongnu.org/archive/html/qemu-devel/2011-09/msg02268.html)讨论了添加它的原始补丁的功能以及随着时间的推移对该功能所做的一些[改进。](http://lists.nongnu.org/archive/html/qemu-devel/2013-06/msg03621.html)

# `info mem`

如您所述，此命令显示活动的虚拟内存映射。它不是针对特定进程，而是仅针对运行命令时 的*当前页表。*[这个页面](http://pdos.csail.mit.edu/6.828/2012/labguide.html#qemu-info-mem)有更多关于输出格式的信息。

要获得进程级别的信息，您需要在您正在模拟的 Linux 操作系统中做一些事情，因为 Qemu 只知道[MMU 级别的信息](http://vm-kernel.org/blog/2009/07/10/qemu-internal-part-2-softmmu/)。

# android - 包资源管理器中的项目是白色的，并且不在文件夹中分组

> ID：15107654
> 
> 赞同：1
> 
> 时间：2013-02-27T08:47:25.227
> 
> 标签：android, eclipse

我在 Eclipse 中有一个项目，它不会以某种方式将包资源管理器中的“res”或“bin”项目分组，而是将它们显示为带有“白色”文件夹图标的单个项目。图像显示了这一点。在“倒计时”项目中，您有 res.layout、res.menu 等，但在 NewProject 中，它们都在“res”文件夹中。
CountDown 项目也拒绝构建，并出现错误“R 无法解析为变量”。我知道这是因为 R.java 文件不是由预编译器创建的，我认为这也与文件夹结构看起来不同的事实有关。
现在我已经尝试了很多东西，比如清理项目和手动重建，但到目前为止还没有解决这个问题。

![Eclipse 包用彩色条目探索](../Images/846a73ce24fb26e5ab4d6d0d7ef8c5e2.png)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-27T08:49:54.697

检查您的项目设置：右键单击项目 -> `Properties`-> `Java Build Path`-> Tab `Source`。将这些设置与其他项目进行比较。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T08:51:15.390

我认为您已将项目直接导入 eclipse 并且您在 Linux 系统上。由于 Linux 有自己的安全性，我建议你在项目文件夹中查找`.class`&`.project`文件（这些文件是隐藏的，所以使用 CTRL + H 来查看）。现在右键单击这些文件并更改其权限。回到 Eclipse，刷新项目并清理。就是这样。

# jersey - e ResourceConfig 实例不包含任何根资源类

> ID：15107659
> 
> 赞同：0
> 
> 时间：2013-02-27T08:47:30.190
> 
> 标签：jersey, tomcat7, jax-rs

我知道这已在许多帖子中得到解答，但我无法找到正确的解决方案。

我没有在类级别提供@Path，而是在方法级别（因为它扩展了我的 URI），因此我得到 ResourceConfig 实例不包含任何根资源类。部署异常

```
public class PatientResource {
@GET
@Path("/patient/{patientId}")
@Produces(MediaType.APPLICATION_JSON)
public Patient getPatientDetails(@PathParam("patientId") String patientId) {
      ...
    } 
```

Web xml 条目是

```
<servlet>
    <servlet-name>jersey-serlvet</servlet-name>
    <servlet-class>com.sun.jersey.spi.spring.container.servlet.SpringServlet</servlet-class>
    <init-param>
        <param-name>com.sun.jersey.config.property.packages</param-name>
        <param-value>com.clinic.resources</param-value>
    </init-param>
    <init-param>
        <param-name>com.sun.jersey.api.json.POJOMappingFeature</param-name>
        <param-value>true</param-value>
    </init-param>
    <load-on-startup>1</load-on-startup>
</servlet>

<servlet-mapping>
    <servlet-name>jersey-serlvet</servlet-name>
    <url-pattern>/rest/*</url-pattern>
</servlet-mapping>
<servlet-mapping> 
```

因此，当我尝试 serv-name:8080/WAR-Id/rest/patient/1 时，我得到了上述异常。请注意，如果我在类级别添加@Path，我可以摆脱异常，但它不必要地扩展了 URL，而且在 web xml 中提供 /* 对于项目也不可行。底线 - 是否有必要在班级级别提供@Path

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T16:17:04.840

鉴于您有一个`Patient`资源，您通常会放置一个

```
@Path("/patient") 
```

在课堂上，然后是

```
@Path("{patientId}") 
```

在方法上。

# testng - testng.xml 的命名空间是什么？

> ID：15107665
> 
> 赞同：-1
> 
> 时间：2013-02-27T08:47:49.363
> 
> 标签：testng

我想使用 xmlns 而不是 DTD。

```
<!DOCTYPE suite SYSTEM "http://testng.org/testng-1.0.dtd" > 
```

有人知道 testng.xml 的命名空间吗？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T07:35:47.720

TestNG XML 只有一个 DTD。目前不存在架构或命名空间。

# mysql - 返回左连接表字段的空值，我错过了什么？

> ID：15107669
> 
> 赞同：0
> 
> 时间：2013-02-27T08:48:05.627
> 
> 标签：mysql

我有 3 个相互关联的表。我离开了他们的身份文件。但是提交的最后一个连接表返回 null。

```
SELECT
    ila.ilac_adi AS ilacADI,
    ila.firma AS ilacFIRMA, 
    piy.pk_ay AS ilacAY, 
    kur.kurum_adi AS ilacIL 
FROM piyasa_kontrol piy
LEFT JOIN ilaclar ila 
    ON piy.ilac_id = ila.eski_sistem_id_nolari
LEFT JOIN kurum_adlari kur
    ON kur.id = piy.pk_il 
```

`ilacIL`( `kur.kurum_adi`) 字段返回 null

我试过`GROUP BY piy.id,`了，只有 1 行，`ilacIL`仍然为空。

我在哪里错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T08:58:17.450

**左外连接**，返回**NULL**时

*   IF 记录在**左表（主）**和**右表**之间匹配并且右表中的**选定字段**在表中为**空白**
*   **其他**记录在它们之间不匹配

在您的情况下**，ilacIL (kur.kurum_adi)**可能为**空白**或**记录不匹配**

# r - 如何用ggplot在-ve和+ve值条的另一侧标记条形图？

> ID：15107672
> 
> 赞同：1
> 
> 时间：2013-02-27T08:48:10.580
> 
> 标签：r, plot, ggplot2

我可以寻求您的帮助，用 ggplot2 标记条形图，如下图所示：

![在此处输入图像描述](../Images/370769e93f3b396974d9e36e66929ab6.png)

我正在使用以下代码来获取附加图：

```
library(ggplot2)

test <- data.frame(x = c("Moderately Poor", "Deeply Poor", "Deeply & Intensely Poor", "Intensely Poor", "Overall Poverty"), y = c(0.024, -0.046, -0.025, -0.037, -0.083))

test$colour <- ifelse(test$y < 0, "firebrick1", "steelblue")
test$hjust <- ifelse(test$y > 0, 1.03, -0.03)

ggplot(test, aes(x, y, label = x, hjust = hjust)) + 
    geom_text(aes(y = 0, colour = colour)) + 
    geom_bar(stat = "identity", aes(fill = colour))

last_plot() + coord_flip() + labs(x = "", y = "") +
    scale_x_discrete(breaks = NA) + theme_bw() +
    opts(legend.position = "none") 
```

我只是想知道如何在每个条上获得第二个数字标签？

谢谢，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-01T03:31:58.477

R 图形，包括`ggplot2`，是笔在纸上的，即`layers`（每个`geom_...`）将按顺序绘制。

所以，如果你想在 a`geom_text`之上有一个`geom_bar`，`geom_text`将需要在`geom_bar`.

更新`ggplot2`0.9.3（当前版本）

```
ggplot(test, aes(x, y)) + 
  geom_text(aes(y = 0, colour = colour, hjust =hjust, label = x), size=4.5) + 
  geom_bar(stat = "identity", aes(fill = colour)) + 
  geom_text(colour ='black', 
     aes(label = paste( formatC( round(y*100, 2 ), format='f', digits=2 ),'%'),
         hjust = ifelse(y>0,1,0))) +
  coord_flip() + labs(x = "", y = "") +
  scale_x_discrete(breaks = NULL) + theme_bw() +
  theme(legend.position = "none") 
```

生产

![在此处输入图像描述](../Images/aab5ca7817845efe415a34cf4208b537.png)

# php - 如何使用 datetime 作为 yaxis 和 xaxis 的类别来绘制 jqplot

> ID：15107677
> 
> 赞同：0
> 
> 时间：2013-02-27T08:48:16.010
> 
> 标签：php, jqplot

```
var bar_fan = ['8:30','10:30'];
var bar_ticks = ['a','b'];

$(document).ready(function(){
    plot2 = $.jqplot('bar_all', [bar_fan], {
        seriesDefaults: {
            renderer:$.jqplot.BarRenderer,
            pointLabels: { show: true },

        },
        axes: {
            xaxis: {
                renderer: $.jqplot.CategoryAxisRenderer,
                ticks: bar_ticks,
            },
        },
        legend: {
            show: true,
            labels: bar_labels,
            placement: 'outside'
        }   
    }); 
```

bar_fan = ['8:30','10:30']; 不会工作。导致它的时间格式。
如果使用 bar_fan = [1,2] 之类的值；将工作。
如何将 yaxis 与日期时间值一起使用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T20:15:24.150

我只是通过将以下内容添加到`axes`配置中来得到他的工作：

```
yaxis: {
    renderer: $.jqplot.DateAxisRenderer
} 
```

现在因为您的只是时间值，所以图表将假定当前日期。然后，您可能想要指定最小日期或明确提供日期和时间信息，例如，`'2013-03-01 8:30AM'`

# php - 当图表标题为空时单击打印按钮时在 highcharts 中打印图表标题

> ID：15107678
> 
> 赞同：0
> 
> 时间：2013-02-27T08:48:15.853
> 
> 标签：php, javascript, jquery, printing, highcharts

嗨，我正在研究 highhchart 并坚持一个听起来很简单但找不到任何答案的观点。

我在定义 highcharts 时将图表标题设置为 null

但在导出时添加图表标题，如

```
 exporting: {
             filename: '<?php echo $description ; ?>',
             buttons: {
                 exportButton: {
                     menuItems: [{
                         text: 'Export Chart',
                         onclick: function () {
                             this.exportChart({}, {
                                title: {
                                    text: '<?php echo $description  ; ?>',
                                      style: {
                                            width: '450px'
                                        }
                                }
                            });
                         }
                     }, 
                     null,
                     null,
                     null]
                 }
             }
         } 
```

在打印图表时，我无法配置如何添加图表标题和其他参数，就像我在导出时所做的那样。

这是我导出图表的工作小提琴 [http://jsfiddle.net/4SwvV/](http://jsfiddle.net/4SwvV/)

当图表设置为空时，导出时带有标题的导出

我不知道如何在印刷品中实现这一目标。打印是否允许设置这样的选项来导出图表标题/

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T09:26:32.687

您可以在导出时设置此选项，而不是 catch menuitemclick

chartOphttp://api.highcharts.com/highcharts#exporting.chartOptions

因此，它看起来像[http://jsfiddle.net/4SwvV/](http://jsfiddle.net/4SwvV/)：

```
exporting: {
        filename: 'Export chart',
        chartOptions:{
            title:{
                text:'Exported chart'
            }
        },
        buttons: {
            exportButton: {
                menuItems: [{
                    text: 'Export Chart'
                },
                null,
                null,
                null]
            }
        }
    }, 
```

编辑：

您可以使用不完美的解决方案[http://jsfiddle.net/4SwvV/4/](http://jsfiddle.net/4SwvV/4/)：

```
 title: {
        useHTML: true,
        text: '<div id="title">Example title</div>',
        style: {
            width: '300px'
        }
    }, 
```

纽扣：

```
 onclick: function () {
                        $('#title').hide();
                        chart.print();
                        $('#title').show();
                    } 
```

# mysql - 查询以获得分组的项目排名？

> ID：15107682
> 
> 赞同：0
> 
> 时间：2013-02-27T08:48:30.533
> 
> 标签：mysql, sql

我有一个针对各种用户的点击表：

```
HITS:
id | userid
1  | 1     
2  | 1     
3  | 2     
4  | 1     
5  | 2     
6  | 2 
```

我希望以最快的方式获取按 ID 排列的这些项目的列表。所以这：

```
HITS RANKED:
id | userid | ranks
1  | 1      | 1
2  | 1      | 2
3  | 2      | 1
4  | 1      | 3
5  | 2      | 2
6  | 2      | 3 
```

我想避免将两张桌子相互连接，因为当桌子变大时，这需要很长时间。还有其他建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T08:58:37.863

```
SELECT  ID, 
        UserID, 
        Ranks
FROM
    (
        SELECT  id,
                userid,
                @group:=CASE WHEN @temp <> userid THEN 1 ELSE @group+1 END AS ranks,
                @temp:=userid AS clset
        FROM    (SELECT @group:= 0) s,
                (SELECT @temp:= 0) c,
                (SELECT * FROM hits ORDER BY userid, id) t
    ) x
ORDER   BY ID 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!2/6cad47/16)

# jsf - JPA，如何使用 eclipselink 更新 JPA 中的外键

> ID：15107683
> 
> 赞同：-3
> 
> 时间：2013-02-27T08:48:32.890
> 
> 标签：jsf, jpa, primefaces

我有以下情况。

## 表

## 项目

项目 ID 项目名称 客户 ID

```
 1              P1           1
 2              P2           2
 3              P3           5
 4              P4           1
 5              P5           3
 6              P6           2
 7              P7           4
 8              P8           4
 9              P9           5
 10             P10          3 
```

## 客户

ClientId 客户名称

```
1                CA
2                CB
3                CC
4                CD
5                CE 
```

两个表的实体类都是自动生成的，不会被修改。

问题是，对于项目表中的 projectId 8，我想将 clientId 从 4 更改为 5。我如何使用 JPA 和 JSF 来做到这一点？

我有大量客户，无法在下拉列表中显示。

Primefaces 自动完成是一种解决方案，但我做不到。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T15:20:14.327

让用户查询客户端，或者输入id。

在 JPA 中，您可以使用 id 为 Client 执行 find()。

# java - 观察者/可观察模式的链接

> ID：15107684
> 
> 赞同：3
> 
> 时间：2013-02-27T08:48:33.933
> 
> 标签：java, multithreading, oop, design-patterns, observer-pattern

是否存在形成“复合”观察者/可观察者的设计模式？
我的意思是我有一个 observable`A`通知它的听众一些变化。
每个侦听器也是一个可观察对象，并通知自己的侦听器（在它执行的某些操作中，哪个操作由第一个可观察对象的通知触发）。
这种观察者/可观察者的“链接”是否可以作为设计，或者是否有标准模式？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T01:01:18.410

对于您提到的链接，我认为没有任何区别。

观察者模式的目的是，当一个对象的状态发生变化时，它会通知相关方（监听者/观察者）这个变化，让监听者根据状态变化做出反应。

如果按照设计，其他相关方观察到侦听器的状态变化，我看不出有任何理由不能使用观察者模式来发布事件。

然而，这只是另一种观察者-可观察的关系。没有发生特殊的“链接”。

有点 OT：更适合称为链接的东西是：被观察对象 O 向侦听器 A 发送事​​件 E，A 会将事件传播给另一个侦听器 B。但是从逻辑上讲，它们都在侦听源自 O 的事件。这种“链接”可以通过使用装饰器模式来完成。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T09:06:15.573

你的类应该实现两个接口：观察者和主题。挑战正在将所有观察者注册到适当的对象。
您只需要在类中添加`notifyObservers()`方法`notify()`（`Observer`链接[到 wiki](http://en.wikipedia.org/wiki/Observer_pattern)）。
请注意，您可以启动通知的无限循环：`A`=> `B`=> `C`=> `A`=> ... 等等。

# java - 列出类的公共方法而不创建实例

> ID：15107692
> 
> 赞同：2
> 
> 时间：2013-02-27T08:48:55.337
> 
> 标签：java

我正在使用的测试框架有一种很奇怪的方式将测试添加到测试套件中，如下所示：

```
public TestSuiteAll() {
    super("TestSuiteAll")

    this.addTest(new TestTypeOld("TEST_EXECUTION"));
    this.addTest(new TestTypeOld("TEST_COMPLETION_1"));
    this.addTest(new TestTypeOld("TEST_COMPLETION_2"));

    this.addTest(new TestTypeNew("TEST_NEW"));
} 
```

例如，其中“TEST_EXECUTION”是要调用的 TestTypeOld 类中函数的名称。

我真的不喜欢这种设计，但我坚持下去。如何列出 TestTypeOld 中的所有函数以便添加所有函数？

我已经看到了一些这样的例子：

```
TestTypeOld testTypeOld = new TestTypeOld("");
Class testTypeOldClass = testTypeOld.getClass();
Method[] methods = testTypeOldClass.getMethods(); 
```

但这似乎真的很啰嗦。有没有另一种方法可以做到这一点，我不需要创建 TestTypeOld 的实例。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T08:51:41.853

你应该能够做到这一点：

```
Method[] methods = TestTypeOld.class.getMethods(); 
```

这是一个工作示例`java.util.List`：

```
public static void main(String args[]) {
    Method[] methods = List.class.getMethods();
    for(Method method : methods) {
        System.out.println(method.getName());
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T08:51:23.103

你也可以这样做：

```
TestTypeOld.class.getMethods(); 
```

`.class`运算符检索表示给定类的 Class 实例。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-27T08:52:20.000

只是使用怎么样

```
Methods[] methods = TestTypeOld.class.getMethods(); 
```

然后您不必创建`TestTypeOld`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-27T09:10:30.450

使用反射 API 示例：

```
Methods[] methods = TestTypeOld.class.getMethods(); 
```

# ios - 使用 NSPredicates 过滤 NSMutableArray

> ID：15107695
> 
> 赞同：3
> 
> 时间：2013-02-27T08:49:10.500
> 
> 标签：ios, objective-c, filter, nsmutablearray, nspredicate

我已经检查了 StackOverflow 中关于 NSPredicates 的一些主题，尽管它们都指向正确的方向，但我一定遗漏了一些重要的东西。

我有一个包含产品列表的 NSMutableArray。每个产品都有几个属性，如品牌、类别和类型。

现在我希望我的用户能够使用 NSPredicates 过滤该 NSMutableArray，因为如果任何选定的过滤器为空，则不应使用该过滤器。

但是，反过来，例如，如果所有过滤器都打开：过滤器品牌 A，类别 B 和类型 C，它应该只显示品牌 A，类别 B 和类型 C。

如果我随后取消选择 Cat B，它将使用 C 类过滤品牌 A。

我写了一些代码，但它主要返回一个空的 NSMutableArray，所以我猜我的 NSPredicates 是关闭的。

我还发现在运行谓词之前我需要默认为“所有产品”NSMutableArray，否则在选择新的过滤器选项时它会过滤已经过滤的数组。我应该使用带有一些布尔魔法的多个数组，还是可以使用 NSPredicates 解决这个问题？

这是我的代码：

```
-(void)filterTable
{
    NSPredicate *brandPredicate;
    NSPredicate *categoryPredicate;
    NSMutableArray *compoundPredicateArray;

    if( ![self.selectedBrand isEqual: @"Show All Brands"] || !(self.currentBrand == NULL))
    {
    brandPredicate = [NSPredicate predicateWithFormat:@"brand CONTAINS[cd] %@",self.currentBrand];
    compoundPredicateArray = [ NSMutableArray arrayWithObject: brandPredicate ];
    }

    if( ![self.currentCategory isEqual: @"Show All Categories"] || !(self.currentCategory == NULL)) 
    {
        categoryPredicate = [NSPredicate predicateWithFormat:@"category CONTAINS[cd] %@",self.currentCategory];
        [ compoundPredicateArray addObject: categoryPredicate];
    }

    NSPredicate *predicate = [NSCompoundPredicate andPredicateWithSubpredicates:
                              compoundPredicateArray ];

    [self.tableData filterUsingPredicate:predicate];
    [self.popNTwinBee dismissPopoverAnimated:YES]; // PopoverController
    [self.tableView reloadData];
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-27T09:31:13.503

您的代码中有几个概念性错误。

首先，您应该在声明 NSMutableArray 谓词时对其进行初始化：

```
NSMutableArray *compoundPredicateArray = [NSMutableArray array]; 
```

现在你只在你的 first 中实例化它`if()`，所以如果没有设置品牌过滤器，可变数组甚至不会被实例化，所以稍后添加对象（例如在第二个过滤中`if()`）是无效的并且复合谓词创建为空. 在您的第一个内部`if()`，您将拥有：

```
[compoundPredicateArray addObject:brandPredicate]; 
```

您的第二个问题是，正如您正确想象的那样，当您使用`filterUsingPredicate`.

您应该做的是始终将未过滤的数据保留在 a 中`NSArray`，并使用其`filteredArrayUsingPredicate`上的方法来检索`NSArray`您将用于显示数据的新过滤器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T09:02:21.557

好吧，我仔细查看了代码并想出了这个：

[从这个站点](http://parmanoir.com/8_ways_to_use_Blocks_in_Snow_Leopard)得到了这个方便的小代码块。

**NSArray+filter.h**

```
#import <Foundation/Foundation.h>

@interface NSArray (Filter)
- (NSArray*)filter:(BOOL(^)(id elt))filterBlock;
@end 
```

**NSArray+filter.m**

```
#import "NSArray+filter.h"

@implementation NSArray(Filter)
- (NSArray*)filter:(BOOL(^)(id elt))filterBlock
{ // Create a new array
    id filteredArray = [NSMutableArray array]; // Collect elements matching the block condition
    for (id elt in self)
        if (filterBlock(elt))
        [filteredArray addObject:elt];
    return  filteredArray;
}
@end 
```

并相应地编辑了我的方法。

在**TableViewController.m**

```
- (void)filterTable {
    WebServiceStore *wss = [WebServiceStore sharedWebServiceStore];
    self.allProducts = [wss.allProductArray mutableCopy];
    NSArray *filteredOnBrand;
    NSArray *filteredOnCategory;
    NSArray *filteredOnCategoryAndBrand;

    if (![self.currentBrand isEqualToString:@"All Brands"] && !(self.currentBrand == nil)) 
    {
        filteredOnBrand = [self.allProducts filter:^(id elt) 
        {
            return [[elt brand] isEqualToString:self.currentBrand];
        }];
        [self.tableData removeAllObjects];
        [self.tableData addObjectsFromArray:filteredOnBrand];
    }

    if ([self.currentBrand isEqualToString:@"All Brands"] || self.currentBrand == nil) 
    {
        filteredOnBrand = [self.allProducts mutableCopy];
        [self.tableData removeAllObjects];
        [self.tableData addObjectsFromArray:filteredOnBrand];
    }

    if (![self.currentCategory isEqualToString:@"All Categories"] && !(self.currentCategory == nil)) 
    {
        filteredOnCategory = [self.allProducts filter:^(id elt) 
      {
            return [[elt category] isEqualToString:self.currentCategory];
      }];
        [self.tableData removeAllObjects];
        [self.tableData addObjectsFromArray:filteredOnCategory];
    }
    if (![self.currentCategory isEqualToString:@"All Categories"] && !(self.currentCategory == nil) && ![self.currentBrand isEqualToString:@"All Brands"] && !(self.currentBrand == nil)) {
        filteredOnBrand = [self.allProducts filter:^(id elt) {
            return [[elt brand] isEqualToString:self.currentBrand];
        }];
        filteredOnCategoryAndBrand = [filteredOnBrand filter:^(id elt) {
            return [[elt category] isEqualToString:self.currentCategory];
        }];
        [self.tableData removeAllObjects];
        [self.tableData addObjectsFromArray:filteredOnCategoryAndBrand];
    }
} 
```

当然，您还应该在之后重新加载表数据，但我为此使用了自定义方法，但我忽略了。

# facebook - Facebook 应用，显示类似墙贴的 UI

> ID：15107697
> 
> 赞同：3
> 
> 时间：2013-02-27T08:49:12.717
> 
> 标签：facebook, facebook-like, facebook-javascript-sdk, fbml, facebook-fbml

在 FBML 中，他们有这个 fb:wallpost 标签，我可以用它来显示墙上的帖子，但他们说它已被弃用。

是否有其他替代方法可以显示具有完整功能（例如评论和点赞按钮）的 Facebook 帖子？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-01T18:08:19.360

事实上，[FBML](https://developers.facebook.com/docs/reference/fbml/)标签使得墙式帖子的渲染成为可能。FBML 的目的是在您自己的应用程序上模拟原生 Facebook 渲染。这是他们现在提供的：[`fb:wallpost`](https://developers.facebook.com/docs/reference/fbml/wallpost/)

> 您可以使用我们的[JavaScript SDK](https://developers.facebook.com/docs/reference/javascript/)和[社交插件](https://developers.facebook.com/plugins)嵌入许多与 FBML 相同的社交功能。

*许多相同*，但不是全部。尤其不能替代`fb:wallpost`.

假设他们提供的东西与 FBML 的目的不同。它不再是关于 UI。现在，帮助*您*呈现现有内容的不是 Facebook，而是**当**您的应用程序带来社交互动时，是*您*帮助 Facebook**增加流量。**如果我们查看他们提供的内容，我们只有交互增强器，例如：关注、喜欢、评论、推荐、登录、注册。

我们知道他们不希望我们欺骗他们的内容，但他们更喜欢*进一步*的社交活动。

他们的政治咨询发生了变化，而你必须参与其中。

顺便说一句，不值得寻找您可能在网上找到的插件或模板（甚至自己制作），因为禁止复制自己的设计。说到这一点：[在您继续复制 Facebook 的外观之前，请注意任何法律影响](https://stackoverflow.com/a/10670719/1515819)。无论如何，您仍然可以找到一些显示 API 内容的[好方法。](http://tutorialzine.com/2011/03/custom-facebook-wall-jquery-graph/)

# ruby-on-rails - ruby on rails 中的引导选项卡控制器

> ID：15107705
> 
> 赞同：-1
> 
> 时间：2013-02-27T08:49:40.720
> 
> 标签：ruby-on-rails, ruby-on-rails-3, twitter-bootstrap

在 application.html.erb 文件中，我有以下代码来显示选项卡控制器。

```
<link href="http://twitter.github.com/bootstrap/assets/css/bootstrap.css" rel="stylesheet" type="text/css" />
    <script src="http://code.jquery.com/jquery-1.7.1.js"></script>
    <script type="text/javascript" src="http://twitter.github.com/bootstrap/assets/js/bootstrap-tab.js"></script>

<div class="tabbable">
           <ul class="nav nav-tabs">
             <li class="active"><a href="https://www.google.co.in" data-toggle="tab">Individual</a></li>
             <li><a href="https://www.yahoo.com" data-toggle="tab">All</a></li>
           </ul>

        </div> 
```

它们显示正确，单击链接时选项卡会更改。但问题是 href 不起作用。它没有重定向。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T10:15:19.547

这是因为您已将 放在`data-toggle="tab"`您的链接中。

如果您`data-toggle="tab"`从代码中删除 ，链接将起作用。

但这不是正确的显示方式，因为您想要的内容位于选项卡中，这将打开指向您在 url 中提供的其他站点的链接。

方法是使用一些哈希名称定义每个链接 url 路径，然后使用它在点击时调用您的 url。

这可以用 javascript 来完成。有关方式，请参[见此](https://stackoverflow.com/questions/7862233/twitter-bootstrap-tabs-go-to-specific-tab-on-page-reload)SO 帖子。

# python - 等待进程直到所有子进程完成？

> ID：15107714
> 
> 赞同：103
> 
> 时间：2013-02-27T08:50:08.203
> 
> 标签：python, subprocess, ipc

我有一个创建两个或多个子进程的主进程，我希望主进程等到所有子进程完成操作并退出？

```
 # main_script.py

 p1 = subprocess.Popen(['python script1.py']) 
 p2 = subprocess.Popen(['python script2.py'])
 ... 
 #wait main process until both p1, p2 finish
 ... 
```

* * *

## 回答 #1

> 赞同：140
> 
> 时间：2013-02-27T09:10:44.647

一个`Popen`对象有一个[`.wait()`](http://docs.python.org/2/library/subprocess.html#subprocess.Popen.wait)为此精确定义的方法：等待给定子进程的完成（此外，重新调整其退出状态）。

如果你使用这种方法，你可以防止进程僵尸停留太久。

（或者，您可以使用[`subprocess.call()`](http://docs.python.org/2/library/subprocess.html#subprocess.call)or[`subprocess.check_call()`](http://docs.python.org/2/library/subprocess.html#subprocess.check_call)来调用和等待。如果您不需要进程的 IO，那可能就足够了。但这可能不是一个选项，因为您的 if 两个子进程似乎应该并行运行, 他们不会用 ( `call()`/ `check_call()`.)

如果您有几个子流程要等待，您可以这样做

```
exit_codes = [p.wait() for p in p1, p2] 
```

它会在所有子流程完成后立即返回。然后，您有一个返回代码列表，您可能可以对其进行评估。

* * *

## 回答 #2

> 赞同：35
> 
> 时间：2013-02-27T08:54:34.343

```
subprocess.call 
```

自动等待，你也可以使用：

```
p1.wait() 
```

# javascript - 为什么 {}.toString 可以检查数据类型？

> ID：15107715
> 
> 赞同：2
> 
> 时间：2013-02-27T08:50:10.923
> 
> 标签：javascript

谁能解释一下为什么这些代码可以检查数据类型？它们对我来说没有意义。我无法理解代码在幕后做了什么。提前致谢！

```
var toClass = {}.toString // {} is for what? toString is a method?

alert(toClass); // alert it I get a function? = > function toString() {[native code]}

alert( toClass.call( [1,2] ) )  
alert( toClass.call( new Date ) ) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-27T09:07:17.517

```
var toClass = {}.toString; 
```

相当于

```
var toClass = Object.prototype.toString; 
```

因为

```
{} 
```

*作为表达式*（`Object`初始化程序）等价于

```
new Object() 
```

其中`Object`是“具有该名称的标准内置构造函数”（[ECMAScript 语言规范，5.1 版，第 11.1.5 节](http://www.ecma-international.org/ecma-262/5.1/#sec-11.1.5)；和早期版本）。

所以`{}`代表对新`Object`实例的引用。 默认情况下，实例通过原型链（[第 15.2.5 节](http://www.ecma-international.org/ecma-262/5.1/#sec-15.2.5)`Object`）从最初引用的对象继承属性，包括内置属性。属性值最初是对实例的引用，即属性是您可以调用的方法（[第 15.2.4.2 节](http://www.ecma-international.org/ecma-262/5.1/#sec-15.2.4.2)）。`Object.prototype``Object.prototype.toString``Function`

`alert`实际上是`window.alert`（并且应该这样写）。 `window`是 ECMAScript 全局对象的一个​​属性；该属性引用的对象是具有该`alert`方法的作用域链中的宿主对象。这些都没有在 ECMAScript 中指定，但它们由规范（[第 15.1 节](http://www.ecma-international.org/ecma-262/5.1/#sec-15.1)）允许的[某些主机环境](https://developer.mozilla.org/en-US/docs/DOM/window.alert)（通常由浏览器）提供。

因为它旨在显示警报消息，所以`alert`主机方法显示其第一个参数的*字符串表示形式*。对于对象，包括调用它们的`toString`or`valueOf`方法，以首先支持的为准（[第 9.8 节](http://www.ecma-international.org/ecma-262/5.1/#sec-9.8)）。`Function`实例，例如 引用的实例，`{}.toString`它们自己继承了一个`toString`方法，该方法返回函数的实现相关表示（[第 15.3.4.2 节](http://www.ecma-international.org/ecma-262/5.1/#sec-15.3.4.2)）。

但是，没有类，ECMAScript 的概念与`[[Class]]`“数据类型”的概念有些不同（请参阅`typeof`和`instanceof`）。这些是使用*基于原型的*继承的语言（[第 4.2.1 节](http://www.ecma-international.org/ecma-262/5.1/#sec-4.2.1)）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T09:01:57.987

这相当于：

```
Object.prototype.toString.call([1, 2]);
Object.prototype.toString.call(new Date); 
```

这里，`Object.prototype.toString`是`toString`所有对象默认继承的默认方法。调用时，它会打印如下内容：

```
[object XXX] 
```

*`{}.toString`在这里类似，因为`{}`是`new Object()`.*

派生对象可以自由地覆盖该`toString`方法以满足其需要，例如：

```
> [1, 2].toString()
"1,2"

> (new Date).toString()
"Wed Feb 27 2013 17:03:42 GMT+0800 (Malay Peninsula Standard Time)" 
```

但是，您仍然可以使用“原始”方法，方法是使用`.call()`on`Object.prototype.toString`或`{}.toString`其中的第一个参数 to`.call()`用于定义`this`您正在调用的方法内部引用的内容。

# c - ipcs -s 不显示命名信号量

> ID：15107716
> 
> 赞同：3
> 
> 时间：2013-02-27T08:50:14.667
> 
> 标签：c, posix, ipc, semaphore

我正在做作业，我使用的是名为 POSIX 的信号量，但是当我输入`ipcs -s`命令时它没有显示我的列表。

请帮助我获取命名信号量的条目。我从哪里得到那个？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-27T09:02:40.690

`ipcs`用于 System V 信号量，您使用的是 POSIX 信号量。有关差异，请参见[此处](https://stackoverflow.com/questions/368322/differences-between-system-v-and-posix-semaphores)。

# jakarta-ee - GWT RPC 失败

> ID：15107717
> 
> 赞同：0
> 
> 时间：2013-02-27T08:50:21.490
> 
> 标签：jakarta-ee, gwt, rpc

我正在尝试使用 ant 构建我的 GWT 应用程序的战争......

但我得到了例外

```
Exception while dispatching incoming RPC call
com.google.gwt.user.server.rpc.UnexpectedException: Service method 'public abstract java.lang.String org.cellbeans.client.InfrastructureService.getAllEmails()' threw an unexpected exception: java.lang.NoClassDefFoundError: org/hibernate/Session 
```

和

```
INFO: validateJarFile(/home/swapnil/tomcat7/webapps/Infrastructure/WEB-INF/lib/gwt-user.jar) - jar not loaded. See Servlet Spec 2.3, section 9.7.2\. Offending class: javax/servlet/Servlet.class 
```

请帮忙解决这个问题...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T13:14:31.990

我不太确定你的问题是什么。我需要更多信息。不过我会试一试。以下是 2 个常见错误。

您需要确保您使用的库位于Tomcat 文件夹中的文件夹`web/WEB-INF/lib`所在的位置。`web``webapps`

您还需要在模块`.gwt.xml`文件中添加以下行。

```
 <inherits name='name.of.your.package' /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T21:41:29.410

您应该将包含 org.hibernate.Session 类的休眠 jar 添加到您的（tomcat？）服务器类路径中。您还可以从类路径中删除 gwt-user.jar，您只需要服务器类路径中的 gwt-servlet.jar。

# css - 创建我自己的 GWT 按钮 CSS 样式

> ID：15107719
> 
> 赞同：1
> 
> 时间：2013-02-27T08:50:27.770
> 
> 标签：css, gwt

我想为我的 GWT 应用程序中的所有按钮设置自定义背景。我正在使用标准的 GWT Button 类。所以（正如 SO 中的一个人推荐的那样）在我的 CSS 文件中我有

```
.gwt-Button
{
background-color: red;
} 
```

但是，这不适用于我的按钮。然后我尝试了

```
myButton.setStyleName("gwt-Button"); 
```

结果相同。然后我将样式的名称更改为 "gwt.Button1" ，将其设置为我的样式名称，嘿，它可以工作。因此，调查为什么我无法修改内置 CSS 样式时，我注意到当我编译我的 GWT 项目（我正在使用 Eclipse）时，在我的 WAR 文件夹中创建了一个名为 war/myModule/gwt/standard 的文件夹，并且在这个文件夹中是包含默认 GWT 样式的 CSS 文件。（至少这是我的看法）所以我的问题是如何将自己的样式应用于 gwt-Button 以及为什么将这些 css 文件放在此文件夹中，我可以更改这些文件吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T10:34:56.933

我认为以下链接应该可以解决您的问题

[GWT 主题样式覆盖了我的 css 样式](https://stackoverflow.com/questions/2322779/gwt-theme-style-overrides-my-css-style)

如果不回退。干杯:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T09:54:56.413

```
Project --->
|
Src
|
package com.xxxxx
|
|
folder(resources(any))
|
|
css(folder)
|
|
YourcssFile.css(write your css here ) 
```

参考：[https ://developers.google.com/web-toolkit/doc/latest/DevGuideUiCss#cssfiles](https://developers.google.com/web-toolkit/doc/latest/DevGuideUiCss#cssfiles)

并在 GWT.xml 文件中

```
<stylesheet src='css/YourcssFile.css' /> 
```

# iphone - UIWebView 在 iPad 上无法正确显示

> ID：15107723
> 
> 赞同：0
> 
> 时间：2013-02-27T08:50:37.553
> 
> 标签：iphone, ios, ipad

我正在为 iphone 和 ipad 构建一个非常简单的应用程序，它带有一个加载站点的 UIWebView，但是有一个问题，它在 iphone 上正常工作，但在 iPad 上，站点向上移动，甚至无法滚动。

以下是截图：

苹果手机：

![iphone截图](../Images/d8e70334ea2959a689231057b597aa7a.png)

平板电脑：

![ipad截图](../Images/d407db7d246ee59e132a0b9739f059cd.png)

您可以看到 ipad 上的标题部分不可见，请帮助我。

这是 .m 文件代码

```
UIWebView *myWebView = [[UIWebView alloc] initWithFrame:CGRectMake(0,0,myView.frame.size.width,myView.frame.size.height)];
myWebView.delegate = self;
myWebView.scalesPageToFit = YES;
NSString *urlString = @"http://www.webhousemedia.com/?";
NSURL *url = [NSURL URLWithString:urlString];
NSURLRequest *requestObj = [NSURLRequest requestWithURL:url];
[myWebView loadRequest:requestObj];
myWebView.frame = [[UIScreen mainScreen] bounds];
[self.view addSubview:myWebView]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T09:21:54.130

```
try this..

UIWebView *myWebView = [[UIWebView alloc] initWithFrame:CGRectMake(0,0,self.view.bounds.size.width,self.view.bounds.size.height)]; 
```

# php - 合并数组中的字符串

> ID：15107726
> 
> 赞同：0
> 
> 时间：2013-02-27T08:50:43.760
> 
> 标签：php, arrays

我有这个数组：

```
$fields = $_GET['r']; 
```

其中有一些 id，例如：

```
Array (
[0] => 3134
[1] => 3135 ) 
```

然后我在 $tematiche 中有这个字符串：

```
3113,3120 
```

如何在第一个数组中标记这个字符串？另外，如何删除equals id（如果有）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T08:54:41.120

试试这个 ：

```
$fields = $_GET['r'];
$string = '3113,3120';

$array  = explode(",",$string);
$res_array  = array_unique(array_merge($fields,$array));

echo "<pre>";
print_r($res_array); 
```

输出 ：

```
Array (
[0] => 3134
[1] => 3135 
[2] => 3113
[3] => 3120
) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T08:56:13.627

尝试，

```
$fields = array_unique(array_merge($fields,explode(",",$tematiche)));
echo "<pre>";
print_r($fields); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-27T08:55:29.267

和的组合是合适`explode()`的。`array_merge()``array_unique()`

```
// Make $tematiche into an array
$tematiche_array = explode(',', $tematiche);
// Merge the two arrays
$merged_array = array_merge($fields, $tematiche_array);
// Remove all duplicate values in the array
$unique_array = array_unique($merged_array); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-27T08:55:36.150

请像这样尝试。这应该适合你。

```
$a = explode(',', '3113,3120');
print_r(array_merge($fields,$a)); 
```

# azure - Windows azure 中的 Web 角色缩放

> ID：15107727
> 
> 赞同：3
> 
> 时间：2013-02-27T08:50:46.303
> 
> 标签：azure, websocket, azure-web-roles

我已经实现了一个 websocket 服务器作为 WebRole.cs 的一部分，到目前为止它可以工作，用户可以使用网站的 URL 和指定的端点连接到服务器。现在假设我有 50,000 个用户想要连接到 websocket 服务器，我将需要更多该 web 角色的实例来处理负载。

我的问题是，如果有多个 Web 角色实例，这是否也会导致多个 Web 套接字服务器？即用户是否仍然只使用一个 URL/IP 进行连接并且都相互连接（例如在广播消息时），或者用户是否需要输入不同的 IP 才能连接到不同的 websocket 服务器（每个实例一个）并且只连接到同一服务器/实例上的用户？

编辑：具体问题

因此，如果在连接时将用户添加到：

```
private static List<UserContext> Users = new List<UserContext>(); 
```

在 WebRole.cs 中。我有一个广播方法：

```
private static void Broadcast(String message)
        {
            foreach (UserContext uc in Users)
            {
                uc.Send(message);
                Console.WriteLine("Broadcasting to: " + Users.IndexOf(uc));
            }
        } 
```

消息会广播给网站上的所有用户，还是每个实例都有自己的用户列表，因此只广播给连接到特定实例的用户？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-27T11:38:50.110

虽然 Simon 关于负载均衡器将处理所有请求这一事实是正确的（您无需担心需要连接到哪个实例），但您还需要考虑其他一些事情。从您的问题中，我了解到您想要广播消息。

假设您将应用程序扩展到 2 个实例：

*   实例 1
*   实例 2

负载均衡器将确保对**yourapp.cloudapp.net**的所有请求都转到这些实例之一（循环）。现在假设用户 A、B 和 C 被路由到实例 1，用户 D、E 和 F 被路由到实例 2：

*   实例1：用户A、用户B、用户C
*   实例2：用户D、用户E、用户F

所以让我们假设用户 A 在你的应用程序中做了一些事情，并且你想将它广播给你的所有用户。实例 1 只会看到 2 个其他已连接的用户：用户 B 和 C，并将向这些用户发送消息。这里的问题是您还想将消息发送给用户 D、E 和 F，即使它们位于不同的实例上。

这就是为什么您的 WebSocket/broadcast/... 框架（如 SignalR）需要使用可从所有实例访问的服务总线之类的东西。看看 SignalR 如何使用[Windows Azure 服务总线](https://github.com/SignalR/SignalR/wiki/Azure-service-bus)或[redis](https://github.com/SignalR/SignalR/wiki/SignalR-with-Redis-Running-on-a-Windows-Azure-Virtual-Machine)解决这个问题。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-27T09:11:56.950

您要连接的网站 URL 实际上是负载均衡器的 URL，而不是特定实例（与公共 IP 相同，它是负载均衡器中的虚拟 IP）。当您添加更多实例时，负载均衡器会将流量定向到底层实例（通过循环）。除了公共 URL 和 IP 地址之外，您永远不必担心其他任何事情（虚拟网络除外，其中不使用负载平衡器）。

Alchemy UserContext 具有端点客户端地址。单个服务器将只有连接到它的用户的源地址，而不是其他服务器。您必须从两台服务器进行广播。因此，如果您在所有服务器上广播（），您将捕获所有用户。小心重复。由于 NLB 不执行粘性会话，因此单个用户可能会存在于多个服务器上。确保您的客户端代码可以处理来自多个服务器的相同消息

# ruby-on-rails - Rails After_Filter 的正确使用

> ID：15107728
> 
> 赞同：0
> 
> 时间：2013-02-27T08:50:50.217
> 
> 标签：ruby-on-rails, ruby-on-rails-3, controllers

在我正在构建的一个小应用程序中，我有一个创建交换的控制器。当用户创建交换时，他们同时是交换的组织者和交换的参与者。`user_id`参与者由连接 a和 an的连接表跟踪`exchange_id`。`user_id`组织者由交换表中的外键跟踪。

我试图找出将自动为交易所组织者创建新会员记录的代码放在哪里。我应该把它放在exchange_controller 的创建动作本身中，还是放在`after_filter`由创建动作触发的中？或者也许在别的地方？部分问题是我找不到任何正确使用 after_filter 的好例子（guides.rubyonrails.org 只很少提及它），因此任何指向正确方向的链接也会受到赞赏。

以下是相关型号代码：

```
app/models/user.rb:
  # Returns array of exchanges user is participating in
  has_many :participations, 
           :through => :memberships,
           :source => :exchange

  # Returns array of exchanges user has organized
  has_many :organized_exchanges, 
           :foreign_key => :organizer_id, 
           :class_name => "Exchange"

app/models/membership.rb:
  class Membership < ActiveRecord::Base
    attr_accessible :exchange_id, :user_id, :role
    belongs_to :exchange
   belongs_to :user 
end

app/modles/exchange.rb:
  belongs_to :organizer, 
             :foreign_key => :organizer_id,
             :class_name => "User"

  has_many :memberships, :dependent => :destroy

  has_many :participants, 
           :through => :memberships, 
           :source => :user 
```

这是相关的控制器代码：

```
app/controllers/exchanges_controller.rb:
  def create
    @exchange = Exchange.new(params[:exchange])
    @exchange.organizer_id = current_user.id
    if @exchange.save
      redirect_to exchange_path(@exchange.id)
    else
      render 'new'
    end
  end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T09:02:15.893

`after_filter`在这种情况下是完全不同的事情。当你的视图被完全处理并且你想要调用一些动作来做某事时，它会被调用。

您可以使用`after_create`在数据库中创建记录时触发的回调。

在您的情况下，用户正在创建交换，因此在创建交换后，将`after_create`触发回调，您可以在那里应用您的功能，使创建交换的当前用户成为参与者。

在模型中的写法是这样的：

```
 after_create :do_something

  def do_something
    something.do!
  end 
```

注意：这里不好用`after_save`，因为每次保存记录或者更新记录时都会触发。

有一篇不错的 SO 帖子清楚地告诉您 和 之间的`after_create`区别`after_save`。

有关两者之间的区别，请参阅[此SO 帖子。](https://stackoverflow.com/questions/6422199/what-is-the-difference-between-after-create-and-after-save-and-when-to-use-w)

更多关于回调的[信息在这里](http://api.rubyonrails.org/classes/ActiveRecord/Callbacks.html)。

# c++ - 具有重定向标准输出流的 GUI 应用程序不会将控制权返回到控制台

> ID：15107731
> 
> 赞同：1
> 
> 时间：2013-02-27T08:51:12.970
> 
> 标签：c++, winapi, console-application

我有一个用 C++（使用 MFC）编写的 GUI Windows 应用程序，它将自身附加到父控制台以通过`stdout`流输出。它使用[AttachConsole](http://msdn.microsoft.com/en-us/library/windows/desktop/ms681952%28v=vs.85%29.aspx) API 和[此处描述](http://dslweb.nwnexus.com/~ast/dload/guicon.htm)`RedirectIOToConsole`的方法。

因此，如果我从常规控制台应用程序（本机具有输出到标准输出）中调用以下行：

```
_tprintf(_T("Test message.\n")); 
```

我得到了我期望的输出：

![在此处输入图像描述](../Images/4a3e7269f2d66a04bf0d4d8181776981.png)

但是，如果我从我的 GUI 应用程序（带有附加的父控制台）调用同一行代码，我会得到以下信息，除了控件似乎没有返回到父命​​令提示符窗口（见红色圆圈）：

![在此处输入图像描述](../Images/2b9b0fff8b40d30cc8ca5df01fb512cc.png)

请注意，我可以在父命令提示符窗口中键入，所以它不会挂起，如果我按 Enter 键，它将执行我作为命令键入的任何内容。

那么我没有从我的控制台应用程序调用什么来将控制权返回给父控制台？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T11:40:10.080

这不是关于返回控制权。

当您从命令提示符运行控制台应用程序时，命令提示符会等到控制台应用程序完成，因此您会看到控制台应用程序的输出，然后是一个新的提示符，如您的第一张图片所示。

当您从命令提示符运行 GUI 应用程序时，命令提示符不会等待 GUI 应用程序完成，因此您通常会看到一个新的提示符，然后是 GUI 应用程序的输出，如下所示：

`C:\>TestGuiProjWithOutputToConsole`
`C:\>Test Message.`
`_`

正如您所指出的，没有任何问题。您可以键入命令并且它们起作用，只是提示出现在错误的位置。

您的第二个示例没有显示第二个提示，可能是因为您有一个回车符，所以提示被覆盖。尝试在测试消息之前输出一个换行符，您应该会看到提示（尽管仍然在错误的位置）。

您可以通过运行以下命令告诉控制台等待 GUI 应用程序：

`start /wait TestGuiProjWithOutputToConsole`

简而言之，GUI 应用程序不能很好地使用命令提示符，因为它们都在同时运行，输出到同一个控制台，所以它们的输出是混乱的。

# php - 无法通过 PHP 检索 JSON POST：cURL

> ID：15107734
> 
> 赞同：0
> 
> 时间：2013-02-27T08:51:16.677
> 
> 标签：php, json, post, curl, force.com

我尝试实现以下 PHP 代码以通过 PHP 发布 JSON：cURL（SOME FORCE.COM WEBSITE 是一个标记，表示我要发布的 URL）：

```
$url = "<SOME FORCE.COM WEBSITE>";

$data =
'application' =>
array
(
    'isTest' => FALSE,
    key => value,
    key => value,
    key => value,
    ...
)

$ch = curl_init($url);
$data_string = json_encode($data);
curl_setopt($ch, CURLOPT_POST, true);
//Send blindly the json-encoded string.
//The server, IMO, expects the body of the HTTP request to be in JSON
curl_setopt($ch, CURLOPT_POSTFIELDS, $data_string);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
curl_setopt($ch, CURLOPT_HEADER, true);
curl_setopt($ch, CURLOPT_HTTPHEADER,
array
(
    'Content-Type:application/json',
    'Content-Length: ' . strlen($data_string)
)
);

$result = curl_exec($ch);

curl_close($ch);

print_r($result);

echo '<pre>';
echo $_POST;
$jsonStr = file_get_contents('php://input'); //read the HTTP body.
var_dump($jsonStr);
var_dump(json_decode($jsonStr));
echo '</pre>'; 
```

上面的输出如下：

```
"Your TEST POST is correct, please set the isTest (Boolean) attribute on the application to FALSE to actually apply."
Arraystring(0) ""
NULL 
```

好的，以上确认我使用 json_encode 正确格式化了 JSON 数据，并且 SOME FORCE.COM 网站承认 'isTest' 的值为 FALSE。但是，我没有从“var_dump($jsonStr)”或“var_dump(json_decode($jsonStr))”中得到任何东西。我决定忽略这个事实并将'isTest'设置为FALSE，假设我没有得到任何JSON数据，因为我将'isTest'设置为TRUE，但是当我将'isTest'设置为FALSE时会出现混乱：

```
[{"message":"System.EmailException: SendEmail failed. First exception on row 0; first error: REQUIRED_FIELD_MISSING, Missing body, need at least one of html or plainText: []\n\nClass.careers_RestWebService.sendReceiptEmail: line 165, column 1\nClass.careers_RestWebService.postApplication: line 205, column 1","errorCode":"APEX_ERROR"}]
Arraystring(0) ""
NULL 
```

我仍然没有收到任何 JSON 数据，最终无法发送电子邮件。我相信这个问题是由空的电子邮件正文引起的，因为“var_dump($jsonStr)”或“var_dump(json_decode($jsonStr))”没有任何内容。你能帮我检索 JSON POST 吗？我真的很感激任何提示、建议等。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T07:46:34.303

我自己解决了这个问题。我不确定我这样做是否正确，但事实证明我的代码是完美的。我不断刷新我的网站，从那里发布到一些 FORCE.COM 网站。我相信管理一些 FORCE.COM 网站的人最终遇到了问题。我所做的一切都没有错。出于某种原因，我得到了一个代码 202 和一些乱码。我很乐意显示输出，但为了管理我要发布的某些 FORCE.COM 网站的人，我不想再次发布。谢谢你们的帮助。

# visual-studio-2012 - Visual Studio 2012 中的这个文件是什么？

> ID：15107736
> 
> 赞同：1
> 
> 时间：2013-02-27T08:51:20.750
> 
> 标签：visual-studio-2012, file-type

![在此处输入图像描述](../Images/a627f997d632c6c64d4c5896fd331e37.png)

它实际上并不存在于项目的文件夹中，而是存在于其他地方，它是一个参考文件吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-27T08:53:40.400

That icon displayed means its a file referenced from a folder outside the Solution. Visual Studio C# Solutions generally show the file system directory that project file is in. Files outside of that are shown as being linked in, or referenced, by that icon you see there. See [`Adding as a Link`](http://msdn.microsoft.com/en-us/library/9f4t9t92%28VS.80%29.aspx).

# java - 将 gui 中的值添加到数据库表中

> ID：15107744
> 
> 赞同：0
> 
> 时间：2013-02-27T08:52:06.310
> 
> 标签：java, jdbc, resultset

我正在尝试更新数据库中的一个表，我在该表中接受学生的费用并维护收到的金额、收到的总金额和付款方式等的记录。我的代码如下：

```
private void pay_saveActionPerformed(java.awt.event.ActionEvent evt) {                                         
    String dbUrl = "jdbc:mysql://localhost/hostel";
    String dbClass = "com.mysql.jdbc.Driver";
    PreparedStatement ps1 = null;

    try {
        Class.forName("com.mysql.jdbc.Driver");

            con = DriverManager.getConnection (dbUrl,"root","17121990");
            System.out.println("connected!");

            String firstname=pay_enter_firstname.getText();
            String lastname=pay_enter_lastname.getText();

            String amt=pay_enter_amt.getText();
            int amount=Integer.parseInt(amt);
            String day=pay_enter_date.getText(); 
            String cheque_no=pay_enter_chequeno.getText();
            String mode=pay_enter_mode.getText();
            int totalamount=10000;               
            int bal_amt=totalamount-amount;
            String remark=pay_enter_remark.getText();          
            int id = Integer.parseInt(pay_enter_id.getText());

            Statement stmt = con.createStatement(
                                  ResultSet.TYPE_SCROLL_INSENSITIVE,
                                  ResultSet.CONCUR_UPDATABLE);
            ResultSet rs = stmt.executeQuery("SELECT id, lastamtreceived FROM payment");

            if(rs.next())
           {
                stmt = con.createStatement(
                                  ResultSet.TYPE_SCROLL_INSENSITIVE,
                                  ResultSet.CONCUR_UPDATABLE);
                rs = stmt.executeQuery("SELECT id, lastamtreceived FROM payment");

              while(rs.next())
                {

              int temp =rs.getInt(1);

              if (temp ==id)
              {
                  int amtrecvd2= rs.getInt(2);
                  bal_amt=totalamount- (amtrecvd2+amount);
                  String updt = "UPDATE payment SET Amountreceivd="+(amtrecvd2+amount)+",lastamtreceived="+amount+",dte='"+day+"', balance_amt ="+bal_amt+" WHERE id ="+temp+";" ;
                  Statement stmt1 = con.createStatement();
                  int result = stmt1.executeUpdate(updt);
              }

                }
           }

             if(!rs.next())
            {
                String str=" INSERT INTO payment(id, firstname,lastname,Amountreceivd,dte,lastamtreceived,Creditcashcheque,"
                   + "cheque_no,balance_amt,totalamount,Remark) VALUES ("+id+",'"+firstname+"','"+lastname+"',"+amount+",'"+day+"',"+amount+",'"+mode+"','"+cheque_no+"',"+ bal_amt+","+totalamount+",'"+remark+"')";
                Statement stmt1=con.createStatement();

                int result=stmt1.executeUpdate(str);
                panel_feesframe.setVisible(false);
            }

               panel_feesframe.setVisible(false);

    con.close();
    }
        catch (ClassNotFoundException | SQLException | NumberFormatException e)
    {
        e.printStackTrace();
    }

} 
```

最初，当我添加新值时，我得到了正确的结果，但是当我尝试更新现有行时，我得到了错误，即我为主键 ID 制作了重复条目。

我应该检查什么条件，以便我知道结果集没有那个特定的 id 值并且新人正在支付费用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T08:58:10.790

此条件： `if(!rs.next())` 正在 while 循环之外进行检查。此条件始终为真，即使发生更新，也会尝试插入记录。为避免这种情况，我建议使用标志变量。一旦发生更新，将此标志的值设置为 1。检查它是否已变为 1 而不是`if(!rs.next())`进入内部。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T09:00:21.803

你是两个`if`陈述正在冲突...

```
// If this is true...
if(rs.next()) {
    // ...
    // Looping till the it's false...
    while(rs.next()) {
        // ....
    }
 }

 // Will mean that this is false...
 if(!rs.next()) 
```

你应该使用一个`else`

```
if(rs.next()) {
    // ...
    while(rs.next()) {
        // ....
    }
 } else {...} 
```

**更新**

在与 Aashray 进行了启发性的转换（谢谢）之后，我们得出的结论是你的逻辑被打破了

而不是手动尝试通过匹配 id 手动查找记录，让 SQL 数据库为您完成。

代替....

```
ResultSet rs = stmt.executeQuery("SELECT id, lastamtreceived FROM payment"); 
```

你应该用...

```
ResultSet rs = stmt.executeQuery("SELECT id, lastamtreceived FROM payment where id = " + id); 
```

这将返回一个`ResultSet`空的（不匹配）或（希望）一行。

从那里，调用`rs.next()`现在可以让您在更新或正确插入之间进行分支。

```
private void pay_saveActionPerformed(java.awt.event.ActionEvent evt) {
    String dbUrl = "jdbc:mysql://localhost/hostel";
    String dbClass = "com.mysql.jdbc.Driver";
    PreparedStatement ps1 = null;

    try {
        Class.forName("com.mysql.jdbc.Driver");

        con = DriverManager.getConnection(dbUrl, "root", "17121990");
        System.out.println("connected!");

        String firstname = pay_enter_firstname.getText();
        String lastname = pay_enter_lastname.getText();

        String amt = pay_enter_amt.getText();
        int amount = Integer.parseInt(amt);
        String day = pay_enter_date.getText();
        String cheque_no = pay_enter_chequeno.getText();
        String mode = pay_enter_mode.getText();
        int totalamount = 10000;
        int bal_amt = totalamount - amount;
        String remark = pay_enter_remark.getText();
        int id = Integer.parseInt(pay_enter_id.getText());

        Statement stmt = con.createStatement(
                        ResultSet.TYPE_SCROLL_INSENSITIVE,
                        ResultSet.CONCUR_UPDATABLE);
        ResultSet rs = stmt.executeQuery("SELECT id, lastamtreceived FROM payment where id = " + id);

        if (rs.next()) {
            int amtrecvd2 = rs.getInt(2);
            bal_amt = totalamount - (amtrecvd2 + amount);
            String updt = "UPDATE payment SET Amountreceivd=" + (amtrecvd2 + amount) + ",lastamtreceived=" + amount + ",dte='" + day + "', balance_amt =" + bal_amt + " WHERE id =" + id + ";";
            Statement stmt1 = con.createStatement();
            int result = stmt1.executeUpdate(updt);
        } else {
            String str = " INSERT INTO payment(id, firstname,lastname,Amountreceivd,dte,lastamtreceived,Creditcashcheque,"
                            + "cheque_no,balance_amt,totalamount,Remark) VALUES (" + id + ",'" + firstname + "','" + lastname + "'," + amount + ",'" + day + "'," + amount + ",'" + mode + "','" + cheque_no + "'," + bal_amt + "," + totalamount + ",'" + remark + "')";
            Statement stmt1 = con.createStatement();

            int result = stmt1.executeUpdate(str);
            panel_feesframe.setVisible(false);
        }

        panel_feesframe.setVisible(false);

        con.close();
    } catch (ClassNotFoundException | SQLException | NumberFormatException e) {
        e.printStackTrace();
    }

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-27T09:06:44.987

```
 I think this may help you 
```

私人无效 pay_saveActionPerformed(java.awt.event.ActionEvent evt) {
String dbUrl = "jdbc:mysql://localhost/hostel"; String dbClass = "com.mysql.jdbc.Driver"; PreparedStatement ps1 = null;

尝试 { Class.forName("com.mysql.jdbc.Driver");

```
 con = DriverManager.getConnection (dbUrl,"root","17121990");
    System.out.println("connected!");

    String firstname=pay_enter_firstname.getText();
    String lastname=pay_enter_lastname.getText();

    String amt=pay_enter_amt.getText();
    int amount=Integer.parseInt(amt);
    String day=pay_enter_date.getText(); 
    String cheque_no=pay_enter_chequeno.getText();
    String mode=pay_enter_mode.getText();
    int totalamount=10000;               
    int bal_amt=totalamount-amount;
    String remark=pay_enter_remark.getText();          
    int id = Integer.parseInt(pay_enter_id.getText());

    Statement stmt = con.createStatement(
                          ResultSet.TYPE_SCROLL_INSENSITIVE,
                          ResultSet.CONCUR_UPDATABLE);
    ResultSet rs = stmt.executeQuery("SELECT id, lastamtreceived FROM payment");

    if(rs.next())
   {
        stmt = con.createStatement(
                          ResultSet.TYPE_SCROLL_INSENSITIVE,
                          ResultSet.CONCUR_UPDATABLE);
        rs = stmt.executeQuery("SELECT id, lastamtreceived FROM payment");

      while(rs.next())
        {

      int temp =rs.getInt(1);

      if (temp ==id)
      {
          int amtrecvd2= rs.getInt(2);
          bal_amt=totalamount- (amtrecvd2+amount);
          String updt = "UPDATE payment SET Amountreceivd="+(amtrecvd2+amount)+",lastamtreceived="+amount+",dte='"+day+"', balance_amt ="+bal_amt+" WHERE id ="+temp+";" ;
          Statement stmt1 = con.createStatement();
          int result = stmt1.executeUpdate(updt);
      }

        }
   }
    else
    {
        String str=" INSERT INTO payment(id, firstname,lastname,Amountreceivd,dte,lastamtreceived,Creditcashcheque,"
           + "cheque_no,balance_amt,totalamount,Remark) VALUES ("+id+",'"+firstname+"','"+lastname+"',"+amount+",'"+day+"',"+amount+",'"+mode+"','"+cheque_no+"',"+ bal_amt+","+totalamount+",'"+remark+"')";
        Statement stmt1=con.createStatement();

        int result=stmt1.executeUpdate(str);
        panel_feesframe.setVisible(false);
    }

       panel_feesframe.setVisible(false); 
```

con.close(); } catch (ClassNotFoundException | SQLException | NumberFormatException e) { e.printStackTrace(); }

# c# - 将对象数组转换为包含空值的字符串数组

> ID：15107749
> 
> 赞同：3
> 
> 时间：2013-02-27T08:52:24.797
> 
> 标签：c#, lambda, arrays

我想将对象数组转换为字符串数组而不排除空值。我得到以下代码将对象数组转换为字符串数组。但它排除了空值。

```
string[] foo = myvalues.OfType<object>().Select(o => o.ToString()).ToArray(); 
```

我在谷歌搜索了很多，但没有找到解决方案

请帮忙。

编辑： - 得到答案......

```
List<string> lst = new List<string>(); 
foreach (object o in myvalues) 
if (o==null)
 { 
lst.Add(null); 
} 
else 
{ 
lst.Add(o.ToString()); 
} 
string[] str2 = lst.ToArray(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T09:06:14.887

您可以使用 OfType 调用过滤掉空值。你可以尝试类似的东西

```
string[] fo = myvalues.Select(o => o == null ? (string)null : o.ToString()).ToArray(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-12-01T16:47:14.063

> 我们可以使用以下方法将**Object Array**转换为**String Array**。

```
Object[] ObjArray= Dt.Rows[i].ItemArray;        

string[] StrArray= Array.ConvertAll(ObjArray,Convert.ToString); 
```

（对于对象数组中的空对象值，它将在字符串数组中保留空字符串。）

# ios - 自定义 uibarbutton 还会更改电子邮件表单中的按钮

> ID：15107751
> 
> 赞同：1
> 
> 时间：2013-02-27T08:52:25.827
> 
> 标签：ios, objective-c, xcode, customization, uibarbuttonitem

我不确定我在这里做了什么。

在尝试创建自定义导航按钮几个小时后，我终于确定了这段代码：

```
[[UIBarButtonItem appearance] setBackgroundImage:uiBtn forState:UIControlStateNormal barMetrics:UIBarMetricsDefault]; 
```

它工作得很好，太好了。

我已经在`appDelegate.m`文件中实现了它，并决定更改电子邮件窗口使用的按钮。

如何将这些恢复为标准 UI 按钮？唯一的其他选择是让我更改栏以匹配这些按钮，就像我对应用程序的其余部分所做的那样，但我想让电子邮件表单感觉分开。

我会发布截图，但我还是新手。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T09:09:17.627

您可以使用该`appearanceWhenContainedIn:`方法（请参阅[文档](http://developer.apple.com/library/ios/documentation/uikit/reference/UIAppearance_Protocol/Reference/Reference.html#//apple_ref/occ/intfcm/UIAppearance/appearanceWhenContainedIn%3a)）为一组类设置不同的配置，在您的情况下：

```
[[UIBarButtonItem appearanceWhenContainedIn:[MFMailComposeViewController class], nil] setBackgroundImage:nil forState:UIControlStateNormal barMetrics:UIBarMetricsDefault]; 
```

# html - 如果浮动应用于子元素，则CSS样式删除背景颜色

> ID：15107755
> 
> 赞同：1
> 
> 时间：2013-02-27T08:52:36.467
> 
> 标签：html, css

您好我正在尝试制作一个网页。在我使用样式部分的 css 之后，当我给包装器一个背景颜色时，它的工作但是当我去设置子元素的样式时，包装器的底色不起作用，可能是什么原因？请帮我！

```
body{margin:0px}

.wrapper{width:960px; margin:0 auto; background-color:#ccc;}

 .wrapper > .header{width:960px;}

.wrapper > .header > .logo{width:209px; height:50px; float:left;}

.wrapper > .header > .links{float:right;} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T09:42:25.593

原因是你的“包装器”没有高度，因为里面有浮动。要解决此问题，您可以做两件事：

1.  清除浮动（推荐）
2.  添加溢出：隐藏到包装器

1) 清除浮动

```
.floatstop:after {content: ".";display :block;height :0;clear :both;visibility :hidden;}
*:first-child+html .floatstop {min-height: 1px;} /* ie7 fix */
* html .floatstop { height: 1%;} /* ie6 fix */

<div class="wrapper floatstop"> .elements.. </div> 
```

2）溢出技巧

```
.wrapper {
  width:960px;
  margin:0 auto;
  background-color:#ccc;
  overflow: hidden;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T09:01:42.707

你需要浮动你的包装，以便给它包含在其中的元素的高度，这将显示背景颜色。当您在 Chrome 中检查 .wrapper 时，它给出的尺寸是多少，如果它是 0x0，那么上述修复将起作用。

# variables - 如何访问 TWIG 宏中的模板变量？

> ID：15107760
> 
> 赞同：17
> 
> 时间：2013-02-27T08:52:55.653
> 
> 标签：variables, macros, twig

我无法访问 TWIG 宏中的模板变量。

这是一个简化的示例：

```
{% set myname = "Ligio" %}
{{ _self.pagedurl(1) }}

{% macro pagedurl(page) %}
    Hi {{ _self.myname }}! This is Page Num {{ page }}
{% endmacro %} 
```

如何在不将变量传递给宏的情况下访问变量**myname ？**

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-03-02T17:23:57.810

你不能。

如文档中所述：

> 作为 PHP 函数，宏无法访问当前模板变量。

您唯一的解决方案是将参数传递给`macro`：

```
{% import _self as flow %}
{{ flow.pagedurl(1, "Ligio") }}

{% macro pagedurl(page, myname) %}
    Hi {{ myname }}! This is Page Num {{ page }}
{% endmacro %} 
```

**重要的提示：**

您可能已经注意到，在我的示例中，我调用了`{% import _self as flow %}`.
这是你**必须**做的事情：

> 当您在要使用它的模板中定义宏时，您可能很想通过 _self.input() 直接调用该宏，而不是导入它；即使看起来可行，这也只是当前实现的副作用，它在 Twig 2.x 中不再有效。

[http://twig.sensiolabs.org/doc/tags/macro.html](http://twig.sensiolabs.org/doc/tags/macro.html)

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2014-12-24T13:25:52.240

如果您需要将多个全局变量传递给宏，您可能会发现该`_context`变量很有用：

```
{% macro mymacro(globalvars) %}
    Value of the global variable pi is {{ globalvars.pi }}
{% endmacro %}

{% set pi = 3.14159 %}
{{ _self.mymacro(_context) }} 
```

参考：[这个](https://stackoverflow.com/a/7611419/523100)或[这个](https://stackoverflow.com/a/20372991/523100)答案。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2020-05-14T00:10:55.647

您可以设置全局变量并在模板中的任何位置访问它

```
$loader = new \Twig_Loader_Filesystem('path/to/templates');
$twig = new \Twig_Environment($loader);
$twig->addGlobal('V_Name', 'V_Value'); 
```

# java - 变量+=值和变量=变量+值的区别；

> ID：15107763
> 
> 赞同：2
> 
> 时间：2013-02-27T08:53:09.680
> 
> 标签：java, operators

例如：

```
int a = 10;
a += 1.5; 
```

这运行完美，但是

```
a = a+1.5; 
```

这个作业说`Type mismatch: cannot convert from double to int`。`+= operator`所以我的问题是：和之间有什么区别`= operator`。为什么第一个任务没有说什么，但第二个会。请给我解释一下。只是我想知道我是否可以将第一个作业用于所有地方。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-27T08:55:26.153

```
int a = 10;
a += 1.5; 
```

相当于：

```
int a = 10;
a = (int) (a + 1.5); 
```

* * *

一般来说：

`x += y;`相当于`x = (type of x) (x + y);`

* * *

见[15.26.2。复合赋值运算符](http://docs.oracle.com/javase/specs/jls/se7/html/jls-15.html#jls-15.26.2)

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-02-27T08:56:19.883

从[Java 语言规范部分 15.26.2](http://docs.oracle.com/javase/specs/jls/se7/html/jls-15.html#jls-15.26.2)：

> 形式的复合赋值表达式`E1 op= E2`等价于`E1 = (T) ((E1) op (E2))`，其中`T`是 的类型`E1`，除了`E1`只计算一次。

所以最重要的区别（就为什么第二个版本不编译而言）是隐式转换回原始变量的类型。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-27T09:02:38.880

检查此链接

```
int a = 10;
a += 1.5; 
```

将被视为

```
int a=10;
a=(int)(a+1.5); 
```

正如您可以在此链接[表达式中找到的](http://docs.oracle.com/javase/specs/jls/se5.0/html/expressions.html#15.26.2)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-27T08:57:00.797

的情况下

```
a += 1.5; 
```

隐式自动装箱完成

和这里一样

```
a = a+1.5; 
```

您正在将 int 变量显式添加到 float/double 变量

所以要纠正它

```
a = a+(int)1.5; 
```

或者

```
a = (int) (a+1.5); 
```

# php - 如何清理数组以正确转换为 json 字符串

> ID：15107764
> 
> 赞同：-3
> 
> 时间：2013-02-27T08:53:10.670
> 
> 标签：php, json

如何正确地将数组转换为 json 字符串？我正在从 amazon、ebay、flickr 和 freebase 获取数据，并且返回的一些数据不能安全地转换为 json。

这是我目前使用后得到的 json 字符串`json_encode()`

[https://dl.dropbox.com/u/126688107/invalid_json.txt](https://dl.dropbox.com/u/126688107/invalid_json.txt)

我已经尝试过使用`addslashes()`转义双引号。但我也得到带单引号的字符串，所以我也在使用`str_replace("'", "\'", $string_with_single_quotes)`

但我也得到了类似的东西：

```
"parent":null
"nodes":[] 
```

我不知道它是否是有效的 json。我也`addslashes()`明白这已经过火了：

```
It is the world\\\\\\'s 
```

我需要的是一个工具，它可以指出是什么让我的 json 字符串无效。我试过这个[http://sourceforge.net/projects/jsonschemaphpv/](http://sourceforge.net/projects/jsonschemaphpv/)但它似乎无法识别具有多个项目的 json。它总是说它无效，因为我拥有的字符串被包裹在`[]`

有任何想法吗？

提前致谢！

**更新**

对于那些问为什么我认为这是无效的 json 的人。我实际上是将 json 字符串保存到数据库中，当我检索它并将`json_decode($str, true)`其转换为数组时，它只是返回`NULL`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T08:59:24.283

您不需要为`json_encode()`输出有效的 JSON 执行任何特殊操作。

您链接到的“验证器”*没有*检查输入是否是有效的 JSON；它正在检查它是否匹配特定的“模式”（这不是 JSON 真正有的概念，验证器的正确性是未知的）。

在我看来，这个问题可能是您将 JSON 从插入换行符的东西中复制粘贴出来 - 这使得 JSONLint 等工具抱怨。

# r - 如何在R中删除图中的顶点？

> ID：15107768
> 
> 赞同：4
> 
> 时间：2013-02-27T08:53:37.307
> 
> 标签：r, social-networking, igraph

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-27T09:03:14.927

您收到错误是因为给定的顶点之一不在图形顶点列表中。一个建议是尝试使用`igraph`函数，一旦你熟悉了它们，就将它应用到你的自定义图形中。这里有一个演示：

```
 library(igraph)
 g <- graph.ring(10)
 V(g)
Vertex sequence:
 [1]  1  2  3  4  5  6  7  8  9 10 
```

现在我尝试删除现有的顶点：

```
delete.vertices(g, c(2,7,9) )
IGRAPH U--- 7 4 -- Ring graph
+ attr: name (g/c), mutual (g/x), circular (g/x) 
```

对于不存在的，我得到你的错误：

```
delete.vertices(g, c(20))

Error in delete.vertices(g, c(20)) : 
  At iterators.c:759 : Cannot create iterator, invalid vertex id, Invalid vertex id 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-06-20T04:38:22.667

你在用 igraph 吗？

read.graph 函数可能会将顶点 ID 作为字符串读取。在这种情况下，您可能想要：

```
delete.vertices(graph,c('717527','61373')) 
```

反而。此外，delete.verticies 返回一个新的图形对象。如果您希望稍后显示更改，您需要确保将结果存储在图表中。

```
graph<-read.graph(paste0("H:/graph.txt"),format="ncol",directed="TRUE")
graph<-delete.vertices(graph,c('717527','61373')) 
```

# search - Liferay search content for a specific groupid

> ID：15107772
> 
> 赞同：0
> 
> 时间：2013-02-27T08:53:45.453
> 
> 标签：search, liferay

I would like to ask, how can I search web-content of my site for a specific group-id. Now I have a method which searches correctly by `keyword` in all of the web-content but doesn't search for a specific group-id.

Any ideas?

```
HttpServletRequest httpReq = FacesService.getHttpServletRequest();
//PortalUtil.getHttpServletRequest((PortletRequest) facesContext.getExternalContext().getRequest() );
//(PortletRequest) facesContext.getExternalContext().getRequest()

SearchContext searchContext = SearchContextFactory.getInstance(httpReq );

searchContext.setKeywords(query);
searchContext.setEnd(2000);
searchContext.setStart(0);

String[] entryCalssName = {JournalArticle.class.getName()};

searchContext.setEntryClassNames(entryCalssName);
searchContext.setAttribute(Field.GROUP_ID, 14603);

Facet assetEntriesFacet = new AssetEntriesFacet(searchContext);

assetEntriesFacet.setStatic(true);

searchContext.addFacet(assetEntriesFacet);

Facet scopeFacet = new ScopeFacet(searchContext);

scopeFacet.setStatic(true);

searchContext.addFacet(scopeFacet);

Indexer indexer = FacetedSearcher.getInstance();

Hits hits = indexer.search(searchContext);

List<JournalArticle>   searchResults = new ArrayList<JournalArticle>();

documents = hits.toList();

if (documents != null && !documents.isEmpty()) {
    for(Document doc : documents) {

        Long classPK = Long.parseLong(doc.get(Field.ENTRY_CLASS_PK));

        AssetEntry assetEntry = AssetEntryLocalServiceUtil.getEntry(JournalArticle.class.getName(), classPK);

        JournalArticle article = JournalArticleLocalServiceUtil.getLatestArticle(assetEntry.getClassPK()); 

        System.out.println(article.getGroupId());

        // if(article.getGroupId() == groupId){//I would like to get rid of this

        searchResults.add(article);

        // }

    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T10:13:02.180

您是否尝试过这种方式来设置 groupId `SearchContext`？

```
searchContext.setGroupIds(long[] groupIds); 
```

# c# - Serialization using c#

> ID：15107774
> 
> 赞同：1
> 
> 时间：2013-02-27T08:54:04.203
> 
> 标签：c#, serialization, xmlserializer

Why don't use serialization attribute With XMLSerializer in c#.

[http://msdn.microsoft.com/en-us/library/71s92ee1.aspx](http://msdn.microsoft.com/en-us/library/71s92ee1.aspx)

Here OrderedItem class is not serialized. What is the reason?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T09:00:37.313

`OrderedItem`非常序列化......我猜你的意思是“为什么它没有`[Serializable]`属性？”。如果是这样，答案很简单：序列化程序不需要它。它*是*etc要求的`BinaryFormatter`，但他们正在做一些不同的事情——他们正在序列化对象的内部状态。但是，如今大多数序列化程序*都不会*检查这一点。例子：

*   `XmlSerializer`
*   `DataContractSerializer`（以及所有变体）
*   `JavascriptSerializer`
*   JSON.net
*   protobuf-net
*   还有很多其他的

基本上，它*只是没有必要*。也许关键的区别在于，`BinaryFormatter`可能会意外（没有属性）最终通过*远程*边界发送不适当的数据，这可能会导致大问题。

许多“轻量级”框架甚至都没有`[Serializable]`定义。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T08:59:35.570

BinaryFormatter 使用 [Serializable] 属性。但是 XMLSerializer 不需要这个。通过创建序列化程序

```
 XmlSerializer serializer = 
   new XmlSerializer(typeof(OrderedItem)); 
```

他假设 OrderedItem 确实是可序列化的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-27T09:00:43.550

我发现的一个解释是，如果您将您的类标记为`[Serializable]`并使用例如序列化该对象，`BinaryFormatter`那么即使该类的实例的私有成员也将被序列化，因此您可以通过它来决定该类是否应该被序列化全部或使用 Xml 或 JS 序列化程序对其进行序列化，并且只获取公共成员。

因此，如果您使用 XmlSerializer 进行序列化，则只会对公共成员进行序列化。

# vba - How to print continue on ending of ever page except last in Crystal Report XI?

> ID：15107780
> 
> 赞同：1
> 
> 时间：2013-02-27T08:54:22.337
> 
> 标签：vba, vb6, crystal-reports, crystal-reports-xi

![Snapshot of Crystal Report](../Images/c457e96af27eef9d143c84d6dc0b0895.png)

my detailsection2 is default suppressed,
I want to unsuppress DetailSection2 only when page reaches to an end then again supress on next page and unsuppress DetailSection3 on last record.

I've managed unsupress DetailSection3 By adding the below formula
(Placed in Supress(No Drill-Down)'s Formula Field)
Formula:
if OnLastRecord then false else true

So Output Will Look Like
------------------Page 1-----------------------
Name | Amount
AB11 | 1200
AB11 | 1200
Continue......
-----------------Page 1------------------------
-----------------Page 2------------------------
Name | Amount
AB11 | 1200
AB11 | 1200
Gtotal : 4800
-----------------Page 2------------------------

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T11:44:07.767

*   Move text field (that reads 'continued') to page-footer; add suppression formula for section that reads `OnLastRecord`.
*   Move grand total to report-footer section

# arduino - Arduino and Processing (PDE) via Ethernet

> ID：15107784
> 
> 赞同：0
> 
> 时间：2013-02-27T08:54:42.800
> 
> 标签：arduino, processing, ethernet, pde

**Arduino: Is it possible to communicate with Arduino through Ethernet, using a [Processing](http://www.processing.org) (PDE) script?**

I've already created a desktop application using Processing, but in this case I communicate with Arduino through the USB.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T12:27:10.553

是的，您可以例如创建一个 arduino 聊天服务器：[http](http://arduino.cc/en/Tutorial/ChatServer) ://arduino.cc/en/Tutorial/ChatServer 并创建一个像这样的处理客户端：http: [//processing.org/reference/libraries/net/Client_write_。 html](http://processing.org/reference/libraries/net/Client_write_.html)

当然你需要
`myClient = new Client(this, "127.0.0.1", 10002);`
改变

`myClient = new Client(this, "IP of Arduino", 23);`

如果您随后通过 telnet 会话连接到 arduin o，您将看到来自 arduino 的处理脚本的输出

# sql - sql: Cannot convert to Date

> ID：15107786
> 
> 赞同：0
> 
> 时间：2013-02-27T08:54:49.043
> 
> 标签：sql, sql-server

I have the following sql:

```
 select CONVERT(date,visitorannouncements.DateOfVisit), visitorannouncements.Agent,
            Firstname, visitors.Lastname 
       from Visitors

       LEFT JOIN visitorannouncements 
            ON Visitors.VisitorAnnouncementId=visitorannouncements.Id
      where ship = @shipname 
        AND convert(datetime, visitorannouncements.DateOfVisit,101) BETWEEN  @startDate AND @endDate 
```

The visitorannouncements.DateOfVisit is nvarchar field.

I get the following error:

> TITLE: Microsoft SQL Server Report Builder
> 
> * * *
> 
> An error occurred while reading data from the query result set. The conversion of a nvarchar data type to a datetime data type resulted in an out-of-range value.
> 
> * * *
> 
> ADDITIONAL INFORMATION:
> 
> The conversion of a nvarchar data type to a datetime data type resulted in an out-of-range value. (Microsoft SQL Server, Error: 242)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T09:01:35.693

指定正确的[样式](http://msdn.microsoft.com/en-us/library/ms187928.aspx)以匹配数据字符串。

```
CONVERT ( data_type [ ( length ) ] , expression [ , style ] ) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T09:00:14.720

尝试找出哪个`visitorannouncements.DateOfVisit`不是有效日期：

```
select *
from visitorannouncements
where isdate(DateOfVisit) = 0 
```

# oracle - 在游标内检索 Oracle 中的选择计数（*）

> ID：15107788
> 
> 赞同：0
> 
> 时间：2013-02-27T08:54:53.283
> 
> 标签：oracle, plsql, cursor, rowcount

我需要检索游标内的 SELECT COUNT(*) 语句中的行数（在 Oracle 中）。

以下代码应该清楚地解释它：

```
PROCEDURE Save(CF_CURSOR OUT "VPA"."CF_#Runtime".CF_CURSOR_TYPE) AS
    V_CF_CURSOR "VPA"."CF_#Runtime".CF_CURSOR_TYPE;
    CF_ROWCOUNT NUMBER;
    BEGIN
        OPEN V_CF_CURSOR FOR
        SELECT COUNT(*) INTO CF_ROWCOUNT FROM (
            SELECT * FROM "VPA"."Employee" -- returns 1 row
        ) WHERE ROWNUM <= 1;
        IF(CF_ROWCOUNT = 0) THEN
            -- DO SOMETHING BUT NEVER GOES HERE
        END IF;
        COMMIT;
    CF_CURSOR := V_CF_CURSOR;
    END; 
```

在这里，从未设置 CF_ROWCOUNT 的值。如果我删除光标，一切都会按预期工作。我曾尝试使用 SQL%ROWCOUNT，但它也不起作用。而且，我无法删除光标...

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T09:02:11.633

您是否尝试过打开游标 - 它执行 COUNT(*)，然后将其提取到 CF_ROWCOUNT 变量中，而不是在 ref-cursor 语句中将其作为 INTO 执行。

例如：

```
OPEN V_CF_CURSOR FOR SELECT COUNT(*) FROM "VPA"."Employee"; -- returns 1 row
FETCH V_CF_CURSOR INTO CF_ROWCOUNT; 
```

# c# - 如何在不知道名称的情况下进入文件夹？

> ID：15107789
> 
> 赞同：0
> 
> 时间：2013-02-27T08:54:56.523
> 
> 标签：c#, text-files

我需要阅读一个我知道其完整路径的文本文件，但一个文件夹的名称除外。我会用

```
string readText = File.ReadAllText(path + "\\" + unknownFolderName + "\\" + itemName); 
```

但首先，我需要找出*unknownFolderName*以到达文件的完整路径。*path*下只有一个文件夹，我只需要在这个文件夹下输入，不知道它的名字。我怎样才能以最简单的方式实现这一目标？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-27T09:00:13.930

您可以尝试使用[Directory.GetDirectories()](http://msdn.microsoft.com/en-us/library/6ff71z1w.aspx)。如果您保证该文件夹下只有一个文件夹，那么您应该可以通过以下方式进行操作：

```
string unknownPath = Directory.GetDirectories(path)[0];
//Now instead of this: [ string readText = File.ReadAllText(path + "\\" + unknownFolderName + "\\" + itemName) ], do this:
string readText = File.ReadAllText(unknownPath + "\\" + itemName); 
```

那应该这样做。让我知道它是否适合你！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T09:00:11.247

您可以使用返回字符串数组的`Directory.GetDirectories`静态方法（[文档](http://msdn.microsoft.com/en-us/library/c1sez4sc.aspx)） - 您传递给该方法的路径中的目录的完整路径。所以尝试这样的事情（如果你确定至少有一个目录并且你想使用第一个）：

```
string readText = File.ReadAllText(Directory.GetDirectories(path)[0] + "\\" + itemName); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-27T09:00:20.367

**如果您有多个文件夹，并且您不知道哪个是**：

看看下面的例子。您正在`Windows`以下路径中寻找：`C:\_____\System32\notepad.exe`

```
string path = @"C:\";
var itemName = @"System32\notepad.exe";

var directories = Directory.GetDirectories(path);

foreach (var dir in directories) {
    string fullPath = Path.Combine(dir, itemName);

    //If you found the correct directory!
    if (File.Exists(fullPath)) {
        Console.WriteLine(fullPath);
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-27T09:01:31.197

使用它来获取目录下的文件夹名称：

[http://www.developerfusion.com/code/4359/listing-files-folders-in-a-directory/](http://www.developerfusion.com/code/4359/listing-files-folders-in-a-directory/)

# ios - Best approach for storing single BOOL global data value

> ID：15107790
> 
> 赞同：2
> 
> 时间：2013-02-27T08:55:02.823
> 
> 标签：ios, objective-c

I need some advice about best practice of developing iOS app design

Here's what I'm dealing with: when iOS device looses internet connection (or doesn't have one and figuring that out) I want my app to go to some sort of offline mode, i.e. firing some event, sending some NSNotifications, m.b. showing some sort of alert etc. Accordingly, when iOS device gets it's connection back I want the oposite thing - move my app to some sort of online mode.

So, what I want is to have ability to access app's mode (i.e. to check whether app is online or offline) from within some of my ViewControllers. I'm thinking of two methods of storing app's state:

1) Have some AppDelegate's property and access it from anywhere via my AppDelegate. AFAIK, that's a wrong approach, because AppDelegate is not supposed to be used as global object for application, but for doing launch initialization and controlling application's state changes.

2) Store this information on Model level. But I have no idea what am I supposed to use on Model level for such purpose. I don't think using Core Data or NSUserDefaults is a good idea, because I don't want this property to be persistent, I need it only during current application running. And apart from Core Data and NSUserDefaults I don't actually know any other Model level techniques.

I don't include any code examples, because it's mostly a theoretical question.

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-27T09:00:08.280

您可以使用单例模式并将变量存储为属性

例如

```
@interface GlobalData : NSObject

@property BOOL connectionAvailable;

+ (GlobalData *)sharedInstance;

@end

@implementation

+ (GlobalData *)sharedInstance {
    static GlobalData *sharedInstance;
    static dispatch_once_t onceToken;
    dispatch_once(&onceToken, ^{
        sharedInstance = [[GlobalData alloc] init];
    });
    return sharedInstance;
}

@end

// --- in some method
[GlobalData sharedInstance].connectionAvailable = /* connection state */;

// --- in some other method
BOOL connectionAvailable = [GlobalData sharedInstance].connectionAvailable; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T08:59:55.380

第二种方法效果最好。您肯定不需要任何持久性来指示 Internet 连接的属性。一件好事是让你的模型成为一个单例类，它`BOOL`为互联网连接公开一个只读属性，你的视图控制器可以通过键值观察订阅它的变化。您的模型还可以在内部实现`Reachability`用于更新 Internet 连接状态的类。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-27T09:07:26.210

我假设您使用的是 Apple 的 Reachability 类。[http://developer.apple.com/library/ios/#samplecode/Reachability/Introduction/Intro.html](http://developer.apple.com/library/ios/#samplecode/Reachability/Introduction/Intro.html)

我在 Reachability 类上创建了一个类别来添加一个 sharedInstance 单例，它允许您检查 Internet 连接的状态。我在所有应用程序中都使用它。

这是你如何做单例：

[如何实现与 ARC 兼容的 Objective-C 单例？](https://stackoverflow.com/questions/7568935/how-do-i-implement-an-objective-c-singleton-that-is-compatible-with-arc)

# phpmyadmin - 如何在html表单字段中一一显示mysql数据

> ID：15107791
> 
> 赞同：-3
> 
> 时间：2013-02-27T08:55:08.953
> 
> 标签：phpmyadmin

我是 Php 的新手，我想在 HTML 表单上一个一个地显示 mysql 数据，我的意思是当我单击 Next 按钮时，下一条记录以 html 表单显示。请在这个问题上帮助我。

希扎尔哈亚特

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T09:00:48.553

我不喜欢php，但在我看来找到了一个很好的例子。

```
<?php 
    include 'configMembers.php'; 
    include 'opendb.php'; 

    $sql="SELECT * FROM $tbl_name"; 
    $result=mysql_query($sql); 
    $row=mysql_fetch_array($result); 
    ?> 
    <form method=post> 
    <?php 
    $id=$row['id']; 
    $sql="UPDATE $tbl_name SET password='$password' where id='$id'"; 
    $result=mysql_query($sql); 
    ?> 
```

然后是魔术：

```
<input type="text" name="username" value="<? echo $row['username'] ?>
<input type="text" name="password" value="<? echo $row['password'] ?> 
```

# jquery - 如何将来自 2 个 json 馈送的数据推送（）到单个数组中

> ID：15107792
> 
> 赞同：0
> 
> 时间：2013-02-27T08:55:16.493
> 
> 标签：jquery, ajax, json

根据标题，我有 2 个我正在尝试使用的 json 提要。第一个详细信息是哪个出发机场飞往哪个目的地机场，第二个我想用来查找飞往的机场的友好名称。我有一组信息页面。我想从这两个提要中动态输出每个页面上飞往的目的地列表。我不清楚如何将这些 push() 放入数组和排序等。非常感谢任何帮助。

**第一次喂食**

```
$.ajax({
  url: '/routesRouteInformation.action',
  async: false,
  dataType: 'json',
  success: function (response) {
  jsonRoutes = response;
  }
}); 
```

示例文件：

```
{
"LGW":[
 {"arvAirportCode":"EDI","multiSector":"M","endDate":"26-Oct-2013 00:00:00"},
 {"arvAirportCode":"NCL","multiSector":"D","endDate":"26-Oct-2013 00:00:00"},
 {"arvAirportCode":"SYY","multiSector":"M","endDate":"26-Oct-2013 00:00:00"},
 ...Etc 
```

**二次进料**

```
$.ajax({
  url: '/airportsRouteInformation.action',
  async: false,
  dataType: 'json',
  success: function (response) {
  jsonInfo = response;
  }
}); 
```

示例文件：

```
[{"airportCode":"LGW","airportCountry":"UK","airportName":"London Gatwick", "longitude":"53.910297","latitude":"-8.818492"},
"airportCode":"BLL","airportCountry":"DK","airportName":"Billund","longitude":"55.740322","latitude":"9.151778"},
{"airportCode":"RNN","airportCountry":"DK","airportName":"Bornholm"},    {"airportCode":"BCN","airportCountry":"ES","airportName":"Barcelona","longitude":"41.2969","latitude":"2.07833"}
...Etc 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T08:57:17.110

尝试

```
$.extend(object1, object2); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T09:07:37.673

鉴于您的数据，我将首先检索机场信息，然后在路线中查找每个机场信息并将它们添加到其中。一些东西：

```
$.each(infos, function(index, info){
info.routes = routes[info.airportCode];
}); 
```

# c# - 循环浏览后台工作人员中选定的列表视图项目

> ID：15107797
> 
> 赞同：0
> 
> 时间：2013-02-27T08:55:28.707
> 
> 标签：c#, listview

我很难在后台工作人员的列表视图中循环遍历所有**选定**的项目。我做了一些研究，发现了这一点；[无法在 ListView 跨线程中获取项目](https://stackoverflow.com/questions/8022825/cant-get-items-in-a-listview-cross-thread)但它似乎不起作用，因为我只想发送到**选定的项目**，有人可以举例说明我应该做什么吗？这一切都是非常新的和令人困惑的。

我累了的视觉例子； ![在此处输入图像描述](../Images/f2117f771d3097e85ad264ad8b3b189d.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T09:03:57.913

您的函数`getListViewItems`需要`ListView`作为参数。您正在尝试使用[ListViewItemCollection](http://msdn.microsoft.com/en-us/library/system.windows.forms.listview.listviewitemcollection.aspx)调用它，这就是它失败的原因。

只需将其修改为

```
foreach(ListViewItem item in getListViewItems(listView2)) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T09:04:40.790

定义这样的函数：

```
public static List<ListViewItem> GetSelectedListViewItems(ListView lv)
{
    if (!lv.InvokeRequired)
        return lv.SelectedItems.Cast<ListViewItem>().ToList();
    else
        return (List<ListViewItem>)lv.Invoke(
            new Func<ListView, List<ListViewItem>>(GetSelectedListViewItems),
            lv);
} 
```

用法：

```
private void SendMSG_DoWork(object sender, DoWorkEventArgs e)
{
    foreach (var item in GetListViewSelectedItems(listView2))
    {
        // ...
    }
} 
```

# android - 带有长 xml 的 XML 序列化

> ID：15107803
> 
> 赞同：0
> 
> 时间：2013-02-27T08:55:58.293
> 
> 标签：android, xml, serialization

我正在做一个测试游戏和不同的问题。用户可以从菜单中选择一个主题，每个菜单中有 20-30 个问题。我想要做的是将我的代码序列化为 XML，以便在用户单击完成按钮时编写 XML 文件。（考虑到他可以进行 1 、 2 或 10 测试）。我一直在用一个简单的 XML 对此进行测试，但我不知道这是否是最好的解决方案。

这是导出文件的格式：

```
<?xml version="1.0"?>
<RESPUESTAS ID_CONVOCATORIA="21044826">
 <INCIDENCIA />
<NUM_PDA>PDA600035&#x0;</NUM_PDA>
<TEST Nom_Test="A_VER_SUP_01">
<NUM_TEST>1</NUM_TEST>
<NUMERO_ITEMS>19</NUMERO_ITEMS>
<CARACTERISTICAS VARIAS_RESPUESTAS="NO" HIPSATIVO="NO" />
<TIEMPO_TEST TIEMPO_TEST="SI">
  <VALOR_TIEMPO_TEST>900</VALOR_TIEMPO_TEST>
  <VALOR_TIEMPO_TRANSCURRIDO>900</VALOR_TIEMPO_TRANSCURRIDO>
</TIEMPO_TEST>
<TIEMPO_ITEM TIEMPO_ITEM="NO" />
<ITEM NUM_ITEM="1">
  <RESPUESTA>D</RESPUESTA>
  <VALOR_TIEMPO_TRANSCURRIDO />
</ITEM>
<ITEM NUM_ITEM="2">
  <RESPUESTA>D</RESPUESTA>
  <VALOR_TIEMPO_TRANSCURRIDO />
</ITEM>
<ITEM NUM_ITEM="3">
  <RESPUESTA>B</RESPUESTA>
  <VALOR_TIEMPO_TRANSCURRIDO />
</ITEM>
<ITEM NUM_ITEM="4">
  <RESPUESTA>D</RESPUESTA>
  <VALOR_TIEMPO_TRANSCURRIDO />
</ITEM>
<ITEM NUM_ITEM="5">
  <RESPUESTA>D</RESPUESTA>
  <VALOR_TIEMPO_TRANSCURRIDO />
</ITEM>
<ITEM NUM_ITEM="6">
  <RESPUESTA>B</RESPUESTA>
  <VALOR_TIEMPO_TRANSCURRIDO />
</ITEM>
<ITEM NUM_ITEM="7">
  <RESPUESTA>B</RESPUESTA>
  <VALOR_TIEMPO_TRANSCURRIDO />
</ITEM>
<ITEM NUM_ITEM="8">
  <RESPUESTA>A</RESPUESTA>
  <VALOR_TIEMPO_TRANSCURRIDO />
</ITEM>
<ITEM NUM_ITEM="9">
  <RESPUESTA>D</RESPUESTA>
  <VALOR_TIEMPO_TRANSCURRIDO />
</ITEM>
<ITEM NUM_ITEM="10">
  <RESPUESTA>D</RESPUESTA>
  <VALOR_TIEMPO_TRANSCURRIDO />
</ITEM>
<ITEM NUM_ITEM="11">
  <RESPUESTA>B</RESPUESTA>
  <VALOR_TIEMPO_TRANSCURRIDO />
</ITEM>
<ITEM NUM_ITEM="12">
  <RESPUESTA>D</RESPUESTA>
  <VALOR_TIEMPO_TRANSCURRIDO />
</ITEM>
<ITEM NUM_ITEM="13">
  <RESPUESTA>C</RESPUESTA>
  <VALOR_TIEMPO_TRANSCURRIDO />
</ITEM>
<ITEM NUM_ITEM="14">
  <RESPUESTA>D</RESPUESTA>
  <VALOR_TIEMPO_TRANSCURRIDO />
</ITEM>
<ITEM NUM_ITEM="15">
  <RESPUESTA>A</RESPUESTA>
  <VALOR_TIEMPO_TRANSCURRIDO />
</ITEM>
<ITEM NUM_ITEM="16">
  <RESPUESTA>C</RESPUESTA>
  <VALOR_TIEMPO_TRANSCURRIDO />
</ITEM>
<ITEM NUM_ITEM="17">
  <RESPUESTA>C</RESPUESTA>
  <VALOR_TIEMPO_TRANSCURRIDO />
</ITEM>
<ITEM NUM_ITEM="18">
  <RESPUESTA>A</RESPUESTA>
  <VALOR_TIEMPO_TRANSCURRIDO />
</ITEM>
<ITEM NUM_ITEM="19">
  <RESPUESTA>
  </RESPUESTA>
  <VALOR_TIEMPO_TRANSCURRIDO />
 </ITEM>
 </TEST>
 <TEST Nom_Test="A_NUM_SUP_01">
<NUM_TEST>2</NUM_TEST>
<NUMERO_ITEMS>15</NUMERO_ITEMS>
<CARACTERISTICAS VARIAS_RESPUESTAS="NO" HIPSATIVO="NO" />
<TIEMPO_TEST TIEMPO_TEST="SI">
  <VALOR_TIEMPO_TEST>1020</VALOR_TIEMPO_TEST>
  <VALOR_TIEMPO_TRANSCURRIDO>1020</VALOR_TIEMPO_TRANSCURRIDO>
</TIEMPO_TEST>
<TIEMPO_ITEM TIEMPO_ITEM="NO" />
<ITEM NUM_ITEM="1">
  <RESPUESTA>B</RESPUESTA>
  <VALOR_TIEMPO_TRANSCURRIDO />
</ITEM>
<ITEM NUM_ITEM="2">
  <RESPUESTA>B</RESPUESTA>
  <VALOR_TIEMPO_TRANSCURRIDO />
</ITEM>
<ITEM NUM_ITEM="3">
  <RESPUESTA>C</RESPUESTA>
  <VALOR_TIEMPO_TRANSCURRIDO />
</ITEM>
<ITEM NUM_ITEM="4">
  <RESPUESTA>A</RESPUESTA>
  <VALOR_TIEMPO_TRANSCURRIDO />
</ITEM>
<ITEM NUM_ITEM="5">
  <RESPUESTA>A</RESPUESTA>
  <VALOR_TIEMPO_TRANSCURRIDO />
</ITEM>
<ITEM NUM_ITEM="6">
  <RESPUESTA>A</RESPUESTA>
  <VALOR_TIEMPO_TRANSCURRIDO />
</ITEM>
<ITEM NUM_ITEM="7">
  <RESPUESTA />
  <VALOR_TIEMPO_TRANSCURRIDO />
</ITEM>
<ITEM NUM_ITEM="8">
  <RESPUESTA>C</RESPUESTA>
  <VALOR_TIEMPO_TRANSCURRIDO />
</ITEM>
<ITEM NUM_ITEM="9">
  <RESPUESTA>B</RESPUESTA>
  <VALOR_TIEMPO_TRANSCURRIDO />
</ITEM>
<ITEM NUM_ITEM="10">
  <RESPUESTA>C</RESPUESTA>
  <VALOR_TIEMPO_TRANSCURRIDO />
</ITEM>
<ITEM NUM_ITEM="11">
  <RESPUESTA>D</RESPUESTA>
  <VALOR_TIEMPO_TRANSCURRIDO />
</ITEM>
<ITEM NUM_ITEM="12">
  <RESPUESTA>A</RESPUESTA>
  <VALOR_TIEMPO_TRANSCURRIDO />
</ITEM>
<ITEM NUM_ITEM="13">
  <RESPUESTA>D</RESPUESTA>
  <VALOR_TIEMPO_TRANSCURRIDO />
</ITEM>
<ITEM NUM_ITEM="14">
  <RESPUESTA>A</RESPUESTA>
  <VALOR_TIEMPO_TRANSCURRIDO />
</ITEM>
<ITEM NUM_ITEM="15">
  <RESPUESTA>
  </RESPUESTA>
  <VALOR_TIEMPO_TRANSCURRIDO />
</ITEM> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T09:15:22.510

`XmlSerializer`似乎是你需要的。

这就是我的解决方案的样子。我写了这个助手类：

```
public class XmlHelper {
    private static String NS_EMPTY = "";

    private XmlSerializer mSerializer;
    private StringWriter mWriter;
    private String mRootTag;

    public void start(String rootTag) throws IOException {
        mSerializer = Xml.newSerializer();
        mWriter = new StringWriter();
        mRootTag = rootTag;

        mSerializer.setOutput(mWriter);
        mSerializer.startDocument("UTF-8", true);
        mSerializer.startTag(NS_EMPTY, mRootTag);
    }

    public void addText(String tag, String text) throws IOException {
        mSerializer.startTag(NS_EMPTY, tag);
        mSerializer.text(text);
        mSerializer.endTag(NS_EMPTY, tag);
    }

    public void addTextIfNotEmpty(String tag, String text) throws IOException {
        if (!TextUtils.isEmpty(text)) {
            addText(tag, text);
        }
    }

    public void addText(String tag, int number) throws IOException {
        addText(tag, String.valueOf(number));
    }

    public void startTag(String tag) throws IOException {
        mSerializer.startTag(NS_EMPTY, tag);
    }

    public void endTag(String tag) throws IOException {
        mSerializer.endTag(NS_EMPTY, tag);
    }

    public void finish() throws IOException {
        mSerializer.endTag(NS_EMPTY, mRootTag);
        mSerializer.endDocument();
    }

    public String render() {
        return mWriter.toString();
    }
} 
```

然后序列化看起来像这样：

```
XmlHelper xmlHelper = new XmlHelper();

xmlHelper.start("request");
xmlHelper.addText("action", "add");
xmlHelper.startTag("person");
xmlHelper.addText("first_name", t.getFirstName());
xmlHelper.addText("last_name", t.getLastName());
xmlHelper.endTag("person");

xmlHelper.finish(); 
```

（这只是一个例子，你应该使用自己的方案）

并且您应该完成 XmlHelper 类以添加属性支持（请参阅`XmlSerializer`文档）

# grails - 确定数据类型

> ID：15107806
> 
> 赞同：0
> 
> 时间：2013-02-27T08:56:00.793
> 
> 标签：grails, groovy

我的控制器中有这段代码：

```
def cols = grailsApplication.getDomainClass('com.archie.Build').persistentProperties.collect {it.name} 
```

上面的代码将允许我列出我在 Build 类中拥有的所有属性名称。现在，我还想包括属性数据类型，即。布尔值，字符串等...

有点像输出是：

```
[floorType:String, floorWidth:Float, ......] 
```

也许不完全一样，或者可能相似，但只要我可以返回他们的数据类型。有人可以帮忙吗？谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T09:28:21.347

中的每个条目`persistentProperties`都是一个[GrailsDomainClassProperty](http://grails.org/doc/latest/api/org/codehaus/groovy/grails/commons/GrailsDomainClassProperty.html)，这提供了对作为`Class`对象的属性类型的访问：

```
def props = [:]
grailsApplication.getDomainClass('com.archie.Build'
    ).persistentProperties.each {
      props[it.name] = it.type.name
    } 
```

或者只是将`persistentProperties`数组本身传递给 GSP，然后提取`.name`并`.type`在那里。

您可能还希望考虑使用`constrainedProperties`代替/除了`persistentProperties`. 该`constrainedProperties`映射仅列出域类约束块中提到的那些属性，但此映射上的迭代器保证按照它们在约束中列出的顺序返回属性。这就是默认脚手架的操作方式，因为我不知道有什么方法可以控制`persistentProperties`数组的顺序。

# c# - 带有数据源的嵌套控件

> ID：15107816
> 
> 赞同：0
> 
> 时间：2013-02-27T08:56:33.387
> 
> 标签：c#, asp.net, events

下面的 aspx 代码中的这个 ListView 嵌套在另一个 ListView 中。下面的代码用于包装嵌套的 ListView。我希望在每次迭代时，包装器 ListView 都在嵌套 ListView 的数据源中传递属性“Comments”。我尝试使用事件“ItemDataBound”的代码隐藏来执行此操作（此事件用于包装器 ListView）但是，当我运行代码时，我得到了这个异常：**DataBinding：'System.Collections.Generic.HashSet`1[ [BlogProfile.Data.Comment, BlogProfile.Data, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]' 不包含名为“Author”的属性。**我想要的只是每次包装器 ListView 将不同的数据源传递给嵌套的 ListView，而这个嵌套的 ListView 用“Eval(...)”来获取这个数据源，就像我在 aspx 代码中写的那样。我在这里想念什么。我认为问题可能是我在这里没有使用正确的事件？

asp代码：

```
 <asp:ListView ID="CommentListView" runat="server" >
             <ItemTemplate>
                 <div class="postComments">
                     <span class="authorComment"><%# Eval("Author") %></span>
                       :
                      <span class="commentContent"><%# Eval("Message") %></span>
                 </div>
              </ItemTemplate>
       </asp:ListView> 
```

后面的代码：

```
 protected void PostsListView_ItemDataBound(object sender, ListViewItemEventArgs e)
    {
        BlogProfileEntities blogProfile = new BlogProfileEntities();
        var listview = e.Item.FindControl("CommentListView") as ListView;
        var hiddenfield = e.Item.FindControl("CurrentPostIDHiddenField") as HiddenField;
        int id = int.Parse(hiddenfield.Value);
        listview.DataSource = (from p in blogProfile.Posts
                               where p.PostID == id
                               select p.Comments).ToList();
        listview.DataBind();
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T09:05:05.953

此问题基于您的实体框架。它发生在将 ADO.NET 实体固件组件添加到您的系统中时。请再次阅读该组件。还要检查在您的实体 FW 中添加的表列名称

# c# - 卸载 ClickOnce 应用程序时如何删除所有数据？

> ID：15107817
> 
> 赞同：0
> 
> 时间：2013-02-27T08:56:36.667
> 
> 标签：c#, clickonce

我在 C# 中有一个 ClickOnce 应用程序，我想在自动卸载期间卸载所有文件。

以前我使用以下内容返回我的应用程序数据路径：

```
static public string APPLICATION_DATA_PATH
{
        get
        {
            return Path.Combine(Environment.GetFolderPath(Environment.SpecialFolder.LocalApplicationData).ToString(), "myFolder\\");
        }
} 
```

这将返回`c://Users/UserName/AppData/MyFolder`可行的方法，但是通过自动卸载 ClickOnce 应用程序，不会删除此文件夹。

现在，我测试：

```
static public string APPLICATION_DATA_PATH
{
    get
    {
        if (System.Deployment.Application.ApplicationDeployment.IsNetworkDeployed)
        {
            // If Clickonce Application is deployed.
            return System.Deployment.Application.ApplicationDeployment.CurrentDeployment.DataDirectory
        } 
        else
        {
            // If I'm in debug mode (with visual studio)
            return Path.Combine(Environment.GetFolderPath(Environment.SpecialFolder.LocalApplicationData).ToString(), "myFolder\\");
        }
    }
} 
```

这适用于 Visual Studio 调试，但是当我发布我的应用程序并在任何计算机上安装时，我的应用程序崩溃并且 Windows 报告 (WER) 只显示“应用程序崩溃”。

如果我的 APPLICATION_DATA_PATH 正确，我不知道为什么我的这不起作用......

您对使用`System.Deployment.Application.ApplicationDeployment.CurrentDeployment.DataDirectory`路径调试 ClickOnce 应用程序有任何想法吗？还是使用 ClickOnce 卸载程序删除所有文件的想法？

**编辑**

我来调试我的 ClickOnce 应用程序（感谢@JRoughan 的帮助），现在，我看到我的“APPLICATION_PATH”返回 null，我已经更改了我的代码：

```
static public string APPLICATION_DATA_PATH
    {
        get
        {
            string path = null;                
            if (System.Deployment.Application.ApplicationDeployment.IsNetworkDeployed)
            {
                path = System.Deployment.Application.ApplicationDeployment.CurrentDeployment.DataDirectory;
            }

            return path;
        }
    } 
```

如果返回 null，则代码不批准“System.Deployment.Application.ApplicationDeployment.IsNetworkDeployed”，但为什么呢？我已经安装了一个新的 clickonce 应用程序......并且该应用程序已部署，代码应返回“CurrentDeployment.DataDirectory”！不 ？

**最终编辑**

最后，路径正常工作。在我的应用程序启动时，我在这里重新启动，如果应用程序没有管理员规则，但是，当 Clickonce 应用程序有管理员规则时，路径不起作用......感谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T09:11:07.293

如果您的问题是如何调试已安装的 ClickOnce 应用程序，以便您可以准确了解正在发生的事情，您应该能够使用 VS 菜单“调试 -> 附加到进程”将调试器附加到进程。确保首先加载正确的解决方案。

如果您只是问为什么没有正确清理数据目录，我不确定；此文件夹应遵循 ClickOnce 安装的生命周期，并在卸载期间进行清理。

您是否有可能从该文件夹加载资源而不释放它们，因此它们在卸载时被锁定且不可删除？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T06:46:54.153

当您卸载应用程序时，ClickOnce 部署中没有执行任何类型任务的机制。理论上，ClickOnce 清道夫最终会出现并处理文件，但我发现这不可靠。基本上，除了安装和运行程序来清除有问题的 \apps\2.0\data\whatever 文件夹之外，您无能为力。

# gmail - 通过 Google Apps API 创建电子邮件

> ID：15107821
> 
> 赞同：4
> 
> 时间：2013-02-27T08:56:48.353
> 
> 标签：gmail, google-api, google-apps

我想从我的代码中动态创建电子邮件地址（并在一段时间后处理它们）。我在整个网络上进行了搜索，但没有找到任何允许人们创建新电子邮件帐户的 API 端点。

我正在使用 Google Apps for Businesss，因此他们的文档制作得非常好，并被 Google 索引，但仍然没有。有没有人这样做，或者有一个文档页面的链接？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-27T13:00:57.650

可以在此处找到创建和删除用户帐户：

[https://developers.google.com/google-apps/provisioning/](https://developers.google.com/google-apps/provisioning/)

# php - PHP检测url是否重定向并重试重定向

> ID：15107823
> 
> 赞同：1
> 
> 时间：2013-02-27T08:56:49.027
> 
> 标签：php, curl, http-headers, http-redirect

在我的服务器上完成处理后，我想将用户重定向到远程服务器。有时，由于用户端的网络连接超时，重定向没有发生，导致他/她的页面没有得到更新状态。

我目前使用的是

```
header('Location: http://anotherwebsite.com'); 
```

如果失败，它将不会再试一次......我该如何实现“将再试一次”的东西

```
$retry_limit = 0;
while(//http status code not 301 or 302 && $retry_limit < 3)
{
    header('Location: http://anotherwebsite.com');

    $retry_limit++;
} 
```

如果我使用 cURL，我会感到困惑，如果我还实现了标头，它会双重重定向......或者我可能误解了它？

非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T09:34:01.167

正如已经指出的那样，`header()`只会触发 HTTP 标头并忘记，因此使用 PHP 您将无法轻松实现重试机制。

但是，您要解决的根本问题是什么？如果您要重定向到的合作伙伴网站**过载，以至于有时只会在第二次或第三次尝试时做出反应**：严重的是，您应该使该服务器更可靠地工作。

另一方面，如果您只是在寻找一种方法来发现其他服务器**可能的停机时间**并相应地通知您的用户，您可以在代码中添加快速的服务器到服务器检查。如果其他服务器出现故障，您可以重定向到不同的页面并道歉或提供重试链接。

查看[此答案](https://stackoverflow.com/a/9843251/376138)以了解如何 ping 服务器以了解它是否已启动。

粗略的解决方案可能如下所示：

```
<?php
$url = 'http://anotherwebsite.com';

if(pingDomain($url) != -1) {
    header('Location: ' . $url);
} else {
    header('Location: sorry_retry_later.html');
}

// Ping function, see
// https://tournasdimitrios1.wordpress.com/2010/10/15/check-your-server-status-a-basic-ping-with-php/
function pingDomain($domain){
    $starttime = microtime(true);
    $file      = fsockopen ($domain, 80, $errno, $errstr, 10);
    $stoptime  = microtime(true);
    $status    = 0;

    if (!$file) $status = -1;  // Site is down
    else {
        fclose($file);
        $status = ($stoptime - $starttime) * 1000;
        $status = floor($status);
    }
    return $status;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T09:02:04.863

`header`只能用于一次性重定向。由于没有返回值，所以不能这样检查。您应该首先尝试使用**JSON**来检查站点是否有响应，如果是，则重定向用户，否则编写错误消息或其他内容。

[JSON 参考](http://api.jquery.com/jQuery.getJSON/)

我没有亲自使用过，但看到其他人用这种方法成功地做到了。

# mysql - mysql空记录获取

> ID：15107829
> 
> 赞同：2
> 
> 时间：2013-02-27T08:57:13.300
> 
> 标签：mysql, null

这是我的mysql表：

![在此处输入图像描述](../Images/abc36ac1287d5e7f2a705d7f99068eac.png)

这是数据：

![在此处输入图像描述](../Images/b694da8444641b75385d415b02d78ab0.png)

我的查询：

```
SELECT * 
FROM  `tb1s` 
WHERE name !=  'Test' 
```

返回 id 为 1,6,8,10 的记录，而不是 name 字段中值为 NULL 的记录（id 为 9 的记录）。

我如何在上述查询中也获得此记录（即 NULL 值记录）。

我知道我们可以用另一种情况来做到这一点，比如：

```
WHERE name !=  'Test' || name IS NULL 
```

但是有没有一种方法可以避免`|| name IS NULL`在这种类型的查询中每次都指定这个附加条件（）？

MySQL中的一些设置还是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T09:00:02.897

没有别的办法，你必须指定条件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T09:29:36.260

我建议用`LIKE`. 检查此代码：

```
SELECT * 
FROM  tb1s 
WHERE NOT EXISTS (
     SELECT * from tbl1
     WHERE name LIKE  '%Test%' ) 
```

它应该工作。

# unix - 在 Unix 中查找没有文件但有子文件夹的目录

> ID：15107830
> 
> 赞同：2
> 
> 时间：2013-02-27T08:57:15.483
> 
> 标签：unix, ksh, aix

我使用 AIX 5.3 (ksh)，我正在寻找一种方法来查找包含子文件夹但其中**没有**任何文件的所有文件夹。

我找到了搜索空目录的解决方案（[在 Unix/Linux 中查找没有文件的目录](https://stackoverflow.com/questions/2909669/find-directories-with-no-files-in-unix-linux)），但如果还需要子文件夹，这将不起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T09:50:10.237

您可以使用以下脚本：

```
find . -type d | while read d; do
   nf=$(ls -lA $d | grep -c "^-")
   nd=$(ls -lA $d | grep -c "^d")
   [[ $nf -eq 0 && $nd -gt 0 ]] && echo $d
done 
```

# functional-programming - 在 Lua 中调用作为参数传递的函数

> ID：15107837
> 
> 赞同：2
> 
> 时间：2013-02-27T03:05:55.007
> 
> 标签：functional-programming, lua

我有这个代码

```
Option = { }

function Option.nothing( )
  local self = { isNone = true, isSome = false }

  function self:orElse( alt )
    return alt
  end

  function self:map( f )
    return Option.nothing( )
  end

  function self:exec( f )
  end

  function self:maybe( alt, f )
    return alt
  end

  return self
end

function Option.just( val )
  local self = { isNone = false, isSome = true }
  local value = val

  function self:orElse( alt )
    return value
  end

  function self:map( f )
    return Option.just( f(value) )
  end

  function self:exec( f )
    f( value )
  end

  function self:maybe( alt, f )
    return f(value)
  end

  return self
end

function printOpt( opt )
  local str = opt.maybe( "Nothing", function(s) return "Just " .. s end )
  print( str )
end

x = Option.nothing( )
y = Option.just( 4 )

printOpt(x)
printOpt(y) 
```

但是我在这里不断得到“尝试调用本地'f'（一个零值）”：

```
 function self:maybe( alt, f )
    return f(value)
  end 
```

看来我在调用作为参数传递的函数时遇到了麻烦。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-27T09:02:09.080

您将函数声明为`self:maybe()`，但您将其称为`opt.maybe()`. 您应该将其称为`opt:maybe()`.

将其声明为`self:maybe(alt, f)`等同于将其声明为`self.maybe(self, alt, f)`. 所以如果你用 a 调用它，`.`你需要 3 个参数。你传递了 2，所以`self`最终为`"Nothing"`, 并`alt`最终作为函数对象。

但是，将其称为`opt:maybe("Nothing", f)`this 等同于说`opt.maybe(opt, "Nothing", f)`which 提供了所需的 3 个参数。

# java - Java将String转换为fileObject

> ID：15107843
> 
> 赞同：1
> 
> 时间：2013-02-27T08:58:20.517
> 
> 标签：java, swing, jfilechooser

我知道当文件在本地时如何转换它。但是当文件在远程服务器上时如何转换这里我说的是

> org.apache.commons.vfs.FileObject

这就是在本地服务器上完成的方式-

```
public static FileObject changeStringToFileObject(String path) {
        FileObject file = null;
        LocalFileProvider provider = new DefaultLocalFileProvider();
        try {
            file = provider.findLocalFile(new File(path));
        } catch (FileSystemException ex) {
            logger.log(Level.SEVERE, null, ex);
        }
        return file;
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T09:09:44.937

那么你必须先使用一个 FTP java 库来获取文件（即在本地下载它），然后才能在你的 Swing 应用程序中使用它。

检查[Apache Commons Net 库](http://commons.apache.org/proper/commons-net//)

检查此链接以获取示例：[Java + Apache Commons Net：读取 FTPFile](http://commons.apache.org/proper/commons-net//examples/ftp/FTPClientExample.java)

# linux - 如何在linux中限制core dump的写入速度，这会导致负载非常高。

> ID：15107844
> 
> 赞同：1
> 
> 时间：2013-02-27T08:58:24.150
> 
> 标签：linux, core

当进程崩溃然后核心转储时，我们遇到了一个问题。由于进程占用内存大——20GB左右，核心转储需要将20GB核心数据写入磁盘，磁盘使用率变得非常高，负载急剧增加。

如何限制核心转储的写入速度？一个进程崩溃使服务器挂起，这太糟糕了。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-27T09:49:26.170

我相信没有简单的方法。

但是，在 Linux 上，您可以使用该`/proc/sys/kernel/core_pattern`文件（参见[core(5)](http://www.kernel.org/doc/man-pages/online/pages/man5/core.5.html)和[proc(5)](http://www.kernel.org/doc/man-pages/online/pages/man5/proc.5.html)手册页），甚至可以 - 当它`core_pattern`以管道符号开头时`|`- 将核心写入程序（或脚本），然后可能会减慢写作速度。

或者，您可以拥有一些用户空间文件系统（例如通过[FUSE](http://fuse.sourceforge.net/)）。

并且该`core`文件可能是指向其他地方的符号链接（例如，会减慢写入速度的 FUSE 文件系统，或者只是某个 SSD 磁盘上的快速文件系统）。

当然，您也可以避免转储内核（通过[setrlimit(2)](http://www.kernel.org/doc/man-pages/online/pages/man2/setrlimit.2.html)或 shell 的`ulimit`内置函数，或通过`gdb --args`...启动程序）

而且我想如果你[ionice(1)](http://linux.die.net/man/1/ionice)适当的命令，所有磁盘 I/O 都可以合理地减慢。

^(PS。我从未测试过这些想法中的任何一个，所以我可能是错的。)

# ruby-on-rails-3 - 在rails中形成一个html_safe字符串

> ID：15107845
> 
> 赞同：1
> 
> 时间：2013-02-27T08:58:25.353
> 
> 标签：ruby-on-rails-3, html-safe

```
link_to "hi",content_tag(:p,"hello") 
```

让我产生我 `"<a href=\"&lt;p&gt;hello&lt;/p&gt;\">hi</a>"` 不想要转义的输出。如何获取 html_safe 字符串？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-27T09:02:28.927

您颠倒了参数顺序 - 请参阅[http://apidock.com/rails/ActionView/Helpers/UrlHelper/link_to](http://apidock.com/rails/ActionView/Helpers/UrlHelper/link_to)

正确的语法是`link_to content, url`你可能想要做的是：

`link_to content_tag(:p, "hello"), "some_url"`

这不会逃脱。如果您确实需要 content_tag 作为 url，那么您可以在末尾添加“html_safe”方法：

`link_to "hi",content_tag(:p,"hello").html_safe`

# sql-server - Sql server和visual studio正确安装

> ID：15107849
> 
> 赞同：0
> 
> 时间：2013-02-27T08:58:32.903
> 
> 标签：sql-server, visual-studio-2010, ssms

我有 Visual Studio 2010 Ultimate（我输入了有效密钥）并注册了我的产品，我在安装期间默认安装了 Visual Studio 的 sql server。我使用它创建我的表，它确实有效。我还需要安装sql server management studio吗？请帮助并建议我，因为我正在做一个项目

# c++ - OpenGL投影缩放

> ID：15107854
> 
> 赞同：1
> 
> 时间：2013-02-27T08:58:40.837
> 
> 标签：c++, opengl

我有一个代表简单 3D 场景的学习项目。我正在修改模型视图矩阵以将视点移动到某个非原点，`gluLookAt()`然后我将线球放置在原点。最后，我正在修改投影矩阵以接收带有一些参数的正交投影，使用`glOrtho()`. 但是当调整窗口大小时，球体会变形。我想我应该修改`reshape()`和`glOrtho()`函数，但是如何？

```
void display(void){
    glClear(GL_COLOR_BUFFER_BIT);
    glColor3b(197, 96, 63);
    glLoadIdentity();    
    gluLookAt(2, 0.5 ,2, 0, 0, 0, 0, 1, 0);
    glutWireSphere(0.2, 20, 10);  
    glFlush();
}

void reshape(int w, int h){
    glViewport(0, 0, (GLsizei) w, (GLsizei) h);
    glMatrixMode(GL_PROJECTION);
    glLoadIdentity();
    glOrtho(-1, 1, -1, 1, 0.8 , 100);
    glMatrixMode(GL_MODELVIEW);
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-27T09:11:40.510

正如我在评论中所说，您需要设置正交投影以适合您的窗口。假设您的 OpenGL 窗口在调整大小之前以正方形开始，`(-1, 1, -1, 1, ...)`则假设是正方形坐标系。如果您更改它以更好地反映窗口的纵横比，您应该会得到更好的外观。尝试以下操作：

`glOrtho ((float)w/(float)h, (float)-w/(float)h, -1, 1, 0.8, 100);`

这应该保持您设置的坐标系，但尊重纵横比（按宽度）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-27T09:22:16.217

首先，与您的问题完全无关：将您现在拥有的所有内容移入`reshape`以显示。是的，我知道很多教程都是按照您的方式进行的，但是请相信我，如果不以这种方式进行操作，它会使事情变得更加清晰。

* * *

现在关于您的问题：Ortho 在视图空间中设置体积，将其映射到视口坐标。glOrtho 的 (bottom,left) 角映射到 glViewport 的 (x,y) 并且 (top,right) 映射到 glViewport 的 (x,y)+(width,height)。

所以你必须将 glOrtho 参数调整为视口的纵横比。很简单：

```
void display(void)
{
    int const win_width  = glutGet(GLUT_WINDOW_WIDTH);
    int const win_height = glutGet(GLUT_WINDOW_HEIGHT);
    float const win_aspect = (float)win_width / (float)win_height;

    glClear(GL_COLOR_BUFFER_BIT);
    glViewport(0, 0, win_width, win_height);

    glMatrixMode(GL_PROJECTION);
    glLoadIdentity();
    glOrtho(-win_aspect, win_aspect, -1, 1, 0.8 , 100);

    glMatrixMode(GL_MODELVIEW);
    glLoadIdentity();    
    gluLookAt(2, 0.5 ,2, 0, 0, 0, 0, 1, 0);

    glColor3b(197, 96, 63);
    glutWireSphere(0.2, 20, 10);  
    glFlush();
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-27T09:10:24.813

目前，您将窗口投影到具有 的二次输出`glOrtho(-1, 1, -1, 1, 0.8 , 100);`，因为宽度和高度相等。您应该将前四个参数更改为窗口的当前纵横比，以防止失真。像

```
glOrtho(-w/2f, w/2f, -h/2f, h/2f, 0.8 , 100); 
```

（在我的示例中，您必须使球体更大，因为投影平面会比您的更大。）

# svn - 詹金斯：SVN工作副本的无效版本

> ID：15107857
> 
> 赞同：30
> 
> 时间：2013-02-27T08:58:53.130
> 
> 标签：svn, jenkins

我们的构建服务器运行 Jenkins 1.502，Subversion 插件升级到 1.45 版。该插件使用`svnkit-1.7.6-jenkins-1.jar`.

我们还安装了 SVN 客户端 1.7.8。

Jenkins 成功地从 SVN 存储库中检出源代码。但是当我转到工作区目录并尝试手动运行一些 svn 命令时，它会失败：

```
# cd /var/lib/jenkins/jobs/myproject/workspace/
# svnversion
svn: E155036: 工作副本 '/var/lib/jenkins/jobs/myproject/workspace' 太旧（格式 8，由 Subversion 1.4 创建）

```

错误信息表明工作副本是由 SVN 1.4 创建的，但 svnkit 的版本是 1.7.6。怎么会这样？

我搜索了整个文件系统，没有任何其他`svnkit-*.jar`文件。

* * *

## 回答 #1

> 赞同：68
> 
> 时间：2013-03-01T17:54:42.857

jenkins 中有一个选项可以告诉 svn 使用哪种工作副本格式（管理 jenkins > 配置系统），查找“Subversion Workspace Version”下拉菜单 - 它可能设置为 1.4。将其更改为列表中的最新版本。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2015-06-12T14:07:00.773

我无法将颠覆降级到 1.7。（由于依赖）。

解决此问题的另一种方法是在作业配置中`svn upgrade`分别添加带有命令的“Pre Step / Execute Shell” 。`cd trunk; svn upgrade`

这适用于 Ubuntu 14.04 上的 subversion 1.8.8。

# javascript - 无法使用 find 捕获元素

> ID：15107858
> 
> 赞同：1
> 
> 时间：2013-02-27T08:58:59.713
> 
> 标签：javascript, jquery, html, object, find

我有这个 div：

```
<div>
    <label>Big Name
        <span class="small">Suggestion text</span>
     </label>
     <input type="text" onfocus="getSuggestion(this);">
</div> 
```

我想要做的是在输入焦点上使用“getSuggestion（）”函数获取“span”内的文本。

这是我尝试过的：

```
function getSuggestion(obj) {
    var father_div = $(this).parent();

    var span = $(father_div ).find("span").html();
} 
```

但它不起作用。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-27T09:00:23.833

你不需要双`$(..)`

试试这个

```
 var span = father_div.find("span").html(); 
```

和

```
function getSuggestion(obj) {
  var father_div = $(obj).parent();

  var span = father_div.find("span").html();
} 
```

`this`在函数中被命名为`obj`...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T09:01:31.917

`$(this)`应该是`$(obj)`并且`father_div`本身也是一个 jQuery 元素

```
function getSuggestion(obj) {
    var father_div = $(obj).parent();
    var span = father_div.find("span").html();
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-27T09:02:46.457

不`.html()`返回 jquery 对象，而是返回father_div 的 html 内容。如果您想将参考保存到它，则必须拆分行：

```
function getSuggestion(obj) {
    var father_div = $(obj).parent();
    var span = $(father_div ).find("span")
    span.html();
} 
```

*正如更聪明的人所说，将其更改为 obj*

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-27T09:05:28.793

您还可以使用 jquery .closest(selector)

```
var span = $(this).closest('span').html(); 
```

# objective-c - 从在单独的 NSThread 中运行的（前）函数接收返回值的替代方法？

> ID：15107859
> 
> 赞同：0
> 
> 时间：2013-02-27T08:59:08.123
> 
> 标签：objective-c, function, return-value, nsthread

我最近开始重构我的代码，并试图通过使用更多线程来提高性能。特别是对于下载和连接。我有一个函数叫...

```
- (UIImage *)imageFromURLString:(NSString *)urlString; 
```

...它只是建立一个连接，从接收到的数据创建一个 UIImage 并返回它。

现在我开始使用线程，我意识到我无法获得返回值（这是有道理的，因为线程与调用它的方法分开运行）。**一般来说，解决此类问题的“最佳”/最优雅的方式是什么？**

*   我应该只创建一个原子类变量并从前一个函数中填充它吗？
*   也许将指向 UIImage 对象的指针传递给方法并从内部填充它？

**我知道使用类变量将是最简单的解决方案**，但它似乎不是很“干净”，对我来说也不是最优的。提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-27T09:04:48.530

答案是积木

`- (void)imageFromURLString:(NSString *)urlString completionBlock:(void(^)(UIImage *image))`

基本上在获取图像时，您将执行被调用者传递的块，并且图像将作为 arg 传递

用法将是

```
[self imageFromURLString:@"url" completionBlock:^(UIImage *image){
    //do some stuff with the image
} 
```

# php - 使用 php 和 html 上传多个文件

> ID：15107861
> 
> 赞同：-1
> 
> 时间：2013-02-27T08:59:16.330
> 
> 标签：php, html, post, file-upload

我在为多个文件上传实现此脚本时遇到问题。用户需要准确指定将文件放入的文件夹（课程代码），因此 $_POST 函数

这是我的 HTML

```
<form enctype="multipart/form-data" action="uploader.php" method="POST">
   Choose Course Code:
   <select name="subject_list">
        <option value="ACC 100">ACC 100</option>
        <option value="ACC 406">ACC 406</option>
        <option value="ECN 104">ECN 104</option>
        <option value="ECN 204">ECN 204</option>
        <option value="FIN 300">FIN 300</option>
        <option value="GMS 200">GMS 200</option>
        <option value="ITM 100">ITM 100</option>
        <option value="ITM 301">ITM 301</option>
        <option value="ITM 305">ITM 305</option>
        <option value="ITM 330">ITM 330</option>
        <option value="ITM 350">ITM 350</option>
        <option value="ITM 407">ITM 407</option>
        <option value="ITM 500">ITM 500</option>
        <option value="ITM 501">ITM 501</option>
        <option value="ITM 505">ITM 505</option>
        <option value="ITM 600">ITM 600</option>
        <option value="LAW 122">LAW 122</option>
        <option value="SSH 105">SSH 105</option>
        <option value="Other">Other</option>
   </select>
    <br>
   Choose a file to upload (Max 500MB): <input name="rye_file[]" type="file" id="file_style" multiple />
    <input type="submit" name="submit" value="Upload" />
</form> 

<form action="/logout.php">
   <input type="submit" value="Logout">
</form> 
```

这是我的PHP：

```
<?php
   session_start();

    // IF USER NOT REMEMBERED(DID NOT CLICK REMEBER ME BUTTON) OR NO SESSION IS FOUND THEN THROW HIM OUT TO LOGIN
   //SECURITY SO THAT USERS CANT ACCESS WEB URL DIRECTLY
   if (!isset($_SESSION['myusername']) && !isset($_COOKIE['myusername'])) {
        header("Location: index.php");
    }

   // SUBJECT_LIST IS FOR USER TO CHOOSE FOLDER
   $subject_list = $_POST['subject_list'];
   $uploaddir = "/var/www/fixnode_website/content/Secure Login/Rye High/uploads/$subject_list";
   $files=array();
   $fdata=$_FILES['rye_file'];
   if(is_array($fdata['name'])){
        for($i=0;$i<count($fdata['name']);++$i){
            $files[]= array(
                            'name'     => $fdata['name'][$i],
                            'tmp_name' => $fdata['tmp_name'][$i],
                            );
        }
   } else $files[]=$fdata;

   foreach ($files as $file) {
      // uploaded location of file is $file['tmp_name']
      // original filename of file is $file['name']
        if (move_uploaded_file($file['tmp_name'], "$uploaddir/$file['name']")) {
            echo "File is valid, and was successfully uploaded.\n Please wait, your browser will refresh in 5-10 seconds!";
        } else {
            echo "Upload failed";
        }
   }
?> 
```

我不断收到错误 500 服务器错误。如果有人可以帮助修改我的代码以匹配我的参数，那么我将不胜感激

谢谢，菲利普·库贾瓦

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T17:48:36.883

问题是权限问题，我上传到的文件夹没有适当的权限。我使用 chmod -R 777 更改权限，以便 php 可以上传到该文件夹

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-23T08:27:49.473

这是使用 PHP 和 HTML 进行多文件上传的示例

[https://github.com/hemantrai88/html5-php_multi-file-upload](https://github.com/hemantrai88/html5-php_multi-file-upload)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-27T09:28:52.250

尝试使用此代码进行多次上传：-

```
<!DOCTYPE html>
<html lang="en-us">

    <!-- <title>HTML5 Multiple File Upload</title>----->
    <!-- <link rel="stylesheet" href="s.css" media="screen">--->
    <!-- <style media="screen"></style>--->
    <form action="stack.php" method="post" enctype="multipart/form-data">
        <input type="file" value="" name="upload_file[]" multiple>
        <button type="submit">Upload!</button>
    </form>
<?php
for($i=0;$_FILES["upload_file"]["name"][$i]==true;$i++)
{
$fileName = $_FILES["upload_file"]["name"][$i]; // The file name
$fileTmpLoc = $_FILES["upload_file"]["tmp_name"][$i]; // File in the PHP tmp folder
$fileType = @$_FILES["upload_file"]["image/png||image/jpg"][$i];  // The type of file it is
$fileSize = $_FILES["upload_file"]["size"][$i]; // File size in bytes
$fileErrorMsg = $_FILES["upload_file"]["error"][$i]; // 0 = false | 1 = true
$kaboom = explode(".",$_FILES["upload_file"]["name"][$i]); // Split file name into an array using the dot
$fileExt = end($kaboom); // Now target the last array element to get the file extension

$moveResult= move_uploaded_file($fileTmpLoc, "foldername/$fileName");
unlink($fileTmpLoc); // Remove the uploaded file from the PHP temp folder

}

?> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-27T09:30:20.727

这就是我处理 HTML5 多次上传的方式：

```
if (!empty($_FILES["rye_file"]["name"])) {
foreach ($_FILES["rye_file"]["error"] as $key => $error) {
    //something went wrong...
    if ($error != UPLOAD_ERR_OK) {
        $aErrors[] = 'upload failed_ with error code: '.$error;
        continue;
    }
    if (!move_uploaded_file($_FILES["rye_file"]["tmp_name"][$key], 'uplaod_folder/'.$_FILES["rye_file"]["name"][$key])) {
        $aErrors[] = 'move_uploaded_file failed';
    }
}
} 
```

# c - 在 Solaris 中，使用 /usr/sfw/bin/gcc 时链接动态库错误

> ID：15107862
> 
> 赞同：0
> 
> 时间：2013-02-27T08:59:17.263
> 
> 标签：c, gcc, hyperlink, solaris

all：
我正在使用 Solaris 10，并遇到以下问题：

```
There is ODBC dynamic library in /usr/local/lib:

lrwxrwxrwx   1 root     root          16 Jun 26  2012 libodbc.so -> libodbc.so.2.0.0
lrwxrwxrwx   1 root     root          16 Jun 26  2012 libodbc.so.2 -> libodbc.so.2.0.0
-rwxr-xr-x   1 root     root     1874776 Jun 26  2012 libodbc.so.2.0.0 
```

生成文件喜欢这样：

```
gcc  -o a a.c -lodbc 
```

当我使用 /usr/local/bin/gcc 编译程序时，编译正常。
但是当我使用 /usr/sfw/bin/gcc 编译程序时，得到以下错误：

ld：致命：库-lodbc：未找到

但是crle命令输出：

```
 Configuration file [version 4]: /var/ld/ld.config  
 Platform:     32-bit MSB SPARC
 Default Library Path (ELF):   /lib:/usr/lib:/usr/local/lib:/opt/DSI/32:/usr/local/asg_mysql/lib
 Trusted Directories (ELF):    /lib/secure:/usr/lib/secure  (system default)

 Command line:
 crle -c /var/ld/ld.config -l /lib:/usr/lib:/usr/local/lib:/opt/DSI/32:/usr/local/asg_mysql/lib 
```

好像没问题。

那么使用 gcc 有什么不同吗？首先十分感谢！
最好的问候
南肖

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T09:03:50.337

这似乎`/usr/local/lib`不在链接器的默认搜索路径中。使用`-L`选项添加它：

```
$ /usr/sfw/bin/gcc your_file.c -o your_program -L/usr/local/lib -lodbc 
```

# c# - 绑定到 LongListSelector/Listbox 的项目数据未显示在 Windows Phone 8 本地数据库中

> ID：15107864
> 
> 赞同：0
> 
> 时间：2013-02-27T08:59:25.220
> 
> 标签：c#, windows-phone-7, xaml, sql-server-ce, windows-phone-8

我创建了一个 Windows Phone 8 项目，该项目将名称添加到本地 SQL CE 数据库。我在 MainPage.xaml.cs 文件中将单个 NameItem 添加到本地数据库，它已成功添加，但未显示在运行应用程序时的列表框/长列表选择器。我真的很感激任何帮助。我有以下设置：

**该表的结构如下所示：**

```
 namespace LocalDB
{
 [Table]
 public class Names : INotifyPropertyChanged, INotifyPropertyChanging
{

     [Column(IsPrimaryKey = true, IsDbGenerated = true, CanBeNull = false, AutoSync = AutoSync.OnInsert)]
     private int id;

     public int F_Id
     {
         get { return id; }
         set
         {
             NotifyPropertyChanging("F_Id");
             id = value;
             NotifyPropertyChanged("F_Id");
         }
     }

     [Column]
     private string f_name;

     public string F_Name
     {
         get { return f_name; }
         set
         {
             NotifyPropertyChanging("F_Name");
             f_name = value;
             NotifyPropertyChanged("F_Name");
         }
     }

     [Column]
     private string l_name;

     public string L_Name
     {
         get { return l_name; }
         set
         {
             NotifyPropertyChanging("L_Name");
             l_name = value;
             NotifyPropertyChanged("L_Name");
         }
     }

     #region Implementation of INotifyPropertyChanged

     public event PropertyChangedEventHandler PropertyChanged;

     private void NotifyPropertyChanged(string propertyName)
     {
         if (PropertyChanged != null)
         {
             PropertyChanged(this, new PropertyChangedEventArgs(propertyName));
         }
     }
     #endregion

     #region Implementation of INotifyPropertyChanging

     public event PropertyChangingEventHandler PropertyChanging;

     private void NotifyPropertyChanging(string propertyName)
     {
         if (PropertyChanging != null)
         {
             PropertyChanging(this, new PropertyChangingEventArgs(propertyName));
         }
     }
     #endregion

}
} 
```

**Load.xaml.cs 的代码（从本地数据库中检索数据）：**

```
namespace LocalDB
{
public partial class Load : PhoneApplicationPage
{
    private const string Con_String = @"isostore:/names.sdf";
    String fname, lname;

    public Load()
    {
        InitializeComponent();

    }
    public IList<Names> GetNames()
    {
        IList<Names> namesList = null;
        using (NamesDataContext NamesDB = new NamesDataContext(Con_String))
        {
            IQueryable<Names> query = from c in NamesDB.Names select c;
            namesList = query.ToList();

        }

        return namesList;
    }
    private void PhoneApplicationPage_Loaded_1(object sender, RoutedEventArgs e)
    {
        IList<Names> listnames = this.GetNames();
        List<NameItems> nm = new List<NameItems>();
        foreach (Names mynames in listnames)
        {

            fname = mynames.F_Name.ToString();
            lname = mynames.L_Name.ToString();

            nm.Add(new NameItems() { fname = fname, lname = lname });

        }

        namelonglistselector.ItemsSource = nm;
    }

}
}
**the xaml code with LongListSelector:**
<Grid x:Name="ContentPanel" Grid.Row="1" Margin="12,0,12,0">
    <phone:LongListSelector  Name="namelonglistselector">
            <phone:LongListSelector.ItemTemplate>
                <DataTemplate>
                    <StackPanel>
                    <TextBlock Name="fnametextblock" Text="{Binding fname}"/>
                    <TextBlock  Name="lnametextblock" Text="{Binding lname}"/>
                    </StackPanel>
                </DataTemplate>
            </phone:LongListSelector.ItemTemplate>
        </phone:LongListSelector>
    </Grid>
    </Grid>

**the collection class Nameitems.cs**
namespace LocalDB
{
class NameItems
{
    public string fname { get; set; }
    public string lname { get; set; }
} 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T09:25:42.297

绑定代码似乎没有任何问题。

你确定这`PhoneApplicationPage_Loaded_1`是被调用的吗？从您发布的代码来看，没有迹象表明它是 .

也许您需要将处理程序添加到加载的事件。像这样更新页面构造函数：

```
public Load()
{
    InitializeComponent();

    this.Loaded += this.PhoneApplicationPage_Loaded_1;
} 
```

示例代码位于：[MainPage.xaml](http://pastebin.com/McSSEd47)和[MainPage.xaml.cs](http://pastebin.com/gXe9kUwB)

**基于评论中链接的复制项目进行更新**

没有显示详细信息，因为数据库中没有要显示的记录。 `Getnames()`正在返回一个空列表。
原因是数据库是空的。

当您保存正在调用的数据`InsertOnSubmit()`但从不提交更改并且事务永远不会提交到磁盘时。您需要在调用`ChildDB.SubmitChanges();`后调用`ChildDB.Names.InsertOnSubmit(names);`。

这会将数据保存到数据库中，因此当您转到页面查看详细信息时，会显示详细信息并显示在页面上。

# c# - ASP.NET LoginStatus：注销不起作用

> ID：15107865
> 
> 赞同：4
> 
> 时间：2013-02-27T08:59:25.647
> 
> 标签：c#, asp.net, .net, authentication, membership-provider

我正在使用 Membership Provider 开发一个 Web 应用程序来实现对应用程序部分的身份验证和用户/角色访问。

我`LoginStatus`在我的母版页中使用控件作为注销链接，但测试它我发现注销不起作用。如果我尝试再次访问我的应用程序的任何页面（注销后），则会显示该页面...

我想这个问题取决于存储在用户会话中的数据不会自动清除。这是正确的？

那么实现注销和清除会话的正确方法是什么？

**注意** 我没有为`LoginStatus`控件实现任何事件。我正在使用表单身份验证。在我的登录页面中，我正在使用以下代码：

```
FormsAuthenticationTicket ticket = new FormsAuthenticationTicket(
   1, // Ticket version
   this.txtUser.Text, // Username associated with ticket
   DateTime.Now, // Date/time issued
   DateTime.Now.AddMinutes(30), // Date/time to expire
   true, // "true" for a persistent user cookie
   ruolo, // User-data, in this case the roles
   FormsAuthentication.FormsCookiePath);

string hash = FormsAuthentication.Encrypt(ticket);
HttpCookie cookie = new HttpCookie(
   FormsAuthentication.FormsCookieName,
   hash);

if (ticket.IsPersistent) { cookie.Expires = ticket.Expiration; }

Response.Cookies.Add(cookie); 
```

在我的**web.config** `system.web`部分：

```
<authentication mode="Forms">
  <forms name=".ASPXAUTH" loginUrl="login.aspx" protection="All" path="/" domain="keyforup.it"/>
</authentication>
<authorization>
  <deny users="?"/>
</authorization> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-23T13:39:48.970

试图找到解决这个问题的方法时，我几乎失去了理智。在其他浏览器上一切正常，但 Firefox 和 chrome 在登录后不会在初始页面上注销用户。

当我在 site.master 文件中将表单的 action 属性设置为 action="default.aspx" 时，它开始工作。

当我查看资源管理器调试器时，表单操作具有默认值，但在 chrome 和 firefox 操作上没有设置属性。我认为这可能是 .net 登录状态控制脚本的问题。

由于我的系统现在可以工作，我不会进一步搜索，但我希望这对遇到类似问题的人有所帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T10:14:51.633

调用控制`Session.Abandon()`事件解决`LoggedOut`了`LoginStatus`这个问题，但我想知道这是否是实现这一目标的最佳方式。

# delphi - 在 Firemonkey TGrid 中更改 TTextCell 的背景

> ID：15107866
> 
> 赞同：0
> 
> 时间：2013-02-27T08:59:28.610
> 
> 标签：delphi, firemonkey, delphi-xe3

我正在尝试创建一个 Firemonkey TGrid，它将根据值显示具有改变背景颜色的值，但我似乎无法掌握 firemonkey 中新的 Styles 事物的窍门。

我遵循了[Firemonkey Grid Control 的建议和结构 - 基于值（通过 OnGetValue 函数调用）设置单元格样式](https://stackoverflow.com/questions/9260355/firemonkey-grid-control-styling-a-cell-based-on-a-value-via-the-ongetvalue-fu)并创建了自定义 TTextcel 导数，但我仍然找不到如何更改背景颜色。

我试过`FindStyleResource('background') as TRectangle`了，但这总是返回零。

任何人都可以让我走上正轨吗？

[附加信息]
完成了 Mike Sutton 的建议，我开始明白了；）编辑框给了我一个布局结构，我设法将它链接到我的 TTExtCel 控件。这样我就可以通过`foreground: BrushObject`.

但是背景是用 TSubImage 和 TRectAnimation 完成的。如果我理解正确，TSubimage 将参与其中`Windows7 Style.png`并在编辑框中显示它。如何用 TRectangle 替换 TSubImage 以便更改 BrushColor？结构和属性编辑器窗口不允许我添加除 TLayout 之外的任何样式元素...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T09:12:09.457

我认为您使用的是XE3。XE3 中的样式使用位图作为背景等，因此即使您找到“背景”样式组件，它也可能不是 TRectangle（因此您应该避免这种盲目投射）。

在表单上弹出一个 TEdit，右键单击并选择编辑自定义样式。然后，您将看到样式中的内容。您可能可以根据需要对其进行修改，或者您可能必须完全重新设计它（可能使用自定义位图，可能返回矩形）。然后，您可以设置每个单元格的 StyleLookup 属性以使用它，或者将样式 StyleName 设置为 TextCellStyle 以使其为每个 TTextCell 自动拾取。

[附加信息] 要在样式编辑器中添加对象，请将其从工具面板拖到结构窗格（屏幕左上角）。要开始一个新元素，请将其放在最顶层（根）项目上。然后您可以将其设置为 StyleName，然后您需要应用并关闭双击样式簿以返回编辑器并使您的更改生效（是的，这很糟糕）。

您可以在结构窗格中拖放内容以重用旧样式中的项目。

# php - 拆分字符串以获取其中的一部分

> ID：15107869
> 
> 赞同：0
> 
> 时间：2013-02-27T08:59:37.267
> 
> 标签：php, string

我从数据库中有这个字符串：

```
<href="/supplier/plant-whole-payment-details/80912">22441769</a> 
```

我只需要**80912**。如何在 PHP 中获取它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T09:04:06.257

```
$str = '<href="/supplier/plant-whole-payment-details/80912">22441769</a>';

preg_match('/href=".*\/(?P<digit>\d+)"/', $str, $matches);

echo $matches['digit']; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T09:04:47.047

您不想*拆分*字符串，而是提取其中的一部分。正则表达式为此派上用场。如果字符串始终与您的示例中的字符串相似，请使用此字符串获取和之间的第一个数字`/`匹配`"`：

```
$string = '<href="/supplier/plant-whole-payment-details/80912">22441769</a>';
preg_match('#/(\d+)"#', $string, $matches);
$value = $matches[1]; 
```

**进一步说明：**

*   `\d`代表“数字”
*   `+`代表“一个或多个”
*   `#`是标记模式开始和结束的分隔符
*   括号标记了一个子模式，它将被添加到`$matches`数组中

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-27T09:07:23.533

你可以用`substr`. 检查此代码。

```
<?php
// your text which needs to be splited .
 $text = "/supplier/plant-whole-payment-details/80912" ;

 $reqText = substr($text , -5);

?> 
```

这将在字符串的末尾输出数字 .。

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2013-02-27T09:05:37.680

用这个...

在这个例子中，我们将一个字符串分解为一个数组：

```
<?php
 $str = "Hello world. It's a beautiful day.";
 print_r (explode(" ",$str));
 ?> 
```

# java - 有没有通用的 Maven 代码生成器？

> ID：15107875
> 
> 赞同：7
> 
> 时间：2013-02-27T09:00:04.103
> 
> 标签：java, maven, code-generation

我目前正在从事一个项目，该项目将代码生成用于各种目的。一个生成器从 jpa 实体生成 SQL 脚本。另一个从 pojos 生成 DTO，另一个生成 JPA2.0 元模型，jet 另一个基于 Java 类生成一些 xml 和 schema 文件……每个生成器的工作方式完全不同，需要进行不同的配置。

我现在的问题是......是否有任何具有以下属性的通用 maven 代码生成器插件： - 创建 Java 类的 pojo 模型（名称、属性、注释、方法......） - 使用模板来定义输出它使用 pojo 模型生成任何输出。- 允许我为一个类指定多个模板 - 允许我生成代码和资源 - 允许我生成目标/生成源的基类和 src/main/java 的虚拟实现，它只是扩展基类（如果src/main/java 中的虚拟类存在，没有任何反应，如果它不生成这样的虚拟类。此代码已签入 SCM 并允许手动扩展生成的类）

我正在使用 Flexmojos GraniteDS 插件来生成我的 ActionScript 模型代码，但它非常专门用于该特定目的。

我认为这样的通用生成器会让事情变得容易得多。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-12T20:21:16.967

正如 Lukas 所提到的，[Minuteproject](http://minuteproject.wikispaces.com/)是为这样的事情而设计的：

1.  您可以以各种格式添加任何基于文本的类型（xml、properties、java、html...）文件
2.  生成的文件可以互相引用
3.  模板语言是速度
4.  模板可以应用于表格/视图；列（字段）；包（表/视图组）；模型; 应用
5.  代码是[可更新](http://minuteproject.wikispaces.com/Updatable_Generated_Code)的（您可以添加扩展名；修改区域），这意味着您修改的代码会连续生成
6.  它是操作系统，您可以修改任何模板并添加您的模板
7.  它捆绑了[JPA2等轨道](http://minuteproject.wikispaces.com/JPA2)
8.  它适用于约定，但您可以定义适用于您的模型的自己的约定
9.  它不仅限于数据结构，它可以对您的语句进行逆向工程（SDD - 语句驱动开发）

但目前它通过命令行工作；一个 Maven 插件将是一个很好的改进

弗洛里安

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T09:14:41.593

有[minuteproject](http://minuteproject.wikispaces.com/)，它支持多种输入/输出格式。这不是 100% 符合您的要求，但理念是相同的：为各种目标创建单个生成器。

我认为它还没有 Maven 插件，但开发人员反应非常迅速。我相信你可以为它创建一个功能请求。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-05-18T13:00:16.207

尝试[一次写入](https://code.google.com/p/write-it-once/)。基于模板的代码生成器。[您使用Groovy](http://groovy.codehaus.org/Groovy+Templates)编写自定义模板，并根据 java 反射生成文件。这是生成任何文件的最简单方法。您可以通过生成 AspectJ 或 java 文件、基于 JPA 注释的 SQL、基于枚举的插入/更新等来制作 getters/settest/toString。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-10-11T00:51:44.840

string-template-maven-plugin 可能是“通用”代码生成器的最佳候选者。您可以定义一个字符串模板模板组文件，并提供一个 java 文件来将数据提供给模板。该插件将自动编译并运行您的 java 代码（控制器）。

# c# - 这是为 WCF 设置证书的正确方法吗？

> ID：15107885
> 
> 赞同：0
> 
> 时间：2013-02-27T09:00:22.773
> 
> 标签：c#, .net, wcf, certificate, communication

我在 selfhost 中托管了一个 WCF 服务，它通过 TCP 与 winform 客户端通信。这是设置证书（内部网传输）的正确方法吗？我怎么知道通信肯定是加密的？

**服务**

```
<behavior name="MyAppClientService.Certificate_Behavior">
          <dataContractSerializer maxItemsInObjectGraph="2147483647"/>
          <serviceDebug includeExceptionDetailInFaults="true"/>
          <serviceMetadata httpGetEnabled="true"/>
          <customBehaviorExtension_ClientService/>
          <serviceThrottling maxConcurrentCalls="2000" maxConcurrentSessions="2147483647" maxConcurrentInstances="2000"/>
          <serviceCredentials>
            <clientCertificate>
              <authentication certificateValidationMode="PeerTrust"/>
            </clientCertificate>
            <userNameAuthentication userNamePasswordValidationMode="Custom" customUserNamePasswordValidatorType="MyApp.ServiceImplementation.CustomUsernamePasswordValidator, MyApp.ServiceImplementation"/>
            <serviceCertificate findValue="MyAppServer"
                  storeLocation="CurrentUser"
                  storeName="TrustedPeople"
                  x509FindType="FindBySubjectName" />
          </serviceCredentials>
          <serviceAuthorization principalPermissionMode="Custom" serviceAuthorizationManagerType="MyApp.ServiceImplementation.CustomServiceAuthorizationManager, MyApp.ServiceImplementation">
            <authorizationPolicies>
              <add policyType="MyApp.ServiceImplementation.CustomAuthorizationPolicy_ClientService, MyApp.ServiceImplementation"/>
            </authorizationPolicies>
          </serviceAuthorization>
        </behavior>

<services>
      <service behaviorConfiguration="MyAppClientService.Certificate_Behavior" name="MyApp.ServiceImplementation.MyAppClientService">
        <endpoint binding="netTcpBinding" bindingConfiguration="netTcpCertificate" behaviorConfiguration="protoEndpointBehavior" bindingNamespace="http://MyApp.ServiceContracts/2007/11" contract="MyApp.ServiceContracts.IMyAppClientService" address="Sll"/>
        <!-- No need for MEX for this service -->
        <!--<endpoint address="httpMex" binding="mexHttpBinding" contract="IMetadataExchange"/>-->
        <!--<endpoint address="tcpMex" binding="mexTcpBinding" contract="IMetadataExchange"/>-->
        <host>
          <baseAddresses>
            <add baseAddress="net.tcp://localhost:8035/MyApp5Service/Client/"/>
            <add baseAddress="http://localhost:8002/MyApp5Service/Client"/>
          </baseAddresses>
        </host>

      </service>

<bindings>
      <netTcpBinding>
        <binding name="netTcpCertificate" closeTimeout="00:01:00" openTimeout="00:01:00" receiveTimeout="infinite" sendTimeout="01:00:00" transactionFlow="false" transferMode="Buffered" transactionProtocol="OleTransactions" hostNameComparisonMode="StrongWildcard" listenBacklog="1000" maxBufferPoolSize="2147483647" maxBufferSize="2147483647" maxConnections="200" maxReceivedMessageSize="2147483647">
          <readerQuotas maxDepth="2147483647" maxStringContentLength="2147483647" maxArrayLength="2147483647" maxBytesPerRead="2147483647" maxNameTableCharCount="2147483647"/>
          <reliableSession ordered="true" inactivityTimeout="infinite" enabled="false"/>
          <security mode="Transport">
            <transport clientCredentialType="Certificate"/>
            <message clientCredentialType="Certificate"/>
          </security>
        </binding>
      </netTcpBinding>
    </bindings> 
```

**客户**

```
<behaviors>
      <endpointBehaviors>
        <behavior name="protoCertificateEndpointBehavior">
          <clientCredentials>
            <clientCertificate findValue="MyAppClient" x509FindType="FindBySubjectName" storeLocation="CurrentUser" storeName="TrustedPeople"/>
            <serviceCertificate>
              <authentication certificateValidationMode="PeerTrust"/>
            </serviceCertificate>
          </clientCredentials>
          <CustomMessageInspector/>
          <protobuf/>
        </behavior>
      </endpointBehaviors>
    </behaviors>

    <client>
          <endpoint address="net.tcp://localhost:8035/MyApp5Service/Client/Sll" behaviorConfiguration="protoCertificateEndpointBehavior" binding="netTcpBinding" bindingConfiguration="netTcpCertificate" contract="MyApp.ServiceContracts.IMyAppClientService" name="SelfHostProtoCert_RegularLogin">
            <identity>
              <dns value="MyAppServer" />
            </identity>
          </endpoint>
        </client>

        <bindings>
              <netTcpBinding>
                <!-- http://msdn.microsoft.com/en-us/library/ff648863.aspx -->
                <binding name="netTcpCertificate" closeTimeout="00:01:00" openTimeout="00:01:00" receiveTimeout="infinite" sendTimeout="01:00:00" transactionFlow="false" transferMode="Buffered" transactionProtocol="OleTransactions" hostNameComparisonMode="StrongWildcard" listenBacklog="1000" maxBufferPoolSize="2147483647" maxBufferSize="2147483647" maxConnections="200" maxReceivedMessageSize="2147483647">
                  <readerQuotas maxDepth="2147483647" maxStringContentLength="2147483647" maxArrayLength="2147483647" maxBytesPerRead="2147483647" maxNameTableCharCount="2147483647"/>
                  <reliableSession ordered="true" inactivityTimeout="infinite" enabled="false"/>
                  <security mode="Transport">
                    <transport clientCredentialType="Certificate"/>
                    <message clientCredentialType="Certificate"/>
                  </security>
                </binding>
              </netTcpBinding>
            </bindings> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T10:54:38.000

配置乍一看还不错。但是在这里我看到了另一个问题，如何确保流量真正加密。我认为您可以尝试使用[网络监视器](http://www.microsoft.com/en-us/download/details.aspx?id=4865)来捕获 tcp 流量。它有一些解密 SSL 流量的工具。

# c++ - 如何知道在 Qt 中选择了哪个选项卡？

> ID：15107891
> 
> 赞同：2
> 
> 时间：2013-02-27T09:00:51.323
> 
> 标签：c++, qt, qvboxlayout

我在使用 Qt 的应用程序中有多个选项卡，我将它们全部添加到一个`QVBoxLayout`对象中。如何知道选择了哪一个？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-27T09:06:24.057

`QTabWidget::currentIndex()`将返回活动选项卡的索引。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-01-02T01:01:48.623

我更喜欢`ui->QTabWidget->currentWidget() == ui->Tab` 如果您重新排列选项卡并且索引更改。

# php - 拼接数组

> ID：15107893
> 
> 赞同：0
> 
> 时间：2013-02-27T09:01:02.493
> 
> 标签：php, arrays, splice

我有数组数组：

```
Array
(
   [0] => "title"
   [1] => Array
         (
             [0] => a
             [1] => b
             [2] => c
         )
   [2] => Array
         (
             [0] => d
             [1] => e
             [2] => f
         )
) 
```

我需要将一个数组插入到第一个数组中，如下所示

```
Array
(
   [0] => "title"
   [1] => Array
         (
             [0] => a
             [1] => b
             [2] => c
         )
   [2] => Array
         (
             [0] => a1
             [1] => b1
             [2] => c1
         )
   [3] => Array
         (
             [0] => d
             [1] => e
             [2] => f
         )
) 
```

我不知道怎么用`array_splice()`。我以这种方式尝试过，但没有奏效。

```
array_splice($main_array, 2, 0 $array_to_insert) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T09:10:50.423

更新：阅读评论后，这似乎是一个 javascript 问题。:) ??!!.. 只是为了完整起见，这是一个 PHP 解决方案 - 根据要求 ;)

* * *

`array_splice()`是正确的做法。使用以下代码：

```
<?php

$arr = array (
 'title',
 array('a', 'b', 'c'),
 array('d', 'e', 'f')
);
var_dump($arr);

// note that I've wrapped the array to be inserted into another, empty, array
array_splice($arr, 2, 0, array(array('a1', 'b1', 'c1')));

// further note that array_splice will not return the new array. $arr is
// passed by reference and will get modified from inside of array_splice
var_dump($arr); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T09:07:20.230

我想这会帮助你...

```
 var a = [1,2,3,4,5];
a.splice(2,0,'a','b');  // Returns []; a is [1,2,'a','b',3,4,5]
a.splice(2,2,[1,2],3);  // Returns ['a','b']; a is [1,2,[1,2],3,3,4,5] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-27T09:28:54.370

```
$main_array = array(0 => "title",1 => array("a","b"));

$array_to_insert = array("c","d");

$new_array = array_splice($main_array, 1, 0, array($array_to_insert));

print_r($main_array); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-27T09:26:04.153

请检查以下代码

```
 $array_to_insert = array(0  => array( 0 => 'a1',1 => 'b1',2 => 'c1'));
   // You need to have nexted array

    $main_array = array(0 => "title",1 => array(0 => a,1 => b,2 => c),2 => array(0 => d,1 => 
e,2 => f));

    array_splice($main_array, 2, 0, $array_to_insert); 

    var_dump($main_array); 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-02-27T09:04:24.907

nameOfArray[3] = ["d", "e", "f"]。splice 也可以，但必须像这样使用：array.splice(index, howMany, whatToInsert)

# android - 如何从 gcm 获取数据？

> ID：15107896
> 
> 赞同：2
> 
> 时间：2013-02-27T09:01:16.893
> 
> 标签：android, eclipse, google-cloud-messaging

当我从 GCM 获取新数据时，有人可以向我展示流程背后的层次结构吗？只发生在客户端的过程。示例：首先，数据进入 CommonUtilities 类中的 displayMessage 函数。秒数据传输到 GCMIntentService 类中的 onMessage 函数，以此类推。

谢谢！

```
 private final BroadcastReceiver mHandleMessageReceiver = new BroadcastReceiver() {
    @Override
    public void onReceive(Context context, Intent intent) {
        String newMessage = intent.getExtras().getString(EXTRA_MESSAGE);
        // Waking up mobile if it is sleeping
        WakeLocker.acquire(getApplicationContext());

        // Showing received message
        lblMessage.append(newMessage + "\n");
        Toast.makeText(getApplicationContext(), "New Message: " + newMessage, Toast.LENGTH_LONG).show();

        // Releasing wake lock
        WakeLocker.release();
    }
}; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-27T09:08:15.220

如果注册设备和获取设备的所有过程都按`registrationId`原样通过，那么在您的设备中获取数据`onMessage()`应该类似于以下内容：

```
@Override
    protected void onMessage(Context arg0, Intent intent) {

            Log.d(TAG, "MESSAGE RECEIVED : "+intent.getExtras().toString());
            String action  = intent.getStringExtra("action");
            int extra = 0;
            try {
                    extra = Integer.parseInt(intent.getStringExtra("action_id"));
            } catch (Exception e){
                    /* ignore */
            }
            String message = intent.getStringExtra("message");
            generateNotification(getApplicationContext(), message, action, extra);
    } 
```

当然，这是在我的应用程序中，用于获取正确数据的密钥取决于将您的服务器发送到客户端设备的数据类型。在收到这部分数据后，您可以对它做任何您喜欢的事情，可能会创建一个通知并提醒用户该消息。

**编辑 ：**

如果您想在您的活动中显示某种消息，您`BroadcastReceiver`可以执行以下操作：在您`onMessage`收到消息后发送`broadcastIntent`

```
Intent intent = new Intent("messageReceived");
sendBroadcast(intent); 
```

并添加

```
IntentFilter intentFilter = new IntentFilter();
intentFilter.addAction(messageReceived); 
```

到您的活动并注册您的广播接收器，例如：

```
 registerReceiver(myReceiver, intentFilter); 
```

并像这样处理接收器中的消息：

```
public void onReceive(Context context, Intent intent) {
    if(intent.getAction().equals("messageReceived")) {
         // Do your stuff here.
    }
 } 
```

# mysql - MySql查询选择1个表的总和和最小记录

> ID：15107897
> 
> 赞同：1
> 
> 时间：2013-02-27T09:01:19.167
> 
> 标签：mysql, sql, select

我有 1 个表，我想查询特定列。Aa -> 是不同的，

Bb -> Sum B 按 Aa 进行的总分组，

Cc -> 特定 Aa 的最小值 C，

Bb1,Dd -> C 最小时的 B,D 值，

Ee -> 不同的

## 表格1

```
id | A | B | C | D | E |
------------------------
1  | 2 | 1 | 2 | 1 | A |

2  | 2 | 2 | 7 | 0 | A |

3  | 4 | 1 | 7 | 3 | B |

4  | 4 | 0 | 5 | 4 | B | 
```

结果

```
Aa | Bb | Cc | Bb1 | Dd | Ee |
-----------------------------
2  | 3  | 2  | 1   | 1  | A  |

4  | 1  | 5  | 0   | 4  | B  | 
```

我的查询给出错误的结果

```
 SELECT
    test.A as Aa,
    SUM(test.B) as Bb,
    min(test.C) as Cc,
    test.D as Dd,
    test.E as Ee
    FROM `test` 
    group by A,E 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T09:23:13.113

```
SELECT
      a.A as Aa,
      SUM(a.B) as Bb,
      min(a.C) as Cc,
      b.b B1,
      b.D DD,
      a.E EE
FROM  `Table1` a
      INNER JOIN
      (
        SELECT  a.*
        FROM    table1 a
                INNER JOIN
                (
                  SELECT  A, MIN(C) min_C
                  FROM    table1
                  GROUP   BY A
                ) b ON  a.a = b.a AND a.c = b.min_C
      ) b ON a.a = b.a 
group by a.A, b.b 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!2/2e2b41/15)

# json - 使用junit为restful服务编写测试用例

> ID：15107905
> 
> 赞同：0
> 
> 时间：2013-02-27T09:01:56.890
> 
> 标签：json, rest, junit

我得到了一个项目来使用junit为restful服务编写测试用例。restful 服务提供 json 数据作为输出。我是新手，虽然我已经获得了基本知识，但仍然不知道要测试什么。请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T11:48:58.650

行。所以有几件事可以/应该做。

1.  直接对控制器进行单元测试。模拟所有其他类。
2.  尝试使用任何框架提供的测试实用程序来测试控制器如何与框架交互。Spring 的[MockMVC](http://static.springsource.org/spring-framework/docs/3.2.0.RC1/api/org/springframework/test/web/servlet/MockMvc.html)就是一个例子。例如，查看这个问题的“正确”答案：[JUnit test for ExceptionHandler](https://stackoverflow.com/questions/14605287/write-junit-test-for-exceptionhandler)

以上两者都不需要部署的服务来测试，因此在 maven 的测试阶段运行良好。

3.  此外，虽然这将是一个集成测试，但您可以使用 RestTemplate 编写 JUnit 测试来访问正在运行的服务并验证结果。由于这具有部署服务的外部依赖性并且不使用任何模拟，因此它是一个集成测试。也就是说，它是一组非常有效的测试，可以用 JUnit 编写。但是，这些测试应该被命名（或分类）为集成测试，以便它们可以与没有外部依赖关系的测试隔离。

该服务提供 JSON 的事实应该没什么大不了的。只需使用 Jackson 将其解组为域对象并验证值是否符合您的期望。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T09:39:53.127

发送请求并测试响应。你可以使用[restfuse。](http://developer.eclipsesource.com/restfuse/)

# mysql - 如何将所有字段从一个表更新到另一个 [MySQL]

> ID：15107907
> 
> 赞同：1
> 
> 时间：2013-02-27T09:01:58.197
> 
> 标签：mysql

我有两张包含很多字段的表

表——`A` 表——`B`

在表中`A`只有两个字段被填写所有其他都是空的，但正是这些字段被填写在表中`B`

我想

`UPDATE A, B set A.c = B.c, A.d = B.d .... WHERE ....`

但是大约有 100 列，有什么方法可以更新除 1 个特定字段之外的所有字段`A`吗`B`？有什么方法可以告诉 mysql 保留 1 个特定字段`A`。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T09:39:16.310

如果表 A 和 B 中的字段名称相同，那么您可以使用 excel 来构建字符串。

将 DB 表 A 的整个结构复制到 excel 中作为 1 列，然后使用带有字符串连接的 excel 公式来构建所需的字符串。

这不应该是那么困难的任务。

从 MySql 端，您可以在临时表的帮助下查看 DELETE 和 INSERT 选项。更多细节需要在 MySql 端考虑解决方案。

# sql-server - 在 SQL Server 2008 中检查连续日期的疾病提取查询

> ID：15107908
> 
> 赞同：0
> 
> 时间：2013-02-27T09:02:02.680
> 
> 标签：sql-server

我的数据库（SQL Server 2008）中有一个表，其中包含以下列/数据。

```
 Emp ID        Start DT       End DT        Start Time     End Time     ABSTYPE      
20011664      13/02/2013     13/02/2013     09:00         17:00         Sick
20011664      14/02/2013     14/02/2013     09:00         17:00         Sick
20011664      15/02/2013     15/02/2013     09:00         17:00         Sick
20011664      19/02/2013     19/02/2013     09:00         17:00         Sick
20099999      14/02/2013     14/02/2013     09:00         17:00         Sick 
```

我想要一个将返回以下内容的查询

```
20011664      13/02/2013      15/02/2013    09:00         17:00         Sick
20011664      19/02/2013      19/02/2013    09:00         17:00         Sick
20099999      14/02/2013      14/02/2013    09:00         17:00         Sick 
```

即，为每个连续生病的时期返回一行

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T13:17:39.283

你可以这样做：

```
CREATE TABLE #tbl ([Emp ID]   INT,     [Start DT]     DATE,  [End DT]     DATE,   [Start Time]    TIME, [End Time] TIME, ABSTYPE VARCHAR(100))
INSERT #tbl VALUES
(20011664,      '13/02/2013' ,    '13/02/2013'  ,   '09:00'    ,     '17:00'    ,     'Sick'),
(20011664,      '14/02/2013' ,    '14/02/2013'  ,   '09:00'    ,     '17:00'    ,     'Sick'),
(20011664,      '15/02/2013' ,    '15/02/2013'  ,   '09:00'    ,     '17:00'    ,     'Sick'),
(20011664,      '19/02/2013' ,    '19/02/2013'  ,   '09:00'    ,     '17:00'    ,     'Sick'),
(20099999,      '14/02/2013' ,    '14/02/2013'  ,   '09:00'    ,     '17:00'    ,     'Sick')

;WITH a AS
(
    SELECT  *
            , DATEDIFF(DAY, 0, [Start DT]) - 
                DENSE_RANK() OVER (PARTITION BY [Emp ID] ORDER BY DATEDIFF(DAY, 0, [Start DT])) 
                AS part
    FROM    #tbl
)

SELECT  a.[Emp ID]
        , MIN(a.[Start DT])
        , MAX(a.[End DT])
FROM    a
GROUP BY
        a.[Emp ID], a.part 
```

这个奇妙的方法取自 Martin Smith 的答案（**[链接](https://stackoverflow.com/questions/4630560/sql-server-data-conversion)**）并针对这个例子进行了调整，根据 Martin 的说法，它是由 Itzik Ben Gan 介绍的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T09:51:58.073

```
;with cte as (
    select *
    from [<YourTable>]

    union all

    select t.[Emp ID], t.[Start DT], t.[End DT] + 1, t.[Start Time], t.[End Time], t.[ABSTYPE]
    from cte t
    inner join [<YourTable>] d on t.[Emp ID] = d.[Emp ID] and t.[End DT] + 1 = d.[Start DT]
), results as (
    select *, datediff(day, [Start DT], [End DT]) as daydiff, max(datediff(day, [Start DT], [End DT])) over (partition by [Emp ID], [Start DT]) as max_start_daydiff, max(datediff(day, [Start DT], [End DT])) over (partition by [Emp ID], [End DT]) as max_end_daydiff
    from cte 
)
select [Emp ID], [Start DT], [End DT], [Start Time], [End Time], [ABSTYPE]
from results
where daydiff = max_start_daydiff
and daydiff = max_end_daydiff 
```

# c# - 通用类字段解析器到字典 使用反射

> ID：15107909
> 
> 赞同：2
> 
> 时间：2013-02-27T09:02:03.130
> 
> 标签：c#, .net, reflection

我有很多次考虑将类的示例转换为`Dictionary<String, String>`键是变量名（类字段名），值是变量当前分配的值。所以我们有一个简单的类：

```
public class Student
{
    public String field1;
    public Int64 field2;
    public Double field3;
    public Decimal field4;

    public String SomeClassMethod1()
    {
        ...
    }
    public Boolean SomeClassMethod2()
    {
        ...
    }
    public Int64 SomeClassMethod1()
    {
        ...
    }
} 
```

我期望它看起来像：

```
static void Main(String[] args)
{
    Student student = new Student(){field1 = "", field2 = 3, field3 = 3.0, field4 = 4.55m};
    Dictionary<String, String> studentInDictionary = ConvertAnyToDictionary<Student>(student);
}

public Dictionary<String, String> ConvertAnyToDictionary<T>(T value) where T:class
{
...
} 
```

关于如何使它成为现实的任何想法？非常感谢任何建议。

EDIT1：预期结果：

```
studentInDictionary[0] = KeyValuePair("field1", "");
studentInDictionary[1] = KeyValuePair("field2", (3).ToString());
studentInDictionary[2] = KeyValuePair("field3", (3.0).ToString());
studentInDictionary[3] = KeyValuePair("field4", (4.55m).ToString()); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-27T09:13:52.230

您可以这样做：

```
public static Dictionary<String, String> ConvertAnyToDictionary<T>(T value) where T : class {
    var fields = typeof(T).GetFields();
    var properties = typeof(T).GetProperties();

    var dict1 = fields.ToDictionary(x => x.Name, x => x.GetValue(value).ToString());
    var dict2 = properties.ToDictionary(x => x.Name, x => x.GetValue(value, null).ToString());

    return dict1.Union(dict2).ToDictionary(x => x.Key, x=> x.Value);
} 
```

**编辑**：我正在计算那里的*字段*和*属性*。如果您只使用属性，则可以使用`dict2`.

您可能想看一下and方法`BindingFlags`接收到的参数。`GetFields()``GetProperties()`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T09:14:48.713

```
 var proInfos = student.GetType().GetProperties();

          if(proInfos!=null)
             {
                   Dictionary<string,string> dict= new Dictionary<string, string>();

             foreach (var propertyInfo in proInfos)
             {
                var tv = propertyInfo.GetValue(currentObj, null);

                 if(tv!=null)
                 {
                    if(dict.ContainsKey(propertyInfo.Name))
                        continue;

                    dict.Add(propertyInfo.Name, tv.ToString());
                 }

                }
             } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-27T09:09:39.200

您可以使用现有的序列化程序（Xml 或 JSON）进行序列化，也可以使用反射进行序列化。

以下是如何通过反射获取字段的示例：

[未使用 BindingFlag.Default 从 GetType().GetFields 获取字段](https://stackoverflow.com/questions/1155529/c-sharp-gettype-getfields-problem)

# .net - 热备用 .NET 服务器应用程序

> ID：15107919
> 
> 赞同：1
> 
> 时间：2013-02-27T09:02:18.017
> 
> 标签：.net, redundancy

早些时候，我们在双服务器设置中使用 CORBA 实现热备用冗余。现在我有 .NET 平台来做同样的事情。我想要的是一个双服务器冗余设置，如果其中一台服务器出现故障，另一台应立即接管。这应该对客户透明。我需要的是一个可以开箱即用的中间件。

如果需要更多信息，请告诉我。

谢谢和问候， 阿布舍克

# c# - 在c#中反序列化json数组列表

> ID：15107921
> 
> 赞同：2
> 
> 时间：2013-02-27T09:02:18.927
> 
> 标签：c#, asp.net, json, deserialization

我正在开发一个主要以 C# 作为后端的项目，但我不是经验丰富的 C# 开发人员，所以我无法弄清楚如何修复对象列表的 json 反序列化。以下函数负责反序列化，但出现错误：

```
using System.IO;
using System.Web;
using Raven.Imports.Newtonsoft.Json;

namespace Corina.Web.Handlers
{
    public class JsonRequestHandler
    {
        public T Handle<T>(HttpContextBase context)
        {
            string requestData;

            context.Request.InputStream.Position = 0;
            using (var inputStream = new StreamReader(context.Request.InputStream))
            {
                requestData = inputStream.ReadToEnd();
            }

            return JsonConvert.DeserializeObject<T>(requestData, new Raven.Imports.Newtonsoft.Json.Converters.StringEnumConverter());           
        }
    }
} 
```

`Error`：

> 无法将当前 JSON 数组（例如 [1,2,3]）反序列化为类型“Corina.Web.Views.DocumentViewModel”，因为该类型需要 JSON 对象（例如 {"name":"value"}）才能正确反序列化。
> 
> 要修复此错误，请将 JSON 更改为 JSON 对象（例如 {"name":"value"}）或将反序列化类型更改为数组或实现集合接口的类型（例如 ICollection、IList），例如可以从 JSON 数组反序列化。JsonArrayAttribute 也可以添加到类型中以强制它从 JSON 数组反序列化。

谁能告诉我如何在对象列表而不是对象上进行反序列化？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-27T12:48:51.523

您必须创建此类并创建如下方法：

```
 public class Demo
   {
      public string Name;
      public string Type;
      public string Value;
      public string ChildContentType;
      public string ChildMetadata;
   }

    public void Deserialize()
    {
        string jsonObjString = "[{\"Name\": \"Description\",\"Type\": \"Text\",\"Value\": \"XXX\",\"ChildContentType\": \"Value\",\"C??hildMetadata\": \"YYY\"}]";
         var ser = new JavaScriptSerializer();
         var arreyDemoObj = ser.Deserialize<Demo[]>(jsonObjString);

         foreach (Demo objDemo in arreyDemoObj)
         {
             //Do what you want with objDemo
         }
      } 
```

请注意，您需要添加对[JavaScriptSerializer](http://msdn.microsoft.com/en-us/library/system.web.script.serialization.javascriptserializer.aspx)的引用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T12:26:40.953

不知道您的 json 数据的结构，但我猜您正在使用一些自定义类来反序列化 DataContractJsonSerializer 您可以通过以下方式反序列化

json列表：

```
var testdata = "[{\"name\":\"numToRetrieve\",\"value\":\"3\",\"label\":\"Number of     items       to retrieve:\"},{\"name\":\"showFoo\",\"value\":\"on\",\"label\":\"Show foo?\"},  {\"name\":\"title\",\"value\":\"Foo\",\"label\":\"Foo:\"}]";

DataContractJsonSerializer js = 
new DataContractJsonSerializer(typeof (List<FooDef>));
var stream = new MemoryStream(Encoding.UTF8.GetBytes(testdata));
var foo = js.ReadObject(stream);
stream.Close();

[DataContract]
public sealed class FooDef
{
    [DataMember(Name = "name", IsRequired = true)]
    public string Name { get; set; }

    [DataMember(Name = "value", IsRequired = true)]
    public string Value { get; set; }

    [DataMember(Name = "label", IsRequired = true)]
    public string Label { get; set; }
} 
```

# android - 用滑动显示drawable[]

> ID：15107922
> 
> 赞同：0
> 
> 时间：2013-02-27T09:02:20.740
> 
> 标签：android, android-imageview, android-drawable, apk-expansion-files

我想`drawables`将从扩展文件中恢复的一些显示为`imageView`/`Gallery`或其他可以使用滑动手势的东西，所以我尝试使用：

`imageView.setImageDrawable(myDrawable[]);`

但它返回我，`setImageDrawable(Drawable)`类型中的方法`ImageView`不适用于参数（`Drawable[]`）。

`Drawables[]`在我的情况下显示的正确方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T09:07:22.403

`myDrawable[]`是你的 Drawable 数组。没有一个可绘制的。

并且该方法`imageView.setImageDrawable();`用于单个可绘制作为参数。

所以像这样使用它，

```
imageView.setImageDrawable(myDrawable[index]); // index is a key from your drawable array for particular drawable position 
```

# r - 在变换中缩放和旋转矩阵？

> ID：15107923
> 
> 赞同：1
> 
> 时间：2013-02-27T09:02:22.293
> 
> 标签：r, matrix, geometry, transformation, coordinate-transformation

我有一组 2D 点，我只需要转换（2D）并且我知道转换集的边界。我试图将这些点放在受限边界内。我正在使用 R 进行此转换。

首先，我将原始区域和转换区域的边界点等同起来。我正在使用缩放和旋转矩阵。所以方程是：

新点 = 缩放矩阵 * 旋转矩阵 * 原点。

缩放矩阵和旋转矩阵都是 2x2 矩阵。

但是，当我对边界点执行上述操作并获取旋转和缩放矩阵，然后使用这两个矩阵来获取原始点集的新有界点时，我无法将其限制在边界内。有人可以建议出了什么问题吗？

在下面的代码中，`xnewrange`是变换点`xorigrange`的边界，是原始点的边界，`myorigmat`是包含需要变换的原始点的矩阵。

到目前为止我所做的代码如下：

```
xnewrange<-c(-0.2588,4.036885)

ynewrange<-c(-2.653607,4.069070)

xorigrange<-c(-0.6810824,1.3324875)

yorigrange<-c(-1.419355,2.459154)

myorigmat
         [,1]       [,2]
31  1.3324875 -1.4193554
32  0.5755337  0.4543802
33 -0.3365769  1.0730593
34  0.8752970 -1.1013751
35 -0.6810824  0.9655893
36  0.2439643  0.1838974
37 -0.3893538  0.5326981
38  0.2241310  0.7273958
39 -0.1219151  0.2176043
40  0.8737421  2.4591542

coord<-matrix(c(xorigrange[1],xorigrange[2],yorigrange[1],yorigrange[2]),2,2,byrow=T)

trans_coord<-matrix(c(xnewrange[1],xnewrange[2],ynewrange[1],ynewrange[2]),2,2,byrow=T)

costheta<-sum(trans_coord[,1]*coord[,1])/(sqrt(sum((coord[1,1])^2,(coord[2,1])^2)) * sqrt(sum((trans_coord[1,1])^2,(trans_coord[2,1])^2)))               #using dot product

sintheta<-sqrt(1-(costheta^2))

rotate_mat<-matrix(c(costheta,sintheta,(-sintheta),costheta),2,2,byrow=T)

scale_mat<-(trans_coord) %*% solve(rotate_mat %*% coord) 
```

使用这样得到的 scale_mat 和 rotate_mat 得到新的点如下：

```
newmat<-matrix(0,10,2)

for(i in 1:10){
newmat[i,]<-scale_mat %*% rotate_mat %*% matrix(c(mymat[i,1],mymat[i,2]),2,1,byrow=T)
}

newmat 
```

但 newmat 中的点不受`xnewrange`和的限制`ynewrange`。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-02-27T15:31:33.107

```
a<-c(-0.2588,-2.653607)

b<-c(-0.6810824,-1.419355)

costheta<-sum(a*b)/((sqrt(sum((a[1]^2),(a[2]^2))))*(sqrt(sum((b[1]^2),(b[2]^2)))))

sintheta<-sqrt(1-(costheta^2))

m1output_corner<-matrix(c(a[1],a[2]),2,1)

m1input_corner<-matrix(c(b[1],b[2]),2,1)

rotate_mat<-matrix(c(costheta,sintheta,(-sintheta),costheta),2,2,byrow=T)

mint<-rotate_mat %*% m1input_corner

tran<-matrix(c(-mint[1,1],-mint[2,1]),2,1)

m2output_corner<-matrix(c(4.036885,4.069070),2,1)

m2input_corner<-matrix(c(1.332488,2.459154),2,1)

smat<- m2output_corner / ((rotate_mat%*% m2input_corner)+tran)

scalemat<-matrix(c(smat[1,1],0,0,smat[2,1]),2,2,byrow=T)

newmat<-matrix(0,10,2)

for(i in 1:10){

  newmat[i,]<-(scalemat %*% ((rotate_mat %*% matrix(c(mymat[i,1],mymat[i,2]),2,1,byrow=T)) + tran ))

}

newmat 
```

# git - git：从远程排除文件

> ID：15107926
> 
> 赞同：1
> 
> 时间：2013-02-27T09:02:31.797
> 
> 标签：git, playframework, git-remote

我有一个 Play Scala 应用程序，它有两个遥控器，一个用于源，另一个用于部署。部署需要 ./target 目录，但我想保持源远程清洁构建文件。是否可以只让源远程忽略目标目录？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-27T09:05:37.067

将`.gitignore`文件添加到您的存储库（根），例如：

```
# Ignore target directory
target 
```

编辑：对不起，那里的触发器太快了。这将忽略两个遥控器的目标文件。要在远程部署中包含一些文件，您可能应该使用不同的分支。

一个分支用于部署，一个分支用于源。每当您部署时，将源分支的差异合并到部署分支。在部署分支中，您的`.gitignore`文件可能看起来不同。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T14:57:52.560

如果有一个*部署*分支，它的上游将是您的远程部署分支，并且您不会忽略*build/*目录呢？然后，您必须在每次*部署*
之前 将您的开发分支合并到部署中。

# django - 将博客添加到我的 Django 网站

> ID：15107927
> 
> 赞同：0
> 
> 时间：2013-02-27T09:02:35.160
> 
> 标签：django, blogs

我使用 Django 1.4.3 创建了一个网站。我现在想为其添加一个简单的博客。我在想一个好方法是在我现有的 Django 项目中添加一个新的博客应用程序？是否有任何简单的 Django 博客应用程序可以“加入”到我现有的项目中来实现这一目标？

另外，我已经导出了一个关于 Posterous 的现有博客（一组文件夹和一个 wordpress_export_1.xml 文件。）

如果我能以某种方式将它导入到基于 Django 的新博客中，那就太好了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T09:07:53.853

[https://github.com/nathanborror/django-basic-apps](https://github.com/nathanborror/django-basic-apps)

**django-basic-apps**（以前的 django-basic-blog）有一个博客应用程序（包括帮助所说的博客应用程序的应用程序），这可能是您正在寻找的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-31T07:16:21.853

或者你可以试试[http://gettingstartedwithdjango.com/en/lessons/microblog-kitchen-sink/](http://gettingstartedwithdjango.com/en/lessons/microblog-kitchen-sink/)。这是 Kenneth Love 的免费课程。

# java - 如何将Java静态二维双数组代码转换为C代码

> ID：15107932
> 
> 赞同：0
> 
> 时间：2013-02-27T09:02:40.900
> 
> 标签：java, c

我想将下面的java代码行转换为c代码

```
static double[][] sat_data = new double[19][4];
static double[][] sat_data_notused = new double[19][4];
static double[][] sbas_data = new double[4][2]; 
```

所以请建议我如何用 C 语言在上面声明的正确方法。我的第二个问题是我正在用 java 代码编写 c 代码，它们使用

```
try {

}catch {

} 
```

所以请告诉我c语言中这种函数的替代块

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T09:09:48.960

C 中不允许尝试和捕获。

但第一部分，看看这个：

```
static double sat_data[19][4];
static double sat_data_notused[19][4];
static double sbas_data[4][2]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T09:07:26.033

前三个很简单：

```
static double sat_data[19][4];
static double sat_data_notused[19][4];
static double sbas_data[4][2]; 
```

-block`try`更难，但可能不需要，因为无论原始代码做什么都可能引发异常，很可能会报告您可以正常处理的 C 语言错误。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-27T09:29:58.270

关于 try-catch 块。

C 中的错误处理与 Java 中的**根本**不同，这是 Java 语言的主要“卖点”之一，据称是对 C 等旧语言的改进。因此在这一点上两者之间没有直接的翻译（就像声明的那样）。

*或许类似于一个以英语为母语但不懂其他语言的人，他不能简单地拿一本英语-乌尔都语词典，将他想说的直接逐字翻译成乌尔都语。很可能它会非常错误。他需要知道乌尔都语是如何工作的、语法、礼貌和正式程度、成语等等等等。*

**正如您在代码中看到的那样， **Java会引发异常。****

****C**通常通过从函数返回一个值来指示它是成功还是失败（通常是 0=>SUCCESS 和 !=0=>错误代码，但**并非总是如此**）。一些函数还将全局变量设置为某个值以指示问题。没有标准的方法可以做到这一点，因此您需要查找在 try 块中调用的每个函数的文档，检查 C 代码中每个函数的返回值，并正确处理*。**

*** = 在这种情况下适当可能意味着您需要考虑 C 应用程序的基本架构（并了解 Java 应用程序的架构）。根据复杂性和应用程序，它可能像在屏幕上写入错误消息并退出一样简单，也可能像将错误消息附加到例如日志文件并继续沿某些其他执行路径一样复杂。**

# vhdl - VHDL：如何检查向量的选定位

> ID：15107935
> 
> 赞同：2
> 
> 时间：2013-02-27T09:02:50.423
> 
> 标签：vhdl, boolean-logic, bitvector

我想知道是否有一种方法可以只检查我对 VHDL 中的*std 逻辑*向量感兴趣的位。我的最新尝试如下所示：

```
IF (vectorname = "1-00") THEN

action

END IF; 
```

我在这里只对检查向量的位 3、1 和 0 感兴趣。在这种情况下，位 2 无关紧要。我认为 a`-`会起作用，因为它“不在乎”，但事实并非如此。

有什么方法可以简单地做到这一点？我知道这是可能的`STD_MATCH`，但我想采取不同的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T13:04:35.107

有什么问题`std_match`？恕我直言，这是“正确”的做法，我无法立即想到“采取不同方法”的理由......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-06T14:47:53.537

第一种方式（也由vermaete作为评论回答）：

```
IF vectorname(3) = '1' AND vectorname(1 DOWNTO 0) = "00" THEN
  action
END IF; 
```

...如果它在一个过程中，则上述方法有效。如果没有，请使用以下内容：

```
my_output <= "11111111" WHEN vectorname(3) = '1' AND vectorname(1 DOWNTO 0) = "00" ELSE "00000000"; 
```

第二种方式：

```
SIGNAL bits_i_care_about : STD_LOGIC_VECTOR(2 DOWNTO 0);

bits_i_care_about <= vectorname(3) & vectorname(1 DOWNTO 0);

p_my_process : PROCESS(bits_i_care_about)
BEGIN
  IF bits_i_care_about = "100" THEN
    action
  END IF;
END PROCESS; 
```

# openlayers - 如何在openlayers OSM中获取点的最近位置

> ID：15107938
> 
> 赞同：3
> 
> 时间：2013-02-27T09:03:00.337
> 
> 标签：openlayers, openstreetmap

最近我一直盯着 openlayers 和 openstreetmap 工作。我想要做的是画一条线，然后从那里得到最近的起点和终点的经度和纬度位置。我能够得到以下点的经度和纬度是它的脚本。

```
 <script type="text/javascript">
    var map, layer;
    function init(){
        var
        map = new OpenLayers.Map("map");
        layer = new OpenLayers.Layer.OSM( "Simple OSM Map");

        // allow testing of specific renderers via "?renderer=Canvas", etc
        var renderer = OpenLayers.Util.getParameters(window.location.href).renderer;
        renderer = (renderer) ? [renderer]:OpenLayers.Layer.Vector.prototype.renderers;

        var vectors = new OpenLayers.Layer.Vector("Vector Layer", {
            renderers: renderer
        });
        vectors.events.on({
            'featureselected': function(feature) {
                $('counter').innerHTML = this.selectedFeatures.length;
            },
            'featureunselected': function(feature) {
                $('counter').innerHTML = this.selectedFeatures.length;
            }
        });

        map.addLayers([layer, vectors]);

        line =  new OpenLayers.Control.DrawFeature(
                vectors, OpenLayers.Handler.Path
           );

       line.events.register('featureadded', line, handleMapClick);

        map.addControl(line);

         map.setCenter(
            new OpenLayers.LonLat(-71.147, 42.472).transform(
                new OpenLayers.Projection("EPSG:4326"),
                map.getProjectionObject()
            ), 15
        ); 
    }

  function handleMapClick(evt)
  {
  // create a WKT reader/parser/writer          
  var wkt = new OpenLayers.Format.WKT();

   // write out the feature's geometry in WKT format
   var out = wkt.write(evt.feature);
   alert(out);
  } 
```

但我无法获得它最近的位置。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-04-23T09:51:22.683

您可以使用[Overpass_API](http://wiki.openstreetmap.org/wiki/Overpass_API)获取该行的 BBox 中的所有位置（您可以缓冲它）。如果您的线太长，您可以缓冲（使用 OL）线并使用“按多边形”选择，现在您有一个（希望）小的集合来获得最近的。

# razor - MVC 4 在同一个 HTML 中编辑和插入

> ID：15107940
> 
> 赞同：0
> 
> 时间：2013-02-27T09:03:06.500
> 
> 标签：razor, asp.net-mvc-4

我想使用模式弹出窗口在视图 html 中进行编辑和插入，但我不确定该怎么做？

有没有办法做到这一点？

我不想为插入表单创建新的 html，因为只有名称字段。我认为模态弹出窗口非常适合。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-07-11T18:22:40.980

创建你的 html

```
<div id="demoDialog" title="Dialog Title">

    <!-- Content, form, etc. -->
    <form></form>
</div> 
```

初始化对话窗口

参考：[http ://api.jqueryui.com/1.8/dialog/](http://api.jqueryui.com/1.8/dialog/)

```
// Dialog creation
$("#demoDialog").dialog({
    resizable: false,
    draggable: false,
    autoOpen: false,
    modal: true,
    open: function(){
        $(".ui-widget-overlay").hide().fadeTo(800, 0.8);
    }
});

// Open the dialog
$("#showDialog").click(function(){
    $("#demoDialog").dialog( "open" );
    return false;
}); 
```

您可以使用局部视图来加载您的 html 内容。如果您需要将其提供给另一个表单或处理，请在您的对话框 ID 中以某种方式存储从模式窗口返回的值。

# iphone - unrecognized selector while calling using addTarget

> ID：15107941
> 
> 赞同：-2
> 
> 时间：2013-02-27T09:03:07.523
> 
> 标签：iphone, xcode, ipad, uitableview

I am using addTarget on custom cell button like:

```
[cell.btnGet addTarget:self action:@selector(getLocal:cell:) forControlEvents:UIControlEventTouchUpInside]; 
```

It should be call this method:

```
-(void)getLocal:(id)sender withcell:(GroupListCell *)cell
{
    // code for implement
} 
```

but when I am click the button it is throwing error like:

```
2013-02-27 14:28:56.533 iOSPlayer[704:11303] -[GroupView getLocal:cell:]: unrecognized selector sent to instance 0x72e1290
2013-02-27 14:28:56.534 iOSPlayer[704:11303] *** Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '-[GroupView getLocal:cell:]: unrecognized selector sent to instance 0x72e1290' 
```

What is the issue here?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T09:08:32.947

try this:

```
[cell.btnGet addTarget:self action:@selector(getLocal:withcell:) forControlEvents:UIControlEventTouchUpInside]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T09:09:43.400

That action method is called:

```
getLocal:withcell: 
```

and not:

```
getLocal:cell: 
```

It also doesn't match any of the acceptable action method signatures, which are:

```
- (IBAction)doSomething;
- (IBAction)doSomething:(id)sender;
- (IBAction)action:(id)sender forEvent:(UIEvent *)event; 
```

(see this [Apple guide](https://developer.apple.com/library/mac/#documentation/General/Conceptual/Devpedia-CocoaApp/TargetAction.html))

# c++ - C++ - 相当于 C 中未完全初始化的数组？

> ID：15107942
> 
> 赞同：15
> 
> 时间：2013-02-27T09:03:09.427
> 
> 标签：c++, c

当我将代码从 C 转换为 C++ 时，有时会遇到 C 语言结构，但与 C++ 兼容。通常我想以**最少干扰**的方式转换代码。但我有一个案例让我觉得这很困难：

在 C 中，您可以**声明**一个数组并**初始化**......嗯......它的**一部分**使用*"designators"*，其余部分归零*（编辑：我首先在这里写了“left to randomness”）*：

```
int data[7] = {
    [2] = 7,
    [4] = 9,
}; 
```

不过，这不是有效的 C++ 代码（幸运的是）。所以我将不得不使用不同的策略。

虽然我可以在 C++11 中看到一种非侵入式的方式：

```
static const map<int,int> data = { {2,7}, {4,9} }; 
```

当 C++11 功能尚不可用时，我该怎么办？

*   我可以绕过**运行时初始化**吗？
*   有没有办法以**“文字”**方式初始化类似类型的映射？
*   什么对使用的代码**干扰最小**`data`？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-27T09:49:06.387

好吧，除非数组的大小完全疯狂，否则您总是可以这样做

```
int data[7] = {
    0,
    0,
    7, // #2
    0, 
    9  // #4
    // the rest will be 0-initialized
}; 
```

也可以在编译时工作

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-02-27T09:10:50.613

如果统一初始化不可用，则`std::map<int, int>`可以使用以下方法进行初始化[`boost::assign::map_list_of`](http://www.boost.org/doc/libs/1_53_0/libs/assign/doc/index.html#map_list_of)：

```
#include <boost/assign/list_of.hpp>
static const std::map<int,int> data = boost::assign::map_list_of(2,7)(4,9); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-27T10:09:02.987

`map<int, int>`您可以从 C++11 向后移植（或最小等价物），而不是使用`std:array`Boost.Assign 样式的构建器工具：

```
#include <cstddef>

template<typename T, size_t N> struct array { T data[N]; };
template<typename T, size_t N> struct build_array: public array<T, N> {
   build_array &operator()(size_t i, const T &t) {
      this->data[i] = t;
      return *this;
   }
};

array<int, 7> data_array = build_array<int, 7>()(2, 7)(4, 9);
int (&data)[7] = data_array.data; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-27T09:32:49.900

为什么你不能这样做：

```
int data[7];
data[2] = 7;
data[4] = 9; 
```

看起来非常非常相似 =)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-27T10:02:44.527

如果你不想使用`boost::assign` 你可以创建它的简单模拟：

```
template<class T1, class T2>
std::map<T1, T2> cre(std::map<T1, T2> & m)
{
   return std::map<T1, T2>();
}

template<class T1, class T2>
std::map<T1, T2> & ass(std::map<T1, T2> & m, T1 const & p1, T2 const & p2)
{
   m[p1] = p2;
   return m;
}

std::map<int, int> data = ass(ass(cre(data), 2, 3), 7, 6); 
```

# java - 如何使用变量赋值格式化 Json 文件中的数据

> ID：15107948
> 
> 赞同：0
> 
> 时间：2013-02-27T09:03:21.137
> 
> 标签：java, json, getjson, jsonserializer

我正在使用以下代码将其转换为 Json

```
 JSONObject jsonformatted = (JSONObject)JSONSerializer.toJSON(map);
    FileWriter writer = new FileWriter("myfile.json"); 
```

它工作正常，输出如下

```
 [ {"date":"July 4th", "event":"Independence Day"} ] 
```

但我想要以下格式，在 Json 中使用变量赋值获取值

```
 jsonstr = [ {"date":"July 4th", "event":"Independence Day"} ]; 
```

我如何向其中添加变量

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T09:13:01.907

[您可以使用JSONObject 中的 put 方法](http://www.json.org/javadoc/org/json/JSONObject.html#put%28java.lang.String,%20int%29)添加新数据

```
JSONObject jsonformatted = (JSONObject)JSONSerializer.toJSON(map);

jsonformatted .put("assign ", "some value") 
```

## **编辑**

OP 想用 '=' 替换 ':' 好吧，你不应该这样做，因为它是 JSON 标准。属性和值使用 : 而不是 by = 检查此链接以获取更多信息 [JSON wiki](http://en.wikipedia.org/wiki/JSON#Data_types.2C_syntax_and_example)

# php - == 和 === 有什么区别？

> ID：15107951
> 
> 赞同：0
> 
> 时间：2013-02-27T09:03:40.360
> 
> 标签：php

我正在学习 cakephp，我看到了很多条件，例如：

```
if( x === y){
} 
```

我已经找过了，但我什么也没找到。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T09:05:04.910

`==`会做自动类型转换，`===`不会

这意味着：

`0 == "0"`计算结果为`TRUE`，因为在内部比较字符串和数字时，使用`==`.

`0 === "0"`计算结果为`FALSE`，没有完成类型转换并且整数`0`不等于字符串。

[文档](http://php.net/manual/en/language.operators.comparison.php)和[更多文档](http://www.php.net/manual/en/types.comparisons.php)中的更多信息。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-27T09:05:33.053

`==`比较两个变量的值。如果它们属于不同类型，则将它们转换为通用类型，然后进行比较。

`===`，另一方面，更严格。它也要求两侧的类型相同。

```
php> = 5 == "5"
true
php> = 5 === "5"
false 
```

# sql-server - 如何将我的数据库划分为不同的区域，以便在 SQL Server 中存储不同类型的信息？

> ID：15107956
> 
> 赞同：1
> 
> 时间：2013-02-27T09:04:13.610
> 
> 标签：sql-server

我的数据库已创建，表名如下所示，用于用户信息：

```
DROP TABLE [dbo].[webpages_Membership];
DROP TABLE [dbo].[webpages_OAuthMembership];
DROP TABLE [dbo].[webpages_Roles];
DROP TABLE [dbo].[webpages_UsersInRoles]; 
```

在表命名约定方面，这有点标准吗？如果我现在想制作一些新表，是否也可以将它们命名为

```
admin_application
admin_account 
```

或者当 DBA 想要对表类型进行分组时，他们通常是否将用于保存不同事物的表分配给不同的用户？

我只想了解人们通常如何在应用程序中对表进行分组。在这种情况下，我是否可以假设它们都在一个所有者之下 dbo 或者人们是否将表名单独放置并将它们存储在不同的所有者帐户中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T10:15:23.170

是的，最好的方法是使用模式来划分逻辑分组的表。一个很好的例子是 Adventure 作品数据库，您可以从[CodePlex](http://msftdbprodsamples.codeplex.com/)下载。他们为公司的不同部分提供了几种模式，例如人员、生产、采购、销售等。查看有关 MS 如何设计此数据库的[更多详细信息。](http://msdn.microsoft.com/en-us/library/ms124894%28v=sql.100%29.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T10:03:02.220

看看架构：

```
create schema webpages authorization dbo;
GO

create table webpages.Membership (...
create table webpages.OAuthMembership (...

create schema admin authorization dbo;
GO

create table admin.application (... 
```

过去在 SQL Server 2005 之前，您需要创建数据库用户才能创建架构。但是，从那时起，您可以为组织目的创建模式。模式不能包含模式，所以它是一个单一的级别。模式可以包含任何数据库对象，即表、存储过程等。

模式需要有一个所有者，因此`authorization`上面的一点。在此处指定`dbo`将使其与您在模式中创建它一样`dbo`。

# php - 谷歌地图未使用地理编码显示

> ID：15107963
> 
> 赞同：0
> 
> 时间：2013-02-27T09:04:36.810
> 
> 标签：php, google-maps, joomla2.5

我正在使用以下代码

```
$address ='13%2F2%2C+datta+diagambar+soc%2CPune'

$geocode = file_get_contents('http://maps.google.com/maps/api/geocode/json?address='.$address.'&sensor=false', true);

$output= json_decode($geocode);

$lat = $output->results[0]->geometry->location->lat;

$long = $output->results[0]->geometry->location->lng; 
```

$lat & $long 是空白的。

请给我一些答案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-01-27T04:27:51.223

```
$url="http://maps.googleapis.com/maps/api/geocode/json?address=$addr&sensor=false";

$json = file_get_contents($url);
$array = json_decode($json, true); //note second parameter on true as we need associative 

 $lat=$array['results'][0]['geometry']['location']['lat'];
 $lang=$array['results'][0]['geometry']['location']['lng'];
 $long_name=$array['results'][0]['address_components'][0]['long_name'];
 $long_name=$array['results'][0]['formatted_address']; 
```

所以你可以访问json内容

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T09:29:20.567

```
$geocode=file_get_contents('http://maps.google.com/maps/api/geocode/json?address=13%2F2%2C+datta+diagambar+soc%2CPune&sensor=false');
$outputss= json_decode($geocode);

$lat = $outputss->results[0]->geometry->location->lat;
$long = $outputss->results[0]->geometry->location->lng;
echo $lat." - ".$long; 
```

试试这个

# android - 从 Web 获取 JSON 字符串的 Android 服务

> ID：15107969
> 
> 赞同：0
> 
> 时间：2013-02-27T09:04:52.693
> 
> 标签：android, android-service

我需要实现一个从网站/网络服务接收通知的 Android 应用程序。

我想写一个可以在后台运行的Android服务。为了能够接收消息。我不知道最好的处理方法。每秒轮询一次`n`服务器更好还是有更好的解决方案，例如自定义消息的广播接收器？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T09:25:07.570

使用[GCM](https://developer.android.com/google/gcm/index.html)，其他任何东西都会浪费电力。

当您的服务器告诉 Google 这样做时，这将向您的应用程序发送一个 Intent。

# c# - 我应该使用具有各种端点的 Web 服务还是 wcf 服务？（Web 服务调用同一服务器上的另一个 Web 服务？）

> ID：15107970
> 
> 赞同：1
> 
> 时间：2013-02-27T09:04:55.920
> 
> 标签：c#, wcf, web-services, iis, iis-7

我目前正在开发一个 Web 服务应用程序项目，该项目将在 Windows Server 2008 上的 IIS7 中运行。Web 服务将被各种客户端、服务器外部以及同一服务器内的其他组件调用。（其他 Web 服务和 Windows 服务）

我的观点是 Web 服务的目的是公开功能，以便外部客户端可以调用它。我真的认为在同一台服务器上调用另一个 Web 服务的 Web 服务或在同一台服务器上调用一个 Web 服务的 Windows 服务没有多大意义。如果我错了，请纠正我？

我已经开始研究 WCF，但我很困惑。

执行以下操作是否更合适？

*   代替 Web 服务项目实现 WCF 服务。
*   公开两个端点：
    1）一个，将使用从外部客户端调用的传统 Web 服务绑定公开。
    2）另一个端点，以便内部服务（其他Web服务或Windows服务）可以调用它们，假设更有效，超过安全层，因为这些是已经在服务器上运行的应用程序。

我的方法是正确的还是我把事情复杂化了？

任何可以为我指明正确方向的建议或链接表示赞赏。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T09:44:38.010

> 一个 Web 服务调用另一个 Web 服务？

如果他们有不同的职责，我认为将他们分开是个好主意。您可以更好地分离关注点（更容易与其他项目/代码库共享）、更容易维护和独立部署。

我会使用 WCF 并为不同的消费者提供两个不同的端点，例如使用 net.pipe 在同一服务器上进行通信（如果客户端支持它）和 http 用于外部客户端。

我认为 WCF 为您提供了比旧的 xml Web 服务更多的功能和灵活性，并且配置部分非常好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T13:41:55.320

BasicHttpBinding 将为您提供与外部客户端的最大互操作性。当两种服务都托管在同一台机器上时，命名管道将为您提供最佳效率。

BasicHttpBinding 就像旧的 asmx 和 XML Web 服务。

暴露两个端点是 AOK！

一项服务调用另一项服务并不罕见。

在同一台机器上托管多个服务很常见。在企业中，运行多个 SQL-Server 实例是司空见惯的。当然，这取决于硬件、服务和响应时间。

# php - Magento 核心模块事件

> ID：15107972
> 
> 赞同：0
> 
> 时间：2013-02-27T09:05:04.453
> 
> 标签：php, magento, e-commerce

magento Core 事件中是否有 adminhtml_permissions_user_save_before 事件？

我创建了一个观察者来观察 ADMIN USER before_save 事件因为我想根据角色类型执行特定操作并且我不想编辑核心模块。

编辑：

```
<config>
<modules>
    <Eco_Perm>
        <version>1.0.9</version>
    </Eco_Perm>
</modules>
<global>
    <models>
        <perm>
            <class>Eco_Perm_Model</class>
            <resourceModel>perms</resourceModel>
        </perm>
        <perms>
            <class>Eco_Perm_Model_Mysql4</class>
            <entities>
                <perm>
                    <table>perm/observer</table>
                </perm>
            </entities>
        </perms>
    </models>
    <resources>
        <perm>
            <setup>
                <module>Eco_Perm</module>
                <class>Eco_Perm_Model_Resource_Setup</class>
            </setup>
        </perm>
    </resources>
    <events>
        <catalog_product_save_before>
            <observers>
                <Eco_Perm_Model_Observer>
                    <type>singleton</type>
                    <class>perm/observer</class>
                    <method>testProductedit</method>
                </Eco_Perm_Model_Observer>
            </observers>
        </catalog_product_save_before>

        <adminhtml_permissions_user_save_before>
            <observer>
                <Eco_Perm_Model_Observer>
                    <type>singleton</type>
                    <class>perm/observer</class>
                    <method>updatepermer</method>
                </Eco_Perm_Model_Observer>
            </observer>
        </adminhtml_permissions_user_save_before>

    </events>
</global>
<admin>
    <routers>
        <perm>
            <use>admin</use>
            <args>
                <module>Eco_Perm</module>
                <frontName>perm</frontName>
            </args>
        </perm>
    </routers>
</admin>
<adminhtml>
    <layout>
        <updates>
            <perm>
                <file>perm.xml</file>
            </perm>
        </updates>
    </layout>
    <menu>
        <perm translate="title" module="adminhtml">
            <title>Affiliate</title>
            <sort_order>100</sort_order>
            <children>
                <set_time>
                    <title>Shipper's</title>
                    <action>perm/adminhtml_index</action>
                </set_time>
            </children>
        </perm>
    </menu>
</adminhtml> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T09:48:38.610

我认为您正在寻找的事件是`controller_action_predispatch_adminhtml_permissions_user_save`

查看这篇[文章](https://stackoverflow.com/a/2968705/1957705)。它将帮助您追踪您想要的事件。

# .net - 使用 .NET 4.0 在 asp.net mvc3 中解压缩文件

> ID：15107975
> 
> 赞同：1
> 
> 时间：2013-02-27T09:05:10.423
> 
> 标签：.net, asp.net-mvc-3

我需要上传一个 zip 文件，单击一个按钮并将其解压缩到同一文件夹中，并为该文件夹命名。我不知道从哪里开始，到目前为止我有上传部分：我的观点：

```
 <% using (Html.BeginForm(null, null, FormMethod.Post, new { enctype = "multipart/form-data" }))
   { %>                                       

       <%: Html.ZincValidationSummary() %>  
       <%: Html.ZincValidationErrors() %>           

       <div class="section _100">
         <%: Html.LabelFor(model => model.Name)%>                               
         <div>
           <%: Html.TextBoxFor(model => model.Name, new { maxlength = "100" })%>     
           <%: Html.ValidationMessageFor(model => model.Name)%> 
         </div>
       </div>   

       <div class="section _100">           
         <%: Html.LabelFor(model => model.ScormPackageFile) %>
         <div>
           <br />
           <input type="file" id="ScormPackageFile" name="ScormPackageFile" />
           <%: Html.ValidationMessageFor(model => model.ScormPackageFile)%>
           <br />
         </div>
       </div>
       <div class="actions">
         <div class="actions-right">
           <input type="submit" value="<%: Html.Resource(Resources.Global.Button.Save) %>" class="submit_button" />
         </div>
       </div>  
  <% } %> 
```

在控制器中：这是我不知道该怎么做的地方：

```
 HttpPost]
 public ActionResult Upload(ScormUploadViewModel model)
 {
  if (ModelState.IsValid)
  {
    if (model.ScormPackageFile != null)
    {
      string extractDir = "c:\\TSFPreview\\Zinc\\Web\\Project\\ScormPackages";
      //I should get the above dir from the uploaded file's directory because the                   
        unziped folder will be in the same folder 

    }
    var smallImageUrl = MediaStorageService.UploadFromStream(Zinc.Media.MediaType.Attribute, model.ScormPackageFile.FileName, model.ScormPackageFile.ContentType, model.ScormPackageFile.InputStream);
      //group.SmallImageUrl = smallImageUrl;
   }
   return View(model);
 } 
```

然后我的视图模型：

```
public class ScormUploadViewModel
{
  [LocalizedRequired]
  [DataType(DataType.Text)]
  [LocalizedDisplayName(Resources.Global.Title.Name)]
  public string Name { get; set; }

  [DisplayName("Upload a scorm package")]
  public HttpPostedFileBase ScormPackageFile { get; set; }
} 
```

谢谢我不知道我现在应该添加什么其他标签我刚刚添加了 asp.net mvc 3 标签:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T09:10:45.187

看看 GZipStream，它是框架中内置的 zip 支持之一，在[MSDN 页面上有一个示例](http://msdn.microsoft.com/en-us/library/system.io.compression.gzipstream.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T09:11:20.417

您可以使用一些库进行解压缩。例如[https://dotnetzip.codeplex.com/](https://dotnetzip.codeplex.com/)

# memory-management - 为什么以下 Fortran 代码根据派生类型的内容在堆栈/堆上分配？

> ID：15107976
> 
> 赞同：2
> 
> 时间：2013-02-27T09:05:10.067
> 
> 标签：memory-management, fortran, gfortran

`bar`我不明白为什么如果该字段存在于SIGSEGV 中，则以下程序会出现段`containerType`错误，并且如果将其注释掉则可以正常工作。我在 x86_64 上，同时使用 gfortran-4.4.6 和 gfortran-4.6.3 进行编译。

据我了解，使用指针`containerType`应该强制包含的大数组的分配发生在堆上，但情况似乎并非如此。在可执行文件上运行`valgrind`给了我

```
Warning: client switching stacks?  SP change: 0x7ff000448 --> 0x7fe0603f8
         to suppress, use: --max-stackframe=16384080 or greater 
```

（输出的其余部分与恕我直言无关，但如果需要我可以编辑它）。这向我表明存在堆栈溢出；大概是由于在堆栈上分配了 8*8*8*4000 * 8(bytes per real) = 16384000 字节。

当我注释掉该`bar`字段时，`valgrind`非常高兴。*更*奇怪的是，在 gfortran-4.6.3 下使用 '-O' 编译也会使问题消失（但不是在 gfortran-4.4.6 下）。

要么我偶然发现了编译器错误，要么（更有可能，因为我对 Fortran 还很陌生）我不明白数据的分配位置。有人可以告诉我发生了什么吗？

* * *

有问题的代码：

main.f90:

```
program main 

    use problematicArray
    implicit none    
    type (containerType),pointer :: container
    allocate(container)

    container%foo%arrayData = 17.0
    write(*,*) container%foo%arrayData(7,7,7,100)
    deallocate(container)
    write(*,*) 'Program finished'

end program main 
```

有问题的Array.f90：

```
module problematicArray
    implicit none
    private

    integer, parameter, public :: dim1 = 4000 

    type, public :: typeWith4DArray
        real(8), dimension(8,8,8,dim1) ::  arrayData 
    end type typeWith4DArray

    type :: typeWithChars
        character(4), dimension(:), allocatable :: charData
    end type typeWithChars

    type, public :: containerType
        type(typeWith4DArray) :: foo
        type(typeWithChars) :: bar
    end type containerType

end module problematicArray 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T09:36:18.400

这一定是 gfortran 中的一个错误。我看不出有什么问题。它也适用于 Intel 和 Oracle 编译器。最好将其报告给 gfortran 开发人员。`gfortran 4.8`我只用了 2 天前的行李箱就试了一下。

该错误与堆栈/堆差异无关。`allocate`它只是在声明期间崩溃。它甚至不适用于`stat=`和`errmsg=`设置。

请注意，您可以将模块和主程序放在一个源文件中。

# sql-server - sql地理到dbgeography？

> ID：15107977
> 
> 赞同：18
> 
> 时间：2013-02-27T09:05:26.297
> 
> 标签：sql-server, c#-4.0, gis, geospatial, spatial

也许我错过了一些东西。我有一个“地理”数据类型的 sql server 列。

我想在我的 c# 代码中使用 DbGeography 类型。有什么方法可以将sql的地理转换或转换为dbgeography？

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2013-04-18T15:30:01.170

很抱歉回复晚了 - 但在寻找其他东西时看到了这个。

只需执行以下操作：

```
SqlGeography theGeography;
int srid = 4326; // or alternative

DbGeography newGeography = DbGeography.FromText(theGeography.ToString(), srid); 
```

要反转它：

```
DbGeography theGeography;
SqlGeography newGeography = SqlGeography.Parse(theGeography.AsText()).MakeValid(); 
```

希望有帮助！

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2015-03-22T22:31:03.983

当性能很重要时，应该使用众所周知的二进制文件而不是众所周知的文本：

```
var newGeography = DbGeography.FromBinary(theGeography.STAsBinary().Value); 
```

使用 SRID 会导致过载，如果这很重要的话。在我对 1,000 个相当复杂的多边形的简单测试中，基于二进制的方法比基于文本的方法快 4 倍：

```
* Binary-based conversion
Run 1: 1948
Run 2: 1944
Run 3: 1959
Run 4: 1979
Run 5: 1988
Average: 1963.6

* Text-based conversion
Run 1: 8527
Run 2: 8553
Run 3: 8596
Run 4: 8535
Run 5: 8496
Average: 8541.4 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-05-22T14:29:49.337

如果您没有运行 EF6，则提供的解决方案似乎没问题。使用早期版本没问题，但是使用 EF6，我们不应该引用这个程序集。这让 EF 有点疯狂。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-08-25T19:33:40.340

您必须添加对上述程序集的引用。以下帖子可能会帮助您[链接](http://weblog.west-wind.com/posts/2012/Jun/21/Basic-Spatial-Data-with-SQL-Server-and-Entity-Framework-50)，[link2](http://zogamorph.blogspot.com/2009/01/how-to-load-spatial-data-into-sql.html)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-08-17T04:57:12.673

根据我在 ILSpy 中对 EntityFramework.SqlServer.dll 的阅读，我相信从 SqlGeography 转换为 DbGeography 的最快方法是：

```
var dbGeo = System.Data.Entity.SqlServer.SqlSpatialServices.Default.GeographyFromProviderValue(sqlGeo); 
```

这种方法的优点是不需要二进制转换和解析。它只是使用 SqlGeography 作为内部提供程序值返回一个 DbGeography。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-04-09T03:45:16.053

我发现这是一个可行的解决方案：

```
int coordSys = DbGeography.DefaultCoordinateSystemId; // 4326; 
SqlGeography g = SqlGeography.Point(lat, lon, coordSys);
return DbSpatialServices.Default.GeographyFromProviderValue(g); 
```

没有序列化/转换为会降低性能的字符串 (WKT) 或二进制 (WKB)。

它在 EF 6.1.3、SqlServer 2016 SP1 和 Microsoft.SqlServer.Types.14.0.314.76 上为我工作

# javascript - 使用按钮在 wordpress 中添加这个小 jquery 操作

> ID：15107979
> 
> 赞同：2
> 
> 时间：2013-02-27T09:05:29.410
> 
> 标签：javascript, jquery, css, wordpress, button

我有一段非常小的代码，我想在 word press 中实现：

```
<div id='cont' style="border: 1px solid #000; height: 150px; overflow:hidden;">
    <a href="#" id="button">Mostrar Todo</a>
    <ul>
        <li>an item</li>
        <li>an item</li>
        <li>an item</li>
        <li>an item</li>
        <li>an item</li>
        <li>an item</li> 
        <li>an item</li>
        <li>an item</li>
        <li>an item</li>
        <li>an item</li>
        <li>an item</li>
         <li>an item</li>
        <li>an item</li>
        <li>an item</li>
        <li>an item</li>
        <li>an item</li>

    </ul>
</div>` 
```

我想做的jquery函数

```
$('#button').click(function(){
    $('#cont').animate({height:'500px'}, 500);

}); 
```

演示：

[http://jsfiddle.net/YPAy6/9/](http://jsfiddle.net/YPAy6/9/)

我只需要如何或在何处放置“函数”以及如何从 wordpress 中的帖子中调用它。

任何的想法？真的感谢！

PD：我正在从谷歌的 cdn 加载所有脚本，据我所知，它没有必要加载任何其他 jquery cos wordpress，它的加载也是它自己的版本，无论如何我对此不是 110% 确定。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T10:15:29.283

为了在您的 WP 网站上执行上述 jQuery 功能，您必须先通过`.js`文件加载它。将其复制并另存为，例如，`functions.js`并将其放在名为 /js/ 您的主题目录（/wp-content/themes/[theme-name]）的文件夹中。

为了在您的站点上加载脚本，您可以使用`<script src="..." />`在`<head>`元素中的旧方法，但我强烈建议使用`wp_enqueue_script`。（有关更多信息，请参阅[WP 法典](http://codex.wordpress.org/Function_Reference/wp_enqueue_script)）。

将该功能添加`wp_enqueue_scripts()`到您的主题中`functions.php`：

```
<?php
function site_functions_js() {
    wp_enqueue_script(
        'site_functions',
        get_template_directory_uri() . '/js/functions.js',
        array('jquery')
    );
}
add_action('wp_enqueue_scripts', 'site_functions_js');
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T09:21:05.640

创建一个新的 javascript 文件并将此函数放入该文件中，并将此 Javascript 文件放在 wp_head 函数之后。像这样 ：-

```
<script type="text/javascript" src="<?php bloginfo("template_url"); ?>/js/yourScript.js">   </script> 
```

有关更多详细信息，请使用此链接：-

[http://digwp.com/2009/06/include-jquery-in-wordpress-the-right-way/](http://digwp.com/2009/06/including-jquery-in-wordpress-the-right-way/)

# android - Android运行时链接问题

> ID：15107984
> 
> 赞同：0
> 
> 时间：2013-02-27T09:05:38.887
> 
> 标签：android, makefile, embedded-linux, android-build, android-make

我正在尝试使用 Linux 中的 android 构建系统构建一个应用程序和一个界面 jar 我的应用程序与我的界面有依赖关系，因此我必须在应用程序制作之前准备好界面 jar。

但是我们在使用我们新构建的接口 jar 时遇到了构建/运行时问题。我试图以两种不同的顺序制作应用程序。

案例 1\. 将接口构建为本地模块并将其与 apk 链接为 LOCAL_JAVA_LIBRARIES。案例 2\. 将接口构建为本地模块并将其与 apk 链接为 LOCAL_PREBUILT_STATIC_JAVA_LIBRARIES。

## 以下是主界面和界面的 Android.mk 文件。

1.Andriod.mk主文件： **/source/Android.mk**

========================================

STACK_PATH:= $(调用我的目录)

LOCAL_PATH := $(STACK_PATH)

包括 $(CLEAR_VARS)

包括 $(LOCAL_PATH)/interface/Android.mk

包括 $(CLEAR_VARS)

LOCAL_PATH := $(STACK_PATH)

包括 $(LOCAL_PATH)/application/Android.mk

========================================

**2.接口**Android.mk：/source/interface/Android.mk

 **========================================

LOCAL_PATH:= $(调用我的目录)

包括 $(CLEAR_VARS)

LOCAL_SRC_FILES := $(call all-subdir-java-files, src)

LOCAL_MODULE := 我的界面

LOCAL_MODULE_TAGS := 可选

LOCAL_MODULE_CLASS := JAVA_LIBRARIES

LOCAL_JAVA_RESOURCE_DIRS := src

包括 $(BUILD_JAVA_LIBRARY)

$(call dist-for-goals, droidcore, $(full_classes_jar):MyInterface.jar)

========================================

## 以下是案例 1 中应用程序的 Android.mk 文件。

应用 **Android.mk：/source/application/Android.mk**

========================================

TOP_LOCAL_PATH:= $(调用我的目录)

LOCAL_PATH:= $(TOP_LOCAL_PATH)

包括 $(CLEAR_VARS)

LOCAL_SRC_FILES := $(调用 all-subdir-java-files)

LOCAL_PACKAGE_NAME := MyApplication

LOCAL_JAVA_LIBRARIES := MyInterface

包括 $(BUILD_PACKAGE)

包括 $(BUILD_MULTI_PREBUILT)

========================================

构建成功完成。但是在尝试运行此应用程序时，它显示此错误。I/dalvikvm(XXXX)：解析 Lcom/test/example/application 失败；接口 XXX 'Lcom/test/example/interface;' W/dalvikvm(XXXX): 类 'Lcom/test/example/application;' 的链接 失败的

## 以下是案例 2 中应用程序的 Android.mk 文件。

应用程序 Android.mk **/source/application/Android.mk**

========================================

TOP_LOCAL_PATH:= $(调用我的目录)

LOCAL_PATH:= $(TOP_LOCAL_PATH)

包括 $(CLEAR_VARS)

$(shell (cp $(LOCAL_PATH)/../out/target/common/obj/JAVA_LIBRARIES/Interface_intermediates/classes-jarjar.jar $(LOCAL_PATH)/applications/libs/MyInterface.jar ))

LOCAL_STATIC_JAVA_LIBRARIES += 我的界面

LOCAL_SRC_FILES := $(调用 all-subdir-java-files)

LOCAL_PACKAGE_NAME := MyApplicationss

LOCAL_PREBUILT_STATIC_JAVA_LIBRARIES += MyInterface:libs/MyInterface.jar

包括 $(BUILD_PACKAGE)

包括 $(BUILD_MULTI_PREBUILT)

========================================

这导致如下构建错误。

**build/core/base_rules.mk:166: * source/applications: MODULE.TARGET.JAVA_LIBRARIES.MyInterface 已经由 source/interface 定义。停止。**

但是当它们单独构建而不使用构建系统时，这个问题就不存在了。应用程序也可以正常运行。

* * *

当使用eclipse将接口构建到Myinterface.jar，并在Linux中使用这个接口jar（通过静态链接）构建application-apk时，应用程序运行顺利。

我的 Android.mk 文件有问题吗？请帮忙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-04-28T08:28:09.410

我认为你应该在和`LOCAL_PREBUILT_STATIC_JAVA_LIBRARIES`之间`include $(BUILD_PACKAGE)``include $(BUILD_MULTI_PREBUILT)`

查看[另一个答案](https://stackoverflow.com/questions/2598293/adding-a-external-jar-reference-in-android-mk/11302460#11302460)。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2014-07-21T08:28:52.890

按照链接获取 Android 构建系统详细信息 [http://www.kandroid.org/online-pdk/guide/build_system.html](http://www.kandroid.org/online-pdk/guide/build_system.html)**

# iphone - 如何在iphone中多次调用json url？

> ID：15107985
> 
> 赞同：1
> 
> 时间：2013-02-27T09:05:41.727
> 
> 标签：iphone, ios, json

您好，我正在开发一个应用程序作为货币转换器，我有一个 URL，它将只返回一种国家货币，但我的模块看起来像如果用户选择一个国家，那么我需要显示多个国家的货币转换器值列表，所以我需要不止一次给 josn 打电话。
代码如下：

```
 responseData = [[NSMutableData data] retain];
    ArrData = [NSMutableArray array];
    NSString *strURL = [NSString stringWithFormat:@"http://rate-exchange.appspot.com/currency?from=%@&to=%@&q=1",strtablbase,strto];
    NSURL *url = [NSURL URLWithString:strURL];
    NSURLRequest *request = [NSURLRequest requestWithURL:url];
    [[NSURLConnection alloc] initWithRequest:request delegate:self]; 
```

-(void)connectionDidFinishLoading:(NSURLConnection *)connection { [连接释放]; NSString *responseString = [[NSString alloc] initWithData:responseData encoding:NSUTF8StringEncoding]; [响应数据发布]；

```
results = [responseString JSONValue];
livevalues=[responseString JSONValue]; 
```

使用上面的代码，我得到一个国家的值，但我需要以不同的方式传递一个 strto 值可能吗？如果是，请提出建议并帮助我解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T09:17:43.623

当然可以传递不同的值。就像你已经做的那样，你可以一个接一个地开始连接。如果服务器属于你，我会执行一个请求，一次返回所有费率。它节省了发送和接收请求的时间。如果您在一个请求中获得 100 字节或 500 字节，这真的无关紧要（等待时间）。

否则你需要调用很多请求。就像说的那样，您可以一个接一个地调用，甚至可以同时调用 2-3 个请求。您可以实现自己的机制，也可以使用`NSOperationQueue`专门针对 Apple 的许多请求而制定的机制。

有关更多信息[https://developer.apple.com/library/ios/#documentation/Cocoa/Reference/NSOperationQueue_class/Reference/Reference.html](https://developer.apple.com/library/ios/#documentation/Cocoa/Reference/NSOperationQueue_class/Reference/Reference.html)

我要你指出方法（NSURLConnection的）

```
+ (void)sendAsynchronousRequest:(NSURLRequest *)request queue:(NSOperationQueue *)queue completionHandler:(void (^)(NSURLResponse*, NSData*, NSError*))handler 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T09:12:52.790

是的，您可以使用 NSOperation Queues 来调用不同的 URL，或者如果您使用的是 Asihttprequest，此[链接](https://stackoverflow.com/questions/6571947/multiple-requests-on-asihttprequest/6926761#6926761)可能对您有用:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-27T09:29:56.423

```
responseData = [[NSMutableData data] retain];

NSMutableArray *array = [[NSMutableArray alloc] init];
    [array addObject:@"country1"];
    [array addObject:@"country2"];

    for (NSString *urlString in array) {
strtablbase = [NSString stringWithFormat:@"%@",urlString];
    NSString *strURL = [NSString stringWithFormat:@"http://rate-exchange.appspot.com/currency?from=%@&to=%@&q=1",strtablbase,strto];
    NSURL *url = [NSURL URLWithString:strURL];
    NSURLRequest *request = [NSURLRequest requestWithURL:url];
    [[NSURLConnection alloc] initWithRequest:request delegate:self];
} 
```

尝试这个..

# javascript - 使用删除作为附加不起作用

> ID：15107986
> 
> 赞同：1
> 
> 时间：2013-02-27T09:05:44.083
> 
> 标签：javascript, jquery

这是我附加值的方式：

```
$('<div>someText</div>').appendTo(self); 
```

这就是我要删除它的方式：

```
$(self).remove('<div>someText</div>'); 
```

附加有效，删除无效。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T09:09:33.940

API [http://api.jquery.com/remove/](http://api.jquery.com/remove/)说需要选择器。

~~试试`$(self).remove('> div');` 这将删除 div 的第一个孩子。~~

您可以使用`$(self).filter('div:contains("someText")').remove();`删除具有特定内容的 div 或`$(self).find('> div').remove();`删除 div 的第一个孩子。

编辑：删除了我未经测试发布的第一个版本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T09:10:54.147

该`.remove()`函数采用一个选择器来过滤已经匹配的元素，而不是匹配*其中*的元素。你想要的是这样的：

```
$(self).find('div:contains(someText)').remove(); 
```

这将找到一个包含任何元素内部`<div>`文本的元素，然后将其删除。`someText``self`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-27T09:20:19.397

它很可能与自我的范围有关。由于您已将其命名为 self 我假设您在 click 事件上使用 $(this) 获取此变量。如果是这种情况，并且您想调用 remove 方法，则只能在同一个函数中执行此操作。否则，您需要将元素存储在变量中或提供另一个选择器来访问它。

```
Example:

<div class="div1"></div> 
```

这将是带有点击事件的 div

```
$(document).ready(function(){
    var self = null;
    $('.div1').click(function(e){
         self = $(this);
         var itemToAdd = '<div>SomeText</div>';
         $(itemToAdd).appendTo(self);
    });
    // to remove it
    // this will remove the text immediately after it's placed 
    // this call needs to be wrapped in a function called on another event
    $('.div1').find('div:contains(someText)').remove();      
}); 
```

# php - PHP NTLM 身份验证到 Active Directory + 保持会话

> ID：15107988
> 
> 赞同：0
> 
> 时间：2013-02-27T09:05:49.400
> 
> 标签：php, curl, active-directory, ntlm

我有基于 NTLM (Active Directory) 的服务，我需要编写一个 PHP 应用程序。通常，用户使用 Activre Directory 凭据登录网站，这没问题。但我想做的是让他们在 PHP 编写的站点中输入他们的凭据，下一步将使用 cURL 对用户进行身份验证，以访问他们通常登录的基于 Active Directory 的站点。

这部分很难。然后，我需要保持通过 PHP cURL 脚本对基于 Active Directory 的站点进行身份验证的用户会话，以便以后再次使用它们（CRON 查询站点以确定它已更改并在发生这种情况时自动执行一些操作，通常用户已经这样做了手动）。为了在此更改发生时不存储他们的凭据以再次进行身份验证，我需要以某种方式将 NTLM 会话存储在 PHP cURL 站点中，以存储通过此 PHP cURL 站点对该站点进行身份验证的每个用户。我的问题是：这可能吗？

提前致谢。

@威廉穆德

您发布的代码实际上进行了 cookie 存储，但这不是我的意思，因为我已经这样做了（抱歉之前没有写过）。到目前为止我得到的是：

```
 $cookie_file_path = dirname(__FILE__) . '/cookies.txt';
        $ch = curl_init();

        //==========================================================================
         curl_setopt($ch, CURLOPT_USERPWD, $username. ':' . $password);
         curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
         curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, 0);
         curl_setopt($ch, CURLOPT_USERAGENT, $user_agent);
         curl_setopt($ch, CURLOPT_URL, $url);
         curl_setopt($ch, CURLOPT_SSL_VERIFYHOST, 0);
         curl_setopt($ch, CURLOPT_HTTPAUTH, CURLAUTH_ANY);
         curl_setopt($ch, CURLOPT_COOKIEFILE, $cookie_file_path);
         curl_setopt($ch, CURLOPT_COOKIEJAR, $cookie_file_path);
         curl_setopt($ch, CURLOPT_FOLLOWLOCATION, true);
         curl_setopt($ch, CURLINFO_HEADER_OUT, true);
         curl_setopt($ch, CURLOPT_FAILONERROR, 0);
         curl_setopt($ch, CURLOPT_MAXREDIRS, 100);
        //==========================================================================
        $ret = curl_exec($ch); 
```

通过使用 options`CURLOPT_COOKIEFILE`和`CURLOPT_COOKIEJAR`，cURL 将 cookie 存储在本地文件“cookies.txt”中。问题是，当我评论`CURLOPT_USERPWD`选项时（在验证和存储 cookie 之后，理论上我有会话），我无法授权网站。也许它会重新初始化 NTLM 握手授权，并期待用户名和密码，我不想存储。

我只想存储会话信息，以提供服务此会话信息并省略第二次身份验证，但 cURL 似乎没有从 cookie 文件中获取此数据，并使用从服务发送给我的不相关数据**重写**它作为对**未授权**访问请求的响应.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T09:39:49.803

嗯，是的，你可以

```
$ch = curl_init('http://www.google.com/');
curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
// Get headers too with this line
curl_setopt($ch, CURLOPT_HEADER, 1);
$result = curl_exec($ch);
// Get cookie
preg_match('/^Set-Cookie:\s*([^;]*)/mi', $result, $m);

var_dump(parse_url($m[1]));

// And then of course store it somewhere :-) 
```

如此处所见，[如何将 php curl 中的 cookie 获取到变量中](https://stackoverflow.com/questions/895786/how-to-get-the-cookies-from-a-php-curl-into-a-variable)

# php - php isset cookie 问题

> ID：15107990
> 
> 赞同：0
> 
> 时间：2013-02-27T09:05:55.593
> 
> 标签：php, cookies, setcookie

简短：由于某种原因，某些浏览器/计算机未检索到 cookie '_sid'。Long：我正在使用 3 个文件。/index.php、/scripts/login.php 和 /iframes/register.php。现在，当输入登录信息时，会发生一堆标准的事情，并且用户已登录。设置了一个名为 '_sid' 的 cookie，并将值存储在 mySQL 表中。

登录.php：

```
setcookie("_sid", $sid, 0, '/'); ?> 
```

现在所有的电脑都得到了这个cookie——我已经测试了超过15台，都通过了。只是想向您展示我是如何设置 cookie 的。

问题出在 index.php 中：

```
<?php
$username="x"; $password="y"; $database="z";
mysql_connect(localhost,$username,$password);

@mysql_select_db($database) or die( "Unable to select database");
$loggedin=false; $team="none";
if(isset($_COOKIE['_sid'])){  //error happens here
    print_r("test");
    $session_id=$_COOKIE['_sid']; 
```

现在错误发生在注释行上。isset 返回 false。现在通常这将是某种有用的指标。然而...

第三个文件 register.php 赋予用户注册其他人的能力（无关）。需要注意的重要一点是文件的开头*与 index.php 完全相同。*

```
<?php
$username="x"; $password="y"; $database="z";
mysql_connect(localhost,$username,$password);

@mysql_select_db($database) or die( "Unable to select database");
$loggedin=false; $team="none";
if(isset($_COOKIE['_sid'])){
    print_r("test");
    $session_id=$_COOKIE['_sid']; 
```

但是，此文件*有效*。没错，isset 有效。该文件也适用于所有 15/15 计算机。

现在只是为了让这一切变得更加混乱，index.php 可以在 15 台计算机中的大约 10 台上运行。该错误总是发生在 mac（chrome、ff、safari）和 Linux（ff 测试，但也可以假设 chrome）。它适用于大多数窗口（7+8 使用 chrome，ff）。但是，当使用相同的双胞胎计算机（在虚拟操作系统上）时，一台计算机工作，另一台失败（使用 ff）。

我已经解决这个问题两天了，真的不知道该怎么办......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T09:15:12.113

当您设置 cookie 时，浏览器会将新请求的标头添加到同一域。

您必须验证 login.php 在 index.php 之前被浏览器调用，而不是在同一个请求中。

1.  login.php - 浏览器不发送 cookie，但接收设置它的请求
2.  index.php - 浏览器发送 cookie

如果在你的 index.php 中你有

```
<include "login.php"> 
```

这绝对行不通。

# magento - 如何查找访客用户购物车详细信息？

> ID：15107991
> 
> 赞同：1
> 
> 时间：2013-02-27T09:05:57.077
> 
> 标签：magento

我想在 magento 中获取来宾用户购物车的详细信息。假设用户来到 Magento 网站并将产品添加到购物车。然后再次来到相同的产品，他想再次将产品添加到购物车。现在我想检查同一个访客用户是否已经在购物车中拥有该产品。

我正在使用以下内容获取来宾用户详细信息`$session=Mage::getModel('core/session');`

使用上面的代码如果我使用`print_r(session)`，那么我会得到一个访问者 ID。

如何使用此访客 ID 加载结帐购物车集合以检查他是否已经在购物车中拥有该产品。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T09:31:47.970

要获取存储在购物车中的物品，您可以使用：

`Mage::getSingleton('checkout/session')->getCart()->getItems()`

然后您可以遍历所有项目并检查 id 是否已经存在。

# c# - 性能分析 ADO.NET 和实体框架

> ID：15107992
> 
> 赞同：39
> 
> 时间：2013-02-27T09:06:03.697
> 
> 标签：c#, performance, entity-framework, ado.net

哪一个提供更好的性能？ADO.NET 或实体框架。

这是我要分析的两种方法。

**ADO.NET 测试方法**

```
public void ADOTest()
{
    Stopwatch stopwatch = Stopwatch.StartNew();
    using (SqlConnection con = new SqlConnection(connection))
    {
        string Query = "select * from Product ";
        SqlDataAdapter da = new SqlDataAdapter(Query, con);
        DataSet ds = new DataSet();
        con.Open();
        da.Fill(ds);
        DataView dv = ds.Tables[0].DefaultView;
    }
    stopwatch.Stop();
    Console.WriteLine("ADO.NET Time Elapsed={0}", stopwatch.Elapsed);
} 
```

**实体框架测试方法**

```
public void EFTest()
{
    Stopwatch stopwatch = Stopwatch.StartNew();
    var list = _OnlineStoreEntities.Products.ToList();
    stopwatch.Stop();
    Console.WriteLine("Entity Framework Elapsed={0}", stopwatch.Elapsed);
} 
```

**结果在第一次执行**

当我运行上述方法超过 100 次时。平均执行时间如图所示：

![第一个结果](../Images/90f68082eb3d7094bac217224ca7b38e.png)

无论实体框架花费超过 4 毫秒，ADO.NET 只花费了 2 毫秒。

**导致第二次执行**

当我一次又一次地运行这个方法时。ADO.NET 和 EF 之间的平均执行时间并不多：

![第二个结果](../Images/4a9385411693dd94a8530c2a5499c697.png)

**问题**

1.  我认为 EF 在第一次执行时性能非常差 那么我们为什么要使用 EF？
2.  为什么 EF 第二次执行比第一次执行快？

* * *

## 回答 #1

> 赞同：61
> 
> 时间：2013-02-27T09:14:56.890

1.  第一次 EF 将元数据加载到内存中，这需要一些时间。它从 edmx 文件或源代码（如果您首先使用代码）构建模型的内存表示。实际上 EF 是在 ADO.NET 之上构建的，所以它不能更快​​。但它使开发*速度*更快。并提高代码的*可维护性*。
2.  见 1

查看 msdn 文章[性能注意事项（实体框架）](http://msdn.microsoft.com/en-us/library/cc853327.aspx)

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2013-02-27T09:30:35.630

*   1) EF在使用数据库时让很多事情**变得更加舒适。**引擎盖下发生了很多事情，否则您将不得不手动编码。

例如，我的第一个更大的项目之一是处理大量数据，我使用 ADO.NET 实现了访问层。这弥补了整个项目的四分之一甚至三分之一。

以我今天对 EF 的经验，我几乎可以摆脱所有这些！我只是让我手工编写的许多复杂代码完全没有必要。我们在这里谈论数千行。

*   2）这里有两个主要原因。首先，EF 建立在使用 ADO.NET 之上。这意味着 EF 所做的任何事情都会为 ADO 所做的事情增加更多开销。其次（非常）简单地说，JIT 编译器在代码执行时第一次编译代码。这包括内存分配和各种初始化。

这意味着您多次运行的代码从第二次开始运行得更快。另一方面，如果您只执行一次 EF 查询，您将不会从这些初始化中获益。

在现实世界的应用程序中，您可能会尝试进行一些优化，例如使用[Compiled Queries](http://msdn.microsoft.com/en-us/library/bb896297.aspx)。性能方面，这将对您有很大帮助，因为现在您的查询不需要在每次运行时都准备和编译一次，而只需一次。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2017-01-27T16:04:09.453

在微软工作时，我写了一篇比较两者性能的博文。似乎它现在正在迁移中，所以你可能需要去互联网档案馆找到它......

我们非常注重确保使用 EF 的性能成本不可怕，在 V1 中不完美但相当可用。

近 10 年后，EF 团队在提高性能方面做得很好，特别是减少了不良情况，但通过设计，实体框架位于 ADO.Net 之上。因此，如果您的主要标准是原始性能，那么您应该选择 ADO.Net，并使用手动优化的 SQL。

话虽如此，许多其他优秀的开发人员并没有制作出最好的 SQL。实体框架将它们与编写查询隔离开来，并使用良好的实践来产生相当好的查询。

Entity Framework 的主要优势是提供更高级别的抽象来处理数据，将应用程序开发人员与底层数据模型隔离开来。因此，您将使用 EF 来提高生产力，编写更少的数据访问代码；您仍然可以微调特定的查询或数据操作，而不会丢失使非性能关键代码编程更容易的抽象，例如，这是任何业务应用程序的最大部分。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2020-03-28T12:28:15.013

**我认为 EF 在第一次执行时性能非常差 那么我们为什么要使用 EF？**

1.  数据访问层的自动生成代码
2.  减少开发时间和成本
3.  也允许 LINQ 查询。

**为什么 EF 第二次执行比第一次执行快？**

是的。EF 最重要的特性之一是**缓存**。

# php - 返回多行数据时出现ajax错误

> ID：15107994
> 
> 赞同：0
> 
> 时间：2013-02-27T09:06:04.443
> 
> 标签：php, javascript, sql, ajax, database

我正在尝试通过 AJAX 调用从我的数据库中返回多行数据。它成功返回一行，但有不止一行，即使它成功检索数据，我也会收到错误消息。我已将其范围缩小到服务器端问题，这很可能存在于我的 PHP 中。这是我正在使用的 PHP 函数：

```
 public function get_case_studies($conn) {

    $v_sql_str = <<< END_SQL
        SELECT 
            name,
            title,
            content,
            location
        FROM case_studies
        WHERE is_active_flag = 1 AND is_deleted_flag = 0  
    END_SQL;

    try {
        $sth = $conn->prepare($v_sql_str);
        $sth->execute();
        }
        catch (PDOException $e) {
            $v_errormsg=$e->getMessage();
            return <<< END_HD
            {   
                "status":"FAIL" ,
                "error": "db_exception: Could not select case studies from database",
                "errorno": "1003" ,
                "errortype":  "SYS",
                "usermsg": "SQL=$v_sql_str, Error = $v_errormsg"
            }
    END_HD;
    }

    $v_json = "\"data\" : [";
    $n=0;
    $v_QT="\"";         
    while ($result = $sth->fetch(PDO::FETCH_OBJ)) {

        if ($n > 0) { $v_json = $v_json . ",";};
        $v_flags = "";

        $v_json = $v_json . "{ "
        . $v_QT .   "name" .                    $v_QT . ":" .       $v_QT . $result->name .                                 $v_QT . "," 
        . $v_QT .   "title" .                   $v_QT . ":" .       $v_QT . $result->title .                                $v_QT . ","
        . $v_QT .   "content" .                 $v_QT . ":" .       $v_QT . base64_decode($result->content) .               $v_QT . ","
        . $v_QT .   "location" .                $v_QT . ":" .       $v_QT . $result->location .                             $v_QT 
        . "}" ;
        $n++;
    }
    $v_json = $v_json . "] ";

    $sth->closeCursor();

    $v_json1 = "{ \"status\" : \"OK\", " . $v_json . " }";
    return $v_json1;

} 
```

这是我的 AJAX 调用：

```
 $.ajax({
            type: "POST",
            url: "ajax.php",
            data: { module: "case_studies.php", action: "get_case_studies" }, 
            success: function(json_data) {
                ui_case_studies.case_list = json_data.data;
                alert(JSON.stringify(json_data.data));
            },
            error: function (a, b, c) {
                console.log(JSON.stringify(a));
                alert("Something went wrong while retreiving the case studies, please contact your database administrator.");
                //alert(JSON.stringify(a));
                //alert(b);
                //alert(c);
            }
        }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T09:29:09.320

[`json_encode`](http://php.net/manual/en/function.json-encode.php)创建 JSON 时最好使用它。还要确保您是否正确解析了您的`Ajax' onSuccess`部分中返回的数据。

## PHP部分：

```
$result = array(); 
$i = 0;

while ($result = $sth->fetch(PDO::FETCH_OBJ)) {
    $result[$i]['name'] = $result->name;
    $result[$i]['title'] = $result->title;
    $result[$i]['content'] = base64_decode($result->content);
    $result[$i]['location'] = $result->location;
    $i++;
}

return json_encode($result); 
```

* * *

## JS部分：

```
new Ajax.Request(url,
{
    method: 'post',
    onSuccess: function(transport) 
    {
        var response = transport.responseText || false;

        if (response !== false) {
            var result = JSON.parse(response);

            alert(result[1]['name']); // etc.
        }
    }
}); 
```

* * *

## 编辑：

您没有提供其他信息。有错误不是有用的答案。所以，这里有一些东西可以在调试时帮助你。

## PHP 响应格式：

```
[
  {
    "name": "name0",
    "title": "title0",
    "content": "content0",
    "location": "location0"
  },
  {
    "name": "name1",
    "title": "title1",
    "content": "content1",
    "location": "location1"
  },
  {
    "name": "name2",
    "title": "title2",
    "content": "content2",
    "location": "location2"
  }
] 
```

## 解析：

```
var response = '[{"name":"name0","title":"title0","content":"content0","location":"location0"},{"name":"name1","title":"title1","content":"content1","location":"location1"},{"name":"name2","title":"title2","content":"content2","location":"location2"}]';
var result = JSON.parse(response);

alert(result[1]['name']); 
```

# javascript - 调用方法来展开和折叠部分

> ID：15107995
> 
> 赞同：0
> 
> 时间：2013-02-27T09:06:04.460
> 
> 标签：javascript, jquery, html

我正在使用`Simple-Expand` [http://redhotsly.github.com/simple-expand/](http://redhotsly.github.com/simple-expand/)展开和折叠 HTML 页面中的部分。

jQuery代码：

```
$(function () {
    $('.hello').simpleexpand();

});

$(function () {
    $('.bye').simpleexpand();

}); 
```

HTML：

```
<a href='' id='hello' class='hello'> Hi  </a>

            <a href='' id='bye'  class='bye'> Bye  </a> 
```

分区：

```
<div class="content">
  Hello
</div>

<div class="content">
  Bye
</div> 
```

当我单击带有类的链接时，应该只调用带有文本`hello`的标签，当我点击链接时，应该显示带有文本的标签。我怎样才能做到这一点 ？`DIV``Hello``Bye``DIV``Bye`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T09:14:30.430

这一切都在您发布的文档中：http: [//sylvain-hamel.github.io/simple-expand/](http://sylvain-hamel.github.io/simple-expand/)

您必须在调用该`simpleexpand`方法时指定选项

例如 ：

```
$(function () {
    $('.hello').simpleexpand({'defaultTarget': '.helloDiv'});

});

$(function () {
    $('.bye').simpleexpand({'defaultTarget': '.byeDiv'});

}); 
```

和你的 html ：

```
<div class="helloDiv">
  Hello
</div>

<div class="byeDiv">
  Bye
</div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T09:14:28.000

尝试这个：

jQuery代码：

```
$(function () {
    $('a').click(function(){
        var id = $(this).attr('id');
        var divId = 'div_' + id;
        $('#'+divId).simpleexpand();
     });
}); 
```

HTML：

```
<a href='' id='hello'class='hello'> Hi  </a>
<a href='' id='bye' class='bye'> Bye  </a> 
```

分区：

```
<div class="content" id='div_hello'>
  Hello
</div>

<div class="content" id='div_bye'>
  Bye
</div> 
```

# android - 关于信号强度的 RIL 日志

> ID：15107996
> 
> 赞同：2
> 
> 时间：2013-02-27T09:06:06.080
> 
> 标签：android, android-emulator, at-command, ril

当我运行 android 模拟器时，我将其作为信号强度的无线电日志：

```
D/RIL     (   32): onRequest: SIGNAL_STRENGTH

D/AT      (   32): AT> AT+CSQ

D/AT      (   32): AT< +CSQ: 7,99

D/AT      (   32): AT< OK
E/RILC    (   32): invalid response length
D/RILJ    (  216): [0062]< SIGNAL_STRENGTH error: com.android.internal.telephony.CommandException: INVALID_RESPONSE 
```

有人可以告诉我为什么会出现以下响应吗？

```
E/RILC    (   32): invalid response length

D/RILJ    (  216): [0062]< SIGNAL_STRENGTH error: com.android.internal.telephony.CommandException: INVALID_RESPONSE 
```

由于 AT 命令及其响应很好。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-06T05:31:18.017

I solved the problem. In case any one else in the future has the same problem heres the solution:

When i query the modem with AT command for signal strength it sent back 2 integer values.

Check the ril.cpp file, in the function responseRilSignalStrength, the implementation is for the new ril. The ril i used was the old one.

Therefore, the reference-ril reports signal strength as 2 integers. This is marked as deprecated in responseRilSignalStrength() in libril/ril.cpp of the version 2 sources, and this part has just been removed in the ics source. When I put it back in, the error disappeared.

I found this answer from [https://groups.google.com/forum/?fromgroups=#!topic/android-x86/zEPIfsQAuYg](https://groups.google.com/forum/?fromgroups=#!topic/android-x86/zEPIfsQAuYg)