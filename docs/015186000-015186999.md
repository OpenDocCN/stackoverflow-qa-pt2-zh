# StackOverflow 问答 15186000-15186999

# php - 将 jQuery 脚本传输到外部文件

> ID：15186003
> 
> 赞同：0
> 
> 时间：2013-03-03T13:10:51.503
> 
> 标签：php, jquery, file, joomla, external

我直接在 html 文件中编写了脚本，它添加了一些分页功能，它工作得很好，直到它在 HTML 文件中，但我只是不知道如何将此脚本传输到外部 js 文件并从那里运行。所以继承人的html部分：

```
<form id="moredisplay" method="get" style="display:inline;">
            <input class="hiddeninteger" type="hidden" name="loadmore" value="">
            <!--LIMIT CHANGER-->
            <input type="checkbox" title="" id="limitcheck" name="limit" value="<?php echo $vsego;?>" style="display:none;">
            <input type="checkbox" title="" id="skipforfcheck" name="skip_items" value="" style="display:none;">
            <input type="checkbox" title="" id="skipbackcheck" name="skip_items" value="" style="display:none;">
            <button type="submit" title="back" value="" id="rerurn_more_items"/>back</button>
            <button type="submit" title="next" value="" id="skip_more_items"/>fowards</button>
            <button type="submit" title="more content" value="<?php echo $vsego;?>" id="limit" name="limit" onclick=""/>more content</button>
            <script>
                var currentval = jQuery('.scippeditems').attr('value');
                jQuery('#skip_items,#rerurn_items').attr('value',currentval);
                var valuenumber = jQuery('#skip_items').val();
                if (valuenumber == 0){
                jQuery('#rerurn_items').attr('disabled', 'disabled').css({'opacity':'0.6'});
                }
                var itemsshow = jQuery('#limit').val();
                var pagescount = (jQuery('#skip_items').attr('value'))/(jQuery('#limit').attr('value'));
                if(pagescount >=5){jQuery('#skip_items, #limit').attr('disabled', 'disabled').css({'opacity':'0.6'});}//COUNT PAGES AND LOCK NEXT
                function changepageforf(){
                var elem = document.getElementById("skip_items");
                var currentval = elem.value;
                elem.value = parseInt(currentval) + 24;}//parseInt(itemsshow);}
                function changepageback(){
                var elem = document.getElementById("rerurn_items");
                var currentval = elem.value;
                elem.value = parseInt(currentval) - 24;}//parseInt(itemsshow);}
                </script>
                <script>
                jQuery(document).ready(function(){
                jQuery('#limit').click(changelimit);//RUN FUNCTION ON LIMIT CHANGE
                if ( document.location.href.indexOf('&limit') > -1 ) {//IF URL CONTAINS LINES LIMIT
                jQuery('#rerurn_items, #skip_items').hide()//HIDE PAGINATION
                jQuery('#rerurn_more_items, #skip_more_items').show()//SHOW LIMIT PAGINATION
                var checkval = jQuery('#limitcheck').attr('value');
                var currentvalskip = jQuery('.scippeditems').attr('value');
                jQuery('#skipforfcheck').attr('value', (parseInt(checkval)+parseInt(currentvalskip)));//NEXT BTN VALUE
                var currentforfaction = jQuery('#skipforfcheck').attr('value')
                jQuery('#skipbackcheck').attr('value',Math.ceil( ( (parseInt(currentforfaction)-parseInt(checkval) ) - parseInt(checkval) ) ) );//PREV BTN VALUE
                var pagescount = (jQuery('#skipforfcheck').attr('value'))/(jQuery('#limitcheck').attr('value'));
                if(pagescount >=5){jQuery('#skip_more_items, #limit').attr('disabled', 'disabled').css({'opacity':'0.6'});}//COUNT PAGES AND LOCK NEXT
                if( jQuery('#skipbackcheck').attr('value') <= 0 ){ jQuery('#skipbackcheck').attr('value', 0 );}//RETURN 0 AS A VALUE IF NEGATIVE
                jQuery('#skip_more_items').click(function(){//SUBMIT NEXT BTN
                    jQuery('#limitcheck').attr('checked', true);
                    jQuery('#skipforfcheck').attr('checked', true);
                    jQuery('#moredisplay').submit()
                });
                jQuery('#rerurn_more_items').click(function(){//SUBMIT PREV BTN
                    jQuery('#limitcheck').attr('checked', true);
                    jQuery('#skipbackcheck').attr('checked', true);
                    jQuery('#moredisplay').submit()
                });
                }
                function changelimit(){//LIMIT INCREASE STEP
                var elem = document.getElementById("limit");
                var currentval = elem.value;
                elem.value = parseInt(currentval) + 6;}//HOW MUCH
                var valuenumber = jQuery('#skip_items').val();
                if (valuenumber == 0){//HIDE PREV BTN IF NO PREV
                jQuery('#rerurn_more_items').attr('disabled', 'disabled').css({'opacity':'0.6'});
                }
                });
            </script>
    </form> 
```

我所做的尝试：复制脚本并放入`pagination.js`文件中，并在页面顶部调用一个脚本，如下所示

```
$document =& JFactory::getDocument();
$document->addScript("jquery/pagination.js"); 
```

但这不起作用...我是 jQuery 新手，所以如果我只是愚蠢，请不要抨击我：L）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T13:12:12.753

您需要将代码包装在：

```
$(document).ready( function() {
    // your code here 
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T13:17:11.840

正如 Aspiring Aqib 指出的那样，您需要使用以下任一方式启动您的 JQuery 脚本

```
$(document).ready( function() {
    // your code here 
}); 
```

或者

```
$(function() {
    // your code here 
}); 
```

这基本上是说，'等到 DOM 完全创建后，再执行该函数内的脚本。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-13T19:24:15.697

Aspiring Aqib 和 Dave 都对将 jQuery 代码包装在`$(function(){//code goes here});`块中是正确的。

然而，一个更常见的错误是没有以正确的顺序加载 jQuery 库文件和您自己的 .js 文件，这可能很难发现，因为您的编辑器或浏览器中的任何地方都没有警告。**jQuery 库必须位于您自己的所有 .js 文件之前。**

# objective-c - 使用 cameraOverlayView 时防止快门动画出现全屏

> ID：15186010
> 
> 赞同：2
> 
> 时间：2013-03-03T13:11:34.033
> 
> 标签：objective-c, uiimagepickercontroller, camera-overlay

我使用自定义 UIView 作为相机覆盖。屏幕顶部和底部的部分被隐藏起来，中间部分专门用于相机看到的内容。

我的问题是每当我打开相机时，快门动画都会隐藏整个屏幕。

如何使快门动画仅显示在专用相机区域并被叠加层隐藏。

# c# - 画法闪烁

> ID：15186014
> 
> 赞同：1
> 
> 时间：2013-03-03T13:11:40.493
> 
> 标签：c#, doublebuffered

考虑以下绘制函数（缩写）：

```
public void paint(object sender, PaintEventArgs e)
{
    base.OnPaint(e);

    Graphics g = e.Graphics;

    BufferedGraphicsContext context = BufferedGraphicsManager.Current;
    BufferedGraphics buffer = context.Allocate(g, e.ClipRectangle);

    buffer.Graphics.Clear(Color.PaleVioletRed);

    // skip drawing if cond is true (condition is not relevant)
    if(!cond)
    {
        try
        {
          // l is some List<p>
          foreach(Point p in l)
          { 
             // ...calculate X and Y... (not relevant)

             buffer.Graphics.FillEllipse(new SolidBrush(Color.Blue), p.X,p.Y, Point.SIZE,Point.SIZE);
           }                                          
         }

         catch {} // some exception handling (not relevant)

         finally{
            buffer.Render(g);
         }
    }                
    buffer.Render(g);
} 
```

请注意，上面的代码或多或少是伪代码。我希望使用 BufferedGraphics 对象，闪烁会消失。事实上，它没有。起初，我认为paint-method 会花费很长时间，但可能不会（我测量了每次调用需要 4-7 毫秒）。如果我设置`cond`为 true，它仍然会闪烁，尽管绘制方法几乎不需要时间。绘画方法将在面板上绘画并且我使用计时器大约每 50 毫秒使面板无效可能很重要。我怎样才能最终消除闪烁？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-03T13:34:23.867

只需尝试在构造函数中设置属性：

```
this.DoubleBuffered = true; 
```

那么你不应该需要 BufferedGraphics 的东西：

```
public void paint(object sender, PaintEventArgs e)
{
  base.OnPaint(e);

  Graphics g = e.Graphics;       
  g.Clear(Color.PaleVioletRed);

  // skip drawing if cond is true (condition is not relevant)
  if(!cond)
  {
    // l is some List<p>
    foreach(Point p in l)
    { 
      // ...calculate X and Y... (not relevant)  
      g.FillEllipse(new SolidBrush(Color.Blue), p.X,p.Y, Point.SIZE,Point.SIZE);
    }                                          
  }
} 
```

# javascript - 从文本链接获取标题值

> ID：15186018
> 
> 赞同：6
> 
> 时间：2013-03-03T13:12:05.080
> 
> 标签：javascript, html

我根本不是 Javascript 专家，但我不确定如何做到这一点。我在一个页面上有一个链接，该链接的结构类似于下面的代码。如何提取标题参考或链接的值？我认为需要使用 innerHTML 来获取链接文本，但我无法通过 ID 或标签名称获取元素。

```
<a href="#" title='titlevalue'>Link</a 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T13:21:04.713

您需要在链接中添加特定 ID。然后您可以直接访问它并获得您需要的价值。这是一个示例：首先，在您的链接中添加一个 id

```
<a href="#" id="myLink" title='titlevalue'>Link</a> 
```

然后用javascript得到它

```
var title = document.getElementById('myLink').title;
var html = document.getElementById('myLink').innerHTML; 
```

总的来说：

```
var title = document.getElementById('myLink').title;
var html = document.getElementById('myLink').innerHTML;
console.log("Title: " + title);
console.log("HTML: " + html);
```

```
<a href="#" id="myLink" title='titlevalue'>Link</a>
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-10-01T08:38:56.847

您还可以像这样使用数据属性：

```
<a href="#" data-title='titlevalue'>Link</a> 
```

--> 而不是`title`您转换为数据属性的属性，如下所示：`data-title`

在你的 javascript 中：

```
const link = document.getElementsByTagName('a')[0];
console.log(link.dataset.title); 
```

这应该记录：`titlevalue`

您可以在此处阅读有关数据属性的更多信息：[https ://developer.mozilla.org/en-US/docs/Learn/HTML/Howto/Use_data_attributes](https://developer.mozilla.org/en-US/docs/Learn/HTML/Howto/Use_data_attributes)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-10-01T08:14:07.603

`tag name`您可以使用`getElementsByTagName`函数获取元素。这将返回具有相同元素的数组`tag name`。从该数组中，您可以获得所需的元素，并且，

使用`getAttribute`函数，您可以获得特定的值`attribute`。

```
const elements = document.getElementsByTagName('a');
const target = elements[0];

console.log('Href : ' + target.getAttribute('href'));
console.log('Title : ' + target.getAttribute('title'));
```

```
<a href="#" title='titlevalue'>Link</a>
```

# html - 在 Internet Explorer 8 中隐藏输入类型提交文本

> ID：15186019
> 
> 赞同：0
> 
> 时间：2013-03-03T13:12:10.057
> 
> 标签：html, css

我在[这里](http://tinkerbin.com/NDG2MgtJ)准备表格。

Internet Explorer 8 中的提交按钮有问题。按钮在[图像按钮顶部](http://i.imgur.com/aQiZGGC.jpg)显示“提交查询”文本。

如何隐藏此文本？

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-03T13:15:59.387

您是否尝试过像这样将值设为空白`<center><input type="submit" class="subscribe-sidebar-submit" value=""/></center>`

此外，如果您添加`text-indent: -9000px; text-transform: capitalize;`到按钮 css，它将删除提交查询并在 ie7 和 ie8 中工作

# android - 我想在android中更改我的图像

> ID：15186028
> 
> 赞同：-1
> 
> 时间：2013-03-03T13:12:52.350
> 
> 标签：android, imageview

我想改变我的形象，如果我有这个代码：

```
ImageView img = new ImageView(this);
img.setImageResource(R.drawable.my_image); 
```

该代码有效，但我想保存`R.drawable.my_image`在一个变量中，比如说`listofimage`，因为我必须更改图像文件的名称，假设我有“my_image”、“my_image1”、“my_image2”

我尝试像这样更改代码

```
ImageView img = new ImageView(this);
string listofimage="";

if(result1.equals("my_image")){
listofimage="R.drawable.my_image";
} else if (result1.equals("my_image1")) {
listofimage="R.drawable.my_image1";
}else if (result1.equals("my_image2")) {
listofimage="R.drawable.my_image2";
}
img.setImageResource(listofimage); 
```

但该代码不起作用。谁能帮我？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T13:40:26.623

您的代码包含三个编译错误：

1.  `String`带小写“s”
2.  `R.drawable.my_image`是类型`int`
3.  `setImageResource`期望`int`作为它的参数

解决方案是将代码中的“string”替换为“int”，如下所示：

```
ImageView img = new ImageView(this);
int listofimage=R.drawable.my_image;
img.setImageResource(listofimage); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T13:56:26.067

使用您的代码，您可以这样做：

```
ImageView img = new ImageView(this);

if(result1.equals("my_image")){
img.setImageResource(R.drawable.my_image);
} else if (result1.equals("my_image1")) {
img.setImageResource(R.drawable.my_image1);

}else if (result1.equals("my_image2")) {
img.setImageResource(R.drawable.my_image2);

} 
```

# objective-c - Google Drive - 访问文件树条目及其类型

> ID：15186033
> 
> 赞同：0
> 
> 时间：2013-03-03T13:13:49.917
> 
> 标签：objective-c, google-drive-api

如何使用 Google Drive iOS API 检索 google drive 帐户的文件树？

我可以从我在 Google Drive 开发者网站上阅读的内容和示例应用程序中访问文件列表，但我不确定如何获取文件树以及如何区分条目是文件夹还是文件.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T18:43:50.760

您可以检查[文件资源](https://developers.google.com/drive/v2/reference/files)`mimeType`的属性以区分文件和文件夹。文件夹将作为其 MIME 类型列出：`application/vnd.google-apps.folder`

[https://developers.google.com/drive/folder](https://developers.google.com/drive/folder)

您可以使用该`Parents`集合列出文件的父级并构建树。请记住，一个文件可以有多个父级，即包含在多个文件夹中：

[https://developers.google.com/drive/v2/reference/parents/list](https://developers.google.com/drive/v2/reference/parents/list)

# php - 每 24 小时添加一个随机数

> ID：15186037
> 
> 赞同：0
> 
> 时间：2013-03-03T13:14:08.807
> 
> 标签：php, javascript, jquery

我需要一个脚本，每 24 小时自动添加一个随机数（1 到 5 之间）并将其存储在一个文本文件中，然后在 24 小时后创建一个新的随机数并将其添加到文本文件中的先前结果中，我管理做一些关闭但仍然需要刷新按钮才能生效，但我希望它自动执行，所以如果 1 个用户每天访问该页面，一个用户每月访问该页面一次，他们应该看到相同的数字（将从文本文件中读取）。

到目前为止，这是我的代码：

```
<?php

$dataFile = "amt.txt";

$date1 = date("H:i:s");
$date2 = date("H:i:s",filemtime("amt.txt"));

$diff = abs(strtotime($date2) - strtotime($date1));

$secs = floor($diff);

if ($diff < 86400) {

    echo "$date1 \n"; 
echo "$date2 \n";
printf($secs);
    exit;
}   

if (!file_exists($dataFile)) {
    $amt = 0;
}
else {
    // Otherwise read the previous value from
    // the file.
    $amt = (int) file_get_contents($dataFile);
}

// Generate the new value...
$Number = rand(1,5);
$total = $amt + $Number;
echo "$". $total ."/-";

// And dump it back into the file.
if (!file_put_contents($dataFile, $total)) {
    // If it fails to write to the fle, you'll 
    // want to know about it...
    echo "Failed to save the new total!";
}

?> 
```

基本上我想显示一个虚假的订阅者数量，这些数量在逻辑上应该随着时间的推移而增加。所以我想每天更新这个数字，然后因为我在我的网站上有这个作为每月订阅者的数量，所以当用户访问该网站时，任何时候都应该看到与访问该网站的任何其他用户相同的数字确切时间。希望这现在更清楚了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T13:31:49.050

我首先使用 time() 而不是 date(xxx) 所以你可以直接得到 diff secodns。但是我不明白这样做的目的，也不知道您是否要附加数字或覆盖它们，以及数字是否每 24 小时更改一次，为什么一个月后的用户应该获得相同的数字。

```
$date1 = time();
$date2 = filemtime("amt.txt");

$diff = $date1 - $date2;

if ($diff < 86400)
{
    echo "$date1 \n"; 
    echo "$date2 \n";

    printf($diff);

    exit;
} 
```

# c# - 通过单击按钮动态创建具有相同项目的组合框

> ID：15186040
> 
> 赞同：-1
> 
> 时间：2013-03-03T13:14:29.060
> 
> 标签：c#

我有一个按钮和一个组合框。然后我点击这个按钮动态创建组合框。

这是代码：

```
this.Controls.Add(new ComboBox() { Location = new Point(w, z), Width = 121, Height = 21}); 
```

我该怎么做，通过单击按钮将创建具有相同项目的组合框？

使用一个组合框我知道如何，但是我如何处理动态创建的组合框，通过单击按钮将创建具有相同 7 个元素的动态组合框？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T13:19:09.303

这可能会有所帮助：[https ://github.com/vitalets/x-editable](https://github.com/vitalets/x-editable)

x-editable 是围绕在页面中创建新元素而构建的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T17:27:17.370

根据我对您的问题的理解（对不起，如果我错了），您可能想试试这个：

1.  像这样声明2个全局变量

    ```
     private string[] elements = { "A", "B", "C", "D", "E", "F", "G" }; // Sample 7 item to put inside of your dropdownlist
        private int click = 0; // Initial value of click, will increase 1 after each click. 
    ```

2.  然后在`button1_click`事件中，输入此代码。

    ```
     int w = 100, z = 100; // Initial position
        this.click++; // Click value increase everytime you click

        ComboBox c;  

        this.Controls.Add(c = new ComboBox() // Create new combobox
        {
            Location = new Point(w, z + (this.click * 30)), // Each time you click, position on x-axis will stay and y-axis will increase by `click` multiply by 30 (you can change this '30' value)
            Width = 121,
            Height = 21,

        });

        for (int i = 0; i < elements.Length; i++) // Loop 7 times
        {
            c.Items.Add(this.elements[i]);
        } 
    ```

3.  我希望这能回答你的问题:)

# linux - 发送数据时可以选择网卡吗

> ID：15186041
> 
> 赞同：1
> 
> 时间：2013-03-03T13:14:31.117
> 
> 标签：linux, sockets, routes

在linux sockets中编程时，我们调用的是标准库socket()、connect()、send()等，但是如果我们有两个网卡连接到同一个局域网，我们可以手动选择一个还是取决于由管理员配置的路由表，我们无法更改或其他？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T13:35:57.223

好吧，您可以使用[bind()](http://beej.us/guide/bgnet/output/html/singlepage/bgnet.html#bind)指定接口，因为每个接口都有其唯一的 IP 地址。

# java - Java swt 文本自动补全

> ID：15186042
> 
> 赞同：0
> 
> 时间：2013-03-03T13:14:31.990
> 
> 标签：java, autocomplete, swt

我正在尝试为 swt 文本字段创建自动完成功能。但是我找不到 IContentProposalProvider 等的工作示例。编写时的 eclipse 自动建议功能接近我想要实现的目标。请不要建议使用外部库。谢谢！

# html - 验证错误，noscript 错误

> ID：15186044
> 
> 赞同：0
> 
> 时间：2013-03-03T13:14:38.877
> 
> 标签：html, styles, noscript

如果 ActiveX 关闭，我想让一些文本出现而不是通常的文本

它的工作，但如何使它通过验证（（（卡住

第 389 行，第 25 列：在此上下文中，元素样式不允许作为元素 noscript 的子元素。（抑制来自该子树的更多错误。）

```
 <style type="text/css">messageJS { display:none; }</style> 
```

可以使用元素样式的上下文：如果没有作用域属性：需要元数据内容。如果 scoped 属性不存在：在作为 head 元素的子元素的 noscript 元素中。如果存在 scoped 属性：需要流内容，但在除元素间空白之外的任何其他流内容之前，而不是作为内容模型透明的元素的子元素。元素 noscript 的内容模型：当禁用脚本时，在头元素中：以任意顺序，零个或多个链接元素，零个或多个样式元素，以及零个或多个元元素。禁用脚本时，不在 head 元素中：透明，但不能有 noscript 元素的后代。否则：符合散文中给出的要求的文本。

代码 - - - - - - -

```
 <noscript>
  <div class="conB" style="margin-left: 3px;"><a class="fancybox" href="accessebility.html"> Accessibility </a></div>
  <style type="text/css">
    #accessButt { display:none; }
  </style>
  </noscript>

  <div id="accessButt">
  <div class="conB" style="margin-left: 3px;"><a class="fancybox" href="#accessebility">Accessibility </a></div>
  </div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T13:17:41.710

反过来逻辑：默认隐藏元素并使用 JavaScript 显示它。

```
<style type="text/css">
    #accessButt { display:none; }
</style>

<noscript>
    <div class="conB" style="margin-left: 3px;"><a class="fancybox" href="accessebility.html"> Accessibility </a></div>
</noscript>

<div id="accessButt">
<div class="conB" style="margin-left: 3px;"><a class="fancybox" href="#accessebility">Accessibility </a></div>
</div>

<script>
    document.getElementById( 'accessButt' ).style.display = 'block';
</script> 
```

# java - 如何从文件中读取html？

> ID：15186045
> 
> 赞同：0
> 
> 时间：2013-03-03T13:14:42.027
> 
> 标签：java, html, file, w3c-validation, readfile

我有一个包含内容的文件：

```
 <!DOCTYPE html> 
 <html>     
        <head>      
            <title>Hello, w3c validator!</title>    
        <head>
        <body>      
             <p>Hello again!</p>    
        </body> 
 </html> 
```

如何用 Java 读取这个文件并发送到验证器 w3c？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T13:43:44.963

您正在寻找的是一个 Java 程序，它：

1.  输入：HTML 文件
2.  读取 HTML 文件
3.  验证文件（w3c 验证）
4.  输出：验证输出

对于第 1 点和第 2 点，您可以在 SO：[Reading entire html file to String？](https://stackoverflow.com/questions/12035316/reading-entire-html-file-to-string)

对于第 3 点，您可以查看[Markup Validator Web Service API](http://validator.w3.org/docs/api.html)以了解如何联系 w3c HTML 验证器的规范，但这就是他们所说的：

```
Note: Please be considerate in using this shared, free resource. 
Consider Installing your own instance of the validator for smooth and fast operation. 
Excessive use of the W3C Validation Service will be blocked. 
```

所以我的建议是阅读这篇文章，以更好地了解您可以做什么以及是否可以将其集成到 Java Programa 中：

[W3C 标记验证器的安装信息](http://validator.w3.org/docs/install.html)

# php - 未在 php localhost 中正确查看 imaps 构建器地图

> ID：15186052
> 
> 赞同：2
> 
> 时间：2013-03-03T13:15:31.073
> 
> 标签：php, javascript, html

我使用`imapsbuilder`. 它给了我一个 javascript，可以在我的代码中使用它来查看地图，但问题是它没有在 php 中正确查看。有人请帮助我。

```
 <script type="text/javascript" src="http://g3.imapbuilder.net/_api/?s=66e09d9be7bef2be0a12285bac364c88&m=22671" charset="utf-8"></script>
  <script type="text/javascript" src="http://g3.imapbuilder.net/_api/?s=d0b187c9f3cae7f52b14798f2ac89be0&m=22674" charset="utf-8"></script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T12:31:40.843

我将您的代码放入标签外的 php 文件中，并且看起来效果很好。因此，您可以尝试关闭您的 php 标签，放入脚本代码，然后再次打开 php 标签。

# java - Byte-size enum in Java

> ID：15186055
> 
> 赞同：7
> 
> 时间：2013-03-03T13:15:55.443
> 
> 标签：java, android, memory

I have a class of which there may be many instances (on a mobile device), so I'm trying to minimize the size. One of my fields is a "DrawTarget" that indicates whether drawing operations are being ignored, queued to a path or drawn to the display. I would like it to take a single byte or less since there are only 3 possible values, but I would also like it to be friendly code so I don't have hard-coded numbers all over. One thought is to use an enum like:

```
public enum DrawTarget {
    Invisible,
    Path,
    Canvas
} 
```

But from what I read, a Java enum doesn't allow you to specify the memory layout -- I can't request that the enum values represent a byte-size value -- and I guess enum values end up being integer-sized values in Java.

So I thought about maybe making an implicit conversion operator in the enum... is this possible in Java? Or is my best option to implement something like this within the enum:

```
public static DrawTarget fromValue(byte value) {
    switch (value) {
    case 0:
        return Invisible;
    case 1:
        return Path;
    default:
        return Canvas;
    }
} 
```

and then call DrawTarget.fromValue wherever I want to access the value?

Or should I just create a single-byte class since apparently (from what I read in my research on this) enums are basically just special classes in Java anyway?

```
public class DrawTarget {
    public static final byte Invisible = 0;
    public static final byte Path = 1;
    public static final byte Canvas = 2;
} 
```

But how to I represent the value of an enum instance if I use that last solution? I still need a way to allow the "=" operator to accept one of the static fields of the class... like a conversion constructor or an assignment operator overload.

I suspect, however, that any class object, being a reference type, will take more than a byte for each instance. Is that true?

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-03T13:33:14.217

In Java enum is a class that has as many instances, as there are values. The instances are produced at class (enum) loading time. Each place where you use an enum variable or an enum attribute, you actually use an ordinary reference to one of the existing enum objects (instances of enums are never created after enum is initialized).

This means that an enum reference costs as much as any other object reference, usually four bytes. Which is really, really, really little.

1.  You don't know how much memory does a byte take (really! remember that low level memory management includes plenty of padding!), so any "optimization" based on this will fail. On a given architecture a byte field might take as much memory as an integer field (because it might be faster that way).

2.  If you want to write good Java, use enum. Really. The only good reason **not** to use enums, would be if you had a whole array of values, like: `drawTargets[] = new DrawTarget[100000];`

3.  If you insist on microoptimizing, just use plain bytes and forget enums; `public static final byte SOMETHING = 1;` is fine for making comparisons (and sucks for debugging).

I have written Android programs for a long time and have never seen such microoptimization pay off. Your case might be the one in a million, but I don't think it is.

Also, to make life simpler for all of us, please consider using Java conventions in Java code: enum instances and public final static fields should be names `LIKE_THIS`, attributes `likeThis` (not `LikeThis`!).

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-03T13:24:49.593

> and I guess enum values end up being integer-sized values in Java.

No, enums are always *classes* in Java. So if you have a field of type `DrawTarget`, that will be a reference - either to `null` or to one of the three instances of `DrawTarget`. (There won't be any more instances than that; it's not like a new instance of `DrawTarget` is created every time you use it.)

I would go with the enum and then measure the memory usage - an enum is *logically* what you want, so take the normal approach of writing the simplest code that works and then *testing* the performance - rather than guessing at where bottlenecks might be.

You *may* want to represent the value as a single byte when serializing, and then convert it back to the enum when deserializing, but other than that I'd stick with the enum type throughout your code if possible.

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-03T13:25:04.247

Unless android has some special way of treating enum references, each reference to a DropTarget will indeed take more than one byte in memory. Enums are classes, and enum instances are objects. So a reference to an enum instance takes the same amout of memory as any other object reference.

I wouldn't care much about it unless you have measured that this caused memory problems, though, and that reducing the size would have a significant impact.

What you get from enums, mainly, is type safety. If a method takes a `DropTarget` as argument, you (or coworkers) won't be able to pass anything other than one of the three instances of `DropTarget` (or null). If you use a byte instead, the code is less clear, and anyone could pass any byte value instead of the three authorized byte values.

So, decide which is the most important for you, and choose the solution you prefer.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-03T13:30:14.027

Your classes will only contain a reference to the enum. Only one instance of each enum will be created.

Aside from that, consider using polymorphism to implement the drawing behavior.

If the value of the enum is fixed, instantiate a different subclass for each object depending on its desired drawing behavior.

If the value changes often, you could keep a reference to the desired drawing strategy in the object. Refer to an object with an empty draw() method for objects that should not be drawn. Etc.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-05-14T09:53:58.333

enum is special data type, not a class.check oracle documentations for further details. An enum type is a special data type that enables for a variable to be a set of predefined constants. The variable must be equal to one of the values that have been predefined for it.

# objective-c - 如何在objC中将字符串数组更改为整数数组？

> ID：15186062
> 
> 赞同：0
> 
> 时间：2013-03-03T13:16:57.157
> 
> 标签：objective-c, sorting, casting, nsarray

`couples`我从另一个动态数组中检索了一个 NSString-Objects( ) 数组`valuesFirstdance`。我知道字符串总是包含整数。我需要值是整数类型来对`couples`数组进行排序。我将如何更改为每个数组值的类型？

谢谢

```
couples = [valuesFirstdance allKeys];
NSArray* couples2 = [couples sortedArrayUsingSelector:@selector(intValue)]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T13:54:57.983

直接回答问题：

```
NSMutableArray *integerArray = [[NSMutableArray alloc] initWithCapacity:couples.count];
for (NSString *s in couples) {
   [integerArray addObject:[NSNumber numberWithInteger:s.integerValue]];
} 
```

但是您也可以对字符串值进行数字排序，例如，使用`NSNumericSearch`：

```
NSArray *sortedArray = [couples sortedArrayUsingComparator:^(NSString *o1, NSString *o2) {
    return [o1 compare:o2 options:NSNumericSearch];
}]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T13:30:04.890

`NSString`有一个方法叫`intValue`- 这就是你要找的。

当然，更好的解决方案是使用 s 数组`NSNumber`而不是`NSString`s 数组。

您不必更改每个数组值的类型来对 Couples 数组进行排序 - 看看这个：

```
NSArray *sortedArray = [couplesArray sortedArrayUsingComparator:^NSComparisonResult(id obj1, id obj2) {

NSString *firstString = (NSString*) obj1;
NSString *secondString = (NSString*) obj2;

if([firsString integerValue]<[secondString integerValue]) 
return (NSComparisonResult) NSOrderedDescending;
else if([firsString integerValue]>[secondString integerValue])
return (NSComparisonResult) NSOrderedAscending;

return (NSComparisonResult) NSOrderedSame;
                    }]; 
```

# c# - 在c#中创建一个从数组中添加和删除的方法

> ID：15186065
> 
> 赞同：0
> 
> 时间：2013-03-03T13:17:14.720
> 
> 标签：c#, arrays, list, add

我正在创建一个包含数组成员的 C# 类，它应该像`List`. 将书添加到书单时，我想要类似于以下的语法。

```
book.Add(firstName = "Jack", lastName = "Reacher", title = "Dollar", year = 2005); 
```

这本书现在应该被添加到一个数组中。我们跟踪我们添加到该数组中的所有书籍。

我也希望能够写出类似的东西：

```
book.delete[2]; 
```

从数组中删除第三本书。

实现这一目标的最佳方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T13:21:14.103

您可以使用 Linq 来反对和收集使用[通用](http://msdn.microsoft.com/en-us/library/6sh2ey19.aspx) [列表](http://www.dotnetperls.com/list)

```
List<int> list = new List<int>();
    list.Add(2);
    list.Add(3);
    list.Add(5);
    list.Add(7); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T13:24:50.100

如果您想随意添加和删除项目，那么数组可能不是最佳选择。调整数组大小相对昂贵；最好使用列表之类的东西（如 Shahrooz Jefri 所建议的）。

此外，我会将添加/删除操作从书籍本身转移到收藏。更好的做法：

```
bookList.Add(...) 
```

...比...

```
book.Add(...) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-03T13:27:46.810

从 OOP 的角度来看，更好的方法是使用 Shahrooz Jefri 指出的通用列表 - 并制作一个自定义类或结构“Book”，其中包含成员字段“string firstName”，“string lastName”， “字符串标题”和“int year”。

然后，只需列出这样的书籍清单，

```
List<Book> books = new List<Book>();
books.Add(new Book("Jack","Reacher","Dollar",2005)); 
```

如果您需要使用静态数组实现自己的通用集合，您可以执行以下操作：

```
public class MyList<T> {
    private T[] internalArray;
    private int capacity;
    private int size;
    public int Size { get { return size; } }
    public MyList(){
        this.size = 0;
        this.capacity = 2; //put something you feel like is reasonable for initial capacity
        internalArray = new T[2];
    }
    public void Add(T item){
        int factor = 2; //some "growth" factor
        if(this.size == this.capacity){
            this.capacity *= factor;
            T[] newArray = new T[this.capacity];
            System.Array.Copy(this.internalArray, newArray, this.size);
            this.internalArray = newArray;
        }
        this.internalArray[this.size] = item;
        this.size ++;
    }
    public void RemoveAt(int index){
        //write code that shifts all elements following index  back by one
        //decrement the size
        //if necessary for mem. conservation, shrink the array capacity if half of less elements remain
    }
} 
```

当然，那么您将不得不重载 [] 括号运算符以进行访问，也许使其实现 Enumerable 等。

# django - Django，删除文本区域中模板值的初始空间

> ID：15186067
> 
> 赞同：3
> 
> 时间：2013-03-03T13:17:34.830
> 
> 标签：django

我正在尝试使用这样的模板变量将一些文本放在文本区域中：

```
{% if action == 'edit' %}
    <form>
        <textarea style='width: 420px; height: 65px'>
                {{ post.text }}
        </textarea>
    </form>
{% endif %} 
```

但是，我注意到显示的文本带有一些我无法删除的初始空白。我尝试`.strip()`在向用户显示之前为文本创建一个过滤器，但无济于事。尽管文本已从空格中删除，但它确实在第一个字母之前显示了一些空格字符。

有解决方案吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-03T13:47:45.737

尽量不要在代码中放置空格

```
<textarea style='width: 420px; height: 65px'>{{ post.text }}</textarea> 
```

# javascript - 点击后隐藏div？（但是如果 Div 是横幅呢）

> ID：15186068
> 
> 赞同：0
> 
> 时间：2013-03-03T13:17:38.450
> 
> 标签：javascript, html

所以我有一个 Flash 游戏网站，当用户玩游戏时，他们会看到一个弹出窗口。如果他们单击该 DIV（弹出窗口），它将打开赞助商网站。在后台，我希望 onmouseclick 关闭该广告。我怎样才能做到这一点？（横幅不是我主持的，所以我无法控制）

代码：

```
<body onLoad='setTimeout("showIt()", 10000);'>

<script type="text/javascript">
    function showIt() {
      document.getElementById("myDiv").style.display = "block";
    }
// 1000 = 1 sec | 60000 is 1 minute
    </script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T14:06:22.233

如果您无法向 div 添加功能，`onClick`那么您可以在一段时间后使用`setTimeout`.

```
<script type="text/javascript">
    function showIt() {
      document.getElementById("myDiv").style.display = "block";
      setTimeout("hideIt()", 10000);
    }
    function hideIt() {
      document.getElementById("myDiv").style.display = "none";
    }
</script> 
```

但是，如果您已经在自己的 Div 中插入了横幅代码，那么：

```
<div id="myDiv" onClick="javascript:this.style.display='none';">
   <!-- ad banner code here -->
</div> 
```

# ios - Paypal MPL 审批流程

> ID：15186077
> 
> 赞同：0
> 
> 时间：2013-03-03T13:18:30.833
> 
> 标签：ios, paypal

总而言之，我只是在构建我的第一个支持 IOS Paypal 的应用程序。我已经完成了所有步骤，实际上我的应用程序有效，我得到了我的生产 ID 没有真正将我的申请提交到贝宝，只要我点击提交，它就给了我生产 ID 并说申请自动获得批准！

我可以继续将我的申请提交给苹果还是我应该做其他事情？！

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T04:50:09.697

如果您已获得批准并且拥有您的实时身份证，那么您应该准备好摇滚了。您可能希望在实时服务器上使用实时 ID 运行基本 API 调用，以确保一切按预期工作。一旦您对此感到满意，您就可以提交给 Apple。

# php - 国家名称出现在网址中？

> ID：15186078
> 
> 赞同：1
> 
> 时间：2013-03-03T13:18:48.207
> 
> 标签：php, url, search, codeigniter-url

我正在使用 codeigniter 我在视图中创建了下拉菜单，例如

`<?php echo form_open('trip/result', array('method' => 'get')); ?> <div class="row-fluid"> <div class="main-form"> <select name="look_for" class="span4"> <option selected="selected" value="0"> choose country </option> <option value="US">USA</option> <option value="EN">England</option> <option value="FR">France</option> </select>` 我希望国家/地区的全名出现在 url 中，我有很多国家/地区，所以我在数据库中有表，用于类似（EN-US-FR）中的值，所以我想发送每个国家/地区的全名和符号以出现在 URL 中使 SEO 对网站有益。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T14:27:23.963

您正在寻找友好的 URL！网上有很多关于它们的文章。`friendly url apache`例如，如果您使用 Apache Web 服务器，只需 google一下！我已经为你做到了！示例：[使用 php 和 htaccess 的友好 url](http://www.edinteractive.co.uk/article/?id=48)或[使用 Apache 的 mod_rewrite 使 URL 更加用户友好](http://www.techrepublic.com/article/use-apaches-modrewrite-to-make-urls-more-user-friendly/5068743)。

在您的情况下，您应该将`option`字段的值更改为国家/地区的长名称，但不要忘记过滤“特殊”字符，例如空格或引号！实际上，您应该在数据库的国家表中创建另一列，其中包含每个国家/地区的“slug”。因此，例如，“英国”将变为“联合王国”。有一些功能可以做到这一点，[比如这个](http://forum.codecall.net/topic/59486-php-create-seo-friendly-url-titles-slugs/)！

如果您使用的是 Apache，则`.htaccess`可能如下所示：

```
RewriteEngine on
RewriteRule ^countries/([a-zA-Z]+)$ ./countries.php?country=$1 [L] 
```

然后，在您的`countries.php`文件中，您将在数据库中搜索匹配的国家！

# jquery - jquery列表轮播

> ID：15186079
> 
> 赞同：0
> 
> 时间：2013-03-03T13:19:02.347
> 
> 标签：jquery, list, loops

我制作了这个 jFiddle，让人们几乎可以看到我需要的东西。

[http://jsfiddle.net/Vjp68/](http://jsfiddle.net/Vjp68/)

基本上，列表中的最后一项是两行，需要比其他项稍微向上移动才能位于灰色条上方。同样第二次通过项目消失，然后淡入，它们应该始终可见......

我在网上获取了 js 代码并添加了 margin-top 动画和整行：

```
$("#top ul" + " li:eq(" + j + ")").animate({"margin-top" : "0px"}); 
```

其余的是所有原始标记...

所以我添加的 margin-top: -18 动画正在向上移动所有项目，我添加了上面的行，这样当列表完成最后一项时，它不会继续向上移动，而是从原点开始......

虽然我还没有真正正确地设置它......我真正需要它做的是继续看起来好像列表在第一次运行时向上移动......但是当它说

“应该向上移动的两行描述”

下面应该是第一行，“Short Company Description 1”并循环到无穷大。

所以基本上我需要一个能够移动最后一个项目的循环列表，或者任何项目，除非这更难，否则希望保持简单。

感谢您提供任何信息！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-03T14:16:06.503

请参阅此**[示例小提琴](http://jsfiddle.net/s9GjQ/)**

```
function cyclee(){
    $("#top ul" + " li:eq(0)").delay(3000)
        .animate({"opacity" : "0", "margin-top" : "-18"}, 400, function(){
             $("#top ul").append($(this).css("opacity", "1").css("margin-top", "0"));
             cyclee();
            });
}; 
```

在对其进行动画处理并恢复其默认 css 属性后，您需要将第一个附加`<li>`到末尾。`<ul>`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-03T13:46:29.353

基本上，您可以利用元素的高度来偏移每个循环的边距顶部。为了无限循环，为第一项设置动画并为动画完成添加回调。在动画完成函数中，重置动画项的边距顶部和不透明度并将其附加到 ul （现在，第一项成为最后一项，`<ul>`第二项成为 中的第一项`<ul>`）。结果，我们只需要为第一个项目设置动画。

这是jsfiddle：http: [//jsfiddle.net/Vjp68/1/](http://jsfiddle.net/Vjp68/1/)

```
function cyclee(){
    var h =  $("li:eq(0)", self).outerHeight(true) * -1;
    $("li:eq(0)", self).animate({"opacity" : "0", "margin-top" : h + "px"}, delay, function(){
        $(this).css({"margin-top":"0","opacity" : "1"});
        self.append(this);
        cyclee();
    });     
}; 
```

# php - 转发使用 cURL 请求的标头

> ID：15186084
> 
> 赞同：2
> 
> 时间：2013-03-03T13:19:33.717
> 
> 标签：php, curl, header

我正在请求一个带有 cURL 的页面并设置了以下选项：

```
CURLOPT_HEADER => 1,
CURLOPT_NOBODY => 1,
CURLOPT_RETURNTRANSFER => 1,
CURLOPT_FOLLOWLOCATION => 1, 
```

由于一个标头，该请求返回了两组标`Location:`头，如下所示：

```
HTTP/1.1 302 Found
Date: Sun, 03 Mar 2013 13:13:24 GMT
Server: Apache/2.2.22 (Ubuntu)
X-Powered-By: PHP/5.3.10-1ubuntu3.5
X-Debug-Useragent: Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/537.11 (KHTML, like Gecko) Chrome/23.0.1271.97 Safari/537.11
Location: http://whateverdomain.com/file.zip
Vary: Accept-Encoding
Content-Type: text/html

HTTP/1.1 200 Ok
Date: Sun, 03 Mar 2013 13:08:45 GMT
Server: nginx
Content-Type: application/octet-string
Content-Length: 309593
Accept-Ranges: bytes
Content-Disposition: attachment; filename="file.zip"
Last-Modified: Sat, 07 Jul 2012 01:29:22 GMT 
```

我想获取最后一个请求（那个`200 Ok`）的所有标头并将这些标头“转发”给用户。

我可以先分解标题`"\n"`，然后使用 发送每个标题`header()`，但我想知道是否有更好的方法？

谢谢！

# c++ - libxrandr 库：如何更改已连接监视器的属性？

> ID：15186089
> 
> 赞同：1
> 
> 时间：2013-03-03T13:20:05.510
> 
> 标签：c++, qt, ubuntu, x11

我使用 C++/Qt 和 libxrandr 库编写了一个应用程序来更改显示器的分辨率和方向。但我必须扩展功能。请帮助我了解如何执行以下操作：

1.  获取连接的监视器列表
2.  改变它们每个的分辨率和方向
3.  将它们彼此相对放置（例如，左侧的第一台显示器，右侧的第二台显示器）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T08:25:59.787

问题解决了

```
XRROutputInfo *output_first_info = XRRGetOutputInfo(dpy, sr, sr->outputs[X]);
XRRSetCrtcConfig(dpy, sr, output_first_info->crtc, CurrentTime, XM, YM, sr->modes[M].id, R, &sr->outputs[X], 1); 
```

其中 X - 要配置的监视器数量 XM, YM - 虚拟屏幕中的坐标 M - 模式数量

获取已连接监视器的模式列表：

```
int jj = 0;
        for (int i = 0; i < sr->noutput; i++)
        {
            XRROutputInfo *output_info = XRRGetOutputInfo (dpy, sr, sr->outputs[i]);
            XRRCrtcInfo *crtc_info = XRRGetCrtcInfo(dpy, sr, output_info->crtc);

            for (int j = jj; j < output_info->nmode; j++)
            {
                qDebug() << output_info->name << sr->modes[j].name << j;

                jj++;
            }
        } 
```

# xcode - 通过文本长度动态更改标签和单元格大小

> ID：15186090
> 
> 赞同：0
> 
> 时间：2013-03-03T13:20:06.650
> 
> 标签：xcode, ios6, autolayout

我有一张带有原型单元格的表格。我的项目使用自动布局。

单元格包含一些标签，它的文本长度可以是不同的。有时它太长而无法适应其默认大小。

我想动态更改标签/单元格大小以显示整个文本。如果需要，自动添加更多行。

我试过标签的sizetofit，它根本没有做任何事情。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-03T17:28:56.680

这是解决方案。

```
- (CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath
{
    NSString *cellText;
    CGRect screenBound = [[UIScreen mainScreen] bounds];
    CGSize screenSize = screenBound.size;
    CGFloat screenWidth = screenSize.width;
    cellText = [detailPeriodsContent objectAtIndex:indexPath.row];
    UIFont *cellFont = [UIFont systemFontOfSize:14];
    CGSize constraintSize = CGSizeMake(screenWidth-40, MAXFLOAT);
    CGSize labelSize = [cellText sizeWithFont:cellFont constrainedToSize:constraintSize lineBreakMode:UILineBreakModeWordWrap];

    return labelSize.height + 35;
} 
```

# c# - 如何将组合框的选定项获取到c#中的字符串变量

> ID：15186093
> 
> 赞同：56
> 
> 时间：2013-03-03T13:20:35.020
> 
> 标签：c#, combobox

谁能告诉我如何将 a 的选定项目获取`ComboBox`到`string`变量？

```
string selected = cmbbox.SelectedItem.ToString();
MessageBox.Show(selected); 
```

这给了我`System.Data.DataRowView`在我的`MessageBox`

* * *

## 回答 #1

> 赞同：96
> 
> 时间：2013-03-03T13:24:44.163

试试这个：

```
string selected = this.ComboBox.GetItemText(this.ComboBox.SelectedItem);
MessageBox.Show(selected); 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2014-01-08T10:36:30.013

您可以使用如下：

```
string selected = cmbbox.Text;
MessageBox.Show(selected); 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2013-03-03T13:25:35.757

测试[这个](https://stackoverflow.com/questions/315237/get-the-combobox-text-in-c-sharp)

```
 var selected = this.ComboBox.GetItemText(this.ComboBox.SelectedItem);
  MessageBox.Show(selected); 
```

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2016-03-10T09:04:54.353

```
SelectedText = this.combobox.SelectionBoxItem.ToString(); 
```

# html - 点击，制作 项目粗体

> ID：15186094
> 
> 赞同：1
> 
> 时间：2013-03-03T13:20:37.447
> 
> 标签：html, css

是否可以通过仅使用 HTML/css 使单击的链接文本变为粗体？

```
<body>
    <div id="menu-bg">
        <div id="menu-text">
            <ul id="list">
                <li><a href="experience.php">THE EXPERIENCE</a><br>
                    <a href="services.php">SERVICES</a><br>
                    <a href="adventures.php">ADVENTURE</a><br>
                    <a href="tour.php">TOUR</a><br>
                    <a href="gallery.php">GALLERY</a><br>
                    <a href="reviews.php">REVIEWS</a><br>
                    <a href="location.php">LOCATION</a>
                </li>

         </ul>
      </div>
    </div>
</body> 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-03T13:22:17.020

尝试

```
a:visited {
font-weight:bold;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-03T13:27:13.113

Definitely Yes.

For html/css, you can use:

```
<style>
    li a:active{
        font-weight:bold;
    }
</style> 
```

You can also use javascript/jquery on that:

```
$('li a').click(function(e){
    $(this).css('font-weight','bold');
}) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-03T13:26:23.423

You may try -

```
<style>
ul li a:visited {
     font-weight:bold;
}
</style> 
```

write me if problem persists.

# php - APC 和 Symfony 2.1 的 app.php 应该是什么样子

> ID：15186096
> 
> 赞同：4
> 
> 时间：2013-03-03T13:21:03.670
> 
> 标签：php, caching, symfony, apc

我想用 Symfony 2.1 和 APC 准备 app.php 文件。我使用 Symfony 标准版对其进行了教义配置，然后进行了此处描述的更改：http: [//symfony.com/doc/2.1/book/performance.html](http://symfony.com/doc/2.1/book/performance.html)

```
<?php
require_once __DIR__.'\..\vendor\symfony\symfony\src\Symfony\Component\ClassLoader\UniversalClassLoader.php';
require_once __DIR__.'\..\vendor\symfony\symfony\src\Symfony\Component\ClassLoader\ApcUniversalClassLoader.php';
use Symfony\Component\ClassLoader\ApcClassLoader;
use Symfony\Component\HttpFoundation\Request;

$loader = new ApcClassLoader('sf2', $loader);
$loader->register(true);

require_once __DIR__.'/../app/AppKernel.php';
$kernel = new AppKernel('prod', false);
$kernel->loadClassCache();
$request = Request::createFromGlobals();
$response = $kernel->handle($request);
$response->send();
$kernel->terminate($request, $response);
?> 
```

但它不起作用，我收到错误：

```
Fatal error: Class 'Symfony\Component\HttpKernel\Kernel' not found in __my_path__\app\AppKernel.php on line 7 
```

我应该如何准备 app.php 以获得最佳性能。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-03T17:08:57.500

查看 Symfony 标准发行版中默认的[app.php](https://github.com/symfony/symfony-standard/blob/2.1/web/app.php)文件。为了启用 APC，您的`app.php`文件应如下所示：

```
use Symfony\Component\ClassLoader\ApcClassLoader;
use Symfony\Component\HttpFoundation\Request;

$loader = require_once __DIR__.'/../app/bootstrap.php.cache';

// Use APC for autoloading to improve performance.
// Change 'sf2' to a unique prefix in order to prevent cache key conflicts
// with other applications also using APC.

$loader = new ApcClassLoader('sf2', $loader);
$loader->register(true);

require_once __DIR__.'/../app/AppKernel.php';
//require_once __DIR__.'/../app/AppCache.php';

$kernel = new AppKernel('prod', false);
$kernel->loadClassCache();
//$kernel = new AppCache($kernel);
$request = Request::createFromGlobals();
$response = $kernel->handle($request);
$response->send();
$kernel->terminate($request, $response); 
```

如果通过取消注释和行来启用 symfony[网关缓存，还可以提高性能。](http://symfony.com/doc/2.1/book/http_cache.html#symfony2-reverse-proxy)`require_once __DIR__.'/../app/AppCache.php';``$kernel = new AppCache($kernel);`

# java - 运行 Glassfish 3.1.2.2 时出错：地址 localhost:4848 已在使用中

> ID：15186099
> 
> 赞同：0
> 
> 时间：2013-03-03T13:21:08.430
> 
> 标签：java, jsp, intellij-idea, glassfish, port

我已经在端口 4848 上安装了我的 glassfish，然后我在 IntelliJ IDEA 中有一个测试项目，其中包含`.jsp`我想在 glassfish 上运行的文件。我在[这里](http://wiki.jetbrains.net/intellij/Developing_applications_for_GlassFish_Server)阅读了有关如何通过 IntelliJ 在 glassfish 上运行应用程序的教程，但是当我做我得到以下错误的工作：

```
Error running Glassfish 3.1.2.2: Address localhost:4848 is already in use 
```

如何解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-03T13:48:13.610

从您得到的错误来看，似乎一个玻璃实例已经在该端口上运行，并且 IntelliJ 正在尝试启动一个新实例。您是否通过命令行启动了 glassfish 实例？也许您可以尝试使用 IntelliJ 启动它，看看效果是否更好......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-10-17T12:47:19.920

它可能不仅是 glassfish，您还可以检查哪个应用程序正在使用端口 4848。为此，您应该在 cmd 中输入“netstat -ao”以找到该进程并将其删除。然后再次尝试运行 glassfish

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-12-28T16:59:31.233

在 SO Windows 上：在控制台中输入`netstat -ano`，您会看到端口和服务的 ID。然后你输入`taskkill /pid numberIDService`或`taskkill /f /pid numberIDService`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-06-20T02:41:12.893

在基于 Linux 的操作系统上，

```
sudo lsof -i:4848
sudo kill <PID> 
```

# php - 在我的 Apache 服务器上配置 SMTP 功能

> ID：15186100
> 
> 赞同：0
> 
> 时间：2013-03-03T13:21:10.627
> 
> 标签：php, apache, email, smtp

我的 Windows 8 机器上运行着 Apache、PHP、MySQL 组合。我想使用 PHP 邮件功能发送邮件，但后来得知我需要配置 SMTP 服务器。这个怎么做？如果该信息有任何用处，我已经安装了 Outlook。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-18T13:32:30.330

I used a library called "swiftmail" which can contact an external SMTP server (like gmail) and do the job. Turns out having a local SMTP server wasn't required after all.

Here is the link: [http://swiftmailer.org/](http://swiftmailer.org/)

# sql - 使用 OLE DB 命令组件 SSIS 更新记录

> ID：15186101
> 
> 赞同：1
> 
> 时间：2013-03-03T13:21:13.173
> 
> 标签：sql, etl, ssis

如何使用 OLEDB 命令组件更新现有记录，因为我使用查找转换来拆分现有记录，但我只需要更新已更改的记录/列/单元格。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T21:15:07.553

由于您没有提出您的具体情况，这里有一个非常好的分步详细说明：
[https ://www.simple-talk.com/sql/learn-sql-server/the-merge-statement-in-sql -server-2008/](https://www.simple-talk.com/sql/learn-sql-server/the-merge-statement-in-sql-server-2008/)

如果您需要更多帮助，请告诉我们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T13:41:36.613

use a merge statement in SQL which will enable you to write logic to check for column changes and only update the records that need it

# android - 设备数据库访问

> ID：15186103
> 
> 赞同：0
> 
> 时间：2013-03-03T13:21:15.900
> 
> 标签：android, adb

我在 android 设备上运行我的 android 应用程序，我想在设备上查看我的应用程序的**数据库**，我该怎么做？

我知道我们如何在模拟器中做到这一点，但我想知道我们如何在安卓设备中做到这一点。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-03-03T13:33:36.303

您是要手动还是以编程方式访问它？
如果手动，您可以查看在设备上使用 adb 或终端/文件资源管理器。

```
adb pull path_to_sqlite_db 
```

会把它放到你的电脑上，你可以随意检查它。

# java - Restlet 中的性能问题

> ID：15186104
> 
> 赞同：1
> 
> 时间：2013-03-03T13:21:22.813
> 
> 标签：java, rest, restlet

当我尝试同时通过 100 个线程从我的 API 请求资源时（这是一个简单的性能测试），我收到以下服务器错误消息：

```
Unable to run the following server-side task: Handle inbound messages 
```

我已经搜索了互联网，但找不到任何提示如何摆脱它。

任何经验如何处理该错误？

问候，厨师

***编辑***：

**客户：**

```
public class PerformanceTest  extends Thread {
static ClientResource client;
static int recCounter = 0;
public PerformanceTest(){
    super();
}
public static void main(String[] args){
    client = new ClientResource("http://localhost:8082/api/module/news/1");
    ChallengeScheme scheme = ChallengeScheme.HTTP_BASIC;
    ChallengeResponse authentication = new ChallengeResponse(scheme, "app+postapp", "");
    client.setChallengeResponse(authentication);    
    for(int i = 0; i < 100; i++){
        System.out.println("Starting test: " + i);
         new PerformanceTest().start();
    }
}

@Override
public void run() {
    JsonRepresentation entity;
    try {
        entity = new JsonRepresentation(client.get());
        recCounter++;
        System.out.println("(" + getRecCounter() + ") result: " + entity.getJsonObject().toString());
    } catch (Exception e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
}

private synchronized int getRecCounter(){
    return recCounter;
} 
```

**服务器：** 这是我启动服务器的应用程序类：

```
public class MyApplication extends Application {
private DB db;

public MyApplication() {
    db = new DB();
}

public static void main(String[] args) throws Exception {
    Component component = new Component();
    component.getServers().add(Protocol.HTTP, 8082);
    Application application = new MyApplication();
    // Attach the application to the component with a defined contextroot
    String contextRoot = "/api";
    component.getDefaultHost().attach(contextRoot, application);
    component.start();
}

public Restlet createInboundRoot() {
    router.attach("/module/news", NewsResource.class);
    router.attach("/module/news/{itemId}", NewsResource.class);

    router.attach("/module/news/item", NewsResource.class);
    router.attach("/module/news/item/{itemId}", NewsResource.class);

    // Create Verifier
    CredentialsVerifier verifier = new CredentialsVerifier(getDB());

    // Create a Guard
    ChallengeAuthenticator guard = new ChallengeAuthenticator(getContext(), ChallengeScheme.HTTP_BASIC, "app");
    guard.setVerifier(verifier);

    guard.setNext(router);
    return guard;
}

public synchronized DB getDB() {
    return this.db;
} 
```

}

# c++ - C++ 中的 Web 客户端

> ID：15186110
> 
> 赞同：2
> 
> 时间：2013-03-03T13:22:43.827
> 
> 标签：c++, html, .net, webclient

我正在编写一个需要能够将 HTML 源代码读入字符串的程序。

我已经阅读了有关 C# 的 WebClient 的信息，但我需要用 C++ 编写我的程序，但我不知道该怎么做（我以前从未使用过 WebClient）。

谁能给我一个简单的 C++ 示例程序，向我展示如何使用 WebClient 将 HTML 源代码转换为字符串？（或任何更好的方法）

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-03T13:34:33.110

请参阅此页面，*C++ 中的全功能 Windows HTTP 包装器*：

[http://www.codeproject.com/Articles/66625/A-Fully-Featured-Windows-HTTP-Wrapper-in-C](http://www.codeproject.com/Articles/66625/A-Fully-Featured-Windows-HTTP-Wrapper-in-C)

该页面的示例代码，看起来像你想要的：

```
void ProgressTest(void)
{
    // Set URL and call back function.
    WinHttpClient client(L"http://www.codeproject.com/", ProgressProc);
    client.SendHttpRequest();
    wstring httpResponseHeader = client.GetResponseHeader();
    wstring httpResponseContent = client.GetResponseContent();
} 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-03-03T13:29:48.543

我不知道 c# 的 webclient 是什么。要将文件读入字符串-：

```
 std::ifstream ifs("webpage.html");
 std::string str;
 str.assign((std::istreambuf_iterator<char>(ifs)),
            (std::istreambuf_iterator<char>())); 
```

# android - 全屏活动向导活动。当我与设备交互时，如何停止显示操作栏？

> ID：15186111
> 
> 赞同：10
> 
> 时间：2013-03-03T13:22:55.447
> 
> 标签：android, android-actionbar

当我使用[全屏活动向导](http://developer.android.com/tools/projects/templates.html#full-screen-activity)创建一个活动时，它会创建一个全屏活动，但是每当我单击屏幕上的任何位置时，操作栏都会显示几秒钟。我怎样才能阻止它这样做？

**FullScreenActivity.java 的完整代码**

```
/**
 * An example full-screen activity that shows and hides the system UI (i.e.
 * status bar and navigation/system bar) with user interaction.
 * 
 * @see SystemUiHider
 */
public class FullscreenActivity extends Activity {
    /**
     * Whether or not the system UI should be auto-hidden after
     * {@link #AUTO_HIDE_DELAY_MILLIS} milliseconds.
     */
    private static final boolean AUTO_HIDE = true;

    /**
     * If {@link #AUTO_HIDE} is set, the number of milliseconds to wait after
     * user interaction before hiding the system UI.
     */
    private static final int AUTO_HIDE_DELAY_MILLIS = 3000;

    /**
     * If set, will toggle the system UI visibility upon interaction. Otherwise,
     * will show the system UI visibility upon interaction.
     */
    private static final boolean TOGGLE_ON_CLICK = true;

    /**
     * The flags to pass to {@link SystemUiHider#getInstance}.
     */
    private static final int HIDER_FLAGS = SystemUiHider.FLAG_HIDE_NAVIGATION;

    /**
     * The instance of the {@link SystemUiHider} for this activity.
     */
    private SystemUiHider mSystemUiHider;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        setContentView(R.layout.activity_fullscreen);

        final View controlsView = findViewById(R.id.fullscreen_content_controls);
        final View contentView = findViewById(R.id.fullscreen_content);

        // Set up an instance of SystemUiHider to control the system UI for
        // this activity.
        mSystemUiHider = SystemUiHider.getInstance(this, contentView,
                HIDER_FLAGS);
        mSystemUiHider.setup();
        mSystemUiHider
                .setOnVisibilityChangeListener(new SystemUiHider.OnVisibilityChangeListener() {
                    // Cached values.
                    int mControlsHeight;
                    int mShortAnimTime;

                    @Override
                    @TargetApi(Build.VERSION_CODES.HONEYCOMB_MR2)
                    public void onVisibilityChange(boolean visible) {
                        if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.HONEYCOMB_MR2) {
                            // If the ViewPropertyAnimator API is available
                            // (Honeycomb MR2 and later), use it to animate the
                            // in-layout UI controls at the bottom of the
                            // screen.
                            if (mControlsHeight == 0) {
                                mControlsHeight = controlsView.getHeight();
                            }
                            if (mShortAnimTime == 0) {
                                mShortAnimTime = getResources().getInteger(
                                        android.R.integer.config_shortAnimTime);
                            }
                            controlsView
                                    .animate()
                                    .translationY(visible ? 0 : mControlsHeight)
                                    .setDuration(mShortAnimTime);
                        } else {
                            // If the ViewPropertyAnimator APIs aren't
                            // available, simply show or hide the in-layout UI
                            // controls.
                            controlsView.setVisibility(visible ? View.VISIBLE
                                    : View.GONE);
                        }

                        if (visible && AUTO_HIDE) {
                            // Schedule a hide().
                            delayedHide(AUTO_HIDE_DELAY_MILLIS);
                        }
                    }
                });

        // Set up the user interaction to manually show or hide the system UI.
        contentView.setOnClickListener(new View.OnClickListener() {
            @Override
            public void onClick(View view) {
                if (TOGGLE_ON_CLICK) {
                    mSystemUiHider.toggle();
                } else {
                    mSystemUiHider.show();
                }
            }
        });

        // Upon interacting with UI controls, delay any scheduled hide()
        // operations to prevent the jarring behavior of controls going away
        // while interacting with the UI.
        findViewById(R.id.dummy_button).setOnTouchListener(
                mDelayHideTouchListener);
    }

    @Override
    protected void onPostCreate(Bundle savedInstanceState) {
        super.onPostCreate(savedInstanceState);

        // Trigger the initial hide() shortly after the activity has been
        // created, to briefly hint to the user that UI controls
        // are available.
        delayedHide(100);
    }

    /**
     * Touch listener to use for in-layout UI controls to delay hiding the
     * system UI. This is to prevent the jarring behavior of controls going away
     * while interacting with activity UI.
     */
    View.OnTouchListener mDelayHideTouchListener = new View.OnTouchListener() {
        @Override
        public boolean onTouch(View view, MotionEvent motionEvent) {
            if (AUTO_HIDE) {
                delayedHide(AUTO_HIDE_DELAY_MILLIS);
            }
            return false;
        }
    };

    Handler mHideHandler = new Handler();
    Runnable mHideRunnable = new Runnable() {
        @Override
        public void run() {
            mSystemUiHider.hide();
        }
    };

    /**
     * Schedules a call to hide() in [delay] milliseconds, canceling any
     * previously scheduled calls.
     */
    private void delayedHide(int delayMillis) {
        mHideHandler.removeCallbacks(mHideRunnable);
        mHideHandler.postDelayed(mHideRunnable, delayMillis);
    }
} 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-28T02:32:49.323

如果我理解正确，您只想隐藏操作栏？

如果是，则更改此行（将 flag_hide_navigation 更改为 0）。

```
private static final int HIDER_FLAGS = 0;// SystemUiHider.FLAG_HIDE_NAVIGATION; 
```

并将其添加到 onCreate 调用中：

```
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    getWindow().requestFeature(Window.FEATURE_ACTION_BAR);   //new
    getActionBar().hide();                                   //new
    getWindow().setFlags(
         WindowManager.LayoutParams.FLAG_FULLSCREEN,WindowManager.LayoutParams.FLAG_FULLSCREEN);

    setContentView(R.layout.activity_fullscreen); 
```

之后，如果您想显示操作栏，只需从活动中的任何位置调用：

```
getActionBar().show(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-09-19T22:18:19.047

这对我有用。尽管导航器没有完全移除，但它并没有给用户太多时间进行交互，而且按钮图标是小圆点。这也减少了制作全屏屏幕所需的代码量。

```
SystemUiHider hider = null;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    //go full screen with no title
    this.requestWindowFeature(Window.FEATURE_PROGRESS); //show progress on loadup
    this.requestWindowFeature(Window.FEATURE_NO_TITLE); //hide the title bar
    this.getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN, WindowManager.LayoutParams.FLAG_FULLSCREEN); //go fullscreen

    setContentView(R.layout.activity_main);

    //hide the navigation controls
    final RelativeLayout mainLayout = (RelativeLayout)this.findViewById(R.id.mainLayout);
    hider = SystemUiHider.getInstance(this, mainLayout, SystemUiHider.FLAG_HIDE_NAVIGATION);
    hider.setup();
    hider.setOnVisibilityChangeListener(new SystemUiHider.OnVisibilityChangeListener() {
        @Override
        @TargetApi(Build.VERSION_CODES.HONEYCOMB_MR2)
        public void onVisibilityChange(boolean visible) {
            if (visible) {
                //will make navigator into small dots
                hider.hide(); 

                //must use delayed to force navigator to disappear completely
                final Handler mHideHandler = new Handler();
                final Runnable mHideRunnable = new Runnable() {
                    @Override
                    public void run() {
                        hider.hide();
                    }
                };
                mHideHandler.removeCallbacks(mHideRunnable);
                mHideHandler.postDelayed(mHideRunnable, 1000); //min 1 sec to work
            }
        }
    });
    hider.hide();

    //do the rest of your onCreate stuff here
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-06-23T07:54:50.463

我用 0 代替 3000 尝试了同样的方法

```
private static final int AUTO_HIDE_DELAY_MILLIS = 3000; 
```

`androidmanifest.xml` 但是它变得太迟钝了......所以，你在添加中进行更改的技巧

```
android:theme="@android:style/Theme.NoTitleBar.Fullscreen" 
```

申请`AndroidManifest.xml`不足

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-10-11T12:16:30.457

在 api19 中我们可以使用：

```
getWindow().getDecorView()
    .setSystemUiVisibility(View.SYSTEM_UI_FLAG_IMMERSIVE_STICKY
                           | View.SYSTEM_UI_FLAG_HIDE_NAVIGATION); 
```

隐藏导航栏和状态栏

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-03T14:28:50.633

我深入研究了代码并在没有物理导航按钮的 Android 4.2 设备上启动了活动。默认配置尽可能全屏。它隐藏了**状态栏**、**操作栏**和**导航栏**。那么如果不点击屏幕上的任何位置，用户应该如何退出您的活动呢？其他任何东西都会非常限制和糟糕的可用性。我认为这就是为什么不能操纵这种行为的原因。

相反，您可以做的是更改`SystemUiHider`它以隐藏状态栏和操作栏，但**不**隐藏导航栏。相反，它将导航栏变暗为三个淡点，请参见下面的屏幕截图。

![变暗的导航栏](../Images/28a1d6e97a2c7b46760a67b70a556ab1.png)

必须有更好的方法来实现这一点，但以下工作。在构造函数的末尾注释这些行`SystemUiHiderHoneycomb()`：

```
if ((mFlags & FLAG_HIDE_NAVIGATION) != 0) {
    // If the client requested hiding navigation, add relevant flags.
    mShowFlags |= View.SYSTEM_UI_FLAG_LAYOUT_HIDE_NAVIGATION;
    mHideFlags |= View.SYSTEM_UI_FLAG_LAYOUT_HIDE_NAVIGATION
            | View.SYSTEM_UI_FLAG_HIDE_NAVIGATION;
    mTestFlags = View.SYSTEM_UI_FLAG_HIDE_NAVIGATION;
} 
```

然后，活动在用户交互中保持全屏状态，您可以`toggle()`在特定事件中使用它。当然，您仍然需要更改我原来的答案才能禁用点击行为。

* * *

**原答案：**

我想你必须评论这部分：

```
// Set up the user interaction to manually show or hide the system UI.
contentView.setOnClickListener(new View.OnClickListener() {
    @Override
    public void onClick(View view) {
        if (TOGGLE_ON_CLICK) {
            mSystemUiHider.toggle();
        } else {
            mSystemUiHider.show();
        }
    }
}); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-22T22:43:35.017

将您的活动主题更改为没有操作栏。最好是从动作栏继承 Sherlock 活动并移除动作栏

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-01-22T09:26:53.287

虽然发布答案为时已晚，但据我所知，由于我正在使用提供的全屏活动模板工作`Android Studio`，我认为这个问题的答案是禁用操作栏，当用户与 UI 交互，这可以通过禁用`OnClickListener`on `contentView` ie来实现

```
contentView.setOnClickListener(new View.OnClickListener() {
    @Override
    public void onClick(View view) {
        if (TOGGLE_ON_CLICK) {
            mSystemUiHider.toggle();
        } else {
            mSystemUiHider.show();
        }
    }
}); 
```

即注释掉`onClick`方法实现。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2016-08-13T18:00:19.047

只需注释掉

```
if (TOGGLE_ON_CLICK) {
                    mSystemUiHider.toggle();
                } else {
                    mSystemUiHider.show();
                } 
```

默认情况下，状态为关闭。发生切换是因为还添加了一个 onclick 监听器来切换屏幕。您可以简单地不添加它并删除代码片段。

最新代码是 // 设置用户交互以手动显示或隐藏系统 UI。

```
mContentView.setOnClickListener(new View.OnClickListener() {
        @Override
        public void onClick(View view) {
           // toggle();
        } 
```

我只是注释掉了 toggle() 和瞧

# django - 在模板中显示模型字段的可能选择

> ID：15186112
> 
> 赞同：0
> 
> 时间：2013-03-03T13:23:02.547
> 
> 标签：django, django-models, django-templates

在我的练习中，我有一个书的 Django 模型，有一个字段“流派”。该字段有以下选项选择

```
GENRES_CHOICE = (
                 ('ADV','Adventure'),
                 ('FAN','Fantasy'),
                 ('POE','Poetry'),
                ) 
```

并且模型字段是

```
 genre = models.CharField(max_length = 3, blank = False, choices = GENRES_CHOICE, db_index = True, editable = False) 
```

在我的模板中，我想向用户显示类型列表（冒险、幻想、诗歌）和可用的键，以便可能将它们用作参数。

为此，我想要一个返回数据结构 GENRES_CHOICE 的函数，但我做不到。如何解决这个问题呢？

编辑：更多代码细节

appname= mybookshelf，文件 -> 模型/Book.py

```
# possible choices for the gerne field
GENRES_CHOICE = (
                  ('ADV','Adventure'),
                  ('FAN','Fantasy'),
                  ('POE','Poetry'),
                )

class Book(models.Model):
    """
    This is the book model

   ...

 ## ATTRIBUTES (better use init, but in Django not always possible)
    id = models.CharField(max_length = 64, blank = False, unique = True, primary_key = True,   editable = False)
    """ unique id for the element """

        genre = models.CharField(max_length = 3, blank = False, choices = GENRES_CHOICE, db_index = True, editable = False)
    """ book genre """

    published_date = models.DateField(null = True, auto_now_add = True, editable = False)
    """ date of publishing """ 
```

然后，进入另一个文件，假设我有 MyFunctions.py

```
from mybookshelf.models import GENRES_CHOICE 

    def getBookCategories():
        """
        This function returns the possible book categories 

        categories = GENRES_CHOICE 

        return categories 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-03T13:46:06.723

**视图.py**

```
from app_name.models import GENRES_CHOICE

def view_name(request):
    ...............

    return render(request, 'page.html', {
        'genres': GENRES_CHOICE
    }) 
```

**page.html**

```
{% for genre in genres %}
    {{genre.1}}<br/>
{% endfor %} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T09:43:04.893

我不是 100% 确定这是你所追求的，但如果你想向用户显示 GENRES_CHOICE 的列表，你可以在你的模板中这样做：

```
{% for choice_id, choice_label in genres %}
           <p> {{ choice_id }} - {{ choice_label }}   </p>        
{% endfor %} 
```

当然通过 GENRES_CHOICE 作为流派

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-14T13:09:10.720

您可以在模板中使用 get_modelfield_display() 方法，例如：

```
{{ book.get_genre_display }} 
```

# ios - 用于objective-c的具有正态分布的随机值生成器

> ID：15186113
> 
> 赞同：4
> 
> 时间：2013-03-03T13:23:11.457
> 
> 标签：ios, objective-c, c, normal-distribution

我想将数字生成到具有正态分布的数组中。Objective-c 或 c 中是否有任何函数可以帮助轻松获得结果而无需任何数学？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-03T14:29:31.290

使用 Box-Muller-Transformation：

1.）您需要两个均匀分布的随机数 u 和 v 作为区间 (0,1] 中的双精度数（需要排除 0）：

```
double u =(double)(random() %100000 + 1)/100000; //for precision
double v =(double)(random() %100000 + 1)/100000; //for precision 
```

2.) 计算均值为 0，标准差 sigma 为 1 的均匀分布值：

```
double x = sqrt(-2*log(u))*cos(2*pi*v);   //or sin(2*pi*v) 
```

3.）如果需要，为您的目标分布添加 sigma 和平均值，如下所示：

```
double y = x * sigmaValue + averageValue; 
```

4.）把它放在一个数组中

```
[randomNumberArray addObject:[NSNumber numberWithDouble:y]] 
```

objc没有功能`norminv`。所以，这里需要数学。

编辑：我喜欢使用`random()`能够播种随机值生成器

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-02T22:13:35.370

*让我先说，如果我错了，请纠正我！*

据我了解，Box-Muller 变换依赖于源数字本身是均匀分布的，因此使用 random() 或 rand() 作为 Box-Muller 的源数据集***不一定***会产生均匀分布。

相反，它旨在采用一组通用的均匀分布的随机数，并产生在二维坐标系中均匀分布的独立随机数对。

[维基百科：Box-Muller 变换](http://en.wikipedia.org/wiki/Box%E2%80%93Muller_transform)

* * *

然而还有另一种方式：

在大多数 Unix 系统（*以及 iOS 或 OSX 上的 Objective C*）上使用**rand48**函数库：

[参考资料：drand](http://pubs.opengroup.org/onlinepubs/007908775/xsh/drand48.html)

```
double drand48(void);
void srand48(long int seedval); 
```

srand48() 生成生成器的种子，drand48() 生成在区间 [0.0 - 1.0] 上均匀分布的随机数

# c++ - 引用不同类中的指针成员

> ID：15186114
> 
> 赞同：-3
> 
> 时间：2013-03-03T13:23:16.633
> 
> 标签：c++, pointers, reference, member

我有一个`Note`和一个`Track`班级，两者都是`*generator`成员。当我创建新`Note`对象时，我想将成员链接到的`generator`成员`Note`，`Track`但我不知道如何做到这一点。

```
#include <iostream>
using namespace std;

class Generator {
public:
    virtual float getSample(int sample)=0;
};

class Note {
public:

    Generator *generator; // THIS IS WHAT IS CAUSING ME TROUBLE
    Note(Generator *aGen){
        generator = aGen;
    }
};

class Synth  : public Generator{
public:
    virtual float getSample(int sample);
    int varA;
    int varB;
    Synth(){
        varA = 5;
        varB = 8;
    }
};

float Synth::getSample(int sample){
    varA = sample;
    varB = 3;

    return 0;
}

class Track {
public:
    Generator *generator;
    Track(){
        generator = new Synth();
    }
};

int main() {
    cout << "!!!Hello World!!!" << endl; // prints !!!Hello World!!!
    Track track = Track();
    cout << "test" << endl;
    return 0;
} 
```

我想过做这样的事情，但它不起作用：

```
Track track = Track();
Note n = Note(&track.generator); 
```

**错误**

```
prog.cpp: In function ‘int main()’: 
prog.cpp:48:35: error: no matching function for call to ‘Note::Note(Generator**)’ 
prog.cpp:48:35: note: candidates are: 
prog.cpp:13:5: note: Note::Note(Generator*) 
prog.cpp:13:5: note: no known conversion for argument 1 from ‘Generator**’ to ‘Generator*’ prog.cpp:9:7: note: Note::Note(const Note&) 
prog.cpp:9:7: note: no known conversion for argument 1 from ‘Generator**’ to ‘const Note&’ prog.cpp:48:10: warning: unused variable ‘n’ [-Wunused-variable] - See more at: http://ideone.com/E38ibe#sthash.V3QMcYJQ.dpuf 
```

[活的例子在这里。](http://ideone.com/E38ibe)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T13:25:18.003

`track.generator`已经是一个指针`Generator`，你不需要获取它的地址。

就留在身边

```
Node n = Node(track.generator); // without & operator 
```

更新代码：http: [//ideone.com/fAA4JX](http://ideone.com/fAA4JX)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T13:25:38.130

正如编译器告诉你的那样，这一行：

```
Note n = Note(&track.generator); 
```

尝试构造 a`Note`并将 a 提供`Generator**`给它的构造函数（因为`track.generator`有 type `Generator*`，所以`&track.generator`有 type `Generator**`）。

但是，您的`Note`类构造函数接受 a `Generator*`，而不是 a `Generator**`。只需这样做（注意，这里不需要*复制初始化，而是使用**直接初始化*）：

```
Track track;
Note n(track.generator); 
```

# c# - 只需使用 HttpWebRequest 导航到页面

> ID：15186123
> 
> 赞同：0
> 
> 时间：2013-03-03T13:23:58.300
> 
> 标签：c#, .net, httpwebrequest

我想导航到我的网址，我不需要回复或任何东西。

```
HttpWebRequest request = WebRequestUtil.CreateHttpWebRequest(url); 
```

我可以从服务器端记录我的导航，这不会自行导航，它只是创建请求对象。

当我创建`ResponseStream`请求时我可以导航，但我不需要响应。

是否可以`GET`不调用该`GetResponse`方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T13:31:49.950

不，那是不可能的。您需要请求响应才能发送请求。

您可以构建自己的客户端以直接使用 HTTP 协议，并创建一个不创建`Stream`对象来处理响应流的特殊方法，但响应流本身总是从服​​务器返回。

# php - php 动态创建不同图像大小版本的好主意？

> ID：15186128
> 
> 赞同：0
> 
> 时间：2013-03-03T13:24:41.953
> 
> 标签：php, image-processing, header

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T13:35:21.510

我这样做是创建一个新图像并存储在缓存文件夹中，然后下次如果图像已经存在，我会检索它或创建它。

像这样的东西：

```
 function resize_image($filename, $width, $height)
    {
    if (!file_exists($filename) || !is_file($filename))
    {
        return false;
    } 

    $info = pathinfo($filename);
    $extension = $info['extension'];
            $new_image = 'cache/' . utf8_substr($filename, 0, strrpos($filename, '.')) . '-' . $width . 'x' . $height . '.' . $extension;

            if (file_exists($new_image))
                    {
                      return $new_image;
                    }
                return new_iamge($filename, $width, $height);

} 
```

# api - 自动刷新 LinkedIn 访问令牌

> ID：15186130
> 
> 赞同：0
> 
> 时间：2013-03-03T13:24:43.447
> 
> 标签：api, rest, linkedin

我正在尝试在我的应用程序后台自动刷新访问令牌。我阅读了这篇博文（[https://developer.linkedin.com/blog/tips-and-tricks-refreshing-access-token](https://developer.linkedin.com/blog/tips-and-tricks-refreshing-access-token)），但我仍然无法弄清楚。

当我尝试使用此 POST 请求刷新令牌时（[https://www.linkedin.com/uas/oauth/authenticate?oauth_token=XXXXXXXXX](https://www.linkedin.com/uas/oauth/authenticate?oauth_token=XXXXXXXXX)，其中 XXXXXXXXX 被我之前获得的请求令牌替换）如上面的博客文章中所述，我得到一个空的访问令牌。

我在 Python 中执行这些步骤如下。

```
request_token_url = 'https://api.linkedin.com/uas/oauth/requestToken?scope=r_fullprofile+rw_groups'
authorize_url = 'https://www.linkedin.com/uas/oauth/authenticate'

consumer = oauth.Consumer(consumer_key, consumer_secret)
client = oauth.Client(consumer)

# fetch a request token
resp, content = client.request(request_token_url, "POST")

request_token = dict(urlparse.parse_qsl(content))

# send a request to refresh an access token
resp, content = client.request("%s?oauth_token=%s" % (authorize_url, request_token['oauth_token']), "POST")
print resp,content 
```

那么，resp是

```
{'-content-encoding': 'gzip',
 'age': '1',
 'connection': 'keep-alive',
 'content-language': 'en-US',
 'content-length': '0',
 'date': 'Sun, 03 Mar 2013 13:11:05 GMT',
 'location': 'https://www.linkedin.com/uas/oauth/authorize?oauth_token=9e8c5d13-208f-405d-885f-3365e7098fc1&state=',
 'p3p': 'CP="CAO DSP COR CUR ADMi DEVi TAIi PSAi PSDi IVAi IVDi CONi OUR DELi SAMi UNRi PUBi OTRi IND PHY ONL UNI PUR FIN COM NAV INT DEM CNT POL PRE"',
 'server': 'Apache-Coyote/1.1',
 'set-cookie': '_lipt=deleteMe; Expires=Thu, 01-Jan-1970 00:00:10 GMT; Path=/, bcookie="v=2&2b52692f-de6c-4ba5-9a2c-62e020790a41"; Version=1; Domain=linkedin.com; Max-Age=63072000; Expires=Tue, 03-Mar-2015 13:11:06 GMT; Path=/, leo_auth_token="GST:9isMS9qbt9c-2XNJU0diaae-LMc-uie4STjVn5qiIk_JtnNvbbPKMS:1362316266:d50e8735b56508fda71b68bd9a5395176e9e603d"; Version=1; Max-Age=1799; Expires=Sun, 03-Mar-2013 13:41:05 GMT; Path=/, sl="delete me"; Version=1; Max-Age=0; Expires=Thu, 01-Jan-1970 00:00:10 GMT; Path=/, s_leo_auth_token="delete me"; Version=1; Max-Age=0; Expires=Thu, 01-Jan-1970 00:00:10 GMT; Path=/, JSESSIONID="ajax:2593452035081810950"; Version=1; Path=/, visit="v=1&G"; Version=1; Max-Age=63072000; Expires=Tue, 03-Mar-2015 13:11:06 GMT; Path=/, lang="v=2&lang=en-us"; Version=1; Domain=linkedin.com; Path=/, X-LI-IDC=C1',
 'status': '302',
 'vary': 'Accept-Encoding',
 'x-li-uuid': 'TxiUiruqZNIVm5J4ldUQ0w=='} 
```

并且内容是空的，但它应该包含一个刷新的访问令牌。

我在这里做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T07:09:30.157

我认为您实际上应该将用户重定向（例如 302）到第二个端点，而不是向其发布消息。

# c# - how to update gridview based on dropdownlist item

> ID：15186136
> 
> 赞同：1
> 
> 时间：2013-03-03T13:24:52.760
> 
> 标签：c#, asp.net

I am creating a web page that contains one Dropdownlist and Gridview.

Query is Dropdownlist will contains SQL Server database table list. When I select a table name from dropdownlist the Gridview needs to show entire table data and able to perform `edit, update, delete, cancel` actions.

When I click `edit`, Gridview need to show `Update` and `Cancel` buttons and it update should update dropdownlist table and also delete.

Please any one can help.

Thanks in advance.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T13:29:36.930

您必须重新绑定您的网格视图，更改下拉列表的选定索引，如下所示

```
protected void DropDownList1_SelectedIndexChanged(object sender, EventArgs e)
{
    gridview.DataSource = dataSource;
    gridview.DataBind();
} 
```

其中 datasource 是您的数据库查询结果

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T13:36:01.327

您必须挂钩更改 dropdoenlist，然后更新您的网格

```
protected void YourDropDownList_SelectedIndexChanged(object sender, EventArgs e)
{
    YouGridview.DataSource = YourdataSource;
    YouGridview.DataBind();
} 
```

# python - 求 N-queens 谜题递归算法的唯一解

> ID：15186137
> 
> 赞同：1
> 
> 时间：2013-03-03T13:24:56.780
> 
> 标签：python, algorithm, n-queens

```
# -*- coding: utf-8 -*-

def puzzle(rows, cols):
    if rows == 0:
        return [[]]
    else:
        return new_queen(rows - 1, cols, puzzle(rows - 1, cols))

def new_queen(new_row, cols, plsd_queens):
    new_solutions = []
    for solution in plsd_queens:
        for new_col in range(cols):
            if test(new_row, new_col, solution):
                new_solutions.append(solution + [new_col])
    return new_solutions

def test(new_row, new_col, solution):
    for row in range(new_row):
        if solution[row] == new_col or solution[row] + row == new_col + new_row or\
                                solution[row] - row == new_col - new_row:
            return False
    return True 
```

大家好！我怎样才能找到这个 N 皇后谜题递归算法的唯一解？它只找到所有解决方案：在 8x8 上它将是 92 个解决方案，但唯一的是只有 12 个（其他解决方案是翻译并从这 12 个镜像）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T15:01:13.143

我认为这些很有用： [link1](http://en.wikipedia.org/wiki/Eight_queens_puzzle) [link2](http://www.youtube.com/watch?v=p4_QnaTIxkQ)

为了获得最佳结果，您应该通过动态编程来设计您的算法，并且可以在以下位置找到它： [google](https://www.google.com/search?q=google&ie=utf-8&oe=utf-8&aq=t&rls=org.mozilla:en-US:official&client=firefox-a#hl=en&sugexp=les;&gs_rn=5&gs_ri=psy-ab&pq=n%20queens%20problem&cp=19&gs_id=11d&xhr=t&q=n%20queens%20problem%20dynamic%20programming&es_nrs=true&pf=p&client=firefox-a&hs=MGW&rls=org.mozilla:en-US:official&sclient=psy-ab&oq=n%20queens%20problem%20dy&gs_l=&pbx=1&bav=on.2,or.r_gc.r_pw.r_qf.&bvm=bv.43148975,d.bGE&fp=218e9ca5fa938e68&biw=1366&bih=665) [Stackoverflow](https://stackoverflow.com/questions/7055891/8-queen-problem-using-dynamic-programming)

你设置了一个数组 a[n][count] 并将状态 i 保存在 a[..][i] 中。这是 n=8 的第一个项目示例：

a = {5,1,8,4,2,7,3,6}{1}，......

注意：每个解决方案都可以通过对称和旋转更改为 8 个状态。所以对于每个结果，你对称和旋转他们的解决方案来检查是否保存在你的数组中？

# c# - c# 使用 DataGridView 中的 ComboBox 修改 Mysql 中的单元格

> ID：15186142
> 
> 赞同：1
> 
> 时间：2013-03-03T13:26:00.483
> 
> 标签：c#, mysql, datagridview, combobox

我是新手，我需要一个详细的答案，对不起我的英语不好......我会尽力解释自己......我在 Mysql 中有 2 个表

```
 table1:  id_ticket , ticket_description, ticket_status(id_status)         
 table2 :    id_statu , status_name 
```

在我的应用程序中，我使用 table1 中的所有信息来填充 DataGridView，还添加了一个组合框列，组合框显示 table2 中的“status_name”，我想用组合框中包含的信息修改 ticket_status，我该怎么做那？

这是我的代码：

```
public void CreateAssignedToMe(string ConnString)
    {
        string assignedTo = textBoxUid.Text;
        string query = "SELECT * FROM reports WHERE ticket_assignee='"+assignedTo+"' AND ticket_resolution < 3;";

        AssignToMe = new AssignedToMe();
        AssignToMe.ConnString = ConnString;
        DataGridView dgvReports = AssignToMe.dataGridViewAssignedToMe;

        try
        {
            MySqlConnection conn = new MySqlConnection(ConnString);
            conn.Open();
            MySqlDataAdapter daUsers = new MySqlDataAdapter(query,ConnString);
            DataSet dsUsers = new DataSet();
            daUsers.Fill(dsUsers,"report");
            dgvReports.DataSource = dsUsers;
            dgvReports.DataMember = "report";
            dgvReports.AllowUserToAddRows = false;
            dgvReports.AllowUserToDeleteRows = false;
            dgvReports.Columns["ticket_departmentResponsive"].Visible = false;
            dgvReports.Columns["ticket_assignee"].Visible = false;

                string queryStatus = "SELECT * FROM status";
                MySqlDataAdapter daStatus = new MySqlDataAdapter(queryStatus, ConnString);                  
                DataSet dsStatus = new DataSet();
                MySqlCommandBuilder builder = new MySqlCommandBuilder(daStatus);
                daStatus.Fill(dsStatus, "Resolution");

                daStatus.UpdateCommand = builder.GetUpdateCommand();

                DataGridViewComboBoxColumn cbbox = new DataGridViewComboBoxColumn();
                BindingSource StatusBindingSource = new BindingSource();
                StatusBindingSource.DataSource = dsStatus;
                StatusBindingSource.DataMember = "Resolution";
                cbbox.HeaderText = "Resolution";
                cbbox.DropDownWidth = 90;
                cbbox.DataSource = StatusBindingSource;
                cbbox.DisplayMember = "status_name";
                dgvReports.Columns.Add(cbbox);

            AssignToMe.ShowDialog();

        }
        catch(MySqlException ex)
        {
            MessageBox.Show(ex.Message.ToString());
        } 
```

}

我无法发布图片:(

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T13:49:36.577

您必须添加[DataGridView.CellValueChanged Event](http://msdn.microsoft.com/en-us/library/system.windows.forms.datagridview.cellvaluechanged.aspx)。当您更改任何单元格值时，将执行分配给该事件的函数。

```
// adding event handler (somewhere after dgvReports initialization)
dgvReports.CellValueChanged += new DataGridViewCellEventHandler(dgvReports_CellValueChanged);

// function that handles event
private void dgvReports_CellValueChanged(object sender, DataGridViewCellEventArgs e)
{
    // `e` argument will contain e.RowIndex and e.ColumnIndex properties
    // they may be used to determine which particular cell was changed

} 
```

在事件处理程序中，您应该检查更改了哪些列/单元格（行和单元格索引应该通过`DataGridViewCellEventArgs e`参数传递给处理`CellValueChanged`事件的方法）。

在那次检查之后 - 你应该“做你的更新”。

# javascript - use external .js to call .bind()

> ID：15186146
> 
> 赞同：0
> 
> 时间：2013-03-03T13:26:41.900
> 
> 标签：javascript, html, click, bind, external

im trying to call .bind("click") from an external .js file (js1.js).

here is the code:

js1.js:

```
$(function() {
$("p").bind("click",function(){
  alert("The paragraph was clicked.");
});
}); 
```

page.html:

```
<head>
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
<link rel="stylesheet" type="text/css" media="screen" href="./css/mystyle.css" />
<link rel="stylesheet" href="./css/global.css">
<script type="text/javascript" src="./js/js1.js"></script>
<title>New WebPage</title>
</head>
<body>
<p>Click me!</p>
</body> 
```

this code does not work in my files.

i found it from w3scools and it is working in their site:

```
<!DOCTYPE html>
<html>
<head>
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
<script>
$(document).ready(function(){
$("p").bind("click",function(){
alert("The paragraph was clicked.");
});
});
</script>
</head>
<body>
<p>Click me!</p>
</body>
</html> 
```

how can i make it running from my external .js? any ideas?

thanks.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T13:29:48.803

从外观上看，您还没有在页面上添加 jQuery。在您的脚本之前添加 jQuery。

```
<link rel="stylesheet" type="text/css" media="screen" href="./css/mystyle.css" />
<link rel="stylesheet" href="./css/global.css">
<script type="text/javascript" src="path/to/jQuery.js"></script>
<script type="text/javascript" src="./js/js1.js"></script>
<title>New WebPage</title> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T13:32:05.613

如果您忘记添加此行

```
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script> 
```

所以`<head> </head>`先把它添加到你的部分。否则你的脚本不能工作。波纹管为我工作的完整代码..

```
<html>
<head>
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
<script>
$(document).ready(function(){
$('#p').bind('click', function(){
    alert('The paragraph was clicked.');
});
});
</script>
<style>
#p{cursor:pointer;}
</style>
</head>
<body>
<p id="p">Click me!</p>
</body>
</html> 
```

# java - customized textfieldUI look&feel

> ID：15186147
> 
> 赞同：1
> 
> 时间：2013-03-03T13:26:50.150
> 
> 标签：java, swing, user-interface

Code below allows to change default TextFieldUI to allow you to have hints shown on the JTextField. The problem I'm having is, I'm using nimbus look and feel for my program and when I change this textfieldUI, everything works fine, as it should, but textfield look and feel changes to ugly looking one. I think, since I'm overriding defaults I should set look and feel in this code manually, but just don't know how to do it!

```
import java.awt.Color;
java.awt.Graphics;
import java.awt.event.FocusEvent;
import java.awt.event.FocusListener;

import javax.swing.plaf.basic.BasicTextFieldUI;
import javax.swing.text.JTextComponent;

public class HintTextFieldUI extends BasicTextFieldUI implements FocusListener {

private String hint;
private boolean hideOnFocus;
private Color color;

public Color getColor() {
    return color;
}

public void setColor(Color color) {
    this.color = color;
    repaint();
}

private void repaint() {
    if(getComponent() != null) {
        getComponent().repaint();           
    }
}

public boolean isHideOnFocus() {
    return hideOnFocus;
}

public void setHideOnFocus(boolean hideOnFocus) {
    this.hideOnFocus = hideOnFocus;
    repaint();
}

public String getHint() {
    return hint;
}

public void setHint(String hint) {
    this.hint = hint;
    repaint();
}
public HintTextFieldUI(String hint) {
    this(hint,false);
}

public HintTextFieldUI(String hint, boolean hideOnFocus) {
    this(hint,hideOnFocus, null);
}

public HintTextFieldUI(String hint, boolean hideOnFocus, Color color) {
    this.hint = hint;
    this.hideOnFocus = hideOnFocus;
    this.color = color;
}

@Override
protected void paintSafely(Graphics g) {
    super.paintSafely(g);
    JTextComponent comp = getComponent();
    comp.setu
    if(hint!=null && comp.getText().length() == 0 && (!(hideOnFocus && comp.hasFocus()))){
        if(color != null) {
            g.setColor(color);
        } else {
            g.setColor(comp.getForeground().brighter().brighter().brighter());              
        }
        int padding = (comp.getHeight() - comp.getFont().getSize())/2;
        g.drawString(hint, 2, comp.getHeight()-padding-1);          
    }
}

@Override
protected void installListeners() {
    super.installListeners();
    getComponent().addFocusListener(this);
}
@Override
protected void uninstallListeners() {
    super.uninstallListeners();
    getComponent().removeFocusListener(this);
}

public void focusGained(FocusEvent e) {
    // TODO Auto-generated method stub
    if(hideOnFocus) repaint();
}

public void focusLost(FocusEvent e) {
    // TODO Auto-generated method stub
    if(hideOnFocus) repaint();  
} 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T18:44:07.300

我不知道 nimbus 风格是什么样的，但也许[Text Prompt](http://tips4java.wordpress.com/2009/11/29/text-prompt/)会为你工作。

# python - Operation on value of a particular key in a dictionary stored as a list in Python

> ID：15186149
> 
> 赞同：0
> 
> 时间：2013-03-03T13:27:07.657
> 
> 标签：python, list, dictionary, python-2.7

Need to perform an operation in a dictionary which has a values as a list of dictionaries

```
my_dicts = \
       {"A": [
             { 'key1 a' : 'value1',
               'key2 a' : 'value2' 
             },

             { 'key1 a' : 'value3',  
               'key2 a' : 'value4' 
             }
            ],

        "B": [
             { 'key1 b' : 'value5',
               'key2 b' : 'value6' 
             },

             { 'key1 b' : 'value7',  
               'key2 b' : 'value8' 
             }
            ]
} 
```

How can we peform an operaion on all the values who have "key2" as substring in its key? i.e. operation on value2, value4, value6 and value8\. "key2" is a substring of "key2 a", "key2 b"

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-03T13:30:10.597

您必须*遍历*所有*嵌套*字典的*所有*键：

 *```
# generator expression over all values for keys that contain `key2`.
key2values = (v for lst in my_dicts.itervalues() 
                    for dct in lst
                        for k, v in dct.iteritems()
                            if 'key2' in k)

for value in key2values:
    # loops over `value2`, `value4`, `value6`, `value8` in an arbitrary order. 
```

示范：

```
>>> key2values = (v for lst in my_dicts.itervalues() 
...                     for dct in lst
...                         for k, v in dct.iteritems()
...                             if 'key2' in k)
>>> for value in key2values:
...     print value
... 
value2
value4
value6
value8 
```

如果您想避免循环遍历所有内容，则需要重新考虑数据结构，或者构建并维护结构中的索引。

如果您需要操作键值对，则需要更多信息。您可以在循环中包含“父”字典：

```
key2values = (dct, k, v for lst in my_dicts.itervalues() 
                    for dct in lst
                        for k, v in dct.iteritems()
                            if 'key2' in k) 
```

并在遍历生成器时解压缩该信息：

```
for parent, key, value in key2values:
    # parent[key] is equal to value. 
```*

# android - 退出应用程序时关闭蓝牙

> ID：15186156
> 
> 赞同：1
> 
> 时间：2013-03-03T13:27:50.977
> 
> 标签：android, bluetooth

作为对我的问题的介绍，我会告诉你，我已经搜索了正确的做事方式，但仍然没有找到答案。

我在 stackoverflow 中提出的许多问题中看到，Android 中的退出应用程序只需单击“主页”按钮即可完成。我看到有人说在您的应用程序上设置“退出”按钮并不常见。

我的问题来了。假设我在我的应用程序中打开了蓝牙连接，这样两个玩家就可以用两部手机/平板电脑互相对战。现在，他们想出去，或者他们想继续他们的生活。如何关闭蓝牙？为我执行此操作的应用程序是否有超时？我应该启动一个停机时间计数器来关闭蓝牙吗？如果用户决定出去阅读短信，然后返回应用程序，发现蓝牙已关闭，该怎么办？

换句话说，当不再需要蓝牙而不干扰用户时，处理关闭蓝牙的正确方法是什么？

对不起，这个问题很长，我只是想让自己清楚。

谢谢， AJ

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-03T13:38:46.337

您可以覆盖活动中的 onPause() 方法以禁用蓝牙，并覆盖活动中的 onResume() 方法以再次启用它。

但是，我不建议这样做。对于初学者来说，打开/关闭硬件需要一秒钟的时间。另外，如果用户正在使用其他蓝牙连接设备怎么办？暂停您的应用程序会切断该连接。如果用户启动应用程序时蓝牙已经打开怎么办？他们可能不希望您的应用程序改变这一点。

我的建议是当你启动你的应用程序时，看看是否启用了 BT。如果不是，提示用户打开它。如果你真的打算自己清理，你可以在我刚才提到的提示中添加一个复选框，上面写着“退出时再次禁用它”，让他们选择是否需要。

# java - Java - 在另一个类中使用 Main 中定义的类

> ID：15186157
> 
> 赞同：0
> 
> 时间：2013-03-03T13:28:19.933
> 
> 标签：java, class, compiler-errors

我是 Java 新手，我们必须做这个小项目。所以我有3个以上的课程。

我的代码在pastebin [http://pastebin.com/GEq9DLiP](http://pastebin.com/GEq9DLiP)

等等等等。问题是，在第三类它是

```
"kangelane cannot be resolved" 
```

但是 kangelane 已经在 Main.java 中“定义”了，它们在同一个包中。哦，Eclipse 还想在之后添加“开放括号”

`int sook = 4;`或者

```
int dam; 
```

即使所有开括号都关闭，反之亦然

我在“Voitleja.java”中有 Getter 和 Setter，这样就可以了。它也有效，当我只有 2 节课而不是 3 节课时（Voitlus 在 Main）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T13:37:12.187

问题是 main 是一个静态类，如果你想在 main 和 oter 类中使用一个变量，你必须将它定义为一个静态变量，对于你的例子你应该这样做：

```
public class Main {
static Voitleja kangelane;
            public static void main(String[] args) {
                    String nimi = JOptionPane.showInputDialog("Sisestage võitleja nimi");
                    kangelane = new Voitleja(nimi, 55, 12);
            }
    } 
```

然后在你的另一个班级（假设导入是正确的）

```
 public class Voitlus{
            Random generator = new Random();
            int dam;
            int sook = 4;
            while (true) {
                    Main.kangelane.setElud(kangelane.getElud() + 7);
            }
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T13:32:10.303

```
public static void main(String[] args) {
    String nimi = JOptionPane.showInputDialog("Sisestage võitleja nimi");
    Voitleja kangelane = new Voitleja(nimi, 55, 12);
} 
```

（之后）

```
while (true) {
    kangelane.setElud(kangelane.getElud() + 7);
} 
```

变量在不同的范围内。您必须在声明`kangelane`后立即`public class`声明，以便两种方法都可以“看到”它。

# algorithm - 蒙特卡洛圆周率法

> ID：15186163
> 
> 赞同：3
> 
> 时间：2013-03-03T13:29:25.857
> 
> 标签：algorithm, r

我尝试在 R 中计算 Monte Carlo pi 函数。我在代码中遇到了一些问题。现在我写这段代码：

```
ploscinaKvadrata  <- 0
ploscinaKroga <- 0
n = 1000
for (i in i:n) {
  x <- runif(1000, min= -1, max= 1)
  y <- runif(1000, min= -1, max= 1)
  if ((x^2 + y^2) <= 1) {
    ploscinaKroga  <- ploscinaKroga + 1
  } else {
    ploscinaKvadrata <- ploscinaKvadrata + 1
  }
    izracunPi = 4* ploscinaKroga/ploscinaKvadrata
}

izracunPi 
```

这不起作用，但我不知道如何解决它。

我还想编写一个代码来绘制这个（正方形内有圆圈和点）。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-03T13:54:23.870

Here is a vectorized version (and there was also something wrong with your math)

```
N <- 1000000
R <- 1
x <- runif(N, min= -R, max= R)
y <- runif(N, min= -R, max= R)
is.inside <- (x^2 + y^2) <= R^2
pi.estimate <- 4 * sum(is.inside) / N
pi.estimate
# [1] 3.141472 
```

As far as plotting the points, you can do something like this:

```
plot.new()
plot.window(xlim = 1.1 * R * c(-1, 1), ylim = 1.1 * R * c(-1, 1))
points(x[ is.inside], y[ is.inside], pch = '.', col = "blue")
points(x[!is.inside], y[!is.inside], pch = '.', col = "red") 
```

but I'd recommend you use a smaller `N` value, maybe 10000.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T14:26:31.957

这是一款有趣的游戏——网上流传着许多版本。这是我从命名源中破解的一个（尽管他的代码有点天真）。

来自[http://giventhedata.blogspot.com/2012/09/estimating-pi-with-r-via-mcs-dart-very.html](http://giventhedata.blogspot.com/2012/09/estimating-pi-with-r-via-mcs-dart-very.html)

```
est.pi <- function(n){

# drawing in  [0,1] x [0,1] covers one quarter of square and circle
# draw random numbers for the coordinates of the "dart-hits"
a <- runif(n,0,1)
b <- runif(n,0,1)
# use the pythagorean theorem
c <- sqrt((a^2) + (b^2) )

inside <- sum(c<1)
#outside <- n-inside

pi.est <- inside/n*4

 return(pi.est)
} 
```

错字'nside'到'inside'

# tapestry - Tapestry 5 中的所有字符串文字都以小写形式显示

> ID：15186165
> 
> 赞同：0
> 
> 时间：2013-03-03T13:29:35.510
> 
> 标签：tapestry

我是 Tapestry5 (5.3.6) 的新手，在显示标签和文本时遇到问题。

```
<h1>
      <t:pagelink page="index">First Tutorial</t:pagelink>
</h1> 
```

上面的标签总是显示为“第一个教程”，tapestry 总是用小盒子显示每件事。

知道如何配置挂毯以保留字符串的大小写。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-03T14:14:12.467

Tapestry 不修改文本大小写。您应该检查您的 css 以查看是否有任何`text-transform:lowercase`适用于该元素的规则。

# c# - Math.Sin 给了我错误的答案吗？

> ID：15186177
> 
> 赞同：1
> 
> 时间：2013-03-03T13:30:54.810
> 
> 标签：c#, math, trigonometry

我正在尝试使用 Math.Sin() 计算 sin(pi 弧度)。我正在使用以下代码。

```
 double degrees = 180;
        double radians = Math.PI / 180 * degrees;
        Console.WriteLine(Math.Sin(radians)); 
```

它给了我一个价值

> 1.22460635382238E-16

这是什么原因？当然它应该返回值 0 对吗？

请赐教。谢谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-03T13:38:08.097

1.22460635382238E-16 基本上是0。它实际上代表数字

0.000000000000000122460635382238。这个数字接近0。这基本上只是因为不同的舍入误差都聚集在一起。

查看[http://en.wikipedia.org/wiki/Floating_point](http://en.wikipedia.org/wiki/Floating_point)了解更多信息。

# android - 在网格视图中更改视图

> ID：15186178
> 
> 赞同：0
> 
> 时间：2013-03-03T13:30:55.193
> 
> 标签：android, gridview, view

我在活动 A 的 gridview 中有视图。在活动 B 中，如果发生某些操作，我想在 gridview 的视图上添加小复选标记。当我回到活动 A 时，我想在同一个网格视图中显示这个带有这个小复选标记的视图。我将如何做到这一点？

这是我的包含网格视图的活动

```
public class LogoSelectionActivity extends Activity {

static int pos;
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_list_logos);

    GridView gridview = (GridView) findViewById(R.id.gridview);
    gridview.setAdapter(new ImageAdapter(this));

    gridview.setOnItemClickListener(new OnItemClickListener() {
        public void onItemClick(AdapterView<?> parent, View v, int position, long id) {
            pos = position;

            if(ImageAdapter.items[position] == 0){
                Intent intent = new Intent(LogoSelectionActivity.this, LogoActivity.class);
                intent.putExtra ("clicked_position", position);
                startActivity(intent);
            }else{

                Intent intent = new Intent(LogoSelectionActivity.this, CorrectActivity.class);
                startActivity(intent);
            }
        }
    });
} 
```

这是我比较输入的其他活动：

```
public class LogoActivity extends Activity{

EditText text;
Button check;
Boolean a;
int id;
Names name;
@Override

protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_logo);

    check = (Button) findViewById(R.id.Check_button);
    text = (EditText) findViewById(R.id.editText1);
    ImageView view = (ImageView)findViewById(R.id.imageView1);
    final ImageView incorrect = (ImageView)findViewById(R.id.incorrect);
    switch (getIntent().getIntExtra ("clicked_position", -1))
    {
      case 0:
        view.setImageResource(R.drawable.adese);
        id = R.drawable.adese;
        break;
      case 1:
         view.setImageResource(R.drawable.birvar);
         id = R.drawable.birvar;
         break;
      case 2:
         view.setImageResource(R.drawable.agaoglu);
         break;
      case 3:
          view.setImageResource(R.drawable.akinsoft);
          break;
      default:
         view.setImageResource(R.drawable.afra);
         id = R.drawable.afra;
    }
    name = Names.forDrawable(id);
    check.setOnClickListener(new View.OnClickListener() {
        public void onClick(View v) {

            a=name.isCorrect(text.getText().toString());
            if(a==true){    
            ImageAdapter.items[LogoSelectionActivity.pos] = 1;
            Intent intent = new Intent(LogoActivity.this, CorrectActivity.class);
            startActivity(intent);
            }
            else{
                incorrect.setVisibility(0);
            }
        }
        });
    }
} 
```

如果 a 返回 true，当用户返回第一个活动时，我想在网格视图中的视图上放一个小复选标记。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T15:58:26.770

试试这个代码

```
package com.shreeexample.grid;

import android.content.Context;
import android.util.Log;
import android.view.LayoutInflater;
import android.view.View;
import android.view.View.OnClickListener;
import android.view.ViewGroup;
import android.widget.BaseAdapter;
import android.widget.ImageView;
import android.widget.TextView;

public class ImageAdapter extends BaseAdapter{

    private Context context;
    int checked=0;
    private final String[] mobileValues;
    public ImageAdapter(Context context, String[] mobileValues) {
        this.context = context;
        this.mobileValues = mobileValues;
    }

    @Override
    public int getCount() {
        // TODO Auto-generated method stub
        return mobileValues.length;
    }

    @Override
    public Object getItem(int position) {
        // TODO Auto-generated method stub
        return null;
    }

    @Override
    public long getItemId(int position) {
        // TODO Auto-generated method stub
        return 0;
    }

    public View getView(final int position, View convertView, ViewGroup parent) {

        final ImageView img_select;
        final int selectedPosition = -1; 

        LayoutInflater inflater = (LayoutInflater) context
            .getSystemService(Context.LAYOUT_INFLATER_SERVICE);

        View gridView;

        if (convertView == null) {

            gridView = new View(context);

            // get layout from mobile.xml
            gridView = inflater.inflate(R.layout.two, null);

            // set value into textview
            TextView textView = (TextView) gridView
                    .findViewById(R.id.grid_item_label);
            textView.setText(mobileValues[position]);

            // set image based on selected text
            ImageView imageView = (ImageView) gridView
                    .findViewById(R.id.grid_item_image);
            img_select = (ImageView)gridView.findViewById(R.id.grid_item_image_select);

            String mobile = mobileValues[position];

            if (mobile.equals("Windows")) {
                imageView.setImageResource(R.drawable.ic_launcher);
            } else if (mobile.equals("iOS")) {
                imageView.setImageResource(R.drawable.ic_launcher);
            } else if (mobile.equals("Blackberry")) {
                imageView.setImageResource(R.drawable.ic_launcher);
            } else {
                imageView.setImageResource(R.drawable.ic_launcher);
            }

            imageView.setOnClickListener(new OnClickListener() {

                @Override
                public void onClick(View v) {
                    // TODO Auto-generated method stub
                    img_select.setFocusable(true);
                    img_select.setEnabled(true);
                    if(checked==0)
                    {

                        img_select.setBackgroundResource(android.R.drawable.btn_plus);

                    checked =1;
                }
                else
                {
                    img_select.setBackgroundResource(0);
                    checked=0;
                }

                }
            });

        } else {
            gridView = (View) convertView;
        }

        return gridView;
    }
} 
```

为此制作这样的布局

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

    <ImageView
        android:id="@+id/grid_item_image"
        android:layout_width="50px"
        android:layout_height="50px"
        android:layout_marginRight="10px"
        android:src="@drawable/ic_launcher" >
    </ImageView>
    <ImageView
        android:id="@+id/grid_item_image_select"
        android:layout_width="50px"
        android:layout_height="50px"
        android:layout_marginRight="10px"
        android:src="@drawable/ic_launcher" >
    </ImageView>

    <TextView
        android:id="@+id/grid_item_label"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="label"
        android:layout_marginTop="5px"
        android:textSize="15px" 
        android:layout_below="@+id/grid_item_image">
    </TextView>

</RelativeLayout> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T13:45:03.487

GridView 使用来自适配器的数据。您必须更改适配器的数据并通知适配器数据已更改。然后，更新方法可以处理 Gridview 中的问题。也许这个例子可以帮助你：http: [//developer.android.com/guide/topics/ui/layout/gridview.html](http://developer.android.com/guide/topics/ui/layout/gridview.html)

为了让活动 A 对活动 B 中的操作做出反应，我想你可能想看看 Intents 和 Intent Filters：http: [//developer.android.com/guide/components/intents-filters.html](http://developer.android.com/guide/components/intents-filters.html)

否则，请提供您的一些代码供我们评论。

# xcode - 从导航控制器上的自动后退按钮中删除文本

> ID：15186184
> 
> 赞同：1
> 
> 时间：2013-03-03T13:32:09.987
> 
> 标签：xcode, uinavigationcontroller, uibarbuttonitem, back-button

我确定这在之前已经介绍过，但我找不到我所追求的确切内容。我正在为导航控制器上的后退按钮使用自定义图像，并且需要删除文本，有没有一种简单的方法可以做到这一点？谢谢。

![在此处输入图像描述](../Images/75ea845bdec812eaa2e6e2af57c84c39.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T13:36:22.347

尝试如下设置后退按钮：

```
self.navigationItem.leftBarButtonItem = 
[[UIBarButtonItem alloc] initWithImage:[UIImage imageNamed:@"back-arrow.png"]
                                        style:UIBarButtonItemStyleBordered
                                       target:self
                                       action:@selector(backButtonPressed:)];

self.navigationItem.leftBarButtonItem.title = @""; 
```

# jsf - 从 JBoss 7.1.1 模块向应用程序添加库

> ID：15186189
> 
> 赞同：1
> 
> 时间：2013-03-03T13:32:48.573
> 
> 标签：jsf, jakarta-ee, jboss7.x

我正在使用 Intellij Idea 12 和 JBoss 7.1.1 应用服务器。我是否需要将 javaee6 jar 添加到我的应用程序库中才能部署它？

或者，我是否可以从 JBoss AS 7.1.1 的模块中添加包含 Java EE 技术实现的库，例如 Faces、EJB、Java EE jar 文件本身等等？

例如，如果我想从 JBoss 7.1.1 的模块中将 JSF 库添加到我的应用程序库中怎么办？我怎样才能做到这一点？

Maven的情况如何？在这种情况下如何解决依赖关系？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-03T15:07:41.393

JBoss 是一个兼容 Java EE 6 的应用服务器，这意味着它已经拥有 Java EE 标准的所有实现，这些库在运行时可用于应用程序，因此无需添加任何额外的库来使用所有 Java EE 6个特点。

如果您使用的是 maven，只需像这样引用要在运行时使用的库（“提供”范围）

```
<dependency>
     <groupId>org.jboss.spec.javax.faces</groupId>
     <artifactId>jboss-jsf-api_2.1_spec</artifactId>
     <scope>provided</scope>
</dependency> 
```

如果您不确定从哪里开始，请尝试[JBoss 快速入门](https://github.com/jboss-jdf/jboss-as-quickstart)中的一个或多个项目。每种主要的 Java EE 技术至少有一个，还有一些将这些技术组合在一起的示例。

编辑：似乎这里真正的问题是如何将 Java EE 库添加到您的项目中，这取决于构建系统。如果您使用的是 maven，我建议您从列表中选择一个快速入门 - [kitchesink](https://github.com/jboss-jdf/jboss-as-quickstart/tree/master/kitchensink)是一个很好的示例，并查看`pom.xml`. 将 Java EE 标准的实现添加到您的项目中，而不是由应用程序服务器提供的实现不是一个好主意。这可能会导致部署或运行​​时出现问题。

# c# - Sql Exception Unhandled '=' 附近的语法不正确？

> ID：15186191
> 
> 赞同：0
> 
> 时间：2013-03-03T13:33:06.617
> 
> 标签：c#, sql, exception

这是我的搜索按钮：

```
private void btnSearch_Click(object sender, EventArgs e)
    {
        string RegNo = txtRegNo.Text;
        txtFname.Text = dba.ReturnStudentData("RegNo", "Student", RegNo, "PhoneNo");
        txtLname.Text = dba.ReturnStudentData("RegNo", "Student", RegNo, "Lname");
        txtPhoneNo.Text = dba.ReturnStudentData("RegNo", "Student", RegNo, "PhoneNo");

    } 
```

这是我的 DB_Access ：

```
public string ReturnStudentData(string Primary_key, string Table_Name, string RegNo, string Column)
    {
        string temp = "";
        if (conn.State.ToString() == "Closed")
        {
            conn.Open();
        }
        SqlCommand newCmd = conn.CreateCommand();
        newCmd.CommandType = CommandType.Text;
        newCmd.CommandText="SELECT"+Column+"FROM"+Table_Name+"WHERE"+Primary_key+"="+RegNo+"";
        SqlDataReader dr = newCmd.ExecuteReader(); **// here i got error**

        while(dr.Read())
        {
            temp = dr[Column].ToString();
        }
        dr.Close();
        conn.Close();
        return temp;
    } 
```

这是我上面的代码，当我搜索数据库时出现错误输入主号码意味着..谁能帮助我..

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-03T13:40:50.143

首先，您应该在 sql 命令中添加空格

```
newCmd.CommandText="SELECT "+Column+" FROM "+Table_Name+" WHERE "+Primary_key+"="+RegNo+""; 
```

否则你会得到类似的东西：

```
SELECTcolumnt1,column2FROMmyTableWHEREKey=123 
```

代替：

```
SELECT columnt1,column2 FROM myTable WHERE Key=123 
```

其次打印 newCmd.CommandText 以查看最终查询是什么。

# c++ - C++ 对象表示

> ID：15186192
> 
> 赞同：2
> 
> 时间：2013-03-03T13:33:07.743
> 
> 标签：c++, oop, class, object, memory-management

我有一个疑问：我可以声明一个指向类成员函数的指针

```
void (*MyClass::myFunc)(void); 
```

我可以声明一个指向类成员变量的指针

```
int (MyClass::*var); 
```

我的问题是：一个对象（由成员函数和成员变量组成）在内存（asm 级别）中是如何构造的？

我不确定，因为除了多态性和运行时虚函数外，即使没有对象，我也可以声明指向成员函数的指针，这意味着代码函数在多个类之间共享（尽管它们需要 *this 指针才能工作适当地）

但是变量呢？即使没有对象实例，我怎么能声明指向成员变量的指针？当然我需要一个来使用它，但是我可以在没有对象的情况下声明一个指针这一事实让我认为内存中的一个类对象用指向其他内存区域的指针来表示它的变量。

我不确定我是否正确解释了我的疑问，如果不是让我知道，我会尝试更好地解释它

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-03T13:41:53.390

类非常简单地存储在内存中 - 几乎与结构相同。如果您检查存储类实例的位置的内存，您会注意到它的字段只是一个接一个地打包。

但是，如果您的类具有虚拟方法，则会有所不同。在这种情况下，存储在类实例中的第一件事是指向虚拟方法表的指针，它允许虚拟方法正常工作。您可以在 Internet 上阅读更多相关信息，这是一个更高级的主题。幸运的是，您不必担心，编译器会为您完成所有工作（我的意思是，处理 VMT，不用担心）。

让我们来看看方法。当你看到：

```
void MyClass::myFunc(int i, int j) { } 
```

实际上编译器将它转换成类似的东西：

```
void myFunc(MyClass * this, int i, int j) { } 
```

当你打电话时：

```
myClassInstance->myFunc(1, 2); 
```

编译器生成以下代码：

```
myFunc(myClassInstance, 1, 2); 
```

请记住，这是一种简化——有时它比这更复杂一些（尤其是当我们讨论虚拟方法调用时），但它或多或少地显示了编译器如何处理类。如果您使用诸如 WinDbg 之类的低级调试器，您可以检查方法调用的参数，您会看到，第一个参数通常是指向您调用该方法的类实例的指针。

现在，所有相同类型的类共享它们的方法的二进制文件（编译代码）。因此，为每个类实例复制它们是没有意义的，因此内存中只有一个副本，所有实例都使用它。现在应该清楚了，为什么即使没有类的实例，也可以获得指向方法的指针。

但是，如果要调用保存在变量中的方法，则始终必须提供一个类实例，该实例可以通过隐藏的“this”参数传递。

* * *

**编辑：**回应评论

[您可以在另一个 SO question](https://stackoverflow.com/questions/670734/c-pointer-to-class-data-member)中阅读有关指针成员的更多信息。我猜，指向成员的指针存储了类实例的开头和指定字段之间的差异。当您尝试使用指向成员的指针检索字段的值时，编译器会定位类实例的开头并移动存储在指向成员的指针中的字节数以到达指定的字段。

每个类实例都有自己的非静态字段副本——否则它们对我们没有多大用处。

请注意，与指向方法的指针类似，您不能直接使用指向成员的指针，您必须再次提供类实例。

我所说的证明是有序的，所以这里是：

```
class C
{
public:
    int a;
    int b;
};

// Disassembly of fragment of code:

    int C::*pointerToA = &C::a;
00DB438C  mov         dword ptr [pointerToA],0  
    int C::*pointerToB = &C::b;
00DB4393  mov         dword ptr [pointerToB],4 
```

你能看到pointerToA和pointerToB中存储的值吗？字段`a`与类实例的开头相距 0 个字节，因此值 0 存储在 pointerToA 中。另一方面， field`b`存储在 field 之后`a`，它有 4 个字节长，因此 value 4 存储在 pointerToB 中。

# backbone.js - 如何为包含添加新视图的集合呈现项目视图？

> ID：15186195
> 
> 赞同：0
> 
> 时间：2013-03-03T13:33:23.297
> 
> 标签：backbone.js, coffeescript

我不明白为什么 DOM 在集合视图渲染中没有更新：

```
类 FastTodo.Views.TodoItemsIndex 扩展 Backbone.View

  模板：JST['todo_items/index']

  埃尔：'#main'

  渲染：->
    $(@el).html @form_view.render()
    @collection.each @renderOne

  renderOne：（项目）->
    控制台日志（@）
    控制台日志（@el）
    $(@el).append "模型数据"

  初始化：->
    @collection = new FastTodo.Collections.TodoItems()
    @form_view = 新的 FastTodo.Views.AddTodoItem 集合：@collection
    @collection.bind '重置'，=>
      @使成为（）
    @collection.on 'add', (item) =>
      @renderOne（项目）
    @collection.fetch()

```

这个想法是#main 首先获取一个带有添加新表单的视图，然后将集合附加到#main。

我该怎么做？

控制台中视图的输出如下所示：![填充的集合未呈现](../Images/0686deaef13f0f031339263697a4e047.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T15:35:36.547

1）为了`@collection.each @renderOne`正常工作，您需要`renderOne`像这样将您的方法绑定到视图实例：（`renderOne: (item) =>`注意胖箭头），因为否则它会在全局上下文中调用（这就是您`Window`在控制台中看到这些对象的原因。

2) DOM 元素，而不是视图本身，应该被插入到 DOM 中，所以`$(@el).html @form_view.render()`应该写成`@$el.html @form_view.render().el`（该`render`方法应该根据骨干社区约定返回视图实例）。

其他看起来不错，它应该以这种方式工作。

您可能希望参考一些关于 js 中的上下文的帖子，以更深入地了解该主题（例如[这个）。](http://joshuakehn.com/2011/10/20/Understanding-JavaScript-Context.html)

顺便说一句，您可以为某些事情编写更少的代码。即这个

```
@collection.bind 'reset', =>
  @render()
@collection.on 'add', (item) =>
  @renderOne(item) 
```

可以变成这个

```
@collection.on 'reset', @render
@collection.on 'add', @renderOne 
```

但是在这种情况下，您应该记住将您的`render`方法与粗箭头绑定。

# c++ - C++ 中的链表使用引用而不是指针

> ID：15186196
> 
> 赞同：7
> 
> 时间：2013-03-03T13:33:26.420
> 
> 标签：c++, data-structures, reference, linked-list

假设我想创建一个不可修改的链表（即它只能被遍历，一旦它最初创建就不能添加或删除节点）。这可以通过以下方式轻松实现：

```
struct ListNode
{
  int value;
  ListNode* nextNode;
} 
```

我的问题是....是否可以使用引用而不是指针？

```
struct ListNodeWithRefs
{
  int value;
  ListNodeWithRefs &nextNode;
} 
```

我不确定它是否会提供任何性能提升，但是......这个问题在编码时弹出，到目前为止我的答案是*否定*的，但我可能会遗漏一些东西。

原则上，没有什么可以阻止您使用引用，并像这样构造列表元素：

```
ListNodeWithRefs::ListNodeWithRefs(ListNodeWithRefs &next):
  nextNode(next)
{} 
```

但是有一个先有鸡还是先有蛋的问题，因为`next`它还强制其`next`元素在其创建时存在等等......

**注意：**我认为我的问题也可以应用于将列表定义为：

```
struct ListNodeConst
{
  int value;
  const ListNode* nextNode;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-03T14:16:12.600

这是函数式语言中典型的*缺点列表：*

```
data List a = Empty | Node a (List a) 
```

诀窍是，`List a`它是一个完整的类型，可以引用**或**引用`Empty`另一个节点（这就是它可以终止的原因）。

为了在 C++ 中实现这一点，您可以利用*union*（但它没有得到很好的支持）或*polymorphism*。

```
template <typename T>
struct ListBase {
    enum class Kind { Empty, Node };
    explicit ListBase(Kind k): _kind(k) {}

    Kind _kind;
}; 
```

进而：

```
template <typename T>
struct EmptyList: ListBase<T> {
    EmptyList(): ListBase<T>(Kind::Empty) {}
};

template <typename T>
struct ListNode: ListBase<T> {
    ListNode(T const& t, ListBase<T>& next):
        ListBase<T>(Kind::Node), _value(t), _next(next) {}

    T _value;
    ListBase<T>& _next;
}; 
```

现在，您不再有鸡和蛋的问题；只是从`EmptyList<T>`.

*注意：`_kind`基类中的存在并不是OO，而是通过**标记**使用哪个替代项使事情更接近功能示例。*

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-03T13:39:38.633

看看 sbi 的这个例子，它似乎工作：[https ://stackoverflow.com/a/3003607/1758762](https://stackoverflow.com/a/3003607/1758762)

```
// Beware, un-compiled code ahead!
template< typename T >
struct node;

template< typename T >
struct links {
  node<T>& prev;
  node<T>& next;
  link(node<T>* prv, node<T>* nxt); // omitted
};

template< typename T >
struct node {
  T data;
  links<T> linked_nodes;
  node(const T& d, node* prv, node* nxt); // omitted
};

// technically, this causes UB...
template< typename T >
void my_list<T>::link_nodes(node<T>* prev, node<T>* next)
{
  node<T>* prev_prev = prev.linked_nodes.prev;
  node<T>* next_next = next.linked_nodes.next;
  prev.linked_nodes.~links<T>();
  new (prev.linked_nodes) links<T>(prev_prev, next);
  next.linked_nodes.~links<T>();
  new (next.linked_nodes) links<T>(next, next_next);
}

template< typename T >
void my_list<T>::insert(node<T>* at, const T& data)
{
  node<T>* prev = at;
  node<T>* next = at.linked_nodes.next;
  node<T>* new_node = new node<T>(data, prev, next);

  link_nodes(prev, new_node);
  link_nodes(new_node, next);
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-03T13:55:41.947

清单如何结束？

你至少需要两种类型：结束和非。您还需要生命周期管理。以及哪种类型的运行时或静态知识。

可以完成一个完全静态的实现，其中每个节点都是它自己的类型，知道它到最后有多远。

或者您可以只拥有一个未初始化的缓冲区，并以相反的顺序创建元素。

圆也是可以的。使第一个引用引用您构造的最后一个元素。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-03T13:41:38.150

没有。原因：

1.  如果 nextNode 是引用，则不能插入节点。
2.  如果这是列表尾， nextNode 应该指的是什么？

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-06-01T18:23:54.297

正如@Vlad 所说，引用的问题是您将需要一个最终对象。好消息是，原则上，你仍然可以拥有一个循环列表，如果你有它的用处。这是一个基本的事情，如果“下一个”元素是不可为空的引用，则意味着总是有下一个元素，也就是说，列表要么是无限的，要么更现实地说，它会自行关闭或关闭到另一个列表中。

进一步练习是相当有趣和**奇怪**的。基本上，似乎唯一可能的事情是定义 a 节点的等价物（它也代表列表）。

```
template<class T>
struct node{
    T value; // mutable?
    node const& next;
    struct circulator{
        node const* impl_;
        circulator& circulate(){impl_ = &(impl_->next); return *this;}
        T const& operator*() const{return impl_->value;}
        friend bool operator==(circulator const& c1, circulator const& c2){return c1.impl_ == c2.impl_;}
        friend bool operator!=(circulator const& c1, circulator const& c2){return not(c1==c2);}
    };
    circulator some() const{return circulator{this};}
}; 
```

**元素必须存在于堆栈中并且列表是静态的**（好吧，无论如何引用都不能重新绑定）并且链接必须是`const`引用！最终，显然`value`可以制造`mutable`（可能安全吗？）。（此时人们想知道这与模索引的堆栈数组引用有何不同。）

构造 /list 对象的方法只有一种`node`，即用它自己（或用其他预先存在的节点）关闭它。所以结果列表要么是圆形的，要么是“rho”形状的。

```
 node<int> n1{5, {6, {7, n1}}};
    auto c = n1.some();
    cout << "size " << sizeof(node<int>) << '\n';
    do{
        cout << *c << ", ";
        c.circulate();
    }while(c != n1.some()); //prints 5, 6, 7 
```

我无法制作一个不易构造的节点（聚合？）。（添加任何类型的基本构造函数都会产生分段错误，原因我无法理解，在`gcc`和中都是如此`clang`）。出于同样奇怪的原因，我无法将节点封装在“容器”对象中。所以制作一个可以像这样构造的对象对我来说是不可能的：

```
circular_list<int> l{1,2,3,4}; // couldn't do this for obscure reasons 
```

最后，由于无法构造适当的容器，因此不清楚该对象的语义是什么，例如当两个“列表”相等时？什么不意味着分配？或在不同大小的列表之间分配？

这是一个非常矛盾的对象，显然没有普遍的价值或引用语义。

*欢迎任何意见或改进！*

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-03-08T07:25:19.367

我可能不合时宜，但这有效

```
 struct Node;
struct Node {

    using link = std::reference_wrapper<Node>;

    Node( char data_  =  0) 
        : next({*this})
        , data( data_ == 0 ? '?' : data_ ) 
    {}

    bool is_selfref() const noexcept {
        return (this == & next.get());
    }

    char data;
    link next;
}; 
```

常规测试

```
 Node A('A');     
 Node B('B');     
 Node C('C');     
 assert( A.is_selfref() == B.is_selfref() == C.is_selfref());

 A.next = B;  B.next = C;

 assert(! A.is_selfref() && ! B.is_selfref() );
 assert(  C.is_selfref() );

 assert( 'A' == A.data );
 assert( 'B' == A.next.get().data );
 assert( 'C' == A.next.get().next.get().data );

 // C.next == C

 // for those who feel safe seeing the END
 Node END(127);
 C.next = END; 
```

当然，只要所有 Node 都在范围内，我们都可以。否则不行。奇怪而美妙。实用性非常有限？

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-05-01T15:36:41.380

这很棘手，但这有效：

```
#include <iostream>
#include <typeinfo>

class Last {
  public:

    int x;
    int last;

    Last(int i) {
      std::cout << "parent constructor(" << i << ")\n";
      x = i;
      last = 1;
    }
};

struct fourptr {
    int v1, v2;
    void *p1, *p2;
    };

class chain : public Last {
  public:

    chain(int i) : Last(i) {
    std::cout << "child constructor(" << i << ")\n";
    last = 0;
    }

    void viewandnext() {
      struct fourptr *fp = (struct fourptr *) this;
      std::cout << x << ", this = " << this
                << ", sizeof *this = "<< sizeof * this
                << ", * this = {" << fp->v1 << ", " << fp->v2 << ", "
                << fp->p1 << ", " << fp->p2 << "}"
                << "\n";
      if (last == 0) ((chain &)next).viewandnext();
    }

  Last & fn(int x) {
    Last * e = (x>0) ? new chain(x-1) : new Last(x-1);
    return *e;
  }

    Last & next = fn(x); // This is not a pointer but a reference
};

int main(void) {
  chain &l = *(new chain(8));
  std::cout << "sizeof l = "<< sizeof l << "\n";
  l.viewandnext();
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-02-12T20:26:18.120

避免带有引用的列表出现鸡蛋问题的一种简单方法是记住首先分配对象内存，然后调用构造函数。`this`此外， C++ 标准保证在构造函数内部可以访问指针。

解决此问题的巧妙方法：

```
struct node {
    int data;
    node& next;
    node(node& n, int d): next(n), data(d) {}
};

node tl(tl, 69); // tl is already in the scope! 
```

# javascript - javascript 用get方法发送表单

> ID：15186197
> 
> 赞同：0
> 
> 时间：2013-03-03T13:33:33.870
> 
> 标签：javascript, html, forms, get, send

我尝试使用此下拉表单在页面上发送错误数据（电影信息）。此 html 代码是用户单击提交时发送的下拉表单，javascript 将 GET 数据发送到另一个 php 文件并在那里处理数据，但在表单数据放置的地方文本：“谢谢”

问题是：当我点击提交不起作用时，javascript 没有完成它的工作。

html:

```
<div id='premijera' class='neispravniPodaci'>Report wrong data
    <div id='neispravnaForma' class='arrow_box' >
            <form name='frm1' action='' onSubmit='neispravniPod()' method='get'>
            <input class='textbox'  type='text' name='forma' placeholder='input for wrong data'>
            <input type='submit' name='sendForm' value='Send'  class='button'>
            </form>
        </div>
</div> 
```

而javascript代码是：

```
function neispravniPod()
{
var xmlhttp;
var forma=document.forms['frm1']['forma].value;
if (window.XMLHttpRequest)
  {// code for IE7+, Firefox, Chrome, Opera, Safari
  xmlhttp=new XMLHttpRequest();
  }
else
  {// code for IE6, IE5
  xmlhttp=new ActiveXObject('Microsoft.XMLHTTP');
  }
xmlhttp.onreadystatechange=function()
  {
  if (xmlhttp.readyState==4 && xmlhttp.status==200)
    {
    document.getElementById('neispravnaForma').innerHTML='<t style=\"font-size:15px;font-weight:bold;color:black;\">Hvala!</t>';
    }
  }

xmlhttp.open('GET','glasanje.php?id=".$idfilm."&neispravno='+forma+'&ip=".$_SERVER["REMOTE_ADDR"]."&korisnik=".$userdata['user_id']."',true);
xmlhttp.send();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T13:51:18.100

就像 Rene 指出的那样，这很可能是一个 javascript 语法错误，即阻止 onSubmit 函数在实际提交之前启动。

建议在 jsfiddle 中尝试您的代码。

我在 xmlhttp.open 请求中看到 PHP 代码。您如何插入该代码？如果您只是尝试在 js 文件中使用该代码并期望客户端执行该代码，这可能是一个失败点（它只会吐出语法错误，因为 javascript 文件永远不会也不应该解释服务器端代码） .

另外，您是否考虑过使用 jQuery 或其他 js 库来帮助您编写更简洁的 ajax 请求？

**编辑答案（根据下面的评论）：**

不确定文件其余部分的 PHP 是什么，但这是我在本地使用和测试的内容，以确保它可以正常工作。更正了一些语法错误，同样在 PHP 端，输出变量的方式。将此代码粘贴到您的 index.php 文件或您正在使用的任何文件中：

```
<div id='premijera' class='neispravniPodaci'>Report wrong data
    <div id='neispravnaForma' class='arrow_box'>
        <form name='frm1' action='javascript:neispravniPod();' method='get'>
            <input class='textbox' type='text' name='forma' placeholder='input for wrong data'>
            <input type='submit' name='sendForm' value='Send' class='button'>
        </form>
    </div>
</div>

<script type="text/javascript">
    function neispravniPod() {
        var xmlhttp;
        var forma = document.forms.frm1.forma.value;
        if (window.XMLHttpRequest) { // code for IE7+, Firefox, Chrome, Opera, Safari
            xmlhttp = new XMLHttpRequest();
        } else { // code for IE6, IE5
            xmlhttp = new ActiveXObject('Microsoft.XMLHTTP');
        }
        xmlhttp.onreadystatechange = function () {
            if (xmlhttp.readyState == 4 && xmlhttp.status == 200) {
                document.getElementById('neispravnaForma').innerHTML = '<t style=\"font-size:15px;font-weight:bold;color:black;\">Hvala!</t>';
            }
        };

        xmlhttp.open('GET', 'glasanje.php?id=<?php echo $idfilm ?>&neispravno='+forma+'&ip=<?php echo $_SERVER["REMOTE_ADDR"] ?>&korisnik=<?php echo $userdata['user_id'] ?>', true);
        xmlhttp.send();
    }       
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T13:38:28.333

我要做的第一件事是检查 javascript，好像脚本中有很多错误......我喜欢在 jsbin.com 中检查我的脚本......只需打开 javascript 面板并将脚本粘贴到那里......我在你的脚本中发现了 33 个警告……点击：http: [//jsbin.com/oqiliq/1/edit](http://jsbin.com/oqiliq/1/edit)

# iphone - 局部变量的ARC生命周期，提前释放

> ID：15186200
> 
> 赞同：3
> 
> 时间：2013-03-03T13:33:39.290
> 
> 标签：iphone, ios, objective-c, memory-management, automatic-ref-counting

我在使用发布配置运行时遇到了错误，这似乎是局部变量的过早发布`tmp`。

`*** Terminating app due to uncaught exception 'NSInternalInconsistencyException', reason: 'Invalid index path for use with UITableView. Index paths passed to table view must contain exactly two indices specifying the section and row. Please use the category on NSIndexPath in UITableView.h if possible.'`

相关代码：

```
@property (nonatomic, strong) NSIndexPath *selectedCellIndexPath;

...

- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    if (_selectedCellIndexPath != nil && [_selectedCellIndexPath isEqual:indexPath]) {        
        self.selectedCellIndexPath = nil;
        [tableView reloadRowsAtIndexPaths:@[indexPath] withRowAnimation:UITableViewRowAnimationFade];
    } else if (_selectedCellIndexPath != nil && ![_selectedCellIndexPath isEqual:indexPath]) {

//--- problematic code
        NSIndexPath *tmp = _selectedCellIndexPath;
        self.selectedCellIndexPath = indexPath;
        [tableView reloadRowsAtIndexPaths:@[tmp, _selectedCellIndexPath] withRowAnimation:UITableViewRowAnimationFade];
//--- problematic code

    } else {
        self.selectedCellIndexPath = indexPath;
        [tableView reloadRowsAtIndexPaths:[NSArray arrayWithObject:indexPath] withRowAnimation:UITableViewRowAnimationFade];
    }
} 
```

我的印象是局部变量`tmp`在这里应该有很强的引用，或者我不对？

顺便说一句，将代码更改为

```
NSIndexPath *tmp = self.selectedCellIndexPath; 
```

或者改变

`@[tmp, _selectedCellIndexPath]`解决`[NSArray arrayWithObjects:tmp,_selectedCellIndexPath,nil]`问题。

这里出了什么问题的解释是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-03T15:59:23.803

`tmp`是一个强有力的参考；默认情况下，本地人在 ARC 中。

鉴于您建议的两个修复完全应该是相同的结果（假设您没有覆盖 selectedCellIndexPath 的 setter 或 getter 来做一些奇怪的事情），我猜您已经找到了一个 ARC 错误。（我发现了其中的几个，所以我并不感到那么惊讶。）

[尝试在打开僵尸](https://stackoverflow.com/questions/5386160/how-to-enable-nszombie-in-xcode)的情况下运行您的代码。如果它告诉您您正在访问一个已释放的对象，我会说这是一个 ARC 错误。如果是这种情况，最好尝试创建一个简化的测试用例并提交一个错误。

**编辑：**

我认为这是一个 ARC 错误。问题似乎是在调用之前将对象存储到临时（堆栈上）缓冲区中，`arrayWithObjects:count:`但在该缓冲区中时它们不会保留。在您的代码中，这些对象在添加到缓冲区（在 -O1 或更高版本中）后会丢失其最后的强引用，因此您会获得早期的释放。这是一个更简单的测试用例，它通过导致对该临时缓冲区中的第一个对象的悬空引用导致崩溃（因为分配导致第一个对象被释放）：

```
NSObject *foo = [[NSObject alloc] init];
@[foo, (foo = [[NSObject alloc] init])]; 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-03T16:12:34.253

您是否对您的代码进行了运行->分析？Clang 在指出潜在的 ARC 问题方面做得非常好（解释了为什么会出现问题）。将分析警告视为错误。

此外，如果您不希望 ARC 发布它，您的 'tmp' var 可能应该是 iVar。这可能并不总是最优雅的解决方案，但它告诉 ARC，“只要这个类实例存在，就保持这个值。”

您正在通过 iVar 引用访问 _selectedIndexPath，避免使用 getter 和 setter。这意味着您将跳过 ARC 管理的对保留、释放和自动释放的调用。

所以你可能应该使用'self'。

基本上，你不能总是预测 ARC 会做什么。它将尝试在每个方法结束时进行清理。所以有时你需要暗示它会通过创建一个属性来保留一些东西。有时我想念自己调用 alloc/release.... 有时大声笑

# java - 我应该验证构造函数中的参数吗？

> ID：15186202
> 
> 赞同：21
> 
> 时间：2013-03-03T13:33:59.407
> 
> 标签：java, model-view-controller, design-patterns

我正在按照 MVC 模式创建一个 Web 应用程序。

在有效的 Java 中，作者提到在创建新对象时验证类的构造函数中的参数。

但是，我没有创建一些将被第三方使用的 API。我的课程只接受来自表单输入字段的参数，这些参数在提交到服务器之前经过验证。

那么在这种情况下，我应该按照作者在 Effective java 中提到的方式创建我的类还是没用？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-03T13:40:24.333

It is not as clear cut as reading a book and implementing what it says. You need to think and apply the knowledge to your specific situation.

It really depends on how you are initializing the variables in your class and using them right after object construction:

Some pointers:

*   If the variables are going to be used by some methods in the class or the object is going to be re-used right after constructions (which in most cases will), you should validate that the values that are required are not empty or null, to avoid getting nasty exceptions.

*   The second time to validate input parameters is when you expect the correct values to be set to specific internal variables. If you require that a parameter be constrained to a specific value range, then it is important that you validate.

Example:

Say we have a salary cap in the object:

```
int salary = 0;
int salaryCap = 1000; 
```

During creation, you can validate the passed in salary amount:

```
public Employee(int salary) {
 if(salary >= this.salaryCap)
  this.salary = salary;
} 
```

*   The class relationship also determines whether you want to validate the values or not. If the parameters will be passed up the inheritance chain for-example, I would take the time to validate them, especially if they will affect the state of other objects in the inheritance chain.

Example:

Whenever I have to call the super constructor, I am tempted to validated the input:

```
public Employee(int salary) {
 super(salary); //validate salary against known constraints
} 
```

*   Where are the variables coming from? If you do not trust the source (like sql parameters etc), then you should validate them and possibly sanitize the input before executing further code. This prevents security attacks.

*   I am always weary to do validation and parameter checking in the constructor. I prefer to have getters and setters to validate input. That way, if something happens at object creation, at least I have the guarantee of semi-working object than a complete inconsistent object whose state cannot be readily determined. Of course this depends on your context, if you constraints are strict, you can stop the object creation and prompt the client (user, calling object etc) for valid input parameters.

The advantage that using getters/setters affords me is that the object is really constructed step by step by calling on the external interface the object gives, other than constraining the validation during creation, which when an exception occurs, renders the object unusable/unstable.

So instead of this:

```
public Employee(int salary) {
 if(salary >= this.salaryCap)
  this.salary = salary;
} 
```

I prefer this:

```
public class Employee {
 public void setSalary(int salary) {
  if(salary >= this.salaryCap)
      this.salary = salary;
 }
} 
```

The latter gives me the ability to cleanly exit with a valid exception to the caller, which will not affect object creation (I don't like throwing exceptions in the constructor).

In a nutshell, do your variable have constraints? If yes, validate those constraints before setting them to internal data properties.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-03T13:41:40.210

我建议验证您域中的数据并在未正确填写字段时返回（自定义）异常。这样您就可以实现不同的 UI，而无需再次执行整个验证过程，最好尽可能将其分开。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-03T13:40:39.443

At the first sight it is not necessary to validate the parameters since the validation was done before. But you should take into consideration that your class will be used in other circumstances, you cannot be sure that every time the input of your constructor is valid.

* * *

## 回答 #4

> 赞同：-7
> 
> 时间：2013-03-03T13:37:37.127

听起来您正在验证之前已经验证过的字段。在这种情况下，这只是浪费时间（无论是编写它还是在运行时）。如果您的表单（客户端 javascript）没有验证这些字段，那么这将是有意义的。否则你可以跳过它。

# java - Java java.util.Calendar 中语言环境设置的目的是什么？

> ID：15186208
> 
> 赞同：4
> 
> 时间：2013-03-03T13:34:46.433
> 
> 标签：java, date, calendar, locale

我正在通过 java.util.Calendar 获取有关 Java 中特定日期的信息（例如一周、一个月、一年中的天数等）。在我的情况下，是否有理由为日历对象设置语言环境？我问是因为：

```
System.out.println(cal.get(Calendar.DAY_OF_WEEK)); 
```

今天（星期日）的返回值始终为 1，但在我们的语言环境 (cs_CZ) 中应为 7。

```
Locale locale = new Locale("cs", "CZ");
TimeZone tz = TimeZone.getTimeZone("Europe/Prague");

Calendar cal = GregorianCalendar.getInstance(tz, locale);
cal.setTime(new Date());

// returns => 1 (but I expected 7)
System.out.println(cal.get(Calendar.DAY_OF_WEEK)); 
// returns => 3 - it's OK
System.out.println(cal.get(Calendar.DAY_OF_MONTH)); 
```

**编辑：**我可以在周日使用 1，但我必须确保这是不变的行为，无论使用的是 Locale 还是 TimeZone。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-03T14:09:27.883

语言环境会影响一周的第一天。但是，日期值是常量，`SUNDAY`始终为 1。您可以查看[此链接](http://docs.oracle.com/javase/7/docs/api/constant-values.html#java.util.Calendar.SUNDAY)。该`get()`方法只返回正确的字段值（如果返回 7 则错误 - 7 是`SATURDAY`，而不是当前日期）。

但是您可以调用`getFirstDayOfWeek()`它，它会返回 2 ( `MONDAY`)。我认为这就是你所需要的。您可以利用这两种方法来实现您的目标。

```
System.out.println((cal.get(Calendar.DAY_OF_WEEK) - cal.getFirstDayOfWeek() + 7) % 7 + 1); 
```

上述语句返回 7。

* * *

## 回答 #2

> 赞同：-7
> 
> 时间：2013-03-03T17:37:22.263

最后我使用[了 Joda Time](http://joda-time.sourceforge.net/)库：

```
DateTime dt = new DateTime(new Date());
int dayOfWeek = dt.getDayOfWeek(); 
```

今天（星期日）返回 7。

# c# - Watson 等人：开始 Visual C# 第 10 章练习 5

> ID：15186209
> 
> 赞同：2
> 
> 时间：2013-03-03T13:34:53.980
> 
> 标签：c#

这个问题适用于任何提到本书末尾为这个问题提供的解决方案的人。我已经按照本章末尾的概述设置了 Ch10CardLib。运行包含的显示洗牌牌组的客户端控制台应用程序没有问题。

我已运行提供的解决方案以获取以下行的错误消息：

```
Suit flushSuit = playDeck.GetCard(hand * 5).suit; 
```

> “错误 1 ​​'Ch10CardLib.Card' 不包含 'suit' 的定义，并且找不到接受 'Ch10CardLib.Card' 类型的第一个参数的扩展方法 'suit'（您是否缺少 using 指令或程序集引用？ )"

“Suit”是枚举类型，但“suit”是 Card 类中的私有只读字段。

谁能在这里猜出作者的意图？

只是为了“好玩”，我决定在 Card 类中包含一个方法：

```
public Suit Suit()
{
    return suit;
}

Suit flushSuit = playDeck.GetCard(hand * 5).Suit(); 
```

这会产生预期的结果，但是否符合上下文的精神？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-03T13:42:55.117

那是语法错误。如果书中的代码没有编译（我没有这本书的副本），那不是你的错。您的修复对我来说看起来非常合理，尽管我可能会将其公开为只读属性而不是方法：

```
public Suit Suit
{
    get { return suit; }
} 
```

也许您可以将私有只读字段交换为自动属性？

```
public Suit Suit { get; private set; } 
```

# ios - 从 iOS 中的某处播放音频时，MPMusicPlayerController 停止并且无法恢复

> ID：15186210
> 
> 赞同：0
> 
> 时间：2013-03-03T13:34:55.420
> 
> 标签：ios, cocoa-touch, mpmusicplayercontroller

我正在使用`iPodMusicPlayerController`.

我可以播放 iPod 库中的歌曲。

然而有一件事。

当我从 iPod 库中播放歌曲并且我去 safari 或其他东西并从网络播放音乐或电影时，我的应用程序停止播放。

从网络播放后，我回到我的应用程序并点击不再起作用的播放按钮。

这是我的 playOrPause 操作代码。

```
MPMusicPlaybackState playbackState = self.player.playbackState;
    if (playbackState == MPMusicPlaybackStateStopped || playbackState == MPMusicPlaybackStatePaused)
    {
        [self.playOrPauseButton setImage:[UIImage imageNamed:@"pauseiCon"] forState:UIControlStateNormal];
        [self.player play];
    }

    else if (playbackState == MPMusicPlaybackStatePlaying)
    {
        [self.playOrPauseButton setImage:[UIImage imageNamed:@"playiCon"] forState:UIControlStateNormal];
        [self.player pause];
    } 
```

我还注册了通知。

我该如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T13:55:23.367

我为自己的问题找到了解决方案。:D

首先注册通知`MPMusicPlaybackStateInterrupted`

我们可以使用该属性检查中断。

```
MPMusicPlaybackState playbackState = [self.player playbackState];

    if (playbackState == MPMusicPlaybackStatePaused || playbackState == MPMusicPlaybackStateInterrupted)
    {
        [self.playOrPauseButton setImage:[UIImage imageNamed:@"playiCon"] forState:UIControlStateNormal];
    }

    else if (playbackState == MPMusicPlaybackStatePlaying)
    {
        [self.playOrPauseButton setImage:[UIImage imageNamed:@"pauseiCon"] forState:UIControlStateNormal];
    } 
```

`playOrPause`并在Action中添加以下代码

```
MPMusicPlaybackState playbackState = self.player.playbackState;

    if (playbackState == MPMusicPlaybackStateStopped || playbackState == MPMusicPlaybackStatePaused || playbackState == MPMusicPlaybackStateInterrupted)
    {
        [self.playOrPauseButton setImage:[UIImage imageNamed:@"pauseiCon"] forState:UIControlStateNormal];
        [self.player play];
    }

    else if (playbackState == MPMusicPlaybackStatePlaying)
    {
        [self.playOrPauseButton setImage:[UIImage imageNamed:@"playiCon"] forState:UIControlStateNormal];
        [self.player pause];
    } 
```

# sql - 如何调整此 sqlite 查询，使其排除以小写 x 开头的 PRODNAME？

> ID：15186211
> 
> 赞同：0
> 
> 时间：2013-03-03T13:35:12.847
> 
> 标签：sql, sqlite, lowercase

```
SELECT t1.pgrpname, t1.pgrpval, t0.prodname 
FROM tproduct t0 inner join lpropgr l0 on l0.prodsern=t0.prodsern
INNER JOIN tpgroups t1 on t1.pgrsern=l0.pgrsern 
WHERE lower(t1.pgrpname) in ('brand', 'class1', 'display') 
ORDER BY t1.pgrpname collate nocase, t1.pgrpval collate nocase, t0.prodname collate nocase 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T19:38:30.120

`in ('brand', 'class1', 'display')`所以，答案是改变`in ('%@') and not('x' == substr(t0.prodname, 1, 1))`整个查询：

```
SELECT t1.pgrpname, t1.pgrpval, t0.prodname 
FROM tproduct t0 
INNER JOIN lpropgr l0 on l0.prodsern=t0.prodsern 
INNER JOIN tpgroups t1 on t1.pgrsern=l0.pgrsern
WHERE lower(t1.pgrpname) in ('%@') 
AND NOT('x' == substr(t0.prodname, 1, 1)) 
ORDER BY t1.pgrpname collate nocase, t1.pgrpval collate nocase, t0.prodname collate nocase 
```

只为任何想知道的阅读者。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T13:54:40.030

That SQL should do the work.

```
 SELECT t1.pgrpname, t1.pgrpval, t0.prodname 
       FROM tproduct t0 inner join lpropgr l0 on l0.prodsern=t0.prodsern
 INNER JOIN tpgroups t1 on t1.pgrsern=l0.pgrsern 
      WHERE lower(t1.pgrpname) in ('brand', 'class1', 'display') 
        AND lower(substr(t0.prodname,1)) != (substr(t0.prodname,1))
   ORDER BY t1.pgrpname collate nocase, t1.pgrpval collate nocase 
```

Just compares first char of the column with lower version of char

Edit : Sorry missed the open parenthesis.

This one only checks for `lowercase x`

```
 SELECT t1.pgrpname, t1.pgrpval, t0.prodname 
       FROM tproduct t0 inner join lpropgr l0 on l0.prodsern=t0.prodsern
 INNER JOIN tpgroups t1 on t1.pgrsern=l0.pgrsern 
      WHERE lower(t1.pgrpname) in ('brand', 'class1', 'display') 
        AND lower(substr(t0.prodname,1)) != 'x'
   ORDER BY t1.pgrpname collate nocase, t1.pgrpval collate nocase 
```

# java - 从java执行hadoop示例jar文件

> ID：15186213
> 
> 赞同：0
> 
> 时间：2013-03-03T13:35:27.620
> 
> 标签：java, linux, hadoop, jar, runtime.exec

我正在 Ubuntu 12.04、Eclipse 3.7 上使用 Hadoop 1.0.3，并且正在开发一个 GUI 来使用 Windowbuider Pro 执行 Hadoop 作业。我需要从 GUI 执行包含我的代码的 jar 文件。我已经成功使用了 runtime.getruntime.exec() 方法。然而，虽然它执行特定于 DFS 的命令，但它不能执行 .jar 文件，例如与分发捆绑在一起的 PiEstimator。我的代码如下：

```
JButton btnYrhtrdsf = new JButton("Start Daemons");
btnYrhtrdsf.addMouseListener(new MouseAdapter() 
{
    @Override
public void mouseClicked(MouseEvent e) 
    {
    try { //WORKING
    Runtime.getRuntime().exec("/usr/local/hadoop/hadoop-1.0.3/bin/start-dfs.sh");
    Runtime.getRuntime().exec("/usr/local/hadoop/hadoop-1.0.3/bin/start-mapred.sh");
    } 
        catch (IOException e1) {
        e1.printStackTrace();
    }
    }
});
    contentPane.add(btnYrhtrdsf, "16, 10");

    JButton btnMakeDirectory = new JButton("Make Folder in HDFS");
    btnMakeDirectory.addMouseListener(new MouseAdapter() {
        @Override
        public void mouseClicked(MouseEvent e) {//WORKING
            try {
                Runtime.getRuntime().exec("/usr/local/hadoop/hadoop-1.0.3/bin/hadoop dfs -mkdir input2");
            } catch (IOException e1) {
                // TODO Auto-generated catch block
                e1.printStackTrace();
            }
        }
    });
    contentPane.add(btnMakeDirectory, "12, 18");

    JButton btnStopDaemons = new JButton("Stop Daemons");
    btnStopDaemons.addMouseListener(new MouseAdapter() {
        @Override
        public void mouseClicked(MouseEvent e) {
            try { //WORKING
                Runtime.getRuntime().exec("/usr/local/hadoop/hadoop-1.0.3/bin/stop-dfs.sh");
                Runtime.getRuntime().exec("/usr/local/hadoop/hadoop-1.0.3/bin/stop-mapred.sh");
            } catch (IOException e1) {
                // TODO Auto-generated catch block
                e1.printStackTrace();
            }
        }
    });
    contentPane.add(btnStopDaemons, "16, 18");

    JButton btnPiestimator = new JButton("PiEstimator");
    btnPiestimator.addMouseListener(new MouseAdapter() {
        @Override
        public void mouseClicked(MouseEvent e) {
            try { //PROBLEM!!!!!
                Runtime.getRuntime().exec("/usr/local/hadoop/hadoop-1.0.3/bin/hadoop jar hadoop-examples-1.0.3.jar pi 2 5");
            } catch (IOException e1) {
                // TODO Auto-generated catch block
                e1.printStackTrace();
            }
        }
    });
    contentPane.add(btnPiestimator, "14, 26");
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T15:14:13.043

替换以下行

```
Runtime.getRuntime().exec("/usr/local/hadoop/hadoop-1.0.3/bin/hadoop jar hadoop-examples-1.0.3.jar pi 2 5"); 
```

和：

```
Runtime.getRuntime().exec("/usr/local/hadoop/hadoop-1.0.3/bin/hadoop jar /usr/local/hadoop/hadoop-1.0.3/hadoop-examples-1.0.3.jar pi 2 5"); 
```

# parsing - Xtext 中的数字/字符串语法错误

> ID：15186226
> 
> 赞同：0
> 
> 时间：2013-03-03T13:37:58.057
> 
> 标签：parsing, xtext

我正在尝试创建一个包含数字和字符串的语法，如下所示：

> 日期：2013 年 3 月 2 日

我创建了一组或多或少适应这一点的规则：

```
Date:
     'Date': DAY Month YEAR
;

terminal DAY:
     ('1'..'9') | (('1'..'3')('0'..'9'))
;

Month:
     name = ('Jan'|'Feb'|'Mar'|'Apr)
;

terminal YEAR
     ('0'..'2)('0'..'9')('0'..'9')('0'..'9')
; 
```

这套规则似乎有很多问题：

1.  所写的日期规则似乎会产生错误：“不能在规则内更改类型两次”。我不知道这意味着什么，除了 Xtext 显然不允许在同一规则中使用数字和选择字符串。

2.  如果我从 Date 中删除 Month 规则，Xtext 会编译，但语法似乎不能正常工作。DAY 规则应该提供从 1 到 9 的单个数字和两位数之间的选择，但由于某种原因，它只接受两位数。所以虽然我可以输入如下一行：

> 日期：2013 年 12 月

被接受，但日期如下：

> 日期：2013 年 2 月

不是。

我是否发现规则中的错误会破坏终端规则中的数字？或者是否缺少某些导致忽略“|”的内容 在我的号码里？另外：“不能在规则内两次更改类型”错误到底是什么意思，我该如何解决？

有人请指教。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T10:44:26.183

这里你有一个设计问题。通常，您必须尽可能少地使用自定义终端。自定义终端对您的语法具有全局影响，使语法不太灵活，错误恢复效率低下。

我理解你的意图：你想限制你的 DSL 以防止解析不敏感的数据。这是一个好主意，但自定义终端不是为此类任务设计的。经验法则是：

*   尽可能多地使用标准终端
*   让您的词法分析器解析几乎所有输入
*   让您的解析器检测语法错误（例如缺少 ']'），但不检测域约束，例如 (1 <= Day <= 31)。
*   添加验证以检查域约束并提供用户友好的错误和警告消息
*   添加快速修复
*   根据您的域限制调整内容助手

在您的情况下，我建议使用以下简单语法：

```
Date:
    'Date': day=INT month=Month year=INT
;

enum Month:
    JANUARY='Jan'
|   FEBRUARY='Feb'
|   MARCH='Mar'
|   APRIL='Apr'
; 
```

比我实施一个自定义验证器来检查日期和年份是否在允许的范围内。这是一个文档，如何做到这一点：

*   [http://www.eclipse.org/Xtext/documentation.html#custom_validation](http://www.eclipse.org/Xtext/documentation.html#custom_validation)

# algorithm - 如何提高关键字搜索的性能？

> ID：15186229
> 
> 赞同：4
> 
> 时间：2013-03-03T13:38:22.750
> 
> 标签：algorithm, data-structures, indexing, full-text-search

这是一道面试题。

您必须编写程序，该程序会查找包含所有给定关键字的所有文件。您将如何预处理文件以提高搜索性能。

我的答案：

我会使用`Lucene`（或任何其他文本搜索引擎）。如果我需要手动实现它，我将建立一个将文档单词映射到文档*ids*的索引。我们可能应该用`B-trees`. 另一种方法是使用 RDBMS（`mySQL`或 smth.），但对我来说它看起来有点矫枉过正。

是否有意义？你会如何回答这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-03T14:02:13.293

我同意，大多数时候文本搜索引擎是要走的路......真的很容易构建和可靠。这里只是一个小细节：大多数引擎默认执行 OR 搜索，因此您必须指定要匹配所有单词。

如果您必须构建自己的解决方案，是的，显然您必须构建映射。我会使用哈希查找而不是树索引，但您的树可能不会太大，所以这只是一个很小的性能改进。不过，我看不出使用树的意义，你不需要它的遍历功能，你永远不会搜索上一个或下一个单词。

当您实际检查如何使用数据结构时，会弹出更多有趣的细节。让我们以搜索为例：`The pony he comes`. 直观地说，您不会以 开始查找`the`，可能所有文档都包含它（假设它们是英文文本）。`pony`是一个不错的选择，并且可以轻松缩小搜索范围。大多数文本搜索引擎都包含一个指标：有多少文档包含该特定单词。因此，基于此，您从频率最低的单词开始，并按频率递增的顺序检查单词。

一旦您设法缩小搜索范围，您就会开始意识到您的索引不能很好地工作......您仍然需要`the`检查单词，并且在您的索引中会显示无数文档，所以在这一点上会更好使用反向映射，从文档到单词（同样，哈希查找或 trie）。您检查少数文档以查看它们是否包含剩余的单词。

注意：这里的很多决定（如何存储映射，简单或双重映射，btree/hash/trie/...）取决于项目的规模。显然，如果您必须在几个文件中搜索，您构建一些简单的东西，如果您必须索引 github 上的所有文件，或者用于基因序列搜索，即使索引可能不适合内存...

# postgresql - 在 Postgres 中返回表而不定义其结构

> ID：15186230
> 
> 赞同：0
> 
> 时间：2013-03-03T13:38:26.973
> 
> 标签：postgresql

我有一张桌子`foo`和一个程序`bar`。

`bar`将数据过滤`foo`到一个临时表中，该表`footemp`的结构与`foo`.

最后它返回查询`select * from footemp`

我不想在函数定义中重新定义返回表的结构。

有没有办法告诉 Postgres 该函数返回一个结构类似于的表`foo`？

注意：我知道`footemp`可以创建使用`CREATE TABLE ... LIKE ...`这个问题是关于不必定义返回表的结构。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-03T13:43:13.423

```
create function bar() returns setof foo 
```

# php - 过滤器返回空数组？

> ID：15186234
> 
> 赞同：1
> 
> 时间：2013-03-03T13:38:39.327
> 
> 标签：php, javascript, arrays, d3.js

我有两个下拉列表，它们的选定值将用于过滤数据集 - 出于某种原因返回一个空数组？任何人都可以帮忙吗？

```
 d3.select("#parameterType").on("change", function() { filterData(); });

    d3.select("#dateTimeTaken").on("change", function() { filterData(); });

    function filterData()
    {
    var selectedParameter = document.getElementById("parameterType").value;
    var selectedMonth = document.getElementById("dateTimeTaken").value;
    console.log(selectedParameter); 
    console.log(selectedMonth);

    var selectedData = data.filter(function(d) 
    {         
         return d.parameterType == selectedParameter && 
            +d.dateTimeTaken.getMonth() == (selectedMonth - 1);
    });

    console.log(selectedData);//RETURNING EMPTY ARRAY?
    } 
```

**更新：**

如果我最初没有从任一下拉列表中选择第一个选项（见下图），则仅实际返回空数组（例如，如果我选择温度和 2（在 mo 显示月份）数组返回空 - 但如果选择 PH 和 3 将返回数组正确填充 - 那么如果我返回并选择第一个选项也会返回正确填充的数组？完全不解？这是否与下拉列表是从 mySql 数据库动态填充的事实有关 - 也许我的 PHP 不正确？（如下图）

```
<?php
require_once "json-util.php";
if(!empty($_GET['getlist']))
{
$list = $_GET['getlist'];
$qry='';
switch($list)
{
    case 'parameterType':
    {
        $qry = "SELECT parameterType FROM Parameters";
        break;
    }
    case 'dateTimeTaken':
    {
        $qry = "SELECT DISTINCT MONTH(dateTimeTaken) as dateTimeTaken FROM TestSourceSampleData";
        break;
    }
}

if(empty($qry)){ echo "invalid params! "; exit; }

$dbconn = mysql_connect('*******','********','*******') 
        or die("DB login failed!");

mysql_select_db('*****', $dbconn) 
        or die("Database does not exist! ".mysql_error($dbconn));

$result = mysql_query($qry,$dbconn)
        or die("Query $qry failed! ".mysql_error($dbconn));

$rows = array();

while($rec = mysql_fetch_assoc($result)) 
{
    $rows[] = $rec;
}
mysql_free_result($result);
mysql_close($dbconn);

echo json_encode($rows);
}
?> 
```

![在此处输入图像描述](../Images/a1182ac67142dcee2e064a57301a7cd6.png)

# jquery - Custom conditional in Handlebar Template

> ID：15186242
> 
> 赞同：1
> 
> 时间：2013-03-03T13:39:44.913
> 
> 标签：jquery, handlebars.js

I have created the following Handlebar template

```
<script type="text/template" id="status">
{{#completed status}}
     <button class="btn btn-inverse">Close</button>
     <button class="btn btn-primary">Submit</button>
     <button class="btn btn-danger">Delete</button>
{{else}}
     <button class="btn btn-primary">Close</button>
{{/completed}}
</script> 
```

Here is my handlebar register helper

```
Handlebars.registerHelper('completed',function(item,options){
if (item == 'INITIATED'){
    console.log(options.fn())
    return options.fn();        
}
else{
    console.log(options.inverse());
    return options.inverse();
} 
}); 
```

And my javascript

```
obj={status: 'INITIATED'} and obj={status:'RECEIVED'}
Handlebars.compile( $('#status').html() )(obj).appendTo('body') 
```

the `status` variable in the template can have values `INITIATED` or `RECEIVED/COMPLETED`

When I print in the console, I am getting the excepted buttons( once, the 3 buttons and the next time the one button) but in the html file I am getting the `else section` only( both the times ).

I am not sure where I have gone wrong. Please advice.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T18:47:35.503

您的模板和助手很好。您使用它们的方式：

```
Handlebars.compile( $('#status').html() )(obj).appendTo('body') 
```

虽然没有意义。`Handlebars.compile`返回一个函数，调用该函数会产生一个字符串；这意味着您`appendTo`实际上看起来像这样：

```
var tmpl = Handlebars.compile($('#status').html());  // Okay
var html = tmpl(obj);                                // Okay
html.appendTo('body');                               // Broken. 
```

字符串没有`appendTo`方法。您可以将 a 包裹`$()`在字符串周围：

```
$(
    Handlebars.compile($('#status').html())(obj)
).appendTo('body'); 
```

或者一步一步做，让代码更清晰：

```
var tmpl = Handlebars.compile($('#status').html());
$('body').append(tmpl(obj)); 
```

演示：http: [//jsfiddle.net/ambiguous/46sfd/](http://jsfiddle.net/ambiguous/46sfd/)

# php - User data protection with encoding and decoding?

> ID：15186243
> 
> 赞同：1
> 
> 时间：2013-03-03T13:39:48.133
> 
> 标签：php, decode, encode

I'm working on a CMS system and I want to add a feature to protect user's data. Of course passwords are hashed and could only be decoded using brute forcing. But now it's about the rest of the data, for example their mail address. I would like to have a function which encodes a mail address when a user registers which could be decoded each time a mail should be send. Now the problem with hashing is that you can't easily convert it back (I think), at least with md5 and sh1 and similar algorithms this is not possible so this is not what I want.

I would like to have a feature that salt could be used in the en- and decoding process. This means that I have a random string stored somewhere in the web aplication, which is used as 'seed' or 'salt' for this process, so the result will be different if that random string is different, this makes it harder to decode once hackers (for example) broke into the database and stole the data.

I saw a function in PHP called `base64_encode()` and `base64_decode()`, these functions can en- and decode the data very easy. The problem with these functions is that there's no 'salt' parameter and I don't think it's very good as protection. Is there's a function which does something similair with more protection with a en- and decode feature, and with a salt parameter?

Thanks in advance, Tim Visée

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-03T14:31:51.283

让我解释一下编码、散列和加密之间的区别。

*   编码只是一种表示数据的方式，因此它不能帮助您提高安全性。base64 用于将 8 位数据表示编码为 6 位，即用于在电子邮件正文中传输。对你没用。
*   散列是一种数据的单向转换，通常具有以下属性：
    *   许多（实际上是无限的）不同的数据字符串具有相同的哈希值。您可以散列任意长度的字符串，但生成的散列始终具有有限的长度，因此并非每个输入字符串都可以具有唯一散列是很清楚的。
    *   虽然散列法很快，但无法比尝试所有可能的组合更简单地计算具有指定散列值的原始数据。
    *   加密是您正在寻找的。加密数据只能使用适当的密钥读取。

但是，我认为加密数据库中的数据没有什么意义。如果有人看到您的 PHP 源代码和数据库，他可以轻松读取密钥并解密数据。它只能在有人窃取原始数据库但仍然无法访问您的源代码时为您提供帮助，但这种情况非常罕见，Web 程序员通常不会这样做。

# javascript - getElementById & onclick Button function won't work

> ID：15186244
> 
> 赞同：1
> 
> 时间：2013-03-03T13:39:51.737
> 
> 标签：javascript, jquery, onclick, getelementbyid

Thanks alot to wiz kid & Axel Martinez ! Problem is solved !

works this way:

```
$(document).ready(function() {
    $("#info").on('click', function() {
        $(".infos").toggleClass("infos_sichtbar");
    }); 
```

* * *

i am trying to use my button with getElementById, but it won't work :(

The script is for a WebApplikation that is going to be a native App converted by PhoneGap. I want to change the CSS class of an element with the script, so that my div called "infos" is getting visible. It works with this script:

```
 <script>
    $(document).ready(function() {
        $("button").on('click', function() {
            $(".infos").toggleClass("infos_visible");
        })
    });

    </script> 
```

But the problem is, there are two buttons, one for informations that should get visible with the click and one for legal notices ...

I'm trying to get it work this way:

first attempt:

```
$(document).ready(function() {
        $.getElementById("info").on('click', function() {
            $(".infos").toggleClass("infos_sichtbar");
        })
    }); 
```

second attempt:

```
 $(document).ready(function() {
        $.getElementById("info").onclick = function() {
            $(".infos").toggleClass("infos_sichtbar");
                    }
                 /* $.getElementById("legalnotice").onclick = function() {
            $(".legalnotice").toggleClass("legalnotice_sichtbar");
        }*/
    }); 
```

When im using the script, the click on the button doesn't do anything.

Edit:

HTML Code:

```
<body>

<div class="infos">Blub blub blub blub blub blub blub blub</div>

<header>
    <h1>App</h1>
</header>
<section>
    <h1>welcome!</h1>
    <p class="einleitung">intro</p>
<aside>
    <p>Lorem ipsum dolor sit amet, consetetur sadipscing elitr, sed diam nonumy eirmod tempor invidunt ut labore et dolore magna aliquyam erat, sed diam voluptua. At vero eos et accusam et justo duo dolores et ea rebum. Stet clita kasd gubergren, no sea takimata sanctus est Lorem ipsum dolor sit amet. Lorem ipsum dolor sit amet, consetetur sadipscing elitr, sed diam nonumy eirmod tempor invidunt ut labore et dolore magna aliquyam erat, sed diam voluptua. At vero eos et accusam et justo duo dolores et ea rebum. Stet clita kasd gubergren, no sea takimata sanctus est Lorem ipsum dolor sit amet. </p>
</aside><button id="info">Infos</button><button id="impress">Impressum</button>
</section>
<script src="zepto.js"></script>
<script src="app.js"></script>
<script>
window.scrollTo(0,1);
</script> 
```

The script is implemented with the app.js file.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-03T13:45:25.270

尝试使用

```
$("#info") 
```

代替

```
$.getElementById("info") 
```

IE

```
$(document).ready(function() {
        $("#info").on('click', function() {
            $(".infos").toggleClass("infos_sichtbar");
        });
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-03T13:49:16.407

如果您使用的是 jQuery，为什么不使用选择器，例如

```
$(document).ready(function() {
    $("#info").click(function() {
        $(".infos").toggleClass("infos_sichtbar");
    });
}); 
```

# javascript - 非常简单的 JavaScript / jQuery 示例：指令的意外评估顺序

> ID：15186245
> 
> 赞同：9
> 
> 时间：2013-03-03T13:39:55.413
> 
> 标签：javascript, jquery, css, css-transitions

令我惊讶的是，在基于 jQuery 的 CSS 属性更改**之后**通过 jQuery 应用的 CSS3 转换规则实际上会为该属性更改设置动画。请查看[http://jsfiddle.net/zwatf/3/](http://jsfiddle.net/zwatf/3/)：

最初，一个 div 由两个类设置样式，并且由于这两个类的默认 CSS 属性而具有一定的高度（200px）。然后使用 jQuery 通过删除一个类来修改高度：

```
$('.container').removeClass('active'); 
```

这会将高度从 200 像素降低到 15 像素。

之后，通过添加一个类将转换规则应用于容器：

```
$('.container').addClass('all-transition'); 
```

正在发生的事情是高度的减少变成了动画（至少在 Firefox 和 Chrome 上）。在我的世界里，如果指令的顺序有任何意义，这不应该发生。

**我想这种行为可以很好地解释。为什么会这样？我该如何预防？**

这就是我想要实现的目标：

1.  使用 jQuery 修改默认样式（不是由 CSS3 过渡动画！）
2.  使用 jQuery 应用转换规则
3.  使用 jQuery 更改属性（由 CSS3 过渡动画）

(1) 和 (2) 应该尽快发生，所以我不喜欢随意拖延。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-03T14:11:05.317

> 为什么会这样？

我猜是因为 DOM 看到它们一起应用；立即连续的动作通常被缓存而不是一个接一个地应用。

> 我该如何预防？

一个（非常小的）超时应该这样做：http: [//jsfiddle.net/zwatf/4/](http://jsfiddle.net/zwatf/4/)

（来自评论）手动触发回流也有帮助：http: [//jsfiddle.net/zwatf/9/](http://jsfiddle.net/zwatf/9/)

> 我不喜欢任意拖延。

然后我认为唯一可能的方法是`height`从动画css属性中删除 ，即您需要明确说明您想要动画的那些：http: [//jsfiddle.net/zwatf/5/](http://jsfiddle.net/zwatf/5/)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-03T14:22:16.500

运行脚本时，浏览器通常会将 DOM 更改推迟到最后，以防止不必要的绘制。您可以通过读取/写入某些属性来强制回流：

```
var container = $('.container').removeClass('active');
var foo = container[0].offsetWidth;  //offsetWidth makes the browser recalculate
container.addClass('all-transition'); 
```

[jsFiddle](http://jsfiddle.net/zwatf/7/)

或者您可以使用`setTimeout`较短的持续时间，它通过让浏览器自动重排然后添加类来完成基本相同的事情。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-03T13:45:24.220

我想，它发生得太快了。如果你这样做：

```
$('.container').toggleClass('active',function() {
    $('.container').addClass('all-transition');
}); 
```

它会像您预期的那样运行，对吗？

好的，好的，我测试了它，但我没有意识到它没有按预期工作。这里有一个替代方案：

```
$('.container').removeClass('active').promise().done(function(){
    $('.container').addClass('all-transition');

    $('.container').css('height','300'); //to see the easing
}); 
```

# android - How to fetch multiple items from android sqlite database and store it in array?

> ID：15186247
> 
> 赞同：0
> 
> 时间：2013-03-03T13:40:05.683
> 
> 标签：android, sqlite

I m using static database to fetch data. I m fetching longitude and latitude of static location from database, storing it in string and using. What if i want to extract all longitude and latitude and store it in an array...i mean array of size [137][15] storing latitude and longitude in a single 2d array.....or 2 separate 1 d array. One for latitude ..another for latitude...

```
DataBaseHelper2 mDbHelper = new DataBaseHelper2(this);
try {
    mDbHelper.createDataBase();
} catch (IOException e) {
    // TODO Auto-generated catch block
    e.printStackTrace();
}      
try {
    mDbHelper.openDataBase();
} catch (SQLException e) {
    // TODO Auto-generated catch block
    e.printStackTrace();
}   
    Spinner s1=(Spinner) findViewById(R.id.spinner1);
    int index1=s1.getSelectedItemPosition();
    String Text1 = s1.getSelectedItem().toString();
    String Text3="";
    String Text4="";

    if(index1==0)
    {
        Toast.makeText(getApplicationContext(),"Please Enter station", Toast.LENGTH_SHORT).show();
    }
    else{
    Cursor c=mDbHelper.fetchQuery(Text1);

    int latitude =  c.getColumnIndex("lat");
    int longitude = c.getColumnIndex("lng");

    for(c.moveToFirst();!c.isAfterLast();c.moveToNext()){
        Text3=Text3 + c.getString(latitude)+"\n";
        Text4=Text4 + c.getString(longitude)+"\n";
    }

    Double p,p1;
    p=Double.valueOf(Text3).doubleValue();
    p1=Double.valueOf(Text4).doubleValue(); 
```

fetchquery is a method to extract longitude and latitude where name of station matches with text of spinner1.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T13:46:29.980

使用`List<BasicNameValuePair>`它们将以键值方式存储。当您迭代存储它们时，将它们添加到列表中，例如：

```
List<BasicNameValuePair> latLongList = new ArrayList<BasicNameValuePair>();
 for(c.moveToFirst();!c.isAfterLast();c.moveToNext()){
        latLongList.add(new BasicNameValuePair(c.getString(latitude), c.getString(longitude)));
    } 
```

然后你可以在任何你想要的地方使用它。在这种情况下，纬度将是关键，经度将是价值。

这是这样做的一种方式。相反`BasicNameValuePair`，您可以`android.location.Location`以相同的方式使用和设置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T14:03:38.750

我认为你会遇到比使用二维数组更值得的麻烦。如果您想保留 2 个常规数组，那么也许您可以查看以下代码：

```
 if(index1==0){
            Toast.makeText(getApplicationContext(),"Please Enter station", Toast.LENGTH_SHORT).show();
        }else{
        Cursor c=mDbHelper.fetchQuery(Text1);
        arrLatitude = new String [c.getCount()];
        arrLongitude = new String [c.getCount()];

        int latitude =  c.getColumnIndex("lat");
        int longitude = c.getColumnIndex("lng");

        i = 0;
        for(c.moveToFirst();!c.isAfterLast();c.moveToNext()){
            Text3=Text3 + c.getString(latitude)+"\n";
            Text4=Text4 + c.getString(longitude)+"\n";
            arrLatitude[i] = Text3;
            arrLongitude[i] = Text4;
        i++;
        } 
```

就个人而言，我宁愿用一个对象来将这两者`Strings`结合在一起。这样，万一索引由于某种原因不匹配，您就可以放心了。

# php - 如何在对它们求和并显示时显示所有字段？

> ID：15186253
> 
> 赞同：0
> 
> 时间：2013-03-03T13:40:34.857
> 
> 标签：php, mysql, sum

我在显示所有按以下方式分组的名称时遇到问题，例如：

这是我的桌子：

```
IMEPRIIMEK  REZULTAT  EKIPA
------------------------------
Ela         256       e13e01
Joe         218       e13e01
Tim         198       e13e01
Dan         265       e13e02
Jim         256       e13e02
Kim         215       e13e02 
```

使用我制作的代码，我得到了这个结果：

```
#  EKIPA  TOTAL  IMEPRIIMEK
-------------------------------
                 Dan
1  e13e02  736   Jim
                 Kim
------------------------
                 Ela
2  e13e01  672   Joe 
                 Tim 
```

这是我的代码：

```
<?php

$con = mysql_connect("localhost","root","");
if (!$con)
  {
  die('Could not connect: ' . mysql_error());
  }

mysql_select_db("paradox", $con);

$result2 = mysql_query("SELECT NazivEkipe, ImePriimek, Rezultat,
                        SUM(Rezultat) AS 'total'
                        FROM tekmovanje
                        WHERE NazivEkipe='e13e01' OR NazivEkipe='e13e02' OR NazivEkipe='e13e03' OR NazivEkipe='e13e04' OR NazivEkipe='e13e05'
                        GROUP BY NazivEkipe
                        ORDER BY total DESC") or die(mysql_error());
$rank = 0;
while($row = mysql_fetch_array ($result2))
{
$rank++; 
?>

<tr align="center" valign="middle">
     <td rowspan="3" align="center" valign="middle"><?php echo $rank; ?></td>

     <td rowspan="3" align="center" valign="middle" style="font-weight: bold; color: #008AFF;"><?php echo $row['total']; ?></td>

     <td rowspan="3" align="center" valign="middle"><?php echo $row['NazivEkipe']; ?></td>
<tr align="center" valign="middle">
  <td align="center" valign="middle" ><?php echo $row['ImePriimek']; ?></td>
</tr>

<?php
}
?>

</table> 
```

帮帮我，谢谢你的回答。

PS：这个仅供个人使用，**不会上线**，所以我不关心SQL注入或使用PDO MySQLi做这个

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T13:48:26.360

您缺少表格标签`<table>`

试试这个

```
 SELECT Ekipa , ImePriimek, Rezultat,
                    SUM(Rezultat) AS total
                    FROM tekmovanje
                    WHERE Ekipa in ('e13e01','e13e02','e13e03','e13e04','e13e05')
                    GROUP BY Ekipa 
                    ORDER BY total DESC 
```

[**在这里演示**](http://www.sqlfiddle.com/#!2/4798d/6)

或者如果您将分组`ImePriimek`以显示所有用户

```
 SELECT Ekipa , ImePriimek, Rezultat,
                    SUM(Rezultat) AS total
                    FROM tekmovanje
                    WHERE Ekipa in ('e13e01','e13e02','e13e03','e13e04','e13e05')
                    GROUP BY Ekipa ,ImePriimek
                    ORDER BY total DESC 
```

[**在这里演示**](http://www.sqlfiddle.com/#!2/4798d/7)

编辑。我​​认为这就是你想要的

试试这个

```
 SELECT Ekipa , group_concat(ImePriimek) as IMEPRIIMEK, Rezultat,
                    sum(Rezultat) AS total
                    FROM tekmovanje
                    WHERE Ekipa in ('e13e01','e13e02','e13e03','e13e04','e13e05')
                    GROUP BY Ekipa
                    ORDER BY total DESC 
```

结果

```
 _______________________________________
  |  EKIPA  IMEPRIIMEK    REZULTAT TOTAL  |
  | ______________________________________|
  | e13e02  Dan,Jim,Kim     265     726   |
  | e13e01  Ela,Joe,Tim     256     672   |
  |_______________________________________| 
```

[**在这里看演示**](http://www.sqlfiddle.com/#!2/4fc6d/3)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T13:41:57.430

为什么不只是这个查询？

```
SELECT EKIPA, sum(REZULTAT), GROUP_CONCAT(DISTINCT IMEPRIIMEK)
FROM yourtable
GROUP BY EKIPA 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-03T13:42:56.313

我想你想得到每个`EKIPA`.

```
SELECT  a.*, b.totalResult
FROM    tableName a
        INNER JOIN
        (
            SELECT  EKIPA, SUM(REZULTAT) totalResult
            FROM    tableName 
            GROUP   BY EKIPA
        ) b ON a.EKIPA = b.EKIPA 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!2/5318e/1)

结果

```
╔════════════╦══════════╦════════╦═════════════╗
║ IMEPRIIMEK ║ REZULTAT ║ EKIPA  ║ TOTALRESULT ║
╠════════════╬══════════╬════════╬═════════════╣
║ Ela        ║      256 ║ e13e01 ║         672 ║
║ Joe        ║      218 ║ e13e01 ║         672 ║
║ Tim        ║      198 ║ e13e01 ║         672 ║
║ Dan        ║      265 ║ e13e02 ║         736 ║
║ Jim        ║      256 ║ e13e02 ║         736 ║
║ Kim        ║      215 ║ e13e02 ║         736 ║
╚════════════╩══════════╩════════╩═════════════╝ 
```

# php - PDO update_user 函数

> ID：15186255
> 
> 赞同：0
> 
> 时间：2013-03-03T13:40:39.927
> 
> 标签：php, security, pdo

像这样使用 update_user 函数是否安全？

```
function update_user($update_data) {
    global $pdo;

    $update = array();

    foreach($update_data as $field=>$data){
    $update[] = '`'. $field.'` = \''. $data.'\''; 
    }
    $query = $pdo->prepare("UPDATE users SET " . implode(', ', $update) ."WHERE user_id = " .$_SESSION['user_id']);
    $query->execute(); 
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T13:43:26.410

当然不是。
标识符和字符串的格式不充分。
并且您没有使用将 PDO 与旧扩展区分开来的占位符。

在[PDO 标签 wiki](https://stackoverflow.com/tags/pdo/info)中，您可以找到一个使用辅助函数执行此任务的示例。
从那里使用一个函数，你可以这样做

这个函数可以这样使用：

```
function update_user($allowed) {
    global $pdo;
    $allowed = array("name","surname","email","password"); // allowed fields
    $sql = "UPDATE users SET ".pdoSet($allowed,$values)." WHERE id = :id";
    $stm = $pdo->prepare($sql);
    $values["id"] = $_SESSION['user_id'];
    $stm->execute($values);
}
// usage:
update_user(); 
```

请注意，此函数将直接从 $_POST 数组中获取值，因此需要提及两件重要的事情：

*   无需手动创建 $input_data
*   如果 $_POST 数组中缺少字段（例如散列密码），则必须手动添加它们。

但是，如果您已将您的`$input_data`白名单列入白名单（即在脚本中创建所有字段名称硬编码），也可以使用 deceze 的解决方案。
**但是如果`$input_data`来自客户端，他的解决方案很容易受到 SQL 注入**

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-03T13:46:23.223

不，您使用准备好的语句是没有意义的，并且数据不会被转义。使用正确准备的语句，如下所示：

```
$fields = array_map(function ($key) { return "`$key` = :$key"; }, array_keys($update_data));
$query  = sprintf('UPDATE users SET %s WHERE user_id = :userId', join(', ', $fields));
$stmt   = $pdo->prepare($query);

forach ($update_data as $key => $value) {
    $stmt->bindValue(":$key", $value);
}
$stmt->bindParam(':userId', $_SESSION['user_id']);

$stmt->execute(); 
```

这至少假设数组键是白名单值，不会导致语法问题。

# javascript - Synchronous functions without callbacks

> ID：15186256
> 
> 赞同：0
> 
> 时间：2013-03-03T13:40:42.027
> 
> 标签：javascript, function, blocking, synchronous, serial-processing

Assume I have these two functions:

```
function complex() {
        setTimeout(function() {
                console.log('complex setTimeout');
        }, 1000); // assume this value is random
        function subFun() {
                console.log('complex subFun');
                setTimeout(function() {
                        console.log('complex subFunction setTimeout');
                }, 2000); // assume this value is random
        }
        subFun();
}

function simple() {
        console.log('simple');
} 
```

Assume that I didn't write them - they are third party. Now I want to call them synchronously and get:

```
complex subFun
complex setTimeout
complex subFunction setTimeout
simple 
```

The problem is, I can't use callbacks (third party functions). I also can't use promises or events (the same reason). I can't use `async` and `step` modules, because of functions arity. How the hell can I call `simple()` after `complex()` (and all nested sub-functions) synchronously? And do JavaScript sux? :)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T15:38:28.300

> 我怎么能在[异步事物]同步之后调用simple（）？

你不能。这就是*异步*与*同步*的定义。

如果你有没有反馈的异步脚本，你只有两个选择：

*   `setInterval`通过 a或类似方法轮询脚本的结果，并`simple()`在检测到已到达后执行
*   用更好的第三方替换那个第三方

# c# - 通过继承实现类型安全

> ID：15186267
> 
> 赞同：0
> 
> 时间：2013-03-03T13:41:44.040
> 
> 标签：c#

这可能是一个简单的问题，但是到目前为止我找不到解决方案...

假设我有一个接口“IEntity”，它由其他几个接口实现。我想要的是这些接口中的每一个都实现了一个具有自身返回类型的方法。例如，实体“Car”应该返回“ICar”，而实体“Person”应该返回“IPerson”。我尝试使用泛型类型实现此功能，但没有找到真正可接受的解决方案。

希望你能帮助我，在此先感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T13:50:19.350

通常的方法是使用“循环模板模式”：

```
interface IEntity<T> where T : IEntity<T>
{
    T GetSelf();
} 
```

然后你的实体类型实现这个接口，使用它们自己的类型作为泛型参数`T`：

```
public class Car : IEntity<Car>
{
    Car GetSelf() { return this; }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-03T13:50:27.647

我并不完全清楚你在追求什么，但这听起来很接近而且很简单。

```
interface IEntity<T>
{
    T Value { get; }
}

class Car : IEntity<ICar>
{
    ICar Value { get; }
}

class Person : IEntity<IPerson>
{
    IPerson Value { get; }
} 
```

你需要更复杂的东西吗？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-03T13:51:16.807

好吧，您可以使用泛型相当容易地做到这一点，但我假设您的代码在某个地方会处理一个`IEntity`并且在编译时不知道底层泛型类型。如果是这样，那么您可以这样声明两个接口：

```
public interface IEntity<T> : IEntity
{
    new T GetThis();
}

public interface IEntity
{
    object GetThis();
} 
```

然后你`Car`可能看起来像这样：

```
public class Car : ICar, IEntity<ICar>
{
    public ICar GetThis()
    {
        Console.WriteLine("Generic GetThis called");
        return this;
    }

    object IEntity.GetThis()
    {
        Console.WriteLine("Non-generic GetThis called");
        return this;
    }
} 
```

这使用[Explicit Interface Implementation](http://msdn.microsoft.com/en-ca/library/vstudio/ms173157.aspx)，因此如果调用代码*知道*它是 a `Car`（或者更确切地说是 an `IEntity<ICar>`），那么它将利用通用版本。如果它只知道它，`IEntity`那么它将利用非通用版本。

所以一些可能会利用这一点的代码：

```
public static T SomeMethod<T>(IEntity<T> entity)
{
    T target = entity.GetThis(); //Generic GetThis called
    return target;
}

public static object SomeNonGenericMethod(IEntity entity)
{
    object target = entity.GetThis(); //Non-generic GetThis called
    return target;
}

Car car = new Car();
ICar icar = SomeMethod<ICar>(car);

IEntity someEntity = new Car();
object obj = SomeNonGenericMethod(someEntity); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-03T13:52:49.163

只需为 cause 中的方法添加一个返回类型，它是派生接口中的方法返回的所有可能类型的超类。对于您的情况：

```
interface IEntity {
  IEntity SomeMethod();
} 
```

# mysql - 如何在 MySQL 中创建用户/组关联

> ID：15186270
> 
> 赞同：3
> 
> 时间：2013-03-03T13:42:01.630
> 
> 标签：mysql, sql, database-design, relational-database

我正在开发 PHP/MySQL 中的 webapp，我已经到了需要创建用户/组关联的地步。

这是我要拍摄的：

*   我将拥有越来越多的组和用户。

*   用户将能够随时修改他们的组关联
    。

*   组协会将决定
    网站上显示的内容的优先级。

*   发送给用户的电子邮件更新将由他们当前的组关联决定。

我的问题是，处理此用户/组关联的最佳方式是什么？

我当前的表结构如下所示（为便于沟通而简化）：

```
Users:
User_ID, User_name, Fname, Lname, is_dealer

Deals:
Deal_ID, Dealer_ID, Deal_name, Deal_content

Dealers:
Dealer_ID, User_ID, Dealer_name, Dealer address.. etc. 
```

我最初的想法是创建一个包含 Group_ID 和 Group_name 列的 Groups 表。然后我可以做以下两件事之一：

我可以在 Groups 表中创建一个名为“User_ID”的列，并且对于每个组关联，我都有一行说明 Group_ID、Group_name 和 User_ID。该选项感觉就像它会创建一个巨大的超级冗余数据库表。

我能想到的另一个选项是在 Users 表中创建一个 Group_ID 列，然后在必须解析的某种文本数组中填充与用户关联的所有组。这里的问题是我希望有无限数量的组，并且为我的用户表中的每一行将所有用户的组关联塞入一个“值”似乎超级草率。

真的，这是一个 SQL 数据库逻辑/设计问题。任何帮助都会有很大帮助。

谢谢！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-03T14:15:07.110

只需制作一个将用户与组相关联的表格。两列：一列存储唯一的 user_id，另一列存储唯一的 group_id。

如果您使 user_id-group_id 组合唯一，则不需要此表中的唯一键。两列就足够了。

```
+---------+      +------------+
| user    |      | user2group |     +----------+
+---------+      +------------+     | group    |
| user_id |----->| user_id    |     +----------+
| name    |      | group_id   |<----| group_id |
| pass    |      +------------+     | name     | 
| ...     |                         | ...      |
+---------+                         +----------+ 
```

如果我没记错的话，这是*规范化*的三个步骤之一。也许你应该看看这个。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-03T14:12:41.017

您必须创建一个交叉表。

保持您的用户原样并创建以下两个表：

```
Groups:
Group_ID, Group_name

Groups_Users:
Group_ID, User_ID 
```

这是典型的 n:m 关系，没有冗余数据。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-03T14:15:52.307

在我看来，将用户链接到 GROUPS 表

您必须创建第三个名为 u_g_relationship 的表

表结构

```
id    user_id    group_id
--    -------    --------
1     2          7
2     2          5 
```

与将关系塞入一列相比，这将使更新或删除关系变得非常容易

我希望这能解决你的问题，亚历克斯。

# jquery - jQuery主干搜索输出错误

> ID：15186274
> 
> 赞同：0
> 
> 时间：2013-03-03T13:42:23.993
> 
> 标签：jquery, backbone.js

所以。我的主干搜索输出有问题。当我搜索某些内容时，一切正常并输出：**结果：** 立即测试...当我决定搜索其他内容时，它会将其输出为**结果：testResult：test2**这是不正确的。我还有在线演示[http:// jsbin.com/ogabam/3](http://jsbin.com/ogabam/3) 谢谢。

指数：

```
<form name="input" action="" method="get">
Search: <input type="text" name="search">
<input type="submit" value="Submit">
</form>

<script type="text/javascript">
$('form').submit(function() {
    var form_data = ($(this).serialize());
    window.location.hash = form_data.replace('=','/');
    return false;
});
</script> 
```

主要的：

```
(function() {

window.App = {
    Models: {},
    Collections: {},
    Views: {},
    Router: {}
};

App.Router = Backbone.Router.extend({
    routes: {
        '': 'index',
        'show/:id': 'show',
        'search/:query': 'search',
        '*other': 'default'
    },

    index: function() {
        $(document.body).append("");
    },

    show: function(id) {
        $(document.body).append(id);
    },

    search: function(query) {
        $(document.body).append("Result: " + query);
    }

});

new App.Router();
Backbone.history.start();

})(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T14:25:34.240

添加 a`div`作为结果的占位符，然后用结果替换文本。

（如果你想使用`append`你可以使用[`empty()`](http://api.jquery.com/empty/)之前）

工作示例：http: [//jsbin.com/ogabam/4/](http://jsbin.com/ogabam/4/)

# android - 手机锁定时在 Android 中启用麦克风

> ID：15186275
> 
> 赞同：1
> 
> 时间：2013-03-03T13:42:24.150
> 
> 标签：android, mobile

有什么方法可以让服务在 Android 中运行，以便在我们说话时启用麦克风并为我们提供对应用程序的访问权限？

# verilog - “非法引用网络错误”是什么意思？

> ID：15186290
> 
> 赞同：2
> 
> 时间：2013-03-03T13:43:42.017
> 
> 标签：verilog, flip-flop

我为 T 触发器编写了这段代码。输出在每 11 个时钟切换一次。该程序给了我这个错误：

> 非法引用网络“clkDivider”

这个错误是什么意思？是什么原因造成的？

这是代码：

```
module TFF(clkDivider,clk,reset,q);

input clk,reset;
input [3:0]clkDivider;
output reg q;

always @(posedge clk or negedge reset)
begin
   if(~reset==0)
   begin
      q=0;
      clkDivider<=0;
   end
   else
      if(clkDivider==11)
      begin
         q=1;
         clkDivider<=0;
      end
      else
         clkDivider<=clkDivider+1;
end

endmodule 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-03T14:21:57.453

`input`您不应为模块信号赋值。尝试：

```
output reg [3:0] clkDivider; 
```

此外，您可能应该对 使用非阻塞分配`q`，例如：

```
q <= 0; 
```

# fix-protocol - 发送安全状态的场所之间的差异

> ID：15186293
> 
> 赞同：0
> 
> 时间：2013-03-03T13:44:18.547
> 
> 标签：fix-protocol

我有 Venue 1，它会在发送安全定义请求消息时自动发送安全状态。但是 Venue 2 使用 SecurityStatusRequest 消息。

现在如何解决来自 Venue 2 的用户从 Venue 1 请求安全状态的问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T14:40:56.783

这个问题暗示了对 FIX 在实践中如何工作的一些误解。这是我澄清这一点的最佳尝试。

当场地提供 FIX 界面时，他们可以设置规则。如果您有一个客户端应用程序并且您想将它连接到某个场所的服务器，您需要针对该场所的消息定义和配置来定制您的应用程序。任何其他场所的定义或配置都无关紧要。

如果您想将一个客户端连接到两个不同的场所，您不能假设它们的界面有任何共性。即使它们都是相同的 FIX 版本（例如都是 FIX 4.4），也会存在差异。您必须仔细阅读每个场所的文档并相应地实现客户的不同连接逻辑。

因此，在您的示例中，Venue 2 的用户如果想要获得状态，则*必须*发送 SecurityStatusRequest 消息，并且没有办法绕过它。您需要决定如何实现它。Venue 2 制定了他们的规则，他们并不关心 Venue 1 如何做事。

**可能**的实施：一旦您收到证券清单，如果您在 Venue 2，循环浏览它并为每个证券发送一个 SSR。如果您的两个场地处理程序共享逻辑，那么您会将其放在`if(current_venue==venue2)`-type 块中。

# ios - 如何编写两个方法完成后执行的方法（ios）

> ID：15186294
> 
> 赞同：23
> 
> 时间：2013-03-03T13:44:23.320
> 
> 标签：ios, objective-c, function

我有 2 种方法可以在按钮单击事件上执行，比如说`method1:`和`method2:`。两者都有网络调用，所以不能确定哪个会先完成。

我必须`methodFinish`在完成 method1: 和 method2: 后执行另一个方法：

```
-(void)doSomething
{

   [method1:a];
   [method2:b];

    //after both finish have to execute
   [methodFinish]
} 
```

除了典型的，我怎么能做到这一点`start method1:-> completed -> start method2: ->completed-> start methodFinish`

阅读有关块的内容..我对块很陌生。有人可以帮我写一个吗？任何解释都会很有帮助。谢谢

* * *

## 回答 #1

> 赞同：52
> 
> 时间：2013-03-03T14:11:53.807

这就是[调度组](http://developer.apple.com/library/ios/#documentation/General/Conceptual/ConcurrencyProgrammingGuide/OperationQueues/OperationQueues.html)的用途。

```
dispatch_queue_t queue = dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0);
dispatch_group_t group = dispatch_group_create();

// Add a task to the group
dispatch_group_async(group, queue, ^{
  [self method1:a];
});

// Add another task to the group
dispatch_group_async(group, queue, ^{
  [self method2:a];
});

// Add a handler function for when the entire group completes
// It's possible that this will happen immediately if the other methods have already finished
dispatch_group_notify(group, queue, ^{
   [methodFinish]
}); 
```

调度组由 ARC 管理。它们由系统保留，直到它们的所有块都运行，因此在 ARC 下它们的内存管理很容易。

另请参阅`dispatch_group_wait()`是否要阻止执行直到组完成。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-05-08T06:54:03.037

我从 Google 的 iOS 框架中得到的简洁的小方法，他们非常依赖：

```
- (void)runSigninThenInvokeSelector:(SEL)signInDoneSel {

    if (signInDoneSel) {
        [self performSelector:signInDoneSel];
    }

} 
```

# javascript - jQuery对话框自动完成中带有重音问题的字符

> ID：15186299
> 
> 赞同：0
> 
> 时间：2013-03-03T13:45:01.523
> 
> 标签：javascript, jquery-autocomplete, non-ascii-characters

我正在尝试`Colón`在自动完成 JQuery 对话框中将该单词显示为可能的条目。不幸的是，我得到`ColÃ³n`了。我试图 HTML 转义它，但它显示`Col&oacute;n`.

我怎样才能正确显示这个词？

**REM：**数组条目定义如下：

```
v["CR"]="Colón"; 
```

**更新：**

1）文档类型是

```
<!doctype html> 
```

我有一个

```
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8"> 
```

2) 我正在使用 JQuery 1.8.3

3) 本地列表，或者正确地说，在加载有以下内容的 Javascript 文件中：

```
<script src='./incl/curr.js' type="text/javascript"></script> 
```

我已经执行了一个额外的测试，并将这个词包含在一个纯 HTML`<h2>`中。它显示正确。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-03T13:54:11.893

我假设您的文本编辑器使用不同的字符集。在编辑器中将其更改为 UTF-8，然后再次检查您的文字并确保您的页面以 UTF-8 显示。

# ios - iOS - 界面生成器与手动编程

> ID：15186301
> 
> 赞同：1
> 
> 时间：2013-03-03T13:45:11.523
> 
> 标签：ios, xib

XCode 提供了一个非常智能的工具来创建布局、出口、动作等。我在 Netbeans 下使用了一些 Java Swing 项目以及我们手动创建的所有布局东西——这是一个很好的方法来控制一切并独立于任何难以维护自动生成的东西。老实说，我喜欢这种方法。

在阅读了这样的主题之后：
[iOS：以编程方式创建 UIWindow 会导致错误的位置](https://stackoverflow.com/questions/12716725/ios-programmatically-creating-uiwindow-results-in-wrong-position)
或
[你更喜欢在 ib-or-programmatically-and-why](https://softwareengineering.stackexchange.com/questions/35443/do-you-prefer-building-your-interfaces-in-ib-or-programmatically-and-why)

我可以看到问你“iOS 怎么样”（没有简单的答案）是没有意义的，但我想我可以问你*（根据你的经验）使用 IB 在这个意义上是否有任何限制，那就是它使用 IB 而不是手动创建它更难或不可能实现？*

- 我是新来的，所以如果我的问题不适合这里，请告诉我......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-03T13:52:34.810

Well, one answer to you very general question might me: If your user interface is static, it is MUCH easier to define it in IB or storyboard. If is is dynamic (e.g. has moving items) you have to do it programmatically.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-03T13:57:33.753

根据我的经验并询问了一些使用 iOS 的人，使用界面生成器做了很多繁重的工作，一些不必要的样板代码已为您删除。

这使您的代码库更小，而无需您手动编写这些生成的代码。

就个人而言，如果您刚开始，我建议您先学习如何手动完成，然后再学习 IB（如果您不介意陡峭的学习曲线）。

在您了解事物的连接方式之后，它使您能够走得更远，并在何时使用哪种技术时做出更明智的选择。

# excel - 将不同文件夹中的多个工作簿合并为一个

> ID：15186302
> 
> 赞同：0
> 
> 时间：2013-03-03T13:45:17.547
> 
> 标签：excel, excel-2003, vba

我想知道是否有人可以帮助我。

我正在使用下面的代码来允许用户将来自不同文件夹的多个工作簿合并到一个“摘要”工作表中。

```
Sub Merge()

      Dim DestWB As Workbook, WB As Workbook, WS As Worksheet, SourceSheet As String
      Set DestWB = ActiveWorkbook
      SourceSheet = "Input"
      startrow = 7
      FileNames = Application.GetOpenFilename( _
      filefilter:="Excel Files (*.xls*),*.xls*", _
      Title:="Select the workbooks to merge.", MultiSelect:=True)
      If IsArray(FileNames) = False Then
          If FileNames = False Then
              Exit Sub
          End If
      End If
      For n = LBound(FileNames) To UBound(FileNames)
          Set WB = Workbooks.Open(Filename:=FileNames(n), ReadOnly:=True)
          For Each WS In WB.Worksheets
              If WS.Name = SourceSheet Then
                  With WS
                      If .UsedRange.Cells.Count > 1 Then
                          dr = DestWB.Worksheets("Input").Range("C" & DestWB.Worksheets("Input").Rows.Count).End(xlUp).Row + 1
                          Lastrow = .Range("C" & Rows.Count).End(xlUp).Row
                          If Lastrow >= startrow Then
                              .Range("A" & startrow & ":AE" & Lastrow).Copy
                              DestWB.Worksheets("Input").Cells(dr, "A").PasteSpecial xlValues
                          End If
                      End If
                  End With
                  Exit For
              End If
          Next WS
          WB.Close savechanges:=False
      Next n
  End Sub 
```

该代码有效，但我想稍微调整一下，以便用户不必手动选择要合并的文件，宏读取文件名和文件路径列表并自动复制和粘贴相关数据进入“摘要”表。

我已经设置了我的摘要工作簿，所以有一个名为“列表”的工作表，其中列出了 B3:B10 和 C3:C10 中列出的文件名相关的文件路径。我搜索了“Stackoverflow”并进行了谷歌搜索，虽然我找到了很多关于这个主题的帖子，但它们并没有告诉我如何从文件名和路径列表中读取，而是硬编码一个特定的不适合我需要的目录。

我只是想知道是否有人可以看看这个，并就我如何能够实现这一点提供一些指导。

非常感谢和亲切的问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T16:56:01.677

请使用插件 RDBMerge。

RDBMerge 是一种用户友好的方式，可以将多个 Excel 工作簿、csv 和 xml 文件中的数据合并到摘要工作簿中

[http://www.rondebruin.nl/merge.htm](http://www.rondebruin.nl/merge.htm)

# java - 如何为 scoll 视图设置 XY 和高度宽度

> ID：15186305
> 
> 赞同：0
> 
> 时间：2013-03-03T13:45:30.337
> 
> 标签：java, android

我有 scroll-view 和 table-layout ， row-table 。

现在我想在编程代码而不是 xml 中为每个设置 X 和 Y 边距以及高度和宽度。

请注意，我为此活动使用绝对布局。

这是我的完整活动代码：

公共类 ListActivity 扩展 Activity {

```
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_list);

AbsoluteLayout ff = (AbsoluteLayout)  this.findViewById(R.id.AbsoluteLayout1);

    TableLayout tl = new TableLayout(this);
    TableRow tr = new TableRow(this);
    TextView tv = new TextView(this);
    ScrollView myScrollView = new ScrollView(this);

            // adding scrollview to current layout 
    ff.addView(myScrollView);

           // adding TableLayout to current myScrollView
    myScrollView.addView(tl);

            /* not working
    ViewGroup.LayoutParams lp = new LayoutParams(100 ,100);
    myScrollView.setLayoutParams(lp);*/

    myScrollView.setPadding(0, 210, 120, 0);

                /* not working 
    LayoutParams layoutParams = new LayoutParams(
             LayoutParams.FILL_PARENT, 
             LayoutParams.WRAP_CONTENT);

    myScrollView.setLayoutParams(layoutParams);  */ 

    tr.addView(tv);

    tv.setText("gewgewg");

 tv.addView(tr);
}

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T17:25:25.903

你可以试试..

```
myScrollView.setLayoutParams(new ViewGroup.LayoutParams(500, 900));
myScrollView.addView(home_linear, new LayoutParams(LayoutParams.FILL_PARENT, LayoutParams.FILL_PARENT)); 
```

在您的布局中填写此滚动视图。对于 x，y，您可以看到..

*   [如何从 Linear Layout android 获取特定的位置 xy 坐标？](https://stackoverflow.com/questions/6017819/how-to-get-specific-position-xy-coordinates-from-linear-layout-android)
*   [水平滚动视图的Android设置位置](https://stackoverflow.com/questions/10507976/android-setting-position-of-hortizontal-scrollview)

# c# - MVC SiteMap 从 menuhelper 中隐藏一个节点，但在 sitepathhelper 中显示（面包屑）

> ID：15186307
> 
> 赞同：4
> 
> 时间：2013-03-03T13:45:46.190
> 
> 标签：c#, asp.net-mvc, breadcrumbs, mvcsitemapprovider, sitemapprovider

我试图从我的站点菜单中隐藏一个节点，但在我的面包屑中显示它

我在这里学习教程：[https ://github.com/maartenba/MvcSiteMapProvider/wiki/Advanced-Node-Visibility](https://github.com/maartenba/MvcSiteMapProvider/wiki/Advanced-Node-Visibility)

```
<mvcSiteMapNode title="Create Customer" controller="Customer" action="Create" area="Home" clickable="false" visibility="SiteMapPathHelper,!*"/> 
```

以上似乎不起作用。它显示在我的站点菜单和面包屑中。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-07T10:39:27.790

我们创建了 OnlyBreadCrumbMVCSiteMapNodeAttribute。我们装饰任何我们想要属性的代码

```
public class OnlyBreadCrumbMvcSiteMapNodeAttribute : MvcSiteMapNodeAttribute
{
    public OnlyBreadCrumbMvcSiteMapNodeAttribute(string title, string parentKey)
    {
        Title = title;
        ParentKey = parentKey;
        VisibilityProvider = typeof(BreadCrumbOnlyVisibilityProvider).AssemblyQualifiedName;
    }
    public OnlyBreadCrumbMvcSiteMapNodeAttribute(string title, string parentKey, string key)
    {
        Title = title;
        Key = key;
        ParentKey = parentKey;
        VisibilityProvider = typeof(BreadCrumbOnlyVisibilityProvider).AssemblyQualifiedName;
    }
} 
```

还有一个可见性提供者

```
public class BreadCrumbOnlyVisibilityProvider : ISiteMapNodeVisibilityProvider
{
    public bool IsVisible(SiteMapNode node, HttpContext context, IDictionary<string, object> sourceMetadata)
    {
        if (sourceMetadata["HtmlHelper"] == null || (string)sourceMetadata["HtmlHelper"] == "MvcSiteMapProvider.Web.Html.SiteMapPathHelper")
        {
            return true;
        }
        return false;
    }
} 
```

使用喜欢

> ```
>  [OnlyBreadCrumbMvcSiteMapNode("Upload Documents", "AssetDocuments")]
>     public virtual ActionResult FileUpload(int assetId) 
> ```

上传文件将是面包屑标题。AssetDocuments 是父键

如果传递第三个参数，则设置面包屑节点本身的键

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-11-23T23:31:53.700

您应该使用本指南了解如何隐藏节点

[https://github.com/maartenba/MvcSiteMapProvider/wiki/Advanced-Node-Visibility-with-ISiteMapNodeVisibilityProvider](https://github.com/maartenba/MvcSiteMapProvider/wiki/Advanced-Node-Visibility-with-ISiteMapNodeVisibilityProvider)

您可以从上面的链接中设置一些设置：

```
<appSettings>
    <!-- Visibility will not filter to children -->
    <add key="MvcSiteMapProvider_VisibilityAffectsDescendants" value="false"/>
    <!-- Set default visibility provider -->
    <add key="MvcSiteMapProvider_DefaultSiteMapNodeVisibiltyProvider" value="MvcSiteMapProvider.FilteredSiteMapNodeVisibilityProvider, MvcSiteMapProvider"/>
</appSettings> 
```

添加应用程序设置后，将以下内容添加到您希望在面包屑而不是菜单中看到的任何节点：

`visibility="SiteMapPathHelper,!*"`（SiteMapPathHelper - 节点在站点地图路径中可见，!* - 它对所有其他控件不可见）

例如：

```
<mvcSiteMapNode title="Administration" area="Admin" clickable="false" visibility="SiteMapPathHelper,!*" /> 
```

其他可用选项：

**类型**............**它对**
CanonicalHelper 的影响............Canonical HTML Helper
MenuHelper....... .......Menu HTML Helper
MetaRobotsHelper....Meta Robots HTML Helper
SiteMapHelper..........SiteMap HTML Helper
SiteMapPathHelper...SiteMapPath HTML Helper
SiteMapTitleHelper...标题HTML Helper
XmlSiteMapResult.... /sitemap.xml 端点的站点地图 XML 输出

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-24T11:33:49.890

将此添加到您的 web.config

```
<appSettings>
  <add key="MvcSiteMapProvider_DefaultSiteMapNodeVisibiltyProvider" value="MvcSiteMapProvider.FilteredSiteMapNodeVisibilityProvider, MvcSiteMapProvider"/>
<appSettings> 
```

# java - JAX-RS jersey 客户端：读取带有状态码的响应

> ID：15186315
> 
> 赞同：10
> 
> 时间：2013-03-03T13:47:01.917
> 
> 标签：java, web-services, rest, jersey, jax-rs

我正在使用此代码使用 jersey 客户端调用 jersey JAX-RS 服务。

```
public static void main(String[] args) {
    ClientConfig config = new DefaultClientConfig();
    Client client = Client.create(config);

    WebResource service = client.resource(getBaseURI());

    String msg = service.path("rest").path("ExceptionDemo").path("user").queryParam("id", "001").get(String.class);     
    System.out.println(msg);

}

private static URI getBaseURI() {
    return UriBuilder.fromUri("http://localhost:8045/ExceptionHanlding").build();
} 
```

当响应状态代码为 200 时，此代码可以正常工作。但对于 200 以外的任何内容，此代码都会引发异常。

如何修改此代码，以便根据响应的状态代码执行某些操作？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-03-03T13:52:33.667

使用`.get(ClientResponse.class)`而不是`.get(String.class)`. 这抑制了“异常状态异常”行为，并且[ClientResponse](http://jersey.java.net/nonav/apidocs/latest/jersey/com/sun/jersey/api/client/ClientResponse.html)使您可以访问有关 HTTP 响应的详细信息。该行为在[“接收响应”](http://jersey.java.net/nonav/documentation/latest/user-guide.html#d4e665)下的用户指南中进行了简要描述。

# ajax - 成功时使用 ajax 的 codeigniter 刷新列表

> ID：15186319
> 
> 赞同：0
> 
> 时间：2013-03-03T13:47:23.923
> 
> 标签：ajax, html, codeigniter, jquery

我使用带有 ajax 的 codeigniter 来发布表单。下面是我使用的 ajax 代码。代码使发布成功。

```
<script type="text/javascript">
$('#post_submit').click(function() {
  var form_data = {
    csrfsecurity: $("input[name=csrfsecurity]").val(),
    post_text: $('#post_text').val()    
  };

  $.ajax({
    url: "<?php echo site_url('/post_status'); ?>",
    type: 'POST',
    data: form_data,
    success: function(response){
      $(".home_user_feeds").html("markUpCreatedUsingResponseFromServer");
    }
  });
  return false;
});
</script> 
```

但是我在同一页面上列出了状态帖子，所以我希望一旦 ajax 发布成功，列表应该在不刷新整个页面的情况下刷新。我想刷新特定列表部分并显示最后发布的统计信息而不刷新整个页面。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T14:26:29.027

好的，一旦帖子完成，您的服务器应该通过查询数据库表中的值来返回更新的列表值，并且在您的代码的以下部分中，您应该更新您的列表

```
success: function(response){
  $(".home_user_feeds").html("markUpCreatedUsingResponseFromServer");
  $("#div_list").html(response);
} 
```

您需要查询数据库的原因是其他用户可能也在发布数据，因此您希望查看列表中的每个帖子。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T07:30:55.923

或者您可以配置您的控制器/模型以查询数据库中的最新更改，使用 json_encode 进行包装：

```
 $result = $this->mymodel->getupdates();
   print json_encode(array('success' => TRUE, 'rows' => $result)); 
```

然后在您的脚本中，使用 jquery ajax 中的成功处理程序，遍历行以从响应中创建动态 html：

```
 var htm = '';
   for(r in response.rows){
      htm = htm + 'dynamic_html'; //make a construction here
   }

   $("#div_list").append(htm); //if you want to append only latest update
   $("#div_list").html(htm); //if you want to replace your current view 
```

# core-audio - 通过 UISlider 将自定义参数传递给音频单元 kAudioUnitSubType_HighPassFilter 截止

> ID：15186320
> 
> 赞同：1
> 
> 时间：2013-03-03T13:47:32.507
> 
> 标签：core-audio

我想要实现的是通过从`UISlider`示例 1（正常状态）发送值以编程方式更改截止参数：

```
 Float32 highPassFilterCutoff = 4000.0;
CheckError(AudioUnitSetParameter(_auHighPassFilter,
                                 kHipassParam_CutoffFrequency,
                                 kAudioUnitScope_Global,
                                 0,
                                 highPassFilterCutoff,
                                 0),
           "Coulnd't set kHipassParam_CutoffFrequency "); 
```

我想要的是：

```
NSLog(@"cutOffSlider.value in effect %f",cutOffslider.value );
   Float32 highPassFilterCutoff = cutOffslider.value;
CheckError(AudioUnitSetParameter(_auHighPassFilter,
                                 kHipassParam_CutoffFrequency,
                                 kAudioUnitScope_Global,
                                 0,
                                 highPassFilterCutoff,
                                 0),
           "Coulnd't set kHipassParam_CutoffFrequency "); 
```

我是这样尝试的...

```
-(IBAction)cutOffslider:(id)sender {
    [cutOffslider setMinimumValue:0.0];
    [cutOffslider setMaximumValue:6000.0];
     NSLog(@"SliderValue ... %d",(int)sender);
} 
```

调试控制台上的输出

```
PlayBasic[567:c07] cutOffSlider.value in effect 0.500000 
```

你怎么能看到我可以从滑块获得浮点值，但是当我在模拟器上通过滑块增加或减少值时，效果不会改变截止参数。在运行时更改参数的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T20:39:34.843

首先这个

```
NSLog(@"SliderValue ... %d", (int)sender); 
```

是错的。`Sender`是一个对象，发送消息的对象： UISliderView 和 this 不能只转换为`int`

您需要将 连接`(IBAction)cutoffSlider:(id)sender`到 UISliderView 的操作，然后在其中设置过滤器值，如下所示：

```
-(IBAction)cutOffslider:(id)sender {
    [cutOffslider setMinimumValue:0.0];
    [cutOffslider setMaximumValue:6000.0];
    NSLog(@"SliderValue ... %d",(int)sender);

    Float32 highPassFilterCutoff = cutOffslider.value;
    CheckError(AudioUnitSetParameter(_auHighPassFilter,
                             kHipassParam_CutoffFrequency,
                             kAudioUnitScope_Global,
                             0,
                             highPassFilterCutoff,
                             0),
       "Couldn't set kHipassParam_CutoffFrequency ");
} 
```

# php - 有什么方法可以在 PHP 中保持与 mysql 数据库的连接？

> ID：15186324
> 
> 赞同：2
> 
> 时间：2013-03-03T13:47:49.230
> 
> 标签：php, mysql, database, performance

我试图优化我的一些 PHP 代码。我发现我的 PHP 脚本的大部分时间都花在了脚本开头连接到我的 mysql 数据库的过程中。

我只在开始时连接到数据库一次，并在脚本结束时关闭数据库连接。

但是对于每个请求此页面的用户，都必须建立一个新的连接。

有没有办法保存对数据库的引用并为所有请求共享它？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-03T13:54:03.677

是的，你可以做到这一点。

如果您使用的是 MySQLi 扩展（最后没有*i*的旧扩展已**过时！**`p:` ），您可以通过在创建实例时将前缀作为主机名 传递来创建持久连接：

请参阅[mysqli::__construct](http://www.php.net/manual/en/mysqli.construct.php)。

[如果你真的在使用旧的 MySQL 扩展，有[mysql_pconnect](http://de3.php.net/manual/en/function.mysql-pconnect.php) for persistent connections]。

或者，如果您使用的是 PDO，那么您可以`setAttribute()`使用`PDO::ATTR_PERSISTENT`.

有关在[`PDO`](http://php.net/manual/en/pdo.connections.php).

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-03T14:02:48.080

您可以使您的连接持久（对于 PDO，使用[PDO::ATTR_PERSISTENT => true](http://php.net/manual/en/pdo.connections.php)），但我的建议是找出您的脚本为什么要花费大量时间连接到 mysql 并在那里进行一些改进。

考虑一下：

*   使用 MySQL 服务器 IP 而不是主机名，以消除解析 dns 所需的时间。
*   禁用 mysql 自动补全：（`skip-auto-rehash`来自评论`my.cnf`）
*   如果您进行大量查询，这些查询会一遍又一遍地返回相同的内容，请考虑使用缓存系统来缓存查询结果。
*   [在codereview.stackexchange.com](http://codereview.stackexchange.com)上发布您的代码，以从其他专业知识中受益，从而进一步改进您的代码。
*   要进一步调试问题，请从控制台连接到 MySQL 服务器并检查打开连接、更改数据库、选择等所需的时间。

# ios - 仅在应用程序运行时接收报亭通知

> ID：15186332
> 
> 赞同：15
> 
> 时间：2013-03-03T13:49:07.340
> 
> 标签：ios, objective-c, apple-push-notifications, newsstand-kit

当应用程序未运行时，我没有收到报亭通知，这就是我所做的。

该应用程序具有正确的 plist 键“UINewsstandApp = YES”和“UIBackgroundModes = newsstand-content”。

在应用程序委托中，我注册了所有通知类型，并从服务器端（我使用的是名为 Grocer 的 gem）接收来自 APNS 的令牌，我设置了开发证书并发送常规推送，它可以工作。

如果我发送报摊推送，如果应用程序在“didReceiveRemoteNotification”上运行，我会收到它，但当应用程序未运行时，我在通知中心什么也得不到，这主要是因为“Grocer”具有以下有效负载 {“aps”： {"content-available":1}} 并且不能添加任何其他键（警报、徽章等）

所以我认为我不应该在通知中心得到任何东西，我在启动选项中查找'UIApplicationLaunchOptionsRemoteNotificationKey'，然后编写一个文件以确保应用程序在后台运行，该文件永远不会这样写

```
NSDictionary *remoteNotif = [launchOptions objectForKey:UIApplicationLaunchOptionsRemoteNotificationKey];

if(remoteNotif)
    {
        NSString *cachePath = [NSSearchPathForDirectoriesInDomains(NSCachesDirectory, NSUserDomainMask, YES) objectAtIndex:0];
        NSString *filePath = [cachePath stringByAppendingPathExtension:@"pushreceived.txt"];
        [@"testing" writeToFile:filePath atomically:YES encoding:NSASCIIStringEncoding error:nil];
    } 
```

我在我的用户默认设置中将 NKDontThrottleNewsstandContentNotifications 设置为 true，然后我进行同步以确保。

当应用程序运行时，无论我发送多少次推送，我总是会在“didReceiveRemoteNotification”上收到回调，并带有正确的“内容可用”

如果应用程序已关闭或在后台，则不会发生任何事情。

更新：

我设法更改了发送通知有效负载的 gem，这是它发送的字典

```
{"aps"=>
   {
     "alert"=>"Hello iPhone!!",
     "content-available"=>1,
     "badge"=>1,
     "sound"=>"default"
   }
} 
```

这里是我在我的应用程序上收到的用户信息字典（运行时）

```
{
    aps =     {
        alert = "Hello iPhone!!";
        badge = 1;
        "content-available" = 1;
        sound = default;
    };
} 
```

请注意 content-available 周围的引号，这是否意味着 APNS 将其解析为自定义键？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-06T19:23:16.493

要在应用程序在后台运行时接收通知，您需要向`applicationDidEnterBackgroud`主类添加一个方法。从[苹果文档](http://developer.apple.com/library/ios/#documentation/NetworkingInternet/Conceptual/RemoteNotificationsPG/IPhoneOSClientImp/IPhoneOSClientImp.html#//apple_ref/doc/uid/TP40008194-CH103-SW14)：

> 当应用程序在后台运行并且某些消息、数据或其他用户可能感兴趣的项目到达时，它们也可能会发现本地通知很有用。在这种情况下，他们应该使用 UIApplication 方法 presentLocalNotificationNow 立即呈现通知：（iOS 为应用程序提供了在后台运行的有限时间）。[清单 2-2](http://developer.apple.com/library/ios/#documentation/NetworkingInternet/Conceptual/RemoteNotificationsPG/IPhoneOSClientImp/IPhoneOSClientImp.html#//apple_ref/doc/uid/TP40008194-CH103-SW14)说明了如何做到这一点。

* * *

```
- (void)applicationDidEnterBackground:(UIApplication *)application {
    NSLog(@"Application entered background state.");
    // bgTask is instance variable
    NSAssert(self->bgTask == UIInvalidBackgroundTask, nil);

    bgTask = [application beginBackgroundTaskWithExpirationHandler: ^{
        dispatch_async(dispatch_get_main_queue(), ^{
            [application endBackgroundTask:self->bgTask];
            self->bgTask = UIInvalidBackgroundTask;
        });
    }];

    dispatch_async(dispatch_get_main_queue(), ^{
        while ([application backgroundTimeRemaining] > 1.0) {

            // Replace this code with your notification handling process

            NSString *friend = [self checkForIncomingChat];
            if (friend) {
                UILocalNotification *localNotif = [[UILocalNotification alloc] init];
                if (localNotif) {
                    localNotif.alertBody = [NSString stringWithFormat:
                        NSLocalizedString(@"%@ has a message for you.", nil), friend];
                    localNotif.alertAction = NSLocalizedString(@"Read Message", nil);
                    localNotif.soundName = @"alarmsound.caf";
                    localNotif.applicationIconBadgeNumber = 1;
                    [application presentLocalNotificationNow:localNotif];
                    [localNotif release];
                    friend = nil;
                    break;
                }
            }
        }
        [application endBackgroundTask:self->bgTask];
        self->bgTask = UIInvalidBackgroundTask;
    });

} 
```

另[请注意](http://developer.apple.com/library/ios/#documentation/NetworkingInternet/Conceptual/RemoteNotificationsPG/IPhoneOSClientImp/IPhoneOSClientImp.html#//apple_ref/doc/uid/TP40008194-CH103-SW19)：

> 因为非运行应用程序支持的唯一通知类型是图标标记，只需将 NSRemoteNotificationTypeBadge 作为 registerForRemoteNotificationTypes: 的参数传递。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-11T04:37:22.597

试试这些作为健全性检查：

*   在“设置”->“报亭”中，您可以像应用一样自动下载内容。
*   确保你`[[UIApplication sharedApplication] registerForRemoteNotificationTypes:UIRemoteNotificationTypeNewsstandContentAvailability]`在你的应用程序中使用了一些东西。
*   确保您在 plist 中已将所需的背景模式设置为“newsstand-content”。
*   在设备中运行应用程序，而不是在模拟器中。

如果您正确完成了这些操作，`didReceiveRemoteNotification`即使您的应用程序未运行，您也应该收到通知。

# html - 验证错误，对象，使用 swf/flash

> ID：15186337
> 
> 赞同：0
> 
> 时间：2013-03-03T13:49:47.960
> 
> 标签：html, object, flash

我不明白为什么它不能通过验证（

```
<!-- logo -->
 <div id="tdLogo">
   <object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" width="548" height="170" ><param name="movie" value="swf/logoFinal.swf" />
  <!--[if !IE]>-->
    <object type="application/x-shockwave-flash" data="swf/logoFinal.swf" width="548" height="170">
  <!--<![endif]-->
      <img src="images/logo.jpg" alt="Logo said LULWORTH Dorset" />
  <!--[if !IE]>-->
    </object>
  <!--<![endif]-->
</object> 
 </div> 
```

第 263 行，第 90 列：元素对象缺少以下一个或多个属性：数据、类型。…44553540000" 宽度="548" 高度="170" >

第 263 行，第 90 列：对象元素上的 classid 属性已过时。使用 data 和 type 属性来调用插件。要设置名称为 classid 的参数，请使用 param 元素。…44553540000" 宽度="548" 高度="170" >

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-10-31T07:36:34.563

我在用：

```
<object type="application/x-shockwave-flash" data="flashfile.swf" id="loader" name="loader" style="width:640px;height:480px;vertical-align:middle;">
    <param name="allowScriptAccess" value="always" />
    <param name="allowFullScreen" value="true" />
    <param name="movie" value="flashfile.swf" />
    <param name="quality" value="high" />
    <param name="bgcolor" value="#ffffff" />    
</object> 
```

注意：不再需要使用`embed`标签。

# android-ndk - 在 cygwin 中找不到 ndk-build

> ID：15186340
> 
> 赞同：1
> 
> 时间：2013-03-03T13:49:53.160
> 
> 标签：android-ndk, cygwin

我正在尝试在 cygwin 中使用 ndk-build 但由于某种原因，它无法找到该命令。

我尝试将 NDK 的路径添加到 PATH 环境变量中，如图所示。我可以从命令行调用 ndk-build，但不能在 cygwin 中这样做。

![在此处输入图像描述](../Images/ca00e4516802b86131317257795f46f0.png)

然后按照[这篇文章](https://stackoverflow.com/questions/4797509/cannot-use-ndk-build-on-cygwin)的建议，我尝试通过在前面附加 ./ 来运行 ndk-build。还是不行。

![在此处输入图像描述](../Images/f3afe6b40732be8f75c01435d0e53c79.png)

作为最后的手段，我编辑了 .bash_profile 的路径，使其指向 NDK 目录。再次，它不起作用。

**叹息.......**我将不胜感激任何指导。

![在此处输入图像描述](../Images/e8e95bbb3f38cffa196a54ed7ab137f1.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T14:02:19.977

删除安装 ndk 的文件夹中的尾随/空白空间。

请参阅[Android NDK：No rule to make target](https://stackoverflow.com/questions/6243047/android-ndk-no-rule-to-make-target)解决类似问题。

# c++ - 打印链表 - C++

> ID：15186341
> 
> 赞同：-3
> 
> 时间：2013-03-03T13:49:57.450
> 
> 标签：c++, linked-list

我有一个基本问题。整数存储[] = {8,6,4,2}。为什么打印 2 4 6 8 而不是 8 6 4 2？你能解释一下为什么吗？代码的哪一部分导致它？我无法理解。

这是代码：

```
 #include <iostream>
   #include <string>
   #include <cstdlib>
   #include <ctime>

     using namespace std;

  struct node {
int info;
node *next; 

node::node ()
{}

node::node (const int & s, node * link)
    : info(s), next (link)
{}
    };

    void DisplayList (node * head)
   {
cout << "The list content is: ";
node * ptr = head;
   while (ptr != NULL) 
{
    cout << ptr ->info << " ";
    ptr = ptr->next;
}
cout << endl<<endl;
      }

 int main()
  {
int storage[] = {8,6,4,2};
node *head = NULL;
node *temp = NULL;

for (int k=0; k < 4; k++)  {
    temp = new node();
    temp->info = storage[k];
    temp->next = head;
    head = temp;
}

DisplayList (head);

    cin.ignore();
    cin.get();
    return 0; 
```

}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-03T13:52:27.697

这段代码：

```
int storage[] = {8,6,4,2};
node *head = NULL;
node *temp = NULL;

for (int k=0; k < 4; k++)  {
    temp = new node();
    temp->info = storage[k];
    temp->next = head;        // <----- here, temp is before head
    head = temp;              //        head is made first node again
} 
```

*在 .之前* 添加每个元素`head`，因为它是按顺序处理的，在`{8,6,4,2}`. 因此，您以相反的顺序创建列表。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T13:57:52.503

您`head`将被您创建的每个新节点覆盖，因此您的 for 循环以相反的顺序附加

这就是你想要的。。

```
for (int k=0; k < 4; k++) 
{
    temp = new node();
    temp->info = storage[k];
    temp->next=NULL;
    if(head==NULL)
        head=temp;
    else
        head->next=temp; 
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-03T13:57:53.110

要么从存储的另一端开始填充，要么可以这样做：

```
int storage[] = {8,6,4,2};
node *head = NULL;
node *temp = NULL;
node *previous = NULL;

for (int k=0; k < 4; k++)  {
    temp = new node();
    if (head == NULL)
    {
       head = temp;
    }
    if (previous != NULL)
    {
       previous->next = temp;
    }
    temp->info = storage[k];
    previous = temp;
} 
```

# php - 类级别变量的奇怪行为

> ID：15186342
> 
> 赞同：0
> 
> 时间：2013-03-03T13:50:06.977
> 
> 标签：php

我已经查看了这个代码一个多小时，对我来说它看起来不错。但是，当我使用 insertSubmit() 函数时，描述变量正在失去作用域。该变量是在构造过程中设置的，但不是在我使用 insertSubmit() 时设置的。我在这里错过了什么吗？

```
<?php session_start();

class SubmitNew {

var $title = "";
var $category = "";
var $summary = "";
var $description = "";  
var $username = "";
var $timestamp = "";
var $errors = "";
var $errorStr = "";
var $link = "";
var $db = "";

public function __construct() {
    $this->setVariables();
    $this->errors = 0;
    $this->p_id = 1;

}
public function setVariables() {
    $this->title = "1";
    $this->category = "2";
    $this->summary = "3";
    $this->description = "4";
    echo $this->description;
    $this->timestamp = mktime(date("G"), date("i"),
    date("s"), date("m") , date("d"), date("Y"));
}
public function errorBlank() {
    if($this->title == null) {
        $this->errorStr = $this->errorStr."blanktitle";
        $this->errors++;    
    } if($this->summary == null) {
        $this->erroStr = $this->errorStr."blanksummary";
        $this->errors++;            
    } if($this->description = null) {
        $this->erroStr = $this->errorStr."blankdescription";
        $this->errors++;    
    }
}
public function errorAll() {
    if($this->errors == 0) {
        return "success";
    } else {
        return $this->errorStr; 
    }
}
public function insertSubmit() {
    echo $this->description;
}   
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-03T14:01:37.533

问题出在`errorBlank()`功能上，当你这样做时：

```
} if($this->description = null) { 
```

而不是这样做：

```
} if($this->description == null) { 
```

注意额外的等号！您分配`null`给`$this->description`，而不是比较它们！

# sql - 如何查找项目、活动和子活动之间的数据库关系

> ID：15186344
> 
> 赞同：1
> 
> 时间：2013-03-03T13:50:25.483
> 
> 标签：sql, database, relational-database

我正在为承包公司建立一个数据库。我面临以下情况的问题：

每个项目都有很多活动，同样，每个活动也有很多子活动。

例如，医院建筑施工就是该项目。其活动之一是应急建筑施工。本次活动有很多子活动；其中之一是电线。我决定创建以下表格：

项目和活动。这两个表具有多对多的关系。因此，我创建了一个名为 FollowUpSchedule 的表，其中包含项目 ID 和活动 ID。

我的问题是如何构建子活动表并将其连接到活动？我应该创建另一个具有活动 ID 和子活动 ID 的表吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T13:57:46.777

据我了解，我可以想到两种选择：

**第一个解决方案**

如您所述，创建另一个表来保存子报告。

活动表

*   活动ID
*   活动名称

子活动表

*   ID
*   活动ID
*   姓名

**第二种解决方案（我更喜欢它）**

更改 Activity 表以支持子父结构。

如果每个子活动都属于父活动，则可以实现层次结构

你的表结构应该是这样的：

*   活动ID
*   ParentID（0 - 如果是根）
*   活动名称

等等....

# jquery - 在 Rails 的嵌套表单中使用 jQuery 计算订单的总值

> ID：15186346
> 
> 赞同：0
> 
> 时间：2013-03-03T13:50:28.730
> 
> 标签：jquery, ruby-on-rails, nested-forms

我有一个创建账单的表格。可以使用用于 rails 的nested_form gem 添加该法案的不同文章。

现在我想在每次更改文章或文章数量时更新“总金额”值。

我的问题是：如何访问嵌套表单中的不同属性？

希望可以有人帮帮我。

我的 _forms.html.erb：

```
<%= nested_form_for @bill do |f| %>
    <div id="myModal" class="modal">
      <div class="modal-header">
        <%= link_to 'x', bills_path, :class => "close", "data-dismiss" => "modal" %>
        <% if @current_method == "edit" %>
            <h3>Rechnung bearbeiten</h3>
        <% else %>
            <h3>Rechnung anlegen</h3>
        <% end %>
      </div>
      <div class="modal-body">
  <% if @bill.errors.any? %>
    <div id="error_explanation">
      <h2><%= pluralize(@bill.errors.count, "Fehler") %> trat beim Speichern auf:</h2>

      <ul>
      <% @bill.errors.full_messages.each do |msg| %>
        <li><%= msg %></li>
      <% end %>
      </ul>
    </div>
  <% end %>

<div class="form-horizontal">
  <div class="control-group">
    <label class="control-label">Rechnungsdatum</label>
    <div class="controls"><%= f.date_select :date %></div>
  </div>
  <div class="control-group">
    <label class="control-label">Kunde</label>
    <div class="controls"><%= f.collection_select :customer_id, Customer.all, :id, :name_company_id %></div>
  </div>
  <div class="control-group">
    <label class="control-label">Artikel</label>
    <div class="controls">
      <%=f.fields_for :bill_items do |builder| %>
        <%= render 'bill_item_fields', :f => builder %>
      <% end %>
      <%= f.link_to_add "Artikel hinzufügen", :bill_items, :class => "btn btn-success", :style => "color:#fff" %><br>
      <small>(1 Einheit entspricht 30 min)</small>
    </div>
  </div>
  <div class="control-group">
    <label class="control-label">Rabatt</label>
    <div class="controls"><%= f.text_field number_with_precision(:discount, :precision => 2), :class => "input-mini", :style => "color:red", :placeholder => "0.00" %> &euro;</div>
  </div>
  <div class="control-group">
    <label class="control-label"><div style="font-weight:bold;">Gesamtpreis</div></label>
    <div class="controls"><div style="font-weight: bold;"><%= number_with_precision(@bill.total, :precision => 2) %> &euro;</div></div>
  </div>
  <hr>
  <% if @current_method == "edit" %>
  <div class="control-group">
    <label class="control-label">Bezahlt</label>
    <div class="controls">
      <%= f.check_box :state, :id=>"ch_location" %></div>
  </div>
      <% end %>
  <div class="control-group">
    <label class="control-label">Kategorie</label>
    <div class="controls"><%= f.select :category, %w{CMD Lindau}, :class => "input-mini" %></div>
  </div>
  </div>
        </div>

    <div class="modal-footer">
      <%= link_to 'Schliessen', bills_path, :class => "btn", "data-dismiss" => "modal" %>
      <%= f.submit 'Speichern',  :class => "btn btn-primary", :style => "color:#fff", :disable_with => "Speichere..." %>
    </div>
  </div>
</div>
<% end %> 
```

和particl _bill_items_field.html.erb：

```
<%= f.text_field :count, :class => "input-mini calc", :placeholder => "Anzahl", :id => "item_quantity" %>
<%= f.collection_select :article_id, Article.all, :id, :name_and_price, :id => "item_price" %>
Löschen? <%= f.check_box :_destroy %>
<br><br> 
```

编辑：我认为字段“：name_and_price”必须用正则表达式解析？目前它看起来像“NAME (x.xx €)”

编辑：HTML代码：

```
<body>

<!-- Navigation
    ================================================== -->
<form accept-charset="UTF-8" action="/bills/43" class="edit_bill" id="edit_bill_43" method="post"><div style="margin:0;padding:0;display:inline"><input name="utf8" type="hidden" value="&#x2713;" /><input name="_method" type="hidden" value="put" /><input name="authenticity_token" type="hidden" value="Ft2ry9QwRVEITjDRxt8b99OfVKHbaoiLkyotblgeJ9g=" /></div>
    <div id="myModal" class="modal">
      <div class="modal-header">
        <a href="/bills" class="close" data-dismiss="modal">x</a>
            <h3>Rechnung bearbeiten</h3>
      </div>
      <div class="modal-body">

<div class="form-horizontal">
  <div class="control-group">
    <label class="control-label">Rechnungsdatum</label>
    <div class="controls"><select id="bill_date_1i" name="bill[date(1i)]">
<option value="2008">2008</option>
<option value="2009">2009</option>
<option value="2010">2010</option>
<option value="2011">2011</option>
<option value="2012">2012</option>
<option selected="selected" value="2013">2013</option>
<option value="2014">2014</option>
<option value="2015">2015</option>
<option value="2016">2016</option>
<option value="2017">2017</option>
<option value="2018">2018</option>
</select>
<select id="bill_date_2i" name="bill[date(2i)]">
<option value="1">January</option>
<option selected="selected" value="2">February</option>
<option value="3">March</option>
<option value="4">April</option>
<option value="5">May</option>
<option value="6">June</option>
<option value="7">July</option>
<option value="8">August</option>
<option value="9">September</option>
<option value="10">October</option>
<option value="11">November</option>
<option value="12">December</option>
</select>
<select id="bill_date_3i" name="bill[date(3i)]">
<option value="1">1</option>
<option value="2">2</option>
<option value="3">3</option>
<option value="4">4</option>
<option value="5">5</option>
<option value="6">6</option>
<option value="7">7</option>
<option value="8">8</option>
<option value="9">9</option>
<option value="10">10</option>
<option value="11">11</option>
<option value="12">12</option>
<option value="13">13</option>
<option value="14">14</option>
<option value="15">15</option>
<option value="16">16</option>
<option value="17">17</option>
<option value="18">18</option>
<option value="19">19</option>
<option value="20">20</option>
<option value="21">21</option>
<option value="22">22</option>
<option value="23">23</option>
<option value="24">24</option>
<option value="25">25</option>
<option value="26">26</option>
<option value="27">27</option>
<option selected="selected" value="28">28</option>
<option value="29">29</option>
<option value="30">30</option>
<option value="31">31</option>
</select>
</div>
  </div>
  <div class="control-group">
    <label class="control-label">Kunde</label>
    <div class="controls"><select id="bill_customer_id" name="bill[customer_id]"><option value="1" selected="selected">#Schnell Adrian - CMD (ID 1)</option>
<option value="6">#Hans Gustav - Test2 (ID 6)</option></select></div>
  </div>
  <div class="control-group">
    <label class="control-label">Artikel</label>
    <div class="controls">
      <div class="fields">
        <input class="input-mini calc" id="item_quantity" name="bill[bill_items_attributes][0][count]" placeholder="Anzahl" size="30" type="text" value="22" />
<select id="bill_bill_items_attributes_0_article_id" name="bill[bill_items_attributes][0][article_id]"><option value="1">iOS (35.0 &euro;)</option>
<option value="2">Webdesign (25.0 &euro;)</option>
<option value="3">Beratung (50.0 &euro;)</option>
<option value="6" selected="selected">Anfahrt (0.8 &euro;)</option></select>
Löschen? <input name="bill[bill_items_attributes][0][_destroy]" type="hidden" value="0" /><input id="bill_bill_items_attributes_0__destroy" name="bill[bill_items_attributes][0][_destroy]" type="checkbox" value="1" />
<br><br>
<input id="bill_bill_items_attributes_0_id" name="bill[bill_items_attributes][0][id]" type="hidden" value="54" /></div><div class="fields">
        <input class="input-mini calc" id="item_quantity" name="bill[bill_items_attributes][1][count]" placeholder="Anzahl" size="30" type="text" value="2" />
<select id="bill_bill_items_attributes_1_article_id" name="bill[bill_items_attributes][1][article_id]"><option value="1" selected="selected">iOS (35.0 &euro;)</option>
<option value="2">Webdesign (25.0 &euro;)</option>
<option value="3">Beratung (50.0 &euro;)</option>
<option value="6">Anfahrt (0.8 &euro;)</option></select>
Löschen? <input name="bill[bill_items_attributes][1][_destroy]" type="hidden" value="0" /><input id="bill_bill_items_attributes_1__destroy" name="bill[bill_items_attributes][1][_destroy]" type="checkbox" value="1" />
<br><br>
<input id="bill_bill_items_attributes_1_id" name="bill[bill_items_attributes][1][id]" type="hidden" value="56" /></div>      <a href="javascript:void(0)" class="btn btn-success add_nested_fields" data-association="bill_items" data-blueprint-id="bill_items_fields_blueprint" style="color:#fff">Artikel hinzufügen</a><br>
      <small>(1 Einheit entspricht 30 min)</small>
    </div>
  </div>
  <div class="control-group">
    <label class="control-label">Rabatt</label>
    <div class="controls"><input class="input-mini" id="bill_discount" name="bill[discount]" placeholder="0.00" size="30" style="color:red" type="text" value="15" /> &euro;</div>
  </div>
  <div class="control-group">
    <label class="control-label"><div style="font-weight:bold;">Gesamtpreis</div></label>
    <div class="controls"><div style="font-weight: bold;">72.60 &euro;</div></div>
  </div>
  <hr>
  <div class="control-group">
    <label class="control-label">Bezahlt</label>
    <div class="controls">
      <input name="bill[state]" type="hidden" value="0" /><input checked="checked" id="ch_location" name="bill[state]" type="checkbox" value="1" /></div>
  </div>
  <div class="control-group">
    <label class="control-label">Kategorie</label>
    <div class="controls"><select id="bill_category" name="bill[category]"><option value="CMD" selected="selected">CMD</option>
<option value="Lindau">Lindau</option></select></div>
  </div>
  </div>
        </div>

    <div class="modal-footer">
      <a href="/bills" class="btn" data-dismiss="modal">Schliessen</a>
      <input class="btn btn-primary" data-disable-with="Speichere..." name="commit" style="color:#fff" type="submit" value="Speichern" />
    </div>
  </div>
</div>
</form><div data-blueprint="&lt;div class=&quot;fields&quot;&gt;
        &lt;input class=&quot;input-mini calc&quot; id=&quot;item_quantity&quot; name=&quot;bill[bill_items_attributes][new_bill_items][count]&quot; placeholder=&quot;Anzahl&quot; size=&quot;30&quot; type=&quot;text&quot; /&gt;
&lt;select id=&quot;bill_bill_items_attributes_new_bill_items_article_id&quot; name=&quot;bill[bill_items_attributes][new_bill_items][article_id]&quot;&gt;&lt;option value=&quot;1&quot;&gt;iOS (35.0 &amp;euro;)&lt;/option&gt;
&lt;option value=&quot;2&quot;&gt;Webdesign (25.0 &amp;euro;)&lt;/option&gt;
&lt;option value=&quot;3&quot;&gt;Beratung (50.0 &amp;euro;)&lt;/option&gt;
&lt;option value=&quot;6&quot;&gt;Anfahrt (0.8 &amp;euro;)&lt;/option&gt;&lt;/select&gt;
Löschen? &lt;input name=&quot;bill[bill_items_attributes][new_bill_items][_destroy]&quot; type=&quot;hidden&quot; value=&quot;0&quot; /&gt;&lt;input id=&quot;bill_bill_items_attributes_new_bill_items__destroy&quot; name=&quot;bill[bill_items_attributes][new_bill_items][_destroy]&quot; type=&quot;checkbox&quot; value=&quot;1&quot; /&gt;
&lt;br&gt;&lt;br&gt;
&lt;/div&gt;" id="bill_items_fields_blueprint" style="display: none"></div>

</body> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-03T14:20:16.437

我强烈建议您不要在视图中执行此操作，因为您会遇到您提到的问题（需要从格式化输出中解析值，例如价格）。

这是视图模型可能有用的地方，因为您试图从用于显示的模型中获取更多值。一个辅助方法可能就足够了，但是根据逻辑的复杂程度，您需要对其进行测试，并且很容易测试未与 Rails 耦合的类。

查看用于 Rails 的视图模型实现的[draper gem 。](https://github.com/drapergem/draper)

这并没有真正解决您关于如何将其与 jQuery 集成的问题，但根据您的需要，您可以在事情发生变化时使用 ajax 动态更新此表单。您还可以考虑将您感兴趣的原始值呈现为表单元素上的数据属性，这样您就不必担心删除格式。

**编辑**- 这是一种在表单元素中嵌入原始值的方法，因此它很容易被 jQuery 解析

在 Rails 中：

```
<%= f.text_field :foo, :data => {:price => "12.99"} %> 
```

呈现的 html 如下所示：

```
<input type="text" name="bill[foo]" id="bill_foo" data-price="12.99" /> 
```

用 jQuery 解析这个：

```
var price = $("#bill_foo").data("price"); 
```

希望这可以帮助。

# android - android-draw矩形中的ontouch

> ID：15186349
> 
> 赞同：0
> 
> 时间：2013-03-03T13:50:38.490
> 
> 标签：android, canvas, drawrect, touch-event

在我的触摸事件应用程序中，我想绘制矩形 - 我尝试了这个。但没有确切地知道如何绘制。请帮助我。我想在触摸的点上绘制矩形。如何在 drawRect() 方法中使用 getX() 和 getY()？下面是代码-

```
public boolean onTouch(View v, MotionEvent event) {
             if(event.getAction()==MotionEvent.ACTION_DOWN) {
                                int X=event.getX(); int Y=event.getY();
                    Paint paint = new Paint();
                    paint.setAntiAlias(true);
                    paint.setColor(getResources().getColor(R.color.Yellow)) ;
                    paint.setAlpha(opacity);
                               Canvas canvas1 = new Canvas(mutableimage1);
                          canvas1.drawRect(2.5f,2.5f,2.5f,2.5f, paint);
                                 }
              } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T13:54:27.580

Don't instantiate a new object in the onTouch method : `canvas1 = new Canvas(...)` It will cause freezes and lags. Create this canvas once for good at the creation of your view.

Be carefull I think your `drawRect()` call won't draw what you need : you are drawing a rect with x=2.5 y = 2.5 width=2.5 height=2.5

I assume you need to position your rect according to the touch position :

```
//set the x and y pos according to the touch point
// by removing half the size of the rect we center it on this point ;)
canvas1.drawRect( X-1.25f, Y-1.25f, 2.5F, 2.5f, paint ); 
```

Otherwise that's quite correct, but be aware that you are drawing on a mutable bitmap ("mutableimage1") that won't necessary be displayed.

You probably want to add the display in the `onDraw(Canvas viewCanvas)` method of your view. using :

`viewCanvas.drawBitmap(mutableimage1, 0,0, aPreviouslyCreatedPaint);`

# c# - 如何从 DataContext 中获取无类型的 ObservableCollection？

> ID：15186352
> 
> 赞同：0
> 
> 时间：2013-03-03T13:50:53.823
> 
> 标签：c#, windows-8, observablecollection, untyped-variables

我需要从 DataContext 获取无类型的 QueryableCollection 来查询它。我有以下代码：

```
printAbleListView = (ListView) printObject.FindName("printAbleListView");
// Here I like to have something like ObservableCollection<Object>
ObservableCollection<Journal> allItems = (ObservableCollection<Journal>) printAbleListView.DataContext;

// Add the page to the page preview collection
for (int i = 0; i <= (allItems.Count()/30); i++)
{
  printAbleListView.DataContext = null;
  printAbleListView.DataContext = allItems.Skip(30 * i).Take(30);
  document.SetPreviewPage((i + 1), printObject);
} 
```

目标是打印出 Metro 风格 Windows 8 应用程序中的任何 ListView。目前它被输入到`Journal`DataType，但我喜欢让它不被输入，这样这个函数就可以被每个 ListView 重用，而不仅仅是`Journal`那些。我可以存档吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-03T14:05:03.427

例子：

```
void GeneratePreview<T>(int itemsPerPage)
{
    var printAbleListView = (ListView)printObject.FindName("printAbleListView");
    var allItems = (ObservableCollection<T>)printAbleListView.DataContext;

    // Add the page to the page preview collection
    for (int i = 0; i <= (allItems.Count()/itemsPerPage); i++)
    {
      printAbleListView.DataContext =
              allItems.Skip(itemsPerPage * i).Take(itemsPerPage);
      document.SetPreviewPage((i + 1), printObject);
    }
} 
```

* * *

对于无类型访问，您实际上可以使用`ObservableCollection<T>`支持 non-generic的事实`ICollection`：

```
void GeneratePreview(int itemsPerPage)
{
    var printAbleListView = (ListView)printObject.FindName("printAbleListView");
    var allItems = (ICollection)printAbleListView.DataContext;

    var slice = new List<object>(itemsPerPage); // cannot use ArrayList for Win8 apps
    var pageNo = 1;
    foreach (var item in allItems)
    {            
        slice.Add(item);
        if (slice.Count % itemsPerPage == 0)
        {
            // flush
            printAbleListView.DataContext = slice;
            document.SetPreviewPage(pageNo, printObject);
            // and restart
            pageNo++;
            slice.Clear();
        }
    }
    if (slice.Count != 0) // flush the rest
    {
        printAbleListView.DataContext = slice;
        document.SetPreviewPage(pageNo, printObject);
    }
    // clean up
    printAbleListView.DataContext = null;
} 
```

# javascript - 使用航路点查找路线

> ID：15186359
> 
> 赞同：0
> 
> 时间：2013-03-03T13:51:18.810
> 
> 标签：javascript, google-maps, google-maps-api-3, url-routing

我正在使用 javascript、google maps api v3 和 pgouting 寻找两点之间的路线。现在我有以下方法，当我只给出一个航路点时它可以正常工作。但是当我超过一个航路点时它不起作用。有多个航路点时的格式用此符号分隔`'|'`。因此例如：`36.762121,14.7866553|35.988777778,14.655444333`

javascript方法如下：

```
 function calcRoute() {

        var all_nodes = document.getElementById('result').innerHTML;
        var node = all_nodes.split("|");

        var start = node[0];
        var end = node[node.length - 1];
        var wpts = [];

        for (var i = 1; i < node.length-1; i++) {
            wpts.push({
                location:node[i],
                stopover:true
            });
        }

        var request = {
            origin: start,
            destination: end,
            waypoints: wpts,
            travelMode: google.maps.TravelMode.DRIVING
        };

        directionsService.route(request, function (response, status) {
            if (status == google.maps.DirectionsStatus.OK) {
                directionsDisplay.setDirections(response);
            } else {
                alert('No route found');
            }
        });
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T14:16:58.327

实际不正确的航点是位置数组：LatLng 和 stopover:true 或 false，它们不使用管道分隔符，请参阅[航点](https://developers.google.com/maps/documentation/javascript/directions#Waypoints)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T17:46:15.087

如前所述，获取该位置的 google 对象可能会有所帮助，并且还可能有助于提供 lat 和 long 作为两个单独的实体。

```
 for (var i = 1; i < node.length-1; i = i + 1) {
        node[i] = node[i].split(',');
        wpts.push({
            location:new google.maps.LatLng(node[i][0], node[i][1]),
            stopover:true
        });
    } 
```

# c++ - 无法理解 Qt 中的 Undo Redo 框架

> ID：15186360
> 
> 赞同：6
> 
> 时间：2013-03-03T13:51:30.330
> 
> 标签：c++, qt

我正在学习将 Qt 用于我的应用程序开发，并且我在开发我的应用程序方面非常成功。现在我想为我的应用程序实现撤消重做功能。该主题的[文档](http://qt-project.org/doc/qt-5.0/qtdoc/qundo.html)几乎没有信息。我什至尝试从 SDK 中的 2 个示例中理解。但我很难理解它是如何工作的。有人可以麻烦解释一下如何实现它吗？我想为其提供此功能的应用程序中有各种状态。那么可以从一般的角度进行解释吗？如果互联网上已经有文章解释了相同的内容，请通知我。那将非常有帮助。谢谢你。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-03T14:16:26.250

有 2 个核心类：**QUndoCommand**和**QUndoStack**；

1.  QUndoCommand 是命令类的基类。您必须自己实现 undo() 和 redo()。
2.  QUndoStack 基本上是 QUndoCommand 对象的容器，具有额外的方法，例如创建 QAction、查询当前 QUndoCommand 的撤消/重做文本（您可以轻松实现的简单功能）

你需要做的是：

1.  执行您的命令。您需要根据需要自行决定如何实现重做/撤消。AppendText 类是一个很好的例子：http: [//qt-project.org/doc/qt-5.0/qtwidgets/qundocommand.html](http://qt-project.org/doc/qt-5.0/qtwidgets/qundocommand.html)
2.  为每个文档保留一个 QUndoStack 实例（如果应用程序中只有一个文档，则为一个实例）。
3.  假设您在 UI 中有一个“AppendText”命令类和一个“Append”按钮。如果点击“追加”按钮，则需要创建一个AppendText 命令实例，并调用QUndoStack::push(appendCmd)。QUndoStack::push() 会先调用 AppendText::redo()，然后放入容器中进行撤销。

就是这样。

# php - 从对象数组中获取值并在使用前修改其内容

> ID：15186361
> 
> 赞同：1
> 
> 时间：2013-03-03T13:51:34.063
> 
> 标签：php, joomla, multidimensional-array

抱歉，我不知道应该在哪些关键字下找到答案，但问题是：

有一个`$data->cart_show;`，在做`var_dump()`它时，我得到了这个值：

```
string '<a style ="float:right;" href="/index.php?option=com_virtuemart&amp;view=cart&amp;Itemid=105&amp;lang=en">Cart content</a>' (length=124) 
```

我需要删除`style`属性并`class`在其上添加自定义，（我需要在视图文件中而不是在控制器或模型中进行）所以它变成这样：

```
<a href="#SameURL" class="customClass">Cart content</a> 
```

感谢您的任何提示

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T14:16:15.130

这样的事情必须在模型、控制器或视图助手中完成。这种逻辑不应该出现在视图本身中。但是你想要的可以通过两种方式完成：

1) 使用 a并用带有[preg_replace()](http://www.php.net/manual/en/function.preg-replace.php)函数`regular expression`的 'class' 替换你的 'style' 属性

2) 使用[DOMDocument](http://php.net/manual/en/class.domdocument.php)修改现有元素

# actionscript-3 - 获取当前播放声音的结果 ByteArray

> ID：15186363
> 
> 赞同：0
> 
> 时间：2013-03-03T13:51:45.993
> 
> 标签：actionscript-3, flash, air, audio-recording

我正在开发一个模拟鼓组的桌面 AIR 应用程序。按下键盘会在应用程序中播放相应的鼓声。我已经在应用程序中放置了音符，因此用户将尝试播放特定的歌曲。

现在我想录制整个表演并将其导出为视频文件，比如 flv。我已经使用这个编码器成功录制了视频：
[http ://www.zeropointnine.com/blog/updated-flv-encoder-alchem/](http://www.zeropointnine.com/blog/updated-flv-encoder-alchem/)

但是，此编码器不具备自动录制声音的能力。我需要找到一种方法来获取`ByteArray`特定帧的声音，并将其传递给编码器。每帧可能`Sound`同时播放不同的对象，所以我需要获取最终声音的字节。

我知道`SoundMixer.computeSpectrum()`可以以字节为单位返回当前声音。但是`ByteArray`返回的长度固定为512，不符合编码器的要求。经过一番测试，采样率为 44khz 8 位立体声，编码器期望音频字节数据数组的长度为 5880。返回的数据`SoundMixer.computeSpectrum()`比编码器所需的要短得多。

我的应用程序以 60FPS 的速度运行，并以 15FPS 的速度录制。

所以我的问题是：**有什么方法可以获得当前帧中的音频字节，它由多个`Sound`对象混合，并且数据长度足以让编码器工作？**如果没有 API 可以做到这一点，我将不得不自己混合音频并获取结果字节，该怎么做？

# python - 将列表中的字典条目拆分为两个

> ID：15186364
> 
> 赞同：0
> 
> 时间：2013-03-03T13:52:14.383
> 
> 标签：python, list, dictionary, python-2.7

需要在具有作为字典列表的值的字典中执行操作

```
 my_dicts = 
           {"A": [
                 { 'key1 a' : 'value1',
                   'key2 a' : 'A, B, C' 
                 },

                 { 'key1 a' : 'value3',  
                   'key2 a' : 'D, E' 
                 }
                ]
              } 
```

如何将列表中的第一个字典拆分为列表中两个单独的字典，其键具有两个由逗号分隔的值。即上面的字典变成了

```
my_dicts = 
               {"A": [
                     { 'key1 a' : 'value1',
                       'key2 a' : 'A' 
                     },

                     { 'key1 a' : 'value1',
                       'key2 a' : 'B' 
                     },

                     { 'key1 a' : 'value1',
                       'key2 a' : 'C' 
                     },

                     { 'key1 a' : 'value3',  
                       'key2 a' : 'D' 
                     }

                      { 'key1 a' : 'value3',  
                       'key2 a' : 'E' 
                     }
                    ]
                  } 
```

如果没有怎么办。分裂的不确定？如果我能得到帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T14:35:12.897

您可以遍历字典的元素并根据值创建两个新字典。然后将列表中的相应字典替换为两个新字典：

```
def splitdict(orig):
    dict1 = {}
    dict2 = {}
    for key, value in orig.items():
        words = value.split(",")
        if len(words) == 2:
            dict1[key] = words[0]
            dict2[key] = words[1]
        else:
            dict1[key] = value
            dict2[key] = value
    return dict1, dict2

my_dicts["A"][0:1] = splitdict(my_dicts["A"][0]) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T12:10:01.113

我认为这个解决方案更健壮，因为它适用于两个键的任意数量的逗号分隔值。

```
def permutateMap(X):
    result = []
    for key, value in X.items():
        splitted = value.split(',')
        if len(splitted) > 1:
            for s in splitted:
                new_dict = X.copy()
                new_dict[key] = s.strip()
                result += [new_dict]
            return splitList(result)
    return [X]

def splitList(X):
    result = []
    for entry in X:
        result += permutateMap(entry)
    return result

my_dicts = {"A": [
            { 'key1 a' : 'value1, value2', 
              'key2 a' : 'A, B, C' }, 
            { 'key1 a' : 'value3',  
              'key2 a' : 'D, E' }]}

new_dict = {}
for key, value in my_dicts.items():
    new_dict[key] = splitList(value)

print new_dict 
```

顺便说一句，我认为将这些值存储为 tuples 而不是逗号分隔的字符串可能更合适/更方便`('A', 'B', 'C')`。您将不需要字符串操作（`split()`和`strip()`）。

# c# - 总是获取字符串未被识别为有效日期时间。如何转换为当前格式

> ID：15186367
> 
> 赞同：0
> 
> 时间：2013-03-03T13:52:30.787
> 
> 标签：c#, datetime, datetime-parsing

我想`dd-MM-yyyy`使用我也使用过 ajax 日历的文本框接受格式的日期。

```
DateTime.ParseExact(txtDate.Text,"dd-MM-yyyy",null) 
```

和

```
Convert.ToDateTime(txtDate.Text) 
```

都抛出异常：

> *字符串未被识别为有效日期时间。*

我知道我什么时候将我的系统日期格式更改为当前`MM-dd-yyyy`为`dd-MM-yyyy`，它会开始识别它，但是当我将它发布到服务器上时，解决方案是什么。

那么有什么解决方案可以将其解析为当前格式吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T14:01:28.453

您需要将 IFormatProvider 参数传递给 ParseExact 方法，例如：

```
CultureInfo provider = CultureInfo.GetCultureInfo("en-US")
DateTime.ParseExact(txtDate.Text,"dd-MM-yyyy",provider) 
```

并且不要忘记使用 System.Globalization 命名空间

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T14:19:58.390

您需要使用`System.Threading.Thread.CurrentThread.CurrentCulture`来获取用户的当前设置。然后使用它来获取格式化的日期字符串。

```
DateTime now = DateTime.Now;
string formattedToCurrentUser = now.ToString(System.Threading.Thread.CurrentThread.CurrentCulture); 
```

# xml - Error after importing a project into eclipse

> ID：15186369
> 
> 赞同：4
> 
> 时间：2013-03-03T13:52:32.777
> 
> 标签：xml, eclipse, hibernate

This is the warning that I have been getting.
**The file cannot be validated as the XML definition "[http://www.hibernate.org/dtd/hibernate-configuration-3.0.dtd](http://www.hibernate.org/dtd/hibernate-configuration-3.0.dtd)" that is specified as describing the syntax of the file cannot be located.**

The jars for hibernate are present. What am I missing?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T15:47:34.290

有时`eclipse`可能无法`DTD`加载`XML file`.

在这种情况下，您可以`download`手动设置它。

即使下面的链接指定为 log4j xml 文件。按照相同的过程`hibernate.cfg.xml`

[Eclipse：在 log4j.xml 中引用 log4j.dtd](https://stackoverflow.com/questions/5000884/eclipse-referencing-log4j-dtd-in-log4j-xml)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T13:57:03.753

当 Eclipse 无法检测到`.classpath`. 确保将它们添加到正确的项目`.classpath`中。

您可能希望刷新项目以使更改生效。

# mysql - how to select with group by order by and desc?

> ID：15186374
> 
> 赞同：1
> 
> 时间：2013-03-03T13:52:59.587
> 
> 标签：mysql, database, select

i want to select the data in a table such that it should group it by userid except one value in that column and order by date time and desc. The problem i am getting is the grouped items are not ordering by date and time and in desc manner. I mean the grouped item is showing earlier row. How can i do that. This is what i have done.

```
SELECT * FROM `tbljobs`
   GROUP BY user_id
   UNION ALL 
     SELECT * FROM tbljobs
     WHERE user_id = '1'
     ORDER BY date_time DESC
     LIMIT 20" 
```

where '1' is should not be grouped.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T14:16:04.350

您的 ORDER BY 仅在第二条语句上执行。您必须使用大括号对整个结果进行排序：

```
(SELECT *
FROM `tbljobs`
GROUP BY user_id)
UNION ALL 
(SELECT *
FROM tbljobs
WHERE user_id = '1')
ORDER BY date_time DESC 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T05:54:27.493

谢谢朋友们的建议。经过一番努力，我终于自己创建了解决方案。

```
(
 SELECT * 
 FROM (
       SELECT * 
       FROM tbljobs 
       ORDER BY date_time desc 
      ) AS A 
 WHERE user_id <> '1' group by user_id 
) 
UNION ALL 
(
 SELECT * 
 FROM tbljobs 
 WHERE user_id=1
) 
ORDER BY date_time DESC 
```

# c# - Multiple parameter in Row Filter

> ID：15186375
> 
> 赞同：6
> 
> 时间：2013-03-03T13:53:06.990
> 
> 标签：c#, winforms

I am trying to put a textbox as an Rowfilter under a textchanged event !

The code below is used to GRID to get the appropriate `Reg_Number` **or** `Customer_Name` which is entered in the text box!

wat's the surprising fact is, this code directly takes the 2nd Argument

(i.e)
`((DataTable)radGridView1.DataSource).DefaultView.RowFilter = "Reg_Number like '%" + radTextBoxControl1.Text + "%'";`

tried to switch the lines, but no matter what i did, it ignores the 1st one and takes the 2nd

i tried to put AND to get both in a single line, bt din't work, plz hel me frnzz!

```
private void radTextBoxControl1_TextChanged(object sender, EventArgs e)
{
    try
    {
        ((DataTable)radGridView1.DataSource).DefaultView.RowFilter =
            "Customer_Name like '%" + radTextBoxControl1.Text + "%'";
        ((DataTable)radGridView1.DataSource).DefaultView.RowFilter =
            "Reg_Number like '%" + radTextBoxControl1.Text + "%'";
    }
    catch (Exception) { }
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-03T13:58:51.667

这是因为第二个赋值替换了第一个

```
myDataTable.DefaultView.RowFilter = "firstFilter";
myDataTable.DefaultView.RowFilter = "secondFilter";
// Now RowFilter is "secondFilter" 
```

您必须将 2 个过滤器与逻辑 OR 组合，以获得满足两个条件的结果：

```
myDataTable.DefaultView.RowFilter = "firstFilter OR secondFilter"; 
```

* * *

```
var view = ((DataTable)radGridView1.DataSource).DefaultView;
string escapedText = radTextBoxControl1.Text.Replace("'", "''");
view.RowFilter = "Customer_Name LIKE '%" + escapedText + "%' OR " +
                    "Reg_Number LIKE '%" + escapedText + "%'"; 
```

它变得更加清晰`String.Format`：

```
view.RowFilter = String.Format("Customer_Name LIKE '%{0}%' OR Reg_Number LIKE '%{0}%'",
                               escapedText); 
```

或者，从 C# 7.0 开始，使用字符串插值：

```
view.RowFilter =
    $"Customer_Name LIKE '%{escapedText}%' OR Reg_Number LIKE '%{escapedText}%'"; 
```

另外，请确保用两个单引号替换单引号。这使 SQL 字符串能够包含引号并防止 SQL 注入：

```
SELECT * FROM myTable WHERE Name = 'Andy''s Pub'; 
```

* * *

您必须将这两个条件与 结合起来的原因`OR`是`AND`，用户将输入客户名称**或注册号****（**我们只有一个文本框）。

或者，您可以检查条目的格式是否类似于注册号并应用适当的过滤器。在伪代码中：

```
if (radTextBoxControl1.Text is formatted as reg_nr) {
    view.RowFilter = "Reg_Number LIKE '%" + escapedText + "%'";
} else {
    view.RowFilter = "Customer_Name LIKE '%" + escapedText + "%'";
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-03T13:56:16.343

这应该有效：

```
((DataTable)radGridView1.DataSource).DefaultView.RowFilter =
    "Customer_Name like '%" + radTextBoxControl1.Text + "%' AND Reg_Number like '%" + radTextBoxControl1.Text + "%'"; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-03T14:01:09.520

我认为您需要 OR 操作而不是 AND`"Customer_Name like '%" + radTextBoxControl1.Text + "%' OR Reg_Number like '%" + radTextBoxControl1.Text + "%'";`

# javascript - Can I use addClass on information stored in an HTML string?

> ID：15186377
> 
> 赞同：2
> 
> 时间：2013-03-03T13:53:19.597
> 
> 标签：javascript, jquery

I have a string that for example looks like this.

```
var html = '<div class="templatemo_post_text grid-85">
<div id="wmd-preview"><h2>Skriv något!</h2>
<p>Lorem ipsum</p></div>
<div class="templatemo_post_footer">
<div class="templatemo_post_on">
<span class="orange">Skrivet den</span> 3 Mar 2013</div>
<div class="templatemo_post_comment">
<a href="#">Inlägg nummer </a>
</div></div></div>'; 
```

Can I use the .addClass() in some way to add a class to the id=wmd-preview?
Actually my question goes for all javascripting to modify existing variables. One other thing I would like to do is to replace the whole tag with a new one.

Thanks.

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-03T13:57:02.847

您可以将该 HTML 转换为 DOM 元素：

```
var element = $(html); 
```

然后选择你想要的div：

```
var div = element.find('#wmd-preview'); 
```

然后添加类：

```
div.addClass('new-class'); 
```

**编辑**

要将修改后的 DOM 元素转换回 HTML 字符串，可以使用[jQuery 的 html 函数](http://api.jquery.com/html/#html1)：

```
html = element.html(); 
```

请注意，这给出了元素的内部 HTML，因此缺少封闭的 div。您可以通过将其添加到另一个 div 来解决此问题。

```
html = $('<div></div>').append(element).html(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T20:02:21.580

感谢您的评论，但它并没有解决我的问题，原因是我输入错误。我是通过使用 innerHTML 来获取 html 的，但它不适用于解决方案。

我将我的代码留给任何需要它的人。该代码是获取我的 DIV 的一种方式，当 ajax 成功时，它将更改并删除 id wmd-preview。

```
mydiv = document.createElement('div')
mydiv.className = 'templatemo_post_area addbottom grid-parent';
mydiv.innerHTML = document.getElementById('preview').innerHTML;
$.ajax({
    type: "POST",
    dataType: 'json',
    url: "/pages/posts_ajax.php",
    data: {
        data : text,
        time : timepost
    },
    success: function(response) {
        $(mydiv).find('#wmd-preview').removeAttr('id');
        $(mydiv).find('#postnr').text('Inlägg nummer '+response.id);
        $(mydiv).insertAfter('div#post_area');
    }
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-03T13:59:17.660

这是你想要做的

```
var html = '<div class="templatemo_post_text grid-85"><div id="wmd-preview"><h2>Skriv något!</h2><p>Lorem ipsum</p></div><div class="templatemo_post_footer"><div class="templatemo_post_on"><span class="orange">Skrivet den</span> 3 Mar 2013</div><div class="templatemo_post_comment"><a href="#">Inlägg nummer </a></div></div></div>';

$(html).find('.orange').addClass('someclass') 
```

# ios - UIWebView scrollsToTop and ignores UIEdgeInsets in iOS

> ID：15186383
> 
> 赞同：2
> 
> 时间：2013-03-03T13:54:15.067
> 
> 标签：ios, xcode, cocoa, uiwebview, uiscrollview

I basically have a Title bar with a UIWebView behind it. I have set the UIEdgeInsets of the UIWebView.scrollView to be such that the top of the Web page is at the bottom of the Title bar. Everything works as I expect except when the web page loads it moves the top of the UIWebView and ignores the UIEdgeInsets.

The behavior is particularly strange because while a web page is loading, parts of the web page are shown and are in the correct position (with the top of the web page just below the Title bar as it should be because of the UIEdgeInsets). However, once the web page completes loading it suddenly jumps up to the top of the UIWebView and ignores the UIEdgeInsets.

The workaround I am currently using is to set the contentOffset to the correct position immediately after the page loads, but this is not ideal because you can see it jumping to the top of the UIWebView then jumping back down to the bottom of the Title bar.

Does anyone know if there is something I can do to stop it jumping to the top of the UIWebView, either by forcing it to ignore the message to scroll to CGPointZero, or by setting the 'Start Position' to be the at the bottom of the title bar (please note, I have tried setting the origin to this point and it did not resolve the issue)?

Any help would be much appreciated.

Thanks

# c++ - c++错误：在静态成员函数中无效使用成员'calls_object::OBJECT'

> ID：15186384
> 
> 赞同：0
> 
> 时间：2013-03-03T13:54:22.290
> 
> 标签：c++, windows, multithreading, function, static

我从下面的代码中得到以下错误。

`error: invalid use of member 'calls_object::OBJECT' in static member function|` `error: from this location`

从第`OBJECT->call();`29 行开始。

基本上该函数必须是静态的，因为它实际上是创建 Windows 线程的代码的简化版本。我似乎无法在静态函数中使用指针，但我可以在静态函数中创建对象没问题。还有其他方法吗？

```
CreateThread(NULL, 0, (LPTHREAD_START_ROUTINE)windowsthread, (LPVOID)i, NULL, &m_id);

static DWORD_PTR WINAPI windowsthread()
{
    OBJECT->call();
} 
```

l

```
class object
{
        private:

        public:

        object(){}
        ~object(){}
        void call(){}
};
class calls_object
{
    private:

        object* OBJECT;

    public:

    calls_object()
    {
        OBJECT = new object();
    }
    ~calls_object(){}

    #ifdef _WIN32
    static void windows_function()
    {
        OBJECT->call();
    }
    #endif
};
int main()
{
    calls_object O;

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-03T13:56:09.567

这个功能：

```
static void windows_function()
{
    OBJECT->call();
} 
```

被声明为`static`。这意味着它不会接收隐式指针：*换句话说*`this`，它不会对. 因此，它看不到成员变量。*`calls_object``OBJECT`*

 *要么将函数声明为非静态函数，要么声明`OBJECT`为`static`成员变量（在您的应用程序中更有意义）。

> 基本上该函数必须是静态的，因为它实际上是创建 Windows 线程的代码的简化版本

由于您（不幸地）正在处理一个`CreateThread`接受函数指针的函数 ( )，因此您甚至不能使用`std::bind`. 但是，`CreateThread`让您提供一个接受指针的函数（指向`void`，请参阅 的原型[`ThreadProc`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms686736%28v=vs.85%29.aspx)）。

只需将指向 an 的指针`object`作为第四个参数传递给`CreateThread`，然后让`windowsFunction(void*)`接收该指针。在内部`windowsFunction()`，它仍然是`static`或全局的（实际上，您根本不需要`calls_object`该类），您可以将该指针转换为指向`object`并调用`call()`它的指针。

* * *

另请注意，您的类`calls_object`正在泄漏内存，因为您忘记了在的构造函数`delete`中创建的指针：`calls_object`

```
~calls_object() 
{ 
    delete object; // DON'T FORGET THIS!
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-03T13:56:11.057

`windows_function`是静态成员函数，因此不与任何`calls_object`对象关联。`OBJECT`是非`static`数据成员，因此与`calls_object`对象相关联。您不能`static`从数据成员访问非数据成员。

只需将功能设为非`static`，它就会起作用。

这样想吧。如果您甚至没有创建类型的对象`calls_object`并且您的`main`函数只是：

```
int main()
{
  calls_object::windows_function();
} 
```

你希望这个函数从哪里得到`OBJECT`？由于`OBJECT`是非`static`成员，它仅作为`calls_object`对象的一部分存在。`static`成员函数不能简单地从无处拉取`OBJECT`。*

# php - FFMPEG 命令在 PHP 中不起作用。（与 MAMP 不兼容）

> ID：15186390
> 
> 赞同：1
> 
> 时间：2013-03-03T13:54:51.103
> 
> 标签：php, macos, ffmpeg, mamp, php-extension

当谈到 PHP 时，我有点初学者，我正在尝试创建一个简单的（ish）系统，在其中输入文件，然后转换为各种分辨率的 html5 视频。

我已经整理出如何处理多个文件上传等，但现在我遇到了问题。

我似乎无法让 exec 在 PHP 中执行 FFMPEG。

例如，如果我在命令行（Mac OSX 10.8 上的终端）中键入它，它会正确转换视频：

```
ffmpeg -i /Users/charlieryan/Desktop/MOV01785.MPG websample.mov 
```

这会正确地将转换后的视频文件输出到我的主目录中。

但是，如果我在 PHP 中运行它，如下所示：

```
exec('ffmpeg -i /Users/charlieryan/Desktop/MOV01785.MPG websample.mov'); 
```

绝对没有任何反应……我的统计监视器没有记录处理器使用的任何变化，而且我在系统上的任何地方都找不到输出文件。

由于我在这方面有点菜鸟，我假设我做错了什么，但它是什么？

谢谢，

查理

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-03T20:05:29.900

在[birgire](https://stackoverflow.com/users/2078474/birgire)的大量帮助和大量摆弄之后，我已经对其进行了排序。

此问题来自与 MAMP 沙箱的不兼容。可以通过以下方式解决：

转到终端并输入：

```
sudo nano /Applications/MAMP/Library/bin/envvars 
```

然后用井号 (#) 注释掉以下行

```
# DYLD_LIBRARY_PATH="/Applications/MAMP/Library/lib:$DYLD_LIBRARY_PATH"
# export DYLD_LIBRARY_PATH 
```

然后将以下行添加到文件中

```
export PATH="$PATH:/opt/local/bin" 
```

然后，返回 MAMP 并重新启动服务器，导航回页面，一切顺利。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-03T14:20:17.903

您应该首先尝试查看是否`exec()`允许：

```
<?php echo exec('echo "exec() is working"');?> 
```

如果它有效，你应该得到

```
exec() is working 
```

如果它有效，你应该尝试

```
exec('/full/path/to/ffmpeg -i /Users/charlieryan/Desktop/MOV01785.MPG websample.mov'); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-12-04T14:42:57.947

我有同样的问题，如果你使用 MAMP，问题是因为 mamp 的 php 找不到正确的库，我不知道为什么！，所以..这里是诀窍。- 您应该使用系统的 php 来执行将调用 ffmpeg 的 php

**在您的 php 代码中（例如：lib.php | index.php）：**

```
function callToSysPHP ($videoName) {
    // $cmd = '/path to php/php <your php script> args';
    // In my case 
    $cmd = '/usr/bin/php myffmpeg.php ' . $videoName; 
    shell_exec($cmd);
} 
```

**在 myffmpeg.php 中：**

```
 $videoName = $argv[1];
 //$cmd = 'path to your ffmpeg/your ffmpeg command';
 // In my case my ffmpeg cmd looks like
 $cmd =  '/usr/sbin/' . 'ffmpeg -f image2 -framerate 25 -i ./files/pngs/%1d.png -vf scale=480:640 -vcodec libx264 -refs 16 -preset ultrafast ./files/pngs/'. $videoName .'.mp4 2>&1';
 echo '<pre>'; print_r(shell_exec($cmd)); echo '</pre>'; 
```

基本上从你的mamp php，调用一个系统php来执行一个php文件，它通过shell_exec()调用一个ffmpeg；

我希望这可以帮助你。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-03T14:15:39.467

你在windows机器上安装了ffmpeg吗？如果您在没有 php 的情况下从命令行运行相同的命令会发生什么，它有效吗？如果没有，它与 PHP 没有任何关系。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-03-15T21:40:04.243

如果“ **/usr/local/bin/** ”是您可以找到 ffmepg 可执行文件的目录，请尝试以下操作：

```
<?php
$cmd = 'PATH="/usr/local/bin/"; ffmpeg -i /your/file/destination/batman.mp4 2>&1';
echo "<pre>".shell_exec($cmd)."</pre>";
?> 
```

# php - PHP 表单发布到 MySQL 错误

> ID：15186391
> 
> 赞同：0
> 
> 时间：2013-03-03T13:54:55.640
> 
> 标签：php, html, mysql, database, forms

我正在创建一个 php-post 表单，其中包含：Who、What、Where、Contact 和 date_created。我用这些行创建了一个数据库。![在此处输入图像描述](../Images/5dd28c79ebf214e2b821f0046b095280.png)

这是我的 HTML 表单代码：

```
<form id="contactform" action="post.php"> 
            <p class="contact"><label for="who">Who</label></p> 
            <input id="who" name="who" placeholder="Who are you? (First & Second name)" required="" tabindex="1" type="text"> 

            <p class="contact"><label for="email">What</label></p> 
            <input id="what" name="what" placeholder="What do you want?" required="" type="text"> 

            <p class="contact"><label for="username">Where</label></p> 
            <input id="where" name="where" placeholder="Country, City, Street..." required="" tabindex="2" type="text"> 

            <p class="contact"><label for="password">Contact</label></p> 
            <input type="text" id="contact" name="contact" placeholder="Phone number or email"required=""> 

                <br><br>

        <input class="buttom" name="submit" id="submit" tabindex="5" value="Submit" type="submit"> 
```

这是 php post.php 代码：

```
<?php
    // Grab our POSTed form values
    // Note that whatever is enclosed by $_POST[""] matches the form input elements
    $who = $_POST["who"];
    $what = $_POST["what"];
    $where = $_POST["where"];
    $contact = $_POST["contact"];

    // Connect to our DB with mysql_connect(<server>, <username>, <password>)
    $sql_connection = mysql_connect("server_name", "admin", "password");

    mysql_select_db("database_name", $sql_connection);

    $sql = "INSERT INTO content (
                who,
                what,
                where,
                contact,
                date_created
            )
            VALUES (
                '$who',
                '$what',
                '$where',
                '$contact',
                NOW()
            )";

    mysql_query($sql, $sql_connection);

    mysql_close($sql_connection);
?> 
```

当我尝试发布某些内容时，什么也没有发生。屏幕只是白色，数据库是空的，url是这样的：

[http://my-website.com/post.php?who=Firstname+Secondname&what=Some+sentences+here-and&where=America&contact=some@website.com&submit=Submit%21](http://my-website.com/post.php?who=Firstname+Secondname&what=Some+sentences+here-and&where=America&contact=some@website.com&submit=Submit%21)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-03T15:50:31.100

你为什么不试试这个来得到一个错误或出错的线索，把你的代码放在 try 和 catch 块中：

```
 try {

         // your code

    } catch ( Exception $e ) {

         echo $e->getMessage();

    } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-03T14:13:43.093

正如 HamZa DzCyber​​DeV 所说，您没有指定在`<form>`标签中使用哪种方法。

对于您在数据库中发布某些内容的情况，就像您现在一样 -`method="post"`在搜索某些内容时使用 和 对于表单，请使用`method="get"`. 如果使用 post 方法，您的 URL 将仅更改为 my-website.com/post.php，如果使用 get 方法，您的 URL 将更改为 my-website.com/post.php?... （你得到的东西要去哪里） - 提交后你是如何获得 URL 的。

屏幕只是白色的，因为 post.php（单击提交按钮后您要去的地方）不包含任何要发送到输出的内容，您可以轻松地使用`echo`.

例如，您可以创建一个新的 html 页面，该页面将使用 echo 记录下来：

```
echo '
<html
<body>
This is my website!
</body>
</html>

'; 
```

此外，您可以使用`include()`已经形成 HTML 的 php 脚本，或者您可以在此处查看其他一些重定向方法： http: [//php.about.com/od/learnphp/ht/phpredirection.htm](http://php.about.com/od/learnphp/ht/phpredirection.htm)

请记住，PHP 是服务器正在处理的语言，只有 HTML 标签（带有 CSS 和 JS）被发送到其他浏览器以供阅读。

有关 POST 和 GET 方法的更多信息，您可以在此处阅读：

[http://php.net/manual/en/reserved.variables.post.php](http://php.net/manual/en/reserved.variables.post.php)

[http://php.net/manual/en/reserved.variables.get.php](http://php.net/manual/en/reserved.variables.get.php)

# c++ - C++ - 推送到指向非 POD 的指针的优先级队列导致段错误？

> ID：15186393
> 
> 赞同：0
> 
> 时间：2013-03-03T13:55:00.200
> 
> 标签：c++, segmentation-fault, priority-queue, a-star

我正在尝试实现一个利用 A* 算法的 4x4 滑块拼图求解器。尽管试图以尽可能简洁的方式编写代码，但代码中出现了一个段错误，它指向将指针推送到`std::priority_queue`实例的尝试失败。这是我的调试尝试后的完整代码，我不知道如何将其切割成一个工作测试用例：

```
#include <iostream>
#include <iomanip>

#include <cstring>
#include <cmath>

#include <vector>
#include <set>
#include <queue>

#include <functional>

#include <ctime>
#include <cstdlib>

using namespace std;

const char GOAL_STATE[] = {1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,0};

class Puzzle
{
protected:
    char puzzle[16];

    int index(char searched) const
    {
        for(int i=0; i<16; i++)
        {
            if (puzzle[i]==searched)
                return i;
        }
        return -1;
    }

public:

    Puzzle(const char init[16] = NULL)
    {
        if(init!=NULL)
        {
            memcpy(puzzle, init, sizeof(char)*16);
        }
        else
        {
            memcpy(puzzle, GOAL_STATE, sizeof(char)*16);
        }
    }

    void show() const
    {
        for(int i=0; i<4; i++)
        {
            for(int j=0; j<4; j++)
            {
                cout << setw(3) << (int)puzzle[i*4+j] << " ";
            }
            cout << endl;
        }
    }

    bool move(int m_pos)
    {
        int b_pos = index(0);
        int b_x = b_pos / 4;
        int b_y = b_pos % 4;
        int x = m_pos / 4;
        int y = m_pos % 4;
        if (m_pos < 16 && (
                    (x == b_x && (y == b_y + 1 || y == b_y - 1)) ||
                    (y == b_y && (x == b_x + 1 || x == b_x - 1))
                )
            )
        {
            char tmp = puzzle[m_pos];
            puzzle[m_pos] = puzzle[b_pos];
            puzzle[b_pos] = tmp;
            return true;
        }
        else
            return false;
    }

    int count_correct() const
    {
        int ret = 0;
        for(int i=0; i<16; i++)
            if ((i<15 && (puzzle[i])==i+1) || (i==15 && puzzle[i]==0))
                ret++;
        return ret;
    }

    vector<int> possible_moves() const
    {
        vector<int> ret;
        int b_pos = index(0);
        int b_x = b_pos / 4;
        int b_y = b_pos % 4;
        ret.push_back(b_y * 4 + b_x - 1);
        ret.push_back((b_y - 1) * 4 + b_x);
        if (b_x<3)
            ret.push_back(b_y * 4 + b_x + 1);
        if (b_y<3)
            ret.push_back((b_y + 1) * 4 + b_x);
        return ret;
    }

};

class AStarPuzzle : public Puzzle
{
    int H;
    int f;

public:

    int tried;

    AStarPuzzle* previous;

    AStarPuzzle(const char init[16] = NULL,
            int _f = 0, int _tried = 0, AStarPuzzle* _previous = NULL) : Puzzle(init)
    {
        f = _f;
        tried = _tried;
        previous = _previous;
    }

    AStarPuzzle (const AStarPuzzle& old) : Puzzle(old.puzzle)
    {
        f = old.f;
        tried = old.tried;
        previous = old.previous;
    }

    double heur() const
    {
        double ret = 0.0;
        for (int goalIndex = 0 ; goalIndex<16; goalIndex++)
        {
            int tileIndex = index( GOAL_STATE[goalIndex] );
            ret += abs((double)((goalIndex % 4) - (tileIndex % 4)));
            ret += abs(floor(goalIndex / 4.0) - floor(tileIndex / 4.0));

        }

        return 0.1*f + max(ret, (double)count_correct());
    }

    bool operator<(const AStarPuzzle& other) const
    {
        return heur()>other.heur();
    }

    int get_f()
    {
        return f;
    }

    void increase_f()
    {
        f++;
    }

    AStarPuzzle operator=(const AStarPuzzle& rhs)
    {
        cout << "STUB: AStarPuzzle::operator=" << endl;
    }

    ~AStarPuzzle()
    {
        cout << "STUB: AStarPuzzle::~AStarPuzzle" << endl;
    }

    void operator delete(void *p)
    {
        cout << "Attempting to delete AStarPuzzle?" << endl;
    }

};

struct CompareHeuristics : public std::binary_function<AStarPuzzle*, AStarPuzzle*, bool >
{
    bool operator()(AStarPuzzle* lhs, AStarPuzzle* rhs) const
    {
        return lhs->heur() > rhs->heur();
    }
};

vector<int> retracePath(AStarPuzzle* c)
{
    vector<int> ret;
    while (c->previous!=NULL)
    {
        c = c->previous;
        ret.push_back(c->tried);
    }
    return ret;
}

vector<int> aStar(AStarPuzzle* current)
{
    set<AStarPuzzle*> openList;
    set<AStarPuzzle*> closedList;
    std::priority_queue<AStarPuzzle*, std::vector<AStarPuzzle*>, CompareHeuristics> openHeap;

    int max_corr = 0;
    int min_step = 0;

    openList.insert(current);
    openHeap.push(current);
    while (openList.size()!=0)
    {
        current = openHeap.top();
        cout << "An iteration. heur()==" << current->heur()  << endl;
        current->show();
        openHeap.top();
        if (current->count_correct() == 16)
        {
            //return vector<int>();
            return retracePath(current);
        }
        openList.erase(current);
        closedList.insert(current);
        vector<int> directions = current->possible_moves();
        for(unsigned int i=0; i<directions.size(); i++)
        {
            AStarPuzzle* tile = new AStarPuzzle(*current);
            tile->move(directions[i]);
            tile->increase_f();

            if (closedList.count(tile)==0)
            {
                int corr = tile->count_correct();
                int f = tile->get_f();
                if (corr > max_corr or (corr == max_corr && f < min_step))
                {
                    max_corr = corr;
                    min_step = f;
                    cout << corr << "," << f << endl;
                }
                tile->previous = current;
                if (openList.count(tile)==0)
                {
                    openList.insert(tile);
                    openHeap.push(tile);
                }
            }

        }
    }

    return vector<int>();
}

int main(int argc, char **argv) {

    char shuffled[16];
    memcpy(shuffled, GOAL_STATE, sizeof(char)*16);
    srand(time(0));
    for (int i=0; i<16; i++) {
        int r = i + (rand() % (16-i));
        char temp = shuffled[i];
        shuffled[i] = shuffled[r];
        shuffled[r] = temp;
    }

    shuffled = {0, 3, 7, 5, 9, 12 , 13 , 11, 8, 6 , 14, 4 , 15, 2 , 10 , 1 };

    AStarPuzzle* p = new AStarPuzzle(shuffled);
    p->show();
    aStar(p);

    return 0;
} 
```

和 gdb 输出：

```
> gdb ./si-proj2cpp
GNU gdb (GDB) 7.0.1-debian
Copyright (C) 2009 Free Software Foundation, Inc.
License GPLv3+: GNU GPL version 3 or later <http://gnu.org/licenses/gpl.html>
This is free software: you are free to change and redistribute it.
There is NO WARRANTY, to the extent permitted by law.  Type "show copying"
and "show warranty" for details.
This GDB was configured as "i486-linux-gnu".
For bug reporting instructions, please see:
<http://www.gnu.org/software/gdb/bugs/>...
Reading symbols from /home/d33tah/workspace/si-proj2cpp/Debug/si-proj2cpp...done.
(gdb) r
Starting program: /home/d33tah/workspace/si-proj2cpp/Debug/si-proj2cpp
  0   3   7   5
  9  12  13  11
  8   6  14   4
 15   2  10   1
An iteration. heur()==44
  0   3   7   5
  9  12  13  11
  8   6  14   4
 15   2  10   1
An iteration. heur()==44
  0   3   7   5
  9  12  13  11
  8   6  14   4
 15   2  10   1
An iteration. heur()==44
  0   3   7   5
  9  12  13  11
  8   6  14   4
 15   2  10   1
An iteration. heur()==44
  0   3   7   5
  9  12  13  11
  8   6  14   4
 15   2  10   1

Program received signal SIGSEGV, Segmentation fault.
0xb7dab5fc in _int_free (av=<value optimized out>, p=0x80502b0) at malloc.c:4957
4957    malloc.c: No such file or directory.
        in malloc.c
Current language:  auto
The current source language is "auto; currently c".
(gdb) bt
#0  0xb7dab5fc in _int_free (av=<value optimized out>, p=0x80502b0) at malloc.c:4957
#1  0xb7dae8ad in *__GI___libc_free (mem=0x80502b8) at malloc.c:3739
#2  0xb7f86701 in operator delete(void*) () from /usr/lib/libstdc++.so.6
#3  0x0804b97b in __gnu_cxx::new_allocator<AStarPuzzle*>::deallocate (this=0xbffff564, __p=0x80502b8) at /usr/include/c++/4.4/ext/new_allocator.h:95
#4  0x0804ab4b in std::_Vector_base<AStarPuzzle*, std::allocator<AStarPuzzle*> >::_M_deallocate (this=0xbffff564, __p=0x80502b8, __n=16)
    at /usr/include/c++/4.4/bits/stl_vector.h:146
#5  0x0804b2a9 in std::vector<AStarPuzzle*, std::allocator<AStarPuzzle*> >::_M_insert_aux (this=0xbffff564, __position=..., __x=@0xbffff554)
    at /usr/include/c++/4.4/bits/vector.tcc:361
#6  0x0804a5cf in std::vector<AStarPuzzle*, std::allocator<AStarPuzzle*> >::push_back (this=0xbffff564, __x=@0xbffff554) at /usr/include/c++/4.4/bits/stl_vector.h:741
#7  0x08049bbb in std::priority_queue<AStarPuzzle*, std::vector<AStarPuzzle*, std::allocator<AStarPuzzle*> >, CompareHeuristics>::push (this=0xbffff564, __x=@0xbffff554)
    at /usr/include/c++/4.4/bits/stl_queue.h:511
#8  0x08049054 in aStar (current=0x8050008) at ../main.cpp:248
#9  0x08049273 in main (argc=1, argv=0xbffff704) at ../main.cpp:275 
```

正如有人建议的那样，我使用 valgrind 来看看会发生什么：

```
> valgrind ./si-proj2cpp
==26655== Memcheck, a memory error detector
==26655== Copyright (C) 2002-2010, and GNU GPL'd, by Julian Seward et al.
==26655== Using Valgrind-3.6.0.SVN-Debian and LibVEX; rerun with -h for copyright info
==26655== Command: ./si-proj2cpp
==26655==
  0   3   7   5
  9  12  13  11
  8   6  14   4
 15   2  10   1
An iteration. heur()==44
  0   3   7   5
  9  12  13  11
  8   6  14   4
 15   2  10   1
==26655== Invalid read of size 1
==26655==    at 0x804950E: Puzzle::move(int) (main.cpp:74)
==26655==    by 0x8048F3A: aStar(AStarPuzzle*) (main.cpp:231)
==26655==    by 0x8049272: main (main.cpp:275)
==26655==  Address 0x42ca1ef is 1 bytes before a block of size 32 alloc'd
==26655==    at 0x402471C: operator new(unsigned int) (vg_replace_malloc.c:255)
==26655==    by 0x8048EF6: aStar(AStarPuzzle*) (main.cpp:230)
==26655==    by 0x8049272: main (main.cpp:275)
==26655==
==26655== Invalid write of size 1
==26655==    at 0x8049525: Puzzle::move(int) (main.cpp:75)
==26655==    by 0x8048F3A: aStar(AStarPuzzle*) (main.cpp:231)
==26655==    by 0x8049272: main (main.cpp:275)
==26655==  Address 0x42ca1ef is 1 bytes before a block of size 32 alloc'd
==26655==    at 0x402471C: operator new(unsigned int) (vg_replace_malloc.c:255)
==26655==    by 0x8048EF6: aStar(AStarPuzzle*) (main.cpp:230)
==26655==    by 0x8049272: main (main.cpp:275)
==26655==
An iteration. heur()==44
  0   3   7   5
  9  12  13  11
  8   6  14   4
 15   2  10   1
An iteration. heur()==44
  0   3   7   5
  9  12  13  11
  8   6  14   4
 15   2  10   1
(...looks like an infinite loop, so I'm stopping the program with ctr+c)
  0   3   7   5
  9  12  13  11
  8   6  14   4
 15   2  10   1
^CAn iteration. heur()==44
==26655==
==26655== HEAP SUMMARY:
==26655==     in use at exit: 17,076 bytes in 579 blocks
==26655==   total heap usage: 805 allocs, 226 frees, 21,156 bytes allocated
==26655==
==26655== LEAK SUMMARY:
==26655==    definitely lost: 0 bytes in 0 blocks
==26655==    indirectly lost: 0 bytes in 0 blocks
==26655==      possibly lost: 0 bytes in 0 blocks
==26655==    still reachable: 17,076 bytes in 579 blocks
==26655==         suppressed: 0 bytes in 0 blocks
==26655== Rerun with --leak-check=full to see details of leaked memory
==26655==
==26655== For counts of detected and suppressed errors, rerun with: -v
==26655== ERROR SUMMARY: 288 errors from 2 contexts (suppressed: 19 from 8) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T14:10:13.620

您忘记在`AStarPuzzle::operator=`. 然后，[Ideone 不会报告 segfault](http://ideone.com/B82bVm)，而是超时。也许你应该在更进一步之前更正无限循环......另外，你正在使用`int`in `Puzzle::move`for `m_pos`，并且你没有检查负值。改为使用`unsigned int`。

编辑：在 Visual C++ 2010 上测试，没有段错误，无限循环。您应该检查您是否使用了正确的运行时。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-03T14:20:54.740

你在这里做有符号的 int 算术

```
vector<int> possible_moves() const
{
    vector<int> ret;
    int b_pos = index(0);
    int b_x = b_pos / 4;
    int b_y = b_pos % 4;
    ret.push_back(b_y * 4 + b_x - 1);
    ret.push_back((b_y - 1) * 4 + b_x);
    if (b_x<3)
        ret.push_back(b_y * 4 + b_x + 1);
    if (b_y<3)
        ret.push_back((b_y + 1) * 4 + b_x);
    return ret;
} 
```

然后你用它作为地址：

```
 vector<int> directions = current->possible_moves();
    for(unsigned int i=0; i<directions.size(); i++)
    {
        AStarPuzzle* tile = new AStarPuzzle(*current);
        tile->move(directions[i]);    // <<------ here, line 231
        tile->increase_f(); 
```

用 s替换您的`int`索引，`unsigned int`根据编译器的要求更改代码，然后看看会发生什么。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-03T14:23:03.473

这个问题实际上与内存无关，它是 - 正如@Synxis 指出的那样 - 负 m_pos 被传递给 Puzzle::move。发生这种情况的原因是 possible_moves() 没有考虑 0 块位于 (0,0) 中的情况 - 修复 possible_moves 有所帮助。另一个错误与 x 和 y 相反，并且 openHeap.top() 被调用两次而不是 openHeap.top()、openHeap.pop()。

# c# - 更改表 SqlCommand

> ID：15186394
> 
> 赞同：2
> 
> 时间：2013-03-03T13:55:11.620
> 
> 标签：c#, sql

我正在尝试使用带有参数的 SqlCommand 更改表中某一列的数据类型，但它不起作用。这是我的代码：

```
 Dictionary<string,string> dict = new Dictionary<string,string>();
    dict.Add("@TableName",TableColumnArray[0].ToString( ));
    dict.Add("@ColumnName",TableColumnArray[1].ToString( ));
    DBSql.ExecSQLStatement( "ALTER TABLE @TableName ALTER COLUMN @ColumnName varchar(MAX)",dict,connectionStringName);

    public static void ExecSQLStatement (string strsql,Dictionary<string,string> dict,string  connectionStringName)
    {
        SqlConnection con = CreateSqlConnectionStr(connectionStringName);
        SqlCommand cmd = new SqlCommand(strsql,con);
        foreach(string dictKey in dict.Keys)
        {
            cmd.Parameters.Add(new SqlParameter(dictKey,dict[dictKey]));
        }
        con.Open( );
        cmd.ExecuteNonQuery( );
        con.Close( );
    } 
```

但是代码不断抛出错误：“@TableName 附近的语法不正确”。我找不到这个问题的解决方案。我可以尝试使用存储过程，但我真的很想知道为什么代码不起作用。我通常将 SqlCommand 与参数一起用于 select、insert 语句，但它似乎不适用于 alter 语句？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-03T13:58:37.680

因为默认情况下， tableName 和列名**不能 PARAMETERIZED**。避免 sql 注入的一种方法是创建一个用户定义函数来检查 tableName 是否有效。然后连接字符串上的名称。例如，

这是UDF

```
private bool IsValidColumnNameOrTableName(string tablecolumnName)
{
    // other codes
    return returnValue;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-03T13:59:08.883

您不能在 DDL 语句中使用参数。您应该动态创建语句字符串：

```
DBSql.ExecSQLStatement(
    "ALTER TABLE " + TableColumnArray[0] + " ALTER COLUMN " + TableColumnArray[1] + " varchar(MAX)",
    dict,connectionStringName); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-03T13:59:14.137

您需要准确指定表名和列名：

```
"ALTER TABLE " + TableColumnArray[0].ToString( ) + " ALTER COLUMN " + TableColumnArray[1].ToString( ) + "varchar(MAX)" 
```

sql server 不允许表名和列名是变量值的语法

# c# - 特殊字符的正则表达式？

> ID：15186407
> 
> 赞同：1
> 
> 时间：2013-03-03T13:56:29.777
> 
> 标签：c#, regex

```
string Val = Regex.Replace(TextBox1.Text, @"[^a-z, A-z, 0-9]", string.Empty); 
```

**此表达式与字符^**和**_**不匹配。我应该怎么做才能匹配这些值？

还有一件事是，如果**TextBox1.Text**字符串值大于 10，则最后一个字符串值（第 11 个字符串值）应该匹配。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-03T14:02:28.890

请注意，^ 括在方括号中时具有特殊含义。这意味着匹配除字符类中指定的所有内容之外的所有内容，基本上是`'[]'`.

如果要匹配`"^"`and `"_"`，请将插入符号放在左`(^)`括号之后的另一个位置，如下所示，使用重复来限制字符长度：

```
[\W_] 
```

这将确保整个字符串中的字符为 10。

或者你使用 slash 转义它`"\^"`。

```
string Val = Regex.Replace(TextBox1.Text, @"[\W_]", string.Empty); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-03T15:06:58.867

你的问题是`A-z`。

这将匹配所有 ASCII 字母`A`，*然后是位于和之间的字符**（**其中包含**和**）*`Z`，然后是和之间的所有 ASCII 字母。这意味着并且不会与您的正则表达式匹配（以及您在正则表达式中包含的逗号和空格）。*`Z``a``^``_`*`a``z``^``_`

为了澄清，您的正则表达式也可以写成

```
[^a-zA-Z0-9\[\\\]^_` ,] 
```

你可能想要

```
string Val = Regex.Replace(TextBox1.Text, @"[^a-zA-Z0-9]", string.Empty); 
```

# asp.net - 如何在 ASP.NET 目录中添加所有文件，当我单击该文件应下载的链接时？

> ID：15186410
> 
> 赞同：0
> 
> 时间：2013-03-03T13:56:54.157
> 
> 标签：asp.net, vb.net, html

我想显示 ASP.NET 目录中的所有文件。当我单击可用文件列表时，它应该下载到本地还是应该打开查看？

如何做到这一点？我得到了目录中的所有文件，但我不知道要下载这些文件吗？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T14:15:33.570

为了使文件可下载，您必须为每个文件添加一个 href

例如

```
 foreach(string fileName in Dir)
{

   Response.Write("<a href='"+fileName+"'>file name...</a>");
} 
```

或者你必须以这种方式强制下载

public static void ForceDownload(this HttpResponse Response, string virtualPath, string fileName)

{ 响应。清除（）；

```
Response.AddHeader("content-disposition", "attachment; filename=" + fileName);

Response.WriteFile(virtualPath);

Response.ContentType = "";

Response.End(); 
```

}

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T14:17:16.537

一种方法是在 IIS中[启用目录浏览。](http://technet.microsoft.com/en-us/library/cc731109%28v=ws.10%29.aspx)

无论出于何种原因，目录浏览也会显示该`web.config`目录的文件。以下链接讨论了如何不显示它：[http ://forums.iis.net/t/1149484.aspx/1](http://forums.iis.net/t/1149484.aspx/1)

# c++ - 如何实现 OCaml 和 C++ 之间的互操作？

> ID：15186414
> 
> 赞同：12
> 
> 时间：2013-03-03T13:57:10.243
> 
> 标签：c++, interop, ocaml

我想在 OCaml 和 C++ 之间架起一座桥梁。例如，我想在 C++ 中使用一些用 OCaml 编写的结构。

我怎样才能做到这一点？是否有任何库，绑定？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-03-03T14:34:31.353

您应该阅读语言手册的相关部分：[Interfacing C with OCaml](http://caml.inria.fr/pub/docs/manual-ocaml/intfc.html)。即使从本质上讲，它是非常详细的，也是非常低级的。

如果您不需要C++ 和 OCaml 代码之间的*紧密*通信（例如，您接口 GUI 代码和计算代码，但应用程序的计算密集型内核不会跨越应用程序边界，或者至少预计通信成本可以忽略不计与花费在任何一方的时间相比），我建议您探索更简单的方法，其中 C++ 和 OCaml 代码在单独的进程中运行，并通过消息传递交换信息（以最方便定义的任何格式：文本、s 表达式、二进制格式、JSON 等）。如果我*确定*更简单的方法不起作用，我只会尝试在*同一过程中桥接代码。*

 *编辑：自从我去年写了这个答案以来，[Ctypes](https://github.com/ocamllabs/ocaml-ctypes)库出现了，来自 Jeremy Yallop；这是一种非常有前途的方法，可能比直接将 C 与 OCaml 接口简单得多。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-05-01T14:43:37.893

最简单的方法是分两个步骤：OCaml → C，然后使用`extern`关键字 C → C++。我在我的[COH*ML](https://github.com/gaiustech/cohml)项目中广泛执行此操作，该项目将 OCaml 与 C++ 中的[Coherence](http://www.oracle.com/technetwork/middleware/coherence/overview/index.html)库绑定。例如在 OCaml 我有：

```
type coh_ptr  (* Pointer to a Cohml C++ object *)
external coh_getcache: string -> coh_ptr = "caml_coh_getcache" 
```

然后在 C++ 中，首先是一个 C 函数：

```
extern "C" {
  value caml_coh_getcache(value cn) {
    CAMLparam1(cn);
    char* cache_name = String_val(cn);
    Cohml* c;
    try {
      c = new Cohml(cache_name);
    } catch (Exception::View ce) {
      raise_caml_exception(ce);
    }
    value v = caml_alloc_custom(&coh_custom_ops, sizeof(Cohml*), 0, 1);
    Cohml_val(v) = c;
    CAMLreturn(v);
  }
} 
```

最后是 C++ 实现：

```
Cohml::Cohml(char* cn) {
  String::View vsCacheName = cn;
  hCache = CacheFactory::getCache(vsCacheName);
} 
```

反其道而行之，原理基本相同。*

# mysql - 优化我的sql查询

> ID：15186415
> 
> 赞同：0
> 
> 时间：2013-03-03T13:57:14.053
> 
> 标签：mysql

我创建了以下查询来制作一个“频率图”，显示特定值之间的行数：

```
SELECT CONCAT('0 - ', M.MaxField1) AS 'Part',COUNT(*)
FROM TABLE1 P, (SELECT (MAX(Field1)*(1/10)) AS MaxField1 FROM TABLE1) AS M
WHERE P.Field1<M.MaxField1
UNION ALL
SELECT CONCAT((M.MaxField1), ' - ', (M.MaxField1*2)) AS 'Part',COUNT(*)
FROM TABLE1 P, (SELECT (MAX(Field1)*(1/10)) AS MaxField1 FROM TABLE1) AS M
WHERE P.Field1>=(M.MaxField1) AND P.Field1<(M.MaxField1*2)
UNION ALL
SELECT CONCAT((M.MaxField1*2), ' - ', (M.MaxField1*3)) AS 'Part',COUNT(*)
FROM TABLE1 P, (SELECT (MAX(Field1)*(1/10)) AS MaxField1 FROM TABLE1) AS M
WHERE P.Field1>=(M.MaxField1*2) AND P.Field1<(M.MaxField1*3)
UNION ALL
SELECT CONCAT((M.MaxField1*3), ' - ', (M.MaxField1*4)) AS 'Part',COUNT(*)
FROM TABLE1 P, (SELECT (MAX(Field1)*(1/10)) AS MaxField1 FROM TABLE1) AS M
WHERE P.Field1>=(M.MaxField1*3) AND P.Field1<(M.MaxField1*4)
UNION ALL
SELECT CONCAT((M.MaxField1*4), ' - ', (M.MaxField1*5)) AS 'Part',COUNT(*)
FROM TABLE1 P, (SELECT (MAX(Field1)*(1/10)) AS MaxField1 FROM TABLE1) AS M
WHERE P.Field1>=(M.MaxField1*4) AND P.Field1<(M.MaxField1*5)
UNION ALL
SELECT CONCAT((M.MaxField1*5), ' - ', (M.MaxField1*6)) AS 'Part',COUNT(*)
FROM TABLE1 P, (SELECT (MAX(Field1)*(1/10)) AS MaxField1 FROM TABLE1) AS M
WHERE P.Field1>=(M.MaxField1*5) AND P.Field1<(M.MaxField1*6)
UNION ALL
SELECT CONCAT((M.MaxField1*6), ' - ', (M.MaxField1*7)) AS 'Part',COUNT(*)
FROM TABLE1 P, (SELECT (MAX(Field1)*(1/10)) AS MaxField1 FROM TABLE1) AS M
WHERE P.Field1>=(M.MaxField1*6) AND P.Field1<(M.MaxField1*7)
UNION ALL
SELECT CONCAT((M.MaxField1*7), ' - ', (M.MaxField1*8)) AS 'Part',COUNT(*)
FROM TABLE1 P, (SELECT (MAX(Field1)*(1/10)) AS MaxField1 FROM TABLE1) AS M
WHERE P.Field1>=(M.MaxField1*7) AND P.Field1<(M.MaxField1*8)
UNION ALL
SELECT CONCAT((M.MaxField1*8), ' - ', (M.MaxField1*9)) AS 'Part',COUNT(*)
FROM TABLE1 P, (SELECT (MAX(Field1)*(1/10)) AS MaxField1 FROM TABLE1) AS M
WHERE P.Field1>=(M.MaxField1*8) AND P.Field1<(M.MaxField1*9)
UNION ALL
SELECT CONCAT((M.MaxField1*9), ' - ', (M.MaxField1*10)) AS 'Part',COUNT(*)
FROM TABLE1 P, (SELECT (MAX(Field1)*(1/10)) AS MaxField1 FROM TABLE1) AS M
WHERE P.Field1>=(M.MaxField1*9) 
```

有什么建议可以优化这个脚本，因为它非常耗时？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T14:25:22.960

试试这个（未经测试）：

```
WITH cte(MaxField1) AS (
    SELECT (MAX(Field1)/10) AS MaxField1 FROM TABLE1
)
SELECT 
    'Part',
    COUNT(*)
FROM (
    SELECT 
        CONCAT((MaxField1*M.bucket), ' - ', (MaxField1*(M.bucket+1))) AS 'Part',
        Field1 / cte.MaxField1 AS bucket
    FROM TABLE1, cte
) AS M
GROUP BY 'Part' 
```

对于没有 CTE 表达式的 MySQL 用户，请尝试以下操作：

```
SELECT 
    'Part',
    COUNT(*)
FROM (
    SELECT 
        CONCAT((MaxField1*M.bucket), ' - ', (MaxField1*(M.bucket+1))) AS 'Part',
        Field1 / cte.MaxField1 AS bucket
    FROM TABLE1, 
   (SELECT (MAX(Field1)/10) AS MaxField1 FROM TABLE1)cte
) AS M
GROUP BY 'Part' 
```

或荷兰语：

```
SELECT 
    'Part', 
    COUNT(*) 
FROM ( 
    SELECT 
        CONCAT((MaxPercbeheer*M.bucket), ' - ', (MaxPercbeheer*(M.bucket+1))) AS 'Part', 
        (Percbeheer/cte.MaxPercbeheer) AS bucket, 
        MaxPercbeheer 
    FROM POLIS, (SELECT (MAX(Percbeheer)/10) AS MaxPercbeheer FROM POLIS) cte
) AS M 
GROUP BY 'Part' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T16:03:44.667

您可以将其转换为一个查询，因为联合部分本质上是相同的查询：

```
create temporary table range_tmp (start int, end int);
insert into range_tmp values (0,1),(1,2),(2,3),(3,4),(4,5),(5,6),(7,8),(9,10);

SELECT CONCAT((M.MaxField1*t.start), ' - ', (M.MaxField1*t.end)) AS 'Part',COUNT(*)
FROM TABLE1 P, (SELECT (MAX(Field1)*(1/10)) AS MaxField1 FROM TABLE1) AS M, range_tmp t
WHERE (P.Field1>=(M.MaxField1*t.start) or t.start=1) AND (P.Field1<(M.MaxField1*t.end) or t.end=10) 
```

# c++ - C++ 编译器错误 c4430“c++ 不支持默认 int”

> ID：15186416
> 
> 赞同：7
> 
> 时间：2013-03-03T13:57:24.333
> 
> 标签：c++, int, alias, typedef

嗨，我正在尝试定义一个名为 USHORT 的别名。

```
// Demonstrates typedef keyword
#include <iostream>

typedef unsigned short int USHORT;  // typedef defined

main() {
    USHORT  Width = 5;
    USHORT Length;
    Length = 10;
    USHORT Area  = Width * Length;
    std::cout << "Width:" << Width << "\n";
    std::cout << "Length: "  << Length << std::endl;
    std::cout << "Area: " << Area;
} 
```

我不断收到编译器错误说：

> 错误 1 ​​错误 C4430：缺少类型说明符 - 假定为 int。注意：C++ 不支持 default-int c:\users\naqvi-home\documents\justit\c++\w1\cp1\list0304.cpp 8 1 ConsoleApplication3

谢谢

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-03T13:59:33.047

和你的无关`typedef`。问题是您没有给出返回类型`main`：

```
int main()
{
  // ...
} 
```

函数必须有返回类型。该`main`函数必须返回`int`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-03T14:07:25.523

通过谷歌搜索错误代码，您可以轻松查找错误的解释。例如，谷歌搜索“C4430”会带你[到这里](http://msdn.microsoft.com/en-us/library/ms173696)。正如其他人所说，原因是您没有声明`main`函数的返回类型。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-03T14:00:28.717

我不相信您需要`int`typedef 中的额外内容，我从内存中认为 unsigned short （默认情况下）是一个 int。

# ios - 按下图像按钮时添加声音

> ID：15186417
> 
> 赞同：0
> 
> 时间：2013-03-03T13:57:25.827
> 
> 标签：ios, xcode, image, audio, button

我在滚动视图中有这个按钮，按下它时我需要播放声音。

```
UIButton *profileButton = [UIButton buttonWithType:UIButtonTypeRoundedRect];
    [profileButton setImage:[UIImage imageNamed:@"test.jpg"] forState:UIControlStateNormal];
    [profileButton setImage:[UIImage imageNamed:@"test.jpg"] forState:UIControlStateHighlighted];
    profileButton.frame = CGRectMake(0, 620, 320, 250);

[self.scrollView addSubview:profileButton]; 
```

我怎么能这样做？谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T14:13:35.077

在按钮按下时添加触摸

```
[profileButton addTarget:self action:@selector(onButtonPress) forControlEvents:UIControlEventTouchUpInside]; 
```

// 需要这个包含文件和 AudioToolbox 框架

```
#import <AudioToolbox/AudioToolbox.h> 
```

播放一些声音

```
-(void) onButtonPress {
    NSString *soundPath = [[NSBundle mainBundle] pathForResource:@"fileName" ofType:@"mp3"];
    SystemSoundID soundID;
    AudioServicesCreateSystemSoundID((CFURLRef)[NSURL fileURLWithPath: soundPath], &soundID);
    AudioServicesPlaySystemSound (soundID);
} 
```

# vb.net - VB.NET中使用类的简单线性链表

> ID：15186418
> 
> 赞同：1
> 
> 时间：2013-03-03T13:57:26.280
> 
> 标签：vb.net, singly-linked-list

如何在VB.NET中使用类实现线性链表？

这个类如何修改为线性链表？

还有遍历列表、删除节点等的方法。

```
Public Class clsHol
    Private dt As Date
    Private tp As String
    Private remark As String

    Public Function setValues(ByVal d As Date, ByVal t As String, ByVal r As String)
        remark = r
        tp = t
        remark = r
    End Function

    Public Function getDate()
        Return dt
    End Function

    Public Function getTyp()
        Return tp
    End Function

    Public Function getRemark()
        Return remark
    End Function
End Class 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T15:13:07.770

样本：

```
Sub Main()
    Dim voLList As New LinkedList(Of clsHol)

    voLList.AddFirst(new clsHol())
    voLList.AddLast(new clsHol())
    voLList.AddLast(new clsHol())
End Sub 
```

# javascript - 如何通过变量从函数发送到嵌套函数

> ID：15186426
> 
> 赞同：0
> 
> 时间：2013-03-03T13:58:17.623
> 
> 标签：javascript, function, variables

作为一个 javascript 菜鸟，我很难理解如何在提供的示例中将变量从一个函数获取到另一个函数。

我想使用 in 中设置的`xx.projects.resize`winHeight`xx.projects.item.next`您会在其中看到 console.log(winHeight)）。

我应该在这里看什么？

```
var xx = {

    init: function()
    {   
        xx.listener.init()
    },

    listener: {

        init: function()
        {
            xx.listener.resize()
        },

        resize: function()
        {
            xx.projects.resize()
            $(window).on('resize',function(){
                xx.projects.resize()
            })
        },
    },

    projects: {

        resize: function()
        {
            var $display = $('section .item.curr');
            var $displayNotActive = $('section.curr .item.next, section.curr .item.prev');

            var winWidth = $(window).width();
            var winHeight = $(window).height();

            var containerWidth, containerHeight;

            if(winWidth > 1450) {
                if(winHeight > 1050) {
                    containerWidth = 1200;
                    containerHeight = 900;
                } else {
                    containerWidth = winWidth - 250;
                    var helperHeight = Math.floor(containerWidth * 3/4);
                    if(helperHeight > (winHeight - 150)) {
                        containerHeight = winHeight - 150;
                        containerWidth = Math.floor(containerHeight * 4/3); 
                    } else {
                        containerHeight = helperHeight; 
                    }
                }
            } else if(winWidth < 600) {
                containerWidth = 300;
                containerHeight = 225;
            } else {
                containerWidth = winWidth - 250;
                var helperHeight = Math.floor(containerWidth * 3/4);
                if(helperHeight > (winHeight - 150)) {
                    containerHeight = winHeight - 150;
                    containerWidth = Math.floor(containerHeight * 4/3); 
                } else {
                    containerHeight = helperHeight; 
                }
            }
        },

        item: {
            next: function()
            {
                var s = $('#projects section.curr')
                    a = s.find('.item.curr'),
                    n = a.next('.item'),
                    l = a.position()

                console.log(winHeight);

                if( n.length > 0 ){
                    a.animate({ left: '-100%' }, ep.projects.config.item.speed, ep.projects.config.item.easing)
                    n.animate({ left: l.left }, ep.projects.config.item.speed, ep.projects.config.item.easing, function(){
                        a.removeClass('curr').addClass('prev')
                        n.removeClass('next').addClass('curr')                      
                    })
                }               
            },
        },
    }
}

$(document).on('ready', xx.init) // Document loaded, DOM ready 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T14:03:35.800

在对象范围内声明`winHeight`and并使用and访问它。`winWidth``this.winWidth``this.winHeight`

```
var xx = {

    projects: {
        resize: function () {
            //we are saving winWidth, winHeight in the projects object scope so that it can be accessed from other functions in the same scope
            this.winWidth = $(window).width(); 
            this.winHeight = $(window).height();

            var containerWidth, containerHeight;

            if (this.winWidth > 1450) {
                if (this.winHeight > 1050) {
                    containerWidth = 1200;
                    containerHeight = 900;
                } else {
                    containerWidth = this.winWidth - 250;
                    var helperHeight = Math.floor(containerWidth * 3 / 4);
                    if (helperHeight > (this.winHeight - 150)) {
                        containerHeight = this.winHeight - 150;
                        containerWidth = Math.floor(containerHeight * 4 / 3);
                    } else {
                        containerHeight = helperHeight;
                    }
                }
            } else if (winWidth < 600) {
                containerWidth = 300;
                containerHeight = 225;
            } else {
                containerWidth = this.winWidth - 250;
                var helperHeight = Math.floor(containerWidth * 3 / 4);
                if (helperHeight > (this.winHeight - 150)) {
                    containerHeight = this.winHeight - 150;
                    containerWidth = Math.floor(containerHeight * 4 / 3);
                } else {
                    containerHeight = helperHeight;
                }
            }
        },

        item: {
            next: function () {
                var s = $('#projects section.curr')
                a = s.find('.item.curr'),
                    n = a.next('.item'),
                    l = a.position()

                    console.log(this.winHeight);

                if (n.length > 0) {
                    a.animate({
                        left: '-100%'
                    }, ep.projects.config.item.speed, ep.projects.config.item.easing)
                    n.animate({
                        left: l.left
                    }, ep.projects.config.item.speed, ep.projects.config.item.easing, function () {
                        a.removeClass('curr').addClass('prev')
                        n.removeClass('next').addClass('curr')
                    })
                }
            },
        },
    }
} 
```

* * *

[http://jsfiddle.net/FDeKe/](http://jsfiddle.net/FDeKe/)

# php - 如何安全地分发串行密钥？

> ID：15186427
> 
> 赞同：1
> 
> 时间：2013-03-03T13:58:29.413
> 
> 标签：php, javascript, html, mysql

我正在通过我的网站销售我的 Windows 应用程序。我使用 Paypal 和 LibertyReserve 作为我的支付处理器。我创建了结帐按钮来自动化购买过程。购买完成后，买家会被重定向到感谢页面。

结帐完成后，我将发布序列号和下载链接。我目前正在使用 PHP 进行操作，但它并不安全。

我有一个包含大约 100 个连续剧的文本文件。每次用户访问感谢页面时，PHP 脚本都会检查是否未设置 cookie（以避免重复访问）。如果 cookie 未设置，它会打开带有序列号的文本文件，读取第一个序列号并将其存储在 cookie 中。序列号从文本文件中删除。之后，通过使用“标题”将用户重定向到显示 cookie 内容并显示“这是您的序列号：[包含序列号的 cookie 值在此处]”的最终页面。

现在，稍微有点脑子的人都可以用串行键读取整个文本文件。我怎样才能保护它/让它变得更好？

任何建议都会派上用场。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T14:05:02.737

将每个序列码存储在 MySQL 数据库中，表可能是这样的：

```
id, serial, purchased, date, hashcode 
```

当用户从 paypal 成功付款返回时，您会将他重定向到类似 serial.php?hashcode={hashcode} 脚本，该脚本通过哈希码检索序列号并将其打印给用户。脚本还将串行行设置为已购买，如果您不想让用户第二次看到此页面，您可以这样做。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-03T14:06:48.613

您有一个包含所有序列键的表。

```
+--------+-----------+
| id     | serial    |
+--------+-----------+
| 1      | 123-45    |
+--------+-----------+
| 2      | 456-43    |
+--------+-----------+ 
```

当一个事务被执行，并且你有一个事务的唯一标识符时，你将有另一个表，其中包含属于该唯一标识符的序列 ID。

```
+--------+-----------+-----------+
| id     | trans     |  serialId |
+--------+-----------+-----------+
| 1      | 654326    |  1        |
+--------+-----------+-----------+
| 2      | 876430    |  2        |
+--------+-----------+-----------+ 
```

serialId/trans 列是唯一的，因此没有两个事务可以具有相同的序列 ID。

# c++ - 访问列表项 c++

> ID：15186428
> 
> 赞同：-4
> 
> 时间：2013-03-03T13:58:30.040
> 
> 标签：c++

我将对象存储在列表中。我想访问他们的方法，但我不知道该怎么做。在 C# 中，我需要编写：

```
for (i = 0; i < myList.count(); i++)
myList[i].update(); 
```

但 C++ 不起作用：

```
list<Bullet> bullets;

bullets.emplace_back(t_bulletPlayer);

for (i = 0; i < bullets.size(); i++)
{
   bullets[i].update();
} 
```

你能帮助我吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-03T14:20:43.447

`std::list`C++ 中的 s 没有索引访问运算符。如果您经常需要索引访问，您可能需要一个`std::vector`。对于在列表中的每个对象上调用方法的用例，请使用如下简单循环：

```
for (auto b : bullets)
  b.update(); 
```

此外，您的使用`emplace_back`没有意义（它甚至不应该编译，但显然 MSVC++ 有一个 nonconforming `emplace_back(T&&)`）。用于`push_back`将您类型的现有对象添加到列表或向量中。

# jquery - jQuery：忽略 jsonp parsererror 并使用原始数据

> ID：15186430
> 
> 赞同：0
> 
> 时间：2013-03-03T13:58:46.447
> 
> 标签：jquery, cross-domain, jsonp, parse-error

当我使用 jQuery 发出 GET 跨域请求时，出现 JSONP 解析器错误。令人沮丧的是，请求的输出是一个有效的 json。不幸的是，当我将 dataType-setting 更改为 json 时，请求一起失败并且没有返回任何内容。

*我的问题是*：我怎样才能继续发出 jsonp 跨域请求，并将输出作为 RAW 文本获取到（错误）函数。我可以自己转换结果。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-02-11T09:04:28.660

我遇到了类似的情况，我试图从中获取数据的服务返回无效的 JSON

我解决了这样的问题：

```
$.ajax( request with dataType set as text )
.done(function (data) {
    var rawJSON = data.replace(/\\/g, '\\\\');
    var response = JSON.parse(rawJSON);
    // do what you were going to do here
}); 
```

# vba - VBA WinHttp没有映射字符

> ID：15186433
> 
> 赞同：2
> 
> 时间：2013-03-03T13:58:57.543
> 
> 标签：vba, winhttp, winhttprequest

这是我使用获取 HTML 代码进行进一步处理的函数的来源：

```
Public Function DownloadTextFile(url As String) As String
    Dim oHTTP As WinHttp.WinHttpRequest

    Set oHTTP = New WinHttp.WinHttpRequest
    oHTTP.Open Method:="GET", url:=url, async:=False
    oHTTP.setRequestHeader "User-Agent", "Mozilla/4.0 (compatible; MSIE 6.0; Windows NT 5.0)"
    'oHTTP.setRequestHeader "Content-Type", "multipart/form-data; "
    oHTTP.setRequestHeader "Content-Type", "text/html; charset=utf-8"
    oHTTP.Option(WinHttpRequestOption_EnableRedirects) = True
    oHTTP.send

    Dim success As Boolean
    success = oHTTP.waitForResponse()
    If Not success Then
        Debug.Print "DOWNLOAD FAILED!"
        Exit Function
    End If

    Dim responseText As String
    Debug.Print oHTTP.responseText

    responseText = oHTTP.responseText
    'Set fs = CreateObject("Scripting.FileSystemObject")
    'Set a = fs.CreateTextFile("c:\testfile.txt", True, False)
    'Set a = fs.CreateTextFile("c:\testfile.txt", True, True)
    'a.WriteLine oHTTP.responseText
    'a.Close

    Set oHTTP = Nothing

    DownloadTextFile = responseText
End Function 
```

它适用于大多数页面，但对于某些页面`responseText`是`No Mapping for the Unicode character exists in the target multi-byte code page`.

这是一个网页`responseText`示例`No Mapping for the Unicode character exists in the target multi-byte code page`

[http://bzp0.portal.uzp.gov.pl/index.php?ogloszenie=browser&action=search&rodzajzamowienia=B&rodzajogloszenia=1&aktualne=1&datapublikacji_rodzaj=5&iloscwynikownastronie=20&offset=20](http://bzp0.portal.uzp.gov.pl/index.php?ogloszenie=browser&action=search&rodzajzamowienia=B&rodzajogloszenia=1&aktualne=1&datapublikacji_rodzaj=5&iloscwynikownastronie=20&offset=20)

这是一个无法编码的可疑字符（来自谷歌浏览器的屏幕截图）：

[http://imageshack.us/photo/my-images/585/errsource.png/](http://imageshack.us/photo/my-images/585/errsource.png/)

有时在同一网站上但对于不同的搜索结果，此功能不会产生错误，但是，即时窗口中的HTML源就像`?????? ...`

任何想法如何使它工作？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2017-05-20T13:32:03.707

对我有用的解决方案：

```
responseText = VBA.Strings.StrConv(oHTTP.ResponseBody, vbUnicode) 
```

注意使用 ResponseBody 而不是 ResponseText

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-03T15:33:00.953

尝试使用 StrConv：

```
DownloadTextFile = VBA.Strings.StrConv(responseText, vbUnicode) 
```

vbUnicode：使用系统的默认代码页将字符串转换为 Unicode。（在 Macintosh 上不可用。）

# jsf - JSF 渲染无法正常工作

> ID：15186434
> 
> 赞同：0
> 
> 时间：2013-03-03T13:58:58.973
> 
> 标签：jsf, jsf-2

f:view`<f:view rendered="#{p.statusmsg!=null}">`中的所有内容，无论 statusmsg、picstatus 或 videostatus 的值是否为空，都将被`<f:view rendered="#{p.picstatus!=null}">`执行`<f:view rendered="#{p.videostatus!=null}">`

1)getMoreStatusUpdate.xhtml

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml"
xmlns:ui="http://java.sun.com/jsf/facelets"
xmlns:h="http://java.sun.com/jsf/html"
xmlns:f="http://java.sun.com/jsf/core"
xmlns:p="http://primefaces.org/ui"
xmlns:c="http://java.sun.com/jsp/jstl/core">

<h:head></h:head>
<h:body>
   <div id="content">
      <h:form>
         <ui:repeat var="p" value="#{statusBean.moreStatusList}">                   
            <f:view rendered="#{p.statusmsg!=null}">
            //Status content    
            </f:view>
            <f:view rendered="#{p.picstatus != null}"> 
            //Picture Status Content                            
            </f:view>  
            <f:view rendered="#{p.videostatus != null}">
            //Video Status Content
            </f:view>                   
         </ui:repeat>
      </h:form>
   </div>
</h:body> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-03T14:05:23.193

`<f:view>` [没有](http://docs.oracle.com/javaee/6/javaserverfaces/2.1/docs/vdldocs/facelets/f/view.html)属性`rendered`。_

此属性仅在[`UIComponent`](http://docs.oracle.com/javaee/6/api/javax/faces/component/UIComponent.html)基础标签上受支持，即库的所有标签和一些[`h:`库](http://docs.oracle.com/javaee/6/javaserverfaces/2.1/docs/vdldocs/facelets/h/tld-summary.html)`ui:`的标签，包括[`<ui:fragment>`](http://docs.oracle.com/javaee/6/javaserverfaces/2.1/docs/vdldocs/facelets/ui/fragment.html).

只需替换`<f:view>`为`<ui:fragment>`.

### 也可以看看：

*   [有条件地显示 JSF 组件](https://stackoverflow.com/questions/4870462/conditionally-displaying-jsf-components/4870557#4870557)

# javascript - Persistence.js 在两个方向上添加多对多

> ID：15186435
> 
> 赞同：1
> 
> 时间：2013-03-03T13:58:59.473
> 
> 标签：javascript

使用[persistence.js](https://github.com/zefhemel/persistencejs)，我有两个实体（Foo，Bar）形成多对多关系（N：M）。到目前为止，我只能让它添加许多“在一个方向上”，即 Foo 的一个实例可以添加许多 Bars，但是在这种关系中使用的任何 Bar 实例都不能反过来有许多 Foos。但是任何新的 Bar 实例都可以再次拥有许多 Foo。是否有可能，如果可以，如何“双向”添加许多实体？还是我必须像在 RDB 中那样使用联结表（N:M => 1:NM:1）？

```
var foo0, foo1, foo2, bar0, bar1, bar2

Foo = persistence.define('Foo', { val: 'TEXT' } )
Bar = persistence.define('Bar', { val: 'TEXT' } )
Foo.hasMany('bars', Bar, 'foo')
Bar.hasMany('foos', Foo, 'bar')

持久性.store.memory.config（持久性）；
持久性.schemaSync();

foo0 = new Foo( { val : 'foo0' } )
foo1 = new Foo( { val : 'foo1' } )
foo2 = new Foo( { val : 'foo2' } )
bar0 = new Bar( { val : 'bar0' } )
bar1 = new Bar({ val : 'bar1' } )
bar2 = new Bar( { val : 'bar2' } )
foo1.bars.add(bar0)
foo2.bars.add( bar0 ) // 注意：已经用上面的语句添加到 DB => 什么都不做
foo2.bars.add(bar1)
bar1.foos.add( foo0 )
bar2.foos.add( foo0 ) // 注意：已经用上面的语句添加到 DB => 什么都不做
bar2.foos.add( foo1 )

持久性.flush（函数（）{
    Foo.all().each( 函数 ( foo ) {
        foo.bars.list（函数（酒吧）{
            console.log("Foo" + foo.val +":")
            _.each(bars, function (bar) { console.log(bar.val) })
        })
    })

    Bar.all().each( 函数 ( bar ) {
        bar.foos.list( 函数 ( foos ) {
            console.log("Bar" + bar.val +":")
            _.each( foos, function ( foo ) { console.log( foo.val ) } )
        })
    })

    Bar.all().list( 函数 ( 酒吧 ) { foo0.bars = 酒吧 } )
    // => “未捕获的错误：尚不支持”
})

```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-03T22:35:03.947

1\. inverseProperties 必须相同

```
Foo.hasMany('bars', Bar, 'foos')
Bar.hasMany('foos', Foo, 'bars')

```

2.每当一个实体添加另一个实体时，两者都插入数据库并自动交叉引用

```
  foo0 = new Foo { val: 'foo0: 根本没有使用' }
  foo1 = new Foo { val: 'foo1: has bar0, not added by others' }
  foo2 = new Foo { val: 'foo2: cross-add bar1' }
  foo3 = new Foo { val: 'foo3: 再次添加 bar1' }
  foo4 = new Foo { val: 'foo4: 添加多个' }
  foo5 = new Foo { val: 'foo5: 仅由 bar4 添加' }
  bar0 = 新酒吧 { val: 'bar0' }
  bar1 = new Bar { val: 'bar1: 交叉添加 foo2，在 foo3 中再次使用' }
  bar2 = new Bar { val: 'bar2: 由 foo4 #1 添加' }
  bar3 = new Bar { val: 'bar3: 由 foo4 #2 添加' }
  bar4 = new Bar { val: 'bar4: added by foo4 #3, has foo5'}

  foo1.bars.add bar0
  foo2.bars.add bar1
  foo3.bars.add bar1
  foo4.bars.add bar2
  foo4.bars.add bar3
  foo4.bars.add bar4

  bar1.foos.add foo2
  bar4.foos.add foo5

```

3\. 但是在使用 addAll() 时情况并非如此，这需要通过持久性本身或由另一个实体添加

```
foo4b = new Foo { val : 'foo4b: 从 foo4 复制条形图' }
foo4.bars.list ( 酒吧 ) ->
        foo4b.bars.add所有酒吧
        persistence.add foo4b # 任选其一，
        # bar4.foos.add foo4b # 都可以

```

# java - 将 JCalendar 事件 c.getTime() 转换为 SimpleDateFormat

> ID：15186437
> 
> 赞同：0
> 
> 时间：2013-03-03T13:59:10.497
> 
> 标签：java, jcalendar

我想将所选日期转换为格式“dd-MM-yyyy”，因为 c.getTime 返回“Sun Mar 3 12:34:46 IST 2013”

私有类 MyDateListener 实现 DateListener {

```
 public void dateChanged(DateEvent e) {

        Calendar c = e.getSelectedDate();
        if (c != null) {
            try {
                SimpleDateFormat parser = new SimpleDateFormat(c.getTime().toString());
                SimpleDateFormat formatter = new SimpleDateFormat("dd-MM-yyyy");
                Date date;
                date = parser.parse(date1);
                output = formatter.format(date);
                System.out.println(output);
            } catch (ParseException ex) {
                Logger.getLogger(Example1.class.getName()).log(Level.SEVERE, null, ex);
            }

        } else {
            System.out.println("No time selected.");
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T14:06:18.167

你想要：

```
SimpleDateFormat sdf = new SimpleDateFormat("dd-MM-yyyy");
System.out.println(sdf.format(c.getTime()); 
```

[getTime()](http://docs.oracle.com/javase/7/docs/api/java/util/Calendar.html#getTime%28%29)函数实际上返回一个日期，您可以将其传递给格式化程序，因此无需解析它。

# c# - WPF DatePicker 仅显示可用日期

> ID：15186438
> 
> 赞同：4
> 
> 时间：2013-03-03T13:59:14.053
> 
> 标签：c#, wpf, datepicker

我有一个 DatePicker，因此用户可以选择日期。

我希望用户只选择可用的日期。并且可用日期存储在一个`List`

到目前为止，我有这个：

```
<DatePicker x:Name="DatePicker"
  SelectedDate="{Binding SearchEngineCompassLogView.DateSearch,
      Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
  DataContext="{StaticResource CompassLogView}">
</DatePicker> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T16:06:19.813

您可以使用`BlackoutDates`属性，但在此解决方案中您必须指定`DisplayDateStart`and `DisplayDateEnd`。

这`BlackoutDates`是不可选择的日期集合 ( [msdn](http://msdn.microsoft.com/en-us/library/system.windows.controls.datepicker.blackoutdates.aspx) )。

例子：

```
 <DatePicker x:Name="datePicker" 
                    Loaded="datePicker_Loaded"
                    DisplayDateStart="2000/01/01"
                    DisplayDateEnd="2050/01/01"
                    /> 
```

加载的事件处理程序：

```
private void datePicker_Loaded(object sender, RoutedEventArgs e)
{
    DatePicker picker = sender as DatePicker;

    if (picker.DisplayDateStart == null || picker.DisplayDateEnd == null) return;

    picker.BlackoutDates.Clear();

    DateTime start = picker.DisplayDateStart.Value;
    DateTime end = picker.DisplayDateEnd.Value;

    while (start <= end)
    {
        if (!availableDates.Contains(start))
        {
            picker.BlackoutDates.Add(new CalendarDateRange(start, start));
        }
        start = start.AddDays(1);
    }
} 
```

有可用日期的集合：

```
List<DateTime> availableDates = new List<DateTime> 
{
    new DateTime(2013, 03, 01),
    new DateTime(2013, 03, 02),
    new DateTime(2013, 03, 03),
    new DateTime(2013, 03, 31),
    new DateTime(2013, 02, 01),
    new DateTime(2013, 02, 02),
    new DateTime(2013, 05, 01),
    new DateTime(2013, 05, 02)
}; 
```

# php - 如何提供执行此操作的链接

> ID：15186439
> 
> 赞同：0
> 
> 时间：2013-03-03T13:59:14.107
> 
> 标签：php, mysql, function

```
$sql=mysql_query("SELECT * FROM feedback.subject WHERE branch='cse'");
$row = mysql_fetch_assoc($sql) or die("error : $sql" .mysql_error());
$data =array();
$n=mysql_num_rows($sql);
while($row = mysql_fetch_array($sql))
    {
$query_result_array[]=$row;
}

    for($i=0;$i<$n;$i++)
        {
            $subid=$query_result_array[$i]['subid'];
            $bt =$query_result_array[$i]['batch'];
            $y =$query_result_array[$i]['year'];
            $s = $query_result_array[$i]['semister'];
            $subname=$query_result_array[$i]['subname'];
            $tid = $query_result_array[$i]['tid'];
 $sql2=mysql_query("SELECT * FROM teacher WHERE teacher.tid='$tid'");
            $row2 =mysql_fetch_array($sql2);
            $tname= $row2['tname'];
echo "<table id='table'>";
echo "<tr>";
echo "<td>".$bt."</td>";
echo "<td>CSE</td>";
echo "<td>".$y."</td>";
echo "<td>".$s."</td>";
echo "<td style='width:150px'>".$subname."</td>";
echo "<td style='width:150px'>".$row2['tname']."</td>";
echo '<form methode="get">
      <input type="hidden" name="report">
      <input type="submit" value="report">
      </form>';
echo "</tr>";
echo "</table>";

}

function handler($x,$y){
            session_regenerate_id();
            $_SESSION['SUBID']=$x;
            $_SESSION['TID']=$y;
            echo '<a href="report.php" target="_blank">report</a>';
}
      if(isset($_GET["report'$i'"]))
       {
      handler($query_result_array[$i]['subid'], $query_result_array[$i]['tid']);
      unset ($_GET["report"]);
        }

}

this results a table like
BATCH | BRANCH | YEAR | SEMISTER | SUBJECT NAME | TEACHER NAME |     ACTION    |
-------------------------------------------------------------------------------
 9      CSE      4       1           DBMS         ABC           REPORT
 9      CSE      4       1           WT           XYZ           REPORT
------------------------------------------------------------------------------- 
```

当我点击一行的报告时假设（'ABC'老师）我想携带详细信息（'ABC'和'DBMS'）以进一步处理。但它总是带有循环中最后一个人的细节（这里是'XYZ'和'WT'）。怎么得到？是否有任何替代过程通过我可以调用带有特定行详细信息的特定行的处理程序函数。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T14:07:28.207

只需遍历查询结果数组并在其中放置一个 if 来检测名称何时是您要查找的内容，此时，将当前 $query_result_array[$i] 获取到您想要进一步携带数据的 var 中并打破环形。

如果您按表中的位置获取，您甚至不需要循环，您只需执行 $specific_person_data = $query_result_array[$i]...

因此，这现在包含有关数据表中位置 $i 的人的所有数据。

链接更新：

每个人的数据可以通过这样的链接传递到另一个页面：

链接地址.php* *?var1=X&var2=Y&var3=Z...* *

并在另一端使用 $_POST['var1']、$_POST['var2'] 等获取。

确保不要直接回显或返回数据，而是在每个帖子 var 上使用**strip_tags**进行安全预防。

另外这里是我关于敏感数据处理和一些基本安全主题的文章：

[http://metaphorical-lab.com/blog/?p=443](http://metaphorical-lab.com/blog/?p=443)

# c++ - ubuntu中是否有库的默认路径？

> ID：15186441
> 
> 赞同：1
> 
> 时间：2013-03-03T13:59:14.107
> 
> 标签：c++, linux, boost, compilation

伙计们！

我正在使用`ubuntu 12.04`并尝试编译一个`boost`测试程序。我安装了升压

```
sudo apt-get install libboost-all-dev 
```

所以，我不知道在哪里可以找到我的图书馆。我尝试使用

```
g++ -lboost_system -lboost_thread boost_test.cpp 
```

想也许有一些默认路径，其中 ubuntu 自动安装了 boost，但这是错误的，我有以下内容：

> /tmp/ccTKXzTR.o: 在函数 `__static_initialization_and_destruction_0(int, int)': boost_test.cpp:(.text+0xcc): undefined reference to` boost::system::generic_category()' boost_test.cpp:(.text+0xd8): undefined reference to `boost::system::generic_category()' boost_test.cpp:(.text+0xe4): undefined reference to` boost::system::system_category()' /tmp/ccTKXzTR.o:在函数 `boost::system::error_code::error_code()': boost_test.cpp:(.text._ZN5boost6system10error_codeC2Ev[_ZN5boost6system10error_codeC5Ev]+0x17): undefined reference to`boost::system::system_category()' /tmp/ccTKXzTR.o: 在函数 `boost::asio::error::get_system_category()': boost_test.cpp:(.text._ZN5boost4asio5error19get_system_categoryEv[_ZN5boost4asio5error19get_system_categoryEv]+0x5): undefined reference to`boost::system::system_category()' /tmp/ccTKXzTR.o: 在函数 `boost::asio::detail::posix_tss_ptr_create(unsigned int&)': boost_test.cpp:(.text._ZN5boost4asio6detail20posix_tss_ptr_createERj[_ZN5boost4asio6detail20posix_tss_ptr_createERj]+0x19): undefined reference to`pthread_key_create' /tmp/ccTKXzTR.o: 在函数 `boost::asio::detail::posix_tss_ptr<boost::asio::detail::call_stack<boost::asio::detail::task_io_service, boost::asio::detail::task_io_service::thread_info>::context>::~posix_tss_ptr()': boost_test.cpp:(.text._ZN5boost4asio6detail13posix_tss_ptrINS1_10call_stackINS1_15task_io_serviceENS4_11thread_infoEE7contextEED2Ev[_ZN5boost4asio6detail13posix_tss_ptrINS1_10call_stackINS1_15task_io_serviceENS4_11thread_infoEE7contextEED5Ev]+0x15): undefined reference to`pthread_key_delete'/tmp/ccTKXzTR.o：在函数 `boost::asio::detail::posix_tss_ptr<boost::asio::detail::call_stack<boost::asio::detail::strand_service::strand_impl, unsigned char>::context>::~posix_tss_ptr()': boost_test.cpp:(.text._ZN5boost4asio6detail13posix_tss_ptrINS1_10call_stackINS1_14strand_service11strand_implEhE7contextEED2Ev[_ZN5boost4asio6detail13posix_tss_ptrINS1_10call_stackINS1_14strand_service11strand_implEhE7contextEED5Ev]+0x15): undefined reference to`pthread_key_delete'collect2：错误：ld 返回 1 退出状态

有人可以帮我弄清楚我的库是否正确安装并编译吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-03T14:16:06.720

我发现`/usr/include/boost`是提升标头的路径，并`/usr/lib`包含我想要的所有提升库。

# actionscript-3 - 在 ipad 中获取 AIR 堆栈跟踪以进行发布构建

> ID：15186444
> 
> 赞同：1
> 
> 时间：2013-03-03T13:59:19.957
> 
> 标签：actionscript-3, air

有没有办法在设备（ipad / iphone）中运行的 Release 版本中获取 AIR 应用程序的完整堆栈跟踪？

我尝试了链接中提到的：- [http://forum.starling-framework.org/topic/stack-traces-in-release-build](http://forum.starling-framework.org/topic/stack-traces-in-release-build)

[http://renaun.com/blog/2012/09/getting-the-stack-trace-in-a-release-flash-player/](http://renaun.com/blog/2012/09/getting-the-stack-trace-in-a-release-flash-player/)

看来我们只能在 Flash Player 中而不是在设备中获得跟踪

我还尝试在应用程序 AIR 目录中放置一个调试文件。

这适用于 Windows 应用程序。无法找到任何方法在设备（ipad / iphone）中进行这项工作？

我也无法使用 UncaughtErrorHandler 获得完整的堆栈跟踪

任何付费解决方案也可以。

# php - php apache - 反向代理双斜杠

> ID：15186446
> 
> 赞同：3
> 
> 时间：2013-03-03T13:59:30.207
> 
> 标签：php, apache

当我使用 apache 反向代理时，我遇到了前导双斜杠的问题。($_SERVER['REQUEST_URI'] 总是以 // 开头，除非我直接访问 root。

配置

```
ProxyPass /admin/ http://admin.example.com/
ProxyPassReverse /admin/ http://admin.example.com/

or

<Location /admin>
   ProxyPass http://admin.example.com/
   ProxyPassReverse http://admin.example.com/
</Location> 
```

我已经尝试了所有可能的组合，比如

*   ProxyPass /admin [http://admin.example.com](http://admin.example.com)
*   ProxyPass /admin [http://admin.example.com/](http://admin.example.com/)
*   ProxyPass /admin/ [http://admin.example.com](http://admin.example.com)

但没有运气。我错过了什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-04T13:55:31.413

好的，经过更多的实验，这行得通：

```
<Location /admin>
    ProxyPass http://admin.example.com
    ProxyPassReverse http://admin.example.com
</Location> 
```

# sql - 稀疏列未显示任何节省

> ID：15186448
> 
> 赞同：1
> 
> 时间：2013-03-03T13:59:32.063
> 
> 标签：sql, sql-server, null, sparse-columns

我已经进行了一项测试，将具有一些稀疏列的表与没有稀疏列的表进行比较，并且我看到节省空间为零。

我有两个表，都主要在 varchar 列中存储地址信息。两个表都允许空值，一个具有列稀疏属性集。

我在每个中插入 1000 行默认值（默认值为空）。稀疏列以不同的方式存储空值，所以我相信我应该看到节省空间。但是在运行 sp_spaceUsed 时，我没有看到任何节省。关于我做错了什么或我的理解不正确的任何想法？

```
 Create Table SparseColTest_NonSparse
    (
        AddressID int identity(1,1) not null,
        AddressLine1 varchar(500)  null,
        AddressLine2 varchar(500)  null,
        AddressLine3 varchar(500)  null,
        PostalCode varchar(20)  null,
        Country varchar(50) 
    )

    Create Table SparseColTest_Sparse
    (
        AddressID int identity(1,1) not null,
        AddressLine1 varchar(500) sparse null,
        AddressLine2 varchar(500)  sparse null,
        AddressLine3 varchar(500)  sparse null,
        PostalCode varchar(20)  sparse null,
        Country varchar(50) 
    )

    declare @i int
    set @i = 0

    while(@i <= 100000)
    BEGIN

        insert into SparseColTest_NonSparse Default values
        insert into SparseColTest_Sparse default values

        set @i = @i + 1
    END

    exec sp_spaceUsed 'SparseColTest_NonSparse'
    exec sp_spaceUsed 'SparseColTest_Sparse'

    /*
    name                          rows                 reserved           data                       index_size         unused
    ----------------------------- -------------------- ------------------ -------------        ----- ------------------ ------------------
    SparseColTest_NonSparse       210003               2888 KB            2840 KB                    8 KB               40 KB

    name                          rows                 reserved           data                       index_size         unused
    ----------------------------- -------------------- ------------------ -------------        ----- ------------------ ------------------
    SparseColTest_Sparse                210003               2888 KB            2840 KB                    8 KB               40 KB

    ****NOTE - even with 210k rows sparse and non sparse tables are identical in size.
    */ 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-03T17:31:25.947

问题是页面上的存储。这是所发生情况的近似值。

占用空间的原因如下：

1.  地址 ID（4 个字节）
2.  NULL 位图（*两个*表中的 1 个字节）
3.  稀疏列列表（每个 NULL 字段 2 个字节）
4.  列值列表（不是任何值，因为 NULL varchars 不占用空间）
5.  [稀疏列的 6 字节开销（此处](http://social.msdn.microsoft.com/Forums/en/sqldocumentation/thread/0404de89-70dc-4026-9e2e-13ddc3e7c058)仅参考）
6.  其他一些小开销

这可能需要一些解释。两个表都有`AddressID`, 占用相同的空间。

所有非稀疏列都在 NULL 位图中。您可能认为只有*NULL-able*会在那里，但没有。SQL Server 具有所有这些的位图。一次存储一个字节。因此，非稀疏表中的六个列与稀疏表中的两个非稀疏列（身份和国家/地区）占用相同的空间。

Varchars 是可变长度数据。当为 NULL 时，它们仍然为每列保留 2 个字节。所以这是第一条记录中的 10 个字节。第二个是 2 个字节。

稀疏记录有 6 个字节的开销。

稀疏列仅在有值时才占用空间。这里没有值。

最终结果是，在开销和可能的字节对齐限制之间，两条记录的长度加起来相同。非稀疏表中相应列的*值占用了一些长度空间，这似乎与列使用的空间相匹配。*我还怀疑页面上的数据行在 2 或 4 字节边界上对齐。两个表中的 NULL 位图大小相同。

当稀疏表中的稀疏列比非稀疏表至少多 8 列时，我看到了空间节省。这无疑为您节省了 NULL 位图，它被四舍五入到最接近的字节。

稀疏列的真正节省在于固定长度的数据类型。存储每个值的开销更大，但这就是稀疏性的来源。值并不多。您失去了位掩码*和*值将占用的空间的开销。

对于您的示例，稀疏列没有用。对于真实数据，它们实际上可能会增加存储空间。

[在此处](http://msdn.microsoft.com/en-us/library/cc280604%28v=sql.105%29.aspx)查看文档。

# c# - << 是做什么的？

> ID：15186451
> 
> 赞同：-2
> 
> 时间：2013-03-03T14:00:22.547
> 
> 标签：c#, syntax

在告诉我谷歌之前，请注意谷歌不会搜索“<<”字符。

我发现了以下内容：

data 是一个字节数组。

> int ResultChannel = data[1] + (data[2] << 8)

<< 是如何工作的？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-03T14:02:05.270

左移。

> 在受 C 启发的语言中，左移运算符和右移运算符分别是“<<”和“>>”。移位的位数作为移位运算符的第二个参数给出。例如，
> 
> ```
> x = y << 2; 
> ```
> 
> 将 y 左移两位的结果赋给 x.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-03T14:02:58.220

<< 是[左移运算符](http://msdn.microsoft.com/en-us/library/a1sway8w.aspx)

> 左移运算符 (<<) 将其第一个操作数左移第二个操作数指定的位数。第二个操作数的类型必须是 int 或具有到 int 的预定义隐式数字转换的类型。

```
static void Main()
{
    int i = 1;
    long lg = 1;
    // Shift i one bit to the left. The result is 2.
    Console.WriteLine("0x{0:x}", i << 1);
    // In binary, 33 is 100001\. Because the value of the five low-order 
    // bits is 1, the result of the shift is again 2\. 
    Console.WriteLine("0x{0:x}", i << 33);
    // Because the type of lg is long, the shift is the value of the six 
    // low-order bits. In this example, the shift is 33, and the value of 
    // lg is shifted 33 bits to the left. 
    //     In binary:     10 0000 0000 0000 0000 0000 0000 0000 0000  
    //     In hexadecimal: 2    0    0    0    0    0    0    0    0
    Console.WriteLine("0x{0:x}", lg << 33);
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-03T14:03:43.107

它是一个位移运算符。

它将位向左移动。

例如： 5 << 3 返回一个向左移动 5 位的值。二进制中的五是：

```
00000101 
```

如果你将这三个位置向左移动，你会得到：

```
00101000 
```

这是40。

# android - OnKeyDown 和 OnBackPressed 组合

> ID：15186459
> 
> 赞同：0
> 
> 时间：2013-03-03T14:01:18.997
> 
> 标签：android

为什么我需要回来`true`工作？它与文档冲突。`onKeyDown()``onBackPressed()`

[文件](http://developer.android.com/reference/android/app/Activity.html#onKeyDown%28int,%20android.view.KeyEvent%29)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T14:40:31.137

我做了一个小实验来证实这一点。

你的权利似乎没有确认文件。

这里使用的代码：

```
@Override
public boolean onKeyDown(int keyCode, KeyEvent event) {
    super.onKeyDown(keyCode, event);
    return true;
}

@Override
public void onBackPressed() {
    Log.w("TEST", "I'm CALLED !");
    super.onBackPressed();
} 
```

当 onKeyDown 返回 false 时，不会调用 onBackPressed。

我们必须注意，如果我们不调用 super.onKeyDown()，则永远不会调用 onBackPressed，所以我想我们必须将其视为： onBackPressed 被称为 onKeyDownCall 的一部分，因此如果 onKeyDown 不应该被触发管理事件（返回 false）。

# tracking - 如何跟踪 PageViewTime

> ID：15186465
> 
> 赞同：0
> 
> 时间：2013-03-03T14:01:42.117
> 
> 标签：tracking, pageviews

如何通过在 JS 中添加标签来跟踪不是我的页面的查看时间？

因为我不能每秒向我的服务器发送请求？

谷歌是如何做到这一点的，在分析中，......

# c# - 如何防止我的应用程序反复启动

> ID：15186470
> 
> 赞同：1
> 
> 时间：2013-03-03T14:02:18.753
> 
> 标签：c#, notifyicon

我正在创建的应用程序包含一个通知图标，它在后台保持活跃（嗯，有点）。问题是当用户点击我的应用程序的图标时，应用程序将再次启动，所以我有两个通知图标和两个后台活动以及两个所有内容。如果用户再次单击该图标，将出现所有这些内容中的三个......所以我应该以某种方式阻止它。我有一种设置标志并将其值设置为注册表的想法，当我的应用程序想要启动时，在表单加载事件中，通过读取值来终止应用程序。但我想要一种更……专业的方式来处理它。例如根本没有启动。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T14:07:58.487

创建您的应用程序创建的某种形式的全局互斥/事件句柄，然后在打开的例程中检查它是否存在，如果存在，则退出启动路由。

在我给出的这个答案中，我有一些基本代码（针对不同的问题），但它演示了您正在尝试做什么。

[Openexisting 全局互斥体上的 UnauthorizedAccessException](https://stackoverflow.com/questions/15129643/unauthorizedaccessexception-on-openexisting-global-mutex/15129693#15129693)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-03T14:13:20.530

这是来自[这个答案，这是](https://stackoverflow.com/questions/7182949/how-to-check-if-a-wpf-application-is-already-running)[这个](https://stackoverflow.com/questions/19147/what-is-the-correct-way-to-create-a-single-instance-application)答案的副本。您在应用程序的入口构造函数中检查应用程序是否已经在运行。

```
static void Main() 
{
    Process currentProcess = Process.GetCurrentProcess();
    var runningProcess = (from process in Process.GetProcesses()
                          where
                            process.Id != currentProcess.Id &&
                            process.ProcessName.Equals(
                              currentProcess.ProcessName,
                              StringComparison.Ordinal)
                          select process).FirstOrDefault();
    if (runningProcess != null)
    {
        ShowWindow(runningProcess.MainWindowHandle, SW_SHOWMAXIMIZED);
       return; 
    }
} 
```

# entity-framework - ASP.NET MVC4 代码优先和单元测试教程/建议

> ID：15186472
> 
> 赞同：1
> 
> 时间：2013-03-03T14:02:22.867
> 
> 标签：entity-framework, asp.net-mvc-4, ef-code-first

**我通常不会在这里寻找每个问题的答案，而是更多指向学习资源的链接，也许还有关于我的一些观点的建议**

我正在尝试在我的一个项目中实施单元测试，但我找不到任何详细*的*教程（最好是视频教程） 。

A- 1\. 我如何将关注点分开到*足以*单独对我的功能进行单元测试？

A- 2\. 我应该最关注什么测试以及我应该在哪里划清界限？

A- 3\. 单个单元测试应该涵盖哪些内容，我应该在什么时候将其分解为 2 个单元测试？

所以我使用 Code First 我已经建立了一个产品模型、控制器和视图：

```
 //
    // GET: /Product/Edit/5

    public ActionResult Edit(int id = 0)
    {
        Product product = db.Products.Find(id);
        if (product == null)
        {
            return HttpNotFound();
        }
        return View(product);
    }

    //
    // POST: /Product/Edit/5

    [HttpPost]
    public ActionResult Edit(Product product)
    {
        if (ModelState.IsValid)
        {
            db.Entry(product).State = EntityState.Modified;
            db.SaveChanges();
            return RedirectToAction("Index");
        }
        return View(product);
    }

    [TestMethod]
    public void TestEditView() {
        // Arrange
        ProductController controller = new ProductController();

        // Act
        ViewResult result = controller.Edit(2) as ViewResult;

        // Assert
        //make sure theres a result
        Assert.IsNotNull(result);
        //make sure it's the right results
        Assert.AreEqual("Edit", result.ViewName);
        //test a dropdownlist exists
        Assert.IsNotNull(result.ViewBag.CategoryID);
    } 
```

B- 1\. 我应该如何测试我的 POST 方法？我应该添加一个额外的数据管理层，以便我可以编写单元测试来单独测试吗？

B- 2\. 我应该更专注于检查返回的视图还是更多地关注数据（例如：如果我有一个 Edit.cshtml 那么它总是会返回（为什么要测试？），返回的数据更重要不是'是吗？还是我的黑匣子更重要？还是我应该涵盖所有 3 个？）

B- 3\. 我应该分解我的单元测试来分别测试视图和数据吗？

同样，有很多问题，但我认为我主要是在寻找示例、教程和方法来尽可能地了解如何使用单元测试（甚至 MVC）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-03T14:40:31.680

我发现这本书 Pro ASP.NET MVC 4 是一个很好的资源。它很好地覆盖了使用 EF 的 MVC 项目上下文中的单元测试。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-03T16:23:48.570

我建议“Unity，通过单元测试进行依赖注入”

更多详情，请访问以下链接

[链接1](http://msdn.microsoft.com/en-us/library/vstudio/hh323690%28v=vs.100%29.aspx)

[链接2](http://www.codeproject.com/Articles/33091/Using-a-Unity-Container-with-Dependency-Injection)

# php - MySQL "FIELD_IN_SET()" 等效于 "joined" 表

> ID：15186478
> 
> 赞同：1
> 
> 时间：2013-03-03T14:03:04.447
> 
> 标签：php, mysql, sql, join

我正在寻找具有连接表的 MySQL“FIELD_IN_SET()”的等价物。这是我想做的一个例子。

我有三张桌子。第一个包含字段“user_id”和“user_name”。第二个包含字段“id”、“user_id”和“role_id”。第三个包含“id”、“role_name”。

我想搜索拥有两个不同指定角色的用户。在 LEFT JOIN 之后，我的表格将如下所示：

```
user_id - user_name          - role_name
12      - Yoda               - jedi
12      - Yoda               - master
15      - Obi-Wan Kenobi     - jedi 
```

第一个问题是：如何搜索既是“绝地”又是“大师”的用户。第二个问题是：在 PHP 端（在数组中获取所有结果并执行一些循环以验证我想要做什么）或直接在 MySQL 查询中执行它是否更好（优化 || 可读性），知道我会必须动态构建查询（它适用于优秀用户数据库中的 PHP/MySQL 搜索引擎）。

谢谢 ：） 。用户1527491

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T14:06:23.460

这个问题叫做`RELATION DIVISION`

```
SELECT  a.user_name
FROM    firstTable a
        INNER JOIN secondTable b
            ON a.user_ID = b.user_ID
        INNER JOIN thirstTable c
            ON b.role_ID = c.role_ID
WHERE   c.role_NAME IN ('jedi', 'master')
GROUP   BY a.user_name
HAVING  COUNT(*) = 2 
```

*   [关系划分的SQL](http://www.simple-talk.com/sql/t-sql-programming/divided-we-stand-the-sql-of-relational-division/)

`role_NAME`如果没有为each 定义唯一约束`user_name`，`DISTINCT`则需要关键字。

```
SELECT  a.user_name
FROM    firstTable a
        INNER JOIN secondTable b
            ON a.user_ID = b.user_ID
        INNER JOIN thirstTable c
            ON b.role_ID = c.role_ID
WHERE   c.role_NAME IN ('jedi', 'master')
GROUP   BY a.user_name
HAVING  COUNT(DISTINCT c.role_NAME) = 2 
```

# c++ - 在 Qt 中使用 mousePressEvent 移动点

> ID：15186480
> 
> 赞同：0
> 
> 时间：2013-03-03T14:03:13.633
> 
> 标签：c++, qt, qt4

我已经实现了 mousePressEvent，这样当你点击一个点时，它就会使那个点变成不同的颜色。谁能告诉我我必须在 mouseMoveEvent 中放入什么以便所选点随鼠标移动？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T14:14:58.583

您应该保留点的坐标并在方法结束时在您的`mousePressEvent`和调用中相应地更新它们。`update()`然后你应该在画图事件中画出你的观点。

# jquery - 插入asp.net mvc 3后如何留在同一个jquery ui选项卡中？

> ID：15186483
> 
> 赞同：0
> 
> 时间：2013-03-03T14:03:33.883
> 
> 标签：jquery, asp.net-mvc-3, jquery-ui, jquery-ui-tabs

我使用了 jquery ui 选项卡效果。我正在尝试将数据插入模型..它工作得很好..我可以插入记录..但我的问题是插入后如何保持在同一个选项卡上？我可以从控制器做吗？我正在尝试在我的 asp.net mvc 3 应用程序中执行此操作

*这是我的标签调用部分：*

```
<script>
    $(function () {
        $("#tabs").tabs();

    });
</script>

<div id="tabs">
<ul>

<li><a href="#tabs-2">Proin dolor</a></li>
<li>@Html.ActionLink("Create Student","CreateStudent")</li>
<li>@Html.ActionLink("Student Details", "StudentDetails")</li>

</ul>
</div> 
```

**这是学生详细信息选项卡：**

```
@model IEnumerable<accordionNtabs.Models.student>

<table>
    <tr>
        <th>
            name
        </th>
        <th>
            birthdate
        </th>
        <th></th>
    </tr>

@foreach (var item in Model) {
    <tr>
        <td>
            @Html.DisplayFor(modelItem => item.name)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.birthdate)
        </td>
        <td>
            @Html.ActionLink("Edit", "Edit", new { id = item.id }, new { id = "privacyLink" }) |
            @Html.ActionLink("Details", "Details", new { id=item.id }) |
            @Html.ActionLink("Delete", "Delete", new { id=item.id }) |

        </td>
    </tr>
}

</table> 
```

*这是在单击编辑链接时呈现的编辑视图：*

@model 手风琴Ntabs.Models.student

@using (Html.BeginForm()) { @Html.ValidationSummary(true) 学生

```
 @Html.HiddenFor(model => model.id)

    <div class="editor-label">
        @Html.LabelFor(model => model.name)
    </div>
    <div class="editor-field">
        @Html.EditorFor(model => model.name)
        @Html.ValidationMessageFor(model => model.name)
    </div>

    <div class="editor-label">
        @Html.LabelFor(model => model.birthdate)
    </div>
    <div class="editor-field">
        @Html.EditorFor(model => model.birthdate)
        @Html.ValidationMessageFor(model => model.birthdate)
    </div>

    <p>
        <input type="submit" value="Save" />
    </p>
</fieldset> 
```

}

@Html.ActionLink("返回列表", "索引")

我希望将编辑视图加载到同一个选项卡上。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-03T14:15:46.817

听起来您正在回发然后页面刷新..没有ajax对吗？在这种情况下，您需要使用隐藏字段或其他东西来记录选择了哪个选项卡，然后当您重新显示表单时，您需要通过 javascript 设置选定的选项卡。请参阅此答案以获取想法...：[使用 URL 中的参数选择 jQuery 选项卡](https://stackoverflow.com/questions/574699/selecting-a-jquery-tab-using-a-parameter-in-the-url)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-09T23:43:34.347

这是 asp.net webforms 通过 viewstate 提供的那种功能。不幸的是，对于 asp.net MVC，开发人员需要通过编写一些代码来解决这个问题。您可以在 cookie 中保持此状态，但请注意用户可能会禁用 cookie。或者，您可以使用 HTML5 Web 存储对象来存储 UI 状态。

# php - 从 mysql_fetch_array 访问 MySQL 字段值

> ID：15186489
> 
> 赞同：-1
> 
> 时间：2013-03-03T14:03:57.063
> 
> 标签：php, javascript, calendar

我编写了一个日历实现，它正在工作，但只显示一组数据，我试图让它出现在我的选择查询中的所有数据：

```
$events = '';
$query = mysql_query('SELECT event_id, event_type, time, date, location, home_or_away, team_id FROM event WHERE date = "'.$deets.'"'); 
$num_rows = mysql_num_rows($query);
if($num_rows > 0) {
$events .= '<div id="eventsControl"><button onMouseDown="overlay()">Close</button><br /><br /><b> ' . $deets . '</b><br /><br /></div>';

while($row = mysql_fetch_array($query)){ 
```

我知道它与此有关，但我不确切知道要获取“event_type”、“time”等的代码

```
$desc = $row['event_id'] ;

$events .= '<div id="eventsBody">' . $desc . '<br /> <hr><br /></div>';
}
}
echo $events;
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T14:20:03.303

您可以将列用作数组中的键。所以要有时间，使用 $row['time'] 等等。

要显示多个数据，请尝试连接

$desc = $row['time'] .$row['event_type']

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T14:09:24.037

你的意思是

```
$time  = $row['time'] 
```

ETC？我不确定我是否明白你的意思

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-03T14:32:53.883

不确定您要做什么，但是如果您要显示所有列，则可以使用 foreach 循环

```
 while($row = mysql_fetch_array($query)){
     foreach($row as $key=>$value)
      {
        echo("<b>$key</b>$value<br/>");
      }
  } 
```

# c# - 添加下拉到下拉

> ID：15186491
> 
> 赞同：1
> 
> 时间：2013-03-03T14:04:09.370
> 
> 标签：c#

我有一个包含在他对象内部的对象，并且我想要 ToolStripMenuItem 中的下拉菜单，这些对象名称的列表，并且对于每个对象，我想显示 2 个值（“开始”，“停止”）（对于每个系统）。

这是对象的样子：

```
new ServiceReference1.CloudSystemEntry{SystemId = 1,SystemName = "ERP 1"},
new ServiceReference1.CloudSystemEntry{SystemId = 2,SystemName = "ERP 2"}, 
```

我做了第一部分：

```
 var systems;
        foreach (var item in systems)
        {
            this.btnsSystemsToolStripMenuItem.DropDownItems.Add(item.SystemName);

        } 
```

现在我想为每个系统名称添加一个带有 2 个选项的下拉列表（字符串“strart”、“stop”）
如何？谢谢 ：）

# video - 如何使用 ffmpeg 合并两个 avi 文件？

> ID：15186500
> 
> 赞同：32
> 
> 时间：2013-03-03T14:05:39.060
> 
> 标签：video, join, merge, ffmpeg, cat

我无法将两个 avi 视频合并在一起。谷歌充满了以下例子：

```
cat file1.avi file2.avi file3.avi > video_draft.avi
after appending the data together using cat above, you need to re-index the draft movie like this:

mencoder video_draft.avi -o video_final.avi -forceidx -ovc copy -oac copy
Now you're video_final.avi file will be right to go. 
```

但这对我不起作用，第一个视频已转换，仅此而已。

* * *

## 回答 #1

> 赞同：65
> 
> 时间：2013-03-03T14:19:43.977

您应该查看在 ffmpeg 1.1 中添加的[concat demux 和 concat 协议](http://ffmpeg.org/trac/ffmpeg/wiki/How%20to%20concatenate%20%28join,%20merge%29%20media%20files)。假设编解码器相同，您将创建一个文件（示例`mylist.txt`）：

```
file '/path/here/file1.avi'
file '/path/here/file2.avi'
file '/path/here/file3.avi' 
```

然后将该文件传递给ffmpeg

```
ffmpeg -f concat -i mylist.txt -c copy video_draft.avi 
```

您可以使用此命令来制作列表：

```
ls *.avi | while read each; do echo "file '$each'" >> mylist.txt; done 
```

链接页面有更高级的示例来处理不同的编解码器/格式等问题。

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2019-12-03T08:38:39.560

您可以使用这个单一的命令行：

```
ffmpeg -i "concat:input1.avi|input2.avi|input3.avi" -c copy output.avi 
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2018-12-06T17:08:29.463

您需要为最新版本的 ffmpeg 添加 -safe 0 ，并且它需要在文件列表之前。

```
ffmpeg -f concat -safe 0 -i mylist.txt ... 
```

# java - 用于循环像素化的 BufferedImage

> ID：15186503
> 
> 赞同：-1
> 
> 时间：2013-03-03T14:06:02.473
> 
> 标签：java, image, image-processing, awt, bufferedimage

如您所见，我正在尝试编写一种方法来像素化缓冲图像。我已经调试了我调用的这个方法中的所有方法，splitARGB 和 combineARGB 都可以正常工作。我有用于存储 splitARGB 值（alpha、reds、greens、blues）的全局变量。我的问题似乎是，当通过内部循环运行时，它不断获得相同的 aRGB 值（起初它们不同，但最终它只是开始吐出相同的值），然后当我在完成后检查图像时，它有 0 个变化。

我有一些其他方法可以完美运行，它们调用相同的方法（splitARGB，combineARGB）并且它们工作正常，所以我做错了。所有帮助表示赞赏。

```
public static BufferedImage pixelate(BufferedImage imgt) {
    //vars
    int tempARGB = 0;
    int avgAlpha = 0;
    int avgRed = 0;
    int avgGreen = 0;
    int avgBlue = 0;
    int interval = 70;

    //every 2 Y pixels, iterate through the X line
    for (int y = 0; y < (imgt.getHeight() - interval); y = y + interval) {
        for (int x = 0; x < (imgt.getWidth() - interval); x = x + interval) {

            //interior pixel group loop
            for (int yloop = 0; yloop < interval; yloop++) {
                for (int xloop = 0; xloop < interval; xloop++) {

                    tempARGB = imgt.getRGB(yloop, xloop);
                    //System.out.println("XLOOP VAL:" + xloop);
                    //System.out.println("YLOOP VAL:" + yloop);
                    //System.out.println("TEMPARGB:" + tempARGB);
                    splitARGB(tempARGB);
                    avgAlpha = avgAlpha + alpha;
                    avgRed = avgRed + reds;
                    avgGreen = avgGreen + greens;
                    avgBlue = avgBlue + blues;
                }
            }
            //Average the values
            avgAlpha = avgAlpha / interval;
            avgRed = avgRed / interval;
            avgGreen = avgGreen / interval;
            avgBlue = avgBlue / interval;
            combineARGB(avgAlpha, avgRed, avgGreen, avgBlue);
            System.out.println("New RGB:" + newRGB);

            //loop again to assign the values
            for (int yloop2 = 0; yloop2 < interval; yloop2++) {
                for (int xloop2 = 0; xloop2 < interval; xloop2++) {
                    imgt.setRGB(xloop2, yloop2, newRGB);
                }
            }
        }
    }
    return imgt;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T19:04:48.257

似乎一个问题可能是在您的内部循环中，您不断检查相同的值 - 也就是说，每次启动该循环时，您都是从 0 开始，因为您**在**循环声明中将 yloop 和 xloop 分配为 0。因此，每次进入此循环时，您只需检查 0 到间隔的值。设置值时也是如此。您应该在所有循环之外分配这些值，这样您就可以在图像中维护您的 (x,y) 索引，而不是遍历同一组。

# java - 检查组合框中的选定项是否已更改java

> ID：15186515
> 
> 赞同：0
> 
> 时间：2013-03-03T14:07:14.687
> 
> 标签：java

在我的程序中，我有几个 JComboBoxes 显示自行车的不同属性。我目前已对其进行了设置，以便用户可以单击名为 saveBike 的按钮并将属性保存到 RandomAccessFile。我为此按钮制作了自己的侦听器并将其添加到 JButton。我的监听器所做的只是打开一个 JFileChooser 并允许用户使用他们选择的名称保存文件。我希望我的程序做的是在用户使用给定名称保存属性后，我希望禁用 saveBike 以便用户无法继续单击它。但是，如果用户通过在 ComboBox 中选择不同的内容来更改其中一个属性，我希望再次启用 saveBike。我以为我可以将此代码放在侦听器中，但我不知道如何查看组合框中是否选择了某个项目。我的问题是，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T14:44:46.890

这个例子解释了如何使用 an`ItemListener`检查一个项目何时被选中，如果是则启用一个按钮。

```
public static void main(String[] args) 
    {
            //elements to be shown in the combo box
        String course[] = {"", "A", "B", "C"};

        JFrame frame = new JFrame("Creating a JComboBox Component");
        JPanel panel = new JPanel();

        JComboBox combo = new JComboBox(course);

        final JButton button = new JButton("Save");
        panel.add(combo);
        panel.add(button);

            //disables the button at the start
        button.setEnabled(false);
        frame.add(panel);

        combo.addItemListener(new ItemListener() {
            public void itemStateChanged(ItemEvent ie) {
                            //enables the button when an item is selected
                button.setEnabled(true);
            }
        });

        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.setSize(400, 400);
        frame.setVisible(true);
    } 
```

# java - Android HTTP POST 下载管理器

> ID：15186516
> 
> 赞同：4
> 
> 时间：2013-03-03T14:07:15.277
> 
> 标签：java, android, download

在 android 中，我有这个 URL，我必须向该 URL 执行 POST 请求，所述请求的返回输入流返回一个可下载的对象......我如何使用 Android Downloadmanager 本身或自定义创建的一个来为我处理下载过程?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T15:23:29.237

[http://ootooban.com/en/2012/custom-download-manager-for-android-2-1-part2-resumable-downloads/](http://ootooban.com/en/2012/custom-download-manager-for-android-2-1-part2-resumable-downloads/)

在发布请求之上创建自己的通知，结合 setProgress() 和进度条就可以了，所以遗憾的是，没有决定性的方法来使用 DownloadManager

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T14:10:59.570

android 的下载管理器非常简单：

```
DownloadManager dm = (DownloadManager) getSystemService(DOWNLOAD_SERVICE);
Request request = new Request(Uri.parse("http://www.theeUrl.fake/image.png"));
enqueue = dm.enqueue(request); 
```

您可以轻松地将参数添加为 GET 请求。我不知道您是否可以从中发出 POST 请求。

编辑：要发出帖子请求，您可以使用这样的 HttpClient ：

```
HttpClient client = new DefaultHttpClient();
HttpPost post = new HttpPost(url);
HttpResponse response = null;
Dictionary<String, String> postFields = new Dictionary<String, String>();  

// Set the post fields
postFields.add("username","toto")));
postFields.add("password", "thePassword45155")));
post.setEntity(new UrlEncodedFormEntity(postFields, HTTP.UTF_8));

// Execute the POST request
response = client.execute(post); 
```

您应该能够从 httpResponse 获取输入流来下载文件。但是您必须自己管理显示/通知/取消……。

# jquery - 3 deep jquery ul list - 只希望在第一次点击时显示第二个 ul

> ID：15186517
> 
> 赞同：0
> 
> 时间：2013-03-03T14:07:15.457
> 
> 标签：jquery

我有一个三深的 ul 列表。单击顶部 ul 时，我只希望显示第二个 ul。然后当点击第二个 ul 时，应该显示第三个。现在发生的是当第一个 ul 被点击时，所有 ul 都在下面显示。我怎样才能让它正常工作？

代码：

```
jQuery(document).ready(function () {
  jQuery('.list-year').addClass('list-year-left');
  jQuery('.list-year').on('click',(function() { 
    jQuery('.list-year').toggleClass('list-year-down');
    jQuery('.list-month').toggle();  
  }));

}); 
```

我有一个 js fiddle 链接：http: [//jsfiddle.net/7xbjr/4/](http://jsfiddle.net/7xbjr/4/) 非常感谢任何帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T14:14:27.067

的类`<li>`is `list-post`，但您已将其定义`list-posts`为不匹配。

```
.list-posts {
  display: none;
} 
```

应该成为

```
.list-post {
  display: none;
} 
```

此外，click 事件应该绑定到`<li>`元素而不是`<ul>`. 请注意，如果您在children元素中绑定click事件，建议停止事件传播，否则click事件会传播到parent的click事件。

这是JavaScript

```
jQuery(document).ready(function () {
    jQuery('.list-year').addClass('list-year-left');
    jQuery('.list-year > li').on('click', function() { 
        jQuery('.list-year').toggleClass('list-year-down');
        jQuery('.list-month').toggle(); 
    });

    jQuery('.list-month > li').on('click',function(e) {
        e.stopPropagation(); // add this for avoiding click event propagate to parent 
        jQuery('.list-post').toggle(); 
    });
}); 
```

jsfiddle：http: [//jsfiddle.net/BMc43/2/](http://jsfiddle.net/BMc43/2/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T14:14:35.830

您的代码可能会更整洁，但是您可以在这里[http://jsfiddle.net/BMc43/3/](http://jsfiddle.net/BMc43/3/)：

```
jQuery(document).ready(function () {
    jQuery('.list-year').addClass('list-year-left');
    jQuery('.list-year').on('click',(function() { 
        jQuery('.list-year').toggleClass('list-year-down');
        jQuery('.list-month').toggle(); 
    }));

    jQuery('.list-month').on('click',(function(e) {
        e.stopPropagation();
        jQuery('.list-post').toggle(); 
    }));
}); 
```

当然，正如 Derek 所说，您必须更改`.list-posts`为CSS。`.list-post`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-03T14:16:44.733

以下事情是错误的：

*   您有一个班级列表帖子，您将其称为列表帖子。
*   每当您单击子节点时都会触发您的单击事件，再次触发切换并关闭菜单。
*   您需要为第三级菜单添加一个额外的点击事件

[http://jsfiddle.net/7xbjr/5/](http://jsfiddle.net/7xbjr/5/) 这是一个更新的小提琴，它可以工作

```
jQuery(document).ready(function () {
 jQuery('.list-year').addClass('list-year-left');
  jQuery('.list-year > li').on('click',function() { 
    jQuery('.list-year').toggleClass('list-year-down');
    jQuery('.list-month').toggle();  
  });
  jQuery('.list-month > li').on('click',function() { 
    jQuery('.list-post').toggle();  
  });
}); 
```

# scala - scala - 泛型中的任何与下划线

> ID：15186520
> 
> 赞同：80
> 
> 时间：2013-03-03T14:07:32.683
> 
> 标签：scala, generics, covariance, any, existential-type

Scala中的以下泛型定义有什么不同：

```
class Foo[T <: List[_]] 
```

和

```
class Bar[T <: List[Any]] 
```

我的直觉告诉我它们大致相同，但后者更明确。我发现前者编译但后者没有编译的情况，但我无法确定确切的区别。

谢谢！

**编辑：**

我可以再加入一个吗？

```
class Baz[T <: List[_ <: Any]] 
```

* * *

## 回答 #1

> 赞同：106
> 
> 时间：2013-03-04T14:42:59.237

好吧，我想我应该接受它，而不是仅仅发表评论。抱歉，这会很长，如果您希望 TL;DR 跳到最后。

正如 Randall Schulz 所说，这里`_`是存在类型的简写。即，

```
class Foo[T <: List[_]] 
```

是的简写

```
class Foo[T <: List[Z] forSome { type Z }] 
```

请注意，与 Randall Shulz 的回答所提到的相反（完全披露：我在这篇文章的早期版本中也弄错了，感谢 Jesper Nordenberg 指出）这与以下内容不同：

```
class Foo[T <: List[Z]] forSome { type Z } 
```

也不等同于：

```
class Foo[T <: List[Z forSome { type Z }]] 
```

当心，很容易弄错（正如我之前的傻瓜所示）：Randall Shulz 的回答所引用的文章的作者自己弄错了（见评论），后来修复了。我对这篇文章的主要问题是，在显示的示例中，存在主义的使用本应使我们免于打字问题，但事实并非如此。去检查代码，然后尝试编译`compileAndRun(helloWorldVM("Test"))`或`compileAndRun(intVM(42))`. 是的，不编译。简单地制作`compileAndRun`泛型`A`会使代码编译，而且会简单得多。简而言之，这可能不是了解存在主义及其好处的最佳文章（作者本人在评论中承认该文章“需要整理”）。

所以我宁愿推荐阅读这篇文章：[http](http://www.artima.com/scalazine/articles/scalas_type_system.html) ://www.artima.com/scalazine/articles/scalas_type_system.html ，特别是名为“Existential types”和“Variance in Java and Scala”的部分。

您应该从本文中得到的重要一点是，在处理非协变类型时，存在函数很有用（除了能够处理泛型 java 类之外）。这是一个例子。

```
case class Greets[T]( private val name: T ) {
  def hello() { println("Hello " + name) }
  def getName: T = name
} 
```

这个类是通用的（注意它是不变的），但我们可以看到它`hello`真的没有使用类型参数（不像`getName`），所以如果我得到一个实例，`Greets`我应该总是能够调用它，无论如何`T`是。如果我想定义一个接受一个`Greets`实例并调用它的方法的`hello`方法，我可以试试这个：

```
def sayHi1( g: Greets[T] ) { g.hello() } // Does not compile 
```

果然，这不会编译，因为`T`这里无处不在。

好的，那么，让我们将方法设为通用：

```
def sayHi2[T]( g: Greets[T] ) { g.hello() }
sayHi2( Greets("John"))
sayHi2( Greets('Jack)) 
```

太好了，这行得通。我们也可以在这里使用existentials：

```
def sayHi3( g: Greets[_] ) { g.hello() }
sayHi3( Greets("John"))
sayHi3( Greets('Jack)) 
```

也可以。所以总而言之，在这里使用存在（如`sayHi3`）而不是类型参数（如`sayHi2`）并没有真正的好处。

但是，如果`Greets`它本身作为另一个泛型类的类型参数出现，则会发生变化。举例来说，我们想在一个列表中存储`Greets`(with different ) 的几个实例。`T`让我们尝试一下：

```
val greets1: Greets[String] = Greets("John")
val greets2: Greets[Symbol] = Greets('Jack)
val greetsList1: List[Greets[Any]] = List( greets1, greets2 ) // Does not compile 
```

最后一行无法编译，因为`Greets`它是不变的，因此 a`Greets[String]`和`Greets[Symbol]`不能被视为 a`Greets[Any]`即使`String`和`Symbol`都 extends `Any`。

好的，让我们尝试使用简写符号`_`：

```
val greetsList2: List[Greets[_]] = List( greets1, greets2 ) // Compiles fine, yeah 
```

这编译得很好，你可以按预期做：

```
greetsSet foreach (_.hello) 
```

现在，请记住，我们首先遇到类型检查问题的原因是因为`Greets`它是不变的。如果它变成一个协变类 ( `class Greets[+T]`)，那么一切都会开箱即用，我们将永远不需要存在主义。

* * *

总而言之，existentials 对于处理泛型不变类很有用，但是如果泛型类不需要将自身作为类型参数出现在另一个泛型类中，那么您可能不需要存在主义并且只需添加一个类型参数你的方法会起作用

现在回来（终于，我知道了！）你的具体问题，关于

```
class Foo[T <: List[_]] 
```

因为`List`是协变的，所以这与刚才说的所有意图和目的相同：

```
class Foo[T <: List[Any]] 
```

所以在这种情况下，使用任何一种表示法实际上只是风格问题。

但是，如果您替换`List`为`Set`，情况会发生变化：

```
class Foo[T <: Set[_]] 
```

`Set``Greets`是不变的，因此我们与我的示例中的类处于相同的情况。因此，上述内容确实与

```
class Foo[T <: Set[Any]] 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-03-03T14:43:57.487

当代码不需要知道类型是什么或对其进行约束时，前者是存在类型的简写：

```
class Foo[T <: List[Z forSome { type Z }]] 
```

此表单表示 of 的元素类型`List`是未知的，`class Foo`而不是您的第二种形式，后者明确表示`List`的元素类型为`Any`。

查看这篇关于 Scala 中存在类型的简短解释性[博客文章（](http://www.cakesolutions.net/teamblogs/2012/09/03/existential-types/)**编辑**：此链接现已失效，可在[archive.org](https://web.archive.org/web/20170901215553/http://www.cakesolutions.net/teamblogs/2012/09/03/existential-types/)上获得快照）

# php - 安全验证码图像未在 000webhost 中显示

> ID：15186524
> 
> 赞同：-1
> 
> 时间：2013-03-03T14:09:06.603
> 
> 标签：php

我已在 000webhost 上上传了我的网站，但在我的注册表单中，安全验证码图像在我的本地主机中显示时未显示。

我的验证码是：

```
<?php
include_once('includes/session.php');
$_SESSION['secure']=rand(1000,9999);
header('content-type:image/jpeg');
$text=$_SESSION['secure'];
$font_size=25;
$image_width=200;
$image_height=40;
$image=imagecreate($image_width,$image_height);
imagecolorallocate($image,255,255,255);
$text_color=imagecolorallocate($image,0,0,0);
for($x=1;$x<=40;$x++)
{$x1=rand(1,120);
$x2=rand(1,120);
$y1=rand(1,120);
$y2=rand(1,120);
imageline($image,$x1,$y1,$x2,$y2,$text_color);    
}
imagettftext($image,$font_size,0,15,30,$text_color,'MAGNETOB.TTF',$text);
imagejpeg($image);
?> 
```

我将验证码显示为：

```
<img src="captcha1.php" id="captcha" /> 
```

我的代码有什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T14:57:46.067

您是否激活了 GD 扩展程序？

# c++ - 使用自定义类提升变体

> ID：15186527
> 
> 赞同：2
> 
> 时间：2013-03-03T14:09:24.453
> 
> 标签：c++, boost-variant

我正在尝试`boost-variant`自定义类。我知道访问课程内容的一种安全方法是使用`boost::static_visitor`. 你知道为什么下面的代码不能编译吗？对使用的签名/声明是否有任何要求`boost::static_visitor`？

我发现了这个问题[Why can't I visit this custom type with boost::variant?](https://stackoverflow.com/questions/5737826/why-cant-i-visit-this-custom-type-with-boostvariant?rq=1) 但我没明白。

问候

AFG

```
#include <iostream>
#include <algorithm>
#include <boost/variant.hpp>

struct CA{};

struct ca_visitor : public boost::static_visitor<CA>
{
    const CA& operator()(const CA& obj ) const { return obj;}
};

struct CB{};

struct cb_visitor : public boost::static_visitor<CB>
{
    const CB& operator()(const CB& obj) const { return obj;}
};

int main(){   
    typedef  boost::variant< 
        CA  
        ,CB >  v_type;

    v_type v;
    const CA& a = boost::apply_visitor( ca_visitor(), v );
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-03T14:22:27.750

首先，模板参数`boost::static_visitor<>`应该指定调用操作符返回的类型。在您的情况下，`ca_visitor`' 调用运算符返回 a `CA const&`，而不是 a `CA`。

但这不是最大的问题。最大的问题是您似乎对如何`variant<>`以及`static_visitor<>`应该如何工作存在误解。

a 的想法`boost::variant<>`是它可以保存您在模板参数列表中指定的*任何类型的值。*您不知道该类型是什么，因此您为访问者提供了几个重载的调用运算符来处理每种可能的情况。

因此，当您提供访问者时，您需要确保它具有接受您可以持有`operator()`的类型的所有必要重载。`variant`如果你不这样做，Boost.Variant 会导致生成一个编译错误（这是在帮你一个忙，因为你忘了处理某些情况）。

这是您面临的问题：您的访问者没有接受类型对象的呼叫操作员`CB`。

这是一个正确使用`boost::variant<>`and的例子`static_visitor<>`：

```
#include <iostream>
#include <algorithm>
#include <boost/variant.hpp>

struct A{};
struct B{};

struct my_visitor : public boost::static_visitor<bool>
//                                               ^^^^
//                                               This must be the same as the
//                                               return type of your call 
//                                               operators
{
    bool operator() (const A& obj ) const { return true; }
    bool operator() (const B& obj) const { return false; }
};

int main()
{
    A a;
    B b;
    my_visitor mv;

    typedef boost::variant<A, B> v_type;

    v_type v = a;

    bool res = v.apply_visitor(mv);
    std::cout << res; // Should print 1

    v = b;

    res = v.apply_visitor(mv);
    std::cout << res; // Should print 0
} 
```

# c# - 从下拉列表中动态填充表名并在 Gridview 中显示

> ID：15186531
> 
> 赞同：1
> 
> 时间：2013-03-03T14:10:02.180
> 
> 标签：c#, asp.net

我正在创建一个包含一个 Dropdownlist 和 Gridview 的网页。

Query is Dropdownlist 将包含 SQL Server 数据库表列表。当我从下拉列表中选择表名时，Gridview 需要显示整个表数据并能够执行编辑、更新、删除、取消操作。

当我单击编辑时，Gridview 需要显示更新和取消按钮，它更新应该更新下拉列表表并删除。

我的代码看起来是这样的：

**网页：**

```
<%@ Page Language="C#" AutoEventWireup="true" CodeBehind="Default.aspx.cs" Inherits="DataGridView_Sample._Default" %>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" >
<head runat="server">
    <title>Untitled Page</title>
    <style type="text/css">
        .style1
        {
            font-weight: bold;
            text-decoration: underline;
            font-size: x-large;
            text-align: center;
        }
    </style>
</head>
<body>
    <form id="form1" runat="server">
    <div>

        <h5 class="style1">
            Data Grid View Sample</h5>

    </div>
    <asp:DropDownList ID="DropDownList1" runat="server" AutoPostBack="true" 
    onselectedindexchanged="DropDownList1_SelectedIndexChanged">
         <asp:ListItem Text="-- Select --" Value=""></asp:ListItem>
        <asp:ListItem Text="Emp" Value="Emp"></asp:ListItem>
        <asp:ListItem Text="Dept" Value="Dept"></asp:ListItem>
    </asp:DropDownList>

    <br />
    <br />
    <b>Grid View:</b>
    <br />
    <br />

    <asp:GridView ID="GridView1" runat="server" Height="181px" 
        onrowediting="GridView1_RowEditing" onrowupdating="GridView1_RowUpdating" 
        Width="518px">
        <Columns>
            <asp:CommandField ButtonType="Button" ShowEditButton="True" />
        </Columns>
        <EmptyDataTemplate>
            &nbsp;
        </EmptyDataTemplate>
    </asp:GridView>
    </form>

</body>
</html> 
```

**.aspx 页面代码：**

```
namespace DataGridView_Sample
{
    public partial class _Default : System.Web.UI.Page
    {
        SqlConnection con = new SqlConnection("Data Source=SHINY-PC\\SQLEXPRESS;Initial Catalog=NRK;Integrated Security=True");
        SqlCommand cmd = new SqlCommand();
        SqlDataAdapter da = new SqlDataAdapter();
        DataTable dt = new DataTable();
        DataSet ds = new DataSet();

        protected void Page_Load(object sender, EventArgs e)
        {
            if (!Page.IsPostBack)
            {
                con.Open();
                cmd = new SqlCommand("Select name from sys.tables order by name", con);
                da = new SqlDataAdapter(cmd);
                da.Fill(ds);
                DropDownList1.DataSource = ds;
                DropDownList1.DataTextField = "name";
                DropDownList1.DataValueField = "name";
                DropDownList1.DataBind();
                DropDownList1.Items.Insert(0, new ListItem("--Select--", "--Select--"));
            }
        }

        protected void DropDownList1_SelectedIndexChanged(object sender, EventArgs e)
        {
            if (DropDownList1.SelectedIndex != 0)
            {
                cmd = new SqlCommand("select * from " + DropDownList1.SelectedItem.Value, con);
                con.Open();
                da = new SqlDataAdapter(cmd);
                da.Fill(dt);
                GridView1.DataSource = dt;
                GridView1.DataBind();
                con.Close();
            }
        }

        protected void GridView1_RowEditing(object sender, GridViewEditEventArgs e)
        {
            cmd = new SqlCommand("select * from " + DropDownList1.SelectedItem.Value, con);
            con.Open();
            da = new SqlDataAdapter(cmd);
            da.Fill(dt);
            GridView1.EditIndex = Convert.ToInt16(e.NewEditIndex);
            GridView1.DataSource = dt;
            GridView1.DataBind();
            con.Close();
        }

        protected void GridView1_RowUpdating(object sender, GridViewUpdateEventArgs e)
        {
        }

        protected void GridView1_RowCancelingEdit(object sender, GridViewCancelEditEventArgs e)
        {
        }
    }
} 
```

请任何人都可以提供帮助。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T15:27:58.013

鉴于上述情况，我将创建一个包含两个字段的数据库表：表名和列名。将有 4 行 tablename = emp ，每行将有一个 columnname = emp 表中的列之一。同样，将有 6 行其中 tablename = dept 并且每行将有一个 columnname = dept 表中的列之一。然后，在您的 GridView1_RowUpdating 事件中，您可以根据在 DropDownList 中选择的表从数据库中提取列的名称，并使用您为该表准备的任何存储过程进行相应的更新。在 GridView1_RowCancelingEdit 中，您只需要做

```
GridView1.EditIndex = -1; 
```

并重新绑定你的数据（你需要一个方法）你就完成了。

# java - 具有初始值的休眠自动 ID 生成

> ID：15186534
> 
> 赞同：1
> 
> 时间：2013-03-03T14:10:16.990
> 
> 标签：java, spring, hibernate, generator

是否可以在 Spring Hibernate（连接到 MySQL 数据库）中使用自动 id 生成器而无需专用序列表，例如

```
@Id
@GeneratedValue(strategy = GenerationType.AUTO)
@Column(name = "id")
private Long id; 
```

但是为 id 指定一个初始值？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-03T14:15:01.330

从[休眠文档](http://docs.jboss.org/hibernate/orm/4.1/manual/en-US/html_single/#mapping-declaration-id)：

> AUTO：根据底层数据库的能力选择 IDENTITY、SEQUENCE 或 TABLE。

所以初始值是所选生成器的默认初始值。例如，在`IDENTITY`生成器的情况下，它是`auto_increment_value`表的主键列。

# c# - 在图像中查找文本的位置

> ID：15186535
> 
> 赞同：2
> 
> 时间：2013-03-03T14:10:37.980
> 
> 标签：c#

在我的应用程序中，我正在检查各种网站并确保这些网站已启动并在它们关闭时发送电子邮件通知。

当他们下来时，我的程序会捕捉浏览器并将其发送给支持人员。

问题是我发送的图像中显示了 CardNumber（如用户名）。我找到了一种从固定坐标处的任何图像中删除矩形部分的方法。但问题是，对于不同的网站，CardNumber 出现在不同的地方。

是否有任何可用的 DLL 可以让我知道字符串 CardNumber 出现在图像中的位置并给我它的 X、Y 坐标。

# networking - 花边头问题

> ID：15186540
> 
> 赞同：0
> 
> 时间：2013-03-03T14:11:21.787
> 
> 标签：networking, protocols, liblacewing

我无法解决 Lacewing 标头订单。要发送的第一条消息如下：

```
0
0
11 //lenght
0
.. 
```

而名称设置请求是：

```
0
4 // lenght
1 // should be the type according to spec (1 for name setting request)
.. 
```

这些消息的长度以不同的字节存储，请求的类型也是如此。也许我有不正确的文档，但这些消息是我收到的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T16:24:01.327

来自协议规范： [https ://github.com/udp/lacewing/blob/0.2.x/relay/current_spec.txt](https://github.com/udp/lacewing/blob/0.2.x/relay/current_spec.txt)

> 一旦建立了 TCP 连接，客户端应该发送一个单字节 0 来将自己标识为非 HTTP 客户端。在此之后，他们可能会开始交换消息，其中 Connect 请求应该是第一个。

在初始连接时，非 HTTP 客户端发送字节 0。这不是消息的一部分 - 第一个实际协议消息在此之后出现。

> ```
> 0
> 0
> 11 //lenght
> 0
> .. 
> ```

第一个 0 是“我不是 HTTP 客户端”标识符。其余的是实际消息：0 是类型，它由变体和请求类型类型组成。11 是消息的长度，0 是实际的“我可以连接”。

> ```
> 0
> 4 // lenght
> 1 // should be the type according to spec (1 for name setting request)
> .. 
> ```

同样，0 是类型，由变体和请求类型组成。4 又是长度，1 是对 Set Name 的请求。

连接时的初始 0 是协议的一个令人困惑的方面，因为它在一个奇怪的地方被提及，但仍然被提及。

开发论坛中的相关主题：http: [//community.clickteam.com/threads/79449-Lacewing-message-headers](http://community.clickteam.com/threads/79449-Lacewing-message-headers)

# java - 如何在读取/写入文件时克服硬件限制。

> ID：15186541
> 
> 赞同：3
> 
> 时间：2013-03-03T14:11:41.753
> 
> 标签：java, file, file-io, filestream, bufferedreader

我最近在一次采访中被问到这个问题。

> 给定一个输入文件、一个正则表达式和一个输出文件。读取输入文件，将每一行与正则表达式匹配，并将匹配的行写入输出文件。

我想出了使用链接到 FileReader 的 BufferedReader 的粗略方案（以优化从磁盘读取）。我使用了类似的写作方案。

> 面试官接着说，这个过程需要 3 秒从文件中读取一行，1 秒将正则表达式与该行进行比较，另外 5 秒写回。所以每行总共需要9秒。我们该怎样改进这个？

我建议一次读取整个文件，处理它并立即写入整个输出文件。但是，有人告诉我这无济于事（写 1 行 = 5 秒，写 2 行 = 10 秒）。

> 面试官进一步表示，这是由于硬件/硬盘驱动器的限制。有人问我如何改进我的代码以减少每行的总秒数（当前为 9 ）？

我只能想到缓冲的读/写，也找不到太多关于 SO 的内容。有什么想法吗 ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-03T14:22:08.653

我认为面试官正在寻找一种在写入输出的同时执行读取/正则表达式检查的解决方案。如果您设置一个通过读取和过滤异步填充的工作队列，并将写入放在一个单独的线程中，那么从第二行开始，每行合并的过程需要 5 秒。

这里的假设是读取、解析和写入可以相互独立地发生。在这种情况下，您可以在编写第 1 行的同时阅读第 2 行：您只需要四秒钟来读取和应用您的正则表达式，并且在编写器准备好第二行之前您有整整五秒钟的时间。写作仍然是你的瓶颈，但整个过程加快了大约 44%，这还不错。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T14:24:23.867

好吧，既然读取的时间是固定的，而写入的时间是固定的，那么在这种情况下，您唯一的选择就是更改正则表达式位的性质。

您可以编写代码来快速应用正则表达式测试，而无需正则表达式可以做的所有聪明事情的开销。

另一方面，如果问题是每个 IO 请求需要几秒钟才能执行，但限制不是实际驱动器，那么让多个读取器同时读取。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-03T14:24:27.613

棘手的问题，因为我们对系统知之甚少。

我的猜测是使用线程/异步处理。使用一个 Thread 读取，一个处理两个或多个进行写入，从而减少 IO Wait 所花费的时间。

让我尝试将其转换为 ASCII 图表：

*   R/r 表示读数（3 秒）
*   P/p 表示处理（1 秒）
*   W/w 表示写作（5 秒）

大写字母标记开始，小写字母标记继续工作。“：”表示线程空闲

```
Thread 1: RrrRrrRrrRrrRr
Thread 2: ...P..P..P..P.
Thread 3: ....Wwwww
Thread 4: .......Wwwww 
```

使用此设置，第一批在 9 秒后被写回（这里没什么可做的），但第二批在 12 秒后完成。单线程第二个总共需要 18 秒

# c# - 返回 Gridview Checkbox 布尔值

> ID：15186546
> 
> 赞同：1
> 
> 时间：2013-03-03T14:12:00.007
> 
> 标签：c#, asp.net, gridview

我绞尽脑汁尝试访问用户选择复选框的网格视图的 ID 列：

```
<asp:GridView ID="gvUserFiles" runat="server">
            <Columns>
            <asp:TemplateField HeaderText="Select" ItemStyle-HorizontalAlign="Center" >
                <ItemTemplate>
                    <asp:CheckBox  ID="chkSelect" runat="server" />
                </ItemTemplate>
            </asp:TemplateField>
            </Columns>
        </asp:GridView> 
```

gridview 列是 chkSelect（复选框）、Id、fileName、CreateDate

当用户选中复选框并按下按钮时，我想接收“id”列值。

这是我的按钮代码：

```
foreach (GridViewRow row in gvUserFiles.Rows)
            {
                var test1 = row.Cells[0].FindControl("chkSelect");
                CheckBox cb = (CheckBox)(row.Cells[0].FindControl("chkSelect"));
                //chk = (CheckBox)(rowItem.Cells[0].FindControl("chk1"));  
                if (cb != null && cb.Checked)
                {
                    bool test = true;

                }
            } 
```

cb.checked 总是返回 false。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-03T14:33:03.277

始终未选中的复选框可能是 DataBinding 的问题。确保在`GridView`调用按钮单击事件之前没有 DataBinding。有时人们将 DataBinding 粘贴在`Page_load`事件上，然后将 DataBinding 保留在每个`PostBack`. 因为它在按钮点击之前被调用，它可以产生直接的影响。当`GridView`is DataBound 时，您将丢失来自页面的所有状态。

如果您在`GridView`上进行数据绑定，请将其`Page_load`包装起来以验证`!IsPostBack`：

```
if (!IsPostBack)
{
    gvUserFiles.DataSource = data;
    gvUserFiles.DataBind();
} 
```

如果这不是您的情况，您可以尝试根据`Request.Form`值验证选中的属性：

```
protected void button_OnClick(object sender, EventArgs e)
{
    foreach (GridViewRow row in gvUserFiles.Rows)
    {
        CheckBox cb = (CheckBox)row.FindControl("chkSelect");

        if (cb != null)
        {
            bool ckbChecked = Request.Form[cb.UniqueID] == "on";

            if (ckbChecked)
            {
                //do stuff
            }
        }
    }
} 
```

a的`Checked`值`CheckBox`由浏览器作为 value 发送`"on"`。如果没有在浏览器中检查它，那么请求就不会发生任何事情。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-03T14:26:52.093

您可以像这样使用 datakey 来实现它

将 Datakey 添加到您的网格视图

```
<asp:GridView ID="gvUserFiles" runat="server" DataKeyNames="Id"> 
```

并像这样获得服务器端

```
string value = Convert.ToString(this.gvUserFiles.DataKeys[rowIndex]["Id"]); 
```

# sql - 如何：通过 C# 获取合并复制状态

> ID：15186548
> 
> 赞同：0
> 
> 时间：2013-03-03T14:12:12.120
> 
> 标签：sql, sql-server

我正在处理的项目使用合并复制，效果很好。在幕后，我使用了一项服务来删除客户端数据库并获取新记录直到特定标记并检查服务器连接。

我目前面临的挑战是，当服务在停止后进入启动模式时，它会自动执行它应该做的事情。我无法暂停我的服务，因为我无法获得合并复制的状态。

我拥有/可以从客户端采取的步骤选项是

1.  如果 MergeReplication 状态正在运行，请停止执行我的函数。
2.  从我的 C# 代码强制同步合并复制。

***但是，我不知道如何获取 Merger Replication 的状态。***

我确实浏览了 StackOverFlow 上的几个链接，但没有得到 +ve 的结果。我被这个问题困住了。

*   [如何通过 T-SQL 检查 SQL 复制状态？](https://stackoverflow.com/questions/220340/how-do-i-check-sql-replication-status-via-t-sql)
*   [如何检查合并复制是否真的完成](https://stackoverflow.com/questions/10103042/how-to-check-if-merge-replication-is-really-complete-or-not)
*   [如何从代码中获取复制状态](https://stackoverflow.com/questions/5194692/how-to-get-replication-status-from-code)

另一个问题是 - 当新数据从服务器推送到 Sql Express 时，在 Sql Express 中满足 5GB 数据标记后会发生什么。按照先进先出的方法填充，自动删除最先进来的数据，然后用推送的服务器上的新数据自己开始填充？

希望得到一些+ve的答案。

[编辑：标题更正]

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T06:31:33.347

有关如何使用 C# 中的复制管理对象以编程方式同步合并订阅的说明，请参阅[如何：同步推送订阅（RMO 编程）](http://msdn.microsoft.com/en-us/library/ms146910.aspx)和[如何：同步拉取订阅（RMO 编程）](http://msdn.microsoft.com/en-us/library/ms147890.aspx)。

这将使您能够按需同步订阅并处理状态事件以检查合并代理进度。

# java - 为什么 android.database.SQLException 未选中？

> ID：15186549
> 
> 赞同：4
> 
> 时间：2013-03-03T14:12:16.740
> 
> 标签：java, android, sqlexception

这可能不适合 SO，因为它不是真正的编码问题，但我还找不到令人满意的答案，我相信 SO 社区可以。

因此，根据定义，[android.database.SQLException](http://developer.android.com/reference/android/database/SQLException.html)和[java.sql.SQLException](http://docs.oracle.com/javase/6/docs/api/java/sql/SQLException.html)共享相同的应用范围，即在访问/修改数据库时提供有关错误的信息。尽管我在某处读到过检查异常已“退出”，但我真的很喜欢这样一个事实，即当您使用`throws`关键字检查异常时，编译器会提醒您处理异常。不幸的是，这不适用于未经检查的异常。

我的问题是：为什么谷歌在`android.database.SQLException`检查时`java.sql.SQLException`不检查？我错过了什么吗？它们的差异比我想象的要大吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-03T14:53:03.430

在检查或未检查异常之间进行选择总是有点主观：

*   如果异常表示错误或某些“可能无法恢复”的故障，那么未经检查的异常是合适的。

*   如果异常指示“可能可恢复”的故障，则检查异常是合适的。

在这种情况下，有很多子类的一般例外情况会更加困难。其中一些子类*可能是*错误，也*可能是*可恢复的。此时，设计人员必须对不同情况的相对可能性做出价值判断……跨越所有已知/预测的异常子类型。

在这种情况下，Sun 和 Google 的工程师得出了不同的结论。但请注意，Google 工程师拥有 Sun 工程师所没有的巨大优势。他们可以查看 Java 设计，并自行判断它与已检查的`SQLException`.

* * *

> 尽管我在某处读过检查的异常已“出局”...

有很多开发人员希望所有 Java 异常都未检查，这样他们就不必被迫处理它们。还有很多其他开发人员仍然认为 Java 在检查异常方面是正确的……即使在少数情况下做出了错误的选择（事后看来）。

这是值得商榷的。

> 我错过了什么吗？它们的差异比我想象的要大吗？

并不真地。这两个异常层次结构的用途几乎相同……尽管 javadoc 类描述存在差异。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-03T14:21:12.253

`android.database.SQLException`是基于[`java.lang.RuntimeException`](http://docs.oracle.com/javase/7/docs/api/java/lang/RuntimeException.html "运行时异常")并且不需要检查，但`java.sql.SQLException`不是。

在[Unchecked Exceptions — The Controversy](http://docs.oracle.com/javase/tutorial/essential/exceptions/runtime.html "未经检查的例外——争议")有一个简单的解释。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-03T14:19:09.007

我认为在许多情况下，未经检查的异常比检查的异常更喜欢。原因是您不会*被迫*以任何方式抓住它。如果你认为有必要，你可以在你的代码中加上一个`try-catch`子句，但你不是必须的。这有效地使您的代码更好，因为程序员可以决定要做什么。

在您的示例中，**没有特别的原因**为什么必须成功`checked`或不成功。这是一个设计问题，我认为谷歌在`android.database.SQLException`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-03T14:19:37.237

我认为是这样的原因是：

> android.database.SQLException ：表示 SQL 解析或执行出错的异常。

和

> java.sql.SQLException ：提供有关数据库访问错误或其他错误的信息的异常。

因此，很明显这`android.database.SQLException`很可能是`RuntimeException`因为它发生在 SQL 解析或执行出错时。而，`java.sql.SQLException`是由于数据库访问错误或其他此类错误导致的异常，因此足以将其保留为已检查异常。每当您使用开放连接或任何类似的东西时，最好将它们放在检查异常的保护伞下。

# flash - Adobe Schockwave 的未来

> ID：15186550
> 
> 赞同：-1
> 
> 时间：2013-03-03T14:12:17.723
> 
> 标签：flash, adobe, shockwave

Adobe Flash 正在衰退，我知道。但是在 Adob​​e Shockwave 播放器中开发的内容，该内容的未来是什么。我想开发一个 3D 多人游戏，我在这里寻找我的替代品。因此，如果有比 Shockwave 更好的选择，我很想知道。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-03T18:55:05.177

它并没有以应该让 Flash 开发人员担心的速度下降，Apple 只是拒绝让它在他们的设备上出现以保护应用商店的收入，而且我认为人们普遍承认现在炒作已经平息。

同样，我们在让 webGL 在 iOS 设备上工作时遇到了一些真正的麻烦，除非你有 iAd（尽管这可能已经改变），否则不要认为他们会让你 - 鉴于他们拒绝让你在页面内使用任何替代品，这是很厚脸皮！

您可以将 Flash 播放器文件导出为 AIR 应用程序，这些可以在 Android/iOS 设备上安装和运行（性能并不总是很好，但会稳步提高），我会将此作为平板电脑/移动用户以及传统 Flash 的替代方案用于桌面。

就替代方案而言，唯一真正的竞争者是 WebGL 或 Unity，您必须为后者付费，但您可以获得完整的 3d 开发环境，并且可以使用 C# 编写代码，这总是一个好处。

# scroll - 如何使平滑滚动脚本不滚动到顶部但下面几个像素

> ID：15186551
> 
> 赞同：0
> 
> 时间：2013-03-03T14:12:22.613
> 
> 标签：scroll, pixel, distance

我的网站上有以下 jquery 脚本，效果很好。我想让菜单固定在顶部，因此现在部分文本隐藏在固定菜单后面。如何使平滑滚动脚本停止在 160 像素；从浏览器的 .top

感谢您提前提供任何帮助。干杯。

```
<script type="text/javascript">
$(document).ready(function() {
  function filterPath(string) {
  return string
    .replace(/^\//,'')
    .replace(/(index|default).[a-zA-Z]{3,4}$/,'')
    .replace(/\/$/,'');
  }
  var locationPath = filterPath(location.pathname);
  var scrollElem = scrollableElement('html', 'body');

  $('a[href*=#]').each(function() {
    var thisPath = filterPath(this.pathname) || locationPath;
    if (  locationPath == thisPath
    && (location.hostname == this.hostname || !this.hostname)
    && this.hash.replace(/#/,'') ) {
      var $target = $(this.hash), target = this.hash;
      if (target) {
        var targetOffset = $target.offset().top;
        $(this).click(function(event) {
          event.preventDefault();
          $(scrollElem).animate({scrollTop: targetOffset}, 1000, function() {
            location.hash = target;
          });
        });
      }
    }
  });

  // use the first element that is "scrollable"
  function scrollableElement(els) {
    for (var i = 0, argLength = arguments.length; i <argLength; i++) {
      var el = arguments[i],
          $scrollElement = $(el);
      if ($scrollElement.scrollTop()> 0) {
        return el;
      } else {
        $scrollElement.scrollTop(1);
        var isScrollable = $scrollElement.scrollTop()> 0;
        $scrollElement.scrollTop(0);
        if (isScrollable) {
          return el;
        }
      }
    }
    return [];
  }

});
</script> 
```

编辑 2：我尝试使用脚本并添加了一个滚动偏移量和一个 preventdefault() 条件。它在我第一次加载页面时单击链接时起作用。如果我再次单击任何其他链接，它根本不会滚动。

```
var scrollOffset = 160;

  $('a[href*=#]').each(function() {
    var thisPath = filterPath(this.pathname) || locationPath;
    if (  locationPath == thisPath
    && (location.hostname == this.hostname || !this.hostname)
    && this.hash.replace(/#/,'') ) {
      var $target = $(this.hash), target = this.hash;
      if (target) {
        var targetOffset = $target.offset().top - scrollOffset;
        $(this).click(function(event) {
          if(event != 'undefined') {
          event.preventDefault();}
          $(scrollElem).animate({scrollTop: targetOffset}, 1000, function(e) {
              e.preventDefault();
            location.hash = target; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-15T16:28:33.927

删除`location.hash`，因为它滚动回目标元素。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T14:15:56.400

我不确定它是否有效，但尝试将“+ 160”添加到滚动目标。

# blackberry - 访问 SD 卡时黑莓“找不到文件”（Cordova 2.3.0 + 插件）

> ID：15186552
> 
> 赞同：2
> 
> 时间：2013-03-03T14:12:22.933
> 
> 标签：blackberry, file-io, java-me, cordova, blackberry-simulator

我使用 PhoneGap/Cordova 编写了一个应用程序，它将内容下载到本地文件系统以供以后查看，它使用 Cordova 库来访问文件系统和传输文件。

一些数据以 zip 存档的形式出现，因此我需要解压缩内容。

Cordova 中没有用于提取 ZIP 文件的标准插件，但我采用了我们已经在使用的现有 iOS 插件，保持相同的界面，并在 Java 包装 ZipME 中为 BB 平台重新实现。

我的问题是，然后我尝试访问我的文件以解压缩它，我得到一个“找不到文件”异常被抛出。

这是代码：

```
public void extract(String sourceFile, String targetDirectory) throws IOException {

    byte[] buff = new byte[1024];

    InputStream inStream = null;
    OutputStream outStream = null;

    try {
        FileConnection fcIn = (FileConnection) Connector.open(sourceFile, Connector.READ_WRITE);
        FileConnection fcOut;

        inStream = fcIn.openInputStream();
        ZipInputStream zipIS = new ZipInputStream(inStream);
        ZipEntry zipEntry = zipIS.getNextEntry();

        while (zipEntry != null) {
            String fileName = zipEntry.getName();
            fcOut = (FileConnection) Connector.open(targetDirectory + fileName, Connector.READ_WRITE);
            outStream = fcOut.openOutputStream();

            int readLength;
            while ((readLength = inStream.read(buff)) > 0) {
                outStream.write(buff, 0, readLength);
            }
            outStream.flush();
            outStream.close();

            zipEntry = zipIS.getNextEntry();
        }

    } catch (RuntimeException e) {
        Logger.error(TAG + "Unzip failed: " + e.getMessage());
        throw new ZipException("Unable to unzip file: " + e.getMessage());

    } finally {
        // Cleanup code
        if (inStream != null) {
            inStream.close();
        }
        if (outStream != null) {
            outStream.close();
        }
    }
} 
```

调试确认我传入了以下参数：

源文件：file:///SDCard/downloadable/B3/B3.zip 目标目录：file:///SDCard/downloadable/B3/

在测试设备上检查 SD 卡，并在模拟器上查看合成 SD 卡都确认以下文件结构：

```
root
  - BlackBerry
      - Etc
  - temp
  - downloadable
      - B1
      - B2
          - B2.zip
      - B3
          - B3.zip
      - B4
      - B5
      - B6 
```

我在 BB 7.0 和 7.1 上运行测试，Cordova 是 V2.3.0，测试设备是 9800、9810，以及运行 BB 7.0 或 7.1 操作系统的 9800 和 9810 模拟器。

# database-design - laravel 模式构建器可以创建 CHAR 列吗？

> ID：15186553
> 
> 赞同：4
> 
> 时间：2013-03-03T14:12:23.947
> 
> 标签：database-design, char, schema, laravel, builder

抱歉这个烦人的问题，但我没有找到创建带有 CHAR 列的表的方法。我想要 CHAR，而不是 VARCHAR！

在文档中，他们没有写任何关于 CHAR 类型列的内容：http: [//laravel.com/docs/database/schema](http://laravel.com/docs/database/schema)

如果我想要一个只允许 6 个字符长字符串的 CHAR(6) 类型的列，我必须创建一个 varchar 列并在模型中禁止短于或长于 6 个字符吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-03T14:21:16.357

正如您所说[，laravel 文档](http://laravel.com/docs/database/schema)不支持 CHAR 数据类型。这里的所有都是它的。

但这可能无关紧要。CHAR(6) 不强制规定所有值必须为六个字符长。它的作用是将任何输入右填充为六个字符。所以我们可以输入`'A'`，CHAR 列将存储`'A '`. 这真的是你想要的吗？

# python - != vs <> 在 Python 中？

> ID：15186555
> 
> 赞同：1
> 
> 时间：2013-03-03T14:12:46.017
> 
> 标签：python, math, comparison

我之前在阅读 Python 文档，发现`<>`. 这与 究竟有何不同`!=`？据我所知，唯一的区别是它`<>`不适用于字符串。是否`<>`做了一些特别的事情`!=`，或者有什么原因我两年多没有听说过？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-03T14:14:30.807

`<>`是过去的残余。引用[文档](http://docs.python.org/2/library/stdtypes.html#comparisons)

> `!= can also be written <>, but this is an obsolete usage kept for backwards compatibility only. New code should always use !=.`

另外，值得注意的是 Python 3 不支持`<>`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-03T14:14:11.457

`<>` *对于字符串或任何其他类型，与,*完全相同*`!=`：*

 *```
>>> 'a' <> 'b'
True
>>> 'a' != 'b'
True 
```

但是，`<>`已弃用。它[已从 Python 3](http://docs.python.org/3/whatsnew/3.0.html#removed-syntax)中删除。始终使用`!=`。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-03T14:14:37.407

运算符`<>`只是`!=`.

从[文档](http://docs.python.org/release/2.5.2/lib/comparisons.html)中查看。*

# javascript - 将 HTML 文件加载到 ACE Editor PRE 标签中

> ID：15186558
> 
> 赞同：7
> 
> 时间：2013-03-03T14:13:01.920
> 
> 标签：javascript, php, wysiwyg, ace-editor

有一个（在服务器上）本地存储的 HTML 文件，我需要向用户显示并允许对其进行更改并保存它。（类似于 wordpress 中的模板文件编辑器）。

为此，我正在使用 ACE 编辑器。

我的 JavaScript 代码：

```
$(document).ready(function() {

var editor = ace.edit("editor");

editor.getSession().setMode("ace/mode/html");
editor.setTheme("ace/theme/chrome");

editor.setValue("<?php echo addslashes(file_get_contents("abc.html")); ?>");
editor.gotoLine(1);

}); 
```

文件 abc.html 中的代码

![在此处输入图像描述](../Images/bdf0e44ef76bd13e9550ba8dda922c2d.png)

我的问题：虽然我使用了 addlashes，但有一些字符会导致问题。没有直接向ACE Editor 提供文件的方法吗？

有没有其他这样的编辑器可以直接提供文件名来打开？

编辑：解决了！

我没有通过 setValue() 函数传递文件文本，而是直接在 PRE 标记中打印文本

```
<pre id="editor"><?php echo htmlentities(file_get_contents($input_dir."abc.html")); ?></pre> 
```

有效。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-03T14:17:37.327

正确的转义是

```
htmlspecialchars(addslashes(file_get_contents("abc.html"))); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-08-10T12:29:14.990

```
editor.setValue("<?php echo addslashes(file_get_contents("abc.html")); ?>"); 
```

是错的。abc.html 没有 php 代码。语法错误

```
editor.setValue('<?php echo addslashes(file_get_contents("abc.html")); ?>'); 
```

这可以工作。没有测试

# javascript - 如何在 div 中找到具有 Class 而不是 jquery 中的元素

> ID：15186559
> 
> 赞同：4
> 
> 时间：2013-03-03T14:13:08.143
> 
> 标签：javascript, jquery, class

我试图在 div 中找到一个名为的元素，`wrapper`它有一个类`active`但不是我刚刚点击的那个。

这是我的代码，如果我点击`.title`类，它会起作用：

```
 $(".title").click(function(){
    if ($("#wrapper ul li").hasClass("active")) {
        alert("found one!");
    }
}); 
```

但我不知道如何检查它是否不是我点击的那个。我尝试在我的 if 语句中添加`.not(this)`and`.not($(this))`无济于事。

我应该添加我计划`removeClass`的任何不是当前选定的 div。

我确定我在某处有问题。

供参考的HTML：

```
<div id="wrapper">
    <ul>
        <div class="title">Title</div>
        <li class="active">Active Clicked List Item</li>
    </ul>
    <ul>
        <div class="title">Title</div>
        <li>Some Other List Item</li>
    </ul>
    <ul>
        <div class="title">Title</div>
        <li>Some Other List Item</li>
    </ul>
</div> 
```

关于我如何做到这一点的任何建议？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-03T14:21:47.513

请注意**你的html是无效的**，`DIV`不能是子级的`UL`。选择器也不正确，`$('.title')`因为它不是您正在应用的类`active to`

`hasClass()`返回一个布尔值，因此不可链接

不完全确定您要做什么，但根据显示的代码，您需要先使用`not()`过滤器`hasClass()`：

```
if ($("#wrapper ul li").not(this).hasClass("active")) { 
```

或者

```
if ($("#wrapper ul li.active").not(this).length) { 
```

如果只是为了删除类，只需在添加到当前类之前从所有类中删除活动类，您无需先对其进行测试

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-03T14:22:41.013

使用`not`可以很好地排除元素：

```
$('#wrapper li').click(function(){
  $('#wrapper li').not(this).removeClass('active');
  $(this).addClass('active');
}); 
```

演示：http: [//jsfiddle.net/97DXe/](http://jsfiddle.net/97DXe/)

如果您注释掉 addClass，您将看到单击已经活动的元素不会从中删除该类。

如果您要在单击的元素上设置活动类，那么首先简单地从所有元素中删除该类并没有太大的危害，因此您不需要`not`.

# css - 当我更改页面时，页面中间向右移动

> ID：15186561
> 
> 赞同：0
> 
> 时间：2013-03-03T14:13:24.157
> 
> 标签：css

我创建了一个带有图片的网站，当我进入图片页面并...单击下一步，预览图片时，图片会向右浮动。在 IE 中运行良好，但在 Google Chrome、Mozilla、Safari 中……中间页面向右浮动。我尝试改变css但没有想到。你能帮我吗？提前致谢 ！

我放在标题和css代码中的类“内容”

```
body {
    /*background-color: none;
    border-radius: 25px;
    background-image:url('/images/gray_jean.png');*/
    background: #ffffff;
    color: #000000;
    margin:0;
    padding:0;
}

.content {
    position:relative;
    margin:0 auto;
    margin-left: auto;
    margin-right: auto;
    text-align: center;
    width:100%;
    clear: both;
} 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T14:20:50.057

从. `position:relative;`_`.content`

```
.content {
  position:relative; // Remove this
} 
```

试试看，可能吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T08:38:39.933

将您当前的代码替换为此，

```
.content {
    margin:0 auto;
    text-align: center;
    width:100%;
} 
```

# matlab - 如何在Matlab中绘制双积分图？

> ID：15186562
> 
> 赞同：2
> 
> 时间：2013-03-03T14:13:26.893
> 
> 标签：matlab, integral

我是 Matlab 的新手，如果有人能提供帮助，我将不胜感激。我有使用 quad2d() 函数计算的双积分：

```
>> syms x y
>> ymin=@(x)x.^2    
>> ymax=@(x)2*x
>> fun=@(x,y)x+y
>> quad2d(fun,0,2,ymin,ymax)

ans =  3.4667 
```

如何绘制积分图？提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T07:50:55.150

`quad2d`为什么不使用，而不是定义`fun`为符号函数，执行[符号积分](http://www.mathworks.com/help/symbolic/int.html)然后使用[`ezplot`](http://www.mathworks.com/help/symbolic/ezplot.html)绘制结果？

这些方面的东西：

```
syms x y t
fun = x + y;
I = int(fun, 0, t, x ^ 2, 2 * x);
ezplot(I) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T19:36:39.453

如果您想绘制不同 x 限制值的积分（在上面的示例中，它介于 0 和 2 之间），您可以执行以下操作：

```
counter = 1; 
for xmin = 0:10
    xminv(counter) = xmin;
    xmax = xmin+2;
    xmaxv(counter) = xmax;
    z(counter) = quad2d(fun,xmin,xmax,ymin,ymax);
    counter = counter +1;
end

plot(xminv,z); 
```

当然，您可以将积分范围而不是 2 更改为您想要的任何值。例如，如果您希望您的`x`更改范围超过 3 而不是 2，请将`xmax`from更改`xmax=xmin+2`为`xmax=xmin+3`。

# javafx - 如何从 stackPane 复制图像，然后将其添加到另一个 stackpane？

> ID：15186568
> 
> 赞同：1
> 
> 时间：2013-03-03T14:14:07.347
> 
> 标签：javafx, clipboard

我需要从 stackPane 复制图像，然后需要在 ClipBoard 的帮助下将该特定图像添加到另一个 stackpane。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-27T15:05:57.623

您可以使用 SnapshotParameters 和 ImageView 来做到这一点：

```
...
SnapshotParameters snapParams = new SnapshotParameters();
snapParams.setFill(Color.RED); // see documentation
// with your describtion YOURNODE is your stackpane...
imageview.setImage(YOURNODE.snapshot(snapParams, null)); 
```

现在您可以使用以下命令将 imageview 添加到另一个堆栈窗格：

```
otherStackpane.getChildren().add(imageview); 
```

# c# - 将列表保存到磁盘上的文件

> ID：15186574
> 
> 赞同：2
> 
> 时间：2013-03-03T14:14:35.157
> 
> 标签：c#, .net, wpf

我构建 WPF 程序，并使用此代码将`List`对象保存到文件中：

```
 var list = new ArrayList();
    list.Add("item1");
    list.Add("item2");

    // Serialize the list to a file
    var serializer = new BinaryFormatter();
    using (var stream = File.OpenWrite("test.dat"))
    {
        serializer.Serialize(stream, list);
    } 
```

我的问题是该文件在磁盘上的保存位置。我读到我不能使用该`ProgramFiles`文件夹，因为有时只有管理员用户可以将文件保存到该文件夹​​中。

有什么通用文件夹可以用来保存文件吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-03T14:17:38.213

我会将其保存到应用程序数据中。你可以使用它的路径

```
Environment.GetFolderPath(Environment.SpecialFolder.ApplicationData) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-03T14:17:45.027

这些数据是您的程序内部的，还是用户生成的？如果数据是内部的，您可能希望使用 Application Data 文件夹。如果它是用户生成的，您可能应该默认为我的文档，但让用户决定保存它的位置。

您可以调用[Environment.GetFolderPath()](http://msdn.microsoft.com/en-us/library/14tx8hby.aspx)来获取这些特殊文件夹的位置。

# c# - 如何正确保存密码

> ID：15186583
> 
> 赞同：2
> 
> 时间：2013-03-03T14:15:23.423
> 
> 标签：c#, passwords, password-protection, password-encryption, securestring

我尝试编写一个程序，您可以使用它登录到远程网站。对于一些拥有多个帐户的人，我尽量让他们更容易，并将帐户数据存储在`IsolatedStorage`. 在我的代码的当前状态下，密码只是在 a 中输入，`TextBox`一旦存储转换为 MD5 哈希。

现在我想将它重构为正确的代码，但我被卡住了。

A通过和`PasswordBox`公开其数据。`PasswordBox.SecureString``PasswordBox.Password`

所以当点击我的保存按钮时，我会执行类似的操作

```
public void OnClick(...)
{
    var password = passwordBox.Password;
    // store it somehow (e.g. custom MD5 encryption)

    var savePassword = passwordBox.SecureString;
    // store this string somehow, but how?
} 
```

这是我的问题

*   一旦我将普通密码从我的`PasswordBox`输入`var password`中，内存中是否有可见的东西？一些*黑客*是否能够通过反射/调试使这个简单的值可见？哪个代码使这些字符串真正可见？我需要注意什么？
*   怎么处理`SecureString`的`PasswordBox`？

我对所有这些东西有点不知所措，我还无法弄清楚如何正确处理应用程序中的密码的本质。

我不是恳求一个完整的解决方案和运行代码。如果有人可以让我开始，我会很高兴。而且，我不想要企业解决方案。我只是在寻找一个，它易于实现并且尽可能节省我投入的精力。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T14:35:24.313

你真的需要密码是可逆的吗？

一种更安全的存储方法是对其进行加盐和哈希处理。

用户：`JOHN`

密码：（开头为）`myUserPassword667!`

然后对数据库中的用户使用某种数据库唯一代码。让我们说一个 GUID。

现在你有了`abcd-1234-12-1212121ab`JOHN 的唯一性

所以你现在有一个基本密码（在散列之前）

`myUserPassword667!abcd-1234-12-1212121ab`

您现在可以使用命名空间中的一种 SHA 或其他散列算法对此进行散列`System.Security`。

现在你在内部有一些盐，你可以应用到你的散列算法......（仅限你的部分代码）

`MySecretSaltWords559BC`

然后将结果作为 Base64 或二进制存储在您的数据库中。

`Ab09l\311sas==`（简化）

下次用户登录时，您会在数据库中找到他们的记录，您会获得生成帐户时使用的唯一代码，并将其附加到他们输入的密码中。

Hash the entered password with the same technique and binary compare the result, then you don't need to ever store their password. If the hashes don't match you don't have the same password.

# django - 将 djangotoolbox ListField 保存到 GAE 数据存储时出错

> ID：15186585
> 
> 赞同：0
> 
> 时间：2013-03-03T14:15:35.223
> 
> 标签：django, google-app-engine, django-admin, django-nonrel

在将 ListField 保存到 GAE 数据存储区时，我得到“属性标签不受支持的类型：”
GAE 数据存储区接收到一个生成器对象以保存到数据库中：

```
name: 'tags'
value: <generator object <genexpr> at 0x049C6620> 
```

dbindexer\compiler.py 或 djangotoolbox\db\basecompiler.py 可能是从传递给它的列表对象生成这个对象。

```
(<djangotoolbox.fields.ListField object at 0x047A4070>, [1L])] 
```

关于可能出现的问题的任何提示？

```
from django.db import models
from djangotoolbox.fields import ListField

class Tag(models.Model):
    name = models.CharField(max_length=255)

class Note(models.Model):
    tags = ListField(db.ForeignKey(Tag)) 
```

例外：

```
Django Version: 1.3.1
Exception Type: DatabaseError
Exception Value: Unsupported type for property tags: <type 'generator'>
Exception Location: google_appengine\google\appengine\api\datastore_types.py in ValidateProperty, line 1529

File "myapp\django\db\models\base.py" in save
  462\. self.save_base(using=using, force_insert=force_insert, force_update=force_update)
File "myapp\django\db\models\base.py" in save_base
  573\. result = manager._insert(values, return_id=update_pk, using=using)
File "myapp\django\db\models\manager.py" in _insert
  195\. return insert_query(self.model, values, **kwargs)
File "myapp\django\db\models\query.py" in insert_query
  1438\. return query.get_compiler(using=using).execute_sql(return_id)
File "myapp\dbindexer\compiler.py" in execute_sql
  38\.  return super(SQLInsertCompiler, self).execute_sql(return_id=return_id)
File "myapp\djangotoolbox\db\basecompiler.py" in execute_sql
  549\. key = self.insert(field_values, return_id=return_id)
File "myapp\djangoappengine\db\compiler.py" in _func
  68\.   return func(*args, **kwargs)
File "myapp\djangoappengine\db\compiler.py" in insert
  387\.  entity.update(properties)
File "google_appengine\google\appengine\api\datastore.py" in update
  890\.  self.__setitem__(name, value)
File "google_appengine\google\appengine\api\datastore.py" in __setitem__
  868\.  datastore_types.ValidateProperty(name, value)
File "google_appengine\google\appengine\api\datastore_types.py" in ValidateProperty
  1529\. 'Unsupported type for property %s: %s' % (name, v.__class__)) 
```

生成器对象由 djangotoolbox 生成，但 GAE 不接受生成器类型。来自 djangotoolbox/db/base.py 的代码

```
 def _value_for_db_collection(self, value, field, field_kind, db_type,
                                 lookup):
      # Do convert filter parameters.
        if lookup:
            # Special case where we are looking for an empty list
            if lookup == 'exact' and db_type == 'list' and value == u'[]':
                return []
            value = self._value_for_db(value, subfield,
                                       subkind, db_subtype, lookup)

        # Convert list/set items or dict values.
        else:
            if field_kind == 'DictField':

                # Generator yielding pairs with converted values.
                value = (
                    (key, self._value_for_db(subvalue, subfield,
                                             subkind, db_subtype, lookup))
                    for key, subvalue in value.iteritems())

                # Return just a dict, a once-flattened list;
                if db_type == 'dict':
                    return dict(value)
                elif db_type == 'list':
                    return list(item for pair in value for item in pair)

            else:

                # Generator producing converted items.
                value = (
                    self._value_for_db(subvalue, subfield,
                                       subkind, db_subtype, lookup)
                    for subvalue in value)

                # "list" may be used for SetField.
                if db_type in 'list':
                    return list(value)
                elif db_type == 'set':
                    # assert field_kind != 'ListField'
                    return set(value)

            # Pickled formats may be used for all collection fields,
            # the fields "natural" type is serialized (something
            # concrete is needed, pickle can't handle generators :-)
            if db_type == 'bytes':
                return pickle.dumps(field._type(value), protocol=2)
            elif db_type == 'string':
                return pickle.dumps(field._type(value))

        # If nothing matched, pass the generator to the back-end.
        return value 
```

尝试验证上述生成器并引发错误的 AppEngine 代码：

```
def ValidateProperty(name, values, read_only=False):
  ValidateString(name, 'property name', datastore_errors.BadPropertyError)
  values_type = type(values)

  if values_type is tuple:
    raise datastore_errors.BadValueError('May not use tuple property value; property %s is %s.' %(name, repr(values)))

  **if values_type is not list:
    values = [values]**

  if not values:
    raise datastore_errors.BadValueError(
        'May not use the empty list as a property value; property %s is %s.' %
        (name, repr(values)))
  try:
    for v in values:
      prop_validator = _VALIDATE_PROPERTY_VALUES.get(v.__class__)
      if prop_validator is None:
        raise datastore_errors.BadValueError(
          'Unsupported type for property %s: %s' % (name, v.__class__))
      prop_validator(name, v)

  except (KeyError, ValueError, TypeError, IndexError, AttributeError), msg:
    raise datastore_errors.BadValueError(
      'Error type checking values for property %s: %s' % (name, msg)) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T15:43:54.410

对以下代码进行了更改（** 标记为 ** 的新代码）并且问题似乎已修复（也许我做错了什么需要此修复：

```
def _value_for_db_collection(self, value, field, field_kind, db_type,
                                 lookup):
    subfield, subkind, db_subtype = self._convert_as(field.item_field,
                                                     lookup)

    # Do convert filter parameters.
    if lookup:
        # Special case where we are looking for an empty list
        if lookup == 'exact' and db_type == 'list' and value == u'[]':
            return []
        value = self._value_for_db(value, subfield,
                                   subkind, db_subtype, lookup)

    # Convert list/set items or dict values.
    else:
        if field_kind == 'DictField':

            # Generator yielding pairs with converted values.
            value = (
                (key, self._value_for_db(subvalue, subfield,
                                         subkind, db_subtype, lookup))
                for key, subvalue in value.iteritems())

            # Return just a dict, a once-flattened list;
            if db_type == 'dict':
                return dict(value)
            elif db_type == 'list':
                return list(item for pair in value for item in pair)

        else:

            # Generator producing converted items.
            value = (
                self._value_for_db(subvalue, subfield,
                                   subkind, db_subtype, lookup)
                for subvalue in value)

            # "list" may be used for SetField.
            if db_type in 'list':
                return list(value)
            elif db_type == 'set':
                # assert field_kind != 'ListField'
                return set(value)

        # Pickled formats may be used for all collection fields,
        # the fields "natural" type is serialized (something
        # concrete is needed, pickle can't handle generators :-)
        if db_type == 'bytes':
            return pickle.dumps(field._type(value), protocol=2)
        elif db_type == 'string':
            return pickle.dumps(field._type(value))

    # If nothing matched, pass the generator to the back-end.

    #****************NEW CODE - begin **********************
    import types
    if type(value) is types.GeneratorType:
        value = list(value)
    #****************NEW CODE - end****************************

return value 
```

# php - 为什么 wordnik 的 php api 不加载所需的类？

> ID：15186590
> 
> 赞同：0
> 
> 时间：2013-03-03T14:15:55.220
> 
> 标签：php, api, class

wordnik 的 php api **致命错误出现以下错误：在第 212 行的 Swagger.php 中找不到类“示例”**

我编辑了 Swagger.php 让它工作，下面是原始函数

```
function swagger_autoloader($className) {
    $currentDir = substr(__FILE__, 0, strrpos(__FILE__, '/'));
    if (file_exists($currentDir . '/' . $className . '.php')) {
        include $currentDir . '/' . $className . '.php';
    } elseif (file_exists($currentDir . '/models/' . $className . '.php')) {
        include $currentDir . '/models/' . $className . '.php';
    }
} 
```

我改成的工作代码是

```
function swagger_autoloader($className) 
{
        include $currentDir . '/models/' . $className . '.php'; 
} 
```

**更多信息**

我的文件结构如下。WORDNIK（包含 start.php）>>>WORDNIK（包含 Swagger.php）>>MODELS（包含 Example.php）

*   我正在使用 wampserver 2.2 和 php 5.4.3

**更新/编辑**

使用以下代码

```
function swagger_autoloader($className) {
    echo "dirname(__FILE__)= ",dirname(__FILE__);
    $currentDir = substr(__FILE__, 0, strrpos(__FILE__, '/'));
    echo "currentDir=".$currentDir."</br>";
    echo "className=".$className."</br>";
    echo "__FILE__=",__FILE__."<br/>";
    die(); 
```

我得到结果

*   `dirname(__FILE__)=D:\wamp\www\wordnik\wordnik`
*   当前目录=
*   类名=示例
*   `__FILE__=D:\wamp\www\wordnik\wordnik\Swagger.php`

正如 vcampitelli 所建议的，使用其中一个`__DIR__`或`dirname(__FILE__)`工作。

**我的问题**

为什么原来的功能不起作用？

**不重要的信息**

对于那些在示例中苦苦挣扎的人，这是我的 start.php 文件

```
<?php
require('./wordnik/Swagger.php');
require('./wordnik/WordApi.php');
require('./wordnik/AccountApi.php');
require('./wordnik/WordsApi.php');
require('./wordnik/WordListApi.php');
require('./wordnik/WordListsApi.php');

$myAPIKey = 'replace_this_with_your_real_api';
$client = new APIClient($myAPIKey, 'http://api.wordnik.com/v4');

$wordApi = new WordApi($client);
$example = $wordApi->getTopExample('irony');
print $example->text;
?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-03T14:54:02.337

返回什么`$currentDir`？您是否尝试过使用`__DIR__`or `dirname(__FILE__)`（它们是相同的）而不是 that `substr`？

如果您正在使用第二个示例，就像您发布的那样（没有声明`$currentDir`），那么这就是您原始代码的问题：`$currentDir`没有返回正确的文件夹！

使用原始代码，包含哪个文件？因为，实际上，我认为没有人是！`echo`在这些语句中使用`if`来检查！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T08:41:39.337

原始函数不起作用，因为它正在寻找 UNIX 样式的正斜杠“/”的位置，而您在 Windows 上并且有反斜杠“\”。那是一个错误！我将修复 lib 以像您一样使用 dirname( **FILE )。**感谢您指出错误。

# jquery - 检索链接网址某些部分的最佳方法？

> ID：15186595
> 
> 赞同：0
> 
> 时间：2013-03-03T14:16:12.307
> 
> 标签：jquery, html-lists, extraction

我正在遍历一些包含链接的 li。

链接可能如下所示：

```
<a href="http://localhost/mlp/books/">Books</a> 
```

... 也 ...

```
<a href="movies/">Movies</a> 
```

我想要的是检索链接的最后一级（上述案例中的书籍和电影）并将它们放入一个数组中。

最好的方法是什么？

```
var listOptions = [];

$('#navigation ul').each(function(index){
    var link = $(this).children().html();
    ?
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-03T14:21:37.627

不确定您的 HTML 结构到底是什么，但假设您可以访问锚标记：

```
$('a').each(function (index) {
    var tokens = this.href.split('/')
        , link = tokens[tokens.length - 2];

    // link is now "books" or "movies"
}); 
```

请注意，这还假设所有链接都有一个尾随`/`.

**示例：http:** [//jsfiddle.net/JVQsm/](http://jsfiddle.net/JVQsm/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-03T14:22:59.153

将它们放入数组中：

```
var listOptions = $.map($('#navigation ul li a'), function(el,i) { 
    return el.href.slice(0,-1).split('/').pop();
});

//listOptions now contains ['books', 'movies'] etc 
```

[**小提琴**](http://jsfiddle.net/adeneo/uf4rb/)

要在网站上替换它们：

```
$('#navigation ul li a').attr('href', function(i, href) {
    var arr = href.split('/');
    return arr[arr.length-2]+'/';
}); 
```

[**小提琴**](http://jsfiddle.net/adeneo/uf4rb/1/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-03T14:27:47.757

也许是这样的：

```
var listOptions = [];

$('a').each(function () {
    var trimmed = $(this).prop('href').slice(0, -1);
    listOptions.push(trimmed.substring(trimmed.lastIndexOf('/') + 1));
}); 
```

`/`您在所有链接中都有尾随。如果总是这样，您需要先将其删除。
将其存储在`trimmed`变量中，然后提取最后一部分。

如果情况并非总是如此，您可以稍微扩展一下逻辑。检查最后一个字符是否为`/`，然后将其删除。如果不是，则不要删除任何内容

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-03T14:19:53.883

我会像这样使用[jQuery`map`](http://api.jquery.com/map)；

```
var listOptions = $('#navigation ul').map(function () {
    var href = $(this).find('a').prop('href');

    // Handle a trailing '/', which will screw things up
    if (href.slice(-1) === '/') {
        href = href.slice(0, -1);
    }

    var last = href.lastIndexOf('/');

    // Handle href="foo";
    if (last === -1) {
        last = 0;
    }

    // Return the last part of the URL.
    return href.slice(last);
}).get(); 
```

`listOptions`现在将是 URL 最后部分的数组。

# coq - coq 将前提“否定不等于”更改为“等于”

> ID：15186603
> 
> 赞同：1
> 
> 时间：2013-03-03T14:16:38.157
> 
> 标签：coq

假设我有这样的前提：

```
H2: ~ a b c <> a b c 
```

我希望将其更改为：

```
a b c = a b c 
```

在哪里

a 是术语 -> 术语 -> 术语

b 和 c 都是 Term

我该怎么做？谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-03T17:35:36.730

如果展开 和 的定义`~`，`<>`您的假设具有以下类型：

```
H2: (a b c = a b c -> False) -> False 
```

因此，您希望实现的是逻辑学家通常所说的“双重否定消除”。它不是一个直观可证明的定理，因此在`Classical`Coq 的模块中定义（详见[http://coq.inria.fr/distrib/V8.4/stdlib/Coq.Logic.Classical_Prop.html](http://coq.inria.fr/distrib/V8.4/stdlib/Coq.Logic.Classical_Prop.html)）：

```
Classical.NNPP : forall (p : Prop), ~ ~ p -> p 
```

我假设您的实际问题比 更复杂`a b c = a b c`，但为了提及它，如果您真的关心获得该特定假设，您可以安全地证明它，甚至无需查看 H2：

```
assert (abc_refl : a b c = a b c) by reflexivity. 
```

* * *

如果您的实际示例没有立即反身并且相等实际上是错误的，那么您可能希望将目标转变为表明 H2 是荒谬的。您可以通过消除 H2 ( `elim H2.`，这基本上是对`False`类型进行切割) 来做到这一点，您将最终进入上下文：

```
H2 : ~ a b c <> a b c
EQ : a b c = a b c
=====================
False 
```

* * *

我不确定所有这些是否有帮助，但您可能过于简化了您的问题，因此我无法提供更多关于您的真正问题的见解。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-03T21:08:50.560

只需稍微考虑一下 Ptival 的答案 - 如果您的预期目标没有被 简单地解决`reflexivity`，您仍然可以取得进展，前提是您的 具有可判定的相等性`Term`，例如通过应用这个小引理：

```
Section S.
  Parameter T : Type.
  Parameter T_eq_dec : forall (x y : T), {x = y} + {x <> y}.

  Lemma not_ne : forall (x y : T), ~ (x <> y) -> x = y.
  Proof.
    intros.
    destruct (T_eq_dec x y); auto.
    unfold not in *.
    assert False.
    apply (H n).
    contradiction.
  Qed.
End S. 
```

# google-maps - 在谷歌地图上显示推文

> ID：15186610
> 
> 赞同：0
> 
> 时间：2013-03-03T14:17:22.180
> 
> 标签：google-maps, google-maps-api-3, twitter, twitter4j

我已经用 twitter4j（Twitter 的 Java api）检索了 5 条推文，现在我想在谷歌地图上显示它们。

谷歌地图有一个 javascript api。

任何想法我怎么能在谷歌地图上显示它们。可以将这些数据直接发送到谷歌地图并在谷歌地图上显示吗

我的结果之一如下所示。

查询更新：派对

地点：空

简介地点：法国巴黎

用户名 1：SusanClay20

消息：想要预订您的圣诞派对？看看我们如何提供帮助:)

我想在地图上实际显示个人资料图片，但我想知道这怎么可能。

我是否需要将它们存储在拳头上，然后显示在谷歌地图上？我对此真的很空白，任何评论都将不胜感激。

谢谢

溴

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T14:31:57.290

在 Google 地图中，您可以利用信息窗口在某些标记处显示。[谷歌开发者页面](https://developers.google.com/maps/documentation/javascript/overlays#InfoWindows)的一些示例代码：

```
var myLatlng = new google.maps.LatLng(-25.363882,131.044922);
var mapOptions = {
  zoom: 4,
  center: myLatlng,
  mapTypeId: google.maps.MapTypeId.ROADMAP
}

var map = new google.maps.Map(document.getElementById("map_canvas"), mapOptions);

var contentString = '<div id="content">'+
    '<div id="siteNotice">'+
    '</div>'+
    '<h2 id="firstHeading" class="firstHeading">Uluru</h2>'+
    '<div id="bodyContent">'+
    '<p><b>Uluru</b>, also referred to as <b>Ayers Rock</b>, is a large ' +
    'sandstone rock formation in the southern part of the '+
    'Northern Territory, central Australia. It lies 335 km (208 mi) '+
    'south west of the nearest large town, Alice Springs; 450 km '+
    '(280 mi) by road. Kata Tjuta and Uluru are the two major '+
    'features of the Uluru - Kata Tjuta National Park. Uluru is '+
    'sacred to the Pitjantjatjara and Yankunytjatjara, the '+
    'Aboriginal people of the area. It has many springs, waterholes, '+
    'rock caves and ancient paintings. Uluru is listed as a World '+
    'Heritage Site.</p>'+
    '<p>Attribution: Uluru, <a href="http://en.wikipedia.org/w/index.php?title=Uluru&oldid=297882194">'+
    'http://en.wikipedia.org/w/index.php?title=Uluru</a> (last visited June 22, 2009).</p>'+
    '</div>'+
    '</div>';

var infowindow = new google.maps.InfoWindow({
    content: contentString
});

var marker = new google.maps.Marker({
    position: myLatlng,
    map: map,
    title:"Uluru (Ayers Rock)"
});

google.maps.event.addListener(marker, 'click', function() {
  infowindow.open(map,marker);
}); 
```

如果这是您正在经历的事情，比如 AJAX 轮询，那么您可以将其转换为使用位置信息调用的函数，并更改`contentString`为您希望如何显示推文的 HTML 表示。如果您不进行轮询而只是想在页面加载时进行，也会发生相同的原则。相反，您将拥有该函数，然后利用后端系统打印出该函数的 javascript 调用以及要填充的数据。

# java - 将 Spring 配置为目录结构而不是 *.html 或其他模式

> ID：15186615
> 
> 赞同：0
> 
> 时间：2013-03-03T14:17:37.863
> 
> 标签：java, spring

我希望我的 spring 应用程序访问像[http://myapplication.com/app1/feature/](http://myapplication.com/app1/feature/)这样的 url而不是[http://myapplication.com/app1/feature.html](http://myapplication.com/app1/feature.html) 所以基本上我应该如何配置。我的当前配置低于它与 *.html web.xml 一起使用

![web.xml](../Images/d190d2800b566d8bcbb90e72c60dc75b.png) 它给出了 404 错误，我将它映射到 * .* 等

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T14:28:20.537

> 它给出了 404 错误，我将它映射到 * .* 等

[servlet](http://jcp.org/aboutJava/communityprocess/final/jsr315/index.html)规范对`url-pattern`. 您可能正在寻找`/*`，它会将所有请求定向到`DispatcherServlet`，而不管路径如何。然后由你来定义会发生什么。

作为参考，“映射规范”（12.2）允许以下模式：

*   以“/”字符开头并以“/*”后缀结尾的字符串用于路径映射。
*   以“*”开头的字符串。前缀用作扩展映射。
*   空字符串 ("") 是一种特殊的 URL 模式，它精确地映射到应用程序的上下文根，即表单的请求`http://host:port/<contextroot>/`。在这种情况下，路径信息是“/”，servlet 路径和上下文路径是空字符串（“”）。
*   仅包含“/”字符的字符串表示应用程序的“默认”servlet。在这种情况下，servlet 路径是请求 URI 减去上下文路径，并且路径信息为空。
*   所有其他字符串仅用于完全匹配

# forms - 动态表单输入名称的codeigniter表单验证

> ID：15186618
> 
> 赞同：0
> 
> 时间：2013-03-03T14:17:47.583
> 
> 标签：forms, codeigniter, dynamic, input, validation

我有一个 codeigniter 应用程序。我的视图使用数据库行 ID 附加到输入名称以获取唯一 ID。这允许我在我的表单操作中使用所有输入，即更新。

**我的视图语法：**

```
<?php if(isset($records)) {?>
<table id="hor-minimalist-a">
    <tr>
        <th>&nbsp;</th><th>&nbsp;</th><th>Customer Name</th><th>postalcode</th>
    <tr>

<?php if(isset($records)) : foreach ($records as $row) : ?>
    <tr>
        <td>
<?php echo anchor('masterdata/confirm_delete_customer/'.$row->id, img(array('src'=>'images/delete_icon.png','border'=>'0','alt'=>'Delete'))); ?>
        </td>
        <td>
            <input type=checkbox name="editcustomer[]" id="editcustomer[]" value="<?php echo $row->id ?>">
        </td>
        <td>
            <input class="inputwide" type="text" name="customer_name_<?php echo $row->id ?>" id="customer_name_<?php echo $row->id ?>" value="<?php echo $row->customer_name ; ?>" >
        </td>
        <td>
            <input class="inputnarrow" type="text" name="postalcode_<?php echo $row->id ?>" id="postalcode_<?php echo $row->id ?>" value="<?php echo $row->postalcode ; ?>" >
        </td>
    </tr>
<?php endforeach ; ?>
    </table>
<input type="submit" value="Update Checked Customers">
<?php endif; ?>

<?php echo form_close(); ?>
<?php } else {?>
<h4 id="warning"> No Customers currently in database</h4>
<?php } ?> 
```

如您所见，输入`name's`是`id's`唯一的。

**我的控制器语法如下：**

```
function manage_customers()
    {

        $data['title']="Manage Customers";

            //query model to get data results for form
            $data=array();

            if($query=$this->model_master_data->get_customer_records()){
                $data['records']=$query;
            }

            $this->load->view("master_data/view_master_data_header",$data);
            $this->load->view("master_data/view_master_data_nav");
            $this->load->view("master_data/view_content_master_data_manage_customers",$data);
            $this->load->view("master_data/view_master_data_footer");

            $editcustomer = $this->input->post('editcustomer');

            // single update - working

            if( $this->input->post('editcustomer') != false )
            {
                foreach ($editcustomer as $row_id)
                {
                    $data = array( 
                        'postalcode' => $this->input->post('postalcode_'.$row_id),
                        'customer_name' => $this->input->post('customer_name_'.$row_id) );
                    $this->model_master_data->update_customer_records( $row_id, $data );
                }
             $this->session->set_flashdata('dbaction', 'Selected Records have been updated successfully');
            redirect('masterdata/manage_customers', 'refresh');
            }

    } 
```

如何使用 codeigniter 验证类来确保用户使用可信数据修改输入框？

怎么可能

`$this->form_validation->set_rules("primary_contact_tell","`联系人告诉`","required|xss_clean|min_length[10]|max_length[14]");`

引用输入字段的正确动态名称？表单目前只有客户姓名和邮政编码，但需要添加其余字段。

预先感谢，一如既往。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T14:24:34.210

您可以在控制器中循环访问 $records，以实现动态输入验证规则。

```
foreach($records as $row)
{
    $this->form_validation->set_rules("customer_name_" . $row->id, "Customer name", "required|xss_clean|min_length[10]|max_length[14]");
    $this->form_validation->set_rules("postalcode_" . $row->id, "Customer name", "required|xss_clean|min_length[10]|max_length[14]");
} 
```

**编辑：**

想一想。我无法检查控制器中的变量是什么。据我所知，根据您在此处编写的代码，这应该有效：

```
foreach($editcustomer as $row_id)
{
    $this->form_validation->set_rules("customer_name_" . $row_id, "Customer name", "required|xss_clean|min_length[10]|max_length[14]");
    $this->form_validation->set_rules("postalcode_" . $row_id, "Customer name", "required|xss_clean|min_length[10]|max_length[14]");
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T07:55:56.757

工作解决方案，非常感谢@yabol 提供的解决方案。我仍然需要稍微清理一下语法，但所需的功能可以正常工作。

**看法**

```
<?php 
    $attributes=array(
        'name'=>'updatecustomer',
        'id'=>'updatecustomer',
        );
    echo form_open('masterdata/manage_customers',$attributes);
?>
<div id="validation_failed">
    <?php
        echo validation_errors();
    ?>
</div>
<?php if(isset($records)) {?>
<table id="hor-minimalist-a">
    <tr>
        <th>&nbsp;</th><th>&nbsp;</th><th>Customer Name</th><th>Address Line 1</th><th>Address Line 2</th><th>Suburb</th><th>City</th><th>Postal Code</th><th>Contact Name</th><th>Contact Email</th><th>Contact Tel</th>
    <tr>

<?php if(isset($records)) : foreach ($records as $row) : ?>
    <tr>
        <td>
<?php echo anchor('masterdata/confirm_delete_customer/'.$row->id, img(array('src'=>'images/delete_icon.png','border'=>'0','alt'=>'Delete'))); ?>
        </td>
        <td>
            <input type=checkbox name="editcustomer[]" id="editcustomer[]" value="<?php echo $row->id ?>">
        </td>
        <td>
            <input class="inputwide" type="text" name="customer_name_<?php echo $row->id ?>" id="customer_name_<?php echo $row->id ?>" value="<?php echo $row->customer_name ; ?>" >
        </td>
        <td>
            <input class="inputmedium" type="text" name="address_line_1_<?php echo $row->id ?>" id="address_line_1_<?php echo $row->id ?>" value="<?php echo $row->address_line_1 ; ?>" >
        </td>
        <td>
            <input class="inputmedium" type="text" name="address_line_2_<?php echo $row->id ?>" id="address_line_2_<?php echo $row->id ?>" value="<?php echo $row->address_line_2 ; ?>" >
        </td>
        <td>
            <input class="inputmedium" type="text" name="suburb_<?php echo $row->id ?>" id="suburb_<?php echo $row->id ?>" value="<?php echo $row->suburb ; ?>" >
        </td>
        <td>
            <input class="inputmedium" type="text" name="city_<?php echo $row->id ?>" id="city_<?php echo $row->id ?>" value="<?php echo $row->city ; ?>" >
        </td>
        <td>
            <input class="inputnarrow" type="text" name="postalcode_<?php echo $row->id ?>" id="postalcode_<?php echo $row->id ?>" value="<?php echo $row->postalcode ; ?>" >
        </td>
        <td>
            <input class="inputmedium" type="text" name="primary_contact_name_<?php echo $row->id ?>" id="primary_contact_name_<?php echo $row->id ?>" value="<?php echo $row->primary_contact_name ; ?>" >
        </td>
        <td>
            <input class="inputmedium" type="text" name="primary_contact_email_<?php echo $row->id ?>" id="primary_contact_email_<?php echo $row->id ?>" value="<?php echo $row->primary_contact_email ; ?>" >
        </td>
        <td>
            <input class="inputmedium" type="text" name="primary_contact_tell_<?php echo $row->id ?>" id="primary_contact_tell_<?php echo $row->id ?>" value="<?php echo $row->primary_contact_tell ; ?>" >
        </td>

    </tr>
<?php endforeach ; ?>
    </table><br>
<input type="submit" value="Update Checked Customers">
<?php endif; ?>

<?php echo form_close(); ?> 
```

**控制器**

```
function manage_customers()
    {

        $data['title']="Manage Customers";
            //query model to get data results for form
            $data=array();

            if($query=$this->model_master_data->get_customer_records()){
                $data['records']=$query;
            }
            $editcustomer = $this->input->post('editcustomer');

            if( $this->input->post('editcustomer') != false ){
            foreach($editcustomer as $row_id)
            {
                $this->form_validation->set_rules("customer_name_" . $row_id, "Customer name", "required|min_length[6]");
                $this->form_validation->set_rules("address_line_1_". $row_id,"`Address Line 1`","required|xss_clean|min_length[6]");
                $this->form_validation->set_rules("address_line_2_". $row_id,"`Address Line 2`","xss_clean|min_length[6]");
                $this->form_validation->set_rules("suburb_". $row_id,"`Suburb`","required|xss_clean|min_length[6]");
                $this->form_validation->set_rules("city_". $row_id,"`City`","required|xss_clean|min_length[6]");
                $this->form_validation->set_rules("postalcode_". $row_id,"`Postal Code`","required|xss_clean|min_length[4]|max_length[5]");
                $this->form_validation->set_rules("primary_contact_name_". $row_id,"`Contact Person Name`","required|xss_clean|min_length[6]");
                $this->form_validation->set_rules("primary_contact_email_". $row_id,"`Contact Person email`","required|valid_email|xss_clean");
                $this->form_validation->set_rules("primary_contact_tell_". $row_id,"`Contact Person tell`","required|xss_clean|min_length[10]|max_length[14]");

            }
            }

            if ($this->form_validation->run() == FALSE){

                $data["message"]="";

                $this->load->view("master_data/view_master_data_header",$data);
                $this->load->view("master_data/view_master_data_nav");
                $this->load->view("master_data/view_content_master_data_manage_customers",$data);
                $this->load->view("master_data/view_master_data_footer");

            } else {
                // single update - working
                if( $this->input->post('editcustomer') != false )
                {
                    foreach ($editcustomer as $row_id)
                    {
                        $data = array( 
                        'customer_name' => $this->input->post('customer_name_'.$row_id),
                        'address_line_1' => $this->input->post('address_line_1_'.$row_id),
                        'address_line_2' => $this->input->post('address_line_2_'.$row_id),
                        'suburb' => $this->input->post('suburb_'.$row_id),
                        'city' => $this->input->post('city_'.$row_id),
                        'postalcode' => $this->input->post('postalcode_'.$row_id),
                        'primary_contact_name' => $this->input->post('primary_contact_name_'.$row_id),
                        'primary_contact_email' => $this->input->post('primary_contact_email_'.$row_id),
                        'primary_contact_tell' => $this->input->post('primary_contact_tell_'.$row_id),
                        );

                        $this->model_master_data->update_customer_records( $row_id, $data );
                    }
                     $this->session->set_flashdata('dbaction', 'Selected Records have been updated successfully');
                    redirect('masterdata/manage_customers', 'refresh');
                    }

            }
    } 
```

# highcharts - HighCharts：yAxis 中的平移发生得太慢

> ID：15186620
> 
> 赞同：1
> 
> 时间：2013-03-03T14:18:53.457
> 
> 标签：highcharts

我编写了一个用于在 yAxis 中平移的小代码，但它有点慢。如果我增加 tickInterval 的值，它会变得更快。但缺点是随着tickInterval的增加，当我拖动鼠标小于tickInterval大小时，代码开始奇怪地工作（尝试在我的小提琴中将tickInterval更改为500，然后将鼠标拖动一分钟。

我的[jsfiddle](http://jsfiddle.net/sandeepy02/W78Fz/4/)链接。

相关代码：

```
var mouseY;
$(chart.container)
.mousedown(function(event) {
    mouseY=event.offsetY;
    yData=chart.yAxis[0].getExtremes();
    yDataRange=yData.max-yData.min;
    isDragging=true;
})
.mousemove(function(e) {
    var wasDragging = isDragging;
    if (wasDragging) {
        yVar=mouseY-e.pageY; 
        if(yVar!=0) {
            yVarDelta=yVar/500*yDataRange;
            chart.yAxis[0].setExtremes((yData.min-yVarDelta),(yData.max-yVarDelta));
        }
    }
})
.mouseup(function (e) {
    isDragging = false;
}); 
```

如果有人可以提供将像素（e.pageY）转换为 y 坐标的替代路线，也将不胜感激。正如您在代码中看到的那样，目前我正在做一个解决方法。

**编辑我在这个**[jsfiddle](http://jsfiddle.net/sandeepy02/W78Fz/5/) 中包含了 translate 函数，并设置了这样的逻辑，使得平移只发生在 mouseup 而不是 mousemove。我目前面临的问题是，如果拖动小于刻度间隔，代码不仅会平移，还会缩放。我推测它的发生是因为 yAxis 最小值和最大值的变化发生在最小值的下限和最大值的上限处。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T13:13:59.703

这里有几个问题。首先，当您调用 setExtremes 时，您的范围会变大（导致缩放效果）。这是因为您没有按精确的刻度间隔移动。您可以通过将 y 轴上的刻度上的 set/end 设置为 false 来解决此问题：

```
 yAxis: {
        min: -50,
        tickInterval: 500,
        startOnTick:false,
        endOnTick:false
    }, 
```

将像素转换为坐标的方法是使用“翻译”。我将您的第一个 jsfiddle 更改如下：http: [//jsfiddle.net/uLHCx/](http://jsfiddle.net/uLHCx/)

```
 if(yVar<-50 || yVar > 50) {
           mouseY = e.pageY;
            yVarDelta=yVar/100*yDataRange;
           yVarDelta =  chart.yAxis[0].translate(e.pageY) - chart.yAxis[0].translate(e.pageY - yVarDelta);
            chart.yAxis[0].setExtremes((yData.min-yVarDelta),(yData.max-yVarDelta));
        } 
```

您可以通过更改 yVarDelta 的计算来更改滚动量。

请注意，我对 yVar 进行了范围检查，以便我们不会重新显示，除非鼠标移动了给定的数量，并重置 mouseY 的值。

这可能不完全符合您的要求，但它应该足以让您根据需要对其进行修改。

# javascript - 无法访问 DOM 元素

> ID：15186624
> 
> 赞同：-1
> 
> 时间：2013-03-03T14:19:43.133
> 
> 标签：javascript, dom

我编写了一个带有正文 onload 事件的 Web 应用程序。我知道这不是最优的，所以我想使用 DOMContentLoaded 来触发我的 init 事件。

我有一个奇怪的问题，我无法访问我的 DOM 元素，我不知道为什么：/。

HTML：

```
<!DOCTYPE html>
<html>
<head>
    <title>Test</title>
    <script type="text/javascript" src="main.js"></script>
</head>
<body>
    <div id="test">Hello World</div>
</body>
</html> 
```

JS：

```
// add event listener
document.addEventListener('DOMContentLoaded', init, false);

function init () {
    // pop up
    alert(document.getElementById(test).innerHTML);
} 
```

有人看到问题了吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-03T14:22:20.620

您将未定义的*变量* `test`传递给`getElementById()`函数，而不是*字符串*value `'test'`。

所以

```
document.getElementById(test); // Incorrect - as an undefined varible 
```

实际上应该是

```
document.getElementById('test') // Correct - as a string value 
```

或者

```
var element_id = 'test';
document.getElementById(element_id) // Correct - as a defined variable 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-03T14:22:28.077

在测试周围添加双引号，即“测试”

```
document.addEventListener('DOMContentLoaded', init, false);

function init () {
    // pop up
    alert(document.getElementById("test").innerHTML);
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-03T14:26:55.193

如果您的 init 函数被执行，那么您可以在您的 id 中添加引号：

```
document.getElementById(test) 
```

变成

```
document.getElementById('test') 
```

# android - 通过 MDM 推送更新会终止应用程序

> ID：15186637
> 
> 赞同：1
> 
> 时间：2013-03-03T14:20:36.660
> 
> 标签：android, mdm

我们开发了一个 Android 应用程序，并通过 MDM（移动设备管理，Soti Mobi 控制）推送新的安装和更新。发送的更新会在没有用户确认的情况下静默升级应用程序。因此，如果用户正在使用应用程序，则会自动停止、升级和从头开始，因此用户会丢失他们应该发送到服务器的重要更改。

是否可以在 mobi 控件中配置更新并提示用户（类似于我们手动升级到较新版本的 APK 时出现的情况）？

或者

我可以覆盖任何将在升级事件中调用的生命周期方法，并且如果用户的更改可用，我想中止更新吗？

已经发布了[类似的问题](https://stackoverflow.com/questions/15157804/prevent-data-loss-on-app-upgrade)，但尚未收到任何答案。

# php - PHP处理表单数据

> ID：15186642
> 
> 赞同：3
> 
> 时间：2013-03-03T14:20:51.870
> 
> 标签：php, mysql, forms

您好我是 PHP 新手，我使用 xampp 作为本地主机和 html 表单来收集数据。

我的表格要求提供太平洋数据，我正试图让它将该数据放入 MySQL 数据库客户端

我收到错误警告：mysql_query() 期望参数 2 是资源，第 14 行 C:\xampp\htdocs\service_record.php 中给出的对象错误：

表格代码

```
<center>
    <form method="post" action="service_record.php">
        <table border="1" cellspacing="50">
            <center><h1>Record Service Record</h1></center>
            <tr>
                <td>Date joined  <input name="join_date"size="34" maxlength="30"> </td>
                <td>Discharge date  <input name="leave_date"size="34" maxlength="30"><br /></td>
            </tr>
            <tr>
                <td>Rank <input name="rank"size="20" maxlength="20"> </td>
                <td>time served <input name="time_served"size="20" maxlength="10"></td>
           </tr>
           <tr> 
               <td>Service <input name="service"size="34" maxlength="30"></td> 
               <td>Regt/Corps  <input name="regt_corps"size="34" maxlength="30"><br /></td>
           </tr>
       </table>

       <input type="reset" value="Reset Form"/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;  <input  type="submit" value="Send" />
</center>
    </form> 
```

php代码

```
<?php
    $con=mysqli_connect("localhost","client","");
    // Check connection
    if (mysqli_connect_errno())
    {
        echo "Failed to connect to MySQL: " . mysqli_connect_error();
    }

    $sql="INSERT INTO service_record (join_date,leave_date,rank,time_served,service,regt_corps)
     VALUES
     ('$_POST[join_date]','$_POST[leave_date]','$_POST[rank]','$_POST[time_served]','$_POST[service]','$_POST[regt_corps]')";

    if (!mysql_query($sql,$con))
    {
        die('Error: ' . mysql_error());
    }
    echo "The Staff Details have been added to database";

    mysql_close($con);

?> 
```

书换了100次，我也看了书，还是没有结果。我已经阅读了这个网站和许多其他网站，我只是可以得到它。

如果可以的话请帮忙。

抢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-03T14:26:01.763

您正在使用`mysqli_connect`，但随后，您正在检查`!mysql_query`并关闭它为`mysql_close`.

因此，您必须决定是要使用[mysql](http://php.net/manual/en/book.mysql.php)还是[mysqli](http://php.net/manual/en/book.mysqli.php)。起初，尝试机制，`mysql`到处使用，它应该工作得很好。但是，请全部重写为`mysqli`，它更新更好（！）。

[什么时候应该使用 MySQLi 而不是 MySQL？](https://stackoverflow.com/questions/8891443/when-should-i-use-mysqli-instead-of-mysql)

[使用 PHP 时的 MySQL 与 MySQLi](https://stackoverflow.com/questions/548986/mysql-vs-mysqli-in-php)

希望它可以帮助你。

# css - CSS上的“<”或“>”是什么意思？

> ID：15186645
> 
> 赞同：0
> 
> 时间：2013-03-03T14:20:57.907
> 
> 标签：css

我在下面看到代码css：

`#nav .hover > a`

上面代码中的“>”或“<”是什么意思？谁能给我解释一下？谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-03T14:21:55.803

`>`称为**[子选择器](http://meyerweb.com/eric/articles/webrev/200006b.html)**。你把所有`a`的**直接孩子**都拿走`#nav .hover`。

不允许使用该符号`<`，因为它不能理解为“小于”或“大于”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-03T14:22:22.490

CSS中没有`<`。其中，`>`用于直接子选择器。

说，里面有很多元素`#nav .hover`。考虑这个 HTML：

```
<div id="nav">
  <div class="hover">
    <a href="#">Direct Link</a>
    <p><a href="#">Indirect Link</a> is this.</p>
  </div>
</div> 
```

该代码`#nav .hover > a`将仅选择直接链接。

其中，如果您放置类似`#nav .hover a`的内容，它将选择 . 下的所有链接`#nav .hover`。即，它将同时选择直接链接和间接链接。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-03T14:22:10.070

它只选择该元素的子元素。换句话说：

```
#menu li:hover > ul { display:block; } 
```

将为其中的任何`<ul>`s创建样式`<li>`（例如使用下拉菜单）`display:block`

# java - 如何使用 LWJGL 在屏幕上绘制 BufferedImage？

> ID：15186649
> 
> 赞同：2
> 
> 时间：2013-03-03T14:21:17.903
> 
> 标签：java, image, opengl, textures, lwjgl

我想知道如何在 LWJGL Java 中使用 BufferedImages 绘制纹理。有谁知道如何做到这一点或者是不可能的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T14:41:07.793

要将图像绘制到屏幕上，您首先需要获取要绘制图像的容器或组件的[Graphics 对象](http://docs.oracle.com/javase/1.4.2/docs/api/java/awt/Graphics.html)。然后使用该图形对象，调用[drawImage()](http://docs.oracle.com/javase/tutorial/2d/images/drawimage.html)方法，并提供相关细节。这会将图像输出到容器中，在您决定的位置。

# php - 添加嵌套表单行 PHP/Javascript

> ID：15186650
> 
> 赞同：0
> 
> 时间：2013-03-03T14:21:30.370
> 
> 标签：php, javascript, jquery, forms

**概述：** 我正在创建一个动态网络发票系统，大部分页面都是文本区域，我使用表格进行嵌套，因为它们会在提交表单后将数据发布到单独的表格中。When the "Nested" Add a Row is selected, it should add a row inside with form field that has details on which row and which position so it can be gathered in a for loop when it is posted.

图片： [![在此处输入图像描述](../Images/658fae93d59d5a6f1987eafa24f76b08.png)](http://alhui.com/files/javascript-error.png)

**问题：**

1.  在圆圈区域中添加一行不会将其添加到最后一行，它会添加它，就像它在图像中一样。此外，它仅适用于第一个项目，第二个添加行甚至不注册点击。
2.  我不确定如何获取变量以在这个特定的索引大小和父索引号（位于 javascript 行 2-3）中创建表单名称 [] []

**相关代码：**

Javascript

```
$("#additemrow").click(function(){
  var currentListItem = $(this).length;
  var currentJobItem = $(this).parents('#items').index('#items');
  currentListItem++;
  $("#listitem:last").after(/*Blank Form Row*/);
  bind();
}) 
```

PHP

```
<table id="items">
  <tr class="item-row"><td>/*form elements*/</td></tr>
  <tr class="list-row">
   <td colspan=5>
    <table class="itemlist">
     <?php
     $itemCount = 0;
     foreach($jobListItem as $items) {
      foreach($items as $item) {
       if($problem['item_id'] == $item['item_id']) { 
    ?>
    <tr id="listitem">
     <td class="list-item">
       <div class="delete-wpr">
         <textarea class="item" name="item[/*A PARENT ITEM NUMBER*/][<?php echo $itemCount;?>][item]"></textarea>
         <a class="deleteitem" href="javascript:;" title="Remove row">X</a>
        </div>
       </td>
      </tr>
     <?php
      }
      $itemCount++;
     }
    }
     ?>
     <tr>
     <td colspan="5"><a id="additemrow" href="javascript:;" title="Add a row">Add a row</a></td>
     </tr>
    </table>
    //NEXT ITEMLIST GOES HERE
   </table> 
```

编辑： Foreach 循环仅用于从数组中获取变量。

如果您需要更多详细信息或代码位，请告诉我，因为我不确定我是否提供了足够的信息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T16:30:23.573

关于您的行在顶部插入的问题：

*   就像 Bertrand Lefort 已经说过的那样：在 JQuery 中，您可以通过调用将节点附加到另一个（父）节点的**末尾**`parent_node.append(child_node)`（更多信息[here](http://api.jquery.com/append/)）
*   [`another_element.before(element)`](http://api.jquery.com/before/)您还可以通过调用/[`another_element.after(element)`](http://api.jquery.com/after/)或（注意反向语法！）[`element.insertBefore(another_element)`](http://api.jquery.com/insertBefore/)/在另一个元素之前/之后添加元素[`element.insertAfter(another_element)`](http://api.jquery.com/insertAfter/)

关于只有第一个“添加行”注册点击的问题：

*   您正在选择`id`。Id 是（或应该是）唯一的，因此当您调用`$("#additemrow").click(function(){ ... })`onClick 函数时，它只会附加到与给定 id 匹配的第一个元素（据我所知）。
*   如果您想将相同的 onClick 功能附加到多个元素，请`class`改用。但是，如果这样做，您必须确保插入*相*对于单击元素的新元素（例如，通过使用`.parent()`或`.siblings()`类似函数）。

关于您的问题＃2，我真的不知道您要做什么，但这就是我注意到的：

*   `currentListItem`并且`currentJobItem`似乎在它们的范围内未使用，因为您将它们声明为局部变量但不使用它们
*   `.parents('#items').index('#items')`是多余的，因为`.parents('#items')`已经只选择了匹配的父元素`'#items'`。如果要获取匹配元素的索引，请使用`index()`（不带参数，[更多请参见jquery API](http://api.jquery.com/index/)）

其他一些注意事项：

*   如果您有时间（并且需要一个干净的项目），我建议您使用 Smarty 之类的模板引擎将您的逻辑与输出分开。这提高了代码的可读性，也更容易找到/消除错误。

我希望这会有所帮助。如果您提供有关您正在尝试做什么以及您所期望的不起作用的更多信息，我将尝试提供进一步的帮助并更新我的答案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T14:51:26.900

您可以将 id 添加到父 html 元素，然后在单击处理程序中：

```
$("#additemrow").click(function(){
   $("#parent").append(/*Blank Form Row*/);

}) 
```

# php - 使用php include时的神秘1

> ID：15186653
> 
> 赞同：-2
> 
> 时间：2013-03-03T14:21:42.457
> 
> 标签：php

我的备份内容（如果数据库失败）是通过 include() 引入的。出于某种原因，在包含包含的 div 下方有一个神秘的单独的“1”。它每次都会这样做，但只是在内容包含上。我检查了功能，涉及的所有页面，没有流浪 1。如果它从数据库加载，一切都很好。

任何想法为什么？

```
(empty($Content)?(empty($dbContent)?include($URL):$dbContent):$Content); 
```

这就是函数的核心。没有提供真正的代码，只是一个奇怪的 1。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T22:25:53.410

显然是嵌套的三元组导致了这个问题。它在函数之后输出一个 1，就好像它在说 echo include()

很奇怪，因为其余的功能似乎工作正常。唯一的区别是include()。

如果出现任何更奇怪的行为，我将切换回速写。很高兴知道为什么它对待它就像它前面有回声一样。

# php - 在 PHP 中使用 mkdir 创建可写目录

> ID：15186654
> 
> 赞同：0
> 
> 时间：2013-03-03T14:21:47.123
> 
> 标签：php, permissions, mkdir

我有这个代码来创建递归目录：

```
define('_PATH', '/www/virtual/user/galleries');
$gallery_path = "/".intval($gallery['id']);

if(!is_dir(_PATH.$gallery_path))
    mkdir(_PATH.$gallery_path, 0777, false); 
```

我使父目录（'画廊'）可写（0777）。我可以确认该目录已创建。但是，它不是使用 0777 权限创建的，而是使用 0755！我对此没有任何解释。:-(

# c# - 在 Visual Studio 2012 中拥有自己的双标签模板

> ID：15186658
> 
> 赞同：2
> 
> 时间：2013-03-03T14:21:53.770
> 
> 标签：c#, templates, visual-studio-2012

所以在 Visual Studio 中有一个技巧，当你输入例如“for”并双击 Tab 键时，Visual Studio 将创建

```
for (int i = 0; i < length; i++)
        {

        } 
```

有什么方法可以创建我自己的模板吗？因为我不使用 LINQ，所以我想在输入“db.A_”时进行

```
db.A_TableName.Where(k => k.Field == Value).Select(k =>
    new
    {
        Name = k.Field
    }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-03T14:51:44.603

您可能指的是[代码片段](http://msdn.microsoft.com/en-us/library/ms165392%28v=vs.80%29.aspx%20%22code%20snippets%22.)。文档解释了如何创建新的片段以及[如何添加它们](http://msdn.microsoft.com/en-us/library/9ybhaktf%28v=vs.80%29.aspx)。根据可以在文件夹中找到的现有片段创建新片段可能是最简单的`C:\Program Files (x86)\Microsoft Visual Studio 11.0\VC#\Snippets\1033\Visual C#`（取决于您的 VS 版本和操作系统）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-06-22T10:52:23.567

在 Visual Studio 中有更多的默认片段

> C:\Program Files (x86)\Microsoft Visual Studio (#Version)\VC#\Snippets\1033

xml 格式的文件路径。

我们还可以向本地机​​器添加更多自定义片段。这是特定于机器的。

[单击此处获取有关片段的 dotnetperls 文档](http://www.dotnetperls.com/snippet)

# java - 如何编写启动画面？

> ID：15186662
> 
> 赞同：0
> 
> 时间：2013-03-03T14:22:02.133
> 
> 标签：java, swing, jframe

我正在使用 Java 制作游戏。

目前，我有几节课。重要的是：

*   LevelBuilder 类，在调用它的默认构造函数时，将创建一个包含所需组件的 jframe，然后运行一个 gameloop 线程，该线程将使用后缓冲更新甚至 1/20 秒。
*   另一个类是 MainMenu 类，我希望在其中包含主要方法并在 JFrame 中显示我的徽标。

最后，我想让 MainMenu 向 JFrame 绘制一个启动画面，然后在 5 秒后 LevelBuilder 在原始 JFrame 内绘制，而不创建新的。

对不起，如果这是一个基本问题，我刚开始学习 Java。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-03T17:47:53.493

可以通过清单简单地将启动画面添加到您的 jar 中。

问题是默认情况下，只要加载 Swing 应用程序，它就会显示。因此，第 2 次（第 3 次、第 4 次等）执行会快速显示启动画面，因为 GUI 使用的 JVM 和类等已被加载。

在我的游戏中，为了创造一个停留更长时间的飞溅，我有以下两种方法：

```
/**
 * This will render the splash for longer than just loading components
 *
 * @return true if there is a splash screen file supplied (set via java or
 * manifest) or false if not
 * @throws IllegalStateException
 */
private boolean showSplash() throws IllegalStateException {
    final SplashScreen splash = SplashScreen.getSplashScreen();
    if (splash == null) {
        return false;
    }
    Graphics2D g = splash.createGraphics();
    if (g == null) {
        return false;
    }
    for (int i = 0; i < 100; i++) {//loop 100 times and sleep 50 thus 100x50=5000milis=5seconds
        renderSplashFrame(g);
        splash.update();
        try {
            Thread.sleep(50);
        } catch (InterruptedException e) {
        }
    }
    splash.close();
    return true;
}

private void renderSplashFrame(Graphics2D g2d) {
    //draw anyhting else here
} 
```

这将被称为：

```
JFrame frame=...;

 ...

//show splash
if (!showSplash()) {
     JOptionPane.showMessageDialog(null, "SplashScreen could not be shown!", "Splash Error: 0x003", JOptionPane.ERROR_MESSAGE);
 }

// set JFrame visible
frame.setVisible(true);
frame.toFront(); 
```

请注意，`showSplash()`如果没有提供启动画面，即您没有在清单中添加一个，它将返回 false。

如果您还没有，我还建议您阅读[如何创建启动画面。](http://docs.oracle.com/javase/tutorial/uiswing/misc/splashscreen.html)

另请参阅其他类似的答案/问题：[Make splash screen with progress bar like Eclipse](https://stackoverflow.com/questions/11399971/make-splash-screen-with-progress-bar-like-eclipse)

# sql-server - 替换sql server中的整个单词

> ID：15186663
> 
> 赞同：1
> 
> 时间：2013-03-03T14:22:05.893
> 
> 标签：sql-server

我想在 SQL Server 中查找并替换整个单词，例如，如果我找到单词“day”并且我想用空格替换单词“day”。但是在搜索单词“day”时，其他单词应该是结果集的一部分，例如“Holiday”。

我在下面的链接中得到了解决方案。但我无法在替换语句中使用它

[http://blog.conceptinfoway.net/databases-database-server-web-database-online-database-database-hosting-database-developer-database-management-database-development/how-to-amatch-whole-word-在-sql/](http://blog.conceptinfoway.net/databases-database-server-web-database-online-database-database-hosting-database-developer-database-management-database-development/how-to-amatch-whole-word-in-sql/)

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T19:46:07.537

如果您只想要 ram 而不是程序，那么您可以使用它

```
create table temp(nnn varchar(max))
insert into temp values('programme'),('is ram home')
select * from temp where nnn like '% ram %'
update temp
set nnn='x' where nnn like '% ram[ .,'']%'
select * from temp
drop table temp 
```

这只会改变第二个项目，而不是第一个。

# jquery - onRowSelect：如何获取单元格索引

> ID：15186671
> 
> 赞同：0
> 
> 时间：2013-03-03T14:22:28.703
> 
> 标签：jquery, asp.net-mvc-3, telerik-grid, telerik-mvc

我有telerik网格。

```
@(Html.Telerik().Grid(Model)
        .Name("Grid")
        .Columns(columns =>
        {
            //columns & bound
        })
        .ClientEvents(e=> e.OnRowSelect("OnRowSelect")) 
```

通过单击该行，我需要知道单元索引（单击的那个）。
我有这个功能：

`function onRowSelect(e){}`

我如何从那里提取它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T18:35:02.500

您无法通过 RowSelect 事件检索列索引。

一旦网格初始化（通过 OnLoad 事件），我建议您像这样附加自己的委托事件：

```
function onGridLoad(){
    $(this).data().tGrid.$tbody.on('click','td',function(e){
        alert('COLUMN INDEX: '+$(this).index())
    })
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T01:18:00.360

我的回答是基于这个问题，归功于[jQuery 中的 Table row and column number](https://stackoverflow.com/questions/788225/table-row-and-column-number-in-jquery)。

试试这个：

Javascript：

```
<script>
    function OnDataBound() {
        // #Grid needs to match the name of the grid in View's markup.
        $('#Grid table td').click(function () { 
            var col = $(this).parent().children().index($(this));
            var row = $(this).parent().parent().children().index($(this).parent());
            alert('Row: ' + row + ', Column: ' + col);
        });

        //As a side note, you can get at the contents of the row selected with 
        //something along these lines: 
        //(this will not work unless you substitute the "EmployeeId" id with a valid one from your model.
        $('#Grid table tr').dblclick(function () {
            alert($(this).find("span[id=EmployeeId]")[0].innerText);  //EmployeeId is just a column name used for example purposes.
        });
    }

</script> 
```

您的网格标记：

```
@(Html.Telerik().Grid(Model)
    .Name("Grid")
    .Columns(columns =>
    {
        //columns & bound
    })
    .ClientEvents(e=> e.OnDataBound("OnDataBound"))  // This changed to a OnDataBound event. 
```

# jquery - 更改多个选择器上的多个属性不起作用？

> ID：15186672
> 
> 赞同：0
> 
> 时间：2013-03-03T14:22:34.087
> 
> 标签：jquery, attributes, clone, css-selectors

我正在尝试学习和理解 jquery，但我在使用多个选择器时遇到了一些问题。当我的一个选择器中有一个克隆的 jquery 对象时，我似乎无法更新属性、id 和 name。

## HTML

```
<div class="File">
    Choose a file:
<input id="File0" name="File0" type="file" />
</div>

<input id="AddFile" type="button" value="Add a File" />

<div id="div1"></div>
<div id="div2"></div> 
```

## jQuery

```
 var lastId = 0;
$(document).ready(function () {
        $("#AddFile").click(function () {
            var id = "File" + ++lastId;
            var myInput = $(".File:first").clone(true);

            // Why doesn't this update the input of type 'file' 
            // on the page when selecting multiple selectors?
            $("input:file", myInput ).attr({ id: id, name: id });

             //But if you have omit 'myInput' like this, it will work.
             // $("input:file").attr({ id: id, name: id });

             //This will also work
             //$('#div1, #div2').attr({ id: id, name: id });

             //If I add in the cloned object at the end, it will only
             //modify the input element and not the div with class=File
             //imyInput.insertBefore("#AddFile");
        });
 }); 
```

当我运行上面的代码时。无论我点击 AddFile 按钮多少次，dom 仍然读取 id="File0" name="File0" type="file"。"

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T14:53:18.843

您没有对克隆的对象做任何事情。添加克隆对象或替换为现有对象。

**注意：使用 .clone() 方法时，您可以在将克隆的元素或其内容（重新）插入到文档之前对其进行修改。**( [http://api.jquery.com/clone/](http://api.jquery.com/clone/) )

如果你只想更新 id 和 name，你可以使用这个 JS fiddle **[http://jsfiddle.net/adiioo7/22wja/2/](http://jsfiddle.net/adiioo7/22wja/2/)**

JS：-

```
$(document).ready(function () {
    var lastId = 1;
    $("#AddFile").click(function () {
        var id = "File" + ++lastId;
        var myInput = $(".File:first");

        $(myInput).attr({
            id: id,
            name: id
        });

    });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T15:07:21.130

似乎工作正常。我已经初始化了 var lastId 并使用 appendTo() 将克隆放在页面中：

[http://jsfiddle.net/yWVhC/2/](http://jsfiddle.net/yWVhC/2/)

```
var lastId = 0;

$("#AddFile").click(function () {
    var id = "File" + ++lastId;
    var myInput = $(".File:first").clone(true).appendTo('body');

    // Why doesn't this update the input of type 'file' 
    // on the page when selecting multiple selectors?
    $("input:file", myInput).attr({
        id: id,
        name: id
    });
}); 
```

如果这没有涵盖它，您将需要更清楚地了解问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-03T15:16:22.770

试试这个：http: [//jsfiddle.net/fcscd/1/](http://jsfiddle.net/fcscd/1/)

```
$(document).ready(function () {

  var lastId = 0;
  $("#AddFile").click(function () {
      var id = "File" + (++lastId);
      var myInput = $(".File:first").clone(true).insertAfter(".File:last");

      myInput.attr({
          id: id,
          name: id
      });
  });
}); 
```

克隆并在最后一个元素之后插入元素`<div class="File">`，然后更新属性

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-03-03T15:08:50.207

这在 jQuery 中无效：

```
$("input:file", myInput ).attr({ id: id, name: id }); 
```

在上面，myInput 会改变属性，但是第一个 input 元素不会改变。

首先将克隆的对象添加到 DOM：

```
var myInput = $(".File:first").clone(true).appendTo("body"); 
```

然后更改属性：

```
myInput.attr({ id: id, name: id }); 
```

# python - 无法在 python 中导入 audiolab

> ID：15186674
> 
> 赞同：4
> 
> 时间：2013-03-03T14:22:39.700
> 
> 标签：python, audio-processing

我从这个来源安装了 audiolab：

[http://www.lfd.uci.edu/~gohlke/pythonlibs/#scikits.audiolab](http://www.lfd.uci.edu/~gohlke/pythonlibs/#scikits.audiolab)

这些是我能找到的唯一适用于 python 2.7 的 Windows 二进制文件。

当我打电话时，`from scikits import audiolab`我收到以下错误：

```
Traceback (most recent call last):
  File "<pyshell#5>", line 1, in <module>
    from scikits import audiolab
  File "C:\Python27\lib\site-packages\scikits\audiolab\__init__.py", line 34, in <module>
    from pysndfile.matapi import *
  File "C:\Python27\lib\site-packages\scikits\audiolab\pysndfile\matapi.py", line 145, in <module>
    Format('wav', 'pcm16').file_format)
  File "_sndfile.pyx", line 170, in scikits.audiolab.pysndfile._sndfile.Format.__init__ (scikits\audiolab\pysndfile\_sndfile.c:1429)
NameError: _SNDFILE_FILE_FORMAT 
```

有没有办法解决它？如果不是，我应该使用什么来进行音频处理？（Audiolab 似乎是 audiotools 和 pyaudio 中最好的选择）

编辑：

替换 libsndfile-1.dll 后，我有这个新错误：

```
Traceback (most recent call last):
  File "<pyshell#1>", line 1, in <module>
    from scikits import audiolab
  File "C:\Python27\lib\site-packages\scikits\audiolab\__init__.py", line 25, in <module>
    from pysndfile import formatinfo, sndfile
  File "C:\Python27\lib\site-packages\scikits\audiolab\pysndfile\__init__.py", line 1, in <module>
    from _sndfile import Sndfile, Format, available_file_formats, \
  File "numpy.pxd", line 30, in scikits.audiolab.pysndfile._sndfile (scikits\audiolab\pysndfile\_sndfile.c:9632)
ValueError: numpy.dtype does not appear to be the correct type object 
```

注意：已安装 numpy。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T14:56:18.627

据我所知，您需要在下载二进制文件的地方安装[libsndfile-1.0.25](http://www.mega-nerd.com/libsndfile/)

> Scikits.audiolab 是一个使用 numpy 数组的音频文件 IO 包。链接到 libsndfile-1.0.25。

[您可以从这里](http://www.mega-nerd.com/libsndfile/#Download)下载安装程序。安装后您可能需要重新安装`scikits.audiolab`发行版`libsndfile`（尽管老实说，我不确定）。

但是，如果这看起来很费力，那么安装 Python 2.6 并按照[scikits 文档](http://cournape.github.com/audiolab/installing.html)的建议`audiolab`从[PyPi安装可能会更容易。](https://pypi.python.org/pypi/scikits.audiolab/)的版本是静态链接的，因此您无需自行安装。`PyPi``scikits.audiolab``libsndfile`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-23T17:11:39.283

我在 Mac OS 上遇到了同样的问题。安装 audiolab 后，您可能更新或安装了新版本的 python/numpy。我所做的是卸载 scikits.audiolab 并重新安装它，这样就消除了这个错误

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-10-01T20:45:13.520

我在 Ubuntu 10.04.4 LTS 上遇到了同样的问题。原因是安装的audiolab版本是python2.5，但同时Ubuntu 10.04.4 LTS python升级到2.6版本。新安装 audiolab 后（获取正确的版本）一切正常。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-11-16T00:55:20.097

您需要做的就是安装 libsndfile 也可以。

```
brew install libsndfile 
```

# c# - .net 没有按照我的命令启动任务 - 启动新任务的逻辑是什么

> ID：15186677
> 
> 赞同：2
> 
> 时间：2013-03-03T14:22:43.757
> 
> 标签：c#, wpf, multithreading, threadpool, multitasking

工作一段时间后注意到，即使您生成 1000 个任务，它们也不会立即启动。所以基本上即使我启动 1000 个任务，其中 100 个正在运行，其中 900 个正在等待运行。

所以我的问题是，他们是如何开始的？.net 如何确定何时开始运行任务或使其 waittorun ？我可以遵循什么方法来立即启动它们？我想让一定数量的任务/线程一直在运行。

如果我使用线程而不是任务，它们会立即开始运行，还是 .net 会像任务一样启动它们？

问题可能不是很清楚，所以请让我澄清一下。

基本上我正在产生 1000 个（保持这个数字产生。当一个任务完成开始另一个任务时）任务，但只有 125 个`Running`和 875 个`WaitingToRun`:)

这就是我开始任务的方式

```
 Task.Factory.StartNew(() =>
        {
            startCheckingProxies();
        }); 
```

时间：2019-04-01 标签：c#wpf 4.5

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-03T14:29:53.207

任务实际上只是引擎盖下的线程。

通过产生新线程可以获得多少好处是有限度的。每个线程都有一些开销，因此在某些时候，开销将超过产生新线程的好处。如果您将这些任务的产生留给框架，它将自己决定一次运行多少线程，并且它将根据它认为可以从这些线程中获得多少生产力来做出决定。

我很确定最佳数字不会是一千。我编写了 Windows 服务，其中同时运行的最佳线程数是机器中的内核数（在我的例子中是 4）。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-03T14:33:38.943

如果您在谈论`Task`对象，它们在线程池之上运行，因此它们不会通过在单独的线程上运行每个立即启动。相反，有限数量的任务最初将在来自池的线程上启动，然后这些线程将被重用于运行下一个任务等等。

当然，这只是一个高级描述，背后的逻辑更复杂，并且实现了很多优化。

[你可以在这里](http://msdn.microsoft.com/en-us/library/dd537609.aspx)和[这里](http://msdn.microsoft.com/en-us/library/0ka9477y.aspx)找到更多信息

您还可以使用`StartNew`允许您[调整选项和调度程序设置](http://msdn.microsoft.com/en-us/library/dd781658.aspx)的过载来启动任务。但是请注意，在大量线程上运行可能会导致性能下降。线程创建和上下文切换具有巨大的成本，并且运行数千个线程会，IMO，适得其反。

# excel - 格式日期编译错误

> ID：15186678
> 
> 赞同：0
> 
> 时间：2013-03-03T14:22:50.107
> 
> 标签：excel, vba

我试图在 vba 中表达以下内容：

```
Format(Sheet2!R[2]C[7], "Short Date") 
```

但我不断收到编译错误`[2]`，说：`Expected: List separator or )`

我正在尝试以该格式引用该单元格，因为它是要自动填充的更大公式的一部分。有什么我想念的吗？

* * *

所以在vba中，我会有类似的东西：

```
Worksheets("Sheet1").Select
Range("A3").Select
Selection.AutoFill Destination:=Range("A3:A" & rowCount) 
```

但是单元格`A3`不是由 vba 填充的，它是作为一个函数手动放入 excel doc 中的：

```
=Sheet2!B3&" "&Sheet2!A3&" "&Sheet2!C3&"_"&Sheet2!D3&"_"&Sheet2!E3 
```

我的问题是函数中的第二个值`"&Sheet2!A3&"`实际上是一个日期，当它被写入时，它会出现，`41331`而不是典型的“dd/mm/yyyy”格式。我希望将此值格式化为人类可读的格式并将其嵌入函数中，*但*仍保留自动填充功能。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T15:07:04.257

`Worksheets("Sheet2").Range("A1:D10")`会给你一个范围。请参阅[http://msdn.microsoft.com/en-us/library/office/ff836512.aspx](http://msdn.microsoft.com/en-us/library/office/ff836512.aspx)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-03T20:48:34.957

VBA 可以更改单元格内容，但是您将丢失公式。格式化单元格在任何情况下都无济于事，因为它包含一个字符串，该字符串由许多无法格式化为日期的值连接而成。

使用 Sam Ward 的评论中显示的 Excel [Text(Sheet2!A3,"dd/mm/yyyy")](http://office.microsoft.com/en-za/excel-help/text-function-HP010062580.aspx)函数来格式化公式中的原始数据。

# android - 加载 Fragment 时的警告

> ID：15186683
> 
> 赞同：1
> 
> 时间：2013-03-03T14:24:14.660
> 
> 标签：android, android-fragments

我多次收到此警告，但不知道其含义。

```
03-03 15:16:37.155: W/ResourceType(13485): Failure getting entry for 0x010802c9 (t=7 e=713) in package 0 (error -75) 
```

没有其他例外。

# java - 为什么相机的实时预览会旋转 90 度？

> ID：15186687
> 
> 赞同：0
> 
> 时间：2013-03-03T14:24:34.693
> 
> 标签：java, android, eclipse, android-layout, android-camera

我写了一个相机应用程序，但是当我想显示相机的实时预览时（在拍照之前），预览旋转了 90 度！这是我的相机活动代码：

```
public class CameraActivity extends Activity{
    public static final int MEDIA_TYPE_IMAGE = 1 ;
    private Camera mCamera;
    private CameraPreview mPreview;
    Uri photoPath ;
    protected void onStop()
    {
        super.onStop();
        mCamera.release();
    }
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_camera);

        // Create an instance of Camera
        mCamera = getCameraInstance();

        // Create our Preview view and set it as the content of our activity.
        mPreview = new CameraPreview(this, mCamera);
        FrameLayout preview = (FrameLayout) findViewById(R.id.camera_preview);
        ViewGroup.LayoutParams previewParam = preview.getLayoutParams() ;
        Parameters cameraParam =  mCamera.getParameters() ;
        double ratio = (double)cameraParam.getPictureSize().height / (double)cameraParam.getPictureSize().width  ;
      //  previewParam.height=  cameraParam.getPictureSize().height / 5 ;
       // previewParam.width = cameraParam.getPictureSize().width / 5  ;
        Display display = getWindowManager().getDefaultDisplay();
        Point size = new Point();
        try
        {
            display.getSize(size);
        }
        catch(java.lang.NoSuchMethodError ignore)
        {
            size.x = display.getWidth(); 
            size.y = display.getHeight() ;
        }
        int width = size.x;
        int height = size.y;
        previewParam.width =  width;
        previewParam.height = (int)(previewParam.width * ratio) ;
       // preview.setLayoutParams(previewParam) ;
        preview.addView(mPreview);
    }

    //Camera Classes here
    private final static String TAG = "Navid";
    public static Camera getCameraInstance() 
    {
        Camera c = null ;
        try
        {
            c = Camera.open() ;
        }
        catch(Exception e)
        {
        }
        return c ;
    }
    public class CameraPreview extends SurfaceView implements SurfaceHolder.Callback
    {
        private SurfaceHolder mHolder ;
        private Camera mCamera; 
        public CameraPreview(Context context , Camera camera)
        {
            super(context) ;
            mCamera = camera ;

            mHolder = getHolder();
            mHolder.addCallback(this);
            mHolder.setType(SurfaceHolder.SURFACE_TYPE_PUSH_BUFFERS);
        }
        public void surfaceCreated(SurfaceHolder holder)
        {
            try
            {
                mCamera.setPreviewDisplay(holder);
                mCamera.startPreview();
            }
            catch(IOException e)
            {
                Log.d(TAG,"Camera Preview Failed!: "+e.getMessage());
            }
        }
        public void surfaceChanged(SurfaceHolder holder , int m , int n , int w)
        {   
        }
        public void surfaceDestroyed(SurfaceHolder holder)
        {           
        }
    }
    private static File getOutputMediaFile(int type){
        // To be safe, you should check that the SDCard is mounted
        // using Environment.getExternalStorageState() before doing this.

        File mediaStorageDir = new File(Environment.getExternalStoragePublicDirectory(
                  Environment.DIRECTORY_PICTURES), "MyCameraApp");
        // This location works best if you want the created images to be shared
        // between applications and persist after your app has been uninstalled.

        // Create the storage directory if it does not exist
        if (! mediaStorageDir.exists()){
            if (! mediaStorageDir.mkdirs()){
                Log.d("MyCameraApp", "failed to create directory");
                return null;
            }
        }

        // Create a media file name
        String timeStamp = new SimpleDateFormat("yyyyMMdd_HHmmss").format(new Date());
        File mediaFile;
        if (type == MEDIA_TYPE_IMAGE){
            mediaFile = new File(mediaStorageDir.getPath() + File.separator +
            "IMG_"+ timeStamp + ".jpg");
        }else {
            return null;
        }
        return mediaFile;
    }
    //save the picture here
    private PictureCallback mPicture = new PictureCallback() {

    //  public final static int  MEDIA_TYPE_IMAGE = 1 ;
        @Override
        public void onPictureTaken(byte[] data, Camera camera) {

            File pictureFile = getOutputMediaFile(MEDIA_TYPE_IMAGE);
            photoPath = Uri.fromFile(pictureFile);
            if (pictureFile == null){
                Log.d("Errore Doorbin", "Error creating media file, check storage permissions: ");
                return;
            }

            try {
                FileOutputStream fos = new FileOutputStream(pictureFile);
                fos.write(data);
                fos.close();
                // these lines are for the gallery to scan the SDCard manually
                File mediaStorageDir = new File(Environment.getExternalStoragePublicDirectory(
                        Environment.DIRECTORY_PICTURES), "MyCameraApp");
                    sendBroadcast(new Intent(Intent.ACTION_MEDIA_MOUNTED, 
                        Uri.parse("file://"+ mediaStorageDir)));
              // photoPath = Uri.fromFile(mediaStorageDir) ;
               /* MediaScannerConnection.scanFile(CameraActivity.this,
                        new String[] { fos.toString() }, null,
                        new MediaScannerConnection.OnScanCompletedListener() {
                    public void onScanCompleted(String path, Uri uri) {
                        // code to execute when scanning is complete
                    }
               });*/
               // fos.close();
            } catch (FileNotFoundException e) {
                Log.d("Errore Doorbin", "File not found: " + e.getMessage());
            } catch (IOException e) {
                Log.d("Errore Doorbin", "Error accessing file: " + e.getMessage());
            }
            catch (Exception e)
            {
                Log.d("Errore Doorbin", "errore Kolli dade!" + e.getMessage()) ;
            }
        }
    };
    public void capture(View v)
    {
        //mCamera.takePicture(null, null, mPicture);
        //mCamera.release(); 
        //mCamera = getCameraInstance() ;
        //mCamera.startPreview();

        TakePictureTask takePicture = new TakePictureTask() ;
        takePicture.execute() ;
    }
    public void accept(View v)
    {
        Intent data = new Intent() ;
        data.setData(photoPath) ;
        setResult(RESULT_OK, data);
        finish() ;
    }
    public void retake(View v)
    {
        Button button = (Button)findViewById(R.id.button_accept);
        button.setVisibility(View.GONE);
        button = (Button)findViewById(R.id.button_capture) ;
        button.setVisibility(View.VISIBLE) ;
        button = (Button)findViewById(R.id.button_retake);
        button.setVisibility(View.GONE) ;

        mCamera.startPreview(); 
    }
    /**
     * A pretty basic example of an AsyncTask that takes the photo and
     * then sleeps for a defined period of time before finishing. Upon
     * finishing, it will restart the preview - Camera.startPreview().
     */

    private class TakePictureTask extends AsyncTask<Void, Void, Void> {

        @Override
        protected void onPostExecute(Void result) {
            // This returns the preview back to the live camera feed
            Button button = (Button)findViewById(R.id.button_accept) ;
            button.setVisibility(View.VISIBLE) ;
            button = (Button)findViewById(R.id.button_retake) ;
            button.setVisibility(View.VISIBLE);
            button = (Button)findViewById(R.id.button_capture);
            button.setVisibility(View.GONE);
            //mCamera.startPreview();
        }

        @Override
        protected Void doInBackground(Void... params) {
            mCamera.takePicture(null, null, mPicture);

            // Sleep for however long, you could store this in a variable and
            // have it updated by a menu item which the user selects.
            try {
                Thread.sleep(3000); // 3 second preview
            } catch (InterruptedException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }

            return null;
        }

    }

} 
```

在我的应用程序清单中，我已将此活动方向更改为纵向！

问题是什么 ？为什么会这样？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T14:31:19.390

这恰好是早期版本的 Android 中的一个**[错误](https://groups.google.com/forum/?fromgroups=#!topic/android-developers/_skvx5s4xpg)**。一种解决方法是**默认旋转相机**。

```
if (this.getResources().getConfiguration().orientation != Configuration.ORIENTATION_LANDSCAPE) {
        camera.setDisplayOrientation(90);
        lp.height = previewSurfaceHeight;
        lp.width = (int) (previewSurfaceHeight / aspect);
    } else {
        camera.setDisplayOrientation(0);
        lp.width = previewSurfaceWidth;
        lp.height = (int) (previewSurfaceWidth / aspect);
    } 
```

# qt - 带有 QMainWindow 单例的 SIGSEGV

> ID：15186689
> 
> 赞同：1
> 
> 时间：2013-03-03T14:24:45.630
> 
> 标签：qt, qt4, singleton, segmentation-fault, qmainwindow

我正在编写的应用程序是一些必须易于访问的类的唯一实例化。为此，我使用单例。

例如，我的核心定义为：

```
class Core : public QObject
{
        Q_OBJECT
    public:
        Core();
        ~Core();
        static Core& getCore()
        {
            static Core mycore;
            return mycore;
        }
        (...)
}; 
```

而且效果很好。但是，我尝试对我的 MainWindow 类执行相同的操作，该类从 QMainWindow 中断。我需要它才能从其他对象访问诸如geometry()之类的方法

然而 Core 工作得很好，在关闭程序时 MainWindow 会出错。主窗口析构函数被调用并执行一次（使用 qDebug() 进行调试），但我仍然有一个 SIGSEGV 信号。发生了什么？如何解决？

这是MainWindow的代码

```
class MainWindow : public QMainWindow
{
        Q_OBJECT
    public:
        MainWindow(QWidget *parent = 0);
        ~MainWindow();
        static MainWindow& getUi()
        {
            static MainWindow myUi;
            return myUi;
        }
    public slots:
        void refreshImage();
    private:
        Ui::MainWindow *ui;
};
MainWindow::MainWindow(QWidget *parent) :
    QMainWindow(parent),
    ui(new Ui::MainWindow)
{
    ui->setupUi(this);
    connect(&appCore(), SIGNAL(refreshed()), this, SLOT(refreshImage()));
}
MainWindow::~MainWindow()
{
    delete ui;
} 
```

和主要代码

```
QApplication app(argc, argv);
try
{
    appCore().setDevice(MDMA::Kinect);
    appUi().show();
    return app.exec();
} catch(MDMA::exn e) {
    (...)
} 
```

其中 appCore 和 appUi 是 Core::getCore 和 MainWindow::getUi() 的宏

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-03T18:12:14.740

此崩溃可能是由于您`QApplication`在`MainWindow`.

如果您无法`MainWindow`通过其他方式将您的 via 传递给需要它的代码（例如作为参数或 via `QObjecg::parent()`），您可以使用类似于`QApplication`使用它的[`instance`](http://qt-project.org/doc/qt-4.8/qcoreapplication.html#instance)方法（非拥有全局引用）的技术：

在. `MainWindow`_ *_* _ 然后在 的构造函数中将初始初始化为的`QApplication`全局指针（可能更好[`QPointer`](http://qt-project.org/doc/qt-4.8/qpointer.html)；例如 的静态成员）设置为。您还可以检查它是否已在此处初始化以强制执行唯一性。通过全局指针的公共访问器方法 ( ?)，您可以从任何地方访问该类，同时确保在.`MainWindow``0``this``MainWindow``instance``QApplication`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-03T19:09:40.107

如果要制作单音，请尝试使用通用技术，例如，如下所述： [http ://www.qtcentre.org/wiki/index.php?title=Singleton_pattern](http://www.qtcentre.org/wiki/index.php?title=Singleton_pattern)

希望阅读完所有文章后，很多问题都会消失。

对我来说，单音有很好的简单实现。

祝你好运！

# sql-server-2008 - 如何将 SqlCmd 命令保存到文件中？

> ID：15186692
> 
> 赞同：1
> 
> 时间：2013-03-03T14:25:19.867
> 
> 标签：sql-server-2008, sqlcmd, sql-scripts

我正在为 SQL Server 2008 使用 SqlCmd。我想将在 SqlCmd 中键入的所有命令保存到文本文件或脚本文件中。可能吗？如果是这样怎么做？

# r - 基于行内 NA 的数量的条件行删除

> ID：15186697
> 
> 赞同：4
> 
> 时间：2013-03-03T14:26:21.930
> 
> 标签：r, list, na

我希望根据以下两个条件从我的数据集中删除行：

1.  `NA`如果 3 个连续的单元格是或，则删除行
2.  如果四个或更多单元格`NA`

我的样本数据：

```
data <- rbind(c(1,1,2,3,4,2,3,2),
              c(NA,1, NA, 4,1,1,NA,2), 
              c(1,4,6,7,3,1,2,2), 
              c(NA,3, NA, 1,NA,2,NA,NA), 
              c(1,4, NA, NA,NA,4,3,2)) 
```

我在现有问题中进行了研究，发现`na.omit`或者`complete.cases`可以删除行，`NA`但由于我有条件，做进一步研究我在现有问题中发现了以下代码：

```
data[! rowSums(is.na(data)) >4  , ]   
data[! rowSums(is.na(data)) ==3  , ] 
```

第一行完全满足我的第二个条件。第二行确实删除了 3`NA`的行，但不寻找连续的并删除任何总共 3`NA`的行。例如：

```
> data
     [,1] [,2] [,3] [,4] [,5] [,6] [,7] [,8]
[1,]    1    1    2    3    4    2    3    2
[2,]   NA    1   NA    4    1    1   NA    2
[3,]    1    4    6    7    3    1    2    2
[4,]   NA    3   NA    1   NA    2   NA   NA
[5,]    1    4   NA   NA   NA    4    3    2

> data[! rowSums(is.na(data)) ==3  , ]
     [,1] [,2] [,3] [,4] [,5] [,6] [,7] [,8]
[1,]    1    1    2    3    4    2    3    2
[2,]    1    4    6    7    3    1    2    2
[3,]   NA    3   NA    1   NA    2   NA   NA 
```

我真正想要的是仅删除第 5 行，因为它具有三个连续`NA`的 's 而不是第 2 行。

谁能告诉我如何克服这个问题？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-03T14:47:44.890

同时满足两个条件：

```
data[!apply(is.na(data), 1, function(x) 
  {v <- cumsum(x); any(diff(v, 3) == 3) | 4 %in% v}), ]
#      [,1] [,2] [,3] [,4] [,5] [,6] [,7] [,8]
# [1,]    1    1    2    3    4    2    3    2
# [2,]   NA    1   NA    4    1    1   NA    2
# [3,]    1    4    6    7    3    1    2    2 
```

`any(diff(v, 3) == 3)`是`TRUE`如果`NA`连续三次（所以某处的差异是3）并且`4 %in% v`对应于第二个条件。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-03T14:42:56.467

不是美女，但它会起作用：

```
rle.na <- apply(is.na(data), 1, function(z){
  tmp <- rle(z)
  tmp$lengths[tmp$values]
})
data[!sapply(rle.na, function(z) any(z == 3)) | rowSums(is.na(data)) > 4, ] 
```

# php - 带有 urlid 字符串的 URL 重定向以永远不会完成的方式创建请求

> ID：15186698
> 
> 赞同：1
> 
> 时间：2013-03-03T14:26:23.253
> 
> 标签：php, redirect

我在做！

我有一个简单的 URL 重定向脚本，我用它再次使用简单的 urlid 字符串将访问者重定向到小部件下载页面

```
http://www.example.com/get.php?urlid=blue_widget 
```

rest 和往常一样，当请求发送到 get.php 时，它返回下载登陆页面的 url。

现在的问题：

当发送正确的 urlid 或发送为空时，一切正常，然后我的 get.php 将访问者重定向到我的主索引页面。发送未知（不存在）urlid 时会出现问题，而不是浏览器返回以下内容

> 页面未正确重定向 Firefox 检测到服务器正在以永远不会完成的方式重定向对该地址的请求。此问题有时可能是由禁用或拒绝接受cookies 引起的。

这是我的 get.php 文件的内容

```
<?php
$urlid = $_GET['urlid']
if ($urlid == "") {$link = "http://www.example.com/";}
if ($urlid == "blue_widget") {$link = "http://www.example.com/download.php?fileid=blue_widget.doc";}
header ("Location: $link");
exit();
?> 
```

请帮忙

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T14:41:55.513

你可以这样做：

```
<?php
if (isset($_GET['urlid'])) {
    switch ($_GET['urlid']) {
        case 'blue_widget':
            $link = 'http://www.example.com/download.php?fileid=blue_widget.doc';
            break;
        case 'second_widget':
            $link = 'http://www.example.com/download.php?fileid=second_widget.doc';
            break;
        case 'blabla':
            $link = 'http://www.example.com/download.php?fileid=blabla.doc';
            break;
        default:
            $link = 'http://www.example.com/';
    }
} else
    $link = 'http://www.example.com/';
header("Location: $link");
exit(); 
```

我希望它对你有帮助！=)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T14:34:52.720

使用 PHP isset 函数[http://php.net/manual/en/function.isset.php](http://php.net/manual/en/function.isset.php)查看是否设置了 $_GET['urlid']。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-03T14:50:36.777

您还可以通过以下方式检查文件是否存在：

```
if (file_exists(basename($_GET['urlid']).".doc"))
{$link = "http://www.example.com/download.php?fileid=".$_GET['urlid'].".doc";} 
```

# elasticsearch - elasticsearch更新一组

> ID：15186701
> 
> 赞同：1
> 
> 时间：2013-03-03T14:26:29.480
> 
> 标签：elasticsearch, mvel

仅当项目不在列表中时，我才尝试更新列表字段。

有什么问题：

```
curl -X POST 'http://localhost:9200/my_index/my_doc/id/_update' -d 
'{ "script":
"{if !(ctx._source.my_field contains new_item) {ctx._source.my_field.add(new_item)}}" 
, "params":{"new_item":"hopefully_new_text"}}' 
```

无论如何，这会添加该项目，即使它存在。

有什么更聪明的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T17:18:46.067

这是关于 MVEL 解析行为的许多奇怪的事情之一。如果您要删除最外层的`{` `}`，您将看到您的 if 语句中有语法错误，如果您要修复该错误，一切都会正常工作：

```
curl -X POST 'http://localhost:9200/my_index/my_doc/id/_update' -d  '{
    "script": "if (!(ctx._source.my_field contains new_item)) {ctx._source.my_field.add(new_item)}",
    "params": {
        "new_item": "hopefully_new_text"
    }
}
' 
```

# linux - Linux 内核模块编译失败

> ID：15186703
> 
> 赞同：8
> 
> 时间：2013-03-03T14:26:42.460
> 
> 标签：linux, makefile, linux-kernel

我上次的内核开发是在2.6版~现在我尝试编译一个模块，在内核树之外编译时出现以下错误。

```
/bin/sh: 1: /home/blabla/workspace/kernel35/linux-3.5/scripts/recordmcount: not found 
```

目标文件已正确创建，但问题出在内核 Makefile 本身，有些东西已经改变，我没有更新？

我正在使用来自 kernel.org 的 vanilla 内核源代码，而且我已经这样做了

```
make oldconfig && make prepare 
```

我发布了我正在使用的 Makefile，它是内核模块的标准 makefile

```
# Comment/uncomment the following line to disable/enable debugging
#DEBUG = y

# Add your debugging flag (or not) to CFLAGS
ifeq ($(DEBUG),y)
  DEBFLAGS = -O -g -DBLABLA_DEBUG # "-O" is needed to expand inlines
else
  DEBFLAGS = -O2
endif

ccflags-y += $(DEBFLAGS)
ccflags-y += -I..

ifneq ($(KERNELRELEASE),)
# call from kernel build system

obj-m   := blabla.o

else
KERNELDIR ?= /home/blabla/workspace/kernel35/linux-3.5
PWD       := $(shell pwd)

default:
    $(MAKE) -C $(KERNELDIR) M=$(PWD) modules

endif

clean:
    rm -rf *.o *~ core .depend .*.cmd *.ko *.mod.c .tmp_versions

depend .depend dep:
    $(CC) $(CFLAGS) -M *.c > .depend

ifeq (.depend,$(wildcard .depend))
include .depend
endif 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-04T07:48:22.230

好的，我想出了如何解决这个问题。显然，这是我第一次尝试编译模块而不事先编译内核。为了解决这个问题，我从内核源代码树运行以下命令。

```
make modules_prepare 
```

这创建了所有必要的基础设施来支持模块构建。

# windows - Windows 命令行 - 确定文件夹内容大小并保存为数值

> ID：15186704
> 
> 赞同：1
> 
> 时间：2013-03-03T14:26:51.117
> 
> 标签：windows, command-line, command, size, directory

我是命令行编程的新手，并且有一个我想创建的脚本。我需要做的一件事是确定文件夹内容的大小并将数值与变量一起保存以供以后比较。

我正在运行 Windows 7 命令行，有些文件可能大于 2GB。

感谢您提供的任何帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-03T17:13:51.323

使用纯原生批处理来解决这个简单的问题是多么困难，令人惊讶。

***编辑*** *- 此答案已被编辑为包括所有子文件夹的累积文件大小。*

DIR /S 命令给出文件夹及其子文件夹中所有文件的总大小，但输出会根据您的计算机区域设置（语言）而变化。FIND 命令可以隔离包含文件夹大小的行，FOR /F 用于解析结果。每个文件夹有一个“文件”行，外加一个包含总计的最终条目。最后一个 SET 命令将取代先前的值。最后，使用变量扩展搜索和替换来消除千位分隔符。

这将获得美国机器上给定文件夹中的总字节数。文件夹的路径应在第一个参数中提供。采用 ”。” 对于当前目录。

```
@echo off
setlocal
for /f "tokens=3" %%A in ('dir "%~1\"^|find "File(s)"') do set size=%%A
set "size=%size:,=%"
echo Folder "%~f1" contains %size% bytes 
```

以上内容必须针对不同的语言环境进行更改。例如，“File(s)”会因不同的语言而改变，有些国家使用“.”。而不是“，”作为千位分隔符。

但是，如果您想稍后将大小与其他值进行比较，那只会让您走到一半，因为 IF 语句只能比较大至 2147483647（~2 GB）的数字。任何大于 2147483647 的数字都被视为 2147483647。解决该问题的方法是将数字用零填充到恒定宽度，“保证”大于您将遇到的任何数字。然后通过在比较中包含非数字字符来强制 IF 进行字符串比较。我喜欢使用数字宽度为 15 位（~999 TB）的引号。

```
@echo off
setlocal
for /f "tokens=3" %%A in ('dir "%~1\"^|find "File(s)"') do set size=%%A
set "size=%size:,=%"
echo Folder "%~f1" contains %size% bytes

:: Left pad the width to 15 digits
set "paddedSize=000000000000000%size%"
set "paddedSize=%paddedSize:~-15%"

:: Compare the size to 1 Terabyte
if "%paddedSize%" gtr "001099511627776" echo The folder is larger than 1 Terabyte 
```

**注意：** DIR 命令在计算总文件大小时会忽略备用数据流。备用数据流是可以与 NTFS 卷上的文件相关联的隐藏内容。有关详细信息，请参阅[http://www.bleepingcomputer.com/tutorials/windows-alternate-data-streams/](http://www.bleepingcomputer.com/tutorials/windows-alternate-data-streams/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-01T01:34:56.353

在 robocopy /L src dst 的行首搜索字符串文字“Bytes” *。*, /L 将阻止实际文件被复制并将其设置为局部变量

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-07T12:51:23.193

另一种方法是`compact /s`.compact 工具未翻译，并且应该以相同的方式在每台 Windows 机器上工作：

```
@echo off
pushd "%~1"

for /f %%s in ('compact /s ^| find " total bytes"') do (
    set _size=%%s
)

echo folder size is : %_size:,=% bytes
popd 
```

# javascript - 在没有 jQuery 的情况下添加？

> ID：15186706
> 
> 赞同：24
> 
> 时间：2013-03-03T14:26:53.153
> 
> 标签：javascript, jquery

我如何在不使用 jQuery 的情况下编写它？

```
$('body').prepend('<div id="idC" style="display: none;" class=""><div id="idA">' + titelN + '</div></div>'); 
```

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-03-03T14:36:21.787

您应该首先学习如何在不使用任何库的情况下创建元素。基本上，有一些方法可以让您创建元素并将元素附加到文档中。它们是`createElement`, `insertBefore`, `appendChild`.

createElement 参考：[http](http://www.w3schools.com/jsref/met_document_createelement.asp)
://www.w3schools.com/jsref/met_document_createelement.asp insertBefore 参考：[http](http://www.w3schools.com/jsref/met_node_insertbefore.asp)
://www.w3schools.com/jsref/met_node_insertbefore.asp appendChild 参考：[http ://www.w3schools.com/jsref /met_node_appendChild.asp](http://www.w3schools.com/jsref/met_node_appendChild.asp)

下面的代码应该适用于所有浏览器。尝试更多并了解更多。

```
var parent = document.createElement("div");
parent.id = "idC";
parent.style.display = "none";

var child = document.createElement("div");
child.id = "idA";
child.innerHTML = titelN;
parent.appendChild(child);

document.body.insertBefore(parent,document.body.childNodes[0]); 
```

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2013-03-03T14:35:21.010

有[`insertAdjacentHTML`方法](https://developer.mozilla.org/en/DOM/element.insertAdjacentHTML)，但在旧的FF版本中不起作用：

```
document.body.insertAdjacentHTML('afterbegin', '<div id="idC" style="display: none;" class=""><div id="idA">' + titelN + '</div></div>'); 
```

# java - 使用 jsoup 选择 div 标签

> ID：15186710
> 
> 赞同：0
> 
> 时间：2013-03-03T14:27:08.183
> 
> 标签：java, html, jsoup

嗨，我有 2 个 div 既显示日期又具有相同的名称。我现在想专门显示第一个 div，稍后再显示第二个日期。我尝试过搜索，但我发现您可以指定 div 名称元素并通过它区分两个 div。

```
(This is the first date which I want to display)
<div class="home-weather-sub-div-bar">
<span class="datetext1">Sunday, March  3, 2013 updated 14:45:00 CET</span>
</div>

(This is the second date which I want to display)    
<div class="home-weather-sub-div-bar">
<span class="datetext1">Monday, March  4, 2013 until noon</span>
</div> 
```

为了清楚起见，我尝试选择“div.home-weather-sub-div-bar”和“span.datetext1”，但它仍会显示 2013 年 3 月 3 日星期日，更新时间为星期一 14:45:00 CET 然后它还将在同一行中连接 2013 年 3 月 4 日至中午。

请问有什么帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T16:04:32.847

您可以选择`div`具有给定属性的标签，然后选择您想要的标签：

```
Document doc = ...

final Elements divs = doc.select("div.home-weather-sub-div-bar"); // Select the div-tags

Element firstDiv = divs.get(0); // get the first div
Element secondDiv = divs.get(1); // get the second div

System.out.println(firstDiv.text()); // print the text
System.out.println(secondDiv.text()); 
```

使用您发布的 html，我得到以下输出：

```
Sunday, March 3, 2013 updated 14:45:00 CET
Monday, March 4, 2013 until noon 
```

# hbase - hbase 限定符过滤器跳过其他列族

> ID：15186713
> 
> 赞同：0
> 
> 时间：2013-03-03T14:27:46.300
> 
> 标签：hbase

我在扫描时应用限定符过滤器以获取所有已读项目。

```
QualifierFilter readItems = new QualifierFilter(CompareOp.EQUAL, new BinaryComparator(Bytes.toBytes("read-1")));
readItems.isFamilyEssential(Bytes.toBytes("meta")); 
```

结果包含读取项，但不包含其他列族。

结果仅包含元列族和 read-1 限定符。

如何获取所有 CF 并仅读取项目？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T21:41:19.090

目前，执行的操作是通过仅保留限定符与约束匹配的 KeyValue 过滤 { KeyValue }_in 到 { KeyValue}_out - 这不是您想要做的。如果限定符“read-1”不存在，您想过滤掉整行。您可以使用以下逻辑来执行此操作（这是在 Groovy 中，但是应该有意义）

```
def scan = new Scan()
scan.addFamily('COLUMN_FAMILY'.bytes)

def filter = new SingleColumnValueFilter('COLUMN_FAMILY'.bytes, 'read-1'.bytes, CompareFilter.CompareOp.NOT_EQUAL, new NullComparator())
filter.filterIfMissing = true
scan.filter = filter 
```

这是一个很好的开始使用参数。我不确定你的“read-1”列中有什么，但是，如果它是非空的，这应该做你想要的（或者让你更接近？）。

祝你好运！

# php - 来自 mysql 数据的 jQuery 弹出窗口

> ID：15186718
> 
> 赞同：0
> 
> 时间：2013-03-03T14:28:50.207
> 
> 标签：php, jquery, mysql

```
 <script type="text/javascript" src="jquerynew.js"></script>
    <script>

        $(document).ready(function() 
        {       
             $('.wings').click(function(event) 
   {
       $(this).next('.popupbox').fadeIn();
       $('body').css('background','#333');        
   });

       $('.popupclose').click(function(event) 
       {            
           unloadPopupBox();
           $('body').css('background','white');
       });

       function loadPopupBox() 
       {  
          $('.popupbox').fadeIn("slow");
       }        

       function unloadPopupBox() 
       {
          $('.popupbox').fadeOut("normal");       
       }  
       $(".popupbox").hide();
    });

</script>

<style>
 table { border-collapse:collapse; margin-left:370px; margin-top:20px; padding:10px; font-family:Trebuchet MS; min-width:530px; }
 table th,td { border:1px solid #8AC007; }

 .popupbox {  position:fixed; _position:absolute; /* hack for internet explorer 6 */ background:#FFFFFF; left:0px; top:150px; 
           border:2px solid lightgray; padding:15px;  z-index:100px; font-size:15px;  -moz-box-shadow: 0 0 5px lightgray; 
           -webkit-box-shadow: 0 0 5px lightgray; box-shadow: 0 0 5px lightgray; display:none; }

 .popupclose { border:0px solid lightgray; color:#6FA5E2; font-family:verdana; font-weight:bold; line-height:15px; float:right;
               cursor:pointer;  text-decoration:none; }
</style>

<?php

  $con = mysql_connect("localhost","root","");  
  mysql_select_db("popupsql",$con);

  $users = mysql_query("SELECT u.id, u.username, u.firstname, u.lastname FROM lms_user u");  
  $rows = array();
  while($row = mysql_fetch_assoc($users))
  $rows[] = $row;

  echo '<table>
             <tr style="background:#8AC007;color:#8A4C25;font-size:15px;">
                <th style="padding:10px;">Firstname</th>
                <th style="padding:10px;">Lastname</th>
                <th style="padding:10px;">Status</th>
             </tr>';
  foreach($rows as $row)
  { 
     $userid = $row['id'];
     echo '<tr>
               <td style="padding:5px;">'.$row['firstname'].'</td>
               <td style="padding:5px;">'.$row['lastname'].'</td>
               <td style="padding:5px;text-align:center;">
                 <a class="wings">view status&nbsp;'.$userid.'</a>
                 <div class="popupbox">
                     <div style="height:30px;"><img class="popupclose" src="close.png" style="float:right;"></img></div>';
                     $grades = mysql_query('SELECT u.firstname, u.lastname, u.email, ggh.finalgrade, gi.itemname FROM lms_grade_grades_history ggh, 
                                           lms_grade_items gi, lms_user u WHERE ggh.itemid = gi.id AND gi.itemtype = "course" AND u.id = ggh.userid 
                                           AND u.id = '.$userid.'');                     
                     $rows = array();
                     while($row = mysql_fetch_assoc($grades));
                     $rows[] = $row;
                     foreach($rows as $row)
                     {
                       echo 'SELECT u.firstname, u.lastname, u.email, ggh.finalgrade, gi.itemname FROM lms_grade_grades_history ggh, 
                                           lms_grade_items gi, lms_user u WHERE ggh.itemid = gi.id AND gi.itemtype = "course" AND u.id = ggh.userid 
                                           AND u.id = '.$userid.'';
                     }
                 echo '</div>
               </td>
           </tr>';
  }
  echo '</table>';

?> 
```

这是我从 mysql 数据库动态显示 jQuery 弹出窗口的代码。弹出窗口显示所有行但不显示相同的 id 即，正确的 id 没有传递到弹出窗口。任何人都可以建议我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T14:34:06.567

### `ID`永远不要对不同的元素使用相同的！

您只是在加载和卸载相同的`popupBox`. 所有弹出框都相同`ID`，这是错误的。此外，您的 HTML 中**没有** `#popupbox`。在您的脚本中，以这种方式更改：

```
 $('.wings').click(function(event) 
   {
       $(this).next('.popupbox').fadeIn();
       $('body').css('background','#333');        
   }); 
```

并通过更改为and来更改所有的`#wings`and`#popupbox`类。还要更新 HTML 以使用和.`.wings``.popupbox``class="wings"``class="popupbox"`

**解释**

将`$(this).next('.popupbox')`选择`.popupbox`正在单击的链接旁边的 。因此，您将单击一个链接，然后`.popupbox`将显示该链接旁边的 。希望这很清楚。

# delphi - dbgrid 列 delphi

> ID：15186725
> 
> 赞同：1
> 
> 时间：2013-03-03T14:29:50.897
> 
> 标签：delphi, dbgrid

我想知道如何在 dbgrid delphi 垂直中显示列标题。在这个阶段，标题有点长，我想垂直显示它们。我使用的是delphi 2010，对象检查器中没有任何内容可以设置垂直或90度的任何对齐设置。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-17T19:10:33.000

你可以通过做几件事来做到这一点：

*   设置`TDBGrid.TitleFont.Orientation`为`900`，即 90 度。

*   使用插入器类更改第`TDBGrid`一个（列标题）行高。interposer 类使您可以访问`RowHeights`网格的属性，该属性未发布在`TDBGrid`：

```
    执行

    类型
      ThackGrid=类（TDBGrid）；

    过程 TForm1.FormCreate(Sender: TObject);
    开始
      THackGrid(DBGrid1).RowHeights[0] := 300;        
    结尾;

```

计算要使用的适当高度`RowHeights[0]`是留给您的练习。:-) 正如@TLama 在他的评论中所说，你最好自己绘制网格以获得文本的正确拟合和对齐；如何做到这一点将是另一个问题（但是已经存在这样做的示例，因此请确保在询问之前先查看它们）。

# ios - 我在 tableview 的单元格中使用背景图像并使用 shadowOpacity，但滚动效果太低了。如何调优？

> ID：15186727
> 
> 赞同：0
> 
> 时间：2013-03-03T14:30:13.717
> 
> 标签：ios, tableview

我在 tableview 的单元格中使用背景图像并使用 shadowOpacity，但滚动效果太低了。如何调优？

```
self.backgroundImageView.backgroundColor = [UIColor colorWithRed:241 green:241 blue:241 alpha:1];
self.backgroundImageView.layer.cornerRadius = 10;
self.backgroundImageView.layer.shadowOffset = CGSizeMake(0, 0);
self.backgroundImageView.layer.shadowOpacity = 0.3;
self.backgroundImageView.layer.masksToBounds = NO; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T15:07:22.567

您应该将`shadowPath`图层的属性设置为与圆角矩形匹配的路径。就像是：

```
self.backgroundImageView.layer.shadowPath = [UIBezierPath bezierPathWithRoundedRect:self.backgroundImageView.bounds cornerRadius:10.0].CGPath; 
```

如果没有这些信息，图层必须分析其内容来决定在哪里渲染阴影，这会损害您的滚动性能。

# c++ - 将一个函数的一部分移动到另一个函数中

> ID：15186728
> 
> 赞同：-2
> 
> 时间：2013-03-03T14:30:42.173
> 
> 标签：c++

这是循环列表节点的结构声明：

```
struct  Node
{
    int x; // info field
    struct Node *Next;
}; 
```

在`int main()`我有一个循环，用 1 到 10 的数字填充列表：

```
int main()
{

    Node *Head=NULL, *Tail=NULL; 
    int size = 0; 
    int info = 0; 

    for (int j = 0; j < 10; j++) 
    { // for
        info++;
        size++; 
        Node *temp=new Node; 
        temp->Next=Head; 
        temp->x=info; 

        if (Head!=NULL)
        {
            Tail->Next = temp; 
            Tail=temp; 
        }

        else Head=Tail=temp;
    } // endfor
} 
```

如何制作一个包含此循环并从中调用的函数`main()`？像这样的东西：

```
void Fill(struct Node *Head, struct Node *Tail, int &x, int &info)
{
  // <function body>
}

int main()
{
...
Fill(Head, Tail, x, info);
...
} 
```

不工作:(

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T14:36:39.020

您的函数需要实际修改`Head`和`Tail`（即修改这些指针指向的位置）的能力。因此，您需要通过引用传递它们`Node *&`。

另一方面，`x`不是您需要传递给函数的变量。（它是`Node`结构的成员。）

所以你的函数应该这样定义：

```
void Fill(Node *&Head, Node *&Tail, int &info)
{
   // <function body>
} 
```

您想要传递给函数的任何内容，以便函数对其所做的任何更改都反映在函数之外，您需要通过引用传递（或者做一些更复杂的事情，比如指针，在 和 的情况下`Head`意味着`Tail`指向指针）。

# parsing - haskell - 解析/读取 .pdf 文件的内容

> ID：15186740
> 
> 赞同：6
> 
> 时间：2013-03-03T14:32:04.403
> 
> 标签：parsing, pdf, haskell, ghc, pdf-parsing

在haskell中是否有可能只解密一个.pdf文件，读入内容并返回一个字符串？而且，如果有的话，你能给我举个小例子吗，比如：

```
...
import necessaryPackage
...
pdfParsing = ...
... 
```

提前致谢。

最好的问候，吉米

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-03T14:37:08.613

*   [pdf2line](http://hackage.haskell.org/package/pdf2line)
*   Dylanmc 的 PDF 库[也可以工作](https://github.com/dylanmc/Haskell-PDF-Parsing-Library/blob/master/PDFLibrary.cabal)

# javascript - 加载 document.ready onload 元素

> ID：15186742
> 
> 赞同：1
> 
> 时间：2013-03-03T14:32:34.010
> 
> 标签：javascript, jquery, html, model-view-controller

我需要在元素加载时执行函数（在 .cshtml 页面上）。（假设它是一个 div 元素）。

我做了：

```
$('#MyDiv').ready(function () {
alert('Div loaded');
}); 
```

问题是警报总是跳跃。当javascript代码本身加载时。我做了：

```
 $('#MyDiv').load(function () {
    alert('Div loaded');
    }); 
```

并且警报永远不会跳跃。

解决方案？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-03T15:03:34.223

不幸的是，您无法像使用`$(document).ready()`.

您*可以*做的是在您的元素后添加一个脚本标签，该标签将在您的元素被浏览器呈现后运行：

```
<div> * content * </div>
<script>
doSomething();
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T14:36:34.677

我通常这样做，也许是错误的：

```
$(document).ready(function (){
  alert('Div Ready or Document Loaded, or whatever');

  ..all kinds of other jquery inside this function..

}); 
```

# c++ - 用于创建菜单栏的C++ win32程序（程序编译运行，窗口也显示但没有菜单栏出现）

> ID：15186743
> 
> 赞同：2
> 
> 时间：2013-03-03T14:32:43.313
> 
> 标签：c++, c, dev-c++, win32gui

我指的是本教程在窗口中创建菜单栏：

[http://www.winprog.org/tutorial/menus.html](http://www.winprog.org/tutorial/menus.html)

该程序已成功编译并运行。我可以看到窗口，但看不到菜单栏。我错过了什么？我正在使用 Dev-C++ IDE。我的 resource.h 和 programName.rc 文件放置在放置 programName.c 文件的同一文件夹中。

请帮我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-03T17:28:29.830

最肯定的资源没有链接到可执行文件。

您可能希望按照此处的说明进行操作：[http](http://cboard.cprogramming.com/windows-programming/54934-resource-files-dev-cplusplus.html) ://cboard.cprogramming.com/windows-programming/54934-resource-files-dev-cplusplus.html将 rc 文件添加到项目中，尽管将其链接到二进制文件中结果形成构建过程。

# php - 个人资料页面用例

> ID：15186748
> 
> 赞同：0
> 
> 时间：2013-03-03T14:33:47.940
> 
> 标签：php, sql, social-networking, entity-relationship

网站的个人资料页面包含任何用户的这些类型的字段 -

1.  一对一字段 - 姓名、年龄、性别
2.  一对多领域 - 工作经历、教育
3.  多对多领域 - 语言、奖项、委员会

工具 - MYSQL 和 PHP [但可以更改]

我决定创建一个用户表。

```
tbl_user -> PK - user_id , FK - profile_id 
```

对于用户一次出现的所有字段，我将它们作为属性添加到表 tbl_user_profile 中。

```
tbl_user_profile -> PK - profile_id 
```

然后，为了满足一对多的关系，我创建了一堆表 - *这很容易随着时间的推移而增长..*

```
tbl_user_jobs , tbl_user_education
FK - user_id [ INNO DB ] 
```

然后我创建了一堆表作为 MANY_TO_MANY 建模的参考表 -

```
tbl_ref_awards, tbl_ref_languages, tbl_ref_committee
PK = REF_ID

tbl_user_languages, tbl_user_awards, tbl_user_committee
FK - user_id , REF_ID 
```

现在，我必须使用刚才提到的许多细节来呈现个人资料页面。在每次页面加载时，我必须将表**tbl_user_***表与 tbl_user 连接起来并填充到页面中。

我首先猜测这个设计是否可以？其次，在 page 上加入了 [7 次] 一样多的表，我在页面加载中看到了拖累，并且很高兴听到在上述用例中数据库设计的可能改进。已经有索引和 FK 存在。尚未在任何地方添加缓存。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-03T15:22:58.070

这是一种相当合理的数据建模方法；我要做的唯一评论是，我没有将参考表的主键命名为“REF_ID”，而是在表本身之后命名它们 - 例如，award_id。外键同上。

当然，这是一个偏好问题，但它更加一致 - 您已将用户配置文件表的主键命名为“profile_id”。

在现代硬件上，通过适当的索引，除非您处理数亿条记录，否则 7 表连接不应该是性能问题。请发布慢查询的解释，让我们看看我们是否可以提供帮助。

然而，实际上，运行几个小查询来填充页面可能比一个大查询更容易。这是因为 7 表连接当然会为每一行重复所有“一对一”数据，而这只会创建一些混乱的数据处理层。我现在在想，你得到

```
user_id user_name job_name language_name
-------------------------------------------
1      Bob         Waiter   French
1      Bob         Waiter   German
1      Bob         Waiter   Italian
1      Bob         Plumber  French
1      Bob         Plumber  German
1      Bob         Plumber  Italian 
```

相反，我会在一个查询中检索用户个人资料，在第二个查询中检索用户工作，在第三个查询中检索用户教育，依此类推。这使您的 PHP 代码更加整洁，并减少了您在数据库和 Web 应用程序之间移动的数据量。

# codeigniter - Jamie 的 Codeigniter MY_Model

> ID：15186749
> 
> 赞同：0
> 
> 时间：2013-03-03T14:34:00.070
> 
> 标签：codeigniter, codeigniter-2

这让我发疯了..

我全新安装了 CI 2.1.3。
从这里复制 MY_Model：[https](https://github.com/jamierumbelow/codeigniter-base-model) ://github.com/jamierumbelow/codeigniter-base-model 到 application/core。**autoload.php**
中的 自动加载**数据库**库 正确配置了 config 文件夹中的 database.php。

 **扩展了 MY_Model 类，如下所示：

```
class User_m extends MY_Model{ 

    public $_table = 'user';
    public $primary_key = 'user_id';

} 
```

在默认控制器中：

```
$this->load->model('user_m', 'user');

$row = $this->user->get(1);
echo $row->email; 
```

这是查看 CRUD 库如何工作的最简单的实现，但我收到以下错误：

```
Fatal error: Call to a member function where() on a non-object in MY_Model.php on line 135 
```

MY_Model.php 的第 135 行：

```
$row = $this->_database->where($this->primary_key, $primary_value)
                        ->get($this->_table)
                        ->{$this->_return_type()}(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T15:25:11.740

```
if (!$this->_db)
{
    $this->_database = $this->load->database();
} 
```

$this->load->database() 不会返回任何数据库对象；

来自 CI 文档：

```
/**  
 * Database Loader  
 *  
 * @param    mixed   $params     Database configuration options  
 * @param    bool    $return     Whether to return the database object  
 * @param    bool    $query_builder  Whether to enable Query Builder  
 *                   (overrides the configuration setting)  
 *  
 * @return   void|object|bool    Database object if $return is set to TRUE,  
 *                   FALSE on failure, void in any other case  
 */  
 public function database($params = '', $return = FALSE, $query_builder = NULL) 
```

尝试：

```
if ( $this->db ) {
    $this->_database = $this->db;
} else {
    $this->_database = $this->load->database('default', true, true);
} 
```

**稍后编辑：**
我找到了该模型的固定版本。[用这个](https://github.com/cryode/codeigniter-base-model/blob/603a7155b03c33353cbb7bd4a91828522722f023/core/MY_Model.php)替换你的核心模型**

# php - 像 fcntl() 和 accept() 这样的阻塞方法，哪一个请求者会得到它？

> ID：15186750
> 
> 赞同：0
> 
> 时间：2013-03-03T14:34:05.823
> 
> 标签：php, linux, nginx

我正在阅读 php-cgi 的源代码，发现分叉的子进程正在使用 fcntl(fd, F_SETLKW, &lock) 来等待套接字 fd 的锁定，然后执行 accept()。

```
FCGI_LOCK(req->listen_socket);
req->fd = accept(listen_socket, (struct sockaddr *)&sa, &len);
FCGI_UNLOCK(req->listen_socket); 
```

所以我的问题是：

1.  当多个进程/线程试图用 fcntl() 锁定一个文件时，哪个会得到它？

2.  如果多个进程都从同一个套接字 fd 执行 accept() （它们可以，对吗？），哪一个会得到它？

3.  同样，在 nginx 源代码中，我看到分叉的进程正在同一个套接字 fd 上设置 epoll 事件，当一个事件到来时，哪个会得到它？

随机的？循环赛？先进先出？鲁？...

其实我只是想弄清楚这些模型的负载平衡策略。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T17:44:11.520

正如我在 UNIX 网络编程第 1 卷中所读到的，它是有助于均匀地负载平衡事件的内核。但是内核如何做到这一点超出了我的理解，希望有人能澄清它并引用一些代码。另外我以后要阅读源代码，也许我可以自己找到答案。

# c++ - pugiXML：无法遍历兄弟姐妹！只加载第一个

> ID：15186751
> 
> 赞同：0
> 
> 时间：2013-03-03T14:34:06.387
> 
> 标签：c++, xml, for-loop, pugixml

这是 XML 代码：

```
<?xml version="1.0" encoding="utf-8"?>
<Enemies>
    <Enemy id="001" name="Bandit" combatstyle="1" aitype="1" difficulty="1" imgsheet="001.png" level="2" hp"5" />
    <Enemy id="005" name="Dragon" combatstyle="1" aitype="1" difficulty="1" imgsheet="002.png" level="5" hp"50" />
</Enemies> 
```

这是我用来搜索内容的代码：

```
pugi::xml_document doc;

pugi::xml_parse_result result = doc.load_file("assets/enemies.xml");       

pugi::xml_node nodes = doc.child("Enemies");

for (pugi::xml_node tool = nodes.child("Enemy"); tool; tool = tool.next_sibling("Enemy"))
   {
        //only here to check if it's working
        string lol = tool.attribute("name").as_string();
        int hi = tool.attribute("id").as_int();
    } 
```

当循环执行**tool = tool.next_sibling("Enemy")**时，它到达末尾并跳出循环。我可以很好地从第一个敌人那里得到信息，所以我做对了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T15:18:05.303

我不知道我做了什么。但现在它似乎起作用了。这真的很奇怪，我没有对班级进行任何更改，现在它可以工作了。

无论如何，一切都很好！

# django - 使用 Django 1.5 运行 manage.py syncdb 错误

> ID：15186754
> 
> 赞同：4
> 
> 时间：2013-03-03T14:34:20.467
> 
> 标签：django

当我将 django 从 1.4 升级到 1.5 并运行 manage.py syncdb 时，出现如下错误

> $ python manage.py 同步数据库
> 
> /usr/local/lib/python2.7/dist-packages/django/conf/init **.py** :219: DeprecationWarning: You have no filters defined on the 'mail_admins' logging handler: 添加隐式 debug-false-only 过滤器。请参阅[http://docs.djangoproject.com/en/dev/releases/1.4/#request-exceptions-are-now-always-logged](http://docs.djangoproject.com/en/dev/releases/1.4/#request-exceptions-are-now-always-logged) DeprecationWarning）
> 
> TypeError: **init** () got an unexpected keyword argument 'verify_exists'

非常感谢 ！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-03T15:43:37.760

[模型](https://docs.djangoproject.com/en/dev/ref/models/fields/#urlfield)的`verify_exists`关键字参数已被删除（自 1.3.1 起已贬值）。您可以在[django depreciation notes for 1.5](https://docs.djangoproject.com/en/dev/internals/deprecation/#id2)中阅读更多内容：[`URLField`](https://docs.djangoproject.com/en/dev/ref/models/fields/#urlfield)

> django.db.models.fields.URLField.verify_exists 将被删除。由于棘手的安全和性能问题，该功能在 1.3.1 中已弃用，并将遵循略微加快的弃用时间框架。

`models.URLField`简单的解决方法是在引发错误的适当位置找到违规行为`models.py`并删除`verify_exists=True`，即：

```
# Before
some_site = models.URLField(verify_exists=True)

# After
some_site = models.URLField() 
```

# ruby-on-rails - rails 列表记录属性，如 x

> ID：15186755
> 
> 赞同：0
> 
> 时间：2013-03-03T14:34:31.143
> 
> 标签：ruby-on-rails

例如，我有 4 条账单记录。

```
id    = 1 
prize = 100
city  = "newyork"

id    = 2
prize = 200
city  = "NEWYORK"

id    = 3 
prize = 300
city  = "Boston"

id    = 4
prize = 400
city  = "BOSTON" 
```

我想获得带有哈希值的城市的统计数据`{"Newyork" => 2 , "Boston" => 2 }`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T14:44:17.590

```
your_collection.group_by(&:city) 
```

# linux - 如何生成错误日志以修复崩溃

> ID：15186759
> 
> 赞同：1
> 
> 时间：2013-03-03T14:34:56.703
> 
> 标签：linux, debugging, error-handling, stack-trace

许多应用程序在崩溃时会生成错误日志，这样可以很容易地找到错误。为了达到同样的效果，我使用 Linux 信号处理来捕获分段错误。我使用**[stacktrace.h](http://code.google.com/p/projection-errors/source/browse/stacktrace.h)**生成跟踪：

```
void sigsegvHandler(int)
{
  signal(SIGABRT, 0);
  signal(SIGSEGV, 0);
  FILE * errorLog;
  errorLog = fopen ("/tmp/myapp.log" , "w");
  qDebug() << "\n\n*************************************************************\n";
  qDebug() << "Catching SIGSEGV, please report a bug at http://mysite.com/bugs
  qDebug() << "MyApp version: " << "1.0-1" << "\n";
  print_stacktrace(errorLog);
  fclose(errorLog);
  raise(SIGSEGV);
} 
```

但是生成的跟踪几乎没有说明崩溃。如果我们使用应用程序的调试版本，就不可能生成指向发生崩溃的代码中的行号的跟踪，就像我们使用 gdb 时发生的那样。

# javascript - Javascript 在本地测试时有效，但在上传时停止

> ID：15186760
> 
> 赞同：0
> 
> 时间：2013-03-03T14:34:58.390
> 
> 标签：javascript, html, calculator

我创建了一个超级简单的 javascript 计算器来帮助我制定预算。

问题是在我的计算机上进行本地测试时工作正常，但第二次将其上传到正确的目录时，它就停止运行了。

这是一个 jsbin [http://jsbin.com/ijumuh/1/edit](http://jsbin.com/ijumuh/1/edit)

当我将它上传到 www.mysite.com/test.html 时它可以工作，但是当我将它放在正确的文件夹 www.mysite.com/directory/test.html 中时它会停止工作。

知道是什么原因造成的吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-03T15:03:22.400

问题是您的输入按钮（`#btnadd, #btnmult`）具有固定宽度`80px`in，`styles.css`因此 onclick 事件处理程序仅在您单击按钮的最左侧区域时才会起作用。删除第 85-91 行，您的按钮将再次起作用。

# sql - 如何获得独特的用户参与度？

> ID：15186763
> 
> 赞同：0
> 
> 时间：2013-03-03T14:35:18.347
> 
> 标签：sql, postgresql, subquery

我正在尝试列出唯一`user engagements`的`engagement_type`

我曾经有以下查询。

```
SELECT u.id, u.fname, u.lname FROM (
  SELECT id, engagement_type FROM (
    SELECT user_id AS id, 'comment'
    FROM comments WHERE commentable_id = 48136 AND commentable_type = 'Video'
    UNION ALL
    SELECT user_id AS id, 'like'
    FROM likes WHERE likeable_id = 48136 AND likeable_type = 'Video'
  ) AS a
  GROUP BY id
  LIMIT 10
) b JOIN users u USING (id); 
```

回报：

```
id        | fname      | lname
------------------------------
1         | joe        | abc
2         | sarah      | qer
3         | megan      | tryey
4         | john       | vdfa 
```

这很好。现在，我想包括参与类型。我想出了这个：

```
SELECT u.id, u.fname, u.lname, engagement_type FROM (
  SELECT id, engagement_type FROM (
    SELECT user_id AS id, 'comment' AS engagement_type
    FROM comments WHERE commentable_id = 48136 AND commentable_type = 'Video'
    UNION ALL
    SELECT user_id AS id, 'like' AS engagement_type FROM likes
    WHERE likeable_id = 48136 AND likeable_type = 'Video'
  ) AS a
  GROUP BY id, engagement_type
  LIMIT 10
) b JOIN users u USING (id); 
```

现在返回：

```
id        | fname      | lname    | engagement_type
---------------------------------------------------
1         | joe        | abc      | comment
2         | sarah      | qer      | like
3         | megan      | tryey    | like
4         | john       | vdfa     | like
1         | joe        | abc      | like     
3         | megan      | tryey    | comment 
```

上面的唯一问题。结果不再是唯一的。如您所见，Joe 和 Megan 有 2 个条目。

知道我怎样才能让它工作吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T18:28:37.003

`DISTINCT ON`在 PostgreSQL 中更简单。
由于缺乏定义，我`engagement_type`根据其排序顺序选择第一个：

```
SELECT u.id, u.fname, u.lname, b.engagement_type
FROM  (
   SELECT DISTINCT ON (1)
          id, engagement_type
   FROM (
      SELECT user_id AS id, 'comment' AS engagement_type
      FROM   comments
      WHERE  commentable_id = 48136
      AND    commentable_type = 'Video'

      UNION ALL
      SELECT user_id, 'like'
      FROM   likes
      WHERE  likeable_id = 48136 
      AND    likeable_type = 'Video'
      ) a
   ORDER  BY 1, 2
   LIMIT  10
   ) b
JOIN users u USING (id); 
```

详细信息、链接和说明：

*   [在每个 GROUP BY 组中选择第一行？](https://stackoverflow.com/questions/3800551/select-first-row-in-each-group-by-group/7630564#7630564)

如果您想要所有参与类型的*唯一列表*：

```
 SELECT id, string_agg(DISTINCT engagement_type, ', ') AS engagement_types
   FROM (
      ...
      ) a
   GROUP  BY 1
   ORDER  BY <whatever>
   LIMIT  10; 
```

[`string_agg()`](http://www.postgresql.org/docs/current/interactive/functions-aggregate.html)需要 Postgres 9.0 或更高版本。
此表单允许按您想要的任何顺序进行排序，而如果您`ORDER BY`不同意，则需要另一个子查询`DISTINCT ON`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T16:08:25.123

如果您只想要一行，则需要从 GROUP BY 子句中删除engagement_type。但是，这不会向您显示所有不同的engagement_type。

如果您想在一行中列出engagement_types 而不复制用户详细信息，请使用 ARRAY_TO_STRING 函数。这会将结果污染到一行。因此，您可以将评论表中的参与类型列为逗号分隔列表。

# ios - 如何找到并修复崩溃的原因

> ID：15186766
> 
> 赞同：1
> 
> 时间：2013-03-03T14:35:29.720
> 
> 标签：ios, objective-c, memory-management, asihttprequest, xcode-instruments

我向应用商店提交了一个应用，但由于以下原因被拒绝：

> “我们发现您的应用在运行 iOS 6.1.2 的 iPhone 5 上崩溃，这不符合 App Store 审查指南。
> 
> 当我们执行以下操作时，您的应用程序崩溃了：
> 
> 当用户点击登录应用程序时，会产生崩溃。
> 
> 这发生在使用您的应用程序时：
> 
> *   在无线网络上
> *   在蜂窝网络上
> 
> 如果您的应用使用太多内存，它可能会遇到此问题。要了解有关 iOS 内存使用以及如何跟踪内存使用和泄漏的更多信息，请参阅内存使用性能指南。”

我无法再次触发我这边的崩溃。我使用分配工具分析了我的应用程序，发现我的实时字节从未超过 12MB。使用泄漏工具，我发现我有一些泄漏（都在第 3 方来源中），但它们非常轻微，不应该导致应用程序崩溃。我不知道该怎么做。

1.  应用程序真的因为使用了太多内存而崩溃了吗？
2.  会不会有别的原因？
3.  我应该如何解决这个问题并解决问题？

编辑 - 附加[崩溃日志](https://www.dropbox.com/s/fnuanp4qz2n2x0i/symbolicated%20crash%20log.rtf)

查看[this](https://stackoverflow.com/questions/12099211/ad-hoc-builds-crashing-on-device-only-asihttprequest) & [that](https://github.com/pokeb/asi-http-request/issues/341)，似乎使用 ASIHTTPRequest 框架会导致崩溃，但仅限于 ad-hoc 或分发版本，这使得调试它更加令人头疼。**真的是原因吗？我应该改用 AFNetworking 吗？**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-11T10:50:46.960

是的，您应该切换到 AFNetworking，因为不再支持 ASIHTTPRequest。

要调试此问题，请尝试将*优化级别*设置为*Fastest, Smalles [-Os]*。这通常是调试和发布代码行为不同的原因。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T11:10:14.087

应用程序真的因为使用了太多内存而崩溃了吗？

没有您的应用程序因访问错误而崩溃。通常这意味着您试图访问已释放的对象。

我应该如何解决这个问题并解决问题？

崩溃发生在 Server.m 的第 132 行（方法：registerWithUserProvider:)。你应该看看这个方法。也许一个简单的 nil 检查可以解决您的问题，但没有代码就很难说。

# visual-c++ - 如何将“IPictureDisp”转换为“IPicture”

> ID：15186767
> 
> 赞同：0
> 
> 时间：2013-03-03T14:35:36.823
> 
> 标签：visual-c++, atl, ole

我正在使用 VC++。

`IPicture`提供多种功能，如`get_Handle`、`Render`和`SaveAsFile`。它很容易使用。

`IPictureDisp`继承自`IDispatch`，所以它只提供`invoke`方法。这不友好。

现在我得到一个`ocx`只返回`IPictureDisp`对象的。那么有没有直接转换成的方法`IPictureDisp`呢`IPicture`？我没有太多的经验`ATL/COM`。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-03T15:22:17.510

正如 MSDN 所说：

> OLE 实现
> 
> [...] 系统提供了图片对象的标准实现。它的主要接口是 IPicture 和 IPictureDisp。图片对象是使用 OleCreatePictureIndirect 创建的，并且支持 IPicture 和 IPictureDisp 接口。

支持两个接口，让您可以通过常规`IPictureDisp`查询：`IPicture``QueryInterface`

```
IPictureDisp* pPictureDisp = ...
CComQIPtr<IPicture> pPicture = pPictureDisp; 
```

请注意，如果它不起作用并且`IPicture`不能直接使用，您可以使用`IPictureDisp::Invoke`with`DISPID_PICT_HANDLE`来`DISPID_PICT_RENDER`访问属性/方法。

# haskell - 阴谋集团包集的独立子集

> ID：15186768
> 
> 赞同：48
> 
> 时间：2013-03-03T14:35:47.157
> 
> 标签：haskell, cabal

给定一组 cabal 包，有没有办法自动计算独立包的子集？换句话说，足以安装它们的软件包子集。

`[network,parsec]`答案是因为`[network]`它`network`取决于`parsec`.

`[network,containers]`答案是因为`[network,containers]`：

*   `network`不依赖于`containers`
*   所有`network`的依赖不依赖于`containers`
*   `containers`不依赖于`network`
*   所有`containers`的依赖不依赖于`network`

不难找到 2 个包的答案。真正有趣的是找出 的独立集`[containers, directory, filepath, lens, xml, http-conduit, regex-posix, monad-control, unordered-containers, glib, hashable, hspec, split, aeson, attoparsec, stm, QuickCheck]`。

* * *

从答案中，我期望一些基于 cabal 库的功能，例如`∷ [Packages] → IO [Packages]`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-15T17:42:14.900

Cabal 正在转向更类似于 NPM 的模型，这将使​​依赖关系解析更加简单。每个安装的包都会保留其依赖项的本地副本，用一点磁盘空间来解决安装多个具有互斥包版本控制需求的全局包的麻烦。

在这种模式下，包的子集需要安装一组包`==`即设置。尽管一个可能是另一个的依赖项，但每个安装的副本都将保留其自己的依赖项的本地副本，因此 Cabal 不会再考虑以这种方式安装的依赖项。

# python - 通过 Python 字符串替换从一堆 .html 文件中删除所有内部链接

> ID：15186769
> 
> 赞同：0
> 
> 时间：2013-03-03T14:36:03.650
> 
> 标签：python, html

我想从一堆 .html 文件中删除所有内部链接。基本思想是任何以`<a href=`链接开头的内容，如果**不是**以链接开头，则为`<a href="http`内部链接。

我正在尝试编写一个小的 Python 脚本来完成此操作。现在每个文件的前半部分都完美地完成了，但它始终在同一个链接上崩溃。我显然检查了拼写错误或缺少`</a>`的，但我没有看到任何。如果我重新运行脚本，“问题链接”将被删除，但它`</a>`仍然存在。似乎越来越多的链接通过重新运行脚本被删除，但我希望所有内部链接在一次运行中被切断。

有没有人建议我做错了什么？请参阅下面的代码以了解我正在使用的代码。

```
tList = [r"D:\@work\projects_2013\@websites\pythonforspss\a44\@select-variables-having-pattern-in-names.html"]
for path in tList:
    readFil = open(path,"r")
    writeFil = open(path[:path.rfind("\\") +1] + "@" + path[path.rfind("\\") + 1:],"w")
    flag = 0
    for line in readFil:
        for ind in range(len(line)):
            if flag == 0:
                try:
                    if line[ind:ind + 8].lower() == '<a href=' and line[ind:ind + 13].lower() != '<a href="http':
                      flag = 1
                      sLine = line[ind:]
                      link = sLine[:sLine.find(">") + 1]
                      line = line.replace(link,"")
                      print link
                except:
                    pass
            if flag == 1:
                try:
                    if line[ind:ind + 4].lower() == '</a>':
                        flag = 0
                        line = line.replace('</a>',"")
                        print "</a>"
                except:
                    pass
        writeFil.write(line)
    readFil.close()
    writeFil.close() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T14:45:45.173

使用像[BeautifulSoup](http://www.crummy.com/software/BeautifulSoup/bs4/doc/)或[lxml](http://lxml.de/)这样的 HTML 解析器。使用[lxml](http://lxml.de/)，您可能会执行以下操作：

```
import lxml.html as LH

url = 'http://stackoverflow.com/q/15186769/190597'
doc = LH.parse(url)

# Save a copy of the original just to compare with the altered version, below
with open('/tmp/orig.html', 'w') as f:
    f.write(LH.tostring(doc))

for atag in doc.xpath('//a[not(starts-with(@href,"http"))]'):
    parent = atag.getparent()
    parent.remove(atag)

with open('/tmp/altered.html', 'w') as f:
    f.write(LH.tostring(doc)) 
```

* * *

[BeautifulSoup](http://www.crummy.com/software/BeautifulSoup/bs4/doc/)中的等价物如下所示：

```
import bs4 as bs
import urllib2

url = 'http://stackoverflow.com/q/15186769/190597'
soup = bs.BeautifulSoup(urllib2.urlopen(url))

with open('/tmp/orig.html', 'w') as f:
    f.write(str(soup))

for atag in soup.find_all('a', {'href':True}):
    if not atag['href'].startswith('http'):
        atag.extract()

with open('/tmp/altered.html', 'w') as f:
    f.write(str(soup)) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-05-16T17:25:21.343

```
 query = input('Enter the word to be searched:')
url = 'https://google.com/search?q=' + query
request_result = req.get(url).text
soup = BS(request_result, 'lxml')
for link in soup.find_all('a', href= re.compile("https://")):
    print(link['href'].replace("/url?q=","")) 
```

我在 Beautiful Soup 中使用了上面的代码，并且只成功地返回了 https 链接。

我尝试了上面发布的解决方案，但它对我不起作用事实上我的链接在使用上面的代码后在很大程度上减少了。

希望这可以帮助！

# c# - 用户可以在付款前或付款过程中更改 paypal 付款表单的自定义值吗？

> ID：15186775
> 
> 赞同：1
> 
> 时间：2013-03-03T14:36:40.293
> 
> 标签：c#, asp.net, paypal-ipn

我正在使用贝宝的 IPN 方法来检查贝宝的付款。

但是，我在每个付款表单 ( `<input type="hidden" name="custom" value="ForCandies">` ) 中都使用了自定义值，因此我可以在 ipn 检查过程中看到付款的类型。

用户可以更改自定义值吗？因为如果他能做到这一点，那就意味着系统受到了损害。

我在 IPN 检查过程中使用了一些 Sql 查询，一切都取决于自定义值。

提前致谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T21:24:06.807

使用网站付款标准：是的。买家可以改变这一点。
因为您通过 发送数据`<form>`，所以买方可以更改此客户端发起的行为并操纵“自定义”输入的值。

使用 PayPal Express Checkout：不，买家无法更改此设置，因为 Express Checkout 不使用`<form>`; 相反，它完全依赖于服务器到服务器的 API 调用，买方对此没有任何影响。

# javascript - 跨域请求的 jsonp 和 jQuery.support.cors 之间的区别？还有为什么我不能在 jsonp 请求中发布数据？

> ID：15186776
> 
> 赞同：0
> 
> 时间：2013-03-03T14:36:57.043
> 
> 标签：javascript, jquery, jsonp

我在本地编写并测试了我的代码，知道跨域请求很棘手，但我只是忘记了。现在我想发布我得到的代码。

所以我做了一些研究，显然我有两个选择

> 1 - 使用 jsonp dataType 和回调函数
> 2 - 只需将 jQuery.support.cors = true 和 crossDomain: true 添加到我的 ajax 代码

ofcurse 第二个选项似乎更容易，我不需要修改我的代码，但有什么缺点？我的意思是我猜使用 jsonp 有一些优势？我不得不提到我的服务器端代码向请求返回一个 json 对象

另一个问题，为什么我不能使用 POST 方法在我的 jsonp 请求中发送数据？

```
$.ajax({
 url:'".base_url()."site/remote_group_like/' ,
 dataType: 'jsonp', 
 jsonpCallback: 'getResources' ,
 type: 'POST',
 data: {url : url , domain : domain} , 
 success:function(data){
 },
 error:function(){
 },
}); 
```

我已经`type: 'POST'`输入了代码，但它一直在发送`GET`请求？以及为什么它没有显示在 fire bug 中发送的 ajax 请求？

# javascript - 多个事件被添加到内部视图主干？

> ID：15186777
> 
> 赞同：1
> 
> 时间：2013-03-03T14:36:59.417
> 
> 标签：javascript, backbone.js

所以在这里我有两个视图 addBook 和 showBooks ，想法是，当我点击一个按钮时，它应该向 DOM 添加书名和作者

*   ，我应该可以点击它。但问题在于每个人*   元素添加了多个事件处理程序。也就是说，对于每个新的内部视图，都添加了多个点击事件，我在骨干网中很新，我仍然处于黑暗中这是我的代码，首先是外部视图

    ```
    var addBook = Backbone.View.extend({
            el : $('#addbook'),
            model : bookmodel,
            template : _.template(addbookTemplate,{}),
            initialize : function(val){
                this.el.html(this.template);
                bookcollection.bind('add', this.showOff)
            },
            render : function(){
            },
            events : {
                'click #addbookbutton' : 'addHandler'
            },
            addHandler : function(){                
                var book =  new this.model;
    book.addValues($('#bookname').val(), $('#bookauthor').val());
     bookcollection.add(book);

            },
            showOff : function(buk){
                this.xx = new showval({model: buk});
                $('#fatman').append((this.xx.render().el));
            }
        });
        return addBook; 
    ```

    现在是第二个和内部视图

    ```
    var showbooks = Backbone.View.extend({
            events : {
                'click .individual' : 'deleteHandler'
            },
            initialize : function(values){
                _.bindAll(this);
                /*if(values){*/

                    //return this.template;
                //}
                //values = (values == "") ? {} : values;
                this.el.append(this.template);
            },
            render : function(){
                this.el = _.template(show, {name : "Max", author : "jk"});
                this.delegateEvents();
                return this;    
            },

            deleteHandler : function(e){
                alert("this kills me")
            }
        });
        return showbooks; 
    ```

    现在这是我单击按钮时的问题

    *   已添加到 DOM 按钮，但对于每个新的 li 都会触发一个警报...非常感谢您的帮助，我知道我错过了一些关键点.. !!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T15:50:55.143

我采用了您的代码并稍作更改。我创建了 2 个`Backbone.View`，一个作为容器，一个用于书籍。这很粗糙，但希望能让您了解哪里出错了。[http://jsfiddle.net/cQEu2/](http://jsfiddle.net/cQEu2/)

# mysql - 在休眠中映射只有外键的表

> ID：15186781
> 
> 赞同：1
> 
> 时间：2013-03-03T14:37:08.683
> 
> 标签：mysql, hibernate, foreign-keys, hibernate-mapping

我是休眠的新手，我想使用 xml 文件映射一个只有外键的表。我有 3 个表 1.UserInfo（用于带有主键的用户详细信息） 2.AuthorInfo（包含带有主键的作者详细信息） 3.AuthorFollow（映射哪个用户正在关注哪个作者）。AuthorFollow 表仅包含 2 列 UserId 和 AuthorId 都分别与第一个 2 个表有关系（外键）。我没有在这些列上给出任何索引。

我在 AuthorFollow.hbm.xml 中编写了以下代码

但是，它不能正常工作。

```
 <?xml version='1.0' encoding='utf-8'?> 
```

```
 <composite-id>
        <key-many-to-one name="userId" column="user_id" class="com.pojo.hibernate.UserInfo" />
        <key-many-to-one name="authorId" column="author_id" class="com.pojo.hibernate.AuthorInfo" />
    </composite-id>

</class> 
```

（我用过mysql。）

而且，表结构是否正确？

# android - XmlPullParser Android 更简单的方法？

> ID：15186784
> 
> 赞同：0
> 
> 时间：2013-03-03T14:37:19.220
> 
> 标签：android, xml, xmlpullparser

我正在做一个项目，我想动态地制作一个应用程序。

我想使用定义了所有模板的 xml 文件来做到这一点，这样我就可以解析它们并将它们应用于模板。

但是我有一个关于 xmlPullParser 的问题，当有很多标签和属性时，解析代码似乎很困难，又大又丑。

有一个更好的方法吗？

这是我目前用作示例的 xml：

```
 <?xml version="1.0" encoding="UTF-8"?>
<app>
    <template type="chapter">
        <background>#10c1c5</background>
        <number color="#ffffff">01</number>
        <maxnumber color="#ffffff">07</maxnumber>
        <title color="#ffffff">Het Verhaal</title>
    </template>
    <template type="chapter">
        <background>#10c1c5</background>
        <number color="#ffffff">02</number>
        <maxnumber color="#ffffff">07</maxnumber>
        <title color="#ffffff">De Bruul</title>
    </template>
    <template type="chapter">
        <background>#10c1c5</background>
        <number color="#ffffff">03</number>
        <maxnumber color="#ffffff">07</maxnumber>
        <title color="#ffffff">Grote markt</title>
    </template>
    <template type="chapter">
        <background>#10c1c5</background>
        <number color="#ffffff">04</number>
        <maxnumber color="#ffffff">07</maxnumber>
        <title color="#ffffff">De Sint-Romboutstoren</title>
    </template>
    <template type="chapter">
        <background>#10c1c5</background>
        <number color="#ffffff">05</number>
        <maxnumber color="#ffffff">07</maxnumber>
        <title color="#ffffff">De Vismarkt</title>
    </template>
    <template type="chapter">
        <background>#10c1c5</background>
        <number color="#ffffff">06</number>
        <maxnumber color="#ffffff">07</maxnumber>
        <title color="#ffffff">Hanswijk</title>
    </template>
    <template type="chapter">
        <background>#10c1c5</background>
        <number color="#ffffff">07</number>
        <maxnumber color="#ffffff">07</maxnumber>
        <title color="#ffffff">De Vest</title>
    </template>

<template type="route">
    <text>Ga 150 meter verder</text>
    <background>#003e79</background>
</template>
<template type="route">
    <text>Ga 550 meter verder</text>
    <background>#0000FF</background>
</template>
<template type="route">
    <text>Ga 850 meter verder</text>
    <background>#00FF00</background>
</template>
</app> 
```

这是解析它，制作正确的对象并设置颜色和文本的丑陋代码：

```
public List<Fragment> parse() {
        // parse de xml plaats de objecten in de list en return de list

        try {

            factory = XmlPullParserFactory.newInstance();
            factory.setNamespaceAware(false); // use namespace ?
            xpp = factory.newPullParser();
            // xmluit file laden
            String file = "assets/test.xml";
            InputStream in = this.getClass().getClassLoader()
                    .getResourceAsStream(file);
            xpp.setInput(in, null);

            int eventType = xpp.getEventType();

            while (eventType != XmlPullParser.END_DOCUMENT) {
                String tagname = xpp.getName(); // tag naam
                String atType = xpp.getAttributeValue(null, "type"); // atrribuut
                                                                        // type
                String atColor = xpp.getAttributeValue(null, "color");

                switch (eventType) {
                case XmlPullParser.START_TAG:
                    if (tagname.equalsIgnoreCase("template")) {
                        if (atType.equalsIgnoreCase("route")) {
                            // fragments.add(new RouteFragment()); //nieuw
                            // routefragment toevoegen aan de lijst
                            route = new RouteFragment();
                            typeObject = "route";
                        } else if (atType.equalsIgnoreCase("chapter")) {
                            // fragments.add(new chapterFragment()); //nieuw
                            // chapterfragment toevoegen aan de lijst
                            chapter = new ChapterFragment();
                            typeObject = "chapter";
                        }

                    } else if (tagname.equalsIgnoreCase("number")) {
                        if (typeObject.equalsIgnoreCase("chapter")) {
                            chapter.setNumberTextcolor(atColor);
                        }
                    } else if (tagname.equalsIgnoreCase("maxnumber")) {
                        if (typeObject.equalsIgnoreCase("chapter")) {
                            chapter.setMaxNumberColor(atColor);
                        }
                    } else if (tagname.equalsIgnoreCase("title")) {
                        if (typeObject.equalsIgnoreCase("chapter")) {
                            chapter.setTitleColor(atColor);
                        }
                    }
                    break;

                case XmlPullParser.TEXT:
                    text = xpp.getText();
                    break;

                case XmlPullParser.END_TAG:
                    if (tagname.equalsIgnoreCase("template")) {
                        if (typeObject.equalsIgnoreCase("route")) {
                            fragments.add(route); // nieuw routefragment
                                                    // toevoegen aan de lijst

                        }
                        if (typeObject.equalsIgnoreCase("chapter")) {
                            fragments.add(chapter); // nieuw chapterfragment
                                                    // toevoegen aan de lijst
                        }
                    } else if (tagname.equalsIgnoreCase("text")) {
                        if (typeObject.equalsIgnoreCase("route")) {
                            route.setOmschrijving(text);
                        }
                    } else if (tagname.equalsIgnoreCase("background")) {
                        if (typeObject.equalsIgnoreCase("route")) {
                            route.setKleur(text);
                        } else if (typeObject.equalsIgnoreCase("chapter")) {
                            chapter.setBackgroundColor(text);
                        }
                    } else if (tagname.equalsIgnoreCase("number")) {
                        if (typeObject.equalsIgnoreCase("chapter")) {
                            chapter.setNumber(text);
                        }
                    } else if (tagname.equalsIgnoreCase("maxnumber")) {
                        if (typeObject.equalsIgnoreCase("chapter")) {
                            chapter.setMaxNumber(text);
                        }
                    } else if (tagname.equalsIgnoreCase("title")) {
                        if (typeObject.equalsIgnoreCase("chapter")) {
                            chapter.setTitle(text);
                        }
                    }
                    break;
                default:
                    break;

                }
                eventType = xpp.next();
            }

        } catch (XmlPullParserException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }

        return fragments;

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-12T20:37:19.523

您的代码中有太多嵌套`if/else`语句，因此难以阅读。您应该将代码分解为具体的方法，即**parseApp()**、**readTemplate()**、**readBackground()**、**readNumber()**、**readMaxNumber()**、**readTitle()** 有关源代码的真实示例，请参阅 Google 的此页面:[解析 XML 数据](http://developer.android.com/training/basics/network-ops/xml.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-29T19:12:18.367

我对你的建议是使用 boolean 它看起来更优雅和可读...下一个示例用于解析 New York Times 的 xml，从项目标签中获取标题内容我希望它在某种程度上有所帮助.. .

```
public class MainActivity extends Activity {
boolean item;
boolean title;
String titleContent;
String tagName;
String childrens="";
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    Resources res = getResources();
    try
    {
        XmlPullParser parser = res.getXml(R.xml.wallarss);
        int eventType = parser.getEventType();
        while(eventType!=XmlPullParser.END_DOCUMENT)
        {
            if(eventType==XmlPullParser.START_TAG)
            {   
                tagName=parser.getName();

                if(item)
                {
                    if(tagName.equals("title"))
                    {
                        title=true;
                    }

                }
                else//!item
                {
                    if(tagName.equals("item"))
                        item=true;
                }
                if(eventType==XmlPullParser.END_TAG)
                {
                    tagName=parser.getName();
                    if(tagName.equals("item"))
                        item=false;
                }

            }
                if(eventType==XmlPullParser.TEXT)
                {
                    if(title)
                    {
                        String artical=parser.getText();
                        Log.i("news",artical);
                        title=false;
                    }
                    eventType=XmlPullParser.START_TAG;
                }

            eventType=parser.next();
        }
    }

    catch(XmlPullParserException ex)
    {
        Log.e("Xml reader problem", "canot read xml file", ex);
    }
    catch(IOException ex)
    {
        Log.e("I/O problem", "Input/Output Erorr", ex);
    }
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    // Inflate the menu; this adds items to the action bar if it is present.
    getMenuInflater().inflate(R.menu.main, menu);
    return true;
} 
```

}

# c++ - OpenCv，内存不足错误

> ID：15186786
> 
> 赞同：1
> 
> 时间：2013-03-03T14:37:41.167
> 
> 标签：c++, opencv, computer-vision

我在 Opencv 中创建了这段代码，大约 900 帧后，出现了这个错误：

```
OpenCV Error: Insufficient memory (Failed to allocate 921600 bytes) in function, file ..\..\..\..\ocv\opencv\src\cxcore\cxalloc.cpp, line 52 
```

但我已经初始化了一次变量。这是代码：

```
int _tmain(int argc, _TCHAR* argv[])
{
     IplImage * image;
     CvCapture * capture = cvCaptureFromCAM ( 0 );
     while ( 1 ){
         image = cvCreateImage ( cvSize ( 640,480 ) , 8, 3 );
         image = cvQueryFrame ( capture );
         cvShowImage ( "test", image );
         cvWaitKey ( 10 );
     }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T14:45:13.520

您不断地创建新图像而`cvCreateImage`无需使用，更重要的是，无需在任何地方发布它们。

只需删除此行（除了吃掉你的记忆之外它不会做任何事情）：

```
image = cvCreateImage ( cvSize ( 640,480 ) , 8, 3 ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T14:44:14.063

你需要`cvReleaseImage`在某个时候打电话。

# delphi - 使用 SuperObject 在类中调用过程

> ID：15186788
> 
> 赞同：2
> 
> 时间：2013-03-03T14:38:01.927
> 
> 标签：delphi, superobject

我正在尝试使用超级对象在类中调用一个过程，但它不起作用，我在这里做错了什么？

代码示例：

```
program test_rpc;

{$IFDEF FPC}
  {$MODE OBJFPC}{$H+}
{$ELSE}
  {$APPTYPE CONSOLE}
{$ENDIF}

uses
  SysUtils, superobject;

type
  TCC = class(TObject)
  published
    procedure controler_method1(const This, Params: ISuperObject; var Result: ISuperObject);
  end;

procedure TCC.controler_method1(const This, Params: ISuperObject; var Result: ISuperObject);
var
  i: Integer;
begin
  write('action called with params ');
  writeln(Params.AsString);
end;

var
  s: ISuperObject;
  CC: TCC;
begin
  CC := TCC.Create;
  s := TSuperObject.Create;
  s.M['controler.action1'] := CC.MethodAddress('controler_method1');
  try
    s['controler.action1("HHAHAH")'];
  finally
    s := nil;
    writeln('Press enter ...');
    readln;
  end;
end. 
```

那会崩溃，我在这里做错了什么？

它实际上是“用参数调用的动作”，但没有显示参数......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-03T15:57:44.350

super 方法的签名如下：

```
TSuperMethod = procedure(const This, Params: ISuperObject;
    var Result: ISuperObject); 
```

这意味着您不能使用实例方法，因为实例方法具有不兼容的签名。您的方法必须如下所示：

```
procedure sm(const This, Params: ISuperObject; var Result: ISuperObject);
begin
  ....
end; 
```

您收到运行时错误而不是编译时错误的原因是您使用 @ 运算符放弃了类型系统。删除@，您的程序将在编译时失败，并显示一条错误消息，该错误消息是我上面所说的更简洁的版本。

Delphi 编程的一大谬误是必须使用@ 运算符来获取函数指针。这是一个坏习惯，你最好改掉。

# symbols - 符号矩阵函数微分

> ID：15186790
> 
> 赞同：0
> 
> 时间：2013-03-03T14:38:11.747
> 
> 标签：symbols, debug-symbols, symbolic-math, symbolicate

1.函数“diff”似乎只能与单元素变量“v”一起使用

```
diff(f,v); % f(v), v is a one-lelement variable 
```

虽然我想对符号矩阵进行微分

```
diff(F, V); % F(V), V is a symbol matrix variable 
```

2.如果我对符号矩阵的每个元素进行微分，得到diff(F, V)的结果，而结果是逐元素格式的，

```
[g1(v_i), g2(v_i), ..., gn(v_i)] 
```

所以我想知道有没有一些方法可以像这样以符号矩阵变量格式生成结果？

```
g(V) 
```

3.例如

```
diff(x^T*A*x, x) = A^T*x + A*x; % A is a constant matrix, x is a vector 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T21:35:23.937

相信你正在寻找[`jacobian`](http://www.mathworks.de/de/help/symbolic/jacobian.html)。

# c - 恢复用户堆栈/寄存器

> ID：15186792
> 
> 赞同：2
> 
> 时间：2013-03-03T14:38:26.573
> 
> 标签：c, assembly, arm

我在 ARM926 上的抢先操作系统（极简主义）结束了，但我遇到了困难。

今天，我能够启动操作系统，切换到用户模式（使用它自己的任务）并在定时器中断后返回操作系统模式（SVC）。

但是今天我试图在定时器中断之前返回带有上下文的用户函数。

我做了什么：我的初始化任务功能：

```
init_task(taskstruct * task, unsigned int* stack, void (*function)(void) ){

    stack += STACK_SIZE;// - 16; /* End of stack, minus what we're about to push */
    //stack[0] = 0x10; /* User mode, interrupts on */
    //stack[1] = (unsigned int)function;

    task->sp = stack;

    task->sp[0] = task->registers[0]; // r0
    task->sp[1] = task->registers[1];// = task->sp[3];//0; // r1
    task->sp[2] = task->registers[2];// = task->sp[4];//0; // r2
    task->sp[3] = task->registers[3];// = task->sp[5];//0; // r3
    task->sp[4] = task->registers[4];// = task->sp[6];//0; // r4
    task->sp[5] = task->registers[5];// = task->sp[7];//0; // r5
    task->sp[6] = task->registers[6];// = task->sp[8];//0; // r6
    task->sp[7] = task->registers[7];// = task->sp[9];//0; // r7
    task->sp[8] = task->registers[8];// = task->sp[10];//0; // r8
    task->sp[9] = task->registers[9];// = task->sp[11];//0; // r9
    task->sp[10] = task->registers[10];// = task->sp[12];//0; // r10
    task->sp[11] = task->registers[11];// = task->sp[13];//0; // r11
    task->sp[12] = task->registers[12];// = task->sp[14];//0; // r12
    task->sp[13] = (unsigned int)function;
} 
```

激活功能：

```
.global activate
activate:
    /* Save kernel state */
    STMFD sp!,{r1-r12,lr}
    NOP
    msr CPSR_c, SYS_MODE /* Sys mode with IRQ enabled and FIQ disabled*/
    mov sp, r0 /* MOVE TO THE STACK USER
    /* LOAD THE TASK'S CONTEXT */
    mov ip, r0
    LDMFD sp!, {r0-ip,lr}
    NOP
    mov pc, lr 
```

它的调用：

```
activate(task[0].sp);
print_uart0("Kernel gets back control ! \n");
print_uart0("Load the next task ! \n");
activate(task[0].sp); 
```

我在 irq_handler 中做了什么：

```
irq_handler:
/* Save the return value */
SUB ip,lr,#4
BL event_irq_handler

/* Save the user task context */
MSR CPSR_c, #INT_OFF|SYS_MODE
MOV lr, ip
STMFD sp!,{r0-ip,lr}
NOP
MOV r0, sp
BL saveTaskContext

/* Load kernel state */
MSR CPSR_c,SVC_MODE
LDMFD sp!,{r1-r12,pc}
NOP 
```

savcontext 函数：

```
int i = 0;
//char printable = 0x00;
/* UPDATE THE STACK TASK */
for ( i = 0 ; i <= 13 ; i++ ){
    task[0].sp[i] = *(ptr+i);
} 
```

但是我的问题是当我第二次调用activate(task[0].sp) 时，它会在任何地方分支并且我的主程序会重新启动。

我哪里错了？

问候，文森特B

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T16:42:52.707

没关系，经过长时间的努力，我终于找到了解决方案！

最终代码比原始代码非常简单：

我只是更改了 irq_handler 中的代码，其余代码与我上一篇文章中的相同：

```
irq_handler:
/* Save the return value */
SUB lr,lr,#4
STMFD sp!, {r0-ip, lr}^ /* Save the user task context */
MOV r0, sp
BL saveTaskContext

BL event_irq_handler

/* Load kernel state */
MSR CPSR_c,SVC_MODE
LDMFD sp!,{r1-r12,pc}
NOP 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T14:51:53.437

我只是觉得在你

```
for ( i = 0 ; i <= 13 ; i++ ){
    task[0].sp[i] = *(ptr+i);
} 
```

应该这样做吗？

```
for ( i = 0 ; i <= 13 ; i++ ){
    task[0].sp[i] = (*ptr+i);
} 
```

我想......你附加地址`ptr`的值`i`但不太确定

# javascript - 如何更改来自“类”属性的 CSS 参数？

> ID：15186793
> 
> 赞同：1
> 
> 时间：2013-03-03T14:38:27.000
> 
> 标签：javascript, css

我正在尝试以这种方式修改给定元素中的一些 CSS 属性：

```
var rsc_menu = document.getElementById("rsc_menu");
rsc_menu.style.top = 303;
rsc_menu.style.height = 29; 
```

不幸的是，在代码执行之后，元素仍然停留在其原始位置并保持其原始大小。我注意到了`alert(rsc_menu.style.top)`，`alert(rsc_menu.style.height)`两者都显示一个空框。
元素声明如下：

```
<div class="resources_menu" id="rsc_menu"> 
```

如您所见，它从外部样式表中获取所有样式参数；我没有为它定义任何`style`标签。这可能是问题吗？有什么方法可以在不更改`<div>`标签的情况下完成任务？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-03T14:40:29.980

你必须通过它：

1.  作为一个字符串
2.  使用有效单位

所以你的代码看起来像这样：

```
var rsc_menu = document.getElementById("rsc_menu");
rsc_menu.style.top = "303px";
rsc_menu.style.height = "29px"; 
```

# batch-file - 如何使用批处理脚本从多行 txt 文件中删除最后一个字符？

> ID：15186794
> 
> 赞同：1
> 
> 时间：2013-03-03T14:39:25.110
> 
> 标签：batch-file, character

这是我的示例输入 txt 文件内容：

```
2   12  1   0   0   1
3   13  1   1   0   0
4   14  1   0   1   0
9   19  0   1   0   0 
```

我想得到这个内容：

```
1`{SEQ=2,ACK=12,CTL=(SYN,on)} ++
1`{SEQ=3,ACK=13,CTL=(FIN,on)} ++
1`{SEQ=4,ACK=14,CTL=(RST,on)} ++
1`{SEQ=9,ACK=19,CTL=(FIN,off)} 
```

所以我使用了批处理脚本：

```
@echo off
for /f "tokens=1-6 delims=  " %%a in (file.txt) do (
IF %%c==1 IF %%d==0 IF %%e==0 IF %%f==0 ECHO 1^`^{SEQ=%%a,ACK=%%b,CTL=^(ACK,on^)^} ^+^+>> SEG1to2.txt
IF %%c==1 IF %%d==1 IF %%e==0 IF %%f==0 ECHO 1^`^{SEQ=%%a,ACK=%%b,CTL=^(FIN,on^)^} ^+^+>> SEG1to2.txt
IF %%c==1 IF %%d==0 IF %%e==1 IF %%f==0 ECHO 1^`^{SEQ=%%a,ACK=%%b,CTL=^(RST,on^)^} ^+^+>> SEG1to2.txt
IF %%c==1 IF %%d==0 IF %%e==0 IF %%f==1 ECHO 1^`^{SEQ=%%a,ACK=%%b,CTL=^(SYN,on^)^} ^+^+>> SEG1to2.txt
IF %%c==0 IF %%d==1 IF %%e==0 IF %%f==0 ECHO 1^`^{SEQ=%%a,ACK=%%b,CTL=^(FIN,off^)^} ^+^+>> SEG1to2.txt
IF %%c==0 IF %%d==0 IF %%e==1 IF %%f==0 ECHO 1^`^{SEQ=%%a,ACK=%%b,CTL=^(RST,off^)^} ^+^+>> SEG1to2.txt
IF %%c==0 IF %%d==0 IF %%e==0 IF %%f==1 ECHO 1^`^{SEQ=%%a,ACK=%%b,CTL=^(SYN,off^)^} ^+^+>> SEG1to2.txt
) 
```

但当然我得到这个输出：

```
1`{SEQ=2,ACK=12,CTL=(SYN,on)} ++
1`{SEQ=3,ACK=13,CTL=(FIN,on)} ++
1`{SEQ=4,ACK=14,CTL=(RST,on)} ++
1`{SEQ=9,ACK=19,CTL=(FIN,off)} ++ 
```

所以我需要删除最后两个“++”。如何才能做到这一点？我不知道将使用批处理文件中的哪个选项，以及使用多少次。

任何帮助，将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-03T15:40:44.183

您可以使用名称中内置的排列以及值中的所需输出来定义变量，而不是使用 IF 语句测试每个排列。然后您可以简单地使用延迟扩展来打印出正确的值。

```
@echo off
setlocal enableDelayedExpansion
set "map1001=CTL=(SYN,on)} ++"
set "map1100=CTL=(FIN,on)} ++"
set "map1010=CTL=(RST,on)} ++"
set "map0001=CTL=(SYN,off)}"
set "map0100=CTL=(FIN,off)}"
set "map0010=CTL=(RST,off)}"
for /f "tokens=1-6 delims= " %%A in (test.txt) do (
  if defined map%%C%%D%%E%%F echo 1`{SEQ=%%A,ACK=%%B,!map%%C%%D%%E%%F!
) 
```

如果`++`要出现在除最后一行之外的所有行上，则需要更多的逻辑。

```
@echo off
setlocal enableDelayedExpansion
set "map1001=CTL=(SYN,on)}"
set "map1100=CTL=(FIN,on)}"
set "map1010=CTL=(RST,on)}"
set "map0001=CTL=(SYN,off)}"
set "map0100=CTL=(FIN,off)}"
set "map0010=CTL=(RST,off)}"
set "ln="
for /f "tokens=1-6 delims= " %%A in (test.txt) do (
  if defined map%%C%%D%%E%%F (
    if defined ln echo !ln! ++
    set "ln=1`{SEQ=%%A,ACK=%%B,!map%%C%%D%%E%%F!"
  )
)
if defined ln echo !ln! 
```

# html - 在 td 标签上显示背景图片

> ID：15186795
> 
> 赞同：10
> 
> 时间：2013-03-03T14:39:27.013
> 
> 标签：html, css

我正在尝试在标签 td 上显示背景图像。我有代码

```
<td style="background-image:url(../uploadimages/18-2-2013-23-33-01-Lighthouse.jpg);background-repeat:no-repeat;background-size:250px 180px;"></td>

<img src="../uploadimages/18-2-2013-23-33-01-Lighthouse.jpg" /> 
```

我使用标签 img 测试了路径，它得到了正确的路径，但我不知道它没有显示在 td 标签的背景图像中。

非常感谢您

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-03-03T14:44:13.213

不会显示背景图像，`td`因为它没有任何内容，因此没有空间`td`来绘制背景。`background-size`设置*背景*的大小，而不是容器的大小。尝试`width:250px;height:180px;`使用内联样式`td`- 它应该显示图像。

[这是 jsfiddle 中的演示](http://jsfiddle.net/gHYsh/1/)。如果您从 CSS 中删除`width`和`height`设置，您将看不到图像。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2015-08-08T09:24:19.220

**适当的解决方案**

首先，你必须指定 td 的宽度和高度。遵循将正常工作的示例---

```
<td style="background-image:url(../uploadimages/18-2-2013-23-33-01-Lighthouse.jpg);background-repeat:no-repeat;background-size:250px 180px;   width: 250px; height: 180px;"></td> 
```

# java - 由于 APK 文件无效，安装失败！（尝试运行模拟器时）尝试导出时也失败

> ID：15186798
> 
> 赞同：0
> 
> 时间：2013-03-03T14:40:17.297
> 
> 标签：java, android, eclipse, export, apk

我无法在模拟器上运行我的应用程序（或导出到 APK）我真的不知道发生了什么......希望有人以前遇到过这个问题或者可以解释正在发生的事情！

从 LOGCAT 的最后一行来看，我需要将它分成不同的线程——但我不知道如何开始！

任何帮助是极大的赞赏！！

日志猫：

```
03-03 00:43:49.098: D/AndroidRuntime(1003): >>>>>> AndroidRuntime START      com.android.internal.os.RuntimeInit <<<<<<
03-03 00:43:49.098: D/AndroidRuntime(1003): CheckJNI is ON
03-03 00:43:49.158: D/dalvikvm(1003): Trying to load lib libjavacore.so 0x0
03-03 00:43:49.168: D/dalvikvm(1003): Added shared lib libjavacore.so 0x0
03-03 00:43:49.218: D/dalvikvm(1003): Trying to load lib libnativehelper.so 0x0
03-03 00:43:49.218: D/dalvikvm(1003): Added shared lib libnativehelper.so 0x0
03-03 00:43:49.748: D/ExchangeService(647): Received deviceId from Email app: null
03-03 00:43:49.748: D/ExchangeService(647): !!! deviceId unknown; stopping self and retrying
03-03 00:43:50.408: D/AndroidRuntime(1003): Calling main entry com.android.commands.pm.Pm
03-03 00:43:50.508: W/PackageParser(512): Unable to read AndroidManifest.xml of     /data/local/tmp/Linking Manager.apk
03-03 00:43:50.508: W/PackageParser(512): java.io.FileNotFoundException: AndroidManifest.xml
03-03 00:43:50.508: W/PackageParser(512):   at     android.content.res.AssetManager.openXmlAssetNative(Native Method)
03-03 00:43:50.508: W/PackageParser(512):   at     android.content.res.AssetManager.openXmlBlockAsset(AssetManager.java:487)
03-03 00:43:50.508: W/PackageParser(512):   at android.content.res.AssetManager.openXmlResourceParser(AssetManager.java:455)
03-03 00:43:50.508: W/PackageParser(512):   at android.content.pm.PackageParser.parsePackageLite(PackageParser.java:733)
03-03 00:43:50.508: W/PackageParser(512):   at     com.android.defcontainer.DefaultContainerService$1.getMinimalPackageInfo(DefaultContainerService.java    :171)
03-03 00:43:50.508: W/PackageParser(512):   at     com.android.internal.app.IMediaContainerService$Stub.onTransact(IMediaContainerService.java:110)
03-03 00:43:50.508: W/PackageParser(512):   at android.os.Binder.execTransact(Binder.java:351)
03-03 00:43:50.508: W/PackageParser(512):   at dalvik.system.NativeStart.run(Native Method)
03-03 00:43:50.508: W/DefContainer(512): Failed to parse package
03-03 00:43:50.518: W/ActivityManager(292): No content provider found for permission revoke:     file:///data/local/tmp/Linking Manager.apk
03-03 00:43:50.698: D/dalvikvm(292): GC_EXPLICIT freed 10K, 27% free 5565K/7544K, paused     10ms+18ms, total 181ms
03-03 00:43:50.778: D/AndroidRuntime(1003): Shutting down VM
03-03 00:43:50.838: D/dalvikvm(1003): GC_CONCURRENT freed 119K, 21% free 477K/600K, paused     3ms+1ms, total 53ms
03-03 00:43:50.838: D/jdwp(1003): Got wake-up signal, bailing out of select
03-03 00:43:50.838: D/dalvikvm(1003): Debugger has detached; object registry had 1 entries
03-03 00:43:54.848: D/ExchangeService(647): !!! EAS ExchangeService, onCreate
03-03 00:43:54.848: D/ExchangeService(647): !!! EAS ExchangeService, onStartCommand, startingUp =     false, running = false
03-03 00:43:54.877: D/ExchangeService(647): !!! EAS ExchangeService, onStartCommand, startingUp =     true, running = false
03-03 00:43:54.887: W/ActivityManager(292): Unable to start service Intent {     act=com.android.email.ACCOUNT_INTENT } U=0: not found
03-03 00:43:54.887: D/ExchangeService(647): !!! Email application not found; stopping self
03-03 00:43:54.907: W/ActivityManager(292): Unable to start service Intent {     act=com.android.email.ACCOUNT_INTENT } U=0: not found
03-03 00:43:54.937: E/ActivityThread(647): Service com.android.exchange.ExchangeService has     leaked ServiceConnection com.android.emailcommon.service.ServiceProxy$ProxyConnection@40d09ac8 that     was originally bound here
03-03 00:43:54.937: E/ActivityThread(647): android.app.ServiceConnectionLeaked: Service     com.android.exchange.ExchangeService has leaked ServiceConnection     com.android.emailcommon.service.ServiceProxy$ProxyConnection@40d09ac8 that was originally bound here
03-03 00:43:54.937: E/ActivityThread(647):  at android.app.LoadedApk$ServiceDispatcher.<init>    (LoadedApk.java:969)
03-03 00:43:54.937: E/ActivityThread(647):  at     android.app.LoadedApk.getServiceDispatcher(LoadedApk.java:863)
03-03 00:43:54.937: E/ActivityThread(647):  at     android.app.ContextImpl.bindService(ContextImpl.java:1418)
03-03 00:43:54.937: E/ActivityThread(647):  at     android.app.ContextImpl.bindService(ContextImpl.java:1407)
03-03 00:43:54.937: E/ActivityThread(647):  at     android.content.ContextWrapper.bindService(ContextWrapper.java:473)
03-03 00:43:54.937: E/ActivityThread(647):  at     com.android.emailcommon.service.ServiceProxy.setTask(ServiceProxy.java:157)
03-03 00:43:54.937: E/ActivityThread(647):  at     com.android.emailcommon.service.ServiceProxy.setTask(ServiceProxy.java:145)
03-03 00:43:54.937: E/ActivityThread(647):  at     com.android.emailcommon.service.AccountServiceProxy.getDeviceId(AccountServiceProxy.java:116)
03-03 00:43:54.937: E/ActivityThread(647):  at     com.android.exchange.ExchangeService.getDeviceId(ExchangeService.java:1249)
03-03 00:43:54.937: E/ActivityThread(647):  at     com.android.exchange.ExchangeService$7.run(ExchangeService.java:1856)
03-03 00:43:54.937: E/ActivityThread(647):  at     com.android.emailcommon.utility.Utility$2.doInBackground(Utility.java:551)
03-03 00:43:54.937: E/ActivityThread(647):  at     com.android.emailcommon.utility.Utility$2.doInBackground(Utility.java:549)
03-03 00:43:54.937: E/ActivityThread(647):  at android.os.AsyncTask$2.call(AsyncTask.java:287)
03-03 00:43:54.937: E/ActivityThread(647):  at     java.util.concurrent.FutureTask.run(FutureTask.java:234)
03-03 00:43:54.937: E/ActivityThread(647):  at     java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1080)
03-03 00:43:54.937: E/ActivityThread(647):  at     java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:573)
03-03 00:43:54.937: E/ActivityThread(647):  at java.lang.Thread.run(Thread.java:856)
03-03 00:43:54.947: E/StrictMode(647): null
03-03 00:43:54.947: E/StrictMode(647): android.app.ServiceConnectionLeaked: Service     com.android.exchange.ExchangeService has leaked ServiceConnection com.android.emailcommon.service.ServiceProxy$ProxyConnection@40d09ac8 that was originally bound here
03-03 00:43:54.947: E/StrictMode(647):  at android.app.LoadedApk$ServiceDispatcher.<init>    (LoadedApk.java:969)
03-03 00:43:54.947: E/StrictMode(647):  at     android.app.LoadedApk.getServiceDispatcher(LoadedApk.java:863)
03-03 00:43:54.947: E/StrictMode(647):  at android.app.ContextImpl.bindService(ContextImpl.java:1418)
03-03 00:43:54.947: E/StrictMode(647):  at     android.app.ContextImpl.bindService(ContextImpl.java:1407)
03-03 00:43:54.947: E/StrictMode(647):  at     android.content.ContextWrapper.bindService(ContextWrapper.java:473)
03-03 00:43:54.947: E/StrictMode(647):  at     com.android.emailcommon.service.ServiceProxy.setTask(ServiceProxy.java:157)
03-03 00:43:54.947: E/StrictMode(647):  at     com.android.emailcommon.service.ServiceProxy.setTask(ServiceProxy.java:145)
03-03 00:43:54.947: E/StrictMode(647):  at com.android.emailcommon.service.AccountServiceProxy.getDeviceId(AccountServiceProxy.java:116)
03-03 00:43:54.947: E/StrictMode(647):  at com.android.exchange.ExchangeService.getDeviceId(ExchangeService.java:1249)
03-03 00:43:54.947: E/StrictMode(647):  at com.android.exchange.ExchangeService$7.run(ExchangeService.java:1856)
03-03 00:43:54.947: E/StrictMode(647):  at com.android.emailcommon.utility.Utility$2.doInBackground(Utility.java:551)
03-03 00:43:54.947: E/StrictMode(647):  at com.android.emailcommon.utility.Utility$2.doInBackground(Utility.java:549)
03-03 00:43:54.947: E/StrictMode(647):  at android.os.AsyncTask$2.call(AsyncTask.java:287)
03-03 00:43:54.947: E/StrictMode(647):  at     java.util.concurrent.FutureTask.run(FutureTask.java:234)
03-03 00:43:54.947: E/StrictMode(647):  at     java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1080)
03-03 00:43:54.947: E/StrictMode(647):  at     java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:573)
03-03 00:43:54.947: E/StrictMode(647):  at java.lang.Thread.run(Thread.java:856)
03-03 00:43:54.957: W/ActivityManager(292): Unbind failed: could not find connection for     android.os.BinderProxy@41003258
03-03 00:43:54.977: E/ActivityThread(647): Service com.android.exchange.ExchangeService has     leaked ServiceConnection com.android.emailcommon.service.ServiceProxy$ProxyConnection@40d42668 that     was originally bound here
03-03 00:43:54.977: E/ActivityThread(647): android.app.ServiceConnectionLeaked: Service     com.android.exchange.ExchangeService has leaked ServiceConnection com.android.emailcommon.service.ServiceProxy$ProxyConnection@40d42668 that was originally bound here
03-03 00:43:54.977: E/ActivityThread(647):  at android.app.LoadedApk$ServiceDispatcher.<init>    (LoadedApk.java:969)
03-03 00:43:54.977: E/ActivityThread(647):  at     android.app.LoadedApk.getServiceDispatcher(LoadedApk.java:863)
03-03 00:43:54.977: E/ActivityThread(647):  at     android.app.ContextImpl.bindService(ContextImpl.java:1418)
03-03 00:43:54.977: E/ActivityThread(647):  at android.app.ContextImpl.bindService(ContextImpl.java:1407)
03-03 00:43:54.977: E/ActivityThread(647):  at android.content.ContextWrapper.bindService(ContextWrapper.java:473)
03-03 00:43:54.977: E/ActivityThread(647):  at     com.android.emailcommon.service.ServiceProxy.setTask(ServiceProxy.java:157)
03-03 00:43:54.977: E/ActivityThread(647):  at com.android.emailcommon.service.ServiceProxy.setTask(ServiceProxy.java:145)
03-03 00:43:54.977: E/ActivityThread(647):  at com.android.emailcommon.service.ServiceProxy.test(ServiceProxy.java:191)
03-03 00:43:54.977: E/ActivityThread(647):  at com.android.exchange.ExchangeService$7.run(ExchangeService.java:1850)
03-03 00:43:54.977: E/ActivityThread(647):  at com.android.emailcommon.utility.Utility$2.doInBackground(Utility.java:551)
03-03 00:43:54.977: E/ActivityThread(647):  at com.android.emailcommon.utility.Utility$2.doInBackground(Utility.java:549)
03-03 00:43:54.977: E/ActivityThread(647):  at android.os.AsyncTask$2.call(AsyncTask.java:287)
03-03 00:43:54.977: E/ActivityThread(647):  at java.util.concurrent.FutureTask.run(FutureTask.java:234)
03-03 00:43:54.977: E/ActivityThread(647):  at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1080)
03-03 00:43:54.977: E/ActivityThread(647):  at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:573)
03-03 00:43:54.977: E/ActivityThread(647):  at java.lang.Thread.run(Thread.java:856)
03-03 00:43:54.998: E/StrictMode(647): null
03-03 00:43:54.998: E/StrictMode(647): android.app.ServiceConnectionLeaked: Service com.android.exchange.ExchangeService has leaked ServiceConnection com.android.emailcommon.service.ServiceProxy$ProxyConnection@40d42668 that was originally bound here
03-03 00:43:54.998: E/StrictMode(647):  at android.app.LoadedApk$ServiceDispatcher.<init>    (LoadedApk.java:969)
03-03 00:43:54.998: E/StrictMode(647):  at android.app.LoadedApk.getServiceDispatcher(LoadedApk.java:863)
03-03 00:43:54.998: E/StrictMode(647):  at android.app.ContextImpl.bindService(ContextImpl.java:1418)
03-03 00:43:54.998: E/StrictMode(647):  at android.app.ContextImpl.bindService(ContextImpl.java:1407)
03-03 00:43:54.998: E/StrictMode(647):  at android.content.ContextWrapper.bindService(ContextWrapper.java:473)
03-03 00:43:54.998: E/StrictMode(647):  at com.android.emailcommon.service.ServiceProxy.setTask(ServiceProxy.java:157)
03-03 00:43:54.998: E/StrictMode(647):  at com.android.emailcommon.service.ServiceProxy.setTask(ServiceProxy.java:145)
03-03 00:43:54.998: E/StrictMode(647):  at com.android.emailcommon.service.ServiceProxy.test(ServiceProxy.java:191)
03-03 00:43:54.998: E/StrictMode(647):  at com.android.exchange.ExchangeService$7.run(ExchangeService.java:1850)
03-03 00:43:54.998: E/StrictMode(647):  at com.android.emailcommon.utility.Utility$2.doInBackground(Utility.java:551)
03-03 00:43:54.998: E/StrictMode(647):  at com.android.emailcommon.utility.Utility$2.doInBackground(Utility.java:549)
03-03 00:43:54.998: E/StrictMode(647):  at android.os.AsyncTask$2.call(AsyncTask.java:287)
03-03 00:43:54.998: E/StrictMode(647):  at java.util.concurrent.FutureTask.run(FutureTask.java:234)
03-03 00:43:54.998: E/StrictMode(647):  at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1080)
03-03 00:43:54.998: E/StrictMode(647):  at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:573)
03-03 00:43:54.998: E/StrictMode(647):  at java.lang.Thread.run(Thread.java:856)
03-03 00:43:54.998: W/ActivityManager(292): Unbind failed: could not find connection for android.os.BinderProxy@4100c758
03-03 00:44:00.308: I/Choreographer(355): Skipped 30 frames!  The application may be doing too much   work on its main thread. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T14:44:07.900

您的 apk 是`invalid`，当当前安装的 apk**签名不同时。** 因此我建议

1.  卸载旧应用程序
2.  重建项目
3.  重新安装apk

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T14:44:14.963

从日志看来，AndroidManifest.xml 丢失了。检查文件是否存在。如果您使用的是 eclipse，请执行 Project/clean 。并提供更多信息，如 AndroidManifest.xml 文件的内容。

# php - PHP将矩形（图像）划分为网格？

> ID：15186806
> 
> 赞同：2
> 
> 时间：2013-03-03T14:40:56.090
> 
> 标签：php, image

编辑：

有没有办法让像素化元素混在一起？如果我有一个网格，可以说 100x100 - 那么像素会变得非常小，您可以看到图像。所以我想把像素化的部分弄乱。任何的想法？

* * *

我正在尝试使用 PHP 将图像划分为相等的网格，以便我可以将其像素化为均匀的部分。

它与某种游戏有关。某个用户上传了一张图片，我希望它被分成 x 个块（用户选择应该有多少块），然后每个块都会被像素化。当其他用户完成某些任务时 - 像素化块的一部分被显示出来，直到所有像素化部分都消失并且您留下原始图像。我真的不在乎网格元素是正方形还是矩形 - 我只是希望它们是均匀的。

作为我的出发点，我正在使用这个问题的答案[PHP image pixelate?](https://stackoverflow.com/questions/8936601/php-image-pixelate)

要确定 x 和 y 像素大小，我使用以下公式：

```
$gridElements = 9;
$pixelate_x = $width/sqrt($gridElements);
$pixelate_y = $height/sqrt($gridElements); 
```

我注意到，当使用平方根为整数的数字时 - 我得到了一个更均匀的网格。但它并不完美。

尝试使用 9 块网格并使用 1160x680 图像时，我得到以下信息：

![图 1](../Images/e363080dc8d65377cefd1b5b30ec5d38.png)

它可能看起来很均匀，但最后一行比前两行大。

当我将其缩放到 16 时，差异非常明显

![在此处输入图像描述](../Images/1535e8e64b77d5997fe5ccc4cef26013.png)

当尝试 400 个元素的网格 (20x20) 时，第 21 行会出现。

![在此处输入图像描述](../Images/34936a0e07196e361ced649e4df04ab2.png)

所以..它工作得不是很好，我确实希望网格是均匀的。有谁知道如何做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T15:17:15.637

这是因为 1160 并不能很好地划分自己，即使是 3（是的，使用 3x3 网格时也不相等）。你最大的敌人是整数

# javascript - this.userId 是未定义的 MongoDB 属性，提交后未插入

> ID：15186809
> 
> 赞同：1
> 
> 时间：2013-03-03T14:41:11.783
> 
> 标签：javascript, mongodb, meteor

我的客户文件中有以下事件：

```
Template.categories.events({
...

  'keyup #add-category': function (e,t){
    if (e.which === 13)
    {
      var catVal = String(e.target.value || "");
      if (catVal)
      {
        lists.insert({Category:catVal,owner:this.userId});
        Session.set('adding_category', false);
      }
    }
  },
  ...
}); 
```

这是相关的模板部分：

```
<template name="categories">
    <div id="categories" class="btn-group">
        {{#if new_cat}}
        <div class="category">
            <input type="text" id="add-category" value="" />
        </div>

        {{else}}
        <div class="category btn btn-inverse" id="btnNewCat">&plus;</div>
        {{/if}} 
        {{#each lists}}
        <div class="category btn {{list_status}}" id="{{_id}}">     
            {{Category}}
        </div>
        {{/each}}
    </div>
</template> 
```

因此，当插入新类别时，应设置所有者。但事实并非如此。

这是MongoDB中的条目：

```
> db.lists.find()
{ "Category" : "test-admin", "_id" : "EsybjC3SLnNzCBx2t" } 
```

知道我做错了什么吗？（其实我是在关注“Getting Started with Meteor”图书借阅图书馆的例子

**编辑**似乎：

```
console.log(this.userId);
undefined 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T14:44:21.710

`this`可能不是您期望它在该事件中的样子。您应该调试以确认是这种情况。你可能只是变得 undefined for `this.userId`。我建议在这个事件处理函数之外但在你真正想要`this`的范围内分配一个变量（称之为“self”或“that”） 。`this`然后，您可以在事件处理程序中引用该变量。

它应该如下所示：

```
function thatRegistersEvents() {
    var self = this;

    // ...

    registerSomeEvent(function () {
        return self.someThisProperty;
    });
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-03T15:00:29.227

交换这一行：

```
lists.insert({Category:catVal,owner:this.userId}); 
```

对此：

```
lists.insert({Category:catVal,owner:Meteor.userId()}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-01-18T11:17:38.307

这是正确的行为。如果您阅读官方 Meteor 文档以获取对 的引用`this.UserId`，则它仅在[`Meteor.publish()`](http://docs.meteor.com/#/full/publish_userId)和中可用[`Meteor.methods()`](http://docs.meteor.com/#/full/method_userId)。`this.UserId`在 中不可用`Meteor.template()`，您在上面的代码示例中已完成，因此必须[`Meteor.userId()`](http://docs.meteor.com/#/full/meteor_userid)在模板中使用。

# mysql - 使用多个表而不是一个大表？

> ID：15186810
> 
> 赞同：0
> 
> 时间：2013-03-03T14:41:29.010
> 
> 标签：mysql, database, innodb

使用 InnboDB & MySQL 时，将大表拆分为多个较小的表有优势还是劣势？当然，我不是在谈论拆分实际的 innoDB 文件，我只是想知道当我使用多个表时会发生什么。

情况：我有一个包含数百万行（项目）的真实大表，它们被分类（列“类别”）。现在，我正在考虑为每个类别使用单独的表格。在任何保证的情况下，我都不需要跨多个表的数据。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T15:09:22.550

一般来说，如果您的表格彼此没有相关性，则它们应该位于单独的表格中，而不是一个包罗万象的表格。

但是，如果它们是相关的，它们实际上应该位于一个表中。您可以通过多种方式管理大型表的性能。如果表格变得太大以至于开始导致问题，我建议您查看[对表格进行分区。](http://dev.mysql.com/doc/refman/5.1/en/partitioning.html)

但是，数百万行并不是您所说的“真正的大表”，我们有许多具有数千万行的表，甚至有一些具有数亿行的表-由于混合了切刀索引，它们的性能很好，分区和只读副本。

**编辑 1 - 回应评论：**

正如您正确地说的那样，在键值对中的每个键上创建动态表是不寻常、丑陋且非常错误的——您正在击败 RDBMS 的关系部分。我无法具体说明以下内容，因为这个问题仍然缺乏您想要实现的架构和详细信息 - 但是我觉得我掌握的足够多，可以编辑我的原始答案。

关于在同一个数据库中对表进行分区和在另一个数据库中创建新表的讨论有很大的不同。您询问性能，一般来说，它们应该执行相同的操作（即 1000gb 数据库中的一个新表和 0gb 数据库中的一个新表），前提是您有足够的资源，例如用于索引的内存和底层数据存储上的 IO，并且没有瓶颈。

我真的不明白你为什么要创建动态表（“table_{category}”），或者将值/类别存储在文本文件中。这听起来真的像你需要一个 1-N 关系和一个 JOIN。

# javascript - 定义元素后的 Javascript 事件

> ID：15186814
> 
> 赞同：2
> 
> 时间：2013-03-03T14:42:07.633
> 
> 标签：javascript, html

我想知道是否可以避免`<script>`在我的 HTML 中插入标签，而是使用事件：

```
<div id="foo">
    <script>
       document.getElementById('foo').className = 'has-js';
       // ^^ can I put this in some on* attribute of #foo,
       // and make it run at this point ?
    </script>

    ...   
    <div ... 
```

是否有一些`on*`我可以在 div 上使用的属性，我可以在`#foo`其中插入我的 javascript？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T14:43:33.257

不幸的是，没有。它可以是最紧凑的，是`<script>initSomething();</script>`您想要活动的地方。

如果这不是某种插件，请尝试添加它`<body>`。这就是“标准”。

# wix - Wix：用户界面 WixUI_FeatureTree 将控件添加到欢迎对话框

> ID：15186815
> 
> 赞同：1
> 
> 时间：2013-03-03T14:42:10.213
> 
> 标签：wix, wix3.6

我正在使用 WiX 安装程序和 WixUI_FeatureTree UI。我想通过再添加一个文本控件来自定义欢迎对话框窗口。我怎样才能做到这一点？我搜索文档并没有找到任何东西

我这是不可能的，那么我可以更改“描述”控件的高度吗？我试过这样但高度没有改变？

```
<UI>
  <Publish Dialog="WelcomeDlg" Control="Description" Property="Height" Value="150"></Publish>
</UI> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-03T16:28:33.890

添加新控件需要替换整个对话框并重新连接 UI 序列以显示您的对话框。您可以在此处阅读：[自定义内置 WixUI 对话框集](http://wixtoolset.org/documentation/manual/v3/wixui/wixui_customizations.html)。

如果您只想扩展控件的内容，WiX v3.6 有一个新功能，它允许 .wxl 文件不仅可以更改控件的文本，还可以更改它的坐标。Bob Arnson 在这里有一篇很好的文章：Localizing [more than strings in WiX v3.6](http://www.joyofsetup.com/2012/07/14/localizing-more-than-strings-in-wix-v3-6/)。

# jquery - jQuery UI Sortable：根据条件限制允许的丢弃

> ID：15186817
> 
> 赞同：1
> 
> 时间：2013-03-03T14:42:35.097
> 
> 标签：jquery, jquery-ui, jquery-ui-sortable

第一个问题，所以请接受我的道歉，如果这里有什么违反礼节的话，请告诉我

我正在处理具有可变数量的文件上传字段的 CMS 页面编辑表单，但出于这个问题的目的，假设有 4 个上传字段称为*slot*。每个插槽只能接受某些类型的文件，例如：

1.  接受 jpg、gif 和 png
2.  接受 png
3.  接受 jpg、gif 和 png
4.  接受 pdf

我想允许用户重新排列上传的文件，并使用 jQuery UI 的 Sortable 来完成此操作。这就是我卡住的地方。拖动时，文件应该只允许在具有相应文件类型的插槽中。因此，插槽 1 中的 jpg 文件只能移动到插槽 3，而插槽 3 中的 png 文件可以移动到插槽 1 或插槽 2。插槽 4 中的 pdf 根本不允许移动。

这是一个演示我的设置[的小提琴。](http://jsfiddle.net/appel/59uzy/)

jQuery：

```
$(".slots").sortable({
  cursor: "move",
  placeholder: 'ui-state-highlight',
  items: ".slot",
  update: function (sorted) {
    // ajax magic omitted for the sake of brevity.
  }
}); 
```

HTML：

```
<ul class="slots">
  <li class="slot accept-jpg accept-gif accept-png" id="sort_1">
    <div class="is-jpg">{jpg}</div>
  </li>
  <li class="slot accept-png" id="sort_2">
    <div class="is-png">{png}</div>
  </li>
  <li class="slot accept-jpg accept-gif accept-png" id="sort_3">
    <div class="is-empty"><input type="file" /></div>
  </li>
  <li class="slot accept-pdf" id="sort_4">
    <div class="is-pdf">{pdf}</div>
  </li>
</ul> 
```

有什么想法/想法吗？提前感谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T23:56:20.220

您可以尝试挂钩连接列表上的接收/结束事件。有关类似问题，请参见此处[https://stackoverflow.com/a/14442218 。](https://stackoverflow.com/a/14442218)

但我不知道您可能会遇到哪些边缘情况。

在这里查看[http://johnny.github.com/jquery-sortable/#limited-target](http://johnny.github.com/jquery-sortable/#limited-target)以获得另一个可排序的插件，它可以让您完全控制哪些容器接收丢弃。但由于它不支持网格，它可能不适合你。

# c# - 使用 Lambda 表达式编写复杂的 Linq 连接

> ID：15186819
> 
> 赞同：1
> 
> 时间：2013-03-03T14:43:09.103
> 
> 标签：c#, linq, join, lambda

这是我在 linq 中的加入，我只是认为有什么方法可以用 lambda 编写它：

![在此处输入图像描述](../Images/965c57424729f5e1c0ebe88e3b8c4c5c.png)

有人对此有任何想法吗？有什么建议吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-03T14:53:52.320

*所有*LINQ 查询表达式都可以转换为“点表示法”（方法调用）——这基本上就是编译器所做的。但是，它为连接（和一些其他操作）引入了*透明标识符*，这使得使用 lambda 表达式的等效代码更加繁琐。

鉴于代码最终将完全等同于查询表达式，我建议您坚持使用查询表达式版本。

如果您出于某种原因确实想转换为点表示法，我强烈建议您首先使用一个简单的示例来执行此操作 - 只有几个属性的单个连接。你会感觉到你需要做什么，并且可以逐渐建立起来。

我[关于查询表达式翻译的 Edulinq 帖子](http://msmvps.com/blogs/jon_skeet/archive/2011/01/28/reimplementing-linq-to-objects-part-41-how-query-expressions-work.aspx)给出了编译器执行的所有转换的一些细节——这是一个很好的实验起点。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-05T04:01:03.947

在没有 IDE 的情况下键入它，所以肯定有一些错误......

`join ... on ... equals ... into`变成`GroupJoin`

`from ... in group.DefaultIfEmpty`变成`SelectMany( group.DefaultIfEmpty)`

除此之外，这一切都是关于使用更多匿名类型来管理范围。

```
var joinResult1 = FormReportDataTable.AsEnumerable()
  .GroupJoin(dtFormsCategories.AsEnumerable(),
    dr1 => dr1["FormID"], dr2 => dr2["ObjectID"],
    (dr1, dr2s) => new {dr1 = dr1, dr2s = dr2s})
  .SelectMany(g => g.dr2s.DefaultIfEmpty(), (g, dr2) => new {dr1 = g.dr1, dr2 = dr2 })
  .GroupJoin(drEntities.AsEnumerable(),
    x => (Guid)x.dr1["EntityID"], er => (Guid)er["ID"],
    (x, ers) => new {dr1 = x.dr1, dr2 = x.dr2, ers = ers})
  .SelectMany(g => g.ers.DefaultIfEmpty(), (g, er) => new {dr1 = g.dr1, dr2 = g.dr2, er = er })
  .GroupJoin(dtCategories.AsEnumerable(),
    x => (Guid)x.dr2["CategoryID"], cr => (Guid)cr["ID"],
    (x, crs) => new {dr1 = x.dr1, dr2 = x.dr2, er = x.er, crs = crs})
  .SelectMany(g => g.crs.DefaultIfEmpty(), (g, cr) => new {dr1 = g.dr1, dr2 = g.dr2, er = g.er, cr = cr })

var joinResult = joinResult1.Select(x => new
{
  SubPortalName = x.cr == null ? string.Empty :  ...
  ...  //could have posted this code if it was in the question...
}); 
```

# intellisense - 智能感知在 Xamarin/Mono 中添加到 NUnit [Lite] 项目的文件失败

> ID：15186820
> 
> 赞同：6
> 
> 时间：2013-03-03T14:43:11.403
> 
> 标签：intellisense, code-completion, xamarin.ios, xamarin-studio

我正在尝试 Xamarin（在 Mac OS X 上）在 Mono 中进行一些跨平台（Mac、iOS、Android）开发。我在“Filament”命名空间内创建了一个“Point”类，现在我正在尝试添加单元测试。

Mono 世界中似乎有两种单元测试方法：NUnit 和 NUnitLite。我都试过了（在后一种情况下，按照[本教程](http://docs.xamarin.com/guides/ios/deployment,_testing,_and_metrics/touch.unit)），结果相同，就是这样：

在我的单元测试项目中，我添加了指向 Point.cs 文件的链接（通过右键单击项目，使用“添加...”，选择文件，然后选择“添加为链接”选项）。在我的单元测试文件（PointTest.cs）中，我添加了“使用细丝；” 到文件的顶部。但是尽管我现在可以使用 Point 类并且它成功编译，但 Intellisense 似乎完全没有注意到它——每次我开始输入“Point”时，它都会将其扩展为“PointTest”，而当我顽固地把它改回来时到点，它像错误一样将其绘制为红色。

事实上，我的“使用”行也发生了同样的问题。我输入了“using Filament”并将其更改为“using FilamentTestsiOS”（我的单元测试项目的命名空间）。

这让我发疯了......但作为 Mono、Xamarin、NUnit 和 NUnitLite 的完全新手，我确信我在做一些愚蠢的事情。

设置 C#/Mono 单元测试的正确方法是什么，以便智能感知和编译器都能识别我正在为其编写测试的类？

# io - 如何使用 Dart 中的新 Streams API 执行 stdin.close()？

> ID：15186821
> 
> 赞同：1
> 
> 时间：2013-03-03T14:43:12.727
> 
> 标签：io, stream, stdin, dart, dart-io

我要求用户在我的命令行 (dart:io) 应用程序中输入。从用户那里得到答案后，我想退订`Stream`. 然后，稍后，我可能想再听一次（但用不同的听众，所以`pause()`不要`resume()`帮助我）。

在启动时，我有这个：

```
cmdLine = stdin
          .transform(new StringDecoder()); 
```

后来，当我想收集输入时：

```
cmdLineSubscription = cmdLine.listen((String line) {
  try {
    int optionNumber = int.parse(line);
    if (optionNumber >= 1 && optionNumber <= choiceList.length) {
      cmdLineSubscription.cancel();
      completer.complete(choiceList[optionNumber - 1].hash);
    } else {
      throw new FormatException("Number outside the range.");
    }
  } on FormatException catch (e) {
    print("Input a number between 1 and ${choiceList.length}, please.");
  }
}); 
```

这按预期工作，但它`stdin`在程序执行结束时保持打开状态。使用之前的 API，关闭`stdin`就像调用`stdin.close()`. 但是对于新的 API，`stdin`is a `Stream`，而那些没有该`close`方法。

我认为我正在做的是关闭（阅读：取消订阅）转换后的流，但保持原始（stdin）流打开。

我对么？如果是这样，我如何`stdin`在程序退出时关闭底层流？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T23:54:36.913

要关闭`stdin`，您只需取消订阅：

```
cmdLineSubscription.cancel(); 
```

这是等效的方法。所以你的直觉是对的。我不确定我是否理解了这个问题——这种方法有问题吗？

# jquery - jQuery Autocomplete 在新搜索中清除旧结果

> ID：15186826
> 
> 赞同：1
> 
> 时间：2013-03-03T14:43:39.960
> 
> 标签：jquery, ajax

我正在使用[这种](http://jqueryui.com/autocomplete/#xml)方法来加载我的数据：

这是我的代码

```
<script>
    $(function() {
        function log( message ) {
            $( "<div/>" ).html( message ).prependTo( "#log" );
            $( "#log" ).attr( "scrollTop", 0 );
        }

        $.ajax({
            url: "countries.xml",
            dataType: "xml",
            success: function( xmlResponse ) {
                var data = $( "geoname", xmlResponse ).map(function() {
                    return {
                        name: ( $.trim( $( "name", this ).text() ) ),
                        number: ( $.trim( $( "number", this ).text() ) || undefined ),
                        icon: ( $.trim( $( "icon", this ).text() ) || undefined ),

                        value: $( "name", this ).text() + " " ,

                        zip: $( "zip", this ).text()

                    };
                }).get();
                console.log(data);
                $( "#birds" ).autocomplete({
                    source: data,
                    minLength: 0,
                    select: function( event, ui, icon ) {
                        console.log(ui.item);
                        log( ui.item ?
                            "Selected: " + ui.item.value + ", zip: " + ui.item.zip :
                            "Nothing selected, input was " + this.value );
                        $( "#project-icon" ).attr( "src", "images/" + ui.item.icon );

                        if(ui.item) {
                            $.ajax({
                                url: "results.xml",
                                dataType: "xml",
                                success: function( xmlResponse ) {
                                    var items = $( "geoname", xmlResponse ).map(function() {
                                        if(ui.item.name == $.trim( $( "country", this ).text() )) {
                                            return {
                                                name: ( $.trim( $( "name", this ).text() ) || undefined ),
                                                country: ( $.trim( $( "country", this ).text() ) || undefined ),
                                                price: ( $.trim( $( "price", this ).text() ) || undefined ),
                                                price2: ( $.trim( $( "price2", this ).text() ) || undefined ),
                                                planprice: ( $.trim( $( "planprice", this ).text() ) || undefined ),
                                                plandisplay: ( $.trim( $( "plandisplay", this ).text() ) || undefined ),
                                                icon: ( $.trim( $( "icon", this ).text() ) || undefined ),

                                                actionurl:  ( $.trim( $( "actionurl", this ).text() ) || undefined ),
                                                text:  ( $.trim( $( "text", this ).text() ) || undefined ),
                                                value: $( "name", this ).text() + ", " +

                                                    ( '('+$.trim( $( "zip", this ).text()+')' ) || "(unknown country)" ),

                                                zip: $( "zip", this ).text()
                                            };
                                        }
                                    }).get();
                                    // $( "#log" ).html('');
                                    log('<hr/>');
                                    $.each(items, function(index, obj) {
                                        var str = ('<span style="color:#666;font-weight:bold;font-size:17px;">')+obj.name+('</span>')+":"+obj.price+"c&nbsp;&nbsp;"+('<strong>')+obj.price2+"c&nbsp;&nbsp;(incl.VAT)"+obj.plandisplay+obj.planprice;
                                        log(str);

                                        // console.log(arguments);
                                    });
                                }
                            });
                        } else {
                            log( "Nothing selected, input was " + this.value );
                        }
                    }
                });
            }
        });
    });
</script> 
```

```
<input id="birds" placeholder="Country name"  />
<img id="project-icon" src="images/transparent_1x1.png" class="ui-state-default" alt="" />

<div class="ui-widget" style="margin-top: 2em; font-family: Arial;">

    <div id="log" style=" overflow: auto; border-width: 0;" class="ui-widget-content"></div>
</div> 
```

如果您每次进行新搜索时检查 jquery 的 XML 示例，旧结果仍然存在，新结果将显示在顶部。

如何清除每次搜索的结果？

每一次搜索都是独一无二的

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-03T15:31:40.030

`close`您可以在事件处理程序选项中重置值：

`this`在任何 jQueryUI 回调中引用原始选择器中的元素实例

```
$("#birds").autocomplete({
    source: data,
    minLength: 0,
    select: function (event, ui, icon) {
        /* do stuff with selection*/
    },
    close: function () {
         this.value='';
         /* OR $(this).val('')*/
    }

}) 
```

演示：http: [//jsfiddle.net/ZcHgY/](http://jsfiddle.net/ZcHgY/)

替代方法是保留值并使用鼠标事件处理程序`mousedown`来清除值

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T11:05:19.850

`<div id="log">`您可以使用清除 HTML 内容

```
$( "#log" ).html =""; 
```

添加新结果之前

# c# - 循环遍历表单的所有控件，甚至是 GroupBoxes 中的控件

> ID：15186828
> 
> 赞同：22
> 
> 时间：2013-03-03T14:43:44.220
> 
> 标签：c#, groupbox

我想在我的所有 TextBoxes 中添加一个事件`Form`：

```
foreach (Control C in this.Controls)
{
    if (C.GetType() == typeof(System.Windows.Forms.TextBox))
    {
        C.TextChanged += new EventHandler(C_TextChanged);
    }
} 
```

问题是它们存储在几个 GroupBox 中，而我的循环看不到它们。我可以单独遍历每个控件，`GroupBox`但是是否可以在一个循环中以简单的方式完成所有操作？

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2013-03-03T14:52:00.557

窗体和容器控件的`Controls`集合仅包含直接子级。为了获取所有控件，您需要遍历控件树并递归地应用此操作

```
private void AddTextChangedHandler(Control parent)
{
    foreach (Control c in parent.Controls)
    {
        if (c.GetType() == typeof(TextBox)) {
            c.TextChanged += new EventHandler(C_TextChanged);
        } else {
            AddTextChangedHandler(c);
        }
    }
} 
```

注意：表单也（间接地）派生自`Control`，并且所有控件都有一个`Controls`集合。所以你可以在你的表单中调用这样的方法：

```
AddTextChangedHandler(this); 
```

* * *

更通用的解决方案是创建一个扩展方法，将操作递归地应用于所有控件。在静态类（例如`WinFormsExtensions`）中添加此方法：

```
public static void ForAllControls(this Control parent, Action<Control> action)
{
    foreach (Control c in parent.Controls) {
        action(c);
        ForAllControls(c, action);
    }
} 
```

`using`静态类命名空间必须是“可见的”，即，如果它在另一个命名空间中，则添加适当的声明。

然后可以这样调用，`this`form在哪里；您还可以替换`this`为必须影响嵌套控件的表单或控件变量：

```
this.ForAllControls(c =>
{
    if (c.GetType() == typeof(TextBox)) {
        c.TextChanged += C_TextChanged;
    }
}); 
```

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2013-11-21T15:14:52.867

一些简单的通用工具使这个问题变得非常简单。我们可以创建一个简单的方法，该方法将遍历整个控件的树，返回一个包含所有子控件、所有子控件等的序列，覆盖所有控件，而不仅仅是固定的深度。我们可以使用递归，但通过避免递归，它会表现得更好。

```
public static IEnumerable<Control> GetAllChildren(this Control root)
{
    var stack = new Stack<Control>();
    stack.Push(root);

    while (stack.Any())
    {
        var next = stack.Pop();
        foreach (Control child in next.Controls)
            stack.Push(child);
        yield return next;
    }
} 
```

使用这个我们可以得到所有的孩子，过滤掉我们需要的类型，然后*很*容易地附加处理程序：

```
foreach(var textbox in GetAllChildren().OfType<Textbox>())
    textbox.TextChanged += C_TextChanged; 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2016-02-22T15:09:12.210

尝试这个

```
AllSubControls(this).OfType<TextBox>().ToList()
    .ForEach(o => o.TextChanged += C_TextChanged); 
```

AllSubControls 在哪里

```
private static IEnumerable<Control> AllSubControls(Control control)
    => Enumerable.Repeat(control, 1)
       .Union(control.Controls.OfType<Control>()
                              .SelectMany(AllSubControls)
             ); 
```

LINQ很棒！

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-02-12T15:18:53.620

还没有看到有人使用 linq 和/或 yield 所以这里是：

```
public static class UtilitiesX {

    public static IEnumerable<Control> GetEntireControlsTree(this Control rootControl)
    {
        yield return rootControl;
        foreach (var childControl in rootControl.Controls.Cast<Control>().SelectMany(x => x.GetEntireControlsTree()))
        {
            yield return childControl;
        }
    }

    public static void ForEach<T>(this IEnumerable<T> en, Action<T> action)
    {
        foreach (var obj in en) action(obj);
    }
} 
```

然后，您可以根据自己的意愿使用它：

```
someControl.GetEntireControlsTree().OfType<TextBox>().ForEach(x => x.Click += someHandler); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-03T14:46:51.577

正如您所说，您必须更深入，而不仅仅是循环遍历表单中的每个元素。不幸的是，这意味着使用嵌套循环。

在第一个循环中，循环遍历每个元素。如果元素是 GroupBox 类型，那么您知道在继续之前需要循环浏览组框内的每个元素；否则正常添加事件。

您似乎对 C# 有一定的了解，所以我不会给您任何代码；纯粹是为了确保您开发解决问题所涉及的所有重要概念:)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2017-03-13T09:06:25.480

我知道这是一个较老的话题，但会说来自[http://backstreet.ch/coding/code-snippets/mit-c-rekursiv-durch-form-controls-loopen/](http://backstreet.ch/coding/code-snippets/mit-c-rekursiv-durch-form-controls-loopen/)的代码片段是一个聪明的解决方案问题。

它使用 ControlCollection 的扩展方法。

```
public static void ApplyToAll<T>(this Control.ControlCollection controlCollection, string tagFilter, Action action)
{
    foreach (Control control in controlCollection)
    {
        if (!string.IsNullOrEmpty(tagFilter))
        {
            if (control.Tag == null)
            {
                control.Tag = "";
            }

            if (!string.IsNullOrEmpty(tagFilter) && control.Tag.ToString() == tagFilter && control is T)
            {
                action(control);
            }
        }
        else
        {
            if (control is T)
            {
                action(control);
            }
        }

        if (control.Controls != null && control.Controls.Count > 0)
        {
            ApplyToAll(control.Controls, tagFilter, action);
        }
    }
} 
```

现在，要将事件分配给所有 TextBox 控件，您可以编写如下语句（其中“this”是表单）：

```
this.Controls.ApplyToAll<TextBox>("", control =>
{
    control.TextChanged += SomeEvent
}); 
```

或者，您可以按控件的标签过滤控件。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2016-05-19T17:56:43.620

您只能使用表单集合在 Windows 表单中循环打开表单，例如为所有打开的表单设置窗口开始位置：

```
public static void setStartPosition()
        {
            FormCollection fc = Application.OpenForms;

            foreach(Form f in fc)
            {
                f.StartPosition = FormStartPosition.CenterScreen;
            }
        } 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2019-06-01T05:25:30.127

更新的答案：

我需要禁用表单中的所有控件，包括组框。此代码有效：

```
 private void AlterControlsEnable(bool ControlEnabled)
    {
        foreach (Control i in Controls)
            i.Enabled = ControlEnabled;
    } 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2020-09-28T07:54:02.613

由于关于“向您的文本框添加事件”的问题；已经回答了；我正在提供一些解释，并改为使用 for 循环添加迭代替代方案。

**问题：**

*   无法在容器内获取控件。

**解决方案：**

*   为了检索容器内的控件，您必须指定包含您希望访问的控件的容器。因此，您的循环必须检查容器内的控件。
    否则，您的循环将找不到容器内的控件。

**IE：**

```
foreach (Control control in myContainer.Controls)
{
   if (control is TextBox) { /* Do Something */ }
} 
```

*   如果您有多个容器：
    最初迭代容器。
    然后迭代容器内的控件（在初始迭代中找到的容器）。

**关于如何使用 for 循环的伪代码示例：**

```
 /// <summary> Iterate Controls Inside a Container using a for Loop. </summary>
    public void IterateOverControlsIncontainer()
    {
        // Iterate Controls Inside a Container (i.e: a Panel Container)
        for (int i = 0; i < myContainer.Controls.Count; i++)
        {
            // Get Container Control by Current Iteration Index
            // Note:
            // You don't need to dispose or set a variable to null.
            // The ".NET" GabageCollector (GC); will clear up any unreferenced classes when a method ends in it's own time.
            Control control = myContainer.Controls[i];

            // Perform your Comparison
            if (control is TextBox)
            {
                // Control Iteration Test.
                // Shall Display a MessageBox for Each Matching Control in Specified Container.
                MessageBox.Show("Control Name: " + control.Name);
            }
        }
    } 
```

# node.js - 我可以模拟糟糕的互联网情况，比如限制数据传输速度吗

> ID：15186831
> 
> 赞同：1
> 
> 时间：2013-03-03T14:44:03.880
> 
> 标签：node.js, module

我使用 node.js 开发应用程序，我想模拟人们上网时的一些糟糕的互联网情况，

比如限制数据传输速度，或者延迟一些css或js文件传输

我怎样才能实现这些目标？是否有一些目标可以做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-03T14:57:15.313

我过去曾使用[fiddler](http://fiddler2.com)来测试我的应用程序上不稳定/缓慢的互联网连接。Fiddler 有一个调制解调器速度选项。设置它，你会得到非常慢的速度。您还可以下载一个名为[Delayed Responses](http://fiddlerdelayext.codeplex.com/)的插件，它会延迟数据包返回到您的应用程序。

如果这不是你的盟友，那么我建议寻找一个基于 Web 的代理，它允许你控制你想要的请求的参数。只是谷歌它。

# jquery - Jquery Ajax 加载方法

> ID：15186840
> 
> 赞同：1
> 
> 时间：2013-03-03T14:44:37.063
> 
> 标签：jquery, ajax

所有，请原谅我是 jquery 的新手。我发现[jquery load api](http://api.jquery.com/load/)中不存在这个 api 的更多细节。这是我从中学到的东西，我有一些关于它的问题。请查看它。

这个 api 包括这些使用方式来进行 ajax 调用。

*   `$('#result').load('ajax/test.html');`//ajax加载一个html文件，它使用 `Get`方法。
*   `$('#result').load('ajax/test.html .someclass');`//ajax 从 html 文件中加载选定的内容。
*   `$('#result').load('ajax/test.html', function() { alert('Load was performed.');});`//成功时回调。
*   `$(document).ready(function(){ $("input").keyup(function(){ txt=$("input").val(); $("span").load("/jquery/gethint.asp",{suggest:txt}); }); });`//我不确定这是什么`data`意思。服务器端如何得到这个`data`？

到目前为止，我没有找到当数据是一个字符串时的示例，该字符串将作为 jquery 的参数添加到 url 中。我希望有人也可以为我说明一些代码。谢谢。

**更新**

请注意，`load`api 始终使用`serialize`将 UI 输入值格式化为 json 的方法。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-03T14:50:09.627

可以通过这些方式给出`data`jQuery中的。[`$.load()`](http://api.jquery.com/load/)

*   **作为 JSON 对象。**

    ```
     data: {"foo": "bar"} 
    ```

*   **作为一个字符串**

    ```
     data: "foo=bar" 
    ```

您可以使用这两种方式。第一个是对象方式。

* * *

对于您的四个查询：

*   是的你是对的。它使用`GET`方法。
*   来自 HTML 文件，并使用该特定类的 HTML。不确定课程是否被接受，但我使用了 ID。
*   是的你是对的。在 AJAX 请求完成后执行一些 JavaScript。
*   这`data`在上面已经解释过了。

* * *

### 服务器端脚本

**PHP**

```
<?php
  if (!isset($_GET['foo']) && $_GET['foo'] == "bar")
    die("true");
  else
    die("false");
?> 
```

**ASP**

```
<%
  IF Request.Form("foo") = "bar" Then
    Response.Write "true"
  ELSE
    Response.Write "false"
  END IF
%> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-03T14:53:56.343

在 jQuery 中有多种使用 Ajax 的方法，最基本的方法是 .ajax()。

以下是一些有用的速记方法：[http ://api.jquery.com/category/ajax/shorthand-methods/](http://api.jquery.com/category/ajax/shorthand-methods/)

这些方法的作用与 ajax 相同，只是语法更简单，并且预先配置为执行特定任务。

我不确定我是否理解你的问题，但我会回答你的问题的任何interpertation：

1.  如果要向服务器发送参数，则使用 load 函数的第二个参数发送参数，如下所示：

    ```
    $('#result').load('ajax/test.html', {prop:val, prop2:val}); 
    ```

    这些道具将被添加到您的请求中（通过 get 或 post 方法，根据配置）

2.  如果您希望从服务器接收数据到参数中，请使用以下内容：

    ```
    $('#result').load('ajax/test.html', function(data){ console.log(data); }); 
    ```

    在这种情况下，function 是一个回调，一旦请求完成就会运行，并且 data 包含来自服务器的响应的所有内容。

# java - 如何导出使用 Gson jar 的项目的 jar 文件

> ID：15186842
> 
> 赞同：1
> 
> 时间：2013-03-03T14:45:03.210
> 
> 标签：java, android, jar

我正在创建一个 jar 文件，其他开发人员可以使用它来使他们的生活更轻松。在我的项目中，我使用`Gson jar`文件 (gson-2.2.2.jar) 进行 jason 操作。

我的问题是我无法导出可以自行运行的 jar 文件。

现在，想要使用我的 jar 文件的开发人员需要将 Gson jar 文件和我的 jar 文件放在它的“libs”文件夹中。

我应该怎么做才能让想要使用我的 jar 文件的开发人员只将一个 jar 文件放在他们的“libs”目录中？

如何将`Gson jar`文件包含在我的 jar 中？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-03T15:00:46.867

要求开发人员包含其他 jar 以使用您的库是完全可以接受的，甚至是正常的。几乎没有理由将其全部构建到一个 jar 文件中，并且有很多*很多*理由不这样做。除非你有一些非常特殊的需要，否则不要这样做。它只会让我们其他人的生活变得艰难。解决这个问题的正确方法是使用一些自动管理依赖的系统，如 Ant+Ivy、Maven 或 Gradle。

# c# - 从字符串 RegEx 中提取数字

> ID：15186844
> 
> 赞同：2
> 
> 时间：2013-03-03T14:45:15.853
> 
> 标签：c#, regex

我真的在用正则表达式苦苦挣扎，似乎无法从这个字符串中提取数字

```
"id":143331539043251, 
```

我试过这个......但我得到了编译错误

```
var regex = new Regex(@""id:"\d+,"); 
```

请注意，完整的字符串包含我不想要的其他数字。我想要 id: 和结尾之间的数字，

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-03T14:53:32.193

试试这个代码：

```
var match = Regex.Match(input, @"\""id\"":(?<num>\d+)");
var yourNumber = match.Groups["num"].Value; 
```

然后将提取的数字`yourNumber`用作字符串或将其解析为数字类型。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-03T14:47:48.243

如果您只需要数字，只需匹配：

```
[0-9]+ 
```

请注意，我没有使用`\d`它，因为它会匹配.NET 正则表达式引擎中的*任何*数字（例如阿拉伯数字）。

* * *

更新，对问题和这个答案的评论 - 以下正则表达式将匹配模式并将匹配的数字放在捕获组中：

```
@"""id"":([0-9]+)," 
```

用作：

```
Regex.Match(@"""id"":143331539043251,", @"""id"":([0-9]+),").Groups[1].Value 
```

哪个返回`143331539043251`。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-08-21T14:47:26.877

如果您愿意使用 LINQ，请尝试以下 (c#)：

字符串 stringVariable = "123cccccbb---556876---==";

var f = (from a in stringVariable.ToCharArray() where Char.IsDigit(a) == true select a);

var number = String.Join("", f);

# android - 从服务中杀死Android中的所有后台进程是否安全？

> ID：15186845
> 
> 赞同：0
> 
> 时间：2013-03-03T14:45:16.473
> 
> 标签：android, android-activity, android-service, background-process

我正在尝试进行安全的进程杀戮以挽救内存。通过调用`ActivityManager.killBackgroundProcesses`或杀死活动中的所有后台进程是否安全`IActivityManager.killAllBackgroundProcesses`？我知道如果需要重新启动一个被杀死的进程是很痛苦的，但它安全吗？对系统性能或用户/系统数据至关重要的东西是否可能会丢失？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T14:56:01.510

> 我正在尝试进行安全的进程杀戮以挽救内存

操作系统将根据需要终止进程以释放系统内存。您不需要自己这样做。当你的进程运行时，有足够的内存来运行你的进程。

> 对系统性能或用户/系统数据至关重要的东西是否可能会丢失？

用户数据肯定会丢失。例如，如果他们在表单中间，暂时切换到其他应用程序，而您决定终止所有后台进程，他们很可能会丢失输入的内容。

# android - 我在哪里可以得到这个drawable？

> ID：15186846
> 
> 赞同：-3
> 
> 时间：2013-03-03T14:45:23.887
> 
> 标签：android, android-resources, android-drawable

我需要如下图所示的“Snooze”drawable。我在哪里可以得到它？

![在此处输入图像描述](../Images/346f8e73eaedcf908f73434529858f70.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-03T14:58:27.247

~~它在框架中不可用~~（参见@User117 的答案），但在 DeskClock 应用程序*中可用。*准确地说，它可以[在这里找到](https://android.googlesource.com/platform/packages/apps/DeskClock/+/master/res/drawable-hdpi/ic_alarm.png)。

![在此处输入图像描述](../Images/d649992d7d2f4c906eb4fe8a040c95e2.png)

（因为很轻所以很难看）

如果你想克隆 DeskClock 应用程序，那么你可以运行这个：

```
git clone https://android.googlesource.com/platform/packages/apps/DeskClock 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-03T15:04:19.650

查看 SDK 目录，当您在 Android SDK 上安装平台时，会下载整个主题的可绘制对象。

这个`<sdk_path>/platforms/android-<version>/data/res/drawable-hdpi/ic_audio_alarm.png`就在您安装了 SDK 的计算机上。替代结果也在它们各自的目录中。

**对于懒惰的人**：您甚至可以尝试`android.R.drawable.ic_audio_alarm`直接使用。如果编译器说这个资源不是公开的，那么你可以将图像从 SDK 目录复制到项目`res`目录。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-03T14:48:49.077

它存在于[Android Action Bar Design 图标包](http://developer.android.com/design/downloads/index.html)（[ZIP 直接下载](http://developer.android.com/downloads/design/Android_Design_Icons_20120814.zip)）包名下`10-device-access-alarms`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-03T15:07:58.927

它可以从 developer.android.com 网站免费下载。转到[此链接](http://developer.android.com/design/downloads/index.html)，然后下载操作栏图标包（或直接从[此处](http://developer.android.com/downloads/design/Android_Design_Icons_20120814.zip)下载）。您寻找的图标位于`/All_Icons/holo_dark/xhdpi/10_device_access_alarms.png`。

# entity-framework - 如何从 EF5 Code First 中的 Id 分隔列表返回实体

> ID：15186847
> 
> 赞同：4
> 
> 时间：2013-03-03T14:45:31.087
> 
> 标签：entity-framework, ef-code-first

我想通过使用 EF5 Code First 传入以逗号分隔的 ID 列表来补充实体集合。

我之前会在 t-sql 中创建一个表函数，传入以逗号分隔的 Id 列表，然后将此表连接到目标表并返回我的记录集合。

使用 EF5 Code First 实现相同目标的最高效方式是什么？

更新：我想避免首先在内存中拥有全套实体。

Update2：理想情况下，我希望实体的顺序与分隔列表相匹配。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-03T15:10:34.277

我会说首先将逗号分隔列表转换为`List<int>`包含您将要使用的所有 ID 的列表。那时，使用您的特定`DbContext`课程，您将执行以下操作：

```
var entities = db.MyEntities.Where(e => myListOfIds.Contains(e.ID)).ToList(); 
```

注意：我只把它`ToList`放在最后，因为你在谈论为收藏品补水。否则，使用 IEnumerable 时，查询将延迟执行，因此不会立即填充。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T15:19:37.897

您可以这样做，通过检查实体对象的 ID 是否属于您的 ID 列表来限制实体对象集：

```
// Dummy list of POCO 'entity' objects (i.e. the Code first objects) just for the sake of this snippet
var entities = new List<Entity>();
entities.Add(new Entity() { ID = 1, Title = "Ent1" });
entities.Add(new Entity() { ID = 2, Title = "Ent2" });
entities.Add(new Entity() { ID = 3, Title = "Ent3" });

// List of ids to match
var ids = new List<int>();
ids.Add(1);
ids.Add(2);

// LINQ:
var selected = (from e in entities where ids.Contains(e.ID) select e).ToList(); 
```

为了完整起见，这是上面使用的虚拟类：

```
// POCO (Code first) object
private class Entity
{
    public int ID { get; set; }
    public string Title { get; set; }
} 
```

# asp.net-mvc - 如何在基于 Knockout 的表单中实现此验证？

> ID：15186851
> 
> 赞同：1
> 
> 时间：2013-03-03T14:46:02.260
> 
> 标签：asp.net-mvc, knockout.js

我开始使用 SPA 模板（单页应用程序）开发 ASP.NET MVC4 解决方案。

起始模板使用一种便利贴设计来管理一些待办事项列表。

我以这种方式稍微修改了模板：

*   不再有用于显示元素的便利贴设计
*   但是列出所有元素的表格+删除+每个元素上的编辑按钮
*   在表格的末尾：一个添加按钮

我现在可以像这样在表单标签中编辑一个元素：

```
<form data-bind="with: currentTodoList, validate: true">
    <h1>Edition</h1>
    <table>
        <tr>
            <td>ID</td>
            <td><b data-bind="text: todoListId"></b></td>
        </tr>
        <tr>
            <td>User ID:</td>
            <td><input class="required" data-bind="value: userId" /></td>
        </tr>
        <tr>
            <td>Title:</td>
            <td><input class="required" data-bind="value: title" /></td>
        </tr>
        <tr>
            <td>Category:</td>
            <td><input data-bind="value: category" /></td>
        </tr>
    </table>

    <p>
        <button data-bind="click: $parent.saveTodoList">Save</button>
        <button data-bind="visible: todoListId, click: $parent.deleteTodoList">Delete</button>
        <button data-bind="click: $parent.showGrid">Cancel</button>
    </p>
</form> 
```

正如您在上面看到的，我在表单标签上设置了验证数据绑定，并且我有一些带有所需类的输入元素。

当我测试这个实现时，它没有按预期工作。例子：

*   如果我清除（清空）userId 字段（这是必需的），我会收到一条红色验证消息（图 1）。好的。
*   如果我再次填写此 userId 字段，红色验证消息就会消失。好的。
*   然后，如果我清除（清空）标题字段（这也是必需的），我会在 userId 字段旁边显示红色验证消息（图 2）。挪威克朗。

![在此处输入图像描述](../Images/df34764d39ecaf8bf5a77d61f1ac89a8.png)

![在此处输入图像描述](../Images/7ab9374ad85f0465522bb9c5ef34203d.png)

反之亦然：`userId <--> title`。知道问题出在哪里吗？

这是下载我的测试 VS2012 解决方案以重现该问题的[链接。](https://www.dropbox.com/s/yksjesr1est5s69/MvcApplication6%20%283%29.zip)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T15:29:51.883

好的，所以我对您的标记进行了一些操作，对视图模型进行了轻微修改（不使用列表，而是编辑单个条目）。

看看这个 jsfiddle - [http://jsfiddle.net/Zxjrb/1/](http://jsfiddle.net/Zxjrb/1/)

我为 ID 和用户 ID 添加了验证消息的范围，跳过了标题和类别的范围。

```
<span data-bind='visible: todoListId.hasError, text: todoListId.validationMessage'> </span> 
```

当 Id 或 UserId 字段为空时，您可以看到出现的消息，而标题/类别字段不会发生这种情况。

# php - 使用 DOMXPath 抓取表格时遇到问题

> ID：15186852
> 
> 赞同：0
> 
> 时间：2013-03-03T14:46:05.250
> 
> 标签：php, domxpath

我有一张我想刮的桌子，看起来像这样：

```
<table id="thisTable">
    <tr>
        <td class="value1"></td>
        <td class="value2"></td>
        <td class="value3"></td>
        <td class="value4"></td>
    </tr>
    <tr>
        <td class="value5"></td>
        <td class="value6"></td>
    </tr>
</table> 
```

和我的 DOMXPath 看起来像这样（到目前为止）：

```
$htmlDoc = new DomDocument();
@$htmlDoc->loadhtml($html);
$xpath = new DOMXPath($htmlDoc);

$nodelist = $xpath->query('//*[@id="thisTable"]');

foreach ($nodelist as $n){
    echo $n->nodeValue."\n";
} 
```

这行得通，我得到了表的值，但是如何指定 nodeValue 的类？最终，我的目标是从`td`的内容`value2`和单行`value4`中构建一个新表。`value5`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T14:55:25.037

```
$htmlDoc = new DomDocument();
$htmlDoc->loadHTML($html);
$xpath = new DOMXPath($htmlDoc);

$nodelist = $xpath->query('//td');

foreach ($nodelist as $n){
    echo $n->getAttribute("class")."\n";
} 
```

**注意**：使用[getAttribute](http://php.net/manual/en/domelement.getattribute.php)属性获取类的值

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T03:49:23.717

不确定我是否理解正确，如果您希望 value2、value4 和 value5 的文本内容在一行中，您可以使用此 xpath：

```
(//td[@class='value2'] | //td[@class='value4'] | //td[@class='value5'])/text() 
```

例如：

```
<table id="thisTable"> 
  <tr> 
    <td class="value1">  1111</td>
    <td class="value2"> 222 </td>
    <td class="value3">333 </td> 
    <td class="value4"> 444</td>
  </tr>  
  <tr> 
    <td class="value5">  555</td>
    <td class="value6"> 666</td>
  </tr> 
</table> 
```

输出将是：222 444 555

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-03T14:50:49.787

展开您的 xpath 查询：

```
$class="value1";
$nodelist = $xpath->query('//*[@id="thisTable"][@class="$class"]'); 
```

# c#-4.0 - 执行规则表达式的建议

> ID：15186855
> 
> 赞同：1
> 
> 时间：2013-03-03T14:46:19.737
> 
> 标签：c#-4.0, expression, rules, rule-engine, business-rules

我们有一种情况，用户将定义一些业务规则或表达式。看起来像，

```
if(riskvalue <= 100)  // condition
      notifyObservers() // action
      remarks = remarkshistory //expression
      if(allowedriskvalue <= riskvalue) //child condition
          do something   //can be expression or action
      else
          do some other thing 

else
     do some thing 
```

我们将计划对其进行解析并将其保存为具有其类型的表达式，例如条件、表达式和操作。

我们有一些可以在规则定义中允许的操作数和函数。

请建议我一些验证技术来验证规则定义。

而且，我想要建议，

*   使用**表达式树**来执行规则表达式？
*   使用任何**自定义规则解析器/评估器**？
*   **使用代码dom**在动态类中构建逻辑并执行它？

提前致谢！！！

# c - C文件传输套接字

> ID：15186858
> 
> 赞同：0
> 
> 时间：2013-03-03T14:47:24.033
> 
> 标签：c, sockets, file-transfer

```
void RecvFile() 
{ 
int rval; 
char buf[0x1000]; 
FILE *file = fopen("C:\\pic.bmp", "wb"); 
if (!file)
{
    printf("Can't open file for writing");
    return;
}

do
{
    rval = recv(winsock, buf, sizeof(buf), 0);
    if (rval < 0)
    {
        // if the socket is non-blocking, then check
        // the socket error for WSAEWOULDBLOCK/EAGAIN
        // (depending on platform) and if true then
        // use select() to wait for a small period of
        // time to see if the socket becomes readable
        // again before failing the transfer...

        printf("Can't read from socket");
        fclose(file);
        return;
    }

    if (rval == 0)                 
        break; //line 159

    int off = 0;
    do
    {
        int written = fwrite(&buf[off], 1, rval - off, file);
        if (written < 1)
        {
            printf("Can't write to file");
            fclose(file);
            return;
        }

        off += written;
    }
    while (off < rval)
} //line 175

fclose(file); 
} 
```

> '}' 标记之前的 175 语法错误
> 159 被早期错误混淆，退出

我不知道该怎么办...你能帮帮我吗？我在 c 编程方面还是个新手。我在代码中插入了错误行。我不明白为什么会出现这个错误......你们能解释一下为什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-03T14:50:20.197

实际上你`;`在while循环中丢失了

```
while (off < rval);   // 174 line
                  ^ 
```

第二个外循环没有while

```
do{

}// 175 line
while()  // this is missing ??? 
```

我不是 100% 确定但我认为你需要在外部无限循环（下面的粗略代码）阅读评论：

```
do{

   // rev = recv(....
   if(rev <){
    // you return from here that is reason i believe you need infinite loop 
    // code
   }
   //code
   do{
       // your code
   }while (off < rval); // at like 174
}while(1); // line 175 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T14:53:08.017

有2个错误。

1.  `while (off < rval)`应该替换为`while (off < rval);`
2.  您缺少`while`第一个声明`do`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-03T14:50:33.413

在第 175 行，您应该有一个`while`语句，因为您在开头有一个相应的 do 语句。代码中的另一个 do-while 语句也缺少分号。

```
void RecvFile() 
{ 
int rval; 
char buf[0x1000]; 
FILE *file = fopen("C:\\pic.bmp", "wb"); 
if (!file)
{
    printf("Can't open file for writing");
    return;
}

do //******Where is the while for this do statement?*****
{
    rval = recv(winsock, buf, sizeof(buf), 0);
    if (rval < 0)
    {
        // if the socket is non-blocking, then check
        // the socket error for WSAEWOULDBLOCK/EAGAIN
        // (depending on platform) and if true then
        // use select() to wait for a small period of
        // time to see if the socket becomes readable
        // again before failing the transfer...

        printf("Can't read from socket");
        fclose(file);
        return;
    }

    if (rval == 0)                 
        break; //line 159

    int off = 0;
    do
    {
        int written = fwrite(&buf[off], 1, rval - off, file);
        if (written < 1)
        {
            printf("Can't write to file");
            fclose(file);
            return;
        }

        off += written;
    }
    while (off < rval) // *** A semicolon is needed here ***
} //line 175

fclose(file); 
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-03T14:51:03.907

您忘记了`do...while`块后的分号

改变

`while (off < rval)`至`while (off < rval);`

# supercsv - 在 csv 中查找和报告重复行的建议

> ID：15186862
> 
> 赞同：2
> 
> 时间：2013-03-03T14:48:18.700
> 
> 标签：supercsv

我有多个项目，其中包含不同数量的 csv 文件，我使用 SuperCSV CsvBeanReader 来执行映射和单元格验证。我为每个 csv 文件创建了一个 bean 并覆盖；每个 bean 的 equals、hashCode 和 toString。

我正在寻找有关执行 csv 行重复识别的最佳“所有项目”实施方法的建议。报告（不删除）原始 csv 行号和行内容，以及找到的所有重复行的行号和行内容。一些文件可以达到数十万行，大小超过 GB，并且希望最小化每个文件的读取次数，并认为可以在 CsvBeanReader 打开文件时完成。

先感谢您。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T01:02:41.353

考虑到文件的大小以及您想要原始和副本的行内容这一事实，我认为您能做的最好的事情就是对文件进行 2 次传递。

如果您只想复制最新的行内容，则可以通过 1 次。在 1 遍中跟踪原始行内容以及所有重复项意味着您必须存储每一行​​的内容 - 您可能会用完内存。

我的解决方案假设两个相同的 bean`hashCode()`是重复的。如果你必须使用，`equals()`那么它会变得更加复杂。

*   Pass 1：识别重复项（记录每个重复哈希的行号）

*   通行证 2：重复报告

**通过 1：识别重复项**

```
/**
 * Finds the row numbers with duplicate records (using the bean's hashCode()
 * method). The key of the returned map is the hashCode and the value is the
 * Set of duplicate row numbers for that hashcode.
 * 
 * @param reader
 *            the reader
 * @param preference
 *            the preferences
 * @param beanClass
 *            the bean class
 * @param processors
 *            the cell processors
 * @return the map of duplicate rows (by hashcode)
 * @throws IOException
 */
private static Map<Integer, Set<Integer>> findDuplicates(
    final Reader reader, final CsvPreference preference,
    final Class<?> beanClass, final CellProcessor[] processors)
    throws IOException {

  ICsvBeanReader beanReader = null;
  try {
    beanReader = new CsvBeanReader(reader, preference);

    final String[] header = beanReader.getHeader(true);

    // the hashes of any duplicates
    final Set<Integer> duplicateHashes = new HashSet<Integer>();

    // the hashes for each row
    final Map<Integer, Set<Integer>> rowNumbersByHash = 
      new HashMap<Integer, Set<Integer>>();

    Object o;
    while ((o = beanReader.read(beanClass, header, processors)) != null) {
      final Integer hashCode = o.hashCode();

      // get the row no's for the hash (create if required)
      Set<Integer> rowNumbers = rowNumbersByHash.get(hashCode);
      if (rowNumbers == null) {
        rowNumbers = new HashSet<Integer>();
        rowNumbersByHash.put(hashCode, rowNumbers);
      }

      // add the current row number to its hash
      final Integer rowNumber = beanReader.getRowNumber();
      rowNumbers.add(rowNumber);

      if (rowNumbers.size() == 2) {
        duplicateHashes.add(hashCode);
      }

    }

    // create a new map with just the duplicates
    final Map<Integer, Set<Integer>> duplicateRowNumbersByHash = 
      new HashMap<Integer, Set<Integer>>();
    for (Integer duplicateHash : duplicateHashes) {
      duplicateRowNumbersByHash.put(duplicateHash,
          rowNumbersByHash.get(duplicateHash));
    }

    return duplicateRowNumbersByHash;

  } finally {
    if (beanReader != null) {
      beanReader.close();
    }
  }
} 
```

作为此方法的替代方法，您可以使用 a`CsvListReader`并使用`getUntokenizedRow().hashCode()`- 这将根据原始 CSV 字符串计算散列（它会快很多，但您的数据可能存在细微差异，这意味着它不起作用）。

**通行证 2：重复报告**

此方法采用前一种方法的输出并使用它来快速识别重复记录和它重复的其他行。

```
 /**
   * Reports the details of duplicate records.
   * 
   * @param reader
   *            the reader
   * @param preference
   *            the preferences
   * @param beanClass
   *            the bean class
   * @param processors
   *            the cell processors
   * @param duplicateRowNumbersByHash
   *            the row numbers of duplicate records
   * @throws IOException
   */
  private static void reportDuplicates(final Reader reader,
      final CsvPreference preference, final Class<?> beanClass,
      final CellProcessor[] processors,
      final Map<Integer, Set<Integer>> duplicateRowNumbersByHash)
      throws IOException {

    ICsvBeanReader beanReader = null;
    try {
      beanReader = new CsvBeanReader(reader, preference);

      final String[] header = beanReader.getHeader(true);

      Object o;
      while ((o = beanReader.read(beanClass, header, processors)) != null) {
        final Set<Integer> duplicateRowNumbers = 
            duplicateRowNumbersByHash.get(o.hashCode());
        if (duplicateRowNumbers != null) {
          System.out.println(String.format(
            "row %d is a duplicate of rows %s, line content: %s",
            beanReader.getRowNumber(),
            duplicateRowNumbers,
            beanReader.getUntokenizedRow()));
        }

      }

    } finally {
      if (beanReader != null) {
        beanReader.close();
      }
    }
  } 
```

**样本**

这是如何使用这两种方法的示例。

```
 // rows (2,4,8) and (3,7) are duplicates
  private static final String CSV = "a,b,c\n" + "1,two,01/02/2013\n"
      + "2,two,01/02/2013\n" + "1,two,01/02/2013\n"
      + "3,three,01/02/2013\n" + "4,four,01/02/2013\n"
      + "2,two,01/02/2013\n" + "1,two,01/02/2013\n";

  private static final CellProcessor[] PROCESSORS = { new ParseInt(),
      new NotNull(), new ParseDate("dd/MM/yyyy") };

  public static void main(String[] args) throws IOException {

    final Map<Integer, Set<Integer>> duplicateRowNumbersByHash = findDuplicates(
        new StringReader(CSV), CsvPreference.STANDARD_PREFERENCE,
        Bean.class, PROCESSORS);

    reportDuplicates(new StringReader(CSV),
        CsvPreference.STANDARD_PREFERENCE, Bean.class, PROCESSORS,
        duplicateRowNumbersByHash);

  } 
```

输出：

```
row 2 is a duplicate of rows [2, 4, 8], line content: 1,two,01/02/2013
row 3 is a duplicate of rows [3, 7], line content: 2,two,01/02/2013
row 4 is a duplicate of rows [2, 4, 8], line content: 1,two,01/02/2013
row 7 is a duplicate of rows [3, 7], line content: 2,two,01/02/2013
row 8 is a duplicate of rows [2, 4, 8], line content: 1,two,01/02/2013 
```

# asp.net-mvc-3 - 尝试保存逗号分隔的列表

> ID：15186863
> 
> 赞同：0
> 
> 时间：2013-03-03T14:48:29.617
> 
> 标签：asp.net-mvc-3, nhibernate

尝试将 CheckBoxList 中的选择保存为`string`DB 中的逗号分隔列表 ( )（选择了一个或多个选项）。我正在使用代理以另存为，`string`因为否则我必须在数据库中为关系创建单独的表 - 对于这个简单的场景，这项工作不值得，我希望我可以将它转换为`string`并避免这种情况。

CheckBoxList 使用`enum`它的选择：

```
public enum Selection 
{ 
    Selection1,
    Selection2,
    Selection3
} 
```

不要复杂，但我使用`[Display(Name="Choice 1")]`和一个扩展类在 UI 上显示一些友好的东西。不知道我是否可以保存它`string`而不仅仅是`enum`，虽然我认为如果我保存`enum`它对我来说在某些确认页面上的 UI 上“显示”友好字符串并不是什么大不了的事。

这是在数据库中保存 a 的“记录”类`string`：

```
public virtual string MyCheckBox { get; set; } 
```

这是“代理”，这是我找到但不直接处理的一些示例`enum`，它使用`IEnumerable<string>`（或者应该是`IEnumerable<Selection>`？）：

```
public IEnumerable<string> MyCheckBox
{
    get
    {
        if (String.IsNullOrWhiteSpace(Record.MyCheckBox)) return new string[] { };
            return Record
                .MyCheckBox
                .Split(new[] { ',' }, StringSplitOptions.RemoveEmptyEntries)
                .Select(r => r.Trim())
                .Where(r => !String.IsNullOrEmpty(r));
    }
    set
    { 
        Record.MyCheckBox = value == null ? null : String.Join(",", value); 
    }
} 
```

为了保存在数据库中，我尝试在创建类中执行此操作：

```
proxy.MyCheckBox = record.MyCheckBox; //getting error here 
```

但我得到了错误：

> 无法将“字符串”隐式转换为 System.Collections.Generic.IEnumerable'

我不知道是否可以或更好地使用`Parse`或`ToString`从 API 获取枚举值。

我知道做这样的事情会将我放入`("")`数据库中的任何内容存储起来，所以只需弄清楚如何克服错误（或者，如果有替代方法）：

```
proxy.MyCheckBox = new[] {"foo", "bar"}; 
```

我对这些东西不擅长，只是一直在挖掘和挖掘以提出解决方案。任何帮助深表感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T16:22:35.313

您可以使用自定义用户类型来完成此操作。下面的示例在`ISet<string>`类上使用 an 并将值存储为分隔字符串。

```
[Serializable]
public class CommaDelimitedSet : IUserType
{
    const string delimiter = ",";

    #region IUserType Members

    public new bool Equals(object x, object y)
    {
        if (ReferenceEquals(x, y))
        {
            return true;
        }
        var xSet = x as ISet<string>;
        var ySet = y as ISet<string>;
        if (xSet == null || ySet == null)
        {
            return false;
        }
        // compare set contents
        return xSet.Except(ySet).Count() == 0 && ySet.Except(xSet).Count() == 0;
    }

    public int GetHashCode(object x)
    {
        return x.GetHashCode();
    }

    public object NullSafeGet(IDataReader rs, string[] names, object owner)
    {
        var outValue = NHibernateUtil.String.NullSafeGet(rs, names[0]) as string;
        if (string.IsNullOrEmpty(outValue))
        {
            return new HashSet<string>();
        }
        else
        {
            var splitArray = outValue.Split(new[] {Delimiter}, StringSplitOptions.RemoveEmptyEntries);
            return new HashSet<string>(splitArray);
        }
    }

    public void NullSafeSet(IDbCommand cmd, object value, int index)
    {
        var inValue = value as ISet<string>;
        object setValue = inValue == null ? null : string.Join(Delimiter, inValue);
        NHibernateUtil.String.NullSafeSet(cmd, setValue, index);
    }

    public object DeepCopy(object value)
    {
        // return new ISet so that Equals can work
        // see http://www.mail-archive.com/nhusers@googlegroups.com/msg11054.html
        var set = value as ISet<string>;
        if (set == null)
        {
            return null;
        }
        return new HashSet<string>(set);
    }

    public object Replace(object original, object target, object owner)
    {
        return original;
    }

    public object Assemble(object cached, object owner)
    {
        return DeepCopy(cached);
    }

    public object Disassemble(object value)
    {
        return DeepCopy(value);
    }

    public SqlType[] SqlTypes
    {
        get { return new[] {new SqlType(DbType.String)}; }
    }

    public Type ReturnedType
    {
        get { return typeof(ISet<string>); }
    }

    public bool IsMutable
    {
        get { return false; }
    }

    #endregion
} 
```

映射文件中的用法：

```
Map(x => x.CheckboxValues.CustomType<CommaDelimitedSet>(); 
```

# jquery - jQuery调用函数成函数

> ID：15186864
> 
> 赞同：0
> 
> 时间：2013-03-03T14:48:30.027
> 
> 标签：jquery, ajax, function

我在 HTML 上有这段代码

```
<ul id="menu">
    <li class="mainmenu" id="newsarticles"><a href="#">News &amp; articles</a>

    <ul id="newsarticles">
      <li class="submenu" id="news"> <a href="#">News</a>

      </li>
      <li class="submenu" id="articles"> <a href="#">Articles</a>

      </li>
    </ul>
    <li class="mainmenu" id="contactus"><a href="#">Contact Us</a>
    </li>
</ul> 
```

我用 jQuery ajax 调用这段代码来创建一个新的树形菜单并调用 html 页面，我的问题是我想在这两个菜单上使用相同的功能，我想知道是否有一种方法可以做到这一点而无需编写两次相同的功能：

```
$(document).ready(function() {

  $("#menu li").on("click", function(e) {
   e.stopPropagation();

  var currentId = $(this).attr('id');
  var scriptPath = currentId+".html";
  var tree = $(this).closest("ul").attr("id");

  $.ajax({
  url: scriptPath,
    type:'HEAD',
    success: function()
    {
     //file exists
     $("#tree").html($("#"+tree).html());
     $("#text").load(scriptPath);

     $("#tree li").click(Menu_callTabs);  //the same function for tree menu
     }
   });
  });
 });

 function Menu_callTabs(){
  $("#menu li").on("click", function(e) {

    var currentId = $(this).attr('id');
    var scriptPath = currentId+".html";
    var tree = $(this).closest("ul").attr("id");

    $.ajax({
      url: scriptPath,
      type:'HEAD',
      success: function()
      {
       //file exists
       $("#tree").html($("#"+tree).html());
       $("#text").load(scriptPath);

      $("#tree li").click(Menu_callTabs);  //the same function for tree menu
    }
  });
  });
} 
```

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-03T14:52:26.180

如果我正确理解了这个问题，您希望将点击回调添加到动态生成的 HTML 中。如果这是您想要做的，您可以使用`.on()`处理程序的冒泡事件，如下所示：

```
$(function() {
    $(document).on("click", "#tree li", function(e) {
        //this event will be fired for any element with the "#tree li" selector
        //no matter when the HTML element is created
    }
}); 
```

This attaches an event handler to the `document` that basically says "if you see a click event meant for a `#tree li` element, send it to all current elements with that selector, no matter when they were created".

You can read more about the `.on()` handler [here](http://api.jquery.com/on/).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T14:50:09.053

在 Javascript 中，函数只是值。您可以将它们分配给变量，然后使用这些变量代替函数，就像任何其他值一样。

这是您可以在代码中执行此操作的一种方法：

```
$(document).ready(function() {

var func = function(scriptPath)
{
    //file exists
    $("#tree").html($("#"+tree).html());
    $("#text").load(scriptPath);

    $("#tree li").click(Menu_callTabs);
};

$("#menu li").on("click", function(e) {
e.stopPropagation();

var currentId = $(this).attr('id');
var scriptPath = currentId+".html";
var tree = $(this).closest("ul").attr("id");

$.ajax({
url: scriptPath,
    type:'HEAD',
    success: function () { func(scriptPath); }
});
});
});

function Menu_callTabs(){
$("#menu li").on("click", function(e) {

    var currentId = $(this).attr('id');
    var scriptPath = currentId+".html";
    var tree = $(this).closest("ul").attr("id");

    $.ajax({
    url: scriptPath,
    type:'HEAD',
    success: function () { func(scriptPath); }
});
});
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-03T14:53:48.917

Can't you just make one javascript function adding your code which you use twice and then call this function whenever needed?

# c# - 如何从 WPF Datagrid 导出到 Google 电子表格？

> ID：15186868
> 
> 赞同：1
> 
> 时间：2013-03-03T14:48:39.120
> 
> 标签：c#, wpf, google-api

对于我的应用程序，我想从 WPF Datagrid 导出到 Google docs 电子表格。我在 Google 文档中创建了电子表格。我现在想要的是每次都创建新的工作表并删除旧的工作表。我在我的网站中使用电子表格链接来显示谷歌文档电子表格。是否有任何现成的 3-rd 方工具来完成这项任务？任何人都可以推荐解决方案吗？

# c++ - 代码块 libsigc++ 错误

> ID：15186883
> 
> 赞同：1
> 
> 时间：2013-03-03T14:50:30.750
> 
> 标签：c++, user-interface, codeblocks, gtkmm

我尝试将 gtkmm 与代码块一起使用。我安装了所有东西，但它在 libsigc++ 标头中显示错误`signal.h`

```
fatal error: list: No such file or directory 
```

我找不到什么问题...

错误在这一行。

```
#include <list> 
```

我添加了`#include <list.h>` ，现在它`list.h`在行命名空间 Gdk 中的文件中显示错误，错误消息是

```
_C:\gtkmm\include\gdkmm-2.4\gdkmm\list.h|4|error: unknown type name 'namespace'| 
C:\gtkmm\include\gdkmm-2.4\gdkmm\list.h|4|error: expected '=', ',', ';', 'asm' or 'attribute' before '{' token| 
C:\gtkmm\include\sigc++-2.0\sigc++\signal.h|8|
fatal error: list: No such file or directory| ||=== Build finished: 3 errors, 0 warnings (0 minutes, 1 seconds) 
```

有人可以帮助我吗？

# html - 在图像上添加图像

> ID：15186889
> 
> 赞同：0
> 
> 时间：2013-03-03T14:50:50.783
> 
> 标签：html, css

我想在图像上添加一个图标。我正在尝试关注，但它似乎不起作用：

HTML：

```
<ul>
    <li>
        <div class="icon">
            <img src="image.jpg" />
        </div>
    </li>
</ul> 
```

CSS：

```
ul{
    margin: 0;
    list-style: none;
    position: relative;    
}

.icon{
    background : url("icon_quick.gif") no-repeat;
    border: 1px solid red;
    z-index: 2;
    overflow: hidden;
} 
```

**演示：http:** [//jsfiddle.net/tqw4V/](http://jsfiddle.net/tqw4V/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-03T15:08:11.457

无需修改标记。您的内容图像（绘画）保留在标记中，而装饰图像（笑脸）保留在 CSS 中。

[http://jsfiddle.net/tqw4V/6/](http://jsfiddle.net/tqw4V/6/)

```
ul{
    margin: 0;
    list-style: none;
    /*position: relative;  */  
}

.icon{
    /*z-index: 2;
    overflow: hidden;*/
    position: relative;
}

.icon:before {
    background: url("http://www.joors.com/se_images/icon_quick.gif") no-repeat;
    height: 100px;
    width: 100px;
    content: '';
    position: absolute;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-03T14:58:46.237

您可以更好地更改您的 HTML，因为您在背景顶部添加了一个内部子级，这会将其推开。

**HTML**

```
<ul>
    <li>
        <div class="icon"></div>
            <img src="http://farm9.staticflickr.com/8382/8521029804_2c86ab5a18_m.jpg" />
        </li>
</ul> 
```

**CSS**

```
ul{
    margin: 0;
    list-style: none;
    position: relative;    
}

.icon{
    width:100px; height:100px;
    background : url("http://www.joors.com/se_images/icon_quick.gif") no-repeat;
    z-index: 2;
    overflow: hidden;
    position:absolute;
} 
```

[JSF](http://jsfiddle.net/tqw4V/2/)中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-03T14:54:39.710

只需更换图像。更换他们的位置。笑脸应该去html，而另一个去css。然后通过高度和宽度可以设置容器的大小。希望我有所帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-03T14:58:42.097

这是一种方法：http: [//jsfiddle.net/tqw4V/1/](http://jsfiddle.net/tqw4V/1/)

不幸的是，它需要修改您的标记，但它可以工作。这个想法是让覆盖图像成为一个单独的元素，你绝对定位在你的主要元素之上。如果主要元素本身不是绝对定位的，这会更好。

HTML：

```
<ul>
    <li>
        <div class="icon">
            <img src="http://farm9.staticflickr.com/8382/8521029804_2c86ab5a18_m.jpg" />
            <div class="overlay"></div>
        </div>
        </li>
</ul> 
```

CSS：

```
ul{
    margin: 0;
    list-style: none;
    position: relative;    
}

.icon{
    border: 1px solid red;
    z-index: 2;
    overflow: hidden;
}

.overlay {
    width: 100%;
    height: 100%;
    position: absolute;
    top: 0;
    background: url("http://www.joors.com/se_images/icon_quick.gif") no-repeat;
    z-index: 4;
}
} 
```

# c++ - C++ 列表 remove_if 编译错误

> ID：15186890
> 
> 赞同：1
> 
> 时间：2013-03-03T14:50:55.607
> 
> 标签：c++, list

我收到的以下代码的错误消息是：

```
 error C2662: 'DamageNumbers::IsAlive' : cannot convert 'this' pointer from 'const DamageNumbers' to 'DamageNumbers &'
1>          Conversion loses qualifiers 
```

.

```
bool CheckDamageNumbersAlive(const DamageNumbers& e)
{
    return !e.IsAlive();
} 
```

当 IsAlive() 为该列表中的对象返回 false 时，我想从列表中删除对象。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-03T14:53:08.860

你的方法

```
bool DamageNumbers::IsAlive() {...} 
```

应该是常量：

```
bool DamageNumbers::IsAlive() const {...} 
```

# css - 设置宽度 div 内的全宽背景图像

> ID：15186894
> 
> 赞同：0
> 
> 时间：2013-03-03T14:51:08.910
> 
> 标签：css, wordpress, background-image, fullscreen

希望你能帮助我的查询。我正在一个手动编码的网站中构建一个 WP 博客，并且由于 WP 中的 css 很复杂而遇到问题。这是页面 [http://www.carehomesderby.co.uk/news/](http://www.carehomesderby.co.uk/news/) 我想跨越菜单导航和页脚浏览器的整个宽度，保持内容居中 我尝试将 ul 宽度设置为 3000px（例如) 但它在 RHS 上增加了大约 30 像素。我无法分离菜单导航，因为它位于 WP 的 header.php 中。在几个地方，同一个元素的样式都被拉出来了，所以我很难确定什么是什么。提前谢谢了

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T15:23:00.247

您可以尝试添加：

```
position:absolute;
left:0px; 
```

在第 1479 行。

并将导航按钮放在导航栏中的新 div 中。例如：

```
<div class="nav-menu">
        <div class="nav-button">
        <ul>
            <li><a href="">Home</a></li>
            <li><a href="">About Us</a></li>
            <li><a href="">Facilities</a></li>
            <li><a href="">Respite Care</a></li>
            <li><a href="">Day Care</a></li>
            <li><a href="">Gallery</a></li>
            <li><a href="">Events</a></li>
            <li><a href="">Testimonials</a></li>
            <li><a href="">Contact Us</a></li>

        </ul>
        </div>
        </div> 
```

然后将按钮居中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T15:03:09.640

我已经看到你的页脚如果你希望它覆盖整个页面然后只需从页脚标签中删除角色

```
<footer id="colophon" style="width:100%;" role="contentinfo"> 
```

只需从角色属性中删除 contentinfo 即可。

只需从角色属性中删除 contentinfo 即可。

对于导航：你需要做几件事，我在这里给你一个想法

1.  删除站点类的最大宽度

    `.site { /*max-width: 68.5714rem;*/ }`

2.  从 div 标签中删除宽度 950px 的值

    `<div id="page" class="hfeed site" style="padding-top:0px; margin-top:0px;">`

它会做的是，您的导航和页面将获取整个页面，然后只需将内容设置在您想要的任何位置，而不是导航。

# html - 如何按下 div 右侧的按钮？

> ID：15186896
> 
> 赞同：-1
> 
> 时间：2013-03-03T14:51:24.330
> 
> 标签：html, css

我在 html 中的标记：

```
<div>
    <asp:Button runat="server" ID="btnUpload" Text="Загрузить" OnClick="btnUpload_Click" />
</div> 
```

我的CSS：

```
.dwnButtonDiv {
    clear:both; 
    text-align:right;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T16:47:33.117

尝试;

```
<div class="class1">
    <asp:Button runat="server" ID="btnUpload" Text="Загрузить" OnClick="btnUpload_Click" />
</div>

.class1{
    text-align:right;
}
.dwnButtonDiv {
    clear:both; 
    text-align:right;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T16:42:09.303

不确定这是否有效，但尝试添加：

```
<asp:Button runat="server" ID="btnUpload" Text="Загрузить" OnClick="btnUpload_Click" style="float:right;" /> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-03T15:09:20.473

为此，您有两种选择。

如果您想将div 中的**所有内容**向右移动，则`text-align: right`可以正常工作。这会将按钮以及任何其他内容向右移动。

如果您只想将**按钮**向右移动，而将任何其他内容留在左侧，那么您应该应用`float: right;`到按钮本身。您还应该考虑`overflow: auto;`在包装器 div （或某种类型的 clearfix 解决方案）上使用，以确保 div 格式正确，其中包含浮动元素。

[这是一个 jsfiddle](http://jsfiddle.net/uzw7S/)演示了两种方法。

# wcf - wcf 的 apicontroller 外观

> ID：15186897
> 
> 赞同：1
> 
> 时间：2013-03-03T14:51:24.827
> 
> 标签：wcf, asp.net-mvc-4

我有一个在 IIS 上运行的 wcf 项目，该项目无法从 Internet 上的客户端访问。第二个项目是用 MVC c#4 razor 引擎编写的对互联网开放的网站。我做了很多工作，只是将数据从 api 控制器传递到服务客户端并返回。有没有办法生成代码？

假设我的 wcf 服务中的代码位于无法访问 Internet 的服务器上：

```
[ServiceContract]
    public interface IAlertsService
    {
        [OperationContract]
        void ApproveAlert(int ID);
        [OperationContract]
        bool IsAdditionalPackageRequired(int AlertID);
        [OperationContract]
        bool RemoveAlert(int ID);
        //ApproveAllAlerts
        [OperationContract]
        bool ApproveAllAlerts(int[] ID);
    } 
```

我从网站 mvc4 做了服务参考，并想做控制器 api：

```
public class AlertsController : ApiController
{
   //here all methods to invoke wcf ...
} 
```

有没有办法从服务参考生成 ApiControllers 代码？

# ruby-on-rails - 如何在 Rails 和 RSpec 中测试 after_destroy 回调？

> ID：15186908
> 
> 赞同：1
> 
> 时间：2013-03-03T14:52:56.987
> 
> 标签：ruby-on-rails, ruby-on-rails-3, rspec, rspec2, rspec-rails

我`User`在 Ruby on Rails 中有这个类：

```
class User < ActiveRecord::Base

  after_destroy :ensure_an_admin_remains

  private

  def ensure_an_admin_remains
    if User.where("admin = ?", true).count.zero?
      raise "Can't delete Admin."
    end
  end

end 
```

如果有人不小心删除了管理员用户，这很有效，并且会导致数据库回滚。

问题是它似乎破坏了用户删除操作，即使在使用非管理员用户（由 Factory Girl 生成）进行测试时也是如此。这是我的`user_controller_spec.rb`：

```
describe 'DELETE #destroy' do

  before :each do
    @user = create(:non_admin_user)
    sign_in(@user)
  end

  it "deletes the user" do
    expect{ 
      delete :destroy, id: @user
    }.to change(User, :count).by(-1)
  end

end 
```

每当我运行此测试时，都会收到此错误：

```
Failure/Error: expect{
count should have been changed by -1, but was changed by 0 
```

不过，不应该有任何错误，因为`@user`默认情况下 ' 的 admin 属性设置为 false 。

有人可以帮我吗？

谢谢...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T16:08:27.537

我可能错了，但是，您的规范从空数据库开始，对吗？因此，您的数据库中没有管理员用户。因此，当您调用 delete 时，您将始终拥有 User.where("admin = ?", true).count 等于零

尝试在测试之前创建用户管理员

```
describe 'DELETE #destroy' do

  before :each do
    create(:admin_user)
    @user = create(:non_admin_user)
    sign_in(@user)
  end

  it "deletes the user" do
    expect{ 
      delete :destroy, id: @user
    }.to change(User, :count).by(-1)
  end

end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-03T17:02:38.123

我会做出以下改变：

```
before_destroy :ensure_an_admin_remains

def ensure_an_admin_remains
  if self.admin == true and User.where( :admin => true ).count.zero?
    raise "Can't delete Admin."
  end
end 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-11-17T14:58:54.693

另一种方法是使被调用函数`ensure_an_admin_remains`成为公共函数，例如`check_admin_remains`.

然后，您可以测试它的逻辑，`check_admin_remains`就好像它是任何其他功能一样。

然后在另一个测试中，您可以确保在没有任何数据库交互的情况下在销毁时调用该函数，如下所示：

```
let(:user) { build_stubbed(:user) }

it 'is called on destroy' do
  expect(user).to receive(:check_admin_remains)

  user.run_callbacks(:destroy)
end 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-03-31T03:27:39.953

你不应该提高控制流。您可以在回调期间暂停以防止提交记录。

从 Rails 5 开始，我已经为其他试图弄清楚如何正确执行此操作的人改进了一些答案

```
class User < ActiveRecord::Base
  before_destroy :ensure_an_admin_remains

  private def ensure_an_admin_remains
    return unless admin && User.where(admin: true).limit(2).size == 1
    errors.add(:base, "You cannot delete the last admin.")
    throw :abort
  end
end 
```

# javascript - 如何将javascript代码注入iframe？

> ID：15186909
> 
> 赞同：0
> 
> 时间：2013-03-03T14:52:59.250
> 
> 标签：javascript, html, iframe

我有一个 iframe（src 是 google.com）..我想注入 javascript 代码以查找 iframe 中存在的从父级到 iframe 的锚标记列表。是否可以注入代码？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-03T14:55:03.020

由于同源策略，这是不可能的。

请参阅[http://en.wikipedia.org/wiki/Same_origin_policy](http://en.wikipedia.org/wiki/Same_origin_policy)。

而且由于您无权访问 Google 的服务器配置，因此您也不会在这里找到任何帮助： [绕过同源策略的方法](https://stackoverflow.com/questions/3076414/ways-to-circumvent-the-same-origin-policy) 。

# flash - 移动 flex 从外部 swf 创建类的实例返回 null

> ID：15186912
> 
> 赞同：0
> 
> 时间：2013-03-03T14:53:08.490
> 
> 标签：flash, apache-flex

我有 2 个使用 Flash Builder 4.6 创建的项目：

1.  一个 ActionScript 项目
2.  移动 Flex 项目

这两个项目都加载包含影片剪辑资源的相同外部 SWF 文件（使用 Flash Professional CS6 创建）（使用相同的共享代码加载外部 swf 文件）

这两个项目都扩展了 swf 资产文件中的影片剪辑。例如，在 swf 文件中，我有一个名为“Test”的影片剪辑，其中包含一个文本字段。链接类是“MyTest”，文本字段的实例名称是“txt1”。

我在两个项目中都有一个名为“MyTest”的类，它包含一个公共“txt1”属性和一个私有“var counter:int”，一旦加载了 swf，我使用以下代码创建该类的一个实例：

```
var x:MyTest = new MyTest(); 
```

在 actionscript 项目中，它运行良好并且 x 已正确创建，文本字段 txt1 已正确设置。

然而，在 flex 项目中，txt1 属性为空，因此该实例不是来自外部 swf 的“测试”影片剪辑的实例。

我究竟做错了什么？为什么它在 actionscript 项目中工作而不是在 mobile flex 项目中工作？这是完成所有这些工作的共享代码，我不想只为 flex 项目重写一个新的......

谢谢。

* * *

**让事情更清楚**

这段代码：

```
var cls:Class = loader.contentLoaderInfo.applicationDomain.getDefinition("MyTest") as Class;
var x:Object = new cls();
trace(getQualifiedClassName(x));
var y:MyTest = x as MyTest; 
```

将 x 设置为 swf 中定义的 MyTest 类型（没有“计数器”属性”，并且 y 将为空（安全案例未成功）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T21:17:53.783

当你说

`var y:MyTest = x as MyTest`

那么显然这里出了点问题。通过链接 ID 在 swc 中定义的 MyTest 具有编译到 Flex 项目中的 MyTest（通过允许将变量 y 声明为 MyTest 类型的导入语句）没有的“[东西](http://forums.adobe.com/thread/1091172?start=0&tstart=0)”（例如物理图形）知道关于。所以你有两个冲突的类定义，特别是如果它们都有相同的命名空间。

我不希望 y 能够保存从库链接创建的 MyTest 的实例，并且我希望尝试从一个转换到另一个会产生空值 - 正如您所报告的那样。

您最好创建一个 ITest 接口来声明一个 getter/setter 对`txt1`（顺便说一下，我希望您不要将其用作实际的生产变量名称）。然后演员应该工作得很好。

# c# - 我想通过输入文本文件总结总经过时间？

> ID：15186915
> 
> 赞同：0
> 
> 时间：2013-03-03T14:53:30.823
> 
> 标签：c#

我想仅使用 C sharp 对“GSA 搜索”的总“经过时间”求和：

以下是我的日志文件：

```
WX Search = Server:testserver User:vibsharm appGUID: wx Elapsed Time:975ms SaveSearchID:361
WX Search = Server:testserver User:vibsharm appGUID: wx Elapsed Time:875ms SaveSearchID:361
GSA Search = Server:testserver User:gulanand appGUID: wx Elapsed Time:890ms SaveSearchID:361
GSA Search = Server:testserver User:vibsharm appGUID: wx Elapsed Time:887ms SaveSearchID:361
GSA Search = Server:testserver User: gulanand appGUID: wx Elapsed Time:875.5ms SaveSearchID:361
GSA Search = Server:testserver User:vibsharm appGUID: wx Elapsed Time:877.6ms SaveSearchID:361 
```

我试过的代码是：

```
string searchKeyword = "WX GSA Search";
            string fileName = @"C:\Users\karan\Desktop\Sample log file.txt";
            string[] textLines = File.ReadAllLines(fileName);

            List<string> results = new List<string>();

            foreach (string line in textLines)
            {
                if (line.Contains(searchKeyword))
                {
                    results.Add(line);
                }
            }

            string x = string.Join(",", results);
            List<string> time = new List<string>();
            Regex regex = new Regex(@"Elapsed Time:(?<timevalue>\d+(?:\.\d)?)ms");
            MatchCollection matches = regex.Matches(x);
            foreach (Match match in matches)
            {
                var value = match.Groups["timevalue"].Value;
                if (!time.Contains(value)) time.Add(value);
            } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T15:00:16.620

这里有一些东西可以让你开始

```
string text = @"WX Search = Server:testserver User:vibsharm appGUID: wx Elapsed Time:975ms SaveSearchID:361 WX Search = Server:testserver User:vibsharm appGUID: wx Elapsed Time:875ms SaveSearchID:361 GSA Search = Server:testserver User:gulanand appGUID: wx Elapsed Time:890ms SaveSearchID:361 GSA Search = Server:testserver User:vibsharm appGUID: wx Elapsed Time:887ms SaveSearchID:361 GSA Search = Server:testserver User: gulanand appGUID: wx Elapsed Time:875.5ms SaveSearchID:361 GSA Search = Server:testserver User:vibsharm appGUID: wx Elapsed Time:877.6ms SaveSearchID:361";
var elapsedTime = text.ToLower().Split(' ').Where(line => line.StartsWith("time"))
                  .Select(timeLine => decimal.Parse(timeLine.Split(':')[1].Replace("ms",String.Empty)))
                  .Sum( time => time); 
```

以毫秒为单位的输出：5380.1

啊，我刚刚注意到你只说“GSA 搜索”。在这种情况下，您首先需要过滤“GSA 搜索”，然后应用上述代码。在您的代码中，您已经这样做了

```
string fileName = @"C:\Users\karan\Desktop\Sample log file.txt";
            string[] textLines = File.ReadAllLines(fileName);

            List<string> results = new List<string>();

            foreach (string line in textLines)
            {
                if (line.Contains(searchKeyword))
                {
                    results.Add(line);
                }
            }

   var elapsedTime = results.SelectMany(line => line.ToLower().Split(' '))
                     .Where(line => line.StartsWith("time"))
                     .Select(timeLine => decimal.Parse(timeLine.Split(':')[1].Replace("ms",String.Empty)))
                     .Sum( time => time); 
```

# ruby-on-rails - 为 PostgreSQL、openssl 库安装 gem pg

> ID：15186924
> 
> 赞同：3
> 
> 时间：2013-03-03T14:54:34.227
> 
> 标签：ruby-on-rails, ruby, gem, openssl, pg

我正在使用带有 ruby​​ 2.0.0 的 RVM。当我尝试为 PostgreSQL 安装**pg** gem 时，我得到以下响应。

**宝石安装 pg**

```
Building native extensions.  This could take a while...
ERROR:  Error installing pg:
    ERROR: Failed to build gem native extension.

    /usr/local/rvm/rubies/ruby-2.0.0-p0/bin/ruby extconf.rb
checking for pg_config... yes
Using config values from /usr/bin/pg_config
checking for libpq-fe.h... yes
checking for libpq/libpq-fs.h... yes
checking for pg_config_manual.h... yes
checking for PQconnectdb() in -lpq... no
checking for PQconnectdb() in -llibpq... no
checking for PQconnectdb() in -lms/libpq... no
Can't find the PostgreSQL client library (libpq)
*** extconf.rb failed ***
Could not create Makefile due to some reason, probably lack of necessary
libraries and/or headers.  Check the mkmf.log file for more details.  You may
need configuration options.

Provided configuration options:
    --with-opt-dir
    --with-opt-include
    --without-opt-include=${opt-dir}/include
    --with-opt-lib
    --without-opt-lib=${opt-dir}/lib
    --with-make-prog
    --without-make-prog
    --srcdir=.
    --curdir
    --ruby=/usr/local/rvm/rubies/ruby-2.0.0-p0/bin/ruby
    --with-pg
    --without-pg
    --with-pg-dir
    --without-pg-dir
    --with-pg-include
    --without-pg-include=${pg-dir}/include
    --with-pg-lib
    --without-pg-lib=${pg-dir}/
    --with-pg-config
    --without-pg-config
    --with-pg_config
    --without-pg_config
    --with-pqlib
    --without-pqlib
    --with-libpqlib
    --without-libpqlib
    --with-ms/libpqlib
    --without-ms/libpqlib

Gem files will remain installed in /usr/local/rvm/gems/ruby-2.0.0-p0/gems/pg-0.14.1 for inspection.
Results logged to /usr/local/rvm/gems/ruby-2.0.0-p0/gems/pg-0.14.1/ext/gem_make.out 
```

试图用谷歌搜索它，显然问题出在 OpenSSL 库上，因为在 mkmf.log 中输出是

```
have_library: checking for PQconnectdb() in -lpq... -----------------$

"gcc -o conftest -I/usr/local/rvm/rubies/ruby-2.0.0-p0/include/ruby-2$
conftest.c: In function 't':
conftest.c:8:32: warning: variable 'p' set but not used [-Wunused-but$
/usr/lib/libpq.so: undefined reference to `SSL_get_error@OPENSSL_1.0.$
/usr/lib/libpq.so: undefined reference to `SSL_get_peer_certificate@O$
/usr/lib/libpq.so: undefined reference to `SSL_CTX_load_verify_locati$
/usr/lib/libpq.so: undefined reference to `SSL_set_ex_data@OPENSSL_1.$
/usr/lib/libpq.so: undefined reference to `SSL_use_certificate_file@O$
/usr/lib/libpq.so: undefined reference to `ENGINE_free@OPENSSL_1.0.0'
/usr/lib/libpq.so: undefined reference to `SSL_write@OPENSSL_1.0.0'
/usr/lib/libpq.so: undefined reference to `ERR_get_error@OPENSSL_1.0.$
/usr/lib/libpq.so: undefined reference to `ENGINE_by_id@OPENSSL_1.0.0'
/usr/lib/libpq.so: undefined reference to `SSL_use_PrivateKey@OPENSSL$
/usr/lib/libpq.so: undefined reference to `X509_get_subject_name@OPEN$
/usr/lib/libpq.so: undefined reference to `ENGINE_init@OPENSSL_1.0.0'
/usr/lib/libpq.so: undefined reference to `SSL_load_error_strings@OPE$
/usr/lib/libpq.so: undefined reference to `X509_STORE_set_flags@OPENS$
/usr/lib/libpq.so: undefined reference to `SSL_new@OPENSSL_1.0.0' 
```

然后我使用指定的 OpenSSL 目录重新安装了 ruby

```
openssl version -d
OPENSSLDIR: "/usr/lib/ssl"
rvm reinstall 2.0.0 --with-openssl-dir=/usr/lib/ssl 
```

而且还是同样的问题。

尝试使用**--with-pg-config**标志安装 gem。同样的问题。

尝试了许多网站上常见的解决方法

```
mv $rvm_path/usr/lib $rvm_path/usr/rvm_lib
gem install pg
mv $rvm_path/usr/rvm_lib $rvm_path/usr/lib 
```

不过这次的错误有所不同。

**宝石安装 pg**

```
Error loading RubyGems plugin "/usr/local/rvm/gems/ruby-2.0.0-p0@global/gems/rubygems-bundler-1.1.1/lib/rubygems_plugin.rb": /usr/local/rvm/rubies/ruby-2.0.0-p0/lib/ruby/2.0.0/x86_64-linux/openssl.so: undefined symbol: SSLv2_method - /usr/local/rvm/rubies/ruby-2.0.0-p0/lib/ruby/2.0.0/x86_64-linux/openssl.so (LoadError)
ERROR:  Loading command: install (LoadError)
    /usr/local/rvm/rubies/ruby-2.0.0-p0/lib/ruby/2.0.0/x86_64-linux/openssl.so: undefined symbol: SSLv2_method - /usr/local/rvm/rubies/ruby-2.0.0-p0/lib/ruby/2.0.0/x86_64-linux/openssl.so
ERROR:  While executing gem ... (NoMethodError)
    undefined method `invoke_with_build_args' for nil:NilClass 
```

假设它仍然试图从 Ruby 目录中获取**openssl.so** - 问题在于 Ruby 使用了错误的**openssl.so**文件。但事实是，我已经用**--with-openssl-dir**标志重新编译了它。

对此有何建议？在过去的 10 个小时里，我一直在尝试我能找到的所有解决方法。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-03T14:59:05.543

为什么它总是发生？只要您在这里发布您的问题，您就可以自行解决。

解决方案很简单——我在重新安装 ruby​​ 时错过了“ **-- ”。**

```
openssl version -d
OPENSSLDIR: "/usr/lib/ssl"
rvm reinstall 2.0.0 -- --with-openssl-dir=/usr/lib/ssl 
```

这解决了问题。希望它会帮助别人。

# backbone.js - 使用 yuidocs 记录主干代码

> ID：15186927
> 
> 赞同：1
> 
> 时间：2013-03-03T14:54:53.590
> 
> 标签：backbone.js, documentation, yui, documentation-generation

我正在努力弄清楚如何记录大型代码库。我们有一系列组件，其中大部分都有 Backbone 模型、视图和集合。YUIdocs 已被选为我们的标准工具。我想确保文档在未来确实有用，并且对行业中可能已经确定的一些标准不太确定。

我如何记录以下内容？

*   一个简单的骨干模型：

    ```
    define(['backbone'], function (Backbone) {
        return Backbone.Model.extend({
            defaults: {
                foo: '',
                bar: '',
                baz: ''
            }
        });
    }); 
    ```

*   一个接受设置对象的构造函数，该对象被合并到模块的默认值中。似乎 YUIdocs 中有一个 @default 参数，但它似乎不支持一个对象——也许我可以在这里做一些不同的事情？

    ```
    initialize: function (settings) {
        this.settings = _.extend(this.settings, settings);
    } 
    ```

*   标准主干参数，例如事件和模型。

    ```
    events: {
        'click #foo' : 'bar'
    }

    model: foo 
    ```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-03T16:05:02.027

对于简单的主干模型，您将记录返回的对象。在 YUIDoc 中，它被称为“类”。它也是可实例化的（您使用“new”关键字）并且它扩展了其他一些对象。因此，你会这样开始：

```
/**
 * A customized Backbone.Model that represents...
 * @class MyModel
 * @constructor
 * @extends Backbone.Model
 */
return Backbone.Model.extend({ 
```

默认属性 foo、bar 和 baz，您可以使用 @attribute 记录。属性实际上是 YUI 中一个非常专业的概念，但是当你退后一点时，Backbone Model 的属性在概念上是相似的。所以我认为借用这个术语是有道理的。否则，您可以使用@property。

```
/**
 * Indicates that...
 *
 * @attribute rendered
 * @default ''
 * @type String
 */
 foo: '' 
```

对于接受设置对象的构造函数，并且该设置对象具有某些默认值，请参阅 Y.Router 如何记录的源：http: [//yuilibrary.com/yui/docs/api/files/app_js_router.js.html #l38](http://yuilibrary.com/yui/docs/api/files/app_js_router.js.html#l38)

对于事件和模型等标准 Backbone 参数，请使用 @property。对于事件，您需要用简单的英语描述它设置了哪些事件侦听器。

祝你好运，如果你使用 IRC，如果你有关于 YUIDoc 的问题，请随时在 freenode.net 上的#yui 留言！

# ios - 如何持久化我的视图控制器

> ID：15186932
> 
> 赞同：0
> 
> 时间：2013-03-03T14:55:17.063
> 
> 标签：ios, objective-c, uiviewcontroller, state, persist

当我离开 View Controller 时，我使用：

```
[self dismissViewControllerAnimated:YES completion:nil]; 
```

这会“破坏”视图控制器及其状态吗？

我想将视图控制器保持在它所处的状态，滚动视图和按钮等，然后在我按下处理进入 VC 的父级按钮时返回到它。我在父级中使用这样的代码：

```
- (void)handleDoubleTap:(UITapGestureRecognizer *)doubleTap {

realTaggingScreen = [[TaggingScreenViewController alloc]init];
realTaggingScreen.topLeftCornerImage = self.imageToPresent;
realTaggingScreen.salescallDate = self.salescallDate;
realTaggingScreen.shopName = self.shopName;
realTaggingScreen.refToThumbnailsVC = self.presentingThumbnailViewController;
realTaggingScreen.modalTransitionStyle = UIModalTransitionStyleFlipHorizontal;
[self presentModalViewController:realTaggingScreen animated:YES];

} 
```

由于 alloc init， 我知道这**显然是错误的。**

我试图给我的标记屏幕一个对父级的引用和一个名为 iExist 的 BOOL 以及给我的父级一个对标记屏幕的引用，然后如果 BOOL 为真，则打开对子级的引用，否则 alloc init 等但是这个没用。我不禁认为这不是正确的方法......

我还想在 NSDocuments 目录中保存某些对象并在应用程序运行之间加载它们等，但我知道该怎么做。现在我会找到一种让 VC 状态暂时保持的方法

任何帮助都会很好。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-03T15:08:58.050

当您关闭视图控制器时，它会被释放。

当然，除非这为您提供了答案，否则您会在某处保留一些强烈的参考。

AppDelegate 可能是保存引用或调用视图控制器的好位置。取决于你想如何处理它。如果您保留了一个强大的参考以供以后使用，那么请记住您只是在下次展示它，但不要再次创建 (alloc,init) 它。

如果您保留参考并重复使用它，请确保一次仅显示一次。例如。您不应该让您的应用程序（委托）呈现控制器 A，该控制器 A 呈现控制器 B，该控制器 B 再次呈现 B。如果你想这样做，那么你应该在 C 中创建 B 的第二个实例并呈现这个 B2。

（您可以在其他地方再次显示视图，这将使其从旧位置移动到新位置，但您不应该在视图层次结构中的视图控制器中执行此操作 - 无论您是呈现还是推送它们。）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-03T15:11:31.793

如果您使用 ARC，如果没有指针指向它，视图控制器将被释放。

我建议创建一个指向 realTaggingScreen 实例的强指针

就像是

```
@property(nonatomic, strong)TaggingScreenViewController *realTaggingScreen; 
```

如果我得到你想要做的事情，你不需要 BOOL iExist。您可以使用

```
self.realTaggingScreen = nil; 
```

if you don't need it to persist anymore then you can check if you need to allocate a new instance using

```
 if(self.realTaggingScreen) {
//initialize...
} 
```

# eclipse - Eclipse 和 Tomcat 不能作为服务器运行

> ID：15186935
> 
> 赞同：2
> 
> 时间：2013-03-03T14:55:25.843
> 
> 标签：eclipse, tomcat, servlets

我已经安装了 Tomcat 和 Eclipse Juno（作为 androids ADT 下载）。我在 Eclipse 中创建了一个服务器，没有任何错误，当我尝试将我的 Java servlet 作为服务器运行时，Eclipse 提示我选择要使用的服务器并输入服务器名称。问题是我应该放置服务器名称的字段被锁定。我可以把光标放在那里，但我不能输入任何东西。由于该字段为空，我无法继续运行我的 Servlet。我试图编辑我的 org.eclipse.jst.server.tomcat.core.prefs 和我的 org.eclipse.wst.server.core.prefs 文件，但我在 ~/workspace/.metadata 中找不到任何这些文件/.plugins/org.eclipse.core.runtime/.settings/。这是一个 Eclipse 错误，如何使用我的 Tomcat 设置运行我的 servlet？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T07:38:42.800

进入 Eclipse --> Preferences --> Servers --> Runtime Environment 。

从那里删除 Tomcat 版本，然后通过 new --> Servers 重新添加服务器。

损坏的服务器配置文件可能会发生这种情况。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-31T10:33:18.310

我的回答来得太晚了，但无论如何，这对那些在同样问题上苦苦挣扎并通过这个问题的人来说是有帮助的。如果您在 linux 上使用 eclipse，请尝试以 root 身份运行它，例如

```
sudo your/path/to/ecpise/folder/eclipse 
```

并重复您的解决方法。

# ruby-on-rails - Rails 测试需要登录的操作（使用 cookie）

> ID：15186937
> 
> 赞同：2
> 
> 时间：2013-03-03T14:55:29.650
> 
> 标签：ruby-on-rails

我有一个控制器，其索引操作受密码保护：

```
class Admin::UsersController < Admin::BaseController
  before_action :signed_in_user

  def index
    @users = User.all
  end
end 
```

我有一个测试：

```
test "should get index" do
  get :index
  assert_response :success
  assert_not_nil assigns(:users)
end 
```

测试失败，因为用户在运行时被重定向到登录页面：

```
def signed_in_user
  unless signed_in?      
    redirect_to signin_url, notice: "Please sign in."
  end
end

def signed_in?
  !current_user.nil?
end

def current_user
  @current_user ||= User.find_by_remember_token(cookies[:remember_token])
end

def current_user=(user)
  @current_user = user
end

def sign_in(user)
  cookies.permanent[:remember_token] = user.remember_token
  self.current_user = user
end

def current_user?(user)
  user == current_user
end 
```

我知道我可以使用 capybara 访问登录页面并登录测试用户，但根据我的经验，这通常会导致测试套件需要很长时间才能运行，所以我希望可能有一种快速而肮脏的方法来做到这一点使用会话：

```
test "should get index" do
  get :index, { }, { remember_token: users(:one).remember_token }
  assert_response :success
  assert_not_nil assigns(:users)
end

# I also tried the following:
test "should get index" do
  get :index, { }, { current_user: users(:one) }
  assert_response :success
  assert_not_nil assigns(:users)
end 
```

我希望上面的内容能神奇地让我的测试用户登录，但没有，我们仍然被重定向到测试失败的登录页面。

做这种事情的正确方法是什么？它快把我逼疯了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T16:35:17.317

已修复，感谢[这个问题](https://stackoverflow.com/questions/3577167/how-to-test-cookies-state-in-functional-tests-in-rails)。我只需要：

```
setup do
  @user = users(:one)
  # since I am using cookies, I just need to set them here
  @request.cookies['remember_token'] = @user.remember_token
end

# no need to pass anything to the get method
test "should get index" do
  get :index
  assert_response :success
  assert_not_nil assigns(:users)
end 
```

# .htaccess - .htaccess RewriteRule 使 2 个 URL 可用于同一页面

> ID：15186940
> 
> 赞同：3
> 
> 时间：2013-03-03T14:55:43.893
> 
> 标签：.htaccess, rewrite

一段时间以来，我一直在尝试修复我网站的 url 结构。

我需要的只是每个 URL：

```
/main.php?mod=PageNameHere 
```

被重写并`301`重定向到：

```
/PageNameHere.html 
```

我已经尝试过这个 RewriteRule：

```
RewriteRule ^([^-]*)\.html$ /main.php?mod=$1 [L] 
```

但它所做的只是使页面在两个 URL 上都可用。我的导航仍然链接到 main.php?mod=PageNameHere URL，所以我需要一种强制它进行 301 重定向的方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T20:25:28.483

您需要有 2 个单独的重写规则：

1.  对于内部转发`/PageNameHere.html`到`/main.php?mod=PageNameHere`，与您已有的非常相似。
2.  对于外部重定向`/main.php?mod=PageNameHere`到`/PageNameHere.html`301，你目前没有的东西。

这是应该为您工作的代码：

```
Options +FollowSymLinks -MultiViews
# Turn mod_rewrite on
RewriteEngine On
RewriteBase /

# 1\. for internal forwarding
RewriteRule ^([^.]*)\.html$ /main.php?mod=$1 [L,NC,QSA]

# 2\. for external redirection
RewriteCond %{THE_REQUEST} ^[A-Z]{3,}\s/+main\.php\?mod=([^\s&]+) [NC]
RewriteRule ^ /%1? [L,R=301] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T20:02:30.647

告诉 apache 到`Rewrite 301`. 否则它只是*映射*url

```
RewriteRule ^([^-]*)\.html$ /main.php?mod=$1 [R=301,L] 
```

# c# - 使用 using-keyword 的这两种实现之间的差异

> ID：15186945
> 
> 赞同：1
> 
> 时间：2013-03-03T14:56:24.800
> 
> 标签：c#, using, unmanagedresources

仅作为创建 MD5 哈希的示例，微软提供了以下代码示例：

## MSDN 代码

```
// in Helpers class
public static string GetMd5Hash(MD5 md5Hash, string input)
{
    byte[] data = md5Hash.ComputeHash(Encoding.UTF8.GetBytes(input));
    StringBuilder sBuilder = new StringBuilder(); 
    for (int i = 0; i < data.Length; i++)
    {
        sBuilder.Append(data[i].ToString("x2"));
    }
    return sBuilder.ToString();
} 
```

并且使用它会像这样完成

```
public string CreateHash(string str)
{
    using (var md5Hash = MD5.Create())
    {
        return Helpers.GetMd5Hash(md5Hash, str);
    }
} 
```

## 我的代码

我认为更改 Microsoft 为此提供的代码会使帮助方法的可重用性变得更容易：

```
// in Helpers class
public static string GetMd5Hash(string input)
{
    using (var md5Hash = MD5.Create())
    {
        byte[] data = md5Hash.ComputeHash(Encoding.UTF8.GetBytes(input));
        StringBuilder sBuilder = new StringBuilder(); 
        for (int i = 0; i < data.Length; i++)
        {
            sBuilder.Append(data[i].ToString("x2"));
        }
        return sBuilder.ToString();
    }
} 
```

因此，重用它会创建更少的代码行：

```
public string CreateHash(string str)
{
    return Helpers.GetMd5Hash(str);
} 
```

那么不像我在第二个例子中那样做的目的是什么？我最初的想法是，使用 MSDN 提供的代码的程序员*总是*会意识到他们使用*非托管资源*的事实（这是正确的术语吗？），而如果他们使用我的实现，他们就不会。

还有其他想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-03T15:02:46.153

`md5Hash`如果你想在范围内重用 MSDN 代码会更有效率`CreateHash`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-03T15:09:14.603

[这个](http://msdn.microsoft.com/en-us/library/s02tk69a.aspx)来自 msdn 的示例更加通用，因为类上有不同的重载`Create`，`MD5`允许使用不同的哈希算法。

注意他们是如何使用它的：使用这个函数的任何人都可以提供任何 MD5 类的实例，并且它会起作用。当然，正如我在评论中所说，他们的样品通常远非完美，尽管已经放入其中，但我并没有想太多

# php - 通过 PHP 表单上传文件，文件名的 UTF 编码错误

> ID：15186946
> 
> 赞同：4
> 
> 时间：2013-03-03T14:56:59.327
> 
> 标签：php, file-upload, utf-8

除了当我上传一个文件并给它自己的名字（通过 html 表单中的文本字段）“Åäöô - KARL”之外，一切都工作得很好。

我为我的网站制作了一个自定义文件上传/处理程序/cms，除了文件上传之外，一切正常。

当我通过我的 ftp 程序直接查看文件上传目录时，文件名突然变成了“Ã…Ã¤Ã¶Ã´ - KARL”。

*   `<meta charset="UTF-8" />`我在每个页面的开头运行 html5
*   我在使用没有 BOM 的 UTF-8 编写代码时进行编码

我试过`iconv()`了，有什么我遗漏的吗？我怀疑它在 html 表单`$_POST['name_of_file']`和运行命令之间

```
move_uploaded_file($_FILES["file"]["tmp_name"], "upload/" . $_POST['name_of_file']) 
```

进展：我实际上做了一个“utf8_decode”，现在文件被保存为正确的名称，虽然现在它在我的网站上显示很奇怪，所以当我想显示它时我必须对其进行编码。

无论如何要绕过必须在任何地方输入 utf8_encode 和 utf8_decode ？

对于其他人，这篇文章可能会有所帮助：[如何处理无效 UTF-8 字符的用户输入？](https://stackoverflow.com/questions/3715264/how-to-handle-user-input-of-invalid-utf-8-characters/3742879#3742879)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-03T15:02:36.883

众所周知，PHP 文件系统函数会破坏非 ASCII 文件名。

我建议您剥离/转换所有非 ASCII 字符，或者，如果不可能，请尝试`utf8_[en/de]code`.

另请参阅[如何处理无效 UTF-8 字符的用户输入？](https://stackoverflow.com/questions/3715264/how-to-handle-user-input-of-invalid-utf-8-characters/3742879#3742879).

# javascript - 如何制作当有人喜欢或评论我们的帖子时出现的facebook通知框？

> ID：15186947
> 
> 赞同：1
> 
> 时间：2013-03-03T14:57:01.427
> 
> 标签：javascript, jquery, facebook

晚上好，我只想知道用于制作弹出框的技术名称，当有人喜欢或评论我们的帖子时出现并在大约 3 秒后消失，是否可以使用 JavaScript 或 JQuery 制作它，如果那有可能请你给我一个例子或一个链接到可以证明这一点的东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T15:47:19.457

来自维基百科：

`Comet is a web application model in which a long-held HTTP request allows a web server to push data to a browser, without the browser explicitly requesting it.`

搜索`COMET`，或者您可以使用服务器端 JavaScript，例如`backbone.js`或`nod.js`

更多关于彗星：

```
http://www.zeitoun.net/articles/comet_and_php/start
http://en.wikipedia.org/wiki/Comet_%28programming%29
http://cometd.org/search/node/jquery 
```

更多关于 Node.js

```
http://nodejs.org 
```

更多关于backbone.js

```
http://backbonejs.org 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T15:50:58.243

出现/消失...很容易处理`javascript`/ `jquery`...

实际的通知......来自服务器，它是一种推送技术......

你可以找ajax push（一种方法是comet）

因为`HTTP`是基于从客户端到服务器的请求...从服务器向客户端推送一些东西有点复杂...想象一下像“这个页面只是展示我的产品但我不能展示给你只要你愿意！”

在此之前，仅使用通过端口连接到服务器的类似或小页面`HTML5`的变通方法是不可能的...但是现在您可以使用...`Ajax Push``flash objects``socket``WebSockets`

一个`ajax push`例子在这里： http: [//www.primefaces.org/showcase/push/chat.jsf](http://www.primefaces.org/showcase/push/chat.jsf)

# r - 将变量与多个 data.frame 属性相结合

> ID：15186948
> 
> 赞同：-1
> 
> 时间：2013-03-03T14:57:08.483
> 
> 标签：r

我有多个具有许多 data.frame 属性的变量，如下所示：

```
> df1
$ML1
  Q2 Q3
1  1  1
2  0  0
3  0  1
4  1  1
5  0  0

$ML2
  Q4 Q5
1  0  1
2  1  1
3  1  0
4  1  0
5  0  0

> df2
$ML2
   Q4 Q5
1   1  1
2   1  0
3   1  0
4   0  0
5   0  0
6   1  0
7   1  1
8   0  1
9   1  1
10  0  1

$ML1
   Q2 Q3
1   0  0
2   1  1
3   0  1
4   1  0
5   0  1
6   1  0
7   0  1
8   1  0
9   1  1
10  0  0 
```

我想将它们组合成一个带有 data.frames 的变量，如下所示：

```
> dfAll
$ML1
  Q2 Q3
1  1  1
2  0  0
3  0  1
4  1  1
5  0  0
6  0  0
7  1  1
8  0  1
9  1  0
10 0  1
11 1  0
12 0  1
13 1  0
14 1  1
15 0  0

$ML2
  Q4 Q5
1  0  1
2  1  1
3  1  0
4  1  0
5  0  0
6  1  1
7  1  0
8  1  0
9  0  0
10 0  0
11 1  0
12 1  1
13 0  1
14 1  1
15 0  1 
```

我已经尝试过`rbind(df1, df2)`，但这会创建一个看起来像这样的变量：

```
> rbind(df1, df2)[,"ML1"]
$df1
  Q2 Q3
1  1  1
2  0  0
3  0  1
4  1  1
5  0  0

$df2
   Q4 Q5
1   1  1
2   1  0
3   1  0
4   0  0
5   0  0
6   1  0
7   1  1
8   0  1
9   1  1
10  0  1 
```

因此，这些行不会在同一个 data.frame 中相互附加

我还需要做什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-03T17:12:34.370

这假设，如在您的示例中，您的所有数据帧列表（df1、df2 等）都是一致的，特别是如果 df1 具有元素“foo”，则 df2 也具有元素“foo”，并且 df1$foo和 df2$foo 是`rbind`兼容的数据帧。

```
# create two sample lists of data.frames
df1 <- lapply(list(ML1=1:2, ML2=3:4), function(i) head(iris[i]))
df2 <- lapply(list(ML2=3:4, ML1=1:2), function(i) tail(iris[i]))
# store them in a list for easier reference
dfList <- list(df1, df2)
# for each data frame name, extract and rbind the corresponding data 
dfAll <- sapply(names(dfList[[1]]), function(col) do.call("rbind", 
    lapply(dfList, "[[", col)), simplify=FALSE) 
```

这在精神上与其他答案相似，但会产生问题中提出的输出结构：

```
> dfAll
$ML1
    Sepal.Length Sepal.Width
1            5.1         3.5
2            4.9         3.0
3            4.7         3.2
4            4.6         3.1
5            5.0         3.6
6            5.4         3.9
145          6.7         3.3
146          6.7         3.0
147          6.3         2.5
148          6.5         3.0
149          6.2         3.4
150          5.9         3.0

$ML2
    Petal.Length Petal.Width
1            1.4         0.2
2            1.4         0.2
3            1.3         0.2
4            1.5         0.2
5            1.4         0.2
6            1.7         0.4
145          5.7         2.5
146          5.2         2.3
147          5.0         1.9
148          5.2         2.0
149          5.4         2.3
150          5.1         1.8 
```

顺便说一句，假设这是更大工作流程的一部分，如果可能的话，我会修改上游代码，以便`dfList`从一开始就组装数据帧，而不是作为随后组合的单个命名对象。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-03T16:23:19.210

首先要注意的是（看起来）你没有两个 data.frames。您拥有的是两个列表，每个列表都包含两个 data.frame。一个名为 ML1，另一个名为 ML2。

```
#Example data for the purpose of being reproducible
df1 <- list(ML1=data.frame(Q2=1:5,Q3=LETTERS[1:5]),ML2=data.frame(Q4=6:10,Q5=LETTERS[6:10]))
df2 <- list(ML1=data.frame(Q2=11:15,Q3=LETTERS[11:15]),ML2=data.frame(Q4=16:24,Q5=LETTERS[16:24]))
# Lets look at the structure, just for educational purposes
str(df1)
str(df2)
# Okay, now how can we bind those lists together?  
# It turns out, we just use c because lists are really just vectors of type list.
list.all <- c(df1,df2)
# Now that all of the data is in one structure, we have hope.
# The rbindListsByName function does the heavy lifting.  
# Notice we couldn't just provide "nameToBind" otherwise it would just grab the first list with a matching name.  
#We needed a logical to pick out the lists we actually wanted.
rbindListsByName <- function(nameToBind,inputList) {
   do.call("rbind",inputList[names(inputList)==nameToBind])
}
dfAll <- sapply(names(df1),rbindListsByName,inputList=list.all,simplify=FALSE) 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-03T16:21:56.997

我会试一试。但是，您的问题仍然无法重现。

```
#Here I try to recreate your objects:
ML1 <- read.table(text="Q2 Q3
1  1  1
2  0  0
3  0  1
4  1  1
5  0  0",header=TRUE)

ML2 <- read.table(text="Q4 Q5
1  0  1
2  1  1
3  1  0
4  1  0
5  0  0",header=TRUE)

df1 <- list(ML1=ML1,ML2=ML2)

ML2 <- read.table(text="Q4 Q5
1   1  1
2   1  0
3   1  0
4   0  0
5   0  0
6   1  0
7   1  1
8   0  1
9   1  1
10  0  1",header=TRUE)

ML1 <- read.table(text="Q2 Q3
1   0  0
2   1  1
3   0  1
4   1  0
5   0  1
6   1  0
7   0  1
8   1  0
9   1  1
10  0  0",header=TRUE)

df2 <- list(ML2=ML2,ML1=ML1) 
```

我看不出有理由保持`ML1`和`ML2`分开。因此，我`cbind`他们。

```
#combine the lists in a list
mylist <- list(df1,df2)

#cbind the data.frames in each sublist
mylist <- lapply(mylist,function(x) do.call("cbind",x))
#rbind the resulting data.frames
do.call("rbind",mylist)

#   ML1.Q2 ML1.Q3 ML2.Q4 ML2.Q5
#1       1      1      0      1
#2       0      0      1      1
#3       0      1      1      0
#</snip> 
```

# ruby-on-rails-3 - Rails 和 MongoID webapp 无法保存数据

> ID：15186950
> 
> 赞同：2
> 
> 时间：2013-03-03T14:57:34.847
> 
> 标签：ruby-on-rails-3, redis, mongoid, sidekiq

我在 digitalocean 上托管了一个 ruby​​ on rails webapp，它通过 mongoID 将其数据存储在 mongo db 上。

我正在通过 sidekiq 工作人员上的通用 API 导入一些数据，但随后我尝试创建一个对象，例如：

```
array_of_consumptions = API.consumptions(id)

array_of_consumptions.each do |d|
    user.array_of_consumptions << d
end 
```

我可以将这些数据保存在本地开发中，但它在生产中具有随机行为。例如，如果我导入 1000 个消费，我的 Web 应用程序可能只会保存 20 个，并且没有日志报告问题。

我认为这个问题与 sidekiq 有关（甚至在本地工作正常）所以我将它切换到另一个像 resque 但问题仍然存在。我检查了保存对象的验证，它们在“保存”后都是有效的。

这可能与连接到 mongodb 的事务或问题有关吗？

# algorithm - 一种在线性时间内对数组进行排序的算法

> ID：15186953
> 
> 赞同：4
> 
> 时间：2013-03-03T14:58:04.563
> 
> 标签：algorithm, language-agnostic

我正在阅读 Skiena 的算法设计手册，但无法解决这个问题。

假设数组 A 由 n 个元素组成，每个元素是红色、白色或蓝色。我们寻求对元素进行排序，使所有的红色排在所有白色之前，所有白色排在所有蓝色之前。键上允许的唯一操作是

```
Examine(A,i) { report the color of the ith element of A.
Swap(A,i,j) { swap the ith element of A with the jth element. 
```

找到一个正确有效的红白蓝排序算法。有一个线性时间的解决方案。

我尝试使用快速排序，并且在 3 个枢轴上，我应该能够解决它，但是当我在快速排序中看到重复项时，我不知道该怎么办。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-03T15:09:23.933

维护两个指针：一个最初指向 0 的红色指针和一个指向数组最后一个元素的蓝色指针。

`Examine`现在使用函数从左到右扫描数组。

*   每次遇到红色元素时，将其（使用`Swap`函数）与当前红色指针交换并递增红色指针。
*   同样，每次遇到蓝色元素时，将其与当前蓝色指针交换并减少蓝色指针。
*   遇到白色元素时增加当前指针。
*   当当前指针穿过蓝色指针时停止。

现在应该根据需要对数组进行排序。

这就是[荷兰国旗问题](https://en.wikipedia.org/wiki/Dutch_national_flag_problem)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-03T15:08:46.377

这其实是 Dijkstra 提出的一个非常有名的问题，被称为[荷兰国旗问题](http://en.wikipedia.org/wiki/Dutch_national_flag_problem)。

上面链接的维基百科对如何解决这个问题和其他类似问题给出了相当不错的说明。

也可以应用 3 路快速排序来解决此问题。[本演示文稿](http://fpl.cs.depaul.edu/jriely/class/300/publish/extras/princeton/23Quicksort.pdf)应该让您很好地了解如何执行此操作（相关内容从第 37 页开始）。此外，它确实在 O(n) 中工作，因为不同键的数量是一个常数，3（如第 43 页所述）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-03T15:05:29.277

一个非常简单的线性时间算法是：

1.  在数组中循环一次，找到红色、白色和蓝色的计数为 rcount、wcount、bcount。

2.  有三个从 0 开始的计数器，rcount, (rcount + wcount)。称它们为 rcounter、wcounter 和 bcounter。

3.  对于每个计数器，递增，直到获得不适合该范围的颜色

4.  从 0 开始，每当你遇到一种颜色：如果颜色为红色且（计数器 < rcount），则增加 rcount 并继续（同样适用于白色和蓝色，具体取决于范围） b。如果颜色为白色，则与 wcounter 和 wcounter++ c 交换。如果颜色为蓝色，则与 bcounter 和 bcounter++ 交换

当循环结束时，你有你的数组。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-03T15:10:54.947

这不是一个真正的排序问题。这是一个分组问题。

遍历列表，计算红色、白色和蓝色元素的数量。现在您知道了解决方案的确切结构，例如：

XXXXYYYYZZZZZZZZZ

其中 X 为红色，Y 为白色，Z 为蓝色。

现在创建三个指针：一个在 X 开头的位置，一个在 Y 的开头，一个在 A 中 Z 的开头。

推进每个指针，直到它在其集合中的第一个元素是错误的。例如，如果这是 A：

XYXXYYXYZZZZZZZZZ

我

我们将 X 指针 I 推进到第二个位置（索引 1），因为该元素不合适。

如果你对每个指针都这样做，你就会知道三个指针中的每一个都指向一个不合适的元素。然后遍历列表。每当你发现一个元素不合适时，将它与其对应的指针交换，即如果你在 Y 中找到一个 X，将它与其 Y 指针交换，然后递增该指针 (Y) 直到它指向不合适的东西再次。

继续直到数组排序。

由于您遍历列表一次（n 个操作）以获取结构，然后每个指针最多将遍历列表一次（4 个指针 → 4n），因此您的总最大运行时间将为 5n，即 O(n)。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-02-07T16:31:06.967

我浏览了 Skiena 的书，也看到了这个问题，这是我的解决方案。

```
#include <stdio.h>

//swap the ith element of A with the jth element.
void swap(char arr[], int i, int j) {
    char temp;
    temp = arr[i];
    arr[i] = arr[j];
    arr[j] = temp;
    return;
}

int partition_color(char arr[], int low, int high, char color)
{
    int i;          // counter
    char p;          // pivot element
    int firsthing; // divider position for pivot

    p = color;          // choose the pivot element
    firsthing = high; // divider position for pivot element

    for (i = low; i < firsthing; i++) {
        if (arr[i] == color) {
            swap(arr, i, firsthing);
            firsthing--;
        }
    }

    return(firsthing);
}

void red_white_blue_sorting(char arr[], int n) {
    int pos;
    pos = partition_color(arr, 0, n, 'b');
    partition_color(arr, 0, pos, 'w');
    return;
}

int main() {

    char arr[] = {'r', 'b', 'r', 'w', 'b', 'w', 'b', 'r', 'r'};
    int n = sizeof(arr) / sizeof(arr[0]);

    red_white_blue_sorting(arr, n);
    for (int i = 0; i < n; i++)
        printf("%c ", arr[i]);

    printf("\n");
    return(0);
} 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2015-06-09T10:22:33.800

我正在浏览 Skiena 的书，看到了这个问题。

我得到了 O(2n) 的解决方案：

假设 A = [B,R,W,R,W,B]

1.  首先遍历数组并以 B 为轴进行分区，这样，所有 R 或 W 的值都将被推到数组的前面。

现在A将是；['R', 'W', 'R', 'W', 'B', 'B'] => O(n)

2.  再次通过 A，以 W 为中心，这样所有 R 的值都将被推到数组的前面。我们可以忽略 B，因为它们已经到位。

结果：['R', 'R', 'W', 'W', 'B', 'B'] => O(2n)

这是一个线性解决方案。

这是正确的方法吗？

# windows - cygwin中的节点解释器KO？

> ID：15186961
> 
> 赞同：1
> 
> 时间：2013-03-03T14:58:57.330
> 
> 标签：windows, node.js, cygwin

节点工作正常，但节点解释器仅在 Windows 命令行工具（或“PowerShell”）中启动，而不是在 Cygwin（cygwin.bat 或通过 SSH 连接的腻子）中启动。

我没有错误，解释器只是安静地离开，返回码为 0。

我使用的是 Windows 8 / 64 位，并且安装了最新的 node.js MSI。

有人会有线索吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T15:04:30.383

node.js 不再支持 Cygwin。[在这里](https://github.com/joyent/node/wiki/Building-node.js-on-Cygwin-%28Windows%29)检查。在 Cygwin 上编译的最新版本是 0.4.12。

除了 node.js 在 Windows 中本机支持。不要在 Cygwin 上使用 node.js。

# java - 在不知道密钥的情况下从 json 文件填充数组

> ID：15186962
> 
> 赞同：1
> 
> 时间：2013-03-03T14:59:01.940
> 
> 标签：java, simplejson

我有以下 Json 文件，我想创建数组列表，**我不知道键名**（如人员、姓氏等）它可以是许多实体，如雇员用户等，但文件的结构必须**完全相同**，我怎样才能做到这一点 ？

该文件是

```
{
    "Person": [
        {
            "name": "Peter",
            "lastname": "ta",
            "age": 43,
            "sex": "male"
        },
        {
            "name": "Zara",
            "lastname": "treg",
            "age": 25,
            "sex": "female"
        }
    ]
} 
```

我需要的是创建这样的数组列表

```
person ,name,peter ,lastname,ta,age,43,sex,male
person ,name,zara ,lastname,treg,age,23,sex,female 
```

……

我从以下代码开始获取文件，但由于我不知道密钥的名称，所以我不知道如何继续。

```
JSONObject jsonObject= (JSONObject) parser.parse(new FileReader("C:\\General\\jsonperson.txt")); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-03T15:10:46.067

您可以使用

```
String[] keyNames= JSONObject.getNames(jsonObject); 
```

获取键的名称。 [Javadoc](http://www.json.org/javadoc/org/json/JSONObject.html#getNames(org.json.JSONObject))

使用它，您可以使用[getJSONObject获取值](http://www.json.org/javadoc/org/json/JSONObject.html#getJSONObject(java.lang.String))

循环这些你可以构造你正在寻找的数组。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-03T15:08:57.897

检查此页面上的示例 4：[https ://code.google.com/p/json-simple/wiki/DecodingExamples](https://code.google.com/p/json-simple/wiki/DecodingExamples)

具体来说，这部分：

```
Map json = (Map)parser.parse(jsonText, containerFactory);
Iterator iter = json.entrySet().iterator();
System.out.println("==iterate result==");
while(iter.hasNext()){
  Map.Entry entry = (Map.Entry)iter.next();
  System.out.println(entry.getKey() + "=>" + entry.getValue());
}

System.out.println("==toJSONString()==");
System.out.println(JSONValue.toJSONString(json)); 
```

这就是您可以迭代 a 的条目的方式`JSONObject`。顺便说一句，对于这个库，如果它是我认为您正在使用的库，那么 a`JSONObject`只是 a [`java.util.Map`](http://docs.oracle.com/javase/6/docs/api/java/util/Map.html)，您可以使用它的所有方法——这就是为什么这个示例可以将解析结果转换为 a 的原因`Map`。

此库的所有 JSON <-> Java 对象映射：[https ://code.google.com/p/json-simple/wiki/MappingBetweenJSONAndJavaEntities](https://code.google.com/p/json-simple/wiki/MappingBetweenJSONAndJavaEntities)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-03T15:40:09.737

你也可以试试下面的代码：

```
public void performExecute() throws IOException {        
        JsonFactory jsonFactory = new JsonFactory(); 
        ObjectMapper objectMapper = new ObjectMapper(jsonFactory); 
        File file = new File("json.txt"); 
        TypeReference<HashMap<String, Object>> typeReference = new TypeReference<HashMap<String, Object>>() {}; 
        HashMap<String, Object> jsonMap = objectMapper.readValue(file, typeReference); 
        System.out.println("JSON DATA: " + jsonMap); 
    } 
```

确保 Jackson 库在您的类路径中，并且在使用代码时导入以下类：

```
import java.io.File;
import java.io.IOException;
import java.util.HashMap;

import org.codehaus.jackson.JsonFactory;
import org.codehaus.jackson.map.ObjectMapper;
import org.codehaus.jackson.type.TypeReference; 
```

# jquery - Webfont 在某些窗口大小处被截断

> ID：15186964
> 
> 赞同：2
> 
> 时间：2013-03-03T14:59:08.010
> 
> 标签：jquery, html, css, webfonts, typography

我遇到了问题，我不明白是什么原因造成的。我购买了一种很酷的字体用于响应式设计。在某些窗口大小下，字体会被窗口边缘截断。这是一个屏幕截图：
![在此处输入图像描述](../Images/2fabfc4db258a39a7ebab9670d16638c.png)

使用 CSS3 word-break 以某种方式解决了这个问题，但我不想在这种情况下使用它。还有其他选择吗？
我更喜欢仅使用 CSS 的选项，但如果涉及 JavaScript 或 jQuery，我也可以。

使用的字体是[来自 MyFonts 的 Armitage Black Italic](http://www.myfonts.com/fonts/dunwich/armitage/black-italic/)。这是该文本的CSS：

```
.text {
    font-weight: normal;
    margin-bottom: 24px;
    color: blue;
    font-family: ArmitageBlack-Italic, sans-serif;
    font-size: 3.75em;
    line-height: .85;
    text-transform: uppercase;
    letter-spacing: -0.29ex;
} 
```

只要足够大，可以使用任何字体重新创建问题。如果字体是斜体，那真的很明显。
文本位于此容器内：

```
.container {
    display: table;
    width: 100%;
    height: 100%;
    padding-top: 25px;
    background-color: grey;
    text-align: center;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T15:31:35.853

鉴于您的文本是斜体，文本将显示在它“是”的位置之外 - 并且使用大字体，问题会更糟。据我所知，解决这个问题的唯一方法是粗暴地添加填充:(

# azure - 如何向所有工作角色实例发送消息？

> ID：15186965
> 
> 赞同：3
> 
> 时间：2013-03-03T14:59:22.580
> 
> 标签：azure, azure-storage-queues

我使用 AzureQueue 在角色之间进行通信。我的消息，如“GoToMaintenanceMode”、“StopSendingEmails”、“DoNotAcceptRequests”等。但我意识到，当我有多个实例时，它不适用于我的场景，因为队列消息一次只显示一个实例。

所以我的问题是除了下面的选项之外，是否有一种优雅的方式来处理这个问题，比如 Role.AllInstances.Run() 等？

**我现在使用的方法：** 实例查看消息，将它自己的实例 ID 添加到消息中并将其放回队列，如果消息包含它自己的实例 ID，则不查看消息。

*PS我不想实现TCP侦听器，如果有本地解决方案，请询问。*

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-03T15:06:49.740

您可以使用 Windows Azure 服务总线主题/订阅而不是队列。它们支持多播（即多个接收器）。

可以在此处找到简短的操作指南

[http://www.windowsazure.com/en-us/develop/net/how-to-guides/service-bus-topics/](http://www.windowsazure.com/en-us/develop/net/how-to-guides/service-bus-topics/)

基本上，您的队列将成为一个主题，您的所有实例都将成为该主题的订阅者。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T18:52:40.363

因为您不想要 TCP 侦听器选项或服务总线选项。如何用多个队列扩展您的相同想法。Instance1 将从 Queue1 中读取，Instance2 将从 Queue2 中读取，依此类推。您唯一需要处理的是队列的数量以及同时向所有队列添加队列消息。

# jsf - 使用传递参数

> ID：15186966
> 
> 赞同：1
> 
> 时间：2013-03-03T14:59:38.420
> 
> 标签：jsf, jsf-2

我使用forEach将参数传递给函数，代码如下

```
 <c:forEach var="q" items="#{statusBean.commentList(p.statusId)}"> 
```

但是当我转移到时`<ui:repeat>`，参数没有被传递，这给了我一个例外。

```
<ui:repeat var="q" value="#{statusBean.commentList(p.statusId)}"> 
```

除了使用`<ui:repeat>`.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-03T16:16:27.077

你的问题毫无意义。没有“传递参数`<ui:repeat>`”，也没有“传递参数使用`<c:forEach>`”。您的话在某些特定的上下文中可能有意义 - 但缺少上下文。

您描述的两个标签做完全不同的事情：一个构建组件（`<ui:repeat>`），另一个预处理将用于构建视图的文档。区别是深刻的（从创建的 UI 的形状开始，评估绑定的时间，与保存的 GUI 状态的交互......）并且 - 从您提出问题的方式来看 - 您需要了解更多在你解决这个具体问题之前。没关系，慢慢来。

但我有一个诚实的建议：如果`<c:foreach>`对你有用（如果只是偶然），那就用它吧！不要试图用完全不同的东西（以及你没有得到的东西）来代替它。

# scala - 如何使用 Play 2.1/Scala 设置 cookie？

> ID：15186968
> 
> 赞同：2
> 
> 时间：2013-03-03T14:59:44.380
> 
> 标签：scala, cookies, playframework, playframework-2.1

[Java 文档](http://www.playframework.com/documentation/2.1.0/JavaResponse)展示了如何使用 Java 设置 cookie：

```
response().setCookie("theme", "blue"); 
```

我如何对 scala 做同样的事情？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-03-03T15:05:59.420

```
Ok("Hello").withCookies(Cookie("key1", "value"), Cookie("key2", "value2")) 
```

# java - Java：JSONParseException

> ID：15186969
> 
> 赞同：0
> 
> 时间：2013-03-03T14:59:46.763
> 
> 标签：java, json

我要做的就是解析非常简单的 json 行，即使它有效我也不知道为什么它会抛出错误

这条线是

```
com.mongodb.util.JSONParseException: 
{publish_status:'active',activation_date:{$lt:new Date()},expiration_date:{$gt:new Date()}}
                                               ^ 
```

`new Date()`作为值有什么问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-03T15:10:02.853

这根本不是有效的 JSON。JSON 语法在[json.org](http://www.json.org/)上定义，它始终是一个字符串键，其值是字符串、数字、布尔值、null、数组或对象之一。您正在使用 Java 编写 Mongo 查询。您应该重新表述您的问题并适当地重新标记。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-03T15:10:54.343

我尝试直接在 mongo DB 2.2.3 中使用新的 date() 并且它有效..它创建了一个 ISODate 值。

您可以尝试使用这个：

```
{publish_status:'active',activation_date:new Date(),expiration_date:new Date()} 
```

# python - 如何在 Ubuntu Server 12.04 上使用 zlib 构建 Python 2.6.8？

> ID：15186974
> 
> 赞同：1
> 
> 时间：2013-03-03T15:00:20.760
> 
> 标签：python, compilation, makefile, zlib, python-2.6

据我所知，缺少`zlib`是 Python 2.6 的常见问题。

我已经`zlib1g-dev`安装了，我也尝试[了这个](http://ubuntuforums.org/showthread.php?t=1759873&p=10830295#post10830295)解决方案——但仍然没有成功。

我也试过`./configure --with-libs=usr/include/zlib.h`并得到：

```
libpython2.6.a /usr/include/zlib.h -lpthread -ldl  -lutil   -lm  
running build
running build_ext
INFO: Can't locate Tcl/Tk libs and/or headers 
```

有没有其他人遇到过这个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-25T15:11:25.203

要获得 zlib 支持，您需要在编译 python 时设置一些标志，如此处所述。 [http://ubuntuforums.org/showthread.php?t=1759873&p=10830295#post10830295](http://ubuntuforums.org/showthread.php?t=1759873&p=10830295#post10830295)

对于 ssl 支持，您需要应用此处讨论的补丁： [http ://ubuntuforums.org/showthread.php?t=1976837](http://ubuntuforums.org/showthread.php?t=1976837)

# sql - Access 中的查询（添加缺失值）

> ID：15186978
> 
> 赞同：1
> 
> 时间：2013-03-03T15:00:34.903
> 
> 标签：sql, ms-access

我有两张桌子，**Guides**和**Availability**。**Guides**是指南列表，**Availability**是已知特定指南信息的日期列表。例如*03/03/14 - Guide 3 - Available*或*05/03/14 - Guide 1 - Busy*。如果尚不知道某一天指南的可用性，则该天根本没有**可用性**条目。

我想编写一个查询，该查询将返回未来三天内所有指南的状态列表。如果状态未知，它将显示*Unknown*。

我确信在 SQL 中这个任务是绝对可行的，但是我必须在 Access 2013 中编写一个 Web 应用程序。这意味着我必须在 Access 中使用查询编辑器。有专业人士可以提供一些指导吗？如果问题中有任何不清楚的地方，请说出来。

```
Example query output:
03/03/2013 - Guide 1 - Busy
03/03/2013 - Guide 2 - Unknown
03/03/2013 - Guide 3 - Unknown
04/03/2013 - Guide 1 - Available
04/03/2013 - Guide 2 - Available
04/03/2013 - Guide 3 - Unknown
05/03/2013 - Guide 1 - Unknown
05/03/2013 - Guide 2 - Unknown
05/03/2013 - Guide 3 - Unknown

Table: Guides
Guide 1
Guide 2
Guide 3

Table: Availability
03/03/2013 - Guide 1 - Busy
04/03/2013 - Guide 1 - Available
04/03/2013 - Guide 2 - Available 
```

*PS：有人建议我可能需要制作第三张表格，列出未来 10 年的所有日期。如果它有助于解决方案，这将不是问题*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T01:46:18.033

如果您仅限于 Access，您将无法使用递归 CTE（如果有兴趣，请在谷歌上找到它们）。

因此，您必须创建一个包含所有日期的表。如果该表名为 AllDates，并且日期字段为 Dte，则查询将如下所示（您可能需要按日期范围过滤以限制返回的行数，否则您将看到所有 10 年的记录）：

```
SELECT Availability.Dte, Availability.Guide, Availability.Status
FROM Availability INNER JOIN Guides ON Availability.Guide = Guides.Guide
UNION ALL
SELECT  AllDates.Dte, Guides.Guide, 'Unknown' AS Status
FROM AllDates, Guides
WHERE NOT EXISTS (SELECT 1 FROM Availability WHERE Availability.Dte = AllDates.Dte And Availability.Guide = Guides.Guide)
ORDER BY 1, 2; 
```

对于 Access 的 Web 版本，您将需要使用 2 个查询。第一个 ( `DatesGuides`) 将列出所有日期的所有指南，其语法很简单：

```
SELECT Guides.Guide, AllDates.Dte
FROM AllDates, Guides; 
```

第二个查询将与第一个查询左连接。它的语法是：

```
SELECT DatesGuides.Dte, DatesGuides.Guide, Nz([Status],'Unknown') AS Expr1
FROM Availability RIGHT JOIN DatesGuides ON Availability.Dte = DatesGuides.Dte AND Availability.Guide = DatesGuides.Guide; 
```

# html - 在文本周围环绕双引号图像

> ID：15186980
> 
> 赞同：3
> 
> 时间：2013-03-03T15:00:43.123
> 
> 标签：html, css

我在段落中添加文本。我想在文本周围加上引号（作为图像）。

```
<p class="aboutus" style="font-style: impact;font-size: medium">
test test test test test test test test test test test test test test test test .
</p> 
```

如果我想在文本周围添加双引号，这很好。

```
p.aboutus:before {
    content: '"';
}

p.aboutus:after {
    content: '"';
} 
```

`quote1.jpeg`但是现在如果我在图像（和）中有双引号`quote2.jpeg`，并且如果我`<img src>`在伪选择器中添加了，它就不起作用了。为什么不？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-03T15:02:24.613

您需要使用以下`url()`语法指定图像：

```
p.aboutus::before {
    content: url('../images/quote1.jpeg'); /* Or wherever it is */
}

p.aboutus::after {
    content: url('../images/quote2.jpeg');
} 
```

请注意，URL 是相对于包含样式表的位置的；不是你的页面。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-03T17:24:41.627

除非您需要一些非常特殊的样式，否则对引号使用纯文本而不是图像可能就足够了。

这是一个[JSFiddle 演示](http://jsfiddle.net/Matt_Coughlin/HCWDK/3/)，每个示例都有一个示例。

第一个使用纯文本，第二个使用图像。它们在外观上几乎相同（测试于：IE8/9/10、FF、Safari、Chrome、Opera）。两者都允许显示任何大小的引号，而不会影响第一行和最后一行文本的行高（当内联添加大图像时会发生这种情况）。

下面是代码的简化版本（有关完整详细信息，请参阅[演示](http://jsfiddle.net/Matt_Coughlin/HCWDK/3/)）。

**纯文本**

```
.text-quotes blockquote {
    position: relative;
    margin: 0;
    padding: 8px 0 22px 0;
    text-indent: 36px;
}
.text-quotes blockquote:before,
.text-quotes blockquote:after {
    position: absolute;
    font-size: 60px;
}
.text-quotes blockquote:before {
    content: '\201C';   /* Left double quote */
    left: -36px;
    top: 8px;
}
.text-quotes blockquote:after {
    content: '\201D';   /* Right double quote */
    right: 0;
    bottom: -13px;
} 
```

**图片**

```
.image-quotes blockquote {
    position: relative;
    margin: 0;
    padding: 8px 0 22px 0;
    text-indent: 36px;
}
.image-quotes blockquote:before,
.image-quotes blockquote:after {
    display: block;
    position: absolute;
    width: 27px;
    height: 21px; 
}
.image-quotes blockquote:before {
    content: url(http://www.forestpath.org/test/misc/double-quote-left.png);
    left: -35px;
    top: 0;
}
.image-quotes blockquote:after {
    content: url(http://www.forestpath.org/test/misc/double-quote-right.png);
    right: 35px;
    bottom: 0;
} 
```

# matlab - 计算曲线之间的距离

> ID：15186984
> 
> 赞同：1
> 
> 时间：2013-03-03T15:00:57.647
> 
> 标签：matlab, curve-fitting, spline

我需要计算曲线之间的某种距离。

这些是一般曲线，可能不是函数——也就是说，x 的某些值可能映射到一个以上的值。

**编辑**

*   曲线以 X、Y 对列表的形式给出，逻辑曲线是按给定顺序通过所有点的线。一个典型的数据集将包括大约 1000 个点

*   如前所述，曲线可能不是函数，但通常类似于函数

这个问题我们阻止使用 interp1 或曲线拟合工具箱（在 Matlab 中）

我在考虑曲线之间区域面积的距离测量 - 但任何合理的替代方案都可以。

**编辑** 曲线的示例插图，以及我要计算的区域 ![曲线](../Images/0682f4f1862ba72eddea4989bfdd25a8.png)

首选 Matlab 解决方案，但其他语言也可以。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-03T15:19:38.047

如果您具有该类型的函数`y = f(x)`并且它们是在同一域中定义的，那么查找“距离”的常用方法是使用 L2 规范，如此处所述[http://en.wikipedia.org/wiki/L2_norm #p-范数](http://en.wikipedia.org/wiki/L2_norm#p-norm). 这只是函数平方差的绝对值的积分。如果你有参数曲线，那么你不能直接使用这种方法。如果 L2 规范不足以满足您的要求，那么您将需要对“距离”的含义提供更具体的定义。如果您不清楚您需要什么，请尝试查看不同类型的数学范数，看看是否有任何常用的范数是您需要的（即 L1 范数、统一范数）。上面的维基百科链接是一个很好的起点。如果 L2 足够好，那么您需要一种方法来计算您所拥有的积分 - 那里有许多数值积分技术，我建议 google 是您的朋友（或一本好的数值分析教科书）。

如果您确实有参数类型曲线，那么这是非常重要的。使用曲线之间的“区域”不是一个好主意，因为没有明确的方法来定义该区域，并且在您可以拥有自相交曲线的一般情况下会变得更加复杂。如果您的曲线以相同的方式参数化，您可以尝试一些非常粗略的测量，您可以在参数范围内以等距值评估每条曲线上的点，然后计算每条曲线之间的距离长度，求和并将平均值作为概念的“亲近”。即，将您的参数范围划分为一组 {u_0, ... , u_n} 并评估每个曲线1（u_i）和曲线2（u_i）`i`以生成一组`n`配对点。然后将每对点之间的欧几里得距离相加。

虽然这是非常非常粗略的，如果参数化不同，那么它不会有太大用处。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T15:08:33.717

您需要定义曲线之间的距离是什么意思。如果它是两条一般曲线之间最接近的方法，那么解决问题就变得相当困难。

如果“曲线”甚至不能表示为 x 的单值函数，那么它会变得更加复杂。

仅仅告诉我们你需要定义“某种距离”这个陈述过于宽泛，无法成为这里的主题，并且它表示你还没有考虑到你想要解决的问题。

如果您只想告诉我们这些曲线是两条完全通用的参数曲线，它们可能是闭合的，也可能不是闭合的，或者它们甚至可能不在同一个域上，那么这个问题就变得完全不适定以至于不可能回答。在这种情况下，两条曲线之间的面积是多少？

如果曲线是在 SAME 支持上定义的，那么减去它们并积分绝对值或差的平方就足够了。但是您已经告诉我们，这些“曲线”可能是多值的。在这种情况下，基本上不可能按照您的要求去做。

# macos - 带有数字名称的 bash for 循环

> ID：15186985
> 
> 赞同：4
> 
> 时间：2013-03-03T15:00:58.107
> 
> 标签：macos, bash, for-loop, batch-processing, cat

我目前正在做一个数学项目，但在 bash 中编程时遇到了一点砖墙。

目前我有一个包含 800 个文本文件的目录，我想要做的是运行一个循环将前 80 个文件（_01 到 _80）放入一个新文件并保存在其他地方，然后是接下来的 80 个（_81 到 _160）**文件**等等

目录中的所有文件如下所示：ath_01、ath_02、ath_03 等。

任何人都可以帮忙吗？

到目前为止，我有：

```
#!/bin/bash

for file in /dir/*

do
echo ${file}
done 
```

这只是简单地列出了我的文件。我知道我需要以某种方式使用 cat file1 file2 > newfile.txt ，但这让我与 _01、_02 等的数字扩展名混淆了。

如果我将文件名更改为使用下划线以外的名称会有帮助吗？像ath.01等？

干杯，

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-03T16:58:08.123

由于您提前知道有多少文件以及它们的编号方式，因此“展开循环”可能会更容易，可以说，并使用复制粘贴和一些手动调整来编写脚本使用大括号展开。

```
#!/bin/bash

cat ath_{001..080} > file1.txt
cat ath_{081..160} > file2.txt
cat ath_{161..240} > file3.txt
cat ath_{241..320} > file4.txt
cat ath_{321..400} > file5.txt
cat ath_{401..480} > file6.txt
cat ath_{481..560} > file7.txt
cat ath_{561..640} > file8.txt
cat ath_{641..720} > file9.txt
cat ath_{721..800} > file10.txt 
```

否则，使用嵌套的 for 循环和`seq`命令

```
N=800
B=80
for n in $( seq 1 $B $N ); do
    for i in $( seq $n $((n+B - 1)) ); do
       cat ath_$i
    done > file$((n/B + 1)).txt
done 
```

外部循环将遍历 1、81、161`n`等。内部循环将遍历`i`1 到 80，然后是 81 到 160 等。内部循环的主体只是将`i`第 th 文件的内容转储到标准输出，但是循环的聚合输出存储在文件 1 中，然后存储在文件 2 中，以此类推。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-03T15:18:22.253

你可以尝试这样的事情：

```
cat "$file" >> "concat_$(( ${file#/dir/ath_} / 80 ))" 
```

*   与您一起从文件名`${file#/dir/ath_}`中删除前缀`/dir/ath_`
*   `$(( / 80 ))`你得到后缀除以`80`（整数除法）

还将循环更改为

```
for file in /dir/ath_* 
```

所以你只得到你需要的文件

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-03T15:31:24.387

如果您想要 80 个文件为一组，最好确保名称是可排序的；这就是为什么经常使用前导零的原因。假设文件名中只有一个下划线，名称中没有换行符，则：

```
SOURCE="/path/to/dir"
TARGET="/path/to/other/directory"
(
cd $SOURCE || exit 1
ls |
sort -t _ -k2,2n |
awk -v target="$TARGET" \
    '{ file[n++] = $1
       if (n >= 80)
       {
           printf "cat"
           for (i = 0; i < 80; i++)
               printf(" %s", file[i]
           printf(" >%s/%s.%.2d\n", target, "newfile", ++number)
           n = 0
       }
     END {
       if (n > 0)
       {
           printf "cat"
           for (i = 0; i < n; i++)
               printf(" %s", file[i]
           printf(" >%s/%s.%.2d\n", target, "newfile", ++number)
       }
     }' |
sh -x
) 
```

指定了两个目录（文件在哪里以及摘要应该放在哪里）；该命令将目录更改为源目录（800 个文件所在的位置）。它列出了名称（如果需要，您可以指定一个 glob 模式）并按数字对它们进行排序。输出被馈送到`awk`其中动态生成一个 shell 脚本。它一次收集 80 个名称，然后生成一个`cat`命令，将这些文件复制到单个目标文件，例如`"newfile.01"`; 调整`printf()`命令以适合您自己的命名/编号约定。然后将 shell 命令传递给 shell 以执行。

在测试时，将 替换为`sh -x`空，或`sh -vn`类似的东西。仅当您确定它会执行您想要的操作时才添加活动外壳。请记住，shell 脚本在运行时位于源目录中。

从表面上看，这个`xargs`命令很好用；困难在于协调输出文件编号。可能有一种方法可以通过`-n 80`选择一次对 80 个文件进行分组以及一些奇特的方式来生成调用号，但我不知道。

另一种选择是用于`xargs -n`执行 shell 脚本，该脚本可以通过列出目标目录中已有的内容来推断正确的输出文件编号。这在许多方面会更干净：

```
SOURCE="/path/to/dir"
TARGET="/path/to/other/directory"
(
cd $SOURCE || exit 1
ls |
sort -t _ -k2,2n |
xargs -n 80 cpfiles "$TARGET"
) 
```

哪里`cpfiles`看起来像：

```
TARGET="$1"
shift
if [ $# -gt 0 ]
then
    old=$(ls -r newfile.?? | sed -n -e 's/newfile\.//p; 1q')
    new=$(printf "%.2d" $((old + 1)))
    cat "$@" > "$TARGET/newfile. $new
fi 
```

`xargs`零参数测试避免了使用零参数执行命令一次的麻烦。总的来说，我更喜欢这个解决方案而不是使用`awk`.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-06T01:05:00.337

这是@chepner 的第一个解决方案的宏，`GNU Make`用作模板语言：

```
SHELL := /bin/bash
N = 800
B = 80

fileNums = $(shell seq 1 $$((${N}/${B})) )
files = ${fileNums:%=file%.txt}

all: ${files}

file%.txt : start = $(shell echo $$(( ($*-1)*${B}+1 )) )
file%.txt : end = $(shell echo $$(( $* * ${B} )) )

file%.txt:
        cat ath_{${start}..${end}} > $@ 
```

要使用：

```
$ make -n all
cat ath_{1..80} > file1.txt
cat ath_{81..160} > file2.txt
cat ath_{161..240} > file3.txt
cat ath_{241..320} > file4.txt
cat ath_{321..400} > file5.txt
cat ath_{401..480} > file6.txt
cat ath_{481..560} > file7.txt
cat ath_{561..640} > file8.txt
cat ath_{641..720} > file9.txt
cat ath_{721..800} > file10.txt 
```

# php - 根据 div 的数量创建一系列点按钮

> ID：15186986
> 
> 赞同：1
> 
> 时间：2013-03-03T15:01:09.480
> 
> 标签：php, html, css

我想创建一个按钮列表，例如一个数字 X 迷你球，基于一个容器中的 X 个 div。我要这个：

∞ ∞ ∞ ∞</p>

基于多个div。

并且每个按钮都有每个 div 的位置（带有动画滚动条），如果我单击其中一个项目，我将转到链接到 div 的这个位置。

例如：

```
<div id="scroller">
<div id="content">number1</div>
<div id="content">number2</div>
<div id="content">number3</div>
</div> 
```

我有：

```
<ul>
<li><div id="ball"></div></li>
<li><div id="ball"></div></li>
<li><div id="ball"></div></li>
</ul> 
```

因此，如果我点击第三个“迷你球”，我将转到 div“number3”的位置。

我希望你能理解！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T15:13:45.167

**你不能给不同的元素相同的ID！**

基本上，您需要在单击特定按钮时显示特定的部门。有很多方法可以解决这个问题。

所有这些方法都需要你做一件事，**检测特定的按钮点击并推断出要显示的 div**

下面我向您展示世界上最简单的示例（为了它）..它应该给您一个想法：

相应的html：

```
<body >
     <ul>
        <li><div id="ball1" data-target="content1">button 1</div></li>
        <li><div id="ball2" data-target="content2">button 2</div></li>
        <li><div id="ball3" data-target="content3">button 3</div></li>
    </ul>   

   <div id="scroller">
        <div id="content1" class="number">number1</div>
        <div id="content2" class="number">number2</div>
        <div id="content3" class="number">number3</div>
    </div>

</body> 
```

相应的jquery代码：

```
<script type='text/javascript'>

    $(document).ready(function(){

       $('ul').find('li').find('div').click(function(){

             var target = $(this).attr('data-target');
             $('#'+target).slideToggle(1000);

       });

    });
</script> 
```

各自风格：

```
<style>
    .number
    {
       display:none;
    }
</style> 
```

# java - 基于 Java 的 Android 应用程序 -> 切换到 Scala

> ID：15186987
> 
> 赞同：3
> 
> 时间：2013-03-03T15:01:09.633
> 
> 标签：java, android, scala, android-fragments

我有一个想要更改为 Scala 的 Java Android 应用程序。我有很多片段，我想知道在 Scala 中执行此操作的最佳方法是什么。

这是我的 Java 片段类`MyFragment`：

```
public class MyFragment extends Fragment {
    private WebView myWebView;
    private TextView myTextView;

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container, 
        Bundle savedInstanceState) {
        View myView = inflater.inflate(R.layout.my_view, container, false);
        myWebView = (WebView) myView.findViewById(R.id.my_webview);
        myWebView.loadUrl("http://www.google.com/");
        myTextView = (TextView) myView.findViewById(R.id.my_textview);
        myTextView.setText("Google.com");
        return myView;
    }
} 
```

我总是有这个基本结构：我在其中实例化的一些私有 UI 元素`onCreateView`，做一些事情并返回视图（此处未显示：在其他`on*`方法中，我也对 UI 元素执行一些操作）。

我发现了一些`lazy val`与此处描述的类似的文章：http: [//blog.andresteingress.com/2011/09/20/programming-android-with-scala/](http://blog.andresteingress.com/2011/09/20/programming-android-with-scala/) 但就我而言，这不起作用，因为我有片段和不是活动。首先我必须给主视图充气`myView`，然后我才能得到它的 UI 元素。

在 Scala 中执行此操作的最佳方法是什么？

- - 更新 - -

我的 Scala 代码现在看起来像这样：

```
class MyFragment extends Fragment {
  private var myTextView: TextView = null

  override def onCreateView(inflater: LayoutInflater, 
    container: ViewGroup, savedInstanceState: Bundle): View = {
      val myView = inflater.inflate(R.layout.my_view, container, false)
      val myWebView = myView.findViewById(R.id.my_webview).asInstanceOf[WebView]
      myWebView.loadUrl("http://www.google.com/")
      myTextView = myView.findViewById(R.id.my_textview).asInstanceOf[TextView]
      myTextView.setText("Google.com")
      myView
  }
} 
```

那么，我可以在这里改进什么？`myTextView`是`private var`因为我必须在这个 Fragment 中访问它的几个方法。似乎我不能做这里解释的东西：http: [//blog.andresteingress.com/2011/09/20/programming-android-with-scala/](http://blog.andresteingress.com/2011/09/20/programming-android-with-scala/)和`lazy val` `TypedActivity`隐式转换`OnClickListener`，因为我使用片段。那么如何摆脱样板代码`.asInstanceOf[T]`并使其更像 Scala 呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-11T16:40:51.920

根据您更新的代码，我只能提出一些更“scala-ish”的建议

* * *

使用`Option`而不是`null`为您的成员

```
private var myWebView: Option[WebView] = None
private var myTextView: Option[TextView] = None 
```

* * *

为了避免在代码中显式转换您的视图，您需要将其移至其他位置，但您不能摆脱它，因为原始的 android API 不会为您提供有关返回对象的运行时或编译时类型的任何线索. 为了克服这个问题，您提到的帖子使用了定制的类型化资源和处理这些类型的特征。

```
case class TypedResource[T](id: Int)

object TR {
  object id {
    val my_webview = TypedResource[TextView](R.id.my_webview)
    val my_textview = TypedResource[WebView](R.id.my_textview)
    //... you must put here all your typed views referenced by id
  }
}

trait TypedViewHolder {
  def view: View
  //the method explicitly casts to the needed resource type based on the argument
  def findView[T](tr: TypedResource[T]): T = view.findViewById(tr.id).asInstanceOf[T]
}

object TypedResource {
  //this will implicitly convert your views to a corresponding TypedViewHolder
  //this lets you avoid explicit type cast to get your view
  implicit def view2typed(v: View): TypedViewHolder = new TypedViewHolder { def view = v }
} 
```

现在我们可以使用上面的代码

```
val myView = inflater.inflate(R.layout.my_view, container, false)
val myWebView = myView.findView(TR.id.my_webview)
myWebView.loadUrl("http://www.google.com/")
val myTextView = myView.findView(TR.id.my_textview)
myTextView.setText("Google.com") 
```

* * *

把这两件事放在一起

```
class MyFragment extends Fragment {
  private var myWebView: Option[WebView] = None
  private var myTextView: Option[TextView] = None

  override def onCreateView(
    inflater: LayoutInflater, 
    container: ViewGroup, 
    savedInstanceState: Bundle): View = {
      //imports the implicit conversion
      import TypedResource._

      val myView = inflater.inflate(R.layout.my_view, container, false)
      myWebView = Some(myView.findView(TR.id.my_webview))
      //now we're using options, so we must call methods on the inner value
      //we can use Option.map(...) to do it [see http://www.scala-lang.org/api/current/index.html#scala.Option]
      myWebView.map(_.loadUrl("http://www.google.com/"))

      myTextView = Some(myView.findView(TR.id.my_textview))
      //same as above
      myTextView.map(_.setText("Google.com"))
      myView
  }
} 
```

我希望这能够帮到你。我不是android专家，所以我只能做到这一点。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-04T04:03:18.943

您为什么不简单地在 Scala 中编写片段而不用担心*“在 Scala 中执行此操作的最佳方式”*？可能没有。

我`public`将从类定义中删除并`TypedActivity`在活动中包括其他好东西 - 从文章中开始。然后，设置开发环境 - IDE - 并运行应用程序。如果它有效，那么您就完成了（迁移的第一步）。我认为你`lazy val`从一开始就不需要 's 。

做一些小步骤，使迁移更容易。