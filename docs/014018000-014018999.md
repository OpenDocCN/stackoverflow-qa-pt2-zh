# StackOverflow 问答 14018000-14018999

# android - 地图不适用于适用于 Android 的 Cordova 2.0.0

> ID：14018001
> 
> 赞同：0
> 
> 时间：2012-12-24T06:41:43.660
> 
> 标签：android, cordova, dictionary, cordova-2.0.0

我已经下载了[PhoneGap](http://en.wikipedia.org/wiki/PhoneGap) 1.5.0 文件的 Google Map 示例。它在带有该`Cordova-1.5.0.js`文件的 Android 中运行良好。但是当我保留 Cordova-2.0.0.js 文件时，地图没有显示。

try-catch 块中没有错误。可能是什么问题？Cordova 2.0.0 中的简单地图示例是什么？

我的代码如下：

### 索引.html

```
<!DOCTYPE html>
<html>
    <head>
        <title></title>
        <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no;" />
        <meta charset="utf-8">

        <script type="text/javascript" src="http://maps.googleapis.com/maps/api/js?sensor=false"></script>
        <link href="http://code.google.com/apis/maps/documentation/javascript/examples/default.css"rel="stylesheet"type="text/css" />
        <script type="text/javascript" src="googlemap.js"></script>
        <script type="text/javascript" src="reachability.js"></script>
        <script charset="utf-8" src="cordova-2.2.0.js"></script>

        <!-- iPad/iPhone specific CSS below, add after your main CSS >
        <link rel="stylesheet" media="only screen and (max-device-width: 1024px)" href="ipad.css" type="text/css" />
        <link rel="stylesheet" media="only screen and (max-device-width: 480px)" href="iphone.css" type="text/css" />
        -->
        <!-- If your application is targeting iOS BEFORE 4.0 you MUST put json2.js from http://www.JSON.org/json2.js into your www directory and include it here -->
        <!-- <script>
            if (navigator.userAgent.toLowerCase().match(/android/)) {
                document.write('<script charset="utf-8" src="cordova-1.5.0.js"><\/script>');
            }
            else if (navigator.userAgent.toLowerCase().match(/iphone/) || navigator.userAgent.toLowerCase().match(/ipad/)) {
                document.write('<script charset="utf-8" src="cordova-1.5.0.js"><\/script>');
            }
        </script> -->
        <script type="text/javascript">
            // If you want to prevent dragging, uncomment this section
            /*
                function preventBehavior(e)
                {
                    e.preventDefault();
                };
                document.addEventListener("touchmove", preventBehavior, false);
            */

            /* If you are supporting your own protocol, the var invokeString will contain any arguments to the app launch.
               see http://iosdevelopertips.com/cocoa/launching-your-own-application-via-a-custom-url-scheme.html
               for more details -jm */
            /*
                function handleOpenURL(url)
                {
                    // TODO: do something with the url passed in.
                }
            */

            function onBodyLoad(){
                document.addEventListener("deviceready", onDeviceReady, false);
            }

            /* When this function is called, Cordova has been initialized and is ready to roll */
            /* If you are supporting your own protocol, the var invokeString will contain any arguments to the app launch.
               see http://iosdevelopertips.com/cocoa/launching-your-own-application-via-a-custom-url-scheme.html
               for more details -jm */
            function onDeviceReady()
            {
                var reachability = new Reachability();
                if(reachability.IsNotConnected()){
                    navigator.notification.alert('No internet connection available',null, '', 'OK');
                }
                else{
                    try{
                    var map = new GoogleMap();
                    map.initialize();
                    }catch(e){
                        alert(e.message);
                    }
                }
            }
        </script>
    </head>
    <body onload="onBodyLoad()">
        <div id="map_canvas">
            Couldn't load map because there was no internet connection available
        </div>
    </body>
</html> 
```

### googleMap.js

```
function GoogleMap(){

    this.initialize = function(){
        try{
            var map = showMap();
        }
        catch(e) {
            alert(e.message);
        }
    }

    var showMap = function(){
        var mapOptions = {
            zoom: 4,
            center: new google.maps.LatLng(-33, 151),
            mapTypeId: google.maps.MapTypeId.ROADMAP
        }
        try {
            var map = new google.maps.Map(document.getElementById("map_canvas"), mapOptions);
        }
        catch(e) {
            alert(e.message);
        }
        return map;
    }
} 
```

### 可达性.js

```
function Reachability(){
    this.IsNotConnected = function(){
        if(navigator.network.connection.type == Connection.NONE || navigator.network.connection.type == Connection.UNKNOWN)
        {
            return true;
        }
        else
        {
            return false;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T11:53:17.263

```
<!DOCTYPE html>
<html>
    <head>
        <title></title>

        <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no;" />

        <meta charset="utf-8">

        <script type="text/javascript" src="http://maps.googleapis.com/maps/api/js?sensor=false"></script>

        <link href="http://code.google.com/apis/maps/documentation/javascript/examples/default.css"rel="stylesheet"type="text/css" />

        <script type="text/javascript" src="googlemap.js"></script>
        <script type="text/javascript" src="reachability.js"></script>
        <script charset="utf-8" src="cordova-2.2.0.js"></script>

        <!-- iPad/iPhone specific CSS below, add after your main CSS >
            <link rel="stylesheet" media="only screen and (max-device-width: 1024px)" href="ipad.css" type="text/css" />
            <link rel="stylesheet" media="only screen and (max-device-width: 480px)" href="iphone.css" type="text/css" />
        -->
        <!-- If your application is targeting iOS BEFORE 4.0 you MUST put json2.js from http://www.JSON.org/json2.js into your www directory and include it here -->

        <script type="text/javascript">
            // If you want to prevent dragging, uncomment this section
            /*
                function preventBehavior(e)
                {
                    e.preventDefault();
                };
                document.addEventListener("touchmove", preventBehavior, false);
            */

            /* If you are supporting your own protocol, the var invokeString will contain any arguments to the app launch.
               see http://iosdevelopertips.com/cocoa/launching-your-own-application-via-a-custom-url-scheme.html
               for more details -jm */
            /*
                function handleOpenURL(url)
                {
                    // TODO: do something with the url passed in.
                }
            */

            function onBodyLoad(){
                //document.addEventListener("deviceready", onDeviceReady, false);
                  onDeviceReady()
            }

            /* When this function is called, Cordova has been initialized and is ready to roll */
            /* If you are supporting your own protocol, the var invokeString will contain any arguments to the app launch.
               see http://iosdevelopertips.com/cocoa/launching-your-own-application-via-a-custom-url-scheme.html
               for more details -jm */
            function onDeviceReady()
            {
                // var reachability = new Reachability();
                // if(reachability.IsNotConnected()){
                //     navigator.notification.alert('No internet connection available',null, '', 'OK');
                // }
                // else {
                //     try{

                           var map = new GoogleMap();
                           map.initialize();

                //     }
                //     catch(e){
                //         alert(e.message);
                //     }
                // }
            }
        </script>
    </head>

    <body onload="onBodyLoad()">
        <div id="map_canvas">
            Couldn't load map because there was no internet connection available
        </div>
    </body>
</html> 
```

在 Google Chrome 中运行代码。**注意：**检查插件是否正常工作。

# android - 如何在 Android 手机上签署“.apk”文件？

> ID：14018002
> 
> 赞同：4
> 
> 时间：2012-12-24T06:42:02.527
> 
> 标签：android, apk, jarsigner

我想在手机上生成一个新的“.apk”文件（我的应用程序市场中的一个功能，如应用程序），我必须在安装之前对其进行签名。我想我必须在手机上运行 JarSigner。

JarSigner 位于以下两个项目中：OpenJDK 和 GCC-libjava。

我尝试包含从 Internet 下载的 OpenJDK.jar，但其中没有 JarSigner 类。

我也尝试将 JarSigner.java 从 OpenJDK 源添加到我的 Android APP 项目，但是依赖关系太多了。与来自 GCC-LibJAVA 的 JarSigner.java 相同。

为 Android 实现一个新的 JarSigner 太难了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-24T10:30:22.717

如果您想使用手机创建 .apk，请查看以下内容：

**JavaIDEdroid**允许您在 Android 设备上创建原生 Android 应用程序。

[http://code.google.com/p/java-ide-droid/](http://code.google.com/p/java-ide-droid/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-22T08:18:16.480

我使用我自己的密钥成功地在我的 Android 设备上使用“ZipSigner”Android 应用程序签署了我的应用程序，该应用程序在 Apache 2.0 下获得许可。申请网站：[https](https://sites.google.com/site/zipsigner/) ://sites.google.com/site/zipsigner/ 在 Google play：[https ://play.google.com/store/apps/details?id=kellinwood.zipsigner2](https://play.google.com/store/apps/details?id=kellinwood.zipsigner2)

看截图：![在 Android 设备上使用 ZipSigner 签署 Android 应用程序](../Images/76a2d82a45f249fa0ca41b00b2fe8f24.png)

顺便说一句，1\. 应用程序构建的所有先前步骤都可以在 TerminalIde Android 应用程序 ( [http://www.spartacusrex.com/terminalide.htm](http://www.spartacusrex.com/terminalide.htm) ) 中完成。不幸的是，当前版本的应用程序不支持使用自定义密钥进行签名。2\. ZipSigner 应用程序是“zip-signer”开源项目的一部分：[https ://code.google.com/p/zip-signer/](https://code.google.com/p/zip-signer/)

# android - SQLiteDatabase.query() 的使用

> ID：14018008
> 
> 赞同：0
> 
> 时间：2012-12-24T06:42:40.343
> 
> 标签：android, sqlite

我创建了一个`list view`带有`checkbox`显示的`sale invocies`. 当用户选择复选框时，我将`sale_id`所选发票添加到`ArrayList<String>`.

现在我想在这个`ArrayList<String>`in`query()`方法中使用数据`SQLiteDatabase`。我想使用`sale ids`in获取发票详细信息`ArrayList`。的大小`ArrayList`不是静态的。

我如何使用 in 中`ArrayList`的`query()`方法构建查询`SQLiteDatabase`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-24T07:07:32.000

假设 ArrayList 包含所有选中的项目，通过循环对其进行迭代并创建 where 子句。有了这个 where 子句，我们可以在 SQLiteDatabase 上触发一个命令。代码如下所示！

`ArrayList<String> checkedItems = ...//`使用列表中的选中项目加载它

//依次通过
`String clause = "";` `for (int i = 0; i < checkedItems.size(); i++) {`

```
 String sales_id = checkedItems.get(i); 
        if(i == 0)
        clause += "SALES_ID = '" + sales_id "'";
        else
        clause += " || SALES_ID = '" + sales_id "'"; 
```

}

// 运行数据库sqlite查询命令

```
Cursor cursor = database.rawQuery("SELECT * FROM SALES_TABLE  WHERE clause"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-24T07:01:04.743

```
SQLiteDatabase mdb = DatabaseHelper.getInstance(context).getWritableDatabase();//SQLiteOpenHelper

/**
         * Get invoice details information
         * @param sale_id
         * @return
         */
        public Cursor getInvoiceDetails(int sale_id){
            String invoiceQuery= "SELECT " +
                                      " invoice._id," +
                                      " invoice.date," +
                                      " invoice.details " +
                                      " FROM " +
                                  TABLE_INVOICE                               
                                      " WHERE " +
                                      " invoice._id = " + sale_id;

            Log.d(TAG, "getInvoiceInfo: " + invoiceQuery);
            return mdb.rawQuery(invoiceQuery,null);
        } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-24T07:01:26.097

您可以使用以下查询：

```
public Cursor get_details (int id) {
        c = this.getReadableDatabase().rawQuery("SELECT * FROM Table where id = "+id,null);
        return c;
        } 
```

你只在监听器中写下你的复选框

```
ArrayList.add(id) 
```

当您想要显示详细信息时，您可以获得 id 作为

```
for( i=0 ; i<ArrayList.size();i++){
    int id=ArrayList.get(0)
     get_details(id);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-24T07:55:01.813

我找到了我的问题的答案。修改后`stack_ved`的代码如下。

```
String clause = ""; 

for (int i = 0; i < checkedItems.size(); i++) {

           String sales_id = checkedItems.get(i); 
            if(i == 0)
            clause += "SALES_ID = '" + sales_id "'";
            else
            clause += " OR SALES_ID = '" + sales_id "'";
    } 
```

替换`||`为`OR`

和

```
Cursor c = database.query("TABLE_NAME", COLUMN_NAMES, clause, null,
                null, null, null); 
```

# sql-server - 在 SQL Server Management Studio 中还原 .bak 文件时，信号量超时期限已过

> ID：14018010
> 
> 赞同：2
> 
> 时间：2012-12-24T06:42:47.360
> 
> 标签：sql-server, sql-server-2008

`The semaphore timeout period has expired`我在尝试恢复`.bak`文件时收到错误消息。这是一个巨大的文件（36GB）你能建议我如何恢复`.bak`文件吗？

我需要将备份文件恢复到 SQL Server 2008 数据库。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T10:08:22.470

36GB 不是要恢复的大文件

这听起来更像是通信中断的网络问题，而不是基于 SQL 的问题。

您是远程运行恢复命令还是在主机上运行？备份文件是在远程网络位置还是在主机上？

我想说，如果您正在远程运行命令或备份文件位于不同的网络路径上，您尝试将文件或 SSMS 连接本地带到 SQL 实例。

# .net - 在 TeamCity 中仅发布构建的 .sln 文件工件

> ID：14018013
> 
> 赞同：0
> 
> 时间：2012-12-24T06:43:20.103
> 
> 标签：.net, build, msbuild, continuous-integration, teamcity

我们有一个 git 存储库，其中包含大约 6 个 .sln 文件。每个解决方案都有大约 15 个项目。

我们还使用 TeamCity 轮询我们的 git 存储库并构建以防发现任何更改。

我想通过以下方式增强我们的构建：

1.  **仅**构建由提交实际更改的项目。
2.  **仅**将更改为构建工件的输出发布（在 TeamCity 中）。

例如，如果开发人员更改了 2 个不同项目中的文件，则只有这些项目会被重新构建，并且只有它们的输出将被复制到某个位置作为当前构建的输出。

第一点可以使用“**构建**”目标，但是我找不到仅将已构建项目的输出复制到某处的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T05:22:25.453

TeamCity 提供了 VCS 触发规则，您可以使用这些规则仅在 repo 中某个路径下的文件发生更改时触发构建。您可以将这些规则与 Checkout Rules 结合使用，这些规则用于微调从 repo 中实际提取的内容。

[http://confluence.jetbrains.net/display/TCD7/Configuring+VCS+Triggers#ConfiguringVCSTiggers-VCSTiggerRules](http://confluence.jetbrains.net/display/TCD7/Configuring+VCS+Triggers#ConfiguringVCSTriggers-VCSTriggerRules)

[http://confluence.jetbrains.net/display/TCD7/VCS+Checkout+Rules](http://confluence.jetbrains.net/display/TCD7/VCS+Checkout+Rules)

VCS 触发/检出规则在构建配置级别定义。理论上，您可以监控单个项目中的更改，触发针对该项目的 .csproj 文件的构建。您的工件只是该单个项目的输出。但实际上，您可能不希望每个项目都有一个构建配置。

单个 repo 中的 6 个解决方案听起来像是从 SVN 或 TFS 之类的东西迁移而来的。如果可能的话，我建议您将每个 sln 放在自己的 Git 存储库中。如果您使用 6 个 sln 来“管理”一个包含 90 个项目的单体应用程序，那么您还有其他一些挑战。

希望这会有所帮助，但有关您的回购和项目的更多信息会有所帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-24T12:32:18.267

我认为没有开箱即用的方法，我也不知道相关的插件。但是，您可以通过将构建生成的新二进制文件与以前的二进制文件进行比较并仅发布不同的二进制文件来获得所需的结果。

您应该使用了解 EXE 和 DLL 文件结构的差异工具，并且可以忽略每次构建时发生的变化 - 时间戳、PDB guid、签名等。这个问题已经在 SO 上多次讨论过。例如，[Deterministic 在 Windows 下构建](https://stackoverflow.com/questions/1180852/deterministic-builds-under-windows)。

# iphone - 自定义UIToolbar，使用480x44(points)的背景图片变成480x88

> ID：14018014
> 
> 赞同：0
> 
> 时间：2012-12-24T06:43:21.470
> 
> 标签：iphone, ios

我正在创建一个应用程序，我需要自定义位于底部的 UIToolBar。我的应用仅支持横向视图。

1.  我添加到情节提要中的 UIToolBar 位于屏幕底部，大小为 480x44
2.  背景图像，为 960x88 像素

当我运行它时，工具栏的高度变为 88（像素数）。如果我错过了什么，或者做错了什么，谁能告诉我？

谢谢！

这是我的自定义代码

```
- (void)customizeUIToolBar
{
    UIImage *toolBarImage = [UIImage imageNamed:@"lower-menu.png"];

    [[UIToolbar appearance] setBackgroundImage:toolBarImage forToolbarPosition:UIToolbarPositionBottom barMetrics:UIBarMetricsDefault];
    [[UIToolbar appearance] setBackgroundImage:toolBarImage forToolbarPosition:UIToolbarPositionBottom barMetrics:UIBarMetricsLandscapePhone];
}

- (void)customizeAppearance
{
    [self customizeUIToolBar];
}

- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
   // Override point for customization after application launch.
    [self customizeAppearance];

    return YES;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T06:51:56.393

> 我添加到情节提要中的 UIToolBar 位于屏幕底部，大小为 480x44

这 44 以点为单位。以像素为单位的实际大小取决于您使用的设备。

如果它不是视网膜，它将是 44 像素。

如果它的视网膜是 88 像素。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-24T06:48:23.523

在项目中添加名称为 lower-menu@2x.png 的图像。您正在使用视网膜显示图像并在非视网膜设备上进行测试。[命名约定博客](http://www.vigorouscoding.com/2012/03/naming-conventions-for-image-resources-in-ios/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-24T06:54:54.497

尝试从中删除自动布局，`UIView`它不会扩大其高度。

# c# - Android 开始活动

> ID：14018019
> 
> 赞同：0
> 
> 时间：2012-12-24T06:43:46.157
> 
> 标签：c#, android-intent, static, monodevelop, start-activity

我正在使用带有 MapsAndlocationDemo 的 MonoDevelop for Android，并且我有一个关于开始另一个活动的问题。

这是我的代码：

```
 public void loadActivity (Context ActivityContext)
    {
        var second = new Intent(ActivityContext, typeof(LocationDetailsActivity));
        second.PutExtra("FirstData", "Data from FirstActivity");
        StartActivity (second);
    } 
```

当从`MapWithOverlayActivity : MapActivity`类中调用时，此代码可以完美运行。当调用地图标记的方法时，我想从`MapItemizedOverlay: ItemizedOverlay`类中调用它。`OnTap`

我试图使方法静态。这是我的代码：

```
 static public void loadActivity (Context ActivityContext)
    {
        var second = new Intent(ActivityContext, typeof(LocationDetailsActivity));
        second.PutExtra("FirstData", "Data from FirstActivity");
        StartActivity (second);
    } 
```

但是，我现在收到以下错误：`An object reference is required for the non-static field, method or property Android.Content.Context.StartActivity(Android.Content.Intent)`

我能否提供一些关于为什么这不起作用的信息，以及一些帮助它工作的信息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T06:55:09.707

如果有帮助，您可以使用 Android 的全局 Application 对象。这是一个例子：

```
public class MyApp extends Application{
    private String foo = null;

    public String getFoo(){
        return foo;
    }
}

public class MyActivity extends Activity {
    private MyApp app;

    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        app = ((MyApp)getApplication());

        String thing = app.getFoo();
    }
} 
```

如果您需要从任何地方访问该方法，您可以用您的 Intent 替换 getFoo 方法：) 我认为它应该可以工作。应用参考在[这里](http://developer.android.com/reference/android/app/Application.html)

# android - 谷歌分析的 EasyTracker 不工作

> ID：14018021
> 
> 赞同：4
> 
> 时间：2012-12-24T06:43:53.410
> 
> 标签：android, google-analytics

1.  更新 AndroidManifest.xml
2.  添加跟踪方法
3.  创建您的 analytics.xml 文件

**AndroidManifest.xml**

```
<uses-permission android:name="android.permission.INTERNET" />
<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" /> 
```

**每个活动：**

```
@Override
public void onStart() {
    super.onStart();
    EasyTracker.getInstance().activityStart(this);
}

@Override
public void onStop() {
    super.onStop();
    EasyTracker.getInstance().activityStop(this);
} 
```

****值**文件夹中的**analytics.xml**：**

 **```
<?xml version="1.0" encoding="utf-8"?>
<resources
    xmlns:tools="https://schemas.android.com/tools" 
    tools:ignore="TypographyDashes"
    >

    <string name="ga_trackingId">UA–XXXXXXXX–1</string>

    <bool name="ga_autoActivityTracking">true</bool>

    <bool name="ga_reportUncaughtExceptions">true</bool>

</resources> 
```

几天前这工作正常。但是在过去的 2-3 天里，我以为我正在使用（测试）该应用程序，但我没有看到来自 Google 的任何数据。

经过一番研究，我发现了这一点：

```
Replace “-” with an “en dash” character (–, &&;#8211;) 
```

如果是这种情况，它以前不应该起作用。但是我尝试更改它，仍然没有数据。

我还缺少什么吗？

**编辑：**

有一个 GA 正在运行的旧安装程序，后来我更改了一些东西并重新构建了安装程序，但我没有更改 Manifest 中的任何内容，例如版本、app_name 等。即使现在我使用的是旧安装程序GA 有效，而对于新安装程序则无效。如果有兴趣，我在安装程序中更改的是**URL**（我正在使用的 Web 服务器）。这可能是一个原因？

谢谢你

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-01T08:38:19.803

这行得通。

```
<?xml version="1.0" encoding="utf-8"?>
<resources
    xmlns:tools="https://schemas.android.com/tools" 
    tools:ignore="TypographyDashes"
    >

    <string name="ga_trackingId">UA-XXXXXXXX-1</string>

    <bool name="ga_autoActivityTracking">true</bool>

    <bool name="ga_reportUncaughtExceptions">true</bool>

</resources> 
```

我使用的是普通破折号，并添加了，`tools:ignore="TypographyDashes"`但它仍然显示 lint 警告。但有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T14:51:45.747

analytics.xml 中的 EasyTrackers 配置目前不支持通过以下方式重写包

```
aapt --rename-manifest-package new.package.name 
```

如果您使用它，您将无法使用 EasyTracker，直到它发生变化。

看这两个问题：

[https://productforums.google.com/forum/?fromgroups=#!searchin/analytics/rename-manifest-package](https://productforums.google.com/forum/?fromgroups=#!searchin/analytics/rename-manifest-package)**

# search-engine - Bing API 密钥不起作用的原因可能是什么？

> ID：14018033
> 
> 赞同：0
> 
> 时间：2012-12-24T06:46:05.937
> 
> 标签：search-engine, bing-api

我一直在尝试`Bing API`制作自定义搜索引擎。`Bing Search API`当我尝试使用`azure marketplace`网站使用它时，我获得了一个完美的免费版本。但是每当我尝试使用它时，URL就像

[http://api.bing.net/json.aspx?Appid=m/gNRFAX3faTfrm+81uVSTHPJkf/Dimn2DTM7NyukpU=&query=sushi&sources=web](http://api.bing.net/json.aspx?Appid=m/gNRFAX3faTfrm+81uVSTHPJkf/Dimn2DTM7NyukpU=&query=sushi&sources=web)。

我收到错误消息

```
Parameter has invalid value. 
```

所以我尝试使用 JavaScript 和 PHP 每次都会出现相同的错误。知道为什么会这样吗？

注意：我没有把我原来的 API 密钥放在这里。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-14T03:46:48.987

实际上，使用该参数的 API`AppId`已被弃用。您必须使用 azure bing API。使用访问令牌作为值或客户端密钥。请看这个[链接](https://datamarket.azure.com/developer/applications/)。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T18:49:43.797

可以指定这个 Appid 49EB4B94127F7C7836C96DEB3F2CD8A6D12BDB71 查看一下：[http ://api.bing.net/xml.aspx?Appid=49EB4B94127F7C7836C96DEB3F2CD8A6D12BDB71&query=girls&sources=web&web.count=40&web.offset=41](http://api.bing.net/xml.aspx?Appid=49EB4B94127F7C7836C96DEB3F2CD8A6D12BDB71&query=girls&sources=web&web.count=40&web.offset=41)

# node.js - 捕获流程的连续输出

> ID：14018038
> 
> 赞同：1
> 
> 时间：2012-12-24T06:46:21.647
> 
> 标签：node.js

我有一个期望脚本，它对另一个盒子执行无密码 ssh 并启动一个命令以使用命令转储文件内容：**tail -f ...**

由于我使用的是 -f tail 选项，因此命令会等到新数据添加到文件中并立即转储。

我正在使用 exec 从我的 NodeJS 脚本启动脚本：

```
var child = exec('script.sh process1 process2', function(err, stdout, stderr) {
if(err)
{
   console.log("Error");
   return;
}
var result;
while((result = stdout.toString.split("\r\n")) != null)
{
  logger.info(result);
}
}
}); 
```

但是我在控制台日志中遇到以下错误：

```
Error in expect script ::Error: maxBuffer exceeded. 
```

由于输出是标准输出流上的连续数据，我如何利用所需的目标。我尝试使用**spawn**但出现以下错误：

[NodeJS：警告：检测到可能的 EventEmitter 内存泄漏。增加了 11 位听众。使用emitter.setMaxListeners() 增加限制](https://stackoverflow.com/questions/13983204/nodejs-warning-possible-eventemitter-memory-leak-detected-11-listeners-added)

我该如何克服这个问题？

编辑：：

当相关命令完成运行或返回错误时，似乎会调用回调或事件。即使我的命令仍在后台执行，是否有办法获得输出？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-24T07:09:04.340

看起来 spawn 是要走的路，因为它意味着处理流，而 exec 的最大缓冲区为 200k。

您的生成输出只是一个警告：[检测到可能的 EventEmitter 内存泄漏](https://stackoverflow.com/questions/9768444/possible-eventemitter-memory-leak-detected)

# jquery - 没有在具有多个输入的 Jquery Autocomplete 中获取当前用户输入值？

> ID：14018039
> 
> 赞同：2
> 
> 时间：2012-12-24T06:46:26.420
> 
> 标签：jquery, autocomplete

您好我正在使用带有多个输入标签的 Jquery 自动完成功能。我的问题是我无法在我的自动完成功能中获取当前用户输入值。

这是我的代码

```
 function Call() {

var str = $("#auto").val();
var substr = str.split(',');

$(".inputcatalog").each(function () {

    var classes = $(this).attr("class").split(" ");
    var id = classes[classes.length - 1];
    $this = $(this);

    var stype = id;
    var srctxt = $this.val();

    substr.forEach(function (item) {
        if (id == item) {
            AutoComplete($this, stype)
        }

    });

});

 } 
```

//我的自动竞争功能

```
 function AutoComplete(object, filter) {

$this = object;
var stype = filter;
var srctxt = $this.val();
$this.autocomplete({
    source: function (request, response) {
        $.getJSON('/Cataloging/Bib/AutoComplete',
             {

                 stype: stype,
                 term: $this.val()
             }, response);
    },
    select: function (event, ui) {

        // Do something with "ui.item.Id" or "ui.item.Name" or any of the other properties you selected to return from the action
    }
});

 } 
```

我的期限值为空

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T07:05:16.473

在源函数中，`request`参数是一个具有`term`as 属性的对象：

尝试使用：

```
term: request.term 
```

代替

```
term: $this.val() 
```

API 参考：[http ://api.jqueryui.com/autocomplete/#option-source](http://api.jqueryui.com/autocomplete/#option-source)

# python - 如何将matlab代码转换为python代码？

> ID：14018042
> 
> 赞同：1
> 
> 时间：2012-12-24T06:46:59.260
> 
> 标签：python, matlab, python-3.x, arcgis

接下来的代码是matlab代码。我想将此代码转换为 python 代码以便在 Arcgis 中使用它。

```
vals = zeros(size(a(:,:,1)));
 [~,indexOfMax] = max(a,[],3);
 for i=1:size(a,1)
    for j=1:size(a,2)
        vals(i,j) = b(i,j, indexOfMax(i,j));
    end 
 end 
```

我将简要解释一下这段代码。我有两个图像（名为 A 和 B）。两者都有 7 层在同一维度 (4169,6289,7)。首先，我想在 A 图像中找到最大值的位置，然后在上一步从 A 图像中提取的最大值位置获取 B 图像的值。

非常感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-30T15:14:24.770

```
vals = numpy.zeros((a.shape[0], a.shape[1]))
indexOfMax = numpy.argmax(a,2)
for i in range(a.shape[0]):
  for j in range(a.shape[1]):
    vals[i,j] = b[i,j, indexOfMax[i,j]] 
```

也应该可以向量化而不是使用*for*循环。

小心，在 Python 中缩进很重要！*在第二个for*循环之前和*vals*之前保留缩进。

# java - weblogic每分钟检查一次服务器状态

> ID：14018043
> 
> 赞同：1
> 
> 时间：2012-12-24T06:47:05.703
> 
> 标签：java, weblogic, cpu

当我使用以下命令时

```
java weblogic.Admin -url %URL% -username %WLS_USER% -password %WLS_PW% GET -pretty -mbean "%DOMAIN_NAME%:Name=%ADMINSERVER_SERVERNAME%,Type=Server" -property ListenPort 
```

要每分钟检查一次服务器的状态，仅运行此命令就会使 CPU 使用率高达 70%，而我的应用程序要求我每分钟使用此命令检查一次状态，这是不可取的。

如何使用命令行实用程序以最小 CPU/时间每分钟检查 weblogic 服务器实例的运行状况，以便我可以从脚本中调用。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-26T21:45:28.627

以下 WLST 脚本可用于检查每个服务器的状态

```
#!/usr/bin/python
#
#   Script to return the status of each of the servers
#

class StatusResult:
    def __init__(self,serverName,serverStatus):
        self.name = serverName
        self.status = serverStatus

connect('username','password','t3://servername')
redirect('/dev/null','false')
nmStatus = 'Stopped'
if nm() == 1:
    nmStatus = 'RUNNING'
statuses = [ StatusResult('NodeManager',nmStatus) ]
# Get the list of managed servers from AdminServer
for server in ['AdminServer', 'soa_server1', 'osb_server1', 'bam_server1']:
    statuses.append(StatusResult(server,nmServerStatus(server)))
stopRedirect()
for result in statuses:
    print result.name + ": " + result.status
disconnect() 
```

调用脚本

```
. ${WL_HOME}/server/bin/setWLSEnv.sh
${MW_HOME}/oracle_common/common/bin/wlst.sh statusscript 
```

或者，您可以使用简单的方法，例如对服务器端口进行 http 检查以查看它是否响应。这将对服务器施加最小的负载。例如，您可以使用 nagios 插件 check_http 来检查特定服务器的状态。

```
check_http -I serveraddr -p serverport -e 404
check_http -I serveraddr -p serversslport  --ssl -e 404 
```

# apache-poi - 使用 POI 将数据写入特定单元格后，求和公式不会立即影响 Excel 中的列

> ID：14018044
> 
> 赞同：0
> 
> 时间：2012-12-24T06:47:17.263
> 
> 标签：apache-poi, excel-formula, overwrite

使用 将数据覆盖到 Excel 工作表`POI`后，相应列的求和公式不起作用。

但是当我们双击单元格中的特定值并按 Tab 退出时，它会采用求和公式。有什么办法可以刷新整个excel。

在将值覆盖到 Excel 后不久，我需要求和。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-25T00:37:14.523

请参阅[POI 公式评估文档](http://poi.apache.org/spreadsheet/eval.html)。完成对电子表格的更改后，您需要重新计算公式评估，因为文件格式会缓存最后一个值以加快加载速度。

# linux - Tcl 脚本中的字符串格式化

> ID：14018053
> 
> 赞同：1
> 
> 时间：2012-12-24T06:48:18.933
> 
> 标签：linux, tcl, expect

我在变量中有一个时间格式：

时间 12/12/12

我需要将其重新格式化为 12-12-12。我如何在 Tcl (Expect) 脚本中做到这一点？

我的脚本是 test.tcl：

```
#!/usr/bin/expect

set time "12/12/12"

# here I need something so time will become 12-12-12
puts $time 
# I will get 12-12-12 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-24T06:55:44.210

Tcl 为此有一个内置的字符串函数：

`string map {/ -} $time`

您必须将其放在`puts`新的之后或中`set`：

`puts [string map {/ -} $time]` 或者 `set time [string map {/ -} $time]`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-24T17:14:41.177

```
set time [clock format [clock scan $time] -format "%y-%m-%d"] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-01-26T15:38:26.750

这对我有用：set datestring [clock format [clock seconds] -format "%y%m%d" -gmt true] 祝你好运

# android - 当设备的键盘锁锁定时听电源键按下

> ID：14018054
> 
> 赞同：-2
> 
> 时间：2012-12-24T06:48:19.570
> 
> 标签：android, service, android-service

假设服务在后台运行三到四个小时。在那个特定的时间：

当Android设备的keyguard处于锁定状态时，我想听一个事件，例如随后按三下电源键，然后打开一个将成为模式锁定的活动。

### 概括

1.  启动服务 3 - 4 小时。
2.  键盘锁。
3.  随后按电源按钮 3 次。
4.  Open Lock 模式作为一项活动。

这该怎么做？任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T06:54:32.430

看看这个关于用 . 钩住电源按钮的[答案](https://stackoverflow.com/a/8941006/1056359)`BroadcastReceiver`。

您需要添加的只是计数器并使用锁定模式制作活动。（尝试阅读[此答案](https://stackoverflow.com/a/10864345/1056359)）

# ruby-on-rails - HTML 表单空文本字段

> ID：14018057
> 
> 赞同：1
> 
> 时间：2012-12-24T06:48:30.123
> 
> 标签：ruby-on-rails, ruby, sinatra

我有一个带有`name="test"`. 当我输入一个值时，我的 params 哈希包含该值：

```
 params[:test] => "value" 
```

但是，如果我不输入值，我的 params 散列包含一个空字符串：

```
 params[:test] => "" 
```

我的问题是，我如何判断用户是手动输入了一个空字符串还是只是忽略/根本没有触摸该字段？

**更新** 好吧，让我解释一下真正的问题，也许我没有很好地解释自己。我在一个页面上有一堆搜索字段，我需要根据它们进行搜索。这就是我现在正在做的事情：

```
conditions = {}
conditions[:artist_name] = s_artist_name if s_artist_name && !s_artist_name.empty?
conditions[:city] = s_city if s_city && !s_city.empty? 
```

我必须先检查它是否是`nil`，然后检查它是否是`emtpty?`。这对我来说看起来不太好，我不知道......对于这么简单的任务来说工作量太大了。我肯定错过了什么 。或者这是如何完成的？我检查是`nil`因为如果我打电话：

```
xyz.com/test 
```

参数将为零。

如果我按下`test`页面上的按钮而不在字段中输入任何内容，则将填充参数但使用空字符串。所以我也检查空字符串。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-24T09:20:59.113

检查

**价值。现在？**检查 nil 和空，如果 value 不是 nil 且不为空，则返回 true。
**值.空白？**检查 nil 和空，如果值为 nil 或空则返回 true。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-24T09:11:37.127

也许这篇文章会帮助你 [在 Ruby 中是否有更好的方法来检查字符串的 Nil 或 Length == 0？](https://stackoverflow.com/questions/247948/is-there-a-better-way-of-checking-nil-or-length-0-of-a-string-in-ruby)

有很多人们用来检查空值的方法，希望这会有所帮助。

# javascript - 有没有办法在字符串中使用非八进制文字？

> ID：14018065
> 
> 赞同：4
> 
> 时间：2012-12-24T06:49:36.160
> 
> 标签：javascript, forms

我必须过滤掉表单中的字符。因此，我实现了一个过滤掉算法，该算法运行良好，并根据不同的上下文使用不同的过滤器（变量）；我也必须扩展使用重音字母。

例子：

```
gFilterALPHA1="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz'-–àâäéèêëîïôöùüûÀÂÄÉÈÊËÎIÔÖÙÛÜæÆœŒçÇ "; 
```

奇怪的是，字母`é`（e 锐角）或`è`（e 坟墓）被考虑在内（被视为），而其他字母（如`à`（a 坟墓）则没有。我发现解决方案是使用八进制文字 - 例如`\340`或`\371`分别用于坟墓或 u 坟墓。

Q1。关于为什么`é`（e急性）被成功地直接解析而其他重音字母没有的任何线索？

Q2。由于在想要检查或添加值时编写一长串八进制文字既麻烦又容易出错，有没有人有更好的想法或知道解决方法？

谢谢。

好的，这里是thg435认为有用的代码看看。

```
function jFiltre_Champ(event, NomDuFiltre)
{
    var LeChamp=event.target.value; // value est de type ARRAY
    switch (NomDuFiltre)
    {
        case "NUM1":
        LeFiltre=gFiltreNUM1;
        Msg=gMessageNUM1;
        break;
    case "ALPHA1":
        LeFiltre=gFiltreALPHA1;
        Msg=gMessageALPHA1;
        break;
    case "DATE1":
        LeFiltre=gFiltreDATE1;
        Msg=gMessageDATE1;
    break;
    case "ALPHANUM1":
        LeFiltre=gFiltreALPHANUM1;
        Msg=gMessageALPHANUM1;
        break;
    case "ALPHANUM2":
        LeFiltre=gFiltreALPHANUM2;
        Msg=gMessageALPHANUM2;
        break;
}
Longueur=LeFiltre.length;
for (i=0;  i<LeChamp.length; i++)
{
    leCar = LeChamp.charAt(i);
    for (j = 0;  j < Longueur;  j++)
    {
        if (leCar==LeFiltre.charAt(j)) break;
    }
    if (j==Longueur)
    {
        alert(Msg);
    /*Cf doc. pour l'algorithme de la méthode slice*/
        document.getElementById(event.target.id).value=event.target.value.slice("0", i);
        break;
    }
} 
```

}

这是一个英文风格的版本：（关于（2））

```
function jform_input_filter(event, filterName)
{
    var current_input = event.target.value; // the value is an array
    switch (filterName)
    {
        case "NUM1":
        current_filter = gFilterNUM1;
        Msg = gMessageNUM1;
        break;
    case "ALPHA1":
        current_filter = gFilterALPHA1;
        Msg = gMessageALPHA1;
        break;
    case "DATE1":
        current_filter = gFilterDATE1;
        Msg = gMessageDATE1;
    break;
    case "ALPHANUM1":
        current_filter = gFilterALPHANUM1;
        Msg = gMessageALPHANUM1;
        break;
    case "ALPHANUM2":
        current_filter = gFilterALPHANUM2;
        Msg = gMessageALPHANUM2;
        break;
}
length = current_filter.length;
for (i = 0;  i < current_input.length; i++)
{
    leCar = current_input.charAt(i);
    for (j = 0;  j < length;  j++)
    {
        if (leCar==current_filter.charAt(j)) break;
    }
    if (j == length)
    {
        alert(Msg);
    /*Cf doc. pour l'algorithme de la méthode slice*/
        document.getElementById(event.target.id).value=event.target.value.slice("0", i);
        break;
    }
} 
```

评论：

1.  就我个人而言，我不应该认为这段代码对回答原始问题有用；
2.  变量和注释是法语的，这可能会使某些人难以阅读——对此感到抱歉；
3.  此函数与 HTML 表单中的“onchange”事件相关联；
4.  'g' 变量（例如 gFiltreALPHANUM2）是在同一个 .js 文件中其他地方定义的广泛范围的向量，以便函数可以访问它们。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T04:59:41.973

Bergi 可能是对的：您的文件可能以错误的编码保存或交付。将 UTF-8 视为 Unicode 字符集的良好支持编码。要测试这个想法，您可以临时调整脚本以将 a-with-acute-accent 输出到页面中，无论是在字段中还是作为文本节点。在字符串文字中使用逐字字符，而不是八进制转义码。如果它出现乱码，则该字符没有以其原始形式进入浏览器，并且您遇到了编码问题。

如果确认编码问题，您需要正确保存文件，或调整响应字符编码，这取决于您的特定 Web 服务器。[通过使用Fiddler](http://www.fiddler2.com/fiddler2/)并检查 Content-Type 响应标头，您可以找到 Web 服务器提供的当前编码。如果 Web 服务器已经认为您的文件采用了正确的编码（最好是 UTF-8），那么请检查您的文本编辑器以确保它以完全相同的编码保存 JavaScript 文件。

我写这个作为答案是因为我认为我不能直接评论这个问题。

# objective-c - NSFetchedResultsController 不调用 controllerDidChangeContent: 更新到非获取的 NSManagedObject

> ID：14018068
> 
> 赞同：13
> 
> 时间：2012-12-24T06:49:44.757
> 
> 标签：objective-c, ios, core-data, nsfetchedresultscontroller

1.  我填充和`save:`初始`NSManagedObjectContext`
2.  设置`NSFetchedResultsController`一个不同的`NSManagedObjectContext`，它过滤`boolean`“显示”属性。
3.  最后在另一个`NSManagedObjectContext`和上更新“显示” `save:`。

我希望这会导致我`NSFetchedResultsController`打电话给`NSFetchedResultsControllerDelegate`'s `controllerDidChangeContent:`。我从来没有接到那个电话。[带有谓词的 NSFetchedResultsController 忽略从不同 NSManagedObjectContext](https://stackoverflow.com/questions/3923826/nsfetchedresultscontroller-with-predicate-ignores-changes-merged-from-different)[接受](https://stackoverflow.com/questions/3923826/nsfetchedresultscontroller-with-predicate-ignores-changes-merged-from-different/3927811#3927811)的答案合并的更改表明除了`controllerDidChangeContent:`，我应该得到一个`NSManagedObjectContextObjectsDidChangeNotification`，但我也没有收到。

完整的代码示例包含在下面和[github 上](https://github.com/hborders/NSFetchedResultsControllerUpdateUnfetchedBug)。[我已经向 Apple 提交了一份雷达文件](http://openradar.appspot.com/12930409)。

```
@interface HJBFoo : NSManagedObject

@property (nonatomic, retain) NSString *name;
@property (nonatomic, retain) NSNumber *show;

@end

@interface HJBAppDelegate () <NSFetchedResultsControllerDelegate>

@property (nonatomic, strong) NSPersistentStoreCoordinator *persistentStoreCoordinator;
@property (nonatomic, strong) NSManagedObjectContext *initialManagedObjectContext;
@property (nonatomic, strong) NSManagedObjectContext *fetchedResultsControllerManagedObjectContext;
@property (nonatomic, strong) NSFetchedResultsController *fetchedResultsController;

@end

@implementation HJBAppDelegate

#pragma mark - UIApplicationDelegate

- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];
    self.window.backgroundColor = [UIColor whiteColor];
    self.window.rootViewController = [UIViewController new];

    NSAttributeDescription *nameAttributeDescription = [NSAttributeDescription new];
    [nameAttributeDescription setAttributeType:NSStringAttributeType];
    [nameAttributeDescription setIndexed:NO];
    [nameAttributeDescription setOptional:NO];
    [nameAttributeDescription setName:@"name"];

    NSAttributeDescription *showAttributeDescription = [NSAttributeDescription new];
    [showAttributeDescription setAttributeType:NSBooleanAttributeType];
    [showAttributeDescription setIndexed:YES];
    [showAttributeDescription setOptional:NO];
    [showAttributeDescription setName:@"show"];

    NSEntityDescription *fooEntityDescription = [NSEntityDescription new];
    [fooEntityDescription setManagedObjectClassName:@"HJBFoo"];
    [fooEntityDescription setName:@"HJBFoo"];
    [fooEntityDescription setProperties:@[
     nameAttributeDescription,
     showAttributeDescription,
     ]];

    NSManagedObjectModel *managedObjectModel = [NSManagedObjectModel new];
    [managedObjectModel setEntities:@[
     fooEntityDescription,
     ]];

    self.persistentStoreCoordinator = [[NSPersistentStoreCoordinator alloc] initWithManagedObjectModel:managedObjectModel];
    NSError *error = nil;
    if ([self.persistentStoreCoordinator addPersistentStoreWithType:NSInMemoryStoreType
                                                      configuration:nil
                                                                URL:nil
                                                            options:nil
                                                              error:&error]) {
        self.initialManagedObjectContext = [NSManagedObjectContext new];
        [self.initialManagedObjectContext setPersistentStoreCoordinator:self.persistentStoreCoordinator];

        HJBFoo *foo1 = [NSEntityDescription insertNewObjectForEntityForName:@"HJBFoo"
                                                     inManagedObjectContext:self.initialManagedObjectContext];
        foo1.name = @"1";
        foo1.show = @YES;

        HJBFoo *foo2 = [NSEntityDescription insertNewObjectForEntityForName:@"HJBFoo"
                                                     inManagedObjectContext:self.initialManagedObjectContext];
        foo2.name = @"2";
        foo2.show = @NO;

        error = nil;
        if ([self.initialManagedObjectContext save:&error]) {
            NSFetchRequest *fetchRequest = [NSFetchRequest fetchRequestWithEntityName:@"HJBFoo"];
            [fetchRequest setReturnsObjectsAsFaults:NO];

            error = nil;
            NSArray *initialFoos = [self.initialManagedObjectContext executeFetchRequest:fetchRequest
                                                                                   error:&error];
            if (initialFoos) {
                NSLog(@"Initial: %@", initialFoos);

                self.fetchedResultsControllerManagedObjectContext = [NSManagedObjectContext new];
                [self.fetchedResultsControllerManagedObjectContext setPersistentStoreCoordinator:self.persistentStoreCoordinator];

                NSFetchRequest *shownFetchRequest = [NSFetchRequest fetchRequestWithEntityName:@"HJBFoo"];
                [shownFetchRequest setPredicate:[NSPredicate predicateWithFormat:@"show == YES"]];
                [shownFetchRequest setSortDescriptors:@[
                 [NSSortDescriptor sortDescriptorWithKey:@"name"
                                               ascending:YES],
                 ]];

                self.fetchedResultsController = [[NSFetchedResultsController alloc] initWithFetchRequest:shownFetchRequest
                                                                                    managedObjectContext:self.fetchedResultsControllerManagedObjectContext
                                                                                      sectionNameKeyPath:nil
                                                                                               cacheName:nil];
                self.fetchedResultsController.delegate = self;
                error = nil;
                if ([self.fetchedResultsController performFetch:&error]) {
                    NSLog(@"Initial fetchedObjects: %@", [self.fetchedResultsController fetchedObjects]);

                    [[NSNotificationCenter defaultCenter] addObserver:self
                                                             selector:@selector(managedObjectContextDidSave:)
                                                                 name:NSManagedObjectContextDidSaveNotification
                                                               object:nil];
                    [[NSNotificationCenter defaultCenter] addObserver:self
                                                             selector:@selector(managedObjectContext2ObjectsDidChange:)
                                                                 name:NSManagedObjectContextObjectsDidChangeNotification
                                                               object:self.fetchedResultsControllerManagedObjectContext];

                    dispatch_after(dispatch_time(DISPATCH_TIME_NOW, 0.5 * NSEC_PER_SEC),
                                   dispatch_get_main_queue(),
                                   ^(void){
                                       NSManagedObjectContext *managedObjectContext3 = [NSManagedObjectContext new];
                                       [managedObjectContext3 setPersistentStoreCoordinator:self.persistentStoreCoordinator];

                                       NSFetchRequest *foo2FetchRequest = [NSFetchRequest fetchRequestWithEntityName:@"HJBFoo"];
                                       [foo2FetchRequest setFetchLimit:1];
                                       [foo2FetchRequest setPredicate:[NSPredicate predicateWithFormat:@"name == %@",
                                                                       @"2"]];
                                       NSError *editingError = nil;
                                       NSArray *editingFoos = [managedObjectContext3 executeFetchRequest:foo2FetchRequest
                                                                                                   error:&editingError];
                                       if (editingFoos) {
                                           HJBFoo *editingFoo2 = [editingFoos objectAtIndex:0];
                                           editingFoo2.show = @YES;

                                           editingError = nil;
                                           if ([managedObjectContext3 save:&editingError]) {
                                               NSLog(@"Save succeeded. Expected (in order) managedObjectContextDidSave, controllerDidChangeContent, managedObjectContext2ObjectsDidChange");
                                           } else {
                                               NSLog(@"Editing save failed: %@ %@", [error localizedDescription], [error userInfo]);
                                           }
                                       } else {
                                           NSLog(@"Editing fetch failed: %@ %@", [error localizedDescription], [error userInfo]);
                                       }

                                   });
                } else {
                    NSLog(@"Failed initial fetch: %@ %@", [error localizedDescription], [error userInfo]);
                }
            } else {
                NSLog(@"Failed to performFetch: %@ %@", [error localizedDescription], [error userInfo]);
            }
        } else {
            NSLog(@"Failed to save initial state: %@ %@", [error localizedDescription], [error userInfo]);
        }
    } else {
        NSLog(@"Failed to add persistent store: %@ %@", [error localizedDescription], [error userInfo]);
    }

    [self.window makeKeyAndVisible];
    return YES;
}

#pragma mark - NSFetchedResultsControllerDelegate

- (void)controllerDidChangeContent:(NSFetchedResultsController *)controller {
    NSLog(@"controllerDidChangeContent: %@",
          [self.fetchedResultsController fetchedObjects]);
}

#pragma mark - notifications

- (void)managedObjectContextDidSave:(NSNotification *)notification {
    NSManagedObjectContext *managedObjectContext = [notification object];
    if (([managedObjectContext persistentStoreCoordinator] == self.persistentStoreCoordinator) &&
        (managedObjectContext != self.fetchedResultsControllerManagedObjectContext)) {
        NSLog(@"managedObjectContextDidSave: %@", notification);
        [self.fetchedResultsControllerManagedObjectContext mergeChangesFromContextDidSaveNotification:notification];
    }
}

- (void)managedObjectContext2ObjectsDidChange:(NSNotification *)notification {
    NSLog(@"managedObjectContext2ObjectsDidChange: %@", notification);
}

@end

@implementation HJBFoo

@dynamic name;
@dynamic show;

@end 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-12-24T13:05:37.027

在我看来，将[NSFetchedResultsController 的修复/解决方法与谓词忽略从不同的 NSManagedObjectContext 合并的更改也](https://stackoverflow.com/questions/3923826/nsfetchedresultscontroller-with-predicate-ignores-changes-merged-from-different/3927811#3927811)可以解决您的问题。您的`managedObjectContextDidSave`方法将如下所示：

```
- (void)managedObjectContextDidSave:(NSNotification *)notification {
    NSManagedObjectContext *managedObjectContext = [notification object];
    if (([managedObjectContext persistentStoreCoordinator] == self.persistentStoreCoordinator) &&
        (managedObjectContext != self.fetchedResultsControllerManagedObjectContext)) {
        NSLog(@"managedObjectContextDidSave: %@", notification);

        // Fix/workaround from https://stackoverflow.com/questions/3923826/nsfetchedresultscontroller-with-predicate-ignores-changes-merged-from-different/3927811#3927811
        for(NSManagedObject *object in [[notification userInfo] objectForKey:NSUpdatedObjectsKey]) {
            [[self.fetchedResultsControllerManagedObjectContext objectWithID:[object objectID]] willAccessValueForKey:nil];
        }

        [self.fetchedResultsControllerManagedObjectContext mergeChangesFromContextDidSaveNotification:notification];
    }
} 
```

并且 NSLog 输出看起来像预期的那样：

```
Initial: (
    "<HJBFoo: 0xaa19670> (entity: HJBFoo; id: 0xaa1afd0 <x-coredata://07E97098-E32D-45F6-9AB4-F9DAB9B0AC1A/HJBFoo/p2> ; data: {\n    name = 1;\n    show = 1;\n})",
    "<HJBFoo: 0xaa1a200> (entity: HJBFoo; id: 0xaa1af50 <x-coredata://07E97098-E32D-45F6-9AB4-F9DAB9B0AC1A/HJBFoo/p1> ; data: {\n    name = 2;\n    show = 0;\n})"
)
Initial fetchedObjects: (
    "<HJBFoo: 0x74613f0> (entity: HJBFoo; id: 0xaa1afd0 <x-coredata://07E97098-E32D-45F6-9AB4-F9DAB9B0AC1A/HJBFoo/p2> ; data: <fault>)"
)
managedObjectContextDidSave: NSConcreteNotification 0xaa1f480 {name = NSManagingContextDidSaveChangesNotification; object = <NSManagedObjectContext: 0xaa1ed90>; userInfo = {
    inserted = "{(\n)}";
    updated = "{(\n    <HJBFoo: 0xaa1f2d0> (entity: HJBFoo; id: 0xaa1af50 <x-coredata://07E97098-E32D-45F6-9AB4-F9DAB9B0AC1A/HJBFoo/p1> ; data: {\n    name = 2;\n    show = 1;\n})\n)}";
}}
Save succeeded. Expected (in order) managedObjectContextDidSave, controllerDidChangeContent, managedObjectContext2ObjectsDidChange
controllerDidChangeContent: (
    "<HJBFoo: 0x74613f0> (entity: HJBFoo; id: 0xaa1afd0 <x-coredata://07E97098-E32D-45F6-9AB4-F9DAB9B0AC1A/HJBFoo/p2> ; data: {\n    name = 1;\n    show = 1;\n})",
    "<HJBFoo: 0xaa1f9c0> (entity: HJBFoo; id: 0xaa1af50 <x-coredata://07E97098-E32D-45F6-9AB4-F9DAB9B0AC1A/HJBFoo/p1> ; data: {\n    name = 2;\n    show = 1;\n})"
)
managedObjectContext2ObjectsDidChange: NSConcreteNotification 0xaa1fbb0 {name = NSObjectsChangedInManagingContextNotification; object = <NSManagedObjectContext: 0x745fa50>; userInfo = {
    managedObjectContext = "<NSManagedObjectContext: 0x745fa50>";
    refreshed = "{(\n    <HJBFoo: 0xaa1f9c0> (entity: HJBFoo; id: 0xaa1af50 <x-coredata://07E97098-E32D-45F6-9AB4-F9DAB9B0AC1A/HJBFoo/p1> ; data: {\n    name = 2;\n    show = 1;\n})\n)}";
}} 
```

所以会发生以下事情：

*   在“背景”上下文中进行更改`managedObjectContext3`并保存。
*   您收到一个`NSManagedObjectContextDidSaveNotification`并被`managedObjectContextDidSave:`调用。此通知包含在后台上下文中更新的对象。
*   打电话

    ```
    [self.fetchedResultsControllerManagedObjectContext mergeChangesFromContextDidSaveNotification:notification]; 
    ```

    now*不会做任何事情*，因为更新的对象还没有被加载到`fetchedResultsControllerManagedObjectContext`或者是一个错误。特别是，此上下文不会发布 a`NSManagedObjectContextObjectsDidChangeNotification`并且获取的结果控制器不会更新。

*   但是调用`willAccessValueForKey`更新的对象首先会强制`fetchedResultsControllerManagedObjectContext`加载这些对象并触发错误。
*   打电话

    ```
    [self.fetchedResultsControllerManagedObjectContext mergeChangesFromContextDidSaveNotification:notification]; 
    ```

    之后实际上更新了`fetchedResultsControllerManagedObjectContext`.

*   因此 a`NSManagedObjectContextObjectsDidChangeNotification`被发布并且获取的结果控制器调用相应的委托函数。

# ruby-on-rails-3 - 来自其他主机的 Resque Worker 在我的系统上注册并处于活动状态

> ID：14018070
> 
> 赞同：1
> 
> 时间：2012-12-24T06:49:50.837
> 
> 标签：ruby-on-rails-3, amazon-web-services, amazon-ec2, redis, resque

我目前正在处理的 Rails 应用程序托管在 Amazon EC2 服务器上。它使用 Resque 运行后台作业，并且有 2 个这样的实例（将是生产和一个阶段）。此外，我已将 Resque 监控网络应用程序安装到 /resque 路线（仅在舞台上）。

这是我的问题：为什么在我的舞台系统中注册了来自多个主机的工作人员，我该如何避免这种情况？

一些额外的细节：我看到来自 3 台不同机器的工人，但我设法识别出其中的 2 台——舞台（显然）和生产。第三个有另一种地址格式（以 domU 开头）并且不知道它可能是什么。

![外国工人](../Images/c9333c3684c0224fc3fd6a51e94c1bcd.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-29T17:13:49.753

看起来您正在跨多个 resque 服务器环境共享单个 Redis 服务器。

安全地执行此操作的最佳方法是使用单独的 Redis 服务器或单独的 Redis 数据库或命名空间。Redis-namespace gem 可以与 Resque 一起使用，以隔离每个环境 Resque 队列和工作数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-09T01:43:12.690

我无法真正帮助您了解未知的内容，但是在移动主机和更改 dns 名称时发生了类似的事情。我发现清除旧的唯一方法是停止机器上的所有工作人员，启动 IRB，`require 'resque'`然后查看`Resque.workers`. 这将列出 resque 知道的所有工作人员，在您的情况下将包括大约 20 个虚假工作人员。然后你可以这样做：

```
Resque.workers.each do {|worker| worker.unregister_worker} 
```

这应该会修剪所有不存在的工人，并让您重新正确展示真正的工人。

# javascript - 无需提示的地理位置

> ID：14018071
> 
> 赞同：6
> 
> 时间：2012-12-24T06:50:11.677
> 
> 标签：javascript, geolocation

我知道 HTML5 进行地理定位的方法，但需要注意的是它必须提示用户获得许可。

```
navigator.geolocation.getCurrentPosition 
```

当我想直接在主页上进行地理定位以根据位置提供定制内容时，这会变得特别烦人：没有人喜欢在每次访问您的网站时得到提示。

这个想法是使用外部服务根据 IP 地址或类似的东西进行地理定位，以获得对用户位置的不太准确的估计，并仅在该位置真正关闭时给用户一个提示。关于我可以为此目的使用的服务有什么好的建议吗？

我知道谷歌已经这样做了：[当前位置](http://www.google.com/search?q=current%20location)。它会显示您当前的位置，而不会给您任何提示。有谁知道如何做到这一点？

MaxMind 数据库很好，但为了这个目的，需要维护一个巨大的 IP 数据库。首选 API 或 Google 服务。

我目前使用从 Google Loader 返回的位置对象来估计位置，但它不如上面的 Google 搜索示例准确。

```
google.loader.ClientLocation.latitude
google.loader.ClientLocation.longitude 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2017-08-09T19:36:39.860

如果您不介意使用 3rd 方 API，可以使用我们的服务[https://ip-api.io](https://ip-api.io)。它使用客户端的 IP 地址，不需要用户的任何许可。

Javascript 示例：

```
$.getJSON("http://ip-api.io/json/",
    function(result) {
        console.log(result);
    }); 
```

然后您可以从`result.latitude`和获取位置`result.longitude`。[https://ip-api.io](https://ip-api.io)提供更多数据，例如国家、城市、邮政编码、时区以及此 IP 地址是机器人、垃圾邮件发送者还是 TOR 节点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-02-21T06:49:52.800

谷歌`current location`之所以有效，是因为您在给定浏览器的某个时间点授予了谷歌您所在位置的权利。如果您要打开任何新浏览器并执行相同的查询，您会发现它只能产生一个更通用的位置。

我一直在尝试自己找到这个问题的答案，而您使用 Google 的加载程序走在了正确的轨道上。问题在于，由于 HTML5 产品的可靠性和准确性，它或多或少地被弃用了。

我很好奇您是否找到了解决方法。有些人可能会建议使用 maxmind，尽管我发现它与 google.loader 一样准确（更不准确）。

为什么浏览器会提示输入此类信息是有道理的，我只是很惊讶除了使用 IP 之外没有某种解决方法/黑客。

# android - 如何在android中将照片发布到tumblr？

> ID：14018074
> 
> 赞同：1
> 
> 时间：2012-12-24T06:50:25.640
> 
> 标签：android, share, tumblr

我必须通过单击按钮将照片发布到“tumblr”。我尝试了以下方式与 tumblr 连接，但不幸的是我没有通过..！

我的回调 URL 正确吗？我的回拨 URL 出现问题。

```
public class TumblrDemoActivity extends Activity {

private static final String TAG = "TumblrDemo";

private static final String REQUEST_TOKEN_URL = "https://www.tumblr.com/oauth/request_token";
private static final String ACCESS_TOKEN_URL = "https://www.tumblr.com/oauth/access_token";
private static final String AUTH_URL = "https://www.tumblr.com/oauth/authorize";

// Taken from Tumblr app registration
private static final String CONSUMER_KEY = "MY_CONSUMER_KEY";
private static final String CONSUMER_SECRET = "MY_SECRET_KEY";
private static final String CALLBACK_URL = "tumblrdemo://tumblrdemo.com/ok";

/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    // To get the oauth token after the user has granted permissions
    Uri uri = this.getIntent().getData();
    if (uri != null) {

        String token = uri.getQueryParameter("oauth_token");
        String verifier = uri.getQueryParameter("oauth_verifier");

        Log.v(TAG, "Token:" + token);
        Log.v(TAG, "Verifier:" + verifier);
    } else {

        CommonsHttpOAuthConsumer consumer = new CommonsHttpOAuthConsumer(
                CONSUMER_KEY, CONSUMER_SECRET);

        // It uses this signature by default
        // consumer.setMessageSigner(new HmacSha1MessageSigner());

        CommonsHttpOAuthProvider provider = new CommonsHttpOAuthProvider(
                REQUEST_TOKEN_URL, ACCESS_TOKEN_URL, AUTH_URL);

        String authUrl;
        try {
            authUrl = provider.retrieveRequestToken(consumer, CALLBACK_URL);
            Log.v(TAG, "Auth url:" + authUrl);

            startActivity(new Intent("android.intent.action.VIEW",
                    Uri.parse(authUrl)));

        } catch (OAuthMessageSignerException e) {
            Log.v(TAG, "Auth url:" + e.getMessage());
        } catch (OAuthNotAuthorizedException e) {
            Log.v(TAG, "Auth url:" + e.getMessage());
        } catch (OAuthExpectationFailedException e) {
            Log.v(TAG, "Auth url:" + e.getMessage());
        } catch (OAuthCommunicationException e) {
            Log.v(TAG, "Auth url:" + e.getMessage());
        }

    }

}

/*
 * (non-Javadoc)
 * 
 * @see android.app.Activity#onResume()
 */
@Override
protected void onResume() {
    // TODO Auto-generated method stub
    super.onResume();

    Log.v(TAG, "onResume");
}
} 
```

是否有任何其他 Android SDK 可用于在 tumblr 中共享照片。我究竟做错了什么..？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T06:05:34.947

试试这个而不是你的 CALLBACK_URL，它可能会解决你的问题。

```
public static final String OAUTH_CALLBACK_URL = "oauthflow-tumblr://callback"; 
```

# c# - 用于身份验证的 SQL 登录技术

> ID：14018078
> 
> 赞同：0
> 
> 时间：2012-12-24T06:50:44.787
> 
> 标签：c#, asp.net, sql, sql-server

我有一个非常基本的问题，想知道其他专家是如何做到这一点
的。我有一个拥有大约 100 名用户的应用程序。我一直在使用 SQL LOGINS 对这些用户进行身份验证。这些用户强制执行密码策略。当任何用户的密码过期时我都会遇到困难，即我必须自己从 SSMS 重置它。有时它与我所做的其他任务一起成为一项艰巨的工作。

一些专家告诉我，创建自己的用户表并在该表中包含所有用户详细信息是一种很好的做法。我创建了一个包含以下列的用户表。

*   用户身份
*   用户名
*   密码
*   密码创建日期
*   密码到期日
*   密码激活

一个简单的问题。我的用户如何连接到数据库。当然，我需要来自应用程序的连接字符串。该连接字符串需要用户名和密码，不是吗？并且除非我连接到数据库，否则我无法从用户表中获取信息。

另一个问题，我如何跟踪最后 5 个密码。该策略规定用户不能使用最近 5 个已使用的密码中的任何一个。

如果我能找到一个解决方案，通知我的用户他们的密码将在 'n' 天后到期并且他们必须在它到期之前更改它，那么所有这些都可以避免。

其他开发人员在对其用户进行身份验证时会做什么。请指导我

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T07:11:58.913

如果您将用户的登录凭据保存在数据库中，那么要访问 sql server 本身，您可能只需要一次登录整个应用程序。此登录名将拥有对您的数据库的完全访问权限，因为您的应用程序可以强制执行访问权限。

如果你走这条路，你需要注意两件事：

1.  对于需要通过 Reporting Services、Crystal Reports、Infomaker 等工具为用户提供临时报告功能的大型应用程序，仍然存在安全问题。在这种情况下，用户可以使用这些报告工具获得对以下领域的读取访问权限他们不应该看到的数据库。
2.  如果您为用户存储自己的凭证信息，则需要确保正确执行。这意味着没有纯文本密码。您需要一个加密安全密码哈希（不是 md5！）和每个用户的盐。如果这对你来说是希腊语，最好不要管它。

对您开放的另一个选择是为您的数据库使用 Active Directory/Windows 身份验证。这里的诀窍是您仍然必须为所有用户设置访问权限。但是，您可以为此使用 Active Directory 组来减少您需要创建的登录次数，并且它至少可以防止您需要手动重置 Sql Server 登录，因为用户将使用他们的 Active Directory 帐户登录。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-24T07:05:20.810

Web 应用程序中一个非常常见的场景是使用一个用户名/密码（因此只有一个 sql 登录名，通常是某种专用登录名，对应用程序具有最低限度的权限）。这样，可以使用连接池。这当然是一个后端帐户，在 web.config 中配置并且对最终用户不可见。

用户在应用程序中作为一种数据进行维护。Asp.net 带有一个称为 Membership 的解决方案。用户身份验证是针对成员资格提供程序完成的，并且有几个类为您提供对身份验证、角色等的编程支持。例如，您可以使用 AD 作为提供程序，或表单身份验证。或者你可以自己写。

由于您现在为每个用户使用专用的 sql 登录，因此您需要注意这种方法将数据访问安全性转移到了应用程序级别。因此，这可能并不总是适合您的需求。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-24T07:01:07.357

理想情况下，您将使用现有的 Active Directory 基础架构来处理您对单个用户的身份验证/授权，然后您可以将最终用户的凭据通过 Web 服务器传递到您的 SQL 服务器（您可能需要考虑处理 Kerberos “双跳问题”来实现这一点）。

但是如果做不到这一点，设置起来很容易，这样*应用程序*本身就有一个 SQL 登录名来访问数据库，以便检索*用户*级别的身份验证信息。用户密码的单向哈希将确保即使从连接字符串中读取应用程序的密码，也无法获取用户密码。

或者介于这两种解决方案之间，*应用程序*在 AD 中有一个*服务帐户*，它可以访问 SQL 数据库，以便从数据库中检索*用户*帐户信息。

无论哪种方式，如果 AD 可用，您可以使用 Kerberos[服务点名称](http://msdn.microsoft.com/en-us/library/windows/desktop/ms677949%28v=vs.85%29.aspx)进一步保护以确保仅从您预期的端点（即 ASP.NET 服务器）访问数据库。

# php - ajax请求的json数据未发送

> ID：14018083
> 
> 赞同：1
> 
> 时间：2012-12-24T06:51:06.903
> 
> 标签：php, ajax, jquery, extjs

我想将 json 数据发送到 php 文件。当我将它作为查询字符串发送时，发送了一半的数据，当我以以下方式发送它时，根本什么都没有发送

```
 Ext.Ajax.request({
        url: 'GetData.php',
         params: {
            data:document.getElementById("jsonData").value

          },
       method: "POST",

        contentType: 'application/json; charset=utf-8',
        dataType: 'json',
        success: function(xhr) {
       console.log(xhr)
        }
 }); 
```

我以不同的方式修改了我的 ajax 调用，但它总是发送 null。在发出 ajax 请求之前，我已经检查了我的隐藏字段“jsonData”中是否有数据。请帮助这里是json数据-

```
{"items":[{"text":"Table of Contents","items":[{"text":"Cover","source":"book/00__Cover.html","leaf":true,"items":"[]"},
{"text":"Introduction","source":"book/Introduction.html","leaf":true,"items":"[{\"text\":\"Me maps\",\"source\":\"book/Introduction.html#c000030\\\"\",\"leaf\":true},{\"text\":\"Spatial perspective\",\"source\":\"book/Introduction.html#c000031\\\"\",\"leaf\":true}]"},{"text":"Index","source":"book/Index.html","leaf":true,"items":"[]"}]},{"text":"My Study Guide","source":"studyguide.js","leaf":true},{"text":"Shared","source":"shared.js","leaf":true}]} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T07:15:13.720

```
 headers: { 'Content-Type': 'application/json' }, 
    jsonData: {
        document.getElementById("jsonData").value
    }, 
```

如果您更改这些内容但可能会删除，那*应该可以工作*

```
dataType: 'json', 
```

以及。我从来没有用过，也不知道它是否存在你也不能设置字符集，它会以 utf-8 形式发送它，不管你做什么

**编辑**也记录 jsondata.val 就像我上面的人说的那样只是为了确保

**编辑2**

```
 Ext.Ajax.request({
        url: 'GetData.php',
        headers: { 'Content-Type': 'application/json' }, 
        jsonData: {
            document.getElementById("jsonData").value
        },
        method: "POST",
        dataType: 'json',
        success: function(xhr) {
            console.log(xhr);
        }
 }); 
```

你把你的代码改成这样了吗？你也试过记录你的失败错误吗？如果是这样，它会说什么。你错过了一个 ; 在你的成功功能中

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-24T07:11:31.653

我认为您需要将您的 ajax 调用更改为此（假设`("jsonData").value`确实包含一个 json 对象）：

```
Ext.Ajax.request({
    url: 'GetData.php',
    jsonData: Ext.util.JSON.encode(document.getElementById("jsonData").value)
    method: "POST",
    success: function(xhr) {
      console.log(xhr)
    }
}); 
```

在这里阅读更多：http: [//joekuan.wordpress.com/2010/12/06/posting-json-data-from-ext-js-to-php/](http://joekuan.wordpress.com/2010/12/06/posting-json-data-from-ext-js-to-php/)

# lucene - 搜索引擎如何执行精确的短语搜索？

> ID：14018084
> 
> 赞同：0
> 
> 时间：2012-12-24T06:51:11.350
> 
> 标签：lucene, search-engine

我正在使用 Lucene 在数据集中进行搜索，我现在需要如何实现“”搜索（我的意思是精确短语搜索）机制？

我想让它能够在用户输入“littlecat”时产生所有“little cat”命中。我现在应该操作索引代码，但至少我现在应该“”搜索如何工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-05T07:52:31.550

实现这一点的一种方法是**动态编程**- 使用字典/语料库将您的单个单词与（以及将文本解析为字符串后剩余的单词进行比较）。

把它想象成你正在编写一个自定义拼写检查器或类似的东西。在这种情况下，还有一种情况，可能会留下多个单词组合，例如- **“walkingmydoginrain”** -在这里您可以将第一个单词分解为“walk”或“walking”，这就是DP的美妙之处-因为您（从您的语料库中）知道您不能从**“ingmydoginrain”**（即字符串的其余部分）中形成合法的单词——您刚刚发现在这种情况下——*您应该选择分段词作为“Walking”而不是 walk。*

还可以将其视为无法找到匹配项正在添加到您定义的**COST 函数**中，因此您应该获得最佳结果 - 这意味着您可以确定您的文本（未用空格分隔）肯定会被破坏成合法*的单词-尽管该行中可能有多个可能的单词序列*（因此，寻求此内容的人的意图也可能）

您应该能够在网络上为您的用例找到相当不错的基本实现（另请阅读：Google 如何实现 - “您的意思是”）

现在，另请参阅 - [如何将没有空格的文本拆分为单词列表？](https://stackoverflow.com/questions/8870261/how-to-split-text-without-spaces-into-list-of-words)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-24T06:59:52.030

*我想让它能够在用户输入“littlecat”时产生所有“little cat”命中*

这听起来很容易，但实施起来却非常困难。对于人类来说 little 和 cat 是两个不同的词，但对于计算机来说，它不知道 little 和 cat 与**littlecat**分开，除非你有字典并且你的代码检查字典中的这两个词。另一方面，搜索“**小猫**”也可以轻松搜索“**小猫**”。而且我相信这超出了精确短语搜索的概念。**如果您搜索“ littlecat** ”，则精确短语搜索只会返回 littlecat ，反之亦然。即使谷歌看似（预期也是），在 littlecat 搜索中也不返回“小猫”

# objective-c - 以其他 Box 用户身份登录

> ID：14018085
> 
> 赞同：0
> 
> 时间：2012-12-24T06:51:15.223
> 
> 标签：objective-c, ios, box-api

我正在尝试将我的 iPad 应用程序与 Box 集成。我遇到了 Box API 的问题，其中一个用户帐户中的文件被返回给其他用户。以下是重现此问题的步骤：

1.  [如本](http://developers.box.com/oauth/)指南中所述，进行授权调用并获取访问令牌。对于登录，我在 Safari 中打开 Box 登录页面。我为重定向 url 指定了一个自定义 url 方案，它会在用户登录后打开我的应用程序。
2.  获得访问令牌后，调用以列出根文件夹的内容。这成功了。
3.  从 iPad 上删除应用程序并重建它。
4.  再次进入登录过程（如第 1 步），但这次使用不同的 Box 帐户登录。这次您将获得一个新的访问代码和 OAuth 令牌。
5.  如果您使用新令牌进行调用以列出文件，您将收到来自早期帐户的响应。理想情况下，它应该返回当前授权用户的文件。

Box 是仅使用 OAuth 来返回响应还是也使用 cookie？因为在身份验证和接收访问令牌之后，我还看到了来自 Box 的 cookie（使用 验证`[[NSHTTPCookieStorage sharedStorage] cookies]`）。

我尝试通过在启动身份验证流程之前删除所有 Box cookie 来重复上述过程。此外，我没有将 OAuth 令牌保存在磁盘上并检索它。我不会以任何方式保存/缓存响应。

我注意到的另一件事是，在 Safari 中可以有两个 Box 用户同时登录。此外，如果我发出身份验证请求，获取访问令牌并再次发出身份验证请求，它会再次显示登录页面（而不是显示允许/拒绝访问页面）。这是故意的吗？

*我正在使用 Box v2 API 和 iOS 5/6*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T11:02:08.703

经过进一步检查，问题似乎与 Box 服务器缓存响应有关。我使用从 iPad 应用程序创建的两个不同的访问令牌对 curl 进行了快速测试。我调用了两个令牌来获取根文件夹的用户文件。结果是正确的，即我得到了每个帐户的正确文件。

当我在 iPad 应用程序上进行相同的测试时，一个用户的文件被返回给另一个用户。如果我在两次登录之间保持相当大的差距，我得到了正确的文件。

为了永久解决这个问题，我将`Cache-Control`标题设置`no-cache`为获取用户文件的请求。

但奇怪的是我必须这样做。Box 需要检查他们的缓存验证逻辑恕我直言。

# java - JBoss 5.1.0GA“用户 null 未通过身份验证”问题

> ID：14018088
> 
> 赞同：3
> 
> 时间：2012-12-24T06:51:47.970
> 
> 标签：java, security, jboss, null

我有一个运行服务器的 jBoss 5.1.0-GA，它正在运行查找。但我将整个 jboss 复制到另一台服务器（通过使用 tar）。当我启动新的 jBoss 时，它给出“用户 null 未通过身份验证”，这是堆栈跟踪

```
[ExceptionUtil] 
ConnectionFactoryEndpoint[jboss.messaging.connectionfactory:service=ConnectionFactory] 
createFailoverConnectionDelegate [nb-z2y983bh-1-4b8983bh-kwpr33-100j3]
javax.jms.JMSSecurityException: User null is NOT authenticated
at 
org.jboss.jms.server.jbosssx.JBossASSecurityMetadataStore.authenticate(JBossASSecurityMetadataStore.java:223)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
at java.lang.reflect.Method.invoke(Method.java:597)
at com.sun.jmx.mbeanserver.StandardMBeanIntrospector.invokeM2(StandardMBeanIntrospector.java:93)
at 
com.sun.jmx.mbeanserver.StandardMBeanIntrospector.invokeM2(StandardMBeanIntrospector.java:27)
at com.sun.jmx.mbeanserver.MBeanIntrospector.invokeM(MBeanIntrospector.java:208)
at com.sun.jmx.mbeanserver.PerInterface.invoke(PerInterface.java:120)
at com.sun.jmx.mbeanserver.MBeanSupport.invoke(MBeanSupport.java:262)
at javax.management.StandardMBean.invoke(StandardMBean.java:391)
at org.jboss.mx.server.RawDynamicInvoker.invoke(RawDynamicInvoker.java:164)
at org.jboss.mx.server.MBeanServerImpl.invoke(MBeanServerImpl.java:668)
at org.jboss.mx.util.MBeanProxyExt.invoke(MBeanProxyExt.java:210)
at $Proxy260.authenticate(Unknown Source)
at 
org.jboss.jms.server.endpoint.ServerConnectionFactoryEndpoint.createConnectionDelegateInternal(ServerConnectionFactoryEndpoint.java:233)
at 
org.jboss.jms.server.endpoint.ServerConnectionFactoryEndpoint.createConnectionDelegate(ServerConnectionFactoryEndpoint.java:171)
at 
org.jboss.jms.server.endpoint.advised.ConnectionFactoryAdvised.org$jboss$jms$server$endpoint$advised$ConnectionFactoryAdvised$createConnectionDelegate$aop(ConnectionFactoryAdvised.java:108)
at 
org.jboss.jms.server.endpoint.advised.ConnectionFactoryAdvised.createConnectionDelegate(ConnectionFactoryAdvised.java)
at 
org.jboss.jms.wireformat.ConnectionFactoryCreateConnectionDelegateRequest.serverInvoke(ConnectionFactoryCreateConnectionDelegateRequest.java:91)
at 
org.jboss.jms.server.remoting.JMSServerInvocationHandler.invoke(JMSServerInvocationHandler.java:143)
at org.jboss.remoting.ServerInvoker.invoke(ServerInvoker.java:891)
at org.jboss.remoting.transport.local.LocalClientInvoker.invoke(LocalClientInvoker.java:106)
at org.jboss.remoting.Client.invoke(Client.java:1724)
at org.jboss.remoting.Client.invoke(Client.java:629)
at 
org.jboss.jms.client.delegate.ClientConnectionFactoryDelegate.org$jboss$jms$client$delegate$ClientConnectionFactoryDelegate$createConnectionDelegate$aop(ClientConnectionFactoryDelegate.java:171)
at 
org.jboss.jms.client.delegate.ClientConnectionFactoryDelegate$createConnectionDelegate_N3019492359065420858.invokeTarget(ClientConnectionFactoryDelegate$createConnectionDelegate_N3019492359065420858.java)
at org.jboss.aop.joinpoint.MethodInvocation.invokeNext(MethodInvocation.java:111)
at 
org.jboss.jms.client.container.StateCreationAspect.handleCreateConnectionDelegate(StateCreationAspect.java:81)
at 
org.jboss.aop.advice.org.jboss.jms.client.container.StateCreationAspect_z_handleCreateConnectionDelegate_31070867.invoke(StateCreationAspect_z_handleCreateConnectionDelegate_31070867.java)
at org.jboss.aop.joinpoint.MethodInvocation.invokeNext(MethodInvocation.java:102)
at 
org.jboss.jms.client.delegate.ClientConnectionFactoryDelegate.createConnectionDelegate(ClientConnectionFactoryDelegate.java)
at 

org.jboss.jms.client.JBossConnectionFactory.createConnectionInternal(JBossConnectionFactory.java:205)
at

org.jboss.jms.client.JBossConnectionFactory.createQueueConnection(JBossConnectionFactory.java:101)
at 

org.jboss.jms.client.JBossConnectionFactory.createQueueConnection(JBossConnectionFactory.java:95)
at 
org.jboss.resource.adapter.jms.inflow.dlq.AbstractDLQHandler.setupDLQConnection(AbstractDLQHandler.java:137)
at 
org.jboss.resource.adapter.jms.inflow.dlq.AbstractDLQHandler.setup(AbstractDLQHandler.java:83)
at 
org.jboss.resource.adapter.jms.inflow.dlq.JBossMQDLQHandler.setup(JBossMQDLQHandler.java:48)
at org.jboss.resource.adapter.jms.inflow.JmsActivation.setupDLQ(JmsActivation.java:413)
at org.jboss.resource.adapter.jms.inflow.JmsActivation.setup(JmsActivation.java:351)
at 
org.jboss.resource.adapter.jms.inflow.JmsActivation$SetupActivation.run(JmsActivation.java:729)
at org.jboss.resource.work.WorkWrapper.execute(WorkWrapper.java:205)
at org.jboss.util.threadpool.BasicTaskWrapper.run(BasicTaskWrapper.java:260)
at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
at java.lang.Thread.run(Thread.java:662)

12:01:34,859 ERROR [ExceptionUtil]
ConnectionFactoryEndpoint[jboss.messaging.connectionfactory:service=ConnectionFactory] 
createFailoverConnectionDelegate [mb-z2y983bh-1-4b8983bh-kwpr33-100j3] 
```

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-24T09:25:03.020

解决了这个问题，这发生在我们要解决其他问题时，即 com.arjuna 事务问题，在那个 jboss 不停地抛出消息，为了解决这个问题，一些帖子建议删除 jBoss 中的“数据”文件夹，当我们删除它时，数据文件夹中的超音速数据库脚本也被删除，因此出现了用户空问题，所以我们所做的就是恢复了超音速数据库脚本，现在它工作正常了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-15T03:22:08.867

另一种可能性是 bean 中指定的数据源`DatabaseServerLoginModule`（在“messaging-jboss-beans.xml”中配置）与您用于 JMS 的数据源不匹配。

当您将服务器的“deploy/messaging”目录中的“hsqldb-persistence-service.xml”文件替换为您希望用于 JMS 的数据库（例如“ postgresql-persistence-service.xml”）。

如果这样做，则需要确保 bean 的`dsJndiName`模块选项的值`DatabaseServerLoginModule`与新的“-persistence-service.xml”文件中数据存储的 JNDI 名称相匹配。只需替换`java:/DefaultDS`为您的数据源 JNDI 名称（例如`java:/MysqlDB`或其他）。

参考： http: [//www.mail-archive.com/jboss-user@lists.sourceforge.net/msg59720.html](http://www.mail-archive.com/jboss-user@lists.sourceforge.net/msg59720.html)

# asp.net-mvc - asmx Web 服务和 MVC 3 - 如何使用模型并将 Web 服务数据映射到它？

> ID：14018089
> 
> 赞同：0
> 
> 时间：2012-12-24T06:51:53.320
> 
> 标签：asp.net-mvc

我有一个 Web 服务，我想在我的 MVC Razor 视图中显示来自 Web 服务的数据。

这就是我所做的：

1）我的网络方法：

```
 [WebMethod]
    public string HelloWorld()
    {
        return "Hello World... This is a Web Service consumed 
                                               through MVC Project";
    } 
```

2) 添加了对我的 MVC 项目的 Web 引用

3）查看：

```
 <table><tr><td>

    <input type="button" id="btnSubmit" value="Get Message" 
                                       onclick="javascript:getMessage();" />

     </td></tr></table>

     <div id="Result"></div> 
```

4）我认为的脚本

```
 function getMessage() {
    var URL = "/Home/getMessage/";
    $.get(URL, function (data) {
    $("#Result").html(data);

    });
   } 
```

注意：控制器名称是 Home，操作方法是 getMessage

5) 家中的动作方法

```
 public string getMessage()
     {
     Service1 mvcServiceProxy = new Service1();
     string message = mvcServiceProxy.HelloWorld();
     return message;

     } 
```

我已按照上述步骤操作，并且能够根据我的 javascript 代码将消息输入到我的 DIV 中。

但是如果我有一个模型，并且我的模型中的属性是这样的： public string Message{ get; 放; }

如何将消息输入此属性？我需要修改我的操作方法和 Javascript 吗？我应该使用 JSON 之类的东西吗？

我不确定如何实现这一目标...

我只想使用我的属性并使用我的模型属性将 Web 服务中的内容（消息）显示到我的 Razor 视图中，而不是将 html 值传递给 DIV 并直接显示它。

请建议。

提前致谢 ！！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-31T11:28:50.360

首先，属性基本上用于从另一个类型读取/修改类中的任何私有数据。

因此，您尝试实现的目标不应该通过属性来完成。

您尝试的方式还可以，您也可以使用 Json 在一次调用中获取完整的数据列表，并根据需要将其设置在 html 页面上。

所以我建议和 Json 一起玩。

# asp.net - Sharepoint 在线上传文件表格

> ID：14018097
> 
> 赞同：0
> 
> 时间：2012-12-24T06:52:46.817
> 
> 标签：asp.net, sharepoint, file-upload, sharepoint-online, sharepoint-jsom

我可以在某些沙盒`WebPart`中为`Sharepoint`在线制作上传文件格式，如果可以，我该怎么做？

我搜索了很多，发现只有解决方案，可用于外部客户端的客户端对象模型，没有示例如何使用 JSOM（Javascript 的客户端对象模型）和通常的上传方式`asp:FileUpload`在沙盒解决方案中不起作用, PostedFile 长度 = 0

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T15:52:32.663

您确实可以选择使用 ActiveX STSUpld.UploadCtl 控件 - 这使您能够提供在文档库中看到的多文件上传。

请注意，以下内容 - 必须设置 Confirmation-URL（上传完成后的去向），并且还必须将目标设置为现有文档库。

```
<script type="text/jscript">
function DocumentUpload() {
    var uploadCtl = document.getElementById("idUploadCtl");
    uploadCtl.MultipleUpload();
}
</script>

<input type='hidden' name='Confirmation-URL' id='Confirmation-URL' value='' />
<input type='hidden' name='PostURL' id='PostURL' value='' />
<input type="hidden" name="Cmd" value="Save" />
<input type="hidden" name="putopts" value="true" /> <!-- Overwrite files -->
<input type="hidden" name="VTI-GROUP" value="0" />
<input type="hidden" name="destination" id="destination" value="/TestDL" /> <!-- Files destination path, must already exist -->
<p style="margin-left:auto;margin-right:auto;margin-top:0px;margin-bottom:0px;text-align:center;padding:0px !important; vertical-align:top;width:100%;">
    <script type="text/javascript">
        try {
            if (new ActiveXObject("STSUpld.UploadCtl"))
                document.write("<OBJECT id=\"idUploadCtl\" name=\"idUploadCtl\" CLASSID=\"CLSID:07B06095-5687-4d13-9E32-12B4259C9813\" WIDTH=\"600px\" HEIGHT=\"250px\" ></OBJECT>");
        }
        catch (error) {
        }
    </script>
<asp:Button runat="server" accesskey="O" id="OKButton" CssClass="ms-ButtonHeightWidth" OnPropertyChange="if (this.value != 'Upload files') this.click();" Text="Upload files" UseSubmitBehavior="False" OnClientClick="DocumentUpload(); return false;" />
<asp:Button runat="server" accesskey="C" id="CancelButton" CssClass="ms-ButtonHeightWidth" Text="Cancel" UseSubmitBehavior="False" OnClientClick="window.location ='<somewhere to go>'; return false;" /> 
```

希望这可以帮助....

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-25T23:07:03.137

没有太多选择，但是请查看 CodePlex 上的 SPServices - 这将是最好的起点。请记住 - SharePoint 在调用服务时需要一个二进制对象。您必须先捕获文件并将其转换为二进制文件，然后调用 Web 服务进行上传。

我有一个例子，但我在当前位置没有 - 如果上述内容没有让您开始，请告诉我，我会找到并发布。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-14T15:05:36.990

经过一番搜索，我终于找到了基于 Codeplex 的 SPServices 的解决方案。有插件 SPWidgets（[https://github.com/purtuga/SPWidgets/](https://github.com/purtuga/SPWidgets/)）。这个插件使用upload.asmx（Sharepoint的默认上传表单）加载一个iframe，然后设置显示：此页面上的所有元素都没有，exept input[type=file]并添加按钮，可以在iframe中提交表单。在提交插件捕获 iframe 状态（_onIFramePageChange 事件）并根据 iframe url 执行一些回调之后。

这看起来像一些丑陋的解决方法，但它只是我在搜索数小时后找到的有效解决方案。

# c++ - 为什么 SelectObject 被调用两次？

> ID：14018098
> 
> 赞同：0
> 
> 时间：2012-12-24T06:52:48.640
> 
> 标签：c++, windows, mfc, cdc

我在 MFC 中阅读了代码，但对下面的代码感到困惑：

```
void EditView::ResetDefaultFont()
{
    HFONT hFont = (HFONT)::GetStockObject(DEFAULT_GUI_FONT);
    CDC* pDC = GetDC();

    CFont* pFont = pDC->SelectObject(CFont::FromHandle(hFont));
    pDC->SelectObject(pFont);
    ::DeleteObject(hFont);

} 
```

为什么CDC先选择默认字体（`CFont* pFont = pDC->SelectObject(CFont::FromHandle(hFont));`），然后再选择pFont？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T07:16:20.817

第一次`SelectObject`调用会更改在设备上下文中选择的字体。

第二次`SelectObject`调用将字体重置为第一次调用之前的字体。

虽然这回答了第二次呼叫的“为什么”，这就是您所问的，但我不知道执行完整呼叫序列的意义是什么。`ResetDefaultFont`我在 MSDN Library 和本地 Visual Studio 2012 帮助中都找不到 的文档结果。为了彻底，我在 VS 2012 中创建了一个新的默认 MFC 项目，并`ResetDefaultFont`在派生自`CEditView`. 它没有编译：没有。

所以，

你从哪里得到这个`ResetDefaultFont`功能的？

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2015-07-15T08:59:35.357

答案很简单。此代码仅用于获取 DC 的当前字体。如果他们将代码放在这些语句之后，那将是显而易见的。

# c++ - 在实时摄像头视图中嵌入 ui 视图 blackberry 10

> ID：14018099
> 
> 赞同：-1
> 
> 时间：2012-12-24T06:52:54.213
> 
> 标签：c++, camera, qml, blackberry-10, blackberry-cascades

我想在相机视图 blackberry 10 中添加一些 ui，例如 github [https://github.com/blackberry/Cascades-Samples/tree/master/photobomber上的 photobomber 示例](https://github.com/blackberry/Cascades-Samples/tree/master/photobomber)

但是我想在相机处于活动状态时覆盖图像并将照片中的照片+图像保存到内存中有人可以告诉我该怎么做吗？

最好的问候，修改

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T10:13:37.860

每当您想重叠任何控件时，都应该选择 DockLayout。通过下面的代码，你应该明白了

```
Page {
    content: Container {
        gestureHandlers: [
            TapHandler {
                onTapped: cameraControl.capturePhoto()
            }
        ]
        layout: DockLayout {
        }
        Camera {
            id: cameraControl
            onCameraOpened: {
                cameraControl.startViewfinder();
            }
        }
        Button {
            horizontalAlignment: HorizontalAlignment.Center
            verticalAlignment: VerticalAlignment.Center
            text: "Overlapping button"
        }
    }
    onCreationCompleted: {
        if (cameraControl.allCamerasAccessible) {
            cameraControl.open(CameraUnit.Rear);
        }
    }
} 
```

要拍摄照片，您可以使用相机控制的 capturePhoto 方法。浏览[文档](https://developer.blackberry.com/cascades/reference/bb__cascades__multimedia__camera.html)以查找更多方法。

请注意，Camera 控件应在容器的顶部声明，其他控件应在其下方声明以重叠其上的控件。

不要忘记在 bar-descriptor 中提供相机访问权限，在 pro 文件中添加 LIBS += -lcamapi 并在 qml 中导入 bb.cascades.multimedia 1.0。

# javascript - 测量面板位于地图和网页的外侧

> ID：14018101
> 
> 赞同：1
> 
> 时间：2012-12-24T06:53:16.623
> 
> 标签：javascript, html, gis, esri, arcgis-js-api

我正在尝试使用 esri 示例 javascript 创建简单的 web 地图应用程序，但在我的应用程序中，测量面板位于地图和网页之外。测量 div 无法拉入内部。我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T08:36:09.717

测量小部件的位置在 html 文档的正文中定义，例如：

```
 <div style="position:absolute; right:20px; top:10px; z-Index:999;"> 
```

有关 ESRI Javascript 测量小部件的更多信息，请访问：[http ://help.arcgis.com/en/webapi/javascript/arcgis/jssamples/#sample/widget_measurement](http://help.arcgis.com/en/webapi/javascript/arcgis/jssamples/#sample/widget_measurement)

# knockout-2.0 - 创建 ViewModel 对象的副本时出错

> ID：14018102
> 
> 赞同：2
> 
> 时间：2012-12-24T06:53:18.730
> 
> 标签：knockout-2.0

我正在尝试通过序列化和反序列化来创建我的 ViewModel 对象的副本：

```
 var copyOfObj=  ko.mapping.fromJSON(ko.toJSON(myViewModel)) 
```

如果我对对象进行一些操作，则会出现以下错误：

未捕获的 TypeError：在无法选择的输入元素上访问 selectionDirection。

希望有人能够向我解释这个问题

谢谢

PS现在我开始认为这与编辑对话框表单有关，输入绑定到此视图模型的值

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-10T20:57:28.577

我看到了同样的问题，在我的情况下，这是由于 jQuery 对象作为我的视图模型的属性。由于我不确定的原因，它是无限循环的。

一旦我删除了财产，一切都开始工作了

# javascript - 尝试使用 Node.js Express 连接到 LinkedIn API

> ID：14018103
> 
> 赞同：1
> 
> 时间：2012-12-24T06:53:33.770
> 
> 标签：javascript, api, node.js, linkedin

我无法连接到`Linkedin`. 我必须使用`nodejs`and `express`，并且正在使用 linkedin-js 客户端 ( `https://github.com/masylum/linkedin-js`)。我到处寻找示例，但仍然不太了解如何进行“获取”调用并在页面上显示用户连接。当我使用“render”时出现错误，但是当我尝试使用“send”时，我发现 API 调用无论如何都不起作用。任何人的帮助和解释将不胜感激！这是我到目前为止所拥有的。

```
var express = require('express')
, linkedin_client = require('linkedin-js')('xxx', 'xxx', 'http://localhost:3003/')
, app = express();

app.configure(function(){

app.use(express.bodyParser());
app.use(express.methodOverride());
app.use(express.static(__dirname + '/'));
app.use(express.cookieParser());
app.use(express.session({ secret: "string" }));  
});
app.get('/', function (req, res) {
// the first time will redirect to linkedin
 linkedin_client.getAccessToken(req, res, function (error, token) {
// will enter here when coming back from linkedin
req.session.token = token;

 linkedin_client.apiCall('GET', '/people/~/connections:(headline,first-name,last-name)',
{
  token: {
    oauth_token_secret: req.session.token.oauth_token_secret
  , oauth_token: req.session.token.oauth_token
  }
, fields: req.param('id')//not sure?
}
, function (error, result) {
  res.send('message_sent');
}
);
//res.render('auth');  I'm getting an error here as well
});
});

app.post('/message', function (req, res) {
linkedin_client.apiCall('POST', '/people/~/shares',
{
  token: {
    oauth_token_secret: req.session.token.oauth_token_secret
  , oauth_token: req.session.token.oauth_token
  }
, share: {
    comment: req.param('message')
  , visibility: {code: 'anyone'}
  }
}
, function (error, result) {
  res.render('message_sent');
}
);
});

app.listen(3003);
console.log("Listening"); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-09-18T12:12:47.417

[在第二行，用您自己的https://www.linkedin.com/secure/developer](https://www.linkedin.com/secure/developer)替换“API Key”和“Secret Key” ：

```
var express = require('express'),
    linkedin_client = require('linkedin-js')('API Key', 'Secret Key', 'http://localhost:3003/'),
    bodyParser = require('body-parser'),
    cookieParser = require('cookie-parser'),
    methodOverride = require('method-override'),
    session = require('express-session'),
    app = express();

app.use(bodyParser.json()); //basic app set up
app.use(bodyParser.urlencoded({extended: true}));
app.use(methodOverride());
app.use(express.static(__dirname + '/'));
app.use(cookieParser());
app.use(session({secret: 'secret',
    saveUninitialized: true,
    resave: true})); //session stuff
app.get('/', function (req, res) {
// the first time will redirect to linkedin
linkedin_client.getAccessToken(req, res, function (error, token) {
// will enter here when coming back from linkedin
req.session.token = token;

linkedin_client.apiCall('GET', '/people/~/connections:(headline,first-name,last-name)',
{
  token: {
    oauth_token_secret: req.session.token.oauth_token_secret
  , oauth_token: req.session.token.oauth_token
  }
, fields: req.param('id')//not sure?
}
, function (error, result) {
  res.send(result);
}
);

});
});

app.post('/message', function (req, res) {
linkedin_client.apiCall('POST', '/people/~/shares',
{
  token: {
    oauth_token_secret: req.session.token.oauth_token_secret
  , oauth_token: req.session.token.oauth_token
  }
, share: {
    comment: req.param('message')
  , visibility: {code: 'anyone'}
  }
}
, function (error, result) {
  res.render('message_sent');
}
);
});

app.listen(3003);
console.log("Listening");
```

# javascript - chrome中的slimscroll鼠标单击和滚动问题

> ID：14018104
> 
> 赞同：5
> 
> 时间：2012-12-24T06:53:37.163
> 
> 标签：javascript, jquery, slimscroll

我在我的代码中使用了 slimscoll，它在 Firefox 中完美运行。当我单击滚动条并尝试拖动它时，问题出在 chrome 上。它选择它周围的整个 div 或 div 内容。可能是因为当鼠标移出 slimscroll 的窄区域时，浏览器会将其识别为内容选择。

你能帮我吗？？？？这是我用于 slimscroll 的示例代码

```
$('#Div').slimscroll({
    railVisible: true,
    allowPageScroll: false,
    height: '320px'
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-09-23T22:44:05.260

尝试添加尺寸以使其更宽。在 Chrome 中我没有看到同样的问题。

```
$('#Div').slimscroll({
    railVisible: true,
    allowPageScroll: false,
    height: '320px',
    size: '10px'
}); 
```

文档有一个这样的例子

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-01-02T11:11:00.037

我遇到过同样的问题。我将 jquery.slimscroll.js 中 attachWheel() 的调用修改为

`attachWheel.apply(this);`

这对我有用。

# passwords - Mac Caps Lock 登录密码输入？

> ID：14018106
> 
> 赞同：1
> 
> 时间：2012-12-24T06:54:08.787
> 
> 标签：passwords, capslock

我不确定它是否只是我。我注意到在 mac 上或者它通常只是在 chrome 中，但是当你按下密码输入框上的大写锁定键时，会弹出一个灰色的通知图像。问题是这涵盖了我网站上的一个重要功能。

有没有办法告诉它在哪里弹出？我已经看到它在不同的地方弹出，例如在其他网站的输入字段内。

如果有人有任何想法或知道如何对其进行排序，将不胜感激。谢谢

# python - Popen.returncode 在 Python 中不起作用？

> ID：14018107
> 
> 赞同：8
> 
> 时间：2012-12-24T06:54:23.793
> 
> 标签：python

我有一个将文件从服务器传输到本地机器的代码价格。但是，用户输入的目录可能并不总是正确的。如果用户输入了错误的目录，我试图显示错误。如果`returncode`不是 None 我将显示错误。但这不起作用。无论程序抛出什么，它总是会`else`分开。

```
#!/usr/bin/python

import subprocess

result = subprocess.Popen(['sshpass', '-p', 'password', 'rsync', '-avz', '--info=progress2', 'username@host_name:/file_name', '/home/zurelsoft/test'], 
                                    stdout=subprocess.PIPE)

if result.returncode != None:
    print "Directory Incorrect"

else:
    print "Done"
    print result 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-12-24T07:52:37.987

`subprocess.Popen`返回一个对象（在您的情况下为结果变量）。您需要调用该对象的`poll`或`wait`方法来设置返回码状态。然后你可以检查`result.returncode`

请参阅[http://docs.python.org/2/library/subprocess.html#subprocess.Popen.returncode](http://docs.python.org/2/library/subprocess.html#subprocess.Popen.returncode)

> 子返回码，由 poll() 和 wait() 设置（间接由communicate() 设置）。None 值表示该进程尚未终止。

# javascript - 如何显示由中断分隔的跨度标记值

> ID：14018111
> 
> 赞同：1
> 
> 时间：2012-12-24T06:54:43.363
> 
> 标签：javascript, jquery

我有一个跨度标签，`<span id="display"></span>` 并通过`$("#display").html();`

```
for (var i = 0; i < arr.length; i++) {
   var val = $("#display").html();
   if (val == "") {
      $("#display").html(arr[i].name);
      $("display").html('<img src ="/Home/Image?id = arr[i].id"/>')
     }
   else {
      $("#display").html(val +" <br/> " + arr[i].name);
     $("display").html('<img src ="/Home/Image?id = arr[i].id"/>')
   }
} 
```

我想用中断显示每条记录的名称和图像。我已经像上面那样实现了，名称正在显示但图像没有显示。我想显示喜欢，名称和图像标签

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-24T06:59:00.657

```
$("#display").html(val +" <br/> " + arr[i].name); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-24T06:59:09.360

你必须使用：

```
for (var i = 0; i < arr.length; i++) {
    var val = $("#display").html();

    if (val == "") {
        $("#display").html(arr[i].name);
    }
    else {
        $("#display").html(val +" <br/> " + arr[i].name);
    }
} 
```

或者

```
for (var i = 0; i < arr.length; i++) {
    var val = $("#display").text();

    if (val == "") {
        $("#display").text(arr[i].name);
    }
    else {
        $("#display").text(val +" \n " + arr[i].name);
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-24T07:00:12.003

使用[html()](http://api.jquery.com/html/)代替 text()：

```
 if (val == ""){
     $("#display").html(arr[i].name);
 }
 else {
     $("#display").html(val +" <br/> " + arr[i].name);
 } 
```

# android - 检查可以安装的android设备吗？

> ID：14018117
> 
> 赞同：1
> 
> 时间：2012-12-24T06:55:44.403
> 
> 标签：android, installation

我有一个关于在 android 设备上安装应用程序的问题。我有一个应用程序需要用户安装另一个应用程序。所需的应用程序可能在不同的时间有所不同，但有时用户设备由于某种原因无法安装此所需的应用程序。我想以编程方式检查用户是否可以安装所需的应用程序。可能吗？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T07:10:22.643

正如评论中提到的，您可以检查是否*已经*安装了另一个应用程序，但没有简单的方法来确定另一个应用程序*在技术上是否能够*安装。

此确定基于`AndroidManifest.xml`（至少）其他应用程序的文件，以及可能发生在其他应用程序代码中的一些内部检查。您需要了解其他应用程序的要求（最低 SDK 版本、支持的屏幕尺寸、相机和其他硬件要求等）并自行检查。

# devexpress - 无法选中/取消选中 XtraGrid checkEdit 存储库

> ID：14018121
> 
> 赞同：1
> 
> 时间：2012-12-24T06:56:34.297
> 
> 标签：devexpress, xtragrid

我已经使用 linq/LinqInstantFeedbackSource 填充了数据的 devexpress XtraGrid。XtraGrid 有一个 checkEdit 存储库与表中名为 Status 的列绑定。状态列中的数据元素是位（0 或 1）。但是，由于某些未知原因，无法选择 checkEdit - 即我无法选中/取消选中它。可能的原因是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T07:12:39.117

原因是[LinqInstantFeedbackSource](http://documentation.devexpress.com/#CoreLibraries/clsDevExpressDataLinqLinqInstantFeedbackSourcetopic)是只读数据源。

**更新：**
据我所知，您使用的是匿名类型作为结果。**匿名类型的对象只有只读属性**。修改它们是不可能的。这就是 XtraGrid 中没有编辑的原因。如果您需要获取可编辑对象的集合，请不要使用匿名类型。
您可以使用此代码，例如：

```
var tcs=
    from tc in dc.TC 
    join dpt in dc.Departments on tc.DeptID equals dpt.DeptID 
    where tc.isReturned.Equals(0) 
    select new EditableObject { 
        MRN=tc.MRN, 
        DeptName=dpt.deptName + " - " + dpt.roomNo,
        IsReturned= tc.isReturned
    }; 
```

哪里`EditableObject`是：

```
public class EditableObject{
    public string MRN { get; set; }
    public string DeptName { get; set; }
    public bool IsReturned { get; set; }
} 
```

# web-services - Adobe Flex 的 Web 服务代理

> ID：14018123
> 
> 赞同：0
> 
> 时间：2012-12-24T06:56:54.010
> 
> 标签：web-services, actionscript-3, apache-flex, blazeds

我正在创建一个 Flex 应用程序，它需要显示来自我们网络本身托管的 web 服务的结果。它是一个内部应用程序，但由于严格的安全环境，我们需要打开防火墙才能访问其他主机或服务。

对于我的应用程序，我已经从我的服务器打开了防火墙。但是由于 Flex 从客户端调用 web 服务，所以从所有客户端打开防火墙是不切实际的。

我发现我们可以使用 BlazeDS 的代理服务。我也试过了，但没有成功。我也在互联网上进行了大量搜索，但未能获得 BlazeDS 代理服务的详细工作方式。有谁知道这个代理是如何工作的？即使我们调用 BlazeDS 的目的地，Flex 是否会在任何时候直接从客户端调用 WSDL url？

提前致谢，阿努普

# python - 无法通过我的批处理文件启动 python 脚本

> ID：14018125
> 
> 赞同：0
> 
> 时间：2012-12-24T06:57:08.387
> 
> 标签：python, batch-file, console, cmd

我有一个批处理文件，它应该设置 PATH/PYTHON 路径变量，然后调用我的 python 脚本（myscript.py），它被设计为一个交互式控制台。我尝试了以下方法：

```
@echo off
setlocal

if not defined PYTHONHOME (echo warning: PYTHONHOME environment variable is not defined. Using C:\Python24 by default.
SET PYTHONHOME=C:\Python24
if not exist "C:\Python24" ( echo warning: C:\Python24 does not exists. Please specify PYTHONHOME variable manually.))

color 1e
set PYTHONSTARTUP=%~dp0%myscript.py
set PYTHONPATH=%~dp0;%PYTHONPATH%
path %PYTHONHOME%;%PATH%
set PATHEXT=%PATHEXT%;.PY
cd %~dp0%
cmd.exe /k title Interactive Python Console 1.0
cls
%~dp0%myscript.py"

:done
endlocal 
```

在为控制台设置颜色对（1e）之前，我已将包含 myscript 的目录附加到路径、python 路径和 python24 设置为 python 主目录。我的问题是：我可以更改控制台的默认字体/背景颜色，设置当前窗口的标题，但是 cls (clearscreen) 不起作用，也没有调用我的脚本。在控制台，我的密码是脚本的目录。但是当我在提示符下输入“python”时，会调用 myscript，我可以看到我的脚本的交互式控制台。批处理中缺少的任何内容，在设置颜色/标题后会自动清除控制台，并调用 myscript.py？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T07:09:25.260

这与 Python 没有任何关系。 `cmd /k`不会“设置窗口标题”，它会启动一个*新*的命令外壳并将您留在其中，从而在中途停止您的脚本。你为什么不做`title My New Title`呢？没有必要使用`cmd`.

# ios - iPhone 通讯录电话号码

> ID：14018131
> 
> 赞同：1
> 
> 时间：2012-12-24T06:58:13.510
> 
> 标签：ios, addressbook, phone-number

我正在 Xcode 中做一个需要电话簿访问的 iPhone 应用程序。我需要地址簿中的所有电话号码，并且应该存储在`NSArray`.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-24T07:04:45.850

```
//Also you need to include AddressBook.framework
#import <AddressBook/AddressBook.h>
#import <AddressBook/ABAddressBook.h>
#import <AddressBook/ABPerson.h>

[contactList removeAllObjects];

// open the default address book.     
ABAddressBookRef m_addressbook = ABAddressBookCreate();

if (!m_addressbook) {
    NSLog(@"opening address book");
}

// can be cast to NSArray, toll-free
CFArrayRef allPeople = ABAddressBookCopyArrayOfAllPeople(m_addressbook);
CFIndex nPeople = ABAddressBookGetPersonCount(m_addressbook);

// CFStrings can be cast to NSString!
for (int i=0;i < nPeople;i++) {     
MContact *contact = [[MContact alloc] init];
ABRecordRef ref = CFArrayGetValueAtIndex(allPeople,i);
CFStringRef firstName, lastName;
firstName = ABRecordCopyValue(ref, kABPersonFirstNameProperty);
lastName  = ABRecordCopyValue(ref, kABPersonLastNameProperty);
contact.name = [NSString stringWithFormat:@"%@ %@", firstName, lastName];

ABMutableMultiValueRef eMail  = ABRecordCopyValue(ref, kABPersonEmailProperty);

if(ABMultiValueGetCount(eMail) > 0) {
  contact.email =  (NSString *)ABMultiValueCopyValueAtIndex(eMail, 0);
  [contactList addObject:contact];
}

CFRelease(ref);
CFRelease(firstName);
CFRelease(lastName);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-24T07:31:00.560

此代码适用于 Xcode 4.5.1>=0，如果您的版本低于此版本，则无需编写 if 条件。只需分配`ABAddressBookCreate()`给通讯录。

```
 __block BOOL  accessGranted = NO;
        if (SYSTEM_VERSION_GREATER_THAN_OR_EQUAL_TO(@"6.0")) {
            NSLog(@"Device version is greater than 6.0");
            addressBook = ABAddressBookCreateWithOptions(NULL, NULL);
                if (ABAddressBookRequestAccessWithCompletion != NULL) { // we're on iOS 6
                      dispatch_semaphore_t sema = dispatch_semaphore_create(0);

                        ABAddressBookRequestAccessWithCompletion(addressBook, ^(bool granted, CFErrorRef error) {
                            accessGranted = granted;
                            dispatch_semaphore_signal(sema);
                        });

                        dispatch_semaphore_wait(sema, DISPATCH_TIME_FOREVER);
                    }
        }
        else{
            addressBook = ABAddressBookCreate();
            accessGranted = YES;
        }

 if (accessGranted) {

     NSMutableArray *phoneNumbers = [[NSMutableArray alloc] init];
     CFArrayRef people = ABAddressBookCopyArrayOfAllPeople(addressBook);

     for (CFIndex i = 0; i < CFArrayGetCount(people); i++) {
        ABRecordRef person = CFArrayGetValueAtIndex(people, i);

        NSString *name = (__bridge NSString *)ABRecordCopyValue(person, kABPersonFirstNameProperty);

        ABMultiValueRef multiPhones = ABRecordCopyValue(person,kABPersonPhoneProperty);
        NSMutableArray *individualPhoneNumbers = [[NSMutableArray alloc] init];
        if (ABMultiValueGetCount(multiPhones) >0) {

            for(CFIndex i=0;i<ABMultiValueGetCount(multiPhones);++i) {
                CFStringRef phoneNumberRef = ABMultiValueCopyValueAtIndex(multiPhones, i);
                NSString *phoneNumber = (__bridge NSString *) phoneNumberRef;

               [individualPhoneNumbers addObject:phoneNumber];
            }
           [phoneNumbers addObject:individualPhoneNumbers];
        }

   } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-24T07:03:45.143

```
Try this,
         NSMutableArray *phoneNumbers = [[NSMutableArray alloc] init];

     ABMultiValueRef multiPhones = ABRecordCopyValue(person,kABPersonPhoneProperty);
   for(CFIndex i=0;i<ABMultiValueGetCount(multiPhones);++i) {
     CFStringRef phoneNumberRef = ABMultiValueCopyValueAtIndex(multiPhones, i);
      NSString *phoneNumber = (NSString *) phoneNumberRef;

     [phoneNumbers addObject:phoneNumber];
   } 
```

# php - open_basedir 限制生效 .htaccess

> ID：14018132
> 
> 赞同：1
> 
> 时间：2012-12-24T06:58:31.630
> 
> 标签：php

我收到错误

```
Warning: fopen() [function.fopen]: open_basedir restriction in effect. File(/) is not within the allowed path(s): (VIRTUAL_DOCUMENT_ROOT:/tmp/) in /www/elitno.net/s/p/anger2/home/site/classWebPage.php on line 83 
```

我的 phpinfo 文件在这里 -> [http://spaceranger2.elitno.net/phpinfo.php](http://spaceranger2.elitno.net/phpinfo.php)

发生错误的行在这里：

```
function openLink(){
    $this->fp = fopen($this->URL, "rb");
    array_shift($http_response_header);
    $this->headers = $http_response_header;
} 
```

我只能访问 .htaccess 但不能访问我的 php.ini 文件；我试过用这个

```
open_basedir = "VIRTUAL_DOCUMENT_ROOT:/tmp/:/www/elitno.net/s/p/ranger2/home/site/" 
```

但这会产生`500 internal error`，有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T07:25:16.500

通常`fopen`只允许打开运行脚本的用户有权访问的文件。

你已经设计了你的函数`openLink()`来实际打开一个特定的 URL。您应该注意，使用`fopen`它时实际上表示打开磁盘上的文件。如果您传递类似的值，`/`或者`/filename.txt`它实际上会尝试在磁盘上的该**绝对**文件系统路径上打开文件。

从您告诉`fopen`打开的问题数据中`/`。那是服务器文件系统的根目录。您的用户肯定无法访问它（因此您看到的错误）。

如果要打开网站的相对路径，请考虑在将站点 URL 传递给`$this->URL`变量之前将其作为前缀，`fopen`以表明您正在尝试打开 URL。

您可以在以下几行中执行某些操作：

```
function openLink(){
    $siteURL = "http://www.example.com";
    $urlToOpen = $siteURL . $this->URL;
    $this->fp = fopen($urlToOpen, "rb");
    array_shift($http_response_header);
    $this->headers = $http_response_header;
} 
```

# android - Android 谷歌地图指南针的工作原理

> ID：14018134
> 
> 赞同：0
> 
> 时间：2012-12-24T06:58:33.097
> 
> 标签：android, google-maps, android-layout, google-maps-markers, android-maps

我通过示例成功完成了谷歌地图中指南针的编码。

现在我只想知道是

1.  指南针如何在谷歌地图中工作（每个安卓设备都支持它）。
2.  它是否需要手机中的任何传感器
3.  它从哪个 API 级别开始工作

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T06:50:19.250

你看过这个例子吗：[这里](https://github.com/commonsguy/cw-android/tree/master/Maps/NooYawk/)

另请参阅[此 SO](https://stackoverflow.com/questions/4246842/compass-widget-for-mapactivity-android)以获取更多信息。

# php - 从 PhP 到 Python 的飞跃

> ID：14018140
> 
> 赞同：5
> 
> 时间：2012-12-24T06:59:08.087
> 
> 标签：php, python, associative-array

我是一个相当自在的 PHP 程序员，并且几乎没有 Python 经验。我正在尝试帮助一个伙伴完成他的项目，代码很容易用 Php 编写，我已经将大部分内容移植过来，但如果可能的话，需要一些帮助来完成翻译。目标是：

*   生成带有 uid 的基本对象列表
*   随机选择一些项目以创建第二个列表，该列表键入包含新属性的 uid。
*   测试两个列表之间的交叉点以相应地改变响应。

以下是我尝试在 Python 中编码的工作示例

```
<?php
srand(3234);
class Object{  // Basic item description
    public $x       =null;
    public $y       =null;
    public $name    =null;
    public $uid     =null;
}
class Trace{  // Used to update status or move position
#   public $x       =null;
#   public $y       =null;
#   public $floor   =null;
    public $display =null;  // Currently all we care about is controlling display
}
##########################################################
$objects = array();
$dirtyItems = array();

#CREATION OF ITEMS########################################
for($i = 0; $i < 10; $i++){
    $objects[] = new Object();
    $objects[$i]->uid   = rand();
    $objects[$i]->x     = rand(1,30);
    $objects[$i]->y     = rand(1,30);
    $objects[$i]->name  = "Item$i";
}
##########################################################

#RANDOM ITEM REMOVAL######################################
foreach( $objects as $item )
    if( rand(1,10) <= 2 ){  // Simulate full code with 20% chance to remove an item.
        $derp = new Trace();
        $derp->display = false;
        $dirtyItems[$item->uid] = $derp;  //#  <- THIS IS WHERE I NEED THE PYTHON HELP
        }
##########################################################
display();

function display(){
global $objects, $dirtyItems;
    foreach( $objects as $key => $value ){  // Iterate object list
        if( @is_null($dirtyItems[$value->uid]) )  // Print description
            echo "<br />$value->name is at ($value->x, $value->y) ";
        else  // or Skip if on second list.
            echo "<br />Player took item $value->uid";

    }
}
?> 
```

所以，实际上我已经对大部分内容进行了排序，我只是在使用 Python 版本的关联数组时遇到了问题，因为它的键与主列表中的唯一项目数匹配。

上述代码的输出应类似于：

```
Player took item 27955
Player took item 20718
Player took item 10277
Item3 is at (8, 4) 
Item4 is at (11, 13)
Item5 is at (3, 15)
Item6 is at (20, 5)
Item7 is at (24, 25)
Item8 is at (12, 13)
Player took item 30326 
```

我的 Python 技能仍然很熟练，但这与上面的代码块大致相同。我一直在查看并尝试使用列表函数 .insert( ) 或 .setitem( ) 但它并没有按预期工作。

这是我当前的 Python 代码，尚未完全正常运行

```
import random
import math

# Begin New Globals
dirtyItems = {}         # This is where we store the object info
class SimpleClass:      # This is what we store the object info as
    pass
# End New Globals

# Existing deffinitions
objects = []
class Object:
    def __init__(self,x,y,name,uid):
        self.x = x  # X and Y positioning
        self.y = y  #
        self.name = name #What will display on a 'look' command.
        self.uid = uid

def do_items():
    global dirtyItems, objects
    for count in xrange(10):
        X=random.randrange(1,20)
        Y=random.randrange(1,20)
        UID = int(math.floor(random.random()*10000))
        item = Object(X,Y,'Item'+str(count),UID)
        try: #This is the new part, we defined the item, now we see if the player has moved it
            if dirtyItems[UID]:
                print 'Player took ', UID
        except KeyError:
            objects.append(item) # Back to existing code after this
            pass    # Any error generated attempting to access means that the item is untouched by the player.

# place_items( )
random.seed(1234)

do_items()

for key in objects:
    print "%s at %s %s." % (key.name, key.x, key.y)
    if random.randint(1, 10) <= 1:
        print key.name, 'should be missing below'
        x = SimpleClass()
        x.display = False
        dirtyItems[key.uid]=x

print ' '
objects = []
random.seed(1234)

do_items()

for key in objects:
    print "%s at %s %s." % (key.name, key.x, key.y)

print 'Done.' 
```

所以，很抱歉这篇长文，但我想通过并提供两套完整的代码。PhP 完美运行，Python 也很接近。如果有人能指出我正确的方向，那将是一个巨大的帮助。 **dirtyItems.insert(key.uid,x)**是我试图用来使列表作为 Assoc 数组工作的东西

*编辑：小修正。*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-24T07:09:57.757

您声明`dirtyItems`为数组而不是字典。在 python 中，它们是不同的类型。

`dirtyItems = {}`改为这样做。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-24T07:17:17.997

制作字典而不是数组：

```
import random
import math

dirtyItems = {} 
```

然后你可以像这样使用：

```
dirtyItems[key.uid] = x 
```

# php - 两张图片合二为一

> ID：14018147
> 
> 赞同：0
> 
> 时间：2012-12-24T06:59:45.977
> 
> 标签：php, image, imagemagick

我希望用户能够上传两个不同的图像，然后并排加入它们并将结果保存为单个图像文件。

我已经调查过了[，](http://php.net/manual/en/imagick.flattenimages.php)但是；

1.  我不明白。
2.  它似乎将一个图像放在另一个图像之上。

我需要它们并排，然后保存为一个文件。

想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T07:08:43.763

嗨，伙计，请尝试以下代码，它将对您有所帮助。

```
<?php

header ("Content-type: image/png");
$src = array ("http://img164.imageshack.us/img164/5175/toprb3.jpg","http://img123.imageshack.us/img123/9056/leftij4.jpg");   
$imgBuf = array ();
foreach ($src as $link)
{
   switch(substr ($link,strrpos ($link,".")+1))
   {
       case 'png':
           $iTmp = imagecreatefrompng($link);
           break;
       case 'gif':
           $iTmp = imagecreatefromgif($link);
           break;               
       case 'jpeg':           
       case 'jpg':
           $iTmp = imagecreatefromjpeg($link);
           break;               
   }
   array_push ($imgBuf,$iTmp);
}
$iOut = imagecreatetruecolor ("450","131") ;
imagecopy ($iOut,$imgBuf[0],0,0,0,0,imagesx($imgBuf[0]),imagesy($imgBuf[0]));
imagedestroy ($imgBuf[0]);
imagecopy ($iOut,$imgBuf[1],0,54,0,0,imagesx($imgBuf[1]),imagesy($imgBuf[1]));
imagedestroy ($imgBuf[1]);

imagepng($iOut);
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-24T07:16:20.850

试试这个？[http://php.net/manual/en/imagick.appendimages.php](http://php.net/manual/en/imagick.appendimages.php) （如果你坚持使用imagick就是）

# jquery - 用于动态元素 ID 的 jquery 验证插件

> ID：14018151
> 
> 赞同：4
> 
> 时间：2012-12-24T06:59:59.463
> 
> 标签：jquery, jquery-validate

我需要验证一堆具有动态 ID 的文本框。这些元素在文档就绪时可用，而不是动态插入。

```
<input type="text" class="y"/>
<input type="text" class="y"/>
<input type="text" class="y"/>
<input type="text" class="y"/>
<input type="text" class="y"/> 
```

规则是前两个字段之一是必需的。我迷失了如何在不知道元素 ID 的情况下进行验证。

**编辑：** 输入元素是由循环生成的，所以我不能添加前两个**所需的类。**我正在寻找使用 jquery 验证插件[http://docs.jquery.com/Plugins/Validation的解决方案](http://docs.jquery.com/Plugins/Validation)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-24T07:17:04.967

以下使用过滤器创建值不为空的 2 个输入的集合。测试长度提供了有效性测试

```
var valid=$('input').slice(0,2).filter(function(){
   return $(this).val() !='';
}).length

if(valid){
  /* can submit*/
} 
```

验证插件的解决方案：

```
 $('input:lt(2)').addClass('required'); 
```

注意：调整选择器以更好地适应表单，这样它就不会找到页面中的每个输入，或表单中不属于您要验证的集合的输入。您可以将这些输入包装在一个字段集中并为字段集提供一个 ID

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-24T07:07:08.180

尝试这个

```
$(document).ready(function() {
if($('input:text:eq(0)').val()=="" && $('input:text:eq(1)').val()==""){
 //show error
}
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-24T07:14:19.593

我认为你想要的是这样的：

```
function isValid(){
    var cont=0;
    $('input:text').each(function(i, obj) {
        if(i<2 && obj.value){
             cont++; 
        }
      });
    return cont==2;
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-24T07:11:19.280

```
$(document).ready(function() {
if($('input:text:lt(2)').val()=="" ){
 //error 
}
}); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-24T07:17:50.897

尝试这个 ：

你可以这样做[`:lt();`](http://api.jquery.com/lt-selector/)：

```
$("表单输入：lt(2)");

```

这将选择所有在小于传递的索引处匹配的元素，第一个和第二个元素是索引 0 和 1，并将匹配此选择器:)

# php - php 中的 $_POST 真的是超全局的吗？

> ID：14018156
> 
> 赞同：0
> 
> 时间：2012-12-24T07:00:42.133
> 
> 标签：php, scope, superglobals

我为什么要问这个？我正在努力理解 php 的超全局概念...... $_POST 的数组数据/变量仅可用于表单回发到的文件。

它们不适用于网站或应用程序中的任何其他文件。

那么为什么 /how 是 $_POST 一个超全局变量，它的直观含义应该是指在任何地方/任何地方都可用的任何变量，包括网站/应用程序中未定义的所有文件。

有人可以解释一下这背后的逻辑吗？

我特别希望找到一种直接方法（即简单地调用/声明变量，而不是间接方法，例如包含包含变量的文件等）来在网站/应用程序中的所有文件中共享变量。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-24T07:27:00.157

您对超全局的直观定义与 PHP 使用该术语的方式不匹配。PHP 中“超全局”的定义是该变量在脚本内的所有范围内都可用。普通全局变量和超全局变量之间的唯一区别是您不必使用`global`关键字在函数或方法中访问它们。

请参阅[文档](http://php.net/manual/en/language.variables.superglobals.php)。

# c# - 如何使用 WCF 服务保存文件

> ID：14018157
> 
> 赞同：2
> 
> 时间：2012-12-24T07:00:46.787
> 
> 标签：c#, asp.net, wcf, web-services, sql-server-2008

我正在使用 WCF 在数据库（C#）中上传文件，但出现此错误。远程服务器返回意外响应 (413) 请求实体太大。

IService.cs 中的代码

```
[OperationContract]
  void UploadFile(RemoteFileInfo request); 
```

[MessageContract] 公共类 DownloadRequest { [MessageBodyMember] 公共字符串文件名；}

```
[MessageContract]
public class RemoteFileInfo : IDisposable
{
    [MessageHeader(MustUnderstand = true)]
    public string FileName;     

    [MessageHeader(MustUnderstand = true)]
    public int ItemID;
    [MessageHeader(MustUnderstand = true)]
    public string FileExt;
    [MessageBodyMember(Order = 1)]
    public System.IO.Stream FileByteStream;

    public void Dispose()
    {
        if (FileByteStream != null)
        {
            FileByteStream.Close();
            FileByteStream = null;
        }
    } 
```

Service.svc.cs 中的代码

```
 public void UploadFile(RemoteFileInfo request)
        {
            AttachmentDTO objDTO = new AttachmentDTO();
            //FileStream targetStream = null;
            Stream stream = request.FileByteStream;
            const int bufferLen = 65000;
           // byte[] buffer = new byte[bufferLen];
           //  objDTO.FileData = buffer;
            AttachmentBLL objBLL = new AttachmentBLL();
            try
            {
                byte[] readBuffer = new byte[bufferLen];

                int totalBytesRead = 0;
                int bytesRead;

                while ((bytesRead = stream.Read(readBuffer, totalBytesRead, readBuffer.Length - totalBytesRead)) > 0)
                {
                    totalBytesRead += bytesRead;

                    if (totalBytesRead == readBuffer.Length)
                    {
                        int nextByte = stream.ReadByte();
                        if (nextByte != -1)
                        {
                            byte[] temp = new byte[readBuffer.Length * 2];
                            Buffer.BlockCopy(readBuffer, 0, temp, 0, readBuffer.Length);
                            Buffer.SetByte(temp, totalBytesRead, (byte)nextByte);
                            readBuffer = temp;
                            totalBytesRead++;
                        }
                    }
                }

                byte[] buffer = readBuffer;
                if (readBuffer.Length != totalBytesRead)
                {
                    buffer = new byte[totalBytesRead];
                    Buffer.BlockCopy(readBuffer, 0, buffer, 0, totalBytesRead);
                }
                objDTO.FileData = buffer;
                objDTO.FileName = request.FileName;
                objDTO.CreatedDate = DateTime.Now;
                objDTO.CreatedBy = "user";
                objDTO.IsActive = true;
                objDTO.FileExt = request.FileExt;
                objBLL.AddAttachment(objDTO);

            }
            catch (Exception ex)
            { 

            }

        } 
```

objBLL.AddAttachment(objDTO); 此方法在业务逻辑文件中。BLL 可以与 DAL 通信，但 DAL 无法与 WCF 服务通信。

```
 This Code is written in page.aspx.cs file.  

 if (fuAttachment.HasFile)
            {
                string abs = fuAttachment.PostedFile.FileName;
                System.IO.FileInfo fileInfo = new System.IO.FileInfo(fuAttachment.PostedFile.FileName);

                MyService.RemoteFileInfo uploadRequestInfo = new MyService.RemoteFileInfo();

                using (System.IO.FileStream stream = new System.IO.FileStream(fuAttachment.PostedFile.FileName, System.IO.FileMode.Open, System.IO.FileAccess.Read))
                {
                    uploadRequestInfo.FileName = fuAttachment.FileName;
                    uploadRequestInfo.Length = fileInfo.Length;
                    uploadRequestInfo.FileByteStream = fuAttachment.FileContent;
                    uploadRequestInfo.ItemID = itemId;
                    uploadRequestInfo.FileExt = fuAttachment.PostedFile.ContentType;
                    client.UploadFile(uploadRequestInfo.FileExt, uploadRequestInfo.FileName, uploadRequestInfo.ItemID, uploadRequestInfo.FileByteStream);

                }
            } 
```

网络配置

```
<binding name="WSHttpBinding_IEMRProWCFService" closeTimeout="04:01:00"
          openTimeout="04:01:00" receiveTimeout="04:10:00" sendTimeout="04:01:00"
          bypassProxyOnLocal="false" transactionFlow="false" hostNameComparisonMode="StrongWildcard"
          maxBufferPoolSize="2147483647" maxReceivedMessageSize="2147483647" messageEncoding="Text"
          textEncoding="utf-8" useDefaultWebProxy="true" allowCookies="false">
          <readerQuotas maxDepth="128"
       maxStringContentLength="2147483647" maxArrayLength="2147483647"
       maxBytesPerRead="2147483647" maxNameTableCharCount="2147483647" />
          <reliableSession ordered="true" inactivityTimeout="00:10:00"
            enabled="false" />
          <security mode="None">
            <transport clientCredentialType="None"
                    proxyCredentialType="None" realm="" />
            <message clientCredentialType="UserName" algorithmSuite="Default" />
          </security>
        </binding> 
```

和服务 .config

```
<?xml version="1.0" encoding="UTF-8"?>
<configuration>

  <system.web>
    <compilation debug="true" />
    <httpRuntime maxRequestLength="2147483647" />

  </system.web>

  <system.serviceModel>
    <services>
      <service name="WCFService.EMRProWCFService">
        <endpoint address="" binding="wsHttpBinding" contract="WCFService.IEMRProWCFService">
          <identity>
            <dns value="localhost" />
          </identity>
        </endpoint>
        <endpoint address="mex" binding="mexHttpBinding" contract="IMetadataExchange" />
      </service>
    </services>

    <behaviors>
      <serviceBehaviors>
        <behavior>
          <!-- To avoid disclosing metadata information, set the value below to false and remove the metadata endpoint above before deployment -->
          <serviceMetadata httpGetEnabled="true" />
          <!-- To receive exception details in faults for debugging purposes, set the value below to true.  Set to false before deployment to avoid disclosing exception information -->
          <serviceDebug includeExceptionDetailInFaults="true" />
        </behavior>
      </serviceBehaviors>
    </behaviors>
    <serviceHostingEnvironment multipleSiteBindingsEnabled="true" />
    <bindings>
      <webHttpBinding>
        <binding name="WebConfiguration"
                 maxBufferSize="65536"
                 maxReceivedMessageSize="2147483647"
                 transferMode="Streamed">
        </binding>
      </webHttpBinding>
    </bindings>
  </system.serviceModel>
  <system.webServer>
    <modules runAllManagedModulesForAllRequests="true" />
    <directoryBrowse enabled="true" />
  </system.webServer>

</configuration> 
```

任何人都可以在我犯错的地方帮助我...谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T11:10:23.807

您需要处理的地方是web config，您需要添加可以设置数据大小的服务行为。比如像这样，

```
<?xml version="1.0"?>
<configuration>
  <system.web>
    <httpRuntime executionTimeout="4800" maxRequestLength="2097150"/>
    <compilation debug="true"/>
  </system.web>
  <system.serviceModel>
    <bindings>
      <basicHttpBinding/>
      <customBinding>
        <binding name="LargeSilverlight" closeTimeout="00:21:00" openTimeout="00:20:00" receiveTimeout="00:20:00" sendTimeout="00:50:00">
          <textMessageEncoding maxReadPoolSize="2147483647" maxWritePoolSize="2147483647">
            <readerQuotas maxDepth="2147483647" maxStringContentLength="2147483647" maxArrayLength="2147483647" maxBytesPerRead="2147483647" maxNameTableCharCount="2147483647"/>
          </textMessageEncoding>
          <httpTransport maxBufferPoolSize="2147483647" maxReceivedMessageSize="2147483647" maxBufferSize="2147483647"/>
        </binding>
      </customBinding>
    </bindings>
    <client/>
    <!--SERVICE-->
    <services>
      <service name="WCFService.EMRProWCFService" behaviorConfiguration="SilverlightWCFLargeDataApplication">
        <endpoint address="" binding="customBinding" bindingConfiguration="LargeSilverlight" behaviorConfiguration="SilverlightWCFLargeDataApplication" contract="WCFService.IEMRProWCFService"/>
      </service>
    </services>
    <!--BEHAVIOR-->
    <behaviors>
      <serviceBehaviors>
        <behavior name="SilverlightWCFLargeDataApplication">
          <serviceMetadata httpGetEnabled="true"/>
          <serviceDebug includeExceptionDetailInFaults="false"/>
          <dataContractSerializer maxItemsInObjectGraph="2147483647"/>
        </behavior>
      </serviceBehaviors>
      <endpointBehaviors>
        <behavior name="SilverlightWCFLargeDataApplication">
          <dataContractSerializer maxItemsInObjectGraph="2147483647"/>
        </behavior>
      </endpointBehaviors>
    </behaviors>
  </system.serviceModel>
  <system.webServer>
    <security>
      <requestFiltering>
        <requestLimits maxAllowedContentLength="500000000"/>
      </requestFiltering>
    </security>
    <modules runAllManagedModulesForAllRequests="true"/>
  </system.webServer>
</configuration> 
```

如果这不起作用，您需要遵循一种机制来压缩数据并通过网络服务发送。您可以找到大量示例。

# java - 传递 String 或 Employee 对象作为参数

> ID：14018159
> 
> 赞同：0
> 
> 时间：2012-12-24T07:00:56.723
> 
> 标签：java, dao

我有一个方法将从 ManagedBean 调用如下

```
getemployeeService().findEmployees(qData); 
```

`qData`只不过是一个为lazyload`load`方法传递参数的类。

```
EmployeeQueryData qData = new EmployeeQueryData(start, end, sortField, order, filters); 
```

我想将一个参数传递给`findEmployees`DAO 类中的方法，以获取基于`deptNo`.

我的疑问是我是否应该传递另一个参数，例如

```
getemployeeService().findEmployees(qData, String deptNo); 
```

或通过员工类

```
getemployeeService().findEmployees(qData, Employees emp); 
```

在 DAO 中我调用`deptNo`为 `emp.getDeptNo`

最好的方法和做法是什么？任何建议和见解都是非常值得赞赏的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T07:09:08.880

我认为通过部门更有意义。因为当我们说 DAO 层时，我们只从必须处理数据的角度来看。我们应该在业务逻辑层中包含 emp.getDeptNo()。

但是谈到可扩展性，如果将来你可能想要发送一些其他参数，比如 dept、DOJ 等等。因此，在这种情况下，您可以创建另一个类，例如 Criteria，并将 params 字段放在该类中，并将此类的 Object 传递给 find() 方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-24T07:04:52.777

这两种方法各有利弊，但是您应该考虑您的程序的业务需求发生变化的可能性有多大。

例如，如果将来要求更改“我们不仅应该通过他/她的 depno，还应该通过employeeId 来定位员工”，那么第二种方法将使您更容易实施更改。使用第一种方法，您必须更改 findEmployees 方法的每次调用

# c# - Window.Current.Content 设置有框架但其他页面不导航

> ID：14018167
> 
> 赞同：0
> 
> 时间：2012-12-24T07:01:45.890
> 
> 标签：c#, xaml, windows-8

我遇到了 App.Xaml.cs 具有以下代码的问题：

```
 var gamePage = Window.Current.Content as Frame;

        // Do not repeat app initialization when the Window already has content,
        // just ensure that the window is active
        if (gamePage == null)
        {
            // Create a main GamePage
            gamePage = new Frame();

            if (args.PreviousExecutionState == ApplicationExecutionState.Terminated)
            {
                // TODO: Load state from previously suspended application
            }

            // Place the GamePage in the current Window
            Window.Current.Content = gamePage;
            gamePage.Navigate(typeof(MainMenu));

        }

        // Ensure the current window is active
        Window.Current.Activate(); 
```

这对于应用程序初始化来说是相当标准的。这也与 Microsoft 概述您应该这样做的方式相同：

```
 http://msdn.microsoft.com/en-us/library/windows/apps/xaml/hh771188.aspx 
```

但是，当我再次调用框架时（在这种情况下是在 OnNavigateTo 中，因为现在我想确保可以切换页面，这将在稍后移动）它什么也不做，而是位于同一页面上。换句话说如下：

```
 protected override void OnNavigatedTo(NavigationEventArgs e)
    {
        base.OnNavigatedTo(e);
        var gamePage = Window.Current.Content as Frame;
        gamePage.Navigate(typeof(GamePage));

    } 
```

但是，我不能像 Microsoft 推荐的那样调用 this.Frame，这可能是也可能不是问题。

因此，回顾一下，问题是我无法使用加载到 Window.Current.Content 中的标准 Frame 对象从一个页面导航到另一个页面。我可以验证应用程序是否进入 OnNavigateTo 并且第一页切换工作正常。但是，当我再次尝试切换页面时，它不再起作用了。

有任何想法吗？任何帮助是极大的赞赏！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T21:08:57.183

创建App.xaml.cs类`gamePad`的属性 ( )，然后执行以下操作：`public static Frame gamePage = new Frame();`

```
 var gamePad = App.gamePage; 
```

在其他页面。这是使用 MVVM 进行导航的方式。

# javascript - 砌体不再动画

> ID：14018170
> 
> 赞同：2
> 
> 时间：2012-12-24T07:02:06.263
> 
> 标签：javascript, jquery, asp.net

我正面临砌体问题，它工作得很好，现在它随机停止动画。我很困惑；我尝试了一切，但它不再是动画图片了..有没有人有解决方案？

我上传了一个带有砖石的简单网页，请看一下是否有错误。

[http://www.bhinderblink.com/masonryDemo.aspx](http://www.bhinderblink.com/masonryDemo.aspx)

[http://www.bhinderblink.com](http://www.bhinderblink.com)（这个主页使用 DB、repeater 和 jquery 加载图片）

脚本

```
<link href="StyleSheet1.css" rel="stylesheet" type="text/css" />
<script src="js/jquery.masonry.min.js" type="text/javascript"></script>
<script src="js/jquery-1.7.1.js" type="text/javascript"></script>

<script type="text/javascript">

    $(function () {
        $('#container').masonry({
            // options
            itemSelector: '.box',
            columnWidth: 240,
            isAnimated: true
        })
    });

</script> 
```

身体

```
<div id="container">
    <div class="box">
        <div id="imageDiv1">
            LoadImage...1<br />
            <asp:Image runat="server" ID="img1"  ImageUrl="~/pic/jas/pic10.jpg" />
        </div>
    </div>
    <div class="box">
        <div id="imageDiv2">
            LoadImage...2<br />
            <asp:Image runat="server" ID="Image2" ImageUrl="~/pic/jas/pic11.jpg" />
        </div>
    </div>
    <div class="box">
        <div id="imageDiv3">
            LoadImage...3<br />
            <asp:Image runat="server" ID="Image1" ImageUrl="~/pic/jas/pic12.jpg" />
        </div>
    </div>
    <div class="box">
        <div id="imageDiv4">
            LoadImage...4<br />
            <asp:Image runat="server" ID="Image3" ImageUrl="~/pic/jas/pic13.jpg" />
        </div>
    </div>
    <div class="box">
        <div id="imageDiv5">
            LoadImage...5<br />
            <asp:Image runat="server" ID="Image4" ImageUrl="~/pic/jas/pic14.jpg" />
        </div>
    </div>
    <div class="box">
        <div id="imageDiv6">
            LoadImage...6<br />
            <asp:Image runat="server" ID="Image5" ImageUrl="~/pic/jas/pic15.jpg" />
        </div>
    </div>
</div> 
```

主页正文

```
<form id="form1" runat="server">
<div id="topBanner">
</div>
<asp:Repeater ID="rptCustomers" runat="server">
    <HeaderTemplate>
    </HeaderTemplate>
    <ItemTemplate>
        <div id="container">
            <div class="box">                   
                <asp:Image ID="zzz" runat="server" ImageUrl='<%# "~/pic/jas/" + Eval("pic_name") + ".jpg" %>' />
            </div>
        </div>
    </ItemTemplate>
    <FooterTemplate>
    </FooterTemplate>
</asp:Repeater>
<div id="imageDiv">
    LoadImage...
</div>
<img id="loader" alt="" src="loading.gif" style="display: none" />
</form> 
```

主页面脚本

```
<link href="StyleSheet1.css" rel="stylesheet" type="text/css" />

<script src="js/jquery-1.7.1.js" type="text/javascript"></script>
<script src="js/jquery.masonry.min.js" type="text/javascript"></script>

<%--masonry--%>
<script type="text/javascript">

    $(function () {
        $('#container').masonry({
            // options
            itemSelector: '.box',
            columnWidth: 240,
            isAnimated: true
        });
    });

</script>
<%--Pagging--%>
<script type="text/javascript">
    var pageIndex = 1;
    var pageCount;
    $(window).scroll(function () {
        if ($(window).scrollTop() == $(document).height() - $(window).height()) {

            GetRecords();
        }
    });
    function GetRecords() {
        pageIndex++;
        if (pageIndex == 2 || pageIndex <= pageCount) {
            $("#loader").show();
            $.ajax({
                type: "POST",
                url: "/index.aspx/GetCustomers",
                data: '{pageIndex: ' + pageIndex + '}',
                contentType: "application/json; charset=utf-8",
                dataType: "json",
                success: OnSuccess,
                failure: function (response) {
                    alert("failur");
                    alert(response.d);
                },
                error: function (response) {
                    alert("error");
                    alert(response.d);
                }
            });
        }
    }
    function OnSuccess(response) {
        var xmlDoc = $.parseXML(response.d);
        var xml = $(xmlDoc);

        pageCount = parseInt(xml.find("PageCount").eq(0).find("PageCount").text());

        var pic_infoVar = xml.find("pic_info");

        pic_infoVar.each(function () {
            var customer = $(this);
            $("#imageDiv").append("<img id='theImg' src='/pic/jas/" + customer.find("pic_name").text() + ".jpg" + "'/>");
        });
        $("#loader").hide();
    }

</script> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-24T07:32:08.117

交换脚本的顺序

```
<script src="js/jquery.masonry.min.js" type="text/javascript"></script>
<script src="js/jquery-1.7.1.js" type="text/javascript"></script> 
```

必须首先加载 jQuery 才能使砌体工作：

```
<script src="js/jquery-1.7.1.js" type="text/javascript"></script>
<script src="js/jquery.masonry.min.js" type="text/javascript"></script> 
```

**编辑：**

您的网站似乎已将砌体应用于每个容器类，这似乎与您的演示页面不同。

演示页面：

```
<div id="container">
    <div class="box">
        <div id="imageDiv1">
            LoadImage...1<br />
            <img id="img1" src="pic/jas/pic10.jpg" />
        </div>
    <div class="box">
        <div id="imageDiv2">
            LoadImage...2<br />
            <img id="Image2" src="pic/jas/pic11.jpg" />
        </div>
    </div>
</div> 
```

主页：

```
 <div id="container">
        <div class="box">
            <img id="rptCustomers_zzz_0" src="pic/jas/pic1.jpg" />
        </div>
    </div>
    <div id="container">
        <div class="box">
            <img id="rptCustomers_zzz_1" src="pic/jas/pic2.jpg" />
        </div>
    </div> 
```

所以添加另一个容器来容纳`.containers`或将砖石应用于身体本身

```
 $(function () {
            $('body').masonry({
                // options
                itemSelector: '.box',
                columnWidth: 240,
                isAnimated: true
            });
        }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-08-31T08:21:03.553

```
 $(document).ready(function () {
     $('.container').imagesLoaded(function () {
      var container = document.querySelector('.container');
      var msnry = new Masonry( container, {   
            // options
            colWidth:200,
            itemSelector: '.box',
            isFitWidth: true,
            isAnimated: true,
             animationOptions: {
            duration: 1000,
            easing: 'linear',
            queue: false
          },
        isInitLayout: false
      });

      msnry._isLayoutInited = true;
      msnry.layout();
    });
    }); 
```

# c++ - 在 C++ 中读取带空格的输入

> ID：14018171
> 
> 赞同：1
> 
> 时间：2012-12-24T07:02:13.193
> 
> 标签：c++, string, input

目前我正在读取带有空格的输入。

```
int main() {
  char str[100];
  string st;
  cin.getline(str,100);
  st=str;
} 
```

我想利用字符串附带的函数，所以我将输入读入字符串。有没有其他方法可以将输入直接读入也允许空间的字符串中。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-24T07:28:34.670

如果要使用`std::string`对象，只需使用`std::getline`.

```
std::string st;
std::getline(std::cin, st); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-24T07:06:34.493

使用gets()函数。

它接受偶数空间作为输入。

例如。)

```
gets (variable_name); 
```

# iphone - 有没有办法在sqllite表中顺序插入数据？

> ID：14018174
> 
> 赞同：2
> 
> 时间：2012-12-24T07:02:32.793
> 
> 标签：iphone, ios, ipad, sqlite

我想在 SQLite 表中插入一些数据，其中一列用于保存字符串值，另一列用于保存序列号。

SQLite 文档说自动增量不能保证顺序插入。而且我不想跟踪以前插入的序列号。

有什么方法可以顺序存储数据，而不跟踪先前插入的行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T07:38:14.340

简短的回答是你是对的，[自动增量文档](http://www.sqlite.org/autoinc.html)清楚地表明它`INTEGER PRIMARY KEY AUTOINCREMENT`会不断增加，尽管正如你指出的那样，你使用的不一定是顺序的。因此，您显然必须修改您的代码，使其不依赖于顺序值（这可能是正确的做法），或者您必须自己维护自己的顺序标识符。我确定这不是您要寻找的答案，但我认为这是实际情况。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-25T09:31:15.430

**简短的回答**：不要担心 AUTOINCREMENT id 序列中的空白。在处理事务数据库时，它们是不可避免的。

**长答案**：SQLite 不能保证 AUTOINCREMENT 总是加一，原因是事务。

假设您有 2 个数据库连接，几乎同时启动了 2 个并行事务。第一个获得了一些 AUTOINCREMENT id，它变成了以前使用的值 +1。一个滴答后，第二笔交易获得了下一个 id，现在是 +2。现在想象第一个事务由于某种原因回滚（遇到一些错误，代码决定中止它，程序崩溃等）。之后，第二个事务将提交 id +2，从而在 id 编号上产生间隙。

现在，如果此类并行事务的数量高于 2 怎么办？您无法预测，也无法告诉当前正在运行的事务重用出于任何原因未使用的 id。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-24T07:42:30.520

如果您将数据按顺序插入 SQLite 数据库，它们将按顺序存储。

从**文档**：`the automatically generated ROWIDs are guaranteed to be monotonically increasing.`

因此，例如，如果您想为 建立一个表`Person`，那么您可以使用以下命令创建具有**自动增量**的表。

`CREATE table PERSON (personID integer PRIMARY KEY AUTOINCREMENT, personName string)`

链接：[http ://www.sqlite.org/autoinc.html](http://www.sqlite.org/autoinc.html)

# objective-c - 将点击以聚焦功能添加到 ZBarReaderViewController

> ID：14018177
> 
> 赞同：4
> 
> 时间：2012-12-24T07:02:46.250
> 
> 标签：objective-c, ios, zbar-sdk

我正在使用 zbarsdk 来读取条形码。它工作正常，但我的问题是我已将覆盖视图添加到 ZBarReaderViewController （我的代码中的阅读器）。所以现在我尝试添加点击聚焦功能。但它正在崩溃。下面是我的代码。提前致谢 。任何想法将不胜感激。

```
-(IBAction)scanBarCode:(id)sender
{
    barcodeClicked = 1;

    NSLog(@"TBD: scan barcode here...");
    // ADD: present a barcode reader that scans from the camera feed
    reader = [ZBarReaderViewController new];
    reader.readerDelegate = self;
    reader.supportedOrientationsMask = ZBarOrientationMaskAll;

    ZBarImageScanner *scanner = reader.scanner;
    // TODO: (optional) additional reader configuration here

    // EXAMPLE: disable rarely used I2/5 to improve performance
    [scanner setSymbology: ZBAR_I25
                   config: ZBAR_CFG_ENABLE
                       to: 0];
    reader.showsZBarControls = NO;

    UIView *ovlView = [[UIView alloc] init];
    [ovlView setFrame:CGRectMake(0, 0, 320, 480)];
    [ovlView setBackgroundColor:[UIColor clearColor]];

    UIImageView *leftBracket = [[UIImageView alloc] init];
    [leftBracket setFrame:CGRectMake(21, 100, 278, 15)];
    [leftBracket setImage:[UIImage imageNamed:@"TopBracket.png"]];

    UIImageView *rightBracket = [[UIImageView alloc] init];
    [rightBracket setFrame:CGRectMake(21, 240, 278, 15)];
    [rightBracket setImage:[UIImage imageNamed:@"BottomBracket.png"]];

    UIToolbar *bottomBar = [[UIToolbar alloc] init];
    [bottomBar setBarStyle:UIBarStyleBlackOpaque];

    if(UI_USER_INTERFACE_IDIOM() == UIUserInterfaceIdiomPhone && [UIScreen mainScreen].bounds.size.height * [UIScreen mainScreen].scale >= 1136)
    {
        [bottomBar setFrame:CGRectMake(0, 524, 320, 44)];
    }
    else
        [bottomBar setFrame:CGRectMake(0, 436, 320, 44)];

    UIBarButtonItem *cancel = [[UIBarButtonItem alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemCancel target:self action:@selector(cancelCamera)];
    /*UIBarButtonItem *flexItem = [[UIBarButtonItem alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemFlexibleSpace
                                                                              target:nil
                                                                              action:nil];*/
    //UIBarButtonItem *infoButton = [[UIBarButtonItem alloc] initWithTitle:@" Info " style:UIBarButtonItemStyleBordered target:self action:@selector(infoButton)];
    /*UIButton *info = [UIButton buttonWithType:UIButtonTypeInfoLight];
    [info addTarget:self action:@selector(infoButton) forControlEvents:UIControlEventTouchUpInside];
    UIBarButtonItem *infoButton = [[UIBarButtonItem alloc] initWithCustomView:info];

    [bottomBar setItems:[NSArray arrayWithObjects:cancel,flexItem,infoButton, nil]];*/

    [bottomBar setItems:[NSArray arrayWithObjects:cancel, nil]];

    [ovlView addSubview:leftBracket];
    [ovlView addSubview:rightBracket];
    [ovlView addSubview:bottomBar];

    reader.cameraOverlayView = ovlView;

    // present and release the controller
    [self presentModalViewController:reader
                            animated: YES];
    [reader release];
}

-(void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event {
    UIView * previewView = [[[[[[[[[[
                                     reader.view // UILayoutContainerView
                                     subviews] objectAtIndex:0] // UINavigationTransitionView
                                   subviews] objectAtIndex:0] // UIViewControllerWrapperView
                                 subviews] objectAtIndex:0] // UIView
                               subviews] objectAtIndex:0] // PLCameraView
                             subviews] objectAtIndex:0]; // PLPreviewView
    [previewView touchesBegan:touches withEvent:event];
} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-31T14:38:13.643

感谢 MacN00b 的回答！这为我指明了正确的方向。我已经为 zbarViewController 实现了点击焦点。这是想法：

您可以通过将自定义视图分配给其 cameraOverlayView 来将自定义视图添加到 zbarViewController。然后将 TapGestureRecagonizer 添加到自定义视图以捕捉点击。然后，获取接触点并使相机聚焦到接触点。您可能希望在触摸点周围添加一个小矩形（这就是我所做的）。

这是代码（将自定义视图分配给cameraOverlayView：

```
UIView *view = [[UIView alloc] init];
UITapGestureRecognizer* tapScanner = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(focusAtPoint:)];
[view addGestureRecognizer:tapScanner];    
reader.cameraOverlayView = view; 
```

然后在选择器**focusAtPoint**：

```
- (void)focusAtPoint:(id) sender{
    CGPoint touchPoint = [(UITapGestureRecognizer*)sender locationInView:_reader.cameraOverlayView];
    double focus_x = touchPoint.x/_reader.cameraOverlayView.frame.size.width;
    double focus_y = (touchPoint.y+66)/_reader.cameraOverlayView.frame.size.height;
    NSError *error;
    NSArray *devices = [AVCaptureDevice devices];
    for (AVCaptureDevice *device in devices){
        NSLog(@"Device name: %@", [device localizedName]);
        if ([device hasMediaType:AVMediaTypeVideo]) {
            if ([device position] == AVCaptureDevicePositionBack) {
                NSLog(@"Device position : back");
                CGPoint point = CGPointMake(focus_y, 1-focus_x);
                if ([device isFocusModeSupported:AVCaptureFocusModeContinuousAutoFocus] && [device lockForConfiguration:&error]){
                    [device setFocusPointOfInterest:point];
                    CGRect rect = CGRectMake(touchPoint.x-30, touchPoint.y-30, 60, 60);
                    UIView *focusRect = [[UIView alloc] initWithFrame:rect];
                    focusRect.layer.borderColor = [UIColor whiteColor].CGColor;
                    focusRect.layer.borderWidth = 2;
                    focusRect.tag = 99;
                    [_reader.cameraOverlayView addSubview:focusRect];
                    [NSTimer scheduledTimerWithTimeInterval: 1
                                target: self
                                selector: @selector(dismissFocusRect)
                                userInfo: nil
                                repeats: NO];
                    [device setFocusMode:AVCaptureFocusModeAutoFocus];
                    [device unlockForConfiguration];
                }
            }
        }
    }
} 
```

我在触摸点周围添加了一个白色矩形，然后使用选择器dismissFocusRect 来消除这个矩形。这是代码：

```
- (void) dismissFocusRect{
    for (UIView *subView in _reader.cameraOverlayView.subviews)
    {
        if (subView.tag == 99)
        {
            [subView removeFromSuperview];
        }
    }
} 
```

我希望这会有所帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-24T07:10:01.277

在“Focus Modes”部分查看苹果的这个文档：[https](https://developer.apple.com/library/ios/#documentation/AudioVideo/Conceptual/AVFoundationPG/Articles/04_MediaCapture.html) ://developer.apple.com/library/ios/#documentation/AudioVideo/Conceptual/AVFoundationPG/Articles/04_MediaCapture.html它谈到了如何实现tap正确对焦。我会尝试通过

```
CGRect screenRect = [[UIScreen mainScreen] bounds];
    screenWidth = screenRect.size.width;
    screenHeight = screenRect.size.height;  
    double focus_x = thisFocusPoint.center.x/screenWidth;
    double focus_y = thisFocusPoint.center.y/screenHeight;

    [[self captureManager].videoDevice lockForConfiguration:&error];
    [[self captureManager].videoDevice setFocusPointOfInterest:CGPointMake(focus_x,focus_y)]; 
```

好吧，如果您正在使用该视图控制器，那么添加一个应该可以在barcodeviewcontroller中实现的（void）怎么样。

```
- (void) focusAtPoint:(CGPoint)point

{

    AVCaptureDevice *device = [[self videoInput] device];

    if ([device isFocusPointOfInterestSupported] && [device isFocusModeSupported:AVCaptureFocusModeAutoFocus]) {

        NSError *error;

        if ([device lockForConfiguration:&error]) {

            [device setFocusPointOfInterest:point];

            [device setFocusMode:AVCaptureFocusModeAutoFocus];

            [device unlockForConfiguration];

        } else {

            id delegate = [self delegate];

            if ([delegate respondsToSelector:@selector(acquiringDeviceLockFailedWithError:)]) {

                [delegate acquiringDeviceLockFailedWithError:error];

            }

        }        

    }

} 
```

# forms - 在一个提交按钮的新窗口中打开 URL 的两个表单操作？

> ID：14018180
> 
> 赞同：3
> 
> 时间：2012-12-24T07:03:21.807
> 
> 标签：forms, action

是否可以将两个表单操作放在一个提交按钮中？用户将能够选择两个单选按钮，每个表单操作将同时在新窗口中打开 URL。我不知道该怎么做，而且我对编码也没有太多了解。这段代码不是我的，我只想修改。:(

这是代码：

```
<form action="http://thegreatpromocode.tk/lite/jonsnow/subscribe" method="post" class="form-subscribe-
promo" target="foo" onsubmit="window.open
('','foo','width=450,height=250,status=no,resizable=no,scrollbars=no')">

        <input type="radio" name="promo_code" value="BlueGem">BlueGem<br>
        <input type="radio" name="promo_code" value="RedGem">RedGem<br>
        <input type="radio" name="promo_code" value="GreenGem">GreenGem<br>
        <input type="radio" name="promo_code" value="WhiteGem">WhiteGem<br>
        <input type="radio" name="promo_code" value="YellowGem">YellowGem<br>
        <input type="radio" name="promo_code" value="DarkGem">DarkGem<br>
        <input type="radio" name="promo_code" value="OrangeGem">OrangeGem<br>
        <input type="radio" name="promo_code" value="VioletGem">VioletGem<br>
        <input type="hidden" name="subscriber" value="temporary">
        <input type="hidden" name="promo_name" value="GemStone"><hr>
        <center><input type="text" name="User ID" size="18" onblur="if

(this.value=='')

{this.value='ID Number';}" onfocus="if(this.value=='ID Number'){ 

this.value='';}" value="11-Digit Mobile Number">
        <input type="submit" value="Confirm"></form> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T07:12:13.297

尝试这个：

```
<form action="http://thegreatpromocode.tk/lite/jonsnow/subscribe" 
    method="post" 
    class="form-subscribe-promo" 
    target="_blank" 
    onsubmit="
            window.open('http://www.google.com','New Window 1','width=450,height=250,status=no,resizable=no,scrollbars=no');
            window.open('http://www.stackoverflow.com','New Window 2','width=450,height=250,status=no,resizable=no,scrollbars=no');
            return false;"> 
```

# sql - sqlite查询以查找列中所有值的总和

> ID：14018181
> 
> 赞同：0
> 
> 时间：2012-12-24T07:03:24.023
> 
> 标签：sql, sqlite, sum

此列是 sqlite 中的价格。我正在使用`SELECT SUM(price) FROM example;` 但该值不正确，它只是 5 位数字，后跟 67 个数字和 6 个零和 1，例如： 34,456.670000001 。该列是作为 VARCHAR 创建的。我尝试了 numeric(100) 和 Integer，但值仍然保持不变。请指导我完成，因为我是 db 中的菜鸟。再次感谢。我非常感谢您的帮助。

```
345,887.21
16,520.11 
388,902.02 
24,622.43 
278,916.52 
42.22 
17,234.01 
377,245.67 
5,104,245.00 
23,332.98 
126,875.21 
5,112,225.14 
4,552.54 
402.82 
132,875.32 
126,334,123.32 
345,887.21
16,520.11 
388,902.02 
24,622.43 
278,916.52 
42.22 
17,234.01 
377,245.67 
5,104,245.00 
23,332.98 
126,875.21 
5,112,225.14 
4,552.54 
402.82 
132,875.32 
75,334,123.32 
345,887.21
16,520.11 
388,902.02 
24,622.43 
278,916.52 
42.22 
17,234.01 
377,245.67 
5,104,245.00 
23,332.98 
126,875.21 
5,112,225.14 
4,552.54 
402.82 
132,875.32 
52,334,123.32 
2,442,887.21
255,165.11 
3,889.02 
622.43 
916.52 
42.22 
17,234.01 
77,245.67 
104,245.00 
332.98 
6,875.21 
12,225.14 
52.54 
402.82 
32,875.32 
160,334,123.32 
345,887.21
16,520.11 
388,902.02 
24,622.43 
278,916.52 
42.22 
17,234.01 
377,245.67 
5,104,245.00 
23,332.98 
126,875.21 
5,112,225.14 
4,552.54 
402.82 
132,875.32 
129,334,123.00 
345,887.21
16,520.11 
388,902.02 
24,622.43 
278,916.52 
42.22 
17,234.01 
377,245.67 
5,104,245.00 
23,332.98 
126,875.21 
5,112,225.14 
4,552.54 
402.82 
132,875.32 
129,334,123.32 
345,887.21
16,520.11 
388,902.02 
24,622.43 
278,916.52 
42.22 
17,234.01 
377,245.67 
5,104,245.00 
23,332.98 
126,875.21 
5,112,225.14 
4,552.54 
402.82 
132,875.32 
129,334,123.32 
2,442,887.21
255,165.11 
3,889.02 
622.43 
916.52 
42.22 
17,234.01 
77,245.67 
104,245.00 
332.98 
6,875.21 
12,225.14 
52.54 
402.82 
32,875.32 
246,323,743.32 
345,887.45
16,520.11 
388,902.02 
24,622.43 
278,916.52 
42.22 
17,234.01 
377,245.67 
5,104,245.00 
23,332.98 
126,875.21 
5,112,225.14 
4,552.54 
402.82 
132,875.32 
129,334,123.32 
345,887.21
16,520.11 
388,902.02 
24,622.43 
278,916.52 
42.22 
17,234.01 
377,245.67 
5,104,245.00 
23,332.98 
126,875.21 
5,112,225.14 
4,552.54 
402.82 
132,875.32 
129,237,129.57 
345,887.21
16,520.11 
388,902.02 
24,622.43 
278,916.52 
42.22 
17,234.01 
377,245.67 
5,104,245.00 
23,332.98 
126,875.21 
5,112,225.14 
4,552.54 
402.82 
132,875.32 
129,334,123.32 
2,442,887.21
255,165.11 
3,889.02 
622.43 
916.52 
42.22 
17,234.01 
77,245.67 
104,245.00 
332.98 
6,875.21 
12,225.14 
52.54 
402.82 
32,875.32 
183,334,123.32 
345,887.21
16,520.11 
388,902.02 
24,622.43 
278,916.52 
42.22 
17,234.01 
377,245.67 
5,104,245.00 
23,332.98 
126,875.21 
5,112,225.14 
4,552.54 
402.82 
132,875.32 
129,322,555.39 
345,887.21
16,520.11 
388,902.02 
24,622.43 
278,916.52 
42.22 
17,234.01 
377,245.67 
5,104,245.00 
23,332.98 
126,875.21 
5,112,225.14 
4,552.54 
402.82 
132,875.32 
129,334,123.32 
345,887.21
16,520.11 
388,902.02 
24,622.43 
278,916.52 
42.22 
17,234.01 
377,245.67 
5,104,245.00 
23,332.98 
126,875.21 
5,112,225.14 
4,552.54 
402.82 
132,875.32 
129,334,123.32 
2,442,887.21
255,165.11 
3,889.02 
622.43 
916.52 
42.22 
17,234.01 
77,245.67 
104,245.00 
332.98 
6,875.21 
12,225.14 
52.54 
402.82 
32,875.32 
153,334,123.32 
345,887.21
16,520.11 
388,902.02 
24,622.43 
278,916.52 
42.22 
17,234.01 
377,245.67 
5,104,245.00 
23,332.98 
126,875.21 
5,112,225.14 
4,552.54 
402.82 
132,875.32 
129,400,321.23 
345,887.21
16,520.11 
388,902.02 
24,622.43 
278,916.52 
42.22 
17,234.01 
377,245.67 
5,104,245.00 
23,332.98 
126,875.21 
5,112,225.14 
4,552.54 
402.82 
132,875.32 
129,334,123.32 
345,887.21
16,520.11 
388,902.02 
24,622.43 
278,916.52 
42.22 
17,234.01 
377,245.67 
5,104,245.00 
23,332.98 
126,875.21 
5,112,225.14 
4,552.54 
402.82 
132,875.32 
129,334,123.32 
2,442,887.21
255,165.11 
3,889.02 
622.43 
916.52 
42.22 
17,234.01 
77,245.67 
104,245.00 
332.98 
6,875.21 
12,225.14 
52.54 
402.82 
32,875.32 
83,334,123.32 
345,887.21
16,520.11 
388,902.02 
24,622.43 
278,916.52 
42.22 
17,234.01 
377,245.67 
5,104,245.00 
23,332.98 
126,875.21 
5,112,225.14 
4,552.54 
402.82 
132,875.32 
129,341,152.99 
345,887.21
16,520.11 
388,902.02 
24,622.43 
278,916.52 
42.22 
17,234.01 
377,245.67 
5,104,245.00 
23,332.98 
126,875.21 
5,112,225.14 
4,552.54 
402.82 
132,875.32 
129,334,123.32 
345,887.21
16,520.11 
388,902.02 
24,622.43 
278,916.52 
42.22 
17,234.01 
377,245.67 
5,104,245.00 
23,332.98 
126,875.21 
5,112,225.14 
4,552.54 
402.82 
132,875.32 
139,334,123.32 
2,442,887.21
255,165.11 
3,889.02 
622.43 
916.52 
42.22 
17,234.01 
77,245.67 
104,245.00 
332.98 
6,875.21 
12,225.14 
52.54 
402.82 
32,875.32 
164,334,123.32 
345,887.21
16,520.11 
388,902.02 
24,622.43 
278,916.52 
42.22 
17,234.01 
377,245.67 
5,104,245.00 
23,332.98 
126,875.21 
5,112,225.14 
4,552.54 
402.82 
132,875.32 
129,299,477.81 
345,887.21
16,520.11 
388,902.02 
24,622.43 
278,916.52 
42.22 
17,234.01 
377,245.67 
5,104,245.00 
23,332.98 
126,875.21 
5,112,225.14 
4,552.54 
402.82 
132,875.32 
129,334,123.32 
345,887.21
16,520.11 
388,902.02 
24,622.43 
278,916.52 
42.22 
17,234.01 
377,245.67 
5,104,245.00 
23,332.98 
126,875.21 
5,112,225.14 
4,552.54 
402.82 
132,875.32 
139,334,123.32 
2,442,887.21
255,165.11 
3,889.02 
622.43 
916.52 
42.22 
17,234.01 
77,245.67 
104,245.00 
332.98 
6,875.21 
12,225.14 
52.54 
402.82 
32,875.32 
166,334,123.32 
345,887.21
16,520.11 
388,902.02 
24,622.43 
278,916.52 
42.22 
17,234.01 
377,245.67 
5,104,245.00 
23,332.98 
126,875.21 
5,112,225.14 
4,552.54 
402.82 
132,875.32 
129,309,926.11 
345,887.21
16,520.11 
388,902.02 
24,622.43 
278,916.52 
42.22 
17,234.01 
377,245.67 
5,104,245.00 
23,332.98 
126,875.21 
5,112,225.14 
4,552.54 
402.82 
132,875.32 
129,334,123.32 
345,887.21
16,520.11 
388,902.02 
24,622.43 
278,916.52 
42.22 
17,234.01 
377,245.67 
5,104,245.00 
23,332.98 
126,875.21 
5,112,225.14 
4,552.54 
402.82 
132,875.32 
139,334,123.32 
2,442,887.21
255,165.11 
3,889.02 
622.43 
916.52 
42.22 
17,234.01 
77,245.67 
104,245.00 
332.98 
6,875.21 
12,225.14 
52.54 
402.82 
32,875.32 
83,334,123.32 
345,887.21
16,520.11 
388,902.02 
24,622.43 
278,916.52 
42.22 
17,234.01 
377,245.67 
5,104,245.00 
23,332.98 
126,875.21 
5,112,225.14 
4,552.54 
402.82 
132,875.32 
129,334,123.32 
345,887.21
16,520.11 
388,902.02 
24,622.43 
278,916.52 
42.22 
17,234.01 
377,245.67 
5,104,245.00 
23,332.98 
126,875.21 
5,112,225.14 
4,552.54 
402.82 
132,875.32 
129,387,002.55 
345,887.21
16,520.11 
388,902.02 
24,622.43 
278,916.52 
42.22 
17,234.01 
377,245.67 
5,104,245.00 
23,332.98 
126,875.21 
5,112,225.14 
4,552.54 
402.82 
132,875.32 
31,334,123.32 
2,442,887.21
255,165.11 
3,889.02 
622.43 
916.52 
42.22 
17,234.01 
77,245.67 
104,245.00 
332.98 
6,875.21 
12,225.14 
52.54 
402.82 
32,875.32 
83,334,123.32 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-24T07:16:39.910

问题是 SQLite 会在将这些字符串隐式转换为数字时截断逗号处的数字，以便对它们求和。例如：

```
sqlite> select '1,000' + '2,000';
'1,000' + '2,000'
3 
```

您需要做的就是去掉逗号。您应该能够使用[`replace`](http://www.sqlite.org/lang_corefunc.html#replace)然后让 SQLite 的默认类型转换从那里获取它：

```
SELECT SUM(replace(price, ',', '')) FROM example 
```

例如：

```
sqlite> select replace('1,000', ',', '') + replace('2,000', ',', '');
replace('1,000', ',', '') + replace('2,000', ',', '')
3000 
```

# c# - WP7 Live 磁贴，例如 People Hub 或 Me 应用

> ID：14018182
> 
> 赞同：-1
> 
> 时间：2012-12-24T07:03:36.207
> 
> 标签：c#, windows-phone-7

我们可以在 wp7 中创建像“People Hub”或“Me”应用程序这样的动态磁贴吗？我已经有了翻转样式，但我想要一个像“人物中心”或“我”这样的动画图块。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T08:04:12.000

这在 Windows Phone 7 中是不可能的 - 这些类型的磁贴仅限于内置应用程序。

# java - JSF2 命令按钮；AJAX 或非 AJAX，它刷新了整个页面

> ID：14018183
> 
> 赞同：0
> 
> 时间：2012-12-24T07:03:42.843
> 
> 标签：java, ajax, jsf, jsf-2

这是一个演示案例的简单示例。

您有一个带有面板和两个命令按钮的表单，一个是 AJAX，另一个不是。通过单击其中任何一个，将在支持 bean 中创建一个 InputText 并将其添加到面板中。

我的托管bean：

```
@ManagedBean

public class DynamicPanel {

private Panel dynmaic;

public Panel getDynmaic() {
    return dynmaic;
}

public void setDynmaic(Panel dynmaic) {
    this.dynmaic = dynmaic;
}

public String adddynamic(){

    InputText text = new InputText();        
    dynmaic.getChildren().add(text);
    text.setValue(text.getId()+" Size= "+ dynmaic.getChildren().size());
    return null;
}

public String removeall(){
    this.dynmaic.getChildren().clear();
    return null;
}
} 
```

我的 XHTML 页面

```
<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
  xmlns:h="http://java.sun.com/jsf/html" xmlns:ui="http://java.sun.com/jsf/facelets"
  xmlns:p="http://primefaces.org/ui" xmlns:f="http://java.sun.com/jsf/core">
<h:head>
    <title>Facelet Title</title>
</h:head>
<h:body>
    <h:form>
        <p:panel id="dynamic" binding="#{dynamicPanel.dynmaic}">

        </p:panel>

        <h:commandButton value="Add with AJAX" id="ajaxBtn" >
        <f:ajax onevent="onClick" execute="#{dynamicPanel.adddynamic()}" render="dynamic" />
         </h:commandButton>

        <h:commandButton value="Add" action="#{dynamicPanel.adddynamic}" />
        <h:commandButton value="remove all" action="#{dynamicPanel.removeall}" />   
    </h:form>

</h:body>
</html> 
```

我的 faces-config.xml 是空的。

现在，我对上面的代码有三个问题。有人可以向我澄清一下吗，我是 JSF2 的新手。

首先是，为什么两个命令按钮的行为相同？单击 ether one 将刷新整个页面。

第二个问题是，为什么点击非 AJAX 命令按钮一次会添加两个 Inputfied？

第三，为什么将托管bean的范围更改为@SessionScoped会在加载页面后报错？（不知何故只是加载页面，表单发出一个ajax请求而我没有点击commandButton。这是为什么呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T09:14:48.490

尝试以下，应该会更好。

```
<h:commandButton value="Add with AJAX" id="ajaxBtn" >
    <f:ajax onevent="click" execute="ajaxBtn"
                            render="dynamic"
                            listener="#{dynamicPanel.adddynamic()}"
     </h:commandButton> 
```

据我所知，对于`f:ajax`execute属性，应该给出组件的id，并且应该调用诸如`addDynamic()`在listener属性中的方法。

当您单击非 ajax 按钮时，它会发布整个表单，其中还包括您的 ajax 命令。所以基本上你的`addDynamic()`函数被调用了两次，一次通过 ajax 命令，第二次通过非 ajax 命令。

# c++ - 使用迭代器从 STL 列表中删除 C++ 结构

> ID：14018185
> 
> 赞同：2
> 
> 时间：2012-12-24T07:03:45.487
> 
> 标签：c++, list, memory, iterator, delete-operator

我有这个测试程序。我不知道如何使用迭代器删除列表中的结构。

```
#include<iostream>
#include<list>
using namespace std;
typedef struct Node
{
    int * array;
    int id;
}Node;

void main()
{
    list<Node> nlist;
    for(int i=0;i<3;i++)
    {
        Node * p = new Node;//how to delete is later?

        p->array = new int[5];//new array
        memset(p->array,0,5*sizeof(int));

        p->id = i;

        nlist.push_back(*p);//push node into list
    }

    //delete each struct in list
    list<Node>::iterator lt = nlist.begin();
    while( lt != nlist.end())
    {
        delete [] lt->array;

        delete &(*lt);//how to delete the "Node"?

        lt++;
    }
} 
```

我知道如何单独删除结构。就像这样：

```
Node * p = new Node;
p->array = new int[5];

delete [] p->array; //delete the array
delete p;//delete the struct 
```

但是，当它被推回列表时，我不知道如何根据列表迭代器将其删除。

```
list<Node>::iterator lt = nlist.begin();
while( lt != nlist.end())
{
    delete [] lt->array;

    delete &(*lt);//how to delete the "Node"?

    lt++;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T07:56:23.850

您可以使用[列表擦除](http://www.cplusplus.com/reference/list/list/erase/)从列表之间的任何位置删除节点。

```
list<Node>::iterator it = nlist.begin();
advance(it,n); \\n is the node you want to delete, make sure its less than size of list
it = mylist.erase (it); 
```

或者，如果您想从列表的任一端删除元素，您可以使用 [pop_back](http://www.cplusplus.com/reference/list/list/pop_back/)或[pop_front](http://www.cplusplus.com/reference/list/list/pop_front/)成员函数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-24T07:13:36.790

由于您在声明列表`list<Node>`时使用：

```
nlist.push_back(*p) 
```

它实际上是创建一个`Node()`并从您刚刚动态分配但不使用实际指针的节点复制数据。然后你尝试从系统将自动删除的对象中删除一个指针：

```
delete &(*lt); // this causes double free 
```

您需要像`list<Node*>`这样声明列表，以便将指针插入到列表中。尽管您不应该真正在 c++ 中处理这种分配，但通过一些修改，您的代码应该可以工作：

```
int main()
{
  list<Node*> nlist;
  for(int i=0;i<3;i++)
  {
    Node *p = new Node;//how to delete is later?

    p->array = new int[5];//new array
    memset(p->array,0,5*sizeof(int));

    p->id = i;

    nlist.push_back(p);//push node into list
  }

  //delete each struct in list
  list<Node*>::iterator lt = nlist.begin();
  while( lt != nlist.end())
  {
    delete [] (*lt)->array;

    delete *lt;//how to delete the "Node"?

    lt++;
  }

  return 0;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-24T07:10:32.853

使用[list.erase](http://en.cppreference.com/w/cpp/container/list/erase) 但你真的是在做那种非 C++ 的方式。您不需要使用 new 分配 int[5]。写 int[5] 做你想做的事。您在 c-way 中定义的节点类型。在 c++ 中，您不需要用 typedef 包装它

# windows - 在 Windows 7 中使用 nutch

> ID：14018187
> 
> 赞同：6
> 
> 时间：2012-12-24T07:03:54.710
> 
> 标签：windows, windows-7, cygwin, nutch

我正在尝试在 Windows 环境中使用 nutch 1.6，但每次我尝试按照网站[Nutch Tuorial Apache](http://wiki.apache.org/nutch/NutchTutorial)中给出的过程运行时，我总是会遇到以下异常：

```
Exception in thread "main" java.io.IOException: Failed to set permissions of path: \tmp\hadoop-ajayn\mapred\staging\ajayn-1231695575\.staging to 0700 
```

我一直在网上广泛搜索，但没有具体的解决方案。请注意，我没有在系统中安装或运行 hadoop 实例，我唯一的目的是试用 nutch 作为网络爬虫代理。

是否可以在 Windows 中运行 nutch 1.6，如果可以，有任何关于如何进行操作并避免上述异常的指针。

PS：如果有帮助，/tmp/ 文件夹附加了一个只读属性，即使您尝试这样做也不会更改。同样来自 cygwin 我试图设置文件权限 777，但每次我尝试运行 nutch 实例时，都会创建一个新文件夹，例如：“ajayn-1231695575”，它没有任何执行权限。

谢谢

阿杰

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-12-03T22:18:53.393

您是否尝试[过 Nutch Wiki 中的 GettingNutchRunningWithWindows](http://wiki.apache.org/nutch/GettingNutchRunningWithWindows)？

我的一些学生进行了很多实验，以下是他们的工作结果：

用**nutch 1.7**测试-`http://www.apache.org/dyn/closer.cgi/nutch/1.7/apache-nutch-1.7-bin.zip` 你还需要*cygwin*。

1)*将 nutch*提取到没有空格的路径。例如：

```
 d:\dev\ir\nutch-1.7 
```

2）将jdk复制到没有空格的某个地方。我试图在 cygwin 中创建一个符号链接，但它并不顺利。例如

```
xcopy /S "C:\Program Files\Java\jdk1.7.0_21" c:\jdk1.7.0_21 
```

3）在cygwin中设置java的路径

3.1)`export JAVA_HOME=/cygdrive/c/jdk1.7.0_21`

3.2)`export PATH=$JAVA_HOME/bin:$PATH`

3,3) 通过调用 which java.xml 来检查一切是否正确。应该返回`/cygdrive/c/jdk1.7.0_21/bin/java`

SO FAR - 修复了第一个问题 - java 路径不正确。现在到第二个问题 - *hadoop*修补。

4）补丁*hadoop*

```
https://issues.apache.org/jira/browse/HADOOP-7682
https://github.com/congainc/patch-hadoop_7682-1.0.x-win 
```

简而言之： - 放入`patch-hadoop_7682-1.0.x-win.jar`-`d:\dev\ir\nutch-1.7\lib` 通过`d:\dev\ir\nutch-1.7\conf\nutch-site.xml`添加以下内容进行编辑：

```
<property>
   <name>fs.file.impl</name>
   <value>com.conga.services.hadoop.patch.HADOOP_7682.WinLocalFileSystem</value>
   <description>Enables patch for issue HADOOP-7682 on Windows</description>
</property> 
```

5) Hadoop temp dir - 我不确定这是否有必要（在应用之前尝试），因为我在应用补丁之前添加了它，但在我`d:\dev\ir\nutch-1.7\conf\nutch-site.xml`有

```
<property>
   <name>hadoop.tmp.dir</name>
   <value>C:\tmp\asd</value>
</property> 
```

6) *Hadoop 版本*- 我不确定这是否必要（在应用之前尝试），我在找到补丁之前将 hadoop 降级为 hadoop-core-0.20.205.0.jar，它仍然保留在我的设置中。如果您觉得有必要，请点击此处：`http://mvnrepository.com/artifact/org.apache.hadoop/hadoop-core/0.20.205.0`

6.1) 移动`hadoop-core-1.2.1.jar`到`d:\dev\ir\nutch-1.7\lib`某个位置进行备份

6.2) 下载`hadoop-core-0.20.205.0.jar`到`d:\dev\ir\nutch-1.7\lib`

7) 一些爬取优化。如果您需要抓取大量网站，请不要从大量 url 列表、大深度和 topN 开始抓取。如果这样做，您会看到 nutch 依次从同一站点一次获取一个链接，在两次获取之间等待 5 秒。原因是深度 30 和 topN 200 很可能仅使用来自同一站点的链接填充第一个获取队列。Nutch 不会尝试一次获取它们，因为默认情况下它被配置为不从同一站点获取多个线程。所以你注定要等待。很多。

7.1）为了解决这个问题，首先运行几个小深度和topN的爬网 - 例如

```
bin/nutch crawl urls -dir crawl -depth 3 -topN 4 
```

这将使用来自多个站点的 url 填充生成的获取队列

7.2）然后你可以尝试一个大晚上的爬行

```
bin/nutch crawl urls -dir crawl -depth 20  -topN 150 
```

7.3.) 要允许一些多线程，请将以下内容添加到您的`nutch-site.xml`. 它将允许多个线程一次从同一主机获取。

**笔记！**在使用它们之前阅读互联网中属性的含义。

```
<property>
  <name>fetcher.threads.fetch</name>
  <value>16</value>
</property>
<property>
  <name>fetcher.threads.per.queue</name>
  <value>4</value>
</property>
<property>
<property>
  <name>fetcher.queue.mode</name>
  <value>byDomain</value>
</property>
<name>fetcher.threads.per.host</name>
   <value>8</value>
   <description></description>
</property>
<property>
  <name>fetcher.verbose</name>
  <value>true</value>
</property>
<property>
  <name>fetcher.server.min.delay</name>
  <value>5.0</value>
  <description>applicable ONLY if fetcher.threads.per.host is greater than 1 (i.e. the host blocking is turned off).</description>
</property>
</configuration> 
```

**注意：**当您抓取大量网站时，请确保您`D:\Dev\id\apache-nutch-1.7\conf\regex-urlfilter.txt`只包含您感兴趣的网站。否则，您最终会在磁盘上看到“Internet”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T20:24:04.373

在 Nutch 1.3 之前我们也遇到了同样的问题，我们建议使用带有用于开发的虚拟机和共享目录的 ubuntu vm 环境，这样您就可以在 Windows 上使用 ide 进行开发并部署到您的 vm 并在 Linux 上运行 Nutch。

# spring-mvc - 在依赖注入中动态初始化依赖对象？

> ID：14018191
> 
> 赞同：0
> 
> 时间：2012-12-24T07:04:17.087
> 
> 标签：spring-mvc, dependency-injection

为了初始化依赖对象，我们在 '/WEB-INF/springmvc-servlet.xml' 中放置了一个 bean 条目：

```
<bean id="carManager" class="springmvc.service.CarManager">
   <property name="carList">
     <list>
       <ref bean="car1"/>
       <ref bean="car2"/>
    </list>
    </property>
</bean> 
```

对于参考 bean "car1" 和 car2"，我们的条目是：

```
<bean id="car1" class="springmvc.model.Car">
    <property name="id" value="1"/>
    <property name="brand" ref="brand1"/>
    <property name="model" value="SL 500"/>
    <property name="price" value="40000"/>
</bean>

<bean id="car2" class="springmvc.model.Car">
    <property name="id" value="2"/>
    <property name="brand" ref="brand2"/>
    <property name="model" value="607"/>
    <property name="price" value="35000"/>
</bean> 
```

所以我的问题是我们可以动态准备“car1”和“car2”bean。例如，在“car1”bean 中，我想要汽车列表 whoes 的值高于 40000，因此我必须从 DB 获取数据，所以我如何调用我的服务或 DB 查询来准备这样的 bean 是否可能？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T12:05:04.680

您可以实现 BeanDefinitionParser 并覆盖其中的适当方法。

并使用

BeanDefinitionBuilder messageProcessorBuilder = BeanDefinitionBuilder.genericBeanDefinition(MessagingPostProcessor.class); messageProcessorBuilder.addConstructorArgValue(StringUtils.split(packageNames, ",")); registry.registerBeanDefinition(MessagingPostProcessor.class.getName(), messageProcessorBuilder.getBeanDefinition());

# f# - C++ AMP 库对 F# 有用吗？

> ID：14018195
> 
> 赞同：5
> 
> 时间：2012-12-24T07:04:38.240
> 
> 标签：f#, task-parallel-library, gpgpu, c++-amp

我正在尝试使用 F# 中的 C++ AMP 库作为使用 GPU 并行工作的一种方式。但是，我得到的结果似乎并不直观。

在 C++ 中，我用一个函数创建了一个库，该函数使用 AMP 对数组中的所有数字求平方：

```
extern "C" __declspec ( dllexport ) void _stdcall square_array(double* arr, int n)
{
// Create a view over the data on the CPU
    array_view<double,1> dataView(n, &arr[0]);

// Run code on the GPU
    parallel_for_each(dataView.extent, [=] (index<1> idx) restrict(amp)
    {
        dataView[idx] = dataView[idx] * dataView[idx];
    });

// Copy data from GPU to CPU
    dataView.synchronize();
} 
```

（代码改编自 Igor Ostrovsky在 MSDN 上的[博客。）](https://blogs.msdn.com/b/pfxteam/archive/2011/09/21/10214538.aspx?Redirected=true)

然后我编写了以下 F# 来将任务并行库 (TPL) 与 AMP 进行比较：

```
// Print the time needed to run the given function
let time f =
    let s = new Stopwatch()
    s.Start()
    f ()
    s.Stop()
    printfn "elapsed: %d" s.ElapsedTicks

module CInterop =
    [<DllImport("CPlus", CallingConvention = CallingConvention.StdCall)>]
    extern void square_array(float[] array, int length)

let options = new ParallelOptions()
let size = 1000.0
let arr = [|1.0 .. size|]
// Square the number at the given index of the array
let sq i =
    do arr.[i] <- arr.[i] * arr.[i]
    ()
// Square every number in the array using TPL
time (fun() -> Parallel.For(0, arr.Length - 1, options, new Action<int>(sq)) |> ignore)

let arr2 = [|1.0 .. size|]
// Square every number in the array using AMP
time (fun() -> CInterop.square_array(arr2, arr2.Length)) 
```

如果我将数组大小设置为像 10 这样的微不足道的数字，则需要 TPL ~22K 滴答声才能完成，AMP ~10K 滴答声才能完成。这就是我所期望的。据我了解，GPU（因此是 AMP）应该比 TPL 更适合这种情况，在这种情况下，工作被分成非常小的部分。

但是，如果我将数组大小增加到 1000，则 TPL 现在需要约 30K 滴答，而 AMP 需要约 70K 滴答。从那里开始变得更糟。对于 100 万大小的数组，AMP 所需的时间几乎是 TPL 的 1000 倍。

由于我希望 GPU（即 AMP）能更好地完成此类任务，我想知道我在这里缺少什么。

我的显卡是 1GB 的 GeForce 550 Ti，据我所知，这不是一个懒散的。我知道使用 PInvoke 调用 AMP 代码会产生开销，但我希望这是一个固定成本，可以在更大的数组大小上摊销。我相信数组是通过引用传递的（尽管我可能是错的），所以我不认为复制它会产生任何成本。

谢谢大家的建议。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-24T09:45:46.887

在 GPU 和 CPU 之间来回传输数据需要时间。您很可能在这里测量您的 PCI Express 总线带宽。对 1M 的浮点数求平方对于 GPU 来说是小菜一碟。

使用该类来衡量 AMP 的性能也不是一个好主意，`Stopwach`因为 GPU 调用可能异步发生。在您的情况下没关系，但是如果您仅测量计算部分（the `parallel_for_each`），这将不起作用。我认为您可以为此使用 D3D11 性能计数器。

# java - 如何在未附加到应用程序模型的类中使用 eclipse 4 DI？

> ID：14018202
> 
> 赞同：9
> 
> 时间：2012-12-24T07:05:02.650
> 
> 标签：java, dependency-injection, eclipse-rcp, eclipse-juno

我创建了一个带有声明式服务的 OSGI 服务来注入一个实现接口的对象。如果我将对象注入到附加到应用程序模型（处理程序、部件、....）的类中，它工作正常。如果我将它注入一个未附加到应用程序模型的类中，它总是返回 null。

是否可以在未附加到应用程序模型的类中使用 DI？我查看了vogella教程，但不知何故我找不到解决方案。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-25T01:22:59.683

我知道 Eclipse 4 如何在您的类中注入对象的三种方式：

1.  在启动期间，Eclipse 运行时在它实例化的类中寻找相关的注释。
2.  在 1\. 中注入的对象会被跟踪，如果发生更改将被重新注入。
3.  使用 ContextInjectionFactory 和 IEclipseContext 手动触发注入。

第三种选择可能会实现您想要的。[这](http://www.eclipse.org/forums/index.php/m/960843/)是一个代码示例：

```
 ManipulateModelhandler man = new ManipulateModelhandler();

    //inject the context into an object
    //IEclipseContext iEclipseContext was injected into this class
    ContextInjectionFactory.inject(man,iEclipseContext);

    man.execute(); 
```

然而，问题是；IEclipseContext 已经需要注入到可以访问需要注入的对象的类中。根据必要注入的数量，使用委托可能更有用（可测试性将是一个论点）。

```
 @Inject
    public void setFoo(Foo foo) {
        //Bar is not attached to the e4 Application Model
        bar.setFoo(foo);
    } 
```

因此，更好的解决方案可能是使用[@Creatable](http://wiki.eclipse.org/Eclipse4/RCP/Dependency_Injection#.40Creatable_.28org.eclipse.e4.core.di.annotations.29)注释。简单地注释你的类，并给它一个无参数的构造函数。

```
 @Creatable
   public class Foo {
       public Foo () {}
   } 
```

如上述方法在该类型上使用@Inject，将使Eclipse 实例化并注入它。缺点是您无法再控制对象的创建，就像使用 ContextInjectionFactory.inject(..) 一样。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-08T17:13:26.130

为了实现这一点，我重构了 e(fx)clipse 的某些部分。看看[这个](https://github.com/arichiardi/eclipse-addons)。对不起无耻的插件...

# android - android中的网络检查

> ID：14018207
> 
> 赞同：1
> 
> 时间：2012-12-24T07:05:57.230
> 
> 标签：android

我想知道如何通过 BroadcastReceiver 为任何应用程序处理网络检查，我知道如何在调用我的服务时检查网络可用性，但假设我的网络在事务之间断开连接，我无法处理这种情况。

请提供一些教程链接，我可以在其中学习。

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-24T07:14:45.973

用这个 ：-

```
public boolean isNetworkAvailable()
    {
        ConnectivityManager cmanager = (ConnectivityManager) getSystemService(Context.CONNECTIVITY_SERVICE); 
        NetworkInfo netInformation= cmanager .getActiveNetworkInfo(); 
        if (netInformation!= null && netInformation.isAvailable() && netInformation.isConnected()) 
        { 
            return true; 
        }
        return false; 
    } 
```

或检查这个： -

> [在 Android 中使用 BroadcastReceiver 检查网络连接](https://stackoverflow.com/questions/6176570/checking-the-networking-connectivity-using-broadcastreceiver-in-android)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-24T07:36:38.493

```
BroadcastReceiver networkStateReceiver = new BroadcastReceiver() {

@Override
public void onReceive(Context context, Intent intent) {
    Log.w("Network Listener", "Network Type Changed");
}
};

IntentFilter filter = new IntentFilter(ConnectivityManager.CONNECTIVITY_ACTION);        
registerReceiver(networkStateReceiver, filter); 
```

这是一个[示例代码](http://www.netmite.com/android/mydroid/frameworks/base/core/java/android/net/NetworkConnectivityListener.java)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-14T10:57:14.303

你也可以像这样添加 info.isConnectedOrConnecting() 选项..

```
public static boolean checkConn(Context ctx)
{
    ConnectivityManager conMgr =  (ConnectivityManager)ctx.getSystemService(Context.CONNECTIVITY_SERVICE);
    NetworkInfo info = conMgr.getActiveNetworkInfo();
    if (info == null || !info.isConnected() || !info.isAvailable()||!info.isConnectedOrConnecting()){
        Toast.makeText(ctx, "Internet is not available", Toast.LENGTH_SHORT).show();
        return false;
    }
     return true;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-24T07:48:48.147

这是我在 Stackoverflow 上找到的代码（不记得是谁写的）

```
public static boolean isConnected(Context context) {
    ConnectivityManager cm = (ConnectivityManager) context.getSystemService(Context.CONNECTIVITY_SERVICE);
    NetworkInfo info = cm.getActiveNetworkInfo();
    if (info == null) {
        return false;
    }
    return info.isConnected();
} 
```

要求`internet`和`network_state`权限

# sql - 在算术表达式中使用 oracle 中 count(*) 的结果

> ID：14018208
> 
> 赞同：0
> 
> 时间：2012-12-24T07:06:01.160
> 
> 标签：sql, oracle, oracle10g

我遇到了一个简单的问题，需要一些帮助。

我在 Oracle 10g 中有两个不同的表，分别称为`BOOK_DETAILS`(primary key- `book_code`) 和`BOOK_ISSUE`(foreign and primary key- `book_code`)。该`BOOK_ISSUE`表还有一个名为`BOOK_ISSUE_STATUS`“y”或“n”值的列，具体取决于该书是否已发行。

现在我必须做以下简单的查询——找出图书馆中可用的书籍数量（即可用书籍的总数-已发行的书籍数量）。

所以我尝试执行以下查询：-

```
 select count(b.book_code)-count(i.book_code)
 from 
 lms_book_issue i, lms_book_details b
 where
 i.book_issue_status='Y'
 ; 
```

但显然我没有得到想要的结果。我的逻辑是从计算表中书籍数量的结果中减去已发行书籍数量的结果（我从`BOOK_ISSUE`表中得到）`BOOK_DETAILS`。

请让我知道我哪里错了。此外，上述查询仅给出 0 作为结果。因此，对此的解释也将受到高度赞赏。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-24T07:24:49.927

您可以通过以下方式获得（书籍总数 - 状态为“Y”的书籍）：

```
select 
          (select count(book_code) from BOOK_DETAILS) - 
          (select count(book_code) from BOOK_ISSUE where book_issue_status='Y')
from dual 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-26T02:18:39.543

这是一个基本错误，`count(col)`获取查询中具有非空值的行数。

你得到 0 仅仅是因为 2 个计数给出了相同的数字。

在这种情况下，您甚至没有将 2 个表与“i.book_code = b.book_code”连接在一起

但即使它会给你返回0，

以您的方式，正确的选择是：

```
select 
    count(b.book_code) - count(i.book_code)
from 
    lms_book_issue i, lms_book_details b
where
    b.book_code = i.book_code(+) AND
    i.book_issue_status = 'Y'
; 
```

这样，您选择了所有书籍和书籍，并且仅与问题选项卡一起加入只有问题 = Y 的行，因此第一个计数将为您提供书籍的数量，第二个将仅计算已发行的书籍，因为其余的将为 NULL 并且不会计数。

# javascript - 我如何在 IE8 中使用“createAttributeNS”

> ID：14018212
> 
> 赞同：1
> 
> 时间：2012-12-24T07:06:19.110
> 
> 标签：javascript, internet-explorer-8

我需要在 IE8 中使用 doucment.createAttributeNS。我确实想知道如何使用。请帮助我

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T07:22:02.503

使用（仅限 IE）方法`document.createNode()`

有关该方法，请参阅[此博客条目](http://www.grauw.nl/blog/entry/353)和[此网页](http://www.devguru.com/technologies/xmldom/quickref/document_createnode.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-24T07:15:26.197

你应该直接使用`setAttributeNS`。

您可以使用它在 XML 文档元素中创建[命名空间属性。](http://en.wikipedia.org/wiki/XML_namespace)

IE8 不支持。

# javascript - RequireJS - 使用 2 个 jQuery 库

> ID：14018213
> 
> 赞同：3
> 
> 时间：2012-12-24T07:06:27.417
> 
> 标签：javascript, jquery, requirejs, amd

在我正在维护的一个项目中，我被迫在一页中坚持使用 2 个 jQuery lib 调用（至少现在是这样）：

```
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script> /* 1st jQuery call */
<script>
    /* Section A - Some code that uses jQuery */
</script>

<script data-main="main" src="require.min.js">
     /* 2nd jQuery call made inside */
</script>

<script>
    /* Section B - Some code that uses jQuery */
</script> 
```

这在 B 节中引起了一些奇怪，我已经验证了问题的根源是重复包含 jQuery 库。

假设我只能控制 AMD 部分 - 我必须处理这种情况的最佳/推荐选项是什么？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T22:14:15.613

jQuery*是*一个 AMD 模块。不仅如此，它还是一个*命名为*AMD 的模块，这使得在同一页面上使用 2 个版本的 jQuery 变得非常困难。（见[http://dvdotsenko.blogspot.com/2011/12/amd-modules-with-named-defines-so-much.html](http://dvdotsenko.blogspot.com/2011/12/amd-modules-with-named-defines-so-much.html)）

但是，在您的情况下，您不需要 2 个不同*版本*的 jQuery。您只需要在 AMD 之外使用 jQuery，然后在 AMD 代码树中使用。

您的解决方案非常简单：在加载 jQuery 之前加载*require.js*。（翻译：将加载RequireJS的脚本标签放在加载jQuery的脚本标签之前。

```
<script src="require.min.js"></script>
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
<script>
    /* Section A - Some code that uses gloabl jQuery */
</script>
<script>
    // start the AMD code tree
    require(['main'],function(main){
        // run code that main module returns.
        // Don't know what that may mean in your case.
        // example:
        main()
    })
</script> 
```

那里会发生什么：

1.  requirejs 加载并设置全局`require`和`define`对象
2.  jQuery 加载并且它 (a) 总是设置全局 window.jQuery (+ window.$) 和 (b) 如果`define`存在并且它是 AMD 品种，它将自己定义为具有特定名称的命名模块 - “jquery”< - 正是如此。
3.  您的代码依赖于全局 jQuery 运行。
4.  您的代码取决于 AMD 注册的 jQuery 运行。

3 和 4 使用一个完全相同的 jQuery 实例。

您绝对必须要求 jQuery 作为“jquery” 没有其他字符串会给您一个 jQuery 实例。

给 jQuery 取别名的唯一方法是创建一个单独的命名定义，重新打包已经定义的“jquery”模块：

```
define(
  'my_jquery_yey'
  , ['jquery']
  , function($){return $}
) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-26T00:00:28.163

如果您打算使用 requireJs，请使用 requireJs 加载两个版本的 jQuery，所以

*   [需要使用jQuery.noConflict()](http://api.jquery.com/jQuery.noConflict/)加载至少一个代码块，
*   在 require.config 对象中使用 shim 属性。

**配置（main.js）：**

```
require.config({
    paths: {
        jqueryV1: "path/to/jqueryV1",
        jqueryV2: "path/to/jqueryV2"
    },
    shim: {
        jqueryV1: {
          exports: 'jQuery',
          init: function() {
             return this.jQuery.noConflict();
          }
       },
       jqueryV2: {
          exports: 'jQuery',
          init: function() {
             return this.jQuery.noConflict();
          }
       }
    } 
}); 
```

现在定义模块应该很容易了。

**A节**

```
define(['jqueryV1'], function($) {
   // jQuery code section A
}); 
```

**B节**

```
define(['jqueryV2'], function($) {
   // jQuery code section B
}); 
```

# java - web.xml中url-pattern有什么意义，servlet如何配置？

> ID：14018215
> 
> 赞同：51
> 
> 时间：2012-12-24T07:06:39.367
> 
> 标签：java, servlets, web.xml, url-pattern, servlet-mapping

我已`web.xml`为我的应用程序手动配置。现在，我在运行我的应用程序时遇到了问题。我正在尝试`servlet`从我的`jsp`页面访问我的。但是，它抛出错误为`page not found`.

servlet 位于文件夹位置下方

```
<application folder>/WEB-INF/classes/<package> 
```

`url-pattern`那么，和中的 servlet 条目应该是什么`servlet-mapping`。因此，`servlet`可以通过 URL 访问。

* * *

## 回答 #1

> 赞同：72
> 
> 时间：2012-12-24T07:13:12.530

`url-pattern`用于`web.xml`将您映射`servlet`到特定的 URL。请参阅下面的 xml 代码，您可以在`web.xml`配置文件中找到类似的代码。

```
<servlet>
    <servlet-name>AddPhotoServlet</servlet-name>  //servlet name
    <servlet-class>upload.AddPhotoServlet</servlet-class>  //servlet class
</servlet>
 <servlet-mapping>
    <servlet-name>AddPhotoServlet</servlet-name>   //servlet name
    <url-pattern>/AddPhotoServlet</url-pattern>  //how it should appear
</servlet-mapping> 
```

如果您从更改`url-pattern`为。然后，可以使用 .servlet 访问 servlet 。出于安全原因，您希望在其中隐藏您的实际页面 URL。`AddPhotoServlet``/AddPhotoServlet``/MyUrl``AddPhotoServlet``/MyUrl`

**Java Servlet`url-pattern`规范：**

> 1.  **以“/”**字符开头并以**“/*”**后缀结尾的字符串 用于路径映射。
> 2.  **以“*”**开头的字符串。 前缀用作扩展映射。
> 3.  仅包含**“/”** 字符的字符串表示应用程序的“默认”servlet。在这种情况下，servlet 路径是请求 URI 减去上下文路径，并且路径信息为空。
> 4.  所有其他字符串仅用于完全匹配。

参考：[Java Servlet 规范](http://download.oracle.com/otndocs/jcp/servlet-3.0-fr-eval-oth-JSpec/)

您还可以阅读此[Java Servlet 基础知识](https://apptech-solution.blogspot.com/2016/08/basics-of-java-servlet.html)

* * *

## 回答 #2

> 赞同：38
> 
> 时间：2015-08-07T10:17:05.167

Servlet-mapping 有两个子标签，url-pattern 和 servlet-name。url-pattern 指定应该调用 servlet-name 中给出的 servlet 的 url 类型。请注意，容器将区分大小写用于 servlet 匹配的字符串比较。

**server .com 的 servlet 容器上的服务器上下文文件的第一个规范与以下`url-pattern`模式**匹配**：`web.xml``<url-pattern>/status/*</url-pattern>`**

 **```
http://server.com/server/status/synopsis               = Matches
http://server.com/server/status/complete?date=today    = Matches
http://server.com/server/status                        = Matches
http://server.com/server/server1/status                = Does not match 
```

**`url-pattern`位于 example.com 代理上路径 /examples**的 A 上下文的第二个规范**`<url-pattern>*.map</url-pattern>`与以下模式匹配：**

 **```
 http://server.com/server/US/Oregon/Portland.map    = Matches
 http://server.com/server/US/server/Seattle.map     = Matches
 http://server.com/server/Paris.France.map          = Matches
 http://server.com/server/US/Oregon/Portland.MAP    = Does not match, the extension is uppercase
 http://example.com/examples/interface/description/mail.mapi  =Does not match, the extension is mapi rather than map` 
```

**的第三个规范** `url-mapping`，如果没有其他模式匹配，则包含该模式的映射`<url-pattern>/</url-pattern>`匹配请求。这是默认映射。映射到此模式的 servlet 称为默认 servlet。

默认映射通常指向应用程序的第一页。显式提供默认映射还可以确保应用程序返回的格式错误的 URL 请求由应用程序处理，而不是返回错误。

下面的 servlet-mapping 元素将`server`servlet 实例映射到默认映射。

```
<servlet-mapping>
  <servlet-name>server</servlet-name>
  <url-pattern>/</url-pattern>
</servlet-mapping> 
```

对于包含此元素的上下文，任何未被另一个映射处理的请求都将转发到`server`servlet。

最重要的是我们应该了解**URL 路径映射的规则**

1.  容器将尝试找到请求路径与 servlet 路径的完全匹配。成功的匹配选择 servlet。
2.  容器将递归地尝试匹配最长的路径前缀。这是通过使用“/”字符作为路径分隔符一次将路径树下移一个目录来完成的。最长的匹配决定了选择的 servlet。
3.  如果 URL 路径中的最后一段包含扩展名（例如 .jsp），则 servlet 容器将尝试匹配处理扩展请求的 servlet。扩展名被定义为最后一个'.'之后的最后一段的一部分。特点。
4.  如果前三个规则都没有导致 servlet 匹配，则容器将尝试提供适合所请求资源的内容。如果为应用程序定义了一个“默认”servlet，它将被使用。

参考[URL 模式](http://docs.roguewave.com/hydraexpress/3.5.0/html/rwsfservletug/4-3.html)****

# iphone - 如何删除或隐藏工具栏的顶部阴影

> ID：14018216
> 
> 赞同：6
> 
> 时间：2012-12-24T07:06:52.350
> 
> 标签：iphone, ios, uitoolbar

移除工具栏的背景后，使用图像蒙版，工具栏上方仍保留一条阴影线。我们如何摆脱它？如您所见，通过下图，我想使用工具栏和按钮，但没有背景或顶部阴影。

```
const float colorMask[6] = {222, 255, 222, 255, 222, 255};
UIImage *_img = [[UIImage alloc] init];
UIImage *_maskedImage = [UIImage imageWithCGImage:CGImageCreateWithMaskingColors(_img.CGImage, colorMask)];
[self.navigationController.toolbar setBackgroundImage:_maskedImage forToolbarPosition:UIToolbarPositionAny barMetrics:UIBarMetricsDefault]; 
```

![使用图像蒙版隐藏背景后的工具栏顶部阴影](../Images/39bdf3bcc997718ebc9116dd0573571b.png)

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-11-10T18:47:12.467

其他答案均不适用于 iOS7，有些答案似乎也无法在较旧的 iOS 版本上运行。这（解释[http://samplecodebank.blogspot.com/2013/06/UIToolbar-setShadowImage-forToolbarPosition-example.html](http://samplecodebank.blogspot.com/2013/06/UIToolbar-setShadowImage-forToolbarPosition-example.html)）对我来说在 5.1+ 上始终有效，并且比生成自定义背景图像和颜色蒙版更简洁且性能更高。

```
toolbar.backgroundColor = [UIColor clearColor];
if ([toolbar respondsToSelector:@selector(setBackgroundImage:forToolbarPosition:barMetrics:)]) {
  [toolbar setBackgroundImage:[UIImage new] forToolbarPosition:UIToolbarPositionAny barMetrics:UIBarMetricsDefault];
}
if ([toolbar respondsToSelector:@selector(setShadowImage:forToolbarPosition:)]) {
  [toolbar setShadowImage:[UIImage new] forToolbarPosition:UIToolbarPositionAny];
} 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2014-01-14T14:40:35.123

在 iOS 7 上，设置`[toolBar setClipsToBounds:YES]`.

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-12-24T07:50:29.333

也添加这一行

```
[toolbar setShadowImage:_maskedImage forToolbarPosition:UIToolbarPositionAny]; 
```

两个重要说明：

1.  您还必须设置背景图像，否则这不会做任何事情。
2.  这适用于 iOS 6+

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-12-24T07:14:34.160

首先`QuartzCore/QuartzCore`在您的项目中添加框架，然后将其导入您的`.m`文件中，如下所示...

```
#import <QuartzCore/QuartzCore.h> 
```

只需添加以下代码...

```
 yourToolBar.layer.shadowOffset = CGSizeMake(0.0f, 0.0f);

    yourToolBar.layer.shadowOpacity =0.0f;

    yourToolBar.layer.shadowRadius = 0.0f; 
```

希望这对你有帮助...

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-12-30T00:22:29.163

在 iOS 7 中没有其他答案对我有用，所以这是我使用 Interface Builder 所做的：

1.  将工具栏添加到 UIView。
2.  UIView 的大小与 UIToolbar 相同。
3.  向下拖动 UIView 的顶部，直到它刚好覆盖 UIToolbar 的顶部。
4.  使用属性检查器单击“剪辑子视图”。

这样做会将工具栏的顶部剪掉，从而消除灰色阴影。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-12-24T07:18:40.943

setBackgroundImage:_maskedImage 需要移除阴影或者工具栏隐藏后调用自定义的阴影清除方法

# asp.net - 我们如何在asp.net boundfeild中显示2 1/4''？

> ID：14018217
> 
> 赞同：1
> 
> 时间：2012-12-24T07:06:56.053
> 
> 标签：asp.net

我们如何在 asp.net boundfield 中显示标题文本值 2 1/4'' ？下面是我的代码。

```
<asp:BoundField DataField="2 1/4"" HeaderText="2 1/4"" --82" ReadOnly="true" DataFormatString="{0:C2}" HtmlEncode="False" Visible="false">
        <HeaderStyle HorizontalAlign="Right" />
        <ItemStyle Width="40px" HorizontalAlign="Right" />
        </asp:BoundField> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T08:42:03.957

单引号是完全有效的分隔符，当您需要在内容中添加双引号时可以使用它们。

```
HeaderText='2 1/4"' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-24T08:44:54.503

您还可以将双引号编码为

```
&quot; 
```

另请参阅[如何在标题属性中转义双引号，](https://stackoverflow.com/questions/3752769/how-to-escape-double-quotes-in-title-attribute)还有很多其他建议和后续阅读。

# c++ - 在函数内部声明函数时出现 C++ 语法错误

> ID：14018220
> 
> 赞同：1
> 
> 时间：2012-12-24T07:07:40.680
> 
> 标签：c++, function

我正在尝试创建一个程序，让我找到一个数字的第 n 个根。我尝试在 xcode 上运行它，但我收到一个错误，阻止我运行它。我收到这条线的错误：

```
double f(double x) { 
```

在这一行中，我试图声明一个函数，但似乎我声明它不正确。xcode 说`expected ;`。我该如何解决这个问题？

```
#include <iostream>
#include <string>
#include <cmath>
#include <iomanip>
#include <cctype>
#include <stdio.h>
#include <ctype.h>
#include "helloworld.h"
#include <locale>

using namespace std;
double newton( int n, int number);
string lowercase (string word);

int main()
{
    int n;
    int number;
    cout << "This program can find the nth root of a number without actually solving the problem" <<endl;
    cout << "Tell me what the value of n is: ";
    cin >> n;
    cout << "What is the number that you want to get rooted";
    cin >> number;

    newton(n, number); 
}

double newton( int n, int number) {
    const double epsilon = .0001;
    double x0;
    double x1 = number;

    double f(double x) {
        return (double) pow(x, n) - number;
    }
    double der_f(double x) {
        return (double) n*pow(x, n-1);
    }

    while( abs(x1-x0) < epsilon) {
        x0 = x1;
        x1 = x0 -f(x0)/der_f(x0); 
    }
    return x1;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-24T07:18:03.373

如果你真的想要函数内部的函数 - 有一个 hack。您可以在函数内定义带有静态函数的结构。

例子：

```
double newton( int n, int number) {
    const double epsilon = .0001;
    double x0;
    double x1 = number;

    struct wrap {
       static int n;
       static double f(double x) {
           return (double) pow(x, n) - number;
       }
       static double der_f(double x) {
           return (double) n*pow(x, n-1);
       }
    };
    wrap::n = n;

    while( abs(x1-x0) < epsilon) {
        x0 = x1;
        x1 = x0 -wrap::f(x0)/wrap::der_f(x0); 
    }
    return x1;
} 
```

像这样的东西。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-24T07:10:34.913

移动

```
 double f(double x) {
        return (double) pow(x, n) - number;
    }
    double der_f(double x) {
        return (double) n*pow(x, n-1);
    } 
```

到外面`double newton( int n, int number) {`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-24T07:12:05.357

发生这种情况是因为您在函数内部声明了新函数，这是不可能的。尝试这个：

```
#include <iostream>
#include <string>
#include <cmath>
#include <iomanip>
#include <cctype>
#include <stdio.h>
#include <ctype.h>
#include "helloworld.h"
#include <locale>

using namespace std;
double newton( int n, int number);
string lowercase (string word);

double f(double x) {
    return (double) pow(x, n) - number;
}

double der_f(double x) {
    return (double) n*pow(x, n-1);
}

int main() {
  int n;
  int number;
  cout << "This program can find the nth root of a number without actually solving the problem" <<endl;
  cout << "Tell me what the value of n is: ";
  cin >> n;
  cout << "What is the number that you want to get rooted";
  cin >> number;
  newton(n, number);
}

double newton( int n, int number) {
  const double epsilon = .0001;
  double x0;
  double x1 = number;
  // and here call the functions
  f();
  der_f();
  while( abs(x1-x0) < epsilon ) {
    x0 = x1;
    x1 = x0 -f(x0)/der_f(x0); 
  }
  return x1;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-24T07:42:23.653

正如已经指出的那样，您必须摆脱本地功能。在 C++11 中执行此操作的另一种方法是使用*[lambda-functions](https://stackoverflow.com/questions/7627098/what-is-a-lambda-expression-in-c11)*：

```
auto f = [=](double x) {
  return (double) pow(x, n) - number;
};
auto der_f = [=](double x) {
  return (double) n*pow(x, n-1);
}; 
```

在这种情况下，您只需要替换`double func_name(double x)`为`auto func_name = [=](double x)`.

是`[=]`一个*[lambda-introducer](http://msdn.microsoft.com/en-us/library/dd293603.aspx)*。通过`=`您告诉您希望所有局部变量都可以在 lambda 函数*中通过 value*访问。在您的情况下，这是最合适的方式，因为您只有基本类型的变量，并且您不想从本地函数中修改它们。

该`auto`关键字告诉编译器从初始化子句中自动推断出用于存储函数的变量的类型。一个可以`std::function<double(double)>`代替`auto`这里。

# excel - IsEqual 对象在 VBScript 中可用于 ArrayList 类吗？

> ID：14018221
> 
> 赞同：1
> 
> 时间：2012-12-24T07:07:40.940
> 
> 标签：excel, vbscript, wsh, vba

请找到以下代码：

```
Option Explicit
Dim TempArr
Dim ArrListChildDetails :  Set ArrListChildDetails = CreateObject("System.Collections.ArrayList") 
```

现在我已经为它分配了一些 Range 对象：

```
ArrListChildDetails = ob3.Cells(ParentMatchRowNum,Width+1).Resize(, UBound(TempArr, 1) + 1)
TempArr=ArrListChildDetails.ToArray()   
ArrListChildDetails .Sort(); 
```

现在是否可以比较两个数组，如果它们的元素相同且位置相同并且计数也一样？意味着`IsEql()`ArrayList 类中的任何可用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T10:01:58.210

我不知道你从哪里得到 IsEqual()，但你可以使用 ArrayList/Object 方法 .Equals() 来确定一个 ArrayList 是否被另一个名称/变量引用（参见 VBScript 的 Is 运算符）。

要检查两个不同 ArrayList 的计数、顺序和元素是否相等，您必须滚动自己的函数。为了让你开始：

```
Option Explicit

Dim alA  : Set alA  = CreateObject("System.Collections.ArrayList")
Dim alB  : Set alB  = CreateObject("System.Collections.ArrayList")
Dim alC  : Set alC  = CreateObject("System.Collections.ArrayList")
Dim alA2 : Set alA2 = alA

alA.Add "one"
alA.Add "two"

alB.Add "one"
alB.Add "two"

alC.Add "one"
alC.Add "owt"

WScript.Echo "alA: ", Join(AlA.ToArray())
WScript.Echo "alA2:", Join(AlA2.ToArray())
WScript.Echo "alB: ", Join(AlB.ToArray())
WScript.Echo "alC: ", Join(AlC.ToArray())

WScript.Echo "alA.Equals(alA2):", CStr(alA.Equals(alA2))
WScript.Echo "alA.Equals(alB):" , CStr(alA.Equals(alB))
WScript.Echo "alA.Equals(alC):" , CStr(alA.Equals(alC))

WScript.Echo "ALEqual(alA, alA):", CStr(ALEqual(alA, alA))
WScript.Echo "ALEqual(alA, alA2):", CStr(ALEqual(alA, alA2))
WScript.Echo "ALEqual(alA, alB):", CStr(ALEqual(alA, alB))
WScript.Echo "ALEqual(alA, alC):", CStr(ALEqual(alA, alC))

Function ALEqual(alL, alR)
  ALEqual = True
  If alL Is AlR Then Exit Function
  ALEqual = alL.Count = alR.Count
  If ALEqual Then
     Dim i
     For i = 0 To alL.Count - 1
         If alL(i) <> alR(i) Then
            ALEqual = False
            Exit Function
         End If   
     Next
  End If  
End Function 
```

输出：

```
alA:  one two
alA2: one two
alB:  one two
alC:  one owt
alA.Equals(alA2): Wahr
alA.Equals(alB): Falsch
alA.Equals(alC): Falsch
ALEqual(alA, alA): Wahr
ALEqual(alA, alA2): Wahr
ALEqual(alA, alB): Wahr
ALEqual(alA, alC): Falsch 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-24T10:50:58.960

快速而肮脏的解决方案，但在大多数情况下就足够了：

```
WScript.Echo Join(ArrListChildDetails.ToArray(),"|") = Join(ArrListChildDetails2.ToArray(),"|") 
```

编辑：一些解释：比较两个 ArrayLists（或两个数组），转换为一个数组并将它们连接到一个字符串中，该字符串由数组中未使用的一些特殊字符分隔，然后比较字符串，当然这仅适用于一个具有可以字符串化的值类型的维数组。如果它们具有相同数量的具有相同内容的元素，则比较将返回 -1（真）和 0（假），否则

# mysql - 从字符串中查找子字符串

> ID：14018222
> 
> 赞同：-1
> 
> 时间：2012-12-24T07:07:41.787
> 
> 标签：mysql

我正在使用mysql数据库。如果字符串包含字符（'/'），我想从字符串中提取子字符串。如果字符串中不包含“/”字符，它应该返回一个空字符串。

例如假设字符串是`MY_FILE_PATH_CODE/dir1/dir2`

**查询是**

```
select substr(string,instr(string ,'/')) from ( select string  from ac1_control );
   Return value : /dir1/dir2 (correct as i want) 
```

问题是如果我的字符串是 only `MY_FILE_PATH_CODE`，那么相同的查询返回`MY_FILE_PATH_CODE`我不想要的，我希望返回是一个空字符串。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T07:28:23.123

您可能必须明确检查，可能是这样的：

```
select (case when instr(string, '/') = 0 then "" else substr(string, instr(string, '/')) end) from ( select string from ac1_control ) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-24T07:34:26.543

在 oracle 中： [*基于 void string 为 null 并使用您的 orig 的假设。字符串*]

```
SELECT REPLACE ( SUBSTR('MY_FILE_PATH_CODE',INSTR('MY_FILE_PATH_CODE','/') ),
                'MY_FILE_PATH_CODE') 
  FROM dual; 
```

# android - 单击时更改 MenuItem 可见性

> ID：14018224
> 
> 赞同：4
> 
> 时间：2012-12-24T07:08:14.817
> 
> 标签：android, case, visibility, menuitem

我试图隐藏一个`MenuItem`并在选择第一个时使另一个可见。

每个的 ID 是：

```
pencil: R.id.button_routines_edit
check mark: R.id.button_routines_edit_done 
```

这里是相关代码：

```
 private boolean isEditing = false;

  @Override
  public boolean onOptionsItemSelected(MenuItem item) {   
      // Handle item selection
      switch (item.getItemId()) {
      case R.id.button_routines_edit:
            // hide pencil icon, show checkmark
            isEditing = true;
        return true;
      case R.id.button_routines_edit_done:
            // show pencil icon, done editing
            isEditing = false;
        return true;
      default:
          return super.onOptionsItemSelected(item);
      }

  }

  @Override
  public boolean onPrepareOptionsMenu(Menu menu) {
      super.onPrepareOptionsMenu(menu);
      // hide pencil when editing and show check mark
      menu.findItem(R.id.button_routines_edit).setVisible(!isEditing);
      menu.findItem(R.id.button_routines_edit_done).setVisible(isEditing);
      return true;
  } 
```

我的问题是：选项菜单在选择项目时不会重绘项目。换句话说，第一个没有隐藏，第二个没有显示。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-24T07:25:58.593

您需要做的就是调用`invalidateOptionsMenu()`.

[invalidateOptionsMenu()](http://developer.android.com/reference/android/app/Activity.html#invalidateOptionsMenu())仅在 API 11+ 中可用，除非您使用的是[ActionBarSherlock](http://actionbarsherlock.com/)。

您遇到此问题是因为您基本上`MenuItems`显示在`ActionBar`. 如果将它们放在溢出菜单中，则无需调用`invalidateOptionsMenu()`.

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-24T07:19:11.500

试试这个，它必须隐藏菜单项

```
public boolean onCreateOptionsMenu(Menu menu){

          menu.getItem(R.id.button_routines_edit).setVisible(!isEditing);
          menu.getItem(R.id.button_routines_edit_done).setVisible(isEditing);
          return true;
      } 
```

# c# - 为什么包含命名参数会导致“无法从用法中推断出方法的类型参数”错误？

> ID：14018225
> 
> 赞同：3
> 
> 时间：2012-12-24T07:08:21.743
> 
> 标签：c#, generics, delegates, resharper, named-parameters

> **可能重复：**
> [C# 4.0 中的命名参数和泛型类型推断](https://stackoverflow.com/questions/6542822/named-arguments-and-generic-type-inference-in-c-sharp-4-0)

如果您尝试编译此代码...

```
public interface IBar { }

public class StandardBar : IBar { }

public class Foo
{
    public TBar GetBarCore<TBar>(Func<TBar> getter)
        where TBar : IBar
    {
        return getter();
    }

    public StandardBar GetBar()
    {
        return GetBarCore(getter: Find);
    }

    public StandardBar Find()
    {
        return new StandardBar();
    }
} 
```

...你会得到这个错误：

> `ConsoleApplication1.Foo.GetBarCore<TBar>(System.Func<TBar>)`无法从用法中推断出方法的类型参数。尝试明确指定类型参数。

我花了一段时间才弄清楚，命名参数 ( `getter:`)`GetBarCore()`是罪魁祸首。如果您删除参数名称，只留下`GetBarCore(Find)`，代码编译成功。不出所料，如果如错误消息所示，显式指定类型参数（导致`GetBarCore<StandardBar>(getter: Find)`），您也可以成功编译代码。

（顺便说一下，这个小特性也让 ReSharper 绊倒了。我有一些运行良好的代码。我对代码文件做了一个非常小的更改并执行了“清理代码”操作，它删除了 R# 认为是“冗余”的代码. 好吧，它在使用命名参数的方法调用中删除了一个看似不必要的显式类型参数，突然间，我的代码无法编译。）

有人可以解释为什么提供命名参数会使编译器无法从使用中推断出类型参数吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-24T07:22:27.717

Mono 的 C# 编译器（在 Mono 2.10.9 中使用 dmcs 测试）非常乐意推断类型，即使在使用命名参数时也是如此。我仍在尝试在标准中找到表明一种行为或另一种行为的内容，但我怀疑这只是`csc.exe`.

`csc.exe`在 C# 5.0 中似乎也可以正常工作。（使用 LINQPad 4.43.06 测试。）

# ruby-on-rails - 如何告诉黄瓜去某个页面？

> ID：14018228
> 
> 赞同：10
> 
> 时间：2012-12-24T07:08:27.990
> 
> 标签：ruby-on-rails

我正在学习用黄瓜+水豚进行测试。

在一个视频教程中，我发现这样的东西应该可以工作：

```
...
When I go to the homepage
Then /do stuff/ 
```

我正在尝试这样做，但黄瓜将“主页”一词视为正则表达式的一部分。

所以它给了我创建这样一个声明的建议

```
When /^I go to homepage$/ do
   #tasks
end 
```

尝试过“索引页面”、“项目页面”（现有控制器的名称）、“根路径”——同样的事情。Cucumber 实际上并没有去那里 - 只是要求创建一个处理程序。

我从这里去哪里？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-24T07:31:13.420

使用像[Capybara](https://github.com/jnicklas/capybara)这样的宝石，你可以做这样的事情

在您的测试中：

```
When I go to the homepage 
```

在您的步骤中：

```
When /^I go to the homepage$/ do
 visit root_path
end 
```

或者概括：

```
When /^I go to the "(.*)"/ do |place|
 visit "/#{place}"
end 
```

您的步骤将通过您想要去的位置（url）。

有关`visit`方法结帐的更多信息，请[点击此处](https://github.com/jnicklas/capybara#navigating)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-24T07:30:28.707

我实际上去了 Cucumber 的 GitHUb Wiki，并在那里找到了答案。它就像`visit "/"`步骤定义一样简单。

# knockout.js - 多视图模型绑定错误：knocout js

> ID：14018233
> 
> 赞同：0
> 
> 时间：2012-12-24T07:09:17.703
> 
> 标签：knockout.js

我只是想摆弄淘汰赛提供的样本并尝试绑定两个视图模型，这是代码，第二个视图模型有问题：

```
 <div class='liveExample1'>   
      <p>First name: <input data-bind='value: firstName' /></p> 
      <p>Last name: <input data-bind='value: lastName' /></p> 
      <h2>Hello, <span data-bind='text: fullName'> </span>!</h2>  
   </div>

    <div class='liveExample'> 

    <form data-bind="submit: addItem">
        New item:
        <input data-bind='value: itemToAdd, valueUpdate: "afterkeydown"' />
        <button type="submit" data-bind="enable: itemToAdd().length > 0">Add</button>
        <p>Your items:</p>
        <select multiple="multiple" width="50" data-bind="options: items"> </select>
    </form>

    </div> 
```

我的视图模型是：

```
 <script type="text/javascript">
        // Here's my data model
        $(document).ready(function () {
            var ViewModel = function (first, last) {
                this.firstName = ko.observable(first);
                this.lastName = ko.observable(last);

                this.fullName = ko.computed(function () {
                    // Knockout tracks dependencies automatically. It knows that fullName depends on firstName and lastName, because these get called when evaluating fullName.
                    return this.firstName() + " " + this.lastName();
                }, this);
            };

            ko.applyBindings(new ViewModel("Planet", "Earth"), $("#liveExample1")[0]); // This makes Knockout get to work?

    var SimpleListModel = function(items) {
        this.items = ko.observableArray(items);
        this.itemToAdd = ko.observable("");
        this.addItem = function() {
            if (this.itemToAdd() != "") {
                this.items.push(this.itemToAdd()); // Adds the item. Writing to the "items" observableArray causes any associated UI to update.
                this.itemToAdd(""); // Clears the text box, because it's bound to the "itemToAdd" observable
            }
        }.bind(this);  // Ensure that "this" is always this view model
    };

    ko.applyBindings(new SimpleListModel(["Alpha", "Beta", "Gamma"]), $("#liveExample")[0]); 

        }); 
```

我该如何解决**“这个”**问题

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T09:33:19.113

**为“这个”**视图模型 使用另一个变量

```
var self = this; 
```

并使用`self`变量 instade`this`
也可以`data-bind="with : viewModel"`用于每个模型。
在这里你的代码是可行的 [你的代码](http://jsfiddle.net/DCuYB/)

# ruby-on-rails - 覆盖引擎视图后找不到路由助手

> ID：14018236
> 
> 赞同：0
> 
> 时间：2012-12-24T07:09:49.503
> 
> 标签：ruby-on-rails, ruby-on-rails-3, spree, rails-engines

每当我覆盖引擎的视图时，我都会在视图中的所有路由助手以及视图中使用的引擎的助手中丢失方法。如何使视图在引擎中查找助手而不是我的应用程序中的助手，即使它是被覆盖的视图？顺便说一句，发动机很疯狂。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T09:21:36.063

以前没有使用过 spree，但与 Forem 有同样的问题。必须使用 * *forem。**the_route_i_want_url 它把我修好了！另一方面（使用引擎上下文中的正常路由）使用 **main_app.**the_route_i_want_url

# windows - 关于DirectSoundFullDuplexCreate8的两个问题

> ID：14018242
> 
> 赞同：0
> 
> 时间：2012-12-24T07:10:29.063
> 
> 标签：windows, audio, audio-streaming, directsound

我正在使用 DirectSoundFullDuplexCreate8 进行录制，并且在某些情况下，在 Win 7 下播放。我有几个问题。

一个非常简单——FullDuplex 可以与所有音频硬件一起使用吗？在某些情况下，我们将使用不同的设备进行录制和播放。到目前为止，这似乎可行，但如果有些机器不支持全双工的 Win 版本，我们可以自己推出。

另一个可能是一个愚蠢的问题，但我不明白如何设置事件通知进行记录。这是到目前为止我得到的代码，但我不知道如何开始录制或如何设置，以便我可以将正在录制的数据复制到其他缓冲区，包括播放缓冲区：

```
hr = DirectSoundFullDuplexCreate8((LPCGUID)recordDeviceDS, (LPCGUID)playbackDeviceDS&capBufferDescription, &playBufferDescription, hWnd, DSSCL_PRIORITY, &pDSFullDuplex,     &pDSCaptureBuffer8, &pDSPlayBuffer8, NULL );
if (hr != DS_OK)
    return false;

// Set up the notify events
hr = pDSCaptureBuffer8->QueryInterface(IID_IDirectSoundNotify, (LPVOID*)&pDSNotify);
if (hr != DS_OK)
    return false;
for (int i = 0; i < 3; ++i)
{
    eventHandles[i] = CreateEvent(NULL, TRUE, FALSE, NULL);
    if (eventHandles[i] == NULL)
        return false;
}
notifyEvents[0].dwOffset = 500;
notifyEvents[0].hEventNotify = eventHandles[0];

notifyEvents[1].dwOffset = 1000;
notifyEvents[1].hEventNotify = eventHandles[1];

notifyEvents[2].dwOffset = DSBPN_OFFSETSTOP;
notifyEvents[2].hEventNotify = eventHandles[2];

hr = pDSNotify->SetNotificationPositions(NUM_CAP_EVENTS, notifyEvents);
if (hr != DS_OK)
    return false;
pDSNotify->Release(); 
```

接下来是什么？我假设我使用：

```
pDSCaptureBuffer8->Start(true); 
```

开始捕获，但我没有看到任何关于如何设置在积累了适量的数据时激活的 DS 事件处理函数的参考。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T08:09:27.457

欢迎来到 StackOverflow。为了将来参考，最好一次问一个*精确*的问题。

> 一个非常简单——FullDuplex 可以与所有音频硬件一起使用吗？

如果没记错的话，我不这么认为。特别是如果硬件是 USB 或者如果捕获和录制设备不在同一个声卡上。如果它确实适用于不同的物理设备（或 USB），您可能不会从中获得任何好处，例如 AEC。

我相信您想要使用 DirectSoundFullDuplexCreate 而不是仅仅手动创建单独的捕获和播放对象的唯一原因是 AEC（声学回声消除支持）。如果没有记错的话，Windows 中用于 DirectSound 的内置 AEC 不是很好，也不能很好地消除回声。(YMMV)

根据[MSDN](http://msdn.microsoft.com/en-us/library/windows/desktop/ee418204%28v=vs.85%29.aspx)：

> 通过 DirectSound API 访问 Windows XP Acoustic Echo Cancellation (AEC) 功能的现有应用程序在 Windows Vista 上运行时将不再获得 AEC。

以上将适用于 Windows 7。因此，将 DirectSoundFullDuplexCreate 视为无效 API。只需手动分别创建捕获和播放缓冲区。

如果您需要 AEC，可以考虑使用 AEC 系统过滤器。Windows SDK 中有一个旧示例应用程序向您展示了如何使用它。[http://msdn.microsoft.com/en-us/library/ff536174.aspx](http://msdn.microsoft.com/en-us/library/ff536174.aspx)

> 但我看不到如何设置事件通知以进行录制。这是到目前为止我得到的代码，但我不知道如何开始录制或如何设置，以便我可以将正在录制的数据复制到其他缓冲区，包括播放缓冲区：

此外，在 DirectSound 对象上设置事件句柄可能不可靠。您最好定期轮询捕获和播放缓冲区位置 (IDirectSoundCaptureBuffer8::GetCurrentPosition)。您必须使用事件句柄处理所有早起和晚起的情况。所以 Sleep() 将和 WaitForSingleObject 一样工作。

要开始录制，请调用 IDirectSoundCaptureBuffer8::Start()

还有其他问题吗？

# jquery - 使用 jquery 对多个选择下拉选项进行排序

> ID：14018246
> 
> 赞同：3
> 
> 时间：2012-12-24T07:10:48.927
> 
> 标签：jquery, html, select

我正在使用以下代码添加国家，其中用户从一个多选中选择国家并添加到另一个多选，并在提交时将第二个多选的国家插入到数据库中。

.js

```
$(document).ready(function(){
    $('.add').click(function(){
        $('#country_list option:selected').appendTo('#country_select');
    });
    $('.remove').click(function(){
        $('#country_select option:selected').appendTo('#country_list');
    });
    $('.add-all').click(function(){
        $('#country_list option').appendTo('#country_select');
    });
    $('.remove-all').click(function(){
        $('#country_select option').appendTo('#country_list');
    });
    $("#register").click(function() {  
    $("#country_select option").each(function() {
        $(this).attr("selected", "selected");
    });
});
}); 
```

.html

```
 <select id="country_list" size="10" multiple style="min-width: 200px;">
   <option value="US">United States</option>
   <option value="UK">United Kingdom</option>
   <option value="IN">India</option>          
  </select>
  <table border="0">
  <tr><td><input type="button" class='add' value=">"/></td></tr>
  <tr><td><input type="button" class='remove' value="<"/></td></tr>
  <tr><td><input type="button" class='add-all' value=">>>"/></td></tr>
  <tr><td><input type="button" class='remove-all' value="<<<"/></td></tr>
  </table>
  <select size="10" name="country_select[]" id="country_select" multiple  style="min-width: 200px;">
  </select> 
```

此处，当单击添加按钮时，下拉国家列表中的选定项目移动到国家选择。

我需要的是，当添加一个国家/地区时，它应该按名称顺序移动到下拉国家/地区选择中。目前，当一个国家被添加时，它会在国家选项列表的底部。

我尝试使用此[Javascript 对选择元素的内容进行排序，](https://stackoverflow.com/questions/278089/javascript-to-sort-contents-of-select-element)但无法正常工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-24T07:24:14.437

每次选项移动时调用以下函数以`#country_select`按字母顺序重新排列选择选项

JS：

```
function reArrangeSelect() {
    $("#country_select").html($("#country_select option").sort(function(a, b) {
        return a.text == b.text ? 0 : a.text < b.text ? -1 : 1
    }))
} 
```

[现场演示](http://fiddle.jshell.net/pJhLD/show/)| [来源](http://jsfiddle.net/pJhLD/)| [信用](https://stackoverflow.com/a/7466196/1756941)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-24T07:28:06.177

基于值的自定义元素排序器

```
function optionSort(a, b) {
    return $(a).val() > $(b).val();
}

var opts = $('#selectID option').get();

$('#selectID ').html(opts.sort(optionSort)) 
```

演示：http: [//jsfiddle.net/5WgYK/](http://jsfiddle.net/5WgYK/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-04-13T09:09:53.873

如果您需要通过选择对多选进行排序，同时将所选项目保持在列表顶部，这将很有用。

```
$('#identifier option:selected').prependTo('#identifier');
$("#identifier").multiselect("refresh"); 
```

# excel - 如何使用 vba 隐藏基于 Windows 登录参数的 Excel 行

> ID：14018255
> 
> 赞同：-1
> 
> 时间：2012-12-24T07:11:38.117
> 
> 标签：excel, vba, hide, rows

**Excel-VBA**如何根据windows用户登录参数隐藏Excel工作表中的行？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-24T10:32:58.647

根据需要更改用户名和范围：

```
If (Environ("Username") = "yourusername0810") Then

    Range("A1:A5").EntireRow.Hidden = True

End If 
```

# c++ - 模板化 std::future 返回问题

> ID：14018256
> 
> 赞同：0
> 
> 时间：2012-12-24T07:11:54.580
> 
> 标签：c++, templates, linker, std

我使用 C++11 制作了一个线程池类，如下所示。

```
#include <iostream>
#include <functional>
#include <vector>
#include <condition_variable>
#include <thread>
#include <mutex>
#include <queue>
#include <atomic>
#include <future>

class threadpool {
    struct task {
        std::size_t m_priority;
        std::function<void()> m_fn;
        bool operator()(task* t1, task* t2) const {
            return t1->m_priority < t2->m_priority;
        }
    };
public:
    threadpool(std::size_t nthreads);
    ~threadpool();
    // void assign(std::function<void()> fn, std::size_t priority);
    template <typename T> std::future<T> assign(std::function<T()> fn, std::size_t priority);
private:
    void funnel();
    std::vector<std::thread*> m_threadlist;
    std::priority_queue<task*, std::vector<task*>, task> m_tasks;
    std::mutex m_tasks_mtx;
    std::condition_variable m_newc;
    std::mutex m_newc_mtx;
    std::atomic<bool> m_destruct;
};
threadpool::threadpool(std::size_t nthreads) {
    for (std::size_t _n = nthreads; _n > 0; --_n)
        m_threadlist.push_back(new std::thread(std::bind(&threadpool::funnel, this)));
}
threadpool::~threadpool() {
    m_destruct = true;
    while (!m_threadlist.empty()) {
        m_newc.notify_one();
    }
}

/* ... */

template <typename T>
std::future<T> assign(std::function<T()> fn, std::size_t priority) {
    std::promise<T> _prom;
    std::future<T> _ft = _prom.get_future();
    threadpool::task* _t = new task();
    _t->m_fn = std::bind([](std::promise<T>& p) {
        p.set_value(fn());
    }, std::ref(_prom));
    _t->m_priority = priority;
    {
        std::lock_guard<std::mutex> _lock(m_tasks_mtx);
        m_tasks.push(_t);
    }
    m_newc.notify_one();
    return _ft;
}
void threadpool::funnel() {
    while (!m_destruct) {
        {
            std::unique_lock<std::mutex> _lock(this->m_newc_mtx);
            m_newc.wait(_lock);
        }
        for (;;) {
            threadpool::task* _t;
            {
                std::lock_guard<std::mutex> _lock(m_tasks_mtx);
                if (m_tasks.empty()) break;
                _t = m_tasks.top();
                m_tasks.pop();
            }
            _t->m_fn();
            delete _t;
        }
    }
}
int count() {
    return 3;
}
int main(int argc, char* argv[])
{
    threadpool* herppool = new threadpool(10);
    for(int i = 0; i<900;i++) {
        auto derp = herppool->assign<int>(count,3); // <-- error here
        //printf("%d", derp.get());
    }
    delete herppool;
    //getchar();
} 
```

我无法解决为什么在 MSVC 2012 下的指定行出现以下错误。

```
1>  main.cpp
1>main.obj : error LNK2001: unresolved external symbol "public: class std::future<int> __thiscall threadpool::assign<int>(class std::function<int __cdecl(void)>,unsigned int)" (??$assign@H@threadpool@@QAE?AV?$future@H@std@@V?$function@$$A6AHXZ@2@I@Z)
1>C:\Users\...\visual studio 2012\Projects\threadpool\Release\threadpool.exe : fatal error LNK1120: 1 unresolved externals
========== Build: 0 succeeded, 1 failed, 0 up-to-date, 0 skipped ========== 
```

对我来说，看起来该功能存在。我不知道链接器在抱怨什么，并且非常感谢一些帮助追踪错误。我已经盯着它看了几个小时了。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-24T07:14:10.660

如果你仔细看这里：

```
template <typename T>
std::future<T> assign(std::function<T()> fn, std::size_t priority) 
```

您不是在定义`threadpool::assign`，而是一个名为`assign`. 链接器非常清楚地告诉您您忘记定义`threadpool::assign`. 你需要这个：

```
template <typename T>
std::future<T> threadpool::assign(std::function<T()> fn, std::size_t priority) 
```

# android - 使用dom解析的嵌套xml解析

> ID：14018257
> 
> 赞同：2
> 
> 时间：2012-12-24T07:11:56.113
> 
> 标签：android, xml-parsing

```
My xml is as follows...In this how can I get NAME attribute from status tag using DOM xml   
parsing...

 <tickets type="array">
    <ticket>
           <ticket-id type="integer">6</ticket-id>
           <status>
               <id type="integer">1706729</id>
               <name>Completed</name>
               <colour>black</colour>

           </status>
    </ticket>

    <ticket>
           <ticket-id type="integer">5</ticket-id>
           <status>
               <id type="integer">1706929</id>
               <name>New</name>
               <colour>White</colour>

           </status>
    </ticket>
</tickets> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-24T07:56:55.330

这样你应该能够得到你正在寻找的东西

```
String xml = "<tickets type=\"array\"><ticket><ticket-id type=\"integer\">6</ticket-id><status><id type=\"integer\">1706729</id><name>Completed</name><colour>black</colour></status></ticket><ticket><ticket-id type=\"integer\">5</ticket-id><status><id type=\"integer\">1706929</id><name>New</name><colour>White</colour></status></ticket></tickets>";
            Log.e("xml parsing ", xml);
            try {
                DocumentBuilderFactory domFactory = DocumentBuilderFactory.newInstance();
                domFactory.setNamespaceAware(true);
                domFactory.setIgnoringComments(true);
                domFactory.setIgnoringElementContentWhitespace(true);
                domFactory.setCoalescing(true);
                DocumentBuilder domBuilder = null;
                Document document = null;

                try {
                    domBuilder = domFactory.newDocumentBuilder();
                }
                catch (ParserConfigurationException parserConfigurationException) {
                    Logger.log(Logger.LEVEL_ERROR, FrameworkHelper.class.getName(), "getDocumentRoot", "ParserConfigurationException caught while creating DocumentBuilder object, " + parserConfigurationException.getMessage());
                }

                document = domBuilder.parse(new ByteArrayInputStream(xml.getBytes()));//try catch
                NodeList ticketList = document.getElementsByTagName("ticket");
                for (int i = 0; i < ticketList.getLength(); i++) {
                  Element ticketNode = (Element) ticketList.item(i);
                  String tickets = ticketNode.getNodeValue();
                  NodeList statusList = ticketNode.getElementsByTagName("status");
                  for (int j = 0; j < statusList.getLength(); j++) {
                    Element statusNode = (Element) statusList.item(j);
                    String statuses = statusNode.getNodeValue();
                    NodeList nameList = statusNode.getElementsByTagName("name");
                    for (int k = 0; k < nameList.getLength(); k++) {
                      Element nameNode = (Element) nameList.item(k);
                      String names = nameNode.getChildNodes().item(0).getNodeValue();
                      Toast.makeText(this, "name: " + names,
                            Toast.LENGTH_SHORT).show();
                    }
                  }
                }
            } catch (SAXException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            } catch (IOException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            } 
```

但是，如果层次结构对维护并不重要并且您只想独立处理名称，您也可以直接调用 getElementsByTagName("name")

# asp.net - 如何将服务器控件添加到复选框列表中

> ID：14018262
> 
> 赞同：0
> 
> 时间：2012-12-24T07:12:22.067
> 
> 标签：asp.net, sql-server, c#-4.0, checkboxlist

我尝试将服务器控件（超链接）添加到我当前的复选框列表中（已从数据库绑定）。这是代码。它已执行但控件未呈现并显示在 Checkboxlist 中。

```
protected void Page_PreRender(object Sender, EventArgs e)
    {
        chkAttribute.Items.Cast<ListItem>().ToList().ForEach(s =>
        {
            System.Web.UI.WebControls.HyperLink h = new HyperLink();
            h.Text = s.Value;
            string url = "~/Default.aspx?Item=" + Server.UrlEncode(s.Value);
            h.NavigateUrl = url;
            chkAttribute.Controls.Add(h);

        });
    } 
```

它有什么问题。如果我将控件签入即时窗口，那么它将显示已添加但未在页面上显示的控件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T07:23:54.770

不，`HyperLink`控件不会在 CheckBoxList 中呈现。

问题不仅限于`HyperLink`控件，而是除了`ListItem`控件之外的所有其他问题：当我们编写代码将一个不是 a 的控件添加`ListItem`到`ListControl`like `CheckBoxList`or`DropDownList`中时，即使框架不会返回异常，我们添加的控件也不会也会显示出来。

发生这种情况的原因是，当`ListControl`渲染其内容时，只会`ListItem`将控件写入页面，其他类型的控件将被忽略。就像下面展示的一样：

```
for (int i = 0; i < this.Controls.Count; i++)
{
   if ((this.Controls(i)) is ListItem)
   {
      //Render 
   }
} 
```

您可能会注意到 Controls 集合只是一个数据集合。渲染与否完全取决于容器。如果您在页面指令中打开“跟踪”选项，您将看到您添加的文字控件是一个节点`CheckBoxList`：它根本不呈现到 html。

# android - Android：如何在 android 应用程序的所有活动中设置徽标

> ID：14018264
> 
> 赞同：0
> 
> 时间：2012-12-24T07:12:27.500
> 
> 标签：android

我想在活动中的应用名称前设置徽标？请任何人帮我在右上角的活动页面中设置徽标（图标）..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T07:17:08.243

自定义窗口标题.xml

```
public class CustomWindowTitle extends Activity {
    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        requestWindowFeature(Window.FEATURE_CUSTOM_TITLE);

        setContentView(R.layout.main);

        getWindow().setFeatureInt(Window.FEATURE_CUSTOM_TITLE, R.layout.window_title);
    }
} 
```

window_title.xml

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:orientation="horizontal"
    android:layout_width="fill_parent"
    android:layout_height="35dip"
    android:gravity="center_vertical"
    android:paddingLeft="5dip"
    android:background="#323331">

    <ImageView
        android:id="@+id/header"
        android:src="@drawable/header"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"/>

</LinearLayout> 
```

[下载演示](https://github.com/niravranpara/customTitlebar)

# node.js - 如何在 node.js http.request 中发布 XML 数据

> ID：14018269
> 
> 赞同：18
> 
> 时间：2012-12-24T07:12:48.247
> 
> 标签：node.js, post, xmlhttprequest, express

我正在尝试使用 .js 通过 Node.js 向 Web 服务提交 xml 请求`http.request`。

这是我的代码。我的问题是，`data=1`我不想将 xml 发布到服务中。

```
http.request({
   host: 'service.x.yyy.x',
   port: 80,
   path: "/a.asmx?data=1",
   method: 'POST'
}, function(resp) {
   console.log(resp.statusCode);
   if(resp.statusCode) {
        resp.on('data', function (chunk) {
            console.log(chunk);
            str +=  chunk;                  
        });
        resp.on('end', function (chunk) {                           
            console.log(str);            
        });                   
  }
}).end(); 
```

何做这个？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-12-24T12:52:03.250

实际上，[Andrey Sidorov](https://stackoverflow.com/users/705115/andrey-sidorov)提供的链接有助于使其正常工作。这行得通。

```
var body = '<?xml version="1.0" encoding="utf-8"?>' +
           '<soap12:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap12="http://www.w3.org/2003/05/soap-envelope">'+
            '<soap12:Body>......</soap12:Body></soap12:Envelope>';

var postRequest = {
    host: "service.x.yyy.xa.asmx",
    path: "/a.asmx",
    port: 80,
    method: "POST",
    headers: {
        'Cookie': "cookie",
        'Content-Type': 'text/xml',
        'Content-Length': Buffer.byteLength(body)
    }
};

var buffer = "";

var req = http.request( postRequest, function( res )    {

   console.log( res.statusCode );
   var buffer = "";
   res.on( "data", function( data ) { buffer = buffer + data; } );
   res.on( "end", function( data ) { console.log( buffer ); } );

});

req.on('error', function(e) {
    console.log('problem with request: ' + e.message);
});

req.write( body );
req.end(); 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-12-24T08:49:56.800

`http.request`返回[ClientRequest](http://nodejs.org/api/http.html#http_class_http_clientrequest)对象，它也是一个可写流。而不是`.end()`做`end(xmlbody)`或`.write(xmlbody).end()`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-07-16T03:40:13.390

```
var request = require("request");
request.post({
    rejectUnauthorized: false,
    url: 'URL',
    method: "POST",
    headers: {
        'Content-Type': 'application/xml',
    },
    body: '<XML>'
}, function (error, response, body) {
    if (error) {
        // Handle error
    } else {
        // Handle Response and body
    }
}); 
```

# windows - 切换用户后 LogonUI.exe 进程不会终止

> ID：14018271
> 
> 赞同：0
> 
> 时间：2012-12-24T07:12:59.317
> 
> 标签：windows, authentication, credential-providers

我正在开发一个**凭据提供程序 (CP)**，它在 Windows Vista/7 的登录或解锁屏幕上显示一个对话框。只要调用我的凭据提供程序的析构函数，该对话框就会终止。对于解锁或登录等基本场景，该对话框已正确关闭；但是，我遇到了这种情况：

1.  锁定计算机：这将显示我的对话框
2.  点击“其他凭证”
3.  点击“切换用户”

在第 3 步之后，创建了一个新对话框（一个新`logonUI`进程创建了我的**CP**），但第 1 步中的对话框仍然存在但隐藏了。我尝试调试，发现`loginUI`在步骤1中创建的并没有终止，仍然保留我的CP所以它没有被破坏，然后对话框没有关闭。

我希望一次只存在一个对话框。有什么方法可以要求`logonUI`释放我的**CP**或捕获切换用户事件，以便我可以自行关闭对话框？

我正在使用：Win7 32 位终极版。

# php - 如何在静态方法中访问公共和私有变量？

> ID：14018274
> 
> 赞同：1
> 
> 时间：2012-12-24T07:13:32.003
> 
> 标签：php

我在访问静态函数中的私有和公共变量时遇到问题。我知道访问静态变量来访问静态函数。

示例：

```
class Student{
public $name = "Rajkumar";
private $mark = 10;
static $result = "Pass";
static function Display(){
echo(self::$result);
//here how to access $name and $mark
}
} 
```

这可能与否。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-24T07:14:51.800

您还必须将属性标记为静态。您无法从静态函数访问非静态属性，即使这些属性具有硬编码值（如您的示例）。

# html - 如何在`fieldset legend`的中间位置设置文本

> ID：14018277
> 
> 赞同：3
> 
> 时间：2012-12-24T07:13:46.013
> 
> 标签：html, css, legend, fieldset

如何在边框中间设置图例文本`field set`？

我试过这个html代码：

```
<fieldset>
    <legend align="center"> 
              This is text appear at center of border
    </legend>
</fieldset> 
```

我也尝试过，`margin-left: 100px`但由于设计限制，我不想使用 margin-left。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-24T07:17:38.527

**CSS**是你的朋友

```
legend {
    width: 100%;
    text-align: center;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-06-02T21:54:06.937

尝试为“图例元素”提供一个百分比为 10% 的宽度。然后给它 margin-left:45% ((100-10)/2)

```
legend {
width: 10%;
text-align: center;
margin-left:45%; 
```

}

它将位于边界之间的中心

# php - PHP的数学统计库

> ID：14018279
> 
> 赞同：7
> 
> 时间：2012-12-24T07:14:00.850
> 
> 标签：php, statistics

我想知道，是否有一个用于统计测试的库，例如

*   t检验
*   方差分析
*   Kolmogorov Smirnov 等......对于 PHP？

我找到了一个 pecl 扩展：[http](http://php.net/manual/de/book.stats.php) ://php.net/manual/de/book.stats.php ，它提供了一些基本参数，但还没有找到测试

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-24T09:30:02.833

如果你想要一个完整的 PHP 库，你可以看看[这里](http://onlamp.com/pub/a/php/2004/07/22/php_anova.html)，但我不知道它是否真的很好。

这个统计测试非常好，我不知道 php 是否是计算它的好选择。正如评论中所建议的，您应该用 R 语言编写脚本，然后调用它。根据您的服务器架构，有两种方法可以调用另一种语言。假设您只有一台服务器，您可以使用[proc_open](http://php.net/manual/en/function.proc-open.php)：

```
$descriptorspec = array(
   0 => array("pipe", "r"),  //a pipe where you will read
   1 => array("pipe", "w"),  //std out : a pipe where you will write
   2 => array("file", "/tmp/error-output.txt", "a") // stderr : a log file, not mandatory here
);
 $pipes = array();
$process = proc_open('R yourfile.r',$decriptorspec,$pipes);

fwrite($pipes[0],$yourStatsToBeCompute);
$result = stream_get_contents($pipes[1]);
fclose($pipes[0]);
fclose($pipes[1]);
proc_close($process); 
```

您还可以使用 cURL 通过 RCurl 联系另一台服务器上的 Rscript。

# c++ - 如何在 Windows 上获取进程工作目录？

> ID：14018280
> 
> 赞同：4
> 
> 时间：2012-12-24T07:14:02.080
> 
> 标签：c++, windows, winapi

如何使用本机 API 在 Windows 上获取进程工作目录（对于使用进程句柄或 PID 的另一个进程）？我看过[Process and Thread Functions](http://msdn.microsoft.com/en-us/library/windows/desktop/ms684847%28v=vs.85%29.aspx)，[PSAPI Functions](http://msdn.microsoft.com/en-us/library/ms684894%28v=vs.85%29.aspx)并没有找到。也许WMI？

此外，关于这些主题，*PSAPI*如何与*进程和线程函数*相关联？它过时了吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-24T07:32:16.390

为此，您需要比 PSAPI 更重的火炮。下面是如何做到这一点（假设 x86，省略错误处理）：

```
ProcessBasicInformation     pbi ;
RTL_USER_PROCESS_PARAMETERS upp ;
PEB   peb ;
DWORD len ;

HANDLE handle = OpenProcess (PROCESS_QUERY_INFORMATION | PROCESS_VM_READ, FALSE, pid) ;

NtQueryInformationProcess (handle, 0 /*ProcessBasicInformation*/, &pbi,
    sizeof (ProcessBasicInformation), &len) ;

ReadProcessMemory (handle, pbi.PebBaseAddress,    &peb, sizeof (PEB), &len) ;
ReadProcessMemory (handle, peb.ProcessParameters, &upp, sizeof (RTL_USER_PROCESS_PARAMETERS), &len) ;

WCHAR path = new WCHAR[upp.CurrentDirectoryPath.Length / 2 + 1] ;

ReadProcessMemory (handle, upp.CurrentDirectoryPath.Buffer, path, upp.CurrentDirectoryPath.Length, &len) ;

// null-terminate
path[upp.CurrentDirectoryPath.Length / 2] = 0 ; 
```

请注意，除非进程暂停，否则此方法包含竞争。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2020-07-27T12:18:32.843

为了扩展安东的答案，因为你不能`NtQueryInformationProcess`像普通函数一样简单地调用，你必须像这样调用 Windows ntdll.dll `GetModuleHandleW`：

获取cwd.cpp

```
#include <string>
#include <vector>
#include <cwchar>

#include <windows.h>
#include <winternl.h>

using std::string;
using std::wstring;
using std::vector;
using std::size_t;

// define process_t type
typedef DWORD process_t;

// #define instead of typedef to override
#define RTL_DRIVE_LETTER_CURDIR struct {\
  WORD Flags;\
  WORD Length;\
  ULONG TimeStamp;\
  STRING DosPath;\
}\

// #define instead of typedef to override
#define RTL_USER_PROCESS_PARAMETERS struct {\
  ULONG MaximumLength;\
  ULONG Length;\
  ULONG Flags;\
  ULONG DebugFlags;\
  PVOID ConsoleHandle;\
  ULONG ConsoleFlags;\
  PVOID StdInputHandle;\
  PVOID StdOutputHandle;\
  PVOID StdErrorHandle;\
  UNICODE_STRING CurrentDirectoryPath;\
  PVOID CurrentDirectoryHandle;\
  UNICODE_STRING DllPath;\
  UNICODE_STRING ImagePathName;\
  UNICODE_STRING CommandLine;\
  PVOID Environment;\
  ULONG StartingPositionLeft;\
  ULONG StartingPositionTop;\
  ULONG Width;\
  ULONG Height;\
  ULONG CharWidth;\
  ULONG CharHeight;\
  ULONG ConsoleTextAttributes;\
  ULONG WindowFlags;\
  ULONG ShowWindowFlags;\
  UNICODE_STRING WindowTitle;\
  UNICODE_STRING DesktopName;\
  UNICODE_STRING ShellInfo;\
  UNICODE_STRING RuntimeData;\
  RTL_DRIVE_LETTER_CURDIR DLCurrentDirectory[32];\
  ULONG EnvironmentSize;\
}\

// shortens a wide string to a narrow string
static inline string shorten(wstring wstr) {
  int nbytes = WideCharToMultiByte(CP_UTF8, 0, wstr.c_str(), (int)wstr.length(), NULL, 0, NULL, NULL);
  vector<char> buf(nbytes);
  return string { buf.data(), (size_t)WideCharToMultiByte(CP_UTF8, 0, wstr.c_str(), (int)wstr.length(), buf.data(), nbytes, NULL, NULL) };
}

// checks whether process handle is 32-bit or not
static inline bool IsX86Process(HANDLE process) {
  BOOL isWow = true;
  SYSTEM_INFO systemInfo = { 0 };
  GetNativeSystemInfo(&systemInfo);
  if (systemInfo.wProcessorArchitecture == PROCESSOR_ARCHITECTURE_INTEL)
    return isWow;
  IsWow64Process(process, &isWow);
  return isWow;
}

// helper to open processes based on pid with full debug privileges
static inline HANDLE OpenProcessWithDebugPrivilege(process_t pid) {
  HANDLE hToken;
  LUID luid;
  TOKEN_PRIVILEGES tkp;
  OpenProcessToken(GetCurrentProcess(), TOKEN_ADJUST_PRIVILEGES | TOKEN_QUERY, &hToken);
  LookupPrivilegeValue(NULL, SE_DEBUG_NAME, &luid);
  tkp.PrivilegeCount = 1;
  tkp.Privileges[0].Luid = luid;
  tkp.Privileges[0].Attributes = SE_PRIVILEGE_ENABLED;
  AdjustTokenPrivileges(hToken, false, &tkp, sizeof(tkp), NULL, NULL);
  CloseHandle(hToken);
  return OpenProcess(PROCESS_ALL_ACCESS, FALSE, pid);
}

// helper to get wide character string of pids cwd based on handle
static inline wchar_t *GetCurrentWorkingDirectoryW(HANDLE proc) {
  PEB peb;
  SIZE_T nRead;
  ULONG res_len = 0;
  PROCESS_BASIC_INFORMATION pbi;
  RTL_USER_PROCESS_PARAMETERS upp;
  HMODULE p_ntdll = GetModuleHandleW(L"ntdll.dll");
  typedef NTSTATUS (__stdcall *tfn_qip)(HANDLE, PROCESSINFOCLASS, PVOID, ULONG, PULONG);
  tfn_qip pfn_qip = tfn_qip(GetProcAddress(p_ntdll, "NtQueryInformationProcess"));
  NTSTATUS status = pfn_qip(proc, ProcessBasicInformation, &pbi, sizeof(pbi), &res_len);
  if (status) { return NULL; } 
  ReadProcessMemory(proc, pbi.PebBaseAddress, &peb, sizeof(peb), &nRead);
  if (!nRead) { return NULL; }
  ReadProcessMemory(proc, peb.ProcessParameters, &upp, sizeof(upp), &nRead);
  if (!nRead) { return NULL; }
  PVOID buffer = upp.CurrentDirectoryPath.Buffer;
  USHORT length = upp.CurrentDirectoryPath.Length;
  wchar_t *res = new wchar_t[length / 2 + 1];
  ReadProcessMemory(proc, buffer, res, length, &nRead);
  if (!nRead) { return NULL; }
  res[length / 2] = 0;
  return res;
}

// get cwd of pid as a narrow string
string cwd_from_pid(process_t pid) {
  string cwd;
  // open process of pid using full debug privilege
  HANDLE proc = OpenProcessWithDebugPrivilege(pid);
  wchar_t *wcwd = NULL;
  if (IsX86Process(GetCurrentProcess())) {
    if (IsX86Process(proc)) {
      wcwd = GetCurrentWorkingDirectoryW(proc);
    }
  } else {
    if (!IsX86Process(proc)) {
      wcwd = GetCurrentWorkingDirectoryW(proc);
    }
  }
  if (wcwd != NULL) {
    // converts to UTF-8
    cwd = shorten(wcwd);
    // free memory
    delete[] wcwd; 
  }
  // adds trailing slash if one doesn't yet exist or leave empty
  return (cwd.back() == '\\' || cwd.empty()) ? cwd : cwd + "\\";
  // return cwd; // or get the directories completely unmodified
}

// test function (can be omitted)
int main(int argc, char **argv) {
  if (argc == 2) {
    printf("%s", cwd_from_pid(stoul(string(argv[1]), nullptr, 10)).c_str());
    printf("%s", "\r\n");
  } else {
    printf("%s", cwd_from_pid(GetCurrentProcessId()).c_str());
    printf("%s", "\r\n");
  }
  return 0;
} 
```

buildx86.sh

```
cd "${0%/*}"
g++ getcwd.cpp -o getcwd.exe -std=c++17 -static-libgcc -static-libstdc++ -static -m32 
```

buildx64.sh

```
cd "${0%/*}"
g++ getcwd.cpp -o getcwd.exe -std=c++17 -static-libgcc -static-libstdc++ -static -m64 
```

请注意，这使用了一个私有 API，该 API 可能会在没有警告的情况下进行更改，因此将在没有通知或任何文档的情况下停止工作。调用进程/exe 需要与此方法工作的目标具有相同的体系结构。否则，它将返回一个空字符串。

如果您知道如何从 CreateProcess() 读取打印输出，则可以根据目标可执行文件的架构启动相应架构的 CLI 可执行文件。这意味着要依赖多个可执行文件来构建您的项目，这很慢，但根据您的用例，它仍然是可以接受的。*显然，除非你经常为此创建一个新进程（不是太*频繁），否则它不会是理想的，不应该让你的程序减慢太多。

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2020-10-08T09:31:25.527

这是一个很好的问题，但是当我看到所有这些包含这么多代码的答案时，它让我心碎。您想要获取当前工作目录的“本机”方法；解决了。

打开当前进程，读取内存，根本不是“原生的”。

Windows 进程在 PEB 中保存了大量信息，您不需要太多代码即可获取它。事实上，这很简单：

`NtCurrentPeb()->ProcessParameters->CurrentDirectory.DosPath`

* * *

## 回答 #4

> 赞同：-4
> 
> 时间：2012-12-24T07:32:35.947

`"."`始终是当前目录。我认为它会起作用。

# windows - 如何将 Haskell 嵌入批处理文件（Windows 的 hash-bang runhaskell）？

> ID：14018282
> 
> 赞同：4
> 
> 时间：2012-12-24T07:14:13.640
> 
> 标签：windows, batch-file, haskell, cmd, shebang

在安装了 GHC 的类 UNIX 系统上，我可以创建一个包含以下内容的文件

```
#!/usr/bin/env runhaskell
main = putStrLn "Hello, I am a UNIX script file." 
```

使文件可执行，这将执行给定的 Haskell 代码。

如何在 Windows .bat 文件中执行等效操作？

最好不要创建额外的文件，不设置环境变量，如果使用 UNC 路径或包含空格的路径访问批处理文件，它也可以工作，Haskell 命名空间没有被污染，如果 Haskell 代码包含一个合理的行为结果错误。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-24T07:14:13.640

经过多次试验和错误，事实证明这是可能的。我设计了以下内容：

```
@(set /p =-- < nul & type "%~f0") | runhaskell & exit /b
main = putStrLn "Hello, I am a Windows batch file." 
```

这种机制的唯一缺点是错误消息包含由 (something called by) 创建的临时文件的名称`runhaskell`。

以下是有关其工作原理的完整说明：

*   `set /p =-- < nul`输出`--`（和两个不相关的空格）后面没有换行符。这像这样工作：
    *   `set /p ANSWER=Please enter answer:`不带换行符打印`Please enter answer:`，等待用户输入，并将其放入环境变量中`ANSWER`。
    *   `< nul`就像用户没有输入任何东西一样。
    *   作为（未记录的？）特殊情况，可以省略环境变量名称，然后不设置环境变量。
*   `"%~f0"`是当前批处理文件的名称。
*   因此`set /p =-- < nul & type "%~f0"`输出当前的批处理文件，但第一行被注释掉（当解释为 Haskell 代码时）。
*   我们通过管道`runhaskell`将其输入 ，它（未记录？）将其标准输入解释为非文字（！）Haskell 代码。
    *   就像问题中的 UNIX 版本一样，这假设`runhaskell`在当前的`PATH`.
*   最后，`exit`确保 Windows 批处理文件解释器看不到第一行之后的所有内容，并`exit /b`确保我们只退出这个脚本，而不是任何周围的`cmd.exe`shell。
*   领导`@`确保`echo`在运行此脚本时不会编辑所有这些乱码。

（我还没有找到一种方法来对读写 Haskell 代码做同样的事情；但我目前不需要。）

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-24T09:05:18.047

只需在您的 PATH 下创建

```
C:\my-tools-path>copy con --.bat
runhaskell %1
^Z 
```

要创建您的自动执行的 haskell 程序，请编写一些类似

```
-- "%~f0"
main = putStrLn "Merry Christmas!" 
```

没有错误，没有临时文件，...

;)

（您可以添加您的程序参数更改

```
runhaskell %1 %2 ... 
```

和

```
-- "%~f0" %1 %2 ... 
```

)

# ruby-on-rails - 模板::错误（未定义的方法 `specification_items_path'

> ID：14018290
> 
> 赞同：1
> 
> 时间：2012-12-24T07:14:56.093
> 
> 标签：ruby-on-rails, routes, naming-conventions

我在 routes.db 中有一行：

```
resources :specificationItems 
```

**我的 specification_item.rb 模型**：

```
class SpecificationItem < ActiveRecord::Base
    attr_accessible :amount, :item_id, :price, :specification_id, :total
    belongs_to :specification
    belongs_to :item
end 
```

**specification_items.rb 控制器：**

```
class SpecificationItemsController < ApplicationController
    def new

        @specificationItem = SpecificationItem.new(:specification_id => params[:specification_id])
    end

  def create

    @specificationItem = SpecificationItem.new(params[:specificationitem])

    if @specificationItem.save
        respond_to do |format|
        format.html {
            flash[:success] = "Запись добавлена успешно"
            redirect_to @specificationItem      
        }         
        format.js
        end
    else
      render 'new'
    end
  end

    def show
        @specificationitems = SpecificationItem.where("specification_id = ?", @specification.id.to_s)
    end

    def index
        @specificationitems = SpecificationItem.all
    end

end 
```

使用规范/显示中的这一行，我调用了一个新操作`specification_item`：

```
 <%= link_to "Add item to spec", new_specificationItem_path(:specification_id =>@specification.id), id: "new_item", remote: true %> 
```

这是 new.js.erb 中的一个 js 动作

```
 $('#new_item').hide().after('<%= j render("form") %>') 
```

部分 _form.html.erb：

```
 <%= form_for @specificationItem, remote: true do |f| %>
    <div class="row">
    <div class="span6 offset3">
        <%= f.label :item_id, "Товар" %>
        <%= f.text_field :item_id %>
        <%= f.hidden_field :specification_id %>

   </div>
   </div>

<%= f.submit "Сохранить", class: "btn btn-large btn-primary" %>
<% end %> 
```

它引发错误：

```
ActionView::Template::Error (undefined method `specification_items_path' for #<#<Class:0xb5b708e4>:0xb5b6e5e4>):
    1: <%= form_for @specificationItem, remote: true do |f| %>
    2:     <div class="row">
    3:      <div class="span6 offset3">
    4:              <%= f.label :item_id, "Товар" %>
  app/views/specification_items/_form.html.erb:1:in `_app_views_specification_items__form_html_erb___537109236__624411928'
  app/views/specification_items/new.js.erb:1:in `_app_views_specification_items_new_js_erb___211974400__624460778' 
```

我怀疑错误属于命名约定，但无法识别。对不起我的新手问题和错误的英语

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-24T07:25:50.073

试试`rake routes`它会显示所有可用的路径。另外我注意到你写`resources :specificationItems`的，由于方便，它应该是`resources :specification_items`。

# iphone - 如何使用 iPhone 或 iPad 浏览文件

> ID：14018298
> 
> 赞同：1
> 
> 时间：2012-12-24T07:15:43.503
> 
> 标签：iphone, ios, ipad

我正在尝试为通用 ios 设备开发一个应用程序。因为我想浏览设备上可用的文件（如果有的话）。任何人都可以让我知道如何做到这一点任何例子，方法或建议。我应该为此调用什么方法。

帮助我，在此先感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T07:38:44.660

Apple 不允许用户在应用程序中浏览设备上可用的系统文件。据我所知，您想创建一个像 ifile 这样的应用程序，它是一个越狱应用程序，需要越狱设备才能运行并消除 Apple 对应用程序的限制。因此，在库存的 Apple 设备上，此应用程序将无法运行。

# php - 如何在ajax链接函数中传递js变量

> ID：14018299
> 
> 赞同：1
> 
> 时间：2012-12-24T07:15:47.817
> 
> 标签：php, javascript, yii

如何在 URL 中传递学生 ID？由于它的 js 变量出现错误或它作为字符串传递。

```
<script>    
    function updateCallhistory(studentID)
    {  
        <?php   
            echo CHtml::ajax(array(
            'url'=> Yii::app()->createUrl("siteiq/UpdateStudentForm", array("ClassID" => $ClassID) ),           
            'data'=> "js:$(this).serialize()",
            'type'=>'post',
            'dataType'=>'json',
            'success'=>"function(data)
            {
            if (data.status == 'failure')
            {
                $('#dialogStudentForm div.divForForm').html(data.div);
                  // Here is the trick: on submit-> once again this function!
                $('#dialogStudentForm div.divForForm form').submit(updateCallhistory);
            }
            else
            {
                $('#dialogStudentForm div.divForForm').html(data.div);
                setTimeout(\"$('#dialogStudentForm').dialog('close') \",1000);
            }

            } ",
        ))?>;
        return false;  
    }
    </script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-24T08:24:13.923

试试这个方法：

```
<script>    
    function updateCallhistory(studentID)
    {  

        var url = '<?php echo Yii::app()->createUrl("siteiq/UpdateStudentForm", array("ClassID" => $ClassID) ); ?>' + '&studentID='+studentID;
        <?php   
            echo CHtml::ajax(array(
            'url'=> 'js:url',           
            'data'=> "js:$(this).serialize()",
            'type'=>'post',
            'dataType'=>'json',
            'success'=>"function(data)
            {
            if (data.status == 'failure')
            {
                $('#dialogStudentForm div.divForForm').html(data.div);
                  // Here is the trick: on submit-> once again this function!
                $('#dialogStudentForm div.divForForm form').submit(updateCallhistory);
            }
            else
            {
                $('#dialogStudentForm div.divForForm').html(data.div);
                setTimeout(\"$('#dialogStudentForm').dialog('close') \",1000);
            }

            } ",
        ))?>;
        return false;  
    }
    </script> 
```

# objective-c - 如何获得设备的比例因子？

> ID：14018305
> 
> 赞同：62
> 
> 时间：2012-12-24T07:16:23.547
> 
> 标签：objective-c, ios, uiimage

我一直在使用`UIGraphicsBeginImageContextWithOptions()`，我注意到该方法中的最后一个字段是`scalefactor`. 苹果文档说，如果我想将其设置为 0.0，那么它将使用设备主屏幕的默认比例因子。有没有办法通过属性或方法获得默认比例因子？

* * *

## 回答 #1

> 赞同：115
> 
> 时间：2012-12-24T07:38:24.270

设备的比例因子是 的属性`UIScreen`。您可以通过以下方式获得它：

```
[UIScreen mainScreen].scale; 
```

[文档在这里](http://developer.apple.com/library/ios/documentation/uikit/reference/UIScreen_Class/Reference/UIScreen.html#//apple_ref/occ/instp/UIScreen/scale)。

* * *

## 回答 #2

> 赞同：36
> 
> 时间：2015-10-24T18:26:02.037

斯威夫特 3+ 版本：

```
UIScreen.main.scale 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2021-02-27T07:49:16.120

Swift5+ / macOS 大苏尔：

```
let backingScaleFactor = NSScreen.main?.backingScaleFactor 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2020-12-22T09:19:51.257

**斯威夫特 5+**

```
let scale = UIScreen.main.scale
print("scale is:\(scale)") 
```

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2012-12-24T07:25:45.287

希望对你有帮助

```
 CGSize textcontent =CGSizeMake(width, height);
UIGraphicsBeginImageContext(textcontent);
if ([UIScreen instancesRespondToSelector:@selector(scale)] && [[UIScreen mainScreen] scale] == 2.0f)
{
    UIGraphicsBeginImageContextWithOptions(textcontent, YES, 1.0f);
}
else
{
    UIGraphicsBeginImageContext(textcontent);
}
 [view.layer renderInContext:UIGraphicsGetCurrentContext()];
 viewImage = UIGraphicsGetImageFromCurrentImageContext();
 UIGraphicsEndImageContext();
 return viewImage; 
```

# javascript - 将照片从 javascript 发送到服务器

> ID：14018307
> 
> 赞同：-1
> 
> 时间：2012-12-24T07:16:27.043
> 
> 标签：javascript, ajax, http, servlets

伙计们，我是编程新手，我真的不知道如何将显示在 div 中的照片保存到服务器。我正在使用 java 应用程序，我正在尝试在 div 上显示图像，然后将其保存在服务器上。据我所知，由于客户端和服务器的兼容性，无法在 jsp 或 servlet 中声明 javascript 变量。我正在尝试通过 ajax 传递 url，但由于 base64 长字符串，它没有显示在服务器上。我认为我们不能将这么长的字符串传递给 jsp 或 servlet 页面。有没有其他方法可以将字符串传递或将图像保存到服务器？

```
function GetXmlHttpObject() {
var xmlHttp=null;
try {
 // Firefox, Opera 8.0+, Safari
 xmlHttp=new XMLHttpRequest();
 }
catch (e) {
 //Internet Explorer
 try {
  xmlHttp=new ActiveXObject("Msxml2.XMLHTTP");
  }
 catch (e) {
  xmlHttp=new ActiveXObject("Microsoft.XMLHTTP");
  }
 }
return xmlHttp;
}

function ajax() {   

xmlHttp=GetXmlHttpObject(); 
var url="/ServletExten/XmlServletGen";
url=url+"?datax=" +cordXSend +"&datay=" +cordYSend +"&sizew=" +canvasWidth +"&sizeh=" +canvasHeight ;
alert(url); 
xmlHttp.open("POST",url,true);
xmlHttp.send(null);
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-24T07:41:49.560

像这样创建一个输入元素，

```
 <form id="fileupf" action="fileup.php" method="post" enctype="multipart/form-data">
      <input type="file" id="fileup" name="file" accept="image/*" >
 </form> 
```

然后在ajax中，

```
$('#fileupf').ajaxForm({
    complete: function(xhr) {
        alert("Upload complete");   
    } 
}); 
```

在 php 中，

```
<?php
$target_path = "uploaded_images/";

$file_name = $_FILES["file"]["name"];
$random_digit=rand(0000,9999);
$new_file_name=$random_digit.$file_name;

$target_path = $target_path . basename( $new_file_name); 
?> 
```

如果您要保存画布绘图，

Javascript,

```
var canvasData = canvas.toDataURL("image/png");
var ajax = new XMLHttpRequest();
ajax.open("POST",'save.php',false);
ajax.setRequestHeader('Content-Type', 'application/upload');
ajax.send(canvasData); 
```

PHP,

```
<?php 
if (isset($GLOBALS["HTTP_RAW_POST_DATA"]))
{
    // Get the data
    $imageData=$GLOBALS['HTTP_RAW_POST_DATA'];

    $filteredData=substr($imageData, strpos($imageData, ",")+1);

    $unencodedData=base64_decode($filteredData);

    $random_digit=md5(uniqid(mt_rand(), true));

    $fp = fopen( 'yourfolder/new'.$random_digit.'.png', 'wb' );
    fwrite( $fp, $unencodedData);
    fclose( $fp );
}
?> 
```

# c++ - 用于异步 HTTP 客户端的 C++ 库

> ID：14018315
> 
> 赞同：5
> 
> 时间：2012-12-24T07:17:35.717
> 
> 标签：c++, http, asynchronous

我正在寻找一个 C++ 库来发送一个异步 HTTP 请求，这样主线程就不会被阻塞，并且一旦 http url 请求完成后就会通知。

请告知是否有任何 C++ 库来实现此异步 HTTP 客户端功能。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-06-15T21:06:03.460

libcurl 的“multi”接口可以在后台运行 HTTP 请求（它使用了第 2 个线程，但效果是一样的）。首先，使用`curl_multi_init`. 然后，设置一个简单的句柄（使用创建它`curl_easy_init`并使用设置 URL 和其他选项`curl_easy_setopt`）并调用`curl_multi_add_handle`. `curl_multi_perform`将开始传输并立即返回，您可以调用`curl_multi_info_read`以获取您的简易句柄的状态。完成后别忘了打电话`curl_multi_cleanup`。

[http://curl.haxx.se/libcurl/c/libcurl-multi.html](http://curl.haxx.se/libcurl/c/libcurl-multi.html)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-04T22:32:31.640

库不必是异步的。只要它是线程安全的，您应该能够在单独的线程中执行您需要执行的任何操作，并使用线程原语稍后与主线程同步。

# c# - 了解asp.net框架

> ID：14018318
> 
> 赞同：0
> 
> 时间：2012-12-24T07:17:53.453
> 
> 标签：c#, asp.net, sql-server

所以最近我有机会承担一个正在进行的项目。该项目已使用 asp.net MVC 框架（和 Microsoft SQL 作为数据库）在 c# 中编码。我从未使用过任何这些工具，而且我的 Web 开发知识主要基于 WAMP/LAMP。我想在本地开发网络应用程序，首先，我如何在本地计算机上提供内容？这似乎不像安装WAMP并将文件移动到/www/目录，然后转到localhost地址那么简单。

如果有人可以在设置开发环境时为我指出正确的方向，那也将非常有帮助。我已经安装了 Visual Studio 2012 Ultimate（这对我来说也是新的，我过去只使用过 Eclipse）。

另外，我应该继续下载 180 天的 microsoft sql server 评估吗？我也听说过一些叫做 localDB 的东西，这些比较如何？两者之间转移容易吗？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-24T09:05:38.693

当您使用 Visual Studio 时，您不需要将文件移动到 /www/ 之类的目录中，只需按下运行按钮并说出默认浏览器的名称即可。这将启动 IIS 服务器并加载您的项目。关闭调试模式不会关闭服务器，无需再次点击启动按钮即可对项目进行更改。请注意，需要编译 C# 文件（构建选项）而 .chtml 文件不需要。

LocalDb 是新 MVC 项目中的默认数据库。它更适合开发人员。我不确定你的项目有多大，需要什么样的管理，所以我不能说什么更适合。但是对于在本地计算机上进行开发，LocalDb 就足够了。有关更多信息，请参阅[介绍 LocalDB、改进的 SQL Express](http://blogs.msdn.com/b/sqlexpress/archive/2011/07/12/introducing-localdb-a-better-sql-express.aspx)[和](https://stackoverflow.com/questions/9655374/sql-localdb-vs-sql-server-ce)接受的答案。

我推荐阅读[MVC Getting Started](http://www.asp.net/mvc)了解基础知识，尤其是[ASP.NET MVC Overview](http://www.asp.net/mvc/tutorials/older-versions/overview/asp-net-mvc-overview)。右边是一堆我强烈推荐观看的视频，它们在我刚开始使用 MVC 时帮助了我很多。[Channel9](http://channel9.msdn.com/Tags/asp.net+mvc)还有关于 Visual Studio 和 ASP.NET MVC 的有用视频。

我希望这会让你走上正轨，祝你好运。

# android - 在 ImageView 上绘制可绘制对象

> ID：14018321
> 
> 赞同：0
> 
> 时间：2012-12-24T07:18:03.517
> 
> 标签：android, imageview, drawable

我有一个自定义的 imageView 子类，可以平移和缩放。我怎样才能把其他图像（来自drawable）放在它上面，它会像它粘在它上面一样随着imageView平移和移动？

# android - 在 Android 中退出应用程序

> ID：14018325
> 
> 赞同：1
> 
> 时间：2012-12-24T07:18:38.663
> 
> 标签：android, android-intent, android-activity, back-button, home-button

我的项目中有几个活动将在按下不同按钮时调用。

我正在寻找的是一种在用户按下 BACK 或 Home 按钮时完全关闭和退出应用程序的方法！我应该如何处理这个问题？

这是我的代码，但在这里我将此页面导航到登录类，这是我的启动活动！

```
public boolean onKeyDown(int keyCode, KeyEvent event) {
    if(keyCode == KeyEvent.KEYCODE_HOME)
    {
        Intent intent = new Intent(this, Login.class);
        intent.addFlags(Intent.FLAG_ACTIVITY_NO_HISTORY);
        startActivity(intent);
    }
    else if(keyCode==KeyEvent.KEYCODE_BACK)
    {
        Intent intent = new Intent(this, Login.class);
        intent.addFlags(Intent.FLAG_ACTIVITY_NO_HISTORY);
        startActivity(intent);
    }
    Toast.LENGTH_LONG).show();
    return false;
} 
```

任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-24T07:25:43.953

您可以在 mainActivity 上覆盖 onBackpressed() 并调用 finish() 但如果您在 main 上调用 finish() 或使用后退按钮时看到登录页面，则可以在下面设置此标志以清理活动堆栈

```
 intent = new Intent(this,Activity.class);
 intent.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-24T07:41:10.233

在您使用意图的地方使用此代码

意图.setFlags（意图.FLAG_ACTIVITY_CLEAR_TOP）；

# c# - Epson TM-U220D 无边距打印

> ID：14018329
> 
> 赞同：0
> 
> 时间：2012-12-24T07:19:02.273
> 
> 标签：c#, printing, epson, printdocument, migradoc

我正在使用这台 Epson TM-U220D 打印机打印收据。默认情况下，纸张所有四个面的边距都设置为 1 英寸。我在打印机实用程序和任何打印机手册中都没有找到任何编辑它的选项。我尝试在 Google 中查找。但没有运气。纸张类型为卷纸 (76 x 297 mm)。有人可以帮我调整边距吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-31T07:56:08.500

使用 Adob​​e Reader 打印 PDF 文件时，请确保以 100% 打印（页面缩放：无）。

在默认设置下，Adobe Reader 将以 94% 的速度打印页面（对于 DIN A 4，可能会有所不同），并在页面周围添加额外的边框。

# c# - C# 保存对数组中字符串变量的引用

> ID：14018333
> 
> 赞同：3
> 
> 时间：2012-12-24T07:19:13.527
> 
> 标签：c#, arrays, string, reference

我想保存对数组中字符串的引用。例如：

```
string x = "x", y="y", z="z";
string array[]; 
```

我希望该数组将保存对 x、y、z 的引用。所以，如果我将数组 [0] 更改为“xx”，那么 x 将包括“xx”

谢谢莫蒂

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-24T17:22:15.283

C# 中的字符串变量是不可变的。但是 StringBuilder 变量是可变的。

```
StringBuilder sb_x = new StringBuilder("x");
StringBuilder sb_y = new StringBuilder("y");
StringBuilder sb_z = new StringBuilder("z");

StringBuilder[] array = { sb_x, sb_y, sb_z };
array[0].Append("x"); 
```

现在 array[0] = "xx" 并且 sb_x 也是 "xx"！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-24T07:27:11.027

C#类型系统中有“值类型”和“引用类型”两种类型。

值类型是按值复制的。当你复制一个时，你会得到一个全新的对象。

引用类型通过引用复制。当您复制一个时，您实际上是在复制对某个存储位置的引用。

String 是一种值类型，但您试图使其表现得像引用类型。

您可以使用 String 属性创建一个类，然后使用该类的数组：

```
public class StringWrapper
{
    public String Value {get; set;}
} 
```

然后你可以像这样使用它：

```
public class SomeOtherClass
{
   public void SomeMethod()
   {
       StringWrapper[] array = new StringWrapper[3];
       var x = new StringWrapper() { Value="X"; }
       var y = new StringWrapper() { Value="y"; }
       var z = new StringWrapper() { Value="z"; }

       array[0] = x;
       array[1] = y;
       array[2] = z;

       array[0].Value = "xx";
   }
} 
```

如果你改变 x.Value，那么 array[0].Value 也会改变。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-24T07:28:25.527

也许尝试使用

```
Dictionary<string,string> 
```

反而：

[http://www.dotnetperls.com/dictionary](http://www.dotnetperls.com/dictionary)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-24T07:34:15.340

这是不可能的。C# 中的字符串是不可变的，这意味着您根本无法更改它们，您只能更改字符串引用。而且你不能创建一个字符串引用数组（除非你使用不安全的代码——不要去那里）。

您需要使用其他一些结构来保存您的数据。正如有人建议的那样， A`Dictionary<string, string>`是一种可能性。或者，您始终可以通过数组访问字符串。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-04-12T17:06:44.657

通过阅读评论我达到了目标:)

备份 Enemy Last Know Position... 实际上我正在这样做。如果您有更好的解决方案，请展示它^_^

```
 if (EnemyLKP != EnemyLKPBackup[2])
        {
            EnemyLKPBackup[1] = EnemyLKPBackup[2];
            EnemyLKPBackup[0] = EnemyLKPBackup[1];
            EnemyLKPBackup[2] = EnemyLKP;
        } 
```

# windows-8 - 如何使用 Windows 8 RT 的开发人员许可证手动签署 exe 文件

> ID：14018337
> 
> 赞同：7
> 
> 时间：2012-12-24T07:19:31.973
> 
> 标签：windows-8, visual-studio-2012, certificate, code-signing, signtool

我为 Windows 8 RT 制作了一个 exe 文件。但是当我想运行时，显示一条错误消息：

```
"Windows cannot verify the digital signature for this file. ..." 
```

我获得了**windows 8 RT 的开发者许可证**。有了这个许可证， **visual studio 2012**可以在我的表面上远程部署和运行 Metro 应用程序。

但我想使用**signtool.exe**使用此证书手动签署我的 exe 文件：

```
signtool.exe sign -s CertStoreName -n "subject name" C:\mytest.exe 
```

我的问题是我不知道我的开发人员许可证的**“CertStoreName”**和**“主题名称”**。我怎样才能得到这些名字。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-24T09:03:15.083

开发人员许可证仅允许您在 Windows RT 上部署和运行 Windows 应用商店应用程序，而此类应用程序仍在开发中。如果您正在构建商店应用程序，则不必担心自己签署二进制文件。应用商店在将应用包的所有内容分发给最终用户之前对其进行签名。

然而，桌面应用程序是另一回事。不支持在 Windows RT (ARM) 上构建桌面应用程序。

# php - 在 php 中返回值或条件

> ID：14018339
> 
> 赞同：-1
> 
> 时间：2012-12-24T07:19:40.027
> 
> 标签：php, return

我有两个将根据条件运行的功能。代码就像

```
$contact=($this->function() or $this->function1())

public function()
{
 some codes
return contact;
}

 public function1()
  {
 some codes
 return contact;
   } 
```

它在 $contact 中返回我 bool true 或 false。我想返回值。该怎么办？

如果我这样给

```
$contact=$this->function() or $this->function1() 
```

如果 function() 为假，它不会检查 function1()。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T07:25:11.167

由于您使用布尔运算符或，结果

```
$this->function() or $this->function1() 
```

是布尔值。在 PHP 5.3 中，您可以像这样使用三元运算符

```
$contact=$this->function() ?: $this->function1(); 
```

如果早期版本

```
if (!($contact=$this->function() )) $contact=$this->function1(); 
```

但是，一般来说，我认为您必须检查您的功能并更改其流程中的某些内容。或许必须在这两个函数中做出一个决定。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-24T07:25:33.227

您不能返回值并使用`OR`运算符
一种方法是设置一个变量并在函数中对其进行赋值，如下所示：

```
 $ret = "";
function ()
{

    $this->ret = "foo";
    return contact;
}

function1() {
    $this->ret = "Bar";
    return contact;
}

$a = function() or function1();
unset($a);
$newRet = $ret; 
```

有关详细信息，请参见此处：http:
[//php.net/manual/en/language.operators.logical.php](http://php.net/manual/en/language.operators.logical.php)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-24T07:22:52.117

如果你想检查两个函数，不管然后测试两者并将它们的结果保存在单独的变量中，然后在你的 if 比较中使用这两个变量

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-24T07:52:01.410

它应该是

```
$contact = $this->A() or $contact = $this->B(); 
```

或者

```
$contact = $this->A() ?: $this->B(); 
```

# wordpress - 使用 htaccess 将所有包含 /content/ 的 url 重定向到主页

> ID：14018343
> 
> 赞同：-1
> 
> 时间：2012-12-24T07:20:21.580
> 
> 标签：wordpress, .htaccess, mod-rewrite, url-rewriting, lamp

我想将所有具有 www.example.com/content/xyz... 的网址重定向到主页 www.example.com

这里的条件是检查，如果请求包含 /content/ 那么我只需要将它重定向到根级域。

该站点托管在 Linux 服务器上，并使用 wordpress 构建。

如何使用 htaccess 重写规则来做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T07:30:12.567

哟可以试试这个：

```
RewriteEngine On
RewriteBase /
RewriteCond %{REQUEST_URI} ^.*/content.*$
RewriteRule .*  /     [L,R=301,DPI] 
```

# java - 如何克隆一堆整数？

> ID：14018346
> 
> 赞同：-1
> 
> 时间：2012-12-24T07:20:28.243
> 
> 标签：java, integer, stack, clone

这个看似极其简单的问题让我困惑了好几个小时。我正在尝试克隆一堆整数对象。我试过了

```
Stack<Integer> newStack = (Stack<Integer>)oldStack.clone(); 
```

然而，这给了我一个错误说`clone() has protected access in java.lang.Object`

我最好的猜测是因为 Integer 没有实现`clone()`，所以我得到了那个错误。那么我应该如何克隆一堆整数呢？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-24T07:31:38.720

你确定你使用的是 java.util.Stack 吗？它从 Vector 继承克隆

```
 public synchronized Object clone() {... 
```

我跑了这个测试

```
Stack<Integer> st = new Stack<Integer>();
st.push(1);
Stack<Integer> clone = (Stack<Integer>)st.clone();
System.out.println(clone); 
```

它给

[1]

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-24T07:24:09.653

您不必克隆 Integer s，因为 Integer 是不可变的。

您可以通过`new Stack().addAll(otherstack)`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-24T07:26:11.867

根据[Java API 文档](http://docs.oracle.com/javase/6/docs/api/java/util/Stack.html)，Stack 确实实现了可克隆。您确定 oldStack 确实是 Stack 类型吗？

**编辑**

我已经使用以下代码对此进行了测试，但没有出现任何异常：

```
 Stack<Integer> stack = new Stack<Integer>();
    stack.push(1);
    stack.push(2);
    stack.push(3);
    stack.push(4);

    Stack<Integer> s2 = (Stack<Integer>) stack.clone();

    while (!s2.empty()) {
        System.out.println(s2.pop());
    } 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-24T07:47:37.257

不知何故，某个地方隐藏了另一个 Stack 类。不知道为什么，但是使用导入 Stack

```
import java.util.Stack 
```

而不是依靠

```
import java.util.* 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2016-06-17T04:34:45.957

这有效：

```
Stack<Node> st1=(Stack<Node>) st2.clone(); 
```

# android - 无法在 TabHost 的选项卡中显示 ListView

> ID：14018347
> 
> 赞同：0
> 
> 时间：2012-12-24T07:20:32.323
> 
> 标签：android, tabs, android-tabhost

我创建了以下应用程序。我想在 TabHost 的选项卡中显示一个 ListView。运行应用程序后，我没有在 Tab 上找到任何 ListItem。我重写了适配器并实现了getView，然后是setAdapter。

```
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    myTabhost=this.getTabHost();
    LayoutInflater.from(this).inflate(R.layout.activity_main,myTabhost.getTabContentView(),true);
    myTabhost.addTab(myTabhost.newTabSpec("tab1").setIndicator("tab1",getResources().getDrawable(R.drawable.calendar)).setContent(R.id.tab1));
    myTabhost.addTab(myTabhost.newTabSpec("tab2").setIndicator("tab2",getResources().getDrawable(R.drawable.ic_launcher)).setContent(R.id.tab2));
    myTabhost.addTab(myTabhost.newTabSpec("tab3").setIndicator("tab3").setContent(R.id.tab3));
    listView1=(ListView) findViewById(R.id.listView1);

    data=new ArrayList<Map<String,Object>>();
    Map<String,Object> item;
    item=new HashMap<String,Object>();
    item.put("date", "2012-12-25");
    item.put("item","Christmas");
    data.add(item);

    item.put("date", "2013-1-1");
    item.put("item", "new year");
    data.add(item);

    SimpleAdapter adapter=new SimpleAdapter(this, data, android.R.layout.simple_expandable_list_item_2, new String[]{"date","item"}, new int[]{R.id.textView1,R.id.textView2});
    listView1.setAdapter(adapter);
} 
```

你能帮我找出问题所在吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T07:24:35.503

每次你必须使用新的哈希映射对象在哈希映射的帮助下将数据存储在数组列表中

```
 Map<String,Object> item = new HashMap<String,Object>();
      item.put("date", "2012-12-25");
      item.put("item","Christmas");
      data.add(item);

 Map<String,Object> item1 = new HashMap<String,Object>();
      item1.put("date", "2013-1-1");
      item1.put("item", "new year");
      data.add(item1); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-24T09:00:46.660

TabActivity 类在 API 级别 13 中已弃用。新应用程序应使用 Fragments 而不是此类。

# mysql - MySql Avg 运行时数据以限制行数

> ID：14018350
> 
> 赞同：0
> 
> 时间：2012-12-24T07:21:07.400
> 
> 标签：mysql

我使用的工具如果包含超过 1000 个数据点则无法呈现（生成图表）信息，因此假设如果我的 mysql 查询返回大约 5000 个数据点，那么我必须通过将这 5000 个数据点转换为 1000 个点所有值的平均值。这个转化率5000/1000 = 5，我得在运行时决定。有什么方法可以根据数据大小和列名对数据进行分组/平均，而不仅仅是列名。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-28T11:55:02.847

**使用自增字段排序**

user113215 所说的 ( `SELECT AVG(data) FROM ... GROUP BY rownum % 1000`) 是有道理的，除了如果有 5050 行，则将有 50 行，每行 6 行的平均值，而其他 950 行将是每行 5 行的平均值。你想如何处理这个案子？而是将它们均匀地分成 5050/6 行？如果是这样，我建议您运行 2 个查询，第一个查询类似于：

```
SELECT SUM(*)/(CEIL(SUM(*))/1000) FROM YourTable 
```

您存储在变量中的输出以用于在下一个查询中进行修改。

一种替代方法`% 1000`是 just `/ 5`，这样您就可以取而代之平均连续行。

您通常应该有一个表的自动增量主键，这将使该解决方案足够简单。

**自定义排序**

我认为[这](https://stackoverflow.com/questions/6651688/get-the-average-of-groups-of-n-rows-with-mysql)正是你想要的。

# iphone - 第三方框架中的内存泄漏

> ID：14018357
> 
> 赞同：0
> 
> 时间：2012-12-24T07:22:05.147
> 
> 标签：iphone, objective-c, sharekit

我在我的应用程序中使用 sharekit，在构建和分析应用程序时显示了一些潜在的内存泄漏和 sharekit 错误。

我用谷歌搜索但无法得到准确的答案。我知道如何解决一些问题，但我确定我是否应该这样做。

请建议我该怎么做。我绝对不希望我的第一个申请被苹果拒绝。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T07:47:08.483

Apple 不会因为您的应用程序存在内存泄漏而拒绝您的应用程序（除非它们非常糟糕以至于几乎会导致崩溃）。App Store 上有很多泄露的应用程序。

Sharekit 是一个开源项目，如果您有修复，那么我相信该项目会很高兴收到它们。

# arrays - 将数组作为项目推送到另一个数组 - 不创建多维数组

> ID：14018358
> 
> 赞同：6
> 
> 时间：2012-12-24T07:22:14.317
> 
> 标签：arrays, perl

我有一个数组，`@allinfogoals`我想让它成为一个多维数组。为了实现这一点，我试图将数组作为一个项目推送，如下所示：

```
push @allinfogoals, ($tempcomponents[0], $tempcomponents[1], $singlehometeam); 
```

数组括号中的那些项目都是我事先拥有的所有单独的字符串。但是，如果我引用`$allinfogoals[0]`，我会得到 的值，`$tempcomponents[0]`如果我尝试`$allinfogoals[0][0]`，我会得到：

```
Can't use string ("val of $tempcomponents[0]") as an ARRAY ref while "strict refs" in use 
```

如何添加这些数组以`@allinfogoals`使其成为多维数组？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-12-24T08:02:39.963

首先，中的括号

```
push @allinfogoals, ($tempcomponents[0], $tempcomponents[1], $singlehometeam); 
```

什么都不做。这只是一种奇怪的写作方式

```
push(@allinfogoals, $tempcomponents[0], $tempcomponents[1], $singlehometeam); 
```

括号改变优先级；他们不创建列表或数组。

* * *

现在回答你的问题。Perl 中没有二维数组这样的东西，数组只能保存标量。解决方案是创建一个对其他数组的引用数组。这就是为什么

```
$allinfogoals[0][0] 
```

简称

```
$allinfogoals[0]->[0]
   aka
${ $allinfogoals[0] }[0] 
```

因此，您需要将值存储在一个数组中，并将对该数组的引用放在顶级数组中。

```
my @tmp = ( @tempcomponents[0,1], $singlehometeam );
push @allinfogoals, \@tmp; 
```

但是 Perl 提供了一个操作符，可以为您简化这些操作。

```
push @allinfogoals, [ @tempcomponents[0,1], $singlehometeam ]; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-24T07:29:04.887

不完全确定为什么会这样，但确实......

```
push (@{$allinfogoals[$i]}, ($tempcomponents[0], $tempcomponents[1], $singlehometeam)); 
```

需要创建一个迭代器`$i`来执行此操作。

* * *

根据@ikegami 的说法，原因如下。

只有在`$allinfogoals[$i]`没有定义的情况下才有效，当它是一种奇怪的写作方式时

```
@{$allinfogoals[$i]} = ( $tempcomponents[0], $tempcomponents[1], $singlehometeam ); 
```

它利用 autovivification 来做相当于

```
$allinfogoals[$i] = [ $tempcomponents[0], $tempcomponents[1], $singlehometeam ]; 
```

这可以在不`$i`使用的情况下实现

```
push @allinfogoals, [ $tempcomponents[0], $tempcomponents[1], $singlehometeam ]; 
```

我的回答中详细解释了最后一个片段。

# delphi - SysUtils.LongDayNames 未声明的标识符

> ID：14018365
> 
> 赞同：0
> 
> 时间：2012-12-24T07:22:49.867
> 
> 标签：delphi, delphi-xe3

我对delphi非常陌生，我尝试了以下代码

```
procedure TForm1.Button1Click(Sender: TObject);
var
  myDate : TDateTime;
  day    : string;

begin
  myDate := EncodeDate(2002, 12, 31);

  day := LongDayNames[DayOfWeek(myDate)];

  ShowMessage('Christmas day 2002 is on a '+day);
end; 
```

我已`System.SysUtils`在`Uses`部分中声明，但我仍然收到错误未声明的标识符。

我正在使用德尔福 XE3 17.0

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-24T07:43:39.467

在 XE2 LongDayNames 移动到 TFormatSettings。 [http://docwiki.embarcadero.com/Libraries/XE2/en/System.SysUtils.TFormatSettings](http://docwiki.embarcadero.com/Libraries/XE2/en/System.SysUtils.TFormatSettings)。

所以你可以使用：

```
day := FormatSettings.LongDayNames[DayOfWeek(myDate)]; 
```

FormatSettings 是一个非线程安全的全局变量。

如何使用它，你可以[在这里看到](http://www.delphibasics.co.uk/RTL.asp?Name=TFormatSettings)

# java - 那个旧的 AVD 在哪里？我应该选择什么“屏幕”？

> ID：14018367
> 
> 赞同：1
> 
> 时间：2012-12-24T07:22:52.507
> 
> 标签：java, android, eclipse

首先，您必须考虑到我没有 Android 手机，而且我是 Android 开发的新手。

请看一下附图。

我曾经使用与此不同的 AVD 在 android 中开发一些基本的东西。它有按钮作为一个单独的面板。这个 AVD 是在 eclipse 更新并重新安装 android 2.2 之后出现的。

我有2个问题。

1.  查看我的申请结果后，我无法返回。也没有按钮。

2.  在 Eclipse 中，我可以看到提供了很多“屏幕”。有些是 Nexus7、Galaxy Nexus、Nexus S 等。以前我没有使用这些东西。我应该使用哪个屏幕？无论如何，有些屏幕非常小。如果我使用“Galaxy Nexus”，这是否意味着我的应用仅适用于“Galaxy”手机？我相信以前的 Android 应用程序是以适合所有 Android 设备的方式开发的！

请帮忙

![在此处输入图像描述](../Images/43637e1bc088b81f66f08d85cc757d97.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-24T08:14:24.417

对于返回，您可以使用退出按钮。如果您选择 nexus，这并不意味着您正在为 nexus 7 开发应用程序。如果您选择 nexus，您可以查看您在 nexus 中看到的应用程序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-24T07:24:51.710

> 查看我的申请结果后，我无法返回。也没有按钮。

您可以按键盘的*Escape*按钮返回。

> 在 Eclipse 中，我可以看到提供了很多“屏幕”。有些是 Nexus7、Galaxy Nexus、Nexus S 等。以前我没有使用这些东西。我应该使用哪个屏幕？无论如何，有些屏幕非常小。如果我使用“Galaxy Nexus”，这是否意味着我的应用仅适用于“Galaxy”手机？我相信以前的 Android 应用程序是以适合所有 Android 设备的方式开发的！

是的，现在的设备具有各种分辨率和尺寸，目标（*模拟器用于测试*）无论它是什么，但你需要创建你的艺术作品，使其支持所有屏幕，并且做同样的事情你可以看到[Application-skeleton -支持多屏](https://stackoverflow.com/questions/12242111/application-skeleton-to-support-multiple-screen)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-24T07:25:26.780

如果您支持清单文件中的所有屏幕，那么您的应用程序适用于所有手机，但您必须使用不同的图像（ldpi、mdpi、hdpi、xhdpi）并动态设置一些布局以在不同的屏幕中使用。

要返回，您可以按退出按钮，也可以按模拟器中的返回按钮。

```
<supports-screens  android:smallScreens="true"/>
  <supports-screens  android:normalScreens="true"/>
  <supports-screens android:largeScreens="true"/>
  <supports-screens android:anyDensity="true"/>
  <supports-screens android:resizeable="true"
  android:anyDensity="true" /> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-24T07:27:26.760

您选择的屏幕尺寸仅用于您的测试目的。您应该在各种设备尺寸和分辨率上进行测试。您在测试时选择的设备只是一个示例，您的应用程序将在您未在清单中限制的任何设备上运行。

我强烈建议为您想要定位的每个主要设备大小/分辨率创建一个虚拟机，并查看您的应用程序在每个设备上的行为方式。

至于您的按钮，在创建这些虚拟机时可以选择包含外部硬件按钮；总是打开这个给你自己的按钮来点击虚拟机。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-24T07:30:49.367

> 查看我的申请结果后，我无法返回。也没有按钮。

只需使用 Left Ctrl + F11 更改其模式，这样您就可以在当前模拟器中看到一个后退按钮。由于您的模拟器不适合您的屏幕，因此该按钮被隐藏。

> 在 Eclipse 中，我可以看到提供了很多“屏幕”。有些是 Nexus7、Galaxy Nexus、Nexus S 等。以前我没有使用这些东西。我应该使用哪个屏幕？无论如何，有些屏幕非常小。如果我使用“Galaxy Nexus”，这是否意味着我的应用仅适用于“Galaxy”手机？我相信以前的 Android 应用程序是以适合所有 Android 设备的方式开发的！

不，您的应用程序仍将支持您在清单文件中指定的所有屏幕。如果您对小型模拟器感到满意，请不要在创建模拟器时选择 Nexus。选择其他目标和设备。例如，

> 设备：3.2" QVGA
> 
> 目标：Android 4.0

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-12-24T07:34:54.753

![在此处输入图像描述](../Images/f376e8669a4a181f54649ea5c0451b38.png)

使用 android 虚拟设备管理器并编辑您的模拟器

在那检查硬件键盘存在复选框，然后重新启动你的模拟器

# google-nativeclient - 如何使用原生客户端工具链？

> ID：14018369
> 
> 赞同：0
> 
> 时间：2012-12-24T07:23:26.390
> 
> 标签：google-nativeclient

我在自己的 Linux 操作系统中编译了本机客户端工具链。

在本机客户端源代码中，我发现使用`make test_hello_world_nexe`可以构建一个 hello world 程序并运行它。据我了解，它必须使用下载的工具链而不是您自己的工具链来编译，因为它不需要提供工具链的位置。

那么如何使用自己编译的工具链，将自己的应用程序构建成.nexe呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T02:49:47.740

终于想通了如何使用工具链。如果您使用的是 NaCl SDK，以下是[Building Native Client Modules](https://developers.google.com/native-client/devguide/devcycle/building#compiling)在 Windows 上的示例：

```
<NACL_SDK_ROOT>/toolchain/win_x86_newlib/bin/i686-nacl-gcc hello_world.c -o hello_world_x86_32.nexe -m32 -g -O0 -lppapi 
```

`<NACL_SDK_ROOT>`表示您正在使用的包的顶级目录的路径，例如`<location-where-you-installed-the-SDK>/pepper_23`.

如果您没有使用 NaCl SDK，那么您可能需要手动编译和链接 ppapi lib。在 Native Client 源代码中，有一个工具可以帮助自动化上述所有操作：

```
python native_client/build/build_nexe.py -t "/path/to/toolchain/" --arch x86-32 --build newlib_nexe --root .. --name "hello.nexe" --objdir . "--compile_flags=-m32 -mtls-use-call <more-flags...>" "--link_flags=-m32 -O3 " "--source-list=hello.list" 
```

通过这个你可以得到一个`hello.nexe`编译好的。然后可以使用另一个工具来检查其输出：

```
python native_client/run.py -m32 hello.nexe 
```

请注意，如果您使用`Glibc`动态链接程序，那么您可能需要提供库路径，例如

```
python native_client/run.py -L/path/to/lib/ -m32 hello.nexe 
```

# php - 旺旺 | 如何隐藏网页下方的查询？

> ID：14018372
> 
> 赞同：0
> 
> 时间：2012-12-24T07:23:29.167
> 
> 标签：php, cakephp

我是 Wamp 和 php & mysql 的新手。在网页下方，我可以看到所有已执行的查询。我该如何隐藏这个？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-24T07:43:45.477

`app/config/core.php`如果您使用的是 Cakephp ，则可以控制调试信息。只需关闭调试模式，如下所示：

```
Configure::write('debug',0); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-24T07:40:33.480

您只需`echo $this->element('sql_dump');`在默认页面中注释以下代码`view/layouts/default.ctp`

# c# - C# - 获取函数返回的字符串以外的字符串

> ID：14018374
> 
> 赞同：1
> 
> 时间：2012-12-24T07:23:34.783
> 
> 标签：c#, c#-4.0, xdp-pdf

我有一个 pdf pdf 确实有 XFA 部分，因为标准 XFA 看起来像

```
 <?xml version="1.0" encoding="UTF-8" standalone="no"?>
 <xdp:xdp>
 <config>...</config>
 <template>...</template>
 <xfa:datasets> 
```

我需要将 XML 提取到文件中；我知道文件创建方法为

```
 StreamWriter sw;
        sw = System.IO.File.CreateText("C:\\xmlread.txt");
        sw.Close();
        System.Windows.Forms.MessageBox.Show("file created successfully"); 
```

但是，将 xml 部分放入此文件尚不清楚，我看到 XML 可以从 PDF 派生为

```
FileOutputStream os = new FileOutputStream(dest);
PdfReader reader = new PdfReader(src);
XfaForm xfa = new XfaForm(reader);
Document doc = xfa.getDomDocument();
Transformer tf = TransformerFactory.newInstance().newTransformer();
tf.setOutputProperty(OutputKeys.ENCODING, "UTF-8");
tf.setOutputProperty(OutputKeys.INDENT, "yes");
tf.transform(new DOMSource(doc), new StreamResult(os));
reader.close(); 
```

代替这个我用

```
 file = new org.pdfclown.files.File(fileName);
        org.pdfclown.documents.Document document = file.Document;
        org.pdfclown.documents.interaction.forms.Form form = document.Form; 
```

表单部分指定 Acrobat 字典是否存在的表单类型；请帮我在记事本中提取xml文件

# php - 检查 span 标签之间是否有 URL

> ID：14018378
> 
> 赞同：-1
> 
> 时间：2012-12-24T07:23:56.297
> 
> 标签：php, regex, string

我得到一个包含以下内容的 HTML 代码：

```
<span rel="url">example.com</span>
<span rel="url">example.net.pl [SOMETHING]</span>
<span rel="url">[SOMETHING]imjustanexample.com</span> [..] 
```

问题是，是否有办法从`span`标签之间获取“url”字符串。例如。它应该得到以下内容：`example.com`, `example.net.pl`（不带`[SOMETHING]`字符串）和`imjustanexample.com`.

我想我将不得不为此使用正则表达式。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T22:46:08.637

这*应该*有效：

```
$str = '<span rel="url">http://google.ca</span>';
$match = preg_match('#<span(.*)?>((http|https|ftp)://(\S*?\.\S*?))(\s|\;|\)|\]|\[|\{|\}|,|"|\'|:|\<|$|\.\s)</span>#i', $str, $matches);
if($match)
    var_dump($matches);
else
    echo 'Nope<br />'; 
```

正则表达式来自：[https ://stackoverflow.com/a/206087/1533203](https://stackoverflow.com/a/206087/1533203)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-24T07:39:03.800

在javascript中尝试这个正则表达式，

```
/((http|https):\/\/(\w+:{0,1}\w*@)?(\S+)|)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?/ 
```

验证 span 标签中的文本

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-24T09:30:49.127

我会这样（无论是在正则表达式还是只是 PHP 代码，就像你喜欢的那样）：

1.  找到下一个“”
2.  从它的末端取出所有东西，直到下一个（但不包括）空格`或低于符号`<`（以先到者为准）。`
`*   重复直到不再匹配。`

 `完毕。如果正则表达式对您来说太复杂，您还可以使用字符串函数[http://php.net/strings](http://php.net/strings)。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-12-24T07:38:15.730

查看简单的 HTML Dom 解析器（[此处](http://simplehtmldom.sourceforge.net/)）。

有了它，您可以简单地访问 DOM 树上的元素。

您的问题可以通过以下方式解决：

```
 $html->find("span[rel=url]"); 
```

然后你可以简单地在所有元素上使用一个循环和一些适合你需要的正则表达式。`

# javascript - jQuery 显示隐藏的 li 元素，然后隐藏可见的 li 元素

> ID：14018381
> 
> 赞同：0
> 
> 时间：2012-12-24T07:24:00.667
> 
> 标签：javascript, jquery

下面的 jQuery 代码调用`ul`元素，找到元素中的前**三个** `li`列表项并隐藏其余`li`项。然后，它会附加一个*显示“显示更多...”*`li`的元素， 并在单击时显示先前隐藏的列表项。

 *（问题底部的jsFiddle）

```
$('ul')
  .find('li:gt(2)')
  .hide()
  .end()
  .append(
    $('<li>Show more...</li>').click( function(){
      $(this).siblings(':hidden').fadeIn(500);
   })
); 
```

很简单。现在，除了在用户单击*“显示更多...”*时显示隐藏的列表项之外，我还需要它来隐藏最初可见的前**三个**列表项。通过插图：

* * *

## *代码当前生成的内容：*

```
 - List Item #1
 - List Item #2
 - List Item #3
 - Show more... 
```

（点击）

```
 - List Item #1
 - List Item #2
 - List Item #3
 - List Item #4
 - List Item #5
 - Show more... 
```

* * *

## *需要发生的事情：*

```
 - List Item #1
 - List Item #2
 - List Item #3
 - Show more... 
```

（点击）

```
 - List Item #4
 - List Item #5
 - Show more... 
```

* * *

*出于可用性目的，如果再次单击“显示更多...”*时，前三个列表项再次可见并且其余列表元素被隐藏，我也会很好。

**jsFiddle：http: [//jsfiddle.net/g9L9R/](http://jsfiddle.net/g9L9R/)**

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-24T07:37:32.787

看到这个：http: [//jsfiddle.net/g9L9R/7/](http://jsfiddle.net/g9L9R/7/)

```
$('ul')
.find('li:gt(2)')
.hide()
.end()
.append(
  $('<li>Show more...</li>').click( function(){
  $(this).siblings().toggle(500);
})
);​ 
```

你会在这里得到一个很好的切换效果......

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-24T07:27:32.263

```
$("li").each( function() {
if($(this).is(":visible")) {
$(this).hide();
}
else {
$(this).show();
}
}); 
```

并单击按钮

```
$("button").click( function() {
$("li").each( function() {
if($(this).is(":visible")) {
$(this).hide();
}
else {
$(this).show();
}
});
}); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-24T07:34:08.763

试试这个：

```
$('ul')
  .find('li:gt(2)')
  .hide()
  .end()
  .append(
    $('<li>Show more...</li>').click( function(){
      $(this).siblings(':visible').fadeOut(500);
        $(this).siblings(':hidden').fadeIn(500);
   })
); 
```

jsfiddle：http: [//jsfiddle.net/g9L9R/4/](http://jsfiddle.net/g9L9R/4/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-24T08:08:46.900

独立于列表长度的解决方案，隐藏`more`结尾

```
var list = $('ul'),
    start = 0,
    items = list.find('li').slice(0, 3).show().end(),
    more = $('<li>Show more...</li>').click(function() {
        start = start + 3
        var newItems = items.slice(start, start + 3)
        items.filter(':visible').add(newItems).toggle(500);
        if (newItems.length < 3) {
            more.hide()
        }
    }).show()
    list.append(more); 
```

演示：http: [//jsfiddle.net/5WgYK/1/](http://jsfiddle.net/5WgYK/1/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-24T07:37:06.540

用于`visible`隐藏其余部分：

```
 $('ul')
  .find('li:gt(2)')
  .visible('hide'); 
```

[在这里](http://jsfiddle.net/g9L9R/6/)看到jsfiddle 。*

# mqtt - 在 Mosquitto 中读取 .db 文件

> ID：14018386
> 
> 赞同：7
> 
> 时间：2012-12-24T07:24:35.613
> 
> 标签：mqtt, mosquitto

我正在使用 Mosquitto 项目 (http://mosquitto.org)，这是我的 mosquitto.conf

> 持久性文件 mosquitto.db
> 
> persistence_location C:/var/lib/mosquitto/

运行后有mosquitto.db，但是打不开。我正在尝试使用 Microsoft Excel sqlitebrowser_200_b1_win 打开，但它不起作用。请帮我。提前致谢

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-12-24T17:22:56.530

我刚刚在 mosquitto 答案跟踪器上回答了同样的问题：

[https://answers.launchpad.net/mosquitto/+question/217523](https://answers.launchpad.net/mosquitto/+question/217523)

> mosquitto.db 文件包含有关客户端订阅和保留消息的内部持久性信息。它不适合在 mosquitto 之外使用。不能保证它是最新的信息。
> 
> 话虽如此，如果您有兴趣查看该文件，那么要查看的源文件是 src/persist.c。还有一个程序可以以更易读的方式打印文件内容 - 你应该编译 src/db_dump/db_dump.c。

mosquitto.db 是内部文件，与sql无关。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2021-05-30T20:33:27.597

要读取 mosquitto.db 文件，请执行以下步骤

```
git clone https://github.com/eclipse/mosquitto
cd /mosquitto/apps/db_dump
make
sudo ./mosquitto_db_dump /var/lib/mosquitto/mosquitto.db 
```

然后你会得到像

```
DB_CHUNK_SUB:
        Length: 54
        Client ID: <Your Client ID>
        Topic: <topic>
        QoS: 0
        Subscription ID: 0
        Options: 0x00 
```

或者

```
DB_CHUNK_MSG_STORE:
        Length: 285
        Store ID: 28935676
        Source Port: 1883
        Source MID: 4027
        Topic: <topic>
        QoS: 1
        Retain: 0
        Payload Length: 190
        Expiry Time: 0
        Payload: <Payload> 
```

# mysql - MySQL：使用连接表将行拆分为多行？

> ID：14018391
> 
> 赞同：1
> 
> 时间：2012-12-24T07:24:52.010
> 
> 标签：mysql, sql

我有一个具有以下结构的现有表

```
+-------------+-------+-------+-------+
| employee_id | val_1 | val_2 | val_3 | ...
+-------------+-------+-------+-------+
|         123 |     A |     B |     C | 
```

我想将这个单个表更改为 2 个表 - 一个包含单独行中的值，另一个包含为此的连接表。例如，上面将变成这样：

```
+-------------+--------+      +----+-------+
| employee_id | val_id |      | id | value |
+-------------+--------+      +----+-------+
|         123 |      1 |      |  1 |     A |
+-------------+--------+      +----+-------+
|         123 |      2 |      |  2 |     B |
+-------------+--------+      +----+-------+
|         123 |      3 |      |  3 |     C |
+-------------+--------+      +----+-------+ 
```

将现有表转换为这两个新表的最佳 SQL 是什么？我可以很容易地创建值表，但我不确定如何同时创建连接表。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T07:41:09.467

像这样的东西（仅限伪代码，抱歉）：

```
For each row in (SELECT employee_id, val_1, val_2, val_3 FROM existing_table)
{
   for each val in (row.Values)
   {
     INSERT INTO new_values (val)
     val_id = SELECT LAST_INSERT_ID();
     INSERT INTO new_employees (employee_id, val_id);
  }
} 
```

可能有一种基于集合的方式来避免循环......但对不起，我不知道它像你一样，我不知道如何将值表的身份返回到父级员工表。

而且，虽然[游标](http://dev.mysql.com/doc/refman/5.0/en/cursors.html)通常不受欢迎，但这种一次性操作正是它们的设计目的（即，我不建议将游标用于常规事务或报告处理，而是用于数据的重新结构...... .. 为什么不？）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-24T09:14:17.963

所以这就是我最终写的东西。正如程序名称所暗示的那样，我期待有一种更直接的方法来做到这一点！

```
CREATE PROCEDURE iWasHopingItWouldBeSimpler()
BEGIN
   DECLARE loop_done BOOLEAN DEFAULT 0;

   DECLARE emp_id BIGINT(20);
   DECLARE val1 DECIMAL(19,2);
   DECLARE val2 DECIMAL(19,2);
   DECLARE val3 DECIMAL(19,2);

   DECLARE emp CURSOR
   FOR
   SELECT employee_id, val1, val2, val3 FROM existing;   

   -- Declare continue handler
   DECLARE CONTINUE HANDLER FOR SQLSTATE '02000' SET loop_done=1;

   OPEN emp;

   -- Loop through all rows
   REPEAT
      FETCH emp INTO emp_id, val1, val2, val3;

      INSERT INTO new_values (value) VALUES(val1);
      INSERT INTO new_join (employee_id, values_id) VALUES(emp_id, LAST_INSERT_ID());

      INSERT INTO new_values (value) VALUES(val2);
      INSERT INTO new_join (employee_id, values_id) VALUES(emp_id, LAST_INSERT_ID());

      INSERT INTO new_values (value) VALUES(val3);
      INSERT INTO new_join (employee_id, values_id) VALUES(emp_id, LAST_INSERT_ID());

   -- End of loop
   UNTIL loop_done END REPEAT;

   CLOSE emp;
   SET loop_done=0;
END; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-24T07:40:56.243

第一个结果

```
`INSERT INTO new_val
SELECT  emp_id, REPLACE(UPPER(column_name), 'VAL_', '') FROM   
information_schema.COLUMNS ,
employee
WHERE TABLE_NAME = 'employee' AND TABLE_SCHEMA = 'myschema' AND column_name LIKE 'VAL_%'`; 
```

使用第一个结果，填充查询并使用它插入新表；可能需要进行微调。未测试
`SELECT CONCAT('select ', new_val.number, ', VAL_', new_val.number, ' FROM employee, new_val WHERE new_val.emp_id = employee.emp_id and new_val.number = ', val.number, ' union all' ) FROM val ;`

# android - Android SQLite 查询 - 获取最新的 10 条记录

> ID：14018394
> 
> 赞同：26
> 
> 时间：2012-12-24T07:25:22.977
> 
> 标签：android, sql, sqlite, android-sqlite

我在我的 Android 应用程序中保存了一个数据库，并且想要检索插入到数据库中的最后 10 条消息。

当我使用：

```
Select * from tblmessage DESC limit 10; 
```

它给了我 10 条消息，但来自**TOP**。但我想要**最后**10 条消息。可能吗？

假设整个表数据是 -

```
1,2,3,4,5....30 
```

我写了查询`select * from tblmessage where timestamp desc limit 10`

表明`30,29,28...21`

但我希望序列为 -`21,22,23...30`

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2012-12-24T08:17:08.393

将 DESC 更改为 ASC，您将获得所需的记录，但如果您需要对它们进行排序，那么您将需要反转它们进入的顺序。您可以在自己的代码中执行此操作，也可以简单地扩展查询，例如所以：

```
select * from (
    select *
    from tblmessage
    order by sortfield ASC
    limit 10
) order by sortfield DESC; 
```

您确实应该始终指定 order by 子句，而不仅仅是 ASC 或 DESC。

* * *

## 回答 #2

> 赞同：29
> 
> 时间：2015-03-04T17:04:52.690

在大型数据库上，该`ORDER BY DESC`语句确实可能会减慢系统速度，例如树莓派。一个很好的避免方法`ORDER BY`是`OFFSET`命令。您甚至可以保留存储的订单：

```
SELECT * FROM mytable LIMIT 10 OFFSET (SELECT COUNT(*) FROM mytable)-10; 
```

见：[http ://www.sqlite.org/lang_select.html](http://www.sqlite.org/lang_select.html)

通过以下方式查看您的表现：

```
.timer ON 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2015-07-19T14:21:16.563

稍微改进的答案：

```
select * from (select * from tblmessage order by sortfield DESC limit 10) order by sortfield ASC; 
```

Michael Dillon 在[他的回答](https://stackoverflow.com/a/14018868/717274)中提出了正确的想法，但该示例给出了前几行，倒序：

```
select * ... (select * ... ASC limit 10) ... DESC 
```

他想要最后一个，应该是：

```
select * ... (select * ... DESC limit 10) ... ASC 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-24T07:39:50.783

尝试这个，

```
SQLiteDatabase database = getReadableDatabase();
Cursor c=database.rawQuery("sql Query", null);
if(c.moveToFirst) {
    int curSize=c.getCount()  // return no of rows
    if(curSize>10) {
       int lastTenValue=curSize -10;
       for(int i=0;i<lastTenValue;i++){
          c.moveToNext();
       }
    } else {
       c.moveToFirst();
    }
} 
```

然后检索最后 10 个数据。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2020-10-16T10:19:51.503

```
 "SELECT *  FROM( SELECT *  FROM " + tablename + whereClause + " ORDER BY timestamp DESC LIMIT 10)  ORDER BY timestamp ASC"; 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2015-09-15T16:04:39.520

如果您的表包含具有主键自动增量的列（例如某些“row_id”），那么您只需要按此列的 DESC 顺序进行单选

原始请求看起来像

```
select * from table_name order by row_id DESC limit 10 
```

Android实现是

```
private Cursor queryLastEvents() {
    return getDatabase().query("table_name", null, null, null, null, null, "row_id DESC", "10");
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-12-24T08:24:34.180

在您的查询中，`DESC`被解释为表别名。

正如 ρяσѕρєя K 所述，为了能够指定排序方向，您需要首先使用`ORDER BY`子句进行排序。

要排序的列应该是一个时间戳，如果你有一个，或者像表的主键这样的自动递增列。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2017-08-12T09:03:09.760

```
select * from
(select * from table_name order by yourfield ASC limit 10)
order by yourfield DESC; 
```

您没有比这更好的解决方案了。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2017-09-03T17:40:05.907

```
cursor.moveToLast();
while (cursor.moveToPrevious()){
       //do something
} 
```

**使用相同的查询：** select * from tblmessage where timestamp desc limit 10

# java - Apache Tiles 渲染

> ID：14018396
> 
> 赞同：0
> 
> 时间：2012-12-24T07:25:28.353
> 
> 标签：java, spring, spring-mvc, tiles

我是 Apache 瓦片的新手，我想了解 Apache 瓦片是如何呈现的？

每个图块是否并行渲染，是否有让它并行渲染。

使用 apache 瓦片也有任何性能限制吗？我打算与 spring mvc 框架一起使用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T12:36:57.290

您询问：

> 每个图块是否并行渲染

瓦片使用单个线程来渲染瓦片。

> 反正有没有让它并行渲染？

除了您尝试自己实现并将此功能添加到图块中之外，我不知道任何内容。

> 使用 apache 瓦片也有任何性能限制吗？

不，Tiles 与 Spring MVC 结合几乎与没有 Tiles 的 Spring MVC 一样快。

# javascript - 无法从主干发布到表达

> ID：14018403
> 
> 赞同：1
> 
> 时间：2012-12-24T07:25:52.147
> 
> 标签：javascript, node.js, backbone.js, express

这是我正在处理的视图。这是一个简单的注册表格。它从一组输入标签中捕获数据，并将其发布到服务器。然而，POST 数据似乎并没有发送到服务器。

```
define(['text!templates/register.html'], function(registerTemplate){
    var registerView = Backbone.View.extend({
        el: $('#content'),

        events: {
            "submit form" : "register"
        },

        register: function() {

            var postData = {
                firstname: $('input[name=firstname]').val(),
                lastname: $('input[name=lastname]').val(),
                email: $('input[name=email]').val(),
                password: $('input[name=password]').val()
            };

            $.post('/register', postData, function(data){
                console.log(data);
                }
            }).error(function(err){
                console.log(err);
            });

            return false;
        },

        render: function(){
            this.$el.html(registerTemplate);
        }
    });
        return registerView;
}); 
```

这是我的应用程序中的请求侦听器。记录时所有变量都显示“未定义”。

```
app.post('/register', function(req, res){
    var firstname = req.body.firstname,
        lastname  = req.body.lastname,
        email     = req.body.email,
        password  = req.body.password;

        console.log(email);
        console.log(firstname);
        console.log(lastname);
        console.log(password);

    if (email === null || password === null) {
        res.send(400);
    } else {
        Account.register(email, password, firstname, lastname);
        res.send(200);
    }
}); 
```

我可以看到我的应用程序中的侦听器在提交表单时被触发，但它没有收到我发送的 POST 数据。在浏览器控制台中，我得到的所有错误都是“POST htp://localhost:3000/register 500（内部服务器错误）”

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-24T20:17:41.260

这行得通。我在 req.param 中找到了数据。

```
app.post('/register', function(req, res){
    var firstname = req.param('firstname'),
        lastname  = req.param('lastname'),
        email     = req.param('email'),
        password  = req.param('password');

    if (email === null || password === null) {
        res.send(400);
    } else {
        Account.register(email, password, firstname, lastname);
        res.send(200);
    }
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-24T08:10:02.373

如果你熟悉http，你知道500是服务器响应客户端的状态，它告诉客户端在我处理你发布的数据时有问题。因此，请关注您的服务器端代码。大多数情况下，您的服务器代码中存在一些逻辑问题。

# java - 获取 ID 并显示详细信息

> ID：14018412
> 
> 赞同：-2
> 
> 时间：2012-12-24T07:27:03.273
> 
> 标签：java, file

我想检测身份证号码并显示详细信息。mt .txt 文件在这里：

当我使用扫描仪类获取 ID 号，并使用控制台窗口显示详细信息时，一切都很好而且很完美。但是当我使用 jtextfield 获取 id 并使用 jlable 显示详细信息时，程序只查找文件中的最后一条记录，而没有找到其他记录。

我的代码在这里：

```
 int idS=Integer.parsInt(JTextfield1.getText());
    File f=new File("C:\\SearchFile.txt");
    FileReader fr=new FileReader(f);
    BufferedReader br=new BufferedReader(fr);
    String s;

    while((s=br.readLine())!=null){
        String[] st=s.split(" ");
        String id=st[0];
        String name=st[1];
        String mark=st[2];

        if(id.equals(String.valueOf(idS))){

            JLable1.setText(id+" "+name+ " "+mark);
        }
    } 
```

请帮忙！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-24T07:32:19.323

也许您在从 File 读取的字符串周围有一些空格。通过假设 ID 不区分大小写来尝试 equalIgnoreCase()。

```
 id.trim().equalIgnorecase(String.valueOf(idS)); 
```

希望这会有所帮助。

# java - 不能绘制多个实例

> ID：14018415
> 
> 赞同：3
> 
> 时间：2012-12-24T07:27:17.807
> 
> 标签：java, swing, jframe, graphics2d

我正在尝试设置带有按钮的菜单系统；但是，只有一个按钮显示正确。

好吧，我发现了问题，我无法从一个类或其子类创建 Button 类的多个实例。如果我这样做，它不会正确创建第二个实例，然后它将缺少背景图像。这可能与我将 Button 类设为标准类的事实有关吗？

这是 Button 类的主要部分，我在其中取出了返回此类中事物值的 get 方法。

```
public class Button {
private int x, y;
private int width, height;
private Image sprite;
private data.ImageControl Image = new data.ImageControl();
private String text = "";

public Button() {
    sprite = Image.getImage("game/menu/btn.png");
}

public void setImage(String file) {
    sprite = Image.getImage(file);
}

public void draw(Graphics2D g) {
    g.drawImage(sprite, x, y, null);
    Font_LARGE font = new Font_LARGE();

    //Find text pos
    int stringX, stringY;
    int textWidth;
    textWidth = text.length() * 14;

    stringX = x + ((width / 2) - (textWidth / 2));
    stringY = y + ((height / 2) - 8);

    font.drawString(g, text, stringX, stringY);
} 
```

这是我从中获取图像的代码：

```
public Image getImage(String filename) {
    Image img;
    try {
        ImageIcon i = new ImageIcon(getClass().getResource("sprite/" + filename));
        img = i.getImage();
    } catch(Exception e) {
        e.printStackTrace();
        System.err.println("ERROR - Unable to load image at " + filename + " loading empty image.");
        ImageIcon i = new ImageIcon(getClass().getResource("sprite/Physix/noImage.png"));
        img = i.getImage();
    }

    return img;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-25T07:22:53.837

我现在通过在按钮类之外绘制按钮背景来解决问题。我仍然不知道为什么它不起作用，但是这样它就起作用了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-24T19:41:51.763

x 和 y 的位置是什么？

在我看来，您在另一个按钮之上绘制了一个按钮。

# android - 如何在android中访问web目录文件列表

> ID：14018418
> 
> 赞同：1
> 
> 时间：2012-12-24T07:27:39.007
> 
> 标签：android, listview

我想从 web 目录文件列表中显示 listview。如何在android中访问web目录文件列表。

例如： http: [//mp3.com/song/](http://selangorbn.fm/song/)

这是网络目录。

公共类 MainActivity 扩展 Activity {

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    // JSONObject json = JSONfunctions
    // .getJSONfromURL("http://selangorbn.fm/song/");
    // Log.d("TAG", "json" + json);

}

@Override
protected void onResume() {
    // TODO Auto-generated method stub
    super.onResume();
    new Getparse().execute();
}

private void parse() throws IOException {

    String line = null, response;

    URL url = new URL("http://selangorbn.fm/song/");
    HttpURLConnection conn = (HttpURLConnection) url.openConnection();
    BufferedReader rd = new BufferedReader(new InputStreamReader(
            conn.getInputStream()));
    while (rd.readLine() != null) {
        line += rd.readLine();
    }

    System.out.println(line);

}

public class Getparse extends AsyncTask<Void, Void, integer> {
    @Override
    protected void onPreExecute() {
        // TODO Auto-generated method stub
        super.onPreExecute();
    }

    @Override
    protected integer doInBackground(Void... params) {
        // TODO Auto-generated method stub
        try {
            parse();
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
        return null;
    }

    @Override
    protected void onPostExecute(integer result) {
        // TODO Auto-generated method stub
        super.onPostExecute(result);
    }

}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    getMenuInflater().inflate(R.menu.activity_main, menu);
    return true;
} 
```

} 获得空值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T07:52:51.857

这对您不起作用，因为您尝试在主应用程序线程上与 Internet 交谈。这样做会暂停应用程序，直到收到回复。因此Android有内部检查。您应该从代码中获取[主线程异常的网络。](http://developer.android.com/reference/android/os/NetworkOnMainThreadException.html)

您需要启动一个单独的[线程](http://developer.android.com/reference/java/lang/Thread.html)并从那里与服务器交谈。获得列表后，使用[runOnUiThread](http://developer.android.com/reference/android/app/Activity.html#runOnUiThread%28java.lang.Runnable%29)更新结果（您不能从网络线程中触摸任何 GUI 元素）。

仅当您可以从不合作的第三方服务器获得的所有信息时，解析 HTML 才是合理的。正如 kumar 建议的那样，如果可以，请使用 JSON 或 XML。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-04-12T06:24:36.690

```
try {
                    org.jsoup.nodes.Document doc = Jsoup.connect("https://test.com/appdata/0131").get();
                    doc.select("img").remove();
                    Elements links = doc.select("a");
                    List<String> listmainlinks = new ArrayList<>();
                    List<String> listweblinks = new ArrayList<>();
                    for (org.jsoup.nodes.Element link : links) {
                        String linkInnerH = link.html();
                        String linkHref = link.attr("href");
                        System.out.println("linkHref: "+ linkHref);
                        System.out.println("linkInnerH: "+ linkInnerH);
                        if(linkInnerH.equals("") ||linkInnerH.equals(" ")||linkInnerH.equals(null) || linkHref.contains("?C=N;O=D")|| linkHref.contains("?C=M;O=A")||linkHref.contains("?C=S;O=A") ||linkHref.contains("?C=D;O=A")){ }
                       else if(linkHref.contains("/"))
                        {
                            if(!linkInnerH.contains("Parent Directory"))
                            listmainlinks.add(linkHref);
                        }

                        else{

                                listweblinks.add("https://test.com/appdata/0131" + linkHref);

                        }

                        }
                    System.out.println("listmainlinks "+ listmainlinks);
                    System.out.println("listweblinks "+listweblinks);
                   /* Elements img = doc.getElementsByTag("img");

                    int counter = 0;

                    for (org.jsoup.nodes.Element el : img) {
                        // If alt is empty or null, add one to counter
                        if(el.attr("alt") == null || el.attr("alt").equals("")) {
                            counter++;
                        }
                        System.out.println("image tag: " + el.attr("src") + " Alt: " + el.attr("alt"));
                    }
                    System.out.println("Number of unset alt: " + counter);*/

                } catch (IOException e) {
                    e.printStackTrace();
                }

https://test.com/appdata/
I/System.out: listmainlinks [0216/, 0128/, 0131/]
I/System.out: listweblinks []
https://test.com/appdata/0131/
I/System.out: listmainlinks []
I/System.out: listweblinks [https://test.com/appdata/0131/logo.png] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-01T19:09:07.417

使用 JSOUP，您可以列出远程目录中的所有文件。但是我面临的一个问题是，如果该目录中有主页（例如：index.html），那么它就不会超出该文件的范围。这是一个缺点。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-09-22T15:34:56.970

您可以使用 jsoup 获取链接到文件夹的 href 标签及其名称

```
Document doc = Jsoup.connect(urltod).timeout(0).get();
                     doc.select("img").remove();
                     Elements links = doc.select("a");
                     List<String> listmainlinks = new ArrayList<>();
                     List<String> listnumberslinks = new ArrayList<>();
                     List<String> listweblinks = new ArrayList<>();
                    for (Element link : links) {
//                       String linkOuterH = link.outerHtml();  //allhreaf incl name
                        String linkInnerH = link.html(); // foldername
                         String linkHref = link.attr("href");  //folderlink
//                      System.out.println("linkHref "+linkInnerH );
                        if(linkInnerH.equals("") ||linkInnerH.equals(" ")||linkInnerH.equals(null) ){ }
                        else{ 
                            if(linkInnerH.contains("size=\"2\"")){
                                String[] afterfonttagarray =linkInnerH.split("\">");
                                String afterfonttag = afterfonttagarray[1];
                                String[] beforefonttagarray =afterfonttag.split("</font>");
                                String beforefonttag = beforefonttagarray[0];
                                listmainlinks.add(beforefonttag);
                                listweblinks.add("http://www.abc.com/audio/"+linkHref);

                        } 
                    }

                    System.out.println("listmainlinks "+ listmainlinks); "+listnumberslinks);
                    System.out.println("listweblinks "+listweblinks); 
```

这将为您提供文件夹名称以及与它们关联的链接，稍后您可以使用 ArrayList> albumsList 来存储和迭代列表或任何内容

# ios - iOS - 设置 UITextView 的文本会引发 EXC_BAD_ACCESS

> ID：14018419
> 
> 赞同：1
> 
> 时间：2012-12-24T07:27:54.337
> 
> 标签：ios, nsstring, uitextview, exc-bad-access

我有一个`UITextView`我在以下代码中以编程方式创建的：

```
NSLog(@"creating the first blurb");
blurb = [[UITextView alloc]initWithFrame:CGRectMake(0, 0, 320, 50)];
[blurb setText:total];
blurb.backgroundColor = [UIColor redColor]; 
```

其中`blurb`定义为`UITextView`中的a `@interface`。

这是我遇到问题的地方：

`total`是一个`NSString`被定义为`.txt`从指定域的文件中获取文本的对象。它被变异为：

```
 NSString *url = @"https://sites.google.com/site/paloaltoapps/tbnappsource-password-blackr3d/Updates.txt";
 NSURL *urlRequest = [NSURL URLWithString:url];
 total = [NSString stringWithContentsOfURL:urlRequest encoding:NSUTF8StringEncoding error:nil]; 
```

但是，当我运行代码时，我会在顶部代码块`EXC_BAD_ACCESS`的行中得到一个 throws 的实例。`setText:`

我尝试`total`使用`NSLog`语句打印出来，这似乎工作得很好。谁能看到我做错了什么？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T07:41:56.897

试试这个......可能会失去参考......

```
total = [[NSString stringWithContentsOfURL:urlRequest encoding:NSUTF8StringEncoding error:nil]copy]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-24T07:34:02.920

为什么不尝试创建一个 NSString 并将文本分配给它。然后您可以尝试打印 NSString 并查看是否有效。只是一个建议。

# html - 如何找到 xmlns 定义？

> ID：14018422
> 
> 赞同：3
> 
> 时间：2012-12-24T07:28:14.107
> 
> 标签：html, blogger, xml-namespaces

我懂了

```
 xmlns:b='http://www.google.com/2005/gml/b' 
 xmlns:data='http://www.google.com/2005/gml/data'
 xmlns:expr='http://www.google.com/2005/gml/expr' 
```

`xmlns`在 Blogger 模板中定义，但我找不到关于`b`data 或`exp`r 的完整描述，那么在哪里可以找到这些`xmlns`具体描述？

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2013-11-21T06:13:21.830

`b`代表`Blog`

`data`代表`param`

`expr`代表`Holycow`

# iphone - 无法让 Apple Reachability 类正确定义网络

> ID：14018427
> 
> 赞同：0
> 
> 时间：2012-12-24T07:28:59.470
> 
> 标签：iphone, objective-c, ios, cocoa-touch, reachability

我有一个经典的 Apple 可达性类，它不适合 ARC。它很好地定义了网络，但它有一些我无法弄清楚的错误。我保持整个类不变，在另一个类的方法中，我实现了以下方法来定义连接性。这是我的`BOOL`价值，只要互联网可用就会改变：

```
- (BOOL) checkForInternetConnection {

    [self checkNetworkStatus:nil];
    if (isConnection || is3G) {
        return YES;
    } else {
        return NO;
    }
} 
```

这是标准的可达性方法：

```
-(void) checkNetworkStatus:(NSNotification *)notice
{

    NetworkStatus internetStatus = [internetReachable currentReachabilityStatus];
    switch (internetStatus)
    {
        case NotReachable:
        {
            isConnection = NO;
            is3G = NO;
        }
        case ReachableViaWiFi:
        {
            isConnection = YES;
            is3G = NO;
            break;
        }
        case ReachableViaWWAN:
        {
            NSLog(@"Connected via 3G");
            is3G = YES;
            break;
        }
    }

    NetworkStatus hostStatus = [hostReachable currentReachabilityStatus];
    switch (hostStatus)
    {
        case NotReachable:
        {
            isConnection = NO;
            is3G = NO;
            NSLog(@"No Network");
            break;
        }
        case ReachableViaWiFi:
        {
            NSLog(@"Connected via WiFi");
            isConnection = YES;
            is3G = NO;
            break;
        }
        case ReachableViaWWAN:
        {
            NSLog(@"Connected via 3G");
            is3G = YES;
            break;
        }
    }
} 
```

我得到的问题在`NSLog`我得到的输出中很明显：

```
2012-12-24 11:19:41.045 Custom Queue[1723:907] Connected via 3G
2012-12-24 11:19:41.046 Custom Queue[1723:907] No Network
2012-12-24 11:19:41.047 Custom Queue[1723:907] Connected via 3G
2012-12-24 11:19:41.048 Custom Queue[1723:907] No Network 
```

几秒钟后，它告诉我一切都很好：

```
2012-12-24 11:20:11.101 Custom Queue[1723:907] Connected via 3G
2012-12-24 11:20:11.112 Custom Queue[1723:907] Connected via 3G
2012-12-24 11:20:11.113 Custom Queue[1723:907] Connected via 3G 
```

但是由于它认为主机无法访问并给我没有连接的消息，所以我有另一个功能在 Internet 不可用时触发。

如何更改它以使其更快地看到 Internet 连接，而不会偶尔出现“无网络”消息？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T09:27:08.900

我最终使用了[Tony Million](https://stackoverflow.com/users/344007/tony-million)的 Reachability 版本。它很棒且易于使用。此外，它还支持 ARC 和 iOS 5（及更高版本）。

你可以在这里得到它：

[https://github.com/tonymillion/Reachability](https://github.com/tonymillion/Reachability)

谢谢，托尼！

# googletest - 如何在 --gtest_filter 中指定多个排除过滤器？

> ID：14018434
> 
> 赞同：105
> 
> 时间：2012-12-24T07:29:22.733
> 
> 标签：googletest

问题是关于 google-test 框架。我想根据多个排除过滤器运行所有测试，不包括一些测试，例如： `--gtest_filter=-ABC.*:-BCD.*`

* * *

## 回答 #1

> 赞同：150
> 
> 时间：2012-12-24T13:25:29.633

您将表单中的模式分组`--gtest_filter=POSTIVE_PATTERNS[-NEGATIVE_PATTERNS]`

所以在这种情况下，你想要`--gtest_filter=-ABC.*:BCD.*`

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2019-11-13T11:30:25.873

请参阅[https://blogs.msdn.microsoft.com/taxiahou/2013/07/30/the-usage-of-running-a-subset-of-tests-in-google-test-framework-gtest_filter/](https://blogs.msdn.microsoft.com/taxiahou/2013/07/30/the-usage-of-running-a-subset-of-tests-in-google-test-framework-gtest_filter/)。你可以在那里找到一个明确的例子。

排除项由“-”号标识。你可以说多个用:分隔。无需重复 - 使用 :.

`--gtest_filter=-*str*`：这将运行不包含字符串“str”的测试。

`--gtest_filter=-*str1*:*str2*`：这将运行不包含“str1”或“str2”的测试：

`--gtest_filter=*str*:-*str1*:*str2*`：这将运行包含 str 且不包含 str1 或 str2 的测试。

因此，任何后跟“-”的内容都将计入排除列表。

所以，在你的情况下，它将是`--gtest_filter=-ABC.*:BCD.*`

# c# - 如何在 IE webdriver 中禁用 Silverlight？

> ID：14018435
> 
> 赞同：0
> 
> 时间：2012-12-24T07:29:22.953
> 
> 标签：c#, html, silverlight, internet-explorer, webdriver

这是我得到的：一个上传按钮，如果安装了silverlight，它可以通过silverlight工作，如果没有silverlight，它可以通过html5工作。所以，我有 2 个浏览器要测试：Chrome 和 IE。我通过向输入元素发送键进行了常见的上传，它在 chrome 中运行良好，但在 IE 中 - 它正在尝试使用 silverlight。我的问题是如何禁用 Silverlight 或者有一些解决方法？我发现它是一个附加组件，所以如果有人知道如何禁用附加组件或使用开关启动 iedriver，请告诉我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-25T15:05:16.727

我浏览了许多关于 webdriver 的文档，现在似乎无法禁用附加组件或添加开关。我希望这会节省别人的时间。

# c# - 将 sql case 语句放入组合框

> ID：14018436
> 
> 赞同：-4
> 
> 时间：2012-12-24T07:29:29.250
> 
> 标签：c#, .net, sql-server

我有一个这样的 sql case 语句

```
select Distinct y.SupplierID,y.Name,y.AddWho , 
        "StatusDesc=CASE when  y.status='N' then 'NEW' " & _
        "when y.status='B' then 'BLACKLISTED'" & _
        "when y.status='Q' then 'QUALIFIED'" & _
        "when y.status='R' then 'REJECTED' end , " & _
        "FlowStatusDesc = CASE when  y.flowstatus='RC' then 'UNDER REVIEW'" & _
        "when y.flowstatus='PE' then 'POTENTIAL EXCLUSIVE'" & _
        "when y.flowstatus='PO' then 'POTENTIAL ORDINARY' ELSE '' end," & _
        "OrderNo=case when y.status='N' and flowstatus='' then '1'" & _
        "when y.status='N' and y.flowstatus<>'' then '2'    " & _
        "when y.status='R' and y.flowstatus='' then '3'" & _
        "when y.status='R' and y.flowstatus<>'' then '4'" & _
        "when y.status='Q' and y.flowstatus='' then '5'" & _
        "when y.status='Q' and y.flowstatus<>'' then '6'" & _
        "when y.status='B' and y.flowstatus=''  then '7'" & _
        "when y.status='B' and y.flowstatus<>'' then '8' else '9' end " & _
        "from AP_Supplier y" & _
        " left outer join SC_User u on y.addwho=u.userid " & _
        "left outer join SC_Company co on co.companycode=u.companycode " & _
        "where flowstatus is not null " & _
        "group by y.SupplierID,y.name,y.status,y.flowstatus,y.addwho " & _
        "order by orderno" 
```

我如何将所有案例语句条件（如“new”、“qualified”、“registered”和 flowstatuses 加载到 vb.net 上的组合框中？你能给我一个例子吗？我已经尝试这样做了一段时间。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T08:03:07.517

有很多方法可以做到这一点，第一种是从列表中填充组合框。在这种情况下，您应该有一个类，例如：

```
public class Status(){
    public string Symbol { get; set; } // or Id
    public string Name { get; set; }
} 
```

然后是您拥有的状态列表：

```
var ds = new List<Status>(){
    new Status { Symbol = "N", Name = "New" },
    new Status { Symbol = "Q", Name = "Qualified" },
    .... 
}; 
```

然后，您可以使用以下两个属性轻松地从此列表中填充组合框：

*   [`ValueMember`](http://msdn.microsoft.com/en-us/library/system.windows.forms.listcontrol.valuemember.aspx).
*   [`DisplayMember`](http://msdn.microsoft.com/en-us/library/system.windows.forms.listcontrol.displaymember.aspx).

像这样：

```
YourcomboboxName.DataSource = ds;
YourcomboboxName.ValueMember = "Symbol";
YourcomboboxName.DisplayMember = "Name"; 
```

* * *

第二种方法是创建一个表或临时表，其中包含这些值列表，如下所示：

```
CREATE TABLE Statuses(StatusId INT, 
                      StatusSymbol VARCHAR(2), 
                      StatusName VARCHAR(20));

INSERT INTO Statuses(StatusId, StatusSymbol, STatusName) VALUES
                    (1, 'N' , 'NEW'),
                    (2, 'B' , 'BLACKLISTED'),
                    (3, 'Q' , 'QUALIFIED'),
                    (4, 'R' , 'REJECTED'),
                    (5, 'UR', 'UNDER REVIEW'),
                    (6, 'PE', 'POTENTIAL EXCLUSIVE'),
                    (7, 'PO', 'POTENTIAL ORDINARY'); 
```

然后，您可以在使用从该表读取并填充它的数据源之前以相同的方式使用它。但是此解决方案将使您的查询更容易。您可以`JOIN`像这样使用此表：

```
SELECT DISTINCT 
  y.SupplierID,
  y.Name,
  y.AddWho,
  StatusDesc = s.STatusName,
  FlowStatusDesc = CASE WHEN ... END
  orderno = CASE WHEN ...
FROM AP_Supplier y
INNER JOIN statuses   s ON y.status       = s.StatusSymbol
LEFT JOIN SC_User     u ON y.addwho       = u.userid
LEFT JOIN SC_Company co ON co.companycode = u.companycode 
WHERE flowstatus IS NOT NULL
GROUP BY y.SupplierID,
         y.name,
         y.status,
         y.flowstatus,
         y.addwho
ORDER BY orderno; 
```

**请注意：**如果可能，您的表需要重构，最好去掉这些状态名称，并`Statuses`在第二个表中创建一个以 id 作为外键的新表。

# android - 安排发布到 Google Play Android Market

> ID：14018437
> 
> 赞同：11
> 
> 时间：2012-12-24T07:29:47.243
> 
> 标签：android, google-play, publishing

我有一个应用程序发布到 Google Play 商店（第 1 版），我计划很快将其更新到第 2 版。我已经上传了更新的 APK，但我不想在商店发布新版本之前1 月 1 日午夜（更新后的应用程序中的内容都是 2013 年特有的。）我宁愿不必在元旦午夜登录手动发布。是否有某种功能可以让我安排在该日期和时间自动发布到 Google Play 商店？

任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-24T07:37:48.890

不，Google Play 上没有此类功能。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-12-21T15:04:59.803

现在有**定时发布**的可能性：

> 对现有应用程序的更新照常处理，但您可以控制更新上线的具体时间。

[https://support.google.com/googleplay/android-developer/answer/6334282](https://support.google.com/googleplay/android-developer/answer/6334282)

# java - 在 Eclipse 中使用 Java 和 RXTX 进行串口通信

> ID：14018438
> 
> 赞同：2
> 
> 时间：2012-12-24T07:29:49.783
> 
> 标签：java, eclipse, serial-port, rxtx

在windows环境下编写一个与串口设备通信的java应用程序，在google上浏览似乎转向了很多方向，也喜欢一些第三方工具库，如[RXTX](http://codeglobe.blogspot.in/2009/02/serial-port-communication-in-java.html) [JavaComm](http://www.java-samples.com/showtutorial.php?tutorialid=11)。[使用 Eclipse Reference](http://code.google.com/p/museum-multimedia-solution/wiki/RxTx)尝试使用 RXTX 示例代码。

输出中没有显示串行端口，只是空白

输出 ：

> 稳定的图书馆
> 
> 本机库版本 = RXTX-2.1-7
> 
> Java 库版本 = RXTX-2.1-7

我犯了什么错误？

让我知道这种方法更好还是建议我更好的解决方案？

请让我知道这个问题的替代方案，我想使用 java 通过串行端口与设备通信，数据将从设备发送并写入文件。

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-31T10:55:56.060

如果链接示例*失败*，则意味着 RXTX 没有检测到您机器上的*任何*串行端口。您的机器上可能有一个串行端口，但您的操作系统无法识别它的原因之一*可能*是因为它实际上是一个串行到 USB 适配器，并且被识别为 USB 端口。

如果您在 Linux 上，串行端口通常如下所示：

```
ls /dev/ttyS* 
```

输出：

```
/dev/ttyS0
/dev/ttyS1
/dev/ttyS2 
```

调整后的端口可能如下所示：

```
/dev/ttyUSB0 
```

如果您可以在串行连接设备（例如 POS 打印机或 LCD 显示器）上看到一些输出，您可以像这样测试它：

```
echo 'hello' > /dev/ttyUSB0 
```

如果设备连接到该端口并且一切正常，则设备应显示“hello”字符串。

但是，我肯定会推荐[Java 简单的串行连接器](http://code.google.com/p/java-simple-serial-connector/)库而不是 RxTx。我们已经在商业 POS 应用程序中尝试过这两种应用程序（此时超过 100 万张票）。

RxTx 已成功用于顺序打印。在打印场景中，RxTx 库被顺序调用，仅用于将数据发送*到端口*。只有一些串行标志是红色的，以检测设备的业务。

但是由于它的限制，我们根本不能用它来读取串行连接的 IButton 的输入。在 iButton 场景中，预计数据*将从端口*异步接收。当我们尝试使用 RxTx 实现它时，经常会出现错误和挂起，但使用 JSSC 几乎是立即实现的。

# macos - 如何连接注释 + bash 别名命令调用？

> ID：14018439
> 
> 赞同：-1
> 
> 时间：2012-12-24T07:29:51.787
> 
> 标签：macos, bash, shell, ip

我正在尝试打印出我的 IP 地址以及前面的评论。我不知道如何在一行中完成所有操作。

```
6 alias showip="ifconfig | grep 'inet' | sed -n '5p' | tr -s ' ' | cut -d ' ' -f2"
11 ip=showip
12 ip="ip: $ip"
13 echo ip 
```

我正在寻找的输出类似于：

```
ip: 192.168.1.2 
```

谢谢一群人。

```
printf 'ip: %s\n' $(showip) 
```

更新：问题已解决

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T07:33:54.630

我不确定我是否理解您的问题，但您可能正在寻找：

```
printf 'ip: %s\n' $(ifconfig | grep 'inet' | sed -n '5p' | tr -s ' ' | cut -d ' ' -f2) 
```

# javascript - PieChart 没有出现在 IE8 中

> ID：14018442
> 
> 赞同：3
> 
> 时间：2012-12-24T07:30:06.897
> 
> 标签：javascript, jquery, html, css

我正在使用 google [**piechart**](https://developers.google.com/chart/interactive/docs/gallery/piechart)，在文档模式 ie8 下，除了 IE 之外，它在所有浏览器上都可见。如果我更改为 IE7 或 IE9 等其他文档模式，它会出现，但如果我设置文档模式 ie8，它不可见。

我该如何修复这个错误。

谢谢你的建议。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-24T08:39:13.413

*`IE8`我使用真正的网络浏览器没有任何问题。它适用于普通视图和兼容性视图，没有问题。不需要解决方案。*

**但是...如果您刷新网页，则饼图对象不再出现。**

这种情况下的解决方案是通过直接单击该网页底部的**报告错误**来联系该页面的网页管理员。*请注意，该链接*的 URL将不会被使用，因此这也是另一个错误。

再次看到饼图对象的唯一方法是重新启动浏览器。

**编辑：**似乎[**有**](https://www.google.com/search?q=Google+Pie+chart+not+showing+in+IE8)谷歌饼图失败的历史`IE8`。

**可能的错误：**

此屏幕截图显示该网页的所有 cookie 都被我的标准 IE8 安全设置阻止。我什至将此站点添加到受信任的站点，但没有任何变化... cookie 被阻止！将协议更改为`http://`无济于事，因为 Google 重定向到安全`https://`

![在此处输入图像描述](../Images/e74a467247824e5f93dff443bbeacfcc.png)

上面的屏幕截图是通过单击浏览器状态栏中的红眼生成的。

确保您的状态栏通过设置启用`Menu>>>Tools>>>Toolbars>>>Status bar`

* * *

**解决方法：**

我想出了如何在 IE8 中切换文档模式后获取丢失的饼图。

要复制失败，请使用本机 IE8 开发人员工具和访问控制台。
您应该处于 IE8 浏览器模式和 IE8 文档模式。
现在更改为 IE7 文档模式。
页面重新加载后，您将看到饼图。
将文档模式更改回 IE8，页面将无法加载饼图。

要恢复，请将浏览器模式更改为 IE8 兼容性视图，然后更改回 IE8 浏览器（正常）模式。

***饼图又回来了！***

# java - 超类-抽象类中的具体方法

> ID：14018444
> 
> 赞同：0
> 
> 时间：2012-12-24T07:30:21.650
> 
> 标签：java, oop, template-method-pattern

我有一个抽象类 Shape、一些子类和一些方法来计算面积、周长和绘制被覆盖的形状。我试图在这个应用程序的抽象类中找到一个模板方法，但我想不出任何方法。我还没有找到任何通用方法，它们对于所有形状都是相同的，并且也会在 GUI 上产生一些东西。我想在抽象类中有一个方法来比较两个形状的区域，但我无法理解如何做到这一点，因为我认为我不能使用它（指类的实例）一个抽象类。所有形状有什么共同点吗？我的模板方法是什么？谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T07:58:33.233

这是您`compareArea()`的模板方法：

```
public class Test {
public static void main(String[] args) {
    Shape rec = new Rectangle();
    Shape sqr = new Square();
    int diff = rec.compareArea(sqr);
    System.out.println(diff);
 }
}

abstract class Shape{
public int compareArea(Shape otherShape){
    return computeArea() - otherShape.computeArea();
 }
abstract int computeArea();
}
class Square extends Shape{
int s = 2;
@Override
int computeArea() {
    return s * s;
 }
}
class Rectangle extends Shape{
int l = 3;
int b = 4;
@Override
int computeArea() {
    return l * b;
 }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-24T07:48:20.723

当然你可以做 areaEquals：

```
public abstract class Shape {
    public boolean areaEquals(Shape otherShape) {
        return this.area() == otherShape.area();
    }

    public abstract double area();
} 
```

整个想法是面积计算是特定于每个形状的，但比较对于所有可以计算自己面积的形状都是通用的。

# android - 更改列表视图中的 Textview 大小运行时

> ID：14018445
> 
> 赞同：2
> 
> 时间：2012-12-24T07:30:24.093
> 
> 标签：android, android-listview, textview

我想动态更改在listview中使用的textview大小运行时但对textview没有任何影响我在获得屏幕宽度运行时后将我的屏幕宽度分成6部分后划分我从屏幕宽度分配textview大小但这个textview是在不同的布局中，所以如何在我的布局中采用这个布局并更改 textview 运行时的大小

在这里我把我的布局

**主页.xml**

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

    <LinearLayout 
                android:id="@+id/textlayout" 
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:orientation="horizontal"
                android:weightSum="12"
                android:layout_weight="1"
                android:gravity="center">

                <TextView
                    android:id="@+id/text1"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:gravity="center"
                    android:background="@drawable/flightlist"
                    android:text="Destination"
                    android:textSize="17dp"
                    android:textStyle="bold" />

                <TextView
                    android:id="@+id/text2"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:gravity="center"
                    android:text="Flight"

                    android:textSize="17dp"
                    android:textStyle="bold" />

                <TextView
                    android:id="@+id/text3"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:gravity="center"
                    android:background="@drawable/flightlist"
                    android:text="Airlines"
                    android:textSize="17dp"
                    android:textStyle="bold" />

                <TextView
                    android:id="@+id/text4"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"

                    android:gravity="center"
                    android:text="Schedule"
                    android:textSize="17dp"
                    android:textStyle="bold" />

                <TextView
                    android:id="@+id/text5"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:gravity="center"
                    android:text="Term Gate"
                    android:textSize="17dp"
                    android:textStyle="bold"
                    android:background="@drawable/flightlist" />

                <TextView
                    android:id="@+id/text6"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:gravity="center"
                    android:text="Status"
                    android:textSize="17dp"
                    android:textStyle="bold" />

             </LinearLayout>

              <ListView
                    android:id="@+id/list"
                    android:layout_width="fill_parent"
                    android:layout_height="fill_parent"
                    android:layout_weight="10"
             >
             </ListView>

</LinearLayout> 
```

**列表.xml**

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:orientation="horizontal"
    android:weightSum="6" 
    android:gravity="center">

    <TextView
        android:id="@+id/textdestination"
        android:layout_width="183dp"
        android:layout_height="fill_parent"
        android:text="Destination"
        android:textSize="15dp"
        android:gravity="center"

        />

    <TextView
        android:id="@+id/textflight"
        android:layout_width="105dp"
        android:layout_height="fill_parent"
        android:text="Flight"
        android:textSize="15dp"
        android:gravity="center"
        android:background="@drawable/flightlist"
         />

    <TextView
        android:id="@+id/textairline"
        android:layout_width="185dp"
        android:layout_height="fill_parent"
        android:text="Airlines"
        android:textSize="15dp" 
        android:gravity="center"/>

            <TextView
                android:id="@+id/textschedule"
                android:layout_width="73dp"
                android:layout_height="fill_parent"
                android:text="Schedule"
                android:textSize="15dp"
                android:gravity="center"
                android:background="@drawable/flightlist"
            />

            <TextView
                android:id="@+id/texttermgate"
                android:layout_width="105dp"
                android:layout_height="fill_parent"
                android:text="Term Gate"
                android:textSize="15dp"
                android:gravity="center"
                />

            <TextView
                android:id="@+id/textstatus"
                android:layout_width="73dp"
                android:layout_height="fill_parent"
                android:text="Status"
                android:textSize="15dp" 
                android:gravity="center"
                android:background="@drawable/flightlist"/>

</LinearLayout> 
```

**HomeActivity.java**

```
View inflater=getLayoutInflater().inflate(R.layout.list2, list, false);
    TextView textdestination=(TextView)inflater.findViewById(R.id.textdestination);
    textdestination.setHeight(50);
    textdestination.setWidth((textlayoutwidth*25)/100);
    textdestination.setTextSize(100); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T07:38:00.020

您可以在运行时更改 textview 的宽度和高度：

```
textdestination.setWidth(pixels);
textdestination.setHeight(pixels); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-24T09:08:26.880

您可以在您用于 ListView的**适配器**`getView()`的方法中执行此操作。

 **```
mInflater = (LayoutInflater) mActivity
            .getSystemService(Context.LAYOUT_INFLATER_SERVICE);

public View getView(int position, View convertView, ViewGroup parent) {

    ViewHolder holder;
    if (convertView == null) {

        holder = new ViewHolder();

        convertView = mInflater.inflate(R.layout.list, parent,
                false);
        holder.tv1 = (TextView) convertView
                .findViewById(R.id.textdestination);
        holder.tv2 = (TextView) convertView
                .findViewById(R.id.textflight);
        holder.tv3 = (TextView) convertView
                .findViewById(R.id.textairline);
        .......
        .......
        .......

        convertView.setTag(holder);
    } else {
        holder = (ViewHolder) convertView.getTag();
    }

    if(someCondition){

    holder.tv1.setLayoutParams(new LinearLayout.LayoutParams(50,50));
    holder.tv2setLayoutParams(new LinearLayout.LayoutParams(50,50));
    holder.tv3.setLayoutParams(new LinearLayout.LayoutParams(50,50));
    .....
    .....
    .....
    }

    return convertView;
} 
```**

# html - chrome中不同的文本位置。IE和FF

> ID：14018448
> 
> 赞同：7
> 
> 时间：2012-12-24T07:30:47.723
> 
> 标签：html, css, internet-explorer, google-chrome

我正在用 css 和 jquery 制作一个网站。我的脚本之一是通过鼠标单击在特定位置显示文本。文本在谷歌浏览器中的预期位置显示良好。但在 IE9 和 FF17 中，它们偏离了预期的位置。我的背景图片适合浏览器窗口的大小。

我附上了屏幕截图，这将提供一个更好的主意。我也在写代码。也许只需要一个小的调整，但我不明白。请帮助我。

![这是chrome和IE的比较。 正确的是铬，这是正确的。 FF 和 IE 显示在相同的位置。](../Images/77322a20bbfc80949bad3fc4929a80c3.png) 这是chrome和IE的比较。正确的是铬，这是正确的。FF 和 IE 显示在相同的位置。

谢谢

```
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>

<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.0/jquery.min.js"></script>
<script>
$(document).ready(function(){
*Here will my script which is just simple .show and .hide functions*
});
</script>
<meta content="text/html; charset=ISO-8859-1" http-equiv="content-type">
<title>Train of Thought</title>

<style type="text/css">
html, body {
width: 100%;
height: 100%;
margin-top: 0px;
padding-top: 0px;
top: 0px;
margin-left: 0px;
padding-left: 0px;
left: 0px;
}

body {
overflow: hidden;
}

#background {width: 100%; height: 100%; display: block; position: absolute; z-index:1;}

.content {
visibility:hidden;
border-style: none;
display: block;
position: fixed;
text-align: centre;
z-index: 1;
margin-top: 40%;
background-color: transparent;
font-size:1.5em;
opacity: 0.697;
}

#thought_text{
margin-left: 25%;
margin-right: 25%;
}

<div><img id="background" alt="background" src="tot1.png"></div>

<div class="content" id="thought_text">Here goes the text<br></div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-03-24T15:10:44.443

首先，对于固定定位，使用：`top`, `bottom`, `left`,`right`属性而不是`margin-top`, `margin-right`..

其次，您`z-index`对兄弟姐妹应用了相同的 'es。

第三，`img`以这种方式使用元素作为背景并不是最好的解决方案。您应该选择 CSS `background-image`for`body`或 text-div 包装器，拉伸到 100%。

完整解决方案：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>

<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.0/jquery.min.js"></script>
<script>
$(document).ready(function(){
// Here will my script which is just simple .show and .hide functions*
});
</script>
<meta content="text/html; charset=ISO-8859-1" http-equiv="content-type">
<title>Train of Thought</title>

<style type="text/css">
body {
width: 100%;
height: 100%;
margin: 0;
padding: 0;
background-image:url(http://25.media.tumblr.com/6d28260f10f17c0d2eab47398fd855f6/tumblr_mj9ha54DuW1rub5xuo1_1280.jpg);
background-position: top center;
background-repeat:no-repeat;
}
.content {  
top: 40%;
display: block;
position: fixed;
text-align: centre;
z-index: 1;
background-color: transparent;
font-size:1.5em;
opacity: 0.697;
border-style: none;
}

#thought_text{
left: 25%;
right: 25%;
color:#000;
}

</style>

<body>

<div class="content" id="thought_text">Here goes the text<br></div>

</body>

</head> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-20T08:58:46.773

有一个简单的 hack 可以在 IE9 中用于垂直居中元素。它使用该`transform: translateY`属性来调整另一个元素中的元素。我们可以像这样将一个类应用于我们的内部元素：

```
.element {
   position: relative;
   top: 50%;
   transform: translateY(-50%);
} 
```

您需要添加适当的供应商前缀。这是一篇很棒的文章：http: [//zerosixthree.se/vertical-align-anything-with-just-3-lines-of-css/](http://zerosixthree.se/vertical-align-anything-with-just-3-lines-of-css/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-14T16:00:40.773

据我了解，您将图像拉伸到整个页面并希望将您的块与文本居中。你有 50% 的宽度（100% - 25% 的边距）和 40% 的上边距。

有了`position:fixed`top 和 left 属性来设置相对于页面的位置。

```
.content {
  position:fixed; /* taking it over the page */
  z-index:2; /* and over the image */
  left:25%; /* move to 25% from left */
  width:50%; /* and setting width */
  top:40%; /* move to 40% from top */

  font-size:1.5em;
  opacity: 0.697;
} 
```

你可以删除

```
#thought_text{
  margin-left: 25%;
  margin-right: 25%;
} 
```

您会得到原始错误，因为顶部/底部边距和填充百分比是根据[spec从](http://www.w3.org/TR/CSS2/box.html#margin-properties)*宽度*而不是高度计算的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-14T16:11:49.187

这只是一个想法，希望有用。

```
<style>
    #background {
        background:url('tot1.png') no-repeat;
        width: 100%;
        height: 100%; 
        position: absolute; 
        z-index:1;
    }
</style>
<div id="background">
    <div class="content" id="thought_text">Here goes the text<br></div>
</div> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-24T11:21:06.907

考虑删除`#thought_text{}`css 文件中的块并将其合并到`.content {}`块中以避免覆盖属性值

**或者**

将 !important 指令添加到属性

**也改变**

`margin-top: 40%;`到某个固定值，例如`margin-top: 250px;`确保所有浏览器中的顶部位置相同。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2013-01-21T12:02:34.800

您可以使用一些 javascript 来检测是否存在 IE 或 Firefox，然后相应地更改文本的边距/位置。

```
    函数检测布鲁泽（）{
        if (navigator.userAgent.indexOf("Firefox")!=-1)
            返回“火狐”；
        否则 if (navigator.userAgent.indexOf("MSIE")!=-1)
            返回“Internet Explorer”；
    }

```

# arrays - 表达式必须有（指向）函数类型错误

> ID：14018452
> 
> 赞同：0
> 
> 时间：2012-12-24T07:30:58.597
> 
> 标签：arrays, parsing, function-pointers, structure, infix-notation

我决定是时候完成我一周前开始的小中缀计算器了，但在我的评估函数中遇到了问题。我的 switch 语句似乎与我通过运算符结构处理数组的方式存在问题。我不完全确定我做错了什么。这不是我遇到的唯一错误，但我确信如果我解决了这个问题，那么其他问题应该更容易解决。显然我的代码不完整，但考虑到我到目前为止所拥有的东西，我是否走在正确的轨道上？

```
#include <iostream>
#include <string>
#include <sstream>

using namespace std;

bool die(const string &msg);

//stack class
class Stack{
public:
    Stack();
    void push(const double &val);
    void push(const string &oper);
    double popnum();
    string popop();
    double getopele();
    double getnumele();
    unsigned getarity(string token);
    unsigned getprec(string token);
    string topop();
private:
    static const unsigned MAX=30;
    string opstack[MAX];
    double numstack[MAX];
    unsigned opele;
    unsigned numele;
};
//operators
bool add(double &r, double &x, double &y);
bool subtract(double &r, double &x, double &y);
bool multiply(double &r, double &x, double &y);
bool divide(double &r, double &x, double &y);

//operator type
struct OP{
    string name;
    void * func;
    unsigned arity;
    unsigned prec;
    bool lass;
    string descrip;
};
//operator table
OP op[]={{"+", add, 2, 4, true, "2+3 is 5"},
        {"-", subtract, 2, 4, true, "2-3 is -1"},
        {"*", multiply, 2, 6, true, "2*3 is 6"},
        {"/", divide, 2, 6, true, "2/3 is 0.666666..., div by 0 illegal"}};
unsigned OPELE =sizeof(op)/sizeof(op[0]);

//Manip
unsigned findindex(string token);
bool parseval(double &t, const string &token);
double parseforeval(double &result, string line);
void evaluate(double &result, Stack &s);
bool weird(double x);

int main(){
    for(string line; getline(cin, line);){
        if(line=="QUIT") break;
        if(line.empty()) continue;
        if(line=="DOC")
            for(unsigned i=0; i<OPELE; i++)
                cout<<op[i].name<<" | "<<op[i].descrip<<'\n';
        double result;
        if(parseforeval(result, line)){
            cout<<result<<'\n';
        }else{
            cout<<"Could not understand input\n\n";
        }
    }
}

Stack::Stack(){
    opele=0;
    numele=0;
}

void Stack::push(const double &val){
    if(MAX) die("Stack Overflow");
    numstack[numele++]=val;
}

void Stack::push(const string &oper){
    if(MAX) die("Stack Overflow");
    opstack[opele++]=oper;
}

double Stack::popnum(){
    if(!numele) die("Stack Underflow");
    return numstack[--numele];
}

string Stack::popop(){
    if(!opele) die("Stack Underflow");
    return opstack[--opele];
}

double Stack::getopele(){
    return opele;
}

double Stack::getnumele(){
    return numele;
}

unsigned Stack::getprec(string token){
    unsigned i=findindex(token);
    return op[i].prec;
}

unsigned Stack::getarity(string token){
    unsigned i=findindex(token);
    return op[i].arity;
}

string Stack::topop(){
    if(!opele) die("Undeflow");
    return opstack[opele-1];
}

double parsforeval(double &result, string line){
    istringstream sin(line);
    Stack s;
    for(string token; sin>>token;){
        double t;
        if(parseval(t, token)){
            s.push(t);
        }else if(token=="("){
            s.push(parsforeval(result, line));
        }else if(s.getprec(s.topop()) >s.getprec(token)){
            //write eval function
            s.push(token);
        }else if(token== ")"){
            if(!s.getnumele()) die("Bad format");
            return s.popnum();
        }else{
            s.push(token);
        }
    }
    while(s.getopele()){
        evaluate(result, s);
    }
}

void evaluate(double &result, Stack &s){
    unsigned i= findindex(s.popop());
    switch(op[i].arity){
        case 1:
            if(s.getnumele()<1) die("Underflow");
            double x = s.popnum();
            if(  !reinterpret_cast<bool (*)(double &, double &)> !op[i].func (result, x)  ) die("No OP");
            break;
        case 2:
            if(s.getnumele()<2) die("Underflow");
            double y = s.popnum();
            double x = s.popnum();
            if(  !reinterpret_cast<bool (*)(double &, double &,double &)> op[i].func (result, x, y)  ) die("No OP");
            break;
        case 3:
            if(s.getnumele()<3) die("Underflow");
            double z = s.popnum();
            double y = s.popnum();
            double x = s.popnum();
            if(   !reinterpret_cast<bool (*)(double &, double & , double & , double &)>op[i].func (result, x, y, z)   ) die("No OP");
            break;
        default:
            die("uuuuuuhhhh i have no idea");
            break;
    }
    s.push(result);
}

bool add(double &r, double &x, double &y){
    double t = x + y;
    if( weird(t) )  return false;
    r = t;
    return true;
}

bool subtract(double &r, double &x, double &y){
    double t = x - y;
    if( weird(t) )  return false;
    r = t;
    return true;
}

bool multiply( double & r, double& x, double &y ){
    double t = x * y;
    if( weird(t) )  return false;
    r = t;
    return true;
}

bool divide( double & result, double &x, double &y ){
    double t = x / y;
    if( weird(t) )  return false;
    result = t;
    return true;
}

unsigned findindex(string token){
    for(unsigned i=0; i<OPELE; i++)
        if(op[i].name==token)
            return i;
    return UINT_MAX;

}

bool parseval(double &val, const string &token){
    istringstream sin( token );
    double t;
    if( !(sin >>t) )  return false;
    char junk;
    if( sin >>junk )  return false;
    val = t;
    return true;
}

bool weird( double x ){
    return  x != x || x != 0 && x == 2*x;
}

bool die(const string &msg){
    cout<<"Error: "<<msg;
    exit(EXIT_FAILURE);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-25T01:52:22.490

reinterpret_cast 的参数应该有括号。我认为它可能会将其解析为试图重新解释调用 func 而不是 func 成员本身的结果。

例如

```
if(  !reinterpret_cast<bool (*)(double &, double &)>(op[i].func) (result, x)  ) die("No OP"); 
```

# java - 如何为对象列表应用范围标准？

> ID：14018454
> 
> 赞同：1
> 
> 时间：2012-12-24T07:31:03.230
> 
> 标签：java, jakarta-ee, collections, arraylist

我有一个对象说

```
class ABC{
private String name;

private String code;

private BigDecimal priceM;

private BigDecimal priceL;

private BigDecimal priceO;

 public String getName() {
        return name;
    }

    public void setName(String name) {
        this.name = name;
    }

    public String getCode() {
        return code;
    }

    public void setCode(String code) {
        this.code = code;
    }

    public BigDecimal getPriceM() {
        return priceM;
    }

    public void setPriceM(BigDecimal priceM) {
        this.priceM = priceM;
    }

    public BigDecimal getPriceL() {
        return priceL;
    }

    public void setPriceL(BigDecimal priceL) {
        this.priceL = priceL;
    }

    public BigDecimal getPriceO() {
        return priceO;
    }

    public void setPriceO(BigDecimal priceO) {
        this.priceO = priceO;
    }

} 
```

现在，假设我有一个 ABC 列表，并且在某些时候我希望该列表根据 searchCriteria 进行过滤。

有没有什么有效的方法来实现这一点......？？？

例子 ，

我有

**目标**：列出，我想要新的列表，其中包含 ABC 的列表，priceM 值在 100 到 200 之间

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T08:14:43.397

[JDK 8](http://jdk8.java.net/lambda/)中的新 API

```
List<ABC> items = asList(...);
Stream<ABC> stream = items.stream();
stream.filter( item -> item.getPrice() >= 100 && item.getPrice() <= 200 )
      .forEach ( System.out::println ); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-24T07:39:14.543

Google Guava 有一些关于**Matchers**和**Predicate**的课程，也许可以提供帮助

[http://java.dzone.com/articles/google-guava-goodness-matching](http://java.dzone.com/articles/google-guava-goodness-matching)

或许可以使用反射实现自动匹配

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-24T08:17:09.890

Java 提供了一个**Collection.sort(list, comp)**方法，它接受一个列表和**Comparator**对象作为参数

在这种情况下，传递您需要排序的原始列表并创建一个 Comparator 对象并覆盖作为排序规则的 compare 方法。

您可以根据您的要求创建多个**Comparator对象。**

请参阅以下链接以获取更多帮助。

1.  [http://www.vogella.com/blog/2009/08/04/collections-sort-java/](http://www.vogella.com/blog/2009/08/04/collections-sort-java/)

2.  [如何在不同的时间按不同的参数对列表进行排序](https://stackoverflow.com/questions/1421322/how-do-i-sort-a-list-with-multiple-sort-parameters)

# c# - 下拉列表选项

> ID：14018459
> 
> 赞同：1
> 
> 时间：2012-12-24T07:31:32.063
> 
> 标签：c#, html

我在我的母版页上使用此代码，并希望在引用页面上显示选项名称

```
<select name=menu onchange="location.href=(menu.options[menu.selectedIndex].value)">
<option value="http:google.com">Google</option> 
<option value="http:myurl.com">URL</option> 
</select> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T07:36:42.517

您需要使用`this`来引用事件源对象而不是`menu`html`name`元素。您也有错误的 url 表单，需要将其更改`http:google.com`为`http://google.com`

**[现场演示](http://jsfiddle.net/rajaadil/qDu6g/1/)**

```
<select name=menu onchange="window.location.href=(this.options[this.selectedIndex].value)">
    <option value="http://www.google.com">Google</option> 
    <option value="http://www.stackoverflow.com">stackoverflow</option> 
</select>​ 
```

# android - 如何正确重置 AndEngine GLES-2 中的场景？

> ID：14018461
> 
> 赞同：3
> 
> 时间：2012-12-24T07:31:54.760
> 
> 标签：android, andengine, scene, andengine-gles-2

我正在使用 AndEngine GLES-2 在 Android 中开发游戏。玩家完成关卡后重置场景时遇到问题。当我重置场景时，所有的精灵都失去了它们的位置并且倾向于出现在彼此的位置，即它们交换它们的位置。

我已经尝试了所有的事情，比如将所有精灵等设置为 null 并调用 clearUpdateHandlers() 和 clearEventModifiers() 等方法，但还没有成功。

经过大量谷歌搜索后，我发现 engineOptions.getRenderOptions().disableExtensionVertexBufferObjects(); 方法可以解决这个问题。所以我试图调用它，但是编译器给出了错误，说这个方法没有为 RenderOptions 类定义。

我检查了 org.andengine.engine.options 包中的 RenderOptions 类，并且该类中确实不存在该方法。我是否缺少任何插件或有任何其他问题？请帮忙，我卡住了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T18:48:15.613

需要手动重启场景，例如：

要重新启动场景，您可以使用 SharedPreferences 或标签中的意图完成活动并重新开始，但不同级别，或者您可以设置每个 Sprite 的位置并使用以下命令清除场景：

```
 //detachChild this Sprites that you do not use
 Scene.detachChild(SpriteX);
 //clear the space of memory of each sprite that you do not use
 SpriteX.dispose();
 //unload the bitmaps that you do not use
 BitMapsX.unload(); 
```

这种方法有几秒钟的运行时间，但您可以在游戏中使用优雅的“hud”，并在 hud 中设置充电时带有“加载”的徽标或动画，最好的问候

# javascript - 使用 selenium 写入代码镜像文本框

> ID：14018463
> 
> 赞同：3
> 
> 时间：2012-12-24T07:31:57.550
> 
> 标签：javascript, selenium, textbox, invisible, codemirror

我有一个用 java 编写的 selenium 脚本，它可以自动将一些文本输入到文本框中以提交到数据库中。它工作正常，直到有一天由于某种原因坏了，给出了我试图写入的文本框不可见的错误。几天后，我最终发现，一定是更高层的人更新了文本框以使用[代码镜像](http://codemirror.net/1/contrib/xquery/index.html)，这使文本框不可见并创建了某种 java-script 替代物。

我整天都在搜索，我能找到的唯一解决方案是在 selenium 环境中禁用 java-script，导致整个事情默认回到普通文本框，或者以某种方式使用 selenium 写入代码镜像对象。我也找不到办法，所以这里有人知道我的问题的可能解决方案吗？

干杯

# c# - 按钮动作未触发

> ID：14018464
> 
> 赞同：1
> 
> 时间：2012-12-24T07:32:00.133
> 
> 标签：c#, asp.net, devexpress

我有一个 Web 表单，它在组合框（devexpress）中选择时动态加载控件。我在主窗体上有以下代码

```
 protected void Page_Load(object sender, EventArgs e)
    {
        if (!IsPostBack)
        {

        }
        if (Session["_active_control"] != null)//persist control on postbacks
        {
            Control cntrl = Session["_active_control"] as Control;
            pnl_main.Controls.Clear();
            pnl_main.Controls.Add(cntrl);
        }
    }

    protected void cmb_control_SelectedIndexChanged(object sender, EventArgs e)
    {
        Control cntrl= Page.LoadControl("~/" + cmb_control.SelectedItem.Value);
        pnl_main.Controls.Clear();
        pnl_main.Controls.Add(cntrl);
       Session["_active_control"] = cntrl;
    } 
```

我也有一个具有三个文本框的用户控件和一个具有代码的按钮

```
 protected void btn_save_Click(object sender, EventArgs e)
    {
        lbl.Text = ASPxTextBox1.Text + "<br>" + ASPxTextBox2.Text + "<br>" + ASPxTextBox3.Text;
    } 
```

我的问题是，如果我动态加载用户控件的保存按钮，它不会触发（我已经使用断点和上面显示的代码进行了检查。但是，如果我静态使用它，它运行顺利。（即通过在设计模式下拖动）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T08:17:13.090

你是对的，你必须在回发中保持控制。

但是，页面加载事件为时已晚，无法重新添加您的控件。在页面的 Init 事件上执行此操作，您应该会很好。要接收回发事件，当调用 ProcessPostData（在 PreLoad 之前调用）时，控件应该存在。

同样对于文本框，您将希望接收用户输入的值。这也发生在 ProcessPostData 上，如果在此之后添加控件，您将不会收到用户输入的值。

参考：[ASP.NET 页面生命周期](http://msdn.microsoft.com/en-us/library/ms178472%28v=vs.100%29.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-24T12:29:10.377

嘿，我找到了解决方案

而是在 combobox_selectedindexchanged 中创建控件时，我将控件创建代码放在基于 combobox.selectedindex 的 Pageload 上，即

```
 protected override void OnLoad(EventArgs e)
    {
        base.OnLoad(e);

        if (cmb_control.SelectedItem != null)
        {
            Control cntrl = Page.LoadControl("~/" + cmb_control.SelectedItem.Value);
            cntrl.ID = "_new_ctrl" + cmb_control.SelectedItem.Value;

            pnl_main.Controls.Clear();
            pnl_main.Controls.Add(cntrl);
        }

    } 
```

请参阅[ASP .Net 中的使用控件中未触发的按钮单击事件](https://stackoverflow.com/questions/7495486/button-click-event-not-firing-within-use-control-in-asp-net)

# javascript - 如何获取嵌套跨度 HTML 元素的文本？

> ID：14018470
> 
> 赞同：9
> 
> 时间：2012-12-24T07:32:24.403
> 
> 标签：javascript, html

我想从以下 HTML 代码中的嵌套 SPAN 元素中获取文本：

```
<span id='result_box'>
<span class="hps">text_content</span>
</span> 
```

我想使用 JavaScript 获取“text_content”值。

我试过这个但有一个问题：

```
var resBox=document.getElementById('result_box');
var strTrans=resBox.getElementsByTagName('span')[0].innerHTML;
alert(strTrans); 
```

编辑：其实我想从在线页面做到这一点 ![在此处输入图像描述](../Images/3a93dad596ff8c16b13fe681787a9764.png) ![在此处输入图像描述](../Images/eba0822b9f10c68f7616213623ab96b9.png)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-24T08:01:35.027

你的代码工作正常。我想你的问题是当 DOM 没有完全加载时你正在执行这些代码。如果你正在测试一些东西，你可以试试这个。

```
window.onload = function () {
   //put your code here,it will alert when page loaded completely.
}; 
```

或将脚本放在 span 元素之后。像这样。

```
<span id='result_box'>
  <span class="hps">text_content</span>
</span>
<script type='text/javascript'>
   var resBox=document.getElementById('result_box');
   var strTrans=resBox.getElementsByTagName('span')[0].innerHTML;
   alert(strTrans);// it will alert
</script> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-24T07:39:24.980

您通过类​​名获取元素..`document.getElementsByClassName()`然后从结果节点列表中获取第一项

```
window.onload = function () {
   document.getElementsByClassName("hps")[0].innerHTML
}; 
```

[jsfiddle](http://jsfiddle.net/esqSR/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-24T07:39:28.433

```
var resBox=document.getElementById('result_box');
var strTrans=document.getElementsByTagName('span')[0].innerText;
alert(strTrans);​ 
```

或更好

```
strTrans = document.querySelector(".hps").innerText ; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-25T01:36:12.490

明白了，我猜你在你的 html 页面中嵌入了一个链接，然后你想在你嵌入的页面中操作 DOM，对吧？如果是这样，您可以检查浏览器同源策略。

如果你想通过 google 实现在线翻译，你可以 google 'google translate api'，google 提供了一个 api 给其他人在他们自己的应用程序中实现在线翻译。

似乎bing也提供了一个api。我不确定。

# c - 在定义联合时在 Eclipse CDT 中获取语法错误“无法解析类型 XXX”

> ID：14018476
> 
> 赞同：1
> 
> 时间：2012-12-24T07:32:41.750
> 
> 标签：c, eclipse, eclipse-cdt

我在定义联合时收到语法错误“无法解析类型 XXX”，并且此错误不会出现在 VC++ 等其他 IDE 上。例如，联合定义如下：

```
typedef union{
    struct {
    int data1;
    int data2;
    int data3;
    } dataField;
    int dataBuffer[sizeof(dataField)];
}; 
```

发生语法错误。

```
type 'dataField' could not be resolved 
```

通过谷歌搜索，我发现原因可能是 eclipse CDT 和其他 IDE 使用的索引器之间的差异。但是，此代码仍然编译没有错误。有人可以给出更具体的建议来处理此错误消息吗？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-28T11:17:23.680

怎么样：

```
typedef struct
{
   int data1;
   int data2;
   int data3;
} MyData;

typedef union
{
   MyData dataField;
   int dataBuffer[sizeof(MyData)];
} MyUnion; 
```

不确定，但也许这会起作用：

```
typedef union
{
   struct DataStruct
   {
      int data1;
      int data2;
      int data3;
   } dataField;
   int dataBuffer[sizeof(struct DataStruct)];
}; 
```

# java - 字符串包含 - 忽略大小写

> ID：14018478
> 
> 赞同：181
> 
> 时间：2012-12-24T07:33:11.757
> 
> 标签：java, string, contains, case-insensitive

是否可以确定 String 是否`str1="ABCDEFGHIJKLMNOP"`包含字符串模式`strptrn="gHi"`？我想知道当字符不区分大小写时这是否可能。如果是这样，怎么做？

* * *

## 回答 #1

> 赞同：264
> 
> 时间：2012-12-24T07:39:40.103

您可以使用

```
org.apache.commons.lang3.StringUtils.containsIgnoreCase(CharSequence str,
                                     CharSequence searchStr); 
```

> 检查 CharSequence 是否包含搜索 CharSequence，不考虑大小写，处理 null。不区分大小写由 String.equalsIgnoreCase(String) 定义。
> 
> 空 CharSequence 将返回 false。

这将比正则表达式更好，因为**正则表达式在性能方面总是很昂贵**。

官方文档参考：[StringUtils.containsIgnoreCase](http://commons.apache.org/proper/commons-lang//apidocs/org/apache/commons/lang3/StringUtils.html#containsIgnoreCase-java.lang.CharSequence-java.lang.CharSequence-)

**更新 ：**

如果你是其中之一

*   不想使用 Apache 公共库
*   不想使用基于昂贵`regex/Pattern`的解决方案，
*   不想通过使用创建额外的字符串对象`toLowerCase`，

`containsIgnoreCase`您可以使用[java.lang.String.regionMatches](http://docs.oracle.com/javase/8/docs/api/java/lang/String.html#regionMatches-boolean-int-java.lang.String-int-int-)实现自己的自定义

```
public boolean regionMatches(boolean ignoreCase,
                             int toffset,
                             String other,
                             int ooffset,
                             int len) 
```

`ignoreCase`: 如果为真，则在比较字符时忽略大小写。

```
public static boolean containsIgnoreCase(String str, String searchStr)     {
    if(str == null || searchStr == null) return false;

    final int length = searchStr.length();
    if (length == 0)
        return true;

    for (int i = str.length() - length; i >= 0; i--) {
        if (str.regionMatches(true, i, searchStr, 0, length))
            return true;
    }
    return false;
} 
```

* * *

## 回答 #2

> 赞同：260
> 
> 时间：2012-12-24T07:36:42.190

如果您不使用正则表达式：

```
"ABCDEFGHIJKLMNOP".toLowerCase().contains("gHi".toLowerCase()) 
```

* * *

## 回答 #3

> 赞同：24
> 
> 时间：2012-12-24T07:35:23.047

您可以使用带有 CASE_INSENSITIVE 标志的 java.util.regex.Pattern 进行不区分大小写的匹配：

```
Pattern.compile(Pattern.quote(strptrn), Pattern.CASE_INSENSITIVE).matcher(str1).find(); 
```

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2012-12-24T08:04:56.990

试试这个

```
public static void main(String[] args)
{

    String original = "ABCDEFGHIJKLMNOPQ";
    String tobeChecked = "GHi";

    System.out.println(containsString(original, tobeChecked, true));        
    System.out.println(containsString(original, tobeChecked, false));

}

public static boolean containsString(String original, String tobeChecked, boolean caseSensitive)
{
    if (caseSensitive)
    {
        return original.contains(tobeChecked);

    }
    else
    {
        return original.toLowerCase().contains(tobeChecked.toLowerCase());
    }

} 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-12-24T08:27:36.463

优化的 Imran Tariq 版本

```
Pattern.compile(strptrn, Pattern.CASE_INSENSITIVE + Pattern.LITERAL).matcher(str1).find(); 
```

Pattern.quote(strptrn) 总是返回 "\Q" + s + "\E" 即使没有什么要引用的，连接会破坏性能。

# php - SQL 二维查询

> ID：14018479
> 
> 赞同：0
> 
> 时间：2012-12-24T07:33:21.683
> 
> 标签：php, mysql

我一直在搜索 Web 和 SO，但没有找到一个相当简单问题的答案。问题可能是我不知道如何表达它。这是我想要做的。

我有一个包含多个 SKU 的 MySQL 表（我们称之为*skutable*），对于每一行我都有一定数量的列描述 SKU ：*name*，*price*，*price-range*（我有 4 个不同的价格范围），*week of publishing*， ...以及一些描述 SKU 绩效的列：*收入*、*利润*、*销售量*...

如果编写一个允许我显示（使用 PHP）一个表的 SQL 查询，我想做什么，例如：

*行内：周数/列内：价格范围/单元格内：给定周内属于某个价格范围的 SKU 的百分比。*

或者另一个例子是：

*行内：周数/列内：价格范围/单元格内：给定周内属于某个价格范围的 SKU 的销售数量百分比。*

我一直在尝试编写一个查询，结果将提供一个多数组数组，但它似乎不起作用。

如果有人知道该怎么做？

谢谢，

E.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T07:39:30.387

您的 SQL 查询必须为每个组合返回一行（SKU 的百分比，销售数量的百分比）：周 * 价格范围 * 如果需要，则为另一个维度。然后在 PHP 中执行“表格/交叉表”逻辑，方法是循环遍历结果，或者为每个维度从最小值循环到最大值并在结果中查找相应的数据。

# c# - 从 Xml 广告文件中删除整个节点？

> ID：14018488
> 
> 赞同：0
> 
> 时间：2012-12-24T07:34:18.460
> 
> 标签：c#, asp.net, xml, xmlnode

我正在尝试删除与某个条件匹配的整个 XmlNode

我的xml文件格式如下：

```
 <?xml version="1.0" encoding="utf-8"?>
<Advertisements>
  <Ad>
    <ImageUrl>image/Hydrangeas.jpg</ImageUrl>
    <NavigateUrl>www.google.com</NavigateUrl>
    <AlternateText>nbfndbf</AlternateText>
    <ID>0</ID>
    <Impressions>1</Impressions>
  </Ad>
</Advertisements> 
```

我的删除代码：

```
 XElement x = 
                new XElement("Ad",
                  new XElement("ImageUrl", lblImageURL.Text),
                  new XElement("NavigateUrl", lblImageURL.Text),

                  new XElement("AlternateText", lblAlternateText.Text),
                    new XElement("ID", lblID.Text),
             new XElement("Impressions", lblfrequency.Text));

            string filepath = Request.PhysicalApplicationPath.ToString() + "Adrotator.xml";

            XmlDocument xD = new XmlDocument();

            xD.LoadXml(x.ToString());
            XmlNode xN = xD.FirstChild;

            xN.ParentNode.RemoveChild(xN);

            **xD.Save(filepath);** 
```

我收到错误**无效的 XML 文档。该文档没有根元素。**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T07:58:24.517

您可以使用 linq to xml 来实现这里示例如何删除 value ID = 0 的节点

```
var q = (from c in doc.Descendants("Advertisements")
        from v in c.Elements("Ad")
        where (int) v.Element("ID") == 0
       select v).Remove(); 
```

这是另一个使用 xpath 的示例

```
doc.XPathSelectElement("Advertisements/Ad[ID = 0]").Remove(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-24T08:01:22.420

您使用以下代码创建一个新的 XDocument (doc)：

```
XDocument doc = XDocument.Load(filepath); 
```

Xml 文件中是否有某些内容（带有根元素）？此外，您似乎没有在代码中使用 doc，因此至少不需要它。

# testing - 测试 XQuery 和 Marklogic 事务

> ID：14018496
> 
> 赞同：1
> 
> 时间：2012-12-24T07:35:16.590
> 
> 标签：testing, transactions, xquery, marklogic

我们有一些需要版本控制的业务需求。为此，我们选择使用 MarkLogic 库服务。我们在使用 XRAY 测试代码和使用事务时遇到问题。

我们的测试如下：

```
declare function should-save-with-version-when-releasing() {
declare option xdmp:transaction-mode "update";

    let $uri := '/some-document-uri.xml'         
    let $document := fn:doc($uri) 
    let $pre-release-version := c:get-latest-version($uri)
    let $post-release-version := c:get-latest-version($uri)
    let $result := mut:release($document) (:this should version up:)

    return (assert:not-empty($pre-release-version), 
            assert:not-empty($result), 
            assert:not-equal($pre-release-version,$post-release-version),
            xdmp:rollback()) 
```

无论如何，测试都会通过，事实证明 ML 回滚会破坏所有变量。

我们如何使用事务对其进行测试？

非常感谢任何帮助，

我是

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T17:59:22.483

使用 MarkLogic，整个 XQuery 更新通常就像单个事务一样。当`mut:release`向事务的堆栈添加更新时，查询的其余部分在提交之前不会看到该更新。从查询的角度来看，这通常发生*在*整个查询完成之后，并且对查询不可见。

关于[http://docs.marklogic.com/xdmp:rollback](http://docs.marklogic.com/xdmp:rollback)的作用，文档有一些有用的补充：

> 当事务回滚时，当前语句立即终止，事务中任何语句所做的更新都被丢弃，事务终止。

所以不是变量被拆除：而是你的程序结束了。

我认为[http://docs.marklogic.com/guide/app-dev/transactions#id_15746](http://docs.marklogic.com/guide/app-dev/transactions#id_15746)有一个非常接近您的用例的示例：“示例：多语句事务和相同语句隔离”。它演示了如何更新文档`xdmp:eval`并`xdmp:invoke`在同一查询中查看结果。

测试它以查看它是否有效，然后将 替换`xdmp:commit`为`xdmp:rollback`. 对我来说，这个例子仍然有效。开始用你的单元测试逻辑替换其余的逻辑，你应该在你的路上。

# java - sonar-project.properties 文件中的问题

> ID：14018499
> 
> 赞同：0
> 
> 时间：2012-12-24T07:35:27.650
> 
> 标签：java, sonarqube

我正在使用 Java.Sonar 服务器，sonar-runner 对我来说工作正常。

这是我的`sonar-project.properties`文件。

```
 # Root project information
   sonar.projectKey=Sonar:ProjectKey
   sonar.projectName=ProjectName
   sonar.projectVersion=1.0-SNAPSHOT
   # Some properties that will be inherited by the modules   
   sonar.sources=/root/helios/ProjectName/src
   # Redefine properties
   # Note that you do not need to prefix the property here
   #sonar.projectName=Module 2
   # Comma-separated paths to test source directories (optional)
   sonar.tests=/root/helios/ProjectName/test
   #The value of the property must be the key of the language.
   sonar.language=java 
```

当我运行声纳服务器时，`http://localhost:9000/`它显示源目录下的类，但它没有显示测试目录下的类。

请指导我，如何解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T18:00:02.837

实际上，目前没有直接访问单元测试源文件的方法，例如从“组件”页面，请参阅[http://jira.codehaus.org/browse/SONAR-4036](http://jira.codehaus.org/browse/SONAR-4036)。目前，访问单元测试源文件的唯一方法是单击项目仪表板中的单元测试数量，但这需要导入单元文本执行报告。

# php - 如何在php中计算crc16

> ID：14018508
> 
> 赞同：8
> 
> 时间：2012-12-24T07:36:29.210
> 
> 标签：php, crc16

我需要帮助将用 Ojective C 编写的 CRC 代码转换为 PHP。以下是Objective C代码

```
static UInt16 CRC16_Table[] =
   {    0x0000, 0x2110, 0x4220, 0x6330, 0x8440, 0xa550, 0xc660, 0xe770,
    0x0881, 0x2991, 0x4aa1, 0x6bb1, 0x8cc1, 0xadd1, 0xcee1, 0xeff1,
    0x3112, 0x1002, 0x7332, 0x5222, 0xb552, 0x9442, 0xf772, 0xd662,
    0x3993, 0x1883, 0x7bb3, 0x5aa3, 0xbdd3, 0x9cc3, 0xfff3, 0xdee3,
    0x6224, 0x4334, 0x2004, 0x0114, 0xe664, 0xc774, 0xa444, 0x8554,
    0x6aa5, 0x4bb5, 0x2885, 0x0995, 0xeee5, 0xcff5, 0xacc5, 0x8dd5,
    0x5336, 0x7226, 0x1116, 0x3006, 0xd776, 0xf666, 0x9556, 0xb446,
    0x5bb7, 0x7aa7, 0x1997, 0x3887, 0xdff7, 0xfee7, 0x9dd7, 0xbcc7,
    0xc448, 0xe558, 0x8668, 0xa778, 0x4008, 0x6118, 0x0228, 0x2338,
    0xccc9, 0xedd9, 0x8ee9, 0xaff9, 0x4889, 0x6999, 0x0aa9, 0x2bb9,
    0xf55a, 0xd44a, 0xb77a, 0x966a, 0x711a, 0x500a, 0x333a, 0x122a,
    0xfddb, 0xdccb, 0xbffb, 0x9eeb, 0x799b, 0x588b, 0x3bbb, 0x1aab,
    0xa66c, 0x877c, 0xe44c, 0xc55c, 0x222c, 0x033c, 0x600c, 0x411c,
    0xaeed, 0x8ffd, 0xeccd, 0xcddd, 0x2aad, 0x0bbd, 0x688d, 0x499d,
    0x977e, 0xb66e, 0xd55e, 0xf44e, 0x133e, 0x322e, 0x511e, 0x700e,
    0x9fff, 0xbeef, 0xdddf, 0xfccf, 0x1bbf, 0x3aaf, 0x599f, 0x788f,
    0x8891, 0xa981, 0xcab1, 0xeba1, 0x0cd1, 0x2dc1, 0x4ef1, 0x6fe1,
    0x8010, 0xa100, 0xc230, 0xe320, 0x0450, 0x2540, 0x4670, 0x6760,
    0xb983, 0x9893, 0xfba3, 0xdab3, 0x3dc3, 0x1cd3, 0x7fe3, 0x5ef3,
    0xb102, 0x9012, 0xf322, 0xd232, 0x3542, 0x1452, 0x7762, 0x5672,
    0xeab5, 0xcba5, 0xa895, 0x8985, 0x6ef5, 0x4fe5, 0x2cd5, 0x0dc5,
    0xe234, 0xc324, 0xa014, 0x8104, 0x6674, 0x4764, 0x2454, 0x0544,
    0xdba7, 0xfab7, 0x9987, 0xb897, 0x5fe7, 0x7ef7, 0x1dc7, 0x3cd7,
    0xd326, 0xf236, 0x9106, 0xb016, 0x5766, 0x7676, 0x1546, 0x3456,
    0x4cd9, 0x6dc9, 0x0ef9, 0x2fe9, 0xc899, 0xe989, 0x8ab9, 0xaba9,
    0x4458, 0x6548, 0x0678, 0x2768, 0xc018, 0xe108, 0x8238, 0xa328,
    0x7dcb, 0x5cdb, 0x3feb, 0x1efb, 0xf98b, 0xd89b, 0xbbab, 0x9abb,
    0x754a, 0x545a, 0x376a, 0x167a, 0xf10a, 0xd01a, 0xb32a, 0x923a,
    0x2efd, 0x0fed, 0x6cdd, 0x4dcd, 0xaabd, 0x8bad, 0xe89d, 0xc98d,
    0x267c, 0x076c, 0x645c, 0x454c, 0xa23c, 0x832c, 0xe01c, 0xc10c,
    0x1fef, 0x3eff, 0x5dcf, 0x7cdf, 0x9baf, 0xbabf, 0xd98f, 0xf89f,
    0x176e, 0x367e, 0x554e, 0x745e, 0x932e, 0xb23e, 0xd10e, 0xf01e
   };

   +(SInt16) CalculateCRC16 : (Byte*)buffer : (UInt16) length
   {
    UInt32   crc=0;

    while (length--)
        crc = ((crc>>8) & 0xff) ^ *(CRC16_Table + ((*buffer++ ^ crc) & 0xff));

    return((SInt16)crc);
   } 
```

以下是我到目前为止在 php 中编写的代码

```
$CRC16_Table = array
        (   0x0000, 0x2110, 0x4220, 0x6330, 0x8440, 0xa550, 0xc660, 0xe770,
            0x0881, 0x2991, 0x4aa1, 0x6bb1, 0x8cc1, 0xadd1, 0xcee1, 0xeff1,
            0x3112, 0x1002, 0x7332, 0x5222, 0xb552, 0x9442, 0xf772, 0xd662,
            0x3993, 0x1883, 0x7bb3, 0x5aa3, 0xbdd3, 0x9cc3, 0xfff3, 0xdee3,
            0x6224, 0x4334, 0x2004, 0x0114, 0xe664, 0xc774, 0xa444, 0x8554,
            0x6aa5, 0x4bb5, 0x2885, 0x0995, 0xeee5, 0xcff5, 0xacc5, 0x8dd5,
            0x5336, 0x7226, 0x1116, 0x3006, 0xd776, 0xf666, 0x9556, 0xb446,
            0x5bb7, 0x7aa7, 0x1997, 0x3887, 0xdff7, 0xfee7, 0x9dd7, 0xbcc7,
            0xc448, 0xe558, 0x8668, 0xa778, 0x4008, 0x6118, 0x0228, 0x2338,
            0xccc9, 0xedd9, 0x8ee9, 0xaff9, 0x4889, 0x6999, 0x0aa9, 0x2bb9,
            0xf55a, 0xd44a, 0xb77a, 0x966a, 0x711a, 0x500a, 0x333a, 0x122a,
            0xfddb, 0xdccb, 0xbffb, 0x9eeb, 0x799b, 0x588b, 0x3bbb, 0x1aab,
            0xa66c, 0x877c, 0xe44c, 0xc55c, 0x222c, 0x033c, 0x600c, 0x411c,
            0xaeed, 0x8ffd, 0xeccd, 0xcddd, 0x2aad, 0x0bbd, 0x688d, 0x499d,
            0x977e, 0xb66e, 0xd55e, 0xf44e, 0x133e, 0x322e, 0x511e, 0x700e,
            0x9fff, 0xbeef, 0xdddf, 0xfccf, 0x1bbf, 0x3aaf, 0x599f, 0x788f,
            0x8891, 0xa981, 0xcab1, 0xeba1, 0x0cd1, 0x2dc1, 0x4ef1, 0x6fe1,
            0x8010, 0xa100, 0xc230, 0xe320, 0x0450, 0x2540, 0x4670, 0x6760,
            0xb983, 0x9893, 0xfba3, 0xdab3, 0x3dc3, 0x1cd3, 0x7fe3, 0x5ef3,
            0xb102, 0x9012, 0xf322, 0xd232, 0x3542, 0x1452, 0x7762, 0x5672,
            0xeab5, 0xcba5, 0xa895, 0x8985, 0x6ef5, 0x4fe5, 0x2cd5, 0x0dc5,
            0xe234, 0xc324, 0xa014, 0x8104, 0x6674, 0x4764, 0x2454, 0x0544,
            0xdba7, 0xfab7, 0x9987, 0xb897, 0x5fe7, 0x7ef7, 0x1dc7, 0x3cd7,
            0xd326, 0xf236, 0x9106, 0xb016, 0x5766, 0x7676, 0x1546, 0x3456,
            0x4cd9, 0x6dc9, 0x0ef9, 0x2fe9, 0xc899, 0xe989, 0x8ab9, 0xaba9,
            0x4458, 0x6548, 0x0678, 0x2768, 0xc018, 0xe108, 0x8238, 0xa328,
            0x7dcb, 0x5cdb, 0x3feb, 0x1efb, 0xf98b, 0xd89b, 0xbbab, 0x9abb,
            0x754a, 0x545a, 0x376a, 0x167a, 0xf10a, 0xd01a, 0xb32a, 0x923a,
            0x2efd, 0x0fed, 0x6cdd, 0x4dcd, 0xaabd, 0x8bad, 0xe89d, 0xc98d,
            0x267c, 0x076c, 0x645c, 0x454c, 0xa23c, 0x832c, 0xe01c, 0xc10c,
            0x1fef, 0x3eff, 0x5dcf, 0x7cdf, 0x9baf, 0xbabf, 0xd98f, 0xf89f,
            0x176e, 0x367e, 0x554e, 0x745e, 0x932e, 0xb23e, 0xd10e, 0xf01e
        );

   function CalculateCRC16($strMessage)
   {
      $hexdata = pack('H*',$strMessage);
        $nLength = strlen($hexdata);
        $crc = 0xFFFF;
        $pos = 0;
        while($nLength > 0)
        {
            $crc = ($crc >> 8) ^ $CRC16_Table[($crc ^ ord($hexdata[$pos])) &       0xFF];
            $nLength--;
            $pos++;
        }
        return ~$crc;
   } 
```

其中 $strMessage 包含打包的值，但它没有给出正确的结果。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-24T07:58:17.930

这似乎有效，针对[该网站](http://www.lammertbies.nl/comm/info/crc-calculation.html)使用了几个值进行了测试`CRC-16-CCITT`

请注意，它使用 PHP 字符串作为直接字节缓冲区，因为它是 PHP 最接近的等价于`byte[]`

```
<?php

class CRC16 {
    private static $CRC16_Table = array
        (   0x0000, 0x2110, 0x4220, 0x6330, 0x8440, 0xa550, 0xc660, 0xe770,
            0x0881, 0x2991, 0x4aa1, 0x6bb1, 0x8cc1, 0xadd1, 0xcee1, 0xeff1,
            0x3112, 0x1002, 0x7332, 0x5222, 0xb552, 0x9442, 0xf772, 0xd662,
            0x3993, 0x1883, 0x7bb3, 0x5aa3, 0xbdd3, 0x9cc3, 0xfff3, 0xdee3,
            0x6224, 0x4334, 0x2004, 0x0114, 0xe664, 0xc774, 0xa444, 0x8554,
            0x6aa5, 0x4bb5, 0x2885, 0x0995, 0xeee5, 0xcff5, 0xacc5, 0x8dd5,
            0x5336, 0x7226, 0x1116, 0x3006, 0xd776, 0xf666, 0x9556, 0xb446,
            0x5bb7, 0x7aa7, 0x1997, 0x3887, 0xdff7, 0xfee7, 0x9dd7, 0xbcc7,
            0xc448, 0xe558, 0x8668, 0xa778, 0x4008, 0x6118, 0x0228, 0x2338,
            0xccc9, 0xedd9, 0x8ee9, 0xaff9, 0x4889, 0x6999, 0x0aa9, 0x2bb9,
            0xf55a, 0xd44a, 0xb77a, 0x966a, 0x711a, 0x500a, 0x333a, 0x122a,
            0xfddb, 0xdccb, 0xbffb, 0x9eeb, 0x799b, 0x588b, 0x3bbb, 0x1aab,
            0xa66c, 0x877c, 0xe44c, 0xc55c, 0x222c, 0x033c, 0x600c, 0x411c,
            0xaeed, 0x8ffd, 0xeccd, 0xcddd, 0x2aad, 0x0bbd, 0x688d, 0x499d,
            0x977e, 0xb66e, 0xd55e, 0xf44e, 0x133e, 0x322e, 0x511e, 0x700e,
            0x9fff, 0xbeef, 0xdddf, 0xfccf, 0x1bbf, 0x3aaf, 0x599f, 0x788f,
            0x8891, 0xa981, 0xcab1, 0xeba1, 0x0cd1, 0x2dc1, 0x4ef1, 0x6fe1,
            0x8010, 0xa100, 0xc230, 0xe320, 0x0450, 0x2540, 0x4670, 0x6760,
            0xb983, 0x9893, 0xfba3, 0xdab3, 0x3dc3, 0x1cd3, 0x7fe3, 0x5ef3,
            0xb102, 0x9012, 0xf322, 0xd232, 0x3542, 0x1452, 0x7762, 0x5672,
            0xeab5, 0xcba5, 0xa895, 0x8985, 0x6ef5, 0x4fe5, 0x2cd5, 0x0dc5,
            0xe234, 0xc324, 0xa014, 0x8104, 0x6674, 0x4764, 0x2454, 0x0544,
            0xdba7, 0xfab7, 0x9987, 0xb897, 0x5fe7, 0x7ef7, 0x1dc7, 0x3cd7,
            0xd326, 0xf236, 0x9106, 0xb016, 0x5766, 0x7676, 0x1546, 0x3456,
            0x4cd9, 0x6dc9, 0x0ef9, 0x2fe9, 0xc899, 0xe989, 0x8ab9, 0xaba9,
            0x4458, 0x6548, 0x0678, 0x2768, 0xc018, 0xe108, 0x8238, 0xa328,
            0x7dcb, 0x5cdb, 0x3feb, 0x1efb, 0xf98b, 0xd89b, 0xbbab, 0x9abb,
            0x754a, 0x545a, 0x376a, 0x167a, 0xf10a, 0xd01a, 0xb32a, 0x923a,
            0x2efd, 0x0fed, 0x6cdd, 0x4dcd, 0xaabd, 0x8bad, 0xe89d, 0xc98d,
            0x267c, 0x076c, 0x645c, 0x454c, 0xa23c, 0x832c, 0xe01c, 0xc10c,
            0x1fef, 0x3eff, 0x5dcf, 0x7cdf, 0x9baf, 0xbabf, 0xd98f, 0xf89f,
            0x176e, 0x367e, 0x554e, 0x745e, 0x932e, 0xb23e, 0xd10e, 0xf01e
        );

    public static function calculate( $buffer ) {
        $length = strlen($buffer);

        $crc = 0;
        $i = 0;
        while( $length-- ) {
            $crc = (( $crc >> 8) & 0xff) ^ (self::$CRC16_Table[(ord($buffer[$i++]) ^ $crc) & 0xFF]);
        }

        return (($crc & 0xFFFF) ^ 0x8000) - 0x8000;
    }    
}

echo CRC16::calculate( "\x74\x65\x73\x74" ); 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2014-11-13T16:21:38.050

它是 CRC-16 CCITT，可能会对您有所帮助

```
<?php
function crc16($data)
 {
   $crc = 0xFFFF;
   for ($i = 0; $i < strlen($data); $i++)
   {
     $x = (($crc >> 8) ^ ord($data[$i])) & 0xFF;
     $x ^= $x >> 4;
     $crc = (($crc << 8) ^ ($x << 12) ^ ($x << 5) ^ $x) & 0xFFFF;
   }
   return $crc;
 }
?> 
```

# macos - 如何从 Objective-C 获取当前 Macbook 的 UUID？

> ID：14018513
> 
> 赞同：5
> 
> 时间：2012-12-24T07:36:52.300
> 
> 标签：macos, uuid

SDK 是否提供用于检索当前 Macbook 的 UUID 的 API？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-06-25T16:43:04.797

所以，如果你不关心新的 AppStore 规则等等......你去：

```
- (NSString *)getSystemUUID {
    io_service_t platformExpert = IOServiceGetMatchingService(kIOMasterPortDefault,IOServiceMatching("IOPlatformExpertDevice"));
    if (!platformExpert)
        return nil;

    CFTypeRef serialNumberAsCFString = IORegistryEntryCreateCFProperty(platformExpert,CFSTR(kIOPlatformUUIDKey),kCFAllocatorDefault, 0);
    if (!serialNumberAsCFString)
        return nil;

    IOObjectRelease(platformExpert);
    return (__bridge NSString *)(serialNumberAsCFString);;
} 
```

**请注意：**

*   您需要添加`IOKit.framework`到您的项目中才能使其正常工作。
*   此代码符合 ARC；
*   这段代码是安全的，`nil` `NSString`如果出现问题它会返回一个；
*   Apple 不保证所有未来的系统都将具有软件可读的序列号。
*   开发人员不应对序列号的格式做出任何假设，例如序列号的长度或可能包含的字符。

# c# - RSA 密钥对导入私钥时出现异常

> ID：14018517
> 
> 赞同：4
> 
> 时间：2012-12-24T07:37:27.887
> 
> 标签：c#, cryptography, rsa, private-key

我是 RSA 和 Cryptography 的新手，我需要使用 RSA 加密和解密数据，我有一个 java 程序，它生成一个密钥对并将它们保存在`.key`XML 格式的文件中（绝对可以，并且通过加密和解密进行了测试数据），然后我想在 .NET 应用程序中使用它们，我正在导入用于加密和解密的密钥。公钥正常，加密完成没有问题，但私钥导入失败，出现以下异常消息

```
Bad data (CryptographicException.ThrowCryptogaphicException(Int32 hr)) 
```

这是编码的公钥：

```
<RSAKeyValue>
<Modulus>iFouk9viRs5dcvJCvDM1vXC4sBuSB9SPcdJhRyFLoNW/pka6MNAiu4cOksFRejiuM1ZswyJMy+ow
lmLflJ/XrfnUQxLwLp61oij4CrzHKl9jjHorqIA7uEQKY8RBiUjZ7kbO5nFaIWs1NWMVks8Srdhv
8pVd1sLKKUs66c/ndAk=</Modulus>
<Exponent>AQAB</Exponent>
</RSAKeyValue> 
```

这是编码的公钥：

```
<RSAKeyValue>
<Modulus>iFouk9viRs5dcvJCvDM1vXC4sBuSB9SPcdJhRyFLoNW/pka6MNAiu4cOksFRejiuM1ZswyJMy+ow
lmLflJ/XrfnUQxLwLp61oij4CrzHKl9jjHorqIA7uEQKY8RBiUjZ7kbO5nFaIWs1NWMVks8Srdhv
8pVd1sLKKUs66c/ndAk=</Modulus>
<Exponent>AQAB</Exponent>
<P>AO9WnDNOt9Xewnoy8KTed56Z+3Nfto6J8wCXKzX3LhuuiKNUBe8qFoinrteQJq/9NAEXnNCafxDW
ThIkr9GtMxE=</P>
<Q>AJHYMk0bOEGZlQbaJk3VDovvOJuRt5NI3WtXWl1v5VUW6aQQO3rV3+3GSN6Xa3hTKXtCVVL26Awy
OkDykUPjQXk=</Q>
<DP>KIHsJfLowlXVbIE6oWzVqg49tKU6bJ2Ed1Eeix+uuhisH5iU+ImTDsXynaFUKu0b5CNu8w9y+hKL
XB7BcydxQQ==</DP>
<DQ>di267NIersF1idzhZvY62FdbBmx4VaeYi+93sPkH2wA7CI+CsxF1Z6XhzETkd9bjaRaiLx0VgTR+
Eby8y0bt+Q==</DQ>
<InverseQ>HYF8gahVyzsz0IotzKI2Oh53sJMZWVxsvzkhqGlDtY1THFGZE5j8kl/UK0+FSN6yOYxBIuKNZ7om
 MgLQEMK1PQ==</InverseQ>
<D>DERQvGyjxsr6DUVOS7AvvYNOmklgseOlpA/RQJz2ONoCC+uBBLM07LoRzZImymAfC+9SiZukXRQM
mvr6MlzPAm04NWyZNzbjhLvmn1gmvDclDZ9X9bhYp8MBftPWU5PFBALOjVpD+mlbI2lTYCugf6pJ
MHEMe17mNJ0eWCerfAE=</D>
</RSAKeyValue> 
```

请帮助我了解正在发生的事情以及私钥有什么问题。

这是解决问题后可以正常工作的代码：

```
 private String getPublicKeyXml(RSAPublicKey pk) throws UnsupportedEncodingException {

    StringBuilder builder = new StringBuilder();
    builder.append("<RSAKeyValue>\n");

    byte[] m = pk.getModulus().toByteArray();
    byte[] mm = stripLeadingZeros(m);

    write(builder, "Modulus", mm);
    write(builder, "Exponent", pk.getPublicExponent());

    builder.append("</RSAKeyValue>");

    return builder.toString();
}

private String getPrivateKeyXml(PrivateKey pk) throws UnsupportedEncodingException {
    RSAPrivateCrtKey privKey = (RSAPrivateCrtKey) pk;
    BigInteger n = privKey.getModulus();
    BigInteger e = privKey.getPublicExponent();
    BigInteger d = privKey.getPrivateExponent();
    BigInteger p = privKey.getPrimeP();
    BigInteger q = privKey.getPrimeQ();
    BigInteger dp = privKey.getPrimeExponentP();
    BigInteger dq = privKey.getPrimeExponentQ();
    BigInteger inverseQ = privKey.getCrtCoefficient();

    StringBuilder builder = new StringBuilder();
    builder.append("<RSAKeyValue>\n");
    write(builder, "Modulus", stripLeadingZeros(n.toByteArray()));
    write(builder, "Exponent", stripLeadingZeros(e.toByteArray()));
    write(builder, "P", stripLeadingZeros(p.toByteArray()));
    write(builder, "Q", stripLeadingZeros(q.toByteArray()));
    write(builder, "DP", stripLeadingZeros(dp.toByteArray()));
    write(builder, "DQ", stripLeadingZeros(dq.toByteArray()));
    write(builder, "InverseQ", stripLeadingZeros(inverseQ.toByteArray()));
    write(builder, "D", stripLeadingZeros(d.toByteArray()));
    builder.append("</RSAKeyValue>");

    return builder.toString();
}

private void write(StringBuilder builder, String tag, byte[] bigInt) throws UnsupportedEncodingException {
    builder.append("\t<");
    builder.append(tag);
    builder.append(">");
    builder.append(encode(bigInt).trim());
    builder.append("</");
    builder.append(tag);
    builder.append(">\n");
}

private void write(StringBuilder builder, String tag, BigInteger bigInt) throws UnsupportedEncodingException {
    builder.append("\t<");
    builder.append(tag);
    builder.append(">");
    builder.append(encode(bigInt));
    builder.append("</");
    builder.append(tag);
    builder.append(">\n");
}

private static String encode(BigInteger bigInt) throws UnsupportedEncodingException {
    return new String(new sun.misc.BASE64Encoder().encode(bigInt.toByteArray()));
}

private static String encode(byte[] bigInt) throws UnsupportedEncodingException {
    return new String(new sun.misc.BASE64Encoder().encode(bigInt));
}

private byte[] stripLeadingZeros(byte[] a) {
    int lastZero = -1;
    for (int i = 0; i < a.length; i++) {
        if (a[i] == 0) {
            lastZero = i;
        } else {
            break;
        }
    }
    lastZero++;
    byte[] result = new byte[a.length - lastZero];
    System.arraycopy(a, lastZero, result, 0, result.length);
    return result;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-05T23:20:21.123

> 公钥正常，加密完成没有问题，但私钥导入失败，出现以下异常消息
> 
> 错误数据 (CryptographicException.ThrowCryptogaphicException(Int32 hr))

查看[Cryptographic Interoperability: Keys](http://www.codeproject.com/Articles/25487/Cryptographic-Interoperability-Keys) under "Common Errors" 部分。那些仍然在我脑海中根深蒂固的：

*   错误的 KeyNumber 或 KeyUsage
*   错误的加密服务提供者
*   正确的加密服务提供者，错误的 ProviderType
*   加密服务提供者不支持密钥大小
*   在字节数组中保留 0，使得数组有一个太多的八位字节

# scala - Scala Slick 0.11.2 计数与 H2

> ID：14018519
> 
> 赞同：1
> 
> 时间：2012-12-24T07:37:37.330
> 
> 标签：scala, h2, slick

我尝试使用来自[https://github.com/slick/slick-examples/blob/master/src/main/scala/scala/slick/examples/lifted/FirstExample.scala](https://github.com/slick/slick-examples/blob/master/src/main/scala/scala/slick/examples/lifted/FirstExample.scala)的示例数据库构建计数查询：

```
// Definition of the SUPPLIERS table
object Suppliers extends Table[(Int, String, String, String, String, String)]("SUPPLIERS")        {
  def id = column[Int]("SUP_ID", O.PrimaryKey) // This is the primary key column
  def name = column[String]("SUP_NAME")
  def street = column[String]("STREET")
  def city = column[String]("CITY")
  def state = column[String]("STATE")
  def zip = column[String]("ZIP")
  // Every table needs a * projection with the same type as the table's type parameter
  def * = id ~ name ~ street ~ city ~ state ~ zip
}

// Definition of the COFFEES table
object Coffees extends Table[(String, Int, Double, Int, Int)]("COFFEES") {
  def name = column[String]("COF_NAME", O.PrimaryKey)
  def supID = column[Int]("SUP_ID")
  def price = column[Double]("PRICE")
  def sales = column[Int]("SALES")
  def total = column[Int]("TOTAL")
  def * = name ~ supID ~ price ~ sales ~ total
  // A reified foreign key relation that can be navigated to create a join
  def supplier = foreignKey("SUP_FK", supID, Suppliers)(_.id)
}

// Connect to the database and execute the following block within a session
Database.forURL("jdbc:h2:mem:test1", driver = "org.h2.Driver") withSession {

  (Suppliers.ddl ++ Coffees.ddl).create

  // Insert some suppliers
  Suppliers.insert(101, "Acme, Inc.",      "99 Market Street", "Groundsville", "CA", "95199")
  Suppliers.insert( 49, "Superior Coffee", "1 Party Place",    "Mendocino",    "CA", "95460")
  Suppliers.insert(150, "The High Ground", "100 Coffee Lane",  "Meadows",      "CA", "93966")

  // Insert some coffees (using JDBC's batch insert feature, if supported by the DB)
  Coffees.insertAll(
    ("Colombian",         101, 7.99, 0, 0),
    ("French_Roast",       49, 8.99, 0, 0),
    ("Espresso",          150, 9.99, 0, 0),
    ("Colombian_Decaf",   101, 8.99, 0, 0),
    ("French_Roast_Decaf", 49, 9.99, 0, 0)
  )

  /**** This part works fine */
  val query = for (c <- Coffees) yield c
  query foreach println
  /*********/

  /******This one fails */
  val query1 = for (c <- Coffees) yield c.length
  println("query1 = " + query1.list.head) 
```

引发的错误 H2 是：

```
    未找到“X4.COF_NAME”列；SQL 语句：
    创建 FORCE VIEW PUBLIC._1 AS
    选择
        X4.COF_NAME,
        X4.SUP_ID,
        X4.价格，
        X4.销售，
        X4.总计
    从 SYSTEM_RANGE(1, 1) [42122-168]
    org.h2.jdbc.JdbcSQLException：未找到列“X4.COF_NAME”；SQL 语句：
    创建 FORCE VIEW PUBLIC._1 AS
    选择
        X4.COF_NAME,
        X4.SUP_ID,
        X4.价格，
        X4.销售，
        X4.总计
    从 SYSTEM_RANGE(1, 1) [42122-168]
        在 org.h2.message.DbException.getJdbcSQLException(DbException.java:329)
        在 org.h2.message.DbException.get(DbException.java:169)
        在 org.h2.message.DbException.get(DbException.java:146)
        在 org.h2.expression.ExpressionColumn.optimize(ExpressionColumn.java:138)
        在 org.h2.command.dml.Select.prepare(Select.java:799)
        在 org.h2.command.Parser.prepare(Parser.java:202)
        在 org.h2.engine.Session.prepare(Session.java:388)
        在 org.h2.engine.Session.prepare(Session.java:375)
        在 org.h2.table.TableView.compileViewQuery(TableView.java:99)
        在 org.h2.table.TableView.initColumnsAndTables(TableView.java:144)
        在 org.h2.table.TableView.init(TableView.java:95)
        在 org.h2.table.TableView.(TableView.java:61)
        在 org.h2.table.TableView.createTempView(TableView.java:420)
        在 org.h2.command.Parser.readTableFilter(Parser.java:1037)
        在 org.h2.command.Parser.parseSelectSimpleFromPart（Parser.java:1690）
        在 org.h2.command.Parser.parseSelectSimple（Parser.java:1797）
        在 org.h2.command.Parser.parseSelectSub(Parser.java:1684)
        在 org.h2.command.Parser.parseSelectUnion（Parser.java:1527）
        在 org.h2.command.Parser.readTableFilter(Parser.java:1026)
        在 org.h2.command.Parser.parseSelectSimpleFromPart（Parser.java:1690）
        在 org.h2.command.Parser.parseSelectSimple（Parser.java:1797）
        在 org.h2.command.Parser.parseSelectSub(Parser.java:1684)
        在 org.h2.command.Parser.parseSelectUnion（Parser.java:1527）
        在 org.h2.command.Parser.parseSelect(Parser.java:1515)
        在 org.h2.command.Parser.parsePrepared(Parser.java:405)
        在 org.h2.command.Parser.parse(Parser.java:279)
        在 org.h2.command.Parser.parse(Parser.java:251)
        在 org.h2.command.Parser.prepareCommand(Parser.java:217)
        在 org.h2.engine.Session.prepareLocal(Session.java:415)
        在 org.h2.engine.Session.prepareCommand(Session.java:364)
        在 org.h2.jdbc.JdbcConnection.prepareCommand(JdbcConnection.java:1109)
        在 org.h2.jdbc.JdbcPreparedStatement.(JdbcPreparedStatement.java:74)
        在 org.h2.jdbc.JdbcConnection.prepareStatement（JdbcConnection.java:626）
        在 scala.slick.session.Session$class.prepareStatement(Session.scala:29)
        在 scala.slick.session.BaseSession.prepareStatement(Session.scala:201)
        在 scala.slick.jdbc.StatementInvoker.results(StatementInvoker.scala:29)
        在 scala.slick.jdbc.StatementInvoker.elementsTo(StatementInvoker.scala:17)
        在 scala.slick.jdbc.Invoker$class.foreach(Invoker.scala:90)
        在 scala.slick.jdbc.StatementInvoker.foreach(StatementInvoker.scala:10)
        在 scala.slick.jdbc.Invoker$class.build(Invoker.scala:66)
        在 scala.slick.jdbc.StatementInvoker.build(StatementInvoker.scala:10)
        在 scala.slick.jdbc.Invoker$class.list(Invoker.scala:56)
        在 scala.slick.jdbc.StatementInvoker.list(StatementInvoker.scala:10)
        在 scala.slick.jdbc.UnitInvoker$class.list(Invoker.scala:150)
        在 scala.slick.driver.BasicInvokerComponent$QueryInvoker.list(BasicInvokerComponent.scala:19)

```

是因为使用错误吗？它是一个错误吗？

如果我使用会引发错误

```
println("query1 = " + query1.firstOption.getOrElse(0)) 
```

还有……

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-24T15:28:28.687

您是否尝试过以下操作？

```
val query1 = for (c <- Coffees) yield c.name.count
println("query1 = " + query1.firstOption.getOrElse(0)) 
```

它背后的秘诀是`c.primary-key.count`；在这种情况下，`name`是 的主键`Coffees`。

# aix - 在 AIX 上监控物理内存使用是否有意义？

> ID：14018520
> 
> 赞同：0
> 
> 时间：2012-12-24T07:37:46.343
> 
> 标签：aix

由于 AIX 特殊的内存使用算法，是否意味着监控物理内存使用情况，以便在性能调优时找出内存瓶颈？如果没有，那我应该关注什么样的KPI来确定我们是否需要扩大RAM容量？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T17:39:08.490

如果程序需要更多可用作 RAM 的内存，则操作系统将开始将内存部分交换到磁盘，因为它认为合适。您需要监视 vmstat 的输出并查找分页活动。我现在无法访问 AIX 机器来举例说明，但我记得手册页很好地解释了那里表示的数据。

此外，这看起来是关于另一个 AIX 特定系统监视工具和监视系统整体内存 (svgmon) 的好文章。

[http://www.aixhealthcheck.com/blog.php?id=255](http://www.aixhealthcheck.com/blog.php?id=255)

要跟踪单个应用程序实例的大小，有几个选项，最常见的是`ps`. 同样，您必须查看手册页以获取有关使用哪些选项的信息。每个进程的内存 sz 有几列。您可以将这些值与您机​​器上可用的总内存进行比较，并通过随时间跟踪了解您的应用程序是否仅增加内存，或者它是否在完成任务时释放内存。

最后，IBM 提供了大量关于 AIX 性能调整的信息，但我始终无法找到阅读这些信息的路线图指南。其中很多假设您知道当前文档集中未解释的事实和特征，因此您必须尝试找到解释，这通常会导致搜索另一层解释。！:^/

IHTH。

# xslt - 在 XSL 中构建具有样式属性的锚标记

> ID：14018522
> 
> 赞同：1
> 
> 时间：2012-12-24T07:37:57.997
> 
> 标签：xslt, styles, anchor

我没有接受过关于 XSL 的正式培训，而且对它完全陌生。基本上我有一个如下的 XML 文件：

```
<document document="wpc_article_video_qp">
  <properties>
    <property type="name" prop_ns="http://sapportals.com/xmlns/cm" prop_name="displayname"/>
    <property type="createdBy">USER.PRIVATE_DATASOURCE.un:LU23921</property>
    <property type="includeInRSS" prop_ns="wpc_wcm" prop_name="wpc_wcm_rss"/>
    <property type="displayNewIcon" prop_ns="wpc_wcm" prop_name="wpc_wcm_new"/>
  </properties>
  <elements>
    <element type="videotitle">TestTitle</element>
    <element type="videopath">ICT/LB_1152kbps.mp4</element>
    <element type="videowidth">500</element>
    <element type="videoheight">250</element>
  </elements>
  <relatedlinks/>
  <relatedfiles/>
</document> 
```

我无法控制 XML。我的意思是 XML 是由工具生成的，我无法更改它。我现在要做的是编写 XSL，它应该生成一个锚标记，如下所示：

```
<a style="display:block;width:500px;height:250px" id="player" href="ICT/LB_1152kbps.mp4"></a> 
```

其中 href、width 和 height 分别从“videopath”、“videowidth”和“videoheight” XML 元素中获取。

我试图在这个网站和其他一些网站上进行搜索，但正如我所说，因为我对 XSL 完全陌生，我真的不知道从哪里开始。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T07:52:44.513

如果您正在寻找一个好的起点，我建议您在图书馆里找一本 XSLT 书籍，或者看看一些在线教程，比如[Zvon 的](http://zvon.org/xxl/XSLTutorial/Output/)教程。在编写 XSLT 时，我强烈推荐使用专门的编辑器 lixe [oXygen](http://oxygenxml.)。它不仅通过自动完成功能和自动关闭标签使您免于输入大量内容，而且还检查所有程序代码和 XPath 语法是否有效。

这里的问题是：您可能会生成一个完整的 HTML 文档，而不仅仅是一个锚标记。因此，这是一个通过匹配元素生成锚标记的模板`<element>`，但必须集成到整个样式表中：

```
<xsl:template match="element">
  <a style="display:block;
            width:{element/@videowidth}px;
            height:{element/@videoheight}px" 
     id="player" href="{element/@videopath}"></a>
</xsl:template> 
```

**编辑：**如果您真的想要一个仅包含锚标记的输出文档：XSLT 处理器开始处理根节点处的输入文档，然后按照您使用`<xsl:apply-templates>`（或`<xsl:for-each>`）告诉它的元素逐步执行。如果您希望模板匹配`<element>`真正启动，您必须从文档元素上下文“移动”到该上下文：

```
<xsl:template match="/">
  <xsl:apply-templates select="document/elements/element"/>
</xsl:template> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-24T12:59:15.080

**以下是使用[AVT](http://www.w3.org/TR/xslt#attribute-value-templates)（属性值模板）的方法：**

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>
 <xsl:strip-space elements="*"/>

 <xsl:template match="elements">
     <xsl:copy>
       <a style="display:block;
                 width:{*[@type='videowidth']}px;
                 height:{*[@type='videoheight']}px"
                 id="player" href="{*[@type='videopath']}"></a>
     </xsl:copy>
 </xsl:template>

 <xsl:template match="text()"/>
</xsl:stylesheet> 
```

**请注意**：

上面的 CSS 属性每个都在一个新的行上——这样做是为了便于阅读。在真正的转变中，人们可能希望在没有空间的情况下保留它们——在没有空间的情况下产生想要的结果。

**当此转换应用于提供的 XML 文档时：**

```
<document document="wpc_article_video_qp">
  <properties>
    <property type="name" prop_ns="http://sapportals.com/xmlns/cm" prop_name="displayname"/>
    <property type="createdBy">USER.PRIVATE_DATASOURCE.un:LU23921</property>
    <property type="includeInRSS" prop_ns="wpc_wcm" prop_name="wpc_wcm_rss"/>
    <property type="displayNewIcon" prop_ns="wpc_wcm" prop_name="wpc_wcm_new"/>
  </properties>
  <elements>
    <element type="videotitle">TestTitle</element>
    <element type="videopath">ICT/LB_1152kbps.mp4</element>
    <element type="videowidth">500</element>
    <element type="videoheight">250</element>
  </elements>
  <relatedlinks/>
  <relatedfiles/>
</document> 
```

**产生了想要的正确结果：**

```
<elements>
   <a style="display:block;width:500px;height:250px" id="player" href="ICT/LB_1152kbps.mp4"/>
</elements> 
```

# c# - 通过 ajax 发送的数据不会写入数据库

> ID：14018527
> 
> 赞同：0
> 
> 时间：2012-12-24T07:38:19.480
> 
> 标签：c#, ajax, httphandler

我通过 ajax 发送数据以格式化并保存在我的数据库中。我通过 JSON 将数据发送到使用它的 HttpHandler 。

```
function sendMail() {
    $.ajax({
        type: "POST",
        url: '<%= ResolveUrl("~/MailAction.ashx") %>',
        data: { act: "sendMail", to: $('#<%= txtMailTo.ClientID %>').val(), from: $('#<%= lblUserID.ClientID %>').text(), subject: $('#<%= txtMailSubject.ClientID %>').val(), message: $('#<%= txtMailMessage.ClientID %>').val() },
        success: window.location = "Inbox.aspx"
    });
} 
```

不幸的是，我在 HttpHandler 上设置的断点似乎没有被命中，所以我无法调试下面的代码，但我看不出它有任何问题：

```
 public void ProcessRequest(HttpContext context)
    {
        int mailid = 0;
        string action = context.Request["act"];

        MySqlContext db = new MySqlContext();

        string sql = "";
        List<MySqlParameter> args = new List<MySqlParameter>();

        switch (action)
        {
            case "sendMail":
                string to = context.Request["to"];
                int from = int.Parse(context.Request["from"]);
                string subject = context.Request["subject"];

                //
                // FORMAT TEXT FROM MESSAGE BODY
                //
                string message = formatText(context.Request["message"]);

                int userid = 0;
                //
                // GET RECIPIENT ID
                //
                sql = "select userid from users where username = @to";
                args.Add(new MySqlParameter() { ParameterName = "@to", MySqlDbType = MySqlDbType.VarChar, Value = to });

                MySqlDataReader dr = db.getReader(sql, args);

                if (dr.HasRows)
                {
                    dr.Read();

                    userid = dr.GetInt32("userid");
                }
                dr.Close();
                args.Clear();

                sql = "insert into mail(sender, recipient, datesent, subject, message, status) values (@me, @you, @date, @sub, @msg, @stat)";
                args.Add(new MySqlParameter() { ParameterName = "@me", MySqlDbType = MySqlDbType.Int32, Value = from });
                args.Add(new MySqlParameter() { ParameterName = "@you", MySqlDbType = MySqlDbType.Int32, Value = to });
                args.Add(new MySqlParameter() { ParameterName = "@date", MySqlDbType = MySqlDbType.DateTime, Value = DateTime.Now.ToString("yyyy-MM-dd HH:mm:ss") });
                args.Add(new MySqlParameter() { ParameterName = "@sub", MySqlDbType = MySqlDbType.VarChar, Value = subject });
                args.Add(new MySqlParameter() { ParameterName = "@msg", MySqlDbType = MySqlDbType.VarChar, Value = message });
                break;
            }

        if (args.Count == 0)
        {
            db.execute(sql);
        }
        else
        {
            db.execute(sql, args);
        }
    } 
```

关于它在做什么，我只能说它没有插入到数据库中。

我使用相同的 javascript 将其他值传递给其他事件的处理程序，并且一切正常。大多数是对数据库进行更新。

谁能看看这里的代码有没有问题？在我看来，完全在服务器端执行此操作可能是更好的做法，所以如果这是一个更好的选择，那么我非常愿意尝试一下。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T09:46:03.113

'成功：`window.location = "Inbox.aspx"'`

`window.location = "Inbox.aspx"`立即评估并在发出任何请求之前切换页面。

使用一个函数。

# iphone - 在地图上显示谷歌方向 api 响应

> ID：14018529
> 
> 赞同：2
> 
> 时间：2012-12-24T07:38:34.997
> 
> 标签：iphone, ios, google-maps-api-3

我在我的 iOS 应用程序中使用谷歌 api V3，我请求谷歌 api 方向服务，通过 http GET 方法，我得到一个非常大的 json 响应，我有很多从起点到终点的备用路线，现在我想显示路线地图上的每个选择，我应该怎么做？是否需要在iOS中集成google sdk，或者我可以只使用webView，请帮助我，并提出最简单的方法。提前致谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-24T07:53:39.817

您无需包含任何 google SDK 即可在地图上绘制路线。看看下面的课程。

[MK折线](https://developer.apple.com/library/ios/#documentation/MapKit/Reference/MKPolyline_class/Reference/Reference.html#//apple_ref/doc/uid/TP40009719)

[MKPolyLineview](https://developer.apple.com/library/ios/#documentation/MapKit/Reference/MKOverlayView_class/Reference/Reference.html#//apple_ref/doc/uid/TP40009715)

google map api Direction 服务将为您提供腿（坐标）以绘制两个特定点之间的路线。

由于您已经从 Direction api 获得了 json 响应，现在您必须解析 json 并从 json 中获取所有腿点以创建坐标数组。

[用于解析的 Jsonkit](https://github.com/stig/json-framework)

这些点可能是或大部分是加密的。[如何将 Google Directions API 折线字段解码为 iPhone 的 Objective-C 中的经纬度点？](https://stackoverflow.com/questions/9217274/how-to-decode-the-google-directions-api-polylines-field-into-lat-long-points-in)

如果你有坐标数组，那么首先你必须创建一个 CLLocationCoordinate2D 数组，如下所示：

```
CLLocationCoordinate2D *pointArr        =       malloc(sizeof(CLLocationCoordinate2D) * [your_CoordinateArray count]);

for(int i = 0; i < [your_CoordinateArray count]; i++){
  pointArr[i]       =      [your_CoordinateArray objectAtIndex:i];
} 
```

然后你必须将折线添加到你的地图

```
 MKPolyline *line                        = [MKPolyline polylineWithCoordinates:pointArr count:[your_CoordinateArray count]];

    if (nil != line)
    {
        [your_Map addOverlay:line];

    } 
```

然后你必须实现以下地图委托：

```
- (MKOverlayView *)mapView:(MKMapView *)mapView viewForOverlay:(id <MKOverlay>)overlay
{       

MKOverlayView* overlayView = nil;

lineView                    =       [[MKPolylineView alloc] initWithPolyline:overlay];// lineView is an ivar, object of MKPolylineView
lineView.fillColor          =       [UIColor greenColor];
lineView.strokeColor        =       [UIColor greenColor];

lineView.lineWidth          =       10.0;
lineView.alpha              =       0.9;
overlayView                 =       lineView;

return overlayView;
} 
```

现在，如果您想在两点之间显示两条不同的路线，那么您必须创建两个不同的坐标数组并将上述方法应用于两个数组

希望这会帮助你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-24T07:50:49.013

无需说集成 google sdk，您可以简单地使用 webView，因为我相信 webView 可以为您提供替代视图，但 SDK 中的用户界面比在线更简洁。但目前，我不相信 SDK 允许其他应用程序显示我使用的新 SDK 的替代路线。maps.google.com 中的代码现在与 API 中的代码有很大不同，并且可以访问不同的服务。特别是，它有一个 API 中不存在的大型外部模块 mod_suggest.js。但是您可以通过以下方式实现它

1) 向 maps.google.com 提出请求，让它执行建议，即打开一个新的浏览器窗口并传递类似 [http://www.google.com/maps?f=d&source=s_d&saddr=Jurong+的内容West,+Singapore&da](http://www.google.com/maps?f=d&source=s_d&saddr=Jurong+West,+Singapore&da) ddr=Ang+Mo+Kio,+Singapore&hl=en

2）只显示正常路线和避开高速公路路线。

3) 尝试猜测合理的航路点以添加到路线中间，这可能会导致合理的替代方案。这并不容易，除非你有一个高速公路或高速公路交叉口的数据库，并且可以在你的起点和终点之间寻找这样的交叉口（对于“介于”的一些近似值）。

使用 lat/lng 坐标作为航路点可能会出现问题，尤其是在涉及双车道的情况下。如果坐标是针对错误行车道上的某个点，GDirections 将开出相当大的距离，从而使您走错路。但即使使用街道名称，您也可能会在路点附近遇到奇怪的问题，如下所示：

来自：新加坡裕廊西 至：新加坡亚逸拉惹机场 至：新加坡宏茂桥

也许真正解决这个问题的唯一方法是在双车道的两侧包括点，并且远离穿过下方或上方的道路，然后尝试过滤掉那些愚蠢的道路。

考虑这些例子

从：新加坡裕廊西到：1.32558,103.740764 到：新加坡宏茂桥

从：新加坡裕廊西到：1.32582,103.740764 到：新加坡宏茂桥

其中一个通过复杂的游览增加了 7 分钟的行程，以访问错误的道路一侧。

编写代码来过滤掉愚蠢的路线并不容易。作为第一个近似值，您可以丢弃估计时间比初始路线长 10% 以上的路线。您还可以比较双车道相对两侧的点对的持续时间，并始终丢弃较慢的点。

编写代码来丢弃重复的路由也不是一件容易的事。例如，Bukit Timah Expy 或 Kranji Expy 上的一个点可能会创建一条与 Google 的 Seletar Expy 建议重复的路线。

您可能想看看：[http ://www.geocodezip.com/example_geo2.asp?waypts=yes&addr1=Jurong+West,+Singapore&addr2=Ang+Mo+Kio,+Singapore&waypt=Ayer+Rajah+Expy+singapore&geocode=1&geocode =2](http://www.geocodezip.com/example_geo2.asp?waypts=yes&addr1=Jurong+West,+Singapore&addr2=Ang+Mo+Kio,+Singapore&waypt=Ayer+Rajah+Expy+singapore&geocode=1&geocode=2)

但这可能不是合法的实现，因为 API 不允许这样做。希望这可以帮助。

# java - 在android中一次计算多个操作用于计算器

> ID：14018531
> 
> 赞同：0
> 
> 时间：2012-12-24T07:38:43.443
> 
> 标签：java, android

我想在计算器中进行多项操作，例如：`2+3*3/7`. 怎么做。谁能帮我。计算器工作的单一操作。

如何一次计算多个操作`editText`。此代码添加在相等按钮单击方法上。

下面是我的代码：

```
 btnEqualto.setOnClickListener(new OnClickListener() 

    {
        @Override

        public void onClick(View v) 

                      {

                     String str2 = edtxt.getText().toString();

                       if (buttonPressed.equals("+")) 

            {
                Log.e(TAG,"dot operation="+strDot);

                if (strDot.equals(".")) 

                {
                    Log.e(TAG, "If Codition :");

                    String str1[] = str2.split("[+]");

                    Log.e(TAG,"str1 ="+str1);

                    String strVal11 = str1[0];

                    String strVal22 = str1[1];

        Log.e(TAG, "strValues  :" + strVal11 + " & " + strVal22);

                    Double xx = Double.parseDouble(strVal11);

                    Double yy = Double.parseDouble(strVal22);

       Log.e(TAG, "Value of x :" + xx + "  AND y : " + yy);

                    Log.e(TAG, "dot operation");

                    Double result = xx + yy;

                    Log.e(TAG, "Result  :" + result);

                    edtxt.setText(result + "");

                    Log.e(TAG, "VAlue of Result :" + edtxt);

                }

                else

                {

                    Log.e(TAG, "If Codition :"+strVal2);

                    strDot = "";

                    String str1[] = str2.split("[+]");

                    strVal1 = str1[0];

                    strVal2 = str1[1];

                          Log.e(TAG, "Esle Condition 4 Pllus strValues  :" + strVal1 + " & " + strVal2);

                    x = Integer.parseInt(strVal1);

                    y = Integer.parseInt(strVal2);

            Log.e(TAG, "Value of x :" + x + "  AND y : " + y);

                    int result = x + y;

                    Log.e(TAG, "Result  :" + result);

                    edtxt.setText(result + "");
                                                    Log.e(TAG, "VAlue of Result :" + edtxt);

                }

            }

          }

         }

         ); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-24T07:57:56.633

试试 exp4j：[一个简单的 java 数学表达式解析器。](http://www.objecthunter.net/tinybo/blog/articles/86)

> exp4j 采用人类可读的中缀表示法的数学术语，并通过首先将输入通过 Dijkstra 的 Shunting Yard 算法转换为后缀 (RNP) 表示法并通过简单的堆栈算法评估后缀项来评估它的结果。

试试看这是否适合你..

# wordpress - 如何在循环投资组合页面的内容上方显示投资组合类别

> ID：14018533
> 
> 赞同：0
> 
> 时间：2012-12-24T07:38:43.327
> 
> 标签：wordpress, themes

我想在显示所有投资组合的内容上方显示投资组合类别。我知道循环portfolio.php中需要进行一些修改，但是如何将其显示在内容帖子上方。我想以 ul li 格式显示怎么可能？我正在使用广泛的主题

我的循环portfolio.php代码如下

```
<?php 
global $avia_config;
if(isset($avia_config['new_query'])) {

    query_posts($avia_config['new_query']);
 }

// check if we got a page to display:
if (have_posts()) :

    $loop_counter = 1;
    $extraClass = 'first';

    //iterate over the posts
    while (have_posts()) : the_post();  

    //get the categories for each post and create a string that serves as classes so the javascript can sort by those classes
    $sort_classes = "";
    $item_categories = get_the_terms( $id, 'portfolio_entries' );

    if(is_object($item_categories) || is_array($item_categories))
    {
        foreach ($item_categories as $cat)
        {
            $sort_classes .= $cat->slug.'_sort ';
        }
    }

?>

        <div class='post-entry one_third all_sort <?php echo $sort_classes.$extraClass; ?>'>

            <a href="<?php echo get_permalink() ?>" rel="bookmark" title="<?php _e('Permanent Link:','avia_framework')?> <?php echo avia_inc_display_featured_within_entry('portfolio', false); ?>"><?php echo avia_inc_display_featured_within_entry('portfolio', false); ?></a>

            <a href="<?php echo get_permalink() ?>" rel="bookmark" title="<?php _e('Permanent Link:','avia_framework')?> <?php the_title(); ?>"><?php the_title(); ?></a>

            <span class='date_sort hidden'><?php the_time('Y m d H i s'); ?></span>

            <div class="entry-content">

                <!--<?php the_excerpt(); ?> -->

            <!--<a class="more-link" href="<?php echo get_permalink(); ?>"><?php _e('Read more','avia_framework'); ?></a>
            -->
            </div>                          
        <!-- end post-entry-->
        </div>

<?php 

    $loop_counter++;
    $extraClass = "";
    if($loop_counter > 3)
    {
        $loop_counter = 1;
        $extraClass = 'first';
    }

    endwhile;       
    else: 
?>  

    <div class="entry">
        <h1 class='post-title'><?php _e('Nothing Found', 'avia_framework'); ?></h1>
        <p><?php _e('Sorry, no posts matched your criteria', 'avia_framework'); ?></p>
    </div>
<?php

    endif;

?> 
```

我想在之前显示投资组合类别

```
<a href="<?php echo get_permalink() ?>" rel="bookmark" title="<?php
_e('Permanent Link:','avia_framework')?> <?php echo avia_inc_display_featured_within_entry('portfolio', false); ?>"> 
```

里面

```
<div class='post-entry one_third all_sort <?php echo
$sort_classes.$extraClass; ?>'> 
```

所以如果有人知道这一点，请帮助我。希望朋友们帮助我解决这个问题

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T18:14:25.140

尝试插入以下代码

```
<?php
$post_id = get_the_ID()
$item_terms = get_the_terms( $post_id, 'portfolio_entries' );

if($item_terms !== false && count($item_terms) > 0)
{
    echo '<ul>';
    foreach ($item_terms as $term)
    {
        echo '<li>'.$term->name.'</li>';
    }
    echo '</ul>';
}
?> 
```

刚过

```
<div class='post-entry one_third all_sort <?php echo $sort_classes.$extraClass; ?>'> 
```

# pentaho - 如何在pentaho中查找文本文件的内容？

> ID：14018534
> 
> 赞同：1
> 
> 时间：2012-12-24T07:38:44.310
> 
> 标签：pentaho, kettle

我有一个`ETL`提供文本文件输出的文件，我必须检查那些文本内容是否有`error or bad`使用 pentaho 的单词。

有什么简单的方法可以找到吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T15:15:55.463

如果您尝试处理多个文件，您可以使用获取文件名步骤来获取所有文件名。然后，如果您的文本文件很小，您可以使用获取文件内容步骤将整个文件作为一行，然后使用 Java 过滤器或其他匹配步骤（例如，RegEx）来搜索单词。如果您的文本文件太大但基于行或以其他方式采用固定格式（如果您使用文本文件输出步骤可能是这种情况），您可以使用文本文件输入步骤来获取行，然后是匹配器步骤（见上文）以查找该行中的单词。然后，您可以使用 Filter Rows 步骤仅选择那些包含单词的行，然后 Select Values 仅选择文件名，然后对文件名执行 Sort Rows，然后使用 Unique Rows 步骤。结果应该是内容包含搜索词的文件名列表。这可能看起来有很多步骤，但是 Pentaho 数据集成或 PDI（又名 Kettle）被设计为具有独特（并且非常可重用）功能的步骤流。一个更小但更少“PDI”的方法是编写一个用户定义的 Java 类（或其他脚本）步骤来完成所有工作。此解决方案具有较少的步骤，但不是非常可配置或可重用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-28T07:29:55.250

如果您自己编写这些文件，那么您不知道内容吗？因此，请扫描您已经将它们存储在内存中的字段。

如果您试图查看 Pentaho 是否已将错误写入文件，那么您应该在输出步骤中使用错误处理。

最后，PDI 不是文本搜索工具。如果你真的需要这样做，那么最好的选择可能是好的老 grep ..

# python - Python：通过通配符获取 memcached 键值列表

> ID：14018535
> 
> 赞同：4
> 
> 时间：2012-12-24T07:38:49.947
> 
> 标签：python, django, memcached

我在我的 Django 应用程序中使用`memcached`with作为二进制文件。`pylibmc`现在我想从缓存中获取键值列表。

假设我在缓存中有这个键值对数据，

```
{'Key_1':[1,2,3]} {'Key_2':[4,5,6]} {'Key_3':[6,7,8]} 
```

我可以通过

```
cache.get('Key_1') 
```

我想获取所有`Key_*`数据

```
cache.get('Key_*') 
```

有人建议一种方法吗？或者有可能吗？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-24T08:00:50.507

如果您有字典，则可以执行以下操作：

```
import re
dict = { 'Key_1':[1,2,3], 'Key_2':[4,5,6], 'Key_3':[6,7,8] }
r = re.compile(r"Key_\d+")   // matching expression
matching_keys = filter(r.match, dict.keys()) 
```

这样，您可以获得所有匹配的键，然后简单地迭代这些键。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-24T08:27:23.500

您可以使用该`mcdict`库并像普通字典一样遍历 memcached，或者您可以查看[`mcdict`源代码](https://github.com/wavetossed/mcdict)并在您自己的代码中应用相同的技术。

# css - CSS：每个图标 漂浮在行的中间

> ID：14018536
> 
> 赞同：0
> 
> 时间：2012-12-24T07:39:01.650
> 
> 标签：css, css-float, html-lists

一开始，这就是[小提琴](http://jsfiddle.net/NXWPE/)。

我想要一个`<ul>`，其中每个`<li>`都有一个`<p>`，然后是一个漂浮在 rhs 上的图标。该段落可能需要 1-4 行，无论如何我都希望图标很好地位于行的中间。双重包装`<p>`是必要的，相信我:)

图标的宽度`<p>`必须比图标所需的空间小 100%。基本上，我希望图标位于`<p>`.

[这里](https://stackoverflow.com/questions/10799933/adding-icon-to-li-menu)的解决方案使用`background-image`，但这对我没有好处，因为图像必须用作移动设备的可拖动句柄。（我正在使用[这种方法](http://miguelrodelas.com/web/2011/11/09/make-jquery-ui-sortable-dragdrop-work-on-ipad-safari/)来修改用于触摸屏的 jQuery 可排序桌面站点。）

由于 jsfiddle 的要求，小提琴使用了占位符`<img>`，但我实际上会使用`<a>`带有图像的精灵。

我想避免上边距为负数，因为边距会移到前一行并可能会弄乱拖动（即，您可能会无意中拖动错误的行）。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-24T08:02:38.380

根据[bfrohs](https://stackoverflow.com/users/526741/bfrohs)的[这个答案](https://stackoverflow.com/a/6295861/993915)，

[**演示**在这里](http://jsbin.com/ahomup/10/)

**HTML**

```
 <ul>
    <li class="absoluteCenterWrapper">
        <p class="text">This is some text that flows over multiple lines and I want it to have the icon on the rhs that stays in the middle of the line no matter how many lines of text (and I'd really like not to use a negative top margin on the image).</p>
        <img class="icon" src="http://placekitten.com/g/20/20">
    </li>
</ul> 
```

**CSS**

```
.text {
    margin-right:35px;
}

.absoluteCenterWrapper {
    position:relative;
}

.icon {
     margin:auto;
     position:absolute; 
     max-height:100%;
     max-width:100%;
     top:0;
     bottom:0;
     right:0;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-24T08:00:48.667

将 li 元素的位置更改为绝对位置，将 img 的位置更改为绝对位置。考虑添加此代码而不是使用您的 css。

```
.icon{
margin:40% 5%;
float:right;position:absolute;
} 
```

见这个小提琴。

[http://jsfiddle.net/NXWPE/47/](http://jsfiddle.net/NXWPE/47/)

# linux - 如何在没有输出的情况下使用 grep 获取行号？

> ID：14018546
> 
> 赞同：3
> 
> 时间：2012-12-24T07:39:34.117
> 
> 标签：linux, shell, grep

> **可能重复：**
> [使用 grep 仅报告行号](https://stackoverflow.com/questions/6958841/use-grep-to-report-back-only-line-numbers)

我只想看到行号。我不需要查看剩余的输出。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-24T07:43:06.423

管道`grep -n`输出，通常看起来像：

```
11: stuff that matched
43: more stuff that matched 
```

通过 sed 剥离出匹配的部分：

```
grep -n pattern file | sed -e 's/:.*//g'

11
43 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-24T07:40:56.800

`grep -n`或`--line-number`选项将为您执行此操作。您可以在 grep 帮助文件中找到这些信息，您可以通过使用找到该信息`grep --help`或`grep --help | less`更仔细地阅读它。还可以考虑使用手册页：`man grep`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-24T07:45:54.860

你也可以用`awk`。

```
grep -n word file | awk -F: '{ print $1 }' 
```

正如@Barmar 指出的那样，您可以只使用单线`awk`：

```
awk '/regex/ { print NR }' file 
```

既然你没有，`awk`你也可以使用`cut`：

```
grep -n word file | cut -d: -f1 
```

# php - Symfony 2 区域设置区分大小写

> ID：14018547
> 
> 赞同：2
> 
> 时间：2012-12-24T07:39:35.737
> 
> 标签：php, symfony, symfony-2.0

我正在使用 symfony 2.0 进行开发，m 使用语言环境名称，例如，不同语言的 en_ZA、en_US、en_QA，使用 Config.yml 将 en_ZA 设置为默认语言环境，

例如，我的网址被称为如下，对于不同的语言，

[http://mydomain.com/en_ZA/user/list](http://mydomain.com/en_ZA/user/list)

[http://mydomain.com/en_QA/user/list](http://mydomain.com/en_QA/user/list)

现在，当我尝试在 url 中输入错误的语言环境时，例如

[http://mydomain.com/en_AA/user/list](http://mydomain.com/en_AA/user/list)

[http://mydomain.com/en_BB/user/list](http://mydomain.com/en_BB/user/list)

它使用回退并返回默认语言翻译，

但是当我使用以下网址调用语言环境时，它会产生问题

[http://mydomain.com/en_Za/user/list](http://mydomain.com/en_Za/user/list)

[http://mydomain.com/en_zA/user/list](http://mydomain.com/en_zA/user/list)

[http://mydomain.com/en_za/user/list](http://mydomain.com/en_za/user/list)

它只返回带有翻译变量的模板文件。它不返回后备或翻译。

感谢您的任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T07:52:29.203

如果您尝试涵盖不同的语言和翻译，那么我建议您按照 Symfony 在其文档中概述的方式进行操作。

这是一个[很好的入门指南](https://stackoverflow.com/questions/8271125/multilanguage-in-symfony2-and-twig#answer-8271200)以及文档的链接。

# jsf - JSF：向 ap:selectOneMenu 添加转换器和验证器时，找不到类型的验证器

> ID：14018552
> 
> 赞同：1
> 
> 时间：2012-12-24T07:39:54.883
> 
> 标签：jsf, jsf-2, primefaces

我目前在尝试将转换器和验证器添加到单个字段时遇到了上面指定的问题。我知道这两个是如何工作的，因为我以前使用过它们，但这是我第一次在一个领域同时尝试它们。这是我的代码：

```
<p:selectOneMenu id="bussProgram"
    value="#{signupWizardBean.subscription.businessProgram}">
    <f:converter binding="#{membershipProgramConverter}"></f:converter>
    <f:validator binding="#{dropdownValidator}"></f:validator>
    <f:selectItems value="#{signupWizardBean.membershipPrograms}"
        var="plan" itemValue="#{plan}"
        itemLabel="#{plan.description}" />
</p:selectOneMenu> 
```

转换器

```
@Named
@ApplicationScoped
public class MembershipProgramConverter implements Converter {
    @PersistenceContext
    private transient EntityManager em;

    @Inject
    private Logger log;

    @Override
    public Object getAsObject(FacesContext ctx, UIComponent component,
        String value) {
    if (StringUtils.isBlank(value) || value.equals("0"))
        return null;

    return em.find(MembershipProgram.class, new Long(value));
}

    @Override
    public String getAsString(FacesContext fc, UIComponent uic, Object o) {
        MembershipProgram mp = (MembershipProgram) value;
    return mp.getId() != null ? String.valueOf(mp.getId()) : null;
    }
} 
```

验证器：

```
@Named
@ApplicationScoped
public class DropdownValidator implements Validator, Serializable {
    private static final long serialVersionUID = -456545939475878299L;

    @Inject
    private ResourceBundle bundle;

    @Inject
    private FacesContext facesContext;

    @Inject
    private Logger log;

    @Override
    public void validate(FacesContext context, UIComponent component,
        Object value) throws ValidatorException {
    log.debug("[dropship-web] validating value={}", value);
    if (value == null) {
        FacesMessage msg = new FacesMessage(
                bundle.getString("error.requiredField"),
                bundle.getString("error.requiredField"));
        msg.setSeverity(FacesMessage.SEVERITY_ERROR);
        facesContext.addMessage("promoCode", msg);

        throw new ValidatorException(msg);
    }
}
} 
```

实体类：

```
@Entity
@Table(name = "CRM_MEMBERSHIP_PROGRAMS", uniqueConstraints = @UniqueConstraint(columnNames = { "code" }))
@SequenceGenerator(name = "ID_GENERATOR", sequenceName = "CRM_MEMBERSHIP_PROGRAM_SEQ")
public class MembershipProgram extends BaseEntity {
    private static final long serialVersionUID = -7796298586810386239L;

    @Size(max = 25)
    @Column(name = "CODE", nullable = false)
    private String code;

    @Size(max = 100)
    @Column(name = "DESCRIPTION", nullable = true)
    private String description;

    public MembershipProgram() {

    }

    public MembershipProgram(long id, String description) {
        setId(id);
        this.description = description;
    }

    public String getDescription() {
        return description;
    }

    public void setDescription(String description) {
        this.description = description;
    }

    public String getCode() {
        return code;
    }

    public void setCode(String code) {
        this.code = code;
    }

    @Override
    public int hashCode() {
        final int prime = 31;
        int result = super.hashCode();
        result = prime * result + ((code == null) ? 0 : code.hashCode());
        result = prime * result
                + ((description == null) ? 0 : description.hashCode());
        return result;
    }

    @Override
    public boolean equals(Object obj) {
        if (this == obj)
            return true;
        if (!super.equals(obj))
            return false;
        if (getClass() != obj.getClass())
            return false;
        MembershipProgram other = (MembershipProgram) obj;
        if (code == null) {
            if (other.code != null)
                return false;
        } else if (!code.equals(other.code))
            return false;
        if (description == null) {
            if (other.description != null)
                return false;
        } else if (!description.equals(other.description))
            return false;
        return true;
    }
} 
```

请注意，在调试时：同时调用 MembershipProgramConverter.getAsObject/getAsString、DropdownValidator.validate 方法。

我还发现无论有没有从下拉列表中选择的项目，我都会遇到：

```
.validation.UnexpectedTypeException: HV000030: No validator could be found for type: com.czetsuya.models.membership.MembershipProgram.
javax.validation.UnexpectedTypeException: HV000030: No validator could be found for type: com.czetsuya.models.membership.MembershipProgram. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T10:07:44.173

最后我能够找出问题所在，我在目标实体上添加了@Size注释，只是删除了@Size：

```
@Size(max = 25)
@OneToOne(optional = false)
@JoinColumn(name = "BUSINESS_PROGRAM", nullable = false)
private MembershipProgram businessProgram; 
```

当我删除@Size时，问题解决了，但我遇到了一个新问题，提交时表单总是抛出：

```
Validation Error: Value is not valid 
```

要修复 Value 无效，请确保您已正确实现 Model.equals 方法。我的错是我依赖 eclipse 生成哈希码和 equals 功能，我没有注意到它从我的 BaseEntity 调用 equals 方法。

# linux - 当我在启用“-pg”的情况下编译我的程序时，Valgrind 报告了“内存泄漏”？

> ID：14018553
> 
> 赞同：2
> 
> 时间：2012-12-24T07:39:56.993
> 
> 标签：linux, memory, profiling, valgrind, memory-leaks

在编译以下简单代码时，启用了 -pg 的 Valgrind 报告了内存泄漏。

```
#include <iostream>
#include <boost/filesystem.hpp>

#define BOOST_FILESYSTEM_VERSION 3

using boost::filesystem::path;

using namespace std;

int main() {

        path ptDir;
        ptDir = "/home/foo/bar";

        if (true == is_directory((const path &)ptDir)){
                cout << "ptDir: " << ptDir << endl;
        }
} 
```

完整的编译选项如下。

```
g++ -pg -g test.cpp -lboost_system -lboost_filesystem 
```

运行 valgrind 的命令是：

```
valgrind --gen-suppressions=all --track-origins=yes --error-limit=no --leak-check=full --show-reachable=yes -v --trace-children=yes --track-fds=yes --log-file=vg.log ./a.out 
```

然后 valgrind 给了我一个内存泄漏错误。

```
==9598== HEAP SUMMARY:
==9598==     in use at exit: 4,228 bytes in 1 blocks
==9598==   total heap usage: 136 allocs, 135 frees, 17,984 bytes allocated
==9598==
==9598== Searching for pointers to 1 not-freed blocks
==9598== Checked 130,088 bytes
==9598==
==9598== 4,228 bytes in 1 blocks are still reachable in loss record 1 of 1
==9598==    at 0x402A5E6: calloc (in /usr/lib/valgrind/vgpreload_memcheck-x86-linux.so)
==9598==    by 0x4260F44: monstartup (gmon.c:134)
==9598==    by 0xBED6B636: ???
==9598==    by 0x4E45504E: ???
==9598==
{
   <insert_a_suppression_name_here>
   Memcheck:Leak
   fun:calloc
   fun:monstartup
   obj:*
   obj:*
}
==9598== LEAK SUMMARY:
==9598==    definitely lost: 0 bytes in 0 blocks
==9598==    indirectly lost: 0 bytes in 0 blocks
==9598==      possibly lost: 0 bytes in 0 blocks
==9598==    still reachable: 4,228 bytes in 1 blocks
==9598==         suppressed: 0 bytes in 0 blocks
==9598==
==9598== ERROR SUMMARY: 0 errors from 0 contexts (suppressed: 0 from 0)
==9598== ERROR SUMMARY: 0 errors from 0 contexts (suppressed: 0 from 0) 
```

这个对吗？我正在使用 Ubuntu 12.04/内核 3.2.0-32-generic

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-24T08:28:05.337

[Valgrind 常见问题解答](http://valgrind.org/docs/manual/faq.html#faq.deflost)：

```
"still reachable" means your program is probably ok -- it didn't free some 
memory it could have. This is quite common and often reasonable. Don't use
--show-reachable=yes if you don't want to see these reports. 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-24T09:21:53.920

allocatio 来自的事实 `by 0x4260F44: monstartup (gmon.c:134)` 表明它是 -pg 的副作用-您无能为力。不要混合 -pg 和 valgrind 是我的建议。

# grails - Grails 允许 null 表示双重不工作

> ID：14018554
> 
> 赞同：2
> 
> 时间：2012-12-24T07:40:16.260
> 
> 标签：grails, grails-orm

可空值不适用于 lat 和 lng。请帮忙。

```
class Location {
    int id
    String country
    String province
    String city
    double lat 
    double lng 
static mapping = {
    table: 'Locaations'
    country length:100
    province length: 100
    city length: 100
}    
static constraints = {
    province(blank:true, nullable:true)
    city(blank:true, nullable:true)
    lat(blank: true, nullable:true)
    lng (blank:true, nullable:true)

} 
```

}

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-24T07:46:41.707

原始`double`类型变量本身既不能为空也不能为空白（`blank:true`仅适用于字符串）。它与 Grails 无关。改用 java.lang.Double ：

```
.....
    Double lat 
    Double lng 
..... 
```

# c++ - C++模板函数中的反向调用

> ID：14018555
> 
> 赞同：3
> 
> 时间：2012-12-24T07:40:26.690
> 
> 标签：c++, templates

我无法在模板函数中进行反向调用，尽管传递给它的参数似乎没有问题。首先是头文件：

```
#ifndef TestTemplate_TestTemplate_h
#define TestTemplate_TestTemplate_h

template<int size>
void printArray(int (*iarr)[size]);

#include "TestTemplate.cpp"
#endif 
```

第二个是 .cpp 文件：

```
#include <iostream>

using std::cout;
using std::endl;
template<int size>
void printArray(int (*iarr)[size]){
    if(size == 1){
        return;
    }
    else{
        const int s = size - 1;
        cout << size << endl;
        int arr[s][s] = {};
        printArray<s>(arr);
    }
} 
```

最后是主文件：

```
#include <iostream>
#include "TestTemplate.h"
int main(int argc, const char * argv[])
{
    const int size = 4;
    int iarr[size][size]= {{1, 2, 3, 4}, {1, 2, 3, 4}, {1, 2, 3, 4}, {1, 2, 3, 4}};
    printArray<size>(iarr);
} 
```

现在我得到一个编译错误说

```
no matching function for call to 'printArray' 
```

在源文件中。也许模板编程中有一些我不知道的语法。希望有人能指出我。非常感谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-24T08:17:27.673

您不能使用运行时结构来终止模板递归（完全在编译时生成），例如`if`. 编译器总是必须实例化你`if`inside的两个分支`printArray`，即使它“知道”其中一个分支不会被执行。这意味着您的编译时递归并未真正终止。它可能是无限的。`arr`当编译器尝试声明一个大小`0`为非法的数组时，它只会出现编译错误。这就是触发错误的原因。

同样，当编译器生成 时`printArray<1>`，它会实例化 inner 的两个分支的代码，这`if`意味着它将尝试声明

```
int arr[0][0] = {}; 
```

这是非法的。

您从编译器获得的错误消息具有误导性，可能是因为您的编译器实现了一些非标准扩展，允许它接受零大小的数组。实际上，错误应该由零大小的数组声明触发。

如果您尝试实现编译时模板递归，则必须使用编译时技术（与运行时分支相反）使其触底。在您的情况下，可以通过使用显式特化来完成，即通过添加单独的显式特化非递归版本`printArray`for 数组 size `1`。

```
template<>
void printArray<1>(int (*iarr)[1]) {
} 
```

（我不知道你为什么不为 size 的数组做任何事情`1`，我只是忠实地复制了你想要的功能。）

或者，您可以通过使用普通函数重载而不是显式模板特化来实现相同的效果。声明这个重载版本

```
void printArray(int (*iarr)[1]) {
} 
```

它也将解决问题。（请记住，在这种情况下，它必须在递归模板*之前声明）。*`printArray`

当然，现在您不再需要在递归版本中进行分支

```
template<int size>
void printArray(int (*iarr)[size]) {
    const int s = size - 1;
    cout << size << endl;
    int arr[s][s] = {};
    printArray<s>(arr);
} 
```

PS 而且没有必要`printArray`在你的代码示例中明确指定模板参数。您可以将您的函数称为`printArray(arr)`. 编译器会推导出`size`.

# python - 使用空格或分割函数：

> ID：14018557
> 
> 赞同：1
> 
> 时间：2012-12-24T07:40:34.913
> 
> 标签：python, python-2.7

我正在尝试通过基于诸如 line.split(" ")[1].strip() 之类的空间进行拆分，从下面的输入行中获取“CHIP3_0.L.1.2”，有人有更好的输入吗？

```
line=ProductLine:    CHIP3_0.L.1.2 OSVer:  HWPlatform: ABC1234 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-24T07:45:55.010

它非常简单 -

```
>>> line.split()[1]
'CHIP3_0.L.1.2' 
```

要在空格的基础上进行拆分，只需使用 split() 即可，无需任何参数。

# javascript - 如何在 Jquery 中将 DropdownList 转换为 Json

> ID：14018558
> 
> 赞同：1
> 
> 时间：2012-12-24T07:40:45.283
> 
> 标签：javascript, jquery, json

我有一个 Dropdownlist 列表包含这样的内容：

```
<select id="sample" >
  <option value="1">FRIEND</option>
  <option value="2">GOOGLE</option>
  <option value="3">AGENT</option>
</select> 
```

我需要像这样将 Dropdownlist 转换为 Json fromat：

```
 var json={"FRIEND:"1","GOOGLE":"2","AGENT":"3"} 
```

请任何人帮助我。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-24T07:48:53.823

```
var json = {};
$("#sample option").each(function() {
    json[$(this).text()] = $(this).val();
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-24T07:56:57.763

```
<select id="sample" >
    <option value="1">FRIEND</option>
    <option value="2">GOOGLE</option>
    <option value="3">AGENT</option>
</select>
<script type="text/javascript">
    var obj = {};
    $("#sample option").each(function (i, op) {
        obj[$(op).text()] = $(op).val();
    });
    var s = JSON.stringify(obj);
    alert(s);
</script> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-24T07:49:35.603

这很简单！

```
var json = {};
var select = document.getElementById('sample');
var options = select.options,option;
for (var i=0,len=options.length;i<len;i++) {
    option = options[i];
    json[option.innerHTML] = option.value;
} 
```

现在 json 对象就是你想要的！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-24T07:48:39.877

做这个

```
var x=document.getElementById("sample"),
    y=x.options,
    obj={} 
for(var i=0,len = y.length;i<len;i=i+1){
    obj[y[i].text] = i+1;
} 
```

现在你可以简单地打电话

```
obj["FRIEND"]
obj["GOOGLE"] 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-24T07:48:49.253

您可以在没有 jquery 的情况下创建静态对象

```
​var data = new Object();
data.FRIEND= 1;
data.GOOGLE= 2;
data.AGENT= 3; 
```

## 更新

```
var data = new Object();

$('#sample option').each(function(e){
    var value = $(this).val();
    var key = $(this).text();
    console.log('"' + key + ':' + value);
    data[key] = value;
});

var json = JSON.stringify(data);
console.log('---- using JSON.stringify ----');
console.log(json);

var obj = $.parseJSON(json);
console.log('---- using jQuery parseJSON ----');
console.log(obj); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-24T07:53:32.970

您可以使用jquery 的[map](http://api.jquery.com/map/)功能。

```
var items = $("#sample > option").map(function() {
var arr = {};
arr[$(this).text()] = $(this).val();
return arr;
}).get();

alert(JSON.stringify(items)); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-12-24T07:54:33.480

使用 jQuery：

```
var options = $('#sample option'),
form = {};
options.each(function (​key, val) {
   form[$(val).text()] = $(val).val();
}); 
```

或者使用纯 JS：

```
var options = document.querySelectorAll('#sample option'),
form = {},
i = 0;
for (; i < options.length; i++) {
   form[options[i].innerHTML] = options[i].getAttribute('value');
} 
```

# c# - 复制大量文件期间 UI 没有响应

> ID：14018567
> 
> 赞同：1
> 
> 时间：2012-12-24T07:41:32.277
> 
> 标签：c#, .net, winforms, multithreading, timer

我需要你**调试我**对这个项目的想法。

我写了一个备份管理器项目，我给它一个文件夹，它将每个文件和文件夹复制到另一个位置等等。

它可以工作（复制工作很好），但在复制过程中大约需要 1 分钟，应用程序 UI 没有响应。我听说过线程，也见过并行编程这个词（只是这个词，没有更多），现在我想要一些解释、比较和示例，以便能够切换我的代码。

我以前用线程做过非常简单的操作，但那是很久以前的事了，我对线程没有足够的信心。这是我的代码：

```
private void CopyFiles(string path, string dest)
{
    System.IO.Directory.CreateDirectory(dest + "\\" + path.Split('\\')[path.Split('\\').Count()-1]);
    dest = dest + "\\" + path.Split('\\')[path.Split('\\').Count() - 1];
    foreach (string file in System.IO.Directory.GetFiles(path))
    {
        System.IO.File.Copy(file, dest + "\\" + file.Split('\\')[file.Split('\\').Count() - 1]);
    }
    foreach (string folder in System.IO.Directory.GetDirectories(path))
    {
        CopyFiles(folder, dest);
    }
} 
```

我在基于特殊间隔的计时器中运行它，如果我使用线程，我应该省略计时器吗？引导我，我很困惑。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T07:52:33.403

由于您对线程不够有信心，我强烈建议您阅读[Joe Albahari 的 C# 教程中的线程](http://www.albahari.com/threading/)。并行编程是指您“并行”或同时执行多项操作（主要用于将大量计算分散到多个 CPU 或 GPU 内核上）。在这种情况下，您希望线程在复制所有文件时使您的 UI 响应。本质上，你会有这样的东西：（在你阅读了 C# 教程中的线程之后）

```
Thread copyFilesThread = new Thread(() => 
{
    CopyFiles(path, dest);
});
copyFilesThread.Start(); 
```

UI 在自己的线程上运行。放入应用程序的所有代码都将在 UI 线程上运行（除非您明确使用线程）。由于您的`CopyFiles`方法需要很长时间，因此它将停止 UI，直到复制作业完成。使用线程将`CopyFiles`在 UI 线程的单独线程上运行，因此使 UI 线程响应。

编辑：至于你的计时器，它多久运行一次？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-24T07:59:04.390

[在单独的专用线程中执行操作的一种简单方法是使用BackgroundWorker](http://msdn.microsoft.com/en-us/library/system.componentmodel.backgroundworker%28v=vs.100%29.aspx)，它可以让您知道线程何时完成。

使用示例在我上面链接的页面上。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-24T08:30:26.467

如果要复制大量或未知数量的文件，则应使用 ThreadPool

```
 ThreadPool.QueueUserWorkItem(delegate
 {
    CopyFiles(folder, dest);
 }); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-24T07:59:20.303

后台工作者可用于实现异步执行。此链接可能会有所帮助 [http://www.codeproject.com/Articles/20627/BackgroundWorker-Threads-and-Supporting-Cancel](http://www.codeproject.com/Articles/20627/BackgroundWorker-Threads-and-Supporting-Cancel)

# php - Hotmail 联系人 API

> ID：14018571
> 
> 赞同：1
> 
> 时间：2012-12-24T07:41:51.047
> 
> 标签：php, hotmail

我想使用 php 将所有联系人的电子邮件地址从 hotmail 获取到我的网站来邀请朋友。1.我从以下位置找到了一个hotmail联系api：

[http://livecontactsphp.codeplex.com/](http://livecontactsphp.codeplex.com/)

但不工作....只是在我的页面上进行身份验证后显示 curl 请求 url。

我的 curl 请求网址是：

```
$uri = "https://livecontacts.services.live.com/users/@C@".$output."/LiveContacts"; 
```

可能是它已经改变了，但我没有得到正确的网址。

2.我试过openinviter： [http](http://openinviter.com/demo/) ://openinviter.com/demo/ 但仅针对hotmail，它说每封电子邮件的登录无效。

3.我也使用了 php 地址导入器，但仅用于 hotmail 它不起作用。

我使用了很多方法，但没有找到任何令人满意的结果。那么有什么方法可以让我免费/付费从hotmail访问电子邮件地址。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T18:11:30.853

微软在 2012 年年中弃用了该 API。

[http://cloudsponge.com/news/2012/06/14/we-are-prepared-for-june-25-2012/](http://cloudsponge.com/news/2012/06/14/we-are-prepared-for-june-25-2012/)

此时，唯一受支持的方法是让您的用户导出他们的联系人并将文件上传到您的站点。

我很想听听您对[CloudSponge](http://www.cloudsponge.com/test-drive)的反馈。

如果您喜欢它，您可以将小部件 HTML 粘贴到您的页面中，并在几分钟内将其放到您的网站上。

我们正在努力成为市场上联系人导入的最佳解决方案。

免责声明：我为 CloudSponge 工作。

# php - PHP Web 应用程序并发和负载均衡

> ID：14018573
> 
> 赞同：0
> 
> 时间：2012-12-24T07:41:57.580
> 
> 标签：php, web-applications, concurrency, load-balancing

在 PHP Web 应用程序中，并发和负载平衡是由服务器还是应用程序本身完成的？

如果我们用纯 PHP（不使用框架）编写应用程序，它将处理并发和负载平衡？

例如：-
网站有 10 件商品要出售，
但 1000 位客户同时尝试购买，
会发生什么

如果我们使用 PHP 框架（cakePHP、Codeignator），是否会向我们的应用程序添加额外的代码？

另一件事是我们不想担心并发性，做错误处理，剩下的交给服务器，或者我们必须考虑应用程序中的并发处理。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-24T08:04:36.347

不，PHP 不会为您做任何负载平衡。并发在这里是一个意图问题。没有**为您处理并发**这样的事情。这是一个当两个并发请求进来时你想要发生什么的问题。PHP 是建立在每个请求模型之上的。这意味着每个单独的请求都由 PHP 并行处理。所以 PHP 不在乎你有多个并发请求同时进来。它们被分开处理。

负载平衡通常由单独的负载平衡软件（如[Varnish](https://www.varnish-cache.org/)或[Pound](http://www.apsis.ch/pound/)）处理。并发通常由管理您希望通过特定要求控制的各种数据的外部流和服务器处理，例如您的数据库、像[memcached](http://memcached.org/)或[reddis这样的键/值存储，或像](http://redis.io/)[Gearman](http://gearman.org/)或[zmq](http://www.zeromq.org/)这样的作业管理器/队列，或者您的邮件服务器. 这些是 PHP 定期与之通信的所有内容，通常负责涉及用户与基于 Web 的应用程序交互的各种任务。PHP 本身只是一个非常薄的中间人，它允许您编写脚本并控制所有这些交互将如何进行。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-24T07:43:37.690

负载平衡通常由服务器框架处理。PHP 本身不会为您做任何负载平衡。如果您的网站不能同时处理 1000 个客户，您的网站将不可用。

# python - 在 linux IPPROTO_ICMP 中具有非特权 ping 的 python

> ID：14018584
> 
> 赞同：6
> 
> 时间：2012-12-24T07:43:53.593
> 
> 标签：python, sockets, ping, icmp

根据 [http://kernelnewbies.org/Linux_3.0#head-c5bcc118ee946645132a834a716ef0d7d05b282e](http://kernelnewbies.org/Linux_3.0#head-c5bcc118ee946645132a834a716ef0d7d05b282e) ，我们现在可以以非特权用户身份ping，我可以让它工作。

使用[https://github.com/jedie/python-ping](https://github.com/jedie/python-ping)我修改了第 210 行看起来像

current_socket = socket.socket(socket.AF_INET, socket.SOCK_DGRAM, socket.IPPROTO_ICMP)

作为 root 我“回显 1000 1000 > /proc/sys/net/ipv4/ping_group_range”

我的组是 1000

我可以像普通用户一样运行 ping.py，我可以在 tcpdump 中看到回显请求和回显回复

```
18:33:24.840291 IP (tos 0x0, ttl 64, id 0, offset 0, flags [DF], proto ICMP (1), length 269)
    127.0.0.1 > 127.0.0.1: ICMP echo request, id 38, seq 0, length 249
18:33:24.840309 IP (tos 0x0, ttl 64, id 37939, offset 0, flags [none], proto ICMP (1), length 269)
    127.0.0.1 > 127.0.0.1: ICMP echo reply, id 38, seq 0, length 249 
```

但 ping.py 没有看到回复，并说超时。

任何想法如何使这项工作？

编辑：

我正在缩小问题的范围。

```
print "c", icmp_header, address, self.own_id
if icmp_header["packet_id"] == self.own_id: # Our packet 
```

问题是 icmp_header["packet_id"] 总是 8247 而 self.own_id 是 ping.py 的 pid。8247 是十六进制的 2037，我可以在转储中看到很多次。

这是网络上 ping 的完整转储

```
19:25:15.513285 00:00:00:00:00:00 > 00:00:00:00:00:00, ethertype IPv4 (0x0800), length 283: (tos 0x0, ttl 64, id 0, offset 0, flags [DF], proto ICMP (1), length 269)
  127.0.0.1 > 127.0.0.1: ICMP echo request, id 70, seq 2, length 249
    0x0000:  4500 010d 0000 4000 4001 3bee 7f00 0001  E.....@.@.;.....
    0x0010:  7f00 0001 0800 d932 0046 0002 5b36 362c  .......2.F..[66,
    0x0020:  2036 372c 2036 382c 2036 392c 2037 302c  .67,.68,.69,.70,
    0x0030:  2037 312c 2037 322c 2037 332c 2037 342c  .71,.72,.73,.74,
    0x0040:  2037 352c 2037 362c 2037 372c 2037 382c  .75,.76,.77,.78,
    0x0050:  2037 392c 2038 302c 2038 312c 2038 322c  .79,.80,.81,.82,
    0x0060:  2038 332c 2038 342c 2038 352c 2038 362c  .83,.84,.85,.86,
    0x0070:  2038 372c 2038 382c 2038 392c 2039 302c  .87,.88,.89,.90,
    0x0080:  2039 312c 2039 322c 2039 332c 2039 342c  .91,.92,.93,.94,
    0x0090:  2039 352c 2039 362c 2039 372c 2039 382c  .95,.96,.97,.98,
    0x00a0:  2039 392c 2031 3030 2c20 3130 312c 2031  .99,.100,.101,.1
    0x00b0:  3032 2c20 3130 332c 2031 3034 2c20 3130  02,.103,.104,.10
    0x00c0:  352c 2031 3036 2c20 3130 372c 2031 3038  5,.106,.107,.108
    0x00d0:  2c20 3130 392c 2031 3130 2c20 3131 312c  ,.109,.110,.111,
    0x00e0:  2031 3132 2c20 3131 332c 2031 3134 2c20  .112,.113,.114,.
    0x00f0:  3131 352c 2031 3136 2c20 3131 372c 2031  115,.116,.117,.1
    0x0100:  3138 2c20 3131 392c 2031 3230 5d         18,.119,.120]
19:25:15.513300 00:00:00:00:00:00 > 00:00:00:00:00:00, ethertype IPv4 (0x0800), length 283: (tos 0x0, ttl 64, id 37971, offset 0, flags [none], proto ICMP (1), length 269)
  127.0.0.1 > 127.0.0.1: ICMP echo reply, id 70, seq 2, length 249
    0x0000:  4500 010d 9453 0000 4001 e79a 7f00 0001  E....S..@.......
    0x0010:  7f00 0001 0000 e132 0046 0002 5b36 362c  .......2.F..[66,
    0x0020:  2036 372c 2036 382c 2036 392c 2037 302c  .67,.68,.69,.70,
    0x0030:  2037 312c 2037 322c 2037 332c 2037 342c  .71,.72,.73,.74,
    0x0040:  2037 352c 2037 362c 2037 372c 2037 382c  .75,.76,.77,.78,
    0x0050:  2037 392c 2038 302c 2038 312c 2038 322c  .79,.80,.81,.82,
    0x0060:  2038 332c 2038 342c 2038 352c 2038 362c  .83,.84,.85,.86,
    0x0070:  2038 372c 2038 382c 2038 392c 2039 302c  .87,.88,.89,.90,
    0x0080:  2039 312c 2039 322c 2039 332c 2039 342c  .91,.92,.93,.94,
    0x0090:  2039 352c 2039 362c 2039 372c 2039 382c  .95,.96,.97,.98,
    0x00a0:  2039 392c 2031 3030 2c20 3130 312c 2031  .99,.100,.101,.1
    0x00b0:  3032 2c20 3130 332c 2031 3034 2c20 3130  02,.103,.104,.10
    0x00c0:  352c 2031 3036 2c20 3130 372c 2031 3038  5,.106,.107,.108
    0x00d0:  2c20 3130 392c 2031 3130 2c20 3131 312c  ,.109,.110,.111,
    0x00e0:  2031 3132 2c20 3131 332c 2031 3134 2c20  .112,.113,.114,.
    0x00f0:  3131 352c 2031 3136 2c20 3131 372c 2031  115,.116,.117,.1
    0x0100:  3138 2c20 3131 392c 2031 3230 5d         18,.119,.120] 
```

AFAICT，icmp 标头可能打包错误。然而，这只是一个狂野的刺，我稍后会再盯着它看，与此同时，任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-24T16:53:48.263

有两件事你没有考虑到：

*   在这种新型套接字上接收消息时，不包括 IP 标头。由于您正在修改的代码需要使用 RAW 套接字（在收到的消息中*确实*包含 IP 标头），因此您需要更改很多内容：
    *   第 306 行提取了 ICMP 标头，`packet_data[20:28]`但当然由于不包括 IP 标头，因此 20 字节偏移没有意义。这必须成为`packet_data[0:8]`
    *   在第 310 行，代码尝试从数据包的开头提取 IP 标头，但它不存在。所以这段代码实际上会提取垃圾。如果您想了解 TTL 之类的信息，可以设置额外的选项（请参阅[启用该功能的补丁随附的文档](https://lwn.net/Articles/420800/)）。
*   有了这个新功能，内核通过套接字绑定机制控制 ICMP ID。您可以让内核选择一个 ID（隐式绑定）或设置一个 ID（显式绑定）。最好只依赖隐式绑定，因为内核会保证选择一个免费的 ID。

    在第 309 行，代码通过检查 id 来检查回复是否属于我们`self.own_id`。但是使用隐式绑定，内核会为我们选择 ID。我们可以设置`self.own_id`为内核分配的标识符

    ```
    self.own_id = current_socket.getsockname()[1] 
    ```

    （把它`self.send_one_ping`放在第 221 行之后）

    但事实上，检查`self.own_id`甚至是不必要的，因为内核已经确保我们只看到我们应该看到的回复。

# web-services - 在 wso2 应用程序服务器中编写租户感知 Web 服务

> ID：14018585
> 
> 赞同：1
> 
> 时间：2012-12-24T07:43:57.533
> 
> 标签：web-services, axis2, wso2, multi-tenant

我正在尝试开发要部署在 WSO2 Application Server 5.0.1 上的axis2 Web 服务。目前我们有要求，Web 服务支持多租户，并且在某些 Web 服务中，一些基于租户的进程。在服务上下文中，我需要从当前请求中检索租户信息。目前，我使用应用程序服务器管理控制台 test1.com 和 test2.com 在本地环境中创建租户。如何从请求中检索域名以及 test1.com 和 test2.com 的租户 ID（如果可能）以及客户端应如何将 Web 服务调用到特定租户，例如 test1.com？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T09:36:30.890

You can use [CarbonContext](http://svn.wso2.org/repos/wso2/carbon/kernel/branches/4.0.0/core/org.wso2.carbon.context/4.0.1/src/main/java/org/wso2/carbon/context/CarbonContext.java) to retrieve current tenant and other stuffs.

```
 CarbonContext cCtx = CarbonContext.getCurrentContext();
    cCtx.getTenantDomain();
    cCtx.getTenantId(); 
```

Refer [this article](http://wso2.org/library/articles/2012/03/carbon-context-its-usages-wso2-products) for more information on how to use carbon platform APIs.

# html - Django - 在模板中转义引号

> ID：14018587
> 
> 赞同：3
> 
> 时间：2012-12-24T07:44:12.157
> 
> 标签：html, django

我正在尝试创建一个表，其中包含代表联系人的数据行 - 人员和公司联系人的混合。我希望每一行都是“可点击的”，这样当点击时，该联系人的表单就会被拉出来进行编辑。为此，我有这样的事情：

```
<tr onclick="window.location.href='{% url my.django.view %}'">... 
```

你会注意到上面有两层引号：等号后的双引号，然后是封装 django 模板标签的单引号。有两种类型的联系人：公司和人员。我有我的`urls.py`设置来处理这个，具有以下内容：

```
(r'^contact-details/(?P<cType>C)/(?P<cid>N)/$', contact_details),
(r'^contact-details/(?P<cType>P)/(?P<cid>N)/$', contact_details),
(r'^contact-details/(?P<cType>C)/(?P<cid>.*)/$', contact_details),
(r'^contact-details/(?P<cType>P)/(?P<cid>.*)/$', contact_details), 
```

因此，通过上述内容，我有两个新联系人的 url（由`cType`C=Company 或`cType`P=Person 区分），然后是现有联系人的另外两个 url（`cid`用于记录的主键）。

嵌入在列出所有联系人的表格行中的链接如下所示：

```
<tr onclick="window.location.href='{% url cpm.contacts.views.contact_details 'P' c.pk %}'"> 
```

我遇到的问题是我无法将“P”或“C”传递到链接中，因为它会导致第三级引号，从而将引号全部断开。我只是不知道如何避开 P 或 C 周围的第三级引号。

有任何想法吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-24T07:51:35.113

您可以只在“P”周围使用双引号，因为 Django`{%`转义会阻止嵌入的双引号关闭 HTML 属性的引号。

```
<tr onclick="window.location.href='{% url cpm.contacts.views.contact_details "P" c.pk %}'"> 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-12-24T07:48:39.017

也许只是创建一个简单的 jQuery/JS 方法来更改窗口位置并将其放在单独的 JS 文件中？

```
function change_location(location){
    window.location = location;
} 
```

并像这样使用它：

```
<tr onclick="change_location({% url cpm.contacts.views.contact_details 'P' c.pk %});"> 
```

# c# - 解析已知格式字符串的最有效方法

> ID：14018595
> 
> 赞同：0
> 
> 时间：2012-12-24T07:45:15.480
> 
> 标签：c#, .net, string, parsing

我有一个格式如下的字符串，例如：

```
[ "{0}", "{1}", "{2}" ] 
```

所以我知道该字符串格式中总是有 3 个参数（可变长度）。

解析字符串的最有效方法是什么？（也许是最短的代码，所以我必须运行一些测试）

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T07:59:58.180

它可以通过多种方式完成，使用`Regex`类或字符串方法。

这是如何使用它来完成的`Regex.Match`：

```
 string s = @"[ ""some test"", ""another test string"", ""hi there!"" ]";
        string[] vars = Regex.Matches(s, @"""([^""]*)""")
            .Cast<Match>()
            .Select(m => m.Groups[1].Value)
            .ToArray(); 
```

另一种方式，使用`Regex.Split`：

```
 vars = Regex.Split(s.Remove(s.Length - 3, 3).Remove(0, 3), @""",\s"""); 
```

这是使用字符串方法的一种方法：

```
 vars = s.Substring(s.IndexOf("\"") + 1, s.LastIndexOf("\"") - 3)
                    .Split(new string[] {@""", """}, StringSplitOptions.None); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-24T08:22:41.213

第一种解决方案：我认为这是最简单的 - 剪切 [ 和 ] （第一个和最后一个字符） - 按“，” -> trim() -> 得到 3 个部分 - 删除多余的字符（如“{ 和 }”）如果你'确保您预期的字符串不包含“ { } -> 您可以在拆分前删除它们。

第二种解决方案：使用正则表达式

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-24T17:08:00.690

示例：提取 --> 你好吗？

```
string stuff = @"""{How}"", ""{Are}"", ""{You?}""";
string[] answer = (stuff.Replace(@"""{", String.Empty).Replace(@"}""", String.Empty)).Split(','); 
```

现在变量 answer 包含三个词！

# ssl - 在数据库中使用 SSL 证书

> ID：14018600
> 
> 赞同：0
> 
> 时间：2012-12-24T07:46:01.063
> 
> 标签：ssl, ssl-certificate, security, database-security

我正在探索 SSL 证书及其优势。在那里我遇到了使用 SSL 证书进行数据库连接。我对为什么我们需要与数据库进行安全连接感到困惑。因为如果在客户端和服务器之间建立了安全连接，那么无论如何服务器就是要连接并从数据库中获取的东西。有人可以帮助我理解为什么我们需要与数据库的安全连接吗？提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-24T07:48:43.467

当连接方法不安全时，您需要 SSL，例如通过 Internet 连接到远程数据库。一般来说，即使对于内部应用程序来说，如果有人（例如员工）可能能够拦截并以明文形式查看数据或进行 MITM 攻击并且他们无权以其他方式进行攻击，那么这可能不是一个坏主意完全控制数据库。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-24T07:56:46.700

SSL 的主要思想是防止中间人攻击，并确保远程服务器真的是他们所说的那样。

# python - Django如何让这个视图更快？

> ID：14018601
> 
> 赞同：0
> 
> 时间：2012-12-24T07:46:09.147
> 
> 标签：python, django, loops, orm

我有看法。它从模型中获取大约 1000 条记录并计算每两个值。它工作正常，但非常慢约 1 分钟。

**我的模型。**它包含每天的读数：

```
class Reading(models.Model):
    meter = models.ForeignKey(Meter, verbose_name=_('meter'))
    reading = models.FloatField(verbose_name=_('reading'))
    code = models.ForeignKey(ReadingCode, verbose_name=_('code'))
    date = models.DateTimeField(verbose_name=_('date'))

    class Meta:
        get_latest_by = 'date'
        ordering = ['-date', ]

    def __unicode__(self):
        return u'%s' % (self.date,)

    @property
    def consumption(self):
        try:
            end = self.get_next_by_date(code=self.code, meter=self.meter)
            return (end.reading - self.reading) / (end.date - self.date).days
        except:
            return 0.0

    @property
    def middle_consumption(self):
        data = []
        current_year = self.date.year
        for year in range(current_year - 3, current_year):
            date = datetime.date(year, self.date.month, self.date.day)
            try:
                data.append(Reading.objects.get(
                    date = date,
                    meter = self.meter,
                    code = self.code
                ).consumption)
            except:
                data.append(0.0)
            for i in data:
                if not i:
                    data.pop(0)
        return sum(data) / len(data) 
```

**我的观点。**它返回 json，其中包含请求仪表的所有读数以及最近 3 年的计算消耗和计算的中间消耗。

```
class DataForDayChart(TemplateView):
    def get(self, request, *args, **kwargs):
        output = []
        meter = Meter.objects.get(slug=kwargs['slug'])
        # TODO: Make it faster
        for reading in meter.readings_for_period().order_by('date'):
            output.append({
                "label": reading.date.strftime("%d.%m.%Y"),
                "reading": reading.reading,
                "value": reading.consumption / 1000,
                "middle": reading.middle_consumption / 1000
            })
        return HttpResponse(output, mimetype='application/json') 
```

我应该改变什么以使其更快？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-24T08:00:30.570

性能问题可能是由太多的数据库操作引起的，例如在方法 middle_consumption 你查询数据库至少两次，

```
 end = self.get_next_by_date(code=self.code, meter=self.meter)
 ...
 data.append(Reading.objects.get(
                date = date,
                meter = self.meter,
                code = self.code
            ).consumption) 
```

您没有显示所有代码，所以我想后续循环中的每个步骤都需要 sql 查询。

```
for reading in meter.readings_for_period().order_by('date'): 
```

正如你所说，只有1000条记录，也许你可以加载一次数据并在内存中操作关系和计算，这应该会提高整体性能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-24T08:27:36.093

从视图名称来看，我想它的数据在白天变化不大；在这种情况下，我建议您使用缓存。
Django 有一个很好的[缓存框架](https://docs.djangoproject.com/en/dev/topics/cache/)，它的设置和使用非常简单直接，它会立即产生巨大的变化，而不需要太多的努力。

* * *

当然，第一次调用还是会很慢；在那里，您可能想要优化它。
优化的常用方法首先是测量，你应该分析视图，看看什么是最慢的函数。
或者，您也可以插入一些打印语句以了解减速发生的要点；这里的优点是您不需要学习如何使用新工具。

也就是说，我最好的猜测是，速度下降发生在调用`meter.readings_for_period()`（您没有发布其代码）中，并且是由于一些低效的数据库查询 - 例如，最终指示 ORM 逐一检索记录，而不是使用单个选择语句。

# php - Magento 在类别下拉菜单中添加品牌列表

> ID：14018604
> 
> 赞同：-2
> 
> 时间：2012-12-24T07:46:43.050
> 
> 标签：php, magento, megamenu

我正在尝试在主菜单的每个类别下拉列表中添加品牌列表。我相信这将被视为“超级菜单”。

例如 - 如果我将鼠标悬停在主类别上，它不仅会在下拉菜单中显示子类别，还会显示该类别中的所有不同品牌。

品牌建立有两种方式：

1.  所有产品都有一个属性“品牌”。因此，我们可以尝试获取该类别中的所有产品，并显示与该类别中的产品相关的所有品牌的列表。这将需要合并分层导航，以便在选择该菜单项时，它将显示来自该类别和该品牌属性的项目的过滤器。

2.  我认为这种方法会更容易——每个品牌也已经创建了自己的类别，并且每个产品都属于主要类别以及相关的品牌类别。最初这样做是为了我们可以显示所有品牌的大清单。Magento 在导航循环中是否有获取“其他选择的类别”的功能？例如，如果一个项目在类别 A 中，下拉列表会显示所有子类别，以及在产品上选择的任何其他相关顶级类别。

我尝试了各种涉及修改 Navigation.php（magento 1.6）的解决方案，但我只能让它显示商店中的所有品牌，而不仅仅是特定类别中的品牌。请参见下面的代码：

```
// Navigation.php code
// render children
    $htmlChildren = '';
    $j = 0;
    foreach ($activeChildren as $child) {
    $htmlChildren .= $this->_renderCategoryMenuItemHtml(
    $child,
    ($level + 1),
    ($j == $activeChildrenCount - 1),
    ($j == 0),
    false,
    $outermostItemClass,
    $childrenWrapClass,
    $noEventAttributes
    );
    $j++;
    }
    if (!empty($htmlChildren)) {
    if ($childrenWrapClass) {
    $html[] = '<div class="' . $childrenWrapClass . '">';
    }
    $html[] = '<ul class="level' . $level . '">';
    $html[] = $htmlChildren;

    // My modifications start here

    $product = Mage::getModel('catalog/product');
    $attributes = Mage::getResourceModel('eav/entity_attribute_collection')
    ->setEntityTypeFilter($product->getResource()->getTypeId())
    ->addFieldToFilter('attribute_code', 'brands');
    $attribute = $attributes->getFirstItem()->setEntity($product->getResource());
    $manufacturers = $attribute->getSource()->getAllOptions(false);
    $html[] = '<ol id="nav-drop-brands">';
    foreach ($manufacturers as $manufacturer) {
    $html[] = '<li><a href="http://www.domain.com/catalogsearch/advanced/result?manufacturer[]=';
    $html[] = $manufacturer['value'];
    $html[] = '">';
    $html[] = $manufacturer['label'];
    $html[] = '</a></li>';
    }
    $html[] = '</ol>';

    // end of my modifications 

    $html[] = '</ul>';
    if ($childrenWrapClass) {
    $html[] = '</div>';
    }
    }

    $html[] = '</li>';

    $html = implode("\n", $html);
    return $html;
    } 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-12-24T08:01:37.620

你可以这样做：
添加类别
然后添加子类别
然后添加子子类别
（这将是您的所有品牌名称，这只是类别而已）

要检索这些类别，您可以访问[此](https://stackoverflow.com/questions/8227838/how-to-display-the-categories-and-subcategories-in-a-tree-format/13099835#13099835)链接。

希望这对您有所帮助。

# url - 如何制作 refspec 样式的 github 提交 url？

> ID：14018609
> 
> 赞同：1
> 
> 时间：2012-12-24T07:47:14.530
> 
> 标签：url, github

当引用 github 上的提交历史时，您可以使用某些版本的 git refspec，例如：

```
https://github.com/johan/kilobyte-svg-challenge/commits/         = default branch
https://github.com/johan/kilobyte-svg-challenge/commits/gh-pages = gh-pages branch or tag
https://github.com/johan/kilobyte-svg-challenge/commits/7aafe0de9edf3f67b7f73e9ebab47ff9f2309415
https://github.com/johan/kilobyte-svg-challenge/commits/?author=duopixel 
```

使用比较功能时，您可以轻松使用[任何类型的 git respec](https://speakerdeck.com/holman/git-and-github-secrets#106)，例如：

```
https://github.com/johan/kilobyte-svg-challenge/compare/gh-pages~1...gh-pages
https://github.com/johan/kilobyte-svg-challenge/compare/gh-pages@{1.month.ago}...gh-pages 
```

**是否有类似的规定来制作与时间/计数相关的提交 url，如果有，url 语法是什么样的？**

如果这种部落知识记录在他们的帮助页面上的任何地方，我还没有找到它。据我所知，Github 的网址同时是网络上设计最好的网址，也是最差的（公开的？）记录。

# iphone - ViewController 与 ModalViewController

> ID：14018612
> 
> 赞同：-3
> 
> 时间：2012-12-24T07:47:50.987
> 
> 标签：iphone, ios

ViewController 和 ModalViewController ios iPhone 之间有什么区别？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-24T07:50:54.230

没有这样的类 ModalViewController，Modal 只是您呈现 UIViewController 的一种方式。
您可以将视图控制器推送到导航控制器堆栈：

```
[self.navigationController pushViewController:viewController animated:YES]; 
```

或者以模态的方式呈现：

```
[self.navigationController presentModalViewController:viewController animated:YES]; 
```

苹果建议使用带有“完成”块的方式。

```
[self.navigationController presentViewController:viewController animated:YES completion:nil]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-24T07:51:09.870

当我们使用模态方式从另一个类中推送一个类时，控制器称为

modalviewcontroller & 当我们简单地通过 push 方法调用控制器时，它简单地称为

视图控制器。

# c++ - OpenGL中的像素操作

> ID：14018615
> 
> 赞同：2
> 
> 时间：2012-12-24T07:48:17.393
> 
> 标签：c++, opengl, image-processing, opencv, augmented-reality

假设我有这个图像，其中是一个对象（一个立方体）。该对象正在被跟踪（带有标签），我设法在其上渲染一个虚拟立方体（增强现实）。现在我可以在其上渲染一个虚拟立方体，我希望能够使用一些称为“修复”的非常基本的减少现实技术使对象“消失”。有问题的修复非常简单（必须如此，否则 FPS 会受到影响），它需要我对像素及其邻居进行一些操作（如高斯模糊或其他基本图像处理）。

为此，我首先需要：

1.  面具：黑色背景，里面有一个白色立方体。
2.  访问初始图像的每个像素（在坐标 x 和 y 处）及其邻域，并根据掩码在相同 x 和 y 坐标处的像素值进行处理。所以基本上掩码是一种表示忽略这个像素或使用这个像素的方式。

如何使用 OpenGL 执行此操作？由于邻居，我希望能够以 2D 方式逐个访问像素值。

我使用 FBO 还是 PBO？我已经阅读了很多关于缓冲区和方法的内容，`glDrawPixels()`但我无法将它们全部放在一起。我看到这种方法的论文使用了`GL_BACK`缓冲区，但我的已经使用了。由于我仍然是 OpenGL 的初学者，因此对于所有形式（OpenG` 调用）都会非常感激一些示例代码（C++）。

如果像素操作在 OpenGL 中太难，我什至考虑使用 OpenCV，因为我的 AR 库（Aruco）在 OpenCV 之上工作。在这种情况下，我仍然需要获取蒙版（黑色背景上的白色立方体），将其转换为 a`cv::Mat`然后进行处理。

我知道这种方法效率低下（从 GPU/CPU 来回切换），但我的目标（目前）是至少让基础工作正常。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-24T08:25:27.300

设置一个帧缓冲区对象来渲染您的原始图像 + 虚拟立方体。这是一个[教程](http://www.songho.ca/opengl/gl_fbo.html)。

接下来，您可以将该帧缓冲区纹理附加为下一阶段的输入（采样器）纹理，并渲染覆盖您的遮罩的四边形（两个三角形）。

在片段着色器中，您应该能够通过读取变量 gl_FragCoord 来对“屏幕坐标”进行采样。将纹理过滤器功能设置为 GL_NEAREST，您可以访问精确的纹理坐标。相邻像素也可以使用位移（deltaX = 2/Width，deltaY=2/Height）。

必须使用以前的帧缓冲区纹理作为源，因为当前活动的帧缓冲区是只写的。

# java - jstat：-gc容量输出

> ID：14018618
> 
> 赞同：1
> 
> 时间：2012-12-24T07:48:31.097
> 
> 标签：java, jakarta-ee, jstat

根据[链接](http://docs.oracle.com/javase/1.5.0/docs/tooldocs/share/jstat.html)：-gccapacity 显示：

**NGCMX** : 最大新一代容量 (KB)。

**NGC**：当前的新一代容量（KB）。

NGC 显示的是当前**空闲**的新生代产能还是当前**使用**的新生代产能。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-21T08:39:59.330

NGC显示了现在新一代的容量有多大。

NGC 是介于 NGCMN 和 NGCMX 之间的一个值。NGC 的一部分可能会被使用，也可能是免费的，这并没有说明。它仅指示新一代的当前大小。

# facebook-javascript-sdk - 禁用自动登录 - facebook javascript SDK

> ID：14018623
> 
> 赞同：1
> 
> 时间：2012-12-24T07:48:44.453
> 
> 标签：facebook-javascript-sdk

当有 facebook 会话用户时，我想在我的网站中禁用自动登录。我希望用户点击 facebook 登录按钮

```
<div id="fb-root"></div>
<script>
  window.fbAsyncInit = function() {
    FB.init({
      appId: '<?php echo $facebook->getAppID() ?>',
      cookie: true,
      xfbml: true,
      oauth: true
    });
    FB.Event.subscribe('auth.login', function(response) {
      window.location.reload();
    });
    FB.Event.subscribe('auth.logout', function(response) {
      window.location.reload();
    });
  };
  (function() {
    var e = document.createElement('script'); e.async = true;
    e.src = document.location.protocol +
      '//connect.facebook.net/en_US/all.js';
    document.getElementById('fb-root').appendChild(e);
  }());
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2018-11-29T08:44:13.453

就这样做吧。

```
FB.init({
    appId      : 'key',
    status     : false,
    cookie     : true,  // enable cookies to allow the server to access 
                              // the session
    xfbml      : true,  // parse social plugins on this page
    version    : 'v2.8' // use graph api version 2.8
}); 
```

并且自动登录将被禁用。只需将状态放在顶部即可。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-24T08:00:18.180

而不是 facebook 事件，只需使用**FB.Login**。

当用户单击您的登录按钮（不是 facebook 登录按钮，而是一个简单的按钮）时，调用 userLogin()

```
function userLogin()
    {
        FB.login(function(response) 
        {
           if (response.authResponse) 
           {
             console.log('Welcome!  Fetching your information.... ');
             var access_token = response.authResponse.accessToken;
             location.href = "REDIRECT_TO.php";
           } 
           else 
           {
             console.log('User cancelled login or did not fully authorize.');
           }
         });
    } 
```

所以现在，用户每次访问您的网站时都必须点击 facebook 登录按钮。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-01-14T19:07:34.967

在 FB.init 中添加“status: false”。

这将阻止现有 Facebook 会话自动登录用户。

[https://developers.facebook.com/docs/unity/reference/current/FB.Init](https://developers.facebook.com/docs/unity/reference/current/FB.Init)

# regex - 正则表达式：找到一个模式，然后是另一个有间隙的模式

> ID：14018630
> 
> 赞同：0
> 
> 时间：2012-12-24T07:49:27.790
> 
> 标签：regex

我有一个包含数百条 SQL 插入语句的文件。我只想识别那些以 HTML 段落标记开头`<p>`但没有结尾 para 标记的语句`</p>`。

我正在尝试这些线路

```
<p>[^\n]*(?!</p>) <-- a <p> followed by any number of characters until \n and then </p> 
```

这不起作用。下面是样本数据

```
INSERT INTO `help` VALUES 
(1,1,'<p>Radiotherapy uses a beam of high&#45;energy rays (or particles) lymph nodes.</p>'),
(2,1,'<p>EBRT delivers radiation from a machine outside the body. '),
(3,1,'<p>Following lumpectomy radiotherapy <ul><li>Heading</li></ul></p>'), 
```

理想情况下，我会`</p>`在它们不存在的地方附加一个，例如在插入语句#2 中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T08:10:11.343

如果你使用这个：

`(\(\d+,\d+,'<p>.*?)(</p>)?('\),)`

您将获得对以下部分的反向引用：

1.  `(1,1,'<p>Radiotherapy uses a beam of high&#45;energy rays (or particles) lymph nodes.`<-- 即序言和正文，包括开始的 P 标签
2.  `</p>`<-- 可选的结束 P 标记.. 即您可能无法匹配 2。
3.  `'),`<-- 结束引号和括号，以及尾随逗号

然后，您可以将其替换为：

`$1</p>$3`（例如使用 .NET 样式的反向引用）。

即，使用每个反向引用重建字符串，并使用显式关闭 P 标记，无论是否找到一个标记。

在不了解您的平台的情况下，我无法为此提供正确的正则表达式替换语法。

在 .NET 中它将是：

```
string input = @"INSERT INTO `help` VALUES 
(1,1,'<p>Radiotherapy uses a beam of high&#45;energy rays (or particles) lymph nodes.</p>'),
(2,1,'<p>EBRT delivers radiation from a machine outside the body. '),
(3,1,'<p>Following lumpectomy radiotherapy <ul><li>Heading</li></ul></p>'),";

Regex r = new Regex(@"(\(\d+,\d+,'<p>.*?)(</p>)?('\),)");
string output = r.Replace(input, "$1</p>$3");

Console.Write(output); 
```

产生这个输出：

```
INSERT INTO `help` VALUES
(1,1,'<p>Radiotherapy uses a beam of high&#45;energy rays (or particles) lymph nodes.</p>'),
(2,1,'<p>EBRT delivers radiation from a machine outside the body. </p>'),
(3,1,'<p>Following lumpectomy radiotherapy <ul><li>Heading</li></ul></p>'), 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-24T09:36:44.100

如果您可以确定`</p>`始终跟在引号后面，`'`则以下在 Perl 中有效（没有 notepad++ ）

```
/<p> [^\n]* (?<! <\/p> )  (?=') /gx 
```

（/x 允许使用空格，以便清楚起见）。这是在对报价进行前瞻的基础上进行消极的后视。

# model-view-controller - 用于定期更新的 Java 设计

> ID：14018635
> 
> 赞同：1
> 
> 时间：2012-12-24T07:50:07.023
> 
> 标签：model-view-controller

我正在使用基于 websocket 的 MVC 架构，这个 MVC 生命周期类似于 Spring 和 Struts，现在我必须支持定期更新我的视图。

1.  每个控制器负责客户端中存在的每个视图
2.  控制器必须定期更新视图
3.  我没有为每个客户维护任何会话。所以控制器必须为所有客户端更新。
4.  我不想在 Controller 中创建线程，因为每个视图都有很多控制器。
5.  所以，我想创建一个单独的模块，它必须通过控制器（通过调用控制器方法）来处理这个定期更新。
6.  最后，我想保留客户端只是为了显示，所以我不想在客户端保留计时器。

我想遵循一些标准的方式来设计这个，请帮助我遵循标准的设计模式（如 MVC）来做到这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-05-08T08:30:47.160

一个弹簧两分钱，一个 websocket 程序员的 struts 程序员。

**1.每个控制器负责客户端中存在的每个视图** [好设计，希望你没有过度工程]

**第 2 点和第 3 点。**

方法 1 - 由于没有会话，因此要求您的 UI/视图在特定间隔（例如 2 分钟）或特定事件（例如页面刷新/重新加载）之后向控制器发送更新请求，以满足您的要求。

该方法的缺点 - UI/View 端代码的频繁更新可能会使您的应用程序瘫痪，因为客户端代码可以更改并用于攻击应用程序。

为避免这种情况，您需要注意每个请求本身是真实的和完整的，并且可以独立执行。

该方法的优点 - 考虑扩展应用程序，它可以像任何东西一样扩展。

**第 4 点和第 5 点**它们是相似的

```
 controller {
    doSomething(){};
 } 
```

或者

```
 controller {
 HelperCalssReference.doSomething(){};
 } 
```

**您将始终在控制器内部获得一个线程**[就执行速度而言]，但第二种方法更加解耦。

**第 6 点和第 3 点。**

“客户端没有计时器”然后在服务器端维护会话但是“我没有为每个客户端维护任何会话”你必须将它保留在某个地方进行选择。

不要在服务器上维护会话，但必须跟踪客户端并在 2 分钟后向他们发送新的更新，但是如果你想在服务器进行 5 次更新后停止说，你将如何知道何时停止或客户端离线您很好，但您的客户端 UI 可能在线并等待更新。

**点是在您的程序中有一个逻辑断点，但在上述要求中找不到。**

**可能的方法 -**

1.  使用 REST 可保持应用程序可扩展且无状态。[ [https://capgemini.github.io/architecture/is-rest-best-microservices/](https://capgemini.github.io/architecture/is-rest-best-microservices/) *必须阅读“设计/实现/配置难度”部分*]
2.  使用好莱坞设计原则，但决定谁是您的好莱坞 UI/视图或服务器。
3.  事件驱动的方法可以帮助让用户事件决定何时要求更新 *[注意客户端通过多次点击在 1 秒内要求 3 次更新。]*

快乐的设计:)

# regex - Eclipse 查找正则表达式

> ID：14018644
> 
> 赞同：1
> 
> 时间：2012-12-24T07:51:36.720
> 
> 标签：regex, eclipse

我试图在 Eclipse 中的多个文件中找到多次出现的某些文本，但无法为其编写正确的正则表达式。

我有多个匹配以下模式的文本

```
<import resource="classpath:META-INF/cxf/**cxf-extension**-soap.xml" />
<import resource="classpath:META-INF/cxf/**cxf-extension**-http.xml" /> 
```

在**cxf-extension**之后可能有任何东西。

所以我想找出以“< import”开头的所有此类事件都有工作“cxf-extension”并以“/>”结尾。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-24T09:12:51.133

我认为这会起作用：

```
<import.*?cxf-extension.*?\/> 
```

这里有一些测试： [http ://www.regex101.com/r/yX3mH3](http://www.regex101.com/r/yX3mH3)

# iphone - 目标 C：通过字典键的值过滤掉 NSMutableArray 的结果？

> ID：14018645
> 
> 赞同：4
> 
> 时间：2012-12-24T07:51:37.697
> 
> 标签：iphone, ios, nsmutablearray, xcode4.5

我有一个这样的 NSMutableArray：

```
(
        {
        City = "Orlando";
       Name = "Shoreline Dental";
        State = Florida;
    },
        {
        City = "Alabaster ";
        Name = Oxford Multispeciality;
        State = Alabama;
    },
        {
        City = Dallas;
        Name = "Williams Spa";
        State = Texas;
    },
        {
        City = "Orlando ";
        Name = "Roast Street";
        State = Florida;
    }
) 
```

现在我如何对这个 NSMutableArray 进行排序以获得与我期望得到的州“佛罗里达”相对应的结果

```
(
        {
        City = "Orlando";
       Name = "Shoreline Dental";
        State = Florida;
    },
 {
        City = "Orlando ";
        Name = "Roast Street";
        State = Florida;
    }
) 
```

我去找了这段代码，但它再次显示了之前的四个字典。

```
NSSortDescriptor *valueDescriptor = [[NSSortDescriptor alloc] initWithKey:@"Florida" ascending:YES];
       NSArray * descriptors = [NSArray arrayWithObject:valueDescriptor];
        NSArray * sortedArray = [arr sortedArrayUsingDescriptors:descriptors]; 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-24T08:01:04.047

尝试使用比较器块：

```
NSIndexSet *indices = [array indexesOfObjectsPassingTest:^(id obj, NSUInteger idx, BOOL *stop) {
    return [[obj objectForKey:@"State"] isEqualToString:@"Florida"];
}];
NSArray *filtered = [array objectsAtIndexes:indices]; 
```

或者，您也可以使用谓词：

```
NSPredicate *p = [NSPredicate predicateWithFormat:@"State = %@", @"Florida"];
NSArray *filtered = [array filteredArrayUsingPredicate:p]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-24T08:04:27.660

如果您的数组包含字典，那么您可以使用 NSPredicate 过滤掉您的数组，如下所示：

```
NSPredicate *thePredicate = [NSPredicate predicateWithFormat:@"State CONTAINS[cd] Florida"];
theFilteredArray = [theArray filteredArrayUsingPredicate:thePredicate]; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-24T08:23:36.693

假设您的数组名称是：`arr`

这是一种典型的查找方式，虽然有点过时....

```
for (NSDictionary *dict in arr) {
    if ([[dict objectForKey:@"State"]isEqualToString:@"Florida"]) {
        [filteredArray addObject:dict];
    }
}
NSLog(@"filteredArray->%@",filteredArray); 
```

使用谓词和块已经发布:)

```
NSPredicate *predicate = [NSPredicate predicateWithFormat:@"State = %@", @"Florida"];
NSArray *filteredArray = [arr filteredArrayUsingPredicate:predicate];
NSLog(@"filtered ->%@",filteredArray); 
```

# python - 如何结合两个if？

> ID：14018649
> 
> 赞同：0
> 
> 时间：2012-12-24T07:52:01.203
> 
> 标签：python, python-2.7

我有以下代码，其中只有在满足第一个条件后才应执行第二个 if 循环，有没有办法将这些组合到 if 循环？

```
 if Pline=mPL:
    if bestTime == None or bestTime < lastTime:
        bestTime = lastTime
        Time=(bestTime.strftime('%m-%d-%Y'))
        bestLocation = lastLocation 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-24T08:07:20.657

你需要`and`条件：

```
if (Pline=mPL) and ((bestTime == None) or (bestTime < lastTime)):
        bestTime = lastTime
        Time=(bestTime.strftime('%m-%d-%Y'))
        bestLocation = lastLocation 
```

# java - 我可以使用我现有的 Intellij 许可证在 Macbook Air 中进行 Java 和 javascript 开发吗？

> ID：14018650
> 
> 赞同：0
> 
> 时间：2012-12-24T07:52:02.153
> 
> 标签：java, intellij-idea

我打算在印度买一台[13 英寸的 Macbook Air 。](http://www.apple.com/in/macbookair/specs.html)我最近以大约 50 美元的价格购买了 Intellij 许可证，这确实是一笔不错的交易。我可以使用此许可证在 Macbook Air 中进行开发还是该许可证仅可用于 Windows 环境？我主要做Java/Javascript开发。在进行这笔昂贵的购买之前，我应该知道任何具体的问题吗？如果有任何问题是用 Mabook Pro 解决的吗？

PS：我对 Mac World 完全陌生，之前仅在 Windows 方面有经验。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-24T08:10:10.833

您可以在**任意数量的计算机上** （以及**在不同系统下**）使用您的个人许可证。但是，IDE 在启动时会检查本地网络上运行的副本数。如果它发现任何以相同许可证开始的副本，除了最后一个之外，它们都将被关闭。

换句话说，你可以在任何地方使用它，只是**不能同时**使用。

* * *

如果您是 Windows 用户，可能需要一些时间来适应[Mac 特定的快捷方式](http://www.danrodney.com/mac/)。请注意，Mac 和 Windows 上的 IDEA 键盘映射不同，可能很难从一个切换到另一个。

最近的 Macbook Air 的性能对于中型项目来说应该足够了。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-24T12:52:45.040

从[Intellij 常见问题解答](http://www.jetbrains.com/idea/buy/licensing_faq.html#q1)中，您可以阅读：

*   我可以在具有相同许可证的不同操作系统上运行 IntelliJ IDEA 吗？

**您可以使用相同的许可证在不同的操作系统上运行 IntelliJ IDEA，前提**是它不是同时使用的。

*   我可以在工作和在家中使用具有相同许可证的 IntelliJ IDEA 吗？

许可用户可以在不同的计算机上运行 IntelliJ IDEA，无论位置如何，前提是 IntelliJ IDEA 不能在多台计算机上同时运行。例如，您可以在办公室的工作站上或在家的笔记本电脑上运行 IntelliJ IDEA。但是，如果您将笔记本电脑带到办公室，您可能不会同时在笔记本电脑和工作站上运行 IntelliJ IDEA。

*   您的“每个并发用户”许可是什么意思？

单个许可证允许单个用户一次使用 IntelliJ IDEA。对于多个并发会话，您必须购买多个许可证。

# php - RSA iOS 加密 & PHP 解密

> ID：14018651
> 
> 赞同：0
> 
> 时间：2012-12-24T07:52:06.537
> 
> 标签：php, objective-c, ios, rsa, public-key-encryption

参考此链接[http://blog.iamzsx.me/show.html?id=155002](http://blog.iamzsx.me/show.html?id=155002)，我使用生成了一对密钥

`$ openssl req -x509 -out public_key.der -outform der -new -newkey rsa:1024 -keyout private_key.pem -days 3650`

这个命令。然后我得到`private_key.pem`& `public_key.der`。

我遵循实现我得到的加密数据是

`<ceaedf05 f39b69ab 8618f859 599926e9 c18d9233 342c58e0 534b66af 8b33dda3 375d6a11 b95ad821 11549637 ce4c26dc 760169c6 04096aff 9ec48938 1c6b149f 8180f9bb 8e1337ce 2b492af2 e0464e4c 9ab7aabd 9da53caf 1b5e5277 3c708b43 cb6515ee c9a18b02 4941416c 7f1e36d3 dcd3705b 66f8a159 ab8a7a3f a9db8306>`

但我想要的是

`dXXEEADvRDdk4QVM6TU9dyYtuHe8RVzP3KsWAoDDSQ2w+NELVPOv4mSVW1jIhEhb+pLsmOvLzGIW1/2qkp91M1UoPuhgplV2JEgP8EvcBn8EY43n7wVASGP9heRK0lYMfENP54f35+GFP68nU5zbrmX0IN6DGGGSNdSewzLb6s4=`

实际上我想要的是以下功能：
在iOS中：

`- (NSString *)encryptedString:(NSString *)plainText`

在 PHP 中：

```
function decrypted_string()  
{
    $encrypted_string = $_POST['encrypted_string']; 
    // implementation
    return $plain_text;
} 
```

如何实现这些功能？

我已经用谷歌搜索过了，不幸的是，没有我想要的解决方案。希望能在这里得到帮助。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-24T09:44:26.667

在发送到 php 之前，您需要对 NSData 进行 base64 编码。请参阅以下帖子的答案：

[从 NSData 创建 base-64 字符串](https://stackoverflow.com/questions/6006823/how-to-get-base64-nsstring-from-nsdata)

在php端，您可以使用`openssl_private_decrypt`解密。参考如下：

[http://php.net/manual/en/function.openssl-private-decrypt.php](http://php.net/manual/en/function.openssl-private-decrypt.php)

样本：

```
<?php
$fp=fopen("/path/to/private_key.pem","r");
$priv_key=fread($fp,8192);
fclose($fp);
$res = openssl_get_privatekey($priv_key, "myPassword");

$data = $_POST['encrypted_string']; 
if (openssl_private_decrypt(base64_decode($data), $decrypted, $res))
         echo "Decrypted:$decrypted";
?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-31T00:42:22.960

我的建议：使用[phpseclib，一个纯 PHP RSA 实现](http://phpseclib.sourceforge.net/)。例如。

```
<?php
include('Crypt/RSA.php');

$rsa = new Crypt_RSA();
$rsa->setPassword('abc123');
$rsa->loadKey('-----BEGIN RSA PRIVATE KEY-----
Proc-Type: 4,ENCRYPTED
DEK-Info: DES-EDE3-CBC,927035AD39FA7CED

un9ayDNHNdXKtAzmGB0eCxJ+3z54qNTH2nejrvxVANqDHbOh5642hIWVxrNwD0LC
dbosArWk00bAi9HGgU0UnzN4So3XM2yVxejFh98k8VuB0zPiNWHLGYhaj81BEeob
eLI3QzPCyX7CR1KJwHJC/5xHJMKN+1TCnn/nBsP12JelBJBui6R90LShfqecdJAa
oDpGGcDtPchOaHxHkv8i4AFHKm7QBDbebZZe/Bu0tKr4DJYSeQxe+a+YoqSkdRs5
JoQiqTd+kT9RT+7Kf22xtlThJQ6mh/i7rF0N32eUQsNYgs2eHmjgu55cDI6/XC+x
zIiDAsk2prtVpMzVJDkTUVnY2+AcMfgk2Oxpsx+H/9pHYWp/qma8mmRR7ALdyzce
cVmzCh4NjSPXnlrv4LCY5mEc3ObanIx6ZirmtJWwBiqADVt+aByrLicO3AoN//UU
dUiEtvIC+cl2wZ+eRRUC4uUr47a0AakkXTjZERsJt/cTNpgFdra4mVOefNxnt1rk
lfS9dQyFrBaDiS6IwpK3I9gNuvSam9SIqhSx7WT038Lh50bKvWodDck8OHvl1FwI
FiLN/VehnTJTMDe5Ee7nC6jPqVdagH0nZkNJDlVyjKCbCEKlzYOBr9mYQUqV2lSL
fbpBJOjmHesQAhP4UJNHNOhcyHBQ5WV60y0lySKPUqu20x0N3E+ByleA8g28ijwv
F79RmcldG8x5X6Ur2W7mtKbGFfLC3CFRW9r6a0ycdpfkWo/gii/tQpbBPyYPrsWe
MNkbkzdVMLOIKZLVAd+i82UrDg3zor45JhSRsRhnLRhaZuMOukcqGQ==
-----END RSA PRIVATE KEY-----');

$rsa->setEncryptionMode(CRYPT_RSA_ENCRYPTION_PKCS1);

echo $rsa->decrypt(base64_decode('qieklzzWct0ab7UOows+uvlaI5VLEHwIED4+O9KjVKopGTPIVaB8ioSUNZKnh5LUepmc/gowrp4pM1X??J+e+rPlwqI98d56ijdWuDOOojGR5VCNilztPSxI6PIpQeL58y+B5EVUWv49dcTuGwuRiU/FL8APkNqdEE??k43SLKyhY7w=')); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-01T05:00:00.087

扩展纽伯特的答案..

```
<?php
include('Crypt/RSA.php');

$rsa = new Crypt_RSA();
$rsa->setPassword('abc123');
$rsa->loadKey('-----BEGIN RSA PRIVATE KEY-----
Proc-Type: 4,ENCRYPTED
DEK-Info: DES-EDE3-CBC,927035AD39FA7CED

un9ayDNHNdXKtAzmGB0eCxJ+3z54qNTH2nejrvxVANqDHbOh5642hIWVxrNwD0LC
dbosArWk00bAi9HGgU0UnzN4So3XM2yVxejFh98k8VuB0zPiNWHLGYhaj81BEeob
eLI3QzPCyX7CR1KJwHJC/5xHJMKN+1TCnn/nBsP12JelBJBui6R90LShfqecdJAa
oDpGGcDtPchOaHxHkv8i4AFHKm7QBDbebZZe/Bu0tKr4DJYSeQxe+a+YoqSkdRs5
JoQiqTd+kT9RT+7Kf22xtlThJQ6mh/i7rF0N32eUQsNYgs2eHmjgu55cDI6/XC+x
zIiDAsk2prtVpMzVJDkTUVnY2+AcMfgk2Oxpsx+H/9pHYWp/qma8mmRR7ALdyzce
cVmzCh4NjSPXnlrv4LCY5mEc3ObanIx6ZirmtJWwBiqADVt+aByrLicO3AoN//UU
dUiEtvIC+cl2wZ+eRRUC4uUr47a0AakkXTjZERsJt/cTNpgFdra4mVOefNxnt1rk
lfS9dQyFrBaDiS6IwpK3I9gNuvSam9SIqhSx7WT038Lh50bKvWodDck8OHvl1FwI
FiLN/VehnTJTMDe5Ee7nC6jPqVdagH0nZkNJDlVyjKCbCEKlzYOBr9mYQUqV2lSL
fbpBJOjmHesQAhP4UJNHNOhcyHBQ5WV60y0lySKPUqu20x0N3E+ByleA8g28ijwv
F79RmcldG8x5X6Ur2W7mtKbGFfLC3CFRW9r6a0ycdpfkWo/gii/tQpbBPyYPrsWe
MNkbkzdVMLOIKZLVAd+i82UrDg3zor45JhSRsRhnLRhaZuMOukcqGQ==
-----END RSA PRIVATE KEY-----');

$rsa->setEncryptionMode(CRYPT_RSA_ENCRYPTION_PKCS1);

echo $rsa->decrypt(base64_decode('qieklzzWct0ab7UOows+uvlaI5VLEHwIED4+O9KjVKopGTPIVaB8ioSUNZKnh5LUepmc/gowrp4pM1X??J+e+rPlwqI98d56ijdWuDOOojGR5VCNilztPSxI6PIpQeL58y+B5EVUWv49dcTuGwuRiU/FL8APkNqdEE??k43SLKyhY7w=')); 
```

# oracle - 如何在 Oracle 的单个命令中设置多个列宽？

> ID：14018652
> 
> 赞同：0
> 
> 时间：2012-12-24T07:52:20.093
> 
> 标签：oracle, sqlplus

我想在单个查询中设置表的不同列的宽度，但无法这样做。

我尝试了以下查询，但没有成功

```
column Name format a10, trn_id mail a25 ; 
```

我有一个错误，`missing expression`。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-24T08:15:10.413

SQL*Plus 中 COLUMN 的语法是，引用[文档](http://docs.oracle.com/cd/E11882_01/server.112/e16604/ch_twelve013.htm#SQPUG034)：

```
COL[UMN] [{column | expr} [option ...]] 
```

没有选项可以在多个列上执行此操作，这意味着您的语法不正确。我只能建议您分别列出每一列。

```
column name format a10
column tm_id format a25 
```

要记住一件事；这*不是*一个查询。这是一个仅格式化输出的命令。

# jquery - 如何在 HTML、JavaScript 和 CSS 之间复制 jsfiddle 水平拖动条，结果

> ID：14018656
> 
> 赞同：8
> 
> 时间：2012-12-24T07:52:37.393
> 
> 标签：jquery, css, jsfiddle

Jsfiddle 有一个功能，允许用户为 HTML、Javascript、CSS 和结果调整窗口大小。我正在尝试在我的网站上实现类似的功能，并附上一篇文章和评论。水平拖动评论栏以放大评论部分，或放大文章。

我实际上在 jsfiddle 本身有一个有点工作的拖动条（这被大大简化了）：

[http://jsfiddle.net/Gp5as/2/](http://jsfiddle.net/Gp5as/2/)

问题是，蓝色的评论部分被 25px 覆盖了，所以当栏被拖到右边时，评论部分是不对称的。

有2个主要部分：

```
<div class="main">
  ...
</div> 
```

和

```
<div id="sidebar">
  <span id="position"></span>
  <div id="dragbar"><div id="dragtext">Comments</div></div>
  <div id="comment-container">
    <div id="comment">
      Comments
    </div>
  </div>
</div> 
```

主要用于文章，侧边栏用于评论。拖动条位于侧边栏浮动：左侧。

我想知道如何为我自己的目的实现他们的拖动功能。您可以修改我的 jsfiddle 示例，或者创建一个易于剪切和粘贴的 jsfiddle 示例。

# javascript - 我究竟做错了什么？我正在尝试克隆一些字段并使用一些功能

> ID：14018659
> 
> 赞同：0
> 
> 时间：2012-12-24T07:52:47.867
> 
> 标签：javascript, jquery, html

我正在构建一个表单，其中克隆并附加了一个选择菜单。在每个克隆中都有一个 jQuery 下拉选择器，我创建了一个名为**unitClone**的函数，您可以在 JavaScript 代码的末尾看到它。

```
unitClone = function(input) {
    var id = $('#' + input + ' .unit_select').attr('id');
    var id = ('#' + id);
    //alert(id);
    dd = new Select($(id));
    var selected = $(id).closest('td').find('.ingredient_unit').val();
    if (selected != null) {
        var selected = $(id).find(".dropdown li a[data-id=" + selected + "]").html();
        $(id).find('span').text(selected);
    }
} 
```

由于某种原因，代码无法正常工作，第一项不允许我单击并选择，第三项允许我选择，但所有下拉菜单都使用相同的值。

任何帮助将不胜感激。

这是我的代码：

[http://jsfiddle.net/tlaverdure/nKrvh/](http://jsfiddle.net/tlaverdure/nKrvh/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-24T08:31:11.367

我将您的 js 代码中的**on方法更改为****live**并且一切正常

```
Select.prototype = {
    initEvents: function() {
        var obj = this;
        obj.dd.live('click', function(event) {
            $(this).toggleClass('active');
            return false;
        });
        obj.opts.live('click', function() {
            var opt = $(this);
            obj.val = opt.text();
            obj.index = opt.index();
            var num = $(this).closest('td').find('.num');
            var numVal = $(this).closest('td').find('.num').val();
            if (numVal > 1) {
                obj.val = obj.val + 's'
            }
            obj.placeholder.text(obj.val);
            obj.opt_id = opt.find('a').data('id');
            $('.recipe_difficulty').val(obj.opt_id);
        });
    },
    getValue: function() {
        return this.val;
    },
    getIndex: function() {
        return this.index;
    }
} 
```

[这](http://jsfiddle.net/MXPjL/1/)是编辑后的代码。

祝你好运

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-26T15:11:23.423

找到了解决办法。`.live`没有工作。

```
obj.dd.toggle(function() {
        selectArea = $(this).attr('id');
        $('#'+ selectArea).addClass('active');
        return false;
        },
        function(){
            selectArea = $(this).attr('id');
                $('#'+ selectArea).removeClass('active');
             return true;
    }); 
```

[http://jsfiddle.net/tlaverdure/nKrvh/3/](http://jsfiddle.net/tlaverdure/nKrvh/3/)

# jquery - 使用asp.net创建动态div（面板）后如何调用jquery方法

> ID：14018661
> 
> 赞同：3
> 
> 时间：2012-12-24T07:52:57.113
> 
> 标签：jquery, asp.net, html, triggers, panel

1.  我的 asp.net 页面加载了一个文本框和一个按钮，此时没有隐藏元素。

2.  单击按钮时，它会根据结果进行处理并创建多个 div（面板）。Div 将导致它们为 Pass、Fail、Neutral 等。**这由 asp.net 异步 Web 服务调用发生，无需任何页面刷新**

3.  现在，在创建 div 之后，我想使用 jQuery 分析这些 div 的内容并向这些 div 添加特定属性。例如，Div 背景颜色为绿色表示通过，琥珀色表示中性等。将来会根据需要进行更多处理。

4.  我只能在 asp.net 中执行此操作，但我希望将 div 突出显示的内容与 asp.net 代码分开，而 jquery 将更适合于此。

5.  （问题）在网页上创建这些 div 后如何触发 jquery 方法的任何建议。

*编辑1：我正在尝试这个，但没有工作。*

```
$(document).on("create", '[id*="GridComp"]', function () { 
    alert("Created 1");
    // change background color of divs or any other thing
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-24T07:57:03.280

是的，您可以使用[live](http://api.jquery.com/live/)或[on](http://api.jquery.com/on/)（这取决于您当前使用的 jquery 版本）

```
$("#DIV1").live("EventName", function(){

    //...

}); 
```

为了提高他们，你可以使用这个：

```
$("#DIV1").trigger("EventName"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-24T08:14:10.597

您可以尝试将您的 jquery 代码用于`pageLoad()`：

```
function pageLoad(){
//your jquery code is here
} 
```

或者您可以从 asp.net 代码隐藏中调用 javascript 函数：

```
Page.ClientScript.RegisterStartupScript(this.GetType(), "call-your-function", "YourFunctionName();", true); 
```

编辑：要`pageLoad()`在您的 js 文件中使用方法，您只需将**scriptmanager**添加到您的 asp.net 代码中一次。

```
<asp:ScriptManager ID="ScriptManager1" runat="server"></asp:ScriptManager> 
```

然后，您可以在`pageLoad(){}`准备好之后的文档中做任何您想做的事情。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-24T08:57:25.790

做一件事为这些div提供一个类假设“abc”是一个css类并将这个类应用于这些div。然后检查这些div的内容如下：

```
 if ($('.divclass').html() != "Pass") 
 {
    $('.divclass').addClass("css class name of Pass");
    //Or
   $('.divclass').css('background-color', 'Green');
 }

 if ($('.divclass').html() != "Fail") 
 {
    $('.divclass').addClass("css class name of Fail");
    //Or
   $('.divclass').css('background-color', 'Red');
 } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-24T09:59:20.933

如果这些 div 的 Id 属性包含“GridComp”。然后您可以使用 setInterval 方法并继续检查 div 的存在。如果找到，则根据包含的文本和清除间隔设置这些 div 的样式。

```
var intervalId;
$(function(){
    intervalId = setInterval(styleDynamicDivs, 500);
});

function styleDynamicDivs(){

    if($('div[id*="GridComp"]').length > 0){
        clearInterval(intervalId);

        $('div[id*="GridComp"]').each(function(){
            var result = $.trim($(this).text().toLowerCase());
            if(result == "pass"){
                $(this).css('background-color', 'Green');
            }
            else
            {
                $(this).css('background-color', 'red');
            }
        });
    }
}​ 
```

# elasticsearch - 如何在 Elasticsearch 的父子映射中禁用路由？

> ID：14018662
> 
> 赞同：3
> 
> 时间：2012-12-24T07:53:03.127
> 
> 标签：elasticsearch

我已为我的 Elasticsearch(ES) 映射明确禁用路由：

```
{
 "chow-clfg": {
  "_parent": {
   "type": "chow-demo"
  },
  "_routing": {
   "required": false
  },
  "_id": {
   "path": "clfg"
  },
  "dynamic": "true",
  "_ttl": {
   "enabled": true,
   "default": "1h"
  },
  "properties": {
   "clfg": {
    "analyzer": "keyword",
    "type": "string"
   },
   "@timestamp": {
    "format": "dateOptionalTime",
    "type": "date"
   },
   "count": {
    "type": "long"
   }
  }
 }
} 
```

在执行 curl 命令删除和更新新映射后，当我执行 _cluster/state 命令时，我仍然启用了路由：

```
"mappings" : {
 "chow-clfg" : {
  "_id" : {
   "path" : "clfg"
  },
  "_routing" : {
   "required" : true
  },
  "_ttl" : {
   "enabled" : true,
   "default" : 3600000
  },
  "properties" : {
   "@timestamp" : {
    "format" : "dateOptionalTime",
    "type" : "date"
   },
   "clfg" : {
    "analyzer" : "keyword",
    "type" : "string"
   },
   "count" : {
    "type" : "long"
   }
  },
  "_parent" : {
   "type" : "chow-demo"
  }
} 
```

所以它给我留下了以下问题：

1.  如果在父/子映射中没有必要要求，我如何禁用路由？
2.  如果需要路由，是否可以在不唯一的字段上进行路由？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-24T14:20:04.850

子文档必须存储在与其父文档相同的分片中。这就是为什么需要为子文档路由的原因。默认情况下，文档按其 id 值进行路由，因此子文档使用父文档的 id 进行路由。你可以改变它。只要父母和他们所有的孩子都使用相同的路由值，你应该没问题。路由字段不必是唯一的，但为了获得良好的性能，它应该或多或少是均匀分布的。否则，您最终可能会在一个分片中得到很多记录，而在另一个分片中只有几条记录。

# rest - 支持 Jersey 中的注解继承

> ID：14018663
> 
> 赞同：1
> 
> 时间：2012-12-24T07:53:09.973
> 
> 标签：rest, annotations, jersey

我正在创建一个 SOA 项目。我想使用 Jersey 在休息时公开服务。在我的项目中，标准是创建一个具有 API 接口和 DTO 的 API 项目。实现项目依赖于API项目，所有实现都写在实现中。

这种架构背后的想法是，我们可以创建两个 API 项目，一个用于 REST，另一个用于 SOAP，用所需的注释对接口进行注释。结果，实现将不知道用于公开服务的方法（我的意思是 REST 和 SOAP）。

但是 Jersey 的问题是无法发现接口上的注释并不断抛出以下异常

> ```
> com.sun.jersey.api.container.ContainerException: The ResourceConfig instance does not contain any root resource classes. 
> ```

已经提出了一个类似的问题 - [JAX-RS Jersey/Grizzly 定义接口资源](https://stackoverflow.com/questions/6727747/jax-rs-jersey-grizzly-define-an-interface-resource)- 答案说可以使用 Spring-Jersey。

但我尝试了 spring-jersey 的各种配置选项 - 包括 - [http://jersey.java.net/nonav/apidocs/1.8/contribs/jersey-spring/com/sun/jersey/spi/spring/container/servlet/package -summary.html](http://jersey.java.net/nonav/apidocs/1.8/contribs/jersey-spring/com/sun/jersey/spi/spring/container/servlet/package-summary.html)

但没有任何成功。

问题

1.  尝试管理通过接口公开服务的不同方式的想法，这是一个可行的好主意吗？业内专家的表现如何？
2.  如何使用 Jersey 来理解 Interface 上的注释？
3.  像 RestEasy 这样的其他框架会有所帮助吗？

# javascript - 在具有多个级别的对象文字中迭代和搜索值

> ID：14018664
> 
> 赞同：3
> 
> 时间：2012-12-24T07:53:17.690
> 
> 标签：javascript, object-literal

这是我想做的事情：

1.  我有一个具有多个级别的树（javascript 对象文字结构）。
2.  我有这个对象的特定键的值。
3.  我想在结构中搜索这个确切的键值对并将另一个键的值作为输出返回。

为清楚起见，以下是我的对象文字：

```
{
"nodeId": 1081,
"appId": 150,
"displayText": "Welcome here",
"Nodes": [
    {
        "nodeId": 2000,
        "appId": 150,
        "displayText": "Buy",
        "parentNodeId": 1081,
        "Nodes": [
            {
                "nodeId": 2003,
                "appId": 150,
                "displayText": "tCars",
                "parentNodeId": 2000,
                "Nodes": [
                    {
                        "nodeId": 2006,
                        "appId": 150,
                        "displayText": "Diesel",
                        "parentNodeId": 2003,
                        "Nodes": [
                            {
                                "nodeId": 2008,
                                "appId": 150,
                                "displayText": "Price", //This is what I want as return value.
                                "parentNodeId": 2006,
                                "Nodes": [],
                                "nodeCode": "RN_1_1_2_1_3_2_4_1",
                                "parentCode": "RN_1_1_2_1_3_2",
                                "jumpToNode": "RN_1_1" //here is the value that I have with me.
                            }
                        ],
                        "nodeCode": "RN_1_1_2_1_3_2",
                        "parentCode": "RN_1_1_2_1"
                    }
                ],
                "concatWithHeader": false,
                "nodeCode": "RN_1_1_2_1",
                "parentCode": "RN_1_1"
            }
        ],
        "nodeCode": "RN_1_1",
        "parentCode": "RN"
    }
  ],
  "nodeCode": "RN",
  "parentCode": "ROOT_NODE"
} 
```

**2\. 我的价值观是“RN_1_1”反对`jumpToNode`**

**3.我想在这个对象字面量中搜索，得到键的值`displayText`**

我为此搜索并尝试了一些东西，但无法获得迭代内部`Nodes`对象的逻辑。

到目前为止我写的方法：

```
function getObjects(tree){
var searchkey="RN_1_1";
var displayText = "displayText";
var nodeCode = "nodeCode";
var returnText;

if (tree.hasOwnProperty(nodeCode)) {
   var obj = tree[nodeCode];

   if(obj == searchkey){
    returnText = tree[displayText]; //gives me the return text
    break;
   }
   else{
    //here I should iterate over the inner `Nodes` and get the required value.
   }
}
} 
```

请帮忙。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-24T08:27:14.837

我认为你可以做这样的递归工作：

```
function findProperty(obj, prop, val, propToFetch) {
    var answer;
    if (obj.hasOwnProperty(prop) && obj[prop] === val) {
        return obj[propToFetch];
    }
    for (var i = 0, len = obj.Nodes.length; i < len; i++) {
        answer = findProperty(obj.Nodes[i], prop, val, propToFetch);
        if (answer !== null) {return answer;}
    }
    return null;
}

var result = findProperty(data, "jumpToNode", "RN_1_1", "displayText"); 
```

在这里工作演示：http: [//jsfiddle.net/jfriend00/EjC5V/](http://jsfiddle.net/jfriend00/EjC5V/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-24T08:54:01.913

根据您的 JSON 对象，您可以使用这种方式：

```
var searchKey="RN_1_1",
displayText = "displayText",
nodeCode = "nodeCode",
returnText,

treeSearch = function (obj, searchKey) {
              if (obj[nodeCode] === searchKey) {
                returnText = obj[displayText];
              } else {
                if (obj['Nodes'][0]) {
                  treeSearch(obj['Nodes'][0], searchKey);
                } else {
                  returnText = null
                }

              }
            };

treeSearch(JSONdata, 'RN_1_1_2_1_3_2'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-24T08:58:48.893

我已经使用 nodeId 展平了数组，以便更容易地搜索它。

展平数组后，您可以根据需要对其进行过滤（我建议使用[underscorejs.org](http://underscorejs.org/)）

这是现场[示例](http://plnkr.co/edit/fTI71xNoLHydY0IOkcYg?p=preview)。结果显示在控制台中。

```
 function flattenNodes (obj, newArr) {
    if (obj && obj.Nodes) {
        var nodes = obj.Nodes;
        delete(obj.Nodes);
        newArr[obj.nodeId] = obj;
        return flattenNodes(nodes.pop(), newArr);
    } else {
        return newArr;
    }
  };
  var flattenArr = flattenNodes(arr, new Array());

  function findInJumpToNode(find) {
      for(key in flattenArr) {
        if (flattenArr[key] && flattenArr[key]['jumpToNode']) {
          if (flattenArr[key]['jumpToNode'] == find) {
            return flattenArr[key];
          }
        }
      }
  }

  var found = findInJumpToNode('RN_1_1');
  console.log(found); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-24T09:20:21.967

您可以使用递归来处理您的情况。在 jsFiddle 上查看此[示例。](http://jsfiddle.net/5r4Rr/)

```
var nodes= [getNodes()];  
alert(getObjects(nodes));
function getObjects(tree){    

var searchkey="RN_1_1_2_1_3_2_4_1";
var displayText = "displayText";
var nodeCode = "nodeCode";
var returnText;

if(tree.length > 0)
{    
    if(tree[0]["nodeCode"] === searchkey)
    {        
        return tree[0][displayText];        
    }
    if(typeof tree[0]["Nodes"] === "undefined")
    {
        return;
    }
    return getObjects(tree[0]["Nodes"]);
}

} 
```

# c - 使用 C 编程将 RGB 图像转换为 YUV

> ID：14018666
> 
> 赞同：0
> 
> 时间：2012-12-24T07:53:36.910
> 
> 标签：c, image-processing

我有位图和 JPEG 格式的图像。我将不得不从图像中检索像素，并通过获得所有像素的 RGB 值。请建议一种从图像文件中检索 RGB 值的方法。如果 C 中有任何可用的功能，我将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T10:02:27.400

[您可以使用libJPEG](http://libjpeg.sourceforge.net/)从 JPEG 解析和获取位图- 这非常简单

假设您在“rgb”中有 RGB bimap。结果将被放置在“yuv420p”向量中。

```
void rgb2yuv420p(std::vector<BYTE>& rgb, std::vector<BYTE>& yuv420p)
{
  unsigned int i = 0;
  unsigned int numpixels = width * height;
  unsigned int ui = numpixels;
  unsigned int vi = numpixels + numpixels / 4;
  unsigned int s = 0;

#define sR (BYTE)(rgb[s+2])
#define sG (BYTE)(rgb[s+1])
#define sB (BYTE)(rgb[s+0])

  yuv420p.resize(numpixels * 3 / 2);

  for (int j = 0; j < height; j++)
    for (int k = 0; k < width; k++)
    {
      yuv420p[i] = (BYTE)( (66*sR + 129*sG + 25*sB + 128) >> 8) + 16;

      if (0 == j%2 && 0 == k%2)
      {
        yuv420p[ui++] = (BYTE)( (-38*sR - 74*sG + 112*sB + 128) >> 8) + 128;
        yuv420p[vi++] = (BYTE)( (112*sR - 94*sG - 18*sB + 128) >> 8) + 128;
      }
      i++;
      s += colors;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-24T08:32:58.790

如果你想自己做这件事，这里是我在工作时所做的维基百科文章，大约一年前： [http ://en.wikipedia.org/wiki/YUV](http://en.wikipedia.org/wiki/YUV)

这也很好： [http ://www.fourcc.org/fccyvrgb.php](http://www.fourcc.org/fccyvrgb.php)

但是 jpeglib 更容易 - 在我的情况下这不是一个选项，因为数据首先不是 jpeg。

# windows-phone-7 - WP7如何在只有一个全景项目时禁用滑动

> ID：14018669
> 
> 赞同：1
> 
> 时间：2012-12-24T07:53:55.150
> 
> 标签：windows-phone-7, swipe, panorama-control, disabled-control

我在 Windows Phone 7 中启动了一个非常基本的全景应用程序。在该页面中是一个`Panorama`只有 1 的控件`PanoramaItem`。

问题是用户可以刷这个全景图。我想禁用此行为，该怎么做？

P/S：我看到`Pivot`控件不会受到这种行为的影响

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-25T04:46:12.447

我看到将全景控制设置`IsEnabled`为 false 可以解决我的问题

```
panorama.IsEnabled = false; 
```

# php - 我如何从这个 xml 中获取值

> ID：14018674
> 
> 赞同：1
> 
> 时间：2012-12-24T07:54:40.267
> 
> 标签：php, xml, simplexml

我有来自外部 url [http://www.xmlcharts.com/cache/precious-metals.xml的 xml 文件](http://www.xmlcharts.com/cache/precious-metals.xml)

```
<prices>
<pricelist currency="usd">
<price timestamp="1356079920" per="ozt" commodity="gold">1649.45</price>
<price timestamp="1356079680" per="ozt" commodity="palladium">676.00</price>
<price timestamp="1356079740" per="ozt" commodity="platinum">1553.75</price>
<price timestamp="1356079860" per="ozt" commodity="silver">29.95</price>
</pricelist>
<pricelist currency="eur">
<price timestamp="1356079920" per="ozt" commodity="gold">1248.80</price>
<price timestamp="1356079680" per="ozt" commodity="palladium">511.80</price>
<price timestamp="1356079740" per="ozt" commodity="platinum">1176.34</price>
<price timestamp="1356079860" per="ozt" commodity="silver">22.68</price>
</pricelist>
<pricelist currency="chf">
<price timestamp="1356079920" per="ozt" commodity="gold">1507.76</price>
<price timestamp="1356079680" per="ozt" commodity="palladium">617.93</price>
<price timestamp="1356079740" per="ozt" commodity="platinum">1420.28</price>
<price timestamp="1356079860" per="ozt" commodity="silver">27.38</price>
</pricelist>
</prices> 
```

我已经使用 PHP 通过

```
$xmlobj = simplexml_load_file($feedurl);
print_r($xmlobj->pricelist); 
```

输出如下：

```
SimpleXMLElement Object ( [pricelist] => Array ( [0] => SimpleXMLElement Object ( [@attributes] => Array ( [currency] => usd ) [price] => Array ( [0] => 1649.45 [1] => 676.00 [2] => 1553.75 [3] => 29.95 ) ) [1] => SimpleXMLElement Object ( [@attributes] => Array ( [currency] => eur ) [price] => Array ( [0] => 1248.80 [1] => 511.80 [2] => 1176.34 [3] => 22.68 ) ) [2] => SimpleXMLElement Object ( [@attributes] => Array ( [currency] => chf ) [price] => Array ( [0] => 1507.76 [1] => 617.93 [2] => 1420.28 [3] => 27.38 ) ) ) ) 
```

我试过`$xmlobj->pricelist`了，但无法获得**价格**价值...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-24T08:06:07.130

```
$xml = simplexml_load_file('http://www.xmlcharts.com/cache/precious-metals.xml');

foreach($xml as $pricelist) {
    // if($pricelist->attributes()->currency == 'usd')
    foreach($pricelist as $price) {
        echo $price[0].' ';
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-24T07:59:10.100

如果你真的检查你的输出，`print_r($xmlobj->pricelist);`你会发现它*正在*抓取每件商品的价格。尝试通过将`pricelist`其视为对象来访问价格。通过以下方式访问价格：`$xmlobj->pricelist->price[1]`看看是否可行。

我这样说是因为`$xmlobj->pricelist->price`数组包含您正在寻找的机器人。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-20T17:00:31.690

```
$load_xml = simplexml_load_file("http://www.xmlcharts.com/cache/precious-metals.xml"); 
echo $load_xml->pricelist[0]->price[0]; //is gold

echo $load_xml->pricelist[0]->price[1]; //is palladium
echo $load_xml->pricelist[0]->price[2]; //is platinum
echo $load_xml->pricelist[0]->price[3]; //is silver 
```

# c# - 提取 XML 的特定部分

> ID：14018675
> 
> 赞同：1
> 
> 时间：2012-12-24T07:54:41.500
> 
> 标签：c#, .net, xml, xml-parsing

我在一个字符串变量中有一个 XML 我想检查这个 xml 内容是否包含

```
<xml>
<message display='yes'>
.... 
```

或者

```
<xml>
<xdp:xdp>
... 
```

可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T08:08:28.967

以下是您可以检查它的方法：

```
 string example = @"<xml>
            <message display='yes'></message>
            </xml>";

        XDocument doc = XDocument.Parse(example);
        if (doc.Element("xml").Element("message") != null)
        {
            // node "message" exists within node "xml" which is located at the root of the document
        } 
```

您可以使用`XDocument`类来检查 XML 文档层次结构中任何位置是否存在任何节点。您可以轻松地从字符串或文件加载内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-24T08:02:53.177

**下面的一个例子**

```
<Order>
  <AmazonOrderID>000-1111111-2222222</AmazonOrderID>
  <MerchantOrderID>111-3333333-4444444</MerchantOrderID>
  <PurchaseDate>2012-03-02T13:28:53+00:00</PurchaseDate>
  <LastUpdatedDate>2012-03-02T13:29:05+00:00</LastUpdatedDate>
  <OrderStatus>Pending</OrderStatus>
  <SalesChannel>Amazon.com</SalesChannel>
  <URL>http://www.amazon.com</URL>
  <FulfillmentData>
    <FulfillmentChannel>Amazon</FulfillmentChannel>
    <ShipServiceLevel>Standard</ShipServiceLevel>
    <Address>
      <City>Beverly Hills</City>
      <State>CA</State>
      <PostalCode>90210-1234</PostalCode>
      <Country>US</Country>
    </Address>
  </FulfillmentData>
  <OrderItem>
    <ASIN>AmazonASIN </ASIN>
    <SKU> Internal-SKU</SKU>
    <ItemStatus>Pending</ItemStatus>
    <ProductName> This is the name of the product </ProductName>
    <Quantity>1</Quantity>
    <ItemPrice>
      <Component>
        <Type>Principal</Type>
        <Amount currency="USD">19.99</Amount>
      </Component>
    </ItemPrice>
  </OrderItem>
</Order>

    List<string> getNodes(string path, string nodeName) {

    List<string> nodes = new List<string>(); 

    XDocument xmlDoc = XDocument.Load(path); //Create the XML document type

    foreach (var el in xmlDoc.Descendants(nodeName)) {
            //for debugging
            //nodes.Add(el.Name + " " + el.Value);

            //for production
            nodes.Add(el.Value);
    }
   return nodes;
} //end getNodes

List<string> skuNodes = xml.getNodes(@"AmazonSalesOrders.xml", "SKU"); 
```

# c# - “不包含静态‘主要’方法”错误

> ID：14018681
> 
> 赞同：0
> 
> 时间：2012-12-24T07:55:31.797
> 
> 标签：c#, compiler-errors

在我的程序上运行 Windows 应用程序时出现以下错误。任何人都可以帮忙吗？

> 错误：程序“C:\Users\Owner\Documents\Visual Studio 2008\Projects\Project1\Integer Division\Integer Division\obj\Debug\Integer Division.exe”不包含适合入口点的静态“Main”方法整数除法

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-24T08:01:50.070

你需要有一个：

```
static void Main()
{
} 
```

如果您想“运行”某些东西，则需要 main 。这基本上是主要功能，顾名思义，您的程序将在哪里运行。您应该查找其中包含 main() 的任何类示例并将代码放入其中（用于整数除法的代码？）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-24T07:57:37.417

[不包含适合入口点的静态“main”方法](https://stackoverflow.com/questions/9607702/does-not-contain-a-static-main-method-suitable-for-an-entry-point)

或者

[对“程序不包含静态'Main'方法”进行故障排除...？](https://stackoverflow.com/questions/386831/troubleshooting-program-does-not-contain-a-static-main-method-when-it-clearl)

但这肯定与整数除法无关。

# node.js - 如何在同一模型的模式方法中创建模型实例？

> ID：14018683
> 
> 赞同：14
> 
> 时间：2012-12-24T07:55:55.467
> 
> 标签：node.js, model, mongoose

主题。我想在它的静态方法中初始化一个新的模型实例：

```
var Schema = new mongoose.Schema({...});

//...

Schema.statics.createInstance = function (name, pass) {
    var newPerson = new Person; // <--- or 'this', or 'Schema'?
    newPerson.name = name;
    newPerson.pass = pass;
    newPerson.save();
    return newPerson;
}

// ...

module.exports = db.model("Person", Schema); 
```

我怎么能做到这一点？

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-12-24T15:57:38.300

你走在正确的轨道上；`this`是模式在`schema.statics`方法中注册的模型，因此您的代码应更改为：

```
Schema.statics.createInstance = function (name, pass) {
    var newPerson = new this();
    newPerson.name = name;
    newPerson.pass = pass;
    newPerson.save();
    return newPerson;
} 
```

Leonid 在处理`save`回调方面是正确的，即使它只是记录错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-24T08:17:04.117

你几乎回答了你的问题。您的代码的唯一问题是您此时没有注册模型。但是您可以使用`mongoose.model`它来动态获取它：

```
Schema.statics.createInstance = function (name, pass) {
    var newPerson = new db.model('Person'); // <- Fetch  model "on the fly"
    newPerson.name = name;
    newPerson.pass = pass;
    newPerson.save();
    return newPerson;
} 
```

哦。并考虑处理`save`回调。您不能确定该`save`操作不会失败。

# regex - Mod重写正则表达式：如何在其他字符之间只允许一个句点？

> ID：14018685
> 
> 赞同：2
> 
> 时间：2012-12-24T07:56:14.637
> 
> 标签：regex, apache, mod-rewrite, url-rewriting

我正在编写一个 mod 重写规则，以只允许任意长度字符之间的一个句点。字符必须以字母开头，后跟 2-29 个字符或数字，中间只允许有一个句点（可选）（但不能在末尾）。

这是我到目前为止所拥有的：

```
RewriteCond    %{REQUEST_FILENAME}        !-f
RewriteCond    %{REQUEST_FILENAME}        !-d
RewriteRule    ^([a-z]([.a-z0-9]{2,29}))$    user.php?u=$1     [NC,QSA,L] 
```

此规则不起作用，因为它允许`f.oo`(valid)、`foo.`(invalid)、`f.o.o`(invalid) 甚至`f......`.

是否可以仅使用 apache 的 mod rewrite 来完成？还是必须在 PHP 或其他地方进行检查？

类似[的问题： this](https://stackoverflow.com/questions/11171976/escape-period-character-in-mod-rewrite-regex)和[this](https://stackoverflow.com/questions/12089792/regex-to-allow-numbers-and-only-one-hyphen-in-the-middle)。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T08:16:32.060

我不知道如何在一个正则表达式中做到这一点，但你可以堆叠你的正则表达式

```
^[a-z][.a-z0-9]{2,29}$     #3-30 characters long, starting with a letter, then nums
^[a-z0-9]+\.?[a-z0-9]+$    #has zero or one dot in middle 
```

**更新以考虑数字**

[http://regex101.com/r/nD2lI6](http://regex101.com/r/nD2lI6)

[http://regex101.com/r/gR3vA1](http://regex101.com/r/gR3vA1)

所以完整的例子应该是这样的：

```
RewriteCond    %{REQUEST_FILENAME}        !-f
RewriteCond    %{REQUEST_FILENAME}        !-d
RewriteCond    %{REQUEST_URI}  ^[a-z][.a-z0-9]{2,29}$
RewriteRule    ^([a-z0-9]+\.?[a-z0-9]+)$     user.php?u=$1     [NC,QSA,L] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-24T08:43:12.697

我不能在一个规则中做到这一点，所以我使用了两个：

```
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond $1 ^.{3,30}$
RewriteRule ^([a-z][a-z0-9]*(?:\.[a-z0-9]+)?)$ user.php?u=$1 [NC,QSA,L] 
```

# java - 只是获取连接到系统的 USB 设备的名称？

> ID：14018693
> 
> 赞同：6
> 
> 时间：2012-12-24T07:57:38.557
> 
> 标签：java, usb

Java 是否可以调用任何系统调用或操作系统特定函数来获取所连接的 USB 设备的名称？

我在这里只看到了大概 6-7 个问题，但每个人都提到了 C++ 函数`GetRawInputDeviceList()`等，它们不兼容跨平台。适用于 C# 或 C++ 中的 Windows 或仅适用于 Linux。

但我正在使用 Java。此外，这需要跨平台。至少，它需要适用于 Windows、Linux 和 Mac。我也可以使用终端/shell/命令提示符命令。我想我可以用 Java 运行它们。

我试过`getFileSystemView`和`listRoots`。但他们给出了所有驱动器的名称 [dvd、hdd 分区、软盘等]。

我只需要获取 USB 设备。

请不要提及 jUSB 或 JSR080。为什么：

**jUSB：** [目前访问 USB 设备需要将它们连接到 GNU/Linux 主机系统](http://jusb.sourceforge.net/)

**javax.usb：** [pre-alpha Windows 实现未经认证，需要内核驱动程序。](http://javax-usb.sourceforge.net/)

**usb4java：** [基本上，它只是实现了更多抽象的 JSR80，也许](http://kayahr.github.com/usb4java/)

虽然老实说我没有尝试过 libusb，因为它是 C++ 语言。

如果您要提及 API，请提及经过全面测试和尝试的 API，它们适用于 Linux、Windows 和 Mac。如果不是这样，我不会提出这个问题。我在许多其他帖子中看到过提到 jUSB、javax.usb 等。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-24T08:02:55.760

您可以使用`jUsb` [API](http://jusb.sourceforge.net/apidoc/overview-summary.html)，用于 Linux。

或者您可以`terminal`使用该类在 Linux 中启动`Process`，然后运行 `ls -la /dev/disk/by-id/usb-*`并捕获`stdout`以了解结果。

对于 Windows，您可以试试这个：[如何使用 PowerShell 找到我的 USB 闪存驱动器的路径](https://stackoverflow.com/questions/9704328/how-to-find-my-usb-flash-drives-path-with-powershell)

**编辑：**

对于 Windows，另一个有用的实用程序是`devcon.exe`.

有关更多信息，请查看[此。](https://superuser.com/questions/414280/how-do-i-view-a-list-of-devices-from-the-command-line-in-windows)

**编辑 2：** 对于 Mac，您可以`terminal`使用`Process`该类启动并运行`system_profiler SPUSBDataType`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-24T13:16:40.293

Yoy可以试试[javahidapi](http://code.google.com/p/javahidapi/wiki/ReadMe)。我认为它是一些 c/c++ 代码和 JNI。声明 linux、mac 和 windows 支持。我已经在 linux 上尝试过（好的），在虚拟框中使用干净的窗口（不好，UnsatisfiedLinkError，我认为一些 MSVS 库被遗漏了）。如果你从源代码编译它，它应该可以工作，我相信。

这是示例：

```
import com.codeminders.hidapi.HIDDeviceInfo;
import com.codeminders.hidapi.HIDManager;

public class TestHid {

    public static void main(String[] args) throws Exception {
        try {
            com.codeminders.hidapi.ClassPathLibraryLoader.loadNativeHIDLibrary();
            HIDManager hidManager = HIDManager.getInstance();
            HIDDeviceInfo[] infos = hidManager.listDevices();
            for (HIDDeviceInfo info : infos) {
                System.out.println("info: " + info.toString());
            }
        } catch (Exception ex) {
            ex.printStackTrace();
        }
    }
} 
```

EDIT 输出显示只有一个插入的 USB 设备，即天才激光鼠标。

```
[grigory@gr testRSA]$ pwd
/home/grigory/testRSA/out/production/testRSA
[grigory@gr testRSA]$ whoami 
grigory
[grigory@gr testRSA]$ java -cp ".:hidapi-1.1.jar" Test
libusb couldn't open USB device /dev/bus/usb/003/002: Permission denied.
libusb requires write access to USB device nodes.
info:HIDDeviceInfo [path=0003:0002:00, vendor_id=1112, product_id=58, serial_number=null, release_number=0, manufacturer_string=null, product_string=null, usage_page=0, usage=0, interface_number=0]
[grigory@gr testRSA]$ sudo java -cp ".:hidapi-1.1.jar" Test
[sudo] password for grigory: 
info:HIDDeviceInfo [path=0003:0002:00, vendor_id=1112, product_id=58, serial_number=null, release_number=0, manufacturer_string=Genius, product_string=Laser Mouse, usage_page=0, usage=0, interface_number=0]
[grigory@gr testRSA]$ 
```

对于新的 Windows XP，它不起作用（我只能找到一个窗口。我没有 Visual Studio 用于从源代码编译 lib）：

```
E:\testRSA\out\production\testRSA>java -cp ".;hidapi-1.1.jar" -Djava.library.pat
h="e:\testRSA\out\production\testRSA" Test
Exception in thread "main" java.lang.UnsatisfiedLinkError: com.codeminders.hidap
i.HIDManager.init()V
        at com.codeminders.hidapi.HIDManager.init(Native Method)
        at com.codeminders.hidapi.HIDManager.<init>(HIDManager.java:53)
        at com.codeminders.hidapi.HIDManager.getInstance(HIDManager.java:121)
        at Test.main(Test.java:14) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-05-05T09:59:18.547

自从您第一次提出这个问题以来，情况可能有所改善。我最近开始在 Mac 上探索[usb4java](http://usb4java.org)，它似乎可以工作。有可用的示例代码，适用于低级（类似 libusb）API 和高级（javax）API。

要列出所有 USB 设备，请查看[示例](https://github.com/usb4java/usb4java-javax-examples/blob/master/src/main/java/org/usb4java/javax/examples/)。

我直接从 usb4java.org 下载了所有库，并从 github 下载了示例。我没有设法让 maven 构建工作，但我可以在 Eclipse 中导入库和示例并运行它们。

usb4java 中包含相同的本机代码，但该库将它们全部包装得非常漂亮，并隐藏了所有杂乱的细节，只在需要时提取和部署本机代码。

# scala - 为什么我可以在类型类声明上使用“<:”但不能使用“<:<”

> ID：14018694
> 
> 赞同：3
> 
> 时间：2012-12-24T07:57:40.317
> 
> 标签：scala

以下代码编译成功，但第二个无法编译。据我了解，这两个符号都意味着类型约束。

```
class Hello[T <: String](t:T)

class Hello[T <:< String](t:T) 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-24T08:55:27.343

他们有点不同。`<:`is 是一个类型约束，意思`A`是 的子类型`B`，而`<:<`is 是一个类型，意思是一样的。所以这会起作用：

```
class Hello[T <: String](t:T)

class Hello[T](t: T <:< String) 
```

选择

```
class Hello[T](t: <:<[T, String]) 
```

编辑：

一个用例是证明一种类型参数是另一种类型的子类型：

```
def foo[A,B](a: A, b: B)(implicit ev: A <:< B) = "yay"

scala> foo(Nil, List(1,2,3))
res13: java.lang.String = yay

scala> foo(List(1,2,3), Nil)
<console>:9: error: Cannot prove that List[Int] <:< scala.collection.immutable.Nil.type.
              foo(List(1,2,3), Nil)
                 ^ 
```

# java - 设置客户端 Google Tasks 应用

> ID：14018695
> 
> 赞同：3
> 
> 时间：2012-12-24T07:57:40.803
> 
> 标签：java, dependencies, google-api-java-client, scribe, google-tasks-api

**我的问题：**如何正确设置 Google Tasks 客户端库 API，以便构建我的应用程序？（即这可能只是由于文档不佳而导致的依赖问题）。

**问题：**不幸的是，Google Tasks 的支持较低，因此有关此[文档](https://developers.google.com/google-apps/tasks/instantiate)的文档已过时（他们的代码无法使用他们提供的依赖项进行编译）。我缺少以下必要的课程：

```
import com.google.api.client.auth.oauth2.draft10.AccessTokenResponse;
import com.google.api.client.googleapis.auth.oauth2.draft10.GoogleAccessProtectedResource;
import com.google.api.client.googleapis.auth.oauth2.draft10.GoogleAccessTokenRequest.GoogleAuthorizationCodeGrant;
import com.google.api.client.googleapis.auth.oauth2.draft10.GoogleAuthorizationRequestUrl; 
```

`*.draft10.*;`我好像找不到 它（它们）不包含在 Google 在[setup 文档中](https://developers.google.com/google-apps/tasks/setup)提供的任何依赖项中。

我实际上猜测问题不在于他们提供的客户端库，而在于他们提供的设置代码示例。

我曾考虑过使用[scribe](https://github.com/fernandezpablo85/scribe-java)来访问 REST 服务来进行身份验证，但我在那里也遇到了一些挑战，我认为解决这个问题会容易得多。

**注意：**我的应用程序是客户端应用程序。这是为了个人发展和享受。它可能会有一个非常简单的摇摆界面。我没有在 Android 或网络应用程序上做任何事情。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T14:30:52.203

抱歉，Tasks 文档已经过时了！我们确实有两个更新的 google-api-java-client 示例可能对您有所帮助：

[calendar-cmdline-sample](http://samples.google-api-java-client.googlecode.com/hg/calendar-cmdline-sample/instructions.html)演示了如何执行 OAuth 2.0 流程

[tasks-android-sample](http://samples.google-api-java-client.googlecode.com/hg/tasks-android-sample/instructions.html)演示了使用 Tasks API

注意：我是 google-api-java-client 项目的所有者

# list - 以树结构的形式转换列表列表以进行高效搜索

> ID：14018699
> 
> 赞同：0
> 
> 时间：2012-12-24T07:58:00.663
> 
> 标签：list, search, tree

作为项目要求的一部分，我需要在列表列表中搜索节点（字符串）。该集合由 N 个列表组成，每个列表都是由 L 个节点组成的列表。这里 N 的值很大，通常 >= 5000，L =< 100。

1.  什么数据结构最适合转换每个列表的 L 个节点，以便搜索更快更容易？

    我不确定是否将列表转换为某种树结构的形式，因为列表的节点是字符串（我可以手动为每个节点分配一些编号并将其转换为合适的树结构，以便搜索更快？如果是，哪种树结构是理想的）

提前感谢您对此提供的任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T08:04:30.370

我建议两种结构：

1）对字符串列表进行排序，以便您可以进行二进制搜索（复杂性：O(n*log(n)) 用于插入和搜索）

2) 更好：将字符串放在一个hashmap中，这样插入和搜索是O(1)。

您也可以使用 B-tree (http://en.wikipedia.org/wiki/B-tree)，但它类似于保持列表有序，我认为这会导致更多开销。

如果性能是一个问题，我肯定会选择（2）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-24T16:23:26.363

我建议使用散列图或排序树，将字符串（城市名称）映射到形式的元组（index_in_main_list，index_in_sublist）。

在散列映射的情况下，这允许对字符串进行恒定时间查找，同时仍允许对原始列表进行迭代。

你提到了城市的字符串，子列表是旅行路线。由于城市可能位于多条旅行路线上，因此您应该为每个散列保留几个元组。

例如，在 Java 中，类型声明将是：

```
public class IndexTuple {
    public final int fst;
    public final int snc;
    public IndexTuple(int fst, int snd) {
        this.fst = fst;
        this.snd = snd;
    }
}

HashMap<String, ArrayList<IndexTuple>> lookupMap;

// The sublists of cities. I've used an ArrayList as example, but
// that's language and context dependent. Use arrays if the size
// won't change.
ArrayList<ArrayList<String>> cities; 
```

填充数据结构变得非常容易，只需遍历列表并添加：

```
for(int i = 0; i < cities.size(); i++) {
    for(int j = 0; j < cities.get(i).size(); j++) {
        String city = cities.get(i).get(j));
        if(!lookupMap.containsKey(city) {
            lookupMap.put(city, new ArrayList<IndexTuple>());
        }
        lookupMap.get(city).add(new IndexTuple(i, j));
    }
} 
```

* * *

编辑：请注意，如果您不必遍历原始列表，则可以在构建散列图或树后将其删除。记住索引后，您仍然可以找出城市所属的序列。重建列表以进行迭代将是一种混乱。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-24T08:20:15.747

我实际上不会更改数据结构。列表列表是一个非常好的数据结构，原因有两个：

1.  您可以使用 Mainlist(5)(7) 之类的索引，基本上将您的列表视为一个大的二维数组（具有不同的列大小）。
2.  很容易在你的脑海中“想象”，这样进一步的编码会更容易

因此，根据您的编程语言，可以执行双重 for 循环：

```
for all elements in mainlist:
   for all elements in sublist:
       if element == target:
           break;
       endif
    endfor
endfor 
```

或者更好的是，您可以使用 foreach 循环：

*   C++ [http://blogs.msdn.com/b/arich/archive/2004/09/08/227139.aspx](http://blogs.msdn.com/b/arich/archive/2004/09/08/227139.aspx)
*   Java [http://www.javapractices.com/topic/TopicAction.do?Id=196](http://www.javapractices.com/topic/TopicAction.do?Id=196)

在任何情况下，foreach 都非常有效，它会遍历所有列表并停止（一旦你说 break;）。所有其他转换可能会花费您大量的计算。

另一种选择是 izaera 所说的使用哈希图，但是您的其余代码（如果您希望操作列表）会有点困难，所以请保持简单。:)

# php - CakePHP cacheHelper - appController not found 错误

> ID：14018700
> 
> 赞同：8
> 
> 时间：2012-12-24T07:58:08.010
> 
> 标签：php, cakephp, caching

我将 CacheHelper 添加到我的应用程序中。在我的 APP/Config/core.php 我有

```
Configure::write('Cache.check', true); 
```

在 APP/Config/bootstrap.php 我有

```
Configure::write('Dispatcher.filters', array(
  'AssetDispatcher',
  'CacheDispatcher'
)); 
```

在我的控制器中，我有：

```
public $helpers = array('Text', 'Cache');
public $cacheAction = "1 hour"; 
```

我在这个控制器和 AppController 中都没有直接的回调。问题是每个页面只加载一次（例如——在缓存被清除之后）。在第二个请求我回来

```
Fatal Error

Error: Class 'AppController' not found 
```

如果缓存关闭，一切正常。

CakePHP 版本是 2.2.3

**调试日志：**

```
 2012-12-24 12:21:00 Error: Fatal Error (1): Class 'AppController' not found in    [/Volumes/../app/Controller/NewsController.php, line 2]
 2012-12-24 12:21:00 Error: [FatalErrorException] Class 'AppController' not found
 #0 /Volumes/../lib/Cake/Error/ErrorHandler.php(161): ErrorHandler::handleFatalError(1,     'Class 'AppContr...', '/Volumes/Data/D...', 2)
 #1 [internal function]: ErrorHandler::handleError(1, 'Class 'AppContr...', '/Volumes/../D...', 2, Array)
 #2 /Volumes/../lib/Cake/Core/App.php(926): call_user_func('ErrorHandler::h...', 1, 'Class 'AppContr...', '/Volumes/../D...', 2, Array)
 #3 /Volumes/../lib/Cake/Core/App.php(899): App::_checkFatalError()
 #4 [internal function]: App::shutdown()
 #5 {main} 
```

**新闻控制器：**

```
<?php
class NewsController extends AppController {
public $components = array('Security', 'ImageTool', 'Uploader');
public $paginate = array(
        'fields' => array('News.id', 'News.created'),
        'limit' => 5,
        'contain' => array(),
        'order' => array('News.id' => 'DESC'));

public $helpers = array('Text', 'Cache');
public $cacheAction = "1 hour"; 
```

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-12-26T15:22:11.227

获胜者是... App::uses('AppController', 'Controller'); 在控制器代码的顶部。

```
App::uses('AppController', 'Controller');

class NewsController extends AppController {
public $helpers = array('Cache');
public $cacheAction = array(
    'index'  => 48000
);

public function index() {

}
public function clear() {
    clearCache();
}
} 
```

我不知道为什么这还没有包含在食谱中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-03-24T22:22:19.200

```
<?php
namespace App\Controller;
use App\Controller\AppController;
class StudentsController extends AppController{} 
```

这对我有用。

# mysql - 使用 GROUP BY 从 MySql DB 中获取第二个最大值

> ID：14018705
> 
> 赞同：0
> 
> 时间：2012-12-24T07:58:31.533
> 
> 标签：mysql, sql, group-by

我有一张桌子`tbl_patient`，我想获取每位患者的最后 2 次就诊信息，以便比较患者状况是改善还是恶化。

```
tbl_patient

id | patient_ID | visit_ID | patient_result
1  |     1      |   1      |     5
2  |     2      |   1      |     6
3  |     2      |   3      |     7
4  |     1      |   2      |     3
5  |     2      |   3      |     2
6  |     1      |   3      |     9 
```

我尝试了下面的查询来获取每个患者的最后一次访问，

```
SELECT MAX(id), patient_result FROM `tbl_patient` GROUP BY `patient_ID` 
```

现在我想通过查询获取每位患者的第二次最后一次访问，但它给了我错误 **（#1242 - 子查询返回超过 1 行）**

```
SELECT id, patient_result FROM `tbl_patient` WHERE id <(SELECT MAX(id) FROM `tbl_patient` GROUP BY `patient_ID`) GROUP BY `patient_ID` 
```

我错在哪里

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-24T08:20:25.327

```
select p1.patient_id, p2.maxid id1, max(p1.id) id2
from tbl_patient p1
join (select patient_id, max(id) maxid
      from tbl_patient
      group by patient_id) p2
on p1.patient_id = p2.patient_id and p1.id < p2.maxid
group by p1.patient_id 
```

`id11`是最后一次访问`id2`的 ID，是倒数第二次访问的 ID。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-24T08:28:13.743

您的第一个查询没有获得最后一次访问，因为它给出了结果 5 和 6 而不是 2 和 9。您可以尝试以下查询：

```
SELECT patient_ID,visit_ID,patient_result
FROM tbl_patient
where id in (
    select max(id) 
    from tbl_patient
    GROUP BY patient_ID)
union
SELECT patient_ID,visit_ID,patient_result
FROM tbl_patient
where id in (
    select max(id) 
    from tbl_patient
    where id not in (
        select max(id) 
        from tbl_patient
        GROUP BY patient_ID)
    GROUP BY patient_ID)
order by 1,2 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-24T08:18:13.010

```
SELECT id, patient_result FROM `tbl_patient` t1
JOIN (SELECT MAX(id) as max, patient_ID FROM `tbl_patient` GROUP BY `patient_ID`) t2 
      ON t1.patient_ID = t2.patient_ID
WHERE id <max GROUP BY t1.`patient_ID` 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-24T08:51:23.833

有几种方法可以在单个 SQL 语句中返回指定的结果集。

不幸的是，这些方法中的大多数都会产生相当笨拙的语句。

在处理大型集合时，看起来更优雅的语句往往表现不佳（或无法忍受）。往往具有更好性能的语句看起来更不优雅。

三种最常见的方法使用：

*   相关子查询
*   不等式连接（几乎是笛卡尔积）
*   两次遍历数据

这是一种使用 MySQL 用户变量对数据进行**两次传递**的方法，它基本上模拟了`RANK() OVER(PARTITION ...)`其他 DBMS 中可用的分析函数：

* * *

```
SELECT t.id
     , t.patient_id
     , t.visit_id
     , t.patient_result
  FROM (
         SELECT p.id
              , p.patient_id
              , p.visit_id
              , p.patient_result
              , @rn := if(@prev_patient_id = patient_id, @rn + 1, 1) AS rn
              , @prev_patient_id := patient_id AS prev_patient_id
           FROM tbl_patients p
           JOIN (SELECT @rn := 0, @prev_patient_id := NULL) i
          ORDER BY p.patient_id DESC, p.id DESC
       ) t
WHERE t.rn <= 2 
```

请注意，这涉及内联视图，这意味着将遍历表中的所有数据以创建“派生表”。然后，外部查询将针对派生表运行。因此，这本质上是对数据的两次传递。

`patient_id`通过消除内联视图返回的列的重复值，可以稍微调整此查询以提高性能。但我如上所示，因此我们可以更好地了解正在发生的事情。

这种方法在大型集合上可能相当昂贵，但通常比其他一些方法更有效。

`patient_id`另请注意，如果该患者仅`id`存在一个值，则此查询将为 a 返回一行；它不仅限于返回至少有两排的患者。

* * *

**也可以使用相关的子查询**获得等效的结果集：

```
SELECT t.id
     , t.patient_id
     , t.visit_id
     , t.patient_result
  FROM tbl_patients t
 WHERE ( SELECT COUNT(1) AS cnt
           FROM tbl_patients p
          WHERE p.patient_id = t.patient_id
            AND p.id >= t.id
       ) <= 2
 ORDER BY t.patient_id ASC, t.id ASC 
```

请注意，这是使用“依赖子查询”，这基本上意味着对于从 返回的每一行`t`，MySQL 正在有效地对数据库运行另一个查询。因此，在大型场景中，这往往会非常昂贵（就经过的时间而言）。

* * *

作为另一种方法，如果`id`每个患者的值相对较少，则可以使用**不等式 join**来解决：

```
SELECT t.id
     , t.patient_id
     , t.visit_id
     , t.patient_result
  FROM tbl_patients t
  LEFT
  JOIN tbl_patients p
    ON p.patient_id = t.patient_id 
   AND t.id < p.id
 GROUP
    BY t.id
     , t.patient_id
     , t.visit_id
     , t.patient_result
HAVING COUNT(1) <= 2 
```

请注意，这将为每位患者创建一个近似笛卡尔积。对于每个患者的有限数量的`id`值，这不会太糟糕。但是，如果一个患者有数百个`id`值，则中间结果可能很大，大约为 (O)n**2。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-24T08:24:15.903

试试这个..

```
SELECT id, patient_result FROM tbl_patient AS tp WHERE id < ((SELECT MAX(id) FROM tbl_patient AS tp_max WHERE tp_max.patient_ID = tp.patient_ID)  - 1) GROUP BY patient_ID 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-12-24T08:08:07.313

为什么不简单地使用...

```
GROUP BY `patient_ID` DESC LIMIT 2 
```

...然后在下一步中完成其余的工作？

# python - 在我的示例中，为什么 python 的 re.findall 不返回所有找到的子字符串？

> ID：14018707
> 
> 赞同：-1
> 
> 时间：2012-12-24T07:58:50.587
> 
> 标签：python, findall

> **可能重复：**
> [Python 正则表达式找到所有重叠的匹配项？](https://stackoverflow.com/questions/5616822/python-regex-find-all-overlapping-matches)

我不明白为什么 python 的 re.findall 没有在下面的示例中返回所有找到的子字符串。有任何想法吗？

```
>>> import re
import re
>>> t='1 2 3'
t='1 2 3'
>>> m=re.findall('\d\s\d',t)
m=re.findall('\d\s\d',t)
>>> m
m
['1 2'] 
```

但预期的结果是 m = ['1 2', '2 3']。

有关信息，我使用的是 python 2.6.1。谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-24T08:02:31.600

`help(re.findall)`

> 关于模块 re 中的 findall 函数的帮助：
> 
> findall(pattern, string, flags=0)
> 返回字符串中所有非重叠匹配的列表。
> 
> 如果模式中存在一个或多个组，则返回
> 组列表；如果模式有多个组，这将是一个元组列表。
> 
> 结果中包含空匹配项。

由于两个结果重叠（都包含“2”），因此只会返回第一个结果。

如果相反，您将得到`t='1 2 3 4'`结果将是`['1 2', '3 4']`.

# javascript - Facebook批量上传使用javascript

> ID：14018709
> 
> 赞同：2
> 
> 时间：2012-12-24T07:59:02.113
> 
> 标签：javascript, facebook-graph-api, batch-file

我必须使用批处理在 facebook 中上传多张照片现在正在使用此循环上传。它工作正常。但是如何用批处理来实现这个

```
for (var u=0; u < len; u++) { 
    var  dat = obj[u].url;

    FB.api('/'+ids+'/photos', 'post', {
        message: 'rose',
        status: 'success',
        access_token: FB.getAuthResponse().accessToken , 
        url: dat
    }, function (response) {
        // $('.ftab_prog').hide();
        if (!response || response.error)
            showError("Couldn't upload the photo. Please try again later.");
        else
            showInfo("Posted photo '<b>"+bn+"</b>' to facebook successfully!");
    });

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-08-12T14:46:39.340

鉴于您已经有工作的 javascript 代码，为什么不使用 CScript 从命令行托管它。请参阅[此超级用户问题](https://superuser.com/questions/488763/how-to-run-js-file-from-a-command-line-on-windows)。

# javafx-2 - 在 JavaFX 2.x ListView 中如何获取鼠标下的哪一行？

> ID：14018739
> 
> 赞同：2
> 
> 时间：2012-12-24T08:02:18.790
> 
> 标签：javafx-2

默认样式突出显示鼠标所在的行。我需要找出 onMouseMove 处理程序中的行索引。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-24T08:41:09.323

其中一种方法是使用细胞工厂。例如，考虑 oracle 教程中的示例代码[示例 12-4 创建单元工厂](http://docs.oracle.com/javafx/2/ui_controls/list-view.htm#CEGIIDDC)。要添加您想要替换电池出厂设置代码的功能，如下所示：

```
list.setCellFactory(new Callback<ListView<String>, ListCell<String>>() {
    @Override
    public ListCell<String> call(ListView<String> list) {
        final ListCell cell = new ColorRectCell();
        cell.setOnMouseEntered(new EventHandler<MouseEvent>() {
            @Override
            public void handle(MouseEvent event) {
                System.out.println("index: " + cell.getIndex());
            }
        });
        return cell;
    }
}); 
```

# jquery - 动态添加和删除 z-index 的 css

> ID：14018744
> 
> 赞同：-2
> 
> 时间：2012-12-24T08:02:44.027
> 
> 标签：jquery, css, dynamic

`$('.sn').css({'z-index':'-1000'});` （隐藏整个组）加载整个类，并从该类中我想显示或应用 css `$('#item1').css({'z-index':'1000'});`（仅显示组中的一个）单击某些元素动态但这种情况不会发生请帮助我？当我使用 hide() & show() 方法时，它工作正常。

```
//on click ..
$(document).on('click','#slider1prev',function(){   

    selected = selected-1;

    if(my_text != ""){
        $('#noteImage'+selected).css({'z-index':'1000'});
        $('#noteText'+selected).css({'z-index':'1000'});
    }

}); 
```

//负载..

```
$('.sn').css({'z-index':'-1000'});
$('.notes').css({'z-index':'-1000'}); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-24T08:32:47.843

为什么不直接使用`show()`and`hide()`方法呢？Z-index 只是改变元素的堆栈顺序并且只对`positioned elements`. 所以如果你想使用 z-index. 将元素`position`属性设置为`absolute`或`fixed`。

阅读有关[z-index 的](http://www.w3schools.com/cssref/pr_pos_z-index.asp)更多信息。

所以而不是做

```
.css({'z-index':'1000'}); 
```

做

```
.css({'position': 'absolute', 'z-index':'1000'}); 
```

或者

```
.css({'position': 'fixed', 'z-index':'1000'}); 
```

# c++ - 扩展功能（又名修改）Visual Studio C/C++ 编译器

> ID：14018745
> 
> 赞同：0
> 
> 时间：2012-12-24T08:02:48.823
> 
> 标签：c++, c, visual-studio-2010, visual-studio, compiler-construction

我想扩展 Visual Studio 中使用的 C/C++ 编译器的功能。基本上，我想编写一个工具来解析 c/c++ 代码并打印出所有分支（if check、break 语句、for/while 循环等）在代码中发生的位置。然后，我想在执行代码时使用此信息来灰显给定测试用例尚未执行的代码区域。

可能吗？Microsoft 是否提供任何向其编译器/调试器添加功能的方法？

- 谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-24T08:10:09.517

微软的编译器一直是一个黑匣子。（取自他们自己的网站，来自即将发布的链接）。所以你有机会现在不可能。但随着[Roslyn](http://blogs.msdn.com/b/visualstudio/archive/2011/10/19/introducing-the-microsoft-roslyn-ctp.aspx)项目的出现，这种情况即将改变。

无论如何，在我看来，您不应该查看编译器，而是查看 Visual Studio 的调试部分。有一些[API](http://msdn.microsoft.com/de-de/library/vstudio/bb147088.aspx)允许您与调试器进行交互，这可能是您想要走的路（以及其他人确实走的路）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-26T00:48:22.470

使用预处理器来检测代码。代码在运行时应该吐出一个文件。在断点处，使用调试器 API + Visual Studio 插件机制处理此信息和“灰显”代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-24T09:41:20.623

您通常不会通过修改编译器来做到这一点，而使用 Microsoft 的编译器则无论如何都无法做到这一点。相反，您将编写一个*检测*代码的预处理器（在条件节点处插入额外的代码以跟踪控制流），然后编写一个处理跟踪数据以确定运行的工具。

Visual Studio 本身有[一个加载项体系结构](http://msdn.microsoft.com/en-us/library/xc52cke4.aspx)，允许您以您描述的方式在编辑器中呈现此数据。

检测本身并不重要——它需要能够解析所有有效的 C 和 C++ 代码，并能够保留原始行号信息，以便呈现未检测的代码。为了完整起见，它必须能够使用三元 ?: 运算符重构代码，以便可以检测其流程。插桩代码还需要是标准预处理器输出的代码，而不是原始源代码——这使得行号跟踪更加困难（尽管预处理器已经管理了它以供调试器使用）。

# php - 代码点火器会话：无法将值从控制器存储到会话

> ID：14018751
> 
> 赞同：0
> 
> 时间：2012-12-24T08:03:22.153
> 
> 标签：php, codeigniter, session

当我尝试从控制器函数向会话中插入一些值时，它不会存储该值。

检查登录时存储会话没有问题。但是在另一个控制器中（我尝试保存到会话中以启用搜索）并尝试在另一个控制器中打印值，最近插入的那些变为空白。

这很奇怪，因为我遵循了在 Code Igniter 中为会话分配值的所有规则。

控制器代码是

```
$this->session->set_userdata("langId",$lang[0]->languageId);   
$this->session->set_userdata("direction",$lang[0]->direction); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T10:25:17.907

试试这个应该可以

`$this->session->set_userdata("langId",$lang->languageId);
$this->session->set_userdata("direction",$lang->direction);`

# android - 关于安卓活动

> ID：14018752
> 
> 赞同：4
> 
> 时间：2012-12-24T08:03:35.063
> 
> 标签：android, android-activity

我面临一个与`Activity`. 我的情况如下：

我开始活动 A，单击一个按钮，然后从图库中选择一个图像，然后`onActivityResult`我调用了`startActivity(B)`。

现在，在我的活动 B 中，在 A 中选择的图像已显示在`ListView`其上。

现在单击我调用的按钮`startActivityforResult(Recorder class)`打开了一个新活动，这是一个自定义录像机活动。

现在在活动记录器中单击停止按钮`mediaRecorder`停止，释放并保存视频，然后`setResult`再次进入活动 B 进入`onActivityResult()`. 但问题是：

我在这里发现了两个不同的案例：

1.  第一个是当我将我的 Recorder 类声明为 Landscape 时：

    在 Recorder 类中单击停止按钮时，我的屏幕变黑，几秒钟后活动 A 开始。

2.  第二个是当我将 Recorder 类的方向更改为纵向模式时：

    此处单击记录器类活动 B 中的停止按钮开始（无黑屏），但几秒钟后活动 A 再次开始。

我在这里观察到的另一件事：

*   我在活动 B 中替换`startActivityForResult()`为`startActivity()`记录器活动，我再次调用`startActivity(B)`它显示活动 B，但是在几秒钟后发生了一些新的事情，相同的活动 B 再次开始。
*   我确信这只是因为`MediaRecorder`当我评论了我`Recorder`班上的所有媒体记录器代码时，一切都很好。

我的记录器类代码在这里：

```
public class Recorder extends Activity implements SurfaceHolder.Callback{

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        mediaRecorder = new MediaRecorder();
        setContentView(R.layout.recorde);
        initMediaRecorder();

        timer = new Timer();
        TimerTask timerTask = new TimerTask() {
            @Override
            public void run() {
                if(counter<=10)
                    counter++;
                //Android UI get Updated continouly
                else {
                    // If condition full filled the timer will stop here
                    mediaRecorder.stop();
                    mediaRecorder.reset();
                    mediaRecorder.release();
                    timer.cancel();
                    Recorder.this.finish();
                    Intent i = new Intent(Recorder.this,B.class);
                    setResult(Activity.RESULT_OK, i.putExtra("returnedVideo", strPath));
                }
            } 
        };
        timer.schedule(timerTask, 1000, 1000);

        SurfaceView myVideoView = (SurfaceView)findViewById(R.id.videoview);
        surfaceHolder = myVideoView.getHolder();
        surfaceHolder.addCallback(this);
        surfaceHolder.setType(SurfaceHolder.SURFACE_TYPE_PUSH_BUFFERS);

        myButton = (Button)findViewById(R.id.mybutton);
        myButton.setOnClickListener(myButtonOnClickListener);
    }

    private Button.OnClickListener myButtonOnClickListener
    = new Button.OnClickListener(){

        public void onClick(View arg0) {
            // TODO Auto-generated method stub
            mediaRecorder.stop();
            mediaRecorder.reset();
            mediaRecorder.release();
            timer.cancel();
            Recorder.this.finish();

            Intent i = new Intent(Recorder.this,B.class);
            setResult(Activity.RESULT_OK, i.putExtra("returnedVideo", strPath));
        }};

        public void surfaceChanged(SurfaceHolder arg0, int arg1, int arg2, int arg3) {
            // TODO Auto-generated method stub

        }
        public void surfaceCreated(SurfaceHolder arg0) {
            // TODO Auto-generated method stub
            prepareMediaRecorder();
        }
        public void surfaceDestroyed(SurfaceHolder arg0) {
            // TODO Auto-generated method stub

            mediaRecorder.stop();
            mediaRecorder.release();
            //Recorder.this.finish();
        }

        @Override
        public void onBackPressed() {
            // TODO Auto-generated method stub
            super.onBackPressed();

            mediaRecorder.stop();
            mediaRecorder.release();
        }

        private void initMediaRecorder(){
            Random genraotr = new Random();
            int n = 10000;
            n = genraotr.nextInt(n);            

            mediaRecorder.setAudioSource(MediaRecorder.AudioSource.DEFAULT);
            mediaRecorder.setVideoSource(MediaRecorder.VideoSource.DEFAULT);
            CamcorderProfile camcorderProfile_HQ = CamcorderProfile.get(CamcorderProfile.QUALITY_HIGH);
            mediaRecorder.setProfile(camcorderProfile_HQ);
            mediaRecorder.setOutputFile("/sdcard/my_video"+n+".mp4");
            strPath = "/sdcard/my_video"+n+".mp4";
            mediaRecorder.setMaxDuration(10000); // Set max duration 10 sec.
            mediaRecorder.setMaxFileSize(5000000); // Set max file size 5M
        }

        private void prepareMediaRecorder(){
            mediaRecorder.setPreviewDisplay(surfaceHolder.getSurface());
            try {
                mediaRecorder.prepare();
                mediaRecorder.start();
            } catch (IllegalStateException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            } catch (IOException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
        }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T11:30:47.833

我没有看到任何可以保存和恢复 Activity 实例状态的代码。当 Android 将另一个 Activity 放在顶部时，它可能会销毁并重新创建 Activity，当您重新定位设备时它也会重新启动 Activity。在这两种情况下，您似乎确实遇到了问题。

然后，Android 会尝试恢复活动，但您需要通过存储和恢复您的状态来提供帮助。默认情况下不会恢复太多，尤其是您自己的字段只会获得空值。

实施[onSavedInstanceState](http://developer.android.com/reference/android/app/Activity.html#onSaveInstanceState%28android.os.Bundle%29)，放入对您的程序继续工作可能很重要的提供的包（地图）。然后检查 onCreate 参数 savedInstanceState 是否不为空，如果是，则从此包中恢复您认为重要的内容。另外，实现[onRestoreInstanceState](http://developer.android.com/reference/android/app/Activity.html#onRestoreInstanceState%28android.os.Bundle%29)。

这是演示问题的代码。这是一个简单的应用程序，具有一个字符串类型的状态变量。启动程序并尝试将设备从纵向重新定向为横向。您的消息文本将变为“我的状态为空但现在恢复为 13c140ff7e6”之类的内容。因此 create() 已被第二次调用，状态字段变为空，现在必须从传递的包中恢复。同时，静态字段中的值很可能会被保留（在某些情况下也可能会消失），这表明这不是应用程序的完全冷重启。这可以解释简单的重定向可能会使不知道这些事情的应用程序崩溃。为结果启动另一个活动可能会导致类似的效果。该代码还演示了应该如何解决问题。

```
package com.example.state;

import android.app.Activity;
import android.os.Bundle;
import android.widget.TextView;

public class MainActivity extends Activity {

String myState;

static String staticString;

protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    TextView sv = (TextView) findViewById(R.id.main);

    if (savedInstanceState != null) {
        String state = savedInstanceState.getString("myState");
        sv.setText("My state was " + myState + " but now restored to "
                + state+", static "+staticString);
        myState = state;
    } else {
        String state = Long.toHexString(System.currentTimeMillis());
        sv.setText("My state: " + myState + ", cold start, now set to "+state);
        myState = state;
        staticString = state;
    }
}

protected void onRestoreInstanceState(Bundle savedInstanceState) {
    super.onRestoreInstanceState(savedInstanceState);
    myState = savedInstanceState.getString("myState");
}

protected void onSaveInstanceState(Bundle outState) {
    super.onSaveInstanceState(outState);
    outState.putString("myState", myState);
}
} 
```

带布局

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    tools:context=".MainActivity" >

    <TextView
        android:id="@+id/main"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_centerHorizontal="true"
        android:layout_centerVertical="true"
     />

</RelativeLayout> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-08T08:53:15.827

您的录音机类似乎有问题。请尝试使用此代码一次：

```
public class AndroidVideoCapture extends Activity{

    private Camera myCamera;
    private MyCameraSurfaceView myCameraSurfaceView;
    private MediaRecorder mediaRecorder;

    Button myButton;
    SurfaceHolder surfaceHolder;
    boolean recording;  
    public static String strPath;

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        recording = false;

        setContentView(R.layout.main);

        //Get Camera for preview
        myCamera = getCameraInstance();
        if(myCamera == null){
            Toast.makeText(AndroidVideoCapture.this, 
                    "Fail to get Camera", 
                    Toast.LENGTH_LONG).show();
        }

        myCameraSurfaceView = new MyCameraSurfaceView(this, myCamera);
        FrameLayout myCameraPreview = (FrameLayout)findViewById(R.id.videoview);
        myCameraPreview.addView(myCameraSurfaceView);

        myButton = (Button)findViewById(R.id.mybutton);
        myButton.setOnClickListener(myButtonOnClickListener);
    }

    Button.OnClickListener myButtonOnClickListener
    = new Button.OnClickListener(){

        public void onClick(View v) {
            // TODO Auto-generated method stub
            if(recording){
                // stop recording and release camera
                mediaRecorder.stop();  // stop the recording
                releaseMediaRecorder(); // release the MediaRecorder object
                Intent i = new Intent(AndroidVideoCapture.this,TakeAnotherPhoto.class);
                i.putExtra("returnedVideo", strPath);
                setResult(Activity.RESULT_OK, i);

                //Exit after saved
                finish();
            }else{

                //Release Camera before MediaRecorder start
                releaseCamera();

                if(!prepareMediaRecorder()){
                    Toast.makeText(AndroidVideoCapture.this, 
                            "Fail in prepareMediaRecorder()!\n - Ended -", 
                            Toast.LENGTH_LONG).show();
                    finish();
                }

                mediaRecorder.start();
                recording = true;
                myButton.setText("STOP");
            }
        }};

    private Camera getCameraInstance(){
        // TODO Auto-generated method stub
        Camera c = null;
        try {
            c = Camera.open(); // attempt to get a Camera instance
        }
        catch (Exception e){
            // Camera is not available (in use or does not exist)
        }
        return c; // returns null if camera is unavailable
    }

    private boolean prepareMediaRecorder(){

        Random genraotr = new Random();
        int n = 10000;
        n = genraotr.nextInt(n);    

        myCamera = getCameraInstance();
        mediaRecorder = new MediaRecorder();

        myCamera.unlock();
        mediaRecorder.setCamera(myCamera);

        mediaRecorder.setAudioSource(MediaRecorder.AudioSource.CAMCORDER);
        mediaRecorder.setVideoSource(MediaRecorder.VideoSource.CAMERA);

        mediaRecorder.setProfile(CamcorderProfile.get(CamcorderProfile.QUALITY_HIGH));

        mediaRecorder.setOutputFile("/sdcard/auction_video"+n+".mp4");
        strPath = "/sdcard/auction_video"+n+".mp4";
        mediaRecorder.setMaxDuration(10000); // Set max duration 10 sec.
        mediaRecorder.setMaxFileSize(5000000); // Set max file size 5M

        mediaRecorder.setPreviewDisplay(myCameraSurfaceView.getHolder().getSurface());

        try {
            mediaRecorder.prepare();
        } catch (IllegalStateException e) {
            releaseMediaRecorder();
            return false;
        } catch (IOException e) {
            releaseMediaRecorder();
            return false;
        }
        return true;

    }

    protected void onPause() {
        super.onPause();
        releaseMediaRecorder();       // if you are using MediaRecorder, release it first
        releaseCamera();              // release the camera immediately on pause event
    }

    private void releaseMediaRecorder(){
        if (mediaRecorder != null) {
            mediaRecorder.reset();   // clear recorder configuration
            mediaRecorder.release(); // release the recorder object
            mediaRecorder = null;
            myCamera.lock();           // lock camera for later use
        }
    }

    private void releaseCamera(){
        if (myCamera != null){
            myCamera.release();        // release the camera for other applications
            myCamera = null;
        }
    }

    public class MyCameraSurfaceView extends SurfaceView implements SurfaceHolder.Callback{

        private SurfaceHolder mHolder;
        private Camera mCamera;

        public MyCameraSurfaceView(Context context, Camera camera) {
            super(context);
            mCamera = camera;

            // Install a SurfaceHolder.Callback so we get notified when the
            // underlying surface is created and destroyed.
            mHolder = getHolder();
            mHolder.addCallback(this);
            // deprecated setting, but required on Android versions prior to 3.0
            mHolder.setType(SurfaceHolder.SURFACE_TYPE_PUSH_BUFFERS);
        }

        public void surfaceChanged(SurfaceHolder holder, int format, int weight,
                int height) {
            // If your preview can change or rotate, take care of those events here.
            // Make sure to stop the preview before resizing or reformatting it.

            if (mHolder.getSurface() == null){
              // preview surface does not exist
              return;
            }

            // stop preview before making changes
            try {
                mCamera.stopPreview();
            } catch (Exception e){
              // ignore: tried to stop a non-existent preview
            }

            // make any resize, rotate or reformatting changes here

            // start preview with new settings
            try {
                mCamera.setPreviewDisplay(mHolder);
                mCamera.startPreview();

            } catch (Exception e){
            }
        }

        public void surfaceCreated(SurfaceHolder holder) {
            // TODO Auto-generated method stub
            // The Surface has been created, now tell the camera where to draw the preview.
            try {
                mCamera.setPreviewDisplay(holder);
                mCamera.startPreview();
            } catch (IOException e) {
            }
        }

        public void surfaceDestroyed(SurfaceHolder holder) {
            // TODO Auto-generated method stub

        }
    }

    @Override
    public void onBackPressed() {
        // TODO Auto-generated method stub
        super.onBackPressed();

        mediaRecorder.stop();  // stop the recording
        releaseMediaRecorder(); // release the MediaRecorder object               
        //Exit after saved
        finish();
    }

//  public void showMessage(String title, String message, final Context context){
//      try
//      {
//          AlertDialog.Builder alt_bld = new AlertDialog.Builder(context);
//          alt_bld.setTitle(title);
//          alt_bld.setMessage(message);
//          alt_bld.setCancelable(false);
//          alt_bld.setNeutralButton("OK", new DialogInterface.OnClickListener() {
//
//              public void onClick(DialogInterface dialog, int which) {
//                  // TODO Auto-generated method stub
//                  dialog.dismiss();
//                  
//                  Intent i = new Intent(AndroidVideoCapture.this,TakeAnotherPhoto.class);
//                  i.putExtra("returnedVideo", strPath);
//                  setResult(Activity.RESULT_OK, i);
//              }
//          });
//          alt_bld.show();
//      }
//      catch (Exception e) {
//          // TODO: handle exception
//      }
//  }
} 
```

让我知道它是否有效。

谢谢

# ios - 为什么不应该在删除/插入行的方法上调用 reloadData

> ID：14018754
> 
> 赞同：0
> 
> 时间：2012-12-24T08:03:55.317
> 
> 标签：ios, cocoa-touch, uitableview, reloaddata

我试图实现像[麻雀](http://www.sparrowmailapp.com/iphone.php)一样显示动作行的行滑动（我的起点是 [这段](https://github.com/alexzielenski/ZKRevealingTableViewCell)代码）。

对于我创建的每一行.. 我还创建了一个引用父行的“backView” UITableViewCell.. 这样当我在 backView 上单击删除时.. 它知道要删除哪个电子邮件等。

而不是使用 iOS 的内置编辑模式 delete.. 我只是在 backView 上创建了一个按钮并将一个事件处理程序附加到它。父单元格是后视图的代表。后视图将删除任务交给父单元格。

我按照苹果的[指示](http://developer.apple.com/library/ios/#documentation/uikit/reference/UITableView_Class/Reference/Reference.html#//apple_ref/occ/instm/UITableView/reloadData)不在我的事件处理程序方法中添加 reloadData 。但是后来事情都搞砸了..我会删除一行，它不会被删除或以错误的顺序删除等等。我注意到，如果我在每次删除后跳回父菜单..事情完美地工作..所以使用[这个](https://stackoverflow.com/questions/9831466/ios-uitableview-reloaddata-only-refreshes-table-the-second-time-i-call-my-reload)工作（即暴力强制reloadData）一切都很完美。

**我的问题是**（对不起，介绍太长了）为什么要求我们不要在插入/删除方法中使用 reloadData？还是只有当我们使用[删除行的编辑模式方式](http://developer.apple.com/library/ios/#documentation/userexperience/conceptual/tableview_iphone/ManageInsertDeleteRow/ManageInsertDeleteRow.html)时，该指令才适用？苹果对此并不十分清楚。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T08:57:07.660

试试这个 ：

*   用 indexPath.row 标记你的删除按钮
*   然后在删除按钮 IBAction

假设你只有一个部分

```
-(IBAction)deleteBtn:(id)Sender
{
    UIButton *delBtn = (UIButton *)sender;

    [self.tableView deleteRowsAtIndexPaths:[NSArray arrayWithObject:[NSIndexPath indexPathForRow:delBtn.tag inSection:0]] withRowAnimation:UITableViewRowAnimationLeft];

} 
```

这只会删除 indexPath 处的行，并且只会重新加载该行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-24T08:13:14.667

reloadData 完全重建表绕过动画。如果您删除或插入行，请使用 beginUpdates。这里是解释：

> -(void)beginUpdates 开始一系列插入、删除或选择接收器的行和部分的方法调用。如果您希望后续的插入、删除和选择操作（例如，cellForRowAtIndexPath: 和 indexPathsForVisibleRows）同时进行动画处理，请调用此方法。这组方法必须以调用 endUpdates 结束。这些方法对可以嵌套。如果您不在此块内进行插入、删除和选择调用，则行数等表属性可能会变得无效。你不应该在组内调用 reloadData；如果您在组内调用此方法，您将需要自己执行任何动画。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-27T09:23:32.760

由于`- [UITableView reloadData]`重新加载所有数据，它基本上会使对 UI 的任何临时、非永久性更改无效。您应该在数据结构中反映这些变化，或者，我认为这通常是一个更好的主意，坚持 Apple 的默认方法（尝试仅更改图形，而不是逻辑）。

# node.js - 查看 express.js 中所有当前活动的会话

> ID：14018761
> 
> 赞同：10
> 
> 时间：2012-12-24T08:04:56.660
> 
> 标签：node.js, session, express

我发现了许多其他语言的类似问题 - ASP.net、Django 等......但是，我对 Express.js 感兴趣而不是 Node.js 。如何查看当前处于活动状态的所有会话？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2020-04-13T04:37:14.297

[会话存储 API](http://expressjs.com/en/resources/middleware/session.html#session-store-implementation)有一个可选的all [() 方法](http://expressjs.com/en/resources/middleware/session.html#storeallcallback)“用于将存储中的所有会话作为数组获取”。

你会这样称呼它`req.sessionStore.all((err, sessions)=>{ ... })`

我只是尝试使用它，但它是可选的，并且 memcached 驱动程序（在我的情况下）没有实现它。

另一种方法是绕过这个，如果可能的话，查询存储技术本身。Hitalo 的回答就是这种方法的一个例子。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-24T13:57:02.727

我会查看您用于会话数据的存储，除非您使用 cookie 来实际存储所有会话数据，而不仅仅是会话 ID。

也许有一种方法可以访问会话列表，无论您将会话数据存储在哪里，但我认为没有。但我在这里可能错了。

[此处](http://www.senchalabs.org/connect/session.html)描述了 Express Session API ，以防您找不到它（我花了很多时间弄清楚许多 Express 对象实际上是 Connect 对象并在那里记录）。但你可能知道...

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2018-01-18T02:48:52.217

此代码构建一个路由，该路由返回所有已保存会话的数组。如果您使用`express`的是`express-session`模块。

```
router.get('/sessions', (req, res) => {
  req.sessionStore.sessionModel.findAll()
    .then(sessions => sessions.map(sess => JSON.parse(sess.dataValues.data)))
    .then((sessions) => {
      res.send(sessions)
    })
})
```

# android - Android资源泄漏尝试

> ID：14018764
> 
> 赞同：1
> 
> 时间：2012-12-24T08:05:20.560
> 
> 标签：android

下面是我的代码，我有这个奇怪的警告：`Resource leak: 'br' is never closed`。谁能帮我解决这个警告。我不希望我的应用程序在将来崩溃或导致任何问题。

```
File sdcard = Environment.getExternalStorageDirectory();
File file = new File(sdcard,"/St/"+ textToPass);
StringBuilder text = new StringBuilder();
try {
    BufferedReader br = new BufferedReader(new FileReader(file));
    String line;
    while ((line = br.readLine()) != null) {
        text.append(line);
        text.append('\n');
    }           
}catch (IOException e) {
    Toast.makeText(getApplicationContext(),"Error reading file!",Toast.LENGTH_LONG).show();
    e.printStackTrace();
}
TextView output=(TextView) findViewById(R.id.st); 
// Assuming that 'output' is the id of your TextView
output.setText(text); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-24T08:08:47.273

您没有关闭 BufferedReader。

```
BufferedReader.close() 
```

将关闭您的两个流。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-24T08:09:04.680

这是以下[链接](http://www.eclipse.org/forums/index.php/t/369552/)和[https://bugs.eclipse.org/bugs/show_bug.cgi?id=361073](https://bugs.eclipse.org/bugs/show_bug.cgi?id=361073)

他们建议使用 br.close() 试试这个

# iphone - 旋转导航栏按钮

> ID：14018766
> 
> 赞同：1
> 
> 时间：2012-12-24T08:05:29.360
> 
> 标签：iphone, objective-c, ios, rotation, uinavigationbar

我想将导航栏按钮图像旋转 45 度。我使用以下代码来执行此操作

```
 CGAffineTransform cgaRotateHr = CGAffineTransformMakeRotation(-(3.141/2));
    [self.button setTransform:cgaRotateHr]; 
```

它适用于其他按钮图像，但不适用于导航栏按钮。我不明白这种意外行为的原因是什么。任何帮助是极大的赞赏 ....

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T08:11:47.743

尝试使用此代码创建新的栏按钮项，然后将其设置为导航栏的左/右

```
+ (UIBarButtonItem *) barItemWithImage:(UIImage *)img size:(CGSize)size target:(id)target action:(SEL)selector
{
    UIButton *button = [UIButton buttonWithType:UIButtonTypeCustom];

    [button setImage:img forState:UIControlStateNormal];

    button.frame= CGRectMake(0.0, 0.0, size.width, size.height);

    [button addTarget:target action:selector forControlEvents:UIControlEventTouchUpInside];

    // your transform code
    CGAffineTransform cgaRotateHr = CGAffineTransformMakeRotation(-(3.141/2));
    [button setTransform:cgaRotateHr];

    UIBarButtonItem *forward = [[[UIBarButtonItem alloc] initWithCustomView:button] autorelease];

    return forward;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-24T09:21:49.087

我已经通过以下方式解决了这个问题......

*   拖放一个`UIView`at Bar 按钮项。
*   拖放`UIButton`到此视图上。
*   然后代码旋转，

    ```
    CGAffineTransform cgaRotateHr = CGAffineTransformMakeRotation(-(3.141/4));
    [self.button setTransform:cgaRotateHr]; 
    ```

# ios - 模拟器启动画面中的 iOS 应用程序旋转 90 度

> ID：14018769
> 
> 赞同：1
> 
> 时间：2012-12-24T08:06:06.503
> 
> 标签：ios, xcode

我有一个宽度为 480、高度为 320 的 default-landscape.png 图像，当它显示在我的模拟器中时，它会旋转 90 度。我将 App Game Kit 用于我的图形引擎，并将标准 C++ 用于其余部分，但我相当确定它与 xcode 配置有关。这是我遇到的图像：

![http://i4.photobucket.com/albums/y102/paultr/ScreenShot2012-12-23at114643PM_zpsb6761d90.png](../Images/2cd93e3cf3e1a99fd48eecbb5a53ee2f.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T08:07:54.293

如果您希望设备处于纵向模式，高度不应该是 480 而宽度是 320 吗？无论如何，您可以以编程方式设置设备方向，您可以尝试将其添加到您的 AppDelegate 以按照您希望的方式设置设备方向，希望这会有所`shouldAutorotateToInterfaceOrientation:`帮助。

# c++ - 无法访问在类“CObject”中声明的私有成员？

> ID：14018772
> 
> 赞同：0
> 
> 时间：2012-12-24T08:06:21.467
> 
> 标签：c++, windows, mfc, visual-studio-2012

```
class EventDataValue {
public:
    enum Types {
        NONE,
        INT,
        STRING,
        DOUBLE,
        ULONG
    };

    EventDataValue() { this->Type = NONE; }
    EventDataValue( const EventDataValue &s ) { 
        this->Type = s.Type;

        if (this->Type == INT) 
            this->i = s.i;
        else if (this->Type == STRING)
            this->s = s.s;
        else if (this->Type == DOUBLE)
            this->d = s.d;
        else if (this->Type == ULONG)
            this->ul = s.ul;
    }

    EventDataValue& operator=( const EventDataValue &s ) { 
        this->Type = s.Type;

        if (this->Type == INT) 
            this->i = s.i;
        else if (this->Type == STRING)
            this->s = s.s;
        else if (this->Type == DOUBLE)
            this->d = s.d;
        else if (this->Type == ULONG)
            this->ul = s.ul;

        return *this; 
    }

    EventDataValue(int value) {
        this->Type = INT;
        this->i = value;
    }

    EventDataValue(CString &value) {
        this->Type = STRING;
        this->s = value;
    }

    EventDataValue(LPCTSTR value) {
        this->Type = STRING;
        this->s = CString(value);
    }

    EventDataValue(double value) {
        this->Type = DOUBLE;
        this->d = value;
    }

    EventDataValue(unsigned long value) {
        this->Type = ULONG;
        this->ul = value;
    }

    ~EventDataValue() { }

    operator int(void) const {
        return this->i;
    }

    operator CString(void) const {
        return this->s;
    }

    operator double(void) const {
        return this->d;
    }

    operator unsigned long(void) const {
        return this->ul;
    }

    Types Type;
    int i;
    CString s;
    double d;
    unsigned long ul;
};

class EventData {
public:
    EventData(CString strEventCode, CString &strSessionId, int nFlowId = 0) {
        this->Add(CString(_T("tp")), strEventCode);
        this->Add(CString(_T("ss")), strSessionId);
        this->Add(CString(_T("ts")), (int)std::time(0));

        if (nFlowId != 0)
            this->Add(CString(_T("fl")), nFlowId);
    }

    template <typename T>
    void Add(CString name, T value) {
        EventDataValue event_value(value);

        if (cMap.Lookup(name, NULL) == TRUE)
            return;

        cMap[name] = value;
    }

    CMap<CString, CString, EventDataValue, EventDataValue> cMap;
};

class Events {
public:
    Events() { }
    ~Events() { }

    void Add(EventData ev) {
        this->aEvents.Add(ev);
    }

    CStringW Serialize() {
        CStringW strOutput;
        INT_PTR i, j;

        if (_tcscmp(API_FORMAT, FORMAT_JSON) == 0) {
            for (i = 0; i != this->aEvents.GetCount(); i++) {
                EventData ev = this->aEvents[i];

                strOutput += L"{";

                j = 0;

                POSITION pos = ev.cMap.GetStartPosition();

                while (pos != NULL) {
                    CString key;
                    EventDataValue value;

                    ev.cMap.GetNextAssoc( pos, key, value );

                    strOutput += StringFormat(_T("\"%s\": "), key.GetString());

                    if (value.Type == EventDataValue::STRING) {
                        CString str = value;
                        strOutput += Enquoute(str);
                    } else if (value.Type == EventDataValue::INT) {
                        int n = value;
                        strOutput += StringFormat(_T("%d"), n);
                    } else if (value.Type == EventDataValue::DOUBLE) {
                        double d = value;
                        strOutput += StringFormat(_T("%d"), static_cast<int>(d));
                    } else if (value.Type == EventDataValue::ULONG) {
                        ULONG ul = value;
                        strOutput += StringFormat(_T("%u"), ul);
                    }

                    if (j++ < ev.cMap.GetCount() - 1)
                        strOutput += _T(",");
                }

                strOutput += _T("}");
            }
        } else {
            for (i = 0; i != this->aEvents.GetCount(); i++) {
                EventData ev = this->aEvents[i];

                strOutput += _T("<Event>");

                j = 0;

                POSITION pos = ev.cMap.GetStartPosition();

                while (pos != NULL) {
                    CString key;
                    EventDataValue value;

                    ev.cMap.GetNextAssoc( pos, key, value );

                    strOutput += StringFormat(_T("<%s>"), key.GetString());

                    if (value.Type == EventDataValue::STRING) {
                        CString str = value;
                        strOutput += str;
                    } else if (value.Type == EventDataValue::INT) {
                        int n = value;
                        strOutput += StringFormat(_T("%d"), n);
                    } else if (value.Type == EventDataValue::DOUBLE) {
                        double d = value;
                        strOutput += StringFormat(_T("%d"), static_cast<int>(d));
                    } else if (value.Type == EventDataValue::ULONG) {
                        ULONG ul = value;
                        strOutput += StringFormat(_T("%u"), ul);
                    }

                    strOutput += StringFormat(_T("</%s>"), key.GetString());
                }

                strOutput += _T("</Event>");
            }

        }

        return strOutput;
    }

    CArray<EventData> aEvents;
}; 
```

有人可以告诉我为什么在尝试编译时出现以下错误吗？

```
1>c:\program files (x86)\microsoft visual studio 11.0\vc\atlmfc\include\afxtempl.h(1329): error C2248: 'CObject::CObject' : cannot access private member declared in class 'CObject'
1>          c:\program files (x86)\microsoft visual studio 11.0\vc\atlmfc\include\afx.h(559) : see declaration of 'CObject::CObject'
1>          c:\program files (x86)\microsoft visual studio 11.0\vc\atlmfc\include\afx.h(534) : see declaration of 'CObject'
1>          This diagnostic occurred in the compiler generated function 'CMap<KEY,ARG_KEY,VALUE,ARG_VALUE>::CMap(const CMap<KEY,ARG_KEY,VALUE,ARG_VALUE> &)'
1>          with
1>          [
1>              KEY=CString,
1>              ARG_KEY=CString,
1>              VALUE=EventDataValue,
1>              ARG_VALUE=EventDataValue
1>          ] 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-24T08:28:59.853

```
void Add(EventData ev) {
    this->aEvents.Add(ev);
} 
```

这*一定*是`Add(EventData& ev)`。您的`EventData`类没有非默认的复制构造函数或复制赋值运算符，并且有一个不可复制的成员 ( `CMap`)。这使得`EventData`不可复制。所以你不能按值传递它，因为那必须制作一个副本，你不能这样做，因为该类是不可复制的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-24T08:27:21.190

`CMap`有默认的copy-ctor。由于`CMap`派生自`CObject`and`CObject`的副本 c-tor 是私有的，因此您会收到错误消息。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-12-24T20:19:28.967

我没有使用 and ，而是使用`CMap`and ，因为与and不兼容。`CArray``std::map``std::vector``CString``CMap``CArray`

# sql - 将数据插入 SQL Server 2012

> ID：14018773
> 
> 赞同：5
> 
> 时间：2012-12-24T08:06:39.080
> 
> 标签：sql, sql-server-2012

我正在使用 SQL Server 2012

我有两个表，`Person`并且`Couple`，`Person`有一个外键来自“Person” `Couple`，`Couple`外键来自“Person”。

当我尝试向每个表中插入数据时，会发生错误，因为每个表都有来自另一个表的 FK，并且最初都是空的。

```
CREATE TABLE [dbo].[Couple](
    [CoupleId] [int] IDENTITY(1,1) NOT NULL,
    [HusbandPersonId] [int] NOT NULL,
    [WifePersonId] [int] NOT NULL,
    [StartDate] [date] NOT NULL,
    [EndDate] [date] NOT NULL,
 CONSTRAINT [PK_Couple] PRIMARY KEY CLUSTERED 
(
    [CoupleId] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON) ON [PRIMARY]
) ON [PRIMARY]

CREATE TABLE [dbo].[Person](
    [PersonId] [int] IDENTITY(1,1) NOT NULL,
    [ChildOfCoupleId] [int] NOT NULL,
    [CityOfBirth] [int] NOT NULL,
    [CityOfPermanentResidence] [int] NOT NULL,
    [CityOfCurrentResidence] [int] NOT NULL,
    [FirstName] [varchar](20) NOT NULL,
    [LastName] [varchar](20) NOT NULL,
    [BirthDate] [date] NOT NULL,
    [DeathDate] [date] NOT NULL,
    [IsMale] [bit] NOT NULL,
 CONSTRAINT [PK_Person] PRIMARY KEY CLUSTERED 
(
    [PersonId] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON) ON [PRIMARY]
) ON [PRIMARY

ALTER TABLE [dbo].[Couple]  WITH CHECK ADD  CONSTRAINT [FK_Couple_Person] FOREIGN KEY([HusbandPersonId])
REFERENCES [dbo].[Person] ([PersonId])
GO
ALTER TABLE [dbo].[Couple] CHECK CONSTRAINT [FK_Couple_Person]
GO
ALTER TABLE [dbo].[Couple]  WITH CHECK ADD  CONSTRAINT [FK_Couple_Person1] FOREIGN KEY([WifePersonId])
REFERENCES [dbo].[Person] ([PersonId])
GO
ALTER TABLE [dbo].[Couple] CHECK CONSTRAINT [FK_Couple_Person1]
GO
ALTER TABLE [dbo].[Person]  WITH CHECK ADD  CONSTRAINT [FK_Person_Couple] FOREIGN KEY([ChildOfCoupleId])
REFERENCES [dbo].[Couple] ([CoupleId])
GO
ALTER TABLE [dbo].[Person] CHECK CONSTRAINT [FK_Person_Couple]
GO 
```

如何解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-27T20:46:46.850

你不能要求所有人都有父母，因为你会遇到父母递归的无限循环。也就是说，你必须有一对没有父母的“亚当和夏娃”夫妇才能成为所有孩子的父母。

现在，您可以将`ChildOfCoupleId`列设为 NULLable 作为一种解决方案。但坦率地说，我认为使用`CoupleId`并不是最佳的。相反，使用`MotherId`和`FatherId`。这最终会更好，因为它：

1.  不需要你知道这两个元素——如果你只知道一个父母，它可以被输入。

2.  通过使 FK`Person`指向`Person`而不是必须查询以确定人员的另一个表来简化 FK 关系。

3.  不会强迫您为父母`Couple`的参与定义一个开始和停止日期——我注意到您没有调用它，`Marriage`但您正在使用`Husband`and `Wife`。因此，如果您想对真实的、破碎的世界进行建模，则不一定要知道这些信息。

4.  将孩子的父母与这对夫妇在一起的确切时间分开。如果一对夫妇结婚、离婚和再婚，那么您将指定孩子是在哪次婚姻中怀孕的。对于简单的血统，这是不必要的——你只需要了解父母。如果婚姻无效，但他们设法怀孕了孩子怎么办？那么你将如何存储亲子信息呢？在我们的世界中，父母身份与夫妻身份是截然不同的事实。

最后，通常最好避免 NULLable 列。您可以通过创建一个新表来完成此操作，例如`Parentage`：

```
CREATE TABLE dbo.Parentage (
   PersonID int NOT NULL
      CONSTRAINT FK_Parentage_Person
      FOREIGN KEY REFERENCES dbo.Person (PersonID),
   ParentID int NOT NULL,
   ParentIsMale bit NOT NULL,
   CONSTRAINT PK_Parentage PRIMARY KEY CLUSTERED (PersonID, ParentIsMale),
   CONSTRAINT FK_Parentage_Parent FOREIGN KEY (ParentID, ParentIsMale)
      REFERENCES dbo.Person (ParentID, IsMale)
); 
```

您必须`(ParentId, IsMale)`在`Person`表中添加唯一约束或唯一索引才能为其创建 FK。作为 PK/FK 的一部分使用`IsMale`可确保您得到一位母亲和一位父亲。

虽然这种设计可能看起来很笨重，但从长远来看，它会带来真正的好处。一个人的父亲或母亲的知识是通过插入一行而不是更新一个可为空的列来编码的。如果没有行，则父项未知。

这种设计也很容易适应记录不同类型的父母：遗传、出生、收养。一个人可能有两个遗传父母和一个生母。然后通过一系列灾难性事件，所有父母都被杀并被收养（甚至不止一次）。因此，您需要更改 PK，然后将`ParentTypeID`、`FromDate`和`ToDate`列添加到表中。需要进一步调整以限制不恰当的关系被表示（例如“生父”）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-24T09:04:13.207

我认为您必须认真考虑更改此架构。除了插入数据的问题外，当您尝试删除数据时，您也会遇到完全相同的问题。marc_c 给出的解决方案，使用 null 有助于一些，但不是最好的事情。您能做的最好的事情就是将另一张桌子带入您的设计中，并在此处提供对夫妇的参考。

# delphi - 如何在delphi 7项目目录中添加MSWord文件

> ID：14018776
> 
> 赞同：5
> 
> 时间：2012-12-24T08:07:04.333
> 
> 标签：delphi, delphi-7

我想在我的 delphi 7 项目目录中添加 MS Word 文件。我已经创建了资源文件 (.rc) 并在其中包含 Word 文件。但是当我使用 BRCC32 编译 .rc 时，它显示**[Error] RLINK32: Unsupported 16bit文件 "C:\Program Files (x86)\Borland\Delphi7\Projects\stuff.rc"**中的资源。我必须做什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-24T08:27:51.913

该错误消息表明您正在尝试链接资源脚本 .rc 文件，而不是已编译的资源 .res 文件。

所以你大概有一行写着：

```
{$R stuff.rc} 
```

这应该改为

```
{$R stuff.res} 
```

更何况，从报错信息来看，我怀疑你的资源脚本，.rc文件，不是资源脚本。我敢打赌，它实际上是一个 Word 文档。

您的 .rc 文件需要是如下所示的文本文件：

```
WordDocument RCDATA MyDoc.doc

```

您还需要编译您的脚本。像这样：

```
brcc32 stuff.rc 
```

此编译步骤生成二进制编译的资源文件，即 .res 文件。

* * *

为了使其一目了然，您需要执行以下步骤：

1.  如上所述制作 .rc 文件。
2.  使用 brcc32 编译 .rc 文件。
3.  通过将 {$R stuff.res} 添加到您的 Delphi 源文件之一来链接已编译的资源。

* * *

您需要回到基础并尝试更好地了解 Windows 资源。

*   [关于资源文件 (Windows)](http://msdn.microsoft.com/en-us/library/windows/desktop/aa380599.aspx)
*   [资源文件变得简单 (delphi.about.com)](http://delphi.about.com/od/objectpascalide/l/aa113099a.htm)
*   [如何添加资源并使用它们](https://stackoverflow.com/questions/1928612/how-to-add-resources-and-to-use-them)

# preg-match - preg_match 不一致的行为

> ID：14018781
> 
> 赞同：0
> 
> 时间：2012-12-24T08:07:36.680
> 
> 标签：preg-match

我创建了一个正则表达式来匹配 Fitvids.js 支持的 url。所以这个正则表达式验证来自 youtube、vimeo、blip、viddler 和 kickstarted 的 iframe 代码。

```
\#&lt;iframe.+(youtube|vimeo|blip|viddler|kickstarter).+<\/iframe>#i 
```

不幸的是，任何正则表达式验证器都使用 url 验证这一点，但奇怪的是 php 的 preg_match 函数给出了错误的结果。

如果有人能给我解决方案以及为什么 PHP 正则表达式和其他 perl 正则表达式结果之间存在如此多的不一致，那将非常有帮助。还有为什么 ereg （即将被贬低）给出了正确的结果，而 preg_match 没有。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T08:10:33.697

这仅仅是因为`ereg`不是 PCRE（Perl 兼容正则表达式），而是`preg_match`函数。任何已弃用的函数都会出现奇怪的行为。

# django - 如何超越 django.contrib.admin 来处理安全问题和模型分组？

> ID：14018789
> 
> 赞同：2
> 
> 时间：2012-12-24T08:08:32.093
> 
> 标签：django, django-models

我需要使用 django 执行以下操作：

1.  在 django 中使模型可用于 CRUD，根据用户的角色保护可用的 CRUD 操作和模型。
2.  在主页上提供一种对模型进行分组的方法，`/admin/`以便在显示许多模型时，用户可以轻松地向下钻取。现在它们按应用程序分组（因为我有一个应用程序并且它有一个 models.py 文件）。
3.  我想为 django 管理 UI 使用不同的主题。我不确定 django 管理工具是否适合这个。

我想写尽可能少的代码。

做这些事情的最佳方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T10:45:24.507

标准方式是[覆盖管理模板](https://docs.djangoproject.com/en/dev/ref/contrib/admin/#overriding-admin-templates)。不过，我会对管理站点的主题设置过于戏剧化保持警惕，因为使用 i1l8 和内置 javascript 之类的东西可能会变得非常困难。

另一种更极端的方法是研究完全类似于[nexus](http://code.disqus.com/code/projects/nexus.html)的不同管理应用程序，并根据您的喜好对其进行定制。

# batch-file - BAT 文件删除整个文件夹，仅包含文件夹的一部分

> ID：14018793
> 
> 赞同：0
> 
> 时间：2012-12-24T08:08:47.003
> 
> 标签：batch-file

因为，我对这些 BAT 文件编程以在没有答案的情况下通过 Internet 查找特定问题感到厌烦，所以我在这里问。通过浏览各种帖子，现在我知道这是可能的。

好的，这就是我想要的。首先，它的 windows 7 和文件夹被放置在默认的下载目录中，这意味着文件夹的路径包含用户名。文件夹名称可以是任何名称，但必须在开头或结尾包含“备份”部分。我希望选择此文件夹并删除包括子文件夹在内的全部内容。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T10:13:51.037

```
@echo off
for /d %%F in (
  "%homepath%\Downloads\*backup"
  "%homepath%\Downloads\backup*"
) do rd /s /q "%%F" 
```

# wpf - 如何获取 InputBinding-Command 的发送者

> ID：14018794
> 
> 赞同：1
> 
> 时间：2012-12-24T08:09:02.453
> 
> 标签：wpf, command, key-bindings, relaycommand

我有这个 xaml 代码：

```
<Window.InputBindings>
    <KeyBinding Command="{Binding Path=KeyEnterCommand}" Key="Enter" />
</Window.InputBindings> 
```

这就是我的 ViewModel 中的代码：

```
 private RelayCommand _keyEnterCommand;

    public ICommand KeyEnterCommand
    {
        get
        {
            if (_keyEnterCommand == null)
            {
                _keyEnterCommand = new RelayCommand(param => ExecuteKeyEnterCommand());
            }

            return _keyEnterCommand;
        }
    }

    public void ExecuteKeyEnterCommand()
    {
        // Do magic
    } 
```

现在是我的问题，我怎样才能得到这个命令的发送者？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-24T08:34:40.437

如果“发送者”是指按下键时聚焦的元素，则可以将当前聚焦的元素作为参数传递给命令，如下所示：

```
<Window x:Class="MyWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        x:Name="root">
    <Window.InputBindings>
        <KeyBinding Command="{Binding Path=KeyEnterCommand}"
                    CommandParameter="{Binding ElementName=root, Path=(FocusManager.FocusedElement)}"
                    Key="Escape" />
    </Window.InputBindings>
... 
```

```
private RelayCommand<object> _keyEnterCommand;

public ICommand KeyEnterCommand
{
    get
    {
        if (_keyEnterCommand == null)
        {
            _keyEnterCommand = new RelayCommand<object>(ExecuteKeyEnterCommand);
        }

        return _keyEnterCommand;
    }
}

public void ExecuteKeyEnterCommand(object sender)
{
    // Do magic
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-06-24T12:47:07.150

您还可以使用 CommandTarget 属性。这是一个稍微不同的用法，因为它使用 WPF 附带的预定义命令。但是，我不确定这是否/如何与从 ICommand 继承的类一起使用。

[wpf.2000things.com](https://wpf.2000things.com/2014/06/11/1091-using-a-commandtarget-to-change-the-source-of-a-routed-command/)上的一篇文章说：

> 路由命令的源是调用命令的元素。Executed 或 CanExecute 处理程序中的 sender 参数是拥有事件处理程序的对象。将按钮的 Command 参数设置为特定命令，然后将该命令绑定到主窗口的 CommandBindings 中的某些代码，按钮是源，窗口是发送者。
> 
> 设置 Command 属性时，您还可以设置 CommandTarget 属性，指示应视为路由命令源的不同元素。

在下面的示例中，Find 命令现在似乎源自 TextBox。我们可以在 Executed 事件的事件处理程序中看到这一点：

```
<Window x:Class="WpfApplication1.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Commands" Width="320" Height="220">

    <Window.CommandBindings>
        <CommandBinding Command="ApplicationCommands.Find"
                        CanExecute="Find_CanExecute"
                        Executed="Find_Executed"/>
    </Window.CommandBindings>

    <StackPanel>
        <TextBox Name="txtSomeText"
                 Width="140" Height="25" Margin="10"/>
        <Button Content="Find"
                Command="ApplicationCommands.Find"
                CommandTarget="{Binding ElementName=txtSomeText}"
                Margin="10" Padding="10,3"
                HorizontalAlignment="Center" />
    </StackPanel>
</Window> 
```

# android - 使用 Google Maps v2 膨胀 SupportMapFragment 会导致 ClassNotFoundException

> ID：14018798
> 
> 赞同：2
> 
> 时间：2012-12-24T08:09:29.400
> 
> 标签：android, android-intent, google-maps-api-2, google-maps-android-api-2

我想用谷歌地图片段开始一个意图。Google Play Services 的示例代码运行良好，但我的应用程序中没有运行这些地图。我引用的库是：

*   安卓支持-v4.jar
*   google-play-services_lib.jar
*   google-play-services.jar
*   Android jar 是目标 4.2 也是平台 android-17

我得到这个错误：

```
java.lang.RuntimeException: Unable to start activity \
       ComponentInfo{app.cookingplace/app.cookingplace.MapsActivity}: \
       android.view.InflateException: Binary XML file line #8: \
       Error inflating class fragment
    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1651)
    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1667)
    at android.app.ActivityThread.access$1500(ActivityThread.java:117)
    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:935)
    at android.os.Handler.dispatchMessage(Handler.java:99)
    at android.os.Looper.loop(Looper.java:130)
    at android.app.ActivityThread.main(ActivityThread.java:3687)
    at java.lang.reflect.Method.invokeNative(Native Method)
    at java.lang.reflect.Method.invoke(Method.java:507)
    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:867)
    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:625)
    at dalvik.system.NativeStart.main(Native Method)

Caused by: android.view.InflateException: Binary XML file line #8: \
       Error inflating class fragment
    at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:587)
    at android.view.LayoutInflater.rInflate(LayoutInflater.java:623)
    at android.view.LayoutInflater.inflate(LayoutInflater.java:408)
    at android.view.LayoutInflater.inflate(LayoutInflater.java:320)
    at android.view.LayoutInflater.inflate(LayoutInflater.java:276)
    at com.android.internal.policy.impl.PhoneWindow.setContentView(PhoneWindow.java:209)
    at android.app.Activity.setContentView(Activity.java:1657)
    at app.cookingplace.MapsActivity.onCreate(MapsActivity.java:12)
    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1615)
    ... 11 more

Caused by: android.support.v4.app.Fragment$InstantiationException: \
       Unable to instantiate fragment com.google.android.gms.maps.SupportMapFragment: \
       make sure class name exists, is public, and has an empty constructor that is public
    at android.support.v4.app.Fragment.instantiate(Fragment.java:401)
    at android.support.v4.app.Fragment.instantiate(Fragment.java:369)
    at android.support.v4.app.FragmentActivity.onCreateView(FragmentActivity.java:272)
    at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:563)
    ... 20 more

Caused by: java.lang.ClassNotFoundException: com.google.android.gms.maps.SupportMapFragment in loader \
       dalvik.system.PathClassLoader[/system/framework/com.google.android.maps.jar:\
       /data/app/app.cookingplace-2.apk]
    at dalvik.system.PathClassLoader.findClass(PathClassLoader.java:240)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:551)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:511)
    at android.support.v4.app.Fragment.instantiate(Fragment.java:391)
    ... 23 more 
```

我的代码：

登录活动.java

```
package app.cookingplace;

import org.w3c.dom.Document;
import org.w3c.dom.Element;
import org.w3c.dom.NodeList;

import android.app.Activity;
import android.content.Intent;
import android.os.Bundle;
import android.view.Menu;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.EditText;

public class LoginActivity extends Activity implements OnClickListener {

    // All static variables
    static final String baseURL = "http://sfsuswe.com/~f12g22/web/php/Login.php?";
    String URL = "";
    // XML node keys
    static final String KEY_SESSION = "session"; // parent node
    static final String KEY_ACTIVATED = "activate";
    String activated = "";
    static final String KEY_REGISTERED = "registered";
    String registered = "";
    static final String KEY_USERID = "userId";
    String userId = "";
    static final String KEY_LOGONNAME = "logonName";
    String logonName = "";

    private Button login_button;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_login);

        login_button = (Button) findViewById(R.id.login_button);
        login_button.setOnClickListener(this);
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.activity_login, menu);
        return true;
    }

    @Override
    public void onClick(View arg0) {
        EditText nameLogin = (EditText) findViewById(R.id.user_logon_id);
        String loginName = nameLogin.getText().toString();
        EditText passwordLogin = (EditText) findViewById(R.id.password_logon_id);
        String password = passwordLogin.getText().toString();

        String parameters = "logon=" + loginName + "&password=" + password;
        URL = baseURL + parameters;

        XMLParser parser = new XMLParser();
        String xml = parser.getXmlFromUrl(URL); // getting XML
        Document doc = parser.getDomElement(xml); // getting DOM element

        NodeList nl = doc.getElementsByTagName(KEY_SESSION);

        Element e = (Element) nl.item(0);
        // adding each child node to HashMap key => value
        activated = parser.getValue(e, KEY_ACTIVATED);
        registered = parser.getValue(e, KEY_REGISTERED);
        userId = parser.getValue(e, KEY_USERID);
        logonName = parser.getValue(e, KEY_LOGONNAME);

        if (registered.equals("1")) {
        Intent nextScreen = new Intent(LoginActivity.this,
                MapsActivity.class);
        startActivityForResult(nextScreen, 0);
        }
    }
} 
```

MapsActivity.java

```
 package app.cookingplace;

     import android.os.Bundle;
     import android.support.v4.app.FragmentActivity;
     import android.view.Menu;

     public class MapsActivity extends FragmentActivity {

            @Override
            protected void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);
            setContentView(R.layout.activity_maps);
            }

            @Override
            public boolean onCreateOptionsMenu(Menu menu) {
                // Inflate the menu; this adds items to the action bar if it is present.
                getMenuInflater().inflate(R.menu.activity_maps, menu);
                return true;
            }
        } 
```

活动登录.xml

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent"
tools:context=".LoginActivity" >

<EditText
    android:id="@+id/user_logon_id"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"
    android:layout_alignParentTop="true"
    android:ems="10"
    android:inputType="textPersonName"
    android:text="@string/user_login" >

    <requestFocus />
</EditText>

<EditText
    android:id="@+id/password_logon_id"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"
    android:layout_below="@+id/user_logon_id"
    android:ems="10"
    android:inputType="textPassword"
    android:text="@string/password_login" />

<Button
    android:id="@+id/login_button"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"
    android:layout_below="@+id/password_logon_id"
    android:text="@string/button_login" /> 
```

活动地图.xml

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    tools:context=".MapsActivity" >

    <fragment
        class="com.google.android.gms.maps.SupportMapFragment"
        android:id="@+id/map"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
/>

</RelativeLayout> 
```

AndroidManifest.xml

```
 <?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="app.cookingplace"
    android:versionCode="1"
    android:versionName="1.0" >

    <permission
        android:name="app.cookingplace.permission.MAPS_RECEIVE"
        android:protectionLevel="signature" />

    <uses-permission android:name="app.cookingplace.permission.MAPS_RECEIVE" />
    <!-- Copied from Google Maps Library/AndroidManifest.xml. -->
    <uses-sdk
        android:minSdkVersion="8"
        android:targetSdkVersion="16" />

    <uses-permission android:name="android.permission.INTERNET" />
    <uses-permission android:name="com.google.android.providers.gsf.permission.READ_GSERVICES" />
    <!-- External storage for caching. -->
    <uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />
    <!-- My Location -->
    <uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION" />
    <uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" />
    <!-- Maps API needs OpenGL ES 2.0\. -->
    <uses-feature
        android:glEsVersion="0x00020000"
        android:required="true" />
    <!-- End of copy. -->

    <application
        android:allowBackup="true"
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name" >
        <meta-data
            android:name="com.google.android.maps.v2.API_KEY"
            android:value="-My key tested and works fine-" />

        <activity
            android:name="app.cookingplace.LoginActivity"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
        <activity
            android:name="app.cookingplace.MapActivity"
            android:label="@string/title_activity_map" >
        </activity>
        <activity
            android:name="app.cookingplace.TestActivity"
            android:label="@string/title_activity_test" >
        </activity>
        <activity
            android:name="app.cookingplace.MapsActivity"
            android:label="@string/title_activity_maps" >
            </activity>
        <uses-library android:name="com.google.android.maps" />
    </application>

</manifest> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-24T09:04:08.437

在 MapsActitity.java 添加这个导入（ import android.support.v4.app.FragmentActivity; ）

改变

```
 public class MapsActivity extends Activity 
```

到

```
public class MapsActivity extends FragmentActivity 
```

阅读此[http://developer.android.com/training/basics/fragments/creating.html](http://developer.android.com/training/basics/fragments/creating.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-24T08:58:37.830

`MapsActitity.java`只需在您的文件 中更改此内容`public class MapsActivity extends android.support.v4.app.FragmentActivity`。您需要扩展`FragmentActivity`不简单的活动。

这是您的应用程序试图获取`FragmentActivity`未扩展的问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-25T06:52:52.213

现在它工作正常。我遵循了那个教程，我的 lib 项目被标记为红色`X`，这就是重点。按照[本教程](http://www.user.tu-berlin.de/hennroja/tutorial_fixing_java.lang.NoClassDefFoundError%20com.google.android.gms.R%24styleable.html)修复它。
解决方案是您所有提示的组合。非常感谢。伙计们，你们拯救了我的圣诞节。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-03-12T11:29:26.260

这是一个工作示例，看看它对我有用吗 这是[一个链接](http://android-er.blogspot.co.uk/2012/12/using-supportmapfragment.html)！

您的 xml 在片段标签中包含 class="com.google.android.gms.maps.SupportMapFragment"

从 FragmentActivity 扩展您的活动

如果你想制作一个地图对象，请使用这个

```
SupportMapFragment mapFrag = (SupportMapFragment) getSupportFragmentManager()
                .findFragmentById(R.id.map); 
```

代码如下： XML

```
<fragment
    android:id="@+id/map"
    android:name="com.google.android.gms.maps.MapFragment"
    android:layout_width="match_parent"
    android:layout_height="match_parent" 
    class="com.google.android.gms.maps.SupportMapFragment"/> 
```

主要活动

```
 public class MainActivity extends FragmentActivity  {

     // Google Map
private GoogleMap googleMap;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

 .......

     SupportMapFragment mapFrag = (SupportMapFragment) getSupportFragmentManager()
                .findFragmentById(R.id.map);
    .... 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-24T08:19:16.813

在女巫 Android 版本上你在尝试吗？如果版本是 Pre-Honeycomb，（<3.0），那么您不能使用片段，如[文档中所示](https://developers.google.com/maps/documentation/android/start?hl=es#add_a_map)

您应该[在此处](https://developers.google.com/maps/documentation/android/map?hl=es#mapfragment)`SupportMapFragment`使用like 指示，并确保这些库包含在路径项目中。

希望能帮助到你。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-14T18:38:55.843

您确定您尝试运行项目的目标 AVD 是 11+ 版本，因为低于 11 的片段不允许使用。

# iphone - 用于简单匹配的正则表达式

> ID：14018800
> 
> 赞同：-1
> 
> 时间：2012-12-24T08:09:54.607
> 
> 标签：iphone, ios, regex, ipad

我需要编写一个正则表达式来匹配模式。

要匹配的模式是：

```
[#ABC...Z0-9]. 
```

有人吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T08:18:32.373

尝试使用[`NSRegularExpression`](http://developer.apple.com/library/ios/#documentation/Foundation/Reference/NSRegularExpression_Class/Reference/Reference.html). 你的代码可以是这样的：

```
NSRegularExpression *regex = 
    [NSRegularExpression regularExpressionWithPattern:@"[#ABC...Z0-9]" 
                         options:NSRegularExpressionCaseInsensitive
                         error:nil]; 
```

和之间的子字符串`[#`，`]`试试这个正则表达式：

```
\[#[^\]]+\] 
```

解释：

> ***`[character_group]`***否定：匹配任何不在的单个字符`character_group`
> 
> ***`+`***匹配前一个元素一次或多次。
> 
> ***`\[`***匹配`[`字符

# exchangewebservices - Exchange Web 服务 - FindItem 错误

> ID：14018814
> 
> 赞同：1
> 
> 时间：2012-12-24T08:11:13.983
> 
> 标签：exchangewebservices, server-error

我们使用 EWS FindItem 方法来获取邮件的 ID，一开始一切似乎都正常。但是，当我们尝试在 FindItem 中使用 IndexedPageItemView 发出分页请求时，我们遇到了 ErrorInternalServerError 错误。gSOAP创建的xml如下：

```
<?xml version="1.0" encoding="UTF-8"?>
<SOAP-ENV:Envelope 
xmlns:SOAP-ENV="http://schemas.xmlsoap.org/soap/envelope/" 
xmlns:SOAP-ENC="http://schemas.xmlsoap.org/soap/encoding/" 
xmlns:xsi="http://www.w3.org/20    01/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:ns2="http://schemas.microsoft.com/exchange/services/2006/types" xmlns:ns1="http://schemas.microsoft.com/exchange/services/2006/messages">
<SOAP-ENV:Header><ns2:RequestServerVersion Version="Exchange2010_SP1"></ns2:RequestServerVersion></SOAP-ENV:Header>
<SOAP-ENV:Body><ns1:FindItem xsi:type="ns1:FindItemType" Traversal="Shallow">
<ns1:ItemShape><ns2:BaseShape>IdOnly</ns2:BaseShape></ns1:ItemShape>
<ns1:IndexedPageItemView MaxEntriesReturned="50" Offset="0" BasePoint="Beginning" xsi:type="ns2:IndexedPageViewType"></ns1:IndexedPageItemView>
<ns1:ParentFolderIds><ns2:DistinguishedFolderId Id="inbox"  xsi:type="ns2:DistinguishedFolderIdType"></ns2:DistinguishedFolderId></ns1:ParentFolderIds></ns1:FindItem>
</SOAP-ENV:Body>
</SOAP-ENV:Envelope> 
```

我们错过了一些需要的东西吗？还是我们发出了错误的 SOAP 请求？我们的开发环境是 Mac OS 10.8、xcode 4.5、C++、gSOAP 2.8 和 Exchange Server 2010。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-27T23:07:04.110

**除了为xsi**前缀定义的命名空间中的空格外，一切看起来都很好。

# wordpress - 在 wordpress 的一页上显示所有帖子

> ID：14018815
> 
> 赞同：0
> 
> 时间：2012-12-24T08:11:13.453
> 
> 标签：wordpress

我正在使用下面的代码通过页面显示所有帖子`wordpress`——它显示的代码与它相同——任何帮助==

```
<?php 
$wp_query = new WP_Query(array('post_type'=>'post', 'post_status'=>'publish',
'posts_per_page'=>10, 'paged'=>get_query_var('paged')));
?> 
```

或者低于一个也不起作用

```
<?php
$args = array( 'numberposts' => '8' );
$recent_posts = wp_get_recent_posts( $args );
foreach( $recent_posts as $recent ){
echo '<li class="latesttrends"><a href="' . get_permalink($recent["ID"]) . '" title="Look '.esc_attr($recent["post_title"]).'" >' . $recent["post_title"].'</a> </li> ';
}
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T09:48:37.153

```
$wp_query = query_posts( '&posts_per_page=-1' );

In $wp_query Array you will get all post. 
```

# java - 如何在 Tomcat 中添加原生库？

> ID：14018817
> 
> 赞同：15
> 
> 时间：2012-12-24T08:11:32.013
> 
> 标签：java, tomcat, java.library.path

我想在 Tomcat 中添加 gdal 库。我阅读[了在 Tomcat 中找不到的本机库，](https://stackoverflow.com/questions/6150428/native-libraries-not-found-in-tomcat) 但不明白`startup.bat`我应该在哪里添加`-Djava.library.path`.

错误：

```
exception

javax.servlet.ServletException: Servlet execution threw an exception
com.liferay.portal.kernel.servlet.filters.invoker.InvokerFilterChain.doFilter(InvokerFilterChain.java:72)
com.liferay.portal.kernel.servlet.filters.invoker.InvokerFilter.doFilter(InvokerFilter.java:70)

root cause

java.lang.UnsatisfiedLinkError: org.gdal.ogr.ogrJNI.GetDriverCount()I
org.gdal.ogr.ogrJNI.GetDriverCount(Native Method)
org.gdal.ogr.ogr.GetDriverCount(ogr.java:98)
org.geotools.data.ogr.OGRDataStore.<clinit>(OGRDataStore.java:169)
test.Read.getKadnum(Read.java:56)
test.Zipper.mifUnzip(Zipper.java:139)
test.Zipper.Unzip(Zipper.java:60)
test.uploadfile.doPost(uploadfile.java:105)
javax.servlet.http.HttpServlet.service(HttpServlet.java:641)
javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
com.liferay.portal.kernel.servlet.filters.invoker.InvokerFilterChain.doFilter(InvokerFilterChain.java:72)
com.liferay.portal.kernel.servlet.filters.invoker.InvokerFilter.doFilter(InvokerFilter.java:70)

note The full stack trace of the root cause is available in the Apache Tomcat/7.0.23 logs. 
```

我从以下网址下载了 gdal 64bit：http://vbkto.dyndns.org:1280/sdk/PackageList.aspx?file= [release-1600-x64-gdal-1-9-mapserver-6-2.zip](http://vbkto.dyndns.org:1280/sdk/PackageList.aspx?file=release-1600-x64-gdal-1-9-mapserver-6-2.zip)

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2016-02-22T11:54:52.690

接受的答案（截至 2016 年 2 月）完全是错误的。

*   你**永远不**应该编辑`catalina.bat`/ `catalina.sh`。不 ！`bin/`（您应该触摸的Tomcat 目录中唯一的文件是`setenv.bat`）。

*   正确的配置变量是`CATALINA_OPTS`，不是`JAVA_OPTS`。

*   如果您在 Windows 上，那么您不想引用 SET 命令的值，因为引号成为实际值的一部分。（不像在 Unix/Linux 上）

*   您可能希望保留`java.library.path`.

（在下文中，我假设您使用的是 Windows，请针对 Linux/Solaris/Mac OSX 进行相应更改）。

操作方法如下：将一个名为的文件`setenv.bat`放入与`catalina.bat`. 该文件将不存在，除非您之前自己创建了它。所以创建文件。它必须具有以下内容以供您使用：

```
set CATALINA_OPTS=%CATALINA_OPTS% -Djava.library.path=%PATH%;c:\mydlls 
```

在 Windows`java.library.path`上将默认为，`%PATH%`因此上述所有方法的替代方法是更改​​您的 PATH 环境变量。

如果您不想混淆 JVM 将从何处加载您的本地库，请忽略`%PATH%;`上面的部分。我个人出于这个原因省略`%PATH%`了，但这是一个品味问题。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-12-24T08:15:10.047

必须设置它`catalina.bat`而不是 startup.bat。

```
set JAVA_OPTS="-Djava.library.path=/usr/tomcat/shared/lib" 
```

可以放在后面

```
:noJuliManager
set JAVA_OPTS=%JAVA_OPTS% %LOGGING_MANAGER% 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2014-04-01T08:46:56.007

根据 catalina.bat 上的评论，我认为正确的地方是 CATALINA_OPTS。

```
rem   CATALINA_OPTS   (Optional) Java runtime options used when the "start",
rem                   "run" or "debug" command is executed.
rem                   Include here and not in JAVA_OPTS all options, that should
rem                   only be used by Tomcat itself, not by the stop process,
rem                   the version command etc.
rem                   Examples are heap size, GC logging, JMX ports etc. 
```

# amazon-web-services - Elasticbeanstalk 控制访问

> ID：14018821
> 
> 赞同：0
> 
> 时间：2012-12-24T08:12:12.223
> 
> 标签：amazon-web-services, amazon-s3, security, amazon-elastic-beanstalk

我最近开始使用 Amazon Web 服务进行开发。我使用运行良好的示例构建了一个示例应用程序。我曾（错误地）假设那是唯一可以导航到 URL 的用户，因为我使用我的亚马逊凭据登录。

显然任何人都可以在不登录亚马逊的情况下访问该网站——这不是我想要的。

我已经开始查看[AWS Userguide 安全性](http://docs.amazonwebservices.com/AWSEC2/latest/UserGuide/EC2_Network_and_Security.html)

这是一个开始，我正在寻找将指导我实施托管在亚马逊上的安全网站的文章/网站。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T22:40:58.843

亚马逊凭证与您制作的 Web 应用程序无关。这里有 2 个选项供您选择：

1.  *将身份验证*概念引入您的应用程序：从简单的 http 基本身份验证（使用标准 Apachee / IIS 模块。请参阅[Apachee 文档](http://httpd.apache.org/docs/2.2/howto/auth.html)）到全面的用户管理、安全密码存储、cookie、密码更改/重置流程等...

2.  或者，您可以使用[Dome9](http://www.dome9.com/overview/features-tour)在网络级别阻止您的 Web 应用程序，然后使用 Dome9 门户授予您自己（或其他用户）“访问租约”。

免责声明：我是 Dome9'er

# android - Android套接字发送大图像并丢失数据

> ID：14018822
> 
> 赞同：0
> 
> 时间：2012-12-24T08:12:15.480
> 
> 标签：android, send, image

现在它在终端之间发送图像。客户端将图片翻译成字节流，然后分发给服务器。服务器找到发送人并将数据发送到终端。现在在局域网的两站模拟器中发送大图。发送和接收没有问题。部署到网络服务器，服务器接收代码。

```
int length = 0;
int totalNum = 0;
byte[] buffer = new byte[1024];
while ((length = dis.readInt()) != 0) {
    length = dis.read(buffer, 0, length);
    System.out.println("length :-------->" + length);

    totalNum += length;
    out.writeInt(length);
    out.write(buffer, 0, length);
    out.flush();
}
System.out.println("totalNum:-------->" + totalNum);
out.writeInt(0);
out.flush();
Debug.info("totalNum::::" + totalNum);
initService.getEnterpriseMsgService().save(msg); 
```

它每次接收 1024 个字节。有时`System.out.println("length :-------->" + length);`它是空的。模拟器每次发送和接收数据都是一致的。当我发送大图时，它是没有问题的。不知道是代码问题还是服务器问题。

求解决办法。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T08:19:20.733

在发送和接收图像的情况下。您必须增加缓冲区大小

```
byte[] buffer = new byte[4096]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-24T08:21:45.813

为什么不尝试这种方式：

```
InputStream is //your InputStream
OutputStream out //your OutputStream
byte[] buffer = new byte[1024];
int length = 0;
try {
    while ((length = is.read(buffer)) > 0) {
        out.write(buffer, 0, length);
    }

} catch (Exception e) {
    // TODO: handle exception
} 
```

# objective-c - 错误：在设备上运行的 Xcode 中的连接中断

> ID：14018824
> 
> 赞同：4
> 
> 时间：2012-12-24T08:12:27.573
> 
> 标签：objective-c, ios, xcode, delegates, objective-c-blocks

有人可以解释这个错误是什么意思吗？

```
CONNECTION INTERRUPTED 
```

我正在通过从块中调用的方法将文件写入存储。我有时也会在“连接中断”之前收到此消息：

```
__47+[TIUserDictionaryController loadWordKeyPairs:]_block_invoke_0  Received nil NSData for TIRemoteDataUserDict 
```

我在我的应用程序中调用此方法（写入的方法）确实完成了启动方法并且它可以工作，但由于某种原因，在块内调用它时它不会工作。我试过不使用块，而是使用委托，但我仍然收到此错误/崩溃。这个错误已经完全不一致了。

我以前从未见过这样的错误，所以我不知道要提供什么更多信息。如果您有任何问题，请告诉我。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-08-27T21:17:36.137

我也遇到了这个“错误”，看来我只是在系统告诉我之前使用了设备上的大量内存。我试图在启动时在屏幕上显示许多非常大的图像。我通过删除一些图像或减少它们的内存消耗来解决它。

编辑：我知道它被标记为已解决，但我遇到了同样的问题，没有解决我的问题的答案，然后我想写我的解决方案并希望它对某人有所帮助，因为我知道我会很感激这个答案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-24T08:40:04.027

我不确定这是否可行。但是 appDidFinsihLaunching 应该尽早返回。因为如果方法没有在指定的时间范围内返回，看门狗将终止应用程序。

所以我建议使用 performSelector:withObject:afterDelay: 方法调用这个方法，延迟大约 1 秒或任何适合你的方法。

让我知道这是否能解决您的问题。

# asp.net - 在这种情况下如何正确创建 BLL 和 GridView

> ID：14018825
> 
> 赞同：0
> 
> 时间：2012-12-24T08:12:27.693
> 
> 标签：asp.net, gridview, data-access-layer, bll

我设计了一个数据库，为了更好地展示我的问题，我对其进行了简化：

```
TB: CONSULTANTS

      ID        uniqueidentifier

      NAME      NVARCHAR(30) 
```

* * *

```
TB: EXPENSES

      ID                uniqueidentifier

      AMOUNT            money

      CONSULTANTID      uniqueidentifier 
```

* * *

CONSULTANTID 是来自顾问表的 FK，简单吧？

我创建了一个包含两个数据表的数据集，它们是顾问和费用

具有相应的查询，例如通过顾问 ID 获取费用等

但是，我想在网格视图中显示的是：

金额和顾问姓名而不是顾问 ID

* * *

当我尝试返回带有（ExpenseId、Amount、ConsultantName）的数据表时，由于架构与基本数据表 EXPENSES（ExpenseId、Amount、ConsultantId）不匹配，它会导致错误。

**我该怎么做才能从 BLL 获得 (ExpenseId, Amount, ConsultantName(not id)) ？**

* * *

我是否必须通过将两个表连接在一起来创建另一个数据表？因为 ASP.NET 网站说这不是创建 DAL 和 BLL 的优选方式

或者是否有可能我对 gridview 的 BoundField 进行了一些更改（如果可能的话，如何将两个不同的适配器的输出绑定在一起）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T11:33:57.207

我从 ASP.NET 站点示例中找到了答案

* * *

在我们创建 BLL 之前，我们必须弄清楚每个 Table Adapter 需要什么。

因此，在我的情况下，我必须使用复合 SELECT 语句将顾问名称列和其他需要的列包含在费用数据表中。

那是，

SELECT EXPENSEID, AMOUNT, CONSULTID, (SELECT CONSULTANTNAME FROM CONSULTANTS WHERE CONSULTANTS.CONSULTANTID=EXPENSES.CONSULTANTID) from Expenses

然后我们可以设法从这个 DAL 中获取所有需要的数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-24T13:00:37.557

好吧，您可以创建一个方法`DAL`，从数据库中获取数据并返回`DataTable or DataSet`适合您的数据。

```
Select c.id as ConsultantId,c.Name as Name,e.amount
from consultant c
inner join experses e
on c.ConsultantId=e.ConsultantId 
```

让您的 BAL 做业务逻辑，例如创建顾问类对象数组，并对金额进行验证（如金额不能小于 0）。

BAL 返回可用于绑定数据控件的对象数组`Consultant`（或者您甚至可以从 BAL 发回 dataTable。

我认为 Linq 正在使用第一种方法，它从 Linq 语法生成 sql 脚本并返回特定类型对象的集合。

# ruby-on-rails - MSYS 打印奇怪的字符串

> ID：14018826
> 
> 赞同：2
> 
> 时间：2012-12-24T08:12:30.363
> 
> 标签：ruby-on-rails, ruby, windows, msys

MSYS 正在向终端打印一些奇怪的字符（空格、空值等）。使我的单元测试的结果有点神秘。关于如何解决这个问题的任何想法？我正在研究可能将其通过管道传输到将清理输出的脚本。

```
$ bundle exec rspec spec/requests/static_pages_spec.rb
←[32m.←[0m←[32m.←[0m

Finished in 0.96875 seconds
←[32m2 examples, 0 failures←[0m 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T08:44:41.970

好的，我发现我可以通过`cat`. 如果有人有更好的想法，请随时分享！

```
$ bundle exec rspec spec/requests/static_pages_spec.rb | cat 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-28T08:29:42.167

有点晚了，但我认为这比通过 cat 解析命令更容易解决问题！

在 Msys 中，我将 TERM 环境变量设置为 xterm 并且输出打印得很好。您可以考虑添加

```
export TERM=xterm 
```

到你的 .bashrc。

# .net - 替换Firefox当前页面中的字符串

> ID：14018831
> 
> 赞同：-1
> 
> 时间：2012-12-24T08:12:59.833
> 
> 标签：.net, vb.net, winforms, firefox

我想在 Firefox 当前页面 html 中替换字符串（“123”与“111”）。

解释：

我正在打开 Firefox，然后我正在导航到：

```
www.site.com/print.php?string=123 
```

我正在等到文件完全加载

页面html：

```
<html>
<body>
123
</body>
</html> 
```

我将字符串“123”替换为“111”。

代码应如下所示：

```
 openff("http://www.site.com/print.php?string=123") 'open url
again:
        For Each p As Process In Process.GetProcessesByName("firefox") 'wait until page is fully loaded
            If p.MainWindowTitle = "123 page title" Then
                Exit For
            Else
                Application.DoEvents()
                GoTo again
            End If
        Next
        replaceInFFcurrentDocHtml("123", "111") 'Replace the string!!! 
```

该功能`replaceInFFcurrentDocHtml()`实际上并不存在。

有一个函数可以`replace`在firefox当前页面html中字符串吗？

或者`get`当前 html 来自的函数`firefox`？

（我试图通过 spy++ 使用句柄和窗口获取 html，但这种方式不起作用）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T15:24:21.130

您可以编写和 Firefox 扩展来修改页面内容，许多扩展都是这样做的。

或者我相信 Greasemonkey 脚本也可以做同样的事情，[https://addons.mozilla.org/en-US/firefox/addon/greasemonkey/](https://addons.mozilla.org/en-US/firefox/addon/greasemonkey/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-24T08:18:41.573

这本身并不完全是“入侵Firefox”，但它可能会起作用。

使用[WebClient](http://msdn.microsoft.com/en-us/library/system.net.webclient.aspx)并将站点的内容下载为字符串，使用您可能真正需要的任何内容调用该字符串的替换，并将结果写入临时 html 文件。最后，要么专门调用 firefox 来打开所述 html 文件，要么要求操作系统解决哪个应用程序应该使用[Process.Start](http://msdn.microsoft.com/en-us/library/system.diagnostics.process.start.aspx)打开它。

我相信 Firefox（出于安全原因，任何浏览器都不应该）允许对 DOM 进行外部修改。这是唯一有效的方法，无需对 Firefox 的代码进行一些复杂的修改。

另外，一个不错的提示：不要使用 GoTo，[这是个坏主意](http://www.cs.utexas.edu/users/EWD/ewd02xx/EWD215.PDF)。

# deadlock - 小型嵌入式系统上 IRQ 中的自旋锁

> ID：14018835
> 
> 赞同：2
> 
> 时间：2012-12-24T08:13:25.803
> 
> 标签：deadlock, interrupt, spinlock, isr

我正在一个没有操作系统的 ARM 微控制器上开发一个*小型嵌入式系统。*它有几种不同类型的中断发生（按钮按下、A 到 D 转换、定时器等）并且只有一个线程在运行。

我想要一个 FIFO 事件队列来处理，其中每个中断服务例程将其事件添加到队列中，并且主（也是唯一的）线程从队列中删除要处理的事件。显然在中断服务例程中访问队列数据结构是危险的，但是自旋锁会导致死锁，因为如果主线程有锁并且发生中断，ISR 将永远等待锁。

当然，我已经知道我可以在主线程处理队列时禁用中断，但这并不理想。

在这里进行的最佳方式是什么？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T08:28:13.320

如果你可以使用固定大小的环形队列，你不需要任何复杂的东西（我假设中断在 ISR 中被禁用），因为只有一个读取器——你的内核线程——更新尾指针，还有一个写入器— ISR — 更新头指针。否则使用[加载链接/存储条件](http://en.wikipedia.org/wiki/Load-link/store-conditional)指令来实现无[锁队列](http://en.wikipedia.org/wiki/Lock-free_and_wait-free_algorithms)。

# git - 分支上的 Git 子模块

> ID：14018836
> 
> 赞同：1
> 
> 时间：2012-12-24T08:13:30.503
> 
> 标签：git, git-submodules

我有一个托管在 Bitbucket 上的 iOS 项目，它使用 MapBox-iOS-sdk，我将其合并为 git 子模块。我跟踪的提交在开发分支上，而不是发布分支上。比如说，一段时间后，当我尝试从 Bitbucket 重新克隆我的项目时（通过 git clone --recursive）。而且我也喜欢使用子模块 MapBox-iOS-sdk 从 MapBox 更新到最新版本。所以我想拉。但首先它是一个“无分支”，所以我进入了我自己项目的 MapBox-iOS-sdk 目录并做了一个

`git checkout -b develop remotes/origin/develop`

它给了我输出：

```
M   MapView/Map/SMCalloutView Previous HEAD position was 6c6be52... closes #148: incorporate @tmalloy's RMShape bezier curve enhancements
Branch develop set up to track remote branch develop from origin.
Switched to a new branch 'develop' 
```

然后，我做了一个`git pull`，它告诉我我已经是最新的了。此时，我的第一个问题是：我是否已经在 Mapbox 开发分支的最新提交中？

此时，我输入`git status`Mapbox-iOS-sdk 目录，我得到以下内容：

```
git status
# On branch develop
# Changes not staged for commit:
#   (use "git add <file>..." to update what will be committed)
#   (use "git checkout -- <file>..." to discard changes in working directory)
#
#   modified:   MapView/Map/SMCalloutView (new commits)
#
no changes added to commit (use "git add" and/or "git commit -a") 
```

这是我的第二个问题：这到底是什么意思？反正我不是想修改mapbox-ios-sdk，我只想用正式版，但是为什么要我提交呢？如果我确实提交，在我看来，我将修改 Mapbox sdk 的新版本，随后在我自己的项目中，我将标记到这个特定的提交，这不在官方来源上。由于找不到提交，我试图拉动我的项目的同事不会有问题吗？

**编辑：** SMCalloutView 是 Mapbox sdk 本身合并的一个 git 子模块。

**编辑 2：** 当 pwd 位于 Mapbox-ios-sdk 基目录（我的项目的子目录）时发出所有命令。

**编辑 3：** 该项目位于[https://bitbucket.org/t2wu/container-bug](https://bitbucket.org/t2wu/container-bug)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T12:18:56.230

这`MapView/Map/SMCalloutView`是您的子模块的`MapBox-iOS-sdk`子模块，因此您有一个嵌套的依赖项。并且更新的是嵌套依赖项。

如果这些更正和更新对您的项目很重要，您将需要递归更新子模块以确保您拥有所有更新。

然后，您需要决定是否/如何将这些依赖项作为超级项目的一部分进行更正，因为这会产生同步问题。

如果您只是使用特定版本，并且偶尔更改为更新的发布版本，那么递归更新并不困难（这可能更容易，请参阅手册 ;-)

如果您还要纠正问题，那么您会遇到一个非常棘手的问题，即同时出现在两个地方 - a) 使用已发布的版本，b) 使用您自己的更正版本，并尝试在后面将两者结合起来。

考虑制作自己的分叉并将子模块重新指向您的分叉，以允许您在同一个公共存储库中拥有两个变体，并添加回上游存储库。但是你必须用这两种变体来维护你的叉子......

# html - 使用 css3 sprite 进行转换

> ID：14018839
> 
> 赞同：0
> 
> 时间：2012-12-24T08:14:12.830
> 
> 标签：html, css, css-sprites

我只想使用 css3 淡入和淡出图像（精灵）。下面的代码为所有图像提供了过渡。帮助我在 css 精灵中淡入和淡出下面的图像。

**代码**

```
 <div class="navigation">
    <div class="navigation1 process-normal" id="process"></div>
  <div class="navigation1 works-normal" id="works"></div>
  <div class="navigation1 team-normal" id="team"></div>
  <div class="navigation1 products-normal" id="products"></div>
  <div class="navigation1 services-normal" id="services"></div> 
```

**CSS**

```
.services-active, .products-active, .works-active,
.process-normal, .process-active, .products-normal, .team-normal, .team-active, 
.works-normal,.brain,.static,.services,.people,.servies-normal
 { display: block; background: url('allimages.png') no-repeat; }
.navigation1
{
-webkit-transition: all 1s ease;
-moz-transition: all 1s ease;
-o-transition: all 1s ease;
transition: all 1s ease;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T08:23:03.783

查看这个[站点](http://css-tricks.com/fade-image-within-sprite/)，了解如何使用图像精灵实现 CSS 过渡。

[演示](http://jsbin.com/uqivix/1/)（从上面的链接分叉）

**HTML**

```
<a href="#" class="arrow">Arrow<span></span></a> 
```

**CSS**

```
.arrow {
    display: inline-block;
    position: relative;
    text-indent: -9999px;
    width: 36px;
    height: 36px;
    background: url(sprites.png) no-repeat;
}

.arrow span {
    position: absolute;
    top: 0; left: 0; bottom: 0; right: 0;
    background: url(sprites.png) no-repeat;
    background-position: -50px 0;
    opacity: 0;
    -webkit-transition: opacity 0.5s;
    -moz-transition:    opacity 0.5s;
    -o-transition:      opacity 0.5s;
}

.arrow:active span {
    opacity: 1;
} 
```

# c++ - 获取当前目录，我可以在不知道最大缓冲区大小的情况下做到吗？

> ID：14018842
> 
> 赞同：0
> 
> 时间：2012-12-24T08:14:27.277
> 
> 标签：c++, windows, directory

在 C++ 中获取当前目录的语法是：

```
GetCurrentDirectory(DWORD nBufferLength, LPTSTR lpBuffer); 
```

有没有办法在不知道最大缓冲区大小的情况下获取当前目录？

我只是担心如果我设置一个最大长度，有人会超过它，我的程序会失败。

我无法使用`argv[]`，因为我使用的是 Win32。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-24T08:17:10.010

如果您将 NULL 作为缓冲区指针传递，并将 0 作为缓冲区长度传递，则该函数将返回必要的缓冲区大小。

正如[David Schwartz](https://stackoverflow.com/users/721269/david-schwartz)指出的那样，文档中对此进行 [了介绍](http://msdn.microsoft.com/en-us/library/windows/desktop/aa364934%28v=vs.85%29.aspx)。

# sqlite - 有没有办法自动创建 sqlite3 db 文件

> ID：14018843
> 
> 赞同：0
> 
> 时间：2012-12-24T08:14:28.697
> 
> 标签：sqlite

**我有一个脚本如下：**

创建表 myTestTable1();

插入 myTestTable1 值（）；

……

创建表 myTestTable2();

插入 myTestTable2 值（）；

……

**任何人都知道如何从脚本创建一个数据库文件？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T08:16:58.690

[是的，您可以使用此http://sourceforge.net/projects/sqlitebrowser/](http://sourceforge.net/projects/sqlitebrowser/)将 .sql 文件导入 SQLite

# php - 使用 PHP 将 Doc/Docx 文件转换为 PDF

> ID：14018846
> 
> 赞同：2
> 
> 时间：2012-12-24T08:14:45.907
> 
> 标签：php, pdf, docx

我正在寻找一个 PHP 代码或 PHP 库来将 microsoft doc/docx 文件转换为 PDF。我对 Zend 不熟悉。请帮我成功地将我的word文件转换为PDF。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T09:55:56.240

打开办公室，这段代码对我有帮助:)

```
<?php
    set_time_limit(0);
    function MakePropertyValue($name,$value,$osm){
    $oStruct = $osm->Bridge_GetStruct("com.sun.star.beans.PropertyValue");
    $oStruct->Name = $name;
    $oStruct->Value = $value;
    return $oStruct;
    }
    function word2pdf($doc_url, $output_url){
    //echo $output_url;
    //Invoke the OpenOffice.org service manager
    $osm = new COM("com.sun.star.ServiceManager") or die ("Please be sure that OpenOffice.org is installed.\n");
    //Set the application to remain hidden to avoid flashing the document onscreen
    $args = array(MakePropertyValue("Hidden",true,$osm));
    //Launch the desktop
    $oDesktop = $osm->createInstance("com.sun.star.frame.Desktop");
    //Load the .doc file, and pass in the "Hidden" property from above
    $oWriterDoc = $oDesktop->loadComponentFromURL($doc_url,"_blank", 0, $args);
    //Set up the arguments for the PDF output
    $export_args = array(MakePropertyValue("FilterName","writer_pdf_Export",$osm));
    //print_r($export_args);
    //Write out the PDF
    $oWriterDoc->storeToURL($output_url,$export_args);
    $oWriterDoc->close(true);
    }
    $output_dir = "C:/wamp/www/vineesh/";
    $doc_file = "C:/wamp/www/vineesh/vineesh.docx";
    $pdf_file = "vineesh.pdf";
    $output_file = $output_dir . $pdf_file;
    $doc_file = "file:///" . $doc_file;
    $output_file = "file:///" . $output_file;
    word2pdf($doc_file,$output_file);
    ?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-24T08:18:28.520

你是说 PHP 库吗？然后[phpdocx](http://www.phpdocx.com/)将为您工作。浏览有关安装和生成 pdf 的文档。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-18T19:14:10.413

phpword 不会转换为 PDF，它仅有助于创建 word 文档并在其上使用变量替换。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-02-27T08:46:17.890

如果你在 Windows 上，[**COM 包**](http://www.php.net/manual/en/com.configuration.php)是最好的选择。

# qt - 如何使用 qt 建立 VPN 连接？

> ID：14018851
> 
> 赞同：1
> 
> 时间：2012-12-24T08:15:09.703
> 
> 标签：qt

我想构建一个使用[PPTP 服务器创建 VPN 连接的 Qt 应用程序](http://www.bestukvpn.com)

我已经搜索并找到了在 Qt 中使用代理连接的代码，如下所示。但是代码不起作用。当我运行应用程序，然后检查我的 IP 地址时，IP 地址并没有改变，它和之前的一样（即没有建立 VPN 连接）。

我实际上是 Qt 的初学者。那么，我是否必须使用其他一些 Qt 类编写更多代码，或者我的方法有错误？

```
void MainWindow::enableVPN(){
     proxy.setType(QNetworkProxy::HttpProxy);
     proxy.setHostName("www.bestukvpn.com");
     proxy.setPort(999);
     proxy.setUser("free");
     QString pass=ui->PassField->text();
     qDebug() << pass;
     proxy.setPassword(pass);
     QNetworkProxy::setApplicationProxy(proxy);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-24T08:54:44.770

您知道 HTTP 代理*不是*VPN 吗？通常 VPN 是在操作系统级别建立的，并使用虚拟网络接口。

对其进行一些控制的一种方法可能是使用（例如）OpenVPN命令行二进制文件并通过`QProcess`API控制它——但这不是PPTP。

# c# - 单击应用程序磁贴时应用程序未激活

> ID：14018852
> 
> 赞同：0
> 
> 时间：2012-12-24T08:15:19.923
> 
> 标签：c#, windows-phone-7

我正在开发一个 wp7 应用程序。我通过按主页按钮停用该应用程序。之后，当我按下应用程序磁贴应用程序时启动而不是激活。是操作系统的默认行为还是我做错了什么。

如果这是默认行为，那么操作系统是否调用前一个实例的关闭事件

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T08:19:01.447

这是默认行为。有一种方法可以在 wp8 上更改它，但这不适用于 wp7 AFAIK

是的，仔细检查 - 这种行为称为快速应用程序恢复，但它在 WP7 上不可用

# asp.net - 对 Web 服务的请求过多

> ID：14018854
> 
> 赞同：1
> 
> 时间：2012-12-24T08:15:34.333
> 
> 标签：asp.net, iis, messenger

我在一个网络应用程序中写了一个信使。我使用 asmx Web 服务来接收所有请求并根据请求类型给出响应。（发送和观看传入消息基于池系统。**我不使用反向 ajax**）当我将源代码放在 IIS 7.0 上时出现问题。问题是，当用户数量增加（每秒超过 80 个请求）时，IIS 将不再响应任何请求，而且我的网站也会关闭。我必须对 IIS 进行任何特定配置吗？

谢谢

# python - 如何使用“numpy”将一列和一个矩阵组合成一个更大的矩阵？

> ID：14018855
> 
> 赞同：1
> 
> 时间：2012-12-24T08:15:46.940
> 
> 标签：python, numpy

我试图通过`(X - means) / variance`对每一行进行规范化矩阵。

由于我是用 来实现的`MapReduce`，我首先计算每列的均值和标准方差，然后`map`每行计算：

```
 matrix.map(lambda X: (X - means) / variance) 
```

但我想忽略每一行中的第一个元素`X`，这是我的目标列，只包含 1 和 0。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-24T15:08:40.130

如果`A`是一个 numpy 形状数组，`(m, n + 1)`并且您还有数组`mu`和`s2`形状`(n,)`，其中包含除第一列之外的每一列的均值和方差，您可以按如下方式进行归一化：

```
A[:, 1:] = (A[:, 1:] - mu) / s2 
```

要了解 wat 继续，您需要了解[广播](http://docs.scipy.org/doc/numpy/user/basics.broadcasting.html)的工作原理。由于`A[:, 1:]`有 shape`(m, n)`和`mu`和`s2`shape `(n,)`，最后两个在它们的形状前加上 1 以匹配第一个的尺寸，因此它们被视为`(1, n)`数组，并且在算术运算期间，它们的第一行也是唯一一行中的值被*广播*到所有行。

如果您还没有这样做，您的均值和方差数组可以有效地计算为

```
mu = (A[:, 1:].mean(axis=0)
s2 = A[:, 1:].var(axis=0) 
```

对于您可能希望使用`np.std`squared 来利用`ddof`参数的方差，请参阅[文档](http://docs.scipy.org/doc/numpy/reference/generated/numpy.std.html)。

另外，[归一化](http://en.wikipedia.org/wiki/Normalization_%28statistics%29)通常是除以标准差，而不是方差。

# jquery - 如何使用jquery中的缓存以另一种形式显示一种形式的图像？

> ID：14018858
> 
> 赞同：1
> 
> 时间：2012-12-24T08:15:56.757
> 
> 标签：jquery

我想以另一种形式显示一种形式的图像。我有两个表格 index.html 和 images.html。在 index.html 中，

```
<html>
<head>
    <title> demo </title>   
    <style type="text/css">
        #container{
            height:100%;
            width:100%;
            postion:relative;
        }
        .divclass{
            height:auto;
            width:auto;
            position:relative;
        }
        .divclass #imgdiv1{
            margin-top:30px;
            position:relative;
            height:200px;
            width:200px;
            border:1px solid #000;
        }
    </style>    
    <script type="text/javascript" src="jquery-1.8.3.min.js"></script>
    <script type="text/javascript">
        $(document).ready(function(){                                   
            $('#imgdiv1 img').click(function(){         
                var n=$('#imgdiv1 img').length; 
                $('#lightboxdiv').append(' ('+n+')');
            });
        });
    </script>
</head>
<body>
    <div id="#container">
        <div id="lightboxdiv">
            Light Box Images
        </div>
        <div class="divclass">          
            <div id="imgdiv1">
                <img src="001_19_3.jpg" style="width:150px;height:180px;position:absolute;visible:visible;z-index:1;">
                <img src="002_21_3.jpg" style="width:150px;height:180px;position:absolute;visible:hidden;">
                <img src="003_19_3.jpg" style="width:150px;height:180px;position:absolute;visible:hidden;">
                <img src="004_19_3.jpg" style="width:150px;height:180px;position:absolute;visible:hidden;">
            </div>
        </div>
    </div>
</body>
</html> 
```

如果我单击图像，图像计数将为 5。如果我单击计数，它将在下一个窗口中显示图像。我想获取 5 张图像并将图像显示在 images.html 中。有人可以帮忙吗？请！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T11:11:08.690

好的...您可以使用查询字符串来执行此操作...您的 index.html 页面看起来像这样..

```
<html>
<head>
<title></title>
<style type="text/css">

    .cont1
    {
        width:150px;
        height:80px;
        background-color:#bebebe;
    }

    img
    {
        display:none;
    }

    .ch:hover
    {
        cursor:pointer;
        text-decoration:underline;
    }

</style>
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
<script type="text/javascript">
    $(document).ready(function () {
        var count;
        var imgbox = [];

        $('.cont1').click(function () {

            var elem = $(this);

            if ($('.ch').html() == '') {

                count = elem.children('img').length;
                $('.ch').html(count);

                for (i = 0; i < elem.children('img').length; i++) {
                    imgbox.push(elem.children('img').eq(i).attr('src'));
                }
            }
            else {

                count = count + elem.children('img').length;
                $('.ch').html(count);

                for (i = 0; i < elem.children('img').length; i++) {
                    imgbox.push(elem.children('img').eq(i).attr('src'));
                }
            }

            elem.css('border', '2px solid #000');
            elem.unbind('click');
        });

        $('.ch').click(function () {
            window.location = "images.html?allimg=" + imgbox;
        });
     });
    </script>
    </head>
    <body>
    <div class="cont1">Div1
        <img alt="" src="Images/1.jpg" width="100px" height="70px" />
        <img alt="" src="Images/2.jpg" width="100px" height="70px" />
        <img alt="" src="Images/3.jpg" width="100px" height="70px" />
    </div>
    <br />
    <div class="cont1">Div2
        <img alt="" src="Images/1.jpg" width="100px" height="70px" />
        <img alt="" src="Images/2.jpg" width="100px" height="70px" />
        <img alt="" src="Images/3.jpg" width="100px" height="70px" />
        <img alt="" src="Images/3.jpg" width="100px" height="70px" />
    </div>
    <br />
    <div class="cont1">Div3
        <img alt="" src="Images/1.jpg" width="100px" height="70px" />
        <img alt="" src="Images/2.jpg" width="100px" height="70px" />
    </div>
    <br />
    Image Count : &nbsp;&nbsp;<span class="ch"></span>
    </body>
    </html> 
```

你的 images.html 看起来像这样..

```
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<title></title>
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
<script type="text/javascript">
    $(document).ready(function () {
        var url = window.location.toString();
        var img = url.split('?')[1].split('=')[1];
        var imgcount = img.split(',').length;
        for (i = 0; i < imgcount; i++) {
            $('body').append('<img alt="" src="' + img.split(',')[i] + '" width="200px" height="140px" />&nbsp');
        }
     });
</script>
</head>
<body>

</body>
</html> 
```

说明：我们正在使用 3 个 div，其中包含图像。最初，通过使用 css 属性 display:none，图像是不可见的。现在单击 div 后，它会检查计数跨度是否为空。如果它是空的，它会用 no 填充它。单击的 div 中显示的图像数量。同时我们正在使用数组。数组将填充单击的 div 中存在的所有图像的“src”并更改计数。

或者如果计数跨度不为空，那么它将添加编号。当前单击的 div 中存在的图像数量，并将图像的“src”附加到数组中并增加计数。

并且在点击计数时它会触发一个点击事件，我们正在使用 window.location = "index2.htm?allimg=" + imgbox 。这里我们使用查询字符串将数组传输到下一页。

现在在文档准备好的 images.html 页面上，我们使用 $.split() 来拆分 url 并在页面上显示图像。

如果你发现任何困难。让我知道..你可以给我发邮件@amit.kishoreda@gmail.com

# sql-server - 插入数据时出错

> ID：14018860
> 
> 赞同：1
> 
> 时间：2012-12-24T08:16:16.723
> 
> 标签：sql-server, sql-server-2008

嗨，我已经为数据库创建了一个产品表，但是当我尝试将数据插入其中时，我收到了这个错误：

![在此处输入图像描述](../Images/f58495ffef0c8e109883296572df4b53.png)

这是表格字段：

![在此处输入图像描述](../Images/b5821f4e117b47b3b25d42d2b41ec3c6.png)

唯一需要的字段是前 6 个和。第一个是设置为自动增量的索引，其他 5 个是我添加的。

这里有什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T09:11:30.387

我假设您已将 PK 分配给自动增量......所以试试这个，

```
INSERT INTO products (brandid, subcatid, productname, productprice, productimagepath) VALUES (111,'P111',111,'P111.jpg'); 
```

让我知道它对您有帮助吗？

# wordpress - 显示具有自定义帖子类型的帖子

> ID：14018863
> 
> 赞同：0
> 
> 时间：2012-12-24T08:16:47.640
> 
> 标签：wordpress, custom-post-type

我已经创建了一个自定义帖子类型，现在我想显示所有没有自定义帖子类型的帖子。我已经显示了这样的自定义帖子

```
$args = array(
        'post_type' => 'badge',
    );
    // The query itself
    $sb_user_query = new WP_Query( $args );
    // The loop
    while ( $sb_user_query->have_posts() ) : $sb_user_query->the_post();
        $badge_id = $sb_user_query->post->ID;
        $badge_title = get_the_title();
        $author = get_the_author();
        $author_id = get_the_author_ID();
        $badge_image_small = get_the_post_thumbnail( $badge_id, array(16,16) );
        $post_data = get_post_meta( $badge_id, '_metabox', true );
        $comment_data = get_post_meta( $badge_id, '_comments', true );
        echo $author.$badge_image_small;
    endwhile; 
```

现在我想显示所有没有“徽章”帖子类型的帖子类型。我该怎么做，请帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T08:45:32.450

不知道你到底想要什么，你可以使用 get_posts() 来获取帖子

[http://codex.wordpress.org/Template_Tags/get_posts](http://codex.wordpress.org/Template_Tags/get_posts)

以下是说明何时使用 get_posts()、query_posts()、WP_Query 的链接

[https://wordpress.stackexchange.com/questions/1753/when-should-you-use-wp-query-vs-query-posts-vs-get-posts/1755#1755](https://wordpress.stackexchange.com/questions/1753/when-should-you-use-wp-query-vs-query-posts-vs-get-posts/1755#1755)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-24T10:03:30.993

```
I think below code will give u the idea.

<?php
  $type = 'badge';
  $args=array(
  'post_type' => $type,
  'post_status' => 'publish',
  'posts_per_page' => -1,
  'caller_get_posts'=> 1

$my_query = null;
$my_query = new WP_Query($args);
if( $my_query->have_posts() ) {
  while ($my_query->have_posts()) : $my_query->the_post();
    global $post;
    $badge_id = $post->ID;
    $badge_title = get_the_title();
    $author = get_the_author();
    $author_id = get_the_author_ID();
    $badge_image_small = get_the_post_thumbnail( $badge_id, array(16,16) );
    $post_data = get_post_meta( $badge_id, '_metabox', true );
    $comment_data = get_post_meta( $badge_id, '_comments', true );
    echo $author.$badge_image_small;

endwhile;
}
wp_reset_query();  // Restore global post data stomped by the_post().
?> 
```

# mongodb - 如何从处理程序调用 mongoDB CRUD 方法？

> ID：14018864
> 
> 赞同：1
> 
> 时间：2012-12-24T08:16:52.337
> 
> 标签：mongodb, go

我用一些 CRUD 方法编写了一个简单的 MongoDB 包：

```
package backend

import "labix.org/v2/mgo"

type MongoDBConn struct {
    session *mgo.Session
}

type ToDo struct {
    Title       string
    Description string
}

func NewMongoDBConn() *MongoDBConn {
    return &MongoDBConn{}
}

func (m *MongoDBConn) Connect(url string) *mgo.Session {
    session, err := mgo.Dial(url)
    if err != nil {
        panic(err)
    }
    m.session = session
    return m.session
}

func (m *MongoDBConn) Stop() {
    m.session.Close()
}

func (m *MongoDBConn) AddToDo(title, description string) (err error) {
    c := m.session.DB("test").C("people")
    err = c.Insert(&ToDo{title, description})
    if err != nil {
        panic(err)
    }
    return nil
} 
```

我有一个 server.go，我在其中创建了一个 Http 服务器并为不同的 URL 提供了处理程序。我希望能够连接到 MongoDB 并在特定处理程序中调用 AddToDo 方法。我可以从我的服务器的主要方法连接到数据库：

```
import (
    "./backend"
       //other boilerplate imports
)

func AddHandler(writer http.ResponseWriter, request *http.Request) {
    log.Printf("serving %v %v", request.Method, request.URL.Path[1:])
    if request.Method != "POST" {
        serve404(writer)
        return
    }
    title := request.FormValue("title")
    description := request.FormValue("description")
    fmt.Fprintf(writer, " title description %v %v", title, description)
//I can't call mongoConn.AddToDo(title, description) from here

}    
func main() {
        //connect to mongoDB
        mongoConn := backend.NewMongoDBConn()
        _ = mongoConn.Connect("localhost")
        defer mongoConn.Stop()
    } 
```

但我不确定如何从处理程序调用 mongoConn.AddToDo(title, description string) 方法。我应该创建一个全局数据库连接变量吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-01-13T14:22:01.047

是的，全局会话是一种简单的处理方法。然后，在每个处理程序的顶部，您可以执行以下操作：

```
func handler(...) {
    session := globalSession.Copy()
    defer session.Close()
} 
```

这样每个处理程序都可以使用自己的会话。

请注意，复制和关闭会话是廉价操作，内部将针对连接池工作，而不是为每个创建的会话建立新连接。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-24T11:42:56.080

两种简单的方法：

**1.全局数据库会话**

```
package main

import (
    "net/http"
    "log"
    "fmt"
    "./backend"
)

var mongoConn * backend.MongoDBConn

func AddHandler(w http.ResponseWriter, r *http.Request) {
    log.Printf("serving %v %v", r.Method, r.URL.Path[1:])
    if r.Method != "POST" {
        fmt.Fprintln(w, "Not POST Method ")
        return
    }
    title := r.FormValue("title")
    description := r.FormValue("description")

    fmt.Fprintf(w, " title description %v %v", title, description)
//I can't call mongoConn.AddToDo(title, description) from here
    mongoConn.AddToDo(title, description)
}    

const AddForm = `
<html><body>
<form method="POST" action="/add">
Name: <input type="text" name="title">
Age: <input type="text" name="description">
<input type="submit" value="Add">
</form>
</body></html>
`
func Index(w http.ResponseWriter, r *http.Request) {
   fmt.Fprintln(w, AddForm)
}

func main() {
        //connect to mongoDB

       mongoConn = backend.NewMongoDBConn()
        _ = mongoConn.Connect("localhost")
        defer mongoConn.Stop()

        http.HandleFunc("/", Index)
        http.HandleFunc("/add", AddHandler)

        log.Println("Start Server:")
        err := http.ListenAndServe(":8080", nil)

        if err != nil {
            log.Fatal("ListenAndServe:", err)
        }
} 
```

**2.每个请求都有一个新的数据库连接**

```
import (
    "./backend"
       //other boilerplate imports
)

func AddHandler(writer http.ResponseWriter, request *http.Request) {
    log.Printf("serving %v %v", request.Method, request.URL.Path[1:])
    if request.Method != "POST" {
        serve404(writer)
        return
    }
    title := request.FormValue("title")
    description := request.FormValue("description")
    fmt.Fprintf(writer, " title description %v %v", title, description)
    //................
    mongoConn := backend.NewMongoDBConn()
    _ = mongoConn.Connect("localhost")
    mongoConn.AddToDo(title, description)
    //....................
    mongoConn.Stop()

} 

...... 
```

**更好的解决方案：**

> 您可以创建一个数据库会话池，然后在处理请求之前选择一个并放入该请求的上下文中。然后在请求完成后，您将连接推回池中。
> 
> 如果池为空，则创建一个新连接 如果池已满，则关闭连接

欲了解更多信息，请单击[此处](https://groups.google.com/forum/?fromgroups=#!topic/golang-nuts/gjvK4zcYy6U)。

# php - 使用 PHP 创建从 MySQL 获取大量数据的 PDF 文件

> ID：14018865
> 
> 赞同：6
> 
> 时间：2012-12-24T08:16:56.390
> 
> 标签：php, pdf, concatenation

我想制作一个包含大量数据的 PDF 文件，例如 12 个月的数据。每个月包含来自 MySQL 表的 500 行。我尝试过使用 FPDF，但它需要太多时间，这是不可接受的。如果有其他更好的 PHP 库或类可以轻松实现而不会使系统忙碌？

如果有什么脚本需要一个月一个接一个地把12个月的数据一个接一个地写入PDF，最后创建PDF文件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-09-11T15:39:24.780

我经常使用（通常）相同的方法从 PHP 创建非常大的 PDF。首先，我创建文档的网页版本并将其输出到文件。然后我通过 wkhtmltopdf 运行文件。这种方法比其他任何方法都更成功。HTML 应该可以快速生成，并且 wkhtmltopdf 出奇的快速和高效。此外，您还可以使用 CSS3 技术进行精细格式化。

对于非常大的 PDF，我还生成了较小的 PDF，然后将它们与 pdfmeld 合并。这也使您可以选择添加书签。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-20T10:41:09.953

```
 // you can used fpdf like this.
<?php
require('fpdf.php');

class PDF extends FPDF
{
   // Page header
  function Header()
  {
   // Logo
    $this->Image('logo.png',10,6,30);
     // Arial bold 15
     $this->SetFont('Arial','B',15);
    // Move to the right
    $this->Cell(80);
    // Title
   $this->Cell(30,10,'Title',1,0,'C');
   // Line break
   $this->Ln(20);
   }

  // Page footer
 function Footer()
 {
    // Position at 1.5 cm from bottom
   $this->SetY(-15);
   // Arial italic 8
   $this->SetFont('Arial','I',8);
   // Page number
   $this->Cell(0,10,'Page '.$this->PageNo().'/{nb}',0,0,'C');
}
}

// Instanciation of inherited class
$pdf = new PDF();
 $pdf->AliasNbPages();
 $pdf->AddPage();
 $pdf->SetFont('Times','',12);
for($i=1;$i<=40;$i++)
$pdf->Cell(0,10,'Printing line number '.$i,0,1);
$pdf->Output();
?> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-24T09:50:10.163

构建 PDF 总是很长。如果你有大量的资源，它会非常非常长，这是你无法避免的。我可以看到一种对您的用户更柔和的方法：

向他们发送 html 渲染，然后使用 Ajax 使 pdf 生成异步。所以你可以显示一个状态栏。并告知您的用户您正在执行他们的需求。

然后可以通过三种方式在技术上执行生成：

*   使用 fpdf 并对处置进行硬编码
*   使用 dom2pdf 或此类库使您的 html 呈现 pdf 文件
*   创建一个乳胶字符串，然后使用`proc_open`要求乳胶编译器构建一个 pdf 文件。它是一个非常快速且可靠的工具，但它需要您拥有专用服务器而不是共享主机。

# iphone - 如何使用 Xcode 4.5 将 UIImageView 嵌入到 iOS 中的 UIScrollView

> ID：14018872
> 
> 赞同：1
> 
> 时间：2012-12-24T08:17:17.770
> 
> 标签：iphone, ios, scrollview, xcode4.5

我正在尝试学习如何使用 UIScrollView 并且似乎遇到了一个简单的障碍。

我能够创建一个空的 UIScrollView 构建并运行，它可以工作。然后我尝试添加图像，我可以让图像显示，但我无法滚动。

这是我的 viewcontroller.h 文件的代码内容：

```
#import <UIKit/UIKit.h>

@interface ViewController : UIViewController
@property (weak, nonatomic) IBOutlet UIScrollView *scrollView;

@end 
```

在 viewcontroller.m 中：

```
#import "ViewController.h"

@interface ViewController ()

@end

@implementation ViewController
@synthesize scrollView;

- (void)viewDidLoad
{
    [super viewDidLoad];
    [scrollView setScrollEnabled:YES];
    [scrollView setContentSize:CGSizeMake(320, 500)];
}

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
    // Dispose of any resources that can be recreated.
}

@end 
```

我通过界面生成器添加了 UIImageView。它嵌入在滚动视图中。图像的大小也大于滚动视图。这是屏幕截图：

![在此处输入图像描述](../Images/7caa1615c3aaab0bc0d9b2ca90d94208.png)

当我构建和运行时，我得到了图像一部分的全屏视图，但无法滚动查看其余部分。关于为什么我不能滚动查看图像的其余部分的任何线索？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-24T09:00:51.923

你`contentSize`应该是你的`UIImageView`. 在这种情况下，您应该这样做`viewDidLoad`：

```
[scrollView setContentSize:CGSizeMake(427, 777)]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-24T09:39:04.503

为此，您必须使用滚动视图的“ContentSize”属性。

你可以有以下语法：

```
[scrollView setContentSize:CGSizeMake(<width>, <height>)]; 
```

干杯。

# c# - 如何在不枚举结果的情况下在实体框架中查询长数据类型的“包含”？

> ID：14018875
> 
> 赞同：0
> 
> 时间：2012-12-24T08:17:38.217
> 
> 标签：c#, asp.net, asp.net-mvc, linq, entity-framework

我有这个非常简单的查询：

```
 var val = context.aac_Account.Where(p => p.AcctNo.Equals(term)).Select(p=>new{

             value=p.AcctNo,
             label=p.AcctNo

        }); 
```

正如您在上面看到的，equals 不返回任何结果。我可以`.Contains`在字符串的情况下使用。

但我有什么用`long`？我无法枚举和过滤查询，因为其中有数百万条记录。

有什么解决办法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T15:06:25.457

不确定是否如此，您必须在数据库中创建一个存储过程或函数，您将在其中实现包含功能并调用它。

但是，您可以尝试使用 fluent linq 来实现它。[在这里](http://forums.asp.net/t/1583023.aspx/1)检查这个答案

# jquery - jQuery增加框显示溢出内容

> ID：14018877
> 
> 赞同：0
> 
> 时间：2012-12-24T08:18:02.400
> 
> 标签：jquery, html, css

我在每个 div 框（类别列表）中加载了一些文本行。我需要它在负载时只显示三个。所以我限制了高度并设置了溢出：隐藏；css 来实现它。我在盒子旁边有一个小按钮（图像加载到 div 中），用于增加和减少盒子的高度。问题是这个项目不能正常工作。以下是代码（我将保留其他不相关的 HTML/CSS/jQuery 代码）：

HTML（页面中的框之一）：

```
<div class="content" style="height:50px;overflow:hidden;">
    <div>Category 1</div>
    <div>Category 2</div>
    <div>Category 3</div>
    <div>Category 4</div>
    <div>Category 5</div>
    <div>Category 6</div>
</div>
<div class="see-more"></div> 
```

jQuery：

```
jQuery(document).ready(function() {
    jQuery(".see-more").click(function() {
        jQuery(this).prev("div.content").height(200);
    });
}); 
```

jQuery 代码似乎有问题。我还需要知道如何找到隐藏内容的真实高度（因为溢出）来设置盒子的确切高度而不是静态的 200 值。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-24T08:27:20.843

您可以使用 scrollHeight 属性来获取容器的实际高度，或者如果您不想做任何类型的动画，您也可以简单地删除隐藏的溢出。[这个小提琴](http://jsfiddle.net/axelmichel/qssuA/)显示了高度解决方案：

```
jQuery(document).ready(function() {
    jQuery(".see-more").click(function() {
        var box = jQuery(this).prev("div.content"),
            height = box[0].scrollHeight;
        box.height(height);
    });
});​ 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-24T08:33:51.130

您可以包装内部物品并使用该容器的高度来确定物品的最大高度。您可以进行一些计算以逐步增加高度...以下设置全高

```
$(function(){
    $('.content').wrapInner('<div class="inner">');  

    $(".see-more").click(function() {
        var $cont=$(this).prev()
        var maxHeight = $cont.find('.inner').height();
        $cont.height(maxHeight);
    });
 }); 
```

演示：http: [//jsfiddle.net/nq2Em/1/](http://jsfiddle.net/nq2Em/1/)

# button - 约束按钮大小

> ID：14018886
> 
> 赞同：0
> 
> 时间：2012-12-24T08:18:37.163
> 
> 标签：button, size, constraints

我需要约束这个按钮，使黄色边框完美地围绕加号，就像“Go”一样。 ![在此处输入图像描述](../Images/4a198bd971d2c95f3e37e4fc0895783f.png)

这是按钮的 CSS，以提供帮助：

```
 #addinput{
        border-radius: 10px;
        font-family: 'Belgrano', serif;
        color: #FFE200;
        text-shadow: 0px -1px 1.9px #fff, 0px 3px 2px #000;
        background:transparent;
        font-size: 3em;
        height:50%;
        background-size: 40% auto;
        display:block;
        border:1px solid yellow;
    } 
```

图二

![在此处输入图像描述](../Images/fa92a32a958bd49e852a7ad26c298f34.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T08:34:27.863

以 px 为单位设置高度值，而 line-height 可能会小一点，也以 px 为单位。见[jsfiddle](http://jsfiddle.net/e8JH9/3/)。

```
#addinput{
    border-radius: 10px;
    font-family: 'Belgrano', serif;
    color: #FFE200;
    text-shadow: 0px -1px 1.9px #fff, 0px 3px 2px #000;
    font-size: 3em;
    display: block;
    border: 1px solid yellow;
    height: 40px;
    line-height: 30px;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-24T08:24:59.127

`height:50%`如果您删除边框将完全适合它，则会导致它拉伸。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-24T08:30:16.287

您可以尝试将 + 包装在容器内的段落中：

```
​&lt;div id="addinput"><p>+</p></div>​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​ 
```

那么CSS将是：

```
#addinput p {
  margin-bottom: -10px; 
  margin-top: -10px;     
} 
```

# c++ - 如何将浮点数转换为长度为 4 的字节数组（char* 数组）？

> ID：14018894
> 
> 赞同：8
> 
> 时间：2012-12-24T08:19:24.287
> 
> 标签：c++

如何将浮点数转换为长度为 4 的字节数组（char* 数组）？我需要通过网络发送一些数据，tcp，并且需要将浮点数作为字节数组发送。（我知道两位小数的精度，所以目前我在客户端乘以 100，在服务器上除以 100 - 基本上转换为整数，然后使用 & 0xff << 操作查找字节）。但它很丑陋，并且会随着时间的推移而失去精确度。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-12-24T08:27:46.790

*将任何*类型读取为字节序列非常简单：

```
float f = 0.5f;

unsigned char const * p = reinterpret_cast<unsigned char const *>(&f);

for (std::size_t i = 0; i != sizeof(float); ++i)
{
    std::printf("The byte #%zu is 0x%02X\n", i, p[i]);
} 
```

*从网络流写入*浮点数的工作方式类似，只是你会省略`const`.

总是允许将任何对象重新解释为字节序列（任何`char`类型都是允许的），这显然*不是*别名违规。请注意，任何类型的二进制表示当然是依赖于平台的，因此如果接收者具有相同的平台，则应仅将其用于序列化。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-24T10:49:14.280

您要做的第一件事是确定网络协议中浮点数的格式。仅仅知道它是 4 字节并不能说明太多：IBM 大型机、Oracle Sparc 和普通 PC 都有 4 字节浮点数，但它们具有三种不同的格式。一旦您知道格式，根据它和您的可移植性要求，可以使用两种不同的策略：

如果协议中的格式是 IEEE（最常见的情况），并且您不必移植到非 IEEE 的机器上（Windows 和大多数 Unix 是 IEEE，大多数大型机不是），那么您可以使用键入 punning 将 float 转换为 a `uint32_t`，并使用以下任一方法输出：

```
std::ostream&
output32BitUInt( std::ostream& dest, uint32_t value )
{
    dest.put( (value >> 24) & 0xFF );
    dest.put( (value >> 16) & 0xFF );
    dest.put( (value >>  8) & 0xFF );
    dest.put( (value      ) & 0xFF );
} 
```

对于大端（通常的网络顺序），或者：

```
std::ostream&
output32BitUInt( std::ostream& dest, uint32_t value )
{
    dest.put( (value      ) & 0xFF );
    dest.put( (value >>  8) & 0xFF );
    dest.put( (value >> 16) & 0xFF );
    dest.put( (value >> 24) & 0xFF );
} 
```

对于 little-endian（某些协议使用）。您使用哪一种取决于为协议定义的格式。

要从 转换`float`为`uint32_t`，您必须检查您的编译器。使用`memcpy`是标准完全保证的唯一方法；目的是`reinterpret_cast<uint32_t&>`在浮动上使用 a 也可以，并且大多数（全部？）编译器也支持使用 a `union`。

如果您还需要移植到大型机，或者格式不是 IEEE，那么您需要从浮点数中提取指数、符号和尾数，并以目标格式输出。像下面这样的东西应该可以在*任何*机器上输出 IEEE big-endian（包括不使用 IEEE 的大型机），并且应该给你一些想法：

```
oxdrstream&
oxdrstream::operator<<(
    float               source )
{
    BytePutter          dest( *this ) ;
    bool                isNeg = source < 0 ;
    if ( isNeg ) {
        source = - source ;
    }
    int                 exp ;
    if ( source == 0.0 ) {
        exp = 0 ;
    } else {
        source = ldexp( frexp( source, &exp ), 24 ) ;
        exp += 126 ;
    }
    uint32_t               mant = source ;
    dest.put( (isNeg ? 0x80 : 0x00) | exp >> 1 ) ;
    dest.put( ((exp << 7) & 0x80) | ((mant >> 16) & 0x7F) ) ;
    dest.put( mant >> 8 ) ;
    dest.put( mant      ) ;
    return *this ;
} 
```

（`BytePutter`是一个简单的类，负责处理通常的样板文件并进行错误检查。）当然，如果输出格式不是 IEEE，则​​输出的各种操作会有所不同，但这应该显示基本原理。（如果您需要移植到一些不支持的更奇特的大型机，`uint32_t`您可以将其替换为任何大于 23 位的无符号整数类型。）

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2014-02-20T05:23:00.307

只需将数据覆盖在一个区域中，在 C 中

```
union dataUnion {  
    float f;  
    char fBuff[sizeof(float)];  
}  
// to use:  
dataUnion myUnion;  
//  
myUnion.f = 3.24;  
for(int i=0;i<sizeof(float);i++)  
    fputc(myUnion.fbuff[i],fp); // or what ever stream output.... 
```

# html - 复选框出现 gary 并在 Galaxy Built in browser 和 Maxthon 中选中

> ID：14018895
> 
> 赞同：0
> 
> 时间：2012-12-24T08:19:38.657
> 
> 标签：html, css, internet-explorer, android-2.3-gingerbread, android-checkbox

当我在我的 Galaxy S II 内置浏览器或 Maxthon 上测试我的网站时，所有复选框都显示为灰色，并且它没有选中，它就像默认选中的灰色，但是当我真正选中它时，它会变成绿色并带有选中的符号。

![在此处输入图像描述](../Images/b3002f5f500364b605f8c3e70f13acaf.png)

我可以给所有复选框的一般风格，以使它们看起来像普通复选框，而不是看上去是灰色检查的，我需要清除它，当检查它时，检查的符号出现在上面

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T12:32:41.453

我猜这就是每个浏览器显示选中和未选中状态复选框的方式。

如果您想更改选中和未选中状态的外观，我建议使用 Javascript 插件来替换它们，如 jQuery UI，或者制作您自己的可切换按钮。

可自定义复选框的最简单方法是使用[jQuery UI Button](http://jqueryui.com/button/#checkbox)

# extjs3 - 如何在加载之前检查所有数据加载将新行添加到网格中（ExtJS 3.2）

> ID：14018897
> 
> 赞同：1
> 
> 时间：2012-12-24T08:19:43.693
> 
> 标签：extjs3

我有一个可编辑的网格，我想自动加载 roweditor 并在该列中设置一些值。所以我写了一个函数调用 RowAdd()

```
RowAdd = function(){
      var grid = this.gridPtnr;
      var ds = grid.getStore();
      var roweditor = Ext.getCmp(grid.getId() + "_roweditor");
      var dt = new Date();
      var rec = new ds.recordType({ }, "new" + dt.format('U'));
      rec.set('USER_ID', '<?php echo $user_id; ?>');
      rec.set('COUNTRY_ID', '<?php echo $county_id; ?>');
      ds.insert(0, rec);
      grid.getView().refresh();
      grid.getSelectionModel().selectRow(0);
      roweditor.startEditing(0);
} 
```

一些这种方法给我的错误，因为当我尝试将新行添加到网格时没有加载网格数据。`ds.insert(0, rec);`但我在正常工作的线路之前添加了延迟时间。延迟对我来说不是不依赖客户端 PC 的完美解决方案。任何人都知道如何在网格数据完全加载后添加行，请帮助我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-29T13:21:46.393

您可以使用 new`store.recordType`来创建 Store 中保存的类型的新记录，并使用`store.insert`方法添加新创建的记录。下面是一个代码片段

```
var recordData = {
    colum1: 0,
    colum2: 'string data',
    colum3: 0
};
var recId = 3; // provide unique id
var p = new store.recordType(recordData, recId); // create new record
grid.stopEditing();
store.insert(0, p); // insert a new record into the store (also see add)
grid.startEditing(0, 0); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-31T08:41:57.967

问题是当我尝试插入记录时商店没有数据所以我可以在商店完全加载后插入数据

```
RowAdd = function(){
      var grid = this.gridPtnr;
      var ds = grid.getStore();
      var roweditor = Ext.getCmp(grid.getId() + "_roweditor");
      var dt = new Date();
      var rec = new ds.recordType({ }, "new" + dt.format('U'));
      rec.set('USER_ID', '<?php echo $user_id; ?>');
      rec.set('COUNTRY_ID', '<?php echo $county_id; ?>');
      ds.load({
         callback : function(r, options, success) {
                     ds.insert(0, rec);
                     grid.getView().refresh();
                     grid.getSelectionModel().selectRow(0);
                     roweditor.startEditing(0);
                    }
      });

} 
```

# java - 如何将java中数组的值复制到不包括最小值和最大值的新数组中？

> ID：14018898
> 
> 赞同：0
> 
> 时间：2012-12-24T08:19:44.337
> 
> 标签：java

我有这样的家庭作业问题：

以下数据代表地震的里氏震级数据。编写一个程序来计算和打印任何有效地震数据的平均值。

将 Richter 值存储在名为 quakeLevels 的双精度数组中。

不幸的是，众所周知，您的地震仪有时会产生不可靠的读数（例如本例中的值 10.1）。所以你决定扔掉最大和最小读数。

您的程序应该执行以下操作：

*   使用以下数据声明并初始化 quakeLevels 数组。{ 5.6, 6.2, 4.0, 5.5, 5.7, 6.1,7.4, 8.5, 5.5, 6.3, 6.4, 2.1, 6.9, 4.3, 3.1, 7.0, 10.1 }
*   确定数组中的最大值和最小值。
*   计算数组内容的平均值，不包括最大值和最小值。
*   打印数组中不包括最大值和最小值的值。
*   打印平均值。

在下面完成您的代码：

我已经用下面的代码尝试了这个问题，但是我得到了新数组的空值。

```
public class QuakeLevels {

    public static void main(String[] args) {

        Double quakeLevels[] = { 5.6, 6.2, 4.0, 5.5, 5.7, 6.1,7.4, 8.5, 5.5, 6.3, 6.4, 2.1, 6.9, 4.3, 3.1, 7.0, 10.1 };
        Double minQuakeLevel = Double.MAX_VALUE;
        Double maxQuakeLevel = Double.MIN_VALUE;
        double totalQuakeLevels =0.0;
        double avgQuakeLevels =0.0;
        Double[] newQuakeLevels = new Double[(quakeLevels.length-2)]; //array excluding min and max value from the original
        for(int i=0;i<quakeLevels.length;i++){
              totalQuakeLevels+=quakeLevels[i];
          if(quakeLevels[i]<minQuakeLevel) {
                minQuakeLevel=quakeLevels[i];
          }
          if(quakeLevels[i]>maxQuakeLevel){
                maxQuakeLevel =quakeLevels[i];
            }

        }

         avgQuakeLevels = ((double)totalQuakeLevels-(minQuakeLevel+maxQuakeLevel))/(quakeLevels.length-2); // Excluding min and max Quake Levels to calculate average
         System.out.printf("%s%.1f\n","Average Quake Level= ",avgQuakeLevels); 
         System.out.print("The new quake level:");
         for(int i=0;i<quakeLevels.length-2;i++){

          if(newQuakeLevels[i]!=minQuakeLevel && newQuakeLevels[i]!=maxQuakeLevel){
              quakeLevels[i]=newQuakeLevels[i];

         System.out.printf("%6s",newQuakeLevels[i]);
           }

         }
          System.out.println("");
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T08:24:51.170

我认为您设置了错误的数组。您正在覆盖原始数组，但您没有写入新数组。

尝试这个：

代替

```
if(newQuakeLevels[i]!=minQuakeLevel && newQuakeLevels[i]!=maxQuakeLevel){
      quakeLevels[i]=newQuakeLevels[i]; 
```

把这个

```
if(quakeLevels[i]!=minQuakeLevel && quakeLevels[i]!=maxQuakeLevel){
      newQuakeLevels[i]=quakeLevels[i]; 
```

# android - 如何将库项目作为依赖项添加到我的 Android Maven 项目中

> ID：14018909
> 
> 赞同：0
> 
> 时间：2012-12-24T08:21:35.007
> 
> 标签：android, maven, intellij-idea

我正在创建`IntelliJ IDEA 12`一个主项目（使用 Maven）和一个作为我的库的模块。我需要将该模块作为依赖项添加到我的主项目中。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T08:37:34.133

例如，这是`pom.xml`主**项目**的，我添加了我的自定义库（`groupId`-> com.example.app 和`artifactId`-> 库）

```
<?xml version="1.0" encoding="UTF-8"?>
<project xmlns="http://maven.apache.org/POM/4.0.0"
         xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
    <modelVersion>4.0.0</modelVersion>

    <groupId>com.test.myapp{groupId}</groupId>
    <artifactId>my-example-app{artifactId}</artifactId>
    <version>1.0</version>
    <packaging>apk</packaging>

    <dependencies>
        <dependency>
            <groupId>com.example.app</groupId>
            <artifactId>library</artifactId>
            <version>1.0-SNAPSHOT</version>
            <type>apklib</type>
        </dependency>

        <dependency>
            <groupId>com.google.android</groupId>
            <artifactId>android</artifactId>
            <scope>provided</scope>
            <version>4.1.1.4</version>
        </dependency>

        <dependency>
            <groupId>junit</groupId>
            <artifactId>junit</artifactId>
            <scope>test</scope>
            <version>4.10</version>
        </dependency>
    </dependencies>

    <build>
        <sourceDirectory>src</sourceDirectory>
        <testSourceDirectory>test</testSourceDirectory>
        <plugins>
            <plugin>
                <groupId>com.jayway.maven.plugins.android.generation2</groupId>
                <artifactId>android-maven-plugin</artifactId>
                <version>3.4.1</version>
                <extensions>true</extensions>
                <inherited>true</inherited>
                <configuration>
                    <sdk>
                        <platform>17</platform>
                    </sdk>
                </configuration>
            </plugin>
            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-compiler-plugin</artifactId>
                <version>2.5</version>
                <configuration>
                    <source>1.6</source>
                    <target>1.6</target>
                </configuration>
            </plugin>
        </plugins>
    </build>
</project> 
```

这是`pom.xml`图书馆**项目**的：

```
<?xml version="1.0" encoding="UTF-8"?>
<project xmlns="http://maven.apache.org/POM/4.0.0"
         xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
    <modelVersion>4.0.0</modelVersion>

    <groupId>com.example.app</groupId>
    <artifactId>library</artifactId>
    <version>1.0-SNAPSHOT</version>
    <packaging>apklib</packaging>

    <dependencies>
        <dependency>
            <groupId>com.google.android</groupId>
            <artifactId>android</artifactId>
            <scope>provided</scope>
            <version>4.1.1.4</version>
        </dependency>

        <dependency>
            <groupId>junit</groupId>
            <artifactId>junit</artifactId>
            <scope>test</scope>
            <version>4.10</version>
        </dependency>
    </dependencies>

    <build>
        <sourceDirectory>src</sourceDirectory>
        <testSourceDirectory>test</testSourceDirectory>
        <plugins>
            <plugin>
                <groupId>com.jayway.maven.plugins.android.generation2</groupId>
                <artifactId>android-maven-plugin</artifactId>
                <version>3.4.1</version>
                <extensions>true</extensions>
                <inherited>true</inherited>
                <configuration>
                    <sdk>
                        <platform>17</platform>
                    </sdk>
                </configuration>
            </plugin>
            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-compiler-plugin</artifactId>
                <version>2.5</version>
                <configuration>
                    <source>1.6</source>
                    <target>1.6</target>
                </configuration>
            </plugin>
        </plugins>
    </build>
</project> 
```

如果您在您的机器上安装库项目 ( `mvn clean install`)，它将可以访问`IntelliJ IDEA`

# javascript - 使用 HTML 或 JavaScript 选择文件夹路径

> ID：14018910
> 
> 赞同：1
> 
> 时间：2012-12-24T08:21:38.603
> 
> 标签：javascript, html

我在 JavaScript 中有一个实现下载的函数。函数获取的参数之一是路径 - 下载文件的位置。

我想让用户通过 - 浏览按钮从他的计算机中选择下载路径。

不好，它希望选择一个实际的文件，我只想要文件夹的路径。

知道如何使用 HTML 或 JavaScript 做到这一点吗？

# blackberry - 黑莓 - 打开 applicationMessage 时监听

> ID：14018915
> 
> 赞同：2
> 
> 时间：2012-12-24T08:23:08.743
> 
> 标签：blackberry, blackberry-jde

我想知道用户何时从我的应用程序抛出的通知区域（从主屏幕打开 - 单击应用程序通知图标）打开消息。

`ApplicationMessageFolderListener`不要为此工作，注册 applicationMenuItem 会导致消息不再打开（请参阅[Blackberry - 打开消息时使用 ApplicationMenuItem](https://stackoverflow.com/questions/13995593/blackberry-use-of-applicationmenuitem-when-opening-a-message)）。

有人知道怎么做这个吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T10:27:47.357

下面的代码应该会有所帮助：

```
ApplicationMessageFolderRegistry registry =
    ApplicationMessageFolderRegistry.getInstance();
ApplicationMessageFolder inbox = 
    registry.getApplicationFolder(MessageListHelper.YOUR_CUSTOM_INBOX_FOLDER_ID);
ApplicationDescriptor daemonDescr = 
    ApplicationDescriptor.currentApplicationDescriptor(); 
```

从存储中获取现有消息并将它们注册到文件夹中。

```
MessageStore messages = MessageListHelper.getMessageStore();
ApplicationMessageFolder inbox =
   registry.registerFolder(MessageListHelper.YOUR_CUSTOM_INBOX_FOLDER_ID, 
   "Inbox", messages.getInboxMessages()); 
```

将自己注册为回调通知的侦听器。

```
inbox.addListener(this, ApplicationMessageFolderListener.MESSAGE_DELETED |
   ApplicationMessageFolderListener.MESSAGE_MARKED_OPENED |
   ApplicationMessageFolderListener.MESSAGE_MARKED_UNOPENED, daemonDescr);
messages.setFolders(inbox);
registry.setRootFolderName(MessageListHelper.ROOT_FOLDER_NAME); 
```

我只是在将侦听器添加到收件箱时感觉到，您可能会错过您设置的选项，例如

```
ApplicationMessageFolderListener.MESSAGE_DELETED | 
ApplicationMessageFolderListener.MESSAGE_MARKED_OPENED | 
ApplicationMessageFolderListener.MESSAGE_MARKED_UNOPENED 
```

所以，`actionPerformed()`只是第一次被调用来标记它旧或什么的。

# regex - undersore 和 dot 之间的正则表达式

> ID：14018917
> 
> 赞同：-1
> 
> 时间：2012-12-24T08:23:39.507
> 
> 标签：regex

我想在第三个下划线和点之间添加额外的字母数字，示例如下

```
CSV_20121023000854Z_MMSC_35dbc3f813.csv 
```

预期输出：

```
35dbc3f813 
```

这个正则表达式可以解决问题`(\_\w{15}\_\w{4}\_)(\w+)`，但是我希望它更灵活，以防字符串大小增加。谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-24T08:25:03.603

为什么不这样呢？

```
_([^_]+)\.csv 
```

它将捕获最后一个下划线和`.csv`.

或者，您可以使用您选择的语言对其进行拆分：

```
>>> s = 'CSV_20121023000854Z_MMSC_35dbc3f813.csv'
>>> s.split('.')[0].split('_')[-1]
'35dbc3f813' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-24T08:27:56.320

```
_(\w+)\.csv 
```

正则表达式适用于贪婪模式，它将继续匹配模式，并将提取匹配的最后一个模式，在您的情况下是所需的字符串。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-24T08:28:05.037

这是不关心下划线之间字符串长度的正则表达式：

```
^.*?_.*?_.*?_(\w+)\..*$ 
```

匹配部分甚至可以有一个下划线（在第三个下划线之后匹配）。点可以出现在第三个下划线之前。

这是它的一个例子： [http ://regex101.com/r/jT9fR0](http://regex101.com/r/jT9fR0)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-24T08:37:54.473

您说过输入字符串中存在三个下划线字符，

1）如果您确定某些字符会出现在 _ 字符之间，那么正则表达式应该是：

```
.+?_.+?_.+?_(.+)\..+ 
```

2）如果不是那么正则表达式应该是这样的：

```
.*?_.*?_.*?_(.+)\..* 
```

贪婪的运营商后面的问号让运营商不情愿。

# java - LazyList 中的 OnItemClickListener()

> ID：14018919
> 
> 赞同：0
> 
> 时间：2012-12-24T08:24:08.860
> 
> 标签：java, android, listview, onitemclicklistener, lazylist

我`Lazylist`从这段[代码](http://www.androidhive.info/2012/02/android-custom-listview-with-image-and-text/)中使用过，但我不知道如何实现`OnItemClickListener()`

我用这个：

```
public void onItemClick(AdapterView<?> parent, View view, int position, long id) {              
Toast.makeText(getApplicationContext(), id + "", 2000).show(); 
 }); 
```

但这只是获取项目位置。我想获取包含`KEY_ID`,`KEY_TITLE`和的数组哈希图`KEY_ARTIST`，就像我们使用时一样`ListActivity`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T09:11:05.953

在 LazyAdapter 类中重写方法如下：

```
public Object getItem(int position) {
    return data.get(position);
} 
```

现在在

```
public void onItemClick(AdapterView<?> parent, View view, int position, long id) {              
adater.getItem(position);
}); 
```

# multithreading - 提高不同物理处理器上等待互斥锁的性能

> ID：14018930
> 
> 赞同：0
> 
> 时间：2012-12-24T08:25:04.313
> 
> 标签：multithreading, winapi, synchronization

当我尝试不同的互斥体变体时，最后我找到了 2 个最快的原语。

一种是基于InterlockedExchange（众所周知的方法）

```
Access:
  while InterlockedExchange(AccessFlag, 1) <> 0 do
Release:
  InterlockedExchange(AccessFlag, 0) 
```

另一种是基于事件的。

```
Init:
  Event = CreateEvent(Null, false, true, Null);
Access:
  WaitForSingleObject(Event, INFINITE)
Release:
  SetEvent(Event) 
```

基于 InterlockedExchanged 的​​速度总是最快的，但是在失败的情况下它会受到不睡眠的影响。另一方面，它在单个物理处理器（内核）或多个内核上都非常有效。虽然单核测试的小好处是如果我在循环中添加 Sleep(0) 就不会失败。

基于事件的在睡眠时等待非常有用，但是当我测量性能时，我注意到使用这种类型互斥锁的多个线程如果驻留在单个物理处理器上（使用相同值调用的 SetThreadAffinityMask 或在单个物理处理器上进行测试）执行得更快——核心计算机）比在不同的处理器上。根据处理器的类型，这从 x4 (iCore 5) 到 x8 (Xeon) 不等。

至强的一些统计数据

3 个线程，每个线程增加 10 个变量（10,000,000 步），每次增加时使用互斥锁访问它。

*   多处理器，基于 InterlockedExcchange

    344 毫秒/每毫秒：87,209 / while 循环中的失败：2,487,376（占 3 个线程的总步数的 8%，存在 Sleep(0)，但对于多处理器线程可能无用）

*   多处理器，基于事件

    6187 毫秒/每毫秒：4,848

*   单处理器，基于 InterlockedExcchange

    281 毫秒/每毫秒：106,761/while 循环中的失败：0（循环内的睡眠（0））；

*   单处理器，基于事件

    765 毫秒/每毫秒：39,215

我假设真正的内核间同步有一些惩罚。但我想将 InterlockedExchange 方法的完美性能与基于事件的方法的正确性（“不工作就睡觉”）“结合”起来。这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T08:35:50.593

我相信这样做的一种常见方法是仅在有限次数的尝试中旋转 CAS 步骤。如果您的情况没有及时变为现实，那么您将经历“更昂贵”的基于事件的解决方案的开销。

# java - 无法使用命令提示符运行 java 程序

> ID：14018935
> 
> 赞同：0
> 
> 时间：2012-12-24T08:25:37.897
> 
> 标签：java

如何使用命令提示符运行 java 程序？我已经使用命令提示符运行了我的程序，但是我收到了这个错误`Could not find or load main class ReadWriteTextFile`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T08:33:50.937

那么，运行一个java类有几个条件：

*   首先，你要运行的文件应该有一个公共类，与文件同名。例如，`Test.java`将包含`Test`类。

*   公共类应该有一个 main 方法。这是一种静态方法。它的参数是传递的命令行参数。它的签名必须是`public static void main(String[] args)`。

作为示例类，您可以从命令行调用：

```
public class ReadWriteTextFile {
    public static void main(String[] args) {
        readWriteTextFile();
    }
    public static void readWriteTextFile() {
        // Do stuff.
    }
} 
```

如果保存在文件`ReadWriteTextFile.java`中，您可以像这样编译和调用它：

```
$ javac ReadWriteTextFile.java
$ java ReadWriteTextFile
$ 
```

从您收到的错误消息中可以看出，您的文件可能被称为`ReadWriteTextFile`，但您还没有一个包含`main`方法的公共 ReadWriteTextFile 类。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-24T09:14:55.233

[按照此处](http://docs.oracle.com/javase/tutorial/deployment/jar/appman.html)的说明检查清单中的入口点规范：您应该设置一个类似这样的条目： `Main-Class: YourPackage.ReadWriteTextFile` 可能缺少包路径？我在启动 jar 文件时遇到了这种问题......我希望这会有所帮助。

# jquery - 在中心显示前景图像

> ID：14018937
> 
> 赞同：0
> 
> 时间：2012-12-24T08:26:01.343
> 
> 标签：jquery, html, css, ruby-on-rails-3.1

我有一个具有用户配置文件的 rails3 应用程序。每个配置文件可能有 4 个不同大小的配置文件图像和幻灯片。我有一张背景图片 xx.gif。

如果个人资料图像的大小小于 640*480，则 xx.gif 应该在背景中可见，而较小的个人资料图像在前景中。较小的个人资料图像也应位于与背景图像相对应的中心。

这个怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T12:19:07.117

尝试这个：

*HTML*

```
<div id="main">
  <img id="image1" alt="test" src="/images/image.png" class="center">
</div>​ 
```

*CSS*

```
#main {
    background: url("/images/bg.jpg") 50% 50% no-repeat; 
    border:1px solid #eee; 
    width:500px; 
    height:400px;
    display: table-cell; 
    vertical-align: middle;
    text-align:center;
} 
```

[**`Fiddle here`**](http://jsfiddle.net/jXUTc/)

# php - 如何知道代码是否需要 eval()

> ID：14018939
> 
> 赞同：0
> 
> 时间：2012-12-24T08:26:42.813
> 
> 标签：php, mysql

我的 CMS 中有薮块。一些块包含 PHP 代码和一些 HTML 代码。如果我在代码是 html 代码时使用 eval 显示代码，我会收到此错误：

> 解析错误：语法错误，/Applications/XAMPP/xamppfiles/htdocs/mob/main_content.php(17) 中出现意外的“<”：第 1 行的 eval() 代码

我需要在代码之前添加`print`or 。`echo`

如果代码需要，我可以构建一个现在可以使用的函数吗`eval()`？`echo()`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-24T08:37:19.967

要回答您的实际问题，您应该使用`require()`而不是试图弄清楚您是否应该`eval()`或`echo()`. 但是，您永远不应该使用`eval()`. 几乎为零的情况`eval()`是做某事的唯一方法。您应该使用允许您将 PHP 代码块插入到位并使用它的模板引擎。

我个人更喜欢[PHPTAL](http://phptal.org)，但还有很多其他的，比如[Smarty](http://smarty.net)、[Twig](http://twig.sensiolabs.org)等等（这些是我通过快速谷歌搜索找到的前几个）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-24T08:58:58.693

没有自动的方法可以知道是否*需要* `eval()`某些东西。仅仅因为它看起来像 PHP 代码并不意味着它打算被评估。

如果您需要继续使用这种方法，我建议两种可能性：

1.  使用数据库中的不同列来存储文字文本和动态 PHP；当数据来自您将使用的 PHP 列时`eval()`。

2.  要求管理员在其输入中标记动态 PHP，例如`[php]...[/php]`. 删除标记，然后调用`eval()`.

# android - 如何避免在双核处理器中运行单个应用程序 2 次

> ID：14018940
> 
> 赞同：0
> 
> 时间：2012-12-24T08:26:57.863
> 
> 标签：android, multithreading, shell, adb

我创建了带有线程的小型应用程序，当我在单核中运行此应用程序时，它运行良好。

多核（双核）中的相同应用程序以不同的 PID 号运行两次。有无for循环，结果是一样的。

请帮助如何避免两次运行应用程序。这是一段代码

```
for (int i = 0; i < System.Environment.ProcessorCount; i++)
{
    Thread thCurrent = new Thread(sampleMethod);                        
     thCurrent.Start();
     thSubThreads.Add(thCurrent);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T09:09:14.927

我假设您需要在主要活动开始时启动的两个线程，但是当程序挂起时线程也会继续运行，并且每次程序从后台恢复时都会无意中启动另外两个线程。

如果应用程序刚刚从冻结状态重新启动，Android 也会调用[onCreate()方法。](http://developer.android.com/reference/android/app/Activity.html#onCreate%28android.os.Bundle%29)您需要找到一种方法来了解您的两个后台线程是否已经在运行，如果是，请不要第二次启动它们。

跟踪这些启动进程的一种可能方法是将创建的线程分配给主活动中的静态字段。在创建时，您应该能够检查线程字段是否不为空并且线程是否处于活动状态。

onCreate 接受一个参数（包），您可以在其中查找存储的状态。但是，如果应用程序已真正挂起并卸载了类，则您的两个线程可能不会停止（除非在这种情况下它不能？）。因此，我不确定在此捆绑包中存储诸如“线程已启动”之类的布尔值并稍后依赖它们是否好。

更好的是在 onStop() 上停止这些线程并在 onStart() 上启动它们。

# php - 具有单个变量的 PHP 类

> ID：14018946
> 
> 赞同：0
> 
> 时间：2012-12-24T08:27:28.017
> 
> 标签：php

我正在使用这个 PHP 代码来创建带有默认单变量的 PHP 类。但这并不完美。

`Note`：我需要将数据存储在单个变量中。

```
<?PHP

class hello
{
    public $data;
}

$test = new hello();

$test->data->user1->name = "Charan";
$test->data->user1->sex  = "male";
$test->data->user1->age  = "25";

$test->data->user2->name = "Kajal";
$test->data->user2->sex  = "female";
$test->data->user2->age  = "21";

print_r($test->data->user1);

?> 
```

我收到了这个错误：

![在此处输入图像描述](../Images/5302ad3de4ae366fdfd3d84b497bac24.png)

请帮助我，如何解决？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-24T08:31:54.010

您只声明了变量，但尚未将其设置为“类型”。例如，您试图将值分配给对象的属性......但`$data`不是对象 - 它不是任何东西。您需要`$data`在类的构造函数中分配一个对象，或者从类外部分配它。

**构造函数**：

```
class hello
{
    public $data;

    public function __construct() {
        $this->data = new StdClass();

        // assuming you want the users set up here as well
        $this->data->user1 = new StdClass();
        $this->data->user2 = new StdClass();
    }
} 
```

**从外面：**

```
// assume we are use the same class definition from your orginal example
$test = new hello();
$test->data = new StdClass();
$test->data->user1 = new StdClass();
$test->data->user2 = new StdClass();

$test->data->user1->name = "Charan";
$test->data->user1->sex  = "male";
$test->data->user1->age  = "25";

$test->data->user2->name = "Kajal";
$test->data->user2->sex  = "female";
$test->data->user2->age  = "21"; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-24T08:35:18.807

如果你想让你的类灵活，你好类中的 $data 变量必须是一个数组。

例如：

```
<?php

class Person{

public $data = array();

function __construct(){}

}

$person = new Person();
$person->data['name'] = 'Juan Dela Cruz';

echo $person->data['name'];

?> 
```

# android - Android 替换字符串

> ID：14018950
> 
> 赞同：0
> 
> 时间：2012-12-24T08:27:47.073
> 
> 标签：android

从活动中检索数据时如何替换字符串？我似乎无法在谷歌上找到它。也许我的问题太简单了。请看下面的代码。

```
Intent in = getIntent();
textToPass = in.getStringExtra("textToPass"); 
```

textToPass 实际上是一个字符串，例如。“示例文本.txt”

如何删除 .txt 使其看起来像“ExampleText”

我可能在附近的某个地方，但我仍然无法弄清楚

```
String exampletext = textToPass.getText().toString().replace(".txt",""); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T08:29:58.263

这里 textToPass 是字符串，因此您可以直接对其应用替换方法。

```
textToPass.replace(".txt",""); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-24T08:36:38.410

```
Intent in = getIntent();
String textToPass = in.getStringExtra("textToPass");
String[] exampletext = textToPass.split("//."); 
```

然后使用 exampletext[0] 它必须给出您的期望结果

# javascript - 通过更改 CSS 删除时如何让图像相互叠加？

> ID：14018951
> 
> 赞同：0
> 
> 时间：2012-12-24T08:27:46.680
> 
> 标签：javascript, css, drag-and-drop, draggable, qualtrics

我正在为 Qualtrics 中的一项调查自定义 CSS。我对图片使用拖放功能。删除时，图片将添加到 div 中。图像在彼此下方添加。有没有办法通过更改 CSS 将图片添加到 div 中时相互叠加？

链接到[调查](https://uvasocialsciences.qualtrics.com/SE/?SID=SV_0w6HuOhw3gvc1jn&Preview=Survey&BrandID=uvasocialsciences)

当前部分定制的 CSS：

```
<style type="text/css">
.Skin #SkinContent .PGR .DragAndDrop .Group {
    width: 10%;
}

.Skin .PGR td.itemsContainerTd {
   border-width: 0px 0px 0px 0px;
   border-style: none;
   vertical-align: top;
   padding: 5px 10px 5px 5px;
   float: left;

  }

.Skin .PGR td.groupsContainerTd {
   width: 100%;
   padding: 350px 10px 5px 5px;
   padding-bottom: 50px;
   float: none;
}

.Skin #SkinContent .RO .DND .QuestionBody ul li, .Skin #SkinContent .PGR .DragAndDrop .QuestionBody ul li {
    background-image: url("");
    background-position: 5px center;
    background-repeat: no-repeat;
    padding-left: 0px;
}

.Skin .PGR .DragAndDrop .rank {
    }

.Skin .PGR .DragAndDrop ul {
    text-align: center;
}

.Skin #SkinContent .RO .DND .QuestionBody ul li, .Skin #SkinContent .RO .RB .ChoiceStructure th, .Skin #SkinContent .TE .FORM .ChoiceStructure table td, .Skin #SkinContent .horizontalbar th.ylabel, .Skin #SkinContent .Matrix table td, .Skin #SkinContent .Matrix table th, .Skin #SkinContent .PGR .GroupNoDnd .inner, .Skin #SkinContent .PGR .GroupNoDnd h2, .Skin #SkinContent .PGR .DragAndDrop .QuestionBody ul li, .Skin #SkinContent .SBS thead th, .Skin #SkinContent .SBS td {
    padding: 0px;
}

/* DRAG AND DROP */
.Skin .RO .DND ul{
    width: 100%;
}
.Skin .RO .DND .rank{
    float:right;
    right:4px;
    top:6px;
    font-weight:bold;
    padding:4px 8px;
    background-color:#666666;
    color:white;
}
.Skin .RO .DND ul li.ReadableAlt
{
    border-width: 1px 0 1px 0;
    border-style: solid;
}

.Skin .RO .DND ul li img{

}
.Skin .RO .DND .QuestionBody ul li label{

}
.Skin .RO .DND ul li{
    padding:10px 4px;
    cursor: pointer;
    cursor:move;
    position:relative;
    zoom:1;
}
.Skin .RO .DND ul li:hover{
    background:#E6ECF5;
}

.Skin .RO .DND ul.NotEdited .rank{
visibility:hidden;
}

.Skin .RO .DND ul.Edited .rank,
.Skin .RO .DND ul.NotEdited li:hover .rank{
    visibility:hidden;
}

/* DND */
.Skin .PGR .DragAndDrop td.itemsContainerTd{
    height: 100%;
}
.Skin .PGR .DragAndDrop .stack td.itemsContainerTd{
    border-right: none;
}
.Skin .PGR .DragAndDrop td.groupsContainerTd{
    vertical-align: top;
}
.Skin .PGR .DragAndDrop td.groupsContainerTd div > div {
    border: 0px solid #BBB;
    border-collapse: collapse;
    min-height:150px;   
}
/* end overrides to PGR.css */

.Skin .PGR .DragAndDrop ul{
    list-style: none;
    height: 150px; /* min height for ie < 7 */
    width: 150px;
    border-collapse:collapse;
    margin: 0;
    padding: 0;
    text-align:left;
}

html > body .Skin .PGR .DragAndDrop ul{
    height:auto;
    min-height:100px;
}
html > body .Skin .PGR .DragAndDrop .stack ul.stack{
    margin: 25px 25px 0 0;
}
html > body .Skin .PGR .DragAndDrop .stack div.Group ul.stack{
    margin-left: 20px;  /* Group Ones need left margin */
}

.Skin .PGR .DragAndDrop ul li{
    /* basequestion overrides go here */
}
.Skin .PGR .DragAndDrop ul li.stack{
    position: absolute;
}
.Skin .PGR .DragAndDrop div ul li span label img {
    max-width: 100%;
}
.Skin .PGR .DragAndDrop .stack div ul li.stack span label {
    width: 200px;
    height: 255px;
}
.Skin .PGR .DragAndDrop .stack div ul li.stack span label img {
    width: 200px;
    height: 255px;
    visibility: visible;
}
.Skin .PGR .DragAndDrop .stack .Group li.stack span.rank {
    visibility: hidden;
}
.Skin .PGR .DragAndDrop .stack div.Group ul li span img {
    width: auto;
}
.Skin .PGR .DragAndDrop .stack ul li.stack {
    background-color: white;
    border: 2px solid #CCC;
    box-shadow: 0 0 0px rgba(0,0,0,0.3);
}

.Skin .PGR .DragAndDrop .stack ul li.stack.penultimate {
    margin-top: 0px;
    margin-left: 0px;
}
.Skin .PGR .DragAndDrop .stack ul li.stack.antepenultimate {
    margin-top: 0px;
    margin-left: 10px;
}

.Skin .PGR .DragAndDrop .ProgressCounter{
    text-align: center;
}

html > body .Skin .PGR .DragAndDrop ul li{

}
.Skin .PGR .DragAndDrop ul li:hover,
.dragAndDropPGRquestion .DND ul li.over{
    border:1px solid #cccccc;
}
.Skin .PGR .DragAndDrop .Group h2,
.Skin .PGR .DragAndDrop .Items h2{
    font-size:12px;
    margin:0;
    padding:0;
    text-align:center;
    display:block;
}
.Skin .PGR .DragAndDrop .Items{
    margin: 0px;
    padding:0;
    height:100%;
}

.Skin .PGR .DragAndDrop .Group{
    float: left;
    margin-left: 2px;
    margin-top: 2px;
}
.Skin .PGR .DragAndDrop .Items  h2{
    padding-top:5px;
    border:none;
}
.Skin .PGR .DragAndDrop .Items ul{
    border:none;
    height:150px;
}
html>body .Skin .PGR .DragAndDrop .Items ul{
    min-height:150px;
    height:auto;
}
.Skin .PGR .DragAndDrop .Group ul,
 .Skin .PGR .DragAndDrop .Group h2,
 .Skin .PGR .DragAndDrop .Items ul,
 .Skin .PGR .DragAndDrop .Items h2{
    width:200px;
}
.Skin .PGR .DragAndDrop .Items ul li{
    /*background:transparent url(../../WRQualtricsShared/Graphics/Spacer.gif) top left;*/
    border:none;
}
.Skin .PGR .DragAndDrop .Items ul li .rank{
    display:none;
}
.Skin .PGR .DragAndDrop .QuestionBody label{
    display:block;
    zoom:1;
}
.Skin .PGR .DragAndDrop .clear{
    clear:both;
    visibility:hidden;
}

.Skin .PGR .DragAndDrop .NoColumns td.groupsContainerTd div {
    float: none;
}

.Skin .PGR .DragAndDrop .NoColumns td.groupsContainerTd div ul,
.Skin .PGR .DragAndDrop .NoColumns td.groupsContainerTd div h2 {
    width: 337px;
}
.Skin .PGR .DragAndDrop .NoColumns td.groupsContainerTd div > div {
    width: 337px;
    margin: 0 auto;
}
.Skin .PGR .DragAndDrop .rank{
    position:absolute;
    right:2px;
    top:3px;
    font-weight:bold;
    padding:1px 5px;
    background-color:#666666;
    color:white;
visibility: hidden;
}
.Skin .PGR .DragAndDrop ul li{
    padding:4px;
    cursor: pointer;
    position:relative;
}

.Skin #SkinContent .PGR td.groupsContainerTd {
    padding-left: 0;
}</style> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T11:38:02.550

根据图像添加到页面 DOM 的方式，您可以`:first-child`对图像或 jQuery使用伪类，`.first` `.last`并使用 z-index 定位它，使其位于上方。PS 如我所见，该站点没有使用 jquery，因此使用 javascript 变得有点棘手。

# eclipse - SVN 'bad URL Passed to RA Layer' 和 Eclipse 项目重新设置为 svn 资源

> ID：14018962
> 
> 赞同：0
> 
> 时间：2012-12-24T08:28:20.417
> 
> 标签：eclipse, svn

我面临一个非常奇怪的问题。我安装了服务器并成功创建了分支并将代码放入 SVN。然后将该项目作为文件夹签出到一个项目中。现在我的电脑重新启动后发生了什么，我在没有启动 svn 的情况下打开了 eclipse。一些弹出窗口出现在 Eclipse 中找不到的 abt 存储库。我关上了那扇窗。现在我开始了SVN。但令我奇怪的是，我发现 src 存在于 eclipse 项目中，但它与 SVN 不同步。我怎么能这样做，因为我也无法查看以前的版本。也直接在服务器上，我什至无法区分文件与以前的版本，因为它提供了一些“传递给 RA 层的错误 URL”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-04-10T18:10:18.923

当代码空间的 svn 版本被有意或无意地删除时，就会出现此问题。我在尝试将更改合并到不存在的版本时遇到了同样的错误消息（我之前故意删除了它，因为它是一个重复的分支）。

收到未知操作：提交完成 传递给 RA 层 svn 的错误 URL：URL 'svn://svnserver.testdev.com/java/SpringHibernateExample/branches/SpringHibernateExample_With_Annotation' 在修订版 55198 中不存在

要验证所引用的文件/文件夹是否正确：

1.  切换到svn视角
2.  导航到错误消息中出现的位置（例如 java/SpringHibernateExample/branches/SpringHibernateExample_With_Annotation）

您很可能会注意到所引用的路径中没有文件/文件夹，这将允许您使用正确的位置。

# javascript - 为什么javascript有时会输出未定义的变量

> ID：14018963
> 
> 赞同：0
> 
> 时间：2012-12-24T08:28:23.303
> 
> 标签：javascript

我有一个小按钮，按下时会询问名称，然后将输入添加到 URL，然后 PHP 可以处理该 URL。我的代码如下。

```
 function staff_prompt(url)
  {
  var url = url;
  var staffname=prompt("Please enter your Name below:","Staff Member Name");
  if (staffname == null)  {
  } 
  else if (staffname == "Staff Member Name") {
  alert('You must enter a value to continue');
  staff_prompt();
  }
  else if (staffname == "") {
  alert('You must enter a value to continue');
  staff_prompt();
  }
  else {
  var windowgo = url + "&staffmember=" + staffname;
  window.location = windowgo;
 }
 } 
```

我的按钮代码如下

```
onclick="staff_prompt('index.php?app=orders&page=action&action=go_orderedviewtype=<?php echo $viewtype ?>&orderid=<?php echo $orderid ?>') 
```

有时效果很好，但有时它似乎转到“http://undefined....ect” 我无法复制这种情况，有时会发生，有时不会

我在想也许代码不是很好......为什么javascript有时不会检测到变量'url'。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-24T08:33:38.313

是的，你的代码有问题。

您正在`staff_prompt()`从两个 else if 条件中调用函数，并且您没有将`url`其作为参数传递，因此它肯定会将其作为`undefined`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-24T08:33:27.047

这里的 URL 是未定义的。您正在使用未定义的参数调用该函数：

```
staff_prompt(); 
```

因此，只要您进入 else if-s，您就会得到未定义的 url。

将您的代码更改为`staff_prompt(url);`，您会没事的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-24T08:52:11.383

当您在错误后调用 staff_prompt 时，您不会传递它的 url。

```
function staff_prompt(url) {
    var url = url;
    var staffname=prompt("Please enter your Name below:","Staff Member Name");
    if (staffname == null)  {
    } else if (staffname == "Staff Member Name") {
        alert('You must enter a value to continue');
        staff_prompt(url);
    } else if (staffname == "") {
        alert('You must enter a value to continue');
        staff_prompt(url);
    } else {
        var windowgo = url + "&staffmember=" + staffname;
        window.location = windowgo;
    }
} 
```

​ 示例：http: [//jsfiddle.net/burlak/CsrTc/3/](http://jsfiddle.net/burlak/CsrTc/3/)

# shell - mongodb remove 在“无效的对象 id”上失败

> ID：14018968
> 
> 赞同：5
> 
> 时间：2012-12-24T08:29:32.587
> 
> 标签：shell, mongodb, guid

我正在尝试使用 MongoDB shell 删除文档，但由于某种原因，它一直在“无效的对象 id：长度”上失败

**查询**：

```
db.collections.remove( { _id : ObjectId("FF125DF6-E977-404A-9E8C-600CDAFEFF53" )} ); 
```

**错误**：

> 12 月 24 日星期一 03:11:15 断言：10448：无效的对象 ID：length 0x6073f1 0x5d1aa9 0x5ac3f1 0x5b84f4 0x6aa5ac 0x6aaec8 0x69e4e7 0x6aa13f 0x668e46 0x668ec2 0x66a2ce 0x5cbcc4 0x4a44a6 0x4a67e6 0x7f2554e2fcdd 0x49f669 mongo(_ZN5mongo15printStackTraceERSo+0x21) [0x6073f1] mongo(_ZN5mongo11msgassertedEiPKc+0x99) [0x5d1aa9] mongo() [0x5ac3f1] mongo(_ZN5mongo21object_id_constructorEP9JSContextP8JSObjectjPlS4_+0x2b4) [0x5b84f4] mongo(js_Invoke+0x40c) [0x6aa5ac] mongo(js_InvokeConstructor+0x108) [0x6aaec8] mongo(js_Interpret+0x37c7) [0x69e4e7] mongo(js_Execute+0x36f) [0x6aa13f] mongo(JS_EvaluateUCScriptForPrincipals+0x66) [0x_Evaluate]UCScript+0x66) [0xEvaluate]88 ) [0x668ec2] mongo(JS_EvaluateScript+0x6e) [0x66a2ce] mongo(_ZN5mongo7SMScope4execERKNS_10StringDataERKSsbbbi+0x144) [0x5cbcc4] mongo(_Z5_mainiPPc+0x2156) [0x4a44a6] mongo(main+0x26) [/libc.6]/lib6（__libc_start_main+0xfd）[0x7f2554e2fcdd] mongo（__gxx_personality_v0+0x2a1）[0x49f669] 12 月 24 日星期一 03:11:15 错误：无效的对象 id：长度（shell）：1

我试着跑步

```
db.repairDatabase(); 
```

但没有任何改变。通过检查我发现这是一个已知问题，是否有解决方法？

**编辑**

这是数据库中的文档：

> {
> 
> "_id": "FF125DF6-E977-404A-9E8C-600CDAFEFF53",
> 
> “数据”： {
> 
> ```
>  "files": [
>    ],
> 
>    "categories": [
>   ],
> 
>    "trash": [
>    ]
>  } 
> ```
> 
> }

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-24T08:31:18.870

`ObjectId("FF125DF6-E977-404A-9E8C-600CDAFEFF53")`是无效的。[ObjectId](http://docs.mongodb.org/manual/core/object-id/)是 12 字节 BSON 类型，内部不能有“-”。检查您获得此 ID 的来源。

# android - Android searchview 来自网络的建议

> ID：14018970
> 
> 赞同：8
> 
> 时间：2012-12-24T08:29:35.953
> 
> 标签：android, android-searchmanager

我`SearchView`在操作栏中有一个，我希望从服务中获取建议。

我在 android 中看到了一个示例`Samples Searchable Dictionary`。但它正在从本地数据库加载结果。

我明白了，有必要使用`Content Provider`. 但我想知道何时从 Web 服务中获取结果。我的意思是什么时候拨打网络电话。请任何人都可以帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-07-25T13:27:25.870

因此，如果您在项目中使用搜索视图并希望显示建议，您可以实现两种方法

```
/**
         * Called when the user submits the query. This could be due to a key press on the
         * keyboard or due to pressing a submit button.
         * The listener can override the standard behavior by returning true
         * to indicate that it has handled the submit request. Otherwise return false to
         * let the SearchView handle the submission by launching any associated intent.
         *
         * @param query the query text that is to be submitted
         *
         * @return true if the query has been handled by the listener, false to let the
         * SearchView perform the default action.
         */
        boolean onQueryTextSubmit(String query);

        /**
         * Called when the query text is changed by the user.
         *
         * @param newText the new content of the query text field.
         *
         * @return false if the SearchView should perform the default action of showing any
         * suggestions if available, true if the action was handled by the listener.
         */
        boolean onQueryTextChange(String newText); 
```

从文档中可以看出这些方法是如何工作的。因此，只要用户键入 onQueryTextChange 方法就会被调用，并且每次输入或删除新关键字时都会调用它。

在这种方法中，您可以调用服务器以获取建议并将其提供给用户。

现在，如果用户想要搜索例如。“apple”，因此为每个关键字都点击服务器是没有意义的，例如在“app”之后点击服务器“a”然后“ap”等等，

因此，一旦用户停止在搜索视图中键入内容，您可以使用处理程序和类似这样的可运行的东西来处理，最好点击服务器。

```
 Handler mHandler;
         String mQueryText;

         @Override
            public boolean onQueryTextChange(final String newText) {
                mQueryText=newText;
                //Make if invisible once you get the data.
                mProgressBar.setVisibility(View.VISIBLE);
                mHandler.removeCallbacks(mRunnable);
                mHandler.postDelayed(mRunnable,200);
                return true;
                }

    private Runnable mRunnable  =new Runnable() {
        @Override
        public void run() {

      //Hit server here.

        }
    }; 
```

虽然您可以访问服务器并获取数据，但您可以显示进度条或其他内容。

您可以使用 EditText [https://developer.android.com/reference/android/widget/EditText.html](https://developer.android.com/reference/android/widget/EditText.html)应用相同的逻辑。希望能帮助到你。

# java - 加密和压缩文件名

> ID：14018971
> 
> 赞同：1
> 
> 时间：2012-12-24T08:29:53.077
> 
> 标签：java, file, encryption, file-io, hash

说，我有一个包含有关对象信息的文件。我使用名称创建它，以便文件名本身包含有关对象的某些信息，例如对象 ID、对象父 ID、其他一些元 ID 信息和文件序列号。这样做是因为文件可用于不同的模块，并避免对文件的元信息进行多次数据库访问。

文件名 = "OB"+fileId+parentId+metaId+sequence+".txt"

序列从 00001 到 99999（也可能非常大）

因此，每个索引的每个数字都有特定的含义

现在，文件信息将提供给我们应用程序之外的程序，我不希望其他应用程序知道我使用的详细信息。所以，我正在考虑在发送文件之前使用文件名的加密或散列，文件中的响应文件名也被加密或散列，他们将根据文件的内容向我发送带有加密/散列响应文件名的响应

有2个挑战：

1.  不涉及数据库的最快和最简单的方法

2.  文件名长约 25 个字符（带有其他 id 和序列信息），所以我希望生成的文件名更小（尽可能小）和标准大小。

或者任何可以使用的替代机制？？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T09:00:10.387

**选项 1 哈希**

使用诸如 SHA-256 或 SHA-128 之类的加密哈希算法将使您的文件名更长，尽管可以*很好地*保证它是唯一的，但并不能保证这一点（所有哈希算法都受到生日悖论的影响）。

由于无法保证 SHA-256 或 SHA-128 会生成唯一的文件名，因此根据您需要的安全级别，您可能需要查看 Adler32。这个算法不会像 SHA 系列那样安全，主要是因为生成的哈希大小非常小，你可以很容易地暴力破解它。但是 Adler32 可以提供文件名的混淆。

因为 Alder32 生成的散列大小很小（32 位），所以发生冲突的机会也远高于 SHA 系列，因此您肯定需要保留某种表，其中包含您的文件名及其相应的散列值（以及在这种情况或 SHA 情况下推荐）。该表可以是存储在缓存中的简单列表，但主要原因是如果发生冲突，您将需要更改值来计算新的哈希值。

**选项 2 加密**

加密不会使您的数据变小，充其量只是相同的大小（如果您的数据大小可以被算法的块大小整除）。但是，它将保留所有数据，而无需保留加密值的表格。如果你决定使用加密而不是散列，我会使用 AES，因为这是当今的标准。加密文件名的数据量很小，您可能不会注意到算法之间的任何差异，但如果您足够偏执，您可以查看[Intel CPU](http://en.wikipedia.org/wiki/AES_instruction_set)上的 AES 指令集。

# c# - 如何获取 WindowsStore 应用程序的 LocalNetwork IP 地址

> ID：14018978
> 
> 赞同：2
> 
> 时间：2012-12-24T08:30:26.443
> 
> 标签：c#, networking, windows-store-apps

我试图获取本地网络的 IP 地址。为此，我搜索并获得了一些示例，但 WindowsStore 应用程序不支持这些类和方法，这是我引用的链接之一 [如何以编程方式获取计算机的本地网络 IP 地址？（C＃）](https://stackoverflow.com/questions/151231/how-do-i-get-the-local-network-ip-address-of-a-computer-programmatically-c)

如何在 WindowsStore 应用程序中执行此操作？有什么建议么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-02-16T15:48:21.983

我相信 OP 已经有了他需要的答案，但对于其他人来说，基于 Roadrunner 的代码：

```
public HostName getCurrentIPAddress()
{
    IReadOnlyList<HostName> hosts = NetworkInformation.GetHostNames();
    foreach (HostName aName in hosts)
    {
        if (aName.Type == HostNameType.Ipv4)
        {
            return aName;
        }
    }
    return null;
} 
```

这将获取第一个 IP 地址（可能是唯一的，至少在我的计算机上）并将其作为主机名返回。要将其作为字符串获取，您可以随时调用`hostname.DisplayName`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-04T14:29:10.563

当我最近开始玩 VS2013 和我的第一个商店应用程序时，我陷入了同样的困境。我在 C# 方面没有太多经验，但我希望我在 VB 中发现的内容也能对你有所帮助。没错，带有“System.Net.DNS”的示例不适用于 Store-Apps。但经过一些研究后，我发现了“Windows.Networking.Connectivity.NetworkInformation.GetHostNames”类，它不仅可以用来获取主机名，还可以用来获取 IPv4 和 v6 addersses。以下代码在 Visual Basic 中运行良好

```
HostNamesObj = Windows.Networking.Connectivity.NetworkInformation.GetHostNames
     For Each HostName In HostNamesObj
        If HostName.Type = 0 Then
            ComputerNames= HostName.ToString
        End If
        If HostName.Type = 1 Then
            IPv4_Output = HostName.ToString
        End If
        If HostName.Type = 2 Then
            IPv6_Output = HostName.ToString
        End If
    Next 
```

如果您成功地将其翻译成 C#，我会很高兴收到您的反馈，因为这正是我现在苦苦挣扎的地方。我刚刚意识到 C# 与 VB 有很多共同点，但它对变量的类型声明要敏感得多！所以：祝你好运，RoadrunnerLI

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-24T08:34:04.173

Dns.GetHostAddresses 在 4.5 中仍然存在

[http://msdn.microsoft.com/en-us/library/system.net.dns.gethostaddresses.aspx](http://msdn.microsoft.com/en-us/library/system.net.dns.gethostaddresses.aspx)

# ruby-on-rails - 为什么嵌套时显示动作无法正常加载

> ID：14018979
> 
> 赞同：0
> 
> 时间：2012-12-24T08:30:31.270
> 
> 标签：ruby-on-rails, ruby-on-rails-3

Community has_many CommunityTopics
当它加载 community_topics_controller.rb # show 时，它会给出这样的错误。为什么？？（例如：[http](http://example.com/shop/walmart/topic/12) ://example.com/shop/walmart/topic/12 ）
它没有得到**@community_topic？？？**

> 路由错误没有路由匹配 {:controller=>"community_topics", :community_id=>nil}

我的代码是

**community_topics_controller.rb #show**

```
 def show
    @community_topic = CommunityTopic.find(params[:id])

    respond_to do |format|
      format.html # show.html.erb
      format.json { render json: @community_topic }
    end
  end 
```

**意见/community_topics/show.html.erb**

```
<%- model_class = @community_topic.class -%>
<div class="page-header">
  <h1><%=t '.title', :default => model_class.model_name.human %></h1>
</div>

<dl class="dl-horizontal">
  <dt><strong><%= model_class.human_attribute_name(:community_id) %>:</strong></dt>
  <dd><%= @community_topic.community_id %></dd>
  <dt><strong><%= model_class.human_attribute_name(:user_id) %>:</strong></dt>
  <dd><%= @community_topic.user_id %></dd>
  <dt><strong><%= model_class.human_attribute_name(:title) %>:</strong></dt>
  <dd><%= @community_topic.title %></dd>
  <dt><strong><%= model_class.human_attribute_name(:body) %>:</strong></dt>
  <dd><%= @community_topic.body %></dd>
  <dt><strong><%= model_class.human_attribute_name(:community_topic_icon_file_name) %>:</strong></dt>
  <dd><%= @community_topic.community_topic_icon_file_name %></dd>
  <dt><strong><%= model_class.human_attribute_name(:community_topic_icon_content_type) %>:</strong></dt>
  <dd><%= @community_topic.community_topic_icon_content_type %></dd>
  <dt><strong><%= model_class.human_attribute_name(:community_topic_icon_file_size) %>:</strong></dt>
  <dd><%= @community_topic.community_topic_icon_file_size %></dd>
  <dt><strong><%= model_class.human_attribute_name(:community_topic_icon_updated_at) %>:</strong></dt>
  <dd><%= @community_topic.community_topic_icon_updated_at %></dd>
  <dt><strong><%= model_class.human_attribute_name(:deleted_at) %>:</strong></dt>
  <dd><%= @community_topic.deleted_at %></dd>
</dl>

<div class="form-actions">
  <%= link_to t('.back', :default => t("helpers.links.back")),
              community_topic_index_path(@community), :class => 'btn'  %>
  <%= link_to t('.edit', :default => t("helpers.links.edit")),
              edit_community_topic_path(@community, @community_topic), :class => 'btn' %>
  <%= link_to t('.destroy', :default => t("helpers.links.destroy")),
              community_topic_path(@community, @community_topic),
              :method => 'delete',
              :confirm => t('.confirm', :default => t("helpers.links.confirm", :default => 'Are you sure?')),
              :class => 'btn btn-danger' %>
</div> 
```

**路线.rb**

```
resources :communities, :path => "shop", do
    resources :community_topics, :path => "topic", :as => :'topic'
end 
```

**模型/社区.rb**

```
def to_param
  "#{community_name}"
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T08:50:01.467

我没有看到您分配`@community`变量，但您在 中使用它`show.html.erb`，因此您的路径助手收到的是 a`nil`而不是 id。

```
 def show
   @community = Community.find params[:community_id]
   @community_topic = CommunityTopic.find params[:id]
   # the rest of the action
 end 
```

# sql - 使用 DELETE TRIGGER 在 DELETE 之前将已删除的值插入到表中

> ID：14018982
> 
> 赞同：9
> 
> 时间：2012-12-24T08:31:05.733
> 
> 标签：sql, sql-server, tsql, triggers, sql-delete

出于某种原因，我找不到我需要的确切答案。我在这里搜索了最后20分钟。

我知道这很简单。非常简单。但是由于某种原因我无法触发触发器..

我有一个有两列的表

**dbo.HashTags**

```
|__Id_|_name_|
|  1  | Love | 
```

我想将删除的值插入另一个查询调用`dbo.HashTagsArchive`的表中`DELETE`。

例子：

```
DELETE FROM [dbo].[HashTags] WHERE Id=1 
```

在这个例子之后，我应该有删除`dbo.HashTagsArchive`的行，并且`Id=1`应该删除的行`dbo.HashTags`

我试过这个触发器：

```
ALTER TRIGGER [dbo].[HashTags_BeforeDelete]
    ON [dbo].[HashTags]
    FOR DELETE
AS
  BEGIN
    INSERT INTO HashTagsArchive
   ( Id,
     HashTagId,
     delete_date)
   SELECT d.Id, m.HashTagId,GETUTCDATE() FROM deleted d 
   JOIN dbo.HashTags m ON m.Id=d.Id
    DELETE FROM dbo.HashTags
    WHERE ID IN(SELECT deleted.Id FROM deleted)
  END
GO 
```

它得到`Deleted`但没有`Inserted`行`HashTagsArchive`

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-12-24T08:34:52.157

您的问题是：此触发器在删除**已经发生****后**触发。所以没有更多的行可以加入！**`HashTags`**

 **您需要改用此触发器：

```
ALTER TRIGGER [dbo].[HashTags_BeforeDelete]
    ON [dbo].[HashTags]
    FOR DELETE
AS
  BEGIN
    INSERT INTO HashTagsArchive(Id, HashTagId, delete_date)
       SELECT 
           d.Id, d.HashTagId, GETUTCDATE() 
       FROM deleted d 
  END
GO 
```

`Deleted`伪表包含已删除的整**行**- 无需加入任何内容......

另外：这个触发器在删除发生后触发——所以你不需要自己做任何事情，在触发器内部——只需将这些信息位插入到你的存档表中——就是这样。其他一切都由 SQL Server 为您处理。**

# jquery - 带有描述的帖子中的 Wordpress 幻灯片库

> ID：14018986
> 
> 赞同：1
> 
> 时间：2012-12-24T08:31:16.623
> 
> 标签：jquery, wordpress, gallery, slideshow

我正在为 wordpress 寻找一个幻灯片画廊插件，就像这样：

[http://www.brides.com/wedding-ideas/wedding-style/2011/06/rainbow-wedding-color-scheme-rainbow-wedding#slide=1](http://www.brides.com/wedding-ideas/wedding-style/2011/06/rainbow-wedding-color-scheme-rainbow-wedding#slide=1)

带有描述和缩略图的图像。我该怎么做，或者你知道这样的插件吗？

谢谢...

# logback - 通过 XML 配置文件基于 MDC 设置日志文件名

> ID：14018989
> 
> 赞同：4
> 
> 时间：2012-12-24T08:31:21.907
> 
> 标签：logback

我真正需要做的是**为不同的用户提供不同的日志文件**。我知道如何直接在Java中做到这一点。

我希望有机会通过`logback.xml`配置文件进行设置。像这样：

```
 <appender name="FILE" class="ch.qos.logback.core.rolling.RollingFileAppender">
    <rollingPolicy class="ch.qos.logback.core.rolling.TimeBasedRollingPolicy">
        <fileNamePattern>logFile.%X{USER}.%d{yyyy-MM-dd}.log</fileNamePattern>
    </rollingPolicy>
    <encoder>
        <pattern>%d{HH:mm:ss.SSS} [%thread] %logger - %msg%n</pattern>
    </encoder>
</appender> 
```

请注意，写**%X{USER}**是不正确的，这只是我想要做的一个例子。

**所以**：是否可以在`logback.xml`配置文件中设置日志文件名？

* * *

我正在使用 Logback 1.0.7

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-06T06:01:44.627

您可以使用 SiftingAppender，请参考：[http ://logback.qos.ch/manual/appenders.html#SiftingAppender](http://logback.qos.ch/manual/appenders.html#SiftingAppender)

# javascript - JavsaScript 对象数组排序

> ID：14018994
> 
> 赞同：0
> 
> 时间：2012-12-24T08:32:41.820
> 
> 标签：javascript, arrays

创建具有两个属性`address`和的对象`distance`。将此对象推入`darr`数组。

代码：

```
var object=new Object();
object.address=add;
object.distance=distance;
darr.push(object); 
```

到目前为止一切都很好。现在我想`darr`按每个对象的距离排序。我已经尝试过`sortOn`，但它根本没有给出任何结果。知道怎么做吗？

只是为了让我清楚。这是某种关联数组吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T08:35:00.397

为了做到这一点，我们可以`Array.prototype.sort`像这样使用

```
dart.sort(function( a, b ) {
    return a.distance - b.distance;
}); 
```

# c#-4.0 - 从wsdl为每个类创建单独的文件？

> ID：14018998
> 
> 赞同：1
> 
> 时间：2012-12-24T08:32:47.073
> 
> 标签：c#-4.0, wsdl, svcutil.exe, xsd.exe

我正在与之合作的一家公司创建了一个 wsdl，说明他们将如何喜欢我将要编写的 WCF 服务接口。这不是一个真正的问题，因为它只是一个起点而不是一个禁令。

但是，是否可以从他们的 wsdl 为界面中的每个类创建单独的类文件？

例如，不是创建代理类，而是为我做艰苦的工作；) 并自己创建各个类？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T20:48:58.467

是的你可以。只要您已经下载了 WSDL 文档。您可以使用[XSD](http://msdn.microsoft.com/en-us/library/x6c1kb0s%28v=vs.71%29.aspx)从定义中生成代理类。

干杯。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-01-17T07:10:16.270

您可以通过[wsdl.exe](http://msdn.microsoft.com/en-us/library/7h3ystb6%28v=vs.80%29.aspx)以正常方式生成*代理类*，然后将生成的代码复制并粘贴到单独的类文件中。这样，构成您想要的类会更简单。