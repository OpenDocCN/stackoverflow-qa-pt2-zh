# StackOverflow 问答 15147000-15147999

# sql - 像 SQL 语句 SQL Server 2008R2

> ID：15147004
> 
> 赞同：1
> 
> 时间：2013-02-28T22:35:47.987
> 
> 标签：sql, sql-server-2008

我有一个简单的查询，但我需要过滤掉多条记录。我正在使用带有通配符的 like 语句。有没有更好的方法来做到这一点，然后写出每一个？我可以创建一个它引用的 udf 表吗？如何？如果我能。谢谢 ：）

```
SELECT a.SalesOrderNo ,
       a.ShipExpireDate ,
       a.CustomerNo ,
       b.ItemCode ,
       b.LineKey ,
       b.QuantityOrdered ,
       b.QuantityShipped ,
       b.ItemCodeDesc ,
       b.ExplodedKitItem
FROM dbo.SO_SalesOrderHeader a
LEFT JOIN dbo.SO_SalesOrderDetail b
ON a.SalesOrderNo = b.SalesOrderNo
WHERE b.ItemType = '1'
  AND b.ItemCodeDesc NOT LIKE '%Cert%'
  AND b.ItemCodeDesc NOT LIKE '%Fee%'
  AND b.ItemCodeDesc NOT LIKE '%Tag%'
  AND b.ItemCode NOT LIKE 'GF%'
  AND b.ItemCode NOT LIKE 'PXDIALPREP'
  AND b.ItemCode NOT LIKE '/C%'
  AND a.ShipExpireDate = CONVERT(DATE, GETDATE(), 101) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T22:58:59.103

这是一种不同的设计，可让您将 ItemCodeDesc 放在单独的表中（这也可能是 TVF）。不过，我无法评论性能。

另一方面，请注意，由于您是外部连接到销售订单详细信息，因此该表可以有 NULL 记录。反过来`b.ItemType = '1'`，当 ItemType 为 NULL 时，您将始终为 FALSE。因此，您不妨将其设为内部联接（并且您可能会发现您的查询计划无论如何都在这样做）

```
 SELECT a.SalesOrderNo ,
   a.ShipExpireDate ,
   a.CustomerNo ,
   b.ItemCode ,
   b.LineKey ,
   b.QuantityOrdered ,
   b.QuantityShipped ,
   b.ItemCodeDesc ,
   b.ExplodedKitItem
   FROM dbo.SO_SalesOrderHeader a
   LEFT JOIN dbo.SO_SalesOrderDetail b
   ON a.SalesOrderNo = b.SalesOrderNo
   WHERE b.ItemType = '1'
   AND b.ItemCode NOT LIKE 'GF%'
   AND b.ItemCode NOT LIKE 'PXDIALPREP'
   AND b.ItemCode NOT LIKE '/C%'
   AND a.ShipExpireDate = CONVERT(DATE, GETDATE(), 101) 
   AND NOT EXISTS (
        SELECT 1 FROM dbo.MappingTable MT 
        WHERE b.ItemCodeDesc LIKE MT.ItemCodeDesc
        ) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T22:49:04.787

注意：我猜您的标准是为了过滤掉无法发货的物品类型（如费用），根据您的要求进行调整。

您遇到的问题是离散值存储在 ID 中的结果。看起来您应该有一个 IsShippable 列，或者更好的是 ItemCodeType 的代码表，其中包含 Cert、Fee、Tag 等行以及那里的 IsShippable 列。如果你有一个代码表，那么你就可以做到

```
inner join ItemCodeTypes ict on ict.ItemCodeTypeId = b.ItemCodeTypeId and ict.IsShippable = 1 
```

ItemCodeTypes 表中的 Cert、Fee、Tag 行的 IsShippable = 0：

```
Id | Name |  IsShippable
1    Cert    0
2    Fee     0
3    Tag     0
4    Product 1
5    Book    1 
```

**编辑：**为了更直接地回答您的问题，您可以制作这样的视图，然后当您从中查询时轻松过滤 Where IsShippable = 1：

```
Select CASE 
  When b.ItemCodeDesc LIKE '%Cert%' Then 0
  When b.ItemCodeDesc LIKE '%Fee%' Then 0 
--etc.
  Else 1
END as IsShippable
,* 
From dbo.SO_SalesOrderDetail 
```

# javascript - 在非 DOM 对象中使用 jQuery 的 on/trigger 支持时是否有权衡？

> ID：15147007
> 
> 赞同：0
> 
> 时间：2013-02-28T22:35:53.483
> 
> 标签：javascript, jquery

下面的示例显示了在自定义 JavaScript 对象中提供事件处理的两种常见的现代方法。（我认为。）该示例基于通过 AJAX 在 jQuery 中加载数据的常见场景，其中传入的参数也需要在发布的最终完成事件中提供。

```
CustomClass.prototype.loadData(param1) {

  var thisObj = this;
  $.ajax({
    url : this.reqUrl,
    context: this,

    // There are various ways to do this, including writing the handlers inline
    // or using $.proxy. Shouldn't be important for this question.
    success : function(dataResp, textStatus) {thisObj.onSuccess(dataResp,
                                                                textStatus,
                                                                param1)}
  });
};

// Manage listeners. Storing functions here, but
// could also use objects with predefined functions.
CustomClass.prototype.addListener(callbackFunc) {
  this.listeners.Add(callbackFunc);
}

CustomClass.prototype.onSuccess(dataResp, textStatus, param1) {

  //**OPTION 1**
  // Publish event via callbacks/listeners
  for(var i=0; i<this.listeners; i++)
    this.listeners[i](dataResp, param1);

  //**OPTION 2**
  // Publish event via trigger/on
  $(this).trigger('my-event-name', [dataResp, param1]);

}; 
```

下面显示了这两个选项在代码中的外观：

```
function handler(dataResp, param1) {
  // do work, param1 == 'whatever'
}

c1 = new CustomClass();
c1.addListener(handler);
c1.loadData('whatever');

c2 = new CustomClass();
$(c2).on('my-event-name', handler);
c2.loadData('whatever'); 
```

结果与上述任一选项相同。使用 jquery 的 on/trigger 支持消除了管理监听器的代码，但是：

*   **一种方法肯定比另一种更好吗？**
*   **使用 on/trigger 时是否有任何重大的权衡，例如性能？**

关于将事件侦听器样式编程与 DOM 元素结合使用的好处，有很多关于 SO 的问题/答案。并且有很多关于在非 DOM 对象中提供事件处理的各种方法的问题/答案。*但是，对于非 DOM 对象的首选*方法和潜在的权衡，我找不到任何明确的信息，尤其是在上述示例等非平凡用例中。

编辑...当然在发布后，我看到[这个问题/答案](https://stackoverflow.com/questions/9895468/what-is-the-pitfall-in-using-jquery-on-off-and-trigger-method-on-non-dom-element?rq=1)（非常）接近。但是，除了向自定义对象添加其他属性之外，它不指示是否有任何其他后果。另外，我相信我的问题提供了一个更清晰的用例。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T14:09:34.207

回答我自己的问题：

在编写自定义对象时最好使用回调，这些对象不会生成或使用事件作为 DOM 交互的一部分。jQuery 的 on/trigger 事件处理的使用继承了许多额外的代码路径，因为它与 jQuery 更大的事件处理子系统挂钩。一些逻辑用于处理浏览器差异。使用附加代码是因为它重用和/或复制了 Web 浏览器中的事件处理功能，但在跨浏览器上下文中。

相比之下，使用自定义回调处理是微不足道的。Jquery 还提供了 $.Callbacks 函数，它可以节省一些编码，并且可以选择包含更高级的回调功能。

对这个问题的更完整的答案将提供各种方法的时序分析。但是，仅 jquery v1.9.1 的来源就提供了强有力的轶事证据：

jQuery的触发方法：

```
trigger: function( event, data, elem, onlyHandlers ) {
    var handle, ontype, cur,
        bubbleType, special, tmp, i,
        eventPath = [ elem || document ],
        type = core_hasOwn.call( event, "type" ) ? event.type : event,
        namespaces = core_hasOwn.call( event, "namespace" ) ? event.namespace.split(".") : [];

    cur = tmp = elem = elem || document;

    // Don't do events on text and comment nodes
    if ( elem.nodeType === 3 || elem.nodeType === 8 ) {
        return;
    }

    // focus/blur morphs to focusin/out; ensure we're not firing them right now
    if ( rfocusMorph.test( type + jQuery.event.triggered ) ) {
        return;
    }

    if ( type.indexOf(".") >= 0 ) {
        // Namespaced trigger; create a regexp to match event type in handle()
        namespaces = type.split(".");
        type = namespaces.shift();
        namespaces.sort();
    }
    ontype = type.indexOf(":") < 0 && "on" + type;

    // Caller can pass in a jQuery.Event object, Object, or just an event type string
    event = event[ jQuery.expando ] ?
        event :
        new jQuery.Event( type, typeof event === "object" && event );

    event.isTrigger = true;
    event.namespace = namespaces.join(".");
    event.namespace_re = event.namespace ?
        new RegExp( "(^|\\.)" + namespaces.join("\\.(?:.*\\.|)") + "(\\.|$)" ) :
        null;

    // Clean up the event in case it is being reused
    event.result = undefined;
    if ( !event.target ) {
        event.target = elem;
    }

    // Clone any incoming data and prepend the event, creating the handler arg list
    data = data == null ?
        [ event ] :
        jQuery.makeArray( data, [ event ] );

    // Allow special events to draw outside the lines
    special = jQuery.event.special[ type ] || {};
    if ( !onlyHandlers && special.trigger && special.trigger.apply( elem, data ) === false ) {
        return;
    }

    // Determine event propagation path in advance, per W3C events spec (#9951)
    // Bubble up to document, then to window; watch for a global ownerDocument var (#9724)
    if ( !onlyHandlers && !special.noBubble && !jQuery.isWindow( elem ) ) {

        bubbleType = special.delegateType || type;
        if ( !rfocusMorph.test( bubbleType + type ) ) {
            cur = cur.parentNode;
        }
        for ( ; cur; cur = cur.parentNode ) {
            eventPath.push( cur );
            tmp = cur;
        }

        // Only add window if we got to document (e.g., not plain obj or detached DOM)
        if ( tmp === (elem.ownerDocument || document) ) {
            eventPath.push( tmp.defaultView || tmp.parentWindow || window );
        }
    }

    // Fire handlers on the event path
    i = 0;
    while ( (cur = eventPath[i++]) && !event.isPropagationStopped() ) {

        event.type = i > 1 ?
            bubbleType :
            special.bindType || type;

        // jQuery handler
        handle = ( jQuery._data( cur, "events" ) || {} )[ event.type ] && jQuery._data( cur, "handle" );
        if ( handle ) {
            handle.apply( cur, data );
        }

        // Native handler
        handle = ontype && cur[ ontype ];
        if ( handle && jQuery.acceptData( cur ) && handle.apply && handle.apply( cur, data ) === false ) {
            event.preventDefault();
        }
    }
    event.type = type;

    // If nobody prevented the default action, do it now
    if ( !onlyHandlers && !event.isDefaultPrevented() ) {

        if ( (!special._default || special._default.apply( elem.ownerDocument, data ) === false) &&
            !(type === "click" && jQuery.nodeName( elem, "a" )) && jQuery.acceptData( elem ) ) {

            // Call a native DOM method on the target with the same name name as the event.
            // Can't use an .isFunction() check here because IE6/7 fails that test.
            // Don't do default actions on window, that's where global variables be (#6170)
            if ( ontype && elem[ type ] && !jQuery.isWindow( elem ) ) {

                // Don't re-trigger an onFOO event when we call its FOO() method
                tmp = elem[ ontype ];

                if ( tmp ) {
                    elem[ ontype ] = null;
                }

                // Prevent re-triggering of the same event, since we already bubbled it above
                jQuery.event.triggered = type;
                try {
                    elem[ type ]();
                } catch ( e ) {
                    // IE<9 dies on focus/blur to hidden element (#1486,#12518)
                    // only reproducible on winXP IE8 native, not IE9 in IE8 mode
                }
                jQuery.event.triggered = undefined;

                if ( tmp ) {
                    elem[ ontype ] = tmp;
                }
            }
        }
    }

    return event.result;
} 
```

有关其他信息，请参阅@kevin-b 对这个问题的评论，以及[这个较旧的问题/答案](https://stackoverflow.com/questions/9895468/what-is-the-pitfall-in-using-jquery-on-off-and-trigger-method-on-non-dom-element?lq=1)。

# android - 在greenDao中添加索引列的正确方法？

> ID：15147011
> 
> 赞同：8
> 
> 时间：2013-02-28T22:36:02.013
> 
> 标签：android, orm, greendao

我正在 greenDAO 中构建数据模型。它是使用 Core Data 的 iOS 应用程序的一个端口。在 iOS 中，我们使用索引（索引？）来提高在 20 列（属性）的表中的查找性能，其中 5 列经常被查询。我知道这会导致额外的存储空间并提供对表的更慢写入。

在文档中挖掘，我遇到了[Entity中的 addIndex(Index index) 方法和](http://greendao-orm.com/javadoc/greendao-generator/index.html?de/greenrobot/daogenerator/Entity.html)[Property.PropertyBuilder](http://greendao-orm.com/javadoc/greendao-generator/de/greenrobot/daogenerator/Property.PropertyBuilder.html)中的 index() 方法。向实体添加索引的正确方法是什么？

```
Entity entity = schema.addEntity("entity");
entity.setSuperclass("SuperClass");
entity.addIdProperty();
entity.addIntProperty("property").index(); 
```

或者

```
Entity entity = schema.addEntity("entity");
entity.setSuperclass("SuperClass");
entity.addIdProperty();
Property property = entity.addIntProperty("property").getProperty();
entity.setIndex(property); 
```

还是他们都做同样的事情？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-03-04T18:18:33.883

将**myProperty.index()**用于单个属性索引（因为它最方便）。

对于更复杂的索引，例如多列索引，使用 addIndex(index)：

```
Index index = new Index();
index.addProperty(property1);
index.addProperty(property2);
entity.addIndex(index); 
```

# c# - 无法将类型“System.Data.Common.DbDataReader”隐式转换为“字符串”

> ID：15147012
> 
> 赞同：-1
> 
> 时间：2013-02-28T22:36:02.503
> 
> 标签：c#

我不断收到读者错误。我只想能够从阅读器返回单个值。谁能帮帮我吗？

```
 DbProviderFactory factory = DbProviderFactories.GetFactory("System.Data.SqlClient");

        DbConnection conn = factory.CreateConnection();

        conn.ConnectionString = ConfigurationManager.ConnectionStrings["CompanyConnection"].ConnectionString;

        DbCommand comm = conn.CreateCommand();
        comm.CommandText = "getStockPrice";
        comm.CommandType = CommandType.StoredProcedure;

        DbParameter param = comm.CreateParameter();
        param.ParameterName = "@company";
        param.Value = CompanyName;
        param.DbType = DbType.String;
        comm.Parameters.Add(param);
        conn.Open();

        DbDataReader reader = comm.ExecuteReader();
        string stock = reader;
        reader.Close();
        conn.Close();
        return Convert.ToDouble(stock); 
```

这是存储过程：

```
 @company varchar(50)
    AS
Select stockPrice From Company_t
where companyName = @company; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-28T22:40:50.960

您必须执行以下操作：

```
string stock = reader.GetString(0); 
```

或者

```
string stock = reader.GetString(reader.GetOrdinal("stockPrice")); 
```

代替

```
string stock = reader; 
```

编辑：

您可以使用`GetDouble()`而不是`GetString()`跳过`Convert.ToDouble()`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T22:41:49.773

试着打电话`ExecuteScalar`

```
string stock = (string)comm.ExecuteScalar(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-28T22:38:24.050

我认为您的代码在这里中断

```
string stock = reader; 
```

你不能这样做，你必须实际从阅读器那里获取数据。

查看[文档](http://msdn.microsoft.com/en-us/library/system.data.common.dbdatareader.aspx)以获取更多信息

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-28T22:51:13.460

`DataReader`如果不读取数据，您将无法直接访问其中的数据。即使您的查询没有返回数据，此方法也不会破坏您的代码。

```
DbDataReader reader = comm.ExecuteReader();
string stock = "0";

while (reader.Read())
{
    // get the results of each column
    stock = reader["stockprice"].ToString();
    break;
}
reader.Close();
conn.Close();
return Convert.ToDouble(stock); 
```

# java - 在 Java JTextArea 中选择文本触发哪个事件？

> ID：15147016
> 
> 赞同：2
> 
> 时间：2013-02-28T22:36:45.580
> 
> 标签：java, swing, selection, jtextarea

我想监视选择文本到 JTextArea 中。我不知道选择文本会触发什么事件。

我只想在从 JTextArea 中选择一些文本后立即启用一些菜单项，例如菜单中的复制和剪切选项。我应该为此监控什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-28T22:42:03.100

我不知道文本组件的任何“选择侦听器”（尽管它们可能很有用），但是您可以使用 a`CaretListener`来监视插入符号位置的更改并检查选择状态...

```
public class TestSelectionMonitor {

    public static void main(String[] args) {
        new TestSelectionMonitor();
    }

    public TestSelectionMonitor() {
        EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                try {
                    UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
                } catch (ClassNotFoundException | InstantiationException | IllegalAccessException | UnsupportedLookAndFeelException ex) {
                }

                final JTextArea ta = new JTextArea();
                ta.addCaretListener(new CaretListener() {
                    @Override
                    public void caretUpdate(CaretEvent e) {
                        int length = ta.getSelectionEnd() - ta.getSelectionStart();
                        System.out.println(length);
                    }
                });

                JFrame frame = new JFrame("Testing");
                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                frame.setLayout(new BorderLayout());
                frame.add(new JScrollPane(ta));
                frame.pack();
                frame.setLocationRelativeTo(null);
                frame.setVisible(true);
            }
        });
    }
} 
```

# java - 通过生成随机数根据百分比随机选择表格

> ID：15147017
> 
> 赞同：0
> 
> 时间：2013-02-28T22:36:49.773
> 
> 标签：java, random

我正在做一个项目，其中我在不同的数据库中有两个具有不同模式的表。所以这意味着我有两个不同的连接参数让这两个表使用 JDBC-

让我们假设下面是 config.property 文件 - 在其中将选择时间`table1.percentage`方式，并且将根据随机数选择时间。`80%``table1``20%``table2`

```
TABLES: table1 table2

#For Table1
table1.percentage: 80    

#For Table2
table2.percentage: 20 
```

下面的方法将读取上面的`config.property`文件并`ReadTableConnectionInfo`为每个表创建一个对象。

```
private static HashMap<String, ReadTableConnectionInfo> tableList = new HashMap<String, ReadTableConnectionInfo>();

private static void readPropertyFile() throws IOException {

    prop.load(Read.class.getClassLoader().getResourceAsStream("config.properties"));

    tableNames = Arrays.asList(prop.getProperty("TABLES").split(" "));

    for (String arg : tableNames) {

        ReadTableConnectionInfo ci = new ReadTableConnectionInfo();

        double percentage = Double.parseDouble(prop.getProperty(arg + ".percentage"));

        ci.setPercentage(percentage);

    tableList.put(arg, ci);
    }
} 
```

下面是一个包含特定表的`ReadTableConnectionInfo`所有类的类。`table connection info`

```
public class ReadTableConnectionInfo {

    public String percentage;

    public double getPercentage() {
        return percentage;
    }

    public void setPercentage(double percentage) {
        this.percentage = percentage;
    }
} 
```

现在在我的运行方法中，每个线程都必须生成随机数，然后根据每个表的百分比决定我需要使用哪个表。

```
private static Random random = new SecureRandom();

@Override
public run() {
  ...

  while ( < 60 minutes) {
    double randomNumber = random.nextDouble() * 100.0;
    ReadTableConnectionInfo tableInfo = selectRandomConnection(randomNumber);

    // do query...
  }
}

//Any problem with the below method?
private ReadTableConnectionInfo selectRandomConnection(double randomNumber) {
  double limit = 0;
  for (ReadTableConnectionInfo ci : tableLists.values()) {
    limit += ci.getPercentage();
    if (randomNumber < limit) {
      return ci;
    }
      }
    throw new IllegalStateException();
   } 
```

**问题陈述：-**

`selectRandomConnection`我的方法有问题吗？因为每个线程都工作 60 分钟，而在这 60 分钟内，每次它只是在picking `table1`。

**我正在寻找的是`80%`应该选择的时间`table1`和应该选择`20%`的时间`table2`。**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T22:52:32.450

如果您希望 A 有 80% 的时间被选中，B 被选中的概率为 20%，平均而言，只需在 0（包括）和 100（不包括）之间选择一个随机数。如果数字小于 80，则选择 A，否则选择 B。

就如此容易。

# html - 显示与徽标内联的标题

> ID：15147019
> 
> 赞同：0
> 
> 时间：2013-02-28T22:36:55.480
> 
> 标签：html, css

试图在下面有一个带有口号的中心标题，然后在右侧我想显示我的徽标。

这是代码 [http://jsfiddle.net/xhRnG/](http://jsfiddle.net/xhRnG/)

任何帮助是极大的赞赏！

谢谢乔治

```
<div id="titles">
<h1>Title</h1>
<h2>This is the slogan</h2>
<p><img id="logo" src="http://www.pressuredesigns.com/themes/pala/files/stacks_image_154.png"/></p></div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T22:41:48.687

```
<div id="titles" style="text-align:center">
        <h1>Title</h1>
        <h2>This is the slogan</h2>
        <p style="float:right; position:absolute; top:0px; right:0px"><img id="logo" src="http://www.pressuredesigns.com/themes/pala/files/stacks_image_154.png"/></p>
    </div> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T22:42:05.810

稍作修改......像这样：http: [//jsfiddle.net/xhRnG/7/](http://jsfiddle.net/xhRnG/7/)？

HTML：

```
<div id="titles">
    <div>
            <h1>Title</h1>
            <h2>This is the slogan</h2>
    </div>
            <p><img id="logo" src="http://www.pressuredesigns.com/themes/pala/files/stacks_image_154.png"/></p>
        </div> 
```

CSS：

```
#titles
{
 text-align: center;   
}

#titles div, #titles p
{
    display: inline-block;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-28T22:41:21.010

制作一个 100% 宽的居中表格，其中包含三个单元格：中间的一个包含您的标题，右侧的一个包含徽标，左侧的一个是空的。您需要左边的那个，这样您就可以将标题放在页面的中心。

```
<div id="titles">
    <table width="100%" align="center">
        <tr>
            <td width="20%"></td>
            <td width="60%" align="center">
                <h1>Title</h1>
                <h2>This is the slogan</h2></td>
            <td width="20%">
                <img id="logo" src="http://www.pressuredesigns.com/themes/pala/files/stacks_image_154.png"/></td>
         </tr>
    </table>
</div> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-28T22:43:04.410

这是一种方法：**[jsFiddle example](http://jsfiddle.net/j08691/xhRnG/4/)**

**CSS**

```
h1, h2 {
    text-align:center;
}
#logo {
    position:absolute;
    right:0;
} 
```

**HTML**

```
<div id="titles">
    <p><img id="logo" src="http://www.pressuredesigns.com/themes/pala/files/stacks_image_154.png" /></p>
    <h1>Title</h1>
    <h2>This is the slogan</h2>
</div> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-28T22:47:47.900

`SOMEWIDTH`用一个好的价值和`LOGOWITH`你的标志的宽度替换。然后用`TOTAL_WIDTH`两者之和替换；

```
<div id="titles" style="width: TOTAL_WIDTH; margin: 0 auto;">
    <div style="width:SOMEWITH; float:left;">
        <h1 style="text-align: center;">Title</h1>
        <h2 style="text-align: right;">This is the slogan</h2>
    </div>
    <p style="width: LOGOWIDTH; float: right;">
        <img id="logo" src="http://www.pressuredesigns.com/themes/pala/files/stacks_image_154.png"/>
    </p>
    <br style="clear: both;" />
</div> 
```

# apache - 带有 Intranet 站点的 X-Frame-Options

> ID：15147023
> 
> 赞同：2
> 
> 时间：2013-02-28T22:37:22.283
> 
> 标签：apache, .htaccess, security

我正在 Apache 上构建一个 Web 应用程序。为了防止“点击劫持”，建议：

> 大多数现代 Web 浏览器都支持 X-Frame-Options HTTP 标头，确保在您的站点返回的所有网页上设置它（如果您希望该页面仅由服务器上的页面构成（例如，它是 FRAMESET 的一部分），那么您' 将要使用 SAMEORIGIN，否则如果您从不期望页面被加框，则应使用 DENY）。

但是，我需要允许来自一个站点的框架。这通常是这样完成的（在 .htaccess 中）：

```
Header set X-Frame-Options ALLOW-FROM https://www.that-site.com 
```

但是（再次），我需要允许的站点是我的本地 Sharepoint 站点（我们通过 访问`http://sharepoint/SitePages/Home.aspx`）。我尝试了一些不同的方法，但它们都关闭了站点，除了`SAMEORIGIN`，它不允许我需要的框架。有可能这些设置已经在 php.ini 中，但我没有被授予访问权限，并且本周我无法真正打扰我的 IT 员工解决这样的问题。

帮助？！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-17T18:58:11.417

仅供参考，仅 Mozilla 浏览器支持 ALLOW-FROM 选项。

# gwt - 在 EC2 上 GWT 编译需要相对较长的时间

> ID：15147024
> 
> 赞同：1
> 
> 时间：2013-02-28T22:37:27.407
> 
> 标签：gwt, ant, amazon-ec2, gwt-compiler

我正在考虑将我们的 CI 流程转移到 EC2 上的 Linux 实例。我已经在 m1.small Ubuntu Linux 实例上设置了 Jenkins。GWT 编译过程（通过 ant）在我们的笔记本电脑上大约需要 60 秒，但在 EC2 实例上大约需要 10 分钟。诚然，我们的笔记本电脑是配备 16GB RAM 的 MacBook Pro，但即使在我们的旧 CI 服务器（配备 2GB RAM 的 Windows Server 和 TeamCity）上，相同的过程也只需不到 2 分钟。想知道默认的 Linux 配置中是否有某些东西可能会干扰。除了安装 Jenkins、Apache 和 git 之外，我没有做太多的事情。

我们使用 localWorkers = 2 和 Xmx512M 进行编译。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T22:47:49.827

编译更多地依赖于 CPU 而不是 RAM。EC2 小型实例有 1 个计算单元。`"One EC2 Compute Unit provides the equivalent CPU capacity of a 1.0-1.2 GHz 2007 Opteron or 2007 Xeon processor."`

我不建议你在那里编译。您可以在本地编译并上传到那里，因为它是 Java 和 JavaScript 并且可以在任何地方运行。

# c# - C# SWIG 矢量 到字符串[]

> ID：15147026
> 
> 赞同：2
> 
> 时间：2013-02-28T22:37:29.190
> 
> 标签：c#, c++, swig

给定 C++ 方法，如

```
std::vector< std::string > getFoo();
void setFoo( const std::vector< std::string > &foo); 
```

我怎样才能让 SWIG 像这样向 C# 公开它

```
string[] getFoo();
setFoo(string[] foo); 
```

我意识到很多[人都询问](https://stackoverflow.com/a/8752983/89218)过`vector<string>`SWIG，但我没有看到任何解决与`string[]`. 每个人都提到使用 SWIG 模板，就像这样

```
%template(StringVector) vector<string>; 
```

但这只会创建一个调用者必须知道手动编组的数据类型。理想情况下，调用者只需处理`string[]`并让 SWIG 层解决。

我怎样才能简单地在 C# 中使用但在 C++ 中`string[]`变成它？`vector<string>`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-28T22:37:29.190

一种方法是向 SWIG 生成的 StringVector 添加[隐式转换](http://msdn.microsoft.com/en-us/library/aa288476%28v=vs.71%29.aspx)，以便它能够将自身转换为`string[]`.

我尝试通过 a 执行此操作`typemap`，但无法使其工作。但是，可以使用[部分类](http://msdn.microsoft.com/en-us/library/wa80x488%28v=vs.80%29.aspx)来完成。

它看起来像这样。在 SWIG 中，

```
%include std_vector.i
%include std_string.i

/* allow partial c# classes */
%typemap(csclassmodifiers) SWIGTYPE "public partial class"

/* generate template around vector<string> */
%template(StringVector) std::vector< std::string >; 
```

然后在 C# 中，创建 StringVector 的部分版本：

```
public partial class StringVector: IDisposable, System.Collections.IEnumerable
#if !SWIG_DOTNET_1
    , System.Collections.Generic.IList<string>
#endif
{
    // cast from C# string array
    public static implicit operator StringVector(string[] inVal) {
        var outVal= new StringVector();
        foreach (string element in inVal) {
            outVal.Add(element);
        }
        return outVal;
    }

    // cast to C# string array
    public static implicit operator string[](StringVector inVal) {
        var outVal= new string[inVal.Count];
        inVal.CopyTo(outVal);
        return outVal;
    }
} 
```

这允许您编写如下所示的 C# 代码：

```
string[] foo= mymodule.getFoo();
string[] thenewfoo= { "one", "two", "three" };
mymodule.setFoo(thenewfoo); 
```

它仍然是 C# 方法签名中的 StringVector，但由于客户端编码器可以使用`string[]`它并不重要。

# java - 无法从不同的班级开始动画到另一个班级

> ID：15147027
> 
> 赞同：0
> 
> 时间：2013-02-28T22:37:31.053
> 
> 标签：java, swing, actionlistener, graphics2d, repaint

我正在为我正在制作的音乐应用程序制作轨迹栏。基本上它是一个 Rectangle2D，它在 JPanel 扩展类“TrackBar”中水平移动，ActionListener 在另一个类“TrackBarAction”中，它由“TrackBar”类中的 Timer 移动，这次是在“Toolbar”类上启动的播放和暂停按钮在哪里。

*   我遇到的问题是它不动。我将调试打印添加到控制台以查看它是否正在读取代码并且它是，除了它由于某种原因没有重新绘制（），所以它确实读取了代码但没有重新绘制（）。

这是简化的代码：

```
public class Toolbar extends JPanel implements ActionListener {

public static boolean IS_PLAYING = false;

public Toolbar(){

      (...)

          pauseicon =  new ImageIcon(getClass().getResource("Icons/Pause.png"));    
          playicon = new ImageIcon(getClass().getResource("Icons/Play.png"));
          play = new JToggleButton(new ImageIcon(playicon.getImage().getScaledInstance(width, height, java.awt.Image.SCALE_SMOOTH)), false);            
        play.setOpaque(false);
        play.setContentAreaFilled(false);
        play.setBorderPainted(false);
        play.addItemListener ( new ItemListener( ) {

                @Override
                public void itemStateChanged(ItemEvent e) {
                    if(play.isSelected()){
                        play.setIcon((Icon)new ImageIcon(pauseicon.getImage().getScaledInstance(width, height, java.awt.Image.SCALE_SMOOTH)));
                        IS_PLAYING = true;
                        MainFrame.tb.t.start();     // THIS is where timer is called
                    } else {
                        play.setIcon((Icon)new ImageIcon(playicon.getImage().getScaledInstance(width, height, java.awt.Image.SCALE_SMOOTH)));
                        IS_PLAYING = false;
                        MainFrame.tb.t.stop();
                    }
                }});

        (...)

 } // end of constructor

} // end of class 
```

下一个类是 Trackbar 类：

```
public class TrackBar extends JPanel{

private TrackBarAction tba = new TrackBarAction(this);
public static int TIME = 8;

public Timer t = new Timer(TIME, tba);
public static double x = 0, y = 0, velX = 0.5, velY = 0;

@Override
public void paintComponent(Graphics g){

    System.out.println("1"); // debug

            super.paintComponent(g);

            Graphics2D g2d = (Graphics2D)g;
            //g2d.drawRect((int)x, (int)y, 10, 800);

            Rectangle2D r2d = new Rectangle2D.Double(x, y, 10.0, 800.0);  // x,x, w, h
            g2d.setPaint(Color.DARK_GRAY);
            g2d.fill(r2d);
            g2d.draw(r2d);

            System.out.println("2"); // debug
}

} 
```

下一个类是具有动作侦听器的 TrackBarAction：

```
public class TrackBarAction implements ActionListener{

private TrackBar tb;

public TrackBarAction(TrackBar tb){

    this.tb = tb;
}

 @Override
public void actionPerformed(ActionEvent e) {
     System.out.println("3");

    // When it gets to the end, return to start point
        if(tb.x == 1024){
            tb.x = 0;
            tb.y = 0;
        }

        tb.x += tb.velX;
        tb.y += tb.velY;
        tb.repaint();
        System.out.println("4");
}

} 
```

这是主框架：

```
public class MainFrame extends JFrame {

public static ColourToolbar colourBar;

public static TrackBar tb;

public MainFrame(){

    super("VIPE by Prestige WorldWide");

    // Top colour toolbar for tones
    colourBar = new ColourToolbar();
    this.getContentPane().add(colourBar, BorderLayout.NORTH);

    // The center where the drawing is done
    ImagePanel bg = new ImagePanel();   
        bg.setLayout(new BorderLayout());
        Dimension size = getPreferredSize();
        size.setSize(1024,800); //w, h
        bg.setPreferredSize(size);
    this.getContentPane().add(bg, BorderLayout.CENTER);

    tb = new TrackBar();
    bg.add(tb, BorderLayout.CENTER);

    //DrawBoard dboard =  new DrawBoard();
     //bg.add(dboard, BorderLayout.CENTER);

    //Image bgimage = (new ImageIcon(getClass().getResource("Icons/background.jpg"))).getImage();
    //JPanel bg = new JPanelWithBackground(bgimage);
    //this.getContentPane().add(bg, BorderLayout.CENTER);

    // The control toolbar where the settings and control buttons are.
    Toolbar toolBar = new Toolbar();
    this.getContentPane().add(toolBar, BorderLayout.SOUTH);
}

public static void main(String[] args){

    MainFrame frame = new MainFrame();

    frame.setBackground(Color.WHITE);
    frame.setSize(1024,768);
    frame.setLocationRelativeTo(null);
    frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    frame.setResizable(false);
    //frame.pack();
    frame.setVisible(true);

}

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T23:02:49.477

正如 MadProgrammer 指出的那样，您拥有的复杂的继承结构是不必要的。

破坏您发布的代码的是您的计时器正在操纵第二个屏幕外 TrackBar 的绘图坐标。由于您的 TrackBarAction 也是继承的 TrackBar，因此代码编译得很好，因为各种动画变量都存在。但是，它们属于未渲染的 TrackBar，而不是您实际使用的原始 TrackBar 实例。

```
 public class TrackBarAction implements ActionListener
{

private TrackBar tb;

public TrackBarAction( TrackBar tb )
{

    this.tb = tb;
}

@Override
public void actionPerformed( ActionEvent e )
{
    System.out.println( "3" );

    // When it gets to the end, return to start point
    if ( tb.x == 1024 ) {
    tb.x = 0;
    tb.y = 0;
    }

    tb.x += tb.velX;
    tb.y += tb.velY;
    tb.repaint();
    System.out.println( "4" );
}

} 
```

编辑：这就是您更新后的 TrackBarAction 应该是什么样子。您在概念上的错误是您的 TrackBarAction 版本的原始实例变量是按值传递的，而不是像对象那样通过引用传递的概念。所以，你在你的版本中操作了错误的变量。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T23:26:44.637

这个`private static TrackBarAction tba = new TrackBarAction(new TrackBar());`和这个

```
TrackBar tb = new TrackBar();
bg.add(tb, BorderLayout.CENTER); 
```

是问题。拥有的引用`TrackBarAction`不再是屏幕上的引用。

以这种方式使用静态变量是糟糕的设计和有问题的......

```
public class TrackBar extends JPanel{

    private TrackBarAction tba;
    private int TIME = 8;

    private Timer t = new Timer(TIME, tba);
    private double x = 0, y = 0, velX = 0.5, velY = 0;

    public TrackBar() {
        tba =  = new TrackBarAction(this);
    }

    @Override
    public void paintComponent(Graphics g){
        System.out.println("1"); // debug

        super.paintComponent(g);

        Graphics2D g2d = (Graphics2D)g;
        //g2d.drawRect((int)x, (int)y, 10, 800);

        Rectangle2D r2d = new Rectangle2D.Double(x, y, 10.0, 800.0);  // x,x, w, h
        g2d.setPaint(Color.DARK_GRAY);
        g2d.fill(r2d);
        g2d.draw(r2d);

        System.out.println("2"); // debug
    }
} 
```

然后每个需要与之交互的类都`TrackBar`应该获得相同的实例（他们需要使用的实例）

# list - 如何从单个字符串创建列表而不在 python 中拆分字符串

> ID：15147032
> 
> 赞同：0
> 
> 时间：2013-02-28T22:37:38.050
> 
> 标签：list, python-2.7

嗨，我有一个动态字符串，我想创建一个包含该字符串的列表。

```
Ex. a = "hello"
    b = xxx(a) should give ['hello']

when I try
    b = list(a), I get b = ['h','e','l','l','o'] 
```

我如何实现这一目标？谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-28T22:38:22.647

改为创建一个包含单个元素的列表：

```
b = [a] 
```

# asp.net - 使用网站项目中的发布配置文件 (.pubxml) 时如何设置 AssemblyVersion？

> ID：15147036
> 
> 赞同：4
> 
> 时间：2013-02-28T22:38:00.053
> 
> 标签：asp.net, msbuild, web-site-project, publish-profiles

我正在使用新的 ASP.Net 和 Web Tools 2012.2 **Publish Profiles** for Web Sites（不是 Web 应用程序）。

我使用在网站根目录中 创建文件的工具创建了一个**发布配置文件。**`website.publishproj`

该`website.publishproj`文件包含以下内容：

```
<AssemblyAttributes Include="AssemblyFileVersion">
    <Value>$(AssemblyFileVersion)</Value>
</AssemblyAttributes>
<AssemblyAttributes Include="AssemblyVersion">
    <Value>$(AssemblyVersion)</Value>
</AssemblyAttributes> 
```

这建议您可以将属性传递给 MSBuild 以设置输出 dll 的版本。

但是，网站的单个输出程序集（它被编译然后合并为单个程序集）始终具有版本号`1.0.0.0`。

我试过传入，`/p:AssemblyFileVersion=2.1.0.0;AssemblyVersion=2.1.0.0`但这没有效果。

我什至尝试过直接编辑 website.publishproj 文件，但这也没有效果。

当您希望将其合并到单个程序集中时，有谁知道如何在**网站项目上设置输出程序集的版本号？**

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-01T08:21:22.930

我已经设法解决了这个问题。我认为这是工具的错误。

如果您将该属性设置为文件`OutputPath`中的相对路径，则不会遵守和属性。`website.publishproj``AssemblyVersion``AssemblyFileVersion`

这是由于在将网站程序集合并为一个程序集时此版本控制的工作方式。

发生的情况是在部署期间生成了一个`AssemblyInfo.cs`文件并输入了提供的版本号。然后这个`AssemblyInfo.cs`文件被编译成一个`AssemblyInfo.dll`包含你传入的版本号的文件。

然后使用指向它之前生成`aspnet_merge.exe`的参数调用。`copyattrs``AssemblyInfo.dll`

如果设置`OutputPath`为相对路径，则此`copyattrs`参数指向不存在的 dll。这是因为它是从 aspnet_merge.exe 工具所在的路径运行的。因此，返回`AssemblyInfo.dll`程序集的相对路径找不到它的真实位置。

`OutputPath`不能是相对的。

为了解决这个问题，我将我的设置为：

```
<PropertyGroup>
    <OutputPath>$(MSBuildProjectDirectory)\..\..\TempPackageBuildDir\</OutputPath>
</PropertyGroup> 
```

**为什么要费心设置`OutputPath`呢？**

当您未设置时，`OutputPath`它会使用环境变量中的临时目录。就我而言，这会导致构建失败，因为某些文件的文件长度超过了 260 个字符的窗口限制（我有一个非常大的网站）。我完全可以构建它的唯一方法是将其设置`OutputPath`为更浅的路径。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-02T22:57:01.970

我遇到了类似的问题，但原因不同。

我的项目`MSBuild Options > Output folder`路径设置为与我的路径不同的路径`Publish > Connection > Target location`，因此它没有从`AssemblyInfo.dll`

希望这会对其他人有所帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-10-16T16:58:39.287

对我来说，解决方案是将属性添加到我的 .pubxml 文件中。

```
<Project ToolsVersion="4.0" xmlns="http://schemas.microsoft.com/developer/msbuild/2003">
  <PropertyGroup>
    <AssemblyVersion>2.3.0.0</AssemblyVersion>
    <AssemblyFileVersion>2.3.0.0</AssemblyFileVersion>
    ... rest of properties ...
  </PropertyGroup>
</Project> 
```

# ios - UICollectionViewCell 中的 MPMoviePlayerController

> ID：15147041
> 
> 赞同：1
> 
> 时间：2013-02-28T22:38:25.820
> 
> 标签：ios, cocoa-touch

我正在尝试在 UICollectionViewCell 中播放 mp4 电影。我没有运气让它显示。所以，我的第一个问题是：这可能吗？如果是这样，我做错了什么？这是一个非 ARC 项目，我没有使用任何 XIB 或故事板......

```
NSURL * theURL = nil;
NSBundle * bundle = [NSBundle mainBundle];
if (bundle)
{
     NSString * thePath = [bundle pathForResource:@"intro" ofType:@"mp4"];
     if ( thePath )
     {
         theURL = [NSURL fileURLWithPath:thePath];
     }
}

MPMoviePlayerController *player = [[MPMoviePlayerController alloc] initWithContentURL: theURL];
[player prepareToPlay];
[player.view setFrame: self.contentView.bounds];  // player's frame must match parent's
[self.contentView addSubview: player.view];
[player play];
[player release]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T22:44:55.663

在我看来，您正在释放播放器，因此它正在被释放。

注释掉最后一个版本，看看是否可以修复它。如果是这样，您需要将引用保存在某个地方（单元格的成员 ivar/属性？）并稍后释放它。

# haskell - 如何将函数应用于foldr？

> ID：15147045
> 
> 赞同：1
> 
> 时间：2013-02-28T22:38:40.467
> 
> 标签：haskell, binary-search-tree, fold

这是一个相对简单的haskell问题，但我遇到了很多麻烦。我正在尝试应用此函数“添加”将字符串列表转换为 BST。（add 函数只是插入一个术语）我的问题是如何定义折叠，以便将 add 函数应用于 [String] 以便它基本上一个一个地插入每个函数？

我最初的想法是，我将应用于 xs 的函数将是 (add _ basetree)，其中 _ 将是 xs 的每个元素，而基树将是具有一个元素 x 的树。然后 foldr 只会将该函数应用于 xs 的每个元素。我不确定出了什么问题，但这给了我一个错误。

```
*** Expression     : foldr1 (add x (add x Empty)) xs
*** Term           : add x (add x Empty)
*** Type           : BST
*** Does not match : [Char] -> [Char] -> [Char] 
```

```
data BST = MakeNode BST String BST
           | Empty

add :: String -> BST -> BST

listToTree :: [String] -> BST
listToTree (x:xs) = foldr (add x (add x Empty)) xs -- Here*** 
```

如果有人可以帮助我，那就太好了。我花了将近 3 个小时试图弄清楚这个文件夹已经..

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-28T23:01:08.537

正如 Gabriel 在评论中所说，您正在以一种非常不寻常的方式将手动递归（模式匹配`(x:xs)`）与`foldr`。通常您想使用*手动*递归，或者`foldr`在递归遵循“重复将函数应用于列表的元素直到用尽列表”的模式的情况下使用。

我假设你的`add`函数看起来像这样：

```
add :: String -> BST -> BST
add string Empty            = MakeNode Empty string Empty
add string (MakeNode l s r) =
    if string < s
        then MakeNode (add string l) s r
        else MakeNode l s (add string r) 
```

有了这个，该函数`listToTree`通常会以两种方式之一编写。首先是使用模式匹配和递归：

```
listToTree []     = Empty
listToTree (x:xs) = add x (listToTree xs) 
```

也就是说，要么你有一个空列表，在这种情况下你返回空树，或者你有一个头后跟一个尾，在这种情况下，你将列表的头部添加到列表尾部返回的树中。

另一种方法是`listToTree`通过折叠列表来编写。这为您抽象出递归，这样您就可以编写

```
listToTree = foldr add Empty 
```

这是有效的，因为`foldr`有类型

```
foldr :: (a -> b -> b) -> b -> [a] -> b 
```

并且`add`有`Empty`类型

```
add   :: String -> BST -> BST
Empty :: BST 
```

专门化类型`a`和`b`，你得到

```
foldr :: (String -> BST -> BST) -> BST -> [String] -> BST 
```

意思就是

```
foldr add Empty :: [String] -> BST 
```

您应该更喜欢哪一个？也许第一个对于初学者来说更容易阅读和理解。然而，随着您获得更多使用 Haskell 的经验，您会发现第二个版本变得更容易理解。它也更简洁，而且它是以折叠的形式编写的这一事实允许更频繁地触发列表融合规则，这可能会产生更高效的代码。

## 了解文件夹

在我看来，理解折叠的关键是要意识到折叠会用你给它的任何函数和常量替换列表构造函数。在 Haskell 中，列表有两种可能的构造函数：

```
[]  :: [a]
(:) :: a -> [a] -> [a] 
```

当您对所有语法进行脱糖处理时，列表实际上看起来像这样（这是有效的 Haskell - 试试看！）

```
xs = 1 : 2 : 3 : [] 
```

当您调用`foldr op x0 xs`时，折叠有效地将所有`(:)`构造函数`xs`替换为`op`，并将所有`[]`构造函数替换为`x0`：

```
foldr op x0 xs = 1 `op` 2 `op` 3 `op` x0 
```

当然，这里有一个歧义，因为我们不知道是`op`左联还是右联。为了使类型起作用，您必须提供一个与右侧关联的函数（这就是它被称为*右*折叠的原因），如下所示：

```
foldr op x0 xs = 1 `op` (2 `op (3 `op` x0)) 
```

左折叠是相同的，除了它关联到左侧（并将初始值放在列表的开头而不是结尾）所以你最终得到

```
foldl op x0 xs = ((x0 `op` 1) `op` 2) `op` 3 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-28T22:57:28.027

看起来你想要：

```
listToTree = foldr add Empty 
```

`foldr`有类型`(a -> b -> b) -> b -> a`

所以它需要和累加器函数和一个初始值。`Empty`是您的初始树值，并`add`在给定元素和现有树的情况下构造一棵新树。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-28T22:55:09.063

foldr 的类型是

```
(a -> b -> b) -> b -> [a] -> b, 
```

即它接受一个函数，该函数接受ab，和一个[a] 的列表，并返回a b。现在添加这里是

```
(String -> BST -> BST), 
```

所以它变成了

```
(String -> BST -> BST) -> BST -> [String] -> BST, 
```

现在，我无法编译它，因为我没有添加功能，但我相信

```
listToTree (x:xs) = foldr add (add x (add x Empty)) xs 
```

会成功的。它的类型签名至少是相同的。现在这应该将列表的开头添加两次，但是您的 Add 函数可能会忽略重复项？如果你能包括它会更好，这样我们就可以进一步调查它。

# java - Java JFrame 的大小不准确

> ID：15147046
> 
> 赞同：0
> 
> 时间：2013-02-28T22:38:42.803
> 
> 标签：java, swing, concurrency, jframe, paint

我正在尝试对游戏进行编程，但我无法准确地制作我需要的大窗口。第一个 println 给我 720 和第二个 732 并且窗口真的比 720 大。我怎样才能使游戏显示精确到 720 像素高？

xCopterGame.java

```
import javax.swing.JFrame;
import java.awt.Dimension;
import java.awt.event.*;

public class xCopterGame extends JFrame implements MouseListener{

  private static final long serialVersionUID = 1L;

  Board panel=null;
  public xCopterGame(){
    panel = new Board();
    setTitle("Pong");
    setDefaultCloseOperation(DISPOSE_ON_CLOSE);
    panel.setPreferredSize(new Dimension(1280,720));
    getContentPane().add(panel);
    pack();
    setLocationRelativeTo(null);
    setVisible(true);
    setResizable(false);

    System.out.println(panel.getHeight());

    panel.yCopter = getHeight()/2-15;

    panel.addMouseListener(this);
    addMouseListener(this);
  }

  public void mousePressed(MouseEvent e) {
    panel.mousePressed(e);
  }

  public void mouseReleased(MouseEvent e) {
    panel.mouseReleased(e);
  }

  public static void main(String[] args) {
    new xCopterGame();
  }

  public void mouseClicked(MouseEvent e) {

  }
  public void mouseEntered(MouseEvent e) {

  }
  public void mouseExited(MouseEvent e) {

  }
} 
```

Board.java

```
import java.awt.Color;
import java.awt.Graphics;
import java.awt.event.MouseEvent;
import javax.swing.JPanel;

public class Board extends JPanel implements Runnable{
  private static final long serialVersionUID = 1L;

  Thread th=null;
  boolean mousePressed = false, firstClick = false;
  int yCopter;

  public Board(){
    th = new Thread(this);
    th.start();
  }

  public void paint(Graphics g){
    super.paint(g);
    this.setBackground(Color.black);
    g.setColor(Color.white);
    g.fillRect(80, yCopter, 30, 30);

    g.setColor(Color.gray);
    for(int i=0; i<37; i++){
      g.drawLine(0, i*20, this.getWidth(), i*20);
    }

    g.fillRect(100, 715, 30, 5);
    g.fillRect(100, 0, 30, 5);       
    System.out.println(this.getHeight());
  }

  public void run() {
    while(true){
      if(mousePressed == true)
        yCopter--;
      if(mousePressed == false && firstClick == true)
        yCopter++;

   //   repaint();

      try { 
        Thread.sleep(10); 
      } 
      catch(InterruptedException ex) {

      }
    }
  }

  public void mousePressed(MouseEvent e) {
    mousePressed = true;
    firstClick = true;
  }
  public void mouseReleased(MouseEvent e) {
    mousePressed = false;
  }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-28T23:26:38.463

`setResizable()`可能会影响框架的插图。最好在`setResizable()`. 试试这个调用顺序：

```
setResizable(false);
pack();
setVisible(true); 
```

供参考，请参阅@HovercraftFullOfEels 的[分析](https://stackoverflow.com/a/14988318/1048330)

您可能还会发现[我应该避免在 Java Swing 中使用 set[Preferred|Maximum|Minimum]Size 方法吗？](https://stackoverflow.com/q/7229226/1048330)有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T23:26:29.747

我注意到您只是在设置`Board`首选尺寸。如果你想为你的窗口强制一个特定的大小，你可以简单地调用`JFrame.setSize()`you的方法`xCopterGame`。

我鼓励你看看这个[链接](http://docs.oracle.com/javase/tutorial/uiswing/layout/problems.html)。当您使用`LayoutManager`.

# grails - jquery dataTables dataTables.spanish.txt grails

> ID：15147047
> 
> 赞同：0
> 
> 时间：2013-02-28T22:38:42.950
> 
> 标签：grails, datatables

我是 grails 的新手（嗯，对所有编程都是新手），但经过一些研究，我决定尝试使用 grails 进行 groovy。

目前我正在努力尝试将数据表与 grails 一起使用......我有一个 DataTable 的下一个初始化代码，它在 php 上运行良好，但是当我将它插入我的 grails 应用程序时，它会自动为我为我的 dataTables.spanish.txt 文件指定的目录，保持我的 DataTable 实例被正确初始化。

¿ 有谁知道我必须如何指定目录才能在 grails 上正常运行？

我的文件位于：/js/tbl/dataTables.spanish.txt

但是当服务器启动时，它将 de 目录解析为 Myapp/ **project** /js/tbl/dataTables.spanish.txt

Project 是我的域类的名称，该类的视图位于该文件夹中...我希望使该文件独立于视图，因为我想将它用于多个视图。

我的代码目前如下（我不得不注释文件的行以避免错误）：

```
 $(document).ready(function() {
    oTable = $('#example').dataTable({
        "bJQueryUI": true,
        "bSortClasses": false,
        "sPaginationType": "full_numbers",
        "sDom": '<"H"lf>t<"F"Tip>',
        "oTableTools": {
           "aButtons": [
                    {
                        "sExtends":    "csv",
                        "sButtonText": "Exportar"
                    }
                ]
            },
            "bAutoWidth": true,
            "aLengthMenu": [[10, 20, 50, 100,-1], [10, 20, 50, 100,               "Todos"]],
            "iDisplayLength" : 20,
            "oLanguage": {
                             //"sUrl": "/js/tbl/dataTables.spanish.txt"
                }
            });

    }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T18:42:16.243

Grails 使用[Resources 插件](http://grails-plugins.github.com/grails-resources/)来组织 js 和 css 文件。所以第一步是在**ApplicationResources.groovy中将 DataTables 所需的文件声明为资源**

```
modules = {
  dataTables {
    resource url: '/js/tbl/jquery.dataTables.min.js'
    resource url: '/js/tbl/css/jquery.dataTables.css'
  }
} 
```

之后，您可以在 GSP 中要求该模块

```
<r:require module="dataTables" /> 
```

然后声明初始化表的 javascript。

```
<r:script>
$(document).ready(function() {
  $('#example').dataTable();
});
</r:script> 
```

都工作了吗？现在您可以编辑 dataTable 的选项以满足您的需要。您将西班牙语 txt 文件存储在 js 中，因此您需要在应用程序运行时使用资源来查看文件的位置。

改变

```
"oLanguage": {
  "sUrl": "/js/tbl/dataTables.spanish.txt"
} 
```

至

```
"oLanguage": {
  "sUrl": "${resource(dir: 'js/tbl/', file: 'dataTables.spanish.txt')}"
} 
```

有一个[很好的截屏视频](http://www.youtube.com/watch?feature=player_embedded&v=HCUJuGXZ9A0#!)将向您展示资源是如何工作的。

# java - v3 中的 StringTemplate.setAttributes(Object) v4 中的等价物是什么？

> ID：15147050
> 
> 赞同：0
> 
> 时间：2013-02-28T22:38:56.760
> 
> 标签：java, stringtemplate

v4 提供了一个 API：ST.add(String, Object)。我在 v4 中找不到 v3 API setAttributes(Object)。

我使用了 ST.add("root", JSONObject)。出现异常：

```
java.lang.IllegalArgumentException: no such attribute: root
        at org.stringtemplate.v4.ST.add(ST.java:223)
        at jjs.stst.STStandaloneTool.invokeTemplate(STStandaloneTool.java:479)
        at jjs.stst.STStandaloneTool.generate(STStandaloneTool.java:420)
        at jjs.stst.STStandaloneTool.main(STStandaloneTool.java:722) 
```

帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-17T20:03:38.040

add("root", JSONObject) 应该可以工作，但是在模板中声明了 "root" 桅杆，例如 "mytemplate(root) ::= <>\n";

# android - 扩展 SearchActionItem 而不添加到 backstack

> ID：15147051
> 
> 赞同：2
> 
> 时间：2013-02-28T22:38:58.017
> 
> 标签：android

我有一个搜索结果页面活动，在操作栏中有一个 SearchView 小部件。在 onCreateOptionsMenu() 中，我自动展开它并显示如下查询：

```
@Override
public boolean onCreateOptionsMenu(Menu menu) {
    getMenuInflater().inflate(R.menu.search_menu, menu);
    MenuItem searchMenuItem = (MenuItem) menu.findItem(R.id.menu_search);
    SearchView searchView = (SearchView)searchMenuItem.getActionView();
    searchView.setOnQueryTextListener(this);
    searchMenuItem.expandActionView(); // expand the search item
    searchView.setQuery(query, false); // hide the keyboard
    searchView.clearFocus();
    return true;
} 
```

主页按钮设置如下：

```
@Override
public boolean onOptionsItemSelected(MenuItem item) {
    switch (item.getItemId()) {
    case android.R.id.home:
        finish();
        break;
    default:
        break;
    }
    return super.onOptionsItemSelected(item);
} 
```

但是当用户点击后退或向上按钮时，搜索首先关闭，然后您必须再次按下以关闭活动。如何强制 Activity 立即完成？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T23:02:45.960

`finish()`您可以做的一件事是`Activity`，一旦`SearchView`通过实施以下方法折叠起来`OnActionExpandListener`：

```
searchMenuItem.setOnActionExpandListener(new OnActionExpandListener() {
  @Override
  public boolean onMenuItemActionCollapse(MenuItem item) {
    finish();
    return true;      
  }
  @Override
  public boolean onMenuItemActionExpand(MenuItem item) {  
    return true;      
  }
}); 
```

# asp.net-mvc - 从父母的孩子那里获取字符串列表

> ID：15147053
> 
> 赞同：0
> 
> 时间：2013-02-28T22:39:16.197
> 
> 标签：asp.net-mvc, asp.net-mvc-3, asp.net-mvc-2, asp.net-mvc-4

我有父母和孩子，孩子有名字。我正在尝试从包含每个给定父母子女的名称的父母那里获取字符串列表。就像是：

```
List<string> Names = Parent.Children.Foreach(child => "add child.name to array"); 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T22:41:53.067

使用选择

```
List<string> Names = Parent.Children.Select(child => child.Name).ToList(); 
```

# symfony - Symfony2 中的多个子表单映射到现有数据

> ID：15147054
> 
> 赞同：1
> 
> 时间：2013-02-28T22:39:20.197
> 
> 标签：symfony

我正在为我的 Symfony2 项目创建一个月度发票模块。我试图为用户提供一个表单，其中列出了当前发票期间的所有员工，每个员工有两个输入字段。与电子表格类似，每一行都有员工姓名，然后是一个字段，用于输入他们的个人小时费率和当月的总工作时间。

这是实体定义（为简洁起见仅发布相关字段）

```
class EmployeeRecords
    $id (auto-increment)
    $name_first
    $name_last

class Invoice
    $id (auto-increment)
    $invoice_date (datetime)
    $attendance (Doctrine mapped to InvoiceAttendance)

class InvoiceAttendance
    $id (auto-increment)
    $invoice_fk (Doctrine mapped to Invoice)
    $employee_fk (Doctrine mapped to EmployeeRecords)
    $hours
    $hourly_rate 
```

我为 InvoiceAttendance 实体创建了 FormAttendance 表单类型

```
$builder->add('hours', 'number', array('precision' => 4));
$builder->add('hourly_rate', 'money', array('currency' => 'USD', 'precision' => 4));
...
$resolver->setDefaults(
    array(
        'data_class' => 'Entity\InvoiceAttendance')); 
```

我考虑过构建一个 FormInvoiceAttendance 类来充当“超级表单”，它为每个员工保存 FormAttendance 子表单的集合。但所做的只是创建一个员工考勤表的“空白”实例，它不会将这些值与任何现有员工相关联。

```
$builder->add('attendance', 'collection', array('type' => new FormAttendance())); 
```

* * *

理论上，整个过程如下：

1) 用户在系统中创建新发票，为发票指定日期（连同其他一般信息）。

2）一旦创建，用户可以进入表格输入发票期间员工的考勤（这是“电子表格”类型的表格）。

3）电子表格表格的每一行本质上都是FormAttendance类型，应该映射到对应的员工。

4) 用户提交表单并进行各种计算。最终，InvoiceAttendance 值的集合将持久保存到数据库中的 InvoiceAttendance 表中，并且更新数据库中 Invoice 表的总值。

* * *

我之前使用过“集合”表单类型来动态地将子表单添加到表单集合中，但是当“集合”的数据“源”预先存在时，我似乎对这个想法感到困惑。

我已经探索了几个可能的解决方案......但似乎没有一个能让我克服在一个表单中多次嵌入子表单的基本障碍。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T17:46:59.543

睡了一夜好觉……这个挑战其实无非就是使用集合表单类型。我完全忘记了您可以从 twig 中访问链接到表单类型的域对象。

**发票控制器**

```
$roster // ArrayCollection of EmployeeRecord domain objects

foreach($roster as $employee) {
    $attendance = new InvoiceAttendance();
    $attendance->setEmployeeFk($employee);
    $invoice->getAttendance()->add($attendance);
} 
```

**出勤.html.twig**

```
{% for employee in form.attendance %}
    {{ employee.vars.value.employeeFk.nameFirst }} {{ employee.vars.value.employeeFk.nameLast }}
    {{ form_widget(employee.hourlyRate) }}
    {{ form_widget(employee.hours) }}
{% endfor %} 
```

# python - Scrapy 不会抓取所有页面

> ID：15147057
> 
> 赞同：3
> 
> 时间：2013-02-28T22:39:32.187
> 
> 标签：python, scrapy

这是我的工作代码：

```
from scrapy.item import Item, Field

class Test2Item(Item):
    title = Field()

from scrapy.http import Request
from scrapy.conf import settings
from scrapy.selector import HtmlXPathSelector
from scrapy.contrib.linkextractors.sgml import SgmlLinkExtractor
from scrapy.contrib.spiders import CrawlSpider, Rule

class Khmer24Spider(CrawlSpider):
    name = 'khmer24'
    allowed_domains = ['www.khmer24.com']
    start_urls = ['http://www.khmer24.com/']
    USER_AGENT = "Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/537.22 (KHTML, like Gecko) Chrome/25.0.1364.97 Safari/537.22 AlexaToolbar/alxg-3.1"
    DOWNLOAD_DELAY = 2

    rules = (
        Rule(SgmlLinkExtractor(allow=r'ad/.+/67-\d+\.html'), callback='parse_item', follow=True),
    )

    def parse_item(self, response):
        hxs = HtmlXPathSelector(response)
        i = Test2Item()
        i['title'] = (hxs.select(('//div[@class="innerbox"]/h1/text()')).extract()[0]).strip(' \t\n\r')
        return i 
```

它只能废弃 10 或 15 条记录。总是随机数！我无法获取所有具有类似[http://www.khmer24.com/ad/any-words/67-anynumber.html模式的页面](http://www.khmer24.com/ad/any-words/67-anynumber.html)

我真的怀疑 Scrapy 由于重复请求而完成了爬网。他们建议使用`dont_filter = True`但是，我不知道将它放在我的代码中的哪个位置。

我是 Scrapy 的新手，真的需要帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-05T05:46:39.463

1.“他们建议使用**dont_filter = True**但是，我不知道将它放在我的代码中的哪个位置。”

该参数在 CrawlSpider 继承自的 BaseSpider 中。( [scrapy/spider.py](https://github.com/scrapy/scrapy/blob/master/scrapy/spider.py#L54) ) 默认设置为 True。

2.“只能报废10条或15条记录。”

*原因*：这是因为**start_urls**不是很好。在这个问题中，蜘蛛开始在[http://www.khmer24.com/](http://www.khmer24.com/)中爬行，让我们假设它有 10 个要跟踪的 url（满足模式）。然后，蜘蛛继续抓取这 10 个网址。但是由于这些页面包含的满意模式太少，蜘蛛会跟随几个 url（甚至没有 url），这导致停止爬行。

*可能的解决方案*：我上面所说的原因只是重申*了 icecrime*的观点。解决方案也是如此。

*   建议使用“所有广告”页面作为**start_urls**。（您也可以将主页用作**start_urls**并使用新**规则**。）

*   新**规则**：

    ```
    rules = (
        # Extract all links and follow links from them 
        # (since no callback means follow=True by default)
        # (If "allow" is not given, it will match all links.)
        Rule(SgmlLinkExtractor()), 

        # Extract links matching the "ad/any-words/67-anynumber.html" pattern
        # and parse them with the spider's method parse_item (NOT FOLLOW THEM)
        Rule(SgmlLinkExtractor(allow=r'ad/.+/67-\d+\.html'), callback='parse_item'),
    ) 
    ```

参考： [SgmlLinkExtractor](https://scrapy.readthedocs.org/en/latest/topics/link-extractors.html?highlight=allow#sgmllinkextractor) , [CrawlSpider 例子](http://doc.scrapy.org/en/latest/topics/spiders.html#crawlspider-example)

# c++ - 取消引用与数组访问

> ID：15147058
> 
> 赞同：0
> 
> 时间：2013-02-28T22:39:34.427
> 
> 标签：c++, gcc

我有一个带有这个成员函数的类；

```
void AddTo(vertex** vrtList) {
  if(*vrtList != 0) {
    *vrtList->m_vrtLast = this;
  }
  m_vrtNext = *vrtList;  // save existing list, if any
  m_vrtLast = 0;
  *vrtList = this;
} 
```

gcc 给了我一个错误信息；

> 错误：请求'* vrtList'中的成员'm_vrtLast'，它是非类类型'vertex*'</p>

如果我替换`*vrtList->m_vrtLast`为`vrtList[0]->m_vrtLast`，编译器会接受它，并且代码可以正常工作。

这是一个错误（在 gcc 中）还是一个特性（在 C/C++ 中）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-28T22:43:40.863

这不是错误，而是由于[运算符优先级](http://en.cppreference.com/w/cpp/language/operator_precedence)。运算符`->`的优先级高于`*`所以 `*vrtList->m_vrtLast`与 相同`*(vrtList->m_vrtLast)`，这不是您想要的。

`[]`并且`->`具有相同的优先级，但从左到右读取，因此在.`[]`之前遇到`->`.

使用`[]`或`(*vrtList)->m_vrtLast`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-28T22:42:40.330

这是关于 的优先级`operator*`。

`*vrtList->m_vrtLast`不等于，`(*vrtList)->m_vrtLast`而是等于`*(m_vrtList->m_vertLast)`。

所以你必须相应地添加括号。

# objective-c - 从数组中获取对象名称

> ID：15147060
> 
> 赞同：0
> 
> 时间：2013-02-28T22:39:47.463
> 
> 标签：objective-c

有一系列瓷砖

```
tileArray = [[NSMutableArray alloc]initWithObjects:tile1,tile2,tile3,tile4,tile5,tile6,tile7,tile8,tileBlank, nil]; 
```

是否可以以字符串的形式拉出数组中的对象？例如，tileArray[2] 将返回“tile3”。

编辑：而不是试图以字符串的形式返回一个对象，我只需要检查以查看正确位置的数量。例如，我想查看其中有多少匹配。在这种情况下，将有 7 个正确。

```
tileArray = [[NSMutableArray alloc]initWithObjects:tile1,tile2,tile3,tile4,tile5,tile6,tile7,tile8,tileBlank, nil];

tileArrayCopy = [[NSMutableArray alloc]initWithObjects:tile1,tile2,tile3,tile4,tile5,tile6,tile7,tileBlank,tile8, nil]; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T22:41:28.340

实例变量名称被编译器修改和删除。您可以使用实例的支持字典来命名，例如 AutoLayout 使用`NSDictionaryOfVariableBindings()`宏很容易做到。

如果你想要两个数组的逆相交，你必须首先保证它们包含相同的对象，然后你可以调用`-removeObjectsInArray:`NSMutableArray 来获取目标数组唯一的对象。

对于其他一切，可以使用 NSMutableSet`-unionSet`来获取每个集合的所有唯一对象的计数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T22:42:51.860

不，一个对象不能知道引用它的变量的名称。特别是因为许多变量可能指向该对象。

相反，对象应该有一些额外的代码来返回它自己的名字。比如说，通过添加一个`-(NSString*)name;`方法。

# c# - 当我将其保存为图像时，zedgraph 不会显示条形图

> ID：15147061
> 
> 赞同：0
> 
> 时间：2013-02-28T22:39:48.073
> 
> 标签：c#, zedgraph

我正在尝试另存为我的程序创建的 zedgraph 图。问题是，当我使用该代码时，它会保存图像，但只显示条形顶部的标签......没有显示条形。

```
 chart1.SaveAs(); 
```

我错过了什么吗？

创建图表的代码：

```
GraphPane myPane = chart1.GraphPane;
        myPane.XAxis.Scale.Format = "F0";
        //create the bars
        BarItem myCurve = myPane.AddBar("Width", pointPairListWidth, Color.Black);
        myCurve.Bar.Fill.Type = FillType.Solid;
        BarItem myCurve2 = myPane.AddBar("Height", pointPairListHeight, Color.Gray);
        BarItem.CreateBarLabels(myPane, false, "f0");
        chart1.AxisChange();
        chart1.Invalidate();
        chart1.Refresh(); 
```

回答：

```
 chart1.GraphPane.GetImage().Save("pic.jpg"); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T22:57:44.803

你可以试试`zedGraphControl.MasterPane.GetImage().Save("test.bmp")`

**编辑：** 自从我使用 zedGraph 以来很久以前，但是您正在将这些条添加到您的`myPane`-object 中。那你能行`myPane.SaveAs()`吗？

# asp.net-mvc - 在客户端完全呈现 aspx 页面后调用 Async 方法

> ID：15147064
> 
> 赞同：0
> 
> 时间：2013-02-28T22:40:12.753
> 
> 标签：asp.net-mvc, multithreading, asp.net-mvc-4

所以情况就是这样。我有一个显示一些图表的 aspx 页面。数据来自 MVC 4 Web Api Restful 服务。对“图表”服务的每次查询大约需要 30(s)。而不是用户等待每个图表 30 秒（当用户单击按钮时），我想加载和渲染整个空白页面，然后对 Web 服务进行一些调用。

我只是想避免用户“感觉”页面挂起。我宁愿在页面加载时在页面上显示一个加载符号。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T23:17:04.187

我认为您应该在没有图表的情况下呈现页面，然后使用 AJAX 异步加载图表。

您还可以放置一个 gif 图像（加载图像），然后当 ajax 调用完成时，您将图像替换为图表

# vba - Excel 2003 中的代码错误

> ID：15147067
> 
> 赞同：3
> 
> 时间：2013-02-28T22:40:48.607
> 
> 标签：vba, excel, excel-2003

我的代码在 excel 2007 中运行得非常好，但在 excel 2003 中没有运行。它给出“编译错误”并且这条线变成红色。

```
 Selection.PasteSpecial Paste:=xlValues, Operation:=xlNone, SkipBlanks:= _ 
```

你的建议会有很大帮助。谢谢。如果您需要我这边的任何信息，请告诉我。

这是我的完整代码：

```
'-------------------------------------
' Create Final Report
'-------------------------------------
Sub FinalReport()
Dim thisWb As Workbook
Set thisWb = ActiveWorkbook
Dim btn, rght As Long
Dim NewWbk As String

NewWbk = "Final_Report"

' Add a new workbook
    Application.Workbooks.Add
    Range("A1").Select
' Rename the workbook
    ActiveWorkbook.SaveAs Filename:=thisWb.Path & Application.PathSeparator & "Final_Report" & ".xls"

    Windows("Tool_01082013.xls").Activate
    Sheets("Reports").Activate

' select the sheet and range to be copied
Range("B2:AO34").Select

' Copy the selected range...
    Selection.Copy
    Workbooks("Final_Report.xls").Sheets("Sheet1").Activate

' and Paste it into the new workbook
    Selection.PasteSpecial Paste:=xlValues, Operation:=xlNone, SkipBlanks:= _
        False, Transpose:=False

Windows("Tool_01082013.xls").Activate
    Sheets("Reports_Month").Activate

' select the sheet and range to be copied
Range("A1:DR34").Select

' Copy the selected range...
    Selection.Copy
    Workbooks("Final_Report.xls").Sheets("Sheet2").Activate

' and Paste it into the new workbook
    Selection.PasteSpecial Paste:=xlValues, Operation:=xlNone, SkipBlanks:= _
        False, Transpose:=False
Workbooks("Final_Report.xls").Save
Workbooks("Final_Report.xls").Close
Windows("Tool_01082013.xls").Activate
    With Sheets("Reports")
        .Activate
        .Range("A5").Select  '-- move focus to the first item
    End With
End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T00:41:12.650

试试这个：

```
'-------------------------------------
' Create Final Report
'-------------------------------------
Sub FinalReport()

    Dim thisWb As Workbook, _
        finalReport as Workbook, _
        toolWB as Workbook
    Set thisWb = ActiveWorkbook
    Dim copyrange As Range

    ' Add a new workbook
    set finalReport = Application.Workbooks.Add
    ' Rename the workbook
    finalReport.SaveAs Filename:=thisWb.Path & Application.PathSeparator & "Final_Report.xls"

    set toolWB = Workbooks("Tool_01082013.xls")
    Set copyrange = toolWB.Sheets("Reports").Range("B2:AO34")
    finalReport.Sheets("Sheet1").Range("A1").Resize(copyrange.Rows.Count, copyrange.Columns.Count).Value = copyrange.Value
    Set copyrange = toolWB.Sheets("Reports_Month").Range("A1:DR34")
    finalReport.Sheets("Sheet2").Range("A1").Resize(copyrange.Rows.Count, copyrange.Columns.Count).Value = copyrange.Value

    finalReport.Save
    finalReport.Close
    Application.Goto toolWB.Sheets("Reports").Range("A5")

End Sub 
```

# hadoop - Hadoop - 减少溢出记录的数量

> ID：15147073
> 
> 赞同：3
> 
> 时间：2013-02-28T22:41:14.507
> 
> 标签：hadoop, hadoop-streaming

我有一个 Ubuntu vm 以独立/伪模式运行，具有 4gb ram 和 4 个内核。

一切都设置为默认值，除了：

```
io.file.buffer.size=65536
io.sort.factor=50
io.sort.mb=500
mapred.tasktracker.map.tasks.maximum=4
mapred.tasktracker.reduce.tasks.maximum=4 
```

这台 ofc 不会是生产机器，但我正在摆弄它以掌握微调。

我的问题是，当我运行基准 Hadoop Streaming 作业时（在 1.8gb 文本文件上获取不同的记录），我得到了很多溢出的记录，而上述调整似乎并没有减少溢出。我还注意到，当我在 Ubuntu 的系统监视器中监控内存使用情况时，它永远不会被完全使用，也永远不会超过 2.2gb。

我看过 chaging `HADOOP_HEAP`，`mapred.map.child.java.opts`但`mapred.reduce.child.java.opts`我不确定将这些设置为什么，因为默认值似乎就足够了。

是否有我遗漏的设置将允许 Hadoop 利用剩余的 ram 从而减少溢出的记录（希望加快工作速度）或者这是正常的行为？

非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T20:59:06.567

分配给 map/reduce 任务的默认内存为 200mb。您可以使用 -Dmapred.child.java.opts=-Xmx512M 增加该值

无论如何，这是一个关于 hadoop tunning [Hadoop Performance的非常有趣的材料](http://www.scribd.com/doc/23046928/Hadoop-Performance-Tuning)

希望能帮助到你！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T21:10:51.287

除了增加内存之外，您是否考虑过是否可以在 map 步骤之后为您的任务运行组合器，这将压缩并减少需要保存在内存中或溢出的记录数量？

不幸的是，当您使用流式传输时，似乎必须用 Java 编码，并且不能使用您使用的任何语言。

[http://wiki.apache.org/hadoop/HadoopStreaming](http://wiki.apache.org/hadoop/HadoopStreaming)

# javascript - jQuery插件不触发更正keydown或空闲事件

> ID：15147078
> 
> 赞同：0
> 
> 时间：2013-02-28T22:41:31.887
> 
> 标签：javascript, jquery, jquery-plugins, jquery-events

我正在编写一个跟踪特定事件的 jQuery 插件。我提供了 2 个 JSFiddle 示例，用于在问题结束时提供帮助。

我正在努力理解为什么 2 个特定事件没有触发。第一个函数跟踪用户何时触发或字段中的`backspace`或`delete`键。代码：`input``textarea`

```
// Keydown events
$this.keydown(function (e) {
    var keyCode = e.keyCode || e.which;

    // Tab key
    if (e.keyCode === 9) {
        alert('tab key');
    } else if (e.keyCode === 8 || e.keyCode === 46) { // Backspace and Delete keys
        if ($this.val() !== '') {
            alert('Backspace or delete key');
        }
    }
}); 
```

我只希望在字段不为空时跟踪纠错键。上面示例中的`tab`键在条件语句中按预期工作。`backspace`和键在`delete`插件内部并以焦点元素为目标时不起作用。

* * *

第二个未触发的事件是跟踪用户是否空闲。它使用[jQuery 空闲计时器插件](https://github.com/mikesherov/jquery-idletimer/blob/master/src/idle-timer.js "jQuery 空闲计时器插件 [托管在 Github 上]")来操作焦点元素。

```
// Idle event
$this.focus(function() {
    $this.idleTimer(3000).bind('idle.idleTimer', function() {
        alert('Gone idle');
    });
}).focusout(function() {
    $this.idleTimer('destroy');
}); 
```

通过这两个事件，我重构了代码。它们在插件之外并且有针对性`$('input, select, textarea')`并按预期工作。我已将它们带入插件中，并将它们设置`$(this)`为操作当前焦点所在的元素。对于大多数功能，这可以正常工作，但是这两个被证明是有问题的。

* * *

第一个 JSFiddle 带有插件内的 2 个函数。`tab`有效，而校正键无效。奇怪的是，在这个例子中，空闲函数正在触发（它不在我的开发环境中）。由于这在 JSFiddle 中工作，我接受这可能难以解决。也许关于在我自己的内部处理外部插件来解决这个问题的建议？

[小提琴 1](http://jsfiddle.net/digikev/aSys2/)

第二个 JSFiddle 已经在插件和目标之外采用了`backspace`和关键功能，现在可以工作了。`delete``$('input, select, textarea')`

[小提琴 2](http://jsfiddle.net/digikev/sDmVf/1/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T22:50:00.013

对于小提琴1：

```
if ($this.val() !== '') {
        alert('Backspace or delete key');
} 
```

看看`$this`实际是什么。

# jquery - 对 en-GB 日期进行不显眼的验证

> ID：15147080
> 
> 赞同：6
> 
> 时间：2013-02-28T22:41:47.170
> 
> 标签：jquery, asp.net-mvc, asp.net-mvc-4, unobtrusive-validation, jquery-globalization

我正在使用具有日期类型输入的 asp.net MVC4 设计数据输入表单。

在 chrome 和 jQueryUI datepicker 中使用不显眼的 jQuery 库，在选择正确的日期格式、使用 datepicker（即 2013 年 2 月 14 日）并提交表单后，我仍然遇到错误（字段 news_date 必须是日期。）。

一些[搜索](http://blog.brainnovative.com/2010/12/globalizing-aspnet-mvc-unobtrusive.html)建议我应该使用 jQuery.globilization 库。因此，在阅读[文档](https://github.com/jquery/globalize#parseDate)后，我添加了对以下脚本的引用。

```
$(document).ready(function () {
    $.culture = Globalize.culture("en-GB");
    $.validator.methods.date = function (value, element) {
        return this.optional(element) || Globalize.parseDate(value, "dd/MM/yyyy", "en-GB");
    }
}); 
```

但是我仍然收到错误

如果我在 chrome 中调试上面的代码，我可以看到 "value) 的值是 "2014-02-14"。

下面是被渲染的html。

```
<div class="editor-field">

<input class="text-box single-line datepicker hasDatepicker input-validation-error" data-val="true" data-val-date="The field news_date must be a date." id="news_date" name="news_date" type="date" value="">
<script type="text/javascript">
    $(function () {
        $(".datepicker").datepicker({ dateFormat: "dd/MM/yyyy" });
    });
    </script>
            <span class="field-validation-error" data-valmsg-for="news_date" data-valmsg-replace="true"><span for="news_date" class="" style="">The field news_date must be a date.</span></span>
        </div> 
```

**更新**：顺便说一下，如果我将验证器方法更改为硬编码。IE

```
$.validator.methods.date = function (value, element) {
    return this.optional(element) || Globalize.parseDate("14/03/2014", "dd/MM/yyyy", "en-GB")
} 
```

有用。因此，它肯定是日期在 POST 或提交验证之前存储在页面上的格式，这是问题所在。

**如果我在 chrome 控制台中运行，选择日期后**更新**`$('#news_date').val()`，我得到“2014-02-14”，我可以调试我的脚本并查看传递给验证器方法的值，它是这个值，因此它与英国日期不匹配格式因此返回一个空值，而不是一个可以通过验证的值。那么日期选择器在选择后如何存储日期是我的问题吗？**

 **有没有人在 Chrome 中找到解决方法？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-02T09:23:46.880

此解决方法似乎可以处理 chrome 和 ie 等。在 chrome 中，我无法输入错误的日期，因此日期选择器会给我一个有效的日期，当它将它传递给验证器函数时，它将采用 yyyy-mm-dd 格式。即让我直接输入输入或使用选择器，输入一个无效的日期，即 2/30/2013（在 en-GB 文化中无效）它正确地使其无效并阻止进一步的进展。如果没有更好的建议，我认为这是最好的可行答案

```
$(document).ready(function () {
$.culture = Globalize.culture("en-GB");
$.validator.methods.date = function (value, element) {
    //This is not ideal but Chrome passes dates through in ISO1901 format regardless of locale 
    //and despite displaying in the specified format.

    return this.optional(element)
        || Globalize.parseDate(value, "dd/mm/yyyy", "en-GB")
        || Globalize.parseDate(value, "yyyy-mm-dd");
}}); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-01T03:26:59.337

*我可以建议你另一种解决方法，把它放在你的 web.config 中以避免不同的文化设置问题。*

```
<globalization requestEncoding="utf-8" responseEncoding="utf-8" culture="en-GB" uiCulture="en-GB"/> 
```

在 Jquery datepicker 中这就足够了，

```
 $(function () {
        $(".datepicker").datepicker({ dateFormat: "dd/MM/yyyy" });
 }); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-11-26T10:55:08.407

```
$(function () {
        $(".datepicker").datepicker({ dateFormat: 'dd/mm/yy' });
 }); 
```**

# c - 在文件中查找字符串并在 C 中将其设置为另一个

> ID：15147084
> 
> 赞同：0
> 
> 时间：2013-02-28T22:41:55.220
> 
> 标签：c, string, file, input, copying

所以我有一个文件，其中包含这一行“ 1301,105515018,"Boatswain","Michael R.",CSE, 230,="R01" " 我想获取每个元素，用逗号分隔，然后存储将其放入我的结构数组中的相应变量中。我到了这条线...

```
while (fscanf(inputf, "%d,%d,%s\n", &term, &id, lastname) == 3){

    students[0].term = term;
    students[0].id = id;
    students[0].lastname = lastname;

} 
```

所以首先我知道最后一行是行不通的，但为了帮助阐明我正在寻找的内容，我将其保留原样。我正在使用 VC++，显然 strcopy 不存在？所以，我想知道还有哪些其他选项可供我使用，我在想一个 for 循环，可以吗？不过，在姓是名之后，有一个小问题，而且这两个都可以包含最多 15 个字符，包括空格。当我打印出姓氏变量时，它打印了姓氏，包括名字的开头，总共最多 15 个字符。我没有尝试解决这个问题，因为好吧......我不知道如何在 while 循环条件旁边的引号之间找到字符串。

# c# - Request.ServerVariables 抛出 NullReferenceException

> ID：15147093
> 
> 赞同：7
> 
> 时间：2013-02-28T22:42:38.730
> 
> 标签：c#, asp.net, asp.net-mvc, asp.net-mvc-3, iis-express

我有一个 MVC3 应用程序，它突然给了我一些奇怪的行为。首先是一些背景知识（尽管我会尽量简短）。

在我的控制器操作中，我有以下代码：

```
public ActionResult Grid(ApplicationViewModel search = null)
{
    return this.ListView(
        this.Find<Entity>(),
        this.CreateViewModel,
        mixins: new Dictionary<string, Func<EntityViewModel, object>>()
        {
            { "Icon", vm => Url.Content("~\Images\entityType.png") },
            { "Link", vm => Url.Action("Details", vm.ControllerId) }
        });
}

EntityViewModel CreateViewModel(Entity entity);

// Inherited base class methods
protected IQueryable<T> Find<T>(); // Find T entities in DB

protected ListViewResult<TModel, TViewModel> ListView<TModel, TViewModel>(
    IQueriable<TModel> entityQuery, 
    Func<TModel, TViewModel> materializeViewModel,
    IDictionary<string, Func<TViewModel, object>> mixins); 
```

此控制器操作隐藏了大量复杂的逻辑，因为它是专门为格式化 JSON 列表而设计`ListViewResult`的自定义结果。`ActionResult`

```
public class ListViewResult<TModel, TViewModel> :
    ActionResult
{
    public IQueryable<TModel> ViewData { get; set; }
    public Func<TModel, TViewModel> Materialize { get; set; }
    public Dictionary<string, Func<TViewModel, object>> Mixins { get; private set; }

    ...

    public override void ExecuteResult(ControllerContext context)
    {
        // Perform sorting / paging / formatting on IQueryable

       ...

        var viewModels = this.ViewData.Select(this.Materialize);
        try
        {
            // another custom ActionResult for formatting JSON responses
            new JsonNetResult()
            {
                Data = viewModels.ToArray(),
                SerializerSettings = new JsonSerializerSettings()
                {
                    ContractResolver = new MixinContractResolver() 
                    {
                        Mixins = this.Mixins
                    }
                }
            }.ExecuteResult(context);
        }
        catch (Exception e)
        {
            context.HttpContext.Response.StatusCode = 500;
            context.HttpContext.Response.StatusDescription = e.Message;
        }
    }

    private class MixinContractResolver :
        CamelCasePropertyNamesContractResolver
    {
        public Dictionary<string, Func<TViewModel, object>> Mixins { get; set; }

        private List<JsonProperty> CreateProperties(Type type, MemberSerialization memberSerialization)
        {
            List<JsonProperty> props = // get base properties
            foreach (var pair in this.Mixins)
            {
                props.Add(new JsonProperty()
                {
                    Ignored = false,
                    NullValueHandling = NullValueHandling.Include,
                    Readable = true,
                    PropertyName = Inflector.Camelize(pair.Key),
                    PropertyType = typeof(object),
                    ValueProvider = new DelegateValueProvider<TViewModel, object>(pair.Value),
                    Writable = false,
                });
            }
        }
    }

    private class DelegateValueProvider<T, R> :
        Newtonsoft.Json.Serialization.IValueProvider
    {
        private readonly Func<T, R> func;

        public DelegateValueProvider(Func<T, R> func)
        {
            this.func = func;
        }

        public object GetValue(object target)
        {
            return (R)this.func((T)target);
        }

        public void SetValue(object target, object value)
        {
            throw new NotSupportedException();
        }
    }
} 
```

现在，似乎偶尔会`NullReferenceException`在线路上抛出a`vm => Url.Content(...)`和`vm => Url.Action(...)`. 这并不*总是*发生，但如果我刷新几次，我可以可靠地重现它。

**更新**

在源代码中挖掘了一段时间后，我相信我已经发现了有问题的代码。问题似乎出在`UrlRewriterHelper.WasThisRequestRewritten`调用`ServerVariables.Get("IIS_WasUrlRewritten")`. 似乎该方法使用了一个名为的私有字段`_request`，该字段`null`位于代码中（出于某种原因）。我最好的猜测是，在动作返回和结果执行之间的一段时间内，`ServerVariables`集合要么失去它对的内部引用`_request`——*要么*——在`ServerVariables`没有有效引用的情况下重新创建集合`_request`。

我也意识到这可能是 IIS Express 的问题。在 Visual Studio 开发服务器下运行时，我无法复制该问题。我更新了标签以反映最可能的原因。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-28T01:18:09.477

我刚刚在使用 IIS Express 时遇到了同样的问题，发现这是因为我已将 URL 重写扩展安装到 IIS，然后将其卸载，但它在 IIS Express 的 applicationhost.config 文件中留下了一些配置。(C:\Users\\Documents\IISExpress\config\applicationhost.config)

我只是注释掉了该文件中的相关行，杀死了 IIS Express 并重新运行，我再也没有看到这个问题。

我注释掉的两行在下面的代码段中进行了注释。

```
<configuration>
    ...
    <system.webServer>
        ...
        <globalModules>

           <!--<add name="RewriteModule" image="%IIS_BIN%\rewrite.dll" />-->
           ...
        </globalModules>
    </system.webServer>
    <location path="" overrideMode="Allow">
        <system.webServer>
          <modules>
              <!--<add name="RewriteModule" />--> 
              ...
          </modules>
        </system.webServer>
    </location>
</configuration> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T23:37:07.780

签入您尚未检查的 Visual Studio 以在调试时显示所有异常。这可能只是由于您的 Debug-> exceptions 设置而看到的内部处理的异常。

检查是否未选中 Just My Code 以及您现在是否在调试-> 异常窗口中显示两行复选框。

# java - 我进行了块填充，但仍然得到“数据未对齐块大小”

> ID：15147099
> 
> 赞同：1
> 
> 时间：2013-02-28T22:42:52.890
> 
> 标签：java, encryption, bouncycastle

加密时出现问题导致错误：

```
javax.crypto.IllegalBlockSizeException: data not block size aligned
    at org.bouncycastle.jcajce.provider.symmetric.util.BaseBlockCipher.engineDoFinal(Unknown Source)
    at javax.crypto.Cipher.doFinal(Cipher.java:2086)
    at com.lcp.sso.logic.SsoCipher.encode(SsoCipher.java:89) 
```

对象的构造函数：

```
public MyCipher() throws NoSuchAlgorithmException, NoSuchProviderException, NoSuchPaddingException, InvalidKeyException, UnsupportedEncodingException {
    Security.addProvider(new BouncyCastleProvider());
    KeyGenerator keyGen = KeyGenerator.getInstance("DESede", "BC");
    keyGen.init(new SecureRandom());
    SecretKey keySpec = keyGen.generateKey();

    this.sharedKey = keySpec.getEncoded().toString();
    this.encrypter = Cipher.getInstance("DESede/ECB/Nopadding", "BC");
    this.encrypter.init(Cipher.ENCRYPT_MODE, keySpec);
    this.decrypter = Cipher.getInstance("DESede/ECB/Nopadding", "BC");
    this.decrypter.init(Cipher.DECRYPT_MODE, keySpec);
} 
```

发生错误的方法：

```
public String encode(String arg_text) throws IllegalBlockSizeException, BadPaddingException {
    byte[] encrypt = arg_text.getBytes();

    if(encrypt.length % 8 != 0){ //not a multiple of 8
        //create a new array with a size which is a multiple of 8
        byte[] padded = new byte[encrypt.length + 8 - (encrypt.length % 8)];

        //copy the old array into it
        System.arraycopy(encrypt, 0, padded, 0, encrypt.length);
        encrypt = padded;
    }

    byte[] b = Base64.encodeBase64URLSafe(encrypt);
    return Base64.encodeBase64String(encrypter.doFinal(b));
} 
```

在那里调用最后一个方法时会发生错误。我发誓我正在通过对字节数组进行空填充以确保它是 8 的倍数，从而将其设置为正确的块大小。我只是不知道出了什么问题！

我正在使用：
Eclipse 版本：Juno Service Release 1
服务器：本地主机上的 Tomcat v7.0 服务器（特别是 7.0.32）

---**编辑**---

程序还没有工作，（编辑：是的！Muahahahaha！）但是这个问题已经解决了。

对象的构造函数：

```
public MyCipher() throws NoSuchAlgorithmException, NoSuchProviderException, NoSuchPaddingException, InvalidKeyException, UnsupportedEncodingException, InvalidParameterSpecException, InvalidAlgorithmParameterException {
    Security.addProvider(new BouncyCastleProvider());
    KeyGenerator keyGen = KeyGenerator.getInstance("DES", "BC");
    keyGen.init(new SecureRandom());
    SecretKey keySpec = keyGen.generateKey();

    this.sharedKey = new String( Base64.encodeBase64URLSafe( keySpec.getEncoded() ) );
    this.encrypter = Cipher.getInstance("DES/CBC/PKCS5Padding", "BC");
    this.encrypter.init(Cipher.ENCRYPT_MODE, keySpec);

    AlgorithmParameters params = this.encrypter.getParameters();
    byte[] iv = params.getParameterSpec(IvParameterSpec.class).getIV();
    IvParameterSpec ivSpec = new IvParameterSpec(iv);

    this.sharedIV = new String( Base64.encodeBase64URLSafe( iv ) );
    this.decrypter = Cipher.getInstance("DES/CBC/PKCS5Padding", "BC");
    this.decrypter.init(Cipher.DECRYPT_MODE, keySpec, ivSpec);
} 
```

加密方法是：

```
public String encode(String arg_text) throws IllegalBlockSizeException, BadPaddingException, UnsupportedEncodingException {
    byte[] encrypt = arg_text.getBytes();
    return new String( Base64.encodeBase64URLSafe(encrypter.doFinal(encrypt)), "US-ASCII");
} 
```

它现在可以很好地加密和解密。非常感谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-28T23:32:46.467

某些方面的奇怪代码。从代码不起作用的原因开始，您要确保 的大小`encrypt`是 8 的倍数，但您正在尝试加密`byte[] b = Base64.encodeBase64URLSafe(encrypt);`可能不是 8 的倍数。以下代码应该可以工作：

```
public String encode(String arg_text) throws IllegalBlockSizeException, BadPaddingException {
    byte[] encrypt = arg_text.getBytes();

    if(encrypt.length % 8 != 0){ //not a multiple of 8
        //create a new array with a size which is a multiple of 8
        byte[] padded = new byte[encrypt.length + 8 - (encrypt.length % 8)];

        //copy the old array into it
        System.arraycopy(encrypt, 0, padded, 0, encrypt.length);
        encrypt = padded;
    }

    return new String(Base64.encodeBase64URLSafe(encrypter.doFinal(b)), "US-ASCII");
} 
```

现在，您在哪里`this.encrypter = Cipher.getInstance("DESede/ECB/Nopadding", "BC");`注意到字符串的“N​​opadding”部分？好吧，代码做你要求它做的事情......但是库可以为你做填充工作，你只需要告诉它。试试看`this.encrypter = Cipher.getInstance("DESede/ECB/PKCS5Padding", "BC");`它是否有效。

但实际上，为什么要在 ECB 模式下使用 3DES？除非原因是遗留问题（从我在这里看到的不太可能），否则没有任何意义。我相信您需要阅读更多有关密码学的内容。

# javascript - Knockout：点击页面其他地方，隐藏元素

> ID：15147106
> 
> 赞同：1
> 
> 时间：2013-02-28T22:43:24.560
> 
> 标签：javascript, html, knockout.js

我正在创建一个 2 级菜单，因此单击顶部菜单项，子菜单会显示，如果单击页面的其他位置而不是子菜单本身，子菜单应该隐藏。我不倾向于向 body 标签添加点击绑定，无论如何它都不起作用，但我能做些什么来实现这一点？到目前为止，这是我的代码。

```
<div id="menuholder">
<ul id="topmenu">
    <li  data-bind="click: showMenu.bind($data, 1)">top menu item</li>
    <ul class="submenu" data-bind="visible: selected() == '1'">
         <li><a href="#">submenu item</a></li>
    </ul>
</ul>
</div>
<script type="text/javascript">
var menuModel = function () {
    var self = this;
    self.selected = ko.observable(0);
    self.showMenu = function (data) {
        var s = self.selected();
        if (s > 0 && data == s)
            self.selected(0);
        else
            self.selected(data);
    };
    self.hideMenu = function () {
        self.selected(0);
    }
}
ko.applyBindings(new menuModel(), document.getElementById("menuHolder")); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T23:12:36.150

如果您查看[Twitter Bootstrap](http://twitter.github.com/bootstrap/javascript.html#dropdowns)如何进行下拉菜单，它会向`html`元素添加一个事件：

下拉类定义内部：

```
...
  $('html').on('click.dropdown.data-api', function () {
      $el.parent().removeClass('open')
  }) 
```

你可以尝试类似的东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T03:01:18.550

```
$('yourParentDivId').click(function(e) {  
    if (!( $(e.target).is('topmenu') && $(e.target).is('submenu') ) ) {  
        alert('clicked');  
        self.hideMenu();
    }  
}); 
```

[请参阅此处淘汰委托事件](http://knockoutjs.com/documentation/unobtrusive-event-handling.html)

# svn - SVN Checkout 库到子文件夹中

> ID：15147107
> 
> 赞同：1
> 
> 时间：2013-02-28T22:43:39.633
> 
> 标签：svn

我有一个包含几个不同项目的 SVN 存储库。

*   库
*   投影仪
*   项目b

projecta 和 projectb 共享相同的库。我希望能够签出文件，这样我的文件夹结构就会出现

*   投影仪
*   --- 库
*   项目b
*   --- 库

是否可以将 projecta 作为 SVN 项目，并将 libs 文件夹检出到子文件夹中？我假设我可以对库进行更改、签入，然后使用库更新所有项目？我真的希望不必在项目之外对库进行更改，然后在每次我想集成它们时复制它们（这是一个 PHP 项目）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-28T23:12:03.647

Tortoise SVN 帮助有一些选项可以[包含一个公共子项目](http://tortoisesvn.net/docs/nightly/TortoiseSVN_en/tsvn-howto-common-projects.html)：

*   外在
*   嵌套工作副本
*   其他选项，我认为与您的问题不太相关

我意识到您可能没有使用 Tortoise SVN，但很多概念仍然适用。

如果你走外部路线，[你应该考虑使用明确的修订号](http://tortoisesvn.net/docs/nightly/TortoiseSVN_en/tsvn-dug-externals.html)：

> 如上所述，您应该强烈考虑在所有外部定义中使用明确的修订号。这样做意味着您可以决定何时提取不同的外部信息快照，以及准确提取哪个快照。除了不会对您可能无法控制的第三方存储库的更改感到惊讶之外，使用明确的修订号还意味着当您将工作副本回溯到以前的修订时，您的外部定义也将恢复为他们在之前的修订中查看的方式，这反过来意味着外部工作副本将被更新以匹配他们在您的存储库处于之前的修订时查看的方式。对于软件项目，

# php - PHPExcel获取相对于给定列的列名

> ID：15147110
> 
> 赞同：15
> 
> 时间：2013-02-28T22:43:44.043
> 
> 标签：php, phpexcel

使用 PHPExcel，是否可以获取位于左侧或右侧 X 列的列的名称？

例如，给定列 BZ，我想返回列名 CB 或 BX。（右侧或左侧 2 个）

谢谢

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2013-03-01T07:35:47.450

PHPExcel 中已经内置了一些函数来帮助您执行此操作

```
$adjustment = -2;
$currentColumn = 'BZ';

$columnIndex = PHPExcel_Cell::columnIndexFromString($currentColumn);
$adjustedColumnIndex = $columnIndex + $adjustment;
$adjustedColumn = PHPExcel_Cell::stringFromColumnIndex($adjustedColumnIndex - 1); 
```

请注意（历史）差异 columnIndexFromString() 将为 A 列返回 1，但 stringFromColumnIndex 期望 0 对应于 A 列

# javascript - Javascript返回引用或值返回的对象属性？

> ID：15147112
> 
> 赞同：0
> 
> 时间：2013-02-28T22:43:56.790
> 
> 标签：javascript, object, scope, return-value

我有以下代码来自创建 Firefox 扩展的教程。

它使用了一种创建对象并分配它的方法，这是我以前没有遇到过的，并且一些代码让我感到困惑，因为我虽然理解 JS 是如何工作得相当好的。

```
var linkTargetFinder = function () {

var prefManager = Components.classes["@mozilla.org/preferences-service;1"].getService(Components.interfaces.nsIPrefBranch);

return {
    init : function () {
        gBrowser.addEventListener("load", function () {
            var autoRun = prefManager.getBoolPref("extensions.linktargetfinder.autorun");
            if (autoRun) {
                linkTargetFinder.run();
            }
        }, false);
    },

    run : function () {
        var head = content.document.getElementsByTagName("head")[0],
            style = content.document.getElementById("link-target-finder-style"),
            allLinks = content.document.getElementsByTagName("a"),
            foundLinks = 0;

        if (!style) {
            style = content.document.createElement("link");
            style.id = "link-target-finder-style";
            style.type = "text/css";
            style.rel = "stylesheet";
            style.href = "chrome://linktargetfinder/skin/skin.css";
            head.appendChild(style);
        }   

        for (var i=0, il=allLinks.length; i<il; i++) {
            elm = allLinks[i];
            if (elm.getAttribute("target")) {
                elm.className += ((elm.className.length > 0)? " " : "") + "link-target-finder-selected";
                foundLinks++;
            }
        }
        if (foundLinks === 0) {
            alert("No links found with a target attribute");
        }
        else {
            alert("Found " + foundLinks + " links with a target attribute");
        }   
    }
};
}();

window.addEventListener("load", linkTargetFinder.init, false); 
```

我的问题是，您在自执行函数中创建了变量 prefManager 。然后返回要分配给变量 linkTargetFinder 的对象。在返回对象之前将变量放入方法定义时是否转换为其值。或者它是否继续引用我认为在函数返回后会被销毁或至少超出范围的自执行函数中创建的变量？

非常感谢您提前提供的帮助，我已经尝试了几次实验，看看我是否可以用一种或另一种方式证明它，并且也仔细看看，虽然我有点不确定要搜索什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-25T11:52:55.947

我发现这个问题的答案是[闭包](http://developer.mozilla.org/en-US/docs/Web/JavaScript/Guide/Closures)。

当自执行函数完成执行时，该变量不会被销毁，因为创建它的环境也将包含在闭包中。

# javascript - Javascript/jQuery，动画完成后显示 div

> ID：15147114
> 
> 赞同：0
> 
> 时间：2013-02-28T22:44:24.810
> 
> 标签：javascript, jquery

这是一个工作的jsfiddle：

[http://jsfiddle.net/YnT2X/](http://jsfiddle.net/YnT2X/)

在返回动画完成之后，我不希望 div 显示。

jQuery：

```
$(document).ready(function () {
    $("#menu").hover(function () {
        $('#arrow').hide();
        $("body").children(':not(#menu)').css("-webkit-filter", "blur(2px)");
        $(this, '#arrow').stop().animate({
            width: "200px"
        }, 250,

        function () {
            if ($('#menu').width() == '200') {
                $('.text').fadeIn(200);
            }
        });
    }, function () {
        $(this).stop().animate({
            width: "0px"
        }, 250)
        $("body").children(':not(#menu)').css("-webkit-filter", "none");
        $('.text').fadeOut('fast');
        $('#arrow').show();
    });
    }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T22:48:04.197

试试这个：小提琴：http: [//jsfiddle.net/upycZ/](http://jsfiddle.net/upycZ/)

```
$(document).ready(function () {
    $("#menu").hover(function () {
        $('#arrow').hide();
        $("body").children(':not(#menu)').css("-webkit-filter", "blur(2px)");
        $(this, '#arrow').stop().animate({
            width: "200px"
        }, 250,

        function () {
            if ($('#menu').width() == '200') {
                $('.text').fadeIn(200);
            }
        });
    }, function () {
        $(this).stop().animate({
            width: "0px"
        }, 250,function(){
        $('#arrow').show(); //<- Shows arrow after run
        });
        $("body").children(':not(#menu)').css("-webkit-filter", "none");
        $('.text').fadeOut('fast');

    });
}); 
```

# c# - 释放 TabPage 控件及其控件

> ID：15147116
> 
> 赞同：0
> 
> 时间：2013-02-28T22:44:31.930
> 
> 标签：c#, .net, memory-leaks, user-controls, tabcontrol

我的应用程序用于`TabControl`显示数据，每次用户请求数据时，应用程序都会创建一个`TabPage`包含许多控件（`PictureBox`控件、`Label`控件等）的新控件。用户在某些时候会关闭`TabPage`他正在使用的控件。现在这里的问题是关闭的`TabPage`控件，它们会堆积在内存中，导致程序使用很大一部分内存。从中删除`TabPage`控件`TabControl`不会释放它，也不会释放其中的项目，它只是隐藏它，但控件仍然挂在内存中。

我用来删除的代码`TabPage`类似于：

```
tabControl.TabPages.Remove(myTabPage);
myTabPage.Dispose(); 
```

**问：我如何完全摆脱`TabPage`控制？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T23:41:49.773

调用 myTabPage.Dispose() 应该释放 TabPage 及其子项的资源。但是，这些对象使用的内存可能不一定会被 GC 立即释放，即使这些对象没有被其他对象引用。

在内存非常大的计算机中，GC 往往是惰性的。只要稍后会释放内存，例如几分钟后，您就不必担心。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T23:22:19.417

您可以每次都通过与其关联的标签页控件进行迭代，并将它们放置在一个循环中。

```
 tabControl1.TabPages[0].Controls[i].Dispose(); 
```

# javascript - Adobe Flash Player 设置 Javascript 关闭事件

> ID：15147117
> 
> 赞同：-1
> 
> 时间：2013-02-28T22:44:33.000
> 
> 标签：javascript, flash

在 Adob​​e Flash Player 设置窗口中单击关闭设置按钮时是否触发了任何事件。我希望能够在设置关闭时移动包含的 div。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-03-01T17:58:14.197

决定使用一个蹩脚的解决方案，如果包含 div 内的点击事件位于关闭按钮的坐标内。

远非完美，但现在可以......

# php - 在 jQuery 中显示超时警告

> ID：15147118
> 
> 赞同：1
> 
> 时间：2013-02-28T22:44:37.910
> 
> 标签：php, jquery, ajax, session, meta

我目前处理 PHP Web 应用程序的超时，如下所示：

*   当前，每个页面在 PHP 中都有一个超时检查，它检查当前时间与用户最后一次加载页面的情况。如果两者之差超过 15 分钟，则销毁用户会话，创建新会话，将当前页面位置放到会话上，并将用户重定向到登录页面。
*   每个页面头都有一个`<meta>`标签，在 15 分 5 秒后刷新页面（因此“调用”超时检查）

我现在正在考虑为用户添加更大的控制权，例如，如果他们碰巧在页面上工作了很长时间，并且正在考虑允许在超时前大约两分钟出现弹出窗口。然后弹出窗口将具有继续会话（进行 AJAX 调用以刷新会话中的最后一个活动）或注销的选项。如果弹出窗口被忽略（例如，如果用户在不同的页面上），则用户将被注销。

根据[Using Javascript to override or disable meta refresh tag](https://stackoverflow.com/questions/3252743/using-javascript-to-override-or-disable-meta-refresh-tag)，我将无法重置`<meta>`标签，这可能意味着我必须删除标签。[PHP/Javascript Session Timeout with warning](https://stackoverflow.com/questions/11538803/php-javascript-session-timeout-with-warning)的唯一答案建议使用 JavaScript 调用重定向到登录页面，但是这可以通过禁用 JavaScript 来规避。

我正在考虑`<meta>`用（允许，因为我使用 HTML5）包围重定向标签`<noscript>`，这样即使用户不使用 JavaScript，它们仍然会超时。这也将删除`<meta>`触发用户是否决定继续他们的会话的标签。

这种方法有意义吗？我错过了什么吗？还有另一种更有意义的方法吗？

* * *

我当前的代码

```
<?php
require_once("include/session.php");
require_once("include/sessioncheck.php");
?>
<html>
    <head>
         <meta http-equiv="refresh" content="<?= TIMEOUT_MIN * 60 ?>" />
         <!-- additional tags -->
    </head>
    <body>
        <!-- content -->
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-08T17:36:01.923

我最终做的是留下我的 sessioncheck.php 代码并删除`<meta>`标签。然后我在结束正文标记之前添加了以下内容：

```
<div id="timeout-warning"></div>
<div id="timeout-warning-text">Your session is set to expire in less than one minute
    due to inactivity. Click <a href="javascript:void(0)" id="timeout-restart">
    here</a> to keep your session alive.</div>

<script type="text/javascript">
    var timeoutWarning;
    var timeout;
    $(document).ready(function() {
        $("#timeout-restart").click(function() {
            clearTimeout(timeout);
            timeout = setTimeout(function() {
                document.location.reload(false);
            }, 1801000);
            timeoutWarning = setTimeout(function() {
                $("#timeout-warning").fadeTo(2000, 0.5);
                $("#timeout-warning-text").fadeIn(2000);
            }, 1740000);
            $("#timeout-warning").hide();
            $("#timeout-warning-text").hide();
            return false;
        });

        timeoutWarning = setTimeout(function() {
            $("#timeout-warning").fadeTo(2000, 0.5);
            $("#timeout-warning-text").fadeIn(2000);
            clearTimeout(softTimeout);
        }, 1740000);
        timeout = setTimeout(function() {
            document.location.reload(false);
        }, 1801000);
    });
    </script> 
```

1740000 和 1801000 数字基于 PHP const，恰好基于半小时的超时。

# php - 数据表和表格工具的警告警报

> ID：15147119
> 
> 赞同：0
> 
> 时间：2013-02-28T22:44:38.617
> 
> 标签：php, javascript, jquery, datatables, tabletools

我正在制作一个表格，使用 jQuery 库（DataTables），并想添加按钮以将表格的结果导出到 Excel 文件，然后通过该页面的[示例](http://datatables.net/extras/tabletools/)引导我，并将它们导出，但我现在页面加载时发送警报，我一直在互联网上阅读并说它管理修改脚本中的一些行和状态，但我无法修复它，当我打开页面时，它显示下一个错误：

> > DataTables 警告（表 id = 'example'）：无法重新初始化 DataTable。
> 
> 要检索此表的 DataTables 对象，请不传递任何参数或查看 bRetrieve 和 bDestroy 的文档

我通过以下形式调用我的脚本：index.php

```
<meta charset="utf-8">
    <script src="js/jquery.js" type="text/javascript"></script>
    <script src="js/funciones.js" type="text/javascript"></script>
    <script src="js/jquery.dataTables.js" type="text/javascript"></script>
    <link href="css/cuerpo.css" rel="stylesheet" type="text/css" /> 

    <!--Prueba-->
        <style type="text/css" title="currentStyle">
            @import "css/demo_page.css";

            @import "css/TableTools.css";
        </style>
        <script src="js/TableTools.js" type="text/javascript"></script>
        <script src="js/ZeroClipboard.js" type="text/javascript"></script>
        <script type="text/javascript" charset="utf-8">
            $(document).ready( function () {
                $('#example').dataTable( {
                    "sDom": 'T<"clear">lfrtip'
                } );
            } );
        </script>

    <!--Prueba-->
</head>
<body id="dt_example">
    <div id="container">
        <div id="header"> 
        </div>
            <div id="intro">
                <header id="titulo">
                </header>
                    <div id="demo">

                <article id="contenido"></article>
                <br><br>
            </div>
    </div>

</body> 
```

它调用了一个 JS 页面：

```
$(document).ready(function(){
    verlistado()
    //se carga la lista de la consulta

})
function verlistado(){ //funcion para mostrar el listado en el index por jquery
              var randomnumber=Math.random()*11;
            $.post("Registro/lista_base.php", {
                randomnumber:randomnumber
            }, function(data){
              $("#contenido").html(data);
            });
}

after it use the jQuery library and print on a php data table:

$(document).ready(function(){
   $('#example').dataTable( { //convertimos nuestro listado de la forma del jquery.datatables- pasamos el id de la tabla
        "sPaginationType": "full_numbers" //damos formato a la paginacion(numeros)
    } );
})

        <!--Prueba-->
        <style type="text/css" title="currentStyle">

            @import "css/TableTools.css";
        </style>
        <script src="js/TableTools.js" type="text/javascript"></script>
        <script src="js/ZeroClipboard.js" type="text/javascript"></script>
        <script type="text/javascript" charset="utf-8">
            $(document).ready( function () {
                $('#example').dataTable( {
                    "sDom": 'T<"clear">lfrtip'
                } );
            } );
        </script>

    <!--Prueba-->
    <script language="JavaScript" type="text/javascript">
        function PopWindow(idUsuario)
            {
                window.open('Registro/detalle.php?id='+idUsuario,'Registo del alumno','width=420, height=350');
            }
    </script>
    <script type="text/javascript" language="javascript" src="js/listado.js"></script>
    <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.3.2/jquery.js"></script>
    <script>
        $(document).ready(function()
            {
                $('[rel=tooltip]').bind('mouseover', function()
                    {
                        if ($(this).hasClass('ajax')) 
                            {
                                var ajax = $(this).attr('ajax');    
                                $.get(ajax,

                                function(theMessage)
                                    {
                                        $('<div class="tooltip">'  + theMessage + '</div>').appendTo('body').fadeIn('fast');});
                            }
                        else{
                                var theMessage = $(this).attr('content');
                                                $('<div class="tooltip">' + theMessage + '</div>').appendTo('body').fadeIn('fast');
                            }

                $(this).bind('mousemove', function(e)
                    {
                        $('div.tooltip').css
                            ({
                                'top': e.pageY - ($('div.tooltip').height() / 2) - 5,
                                'left': e.pageX + 15
                            });
                    });

                }).bind('mouseout', function(){
                    $('div.tooltip').fadeOut('fast', function(){
                    $(this).remove();
                });
                });
            });
        </script>
        <style>
            .tooltip
                {
                    position:absolute;
                    width:250px;
                    background-image:url(images/tip-bg.png);
                    background-position:left center;
                    background-repeat:no-repeat;
                    color:#FFF;
                    padding:5px 5px 5px 18px;
                    font: Verdana, Geneva, sans-serif;
                    font-size:12px;
                }
            li
                {
                    margin-bottom:30px;
                }
            #wrapper
                {
                    margin:0 auto;
                    width:500px;
                    margin-top: 99px;
                }
        </style>
        <div id="demo">
        <table cellpadding="0" cellspacing="0" border="0" class="display" id="example">
            <thead>
                <tr>
                    <th>Instituto</th>
                    <th>Categoria</th>
                    <th>Version</th>
                    <th width="20%">Nombre</th>
                    <th>Nacionalidad</th>
                    <th>email</th>
                    <th>Puntaje</th>
                    <th>Comprobante</th>
                    <th width='1%'>Detalles</th>
                </tr>
            </thead>
            <tfoot>
                <tr> 
                </tr>
            </tfoot>
            <tbody>
                <?php
                    while($reg=  mysql_fetch_array($listado))
                        {
                            echo '<tr>';
                            echo '<td><center>'.mb_convert_encoding($reg['razon_comercial'], "UTF-8").'</center></td>';
                            echo '<td><center>'.mb_convert_encoding($reg['categoria'], "UTF-8").'</center></td>';
                            echo '<td><center>'.mb_convert_encoding($reg['version'], "UTF-8").'</center></td>';
                            echo '<td>'.mb_convert_encoding($reg['Nombre'], "UTF-8").'</td>';
                            echo '<td><center>'.mb_convert_encoding($reg['nacionalidad'], "UTF-8").'</center></td>';
                            echo '<td>'.mb_convert_encoding($reg['email'], "UTF-8").'</td>';
                            echo '<td><center>'.mb_convert_encoding($reg['calificacion'], "UTF-8").'</center></td>';
                            echo "<td><center><a href='".mb_convert_encoding($reg['comprobante'], 'UTF-8')."'</a>descargar</center></td>";                      
                            echo "<td><a href=javascript:PopWindow(".mb_convert_encoding($reg['idAlumno'], 'UTF-8').") alt=Image Tooltip rel=tooltip content='
                                    <div id=con><b>Nombre: </b>".mb_convert_encoding($reg['Nombre'], "UTF-8")."<br>
                                    <b>Nacionalidad: </b>".mb_convert_encoding($reg['nacionalidad'], "UTF-8")."<br>
                                    <b>Correo: </b>".mb_convert_encoding($reg['email'], "UTF-8")."<br>
                                    <b>Instituto: </b>".mb_convert_encoding($reg['razon_comercial'], "UTF-8")."<br>
                                    <b>Puntaje: </b>".mb_convert_encoding($reg['calificacion'], "UTF-8")."<br>
                                    <b>Categoria: </b>".mb_convert_encoding($reg['categoria'], "UTF-8")."<br>
                                    <b>Versi&oacute;n: </b>".mb_convert_encoding($reg['version'], "UTF-8")."</div>'><center><img src='images/detail.png' width='20%'></center></a><br></td>";
                            echo '</tr>';

                        }
                ?>
            </tbody>
        </table> 
```

我希望你能帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-06-25T19:51:17.633

上一个答案是正确的，但是，如果要添加导出按钮，还需要 flash 路径。

```
sSwfPath: "/swf/copy_csv_xls_pdf.swf", 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T22:47:03.963

我认为您遇到的问题是 javascript 在加载数据之前触发。要解决此问题，请确保脚本位于正在填充的表下方。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-28T22:55:56.457

您在同一页面上针对 #example 调用 dataTable 两次，这将引发“DataTables 警告（表 id = 'example'）：无法重新初始化 DataTable”错误

# mysql - 使用pig将数据插入mysql表

> ID：15147122
> 
> 赞同：0
> 
> 时间：2013-02-28T22:44:57.850
> 
> 标签：mysql, hadoop, apache-pig

我有 2 个文本文件。我打算使用 pig latin 将数据转储到 mysql 表中。

有办法吗？

我编写了以下代码：

```
register '/homes/rdheeraj/pig-0.10.0/code/mysql-connector-java-5.1.17-bin.jar'
register '/homes/rdheeraj/pig-0.10.0/code/piggybank.jar';
a = load 'one.txt' using PigStorage('|') as (name:chararray, age:int);
b = load 'two.txt' using PigStorage('|') as (name:chararray, desg:chararray);
c = cogroup a by name, b by name;
d = foreach c generate flatten(a), flatten(b);
e = foreach d generate $0,$1,$3;
store e into 'TEST' using  org.apache.pig.piggybank.storage.DBStorage('com.mysql.jdbc.Driver','jdbc:mysql://127.0.0.1/sftool','root','password','insert into TEST (name,age,desg) values (?,?,?)'); 
```

我得到的错误如下

```
org.apache.pig.impl.logicalLayer.FrontendException: ERROR 1000: Error during parsing. Could not resolve org.apache.pig.piggybank.storage.DBStorage using imports: [, org.apache.pig.builtin., org.apache.pig.impl.builtin.]
        at org.apache.pig.PigServer$Graph.parseQuery(PigServer.java:1597)
        at org.apache.pig.PigServer$Graph.registerQuery(PigServer.java:1540)
        at org.apache.pig.PigServer.registerQuery(PigServer.java:540)
        at org.apache.pig.tools.grunt.GruntParser.processPig(GruntParser.java:970)
        at org.apache.pig.tools.pigscript.parser.PigScriptParser.parse(PigScriptParser.java:386)
        at org.apache.pig.tools.grunt.GruntParser.parseStopOnError(GruntParser.java:189)
        at org.apache.pig.tools.grunt.GruntParser.parseStopOnError(GruntParser.java:165)
        at org.apache.pig.tools.grunt.Grunt.exec(Grunt.java:84)
        at org.apache.pig.Main.run(Main.java:555)
        at org.apache.pig.Main.main(Main.java:111)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
        at java.lang.reflect.Method.invoke(Method.java:601)
        at org.apache.hadoop.util.RunJar.main(RunJar.java:156)
Caused by: Failed to parse: Cannot instantiate: org.apache.pig.piggybank.storage.DBStorage
        at org.apache.pig.parser.QueryParserDriver.parse(QueryParserDriver.java:184)
        at org.apache.pig.PigServer$Graph.parseQuery(PigServer.java:1589)
        ... 14 more
Caused by: java.lang.RuntimeException: Cannot instantiate: org.apache.pig.piggybank.storage.DBStorage
        at org.apache.pig.impl.PigContext.instantiateFuncFromSpec(PigContext.java:510)
        at org.apache.pig.parser.LogicalPlanBuilder.validateFuncSpec(LogicalPlanBuilder.java:791)
        at org.apache.pig.parser.LogicalPlanBuilder.buildFuncSpec(LogicalPlanBuilder.java:780)
        at org.apache.pig.parser.LogicalPlanGenerator.func_clause(LogicalPlanGenerator.java:4583)
        at org.apache.pig.parser.LogicalPlanGenerator.store_clause(LogicalPlanGenerator.java:6225)
        at org.apache.pig.parser.LogicalPlanGenerator.op_clause(LogicalPlanGenerator.java:1335)
        at org.apache.pig.parser.LogicalPlanGenerator.general_statement(LogicalPlanGenerator.java:789)
        at org.apache.pig.parser.LogicalPlanGenerator.statement(LogicalPlanGenerator.java:507)
        at org.apache.pig.parser.LogicalPlanGenerator.query(LogicalPlanGenerator.java:382)
        at org.apache.pig.parser.QueryParserDriver.parse(QueryParserDriver.java:175) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T23:45:21.900

几点建议。

1.  我认为您在通往 jar 的路径中出现错误 - 它不应该是 home 而不是 home 吗？

2.  您不需要在路径周围加上引号

3.  注册 mysql 驱动程序后，您缺少分号。

所以它应该看起来更像这样：

```
REGISTER /home/rdheeraj/pig-0.10.0/code/mysql-connector-java-5.1.17-bin.jar;
REGISTER /home/rdheeraj/pig-0.10.0/code/piggybank.jar; 
```

# android - Android：ListView 和 customAdapter - 单击时列表显示 2 个项目的信息/editText 不可单击

> ID：15147124
> 
> 赞同：0
> 
> 时间：2013-02-28T22:45:02.653
> 
> 标签：android, listview, android-edittext, custom-adapter

我为我的列表视图做了一个自定义适配器，它扩展了一个基本适配器，它工作正常，直到我在我的 list_item.xml 中添加了另一行，所以现在在我的 OnItemClickListner 中，点击应该在它下面的行中显示项目的描述被隐藏了。效果很好，除了当我单击任何项​​目时，它会在列表底部显示描述下的行和列表底部的另一个项目，尽管我只按下一个项目，当我再次向下和向上滚动时，项目的行 a点击消失，但另一个自己打开的保持打开状态。我搜索并发现这可能是因为我不使用 bindView 并且任何 List 从 5-10 个项目中获取然后重用它们。如果是这种情况，我该如何为我的 customAdapter 实现 bindVIew。附加了我的点击监听器和我的 customAdapter 的 getView

```
public void onItemClick(AdapterView<?> parent, View view,
             int position, long id) {
             // getting values from selected ListItem
                if ((((LinearLayout) view.findViewById(R.id.edit)).getVisibility()) == (View.VISIBLE))
                {
                    ((LinearLayout) view.findViewById(R.id.edit)).setVisibility(View.GONE);
                }else
                {
                    ((LinearLayout) view.findViewById(R.id.edit)).setVisibility(View.VISIBLE);
                    ((EditText) view.findViewById(R.id.itemn)).setFocusable(true);              
                    new LoadCategories().execute();

                } 
```

第二个问题：我的描述行有一个editText，它显示了当我按下任何项目时在项目下可见的描述。但当它出现时，我无法按下它来更改或编辑它。

```
 public View getView(final int position, View convertView, ViewGroup parent) {
        System.out.println("getView " + position + " " + convertView);
        final ViewHolder holder;

        if (convertView == null) {
            convertView = mInflater.inflate(l, null);
            holder  = new ViewHolder();

            holder.id = (TextView)convertView.findViewById(R.id.id);
            holder.name = (TextView)convertView.findViewById(R.id.name);
            holder.price = (TextView)convertView.findViewById(R.id.price);
            holder.description = (TextView)convertView.findViewById(R.id.description);
            holder.button = (Button) convertView.findViewById(R.id.update);
            holder.btn = (Button) convertView.findViewById(R.id.order);

            holder.en = (EditText)convertView.findViewById(R.id.itemn);
            holder.ep = (EditText)convertView.findViewById(R.id.pri);
            holder.ed = (EditText)convertView.findViewById(R.id.descript);

            convertView.setTag(holder);
        }

        else {
            holder = (ViewHolder)convertView.getTag();
        }
        holder.id.setText(getId(getItem(position)));
        holder.name.setText(getName(getItem(position)));
        holder.price.setText("£ " + getPrice(getItem(position)));
        holder.description.setText(getDesc(getItem(position)));
        holder.btn.setVisibility(View.GONE);

       holder.en.setText((holder.name.getText()).toString());
       holder.ep.setText((holder.price.getText()).toString());
       holder.ed.setText((holder.description.getText()).toString());

        return convertView;
    }
    public void clear(){
        itemsList.clear();
        notifyDataSetChanged();
    }

} 
```

这是我的 list_item.xml。Baically 第一个 tableRow 显示了从 hashMap 数组传递的所有信息。第二排还没用。第三个 TableRow 从第一行获取信息并将其设置为 editText，然后可以对其进行修改，以便之后使用更正的信息更新数据库。第三行被隐藏并在按下项目时显示。

```
 <?xml version="1.0" encoding="utf-8"?>
 <RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@+id/RelativeLayout1"
android:layout_width="fill_parent"
android:layout_height="wrap_content"
android:orientation="vertical"
android:paddingBottom="5dp" >

<TableRow
    android:id="@+id/tableRow1"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:baselineAligned="false" >

    <TextView
        android:id="@+id/id"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:textColor="#FFFFFF"
        android:visibility="gone" />

    <TextView
        android:id="@+id/quantity"
        android:layout_width="wrap_content"
        android:layout_height="match_parent"
        android:layout_weight="0.5"
        android:gravity="left"
        android:textAllCaps="true"
        android:textColor="#FFFFFF"
        android:textSize="30sp"
        android:textStyle="bold"
        android:typeface="serif"
        android:visibility="gone" />

    <TextView
        android:id="@+id/name"
        android:layout_width="wrap_content"
        android:layout_height="match_parent"
        android:layout_gravity="left"
        android:layout_weight="3"
        android:gravity="left"
        android:textAllCaps="true"
        android:textColor="#FFFFFF"
        android:textSize="30sp"
        android:textStyle="bold"
        android:typeface="serif" />

    <TextView
        android:id="@+id/price"
        android:layout_width="wrap_content"
        android:layout_height="match_parent"
        android:layout_gravity="center"
        android:layout_weight="1"
        android:gravity="right"
        android:paddingRight="15dp"
        android:textAllCaps="true"
        android:textColor="#FFFFFF"
        android:textSize="30sp"
        android:textStyle="bold"
        android:typeface="serif" />

    <Button
        android:id="@+id/order"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="right"
        android:layout_weight="0"
        android:focusable="false"
        android:minHeight="0dp"
        android:minWidth="50dp"
        android:text="+"
        android:textStyle="bold" />

</TableRow>

<TableRow
    android:id="@+id/tableRow2"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"
    android:layout_below="@+id/tableRow1"
    android:gravity="center_horizontal" >

    <TextView
        android:id="@+id/description"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:textAllCaps="true"
        android:textColor="#FFFFFF"
        android:textSize="20sp"
        android:textStyle="bold"
        android:typeface="serif"
        android:visibility="gone" />

</TableRow>

<TableRow
    android:id="@+id/TableRow01"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:layout_alignParentBottom="false"
    android:layout_alignParentLeft="true"
    android:layout_below="@id/tableRow2"
    android:gravity="center_horizontal" >

    <LinearLayout
        android:id="@+id/edit"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:orientation="vertical"
        android:visibility="gone" >

        <EditText
            android:id="@+id/itemn"
            android:layout_width="match_parent"
            android:layout_height="69dp"
            android:ems="10"
            android:focusable="false"
            android:focusableInTouchMode="false"
            android:gravity="top|left"
            android:hint="NAME"
            android:inputType="text"
            android:textColor="#FFFFFF"
            android:textSize="20sp" />

        <EditText
            android:id="@+id/descript"
            android:layout_width="match_parent"
            android:layout_height="82dp"
            android:ems="10"
            android:focusable="false"
            android:focusableInTouchMode="false"
            android:gravity="top|left"
            android:hint="DESCRIPTION"
            android:inputType="textMultiLine"
            android:textColor="#FFFFFF"
            android:textSize="20sp" />

        <EditText
            android:id="@+id/pri"
            android:layout_width="match_parent"
            android:layout_height="62dp"
            android:ems="10"
            android:focusable="false"
            android:focusableInTouchMode="false"
            android:gravity="top|left"
            android:hint="£ PRICE"
            android:textColor="#FFFFFF"
            android:textSize="20sp" />

        <Spinner
            android:id="@+id/spinne"
            style="@style/spinner_style"
            android:layout_width="352dp"
            android:layout_height="wrap_content"
            android:layout_gravity="center"
            android:background="@drawable/dropdown"
            android:gravity="center"
            android:overScrollMode="always"
            android:prompt="@string/orders"
            android:textAlignment="center"
            android:textColor="#FFFFFF"
            android:textSize="20sp" />

        <Button
            android:id="@+id/update"
            android:layout_width="135dp"
            android:layout_height="wrap_content"
            android:layout_gravity="center"
            android:layout_weight="0.55"
            android:focusable="false"
            android:text="update"
            android:textAllCaps="true" />

    </LinearLayout>
</TableRow>

</RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T23:02:31.130

> 虽然我只按下了一个项目，*当我再次向下和向上滚动时，*单击的项目行消失了，但另一个自行打开的项目保持打开状态。

您正在与 ListView 回收视图的方式作斗争，请观看 Google 的[Turbo-Charge 您的 UI](http://www.google.com/events/io/2009/sessions/TurboChargeUiAndroidFast.html)，以详细了解其工作原理。解决方案很简单：在您的适配器中，您必须记住哪些行已被展开并相应地设置它们`getView()` *或*默认折叠每一行。

> 但当它出现时，我无法按下它来更改或编辑它。

我注意到您正在使 EditText 可聚焦，请尝试更改[`setFocusableInTouchMode()`](https://developer.android.com/reference/android/view/View.html#setFocusableInTouchMode%28boolean%29)。这些方法以微妙的方式联系在一起。

* * *

**另外**
我的一个观察是你有一些不必要的布局，如果一个布局只有一个孩子，那么你可能会删除它。例如，您可以删除 TableLayout 或 RelativeLayout *，*也可以删除 LinearLayout`edit`或 TableRow。

> 完成后，我无法压制该项目以关闭或隐藏可扩展部分。

我没有看到为什么您不能触摸第一行或第二行中的任何内容以再次隐藏第三行的具体原因...也许您应该添加一个隐藏/显示此行的按钮/

> 我面临的是当我按下一个项目时打开的扩展部分在我向下滚动时消失了

我向另一个用户介绍了这个：[Android：ListView bug](https://stackoverflow.com/q/15074650/1267661)
在我的回答中，请注意我如何使用`expanded`来跟踪每一行是否应该显示或隐藏额外的布局，并注意如何`expanded`在`mName`.

# java - 有没有一种方法可以获取 Total JDBC 连接？

> ID：15147125
> 
> 赞同：1
> 
> 时间：2013-02-28T22:45:08.757
> 
> 标签：java, jdbc, database-connection

我有一个连接到数据库以收集数据并报告它的 jabber 机器人。如果连接断开，它会重新建立并重新启动 DB 连接。有没有可以调用的方法来列出所有 JDBC 打开和关闭的连接？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T19:35:09.483

如果您的数据库是 Oracle，您可以使用`v$session`视图查询数据库会话。例如，使用此查询：

```
column sid format 9999
column serial# format 9999999
column username format a8
column machine format a15
column osuser format a6
column program format a12

SELECT sid, serial#, username, machine, osuser, status, program, TO_CHAR(logon_time, 'MM-DD HH24:MI') logon_time
 FROM v$session 
 WHERE username IS NOT NULL AND machine IS NOT NULL
 ORDER BY logon_time; 
```

`column`如果从 Java 运行查询，以 开头的行并不重要。如果您在将查询合并到 Java 之前使用 Sql*Plus 测试查询，它们会格式化结果表。

# javascript - RegEx，提取键之间的文本

> ID：15147128
> 
> 赞同：0
> 
> 时间：2013-02-28T22:45:20.167
> 
> 标签：javascript, regex

**鉴于：**

```
This is some text which could have 
line breaks and tabs before and after {code}
and I want them {code} to be replaced {code}in pairs{code} without any issues. 
```

**我想：**

```
This is some text which could have 
line breaks and tabs before and after <code>
and I want them </code> to be replaced <code>in pairs</code> without any issues. 
```

JsFiddle：http: [//jsfiddle.net/egrwD/1](http://jsfiddle.net/egrwD/1)

**简单的工作文本示例：**

```
var sample1 = 'test test test {code}foo bar{code} {code}good to know{code}';
var regEx1 = new RegExp('(\{code\})(.*?)(\{code\})', 'gi');
var r1 = sample1.replace(regEx1, '<code>$2</code>'); 
```

**给出：**

```
test test test <code>foo bar</code> <code>good to know</code> 
```

**非工作样本：**

```
var sample2 = 'test test test {code}\tfoo bar{code} {code}\r\ngood to know{code}';
var regEx2 = new RegExp('(\{code\})(.*?)(\{code\})', 'gi');
var r2 = sample2.replace(regEx2, '<code>$2</code>'); 
```

**给出：**

```
test test test {code}   foo bar{code} {code}
good to know{code} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T22:50:06.117

看起来您只需要[在换行符之间进行模式匹配](https://stackoverflow.com/q/13519970/139010)，首先正确地转义它`{`，然后使用正则表达式文字来解决在字符串中双重转义反斜杠的需要：

```
/(\{code\})([\s\S]*?)(\{code\})/gi 
```

[http://jsfiddle.net/mattball/QNak5](http://jsfiddle.net/mattball/QNak5)

请注意，您甚至不需要`{code}`s 周围的捕获括号：

```
/\{code\}([\s\S]*?)\{code\}/gi 
```

[http://jsfiddle.net/mattball/Jk5cr](http://jsfiddle.net/mattball/Jk5cr)

# asp.net - 用户在 ASP.NET GridView 中选择记录的问题

> ID：15147131
> 
> 赞同：1
> 
> 时间：2013-02-28T22:45:42.123
> 
> 标签：asp.net, gridview, checkbox, datatable

**目标** 我需要的是通过 ASP.NET 在网页上向用户显示一个 SQL 数据表，并允许他们非常快速轻松地选择许多行，然后点击多个不同按钮中的任何一个来表示不同的操作。选定的行将被发送出去进行处理（通常通过代码隐藏发送到 web 服务或类似的服务）。这是一个有点通用的解决方案，因为我将在许多地方使用相同的设置 - 因此数据和可用操作会有所不同。

目标是能够基本上对数据一无所知——这是为了让用户理解。如果这个概念已经不可能（尽管我相信它不是），请告诉我。

从 T-SQL（SQL Server 2008 R2 或更高版本）中提取。使用 ASP.NET 制作 aspx 网页。Codebehind 是在 VB.NET 中完成的，在这两种情况下我们都使用 4.0 我精通 C# 和 VC++，所以如果你不能轻松地翻译你的代码，不要担心。

**问题** 我的问题一直是为用户创建一个行选择过程，该过程在对表格进行排序或分页时仍然存在，对用户来说很快并且响应时间相对较快，这反映在 GridView 的绑定数据中（因为这允许我在 DataView 上使用过滤器来生成用于传递的 DataTable）。如果有另一种方法可以知道选定的行，那么只要它对用户来说是持久且快速的，我就会全力以赴。

我没有调试，也没有语法问题（我不相信） - 我不知道如何继续。我不一定需要代码作为解决方案 - 我需要了解我的隐喻是否是不好的做法，或者只是不常见，因此没有得到很好的支持。在任何一种情况下，什么是合适的方法？如果不出意外，除了无尽的 API 和教程之外，我在哪里寻找解决方案？

**我最初的计划** 是我想使用 asp:GridView 来绑定从 TSQL 中提取的 DataTable，因为我可以自动生成列。这使我无需知道它是什么就可以显示数据。我计划添加一个特定的布尔列（最左边）来存储用户的行选择。然后我可以简单地在 DataTable 上运行一个过滤器以生成一个 DataView，从该 DataView 中获取生成的 DataTable，并将它传递到链中。

除了我们的特定选择之一之外的所有列都是只读的。用户没有编辑数据 - 他们选择记录并与可查看的相关数据并排查看他们的选择。

值得注意的是，我计划检查名称冲突，以便我们添加的列不会与 DataTable 中的任何现有列冲突 - 我会根据需要使用“选择”重命名它，后跟循环产生的整数，将我的名字与其他列，根据需要递增。

我假设一旦我设置了它，它就会自行处理：用户可以单击生成的复选框列单元格，它会即时更改数据。保存选择的重点是为了方便，他们的选择通过排序和分页保持不变（我保存了 GridView 的数据源并在必要时重新绑定）。用户是否刷新页面并完全丢失他们的复选框并不重要 - 他们需要查看任何更改/新数据，并且他们不需要更多的时间来检查他们想要的任何内容。

这没有发生。

我发现 AutoGenerateColumns 不会为布尔数据列生成复选框。它产生文本，所以我最终得到了“真”或“假”这个词。

我开始寻找一种方法来获取单元格中用于布尔数据列的复选框。我发现对于添加的布尔列，我可以使用属性 DataField 将 asp:CheckBoxField 绑定到它。当然，我必须弄清楚如何将它指向一个变量 DataField ......

```
<Columns>
  <asp:CheckBoxField DataField="Select" HeaderText="Select" 
   ReadOnly="False" SortExpression="Select">
    <ItemStyle HorizontalAlign="Center" />
  </asp:CheckBoxField>
</Columns> 
```

但是，因为 GridView 是为逐行编辑而设计的，所以所有生成的 CheckBox 都被禁用并且无法选中。这是因为它们的包含行不在 Edit Mdoe 中。我不想使用按钮或类似的比喻来启用逐行编辑，因为用户经常需要检查几行。更多的点击是不好的，而且很烦人。他们应该只专注于他们的数据和做出选择，而不是担心记住进入和结束编辑模式。此外，这个比喻似乎在这里放置得不好，因为复选框是 -ONLY- 可编辑的数据 - 并且不是表示数据的一部分。

当然，我可以创建一个继承自 GridView 的新类，重载生成列以生成复选框而不是文本字段的方法 - 但我觉得必须有一条更直接的路径。也许这是要走的路？但也许它会有与上面相同的编辑问题——我不确定。

所以，接下来我尝试在我的 GridView 中使用 asp:TemplateField 作为列。此 TemplateField 包含一个 asp:CheckBox，其 Checked 状态基于底层绑定数据值。这里的问题是尝试更改检查状态更新该绑定值。我需要一些查找 GridView 值的方法，然后我可以使用它在 DataTable 中查找同一行。我见过使用主键的好例子。虽然我可以假设每个人都为任何可能的表保留一个主键，但情况可能并非如此！我可以自己进一步添加主键，但现在看起来我将添加和删除两列，然后再将 DataTable 传递给 WebService 而不是一个。同样，我还需要能够分配一个动态的列名以避免冲突。

```
<asp:TemplateField HeaderText="Select">
    <ItemTemplate>
      <asp:CheckBox runat="server" ID="CheckBox" 
       Checked="<%# DataBinder.Eval(Container.DataItem, "Select") %>" 
       AutoPostBack="true" OnCheckedChanged="SelectCheckBox_CheckChanged" />
      </ItemTemplate>
</asp:TemplateField> 
```

我停了下来——这条路也是相当间接的。当然，有一种更清洁、更简单的方法可以做到这一点。有人以一种或另一种方式显示只读数据以进行处理/更新/更改的情况是否不常见？

我选择的 GridView 很差吗？我还没有找到另一种表示表格数据的好方法。

# python - 使用 Python 从 SGM 文件中提取信息

> ID：15147133
> 
> 赞同：1
> 
> 时间：2013-02-28T22:45:45.530
> 
> 标签：python, parsing, extraction, sgml

我需要一些帮助来使用 Python 从 .sgm 文件中提取信息。是否有适合这种特定类型文件的特定库？或者用于从 .xml 文件中提取信息的库也能正常工作？如果没有可用的库，您能否建议我一个可以下载以处理 .sgm 文件的好模块？

最重要的是，如果有的话，你能解释一下 .xml 和 .sgm 文件之间的区别吗？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T00:57:56.363

以下是一些可用于解析 .sgm 文件的库：

*   [SGMLtools-lite](http://sourceforge.net/projects/sgmltools-lite/)
*   [美丽汤](https://pypi.python.org/pypi/BeautifulSoup)

两者之间的主要区别在于 SGML 允许以下内容：

> 未关闭的开始标签
> 
> 未封闭的结束标签
> 
> 空的开始标签
> 
> 空的结束标签

**参考**

*   [SGML 和 XML 的比较](http://www.w3.org/TR/NOTE-sgml-xml)

# django - 使用 fcgi 在子目录中的 Django

> ID：15147135
> 
> 赞同：0
> 
> 时间：2013-02-28T22:45:59.597
> 
> 标签：django, apache, subdirectory, fastcgi, bluehost

我试图避免必须以某种方式添加一个 context_processor 来将我的项目的基本 url 添加到我在所有模板中使用的每个 url。

我的 django 项目位于一个子目录下（让我们称之为 foo），我的模板中的很多 url 都与此类似：

```
<a href='/somepath'>whatever</a> 
```

这适用于托管在域根目录上的项目，但在这种情况下，因为我在子目录 foo 下，所以 url 实际上会指向 www.example.com/somepath

有趣的是管理站点运行良好。它所有的 url 都指向 foo/admin/...

我怀疑我不是在寻找正确的术语来找到答案。

.htaccess

```
AddHandler fcgid-script .fcgi
RewriteEngine On
RewriteCond %{REQUEST_FILENAME} !-f
RewriteRule ^(.*)$ foo.fcgi/$1 [L] 
```

.fcgi

```
#!/usr/bin/python
import sys, os

# Current Path
cwd = os.path.join( os.path.dirname( os.path.abspath( __file__ ) ) )

# Activate current virtualenv
activate_this = os.path.join( cwd, 'bin', 'activate_this.py' )
execfile( activate_this, dict( __file__ = activate_this ) )

# Add a custom Python path.
sys.path.insert( 0, os.path.join( cwd, 'foo' ) )

os.environ['DJANGO_SETTINGS_MODULE'] = 'foo.settings'
from django.core.servers.fastcgi import runfastcgi
runfastcgi(method="threaded", daemonize="false") 
```

大多数 url 我可以使用 {% url %} 和 FORCE_SCRIPT_NAME 来正常工作，但是对于我在 urls.py 中没有用于 reverse() 的条目的 url，我不确定我是否应该只使用FORCE_SCRIPT_NAME 变量在他们的模板中还是有更好的方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T19:42:11.200

这是我解决问题的方法。不确定这是否是最好的方法，但现在可以。

1.  确保您将 FORCE_SCRIPT_NAME 设置为您的子目录
2.  在与 settings.py 相同的目录中创建了 context_processors.py
3.  在 CONTEXT_PROCESSORS 下的 settings.py 中添加了 context_processors.url_prefix
4.  在模板中不能使用 {% url %} 标记的任何地方，只需在前面加上 {{ URL_PREFIX }}

context_processors.py

```
from django.conf import settings # import the settings file

def url_prefix(request):
    # return the value you want as a dictionnary. you may add multiple values in there.
    return {'URL_PREFIX': settings.FORCE_SCRIPT_NAME} 
```

设置.py

```
CONTEXT_PROCESSORS = (
    ...,
    'context_processors.url_prefix',
) 
```

# javascript - 如何知道 D3.js 中的当前缩放级别

> ID：15147136
> 
> 赞同：14
> 
> 时间：2013-02-28T22:46:00.867
> 
> 标签：javascript, events, graph, d3.js, zooming

几天以来我有一个问题。我有一个图表，当我使用[缩放行为](https://github.com/mbostock/d3/wiki/Zoom-Behavior#wiki-zoom)时它可以工作，但我需要知道何时达到最大缩放以加载新的给定

```
// Specifies the zoom scale's allowed range, [min, max]
d3.behavior.zoom().x(x).scaleExtent([1,10]).on("zoom", draw) 
```

请参阅我的代码 [http://jsfiddle.net/albanlopez/D4MRP/](http://jsfiddle.net/albanlopez/D4MRP/)

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-02-28T23:20:35.603

在绘图功能中，当前事件将具有缩放级别（您提到的 d3.event.scale）。另外，如果您保持以下行为：

```
var zm = d3.behavior.zoom().x(x).scaleExtent([1,10]).on("zoom", draw); 
```

然后你可以通过调用找到当前的缩放级别：

```
zm.scale(); 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2016-10-19T01:12:02.313

从 D3 v4 开始，有两种记录在案的方法来检索缩放状态。引用 d3/d3-zoom README（在 Zoom Transforms 下）：

> 要检索缩放状态，请在缩放事件侦听器中对当前缩放事件使用 event.transform（请参阅 zoom.on），或对给定节点使用 d3.zoomTransform。

[https://github.com/d3/d3-zoom/blob/master/README.md#zoom-transforms](https://github.com/d3/d3-zoom/blob/master/README.md#zoom-transforms)

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2013-02-28T23:00:33.013

```
rect.call(zm=d3.behavior.zoom().x(x).scaleExtent([1,10]).on("zoom", draw)); 
```

经过新的测试，我得到了答案：

```
var currentZoom = d3.event.scale; 
```

但仅在**.on("zoom", draw)调用的****draw()**函数中可用/可读

 **```
rect.call( zm = d3.behavior.zoom().x(x).scaleExtent([1,10]).on("zoom", draw));

function draw() {
    // trace l'axe X
    svg.select("g.x.axis").call(xAxis);
    // trace l'axe Y
    svg.select("g.y.axis").call(yAxis);
    // trace la courbe
    svg.select("path.line").attr("d", line);

    console.log(zm.scale(), zm.translate()); // , zm.translate[1] = Y
    console.log(d3.event.scale, d3.event.translate[0]); // , d3.event.translate[1] = Y
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2021-02-14T21:26:59.987

截至今天（d3.v5），检查闭包内缩放级别的方法是查看此属性：

> d3.event.transform.k**

# svn - 从 repo 中分离出项目

> ID：15147139
> 
> 赞同：2
> 
> 时间：2013-02-28T22:46:10.093
> 
> 标签：svn, split

我有一个非常大的存储库，我们将开始将存储库中的每个项目分解为单独的存储库。但是，我遇到了一些关于 Node-copyfrom-rev 的问题，这些问题在转储/加载时无法正确匹配，导致以下结果：

```
svnadmin: E160006: Relative source revision -18169 is not available in current repository
svnadmin: E160013: File not found: transaction '37-1c', path 'tags/1.6.1/file.php' 
```

我已经做了一些努力来重写转储文件和修订定义，但它似乎没有正确匹配，因此很难自动化这个过程。欢迎任何更改建议，但请注意，由于 repo 的大小，使用 svndumpfilter 并不是一个真正的选择，它需要几个小时才能打破一个项目，而这个 repo 包含数千个。

```
#!/bin/bash

project=$1
repo=/root/svn-copy/oldrepo
rm -fr $project*
mkdir $project
cd $project
svnadmin create $project
i=1
svn log file://$repo $project | grep -e ".*r[0-9].*|.*" | awk '{ print substr($1,2) }' | sort -g | while read rev; do
    revs[$rev]=$i
    svnadmin dump $repo --quiet -r $rev --incremental >> $project.$rev.bak

# Rewrite revision number to ease rewrite of Node-copyfrom
perl -pi -e "s/Revision-number: $rev/Revision-number: $i/;" $project.$rev.bak
# Rewrite node-paths
perl -pi -e "s/Node-path: $project\//Node-path: /;" $project.$rev.bak
# Rewrite Node-copyfrom-path
perl -pi -e "s/Node-copyfrom-path: $project\//Node-copyfrom-path: /;" $project.$rev.bak

# Rewrite Node-copyfrom-rev
for rev in $(grep Node-copyfrom-rev $project.$i.bak | awk '{ print $2 }'); do
    perl -pi -e "s/Node-copyfrom-rev: $rev/Node-copyfrom-rev: ${revs[$rev]}/;" $project.$i.bak
done

# Remove prop for old project-folder
sed -i "/Node-path: $project/,/PROPS-END/d" $project.$rev.bak

svnadmin load --ignore-uuid $project < $project.$rev.bak
    let i=$i+1
    rm -fr $project.$rev.bak
done

svnadmin setuuid $project 
```

请注意，修订号的重写在一定程度上减轻了 node-copyfrom-rev 的影响，但并非完全缓解，因为在以这种方式转储时，有时 node-copyfrom-repo 点似乎不正确。

# ruby - 如何在 Ruby 的 SSLServer 中实现 SSL 证书的自定义验证？

> ID：15147140
> 
> 赞同：1
> 
> 时间：2013-02-28T22:46:11.557
> 
> 标签：ruby, ssl, openssl

我正在使用 SSL 在两个对等方之间形成可信连接。每个对等点都知道在给定时间它希望连接到谁（或接受来自谁的连接）。它应该只接受有效的证书，而且它应该只接受具有某些属性的证书（可能通过检查规范名称）。

[到目前为止，我可以根据this question中的示例及其答案](https://stackoverflow.com/questions/7735422/verify-client-certificate-using-sslserver-in-ruby)让双方进行对话。每一方都可以打印出对方出示的证书。

不过，我不确定验证这些证书的正确方法是什么。显而易见的方法是在建立连接后只查看证书，如果它不符合我们的期望，则断开连接。

有没有更正确的方法来做到这一点？是否有一个回调，它给出了对等方提供的证书并且可以给它一个大拇指或大拇指向下？还是在 SSL 完成工作后处理它是正确的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-02T04:37:34.187

> 不过，我不确定验证这些证书的正确方法是什么。显而易见的方法是在建立连接后只查看证书，如果它不符合我们的期望，则断开连接。

这有很多，其中一些并不明显。我将把答案分成几部分，但所有部分都试图回答你的问题。

* * *

首先，您可以验证证书格式是否正确。在 Web 上下文中负责的组是 CA/浏览器论坛。他们对创建证书有基线和扩展要求：

*   基线证书要求，[https://www.cabforum.org/Baseline_Requirements_V1_1_6.pdf](https://www.cabforum.org/Baseline_Requirements_V1_1_6.pdf)
*   扩展验证证书要求，[https://www.cabforum.org/Guidelines_v1_4_3.pdf](https://www.cabforum.org/Guidelines_v1_4_3.pdf)

例如，在基线文档中，您会发现列为通用名称 (CN) 的 IP 也必须列在主题备用名称 (SAN) 中。在扩展文档中，您会发现私有 IP（根据 RFC 1918 保留）不能出现在扩展验证 (EV) 证书中；EV 证书不能包含通配符。

* * *

其次，您可以根据 RFC 5280、*Internet X.509 公钥基础设施证书和证书撤销列表 (CRL) 配置文件*，[http:](http://www.ietf.org/rfc/rfc5280.txt) //www.ietf.org/rfc/rfc5280.txt 执行常规验证。

常规检查是主机名匹配、时间段有效性检查以及验证最终实体或叶证书（客户端或服务器证书）链回根。在使用 CA 的浏览器中，有数百个受信任的根或中间体。

*如果*您选择执行吊销检查，那么您可能会对您的应用程序进行 DoS（这很明显！）。3G 网络上的移动客户端无法下载和处理 30MB CRL - 它肯定会挂起应用程序。当 URL 错误时，应用程序无法执行 OCSP 查询 - 这肯定会失败。

此外，如果您正在执行包含通配符的主机名匹配，则必须注意正确处理 ccTLD。ccTLD 类似于 *.eu、*.us 或 இலங்கை (nic.lk)。其中大约有 5000 个，Mozilla 在[http://publicsuffix.org/](http://publicsuffix.org/)上提供了一个列表（或者，[https: //mxr.mozilla.org/mozilla-central/source/netwerk/dns/effective_tld_names.dat?raw= 1](https://mxr.mozilla.org/mozilla-central/source/netwerk/dns/effective_tld_names.dat?raw=1) )。

* * *

第三，CA 没有任何保证，因此您从 CA 获得的答案毫无价值。如果您不相信我，请查看他们的认证实践声明 (CPS)。例如，以下是 Apple 的[证书颁发机构认证实践声明](https://ssl.apple.com/certificateauthority/pdf/Apple_AAI_CPS_v4.0.pdf)（2013 年 9 月 18 日，第 6 页）的摘录：

```
2.4.1\. Warranties to Subscribers
The AAI Sub-CA does not warrant the use of any Certificate to any Subscriber.

2.4.2\. CA disclaimers of warranties
To the extent permitted by applicable law, Subscriber agreements, if applicable,
disclaim warranties from Apple, including any warranty of merchantability or
fitness for a particular purpose 
```

这意味着他们不保证通过发行人的签名将公钥绑定到组织。这就是 X509! 的全部目的！

* * *

第四，DNS 不提供真实的答案。因此，您可能会从 DNS 得到一个错误的答案，然后愉快地转移到由您的对手控制的服务器。或者，美国控制的 13 台根 DNS 服务器中有 10 台可能以美国国家安全的名义串通一气，给你一个错误的答案。

试图从非美国服务器获得真实响应几乎是不可能的。“安全 DNS”部分（无 DNSSEC）仍在不断发展，我不知道有任何主流实现。

在勾结美国服务器的情况下，法定人数将不起作用，因为美国拥有压倒性多数。

* * *

这里的问题是您正在根据来自外部服务（CA 和 DNS）的输入做出安全决策。从本质上讲，您也必须信任不值得信赖的演员。

解决 PKI 和 PKIX 问题的一个很好的方法是 Peter Gutmann 博士的*工程安全*，网址为 www.cs.auckland.ac.nz/~pgut001/pubs/book.pdf。请务必阅读第 1 章和第 6 章。Gutmann 博士具有诙谐的幽默感，因此阅读起来并不枯燥。另一本很棒的书是 Ross Anderson 的《*安全工程*》，网址为[http://www.cl.cam.ac.uk/~rja14/book.html](http://www.cl.cam.ac.uk/~rja14/book.html)。

* * *

对于由 PKI、PKIX 和 CA 引起的所有问题，您有几个防御措施。首先，您可以在自己的证书颁发机构中运行私有 PKI。在这种情况下，您不信任外人。应捕获错误的 DNS 答案和流氓服务器，因为服务器的证书不会形成有效的链。

其次，您可以采用安全多元化策略。Gutmann 在他的《*工程安全*》一书中对此进行了描述，您应该从第 292 页开始访问“通过多样性实现安全”和第 296 页的“Internet 应用程序的风险多样化”部分。

第三，您可以采用首次使用信任 (TOFU) 或密钥连续性策略。这类似于 Wendlandt、Anderson 和 Perrig 的*Perspectives: Improvement SSH-style Host Authentication with Multi-Path Probing*或 SSH 的`StrictHostKeyChecking`选项。在此策略中，您进行常规检查，然后固定证书或公钥。您还可以询问其他人对证书或公钥的看法。意外的证书或密钥更改应该敲响警钟。

[OWASP 在https://www.owasp.org/index.php/Certificate_and_Public_Key_Pinning](https://www.owasp.org/index.php/Certificate_and_Public_Key_Pinning)对证书和公钥固定进行了处理。注意：有些地方每 30 天左右轮换一次证书，所以如果可能的话，你应该固定公钥。频繁轮换列表包括 Google，它是 Certificate Patrol 等工具产生如此大噪音的原因之一。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-12-16T20:42:27.987

> 在这种情况下，我是 CA，因此信任 CA 不是问题。我代表我的用户签署这些证书。规范名称甚至不是域名。用户点对点连接。我希望我分发的客户端软件验证连接用户是否拥有我签署的证书并且是正确的用户。

听起来您正在运行私有 PKI。`SSL_CTX_load_verify_locations`只需使用或将信任链的根加载到 OpenSSL 中`SSL_load_verify_locations`。

请务必使用`SSL_PEER_VERIFY`以确保 OpenSSL 执行验证。电话可能看起来像`SSL_CTX_set_verify(ctx, SSL_VERIFY_PEER, NULL);`. 如果对等验证失败，`connect`则将失败。

有一些方法可以确保`connect`成功，然后再捕获错误。诀窍是设置验证回调，让验证回调始终返回`1`，然后`SSL_get_verify_result`在建立连接后调用。有关示例，请参阅[SSL/TLS 客户端。](http://wiki.openssl.org/index.php/SSL/TLS_Client)

**注意**：在所有情况下，您仍然必须手动执行名称检查。OpenSSL 目前不这样做（它在 OpenSSL 1.1.0 的 HEAD 中）。请参阅`libcurl`PostgreSQL 或 PostgreSQL 以获取您可以破解的一些代码。

OpenSSL 在其 wiki 中提供了 SSL/TLS 客户端的示例。请参阅[SSL/TLS 客户端](http://wiki.openssl.org/index.php/SSL/TLS_Client)。目前没有服务器代码或示例。

# php - Scandir：检查同名文件（不包括扩展名）

> ID：15147142
> 
> 赞同：0
> 
> 时间：2013-02-28T22:46:28.723
> 
> 标签：php, scandir

是否可以检查具有相同文件名的文件（仅文件扩展名不同）并且只显示它们的名称一次？

```
if (is_dir($dir_path)) {

    $files = scandir($dir_path);

    foreach($files as $file) {

        if ( !in_array( $file, $exclude_all ) ) {

            $path_to_file = $dir_path . $file;
            $bare_name = pathinfo( $path_to_file, PATHINFO_FILENAME );
            $extension = pathinfo( $path_to_file, PATHINFO_EXTENSION );

            echo 'Path to file: ' . $path_to_file . '<br />';
            echo 'Bare file name: ' . $bare_name . '<br />';
            echo 'Extension: ' . $extension . '<br />';         

        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T22:56:06.353

尝试这个

```
if (is_dir($dir_path)) {

$tmpBareNames = array();

$files = scandir($dir_path);

foreach($files as $file) {

    if ( !in_array( $file, $exclude_all ) ) {

        $path_to_file = $dir_path . $file;
        $bare_name = pathinfo( $path_to_file, PATHINFO_FILENAME );
        if(!in_array($bare_name,$tmpBareNames))
            $tmpBareName[] = $bare_name;
        else break;
        $extension = pathinfo( $path_to_file, PATHINFO_EXTENSION );

        echo 'Path to file: ' . $path_to_file . '<br />';
        echo 'Bare file name: ' . $bare_name . '<br />';
        echo 'Extension: ' . $extension . '<br />';         

    }
}
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T22:50:19.590

```
you can try this:

//first save all files in an array
$bare_name = pathinfo( $path_to_file, PATHINFO_FILENAME );
if(!in_array($bare_name, $files)){
 $files[] = $bare_name;
} 
```

现在 $files 包含唯一的文件名

# math - 马尔可夫链和均衡概率

> ID：15147143
> 
> 赞同：0
> 
> 时间：2013-02-28T22:46:30.257
> 
> 标签：math, model, probability, markov

贝克山国家森林夏季的火灾危险被列为三个危险等级之一。这些是1 =低，2 =中等，3 =高。这些状态之间每日转换的概率由以下流程图给出：

(a) 将模型写成矩阵形式，预测从一天到下一天的火灾危险概率。

图片：http: [//i.stack.imgur.com/TRuUy.png](http://i.stack.imgur.com/TRuUy.png)

(b) 如果我们今天处于状态 1，我们后天处于状态 2 的概率是多少？

(c) 如果你找到的矩阵是正确的，那么它的特征值和特征向量由下式给出

```
Lambda = [
1.0000     0         0
0          0.0697    0
0          0         0.4203

R=
-0.4699   -0.5551    -0.7801
-0.7832   0.7961     0.1813
-0.4072   -0.2410    0.5988 
```

基于这些，处于每个状态的均衡概率是多少？

我找到了 a 部分的矩阵形式，但我无法弄清楚 b 和 c 部分。谢谢

```
 A = [0.5    0.3    0
     0.4    0.5    0.5
     0.1    0.2    0.5] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T23:06:52.687

Calculate your eigenvectors and eigenvalues by putting matrix A into the box here: [http://www.arndt-bruenner.de/mathe/scripts/engl_eigenwert2.htm](http://www.arndt-bruenner.de/mathe/scripts/engl_eigenwert2.htm)

Forecasts for the 2nd day after today will be given by element (2,1) of the matrix B = ((A*A)*A).

# ruby-on-rails - 通过关系使用 has_one 的 Rails 嵌套表单

> ID：15147145
> 
> 赞同：0
> 
> 时间：2013-02-28T22:46:42.643
> 
> 标签：ruby-on-rails, activerecord, ruby-on-rails-3.2, nested-forms, nested-attributes

我真的很难理解如何使用由第二个模型连接的模型创建嵌套表单。我在 SO 上查找了[许多](https://stackoverflow.com/questions/9916785/nested-models-and-forms-with-has-one-through-relationship-in-rails)[帖子](https://stackoverflow.com/questions/11445831/how-to-submit-multiple-new-items-via-rails-3-2-mass-assignment) [，](https://stackoverflow.com/questions/2182428/rails-nested-form-with-has-many-through-how-to-edit-attributes-of-join-model)并尝试了很多方法，但无法弄清楚，尽管我想我快到了。

我正在尝试以一种形式创建订阅、客户和客户的地址，但到目前为止，我只设法创建了订阅和客户。我的地址有问题。

一个客户可以有很多订阅，但只有一个地址（暂时，无论如何）

我的（缩写）代码如下所示：

订阅.rb

```
class Subscription < ActiveRecord::Base

  belongs_to :customer
  has_one :address, through: :customer

  accepts_nested_attributes_for :customer, :address
  attr_accessible :customer_attributes, :address_attributes 
```

客户.rb

```
class Customer < ActiveRecord::Base

  has_one :address
  has_many :subscriptions

  accepts_nested_attributes_for :address
  attr_accessible :address_attributes 
```

地址.rb

```
class Address < ActiveRecord::Base

  belongs_to :customer
  has_many :subscriptions, through: :customer 
```

订阅控制器.rb

```
def new
  @subscription = Subscription.new    
  customer = @subscription.build_customer
  address = customer.build_address
  subscription_line_items = @subscription.subscription_line_items.build
end 
```

订阅/_form.html.erb

```
<%= form_for(@subscription) do |subscription_form| %>
  <% if @subscription.errors.any? %>
    <!-- Error stuff -->
  <% end %>

  <div class="field">
    <%= subscription_form.label :start_date %><br />
    <%= subscription_form.text_field :start_date %>
  </div>

  ...

  <h2>Customer Details</h2>
  <%= subscription_form.fields_for :customer do |customer_fields| %>
    <%= customer_fields.label :first_name %><br /> 
    <%= customer_fields.text_field :first_name %>
    ...
  <% end %>

  <h2>Address</h2>
  <%= subscription_form.fields_for :address do |address_fields| %>
    <%= address_fields.label :address_1 %><br /> 
    <%= address_fields.text_field :address_1 %>
    ...
  <% end %>

  <div class="actions">
    <%= subscription_form.submit %>
  </div>
<% end %> 
```

我知道我的控制器代码正在工作，因为当我直接在控制台中尝试它时，我得到一个空地址对象，但这并没有以表单形式呈现，这让我相信我的模型代码仍然不正确.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T04:50:24.060

Purpletonic，查看您的最新问题：

> ```
> Can't mass-assign protected attributes: customer, address 
> ```

您需要在模型中添加这些属性，例如：

```
attr_accessible :customer, :address 
```

# if-statement - “find%4==0”是什么意思？

> ID：15147150
> 
> 赞同：-4
> 
> 时间：2013-02-28T22:47:09.393
> 
> 标签：if-statement, while-loop, fwrite, fread

```
void searchcontact()
{
    int l,i;
    char query[20];
    system("cls");
    do
    {
        find=0;
        printf("Contact Search\n Name of the Contact:\n");
        fflush(stdout);
        scanf("%[^\n]",&query);
        l=strlen(query);
        f=fopen("contact.txt","r");

        system("cls");
        printf("Search the result for %s\n",query);
        while(fread(&add,sizeof(add),3,f)==1)
        {
            for(i=0;i<=3;i++)
            name[i]=add.name[i];
            name[l]='\0';
            if(stricmp(name,query)==0)
            {
                printf("Name\t:%s\nPhone\t:%d\nE-mail\t:%s\n",add.name,add.hpnum,add.email);
                find++;
                if(find%4==0)
                {
                    printf("Press any key to continue");
                    getch();
                }
            }
        }
        if(find==0)
        printf("\nNo match found!");
        else
        printf("\n %d match(s) found",find);
        fclose(f);
        printf("\nTry again?\t[1] Yes\t[2] No\n");
        scanf("%d",&choice);
    }while(choice==1);
} 
```

这是我的联系系统项目...有人知道`find%4==0`是什么意思吗？我不知道由于这部分编码，我指的是其他地方。因此我无法理解 find%4==0 的含义，有人可以帮助我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T22:49:49.770

一般来说，`x % y == z`is `True`when`x / y`有一个余数等于`z`。

在这种情况下，`find % 4 == 0`是`True`当变量可被（没有余数）`find`整除时。`4`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T22:49:46.410

它是模运算符。这意味着，当您针对 进行测试时`0`，`find`可以被 4 整除。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-28T22:49:27.923

它是一个模运算符：[http ://en.wikipedia.org/wiki/Modulo_operation](http://en.wikipedia.org/wiki/Modulo_operation)

基本上，当 x 除以 4 时，它返回余数。

# c# - SQL 脚本需要很长时间才能运行

> ID：15147151
> 
> 赞同：5
> 
> 时间：2013-02-28T22:47:16.420
> 
> 标签：c#, sql, enterprise-library

我目前正在使用 Microsoft Enterprise Library Data Access 5.0 来执行存储过程。

```
Database myDatabase = DatabaseFactory.CreateDatabase();
using (DbCommand command = myDatabase.GetStoredProcCommand("myStoredProc"))
{
   //Add parameters here
   using (IDataReader dataReader = myDatabase.ExecuteReader(command))
   {
      while (dataReader.Read())
      {
      }
   }
} 
```

一切正常，但是需要很长时间才能运行。当我打开 SQL Profiler 时，我可以看到存储过程大约需要 50 秒才能运行。但是，如果我从 Profiler 中获取相同的脚本并在 SQL Management Studio 中运行它，则只需大约 480 毫秒即可返回所有行。

有没有人遇到过这个问题？为什么会有很大的不同？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T23:39:19.447

很容易被[参数嗅探](https://www.simple-talk.com/sql/t-sql-programming/parameter-sniffing/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T07:36:31.443

尝试将您的字符串参数类型更改为`DbType.AnsiString`，看看是否有帮助。
问题可能是，如果数据库列是 varchar(...) 并且具有索引并且与该列匹配的参数是 nvarchar(...) 则 SQL Server 会忽略索引并执行表扫描。解决方案是强制参数键入 AnsiString，以便 SQL Server 使用索引。

# perl - 在 Unix 和 Perl 中搜索希腊语单词

> ID：15147156
> 
> 赞同：1
> 
> 时间：2013-02-28T22:47:37.093
> 
> 标签：perl, unix, special-characters

我有希腊语的 txt 文件，现在我想使用 perl 和 bash 搜索其中的特定单词……这些单词就像 ?a?, t?, e??

我正在搜索英语单词，现在想用希腊语替换它们，但我得到的只是？？？主要是……对于 Perl：

```
my %word = map { $_ => 1 } qw/name date birth/; 
```

对于 bash

```
for X in name date birth
do 
```

有人可以帮帮我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T22:58:39.420

```
#!/usr/bin/perl
use strict;
use warnings;

# Tell Perl your code is encoded using UTF-8.
use utf8;

# Tell Perl input and output is encoded using UTF-8.
use open ':std', ':encoding(UTF-8)';

my @words = qw( καί τό εἰς );

my %words = map { $_ => 1 } @words;
my $pat = join '|', map quotemeta, keys %words;

while (<>) {
   if (/$pat/) {
      print;
   }
} 
```

用法：

```
script.pl file.in >file.out 
```

笔记：

*   确保源代码使用 UTF-8 编码，并且您使用`use utf8;`.
*   确保使用该`use open`行并为数据文件指定适当的编码。（如果不是 UTF-8，请更改它。）

# php - 重新排列 PHP 页面，使标题位于 HTML 之前

> ID：15147163
> 
> 赞同：0
> 
> 时间：2013-02-28T22:48:01.140
> 
> 标签：php, html, mysql

我的标题没有重定向到正确的页面，因为我相信它之前有 HTML 元素。我是 PHP 新手，需要帮助重新排列我的页面，所以情况并非如此。如果我将标题行替换为

```
print_r("<script>location.href='changepassword.php?success'</script>"); 
```

它工作得很好，但是我知道这不是使用 JS 的好习惯。一旦展示了一个，我就可以让其余的，因为我的网站上没有一个可以工作！下面是我的 changepassword.php 页面：

```
<!DOCTYPE html>
<html>
<?php
include ("storescripts/init.php");
protect_page();
include ("includes/overall/head.php");
if (empty($_POST) ===  false){
$required_fields = array('current_password','password','password_again');
foreach ($_POST as $key=>$value) {
    if (empty($value) && in_array($key, $required_fields) == true) {
        $errors[] = 'Fields marked with an asterisk are required';
        break 1;
    }
}
if ($_POST['current_password'] === $member_data['mem_password']) {
    if(trim($_POST['password']) !== trim($_POST['password_again'])){
        $errors[] = 'Your new passwords do not match';
    } else if (strlen($_POST['password']) <6) {
        $errors[] = 'Your password must be at least 6 characters';
    }
} else {
    $errors[] = 'Your current password is incorrect';
}
}?>
<body>
<?php include ("includes/overall/template_header.php");?>
<div id="mainDivShort">
    <h1>Change Password</h1>
    <div id="divBreak"></div>
    <?php include ("includes/overall/column_left.php");?>
    <div id="middleContent">
        <?php if (isset($_GET['success']) && isset($_GET['success'])) {
            echo 'You have been registered successfully';
        } else {
if(empty($_POST) === false && empty($errors) === true) {
change_password($session_mem_id, $_POST['password']);
header('Location: changepassword.php?success');
} else if (empty($errors) === false) {
echo output_errors($errors);
}?>
        <form action="" method="post">
            <ul>
                <li>Current Password*: <br> <input type="password"
                    name="current_password">
                </li>
                <li>New Password*: <br> <input type="password" name="password">
                </li>
                <li>Repeat New Password*: <br> <input type="password"
                    name="password_again">
                </li>
                <li><input type="submit" value="Change">
                </li>
            </ul>
        </form>
        <?php }?>
    </div>
    <?php include ("includes/overall/column_right.php");?>
</div>
<?php include ("includes/overall/template_footer.php");?>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T22:51:38.720

您的标题需要在任何输出之前出现。这包括你的包含。`include ("storescripts/init.php");`, `include ("includes/overall/head.php");`,`include ("includes/overall/template_header.php");`任何输出都会停止标题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T22:54:17.410

这种安排应该奏效。我们只是将更改密码移到您的`if()`任何文档上方。注意`die()`告诉 PHP 停止处理的命令。当我们指示浏览器在其他地方继续时，无需执行脚本的其余部分。

正如 Dan 在下面指出的那样，您需要确保您的`include()`d 文件不包含任何输出。

```
<?php
include ("storescripts/init.php");
protect_page();
include ("includes/overall/head.php");

if (empty($_POST) ===  false){
    $required_fields = array('current_password','password','password_again');
    foreach ($_POST as $key=>$value) {
        if (empty($value) && in_array($key, $required_fields) == true) {
            $errors[] = 'Fields marked with an asterisk are required';
            break 1;
        }
    }
    if ($_POST['current_password'] === $member_data['mem_password']) {
        if(trim($_POST['password']) !== trim($_POST['password_again'])){
            $errors[] = 'Your new passwords do not match';
        } else if (strlen($_POST['password']) <6) {
            $errors[] = 'Your password must be at least 6 characters';
        }
    } else {
        $errors[] = 'Your current password is incorrect';
    }
}

if(empty($_POST) === false && empty($errors) === true) {
    change_password($session_mem_id, $_POST['password']);
    header('Location: changepassword.php?success=1');
    die();
}
?><!DOCTYPE html>
<html>
<body>
<?php include ("includes/overall/template_header.php");?>
<div id="mainDivShort">
    <h1>Change Password</h1>
    <div id="divBreak"></div>
    <?php include ("includes/overall/column_left.php");?>
    <div id="middleContent">
        <?php if (isset($_GET['success']) && isset($_GET['success'])) {
            echo 'You have been registered successfully';
        } else {
if (empty($errors) === false) {
echo output_errors($errors);
}?>
        <form action="" method="post">
            <ul>
                <li>Current Password*: <br> <input type="password"
                    name="current_password">
                </li>
                <li>New Password*: <br> <input type="password" name="password">
                </li>
                <li>Repeat New Password*: <br> <input type="password"
                    name="password_again">
                </li>
                <li><input type="submit" value="Change">
                </li>
            </ul>
        </form>
        <?php }?>
    </div>
    <?php include ("includes/overall/column_right.php");?>
</div>
<?php include ("includes/overall/template_footer.php");?>
</body>
</html> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-28T22:55:55.227

这不是答案，如果您不知道，可能会提供有用的信息。

要使用`header()`功能 - 您必须在任何 echo、print_r 等之前执行它。

换句话说——“产品”`header();`功能必须是第一个发送到浏览器的数据。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-28T22:56:46.677

### 您可以使用[输出缓冲](http://php.net/manual/en/function.ob-start.php)。

**在 PHP 中，标头必须在内容之前发送。**因此，一旦您输出*任何内容*（包括`echo`、`print`等，以及`<?php ?>`块之外的任何内容，包括*whitespace*），则无法修改标头。

**但是：**您可以做的是打开输出缓冲，这会将所有输出发送到临时缓冲区。在您告诉它之前，该缓冲区不会被输出。

基本模式是：

```
ob_start();             //Turn on output buffering at the 
                        //   beginning of your script

echo "Hello world!";    //Here would be your HTML document

if ($redirect)          //This would be your condition for redirection
    header('Location: otherpage.php');
else
   ob_flush();          //At the very end, send the buffer to the browser 
```

有许多用于结束缓冲的选项。在这种情况下，我只是使用 刷新了输出`ob_flush()`，但您可以查看 PHP 文档以了解其他各种选项。

# java - 在java中声明双重使用通配符

> ID：15147164
> 
> 赞同：3
> 
> 时间：2013-02-28T22:48:03.933
> 
> 标签：java, generics, nested-generics

我无法为方法的输出声明一个完全通用的类型。情况如下：

```
class A<S,T>{
public Callback<B<S,T>,C<S,T>> method();
} 
```

在我的代码中，我有其中之一；

```
A<String, ?> instance; 
```

但是，当我打电话时

```
result = instance.method() 
```

让编译器满意的唯一方法是声明

```
Callback<?, ?> result = instance.method() 
```

但我真的很想更具体地说明我的泛型并声明

```
Callback<B<String, ?>,C<String, ?>> result = instance.method() 
```

但是，由于每个通配符都是独立的，编译器会抱怨这是不正确的，说明它无法从

```
Callback<B<String,capture#3-of ?>,C<String,capture#3-of ?>> 
```

有什么方法可以正确声明这种情况吗？

仅供参考，A、B 和 C 类来自外部库。我试图将我的实例声明为

```
A<String, Object> 
```

但这也是我无法控制的第四类方法的结果：

```
class D<T>{
public A<T, ?> getObject();
}

D<String> start = new D<String>();
A<String, ?> = start.getObject();
... 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T04:17:42.907

你可以有

```
Callback<? extends B<String, ?>, ? extends C<String, ?>> result
    = instance.method(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T04:17:46.337

这确实是一个尴尬的情况，这是由于通配符捕获的限制以及 from 的返回类型不太理想`D.getObject`。

有一些解决方法，但没有一个是漂亮的。第一种是简单地进行未经检查的演员表：

```
@SuppressWarnings("unchecked") //it's okay for the two captures not to match
Callback<B<String, ?>, C<String, ?>> result =
        (Callback<B<String, ?>, C<String, ?>>)instance.method(); 
```

**编辑：**一些编译器（更正确地）需要通过以下方式进行双重转换`Callback<?, ?>`：

```
@SuppressWarnings("unchecked") //it's okay for the two captures not to match
Callback<B<String, ?>, C<String, ?>> result =
        (Callback<B<String, ?>, C<String, ?>>)(Callback<?, ?>)instance.method(); 
```

您还可以使用辅助方法 - 这是通配符捕获问题的常见解决方案：

```
static <T> void helper(A<String, T> a) {

    Callback<B<String, T>, C<String, T>> result = a.method();

    //logic
}

...

helper(instance); 
```

**更新：**

实际上，您可以将这两种方法结合起来，至少将丑陋隔离到一个辅助方法中：

```
static <S, T> Callback<B<S, ?>, C<S, ?>> disentangleCallback(
        Callback<B<S, T>, C<S, T>> callback
) {
    @SuppressWarnings("unchecked") //it's okay for the two captures not to match
    final Callback<B<S, ?>, C<S, ?>> withWidenedTypes =
            (Callback<B<S, ?>, C<S, ?>>)(Callback<?, ?>)callback;
    return withWidenedTypes;
} 
```

然后像这样使用它：

```
Callback<B<String, ?>, C<String, ?>> result =
        disentangleCallback(instance.method()); 
```

或者一个类似的方法，它简单地接受一个并通过调用自身`A<S, T>`返回一个，然后强制转换。`Callback<B<S, ?>, C<S, ?>>``method`

* * *

另一个想法：如果第二个类型参数 of`A`总是未知的，那么删除它并扩大返回类型可能会更*容易*`method`：

```
class A<S> {
    public Callback<B<S, ?>, C<S, ?>> method() { ... }
} 
```

`T`我意识到这将是一个不幸的让步，但如果它从来没有真正有用是有道理的。

# javascript - D3 - 没有图表出现

> ID：15147168
> 
> 赞同：-1
> 
> 时间：2013-02-28T22:48:12.963
> 
> 标签：javascript, csv, graph, d3.js

我有一个名为 final csv 的变量，它看起来像并以 CSV 格式存储。行由 \n 分隔。我正在使用 D3.csv.parse 语句。谁能告诉我为什么页面上什么都没有出现？:-

```
 String, Float
   value, 1
   value2, 2 

function generateGraph(finalcsv)
{
    var finaldata = finalcsv;
    var margin = {top: 20, right: 20, bottom: 30, left: 40},
        width = 960 - margin.left - margin.right,
        height = 500 - margin.top - margin.bottom;

    var formatPercent = d3.format(".0");

    var x = d3.scale.ordinal()
        .rangeRoundBands([0, width], .1, 1);

    var y = d3.scale.linear()
        .range([height, 0]);

    var xAxis = d3.svg.axis()
        .scale(x)
        .orient("bottom");

    var yAxis = d3.svg.axis()
        .scale(y)
        .orient("left")
        .tickFormat(formatPercent);

    var svg = d3.select(#body).append("svg")
        .attr("width", width + margin.left + margin.right)
        .attr("height", height + margin.top + margin.bottom)
      .append("g")
        .attr("transform", "translate(" + margin.left + "," + margin.top + ")");

    console.log(finaldata);

    d3.csv.parse(finaldata, function(error, data) {

      data.forEach(function(d) {
        d.Float = +d.Float;
      });

      x.domain(data.map(function(d) { return d.String; }));
      y.domain([0, d3.max(data, function(d) { return d.Float; })]);

      svg.append("g")
          .attr("class", "x axis")
          .attr("transform", "translate(0," + height + ")")
          .call(xAxis);

      svg.append("g")
          .attr("class", "y axis")
          .call(yAxis)
        .append("text")
          .attr("transform", "rotate(-90)")
          .attr("y", 6)
          .attr("dy", ".71em")
          .style("text-anchor", "end")
          .text("Integer");

      svg.selectAll(".bar")
          .data(data)
        .enter().append("rect")
          .attr("class", "bar")
          .attr("x", function(d) { return x(d.String); })
          .attr("width", x.rangeBand())
          .attr("y", function(d) { return y(d.Float); })
          .attr("height", function(d) { return height - y(d.Float); });
    });

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T07:24:06.430

我很快建立了一个似乎有效的例子（或者至少它显示了一些东西）：http: [//jsfiddle.net/frXRW/2/](http://jsfiddle.net/frXRW/2/)

与您提供的代码的第一个区别是我没有使用该`d3.csv.parse()`功能，我不知道您的问题是否来自那里，但如果您的问题来自那里，我建议您查看文档：[https:// github.com/mbostock/d3/wiki/CSV](https://github.com/mbostock/d3/wiki/CSV)

我改变的第二件事，我怀疑是你的问题的根源，是你忘了把`#body`标识符放在 之间`""`，所以它被认为是一个对象。因此，我只是更改了以下行：

```
var svg = d3.select(#body).append("svg") 
```

到

```
var svg = d3.select("#body").append("svg") 
```

如果这是您的问题，那么我建议您使用 chrome javascript 控制台，因为它给出了以下错误，正好指向上面的行：

> 未捕获的 SyntaxError：意外的标识符

# ruby-on-rails-3 - 如何在个人资料中显示链接的图像

> ID：15147169
> 
> 赞同：0
> 
> 时间：2013-02-28T22:48:33.870
> 
> 标签：ruby-on-rails-3

我认为这是一个简单的问题，但我不知道如何表达它以从搜索引擎获取示例解决方案。

我不想在我的网站上允许个人资料图片上传/头像，我想将指向图片的链接存储在个人资料数据库表中，并将这些图片嵌入个人资料显示页面视图中。

我最初的想法只是在数据库中提交一个字符串 url。从那里我不知道 rails 将如何解析字符串 url 并渲染图像。

非常感谢任何建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T22:52:51.027

如果您有一个指向存储为配置文件链接的图像的链接，那么在您的视图中，您可以执行以下操作：

将 image_link 添加到 Profile 模型

在控制器中

```
def show
  @profile = Profile.find(params[:id])
  ....
end 
```

在视图中

```
 <%= image_tag @profile.image_link %> 
```

# .net - SSE 浮点算术是否可重现？

> ID：15147174
> 
> 赞同：13
> 
> 时间：2013-02-28T22:49:05.060
> 
> 标签：.net, floating-point, sse, ieee-754, x87

x87 FPU 以使用内部 80 位精度模式而著称，这通常会导致跨编译器和机器产生意外且不可重现的结果。[在我在 .NET 上搜索](https://stackoverflow.com/questions/14864238/coercing-floating-point-to-be-deterministic-in-net)可重现的浮点数学时，我发现 .NET 的两个主要实现（Microsoft 和 Mono）都发出 SSE 指令，而不是 64 位模式下的 x87。

SSE(2) 对 32 位浮点数使用严格的 32 位寄存器，对 64 位浮点数使用严格的 64 位寄存器。通过设置[适当的控制字](http://msdn.microsoft.com/en-us/library/vstudio/c9676k6h.aspx)，可以选择将非正规数刷新为零。

因此，SSE 似乎不受 x87 精度相关问题的影响，唯一的变量是可以控制的非规范行为。

撇开先验函数（与 x87 不同，SSE 本身不提供）的问题，使用 SSE 是否能保证跨机器和编译器的可重现结果？例如，编译器优化能否转化为不同的结果？我发现了一些相互矛盾的意见：

> 如果您拥有 SSE2，请使用它并从此过上幸福的生活。SSE2 支持 32b 和 64b 操作，中间结果是操作数的大小。- **Yossi Kreinin**，[http://www.yosefk.com/blog/consistency-how-to-defeat-the- purpose-of-ieee-floating-point.html](http://www.yosefk.com/blog/consistency-how-to-defeat-the-purpose-of-ieee-floating-point.html)

...

> SSE2 指令 (...) 完全符合 IEEE754-1985，它们允许更好的再现性（由于静态舍入精度）和与其他平台的可移植性。**Muller 等**人， [浮点算术手册](http://books.google.ca/books?id=VDJVFM8WyzsC&pg=PA106&lpg=PA106&dq=SSE2%20ieee754&source=bl&ots=qmU1JKLLkX&sig=Wes4oPcxucRbX2WQm2pz41yhH-o&hl=fr&sa=X&ei=4-AvUd6RDoKsywHns4HADA&ved=0CFAQ6AEwAw#v=onepage&q=SSE2%20ieee754&f=false)- p.107

然而：

> 此外，您不能将 SSE 或 SSE2 用于浮点，因为它的指定太低而无法确定。-**约翰·瓦特** [http://www.gamedev.net/topic/499435-floating-point-determinism/#entry4259411](http://www.gamedev.net/topic/499435-floating-point-determinism/#entry4259411)

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-03-01T06:08:31.723

SSE 已完全指定*。Muller 是浮点运算方面的专家；你会相信谁，他还是游戏开发论坛上的某个人？

(*) 非 IEEE-754 操作（如 rsqrtss）实际上有一些例外，英特尔从未完全指定行为，但这不会影响 IEEE-754 基本操作，更重要的是它们的行为实际上不会改变在这一点上，因为它会破坏太多东西的二进制兼容性，所以它们和指定的一样好。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-01T15:43:41.990

正如斯蒂芬所指出的，由给定的 SSE 汇编代码产生的结果将是可重现的；您将相同的代码输入相同的输入，最后得到相同的输出。（也就是说，约翰·瓦特的话是完全错误的。）

但是，您将“编译器”一词扔在那里。那是完全不同的球类游戏。许多编译器在保持浮点代码的正确性方面仍然很糟糕。（[ATLAS 勘误页](http://math-atlas.sourceforge.net/errata.html#WhatComp)提到 clang “无法为某些操作生成正确的代码。”）如果您在代码中使用特殊函数，那么在某种程度上，您也受到任何实现您的数学库的人的摆布。

# php - ob_start 并包含问题

> ID：15147179
> 
> 赞同：2
> 
> 时间：2013-02-28T22:49:28.447
> 
> 标签：php, output-buffering

我们的网站已经运行了几年，但发生了一些变化，这真的很奇怪。我已经尝试与主机交谈，但没有任何问题得到解决。

问题是第`<?php`一个包含文件中第一个标记之前的所有内容在进入 OB 之前直接输出

例如：

```
<?php
ob_start();
?>
<h1>Welcome</h1>
<?php 
include('contentbox1.php'); 
include('contentbox2.php'); 
include('contentbox3.php'); 
?>
<b>Bye</b>
<?php
$content = ob_get_contents();
ob_end_clean();
echo("Included{".$content."}");
?> 
```

得到的输出是这样的：（注意这`<h1>Welcome</h1>`不是缓冲区内输出的其余内容）

```
<h1>Welcome</h1>
Included{
<div id="contentbox1"></div>
<div id="contentbox2"></div>
<div id="contentbox3"></div>
<b>Bye</b>
} 
```

正确的输出应该是什么（并且在我的本地机器上）：

```
Included{
<h1>Welcome</h1>
<div id="contentbox1"></div>
<div id="contentbox2"></div>
<div id="contentbox3"></div>
<b>Bye</b>
} 
```

它给我们的网站造成了重大问题，我不知道为什么。它在我的本地机器上完美运行，而不是我们多年来一直使用的主机。

**解决方案：** 事实证明，当我重新上传 时`test.php`，我网站上的内容框和许多其他文件变得有趣并且可能已损坏。一旦我重新上传了我的整个网站（即使没有发生代码更改），我运行缓慢的网站现在超级快，所有问题都消失了。我的文件也被其他主机损坏了，所以如果你将来也有奇怪的东西，请记住这一点。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-28T23:03:40.443

您的代码已正确执行，因为 ob_get_clean 是这样工作的：

[ob_get_clean()](http://php.net/manual/en/function.ob-get-clean.php)

```
ob_get_clean — Get current buffer contents and delete current output buffer 
```

> 返回输出缓冲区的内容**并结束输出缓冲**。如果输出缓冲未激活，则返回 FALSE。

使用 ob_get_contents();

```
ob_start();
include('test.php');
$content = ob_get_contents();
ob_end_clean();
echo("Included{".$content."}"); 
```

更新：

```
<?php
ob_start();
?>
<h1>Welcome</h1>
<?php 
include('contentbox1.php'); 
include('contentbox2.php'); 
include('contentbox3.php'); 
?>
<b>Bye</b>
<?php
$content = ob_get_contents();
ob_end_clean();
echo("Included{".$content."}");
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T23:08:15.013

尝试以下操作：

将此添加到 test.php 的开头

```
<?php include("empty_file.php"); ?> 
```

empty_file.php 的内容：

```
<?php
echo "";
?> 
```

# java - 计算平方根和立方根的递归算法

> ID：15147184
> 
> 赞同：4
> 
> 时间：2013-02-28T22:49:48.143
> 
> 标签：java, algorithm, recursion

当我运行我的代码时，有时我会得到这个错误：

```
Exception in thread "main" java.lang.StackOverflowError       
at squareroot.SquareRoot.GetSquareRoot (SquareRoot.java: 9)   
at squareroot.SquareRoot.GetSquareRoot (SquareRoot.java: 13)   
at squareroot.SquareRoot.GetSquareRoot (SquareRoot.java: 13)` 
```

我正在检查我的代码，但我没有进入无限循环，请问我该如何解决这个问题？，谢谢。

```
public static double GetSquareRoot(double n, double low, double high) {
    double sqrt = (low + high) / 2;
    if (sqrt*sqrt > n)
        return GetSquareRoot(n, low, sqrt);
    if (sqrt*sqrt < n)
        return GetSquareRoot(n, sqrt, high);
    return sqrt;
}
public static double Sqrt(double n){
    return GetSquareRoot(n, 0, n);
}

public static double GetCubicRoot(double n, double low, double high) {
    double cbrt = (low + high) / 2;
    if (cbrt*cbrt*cbrt > n)
        return GetCubicRoot(n, low, cbrt);
    if (cbrt*cbrt*cbrt < n)
        return GetCubicRoot(n, cbrt, high);
    return cbrt;
}
public static double Cbrt(double n) {
    return GetCubicRoot(n, 0, n);
}

public static void main(String[] args) {
    Scanner Input = new Scanner(System.in);

    double n = Input.nextDouble();
    double sqrt = Sqrt(n);
    double cbrt = Cbrt(n);

    System.out.println("Raiz cuadrada igual a: "+ sqrt);        
    System.out.println("Raiz cubica igual a: "+ cbrt);  

} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-28T22:56:16.977

您的结果不太可能达到结束条件，因为乘以数字不太可能产生确切的数字，您必须引入误差范围，因为平方根通常不是精确的，并且由于浮点限制，浮点算术使用近似值。

```
public static double GetSquareRoot(double n, double low, double high) {
    double errorMargin = 0.001;        
    double sqrt = (low + high) / 2;
    double diff = sqrt*sqrt - n;
    if ( diff > errorMargin)
        return GetSquareRoot(n, low, sqrt);
    if ( -diff > errorMargin)
        return GetSquareRoot(n, sqrt, high);
    return sqrt;
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-02-28T22:55:44.150

您要停止的条件是“如果 n == num”，而 n 和 num 是双倍的。众所周知，双精度数或浮点数是不精确的，因此可能永远不会满足此条件。而是使用这个

```
if(Math.abs(sqrt*sqrt - n) < .001)
     return sqrt; 
```

当两个数字之间的差异变得“足够小”时，这将停止。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-02-28T22:56:27.867

当您使用 double 时，您应该使用 delta double 值。因为您的计算值可能与您预期的不同。

```
bool CompareDoubles2 (double A, double B) 
{
   diff = A - B;
   return (diff < EPSILON) && (-diff > EPSILON);
} 
```

# algorithm - 松弛子集和的伪多项式或快速解

> ID：15147187
> 
> 赞同：1
> 
> 时间：2013-02-28T22:49:56.910
> 
> 标签：algorithm, dynamic-programming, approximation

我有一个正整数数组 A [a0, a1, a2, ..., an] 和一个正数 K。我需要找到数组 A 的所有（或几乎所有）子集 U 和 V 对，例如：

1.  U 中所有元素的总和小于或等于 K
2.  V中所有元素的总和小于或等于K
3.  U + V 可能不包含原始数组 A 的所有元素
4.  U 中的所有元素都应该在初始数组 A 中 V 中的所有元素之前。例如，假设我们选择 U = [a1, a3, a5] 那么我们可以仅从 a6 开始构建数组 V。在这种情况下，不允许使用元素 a0、a2 或 a4。

我能够找到 DP 解决方案，即 O(N^2 * K^2) （其中 N 是 A 中的元素总数）。尽管 N 和 K 很小（< 100），但仍然太慢。

我正在寻找一些近似算法或伪多项式动态规划算法。[装箱](http://en.wikipedia.org/wiki/Bin_packing_problem)问题看起来与我的相似，但我不确定如何将其应用于我的约束......

请指教。

编辑：每个数字的上限等于 50

# python - 类属性和方法

> ID：15147189
> 
> 赞同：0
> 
> 时间：2013-02-28T22:50:00.890
> 
> 标签：python, jython

有了Class的属性和方法，要在类中引用它们，我们应该使用Classname。或自我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T22:56:22.823

`self.attr`引用实例的属性，如果实例上没有定义指定名称的属性，则*回退到类。*通常这是合理的行为。如果`self.__class__.attr`您特别想获取类的属性，请使用。

很少有人会覆盖实例上的方法，这需要构造一个特殊的“实例方法”对象，因此`self.method()`通常是正确的（即使对于使用`@classmethod`or声明的方法`@staticmethod`）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T22:50:47.427

我认为这两种方式都有效，但与 Java 相比有点奇怪。

# c++ - 生命游戏和动态数组的问题，c++

> ID：15147191
> 
> 赞同：0
> 
> 时间：2013-02-28T22:50:09.017
> 
> 标签：c++, arrays, memory, dynamic, conways-game-of-life

我正在尝试编写人生游戏。当我尝试迭代几代时，我最终得到了垃圾。我已经尝试了很多不同的东西，但我没有看到我的错误，但显然有一个错误。任何帮助将不胜感激。当我尝试将游戏的逻辑应用于旧数组以创建新数组时，我几乎可以肯定我做错了，但我不确定是什么。这是四个功能之一，我已经测试了其他功能，我很肯定这个缺陷存在于这个功能中。最终目标是让游戏在每一代都根据需要扩展和缩小。

```
void iterateGeneration ()
{
ifstream fin;
fin.open("tmp.txt");
ofstream fout;

char **arr=new char * [ROWS];
for(int i=0; i<ROWS; i++)
    arr[i] = new char [COLUMNS];

int lifecheck=0;
//read in current generation from tmp.txt
for(int i=0; i<ROWS; i++)
    {
    fin.getline(arr[i], COLUMNS);
    }
fin.close();

char **new_arr=new char * [ROWS];
for(int i=0; i<ROWS; i++)
    new_arr[i]= new char [COLUMNS];

//count live neighbors, then determine if cell will be alive next generation
for(int i=0; i<ROWS; i++)
    {
    for(int j=0; j<COLUMNS-1; j++)
        {
        lifecheck=0;
        if((i==0 && j==0) || (i==0 && j==(COLUMNS-2)) || (i==(ROWS-1) && j==0) ||     (i==(ROWS-1) && j==(COLUMNS-2)))//corners always stay dead
            {
            lifecheck=0;
            }
        else if(i==0)//special check for first row, only three checks since neighbors     in first row is always dead
            {
            if(arr[i+1][j-1]=='1')
                lifecheck+=1;
            if(arr[i+1][j]=='1')
                lifecheck+=1;
            if(arr[i+1][j+1]=='1')
                lifecheck+=1;
            }
        else if(i==(ROWS-1))//special check for last row
            {
            if(arr[i-1][j-1]=='1')
                lifecheck+=1;
            if(arr[i-1][j]=='1')
                lifecheck+=1;
            if(arr[i-1][j+1]=='1')
                lifecheck+=1;
            }
        else if(j==0)//special check for first column
            {
            if(arr[i-1][j+1]=='1')
                lifecheck+=1;
            if(arr[i][j+1]=='1')
                lifecheck+=1;
            if(arr[i+1][j+1]=='1')
                lifecheck+=1;
            }
        else if(j==(COLUMNS-2))//special check for last column
            {
            if(arr[i-1][j-1]=='1')
                lifecheck+=1;
            if(arr[i][j-1]=='1')
                lifecheck+=1;
            if(arr[i+1][j-1]=='1')
                lifecheck+=1;
            }
        else
            {
            if(arr[i-1][j-1]=='1')
                lifecheck+=1;
            if(arr[i-1][j]=='1')
                lifecheck+=1;
            if(arr[i-1][j+1]=='1')
                lifecheck+=1;
            if(arr[i][j-1]=='1')
                lifecheck+=1;
            if(arr[i][j+1]=='1')
                lifecheck+=1;
            if(arr[i+1][j-1]=='1')
                lifecheck+=1;
            if(arr[i+1][j]=='1')
                lifecheck+=1;
            if(arr[i+1][j+1]=='1')
                lifecheck+=1;
            }
        if(arr[i][j]=='0')
            {
            if(lifecheck==3)
                new_arr[i][j]=='1';
            else
                new_arr[i][j]=='0';
            }
        else if(arr[i][j]=='1')
            {
            if(lifecheck==2)
                new_arr[i][j]=='1';
            else if(lifecheck==3)
                new_arr[i][j]=='1';
            else
                new_arr[i][j]=='0';
            }

        else
            new_arr[i][j]=='0';
        }//2nd for
    }//1st for

fout.open("tmp.txt");

for(int i=0; i<ROWS; i++)
    {
    fout << new_arr[i];
    fout << endl;
    }

for(int p=0; p<ROWS; p++)
    {
    delete [] arr[p];
    delete [] new_arr[p];
    }
delete [] arr;
delete [] new_arr;
}

using namespace std;

const int NUM_GENERATIONS = 1; //set to a smaller number for debugging

int main() 
{
    populateWorld(FILE_NAME);

    showWorld();

    for (int iteration = 0; iteration < NUM_GENERATIONS; iteration++) 
    {

        if (WINDOWS)
           system("cls"); //Windows only
        else
           system("clear"); //Linux only

        iterateGeneration();

        showWorld();
    } 

    if (WINDOWS)
        system("PAUSE");

    return 0;
}

0000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000010000000000000000000000000000000000000000000
0000000000000000000000000000001010000000000000000000000000000000000000000000
0000000000000000000011000000110000000000001100000000000000000000000000000000
0000000000000000000100010000110000000000001100000000000000000000000110000000
0000000011000000001000001000110000000000000000000000000000000000000110000000
0000000011000000001000101100001010000000000000000000000000000000000000000000
0000000000000000001000001000000010000000000000000000000000000000000000000000
0000000000000000000100010000000000000000000000000000000000000000000000000000
0000000000000000000011000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000001110000000
0000000000000000000000000000000000000000000000000000000000000000010001000000
0000000000000000000000000000000000000000000000000000000000000000100000100000
0000000000000000000000000000000000000000000000000000000000000000100000100000
0000000000000000000000000000000000000000000000000000000000000000000100000000
0000000000000000000000000000000000000000000000000000000000000000010001000000
0000000000000000000000000000000000000000000000000000000000000000001110000000
0000011000000000000000111000000000000000000000000000000000000000000100000000
0000011000000000000000101000000000000000000000000000000000000000000000000000
0000000000000000000000110000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000011100000
0000000000000000000000000000000000000000000000000000000000000000000011100000
0000000000000000000000000000000000000000000000000000000000000000000100010000
0000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000001100011000
0000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000
0001100011000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000
0000100010000000000000000000000000000000000000000000000000000000000000000000
0000011100000000000000000000000000000000000000000000000000000000000000000000
0000011100000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000110000000000000000000000
0000000000000000000000000000000000000000000000000001010000000000000001100000
0000000010000000000000000000000000000000000000000001110000000000000001100000
0000000111000000000000000000000000000000000000000000000000000000000000000000
0000001000100000000000000000000000000000000000000000000000000000000000000000
0000000010000000000000000000000000000000000000000000000000000000000000000000
0000010000010000000000000000000000000000000000000000000000000000000000000000
0000010000010000000000000000000000000000000000000000000000000000000000000000
0000001000100000000000000000000000000000000000000000000000000000000000000000
0000000111000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000001100000000000000000000
0000000000000000000000000000000000000000000000000000100010000000000000000000
0000000000000000000000000000000000000000000100000001000001000000001100000000
0000000000000000000000000000000000000000000101000011010001000000001100000000
0000000110000000000000000000000011000000000000110001000001000000000000000000
0000000110000000000000000000000011000000000000110000100010000000000000000000
0000000000000000000000000000000000000000000000110000001100000000000000000000
0000000000000000000000000000000000000000000101000000000000000000000000000000
0000000000000000000000000000000000000000000100000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000

x"#\00\00x"#\00\00\00\00\00\00\00\00\00\00\00\00\00\00\00\00\00\00\00\00\00\00\00\00\00\00\00\00\00\00\00\00\00\00\00\00\00\00\00\00\00\00\00\00\00\00\00\00\00\00`ó!#\00\00 \00\00
x"#\00\00x"#\00\00\00\00\00\00\00\00\00\00\00\00\00\00\00\00\00\000000000000000000000000000000
00000000000000
x"#\00\00x"#\00\00\00\00\00\00\00\00\00\00\00\00\00\00\00\00\00\000000000000
00000000000000000000000000000010
x"#\00\00x"#\00\00\00\00\00\00\00\00\00\00\00\00\00\00\00\00\00\0000000000000000110000001100000000000011000000
x"#\00\00x"#\00\00\00\00\00\00\00\00\00\00\00\00\00\00\00\00\00\0000001100000000000011000000000000000000000001
x"#\00\00x"#\00\00\00\00\00\00\00\00\00\00\00\00\00\00\00\00\00\000000000000000000000000000110000000
00000000
x"#\00\00x"#\00\00\00\00\00\00\00\00\00\00\00\00\00\00\00\00\00\000000000000000000
00000000000000000010000010
x"#\00\00x"#\00\00\00\00\00\00\00\00\00\00\00\00\00\00\00\00\00\0000000000000000000001000100000000000000000000
x"#\00\00x"#\00\00\00\00\00\00\00\00\00\00\00\00\00\00\00\00\00\0000110000000000000000000000000000000000000000
x"#\00\00x"#\00\00\00\00\00\00\00\00\00\00\00\00\00\00\00\00\00\000000000000000000000000000000000000000000
00
x"#\00\00x"#\00\00\00\00\00\00\00\00\00\00\00\00\00\00\00\00\00\000000000000000000000000
00000000000000000000
x"#\00\00x"#\00\00\00\00\00\00\00\00\00\00\00\00\00\00\00\00\00\000000
00000000000000000000000000000000000000
x"#\00\00x"#\00\00\00\00\00\00\00\00\00\00\00\00\00\00\00\00\00\0000000000000000000000000000000000000000000000
x"#\00\00x"#\00\00\00\00\00\00\00\00\00\00\00\00\00\00\00\00\00\0000000000000000000000000000000000000100010000
x"#\00\00x"#\00\00\00\00\00\00\00\00\00\00\00\00\00\00\00\00\00\000000000000000000100000100000
00000000000000
x"#\00\00x"#\00\00\00\00\00\00\00\00\00\00\00\00\00\00\00\00\00\000000100000
00000000000000000000000000000000
x"#\00\00x"#\00\00\00\00\00\00\00\00\00\00\00\00\00\00\00\00\00\0000000000000000000000000000000000000000000000
x"#\00\00x"#\00\00\00\00\00\00\00\00\00\00\00\00\00\00\00\00\00\0000000000000000000000000000000000000000000011
x"#\00\00x"#\00\00\00\00\00\00\00\00\00\00\00\00\00\00\00\00\00\000000000000000000000000000100000000
00000110
x"#\00\00x"#\00\00\00\00\00\00\00\00\00\00\00\00\00\00\00\00\00\000000000000000000
00000000000000000000001100
x"#\00\00x"#\00\00\00\00\00\00\00\00\00\00\00\00\00\00\00\00\00\0000000000000000000000000000000000000000000000
x"#\00\00x"#\00\00\00\00\00\00\00\00\00\00\00\00\00\00\00\00\00\0000000000000000000000000000000000000000000000
x"#\00\00x"#\00\00\00\00\00\00\00\00\00\00\00\00\00\00\00\00\00\000000000000000000000000000000000100010000
00
x"#\00\00x"#\00\00\00\00\00\00\00\00\00\00\00\00\00\00\00\00\00\000000000000000000000000
00000000000000000000
x"#\00\00x"#\00\00\00\00\00\00\00\00\00\00\00\00\00\00\00\00\00\001000
00000000000000000000000000000000000000
x"#\00\00x"#\00\00\00\00\00\00\00\00\00\00\00\00\00\00\00\00\00\0000000000000000000000000000000000000000000000
x"#\00\00x"#\00\00\00\00\00\00\00\00\00\00\00\00\00\00\00\00\00\0000000000000000000000000000000000000000000000
x"#\00\00x"#\00\00\00\00\00\00\00\00\00\00\00\00\00\00\00\00\00\000000000000000000000000000000
00000000000000
x"#\00\00x"#\00\00\00\00\00\00\00\00\00\00\00\00\00\00\00\00\00\000000000000
00001000100000000000000000000000
x"#\00\00x"#\00\00\00\00\00\00\00\00\00\00\00\00\00\00\00\00\00\0011000000000000000000000000000000000000000000
x"#\00\00x"#\00\00\00\00\00\00\00\00\00\00\00\00\00\00\00\00\00\0000000000000000000000000000000000000000000000
x"#\00\00x"#\00\00\00\00\00\00\00\00\00\00\00\00\00\00\00\00\00\000000000000110000000000000000000000
00000000
x"#\00\00x"#\00\00\00\00\00\00\00\00\00\00\00\00\00\00\00\00\00\000000000001100000
00000000100000000000000000
x"#\00\00x"#\00\00\00\00\00\00\00\00\00\00\00\00\00\00\00\00\00\0000000001110000000000000000000000000000000000
x"#\00\00x"#\00\00\00\00\00\00\00\00\00\00\00\00\00\00\00\00\00\0000000000000000000000000000000000000000000000
x"#\00\00x"#\00\00\00\00\00\00\00\00\00\00\00\00\00\00\00\00\00\000000000000000000000000000000000000000000
00
x"#\00\00x"#\00\00\00\00\00\00\00\00\00\00\00\00\00\00\00\00\00\000000000000000000000000
00000100000100000000
x"#\00\00x"#\00\00\00\00\00\00\00\00\00\00\00\00\00\00\00\00\00\000000
00000010001000000000000000000000000000
x"#\00\00x"#\00\00\00\00\00\00\00\00\00\00\00\00\00\00\00\00\00\0000000000000000000000000000000000000000000000
x"#\00\00x"#\00\00\00\00\00\00\00\00\00\00\00\00\00\00\00\00\00\0000000000000000000000000000000000000000000000
x"#\00\00x"#\00\00\00\00\00\00\00\00\00\00\00\00\00\00\00\00\00\000000000000000000000000000000
00000000000000
x"#\00\00x"#\00\00\00\00\00\00\00\00\00\00\00\00\00\00\00\00\00\000000000000
00000000000000000000000000000000
x"#\00\00x"#\00\00\00\00\00\00\00\00\00\00\00\00\00\00\00\00\00\0000000000000000000000000000000000000000000000
x"#\00\00x"#\00\00\00\00\00\00\00\00\00\00\00\00\00\00\00\00\00\0000000000000000000000000000001000100000000000
x"#\00\00x"#\00\00\00\00\00\00\00\00\00\00\00\00\00\00\00\00\00\000100000001000001000000001100000000
00000000
x"#\00\00x"#\00\00\00\00\00\00\00\00\00\00\00\00\00\00\00\00\00\000000001100000000
00000001100000000000000000
x"#\00\00x"#\00\00\00\00\00\00\00\00\00\00\00\00\00\00\00\00\00\0000000001100000000000000000000000110000000000
x"#\00\00x"#\00\00\00\00\00\00\00\00\00\00\00\00\00\00\00\00\00\0000000000000000000000000000001100000011000000
x"#\00\00x"#\00\00\00\00\00\00\00\00\00\00\00\00\00\00\00\00\00\000000000101000000000000000000000000000000
00
x"#\00\00x"#\00\00\00\00\00\00\00\00\00\00\00\00\00\00\00\00\00\000000000000000000000000
00000000000000000000
x"#\00\00x"#\00\00\00\00\00\00\00\00\00\00\00\00\00\00\00\00\00\000000 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T23:10:06.413

您应该显式输出数组的每个字符，而不是整个字符数组。

我相信 fprintf 会像你想要的那样输出一个数组，但是自从我使用 c++ 以来已经很长时间了。可能不是因为在高中写了一个非常相似的程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T23:10:54.903

这是您保存的位置`new_arr`：

```
for(int i=0; i<ROWS; i++)
    {
    fout << new_arr[i];
    fout << endl;
    } 
```

具体来说，这里是错误：

```
 fout << new_arr[i]; 
```

将a 发送`char *`到 an`ostream`将发送连续的字符，直到`'\0'`找到“空终止符”字符。

您的代码从不设置空终止符，因此很难判断正在写入多少。根据你的垃圾结果，它太多了。

# php - 用占位符匹配子串

> ID：15147196
> 
> 赞同：2
> 
> 时间：2013-02-28T22:50:35.867
> 
> 标签：php, substring, match

**定义**：我在处理[PHP 字符串与动态限制](https://stackoverflow.com/questions/15141928/php-string-differences-and-dynamic-restrictions)
的差异 时遇到了这种情况。它可能是更好地理解我想要什么的参考。

**问题**：
假设我有一个**主**字符串：

> *“这是一个带有**{2} 个**占位符的**{1}**字符串”*

 **和一个**次要**的：

> *“这是一个**非常相似**的字符串，其中包含占位符的**数据”***

**问题**：
如何为每个占位符获取一个变量，称为`$v1`, `$v2`, `$vn`，其值分别是**“非常相似”**和**“数据”**？如您所见，我需要为每个占位符分配不在主占位符中的子字符串。

**注意**：
我正在使用*PHP*。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T22:57:13.820

您应该能够使用正则表达式来执行以下操作：

```
$pattern="/This is a (.*) string with (.*) placeholders/";
$subject="This is a very similar string with data for the placeholders";

preg_match($pattern,$subject,$matches);

$v1=$matches[1];
$v2=$matches[2]; 
```

有关 php 中正则表达式的更多信息，请参阅[http://php.net/manual/en/function.preg-match.php](http://php.net/manual/en/function.preg-match.php)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T23:00:59.787

也许使用[sprintf ？](http://php.net/manual/en/function.sprintf.php)

```
$string = 'This is a %s string with %s placeholders';
$v1 = 'very similar';
$v2 = 'data for the';

$result = sprintf($string, $v1, $v2); 
```**

# c++ - 如何通过 C++ 中的类结构共享代码？

> ID：15147197
> 
> 赞同：0
> 
> 时间：2013-02-28T22:50:41.070
> 
> 标签：c++, inheritance

我正在为 Qt 框架编写，我想创建一个 QWidget。QWidget 暴露了一些接口，例如mousePressEvent 和mouseReleaseEvent。我想扩展这个类以允许 mouseClickEvent 和 mouseDoubleClickEvent。通常，您会考虑扩展 QWidget 并实现这些功能。问题是作为扩展 QWidget 的库的一部分提供了其他类（例如 QPushButton）。因此，如何在不必扩展每个类并复制代码的情况下将添加的功能添加到这些类中？

```
 class ClickHandeler : public QWidget {
    virtual void mouseClickEvent();
    virtual void mouseDoubleClickEvent();

    int clickCount; //initialized to 0;

    void mouseReleaseEvent(QEvent *event){
        clickCount++;
        QTimer::singleShot(500, this, SLOT(checkClick()));
    }

    void checkClick(){
        if (clickCount == 2){
            this->mouseDoubleClickEvent();
            clickCount = clickCount-2;
        } else {
            this->mouseDoubleEvent()
            clickCount--;
        }
    }
}

// QPushButton inherits QWidget too! Yikes!
class MyPushButton : public QPushButton, public ClickHandeler {
    void mouseClickEvent(){
        alert("i have been clicked");
    }

    void mouseDoubleClickEvent(){
        alert("i have been double clicked");
    }
} 
```

我想要 MyPushButton 之类的东西，但我担心函数覆盖不会按预期工作。

如果这个问题对人们来说很明显，我很抱歉，但我不知道术语是什么。我用谷歌搜索了 c++ 的接口，我得到了抽象接口（它不能正确解决这个问题）。如果我只是愚蠢并且需要知道一个更好的谷歌术语，请在评论中告诉我，我会删除这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T23:57:44.907

我认为您只需要扩展 QWidget 并调用 QWidget 相同的功能。例如：

```
class QWidget {
public:
    void mouseClickEvent();
};

class QPushButton {
public:
    void mouseClickEvent();
};

class MyWidget : public QWidget, public QPushButton {
public:
    void mouseClickEvent()
    {
        //base::mouseClickEvent();// ambiguous
        QWidget::mouseClickEvent();
        QPushButton::mouseClickEvent();
        /* Do your own code here */
    }
}; 
```

# jquery - Bootstrap 导航栏响应式

> ID：15147201
> 
> 赞同：0
> 
> 时间：2013-02-28T22:50:55.133
> 
> 标签：jquery, html, css, twitter-bootstrap

努力理解我在这里做错了什么。

```
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Untitled Document</title>
<link rel="stylesheet" type="text/css" href="Cyborg/bootstrap.css">
<link rel="stylesheet" type="text/css" href="bootstrap-responsive.css">
</head>

<body>

<div id="navigation">

    <div class="navbar">
        <div class="navbar-inner">
            <div class="container">
                <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                </a>
                <a class="brand" href="#">Project Name</a>
                    <div class="nav-collapse">
                        <ul class="nav">
                            <li><a href="/home.aspx">HOME</a></li>
                            <li><a href="/news.aspx">NEWS</a></li>
                            <li><a href="/thingstodo.aspx">THINGS TO DO</a></li>
                            <li><a href="/business.aspx">BUSINESS</a></li>
                            <li><a href="/sport.aspx">SPORT</a></li>
                            <li><a href="/villagelife.aspx">VILLAGE LIFE</a></li>
                            <li><a href="/talk.aspx">TALK</a></li>
                        </ul>
                    </div><!-- /.nav-collapse -->
            </div><!-- /.container -->
        </div><!-- /.navbar-inner -->
    </div><!-- /.navbar -->
</div>
</body>
<script src="/ajax/libs/jquery/1.9.0/jquery.min.js" />
 <script src="js/bootstrap.min.js" />
</html> 
```

该按钮出现在@media 下小于 940 像素，但该按钮未激活！

现在变得非常令人沮丧，遵循了一些例子，但没有得到任何结果

请问有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T02:20:18.400

包含 nav-collapse 的 div 必须包含`collapse`类。还需要引导响应 css，因此请确保其正确放置。

请执行下列操作 ：

```
<div class="nav-collapse collapse"> 
```

确保这两个 css 文件在同一个目录中，这是一个好习惯，您可以通过以下方式拥有它们

```
<link rel="stylesheet" type="text/css" href="Cyborg/bootstrap.css"> /*here in cyborg directory*/
<link rel="stylesheet" type="text/css" href="bootstrap-responsive.css">/*put this one in Cyborg as well */ 
```

将它放在 Cyborg 目录中，如下所示：

```
<link rel="stylesheet" type="text/css" href="Cyborg/bootstrap-responsive.css"> 
```

jquery 链接似乎也是问题所在，请使用以下内容：

```
 <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js">
  </script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T08:25:51.463

谢谢大家，我刚刚发现了一些相当愚蠢的事情。Chrome 正在为 . 需要，现在正在工作。

# r - 是否可以将单独的箱线图摘要合并为一个并创建组合图？

> ID：15147203
> 
> 赞同：2
> 
> 时间：2013-02-28T22:50:56.710
> 
> 标签：r, statistics, boxplot

我正在处理相当大的数据集（每月大约 4 个 mio 行，具有 25 个数字属性和 4 个因子属性）。我想创建一个图表，其中包含每个月（过去 36 个月）每个产品的每个数字属性（4 个因素属性之一）的箱线图。

以产品 A 为例：

```
 - 
      _             |          -
     _|_            |         _|_
    |   |           |        |   |
    |   |          _|_       |   |
    |   |         |   |      |---|
    |   |         |---|      |   |
    |---|         |   |      |   |
    |_ _|         |   |      |_ _|
      |           |_ _|        |
      |             |          |
      -             |          -
                    -

 --------------------------------------------------------------
    jan '10      feb '10    mar '10 ................... feb '13 
```

但由于这些是我将要使用的相当大的数据集，我想要一些建议来开始如何处理。我的想法（但我不确定这是否可能）是

*   a) 每个产品每月提取数据
*   b）为该特定月份创建一个箱线图（假设产品 A 为 1 月 10 日）
*   c) 将箱线图汇总数据存储在某处
*   d) 在所有月份重复 ac，直到 2013 年 2 月
*   e) 将所有存储的箱线图汇总数据合二为一
*   f) 绘制组合箱线图 g) 对所有其他产品重复 af

所以我的主要问题是：*是否可以将单独的 boxlot 摘要合并为一个并创建上面所描绘的组合图？*

任何帮助，将不胜感激，

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T01:05:39.640

这是一个简单的示例，您可能可以做一些事情：

读取单个数据集 - 您可能希望覆盖相同的数据或将此步骤包装在一个函数中，因为您正在使用大量数据。

```
dset1 <- 1:10
dset2 <- 10:20
dset3 <- 20:30 
```

存储一些箱线图信息，注意`plot=FALSE`

```
result1 <- boxplot(dset1,plot=FALSE,names="month1")
result2 <- boxplot(dset2,plot=FALSE,names="month2")
result3 <- boxplot(dset3,plot=FALSE,names="month3") 
```

将数据分组并绘制`bxp`

```
mylist <- list(result1, result2, result3)
groupbxp <- do.call(mapply, c(cbind, mylist))
bxp(groupbxp) 
```

结果：

![在此处输入图像描述](../Images/df627286f5ea0eae80bbe938588d3014.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T23:45:53.997

您将无法绝对精确地预测“fivenum”值的值将用于组合值的组合。考虑两组的情况，每组中的百分位数为 75，以及每组中的观察计数。假设百分位数不相等。您不能只取百分位数的加权平均值来获得聚合值的第 75 个百分位数。请参阅帮助页面`?boxplot.stats`。但是，我认为，通过使用 Fivenum 集合的中值，您可能会非常接近。这可能是您开始考试的地方。

```
 mo.mtx <- tapply(dat$values, dat$month, function( mo.dat) c( fivenum(mo.dat), length(mo.dat) ) 
 matplot( mo.mtx[, 1:5] , type="l" ) 
```

# c++ - Tbb 并行流水线就地修改令牌

> ID：15147204
> 
> 赞同：2
> 
> 时间：2013-02-28T22:51:00.573
> 
> 标签：c++, tbb

我想使用 tbb 管道来并行处理令牌。

但我不需要在中间过滤器期间取消分配和重新分配令牌。可以简单地就地修改并返回它吗？例如，我想做：

```
class MiddleFilter
{
SomeClass* operator() (SomeClass* input)
{
input->somevalue *= 2;
return input;
}
} 
```

并打电话

```
tbb::parallel_pipeline(nbtoken, someinputfilter 
& tbb::make_filter<SomeClass*, SomeClass*>(tbb::filter::parallel, MiddleFilter())
& someoutputfilter) 
```

`SomeClass`将在输入和输出过滤器中分配和释放。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-01T22:19:03.753

是的，允许对传递给过滤器的对象进行就地修改，并且在处理复制成本高的对象时通常很有用。在将 Bzip2 与 parallel_pipeline 并行化时，我已经这样做了。就 TBB 而言，您示例中的指针“输入”只是 TBB 不尝试解释的值。

我有时会使用另一个技巧来保存第一个/最后一个过滤器中的分配/释放。如果第一个和最后一个过滤器是串行过滤器，并且第一个过滤器产生的对象与最后一个过滤器消耗的类型相同，则可以使用对象的循环队列来回收对象。缓冲区的大小必须为 max_number_of_live_tokens（parallel_pipeline 的第一个参数）。第一个过滤器可以通过出队来分配对象；最后一个阶段可以通过将对象入队来释放它。从 max_number_of_live_tokens 队列开始。令牌限制保证队列永远不会下溢或溢出。

巧妙的部分是循环队列可以使用简单的串行代码来实现。一个数组和两个指向尾部/头部的指针就足够了。不需要原子操作、锁定或内存栅栏。没有下溢/溢出的保证意味着入队操作可以通过仅仅碰撞尾指针（并且很高兴地忽略头指针）来实现。对于双端队列操作，反之亦然。由于调用者是串行过滤器，因此不需要锁定。更糟糕的是，尾指针和头指针同时碰撞，但独立。TBB 将负责内存防护。

# c# - 如何使用与实体框架的多对多关系插入

> ID：15147205
> 
> 赞同：1
> 
> 时间：2013-02-28T22:51:08.473
> 
> 标签：c#, entity-framework, ef-code-first, many-to-many

我正在尝试与组和学生建立多对多关系，因此可以将学生分配到许多组，并且可以将许多学生分配给组。当我调用 context.savechanges() 时，我不断收到错误消息。在我的对象中，我确实有正确的配置，两者都有虚拟 ICollection。我的配置如下：

```
public class DataContext : DbContext
{
    public DbSet<Student> StudentsContext { get; set; }
    public DbSet<Group> GroupsContext { get; set; }
    public DbSet<Phase> PhaseContext { get; set; }
    public DbSet<Admin> AdminContext { get; set; }

    protected override void OnModelCreating(DbModelBuilder modelBuilder)
    {
        base.OnModelCreating(modelBuilder);
        modelBuilder.Entity<Student>()
            .HasMany(g => g.Groups)
            .WithMany(s => s.GroupMembers)
            .Map(x => x.MapLeftKey("StudentId")
                .MapRightKey("GroupId")
                .ToTable("Student_XRef_Group"));

    }
} 
```

然后在控制器中作为测试我会尝试：

```
 var phase = phaseRepository.Select().SingleOrDefault(x => x.PhaseId == phaseId);

        phase.Groups.Clear();

        //Testing
        Group testGroup = new Group();
        testGroup.GroupNumber = 1;

        testGroup.GroupMembers.Add(AllStudents[0]); //Students of type Student
        phase.Groups.Add(testGroup);
        //Testing

        context.SaveChanges(); 
```

然后当它到达 context.savechanges 我得到以下错误：

*操作失败：无法更改关系，因为一个或多个外键属性不可为空。当对关系进行更改时，相关的外键属性将设置为空值。如果外键不支持空值，则必须定义新关系，必须为外键属性分配另一个非空值，或者必须删除不相关的对象。*

** 已解决 ** 原来我调用 phase.Groups.clear() 是问题所在，为什么我不知道。我希望现在可以告诉我为什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-01T01:51:41.347

在这种情况下调用`Clear()`您的集合只会尝试分离 the`Phase`和 the之间的关系，`Group`而不是实际删除对象。因此，您尝试将每个外键引用设置为 null，因此出现不可为 null 的异常。

我可以理解混淆的来源，毕竟我们可以`phase.Groups.Add(...)`用来添加一个新实体，但重要的是要记住它不适用于`Remove()`and `Clear()`。

要实现您想要的，您可以`DeleteObject()`在每个要删除的组上使用：

```
context.Groups.DeleteObject(groupToDelete); 
```

# sql - Oracle 选择不同的语法错误

> ID：15147208
> 
> 赞同：1
> 
> 时间：2013-02-28T22:51:13.777
> 
> 标签：sql, oracle, boolean

为什么 oracle 不识别这句话？它说在预期的地方找不到“来自关键字”。它出什么问题了 ？

例子：

```
select distinct a.id = b.id
from table1 a, table2 b
where a.column = X and b.column =Y; 
```

MySQL 允许我这样做。那么我应该改变什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-28T22:52:27.880

您的问题是 a.id = b.id 在 select 子句中时不是有效的 sql。

**在下面编辑**

鉴于您对预期布尔结果的评论，也许您正在寻找一个案例构造。

```
select case when a.id = b.id then 1 else 0 end BooleanResult
from tablea a join tableb b on something
where etc 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-28T23:05:00.317

首先，Oracle 在 SQL 中没有布尔数据类型（PL/SQL 中有布尔数据类型），因此查询不能返回布尔值。

你可以做类似的事情

```
select distinct (case when a.id = b.id 
                      then 1
                      else 0
                  end)
  from table1 a, 
       table2 b
 where a.column = X 
   and b.column = Y; 
```

然而，让我感到非常不可能的是，你真的想在两者之间做一个笛卡尔积，`table1`然后`table2`才应用一个`DISTINCT`运算符。通常，`DISTINCT`当人们真正想要添加另一个连接条件时，他们会错误地将 a 添加到查询中。我希望你真的想要

```
select distinct (case when a.id = b.id 
                      then 1
                      else 0
                  end)
  from table1 a, 
       table2 b
 where a.some_key = b.some_key
   and a.column = X 
   and b.column = Y; 
```

正确定义连接后，您可能不再需要额外的`DISTINCT`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-28T22:53:44.650

就这个

```
select distinct a.id, b.id
from table1 a, table2 b
where a.column = X and b.column =Y; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-01T08:34:44.927

您也可以在 oracle 中使用 decode

```
select distinct (decode (a.id,b.id,1,0)) from table1 a, table2 b
    where a.some_key = b.some_key
    and a.column = X ; 
```

# javascript - Javascript而循环更改div的滚动位置崩溃站点

> ID：15147209
> 
> 赞同：0
> 
> 时间：2013-02-28T22:51:19.260
> 
> 标签：javascript, html, crash, scroll, while-loop

我有一个 div 显示一些水平滚动的图像，`white-space:nowrap; overflow-x:scroll`我正在尝试使下面的功能工作：

```
var mouseIsInDiv = false;
function autoScroll() {
var i = 1;
while (mouseIsInDiv = false) {
    setTimeout(function(){
    document.getElementById("theDiv").scrollLeft = i;
    i++;
    },50);
}
} 
```

它应该循环（当鼠标不在这个可滚动的 div 中时）每 50 毫秒将滚动位置增加 1px。换句话说，它应该在调用此函数时自动滚动图像。我没有收到任何语法错误，但是每当我按下网页上调用此函数的按钮时，浏览器就会完全崩溃——我使用的是最新版本的 Chrome、Safari 和 Firefox。任何想法都会非常有帮助，我一直在为此烦恼！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T22:55:50.383

您的循环创建了许多同时发生的超时（在 50 毫秒之后），您需要在 set timeout 函数内递归地设置超时，并询问是否 mouseISInDiv 在 set timeout 函数内。

当前的代码状态，循环将在很短的时间内运行很多次，并且页面会崩溃（它是无限的），并且在 50 毫秒后会有很多设置的超时运行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T23:22:30.817

我在这个工作上玩得很开心，所以尽管正确答案已经被接受，我还是会发布我的回复。

基本上，您需要重组所有内容，以便整个方案是异步的。这意味着事件侦听器响应鼠标移动，并且没有 while 循环。

因此，我提出[了这个小提琴](http://jsfiddle.net/amullins/yRyPb/6/)。这是javascript：

```
var mouseIsInDiv = false;
var theDiv = document.getElementById("theDiv");
theDiv.onmouseover = function() { mouseIsInDiv = true; };
theDiv.onmouseout = function() {
    mouseIsInDiv = false;
    scrollLeft1();
};

function scrollLeft1() {
  if (mouseIsInDiv == false && theDiv.scrollLeft < theDiv.clientWidth) {
    theDiv.scrollLeft += 1;
    setTimeout(scrollLeft1, 50);
  }
}

scrollLeft1(); 
```

As you can see, the function calls itself recursively and asynchronously, and the whole thing can be restarted after manually resetting the scroll. You could also add an event listener for the scroll completion.

# r - 如何使用他们的类标签绘制点？

> ID：15147211
> 
> 赞同：0
> 
> 时间：2013-02-28T22:51:25.583
> 
> 标签：r

我有 100 个 2-dim 点，形成一个 100 x 2 矩阵 X，存储在文本文件“数据”中

我有一个 100 维向量 Y，它形成 100 个点的类标签（从 1 到 3 的数字），并存储在文本文件“标签”中。

在 R 中，我想知道如何在 X 中绘制 2-dim 点，st 每个点由其类标签而不是点表示，并以其类标签的颜色表示（相同点的颜色相同类标签，但不同类标签的点不同）？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-28T23:00:55.717

你想做这样的事情吗？

```
x1 <- runif(100)
x2 <- runif(100)
y  <- sample.int(3 , 100 , replace = T)

df <- data.frame( x1,x2,y)
ggplot( df )+
geom_text( aes( x1 , x2 , label = y , colour = factor(y))) 
```

![阴谋](../Images/502afc857788f8cd239567a641ed36ae.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-28T23:04:36.357

为了让 Dirk 高兴，一个非 ggplot 的答案：

```
x1 <- runif(100)
x2 <- runif(100)
y  <- sample.int(3 , 100 , replace = T)

plot(x1,x2,type = "n")
text(x1,x2,labels = y,col = c('red','blue','green')[y]) 
```

![在此处输入图像描述](../Images/6870b9499ab6c7dcc1652215a9cced6a.png)

# android - 我想为 4-in-a-row 游戏设计一个场地

> ID：15147218
> 
> 赞同：0
> 
> 时间：2013-02-28T22:51:57.037
> 
> 标签：android, xml, layout, imageview

我正在尝试设置一个 4-in-a-row 游戏并且有一个小问题并且无法修复它！这是我的代码：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="vertical"
tools:context=".Names" >

<LinearLayout
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:weightSum="7" >

    <ImageView
        android:id="@+id/imageView1"
        android:layout_width="0dp"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:adjustViewBounds="true"
        android:scaleType="fitXY"
        android:src="@drawable/feld_leer" />

    <ImageView
        android:id="@+id/imageView1"
        android:layout_width="0dp"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:adjustViewBounds="true"
        android:scaleType="fitXY"
        android:src="@drawable/feld_leer" />

    <ImageView
        android:id="@+id/imageView1"
        android:layout_width="0dp"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:adjustViewBounds="true"
        android:scaleType="fitXY"
        android:src="@drawable/feld_leer" />

    <ImageView
        android:id="@+id/imageView1"
        android:layout_width="0dp"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:adjustViewBounds="true"
        android:scaleType="fitXY"
        android:src="@drawable/feld_leer" />

    <ImageView
        android:id="@+id/imageView1"
        android:layout_width="0dp"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:adjustViewBounds="true"
        android:scaleType="fitXY"
        android:src="@drawable/feld_leer" />

    <ImageView
        android:id="@+id/imageView1"
        android:layout_width="0dp"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:adjustViewBounds="true"
        android:scaleType="fitXY"
        android:src="@drawable/feld_leer" />

    <ImageView
        android:id="@+id/imageView1"
        android:layout_width="0dp"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:adjustViewBounds="true"
        android:scaleType="fitXY"
        android:src="@drawable/feld_leer" />
</LinearLayout>

<LinearLayout
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:weightSum="7" >

    <ImageView
        android:id="@+id/imageView1"
        android:layout_width="0dp"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:adjustViewBounds="true"
        android:scaleType="fitXY"
        android:src="@drawable/feld_leer" />

    <ImageView
        android:id="@+id/imageView1"
        android:layout_width="0dp"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:adjustViewBounds="true"
        android:scaleType="fitXY"
        android:src="@drawable/feld_leer" />

    <ImageView
        android:id="@+id/imageView1"
        android:layout_width="0dp"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:adjustViewBounds="true"
        android:scaleType="fitXY"
        android:src="@drawable/feld_leer" />

    <ImageView
        android:id="@+id/imageView1"
        android:layout_width="0dp"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:adjustViewBounds="true"
        android:scaleType="fitXY"
        android:src="@drawable/feld_leer" />

    <ImageView
        android:id="@+id/imageView1"
        android:layout_width="0dp"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:adjustViewBounds="true"
        android:scaleType="fitXY"
        android:src="@drawable/feld_leer" />

    <ImageView
        android:id="@+id/imageView1"
        android:layout_width="0dp"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:adjustViewBounds="true"
        android:scaleType="fitXY"
        android:src="@drawable/feld_leer" />

    <ImageView
        android:id="@+id/imageView1"
        android:layout_width="0dp"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:adjustViewBounds="true"
        android:scaleType="fitXY"
        android:src="@drawable/feld_leer" />
</LinearLayout>

<LinearLayout
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:weightSum="7" >

    <ImageView
        android:id="@+id/imageView1"
        android:layout_width="0dp"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:adjustViewBounds="true"
        android:scaleType="fitXY"
        android:src="@drawable/feld_leer" />

    <ImageView
        android:id="@+id/imageView1"
        android:layout_width="0dp"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:adjustViewBounds="true"
        android:scaleType="fitXY"
        android:src="@drawable/feld_leer" />

    <ImageView
        android:id="@+id/imageView1"
        android:layout_width="0dp"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:adjustViewBounds="true"
        android:scaleType="fitXY"
        android:src="@drawable/feld_leer" />

    <ImageView
        android:id="@+id/imageView1"
        android:layout_width="0dp"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:adjustViewBounds="true"
        android:scaleType="fitXY"
        android:src="@drawable/feld_leer" />

    <ImageView
        android:id="@+id/imageView1"
        android:layout_width="0dp"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:adjustViewBounds="true"
        android:scaleType="fitXY"
        android:src="@drawable/feld_leer" />

    <ImageView
        android:id="@+id/imageView1"
        android:layout_width="0dp"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:adjustViewBounds="true"
        android:scaleType="fitXY"
        android:src="@drawable/feld_leer" />

    <ImageView
        android:id="@+id/imageView1"
        android:layout_width="0dp"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:adjustViewBounds="true"
        android:scaleType="fitXY"
        android:src="@drawable/feld_leer" />
</LinearLayout>

<LinearLayout
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:weightSum="7" >

    <ImageView
        android:id="@+id/imageView1"
        android:layout_width="0dp"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:adjustViewBounds="true"
        android:scaleType="fitXY"
        android:src="@drawable/feld_leer" />

    <ImageView
        android:id="@+id/imageView1"
        android:layout_width="0dp"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:adjustViewBounds="true"
        android:scaleType="fitXY"
        android:src="@drawable/feld_leer" />

    <ImageView
        android:id="@+id/imageView1"
        android:layout_width="0dp"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:adjustViewBounds="true"
        android:scaleType="fitXY"
        android:src="@drawable/feld_leer" />

    <ImageView
        android:id="@+id/imageView1"
        android:layout_width="0dp"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:adjustViewBounds="true"
        android:scaleType="fitXY"
        android:src="@drawable/feld_leer" />

    <ImageView
        android:id="@+id/imageView1"
        android:layout_width="0dp"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:adjustViewBounds="true"
        android:scaleType="fitXY"
        android:src="@drawable/feld_leer" />

    <ImageView
        android:id="@+id/imageView1"
        android:layout_width="0dp"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:adjustViewBounds="true"
        android:scaleType="fitXY"
        android:src="@drawable/feld_leer" />

    <ImageView
        android:id="@+id/imageView1"
        android:layout_width="0dp"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:adjustViewBounds="true"
        android:scaleType="fitXY"
        android:src="@drawable/feld_leer" />
</LinearLayout>

<LinearLayout
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:weightSum="7" >

    <ImageView
        android:id="@+id/imageView1"
        android:layout_width="0dp"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:adjustViewBounds="true"
        android:scaleType="fitXY"
        android:src="@drawable/feld_leer" />

    <ImageView
        android:id="@+id/imageView1"
        android:layout_width="0dp"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:adjustViewBounds="true"
        android:scaleType="fitXY"
        android:src="@drawable/feld_leer" />

    <ImageView
        android:id="@+id/imageView1"
        android:layout_width="0dp"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:adjustViewBounds="true"
        android:scaleType="fitXY"
        android:src="@drawable/feld_leer" />

    <ImageView
        android:id="@+id/imageView1"
        android:layout_width="0dp"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:adjustViewBounds="true"
        android:scaleType="fitXY"
        android:src="@drawable/feld_leer" />

    <ImageView
        android:id="@+id/imageView1"
        android:layout_width="0dp"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:adjustViewBounds="true"
        android:scaleType="fitXY"
        android:src="@drawable/feld_leer" />

    <ImageView
        android:id="@+id/imageView1"
        android:layout_width="0dp"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:adjustViewBounds="true"
        android:scaleType="fitXY"
        android:src="@drawable/feld_leer" />

    <ImageView
        android:id="@+id/imageView1"
        android:layout_width="0dp"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:adjustViewBounds="true"
        android:scaleType="fitXY"
        android:src="@drawable/feld_leer" />
</LinearLayout>

<LinearLayout
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:weightSum="7" >

    <ImageView
        android:id="@+id/imageView1"
        android:layout_width="0dp"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:adjustViewBounds="true"
        android:scaleType="fitXY"
        android:src="@drawable/feld_leer" />

    <ImageView
        android:id="@+id/imageView1"
        android:layout_width="0dp"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:adjustViewBounds="true"
        android:scaleType="fitXY"
        android:src="@drawable/feld_leer" />

    <ImageView
        android:id="@+id/imageView1"
        android:layout_width="0dp"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:adjustViewBounds="true"
        android:scaleType="fitXY"
        android:src="@drawable/feld_leer" />

    <ImageView
        android:id="@+id/imageView1"
        android:layout_width="0dp"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:adjustViewBounds="true"
        android:scaleType="fitXY"
        android:src="@drawable/feld_leer" />

    <ImageView
        android:id="@+id/imageView1"
        android:layout_width="0dp"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:adjustViewBounds="true"
        android:scaleType="fitXY"
        android:src="@drawable/feld_leer" />

    <ImageView
        android:id="@+id/imageView1"
        android:layout_width="0dp"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:adjustViewBounds="true"
        android:scaleType="fitXY"
        android:src="@drawable/feld_leer" />

    <ImageView
        android:id="@+id/imageView1"
        android:layout_width="0dp"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:adjustViewBounds="true"
        android:scaleType="fitXY"
        android:src="@drawable/feld_leer" />
</LinearLayout> 
```

这出现在屏幕上：

[http://dl.dropbox.com/u/39774761/Unbenannt.PNG](http://dl.dropbox.com/u/39774761/Unbenannt.PNG)

有人可以帮我让这些白色的小笔触消失吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T23:35:34.877

你的圈子并不完全相似。由于您对每个圆圈都使用相同的图像，我怀疑最后一行已缩小到`fitXY`.

也许您想尝试使用[GridView](https://developer.android.com/guide/topics/ui/layout/gridview.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T00:08:18.183

不要`wrap_content`在同一维度上使用权重。这没有意义。对于其中的每一个：

```
<LinearLayout
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:weightSum="7" > 
```

改用这个：

```
<LinearLayout
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:weightSum="7" > 
```

或者使用固定宽度。

# javascript - 我怎样才能用js制作我的导航栏

> ID：15147220
> 
> 赞同：-1
> 
> 时间：2013-02-28T22:52:08.363
> 
> 标签：javascript, html, nav, navbar

好的，所以我有一个导航栏，现在我想在它加载页面时创建它，它会构建导航栏

```
<div id="nav">
    <div id="nav_holder">

        <ul>
            <li class="first"><a href="../index.html"> Home </a> </li>
            <li><a href="../Rules.html">Rules </a> </li>
            <ul class="drop">
                <li><a href="../help/Help.html">Help</a>
                    <ul class="drop">
                        <li><a href="../help/Beginnen.html">Beginnen</a></li>
                        <li><a href="../help/Verdienen.html">Geld Verdienen</a></li>
                        <li><a href="../help/Gebieden.html">Protection Blocks</a></li>
                        <li><a href="../help/Signs.html">Trade Signs</a></li>
                        <li><a href="../help/Sign beveiliging.html">Sign beveiliging</a></li>
                        <li><a href="../help/Item.html">Item ID List</a></li>
                    </ul>
                </li>
            </ul></li>
            <li><a href="../Doneer.html">Donate </a> </li>
            <ul class="drop">
                <li><a href="../staff/Staff.html">Staff</a>
                    <ul class="drop">
                        <li><a href="../staff/Staff.html">Faircraft team</a></li>
                        <li><a href="../staff/Solliciteer.html">Solliciteren</a></li>
                    </ul>
                </li>
            </ul></li>
            <li><a href="../Videos.html">Videos </a> </li>
            <li></li>
            <li><a href="http://fair-craft.nl/forum/index.php">Forum </a> </li>

        </ul>

        <ul class="right">
            <li class="first"><a href="forum/ucp.php?mode=register&sid=b766e6a744490a46eef80d4b9a43458a">Sign Up! </a> </li>
        </ul>

    </div>
</div> 
```

所以我想我需要这段代码

```
 function holder()
 { // check if adding 1 exceeds number of pics in array
 var build='<img border="0" src="'+picArray[picCount]+'" width="649">\n';
 document.getElementById("nav_holder").innerHTML=build;

 } 
```

}

但后来我需要它来制作导航栏，顺便说一句，我也需要关于 body onload 功能的帮助：p，请帮忙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T23:05:32.567

而不是 window.onload，请尝试使用`jQuery` [http://jquery.com/](http://jquery.com/)：

```
$(document).ready(function(){
  // build menu
)}; 
```

这将在 DOM 完成加载时执行。

# asp.net - 在 ASP.NET 中构建 RESTful API

> ID：15147222
> 
> 赞同：0
> 
> 时间：2013-02-28T22:52:23.827
> 
> 标签：asp.net, api, restful-architecture

我已经看到了大量关于使用 ASP.NET 构建自己的 RESTFul API 的教程和方法的网站。他们似乎都使用 MVC。是否可以在不使用 MVC 的情况下使用 ASP.NET 和 WebForms 构建我自己的 RESTFul API？如果有人有教程或其他内容的链接，那就太好了！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T22:54:24.790

使用[**ASP.NET Web API**](https://www.google.com/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&cad=rja&ved=0CDYQFjAA&url=http://www.asp.net/web-api&ei=598vUfupH8KUywGN_oDIBA&usg=AFQjCNFlwnk5rGDAU0oVf1CzhM8kgLW9mg&sig2=O69K-e_gAVN3XnLDaY9LJw&bvm=bv.43148975,d.aWc)。它将成为规范的 HTTP API 服务器框架向前发展。

# php - 如何在 PHP 链接中实现 target="_blank" 属性，以便在新选项卡中打开链接？

> ID：15147224
> 
> 赞同：2
> 
> 时间：2013-02-28T22:52:31.480
> 
> 标签：php, wordpress

我有一个链接，基本上是一个“关于”页面，其中包含指向我个人社交媒体的社交图标。在 PHP 中，代码是这样的：

```
function wp_about_author_get_socials() {
$socials = array();
$socials['twitter'] = array('title'=>'Twitter', 'link'=>'http://www.twitter.com
/%%username%%', 'icon'=> WPAUTHORURL_URL .'/images/twitter.png');
$socials['facebook'] = array('title'=>'Facebook', 'link'=>'http://www.facebook.com
/%%username%%', 'icon'=> WPAUTHORURL_URL .'/images/facebook.png'); 
```

我摆弄了一些东西，但似乎无法实现，所以链接**在一个新的 tab/page 中打开**。目前，这些链接将用户带离网站（不理想）。在这方面的任何指导将不胜感激！

我尝试过的是更改指向此的链接：

```
$socials['twitter'] = array('title'=>'Twitter', 'link'=>'http://www.twitter.com
/%%username%%', 'target'=>'_blank', 'icon'=> WPAUTHORURL_URL .'/images/twitter.png'); 
```

但这没有用。

据我所知，这可能是打印链接的部分：

```
// About Author Social
$wp_about_author_social .= wp_about_author_get_social_links($wp_about_author_settings);
if(isset($wp_about_author_settings['wp_author_social_images']) &&     
$wp_about_author_settings['wp_author_social_images']){
$wp_about_author_content .= "<p>"  .$wp_about_author_links . "</p>";
if($wp_about_author_social != ""){
$wp_about_author_content .= '<p class="wpa-nomargin">'.apply_filters( 
'wp_about_author_follow_me', "Follow Me:").'<br />' . $wp_about_author_social.'</p>';
}
} else {
$wp_about_author_content .= "<p class='wpa-nomargin'>";
$wp_about_author_content .= $wp_about_author_links;
if($wp_about_author_social != ""){
$wp_about_author_content .= apply_filters( 'wp_about_author_separator', " - ") . 
$wp_about_author_social;
}
$wp_about_author_content .= "</p>";
}

// Generate social icons
function wp_about_author_get_social_links($wp_about_author_settings){
$content="";
$socials = wp_about_author_get_socials();
foreach($socials as $social_key=>$social){
if (get_the_author_meta($social_key)){
if(isset($wp_about_author_settings['wp_author_social_images']) &&     
$wp_about_author_settings['wp_author_social_images']){
$content .= "<a class='wpa-social-icons' href='".str_replace('%%username%%', 
get_the_author_meta($social_key), $social['link'])."'><img src='". $social['icon']."' 
alt='".$social['title']."'/></a>";
} else {
if($content != "")
$content .= apply_filters( 'wp_about_author_separator', " - ");
$content .= "<a href='".str_replace('%%username%%', get_the_author_meta($social_key), 
$social['link'])."'>".$social['title']."</a>";
}
}
}
return $content;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-28T23:14:08.333

在您发布的代码中，您可以添加`target="_blank"`到第 28 和 34 行的链接。

第 28 行变为：

```
$content .= "<a class='wpa-social-icons' target='_blank' href='".str_replace('%%username%%', 
```

第 34 行变为：

```
$content .= "<a target='_blank' href='".str_replace('%%username%%', get_the_author_meta($social_key), 
```

# heroku - Heroku db：pull 错误“LoadError：无法加载此类文件--sqlite3 (Sequel::AdapterNotFound)”

> ID：15147226
> 
> 赞同：6
> 
> 时间：2013-02-28T22:52:37.347
> 
> 标签：heroku

我能够从我的 MacBook 开发环境中运行 heroku db:pull 没有任何问题，但是当我在我的 Windows 7 机器上执行命令时出现以下错误

```
C:/Program Files (x86)/Heroku/ruby-.9.2/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:36:in `require': LoadError: cannot load such file -- sqlite3 (Sequel::AdapterNotFound)
    from C:/Program Files (x86)/Heroku/ruby-1.9.2/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:36:in `require'
    from C:/Program Files (x86)/Heroku/ruby-1.9.2/lib/ruby/gems/1.9.1/gems/sequel-3.20.0/lib/sequel/adapters/sqlite.rb:1:in `<top (required)>'
    from C:/Program Files (x86)/Heroku/ruby-1.9.2/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:36:in `require'
    from C:/Program Files (x86)/Heroku/ruby-1.9.2/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:36:in `require'
    from C:/Program Files (x86)/Heroku/ruby-1.9.2/lib/ruby/gems/1.9.1/gems/sequel-3.20.0/lib/sequel/core.rb:249:in `block in tsk_require'
    from C:/Program Files (x86)/Heroku/ruby-1.9.2/lib/ruby/gems/1.9.1/gems/sequel-3.20.0/lib/sequel/core.rb:72:in `block in check_requiring_thread'
    from <internal:prelude>:10:in `synchronize'
    from C:/Program Files (x86)/Heroku/ruby-1.9.2/lib/ruby/gems/1.9.1/gems/sequel-3.20.0/lib/sequel/core.rb:69:in `check_requiring_thread'
    from C:/Program Files (x86)/Heroku/ruby-1.9.2/lib/ruby/gems/1.9.1/gems/sequel-3.20.0/lib/sequel/core.rb:249:in `tsk_require'
    from C:/Program Files (x86)/Heroku/ruby-1.9.2/lib/ruby/gems/1.9.1/gems/sequel-3.20.0/lib/sequel/database/connecting.rb:25:in `adapter_class'
    from C:/Program Files (x86)/Heroku/ruby-1.9.2/lib/ruby/gems/1.9.1/gems/sequel-3.20.0/lib/sequel/database/connecting.rb:54:in `connect'
    from C:/Program Files (x86)/Heroku/ruby-1.9.2/lib/ruby/gems/1.9.1/gems/sequel-3.20.0/lib/sequel/core.rb:119:in `connect'
    from C:/Program Files (x86)/Heroku/vendor/gems/taps-0.3.23/lib/taps/schema.rb:69:in `load_indexes'
    from C:/Program Files (x86)/Heroku/vendor/gems/taps-0.3.23/bin/schema:40:in `<main>' 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-01T17:19:39.237

您可能需要安装`sqlite3`gem。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-02-03T22:43:53.177

我遇到了同样的问题。我已经添加了`sqlite3`gem，但是我错误地调用了 Sequel 适配器`sqlite3`。正确的适配器名称是简单的`sqlite`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-01T18:17:44.920

我会尝试安装几个宝石：

```
gem install sqlite3
gem install heroku 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-04-16T19:12:39.000

尝试使用以下命令更新 gem：

`gem update --system`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-02-01T23:28:14.143

尝试在 gemfile 中包含以下内容：

```
gem 'sequel' 
```

# sql - 报告中存在的天数项目

> ID：15147227
> 
> 赞同：0
> 
> 时间：2013-02-28T22:52:50.140
> 
> 标签：sql, sql-server-2008, tsql

我有一张表格，用于存储特定报告的每日运行情况。

```
DateAdded NodeId Field1Value Field1Threshold etc 
```

我现在有一个新要求，即列出报告中出现 NodeId 的天数。因此，如果 DateAdded 被列为

```
2013-03-01   <-- Run date
2013-02-28
2013-02-27
2013-02-26   <-- End of date sequence.  Return 4 days
2013-02-13
2013-01-07 
```

这也是关于识别日期序列中的中断

编辑我的时间上午 10:54 这是我的 sp 中带有第一个建议的 where 子句

```
 t.etc,
        t.blah,
        CASE WHEN ras1.NodeId IS NULL THEN 'N' ELSE 'Y' END as AlertStat,
        fl.NodeId as fl_NodeId, 
        DATEDIFF(day, fl.LastDate, fl.FirstDate) as [DaysOn]
FROM    vwTrips t left join
        (
            select distinct nodeId 
            from    CustLogs.dbo.ReportAlertStats ras 
            where   ras.DateAdded between @RasStart and @RasEnd
        ) ras1 on  t.NodeId = ras1.NodeId left join
        (   SELECT NodeId, 
                    MIN(DateAdded) [FirstDate], 
                    MAX(DateAdded) [LastDate]
            FROM CustLogs.dbo.ReportAlertStats
            GROUP BY NodeId
            --ORDER BY NodeId, DateAdded
        ) fl on t.NodeId = fl.NodeId
WHERE   t.TripStart between @ReportStart and @ReportEnd 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T23:26:21.753

```
SELECT fl.NodeId, DATEDIFF(day, fl.FirstDate, fl.LastDate) [Days On] FROM
(SELECT NodeId, MIN(DateAdded) [FirstDate], MAX(DateAdded) [LastDate]
FROM DailyRuns
GROUP BY NodeId
) fl 
```

对于只出现一次的 NodeId，它将显示相同的结果，就好像它的第一次和最后一次出现发生在同一天一样。

SQL 小提琴：[http ://sqlfiddle.com/#!3/ea373/7](http://sqlfiddle.com/#!3/ea373/7)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T01:41:01.743

这回答了你的问题了吗？

```
select nodeid, count(distinct dateAdded) as NumDays
from DailyRuns dr
group by nodeid 
```

# javascript - 使用 Lat 和 Lng 使用谷歌地图关闭标记

> ID：15147234
> 
> 赞同：0
> 
> 时间：2013-02-28T22:53:32.587
> 
> 标签：javascript, google-maps, geography

我正在使用谷歌地图 API (vs3) 编写在线地图。

我正在做的是在我的数据库中存储位置（纬度和经度）并将它们添加到初始化（）上的地图中 - 根据它们的位置放置标记。到现在为止还挺好。

现在我有一个函数可以显示我的位置（或用户定义的位置）。我想**显示 111 km = 1 degree lat/lng 范围内的地方**。我怎样才能做到这一点？

只是为了告诉你我的意思：

函数 showPlaceCloseBy(lat,lng){

```
var myLat=lat;
var myLng=lng;

for (var i=0; i < pins.length; i++) {
     // HERE WE FIND WHETHER THE PLACE IS CLOSE ENOUGH
             returnDistance(myLat, myLng, pins[i],i);

    }
}

function returnDistance(myLat,myLng,pinToCompare,i){

// PIN  
var calcLat= myLat-pinToCompare.position.hb; // IS THIS RIGHT?
var calcLong = myLng-pinToCompare.position.ib; // IS THIS RIGHT?

 // HERE I NEED TO DO THE CALCULATION AND RETURN THE PIN NAME.              

     } 
```

所以，现在我需要在 myLat 和 pinLat 之间进行计算（可能是减法 - ？ -）。谁能帮我？

谢谢大家。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T00:28:19.543

Google Maps API v3[球面几何库](https://developers.google.com/maps/documentation/javascript/reference#spherical)有一个方法：

> computeDistanceBetween(from:LatLng, to:LatLng) - number - 返回两个 LatLng 之间的距离。

它返回两个 LatLng 对象之间的距离（以米为单位）。

（未测试）

```
var closeDistance = 111000; // 111 km
function showPlaceCloseBy(lat,lng){
  var myLocation = new google.maps.LatLng(lat, lng);
  closePins = [];
  for (var i=0; i < pins.length; i++) {
     // HERE WE FIND WHETHER THE PLACE IS CLOSE ENOUGH
     if (calculateDistanceBetween(myLocation, pins[i].getPosition()) < closeDistance)
     {
       closePins.push(pins[i]);
     }
  }
  return closePins;
}

// Note: do not use undocumented properties like .hb, .ib; they can and do change.
var calcLat= myLat-pinToCompare.position.hb; // IS THIS RIGHT?
var calcLong = myLng-pinToCompare.position.ib; // IS THIS RIGHT? 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T23:09:13.937

这应该只是一个简单的距离计算 [http://www.purplemath.com/modules/distform.htm](http://www.purplemath.com/modules/distform.htm)

所以你的代码是

```
return Math.sqrt( Math.pow( calcLat, 2 ) + Math.pow( calcLong, 2 ) ) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-28T23:16:20.650

你会在这里找到一切： [http ://www.movable-type.co.uk/scripts/latlong.html](http://www.movable-type.co.uk/scripts/latlong.html)

各种精度、方向（方位角/方位角）的距离，一切;-)

# php - 将数据库查询从 Postgresql 转换为 PHP

> ID：15147237
> 
> 赞同：0
> 
> 时间：2013-02-28T22:53:50.190
> 
> 标签：php, date, datetime

我正在尝试将 postgresql 查询中的现有选择表达式转换为 PHP，但似乎缺少部分计算。

相关领域是：

```
task_start_timestamp > timestamp without time zone 
```

表达式为：

```
SELECT justify_interval(((EXTRACT(EPOCH FROM age(localtimestamp, task_start_timestamp)) * (1 - task_progress)/COALESCE(NULLIF(task_progress, 0), 1))::int || \' seconds\')::interval) AS task_eta 
```

我在 PHP 中的转换：（注意我`localtimestamp as local_timestamp`在查询中添加了一个选择，以确保计算使用与数据库相同的值）。

```
$now = strtotime($item['local_timestamp']);
$task_date = strtotime($item['task_start_timestamp']);
$task_age = $now - $task_date;
$task_eta = $task_age * (1 - $item['task_progress']); 
```

但是，服务器返回不同的结果。

```
local_timestamp = 2013-02-28 22:53:42.215137
task_start_timestamp = 2013-02-28 22:22:19.255593
task_eta = 00:10:28
php_task_eta = 00:07:50 
```

# java - 弹簧形式选择的路径不起作用

> ID：15147241
> 
> 赞同：1
> 
> 时间：2013-02-28T22:54:11.363
> 
> 标签：java, spring, jsp, spring-mvc

我在让 jsp 正确呈现时遇到问题。我的选择标签上的路径似乎是罪魁祸首，但我无法追踪，不知道为什么。

我收到错误消息：错误 500：java.lang.IllegalStateException：Bean 名称“命令”的 BindingResult 和普通目标对象都不能用作请求属性

我的代码是：

控制器.java

```
@Controller 
@RequestMapping("view")
@SessionAttributes({"analyticFormBean"})
public class RolesAnalyticsController {
@RenderMapping
public String defaultRenderer(RenderRequest request, RenderResponse response, ModelMap map){
    logger.entering(SOURCE_CLASS, "defaultRenderer");
    request.setAttribute("reportList", getReportList());
    logger.exiting(SOURCE_CLASS, "defaultRenderer", VIEW_JSP);
    return VIEW_JSP;
} 
```

查看.jsp

```
<form:form id="reportForm" method="POST" action="${submitReportQuery}">

<form:select path="query" id="reportSelection" onchange="javascript:checkForFields()">
    <form:option value="NONE" label="--- Select ---"/>
    <form:options items="${reportList}" />
</form:select>

&nbsp;
<input type="submit" value="Submit" name="Submit" ><br>

<div class="fieldPlaceholder" id="fieldPlaceholder"></div> 
```

Bean.java

```
public class AnalyticFormBean {
    private int reportID;
    private String query;
    private String queryResult;
    private String[] listOfQueries; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-28T23:20:09.313

你错过了两件事，

*   支持 bean 必须在某个时候实际添加到 ModelMap 中，所以你需要一个`map.addAttribute("analyticFormBean", new AnalyticFormBean())`（或者你想要添加到它的任何初始值等）

*   您必须告诉表单标签支持对象的名称`<form:form commandName="analyticFormBean" etc>`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T03:03:04.467

我没有看到您在表单中使用 bean...您需要将其添加到表单中。

```
<form:form commandName="analyticFormBean" .......> 
```

# python - 单选按钮水平居中对齐 Tkinter

> ID：15147247
> 
> 赞同：0
> 
> 时间：2013-02-28T22:54:33.897
> 
> 标签：python, python-3.x, grid, tkinter

我想水平排列我的单选按钮并以我的框架为中心，例如这个例子：

![后](../Images/246de63450070676e4ca9cdb794a542e.png)

但我只能这样做：

![前](../Images/72b0ca2eebd9bf7ec790745c343426c3.png)

这是我的代码：

```
 self.mit.grid(row=4, column=0)
 self.gpl2.grid(row=4, column=1)
 self.gpl3.grid(row=4, column=2) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T23:13:58.200

看起来 0 列中有一个比其他小部件更宽的小部件。尝试将新框架设置为单选按钮组的父级：

```
radiogroup = Frame(master)
# self.mit = Radiobutton(radiogroup, ...)
# ...
self.mit.grid(row=0, column=0)
self.gpl2.grid(row=0, column=1)
self.gpl3.grid(row=0, column=2)
radiogroup.grid(row=4, column=0) 
```

# regex - 在字符串中搜索模式

> ID：15147248
> 
> 赞同：-1
> 
> 时间：2013-02-28T22:54:36.640
> 
> 标签：regex, perl

我需要确定是否

> +review CR @someuser

存在于字符串中。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T23:04:03.033

您将需要转义元字符并使用匹配的正则表达式`m//`。

```
if ($string =~ /\+review CR \@someuser/) {
    # do something
} 
```

请注意，您不能使用`\Q ... \E`转义序列来转义元字符，因为`@someuser`仍会被插值。您可以将其用于`+`，但您仍然需要转义`@`，因此这种方式更简单。您也可以使用该`quotemeta`功能。但是，在这种情况下，这可能是矫枉过正。

阅读更多关于此的内容[`perldoc perlop`](http://perldoc.perl.org/perlop.html#Regexp-Quote-Like-Operators)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T23:06:05.493

Use `index`:

`$search_string = "+review CR \@someuser";
if (index($string, $search_string) != -1) { # found }`

Or, if you use a regex, you'll want to make sure the '+' and '@' are properly escaped:

`if ( $string =~ m#\+review CR \@someuser# ) { # found }`

# php - PHP评论系统——回显匹配外键和id

> ID：15147250
> 
> 赞同：1
> 
> 时间：2013-02-28T22:54:41.253
> 
> 标签：php, sql, gallery

我正在创建一个图片库，人们可以在其中为每个上传的图片添加评论。

我为所有评论制作了一个数据库表，包括一个外键来匹配图像表。我的 SQL 变量看起来像这样，似乎工作正常：

```
$all_comments_one_image_sql="
    SELECT userimage.id, image_id, comment, id, comment_date
    FROM userimage, image_comment
    WHERE image_comment.image_id=userimage.id
    ORDER BY comment_id DESC
"; 
```

但是，当我为所有画廊图像执行 while 函数时，我将在哪里以及如何将正确的评论回显到每个图像？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T23:01:05.453

您应该像这样进行左连接：

```
select userimage.id, 
       com.image_id, 
       com.comment, 
       com.id, 
       com.comment_date 
             FROM userimage
                LEFT JOIN image_comment as com ON com.image_id=userimage.id
                    WHERE userimage.id = ?
                    ORDER BY com.id DESC 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T23:04:23.613

首先创建一个获取图片评论的函数：

```
function getImageComments($imageId){
$query = "SELECT userimage.id, image_id, comment, id, comment_date
    FROM userimage
    LEFT JOIN image_comment
    ON image_comment.image_id=userimage.id 
    WHERE image_id = $imageId
    ORDER BY comment_id DESC
";
mysql_query($query);
return mysql_fetch....
} 
```

我还重做您的查询以获得更好的性能。

因此，无论何时加载图像，使用正确的图像 id 调用函数并获取其注释。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-28T23:00:10.020

您必须检查正确的 image_id

```
$all_comments_one_image_sql = "
    SELECT userimage.id, image_id, comment, id, comment_date
    FROM userimage, image_comment
    WHERE image_comment.image_id=userimage.id AND image_id = ?
    ORDER BY comment_id DESC
"; 
```

在哪里 ？是你要显示评论的图片的id——如果你使用pdo，你可以只绑定图片id，不用关心转义。

如果您有所有图像的摘要页面，则可以将结果添加到 assoc 数组中，其中键是您的图像 id

```
$comments[] = array();
while ($row = $res->fetch()) {
    if (empty($comments[$row->image_id])) {
        $comments[$row->image_id] = array();
    }

    $comments[$row->image_id][] = $row;
} 
```

要显示评论，你可以看看，如果 $comments[$image_id] 是一个数组并显示内容

# html - IE 7/ IE 8 中输入字段旁边的垂直居中文本

> ID：15147253
> 
> 赞同：0
> 
> 时间：2013-02-28T22:55:02.797
> 
> 标签：html, css, internet-explorer-8, internet-explorer-7, centering

**问题：**

我想将输入字段左侧的文本垂直居中。我也想将日历图标居中。

![在此处输入图像描述](../Images/c6b2736807b17495616a91a317f9681b.png)

**HTML：**

```
<div id="dateselect">
    <div id="arrivalContainer">
        <span class="annotation">Anreise</span>
        <input type="text" name="arrival" id="arrival" class="input-styling" maxlength="10" size="10" />
    </div>
    <div id="departureContainer">
        <span class="annotation">Abreise</span>
        <input type="text" name="departure" id="departure" class="input-styling" maxlength="10" size="10" />
    </div>
    <div class="clearer"></div>
</div> 
```

**CSS：**

```
#dateselect {
    padding-top: 14px;
}

#arrivalContainer {
    float: left;
    width: 160px;
}

#departureContainer {
    float: right;
    width: 160px;
}

#arrival {
    height: 25px;
    width: 68px;
}

#departure {
    height: 25px;
    width: 68px;
}

.ui-datepicker-trigger {
    position: relative;
    top: 7px;
    left: 3px;
}

.input-styling {
    color: #575756;
    font-family: "Myriad Roman", Helvetica, Arial, sans-serif;
    font-size: 12px;
    padding-left: 4px;
} 
```

**现场示例：**
[http ://bfb.bplaced.net/](http://bfb.bplaced.net/)

`span`元素应该是`display: inline-block;`我认为的。我尝试了`line-height`and`display: table-cell;`方法。我让它在除 IE7 和 IE8 之外的所有浏览器中工作。

我知道这是一个经常发生的问题，但也许你可以给我一些建议。

## 解决方案：

**HTML：**

我试过了，`valign="middle"`但 IE8 还是有问题。我最终得到了这个：

```
<div id="arrivalContainer">
    <div class="calendarText"><span class="annotation">Anreise</span></div>
    <div class="calendarInput"><input type="text" name="arrival" id="arrival" class="input-styling" maxlength="10" size="10" /></div>
    <div class="clearer"></div>
</div> 
```

**CSS：**

```
.calendarText {
    float:left;
    padding-top:14px;
    padding-right:5px;
}

.calendarInput {
    float: left;
} 
```

对于所有 IE 版本，我都有条件样式表。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T00:45:39.430

尝试`vertical-align:middle;`您的图像和文本 div。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T23:05:35.497

This should vertically center the text, by forcing it to display at 25px tall (same as your input field). Line-height then vertically centers the line at 25px tall, too.

```
.annotation {
    display: inline-block;
    zoom: 1;
    *display: inline;
    height: 27px; /* +2px for border */
    line-height: 27px;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-01T14:29:28.650

尝试这个：

```
annotation {
 position:realtive;
 top: -5px; /*adjust to value that visually centers your text*/
} 
```

为你的日历做同样的事情。

# c# - 在 MFC 应用程序中托管 Windows 窗体 (C#) (VC++,VS6.0)

> ID：15147256
> 
> 赞同：0
> 
> 时间：2013-02-28T22:55:15.190
> 
> 标签：c#, c++, winforms, mfc

今天下午看了一大堆，没有得到任何切实的结果。是否可以在仍在使用 VC6 开发的 MFC 应用程序中托管 Windows 窗体对话框。

出现的问题是我们有一个大型应用程序从未使用新的 Visual Studios 进行升级，因为 VC6 始终有效。现在我们需要在其中添加一些 C# 功能。我无法执行 /clr 选项，因为我们的项目完全由非托管 C++ 组成。我在我们所有的库/头文件中搜索了“CWinFormsControl”，但没有找到任何东西。我不确定下一步该尝试什么。

另外，请原谅我在进行研究时的任何无知以及对这种深度编程的新手。

我检查了以下文章：

*   [http://msdn.microsoft.com/en-us/library/676cbawx(v=vs.100).aspx](http://msdn.microsoft.com/en-us/library/676cbawx(v=vs.100).aspx)
*   [http://social.msdn.microsoft.com/Forums/en-US/vclanguage/thread/97fddc35-e94d-4587-8be0-0b573185eb63/](http://social.msdn.microsoft.com/Forums/en-US/vclanguage/thread/97fddc35-e94d-4587-8be0-0b573185eb63/)
*   [http://msdn.microsoft.com/en-us/library/ahdd1h97(v=vs.80).aspx](http://msdn.microsoft.com/en-us/library/ahdd1h97(v=vs.80).aspx)
*   [http://www.functionx.com/visualc/Lesson04.htm](http://www.functionx.com/visualc/Lesson04.htm)
*   [http://social.msdn.microsoft.com/Forums/sk/vcgeneral/thread/c38db22e-cf61-4b47-bcc8-e6202c40d1b5](http://social.msdn.microsoft.com/Forums/sk/vcgeneral/thread/c38db22e-cf61-4b47-bcc8-e6202c40d1b5)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T00:16:42.890

CWinFormsControl 需要 MFC 8.0。

您可以[使您的托管程序集成为 COM 服务器](http://blogs.msdn.com/b/andreww/archive/2008/11/24/using-managed-controls-as-activex-controls.aspx)（例如 ActiveX），并像任何其他 COM 服务器一样在 MFC 应用程序中使用它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T23:33:01.073

我没有 VC6 来尝试这个，但我认为这应该是可能的；至少对于一个简单的模式 ShowDialog() 场景。

您将使用 C++/CLI 创建一个新的程序集/DLL，并使用**/clr**标志编译。这将使用通常的`__declspec(dllexport)`. 该实现将调用您的 C# 代码，它是另一个程序集。

# cocoa-touch - 奇怪的数据解析问题

> ID：15147257
> 
> 赞同：0
> 
> 时间：2013-02-28T22:55:16.050
> 
> 标签：cocoa-touch

在我的代码中，我正在检索用户提醒并向他们显示一个表格视图。每当我在代码中打印 NSLog 时，表格数组就会正确显示。但是，每当我在代码中省略 NSLog 时，我的数据就不再正确显示。提醒的“标题”值返回 (null)。

我每次都能重现这个问题。有人知道这里发生了什么吗？

```
- (void)shareReminderButtonAction:(UIButton *)buttonEvent {

EKEventStore *store = [[EKEventStore alloc] init];

NSPredicate *predicate = [store predicateForRemindersInCalendars:nil];

[store requestAccessToEntityType:EKEntityTypeReminder completion:^(BOOL granted, NSError *error) {

    [store fetchRemindersMatchingPredicate:predicate completion:^(NSArray *reminders) {

        ReminderView *shareRem = [[ReminderView alloc]init];

        NSLog(@"Reminders: %@", reminders);

        UINavigationController *navigation = [[UINavigationController alloc] initWithRootViewController:shareRem];
        [navigation setNavigationBarHidden:YES];

        [[UIApplication sharedApplication].keyWindow.rootViewController presentViewController:navigation animated:YES
                                                                                   completion:^(void){[shareRem setArray:reminders];}];

    }];

}];

} 
```

在上面的代码中使用 NSLog 记录数据：

```
"EKReminder <0x1d5b3630> {title = Gdghv; dueDate = 2013-03-06 22:00:00 +0000; completionDate = (null); priority = 0; calendarItemIdentifier = 0BD2CB76-588B-4103-86B0-D71D22317DC0}" 
```

在我上面的代码中接收没有 NSLog 的数据时，在 UITableViewController 端记录数据：

```
CADObjectGetInlineStringProperty failed fetching title for EKPersistentReminder with error Error Domain=NSMachErrorDomain Code=268435459 "The operation couldn\342\200\231t be completed. (Mach error 268435459 - (ipc/send) invalid destination port)"

"EKReminder <0x1c5e6fd0> {title = (null); dueDate = (null); completionDate = (null); priority = 0; calendarItemIdentifier = (null)}" 
```

非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-16T23:50:06.247

在您使用 Event Kit 对象的整个过程中，需要保留 EKEventStore 对象。通常最好将它放在一个单例中。来自[Apple 的文档](https://developer.apple.com/library/mac/documentation/DataManagement/Conceptual/EventKitProgGuide/ReadingAndWritingEvents.html)：

> EKEventStore 对象需要相对大量的时间来初始化和释放。因此，您不应为每个与事件相关的任务初始化和释放单独的事件存储。相反，在您的应用程序加载时初始化一个事件存储，并重复使用它以确保您的连接是长期存在的。
> 
> 不得在其他 Event Kit 对象之前释放事件存储实例；否则，可能会发生未定义的行为。

# ruby-on-rails - RoR Ransack 搜索问题

> ID：15147258
> 
> 赞同：5
> 
> 时间：2013-02-28T22:55:22.287
> 
> 标签：ruby-on-rails, controllers, ransack

我有两个不同的控制器（scholarships_controller、scholarships_browse_controller）来查看奖学金模型。我希望我的 Ransack 搜索功能在当前页面上显示搜索结果。因此，例如，如果我在 /scholarships_browse 上并使用搜索功能，我希望它使用 Scholarships_browse_controller 并在 /scholarships_browse 上显示结果。

目前，如果我在 /scholarships_browse 上搜索，它会使用 Scholarships_controller 并重定向到 /scholarships 以显示结果（而不是 /scholarships_browse）。

**ScholarshipsBrowseController 和 ScholarshipsController 的代码**

```
def index  
    @search = Scholarship.search(params[:q])
    @scholarships = @search.result.page(params[:page]).per(3)  #allows 3 scholarships on a page at a time
    @search.build_condition

    respond_to do |format|
      format.html # index.html.erb
      format.json { render json: @scholarships }
    end 
```

结尾

**奖学金浏览 index.html.erb 的代码：**

```
<%= search_form_for @search do |f| %>
    <%= f.condition_fields do |c| %>
        <div class="field">
            <%= c.attribute_fields do |a| %>
                <%= a.attribute_select %>
            <% end %>
            <%= c.predicate_select compounds: false, only: [:cont, :eq, :gt, :lt] %>
            <%= c.value_fields do |v| %>
                <%= v.text_field :value %>
            <% end %>
        </div>
    <% end %>
    <div class="actions"><%= f.submit "Search" %></div>
<% end %> 
```

所以，我想我特别想问当我在 /scholarships_browse 时，如何确保我使用的是 ScholarshipsBrowseController 索引而不是 ScholarshipsController 索引？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-28T23:08:51.230

在你看来：

```
<%= search_form_for @search, url: RAILS_ROUTEHERE do |f| %>
...
<%- end %> 
```

**search_form_for**它是 的扩展`form_for`，因此您可以使用该`:url`参数告诉表单它的操作应该是什么（您可以在浏览器上呈现页面源代码时检查页面源代码，您可以检查标签`<form action="">`以确保它指向正确的路线。

# multithreading - 多生产者单消费者惰性任务执行

> ID：15147259
> 
> 赞同：2
> 
> 时间：2013-02-28T22:55:24.073
> 
> 标签：multithreading

我正在尝试对一个系统进行建模，其中有多个线程产生数据，一个线程消耗数据。诀窍是我不想要一个专用线程来使用数据，因为所有线程都存在于一个池中。相反，我希望其中一个生产者在有工作时清空队列，如果另一个生产者已经在清除队列，则让出。

基本思想是有一个工作队列，以及围绕处理的锁。每个生产者将其有效负载推入队列，然后**尝试**进入锁。尝试是非阻塞的，并返回 true（已获得锁）或 false（锁由其他人持有）。

如果获得锁，则该线程将处理队列中的所有数据，直到它为空（包括其他生产者在处理期间引入的任何新有效负载）。处理完所有工作后，线程释放锁并退出。

以下是该算法的 C++ 代码：

```
void Process(ITask *task) {
     // queue is a thread safe implementation of a regular queue
     queue.push(task);

     // crit_sec is some handle to a critical section like object
     // try_scoped_lock uses RAII to attempt to acquire the lock in the constructor
     //                 if the lock was acquired, it will release the lock in the
     //                 destructor
     try_scoped_lock lock(crit_sec);

     // See if this thread won the lottery. Prize is doing all of the dishes
     if (!lock.Acquired())
        return;

     // This thread got the lock, so it needs to do the work
     ITask *currTask;
     while (queue.try_pop(currTask)) {
          ... execute task ...
     }
} 
```

总的来说，这段代码运行良好，我从未亲眼目睹我将在下面描述的行为，但这种实现让我感到不安。理所当然地，在线程退出 while 循环和释放临界区之间引入了竞争条件。

整个算法依赖于这样的假设：如果锁被持有，那么一个线程正在为队列服务。

我本质上是在寻找对 2 个问题的启发：

1.  我是否正确地说存在所描述的比赛条件（其他比赛的奖金）
2.  是否有一种标准模式来实现这种高性能且不引入竞争条件的机制？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T23:26:53.597

是的，有一个竞争条件。

线程 A 添加一个任务，获取`lock`，自行处理，然后从`queue`. 它被拒绝。

此时线程 B 将任务添加到`queue`. 然后它尝试获取锁，但失败了，因为线程 A 拥有锁。线程 B 退出。

线程 A 然后退出，`queue`非空，没有人处理它上面的任务。

这将很难找到，因为那个窗口相对狭窄。为了让它更有可能找到，在`while`循环之后引入“睡眠 10 秒”。在调用代码中，插入一个任务，等待 5 秒，然后插入第二个任务。再过 10 秒后，检查两个插入任务是否都已完成，并且`queue`.

解决此问题的一种方法是更改`try_pop`​​为`try_pop_or_unlock`，并将您的传递`lock`给它。 `try_pop_or_unlock`然后自动检查是否为空`queue`，如果是则解锁`lock`并返回 false。

另一种方法是改进线程池。添加一个基于计数信号量的“消费”任务启动器。

```
semaphore_bool bTaskActive;
counting_semaphore counter;

when (counter || !bTaskActive)
  if (bTaskActive)
    return
  bTaskActive = true
  --counter
  launch_task( process_one_off_queue, when_done( [&]{ bTaskActive=false ) ); 
```

当计数信号量处于活动状态时，或者被完成的消费任务戳时，如果没有消费任务处于活动状态，它会启动消费任务。

但这只是我的想法。

# html - 为什么我的第一张图片无法点击？

> ID：15147260
> 
> 赞同：1
> 
> 时间：2013-02-28T22:55:31.490
> 
> 标签：html, css, hyperlink

我有一个包含图片的正方形，每张图片都应该可以点击以将您带到该人的个人资料，但我的左上角图片不可点击。我不确定我做错了什么。

这是我的[jsfiddle](http://jsfiddle.net/R4HJb/1/)，所以你可以看到问题。

```
<div id = 'crew_div'>
    <div class = 'my_crew'><div id = 'jason'><a href = 'http://www.startingtofeelit.com/author/musicmakesmelosectrl/'><img src='http://www.startingtofeelit.com/profile/jason.jpg' title = 'View Posts by Jason'></a></div></div>
    <div class = 'my_crew'><div id = 'dharam'><a href = 'http://www.startingtofeelit.com/author/4everevolution/'><img src='http://www.startingtofeelit.com/profile/dharam.png' title = 'View Posts by Dharam'></a></div></div>
    <div class = 'my_crew'><div id = 'james'><a href='http://www.startingtofeelit.com/author/jjstiles/'><img src='http://www.startingtofeelit.com/profile/james.png' title = 'View Posts by James'></a></div></div>
    <div class = 'my_crew'><div id = 'cody'><a href='http://www.startingtofeelit.com/author/codecray/'><img src='http://www.startingtofeelit.com/profile/Cody.jpg' title = 'View Posts by Cody'></a></div></div>
</div> 
```

```
#crew_div {
    position:relative;
    width: 312px;
    height:312px;   
}

.my_crew {
    position:absolute;  
}

.my_crew img {
    width:156px;
    display:block;  
}

.my_crew #jason {
    top:0px;
    left:0px;
    position:relative;
}

.my_crew #dharam {
    top:0px;
    left:156px;
    position:relative;
}

.my_crew #james {
    top: 156px;
    left: 0px;  
    position:relative;
}

.my_crew #cody {
    top:156px;
    left:156px;
    position:relative;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T23:00:24.343

`z-index`像这样添加到您的图像中：

```
.my_crew #jason {
    top:0px;
    left:0px;
    position:relative;
    z-index: 1;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T23:00:10.767

这是您需要的，我重新组织了您的 HTML :)

[新小提琴](http://jsfiddle.net/5R49y/)

```
<div id = 'crew_div'>
<a href = 'http://www.startingtofeelit.com/author/musicmakesmelosectrl/'><div class = 'my_crew'><div id = 'jason'><img src='http://www.startingtofeelit.com/profile/jason.jpg' title = 'View Posts by Jason'></div></div></a>
        <a href = 'http://www.startingtofeelit.com/author/4everevolution/'><div class = 'my_crew'><div id = 'dharam'><img src='http://www.startingtofeelit.com/profile/dharam.png' title = 'View Posts by Dharam'></div></div></a>
        <a href='http://www.startingtofeelit.com/author/jjstiles/'><div class = 'my_crew'><div id = 'james'><img src='http://www.startingtofeelit.com/profile/james.png' title = 'View Posts by James'></div></div></a>
        <a href='http://www.startingtofeelit.com/author/codecray/'><div class = 'my_crew'><div id = 'cody'><img src='http://www.startingtofeelit.com/profile/Cody.jpg' title = 'View Posts by Cody'></div></div></a> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-28T23:09:37.587

你为什么不把它们放在一起？这也将节省一些 CSS 行。

```
.my_crew {
    float:left;
} 
```

示例：http: [//jsfiddle.net/T5LCm/](http://jsfiddle.net/T5LCm/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-28T23:29:34.177

You haven't specified width/height dimensions or top/left positioning for your `<div class="my_crew">`. They are each positioned at the top-left, and their child `<div>` is then positioned relative to the absolutely positioned parent. That's why the top-left isn't clickable, because it's really stacked under 3 other `<div>`s.

A better solution would be to combine the two `<div>`s into one.

See the fiddle here: [http://jsfiddle.net/R4HJb/8/](http://jsfiddle.net/R4HJb/8/)

```
<div id = 'crew_div'>
    <div class = 'my_crew jason'><a href = 'http://www.startingtofeelit.com/author/musicmakesmelosectrl/'><img src='http://www.startingtofeelit.com/profile/jason.jpg' title = 'View Posts by Jason'></a></div>
            <div class = 'my_crew dharam'><a href = 'http://www.startingtofeelit.com/author/4everevolution/'><img src='http://www.startingtofeelit.com/profile/dharam.png' title = 'View Posts by Dharam'></a></div>
            <div class = 'my_crew james'><a href='http://www.startingtofeelit.com/author/jjstiles/'><img src='http://www.startingtofeelit.com/profile/james.png' title = 'View Posts by James'></a></div>
            <div class = 'my_crew cody'><a href='http://www.startingtofeelit.com/author/codecray/'><img src='http://www.startingtofeelit.com/profile/Cody.jpg' title = 'View Posts by Cody'></a></div>
</div>

#crew_div {
    position:relative;
    width: 312px;
    height:312px;   
}

.my_crew {
    position:absolute;  
    width: 156px;
    height: 156px;
}

.my_crew img {
    width:156px;
    display:block;  
}

.my_crew.jason {
    top:0px;
    left:0px;
}

.my_crew.dharam {
    top:0px;
    left:156px;
}

.my_crew.james {
    top: 156px;
    left: 0px;  
}

.my_crew.cody {
    top:156px;
    left:156px;
} 
```

# javascript - 从数据标题中删除内联样式表

> ID：15147273
> 
> 赞同：2
> 
> 时间：2013-02-28T22:56:03.740
> 
> 标签：javascript, jquery, css, jquery-ui, javascript-events

我正在为我的数据标题值使用内联样式表。如何删除内联样式表并在类中定义它？由于该值来自 data-caption 属性，我不知道该怎么做。在下面提供我的代码：

[http://jsfiddle.net/rajkumart08/8YK2n/](http://jsfiddle.net/rajkumart08/8YK2n/)

```
<div  class="cubeCell" data-text="Search" class="desktopContactImage cubeCell"
   data-caption="&lt;a style='padding-left: 40px; font-size: 18px; color: grey;' href='http://www.w3schools.com/' &gt;Create&lt;/a&gt; &lt;div&gt; &lt;a style='padding-left: 40px; font-size: 18px; color: grey;' &gt;View/Edit&lt;/a&gt; &lt;/div&gt; &lt;a style='padding-left: 40px; font-size: 18px; color: grey;' &gt;Labels&lt;/a&gt;"
   data-image="http://intra.defie.co/images/Desktop_icons_02.07.13/search.png"></div>

   <div class="iphoneContactImage" data-caption="&lt;a style='margin-left: 92px; font-size: 18px; color: grey;' href='http://www.w3schools.com/' &gt;Create&lt;/a&gt; &lt;div&gt; &lt;a style='margin-left: 92px; font-size: 18px; color: grey;' &gt;View/Edit&lt;/a&gt; &lt;/div&gt; &lt;a style='margin-left: 92px; font-size: 18px; color: grey;' &gt;Labels&lt;/a&gt;"
      data-image="http://intra.defie.co/images/Desktop_icons_02.07.13/demoImage.png">iphoneImage</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T15:24:37.513

一种解决方案是使用 Javascript 解析样式（此问题的第一个答案：[Can jQuery get all CSS styles associated with an element？](https://stackoverflow.com/questions/754607/can-jquery-get-all-css-styles-associated-with-an-element)）并创建一个函数将它们转储到样式中。

然后，您可以动态地将这种样式添加到您的页面中（这个问题的第一个答案：[如何在 JavaScript 中动态创建 CSS 类并应用？](https://stackoverflow.com/questions/1720320/how-to-dynamically-create-css-class-in-javascript-and-apply)）。

**编辑：**

要访问`data-caption`属性，您可以使用`$('.cubeCell').attr('data-caption')`它将返回一个包含纯文本样式的字符串：

`&lt;a style='padding-left: 40px; font-size: 18px; color: grey;' href='http://www.w3schools.com/' &gt;Create&lt;/a&gt; &lt;div&gt; &lt;a style='padding-left: 40px; font-size: 18px; color: grey;' &gt;View/Edit&lt;/a&gt; &lt;/div&gt; &lt;a style='padding-left: 40px; font-size: 18px; color: grey;' &gt;Labels&lt;/a&gt;`

这与（替换 HTML 字符）相同：

```
<a style='padding-left: 40px; font-size: 18px; color: grey;' href='http://www.w3schools.com/' >Create</a>
<div>
   <a style='padding-left: 40px; font-size: 18px; color: grey;' >View/Edit</a>
</div>
<a style='padding-left: 40px; font-size: 18px; color: grey;' >Labels</a> 
```

`data-caption`所以看起来你的属性不仅仅是样式。您应该使用[正则表达式](https://developer.mozilla.org/es/docs/JavaScript/Reference/Global_Objects/RegExp)解析此字符串以仅检索`styles`. 然后，您将能够创建正确的样式并使用 Javascript 将它们添加到您的页面中。（[如何使用正则表达式（javascript）获取样式=“我想要css代码”](https://stackoverflow.com/questions/3597283/how-to-get-style-i-want-the-css-code-using-regexp-javascript)）

**编辑2：**

假设您已经在字符串中有样式：

```
var mystyle = 'padding-left: 40px; font-size: 18px; color: grey;'; 
```

并且您想将其应用于已经具有内联样式的元素，例如您的示例。我将通过以下方式进行：

**1）**获取元素的HTML（无`style`属性）并将其分配给它所属的位置。例如：

*原始代码*：

```
<div id="mylink">
    <a style='padding-left: 40px; font-size: 18px; color: grey;' href='http://www.w3schools.com/'>Create</a>
</div> 
```

*JS*：

```
$('#mylink').html('<a href='http://www.w3schools.com/'>Create</a>'); 
```

*结果代码*：

```
<div id="mylink">
    <a href='http://www.w3schools.com/'>Create</a>
</div> 
```

**2)**现在，添加您自己的类来处理样式：

```
$('#mylink a').addClass('mystyle'); 
```

**3）**最后，您只需要创建`style`元素并将其添加到您的页面：

```
var style = document.createElement('style');
var mystyle = 'padding-left: 40px; font-size: 18px; color: grey;';
style.type = 'text/css';
style.innerHTML = '.mystyle { ' + mystyle + ' }';
document.getElementsByTagName('head')[0].appendChild(style); 
```

不要忘记尊重代码行的顺序，以便您的代码成功执行和应用样式。

# java - 可以在 jtable 的某些列中显示 pdf 作为下载链接吗？

> ID：15147280
> 
> 赞同：0
> 
> 时间：2013-02-28T22:56:26.843
> 
> 标签：java, swing, pdf, jtable

我可以在`JTable`作为链接的列中显示 PDF 以供下载！？这可能是因为我在谷歌上搜索过但找不到任何东西，

实际上我在数据库中有一个名为`projet(id,nomprojet,date,cout,rapportpdf,pdf)`. 有些项目有融洽的关系，有些则没有，所以我有项目`JTable`

我可以将列作为链接​​以在桌面上保存 rapportpdf，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T00:57:21.497

也许一种方法是将包含链接的列呈现为按钮。请参阅[表格按钮列](http://tips4java.wordpress.com/2009/07/12/table-button-column/)。然后，当用户单击按钮时，您可以显示 pdf。

如果您希望该列看起来像一个常规的超链接，那么您需要创建一个自定义渲染器，以便它显示为一个链接和一个自定义编辑器，以便在您单击它时调用该操作。MadProgrammer 为您提供了该教程的链接，该教程更详细地解释了渲染器和编辑器。

# tcl - xilinx：内存综合期间执行 Tcl 生成器失败

> ID：15147284
> 
> 赞同：0
> 
> 时间：2013-02-28T22:56:44.147
> 
> 标签：tcl, generator, core, xilinx

我正在尝试使用 xilinx 14.2 中的核心生成器生成内存（简单的双端口 ram）。问题是在综合过程中说：

```
错误：sim - 无法运行命令'-p xc3s100e-5cp132 -sd
   “C:/Users/ORiON/register_file/ipcore_dir/tmp/_cg/_dbg/”-sd
   “C:/Users/ORiON/register_file/ipcore_dir/tmp/_cg/”-dd
   "C:/Users/ORiON/register_file/ipcore_dir/tmp/_cg/_dbg/" "MEM_aRd_sWr_16x32"
   “C:/Users/ORiON/register_file/ipcore_dir/tmp/_cg/MEM_aRd_sWr_16x32.ngc”
   -intstyle xflow'。未找到可执行文件。
错误：sim - 执行 Tcl 生成器失败。
为项目“MEM_aRd_sWr_16x32”编写了 CGP 文件。
核心生成器创建命令失败。
错误：sim - 无法生成“MEM_aRd_sWr_16x32”。执行 Tcl 失败
   发电机。

```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T08:05:07.460

该命令本身丢失。

```
Failed to run command 'A_COMMAND_SHOULD_BE_HERE -p xc3s100e-5cp132 -sd 
```

我假设它是一种脚本或 makefile 正在调用此命令，并且该命令被定义为变量。并且没有分配变量。类似的东西？

# c - 如何在链表中向后移动？

> ID：15147286
> 
> 赞同：3
> 
> 时间：2013-02-28T22:56:53.323
> 
> 标签：c, linked-list, reverse

假设我有字符串“Lamps”，它被传递到我的程序中，每个字符都存储到链表中的一个节点中。

我需要使用另一个链表以相反的顺序复制该列表，我该怎么做，我已经走了很远，但是如何在链表中向后移动？

您将看到该行评论了我需要放在那里以在链接列表中向后移动的内容。

```
#include <stdlib.h>
#include <stdio.h>

struct NODE {
    struct NODE *next;  
    char data;

};

int main(int argc, char *argv[]) {

int i;

struct NODE *head;
struct NODE *current;
struct NODE *head2;
struct NODE *current2;
struct NODE *finger;

for(i = 0; i < argc; i++)
    printf("arg %d: %s\n", i, argv[i]);

head = (struct NODE*)malloc(sizeof(struct NODE));
    current = head;

    for ( i = 0; i < sizeof(argv[1]) - 1; i++ ) {

    current -> data = argv[1][i];
    current -> next = (struct node*)malloc(sizeof(struct NODE));
    current = current -> next;
    current -> next = NULL;

}

head2 = (struct NODE*)malloc(sizeof(struct NODE));
    current2 = head2;

    while ( current != head) {

        finger = head;

    while (finger -> next != current) 

        finger = finger -> next;
        current2 -> data = current -> data;
        current2 -> next = (struct node*)malloc(sizeof(struct NODE));
        current2 = current2 -> next;    
        // move backwards

    } // ends loop

}

return 0;

} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-28T23:00:49.053

> 如何在（单个）链表中向后移动？

你没有。将一个列表反转为另一个列表的技巧是在目标列表的头部而不是后面插入。您需要按照指针以常规方式遍历原始列表`next`，而不是将元素添加到目标列表的末尾，而是创建一个新节点，并用它替换目标的标题。

这是一个分步说明：

```
sourceHead -> "A" -> "B" -> "C" -> NULL
your pointer   ^
targetHead -> NULL

sourceHead -> "A" -> "B" -> "C" -> NULL
your pointer          ^
targetHead -> "A" -> NULL

sourceHead -> "A" -> "B" -> "C" -> NULL
your pointer                 ^
targetHead -> "B" -> "A" -> NULL

sourceHead -> "A" -> "B" -> "C" -> NULL
your pointer                        ^
targetHead -> "C" -> "B" -> "A" -> NULL 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-28T23:00:37.937

简短的版本是使用 prev 变量扩展您的结构，当您创建一个孩子时，您将 self 分配给它的 Parent 变量，因此您可以稍后从孩子读取它的父变量以向后移动一个 - 并递归以获得所有通往顶峰的路。

# python - （numpy）FFT阵列的错误幅度（？）？

> ID：15147287
> 
> 赞同：4
> 
> 时间：2013-02-28T22:56:54.033
> 
> 标签：python, numpy, fft, amplitude

我正在使用 numpy 和 matplotlib 从我的模拟中分析数据输出。有一个（明显的）不一致之处，我找不到其根源。如下：

我有一个具有给定能量 a^2~1 的信号。当我使用 rfft 进行 FFT 并计算傅里叶空间中的能量时，它会明显更大。为了避免提供我的数据等的详细信息，这里有一个简单的正弦波示例：

```
from pylab import *
xx=np.linspace(0.,2*pi,128)
a=np.zeros(128)
for i in range(0,128):
    a[i]=sin(xx[i])
aft=rfft(a)
print mean(abs(aft)**2),mean(a**2) 
```

原则上，这两个数字应该是相同的（至少在数字意义上），但这就是我从这段代码中得到的：

```
62.523081632 0.49609375 
```

我试图通过 numpy.fft 文档但找不到任何东西。这里的搜索给出了以下内容，但我无法理解那里的解释：

[现有（合成）信号与滤波信号之间的 FFT 幅度差异很大](https://stackoverflow.com/questions/14936359/big-fft-amplitude-difference-between-the-existing-synthesized-signal-and-the-f)

我错过了什么/误解了什么？在这方面的任何帮助/指针将不胜感激。

谢谢！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-01T00:17:19.383

Henry 在非规范化部分是正确的，但还有更多内容，因为您使用的是`rfft`，而不是`fft`。以下与他的回答一致：

```
>>> x = np.linspace(0, 2 * np.pi, 128)
>>> y = 1 - np.sin(x)
>>> fft = np.fft.fft(y)
>>> np.mean((fft * fft.conj()).real)
191.49999999999991
>>> np.mean(y**2)
1.4960937500000004
>>> fft = fft / np.sqrt(len(fft))
>>> np.mean((fft * fft.conj()).real)
1.4960937499999991 
```

但是，如果您现在尝试对 进行相同`rfft`操作，事情就不太顺利了：

```
>>> rfft = np.fft.rfft(y)
>>> np.mean((rfft * rfft.conj()).real)
314.58462009358772
>>> rfft /= np.sqrt(len(rfft))
>>> np.mean((rfft * rfft.conj()).real)
4.8397633860551954
65
>>> np.mean((rfft * rfft.conj()).real) / len(rfft)
4.8397633860551954 
```

但是，以下确实可以正常工作：

```
>>> (rfft[0] * rfft[0].conj() +
...  2 * np.sum(rfft[1:] * rfft[1:].conj())).real / len(y)
1.4960937873636722 
```

当你使用`rfft`你得到的东西时，你的数据的 DFT 并不正确，而只是它的正半部分，因为负值与它是对称的。要计算平均值，您需要将除 DC 分量之外的每个值都考虑两次，这是最后一行代码所做的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-28T23:42:34.317

在大多数 FFT 库中，各种 DFT 风格不是[正交](http://en.wikipedia.org/wiki/Orthogonal_matrix)的。该`numpy.fft`库仅在逆变换期间应用必要的归一化。

考虑[DFT 的 Wikipedia 描述](http://en.wikipedia.org/wiki/Discrete_Fourier_transform)；逆 DFT 具有 DFT 没有的 1/N 项（其中 N 是变换的长度）。要制作 DFT 的正交版本，您需要将未归一化的 DFT 的结果缩放 1/sqrt(N)。在这种情况下，变换是正交的（也就是说，如果我们将正交 DFT 定义为 F，那么逆 DFT 就是 F 的共轭或厄米转置）。

`aft`在您的情况下，您可以通过简单地缩放来获得正确的答案`1.0/sqrt(len(a))`（注意 N 是从变换的长度中找到的；真正的 FFT 只会抛出大约一半的值，所以长度`a`很重要）。

我怀疑将归一化保留到最后的原因是，在大多数情况下，这并不重要，因此您可以节省进行两次归一化的计算成本。事实上，非常快速的[FFTW 库](http://www.fftw.org)不会在任何一个方向上进行任何规范化，而是完全由用户来处理。

编辑：为了清楚起见，上面的解释并不完全正确。使用这种简单的缩放不会得出正确的答案，因为在您的情况下，DC 分量将被添加两次，尽管`1.0/sqrt(len(a))`仍然是产生单一变换的正确缩放。

# ruby-on-rails - 将 rails 应用程序从 1.8.7 升级到 ruby 1.9.3

> ID：15147290
> 
> 赞同：1
> 
> 时间：2013-02-28T22:57:19.207
> 
> 标签：ruby-on-rails, ruby

我有一个运行 rails 3.0.20 和 ruby​​ 1.8.7 的 rails 应用程序，我想升级到 1.9.3。我为了开始这个过程而采取的阶段是这样的：

```
rvm user ruby-1.9.3
rvm gemset create upgradegems
rvm use ruby-1.9.3@upgradegems 
```

现在...我跑了捆绑。我与 twitter gem 和 omniauth gem 有冲突，所以我更新了它们。然后再次运行 bundle 并成功

现在什么？...我试着跑步

```
rails s 
```

我得到了这个错误：

```
ruby-1.9.3-p194@amazonto/gems/aws-s3-0.6.2/lib/aws/s3/extensions.rb:206:in `const_missing_from_s3_library': uninitialized constant Gattica::Auth::VERSION (NameError) 
```

我究竟做错了什么？我该如何解决？谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-28T23:05:18.113

它不是你的代码，而是你使用 Gattica 的库，它已经三年没有更新了，试着把它放在你的 Gemfile

```
gem "gattica", :git => "https://github.com/chrisle/gattica.git" 
```

这是一个适用于 ruby​​ 1.9.x 的分支

# javascript - jsPlumb：删除可拖动元素

> ID：15147291
> 
> 赞同：4
> 
> 时间：2013-02-28T22:57:20.140
> 
> 标签：javascript, jquery-ui, jquery-ui-draggable, jsplumb

我有一个“画布”，允许用户在其中添加可拖动的框并将它们与 jsPlumb 连接。我想让他们在某个时间点删除其中一个框。为了解决这个问题，我首先分离所有连接并从目标元素中删除端点，这很好

```
jsPlumb.detachAllConnections(targetBoxId);
jsPlumb.removeAllEndpoints(targetBoxId); 
```

然后我删除实际的 DOM 元素：

```
$(targetEl).remove(); 
```

在这一点上，jsPlumb 开始吓坏了，不允许我再拖动剩余的元素：

![错误](../Images/ac16fdc427a206992741df9162f99696.png) ![堆](../Images/b7cf6b5d81263e9f23c948531f7f8fe6.png)

我可以继续调整框的大小并建立新的连接，但拖动元素总是失败并发出上述错误。

有什么我做错了吗？换句话说，在“可拖动”环境中删除 jsPlumb 元素是否有更合适的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-08-17T14:54:30.147

您确实删除了连接和端点。但是在从 DOM 中删除（）对象之前，您必须使用**jsPlumb.detach()**它：

```
jsPlumb.detachAllConnections(targetBoxId);
jsPlumb.removeAllEndpoints(targetBoxId);
jsPlumb.detach(targetBoxId); // <--
targetBoxId.remove() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-29T14:51:56.943

在尝试删除特定 div 内的所有可拖动元素及其连接时，我也遇到了同样的问题......

我发现它与删除连接的方式有关。我只使用`detachAllConnections`，它显然仍然将端点留在我要删除的元素中（删除它们后会引起麻烦）。

我不得不改用`jsPlumb.deleteEveryEndpoint()`它，它不仅会删除连接，还会删除端点，在删除元素后也不会出错:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-29T05:39:12.847

嗨，我目前正在使用它，我想这肯定会对您有所帮助。

```
jsPlumb.ready(function(){
    ShowStartNode() ;
});
function ShowStartNode(){
    var newState = $('<div>').attr('id', 'start').addClass('item');
    var title = $('<div>').addClass('title').text('Start');
    var connect = $('<div>').addClass('connect');
    newState.css({
      'top': '80px',
      'left': '500px'
    });
    jsPlumb.makeTarget(newState, {
      anchor: 'Continuous',
      connector:[ "Flowchart" ]
    });
    jsPlumb.makeSource(connect, {
      parent: newState,
      anchor: 'Continuous',
      connector:[ "Flowchart" ]
    });
    newState.append(title);
    newState.append(connect);
    $('#centerdiv').append(newState);
    jsPlumb.draggable(newState, {
      containment: '#centerdiv'
    });
    newState.dblclick(function(e) {
      jsPlumb.detachAllConnections($(this));
      $(this).remove();
      e.stopPropagation();
    });         
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-11-05T13:18:53.407

这个片段对我有用：

```
var targetBoxId = '#' + window.idOfCaller;

jsPlumb.detachAllConnections(window.idOfCaller);
jsPlumb.removeAllEndpoints(window.idOfCaller);
$(targetBoxId).remove(); 
```

注意 the`detachAllConnections`和`removeAllEndpoints`where 仅传递字符串 id eg`x1`和`remove`are 传递`#x1`

# android - 几个 Include 对象，如何引用它们？

> ID：15147299
> 
> 赞同：0
> 
> 时间：2013-02-28T22:58:07.300
> 
> 标签：android, eclipse

我想模拟一个 TabHost，我正在使用 Eclipse 为 Android 2.3.3 编程。所以，我有一些按钮，旨在使其下方的布局可见或不可见。假设我有 3 个按钮，单击 B1 使布局 L1 可见，而 L2 和 L3 布局不可见，依此类推。我的问题是，如果使用包含标签查看布局，如何引用它们？在 Eclipse 的属性面板中，我给它们提供了 ID，例如 L1 的 copy1 等等。让我再问一个问题，他们可以独立管理数据吗？我的意思是，用户可以在不覆盖的情况下将数据存储在 L1、L2 和 L3 中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T06:16:21.413

我的问题在此页面[http://www.coboltforge.com/2012/05/tech-stuff-layout/](http://www.coboltforge.com/2012/05/tech-stuff-layout/)中得到了 很好的回答。这个页面也很重要[http://gibby.net.au/android-accessing-objects-within/](http://gibby.net.au/android-accessing-objects-within/)。

我自己回答了这些副本是否独立运行的问题，他们用户在视图 L1、L2 和 L3 中输入和存储数据。我测试过，幸运的是它们的行为是分开的:-)

# actionscript-3 - AS3 在 for each 期间调用子索引

> ID：15147300
> 
> 赞同：0
> 
> 时间：2013-02-28T22:58:07.410
> 
> 标签：actionscript-3, for-loop, parent-child

我有一个函数，它使用鼠标单击事件在鼠标坐标处创建符号的子代。然后将该实例推送到一个数组。

我现在正在尝试制作一个新功能，允许您在鼠标在 10 像素以内时拖放一个孩子。当孩子被放下时，我希望它旋转以面对数组中的下一个孩子。我目前正在使用`for each`循环与数组中的每个孩子进行通信。

**我遇到的问题**是获取被删除的孩子的索引值并将其设置为变量。

作为参考，`ins_trailPoint`是创建孩子的变量，`tPoint`是包含孩子的数组的名称。`child`是试图获取丢弃的孩子的索引值的变量。

```
function movePoint(Event:MouseEvent):void {
    for each (var ins_trailPoint in tPoint) {
        var child:int = event.target.parent.getChildIndex(event.target);
        var px:Number = mouseX - ins_trailPoint.x;
        var py:Number = mouseY - ins_trailPoint.y;
        var dist = Math.sqrt(px*px + py*py);

        if (dist<10) {
            stage.removeEventListener(MouseEvent.CLICK, addPoint);
            stage.addEventListener(MouseEvent.MOUSE_UP, dropPoint);
            ins_trailPoint.startDrag();

            function dropPoint(event:MouseEvent):void {
                ins_trailPoint.stopDrag();
                var dx:Number = tPoint[child+1].x - ins_trailPoint.x;
                var dy:Number = tPoint[child+1].y - ins_trailPoint.y;
                var radians:Number = Math.atan2(dy,dx);
                ins_trailPoint.rotation = radians * 180/Math.PI; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T06:30:33.057

参数 of以大写字母`movePoint()`调用，但您尝试 tu 使用小写。`Event``event`

# netbeans - Errai、CDI、Netbeans 警告和 beans.xml

> ID：15147301
> 
> 赞同：1
> 
> 时间：2013-02-28T22:58:07.653
> 
> 标签：netbeans, javabeans, cdi, errai, jsr299

有什么简单的方法可以删除这些关于“不满意的依赖：没有 bean 与注入点匹配”的讨厌的 Netbeans 警告？问题是 GWT 和 Errai 包不包含 beans.xml 文件，因此不包含激活的 bean，因为它们不符合 bean 档案的条件。

有没有办法在外部“升级”这些包，即。不重建或修改它们？

Errai 在这方面似乎不符合 JSR-299。

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T23:44:59.387

是的，这是正确的。Errai*有意*不使用 beans.xml，而是依靠 ErraiApp.properties 的存在来定位自己的 bean。这是因为您不希望 CDI 容器发现非服务器端 bean。

请参阅文档此页面上的注释：[https ://docs.jboss.org/author/display/ERRAI/Errai+CDI](https://docs.jboss.org/author/display/ERRAI/Errai+CDI)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-12-15T11:39:19.377

只需创建 beans.xml 并让 netbeans 创建它时为空。我没有找到其他方法。

# java - java中System.out和System.err之间的竞争

> ID：15147302
> 
> 赞同：19
> 
> 时间：2013-02-28T22:58:10.260
> 
> 标签：java, synchronization, system.out, system.err

请考虑这个java代码：

```
public class CMain {
    public static void main(String[] args){

        for (int i = 0; i < 10; i++) {
            System.out.println("A");
            System.err.println("B");
        }

    }
} 
```

通过快速查看代码，我们中的一些人可能会认为**输出必须是 As 和 Bs 的打印。**然而不是！随机出现10个A字和10个B字。像这样的东西：

![在此处输入图像描述](../Images/711cf72ad5a23598b0aa65698269ed9a.png)

这是为什么？以及它的解决方案是什么，以便交替显示 As 和 Bs ( ABABAB ...) 在我问这个问题之前，我检查了其他几个类似的问题的解决方案，但不适用于我的案例！我在这里带来了一些：

*   [同步和 System.out.println](https://stackoverflow.com/questions/9459657/synchronization-and-system-out-println)
*   [Java：同步标准输出和标准错误](https://stackoverflow.com/questions/6121786/java-synchronizing-standard-out-and-standard-error)
*   [Java：System.out.println 和 System.err.println 乱序](https://stackoverflow.com/questions/1883321/java-system-out-println-and-system-err-println-out-of-order) **PS。**我使用 Eclipse 作为我的 IDE

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-28T23:07:07.137

```
Why does this happen? 
```

This is because `out` and `err` are two different output streams. However, both of them print on console. So you do not see them as different streams. Moreover, when you do `out.println()`, it is not guaranteed that you will see the output on the console as soon as the statement gets executed. Instead, the strings are usually(depends on the system) stored in an output buffer (if you will) which is processed later by the system to put the output from the buffer onto the screen.

```
Solution :( 
```

Although, as **Eng.Fouad** pointed out that you can use `setOut(System.err)` or `setErr(System.out)` to make them ordered, I would still not suggest doing that when you are actually putting this in an application (only use it for debugging purposes).

What the proposed solution does is that it will end up using only one stream for both the standard output and the standard error, which I do not think is a good thing to do.

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-28T23:10:11.143

他们是不同`OutputStream`的s。如果您确实需要保证打印顺序，请使用：

```
System.setErr(System.out); 
```

或者

```
System.setOut(System.err); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-28T23:03:41.353

由于有两个单独的流，因此您提供的输出是可能的。

# android - 如何从 SurfaceView 调用 Activity 中的包私有方法？

> ID：15147304
> 
> 赞同：0
> 
> 时间：2013-02-28T22:58:30.283
> 
> 标签：android, methods, android-activity, surfaceview, package-private

我的 Activity 类中有一个非静态的包私有方法，我想在 SurfaceView 中调用它，例如：surfaceChanged() 或 surfaceDestroyed()。

```
 public class MyActivity extends Activity {

Camera mCamera = Camera.open();
Camera.Parameters parameters = mCamera.getParameters();
boolean hasFlash = false;
...
    void destroyCamera() {
    flashOff();
    mCamera.stopPreview();
    mCamera.release();
    mCamera = null;
}

void updateCamera() {
    mCamera.setParameters(parameters);
    mCamera.startPreview();
}
...
class CameraView extends SurfaceView implements SurfaceHolder.Callback {
...
    public void surfaceDestroyed(SurfaceHolder holder) {
    destroyCamera();
}
... 
```

有一个更好的方法吗？我在同一个活动中也有一个 toggleFlash() 方法，因此我可以通过关键侦听器在活动中切换闪光灯。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T01:08:43.100

要回答您的评论 - 是的，您可以将 传递给`Activity`构造函数来代替`context`：

```
SurfaceView view = new SurfaceView(this); 
```

然后，只要您确定`context`是`Activity`，就可以将其强制转换为 an`Activity`以调用该方法：

```
//call inside the view
((MyActivity) getContext()).methodToCall(); 
```

其他选项包括提供对您的静态引用`Activity`，或通过弱引用静态访问您的活动，例如：

```
public static WeakReference<MyActitivity> getActivity(){
    return new WeakReference<MyActivity>(self);// self is a static instance of MyActivity
} 
```

您可以通过在或默认构造函数`Activity`中分配它来获得对您的静态引用：`onCreate`

```
private static MyActivity self;

public MyActivity()
{
    super();
    self = this;
} 
```

# c# - 获取表示在 C# 中用作函数参数的表达式的字符串

> ID：15147305
> 
> 赞同：6
> 
> 时间：2013-02-28T22:58:38.823
> 
> 标签：c#, reflection, attributes, unity3d, assert

我正在使用 C# 为 Unity3D 开发，并决定拥有一个断言函数会很有用。（在 Unity3D 中，`System.Diagnostics.Debug.Assert` *存在*，但什么都不做。）

作为主要使用 C++ 工作的开发人员，我习惯于通过预处理器字符串化运算符来断言包含断言表达式的消息。也就是说，给定表单的断言失败`ASSERT(x > 0, "x should not be zero.")`，在运行时显示的消息 message 可以包括文本“x > 0”。我希望能够在 C# 中做同样的事情。

我知道 ConditionalAttribute 和 DebuggerHiddenAttribute，并且正在使用两者（尽管后者似乎被与 Unity 捆绑的 MonoDevelop 的自定义构建忽略了）。在寻找此问题的解决方案时，我在`System.Runtime.CompilerServices`命名空间中遇到了三个似乎与我正在尝试执行的操作相关的属性：CallerFilePathAttribute、CallerLineNumberAttribute 和 CallerMemberNameAttribute。（在我的实现中，我使用`System.Diagnostics.StackTrace`with`fNeedFileInfo == true`代替。）

我想知道是否有任何反射魔法（似乎不太可能）或属性魔法（似乎更有可能）可以帮助我实现与我在 C++ 中习惯的功能相同的功能。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-28T23:13:17.237

如果你传递一个表达式，你可以接近`x > 0`你想要的：

```
[Conditional("DEBUG")]
public static void Assert(Expression<Func<bool>> assertion, string message, [CallerMemberName] string memberName = "", [CallerFilePath] string sourceFilePath = "", [CallerLineNumber] int sourceLineNumber = 0)
{
    bool condition = assertion.Compile()();
    if (!condition)
    {
        string errorMssage = string.Format("Failed assertion in {0} in file {1} line {2}: {3}", memberName, sourceFilePath, sourceLineNumber, assertion.Body.ToString());
        throw new AssertionException(message);
    }
} 
```

然后你需要这样称呼它：

```
Assert(() => x > 0, "x should be greater than 0"); 
```

# ios - 如何在iOS中检查图像是否为黑白

> ID：15147311
> 
> 赞同：0
> 
> 时间：2013-02-28T22:58:56.857
> 
> 标签：ios, objective-c

我有一个 UIImage 显示从网上下载的照片。我想知道以编程方式发现图像是黑白还是彩色。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-28T23:52:28.843

如果您不介意计算密集型任务并且希望完成工作，请检查图像的每个像素。

这个想法是检查每个单个像素的所有 RGB 通道是否相似，例如 RGB 45-45-45 的像素是灰色的，还有 43-42-44 因为所有通道都彼此靠近。我在看每个频道都有一个相似的值（我使用的阈值为 10，但它只是随机的，你必须做一些测试）

一旦你有足够多的像素超过你的阈值，你就可以打破循环，将图像标记为彩色

代码未经测试，只是一个想法，希望没有泄漏。

```
// load image 
CGImageRef imageRef = yourUIImage.CGImage
CFDataRef cfData = CGDataProviderCopyData(CGImageGetDataProvider(imageRef));
NSData * data = (NSData *) cfData;
char *pixels = (char *)[data bytes];

const int threshold = 10; //define a gray threshold

for(int i = 0; i < [data length]; i += 4)
{
    Byte red = pixels[i];
    Byte green = pixels[i+1];
    Byte blue = pixels[i+2];

    //check if a single channel is too far from the average value. 
    //greys have RGB values very close to each other
    int average = (red+green+blue)/3; 
    if( abs(average - red) >= threshold ||
        abs(average - green) >= threshold ||
        abs(average - blue) >= threshold )
    { 
        //possibly its a colored pixel.. !! 
    }
}
CFRelease(cfData); 
```

# php - 它不在文本输入中显示数据

> ID：15147314
> 
> 赞同：1
> 
> 时间：2013-02-28T22:59:01.130
> 
> 标签：php, javascript, jquery, mysqli

我在一些文本输入的下方和下方有一个下拉菜单。我想要做的是，当我从下拉菜单中选择一门课程时，它应该显示在文本输入中选择的课程的相关详细信息。但是文本输入中没有显示任何内容。现在我没有收到任何错误，但我相信我在代码中做错了一些事情，因为课程详细信息没有显示在文本输入中。如何获取文本输入中显示的详细信息？

以下是下拉菜单和检索每门课程的 Duration 的 mysqli 代码：

```
$coursequery = "
SELECT CourseId, CourseNo, CourseName, Duration, CourseActive
FROM Course
WHERE
(CourseActive = ?)
ORDER BY CourseNo
";

... //mysqli prepare

$courseqrystmt->execute(); 

$courseqrystmt->bind_result($dbCourseId, $dbCourseNo, $dbCourseName, $dbCourseDuration, $dbCourseActive);

$courseqrystmt->store_result();

$coursenum = $courseqrystmt->num_rows();     

$courseHTML = '';

$courseHTML = '<select name="course" id="coursesDrop">'.PHP_EOL;
$courseHTML .= '<option value="">Please Select</option>'.PHP_EOL;           

$studentInfo = array();
$courseInfo = array();

while ( $courseqrystmt->fetch() ) {

$courseHTML .= sprintf("<option value='%s'>%s - %s</option>", $dbCourseId, $dbCourseNo, $dbCourseName) . PHP_EOL;   

$courseData = array();
$courseData["Duration"] = $dbCourseDuration;

array_push($courseInfo, $courseData);

}

$courseHTML .= '</select>'; 
```

下面是文本输入的代码：

```
$editsession = "
<form id='updateForm'>

    <p><strong>Course Chosen:</strong></p>
    <table>
    <tr>
    <th></th>
    <td><input type='hidden' id='currentId' name='Idcurrent' readonly='readonly' value='' /> </td>
    </tr>
    <tr>
    <th>Course No:</th>
    <td><input type='text' id='currentCourseNo' name='CourseNocurrent' readonly='readonly' value='' /> </td>
    </tr>
    <tr>
    <th>Course Name:</th>
    <td><input type='text' id='currentCourseName' name='CourseNamecurrent' readonly='readonly' value='' /> </td>
    </tr>
    <tr>
    <th>Duration:</th>
    <td><input type='text' id='currentDuration' name='Durationcurrent' readonly='readonly' value='' /> </td>
    </tr>
    </table>
    </form>
";

echo $editsession; 
```

下面是 jquery 代码，它根据从课程下拉菜单中选择的课程在文本输入中显示数据：

```
 $(document).ready( function(){

                        var courseinfo = <?php echo json_encode($courseInfo);?>;

        $('#coursesDrop').change( function(){

            $('#targetdiv').hide();
            var courseId = $(this).val();

                        if (courseId !== '') {
        for (var i = 0, l = courseinfo.length; i < l; i++)
        {
                if (courseinfo[i].CourseId == courseId) { 

        var currentindex = $('#currentDuration').val(courseinfo[i].Duration);

                var text = $(this).find('option:selected').text();
                var split = text.split(' - ');
                $('#currentId').val($(this).find('option:selected').val());
                $('#currentCourseNo').val( split[0] );     
                $('#currentCourseName').val( split[1] );  

                break;
        }
       }

     }
                 else{
                $('#currentCourseNo,#currentCourseName,#currentDuration,#currentId,#studentselect').val('');         
        }

    });

        $('#courseForm').delegate('change','select',(function(warnings)
{
    return function()
    {
        warnings.html('');
    };
}($('#warnings'))));

}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T23:13:16.727

看看[这个](http://api.jquery.com/jQuery.parseJSON/)jQuery 函数：

```
$.parseJSON(); 
```

当您定义 var “courseinfo” 时，php 将返回一个字符串（以 json 格式）。您需要在对象（或数组）中转换此字符串以轻松访问内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T23:35:49.660

如果您的 json_encode($courseInfo) 返回正确的 json 字符串。

您可以简单地使用 JSON.parse 将字符串转换为可用的 javascript 对象

```
var courseinfo = JSON.parse('<?php echo json_encode($courseInfo);?>'); 
```

# objective-c - 使用 if 语句更改标签文本 - obj c

> ID：15147315
> 
> 赞同：-1
> 
> 时间：2013-02-28T22:59:09.100
> 
> 标签：objective-c, ipad, cocoa-touch

我有一些 UILabel 和按钮。这是我的代码：

```
 if ([label.text isEqualToString:@"The three blue dots represents GPS towers. Click Go to advance"])
    {
        firstClick = [[UIAlertView alloc] initWithTitle:@"Welcome!"
                                                message:@"Blah, blah blah"
                                               delegate:self
                                      cancelButtonTitle:@"OK"
                                      otherButtonTitles:nil];
        [firstClick show];

        distanceLabel.text = @"Distance to first tower: 50 km";
        a = YES;
    }

    if (a)
    {
        label.text = @"Now you know that the distance to the first tower is 50 km. Click Go to advance";
    } 
```

所有这些都在按钮的操作方法中。当按下按钮时，alertview 视图和 distanceLabel 更改其文本。然后单击警报上的 OK 按钮我想更改 label.text。我尝试过使用实例布尔值，但这不起作用。为什么那行不通，我该怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T00:32:12.430

如果您希望在按下警报视图按钮时发生操作，您应该实现协议方法：

```
- (void)alertView:(UIAlertView *)alertView clickedButtonAtIndex:(NSInteger)buttonIndex {

    NSLog(@"button clicked at index %d", buttonIndex);
    NSLog(@"about to update a label.  this won't work if it's nil... %@", label);
    label.text = [NSString stringWithFormat:@"user clicked button %d", buttonIndex"];
} 
```

# visual-studio-express - Visual Studio Express for Web 2012 中的错误

> ID：15147316
> 
> 赞同：0
> 
> 时间：2013-02-28T22:59:15.420
> 
> 标签：visual-studio-express

我是新手，我遇到了一个错误，不知道如何解决问题。

我创建了一个新的 mvc4 项目（c#），空模板。

然后我添加一个控制器（空的 mvc 模板），然后我把他的代码：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.Mvc;

namespace Testing.Controllers
{
public class Testing2Controller : Controller
    {
    //
     //GET: /Testing2/

    public string Index()
    {
        return "01111000100011";
    }

    }
} 
```

**我明白了：**

> “/”应用程序中的服务器错误。
> 
> 无法找到该资源。
> 
> 说明：HTTP 404。您要查找的资源（或其依赖项之一）可能已被删除、名称已更改或暂时不可用。请查看以下 URL 并确保其拼写正确。
> 
> 请求的网址：/
> 
> 版本信息：Microsoft .NET Framework 版本：4.0.30319；ASP.NET 版本：4.0.30319.17929

**我的 web.config 文件是这样的：**

```
<?xml version="1.0" encoding="utf-8"?>

<configuration>
  <appSettings>
    <add key="webpages:Version" value="2.0.0.0" />
    <add key="webpages:Enabled" value="false" />
    <add key="PreserveLoginUrl" value="true" />
    <add key="ClientValidationEnabled" value="true" />
    <add key="UnobtrusiveJavaScriptEnabled" value="true" />
  </appSettings>
  <system.web>
    <httpRuntime targetFramework="4.5" />
    <compilation debug="true" targetFramework="4.5" />
    <pages>
      <namespaces>
        <add namespace="System.Web.Helpers" />
        <add namespace="System.Web.Mvc" />
        <add namespace="System.Web.Mvc.Ajax" />
        <add namespace="System.Web.Mvc.Html" />
        <add namespace="System.Web.Routing" />
        <add namespace="System.Web.WebPages" />
      </namespaces>
    </pages>
  </system.web>
  <system.webServer>
    <validation validateIntegratedModeConfiguration="false" />
    <handlers>
      <remove name="ExtensionlessUrlHandler-ISAPI-4.0_32bit" />
      <remove name="ExtensionlessUrlHandler-ISAPI-4.0_64bit" />
      <remove name="ExtensionlessUrlHandler-Integrated-4.0" />
      <add name="ExtensionlessUrlHandler-ISAPI-4.0_32bit" path="*."      verb="GET,HEAD,POST,DEBUG,PUT,DELETE,PATCH,OPTIONS" modules="IsapiModule"  scriptProcessor="%windir%\Microsoft.NET\Framework\v4.0.30319\aspnet_isapi.dll" preCondition="classicMode,runtimeVersionv4.0,bitness32" responseBufferLimit="0" />
      <add name="ExtensionlessUrlHandler-ISAPI-4.0_64bit" path="*." verb="GET,HEAD,POST,DEBUG,PUT,DELETE,PATCH,OPTIONS" modules="IsapiModule" scriptProcessor="%windir%\Microsoft.NET\Framework64\v4.0.30319\aspnet_isapi.dll" preCondition="classicMode,runtimeVersionv4.0,bitness64" responseBufferLimit="0" />
          <add name="ExtensionlessUrlHandler-Integrated-4.0" path="*." verb="GET,HEAD,POST,DEBUG,PUT,DELETE,PATCH,OPTIONS" type="System.Web.Handlers.TransferRequestHandler" preCondition="integratedMode,runtimeVersionv4.0" />
    </handlers>
  </system.webServer>

</configuration> 
```

非常感谢，我不知道该怎么办

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T23:03:02.283

您的控制器方法需要返回一个`ActionResult`. 你需要做这样的事情：

```
public ActionResult Index()
{
    return Content("01111000100011");
} 
```

**更新**

我刚刚注意到错误提到了 URL `/`。要获得问题中的控制器操作，您必须转到`/Testing2`.

# sql - SQL：返回所有行的不同选择

> ID：15147317
> 
> 赞同：2
> 
> 时间：2013-02-28T22:59:34.273
> 
> 标签：sql, ms-access, group-by, distinct

好吧，也许没有 SQL 语句可以帮助我解决这个问题，所以我不知道该叫什么。

在我正在处理的 Access 2013 数据库中：

所有表都有字段`name` `address` `phone` `city` `state` `zip`

什么用作`primary key is the phone number`，但未设置为 Access 中的主键。

我想从此数据库中删除重复记录。

电话号码是这里明显的唯一标识符，但我如何能够检索所有数据，按电话号码对其进行排序，并删除任何具有电话号码但保留其中一个的记录？

在大多数情况下，我相当确定地址、姓名和所有其他字段都会匹配，我只想清理表格，以免重复。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T23:17:39.833

我假设这`phone`是你的伪主键。意思是：它应该使用查询变得唯一。

对于 Postgres，以下将起作用：

```
SELECT DISTINCT ON (phone)
  *
FROM your_table 
```

它为每个电话号码选择任意一行，从而使电话号码保持不同。

也许有一个等价`DISTINCT ON (...)`于访问？

* * *

如果您`id`在表中有一个 REAL UNIQUE 标识符，这将起作用：

```
SELECT *
FROM your_table
WHERE id IN (
  SELECT min(id)
  FROM your_table
  GROUP BY phone
) 
```

* * *

# 得到它的工作，也许不完美（最快的查询），但它正在工作！

```
SELECT *
FROM (
  SELECT ROW_NUMBER() OVER () AS pseudoid, *
  FROM your_table
) x
JOIN (
  SELECT MIN(pseudoid) AS pseudoid
  FROM (
    SELECT ROW_NUMBER() OVER () AS pseudoid, phone
    FROM your_table
  ) z
  GROUP BY z.phone
) y
ON x.pseudoid = y.pseudoid 
```

## 解释：

首先（第 9-10 行）：

```
SELECT ROW_NUMBER() OVER () AS pseudoid, phone
FROM your_table 
```

这会为每一行（加上电话号码）提供一个 pseudo_id。所以我们有重复的条目，但每个条目都有其唯一的伪标识。然后（第 7-12 行）：

```
SELECT MIN(pseudoid) AS pseudoid
FROM (
  SELECT ROW_NUMBER() OVER () AS pseudoid, phone
  FROM your_table
) z
GROUP BY z.phone 
```

这使我们的电话号码独一无二，并始终选择 MIN（伪）。然后（第 3-4 行）：

```
SELECT ROW_NUMBER() OVER () AS pseudoid, *
FROM your_table 
```

为整个表创建一个伪标识。

然后我们加入这些表：这为每个电话号码提供了具有最小伪 ID 的完整行（+伪 ID）。

## 小一点（也许更快）：

```
WITH pseudo_id_table AS (SELECT ROW_NUMBER() OVER () AS pseudoid, * FROM your_table)
SELECT *
FROM pseudo_id_table x
JOIN (
  SELECT MIN(pseudoid) AS pseudoid
  FROM pseudo_id_table
  GROUP BY phone
) y
ON x.pseudoid = y.pseudoid 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T12:02:18.820

有一个更简单的方法：

1.  复制表（仅结构）
2.  将手机设为主键
3.  将旧表中的数据附加到新表中。任何重复的记录都将在追加时拒绝。
4.  删除旧表
5.  将新表重命名为旧表名

这仅在您保留的记录确实无关紧要时才有效。

# debugging - 在 OllyDbg 中显示字节 ptr 手表的方法？

> ID：15147319
> 
> 赞同：1
> 
> 时间：2013-02-28T22:59:47.297
> 
> 标签：debugging, assembly, ollydbg

有没有办法在 OllyDbg 中将字节指针显示为手表？

例如，如果你输入一个像 [ecx+ebx] 这样的表达式作为手表，你可能会得到一个像“FF084001”这样的值，但是如果你想要字节指针，最低有效字节（这里是 01）似乎没有只显示那个字节的方法。我尝试输入：

字节指针 [ecx+ebx]

并得到错误“无法识别的标识符”。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T23:09:48.883

试试`[BYTE ecx+ebx]`。在文档 ( `help.pdf`) 中按关键字 找到`expression`。

# python - 使用变量的内容查找并替换两个占位符之间的所有内容

> ID：15147320
> 
> 赞同：5
> 
> 时间：2013-02-28T22:59:57.940
> 
> 标签：python, regex, linux, bash, sed

Aloha，我一直在试图弄清楚如何在两个占位符之间替换/插入文本字符串。

```
#start
REPLACE ANYTHING IN HERE
#end 
```

最初我试图通过 sed 使用 BASH 执行此操作，但是当我尝试将变量传递给 sed 时遇到了障碍。

```
sed -n -i '/#start/{p;:a;N;/#end/!ba;s/.*\n/hello\n/};p' file.txt 
```

退货

```
#start
hello
#end 
```

但是当我尝试时没有快乐

```
sed -n -i '/#start/{p;:a;N;/#end/!ba;s/.*\n/$replace_var\n/};p' file.txt 
```

或者

```
sed -n -i "/#start/{p;:a;N;/#end/!ba;s/.*\n/$replace_var\n/};p" file.txt 
```

我已经在这几个小时了，并且已经四处搜索但没有找到解决方案。我正在尝试使用 python 或其他语言，或者可能使用 awk。我是这个领域的新手，所以任何有用的信息都将不胜感激。

提前致谢

这就是我最后的结果。这是一个与 cron 结合使用的脚本，使用最新发布的 ssh 阻止列表更新我的 /var/etc/hosts.deny 文件。

```
import re
import urllib2

hosts_deny = open('/etc/hosts.deny','r+')
hosts_deny_text = hosts_deny.read()

blockedHosts = urllib2.urlopen('http://www.openbl.org/lists/hosts.deny').read()
place = re.compile('(?<=#start)(\r?\n)'
                   '(.*?)'
                   '(?=\r?\n#end)',re.DOTALL)#DOTALL enables '.' to also include
                                             #a new line
hosts_deny_text = re.sub(place, '\n'+ blockedHosts, hosts_deny_text)
hosts_deny.seek(0)
hosts_deny.write(hosts_deny_text)
hosts_deny.close() 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-28T23:13:23.493

这似乎确实可以满足您的要求：

```
sed -ie "/#start/,/#end/{/#start/b;/#end/b;s/.*/$replace_var/;}" file.txt 
```

内部`/#start/b`并`/#end/b`跳过这些行，否则您也会替换它们。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-28T23:06:48.863

鉴于您的解释，我只能提出这个简单的代码：

```
import re

ss = '''qslkjqskqsdhf
#start
REPLACE ANYTHING IN HERE
#end
2135468761265
'''

reg = re.compile('(?<=#start)(\r?\n)'
                 '(.*?)'
                 '(?=\r?\n#end)',re.DOTALL)

print ss
print '----'
print reg.sub('\\1Ia orana',ss) 
```

结果

```
qslkjqskqsdhf
#start
REPLACE ANYTHING IN HERE
#end
2135468761265

----
qslkjqskqsdhf
#start
Ia orana
#end
2135468761265 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-28T23:06:07.380

您可以将文件读入字符串，然后执行以下操作：

```
sstart = s.split(start)
for i in range(len(s)):
   if i%2 ==1:
      send = sstart[i].split(end)
      for i in range(len(send)):
           if i%2 == 0:
                send[i] = REPLACEMENT
      sstart[i] = send.join()
s = sstart.join() 
```

所以你基本上是遍历列表，剪掉需要更换的部分，然后将这些部分粘在一起。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-28T23:11:49.407

使用“dotall”正则表达式，这很容易。这些使用 Perl、Python、PCRE 等很容易。例如，在 Python 中：

```
>>> s = '''#start
... REPLACE ANYTHING IN HERE
... #end'''
>>> re.sub(r'(?s)(#start\n).*?\n(#end)',
           r'\1hello\n\2', s)
'#start\nhello\n#end' 
```

显然，匹配开始行和结束行并用它们自己替换它们是多余的，但我决定保持通用，以防你想进一步扩展它。

我使用了`(?s)`而不是传递`re.DOTALL`标志，因此所有内容都是独立的，您不必考虑 Perl、Python 等传递标志的方式之间的差异。但在现实生活中，使用标志而不是嵌入它们通常更具可读性。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-28T23:55:57.353

我认为`sed`相当不适合这项任务，我会使用 awk 代替：

```
awk '!f; /#start/ { f=1; print repl } /#end/ { f=0; print }' repl="$replace_var" file.txt 
```

该`f`变量是一个标志，用于跟踪我们何时在标记内。`!f`调用默认块 ( `{print $0}`) 并打印标记之外的所有内容，包括`#start`标记。

### 测试

[*从eyquem 的*答案](https://stackoverflow.com/a/15147434/1331399)复制的测试文件：

```
cat << EOF > file.txt
qslkjqskqsdhf
#start
REPLACE ANYTHING IN HERE
#end
2135468761265
EOF 
```

将标记间内容替换为`hello\nhello`：

```
awk '!f; /#start/ { f=1; print repl } /#end/ { f=0; print }' repl="$(printf 'hello\nhello')" file.txt 
```

输出：

```
qslkjqskqsdhf
#start
hello
hello
#end
2135468761265 
```

# apache-flex - 没有为 HeaderRenderer 显示标签

> ID：15147325
> 
> 赞同：0
> 
> 时间：2013-02-28T23:00:22.403
> 
> 标签：apache-flex, datagrid, renderer

我希望我的数据网格标题用日期标签呈现。我正在使用以下代码。但是，当我运行实际应用程序时，我的标签不可见。有人可以建议吗？

```
import mx.controls.Label;
public class HeaderRenderer extends Label
{                                                                                          
private var lbl:Label;                                                                 
private const LEFT_PADDING:int = 12;                                                     

public function HeaderRenderer()
{
  super();
  lbl = new Label();
  lbl.visible=true;
  lbl.text="Label";
}
override protected function updateDisplayList(w:Number, h:Number):void
{
    lbl.x = LEFT_PADDING;
} 
```

我正在从 datagrid 列访问它，如下所示。

```
<mx:columns>
    <mx:DataGridColumn dataField="title" headerText="Task" width="{taskHeaderWidth}"/>
    <mx:DataGridColumn  itemRenderer="{ganttItemEditor}" 
             headerRenderer="{new ClassFactory(HeaderRenderer)}"
             rendererIsEditor="true"
             />
    </mx:columns> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T05:57:41.273

希望下面的代码可以帮助你： -

```
package
{
    import mx.controls.listClasses.MXItemRenderer;
    import spark.components.Label;
    public class HeaderRenderer extends MXItemRenderer
    {
        private const LEFT_PADDING:int = 12;                                                     
        private var lbl:Label;   

        public function HeaderRenderer()
        {
            super();
            lbl = new Label();
            lbl.visible=true;
            lbl.text="Label";
            this.addElement(lbl);
        }

        override protected function updateDisplayList(w:Number, h:Number):void
        {
            super.updateDisplayList(w, h);
            lbl.x = LEFT_PADDING;
        }

    }
} 
```

# c++ - 测试许多离散值的首选方法？

> ID：15147326
> 
> 赞同：0
> 
> 时间：2013-02-28T23:00:23.797
> 
> 标签：c++

我有以下情况：

```
variable in {12, 4, 999, ... }: 
```

列表中有大约 100 个离散值。我正在编写一个解析器来将其转换为 C++，我能想到的唯一方法是 100 个 case 语句，或者 100 个 if ==

一个比另一个更喜欢，还是有一个全面的更好的方法来做到这一点？

我应该澄清一下，这些值是常量整数。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T23:12:28.333

如果您的任何一个离散值的最大值足够小，则`std::vector<bool>`根据该条目是否在列表中设置为真或假的标志应该是非常最佳的 - 假设这些值以大致相等的概率出现。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T23:03:17.793

一种方法是按顺序排列值并使用二进制搜索来检查值是否包含在您的集合中。

您可以使用`std::lower_bound`插入点将值按排序顺序放入向量中，然后用于`std::binary_search`测试成员资格，或者您可以将值放入`std::set`并免费获得该功能（`std::set::find()`用于成员资格测试）。

有一些较小的性能考虑可能会使任一选项更可取；配置文件并自己决定。

第二种方法是将您的值放入一个哈希表中，例如`std::unordered_set`（或者如果您的值是静态已知的，则为某种静态等效项）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-28T23:12:56.123

假设这些值是常量，您当然可以使用`switch`语句。编译器将非常有效地执行此操作，使用二进制搜索类型方法或表 [或表和二进制搜索的组合]。长长的 if 语句列表不会那么有效，除非您对数字进行排序并采用二进制搜索类型的方法 - switch 语句更容易生成，因为编译器会找出最好的方法来决定哪些数字是在列表中，哪些不在列表中。

如果这些值不是常数，那么 switch 语句显然不是解决方案。位图可能会起作用 - 再次取决于实际范围 - 值的范围很大，那么这不是一个好的解决方案，因为它会使用大量内存 [但它可能是最快的方法之一，因为它只是用 2^n 数进行除法/取模的情况，可以使用简单的`>>`和`&`运算符完成，然后读取一次内存]。

# cakephp - CakePHP 行为、组件或两者都不是

> ID：15147334
> 
> 赞同：0
> 
> 时间：2013-02-28T23:00:40.090
> 
> 标签：cakephp, components, behavior

我是 cakePHP 的新手，并试图弄清楚什么时候最好将某些东西开发为模型/行为或控制器/组件。我有一个田径调度系统，其中各种类型的数据，例如场地、学校和部门都被分配给运动。以Venues为例：Venue和Sport有一个HABTM关联。我将构建一个工具，允许用户选择一项运动，并在此过程中查看分配给该运动的场地（列表 A），以及尚未分配给该运动的场地（列表 B）。然后，他们可以删除已分配的场地（从列表 A）或添加未分配的场地（从列表 B）。一个非常基本的工具，我知道如何用 PHP 编写代码。我在整个应用程序中都有几个相同的“作业”工具，这就是我想抽象出来的原因。

我最初想构建一个组件，允许我获取两个列表，并执行添加和删除，但现在我想知道我是否可以通过创建一个行为来增加我的模型。我只是在概念上有点迷茫，希望得到任何澄清。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T03:42:41.503

CakePHP 有“胖模型，瘦控制器”的座右铭。您的模型/行为应该完成所有繁重的工作并处理所有数据操作。您解释的内容绝对属于自定义模型功能或行为。

# web-services - 用于 REST 服务问题的 Wsdl

> ID：15147335
> 
> 赞同：0
> 
> 时间：2013-02-28T23:00:42.577
> 
> 标签：web-services, rest

我正在尝试使用[此](http://www.restfulwebservices.net/rest/USAZipCodeService.svc?wsdl)wsdl 中的 GetPostCodeDetailsByPlaceName 方法。我无法弄清楚参数应该如何变化。我是看错了还是不完整？

我试过猜测很多事情，比如： [这个](http://www.restfulwebservices.net/ServiceContracts/Rest/2008/01/IPostalCodeService/GetPostCodeDetailsByPlaceName?placeName=SD)和 [这个](http://www.restfulwebservices.net/ServiceContracts/Rest/2008/01/IPostalCodeService/GetPostCodeDetailsByPlaceName?PlaceName=SD)

甚至 [这个](http://www.restfulwebservices.net/ServiceContracts/Rest/2008/01/IPostalCodeService/GetPostCodeDetailsByPlaceName?parameters=SD)

任何人对此有任何意义吗？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T02:31:01.703

由于此 Web 服务具有 WSDL，因此它是基于 SOAP 的 Web 服务，而不是 RESTful Web 服务。您可以使用[Apache Axis](http://axis.apache.org/axis/)生成基于 WSDL 的 WS 客户端，也可以使用[SoapUI](http://www.soapui.org/)之类的工具来调用 Web 服务。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T12:27:25.400

WSDL = SOAP
WADL = REST

因此线程标题本身是无效的！！！

# r - 基于R中不同数据框的调整值进行子集时出错

> ID：15147336
> 
> 赞同：-1
> 
> 时间：2013-02-28T23:00:43.873
> 
> 标签：r, formatting, conditional, dataframe, subset

我在问一个关于我从@redmode 在这里学到的方法的附带问题：

[基于R中不同数据框的值的子集](https://stackoverflow.com/questions/15097497/subsetting-based-on-values-of-a-different-data-frame-in-r)

当我尝试通过以下方式动态调整我想要子集的级别时：

```
N <- nrow(A)
cond <- sapply(3:N, function(i) sum(A[i,] > 0.95*B[i,])==2)
rbind(A[1:2,], subset(A[3:N,], cond)) 
```

我收到一个错误

```
Error in FUN(left, right) : non-numeric argument to binary operator. 
```

你能想出一种方法来获取与 A 中的值有关的行，这些行大于 B 中值的 95% 吗？谢谢你。

这是 A 和 B 玩的代码。

```
A <- structure(list(name1 = c("trt", "0", "1", "10", "1", "1", "10"
), name2 = c("ctrl", "3", "1", "1", "1", "1", "10")), .Names = c("name1", 
"name2"), row.names = c("cond", "hour", "A", "B", "C", "D", "E"
), class = "data.frame")
B <- structure(list(name1 = c("trt", "0", "1", "1", "1", "1", "9.4"), 
    name2 = c("ctrl", "3", "1", "10", "1", "1", "9.4")), .Names = c("name1", 
"name2"), row.names = c("cond", "hour", "A", "B", "C", "D", "E"
), class = "data.frame") 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T00:10:57.253

您的数据存在一些严重的格式问题。

首先，列应该是相同的数据类型，行应该是观察值。（并非总是如此，但这是一个非常好的开始方式）在这里你有一个叫做`cond`的行，然后是一个叫做 的行`hour`，然后是我猜的一系列分类。开始呈现数据的方式没有多大意义，也不适合轻松操作数据。但一切都没有丢失。这就是我要做的：

重组我的数据：

```
C <- data.frame(matrix(as.numeric(unlist(A)), ncol=2)[-(1:2), ])

colnames(C) <- c('A.trt', 'A.cntr')
rownames(C) <- LETTERS[1:nrow(C)]

D <- data.frame(matrix(as.numeric(unlist(B)), ncol=2)[-(1:2), ])

colnames(D) <- c('B.trt', 'B.cntr')

(df <- cbind(C, D)) 
```

这使：

```
#   A.trt A.cntr B.trt B.cntr
# A     1      1   1.0    1.0
# B    10      1   1.0   10.0
# C     1      1   1.0    1.0
# D     1      1   1.0    1.0
# E    10     10   9.4    9.4 
```

然后你的问题很容易解决：

```
df[which(df[, 1] > 0.95*df[, 3] & df[, 2] > 0.95*df[, 4]), ]

#   A.trt A.cntr B.trt B.cntr
# A     1      1   1.0    1.0
# C     1      1   1.0    1.0
# D     1      1   1.0    1.0
# E    10     10   9.4    9.4 
```

# android - 便于 C/C++ 处理的 Android 图像处理库

> ID：15147338
> 
> 赞同：1
> 
> 时间：2013-02-28T23:00:48.543
> 
> 标签：android, image-processing

我理想的 android 图像处理库只是提供了一种将图像以标准格式加载到内存中的方法，而没有任何额外的损失，因为它是从文件/相机加载的，然后允许我轻松地调用我自己的 C 或 C++ 例程。格式，最后允许我将结果以标准格式保存到文件中（可能会丢失，例如 jpeg）。这似乎与大多数 android 图像处理库所采用的方法大不相同。有这样一个口碑不错的图书馆吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T00:12:18.697

是的，[OpenCV](http://opencv.org/platforms/android.html)（开源计算机视觉）。

还建议查看[关于使用 OpenCV 进行 Android 项目的教程](http://www.stanford.edu/class/ee368/Android/Tutorial-2-OpenCV-for-Android-Setup-Windows.pdf)。

# jquery - jquery height() 在 Chrome 和 Firefox 中返回不同的值——在 api.jquery.com 演示中——为什么？

> ID：15147352
> 
> 赞同：1
> 
> 时间：2013-02-28T23:01:39.080
> 
> 标签：jquery

如果我去

[http://api.jquery.com/height/#example-0](http://api.jquery.com/height/#example-0)

然后单击“获取段落高度”，我在 Chrome v25 中得到“36px”，在 Firefox v19 中得到“34px”。

我提交了一个错误（[http://bugs.jquery.com/ticket/13538](http://bugs.jquery.com/ticket/13538)），分诊护士建议它可能与默认样式表有关。（并指出我SO。）

其他人看到这种行为吗？这是一个错误吗？如果不是，你能解释为什么会这样吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T23:06:42.643

Internet Explorer 10 显示`37px`。

这与字体的呈现方式有关。每个浏览器呈现文本的方式都略有不同，例如字距调整、像素对齐、基线位置等。

我们最喜欢的 Jeff Atwood 有[几篇](http://www.codinghorror.com/blog/2007/06/font-rendering-respecting-the-pixel-grid.html)关于这个主题的博客[文章](http://www.codinghorror.com/blog/2007/06/whats-wrong-with-apples-font-rendering.html)，详细解释了字体渲染。

# c# - Xamarin.Mac - 提交到 Mac App Store 的问题

> ID：15147353
> 
> 赞同：3
> 
> 时间：2013-02-28T23:01:41.607
> 
> 标签：c#, .net, macos, monomac, xamarin.mac

我们正在为 Mac App Store 提交我们的应用程序。提交到商店时，我收到来自 Apple 的以下电子邮件：

```
Dear developer,

We have discovered one or more issues with your recent delivery for "YourApp". To process your delivery, the following issues must be corrected: 

App sandbox not enabled - The following executables must include the "com.apple.security.app-sandbox" entitlement with a Boolean value of true in the entitlements property list. Refer to the App Sandbox page for more information on sandboxing your app. 

•   YourApp.app/Contents/MacOS/YourApp

Once these issues have been corrected, go to the Version Details page and click "Ready to Upload Binary." Continue through the submission process until the app status is "Waiting for Upload." You can then deliver the corrected binary. 
```

在 Project Options->Mac OS X Application 下，我有：

*   启用权利 - 选中
*   一些 iCloud 的东西自动填写
*   启用应用沙盒 - 选中
*   允许传出网络连接 - 选中

在 Mac OS X 打包下——我也手动选择了 App Store 分发证书。

要提交，我一直在使用 Build->Archive 并从 XCode 内部提交。如果我在 XCode 中“验证”，则没有错误。

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-01T14:49:36.337

将此问题发送给 Xamarin 支持，他们解决了。

他们向我发送了一个新版本的 Xamarin 来安装它以解决该问题。

如果其他人有这个问题，应该很快就会更新。

# actionscript-3 - 将事件侦听器添加到按钮

> ID：15147354
> 
> 赞同：-1
> 
> 时间：2013-02-28T23:01:47.637
> 
> 标签：actionscript-3, flash, actionscript

我是 Actionscript 的新手，我正在创建一个简单的加法游戏，玩家将点击屏幕底部的数字 1 到 9 来解决加法问题。我应该在底部创建单独的按钮或影片剪辑吗？

如何向按钮/影片剪辑添加事件侦听器，以便能够判断玩家是否单击了第二个按钮而不是屏幕上的其他按钮。谢谢！

![截屏](../Images/409eb1e356d1faa46dc8d304ecbe86b1.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T00:45:28.543

我要做的是制作一个带有文本字段的电影剪辑。例如，我有一个影片剪辑（链接名称为）和一个名为（确保嵌入数字或您需要的任何其他字符`NumClip`）的动态文本字段。`numText`然后一个简单的 for 循环应该可以解决问题。

```
var maxNum:Number = 9;

for (var i:int = 1; i <= maxNum; i++)
{
    var clip:NumClip = new NumClip();
    clip.x = i * (clip.width + 5);
    clip.y = 50;
    clip.id = i;
    clip.numText.text = String(i);
    clip.addEventListener(MouseEvent.CLICK, numClick);
    addChild(clip);
}

function numClick(e:MouseEvent):void
{
    trace("You clicked number " + e.currentTarget.id);
} 
```

我没有测试过这段代码，但它看起来不错，应该可以解决问题

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T00:52:01.073

与 Ronnie 的解决方案非常相似（我几乎完成了这个，所以不得不发布）并且它已经过测试：

```
import flash.display.MovieClip;
import flash.text.TextField;
import flash.text.TextFieldAutoSize;
import flash.events.MouseEvent;
import flash.text.TextFormat;

var buttonCount = 9;
var buttonSize = 50;

var button:MovieClip;
var label:TextField;

for (var i:int = 0; i < buttonCount; i ++)
{
    // Create a new MovieClip
    button = new MovieClip();

    // We'll use this in the event handler to identify which button was clicked
    button.id = i + 1;

    // Draw the background in the graphics prop of the MovieClip
    button.graphics.beginFill(0x00ff00, 1);
    button.graphics.drawRect(0, 0, buttonSize, buttonSize);

    // Add event listener
    button.addEventListener(MouseEvent.CLICK, this.clickHandler);

    // Position the button
    button.x = i * (buttonSize + 20); // Add some spacing
    button.y = stage.stageHeight - buttonSize - 10;

    // Add the button to the stage
    addChild(button);   

    // Create the label for the button
    label = new TextField();
    label.text = button.id.toString();
    label.selectable = false;
    label.multiline = false;
    label.autoSize = TextFieldAutoSize.LEFT;
    label.setTextFormat(new TextFormat('Arial', 12, 0, true));

    // Position the label in the centre of the button
    label.x = (buttonSize - label.width) / 2;
    label.y = (buttonSize - label.height) / 2;

    // Add the label to the button MovieClip
    button.addChild(label);
}

function clickHandler(event:MouseEvent):void
{
    trace("Button clicked:", event.currentTarget.id);
} 
```

# google-chrome - jquerymobile - Chrome 不会提示在标准 POST 提交时保存密码

> ID：15147358
> 
> 赞同：0
> 
> 时间：2013-02-28T23:02:13.660
> 
> 标签：google-chrome, jquery-mobile, passwords

Chrome 提示保存密码的时间似乎并不一致。考虑我网站上的以下两个过程......

1.  去首页

2.  单击登录（这会将您带到 Login.php）

3.  输入登录名/密码

4.  您现在已登录，但 Chrome**并未**提示您保存密码

然而...

1.  去首页

2.  点击登录

3.  **刷新页面**

4.  输入登录名/密码

5.  您现在已登录，Chrome**确实**提示保存密码...

是什么赋予了？唯一的区别是点击“刷新”。Login.php 的代码非常简单……本质上是：

```
<form id="LoginForm1" action="Login.php" method="POST">
  <input type="text" name="UserName" />
  <input type="password" name="Password" />
  <input type="submit" value="Login" />
</form> 
```

主页上有 javascript（jquery-1.7.2 和 jquery.mobile-1.3.0），但 Login.php 上没有。不过，它似乎继续存在，因为 Login.php 上的表单样式在刷新之前看起来像 jquerymobile。谁能解释这种行为？（此外，为什么 jquery/jquerymobile 会禁止保存密码功能？）

在此先感谢...这是我提出的第一个问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-02T20:13:11.477

***简短的回答***

从我的主页到 Login.php 的链接需要**a href**标记中的**data-ajax="false" 。**

 **在我将 jquery-mobile 重新包含到 Login.php 之后，Login.php 上的**表单**标签也需要**data-ajax="false"**。

***长答案***

**第1部分**

经过更多挖掘，我发现 jquery-mobile 的正常行为[是“劫持”所有**a href**链接并通过其 ajax 功能处理它们](http://jquerymobile.com/demos/1.3.0/docs/widgets/navigation/)。这意味着它以 ajax 风格的传输方式传输到 Login.php，而不是标准**的 a href**传输。一个标准的传输检查 Login.php 的特别声明的 javascript 包含文件，但是通过主页的 javascript 包含的 ajax 传输。

但是...当您强制浏览器仅查看 Login.php（通过单击刷新）时，它发现没有任何 javascript 包含，因此 Chrome 查看了裸页面并对其进行了正确处理。

**第2部分**

您必须满足几个要求，Chrome 才会提示保存密码。其中包括：

1.  您必须使用**表单**元素

2.  您必须使用**提交**，而不是按钮

3.  提交必须是真实的提交。（如果您使用一些 javascript/Ajax 覆盖提交功能......它（可能）不会提示保存密码。）

4.  页面加载时表单必须可见。

使用 jquery-mobile 时，3 和 4 可能会让您大吃一惊。

关于3...

jquery-mobile 自动劫持表单提交过程，就像它对链接所做的那样......所以有必要将**data-ajax="false"**添加到**表单**元素以防止它这样做。

关于4...

我网站的第一个版本在主页上有一个登录[**面板**](http://view.jquerymobile.com/1.3.0/docs/widgets/panels/)，登录按钮从页面“下方”显示面板。[在我强制面板在页面加载时可见](https://stackoverflow.com/questions/14762831/jquery-mobile-1-3-panel-always-visible)之前，此方法不会提示输入密码。

由于我不希望登录面板始终在主页上可见，因此我决定使用单独的登录页面 (Login.php)。然而，jquery-mobile 处理指向单独页面的链接的固有方法是使用其 ajax 功能来劫持它们……浏览器将其解释为停留在同一页面上。因此，对于 Chrome，导航到 Login.php 与使用隐藏面板相同......因为 Chrome 将这两个请求都解释为停留在主页上......在任何一种情况下，最初加载页面时表单元素都是不可见的.**

# stringtemplate-4 - 我在 v4 中找不到 v3 API setAttributes(Object)

> ID：15147359
> 
> 赞同：0
> 
> 时间：2013-02-28T23:02:21.453
> 
> 标签：stringtemplate-4

v4 提供了一个 API：ST.add(String, Object)。我在 v4 中找不到 v3 API setAttributes(Object)。

我使用了 ST.add("root", JSONObject)。出现异常：

```
java.lang.IllegalArgumentException: no such attribute: root
        at org.stringtemplate.v4.ST.add(ST.java:223)
        at jjs.stst.STStandaloneTool.invokeTemplate(STStandaloneTool.java:479)
        at jjs.stst.STStandaloneTool.generate(STStandaloneTool.java:420)
        at jjs.stst.STStandaloneTool.main(STStandaloneTool.java:722) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T10:31:26.020

我有同样的问题。当模板不是匿名的并且不期望任何形式参数时会发生此错误。你可以自己添加这个参数，但它不舒服。

可以通过将 ST.impl.HasFormalArgs 设置为 false 并使用 ST.add 来绕过问题

# mysql - 从 Oracle 到 MySQL 的 CASE 语句

> ID：15147360
> 
> 赞同：0
> 
> 时间：2013-02-28T23:02:22.940
> 
> 标签：mysql, oracle, count, case

我有以下查询需要从 Oracle 移植到 MySQL。它在两者中执行时都没有任何编译错误，但结果表不同。在 Oracle 中，我得到每个计数列下的单个计数。但是在 MySQL 中，无论计数应该在哪里，它们都落在 a5 以下。像这样：

在甲骨文中：![在此处输入图像描述](../Images/50a990aaec5d02a68a30914ec548e2df.png)

但在 MySQL 中：![在此处输入图像描述](../Images/00121377c6e94c238d3a4fb0d7650d90.png)

```
select x1.alert_level, count(x1.a1),  count(x1.a2), count(x1.a3), 
count(x1.a4), count(x1.a5) from 
(select  
table_name.column_name alias, 
case when (now() - column_name) <= 7 then 1 end as a1,  
case when (now() - column_name) between 7 and 30 then 1 end as a2, 
case when (now() - column_name) between 30 and 60 then 1 end as a3,
case when (now() - column_name) between 60 and 90 then 1 end as a4, 
case when (now() - column_name) >= 90 then 1 end as a5 
FROM tables
WHERE filter_conditions)  x1  GROUP BY x1.alias; 
```

如何调和差异以使 MySQL 输出看起来像 Oracle 输出？感谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T02:56:40.797

我用过`datediff`，效果很好！

# scala - Slick，如何将查询映射到继承表模型？

> ID：15147362
> 
> 赞同：9
> 
> 时间：2013-02-28T23:02:30.297
> 
> 标签：scala, scalaquery, slick

Slick，如何将查询映射到继承表模型？IE，

我有表 A、B、C A 是“父”表，B 和 C 是“子”表我想知道的是我应该如何使用 slick 对其进行建模，这样 A 将是抽象类型，而 B & C 具体类型，并且查询 A 中的一行将产生 B 或 C 对象

类似于 JPA 的`InheritanceType.TABLE_PER_CLASS`.

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-07-18T15:50:07.053

我们需要做几件事。首先找到一种将层次结构映射到表的方法。在这种情况下，我使用的是存储类型的列。但是您也可以使用其他一些技巧。

```
trait Base {
  val a: Int
  val b: String
}

case class ChildOne(val a: Int, val b: String, val c: String) extends Base
case class ChildTwo(val a: Int, val b: String, val d: Int) extends Base

class MyTable extends Table[Base]("SOME_TABLE") {
  def a = column[Int]("a")
  def b = column[String]("b")
  def c = column[String]("c", O.Nullable)
  def d = column[Int]("d", O.Nullable)
  def e = column[String]("model_type")

  //mapping based on model type column
  def * = a ~ b ~ c.? ~ d.? ~ e <> ({ t => t match {
    case (a, b, Some(c), _, "ChildOne") => ChildOne(a, b, c)
    case (a, b, _, Some(d), "ChildTwo") => ChildTwo(a, b, d)
  }}, {
    case ChildOne(a, b, c) => Some((a, b, Some(c), None, "ChildOne"))
    case ChildTwo(a, b, d) => Some((a, b, None, Some(d), "ChildTwo"))
  })
}
} 
```

现在要确定特定的子类型，您可以执行以下操作：

```
Query(new MyTable).foreach { 
     case ChildOne(a, b, c) => //childone
     case ChildTwo(a, b, d) => childtwo
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-08T04:13:51.323

Slick 不直接支持这一点。不过，有些数据库可以帮助您进行继承，因此您应该能够获得接近预期效果的东西。

查看[PostgreSQL 中的继承文档](http://www.postgresql.org/docs/9.2/static/tutorial-inheritance.html)

# eclipse - Spring Webflow 2.3 测试（使用 Maven）：如何使用与 id 不同的文件名引用父流

> ID：15147365
> 
> 赞同：0
> 
> 时间：2013-02-28T23:02:31.747
> 
> 标签：eclipse, maven, classpath, spring-webflow

我调试了我的 Spring Webflow 测试以找出问题的第一部分：当您有一个文件名与流的 id 不同的流时（'commons-flow.xml' with id=' commons') 然后仅使用 resourceFactory.createFileResource(pathToFlowFile) 不起作用，因为假定 id 是文件名。

有一种方法可以覆盖 id，`resourceFactory.createResource(pathToFlowFile, attributesMap, overrideId)`

但是，这使用 Classloader 来解析文件，而 createFileResource 似乎使用了不同的方法。

我无法弄清楚我应该如何让 Classloader 识别流文件。我检查了它的类路径，它只有 JAR 依赖项，然后动态创建了 target/classes 和 target/test-classes 文件夹。没有参考我的项目。

这是一个 Maven 项目，我从项目根到流的路径类似于：

```
src/main/webapp/WEB-INF/flows/<flow-folder>/<flow-filename>.xml 
```

我见过[webflow 测试，无法找到](https://stackoverflow.com/questions/6422748/webflow-testing-unable-to-find-flow-model)重申我已经发现的流模型，但由于某种原因，我遇到了其他似乎没有的 Classloader 问题。

在我看到人们成功引用流文件的地方，他们似乎要么与项目根目录相关，要么与 src/main/webapp 的 WebContext 相关。

我正在使用 Eclipse 中的运行配置以及 maven 测试目标运行 JUnit 测试。

我可以为 Eclipse 中的运行配置配置自定义类路径，以包含我定义为 pathToFlowFile 的相对路径的父文件夹。

然而，这对 Maven 一点帮助都没有，它在执行测试目标时仍然存在类加载器/类路径问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T09:24:33.033

我遇到了类似的情况，我必须设置流 ID 并指定路径。因此，我没有使用 FlowDefinitionResourceFactory，而是创建了一个 FlowDefinitionResource 实例，如下所示

```
FlowDefinitionResource resource = new FlowDefinitionResource(flowId, path, attributes); 
```

所以在你的方法中你应该有这样的东西

```
protected FlowDefinitionResource[] getModelResources(FlowDefinitionResourceFactory resourceFactory) {
    FlowDefinitionResource resource = new FlowDefinitionResource("flowId", src/main/webapp/WEB-INF/flows/<flow-folder>/<flow-filename>.xml", null);
    return new FlowDefinitionResource[] {resource};
} 
```

如果您收到 FileNotFoundException，只需检查堆栈跟踪以查看它在哪里寻找文件。

希望这可以帮助。

米

# android - 如何在android中的另一个CCLayer之上添加一个CClayer

> ID：15147367
> 
> 赞同：0
> 
> 时间：2013-02-28T23:02:40.147
> 
> 标签：android, cocos2d-iphone, andengine

我正在构建一个游戏，我需要在其中添加一个通用的顶层图层作为其他图层的通用菜单。我正在使用 AndEngineCocos2dExtension。当前代码：

```
 public class LobbyLayer extends CCLayer {

    CPButton low, medium, high, friends, vip;
    CCSprite low_selected, medium_selected, high_selected, friends_selected,
            vip_selected;

    CCNode tables[];

    public LobbyLayer() throws IOException {

        CCSprite background = new CCSprite("gfx/bg.jpg");
        background.setPosition(400, 240);
        attachChild(background);

        CPTopLayer topLayer = new CPTopLayer();
        topLayer.setPosition(0,240);
        attachChild(topLayer); 
```

这是我的第二层，我有一个welcomeLayer，它有一个按钮（LobbyLayer），topLayer 是我想要在lobbyLayer 顶部的层。

但是我在模拟器上得到了一个黑屏，没有topLayer它可以正常工作。请帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T09:33:26.623

您可以指定图层的 z 值。我在父层中添加子层时使用过：

```
addChild(background,1);//z value 0

addChild(topLayer,5);//z value 5 so appear above background layer 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T16:09:50.197

我不确定您在哪个分支上，但 GLES2 不再使用图层。当我在 andengine.org/forums 中搜索 Cocos2dExtension 时，我发现：

[http://www.andengine.org/forums/tools/porting-to-ios-t8450.html](http://www.andengine.org/forums/tools/porting-to-ios-t8450.html)

> 我相信 cocos2d 扩展是这样我们可以使用 cocos builder 来构建菜单和东西，所以我们有一个图形界面。

这对你有帮助吗？

# css - CSS放置问题

> ID：15147370
> 
> 赞同：1
> 
> 时间：2013-02-28T23:02:48.180
> 
> 标签：css, sass

不是真正的问题，而是更多的“你们是做什么的”

假设您已经设置了样式表的基本排版部分，其中包含标题和链接等样式。所以对于这个例子，说标题都被读取并且链接是蓝色的

然后，您将 h1 和 h2 放在页面上。现在，一个客户过来说他们想要某个页面上特定 h2 上的链接。您想要添加链接，但在视觉上保持它看起来相同。

你：

1.  在印刷部分添加 a 样式作为 h2 的子样式，例如 h2 a { styles; }

2.  将 h2.this-one 样式添加到样式表的特定页面部分。

我知道两者都可以正常工作，但是你们怎么办？

尼尔

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T23:05:58.557

It depends on whether you foresee this potentially happening in the future... if so use the `h2 a` method

# css - 定位谷歌地图，右侧有侧边栏，顶部有固定标题

> ID：15147378
> 
> 赞同：3
> 
> 时间：2013-02-28T23:03:24.707
> 
> 标签：css

我正在寻找一个谷歌地图 div，右侧有一个显示列表的侧边栏。我想让它不滚动窗口，并且在调整屏幕大小时页面上的内容是流畅的。

我之前曾尝试使用 box-sizing ，如下所示：

```
 #map-wrapper * {
     box-sizing: border-box !important;
     -moz-box-sizing: border-box !important;
     -khtml-box-sizing: border-box !important;
     -webkit-box-sizing: border-box !important;
     -ms-box-sizing: border-box !important;
    }
    #map-container {
     position: absolute;
     width: 100%; height: 100%;
     margin: 0;
     overflow: hidden;
     border-top: 50px solid transparent !important; border-right: 350px solid transparent !important;
    } 
```

当试图在侧边栏中有一个滚动列表时，这开始成为一场噩梦。有没有人有一个好的解决方案，或者我在盒子尺寸方面是否走在正确的轨道上？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T05:00:13.187

对于这样的事情，Box-sizing 完全是可选的。有很多方法可以解决这个问题，但我有一种喜欢的方法，它既简单又适用于 IE6 等旧浏览器。

对于您尝试创建的各种框架（侧边栏和 Gmaps/内容框架），创建一个设置`position:absolute; overflow:auto;`. 现在您可以利用 CSS 绝对定位中的一个很酷的技巧。如果在 CSS 中同时设置`top`和`bottom`，则会自动计算高度。使用左/右的宽度也是如此。所以要让我们的两个 div 设置为 100% 高度`top: 0; bottom:0;`。

如果您希望侧边栏为 300 像素宽并固定在右侧，请设置`width:300px; right:0;`. 对于内容 div，设置`right:300px; left:0;`.

现在您需要防止出现正文滚动条。首先，您需要通过将它们设置为 0 从正文中删除默认边距/填充。此外，您需要将 html 和正文设置为`height:100%;`（100% 等于查看区域高度），否则它们默认`auto`为内容的高度。添加到 body 也是明智的`overflow:hidden`，因为一些浏览器认为 `body{height:100%;} 意味着他们需要显示滚动条。

[这是一个关于 JS fiddle 的快速模型，向您展示了它是如何工作的。](http://jsfiddle.net/kuXYq/4/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-01T03:11:30.390

Elimn 的建议对我不起作用，但以下建议（我在 Google 地图上方创建了一个标题栏）：

```
body { height: 100%; margin: 0; padding: 0; overflow: hidden; }
#map-canvas { height: 100%; overflow: auto; } 
```

在身体里：

```
<div id="topmenubar" style="position:relative;background:olive;height:40px;top:0;"></div>
<div id="map-canvas"></div> 
```

# javascript - Twitter 时间线小部件在 Chrome 中不起作用

> ID：15147379
> 
> 赞同：1
> 
> 时间：2013-02-28T23:03:34.627
> 
> 标签：javascript, wordpress, twitter

我的 Twitter 时间线小部件不会在 Chrome 中加载，但可以在 Firefox 和 IE 中完美加载。当我检查 Chrome 的控制台时，我得到“资源失败：http: [//platform.twitter.com/widgets.js](http://platform.twitter.com/widgets.js) ”，但是当我点击该链接时，它可以工作。

这是我正在使用的代码：

```
<a class="twitter-timeline"  href="https://twitter.com/funnelholic"  data-widget-id="307229764530339840">Tweets by @funnelholic</a><script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0];if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src="//platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");</script> 
```

我还将 www.funnelholic.com 和 funnelholic.com 都列入了白名单

有问题的站点是：http: [//funnelholic.com](http://funnelholic.com)，这是一个 Wordpress 站点，我正在使用 Text 小部件来显示它。

我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-12-08T04:53:34.703

我遇到了同样的问题，并且对它在 Chrome 中不起作用感到非常沮丧。

似乎原因是

![在此处输入图像描述](../Images/83cd72462041a8e66969b56a165ee833.png) **Adblock Plus**

当我为我的页面停用 Adblock Plus 时，它起作用了！

猜猜你，@theintellects，在它不工作的计算机上也有 Adblock 处于活动状态。

话虽如此，我在我的网页上添加了信息，如果用户使用 Chrome 并且他们没有看到任何 Twitter 时间线，他们需要为此[页面停用 Adblock Plus](http://www.pixic.se/page_twitterflow.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T18:22:00.577

回家并在同一 Chrome 版本的另一台计算机上尝试了它。猜猜它以某种方式没有摆脱缓存......

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2019-09-05T19:49:34.587

你需要添加这个脚本

```
<script async src="//platform.twitter.com/widgets.js" charset="utf-8"></script> 
```

# php - SQL 数据库数据中随机出现的未知字符

> ID：15147380
> 
> 赞同：1
> 
> 时间：2013-02-28T23:03:34.390
> 
> 标签：php, mysql, phpmyadmin

任何人都可以帮助..？

这是我在 PHPMyAdmin 中使用“内联编辑”修改的数据中出现的内容：

��������������</p>

也像这样的换行符：`<br />`后面是这样的换行符：`<br>`

这些符号仅在代码呈现到页面时出现，并且在 PHPMyAdmin 中的任何编辑模式下都看不到。这是我见过的最奇怪的事情。为什么还要写更多的换行符？！

有人知道这里发生了什么吗？

这只发生在我在表中添加一个新列->在 phpmyadmin 中使用内联编辑仅在特定条目中添加数据之后。我添加数据的这些条目就是发生这种疯狂的条目。

有没有人有可以摆脱我的空白条目的 sql 脚本？

这是在本地主机测试服务器上

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T03:01:59.053

这些是 16 位（两个字节）值。任何语言中的每个单独的字母或符号都保存为唯一值。当您查看数据库中的原始数据时，您会看到实际值的两半的 8 位（一个字节）ASCII 表示。因此，像“Ø*”这两个字符这样的东西实际上是一个阿拉伯符号。

当 MySQL 输出信息时，它通过两个字节的值转换回正确的符号。

任何其他非欧洲语言也会发生同样的情况。8 位 ASCII 具有基于拉丁文、希腊文等的所有字符（许多非英文字母在高位符号中；0 到 127 之间的值主要是英文，128 到 255 之间的值包括非英文符号和字母）。这反映了 ASCII 的美国起源。中文、日文、阿拉伯文和许多其他语言的文本以 256 到 65384 的 16 位值呈现。所以 - 您应该查找有关 UTF 字符集及其显示方式的信息。

只需创建函数来删除超过 256 的值即可删除。每件事都如你所愿

# javascript - 在 JQGrid 中向标题栏添加多个图标

> ID：15147381
> 
> 赞同：1
> 
> 时间：2013-02-28T23:03:37.323
> 
> 标签：javascript, jquery, jqgrid

我正在尝试向 JQGrid 中的 tilebar 添加多个图标。我使用某种破解的 JQuery 添加了 1，但我需要它们并排在折叠按钮旁边。我的解决方案似乎很不雅。

这是我添加 1 个图标的代码（我需要 3 个图标，可能是 4 个）

```
$("#grid").setCaption('Title Goes Here' + '<span style="margin-left:200px;"></span>' + '<input type="image" id="icon_test" src="img/pencil_icon.png" onclick="icon_test_click();" title="#" />'); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T00:09:37.820

这是一个示例，我将按钮附加到我的 jqGrid 标题栏：

```
 $('.ui-jqgrid-title').after('<div id="jqGridButtonDiv"><button id="Button1Id" type="button" class="titlebutton ui-button ui-widget ui-state-default ui-corner-all '+
                                'ui-button-text-only" role="button">Button Text</button></div>')
                        .after('<div id="YourCollectionFoilToggleDiv"><button id="Button2Id" type="button" class="titlebutton ui-button '+
                        'ui-widget ui-state-default ui-corner-all ui-button-text-only" role="button">Button Text</button>  </div>'); 
```

然后一些 CSS 将它们设置为向右浮动并带有一些填充。

```
#jqGridButtonDiv{float:right; padding-right:50px; position:relative; top:-1px;} 
```

您应该能够轻松地调整它以将按钮更改为图标等。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T14:15:37.940

I had a similar requirement; however, I have multiple grids on the same screen. Using Mark's solution, along with his CSS, and changing the selector to use `'gview_id'` (where `id` is the `gridId`), I was able to zero in on the specific grid:

```
$('#gview_id span.ui-jqgrid-title').after('<button id=jqGridTitleButtonId class="ui-button ui-icon ui-icon-newwin"></button>');        
$('#jqGridTitleButtonId').click(function() {
        ...code here...
}); 
```

# android - 假设所有启用网络的设备都可以访问 localhost/loopback/127.0.0.1 是否安全 - 即使“网络”关闭？

> ID：15147382
> 
> 赞同：3
> 
> 时间：2013-02-28T23:03:38.770
> 
> 标签：android, ios, windows, network-programming, localhost

我正在做一个我想离线工作的项目。

现在事实证明，我想使用的主要基础设施仅通过 Web 服务抽象出主要组件。

我可以在本地文件系统中提供 web 服务所需的所有数据，并在它和我提到的基础设施之间进行自己的抽象。

理想情况下，如果将抽象作为常规对象使用我可以提供的方法进行抽象，我会喜欢它，但它背后的人只对在给定网络访问的类 Unix 操作系统上运行的服务器端案例感兴趣。

他们建议我与它交互的最佳方式是制作我自己的 web 服务，它实现与 . 上的小型本地运行服务器相同的功能`localhost`。

但我希望我的项目能够在任何设备上运行，包括 Windows、Android 和 iOS。

**`localhost`即使关闭“网络” ，我是否可以期望所有这些环境都能够连接到本地服务器？**

我在“网络”周围加上了吓人的引号，因为我没有智能手机或平板电脑，但我知道有很多万无一失的方法可以保护非技术用户免受恶意软件等的侵害。笔记本电脑通常有一个开关或热键来打开 Wi-Fi 和其他网络开/关，所以我假设其他设备也可以，我假设它们可能不会都一样。也许有些人只关闭 Wi-Fi，而另一些人可能会在低级别禁用所有网络......

^(（我知道是否决定将此问题移至程序员或超级用户，但我认为这是一个编程问题，所以我在 Stackoverflow 上提问。）)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-28T23:17:14.533

在您提到的平台中，只有 Windows 能够在无线和所有以太网适配器关闭的情况下使用 localhost。您必须安装 Microsoft 的 Loopback Adapter，这是您可以从“添加/删除程序”中获得的可选组件之一。iOS 不提供环回选项，我不知道 Android 是否也提供。

# javascript - 从表单中提取数据？

> ID：15147386
> 
> 赞同：1
> 
> 时间：2013-02-28T23:03:43.020
> 
> 标签：javascript

我正在尝试创建一个脚本，该脚本将提取提交的输入并使用它根据选择的内容发送警报，尽管每当我这样做时，它似乎并不对应。

有什么答案吗？

Javascript：

```
<script language="Javascript" type="text/javascript">
    function checkForm() {
        alert(form.option.value);
        if (form.option.value == "one") {
            alert("Test 1");
        } else if (form.option.value == "two") {
            alert("Test 2");
        } else {
            alert("Test 3");
        }
    }
</script> 
```

HTML：

```
<form onsubmit="checkForm()">
    <select>
        <option value="one">One</option>
        <option value="two">Two</option>
        <option value="three">Three</option>
    </select>
    <input type="submit" name="option">
</form> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T23:22:16.960

您当前的代码不起作用，因为您的方法会出错：

```
Uncaught ReferenceError: form is not defined 
```

您需要获取正确元素的句柄。`form`不仅会存在而且`option.value`也不正确。

获取您的相关元素，如下所示：

```
<script language="Javascript" type="text/javascript">
    function checkForm() {
        var form = document.forms[0];
        var selectElement = form.querySelector('select');
        var selectedValue = selectElement.value;

        alert(selectedValue);
        if (selectedValue == "one") {
            alert("Test 1");
        } else if (selectedValue == "two") {
            alert("Test 2");
        } else {
            alert("Test 3");
        }
    }
</script> 
```

* * *

[**演示**](http://jsfiddle.net/He5xA/)

* * *

除了完整性之外并且正如另一个答案中已经提到的那样，如果您想在某个时候阻止提交，请更新表单标签`onsubmit="return checkForm()"`并在相关位置添加`return false;`您的`checkForm()`方法，即：在一个警报之后。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T23:21:07.010

更改`onsubmit="checkForm()"`为`onsubmit="return checkForm()"`

并`false`从该函数返回开始。这将阻止刷新页面。

PS：并`debugger`在函数顶部添加以触发浏览器拥有的任何调试器。

# linux - Linux 基本 shell 脚本

> ID：15147392
> 
> 赞同：0
> 
> 时间：2013-02-28T23:03:55.047
> 
> 标签：linux, bash, shell

所以我需要我的while循环不断循环，但它在第一个用户输入后停止，例如：

[用户]$: ./pleasefix.sh

输入输入：测试

测试是可写的。

[用户]$：

这是我的脚本，因为它是：

```
if [ "$#" -ne 0 ]
   then
        echo  "$0" "is expecting no arguments; found $# $*"
        echo "Usage: "$0""
        exit 2
fi

while read -p "Enter Input:" userString
do

if [ -w "$userString" ]
   then
        echo ""$userString" is writeable."
        exit 0
   else
        echo ""$userString" is nonexistent or not writeable."

        exit 1

fi
done 
```

我可以在我的 while 中添加什么以使其实际循环并重新提示用户输入另一个文件名？基本上我希望它永远持续到发送 EOF (crtl + D)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T23:08:28.203

取出`exit 0`并`exit 1`取出

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T23:09:41.937

您在两种情况下都使用“退出” if-else。您可以删除其中之一。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-28T23:08:52.343

去掉“exit 0”和“exit 1”？这些将导致它退出您的脚本。

# c# - 有什么方法可以在没有迭代器的情况下遍历 SortedSet 或保存索引位置？

> ID：15147397
> 
> 赞同：0
> 
> 时间：2013-02-28T23:04:12.310
> 
> 标签：c#, .net, loops, xna

我想循环一个 SortedSet 而不必在我的代码中保存实际位置。

在[官方 .NET 文档](http://msdn.microsoft.com/en-us/library/dd412070.aspx)中，我注意到[First()](http://msdn.microsoft.com/en-us/library/bb291976.aspx)方法存在，但我没有找到`Next<T>()`方法或一种 ( `getNext`, `goNext`, `Iterate`...)。

我想编码的是这样的：

```
private SortedSet<Frame> frames;

[...]

public Frame getNextFrame() {
    if (frames.Next<Frame>()) //didnt exists
    {
        return frames.Current<Frame>() //didnt exists
    } else {
        return frames.First<Frame>();
    }
} 
```

*框架结构：*

```
public struct Frame
{
    Rectangle zone;
    TimeSpan duration;

    public Frame(Rectangle z, TimeSpan ts)
    {
        duration = ts;
        zone = z;
    }

} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-28T23:10:01.427

您正在寻找的是`IEnumerator<T>`for the `SortedSet<T>`，您可以使用 [`SortedSet<T>.GetEnumerator()`](http://msdn.microsoft.com/en-us/library/dd382041.aspx).

因此，您可以执行以下操作：

```
public class MyClass
{
    private readonly IEnumerator<Frame> _enumerator;

    public MyClass(SortedSet<Frame> frames)
    {
        _enumerator = frames.GetEnumerator();
    }

    public Frame GetNextFrame()
    {
        // If there is no next item, loop back to the beginning 
        // you probably won't want this, but a call to MoveNext() is required
        // it's up to you what to do if there is no next item.
        if(!_enumerator.MoveNext())
            _enumerator.Reset();

        return _enumerator.Current;
    }
} 
```

虽然我很惊讶你不能只使用更简单的[foreach](http://msdn.microsoft.com/en-gb/library/ttw7t8t6%28v=vs.110%29.aspx)循环：

```
SortedSet<Frame> frames = ...;
foreach(Frame frame in frames)
{
    // Do something with each frame
} 
```

# r - 在 R 中使用线性（或非线性？）约束优化值

> ID：15147398
> 
> 赞同：3
> 
> 时间：2013-02-28T23:04:15.297
> 
> 标签：r, optimization, constraints, linear-programming

考虑到不同的限制条件，我正在尝试选择最好的梦幻足球队。我的目标是*挑选能够最大化他们的投影总和的球员*。

约束是：

1) 团队必须包括：

-1四分卫

-2 RB

-2 WR

-1 TE

2) 玩家的风险不得超过 6

3) 玩家费用之和不得超过300。

我怎样才能做到这一点？R 中优化这些约束的最佳包/功能是什么？给定这些约束，最大化投影点的函数调用会是什么样子？仅供参考，我将搜索 100-300 名玩家。

提前致谢！这是一个小的示例数据集：

```
name <- c("Aaron Rodgers","Tom Brady","Arian Foster","Ray Rice","LeSean McCoy","Calvin Johnson","Larry Fitzgerald","Wes Welker","Rob Gronkowski","Jimmy Graham")

pos <- c("QB","QB","RB","RB","RB","WR","WR","WR","TE","TE")

pts <- c(167, 136, 195, 174, 144, 135, 89, 81, 114, 111) 

risk <- c(2.9, 3.4, 0.7, 1.1, 3.5, 5.0, 6.7, 4.7, 3.7, 8.8) 

cost <- c(60, 47, 63, 62, 40, 60, 50, 35, 40, 40) 

mydata <- data.frame(name, pos, pts, risk, cost) 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-01T00:18:06.630

你的约束和目标是线性的，但你的变量是二元的：每个玩家是否应该被选中。所以你的问题比线性规划（LP）更普遍，它是混合整数规划（MIP）。在 CRAN 的[优化任务视图](http://cran.r-project.org/web/views/Optimization.html)中，查找他们的 MIP 部分。

CPLEX 是您可能无法访问的商业求解器，但 GLPK 是免费的。如果我是你，我可能会使用高级接口[Rglpk](http://cran.r-project.org/web/packages/Rglpk/index.html)。

它需要你把你的问题以矩阵的形式，我建议你看一下文档和例子。

* * *

**编辑：**这是一个实现：

```
# We are going to solve:
# maximize f'x subject to A*x <dir> b
# where:
#   x is the variable to solve for: a vector of 0 or 1:
#     1 when the player is selected, 0 otherwise,
#   f is your objective vector,
#   A is a matrix, b a vector, and <dir> a vector of "<=", "==", or ">=",
#   defining your linear constraints.

# number of variables
num.players <- length(name)
# objective:
f <- pts
# the variable are booleans
var.types <- rep("B", num.players)
# the constraints
A <- rbind(as.numeric(pos == "QB"), # num QB
           as.numeric(pos == "RB"), # num RB
           as.numeric(pos == "WR"), # num WR
           as.numeric(pos == "TE"), # num TE
           diag(risk),              # player's risk
           cost)                    # total cost

dir <- c("==",
         "==",
         "==",
         "==",
         rep("<=", num.players),
         "<=")

b <- c(1,
       2,
       2,
       1,
       rep(6, num.players),
       300)

library(Rglpk)
sol <- Rglpk_solve_LP(obj = f, mat = A, dir = dir, rhs = b,
                      types = var.types, max = TRUE)
sol
# $optimum
# [1] 836                      ### <- the optimal total points

# $solution
#  [1] 1 0 1 0 1 1 0 1 1 0     ### <- a `1` for the selected players

# $status
# [1] 0                        ### <- an optimal solution has been found

# your dream team
name[sol$solution == 1]
# [1] "Aaron Rodgers"  "Arian Foster"   "LeSean McCoy"
# [4] "Calvin Johnson" "Wes Welker"     "Rob Gronkowski 
```

# c++ - 对二维数组进行排序

> ID：15147401
> 
> 赞同：2
> 
> 时间：2013-02-28T23:04:29.633
> 
> 标签：c++, arrays, 2d

我正在尝试对两组数据进行排序，无论是二维数组还是并行数组，无论哪种方式都没有区别，但我似乎无法弄清楚。这是两个数组：

```
/////way one///

int id[10] = {1, 2, 3, 4, 5, 6, 7, 8, 9, 10};
int numDetected[10] = {40, 21, 2, 19, 45, 32,43, 90, 100, 8}; 
```

或者

```
int 2dArray[2][10]; 
```

没有区别，但我似乎无法弄清楚。

我想按数量将数组排序为一个新数组（无论是二维数组还是平行数组）`numDetected`。所以最大`numDetected`的在元素零处，最小的在最后。但是在这样做的同时，我想将与 id 关联的 id 保留在与`numDetected`. 所以如果`numDetected[2]`是最大的，我想`numDetected[2]`成为`id[2]`新数组中的第一个元素。

谁能帮我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T23:10:08.787

```
struct values
{
    int id;
    int detected;
} data[10] = ...;

// intentionally reversed to cause sort in descending order
bool operator<(const values& left, const values& right) { return left.detected > right.deteted; }

values *begin = data, *end = (&data)[1];
std::sort(begin, end); 
```

# scala - 使用半径过滤器查询对不同的索引/查询具有不同的半径

> ID：15147403
> 
> 赞同：0
> 
> 时间：2013-02-28T23:04:38.110
> 
> 标签：scala, elasticsearch

当前代码：[https ://gist.github.com/anonymous/c1a178bc4118f850d9cd](https://gist.github.com/anonymous/c1a178bc4118f850d9cd)

这里的缺陷是我在可搜索别名中有两个索引。这意味着我必须对两者使用相同的半径。我实际上想在半径过滤器中为其中一个指标使用更大的半径。有没有办法做到这一点，而无需对 .prepareSearch 进行两次单独的调用，从而对 Elasticsearch 进行两次单独的点击

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T10:45:35.697

听起来您的数据可能更适合放在一个索引中，在这种情况下，您可以使用和/或过滤器将地理距离过滤器与类型过滤器结合起来。

另一种选择是使用[indicies](http://www.elasticsearch.org/guide/reference/query-dsl/indices-query.html)查询

# google-app-engine - AppEngine Datastore 对象的手动序列化/反序列化

> ID：15147407
> 
> 赞同：1
> 
> 时间：2013-02-28T23:04:51.977
> 
> 标签：google-app-engine, serialization, google-cloud-datastore

是否可以手动定义用于 AppEngine Datastore 的序列化逻辑？

我假设谷歌正在使用反射以一种通用的方式来做到这一点。这行得通，但证明很慢。我愿意编写（和维护）相当多的代码来加速数据存储对象的序列化/反序列化（我有大对象，这会占用相当多的时间）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T10:25:28.860

数据存储在内部使用 Protocol-Buffers，并且没有办法绕过，因为它是您的应用程序可以与数据存储通信的唯一方式。（实现可以在 SDK/google/appengine/datastore/entity_pb.py 中找到）如果您认为（反）序列化在您的情况下太慢，您可能有两个选择

*   移动到较低的 DB API。在 google.appengine.datastore 的两个文档齐全的 ext.db 和 ext.ndb API 旁边还有另一个 API。这不是所有花哨的模型材料，而是提供了一个简单的（希望是快速的）类字典 API。这将使您的数据存储布局与其他两个数据库 API 兼容。
*   自己序列化对象，并将其存储在仅由文本字段组成的虚拟条目中。但是您可能需要将数据复制到基本条目中，因为您无法按自序列化文本中的数据进行过滤/排序。

# jquery - Using Jquery To Toggle Elements

> ID：15147412
> 
> 赞同：1
> 
> 时间：2013-02-28T23:05:19.697
> 
> 标签：jquery

I am using JQUery 1.7.1 to toggle a div named .interest-group. When you click a link it opens the next div named .interest-group. Right now, you can toggle all of the .interest-group divs to be visible, but I would like to make it that only one can be visible at a time. How can I do this?

JSFIDDLE: [http://jsfiddle.net/DWwKs/6/](http://jsfiddle.net/DWwKs/6/)

Here is my JQuery:

```
$(document).ready(function () {
    $('.interest').toggle(

    function () {
        $(this).next('.interest-group').show();
    },

    function () {
        $(this).next('.interest-group').hide();
    });
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T23:10:02.953

该版本的 toggle() 在 jQuery 1.7 中已弃用，并在 1.9 中删除，请尝试以下操作：

```
$(document).ready(function () {
    $('.interest').on('click', function(e) {
        e.preventDefault();
        $('.interest-group').hide();
        $(this).next('.interest-group').toggle();
    });
}); 
```

[**小提琴**](http://jsfiddle.net/adeneo/DWwKs/9/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T23:08:34.467

给你：http: [//jsfiddle.net/DWwKs/8/](http://jsfiddle.net/DWwKs/8/)

只需添加`$('.interest-group').hide();`到第一个功能

# jquery - django ajax request

> ID：15147415
> 
> 赞同：6
> 
> 时间：2013-02-28T23:05:28.887
> 
> 标签：jquery, python, ajax, django

I am having a problem sending a form with Ajax. I have a form which i want to replace with another form asynchronously on clicking the next button.

Here is the script

```
$(document).ready(function() {
    $('#MY_FORM').submit(function() { 
        $.ajax({
            data: $(this).serialize(), 
            type: $(this).attr('method'),
            url: $(this).attr('action'), 
            success: function(response) { 
                $('#FORM_DIV').html(response); 
            }
        });
        return false;
    });
}); 
```

form.py

```
class CountyForm(forms.Form):
    county = forms.ModelChoiceField(queryset=County.objects.all(),
              empty_label='---Select a county---', required=False)
    other = forms.CharField(required=False)

    def __init__(self, *args, **kwargs):
        super(CountyForm, self).__init__(*args, **kwargs)
        self.helper = FormHelper(self)
        self.helper.html5_required = True
        self.helper.form_id = 'MY_FORM'
        self.helper.add_input(Submit('next', 'Next', css_class='classfinish'))
        self.helper.layout = Layout('county','other')

class WardForm(forms.Form):
    ward = forms.ModelChoiceField(queryset=Ward.objects.all(),
             empty_label='Select a ward')
    other = forms.CharField()

    def __init__(self, *args, **kwargs):
        super(WardForm, self).__init__(*args, **kwargs)
        self.helper = FormHelper(self)
        self.helper.html5_required = True
        self.helper.add_input(Submit('save', 'Finish'))
        self.helper.add_input(Submit('cancel', 'Cancel'))
        self.helper.layout = Layout('ward','other') 
```

views

```
def location(request):
    if request.is_ajax() :
        wardform = WardForm()
        return HttpResponse(wardform)
    countyform = CountyForm()
    c = {}
    c.update(csrf(request))
    return render(request,'location.html', {'countyform': countyform}) 
```

I want when i click next button in the county form, the ward form to appear.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T05:42:59.027

这可以通过两种方式解决，我不会介绍 FormWizard，但我会为您提供非常好的文档链接。

我的建议是您应该选择 FormWizard（取决于您拥有的 Django 版本），但我认为它已在 1.2 及更高版本中迁移到 Django，但请不要引用我的话。

在你目前的困境中，你应该按照这个思路做一些事情。

```
$(document).ready(function() {
    $('#MY_FORM').submit(function() { 
        $.ajax({
            data: $(this).serialize(), 
            type: $(this).attr('method'),
            url: $(this).attr('action'), 
            success: function(response) { 
                $('#FORM_DIV').load('/some/url/to/a/wardform'); //new code 
            }
        });
        return false;
    });
}); 
```

视图.py

```
def ward_form_renderer(request):
    if request.is_ajax():
        ward_form = WardForm()
        #depending on version of django
        context = {'wardform': ward_form}
        context.update(csrf(request))
        render(request, 'wardform_template', c) 
```

这将做的是，它将从您的 Django 视图中拉出一个带有呈现表单的新 html 页面并显示它。基本上你所做的是一个FormWizard。这种方法会有其他副作用，所以我不建议这样做。

我自己也在做这个项目，老实说，痛苦多于快乐。我自己没有尝试过这段代码，但你知道它应该如何工作的要点。

输入表单向导！这对您来说是一个特别好的选择，因为您不必重新定义您的表格，您可以使用您拥有的表格。

[这是 FormWizard 文档的链接](https://docs.djangoproject.com/en/dev/ref/contrib/formtools/form-wizard/)

祝你好运！

# javascript - 如何在对象键中放置 if/else 语句？

> ID：15147420
> 
> 赞同：1
> 
> 时间：2013-02-28T23:05:55.050
> 
> 标签：javascript

我正在尝试创建一个 Person 类。该人的年龄将是一个随机数，由 if/else 语句确定。现在它似乎只有在我将函数放在对象之外或作为单独的键时才有效。

```
function age(x) {
    if (x.toLowerCase().charCodeAt(0) <= "g".charCodeAt(0)) {
        return Math.floor(Math.random()*40+1);
    }
    else {
        return Math.floor(Math.random()*40+41);
    }
}

function person(name) {
    this.name = name;
    this.age = age(name);
}

var people = {
    joe: new person("Joe")
};

console.log(people.joe.age);
\\ returns a number 41-80 
```

有没有办法让我将函数直接放入“this.age”键并发生同样的事情，如下所示：

```
function person(name) {
    this.name = name;
    this.age = function age() {
        if (this.name.toLowerCase().charCodeAt(0) <= "g".charCodeAt(0)) {
            return Math.floor(Math.random()*40+1);
        }
        else {
            return Math.floor(Math.random()*40+41);
        }
}; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-28T23:10:18.677

您可以立即执行该功能：

```
function person(name) {
    this.name = name;
    this.age = (function age() {
        if (this.name.toLowerCase().charCodeAt(0) <= "g".charCodeAt(0)) {
            return Math.floor(Math.random()*40+1);
        }
        else {
            return Math.floor(Math.random()*40+41);
        }
    })();
}; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-28T23:09:52.093

```
function person(name) {
    this.name = name;
    this.age = (function age() {
        var x = this.name.toLowerCase().charCodeAt(0) <= "g".charCodeAt(0))?1:41;
        return Math.floor(Math.random()*40+x);
        })();
}; 
```

你`(function(){})()`正在执行它。

```
(function(){}) //this converts the function into a statement
() // this executes 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-28T23:11:25.353

您必须定义闭包（函数）并立即执行它。

```
 function person(name) {
        this.name = name;
        this.age = (function age() {
            var x = this.name.toLowerCase().charCodeAt(0) <= "g".charCodeAt(0)) ? 1 : 41;
                return Math.floor(Math.random()*40+x);
            })();
    }; 
```

# linux - How to verify multiple application logs on more than one linux servers remotely

> ID：15147426
> 
> 赞同：-1
> 
> 时间：2013-02-28T23:06:10.737
> 
> 标签：linux, perl, remote-access

I am looking for a easy way to check application logs on multiple servers. How can I search for error string in multiple Linux application servers remotely?

e.g.

Need to search a string pattern in application log, this application deployed on multiple Linux boxes. Each server nodes storing logs in each node itself and not in NAS.

Could you please share the best way to achieve this? I tried SSH and it is asking me to enter password for each node. I am looking for single program (shell, perl etc) can connect to each boxes and grep my patter and return results.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T01:06:46.867

你可以使用类似[ansible](http://ansible.cc/)的东西。使用密钥身份验证进行设置并将主机添加到配置文件后，您可以执行以下操作：

ansible -m shell -a "cat /var/log/messages|grep -i 错误"

它有大量的选项和模块，使用起来超级简单。

# mercurial - 在 Jenkins 中推广构建时，如何在 Mercurial 中标记特定修订？

> ID：15147427
> 
> 赞同：2
> 
> 时间：2013-02-28T23:06:22.227
> 
> 标签：mercurial, jenkins

我有一个带有Promoted Builds 插件和Mercurial 插件的Jenkins CI 服务器。当构建被提升时，我想做的是在 Mercurial 中标记与该构建相对应的修订。

Mercurial 插件公开了一个名为 MERCURIAL_REVISION_NUMBER 的环境变量，它会在构建运行时填充，而不是在升级运行时填充。因此，当我在促销活动的“执行 Windows 批处理命令”步骤中尝试执行以下操作时：

`hg tag --rev %MERCURIAL_REVISION_NUMBER% "Promoted-%PROMOTED_NUMBER%-%PROMOTED_ID%"`

它失败是因为 %MERCURIAL_REVISION_NUMBER% 计算结果为空字符串，因此没有为 --rev 参数提供值。

我确实注意到 Mercurial 修订版保存在每个构建的 build.xml 文件中。我想知道在我的推广步骤中是否有一种简单的方法可以实现它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T01:53:19.253

该 build.xml 必须是您的 Jenkins 脚本正在创建的东西——Mercurial 不是。

您的 Mercurial 命令看起来不错。

一种选择是将构建信息作为 jenkins 脚本的一部分放入文件中：

```
hg id > $WORKSPACE/built-version 
```

然后将`built-version`其作为构建的工件之一包含在内。然后您的促销脚本可以执行以下操作：

```
hg tag --rev $(< built-version) "Promoted-${PROMOTED_NUMBER}-${PROMOTED_ID}" 
```

或任何与此等效的窗口。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T18:29:07.820

我最终使用了一个 Powershell 脚本。这是我的第一个 PS 脚本，所以我当然愿意接受任何建议的改进。

```
# Read the appropriate Hg revision from build.xml and tag it
$filename = "..\builds\" + $env:PROMOTED_ID  + "\build.xml"
[xml]$build = Get-content $filename
$hg = $build.SelectSingleNode("/build/actions/hudson.plugins.mercurial.MercurialTagAction")
write-host "Tagging revision: " + $hg.rev
hg tag --force --rev $hg.rev "Promoted-$env:PROMOTED_NUMBER-$env:PROMOTED_ID"
hg push --force 
```

# php - general php syntax

> ID：15147430
> 
> 赞同：-2
> 
> 时间：2013-02-28T23:06:37.543
> 
> 标签：php, syntax

how do i put this `<?php echo $cfs->get('exclude'); ?>` within the double quotes in this `<?php echo do_shortcode('[gallery exclude=""]'); ?>`

meaning, what is the correct syntax to merge the two? i attempted to read through some of [this](http://www.w3schools.com/php/php_syntax.asp) to solve it, but have little php knowledge.

thank you.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-28T23:09:22.073

```
sprintf('[gallery exclude="%s"]', $cfs->get('exclude')); 
```

看[`sprintf()`](http://php.net/sprintf)

也可读：

```
$exclude = $cfs->get('exclude');
"[gallery exclude=\"$exclude\"]"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T23:10:08.863

```
<?php echo do_shortcode("[gallery exclude='$cfs->get('exclude')]'); ?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-28T23:08:28.197

这是一种方式

```
echo do_shortcode('[gallery exclude="' . $cfs->get('exclude') . '"]'); ?> 
```

# android - Make use of the default buttons in the Android sdk

> ID：15147433
> 
> 赞同：0
> 
> 时间：2013-02-28T23:06:47.433
> 
> 标签：android

I would like to make a `button`, a simple button, having the default `Search icon` that is used in Android. However, **I do not want to make my own xml file** and put the images in the Drawable folder, because i know **they already exist in the Android sdk**.

*   So why not making use of them?

I tried to make something like this:

`android:background="@android:drawable/...."` but there in this directory it seems that all the files are png file not xml file able to interact with the user (on button pressed, etc..)

I hope an expert can help solving this problem.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T23:19:23.127

按钮工作不需要 xml 文件。可绘制对象中的 png 文件仅用于图像。您可以以编程方式或在 xml 中创建一个按钮，但您仍然必须在某处创建它，因为`Button`实例是用于 xml 的`onClick()`而不一定是 xml。无论哪种方式，您都必须有一个 xml 文件供您`Layout`使用，`setContentView()`以便您可以`Button`在该布局文件中放置一个或在您的 Java 代码中创建它，但无论哪种方式，您都必须创建一个`Button`

[XML](http://developer.android.com/guide/topics/ui/declaring-layout.html)

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
              android:layout_width="fill_parent" 
              android:layout_height="fill_parent" 
              android:orientation="vertical" >
    <TextView android:id="@+id/text"
              android:layout_width="wrap_content"
              android:layout_height="wrap_content"
              android:text="Hello, I am a TextView" />
    <Button android:id="@+id/button"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="Hello, I am a Button" />
</LinearLayout> 
```

在这个`Button`你可以设置背景或使用一个`ImageButton`代替并设置 `android:src="@drawable/..."

然后在您的代码中，您仍然必须获取按钮实例

按钮 btn1 = (Button) findViewById(R.id.button)

在你调用你的布局之后

```
setContentView(R.layout.your_layout_file); 
```

如果您使用`ImageButton`just replace `Button`with `ImageButton`which 这听起来像是您想要的。希望这有助于它对你更有意义

# c# - Grid layout in SilverLight

> ID：15147435
> 
> 赞同：0
> 
> 时间：2013-02-28T23:06:51.893
> 
> 标签：c#, silverlight

I want a grid layout for displaying search results. The grids should have headlines Beneficial Owner, Commercial Operator and Registered Owner. The results should then be displayed under the right headline.

**I am trying to achieve this layout:**

![enter image description here](../Images/1f5e87a00ac367e59043466eb37655ec.png)

**But this is what i get:**

![enter image description here](../Images/7a0fcedd139068792526678be2395e3b.png)

**My C#/SilverLight code:**

```
// Create a 3 column grid
StackPanel deptStackPanel = new StackPanel();
deptStackPanel.Margin = new Thickness(10);
stackPanelSearchResults.Children.Add(deptStackPanel);
Grid.SetColumn(deptStackPanel, 3);
Grid.SetRow(deptStackPanel, 3);

// Add headlines for theese columns
TextBlock deptListHeadingBeneficialOwner = new TextBlock();
deptListHeadingBeneficialOwner.Text = "Beneficial Owner";

TextBlock deptListHeadingCommercialOperator = new TextBlock();
deptListHeadingCommercialOperator.Text = "Commercial Operator";

TextBlock deptListHeadingRegisteredOwnerName = new TextBlock();
deptListHeadingRegisteredOwnerName.Text = "Registered Owner";

deptStackPanel.Children.Add(deptListHeadingBeneficialOwner);
deptStackPanel.Children.Add(deptListHeadingCommercialOperator);
deptStackPanel.Children.Add(deptListHeadingRegisteredOwnerName);
Grid.SetColumn(deptListHeadingBeneficialOwner, 0);
Grid.SetColumn(deptListHeadingCommercialOperator, 1);
Grid.SetColumn(deptListHeadingRegisteredOwnerName, 2); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T05:06:07.690

从您的 xaml 文件或后端在布局网格内添加三个网格。在其中放置一个堆栈面板，然后为您的数据添加文本块。您只是在另一个下方添加文本块。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T12:13:05.923

我自己找到了解决方案：

```
// Create the Grid
            Grid myGrid = new Grid();
            myGrid.Width = 400;
            myGrid.Margin = new Thickness(9, 0, 0, 0);
            myGrid.HorizontalAlignment = HorizontalAlignment.Left;
            myGrid.VerticalAlignment = VerticalAlignment.Top;
            myGrid.ShowGridLines = true;

            // Define the Columns
            ColumnDefinition colDef1 = new ColumnDefinition();
            ColumnDefinition colDef2 = new ColumnDefinition();
            ColumnDefinition colDef3 = new ColumnDefinition();
            myGrid.ColumnDefinitions.Add(colDef1);
            myGrid.ColumnDefinitions.Add(colDef2);
            myGrid.ColumnDefinitions.Add(colDef3);

            // Define the Rows
            RowDefinition rowDef1 = new RowDefinition();
            RowDefinition rowDef2 = new RowDefinition();
            RowDefinition rowDef3 = new RowDefinition();
            RowDefinition rowDef4 = new RowDefinition();
            myGrid.RowDefinitions.Add(rowDef1);
            myGrid.RowDefinitions.Add(rowDef2);
            myGrid.RowDefinitions.Add(rowDef3);
            myGrid.RowDefinitions.Add(rowDef4);

            // Add the second text cell to the Grid
            TextBlock txtBeneficialOwner = new TextBlock();
            txtBeneficialOwner.Text = "Beneficial Owner";
            txtBeneficialOwner.FontWeight = FontWeights.Bold;
            Grid.SetRow(txtBeneficialOwner, 0);
            Grid.SetColumn(txtBeneficialOwner, 0);

            // Add the third text cell to the Grid
            TextBlock txtCommercialOperator = new TextBlock();
            txtCommercialOperator.Text = "Commercial Operator";
            txtCommercialOperator.FontWeight = FontWeights.Bold;
            txtCommercialOperator.Margin = new Thickness(9, 0, 0, 4);
            Grid.SetRow(txtCommercialOperator, 0);
            Grid.SetColumn(txtCommercialOperator, 1);

            // Add the fourth text cell to the Grid
            TextBlock txtRegisteredOwnerName = new TextBlock();
            txtRegisteredOwnerName.Text = "Registered Owner";
            txtRegisteredOwnerName.FontWeight = FontWeights.Bold;
            txtRegisteredOwnerName.Margin = new Thickness(9, 0, 0, 4);
            Grid.SetRow(txtRegisteredOwnerName, 0);
            Grid.SetColumn(txtRegisteredOwnerName, 2);

            // Add the TextBlock elements to the Grid Children collection
            myGrid.Children.Add(txtBeneficialOwner);
            myGrid.Children.Add(txtCommercialOperator);
            myGrid.Children.Add(txtRegisteredOwnerName);
            stackPanelSearchResults.Children.Add(myGrid); 
```

# ios - ViewDidAppear from viewcontroller 1 is getting called in viewcontroller 2

> ID：15147445
> 
> 赞同：0
> 
> 时间：2013-02-28T23:07:36.123
> 
> 标签：ios, objective-c, viewdidappear

I have two view controllers. I display the 1st one and then when I modally display the second one `viewDidAppear` gets called from the View Controller 1 after `viewDidAppear` gets executed from View Controller 2.

Why is View Controller 1's `viewDidAppear` getting called while in View Controller 2? Is this normal behavior?

More importantly the content view of a scrollview is getting resized when the `viewDidAppear` gets from the View Controller 1 gets called inside View Controller 2.

# java - Java TextArea 和 String（仅打印 1 个字的字符串）

> ID：15147446
> 
> 赞同：-1
> 
> 时间：2013-02-28T23:07:44.930
> 
> 标签：java, string, swing, printing, textarea

我的 TextArea 字符串 A 包含文本 a、b、c、d 出现问题，我使用方法 TextArea.setText(A); 将字符串转换为 textarea；我的问题是 textarea 打印出 abcd 而不是我希望它打印在行示例中

```
A
B 
C
D 
```

我确实读过书并尝试过谷歌，但我找不到解决问题的方法;(

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T23:27:52.603

听起来您需要遵循 JB Nizet 上面链接的 javadoc，并利用 String.replace() 方法。它需要两个 CharSequence，第一个是要匹配的字符，第二个是要替换它的字符。找到“,”并替换为“\n”。所以

```
CharSequence theseChars = new CharSequence(", ");
CharSequence withTheseChars = new CharSequence("\n");

String newString = A.replace(theseChars, withTheseChars); 
```

这应该可以完成工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T23:41:55.143

我已经使用了 Java 最基本的东西。我认为这很容易理解

`String s = "a,b,c,d";`

`String s1 =s.replace(",", "");`

`String s2 = s1.replace("", "\n").toUpperCase();`

# asp.net - 安装 DotNetNuke 时遇到问题

> ID：15147450
> 
> 赞同：0
> 
> 时间：2013-02-28T23:07:59.973
> 
> 标签：asp.net, sql-server, iis, dotnetnuke

我正在尝试安装 DotNetNuke 4.09.03（我有使用这个版本）。有一些问题。我对这个环境完全不熟悉和缺乏经验（我是一个 php 开发人员），所以我在正确设置东西时遇到了一些问题。

我的站点根目录中有一个名为 DotNetNuke 的文件夹，所有 DNN 安装文件都位于该文件夹中。当我导航到 mywebsite.com/DotNetNuke 时，我收到以下错误：

```
Server Error in '/' Application.

Configuration Error

Description: An error occurred during the processing of a configuration file required       to service this request. Please review the specific error details below and modify your configuration file appropriately. 

 Parser Error Message: It is an error to use a section registered as allowDefinition='MachineToApplication' beyond application level.  This error can be caused by a virtual directory not being configured as an application in IIS.

Source Error: 

Line 87:    <system.web>
Line 88:     <!-- Ensure validationkey is not set to AutoGenerate,IsolateApps so it    correctly supports webfarms -->
Line 89:        <machineKey
Line 90:          validationKey="AutoGenerate,IsolateApps"
Line 91:          decryptionKey="F9D1A2D3E1D3E2F7B3D9F90FF3965ABDAC304902F8D923AC" 
```

* * *

我看到它说错误是由于该文件夹未设置为应用程序而引起的。使用我正在使用的主机 enom，我导航到 DotNetNuke 文件夹并点击应用程序部分下的“创建”，但没有任何反应。没有消息什么的。我不知道该怎么办。

此外，当尝试添加数据库以供 DNN 安装使用时，我收到此错误：

```
.Net SqlClient Data Provider

 CREATE DATABASE permission denied in database 'master'.

USE [master]
GO 

CREATE DATABASE [dnn]

GO

EXEC [dnn].[dbo].[sp_fulltext_database] @action = 'disable'
GO 
```

* * *

如果这些问题很愚蠢，我很抱歉。我不熟悉 IIS 环境，但我的任务是在其中建立一个网站。谢谢大家的时间。任何指导将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T11:05:19.113

第一个问题，如果您的网站根目录下有一个文件夹，则该文件夹应转换为应用程序（如果您在根目录下安装 donetnuke，则不需要这样做）。为此，请转到 IIS 管理器，展开您的网站，然后右键单击安装 DNN 的文件夹，从上下文菜单中选择“转换为应用程序”。

第二个问题，你的 SQL 用户没有创建数据库的权限，给用户适当的权限，最简单的方法是使用 SQL Server Management Studio，给这个用户 dbcreator 角色。（或者为了简单起见，只需使用 SA 创建数据库，您可以这样做并在 web.config 中使用不同的用户进行连接）

# javascript - jquery从左侧滑动隐藏菜单无法配置js

> ID：15147451
> 
> 赞同：1
> 
> 时间：2013-02-28T23:08:00.890
> 
> 标签：javascript, jquery, wordpress, jquery-animate

所以我已经为此工作了一段时间，我尝试了许多在 stackoverflow 上找到的示例，然后在一天的大部分时间里开始阅读 js/jquery，但我仍然遇到问题。

基本上，我能够创建一个隐藏的菜单项，单击该菜单项会在屏幕上滑动，并且我能够通过切换类来更改用于打开的按钮，然后将其发送回来。

但是当我第一次尝试再次打开它时，它会打开然后自动关闭。

我构建了一个 jsfiddle，但做错了，因为它与我的网站上的工作方式不同。

小提琴：http: [//jsfiddle.net/VpnrV/1/](http://jsfiddle.net/VpnrV/1/)

网站：[http ://ericbrockmanwebsites.com/dev4/](http://ericbrockmanwebsites.com/dev4/)

代码 - html：

```
<div id="dashboard">
    <nav id="access">
        <div class="open"></div>Here's a bunch of content representing the nav bar.
    </nav>
</div> <!-- dashboard --> 
```

CSS：

```
#dashboard {
  font-size:30px;
  float:left;
  position: absolute;
  right: -653px;
  z-index: 100;
}

#access {
    display: block;
    float: right;
    margin: 10px auto 0;
    width:730px;
}

.open {
  background: #cabd32 url(images/open.png) top left no-repeat;
  float:left;
  padding:13px 30px 16px;
}

.close {
  background: #cabd32 url(images/close.png) top left no-repeat;
  float:left;
  padding:13px 30px 16px;
} 
```

我可笑的js：

```
$(document).ready(function() {  
    $('.open').click(function() {
        $('#dashboard').animate({ right: '0' });
            $(this).toggleClass('close'); 
            $('.close').click(function() {
            $('#dashboard').animate({right: '-653'});
         }
  );
 }); 
```

任何帮助是极大的赞赏！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T23:18:29.927

您实际上可以在单击事件中执行此操作。所有这一切都是每次你点击打开它寻找关闭类，如果它在那里，关闭菜单，如果没有打开它。然后切换`close`类：

```
$(document).ready(function () {
    $('.open').on("click", function () {
        if ($(this).hasClass('close')) {
            $('#dashboard').animate({
                right: '-653'
            });
        } else {
            $('#dashboard').animate({
                right: '0'
            });
        }

        $(this).toggleClass('close');
    });
}); 
```

我不知道这是否是最有效的，但它适用于您的示例。我也更新了它：http: [//jsfiddle.net/VpnrV/3/](http://jsfiddle.net/VpnrV/3/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-28T23:29:43.520

每次单击按钮时，您实际上都将类 .close 绑定到多个回调。

你可以试试这个：

```
$('.open').bind('click',function(){ 
    $('#dashboard').stop().animate(
    {
        right: $(this).hasClass('close') ? '-653px' : '-400px'
    });
    $(this).toggleClass('close');
}); 
```

在 animate() 前面设置 stop() 将取消当前动画并执行下一个动画，而无需将多个动画排队。

# r - 如何在泰勒图中标记点？

> ID：15147452
> 
> 赞同：3
> 
> 时间：2013-02-28T23:08:08.197
> 
> 标签：r, plot

plotrix包有一个函数叫做[绘制](http://cran.r-project.org/web/packages/plotrix/index.html)`taylor.diagram`两个向量——一个代表数据，另一个代表模型输出。

这是一个例子：

```
require(plotrix)
set.seed(10)
data  <- sort(runif(100, 8,12))
model <- sort(rnorm(100, 10, 4))
taylor.diagram(data, model) 
```

在这个例子中，我想在改进模型后更新绘图：

```
model2 <- sort(rnorm(100, 10,2))
taylor.diagram(data, model2, add = TRUE) 
```

要产生这个：

![在此处输入图像描述](../Images/ce7693e830e7c6141304ea2773d4b0f4.png)

如何添加“模型 1”和“模型 2”等标签来识别这些点？（更新：标签位置由模型值确定，而不是事后完成）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-11T09:25:03.927

第三种解决方案是创建`taylor.diagram`包含文本标签的函数的修改版本。在这种情况下，所要做的就是添加一个参数，比如说`text`，然后在调用`points`原始函数之后（右大括号前 2 行）添加`text(sd.f * R, sd.f * sin(acos(R)), labels=text, pos=3)`.

```
taylor.diagram.modified <- function (ref, model, add = FALSE, col = "red", 
                                    pch = 19, pos.cor = TRUE, xlab = "", ylab = "", 
                                    main = "Taylor Diagram", show.gamma = TRUE, 
                                    ngamma = 3, gamma.col = 8, sd.arcs = 0, ref.sd = FALSE, 
                                    grad.corr.lines = c(0.2, 0.4, 0.6, 0.8, 0.9), pcex = 1, 
                                    cex.axis = 1, normalize = FALSE, mar = c(5, 4, 6, 6),
                                    text, ...) #the added parameter
{
    grad.corr.full <- c(0, 0.2, 0.4, 0.6, 0.8, 0.9, 0.95, 0.99,1)
    R <- cor(ref, model, use = "pairwise")
    sd.r <- sd(ref)
    sd.f <- sd(model)
    if (normalize) {

    ... #I didn't copy here the full function because it's quite long: to obtain it
    ... #simply call `taylor.diagram` in the console or `edit(taylor.diagram)`.

            }
            S <- (2 * (1 + R))/(sd.f + (1/sd.f))^2
        }
    }
    points(sd.f * R, sd.f * sin(acos(R)), pch = pch, col = col, 
           cex = pcex)
    text(sd.f * R, sd.f * sin(acos(R)),  #the line to add
         labels=text, cex = pcex, pos=3) #You can change the pos argument to your liking
    invisible(oldpar)
} 
```

然后只需在参数中提供一个标签名称`text`：

```
require(plotrix)
set.seed(10)
data  <- sort(runif(100, 8,12))
model <- sort(rnorm(100, 10, 4))
taylor.diagram.modified(data, model, text="Model 1")
model2 <- sort(rnorm(100, 10,2))
taylor.diagram.modified(data, model2, add = TRUE, text="Model 2") 
```

![在此处输入图像描述](../Images/7efb49cdb6dbe3693973f1e63e6bb39b.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T16:44:21.597

这里有两种方法

1.  `example(taylor.diagram)`显示了在右上角 (at `1.5*sd(data), 1.5*sd(data)`) 放置图例的一种不错的方法，但这需要两个点使用不同的颜色。

2.  另一种选择是根据原始[Taylor 2001 参考](http://www-pcmdi.llnl.gov/about/staff/Taylor/CV/Taylor_2001_JGR.pdf)中的方程式计算位置- 或将它们从源代码复制到`taylor.diagram`函数中，靠近

    ```
    dy <- 1.1 # text offset coefficient
    sd.f <- sd(model)
    R <- cor(data, model, use = 'pairwise')
    x <- sd.f * R
    y <- sd.f * sin(acos(R)) + dy * sd.f
    text(x, y, "Model") 
    ```

    您需要为每个模型计算这些，但只有模型输入和标签会改变。您可能还希望保持偏移相同。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-28T23:27:49.653

与在基本图形中标记所有内容的方式相同，使用`text`：

```
text(1.5,0.5,labels = "Model2")
text(3.5,1,labels = "Model1") 
```

![在此处输入图像描述](../Images/cb481154dc97b940d211bac610fe02e2.png)

# list - 在 Scala 中从另一个列表的成员创建列表的最佳方法

> ID：15147454
> 
> 赞同：2
> 
> 时间：2013-02-28T23:08:14.337
> 
> 标签：list, scala

我正在尝试从另一个列表在 Scala 中创建一个不可变列表。我的意思是我有列表 a 并且我想制作列表 b ，它是 every `a.myVariable`。我正在寻找的是一种不使用可变列表的快速方法。

例如：

```
a = (person1, person2, person3) 
```

我想要一份清单

```
b = (person1.name,person2.name,person3.name) 
```

在 Scala 中执行此操作的最有效方法是什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-28T23:13:27.897

您需要使用`map`集合上可用的方法。这是一个例子：

```
scala> case class Person(name: String)
defined class Person

scala> val a = List(Person("test1"), Person("test2"), Person("test3"))
a: List[Person] = List(Person(test1), Person(test2), Person(test3))

scala> val b = a.map(_.name)
b: List[String] = List(test1, test2, test3) 
```

[您可以在Scaladoc](http://www.scala-lang.org/api/current/index.html#scala.collection.immutable.List)中找到更多信息。`map`是高阶函数，它接受另一个函数作为参数，并通过将此函数应用于列表的每个元素来生成新列表。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-01T08:26:57.263

这与 Tenshi 的答案相同，只是符号不同。

```
val b = for (person <- a) yield person.name 
```

# eclipse - 具有图形类和继承问题的乒乓球游戏

> ID：15147457
> 
> 赞同：1
> 
> 时间：2013-02-28T23:08:22.033
> 
> 标签：eclipse, inheritance, graphics, pong

我已经为一个创建类似乒乓球的游戏的课程准备了这个实验室，并且我已经将`.java`这个实验室的文件相应地放在了以下链接的 pastebin 上：

`Ball.java`： http: [//pastebin.com/VMg75i8U](http://pastebin.com/VMg75i8U)

`Block.java`： http: [//pastebin.com/T7GCTh4z](http://pastebin.com/T7GCTh4z)

`BallTestTwo.java`： http: [//pastebin.com/gZgR8d2J](http://pastebin.com/gZgR8d2J)

`Tester.java`： http: [//pastebin.com/fG5f5zZR](http://pastebin.com/fG5f5zZR)

`Locatable.java`： http: [//pastebin.com/GE77PLJk](http://pastebin.com/GE77PLJk)

我的问题是我的积木工作得很好，因为我可以在`Tester.java`注释掉球线的情况下运行并获得我想要的结果。但是，当我在未注释球线的情况下运行它时，我得到了错误并且只是一个空白的白色画布。

如果您需要澄清最终结果应该是什么，这里是指向实验室描述的文字文档的链接。[https://docs.google.com/file/d/0B_ifaCiEZgtcTVFPX0t2Mzhzczg/edit?usp=sharing](https://docs.google.com/file/d/0B_ifaCiEZgtcTVFPX0t2Mzhzczg/edit?usp=sharing) [https://docs.google.com/file/d/0B_ifaCiEZgtcMFVWYXIxdjZsdDQ/edit?usp=sharing](https://docs.google.com/file/d/0B_ifaCiEZgtcMFVWYXIxdjZsdDQ/edit?usp=sharing)

**编辑** 我收到的错误将永远重复，直到我强制终止程序：

```
at java.awt.EventQueue.dispatchEventImpl(Unknown Source)
    at java.awt.EventQueue.access$200(Unknown Source)
    at java.awt.EventQueue$3.run(Unknown Source)
    at java.awt.EventQueue$3.run(Unknown Source)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.security.ProtectionDomain$1.doIntersectionPrivilege(Unknown Source)
    at java.security.ProtectionDomain$1.doIntersectionPrivilege(Unknown Source)
    at java.awt.EventQueue$4.run(Unknown Source)
    at java.awt.EventQueue$4.run(Unknown Source)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.security.ProtectionDomain$1.doIntersectionPrivilege(Unknown Source)
    at java.awt.EventQueue.dispatchEvent(Unknown Source)
    at java.awt.EventDispatchThread.pumpOneEventForFilters(Unknown Source)
    at java.awt.EventDispatchThread.pumpEventsForFilter(Unknown Source)
    at java.awt.EventDispatchThread.pumpEventsForHierarchy(Unknown Source)
    at java.awt.EventDispatchThread.pumpEvents(Unknown Source)
    at java.awt.EventDispatchThread.pumpEvents(Unknown Source)
    at java.awt.EventDispatchThread.run(Unknown Source)

Exception in thread "AWT-EventQueue-0" java.lang.NullPointerException
    at BallTestTwo.paint(BallTestTwo.java:42)
    at BallTestTwo.update(BallTestTwo.java:37)
    at sun.awt.RepaintArea.updateComponent(Unknown Source)
    at sun.awt.RepaintArea.paint(Unknown Source)
    at sun.awt.windows.WComponentPeer.handleEvent(Unknown Source)
    at java.awt.Component.dispatchEventImpl(Unknown Source)
    at java.awt.Component.dispatchEvent(Unknown Source)
    at java.awt.EventQueue.dispatchEventImpl(Unknown Source)
    at java.awt.EventQueue.access$200(Unknown Source)
    at java.awt.EventQueue$3.run(Unknown Source)
    at java.awt.EventQueue$3.run(Unknown Source)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.security.ProtectionDomain$1.doIntersectionPrivilege(Unknown Source)
    at java.security.ProtectionDomain$1.doIntersectionPrivilege(Unknown Source)
    at java.awt.EventQueue$4.run(Unknown Source)
    at java.awt.EventQueue$4.run(Unknown Source)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.security.ProtectionDomain$1.doIntersectionPrivilege(Unknown Source)
    at java.awt.EventQueue.dispatchEvent(Unknown Source)
    at java.awt.EventDispatchThread.pumpOneEventForFilters(Unknown Source)
    at java.awt.EventDispatchThread.pumpEventsForFilter(Unknown Source)
    at java.awt.EventDispatchThread.pumpEventsForHierarchy(Unknown Source)
    at java.awt.EventDispatchThread.pumpEvents(Unknown Source)
    at java.awt.EventDispatchThread.pumpEvents(Unknown Source)
    at java.awt.EventDispatchThread.run(Unknown Source) 
```

# jquery - jquery ui对话框 - 效果后淡入

> ID：15147460
> 
> 赞同：0
> 
> 时间：2013-02-28T23:08:30.530
> 
> 标签：jquery, jquery-ui, jquery-ui-dialog, jquery-effects

```
function infoBox(title,text){
    $('.infobox').dialog({
    open: function( event, ui ) {$('.infobox').append('<p style="display:none;>'+text+'</p>'); 
    },
    beforeClose: function( event, ui ) {$('.infobox p').remove(); 
    },
    show:'drop' ,
    position:'top',
    title:title,
});
}; 
```

**有没有类似`afteropen:`选择的东西？**

或者在ui效果完成后让附加文本淡入的任何其他方式？

也许是这样的：`show:[{show:'drop', function(){$('.infobox p').fadeIn();}],`

**?** 提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T23:25:14.180

我想我明白你在找什么。只需使用[`.delay()`](http://api.jquery.com/delay/)和[`.fadeIn()`](http://api.jquery.com/fadein/)。

```
function infoBox(title,text){
        $('.infobox').dialog({
        open: function( event, ui ) {
            var p = $('<p style="display:none;">'+text+'</p>')
            $('.infobox').append(p);
            p.delay(1000).fadeIn(400);
        },
        beforeClose: function( event, ui ) {$('.infobox p').remove(); 
        },
        show:'drop' ,
        position:'top',
        title:title,
    });
} 
```

演示：http: [//jsfiddle.net/dirtyd77/yTMwu/69/](http://jsfiddle.net/dirtyd77/yTMwu/69/)

* * *

编辑：你也可以这样写：

```
$('.infobox').append('<p style="display:none;">'+text+'</p>').find('p').delay(1000).fadeIn(400); 
```

演示：http: [//jsfiddle.net/dirtyd77/yTMwu/70/](http://jsfiddle.net/dirtyd77/yTMwu/70/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T23:27:59.557

这是一个工作示例：http: [//jsfiddle.net/5R49y/3/](http://jsfiddle.net/5R49y/3/)

**HTML：**

```
<div class="infobox" title="dialog"></div> 
```

**JavaScript（jQuery / jQuery UI）：**

```
function infoBox(title, text) {
    $('.infobox').dialog({
        open: function (event, ui) {
            var p = $('<p/>').append(text).hide().fadeIn(2000)
            $('.infobox').append(p);

 },
        beforeClose: function (event, ui) {
            $('.infobox p').remove();
        },
        show: 'drop',
        position: 'top',
        title: title
    });
}

$(function(){
    infoBox('Title','Lorem ipsum');
}); 
```

# c# - 控制器上未收到英国格式的 MVC3 日期

> ID：15147467
> 
> 赞同：4
> 
> 时间：2013-02-28T23:08:54.123
> 
> 标签：c#, ajax, asp.net-mvc, datetime

鉴于此虚拟机

```
public class ApplicationDTO : BaseDTO
{
    public DateTime Date { get; set; }
    public int JobId {get;set;}
    public int Status {get;set;}
    [Required]
    public string Message { get; set; }
    public string ExpertCode { get; set; }
} 
```

因此我有一个隐藏的领域

```
@Html.Hidden("Date", DateTime.Now) 
```

哪个提琴手向我展示了我所期望的发送到服务器（英国格式，我在英国！）

![在此处输入图像描述](../Images/6606b6585b89ef097195fc2bce0c1c9a.png)

但在控制器上，日期显示为默认最小值。日期

![在此处输入图像描述](../Images/c4427dcf6a5335975f25196a9bdd044a.png)

它只是英国格式吗？如果是这样，我最好的方法是什么？虽然目前我将其设置为当前日期，但可能它可以设置为任何给定的日期，即

```
@Html.HiddenFor(x => x.Date) 
```

我正在使用 AJAX 提交表单，如果这有所作为。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-28T23:23:00.013

如果是 Get MVC，则在模型绑定期间默认使用文化不变格式（基本上是美国格式）。所以它不接受英国日期格式。我相信设计原因是查询字符串可以被传递，因此它需要是文化不变的（我不是 100% 相信这个逻辑）。

本文介绍了一个可能的解决方案[http://xhalent.wordpress.com/2011/05/14/localization-of-dates-in-asp-net-mvc/](http://xhalent.wordpress.com/2011/05/14/localization-of-dates-in-asp-net-mvc/)

我们只是确保我们永远不会使用英国日期格式进行获取

这个问题还涵盖了[DateTime 和 ASP.NET MVC 3 模型绑定的全球化问题](https://stackoverflow.com/questions/4349589/globalization-problem-with-datetime-and-asp-net-mvc-3-model-binding)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T23:13:43.960

您应该使用数据注释来格式化模型或视图模型上的日期

```
public class ApplicationDTO : BaseDTO
{
   [DisplayFormat(DataFormatString="{0:dd/MM/yyyy}", ApplyFormatInEditMode=true)]
   public DateTime Date { get; set; }
   public int JobId {get;set;}
   public int Status {get;set;}
   [Required]
   public string Message { get; set; }
   public string ExpertCode { get; set; }
} 
```

根据您应用格式。正如我所见，您没有为您的财产提供任何格式

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-28T23:16:37.233

我对 dd.MM.yyyy 格式有类似的问题，必须将 web.config 中的全球化元素设置为适当的文化和 uiCulture 属性设置。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-28T23:23:12.653

如果您使用 @Html.Hidden （不是 For 助手），它将无法将请求中的参数与模型中的属性相匹配。

如果您使用 @Html.HiddenFor(x=>x.Date, "28/2/2013") 您将看到正确填充的日期。

您还可以验证 Request.Params 集合。在动作中放置一个断点。您会看到其中一个参数有您的日期.... JQuery 不会以任何方式影响这一点。

# jmeter - jmeter 未将变量保存到 CSV 或 XML 文件中

> ID：15147469
> 
> 赞同：3
> 
> 时间：2013-02-28T23:09:07.913
> 
> 标签：jmeter

我是 jmeter 的新手。

我知道对于任何给定的测试运行，我可以编辑 jmeter.properties 并指定 jmeter 将保存到其输出文件中的“自定义”变量的名称。

我编辑了 jmeter.properties 以包含这一行：

```
sample_variables=DURATION 
```

我还编辑了我的测试计划，包括一个正则表达式提取器，它从每个响应中提取一个值并将其填充到该名称的变量中。

![在此处输入图像描述](../Images/f1c394dea2d5c013dbe53c050d8fa166.png)

我还添加了一个“简单数据编写器”来告诉 jmeter 将它收集的数据写入文件。

![在此处输入图像描述](../Images/2225bbf4ad2dfaaa669fbc97a6a47b1e.png)

输出文件成功创建，但不包含我提取的变量。

我究竟做错了什么？

我发现这对谷歌来说是不可能的，因为“保存 jmeter 变量”并不足以限制这种情况。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T23:26:59.167

我的错。

Jmeter 正在写出那个变量。我不得不重新启动 jmeter 才能让它工作。

我被输出文件的顶部误导了——它包含了在我重新启动该工具之前的先前运行的输出。删除现有输出文件后，输出文件中的新内容显示了我预期的变量。

# c# - GetChild 是如何工作的？

> ID：15147472
> 
> 赞同：0
> 
> 时间：2013-02-28T23:09:18.360
> 
> 标签：c#, windows-phone-7, xaml, tree, parent-child

我知道这是一个非常微不足道的问题，但我只花了两个小时，根本没有进展......所以这里是：在我的程序的某个地方我有：

```
UIElement bob = cible as UIElement; 
```

（我必须将其转换为 UIElement 才能访问自定义属性）。

然后我想让鲍勃的孩子（它是一个按钮）来改变它的一个 xaml 属性。我找到了很多方法来做到这一点，`GetChild`等等`GetVisualChild`......我仍然没有成功，所以如果有人可以帮助我，那就太好了。我在 msdn 上看到了文档，并且正在学习逻辑和可视化树，但它仍然在我的脑海中......谢谢。

**编辑**更多信息

我想做的代码块如下：

```
object cible = FindName(nomtargetpad);//Retrieve a button that was clicked previously
UIElement bob = cible as UIElement;//converting it to access a custom property
MyClass.SetSon( bob, bufferson) ;//set this custom property for this element 
```

现在，我必须找到元素的子元素（bob 或 cible），它是一个图像，并设置它的源。我在我的 MainPage 类中添加了这个（这就是 msdn 文档中的全部内容）：

```
public static DependencyObject GetChild(
DependencyObject reference,
int childIndex); 
```

然后我将其添加到上面的代码块中：

```
DependencyObject joli = GetChild(bob, 0);//tryin to use what's on  msdn 
          Image belleimage = joli as Image;// Tryin to cast to avoid the problem listed below
          string nouvelleimage = "images/"+sons[bufferson]+".png";//preparing the new source
          joli.Source = nouvelleimage;//setting the new source 
```

对不起，所有的名字都是法语，它可能对你没有任何意义（除非我猜是鲍勃）尽管进行了强制转换，VS 报告说： System.Windows.DependencyObject' 不包含源的定义。

在 xaml 中，这很容易，我有一个嵌套在按钮中的图像。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T04:15:05.723

您可以使用一个 VisualTreeHelper 类， http: [//msdn.microsoft.com/en-us/library/system.windows.media.visualtreehelper.getchild (v=vs.95).aspx](http://msdn.microsoft.com/en-us/library/system.windows.media.visualtreehelper.getchild(v=vs.95).aspx)

或者如果孩子在按钮模板内，您应该使用 GetTemplateChild [http://msdn.microsoft.com/en-us/library/system.windows.frameworkelement.gettemplatechild.aspx](http://msdn.microsoft.com/en-us/library/system.windows.frameworkelement.gettemplatechild.aspx)

# php - 追随者的 MySQL 数据库结构

> ID：15147474
> 
> 赞同：1
> 
> 时间：2013-02-28T23:09:23.470
> 
> 标签：php, mysql, database

我想实现一个关注/收藏系统。我可以想到两种实现数据库/表结构的方法，但不确定要实现哪一种。其中哪一项被认为是最佳实践，最重要的是为什么？

我把我所有的追随者放在一个字符串中。通过将所有追随者放在一个字符串中，它减少了冗余行的数量。

前任。

编号 (1) || 用户 ID (1) || follower_ids (2, 3, 45)

```
'CREATE TABLE `users` (
        `id` int(10) unsigned NOT NULL AUTO_INCREMENT,
        `username` varchar(20) NOT NULL, 
        PRIMARY KEY (`id`)
        ) ENGINE=MyISAM DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci AUTO_INCREMENT=1';

'CREATE TABLE `follow` (
        `id` int(10) unsigned NOT NULL AUTO_INCREMENT,
        `user_id` int(10) unsigned NOT NULL,
        `follower_ids` text NOT NULL, 
        PRIMARY KEY (`id`)
        ) ENGINE=MyISAM DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci AUTO_INCREMENT=1'; 
```

或者

我将每个 follow_id 单独放置，但通过为相同的 user_id 设置 3 行来增加冗余。

前任。

编号 (1) || 用户 ID (1) || 追随者 ID (2)

编号 (2) || 用户 ID (1) || 追随者 ID (3)

编号 (3) || 用户 ID (1) || 追随者 ID (45)

```
'CREATE TABLE `users` (
        `id` int(10) unsigned NOT NULL AUTO_INCREMENT,
        `username` varchar(20) NOT NULL,
        PRIMARY KEY (`id`) 
        ) ENGINE=MyISAM DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci AUTO_INCREMENT=1';

'CREATE TABLE `follow` (
        `id` int(10) unsigned NOT NULL AUTO_INCREMENT,
        `user_id` int(10) unsigned NOT NULL,
        `follower_id` int(10) unsigned NOT NULL,
        PRIMARY KEY (`id`)
        ) ENGINE=MyISAM DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci AUTO_INCREMENT=1'; 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-28T23:38:50.913

您的第二个选项对字段名称稍作修改，因为关注者和关注者都是用户 ID。正如 John 所提到的，将外键添加到下表中的两个 *_user_id 字段。

此外，永远不要有复数表名。“用户”和“关注”就足够了。我个人更喜欢像'follow'这样的表有像'xref_'这样的前缀，所以我知道它只是一个允许多对多关系的交叉引用表（一个用户可以关注许多用户，一个用户可能有很多关注用户）。

```
'CREATE TABLE `user` (
        `id` int(10) unsigned NOT NULL AUTO_INCREMENT,
        `username` varchar(20) NOT NULL, 
        ) ENGINE=MyISAM DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci AUTO_INCREMENT=1';

'CREATE TABLE `follow` (
        `id` int(10) unsigned NOT NULL AUTO_INCREMENT,
        `followed_user_id` int(10) unsigned NOT NULL,
        `follower_user_id` int(10) unsigned NOT NULL,
        PRIMARY KEY (`id`)
        ) ENGINE=MyISAM DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci AUTO_INCREMENT=1'; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-28T23:12:42.823

最好的方法是两者都不是。您应该在跟随表和追随者表之间有一个中间表。中间的表只有两列。follow_id 和 follower_id。使用这种方法，您可以忽略您提到的两种解决方案的缺点。您不必处理字符串，也没有重复条目，并且仅包含索引的性能非常快。

```
'CREATE TABLE `follow` (
        `id` int(10) unsigned NOT NULL AUTO_INCREMENT,
        PRIMARY KEY (`id`)
        ) ENGINE=MyISAM DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci AUTO_INCREMENT=1';

'CREATE TABLE `user` (
        `id` int(10) unsigned NOT NULL AUTO_INCREMENT,
        `username` varchar(255) unsigned NOT NULL,
        ....
        PRIMARY KEY (`id`)
        ) ENGINE=MyISAM DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci AUTO_INCREMENT=1';
'CREATE TABLE `follow_user` (
        `user_id` int(10) unsigned NOT NULL,
        `follower_id` int(10) unsigned NOT NULL,
) 
```

因为您更改了很多帖子，我认为如果关注者与用户相同，您的第二种方法会更好。因为您只存储关注和用户的索引以及一个很好的选择查询来查看单个用户关注的内容比解析和搜索字符串要好得多重复的条目没有问题，因为它们只是索引并且没有问题.

# php - 选择当前查看同一页面的用户

> ID：15147478
> 
> 赞同：0
> 
> 时间：2013-02-28T23:09:47.977
> 
> 标签：php, javascript, mysql

我在这个问题的答案中找到了几个部分解决方案，但似乎没有共同的答案。因此，我有一个表用户，其中包含 user_id、user_name 列。在网站的每个静态页面上，我想显示当前查看此页面的用户的所有用户名。

1.  我应该有一个包含 user_id、webpage_link 列的表格视图吗？
2.  如果是，我什么时候更新网页链接栏中的数据？如何将以下答案中的代码与mysql数据库连接[有没有办法检测浏览器窗口当前是否处于活动状态？](https://stackoverflow.com/questions/1060008/is-there-a-way-to-detect-if-a-browser-window-is-not-currently-active)? （如果可以用于此目的。）
3.  经常更新不是很好。因此，用户可以查看多个页面（例如，在 2 个或更多选项卡中）。在这种情况下应该是什么类型的webpage_link 列？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T23:21:38.707

1.  对于每个 http 请求，您都会获得一个 $path 变量。如果您也有登录用户，则可以存储该用户最后请求的页面（例如，在您描述的表中，但仅存储相对路径）。

2.  您可以在某种前端控制器中根据每个请求更新此信息。（只要确保你把它放在每个经过身份验证的页面调用它的地方）。当用户会话超时时，您从表中删除该用户的行。

3.  这个案子有点难。您可以存储用户请求的最后 n 个页面/路径，其余部分如上所示。您不必为此更改表结构，只需允许每个用户多行。（不过，user_id+path 的组合应该是唯一的）

希望这有助于您入门

# html - 背景图像在 Chrome 25 中不起作用

> ID：15147489
> 
> 赞同：0
> 
> 时间：2013-02-28T23:10:27.147
> 
> 标签：html, css, google-chrome, background-image

![背景问题](../Images/e4af312a9a69184fb0135683eea643ef.png)

我试图设计一个选择。它在除 IE 和 Chrome 之外的所有浏览器中或多或少地工作。对我来说最大的问题是为什么它不能在 Chrome 25 中运行？

在左侧，您可以看到它的外观，而在右侧，您可以看到它在 Chrome 中的外观。

**HTML：**

```
<div class="selectContainer">
    <select name="adults" class="select-style" size="1">
        <?php
            for ($i=1; $i<=99; $i++){
                echo '<option>' . $i . '</option>';
            }
        ?>
    </select>
</div>
<div class="selectDescription">
    <span class="annotation">Erwachsene</span>
</div> 
```

**CSS：**

```
.selectContainer {
    background-image: url('../img/select-style.png');
    background-repeat: no-repeat;
    border-bottom: 1px solid #006633;
    border-radius: 0px 0px 8px 8px; 
    -moz-border-radius: 0px 0px 8px 8px; 
    -webkit-border-radius: 0px 0px 8px 8px;
    width: 36px;
    overflow: hidden;
    float: left;
}

.select-style {
    width: 57px;
    height: 27px;
    border: none;
    background: none;
    padding-top: 5px;
    color: #95C11F;
}

.selectDescription {
    line-height: 27px;
    float: left;
    padding-left: 5px;
} 
```

**现场示例：** [http ://bfb.bplaced.net/test/](http://bfb.bplaced.net/test/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-28T23:28:52.350

添加`-webkit-appearance: none;`到`.select-style`课程中，它可以在 chrome 中使用。

似乎 webkit 对`<select>`元素的样式有点严格..

* * *

如果您不希望 Chrome/Firefox 的默认橙色边框成为焦点，也不要忘记添加这个：

```
:focus { outline-style: none; }
::-moz-focus-inner { border-style: none; } 
```

[小提琴](http://jsfiddle.net/6vV8E/)

# java - if/else 和 switch 语句的操作有区别吗？

> ID：15147492
> 
> 赞同：1
> 
> 时间：2013-02-28T23:10:39.280
> 
> 标签：java, performance, switch-statement, if-statement

我主要只是好奇，使用 if/else 和 switch 语句只是个人喜好问题，还是它们实际上工作方式不同？一个比另一个更有效吗？如果是，为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T23:13:35.817

如果您的案例超过四个，则 switch-case 语句更有效。你的case直接跳了。另一方面，如果您使用 if-else 语句，则所有案例都会进行比较，直到您的案例被交叉为止。

# php - 如何操作 cakePHP 分页器

> ID：15147493
> 
> 赞同：0
> 
> 时间：2013-02-28T23:10:42.407
> 
> 标签：php, google-maps-api-3, pagination, cakephp-2.3

我有一个包含 80 个地址的页面，我想在 GoogleMap 上设置地址。这运行得很好

```
foreach ($atlas as $atla): 
    $options = array(
    'title' => $atla['Atla']['name'],
    'lng' => $atla['Atla']['longitude'],
    'lat' => $atla['Atla']['latitude'],
    'content' => $atla['Atla']['name']
);
echo $this->GoogleMapV3->addMarker($options);

endforeach; 
```

那就是我对那个添加选项的 foreach。性能不太好，但它只有 80 个地址。这是一个测试。CakePHP 在 Standardsetup 中带来了一个分页器，因此该数组不是包含 80 个地址的整个数组。如何在**不**关闭分页器的情况下将整个数组显示在视图中？

如果有任何可以帮助我。

许多问候马库斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T17:51:20.827

分页器查询限制中设置的记录数。因此，如果您的数据库中有 80 条记录并将分页器设置为 20。它只查询数据库中的前 20 条记录。

因此，您要么必须设置分页器的限制，要么使用不同的查询从数据库中获取所有记录。

# header - Gwan 中的 X-Forwarded-For

> ID：15147503
> 
> 赞同：1
> 
> 时间：2013-02-28T23:12:00.313
> 
> 标签：header, ip-address, haproxy, g-wan

我已通读文档（API 和手册），但似乎没有找到 gwan 对`X-Forwarded-For`标头的任何支持。我发现的唯一可能相关的是`REMOTE_BIN_ADDR`。

我知道要获得可以使用的客户端 IP，`REMOTE_ADDR`但是我的 gwan 服务器位于 HA 代理负载平衡器后面，该负载平衡器通过`X-Forwarded-For`.

Gwan 不支持此标头吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T17:42:36.830

据我们所知，虽然被广泛使用，但`X-Forwarded-For`HTTP 标头并不是 RFC 的一部分。一些服务器，如 Nginx，正在使用替代方案，因为代理服务器可以“链接”客户端 IP 地址，导致结果不可靠。

附带说明一下，请记住，*不能信任*`X-Forwarded-For`提供值的 HTTP 标头……除非您自己的代理正在清理任何先前设置的值并添加自己的值。乍一看，这使得这个头文件没有预期的那么有用——并且肯定有助于解释为什么 Nginx 觉得有必要创建自己的头文件。*`X-Forwarded-For`*

 *G-WAN 最初支持此标头，但我们已删除此条目，因为我们认为它与本机 G-WAN 反向代理和负载均衡器（去年实施但仍未记录为文档和以优美的方式导出接口需要时间——我们希望将此功能与协议处理程序合并，以简化事情）。

请注意，现在，您可以轻松地从 G-WAN 公开的 HTTP 标头中解析它，无论是来自 a`handler`还是来自`servlets`.*

# c++ - C++ 多态性：为什么即使类型很明显，静态绑定也是不可能的

> ID：15147514
> 
> 赞同：2
> 
> 时间：2013-02-28T23:12:46.607
> 
> 标签：c++, polymorphism, virtual, late-binding

我正在学习 C++ 中的虚函数和虚表。但是，我不明白为什么需要动态绑定。编译器是否没有所有信息来确定函数调用是针对派生函数还是基函数，例如这里：

```
class Base1 { 
   public : virtual void foo() 
            {  cout << " Base foo \n"; } 
};

class Base2 {
   public : virtual void foo() 
           { cout << " Base2 foo \n"; } 
};

class derived : public base1, base 2 {
     public : virtual void foo() 
       { cout << " derived foo \n"; }
}

int main()
{
  derived d;
  Base2 *p = &d;
  p->foo();       // why can't the compiler figure out that this
                  // is a function call to the derived function
                  // foo at compile time?

  return 0;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-28T23:18:48.737

> 为什么不能编译图，这是在编译运行时本身期间对派生函数 foo 的函数调用？

它可以。一些编译器*会将*调用转换为静态绑定。

还有其他一些情况，编译器**必须使用动态绑定**。

`foo()`在这个函数中应该调用哪个？

```
void function( Base* p )
{
  p->foo();
} 
```

无法确定*。必须使用动态绑定。

*编辑：根据我提供的信息。:)

# c++ - 使用 glutmotionfunc 在运动开始和结束时获取 x 位置

> ID：15147515
> 
> 赞同：2
> 
> 时间：2013-02-28T23:12:51.377
> 
> 标签：c++, opengl, glut

我想使用 glutmotionfunc() 来获取拖动动作开始和结束时的 x 位置，即这样我可以得到 x 的变化。有没有一种简单的方法可以做到这一点？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-28T23:42:15.897

我认为`glutmotionfunc()`不会像您期望的那样工作。

当拖动完成时，注册的回调*不仅被调用一次。*相反，*每次*移动鼠标时都会调用它，同时按下按钮。

这里的想法是能够为每个小的拖动动作不断更新场景。

要在调用之间进行移动，您必须存储之前获得的值。哦，不要忘记将存储的值标记为无效，如果同时释放按钮。否则你会得到一些有趣的结果。

所以这里的一般想法

```
int old_x=0;
int old_y=0;
int valid=0;

void mouse_func (int button, int state, int x, int y) {
  old_x=x; 
  old_y=y;
  valid = state == GLUT_DOWN;
}

void motion_func (int x, int y) {
  if (valid) {
    int dx = old_x - x;
    int dy = old_y - y;
    /* do something with dx and dy */
  }
  old_x = x;
  old_y = y;
} 
```

不要忘记将两个回调与`glutMotionFunc`and连接起来`glutMouseFunc`

# z3 - 对日志使用 uninterpret 函数

> ID：15147520
> 
> 赞同：0
> 
> 时间：2013-02-28T23:13:07.167
> 
> 标签：z3

我正在尝试了解 Z3 未解释的函数如何工作来证明这一点`n=2k+1 => log(m) + k*log(m*m) == n*log(m)`。为此，我使用以下内容

```
mylog = Function('mylog', IntSort(), IntSort())
mylog_rule1 = mylog(x*y) == mylog(x) + mylog(y)
mylog_rule2 = mylog(x**y) == y*mylog(x)
#mylog_rule3 = y*mylog(x) == mylog(x**y)  #is this rule needed ? 

rules = And(mylog_rule1, mylog_rule2, mylog_rule3)
prop = Implies(n==2*k+1, log(m) + k*log(m*m) == n*log(m))
prove(rules, prop) 
```

我的方法一定有问题，因为这不太奏效。事实上，我什至不能`prove(Implies(mylog(x*y) == mylog(x) + mylog(y), mylog(m*n) == mylog(m) + mylog(n))`改变变量名。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T03:45:22.750

Z3 将无法有效解决此类问题。Z3 有一个非线性算术求解器 ( [nlsat](http://research.microsoft.com/en-us/um/people/leonardo/files/IJCAR2012.pdf) )。但是，此求解器不支持量词和未解释的函数。Z3 将在未来支持这一点。因此，当问题包含诸如 等未解释的函数时`mylog`，Z3 将使用不同的（且不完整的）求解器来进行非线性算术。该求解器将无法解决简单的非线性问题。

您的示例的另一个问题是您没有在规则中使用通用量词。`prove(Implies(mylog(x*y) == mylog(x) + mylog(y), mylog(m*n) == mylog(m) + mylog(n))`即使使用非线性算术的不完全求解器，也可以证明这个简单的例子。这是正确的 Z3Py 脚本（[也可在此处在线获得](http://rise4fun.com/Z3Py/DQhx)）

```
mylog = Function('mylog', RealSort(), RealSort())
x, y = Reals('x y')
m, n = Reals('m n')
prove(Implies(ForAll([x,y], mylog(x*y) == mylog(x) + mylog(y)), 
      mylog(m*n) == mylog(m) + mylog(n))) 
```

# python - 当不同的子元素名称匹配时如何连接子元素

> ID：15147529
> 
> 赞同：2
> 
> 时间：2013-02-28T23:13:53.463
> 
> 标签：python, xml, xslt

好的，这就是我想要完成的。我有一个来自目录路径和安全组的 CSV 文件的 XML 文档。我想从具有匹配 Path 元素的节点中获取 Group 元素及其子元素，并将其复制到前一个节点。这是一个例子：

```
<root>
    <Folder>
        <Path>\\path\to\folder\_Shared Data\</Path>
        <Group>
            <Account>Shared_Data_RW</Account>
            <FullName></FullName>
            <AccountType>GROUP</AccountType>
            <Permission>Modify</Permission>
        </Group>
    </Folder>
    <Folder>
        <Path>\\path\to\folder\_Shared Data\</Path>
        <Group>
            <Account>Shared_Data_RO</Account>
            <FullName></FullName>
            <AccountType>GROUP</AccountType>
            <Permission>Read & Execute</Permission>
        </Group>
    </Folder>
</root> 
```

好吧，这就是它现在的样子。注意两个节点上的 Path 元素是如何相同的。我想要的是它看起来像这样：

```
<root>
    <Folder>
        <Path>\\path\to\folder\_Shared Data\</Path>
        <Group>
            <Account>Shared_Data_RW</Account>
            <FullName></FullName>
            <AccountType>GROUP</AccountType>
            <Permission>Modify</Permission>
        </Group>
        <Group>
            <Account>Shared_Data_RO</Account>
            <FullName></FullName>
            <AccountType>GROUP</AccountType>
            <Permission>Read & Execute</Permission>
        </Group>
    </Folder>
</root> 
```

第二个节点消失了，Group 元素及其子元素已添加到前一个节点中。

我对这种东西相当陌生，我对一些编程和脚本编写感到满意，但不确定实现这一点的最佳方法。我已经看到 XSLT 可能会做我正在寻找的事情，但我希望它实际做的是获取输入 XML 文件，进行更改，然后给我一个输出 XML 文件，以便我可以接受它并使用 jsTree 将其显示在树中的网页上。我还查看了用于处理 XML 的 Python 的 ElementTree，但我不太确定从哪里开始以获得我正在寻找的结果。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T03:43:57.133

**这种转变**：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>
 <xsl:strip-space elements="*"/>

 <xsl:key name="kFolderByPath" match="Folder" use="Path"/>

 <xsl:template match="/*">
  <xsl:copy>
   <xsl:apply-templates select=
    "Folder[generate-id()=generate-id(key('kFolderByPath',Path)[1])]"/>
  </xsl:copy>
 </xsl:template>

 <xsl:template match="Folder">
  <Folder>
   <xsl:copy-of select=
   "Path | key('kFolderByPath',Path)/*[not(self::Path)]"/>
  </Folder>
 </xsl:template>
</xsl:stylesheet> 
```

**当应用于（纠正格式良好）提供的 XML 文档时：**

```
<root>
    <Folder>
        <Path>\\path\to\folder\_Shared Data\</Path>
        <Group>
            <Account>Shared_Data_RW</Account>
            <FullName></FullName>
            <AccountType>GROUP</AccountType>
            <Permission>Modify</Permission>
        </Group>
    </Folder>
    <Folder>
        <Path>\\path\to\folder\_Shared Data\</Path>
        <Group>
            <Account>Shared_Data_RO</Account>
            <FullName></FullName>
            <AccountType>GROUP</AccountType>
            <Permission>Read &amp; Execute</Permission>
        </Group>
    </Folder>
</root> 
```

**产生想要的正确结果：**

```
<root>
   <Folder>
      <Path>\\path\to\folder\_Shared Data\</Path>
      <Group>
         <Account>Shared_Data_RW</Account>
         <FullName/>
         <AccountType>GROUP</AccountType>
         <Permission>Modify</Permission>
      </Group>
      <Group>
         <Account>Shared_Data_RO</Account>
         <FullName/>
         <AccountType>GROUP</AccountType>
         <Permission>Read &amp; Execute</Permission>
      </Group>
   </Folder>
</root> 
```

**说明**：

使用**[Muenchian 分组方法](http://www.jenitennison.com/xslt/grouping/muenchian.html)**。

# tail-recursion - 垂直打印数字的递归方法

> ID：15147530
> 
> 赞同：-1
> 
> 时间：2013-02-28T23:13:54.030
> 
> 标签：tail-recursion

我想编写一个递归方法，比如说“printVertical”，它将一个正整数作为输入并垂直打印它的数字。例如调用 printVertical(2849) 的输出是：

9

4

8

2

有帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T23:23:53.810

在家工作？我会尽力指导你。

1）您可以将 int 转换为字符串，然后打印最右边的 char 并将字符串的其余部分传递给下一个递归迭代 - 这可能不是最好的方法

2) 使用 div & mod by 10, 2849 mod 10 给出 9，打印它，将 2849 div 10 传递给下一次迭代，当 num div 10 = 0 时停止

# javascript - 使用 javascript，有没有办法提取窗口的当前 URL 参数并存储到变量中？

> ID：15147532
> 
> 赞同：-2
> 
> 时间：2013-02-28T23:13:59.593
> 
> 标签：javascript, uri, url-parameters

我知道window.location.host 和window.location.pathname，但是有没有像这样提取链接的额外参数？

[http://www.example.com/test?u=123](http://www.example.com/test?u=123)

我想得到一个等于“u123”但没有双引号的动态变量。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T23:15:44.253

`window.location`！[MDN window.location](https://developer.mozilla.org/en-US/docs/DOM/window.location)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T23:19:30.427

```
var oGetVars = {};

if (window.location.search.length > 1) {
  for (var aItKey, nKeyId = 0, aCouples = window.location.search.substr(1).split("&"); nKeyId < aCouples.length; nKeyId++) {
    aItKey = aCouples[nKeyId].split("=");
    oGetVars[unescape(aItKey[0])] = aItKey.length > 1 ? unescape(aItKey[1]) : "";
  }
}

// alert(oGetVars.yourVar); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-28T23:20:51.850

有关将所有页面参数放入可用变量的基本示例，请尝试以下操作：

```
var pageParams = {};
if(location.search != ''){
  var searchStr = location.search;
  searchStr = searchStr.substr(1);
  var searchStrArr = searchStr.split('&');
  var pageParamPair, pageParamKey, pageParamValue;
  for(var i=0;i<searchStrArr.length;i++){
    pageParamPair = searchStrArr[i].split('=');
    pageParamKey = pageParamPair[0];
    pageParamValue = pageParamPair[1];
    pageParams[pageParamKey] = pageParamValue;
  }
} 
```

因此在你的情况下`pageParams['u'] = "123"`

# python - Django rss feedparser 通过包含标签呈现

> ID：15147534
> 
> 赞同：0
> 
> 时间：2013-02-28T23:14:17.283
> 
> 标签：python, django, tags, feedparser

我想要做的是：使用 feedparser 让我的包含标签：

```
from django.template import Library
import feedparser
@register.inclusion_tag('home/dashboard.html')
def rss_extract(tag):
    rss = feedparser.parse(tag)       
    return {'rss': rss } 
```

获取与用户拥有的每个标签相关的 RSS（例如：[http](http://blog.myblog.com/tag/tag_name/feed/) ://blog.myblog.com/tag/tag_name/feed/ ）对象。并将提要返回到我的dashboard.html：

```
{% for tag in profile.tags.all|slice:':3' %}
    {% rss_extract http://blog.myblog.com/tag/{{ tag }}/feed/ %}
        {% for r in rss.entries|slice:':2' %}
        <li> <a href="{{ r.link }}" target="_blank" title="{{ r.title }}">{{ r.title }}</a></li>
    {% endfor %}
{% endfor %} 
```

错误：`Exception Value: rss_extract takes 1 arguments`

如何让链接正确进入包含标签？

提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T05:55:58.570

如果您更换它是否有效：

```
http://blog.myblog.com/tag/{{ tag }}/feed/ 
```

和：

```
http://blog.myblog.com/tag/somethingToTest/feed/ 
```

如果是，我想您需要在传递之前准备好 URL。此外，使用 {{ }} 在那里“显示”它是没有意义的。这意味着输出 HTML。

# php - PDO的Netbeans PHP自动完成？

> ID：15147535
> 
> 赞同：1
> 
> 时间：2013-02-28T23:14:25.343
> 
> 标签：php, netbeans, pdo, netbeans-7

有没有办法在 Netbeans 中为 PDO 设置自动完成功能？7.3版

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T23:20:10.977

如果您在 Netbeans 中安装了 PHP 插件...

![在此处输入图像描述](../Images/ce443517f4373a2478d1c3fc400930c1.png)

...那么它应该自动出现，但要明确一点：您不能自动完成语句中的 SQL，只能自动完成 PDO 命令。像这样...

![在此处输入图像描述](../Images/80f62e64b9986cc260a8906a46962188.png)

你是这个意思吗？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-28T23:34:19.690

[你对 Django 的回答](https://stackoverflow.com/questions/15147535/netbeans-php-autocomplete-for-pdo#comment21326722_15147599)的评论掉了一分钱。您需要为您的 IDE 提供类型提示

```
class Foo {
    /**
     * @var PDO
     */
    private $dbh; 
```

# android - 如何在 Nexus 7 上触发 MediaScan？

> ID：15147536
> 
> 赞同：6
> 
> 时间：2013-02-28T23:14:26.750
> 
> 标签：android, android-intent, android-broadcast, android-mediascanner

因为我想确保 MediaStore 拥有最新信息而无需重新启动我想使用我在 SO 上找到的流行方式触发 MediaScanner

```
context.sendBroadcast(new Intent(Intent.ACTION_MEDIA_MOUNTED,
                                 Uri.parse("file://" + Environment.getExternalStorageDirectory()))); 
```

这在我的三星 S2 w/ICS 上运行良好，但在我的 Nexus 7 w/JellyBean 上运行良好。Logcat 在我的 Nexus 7 上显示：

```
WARN/ActivityManager(480): Permission denied: checkComponentPermission() owningUid=10014
WARN/BroadcastQueue(480): Permission Denial: broadcasting Intent { act=android.intent.action.MEDIA_MOUNTED dat=file:///storage/emulated/0 flg=0x10 } from com.example.foo.bar (pid=17488, uid=10046) is not exported from uid 10014 due to receiver com.android.providers.downloads/.DownloadReceiver
INFO/ActivityManager(480): Start proc com.google.android.music:main for broadcast com.google.android.music/.store.MediaStoreImportService$Receiver: pid=17858 uid=10038 gids={50038, 3003, 1015, 1028}
INFO/MusicStore(17858): Database version: 50
INFO/MediaStoreImporter(17858): Update: incremental Added music: 0 Updated music: 0 Deleted music: 0 Created playlists: 0 Updated playlists: 0 Deleted playlists: 0 Inserted playlist items: 0 Deleted playlist items: 0 Removed orphaned playlist items: 0 
```

最后一行在理论上听起来令人鼓舞，但即使在新文件被推送到 SD 卡（通过 adb push）之后，这些值也始终为 0。在我的旧设备（S2）上，它确实重新安装了 SD 卡。

我在我的 AndroidManifest.xml 中添加了以下权限，但它的行为与没有这些权限时相同：

```
<uses-permission android:name="android.permission.MOUNT_UNMOUNT_FILESYSTEMS"/>
<uses-permission android:name="android.permission.READ_EXTERNAL_STORAGE"/>
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE"/> 
```

有什么想法/替代方案吗？

* * *

**编辑1：**

请注意，我不知道新文件或已修改或已删除文件的任何文件路径。我只是想确保 MediaStore 是最新的。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-05T22:50:10.580

这是基于 CommonsWare 答案的示例代码：

```
MediaScannerConnection.scanFile(activity, new String[]{path}, null,
                                new MediaScannerConnection.OnScanCompletedListener() {
    @Override
    public void onScanCompleted(final String path, final Uri uri) {
        Log.i(TAG, String.format("Scanned path %s -> URI = %s", path, uri.toString()));
    }
}); 
```

即使在大多数情况下，人们知道要添加/更新/等的文件。到 MediaStore，应该遵循 CommonsWare 的回答，我想将我的解决方案发布在我需要粗略的地方，因为我不知道文件路径。我主要将其用于测试/演示：

```
Uri uri = Uri.fromFile(Environment.getExternalStorageDirectory());
activity.sendBroadcast(new Intent(Intent.ACTION_MEDIA_MOUNTED, uri)); 
```

顺便说一句，这两种解决方案都不需要权限。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-03-01T02:41:53.873

> 使用我在 SO 上找到的流行方式

假`ACTION_MEDIA_MOUNTED`广播从来都不是一个合适的解决方案恕我直言。

> 有什么想法/替代方案吗？

[使用`MediaScannerConnection`](http://developer.android.com/reference/android/media/MediaScannerConnection.html)，比如通过[它的`scanFile()`静态方法](http://developer.android.com/reference/android/media/MediaScannerConnection.html#scanFile%28android.content.Context,%20java.lang.String%5B%5D,%20java.lang.String%5B%5D,%20android.media.MediaScannerConnection.OnScanCompletedListener%29)。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2014-08-02T20:25:53.613

我的回答有点晚了，但它可能会帮助那些保存新文件并希望仅通过 Android Kitkat 上的该文件来扩展媒体存储的人：在 Android Kitkat 上，意图 ACTION_MEDIA_MOUNTED 被非系统应用程序阻止（我想想，因为扫描整个文件系统非常昂贵）。但是仍然可以使用意图 ACTION_MEDIA_SCANNER_SCAN_FILE 将文件添加到媒体存储：

```
File f = new File(path to the file you would like to add to the media store ...);
try {
    Intent mediaScanIntent = new Intent(Intent.ACTION_MEDIA_SCANNER_SCAN_FILE);
    Uri uri = Uri.fromFile(f);
    mediaScanIntent.setData(uri);
    sendBroadcast(mediaScanIntent);
} catch(Exception e) {
    ... 
} 
```

# c++ - C++ 键值关系

> ID：15147541
> 
> 赞同：0
> 
> 时间：2013-02-28T23:15:06.183
> 
> 标签：c++

我想将 X、Y 和距离的组合存储在数据结构中。其中 X 和 Y 是整数。distance 是 X 和 Y 之间的距离。

哪个是在 c++ 中使用的最佳数据结构，以便我以后可以找到该组合是否存在于列表中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T23:18:22.173

您可能希望`std::set`用于存储。您需要/需要一个将坐标考虑在内的比较函数（距离直接来自它们，因此您实际上不需要比较它）。

编辑：基于涉及大量点的评论，`std::unordered_set`可能是更好的选择。它可能会做更多的工作，但允许插入和搜索的复杂性通常是不变的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-28T23:19:17.570

使用`std::unordered_set`适当的哈希值来实现。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-28T23:25:28.107

**编辑：**问题改变了，纬度/经度消失了，有些事情已经澄清。我重新开始：

您的问题似乎暗示距离计算不仅仅是一个简单的 std::abs(XY)，因为存储结果以加快速度根本没有意义。我假设你有一个计算它的昂贵函数，比方说：

```
int distance( int X, int Y ) { /* heavy stuff */ } 
```

现在你需要决定是否调用它，或者你是否已经这样做了，你可以重用结果。您需要一个容器来存储结果和一个函数来使用它：

```
typedef std::pair< int, int > key;
std::map< key, int > values;

int quick_distance( int X, int Y )
{
  const auto k = key(X,Y);
  const auto it = values.find(k);
  if( it != values.end() ) return it->second;
  const auto d = distance(X,Y);
  values[k] = d;
  return d;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-01T13:54:32.553

看看 std::pair，它们是为此目的而创建的，您可以在与这种数据结构相关的容器中使用改进。

[什么是标准对](https://stackoverflow.com/questions/97948/what-is-stdpair)

前段时间我使用数据对从微控制器的图形串行数据中写了一些东西，请查看[https://github.com/jpcordovae/GLRealTimeGraphics/blob/master/DataPair.hpp](https://github.com/jpcordovae/GLRealTimeGraphics/blob/master/DataPair.hpp)，也许它会对你有所帮助。

问候 ！

JP科尔多瓦E。

# .htaccess - htaccess rewritecond 和 rewrite 规则无法正常工作

> ID：15147542
> 
> 赞同：0
> 
> 时间：2013-02-28T23:15:16.173
> 
> 标签：.htaccess, mod-rewrite

我正在尝试`/admin`使用以下两行将所有调用重定向到子域`.htaccess`：

```
RewriteCond %{REQUEST_URI} ^admin [NC]
RewriteRule ^(.*)/$ http://admin\.somedomain\.com/$1/ [R,L] 
```

好吧，什么也没有发生。它只是忽略重定向规则并显示 /admin 目录的内容。

仅供参考（并跳过粘贴我的整个`.htaccess`文件的请求），这里是：

```
Options +FollowSymlinks -Indexes
RewriteEngine on

Redirect 404 /favicon.ico

RewriteCond %{REQUEST_URI} ^admin [NC]
RewriteRule ^(.*)/$ http://admin\.somedomain\.com/$1/ [R,L]

# Send all admin. traffic to /admin
RewriteCond %{HTTP_HOST} ^admin\. [NC]
RewriteRule ^(.*)$ /admin/$1 [L]

# Check for www. and add it
RewriteCond %{HTTP_HOST} !^www\. [NC]
RewriteCond %{HTTP_HOST} !^admin\. [NC]
RewriteRule ^(.*)$ http://www.%{HTTP_HOST}/$1 [R,L]

# Add trailing slash if not found
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !favicon.ico
RewriteCond %{REQUEST_URI} !(.*)/$
RewriteRule ^(.*)$ /$1/ [R,L]

# Process virtual links/directories
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !favicon.ico
RewriteRule ^(.*)$ index.php/?$1 [QSA,L] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T02:36:29.687

```
RewriteCond %(HTTP_HOST} !^admin\.somedomain\.com$
RewriteCond %{REQUEST_URI} ^/admin [NC]
RewriteRule ^(.*)$ http://admin.somedomain.com$1 [R,L] 
```

您在 RewriteCond 匹配中缺少前导斜杠。假设 admin.somedomain.com 可能与其他域具有相同的配置，我还添加了一个检查以确保如果域已经是 admin.somedomain.com，则不应用该规则。在 RewriteRule 中，我做了一些小的修改：你没有在右侧匹配，所以你不需要转义点。

您的剩余规则也存在一些问题。这不起作用，例如：

```
RewriteRule ^(.*)$ http://www.%{HTTP_HOST}/$1 
```

您不能在规则的那一侧使用服务器变量。

# python - Python 扭曲的客户端服务器接口

> ID：15147546
> 
> 赞同：1
> 
> 时间：2013-02-28T23:15:34.190
> 
> 标签：python, django, client-server, twisted

我正在设计一个 domotic 网络，它基本上包含一个主节点，该节点将充当托管 Web 服务器的前端，以及一堆客户端节点，如视频入口电话、灌溉控制、警报.. .

客户端节点将在前端注册自己，届时将能够控制其功能。我想在这个项目中使用 python，所以 twisted 和 django 将是两个主要框架。

让客户端与前端交互的最流畅的方式是什么？

客户自己可以提供网页，但我对这个解决方案并不满意，因为我想要一个单一的主 Web 服务器。

如果用户想要控制给定的客户端，那么前端延迟打开的轻型 Web 服务器（例如扭曲的 Web 服务器）是否可以成为这里的解决方案？

如何定义一些“公共” amp.Command 类，这些类可以由服务器调整以绘制客户端的特定 Web 界面？（一些客户业务需要这样在服务器端）

欢迎任何建议。

# facebook - 使用 Facebook 登录的移动应用程序 - 如何验证用户身份

> ID：15147554
> 
> 赞同：0
> 
> 时间：2013-02-28T23:16:25.483
> 
> 标签：facebook, mobile

这是对这个问题的一种跟进：[Android Facebook login and to web server](https://stackoverflow.com/questions/4663215/android-facebook-login-and-to-web-server)

想象一个移动应用程序被卸载然后重新安装，或者用户得到一部新手机并从头开始安装该应用程序。接下来，用户登录到 FB，应用程序会收到一个新的 FB `access_token`。

下一步是向后端发送一个“登录”HTTP 请求 - 但我们只有一个新的 FB 令牌，没有其他任何东西，因此后端无法立即知道它应该登录现有用户。

所以我是对的，后端必须在来自移动设备的每个“登录”请求上点击 FB API，因为它永远无法知道它是尝试注册的全新用户还是尝试登录的现有用户？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-11T07:01:05.893

您拥有持续 60 天的长期令牌 [https://developers.facebook.com/docs/facebook-login/access-tokens/](https://developers.facebook.com/docs/facebook-login/access-tokens/)

# ocl - 在 OCL 中查找嵌套重复项

> ID：15147560
> 
> 赞同：1
> 
> 时间：2013-02-28T23:17:01.703
> 
> 标签：ocl

在尝试检查 OCL 中的重复项时，我面临着挑战。

这是类图的简化：

```
 +-----------+
                                       |ChapterName|
                                       +-----------+
                                           ^ 0..* chapterNames
                                           |
                                           ^
                                           V
                 +-------+    books 0..* +----+
                 |Catalog|<>------------>|Book|
                 +-------+               +----+
      catalogs 0..* ^                       ^ 0..* books
                    |                       | 
                  +----+  customers 0..* +--------+
                  |Shop|<>-------------->|Customer|
                  +----+                 +--------+ 
```

每个类的属性声明如下：

*   章节名称
    *   姓名
*   目录
    *   类别

**问题：** 我要检查的是客户是否有任何章节名称重复的书籍，也属于目录中的特定类别。

我还没有设法绕开逻辑。到目前为止，我所拥有的是：

```
context Shop
self.customers.books->select(cubks | cubks =
  self.catalogs.books->select(cabks | cabks = cubks)->first()) 
```

...应该从客户拥有的目录中找到书籍。

**问题：**如何添加更多约束来解决上述问题？

还。我在 Eclipse 中使用 Eclipse、EMF 和 OCL 控制台。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T02:47:09.417

```
context Shop::checkForDuplicates(catalog:Catalog)
post: result = 
     self.customer.books->flatten()->select(book|
       catalog.books->contains(book)
     )->forEach(book|
       chapterNames->asSet()->size()=chapterNames->size()
     ) 
```

`customer`是一个`Set`；`books`是 a`Bag`或 a `Set`（取决于是否允许重复书籍，我假设它是 a `Bag`，尽管没关系）。然后`customer.books`是一袋书（每个顾客一个袋子），`customer.books->flatten()`是一袋顾客拥有的所有书籍。

`catalog.books`是 a`Bag`或 a `Set`（没关系）。该`select`操作仅返回给定中包含的那些书`catalog`（并且属于 some `Customer`，因为我们是从之前构建的包中选择的）。

`book.chapterNames`是一个`Sequence`（我假设关联是有序的）与那本书中的章节名称。对于集合中的每个元素（即对于给定目录中的每一本书，由客户拥有）`forAll`返回iff，主体评估为.`true``true`

现在的诀窍是依靠 operation `Sequence::asSet()`，它返回序列中的所有元素，并删除了重复项。然后，如果没有元素被删除（即如果每个元素都是唯一的），则包的大小等于集合的大小。

# c# - GameDev：引擎/图形 API/自定义？

> ID：15147565
> 
> 赞同：-1
> 
> 时间：2013-02-28T23:17:15.657
> 
> 标签：c#, .net, graphics, game-engine, game-physics

我想创建一个有平台的游戏，有不同的楼层。每个楼层都有一些可以与之交互的建筑物和对象，并且可以通过某种方式到达其上方和/或下方的楼层。

我需要：对象（模型）加载/渲染、输入、碰撞检测和拾取。我也想坚持使用 .NET 语言

我查找了许多引擎（包括 .NET 本地引擎或带有包装器的引擎），其中许多引擎具有我需要的这些功能，而且往往是我不想要也不需要的额外功能。

我已经将图形 API 视为 DirectX/OpenGL 和其他基于这些的图形 API，但是我需要自己编写碰撞检测和拾取函数，或者绑定到诸如 Newton Physics 或 PhysX 之类的东西。

*编辑：我也看过 XNA，但我看过/读过关于它的设计的混合评论。*

我还考虑过编写自己的函数或使用 3rd Party Libraires 来加载/渲染以及我自己编写的进一步的碰撞检测和选择。

从纯理论的角度来看，我想把这个项目作为一个教育项目来完成，但不是那么深入或费力，我最终把头发拉了出来，穿过了许多电脑屏幕。

我的编程知识是通过 VB -> C# 和一些 C 自学的。我可以做基本的面向对象的工作（属性、继承、多态），但对构造函数、访问器和解构以及我可能没有提到的其他特性一无所知。我拥有向量和碰撞检测所需的 A 级（英语系统/高级高级（苏格兰系统）数学知识和 GCSE（英语）/高级（苏格兰）物理知识。

所以我的问题是 - 什么是**最快、最具教育**意义的方式**，同时仍然有趣且不费力**地完成这个项目 - 使用引擎并通过自定义碰撞检测学习它们的功能/图形 API 或从头开始编写所有内容和/或使用第三个图书馆来帮助我？或者我什至是以错误的心态/方法来解决这个问题，我可以指出正确的方向吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T23:24:17.933

我建议[Unity3D](http://unity3d.com/)。您可以使用像样的设计师来构建游戏，它有很多工具（物理引擎、粒子系统、渲染等）。

您可以在 Javascript、C# 或 Boo 中编写您最喜欢的行为脚本。

您可以将您的游戏发布到安卓、IOS、PS3、XBOX、WII、PC、MAC、Web Player和Flash，基本版本是免费的。

如果您想坚持使用纯 .NET，请查看 XNA

编辑：为了增加您缺乏 OOP 技能，我认为您会发现统一更容易，因为您较少关注软件工程的东西，而是专注于编写对象行为的脚本。这很有趣，你会学到很多东西。也许你不会了解场景是如何在下面渲染的，但你会获得更多的编程经验，一旦你有了这些经验，你就可以开始探索低层次的东西......

# jquery - jQuery-Tokeninput 不显示来自 JSON 结果的结果

> ID：15147572
> 
> 赞同：0
> 
> 时间：2013-02-28T23:18:05.903
> 
> 标签：jquery, ruby-on-rails, ruby, jquery-tokeninput

**看法**

```
= text_field_tag :food_tokens 
```

**食品控制器**

```
def search
  @foods = Food.where("name LIKE ?" , "%#{params[:q]}%")
  respond_to do |format|
    format.json { render json: @foods.as_json(only: [:id, :name]) }
  end
end 
```

**路线**

```
match '/search' => 'foods#search' 
```

**应用程序.js**

```
$(function() {
  $('#food_tokens').tokenInput('/search.json', { crossDomain: false }
}); 
```

**/search.json 的输出**

```
[{"id":"5","name":"Apple"},{"id":"6","name":"Burger"}] 
```

当我开始在文本字段中输入“Apple”时，我收到“无结果”消息。

有什么见解吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T03:02:11.870

我认为问题在于您没有`.tokenInput`正确关闭该方法，应该是这样的：

```
$(function() {
  $('#food_tokens').tokenInput('/search.json', { crossDomain: false });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-15T10:10:15.513

I think it is because of the capital letter. I had a similar problem and I changed the code slightly. First, I changed `"name LIKE ?"` for `"name ILIKE ?"` following this SO question's [answer](https://stackoverflow.com/a/12453008/1799880). Secondly, I changed the line 797 of `jquery.tokeninput.js` from this

```
if(input_box.val().toLowerCase() === query) {
   populate_dropdown(query, settings.jsonContainer ? results[settings.jsonContainer] : results);
} 
```

to this

```
if(input_box.val() === query) {
  populate_dropdown(query, settings.jsonContainer ? results[settings.jsonContainer] : results);
} 
```

# tcp - AMQP 如何克服直接使用 TCP 的困难？

> ID：15147576
> 
> 赞同：7
> 
> 时间：2013-02-28T23:18:26.060
> 
> 标签：tcp, rabbitmq, messaging, publish-subscribe, amqp

AMQP如何克服发送消息时直接使用TCP的困难？或者更具体地说是在发布/订阅场景中？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-28T23:27:22.557

在 AMQP 中有一个代理，该代理接收消息，然后执行将它们路由到交换和队列的困难部分。您还可以设置持久队列，即使客户端断开连接，也可以为客户端保存消息。

您当然可以自己完成所有这些工作，但要正确完成这些工作量很大。尤其是 RabbitMQ，已经在许多部署中进行了实战测试。

您仍然在 AMQP 下使用 TCP 协议，AMQP 提供了更高的抽象。

您还必须选择与所有客户端一起使用的有线协议，其中 AMQP 已经定义了该有线协议。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2019-08-26T05:46:23.203

**它通过为所有线程**使用**一个相同`TCP`**的连接来提高性能来克服困难。`AMQP`能够通过使用来做到这一点`channels`。这些通道是“真实”`TCP`连接中的虚拟连接，它通过通道发出 AMQP 命令。

当每个线程启动时，它会在现有连接上创建一个通道，并获得自己的到代理的私有通信路径，而不会对您的操作系统`TCP`堆栈产生任何额外负载。

[![在此处输入图像描述](../Images/22fc432f25bcbef0961cfba1b6e1f6c2.png)](https://i.stack.imgur.com/F3H6m.png)

因此，您可以每秒创建数百或数千次通道，而您的操作系统不会看到任何信号。一个连接`AMQP`上可以拥有的频道数量没有限制。`TCP`把它想象成一束光缆。

资料书：[RabbitMq in Action](https://www.manning.com/books/rabbitmq-in-action)

# ios - 与他人共享/邀请 CoreData iCloud 文档

> ID：15147580
> 
> 赞同：0
> 
> 时间：2013-02-28T23:18:41.033
> 
> 标签：ios, core-data, icloud

通过将我的 coreData 文件同步到 iCloud，我可以发送指向该文件的链接或邀请朋友（拥有不同的 iCloud 帐户），以便我们可以通过应用程序共享该信息吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T23:19:38.320

不，你不能那样做。iCloud 不允许像 Dropbox 这样的直接文件共享链接。此外，您不应该直接同步 CoreData sqlite 文件。CoreData 有自己的 iCloud 同步机制，你不应该将它作为一个完整的文件同步。来自 Apple 的文档：

> 您不能简单地将现有数据库文件移动或复制到 iCloud。相反，您应该使用 NSPersistentStoreCoordinator 的 migratePersistentStore:toURL:options:withType:error: 方法将数据库迁移到所需位置。

[http://developer.apple.com/library/ios/#releasenotes/DataManagement/RN-iCloudCoreData/index.html](http://developer.apple.com/library/ios/#releasenotes/DataManagement/RN-iCloudCoreData/index.html)

# c++ - Matrix3x2F 上的累积翻译

> ID：15147582
> 
> 赞同：0
> 
> 时间：2013-02-28T23:18:42.013
> 
> 标签：c++, windows-runtime, direct2d

我正在开发一个使用 D2D 显示位图的 WinRT 应用程序。我希望结合多点触控来平移和缩放位图。

我正在使用 OnManipulatedUpdated 事件来更新累积转换。我找到了一种找到累积比例因子的方法，但似乎找不到累积平移因子（我不希望用户平移到缩放图像的大小之外。

有没有办法找出累积翻译是什么？

这是我的代码：

```
D2D1::Matrix3x2F m_mxTransform;

property float CurrentScaleFactor
    {
        float get() { return sqrt(fabs(m_mxTransform.Determinant())); }
    }

void OnManipulationUpdated(
_In_ Windows::UI::Input::GestureRecognizer^ recognizer,
_In_ Windows::UI::Input::ManipulationUpdatedEventArgs^ args)
{
Point position = args->Position;
Point positionDelta = args->Delta.Translation;

float currentScale = CurrentScaleFactor;
float preAdjustedScale = args->Delta.Scale;
ManipulationDelta adjustedDelta = LimitManipulationScale(args->Delta, currentScale);
float newScale = currentScale * adjustedDelta.Scale;

//Update the transformation to 
D2D1::Matrix3x2F transformDelta;
if (preAdjustedScale == adjustedDelta.Scale)
{
    transformDelta = 
        D2D1::Matrix3x2F::Scale(adjustedDelta.Scale, adjustedDelta.Scale, D2D1::Point2F(args->Position.X, args->Position.Y)) *
        D2D1::Matrix3x2F::Translation(args->Delta.Translation.X, args->Delta.Translation.Y);
}
else  // don't translate
{
    transformDelta = 
        D2D1::Matrix3x2F::Scale(adjustedDelta.Scale, adjustedDelta.Scale, D2D1::Point2F(args->Position.X, args->Position.Y));
}
m_mxTransform = m_mxTransform * transformDelta;

....
m_d2dContext->SetTransform(m_mxTransform);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T20:35:03.710

我想我找到了...

```
 /* x-coordinate that we are currently translated by */
    property float CurrentTranslationX
    {
        float get() { return m_mxTransform._31; }
    }

    /* y-coordinate that we are currently translated by */
    property float CurrentTranslationY
    {
        float get() { return m_mxTransform._32; }
    } 
```

# php - 将文件上传到运行 Selenium2 RC 的远程机器的 PHP Web 驱动程序方法？

> ID：15147589
> 
> 赞同：1
> 
> 时间：2013-02-28T23:19:23.440
> 
> 标签：php, selenium, selenium-webdriver, selenium-rc

我在机器上有一个独立的 selenium RC。当我运行测试时，我想将文件发送到那台机器进行上传。

目前，为了做到这一点，我有一个预定义的目录，我通过 rsync 将文件上传到。我的测试代码将文件同步到远程机器中的目录，然后使用 sendKeys() 将远程文件位置发送到 DOM 中的输入元素。

显然，这是不可扩展的，因为它没有以任何方式考虑机器操作系统等。独立 RC 是否支持 FTP 或使用 URL 中的文件作为 src 上传？还是我只在 Java Selenium2 webdriver（[本地文件检测器类](http://sauceio.com/index.php/2012/03/selenium-tips-uploading-files-in-remote-webdriver/)）中寻找的功能？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T16:47:26.217

[这或多或少是答案](https://stackoverflow.com/questions/10559728/uploading-files-remotely-on-selenium-webdriver-via-php)

现在的问题是需要从 ZIP 存档中提取文件。

**编辑 6/2/2013**：RC 自动提取 ZIP 存档的内容并在 JSON 响应中返回远程计算机上的文件路径。

有关的：

*   [php facebook webdriver 公关](https://github.com/behance/php-webdriver/compare/HEAD)
*   [phpunit硒公关](https://github.com/chr0n1x/phpunit-selenium/compare/HEAD)

# angularjs - 如何使用复选框在 angularjs 中创建相关对象的数组列表

> ID：15147594
> 
> 赞同：0
> 
> 时间：2013-02-28T23:19:40.710
> 
> 标签：angularjs

我有一个给定的对象数组，我想根据相关复选框将其对象添加到“选定”列表中。我怎么能设置它们而不必设置控制器太多。

这是使用单选框时可以正常工作的小提琴：http: [//jsfiddle.net/JohannesJo/6ru2R/](http://jsfiddle.net/JohannesJo/6ru2R/)

**JavaScript：**

```
app = angular.module('app',[]);

app.controller('controller', function($scope){
$scope.aData = [
    {i:1},
    {i:2}
];
$scope.aSelected = [];
}); 
```

**html:**

```
<body ng-app="app">
        <div ng-controller='controller'>
            <input type = "checkbox" ng-model = "aSelected"  value = "{{aData[0]}}">
            <input type = "checkbox" ng-model = "aSelected"  value = "{{aData[1]}}">

            <div>test:     {{oSelected}}</div>
         </div>
</body> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T23:53:05.953

一种选择是观察`oSelected`Array 上的变化并基于它创建相关对象的列表。

```
$scope.$watch(function () {
    return $scope.oSelected;
}, function (value) {
    $scope.selectedItems = [];
    angular.forEach($scope.oSelected, function (v, k) {
        v && $scope.selectedItems.push($scope.aData[k]);
    });
}, true); 
```

**jsfiddle**：http: [//jsfiddle.net/bmleite/zea7g/2/](http://jsfiddle.net/bmleite/zea7g/2/)

# ios - 在 prepareForSegue 完成之前调用 viewDidLoad

> ID：15147597
> 
> 赞同：29
> 
> 时间：2013-02-28T23:20:09.157
> 
> 标签：ios, storyboard, segue, viewdidload

我的印象是 viewDidLoad 将在 prepareForSegue 完成后被调用。这甚至是 Hegarty 教授他的斯坦福课程的方式（最近是 2013 年 2 月）。

然而，今天第一次，我注意到 viewDidLoad 在 prepareForSegue 完成之前被调用了。因此，我在 prepareForSegue 中设置的属性对目标 viewDidLoad 方法中的目标视图控制器不可用。

这似乎与预期的行为相反。

***更新***

我才弄清楚发生了什么事。在我的destinationViewController中，我有一个自定义设置器，每次更新“模型”时都会重新加载tableView：

```
DestinationViewController    
- (void)setManagedObjectsArray:(NSArray *)managedObjectsArray
    {
        _managedObjectsArray = [managedObjectsArray copy];
        [self.tableView reloadData];
    } 
```

事实证明，由于destinationViewController 是UITableViewController 的子类...调用'self.tableView' 会强制加载视图。根据 Apple 的文档，调用视图控制器的 view 属性可以强制加载视图。UITableViewController 的视图是 tableView。

[http://developer.apple.com/library/ios/#documentation/uikit/reference/UIViewController_Class/Reference/Reference.html](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIViewController_Class/Reference/Reference.html)

因此，在 prepareForSegue 中，以下行强制加载 destinationViewController 的视图：

```
vc.managedObjectsArray = <custom method that returns an array>; 
```

为了解决这个问题，我将destinationViewController 模型的自定义设置器更改为：

```
- (void)setManagedObjectsArray:(NSArray *)managedObjectsArray
    {
        _managedObjectsArray = [managedObjectsArray copy];
        if ([self isViewLoaded]) {
            [self.tableView reloadData];
        }
    } 
```

如果 tableView 在屏幕上，这只会重新加载 tableView。因此在 prepareForSegue 期间不会强制加载视图。

如果有人反对此过程，请分享您的想法。否则，我希望这可以防止某人度过一个漫长的不眠之夜。

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-08-07T15:57:21.563

过去我也遇到过类似的困惑。我学到的一般经验法则是：

1.  在目标 VC 的 viewDidLoad 之前调用 prepareForSegue
2.  viewDidLoad 仅在加载所有插座后调用
3.  不要试图在源 VC 的 prepareForSegue 中引用任何目标 VC 的出口。

关于 prepareForSegue 的另一个教训是避免冗余处理。例如，如果您已经通过情节提要将 tableView 单元格连接到 VC，如果您尝试同时处理 tableView:didSelectRowAtIndexPath 和 prepareForSegue，您可能会遇到类似的竞争条件。可以通过使用手动 segue 或放弃在 didSelectRowAtIndexPath 处的任何处理来避免这种情况。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2017-05-26T03:40:57.243

想我会在这里发生的事情添加一点解释：

`prepareForSegue`在视图显示之前调用

`viewDidload`第一次访问视图时调用（视图是延迟加载的）。

**可能发生的情况是您访问了`view`手动`prepareForSegue`触发视图加载的方法。**

通常流程是：

1.  `preformSegue`
2.  `prepareForSegue`
3.  `ViewController`被添加到层次结构中
4.  `viewDidLoad`.

但在你的情况下可能发生的是：

1.  `preformSegue`
2.  `prepareForSegue`
3.  |— 在`prepareForSegue`您访问`view`
4.  |—`view`自动加载 =>`viewDidLoad`被调用
5.  从返回`performSegue`
6.  ViewController 被添加到层次结构中，没有`viewDidLoad`（已经调用）

所以是的，通常在添加到层次结构`view`之前不会访问该属性`ViewController`，但如果是，`viewDidLoad`可以更早地触发。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-05-28T12:37:09.603

感谢分享，帮我解决了问题。

在我的例子中，destinationViewController 是一个 UITabBarController 并且修改它的 viewControllers 数组触发了 viewDidLoad：

```
- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender
{
    UITabBarController *tabBarController = segue.destinationViewController;
    tabBarController.viewControllers = ...
    tabBarController.something = something;
} 
```

在 viewDidLoad 我需要设置*something*属性，所以我不得不向上移动它：

```
- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender
{
    UITabBarController *tabBarController = segue.destinationViewController;
    tabBarController.something = something;
     tabBarController.viewControllers = ...
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-08-17T02:24:57.387

简单的解决方案是放置

```
[self.tableView reloadData]; 
```

在`viewWillAppear`：

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-11-20T09:52:35.903

我的动态单元格有一个类似的问题，它在选择时显示模式。`prepareForSegue`之前被处决`didSelect:atIndexPath`。对我有帮助的是，在情节提要中，我将 segue 重新分配为从控制器而不是动态单元原型开始。我解决了比赛条件（？），一切正常！

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-06-07T14:03:47.400

在我的情况下，在 prepareSegue 中设置目标演示控制器的委托会导致调用 viewDidLoad。我将 segue.destination.presentationController?.delegate = self 移动到 prepareSegue 的末尾：

```
 override func prepare(for segue: UIStoryboardSegue, sender: Any?)     {
    // do stuff ....
    segue.destination.presentationController?.delegate = self
     } 
```

# c# - 如何将控制位置更改为位于屏幕中央？

> ID：15147601
> 
> 赞同：0
> 
> 时间：2013-02-28T23:20:18.730
> 
> 标签：c#

我不想更改屏幕分辨率。当我将鼠标移动到它正在执行的控制区域上时，我的 Form1 设计器中有一个用户控件：

```
private void graphChart1_MouseEnter(object sender, EventArgs e)
{
   graphChart1.ChangeChartSize(600, 600);
   graphChart1.ChangeChartLocation(0, 0);
}

public void ChangeChartSize(int width, int height)
{
   this.Size = new Size(width, height);
   chart1.Size = new Size(width, height); 
   chart1.Invalidate();
}

public void ChangeChartLocation(int x, int y)
{
   this.Location = new Point(x, y);
} 
```

但是现在位置是 0,0 我希望即使控件大小会比窗体大也没关系我希望控件将其位置更改为屏幕中心或窗体中心（因为表格已经在中心）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-28T23:25:52.660

将图表移动到此位置：

```
x = (formWidth - chartWidth) / 2;
y = (formHeight - chartHeight) / 2; 
```

# file-upload - 更新 selectOneMenu 的项目

> ID：15147604
> 
> 赞同：-1
> 
> 时间：2013-02-28T23:20:45.840
> 
> 标签：file-upload, jsf-2, primefaces, selectonemenu

我正在尝试在上传文件后更新 selectOneMenu 的项目。为此，我在文件上传侦听器中加载选择项，并在 fileUpload 组件的更新属性中设置 selectOneMenu 的 id，但文件上传侦听器甚至没有被调用。

我已经在我上传的一个小项目中重现了错误[http://www.filedropper.com/file-upload](http://www.filedropper.com/file-upload)

我在 JBoss AS7.1.3 上使用 PrimeFaces 3.5

我找不到我缺少的东西。有任何想法吗？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T14:57:38.113

这是生成的 web.xml，包括解决我的问题的缺失面 servlet 声明和映射。

```
<web-app version="2.5" xmlns="http://java.sun.com/xml/ns/javaee" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation=" http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd">

    <description>File Upload</description>

    <!-- This was missing -->
    <servlet>
        <servlet-name>Faces Servlet</servlet-name>
        <servlet-class>javax.faces.webapp.FacesServlet</servlet-class>
        <load-on-startup>1</load-on-startup>
    </servlet>

    <servlet-mapping>
        <servlet-name>Faces Servlet</servlet-name>
        <url-pattern>*.jsf</url-pattern>
    </servlet-mapping>

    <!-- File upload -->
    <filter>
        <filter-name>PrimeFaces FileUpload Filter</filter-name>
        <filter-class>org.primefaces.webapp.filter.FileUploadFilter</filter-class>
    </filter>   
    <filter-mapping>
        <filter-name>PrimeFaces FileUpload Filter</filter-name> 
        <servlet-name>Faces Servlet</servlet-name> 
    </filter-mapping>

    <context-param>
        <param-name>javax.faces.PROJECT_STAGE</param-name>   
        <param-value>Development</param-value>
    </context-param>

    <context-param>
        <param-name>primefaces.THEME</param-name>
        <param-value>glass-x</param-value>
    </context-param>

</web-app> 
```

# user-interface - 如何从 masterRow 获取字段值

> ID：15147606
> 
> 赞同：2
> 
> 时间：2013-02-28T23:21:05.013
> 
> 标签：user-interface, kendo-ui

在 detailExpand 事件中获取 e.masterRow 后，如何从 Kendo UI Grid 中的 masterRow 获取字段值？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-01T14:28:43.833

您应该使用[dataItem](http://docs.kendoui.com/api/web/grid#dataitem)方法，该方法将返回该行绑定到的数据项：

```
var masterDataItem = masterGrid.dataItem(e.masterRow);

console.log(masterDataItem.field1); 
```

# twitter-bootstrap - 转换为现有 Web 应用程序的引导程序

> ID：15147608
> 
> 赞同：6
> 
> 时间：2013-02-28T23:21:08.223
> 
> 标签：twitter-bootstrap

我一直在考虑将使用自定义设计的 css 且没有样式指南的现有 Web 应用程序转换为使用引导程序。Web 应用程序使用模板系统，让我可以轻松创建使用引导程序的原型模板。但是，站点的许多页面在使用引导模板时会出现 css 冲突。对于已经成功在您的应用程序中实施引导程序的任何人，您是如何做到的？

我想在几个月的时间内通过增量集成和部署将引导模板慢慢集成到站点中。这是合理的还是您发现它需要“全有或全无”的方法？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-28T23:30:36.700

Twitter 引导现有网站需要您执行以下操作：

1.  将 HTML 更改为 bootstrap 的 css 需要的结构
2.  添加引导 CSS 文件（以及 JS 文件）
3.  删除大部分自定义 CSS（只留下非常具体的 CSS 定义）

如果您擅长操纵 boostrap 使其看起来像您的旧设计，则它不需要全有或全无的方法，否则，是的，您应该在将其投入生产之前完成大部分工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-01-15T11:01:27.660

我使用带有本地覆盖的 Twitter Bootstrap 基础。

在这篇[Smashing Magazine 文章](https://www.smashingmagazine.com/2013/03/customizing-bootstrap/)之后，我使用了[Bootstrap 3 的自定义 LESS 实现，](http://getbootstrap.com/getting-started/#grunt)以尽可能匹配现有样式。这允许轻松升级 Bootstrap，同时保持您的自定义。所以我已经得到了所有的基础等匹配。`font-size``border-radius`

我保留了我的旧样式表，它仍然会覆盖所有内容以尽可能完美地匹配旧站点，因为我去解决冲突。

最大的问题是确保网格匹配。

随着时间的推移，我删除了旧样式表的部分，只留下了定制的 Bootstrap。

# php - 检查服务 fsockopen()

> ID：15147614
> 
> 赞同：1
> 
> 时间：2013-02-28T23:21:38.677
> 
> 标签：php, fsockopen

我正在尝试检查端口 9998 上的服务。为此，我正在使用**fsockopen()**函数。

像这样：

```
$host = "1.1.1.1";
$port = "9998";
$checkconn = fsockopen($host, $port, $errno, $errstr, 1);
if($checkconn >= 1){
echo 'ok';
} else {
echo "$errstr";
} 
```

它总是返回**"Connection Timed Out - 110"**，但是端口是打开的，并且那里正在运行服务。

如果我更改端口（如 80），它返回成功，但为什么不能在 9998 端口上？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T05:33:46.737

1 秒的连接超时不是很长。即使主机/端口有效，网络延迟也足以触发它。我建议至少使用 2.5 - 5 秒。

此外，您应该检查 for 的结果，`fsockopen()`而`FALSE`不是`< 1`知道它何时失败。

尝试这个：

```
$host = "1.1.1.1";
$port = "9998";
$checkconn = fsockopen($host, $port, $errno, $errstr, 5);
if(!$checkconn){
    echo "($errno) $errstr";
} else {
    echo 'ok';
} 
```

# iphone - iPhone 应用程序大小兼容性

> ID：15147615
> 
> 赞同：0
> 
> 时间：2013-02-28T23:21:40.287
> 
> 标签：iphone, ios6, xcode4.6

我正在制作一个 iPhone 应用程序，并且我在大部分 UI 中使用故事板。我正在为 iOS 6 使用 xCode 4.6。

**有没有办法让应用程序同时适用于 iphone4 尺寸和 iphone5 尺寸？**

当我在 iPhone 4 模拟器上运行该应用程序时，它看起来不像它应该的那样 - UI 元素看起来不像它们在情节提要上所做的那样（我假设它使用 iPhone5 尺寸）。

如果您需要更多信息，请告诉我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T23:26:42.167

您可以动态访问视图和设备的高度，然后根据这些值进行调整。或者，您可以使用 iOS 6 的约束在设备底部或其他元素之间设置边距。

要实现前者，只需访问视图的高度属性：

```
CGFloat height = [[self view] frame].size.height; 
```

您还可以像这样获取设备屏幕的高度：

```
CGFloat deviceHeight = [[UIScreen mainScreen] bounds].size.height;
deviceHeight -= 20; // remove the tab bar
deviceHeight -= 44; // remove height for a navigation bar? 
```

现在想象一下根据这个值调整视图的原点。无论您在哪个设备上，都可以让它紧贴设备底部。

```
[aView setFrame:CGRectMake(10, deviceHeight - 10 - 100, 300, 100)]; 
```

如果您无法调整元素的布局，请考虑使用滚动视图。只需使用上述技术设置框架，然后设置内容大小。在较小的设备上，您将能够滚动查看更多内容，而在较大的设备上，一切都在那里。

# ios - 从 NSArray，KVC 获取最大日期

> ID：15147617
> 
> 赞同：4
> 
> 时间：2013-02-28T23:22:11.750
> 
> 标签：ios, objective-c, cocoa-touch, nsdate, key-value-coding

我有一个 NSDate 数组，我想从数组中获取最大的 NSDate。虽然我总是可以对它们进行排序并抓住第一个/最后一个，但有没有办法使用 KeyValueCoding 或其他一些快速的单线方式来做到这一点？我知道如果对象具有日期属性，我可以使用类似 valueForKeyPath@"@max.date" 的东西，但是如果对象本身就是日期呢？

谢谢

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-01T00:32:25.377

您可以使用，

```
NSDate *maxDate = [dateArray valueForKeyPath:@"@max.self"]; 
```

这将为您提供数组中的最大日期。在执行此操作之前，您不必对数组进行排序。

从[文档](http://developer.apple.com/library/ios/#documentation/cocoa/conceptual/KeyValueCoding/Articles/CollectionOperators.html)中，

> @max 运算符比较运算符右侧的键路径指定的属性的值，并返回找到的最大值。最大值是使用指定键路径上对象的 compare: 方法确定的。比较的属性对象必须支持相互比较。如果键路径右侧的值为 nil，则忽略它。

请注意，@max 会这样做`compare:`，然后会找出最大值。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-01T00:21:02.150

同意@SeanDanzeiser。更具体地说，这是一个约 70 字节的单行代码：

```
// if dateArray is the array of dates ...
NSDate *maxDate = [[dateArray sortedArrayUsingSelector:@selector(compare:)] lastObject]; 
```

# ruby - DataMapper - 使用匿名资源为多对多关系设置存储库

> ID：15147621
> 
> 赞同：0
> 
> 时间：2013-02-28T23:22:20.170
> 
> 标签：ruby, ruby-datamapper

我正在尝试使用 DataMapper 迁移旧数据库，但我遇到了多对多关系的问题。

我有一个`Post`和`Tag`模型都通过匿名资源。我可以在帖子和标签模型中设置存储库名称，但不能在自动生成的`PostTag`模型中设置（据我所知）。有没有办法让它们都使用相同的存储库名称（`:legacy`）？

干杯，
汤姆

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T12:27:13.533

您可以为“中间”资源创建一个普通的 DM 模型，以便能够定义存储库名称，例如

```
model PostTag
  include DataMapper::Resource
  def self.default_repository_name; :legacy end
  belongs_to :post, :key => true
  belongs_to :tag, :key => true
end 
```

并在这两个父母中，定义与 a 的联系`:through`。例如，

```
model Post
  # other definitions ...
  has n, :post_tags
  has n, :tags, :through => :post_tags
end 
```

# php - URL编码不起作用

> ID：15147622
> 
> 赞同：1
> 
> 时间：2013-02-28T23:22:28.053
> 
> 标签：php, html, parsing, variables, encode

$words 变量是西班牙语单词，我的页面从 www.rae.es 中查找它们的含义。一些西班牙语单词有重音（á é ú í ó）。如果用户输入“baúl”，它不会识别它。我知道我应该使用函数 url_encode($words) 将其编码为“ ba%FAl ”（有效），但它不起作用。以下是大部分 PHP 代码：

```
 <?php

    // create an array of requests that we want
    // to load in the url.
    $words = array('word','word0','word1','word2','word3','word4','word5');

    function url_encode($string){
    return urlencode(utf8_encode($string));
    }

    // we'll use this later on for loading the files.
    $baseUrl = 'http://lema.rae.es/drae/srv/search?val=';

    // string to replace in the head.
    $cssReplace = <<<EOT

    <style type="text/css">
    //bla bla bla
    </style>
    </head>
    EOT;

    // string to remove in the document.
    $spanRemove = '<span class="f"><b>.</b></span>';
    $styleRemove = 

    // use for printing out the result ID.
    $resultIndex = 0;

    // loop through the words we defined above
    // load the respective file, and print it out.
    foreach($words as $word) {
    // check if the request with
    // the given word exists. If not,
    // continue to the next word
    if(!isset($_REQUEST[$word]))
    continue;

    // load the contents of the base url and requested word.
    $contents = file_get_contents($baseUrl . $_REQUEST[$word]);

    // replace the data defined above.
    $contents = str_replace('</head>', $cssReplace, $contents);
    $contents = str_replace($spanRemove,"", $contents);

    // print out the result with the result index.
    // ++$resultIndex simply returns the value of 
    // $resultIndex after adding one to it.
    echo '<div id="result" style="
      margin-top:-80px;
      overflow:scroll; 
      width:800px; 
      height:150px;
      border: 1px solid #000000;
      border-radius: 15px;
      background-opacity: 0.5;
      background: #047C8F;
      -webkit-border-radius: 15px;
      -moz-border-radius: 15px;
      box-shadow: inset 0px 3px 13px #000000;
      -moz-box-shadow:
                   0px 3px 13px rgba(000,000,000,0.5),
                   inset 0px 0px 13px rgba(0,0,0,1);
      -webkit-box-shadow:
                   0px 3px 13px rgba(000,000,000,0.5),
                   inset 0px 0px 13px rgba(0,0,0,1);
     ', (++$resultIndex) ,'">', $contents ,
        '</div>',
        '<br/>',
        '<br/>',
        '<br/>',
        '<br/>',
        '<br/>';
        }
        ?> 
```

**关注样式替换上面的代码**

谢谢！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T23:25:14.197

你必须调用 url_encode ...

改变这个

```
$contents = file_get_contents($baseUrl . $_REQUEST[$word]); 
```

进入这个

```
$contents = file_get_contents($baseUrl . url_encode($_REQUEST[$word])); 
```

# php - PHP 只提供代码

> ID：15147627
> 
> 赞同：-1
> 
> 时间：2013-02-28T23:22:55.040
> 
> 标签：php, configuration

老实说，我不确定这里到底发生了什么。我正在自学php，我想我终于让服务器正常工作了，但现在我有更多问题。当我插入代码时，我应该得到一个输出。在这种情况下，它应该只显示“hello world”。相反，我真的得到了这个：

```
<?php
echo "hello world";
?> 
```

我很确定这不应该发生。如果我输入 HTML 代码，它会做同样的事情，但也可以使用 html 代码。聊天室里有人提到我可能有一个 php 配置问题，但是在按照另一组在线说明后，我似乎没有错。

我正在使用带有板载 apache 服务器的 OSX 10.7，并且正在 Google Chrome 中进行测试。此外，我必须有关于如何在终端中做某事的非常具体的说明，因为我也很少接受正式的计算机培训，因此不知道我在做什么。

编辑：原来我的文件不允许我访问它们。一位朋友向我展示了如何更改文件，以便我可以正确查看它们。这是一个晦涩难懂的问题，需要一个有些晦涩难懂的解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T23:43:14.140

在我的 Apache for windows 中，我有

```
LoadModule php5_module "C:/Program Files/PHP/php5apache2_2.dll"
PHPIniDir "C:/Program Files/PHP"
AddType text/html .php .phps
AddHandler application/x-httpd-php .php
<FilesMatch \.php$>
  SetHandler application/x-httpd-php
</FilesMatch> 
```

在任何其他系统上，除了文件路径外，它应该看起来相似。

看看 Nab Raj 写了什么。完成后可能需要重新启动服务器。这些行是对 Apache 说，它将提供扩展名为 .php 的 PHP 文件

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T23:25:35.690

试试这个[页面](http://akrabat.com/php/setting-up-php-mysql-on-os-x-10-7-lion/)。默认情况下，Lion 中的 Apache 没有启用 PHP，因此您需要更改配置才能使用它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-28T23:27:15.220

看起来，PHP 没有启用！

打开终端并输入！

```
sudo nano /etc/apache2/httpd.conf 
```

去掉'#'之前（你可以使用搜索）

```
LoadModule php5_module libexec/apache2/libphp5.so 
```

保存 conf 文件，您应该拥有它！

# sharepoint-2010 - 无法在 sharepoint 2010 中添加另一个子站点链接到全局导航？

> ID：15147632
> 
> 赞同：0
> 
> 时间：2013-02-28T23:23:13.263
> 
> 标签：sharepoint-2010

无法在 sharepoint 2010 中添加另一个子站点链接到全局导航，不知何故被锁定，有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T22:21:19.777

它必须是团队网站模板:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-05T22:03:07.863

您是全局管理员，是团队站点吗？

# javascript - 条形图第 1 部分 D3 为什么它会跳过相同值的数据？

> ID：15147634
> 
> 赞同：0
> 
> 时间：2013-02-28T23:23:48.487
> 
> 标签：javascript, d3.js

不知道为什么，但我的代码......这也非常紧跟 D3 Bar graph .js 教程在这里找到：http: [//mbostock.github.com/d3/tutorial/bar-1.html](http://mbostock.github.com/d3/tutorial/bar-1.html)

不为变量“数据集”中具有相同值的数据绘制矩形。谁能解释为什么？或如何解决？

```
var dataset = [5, 2, 1, 1, 1, 50] ;

var w = setWidthToWindow();  //setWidthToWindow
var h = setHeightToWindow();  //setHeightToWindow
var x = d3.scale.linear()
      .domain([0, d3.max(dataset)])
      .range([0, w/2]);

var y = d3.scale.ordinal()
      .domain(dataset)
      .rangeBands([0, 120]);

var chart = d3.select("#over_rating")
          .append("svg")
          .attr("class", "chart")
          .attr("width", w)
          .attr("height", 20 * dataset.length);

chart.selectAll("rect")
     .data(dataset)
    .enter().append("rect")
     .attr("y", y)
     .attr("width", x )
     .attr("height", y.rangeBand());

chart.selectAll("text")
     .data(dataset)
    .enter().append("text")
     .attr("x", w/2 + 15)
     .attr("y", function(d) { return y(d) + y.rangeBand() / 2; })
     .attr("dx", 3) // padding-right
     .attr("dy", ".35em") // vertical-align: middle
     .attr("text-anchor", "end") // text-align: right
     .text(String); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T01:12:31.257

您正在使用序数比例并根据数据*值*而不是索引定位条形，因此所有值为 '1' 的数据都会缩放到完全相同的位置。如果您查看您的 svg，您会看到在完全相同的位置绘制了三个条形图。

我想您可以使用索引值设置比例：

```
var y = d3.scale.ordinal()
      .domain(d3.range(dataset.length))
      .rangeBands([0, 120]); 
```

然后按索引缩放：

```
 .attr("y", function(d,i) { return y(i); }) 
```

这将允许您添加更多数据并调整条形的宽度以适应它。

[http://jsfiddle.net/findango/nfdST/](http://jsfiddle.net/findango/nfdST/)

# android - 在我的 Android 应用程序中使用“强制停止”时出现问题。在手机中凝视应用程序与通过 Eclipse 启动有何不同？

> ID：15147637
> 
> 赞同：0
> 
> 时间：2013-02-28T23:23:52.993
> 
> 标签：android, eclipse, sharedpreferences

我希望获得一些关于通过 Eclipse 在 Android 手机上加载和启动应用程序之间差异的一般提示，并在强制停止应用程序后简单地单击应用程序。这是情况。

我有一个与源代码一起继承的应用程序。当我通过“调试为...”或“运行为...”从 Eclipse 构建和传输代码时，一切正常。今天，我决定尝试对应用程序执行强制停止。停了。当我双击它时，很明显一切都不好。我仍在调查，但看起来 SharedPreferences 可能还有其他事情搞砸了。我的问题真的是这个。通过 Eclipse 下载有什么作用，而只是从设备本身启动不做呢？有没有办法像 Eclipse 一样复制“干净的开始”？我在强制停止所在的同一菜单中尝试了“清除数据”和“清除缓存”。

我意识到这是一个广泛的问题。我希望有人可能会说“啊哈！” 让我进行更多研究的想法。

谢谢，戴夫

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T18:08:04.033

Arrghh....这个问题以前让我绊倒过。整个问题是我引入了这一行：

```
android.os.Debug.waitForDebugger(); 
```

以便调试应用程序正在使用的服务。那就是我有：

```
@Override
public IBinder onBind(Intent intent) {
    android.os.Debug.waitForDebugger();
    ComponentName name = intent.getComponent();
    String packageName = name.getPackageName();
    return mMessenger.getBinder();
} 
```

据我所知，如果不这样做，就无法调试服务的早期设置部分。无论如何，当然，当您只是强制停止手机上的应用程序并启动它时，它会在此时挂起（waitForDebugger）。如果您是从 Eclipse 运行，那么调试器就在那里，没有问题！感谢所有看过和/或评论过这个问题的人。

# java - 导致 java:240 的 switch 语句（可能尚未初始化）

> ID：15147639
> 
> 赞同：0
> 
> 时间：2013-02-28T23:23:59.590
> 
> 标签：java, switch-statement, default

我正在尝试根据输入将值存储在变量中：

```
switch(pepperoni) {

    case 'Y':
    case 'y':
        topping1 = 1;
        break;

    case 'N':
    case 'n':   
        topping1 = 0;
        break;

    default: 

        {
    System.out.print("This is not a valid response, please try again \n");  
    System.out.print("Do you want Pepperoni? (Y/N): ");
    pepperoni = scan.next().charAt(0);
        break;
    } 
```

如果输入是“Y”或“y”，我希望变量*topping1*存储值 1，如果输入是“N”或“n”，我希望变量存储值 0

如果输入既不是“Y”、“y”、“N”也不是“n”，那么我希望它重复这个问题，直到输入有效的输入。

当我稍后在程序中尝试打印值“因为它可能尚未初始化”时，就会出现问题，这在某种程度上是有道理的。（下面的例子）

```
if(topping1 > 0)
    System.out.println("Pepperoni"); 

// 243: error: variable topping1 might not have been initialized 
```

我确实意识到还有其他方法可以做到这一点，但是因为我真的很想学习 Java，所以我会尽可能多地了解基础知识。因此，如果有人能告诉我为什么这不起作用以及是否有办法通过 switch 语句或快速修复来做到这一点，我会非常高兴。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T23:37:03.777

问题可能是 switch 语句不保证为 topping1 设置值。如果您收到“L”的响应，则不会将其设置为 1 或 0。您应该在初始化 topping1 时设置默认值或在默认子句中设置一个。

Java 的编译器无法分析您的代码以知道在设置之前您不会让人们退出循环（我认为这是其中的）。它只能说有一条通过代码的路径允许它不被设置。

这有效（开关也是如此）：

```
int a;
if (condition()) {
  a=0;
} else {
  a=1;
}
System.out.println(a); 
```

这有效：

```
int a=1;
if (condition()) {
  a=0;
} 
System.out.println(a); 
```

这不会：

```
int a;
if (condition()) {
  a=0;
} 
System.out.println(a); // compiler error! 
```

因为如果条件（）返回假，`a`是未定义的。必须定义局部变量。请注意，这与自动分配默认值 null、0 或 false 的类上的字段不同。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T23:46:22.593

这看起来有点难看，但是像这样编写循环是阻止编译器抱怨的一种方法：

```
for (;;) {
    System.out.print("Do you want Pepperoni? (Y/N): ");
    pepperoni = scan.next().charAt(0);
    switch (pepperoni) {

        case 'Y':
        case 'y':
            topping1 = 1;
            break;

        case 'N':
        case 'n':   
            topping1 = 0;
            break;

        default: 
            System.out.println("This is not a valid response, please try again");
            continue;
    }
    break;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-28T23:32:05.270

If `pepperoni`is not `Y`, `y`, `N`, or `n`，你永远不会给 赋值`topping1`，因为`default`case 永远不会给它赋值。例如，如果`pepperoni`不是这四个值之一，则控制流会跳过其他两种情况并转到`default`，它永远不会给出`topping1`值，因此稍后当您尝试使用它时，可能`topping1`根本没有收到值。

“解决方法”是更正逻辑，以便您在没有为其`topping1`分配值的情况下永远不会尝试使用。*你如何*做到这一点取决于你没有向我们展示的逻辑。例如，您可以为它分配除`0`or以外`1`的值（您在 的其他分支中分配的值`switch`）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-28T23:34:29.207

您收到“可能尚未初始化”错误，因为您的 switch 语句中有一条路径，您没有在其中进行初始化`topping1`，并且稍后您引用了该变量。

您可以做什么：初始化`topping1`为无效值（例如，-1）。然后将您的 case 语句放在一个`while`循环中，以检查 的值`topping1`是否仍等于 -1。

然后，一旦您退出 while 循环，您就会知道以下情况是正确的：

1.  您已初始化`topping1`，因此不会导致编译器错误。
2.  你有一个有效的值`topping1`。

# mongodb - 使用 MongoDB，如何在 $unwind 之前将混合的单个/数组值转换为数组？

> ID：15147642
> 
> 赞同：1
> 
> 时间：2013-02-28T23:24:19.507
> 
> 标签：mongodb, aggregation-framework

假设我在集合中有以下行

```
{id: 1, value: 1},
{id: 2, value: [2, 3]},
{id: 3, value: 2} 
```

如果我想对字段'value'的整个集合进行聚合，我如何保证'value'字段在发送到管道中的$unwind操作之前始终是一个数组？（肯定不会重建整个集合）

如果需要，请要求澄清

# bash - bash 带行匹配通配符

> ID：15147648
> 
> 赞同：1
> 
> 时间：2013-02-28T23:24:47.673
> 
> 标签：bash, shell, sed, grep

```
sed -i -e "/^*google.com*/d" activedomains.txt 
```

我想要做的是剥离任何包含 * google.com * 它需要是前后通配符的行，似乎无法弄清楚：/

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-28T23:27:15.747

`sed`使用正则表达式，而不是通配符（尽管可能有一些东西）。不过很容易改变：

```
sed -i '/google\.com/d' activedomains.txt 
```

这将删除任何*匹配* `google.com`的行。你也可以使用

```
sed -i -e '/^.*google.com.*/d' activedomains.txt 
```

...这与您所做的更加一致，字面意思是“字符串的开头，然后是零个或多个任何字符，然后是'google（任何字符之一）com'，然后是零个或多个任何字符。” 当然，既然它被“零或更多”包围，那么直接匹配它也是一样的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T23:27:08.230

你是这个意思吗？

```
sed -i -e "/google\.com/d" activedomains.txt 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-28T23:27:36.550

这应该有效：

```
sed -i -e "/google.com/d" activedomains.txt 
```

这里不需要通配符：它就像一个`grep`

# python - 根据可用的库执行代码

> ID：15147649
> 
> 赞同：2
> 
> 时间：2013-02-28T23:24:49.293
> 
> 标签：python

假设我有一个功能：

```
 def mean(data):
     return sum(data)/len(data) 
```

现在，如果在系统上你有 numpy 最好将它定义为：

```
def man(data):
     return np.mean(data) 
```

如果您有高级库作为[numexpr](http://code.google.com/p/numexpr/)最好这样做：

```
def mean(data):
     return ne.evaluate("sum(data)") / len(data) 
```

现在...我想使用以前的一个，这取决于一个库是否可用。在 python 中做的更好的方法是什么？例如，在 c/c++ 中，我会使用类似的宏

```
#ifdef HAS_NUMPY
...
#elseif HAS_NUMEXPRE
... 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-28T23:27:02.643

```
try:
   import numpy as np
   HAS_NUMPY = True
except ImportError:
   HAS_NUMPY = False

try:
   import numexpr as ne
   HAS_NUMEXPR = True
except ImportError:
   HAS_NUMEXPR = False

if HAS_NUMPY:
    mean = np.mean
elif HAS_NUMEXPR:
    def mean(data):
        return ne.evaluate("sum(data)") / len(data)
else:
    def mean(data):
        return sum(data)/len(data) 
```

# sql - auto_increment 的标准化方式

> ID：15147651
> 
> 赞同：5
> 
> 时间：2013-02-28T23:24:50.437
> 
> 标签：sql, standards

有没有一种标准化的方法可以在 SQL 中创建一个带有自动增量列（我们称之为 ID）的表，以便我基本上可以在所有数据库中使用它？

（例如在 SQL-92 中标准化）如果是这样 - 怎么样？如果不是，为什么？我认为 auto_increment 是一个非常常用的属性，所以我认为标准化它非常重要......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T23:30:54.313

不，谢谢。MySQL 中有 AUTO_INCREMENT，但例如在 MS SQL 中，这称为 IDENTITY。许多东西在 SQL 中并没有真正标准化——大多数都在模式创建区域。

这是一团糟，但是您可以使用诸如 Hibernate/NHibernate 之类的东西来尝试使用单个代码库。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-04-27T09:37:23.840

您可以使用所谓的*身份列*：

```
CREATE TABLE foo(id int GENERATED ALWAYS AS IDENTITY); 
```

这在 SQL 标准中，应该被 PostgreSQL 10 和 Oracle 支持：

[https://www.2ndquadrant.com/en/blog/postgresql-10-identity-columns/#comment-248607](https://www.2ndquadrant.com/en/blog/postgresql-10-identity-columns/#comment-248607)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-11-25T21:42:30.273

在 Oracle 中，您需要创建一个 SEQUENCE

SQLite 将它用于 rowid 和它的同义词，例如 RowIdSyn INTEGER PRIMARY KEY AUTOINCREMENT

# windows - Ogre 和 Allegro direct3d 设备 9 冲突

> ID：15147658
> 
> 赞同：1
> 
> 时间：2013-02-28T23:25:33.320
> 
> 标签：windows, direct3d, ogre, allegro

我一直在尝试编写一个程序，它使用 Allegro 5 来处理 2D 渲染和使用 Ogre 来处理 3D 渲染，但是我在初始化时遇到了问题，我已经解决了大部分问题，即窗口的 hInstance，但是现在的问题是，它只采用 Ogre 的类型，并且根据 Ogre API 参考`Ogre::D3D9RenderWindow::setDevice()`由 an 设置，而不是返回的是. 我需要帮助来弄清楚如何将.`ID3Device9``al_get_d3d9_device()``LPDIRECT3DDEVICE9``LPDIRECT3DDEVICE9``ID3Device9`

这是我到目前为止的代码：

```
#include "stdafx.h"

int _tmain(int argc, _TCHAR* argv[])
{

ALLEGRO_DISPLAY *al_display = NULL;

if(!al_init())
{
    fprintf(stderr, "Cannot initialize allegro");
    return -1;
}

al_display = al_create_display(640, 480);

if(!al_display)
{
    fprintf(stderr,"Cannot initialize the display");
    return -1;
}

HWND hWnd = al_get_win_window_handle(al_display);

HINSTANCE hInst = (HINSTANCE)GetWindowLong( hWnd, GWL_HINSTANCE);

Ogre::D3D9RenderWindow ogre_window(hInst);

ogre_window.setDevice(al_get_d3d_device(al_display)); // Function only takes an Ogre::D3D9Device

return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T06:21:19.480

如果您使用 OpenGL，这是可能的。Allegro 有一个[例子](https://github.com/allefant/allegro/blob/master/examples/ex_ogre3d.cpp)。

不确定D3D。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-02T00:05:30.380

在马修的回答的帮助下，经过大量的工作和繁琐的学习，我能够通过指针上的一些指针找到问题的解决方案。

这是最终代码：

```
int _tmain(int argc, _TCHAR* argv[])
{
ALLEGRO_DISPLAY *al_display = NULL;

if(!al_init())
{
    fprintf(stderr, "Cannot initialize allegro");
    return -1;
}

al_display = al_create_display(640, 480);

if(!al_display)
{
    fprintf(stderr,"Cannot initialize the display");
    return -1;
}

HWND hWnd = al_get_win_window_handle(al_display);

HINSTANCE hInst = (HINSTANCE)GetWindowLong( hWnd, GWL_HINSTANCE);

Ogre::D3D9RenderWindow ogre_window(hInst);

LPDIRECT3DDEVICE9 D3dDev = al_get_d3d_device(al_display);
IDirect3DDevice9 *iD3dDev = D3dDev;
Ogre::D3D9DeviceManager D3dDevManager;
Ogre::D3D9Device *OD3dDev = D3dDevManager.getDeviceFromD3D9Device(iD3dDev);
ogre_window.setDevice(OD3dDev);

return 0;
} 
```

# c# - C# 有没有办法从序列化中动态排除成员？

> ID：15147664
> 
> 赞同：2
> 
> 时间：2013-02-28T23:26:16.397
> 
> 标签：c#, serialization, dynamic

C# 有没有办法从序列化中动态排除成员？

例如（这段代码是我编的，不是真的）

类定义：

```
[Serializable]
public class Class1
{
    public int Property1{get;set;}
} 
```

我愿意

```
Class1 c=new Class(){Property1=15};
SerializationOption option = new SerializationOption(){ExludeList=new List(){"Property1"}};
var result=Serialize(Class1,option); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-28T23:32:34.373

控制这一点的唯一方法是`ISerializable`在类上实现并在序列化期间访问某些上下文。例如：

```
public class Class1 : ISerializable
{ 
    // ....
    void ISerializable.GetObjectData(SerializationInfo info, StreamingContext context)
    {
        var excludeList = (List<String>)context.Context;

        if(!excludeList.Contains("Property1"))
        {
            info.AddValue("Property1",Property1);
        }
    }
} 
```

您在创建格式化程序期间提供此上下文。例如：

```
var sc = new StreamingContext(StreamingContextStates.All, 
                              new List<String> { "Property1" });
var formatter = new BinaryFormatter(null, sc); 
```

# javascript - javascript geolocation是否应该提示用户打开位置服务？

> ID：15147670
> 
> 赞同：4
> 
> 时间：2013-02-28T23:26:40.710
> 
> 标签：javascript, android, iphone, geolocation

我正在使用地理定位功能通过 javascript 跟踪用户的位置。更具体地说，我使用的是 navigator.geolocation.watchPosition。我的网站运行良好。当我在我的 Android 设备上访问我的网站时，它会提示我是否要允许该网站跟踪我的位置。我点击允许（以及记住我的偏好）。

成功后，我关闭了手机上的定位服务并返回该站点。它没有再次提示我获得许可（因为我上次告诉它记住我的偏好，但它也没有提示我打开我的位置服务。不用说，那时我的网站从未从浏览器。

我的问题：有没有办法提示用户以编程方式打开他们的位置服务？如果我没有保存我的安全首选项并且它提示我再次允许它会打开或要求我打开位置服务吗？我不想告诉用户他们需要进入手机的偏好才能启用它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T23:39:00.873

它是特定于浏览器的，或者更准确地说是特定于应用程序的。您可以做的是等待例如半分钟或一分钟的位置，如果它不可用，则向用户显示警告。

# reporting-services - 多个 SSRS/SQL 实例的单一前端

> ID：15147672
> 
> 赞同：1
> 
> 时间：2013-02-28T23:26:44.813
> 
> 标签：reporting-services, farm-solution

我们有 3 个工厂都与高速 WAN 互连。每个工厂都有自己的 SQL 服务器（用于自己的应用程序），但是来自所有三个工厂的人员都需要在每台服务器上运行报告。如果我们在每个站点本地托管报告并指向远程数据库，那么性能很糟糕。如果我们远程登录到 SSRS，性能是可以接受的，因为只有屏幕渲染通过 WAN 链接，但是员工必须转到三个 URL

使用最频繁的 SSRS 服务器（工厂 A）有一个前端，它是第 3 方产品的一部分。它具有良好的用户访问控制，让我们可以在报告级别控制访问。据我了解，本机 SSRS Web UI 只能在文件夹级别控制访问，因此我们最终会使用大量文件夹来获得正确级别的访问控制粒度。

我确实考虑过构建自己的 BI 前端。这将根据自定义表中的 UserID/EmployeeID 元组向用户呈现可用报告。当用户单击报告时，它会简单地导航到相关的 URL（在任何站点上 - 例如[http://PlantB.com/reports/report1](http://PlantB.com/reports/report1)）（必须放在 .com 上以满足编辑器的要求。

这确实让我想到：有没有人知道一种商业产品，它为 SSRS 服务器群提供单个前端。它与负载平衡无关，只是一个用于控制访问的 UI，并为用户提供了一个启动板。因此，当 UserA 登录时，他们会看到允许他们运行的报告。如果他们在 A 工厂并在 B 工厂运行报告，则只需指向[http://PlantB.com/reports/report1](http://PlantB.com/reports/report1)

我用谷歌搜索了一下，但没有找到任何东西

问候

标记

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T06:22:56.593

我认为 SharePoint 可以胜任这项工作。您可以链接到报表管理器报表或文件夹，添加 Web 部件以在 SharePoint 页面中显示报表，或者将新的 SSRS 实例与 SharePoint 完全集成。

# c++ - 为什么在 C++ sizeof(array[]) 中，布尔数组的行为方式不同？

> ID：15147682
> 
> 赞同：-2
> 
> 时间：2013-02-28T23:27:23.407
> 
> 标签：c++, arrays, boolean

为什么在 C++中对于包含其他类型数据的数组的`sizeof(array)` 行为方式不同？`bool array`

**版：** 我问是因为

`sizeof(boolarray)/sizeof(boolarray[0])`

不要给出布尔数组的大小。

但这个简单的代码打印：

```
4
1 
```

/////////////////////////

```
#include<iostream>
using namespace std;
void printBoolArray(bool* boolarray){
    cout<<sizeof(boolarray)<<"\n";
    cout<<sizeof(boolarray[0]);  
}

int main(){
    bool boolarray[10]={false};
    printBoolArray(boolarray);
} 
```

知道我理解函数中的 sizeof 给出了引用的对象的大小，这是我使用 C++ 的 9 天，抱歉这个愚蠢的问题，现在很明显

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-28T23:30:01.430

它的作用没有什么不同。是什么让你认为它确实有效？您是否对 a 的大小做出了错误的假设`bool`？

* * *

正如评论中提到的那样，如果您将数组传递给函数并尝试在那里计算它的大小，那是行不通的。您不能将数组传递给（或从）函数返回。例如：

```
void foo(int array[10])
{
    auto size = sizeof(array);
    // size == sizeof(int*), you didn't pass an array
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-28T23:45:09.950

```
#include <cstddef>
#include <iostream>

template<std::size_t n>
void printBoolArray(bool (&boolarray)[n]){
  std::cout<<sizeof(boolarray)<<"\n";
  std::cout<<sizeof(boolarray[0]);  
}

int main(){
  bool boolarray[10]={false};
  printBoolArray(boolarray);
} 
```

以上工作。

`sizeof(bool*)`是指针的大小，而不是它指向的数组。

上面，我仔细维护了`boolarray`. 碰巧，这种技术还将大小提取到编译时常量`n`中。

这不能很好地扩展，因为当您将数组传递给函数时，它们会迅速衰减为指针。这是为什么`std::array`或`std::vector`可以建议的原因之一——它们的怪癖比 C 样式数组少。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-28T23:43:08.293

正如其他人所解释的，数组在传递给函数时会退化为指针。

但是，有一种解决方法；你可以使用模板。

```
template<typename T, size_t N>
size_t length(T (&)[N]) {
    return N;
} 
```

# c# - c# 将文本文件读入数组

> ID：15147683
> 
> 赞同：-4
> 
> 时间：2013-02-28T23:27:36.547
> 
> 标签：c#, arrays, text-files

如何遍历文本文件以从文本文件的内容创建六个数组。例如，文本文件看起来像这样，但有更多行（没有标题）可能有 200 行

```
top_speed average_speed cadence altitude heart_rate power

       84            73       0     -124          0    50
       86           179       84    -125        121  3893 
```

每个都有一个数组会很好。所以，例如

> top_speed = 84 + 86 : average_speed = 73 + 179 ...（以此类推）

最好的方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T23:51:13.653

您可以创建一个`Record`类，然后使用一个简单的 LINQ 查询：

```
var records = File.ReadLines("file.txt")
    .Select(line =>
        {
            string[] parts = line.Split('\t');
            return new Record
                {
                    TopSpeed = int.Parse(parts[0]),
                    AverageSpeed = int.Parse(parts[1]),
                    Cadence = int.Parse(parts[2]),
                    Altitude = int.Parse(parts[3]),
                    HeartRate = int.Parse(parts[4]),
                    Power = int.Parse(parts[5])
                };
        }).ToArray(); 
```

这将为您提供一堆记录，原始文件中的每行一个。如果您想检查所有 HeartRates 以构建直方图或图形或其他任何内容，您可以像这样获取它们：

```
var allHeartRates = records.Select(rec => rec.HeartRate); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T23:40:07.843

无论如何，如果那是家庭作业，下面的代码将无济于事:) 但如果不是家庭作业，您将了解如何使用 LINQ 解析此类文件

```
var items = 
   File.ReadAllLines(filename) // read lines from file
       .Select(line => line.Split(new[] {' '}, StringSplitOptions.RemoveEmptyEntries)
                           .Select(Int32.Parse) 
                           .ToArray()) // convert each line to array of integers
       .Select(values => new {
            TopSpeed = values[0],
            AverageSpeed = values[1],
            Cadence = values[2],
            Altitude = values[3],
            HeartRate = values[4],
            Power = values[5]
       }); // create anonymous object with nice strongly-typed properties

int[] topSpeeds = items.Select(i => i.TopSpeed).ToArray(); 
```

# php - 如何检索 MySQL 记录列表中的下一项？

> ID：15147694
> 
> 赞同：0
> 
> 时间：2013-02-28T23:28:12.943
> 
> 标签：php, mysql, symfony-1.4, propel

我正在使用 Propel 与 symfony 合作，试图为后退和下一个按钮创建功能：

```
$c = new Criteria();

$c->add(CartPeer::CATEGORY, $category);
$c->add(CartPeer::ITEM_ID, $item->getItemId(), Criteria::GREATER_THAN);
$c->addAscendingOrderByColumn(CartPeer::ITEM_NAME);

$this->next = CartPeer::doSelectOne($c); 
```

现在，如果项目的标识符按升序排列，这可以正常工作，但通常情况并非如此。

如何修改此代码，使其`$item`在返回的记录列表中的当前项之后立即选择项目，而不是选择具有下一个升序数字 ID 的项目？

例子：

```
Record: 0 | ItemID: 5
Record: 1 | ItemID: 2
Record: 2 | ItemID: 7 <-- $item
Record: 3 | ItemID: 4 <-- I want this to be $next
Record: 4 | ItemID: 9 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T04:27:54.893

我实际上并没有使用 Symfony，但是如果您使用的是最新版本的 Propel，那么您可以使用该[`paginate()`方法](http://propelorm.org/reference/model-criteria.html#paginating_results)，最终对您来说可能会好得多。

```
$pager = CartQuery::create()
           ->filterByCategory($category)
           ->orderBy(CartPeer::ITEM_NAME)
           ->paginate($pageToLoad, $resultsPerPage);
foreach($pager as $result) {
  // do something with the record
}
if ($pager->haveToPaginate()) {
  // build some paging items using PropelModelPager methods:
  if (!$pager->isFirstPage()) {
    echo "<a href='?page=".$pager->getPreviousPage()."'>Previous</a>";
  }
  if (!$pager->isLastPage()) {
    echo "<a href='?page=".$pager->getNextPage()."'>Next</a>";
  }
} 
```

如果您真的想按照自己的方式进行操作，您可能希望完全消除 ItemId 的限制，只需在限制的同时添加一个偏移量：

```
// This will be however many results have already been shown (page size?)
$offset = 10;

$c = new Criteria();
$c->add(CartPeer::CATEGORY, $category);
$c->addAscendingOrderByColumn(CartPeer::ITEM_NAME);
$c->setOffset($offset);
$this->next = CartPeer::doSelectOne($c); 
```

# linux - 在linux中检查原始文件权限的方法

> ID：15147695
> 
> 赞同：-1
> 
> 时间：2013-02-28T23:28:23.093
> 
> 标签：linux, unix, configuration-files, mode, file-ownership

我想知道是否有办法检查 linux、solaris 和 freebsd 系统等中重要系统配置文件的工厂原始文件权限。我正在用 python 创建一个硬化软件工具，它可以自主编辑配置文件，然后将权限设置为所需的所有者、组和模式，在这种情况下，理想情况下是最初设置的设置。有谁知道如何查看某些文件的原始工厂所有者、组和模式是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T03:03:20.057

在 BSD 系统上，`mtree`是通常执行此任务的工具。挑战`mtree`在于不同的 BSD 版本为其 mtree 规范提供不同程度的完成。例如，FreeBSD 默认没有 /etc/* 的 mtree 规则。然而，OpenBSD 确实提供了这一点（`/etc/security`脚本使用它来提醒您夜间运行的变化）。这使得 mtree 在 BSD 世界中不完全可移植，但这是一个开始。

此外，mtree 已经提供了修复您在 python 工具中描述的内容的功能，因此您可以卸载这些工作，前提是您可以找到/构建合适的 mtree 定义文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T02:35:58.903

在 Solaris 10 及更早版本上，您可以使用`pkgchk`：

```
# pkgchk -ap /etc/vfstab    
ERROR: /etc/vfstab
    permissions <0644> expected <0660> actual
    group name <sys> expected <jlliagre> actual 
```

在 Solaris 11 上，您需要获取文件所属的包名（例如：）`pkg search -l /etc/vfstab`然后运行`pkg verify package-name`

# python - Python：如何在没有特定对象的情况下基于现有列表创建新列表

> ID：15147696
> 
> 赞同：0
> 
> 时间：2013-02-28T23:28:23.973
> 
> 标签：python, list

我有一个清单：

```
a = ['house', 'bikeCT', 'car', 'bike', 'houseCT'] 
```

我想要一个基于列表 a 的新列表，其中所有对象都不包含`'CT'`. 我怎么能那样做？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-28T23:29:00.707

使用列表推导：

```
a = ['house', 'bikeCT', 'car', 'bike', 'houseCT']
b = [x for x in a if 'CT' not in x] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T00:02:36.503

如果您的搜索比首选更复杂`in`，您可以使用正则表达式：

```
>>> import re
>>> a = ['house', 'bikeCT', 'car', 'bike', 'houseCT']  
>>> [s for s in a if not re.match(r'.*e',s)]
['car'] 
```

或者，`endswith`：

```
>>> a = ['house', 'bikeCT', 'car', 'bike', 'houseCTn']
>>> [s for s in a if not s.endswith('CT')]
['house', 'car', 'bike', 'houseCTn'] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-07-17T19:40:21.713

一种更简单的方法是删除项目，而不是创建一个新项目。

```
a = ['house', 'bikeCT', 'car', 'bike', 'houseCT'] 
```

这就是您的列表的外观。从中删除一些东西：

```
del a[1]
del a[4] 
```

这告诉计算机，从名为“a”的列表中删除第一项，并从名为“a”的列表中删除第 4 项。但请记住，在 Python 中，列表中的第一件事称为 0，而不是 1。您的最终产品应如下所示（在您编写 print(a) 之后：

```
['house', 'car', 'bike'] 
```

希望这可以帮助

# php - MySQL 按字符串语言排序

> ID：15147697
> 
> 赞同：6
> 
> 时间：2013-02-28T23:28:29.707
> 
> 标签：php, mysql

我在数据库中有一个带有标签的大表。并非所有单词都有拉丁字符（英语、法语……），有些单词有非拉丁字符（希伯来语、波斯语、阿拉伯语……）

如何选择单词`ORDER BY [Language of word]`？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-28T23:31:31.430

您可以定义第二个表语言，然后将语言标签附加到每个条目。您可以将排序顺序列添加到语言表，然后在选择时加入语言表并按标签字段排序，然后按语言排序顺序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T23:33:43.943

您可以使用名为 FIELD() 的 Mysql 函数

```
ORDER BY FIELD(Language,'English','Japan','Swedish') 
```

或者，如果您订购的语言较少：

```
ORDER BY `ID`,
     CASE `Language`
     WHEN 'English' THEN 1
     WHEN 'Japenese' THEN 2
     WHEN 'Swedish' THEN 3
     END 
```

# ruby-on-rails - ActiveRecord 事务，保存 1000 多个条目

> ID：15147698
> 
> 赞同：2
> 
> 时间：2013-02-28T23:28:47.953
> 
> 标签：ruby-on-rails, activerecord, transactions

我有 EventsController 创建如下所示的操作：

```
class EventsController < ApplicationController

  def create
    @event = Event.new(params[:event].slice(*Event.accessible_attributes))
    if @event.save
      DraftBuilder.new(event: @event).build(params[:event][:file].path) 
      redirect_to @event
    else
      render :new
    end
  end

end 
```

**params[:event][:file]**是一个文件，用户可以通过 file_field_tag 通过 Event#new 操作提交。

**DraftBuilder#build**方法除其他外，解析给定文件并在数据库中创建大约 1000 条记录（跨多个表将数据保存到数据库中）。

我遇到的问题是 DraftBuilder#build 真的很慢。它很慢，因为我在循环中保存记录，而 Active Record 为每次保存创建新事务。

简化的 DraftBuilder#build 可能如下所示：

```
class DraftBuilder
  def build(file)
    @data = parse(file) #@data is an array of hashes with 1000+ records
    @data.each do |pick_arguments|
      Pick.create(pick_arguments)
    end
  end
end 
```

我找到了解决这个问题的方法。将控制器创建操作包装到 ActiveRecord::Base.transaction：

```
class EventsController < ApplicationController
  around_filter :transactions_filter, only: [:create]

    def transactions_filter
      ActiveRecord::Base.transaction do
        yield
      end
    end
end 
```

在这个解决方案有效的同时，它只创建一个事务，并将整个过程加快了大约 60 倍。这是解决这个问题的好方法吗？交易肯定不是为此设计的吗？从具有超过一千个条目的文件创建记录的其他选项是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-28T23:32:06.630

减缓进程运行速度的最佳解决方案是使用后台作业，如[delay_job](https://github.com/collectiveidea/delayed_job)或[resque](https://github.com/defunkt/resque)或[sidekiq](http://mperham.github.com/sidekiq/)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-28T23:33:39.103

你有两种方法：

代替

```
@data.each do |pick_arguments|
  Pick.create(pick_arguments)
end 
```

1.  交易

    ```
     ActiveRecord::Base.transaction do
       @data.each do |pick_arguments|
         Pick.create(pick_arguments)
       end
     end 
    ```

2.  Gem activerecord-导入

    ```
    data = []
    @data.each do |pick_arguments|
      data << Pick.new(pick_arguments)
    end
    Pick.import data 
    ```

# java - 更改 ThreadPoolExecutor 的队列大小

> ID：15147701
> 
> 赞同：7
> 
> 时间：2013-02-28T23:28:55.033
> 
> 标签：java, multithreading, threadpool

我需要能够更改[ThreadPoolExecutor](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/ThreadPoolExecutor.html)的任务队列的大小。当然，BlockingQueue 不支持改变大小，ThreadPoolExecutor 也不支持改变队列。

所以，我想出的方法是使用[ThreadPoolExecutor.shutdownNow()](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/ThreadPoolExecutor.html#shutdownNow%28%29)，它会返回一个尚未执行的 Runnables 列表。然后我可以创建一个具有所需队列大小的新执行器并重新提交所有任务。

问题在于调用 shutdownNow() 时正在进行的任务。据我从 javadoc 中得知，执行程序将在当前执行任务的所有线程上调用 Thread.interrupt() 。我不希望我的任务被杀死。这个问题可能是询问如何编写我的任务以使 Thread.interrupt() 不会产生任何影响的冗长方式？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-02T14:46:23.870

混合使用“shutdown()”（不是 shutdownNow()），然后使用 getPoolSize()/isTerminated() 进行轮询，您可以 (a) 停止现有的 pool 。然后（b）同时（在一个单独的线程中）可以创建一个具有所需大小的新队列。您将在以下方面进行权衡：您是否允许暂时存在比所需数量更多的线程（当第一个池正在关闭时）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-02T14:56:06.353

您应该使用 isTerminated() 方法检查 Executor 状态，但请确保在调用 isTerminated 方法之前您应该调用 shutdown() 否则 isTermainated 方法 aleays 返回 false。

# twitter - 如何让用户使用 Twitter 和 Facebook (Firebase/Firefeed) 登录

> ID：15147706
> 
> 赞同：3
> 
> 时间：2013-02-28T23:29:37.560
> 
> 标签：twitter, firebase-authentication, facebook-authentication

我正在使用 Firefeed 应用程序（基于 Firebase），我想知道如何让用户选择同时使用 Facebook 和 Twitter 登录。

我正确设置了我的火力基地，但我想问题是我要么使用

```
authClient.login("facebook"); 
```

或者

```
authClient.login("twitter"); 
```

如何使用两者来给他们选择？我知道，这可能是一个初学者的问题。:)

非常感谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-01T00:25:32.673

我不太确定你在这里寻找什么。如果您想允许人们使用任一选项登录，那么您可以简单地使用 2 个按钮，一个显示“使用 Twitter 登录”，一个显示“使用 Facebook 登录”。

如果您想拥有一个帐户系统，将多个社交帐户合并到您系统上的一个帐户中，以便用户可以使用任一系统登录并访问相同的数据，这会稍微复杂一些。这里有一个彻底的答案： [如何使用 Firebase 登录多个社交服务？](https://stackoverflow.com/questions/15148089/how-can-i-auth-with-multiple-social-services-with-firebase/15148259#15148259)

# .net - Reference Person 类让我很困惑

> ID：15147709
> 
> 赞同：2
> 
> 时间：2013-02-28T23:29:55.267
> 
> 标签：.net, architecture, domain-driven-design

我目前正在阅读[Applying Domain-Driven Design with Examples in C# and .NET](https://rads.stackoverflow.com/amzn/click/com/0321268202)。关于域模型的初始草图，我有两个问题：

1.  我不是以英语为母语的人，那么“参考人”在商业领域或一般英语中的确切含义是什么？
2.  作者在草图上评论说，虽然“参考人”类出现在图表上的两个不同聚合中，但在运行时它们是同一个实例，这怎么可能？如果一个聚合根被垃圾收集，那不会导致收集该实例，从而使另一个聚合不稳定？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T14:25:43.013

在这里，我发布我们正在谈论的图片：

![在此处输入图像描述](../Images/fd1ce0da037a07721f1eafd66e729883.png)

1.  客户有时是一个组织，而不是个人，它可能有一个您可以联系的参考人员列表。我们可以说参考人是代表一个组织的人。（合计 1）

    当客户想要下订单时，我们还需要确切地知道我们正在与之交谈的人。（合计 2）

2.  你应该仔细阅读，作者在书中评论说“类 ReferencePerson 在图 4-13 中的两个不同的聚合中，但实例不是”。这意味着当您从数据库中同时加载订单和客户时，Order.ReferencePerson 和 Customer.ReferencePersons[index] 不会指向内存中的同一对象，即使它们是同一个人。

此外，即使它们指向同一个实例，在 .Net 中，当没有对它们的引用时，也会收集对象。如果聚合 1 已收集，但聚合 2 仍具有对 ReferencePerson A 的引用，则 A 仍未收集。

# php - PHP Tidy 删除空格并插入换行符

> ID：15147711
> 
> 赞同：8
> 
> 时间：2013-02-28T23:30:04.550
> 
> 标签：php, xml, whitespace, space, tidy

我想使用 PHP Tidy 来确保我的 xml 在我将其加载到 DomDocument 之前是有效的。

但是，我不希望 Tidy 更改我的格式 - 我只希望它修复不平衡标签等问题。

可以在此页面上看到问题的示例：[http ://www.tek-tips.com/viewthread.cfm?qid=1654452](http://www.tek-tips.com/viewthread.cfm?qid=1654452)

我自己的例子如下。

输入：（`<ex><context>собр<stress>а</stress>ние</context> акцион<stress>е</stress>ров — <stress>aa</stress>ndeelhoudersvergadering</ex>`这已经是有效的xml）

预期输出：（和`<ex><context>собр<stress>а</stress>ние</context> акцион<stress>е</stress>ров — <stress>aa</stress>ndeelhoudersvergadering</ex>` 之间有中断的空格）`</context>``актион`

实际输出：

```
<ex>
<context>собр
<stress>а</stress>ние</context>акцион
<stress>е</stress>ров — 
<stress>aa</stress>ndeelhoudersvergadering</ex> 
```

（它删除了和之间的空格`</context>`，`актион`这将使文本不可读，并在每个标签后插入换行符）

我的代码是：

```
function TidyXml($inputXml)
    {
        $config = array(
            'indent'         => false,
            'output-xml'     => true,
            'input-xml'     => true,
        );

        $tidy = new tidy();
        $tidy->parseString($inputXml, $config, 'utf8');
        $tidy->cleanRepair();
        $cleanXml = tidy_get_output($tidy);
        return $cleanXml;
    } 
```

我尝试更改几个选项，但没有成功。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-01T21:25:47.933

我找到了一个解决方案，但它有点老套，所以我仍然愿意接受更好的建议。

放置`<pre>`您要验证的 xml（这指示 Tidy 不要更改空格），然后将 output-html 设置为 true 的 xml 修复，然后删除`<pre>`和`\n`换行符。

例子：

```
$config = array(
    'indent' => false,
    'indent-attributes' => false,
    'output-html' => true,
    'input-xml' => true,
    'wrap' => 0,  
    'vertical-space' => false,  
    'new-inline-tags' => 'context,abr,stress',  
    'new-blocklevel-tags'   => 'def,ex,examples'
);

$tidy = new tidy();
$inputXml = "<pre>" . $inputXml . "</pre>";
$validXml = $tidy->repairString($inputXml, $config, 'utf8');
$cleanXml = str_replace("\n", "", $validXml);
$cleanXml = substr($cleanXml, strlen("<pre>"), strlen($cleanXml));  
$cleanXml = substr($cleanXml, 0, strlen($cleanXml)-strlen("</pre>")); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-12-08T19:24:31.117

就我而言，我能够在 html 上运行替换以删除多个空行并防止 Tidy 添加中断`$html = preg_replace("/\n([\s]*)\n/", "\r\n", $html);`

# sql - sql server 从汇总中获取属性

> ID：15147712
> 
> 赞同：1
> 
> 时间：2013-02-28T23:30:12.290
> 
> 标签：sql, sql-server

我有如下数据表

```
Prod-Code Name              Rollup1 Rollup2 EndProd-Code
--------- ----------------- ------- ------- ------------
P100      Potatoes          P2         P3   P100
P200      Potatoes GS       P4         P5   P200
P300      Potatoes GSS      P1         P6   P100 
```

我想要做的是创建一个查询，如果 Prod-Code = EndProd-Code 将获取行。但如果它们不同，我想用来自 EndProd-Code 行的值覆盖 Rollup1 和 Rollup2 的值

使用上述数据运行查询的示例将在下面产生。查看如何使用 P100 的汇总值覆盖 Prod-Code P300 的汇总，因为它具有该 EndProd-Code

```
Prod-Code Name              Rollup1 Rollup2 EndProd-Code
--------- ----------------- ------- ------- ------------
P100      Potatoes          P2      P3      P100
P200      Potatoes GS       P4      P5      P200
P300      Potatoes GSS      P2      P3      P100 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T00:15:16.500

```
SELECT p.ProdCode, p.Name, CASE WHEN p.ProdCode=p.EndProdCode THEN p.Rollup1 ELSE pm.Rollup1 END [Rollup1],
       CASE WHEN p.ProdCode=p.EndProdCode THEN p.Rollup2 ELSE pm.Rollup2 END [Rollup2]
FROM ProdTable p
JOIN ProdTable pm ON (pm.ProdCode=pm.EndProdCode and p.EndProdCode=pm.EndProdCode)
ORDER BY p.ProdCode; 
```

SQL 小提琴：[http ://sqlfiddle.com/#!3/fb6b5/3](http://sqlfiddle.com/#!3/fb6b5/3)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T00:44:24.410

假设您的`Prod-Code`列是主键（或至少是唯一的），以下应该做得很好：

```
select ProdCode    = t1.ProdCode ,
       Name        = t1.Name     ,
       Rollup1     = coalesce( t2.Rollup1 , t1.Rollup1 ) ,
       Rollup2     = coalesce9 t2.Rollup2 , t2.Rollup2 ) ,
       EndProdCode =  t1.EndProdCode
from      myTable t1
left join myTable t2 on t2.ProdCode  = t1.EndProdCode
                    and t2.ProdCode != t1.ProdCode 
```

# python - Python：记录到多个日志文件

> ID：15147713
> 
> 赞同：3
> 
> 时间：2013-02-28T23:30:22.790
> 
> 标签：python, logging

目前，我将所有内容都记录到一个日志文件中，但我想将其分离到多个日志文件中。我查看了 python 文档中的日志记录，但他们没有讨论这个问题。

```
log_format = "%(asctime)s - %(name)s - %(levelname)s - %(message)s"
logging.basicConfig(filename=(os.path.join(OUT_DIR, + '-user.log')),
            format=log_format, level=logging.INFO, datefmt='%Y-%m-%d %H:%M:%S') 
```

目前这是我进行日志记录的方式。我想做的有不同类型的错误或信息登录到不同的日志文件中。目前我这样做`logging.info('Logging IN')`并将`logging.error('unable to login')`转到相同的日志文件。我想把他们分开。我是否需要创建另一个日志记录对象来支持记录到另一个文件？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-28T23:49:53.400

你/可以/做的（我没有深入研究`logging`模块，所以可能有更好的方法来做到这一点）可能是使用流而不是文件对象：

```
In [1]: class LogHandler(object):
   ...:     def write(self, msg):
   ...:         print 'a :%s' % msg
   ...:         print 'b :%s' % msg
   ...:         

In [3]: import logging
In [4]: logging.basicConfig(stream=LogHandler())
In [5]: logging.critical('foo')
a :CRITICAL:root:foo
b :CRITICAL:root:foo

In [6]: logging.warn('bar')
a :WARNING:root:bar
b :WARNING:root:bar 
```

**编辑进一步处理**：

假设您的日志文件已经存在，您可以执行以下操作：

```
import logging

class LogHandler(object):
    format = '%(levelname)s %(message)s'
    files = { 
        'ERROR': 'error.log',
        'CRITICAL': 'error.log',
        'WARN': 'warn.log',
    }   
    def write(self, msg):
        type_ = msg[:msg.index(' ')] 
        with open(self.files.get(type_, 'log.log'), 'r+') as f:
            f.write(msg)

logging.basicConfig(format=LogHandler.format, stream=LogHandler())
logging.critical('foo') 
```

这将允许您根据日志消息中的条件将日志记录拆分为各种文件。如果找不到您要查找的内容，则默认为`log.log`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-07-08T23:45:30.987

我从[docs.python.org/2/howto/logging-cookbook.html创建了这个解决方案](http://docs.python.org/2/howto/logging-cookbook.html)

只需创建两个日志文件处理程序，分配它们的日志级别并将它们添加到您的记录器。

```
import os
import logging

current_path = os.path.dirname(os.path.realpath(__file__))

logger = logging.getLogger('simple_example')
logger.setLevel(logging.DEBUG)

#to log debug messages                               
debug_log = logging.FileHandler(os.path.join(current_path, 'debug.log'))
debug_log.setLevel(logging.DEBUG)

#to log errors messages
error_log = logging.FileHandler(os.path.join(current_path, 'error.log'))
error_log.setLevel(logging.ERROR)

logger.addHandler(debug_log)
logger.addHandler(error_log)

logger.debug('This message should go in the debug log')
logger.info('and so should this message')
logger.warning('and this message')
logger.error('This message should go in both the debug log and the error log') 
```

# internet-explorer - 一种字体未在 IE 中呈现

> ID：15147714
> 
> 赞同：0
> 
> 时间：2013-02-28T23:30:28.153
> 
> 标签：internet-explorer, fonts

我正在为我客户的网站使用带有 Trade Gothic 和 Trade Gothic Bold 的 @font face。

两种字体都可以在浏览器中正确呈现，IE 除外。在 IE 中，Trade Gothic 是可以的，但 Trade Gothic Bold 不显示并诉诸 arial。

这是一个链接。谁能告诉我问题是什么？

[http://www.shannon-brown.com/clients/Yeah/Yeah!-Invite.html](http://www.shannon-brown.com/clients/Yeah/Yeah!-Invite.html)

谢谢，香农

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T23:35:08.290

通常，如果将字体安装在相关计算机上，该字体将起作用。一个例子是 Helvetica 通常不能在 IE 中运行，因为默认情况下它没有安装在 PC 上。这就是后备的用途。

以下是有关通常可供谁使用的一些信息。

[http://www.codestyle.org/css/font-family/sampler-CombinedResults.shtml](http://www.codestyle.org/css/font-family/sampler-CombinedResults.shtml)

# c# - 变量缓存

> ID：15147717
> 
> 赞同：5
> 
> 时间：2013-02-28T22:43:00.837
> 
> 标签：c#, multithreading

为什么在这部分代码`complete`被缓存？

```
static void Main()
{
  bool complete = false; 
  var t = new Thread (() =>
  {
    bool toggle = false;
    while (!complete) toggle = !toggle;
  });
  t.Start();
  Thread.Sleep (1000);
  complete = true;
  t.Join();        // Blocks indefinitely
} 
```

但在这部分不是吗？

```
static void Main()
{
  bool complete = false;
  bool toggle = false; 
  var t = new Thread (() =>
  {
    while (!complete) toggle = !toggle;
  });
  t.Start();
  Thread.Sleep (1000);
  complete = true;
  t.Join();  
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-28T23:45:06.877

您正在跨线程进行不同步的数据共享。警报器现在应该响起。

据我了解内存模型允许 JIT 读取`complete`一次并将其存储在寄存器中。因此，来自 Main 的更新永远不会变得可见。

至于解决这个问题，最简单的方法是在对`complete`. 您也可以使用`Thread.VolatileRead`和`Thread.VolatileWrite`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-28T23:50:48.510

不要确定缓存是否会在上述所有架构上发生，或者甚至在程序的多次运行中总是会像上面那样发生。

这*可能是*因为在第二种情况下，lambda 正在修改闭包，而在第一种情况下，它只访问闭包。当然，这只是一个疯狂的猜测。

更重要的是，**无法保证何时完成缓存*，*内存边界仅指定线程何时*不*使用缓存值**。

最重要的是，您不能依赖缓存的发生。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-28T22:59:18.963

在我的情况下，这两个示例都完成了，但是您的 lambda/delegate 可以在不同的编译器中进行不同的编译，这可能是问题所在。

您的委托正在访问一个修改后的闭包，这可能会导致一堆问题，而您显然已经找到了一个。看看 Jon Skeet 在此处提供的答案[Access to Modified Closure](https://stackoverflow.com/questions/235455/access-to-modified-closure)，这不是完全相同的问题，但此处描述的原因也适用于您的情况。

# bash - 递归地从文件名中去除多个破折号

> ID：15147720
> 
> 赞同：0
> 
> 时间：2013-02-28T23:30:54.593
> 
> 标签：bash, rename

我想递归地去除具有多个破折号的文件名，以便**file---name-3.jpg**变为**file-name-3.jpg**。这在单个文件夹中工作正常，但我想移动到父文件夹并运行命令。它也可以正常工作，直到它遇到一个也有多个破折号的文件夹名称，然后它会尝试重命名它们。

`find . -type f -iname '*---*' -depth -exec rename 's/---/-/gi' {} +`

```
parent_folder
  \sub--folder-1
     file--name-1.jpg <-- rename file-name-1.jpg
     file----name-2.jpg <-- rename file-name-2.jpg
  \sub----folder-2
     file--name-1.jpg <-- rename file-name-1.jpg 
```

**在 CentOS 服务器上使用 bash 进行**编辑****

 *** * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T23:58:57.070

使用 -execdir 仅使用文件名从文件目录运行命令，而不是使用 -exec 从当前目录运行具有相对路径的命令：

```
find . -depth -type f -iname '*---*' -execdir rename 's/---/-/gi' {} + 
```**

# ruby-on-rails - Rails 3 ActiveRecord has_many 多态 - 为什么不保存第一个对象的 id 以插入连接表？

> ID：15147725
> 
> 赞同：0
> 
> 时间：2013-02-28T23:31:39.720
> 
> 标签：ruby-on-rails, activerecord, has-many, polymorphism

聪明人，

请帮我解决我的 has_many 多态对象创建问题。

我在两个对象之间有一个多态的 has_many 关系，中间有一个连接表。一方面是首字母缩略词（和其他对象），另一方面是类别。在它们之间，我在两个对象之间有一个连接对象。

我无法成功创建带有类别的首字母缩写词。但是，我可以创建一个没有类别的首字母缩写词，然后将该类别添加到现有的首字母缩写词中。

我的模型对象看起来像下面的代码：

```
class Acronym < ActiveRecord::Base
  has_many :category_belongings, :as => :categorizable, :dependent => :delete_all
  has_many :categories, :through => :category_belongings
end

class Category < ActiveRecord::Base
  has_many :category_belongings, :dependent => :delete_all
  has_many :acronyms, :through => :category_belongings, :source => :categorizable, :source_type => 'Acronym'
end

class CategoryBelonging < ActiveRecord::Base
  belongs_to :categorizable, :polymorphic => true
  belongs_to :category
end 
```

作为参考，我删除了一些额外的字段和不相关的规则。我还重构了我的代码，使其看起来像这里的示例： [设置多态 has_many :through 关系](https://stackoverflow.com/questions/5886738/setting-up-a-polymorphic-has-many-through-relationship/6011770#6011770)

通过我的 Rails 应用程序/rails 控制台，我能够：

*   成功创建没有任何类别的首字母缩写词
*   成功创建类别
*   通过更新首字母缩写词成功地将现有类别添加到现有首字母缩写词

但是，我无法使用现有类别创建新的首字母缩略词。我可以在日志中看到 Rails 尝试执行以下操作：

1.  从帖子中收集参数。这些参数包括 Acronym 表中的列以及类别 ID
2.  检查类别是否存在。确实如此。
3.  检查首字母缩写词是否存在。它不是。
4.  使用所有列参数将新 Acronym 插入数据库
5.  尝试在连接表中插入新条目。这就是错误所在。此插入的 SQL 包含 Acronym ID 的 Nil 值。
6.  回滚我的更改。

    ```
    Processing by Admin::AcronymsController#create as HTML
      Parameters: {"utf8"=>"✓", "authenticity_token"=>"/uquz5FvtMh0QWP5NoWwTO9FMMEC9rsMTrTj4WUNxxE=", "acronym"=>{"name"=>"A Test Acronym", "definition"=>"A Test Definition", "explanation"=>"", "category_ids"=>["1", ""], "state"=>"unapproved"}, "commit"=>"Create Acronym"}
      Category Load (0.4ms)  SELECT "categories".* FROM "categories" WHERE "categories"."id" = $1 LIMIT 1  [["id", 1]]
       (0.3ms)  BEGIN
      Category Exists (0.6ms)  SELECT 1 AS one FROM "categories" WHERE ("categories"."name" = 'Internet' AND "categories"."id" != 1) LIMIT 1
      Acronym Exists (26.0ms)  SELECT 1 AS one FROM "acronyms" WHERE "acronyms"."name" = 'A Test Acronym' LIMIT 1
      SQL (18.1ms)  INSERT INTO "acronyms" ("definition", "explanation", "improvement_reason", "likes_count", "name", "state", "submitter_id") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"  [["definition", "A Test Definition"], ["explanation", ""], ["improvement_reason", nil], ["likes_count", 0], ["name", "A Test Acronym"], ["state", "unapproved"], ["submitter_id", nil]]
      SQL (55.8ms)  INSERT INTO "category_belongings" ("categorizable_id", "categorizable_type", "category_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["categorizable_id", nil], ["categorizable_type", "Acronym"], ["category_id", 1], ["created_at", Thu, 28 Feb 2013 23:03:48 UTC +00:00], ["updated_at", Thu, 28 Feb 2013 23:03:48 UTC +00:00]]
    PG::Error: ERROR:  null value in column "categorizable_id" violates not-null constraint
    : INSERT INTO "category_belongings" ("categorizable_id", "categorizable_type", "category_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"
       (0.3ms)  ROLLBACK 
    ```

我假设在 Acronym 插入时会创建一个 acronym_id，但我没有看到任何输出表明该 acronym_id 的值是什么。对我来说，错误显然是当我尝试将新行插入 category_belongings 时 acronym_id 为 Nil。我是否需要以某种方式将 acronym_id 指向 categorizable_id？如果是这样，我该怎么做？

我是 Rails 新手，我正在尝试维护和改进现有系统。谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T00:50:27.803

根据您要执行的操作，您需要使用`accepts_nested_attributes_for`. 这将允许您在创建首字母缩写词时创建类别。以下是您应该如何设置它。

```
class Acronym < ActiveRecord::Base
  has_many :categories, :through => :category_belongings
  has_many :category_belongings, :dependent => :destroy
  accepts_nested_attributes_for :acronyms

  attr_accessible :acronyms_attributes      
end

class Category < ActiveRecord::Base
  has_many :acronyms, :through => :category_belongings
  has_many :category_belongings, :dependent => :destroy     
end

class CategoryBelonging < ActiveRecord::Base
  belongs_to :acronym
  belongs_to :category
end 
```

此设置将允许您在创建首字母缩写词时嵌套表单并创建类别。要阅读有关所有选项`accepts_nested_attributes_for`的更多信息，请查看[Rails API](http://api.rubyonrails.org/classes/ActiveRecord/NestedAttributes/ClassMethods.html)。这个[Railscast](http://railscasts.com/episodes/196-nested-model-form-revised)也有一些关于嵌套表单的好信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T15:08:25.330

看来我的代码很好——我被 Rails 的错误所困扰。我通过根据这些说明启用安全补丁将我的 rails 版本移动到 3.2.8 解决了这个问题。之后，一切正常，无需更改代码。

[https://github.com/rails/rails/issues/8269#issuecomment-10518099](https://github.com/rails/rails/issues/8269#issuecomment-10518099)

# javascript - 从参数化 URL 播放 wav 声音

> ID：15147727
> 
> 赞同：0
> 
> 时间：2013-02-28T23:31:49.033
> 
> 标签：javascript, jquery, html

我想在我的网页中播放音频。为此，我尝试使用一种方法。

```
<embed src="success.wav" autostart=true loop=false> 
```

但是我必须进行服务器调用才能获取类似的波形文件

```
URL/play.php?file="success.wav"&log=353534543 
```

它返回一个success.wav 文件。我试过这个但不工作

```
<embed src="URL/play.php?file=success.wav&log=353534543" autostart=true loop=false> 
```

使用这种参数化 URL 在浏览器中播放 wav 文件的任何其他好方法。我不想使用闪光灯。

每次打开下载窗口时都不会播放音频。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T23:33:43.470

试试这个：

`<embed src="URL/play.php?file=success.wav&log=353534543" autostart=true loop=false>`

您不需要那些额外的引号，它们会破坏标签。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T23:37:37.533

我不久前在一个项目中使用了这个，需要 JavaScript，它可能对你的实现来说有点过头了，但它是一个很好的跨浏览器兼容的解决方案。

**SoundManager2：** [http ://www.schillmania.com/projects/soundmanager2/](http://www.schillmania.com/projects/soundmanager2/)

在页面顶部：

```
<script type="text/javascript">
var music=1;
soundManager.setup({
    html5Test: /^(probably|maybe)$/i,
    useHTML5Audio: true,
    onready: function() {

        music = soundManager.createSound({
            id: 'music',
            url: 'URL/play.php?file=success.wav&log=353535',
        });
    }
});
</script> 
```

然后当你想要的时候：

```
<script type="text/javascript">
music.play();
</script> 
```

# html - 输入列表选择更改事件

> ID：15147728
> 
> 赞同：13
> 
> 时间：2013-02-28T23:31:57.450
> 
> 标签：html, list, events, input, html-datalist

我有这个例子：

```
<datalist id="browsers">
  <option value="Internet Explorer">
  <option value="Firefox">
  <option value="Google Chrome">
  <option value="Opera">
  <option value="Safari">
</datalist> 
```

**当用户选择选项（使用鼠标或键盘）**时，我需要捕获一个事件。

 **我尝试这样做`onchange="MySuperFunction();"`，但这仅在选择一个项目然后列表未聚焦时才有效。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-02-28T23:51:01.543

该`input`事件应该满足您的需要。据我了解，您不能直接使用数据列表，但它通过`list`属性连接到输入。此事件绑定将继续该输入：

```
document.getElementById('browsers-input').addEventListener('input', function (event) {
   if (event.inputType == 'insertReplacementText')
       console.log('autocomplete option selected'); 
}); 
```

[http://jsfiddle.net/vccfv/](http://jsfiddle.net/vccfv/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-04-22T12:49:25.730

要使用 JQuery 样式获得与“Explosion Pills”解决方案相同的效果：

```
$("#browsers-input").on("input", MySuperFunction); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-28T23:36:33.900

`jQuery`你可以[使用](http://jquery.com/)http://jquery.com/`.change`

```
$('datalist#browsers').change(MySuperFunction); 
```

或者

```
$('datalist#browsers').change(function(){
  // stuff
}); 
```**

# python - python-requests，找到正确的编码

> ID：15147733
> 
> 赞同：1
> 
> 时间：2013-02-28T23:32:07.653
> 
> 标签：python, python-requests

我在阅读未指定字符集的网页时遇到问题。它包含一些非 ascii 字符，例如欧元货币，我的浏览器能够很好地阅读它。在 Firefox 中，在页面信息上我可以看到使用的编码是“ISO-8859-1”和渲染模式“怪癖模式”。但是，python-requests 无法真正解码那些非 ascii 字符，并且在尝试将例如该字符串写入文本文件时出现错误。示例：

```
result = requests.get(url)
result.encoding = 'ISO-8859-1'
html = result.text
open('textfile.txt', 'w').write(html)
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
UnicodeEncodeError: 'ascii' codec can't encode character u'\x80' 
```

如果 u'\x80' 应该以 'ISO-8859-1' 编码代表欧元货币，这应该可以

```
print '\x80'.decode('ISO-8859-1') 
```

但我得到一个不可打印的字符，而不是欧元。

那么，该网页如何在浏览器中工作，但请求（urllib/2 也是）无法处理该编码？我也试过'utf-8'但同样的事情。有什么建议么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-28T23:37:56.003

问题是真正的编码是`cp1252`，就像你可以看到你这样做：

```
 print '\x80'.decode('cp1252') 
```

这个相关的答案提供了更多细节：

[PHP 函数 iconv 字符编码从 iso-8859-1 到 utf-8](https://stackoverflow.com/questions/3628202/php-function-iconv-character-encoding-from-iso-8859-1-to-utf-8)

它与 python 无关，但它是同一个问题，并提供了一些背景说明为什么会发生这种情况。

# javascript - 将新记录插入数据库时 是否需要使用模型？

> ID：15147735
> 
> 赞同：0
> 
> 时间：2013-02-28T23:32:32.463
> 
> 标签：javascript, node.js, backbone.js, backbone-model

我正在编写一个需要轮询的简单 Web 应用程序 - 使用与 RESTful Node API 和 Mongo DB 接口的 Backbone。

前提很简单：有5个主题，网络用户可以选择一个并进行投票。这会将一个文档插入到 Mongo 中，然后可以计算总票数。

我应该使用 BB 模型进行实际投票还是直接向 Node 发起 API 调用就足够了？我知道在修改 BB 模型时您会使用 .save() 但在这种情况下，我不会为前端创建另一个模型 - 我只是将文档插入数据库。

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T01:52:31.450

是的，我建议您在服务器端使用模型，主要用于验证。尽管从客户端直接插入 JSON 在技术上非常容易，但您永远不应盲目相信用户发送给您的数据，因为它很可能是恶意的。如果您要向其他用户重新显示该数据，则*尤其如此，但无论如何这仍然是一个好习惯。*

# jquery - 悬停不起作用

> ID：15147739
> 
> 赞同：0
> 
> 时间：2013-02-28T23:32:53.290
> 
> 标签：jquery

下面是我用于悬停的代码：

* * *

有人可以帮我找出问题吗？如果我遗漏了任何重要信息，请告诉我。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T00:19:00.537

删除 jQuery(document).ready(function($){ 和最后的右大括号。您将事件处理程序绑定到 onhover 事件，您不需要对 $(document).ready() 执行任何操作.

# python - 在 Python 中初始化/创建/填充字典的字典

> ID：15147740
> 
> 赞同：4
> 
> 时间：2013-02-28T23:32:57.467
> 
> 标签：python, dictionary

我以前在 python 中使用过字典，但我还是 python 新手。这次我使用的是字典的字典......即三层字典，并想在编程之前检查它。

我想将所有数据存储在这个三层字典中，并且想知道什么是一种很好的 Pythonic 方式来初始化，然后读取文件并写入这样的数据结构。

我想要的字典是以下类型：

```
{'geneid':
{'transcript_id':
{col_name1:col_value1, col_name2:col_value2}
}
} 
```

数据属于这种类型：

```
geneid\ttx_id\tcolname1\tcolname2\n
hello\tNR432\t4.5\t6.7
bye\tNR439\t4.5\t6.7 
```

关于如何以一种好的方式做到这一点的任何想法？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-28T23:46:19.490

首先，让我们从[`csv`](http://docs.python.org/2/library/csv.html)处理解析行的模块开始：

```
import csv
with open('mydata.txt', 'rb') as f:
    for row in csv.DictReader(f, delimiter='\t'):
        print row 
```

这将打印：

```
{'geneid': 'hello', 'tx_id': 'NR432', 'col_name1': '4.5', 'col_name2': 6.7}
{'geneid': 'bye', 'tx_id': 'NR439', 'col_name1': '4.5', 'col_name2': 6.7} 
```

因此，现在您只需将其重组为您喜欢的结构。这几乎是微不足道的，除了你必须处理这样一个事实，即你第一次看到一个给定的`geneid`你必须为它创建一个新的空`dict`，同样你第一次看到一个给定`tx_id`的`geneid`. 你可以解决这个问题[`setdefault`](http://docs.python.org/2/library/stdtypes.html#dict.setdefault)：

```
import csv
genes = {}
with open('mydata.txt', 'rb') as f:
    for row in csv.DictReader(f, delimiter='\t'):
        gene = genes.setdefault(row['geneid'], {})
        transcript = gene.setdefault(row['tx_id'], {})
        transcript['colname1'] = row['colname1']
        transcript['colname2'] = row['colname2'] 
```

您可以使用以下命令使其更具可读性[`defaultdict`](http://docs.python.org/2/library/collections.html#collections.defaultdict)：

```
import csv
from collections import defaultdict
from functools import partial
genes = defaultdict(partial(defaultdict, dict))
with open('mydata.txt', 'rb') as f:
    for row in csv.DictReader(f, delimiter='\t'):
        genes[row['geneid']][row['tx_id']]['colname1'] = row['colname1']
        genes[row['geneid']][row['tx_id']]['colname2'] = row['colname2'] 
```

这里的技巧是顶层`dict`是一个特殊的，`dict`当它第一次看到一个新键时返回一个空......`dict`它返回的空本身就是一个空`dict`。唯一困难的部分是`defaultdict`接受一个返回正确类型对象的函数，并且返回 a 的函数`defaultdict(dict)`必须用 a `partial`、`lambda`或显式函数编写。（ActiveState 上有一些配方，PyPI 上有模块，它们会给你一个更通用的版本，如果你愿意，可以根据需要创建新的字典。）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-28T23:55:58.270

我也在尝试寻找替代方案，并在stackoverflow中提出了这个也很好的答案：

[在 Python 中初始化 dicts 的最佳方法是什么？](https://stackoverflow.com/questions/651794/whats-the-best-way-to-initialize-a-dict-of-dicts-in-python)

基本上在我的情况下：

```
class AutoVivification(dict):
    """Implementation of perl's autovivification feature."""
    def __getitem__(self, item):
        try:
            return dict.__getitem__(self, item)
        except KeyError:
            value = self[item] = type(self)()
            return value 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-09-18T02:42:57.307

在为我的研究编码时，我必须经常这样做。您将需要使用 defaultdict 包，因为它允许您通过简单的分配在任何级别添加键：值对。回答完你的问题后我会告诉你的。这直接来自我的一个程序。关注最后 4 行（不是注释），并通过块的其余部分追溯变量以查看它在做什么：

```
from astropy.io import fits #this package handles the image data I work with
import numpy as np
import os
from collections import defaultdict

klist = ['hdr','F','Ferr','flag','lmda','sky','skyerr','tel','telerr','wco','lsf']
dtess = []

for file in os.listdir(os.getcwd()):
    if file.startswith("apVisit"):
        meff = fits.open(file, mode='readonly', ignore_missing_end=True)
        hdr = meff[0].header
        oid = str(hdr["OBJID"]) #object ID
        mjd = int(hdr["MJD5"].strip(' ')) #5-digit observation date
        for k,v in enumerate(klist):
            if k==0:
                dtess = dtess+[[oid,mjd,v,hdr]]
            else:
                dtess=dtess+[[oid,mjd,v,meff[k].data]]
        #header extension works differently from the rest of the image cube
        #it's not relevant to populating dictionaries
#HDUs in order of extension no.: header, flux, flux error, flag mask, 
# wavelength, sky flux, error in sky flux, telluric flux, telluric flux errors,
# wavelength solution coefficients, & line-spread function
dtree = defaultdict(lambda: defaultdict(lambda: defaultdict(list)))
for s,t,u,v in dtess:
    dtree[s][t][u].append(v)
#once you've added all the keys you want to your dictionary, 
#set default_factory attribute to None 
dtree.default_factory = None 
```

这是摘要版本。

1.  首先，对于 n 级字典，您必须以 [key_1, key_2, ... , key_n, value] 的形式将所有内容排序并转储到 (n+1) 元组列表中。
2.  然后，要初始化 n 级字典，只需键入“defaultdict(lambda:”(减去引号) n-1 次，最后粘贴“defaultdict(list)”(或其他数据类型)，然后关闭括弧。
3.  使用 for 循环附加到列表中。*注意：当您访问最低级别的数据值时，您可能必须键入 my_dict[key_1][key_2] [...][key_n][0] 来获取实际值，而不仅仅是数据的描述在其中键入。
4.  *编辑：当你的字典和你想要的一样大时，将 default_factory 属性设置为 None。

如果您尚未将 default_factory 设置为 None，您可以稍后通过键入类似 my_dict[key_1][key_2][...][new_key]=new_value 或使用 append() 命令来添加到嵌套字典。您甚至可以添加其他词典，只要您通过这些分配形式添加的词典本身没有嵌套。

* **警告！**该代码片段新添加的最后一行，将 default_factory 属性设置为 None，非常*重要*。您的 PC 需要知道您何时完成向字典的添加，否则它可能会继续在后台分配内存以防止[缓冲区溢出](https://en.wikipedia.org/wiki/Buffer_overflow)，从而耗尽您的 RAM，直到程序停止运行。这是一种[内存泄漏](https://en.wikipedia.org/wiki/Memory_leak)。写完这个答案后，我很难学到这一点。这个问题困扰了我好几个月，我什至不认为我是最终解决这个问题的人，因为我对内存分配一无所知。

# jquery - 压缩jquery编号函数

> ID：15147741
> 
> 赞同：0
> 
> 时间：2013-02-28T23:32:59.983
> 
> 标签：jquery, function

我确信这可能已经得到了回答，但我不太确定我在问什么，所以如果你能指出我正确的方向，那将非常感激。

好的，所以我有一个功能，除了 id 号之外的所有功能都相同，最多 30

有没有办法我可以做到这一点而无需重复 30 次

下面的例子

```
$('ul#grid li#project_001 a').click(function(){ 
$('.colOne').html(ajax_load).load('ajax/project_001.html');
}); 

$('ul#grid li#project_002 a').click(function(){ 
$('.colOne').html(ajax_load).load('ajax/project_002.html');
});

$('ul#grid li#project_003 a').click(function(){ 
$('.colOne').html(ajax_load).load('ajax/project_003.html');
}); 

$('ul#grid li#project_004 a').click(function(){ 
$('.colOne').html(ajax_load).load('ajax/project_004.html');
}); 
```

谢谢你们的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T23:36:00.307

像这样的东西会起作用：

```
$('#grid li[id^="project_"] a').click(function() {
    var id = $(this).closest('li').attr('id');

    $('.colOne').html(ajax_load).load('ajax/' + id + '.html');
}); 
```

虽然我会使用类`data-`并向这些`<li>`元素添加属性：

```
<li class="project" data-filename="ajax/project_004.html"> 
```

并使用`.data()`功能：

```
$('#grid li.project a').click(function() {
    var filename = $(this).closest('li').data('filename');

    $('.colOne').html(ajax_load).load(filename);
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T23:36:18.413

您想对属性进行匹配：

```
$('ul#grid li[id^="project_"] a').click(function(){

    var id = $(this).closest('li').attr('id');

    $('.colOne').html(ajax_load).load('ajax/'+id+'.html');
}); 
```

`[id^="project_"]`说`has an attribute that starts with "project_"`。

尽管您最好创建一个类，然后使用数据属性来存储数字：

```
<li class="project" data-projnum="004">... 
```

JS：

```
$('ul#grid li.project a').click(function(){ 

    var projnum = $(this).closest('li').data('projnum');

    $('.colOne').html(ajax_load).load('ajax/project_' + projnum + '.html');
}); 
```

# java - 在 Android 上从字符串创建 X509Certificate

> ID：15147743
> 
> 赞同：5
> 
> 时间：2013-02-28T23:33:08.107
> 
> 标签：java, android, oauth, oauth-2.0, x509certificate

因此，我正在开发一个 Android 应用程序，并且对我们公司的 OAuth2 实施进行了猛烈抨击（到目前为止，我的职业生涯的整合更糟糕，甚至还没有完成）。我负责交换客户端凭据部分——我将 PFX 格式的凭据作为 Base 64 编码字符串取回。然后我尝试这样做：

```
CredentialResponse resp = ServerAccessLayer.SSO.Model.CredentialFromJson(json);
CertificateFactory cf = CertificateFactory.getInstance("X.509");
InputStream cert = new ByteArrayInputStream(Base64.decode(resp.credential, Base64.DEFAULT));
X509Certificate x509 = (X509Certificate)cf.generateCertificate(cert); 
```

我已经在 SO 和博客文章中的几个地方看到了这个代码片段——据我所知，它应该可以工作，但我得到了这个：

```
java.security.cert.CertificateException: 
org.apache.harmony.security.asn1.ASN1Exception: 
DER: only definite length encoding MUST be used 
```

作为一个主要是 web/Javascript UI 程序员，我有点不知所措，一直沉迷于学习 Android 和编写这个应用程序。所以这可能是太多或太少的信息，但这是我作为凭证返回的 Base64 编码字符串：

```
MIACAQMwgAYJKoZIhvcNAQcBoIAkgASCA+gwgDCABgkqhkiG9w0BBwGggCSABIIDKzCCAycwggMjBgsqhkiG9w0BDAoBAqCCArIwggKuMCgGCiqGSIb3DQEMAQMwGgQUttWa2nEvTrfVXeWDOCNh8qEpljYCAgQABIICgJwzIJFcp/NpJnxO9vh8cLUR7GsYOdm1CDzPZs+JplogTakQmiqlmwnybAIGaj6qXgDadYbG5k/fIrXW1OLRWWQFMUaYxH6lDDPKLqCsSwnhbxsvmp51EC+V5QwS9Am6zoNdAUE1SDQILuei7QOgmTcYM5uFo8pM+iVT6E4MC8S9EDCFppT75+w5PAhlYOURq2IF3HKAmT+VDa3ucB8P8me4k48HqP/6jEObiSEFA8ecz4Qx9jBSmqpBUVECpJXznThrexD7wUplyiWDcT7AUyaIBt+Nlhi8KZx4suuMaz6+1POqnKt938WPEKLOfzNA1+ApvonMl8K2QjHrHZzEc9DuQHw+gU+daR5xRfjxuYGn06GaC2SOQlbn70wyQ3LAEnCMN968ANHMY3a8EoZuHWUak/cWt/cJVTkI0TqaBGtfHFSyc9cWGLQyq+g3hpr0r8ISKlTGB1oEI7dKiD1Dk4PtGBVWcBJT3odxhZU0a48pqawRffFIf7kLB6I6u3lZVLbJyub7hSgMVRKn5MH0WIBlmun6tV7/P2Cs9lY2YQKnl4VLF7rWmnVIJCx32sOgQQauUOEo7DCyghtes555gbEJ3phaq56ujolC9COsbbKg6sdwB23iIqlUaXHr9yLi69KNV6WIeZmsU8fnMugKHzNSPJ5gS7MwyexChROfoMOuqV/ge2h94Xp1pNOv0ZDO2bQWgosvi/sXbbXBBwbIZk5R+GEmXuRAxQ6vNTi3NeKoA/PGN5FLCNP4rYuNVt6M/D8Up8r+Si2GapGxmTh+ZPHLfKD0aIpH9kKNStlcn6EXNow1Yu1o2EEU2au/C9u+9fu8Wdvo3cFb+ApbCC/BuvUxXjAjBgkqhkiG9w0BCRUxFgQUgRcjM00QWPwbORwmOWeAU9NZM18wNwYJKoZIhvcNAQkUMSoeKABTAGEAZwBlACAASQBkACAATwBBAHUAdABoACAAQwBsAGkAZQBuAHQAAAAAAAAwgAYJKoZIhvcNAQcGoIAwgAIBADCABgkqhkiG9w0BBwEwKAYKKoZIhvcNAQwBBjAaBBSjKTSvGU2SSUmstu0OR+VSgaFkrwICBACggASCBGjmzeEsfvEZ1tIFxM5ycEGrVIjxUftJdVxEZcT7xB1yrqLBlBGu4aQKiYwAQHSt7irJ3HFb3O5dJ1r9ZIdlq/F9eknv4AmuZHm/0DJA75GfBIID6IKf7T+sOgeP6+DUxMmK0X5gCl+gPZksWxIdwCM3X9kP/tDY7N6eQnUs+jgw7AZ9B8dGJ4jevKBRK5ObNGTMt5i7qbVD1fvM/ePALHwCUL1KRMmhcDF/d8Rbzf1VhYjDN66ZYYgOHFzQhv5Wxu6AlSmm0NTFccTNGSx955SH1uD/7hG64uu+1qj/CgUkEBO94Ru1bx9ls5q3xK9/5C4qR166mks0dGfcJNgU0R3zPqUmK8/dp8RHfWrjQY3ZYFN3LSpKtG7acU1eAgmFGvvo9UUUl6KiwlYYOENLNcPccV3fLi04LyWAo9nFBHijz1TK6zLgAQYP675hqsU7CdF+/dggTGhlRaifdKvxlRy+YciZMFJ+34KFHJ09+xLyJqyuD/cBM3A5Sk1n47MtRMotUKpyxVcUv7Ua2ok49sPmXULPRHl8pQBZOYJVSqjaQ/J32xleV9lS25c3B8jAAKnQpRJLBdkCM/DM8jY0qw9zLjBhmDAl2HlJNBqcge8Obk76oTCF+xOzK7b5L2/RTFrnEQr12gllmmAun/x/7+8Exn6etDc+SbgdVVcUK88c+dYmt761y2K4bXAYEJS6HfxFkmiXcFzC4FqZ6jlK7SgpX0ZdOy6v6xwHDjvM9+rfe/4hZuI4RHW88L+/eDmyBVvIYmU1E2SvLaHWFmEOXRHA71noXwyC3vgN3HrpEyxs7HgTUm46AySSktDO7Gc2puFZD7N/HOKrnpTuIqkmNbcNE8zfGtlB7y39VdRZES4fAQ8V1vvWs21Vv7SRXOBiIqXuaK6A3iZv46ARTJD0ooJZybs0PHpT/pHfoBZaBXscWN19AFYYClHNUSWgJ/0af66uK7WZnoqHfy1L/SanN0F2zvZgJ2IEjmOzFXX4zEwltEFu9K51gWgsfp23uJd5gzPUO4ChSd3DQarkpfXfhJsYfInrJE4mTy2hf6YQTrQOJaLvKvKpLGKplCjWIPyEnr2mr/8d6qLXT7OVY9VPtfh8X9LQabVFmNyPwt6R4Ih9zG6D0yZYzIJN7I1+YzSjmAchcs9ONmIDg9Yi3FfCScdZ/gxPYeGUGOLT2bizUkcMmMX6gDc1TTmcSxjIY+fRzfVrXx+l4k5ehfMjokI+Oi04ZvU4pQvoCralP9S08toh+52bFt1xn67PH33riEkpqkjNuWRgXjCsO63qXMJg6IIYkMi/zATsj9wpxd1wOJYtcFQHciKLbP1miBux0RlxnYGWrj/YZ1cK3LY89s725W/qNqJrckZPgvpJ1CRBC5LW6epLUlGBXWadqVtaWm0mU7GbBbFWluo97ziUcrxzHZ0M/qvuKAEWep5C/DsEPdlLODzc2eAB+BdDnktsF0N26uSPgNVsFWcPQqeor9JXquY54D/P4Reim9cr6f1WQ3sAAAAAAAAAAAAAAAAAAAAAAAAwPTAhMAkGBSsOAwIaBQAEFKc7/KC56/8KHnEF46zNWh+L6HxLBBQ0t41WJfRszNhVGtti7Zi6m8/q9wICBAAAAA== 
```

我几乎没有能力联系实际编写 SSO 提供程序的人（他们在另一个国家，即使是最详细的电子邮件也回复了基本无用的信息和对我毫无意义的日志条目），所以我很友好必须自己弄清楚这一点。如果有人对此过程有任何疑问，此异常，编码证书或我正在使用的代码有问题，*请*帮忙，我觉得我开始因尝试随机事物而让它们无法正常工作而发疯。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2019-04-08T08:31:34.703

这是在 Kotlin 中使用[CertificateFactory](https://developer.android.com/reference/java/security/cert/CertificateFactory)制作的函数。输入可以是你提到的（不是DER）。

```
private fun certificateFromString(base64: String): X509Certificate? {
    val decoded = Base64.decode(base64, Base64.NO_WRAP)
    val inputStream = ByteArrayInputStream(decoded)

    return CertificateFactory.getInstance("X.509").generateCertificate(inputStream) as? X509Certificate
} 
```

# ios - 使用消失点投影向 CAlayer 添加扭曲

> ID：15147746
> 
> 赞同：1
> 
> 时间：2013-02-28T23:33:29.403
> 
> 标签：ios, calayer, perspective, catransform3d, vanishing-point

我想以添加透视图（有两个消失点）的方式转换 UIView（见下文）。

![具有应用变换的 UIView](../Images/a41e969f6672f2713989c00c8ebbb5ba.png)

我想对视图执行此操作的原因是因为我希望转换后的视图的内容成为 UITableView 的单元格。

我是这种编码的新手，但我认为我必须更改属于子视图的 CALayer。但是，我相信，我感兴趣的转换不能使用 CATransform3D 创建。

有谁知道如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T22:13:52.453

看来我找到了一种规避/解决问题的方法：

使用 CATransform3D 转换，可以通过将视图分成两部分（两个独立的 UITableView）来逼近有利位置。这些应该由实现必要和协议的 UIViewController（不是 x 代码提供的 UITableViewController）管理。

然后在 viewDidLayoutSubviews: 方法中使用以下代码来转换两个 tableview。

```
- (void) viewDidLayoutSubviews {

     CATransform3D rotationAndPerspectiveTransform = CATransform3DIdentity;
    // left View
    // vantage point
    rotationAndPerspectiveTransform.m34 = 1.0 / -150.0;
    // Z-rotation of 90°
    rotationAndPerspectiveTransform = CATransform3DRotate(rotationAndPerspectiveTransform, 90.0 * M_PI/180.0, 0, 0,1);
    // X-rotation of 25°
    rotationAndPerspectiveTransform = CATransform3DRotate(rotationAndPerspectiveTransform, -25.0 * M_PI/180.0, 1, 0,0);
    // left view
    [self.view viewWithTag:1].layer.transform = rotationAndPerspectiveTransform;

    //right view
    rotationAndPerspectiveTransform = CATransform3DIdentity;
    rotationAndPerspectiveTransform.m34 = 1.0 / -150;
    // Z-rotation of 90°
    rotationAndPerspectiveTransform = CATransform3DRotate(rotationAndPerspectiveTransform, 90.0 * M_PI / 180.0, 0, 0,1);
    // X-rotation of 30°
    rotationAndPerspectiveTransform = CATransform3DRotate(rotationAndPerspectiveTransform, 25.0 * M_PI / 180.0, 1, 0,0);
    // right view
    [self.view viewWithTag:2].layer.transform = rotationAndPerspectiveTransform;
} 
```

转换后，两个 tableview 可以移动，以便它们整齐地组合在一起。剩下的唯一工作是将一台电视的滚动与另一台电视连接起来。我还没有想出那个。

# java - 编写一个方法，以 24 小时格式 (1430) 获取时间并以 12 小时格式 (2:30pm) 返回时间

> ID：15147750
> 
> 赞同：0
> 
> 时间：2013-02-28T23:34:04.177
> 
> 标签：java

所以，我正在尝试使用 SimpleDateFormat 来获取用户输入，但我一直收到错误，线程“main”java.lang.IllegalArgumentException 中的异常：无法将给定对象格式化为日期

不太确定如何让字符串接收信息并进行转换，或者是否可以这样做。任何可以引导我走向正确方向的评论将不胜感激。

```
import java.text.SimpleDateFormat;
import java.util.Date;
import java.util.Scanner;

public class takeTime {

    public static void main(String[] args) {

        Scanner reader = new Scanner(System.in);

        System.out.print( "Please enter a time: " );
        String now = reader.nextLine();
        SimpleDateFormat format = new SimpleDateFormat("h:mm a");
        System.out.println( format.format(now));
    }

} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-28T23:36:02.570

您需要将用户的输入转换为`Date`第一个。

```
Scanner reader = new Scanner(System.in);

System.out.print( "Please enter a time: " );
String now = reader.nextLine();
Date date = new SimpleDateFormat("HHmm").parse(now);
SimpleDateFormat format = new SimpleDateFormat("h:mm a");
System.out.println( format.format(date)); 
```

# python - 如何检查列表中的所有项目是否在另一个列表中？

> ID：15147751
> 
> 赞同：25
> 
> 时间：2013-02-28T23:34:07.283
> 
> 标签：python

我有两个清单说

```
List1 = ['a','c','c']
List2 = ['x','b','a','x','c','y','c'] 
```

现在我想知道 List1 的所有元素是否都在 List2 中。在这种情况下，一切都有。我不能使用子集函数，因为我可以在列表中有重复的元素。我可以使用 for 循环来计算 List1 中每个项目的出现次数，看看它是否小于或等于 List2 中的出现次数。有一个更好的方法吗？

谢谢。

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2013-02-28T23:40:29.870

当出现次数无关紧要时，您仍然可以通过动态创建集合来使用子集功能：

```
>>> list1 = ['a', 'c', 'c']
>>> list2 = ['x', 'b', 'a', 'x', 'c', 'y', 'c']
>>> set(list1).issubset(list2)
True 
```

如果您需要检查每个元素在第二个列表中出现的次数是否至少与在第一个列表中出现的次数一样多，您可以使用 Counter 类型并定义您自己的子集关系：

```
>>> from collections import Counter
>>> def counterSubset(list1, list2):
        c1, c2 = Counter(list1), Counter(list2)
        for k, n in c1.items():
            if n > c2[k]:
                return False
        return True

>>> counterSubset(list1, list2)
True
>>> counterSubset(list1 + ['a'], list2)
False
>>> counterSubset(list1 + ['z'], list2)
False 
```

如果您已经有计数器（这可能是存储数据的有用替代方法），您也可以将其写为一行：

```
>>> all(n <= c2[k] for k, n in c1.items())
True 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2015-06-25T08:59:29.023

请注意以下事项：

```
>>>listA = ['a', 'a', 'b','b','b','c']
>>>listB = ['b', 'a','a','b','c','d']
>>>all(item in listB for item in listA)
True 
```

如果您像用英语一样阅读“all”行，这并没有错，但可能会产生误导，因为 listA 有第三个 'b' 而 listB 没有。

这也有同样的问题：

```
def list1InList2(list1, list2):
    for item in list1:
        if item not in list2:
            return False
    return True 
```

只是一个注释。以下不起作用：

```
>>>tupA = (1,2,3,4,5,6,7,8,9)
>>>tupB = (1,2,3,4,5,6,6,7,8,9)
>>>set(tupA) < set(TupB)
False 
```

如果将元组转换为列表，它仍然不起作用。我不知道为什么字符串可以工作，但整数不行。

有效，但同样存在不计算元素出现次数的问题：

```
>>>set(tupA).issubset(set(tupB))
True 
```

使用集合并不是多出现元素匹配的综合解决方案。

但这是一个单线解决方案/适应shantanoo的答案，无需尝试/例外：

```
all(True if sequenceA.count(item) <= sequenceB.count(item) else False for item in sequenceA) 
```

使用三元条件运算符包装列表推导的内置函数。Python 太棒了！请注意，“<=”不应为“==”。

有了这个解决方案，序列 A 和 B 可以是类型元组和列表以及其他具有“计数”方法的“序列”。两个序列中的元素都可以是大多数类型。我不会像现在这样将它与dicts一起使用，因此使用“sequence”而不是“iterable”。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-05-04T17:56:50.957

使用[Counter](https://docs.python.org/3/library/collections.html#collections.Counter)和内置交集方法的解决方案（注意这`-`是正确的多重集差异，而不是元素减法）：

```
from collections import Counter

def is_subset(l1, l2):
    c1, c2 = Counter(l1), Counter(l2)
    return not c1 - c2 
```

测试：

```
>>> List1 = ['a','c','c']
>>> List2 = ['x','b','a','x','c','y','c']
>>> is_subset(List1, List2)
True 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-05-04T18:27:15.473

> 我不能使用子集函数，因为我可以在列表中有重复的元素。

这意味着您希望将列表视为[*multisets*](https://en.wikipedia.org/wiki/Multiset)而不是*sets*。在 Python 中处理多重集的常用方法是[`collections.Counter`](https://docs.python.org/3/library/collections.html#collections.Counter)：

> A`Counter`是用于计算可散列对象的 dict 子类。它是一个无序集合，其中元素存储为字典键，它们的计数存储为字典值。计数可以是任何整数值，包括零计数或负计数。**该类`Counter`类似于其他语言中的bags 或multisets。**

而且，虽然您*可以*`Counter`通过循环和比较计数来实现多集的子集（用 实现），就像在[poke 的回答](https://stackoverflow.com/a/15147825/908494)中那样，这是不必要的 - 就像您*可以*通过循环和测试实现集合的子集（用`set`or实现）一样，但它是不必要的。`frozenset``in`

该`Counter`类型已经实现了所有集合运算符，这些运算符以明显的方式扩展为多集。^(<1)因此，您可以根据这些运算符编写子集，它适用于两者`set`并且`Counter`开箱即用。

与（多）集差异：²

```
def is_subset(c1, c2):
    return not c1 - c2 
```

或与（多）集交集：

```
def is_subset(c1, c2):
    def c1 & c2 == c1 
```

* * *

[1\. 你可能想知道为什么，如果`Counter`实现了集合运算符，它不仅仅实现了真子集`<`和`<=`子集的and。虽然我找不到电子邮件线程，但我很确定这是讨论过的，答案是“集合运算符”被定义为初始版本中定义的特定运算符集`collections.abc.Set`（此后已扩展， IIRC…)，并非所有`set`为了方便而碰巧包含的运算符，`Counter`就像没有命名方法那样`intersection`的命名方法对其他类型友好，而`&`不仅仅是因为`set`这样做。]

[2\. 这取决于这样一个事实，即 Python 中的集合在为空时预期为假，否则为真。这[在此处记录了内置类型，并且在](https://docs.python.org/3/reference/expressions.html#boolean-operations)[此处](https://docs.python.org/3/reference/datamodel.html#object.__bool__)解释了`bool`测试回退​​到的事实- 但它最终只是一种约定，因此如果有充分的理由，像 numpy 数组这样的“准集合”可能会违反它。它适用于“真正的集合”，如,等。如果你真的担心，你可以写，但请注意，这违反了[PEP 8](https://www.python.org/dev/peps/pep-0008/)的精神。`len``Counter``OrderedDict``len(c1 - c2) == 0`]

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-01T00:03:16.487

如果 List1 中的所有项目都在 List2 中，这将返回 true

```
def list1InList2(list1, list2):
    for item in list1:
        if item not in list2:
            return False
    return True 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2013-03-05T20:54:04.963

```
def check_subset(list1, list2):
    try:
        [list2.remove(x) for x in list1]
        return 'all elements in list1 are in list2'
    except:
        return 'some elements in list1 are not in list2' 
```

# php - 确认成功插入行时出现PHP错误

> ID：15147755
> 
> 赞同：1
> 
> 时间：2013-02-28T23:34:42.037
> 
> 标签：php, mysql

人们

概述我正在创建一个用于学习目的的虚拟网站，因此它的功能主义者是基本的和安全的，不在议程 atm 上。

我遇到了这个我无法解决的小问题。所以我为什么要做的是添加一个新帐户并回显一条消息，说插入是悬疑的，但是我在一个我想添加新记录的地方收到一条错误消息，说假设持有的变量消息未定义。

更多：所以，当我在 wbesite 的主页上并单击注册按钮时，会弹出错误消息，但是当我实际提交查询以添加帐户时，错误消息会更改为我要显示的消息.

```
<?php

if(isset($_POST['submited'])){

    include('connect_mysql.php');

    $username= $_POST['username'];
    $password = $_POST['password'];
    $firstname = $_POST['first_name'];
    $lastname = $_POST['last_name'];
    $email = $_POST['email'];

    $NewAccountQuery = "INSERT INTO users (username, password, first_name, last_name, email) VALUES ('$username','$password', '$firstname', '$lastname', '$email')";

    if(!mysql_query($NewAccountQuery)){

        die(mysql_error());

    }//end of nested if statment

    if($NewAccountQuery){
         echo $confirm = "1 record added to the database";
    }
}//end of if statment

?>
<html>
<head>

<title>Home Page</title>
<meta http-equiv="content-type" content="text/html; charset=iso-8859-1" />
<link href="style.css" rel="stylesheet" type="text/css" />
</head>
<body>

    <div id="wrapper">
        <header><h1>E-Shop</h1></header>

        <article>
        <h1>Welcome</h1>

            <h1>Create Account</h1>

        <div id="login">

                <ul id="login">

                <form method="post" action="register.php"  >
                    <fieldset>  
                        <legend>Fill in the form</legend>

                        <label>Select Username : <input type="text" name="username" /></label>
                        <label>Password : <input type="password" name="password" /></label>
                        <label>Enter First Name : <input type="text" name="first_name" /></label>
                        <label>Enter Last Name : <input type="text" name="last_name" /></label>
                        <label>Enter E-mail Address: <input type="text" name="email" /></label>
                    </fieldset>
                        <br />

                        <input name="submited" type="submit" submit="submit" value="Create Account" class="button">

                </form>

                </div>
            <form action="index.php" method="post">
            <div id="login">
                <ul id="login">
                    <li>
                        <input type="submit" value="back" onclick="index.php" class="button">   
                    </li>
                </ul>
            </div>      
            </form>

        </article>
<aside>

                <?php print $confirm; ?>

</aside>

<div id="footer">This is my site i Made coppyrights 2013 Tomazi</div>
</div>

</body>
</html> 
```

好的，这是我提交查询之前的图像： ![在此处输入图像描述](../Images/ae62c5789a033afd426b5a964ca60cb1.png)

我提交查询后的图像： ![在此处输入图像描述](../Images/e0a0176818f21450da2906821dceff68.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T23:41:34.687

我认为错误信息很清楚。 `$confirm`没有定义。您只需在“成功查询”部分定义它。`if(isset($_POST['submited'])){`一个简单的解决方案是在整个块之前定义它。只要放`$confirm = '';`，什么都不会打印出来。

* * *

一些注意事项：

由于您正在学习并且这是全新的，您现在应该**停止**使用 ext/mysql 并[使用`PDO`or`mysqli`](http://www.php.net/manual/en/mysqlinfo.api.choosing.php)作为您的数据库引擎（我更喜欢前者）。

还有，`if($NewAccountQuery){`意义不大。它永远是正确的，因为它只是您之前定义的字符串。如果你切换到`PDO`你可以检查[`PDOStatement::rowCount`](http://php.net/manual/en/pdostatement.rowcount.php)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T23:55:45.387

基本上问题是当您第一次加载主页时 - 它不会进入`if(isset($_POST['submited']))`条件，因为 $_POST['submitted'] 没有设置。而且由于您在此循环中设置了 $confirm，因此该语句 `<?php print $confirm; ?>`不会找到 $confirm 变量集。因此它会发出 PHP NOTICE .. 所以就像有人在这里说的那样，要么`$confirm = '';`在 if 条件之前设置，要么你可以在打印时做这样的事情

```
<?php 
if(isset($confirm))
   print $confirm; 
?> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-28T23:38:46.610

```
echo $confirm = "1 record added to the database"; 
```

应该：

```
$confirm = "1 record added to the database";
echo $confirm; 
```

看起来你不需要那里的回声，因为你在其他地方回声。如果您只想分配`$confirm`给`1 record added to the database`，那么您只需要分配它，而无需回显。Echo 基本上以与 print 相同的方式将其输出到 html。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-28T23:51:58.090

```
<?php
if(isset($_POST['submited'])){

    include('connect_mysql.php');

    $username= $_POST['username'];
    $password = $_POST['password'];
    $firstname = $_POST['first_name'];
    $lastname = $_POST['last_name'];
    $email = $_POST['email'];

    $NewAccountQuery = "INSERT INTO users VALUES ('$username','$password', '$firstname', '$lastname', '$email')"; // simplified query if those are only 5 cols in order
    $result = mysql_query($NewAccountQuery);

    if($result){
       $confirm = "1 record added to the database";
    } else {
        exit('error inserting row');
    }
}
?> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-28T23:39:36.097

如果您只是回显或打印字符串，则无需先将其分配给变量。这些中的任何一个都可以工作：

```
echo '1 record added to the database'; 
```

或者

```
$confirm = '1 record added to the database';
echo $confirm; 
```

# database - 如何使用 Solr 4.0+ 索引包含为数据库 BLOB 的丰富格式文档？

> ID：15147757
> 
> 赞同：4
> 
> 时间：2013-02-28T23:34:47.843
> 
> 标签：database, solr, blob, apache-tika, solr-cell

我找到了一些相关的解决方案来解决这个问题。正如我将解释的那样，相关的解决方案对我不起作用。（我正在使用 Solr 4.0 并索引存储在 Oracle 11g 数据库中的数据。）

Jonck van der Kogel 的相关解决方案（从 2009 年开始）[在此处](http://searchhub.org/2009/08/09/searching-rich-format-documents-stored-in-a-dbms/ "这里")进行了解释。他描述了创建自定义 Transformer，有点像 Solr 附带的 ClobTransformer。这是一条优雅的道路，但没有使用现在与 Solr 集成的 Tika。（他使用外部 PDFBox 和 FontBox。）这会创建多个维护/升级依赖项。此外，除了 PDF 之外，我还需要能够索引 Word 文档。

由于 Kogel 的解决方案似乎走在了正确的道路上，有没有办法在自定义 Transformer 中使用 Solr 包含的 Tika 类？这将允许所有 Tika 功能与 Kogel 优雅的数据库解决方案一起使用。

另一个相关的解决方案是Solr 附带的[ExtractingRequestHandler (ERH)。](http://wiki.apache.org/solr/ExtractingRequestHandler)但是，顾名思义，这是一个请求处理程序，例如处理富文本文档的 HTTP 帖子。以这种方式从数据库中提取文档存在性能和安全问题。我必须使数据库 BLOB 可以通过 HTTP 访问。我没有发现关于使用 ERH 从数据库 BLOB 中直接摄取的讨论。是否可以使用 Solr Cell 直接从数据库 BLOB 中摄取？

另一个相关的解决方案是编写一个 Transformer（就像上面的 Kogel 一样）将一个 byte[] 转换为一个字符串（来自 DataImportHandler FAQ）。对于真正的二进制文档，这会将垃圾信息输入索引，而不会像 Tika 那样正确提取文本元素。不会工作。

最后一个相关的解决方案是 RichDocumentHandler 提供的 UpdateRichDocuments。这已被弃用，并且在 Solr 中不再可用。该页面将您引向 ExtractingRequestHandler（如上所述）。

似乎正确的解决方案是使用 DataImportHandler 和使用 Tika 类的客户 Transformer。这是如何运作的？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-02T03:14:20.330

许多小时后……首先，关于这个问题有很多误导、错误和无用的信息。似乎没有一个页面可以在一个地方提供所有内容。所有的信息都是出于好意，但是在不同的版本之间，有些超出我的想象，它并没有解决问题。这是我所学到的知识和解决方案的集合。*重申一下，我使用的是 Solr 4.0（在 Tomcat 上）+ Oracle 11g。*

**解决方案概述：DataImportHandler + TikaEntityProcessor + FieldStreamDataSource**

*第 1 步*，确保更新您的`solrconfig.xml`，以便 solr 可以找到 TikaEntityProcessor + DataImportHandler + Solr Cell 的东西。

```
<lib dir="../contrib/dataimporthandler/lib" regex=".*\.jar" />
<!-- will include extras (where TikaEntPro is) and regular DIH -->
<lib dir="../dist/" regex="apache-solr-dataimporthandler-.*\.jar" />
<lib dir="../contrib/extraction/lib" regex=".*\.jar" />
<lib dir="../dist/" regex="apache-solr-cell-\d.*\.jar" /> 
```

*第 2 步*，修改您的`data-config.xml`以包含您的 BLOB 表。这是我遇到最大麻烦的地方，因为随着版本的变化，这个问题的解决方案也发生*了很大变化。*另外，使用多个数据源并将它们正确地连接在一起对我来说并不直观。完成后非常光滑。确保替换您的 IP、SID 名称、用户名、密码、表名等。

```
<dataConfig>
  <dataSource name="dastream" type="FieldStreamDataSource" />
  <dataSource name="db" type="JdbcDataSource"
    driver="oracle.jdbc.OracleDriver"
    url="jdbc:oracle:thin:@192.1.1.1:1521:sid"
    user="username"
    password="password"/>
  <document>
    <entity 
      name="attachments" 
      query="select * from schema.attachment_table"
      dataSource="db">
      <entity 
        name="attachment" 
        dataSource="dastream"
        processor="TikaEntityProcessor"
        url="blob_column"
        dataField="attachments.BLOB_COLUMN"
        format="text">
        <field column="text" name="body" />
      </entity>
    </entity>
    <entity name="unrelated" query="select * from another_table" dataSource="db">
    </entity>
  </document>
</dataConfig> 
```

重要说明。如果您在`"No field available for name : whatever"`尝试导入时遇到错误，则 FieldStreamDataSource 无法解析您提供的数据字段名称。对我来说，我必须拥有`url`带有小写列名的属性，然后是`dataField`带有 outside_entity_name.UPPERCASE_BLOB_COLUMN 的属性。此外，一旦我的列名错误，这也会导致问题。

*第 3 步*，您需要修改`schema.xml`以添加 BLOB 列字段（以及您需要索引/存储的任何其他列）。根据您的需要进行修改。

```
<field name="body" type="text_en" indexed="false" stored="false" />
<field name="attach_desc" type="text_general" indexed="true" stored="true" />

<field name="text" type="text_en" indexed="true" stored="false" multiValued="true" />
<field name="content" type="text_general" indexed="false" stored="true" multiValued="true" />

<copyField source="body" dest="text" />
<copyField source="body" dest="content" /> 
```

有了它，您应该可以节省大量时间来获取二进制、富文本文档（也称为富文档），这些文档作为 BLOB 存储在使用 Solr 索引的数据库列中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-01T03:46:33.213

Solr 已经通过[TikaEntityProcessor提供了 Tika 和 DIH 的集成](http://wiki.apache.org/solr/TikaEntityProcessor)

集成 - [SOLR-1358](https://issues.apache.org/jira/browse/SOLR-1358)
斑点处理 - [SOLR-1737](https://issues.apache.org/jira/browse/SOLR-1737)

你只需要找到正确的组合。

# macos - 如何将我的 mac 触摸板变成 midi 控制器？

> ID：15147758
> 
> 赞同：0
> 
> 时间：2013-02-28T23:34:56.183
> 
> 标签：macos, midi, vst, trackpad

我想编写一个自定义脚本/程序，允许我将信号从我的 mac 触控板发送到 midi。我什至不知道从哪里开始，我是 ac# 程序员，所以对我来说不容易:-(

有人能指出我正确的方向吗？

谢谢，皮特

# android - 可以使android填充不可点击吗？

> ID：15147765
> 
> 赞同：1
> 
> 时间：2013-02-28T23:35:42.397
> 
> 标签：android, dynamic, padding

编辑：通过埃米尔的评论找到答案。代码最终是这样的：

```
FrameLayout.LayoutParams params = new FrameLayout.LayoutParams(
               FrameLayout.LayoutParams.WRAP_CONTENT, 
               FrameLayout.LayoutParams.WRAP_CONTENT);
params.setMargins(left, top, right, bottom);
view.setLayoutParams(params); 
```

谢谢大家 :D

我目前正在编写一个 Android 应用程序，并且我有一个动态创建的树，其中显示 ImageView 元素。然而，为了排列这些图像，我使用了向左填充来正确排列它们，动态地改变填充的计算方式，以便一切都变得均匀。但是，当我这样做时，填充会覆盖左侧的一些图像，即使您可以看到此填充后面的图像，当您单击该图像时，它也会评估正在使用填充的图像（最远左元素）。我基本上想知道是否有一种方法可以以编程方式设置对图像执行填充但不可点击的操作？边距是有意义的，但你不能在 ImageViews 上设置边距。

设置的树是这样的：

```
-----A-----
--B--C--D--
-E-F----G-- 
```

想象每个字母都是一个 ImageView，动态放置并带有填充。但是，如果我单击 B 或 C，将评估 D 的代码，因为它的左侧填充覆盖了 B 和 C。对于 E 或 F，同样如此，单击它们，将评估 G。我想不出另一种方式来放置这些 ImageView。任何帮助是极大的赞赏。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-28T23:49:45.057

考虑用 layout_margin 属性替换您的填充。这样，分隔填充视图的区域不被视为视图的一部分，而是作为其所在布局的一部分。

所以使用

```
android:layout_margin="10dp" 
```

或者：

```
android:layout_marginLeft="10dp" 
```

满足您的需求。

# android - 设置开发人员选项（不保留活动）时杀死应用程序

> ID：15147767
> 
> 赞同：1
> 
> 时间：2013-02-28T23:35:52.580
> 
> 标签：android

我有两个活动，`A1`并且有 Next 按钮，Kill app 按钮。有杀死应用程序按钮。`A2``A1``A2`

`A1`（下一步按钮）转到`A2`。在这两个活动的退出应用程序中，我调用`android.os.Process.killProcess(android.os.Process.myPid());`以完全终止该应用程序。现在我的问题是当开发人员选项（不保留活动）被启用时，用户就会`A1`进入`A2`并杀死。应用程序将直接转到`A1`，我知道如果我们启用选项 android 会删除返回的活动。但是当我退出应用程序时，为什么 android 将其视为后退键。我对此有很大的担忧，因为当我按下 HOME 按钮时，我们只是杀死了该应用程序。当用户重新进入应用程序时，android 直接进入按下 HOME 键的屏幕。谁能告诉我应该怎么做才能完全清除退出应用程序的后台信息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T01:02:59.417

调用activity A2后，调用finish()，如下：

```
callingActivityA2() {
    Intent i = new Intent(this, activityA2.class);
    startActivity(i);
    finish();
 } 
```

# r - 如何在 R 图中显示đ、ư、ơ、ă

> ID：15147769
> 
> 赞同：4
> 
> 时间：2013-02-28T23:36:01.240
> 
> 标签：r, character-encoding

我正在尝试将越南语标签放在 R 图中。我使用 RStudio 并使用 UTF-8 编码保存我的代码。它很好地处理了我在代码中输入的越南语字符，我的意思是代码中的所有内容都正确显示。但是，在我制作的图表中，虽然许多字符显示正常，但有几个重要字符没有正确显示，包括

đ - 错误地显示为 d

ư - 错误地显示为 u

ơ - 错误地显示为 o

ă - 错误地显示为

不幸的是，这使我的图表看起来不专业且不值得信赖。

如果有人能帮我解决这个问题，我将不胜感激。

非常感谢！

董里

* * *

@DWin：我在 Windows 7 上，这是我的 sessionInfo()

```
R version 2.15.0 (2012-03-30)
Platform: x86_64-pc-mingw32/x64 (64-bit)

locale:
[1] LC_COLLATE=English_United States.1252  LC_CTYPE=English_United States.1252   
[3] LC_MONETARY=English_United States.1252 LC_NUMERIC=C                          
[5] LC_TIME=English_United States.1252    

attached base packages:
[1] stats     graphics  grDevices utils     datasets  methods   base     

loaded via a namespace (and not attached):
[1] MASS_7.3-17    MatchIt_2.4-20 tools_2.15.0 
```

* * *

@krlmlr：这是我的简单图表代码：

```
knorelative.count <- matrix(nrow=5,ncol=1)
knorelative.count[,1] <- c(1579,638,215,100,120)

par(mar=c(2,4,4,2))
barplot(prop.table(knorelative.count),beside=TRUE,
        yaxt="n",ylim=c(0,.6),
        legend=c("không ai biết",
                 "không biết nhiều hơn biết",
                 "nửa biết, nửa không biết",
                 "biết nhiều hơn không biết",
                 "tất cả đều biết"),
        main="Người khác trong gia đình, họ hàng biết hay không")
axis(2,at=seq(0,.6,.1),labels=paste(100*seq(0,.6,.1),"%",sep=""),las=1) 
```

当我运行它时，主标题中的 đ 和两个ơ 和图例中的 đ 变成 d 和 o。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-01T00:35:31.130

通过十六进制代码指定 unicode 字符通常更安全：

```
plot(1:4,rep(1,4),pch=c("\u0111","\u01B0","\u01A1","\u0103"),cex=4) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-01T16:25:44.360

对于遇到同样问题的任何越南人，这里有一个使用 James 建议的十六进制代码进行修复的示例：

> 打印（“trường”）

[1] “真”

> 打印（“tr\u01B0ờng”）

[1] "trường"

虽然我可以在我的 R 控制台中输入越南语，在这个例子中是单词 trường，但是任何类型的输出（例如打印、图形）都无法显示字符ư。用十六进制代码替换ư 可以修复输出。

（注意：我之前使用了 paste 函数，但后来根据 James 的建议对其进行了编辑，将十六进制代码粘贴在字符串中。）

我非常感谢以这种方式学习。我将为我目前正在撰写的报告这样做。

董里

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-10-20T05:07:40.897

您将代码保存在另一个文件中。示例：文件夹`R/graph_display.R` 之后运行此代码

```
eval(parse("R/graph_display.R", encoding = "UTF-8")) 
```

# php - 使用 php/sql 从两个不同的对象中获取参数以插入数据库

> ID：15147773
> 
> 赞同：1
> 
> 时间：2013-02-28T23:36:24.050
> 
> 标签：php, sql, object

我正在尝试创建一个“CD Store”程序，我想在数据库中存储信用卡详细信息，但我希望数据库引用我在其他地方创建的用户 ID。如何将参数从另一个对象传递给新对象？我试图编写代码，但我不断收到此错误

```
Fatal error: Call to a member function getId() on a non-object in applications/XAMPP/xamppfiles/htdocs/CDStore/creditCardAccess.php on line 36 
```

我知道它可能没有被引用，并且 $user 变量在 netbeans 中显示为黄色。我不知道我会怎么做？任何指针将不胜感激。这是我的代码谢谢

```
<?php

class creditCardAccess {

protected $link;

public function __construct() {
    $host = "localhost";
    $username = "root";
    $password = "";
    $database = "CDStore";

    $dsn = "mysql:host=$host;dbname=$database";

    $this->link = new PDO($dsn, $username, $password);
    $this->link->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);
}

public function __destruct() {
    $this->link = null;
}
public function insertCreditCard($creditCard) {
    if (!isset($creditCard) && $creditCard != null) {
        throw new Exception("Credit Card Required");
    }

    $sql = "INSERT INTO creditCards(cardType, cardName, cardNumber, cardExpiryDate, cardCCV, userID)"
            . "VALUES (:cardType, :cardName, :cardNumber, :cardExpiryDate, :cardCCV, :userID)";

    $params = array(
        'cardType' => $creditCard->getCardType(),
        'cardName' => $creditCard->getCardName(),
        'cardNumber' => $creditCard->getCardNumber(),
        'cardExpiryDate' => $creditCard->getCardExpiryDate(),
        'cardCCV' => $creditCard->getCardCCV(),
        'userID' => $user->getId()
    );

    $stmt = $this->link->prepare($sql);
    $status = $stmt->execute($params);
    if ($status != true) {
        $errorInfo = $stmt->errorInfo();
        throw new Exception("Could Not Add Credit Card: " . $errorInfo[2]);
    }

    $id = $this->link->lastInsertId('creditCard');
    $creditCard->setId($id);
}

}
?> 
```

第 36 行是 'userID' => $user->getId()

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T23:43:44.157

首先在此文件中包含您的用户类。然后在类中创建一个用户属性。在构造函数中创建用户类的实例。然后就可以使用用户类函数了。

```
<?php

require_once("user.class.php"); //the user management class path

class creditCardAccess {

protected $link;

var $user;

public function __construct() {
    $host = "localhost";
    $username = "root";
    $password = "";
    $database = "CDStore";

    $dsn = "mysql:host=$host;dbname=$database";

    $this->link = new PDO($dsn, $username, $password);
    $this->link->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);
    $this->user = new User();
}

public function __destruct() {
    $this->link = null;
}
public function insertCreditCard($creditCard) {
    if (!isset($creditCard) && $creditCard != null) {
        throw new Exception("Credit Card Required");
    }

    $sql = "INSERT INTO creditCards(cardType, cardName, cardNumber, cardExpiryDate, cardCCV, userID)"
            . "VALUES (:cardType, :cardName, :cardNumber, :cardExpiryDate, :cardCCV, :userID)";

    $params = array(
        'cardType' => $creditCard->getCardType(),
        'cardName' => $creditCard->getCardName(),
        'cardNumber' => $creditCard->getCardNumber(),
        'cardExpiryDate' => $creditCard->getCardExpiryDate(),
        'cardCCV' => $creditCard->getCardCCV(),
        'userID' => $user->getId()
    );

    $stmt = $this->link->prepare($sql);
    $status = $stmt->execute($params);
    if ($status != true) {
        $errorInfo = $stmt->errorInfo();
        throw new Exception("Could Not Add Credit Card: " . $errorInfo[2]);
    }

    $id = $this->link->lastInsertId('creditCard');
    $creditCard->setId($id);
}

}
?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T23:46:33.793

您的 $user 对象应作为参数传递给函数，否则您将永远无法看到 $user

```
public function insertCreditCard($creditCard, $user) { 
```

# ruby-on-rails - 导入 csv 文件时，如何在 2 个模型之间进行批量分配？

> ID：15147777
> 
> 赞同：0
> 
> 时间：2013-02-28T23:36:35.603
> 
> 标签：ruby-on-rails, ruby, csv, nested-attributes, nested-resources

我可以使用单个模型的属性导入 CSV 文件并创建一个新对象（在本例中为列表）。

我把它放在列表模型中

```
accepts_nested_attributes_for :address 
```

其中地址是一个关联模型（地址有很多列表，列表属于地址）。

我以为在导入 CSV 文件时我也可以从地址模型中批量分配属性，但出现错误：

```
Can't mass-assign protected attributes: unit_number 
```

其中地址模型中的属性之一中的 unit_number （它在 attr 中可访问）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-01T00:11:39.093

在您的清单类定义中更改您的导入方法：

```
def self.import(file)
    CSV.foreach(file.path, headers: true) do |row|
      Listing.create!( :price => row[0], :status => row[1], 
                       :beds => row[2], :baths => row[3], 
                       :address_attributes => {:unit_number => row[4]} ) 
    end
end 
```

# python-3.x - Tkinter，草案委员会

> ID：15147778
> 
> 赞同：1
> 
> 时间：2013-02-28T23:36:38.967
> 
> 标签：python-3.x, tkinter

我想创建一个草稿游戏板。起初，当我直接在“棋盘”画布上绘制正方形和棋子时，一切正常。因为我必须在之后操纵这些棋子，所以我希望通过将每个正方形和棋子创建为对象来使其更加明确。所以我尝试创建一个包含黑色或白色方块的板，其中包含圆圈（棋子）。然后一切，一团糟。我不知道为什么。即便如此，它看起来完全合乎逻辑（对我来说）。

我认为这与使用pack方法有关。

这是代码：

```
from tkinter import *

class Parent(Tk):

    def getRoot(self):
        return(self.body)

    def setTitle(self,title):
        self.title(title)

    def run(self):
        self.mainloop()

class Drawing:
    def __init__(self,root,width,height):
        self.zone=Canvas(root, width=width, height=height)

    def put(self,root,row,col):
        self.zone.grid(root,row=row,column=col)

    def getDrawing(self):
        return(self.zone)

    def rectangle(self,coordX1,coordY1,coordX2,coordY2,color):
        self.zone.create_rectangle(coordX1,coordY1,coordX2,coordY2,fill=color, outline="black")

    def circle(self,coordX1,coordY1,coordX2,coordY2,color):
        self.zone.create_oval(coordX1,coordY1,coordX2,coordY2,fill=color,outline="black")

if __name__=="__main__":
    root=Parent()
    root.setTitle("Draughts")
    board=Drawing(root,400,400)
    size=40
    logicBoard=[[0, -1, 0, -1, 0, -1, 0, -1, 0, -1], 
                [-1, 0, -1, 0, -1, 0, -1, 0, -1, 0],
                [0, -1, 0, -1, 0, -1, 0, -1, 0, -1], 
                [-1, 0, -1, 0, -1, 0, -1, 0, -1, 0], 
                [0, 0, 0, 0, 0, 0, 0, 0, 0, 0], 
                [0, 0, 0, 0, 0, 0, 0, 0, 0, 0], 
                [0, 1, 0, 1, 0, 1, 0, 1, 0, 1], 
                [1, 0, 1, 0, 1, 0, 1, 0, 1, 0], 
                [0, 1, 0, 1, 0, 1, 0, 1, 0, 1], 
                [1, 0, 1, 0, 1, 0, 1, 0, 1, 0]]
    DIMENSION=10
    for i in range(DIMENSION):
        for j in range(DIMENSION):
            coordX1 = (i * size)
            coordY1 = (j * size)
            coordX2 = coordX1 + size
            coordY2 = coordY1 + size
            if(not(i%2==j%2)):#if the square is black (on the board)
                color="black"
            else:
                color="white"
            case=Drawing(board.getDrawing(),40,40)
            case.rectangle(coordX1,coordY1,coordX2,coordY2,color)
            case.getDrawing().pack()
            if(logicBoard[i][j]>0):
                pawnColor="white"
            elif(logicBoard[i][j]<0):
                pawnColor="black"
            if (not(i%2==j%2)):
                pawn=Drawing(case.getDrawing(),40,40)
                pawn.circle(0,0,30,30,pawnColor)
                pawn.getDrawing().pack()

    board.getDrawing().pack()
    root.run() 
```

谢谢 ！

编辑：

这就是我得到的：

![乱七八糟的板子](../Images/515468efddf9b9859be2ac2df11b6c17.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T00:42:08.700

问题是您创建一个新的并在每次迭代中`Canvas`调用它，而不是使用您在开始时创建的那个。`pack()`最后，您正在使用该类`Drawing`来创建新的`Drawings`. 我建议你只用一个类来代表所有的棋盘，用绘制正方形和圆形的方法。

我改变了椭圆的颜色以获得更好的对比度：

```
from tkinter import Tk, Canvas
from itertools import product

class Board(Tk):
    def __init__(self, width, height, cellsize):
        Tk.__init__(self)
        self.cellsize = cellsize
        self.canvas = Canvas(self, width=width, height=height)
        self.canvas.bind("<Button-1>", self.onclick)
        self.canvas.pack()
    def draw_rectangle(self, x1, y1, x2, y2, color):
        self.canvas.create_rectangle(x1, y1, x2, y2, fill=color, outline="black")
    def draw_circle(self, x1, y1, x2, y2, color):
        self.canvas.create_oval(x1, y1, x2, y2, fill=color, outline="black")
    def onclick(self, event):
        i = int(event.x / self.cellsize)
        j = int(event.y / self.cellsize)
        print "You clicked on cell (%s, %s)" % (i, j)

if __name__=="__main__":
    size = 40
    board = Board(400, 400, size)
    board.title("Draughts")
    logicBoard = [[0, -1, 0, -1, 0, -1, 0, -1, 0, -1], 
                  [-1, 0, -1, 0, -1, 0, -1, 0, -1, 0],
                  [0, -1, 0, -1, 0, -1, 0, -1, 0, -1], 
                  [-1, 0, -1, 0, -1, 0, -1, 0, -1, 0], 
                  [0, 0, 0, 0, 0, 0, 0, 0, 0, 0], 
                  [0, 0, 0, 0, 0, 0, 0, 0, 0, 0], 
                  [0, 1, 0, 1, 0, 1, 0, 1, 0, 1], 
                  [1, 0, 1, 0, 1, 0, 1, 0, 1, 0], 
                  [0, 1, 0, 1, 0, 1, 0, 1, 0, 1], 
                  [1, 0, 1, 0, 1, 0, 1, 0, 1, 0]]
    for (i, j) in product(range(10), range(10)):
        coordX1 = (i * size)
        coordY1 = (j * size)
        coordX2 = coordX1 + size
        coordY2 = coordY1 + size
        color = "white" if i%2 == j%2 else "black"
        board.draw_rectangle(coordX1, coordY1, coordX2, coordY2, color)
        cell = logicBoard[i][j]
        if cell != 0:
            pawnColor = "red" if cell > 0 else "blue"
            board.draw_circle(coordX1, coordY1, coordX2, coordY2, pawnColor)
    board.mainloop() 
```

**编辑：**

如果您想跟踪点击，将处理函数绑定到画布并计算点会更加清晰和简单，而不是使用自己的事件处理程序创建大量画布。

# java - 通用 getter 方法

> ID：15147780
> 
> 赞同：4
> 
> 时间：2013-02-28T23:36:43.233
> 
> 标签：java, generics, methods, return

我需要帮助弄清楚如何实现通用的 getter 方法。这是我到目前为止的代码：

```
public class Pair<X extends Comparable<X>, Y extends Comparable<Y>>
    implements Comparable<Pair<X, Y>>{

    private final X first;
    private final Y second;

    public GENERIC getX() {
        return X;
    }

    public GENERIC getY() {
        return Y;
    } 
```

有人可以向我解释如何用此类的某种`<A extends classA> A`对象返回类型替换 GENERICs 吗？我已经看到了具有通用返回值的其他方法的示例，但我无法理解如何在此处应用它。谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-28T23:39:07.227

从改变

```
public GENERIC getX() {
  return X;
} 
```

至

```
public X getX() {
  return first;
} 
```

`extends`是 a ，第`type constraint`一次遇到 typename 时需要。该类型的名称持有者是它的名称

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T23:39:47.423

您已经定义`X`并`Y`拥有您的泛型类型。您只需在方法签名中指定它们。然后像往常一样返回您的实例变量。您还需要一些东西来初始化您的`Pair`，例如构造函数（尽管 setter 方法也可以工作）：

```
public Pair(X x, Y y)
{
   first = x;
   second = y;
}

public X getX() {
    return first;
}

public Y getY() {
    return second;
} 
```

# msbuild - 部署文件时的 MSBuild 问题

> ID：15147781
> 
> 赞同：2
> 
> 时间：2013-02-28T23:36:55.753
> 
> 标签：msbuild

我正在服务器上部署一些文件。但是当我这样做时，构建正在删除驻留在该位置的所有文件和文件夹。我不想从服务器中删除所有文件。我想从目标文件夹中排除一个文件夹（文件夹名为 Temp）。临时文件夹不应在删除其他文件时被删除。怎么做？

这是 TFS 构建定义

```
<PropertyGroup Condition=" '$(DeployEnvironment)' == 'Dev' "> 
<DeployPath>\\server1\D$\temp\reports</DeployPath> 
</PropertyGroup> 
<Target Name="CoreCompileSolution" /> 
<Target Name="AfterCompile"> 
   <Message Importance ="high" Text="Solution Root: $(SolutionRoot)" />
   <Message Importance ="high" Text="Out Dir: $(OutDir)" />
   <Copy SourceFiles="@(RPTFiles)" DestinationFolder="$(OutDir)_PublishedWebsites\Reports\" /> 
 </Target>
<Target Name="AfterDropBuild" > 
  <CreateItem Exclude="$(DeployPath)\Temp*.*"> 
      <Output ItemName="PreviousDeployment" TaskParameter="Include" /> 
  </CreateItem>
</Target> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T09:37:40.270

为什么要使用复制任务？我认为它旨在用于构建期间的本地操作，而不是部署（因为它不会让您有机会轻松配置行为）。

我建议您使用以下选项之一，而不是复制 tsak

*   **非 Web 应用程序**- 使用 Robocopy: `/XD dirs [dirs]...`: 排除与给定名称/路径匹配的目录。XF 和 XD 可以组合使用，例如

    ```
    ROBOCOPY c:\source d:\dest /XF *.doc *.xls /XD c:\unwanted /S 
    ```

    请参阅[此链接](http://ss64.com/nt/robocopy.html)以获取使用指南。您可以从命令行运行它（使用`<Exec Command="" >`任务，或者使用具有漂亮包装器的[MBuiild Community Tasksproject 。](https://github.com/loresoft/msbuildtasks)

*   **Web 应用程序**：您应该使用[Web Deploy](http://www.iis.net/downloads/microsoft/web-deploy)进行部署。您要么使用 MSBuild 集成（VS 2010 及更高版本，请参阅[此博客系列](http://www.troyhunt.com/2010/11/you-deploying-it-wrong-teamcity.html)以获取有关在 VS2010 NB 上设置和配置的指南：它在 VS 2012 中已大大简化，但我目前没有可分享的链接）或从命令行运行它（在 VS 2010 之前）：

    `<Exec Command="&quot;$(WebDeployToolPath)&quot; -verb:sync - source:dirPath='$(MSBuildProjectDirectory)\Published\' -dest:dirPath='$(DeployDirectoryLocalPath)',computerName=$(DeployTargetURL),userName='$(DeployUserName)',password='$(Password)',authType='Basic' -skip:skipaction='Delete',objectname='filePath',absolutepath='app_offline.htm' -skip:skipaction='Delete',objectname='filePath',absolutepath='logs\\.*' -skip:skipaction='Delete',objectname='dirPath',absolutepath='logs\\.*' -skip:skipaction='Delete',objectname='filePath',absolutepath='UserFiles\\.*' -skip:skipaction='Delete',objectname='dirPath',absolutepath='UserFiles\\.*' -verbose -allowUntrusted" />`

NB`skip:skipaction='Delete..`用于跳过删除文件和文件夹。

**更新** 看起来我已经理解了这有点不正确（我想，部署发生在`AfterCompile`目标中，但是，正如我现在所看到的，TFS 使用`CoreDropBuild`目标来进行部署。所以我认为，你需要的是`CoreDropBuild`按照描述覆盖目标：[这里](http://social.msdn.microsoft.com/forums/en-us/tfsbuild/thread/E996A014-0EBD-457B-BFD1-8BC518995A3F)。（虽然，我从来没有试过这个）。

您可以使用`Copy`task 作为线程的作者，也可以根据您的个人喜好使用 Robocopy/webdeploy。

# java - 在接听电话时创建通知

> ID：15147786
> 
> 赞同：0
> 
> 时间：2013-02-28T23:37:21.630
> 
> 标签：java, android, telephonymanager

我正在创建一个应用程序，我的代码的某个部分需要在接到电话时创建通知。问题是我无法实现通知，因为我必须传递呼叫我的人数。以下是我的代码。

我的接收器：

```
@Override
public void onReceive(Context context, Intent intent) {
    TelephonyManager telephonyManager = (TelephonyManager) context.getSystemService(Context.TELEPHONY_SERVICE);
    CallIntercepterListener callIntercepterListener = new CallIntercepterListener();

    telephonyManager.listen(callIntercepterListener, PhoneStateListener.LISTEN_CALL_STATE);

    Bundle bundle = intent.getExtras();
    String phoneNumber = bundle.getString("incoming_number");
    Log.d(TAG, "phoneNumber: " + phoneNumber);
} 
```

和我的听众：

```
@Override
public void onCallStateChanged(int state, String incomingNumber) {
    Log.v(TAG, "Event Call: " + incomingNumber);

    switch (state) {
        case TelephonyManager.CALL_STATE_RINGING:
            // Create a notification with de incomingNumber
            break;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T23:52:27.157

你需要听众做什么？每当电话状态发生变化时，您的接收器就会被呼叫。

[这是一篇关于如何使用广播接收器的好文章。](http://www.vogella.com/articles/AndroidBroadcastReceiver/article.html)

从这篇文章：

```
package de.vogella.android.receiver.phone;

import android.content.BroadcastReceiver;
import android.content.Context;
import android.content.Intent;
import android.os.Bundle;
import android.telephony.TelephonyManager;
import android.util.Log;

public class MyPhoneReceiver extends BroadcastReceiver {

  @Override
  public void onReceive(Context context, Intent intent) {
    Bundle extras = intent.getExtras();
    if (extras != null) {
      String state = extras.getString(TelephonyManager.EXTRA_STATE);
      Log.w("DEBUG", state);
      if (state.equals(TelephonyManager.EXTRA_STATE_RINGING)) {
        String phoneNumber = extras
            .getString(TelephonyManager.EXTRA_INCOMING_NUMBER);
        Log.w("DEBUG", phoneNumber);
      }
    }
  }
} 
```

# php - 时间没有正确回响

> ID：15147787
> 
> 赞同：-1
> 
> 时间：2013-02-28T23:37:24.033
> 
> 标签：php, mysql

任何人都知道此代码回显“在 2 月 2 日下午 6:09:06 禁止，直到 3 月 3 日上午 6:09:06”，而不是“在 2 月 28 日下午 6:09:06 禁止，直到 3 月 1 日下午 6:09：早上 6 点”

```
$BanDate = date("F nS, g:i:sa", $other['BanTime'] + 3600);
$BanDateK = date("F nS, g:i:sa", $other['BanTimeK'] + 3600);
if($other['BanTime'] == "life"){
echo"<center>R.I.P. ".$other['Username'].", Banned on ".$BanDateK."</center>";
} elseif($other['BanTime'] >= time()){
echo"<center>Banned on ".$BanDateK.", Until ".$BanDate."</center>";
} 
```

数据库中的时间看起来像“1362308946”。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T23:45:34.457

我的第一个猜测是 的值`$other['BanTimeK'] + 3600`对应于 2 月 2 日...

因为我试过了，`1362308946`对应于 3 月 3 日。

仔细检查 的值，`$other['BanTimeK']`如果不能解决，请告诉我们更多信息。

# java - 在spring服务层中使用继承是最佳实践吗？

> ID：15147792
> 
> 赞同：5
> 
> 时间：2013-02-28T23:37:42.970
> 
> 标签：java, spring, design-patterns

我有两个名为`PowerUserManager`and的服务 bean `SimpleUserManager`。两个`@Service`带注释的类有大约**20% 的共同代码**。

我用一个通用**抽象**类 ( `BaseUserManager`) 构建了一个继承树，以减少两个类之间的冗余。

```
 BaseUserManager
                                      |
                               ---------------
                               |             |
                       PowerUserManager  SimpleUserManager 
```

然后在我的`@Controller`或任何客户端类中，我使用`@Autowired`注释来注入两者`PowerUserManager`，`SimpleUserManager`并且我根据我正在处理的用户实例使用其中一个。

我不习惯使用**继承**来分解代码，尤其是在**服务层**中。你们春天的伙伴们有没有更好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-01T08:50:30.123

在这种情况下考虑**继承**而不是**组合**之前，您应该问自己一些基本问题[，一般来说](https://stackoverflow.com/questions/49002/prefer-composition-over-inheritance)：

1.  *所有*用户管理器都是 BaseUserManager 吗？在任何可能的情况下，这是一种 IS-A 关系吗？
2.  在涉及用户管理器的任何地方公开 BaseUserManager 公共 API 是否有意义？
3.  BaseUserManager 是否有单一职责？

如果答案是肯定的，那么继承是正确的方法。否则，您可能应该重新设计成几个更小的组件，并将 PowerUserManager 和 SimpleUserManager 视为服务外观。

# jquery - 使用 jQuery Validate 插件进行文件上传验证

> ID：15147793
> 
> 赞同：3
> 
> 时间：2013-02-28T23:37:44.553
> 
> 标签：jquery, file-upload, twitter-bootstrap, jquery-validate

我有一个奇怪的问题。我有一个带有文件上传和其他文本区域的表单。每个字段都是必需的。所以基本上当少数字段留空时，验证工作正常，但当且仅当文件上传留空时，表单被提交。

这是我的代码

```
 <li >
  <p>
    <label for="rad">radio label:
    </label><br>

   <input type="radio" name="rad" value="yes" style="width:20px">&nbsp; Yes&nbsp;&nbsp;</input>
   <input type="radio" name="rad" value="no" style="width:20px">&nbsp; No</input><br/>
   <label for="cv" class="error" style="display:none">This field is required</label>
   </p>
    <p>
    <input type="file" name="fupl" style="display:none;margin-top:10px" id="fup"/>
    <label for="fupl" class="error" style="display:none;color:red">This field is required</label>
    </p>
    </li>
    <br>
    <li>
  <label>checkbox label
  </label><br><br>
 <input type="checkbox" name="cb" value="tick" style="width:20px">&nbsp;&nbsp;   <small>checkbox field<small></input><br>                                          <label for="fee" class="error" style="display:none">This field is required</label>
    </li>
  <br><li>
 <input type="submit" class="button" value="SUBMIT" style="float:right"/>
 </li>
 <script>
 $(document).ready(function()
 {
 $("input[type='radio']").change(function(){
if($(this).val()=="yes")
 {
 $("#fup").show();
 }
else
{
  $("#fup").hide();
 }
});
}); 
```

这是我的jQuery

```
 $('#form').validate({
rules: {    
fupl: {
    required: true,
    accept:'docx|doc'
    }, 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-02-28T23:57:20.050

您的代码似乎运行良好。Validate 插件会忽略隐藏字段。但是，当您通过单选按钮显示文件上传字段时，它将验证并显示错误消息。见：http: [//jsfiddle.net/y5ghU/](http://jsfiddle.net/y5ghU/)

* * *

你的代码：

```
<input type="file" name="fupl" style="display:none;margin-top:10px" id="fup"/> 
```

您的文件上传字段设置为`display:none;`默认情况下插件将忽略所有隐藏字段。

使用该`ignore: []`选项禁用此功能。

```
$(document).ready(function () {

    $('#form').validate({
        ignore: [],
        rules: {
            fupl: {
                required: true,
                accept: 'docx|doc'
            }
        }
    });

}); 
```

**演示：http: [//jsfiddle.net/ptV35/](http://jsfiddle.net/ptV35/)**

* * *

**编辑**：不确定OP想要走哪条路，但是当文件上传字段被重新隐藏时，下面的演示会隐藏任何未决的错误消息。

```
$("#fup").next('label.error').hide(); 
```

[http://jsfiddle.net/y5ghU/4/](http://jsfiddle.net/y5ghU/4/)

# mysql - 删除特定计数的mysql相关记录

> ID：15147794
> 
> 赞同：1
> 
> 时间：2013-02-28T23:37:47.633
> 
> 标签：mysql

我需要删除 2012 年之前创建的表 'people' 中属于酒店 id '1' 的记录，并且在相关表 'taskinstance' 中只有 1 条记录。这些表以这种方式相关：people.id = taskinstance.idClient。我想出了以下内容，这给了我一个语法错误。

```
DELETE people FROM taskinstance people 
INNER JOIN 
    (SELECT * 
     FROM taskinstance
    WHERE substring(people.dateCreated,1,4) < 2012 and people.idHotel = '1'  
     GROUP BY taskinstance.idClient 
     HAVING COUNT(*) = 1) taskinstance 
ON people.id = taskinstance.idClient 
```

如果我只想查看记录，以下工作：

```
SELECT *
FROM people
INNER JOIN taskinstance ON people.id = taskinstance.idClient
WHERE substring(people.dateCreated,1,4) < 2012 and people.idHotel = '1'
GROUP BY people.id
HAVING COUNT(1) = 1 
```

谢谢你提供的所有帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T23:49:48.690

~~尝试这样的事情：~~

 ~~```
 DELETE FROM people WHERE people.id IN 
 (SELECT people.id
 FROM people
 INNER JOIN taskinstance ON people.id = taskinstance.idClient
 WHERE substring(people.dateCreated,1,4) < 2012 and people.idHotel = '1'
 GROUP BY people.id
 HAVING COUNT(*) = 1) 
```~~ 

~~编辑：在我自己的数据库上测试，这个被拒绝，因为 WHERE 子句中的表与 DELETE 子句中的表相同。~~

 ~~或这个：

```
 DELETE people FROM people
 INNER JOIN (
    SELECT people.id
    FROM people
    INNER JOIN taskinstance ON people.id = taskinstance.idClient
    WHERE substring(people.dateCreated,1,4) < 2012 and people.idHotel = '1'
    GROUP BY taskinstance.idClient
    HAVING COUNT(*) = 1
    ) p
 ON p.id = people.id 
```

编辑：我在我自己的数据库中测试了一个几乎相同的查询（仅使用我自己的表），并且查询中没有语法错误。

请发布您的语法错误的全文，以便我们可以追踪问题，特别是它说的部分，`"... for the right syntax to use near 'something something something' on line X."` 该`something something`部分是故障排除的最重要部分。例如，如果它说，`"near '' on line 6"`那么您几乎可以肯定没有在 1 周围转义单引号。~~

# jquery - jQuery，延迟按钮重置 - twitter bootstrap

> ID：15147799
> 
> 赞同：1
> 
> 时间：2013-02-28T23:38:18.060
> 
> 标签：jquery, button, twitter-bootstrap, delay, reset

有没有办法延迟 jQuery 上的按钮重置？

我试过这个：

```
$('.deposit-cur-btn').delay(3000).button('reset'); 
```

但它不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T23:44:54.890

我不确定 .button('reset') 是做什么的，但你可以尝试这样的事情

```
setTimeout(function(){ $('.deposit-cur-btn').button('reset'); }, 3000); 
```

# devexpress - 在 PageChanging 事件中更改 TcxPageControl 的 NewPage

> ID：15147801
> 
> 赞同：0
> 
> 时间：2013-02-28T23:38:38.197
> 
> 标签：devexpress, vcl, pagecontrol

我们使用页面控件逐步完成从订单到产品的选择过程。第一个选项卡显示订单列表，第二个选项卡显示所选订单的产品列表，第三个选项卡包含所选产品的属性列表。

如果用户选择了一个只有 1 个产品的订单，我们想跳过标签 2 并直接转到标签 3 以显示唯一产品的属性。

我认为这可以通过设置 PageChanging 事件的 NewPage 属性来完成，但事实并非如此。有什么更好的方法？改为在 PageChanging 事件中设置 ActivePageIndex？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T02:42:36.190

我会隐藏选项卡，以便用户根本无法选择它们，然后根据需要使用一对按钮在页面之间来回移动。当用户在第 1 页并准备移动到下一页时，按钮处理程序可以决定接下来显示哪个页面。

# match - Excel：检查列中是否存在单元格值，并返回同一行但不同列中的值

> ID：15147803
> 
> 赞同：4
> 
> 时间：2013-02-28T23:38:48.123
> 
> 标签：match, excel-formula, vlookup

检查列中是否存在值后，我想将同一行中单元格的值返回到不同的列。

具体来说，我正在检查 O 列中的任何值是否与 A 列中的值匹配。如果匹配，我想从与 A 列中匹配项相同的行中的单元格中获取相应的值，但这些值在列中F。然后，我想从 f 列中获取这些值，并将它们放在与 O 列中的值相同的行中。

这是我尝试过的公式：

```
=IF(ISNA(MATCH(O2,$A$2:$A$1589,0)),"no match", VLOOKUP(O2,$A$1:$z$14000,16,FALSE)) 
```

这将为 P 列中的所有单元格返回“不匹配”。我尝试在 VLOOKUP 函数中弄乱 col_index_num ，但我能做的最好的事情就是让它返回零，这不是正确的值。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-01T00:35:29.347

我认为下面的公式应该给你你想要得到的东西。如果我正确理解您的问题，您希望返回与匹配项位于同一行的 F 列中的值：因此，我用于 F 列的范围与 A 列的范围长度相同。

```
 =IFERROR(INDEX($F$2:$F$1589,MATCH(O2,$A$2:$A$1589,0),1),"no match") 
```

向外工作，这就是正在发生的事情。

*   match 函数在 A 列中查找与 O2 中的值完全匹配的值。

    如果找到匹配项，则返回匹配值在 A 列查找范围中的相对位置。

    如果找不到匹配项，则返回错误值。

*   index 函数返回索引范围的第*i*行和第*j*列中的值，在本例中是在匹配中找到的行，以及索引范围中的第一（也是唯一）列，F 列。

*   最后，这两个函数被包装在一个 IFERROR 函数中，以捕获不匹配时将生成的错误值，并返回字符串“不匹配”。

该公式将输入到单元格 P2 中，并向下复制到 O 列中的最后一行数据。

# java - 拆分字符串时的 ArrayIndexOutOfBounds

> ID：15147810
> 
> 赞同：1
> 
> 时间：2013-02-28T23:39:15.233
> 
> 标签：java, arrays, bufferedreader, indexoutofboundsexception

我正在尝试从格式如下的文件中提取信息：

```
1
test@mail.ca|password|false 
```

但是，在运行以下代码时，我似乎遇到了`ArrayIndexOutOfBounds`错误，我无法确定原因，因为我相信我的拆分应该可以正常运行。在以“用户”开头的行上获得错误。

```
 sc = new Scanner (System.in);
        BufferedReader in = new BufferedReader (new FileReader (USAVE));
        int repeats = Integer.parseInt(in.readLine());
        for (int c = 0; c < repeats; c++){
            String info = in.readLine();
            System.out.println (info);
            String[] extracted = info.split("\\|");
            users.addUser(extracted[0], decryptPassword(extracted[1]));
        }
        in.close(); 
```

可能是什么问题呢？

编辑：我改变了“|” 到“\|” 但问题仍然存在。

EDIT2：堆栈跟踪

```
Exception in thread "main" java.lang.ArrayIndexOutOfBoundsException: 1
at OnlineCommunications.userFromFile(OnlineCommunications.java:165)
at OnlineCommunications.logIn(OnlineCommunications.java:36)
at OnlineCommunications.emailOption(OnlineCommunications.java:593)
at OnlineCommunications.main(OnlineCommunications.java:683) 
```

我在上面发布的方法是名为`userFromFile`.

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-28T23:40:17.100

[**String#split(regex)**](http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#split%28java.lang.String%29)需要正则表达式作为参数，并且`|`是正则表达式世界中的元字符（特殊字符）。为了将元字符视为普通字符，您应该使用反斜杠 (\|) 对其进行转义

```
String[] extracted = info.split("\\|"); 
```

或者只是将它包含在字符类中

```
String[] extracted = info.split("[|]"); 
```

以下是正则表达式中的元字符：

```
<([{\^-=$!|]})?*+.> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-28T23:40:59.477

[`String.split(String regex)`](http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#split%28java.lang.String%29)将正则表达式作为参数，使用：

```
String[] extracted = info.split("\\|"); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-28T23:42:31.350

类似的帖子。[标记化错误：java.util.regex.PatternSyntaxException，悬空元字符 '*'](https://stackoverflow.com/questions/917822/tokenizing-error-java-util-regex-patternsyntaxexception-dangling-metacharacter)你必须像这样使用：

```
String[] extracted = info.split("\\|"); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-01T00:33:45.797

实际上，您解析字符串的方式没有任何问题。错误在别处。我会在您进入循环之前添加 System.out.println (repeats) 以确保您正在迭代正确的次数。为了进一步调试，我将在调用 user.addUsers 的行之前打印提取的 (Arrays.toString(extracted)) 的内容。如果一切看起来都不错，那么问题出在 user.addUsers 调用上。

# c# - 如何检查引用的程序集在运行时是否可用？

> ID：15147811
> 
> 赞同：4
> 
> 时间：2013-02-28T23:39:18.690
> 
> 标签：c#

我正在创建一个简单的独立 .net winforms 应用程序。它引用`Microsoft.SqlServer.SqlWmiManagement`了客户端计算机上可能存在或不存在的 .Net Framework 4 程序集。如果该程序集不存在，那么在运行时我希望我的应用程序能够优雅地失败而不是崩溃。

我有一个开始的组件：

```
...
using Microsoft.SqlServer.SqlWmiManagement;
...
try {
    // do something that uses SqlWmiManagement
}
catch {
    // handle the missing assembly
} 
```

不幸的是，在我的小尝试块之前，组件加载时会引发未处理的异常。

这样做的正确方法是什么？

没有安装程序，这应该是一个拖放的 exe。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-28T23:45:20.013

如果未找到程序集，则将触发 AssemblyResolve 事件。您可以尝试捕捉它并在那里退出应用程序。[请参阅此 MSDN](http://msdn.microsoft.com/en-us/library/system.appdomain.assemblyresolve.aspx)。

```
public static void Main()
{
    // Note: AssemblyResolve occurs when the resolution of an assembly fails.
    AppDomain.CurrentDomain.AssemblyResolve += new ResolveEventHandler(MyResolveEventHandler);
}

private static Assembly MyResolveEventHandler(object sender, ResolveEventArgs args)
{
    if ( args.Name.Contains("SqlWmiManagement"))
    {
        // assembly not found
    }

    return null;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-28T23:44:10.703

当函数是 JIT 时抛出异常。将您的代码更改为：

```
void DoSomethingThatUsesSqlWmiManagement_()
{
   ...
}
void DoSomethingThatUsesSqlWmiManagement()
{
   try
   { 
          DoSomethingThatUsesSqlWmiManagement_();
   }
   catch
   {   
            handle the missing assembly
   }
} 
```

您可能应该`catch`只使用特定的`Exception`.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-28T23:53:42.777

确保包含 Main() 函数的类不引用与程序集相关的任何内容。

如果它被定义为您的主要表单的一部分，请将其放在自己的类中。

然后，在方法的最开始使用 Assembly.Load()。您必须将 SqlWmiManagement.dll 程序集的完全限定名称作为参数传递。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-01T20:33:20.723

我想我通过更正代码中的范围解决了这个问题。从这篇文章开始工作：

[https://sites.google.com/site/craigandera/craigs-stuff/clr-workings/dealing-with-assembly-load-failure](https://sites.google.com/site/craigandera/craigs-stuff/clr-workings/dealing-with-assembly-load-failure)

我将需要的方法移到了`Microsoft.SqlServer.SqlWmiManagement`一个单独的类中。分离它意味着我可以从一个块内部调用它，该`try {}`块在导致程序集被隐式加载的范围之前开始。这意味着我可以从失败的程序集加载中捕获异常。

代替：

```
using Microsoft.SqlServer.SqlWmiManagement;

// .net implicitly loads assembly when current class is instantiated

// ... code ...

try {
   // problem method using missing assembly
} 
catch {
   // this is ineffective because the ass'y load already failed before the try block
} 
```

我以前可以：

```
try {
    // invoke problem method in another class
    // implicitly loads assembly here instead, inside the try block 
} 
catch {
    // this now catches ass'y load failure
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-06-11T10:58:15.893

虽然 @CC Inc 的答案在`Main()`调用之后加载引用时有效，但对于使用静态对象或类的引用，`ResolveEventHandler`需要在`Main()`调用之前安装。你可以试试：

```
private static bool gAutoLoad = ExecuteBeforeMain();

private static bool ExecuteBeforeMain()
{
    // Note: AssemblyResolve only occurs when the resolution of an assembly fails.
    AppDomain.CurrentDomain.AssemblyResolve += AssemblyResolveErrorHandler;
    return true;
}

private static System.Reflection.Assembly AssemblyResolveErrorHandler(object sender, ResolveEventArgs args)
{ ... } 
```

我不认为有`ExecuteBeforeMain()`足够早执行的保证（在尝试加载引用之前），但是当我包含我的记录器时它对我有用，如下所示：

```
ReferenceNamespace.LoggerClass.StaticActiveLogger.LogMethod(string); 
```

# c# - 通过点击事件来控制下面

> ID：15147814
> 
> 赞同：2
> 
> 时间：2013-02-28T23:39:35.847
> 
> 标签：c#

我看了这个问题，虽然它会有所帮助，但 WndProc 不会触发

[将鼠标事件传递给父控件](https://stackoverflow.com/questions/547172/pass-through-mouse-events-to-parent-control)

所以我有一个游戏板，它是一个带有图片框的用户控件。在 mouseClick 事件期间，我进行了一次点击测试以确定板的哪个部分被点击并将一块放在相关区域中。然后，我创建了一个游戏片段，并将其从宿主窗体边缘动画到棋盘上的适当位置。所以游戏块不是游戏板的孩子

这一切都很好。但是，如果用户单击游戏块，则下方棋盘的 mouseClick 不会引发事件。我有点明白，就像按钮下的按钮。

我的问题是我可以“通过”游戏的点击事件，所以只有棋盘是“可点击的”

```
public enum PieceColor
{
    Blue=0,
    Yellow,
    Red,
    Green
}

public class GamePiece : PictureBox
{
    PieceColor _color;
    public PieceColor Color {
        get {

            return _color;
        }
        set
        {
            _color = value;

            if (_color == PieceColor.Blue)
                this.Image = global::GameEntities.Properties.Resources.pieceBlue;
        }
    }

    protected override void WndProc(ref Message m)
    {
        const int WM_NCHITTEST = 0x0084;
        const int HTTRANSPARENT = (-1);

        if (m.Msg == WM_NCHITTEST) //<-- this never fires
        {
            m.Result = (IntPtr)HTTRANSPARENT;
        }
        else
        {
            base.WndProc(ref m);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T01:09:48.540

为了使您的控件对鼠标单击事件透明，您可以将所有单击事件传递给父控件的适当方法。因此，首先创建一个将声明`HandleMouseClick`方法的接口。

```
interface IMouseClickable
{
   void HandleMouseClick(object sender, MouseEventArgs e);
} 
```

将此接口应用于父级`Control`，以便您可以将其传递`Control`给`GamePiece`. 它可以通过构造函数完成，您可以立即将父级注册`HandleMouseClick`到`GamePiece`.

```
...
public GamePiece(IMouseClickable parent)
{
   MouseClick += parent.HandleMouseClick;
}
... 
```

# jquery - jQuery时间间隔点击限制

> ID：15147816
> 
> 赞同：1
> 
> 时间：2013-02-28T23:39:41.213
> 
> 标签：jquery

我需要解决一个困扰我们平台的问题。产品网站上有这个报告页面，用户可以去生成报告。报告可能太大而无法生成，需要几分钟时间。有些用户不耐烦，多次点击生成按钮。我想知道是否可以在按钮上设置时间，即当有人单击生成报告按钮时，页面不会让他们再次按下 5 分钟。更有趣的场景是，在 cookie 中存储一些东西，或者即使他们刷新页面，也可以阻止他们点击。

如果你能给我一些关于这个问题的好主意或例子，我将不胜感激，因为我不是 jQuery 的专家。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-28T23:42:34.070

当然，您可以使用本地存储设置时间戳，并使用 jQuery 轻松设置 disabled 属性。

**要禁用点击**：

```
$('#myButton').on('click', function() {
    var $this = $(this);
    $this.prop('disabled', true);
    localStorage.myButtonEnableAt = new Date().getTime() + 30000;

    setTimeout(function(){
        $this.prop('disabled', false);
        localStorage.myButtonEnableAt = null;
    }, 30000);
}); 
```

**在页面加载时，检查状态**：

```
var now = new Date().getTime();
if (localStorage.myButtonEnableAt > now ) {
    $('#myButton').prop('disabled', true);
    setTimeout(function(){
        $('#myButton').prop('disabled', false);
        localStorage.myButtonEnableAt = null;
    }, localStorage.myButtonEnableAt - now);
} 
```

**演示**： http: [//jsfiddle.net/36JrM/](http://jsfiddle.net/36JrM/) - 更改为 10 秒禁用以获得更快的演示。单击按钮。5 秒后，刷新页面，再过 5 秒就会按预期启用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T23:44:59.763

对于简单的情况，您可以禁用该按钮：

```
$('input').click(function() {
    $(this).prop('disabled', true);
}); 
```

尽管更好的解决方案是显示进度指示器（或至少是一个旋转的轮子）来告诉用户正在*做某事*。你也可以有一个虚假的进度条，它会慢慢增加七分钟。

真正的问题是用户没有得到任何反馈，所以他们按下按钮从你那里得到某种反馈。禁用按钮并且不让他们重新提交它可能会让他们感到沮丧，但我敢打赌，为您的用户提供*任何*形式的进步都会让他们感到高兴。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-28T23:48:40.463

对于表单，我通常会这样做，因此它可以处理任何类型的提交，而不仅仅是按钮单击。

```
$('form').bind('submit',function(e){
    var $form = $(this);

    if ($form.data('submitted') === true){
        e.preventDefault();
    } 
    else {
        $form.data('submitted', true);
    }

    setTimeout(function(){
        $form.data('submitted', false);
    }, 30000);
}); 
```

仅对于按钮，您可以使用`.prop('disabled', true)`其他答案中提到的。

# ios - 验证允许访问后谷歌 API redirect_url 失败

> ID：15147819
> 
> 赞同：1
> 
> 时间：2013-02-28T23:40:06.163
> 
> 标签：ios, google-api

大家好，这是我第一次发问题，可能会犯一些错误。所以我想创建一个可以让用户管理 youtube 内容的 iOS 应用程序，这意味着如果用户需要，我需要使用 oAuth2.0 google API 进行身份验证。

我使用的 oAuth2 的第三方代码是 OAuth2Client。几个小时后，我终于可以进入谷歌的身份验证页面了。但是在单击“允许访问”或“拒绝”后，页面卡在那里。我只是想知道它是否是这样的，或者我的代码有问题。

这是我的 oAuth2 代码

```
+ (void)initialize;
{
[[NXOAuth2AccountStore sharedStore]  setClientID:@"243181519584.apps.googleusercontent.com"
                                         secret:@"9b_K3C-kYp791Syga5K47cFS"
                                          scope:[NSSet setWithObject:@""]
                               authorizationURL:[NSURL URLWithString:@""]
                                       tokenURL:[NSURL URLWithString:@""]
                                    redirectURL:[NSURL URLWithString:@""]
                                 forAccountType:@"NBAvideo"];

}

//send request for logging in
[[NXOAuth2AccountStore sharedStore] requestAccessToAccountWithType:@"NBAvideo"];

//add observer
[[NSNotificationCenter defaultCenter] addObserverForName:
 NXOAuth2AccountStoreAccountsDidChangeNotification     object:[NXOAuth2AccountStore sharedStore]
                                                   queue:nil
                                              usingBlock:^(NSNotification *aNotification){
                                                  NSLog(@"Success!");
                                                  }];

[[NSNotificationCenter defaultCenter] addObserverForName:NXOAuth2AccountStoreDidFailToRequestAccessNotification
                                                  object:[NXOAuth2AccountStore sharedStore]
                                                   queue:nil
                                              usingBlock:^(NSNotification *aNotification){
                                                  NSError *error = [aNotification.userInfo objectForKey:NXOAuth2AccountStoreErrorKey];
                                                  NSLog(@"Failure !");
                                              }]; 
```

在我单击允许访问或拒绝后，页面 url 是我的 redirect_url + code = ........，我想知道我怎么能得到它，因为我的应用程序服务器在我将观察者添加到通知中心时没有听到任何声音. 由于 google api 中心在我注册产品时给了我重定向 url，我在我的代码中使用了“localhost”，只是想知道这是否正确..任何人都可以帮忙~，我整天都在寻找解决方案。

谢谢！

# javascript - 这个 charcode 布尔语句有什么问题？

> ID：15147823
> 
> 赞同：0
> 
> 时间：2013-02-28T23:40:18.097
> 
> 标签：javascript

我在类对象中有一个 if/else 语句。if 检查布尔语句，但返回错误的结果。

```
function person(name) {
    this.name = name;
    this.age = (function age() {
        if (this.name.toLowerCase().charCodeAt(0) <= "n".charCodeAt(0)) {
            return "A";
        }
        else {
            return "B";
        }
    })();
}

var zoey = new person("Zoey");

console.log(zoey.name);
console.log(zoey.age);  // returns A

console.log("Zoey".toLowerCase().charCodeAt(0));  // returns 122
console.log("n".charCodeAt(0));  // returns 110 
```

如果我将布尔语句中的“this.name”更改为“name”，它会起作用。知道为什么吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-28T23:43:15.753

您立即调用的函数表达式正在创建一个更改上下文的新范围`this`。当您使用 just 时，`name`您指的是传递给构造函数的参数。您可以缓存`this`或`bind`它来维护上下文：

```
var self = this;
this.age = (function age() {
  if (self.name...)
}());

// In modern browsers
this.age = (function age() {
  if (this.name...)
}.bind(this)()); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-28T23:44:58.243

`this`没有持有它的上下文。实际上，您正在使用该功能创建一个新的。有两种方法可以解决这个问题：

```
var me = this;
me.name = name;
me.age = (function() {
    return me.name.toLowerCase().charCodeAt(0) <= "n".charCodeAt(0) ? "A" : "B";
})(); 
```

或者：

```
this.name = name;
this.age = (function() {
    return this.name.toLowerCase().charCodeAt(0) <= "n".charCodeAt(0) ? "A" : "B";
}).call(this); 
```

实际上，三个：只需删除`this.`函数内部，并`name`使用上面范围内的变量来代替。

# ios - 如何将工具栏添加到 UIView？

> ID：15147824
> 
> 赞同：1
> 
> 时间：2013-02-28T23:40:18.450
> 
> 标签：ios, uiview, uistoryboard, uitoolbar

我曾经能够让工具栏工作的唯一方法是视图/表格视图嵌入到导航控制器中。据推测，还有其他方法可以使用工具栏，甚至将它们放在场景的顶部，如下所示： ![在此处输入图像描述](../Images/6da7e103b1d2aa43ea44a4dffac77193.png)

（那篇文章来自 2012 年 9 月，使用 iOS 6 SDK，所以它并没有严重过时或任何东西。）

让我觉得自己很愚蠢，但我一辈子都无法将工具栏放到情节提要中的视图上。

# javascript - Ektron 在页面末尾加载 JavaScript

> ID：15147827
> 
> 赞同：0
> 
> 时间：2013-02-28T23:40:46.560
> 
> 标签：javascript, ektron

有没有办法让 Ektron 在页面末尾加载 JavaScript 而不是 <head> 使用

```
JS.RegisterJSInclude(this, _api.SitePath + "/js/last.js", "LastJS"); 
```

我想获得使用 RegisterJSInclude 的好处，但是文件需要在 html 的末尾出现。

```
<html>
<head></head>
<body>
...
<script src="/WorkArea/FrameworkUI/js/ektron.javascript.ashx?id=+1843595138+1354911990" type="text/javascript">
</body>
</html> 
```

我也对任何替代方案持开放态度。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T01:09:48.977

据我所知，这是不可能的，但您可以制作一个底部有一个 asp 内容占位符的模板，然后使用 asp 控件添加它。如果您通常使用 registerJS 函数，那么从技术上讲，在 aspx 页面中的任何位置调用脚本都会使其最后被浏览器看到。最后你可能想看看使用[http://headjs.com/](http://headjs.com/)

# search - 在 Alfresco 中为全文搜索索引思维导图？

> ID：15147828
> 
> 赞同：0
> 
> 时间：2013-02-28T23:40:53.527
> 
> 标签：search, indexing, alfresco, mindmapping, freemind

我正在寻找一种方法来索引 Windows 7 的 Alfresco 4.1 上的 .mm 文件的内容，以便我可以在每个思维导图中进行搜索。到目前为止，我已经找到了一种[有前途的方法](http://thinkalfresco.blogspot.com/2009/02/indexing-freemind-mindmaps-with.html)，但我似乎无法让它发挥作用。

最好的方法似乎是通过获取每个节点的文本属性的值来提取每个 .mm 文件的文本。将思维导图重命名为 xml，然后添加 xml 序言和样式表标签后，发布的方法中的 XSLT 在 Web 浏览器中清晰地呈现所有文本。似乎找不到更优雅的解决方案，因此 Alfresco 搜索每个思维导图，就好像它是一个 XML 一样，但仍然返回一个 .mm 文件。我已经找到的方法建议在 Alfresco 的 RuntimeExecutableContentTransformer bean 中使用 xmlstarlet。但是，当我在 Windows 上尝试它时，这导致服务器丢失资源错误。

有没有人有一步一步的过程来实现思维导图的全文搜索？

非常感谢您可能获得的任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T11:32:10.617

Alfresco will automatically extract the text content of XML files using Tika and will populate the index using this.

Try setting the MIME type of your `.mm` files to XML in Alfresco and they should be indexed automatically.

If that works and you want `.mm` files to be automatically indexed when they are added to the repository, you could add the file extension to the list of extensions for the `text/xml` MIME type in the config file `alfresco/mimetype/mimetype-map.xml`.

# html - 为什么会滚动？

> ID：15147831
> 
> 赞同：-1
> 
> 时间：2013-02-28T23:41:01.577
> 
> 标签：html

我不确定是什么导致我的网页出现滚动条。jsfiddle：http: [//jsfiddle.net/XhvEx/](http://jsfiddle.net/XhvEx/)

```
<html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T23:43:29.657

您的`#menu`项目高度为 100% + 10px：

```
#menu {
    position:absolute;
    width:0px;
    height:100%;
    background:#4d4d4d;
    padding:5px;
} 
```

高度**不**包括填充。减少百分比高度，或从`#menu`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T23:42:59.727

100% 的高度与填充（在外面）似乎是导致它的原因。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-28T23:47:41.587

在#menu 上，您已指定 100% 高度和 5px 填充。

元素的完整宽度/高度由其指定的宽度/高度+填充+边框+边距组成。

有关更多信息，请参阅[CSS 盒子模型](http://www.w3schools.com/css/css_boxmodel.asp)。

# googlebot - Googlebot 从哪里抓取？

> ID：15147833
> 
> 赞同：3
> 
> 时间：2013-02-28T23:41:07.033
> 
> 标签：googlebot, gis

我一直在寻找Googlebot及其兄弟姐妹从“CA”以外的位置爬行的位置，并且没有运气找到特定于爬行的位置。我发现了一张 2008 年的数据中心地图 ( [http://bit.ly/mONhf9](http://bit.ly/mONhf9) )，我发现谷歌在他们的数据中心中自称才华横溢，并附有可爱的照片 ( [http://www.google.com/关于/数据中心/](http://www.google.com/about/datacenters/)）。

我确实从经验中知道，至少 3 年前，ole' bot 也将来自弗吉尼亚州......但除此之外......什么都没有。

谁能帮忙解开这个谜语？我正在收集 Google 不想让我知道。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-04-02T00:48:06.837

您的里程会有所不同，但对于我可以访问的最受欢迎的网站，抓取来自：

*   伊利诺伊州 (46.35%)
*   亚利桑那州 (15.68%)
*   威斯康星州 (14.95%)
*   弗吉尼亚 (11.85%)
*   加利福尼亚 (11.17%)

受到这些爬取的网络服务器位于弗吉尼亚州的亚马逊上。

这是在地图上：http: [//www.chrisbrunner.com/2014/04/01/where-does-googlebot-crawl-from/](http://www.chrisbrunner.com/2014/04/01/where-does-googlebot-crawl-from/) （由于这是我的第一篇文章，我无法直接发布它。 )

同样，其他人会有不同的经历，但这是我们在 2014 年 3 月期间观察到的情况。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-01T11:13:12.407

我已经收集了有关该主题的信息，并且得出的结论是 GoogleBot 从 6 个不同的位置抓取。我无法准确地将它们放在地图上，但似乎其中有 4 个在美国的不同地区，其中一个在欧洲。

您在这篇文章中有所有详细信息：[http ://blog.domenech.org/2013/09/where-is-googlebot-crawler-located.html](http://blog.domenech.org/2013/09/where-is-googlebot-crawler-located.html)

# python - 搜索文本文件并插入行

> ID：15147836
> 
> 赞同：2
> 
> 时间：2013-02-28T23:41:26.053
> 
> 标签：python, file-io

我要做的是（以下面的文本为例），在文本文件中搜索字符串“Text2”，然后在“Text 2”后两行插入一行（“Inserted Text”）。“文本 2”可以在文本文件中的任何一行，但我知道它会在文本文件中出现一次。

所以这是原始文件：

```
Text1
Text2
Text3
Text4 
```

这就是我想要的：

```
Text1
Text2
Text3
Inserted Text
Text 4 
```

所以我已经知道如何使用下面的代码在一行上方添加文本。

```
for line in fileinput.input('file.txt', inplace=1,backup='.bak'):
    if line.startswith('Text 4'):
        print "Inserted Text"
        print line,
    else:
        print line, 
```

但我只是不知道如何在文件中搜索的文本之后添加两行内容。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-28T23:53:00.867

快速肮脏的方式就是这样

```
before=-1
for line in fileinput.input('file.txt', inplace=1,backup='.bak'):
    if line.startswith('Text 2'):
        before = 2
    if before == 0
        print "Inserted Text"
    if before > -1
        before = before - 1
    print line, 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-28T23:49:33.900

如果将文件内容加载到列表中，操作起来会更容易：

```
searchline = 'Text4'
lines = f.readlines() # f being the file handle
i = lines.index(searchline) # Make sure searchline is actually in the file 
```

现在`i`包含行的索引`Text4`。您可以使用它并`list.insert(i,x)`在之前插入：

```
lines.insert(i, 'Random text to insert') 
```

或之后：

```
lines.insert(i+1, 'Different random text') 
```

或后三行：

```
lines.insert(i+3, 'Last example text') 
```

只要确保包含`IndexError`s 的错误处理，您就可以随心所欲地处理它。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-28T23:50:55.367

你可以使用

```
f = open("file.txt","rw")
lines = f.readlines()
for i in range(len(lines)):
     if lines[i].startswith("Text2"):
            lines.insert(i+3,"Inserted text") #Before the line three lines after this, i.e. 2 lines later.

print "\n".join(lines) 
```

# javascript - jQuery WayPoints：获取当前或活动的 Waypoint

> ID：15147837
> 
> 赞同：0
> 
> 时间：2013-02-28T23:41:26.360
> 
> 标签：javascript, jquery, jquery-waypoints

当我单击文档上的任意位置时，我想返回视口中的当前或活动航点。

我已经编写了以下函数，并且运行良好。

```
$('.point').waypoint(function(e, direction) {
    var $active = $(this),
        index,
        points = $('.point').length - 1,
        $caption = $('.caption').first(),
        caption;

    index = $active.index('.point');

    if (direction === "up") {
        $active = $active.prev();

        index = $active.index('.point');

        if($active.index('.point') === -1) {
            index = 0;
            $('.bottom-nav').slideUp();
        }
    } else {
        if($active.index('.point') === 1) {
            index = 0;
            $('.bottom-nav').slideDown();
        }           
    }

    caption = $active.data('caption');

    if(caption) {
        $caption.html('').append(caption);
    } else {
        $caption.html('');
    }

    currentSlide(index);
}, { offset: 72 }); 
```

不过，我想做的是能够从全局 $.waypoints 对象访问当前航点。更具体地说，当我单击文档时返回当前航点。就像是：

```
$(document).on('click', function(){
    var index = $.waypoints('current');
}); 
```

尽管显然该语法不存在。

返回当前航点的最佳方式是什么？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T00:12:34.327

当您设置一个航点/航点时，您是否可以缓存应用了航点的选择器，并在您想要获取启用的航点列表时调用该变量？

禁用航点后，您可以从变量中删除选择器。

# android - TileOverlay：getTile() 断点从未命中

> ID：15147838
> 
> 赞同：0
> 
> 时间：2013-02-28T23:41:27.490
> 
> 标签：android, google-maps, google-maps-android-api-2

我正在尝试使用 Google Maps v2 中的新类`TileProvider`（[文档](https://developers.google.com/maps/documentation/android/reference/com/google/android/gms/maps/model/TileProvider)）。我设置了一个非常简单的类：

```
/** This class provides images for WeatherOverlay **/
public static class RadarProvider implements TileProvider 
{

    /** Public constructor, provide default square dimensions **/
    public RadarProvider(int width, int height) 
    {
        //super(width, height);
    }

    public Tile getTile(int arg0, int arg1, int arg2) 
    {
        /* Breakpoint here */ return null;
    }

} 
```

（这是一个静态类，因为它嵌套在另一个类中。）

我在`getTile()`line的方法中设置了一个断点`return null`，但它从未被命中。我预计当地图加载瓷砖时，它会调用此方法来检索我的自定义瓷砖，但它从未被调用（或者至少断点从未被触发）。我正在调试模式下运行。这是我将提供程序添加到地图的代码：

```
 RadarProvider radarProvider = new WeatherOverlay.RadarProvider(256,256);
 TileOverlayOptions options = new TileOverlayOptions().tileProvider(radarProvider);
 TileOverlay tileOverlay = map.addTileOverlay(options); 
```

当我运行该代码时，我没有遇到任何异常，所以我假设`TileProvider`正确添加了。`getTile()`关于为什么没有调用该方法的任何想法？

# performance - WebGL - 在地图上实时绘制大约 6000 万个点

> ID：15147839
> 
> 赞同：0
> 
> 时间：2013-02-28T23:41:28.267
> 
> 标签：performance, map, webgl, openlayers, points

我还没有开始学习WebGL，但我想先了解它的能力。

当我下载并修改以下 WebGL 示例时：http: [//mrdoob.github.com/three.js/examples/webgl_buffergeometry_particles.html](http://mrdoob.github.com/three.js/examples/webgl_buffergeometry_particles.html)

在 1000 万时它很好，在 5000 万时它只是无法加载。

随着变化，WebGL 会支持渲染到地图上的数据点数量吗？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T17:29:28.910

尝试将您的 5000 万个 BufferGeometry 对象拆分为 50 个 100 万个 BufferGeometry 对象

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-07-06T08:12:49.720

您甚至可能无法在 JavaScript 的 v8 堆中容纳 5000 万个点。要处理这样的事情，您需要进行某种流式处理或预处理。

# javascript - Javascript / Onclick - 鼠标悬停时使鼠标光标成为手

> ID：15147843
> 
> 赞同：21
> 
> 时间：2013-02-28T23:41:36.257
> 
> 标签：javascript, html, onclick

我正在使用投票按钮。

该按钮是一个简单的链接，但搜索引擎蜘蛛正在抓取页面并触发虚假投票。因此，我将其更改为 onclick 以使其停止。

但是，在这样做之后，按钮仍然可以正常工作，但鼠标光标不再具有“手”指针。当您将鼠标悬停时，它仍然是箭头指针，因此很难判断它是一个实际运行的链接。

为了尝试解决这个问题，我添加了一个 style="cursor:default;"，我还尝试了 style="cursor:crosshair;" 尝试更改光标行为，但它不起作用。光标始终是指针。

这是我的代码：

```
<map id="vote_buttons" name="vote_buttons">
     <area shape="rect" alt="" coords="5,3,78,43" onClick="window.location='http://www.site.com/page.php?vote=Y'" style="cursor:default;" title="" />
     <area shape="rect" alt="" coords="83,3,160,44" onClick="window.location='http://www.site.com/page.php?vote=N'" style="cursor:pointer;" title="" />
     <area shape="default" nohref="nohref" alt="" />
</map> 
```

我在这里缺少什么让鼠标悬停看起来像一只手？

一如既往地提前感谢。

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2013-02-28T23:43:09.890

你可以在css中做到这一点！

只需将此添加到您想要样式的元素中。

```
cursor:pointer; 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-02-28T23:49:01.107

实际上我在这里找到了答案：[Cursor not changed to pointer in Usemap/area case](https://stackoverflow.com/questions/6589768/cursor-not-changing-to-pointer-in-usemap-area-case)

在您的情况下，只需`href="javascript:void(0)"`将`<area>`.

示例：http: [//jsfiddle.net/yE5bQ/](http://jsfiddle.net/yE5bQ/)

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2013-09-27T10:23:03.657

在你的 CSS 中放这个：

```
#vote_buttons {
    cursor:hand;
} 
```

这将使您的光标在悬停在按钮上时变成一只手。

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2013-03-06T00:13:28.173

所以我发现了一个解决方法。我对此并不完全满意，但它似乎正在完成这项工作。基本上，我只是在标签中添加了一个 href="#"。这使得手出现，并且大多数时候点击都像它应该的那样工作。

```
<map id="vote_buttons" name="vote_buttons">
     <area href="#" shape="rect" alt="" coords="5,3,78,43" onClick="window.location='http://www.site.com/page.php?vote=Y'" style="cursor:default;" title="" />
     <area href="#"  shape="rect" alt="" coords="83,3,160,44" onClick="window.location='http://www.site.com/page.php?vote=N'" style="cursor:pointer;" title="" />
</map> 
```

* * *

## 回答 #5

> 赞同：-3
> 
> 时间：2013-06-19T21:03:24.633

试试这个，它适用于**IE**和**HTA**，技巧是包含**URL** ...

```
<!-- put the following code inside your [body] button or anchor -->

<!-- onmousedown="mouseDown1()" onmouseup="mouseOut1()" -->

<script type="text/javascript">

function mouseDown1() {
document.body.style.cursor = 'url(anim2.cur)';
}

function mouseOut1() {
document.body.style.cursor = 'url(anim1.cur)';
}

function calc() {
var dummy = 0;

for (var i=0; i<100000;i++) {
     for (var z=0; i<100000;i++) {
          dummy = dummy + z + i;
     }
}

cursor_clear();
}

</script> 
```

# string - 字符串中最长回文的最小时间+空间复杂度

> ID：15147857
> 
> 赞同：2
> 
> 时间：2013-02-28T23:42:44.653
> 
> 标签：string, algorithm, data-structures

对于“查找字符串中包含的最长回文”这个问题，我已经看到了许多不同的解决方案。

我在careercup.com 上看到一个问题，要求在O(n) 时间和O(1) 空间内找到解决方案：http: [//www.careercup.com/question?id= 15074748](http://www.careercup.com/question?id=15074748)

那可能吗？我看了这个解决方案：

[http://leetcode.com/2011/11/longest-palindromic-substring-part-ii.html](http://leetcode.com/2011/11/longest-palindromic-substring-part-ii.html)

这似乎是最好的——虽然它是 O(n) 时间和 O(n) 空间。是否可以在更小的空间内完成？

编辑：顺便说一句，比 O(n^2) 更快地找到解决方案似乎是一个不合理的面试问题？

# php - 渲染 Â 在特殊字符前面

> ID：15147874
> 
> 赞同：2
> 
> 时间：2013-02-28T23:44:35.543
> 
> 标签：php

我正在从我的 CMS 中读取包含版权标志的字符串`®`。但是，当我将此字符串呈现到我的网站时，我会`Â`在版权标志之前获得一个权利。例如，我`Microsoft®`的 CMS 中有，但它呈现`MicrosoftÂ®`.

```
$title = (string) $myString;
$title = htmlentities($title,ENT_NOQUOTES,'UTF-8',false);
$title = str_replace(array('&lt;','&gt;'),array('<','>'), $title);
var_dump( $title ); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-28T23:48:24.167

“版权标志”的字符代码是`0xA9`。但是，这超出了`0x00`to的范围`0x7F`。

因此，在 ISO-8859-1 或 Windows-1252 等单字节字符集中，它可以正常工作。

但是在像 Unicode 这样的多字节集合中，它表示为`0xC2 0xA9`. 巧合的是，第二个字节与原来的相同，仅此而已。

要修复，您需要确保您的编码是一致的。一种解决方案是确保您的 HTML 文档具有`UTF-8`其`charset`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T23:50:24.920

如果您“移动”文本，请尝试 utf8_encoding 然后 utf8_decoding 。并检查是否在 html 的标题中使用了正确的编码。

请注意，如果您已经在数据库中弄乱了它，您将无法恢复它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-01T01:31:42.417

检查`[default_charset][1]`php.ini 中的 php 设置或`ini_set()`在您的 php 文件中使用

```
<?php

ini_set("default_charset", "utf-8");

?> 
```

将编码设置为您的 php 文件`utf8`

设置 html 元标记：

```
<meta equiv="Content-Type" content="text/html; charset=utf-8"> 
```

# ruby-on-rails - Rails 启动时出现 Ruby/PgSQL 错误：无法加载此类文件 -- pg_ext (LoadError)

> ID：15147877
> 
> 赞同：8
> 
> 时间：2013-02-28T23:44:52.933
> 
> 标签：ruby-on-rails, ruby, postgresql

我是 Ruby 新手（来自 Java 背景），并且可以从 Git 存储库访问 RoR 项目。我能够通过自制软件安装 rbenv 和 Postgres 构建 Ruby，使用正确的标志安装“pg”gem。当我去启动服务器时，我在项目上“捆绑安装”并创建了一个捆绑包的任何方式：...任何帮助都将不胜感激！

```
$ rails s
/Users//Projects/The /vendor/bundle/gems/pg-0.14.1/lib/pg.rb:4:in require': cannot load such file -- pg_ext (LoadError)

from /Users//Projects/The Usic/vendor/bundle/gems/pg-0.14.1/lib/pg.rb:4:in <top (required)>'

from /Users//.rbenv/versions/1.9.3-p392/lib/ruby/gems/1.9.1/gems/bundler-1.3.0/lib/bundler/runtime.rb:72:in require'

from /Users//.rbenv/versions/1.9.3-p392/lib/ruby/gems/1.9.1/gems/bundler-1.3.0/lib/bundler/runtime.rb:72:in block (2 levels) in require'

from /Users//.rbenv/versions/1.9.3-p392/lib/ruby/gems/1.9.1/gems/bundler-1.3.0/lib/bundler/runtime.rb:70:in each'

from /Users//.rbenv/versions/1.9.3-p392/lib/ruby/gems/1.9.1/gems/bundler-1.3.0/lib/bundler/runtime.rb:70:in block in require'

from /Users//.rbenv/versions/1.9.3-p392/lib/ruby/gems/1.9.1/gems/bundler-1.3.0/lib/bundler/runtime.rb:59:in each'

from /Users//.rbenv/versions/1.9.3-p392/lib/ruby/gems/1.9.1/gems/bundler-1.3.0/lib/bundler/runtime.rb:59:in require'

from /Users//.rbenv/versions/1.9.3-p392/lib/ruby/gems/1.9.1/gems/bundler-1.3.0/lib/bundler.rb:132:in require' 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2014-09-19T10:06:16.940

将**pg** gem 添加到您的`Gemfile`. 然后运行：

```
bundle install
bundle update 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-03-04T15:37:08.810

问题也出现在 Fedora 17 中。

卸载“pg”gem：

```
gem uninstall pg 
```

运行包（假设 Gemfile 包含“pg”gem）：

```
bundle 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-07-21T07:14:08.157

如果在安装 gem 期间 pq 安装不在路径中，则 gem 无法找到它。比宝石无法正常工作。

*   检查路径（尝试`psql`从命令行开始）。
*   卸载 pg-gem：`gem unistall pg`
*   并重新安装它：`bundle install`或`gem install pg`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-01T07:47:07.197

我很好奇您是在通过 brew 安装 postgres 之前还是之后安装了 pg gem？

如果在您通过 brew 安装 Postgres 之前安装了 pg，您可能需要将其删除并重新安装，以便针对您当前版本的 Postgres 进行编译。

旁注：postgresapp 是通过自制软件安装 postgres 的更好选择：http: [//postgresapp.com/](http://postgresapp.com/)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-07-04T14:01:20.570

我已经安装了 pg gem list pg

我也遇到了这个问题，并且成功了。首先，运行命令： $ gem install pg --pre
成功安装 pg-0.21.0-x64-mingw32

接下来，更新您的 Gemfile：gem 'pg', '~> 0.21.0'。而已。

我的 ruby​​gems 环境如下：

```
RubyGems Environment:
  - RUBYGEMS VERSION: 2.6.12
  - RUBY VERSION: 2.3.3 (2016-11-21 patchlevel 222) [x64-mingw32]
  - INSTALLATION DIRECTORY: C:/Ruby23-x64/lib/ruby/gems/2.3.0
  - USER INSTALLATION DIRECTORY: C:/Users/armano/.gem/ruby/2.3.0
  - RUBY EXECUTABLE: C:/Ruby23-x64/bin/ruby.exe
  - EXECUTABLE DIRECTORY: C:/Ruby23-x64/bin
  - SPEC CACHE DIRECTORY: C:/Users/armano/.gem/specs
  - SYSTEM CONFIGURATION DIRECTORY: C:/ProgramData
  - RUBYGEMS PLATFORMS:
    - ruby
    - x64-mingw32
  - GEM PATHS:
     - C:/Ruby23-x64/lib/ruby/gems/2.3.0
     - C:/Users/armano/.gem/ruby/2.3.0
  - GEM CONFIGURATION:
     - :update_sources => true
     - :verbose => true
     - :backtrace => false
     - :bulk_threshold => 1000
     - "gem" => "--no-ri --no-rdoc"
  - REMOTE SOURCES:
     - https://rubygems.org/ 
```

# sql-server-2008 - 元数据插入

> ID：15147882
> 
> 赞同：0
> 
> 时间：2013-02-28T23:45:04.077
> 
> 标签：sql-server-2008, tsql

我需要在临时表中插入元数据值。什么是容易做的事情？

我有 3390,3391,8978,9899,7677,9656,5463 之类的值，其中大约 30-40 个。我想将它们插入到临时表中。不想查询一个表，因为那是一个大表，使用 IN 运算符的性能非常低。

这是最好的方法吗？

```
INSERT INTO #Table
Select '3390'
UNION ALL
select '3391'
UNION ALL
select '8978' 
```

还有其他建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T00:04:47.767

这样可能会更容易一些；

```
Insert into #temp (field)
select number
from (values (123),(456),(678),...,(432)) as t(number) 
```

或者搜索一个拆分功能并这样做；

```
insert into #temp (field)
select item from dbo.split('123,456,789',',') 
```

要同时创建和插入，您可以使用“Select Into”语法。

# javascript - 视差效果干扰平滑滚动效果

> ID：15147885
> 
> 赞同：0
> 
> 时间：2013-02-28T23:45:13.500
> 
> 标签：javascript, jquery, firefox, parallax

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T23:55:17.690

添加

```
position: fixed;
top: 0; 
```

到您的#one img 将始终将图像保留在屏幕上。

# internet-explorer - CanvasRenderer 不在 IE 中渲染，在 FF 中滞后

> ID：15147893
> 
> 赞同：0
> 
> 时间：2013-02-28T23:46:01.683
> 
> 标签：internet-explorer, firefox, html5-canvas, three.js, lag

所以我对 Three.js 还很陌生，但我已经设法使用 CanvasRenderer 创建了我想要的东西，唯一的问题是代码在 IE 中不起作用并且在 FireFox 中“滞后”。

IE 通常会遇到某种问题，无论它试图做什么，这就是它如此特别的原因。而且我知道 FireFox 中的滞后可能来自我自己的目的，但是更多“高级”和繁重的东西在 FireFox 中运行良好，所以我认为这与我的代码有关。

无论如何，我希望有人可以看看我的代码，并可能解释为什么它在 IE 中不起作用以及为什么它在 FireFox 中运行缓慢，并希望为我指明正确的方向，以便我可以采取某些措施来尝试解决这个问题。

代码在下面，您可以通过这里查看自己的实时示例，[http ://ecaz.net/ThreeJS/redZone/](http://ecaz.net/ThreeJS/redZone/)

```
var camera, scene, renderer, plane;
var mouseX = 0, mouseY = 0;

var windowHalfX = window.innerWidth / 2;
var windowHalfY = window.innerHeight / 2;

init();
animate();

function init() {
    camera = new THREE.PerspectiveCamera( 75, window.screen.width / window.screen.height, 1, 10000 );
    camera.position.z = 475;

    scene = new THREE.Scene();

    container = document.createElement( 'div' );
    document.body.appendChild( container );

    var planeTexture = new THREE.Texture();
    var loader = new THREE.ImageLoader();

    loader.addEventListener("load", function(event) {
        planeTexture.image = event.content;
        planeTexture.needsUpdate = true;
    });
    loader.load("redzone.png");
    var geometry = new THREE.PlaneGeometry(window.screen.width, window.screen.height, 200, 4, 4, 4);
    var material = new THREE.MeshBasicMaterial({ map: planeTexture, overdraw: true });

    renderer = new THREE.CanvasRenderer();
    renderer.setSize(window.innerWidth, window.innerHeight);

    plane = new THREE.Mesh(geometry, material);
    scene.add(plane);
    container.appendChild( renderer.domElement );

    document.addEventListener( 'mousemove', onDocumentMouseMove, false );
    window.addEventListener( 'resize', onWindowResize, false );

}

function onWindowResize() {
    camera.aspect = window.screen.width / window.screen.height;
    camera.updateProjectionMatrix();

    renderer.setSize(window.innerWidth, window.innerHeight);
}

function onDocumentMouseMove( event ) {

    mouseX = ( event.clientX - windowHalfX) / 190;
    mouseY = ( event.clientY - windowHalfY) / 50;

}

function animate() {

    requestAnimationFrame( animate );

    render();

}

function render() {

    camera.position.x += ( mouseX - camera.position.x ) * 0.1;
    camera.position.y += ( - mouseY - camera.position.y ) * 0.1;

    camera.lookAt( scene.position );

    renderer.render( scene, camera );
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T01:25:15.913

这在评论中太草率了。如果没有加载和运行开发工具，IE 就没有真正的控制台。尝试在 Three.JS 加载之前将此代码段放入您的代码中。如果控制台不存在，它基本上会创建一些虚拟方法。

```
if (typeof (console) === 'undefined') {
  var console = {}
  console.log = console.error = console.info = console.debug = console.warn = console.trace = console.dir = console.dirxml = console.group = console.groupEnd = console.time = console.timeEnd = console.assert = console.profile = function () {};
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T00:03:56.690

你的飞机有 800 张面孔。改为这样做：

```
var geometry = new THREE.PlaneGeometry(window.screen.width, window.screen.height, 4, 4); 
```

此外，您的图像是 4.6 兆。

# html - IE9 中的 HTML5 文件上传失败

> ID：15147894
> 
> 赞同：3
> 
> 时间：2013-02-28T23:46:04.320
> 
> 标签：html, file-upload, internet-explorer-9

以下代码在 Chrome 中运行良好，但在 IE9 中失败 - 在`processFiles()`我们检索选定文件`e.target.files`时`null`

```
<!DOCTYPE html>
<html>
<header>
    <meta http-equiv="X-UA-Compatible" content="IE=8" />
</header>
<body>
    <input type="file" id="uploader"/>

    <script>        
        var uploader = document.getElementById ("uploader");
        if (uploader.addEventListener) {  // all browsers except IE before version 9
            uploader.addEventListener ("change", processFiles, false);
        }
        else {
            if (uploader.attachEvent) {   // IE before version 9
                uploader.attachEvent ("change", processFiles);
            }
        }       

        function processFiles(e)
        {

            var files = e.target.files || e.dataTransfer.files;

            for (var i = 0 ; i < files.length ; i ++)
            {
                window.console && console.log && console.log(files[i].name);
            }           
        }       
    </script>   
<body> 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T03:33:40.160

您的代码假定支持 File API。第一个支持 File API 的 IE 版本是 IE10。你的代码永远不会像现在这样跨浏览器工作。

考虑使用已经处理跨浏览器上传并包含许多有用功能的[Fine Uploader 。](http://fineuploader.com)

# ruby - 如何循环单击操作（刷新）直到找到特定字符串？

> ID：15147899
> 
> 赞同：1
> 
> 时间：2013-02-28T23:46:39.587
> 
> 标签：ruby, loops, watir

我正在编写一个 watir 脚本，我需要在其中循环单击操作，直到找到文本。请让我知道如何做到这一点。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T00:16:46.620

你可以这样做：

```
require 'watir'

b = Watir::Browser.new
b.goto('http://www.example.com')
until b.text.include? "example"
  b.refresh
end 
```

但是 watir 和 watir-webdriver 有处理动态页面元素的方法。此[链接](http://watirwebdriver.com/waiting/)有使用 watir-webdriver 等待的示例。

# windows - 如何在 Windows 上将控制台输入（是/否）作为批处理文件的一部分提供。

> ID：15147900
> 
> 赞同：23
> 
> 时间：2013-02-28T23:47:07.720
> 
> 标签：windows, batch-file, console

我正在编写一个简单的批处理文件 (remove.bat) 来删除一个目录及其所有子目录。该文件包含以下命令 -

```
rmdir /S modules 
```

其中*modules*是非空目录的名称。

我收到以下消息 -

```
C:\...\bin>rmdir /S modules
modules, Are you sure (Y/N)? 
```

如何**通过批处理文件**向上面的 Y/N 问题提供控制台输入“Y”？有没有可以做到这一点的命令？

* * *

## 回答 #1

> 赞同：57
> 
> 时间：2013-03-01T00:17:00.410

正如其他人指出的那样，您应该使用该`/Q`选项。但是还有另一种“老派”的方式来做到这一点，它在命令没有选项来抑制确认消息的那一天被使用。只需 ECHO 所需的响应并将值通过管道传输到命令中。

```
echo y|rmdir /s modules 
```

我建议改用该`/Q`选项，但如果您遇到不提供抑制确认消息选项的命令，管道技术可能很重要。

***注***-*此技术仅在命令从标准输入读取输入时才有效，与 cmd.exe 内部命令一样。但这对于某些外部命令可能并非如此。*

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-02-28T23:52:15.303

do`rmdir /S`用于删除非空目录，do`rmdir /Q`用于不提示。结合以`rmdir /S /Q`安静地删除非空目录。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-02-28T23:50:40.213

采用`rmdir /S /Q modules`

`/Q`禁止确认提示。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-02-28T23:49:59.860

你可以做

```
rmdir /Q 
```

Q代表安静

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2020-11-09T17:56:46.347

如果您不处理具有英语/美国语言环境的 Windows，您可能需要检索[您的机器所需的答案](https://www.dostips.com/forum/viewtopic.php?f=3&t=5391)：

```
@echo off

setlocal

set "ans_yes="
set "ans_no="
set "ans_all="

copy /y nul # >nul

for /f "tokens=2-7 delims=[(/)]" %%a in ( '
    copy /-y nul # ^<nul
' ) do if not defined ans_yes if "%%~e" == "" (
    set "ans_yes=%%~a"
    set "ans_no=%%~b"
    set "ans_all=%%~c"
) else (
    set "ans_yes=%%~a"
    set "ans_no=%%~c"
    set "ans_all=%%~e"
)

del /q #

set "ans_yes=%ans_yes: =%"
set "ans_no=%ans_no: =%"
set "ans_all=%ans_all: =%"

set "ans_y=%ans_yes:~0,1%"
set "ans_n=%ans_no:~0,1%"
set "ans_a=%ans_all:~0,1%"

endlocal & (
    set "ans_y=%ans_y%"
    set "ans_n=%ans_n%"
    set "ans_a=%ans_a%"
)

echo %ans_y%|rmdir /s modules 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-08-11T19:41:53.737

我只想补充一点，虽然不适用于 Rmdir，但在某些情况下，强制开关也可能是解决方案。因此，一般来说，您应该查看 /f、/q 或其某些变体的命令开关（例如，Netdom RenameComputer 使用 /Force，而不是 /f）。

回声管是一个巧妙的技巧，并且非常有用，因为您不会总能找到合适的开关。例如，我认为这是绕过这个 Y/N 提示的唯一方法......

```
Echo y|NETDOM COMPUTERNAME WorkComp /Add:Work-Comp 
```

[链接到几乎相同的 StackOverflow 帖子](https://stackoverflow.com/questions/7160342/how-to-skip-are-you-sure-y-n-when-deleting-files-in-batch-files)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-08-06T14:30:45.967

#### 是的.EXE

Yes 是一个很棒的工具，它会不断地回答 Yes、No 或任何要求输入的过程。

如果你自己运行它，它只会一遍又一遍地输出`y`+ 。`enter`但这并不是它的真正含义。它用于管道到另一个正在寻找对提示的响应的程序。

最简单的用例：

`yes|rd temp /s`

您可以使用`yes.exe`输出*任何参数或字符串：（*愚蠢的示例警告）：

`yes hello world`对于一个简单的基本`10 PRINT "Hello World": GOTO 10`

### 它的真正用途：

它适用于可以具有重复提示但没有内置`/y`或`/n`.

例如，您正在复制文件并不断收到`Overwrite? (Yes/No/All)`提示，您不得不敲击“N”键以获得“否”。这是解决方法：

`yes n|copy * c:\stuff`

### 如何得到它？

这只是 GNU Core Utils for Windows 的一小部分，它为 Windows 用户提供了基本的 Linux 命令。如果你写了很多批处理文件，非常非常有用的东西。

如果您有[Windows 版 Git](http://git-scm.com/download/win)，那么您已经拥有它，以及其他 GNU Core Utils。检查你`PATH`的。大概在`C:\Users\USERNAME\AppData\Local\Programs\Git\usr\bin`

如果您需要下载 Windows 二进制文件，它们可以从很多不同的地方获得，但最受欢迎的可能是[https://cygwin.com/packages/summary/coreutils.html](https://cygwin.com/packages/summary/coreutils.html)

# apache - 将查询字符串重写为斜线

> ID：15147903
> 
> 赞同：0
> 
> 时间：2013-02-28T23:47:29.270
> 
> 标签：apache, .htaccess, mod-rewrite

我正在一个设置为将页面加载为的网站上工作`http://domain.tld?p=pagename`，并且我希望这些页面可以通过`http://domain.tld/pagename`（仅仅是因为它更短且更容易引导人们访问）。

我知道这可以用`mod_rewrite`in来完成`.htaccess`，但是在服务器方面我有点不适应。这是可取的，如果是，它是如何完成的？

（哦，主页没有查询字符串，只是`http://domain.tld`- 我不希望这破坏它。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T00:11:33.520

自从我玩 apache 配置以来已经有一段时间了，但你想要这样的东西：

```
RewriteEngine  on
RewriteRule    ^/([^/])/?  ?p=$1 
```

第一部分是一个正则表达式，第二部分是一个替换，就像你在 perl 的`s/foo/bar/`构造中找到的一样（但当然与 perl 有一些不同，因为正则表达式的实现总是略有不同）。

这将不匹配`http://domain.tld`或`http://domain.tld/`因为`([^/])`不满足，而不是可选。正则表达式的`/?`末尾是平等地处理`http://domain.tld/pagename`（`http://domain.tld/pagename/`如果你想这样做）

请注意，如果在查询字符串上传递了其他参数，我上面的代码不一定有效，但您没有要求...

您应该知道，随着页面开始具有额外的查询字符串参数或您想要的`/area/pagename`等，URL 重写可能会变得非常复杂。这种增加的复杂性最终会导致您花费大量时间阅读此页面：

[http://httpd.apache.org/docs/2.4/mod/mod_rewrite.html](http://httpd.apache.org/docs/2.4/mod/mod_rewrite.html)

也许值得……只有你知道那个问题的答案g :)

# jquery - jQuery.lazyload 用于打印

> ID：15147907
> 
> 赞同：0
> 
> 时间：2013-02-28T23:47:49.590
> 
> 标签：jquery, jquery-lazyload

试图让 jquery.lazyload 用于打印和打印媒体查询。它几乎可以在 Chromium 中使用。但是，它只会显示在“屏幕”上而不是“打印”输出中。不确定这是由于延迟加载的异步性质还是我的误用。

这是我到目前为止所得到的：

```
$(document).ready(function() {
    if (Modernizr.mq('only all')) { // check of mq support
        print_mq = window.matchMedia('print')
        print_mq.addListener(function(mql) {
            if (mql.matches) {
                $("img.lazy").trigger('appear');  // load lazy loaded imags before print
            }
        });
    } else {
        window.onbeforeprint = function () { 
            $("img.lazy").trigger('appear');
        }
    }
}); 
```

我是`.trigger('appear')`在挖掘源代码后才发现的。它可以在 chromium 的开发工具或 firebug 中运行。但是，在这种情况下运行时，行为似乎有所不同，我不知道为什么。

对于如何使它适用于打印机媒体的任何猜测，我将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-13T18:54:10.427

我发现使用触发器只会导致部分图像加载，尤其是在使用过渡时，所以我尝试直接修改成功的图像。

此解决方案适用于**IE**和**Chrome ，但在****Mozilla Firefox**中仍然存在一些时间问题，它似乎不喜欢在按下打印按钮后加载内容（阻塞？），尽管它允许内容被更改/注入页面并且将在图像已经加载后在第二次打印请求中显示图像，遗憾地违背了目的。 **Opera**仍然是一个失败的原因，因为它目前不支持任何一个用于打印目的的事件，也许当它们转换为 webkit 时？

尝试改变：

```
$("img.lazy").trigger('appear'); 
```

至

```
$("img.lazy").each(function(){
    $(this).attr('src',$(this).attr('original'));
}); 
```

它仍然不是一个完美的解决方案，但它是朝着正确方向迈出的一步，至少对于使用 IE 或 Chrome 的约 60% 而言。

注意：您也可以直接在加载时使用此代码，因为它仍然可以通过将图像推迟到页面的其余部分加载后加快初始渲染时间，当然它不提供使用的滚动方法的带宽节省在延迟加载插件中。

# html - CSS问题中的简单导航栏，可能是一个非常简单的答案

> ID：15147911
> 
> 赞同：0
> 
> 时间：2013-02-28T23:48:11.400
> 
> 标签：html, css

所以我只是想制作一个简单的导航栏菜单，当你将鼠标悬停在它上面时，它下面有一个 4px 的边框。这本身并不难，但我试图对其进行样式设置，以便不同的菜单元素具有不同的颜色。这就是我到目前为止所拥有的：

HTML

```
 <div id="navcontainer">
<ul id="navlist">
<li id="active"><a href="#" class="home">Home</a></li>
<li><a href="#" class="about">About</a></li>
<li><a href="#" class="portfolio">Portfolio</a></li>

</ul>
</div> 
```

CSS

```
/*Menu*/

#navlist
{
margin: 0;
padding: 0 0 20px 10px;
}

#navlist ul, #navlist li
{
margin: 0;
padding: 0;
display: inline;
list-style-type: none;
}

#navlist a:link, #navlist a:visited
{
float: left;
line-height: 14px;
font-weight: bold;
margin: 0 10px 4px 10px;
text-decoration: none;
color: #999;
}
#navlist a:hover { color: #000; }

#navlist  li .home {
color: #d43f3f;
}

#navlist li .home a:hover
{
border-bottom: 4px solid #d43f3f;
padding-bottom: 2px;
background: transparent;
color: #d43f3f;
}
#navlist li .about {
color: #00ace9;
}

#navlist  li .about a:hover
{
border-bottom: 4px solid #00ace9;
padding-bottom: 2px;
background: transparent;
color: #00ace9;
}
#navlist li .portfolio {
color: #6a9a19;
}

#navlist li .portfolio a:hover
{
border-bottom: 4px solid #6a9a19;
padding-bottom: 2px;
background: transparent;
color: #6a9a19;
} 
```

它显示不同的颜色，但悬停功能不适用于我的 4px 边框... :(

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T23:49:56.843

这真的很简单。您的 CSS 中有两个声明。

`#navlist li .portfolio a:hover {`

`.portfolio`是`a`元素。您使用的声明暗示：`a`which is child of `.portfolio`which is child of `li`which is child of `#navlist`. 你走得太深了。

这将起作用：

`#navlist li a.portfolio:hover {`

工作小提琴：http: [//jsfiddle.net/jnbBz/1/](http://jsfiddle.net/jnbBz/1/)

完全更正的 CSS：

```
/*Menu*/

#navlist
{
margin: 0;
padding: 0 0 20px 10px;
}

#navlist ul, #navlist li
{
margin: 0;
padding: 0;
display: inline;
list-style-type: none;
}

#navlist a:link, #navlist a:visited
{
float: left;
line-height: 14px;
font-weight: bold;
margin: 0 10px 4px 10px;
text-decoration: none;
color: #999;
}
#navlist a:hover { color: #000; }

#navlist  li .home {
color: #d43f3f;
}

#navlist li .home:hover
{
border-bottom: 4px solid #d43f3f;
padding-bottom: 2px;
background: transparent;
color: #d43f3f;
}
#navlist li .about {
color: #00ace9;
}

#navlist  li .about:hover
{
border-bottom: 4px solid #00ace9;
padding-bottom: 2px;
background: transparent;
color: #00ace9;
}
#navlist li .portfolio {
color: #6a9a19;
}

#navlist li a.portfolio:hover
{
border-bottom: 4px solid #6a9a19;
padding-bottom: 2px;
background: transparent;
color: #6a9a19;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T23:55:45.527

你的选择器错了

`#navlist li .about`应该是`#navlist li a.about`例如

# android - 让手势落入Android上的不同视图

> ID：15147912
> 
> 赞同：1
> 
> 时间：2013-02-28T23:48:13.633
> 
> 标签：android, gesture

我有一个自定义视图，可以显示屏幕。我已经构建了它的 onDraw 代码来支持缩放风格的放大和缩小。视图本身处理所有这些工作。

另外，尽管如此，我希望允许用户向左或向右滑动屏幕，以便我可以将该视图与之前或之后的视图交换（类似于分页情况）。

我能够使用 GestureOverlayView 捕捉并响应左右滑动，但现在覆盖视图正在拦截我的捏缩放触摸事件。我怎样才能让那些捏缩放触摸事件落入自定义视图将在活动级别抓住滑动手势？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T02:04:10.720

我认为您可能希望使用带有[GestureDetector](http://developer.android.com/reference/android/widget/ViewFlipper.html "ViewFlipper")的[ViewFlipper](http://developer.android.com/reference/android/view/GestureDetector.html)而不是 GestureOverlayView。

[http://android-er.blogspot.com/2012/02/implement-swiping-page-effect-using.html](http://android-er.blogspot.com/2012/02/implement-swiping-page-effect-using.html)

使用这样的设置，手势检测器应该只接受左/右滑动，而当前显示的视图仍然控制捏缩放效果

# ssis - SQL Server 2012：在 SSMS 中注册的 SSIS 服务器未显示状态；仍然弹出“连接到服务器”对话框

> ID：15147913
> 
> 赞同：2
> 
> 时间：2013-02-28T23:48:16.660
> 
> 标签：ssis, sql-server-2012, ssms

我有一个奇怪的问题，我无法解决。

这是一个带有 SQL2012Ent 的 Win2008R2Ent 服务器，仅安装了 SSAS 和 SSIS 服务。

**问题：**

我在我的 SSMS 中注册了 SSIS 服务器：

1.  已注册服务器列表中的服务器图标旁边没有绿色箭头状态图标。
2.  双击服务器不会自动登录。它仍然会显示“连接到服务器”对话框。

除了弹出烦人的对话框（我只需要单击连接）外，我可以远程连接。它不会为任何其他服务器弹出。登录后，我看到绿色指示灯，但仅在对象资源管理器中

在本地服务器上，如果我以管理员身份运行 SSMS，我可以连接。我是域管理员，属于服务器的本地管理员组。注册服务器列表中的图标上也没有绿色箭头。

**想法：**

1.  我不确定绿色箭头状态灯是否应该在注册列表中，但我假设是这样，因为所有其他服务器都有它。
2.  由于服务器已经注册，因此弹出的这个额外对话框非常不寻常且不必要。我知道这可能听起来像一个小问题，但我想彻底，并确保我没有错过任何东西。像这样的不寻常活动对我来说是一个标志。我的 SQL 管理员朋友也说这很不寻常。

我想知道这是否是正常行为，并希望有人可以在这种设置中分享他们的经验。我尝试搜索这些问题，但运气不佳。

**截屏：**

![我的工作站上的 SSMS 显示注册服务器缺少绿色箭头以及双击注册列表中的服务器时弹出对话框](../Images/fb2d994163210de9e7b306607c12f3c9.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T20:28:45.853

您是否尝试将 SP1 应用到您的客户端以更新管理工具？我在 RTM 工具中发现了很多这样的问题。

# python - Python 请求：响应对象不包含“状态”标头

> ID：15147914
> 
> 赞同：5
> 
> 时间：2013-02-28T23:48:17.653
> 
> 标签：python, http-status-codes, python-requests

这是 Requests 1.1.0 和 Python 2.6.4（在 Python 2.7.2 上也有相同的行为）。

```
>>> import requests
>>> response = requests.get('http://www.google.com')
>>> response.status_code
200
>>> print response.headers.get('status')
None 
```

根据文档，应该有一个 headers['status'] 条目，其中包含类似“200 OK”的字符串。

这是标题字典的全部内容：

```
>>> response.headers 
{'x-xss-protection': '1; mode=block', 'transfer-encoding': 'chunked', 'set-cookie': 'PREF=ID=74b29ee465454efd:FF=0:TM=1362094463:LM=1362094463:S=Xa96iJQX_9BrC-Vm; expires=Sat, 28-Feb-2015 23:34:23 GMT; path=/; domain=.google.com, NID=67=IH21bLPTK2gLTHCyDCMEs3oN5g1uMV99U4Wsc2YA00AbFt4fQCoywQNEQU0pR6VuaNhhQGFCsqdr0FnWbPcym-pizo0xVuS6WBJ9EOTeSFARpzrsiHh6HNnaQeCnxCSH; expires=Fri, 30-Aug-2013 23:34:23 GMT; path=/; domain=.google.com; HttpOnly', 'expires': '-1', 'server': 'gws', 'cache-control': 'private, max-age=0', 'date': 'Thu, 28 Feb 2013 23:34:23 GMT', 'p3p': 'CP="This is not a P3P policy! See http://www.google.com/support/accounts/bin/answer.py?hl=en&answer=151657 for more info."', 'content-type': 'text/html; charset=ISO-8859-1', 'x-frame-options': 'SAMEORIGIN'} 
```

[这](http://docs.python-requests.org/en/latest/user/quickstart/#response-headers)是我得到这个字典应该包含一个“状态”条目的想法的地方。

难道我做错了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-01T00:00:24.793

你在寻找“原因”

```
>>> x=requests.get("http://apple.adam.gs")
>>> x.reason
'OK'
>>> 
```

custom.php 包含：

```
header("HTTP/1.1 200 Testing") 
```

结果是：

```
>>> x=requests.get("http://apple.adam.gs/custom.php")
>>> print x.reason
Testing
>>> 
```

# ruby-on-rails - Rails 如何使用 has_many_and_belongs_to_many 和 accept_nested_attributes_for

> ID：15147915
> 
> 赞同：1
> 
> 时间：2013-02-28T23:48:17.593
> 
> 标签：ruby-on-rails, many-to-many, nested-attributes

我有两个模型：

路线和活动

我通过如下迁移在它们之间建立了多对多关系：

```
class ActivitiesRoutes < ActiveRecord::Migration
    def up
        create_table :activities_routes, :id => false do |t|
            t.integer :route_id
            t.integer :activity_id
        end
    end
end 
```

在休息服务中，我获取路线的数据并获得多项活动，我的模型如下所示：

```
class Route < ActiveRecord::Base
  attr_accessible :activities_attributes
  has_and_belongs_to_many :activities
  accepts_nested_attributes_for :activities
end 
```

和：

```
class Activity < ActiveRecord::Base
  attr_accessible :activitytext, :iconid
  has_and_belongs_to_many :routes
end 
```

在我的应用控制器上，我想做类似的东西：

```
ruta=Route.create({
    #other data for the model
})
ruta.activities_attributes = @activitiesarray #Array made with the Activities received 
```

但我收到一个错误：

```
undefined method `activities_attributes' for #<Route:0x2bccf08> 
```

如果我像这样离开它：

```
ruta.activities_attributes << @activitiesarray 
```

我得到：

```
undefined method `with_indifferent_access' for #<Activity:0x6af7400> 
```

有谁知道我能让这成为可能吗？谢谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T23:50:59.470

你不能这样做

```
ruta.activities_attributes << @activitiesarray 
```

因为`accepts_nested_attributes_for`只提供了一种`*_attributes=`方法，所以以下应该有效

```
ruta.activities_attributes = @activitiesarray 
```

# sql-server - 更改行 ID 并将此更改反映到所有相关表

> ID：15147918
> 
> 赞同：1
> 
> 时间：2013-02-28T23:48:31.890
> 
> 标签：sql-server, import, sql-server-2008-r2, ddl, sql-import-wizard

## 旧版

我有一张`Person`桌子和桌子`Company`。

两个表都有一列`Id`（身份）

表公司的 ID 为 1 到 165 在表中人的 ID 为 1 到 2029

## 新版本

在新版本的系统中，创建了一个表`Entity`。该表包含`Companies`和`People`

`Company`和`Person`表将被维护**，**引用`Entity`表。
**表中的 Id`Entity`将在`Company`or中相同`Person`的**

## 问题

两个表都与其他表有多重关系。表`Entity`（以及其他）有一个列`ID`（身份）。问题是当两个表放在一起时，Id 重复了（这是意料之中的）。

**如何在不丢失关系的情况下导入？**

## 尝试

我想改变`Company`表中Ids的值，从2030年开始。因此连接两个表时Ids不会重复。

但这又产生了另一个问题。

1.  如何在不失去现有关系的情况下做到这一点？
2.  如何更改表中行的 ID，这会反映在与之相关的所有表中？

**我想只使用 DDL (SQL Server) 来做到这一点**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T22:01:03.763

> 我想改变 Company 表中 Ids 的值，从 2030 年开始。因此连接两个表时 Ids 不会重复。

使用 ON UPDATE CASCADE 在 Person 表上为所有相关表创建外键约束（或更改现有外键约束）。然后更新 Person 表并更改 id 列的值 - 这些更改将级联到相关表。

为了阻止进一步的问题，可以将 Person 和 Company 中的身份列分别更改为 identity(1000, 3) 和 identity (1001, 3) 之类的东西。

但是，我认为最好的办法是在 Entity 表中有一个不同的 EntityID 列，与 PersonID 和 CompanyID 无关。Entity 表还将有一个名为 AltEntityID 或 BusinessKey 的列，其中包含来自另一个表的 id，并且没有唯一约束或外键约束。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T21:36:43.953

如果您对您的尝试进行小修改 - 添加新列，例如和 to`newId`以管理与列的关系并保持列不变。为什么这是最简单的方法？因为从一侧看，新列不应该是标识列。另一方面，您可以保留与其他表相关联的所有逻辑并保持不变。`Company``Person``Entity``id``Company``Person`

# .net - “ApplicationServices”是横切关注点“东西”的正确名称吗？

> ID：15147921
> 
> 赞同：1
> 
> 时间：2013-02-28T23:48:40.360
> 
> 标签：.net, architecture, namespaces, domain-driven-design, naming

我想为我的命名空间找到一个正确的名称，该名称将包含与横切关注点相关的所有项目，例如日志记录、安全性、本地化等。

我的想法是这样的：

```
CompanyName.ApplicationServices.Logging
CompanyName.ApplicationServices.Security 
```

但是，我认为是应用程序服务，与应用程序服务的 DDD 定义不匹配。因此，我不确定我是否为二级命名空间选择了正确的名称......

你们怎么看？

非常感谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-01T00:53:24.437

对于这些问题，我们也松散地使用了术语**基础设施。**我认为你需要小心。在命名事物时，最好是具体而不是笼统。通用容器将被误用和滥用。也许现在最好从两个单独的命名空间开始，当您发现您对一组相关问题了解更多时找到一个有意义的容器：

```
CompanyName.Logging
CompanyName.Security 
```

过早争取重用是危险的：[胜利是拉斯维加斯最糟糕的事情](http://37signals.com/svn/posts/3384-winning-is-the-worst-thing-that-can-happen-in-vegas)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T00:46:00.680

您列出的服务将被归类为**基础设施服务**。应用程序服务封装您的域并通过编排存储库、基础设施服务和域实体来实现用例。

# ruby - Erlang actor 与 OOP 对象有何不同？

> ID：15147924
> 
> 赞同：12
> 
> 时间：2013-02-28T23:48:54.620
> 
> 标签：ruby, oop, functional-programming, erlang

假设我有一个像这样定义的 Erlang actor：

```
counter(Num) ->
  receive
    {From, increment} ->
      From ! {self(), new_value, Num + 1}
      counter(Num + 1);
  end. 
```

同样，我有一个这样定义的 Ruby 类：

```
class Counter
  def initialize(num)
    @num = num
  end

  def increment
    @num += 1
  end
end 
```

Erlang 代码以函数式风格编写，使用尾递归来维护状态。但是，这种差异的有意义的影响是什么？在我天真的眼里，这两件事的接口看起来很相似：你发送一条消息，状态得到更新，然后你得到新状态的表示。

函数式编程经常被描述为与 OOP 完全不同的范式。但 Erlang actor 似乎完全按照对象应该做的事情去做：维护状态、封装并提供基于消息的接口。

换句话说，当我在 Erlang Actor 之间传递消息时，它与我在 Ruby 对象之间传递消息时有何不同？

我怀疑功能/OOP 二分法的后果比我看到的要大。谁能指出他们？

让我们抛开 Erlang actor 将由 VM 调度并因此可能与其他代码同时运行这一事实。我意识到这是 Erlang 和 Ruby 版本之间的主要区别，但这不是我想要的。并发在其他语言中是可能的，包括 Ruby。虽然 Erlang 的并发性能可能非常不同（有时更好），但我并不是真的在问性能差异。

相反，我对问题的功能与 OOP 方面更感兴趣。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-01T06:21:26.790

> 换句话说，当我在 Erlang Actor 之间传递消息时，它与我在 Ruby 对象之间传递消息时有何不同？

不同之处在于，在像 Ruby 这样的传统语言中，没有消息传递，而是在同一线程中执行方法调用，如果您有多线程应用程序，这可能会导致同步问题。所有线程都可以访问彼此的线程内存。

在 Erlang 中，所有参与者都是独立的，改变另一个参与者状态的唯一方法是发送消息。没有进程可以访问任何其他进程的内部状态。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T00:29:05.397

恕我直言，这不是 FP 与 OOP 的最佳示例。差异通常体现在对象上的访问/迭代和链接方法/函数上。此外，理解什么是“当前状态”可能在 FP 中效果更好。

在这里，您将两种截然不同的技术相互对抗。一个碰巧是F，另一个是OO。

我可以立即发现的第一个区别是内存隔离。消息在 Erlang 中是序列化的，因此更容易避免竞争条件。

第二个是内存管理细节。在 Erlang 中，消息处理在 Sender 和 Receiver 之间划分。Erlang VM 持有两组进程结构锁。因此，当 Sender 发送消息时，他获得了不会阻塞主进程操作的锁（通过 MAIN 锁访问）。总而言之，与 Ruby 端的完全随机行为相比，它为 Erlang 提供了更柔和的实时性。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-01T08:35:37.213

从外面看，演员就像物体。它们封装状态并通过消息与世界其他地方通信以操纵该状态。

要了解 FP 是如何工作的，您必须查看演员内部并了解它如何改变状态。您的状态为整数的示例太简单了。我没有时间提供完整的示例，但我会草绘代码。通常，actor 循环如下所示：

```
loop(State) ->
  Message = receive
  ...
  end,
  NewState = f(State, Message),
  loop(NewState). 
```

与 OOP 最重要的区别是没有变量突变，即 NewState 是从 State 获得的，并且可能与它共享大部分数据，但 State 变量始终保持不变。

这是一个很好的属性，因为我们从不破坏当前状态。函数 f 通常会执行一系列转换，将 State 变为 NewState。只有当它完全成功时，我们才通过调用循环（NewState）用新状态替换旧状态。所以重要的好处是我们状态的一致性。

我发现的第二个好处是代码更简洁，但需要一些时间来适应它。通常，由于您无法修改变量，因此您必须将代码划分为许多非常小的函数。这实际上很好，因为您的代码将被很好地分解。

最后，由于您无法修改变量，因此更容易推理代码。对于可变对象，您永远无法确定对象的某些部分是否会被修改，如果使用全局变量，情况会变得更糟。在做 FP 的时候应该不会遇到这样的问题。

要尝试它，您应该尝试使用纯 erlang 结构（不是 actor、ets、mnesia 或 proc dict）以函数式方式操作一些更复杂的数据。或者，你可以用[这个在 ruby​​ 中尝试它](https://github.com/harukizaemon/hamster)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-01T10:14:17.553

Erlang 包括 Alan Kay 的 OOP (Smalltalk) 的消息传递方法和 Lisp 的函数式编程。

您在示例中描述的是 OOP 的消息方法。Erlang 进程发送消息是一个类似于 Alan Kay 的对象发送消息的概念。顺便说一句，您可以检索在[Scratch](http://scratch.mit.edu/)中实现的这个概念，其中并行运行的对象在它们之间发送消息。

函数式编程是您对流程进行编码的方式。例如，Erlang 中的变量不能被修改。设置后，您只能读取它们。您还有一个列表数据结构，它的[工作](http://www.erlang.org/doc/man/lists.html)方式与 Lisp 列表非常相似，并且您会享受到受 Lisp 的 lambda 启发的[乐趣。](http://www.erlang.org/doc/programming_examples/funs.html)

一方面的消息传递和另一方面的函数在 Erlang 中是完全不同的两件事。在编写现实生活中的 erlang 应用程序时，您将 98% 的时间用于函数式编程，而将 2% 的时间用于考虑消息传递，这主要用于可伸缩性和并发性。换句话说，当你遇到棘手的复杂编程问题时，你可能会使用 Erlang 的 FP 端来实现算法的细节，并使用消息传递来实现可扩展性、可靠性等......

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-01T13:09:14.473

你觉得这怎么样：

```
thing(0) ->
   exit(this_is_the_end);
thing(Val) when is_integer(Val) ->
    NewVal = receive
        {From,F,Arg} -> NV = F(Val,Arg),
                        From ! {self(), new_value, NV},
                        NV;
        _ -> Val div 2
    after 10000
        max(Val-1,0)
    end,
    thing(NewVal). 
```

当您生成该进程时，它将自行生存，降低其值直到达到值 0 并将消息 {'EXIT',this_is_the_end} 发送到与其链接的任何进程，除非您注意执行以下操作：

```
ThingPid ! {self(),fun(X,_) -> X+1 end,[]}.
% which will increment the counter 
```

或者

```
ThingPid ! {self(),fun(X,X) -> 0; (X,_) -> X end,10}.
% which will do nothing, unless the internal value = 10 and in this case will go directly to 0 and exit 
```

在这种情况下，您可以看到“对象”与应用程序的其余部分并行地独立存在，它几乎无需任何代码即可与外部交互，并且外部可以要求他做您没有做的事情不知道您何时编写和编译代码。

这是一个愚蠢的代码，但是有一些原则用于实现诸如 mnesia 事务之类的应用程序，行为......恕我直言，这个概念确实不同，但如果你想正确使用它，你必须尝试不同的想法。我很确定在 Erlang 中编写“OOPlike”代码是可能的，但是要避免并发性将是极其困难的：o)，最终没有优势。看看 OTP 原理，它给出了有关 Erlang 应用程序架构的一些跟踪（监督树、“1 个单一客户端服务器”池、链接进程、受监视进程，当然还有模式匹配单一分配、消息、节点集群...... ）。

# windows - 如何为 F# 编译器 (Fsc.exe) 创建快捷方式？

> ID：15147930
> 
> 赞同：2
> 
> 时间：2013-02-28T23:49:33.543
> 
> 标签：windows, f#

我有一个愚蠢的问题要问。我刚刚开始学习 F#，我正在尝试编译一些基础示例（例如 HelloWorld.fs）。

我创建了一个简单的 F# 文件，其路径为：`C:\FSharp\HelloWorld.fs` .

为了编译它，我使用了 F# 编译器的完整路径，如下所示：

`C:\FSharp>"C:\Program Files\Microsoft F#\v4.0\fsc.exe" HelloWorld.fs`

它工作得很好。

但是，我不想继续写编译器的完整路径：`C:\Program Files\Microsoft F#\v4.0\fsc.exe`. 我试图将它添加到 Windows 路径，但我不断收到错误消息`fsc is not recognized as internal or external command`。

如何为 F# 编译器创建快捷方式，这样每次编译程序时都不必使用完整路径？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2019-01-29T16:09:20.387

对于那些在 2019 年到达这里并收到 F# 作为 Visual Studio 2017 组件的人。F# 编译器的位置如下：

```
C:\Program Files (x86)\Microsoft Visual Studio\2017\Community\Common7\IDE\CommonExtensions\Microsoft\FSharp\fsc.exe 
```

> 仔细记下版本类型（`Community`在这种情况下）并相应地调整你的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-01T00:02:04.613

您实际上不需要为此创建快捷方式，只需将包含的文件夹添加`fsc.exe`到您的`PATH`变量中。

当您打开命令提示符时，运行以下命令：

```
set PATH=%PATH%;"C:\Program Files\Microsoft F#\v4.0\" 
```

或者，如果您使用的是 64 位版本的 Windows：

```
set PATH=%PATH%;"C:\Program Files (x86)\Microsoft F#\v4.0\" 
```

* * *

可以在以下位置找到最新版本的 fsc.exe：

*   "C:\Program Files (x86)\Microsoft SDKs\F#\3.1\Framework\v4.0" // 截至 2014 年 8 月

*   "C:\Program Files (x86)\Microsoft SDKs\F#\3.0\Framework\v4.0" // 2013

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-07-15T19:17:11.390

我尝试将其设置为我的路径，但不幸的是它不起作用。尝试注销/重新启动等。我相信这是因为我的工作计算机上的安全措施。

对于其他有类似问题的人，我发现设置别名不仅有效，而且比其他方法更可取。

```
set-alias fsi "C:\Program Files (x86)\Microsoft SDKs\F#\3.1\Framework\v4.0\fsi.exe"
set-alias fsc "C:\Program Files (x86)\Microsoft SDKs\F#\3.1\Framework\v4.0\fsc.exe" 
```

现在这些命令没有烦人的 .exe 文件扩展名。

这篇关于为 powershell 创建持久别名的文章对设置很有帮助。 [http://www.powershellpro.com/powershell-tutorial-introduction/tutorial-powershell-aliases/](http://www.powershellpro.com/powershell-tutorial-introduction/tutorial-powershell-aliases/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-01T00:05:38.747

我可以确认将目录添加到您的`PATH`变量应该可以解决问题（在我的机器上工作！）请注意，您可能需要重新启动任何打开的命令行（或者，只是为了确保系统），直到考虑到更改如果您更改`PATH`系统属性中的变量。

您还可以使用以下内容创建`bat`文件：

```
echo off
"C:\Program Files (x86)\Microsoft F#\v4.0\fsc.exe" %* 
```

然后确保该`bat`文件位于您的`PATH`. 但是`bat`文件可以有不同的名称（比如`fsharpc.bat`），以防标准名称与系统上的其他名称之间存在名称冲突`fsc`......

# python - Django 在 Alwaysdata 上部署

> ID：15147935
> 
> 赞同：2
> 
> 时间：2013-02-28T23:49:50.563
> 
> 标签：python, django

我从 Alwaysdata 阅读了[部署 django 应用程序，但遇到了问题。](http://wiki.alwaysdata.com/wiki/Deploying_a_Django_App)

我们运行`bash django.fcgi`，终端显示：

```
import: unable to open X server `' @ import.c/ImportImageCommand/367.
django.fcgi: line 5: syntax error near unexpected token `('
django.fcgi: line 5: `PROJECT_DIR = os.path.dirname(os.path.dirname(os.path.abspath(__file__)))' 
```

我做了他们所说的一切，但我无法解决这个问题。我在 Django 1.5 上运行。

```
- mymodule
- mysite
... __init__.py
... settings.py
... urls.py
.. wsgi.py
- public
... django.fcgi
... .htaccess
... static
... media
- manage.py
- statics
- templates
- __init__.py 
```

这是`django.fcgi`和`.htaccess`：

```
#!/usr/bin/python

import os, sys

PROJECT_DIR = os.path.dirname(os.path.dirname(os.path.abspath(__file__)))
sys.path.insert(0, PROJECT_DIR)
sys.path.insert(0, os.path.dirname(PROJECT_DIR))

PROJECT_NAME = PROJECT_DIR.split('/')[-1]
os.environ['DJANGO_SETTINGS_MODULE'] = "settings"

from django.core.servers.fastcgi import runfastcgi
runfastcgi(method="threaded", daemonize="false") 
```

* * *

```
AddHandler fcgid-script .fcgi
RewriteEngine On
RewriteCond %{REQUEST_FILENAME} !-f
RewriteRule ^(.*)$ django.fcgi/$1 [QSA,L] 
```

我的问题在哪里？我在 Unicode BOM 中编码了我的 django.fcgi 文件，就像[这里](http://forum.alwaysdata.com/viewtopic.php?id=2751)一样，但没有结果。你有什么想法吗？谢谢...

编辑：好吧，我的网站无法正常工作：500 内部服务器错误。

服务器配置：Apache、Python 2.6、Django 1.5

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T00:58:17.273

我认为您不应该那样运行该文件。尽管开头有 shebang 行，但该文件应被解释为 shell 脚本 (bash) 而不是 python 脚本，因此会出现“导入”错误（`import`似乎是一个 ImageMagick 命令，它会生成类似于屏幕截图的内容）。

所以运行该文件的正确方法是其中之一

```
bash -c "./django.fcgi" # file must have execution permission
python django.fcgi
./django.fcgi           # also 
```

`DEBUG=True`如果您的应用程序配置为在某处记录，则可以打开`settings.py`或读取日志来调试 500 错误。

编辑：

关于导入错误，我认为正确的配置是

```
os.environ['DJANGO_SETTINGS_MODULE'] = "mysite.settings" 
```

你拥有它的方式 Django 试图加载`public/settings.py`失败。更多信息[在这里](https://docs.djangoproject.com/en/dev/topics/settings/)。

如果这不起作用，请尝试指定 settings.py 的完整路径：

```
os.environ['DJANGO_SETTINGS_MODULE'] = os.path.join(PROJECT_DIR, "mysite", "settings") 
```

希望能帮助到你。

# c++ - 嵌套结构的 typedef

> ID：15147943
> 
> 赞同：0
> 
> 时间：2013-02-28T23:50:29.087
> 
> 标签：c++, struct, nested, typedef

我正在尝试使用以下方法对一组嵌套结构进行 typedef：

```
struct _A
{
    struct _Sim
    {
        struct _In
        {
            STDSTRING UserName;
            VARIANT Expression;
            int Period;
            bool AutoRun;
            //bool bAutoSave;
        } In;

        struct _Out
        {
            int Return;
        } Out;

    } Sim;

} A;

typedef _A._Sim._In SIM_IN; 
```

关键是VS2010的编辑器喜欢它。它识别 typedef 中的元素，我可以将它作为函数的参数包含在内，但是当你去构建它时，我首先收到警告 C4091（当没有声明变量时在左侧被忽略），然后导致错误 C2143“缺少';' 前 '。'。

typedef 的想法是使用一个名称轻松管理类型定义（在指针、原型等中）到 _A._Sim._In……如果编译器允许，这似乎是 typedef 的完美用途。

与使用整个嵌套名称 (_A._Sim._In) 相比，如何使用一个名称引用嵌套结构以使指针管理和类型规范更容易？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T07:50:24.677

这样做可能不太可取，但是，如果使用 typedef 无法实现，我想你总是可以这样做

`#define _A._Sim._In SIM_IN`

但正如我所说，由于各种原因，您可能不喜欢这样。:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T07:54:35.657

点运算符是应用于**对象**的后缀运算符（就 C 而言）。即，您不能将其应用于类型。

要达到您想要的，您可以使用函数或宏，例如：

```
 #define SIM_IN(x) x._Sim._In 
```

# ruby-on-rails - Ember 数据有很多关系

> ID：15147945
> 
> 赞同：1
> 
> 时间：2013-02-28T23:50:33.750
> 
> 标签：ruby-on-rails, ember.js, ember-data

这是一个关于我的理解的问题。

在 Rails 中，当您在两个模型（父模型和子模型）之间设置 has_many-belongs_to 关联时，id 仅存储在子模型上。如果要查找孩子的父母，则使用孩子的 id 查询数据库。为了找到所有的父母子女，数据库将查询所有具有与当前父母匹配的 parent_id 的记录。Rails 是我的后端，所以这就是 ember-data 与之交互的内容。

ember-data 中的关联似乎需要以两种方式设置，并且两个模型上都需要存在 id。具有 has_many 关系的模型应该有一个包含其子 ID 的数组。但是，这并不存储在服务器端。

客户端使用 ember，我需要能够列出父母的孩子。但是，如果不为每个父母迭代所有孩子，我就无法访问它。

这里有一个根本的不匹配，我只想确保我正确地实现了我的应用程序。我的 ajax 应该返回每个父母的 id 数组还是应该在客户端填充这些？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-01T00:39:20.893

在 JSON 中包含关系`ids`数组`hasMany`，严格来说，是可选的。在实践中它是必不可少的，因为没有它，Ember-Data 将只能找到那些已经加载的相关记录。

例如，如果您有

```
App.Post = DS.Model.extend({
  comments: DS.hasMany('App.Comment')
});

App.Comment = DS.Model.extend({
  post: DS.belongsTo('App.Post')
}); 
```

并且您省略了JSON 中的`comment_ids`数组`post`，那么您将需要手动调用`App.Comment.find()`以加载所有评论，然后`post.get('comments')`才能保证包含与给定`post`.

如果您`comment_ids`在 JSON 中包含该数组`post`，则 Ember-Data 将对尚未加载的评论发出后续请求。

# r - 在 R 中，如果您没有定义函数，function() 是什么意思？

> ID：15147956
> 
> 赞同：0
> 
> 时间：2013-02-28T23:51:38.400
> 
> 标签：r

我第一次使用 R 来学习如何编写分类算法。我主要从 O'reilly 的**Machine Learning for Hackers**中学习。

R、R 文档、电子书和我的关于编写函数的书中有大量信息。但是，书中有一些代码片段使用函数这个词的方式似乎不符合我对函数使用的理解。例如：

```
all.spam <- sapply(spam.docs, function(p) get.msg(paste(spam.path,p,sep=""))) 
```

其中 get.msg 是用户定义的函数， sapply 来自 base `R`， p 未在其代码中的任何位置定义。书中没有任何解释，我也尝试搜索和询问公司中的其他 R 用户，但无济于事。

有什么见解吗？提前致谢。顺便说一句，在 RStudio 中，以这种方式使用时，函数一词是亮蓝色的。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-01T00:01:01.110

在 R 中，您使用相同的语法定义匿名函数和命名函数，因此您的示例：

```
all.spam <- sapply(spam.docs, function(p) get.msg(paste(spam.path,p,sep=""))) 
```

相当于：

```
my_spam_func <- function(p) {
  get.msg(paste(spam.path, p, sep=""))
}

all.spam2 <- sapply(spam.docs, my_spam_func) 
```

# image - 星级和微格式

> ID：15147958
> 
> 赞同：1
> 
> 时间：2013-02-28T23:52:09.400
> 
> 标签：image, algorithm, rating-system, microformats

我的网站上有星级评分，我正在尝试使用微格式。我阅读了谷歌的文档，他们举了一个例子：

```
<span class="review hreview-aggregate">
  Note globale : <span class="rating">4,4</span> basée sur <span class="count">89
  </span> avis 
```

对不起法语单词。现在，如果我在网站上显示的不是数字而是星星，我该怎么办？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-20T19:52:37.687

如上所述：

> “类型”对于 hreview-aggregate 无关紧要，只要它们是整数

规范说：

> 定点整数 [1.0-5.0]，可选交替最差（默认值：1.0）和/或最佳值（默认值：5.0），还有定点整数和显式平均值。
> 
> 可选地，可以指定不同的积分“最差”值和/或“最佳”值来指示不同的范围（例如，从0-10的6）。

**参考**

*   [hReview-aggregate 0.2 · Microformats Wiki](http://microformats.org/wiki/hreview-aggregate)

*   [hReview - 您的评论页面的便捷实施指南](https://builtvisible.com/using-hreview-microformat-on-your-review-page/)

*   [使用结构化数据标记您的网站 - 必应网站管理员工具](https://www.bing.com/webmaster/help/marking-up-your-site-with-structured-data-3a93e731)

*   [什么是微格式？](https://yandex.com/support/webmaster/microformats/what-is-microformat.xml)

# ruby-on-rails - 部署到 Heroku 时出现应用程序错误

> ID：15147961
> 
> 赞同：1
> 
> 时间：2013-02-28T23:52:16.637
> 
> 标签：ruby-on-rails, ruby-on-rails-3, deployment, heroku

所以我花了大约一个星期的时间在一个新的应用程序上，并且刚刚受到打击，我在部署到 Heroku 时似乎遇到了应用程序错误。我已向 Heroku 技术支持发送了一条消息，但它们似乎已被积压。

日志中有明显的错误，但是我不确定如何解决它们，因为我对 Rails 很陌生。

### 更新 1：rorra 的新 gemfile 内容帮助修复了最初的错误！（我的 gemfile 格式不正确）

### Update2：现在收到以下消息：我们很抱歉，但出了点问题。

```
New Heroku logs:

[StartupBlog]$heroku logs
2013-03-01T00:41:47+00:00 heroku[web.1]: State changed from starting to up
2013-03-01T00:41:48+00:00 app[web.1]: Started GET "/" for 174.95.207.136 at 2013-03-01 00:41:48 +0000
2013-03-01T00:41:48+00:00 app[web.1]: Processing by PagesController#home as HTML
2013-03-01T00:41:49+00:00 app[web.1]:   Rendered pages/home.html.erb within layouts/application (336.9ms)
2013-03-01T00:41:49+00:00 app[web.1]:   Rendered partials/_header.html.erb (302.2ms)
2013-03-01T00:41:49+00:00 app[web.1]: Completed 500 Internal Server Error in 671ms
2013-03-01T00:41:49+00:00 app[web.1]: 
2013-03-01T00:41:49+00:00 app[web.1]: ActionView::Template::Error (logo.png isn't precompiled):
2013-03-01T00:41:49+00:00 app[web.1]:     20: 
2013-03-01T00:41:49+00:00 app[web.1]:     21: <div class="navbar navbar-inverse navbar-static-top">
2013-03-01T00:41:49+00:00 app[web.1]:     22:   <div class="navbar-inner">
2013-03-01T00:41:49+00:00 app[web.1]:     23:     <a class="brand"><%=link_to logo, root_path %></a>
2013-03-01T00:41:49+00:00 app[web.1]:     24:     <ul class="nav pull-right">
2013-03-01T00:41:49+00:00 app[web.1]:     25:       <li class="home"><%= link_to "Home", root_path %></li>
2013-03-01T00:41:49+00:00 app[web.1]:     26:       <li><%= link_to "About", about_path %></li>
2013-03-01T00:41:49+00:00 app[web.1]:   app/helpers/application_helper.rb:14:in `logo'
2013-03-01T00:41:49+00:00 app[web.1]:   app/views/partials/_header.html.erb:23:in `_app_views_partials__header_html_erb___985491214305097811_33520600'
2013-03-01T00:41:49+00:00 app[web.1]:   app/views/pages/home.html.erb:1:in `_app_views_pages_home_html_erb__2767656240117324842_33999760'
2013-03-01T00:41:49+00:00 app[web.1]: 
2013-03-01T00:41:49+00:00 app[web.1]: 
2013-03-01T00:41:49+00:00 heroku[router]: at=info method=GET path=/ host=startupblog.herokuapp.com fwd="174.95.207.136" dyno=web.1 queue=0 wait=0ms connect=6ms service=1730ms status=500 bytes=643
2013-03-01T00:41:52+00:00 app[web.1]: Started GET "/" for 174.95.207.136 at 2013-03-01 00:41:52 +0000
2013-03-01T00:41:52+00:00 app[web.1]: Processing by PagesController#home as HTML
2013-03-01T00:41:52+00:00 app[web.1]:   Rendered partials/_header.html.erb (1.0ms)
2013-03-01T00:41:52+00:00 app[web.1]:   Rendered pages/home.html.erb within layouts/application (7.0ms)
2013-03-01T00:41:52+00:00 app[web.1]: Completed 500 Internal Server Error in 9ms
2013-03-01T00:41:52+00:00 app[web.1]: 
2013-03-01T00:41:52+00:00 app[web.1]: ActionView::Template::Error (logo.png isn't precompiled):
2013-03-01T00:41:52+00:00 app[web.1]:     20: 
2013-03-01T00:41:52+00:00 app[web.1]:     22:   <div class="navbar-inner">
2013-03-01T00:41:52+00:00 app[web.1]:     23:     <a class="brand"><%=link_to logo, root_path %></a>
2013-03-01T00:41:52+00:00 app[web.1]:   app/helpers/application_helper.rb:14:in `logo'
2013-03-01T00:41:52+00:00 app[web.1]:   app/views/partials/_header.html.erb:23:in `_app_views_partials__header_html_erb___985491214305097811_33520600'
2013-03-01T00:41:52+00:00 app[web.1]:   app/views/pages/home.html.erb:1:in `_app_views_pages_home_html_erb__2767656240117324842_33999760'
2013-03-01T00:41:52+00:00 app[web.1]:     21: <div class="navbar navbar-inverse navbar-static-top">
2013-03-01T00:41:52+00:00 app[web.1]:     26:       <li><%= link_to "About", about_path %></li>
2013-03-01T00:41:52+00:00 app[web.1]:     24:     <ul class="nav pull-right">
2013-03-01T00:41:52+00:00 app[web.1]: 
2013-03-01T00:41:52+00:00 app[web.1]: 
2013-03-01T00:41:52+00:00 app[web.1]:     25:       <li class="home"><%= link_to "Home", root_path %></li>
2013-03-01T00:41:52+00:00 heroku[router]: at=info method=GET path=/ host=startupblog.herokuapp.com fwd="174.95.207.136" dyno=web.1 queue=0 wait=6ms connect=27ms service=119ms status=500 bytes=643
2013-03-01T00:41:55+00:00 app[web.1]: Started GET "/" for 174.95.207.136 at 2013-03-01 00:41:55 +0000
2013-03-01T00:41:55+00:00 app[web.1]: Processing by PagesController#home as HTML
2013-03-01T00:41:55+00:00 app[web.1]:   Rendered partials/_header.html.erb (0.8ms)
2013-03-01T00:41:55+00:00 app[web.1]:   Rendered pages/home.html.erb within layouts/application (1.1ms)
2013-03-01T00:41:55+00:00 app[web.1]: Completed 500 Internal Server Error in 5ms
2013-03-01T00:41:55+00:00 app[web.1]: ActionView::Template::Error (logo.png isn't precompiled):
2013-03-01T00:41:55+00:00 app[web.1]:     20: 
2013-03-01T00:41:55+00:00 app[web.1]:     22:   <div class="navbar-inner">
2013-03-01T00:41:55+00:00 app[web.1]: 
2013-03-01T00:41:55+00:00 app[web.1]:     21: <div class="navbar navbar-inverse navbar-static-top">
2013-03-01T00:41:55+00:00 app[web.1]:     23:     <a class="brand"><%=link_to logo, root_path %></a>
2013-03-01T00:41:55+00:00 app[web.1]:     25:       <li class="home"><%= link_to "Home", root_path %></li>
2013-03-01T00:41:55+00:00 app[web.1]:     24:     <ul class="nav pull-right">
2013-03-01T00:41:55+00:00 app[web.1]:     26:       <li><%= link_to "About", about_path %></li>
2013-03-01T00:41:55+00:00 app[web.1]:   app/helpers/application_helper.rb:14:in `logo'
2013-03-01T00:41:55+00:00 app[web.1]:   app/views/partials/_header.html.erb:23:in `_app_views_partials__header_html_erb___985491214305097811_33520600'
2013-03-01T00:41:55+00:00 app[web.1]:   app/views/pages/home.html.erb:1:in `_app_views_pages_home_html_erb__2767656240117324842_33999760'
2013-03-01T00:41:55+00:00 app[web.1]: 
2013-03-01T00:41:55+00:00 app[web.1]: 
2013-03-01T00:41:55+00:00 heroku[router]: at=info method=GET path=/ host=startupblog.herokuapp.com fwd="174.95.207.136" dyno=web.1 queue=0 wait=0ms connect=5ms service=25ms status=500 bytes=643
2013-03-01T00:41:59+00:00 app[web.1]: Started GET "/" for 174.95.207.136 at 2013-03-01 00:41:59 +0000
2013-03-01T00:41:59+00:00 app[web.1]:   Rendered partials/_header.html.erb (0.7ms)
2013-03-01T00:41:59+00:00 app[web.1]: Processing by PagesController#home as HTML
2013-03-01T00:41:59+00:00 app[web.1]:   Rendered pages/home.html.erb within layouts/application (0.9ms)
2013-03-01T00:41:59+00:00 app[web.1]: Completed 500 Internal Server Error in 1ms
2013-03-01T00:41:59+00:00 heroku[router]: at=info method=GET path=/ host=startupblog.herokuapp.com fwd="174.95.207.136" dyno=web.1 queue=0 wait=0ms connect=2ms service=20ms status=500 bytes=643
2013-03-01T00:41:59+00:00 app[web.1]: 
2013-03-01T00:41:59+00:00 app[web.1]: ActionView::Template::Error (logo.png isn't precompiled):
2013-03-01T00:41:59+00:00 app[web.1]:     20: 
2013-03-01T00:41:59+00:00 app[web.1]:     22:   <div class="navbar-inner">
2013-03-01T00:41:59+00:00 app[web.1]:     23:     <a class="brand"><%=link_to logo, root_path %></a>
2013-03-01T00:41:59+00:00 app[web.1]:     25:       <li class="home"><%= link_to "Home", root_path %></li>
2013-03-01T00:41:59+00:00 app[web.1]:     26:       <li><%= link_to "About", about_path %></li>
2013-03-01T00:41:59+00:00 app[web.1]:     21: <div class="navbar navbar-inverse navbar-static-top">
2013-03-01T00:41:59+00:00 app[web.1]:   app/views/partials/_header.html.erb:23:in `_app_views_partials__header_html_erb___985491214305097811_33520600'
2013-03-01T00:41:59+00:00 app[web.1]:   app/views/pages/home.html.erb:1:in `_app_views_pages_home_html_erb__2767656240117324842_33999760'
2013-03-01T00:41:59+00:00 app[web.1]: 
2013-03-01T00:41:59+00:00 app[web.1]: 
2013-03-01T00:41:59+00:00 app[web.1]:   app/helpers/application_helper.rb:14:in `logo'
2013-03-01T00:41:59+00:00 app[web.1]:     24:     <ul class="nav pull-right">
2013-03-01T00:42:22+00:00 app[web.1]: Started GET "/" for 174.95.207.136 at 2013-03-01 00:42:22 +0000
2013-03-01T00:42:22+00:00 app[web.1]: Processing by PagesController#home as HTML
2013-03-01T00:42:22+00:00 app[web.1]:   Rendered partials/_header.html.erb (0.9ms)
2013-03-01T00:42:22+00:00 app[web.1]:   Rendered pages/home.html.erb within layouts/application (1.3ms)
2013-03-01T00:42:22+00:00 app[web.1]: Completed 500 Internal Server Error in 3ms
2013-03-01T00:42:22+00:00 app[web.1]: 
2013-03-01T00:42:22+00:00 app[web.1]:     25:       <li class="home"><%= link_to "Home", root_path %></li>
2013-03-01T00:42:22+00:00 app[web.1]:   app/views/partials/_header.html.erb:23:in `_app_views_partials__header_html_erb___985491214305097811_33520600'
2013-03-01T00:42:22+00:00 app[web.1]:     26:       <li><%= link_to "About", about_path %></li>
2013-03-01T00:42:22+00:00 app[web.1]: 
2013-03-01T00:42:22+00:00 app[web.1]:   app/views/pages/home.html.erb:1:in `_app_views_pages_home_html_erb__2767656240117324842_33999760'
2013-03-01T00:42:22+00:00 app[web.1]:   app/helpers/application_helper.rb:14:in `logo'
2013-03-01T00:42:22+00:00 app[web.1]: 
2013-03-01T00:42:22+00:00 app[web.1]: ActionView::Template::Error (logo.png isn't precompiled):
2013-03-01T00:42:22+00:00 app[web.1]:     23:     <a class="brand"><%=link_to logo, root_path %></a>
2013-03-01T00:42:22+00:00 app[web.1]:     20: 
2013-03-01T00:42:22+00:00 app[web.1]:     21: <div class="navbar navbar-inverse navbar-static-top">
2013-03-01T00:42:22+00:00 app[web.1]:     22:   <div class="navbar-inner">
2013-03-01T00:42:22+00:00 app[web.1]:     24:     <ul class="nav pull-right">
2013-03-01T00:42:22+00:00 heroku[router]: at=info method=GET path=/ host=startupblog.herokuapp.com fwd="174.95.207.136" dyno=web.1 queue=0 wait=5ms connect=15ms service=25ms status=500 bytes=643

source 'https://rubygems.org'

gem 'rails', '3.2.11'

group :development do
  gem 'sqlite3', '1.3.5'
  gem 'devise'
end

# Gems used only for assets and not required
# in production environments by default.
group :assets do
  gem 'sass-rails',   '3.2.5'
  gem 'bootstrap-sass', '~> 2.3.0.1'
  gem 'coffee-rails', '3.2.2'
  gem 'omniauth'
gem 'omniauth-twitter'
  gem 'uglifier', '1.2.3'
 gem 'mongrel',  '1.2.0.pre2'
 gem 'devise'

end

gem 'jquery-rails', '2.0.2'

group :production do
  gem 'pg', '0.12.2'

end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T00:04:23.087

您的问题已明确列出：

```
/app/config/initializers/devise.rb:3:in `<top (required)>': uninitialized constant Devise (NameError) 
```

如果您可以公开您的应用程序，我将能够立即检查它，但很可能您没有提交您的 Gemfile 或 Gemfile.lock，请确保您的 Gemfile 中列出了您的设计，例如

```
gem 'devise' 
```

然后运行

```
bundle 
```

并将 Gemfile 和 Gemfile.lock 提交到您的源代码中并将其推送到 heroku

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T00:04:38.600

出现的错误是：

```
/app/config/initializers/devise.rb:3:in `<top (required)>': uninitialized constant Devise (NameError) 
```

你的 Gemfile 中有设计吗？

相关：[为什么在运行 webrick 服务器时会出现未初始化的常量设计名称错误？](https://stackoverflow.com/questions/6551946/why-do-i-get-uninitialized-constant-devise-name-error-when-running-webrick-serve)

# java - 有没有一种方法可以在 java 中读取 xml 文件而无需定义要读入的类

> ID：15147962
> 
> 赞同：1
> 
> 时间：2013-02-28T23:52:20.387
> 
> 标签：java, xml

我正在尝试使用 JAXB 库来读取 xml 文件，我发现我需要定义 Class 对象以及注释以指示 xml 元素结构。我想知道是否有一种方法可以读取 xml 文件而无需定义这样的类。这将允许用户添加新标签而无需重新定义我的类。

我对 jaxb 的使用并不特别，任何其他 java 库也可以。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-28T23:57:31.637

当然，如果您只想使用原始 XML 而不将其绑定到 POJO，您可以使用`javax.xml.parsers.DocumentBuilderFactory`/`javax.xml.parsers.DocumentBuilder`将任意 XML 直接读入[org.w3c.dom.Document](http://docs.oracle.com/javase/6/docs/api/org/w3c/dom/Document.html)并将其作为文档而不是映射数据使用。

# ruby - Ruby：如何挂钩类方法

> ID：15147965
> 
> 赞同：4
> 
> 时间：2013-02-28T23:52:36.170
> 
> 标签：ruby

来自：[http ://cheind.blogspot.com/2008/12/method-hooks-in-ruby.html](http://cheind.blogspot.com/2008/12/method-hooks-in-ruby.html)

我有

```
# Contains methods to hook method calls
module FollowingHook

  module ClassMethods

    private

    # Hook the provided instance methods so that the block 
    # is executed directly after the specified methods have 
    # been invoked.
    #
    def following(*syms, &block)
      syms.each do |sym| # For each symbol
        str_id = "__#{sym}__hooked__"
        unless private_instance_methods.include?(str_id)
          alias_method str_id, sym        # Backup original 
                                          # method
          private str_id                  # Make backup private
          define_method sym do |*args|    # Replace method
            ret = __send__ str_id, *args  # Invoke backup
            block.call(self,              # Invoke hook
              :method => sym, 
              :args => args,
              :return => ret
            )
            ret # Forward return value of method
          end
        end
      end
    end
  end

  # On inclusion, we extend the receiver by 
  # the defined class-methods. This is an ruby 
  # idiom for defining class methods within a module.
  def FollowingHook.included(base)
    base.extend(ClassMethods)
  end
end 
```

然后我有一个像这样的课程：

```
class User
  def self.get
   #class method
  end
  def name
   #instance method
  end
end 
```

在另一个位置/文件中，我重新打开 User 类并连接到它

```
class User
  include FollowingHooks # include the hook module
  following :name do |receiver, args|
   #do something. This works!!
  end
  following :get do |reciever, args|
   #do something. THIS DOESNT WORK
   # Which is to be expected looking at the FollowingHooks module definition.
  end
end 
```

挂钩任何实例方法都有效。但是，尝试挂钩类方法什么也没做，我得到了，因为 FollowHooks 模块没有实现它。我将如何为类方法实现挂钩？我完全一无所知。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T00:33:39.447

您需要包含 FollowHook 代码`Class`，然后调用 following 以便它适用于类方法。

```
Class.send(:include, FollowingHook)
class User
  class << self
    following :get do |reciever, args|
      # Your awesome code here
    end
  end
end 
```

**编辑：**

这是我遵循此建议的完整工作解决方案：

```
# Contains methods to hook method calls
module FollowingHook

  module ClassMethods

    private

    # Hook the provided instance methods so that the block 
    # is executed directly after the specified methods have 
    # been invoked.
    #
    def following(*syms, &block)
      syms.each do |sym| # For each symbol
        str_id = "__#{sym}__hooked__"
        unless private_instance_methods.include?(str_id)
          alias_method str_id, sym        # Backup original 
                                          # method
          private str_id                  # Make backup private
          define_method sym do |*args|    # Replace method
            ret = __send__ str_id, *args  # Invoke backup
            block.call(self,              # Invoke hook
              :method => sym, 
              :args => args,
              :return => ret
            )
            ret # Forward return value of method
          end
        end
      end
    end
  end

  def self.included(base)
    base.send(:extend, FollowingHook::ClassMethods)
  end
end

class User
  def self.foo
    puts "foo"
  end
  def bar
    puts "bar"
  end
end

# You can put this in the class << self block if you prefer that the
# methods only be available on the User class.
Class.send(:include, FollowingHook)

class User
  include FollowingHook
  following :bar do |receiver, args|
    puts receiver.inspect
  end
  class << self
    # If you prefer only the User class include FollowingHooks, use the
    # following instead of including them in Class.
    # include FollowingHook
    following :foo do |receiver, args|
      puts receiver.inspect
    end
  end
end

User.foo #=>
# foo
# User
User.new.bar #=>
# bar
# #<User:0x338d9d> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T00:53:26.247

嗯，这行得通。

```
 def following_c(*syms, &block)
      metaclass = (class << self; self; end)
      syms.each do |sym|
        str_id = "__#{sym}__hooked__"
        unless metaclass.send(:private_instance_methods).include?(str_id)
          metaclass.send :alias_method, str_id, sym        

          metaclass.send :private, str_id                  
          metaclass.send :define_method, sym do |*args|    
            ret = send str_id, *args 
            block.call(self,
              :method => sym, 
              :args => args,
              :return => ret
            )
            ret 
          end
        end
      end
    end 
```

# javascript - 停止茉莉花测试

> ID：15147972
> 
> 赞同：1
> 
> 时间：2013-02-28T23:53:12.987
> 
> 标签：javascript, jasmine, phantomjs, gruntjs

我正在开发一个使用 jasmine 进行测试的大型胖客户端 javascript 项目。在最近的版本中，当我尝试通过 phantom 运行 jasmine 时，它​​只是挂起。要么是非常缓慢，要么就是卡住了。

当我尝试回顾旧提交以查看它是否是一个问题时，它始终是一个问题，但是一旦我认为我遇到了一个它一直快速运行的提交，我再次运行它并且它停止了。

我正在运行 Mac OS X 10.6，同样的问题也发生在同事的 Windows XP 机器上。我正在运行 grunt v0.3.17。团队中的其他一些人使用相同版本的代码和相同版本的 Grunt 在他们的机器上运行测试没有问题。

这是一个真正的谜。想法？

# autohotkey - 创建鼠标热键

> ID：15147977
> 
> 赞同：1
> 
> 时间：2013-02-28T23:54:20.970
> 
> 标签：autohotkey

多年来，我一直以非常简单的形式使用 AHK，但多次尝试学习更高级的功能只会导致困惑和沮丧。

目前，我正在尝试创建一个脚本，当我按住波浪号键并在 Google Chrome 窗口内单击鼠标左键时，该脚本会将热键“CTRL + W”发送到 Google Chrome。每当我触发脚本时，它似乎会关闭每个选项卡，然后关闭浏览器本身。

我的脚本如下 - 我做错了什么？

```
#IfWinActive ahk_class Chrome_WidgetWin_1     ;Checks that the active window is Google Chrome.
` & LButton::                                 ;Tilde + Left Mouse Button
Send, ^+w                                     ;Sends CTRL + W to the window.
return                                        ;Ends the script. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T06:11:15.523

您的脚本看起来几乎正确。尝试这个。定义完所有键后，必须“关闭” `#ifwinactive`...

```
#IfWinActive, ahk_class Chrome_WidgetWin_1
    ` & LButton::Send, ^+w
#IfWinActive 
```

将热键拆分为多行并没有错，但在这种情况下，它可以在一行中完成。当你遇到这样的问题时。尝试隔离问题。首先只尝试裸露`' & LButton::Send X`，看看这是否有效，并注意您现在松开了```标志。然后用 ^+w 试一试，然后用#IfWinActive 试一试。

当您想“恢复”波浪号键时，可以添加以下行：

```
~`::Return 
```

~ 将在执行 NOP（返回）之前将关键数据传递给操作系统。

# twitter-bootstrap - 有人知道 twitter bootstrap 兼容的组合框/自动建议控件吗？

> ID：15147980
> 
> 赞同：4
> 
> 时间：2013-02-28T23:54:49.420
> 
> 标签：twitter-bootstrap, angularjs, jquery-select2

我需要一个与引导兼容的下拉/自​​动完成控件，我可以将其附加到文本字段并在我将光标放在文本框内时打开预填充的选项。在底部应该有一个通过 t.ex 添加新项目的选项。单击时打开一个模式对话框。用户还应该能够像使用组合框一样输入自己的文本。这是我看到许多网站使用的功能，它运行得非常好。

更具体地说，我的用例是填写发票并允许用户通过单击底部的“添加新”链接来添加新产品。然后将打开一个模式弹出窗口，允许用户添加详细信息。当模式关闭并保存产品以备后用时，发票行将设置描述、价格和增值税。此外，如果用户选择其中一个预填充行，则将为他设置产品。如果它是一次性产品，用户只需输入描述并手动添加价格和增值税。

我见过的最接近的是[select2](http://ivaynberg.github.com/select2/)但它似乎并没有完全符合我的要求。select2 中的多种功能和单一功能之间的一种组合将是完美的。我也使用 angularjs 作为客户端库

![组合/下拉](../Images/05733cc965e19ab4fa0b58c6d126cacf.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T01:36:03.647

Angular-UI 有一个基于 Select2 的组合框：[Angular-UI](http://angular-ui.github.com/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T01:13:04.950

我发现 Chosen ( [http://harvesthq.github.com/chosen/](http://harvesthq.github.com/chosen/) ) 非常适合这些情况。我一直在一个没有重大问题的新项目中使用它和引导程序。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2014-05-14T15:18:13.007

![在此处输入图像描述](../Images/2d71942fa9c47fa7cc1da9b676873d0b.png)

当然，菜单项可以动态填充。

```
<!DOCTYPE html>
<head>
<title>Combobox Test</title>
<link rel="stylesheet" href="http://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.1.1/css/bootstrap.min.css">
<script language="javascript" type="text/javascript" src="http://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
<script language="javascript" type="text/javascript" src="http://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.1.1/js/bootstrap.min.js"></script>

<style>
body{
    padding:20px;
}
.dropdown-menu>li{
    cursor:pointer;
}
.dropdown-menu {
    padding-left:2px;
    right: auto;
    top:23px
}
.combobox-item{
    color:#aaa;
}
.combobox-item:hover{
    color:#000;
}
</style>

<script language="javascript" type="text/javascript">
$(document).ready(function() {
    $(".combobox-item").unbind("click").click( function(e){
        var input = $(e.target).parents('li').children('input.combobox');
        if (e.target.className.indexOf("combobox-empty") == -1)
            $(input).val(e.target.innerHTML.trim()).attr("placeholder", "enter something").focus();
        else
            $(input).val("").attr("placeholder", "what other?").focus();
    });
});

</script>

</head>
<body>

<ul class="nav">
    <li class="dropdown">
        <input type="text" class="combobox" placeholder="enter something" class="dropdown-toggle" data-toggle="dropdown">
        <ul class="dropdown-menu" role="menu" id="dropdown-menu">
            <li class="combobox-item combobox-empty">Other</li>
            <li class="divider"></li>
            <li class="combobox-item">Foo</li>
            <li class="combobox-item">Bar</li>
        </ul>
    </li>
</ul>

</body>
</html> 
```

# python - 如何使用 dbfpy 获取字段类型？

> ID：15147983
> 
> 赞同：0
> 
> 时间：2013-02-28T23:55:07.840
> 
> 标签：python, types, dbf

我有一些要添加新字段的 dbf 文件。为此，我使用[dbfpy](http://dbfpy.sourceforge.net/)打开原始 dbf，复制所有字段（或我想要保留的字段）和记录，然后使用这些字段以及我想要的新字段创建一个新文件。一切都很好，除了一个小细节：我无法保留原始字段的类型，因为我不知道如何获取它们。我正在做的是将新文件中的所有字段创建为“C”（字符），到目前为止，这适用于我现在需要的内容，但最终可能会成为问题。

真正的问题是没有可用的文档。我搜索了包文件以查找那里的示例，但找不到这个问题的答案（可能是因为我仍然使用 python 的“绿色”无法找到......我肯定不是专家）。

代码示例：

```
from dbfpy import dbf
import sys

org_db_file = str(sys.argv[1])
org_db = dbf.Dbf(org_db_file, new = False)

new_db_file = str(sys.argv[2])
new_db = dbf.Dbf(new_db_file, new = True)

#Obtain original field names:
fldnames = []
fldsize = {}
for names in org_db.fieldNames:
  fldnames.append(names)
  fldsize[name] = 0

#Cycle thru table entries:
for rec in org_db:

  #Cycle thru columns to obtain fields' name and value:
  for name in fldnames:
    value = str(rec[name])
    if len(value) > fldsize[name]:
      fldsize[name] = len(value)

#Copy original fields to new table:
for names in fldnames:
  new_db.addField((names, "C", fldsize[name]))

#Add new fields:
new_fieldname = "some_name"
new_db.addField((new_fieldname, "C", 2))

#Copy original entries and store new values:
for rec in org_db:

  #Create new record instance for new table:
  new_rec = new_db.newRecord()

  #Populate fields:
  for field in fldnames:
    new_rec[field] = rec[field]

  #Store value of new field for record i:
  new_rec[new_fieldname] = "some_value"
  new_rec.store()    

new_db.close() 
```

在此先感谢您的时间。干杯。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T01:36:34.090

除了几年前我第一次去寻找它（和其他几个）时，我没有任何使用 dbfpy 的经验，它不能满足我的需求。 [所以我自己写了。](http://python.org/pypi/dbf)

以下是使用它完成任务的方法：

```
import dbf
import sys

org_db_file = sys.argv[1]
org_db = dbf.Table(org_db_file)

new_db_file = sys.argv[2]
# postpone until we have the field names...
# new_db = dbf.Dbf(new_db_file, new = True)

# Obtain original field list:
fields = org_db.field_names
for field in fields[:]:  # cycle through a separate list
    if field == "something we don't like":
        fields.remove(field)

# now get definitions for fields we keep
field_defs = ord_db.structure(fields)

# Add new fields:
field_defs.append("some_name C(2)")

# now create new table
new_db = ord_db.new(new_db_file, field_specs=field_defs)

# open both tables
with dbf.Tables(ord_db, new_db):

    # Copy original entries and store new values:
    for rec in org_db:

        # Create new record instance for new table:
        new_db.append()

        # Populate fields:
        with new_db.last_record as new_rec:
            for field in new_db.field_names:
                new_rec[field] = rec[field]

                # Store value of new field for record i:
                new_rec[new_fieldname] = "some_value" 
```

# php - php：将会话cookie与登录用户相关联

> ID：15147985
> 
> 赞同：0
> 
> 时间：2013-02-28T23:55:32.863
> 
> 标签：php, session, session-variables

我有一个会话数组来存储一些数据

```
 if(isset($_SESSION['userID'])){
       if (!isset($_SESSION['drinks'])) {
        $_SESSION['drinks'] = array();
        }} 
```

这仅适用于登录用户，但显然与机器相关联，而不是用户。我已经对 2 个不同的用户进行了测试，并且该数组为两个用户保存了相同的值，而不是为第二个用户为空。如何将会话数组关联到每个登录用户？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T23:57:17.480

您将数据与该特定用户 ID 相关联

```
if(isset($_SESSION['userID'])){
  if (!isset($_SESSION['userID']['drinks'])) {
    $_SESSION['userID']['drinks'] = array();
  }
  var_dump($_SESSION['userID']['drinks']);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T23:58:03.393

您可以在登录前或注销后清除会话：

`session_destroy();`重置整个会话，或

`unset( $_SESSION['drinks'] );`对于那个特定的变量

# json - 我无法让我的 jqGrid 填充

> ID：15147992
> 
> 赞同：1
> 
> 时间：2013-02-28T23:56:02.913
> 
> 标签：json, asp.net-mvc-4, jqgrid, visual-studio-2012

**根据下面马克的回答用工作代码编辑。**

我真的开始讨厌 MVC。我整天都在努力让一个简单的网格工作，但我更幸运的是我的头在我的桌子上敲了一个洞。

我正在尝试实现一个在网格中显示结果的搜索页面。用户可以使用 3 个下拉列表来选择搜索条件。他们必须至少选择一个。搜索后，用户将能够选择要导出的记录。所以我需要在生成的网格中包含复选框。这是未来的头痛。

使用[JqGrid 和搜索表单 - ASP.NET MVC](https://stackoverflow.com/questions/1127541/jqgrid-and-search-form-asp-net-mvc/8460010#8460010)作为参考，我已经能够让网格出现在页面上（一项重大成就）。但是我无法获取要填充的数据。

顺便说一句，jqGrid 4.4.4 - jQuery 网格

这是我的看法：

```
@model Models.ExportDatex

<script type="text/javascript">

  $(document).ready(function () {
    $('#btnSearch').click(function (e) {

        var selectedSchool = $('#ddlSchool').children('option').filter(':selected').text();
        var selectedStudent = $('#ddlStudent').children('option').filter(':selected').text();
        var selectedYear = $('#ddlYear').children('option').filter(':selected').text();
        var selectedOption = $('#exportOption_1').is(':checked');

        if (selectedSchool == '' && selectedStudent == '' && selectedYear == '') {
            alert('Please specify your export criteria.');
            return false;
        }

        selectedSchool = (selectedSchool == '') ? ' ' : selectedSchool;
        selectedStudent = (selectedStudent == '') ? ' ' : selectedStudent;
        selectedYear = (selectedYear == '') ? ' ' : selectedYear;

        var extraQueryParameters = {
            school: selectedSchool,
            student: selectedStudent,
            year: selectedYear,
            option: selectedOption
        };

        $('#searchResults').jqGrid({
            datatype: 'json',
            viewrecords: true,
            url: '@Url.Action("GridData")?' + $.param(extraQueryParameters),
            pager: '#searchResultPager',
            colNames: ['SchoolID', 'Student Name', 'Student ID', 'Apprenticeship', 'Result'],
            colModel: [
                { name: 'SchoolID' },
                { name: 'Student Name' },
                { name: 'StudentID' },
                { name: 'Apprenticeship' },
                { name: 'Result' }]
        }).trigger('reloadGrid', [{ page: 1 }]);
    });
  });

</script>

@using (Html.BeginForm("Index", "Datex", FormMethod.Post))
{
  <h2>Export to Datex</h2>
  <div class="exportOption">
    <span>
        @Html.RadioButtonFor(model => model.ExportOption, "true", new { id = "exportOption_1" })
        <label for="exportOption_1">VET Results</label>
    </span>
    <span>
        @Html.RadioButtonFor(model => model.ExportOption, "false", new { id = "exportOption_0" })
        <label for="exportOption_0">VET Qualifications</label>
    </span>
</div>

<div class="exportSelectionCriteria">
    <p>Please specify the criteria you want to export data for:</p>

    <table>
        <tr>
            <td>School:</td>
            <td>@Html.DropDownListFor(model => model.SchoolID, Model.Schools, new { id = "ddlSchool" })</td>
        </tr>
        <tr>
            <td>Student: </td>
            <td>@Html.DropDownListFor(model => model.StudentID, Model.Students, new { id = "ddlStudent" })</td>
        </tr>
        <tr>
            <td>Year Completed:
            </td>
            <td>
                @Html.DropDownListFor(model => model.YearCompleted, Model.Years, new { id = "ddlYear" })
            </td>
        </tr>
    </table>
    <table id="searchResults"></table>
    <div id="searchResultPager"></div>
  </div>
  <div class="exportSearch">
    <input type="button" value="Search" id="btnSearch" />
    <input type="submit" value="Export" id="btnExport" />
  </div>
} 
```

这是我的控制器。由于我们还没有数据库，我只是在使用来自不同数据库的现有表来提供记录 ID 的同时对一些结果进行硬编码。

```
[HttpGet]
public JsonResult GridData(string sidx, string sord, int? page, int? rows, string school, string student, string year, string option)
{
  using (SMIDbContainer db = new SMIDbContainer())
  {
      var ds = (from sch in db.SCHOOLs
                where sch.Active.HasValue
                && !sch.Active.Value
                && sch.LEVEL_9_ORGANISATION_ID > 0
                select sch).ToList();

      var jsonData = new
      {
          total = 1,
          page = 1,
          records = ds.Count.ToString(),
          rows = (
          from tempItem in ds
          select new
          {
              cell = new string[]{
                  tempItem.LEVEL_9_ORGANISATION_ID.ToString(),
                  tempItem.SCHOOL_PRINCIPAL,
                  "40161",
                  "No",
                  "Passed (20)"
              }
          }).ToArray()
      };
      return Json(jsonData, JsonRequestBehavior.AllowGet);
  }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T00:40:38.987

您传递回网格的 JSON 是否有效？您是否传递回 jqGrid 需要的信息？为什么在 ajax 调用中而不是在 ajax 调用中设置 jqGrid `$(document).ready(function () {`？

这是我用来为 jqGrid 格式化我的 json 的部分代码示例：

```
 var jsonData = new
            {
                total = (totalRecords + rows - 1) / rows,
                page = page,
                records = totalRecords,                
                rows = (
                    from tempItem in pagedQuery
                    select new
                    {
                        cell = new string[] {
                            tempItem.value1,
                            tempItem.value2, ........

                     }
               }).ToArray()
      };
      return Json(jsonData, JsonRequestBehavior.AllowGet); 
```

如果您想让您的用户首先搜索，您可以在客户端设置 jqgrid`datatype: local`并省略`url`. 然后，在您的用户执行您希望他们执行的任何操作后，您可以让 jqGrid 出去并通过以下方式获取数据：

```
 $('#gridName').jqGrid('setGridParam', { datatype: 'json', url: '/Controller/getGridDataAction' }).trigger('reloadGrid', [{ page: 1}]); 
```

如果您想将搜索数据或其他值传递给向 jqGrid 提供数据的控制器/操作，您可以通过`postData:`jqGrid 中的选项传递它。要在外出之前进行设置，您可以通过 setGridParam 选项进行设置，如上图所示`postData: { keyName: pairData}`。

MVC 和 jqGrid 工作得很好……关于 stackoverflow 的例子很多，而 Oleg 的答案是关于你正在尝试做什么的大量资源。不需要通过头部撞击在桌子上打洞！

# php - youtube 嵌入式视频 pregreplace 与开始时间

> ID：15147993
> 
> 赞同：1
> 
> 时间：2013-02-28T23:56:22.980
> 
> 标签：php, string, youtube, forum

由于以下答案，我们目前在我们的论坛上将所有 youtube 链接替换为嵌入式对象：

[如何使用正则表达式在字符串中查找所有 YouTube 视频 ID？](https://stackoverflow.com/questions/5830387/how-to-find-all-youtube-video-ids-in-a-string-using-a-regex)

问题是，我们的许多用户希望直接发布指向视频中特定时间的链接。例如：

[http://www.youtube.com/watch?v=jECIv7zlD4c&feature=player_embedded#t=1m15s](http://www.youtube.com/watch?v=jECIv7zlD4c&feature=player_embedded#t=1m15s)

注意“#t=1m15s”

根据 youtube 文档，当您将开始时间嵌入视频时需要“开始”参数，您不能使用“1m15s”字符串。'start' 是基于秒数的值。

```
<object width="425" height="344">
<param name="movie" value="http://www.youtube.com/v/jECIv7zlD4c?fs=1&start=75"</param>
<param name="allowFullScreen" value="true"></param>
<param name="allowScriptAccess" value="always"></param>
<embed src="http://www.youtube.com/v/jECIv7zlD4c?fs=1&start=75"
type="application/x-shockwave-flash" allowscriptaccess="always" width="425" height="344">
</embed>
</object> 
```

他们是用'＆start = 75'替换正则表达式中的'#1m15s'的方法吗？

如果不是，你会如何建议用 PHP 来完成，以便它会递归地在论坛帖子中构建对象（有时人们会发布多个 youtube 视频链接）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T00:19:05.930

`preg_replace`用于操作字符串。在您的情况下，您必须在更换之前制作一些东西。

也许您应该尝试改用`preg_replace_callback`，给出一个回调来进行计算（X * 60 + Y）。

```
function sumMinSec($matches)
{
    $minSecMatches = array();
    preg_match("/([0-9]*)m([0-9]*)s/", $matches[0], $minSecMatches);
    return "&start=" . ($minSecMatches[1] * 60 + $minSecMatches[2]);
} 
```

然后调用类似的东西：

```
$url = "http://www.youtube.com/v/jECIv7zlD4c?fs=1#1m23s";
echo preg_replace_callback("/#([0-9]*m[0-9]*s)/", "sumMinSec", $url); 
```

那么结果是：

```
http://www.youtube.com/v/jECIv7zlD4c?fs=1&start=83 
```

# integration-testing - 安全 Spring Web Service 的集成测试

> ID：15147995
> 
> 赞同：1
> 
> 时间：2013-02-28T23:56:33.963
> 
> 标签：integration-testing, spring-ws, ws-security

我正在尝试编写使用 - Spring WS Security 2.1.2.RELEASE 和 - WSS4j 1.6.9 保护的 Spring Web Service Endpoint 的服务器端集成测试。我正在尝试遵循 Spring 文档[http://static.springsource.org/spring-ws/sites/2.0/reference/html/server.html](http://static.springsource.org/spring-ws/sites/2.0/reference/html/server.html)。使用到目前为止的设置，我可以发送请求有效负载

```
<myns:MyRequest xmlns:myns="...">
        ...
</myns:MyRequest> 
```

使用 MockWebServiceClient 作为

```
mockWebServiceClient.sendRequest(withPayload(requestPayload)).andExpect(clientOrSenderFault()); 
```

集成测试正确映射到测试上下文中的端点，并且我收到“无法验证请求：未找到 WS-Security 标头”错误，如预期的那样。

**问题：**现在这里的问题是，如果我在带有安全标头和正文的 SOAP 信封中发送请求，我会得到一个未找到端点的异常。

```
<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:myns="...">
   <soapenv:Header>
       ...
   </soapenv:Header>
   <soapenv:Body>
      <myns:MyRequest>
        ...
      </myns:MyRequest>
   </soapenv:Body>
</soapenv:Envelope> 
```

因为它会尝试在“{ [http://schemas.xmlsoap.org/soap/envelope/](http://schemas.xmlsoap.org/soap/envelope/) }Envelope”周围找到一个端点。

有没有办法解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T04:37:00.950

Spring WS Test 2.1 的较新版本在 RequestCreaters 中添加了两种方法：RequestCreators.withSoapEnvelope(Source soapEnvelope) 和 RequestCreators.withSoapEnvelope(Resource soapEnvelope)，它们允许发送 SOAP 信封以进行集成测试。[http://forum.springsource.org/showthread.php?135298-Integration-Testing-of-secure-Spring-Web-Service](http://forum.springsource.org/showthread.php?135298-Integration-Testing-of-secure-Spring-Web-Service)

# google-analytics - 从 Google Analytics 获取“未安装跟踪”

> ID：15147996
> 
> 赞同：0
> 
> 时间：2013-02-28T23:56:43.640
> 
> 标签：google-analytics

我进行了双重和三重检查，我的代码片段在主页中（[http://www.eventridersassociation.org.uk/index.html](http://www.eventridersassociation.org.uk/index.html)）。但 GA 拒绝承认它。

该页面只是定时重定向到 Wordpress 站点（我尝试过没有超时）：

```
<!DOCTYPE html>
<html>
<head>
    <title>Redirect</title>
    <script type="text/javascript">

        var _gaq = _gaq || [];
        _gaq.push(['_setAccount', 'UA-6484009-3']);
        _gaq.push(['_trackPageview']);

        (function() {
            var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
            ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
            var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
        })();

    </script>

</head>
<body>
<a href="http://eventridersassociation.org.uk/members/index.php">Loading.</a>
<script type="text/javascript">

  setTimeout(function() {
  window.location = "http://eventridersassociation.org.uk/members/index.php"    

  }, 1000);

</script>
</body>
</html> 
```

谁能看到我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-13T07:30:04.700

我知道您在第一个 URL 上运行它，但是在您重定向到的站点上，您调用了分析脚本两次。一次正确，一次没有ID。您是否使用了名为“Cookie Control”的插件或类似的插件？它在您网站的页脚中注入了第二个 GA 脚本，但没有设置任何变量。如果我是你，我会禁用该插件。

以下是原始 /index.html 页面上跟踪脚本的调试信息：

```
_gaq.push processing "_setAccount" for args: "[UA-6484009-3]": 
_gaq.push processing "_trackPageview" for args: "[]": 
Track Pageview
Tracking beacon sent!
utmwv=5.4.2d&utms=8&utmn=350399410&utmhn=eventridersassociation.org.uk&utmcs=UTF-8&utmsr=1440x900&utmvp=1440x287&utmsc=24-bit&utmul=en-us&utmje=1&utmfl=11.7%20r700&utmdt=Event%20Riders%20Association%20%7C%20We%20Are%20One%20sport%20%E2%80%A6%20One%20Voice&utmhid=1248347118&utmr=http%3A%2F%2Fwww.eventridersassociation.org.uk%2Findex.html&utmp=%2Fmembers%2F&utmht=137…15147996%2Fgetting-tracking-not-installed-from-google-analytics%3B&utmu=q~
Account ID               : UA-6484009-3
Page Title               : Event Riders Association | We Are One sport … One Voice
Host Name                : eventridersassociation.org.uk
Page                     : /members/
Referring URL            : http://www.eventridersassociation.org.uk/index.html
Hit ID                   : 1248347118
Visitor ID               : 922109071
Session Count            : 1
Session Time - First     : Thu Jun 13 2013 02:15:23 GMT-0500 (CDT)
Session Time - Last      : Thu Jun 13 2013 02:15:23 GMT-0500 (CDT)
Session Time - Current   : Thu Jun 13 2013 02:15:23 GMT-0500 (CDT)
Campaign Time            : Thu Jun 13 2013 02:15:23 GMT-0500 (CDT)
Campaign Session         : 1
Campaign Count           : 1
Campaign Source          : stackoverflow
Language                 : en-us
Encoding                 : UTF-8
Flash Version            : 11.7 r700
Java Enabled             : true
Screen Resolution        : 1440x900
Browser Size             : 1440x287
Color Depth              : 24-bit
Ga.js Version            : 5.4.2d
Cachebuster              : 350399410 
```

这是您重定向到的页面上的调试信息：

```
_gaq.push processing "_setAccount" for args: "[UA-6484009-3]": 
_gaq.push processing "_trackPageview" for args: "[]": 
Track Pageview
Tracking beacon sent!
utmwv=5.4.2d&utms=9&utmn=1819301630&utmhn=eventridersassociation.org.uk&utmcs=UTF-8&utmsr=1440x900&utmvp=1425x279&utmsc=24-bit&utmul=en-us&utmje=1&utmfl=11.7%20r700&utmdt=Event%20Riders%20Association%20%7C%20We%20Are%20One%20sport%20%E2%80%A6%20One%20Voice&utmhid=238588836&utmr=-&utmp=%2Fmembers%2F&utmht=1371108346526&utmac=UA-6484009-3&utmcc=__utma%3D89671247.922109071.1371107723.1371107723.1371107723.1%3B%2B__utmz%3D89671247.1371107723.1.1.utmcsr%3Dstackoverflow.com%7Cutmccn%3D(referral)%7Cutmcmd%3Dreferral%7Cutmcct%3D%2Fquestions%2F15147996%2Fgetting-tracking-not-installed-from-google-analytics%3B&utmu=q~
Account ID               : UA-6484009-3
Page Title               : Event Riders Association | We Are One sport … One Voice
Host Name                : eventridersassociation.org.uk
Page                     : /members/
Referring URL            : -
Hit ID                   : 238588836
Visitor ID               : 922109071
Session Count            : 1
Session Time - First     : Thu Jun 13 2013 02:15:23 GMT-0500 (CDT)
Session Time - Last      : Thu Jun 13 2013 02:15:23 GMT-0500 (CDT)
Session Time - Current   : Thu Jun 13 2013 02:15:23 GMT-0500 (CDT)
Campaign Time            : Thu Jun 13 2013 02:15:23 GMT-0500 (CDT)
Campaign Session         : 1
Campaign Count           : 1
Campaign Source          : stackoverflow
Language                 : en-us
Encoding                 : UTF-8
Flash Version            : 11.7 r700
Java Enabled             : true
Screen Resolution        : 1440x900
Browser Size             : 1425x279
Color Depth              : 24-bit
Ga.js Version            : 5.4.2d
Cachebuster              : 1819301630 
```

# asp.net-mvc - 如何在实体框架中映射关系

> ID：15147998
> 
> 赞同：0
> 
> 时间：2013-02-28T23:56:57.357
> 
> 标签：asp.net-mvc, asp.net-mvc-3, entity-framework

我有 3 张桌子

```
=================    =================    =================
| TableA        |    | RelationAC    |    | TableC        |
=================    =================    =================
| IdA           |    | Id            |    | IdC           |
|               |    | IdA           |    |               |
| Field1A       |    | IdC           |    | Field1C       |
=================    =================    ================= 
```

这是我模型的代码：

```
public partial class TableA
{
    public TableA()
    {
       this.RelationAC = new HashSet<RelationAC>();
    }

    [Key]
    public decimal IdA { get; set; }
    public string Field1A { get; set; }
    [ForeignKey("IdA")]
    public virtual ICollection<RelationAC> RelationAC { get; set; }
}

public partial class TableC
{
    [Key]
    public decimal IdC { get; set; }
    public string Field1C { get; set; }
}

public partial class RelationAC    
{
    public RelationAC    ()
    {
        this.TableC= new HashSet<TableC>();
    }
    [Key]
    public decimal Id { get; set; }
    public decimal IdA{ get; set; }
    public decimal IdC{ get; set; }

    [ForeignKey("IdC")]
    public virtual ICollection<TableC> TableC { get; set; }
} 
```

如果进行此查询

```
var query = from d in db.TableA 
            select d;

foreach( TableA  ta in query.Tolist())
{
    foreach(RelationAC rac in ta.RelationAC.Tolist())
    {
        TableC tc = rac.TableC.First(); // It allways has count = 0 , even my db has data
    } 
} 
```

为什么 TableC tc 总是空的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T03:26:29.117

您的财产可能存在延迟加载问题。尝试急切加载集合：

```
db.TableA.Include("RelationAC.TableC") 
```