# StackOverflow 问答 12501000-12501999

# php - 如何在 MAC OS X 10.7 Lion 上安装多个 XAMPP 版本或多个 PHP 版本

> ID：12501003
> 
> 赞同：10
> 
> 时间：2012-09-19T18:49:51.627
> 
> 标签：php, xampp

我需要在需要 PHP 5.2 的遗留系统上做一些工作

我已经安装了 XAMP 1.7.3，但这个版本有 PHP 5.3。

由于这项工作我可能会在接下来的几个月里做几次，我正在考虑安装一个运行 PHP 5.2 的 XAMP 版本同时我参与了一些需要我使用 PHP 5.3 的工作，所以我只是无法卸载我当前的 XAMP 版本并安装使用 PHP 5.2 的版本

在[XAMPP 下载网站](http://www.apachefriends.org/en/xampp-macosx.html "XAMPP下载网站")上，很明显，在安装任何 XAMPP 版本时，它都会删除以前的版本。我做了一些研究，但找不到解决这个问题的方法。

我设法在 /Applications/XAMPP/xamppfiles/bin/ 下找到 phpswitch，并使用它的列表操作向我显示我只安装了 PHP 5.3.1 并处于活动状态。我试图弄清楚如何使用 phpswitch 下载/安装/激活 PHP 5.2，但没有成功。

所以我正在寻找的是一种安装多个 XAMPP 或安装 PHP 5.2 并为 XAMPP 激活它的方法（通过 phpswitch 或其他方式）

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2014-06-02T17:59:26.403

您可以安装 XAMPP 的并行版本 - 每个主要版本的 PHP 一个。只是不要同时运行两者。

将每个 XAMPP 实例安装在它自己的文件夹中。

我在一个名为的文件夹下执行此操作

`XAMPPInstalls/XAMPP182-PHP54 /XAMPP183-PHP55/`

在每个 XAMPP 文件夹中，您都会找到一个 .exe 来启动该特定 XAMPP 堆栈的控制器。我已经为它们创建了快捷方式，将它们重命名为“XAMPP182-ControlPanel”和“XAMPP183-ControlPanel”，并将它们放在我的桌面上。

当我需要在 PHP5.4 上运行本地站点时，我单击 XAMPP182-ControlPanel 并启动 Apache 和 MySQL 服务器。

当我需要将本地站点切换到 PHP5.5 时，我单击 XAMPP182-ControlPanel 并关闭 Apache 和 MySQL 服务器，然后单击 XAMPP182-ControlPanel 并启动该堆栈中的 Apache 和 MySQL 服务器。

这只需几秒钟。

此外，我使用“软链接”，以便在一个文件夹中为本地网站进行所有配置 - 然后创建一个“连接”（即，在每个 XAMPP 堆栈的 Apache 配置中复制自身的源文件夹）。

Marco Dings 在 Joomla! 中有一篇非常好的文章，名为“[实用开发 2：工作环境”！](http://magazine.joomla.org/issues/issue-mar-2014/item/1797-practical-development-2-working-environment)社区杂志，介绍如何设置您的工作环境以运行多个本地 XAMPP 安装、使用“基于名称的托管”的多个本地网站，以及如何保持一切井井有条。

我没有完全使用 Ding 的设置——我已经进行了调整以使我的本地 Web 项目更加有条理和精简——但我的设置是基于 Ding 的方法。

注意：文章在 Joomla! Community Magazine 并非专门针对 Joomla!，因此您可以将此设置用于您正在处理的任何 PHP/Apache/MySQL 项目。

现在有很多方法可以做到这一点（例如使用 Oracle 的 VM Virtual Box），但除非您需要“完全”复制远程托管环境，否则这可能有点过头了。例如，如果您正在运行“专用主机”并希望密切复制专用主机的环境并尽可能接近地进行设置，那么您将使用 VM Virtual Box Set-Up - 这允许您运行多个 VM（即不同的设置），然后将确切的设置克隆到您的实时服务器。同样，如果您的大多数项目都将使用“共享托管”环境，那么您对设置没有太多控制权。

并行安装多个 XAMPP 实例要简单得多，您可以按照 Ding 的文章进行设置。它应该满足您的要求。

我提到了 Oracle VM VirtualBox，因为您至少应该知道它是一种选择。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T19:02:19.900

您总是可以使用 VirtualBox（或类似的）来创建一个带有 5.2 的实例，然后当您完成旧工作时，只需转储 VB 实例，而不会对您当前的系统产生任何不良影响。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-19T19:12:23.667

你有几个选择。要么使用虚拟盒来运行虚拟环境：一个使用 PHP 5.2，另一个使用 PHP 5.3。或者，如果您对安装 PHP 感到满意，您可以安装所需的各种 PHP 版本，并设置一个指向您当时要使用的版本的符号链接。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-19T19:00:14.740

我对 Apache 或 PHP 一无所知，但我发现 MacPorts 有助于安装通常难以安装多个版本的软件的多个版本，例如 python 或 GCC。

```
port search php 
```

表明 MacPorts 可以提供 PHP 5.2、5.3 和 5.4。此类安装被放入 /opt，因此它们将不理会任何其他 PHP 安装。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-03-28T06:34:03.410

我们可以使用 Xampp-VM 进行多个 xampp 安装。我想为旧项目和新项目使用多个 php 版本，而无需更改或浪费我的配置时间。

所以如果你的 Xampp 已经安装好了。从这里安装新的 Xampp-VM

[https://www.apachefriends.org/download.html](https://www.apachefriends.org/download.html)

这将指导您如何设置 Xampp-Vm。

[https://www.apachefriends.org/blog/new_xampp_20170628.html](https://www.apachefriends.org/blog/new_xampp_20170628.html)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-11-09T23:25:25.930

以前的答案对我来说效果不佳，但是[Apache Friends Forum 上有一个相当优雅的解决方案](https://community.apachefriends.org/f/viewtopic.php?f=29&t=65455)，尽管我花了一些时间才能让事情正常工作。一些亮点：

*   通过安装多个版本的**XAMPP**，您可以获得各种版本的 PHP CGI 模块。也就是说，请记住，如果您运行多个安装程序，您的配置文件和数据库可能需要恢复，因此请进行相应的备份和计划。
*   通过在你的文件中添加一个类似这样的块来确保这些 CGI 被允许做他们的事情`httpd-xampp.conf`（我把我的放在最后）：

    ```
    <Directory "/Applications/XAMPP/xamppfiles/bin">
        Require all granted
        Options +ExecCGI
    </Directory> 
    ```

    请记住，根据 XAMPP 使用的 Apache 版本，[您的语法可能会有所不同](https://stackoverflow.com/questions/18392741/apache2-ah01630-client-denied-by-server-configuration#19588786)。

*   现在在您的`httpd.conf`文件中找到此部分，并确保相应`Include`部分未注释，如下所示：

    ```
    # Virtual hosts
    Include etc/extra/httpd-vhosts.conf 
    ```

*   您现在可以在`httpd-vhosts.conf`文件中为要使用的每个 PHP 版本添加条目，如下所示：

    ```
    <VirtualHost test54.yourdomain.com:80>
        ServerName test54.yourdomain.com
        ....
        ScriptAlias /xampp-bin /Applications/XAMPP/xamppfiles/bin
        <FilesMatch "\.php$">
            SetHandler application/x-httpd-php
        </FilesMatch>
        Action application/x-httpd-php /xampp-bin/php-cgi-5.4.31
        ....
    </VirtualHost>
    <VirtualHost test55.yourdomain.com:80>
        ServerName test55.yourdomain.com
        ....
        ScriptAlias /xampp-bin /Applications/XAMPP/xamppfiles/bin
        <FilesMatch "\.php$">
            SetHandler application/x-httpd-php
        </FilesMatch>
        Action application/x-httpd-php /xampp-bin/php-cgi-5.5.35
        ....
    </VirtualHost>
    .... 
    ```

    （在我使用的 XAMPP 版本中，该目录中也恰好有一个符号链接，`bin`名为 simple `php-cgi`，它指向最近安装的 CGI，我也为此添加了一个块。）

*   将相应的条目添加到您的`hosts`文件中，如下所示：

    ```
    127.0.0.1           test54.yourdomain.com
    127.0.0.1           test55.yourdomain.com 
    ```

那应该这样做。我喜欢由此产生的灵活性，以及​​我配置的各种 PHP 版本在我需要时可以轻松使用。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-09-27T08:49:32.543

我只是想补充一下，以防你运行任何操作系统（我的是 Yosemite）做同样的事情，但在 XAMPP 主文件夹内的 xamppfiles 文件夹上工作（所以使用的路径不同），你可以同时更改 configure.ini 和可能与文件相关（复杂）或（简单但脏）命名您要使用 xamppfiles 的版本和其他任何名称，然后为管理器创建 2 个单独的别名以启动（每个 xampp 版本一个）。像这样有点令人困惑，但如果有人需要，我可以逐步描述这两种方法。

# asp.net-mvc - 没有为这个对象定义无参数构造函数......有一个扭曲？

> ID：12501012
> 
> 赞同：0
> 
> 时间：2012-09-19T18:50:33.903
> 
> 标签：asp.net-mvc, entity-framework, dependency-injection, ninject, ninject.web.mvc

我正在使用 EF5 和 ninject 构建一个 MVC4 应用程序。当我从 MVC3 升级到 4 时出现问题。所以我创建了一个全新的解决方案，获取了我所有的 nuget 包，添加了所有引用，然后复制到我的代码中。

项目建设，太棒了。

我的问题是（Ninjection）sp？似乎没有正确接线。当我尝试加载页面时，我得到“没有为此对象定义无参数构造函数”作为运行时错误。但是，如果我简单地添加一个空的公共无参数构造函数，页面就会呈现，并且一切正常。

我的 App_Start 代码运行良好，NinjectWebCommon.cs（包含在问题的底部）我已经逐步完成了代码，但除了复制和粘贴之外，还遵循了在线教程。我不太了解 IoC，不知道下一步该做什么。

```
namespace search.Controllers
{
    public class HomeController : Controller
    {
        ICamaService _service = null;

        [Inject]
        public HomeController(ICamaService  service)
        {
            _service = service;
        }
        ************** ADDING THIS FIXES THE RUNTIME ERROR *********
        public HomeController(){
        ;
        }
        ***********

        //TODO: ADD ACTIONS

        public ViewResult Index()
        {
            return View();

        }
    }
} 
```

这是我的作文根：

```
[assembly:     WebActivator.PreApplicationStartMethod(typeof(search4.App_Start.NinjectWebCommon), "Start")]
[assembly: WebActivator.ApplicationShutdownMethodAttribute(typeof(search4.App_Start.NinjectWebCommon), "Stop")]

namespace search4.App_Start
{
using System;
using System.Web;

using Microsoft.Web.Infrastructure.DynamicModuleHelper;

using Ninject;
using Ninject.Web.Common;
using search.Services;
using search.Data;

public static class NinjectWebCommon 
{
    private static readonly Bootstrapper bootstrapper = new Bootstrapper();

    public static void Start() 
    {
        DynamicModuleUtility.RegisterModule(typeof(OnePerRequestHttpModule));
        DynamicModuleUtility.RegisterModule(typeof(NinjectHttpModule));
        bootstrapper.Initialize(CreateKernel);
    }

    public static void Stop()
    {
        bootstrapper.ShutDown();
    }

    private static IKernel CreateKernel()
    {
        var kernel = new StandardKernel();
        kernel.Bind<Func<IKernel>>().ToMethod(ctx => () => new Bootstrapper().Kernel);
        kernel.Bind<IHttpModule>().To<HttpApplicationInitializationHttpModule>();

        RegisterServices(kernel);
        return kernel;
    }

    private static void RegisterServices(IKernel kernel)
    {
        kernel.Bind<ICamaContext>().To<CamaContext>().InRequestScope();
        kernel.Bind<ICamaService>().To<CamaService>().InRequestScope();

    }        

}
} 
```

![异常截图][1]

[http://shareimage.ro/viewer.php?file=svs5kwamqy0pxbyntig4.gif](http://shareimage.ro/viewer.php?file=svs5kwamqy0pxbyntig4.gif)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T19:20:25.703

我不是 Ninject 用户，但根据我在 MVC 中使用其他 IOC 框架的经验，您需要将 DefaultControllerFactory 替换为注入对象而不需要默认构造函数的实现。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T19:19:29.927

看起来您的绑定没有正确注册。

我不确定到底出了什么问题，但我创建了一个适合我的 NinjectApplicationModule：

```
/// <summary>
    /// Load your modules or register your services here!
    /// </summary>
    /// <param name="kernel">The kernel.</param>
    private static void RegisterServices(IKernel kernel)
    {
        kernel.Load(new NinjectApplicationModules());
    } 

public class NinjectApplicationModules : NinjectModule
{
    /// <summary>
    /// Loads the Binding module into the kernel. Used to map Abstract Classes to Concrete classes at runtime.
    /// </summary>
    public override void Load()
    {
        // Bindings...

        Bind<ICamaContext>().To<CamaContext>().InRequestScope();
        Bind<ICamaService>().To<CamaService>().InRequestScope();

    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-07T10:25:09.507

检查你的数据模型类。

```
Public Class A ()
{
   public A() {
     }
  public string Name{get; set;}
} 
```

但是您需要删除这个默认的 A 类构造函数。

```
 Public Class A ()
{
  public string Name{get; set;}
} 
```

我已经面临**为这个对象定义的无参数少构造函数**

# c# - 显式本地化

> ID：12501020
> 
> 赞同：4
> 
> 时间：2012-09-19T18:50:46.737
> 
> 标签：c#, asp.net, localization

我在我的页面中使用显式本地化，例如：

```
<asp:Literal ID="appTitle" runat="server" Text="<%$ Resources:TranslationResource, AppTitle %>"></asp:Literal></div> 
```

如果 AppTitle 资源不存在，有什么方法可以避免“解析器错误”并显示空字符串或资源名称？

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-19T19:01:46.923

`GetGlobalResourceObject`如果键不存在，您可以使用，它执行相同的操作但返回 null，而不是引发异常。

```
<div><%= GetGlobalResourceObject("TranslationResource", "AppTitle") %></div> 
```

您可以使用 null-coalescing 运算符轻松添加回退值：

```
<div><%= GetGlobalResourceObject("TranslationResource", "AppTitle") ?? "No translation resource" %></div> 
```

* * *

如果您需要以集中方式修改本地化提供程序的行为（无需修改页面中使用的语法），您可以覆盖`resourceProviderFactoryType`. 将类型添加到 web.config*全球化*部分...

```
<globalization resourceProviderFactoryType="MyLocalizationProvider"/> 
```

并`MyLocalizationProvider`通过子类化创建`ResourceProviderFactory`。

# plone - KeyError：渲染文档视图时的“视图”

> ID：12501023
> 
> 赞同：1
> 
> 时间：2012-09-19T18:50:52.057
> 
> 标签：plone, upgrade

从 2.5 迁移到 3.3.5。我继承了一个克隆系统，我们必须迁移到 3.3.5 以保持该站点的认可。我知道关于 plone 的 zilch，主要来自 Windows 管理、sharepoint 和 .net 编程背景。

我觉得我离这个工作很近了。

当我导航到一个页面时，该页面出现了一个错误代码而不是内容（改进了显示回溯而不是页面）。现在的错误是这样的：

```
Exception traceback
Time    2012/09/19 11:24:04.160 GMT-7
User Name (User Id) Anonymous User (None)
Request URL http://localhost:8080/mission-vision/index_html/document_view

Exception Type  KeyError
Exception Value 'view'
Traceback (innermost last): 
Module ZPublisher.Publish, line 119, in publish 
Module ZPublisher.mapply, line 88, in mapply 
Module ZPublisher.Publish, line 42, in call_object 
Module Shared.DC.Scripts.Bindings, line 313, in __call__ 
Module Shared.DC.Scripts.Bindings, line 350, in _bindAndExec 
Module Products.PageTemplates.ZopePageTemplate, line 330, in _exec 
Module Products.PageTemplates.ZopePageTemplate, line 427, in pt_render 
Module Products.PageTemplates.PageTemplate, line 98, in pt_render 
Module zope.pagetemplate.pagetemplate, line 117, in pt_render 
Module zope.tal.talinterpreter, line 271, in __call__ 
Module zope.tal.talinterpreter, line 346, in interpret 
Module zope.tal.talinterpreter, line 891, in do_useMacro 
Module zope.tal.talinterpreter, line 346, in interpret 
Module zope.tal.talinterpreter, line 536, in do_optTag_tal 
Module zope.tal.talinterpreter, line 521, in do_optTag 
Module zope.tal.talinterpreter, line 516, in no_tag 
Module zope.tal.talinterpreter, line 346, in interpret 
Module zope.tal.talinterpreter, line 957, in do_defineSlot 
Module zope.tal.talinterpreter, line 346, in interpret 
Module zope.tal.talinterpreter, line 536, in do_optTag_tal 
Module zope.tal.talinterpreter, line 521, in do_optTag 
Module zope.tal.talinterpreter, line 516, in no_tag 
Module zope.tal.talinterpreter, line 346, in interpret 
Module zope.tal.talinterpreter, line 861, in do_defineMacro 
Module zope.tal.talinterpreter, line 346, in interpret 
Module zope.tal.talinterpreter, line 949, in do_defineSlot 
Module zope.tal.talinterpreter, line 346, in interpret 
Module zope.tal.talinterpreter, line 536, in do_optTag_tal 
Module zope.tal.talinterpreter, line 521, in do_optTag 
Module zope.tal.talinterpreter, line 516, in no_tag 
Module zope.tal.talinterpreter, line 346, in interpret 
Module zope.tal.talinterpreter, line 861, in do_defineMacro 
Module zope.tal.talinterpreter, line 346, in interpret 
Module zope.tal.talinterpreter, line 536, in do_optTag_tal 
Module zope.tal.talinterpreter, line 521, in do_optTag 
Module zope.tal.talinterpreter, line 516, in no_tag 
Module zope.tal.talinterpreter, line 346, in interpret 
Module zope.tal.talinterpreter, line 891, in do_useMacro 
Module zope.tal.talinterpreter, line 346, in interpret 
Module zope.tal.talinterpreter, line 534, in do_optTag_tal 
Module zope.tal.talinterpreter, line 516, in no_tag 
Module zope.tal.talinterpreter, line 346, in interpret 
Module zope.tal.talinterpreter, line 745, in do_insertStructure_tal 
Module Products.PageTemplates.Expressions, line 223, in evaluateStructure 
Module zope.tales.tales, line 696, in evaluate
URL: file:d:\websites\nipo\plone 3.3.5\buildout-cache\eggs\plone-3.3.5-py2.4.egg\Products\CMFPlone\skins\plone_deprecated\document_actions.pt
Line 27, Column 4
Expression: <StringExpr u'plone.documentactions'>
Names:
{'container': <PloneSite at /Plone>,
 'context': <ATDocument at /Plone/mission-vision/index_html>,
 'default': <object object at 0x010BD528>,
 'here': <ATDocument at /Plone/mission-vision/index_html>,
 'loop': {},
 'nothing': None,
 'options': {'args': ()},
 'repeat': <Products.PageTemplates.Expressions.SafeMapping object at 0x04A37B98>,
 'request': <HTTPRequest, URL=http://localhost:8080/mission-vision/index_html/document_view>,
 'root': <Application at >,
 'template': <ZopePageTemplate at /Plone/document_view used for /Plone/mission-vision/index_html>,
 'traverse_subpath': [],
 'user': <SpecialUser 'Anonymous User'>}
Module Products.Five.browser.providerexpression, line 17, in __call__
KeyError: 'view' 
```

看起来问题出在 document_view 模板中。这很奇怪，因为它根本没有被修改，它是直接开箱即用的：

```
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en"
      xmlns:tal="http://xml.zope.org/namespaces/tal"
      xmlns:metal="http://xml.zope.org/namespaces/metal"
      xmlns:i18n="http://xml.zope.org/namespaces/i18n"
      lang="en"
      metal:use-macro="here/main_template/macros/master"
      i18n:domain="plone">
<body>

<metal:main fill-slot="main">
    <tal:main-macro metal:define-macro="main"
           tal:define="kssClassesView context/@@kss_field_decorator_view;
                       getKssClasses nocall:kssClassesView/getKssClassesInlineEditable;
                       templateId template/getId;
                       text here/getText;">

        <div tal:replace="structure provider:plone.abovecontenttitle" />

        <h1 class="documentFirstHeading"> 
            <metal:field use-macro="python:here.widget('title', mode='view')">
            Title
            </metal:field>
        </h1>

        <div tal:replace="structure provider:plone.belowcontenttitle" />

        <p class="documentDescription">
            <metal:field use-macro="python:here.widget('description', mode='view')">
            Description
            </metal:field>
        </p>

        <div tal:replace="structure provider:plone.abovecontentbody" />

        <p tal:condition="python: not text and is_editable"
           i18n:translate="no_body_text"
           class="discreet">
            This item does not have any body text, click the edit tab to change it.
        </p>

        <metal:field use-macro="python:here.widget('text', mode='view')">
        Body text
        </metal:field>

        <div metal:use-macro="here/document_relateditems/macros/relatedItems">
            show related items if they exist
        </div>

        <div tal:replace="structure provider:plone.belowcontentbody" />

    </tal:main-macro>
</metal:main>

</body>
</html> 
```

有人知道为什么会出现这种情况吗？

# php - 自定义 php 错误消息淡入淡出

> ID：12501026
> 
> 赞同：3
> 
> 时间：2012-09-19T18:51:04.070
> 
> 标签：php, javascript, html

作为我网站的用户注册过程的一部分，我编写了以下代码。显然，一旦用户填写了他们的电子邮件并点击提交，表单数据就会通过以下方式发送：

```
<?php

if(isset($_POST['email'])){

$email_from = $_POST['email'];

function died($error) {
    echo $error;
    die();
}

if(!isset($_POST['email'])) {
    died($error);
}

$error_message = "";
$email_exp = '/^[A-Za-z0-9._%-]+@[A-Za-z0-9.-]+\.[A-Za-z]{2,4}$/';
    if(!preg_match($email_exp,$email_from)) {

  $error_message .= ' <script type="text/javascript">
  alert("The email address you entered does not appear to be valid");
  window.location = "http://www.domain.com/";
  </script> ' ;
    }

if(strlen($error_message) > 0) {
    died($error_message);
}

etc, etc, etc.... 
```

我真的很感激一些帮助是这个脚本：

```
$error_message .= ' <script type="text/javascript">
  alert("The email address you entered does not appear to be valid");
  window.location = "http://www.domain.com/";
  </script> ' ;
    } 
```

如何在 html 页面上创建一个仅淡入（点击时淡出）的错误消息，而不是在重定向到 html 页面之前在空白的白色 php 页面前发出 js 警报？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T18:58:27.860

```
<span class="fadeInMessage" style="display:none;">"The email address you entered does not appear to be valid"</span> 
```

这将开始隐形。然后，您将编写以下代码：

```
$(function(){
    $('.fadeInMessage').fadeIn();
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-19T18:55:48.983

使用jQuery的fadeIn函数怎么样？[http://api.jquery.com/fadeIn/](http://api.jquery.com/fadeIn/) 如果您不知道如何使用 jQuery，您只需将您的 html 页面链接到 jQuery 的 .js 脚本并根据需要使用这些功能。

**更新**：

回答您的评论。根据 中的讨论`http://stackoverflow.com/questions/3708850/is-there-an-onload-event-for-input-elements`，您可以执行以下操作：

```
<!DOCTYPE html>
<html>
<head>
    <title></title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <script type="text/javascript" src="jquery-1.5.1.min.js"></script>
    <script type="text/javascript">
    function test() { 
        alert('test');
    }
    </script>
</head>
<body >
    <?php 
    if($condition) { 
        print '<input type="hidden" />
    <script>
    test();
    </script>';
    }

    ?>

</body> 
```

然后，你可以做任何你想做的事情`test()`，例如，调用fadeIn。此外，您可以在 PHP if 语句中指定所需的条件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-19T20:08:45.010

我同意其他两个答案；你应该使用jQuery的`fadeIn`功能。但是，如果您不想或不能使用 jQuery，这应该让您开始使用纯 Javascript 实现：

HTML：

```
<div id="message">Hello world!</div>​ 
```

Javascript：

```
var msg = document.getElementById( 'message' );
msg.style.opacity = 0;

function fadeIn() {
    if( msg.style.opacity < 1 ) {
        msg.style.opacity = parseFloat(msg.style.opacity) + 0.01;        
        setTimeout( fadeIn, 25 );
    }
}

function fadeOut() {
    if( msg.style.opacity > 0 ) {
        msg.style.opacity = parseFloat(msg.style.opacity) - 0.01;
        setTimeout( fadeOut, 25 );
    }
}        

fadeIn();

msg.onclick = function() { fadeOut(); } 
```

​ 这是一个 jsFiddle 演示：http: [//jsfiddle.net/GgYS8/](http://jsfiddle.net/GgYS8/)

# mysql - 具有多个参数和返回类型的存储函数

> ID：12501027
> 
> 赞同：0
> 
> 时间：2012-09-19T18:51:07.787
> 
> 标签：mysql

我正在尝试实现以下存储过程，但它没有被创建：

```
 DELIMITER  //
CREATE Function 'geodistkm'   
(lat1  FLOAT ,  lon1  FLOAT,  lat2 FLOAT ,  lon2 FLOAT) 
returns FLOAT
BEGIN
 DECLARE pi, q1, q2, q3 FLOAT;
 DECLARE rads FLOAT DEFAULT 0;
 SET pi = PI();
 SET lat1 = lat1 * pi / 180;
 SET lon1 = lon1 * pi / 180;
 SET lat2 = lat2 * pi / 180;
 SET lon2 = lon2 * pi / 180;
 SET q1 = COS(lon1-lon2);
 SET q2 = COS(lat1-lat2);
 SET q3 = COS(lat1+lat2);
 SET rads = ACOS( 0.5*((1.0+q1)*q2 - (1.0-q1)*q3) ); 
 RETURN 6378.388 * rads;
END ;
//

DELIMITER ; 
```

我似乎无法弄清楚它有什么问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T18:58:28.177

进行了以下更改：

```
DELIMITER  //
CREATE FUNCTION  geodistkm  
(lat1  FLOAT ,  lon1  FLOAT,  lat2 FLOAT ,  lon2 FLOAT) 
RETURNS  FLOAT
BEGIN
 DECLARE pi, q1, q2, q3 FLOAT;
 DECLARE rads FLOAT DEFAULT 0;
 SET pi = PI();
 SET lat1 = lat1 * pi / 180;
 SET lon1 = lon1 * pi / 180;
 SET lat2 = lat2 * pi / 180;
 SET lon2 = lon2 * pi / 180;
 SET q1 = COS(lon1-lon2);
 SET q2 = COS(lat1-lat2);
 SET q3 = COS(lat1+lat2);
 SET rads = ACOS( 0.5*((1.0+q1)*q2 - (1.0-q1)*q3) ); 
 RETURN 6378.388 * rads;
END //

DELIMITER ; 
```

# python - 用python抓包

> ID：12501035
> 
> 赞同：2
> 
> 时间：2012-09-19T18:51:59.297
> 
> 标签：python, network-programming, libpcap

我正在尝试使用`dpkt`并`pcapy`侦听接口上的 HTTP 响应

```
import dpkt
import pcapy

cap = pcapy.open_live('eth0',10000,1,0)

(header,payload) = cap.next()

while header:
    packet = dpkt.ethernet.Ethernet(str(payload))
    if str(packet.data.data.data).startswith('HTTP'):
        h = dpkt.http.Response(str(packet.data.data.data))
    (header,payload) = cap.next() 
```

当我运行它时，它会很好地读取第一个数据包。但是对于第二个数据包，它最终读取了一个错误的值`content-length`。例外是：

```
cona@vm-02:~$ sudo python cache-pcapy.py
Value of N 160 value of body 160
Value of N 5965717 value of body 1193
Traceback (most recent call last):
  File "cache-pcapy.py", line 12, in <module>
    h = dpkt.http.Response(str(packet.data.data.data))
  File "/usr/local/lib/python2.7/dist-packages/dpkt/http.py", line 76, in __init__
    self.unpack(args[0])
  File "/usr/local/lib/python2.7/dist-packages/dpkt/http.py", line 159, in unpack
    Message.unpack(self, f.read())
  File "/usr/local/lib/python2.7/dist-packages/dpkt/http.py", line 90, in unpack
    self.body = parse_body(f, self.headers)
  File "/usr/local/lib/python2.7/dist-packages/dpkt/http.py", line 59, in parse_body
    raise dpkt.NeedData('short body (missing %d bytes)' % (n - len(body)))
dpkt.dpkt.NeedData: short body (missing 5964524 bytes) 
```

N 值和主体长度的打印件来自我添加此内容`http.py`的位置：`dpkt`

```
elif 'content-length' in headers:
        n = int(headers['content-length'])
        body = f.read(n)
        print 'Value of N {} value of body {}'.format(n,len(body))
        if len(body) != n:

            raise dpkt.NeedData('short body (missing %d bytes)' % (n - len(body))) 
```

似乎错误的字节被读取为`content-length`. 为什么会这样？

# sql-server - 用可变数量的空格填充一个字符串

> ID：12501038
> 
> 赞同：31
> 
> 时间：2012-09-19T18:52:06.087
> 
> 标签：sql-server, ssrs-2008

我有一个客户表，我想用它来填充 SSRS 2008 中的参数框。是值， and`cust_num`的串联将是标签。表格中的必填字段是：`cust_name``cust_addr`

```
cust_num     int            PK
cust_name    char(50)       not null
cust_addr    char(50) 
```

SQL 是：

```
select cust_num, cust_name + isnull(cust_addr, '') address
from customers 
```

这在参数列表中给了我这个：

```
FIRST OUTPUT - ACTUAL
1       cust1              addr1
2       customer2               addr2 
```

这是我所期望的，但我想要：

```
SECOND OUTPUT - DESIRED
1       cust1              addr1
2       customer2          addr2 
```

我试过的：

```
select cust_num, rtrim(cust_name) + space(60 - len(cust_name)) +
                 rtrim(cust_addr) + space(60 - len(cust_addr)) customer
from customers 
```

这给了我第一个输出。

```
select cust_num, rtrim(cust_name) + replicate(char(32), 60 - len(cust_name)) +
                 rtrim(cust_addr) + replicate(char(32), 60 - len(cust_addr)) customer 
```

这也给了我第一个输出。

我也尝试过替换`space()`，`char(32)`反之亦然

我尝试了 , , 的变体，但`substring`都无济于事。`left``right`

我也在各个地方使用`ltrim`过`rtrim`。

60 的原因是我已经检查了两个字段的最大长度，它是 50，即使字段已最大化，我也希望字段之间有一些空格。我并不真正关心截断的数据，因为城市、州和邮政编码位于不同的字段中，所以如果街道地址的末端被截断，我猜是可以的。

这不是一个展示停止器，SSRS 报告当前与第一个输出一起部署，但如果可以的话，我想让它更干净。

* * *

## 回答 #1

> 赞同：80
> 
> 时间：2012-09-19T19:20:20.167

Whammo blammo（用于前导空格）：

```
SELECT 
    RIGHT(space(60) + cust_name, 60),
    RIGHT(space(60) + cust_address, 60) 
```

或（用于尾随空格）

```
SELECT
    LEFT(cust_name + space(60), 60),
    LEFT(cust_address + space(60), 60), 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2019-01-16T13:47:09.027

用空格正确填充字符串（不修剪）的最简单方法是简单地将字符串转换为 CHAR(length)。MSSQL 有时会从 VARCHAR 中删除空格（因为它是 VARiable-length 数据类型）。由于 CHAR 是一个固定长度的数据类型，SQL Server 永远不会修剪尾随空格，并且会自动用空格填充比其长度短的字符串。例如，试试下面的代码片段。

```
SELECT CAST('Test' AS CHAR(20)) 
```

这将返回值`'Test '`。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2016-11-04T22:02:12.333

这是基于吉姆的回答，

```
SELECT
    @field_text + SPACE(@pad_length - LEN(@field_text)) AS RightPad
   ,SPACE(@pad_length - LEN(@field_text)) + @field_text AS LeftPad 
```

好处

*   更直接
*   稍微清洁（IMO）
*   更快（也许？）
*   轻松修改为双填充以显示非固定宽度字体或将填充左右拆分到中心

缺点

*   不处理 LEN(@field_text) > @pad_length

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-10-24T08:35:17.930

根据[KMier 的回答](https://stackoverflow.com/a/40432329/2936460)，解决了当要填充的字段不是字段而是（可能很复杂）函数的结果时，此方法会造成问题的评论；必须重复整个功能。

此外，这允许将字段填充到其内容的最大长度。

```
WITH
cte AS (
  SELECT 'foo' AS value_to_be_padded
  UNION SELECT 'foobar'
),
cte_max AS (
  SELECT MAX(LEN(value_to_be_padded)) AS max_len
)
SELECT
  CONCAT(SPACE(max_len - LEN(value_to_be_padded)), value_to_be_padded AS left_padded,
  CONCAT(value_to_be_padded, SPACE(max_len - LEN(value_to_be_padded)) AS right_padded; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-05-06T15:24:27.347

```
declare @t table(f1 varchar(50),f2 varchar(50),f3 varchar(50))

insert into @t values
 ('foooo','fooooooo','foo')
,('foo','fooooooo','fooo')
,('foooooooo','fooooooo','foooooo')

select 
    concat(f1
          ,space(max(len(f1)) over () - len(f1))
          ,space(3)
          ,f2
          ,space(max(len(f2)) over () - len(f2))
          ,space(3)
          ,f3
          )
from @t 
```

结果

```
foooo       fooooooo   foo
foo         fooooooo   fooo
foooooooo   fooooooo   foooooo 
```

# javascript - 带有 onClick 功能的 AppendChild 链接

> ID：12501042
> 
> 赞同：2
> 
> 时间：2012-09-19T18:52:34.723
> 
> 标签：javascript, appendchild

我正在尝试在 Javascript 中使用 appendChild 来创建一个具有 onClick 属性的链接。我似乎无法让它工作或找到如何完成这个简单的任务。

```
var link=document.createElement("a");
link.appendChild(document.createTextNode("Link"));
link.href = '#';
link.onclick = 'loadScript()';
document.body.appendChild(link); 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-19T18:55:44.150

你必须改变

```
link.onclick = 'loadScript()'; 
```

经过

```
link.onclick = loadScript; 
```

**[演示](http://jsfiddle.net/YZfJ2/)**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-13T12:45:59.210

试试这个：

```
window.onload = function () {
  var files = document.getElementById('files');
  document.getElementById('addLink').onclick = function () {
    var file = document.createElement('input');
    file.type = 'file';
    files.appendChild(file);
  };
}; 
```

# contact-form-7 - 在 WordPress 主题中预配置联系表 7

> ID：12501043
> 
> 赞同：1
> 
> 时间：2012-09-19T18:52:36.720
> 
> 标签：contact-form-7

我真的很喜欢 Contact Form 7 的功能。

有谁知道是否有一种方法可以将 Contact Form 7 合并到商业主题中，而无需用户通过进入插件设置然后获取短代码的 ID 来自己创建表单？

所需的功能是让用户简单地使用我的主题的页面模板。要在模板文件中编程的自定义联系表。

重要的是不要使用任何插件黑客，以便插件升级不会破坏功能。

任何帮助都感激不尽。

# java - SimpleDateFormat.parse - ParseException

> ID：12501047
> 
> 赞同：1
> 
> 时间：2012-09-19T18:52:45.557
> 
> 标签：java, simpledateformat

我正在尝试将（字符串）日期解析为 Date 对象，但无论我使用什么模式`SimpleDateFormat`，我都无法让它工作，我总是最终得到一个 ParseException。

代码：

```
SimpleDateFormat sdf = new SimpleDateFormat("E MMM, d, h:mm a", Locale.US);

String strDate = "Tue Sep, 18, 3:30 AM";
Date newDate = null;

newDate = sdf.parse(strDate); 
```

上面的代码给了我一个`Exception: java.text.ParseException: Unparseable date: "Tue Sep, 18, 3:30 AM"`.

我什至尝试将字符串日期直接写入 parse 方法；

```
newDate = sdf.parse("Tue Sep, 18, 3:30 AM"); 
```

但这没有任何区别。

我很清楚做错了什么，但我只是不知道在哪里。我一遍又一遍地阅读[http://docs.oracle.com/javase/7/docs/api/java/text/SimpleDateFormat.html](http://docs.oracle.com/javase/7/docs/api/java/text/SimpleDateFormat.html)`SimpleDateFormat#pattern` ，并尝试了不同的但没有设法解决它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T18:58:06.427

一切都应该没问题..尝试删除语言环境，有时这可能会导致奇怪的错误，具体取决于环境。

# javascript - 在其 select 方法中更改自动完成选项

> ID：12501053
> 
> 赞同：0
> 
> 时间：2012-09-19T18:53:11.890
> 
> 标签：javascript, jquery, jquery-ui, events, dom

这是我的代码：

```
$authorizedRow = $('.authorizedRows').html()

$("#name").autocomplete({
        source: "userlookup.cfm",
        minLength: 3,
        select: function(e, ui) {
            $('#email').last().attr('value',ui.item.mail).attr('disabled','disabled');
            $('#phone').last().attr('value',ui.item.phone).attr('disabled','disabled');
            $('.authorizedRows').last().append('<button class="deleteRow">x</button>');
            $('.deleteRow').button();
            $('#people').append('<div class="authorizedRows">' + $authorizedRow + '</div>').autocomplete( "option", "appendTo", "#name");
        },
        change: function(e, ui) {
            if (a) {
                //not used yet
            }
        }
    }); 
```

所以，我想做的是在输入字段上自动完成，当用户选择它时，它将自动填充另外两个字段。这三个字段（姓名、电话和电子邮件）都包含在我的 authorizedRows div 中。它将在“last”authorizedRows div 的末尾附加一个按钮，然后在“people”div 的末尾附加一个全新的 authorizedRows div。

我的问题是在新行追加后，自动完成将无法在新行中的新名称字段上工作。这是因为事件侦听器尚未附加到 DOM 元素。

如您所见，我尝试通过在人员 div 选择器上使用 .autocomplete('option') 来解决此问题。它没有用。有什么想法可以让自动完成功能在我动态创建的字段上工作吗？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T12:03:40.623

我使用类选择器而不是 id 解决了它。

**编辑：**

如果有多个 ID，jQuery 选择器将只返回第一个，这就是为什么事件没有附加到其他动态创建的字段的原因。类的 jQuery 选择器将为每个匹配选择器的类返回一个数组。

# java - 属性的 Java POJO xml 注释

> ID：12501054
> 
> 赞同：1
> 
> 时间：2012-09-19T18:53:23.060
> 
> 标签：java, annotations, marshalling, spring-batch

我目前正在使用 Spring Batch 应用程序调用 API 并将整个 JSON 响应解析为 XML 以供另一个应用程序使用。目前，我们正在使用 API 的相当大的扩展查询，有时会在元素上超时。结果所需的输出格式是

```
<?xml version...?>
<RECORDS>
    <RECORD>
        <PROP NAME="json.path.to.element.name">
            <PVAL>The value for the element</PVAL>
        </PROP>
        <PROP NAME="json.path.to.element2.name">
            <PVAL>The value for the element2</PVAL>
        </PROP>
        ...
    </RECORD>
    <RECORD>
        ...
    </RECORD>
    ...
</RECORDS> 
```

这是使用 DOMSource 和 Transformer 创建的。不幸的是，这没有利用 Spring Batch 块处理。我正在更新它以扩展`StaxEventItemWriter`和传递映射对象列表。我的映射实体是

```
@XmlElement
public class Record implements Serializable {

    private List<Prop> prop;
}

@XmlElement
public class Prop implements Serializable {

    @XmlAttribute
    private String name;

    @XmlValue
    private String pVal;
} 
```

我的编组器的 Spring Batch XML 配置是

```
<bean id="xmlMarshaller" class="org.springframework.oxm.xstream.XStreamMarshaller">
    <property name="aliases">
        <map>
            <entry key="RECORD" value="com...Record"/>
            <entry key="PROP" value="com...Prop" />
        </map>
    </property>
</bean> 
```

我遇到的问题是我的输出格式不起作用。我正进入（状态

```
<?xml version...?>
<RECORDS>
    <RECORD>
        <prop>
            <PROP>
                <name>json.path.to.element1.name"</name>
                <pVal>The value for the element1</pVal>
            </PROP>
                <name>json.path.to.element2.name"</name>
                <pVal>The value for the element2</pVal>
            </PROP>
            ...
        </prop>
    </RECORD>
    <RECORD>
        <prop>
            ...
        </prop>
    </RECORD>
    ...
</RECORDS> 
```

需要发生的两件事是 1)`<prop>`需要删除实体，因为直接在 Record 下的是所有`<PROP>`实体。2）`<PROP>`需要`<PROP NAME...>`

我试过弄乱注释，但似乎无法更改输出。我什至不确定 XSD 对于所需的结构是什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T13:35:12.347

对于您问题的第二部分，如果您希望它是一个属性，名称字段的正确注释应该如下所示。

```
@XStreamAsAttribute
private String name; 
```

在[XStream 注释文档](http://xstream.codehaus.org/annotations-tutorial.html)之后，第一部分应该是：

```
@XStreamImplicit(itemFieldName="PROP")
private List<Prop> prop; 
```

# php - html/php 在多个 PDF 文件中搜索文本

> ID：12501058
> 
> 赞同：-2
> 
> 时间：2012-09-19T18:53:37.083
> 
> 标签：php, html, cakephp, pdf

我的网站上有几个 pdf 文件，我想要的是有一个代码 html、php 或任何其他语言，以允许访问者在 PDF 文件中写一个单词和我的网站搜索，然后将结果作为可点击的标题pdf 文件和找到的文本短语，当单击标题时，浏览器将打开此 pdf。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-19T19:04:11.863

如果你想自己动手：

1.  将 PDF 文件更改为您可以搜索的内容。

    使用 XPDF：[http ://www.foolabs.com/xpdf/about.html](http://www.foolabs.com/xpdf/about.html)

    ```
    $content = shell_exec('/usr/local/bin/pdftotext '.$filename.' -'); //dash at the end to output content 
    ```

    还。[http://coolwanglu.github.com/pdf2htmlEX/](http://coolwanglu.github.com/pdf2htmlEX/)

2.  使用 Google 自定义搜索或您自己的搜索脚本仅搜索您在第 1 步中创建的 HTML 页面。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-19T19:10:26.767

听起来你想要一个 PHP 蜘蛛：[http ://www.sphider.eu/](http://www.sphider.eu/)

此外，谷歌自定义搜索也应该能够索引 pdf。

# java - 如何从詹金斯运行 sh 脚本

> ID：12501063
> 
> 赞同：0
> 
> 时间：2012-09-19T18:53:58.207
> 
> 标签：java, linux, jenkins, hudson

我需要从 jenkins 启动 sh 脚本，这很简单，但是我的脚本更改了 JAVA_HOME 的符号链接，实际上我使用 sh 脚本在 JDK 版本之间切换。当我在没有 jenkins 的情况下启动工作时它可以工作（在 bash 上编写的工作），但它在 jenkins 下不起作用......詹金斯在启动后记得 JAVA_HOME 并使用这个路径......我怎样才能从 jenkins 下的 sh 脚本更改 JAVA_HOME ？如果可能的话，可能来自脚本调用詹金斯重新加载配置......谢谢任何帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T18:49:20.593

问题解决了！！！解决方案很简单，我有在 jenkins 工作中启动的 sh 脚本，如下所示：./MY_SCRIPT.sh

在 jenkins 下启动该脚本之后，我在切换 JAVA_HOME 时遇到了问题。

只需要像这样启动脚本：sh MY_SCRIPT.sh 它将像从系统中启动 smt。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T05:52:51.887

只需尝试如下；

```
 public static void execShellCmd(String cmd) {  
        try {  
            Runtime runtime = Runtime.getRuntime();  
            Process process = runtime.exec(new String[] { "/bin/bash", "-c", cmd });  
            int exitValue = process.waitFor();  
            System.out.println("exit value: " + exitValue);  
            BufferedReader buf = new BufferedReader(new InputStreamReader(process.getInputStream()));  
            String line = "";  
            while ((line = buf.readLine()) != null) {  
                System.out.println("exec response: " + line);  
            }  
        } catch (Exception e) {  
            System.out.println(e);  
        }  
    } 
```

有关更多详细信息：[使用 java 运行的 Shell 脚本](http://www.unix.com/shell-programming-scripting/30145-running-shell-script-java.html)

# ruby-on-rails - 无法让 Rails 控制台在 cygwin 上运行

> ID：12501067
> 
> 赞同：4
> 
> 时间：2012-09-19T18:54:13.223
> 
> 标签：ruby-on-rails, cygwin

提前致谢。

我在 Cygwin 下运行 Rails。一切都可以正常工作，但导轨控制台。当我想运行控制台时，这是我得到的错误：

```
$ rails console
/usr/lib/ruby/gems/1.9.1/gems/activesupport-3.0.0/lib/active_support/dependencies.rb:239:in `require': cannot load such file -- minitest/unit (LoadError)
    from /usr/lib/ruby/gems/1.9.1/gems/activesupport-3.0.0/lib/active_support/dependencies.rb:239:in `block in require'
    from /usr/lib/ruby/gems/1.9.1/gems/activesupport-3.0.0/lib/active_support/dependencies.rb:225:in `block in load_dependency'
    from /usr/lib/ruby/gems/1.9.1/gems/activesupport-3.0.0/lib/active_support/dependencies.rb:591:in `new_constants_in'
    from /usr/lib/ruby/gems/1.9.1/gems/activesupport-3.0.0/lib/active_support/dependencies.rb:225:in `load_dependency'
    from /usr/lib/ruby/gems/1.9.1/gems/activesupport-3.0.0/lib/active_support/dependencies.rb:239:in `require'
    from /usr/lib/ruby/1.9.1/test/unit/assertions.rb:1:in `<top (required)>'
    from /usr/lib/ruby/gems/1.9.1/gems/activesupport-3.0.0/lib/active_support/dependencies.rb:239:in `require'
    from /usr/lib/ruby/gems/1.9.1/gems/activesupport-3.0.0/lib/active_support/dependencies.rb:239:in `block in require'
    from /usr/lib/ruby/gems/1.9.1/gems/activesupport-3.0.0/lib/active_support/dependencies.rb:225:in `block in load_dependency'
    from /usr/lib/ruby/gems/1.9.1/gems/activesupport-3.0.0/lib/active_support/dependencies.rb:591:in `new_constants_in'
    from /usr/lib/ruby/gems/1.9.1/gems/activesupport-3.0.0/lib/active_support/dependencies.rb:225:in `load_dependency'
    from /usr/lib/ruby/gems/1.9.1/gems/activesupport-3.0.0/lib/active_support/dependencies.rb:239:in `require'
    from /usr/lib/ruby/1.9.1/test/unit/testcase.rb:1:in `<top (required)>'
    from /usr/lib/ruby/gems/1.9.1/gems/activesupport-3.0.0/lib/active_support/dependencies.rb:239:in `require'
    from /usr/lib/ruby/gems/1.9.1/gems/activesupport-3.0.0/lib/active_support/dependencies.rb:239:in `block in require'
    from /usr/lib/ruby/gems/1.9.1/gems/activesupport-3.0.0/lib/active_support/dependencies.rb:225:in `block in load_dependency'
    from /usr/lib/ruby/gems/1.9.1/gems/activesupport-3.0.0/lib/active_support/dependencies.rb:591:in `new_constants_in'
    from /usr/lib/ruby/gems/1.9.1/gems/activesupport-3.0.0/lib/active_support/dependencies.rb:225:in `load_dependency'
    from /usr/lib/ruby/gems/1.9.1/gems/activesupport-3.0.0/lib/active_support/dependencies.rb:239:in `require'
    from /usr/lib/ruby/gems/1.9.1/gems/activesupport-3.0.0/lib/active_support/test_case.rb:1:in `<top (required)>'
    from /usr/lib/ruby/gems/1.9.1/gems/activesupport-3.0.0/lib/active_support/dependencies.rb:239:in `require'
    from /usr/lib/ruby/gems/1.9.1/gems/activesupport-3.0.0/lib/active_support/dependencies.rb:239:in `block in require'
    from /usr/lib/ruby/gems/1.9.1/gems/activesupport-3.0.0/lib/active_support/dependencies.rb:225:in `block in load_dependency'
    from /usr/lib/ruby/gems/1.9.1/gems/activesupport-3.0.0/lib/active_support/dependencies.rb:591:in `new_constants_in'
    from /usr/lib/ruby/gems/1.9.1/gems/activesupport-3.0.0/lib/active_support/dependencies.rb:225:in `load_dependency'
    from /usr/lib/ruby/gems/1.9.1/gems/activesupport-3.0.0/lib/active_support/dependencies.rb:239:in `require'
    from /usr/lib/ruby/gems/1.9.1/gems/railties-3.0.0/lib/rails/console/app.rb:2:in `<top (required)>'
    from /usr/lib/ruby/gems/1.9.1/gems/activesupport-3.0.0/lib/active_support/dependencies.rb:239:in `require'
    from /usr/lib/ruby/gems/1.9.1/gems/activesupport-3.0.0/lib/active_support/dependencies.rb:239:in `block in require'
    from /usr/lib/ruby/gems/1.9.1/gems/activesupport-3.0.0/lib/active_support/dependencies.rb:225:in `block in load_dependency'
    from /usr/lib/ruby/gems/1.9.1/gems/activesupport-3.0.0/lib/active_support/dependencies.rb:591:in `new_constants_in'
    from /usr/lib/ruby/gems/1.9.1/gems/activesupport-3.0.0/lib/active_support/dependencies.rb:225:in `load_dependency'
    from /usr/lib/ruby/gems/1.9.1/gems/activesupport-3.0.0/lib/active_support/dependencies.rb:239:in `require'
    from /usr/lib/ruby/gems/1.9.1/gems/railties-3.0.0/lib/rails/application.rb:225:in `initialize_console'
    from /usr/lib/ruby/gems/1.9.1/gems/railties-3.0.0/lib/rails/application.rb:153:in `load_console'
    from /usr/lib/ruby/gems/1.9.1/gems/railties-3.0.0/lib/rails/commands/console.rb:26:in `start'
    from /usr/lib/ruby/gems/1.9.1/gems/railties-3.0.0/lib/rails/commands/console.rb:8:in `start'
    from /usr/lib/ruby/gems/1.9.1/gems/railties-3.0.0/lib/rails/commands.rb:23:in `<top (required)>'
    from script/rails:6:in `require'
    from script/rails:6:in `<main>' 
```

任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-19T19:03:08.220

看起来您的 Gemfile 中没有安装 gem“minitest”。

# ruby - 如何将深度哈希转换为键数组

> ID：12501071
> 
> 赞同：1
> 
> 时间：2012-09-19T18:54:27.030
> 
> 标签：ruby

我想以编程方式转换它：

```
{
"a"=>
  {"1"=>
    {"A"=>
      {"Standard"=>"true"}
    }
  },
"b"=>
  {"1"=>
    {"A"=>
      {"Standard"=>"true"}
    }
  }
} 
```

到这样的数组：

```
['a/1/A/Standard', 'b/1/A/Standard'] 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-19T19:08:18.227

```
def extract_keys(hash)
  return [] unless hash.is_a?(Hash)
  hash.each_pair.map {|key, value| [key, extract_keys(value)].join('/') }
end
extract_keys(hash)
=> ["a/1/A/Standard", "b/1/A/Standard"] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-19T19:14:28.227

从我的其他[答案](https://stackoverflow.com/questions/9647997/converting-a-nested-hash-into-a-flat-hash/9648410#9648410)之一- 适合您的情况。请参阅链接以获取更详细的解决方案`flat_hash`

```
def flat_hash(hash, k = "")
  return {k => hash} unless hash.is_a?(Hash)
  hash.inject({}){ |h, v| h.merge! flat_hash(v[-1], k + '/' + v[0]) }
end

example = {...} # your example hash
foo = flat_hash(example).keys
=> ["/a/1/A/Standard", "/b/1/A/Standard"] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-19T19:17:31.323

找到了这个[flatten](http://www.samlown.com/en/recursive_lambdas_and_how_to_completely_flatten_a_hash_in_ruby) lambda 定义。

```
h = {
"a"=>
  {"1"=>
    {"A"=>
      {"Standard"=>"true"}
     }
  },
"b"=>
  {"1"=>
     {"A"=>
       {"Standard"=>"true"}
     }
  }
}

a = []

flatten =
  lambda {|r|
    (recurse = lambda {|v|
      if v.is_a?(Hash)
        v.to_a.map{|v| recurse.call(v)}.flatten
      elsif v.is_a?(Array)
        v.flatten.map{|v| recurse.call(v)}
      else
        v.to_s
      end
    }).call(r)
  }

h.each do |k,v|
  a << k + "/" + flatten.call(v).join("/")
end 
```

输出：

```
 ["a/1/A/Standard/true", "b/1/A/Standard/true"] 
```

# ldap - LDAP 连接

> ID：12501076
> 
> 赞同：0
> 
> 时间：2012-09-19T18:54:59.780
> 
> 标签：ldap

我对 LDAP 协议有一个非常基本的问题：

客户端是否可以连接一段未定义的时间，或者每次身份验证都需要打开和关闭一个 tcp 连接？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T19:10:57.853

专业品质的 LDAP 服务器可以配置为在一段时间、最大操作次数或其他条件后终止客户端；或者，让客户端永远连接。询问您的 LDAP 服务器管理员客户端连接是否因列出的任何条件或其他条件而终止。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-19T22:11:07.210

除了 Terry 所说的，专业质量的 LDAP 客户端 API 使用连接池来隐藏所有这些血淋淋的细节。尽可能长时间地保持连接打开；并从服务器施加连接终止规则的情况中恢复。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-10-08T01:43:17.430

LDAP 服务器可以在服务器端实现多个限制，LDAP 客户端 API 还提供在客户端设置限制的选项。一些服务器端限制是 [在 Oracle DSEE 的情况下]

大小限制 - 返回的搜索结果条目数 时间限制 - 处理请求所用的时间 空闲时间限制 - 连接可以保持空闲多长时间？[在负载均衡器上保持连接可以保持连接处于活动状态]。服务器访问日志标记连接由于空闲时间而关闭。Lookthrough limit - 给定 ldap 搜索要查看的候选条目数

客户端 API 可以设置自己的时间和大小限制

# c# - 常数与。方法参数的枚举

> ID：12501081
> 
> 赞同：2
> 
> 时间：2012-09-19T18:55:18.233
> 
> 标签：c#, vb.net, enums, constants

我有一个看似非常基本的问题。我正在尝试确定常量字符串是否真的比使用 MyEnum.ToString() 的枚举更好，需要高性能应用程序。

我有一个像这样的类，枚举，方法......

```
 Public Enum MyEnum
        MyValue1
        MyValue2
    End Enum

    Public Class MyImportantClass

            Public Sub Foo(ByVal enumerationValue As MyEnum)

            ' Some code in here that needs to do this at some point
            Dim str As String = enumerationValue.ToString()

    End Sub

    End Class 
```

我了解 enumerationValue.ToString() 存在一些性能问题。但是，另一位开发人员建议不要使用枚举，而是使用常量字符串。我的问题是方法参数是一个字符串，然后调用者可以传递他想要的任何东西。显然，不是任何字符串都可以工作，所以这是一个运行时错误。

```
Public Sub Foo(ByVal enumerationValue As String)

    ' Some code in here that needs to do this at some point
    '   Dim str As String = enumerationValue

End Sub 
```

我想要枚举的安全性，但性能却是常数。正如我所说，我正在寻找一种方法来拥有我的蛋糕并吃掉它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T18:59:56.643

到目前为止，枚举是要走的路。有点自我记录，肯定会掉进“成功的坑”，因为你永远不会得到虚假数据。

我不确定，但我怀疑 .ToString() 做的很好——不用担心。它被称为很多！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T19:57:04.683

好的，这可能不是您想要的，但它提供了类型安全并防止您`ToString`稍后再做。首先设置一个具有一个没有设置器的属性的类，以及一个执行设置的 New 方法：

```
Public Class MyEnumObj
    Private _Value As String
    Public ReadOnly Property Value As String
        Get
            Return _Value
        End Get
    End Property
    Private Sub New()
        ' Hide the default constructor '
    End Sub
    Public Sub New(inValue As String)
        _Value = inValue
    End Sub
End Class 
```

然后声明你的“常量”：

```
Public MyValue1 As New MyEnumObj("MyValue1")
Public MyValue2 As New MyEnumObj("MyValue2") 
```

它们不是恒定的，但不能修改，我认为通过正确使用`Friend`你可以安排它，这样其他人也不能创建对象。现在你可以说：

```
Public Sub Foo(Optional ByVal enumerationValue As MyEnumObj = Nothing)

        ' Some code in here that needs to do this at some point '
        Dim str As String = If(enumerationValue IsNot Nothing, enumerationValue.Value, String.Empty)

End Sub 
```

这可能有点矫枉过正，但对象确实倾向于使自己具有类型安全性。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-20T15:08:50.763

坚持使用枚举，将其作为参数传递给函数会更加用户友好。IDE 可以弹出可用项目的列表。

要将您的枚举转换为字符串，您可以使用 (Enum, String) 的字典

或者

有一些关于如何将属性放在枚举上的不错的文章，这样您就可以将其转换为字符串。

[我可以在 VB.NET 中给枚举一个属性（就像我在 Java 中可以做的那样）？](https://stackoverflow.com/questions/6915349/can-i-give-an-enum-an-attribute-in-vb-net-like-i-can-do-in-java)

[http://weblogs.asp.net/stefansedich/archive/2008/03/12/enum-with-string-values-in-c.aspx](http://weblogs.asp.net/stefansedich/archive/2008/03/12/enum-with-string-values-in-c.aspx)

# html - jquery mobile 在非 wifi 互联网连接上的性能比普通 html 更快

> ID：12501082
> 
> 赞同：0
> 
> 时间：2012-09-19T18:55:18.267
> 
> 标签：html, jquery-mobile, asp.net-mvc-4, iphone-3gs

我的 MVC 4 Web 应用程序有一个非常奇怪的问题。直到最近，我们使用 jquery mobile 1.1 作为我们的 UI 和基本操作的基础（除了 MVC 框架）。最近我们意识到我们的网络应用在手机上的性能还不够。我们删除了对 jquery 的所有引用，性能变得更好了。但是，我们现在面临一个新的、奇怪的问题：尤其是在 iPhone 上，如果 web 应用程序加载了非 wifi (3G) 互联网连接，所有 html 页面的加载速度都非常慢。在WIFI上是可以的。有谁知道为什么 html 网页在没有 jquery mobile 的 3G 连接上加载非常缓慢？会不会和3G有关？jquery-mobile 会对这些连接进行任何优化吗？另请注意，在 android 设备上性能还可以

# event-handling - 如何防止用户脚本 [GreaseMonkey/TamperMonkey] 添加的按钮提交表单

> ID：12501085
> 
> 赞同：1
> 
> 时间：2012-09-19T18:55:33.320
> 
> 标签：event-handling, dom-events, greasemonkey, tampermonkey, userscripts

首先让我说有问题的代码是 a 的一部分`UserScript`，因此，正常的 DOM 规则和 Javascript 方法不起作用。

情况如下：

我编写了一个与在线聊天站点交互的用户脚本。我有一些`button`是在用户脚本中生成的。其中一些按钮位于表单内部，而许多按钮则不在。

通过 GreaseMonkey 添加的元素存在于两个世界中——它们存在于页面 DOM 中，它们存在于稍微提升的 UserScript 世界中，这意味着这些行：

```
event.preventDefault = true;
event.stopPropagation = true; 
```

阻止其余`UserScript`操作运行，但不会阻止按钮导致表单提交。

作为一种解决方法，我正在构建`span`元素而不是`button`. 这行得通，但它确实打破了聊天室的视觉布局。

有谁知道防止添加元素`UserScripts`以防止`form`提交的方法？如果做不到这一点，我会梦想有人知道如何让自己`span`看起来像一个本地人`button`。

编辑：我有一个似乎可以工作的解决方案——但我还没有在每个 UserScript 环境下完全测试它：

```
 // Yes, yes, poorly named but it was a SPAN
  // userWindow is an alias for unsafeWindow.
  // (Used to run under a userScript environment for IE and I had to emulate a lot)
  var span = document.createElement("input");
  span.value = text;
  span.type = "button";
  span.className = "cpbutton";

  // Add it to the body just long enough to set up a page-level, DOM0 event handler
  var body = userWindow.document.getElementsByTagName("body")[0];
  var tname = "IAmTheVeryModelOfAModernMajorGeneral";     
  span.id = tname;
  body.appendChild(span);
  userWindow.document.getElementById(tname).onclick = function() {return false;};
  body.removeChild(span);
  span.id = ""; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T02:02:06.573

请参阅[W3C 规范以获取`<button>`](http://www.w3.org/wiki/HTML/Elements/button).
默认情况下，`<button>`元素充当表单内的提交按钮。这意味着`event.preventDefault()`（正确的用法，顺便说一句），在点击处理程序上，可能不足以停止表单提交。

在这种情况下，您也可以拦截表单的提交事件，**但**明智的做法是使用该`type`属性告诉浏览器不要将按钮视为提交按钮。
例如：

```
<button type="button">Your button markup</button> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T01:16:29.510

当你说

> 防止用户脚本添加元素以防止表单提交

我不确定您是要允许还是阻止提交表单...

无论如何，这是`link`一个`div`伪装成一个：http `button`: [//jsfiddle.net/RASG/PvhUb/](http://jsfiddle.net/RASG/PvhUb/)

![eee](../Images/83efcb69c4aa78f35bdfd89f2fbd1ed8.png)

如果您发布一些代码，我可以帮助您编写脚本。

# c# - 以编程方式获取特定项目中特定文件夹的挂起更改？

> ID：12501086
> 
> 赞同：2
> 
> 时间：2012-09-19T18:55:33.900
> 
> 标签：c#

我一直在玩 TFS 一段时间，因为在本地创建和放置特定文件和文件夹后，我需要将它们上传/签入到 TFServer 上的各个位置。我正在映射工作区和所有内容，我从 PendingChanges 获得了一堆更改，但不是我想要的，也不是我想要的。这个问题真的很烦人，因为对于每个签入过程，我只想处理已经映射的特定位置的特定文件夹或文件。我将在此处粘贴部分代码以供参考。

```
using (TfsTeamProjectCollection collection = new TfsTeamProjectCollection(serverUri, _cred))
        {
            VersionControlServer versionControl = (VersionControlServer)collection.GetService(typeof(VersionControlServer));

            string machineName = Environment.MachineName;
            string currentUserName = Environment.UserName;

            Workspace myWorkspace = versionControl.GetWorkspace(machineName, currentUserName);
            // tried this from Stack but didn't work.
            //PendingChange[] changes = myWorkspace.GetPendingChanges().Where(x => x.LocalOrServerFolder.Contains(localPath)).ToArray();

            PendingChange[] changes = myWorkspace.GetPendingChanges();
            if (changes.Length != 0)
            {
                foreach (PendingChange c in changes)
                {
                    rt.Text += "  path: " + c.LocalItem + ", change: " + PendingChange.GetLocalizedStringForChangeType(c.ChangeType) + "\n";
                }
            }
            else
            {
                rt.Text += "This didn't work.";
            } 
```

}

基本上我想在我的 TFS 类中抛出一个文件夹或文件，让它检查文件或文件夹是否是最新的或存在于 TFS 上并采取相应的行动。我希望我已经彻底描述了这个问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-17T12:25:11.847

我认为我的回答不会完全回答您的问题，但是如果您想获得特定文件夹的待处理更改，您可以使用类似这样的东西..

```
PendingChange[] changes = myWorkspace.GetPendingChanges(localPath, RecursionType.Full, false); 
```

# permissions - 使 execvp 权限被拒绝

> ID：12501099
> 
> 赞同：1
> 
> 时间：2012-09-19T18:56:20.910
> 
> 标签：permissions, makefile, execvp

我有一个makefile，我正在尝试运行但没有太多运气。这是发生的事情

我试着做，开始还可以。然后它给出一个错误，它无法找到该文件。但是，我可以对文件执行 ls -ld 没有任何问题。你知道发生了什么事吗？

```
pgr@pgr:~/start_code_1$ make
gcc -Wall -g -m32 -c -fomit-frame-pointer -O2 -fno-builtin bootblock.s
ld -nostartfiles -nostdlib -melf_i386 -Ttext 0x0 -o bootblock bootblock.o
gcc -c -o createimage.o createimage.c
gcc -o createimage createimage.o
gcc -Wall -g -m32 -c -fomit-frame-pointer -O2 -fno-builtin kernel.s
ld -nostartfiles -nostdlib -melf_i386 -Ttext 0x1000 -o kernel kernel.o
./createimage.given --extended ./bootblock ./kernel
make: ./createimage.given: Command not found
make: *** [image] Error 127
pgr@pgr:~/start_code_1$ ls -ld ./createimage.given 
-rwxr-xr-x 1 pgr pgr 26110 Sep 16 13:03 ./createimage.given 
```

**更新**

pgr@pgr:~/workspace/318/bootloader$ 文件 createimage.given createimage.given：ELF 32 位 LSB 可执行文件，Intel 80386，版本 1 (SYSV)，动态链接（使用共享库），适用于 GNU/Linux 2.2。 5、不剥离

**更新 2**

```
pgr@pgr:~/phdvdev/workspace/318/bootloader$ ldd createimage.given 
    not a dynamic executable 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T18:59:01.903

您的脚本很可能`createimage.given`在 shebang 行中有错误的解释器。并且有可能它已经在 Windows 机器上进行了编辑并且有回车符:)

# python - string.replace 的正确形式是什么？

> ID：12501100
> 
> 赞同：4
> 
> 时间：2012-09-19T18:56:25.400
> 
> 标签：python, string, replace

遵循 string.replace 的 Python 文档（[http://docs.python.org/library/string.html](http://docs.python.org/library/string.html)）：

> string.replace(str, old, new[, maxreplace])
> 
> 返回字符串 str 的副本，其中所有出现的子字符串 old 都替换为 new。如果给出了可选参数 maxreplace，则替换第一个 maxreplace 出现。

使用给定的格式会产生以下错误：

```
>>> a = 'grateful'
>>> a.replace(a,'t','c')
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
TypeError: an integer is required 
```

您需要重复“str”似乎很奇怪，并且从错误中我猜想我的第三个参数被用于 maxreplace。

格式：

> string.replace（旧的，新的）

似乎确实按预期运行。

我想知道我是否误解了某些东西，而 Python 文档中给出的形式实际上在某种程度上是正确的。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-19T19:08:34.707

我认为您在这里的困惑（以及大多数答案的困惑）是`string`模块和`str`内置类之间的不同。它们是完全独立的东西，即使功能上有很多重叠。

`string.replace(s, old, new)`是一个自由函数，而不是一个方法。您无法将其称为`s.replace(old, new)`，因为`s`不能是`string`模块的实例。

`str.replace(self, old, new)`是一种方法。与任何其他方法（除了 classmethod 和 staticmethod 方法）一样，您可以并且通常会通过`str`实例调用它，因为`s.replace(old, new)`, where自动`s`成为`self`参数。

也可以通过类调用方法，`str.replace(s, old, new)`结果与`s.replace(old, new)`. 碰巧的是，如果`s`是 a `str`，它的作用与 完全相同`string.replace(old, new)`。但由于历史原因，这确实是一个巧合。

附带说明一下，您几乎从不想调用`string`模块中的函数。它们主要是 Python 早期版本的遗留物。事实上，`string.replace`它列在文档的“不推荐使用的字符串函数”部分下，您可能会在那里寻找大多数其他函数。整个模块没有被弃用的原因是它有一些不属于`str`（或`bytes`或`unicode`）类的东西，比如像`string.digits`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-19T18:59:35.037

是的，该文档是正确的，因为它指的是`string.replace()`作为*独立功能*使用。所以你可以这样做：

```
>>> import string
>>> string.replace("a","a","b")
'b' 
```

`replace()`这与作为*给定字符串的方法*调用不同，如下所示：

```
>>> 'a'.replace('a','b')
'b' 
```

它们是两种不同的东西，具有不同的语法，但旨在具有相同的结果。所以用另一个的语法调用一个会导致错误。例如：

```
>>> 'a'.replace('a','a','b')
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
TypeError: an integer is required 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-19T19:07:12.550

看起来您将字符串模块的“替换”方法与 python 字符串的“替换”方法混淆了。

```
string.replace("rest,"r", "t") 
```

将返回“测试”

```
"rest".replace("r", "t") 
```

将返回“测试”

```
"rest".replace("rest", "r", "t") 
```

将返回您提到的错误

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-19T19:06:56.157

Python 方法使用显式的 self。也就是说，在 C++/javscript 有一个魔术`this`变量的地方，Python 将它显式地作为第一个参数传递。当您调用该方法时，点左侧的对象将成为该方法的第一个参数。

这些是等价的：

```
str.replace('foobar', 'o', 'O', 1)

'foobar'.replace('o', 'O', 1) 
```

您会看到`str`在这两种情况下只涉及四个值（和一个类：）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-04-08T05:28:47.093

# 更新最新语法

现在是**2021**年

## 最新的官方文档

移至此处：[字符串替换](https://docs.python.org/3/library/stdtypes.html#str.replace)

> str.replace（旧，新 [，计数]）
> 
> 返回字符串的副本，其中所有出现的子字符串 old 都替换为 new。如果给定了可选参数 count，则仅替换第一个 count 出现。

## 对应的python代码（in `VSCode`）语法说明

[![在此处输入图像描述](../Images/3e530905af95f68c7cfc109247dd6040.png)](https://i.stack.imgur.com/RFbMD.png)

语法是：

> str.replace(self: str, old, new, count) -> str

# 回答：`It seems odd that you'd need the "str" repeated`

不奇怪，在你知道细节之后：

*   Python 的内置**字符串类**名为：**str**

->`str.replace(old, new[, count])`有两个正常用例：

## 用例 1：使用内置字符串类`str`

```
originalStr = 'grateful'
replacedStr = str.replace(originalStr,'t','c') 
```

## 用例 2：使用`string variable`自身

```
originalStr = 'grateful'
replacedStr = originalStr.replace('t','c') 
```

# 回答：`TypeError: an integer is required`

您的（错误）代码：

```
a = 'grateful'
a.replace(a,'t','c') 
```

的解释：

`a.replace(a,'t','c')`

匹配上述**用例 2**的语法：

`strVariable.replace(old, new[, count])`

所以：

*   `'a'`=>`strVariable`
*   `'a'`=>`old`
*   `'t'`=>`new`
*   `'c'`=> 可选`count`

但是`'c'`是**str**，而不是（预期的）**int**，所以报错：

> TypeError：需要一个整数

# 如何更改我的代码？

如上所述，将您的代码更改为：

## 用例 1：使用内置字符串类`str`

```
originalStr = 'grateful'
replacedStr = str.replace(originalStr,'t','c') 
```

## 用例 2：使用`string variable`自身

```
originalStr = 'grateful'
replacedStr = originalStr.replace('t','c') 
```

# vbscript - CDONTS in Loop Issue 2008 服务器

> ID：12501108
> 
> 赞同：0
> 
> 时间：2012-09-19T18:56:53.320
> 
> 标签：vbscript, windows-server-2008, cdonts

我有以下 CDONTS 代码可以正常工作：

```
Dim CDONTSMail 
Set CDONTSMail = CreateObject("CDONTS.NewMail") 
CDONTSMail.From= "me@gmail.com" 
CDONTSMail.To= "me@gmail.com" 
CDONTSMail.Subject= "500.100 Error: " & objASPError.File 
strBody = "This is a test message." & vbCrLf 
CDONTSMail.Body= sErrorMes 
CDONTSMail.Send 
set CDONTSMail=nothing 
```

但是下面在循环中使用的时候会报错吗？有任何想法吗？

```
'Create Mailer object and send message

CDONTSMail.From= "me@gmail.com" 
CDONTSMail.To = Session("Email") 
CDONTSMail.Subject = Subject 
strBody = MainMessage & vbCrLf
CDONTSMail.Body= strBody 
CDONTSMail.Send 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T18:58:45.333

您需要重新设置 CDONTSMail。

在你的循环中试试这个：

```
Set CDONTSMail = CreateObject("CDONTS.NewMail") 
CDONTSMail.From= "me@gmail.com" 
CDONTSMail.To= "me@gmail.com" 
CDONTSMail.Subject = Subject 
strBody = MainMessage & vbCrLf
CDONTSMail.Body= strBody 
CDONTSMail.Send 
set CDONTSMail=nothing 
```

# session - Compojure/Ring：为什么与 cookie-store 的会话在服务器重启后无法幸存？

> ID：12501111
> 
> 赞同：10
> 
> 时间：2012-09-19T18:57:12.570
> 
> 标签：session, cookies, clojure, compojure, ring

我有一个组合应用程序，它使用环会话包装器来存储与当前用户关联的 OAuth 令牌。我希望这个令牌在服务器重新启动时保持可用，这样我就不必每次都通过身份验证过程。

我认为使用 cookie-store 而不是默认的 memory-store 会有所帮助，但事实并非如此。我错过了什么？

这是代码的相关部分：

```
(defn auth-callback-handler
  [session {code :code}]
  (let [token (retrieve-token code)]
    (-> (redirect "/") (assoc :session (assoc session :token token)))))

(defroutes app-routes
  (GET "/" {session :session} (root-handler session))
  (GET "/auth-callback" {session :session params :params} (auth-callback-handler session params))
  (route/not-found "Not Found"))

(def app
  (-> (handler/site app-routes)
      (wrap-session {:store (cookie-store {:key "a 16-byte secret"})}))) 
```

该函数`root-handler`使用令牌来决定是否有人登录，但不会以会话信息的方式返回任何内容。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-19T23:22:40.300

问题是您的应用程序中有**2 个**包装会话中间件，因为处理程序/站点带有一个。这导致加密/解密运行两次。要配置复合会话句柄，请使用：

```
(def app
  (site app-routes {:session {:store (cookie-store {:key "a 16-byte secret"})}})) 
```

此外，也许您会对其中一些实现环 SessionStore 协议的项目感兴趣：

[https://github.com/sritchie/couch-session](https://github.com/sritchie/couch-session)

[https://github.com/wuzhe/clj-redis-session](https://github.com/wuzhe/clj-redis-session)

[https://github.com/rmarianski/servlet-session-store](https://github.com/rmarianski/servlet-session-store)

要使最后一个持久化，您需要检查您选择的 servlet 容器的文档。

# java - 单词超过2亿时如何使用Java去除重复单词？

> ID：12501112
> 
> 赞同：22
> 
> 时间：2012-09-19T18:57:22.760
> 
> 标签：java, duplicate-removal

我有一个文件（大小 = ~1.9 GB），其中包含 ~220,000,000（~2.2 亿）个单词/字符串。他们有重复，每 100 个单词几乎有 1 个重复单词。

在我的第二个程序中，我想读取文件。我成功地使用 BufferedReader 逐行读取文件。

现在要删除重复项，我们可以使用 Set（及其实现），但是 Set 存在问题，如下面的 3 个不同场景中所述：

1.  使用默认的 JVM 大小，Set 最多可以包含 0.7-080 万个单词，然后是 OutOfMemoryError。
2.  使用 512M 的 JVM 大小，Set 最多可以包含 5-6 百万字，然后 OOM 错误。
3.  使用 1024M 的 JVM 大小，Set 最多可以包含 12-1300 万个单词，然后 OOM 错误。在将 1000 万条记录添加到 Set 之后，操作变得非常缓慢。例如，添加下一个 ~4000 条记录需要 60 秒。

我有不能进一步增加 JVM 大小的限制，我想从文件中删除重复的单词。

如果您对使用 Java 从如此庞大的文件中删除重复单词有任何想法，请告诉我。非常感谢 ：）

问题补充信息：我的话基本上是字母数字，它们是我们系统中唯一的 ID。因此，它们不是简单的英语单词。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-09-19T19:07:11.630

Use [merge sort](http://en.wikipedia.org/wiki/Merge_sort) and remove the duplicates in a second pass. You could even remove the duplicates while merging (just keep the latest word added to output in RAM and compare the candidates to it as well).

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-09-19T19:07:55.767

根据单词的第一个字母将大文件分成26个较小的文件。如果任何字母文件仍然太大，请使用第二个字母分割该字母文件。

使用 a 分别处理每个字母文件`Set`以删除重复项。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-09-19T21:33:11.887

您也许可以使用[trie](http://en.wikipedia.org/wiki/Trie)数据结构一次性完成这项工作。它具有推荐它用于此类问题的优点。查找和插入很快。并且它的表示是相对节省空间的。您可能能够在 RAM 中表示所有单词。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-09-19T19:17:26.767

如果您对项目进行排序，重复项将很容易检测和删除，因为重复项会聚集在一起。

这里有代码可以用来对大文件进行合并排序：http: [//www.codeodor.com/index.cfm/2007/5/10/Sorting-really-BIG-files/1194](http://www.codeodor.com/index.cfm/2007/5/10/Sorting-really-BIG-files/1194)

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2012-09-19T20:03:59.517

如果您可以在数据库的临时表中插入单词（使用批量插入），那么它将是对该表不同的选择。

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2012-09-19T19:13:46.637

问题：这些真的是单词，还是其他东西——短语、零件编号等？

对于通用口语中的单词，人们会期望在最初的几千个之后，您会找到大部分独特的单词，因此您真正需要做的就是读入一个单词，对照字典检查，如果找到了 跳过它，如果找不到，请将其添加到字典中并写出来。

在这种情况下，您的字典只有几千个单词。而且您不需要保留源文件，因为您一找到唯一单词就写出它们（或者您可以在完成后简单地转储字典）。

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2012-09-19T19:07:56.813

对于大文件，我尽量不将数据读入内存，而是对内存映射文件进行操作，并让操作系统根据需要调入/调出内存。如果您的设置结构包含此内存映射文件的偏移量，而不是实际的字符串，则它将消耗更少的内存。

看看这篇文章：

[http://javarevisited.blogspot.com/2012/01/memorymapped-file-and-io-in-java.html](http://javarevisited.blogspot.com/2012/01/memorymapped-file-and-io-in-java.html)

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2012-09-19T19:10:43.967

解决此类问题的一种经典方法是[布隆过滤器](http://en.wikipedia.org/wiki/Bloom_filter)。基本上，您对您的单词进行多次散列，并为每个散列结果在位向量中设置一些位。如果您正在检查一个单词，并且它的哈希中的所有位都设置在您可能已经看过的向量中（您可以通过增加向量中的哈希/位的数量来将此概率设置为任意低）并且它是重复的.

这就是早期拼写检查器的工作方式。他们知道字典中是否有一个单词，但他们无法告诉您正确的拼写是什么，因为它只会告诉您当前单词是否被看到。

有许多开源实现，包括 [java-bloomfilter](http://code.google.com/p/java-bloomfilter/)

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2012-09-20T01:56:01.277

为了不必太担心实现，您应该使用数据库系统，无论是普通的旧关系 SQL 还是 No-SQL 解决方案。我很确定您可以使用例如 Berkeley DB java 版本然后执行（伪代码）

```
for(word : stream) {
  if(!DB.exists(word)) {
     DB.put(word)
     outstream.add(word)
  }
} 
```

问题本质上很简单，因为内存不足，您需要将内容存储在磁盘上，然后使用排序 O(N log N)（不必要）或散列 O(N) 来查找唯一词。

如果您想要一个很可能有效但不能保证这样做的解决方案，请使用 LRU 类型的哈希表。根据经验[Zpif 定律](http://en.wikipedia.org/wiki/Zipf%27s_law)，您应该没问题。

对一些聪明人的后续问题，如果我有 64 位机器并将堆大小设置为 12GB，虚拟内存不应该解决这个问题（尽管不是以最佳方式）还是 java 不是设计的这边走？

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2012-09-20T02:32:21.430

即使在自然语言中拥有大量单词的英语中，最高估计也只有大约 80000 个单词。基于此，您可以使用 a`HashSet`并添加所有单词（可能全部小写以避免大小写问题）：

```
Set<String> words = new HashSet<String>();
while (read-next-word) {
    words.add(word.toLowerCase());
} 
```

如果它们是真实的话，这不会导致记忆问题，也会很快！

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2012-09-19T19:09:20.317

我会在 Java 中以与其他所有语言相同的方式解决这个问题：编写一个重复数据删除**过滤器**并根据需要经常对其进行管道传输。

这就是我的意思（在伪代码中）：

*   输入参数：`Offset`,`Size`
*   分配大小的可搜索结构`Size`（= `Set`，但不必是一）
*   从标准输入读取`Offset`（或遇到 EOF）元素并将它们复制到标准输出
*   `Size`从标准输入（或 EOF）读取元素，将它们存储在 Set 中。如果重复，则删除，否则写入标准输出。
*   从标准输入读取元素直到 EOF，如果它们在`Set`则删除，否则写入标准输出

`Offset`现在，随着s 和 sane的增加，您可以根据需要管道尽可能多的实例（如果存储没有问题，可能只有您拥有的核心数量）`Size`。这使您可以使用更多内核，因为我怀疑该进程受 CPU 限制。如果您赶时间，您甚至可以在更多机器上使用`netcat`和传播处理。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2012-09-19T20:17:53.867

Quicksort would be a good option over Mergesort in this case because it needs less memory. [This thread](https://stackoverflow.com/questions/680541/quick-sort-vs-merge-sort) has a good explanation as to why.

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2012-10-09T09:18:55.287

大多数高性能解决方案都源于省略不必要的东西。您只查找重复项，所以不要存储单词本身，存储哈希。但是等等，你也对哈希不感兴趣，只有当它们已经被看到时——不要存储它们。将哈希视为非常大的数字，并使用 bitset 来查看您是否已经看到了这个数字。

所以你的问题归结为非常大的稀疏填充位图 - 大小取决于哈希宽度。如果您的哈希值高达 32 位，则可以使用 riak 位图。

... 考虑 128+ 位哈希的真正大位图 %）（我会回来的）

# java - 在 Netbeans 7.2 中调试视图

> ID：12501114
> 
> 赞同：1
> 
> 时间：2012-09-19T18:57:30.387
> 
> 标签：java, netbeans, netbeans-7.2

我最近将 netbeans 从 7.1.2 更新到 7.2。不幸的是，我找不到激活调试视图的方法，例如断点列表、调用堆栈和线程列表。

在 netbeans 7.1 中，我可以进入 Window->Debugging 来激活那些，但是这个菜单在 7.2 中消失了。

我检查了是否缺少任何插件，但一切看起来都很好。

目前，我在调试时只有变量列表/手表。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T13:38:57.150

在使用最新更新更新我的 NB 7.2 后，我遇到了同样的问题：当我调试项目时，源、线程、断点、手表、变量窗口总是空的。以前可以正常工作。我使用自由形式的项目。“后台项目扫描”在无限循环中运行，这就是原因。甚至很难退出NB。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T19:16:56.073

我已经检查过了，我在 Window -> Debugging 中有它们。也许您的安装已损坏？

# java - 以编程方式从 PEM 获取 KeyStore

> ID：12501117
> 
> 赞同：28
> 
> 时间：2012-09-19T18:57:33.063
> 
> 标签：java, ssl, ssl-certificate, bouncycastle, jsse

如何以编程方式从包含证书和私钥的 PEM 文件中获取 KeyStore？我正在尝试通过 HTTPS 连接向服务器提供客户端证书。如果我使用 openssl 和 keytool 来获取我动态加载的 jks 文件，我已经确认客户端证书有效。我什至可以通过动态读取 p12 (PKCS12) 文件来使其工作。

我正在考虑使用 BouncyCastle 的 PEMReader 类，但我无法克服一些错误。我正在运行带有 -Djavax.net.debug=all 选项的 Java 客户端和带有调试 LogLevel 的 Apache Web 服务器。我不确定要寻找什么。Apache 错误日志表明：

```
...
OpenSSL: Write: SSLv3 read client certificate B
OpenSSL: Exit: error in SSLv3 read client certificate B
Re-negotiation handshake failed: Not accepted by client!? 
```

Java 客户端程序表明：

```
...
main, WRITE: TLSv1 Handshake, length = 48
main, waiting for close_notify or alert: state 3
main, Exception while waiting for close java.net.SocketException: Software caused connection abort: recv failed
main, handling exception: java.net.SocketException: Software caused connection abort: recv failed
%% Invalidated:  [Session-3, TLS_RSA_WITH_AES_128_CBC_SHA]
main, SEND TLSv1 ALERT:  fatal, description = unexpected_message
... 
```

客户端代码：

```
public void testClientCertPEM() throws Exception {
    String requestURL = "https://mydomain/authtest";
    String pemPath = "C:/Users/myusername/Desktop/client.pem";

    HttpsURLConnection con;

    URL url = new URL(requestURL);
    con = (HttpsURLConnection) url.openConnection();
    con.setSSLSocketFactory(getSocketFactoryFromPEM(pemPath));
    con.setRequestMethod("GET");
    con.setDoInput(true);
    con.setDoOutput(false);  
    con.connect();

    String line;

    BufferedReader reader = new BufferedReader(new InputStreamReader(con.getInputStream()));

    while((line = reader.readLine()) != null) {
        System.out.println(line);
    }       

    reader.close();
    con.disconnect();
}

public SSLSocketFactory getSocketFactoryFromPEM(String pemPath) throws Exception {
    Security.addProvider(new BouncyCastleProvider());        
    SSLContext context = SSLContext.getInstance("TLS");

    PEMReader reader = new PEMReader(new FileReader(pemPath));
    X509Certificate cert = (X509Certificate) reader.readObject();        

    KeyStore keystore = KeyStore.getInstance("JKS");
    keystore.load(null);
    keystore.setCertificateEntry("alias", cert);

    KeyManagerFactory kmf = KeyManagerFactory.getInstance("SunX509");
    kmf.init(keystore, null);

    KeyManager[] km = kmf.getKeyManagers(); 

    context.init(km, null, null);

    return context.getSocketFactory();
} 
```

我注意到服务器在日志中输出 SSLv3，而客户端是 TLSv1。如果我添加系统属性 -Dhttps.protocols=SSLv3 那么客户端也将使用 SSLv3，但我会收到相同的错误消息。我也尝试添加 -Dsun.security.ssl.allowUnsafeRenegotiation=true 结果没有变化。

我用谷歌搜索了这个问题，通常的答案是先使用 openssl 和 keytool 。就我而言，我需要直接即时阅读 PEM。我实际上是在移植一个已经做到这一点的 C++ 程序，坦率地说，我很惊讶在 Java 中做到这一点有多么困难。C++ 代码：

```
 curlpp::Easy request;
  ...
  request.setOpt(new Options::Url(myurl));
  request.setOpt(new Options::SslVerifyPeer(false));
  request.setOpt(new Options::SslCertType("PEM"));
  request.setOpt(new Options::SslCert(cert));
  request.perform(); 
```

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2012-09-20T14:30:44.343

我想到了。问题是 X509Certificate 本身是不够的。我还需要将私钥放入动态生成的密钥库中。BouncyCastle PEMReader 似乎不能一次性处理带有证书和私钥的 PEM 文件，但它可以单独处理每个文件。我可以自己将 PEM 读入内存并将其分成两个单独的流，然后将每个流分别提供给一个单独的 PEMReader。因为我知道我正在处理的 PEM 文件将首先拥有证书，然后拥有私钥，所以我可以以稳健性为代价简化代码。我也知道 END CERTIFICATE 分隔符将始终用五个连字符包围。对我有用的实现是：

```
protected static SSLSocketFactory getSocketFactoryPEM(String pemPath) throws Exception {        
    Security.addProvider(new BouncyCastleProvider());

    SSLContext context = SSLContext.getInstance("TLS");

    byte[] certAndKey = fileToBytes(new File(pemPath));

    String delimiter = "-----END CERTIFICATE-----";
    String[] tokens = new String(certAndKey).split(delimiter);

    byte[] certBytes = tokens[0].concat(delimiter).getBytes();
    byte[] keyBytes = tokens[1].getBytes();

    PEMReader reader;

    reader = new PEMReader(new InputStreamReader(new ByteArrayInputStream(certBytes)));
    X509Certificate cert = (X509Certificate)reader.readObject();        

    reader = new PEMReader(new InputStreamReader(new ByteArrayInputStream(keyBytes)));
    PrivateKey key = (PrivateKey)reader.readObject();        

    KeyStore keystore = KeyStore.getInstance("JKS");
    keystore.load(null);
    keystore.setCertificateEntry("cert-alias", cert);
    keystore.setKeyEntry("key-alias", key, "changeit".toCharArray(), new Certificate[] {cert});

    KeyManagerFactory kmf = KeyManagerFactory.getInstance("SunX509");
    kmf.init(keystore, "changeit".toCharArray());

    KeyManager[] km = kmf.getKeyManagers(); 

    context.init(km, null, null);

    return context.getSocketFactory();
} 
```

**更新**：似乎这可以在没有 BouncyCastle 的情况下完成：

```
 byte[] certAndKey = fileToBytes(new File(pemPath));
    byte[] certBytes = parseDERFromPEM(certAndKey, "-----BEGIN CERTIFICATE-----", "-----END CERTIFICATE-----");
    byte[] keyBytes = parseDERFromPEM(certAndKey, "-----BEGIN PRIVATE KEY-----", "-----END PRIVATE KEY-----");

    X509Certificate cert = generateCertificateFromDER(certBytes);              
    RSAPrivateKey key  = generatePrivateKeyFromDER(keyBytes); 
```

...

```
protected static byte[] parseDERFromPEM(byte[] pem, String beginDelimiter, String endDelimiter) {
    String data = new String(pem);
    String[] tokens = data.split(beginDelimiter);
    tokens = tokens[1].split(endDelimiter);
    return DatatypeConverter.parseBase64Binary(tokens[0]);        
}

protected static RSAPrivateKey generatePrivateKeyFromDER(byte[] keyBytes) throws InvalidKeySpecException, NoSuchAlgorithmException {
    PKCS8EncodedKeySpec spec = new PKCS8EncodedKeySpec(keyBytes);

    KeyFactory factory = KeyFactory.getInstance("RSA");

    return (RSAPrivateKey)factory.generatePrivate(spec);        
}

protected static X509Certificate generateCertificateFromDER(byte[] certBytes) throws CertificateException {
    CertificateFactory factory = CertificateFactory.getInstance("X.509");

    return (X509Certificate)factory.generateCertificate(new ByteArrayInputStream(certBytes));      
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2021-07-07T21:47:17.653

尽管 Ryan 的回答效果很好，但我想为其他开发人员提供一个替代方案，因为我过去面临过类似的挑战，我还需要处理 pem 格式的加密私钥。我创建了一个库来简化加载 pem 文件并从中创建 SSLSocketFactory 或 SSLContext，请参见此处：[GitHub - SSLContext Kickstart](https://github.com/Hakky54/sslcontext-kickstart)希望您喜欢 :)

可以使用以下代码段加载 pem 文件：

```
var keyManager = PemUtils.loadIdentityMaterial("certificate-chain.pem", "private-key.pem");
var trustManager = PemUtils.loadTrustMaterial("some-trusted-certificate.pem");

var sslFactory = SSLFactory.builder()
          .withIdentityMaterial(keyManager)
          .withTrustMaterial(trustManager)
          .build();

var sslContext = sslFactory.getSslContext();
var sslSocketFactory = sslFactory.getSslSocketFactory(); 
```

回到您的主要问题，使用上面的代码段，不需要从 pem 文件创建密钥库对象。它将在幕后处理它并将其映射到 KeyManager 实例。

# c# - 动态 URL MVC

> ID：12501121
> 
> 赞同：-1
> 
> 时间：2012-09-19T18:57:48.070
> 
> 标签：c#, asp.net-mvc

我正在 MVC 中建立一个新网站，由于我是 MVC 新手，所以我有一个小问题：

我有几种类型的页面，我把它们从数据库中取出

我的问题是如何让应用程序决定使用哪个控制器和视图 例如，我有一个从数据库中获取的菜单，并且有页面名称：关于和产品。

www.site.com/about - 是文本页面类型 而 www.site.com/products - 是产品类型页面

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T18:59:58.567

[MVC SiteMap 提供程序](https://github.com/maartenba/MvcSiteMapProvider)可以为您执行此操作。

# c - 编译 Linux 内核模块时出错：“CONFIG_X86_X32 已启用，但不支持 binutils”和不需要的“n”字符

> ID：12501124
> 
> 赞同：7
> 
> 时间：2012-09-19T18:58:00.890
> 
> 标签：c, gcc, compiler-errors, linux-kernel, compiler-warnings

我正在尝试在我的 x86-64 Linux 中编译[Rasta Ring0 调试器](http://rr0d.droids-corp.org/)0.3 版，它是一个 Linux 内核模块。正如我的问题[如何将 Linux 32 位 gcc 内联汇编转换为 64 位代码？](https://stackoverflow.com/questions/11897116/how-to-convert-linux-32-bit-gcc-inline-assembly-to-64-bit-code), 通过使用 Vim 正则表达式，并且 gcc 没有给出语法错误。但我得到了其他几个错误。

我的电脑是配备 Intel Core i7-2760QM 的联想 W520 笔记本电脑，我使用的是 Debian GNU/Linux Wheezy。

这些是输出的第一行`$ make >make_output.txt 2>&1`

```
make -C /lib/modules/`uname -r`/build/ SUBDIRS=`pwd` modules
make[1]: Entering directory `/usr/src/linux-3.5.4'
/usr/src/linux-3.5.4/arch/x86/Makefile:96: CONFIG_X86_X32 enabled but no binutils support
  CC [M]  /home/user/code/rr0d/0.3/module_nux.o
/bin/sh: 1: nobjdump: not found
  CC [M]  /home/user/code/rr0d/0.3/breakpoint.o
/home/user/code/rr0d/0.3/breakpoint.c: In function ‘insert_bp’:
/home/user/code/rr0d/0.3/breakpoint.c:66:24: warning: cast to pointer from integer of different size [-Wint-to-pointer-cast] 
```

首先，`CONFIG_X86_X32 enabled but no binutils support`。但在我的自定义内核`.config`中，很明显它是一个 64 位系统：

```
#
# Automatically generated file; DO NOT EDIT.
# Linux/x86_64 3.5.4 Kernel Configuration
#
CONFIG_64BIT=y
# CONFIG_X86_32 is not set
CONFIG_X86_64=y
CONFIG_X86=y
CONFIG_INSTRUCTION_DECODER=y
CONFIG_OUTPUT_FORMAT="elf64-x86-64"
CONFIG_ARCH_DEFCONFIG="arch/x86/configs/x86_64_defconfig" 
```

其次，`$ make >make_output.txt 2>&1`输出中有这一行：

```
/bin/sh: 1: nobjdump: not found 
```

显然没有这样的程序`nobjdump`，它应该是`objdump`。这可能`n`来自哪里？`ld`稍后也会以的形式出现同样的错误`nld`。有什么想法可能源于此错误并且可以解决吗？

`Makefile`如下：

```
# EXTRA_CFLAGS +=  -O2 -Wall -DLINUX_26
EXTRA_CFLAGS +=  -O2 -Wall -DLINUX_26 -m64

OBJ          := module_nux.o breakpoint.o buffering.o command.o disasmbak.o idt.o 
OBJ          += keyboard.o page.o video.o utils.o import_symb.o core_rr0d.o pci.o
MODULE       := rr0d.o 

obj-m        := $(MODULE)
rr0d-objs    := $(OBJ)

default:
    make -C /lib/modules/`uname -r`/build/ SUBDIRS=`pwd` modules

clean:
    rm -f  *.o .*.o.cmd .*.ko.cmd *.mod.c  *~ 
    rm -rf .tmp_versions

mrproper:
    make clean
    rm -f *.ko 
```

在`Makefile`我添加`-m64`到`EXTRA_FLAGS`但它没有改变`make`输出。

在输出的末尾（下面的整个输出）还有三个与上面一个相同类型的错误：

```
/bin/sh: 1: nobjdump: not found

/bin/sh: 1: nobjdump: not found

/bin/sh: 1: nld: not found 
```

显然有 3`n`个字母不应该存在。可能这与 Rasta Ring0 Debugger 无关，因为我在尝试[为 Linux 2.6 和 3.0 编译 'parrot' 示例设备驱动程序](http://pete.akeo.ie/2011/08/writing-linux-device-driver-for-kernels.html)时也遇到了相同的错误。

那么，任何想法如何解决这些编译错误？谷歌搜索几天并没有帮助，我完全没有想法。

这是整个`$ make >make_output.txt 2>&1`输出（包括上面已经显示的 8 行）：

```
make -C /lib/modules/`uname -r`/build/ SUBDIRS=`pwd` modules
make[1]: Entering directory `/usr/src/linux-3.5.4'
/usr/src/linux-3.5.4/arch/x86/Makefile:96: CONFIG_X86_X32 enabled but no binutils support
  CC [M]  /home/user/code/rr0d/0.3/module_nux.o
/bin/sh: 1: nobjdump: not found
  CC [M]  /home/user/code/rr0d/0.3/breakpoint.o
/home/user/code/rr0d/0.3/breakpoint.c: In function ‘insert_bp’:
/home/user/code/rr0d/0.3/breakpoint.c:66:24: warning: cast to pointer from integer of different size [-Wint-to-pointer-cast]
/home/user/code/rr0d/0.3/breakpoint.c:74:19: warning: cast from pointer to integer of different size [-Wpointer-to-int-cast]
/home/user/code/rr0d/0.3/breakpoint.c:80:33: warning: cast from pointer to integer of different size [-Wpointer-to-int-cast]
/home/user/code/rr0d/0.3/breakpoint.c:81:46: warning: cast from pointer to integer of different size [-Wpointer-to-int-cast]
/home/user/code/rr0d/0.3/breakpoint.c: In function ‘is_breakpoint’:
/home/user/code/rr0d/0.3/breakpoint.c:127:30: warning: cast from pointer to integer of different size [-Wpointer-to-int-cast]
/home/user/code/rr0d/0.3/breakpoint.c: In function ‘parse_inst’:
/home/user/code/rr0d/0.3/breakpoint.c:310:28: warning: cast to pointer from integer of different size [-Wint-to-pointer-cast]
/home/user/code/rr0d/0.3/breakpoint.c:312:19: warning: cast from pointer to integer of different size [-Wpointer-to-int-cast]
/home/user/code/rr0d/0.3/breakpoint.c: In function ‘is_hw_breakpoint’:
/home/user/code/rr0d/0.3/breakpoint.c:600:40: warning: cast from pointer to integer of different size [-Wpointer-to-int-cast]
/bin/sh: 1: nobjdump: not found
  CC [M]  /home/user/code/rr0d/0.3/buffering.o
/bin/sh: 1: nobjdump: not found
  CC [M]  /home/user/code/rr0d/0.3/command.o
/bin/sh: 1: nobjdump: not found
  CC [M]  /home/user/code/rr0d/0.3/disasmbak.o
/bin/sh: 1: nobjdump: not found
  CC [M]  /home/user/code/rr0d/0.3/idt.o
/home/user/code/rr0d/0.3/idt.c: In function ‘translate_logic_to_linear’:
/home/user/code/rr0d/0.3/idt.c:92:17: warning: cast to pointer from integer of different size [-Wint-to-pointer-cast]
/home/user/code/rr0d/0.3/idt.c: In function ‘visualise_idt’:
/home/user/code/rr0d/0.3/idt.c:157:1: warning: the frame size of 2064 bytes is larger than 2048 bytes [-Wframe-larger-than=]
/bin/sh: 1: nobjdump: not found
  CC [M]  /home/user/code/rr0d/0.3/keyboard.o
/home/user/code/rr0d/0.3/keyboard.c: In function ‘back_disasm’:
/home/user/code/rr0d/0.3/keyboard.c:500:17: warning: cast to pointer from integer of different size [-Wint-to-pointer-cast]
/home/user/code/rr0d/0.3/keyboard.c:511:27: warning: cast to pointer from integer of different size [-Wint-to-pointer-cast]
/home/user/code/rr0d/0.3/keyboard.c: In function ‘handle_scancode’:
/home/user/code/rr0d/0.3/keyboard.c:784:25: warning: cast to pointer from integer of different size [-Wint-to-pointer-cast]
/home/user/code/rr0d/0.3/keyboard.c:839:55: warning: cast from pointer to integer of different size [-Wpointer-to-int-cast]
/home/user/code/rr0d/0.3/keyboard.c:1230:24: warning: cast to pointer from integer of different size [-Wint-to-pointer-cast]
/home/user/code/rr0d/0.3/keyboard.c:1245:22: warning: cast to pointer from integer of different size [-Wint-to-pointer-cast]
/home/user/code/rr0d/0.3/keyboard.c:1250:43: warning: cast to pointer from integer of different size [-Wint-to-pointer-cast]
/bin/sh: 1: nobjdump: not found
  CC [M]  /home/user/code/rr0d/0.3/page.o
/home/user/code/rr0d/0.3/page.c: In function ‘basetp’:
/home/user/code/rr0d/0.3/page.c:68:10: warning: cast to pointer from integer of different size [-Wint-to-pointer-cast]
/home/user/code/rr0d/0.3/page.c: In function ‘get_page_info’:
/home/user/code/rr0d/0.3/page.c:190:18: warning: cast to pointer from integer of different size [-Wint-to-pointer-cast]
/home/user/code/rr0d/0.3/page.c:193:23: warning: cast from pointer to integer of different size [-Wpointer-to-int-cast]
/home/user/code/rr0d/0.3/page.c: In function ‘write_save_dirty’:
/home/user/code/rr0d/0.3/page.c:355:33: warning: cast from pointer to integer of different size [-Wpointer-to-int-cast]
/home/user/code/rr0d/0.3/page.c:359:17: warning: cast from pointer to integer of different size [-Wpointer-to-int-cast]
/home/user/code/rr0d/0.3/page.c: In function ‘poked1’:
/home/user/code/rr0d/0.3/page.c:405:49: warning: cast from pointer to integer of different size [-Wpointer-to-int-cast]
/home/user/code/rr0d/0.3/page.c:434:33: warning: cast from pointer to integer of different size [-Wpointer-to-int-cast]
/home/user/code/rr0d/0.3/page.c:447:17: warning: cast from pointer to integer of different size [-Wpointer-to-int-cast]
/home/user/code/rr0d/0.3/page.c:472:17: warning: cast from pointer to integer of different size [-Wpointer-to-int-cast]
/bin/sh: 1: nobjdump: not found
  CC [M]  /home/user/code/rr0d/0.3/video.o
/bin/sh: 1: nobjdump: not found
  CC [M]  /home/user/code/rr0d/0.3/utils.o
/bin/sh: 1: nobjdump: not found
  CC [M]  /home/user/code/rr0d/0.3/import_symb.o
/bin/sh: 1: nobjdump: not found
  CC [M]  /home/user/code/rr0d/0.3/core_rr0d.o
/home/user/code/rr0d/0.3/core_rr0d.c: In function ‘printf_disasm’:
/home/user/code/rr0d/0.3/core_rr0d.c:314:16: warning: cast from pointer to integer of different size [-Wpointer-to-int-cast]
/home/user/code/rr0d/0.3/core_rr0d.c:318:53: warning: cast from pointer to integer of different size [-Wpointer-to-int-cast]
/home/user/code/rr0d/0.3/core_rr0d.c:319:17: warning: cast to pointer from integer of different size [-Wint-to-pointer-cast]
/home/user/code/rr0d/0.3/core_rr0d.c:344:12: warning: cast from pointer to integer of different size [-Wpointer-to-int-cast]
/home/user/code/rr0d/0.3/core_rr0d.c:358:44: warning: cast from pointer to integer of different size [-Wpointer-to-int-cast]
/home/user/code/rr0d/0.3/core_rr0d.c:393:50: warning: cast from pointer to integer of different size [-Wpointer-to-int-cast]
/home/user/code/rr0d/0.3/core_rr0d.c:417:11: warning: cast from pointer to integer of different size [-Wpointer-to-int-cast]
/home/user/code/rr0d/0.3/core_rr0d.c: In function ‘dump_data’:
/home/user/code/rr0d/0.3/core_rr0d.c:457:11: warning: cast to pointer from integer of different size [-Wint-to-pointer-cast]
/home/user/code/rr0d/0.3/core_rr0d.c:459:16: warning: cast from pointer to integer of different size [-Wpointer-to-int-cast]
/home/user/code/rr0d/0.3/core_rr0d.c:464:53: warning: cast from pointer to integer of different size [-Wpointer-to-int-cast]
/home/user/code/rr0d/0.3/core_rr0d.c:465:9: warning: cast to pointer from integer of different size [-Wint-to-pointer-cast]
/home/user/code/rr0d/0.3/core_rr0d.c: In function ‘_kbdhandle’:
/home/user/code/rr0d/0.3/core_rr0d.c:817:41: warning: cast to pointer from integer of different size [-Wint-to-pointer-cast]
/home/user/code/rr0d/0.3/core_rr0d.c:824:45: warning: cast to pointer from integer of different size [-Wint-to-pointer-cast]
/home/user/code/rr0d/0.3/core_rr0d.c: At top level:
/home/user/code/rr0d/0.3/core_rr0d.c:841:1: warning: ‘cdecl’ attribute ignored [-Wattributes]
/home/user/code/rr0d/0.3/core_rr0d.c: In function ‘kbdhandle’:
/home/user/code/rr0d/0.3/core_rr0d.c:845:3: warning: cast from pointer to integer of different size [-Wpointer-to-int-cast]
/home/user/code/rr0d/0.3/core_rr0d.c: In function ‘step_by_step’:
/home/user/code/rr0d/0.3/core_rr0d.c:1041:44: warning: cast to pointer from integer of different size [-Wint-to-pointer-cast]
/home/user/code/rr0d/0.3/core_rr0d.c:1063:49: warning: cast to pointer from integer of different size [-Wint-to-pointer-cast]
/home/user/code/rr0d/0.3/core_rr0d.c: At top level:
/home/user/code/rr0d/0.3/core_rr0d.c:1181:1: warning: ‘cdecl’ attribute ignored [-Wattributes]
/home/user/code/rr0d/0.3/core_rr0d.c: In function ‘int0_handle’:
/home/user/code/rr0d/0.3/core_rr0d.c:1185:3: warning: cast from pointer to integer of different size [-Wpointer-to-int-cast]
/home/user/code/rr0d/0.3/core_rr0d.c: At top level:
/home/user/code/rr0d/0.3/core_rr0d.c:1366:1: warning: ‘cdecl’ attribute ignored [-Wattributes]
/home/user/code/rr0d/0.3/core_rr0d.c: In function ‘int1_handle’:
/home/user/code/rr0d/0.3/core_rr0d.c:1370:3: warning: cast from pointer to integer of different size [-Wpointer-to-int-cast]
/home/user/code/rr0d/0.3/core_rr0d.c: In function ‘_int3_handle’:
/home/user/code/rr0d/0.3/core_rr0d.c:1430:30: warning: cast to pointer from integer of different size [-Wint-to-pointer-cast]
/home/user/code/rr0d/0.3/core_rr0d.c: At top level:
/home/user/code/rr0d/0.3/core_rr0d.c:1495:1: warning: ‘cdecl’ attribute ignored [-Wattributes]
/home/user/code/rr0d/0.3/core_rr0d.c: In function ‘int3_handle’:
/home/user/code/rr0d/0.3/core_rr0d.c:1499:3: warning: cast from pointer to integer of different size [-Wpointer-to-int-cast]
/home/user/code/rr0d/0.3/core_rr0d.c: At top level:
/home/user/code/rr0d/0.3/core_rr0d.c:1540:1: warning: ‘cdecl’ attribute ignored [-Wattributes]
/home/user/code/rr0d/0.3/core_rr0d.c: In function ‘int6_handle’:
/home/user/code/rr0d/0.3/core_rr0d.c:1544:3: warning: cast from pointer to integer of different size [-Wpointer-to-int-cast]
/home/user/code/rr0d/0.3/core_rr0d.c: At top level:
/home/user/code/rr0d/0.3/core_rr0d.c:1586:1: warning: ‘cdecl’ attribute ignored [-Wattributes]
/home/user/code/rr0d/0.3/core_rr0d.c: In function ‘int13_handle’:
/home/user/code/rr0d/0.3/core_rr0d.c:1589:3: warning: cast from pointer to integer of different size [-Wpointer-to-int-cast]
/home/user/code/rr0d/0.3/core_rr0d.c: In function ‘_int14_handle’:
/home/user/code/rr0d/0.3/core_rr0d.c:1605:32: warning: cast to pointer from integer of different size [-Wint-to-pointer-cast]
/home/user/code/rr0d/0.3/core_rr0d.c:1606:36: warning: cast to pointer from integer of different size [-Wint-to-pointer-cast]
/home/user/code/rr0d/0.3/core_rr0d.c: At top level:
/home/user/code/rr0d/0.3/core_rr0d.c:1648:1: warning: ‘cdecl’ attribute ignored [-Wattributes]
/home/user/code/rr0d/0.3/core_rr0d.c: In function ‘int14_handle’:
/home/user/code/rr0d/0.3/core_rr0d.c:1651:3: warning: cast from pointer to integer of different size [-Wpointer-to-int-cast]
/home/user/code/rr0d/0.3/core_rr0d.c: In function ‘_int128_handle’:
/home/user/code/rr0d/0.3/core_rr0d.c:1664:32: warning: cast to pointer from integer of different size [-Wint-to-pointer-cast]
/home/user/code/rr0d/0.3/core_rr0d.c:1665:36: warning: cast to pointer from integer of different size [-Wint-to-pointer-cast]
/home/user/code/rr0d/0.3/core_rr0d.c: At top level:
/home/user/code/rr0d/0.3/core_rr0d.c:1687:1: warning: ‘cdecl’ attribute ignored [-Wattributes]
/home/user/code/rr0d/0.3/core_rr0d.c: In function ‘int128_handle’:
/home/user/code/rr0d/0.3/core_rr0d.c:1691:3: warning: cast from pointer to integer of different size [-Wpointer-to-int-cast]
/home/user/code/rr0d/0.3/core_rr0d.c: In function ‘init_rr0d’:
/home/user/code/rr0d/0.3/core_rr0d.c:1791:13: warning: cast from pointer to integer of different size [-Wpointer-to-int-cast]
/home/user/code/rr0d/0.3/core_rr0d.c:1794:9: warning: cast from pointer to integer of different size [-Wpointer-to-int-cast]
/home/user/code/rr0d/0.3/core_rr0d.c:1846:18: warning: cast from pointer to integer of different size [-Wpointer-to-int-cast]
/home/user/code/rr0d/0.3/core_rr0d.c:1848:20: warning: cast from pointer to integer of different size [-Wpointer-to-int-cast]
/home/user/code/rr0d/0.3/core_rr0d.c:1849:20: warning: cast from pointer to integer of different size [-Wpointer-to-int-cast]
/home/user/code/rr0d/0.3/core_rr0d.c:1850:20: warning: cast from pointer to integer of different size [-Wpointer-to-int-cast]
/home/user/code/rr0d/0.3/core_rr0d.c:1851:20: warning: cast from pointer to integer of different size [-Wpointer-to-int-cast]
/home/user/code/rr0d/0.3/core_rr0d.c:1852:20: warning: cast from pointer to integer of different size [-Wpointer-to-int-cast]
/home/user/code/rr0d/0.3/core_rr0d.c:1853:20: warning: cast from pointer to integer of different size [-Wpointer-to-int-cast]
/home/user/code/rr0d/0.3/core_rr0d.c:1854:20: warning: cast from pointer to integer of different size [-Wpointer-to-int-cast]
/home/user/code/rr0d/0.3/core_rr0d.c:1869:49: warning: cast to pointer from integer of different size [-Wint-to-pointer-cast]
/home/user/code/rr0d/0.3/core_rr0d.c: In function ‘cleanup_rr0d’:
/home/user/code/rr0d/0.3/core_rr0d.c:1938:36: warning: cast from pointer to integer of different size [-Wpointer-to-int-cast]
/bin/sh: 1: nobjdump: not found
  CC [M]  /home/user/code/rr0d/0.3/pci.o
/bin/sh: 1: nobjdump: not found
  LD [M]  /home/user/code/rr0d/0.3/rr0d.o
/bin/sh: 1: nld: not found
make[2]: *** [/home/user/code/rr0d/0.3/rr0d.o] Error 127
make[1]: *** [_module_/home/user/code/rr0d/0.3] Error 2
make[1]: Leaving directory `/usr/src/linux-3.5.4'
make: *** [default] Error 2 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2018-01-05T18:50:40.287

如果`binutils`签入 `/usr/src/linux-headers-*-common/arch/x86/Makefile` 失败，则会出现此警告：

```
ifdef CONFIG_X86_X32
    x32_ld_ok := $(call try-run,\
            /bin/echo -e '1: .quad 1b' | \
            $(CC) $(KBUILD_AFLAGS) -c -x assembler -o "$$TMP" - && \
            $(OBJCOPY) -O elf32-x86-64 "$$TMP" "$$TMPO" && \
            $(LD) -m elf32_x86_64 "$$TMPO" -o "$$TMP",y,n)
        ifeq ($(x32_ld_ok),y)
                CONFIG_X86_X32_ABI := y
                KBUILD_AFLAGS += -DCONFIG_X86_X32_ABI
                KBUILD_CFLAGS += -DCONFIG_X86_X32_ABI
        else
                $(warning CONFIG_X86_X32 enabled but no binutils support)
        endif
endif 
```

如果`binutils`程序集编译不成功，则失败。上面的命令可以手动检查（可执行文件和标志可能不同）：

```
CC=gcc-6
KBUILD_AFLAGS="-D__ASSEMBLY__  -m64"
OBJCOPY=objcopy
LD=ld
TMP=/tmp/dummytmp.tmp
TMPO=/tmp/dummyo.o

/bin/echo -e '1: .quad 1b' | \
$CC $KBUILD_AFLAGS -c -x assembler -o "$TMP" - && \
$OBJCOPY -O elf32-x86-64 "$TMP" "$TMPO" && \
$LD -m elf32_x86_64 "$TMPO" -o "$TMP" 
```

Debian（可能还有 Ubuntu）用户可以检查系统完整性：

```
debsums -s 
```

并重新安装损坏的软件包：

```
apt-get install --reinstall <space separated packages> 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-01-13T06:44:45.093

安装 binutils 并尝试删除驱动程序路径中的空格。查看完整的详细信息：

[https://askubuntu.com/questions/367838/compiling-error-while-installing-realtek-rtl8111e-in-64-bit-13-10-config-x86-x](https://askubuntu.com/questions/367838/compiling-error-while-installing-realtek-rtl8111e-in-64-bit-13-10-config-x86-x)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-23T23:15:42.467

在解决了这两个问题后回答自己，第一个由 Banthar 指出，第二个由我自己解决。

第一个问题是`CONFIG_X86_32`和`CONFIG_X86_X32`是两个不同的变量。`CONFIG_X86_X32`(x32 ABI for 64-bit mode) 必须设置以`N`解决与`binutils`支持相关的问题。

另一个问题是`nobjdump`and `nld`：

```
/bin/sh: 1: nobjdump: not found

/bin/sh: 1: nld: not found 
```

这可以通过符号链接轻松修复：

```
$ su
# cd /usr/bin
# ln -s objdump nobjdump
# ln -s ld nld 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2018-12-27T09:24:50.227

我不确定`nobjdump: not found`，但`CONFIG_X86_X32 enabled but no binutils support`在某些情况下，如果内核源目录属于`root`并且您以非特权用户身份运行，则可能会获得。试试`sudo make`。

另一个常见原因`CONFIG_X86_X32 enabled but no binutils support`是编译目录中的空格，但这显然不是您的问题。

# android - 片段内的 GridView：永远不会调用 getView

> ID：12501134
> 
> 赞同：0
> 
> 时间：2012-09-19T18:58:50.597
> 
> 标签：android, android-fragments, android-gridview

我有一个`Activity`由两个组成的布局`Fragment`。其中一个片段布局包含一个`GridView`.

```
public class PicturesGallery extends FragmentActivity {
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.gallery_frames);

        Fragment galleryFragment = fm.findFragmentById(R.id.gallery_fragment);
        if (galleryFragment == null) {
           fm.beginTransaction().add(R.id.gallery_fragment, new GalleryFragment()).commit();
        }
        ... 
```

当这个片段被调用时，它会实例化 的适配器`GridView`，膨胀`GridView`并设置适配器（它已经被提供了`ArrayList`15 个要显示的项目）。

```
public class GalleryFragment extends Fragment {
    public void onActivityCreated(Bundle savedInstanceState) {
        super.onActivityCreated(savedInstanceState);

        // Initialize the layout Adapter
        PicturesGallery pga = (PicturesGallery) getActivity();
        mAdapter = new ImageAdapter(pga.getApplication(), pga.mMemoryCache,
                galleryDir);
        mAdapter.mPictureNames = new ArrayList<String>(pictureNames);

        // Inflate the layout and set the adapter
        LayoutInflater inflater = (LayoutInflater) getActivity()
                .getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        GridView gridView = (GridView) inflater.inflate(R.layout.pictures_gallery_fragment, null);
        gridView.setAdapter(mAdapter);
    }
    .... 
```

但是当活动被执行时，什么也没有发生（logcat 中没有错误，但没有显示任何内容`GridView`）。在适配器类中，使用`Log.d()`inside`getView()`表示从不调用该方法。但是`getCount()`返回正确数量的项目。相关代码如下。

```
public class ImageAdapter extends BaseAdapter {
    ...
    public ArrayList<String> mPictureNames = new ArrayList<String>();
    public ImageAdapter(Context c, LruCache<String, Bitmap> mCache, File gallery) {
        mMemoryCache = mCache;
        mGalleryDir = gallery;
        mInflater = (LayoutInflater) c.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
    }

    public View getView(int position, View convertView, ViewGroup parent) {
        Log.d("dupa", "getView");
        ViewHolder vh;
        View cell = convertView;
        if (cell == null) {
            vh = new ViewHolder();
            cell = mInflater.inflate(R.layout.galleryitem, null);
            // Populate the ViewHolder
            vh.checkBox = (CheckBox) cell.findViewById(R.id.itemCheckBox);
            ...
            cell.setTag(vh);
            ...
        } else {
            vh = (ViewHolder) cell.getTag();
        }
        // Update the cell View state
        vh.checkBox.setTag(position);
        ...
        return cell;
    } 
```

我没有包含 xml 文件，因为帖子很长。如果您认为需要它们（或者您需要更多代码），请告诉我。任何帮助将不胜感激。TIA。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T19:35:48.860

您需要`onCreateView()`在您的片段中实现并在那里返回膨胀布局（注意使用`inflate`不将膨胀视图添加到容器的方法。http [://developer.android.com/reference/android/app/Fragment.html#onCreateView (android.view.LayoutInflater](http://developer.android.com/reference/android/app/Fragment.html#onCreateView(android.view.LayoutInflater) , android.view.ViewGroup, android.os.Bundle)

就像页面顶部的示例一样

```
/**
 * The Fragment's UI is just a simple text view showing its
 * instance number.
 */
@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container,
        Bundle savedInstanceState) {
    View v = inflater.inflate(R.layout.hello_world, container, false);
    View tv = v.findViewById(R.id.text);
    ((TextView)tv).setText("Fragment #" + mNum);
    tv.setBackgroundDrawable(getResources().getDrawable(android.R.drawable.gallery_thumb));
    return v;
} 
```

在那里你可以记住 GridView 的实例，然后在`onActivityCreated`（或者可能在`onAttach()`你可以设置适配器）中。

# qt - 来自 QDataStream 的 QT QString

> ID：12501140
> 
> 赞同：3
> 
> 时间：2012-09-19T18:59:06.360
> 
> 标签：qt

我正在使用缓冲区，我试图从中获取一个字符串，但没有工作......

例子：

```
*void myFunc(QDataStream& in)
{
    quint8 v;
    in >> v;
    // Ok, I caught v value successfuly
    QString s;
    in >> s;
    // Didnt work :<
}* 
```

字符串长度存储在前 2 个字节上...

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T21:35:26.150

如果字符串不是写成`QString`，则需要分别读取它的长度和内容。

```
quint8 v;
in >> v;

quint16 length = 0;
in >> length;

// the string is probably utf8 or latin
QByteArray buffer(length, Qt::Uninitialized);

in.readRawData(buffer.data(), length); 
QString string(buffer); 
```

在读取 16 位长度之前，您可能必须更改`QDataStream`with 的字节顺序。`QDataStream::setByteOrder`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T20:11:33.297

我们应该真正看到编写代码以及如何创建 QDataStream。我尝试了以下示例，在这种情况下，您的函数运行良好：

```
#include <QCoreApplication>
#include <QDebug>
#include <QDataStream>
#include <QBuffer>

void myFunc(QDataStream& in)
{
    quint8 v;
    in >> v;
qDebug() << v;
    // Ok, I caught v value successfuly
    QString s;
    in >> s;
qDebug() << s;
    // Didnt work :<
}

int main(int argc, char ** argv) {
    QCoreApplication a(argc, argv);

    QBuffer buffer;
    buffer.open(QBuffer::ReadWrite);

    // write test data into the buffer
    QDataStream out(&buffer);
    quint8 ival = 42;
    QString sval = "Qt";
    out << ival;
    out << sval;

    // read back data
    buffer.seek(0);
    myFunc(out);

    return a.exec();
} 
```

执行时的输出：

```
$ ./App 
42 
"Qt" 
```

# git - 带有硬链接的本地浅 git 克隆

> ID：12501145
> 
> 赞同：5
> 
> 时间：2012-09-19T18:59:39.020
> 
> 标签：git, clone

在我的本地文件系统上，我希望能够只克隆 git repo (A) 的头部，因此新的 git repo (B) 不会出现任何历史记录。但我希望现在 B 中的文件的硬链接的好处是节省空间。有没有办法做到这一点？一旦 repo A 发生变化，硬链接是否有帮助？

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-19T19:44:28.137

至少从 git 1.7.12 开始，似乎不可能使用对象数据库之间的硬链接进行本地浅层克隆。`git clone --depth 1 --single-branch`明确警告`--depth`在本地克隆中被忽略，并使用`file://`. 因此，您需要在硬链接和浅克隆之间进行选择。

即使存储库发生更改，硬链接也可以工作，至少在一段时间内，因为 git 将新对象添加到新文件中，并且从不修改现有文件。但是，为了提高效率，它偶尔会重新打包对象数据库，而且我看不到如何保留硬链接。

如果您选择浅克隆，则可以使用`git clone --single-branch --depth 1 file://old_repo_dir`选项创建克隆。我觉得这很烦人，这`--depth 1`意味着 1 项历史记录，因此您不仅会获得最新的提交，还会获得其父提交（如果是合并，则为父提交）。父级从原始存储库获取提交消息，但提交消息存在，因为实际上提交包含整个树的创建。

我更喜欢从带有我选择的提交消息的单个提交开始，该提交消息会创建初始树。这是通过首先在旧仓库中创建一个没有历史记录的新分支，然后将该分支拉到新的空仓库中来获得的。我在一个带有 664MB 对象数据库和 673k 个对象（Emacs bzr 存储库转换为 git）的大型存储库上对此进行了测试。当新的 repo 收到 pull 时，它有一个 36MB 的对象数据库，其中包含 3477 个对象——因此多余的内容显然被修剪了。以下是具体步骤：

```
# at the old repo:
git checkout --orphan tmp-snapshot
git commit -m "Initial commit."

# at the new repo location:
git init
git pull OLD_REPO_DIR tmp-snapshot:master

# back at the old repo:
git branch -D tmp-snapshot   # no longer serves a purpose 
```

现在，`master`新 repo 的分支包含一个提交，其树与旧 repo 的树相同，并且没有任何历史记录。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-19T19:04:49.717

您可以克隆它，然后重新创建头部提交以剥离父母。考虑到您的原始存储库的对象可能是打包的，无论如何，您的硬链接比您想要的要多。是的，硬链接会在一段时间内保持不变，但是一旦你开始执行 gc 或类似的操作，效果可能会消失。您还可以使用替代而不是硬链接。

查找文档`git commit-tree`以从树中创建提交，我无法告诉您确切的语法。

# ruby-on-rails - 使用 Backup Gem 时如何使用 Flash[:notice] 进行通知？

> ID：12501146
> 
> 赞同：1
> 
> 时间：2012-09-19T18:59:41.063
> 
> 标签：ruby-on-rails, ruby, database, ruby-on-rails-3

我正在使用备份 gem 来创建 pg DB 的备份，我们可以使用 notify 将 flash 消息显示为备份完成而不是通过邮件通知。或任何其他方式来定义自定义通知。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T19:15:03.980

“默认情况下，on_success、on_warning 和 on_failure 通知始终为 true。”

```
notify_by Mail do |mail|
  mail.on_success = false
  mail.on_error = false
  mail.on_failure = false
  #flash[:notice] = 'Done...' or whatever
end 
```

正如 Singh 所说，这些消息是为了让用户知道发生了什么。使用备份 gem，您不需要通知用户有关备份的信息，除非它用于服务器管理员或类似的东西。

或者您可以覆盖通知

```
module Backup
  module Notifier
    class Mail < Base
      #....
      def notify!(status)
        name, send_log =
            case status
            when :success then [ 'Success', false ]
            when :warning then [ 'Warning', true  ]
            when :failure then [ 'Failure', true  ]
            end

        email = new_email
        email.subject = "[Backup::%s] #{@model.label} (#{@model.trigger})" % name
        email.body    = @template.result('notifier/mail/%s.erb' % status.to_s)

        if send_log
          email.convert_to_multipart
          email.attachments["#{@model.time}.#{@model.trigger}.log"] = {
            :mime_type => 'text/plain;',
            :content   => Logger.messages.join("\n")
          }
        end

        email.deliver!
      end
    end
  end
end 
```

[https://github.com/meskyanichi/backup/blob/master/lib/backup/notifier/mail.rb](https://github.com/meskyanichi/backup/blob/master/lib/backup/notifier/mail.rb)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T19:07:04.407

**当您从没有呈现任何内容的****控制器重定向**时，Flash 消息通常会有所帮助。假设您要创建一个用户。现在，如果创建控制器没有呈现任何内容，而是重定向到主页，您可以在此处使用 flash 消息。下面给出了它的语法。

 **```
flash[:notice] = "User successfully created" 
```

或者

```
flash[:notice] = "Some error occured" 
```

根据条件闪烁消息将显示在下一页。

谢谢**

# java - 像 Scala 控制器一样在 Java 控制器中呈现 JSON 响应字符串

> ID：12501150
> 
> 赞同：2
> 
> 时间：2012-09-19T19:00:02.857
> 
> 标签：java, scala, playframework, playframework-2.0

在 Scala 控制器中，我可以使用以下魔法简单地呈现响应（用于开发目的）`"""`：

```
Ok("""{"key":"value"}"""} 
```

在 Java 控制器中，这显然是行不通的。有没有一种快速的方法可以将 JSON 字符串呈现为响应？（如果我的头撞到墙上，手动逃跑太长了）

我不想这样做：

```
ok("{\"key\":\"value\"}"); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T19:06:03.097

不，`"""`它的功能来自编程语言。在 Java 中没有类似物。 你可以试试 `Scala``Groovy`

```
ok("{'key':'value'}"); 
```

但它并不总是有效

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T19:07:37.277

我看到的唯一方法是编写一个小的 shell 脚本或 scala 脚本来为您进行转义，然后将其输出复制/粘贴到您的 java 文件中。

# java - 双精度失败 - 不能使用大十进制

> ID：12501154
> 
> 赞同：0
> 
> 时间：2012-09-19T19:00:09.583
> 
> 标签：java

问题： Double 减去另一个 double 会返回不准确的结果。

通常的解决方案：使用大小数进行计算。

我不能使用它，因为它处于游戏循环的中间，只能在使用*new*创建时使用值设置大十进制，在游戏循环中我的内存不足。

什么解决方案？

这是代码：

```
public void UpdateStatsBar(double WorldPopulation, double WorldDead)
{
    Number = mOriginalPopulation - WorldPopulation;
} 
```

我使用的数字达到数十亿，深度达到数十位（统计数据的平均值）例如：1432,323,234.234215232425322342

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T19:02:41.480

假设你不能有十进制数的人活着或死去，我会使用`long`.

您能否提供一个示例说明您使用的未产生准确结果的数字？

BTW：如果你使用小于九千万亿的整数，甚至`double`会产生准确的结果。

BTW2：如果你`new BigDecimal`疯狂地创造但不保留它们，你会损害性能，但你不会耗尽内存。如果您的内存不足，则不是因为使用 BigDecimal。我建议您使用内存分析器来查找问题的真正原因。

一个例子

```
BigDecimal bd = BigDecimal.ZERO;
long l = 0;
double d = 0;
while (true) {
    for (int i = 0; i < 100000000; i++) {
        bd = bd.add(BigDecimal.ONE);
        l++;
        d++;
    }
    System.out.println("counting bd: " + bd + " l: " + l + " d:" + d);
} 
```

使用 BigDecimal、long 和 double 打印数字计数。double 的格式不同，但值相同。

```
counting bd: 100000000 l: 100000000 d:1.0E8
counting bd: 200000000 l: 200000000 d:2.0E8
counting bd: 300000000 l: 300000000 d:3.0E8
... deleted ...
counting bd: 1900000000 l: 1900000000 d:1.9E9
counting bd: 2000000000 l: 2000000000 d:2.0E9
counting bd: 2100000000 l: 2100000000 d:2.1E9
counting bd: 2200000000 l: 2200000000 d:2.2E9
... deleted ... 
```

即使`-mx2m`将堆限制为 2 MB，它也不会耗尽内存。

# php - 使用 htaccess 和 mod_rewrite 重写 URL 中的搜索词

> ID：12501155
> 
> 赞同：0
> 
> 时间：2012-09-19T19:00:12.080
> 
> 标签：php, apache, mod-rewrite

目前我有这个重写规则，它工作得很好：

```
RewriteRule ^search/([^/]+)/? search.php?term=$1 [NC,QSA] 
```

当我去它时，`mysite.com/search/foo`它会将我带到正确的搜索页面`foo`。我想做的是做相反的工作，这样如果我访问`mysite.com/search.php?term=foo`我就会被带到`mysite.com/search/foo`。我想我需要在某个地方进行 301 重定向，但我不确定如何在不创建无限循环的情况下做到这一点，而且到目前为止我读过的其他帖子并没有太大帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T21:07:23.333

尝试：

```
RewriteCond %{THE_REQUEST} ^[A-Z]{3,9}\ /search\.php\?term=([^&]+)
RewriteRule ^search\.php$ /search/%1/? [L,R=301] 
```

或（如果您将这些放在您已经拥有的规则*之后*

```
RewriteCond %{ENV:REDIRECT_STATUS} !200
RewriteCond %{QUERY_STRING} ^term=([^&]+)$
RewriteRule ^search\.php$ /search/%1/? [L,R=301] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T19:05:55.097

试试这个：

```
RewriteCond %{THE_REQUEST} ^[A-Z]{3,}\s/+mysite.com/search.php?term=foo [NC]
RewriteRule ^ mysite.com/search/foo [L,R=301] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-19T19:25:08.290

将`R`标志添加到您的`RewriteRule`：

```
RewriteRule ^search/([^/]+)/? search.php?term=$1 [NC,QSA,R=301] 
```

# c# - Oracle 插入期间 ASP.NET C# 缺少表达式错误

> ID：12501163
> 
> 赞同：3
> 
> 时间：2012-09-19T19:00:29.453
> 
> 标签：c#, asp.net, oledb

我可以先说这是我 10 年来第一次分配的数据库项目……而且是第一次在 C# 中进行。我“只是”尝试使用 OleDB 将表单数据插入到 Oracle 表中。

我不断收到“ORA-00936：缺少表达式”。下面是我的代码......知道缺少什么吗？

```
public string getConnString()
        {
            //set the connection string from web config file
            return WebConfigurationManager.ConnectionStrings["ConnString"].ConnectionString;
        }

        private void executeInsert(string EventType, string EventSubType, string DeptName, string EventDate, string Duration, string EventName, string EventAdd, string WardNo, string Program, string NumAtt, string StTime, string EndTime, string MngName, string RecKeeper)
        {
            OleDbConnection conn = new OleDbConnection(getConnString());
            string sql = "INSERT INTO APPS.CLV_EVENT_TRACK (EVENTTYPE, EVENTSUBTYPE, DEPTNAME, EVENTDATE, DURATION, EVENTNAME, EVENTADD, WARDNO, PROGRAM, NUMATT, STARTTIME, ENDTIME, MNGNAME, RECORDKEEPER) VALUES "
                + "(@EventType, @EventSubType, @DeptName, TO_DATE(@EventDate, 'Month dd, YYYY'), @Duration, @EventName, @EventAdd, @WardNo, @Program, @NumAtt, TO_DATE(@StTime, 'HH:MI:SS PM'), TO_DATE(@EndTime, 'HH:MI:SS PM'), @MngName, @RecKeeper)";

            try
            {
                conn.Open();
                OleDbCommand cmd = new OleDbCommand(sql, conn);
                OleDbParameter[] param = new OleDbParameter[14];
                param[0] = new OleDbParameter("@EventType", OleDbType.VarChar, 25);
                param[1] = new OleDbParameter("@EventSubType", OleDbType.VarChar, 80);
                param[2] = new OleDbParameter("@DeptName", OleDbType.VarChar, 240);
                param[3] = new OleDbParameter("@EventDate", OleDbType.Date);
                param[4] = new OleDbParameter("@Duration", OleDbType.Numeric);
                param[5] = new OleDbParameter("@EventName", OleDbType.VarChar, 80);
                param[6] = new OleDbParameter("@EventAdd", OleDbType.VarChar, 150);
                param[7] = new OleDbParameter("@WardNo", OleDbType.VarChar, 25);
                param[8] = new OleDbParameter("@Program", OleDbType.VarChar, 150);
                param[9] = new OleDbParameter("@NumAtt", OleDbType.Numeric);
                param[10] = new OleDbParameter("@StTime", OleDbType.Date);
                param[11] = new OleDbParameter("@EndTime", OleDbType.Date);
                param[12] = new OleDbParameter("@MngName", OleDbType.VarChar, 150);
                param[13] = new OleDbParameter("@RecKeeper", OleDbType.VarChar, 150);

                param[0].Value = EventType;
                param[1].Value = EventSubType;
                param[2].Value = DeptName;
                param[3].Value = EventDate;
                param[4].Value = Duration;
                param[5].Value = EventName;
                param[6].Value = EventAdd;
                param[7].Value = WardNo;
                param[8].Value = Program;
                param[9].Value = NumAtt;
                param[10].Value = StTime;
                param[11].Value = EndTime;
                param[12].Value = MngName;
                param[13].Value = RecKeeper;

                for (int i = 0; i < param.Length; i++)
                {
                    cmd.Parameters.Add(param[i]);
                }

                cmd.CommandType = System.Data.CommandType.Text;
                cmd.ExecuteNonQuery();
            }

            catch (Exception ex) { throw ex; }

            finally
            {
                conn.Close();
            }
        }

        protected void btnSubmit_Click(object sender, EventArgs e)
        {
            var start = DateTime.Parse(txtStTime.Text);
            var end = DateTime.Parse(txtEndTime.Text);

            TimeSpan duration = end.Subtract(start);
            string meetDuration = duration.TotalMinutes.ToString();

            executeInsert(rbEventType.SelectedItem.Text, ddVolType.SelectedItem.Text,
                txtDept.Text, txtEventDate.Text, meetDuration, txtEventName.Text,
                txtEventAdd.Text, ddWard.SelectedItem.Value, txtSBPlan.Text, txtNumVol.Text,
                txtStTime.Text, txtEndTime.Text, txtEventMgr.Text, txtRecording.Text);
        } 
```

**更新代码：**

```
public string getConnString()
        {
            //set the connection string from web config file
            return WebConfigurationManager.ConnectionStrings["ConnString"].ConnectionString;
        }

        private void executeInsert(string EventType, string EventSubType, string DeptName, string EventDate, string Duration, string EventName, string EventAdd, string WardNo, string Program, string NumAtt, string StTime, string EndTime, string MngName, string RecKeeper)
        {

            OleDbConnection conn = new OleDbConnection(getConnString());
            string sql = "INSERT INTO APPS.CLV_EVENT_TRACK (EVENTTYPE, EVENTSUBTYPE, DEPTNAME, EVENTDATE, DURATION, EVENTNAME, EVENTADD, WARDNO, PROGRAM, NUMATT, STARTTIME, ENDTIME, MNGNAME, RECORDKEEPER) VALUES "
                + "(@EventType, @EventSubType, @DeptName, TO_DATE(@EventDate, 'Month dd, YYYY'), @Duration, @EventName, @EventAdd, @WardNo, @Program, @NumAtt, TO_DATE(@StTime, 'HH:MI:SS PM'), TO_DATE(@EndTime, 'HH:MI:SS PM'), @MngName, @RecKeeper)";

            try
            {
                conn.Open();
                using (OleDbCommand cmd = conn.CreateCommand())
                {
                    cmd.CommandText = sql;

                    cmd.Parameters.AddRange(new OleDbParameter[]
                    {
                        new OleDbParameter("@EventType", EventType),
                        new OleDbParameter("@EventSubType", EventSubType),
                        new OleDbParameter("@DeptName", DeptName),
                        new OleDbParameter("@EventDate", EventDate),
                        new OleDbParameter("@Duration", Duration),
                        new OleDbParameter("@EventName", EventName),
                        new OleDbParameter("@EventAdd", EventAdd),
                        new OleDbParameter("@WardNo", WardNo),
                        new OleDbParameter("@Program", Program),
                        new OleDbParameter("@NumAtt", NumAtt),
                        new OleDbParameter("@StTime", StTime),
                        new OleDbParameter("@EndTime", EndTime),
                        new OleDbParameter("@MngName", MngName),
                        new OleDbParameter("@RecKeeper", RecKeeper)
                    });

                    cmd.ExecuteNonQuery();
                }
            }

            catch (Exception ex) { throw ex; }

            finally
            {
                conn.Close();
            }
        }

        protected void btnSubmit_Click(object sender, EventArgs e)
        {

            var start = DateTime.Parse(txtStTime.Text);
            var end = DateTime.Parse(txtEndTime.Text);

            TimeSpan duration = end.Subtract(start);
            string meetDuration = duration.TotalMinutes.ToString();

            executeInsert(rbEventType.SelectedItem.Text, ddVolType.SelectedItem.Text,
                txtDept.Text, txtEventDate.Text, meetDuration, txtEventName.Text,
                txtEventAdd.Text, ddWard.SelectedItem.Value, txtSBPlan.Text, txtNumVol.Text,
                txtStTime.Text, txtEndTime.Text, txtEventMgr.Text, txtRecording.Text);
        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T22:07:58.773

多么值得学习的一课。显然，必须将 ORACLE 参数表示为“？”

所以，我的最终代码......实际上成功插入了一条记录是：

```
public string getConnString()
        {
            //set the connection string from web config file
            return WebConfigurationManager.ConnectionStrings["ConnString"].ConnectionString;
        }

        private void executeInsert()    
        {
            OleDbConnection conn = new OleDbConnection(getConnString());
            string sql = "INSERT INTO APPS.CLV_EVENT_TRACK (EVENTTYPE, EVENTSUBTYPE, DEPTNAME, EVENTDATE, DURATION, EVENTNAME, EVENTADD, WARDNO, PROGRAM, NUMATT, STARTTIME, ENDTIME, MNGNAME, RECORDKEEPER) ";
            sql += "VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)";

            try
            {
                var start = DateTime.Parse(txtStTime.Text);
                var end = DateTime.Parse(txtEndTime.Text);

                TimeSpan duration = end.Subtract(start);
                string meetDuration = duration.TotalMinutes.ToString();

                conn.Open();
                using (OleDbCommand cmd = conn.CreateCommand())
                {
                    cmd.CommandText = sql;
                    cmd.Parameters.Add("?", OleDbType.VarChar).Value = rbEventType.SelectedItem.Text;
                    cmd.Parameters.Add("?", OleDbType.VarChar).Value = ddVolType.SelectedItem.Text;
                    cmd.Parameters.Add("?", OleDbType.VarChar).Value = txtDept.Text;
                    cmd.Parameters.Add("?", OleDbType.Date).Value = txtEventDate.Text;
                    cmd.Parameters.Add("?", OleDbType.Numeric).Value = meetDuration;
                    cmd.Parameters.Add("?", OleDbType.VarChar).Value = txtEventName.Text;
                    cmd.Parameters.Add("?", OleDbType.VarChar).Value = txtEventAdd.Text;
                    cmd.Parameters.Add("?", OleDbType.VarChar).Value = ddWard.SelectedItem.Value;
                    cmd.Parameters.Add("?", OleDbType.VarChar).Value = txtSBPlan.Text;
                    cmd.Parameters.Add("?", OleDbType.Numeric).Value = txtNumVol.Text;
                    cmd.Parameters.Add("?", OleDbType.Date).Value = txtStTime.Text;
                    cmd.Parameters.Add("?", OleDbType.Date).Value = txtEndTime.Text;
                    cmd.Parameters.Add("?", OleDbType.VarChar).Value = txtEventMgr.Text;
                    cmd.Parameters.Add("?", OleDbType.VarChar).Value = txtRecording.Text;

                    cmd.ExecuteNonQuery();
                }
            }

            catch (Exception ex) { throw ex; }

            finally
            {
                conn.Close();
            }
        }

        protected void btnSubmit_Click(object sender, EventArgs e)
        {
            executeInsert();
        } 
```

# python - 如何在 NLTK 中使用 CRF？

> ID：12501165
> 
> 赞同：4
> 
> 时间：2012-09-19T19:00:37.470
> 
> 标签：python, nltk, crf

在像 HMM 标注器这样的 NLTK 中，似乎也有 CRF 标注器。但我没有找到任何教程或帮助。我该怎么做？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2015-05-09T20:30:53.530

这个答案真的很晚，但如果你想举个例子，你可以在[这里](http://nbviewer.ipython.org/github/tpeng/python-crfsuite/blob/master/examples/CoNLL%202002.ipynb)找到一个。另请注意，此 CRF 接口不是[Mallet](http://mallet.cs.umass.edu/)的接口，但它是[CRFsuite的接口](https://github.com/chokkan/crfsuite)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-29T05:35:58.777

基于[此](http://nltk.org/_modules/nltk/tag/crf.html)，我推测 NLTK 中的 CRF 标记器只是[Mallet 的 CRF](http://mallet.cs.umass.edu/api/cc/mallet/fst/CRF.html)实现的一个接口。因此，我认为本教程使用[Mallet 的 CRF](http://mallet.cs.umass.edu/fst.php)可能会有所帮助，因为它将深入了解使 CRF 在 Mallet 中工作所需的步骤，并且 NLTK 模块应该以相同的方式进行。我也找不到任何关于 NLTK-CRF 的教程

# r - RStudio/knitr 默认 PDF 查看器设置？

> ID：12501166
> 
> 赞同：2
> 
> 时间：2012-09-19T19:01:04.400
> 
> 标签：r, pdf, knitr, rstudio

我正在使用 knitr 在 Mac OSX 10.8.1 上的 RStudio 中编织 .Rnw 文件。当我编译 PDF（使用 RStudio 中的按钮或 Cmd-Shift-i）时，会出现默认的 RStudio PDF 查看器，并且视图设置为“自动”。有没有办法可以将此视图设置为打开“页面适合”，例如？下面是一个小的工作 .Rnw 文件的内容。

谢谢，RTM

```
\documentclass[12pt]{article}

\title{Sweave Min}

\author{RTM}

\begin{document}

<<setup, include=FALSE, cache=FALSE>>=
  opts_chunk$set(fig.path='figs/', fig.align='center', fig.show='hold', echo=FALSE, include=FALSE)
options(replace.assign=TRUE, width=90)
@

\maketitle

<<min, include=TRUE>>= 
  x <- 1+1
print(x)
@

$x = \Sexpr{x}$

\end{document} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-19T21:46:12.393

根据您是否希望页面适合水平或垂直，您可以使用 LaTeX 包[hyperref](http://en.wikibooks.org/wiki/LaTeX/Hyperlinks)，例如

```
\usepackage{hyperref}
\hypersetup{pdfstartview=FitH} 
```

它还取决于 RStudio 的 PDF 查看器是否识别此设置。

或者您可以配置自己的 PDF 查看器，将默认视图设置为“Page Fit”，而不是使用 RStudio 的查看器。

# python - 'None' 是 Unicode 而不是 python sqlite3 中的 NoneType

> ID：12501167
> 
> 赞同：1
> 
> 时间：2012-09-19T19:01:06.223
> 
> 标签：python, sqlite

如果我有这样的声明：

```
cursor.execute("INSERT INTO MYTABLE(name, age, hair_color) VALUES (?, ?, ?)" , ("Alice", 24, None))

cursor.execute("SELECT * FROM MYTABLE WHERE Id=?", (1,))

print cursor.fetchone()[2] is None   # This is false! I want this to be true. 
```

检索 hair_color 将`u'None'`不是`NoneType`.

我知道我可以做一个简单的检查，看看它是否等于一个 unicode “None”，而不是指定这个条件，有没有办法告诉 python 我想要用 NoneType 替换具有“None”的字段我做一个 fetchone() 还是 fetchall()？

MYTABLE 是`(Id INTEGER PRIMARY KEY, name TEXT, age INTEGER, hair_color TEXT)`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-19T19:19:59.490

对不起，伙计们，我刚刚想通了。

事实证明，我必须明确告诉 sqlite3 我希望 python 在类型之间自动转换。

所以解决方案是这样做：

```
conn = sqlite3.connect(db, detect_types=sqlite3.PARSE_DECLTYPES) 
```

# javascript - 查找 html 块中最宽的单词的宽度

> ID：12501171
> 
> 赞同：7
> 
> 时间：2012-09-19T19:01:16.597
> 
> 标签：javascript, jquery, html, string, algorithm

目标是在这里找到最宽单词的宽度。

文本是由不同字体的单词组成的句子，如图所示。

![字体范围](../Images/d2f0731a76f2bb361a01f6a0dd11fe08.png) html看起来像：

```
<span style="font:bold 14px Verdana;">LONGESTW</span>
<span style="font:bold 42px Verdana;">ORD</span>
<span style="font:bold 14px Verdana;">&nbsp;</span>
<span style="font:bold 24px Verdana;">ORD</span>
<span style="font:bold 14px Verdana;">&nbsp;</span>
<span style="font:bold 24px Verdana;">regular</span>
<span style="font:bold 14px Verdana;">&nbsp;</span>
<span style="font:bold 32px Verdana;">w</span>
<span style="font:bold 96px Verdana;">id</span>
<span style="font:bold 64px Verdana;">est</span> 
```

所以，这里的第三个词是最宽的。有任何想法吗？一切都是 html，我们可以使用任何东西（jquery、ES5 技术等）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T19:20:11.420

我认为这假装是一个解决方案。

[http://jsfiddle.net/WtcEQ/4/](http://jsfiddle.net/WtcEQ/4/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T20:29:31.763

尝试下面的解决方案，它基本上遍历所有跨度并找到最长的单词。

```
$(function () {
    var max = 0, sum = 0, lword = '', mword = '';

    var $span = $('span');
    $.each($span, function (idx, el) {

        var elTxt = $(el).text().trim();

        if (elTxt) {
            sum += $(this).width();
            lword += $(this).text();
        }

       if (!elTxt || $span.length == (idx+1) ) {
            if (sum > max) {
                max = sum;
                mword  = lword;
            }
            sum = 0;
            lword = '';
        }
    });

    alert(mword + ' ' + max);
}); 
```

**演示：http:** [//jsfiddle.net/WtcEQ/32/](http://jsfiddle.net/WtcEQ/32/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-12-01T03:01:33.463

可以[`max-content`](https://developer.mozilla.org/en-US/docs/Web/CSS/max-content)用来测量文本的像素宽度。

```
function measureLongestWordPxWidth(template) {
  const measurer = template.cloneNode(true);
  measurer.style.setProperty("position", "position", "important");
  measurer.style.setProperty("visibility", "hidden", "important");
  measurer.style.setProperty("width", "max-content", "important");

  document.body.appendChild(measurer);
  const { width } = measurer.getBoundingClientRect();
  document.body.removeChild(measurer);
  return width;
}

const spans = [...document.querySelectorAll('span')];
const widths = spans.map(measureTextPxWidth);
const maxWidth = Math.max(...widths);
const maxWidthIndex = widths.indexOf(maxWidth)
const maxWidthText = spans[maxWidthIndex].innerText

document.querySelector('.output').innerText = 
  `"${maxWidthText}": ${maxWidth}px`
```

```
<span style="font:bold 14px Verdana;">LONGESTW</span>
<span style="font:bold 42px Verdana;">ORD</span>
<span style="font:bold 14px Verdana;">&nbsp;</span>
<span style="font:bold 24px Verdana;">ORD</span>
<span style="font:bold 14px Verdana;">&nbsp;</span>
<span style="font:bold 24px Verdana;">regular</span>
<span style="font:bold 14px Verdana;">&nbsp;</span>
<span style="font:bold 32px Verdana;">w</span>
<span style="font:bold 96px Verdana;">id</span>
<span style="font:bold 64px Verdana;">est</span> 

<div class="output"></div>
```

# javascript - 与溢出到 x 和 y 相比，具有滚动功能以停止滚动的溢出 -x 是错误的

> ID：12501173
> 
> 赞同：0
> 
> 时间：2012-09-19T19:01:22.883
> 
> 标签：javascript, jquery, function, scroll, overflow

好的，所以我在 Safari 中测试它，我确定它在其他浏览器中是一样的，但我还没有检查（还）！

这段脚本效果很好，一点也不杂乱无章：

```
$('body').css('overflow', 'hidden');
$(window).scroll(function() {
  $(this).scrollTop(0).scrollLeft(0);
}); 
```

这就是我所需要的，但是当您尝试滚动时，它似乎非常错误和混乱，它会滚动一点并且会自行更正（在大约 100 毫秒内），而上面的脚本根本不允许您滚动。

```
$('body').css('overflow-x', 'hidden');
$(window).scroll(function() {
  $(this).scrollLeft(0);
}); 
```

这是一个已知的错误还是根本有修复？

**编辑：** 对于那些正在寻找答案的人来说，实际上没有答案。这只是 Safari 中的一个已知错误（很可能也仅在 Mac 上）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T19:57:27.120

溢出：隐藏的整个想法是它不会滚动。因此，您隐藏了滚动条。试试 overflow-x:auto 看看滚动是否仍然紧张。如果这最终起作用，您可以使用类似[此示例的内容隐藏滚动条](https://stackoverflow.com/questions/12186100/using-jquery-to-hide-div-scrollbar-but-retain-scrolling/12186279#12186279)

**编辑：**为什么不把 .inside 放在溢出：通过样式隐藏（这样你就不需要 scrollTop 功能。然后当你需要滚动区域时，你可以使用 jQuery 更新 CSS 以使其重新溢出：汽车。

这是否违背了您尝试编码的任务的全部目的？

# c# - 在 Windows 8 桌面应用程序的默认浏览器中打开 URL

> ID：12501174
> 
> 赞同：12
> 
> 时间：2012-09-19T19:01:21.773
> 
> 标签：c#, .net, windows-8

我正在使用`System.Diagnostics.Process.Start`从桌面应用程序启动默认浏览器来访问链接，如下所示。这是在 Windows 8 Pro RTM 上使用 C# 和 .NET 4.0。

```
System.Diagnostics.Process.Start(new ProcessStartInfo
{
    FileName = @"http://www.google.com",
    UseShellExecute = true
}); 
```

这在 Windows 7 下工作正常，但在 Windows 8 下我得到一个可以在 LINQPad 中重现的异常。例外情况是：

`UseShellExecute = true`给出 Win32Exception: 类未注册。 `UseShellExecute = false`给出 Win32Exception: 系统找不到指定的文件。

如何在默认浏览器中打开 URL？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-09-19T19:28:39.403

仅适用于**WinRT 应用程序**，这很简单

```
Launcher.LaunchUriAsync(new Uri("http://www.google.com")); 
```

看看[这里](http://msdn.microsoft.com/en-us/library/windows/apps/windows.system.launcher.aspx)。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-19T08:20:26.700

好像需要在win8下指定进程名。下面的答案来自[Armin](https://stackoverflow.com/users/121028/armin)[在此处](https://stackoverflow.com/a/12248929/2608)的回答。

```
var startInfo = new ProcessStartInfo("explorer.exe", @"http://www.google.com");
Process.Start(startInfo); 
```

# scala - Scala 二进制序列化库

> ID：12501175
> 
> 赞同：14
> 
> 时间：2012-09-19T19:01:29.340
> 
> 标签：scala, serialization

我有兴趣就 Scala 数据结构序列化选项征求意见。我想找到足够开发的东西，以允许（如果可能）对 Scala 集合类型进行有效的二进制序列化（即不使用通用 Java 反射 - 我不想序列化集合类的所有部分，包括内部簿记数据），但也允许我为自己的目的/类扩展功能：我非常高兴必须为我们自己的每个类编写序列化代码，但宁愿不必为来自 Scala 的集合执行此操作标准库。[在 C++ 中，我从Boost 序列化库](http://www.boost.org/doc/libs/1_51_0/libs/serialization/doc/index.html)中获得了很多这种功能。

我过去使用过[SBinary](http://code.google.com/p/sbinary/wiki/IntroductionToSBinary)，它做了一些我想做的事情，但没有得到明显的主动维护，而且似乎（afaik）没有跟踪已经序列化的对象（例如，用于 DAG 或循环数据结构）。

是否有其他特定于 Scala 的解决方案，或者如果没有，您对高效二进制序列化有何建议？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T23:35:15.567

可能，如果您只需要序列化数据而不是整个 java 对象，最好的解决方案是：

*   [msgpack](http://msgpack.org/)（[实现](https://github.com/msgpack/msgpack-scala)），
*   [BSON](http://bsonspec.org/)（[实现](https://github.com/havocp/beaucatcher/tree/master/bobject/src/main/scala/org/beaucatcher/bobject)），
*   [协议缓冲区](https://github.com/SandroGrzicic/ScalaBuff)。

我在几个项目中使用`msgpack`和`bson`，它们工作得很好。我真的推荐`msgpack`- 具有最有效的二进制表示（这三个）并且完全兼容 JSON。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T12:14:45.800

Scala 的协议缓冲区编译器：[https](https://github.com/SandroGrzicic/ScalaBuff) ://github.com/SandroGrzicic/ScalaBuff - 也许这有帮助？

此页面底部还有几个其他链接：http: [//doc.akka.io/docs/akka/snapshot/scala/serialization.html](http://doc.akka.io/docs/akka/snapshot/scala/serialization.html)

# database - DB2 Case/Cast in Where 语句

> ID：12501177
> 
> 赞同：1
> 
> 时间：2012-09-19T19:01:40.120
> 
> 标签：database, casting, db2, case, where-clause

以下查询（精简）有一个字符串需要转换为整数，但并非该字段中的所有条目都有值。int 的 cast/case 在语句的 select 部分中可以正常工作，但是在 where 语句中它会失败。我正在帮助一位同事，并一直保持空白，为什么这不起作用。有什么想法吗？

```
SELECT cast((case when item = ' ' then 0 else item end) as  int) as newNumber 
FROM tablename 
WHERE cast(trim(case when item = ' ' then 0 else item end) as INT) < 600 
```

这是错误

```
Invalid character found in a character string argument of the function DECFLOAT 
```

**仅在添加WHERE**语句时才会引发错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T17:25:41.577

```
WITH
  Q1 (ITEM) AS
     (VALUES ' ', '1', '2', '3', 'DFSDF', '601'),
  Q2 (ITEM) AS
     (SELECT INTEGER(CASE WHEN ITEM = ' ' THEN '0' ELSE ITEM END) AS NEWNUMBER
        FROM Q1
        WHERE TRIM(TRANSLATE(ITEM, '', '0123456789')) = '')
SELECT *
  FROM Q2
  WHERE Q2.ITEM < 600 
```

# c# - 在 Entity Framework 5.0 中数据绑定 linq 查询到 datagridView

> ID：12501183
> 
> 赞同：6
> 
> 时间：2012-09-19T19:02:00.840
> 
> 标签：c#, entity-framework, entity-framework-5

我正在学习实体框架（5.0 和 VSExpress 2012），并且在将查询绑定到 WinForms 中的 dataGridView 时遇到了真正的麻烦。我有以下代码，当我启动应用程序时它显示我的查询正常，但我不知道在更改底层数据库中的数据后我需要做什么来更新 dataGridView。这样做的最佳方法是什么？我在这里做错了什么？

```
private void Form1_Load(object sender, EventArgs e)
    {
        using( var ctx = new TimeKeepEntities())
        {

            var qLoggedIn = from r in ctx.tblTimeRecords
                        where (r.tblEmployee.Active && !r.ClockOut.HasValue) || System.Data.Objects.EntityFunctions.DiffDays(r.ClockOut, DateTime.Now)<30
                        select new { Name = r.tblEmployee.Last + ", " + r.tblEmployee.First, r.tblProject.ProjName, r.ClockIn, r.ClockOut };

            dataGridView1.DataSource = qLoggedIn.ToList();

        }
    } 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-19T20:16:55.517

Pho 请注意，他们使用的是 winforms 而不是 asp.net。根据 MSDN，您可以执行以下操作：

```
BindingSource bindingSource1 = new BindingSource();
bindingSource1.DataSource = (from r in ctx.tblTimeRecords
                        where (r.tblEmployee.Active && !r.ClockOut.HasValue) || System.Data.Objects.EntityFunctions.DiffDays(r.ClockOut, DateTime.Now)<30
                        select new { Name = r.tblEmployee.Last + ", " + r.tblEmployee.First, r.tblProject.ProjName, r.ClockIn, r.ClockOut }).ToList();

dataGridView1.DataSource = bindingSource1; 
```

参见：[msdn 文档](http://msdn.microsoft.com/en-us/library/system.windows.forms.datagridview.datasource%28v=vs.100%29.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T19:20:09.480

您必须将数据绑定到`dataGridView1.DataBind();`：

```
...
dataGridView1.DataSource = qLoggedIn.ToList();
dataGridView1.DataBind();
... 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-19T20:49:26.130

.Net 使用断开连接的模型。当您从数据库中获取信息时，它是该时间点的快照。如果您更改底层数据存储中的数据，除非您明确地重新查询数据库并重新绑定您的 UI，否则这些更改不会反映。

当您在 UI 中保存更改时，EF 可以检查是否有其他人更改了您正在修改的行（出于并发问题），并让您知道是否存在潜在冲突。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-11-01T10:29:55.323

```
 IEnumerable<DataRow> query =( from p in orginalList.AsEnumerable()
                                    where p.Field<long>("Category") == 2
                                    select p).ToList();
                        DataTable boundTable = query.CopyToDataTable<DataRow>();

                        dataGridView1.AutoGenerateColumns = false;

                        dataGridView1.DataSource = boundTable; 
```

# ruby - watir webdriver ruby 上的 Nomethoderror

> ID：12501185
> 
> 赞同：-1
> 
> 时间：2012-09-19T19:02:14.257
> 
> 标签：ruby, watir, watir-webdriver

我是 Watir 的新手。当我在终端运行这个文件时，ruby TestJoinChange.rb，我得到 NoMethodError

```
require 'rubygems'
require 'test/unit'
require 'watir-webdriver'
browser = Watir::Browser.new

class TestJoinChange < Test::TestCase
  def test_join(logintype,usr,pwd)
    # open browser to page
    @browser.goto 'http://change.com'
  end
end 
```

如何传递参数值？为什么我的函数没有返回任何方法错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T09:20:53.663

“您现在已经定义了子程序，您可以在调用该子程序时通过创建类的对象来传递值。”

你的代码：

```
require 'rubygems'
require 'test/unit'
require 'watir-webdriver'
browser = Watir::Browser.new

class TestJoinChange < Test::TestCase
  def test_join(logintype,usr,pwd)
    # open browser to page
    @browser.goto 'http://change.com'
  end
end 
```

现在只需为您的类创建一个对象：

```
 obj = TestJoinChange.new    
# it will create object for your class and now call the subroutine and pass any value in that#
    obj.test_join("logintype_value", "user", "password") 
```

现在，您可以通过将所有传递的值存储到变量中来使用类中的值。

# c++ - 遍历 const boost::graph 的边权重

> ID：12501188
> 
> 赞同：6
> 
> 时间：2012-09-19T19:02:18.760
> 
> 标签：c++, boost-graph

我需要遍历图的边缘并检查每条边缘的权重。我没有修改边缘，因此我的函数需要对图形进行 const 引用。但是，我知道获得边缘权重的唯一方法是访问属性映射，这似乎违反了 const-ness。

```
void printEdgeWeights(const Graph& graph) {
  typedef Graph::edge_iterator EdgeIterator;
  std::pair<EdgeIterator, EdgeIterator> edges = boost::edges(graph);

  typedef boost::property_map<Graph, boost::edge_weight_t>::type WeightMap;
  // The following line will not compile:
  WeightMap weights = boost::get(boost::edge_weight_t(), graph);

  EdgeIterator edge;
  for (edge = edges.first; edge != edges.second; ++edge) {
    std::cout << boost::get(weights, *edge) << std::endl;
  }
} 
```

所以我必须这样做：

```
Graph& trust_me = const_cast<Graph&>(graph);
WeightMap weights = boost::get(boost::edge_weight_t(), trust_me); 
```

有没有办法避免这种情况？

附带说明一下，属性映射查找会是恒定时间吗？

作为参考，这是我对 Graph 的定义。

```
struct FeatureIndex { ... };
typedef boost::property<boost::vertex_index_t, int,
                        FeatureIndex>
        VertexProperty;
typedef boost::property<boost::edge_index_t, int,
        boost::property<boost::edge_weight_t, int> >
        EdgeProperty;
typedef boost::subgraph<
          boost::adjacency_list<boost::vecS,
                                boost::vecS,
                                boost::undirectedS,
                                VertexProperty,
                                EdgeProperty> >
        Graph; 
```

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-21T21:33:45.170

为了将来参考，我找到了它。这行不通

```
const boost::property_map<Graph, boost::edge_weight_t>::type 
```

但是 property_map 定义了一个 const_type

```
boost::property_map<Graph, boost::edge_weight_t>::const_type 
```

get() 的文档在此页面上：http: [//www.boost.org/doc/libs/1_51_0/libs/graph/doc/adjacency_list.html](http://www.boost.org/doc/libs/1_51_0/libs/graph/doc/adjacency_list.html)

# facebook - Facebook 推荐忽略 og:title 直到页面刷新

> ID：12501196
> 
> 赞同：3
> 
> 时间：2012-09-19T19:02:42.057
> 
> 标签：facebook, facebook-like

我有 Facebook 推荐按钮的典型 HTML5 实现：

```
<div id="fb-root"></div>
<script type="javascript">
(function(d, s, id) {
    var js, fjs = d.getElementsByTagName(s)[0];
    if (d.getElementById(id)) return;
    js = d.createElement(s); js.id = id;
    <? if ( $current_language == 'en' ): ?>
        js.src = "//connect.facebook.net/en_US/all.js#xfbml=1";
    <? else: ?>
        js.src = "//connect.facebook.net/fr_CA/all.js#xfbml=1";
    <? endif; ?>
    fjs.parentNode.insertBefore(js, fjs);
} (document, 'script', 'facebook-jssdk'));
</script>

<div class="share_button facebook" id="facebook">
    <div class="fb-like" data-send="false" data-layout="button_count" data-width="80" data-show-faces="false" data-action="recommend"></div>
</div> 
```

第一次点击，弹出的预览框不显示标题或描述。我在页面顶部有以下信息：测试

```
<meta http-equiv="Content-Script-Type" content="text/javascript" />
<meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1" />
<meta name="description" content="Test website." />
<meta name="keywords" content="test whatever" />
<meta property="og:title" name="Show this!" content="Show this!" /> 
```

如果我离开该页面，请从 Facebook 取消推荐该页面并返回同一页面并再次按“推荐”，然后会出现标题和描述。该页面显示了数千个数据库条目之一，因此需要修复该问题。我尝试将 js 函数放入 jQuery(document).ready(function() - 不走运。我尝试将它移到页面底部 - 不走运。有人可以帮我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T15:23:51.773

从您提供的示例中，您缺少一些必需的 OG 标签，例如 URL 和图像。另外，你的头标签上有前缀信息吗？

```
<head prefix="og: http://ogp.me/ns# fb: http://ogp.me/ns/fb# myspecialapp: http://ogp.me/ns/fb/myspecialapp#"> 
```

# sql - 创建具有重复记录的表？

> ID：12501197
> 
> 赞同：0
> 
> 时间：2012-09-19T19:02:43.597
> 
> 标签：sql, oracle

我在暂存环境中发现了重复记录

```
SQL> SELECT COUNT(*) 
  2  FROM MASTER_CHILD_MERGE A 
  3  WHERE  A.CAM_ID IN (SELECT B.CAM_ID FROM CAM_DIM B);
SQL> 703022 
```

对于我们团队中的分析师，我想创建一个包含 A 和 B 列的表。我试着这样做

```
SQL> CREATE TABLE DUPES AS 
  2  SELECT * FROM NDS_MASTER_CHILD_MERGE A  
  3  WHERE  A.CAM_ID IN (SELECT B.CAM_ID FROM CAM_DIM B); 
```

但我意识到它只会给我 A 的专栏。如何也添加 B 的列？我很确定这是一个明显的解决方案，但我没有看到它......

我在 Oracle 10g 上。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T19:04:57.280

只需加入这两个表

```
create table dupes as 
  select * 
   from nds_master_child_merge a
   join cam_dim b 
     on a.can_id = b.cam_id 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T19:06:02.430

```
SELECT A.*, B.* INTO DUPES
FROM NDS_MASTER_CHILD_MERGE AS A INNER JOIN CAM_DIM AS B ON A.CAM_ID = B.CAM_ID 
```

# amazon-s3 - 为什么我的网站图标出现在 Amazon S3 终端节点上，但没有出现在转发域上？

> ID：12501201
> 
> 赞同：5
> 
> 时间：2012-09-19T19:02:56.723
> 
> 标签：amazon-s3, favicon

我已经尝试了所有可能的方法，但我不知道为什么我的网站图标仍然没有出现。如果我告诉你我花了多少时间试图弄清楚这一点，你就会明白为什么我正处于失去理智的边缘。

这是纲要[我不是技术人员-刚开始学习，所以请多多包涵]：

我使用 Amazon S3 作为我的主机。GoDaddy 是 DNS，我使用掩码设置进行转发，以便将亚马逊端点定向到实际域。

这是奇怪的事情——网站图标出现在亚马逊端点上，但没有出现在我希望它出现的转发域上。当我使用 Dreamweaver 进行一些测试时，网站图标也会出现。

我可以向您保证，清除缓存不是问题，因为我已经做了很多次并且已经运行测试以确保它正常工作。我已经尝试了所有可能的不同类型的代码变体，但没有任何效果。我被引导相信这不是代码、缓存、文件的问题，而是我知识范围之外的其他问题。

所以我来到了 Stackoverflow。

请 - 任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2017-11-25T20:52:34.850

对于遇到此类问题的任何人 - 将网站图标公开并使用在 s3 上的文件属性中找到的直接链接具有魅力。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T19:39:01.047

这意味着使用始终可以在任何地方工作的完整 URL。根据设置的方式，主机名可以解析为多台机器上的 localhost 之类的东西，因此您要确保您使用的主机名始终具有该位置的资源。CORS 应该与它有关，因为它是标准的完整 GET 请求。

# mysql - 列出按外键表中最常见行衡量的前 5 个用户

> ID：12501204
> 
> 赞同：4
> 
> 时间：2012-09-19T19:03:03.413
> 
> 标签：mysql, join

这是我的数据库结构的图片：

![观察记录——数据库结构](../Images/70b8d0e028d3b6c22c5809a6cb1c719a.png)

![标准](../Images/faa2a95414b608c92d1a85ca68f0fb1e.png)

当我输入**Observation**时，我将一行输入到`Observations`0、1 或更多行到`Criteria`.

我正在尝试编写一个 SQL 语句，它允许我**在特定条件下选择最强的 5 位教师**。

例如，我点击`Questioning`（可能有`ID`in `5`）`Criteria_Labels`，我想返回 5 位教师（`Teacher_ID`from ）的列表，他们在 in 中`Observations`的行数最多。`Criteria_ID = 5``Criteria`

我试图写的声明如下：

```
SELECT t.Name AS Teacher_Name
FROM observations o
LEFT JOIN teachers t ON o.Teacher_ID = t.Teacher_ID
LEFT JOIN criteria c ON o.ID = c.Observation_ID
WHERE c.Criteria_ID = 5
ORDER BY COUNT(c.Criteria_ID) DESC
LIMIT 0,5 
```

但是，它似乎只返回了一名工作人员。我不确定我是否完全正确，但希望我是正确的。

任何人都可以帮忙吗？提前致谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T19:21:49.230

```
SELECT t.Teacher_ID, t.Name AS Teacher_Name, count(*) as total
FROM observations o
LEFT JOIN teachers t ON o.Teacher_ID = t.Teacher_ID
LEFT JOIN criteria c ON o.ID = c.Observation_ID
WHERE c.Criteria_ID = 5
group by t.Teacher_ID, t.Name
order by total desc
limit 5 
```

# java - 使用 Java 进行基本调试

> ID：12501206
> 
> 赞同：-7
> 
> 时间：2012-09-19T19:03:04.990
> 
> 标签：java, debugging

我不知道如何解决这些错误：

1.  类或接口预期错误
2.  包不存在
3.  找不到标志
4.  类型的非法开始
5.  无法访问 java.lang

如何更好地了解我的代码中出现问题的地方？如何调试这些问题？

这是我的代码：

```
import java.io.*;

public class ResourcesTesterApp {
    public static void main(String[] args) {
        String s1 = readLineWithResources();
        String s2 = readLineWithFinally();
    }

    public static String readLineWithResources() {
        System.out.println("Starting readLineWithResources method.");

        try (RandomAccessFile in = new RandomAccessFile("products.ran", "r")) {
            return in.readLine();   
        }} catch (IOException e) {
            System.out.println(e.toString());
        }
    }

    public static String readLineWithFinally() {
        System.out.println("Starting readLineWithFinally method.");
        RandomAccessFile in = null;
        String s = null;

        try {
            in = new RandomAccessFile("products.ran", "r");
            s = in.readLine();
        } catch (IOException e) {
            System.out.println(e.toString());
        } finally {
            if (in != null) {
                try {
                    in.close();
                    System.out.println("RandomAccessFile closed");
                } catch (IOException e) {
                    System.out.println("RandomAccessFile " + e.getMessage());
                }
            }
        }
        return s;
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-19T19:59:19.540

您的问题是如何更好地理解和调试这些错误。好吧，我只能说，看看实际的错误消息输出，它通常会包含一个行号。现在您可以查看特定的代码行，看看您是否能发现问题所在。

我不知道您问题中代码的格式是否来自将其粘贴到 stackoverflow.com 的失败尝试，或者这也是您使用它的方式，但您应该正确格式化它，这将有助于发现问题。例如，当我直接在上面格式化您的代码时，您可以看到一个额外的右花括号。

一旦你有了实际的错误信息和行号等，你最好的办法是用谷歌搜索错误并尝试理解它的含义。一旦你用尽了那个途径，回到这里并制定一个具体的问题，准确地显示错误消息是什么以及你正在运行的代码。避免像您在此处所做的那样将许多问题归为一个问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T19:51:45.163

1.  这通常意味着您在方法之外编写代码。
2.  这仅仅意味着您引用了 java 编译器找不到的包。
3.  这意味着您编写了一个不存在的变量。
4.  这通常意味着你没有完成一个陈述，你开始写下一个。
5.  这个我不知道，也许更具体一点？

我强烈建议您看一下 java 教程，并按照他们的示例进行操作。您可以在[http://docs.oracle.com/javase/tutorial/找到它们](http://docs.oracle.com/javase/tutorial/)

# salesforce - 顶点：visualforce组件中的commandButton不调用控制器方法

> ID：12501210
> 
> 赞同：3
> 
> 时间：2012-09-19T19:03:25.130
> 
> 标签：salesforce, apex-code, visualforce

我在 visualforce 组件中有一个命令按钮。预期的行为是调用控制器方法。页面刷新了，但是`{!performUnlinkContact}`没有调用commandButton中注册的方法。奇怪的是，如果我将按钮放在基本 visualforce 页面上，它会按预期调用控制器方法 - 但在组件中时，它不会。

这是我的组件：

```
<apex:component >
    <apex:attribute name="rk" description="RK Base Contact Data"  type="Object" required="true"/>

    <div class="unlinkBox">
        <div class="unlinkHeader">
            <div class="unlinkHeaderLeft">Wrong Contact?</div>
            <div class="unlinkHeaderRight"><a href=""  onclick="return hideUnlinkPanel()"><apex:image style="cursor: pointer;" value="{!$Resource.x}" alt="Close Panel" /></a></div>
        </div>
        <div class="unlinkBody">
            <div class="unlinkBodyLeft">
                Click Yes if the Contact displayed is incorrect.<br/><br/>You will be given the opportunity to link to a different Contact.
            </div>
            <div class="unlinkBodyRight">
                <apex:outputpanel id="callMethod">
                    <apex:commandbutton value="Yes, this is the wrong contact" action="{!performUnlinkContact}" rerender="" status="myDisplayStatus" />&nbsp;&nbsp;&nbsp;&nbsp;<a onclick="return hideUnlinkPanel()" style="color:blue;cursor:pointer;text-decoration:underline">No</a>
                </apex:outputpanel>
                <apex:actionStatus id="myDisplayStatus"  startText="(performing Contact Unlink...)"  stopText=""/>
            </div>
        </div>
    </div>
</apex:component> 
```

这是控制器扩展中的方法：

```
public PageReference performUnlinkContact() {
     System.debug('==================================!!performUnlink');
    if (this.thisLead.rkContactId__c != 0) {
        this.thisLead.rkContactId__c = 0;

        update this.thisLead;
    }

    return null;
} 
```

我确定我一定是做错了什么，因为我是 salesforce 的新手并且仍在学习，但是当我搜索如何解决这个问题时，我找不到任何相关的问题。在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T14:57:50.423

感谢您的回复 - 为了解决问题，我最终向基本页面添加了一个 actionFunction，然后只需通过按钮的 onclick 事件在组件中调用此函数：

基本页面中的代码：

```
 <apex:actionFunction name="doUnlink" action="{!performUnlinkContact}" rerender="refresh" status="myStatus"/> 
```

在组件中调用函数的代码：

```
 <input type="button" value="Yes, this is the wrong contact" onclick="doUnlink();" /> 
```

到目前为止，这种方法似乎效果很好。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-01-07T18:15:57.203

您还可以使用 ApexPages.Action 类型的 apex:attribute 将 performUnlinkContact() 的引用传递给组件，然后当您的 commandButton 使用此引用时，它将调用页面控制器中定义的方法。

```
<apex:component>
    <apex:attribute name="performUnlinkContact" type="ApexPages.Action" description="Passing method from controller"/>
    <!-- your stuff here -->
</apex:component> 
```

然后，当您使用组件时，您必须像这样填充该属性：

```
<c:MyComponent performUnlinkContact="{!performUnlinkContact}" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-20T10:14:28.400

我认为`rerender=""`这不是一种伪造 reRender 命令的方法。我会用`rerender="none"`.

# python - 基于 Python 区间的稀疏容器

> ID：12501219
> 
> 赞同：1
> 
> 时间：2012-09-19T19:04:01.537
> 
> 标签：python, data-structures, numpy, nlp, nltk

我正在尝试在结构化数据和`NLTK`. `NLP`图书馆通常使用词袋，因此我需要将我的结构化数据变成词袋。

我需要将单词的偏移量与其元数据相关联。因此，我最好的选择是拥有某种容器，将范围作为键（允许嵌套范围）并可以检索所有元数据（如果单词偏移量则为多个是嵌套范围的一部分）。

我可以拾取什么代码可以有效地做到这一点（即数据的稀疏表示）？高效，因为我的全球语料库至少有几百兆字节。

笔记 ：

*   我正在序列化结构化的论坛帖子。其中将包括带有引号部分的帖子。我想知道一个词属于哪个主题，以及它是引用还是用户文本。随着我的工作进展，可能会有额外的元数据。请注意，属于引用的单词是我所说的嵌套元数据，因此该单词是引用的一部分，属于用户发表的帖子。

*   我知道可以在`NLTK`我没有研究过的情况下标记单词，如果可以这样做，请发表评论。但我仍在寻找原始方法。

*   可能有一些东西`numpy`可以解决我的问题，现在看看

**编辑**

输入数据过于复杂，无法删除和发布。我找到了我正在寻找的东西[http://packages.python.org/PyICL/](http://packages.python.org/PyICL/)。我需要谈论间隔而不是范围：DI 已经广泛使用了 boost，但是使依赖关系让我有点不安（遗憾的是，我在 PyICL 中遇到编译器错误 :( ）。

**现在的问题是：**任何人都知道可以用于以稀疏方式索引嵌套间隔的间隔容器库或数据结构。或者换一种说法，提供与 boost.icl 相似的语义

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T15:51:16.677

如果您不想使用`PyICL`或`boost.icl`不依赖专门的库，您可以使用 sqlite3 来完成这项工作？如果您使用 in0memory 版本，它仍然会比`boost.icl`（根据编码其他数据结构与 sqlite3 的经验）慢几个数量级，但应该比`std::vector`在 python 容器之上使用 c++ 样式方法更有效。

您可以使用两个整数并`date_type_low < offset < date_type_high`在 where 子句中使用谓词。并且根据您的表结构，这将返回嵌套/重叠范围。

# spray - 如何生成 URL 以链接回对象？

> ID：12501223
> 
> 赞同：3
> 
> 时间：2012-09-19T19:04:52.693
> 
> 标签：spray

我正在尝试使用喷雾构建一些 RESTful 服务。我已经弄清楚如何构建我需要的指令。但我遇到的问题是如何可靠地生成返回到我正在使用的“资源”的 URL。注意我在这里使用术语“资源”，因为它用于 RESTful API（即通过 API 引用的服务器端对象）。

我查看了文档，除了提到 Java 意义上的“资源”（即类路径中的数据文件）之外，我没有找到任何参考资料。

当然，我可以构建一个将“/items/127”映射到服务器端资源的指令。但是我看不到如何在 Spray 中做（至少以安全和自动的方式）是如何在给定服务器端资源的情况下生成这样的 URL。我正在寻找类似于`url_for`Flask 框架的东西。

现在，我正在编写函数来做到这一点。但是，当然，它们很脆弱，因为它们不是 DRY（即它们在生成 URLS 时没有使用任何喷雾路由知识）。

我错过了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-11-24T15:41:41.350

您所要求的称为反向路由。正如@iwein 所说，Spray 中没有直接支持反向路由。您可以[在此线程中从 Matthias](https://groups.google.com/forum/#!searchin/spray-user/reverse$20routing/spray-user/S0dGTKUcrOE/kVO0CctQXFsJ)确认这一点。这个问题有一张[公开的票](https://github.com/spray/spray/issues/941)。

但是，有一种方法基于 Marcel Mojzis 开源的 PathMatcher，您可以在[此处](https://bitbucket.org/binarycamp/spray-contrib/src/master/spray-data/src/main/scala/binarycamp/spray/data/ResourceLocator.scala)找到。

我也有这个需求，但我将采用“已知模式”的方法，直到 Spray（或 akka-http）提出自己的解决方案来解决这个问题。本质上，我有一个对象知道如何为某些事物模式生成 URL。每个模式都是一个函数，对象的客户端必须通过其中一个函数名称来请求 url。不理想，但在 akka-http 提供更通用的解决方案之前非常简单有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-22T18:42:56.287

我不认为 Spray 有 url_for 的等价物。我认为这在 Spray 的上下文中没有意义，因为在 Spray 中，您不是用映射到它们的 url 来注释函数，而是在创建反序列化请求并最终将它们映射到函数的路由。

因此，没有简单的方法可以从函数名称生成示例 url。

# html - Twitter引导程序，按钮悬停样式？

> ID：12501224
> 
> 赞同：16
> 
> 时间：2012-09-19T19:04:53.880
> 
> 标签：html, css, twitter-bootstrap, less

我正在尝试为我的按钮使用渐变样式，但是，悬停样式有问题，这是悬停之前的按钮：

![在此处输入图像描述](../Images/e54dfe4f66ecacca6e85c87394d61681.png)

这是悬停之后：

![在此处输入图像描述](../Images/e26c9aea0d0b8e05d2f8329de6d8da19.png)

这是按钮的haml：

```
= link_to '#', {:class=>'tour_btn btn btn-large btn-primary', :style=>'margin-left: 10px; width: 105px;'} do
        %h3
          Take a Tour 
```

较少的：

```
.tour_btn {
    #gradient > .vertical(#F98C51, #a35b35);
} 
```

请问有什么想法吗？是否可以为悬停状态指定另一种渐变样式？或者至少，悬停时不要更改按钮？

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-09-19T20:00:21.050

Twitter Bootstrap`background-position`使用过渡动画悬停（因为背景渐变不能有过渡）。在您的情况下发生的情况是，背景渐变随着 向上移动`background-position: -15px`，并且您看到了下面的背景颜色。

要解决此问题`background-color`，请将悬停时按钮渐变的底部颜色设置为：

```
.tour_btn {
    #gradient > .vertical(#F98C51, #a35b35);
    &:hover { background-color: #a35b35 }
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-29T08:19:32.360

如果您为按钮设置了背景图像，则背景会`15px`在悬停时向上移动。您可以将其设置为`0px`.

```
.tour_btn:hover {
   background-position: 0px !important;
} 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-03-29T10:33:26.547

当使用自定义 CSS 而不是 LESS 来设置按钮样式时，请尝试[http://twitterbootstrapbuttons.w3masters.nl/?color=%23F1874E](http://twitterbootstrapbuttons.w3masters.nl/?color=%23F1874E)。您将获得自定义按钮的所有 CSS，包括悬停效果和禁用/活动状态。

对于上面的按钮，您可以使用：

```
.btn-custom-lighten.active {
  color: rgba(255, 255, 255, 0.75);
}
.btn-custom-lighten {
  color: #ffffff;
  text-shadow: 0 -1px 0 rgba(0, 0, 0, 0.25);
  background-color: #f29461;
  background-image: -moz-linear-gradient(top, #f1874e, #f5a77d);
  background-image: -webkit-gradient(linear, 0 0, 0 100%, from(#f1874e), to(#f5a77d));
  background-image: -webkit-linear-gradient(top, #f1874e, #f5a77d);
  background-image: -o-linear-gradient(top, #f1874e, #f5a77d);
  background-image: linear-gradient(to bottom, #f1874e, #f5a77d);
  background-repeat: repeat-x;
  filter: progid:DXImageTransform.Microsoft.gradient(startColorstr='#fff1874e', endColorstr='#fff5a77d', GradientType=0);
  border-color: #f5a77d #f5a77d #ef7736;
  border-color: rgba(0, 0, 0, 0.1) rgba(0, 0, 0, 0.1) rgba(0, 0, 0, 0.25);
  *background-color: #f5a77d;
  /* Darken IE7 buttons by default so they stand out more given they won't have borders */

  filter: progid:DXImageTransform.Microsoft.gradient(enabled = false);
}
.btn-custom-lighten:hover,
.btn-custom-lighten:focus,
.btn-custom-lighten:active,
.btn-custom-lighten.active,
.btn-custom-lighten.disabled,
.btn-custom-lighten[disabled] {
  color: #ffffff;
  background-color: #f5a77d;
  *background-color: #f39766;
}
.btn-custom-lighten:active,
.btn-custom-lighten.active {
  background-color: #f1874e ;
} 
```

用法：

```
<button class="btn btn-custom-lighten btn-large">Your button</button> 
```

在 bootstrap(.min).css 之后添加 CSS 使用这个 css 可以让您自定义按钮效果在大多数浏览器中工作。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-09-19T19:51:42.877

您可以使用 css :hover 属性指定您希望当按钮悬停时的 CSS 内容。

所以在你的情况下，你会想要做类似的事情

```
.tour_btn:hover {
    /* your custom css */
} 
```

使用 chrome 开发人员工具，您应该能够看到引导程序当前正在应用哪种渐变，然后用您的 css 覆盖它们。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-06-26T07:47:43.537

```
.tour_btn:hover {
     background-color: #a35b35;
     background-position: 30px 30px;
} 
```

我找到了这个解决方案，你可以试试这个。它适用于简单的代码

# java - 休眠条件以返回包含列中的值的列表

> ID：12501228
> 
> 赞同：2
> 
> 时间：2012-09-19T19:05:02.087
> 
> 标签：java, hibernate

我有一个用户表，如何创建一个`Criteria`返回`List<String>`用户表中名称列中所有值的一个？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-19T19:14:50.670

您可以使用[`Criteria.setProjection`](http://docs.jboss.org/hibernate/core/3.6/javadocs/org/hibernate/Criteria.html)：

```
Criteria criteria = session.createCriteria(MyUserObject.class)
                    .setProjection(Projections.property("name"));

List<String> list = criteria.list(); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-19T19:14:42.973

您需要使用这样的投影：

```
Criteria criteria = session.createCriteria(User.class)
                       .setProjection(Projections.property("name"));
List<String> names = criteria.list(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-06-08T03:25:21.960

```
Criteria criteria = this.currentSession().createCriteria(ABC.class);
criteria.setProjection(Projections.distinct(Projections.property("name")));

List<String> names = criteria.list(); 
```

**Projections.distinct**将帮助您获得独特的记录

# javascript - $.proxy() 和 bind() 有什么区别？

> ID：12501231
> 
> 赞同：30
> 
> 时间：2012-09-19T19:05:17.027
> 
> 标签：javascript, jquery, scope, closures, bind

在 2009 年，ECMAScript 5 添加了一个内置`bind()`函数，该函数接受一个对象作为参数并返回一个相同的函数，其中`this`始终引用您传递给它的对象。（我找不到任何看起来像规范文档链接的东西。）

这与[jQuery 的`$.proxy()`函数](http://api.jquery.com/jQuery.proxy/)有何不同？`$.proxy()`是在 ECMAScript 5 发布之前出现的吗？有什么特别的理由赞成`$.proxy(function(){}, this)`吗`function(){}.bind(this)`？

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-09-19T19:08:16.340

`proxy`排在第一位，你应该喜欢`bind`它，因为它是一个标准。它们的调用方式略有不同（由于附加到`Function.prototype`函数而不是函数），但它们的行为是相同的。

这里有一篇很好的帖子：[jQuery.proxy() 用法](https://stackoverflow.com/questions/3349380/jquery-proxy-usage)，以该建议结尾。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-09-19T19:51:36.193

# 编辑

请不要注意这篇文章（尽管是公认的答案）。
长话短说，对问题的上下文做出假设是我自己的错，而不仅仅是查找 API 文档，并且在我意识到自己的愚蠢之前被接受为答案（做出假设，没有验证它们）和删除它。

Matt Whipple 的回答是 100% 正确的，虽然我不同意他的说法，即真正的代理在 JS 中是无用的（在一些低级问题上它们会很棒），但他的其余陈述在客观上是完全正确的（除了实际`.bind`vs的日期`.proxy`，就像`.bind`它在浏览器中一致登陆之前的规范年份一样）。

### 以下是我的耻辱，在股票中供所有人查看...

随意向它扔西红柿。
*如果你想知道我为什么会这样回答，请阅读下面的评论。*

* * *

> `$({}).proxy()`和之间的区别在于`func.bind({})`代理是一个松散的连接。您可以随时分离。
> 
> 这就是代理的用途。你想做的事情和实际要做的事情之间的隐形界面。
> 
> 作为记录，还有一个`$.bind()`不是代理。也就是说，它完全绑定到`this`，以同样的方式`func.bind()`，而不是实现一个中介系统来随意附加和分离函数的上下文。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-09-19T19:14:27.417

`$.proxy`先来。下面是在函数调用中保留特定上下文的简单方法

```
var myProxy = (function(context,fn){
  return function(){
      fn.call(context);
  }
})( myContext, myFn ); 
```

在它出现 jquery 之前，您可以轻松地使用它。

答案很简单： `bind`就是官方。使用`bind` - 如果运行脚本所需的浏览器确实支持它

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2014-09-05T10:28:21.143

来自[下划线绑定 vs jQuery.proxy vs 本机绑定](https://stackoverflow.com/questions/18848343/underscore-bind-vs-jquery-proxy-vs-native-bind#answer-22860661)

除了已经提到的之外， 和 之间还有另一个`$.proxy()`区别`.bind`。与 $.proxy 绑定的方法如果多次调用将返回相同的引用；jQuery 缓存代理到对象的函数。

[jsFiddle](http://jsfiddle.net/plantface/ov39js45/)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-10-08T18:32:06.097

这是您可以尝试进行性能比较的测试。

[http://jsperf.com/bind-vs-jquery-proxy/5](http://jsperf.com/bind-vs-jquery-proxy/5)

此时，2014 年 10 月。不同浏览器的性能差异很大。IE 11 本机绑定最快。

However, for all three browsers I tested with, native bind out preform jquery proxy. And since bind() is standard, I would suggest sticking to it if possible.

# c# - 创建显示汇总销售数据的 GridView 的最佳方法是什么？

> ID：12501235
> 
> 赞同：0
> 
> 时间：2012-09-19T19:05:33.130
> 
> 标签：c#, asp.net, sql, gridview

我在 C# 和 ASP.Net 中开发了一个电子商务应用程序。对于管理员用户“仪表板”登录页面，我想给他们一个 GridView，向他们显示几个不同时间范围内的总销售额，这些将是我的列（即最后一天、上周、上个月、最后年，总计）。我想为处于不同状态（即完成、已付款但未发货、进行中）的订单提供这些值。与此类似的东西：

```
|OrderStatus|Today|LastWeek|LastMonth|
|Processed  |$10  |$100    |$34000   |
|PaidNotShip|$4   |$12     |$45      | 
```

我的问题：最好/最有效的方法是什么？我知道我可以编写单独的 SQL 语句并将它们合并在一起并将 gridview 绑定到 sqldatasource：

```
(select amountForYesterday, amountForLastWeek from sales where orderStatus = processed)
UNION 
(select amountForYesterday, amountForLastWeek from sales where orderStatus = paidnotshipped) 
```

但这似乎很痛苦而且效率很低，因为我实际上会为每个值编写一个单独的查询。

我也可以在加载后的 .cs 页面中执行此操作，并以编程方式逐行填充网格视图。

此 GridView 将仅显示用户特定组织的信息，因此它也必须根据该信息进行过滤。

对于如何在不编写大量查询并在每次查看页面时不断点击该查询和数据库的情况下如何做到这一点，我有点不知所措。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T11:40:46.300

没有直接的方法可以做到这一点。但是，您可以使用用于绑定到网格的数据表来执行这些操作，而不是点击数据库来计算每列的总和。

您需要做的就是使用

```
Dim iSumSal As Integer 
```

iSumSal = StudentTable.Compute("SUM(sal)", "")

同样，您可以对其他列执行。

一旦完成。然后只需向您的数据表添加一个新行，其中包含所有求和值。

然后你可以将它绑定到你的网格。

可选 - 您可以在新行的第一列中放置一些文本值作为“总计：”

谢谢

拉胡尔

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T19:14:35.670

我更喜欢使用 LINQ 处理数据和/或 GridViews（访问行等）。看看我在 GitHub 上的一个项目，它正是我在这里提到的，例如。请注意，这只是我之前用于说明目的的沙箱。

## GitHub 回购

[https://github.com/pauloosthuysen/int](https://github.com/pauloosthuysen/int)

## 其他有用信息：

[http://www.codeproject.com/Articles/33685/Simple-GridView-Binding-using-LINQ-to-SQL](http://www.codeproject.com/Articles/33685/Simple-GridView-Binding-using-LINQ-to-SQL)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-19T19:15:09.447

LastWeek 和 LastMonth 的销售额等不会经常变化。您可以将其存储在按组织索引的静态字典中，或将其汇总在单独的表中以便更快地访问。这样，您将不需要选择相同数量的大量行来一遍又一遍地获得相同的数字。除非有特殊要求，否则我会坚持使用 Dictionary 解决方案，因为它很简单，但组合也可能是一个很好的解决方案

# json - 如何在 JSON 中选择一个空键？

> ID：12501236
> 
> 赞同：-1
> 
> 时间：2012-09-19T19:05:51.697
> 
> 标签：json

我有一些我正在尝试解析的 JSON。我不知道这是否被认为是格式错误，但一个键是空的：

```
{"value": ["", {"Fields":...}]} 
```

我想进入“字段”元素，但无法通过空字符串。我试过了：

```
JSON.parse(results).value.@"".Fields 
```

但这会返回错误“没有这样的字段： org.codehaus.groovy.grials.web.json.JSONArray 类为*空*。

我如何访问“字段”，或者这只是糟糕的 json？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T19:09:47.857

`value`是一个数组。
`value[0]`是空字符串。
`value[1]`是一个对象。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T19:07:41.853

它不是键，它是数组中的一个元素。注意括号之间的区别。只需访问 下数组的索引 1 处的元素`value`。

# php - 如何确保 cURL 的安全性？

> ID：12501238
> 
> 赞同：1
> 
> 时间：2012-09-19T19:05:56.920
> 
> 标签：php, curl, security

我有一个 cURL 设置，可以将数据从一台服务器传输到另一台服务器。如何防止人们仅通过浏览 URL 来运行 cURL 代码？有什么方法可以检测调用代码的内容吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T19:07:07.453

Why don't you force them to authenticate before the script is executed? There is not really a big difference between securing that, and any secure content on the web.

# jquery - 如何调用 jQuery 文件上传到由 Ajax 动态添加的 Html 块？

> ID：12501241
> 
> 赞同：0
> 
> 时间：2012-09-19T19:06:07.167
> 
> 标签：jquery, jquery-plugins

我使用 jQuery Ajax 文件上传插件，一切都很好，直到需要调用将插件应用于由 Ajax 添加到页面的文件输入的方法。

```
 $('.ajax-upload').fileupload({
     dataType: 'json',
     done: function (e, data) {
          alert('yo');                   
     }
 }); 
```

以上工作正常，但不是 Ajax 动态添加的 HTML 内容。

我尝试了 .live 和 .on 但没有找到任何处理程序来调用 fileupload() 方法。

如何在所有 .ajax-upload 元素上调用 fileupload() 方法，即使是稍后由 Ajax 添加的元素？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T19:16:04.830

您需要在元素进入 DOM 后分配这些事件侦听器。尝试在通过 jQ 成功导入 html 之后的成功事件中定义事件侦听器。

# javascript - HTML表格单元格对齐

> ID：12501243
> 
> 赞同：2
> 
> 时间：2012-09-19T19:06:19.653
> 
> 标签：javascript, html, css, jquery-mobile

我正在使用 jQuery mobile，我想创建一个看起来像

![在此处输入图像描述](../Images/db007b729e4066e429e2de1faa5ed4d5.png)

它看起来很容易实现，除了右边列的右对齐之外，我几乎得到了所有东西。请注意，右列上的每三个单元格都会合并。任何帮助表示赞赏。谢谢。

更新：这是我的代码：

```
<ul data-role="listview" id="mylist"><li><table><tr><td><label class="label1">EUR</label></td><td rowspan="3"><label class="price">1.3245</label></td></tr><tr><td><label class="label2">vs</label></td></tr><tr><td><label class="label3">USD</label></td></tr></table></li><li><table><tr><td><label class="label1">EUR</label></td><td rowspan="3"><label class="price">0.89</label></td></tr><tr><td><label class="label2">vs</label></td></tr><tr><td><label class="label3">GBP</label></td></tr></table></li></ul> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-19T19:23:07.873

好吧，因为你没有发布你的代码，我只能帮助你

[在这里查看](http://codepen.io/anon/pen/gGzin)

代码：

```
jQuery('tr').each(function() {
  if (this.cells[1]) {
    this.cells[1].style.textAlign = 'right';
  }
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-19T21:00:58.270

经过一段时间的努力，我弄清楚了问题所在。在我的代码中，我创建了几个表。（每个表一个表`<li>`。）因此，当我右对齐右列中的文本时，它在每个表中右对齐。但是，当所有这些表格都在一个下方看到时，文本似乎没有右对齐。解决方案是在所有表格中右对齐右列，并在所有表格中保持固定宽度。例如`.price{ font-size: 30px; width:200px; text-align: right; }`

感谢 Joe W 和 Rafael de Souza 的帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-19T20:38:29.483

如果您通过添加 text-align: right 来更改 CSS，它应该会为您提供所需的结果。

前：

```
.price{ font-size: 30px;} 
```

后：

```
.price{ font-size: 30px; text-align: right;} 
```

# drupal - Drupal 视图：使用分类术语创建 3 列主页

> ID：12501246
> 
> 赞同：0
> 
> 时间：2012-09-19T19:06:34.983
> 
> 标签：drupal, drupal-7, drupal-views, drupal-theming

我希望为我的网站创建一个 3 列主页设计，将给定分类类型的 3 个不同项目（新闻、培训警报和咨询）分成 3 个单独的列。每列不仅显示分类术语，还提取与其相关的内容（例如，标记为“新闻”的每个项目的预告视图）。

我对 Drupal 主题不是很熟悉，但目前我已经能够使用 Bartik 主题在我的网站上完成我想要的一切。有什么方法可以使用 Views 完成此任务，而无需对 Bartik 主题进行太多更改？或者，有没有办法用 PHP 代码创建一个表，将与每个分类类型关联的内容拉入 3 列表的每一列？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-01T06:05:14.743

我能想到的最简单的方法：

1.  使用 Content -> Teaser 输出创建 3 个单独的块显示，每个术语一个。
2.  下载/启用[Blockgroup](http://dgo.to/blockgroup)并创建一个新的块区域（称为“Front Categories”）并将其放置在任何地方并将其分配给
3.  以您想要的任何顺序将这 3 个块显示放在新的块组区域内。
4.  添加一些简单的 CSS 以使块具有均匀的宽度，例如：`.region-blockgroup-front-categories .block-views {width: 33%;}`

如果不完全适合您，那应该可以让您完成大约 90% 的工作。

# php - 通过验证字符串长度是否达到指定数字进入下一行

> ID：12501251
> 
> 赞同：1
> 
> 时间：2012-09-19T19:06:56.213
> 
> 标签：php, conditional-statements

我想在**PHP中创建一个***条件*来检查字符串的长度是否已达到指定值，如果条件为真，则在下一行显示其余字符。*字符串是使用POST*方法从表单传递的。

 **** * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T19:09:54.027

您在寻找[wordwrap()](http://php.net/manual/en/function.wordwrap.php)函数吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T19:11:01.020

考虑到具体长度是10

```
 if(strlen($_POST['str']) > 10)
    echo "\n". substr($_POST['str'],10); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-19T19:11:10.510

```
$max_length = 100;
$string = 'mystring'; // or whatever 

if(strlen($string) > $max_length){
    $sub_str = substr($string, $max_length);
} 
```

如果已设置`$sub_str`，则在新行上回显。`$sub_str`***

# libgdx - 使用 libgdx 制作 ScrollPane 菜单？

> ID：12501253
> 
> 赞同：2
> 
> 时间：2012-09-19T19:07:06.637
> 
> 标签：libgdx

I am making a MenuGame choosing level by `ScrollPane(libGDX)`. I want to add a Button using `ScrollPane` like the game "Cut the Rop", or "Tap The Frog". A buttonlevel may be : Locking buttonlevel, rank starlevel (player played that level, and had 1, 2 or 3 stars ..., Unlock buttonlevel. I had levelimages, lockimage, star and ***I have to make a lot of image for a level (locking Image Level, 0 stars ImageLevel, 1 star Level...)***. How can I make that buttonlevels more simply ?

# c# - C# 从 Active Directory 用户填充组合框

> ID：12501257
> 
> 赞同：0
> 
> 时间：2012-09-19T19:07:13.660
> 
> 标签：c#, active-directory

我正在使用此代码填充 Active Directory 用户的组合框，但有时我会在代码有效旁边的“for each”处收到 COM 异常。

```
System.DirectoryServices.DirectoryEntry entry = new System.DirectoryServices.DirectoryEntry("LDAP://DC=DOMAIN, DC=local");
System.DirectoryServices.DirectorySearcher mySearcher = new System.DirectoryServices.DirectorySearcher(entry);
mySearcher.Filter = "(&(objectClass=user)(objectCategory=person))";

foreach (System.DirectoryServices.SearchResult resEnt in mySearcher.FindAll())
{
   try
   {
       //DirectoryEntry de = new DirectoryEntry(resEnt.GetDirectoryEntry());
       System.DirectoryServices.DirectoryEntry de = resEnt.GetDirectoryEntry();
       comboBox2.Items.Add(de.Properties["GivenName"].Value.ToString() + " " + de.Properties["sn"].Value.ToString() + " " + "[" + de.Properties["sAMAccountName"].Value.ToString() + "]");
   }
   catch (Exception e)
   {
       // MessageBox.Show(e.ToString());
   }
} 
```

有没有更有效的方法来执行此操作或解决错误？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-19T19:43:32.683

我要做的第一件事是将要从结果中获取的属性包含到搜索结果中 - 这样，您就不必`.GetDirectoryEntry()`对每个结果进行调用：

```
using System.DirectoryServices;

DirectoryEntry entry = new DirectoryEntry("LDAP://DC=DOMAIN, DC=local");

DirectorySearcher mySearcher = new DirectorySearcher(entry);
mySearcher.Filter = "(&(objectClass=user)(objectCategory=person))";

// define the properties you want to be loaded into the search result object
mySearcher.PropertiesToLoad.Add("GivenName");
mySearcher.PropertiesToLoad.Add("samAccountName");
mySearcher.PropertiesToLoad.Add("sn");

foreach (SearchResult resEnt in mySearcher.FindAll())
{
   try
   {
       string givenName = "";
       string samAccountName = "";
       string surName = "";

       // check if you got a value - not all properties have to be filled - 
       // and if they're not filled, they might be "null". 
       if(resEnt.Properties["GivenName"] != null && 
          resEnt.Properties["GivenName"].Count > 0) 
       {
           givenName = resEnt.Properties["GivenName"].Value;
       }

       // samAccountName is a *must* property - it has to be set.
       samAccountName = resEnt.Properties["samAccountName"].Value;

       if(resEnt.Properties["sn"] != null && 
          resEnt.Properties["sn"].Count > 0) 
       {
           surName = resEnt.Properties["sn"].Value;
       }

       comboBox2.Items.Add(givenName + " " + surName + " " + "[" + samAccountName + "]");
   }
   catch (Exception e)
   {
       // MessageBox.Show(e.ToString());
   }
} 
```

The second point is: if you're on .NET 3.5 or newer, you can use a `PrincipalSearcher` and a "query-by-example" principal to do your searching; also, working with the result set using the `UserPrincipal` objects is a lot easier, since things like `GivenName` and `Surname` are surfaced as properties on the `UserPrincipal`:

```
// create your domain context
PrincipalContext ctx = new PrincipalContext(ContextType.Domain);

// define a "query-by-example" principal - here, we search for any UserPrincipal 
UserPrincipal qbeUser = new UserPrincipal(ctx);

// create your principal searcher passing in the QBE principal    
PrincipalSearcher srch = new PrincipalSearcher(qbeUser);

// find all matches
foreach(var found in srch.FindAll())
{
    // do whatever here 
    UserPrincipal foundUser = found as UserPrincipal;

    if(foundUser != null)
    {
       comboBox2.Items.Add(foundUser.GivenName + " " + foundUser.Surname + " " + "[" + foundUser.SamAccountName + "]");
    }
} 
```

If you haven't already - absolutely read the MSDN article [Managing Directory Security Principals in the .NET Framework 3.5](http://msdn.microsoft.com/en-us/magazine/cc135979.aspx) which shows nicely how to make the best use of the new features in `System.DirectoryServices.AccountManagement`. Or see the [MSDN documentation on the System.DirectoryServices.AccountManagement](http://msdn.microsoft.com/en-us/library/system.directoryservices.accountmanagement.aspx) namespace.

Of course, depending on your need, you might want to specify other properties on that "query-by-example" user principal you create:

*   `DisplayName` (typically: first name + space + last name)
*   `SAM Account Name` - your Windows/AD account name
*   `User Principal Name` - your "username@yourcompany.com" style name

You can specify any of the properties on the `UserPrincipal` and use those as "query-by-example" for your `PrincipalSearcher`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T19:11:07.867

将 foreach 循环放在 try...catch 语句的 catch 块中。

# php - Facebook 网站集成 -> fb 登录按钮与 fb 注册？

> ID：12501260
> 
> 赞同：3
> 
> 时间：2012-09-19T19:07:24.270
> 
> 标签：php, javascript, facebook, sdk

我有一个正在写的网站。

*   javascript SDK 工作
*   php SDK 工作

HTML 如下所示：

1.  带有 fb-registration div 的注册页面
2.  带有 fb-login-button div 的登录页面

流动：

1.  首次用户（已注册到 facebook），决定注册。注册页面 -> 按“注册” -> fb iframe -> 按“继续” -> POST 到 PHP -> 将用户保存到数据库 -> 重新加载页面 -> 用户已验证。
2.  首次用户（已注册到 facebook），决定登录。（从未注册）。登录页面 -> 按“使用 Facebook 登录” ->*出现 blorp* -> ????

问题：

1.  如果我的 javascript SDK 已经知道用户是否登录，为什么我需要登录按钮？
2.  是否可以在没有 facebook 应用程序的情况下使用网站 facebook api？
3.  注册和登录之间没有冲突吗？
4.  blorp会发生什么？在这个问题之后，它只是为了获取用户信息的目的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T18:19:46.320

1.  仅向未使用 facebook 登录的用户显示登录 facebook 按钮。
2.  你必须更精确，你有一个网站或一个 facebook 应用程序，一些 API 函数的工作方式不同。

3.4\. 冲突在您的流程逻辑中，您无法在您的网站上登录尚未注册帐户的用户。

我建议摆脱注册，并使用自动注册和/或自动登录：

*   用户进入网站
*   未登录 facebook - 显示登录到 facebook 按钮，登录后返回此处
*   登录 facebook - 在网站中显示您自己的登录按钮（如果您在数据库中找到他的电子邮件地址，并且他之前接受了您的申请，您也可以自动登录）。
*   他按登录
*   您检查是否在数据库中，登录，如果没有 - 注册，然后登录相同的请求。

# javascript - 尝试迭代数据集

> ID：12501261
> 
> 赞同：2
> 
> 时间：2012-09-19T19:07:24.000
> 
> 标签：javascript, arrays

我是 javascript 的新手，我无法弄清楚如何循环遍历一些代码，以便它基本上会创建一个数组，然后我可以将其传递给我的 plot 变量。

我不确定从哪里开始。现在我有一段代码，它获取我的第一个数据集（dataOne）并对其进行格式化，以便它可以进入我的绘图变量。我基本上需要为其他数据集再做三遍 - 希望包括 example.getDataSets 函数以某种方式循环。

有没有好的方法来做到这一点？

这是我的代码：

脚本.js

```
var example = {};

example.data = {
    dataOne: {data: [{"date":1333238400000,"data":23},{"date":1333324800000,"data":37},{"date":1333411200000,"data":49},{"date":1333497600000,"data":54},{"date":1333584000000,"data":30},{"date":1333670400000,"data":19},{"date":1333756800000,"data":15},{"date":1333843200000,"data":19},{"date":1333929600000,"data":145}],
    dataTwo: {data: [{"date":1335830400000,"data":63},{"date":1335916800000,"data":77},{"date":1336003200000,"data":66}],
    dataThree: {data: [{"date":1341100800000,"data":24},{"date":1341187200000,"data":50},{"date":1341273600000,"data":43},{"date":1341360000000,"data":39},{"date":1341446400000,"data":56},{"date":1341532800000,"data":66}],
    dataFour: {data: [{"date":1333238400000,"data":71},{"date":1333324800000,"data":46},{"date":1333411200000,"data":66},{"date":1333497600000,"data":73},{"date":1333584000000,"data":105},{"date":1333670400000,"data":84}]}
}

example.getDataSets = function(){
    return ['dataOne', 'dataTwo', 'dataThree', 'dataFour']
}

example.getSeries = function(month){
    return example.data[month]
}

example.processData = function(data){
    var newData = []
    for(var i = 0; i < data.length; i++){
        newData.push([data[i].date, data[i].data])
    };
    return newData;
} 
```

我在 HTML 页面中的脚本：

```
$.getScript("script.js")
    .done(function() {

    var b = example.getSeries('dataOne');
    var d = example.processData(b.data);
    // first correct the timestamps - they are recorded as the daily
    // midnights in UTC+0100, but Flot always displays dates in UTC
    // so we have to add one hour to hit the midnights in the plot
    for (var i = 0; i < d.length; ++i)
      d[i][0] += 60 * 60 * 1000;

    var plot = $.plot($("#placeholder"), [d] , options); 
```

任何建议都非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T19:17:18.887

尝试

```
var d = example.processData(b); 
```

作为

```
console.log('b') 
```

也不会记录您的`data`（在`b` *变量*中），但字符串:-)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T19:17:28.777

您将字符串文字传递`'b'`给`example.processData`不是存储在变量中的*对象*`b`。它应该是

```
var d = example.processData(b); 
```

还`example.getSeries`返回一个对象而不是数组。数组在`data`对象的属性中。

此外，您的数据中有语法错误，`]}`在前 3 个对象的数组末尾缺失。

# objective-c - 更改文件大小而不损失质量 iOS

> ID：12501262
> 
> 赞同：0
> 
> 时间：2012-09-19T19:07:29.997
> 
> 标签：objective-c, ios, cocoa-touch, cocoa

我有一个适用于 iOS 的图像上传应用程序。它有效，但我找不到 1 个问题。

当您从 photolib 中选择照片时，文件大小为 +- 100kb，但如果您使用相机制作图片，则文件大小为几 MB。如何在不丢失质量或不更改图像大小的情况下更改文件大小？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T19:25:21.350

有一种方法可以保持相同的尺寸，而只是失去难以察觉的质量。

利用：

```
UIImageJPEGRepresentation(image, 0.6); 
```

您可以通过从 0.6 增加到 0.8 等来提高质量和大小。（只要它是介于 0 和 1 之间的值）

我相信相机胶卷会为您做到这一点，这就是它们已经在 100kb 范围内的原因。

# mathjax - 如何在 mathjax 中更改包含图像的方程的颜色？

> ID：12501268
> 
> 赞同：1
> 
> 时间：2012-09-19T19:07:46.687
> 
> 标签：mathjax

我注意到 math.SE 使用 mathjax 并且有蓝色的方程。

![颜色方程的例子](../Images/a93d3b4174f621dd30bde409d09f0eaf.png) 注意无穷大符号是如何着色的。

但是，人们会期望它保持黑色，因为 - 如此处所述：[如何在 MathJax 中更改方程式颜色](https://stackoverflow.com/questions/3949100/how-to-change-equations-color-in-mathjax)- 这些符号实际上是不影响颜色的图像。像这样： ![颜色方程的示例，但图像未着色](../Images/bcd116ff6e7ed87c026c076eee77f996.png)

那么，它们如何改变这些图像的颜色呢？我认为这是不可能的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T09:43:34.203

如今，MathJax 应该只在极少数情况下使用图像模式。主要是当您使用 Firefox 查看本地文件（通过`file://`url）并且 MathJax 与正在查看的 HTML 文件不在同一目录中时。在这种情况下，Firefox 的同源策略认为 MathJax 位于单独的域中，因此无法访问基于 Web 的字体，因为它认为这是跨域访问。所以 MathJax 使用图像字体作为后备，因为它不能使用基于 Web 的字体。我猜这就是你正在发生的事情。

Math.SE 没有这个问题，因为它不是`file://`url，而且 Firefox 在识别什么域时没有问题，所以你得到实际的基于 Web 的字体而不是图像，它们可以正确着色（与图像不同） . Math.SE 不需要做任何特别的事情来实现这一点，而且您看到的*不是*彩色图像，而是实际的字体。这就是与您的未着色示例的区别。

Firefox 本地文件问题的解决方案是在系统的字体文件夹中安装[STIX 字体或 MathJax 自己的 OTF 字体。](http://www.stixfonts.org/)`MathaJax/fonts/HTML-CSS/TeX/otf`您可以在本地安装的 MathJax 发行版目录中找到 MathJax 字体。如果这些在您的系统上作为实际字体可用，MathJax 将不必使用基于 Web 的版本，因此它可以避免 Firefox 的同源策略问题。这也将加速任何使用 MathJax 的页面（如 Math.SE），因为它不必通过网络下载字体。

# javascript - 用图像制作开/关按钮

> ID：12501269
> 
> 赞同：-1
> 
> 时间：2012-09-19T19:07:49.850
> 
> 标签：javascript

我有两个图像，sound_on.png 和 sound_off.png。两者具有相同的高度和尺寸。

我想为以下操作附加一个 JavaScript：

1.  当按下的图像从 sound_off.png 变为 sound_on.png 并播放声音时
2.  再次按下按钮时，它会从 sound_on.png 变回 sound_off.png 并且声音会随着 onclick 命令停止

目前我有这些代码行：

```
<a href="#" onClick="playAudio();"><img src="images/general/sound-on.png" width="40" height="32"></a>
<a href="#" onClick="stopAudio();"><img src="images/general/sound-off.png" width="40" height="32"></a> 
```

我需要什么代码才能使它们像上面的示例一样？

我有这部分：

```
<style type="text/css">
.on {background-image:url url(images/general/sound-off.png)); background-repeat:no-repeat;}
.off {background-image:url(images/general/sound-on.png); background-repeat:no-repeat;}
</style>
<script language="javascript">
function togglestyle(el){if(el.className == "on") {el.className="off";} else {el.className="on";}}
</script> 
```

使用此 DIV 作为按钮：

```
div id="onoff" class="playlist_btn"><img src="images/general/sound-off.png" width="50 height="50" onclick="togglestyle(onoff)"></div> 
```

这使得切换，但到目前为止我不知道如何连接 onclick 命令来播放音频并再次停止它。

会是这样吗？

```
function togglestyle(el){if(el.className == "on" onClick="playAudio()") {el.className="off" onClick"stopAudio()";} else {el.className="on";}} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T20:36:21.013

只需直接从您现有的切换功能调用声音功能：

```
function togglestyle(el){

    if(el.className == "on") {
        el.className="off";
        stopAudio();
    }
    else {
        el.className="on";
        playAudio();
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T21:23:41.853

这个脚本结合起来也能解决问题

```
<script>
function showHide(elementid){
if (document.getElementById(elementid).style.display == 'none'){
document.getElementById(elementid).style.display = '';
} else {
document.getElementById(elementid).style.display = 'none';
}
}

function hideShow(elementid){
if (document.getElementById(elementid).style.display == ''){
document.getElementById(elementid).style.display = 'none';
} else {
document.getElementById(elementid).style.display = '';
}
}
</script>

<img id="on" src="images/general/sound-off.png" width="40" height="32" onClick="javascript:hideShow('on'); javascript:showHide('off'); javascript:playAudio()" alt="on">
<img id="off" src="images/general/sound-on.png" width="40" height="32" onClick="javascript:hideShow('off'); javascript:showHide('on')" style="display:none;" alt="off"> 
```

但是我想知道是否有一种方法可以检测音频何时播放完毕并返回关闭状态并集成一个 trird 选项，以暂停音频（带有暂停图像）并继续音频离开的地方？有任何想法吗？

# javascript - 根据窗口大小更改列数

> ID：12501275
> 
> 赞同：0
> 
> 时间：2012-09-19T19:08:14.597
> 
> 标签：javascript, jquery, html, css

是否可以仅使用 CSS 更改布局，所以当窗口大小 < x 时，我将文本放在宽度为 100% 的一列上，当窗口 >= x 时，将其设置为两列，每个宽度设置为 50%？

**例如：**

*一栏：*

```
first part of the example text
second part of the example text 
```

*两列：*

```
first part of the                 second part of the
example text                       example text 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-19T19:11:35.680

尝试使用媒体查询 -[**演示**](http://jsfiddle.net/q883p/6/)

```
div {
    border: 1px solid #c00;
}

@media only screen and (min-width: 481px) {
    div { 
        -webkit-box-sizing: border-box;
           -moz-box-sizing: border-box;
                box-sizing: border-box;
        float: left;
        width: 50%; 
    }
}​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T19:16:23.880

您可以使用媒体查询来做到这一点，这将根据屏幕大小提供不同的样式表。

HTML：

```
<div class="col1">Lorem ipsum  ... interdum mi.</div>
<div class='col2'>Integer varius,  ... sagittis dolor.</div>​ 
```

CSS：

```
@media (max-width: 500px) {
    .col1, .col2 { width: 45%; float: left}
} 
```

[http://jsfiddle.net/FKSkv/1/](http://jsfiddle.net/FKSkv/1/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-19T19:18:25.487

首先你可以使用 CSS3`column-count:`属性。
并在您的特殊屏幕宽度条件下借助 JavaScript 添加列类。

# sql - Linq to Sql 外键关系

> ID：12501285
> 
> 赞同：2
> 
> 时间：2012-09-19T19:09:04.687
> 
> 标签：sql, linq, foreign-keys, intellisense, relationship

表名：`Author`

*   AuthorID -> 主键
*   名
*   姓

表名：`Titles`

*   ISBN -> 主键
*   书名
*   版号
*   版权

表名：`AuthorISBN`

*   ISBN -> 外键
*   AuthorID -> 外键

为什么下面的代码块不会触发智能感知，因为 Linq-to-SQL 会自动创建基于外键关系的属性？在我的情况下，它不...

错误：

> *名称 title 在 title.AuthorISBN 中的当前上下文中不存在*
> 
> *不是让我添加照片，而是“作者”与 AuthorISBN 具有“一对多”关系，而“标题”也与 AuthorISBN 具有“一对多”关系*

代码：

```
 BooksDataContext database = new BooksDataContext();
 var authorsAndTitles =
          from title in database.Titles
          from book in title.AuthorISBN
          let author = book.Author
          orderby author.LastName, aurthor.FirstName, title.BookTitle
          select new { author.FirstName, author.LastName, title.BookTitle }; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T19:46:03.810

好像你打错了：

```
 var authorsAndTitles =
          from title in database.Titles
          from book in **tilte**.AuthorISBN
          let author = book.Author
          orderby author.LastName, aurthor.FirstName, title.BookTitle
          select new { author.FirstName, author.LastName, title.BookTitle }; 
```

不应该是 title.AuthorISBN 而不是倾斜.AuthorISBN 吗？我用**包围了这个词。

除此之外，我会试试这个：

```
var authorsAndTitles =
          from title in database.Titles
          let author = title.AuthorISBN.Author
          orderby author.LastName, aurthor.FirstName, title.BookTitle
          select new { author.FirstName, author.LastName, title.BookTitle }; 
```

新尝试：

```
var authorsAndTitles =
          from autISBN in database.AuthorISBN
          let author = autISBN.Author
          let title = autISBN.Titles
          orderby author.LastName, author.FirstName, title.BookTitle
          select new { author.FirstName, author.LastName, title.BookTitle }; 
```

# java - Java 应用程序如何无缝地接受服务器证书？

> ID：12501286
> 
> 赞同：3
> 
> 时间：2012-09-19T19:09:03.770
> 
> 标签：java, ssl, ssl-certificate, ldapconnection

大多数支持 SSL 的 Web 浏览器都有一个 CA 列表，它们将自动接受其证书。如果浏览器遇到授权 CA 在列表中的证书，浏览器将自动接受该证书，并建立与站点的 SSL 连接。

有一个 Java 1.6 客户端，在 JBoss 7 上运行，它是与 LDAP 服务器建立 SSL 连接所必需的。由于客户端正在生产中，如果 LDAP 服务器更新其证书而没有通知我在 JBoss 上相应地更新证书，则客户端将失败。我的问题是：如何以与浏览器无缝“接受”证书的类似方式安全地连接（ssl）到 LDAP？

我不知道这在Java中是否可行。但是，任何想法和反馈都是受欢迎的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-19T19:49:46.960

Java 有一个默认的信任库，其中包含所有受信任的证书。这属于`%JRE_HOME%\lib\security\cacert`并具有所有受信任的 CA 证书（Verisign 等）。
因此，如果您的客户端`https`应用程序尝试连接到部署由这些颁发者签名的证书的服务器，您将没有问题（与您的浏览器发生的情况相同）。
现在到你的问题。您没有提及有关您的`LDAP`服务器的足够信息。
我可以想到以下几点：

1.  LDAP 服务器部署了一个由某个 CA（不是已知的 CA 之一）签名的证书。
2.  LDAP 服务器部署自签名证书

对于情况 (1)，您需要做的就是将*签名者*的证书添加到您的信任库（即，签署您的 LDAP 服务器证书的问题的证书）。如果 LDAP 服务器更改证书，只要它从您现在设置为受信任的同一 CA 获取证书，您就不会*受到影响。*可以添加此受信任证书，`cacerts`但推荐的解决方案是使用您自己的单独信任库，将其导入并在 JVM 中设置以覆盖默认值`cacerts`。谷歌中有很多例子。

对于情况 (2)，这是一个非常糟糕的设置并且遇到了麻烦，因为每次`LDAP`服务器更改证书时您都需要手动更新信任库。

但无论如何我只能假设证书由于到期而改变？我想不出另一个原因（除了私钥泄露，但这不是你描述的问题）

# php - 使用 Code Igniter 表单验证 2 个字段中的 1 个

> ID：12501287
> 
> 赞同：1
> 
> 时间：2012-09-19T19:09:12.460
> 
> 标签：php, codeigniter, validation

我有一个问题，我正试图以一种更简洁的方式解决。基本上正在发生的事情是我有一个表单，其中我有 2 个字段，并且需要一个或另一个字段才能使表单有效。我的问题是，如果我将这两个字段标记为必填项，则整个表单输入过程都需要它们。

```
if ($this->input->post('field1'))
{
    make field1 required
}
else if ($this->input->post('field2'))
{
    make field2 required
}
else
{
    make field1 && field2 required
} 
```

问题出在其他方面......如果我让他们都需要；第一次查找错误时，它会检查要填充的两个字段，如果填充了 field1，则 field2 将显示为必需，而实际上它不应该，并且再次检查后错误消息不会消失。

另一个选项是不需要字段 1 和 2，但这意味着如果他们输入正确的信息但将这两个字段都留空，它将提交。

任何想法将不胜感激。

** 注意：我相信我已经解决了这个问题，通过在加载时将 field1 + field2 设置为 required ，它们会根据用户输入和提交按钮上的点击事件进行更新。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T19:22:41.067

在 codeigniter 中验证表单的最简洁和最简单的方法是使用他们的表单[验证库](http://codeigniter.com/user_guide/libraries/form_validation.html)

```
First you have to manually load or auto load your library

$this->load->library('form_validation'); or $autoload['libraries']= array('form_validation');

You have to set rules for each field like

$this->form_validation('field_name','Field Label','required'); 
```

他们的手册真的很值得一读。我目前也在用codeigniter开发一个应用程序，它真的很有趣也很简单

# iphone - cocos2d iphone 5 4 英寸显示器支持

> ID：12501292
> 
> 赞同：5
> 
> 时间：2012-09-19T19:09:46.043
> 
> 标签：iphone, ios, cocos2d-iphone, retina-display

我一直在到处寻找这个，但没有运气。

如何为更大的 4 英寸 iPhone 5 显示屏准备基于 cocos2d 的游戏？我的应用程序正在运行，但我想为更大的 4 英寸显示屏增强它。Cocos2d 为视网膜显示图像使用自己的后缀。对于 iPhone 4 和 4S 的视网膜显示，它是`image-hd.png`. iPhone 5 有后缀吗？我该如何做到这一点？

干杯。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-19T20:56:19.663

iPhone 5 没有额外的文件后缀，毕竟它只有 176 像素（88 点）宽。它被视为普通的 Retina 手机，因此 cocos2d 将加载 -hd 文件。

其余的只是根据设备定位图像。最简单的方法是将两边的 44 个点视为“死区”，在该“死区”中不会发生用户输入，也无法保证用户可以看到游戏对象。

**更新：** cocos2d 2.1 添加了 -widehd 后缀。据说 2.1 最终版本会将后缀重命名为 -iphone5hd。

鉴于未来的屏幕尺寸，我个人会设置并使用 -568hd 后缀，因为 iPhone 5 以外的其他手机可能具有相同的分辨率。至少可以说，以特定的 iPhone 型号命名后缀有点短视。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-02-07T21:05:05.903

将其添加到 AppDelegate：

```
[CCFileUtils setiPadRetinaDisplaySuffix:@"your suffix"];
[CCFileUtils setiPadSuffix:@"your suffix"];
[CCFileUtils setiPhoneFourInchDisplaySuffix:@"your suffix"];
[CCFileUtils setiPhoneRetinaDisplaySuffix:@"your suffix"]; 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2013-02-02T23:10:12.707

不知道为什么每个人都说没有。

iPhone5/iPod Touch 5th 的后缀是 -568h（因此 4 英寸视网膜显示）。

总名单：

*   -hd (iPhone 4/4S, iPod Touch 4th)
*   -568h（iPhone 5、iPod Touch 5th）
*   -ipad (iPad 1st/2nd)
*   -ipadhd (iPad 3rd/4th)

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2013-02-10T18:14:52.033

使用您选择的后缀将此添加到 AppDelegate：

```
if((UI_USER_INTERFACE_IDIOM() == UIUserInterfaceIdiomPhone) && ([[UIScreen mainScreen] bounds].size.height == 568)) {
    [sharedFileUtils setiPhoneRetinaDisplaySuffix: @"-your suffix"];
} 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-06-28T18:35:32.117

我花了一段时间才弄清楚这一点，因为我是 cocos2d 的新手。所以我认为回顾一下可能对像我这样的人有帮助。在 cocos2d 2.1 中，您所要做的就是为目标屏幕尺寸创建图形并遵循 cocos 后缀命名约定。注意 cocos 的后缀约定和 iOS 的不一样。

就我而言，我有一个占据全屏的背景图像。所以，我做了...

1.  用于 iPhone 的 480x320 的 background.png
2.  用于 iPhone 视网膜 (3.5") 的 960x640 的 background-hd.png
3.  background-iphone5hd.png 用于 iPhone5 视网膜 (4")

并使用以下代码将图像加载到 CCSprite 中。Cocos 会为你确定使用哪个图像。

```
CCSprite *background = [CCSprite spriteWithFile:@"background.png"];
background.position = ccp(background.textureRect.size.width/2,
background.textureRect.size.height/2);
[self addChild:background]; 
```

对于像字符这样不占满屏的元素，cocos2d 会在 iPhone5 中自动拾取 character-hd.png。无需创建 character-iphone5hd.png 版本。

[您可以在https://github.com/cocos2d/cocos2d-iphone/wiki/cocos2d-v2.1-release-notes](https://github.com/cocos2d/cocos2d-iphone/wiki/cocos2d-v2.1-release-notes)的 2.1 版本发布说明中了解更多信息

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2013-07-08T10:48:41.360

我就是这样做的`cocos2d v2.1-beta4`。

在`CCFileUtils.h`我补充说：

```
- (void)setIphone5HDSuffix:(NSString *)suffix; 
```

在`CCFileUtils.m`：

```
- (void)setIphone5HDSuffix:(NSString *)suffix
{
   [_suffixesDict setObject:suffix forKey:kCCFileUtilsiPhone5HD];
} 
```

在`AppDelegate.m`：

```
[sharedFileUtils setIphone5HDSuffix:@"your_suffix"]; 
```

这已经足够了！

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-09-19T20:05:39.030

您是否按照以下帖子为它添加了默认图像，名为 Default-568h@2x.png，分辨率为 1136x640？

[如何为 iPhone 5 屏幕分辨率开发或迁移应用程序？](https://stackoverflow.com/questions/12395200/how-to-develop-or-migrate-apps-for-iphone-5-screen-resolution)

如果它不起作用，我在 cocos2d 论坛上找到了这个帖子，其中包含很多信息：

iPhone 5 1136 x 640 屏幕分辨率： http: [//www.cocos2d-iphone.org/forum/topic/39491](http://www.cocos2d-iphone.org/forum/topic/39491)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-04-12T17:08:04.453

现在 cocos2d 也支持 iPhone 宽屏了。

```
 -wide.png for iphone 5
 -widehd.png for iPhone 5 HD 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2013-04-13T08:16:18.067

我只是在 Cocos2D 2.1-rc1 中玩弄后缀，并且能够让它自动加载带有“-iphone5hd”后缀的 iPhone5 文件，而不是在代码的 sharedFileUtil 部分中更改 AppDelegate 中的任何内容。希望也有帮助。

# asp.net - IIS 7 和 ASP.NET 4 超时

> ID：12501293
> 
> 赞同：1
> 
> 时间：2012-09-19T19:09:46.887
> 
> 标签：asp.net, asp.net-mvc, iis-7

我在同一个 Web 服务器上有 3 个应用程序。其中两个配置在单独的 ASP.NET 4 应用程序池中，其中一个位于 ASP.NET 2 应用程序池中。

我在白天访问这些应用程序时遇到间歇性超时。为了追踪这个超时，我设置了一个 ping 监控服务 (motive.com)。以下是超时事件日志的示例：

```
应用程序日期停机主要原因
APP2 2012 年 9 月 19 日，14:51 4 分 50 秒 connect() 超时！
APP1 2012 年 9 月 19 日，14:51 4 分 50 秒 connect() 超时！
APP2 2012 年 9 月 19 日，14:11 2 分 50 秒无法连接到主机
APP1 2012 年 9 月 19 日，14:11 2 分 50 秒无法连接到主机
APP2 2012 年 9 月 19 日，在 9:17 2 分 41 秒无法连接到主机
APP1 2012 年 9 月 19 日，9:17 2 分 41 秒无法连接到主机
...

```

如您所见，两个 ASP.net 4 池同时超时。我还在监视 ASP.NET 2.0 应用程序池网站，但我没有一次超时！

没有任何与它发生的时间（白天/晚上）相关的模式。超时之间的间隔也不遵循模式，有时它们会在 40 分钟后发生，而另一些则需要几个小时。

超时从不会持续超过 5 分钟，但它们也随机从 2 到 5 分钟不等。

起初我认为这可能与应用程序池回收有关，但我已经检查过，回收设置为在 24 小时后发生，并针对其他事件（内存峰值等）禁用。

该站点不常访问（处于 beta 测试中），因此没有大量访问、工作人员需求、内存消耗等。

我还检查了 IIS 日志，在监控服务报告的停机时间内有 2 到 5 分钟的间隔，但没有错误消息。我还检查了 Windows 事件日志，在系统和应用程序事件中没有发现任何异常。

我现在真的很绝望。如果有人可以帮助我，我将非常感激。

最好的问候，爱德华多·德·弗雷塔斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T03:09:53.277

很难说，但要检查的一件事是在 web.config 中，如果你有 这应该设置为 false，请参阅此链接了解更多详细信息和要查找的其他项目：[http ://www.hanselman.com/blog /MostCommonASPNETSupportIssuesReportingFromDeepInsideMicrosoftDeveloperSupport.aspx](http://www.hanselman.com/blog/MostCommonASPNETSupportIssuesReportingFromDeepInsideMicrosoftDeveloperSupport.aspx)

# php - PHP 会话数组复制

> ID：12501298
> 
> 赞同：0
> 
> 时间：2012-09-19T19:10:04.670
> 
> 标签：php, jquery, mysql, html, pdo

我有 2 页。第 1 页用于用户数据输入，第 2 页类似于某种确认。我有一个名为 insert.php 的 php 文件，它的唯一工作是将数据插入到 mysql 表中，其中包含第 1 页的数据。所以在第 2 页上，我将包含第 1 页中所有数据的 $_POST 数组复制到会话中。这里是：

```
<script>
$(document).ready(function(e) {
    $("#PaySubmit").click(function() {
        alert("done");
        $.ajax({
            url: 'Insert.php'
        });
    });
});
</script>
<?php 
session_start();
$prev_url1 = substr($_SERVER['HTTP_REFERER'],-18);
$_SESSION = array_merge($_POST);
?>

<form id="pay" name="pay" method="post" action="RandomPage.php">
<input type="submit" name="PaySubmit" id="PaySubmit" value="Continue"/>
</form> 
```

在插入中，代码如下：

```
<?php 
session_start();
try {
    $link = new PDO('mysql:host=;dbname=;charset=UTF-8','','');
    $gid = $link->prepare("SELECT MAX(Group_ID) as maxGroup FROM Conference");
    $gid->execute();
    $groupid = $gid->fetch(PDO::FETCH_ASSOC);
    $groupid = $groupid['maxGroup']+1;
    $regisid = $groupid;
    $first = $_SESSION["fname"];
    $last = $_SESSION["lname"];
    $addr = $_SESSION["address"];
    $city = $_SESSION["city"];
    $state = $_SESSION["state"];

    $stmt = $link -> prepare("INSERT INTO Conference (`Registrar_ID`, `Group_ID`, `First Name`, `Last Name`, `Address`, `City`, `State`) VALUES (:regisid, :groupid, :first, :last, :addr, :city, :state)");
    $stmt->bindParam(':regisid', $regisid);
    $stmt->bindParam(':groupid', $groupid);
        $stmt->bindParam(':first', $first);
        $stmt->bindParam(':last', $last);
        $stmt->bindParam(':addr', $addr);
        $stmt->bindParam(':city', $city);
        $stmt->bindParam(':state', $state);

    } catch(PDOException $e) {
        print "Error!: " . $e->getMessage() . "<br/>";
        die();
    }
?> 
```

但由于某种原因，这只是不会被插入。在我刚刚在第二页中插入所有代码并且它运行良好之前，但我希望它只有在他们点击第二页上的提交时才插入，这就是我必须这样做的原因。为什么这不起作用，我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T19:26:10.783

`session_start()`必须在向浏览器回显任何内容之前调用

```
<?php
    session_start();
?>
<script>
$(document).ready(function(e) {
    $("#PaySubmit").click(function() {
        alert("done");
        $.ajax({
            url: 'Insert.php'
        });
    });
});
</script>
<?php 
$prev_url1 = substr($_SERVER['HTTP_REFERER'],-18);
$_SESSION = array_merge($_POST);
?>

<form id"pay" name="pay" method="post" action="RandomPage.php">
<input type="submit" name="PaySubmit" id="PaySubmit" value="Continue"/>
</form> 
```

**更新** 您的插入文件是名为 Insert.php 还是 insert.php？linux系统上的案例问题

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T19:16:59.440

你不见了

```
$stmt->execute() 
```

# c# - 如何为具有复合主键的表创建 DbSyncForeignKeyConstraint

> ID：12501310
> 
> 赞同：0
> 
> 时间：2012-09-19T19:10:45.343
> 
> 标签：c#, sync, foreign-key-relationship, microsoft-sync-framework

我正在尝试为具有复合主键的表创建 DbSyncForeignKeyConstraint，但是我不断收到错误消息。这是一些示例代码来演示我在做什么：

示例表：

```
USE [TempTest]
GO

CREATE TABLE [dbo].[Users](
        [UserId] [uniqueidentifier] NOT NULL,
    CONSTRAINT [PK_Users] PRIMARY KEY CLUSTERED 
    (
        [UserId] ASC
    )
    WITH 
    (
        PAD_INDEX  = OFF, 
        STATISTICS_NORECOMPUTE  = OFF, 
        IGNORE_DUP_KEY = OFF, 
        ALLOW_ROW_LOCKS  = ON, 
        ALLOW_PAGE_LOCKS  = ON
    ) ON [PRIMARY]
) ON [PRIMARY]

CREATE TABLE [dbo].[UsersRoles](
    [UserId] [uniqueidentifier] NOT NULL,
    [RoleId] [uniqueidentifier] NOT NULL,
    CONSTRAINT [PK_UsersRoles] PRIMARY KEY CLUSTERED 
    (
        [UserId] ASC,
        [RoleId] ASC
    )
    WITH 
    (
        PAD_INDEX  = OFF, 
        STATISTICS_NORECOMPUTE  = OFF, 
        IGNORE_DUP_KEY = OFF, 
        ALLOW_ROW_LOCKS  = ON, 
        ALLOW_PAGE_LOCKS  = ON
    ) ON [PRIMARY]
) ON [PRIMARY]

GO 
```

这是我的 C# 代码：

```
DbSyncTableDescription tableDesc = SqlSyncDescriptionBuilder.GetDescriptionForTable("UsersRoles", (SqlConnection)this.dbProvider.Connection);
Collection<string> parentkeys = new Collection<string>();
parentkeys.Add("UserId"); 
Collection<string> childkeys = new Collection<string>();
childkeys.Add("RoleId");
childkeys.Add("UserId");
tableDesc.Constraints.Add(new DbSyncForeignKeyConstraint("FK_UsersRoles_Users", "Users", "UsersRoles", parentkeys, childkeys)); 
```

上面的代码会产生这个错误：

> 引用关系中引用列的定义（如列数或数据类型）必须与引用列匹配。

如果我用 注释掉该行`childkeys.Add("RoleId")`，则会收到此错误：“引用的表必须具有主键或候选键。”

所以我有点不清楚我应该如何做到这一点。在此示例中，约束实际上应该仅与 UserId 列有关。但是，由于 UsersRoles 表有一个复合主键，我应该在约束中包含它吗？如果我在约束定义中遗漏了“RoleId”，我会得到一个错误......如果我包含它，我会得到一个不同的错误。

有人对我应该如何进行有任何建议吗？*（PS：我的代码可以在具有普通非复合*主键的表之间创建其他外键，并且该代码可以正常工作）。

编辑附加信息：好的。问题似乎与 DBSyncForeignKeyConstraint 创建无关。问题似乎与 GetDescriptionForTable 功能有关。它似乎没有将 UserId 作为主键。在我的项目中，我实际上正在使用一个使用 aspnet_Membership 模式的数据库。因此，如果我编写 aspnet_Users 表的脚本，它看起来像这样： `' CREATE TABLE [dbo].[aspnet_Users](
[ApplicationId] [uniqueidentifier] NOT NULL,
[UserId] [uniqueidentifier] NOT NULL,
[UserName] nvarchar NOT NULL,
[LoweredUserName] nvarchar NOT NULL,
[MobileAlias] nvarchar NULL,
[IsAnonymous] [bit] NOT NULL,
[LastActivityDate] [datetime] NOT NULL, PRIMARY KEY NONCLUSTERED ( [UserId] ASC )WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON) ON [PRIMARY] ) ON [PRIMARY]`

 `GO` 

`ALTER TABLE [dbo].[aspnet_Users] WITH CHECK ADD FOREIGN KEY([ApplicationId]) REFERENCES [dbo].[aspnet_Applications] ([ApplicationId]) GO
ALTER TABLE [dbo].[aspnet_Users] ADD DEFAULT (newid()) FOR [UserId]
GO
ALTER TABLE [dbo].[aspnet_Users] ADD DEFAULT (NULL) FOR [MobileAlias]
GO
ALTER TABLE [dbo] [aspnet_Users] ADD DEFAULT ((0)) FOR [IsAnonymous] GO'`

但是，如果我检查调用“GetScopeDescription”的结果，我会看到列“ApplicationId”和“LoweredUserName”列为 PKColumns，而 UserId 列在 NonPkColumns 中。我不知道是什么原因造成的。但是，至少我明白为什么错误告诉我“UserId”列不在主键中。它在数据库中，但在 GetScopDescription 的结果中不存在。所以，我至少知道从哪个方向开始搜索。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-22T03:00:41.883

不知道你是如何配置代码的，但这工作得很好

```
 var sqlConn = new SqlConnection(@"Data Source=(local)\SQLExpress; Initial Catalog=Test; Integrated Security=True");
        var sqlConn2 = new SqlConnection(@"Data Source=(local)\SQLExpress; Initial Catalog=Test2; Integrated Security=True");

        var parent = SqlSyncDescriptionBuilder.GetDescriptionForTable("Users", sqlConn);
        var child = SqlSyncDescriptionBuilder.GetDescriptionForTable("UsersRoles", sqlConn);

        var parentPKColumns = new Collection<string> {"UserId"};
        var childFKColumns = new Collection<string> {"UserId"};

        child.Constraints.Add(new DbSyncForeignKeyConstraint("FK_UsersRoles_Users", "Users", "UsersRoles", parentPKColumns, childFKColumns));

        var fKTestScope= new DbSyncScopeDescription("FKTestScope");

        fKTestScope.Tables.Add(parent);
        fKTestScope.Tables.Add(child);

        var scopeProvisioning = new SqlSyncScopeProvisioning(sqlConn2, fKTestScope);

        scopeProvisioning.Apply(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-23T18:20:02.987

好的，这似乎是范围配置功能的一个非常严重的问题。如果我转到已配置的源数据库，并查看 scope_config 表的 config_data 列中的数据，我会在 xml 中看到 aspnet_Users 表的描述方式不正确：

```
 <Adapter Name="[aspnet_Users]" GlobalName="[aspnet_Users]" TrackingTable="[aspnet_Users_tracking]" SelChngProc="[aspnet_Users_selectchanges]" SelRowProc="[aspnet_Users_selectrow]" InsProc="[aspnet_Users_insert]" UpdProc="[aspnet_Users_update]" DelProc="[aspnet_Users_delete]" InsMetaProc="[aspnet_Users_insertmetadata]" UpdMetaProc="[aspnet_Users_updatemetadata]" DelMetaProc="[aspnet_Users_deletemetadata]" BulkTableType="[aspnet_Users_BulkType]" BulkInsProc="[aspnet_Users_bulkinsert]" BulkUpdProc="[aspnet_Users_bulkupdate]" BulkDelProc="[aspnet_Users_bulkdelete]" InsTrig="[aspnet_Users_insert_trigger]" UpdTrig="[aspnet_Users_update_trigger]" DelTrig="[aspnet_Users_delete_trigger]">
<Col name="ApplicationId" type="uniqueidentifier" param="@P_1" pk="true" />
<Col name="UserId" type="uniqueidentifier" param="@P_2" />
<Col name="UserName" type="nvarchar" size="256" param="@P_3" />
<Col name="LoweredUserName" type="nvarchar" size="256" param="@P_4" pk="true" />
<Col name="MobileAlias" type="nvarchar" size="16" null="true" param="@P_5" />
<Col name="IsAnonymous" type="bit" param="@P_6" />
<Col name="LastActivityDate" type="datetime" param="@P_7" /> 
```

您可以看到 ApplicationId 和 LoweredUserName 列被标记为 pks，而它们不是。并且，UserId 列没有标记为 pk，但它应该标记为 pk。这种不正确的数据会导致为 aspnet_Users 表创建的跟踪表的结构不正确，因此，仅修复 scope_config 表中的 xml 不足以解决问题。所以，看起来我偶然发现了一个相当大的问题，需要一些工作来纠正。我认为我没有做任何事情来创建此错误，因为我在执行服务器配置时没有设置任何参数。

我无法在其他任何地方找到这个问题的描述，我觉得这很奇怪，但我会继续寻找。

啊!

我将在我的 SQL Server Management Studio 中包含来自资源管理器的图像。

感谢您，JuneT，您愿意提供帮助。

![在此处输入图像描述](../Images/59a976a236e40fddf9831abf356a1454.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-26T01:58:39.830

这看起来是由于 Sync Fx 在内部使用 DataReader 的 GetSchemaTable 来获取表结构（请参阅：[http ://social.msdn.microsoft.com/Forums/en-US/adodotnetdataproviders/thread/c1c113e2-32dc-4826- b6e0-17dff29c1baf](http://social.msdn.microsoft.com/Forums/en-US/adodotnetdataproviders/thread/c1c113e2-32dc-4826-b6e0-17dff29c1baf) )

作为一种解决方法，只需自己设置PK。

例如，

```
downloadOnlyScopeDesc.Tables.Add(SqlSyncDescriptionBuilder.GetDescriptionForTable("aspnet_Users", (System.Data.SqlClient.SqlConnection)provider.Connection));

//untag wrong PK information
foreach(var pkColumn in downloadOnlyScopeDesc.Tables["aspnet_Users"].PkColumns)
{
    downloadOnlyScopeDesc.Tables["aspnet_Users"].Columns[pkColumn.QuotedName].IsPrimaryKey = false;
}

//tag the correct PK
downloadOnlyScopeDesc.Tables["aspnet_Users"].Columns["UserId"].IsPrimaryKey = true; 
```

# javascript - 使用 JavaScript/HTML/CSS 开发 OSX 应用程序

> ID：12501311
> 
> 赞同：0
> 
> 时间：2012-09-19T19:10:54.043
> 
> 标签：javascript, cordova, desktop

我知道有 Phonegap 和 Nimblekit 可以使用 JavaScript/HTML5/CSS3 为移动平台开发本机应用程序。我正在寻找与此等效的桌面。

我找到了 Appjs、Adobe Air、Cappuccino 和 Titanium，但所有这些似乎都没有达到我想要的效果。基本上，我想用 webtechnologies 创建一个 .app。

你们中的任何人都可以指出我正确的方向吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T19:22:44.357

看看 app.js：[http ://appjs.org/](http://appjs.org/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T01:46:23.523

PhoneGap有一个Mac端口。

[https://git-wip-us.apache.org/repos/asf?p=incubator-cordova-mac.git;a=summary](https://git-wip-us.apache.org/repos/asf?p=incubator-cordova-mac.git;a=summary)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-21T01:49:17.627

[MacGap](https://github.com/maccman/macgap) is what you are looking for.

**Update 01.22.2014:** [node-webkit-hipster-seed](https://github.com/Anonyfox/node-webkit-hipster-seed), despite its less-than-informative name, combines a lot of different front end tools together for a Desktop application authoring workflow. It's based on [node-webkit](https://github.com/rogerwang/node-webkit).

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-09-12T17:33:57.597

试试 Apache Cordova mac。OSX 支持尚未正式发布，但您可以试一试

[https://github.com/apache/cordova-osx](https://github.com/apache/cordova-osx)

你也可以看看电子

[http://electron.atom.io/](http://electron.atom.io/)

# c# - C#中的创建文件

> ID：12501319
> 
> 赞同：1
> 
> 时间：2012-09-19T19:11:11.240
> 
> 标签：c#, pinvoke

我正在使用`CreateFile`函数来创建 HID 设备句柄。下面是示例代码。执行代码后，我总是得到 HidHandle value `-1`，这是不应该的。请有任何建议。

```
public int CreateFile(string FileName)
{
    HidHandle = CreateFile(FileName,GENERIC_READ | GENERIC_WRITE,
        FILE_SHARE_READ | FILE_SHARE_WRITE,0,OPEN_EXISTING,0,0);           
}

 [DllImport("kernel32.dll", SetLastError = true)]
    private static extern int CreateFile(
        string lpFileName,                          
        uint dwDesiredAccess,                       
        uint dwShareMode,                           
        uint lpSecurityAttributes,              
        uint dwCreationDisposition,                 
        uint dwFlagsAndAttributes,                  
        uint hTemplateFile                          
        ); 
```

调用`GetLastWin32Error()`返回值`5`。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-19T21:44:28.450

`CreateFile`正在返回`INVALID_HANDLE_VALUE`，表示失败。然后调用 `GetLastWin32Error()`which 返回 5。这是`ERROR_ACCESS_DENIED`. 换句话说，您的进程没有足够的权限打开该文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T15:32:39.083

尝试将其更改为

```
public int CreateFile(string FileName)
{
  return CreateFile(FileName,GENERIC_READ | GENERIC_WRITE,
       FILE_SHARE_READ | FILE_SHARE_WRITE,0,OPEN_EXISTING,0,0);           
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-09-04T03:16:39.460

CreateFile 不是 kernel32.dll 导出的函数 kernel32.dll 导出 CreateFileW 或 CreateFileA

你应该使用

[DllImport("kernel32.dll", SetLastError = true)] private static extern int CreateFileW([MarshalAs(UnmanagedType.LPWStr)] string lpFileName,
uint dwDesiredAccess,
uint dwShareMode,
IntPtr lpSecurityAttributes,
uint dwCreationDisposition,
uint dwFlagsAndAttributes,
IntPtr hTemplateFile
);

# java - Android：调用时查看返回null？

> ID：12501323
> 
> 赞同：0
> 
> 时间：2012-09-19T19:11:18.920
> 
> 标签：java, android, xml

我有一个基于布尔选项创建的视图，该视图的标题为 socialoptions，它在单独的 xml 文件中定义。每当我尝试通过诸如`socialoptions.setClickable(true);`.

Java 代码：

```
 if (isUserProfile) {
            Log.d("user","user");
            middlelayout = (LinearLayout) findViewById (R.layout.usermiddlelayout);
        } else {
            Log.d("item","item");
            middlelayout = (LinearLayout)  findViewById (R.layout.itemmiddlelayout);
            socialoptions = (TextView) findViewById (R.id.socialoptions);
            map = (TextView) findViewById (R.id.map);
        } 
```

XML 代码：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/itemmiddlelayout"
    android:layout_width="fill_parent"
    android:layout_height="0dp"
    android:layout_weight="25"
    android:background="@android:color/transparent"
    android:clickable="false"
    android:orientation="horizontal" >

    <RelativeLayout
        android:id="@+id/sociallayout"
        android:layout_width="0dp"
        android:layout_height="fill_parent"
        android:layout_weight="2"
        android:background="@android:color/transparent"
        android:paddingBottom="0dp"
        android:paddingRight="10dp"
        android:paddingTop="10dp" >

        <TextView
            android:id="@+id/socialoptions"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:background="@android:color/transparent"
            android:clickable="false" />
    </RelativeLayout>

    <RelativeLayout
        android:id="@+id/maplayout"
        android:layout_width="0dp"
        android:layout_height="fill_parent"
        android:layout_weight="1"
        android:background="@android:color/transparent"
        android:paddingBottom="10dp"
        android:paddingTop="0dp" >

        <TextView
            android:id="@+id/map"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:background="@android:color/transparent"
            android:clickable="false" />
    </RelativeLayout>

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T20:07:20.950

*根据评论*：

你不能做你想做的事；您不能引用尚未设置的 XML 布局。也就是说，你必须先使用`setContentView`或[膨胀这样的布局](https://stackoverflow.com/questions/2335813/how-to-inflate-one-view-with-an-layout)。

可绘制对象作为可引用对象存储在应用程序中；它作为“文件”存在于您的 APK 中。布局只是在“创建”之前没有任何意义的数据。

设置内容视图或将布局扩展为视图后，`null`在引用布局的内容时将不再接收对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T20:06:32.767

如果xml页面保存为usermiddlelayout.xml，可以使用R.layout.usermiddlelayout。如果 xml 文件中的线性布局将其 id 设置为 android:id="@+id/itemmiddlelayout" 您应该使用 R.id.itemmiddlelayout 而不是 R.layout.itemmiddlelayout。

这里，

middlelayout = (LinearLayout) findViewById (R.id.itemmiddlelayout);

# git - 如何在 git 中使用 gitignore 命令

> ID：12501324
> 
> 赞同：146
> 
> 时间：2012-09-19T19:11:24.810
> 
> 标签：git, github

我第一次在 git 上工作。我已经在 github 上推送了我的分支，它把所有的库和文档都推送到了 github。现在我能做什么以及如何使用 gitignore 命令来避免再次出现同样的错误。

* * *

## 回答 #1

> 赞同：188
> 
> 时间：2012-09-19T20:19:01.510

因此，根据您所说，这些文件是您不想删除但也不想推送到`github`. 假设您将项目放在文件夹`your_project`和 doc 目录中：`your_project/doc`.

1.  从项目目录中删除它（不实际删除它）： `git rm --cached doc/*`
2.  如果您还没有`.gitignore`，您可以在项目文件夹中创建一个：`project/.gitignore`.
3.  放入`doc/*`.gitignore
4.  暂存文件以提交：`git add project/.gitignore`
5.  提交：`git commit -m "message"`。
6.  将您的更改推送到`github`.

* * *

## 回答 #2

> 赞同：57
> 
> 时间：2016-10-24T11:31:42.797

如果您没有 .gitignore 文件，请先使用：

```
touch .gitignore 
```

然后这个命令在你的 gitignore 文件中添加行：

```
echo 'application/cache' >> .gitignore 
```

> 小心新线路

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2012-09-19T22:15:23.667

git ignore 是 git 中的约定。以 的名称设置文件`.gitignore` 将忽略该目录中的文件以及与文件包含的模式匹配的更深目录。最常见的用途是在顶层拥有一个这样的文件。但是您可以在目录结构中添加其他更深的模式以忽略更多模式或停止忽略该目录以及随后更深的模式。

同样，您可以通过指定以`!`. 例如：

```
*.log !important.log 
```

将忽略所有日志文件，但会跟踪名为 important.log 的文件

如果您正在跟踪您打算忽略的文件，请删除它们，将模式添加到您的 .gitignore 文件并添加所有更改

```
# delete files that should be ignored, or untrack them with 
# git rm --cached <file list or pattern>

# stage all the changes git commit
git add -A 
```

从现在开始，您的存储库将不再跟踪它们。

如果你想清理你的历史，你可以

```
# if you want to correct the last 10 commits
git rebase -i --preserve-merges HEAD~10 
```

`e`然后用or标记每个提交`edit`。保存计划。现在 git 将重放您的历史记录，并在您标记为 e 的每个提交处停止。在这里你删除你不想要的文件，`git add -A`然后`git rebase --continue`直到你完成。你的历史将是干净的。确保您告诉您的同事，因为您将不得不强制推送，他们将不得不重新调整他们尚未推送的内容。

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2012-09-19T19:16:52.787

在你的 git 根目录中有一个名为`.gitignore`. 它是一个文件，而不是一个命令。您只需插入要忽略的文件的名称，它们将自动被忽略。例如，如果您想忽略所有以 . 结尾的 emacs 自动保存文件，`~`则可以添加以下行：

```
*~ 
```

如果您想从您的分支中删除不需要的文件，您可以使用`git add -A`“[删除不再在工作树中的文件](http://www.kernel.org/pub/software/scm/git/docs/git-add.html)”。

注意：我所说的“git根目录”只是你`git init`第一次使用的目录。它也是您可以找到`.git`目录的地方。

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2019-01-18T05:29:02.193

如果您没有 .gitignore 文件。您可以通过以下方式创建一个新的

```
touch .gitignore 
```

您可以通过在 .gitignore 文件中输入以下命令来排除文件夹

```
/folderName 
```

将此文件推送到您的 git 存储库中，这样当一个新人克隆您的项目时，他不必再次添加相同的

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2019-03-27T14:50:19.003

gitignore 有几种使用方式

*   通过特定的文件名指定。例如，要忽略
    名为 readme.txt 的文件，只需将 readme.txt 写入 .gitignore 文件即可。
*   您还可以写文件扩展名的名称。例如，要
    忽略所有 .txt 文件，请写入 *.txt。
*   您也可以忽略整个文件夹。例如，您想忽略
    名为 test 的文件夹。然后只需在文件中写入 test/ 。

只需创建一个 .gitignore 文件并写入任何您想忽略的示例 gitignore 文件：

```
# NPM packages folder.
node_modules

# Build files
dist/

# lock files
yarn.lock
package-lock.json

# Logs
logs
*.log
npm-debug.log*

# node-waf configuration
.lock-wscript

# Optional npm cache directory
.npm

# Optional REPL history
.node_repl_history

# Jest Coverage
coverage

.history/ 
```

您可以在[git 文档 gitignore上找到更多信息](https://git-scm.com/docs/gitignore)

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2014-07-22T16:05:47.530

在我的 Mac 上，我发现了这个文件`.gitignore_global` ..它隐藏在我的主目录中，所以请`ls -altr`查看它。

我添加了我希望 git 忽略的 eclipse 文件。内容如下所示：

```
 *~
.DS_Store
.project
.settings
.classpath
.metadata 
```

# jquery - jqModal 从第一个模态中的链接触发第二个模态窗口

> ID：12501326
> 
> 赞同：4
> 
> 时间：2012-09-19T19:11:35.150
> 
> 标签：jquery, jqmodal

我正在尝试做一个两步模式窗口。第一个是带有提交按钮的表单，一旦单击它，它应该关闭模态，并打开第二个具有不同内容和设计的模态窗口。我不能使用 jquery hide/show 来切换不同的 div，因为在这种情况下，第二个模式是完全不同的。如果我这样做，它不起作用

`$('#callLink').click(function(){ $('#jqAgenda').jqmHide(); $('#jqConfirm').jqmShow(); });`

callLink 在 jqAgenda 模式窗口内

谢谢

* * *

这很好用，在加载新的模式窗口时，叠加层会留在背景上。

`$('#callLink').click(function(){ $('#jqAgenda').jqmHide(); }); $('#jqCall').jqm({trigger: '#callLink'});`

解决了 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T19:32:04.773

它有一个 onhide 事件，您可以在当前模式关闭时绑定一个函数。

```
onHide (callback)
Called when a dialog is to be hidden. Be sure to remove the overlay (if enabled).
// onHide : fade the window out, remove overlay after fade. 

    var myClose=function() { 
     //open a new modal here
    };

$('#dialog').jqm({onHide:myClose}); 

//(function|false) - default: false 
```

如果不起作用，请尝试将单击功能绑定到模态关闭按钮或单击时关闭它的任何内容

# java - java - 内存使用

> ID：12501328
> 
> 赞同：2
> 
> 时间：2012-09-19T19:11:45.437
> 
> 标签：java, memory, jvm, heap-memory

我正在开发一个加载大量数据的应用程序（比如来自 csv）。

我正在创建`List<List<SimpleCell>>`并将读取的单元格加载到其中。SimpleCell 类包含 5 个 * `String`，每个`String`平均有 10 个字符。

所以我在想，如果我读取 1000 行 - 每行包含 160 列 - 给出 1000*160=160 000`SimpleCell`的实例 - 这将是大约 160 000 * `sizeof(SimpleCell.class)`=~ 160 000 * 10 * 5 = 8 000 000字节 =~ 7.63 MB。

但是当我查看 jconsole 时（并单击后`Perform GC`），内存使用量约为 790MB。这怎么可能？

**请注意**，我不存储对任何“临时”对象的任何引用。这是内存使用量上升时的代码：

```
 for(int i = r.getFromIndex(); i <= r.getToIndex(); ++i) {
            System.out.println("Processing: 'ZZ " + i + "'");
            List<SimpleCell> values = saxRead("ZT/ZZ " + i + "");
            rows.add(values);
        } 
```

`saxRead`只是创建 inputStream 用 SAX 解析它，关闭流，然后返回单元格（由 SAXHandler 创建） - 所以只有局部变量（我认为在不久的'将来'会被丢弃）。

我`out of heap error`在阅读 1000 行时得到，但我必须阅读大约 7k。

显然 - 关于 jvm 内存，我不知道一些事情。那么为什么在加载这么少量的数据时内存使用量如此之大呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-19T19:26:50.250

一个字符串使用 48 个字节加上文本的大小 * 2。（每个字符是 2 个字节）简单单元格对象使用 40 个字节，它们的列表使用 1064 个字节。

这意味着每行使用 1064 + 160 * 40 + 5 * 180 * (48 + 20) 字节或大约 68K。如果您有 1000 行，您将使用大约 70 MB，这比您看到的要少得多。

我建议您使用内存配置文件来查看究竟使用了多少内存。例如 VisualVM 或 YourKit。

根据您构建字符串的方式，您可以保留比这更多的内存。例如，您可能会保留对原始 XML 的引用，因为当您获取`substring`它时，您实际上持有的是原始 XML 的副本。

* * *

你可能会发现这个类很有用。如果它们使用的内存超过了它们的需要量，它将减少使用的内存量，并使用固定大小的缓存来减少重复。

```
static class StringCache {
    final WeakReference<String>[] strings;
    final int mask;

    @SuppressWarnings("unchecked")
    StringCache(int size) {
        int size2 = 128;
        while (size2 < size)
            size2 *= 2;
        strings = new WeakReference[size2];
        mask = size2 - 1;
    }

    public String intern(String text) {
        if (text.length() == 0) return "";

        int hash = text.hashCode() & mask;
        WeakReference<String> wrs = strings[hash];
        if (wrs != null) {
            String ret = wrs.get();
            if (text.equals(ret))
                return ret;
        }
        String ret = new String(text);
        strings[hash] = new WeakReference<String>(ret);
        return ret;
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-19T19:25:48.473

JVM 内存管理引入了很多开销。例如，在 32 位 vm 上，一个包含 5 个字符的字符串会消耗 58 个字节的内存（不仅仅是 5 个！）：

JVM 开销：16b + 簿记字段：12b + 指向 char[] 的指针：4b + char[] jvm 开销：16b + 数据：10b

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-19T19:26:44.403

使用 VisualVM 来分析您的堆使用情况，并准备好大吃一惊。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-19T19:54:29.880

Java*非常*消耗内存。考虑这些估计：

## 32 位虚拟机：

**您的字符串之一的大小（大约）**

10 个 UTF-16 字符 = 20 个字节

1 个数组长度 = 4 个字节

1 个数组对象头 = 8 个字节

1 个数组引用 = 4 个字节

1 偏移量、计数、哈希码（内部字段）= 12 字节

1 个对象头 = 8 个字节

1 个典型的 Java 字符串 = 20 + 4 + 8 + 4 + 12 + 8 = 56 个字节

**简单单元格的大小（大约，包括字符串）**

5 个字符串 = 56 * 5 = 280 字节

5 个字符串引用 = 5 * 4 字节 = 20 字节

1 个对象头 = 8 个字节

1 个简单单元 = 180 + 20 + 8 = 308 字节

160000 简单单元 = 308 * 160000 = 49280000 字节

## 64 位 VM（无压缩 oops）

**您的字符串之一的大小（大约）**

10 个 UTF-16 字符 = 20 个字节

1 个数组长度 = 4 个字节

1 个数组对象头 = 8 个字节

1 个数组引用 = 8 个字节

1 偏移量、计数、哈希码（内部字段）= 12 字节

1 个对象头 = 8 个字节

1 个典型的 Java 字符串 = 20 + 4 + 8 + 8 + 12 + 8 = 60 字节

**简单单元格的大小（大约，包括字符串）**

5 个字符串 = 60 * 5 = 300 字节

5 个字符串引用 = 5 * 8 字节 = 40 字节

1 个对象头 = 8 个字节

1 个简单单元 = 300 + 40 + 8 = 308 字节

160000 简单单元 = 348 * 160000 = 55680000 字节

显然距离您的 790 Mb 很远（看起来像是泄漏），但几乎比您估计的要多一个数量级。

# java - 在 Java 中，int cast 的工作时间有多长？

> ID：12501331
> 
> 赞同：29
> 
> 时间：2012-09-19T19:12:03.257
> 
> 标签：java, casting

这个问题**不是**关于[long 应该如何正确地转换为 int](https://stackoverflow.com/questions/1590831/safely-casting-long-to-int-in-java)，而是当我们错误地将它转换为 int 时会发生什么。

所以考虑这段代码 -

```
 @Test
    public void longTest()
    {
        long longNumber = Long.MAX_VALUE;
        int intNumber = (int)longNumber; // potentially unsafe cast.
        System.out.println("longNumber = "+longNumber);
        System.out.println("intNumber = "+intNumber);
    } 
```

这给出了输出 -

```
longNumber = 9223372036854775807
intNumber = -1 
```

现在假设我进行以下更改-

```
long longNumber = Long.MAX_VALUE - 50; 
```

然后我得到输出 -

```
longNumber = 9223372036854775757
intNumber = -51 
```

问题是，**如何**将 long 的值转换为 int？

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2012-09-19T19:13:46.780

的低 32 位`long`被取出并放入`int`.

不过，这是数学：

1.  将负值`long`视为`2^64`加上该值。所以`-1`被视为 2^64 - 1。（这是*无符号*的64 位值，它是该值实际以二进制表示的方式。）
2.  Take the result and mod by 2^32\. (This is the *unsigned* 32-bit value.)
3.  If the result is >= 2^31, subtract 2^32\. (This is the signed 32-bit value, the Java `int`.)

# entity-framework - 实体框架 - 如何加载空子

> ID：12501333
> 
> 赞同：1
> 
> 时间：2012-09-19T19:12:09.760
> 
> 标签：entity-framework

我开始使用实体框架并遇到了问题。

假设我的数据库中有 2 个表。一个名为 Agent 的表包含 ID 和密码，另一个名为 AgentDetail 的表包含有关 Agent 的更多信息。但是，每个代理记录可能没有对应的 AgentDetail 记录。

我有这两个类来代表这两个表：

```
public class Agent
{
    public string AgentId { get; set; }
    public string Password { get; set; }
    public virtual AgentDetail AgentDetail { get; set; }
}

public class AgentDetail
{
    public string AgentDetailId { get; set; }
    public string AgentName { get; set; }
    public string Postcode { get; set; }
} 
```

使用 EF 我可以将数据添加到数据库中。当两个表中都有相应的记录时，我也可以检索数据。

```
 var agents = from a in context.Agents
                     select a;

        return View(agents.ToList()); 
```

但是，如果 AgentDetail 表中不存在该记录，则在呈现 AgentDetail 中的值时，我的视图中会出现 NullReferenceException。

现在这是完全可以预料的，因为没有 AgentDetail 记录。

我的问题是，当表中不存在记录时，如何让 EF 创建具有空值的 AgentDetail。

我可以在 LINQ 查询中添加一个空子对象吗 - 例如：

```
 var agents = (from a in rb.Agents
                      select new
                      {
                          AgentId = a.AgentId,
                          Password = a.Password,
                          AgentDetail = a.AgentDetail == null ? new AgentDetail() : a.AgentDetail,
                      }).ToList(); 
```

（但是，当我收到以下消息时，上述内容不起作用：

无法在 LINQ to Entities 查询中构造实体或复杂类型“Models.AgentDetail”。）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-19T20:14:20.443

你真的不想人为地添加一个“空”项目，因为那样（没有向后弯曲），该对象将被尝试持久化到数据库中。

最好的办法是拆分子数据的部分视图，并`null`在尝试从中读取值之前简单地检查。

# ektron - 在 Ektron 中编辑文档时使用的内容块异常

> ID：12501334
> 
> 赞同：0
> 
> 时间：2012-09-19T19:12:11.617
> 
> 标签：ektron

我正在尝试使用 Ektron 加载一些内容并遇到以下异常：

```
 System.Exception: com: content block in use
              at Ektron.Cms.EkException.ThrowException(Exception ex, EventLogEntryType                 EventType)
              at Ektron.Cms.Content.EkContent.GetContentForEditing(Int64 Id)
              at Ektron.Cms.ContentAPI.GetContentForEditing(Int64 Id)
              at Ektron.Cms.API.Content.Content.GetContentForEditing(Int64 Id)
              at LoadUtilities.LoadXml(String name, Stream fileContent) 
```

关于这个问题的任何建议都是有帮助的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T19:51:24.840

您的问题可能在 xml 本身。查看工作区中的内容。如果 xml 无效，则可能会导致问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T00:46:11.993

“正在使用的内容块”表示有人已签出内容，并且您尝试获取内容进行编辑。

# c - BSD C 服务器不比较缓冲区中的字符串

> ID：12501340
> 
> 赞同：1
> 
> 时间：2012-09-19T19:12:20.473
> 
> 标签：c, bsd

所以我试图将缓冲区与 strcmp 的字符串进行比较。**我希望服务器在客户端说“人”**时以特殊方式响应，否则只是回复得到它。我看不出我做错了什么，但我的输出总是“**得到它**”而不是**man，**即使我从客户端输入**man也是如此。**

```
void dostuff (int sock)
{
   int n;
   char buffer[256];
   bzero(buffer,256);
   n = read(sock,buffer,255);
    //make list match each get text and match to user
    if (n < 0) error("ERROR reading from socket");
    if (!strcmp ( buffer, "man" )) n = write(sock,"you are manly",18);
    else{  printf("Here is the message: %s\n",buffer);
        n = write(sock,"got it",18);};
           //n = write(sock,"you are gay",18);

        if (n < 0) error("ERROR writing to socket");
     /*

   if (n < 0) error("ERROR reading from socket");
   printf("Here is the message: %s\n",buffer);
   n = write(sock,"got it",18);
   if (n < 0) error("ERROR writing to socket");*/
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-19T19:26:22.817

`strcmp`假设 C 以零结尾的字符串，您并不总是从套接字获取（假设 TCP 是字节流，并且可以在向您返回数据时以任意方式拆分该流）。

检查接收到的块的大小（`n`在您的代码中）至少与显式大小参数一起`3`使用。`memcmp`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-19T19:33:14.007

问题是您`fgets()`在客户端使用来获取要发送到服务器的字符串。该字符串将有一个`\n`和结尾，并且不会匹配“man”。

要删除`\n`缓冲区末尾的 ，您可以执行以下操作：

`strtok (buffer, "\n");`它将`\n`用 a替换，`NULL`这样你`strcmp()`就可以工作了。

# c# - 如何将 DataType-targeted DataTemplate 与 GridView 一起使用？

> ID：12501344
> 
> 赞同：2
> 
> 时间：2012-09-19T19:12:33.293
> 
> 标签：c#, .net, wpf, xaml, datatemplate

**在您回答之前：**这个问题是关于 WPF 的`ListView`控件（带有`GridView`）。它与 WPF 的控件、ASP.NET或控件或 WinForm或控件**无关**。它们听起来都非常相似并且经常被混淆，但是对于错误类型的控制的答案对我来说既没有帮助，更重要的是浪费了你写答案的时间，我认为不应该浪费。`DataGrid``DataGrid``ListView``DataGridView``ListView`

* * *

我有一个`ListView`控件，`GridView`它有几列绑定到我的视图模型的属性。`GridViewColumn`我可以通过指定一个`CellTemplate`（内联或通过资源）轻松自定义 的单元格的视觉外观。

现在我的视图模型上有一个特定的属性；它的类型是一个抽象基类，它的值可以是几个派生类型之一。每个派生类型在单元格中都应该有不同的类型`DataTemplate`。幸运的是，`GridViewColumn`它`CellTemplateSelector`完全符合我的要求，但需要编写一些管道代码。但是查看[`DataTemplateSelector`](http://msdn.microsoft.com/en-us/library/ms742521.aspx)它的页面说：

> 请注意，如果您有不同类型的对象，您可以在 DataTemplate 上设置 DataType 属性。如果您这样做，则无需创建 DataTemplateSelector。[...] 有关更多信息，请参阅[数据模板概述](http://msdn.microsoft.com/en-us/library/ms742521.aspx)。

欢呼！无需编写管道代码。我的类型*不同*，所以这看起来很合适。但是，唉，即使我`DataTemplate`用 a 定义了与`DataType`数据绑定列之一的特定派生类型匹配的 a （使用`GridViewColumn`'s绑定`DisplayMemberBinding`），它也没有效果。

我只是想`DataTemplate`根据我的`GridView`. `DataType`-targeted是否`DataTemplates`与`GridView`? 有没有办法使用它们，或者我必须求助于指定一个`CellTemplateSelector`？也许有一种方法可以在's`DataTemplate`内指定多个 s ，以便该属性产生效果？`GridViewColumn``CellTemplate``DataType`

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-19T19:45:45.167

`ViewModels`WPF 允许您在逻辑树中插入对象，而`DataTemplate`在绘制可视树时可以使用 a 来告诉 WPF 如何绘制指定的对象。

隐式`DataTemplate`是`DataTemplate`只有一个已`DataType`定义（no `x:Key`）的 a，每当 WPF 尝试在 VisualTree 中呈现指定类型的对象时，它都会自动使用。

所以，你可以使用

```
<Window.Resources>

    <DataTemplate DataType="{x:Type local:ViewModelA}">
        <local:ViewA />
    </DataTemplate>

    <DataTemplate DataType="{x:Type local:ViewModelB}">
        <local:ViewB />
    </DataTemplate>

    <DataTemplate DataType="{x:Type local:ViewModelC}">
        <local:ViewC />
    </DataTemplate>

</Window.Resources> 
```

告诉 WPF 用 ViewA 绘制 ViewModelA，用 ViewB 绘制 ViewModelB，用 ViewC 绘制 ViewModelC。

如果您只想将此应用于您的 GridView 而不是整个窗口，您可以指定`<GridView.Resources>`（或者`<ListView.Resources>`，我不记得是哪一个）

应该注意的是，如果您使用 绑定列`DisplayMemberBinding`，它将呈现为`TextBox`具有绑定到您的属性的`Text`值的 a，这意味着它将呈现`YourViewModel.ToString()`而不是尝试使用您的`DataTemplate`.

为避免这种情况，只需将 设置`CellTemplate`为类似于 a`ContentPresenter`的`Content`属性绑定到您的`ViewModel`，它将使用您的隐式呈现您的 ViewModel`DataTemplates`

```
<GridViewColumn Header="Some Header">
    <GridViewColumn.CellTemplate>
        <DataTemplate>
            <ContentPresenter Content="{Binding YourViewModelProperty}" />
        </DataTemplate>
    </GridViewColumn.CellTemplate>
</GridViewColumn> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T19:19:12.943

属性的实现`DisplayMember*`是垃圾，我不知道为什么他们认为绑定 a`TextBlock`而不是 a`ContentPresenter`会是一个好主意。

我会推荐一个[附加属性](http://msdn.microsoft.com/en-us/library/ms749011.aspx)或具有相应属性的子类来覆盖它。你只需要让它创建一个`DataTemplate`包含一个绑定到目标属性`ContentPresenter`的`Content`，这将允许隐式`DataTemplating`。`DataTemplate`然后应将此延迟分配为`CellTemplate`列的。

# php - 在zend框架下载中找不到zf.bat

> ID：12501345
> 
> 赞同：10
> 
> 时间：2012-09-19T19:12:39.703
> 
> 标签：php, zend-framework2

> **可能重复：**
> [bin 文件夹中的 Zend Framework 2 “Zend Tool Missing”](https://stackoverflow.com/questions/10778626/zend-framework-2-zend-tool-missing-in-bin-folder)

我正在尝试在我的计算机上安装 zend 框架，似乎我需要一个文件 zf.bat 并且它应该位于 bin 文件夹中。我在 bin 文件夹中的所有内容是：

autoload_example.php autoload_examples.php classmap_generator.php createAutoloadTestClasses.php pluginmap_generator.php

我知道这不是一个编程问题，所以有人可以帮我将它引导到正确的论坛吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-20T03:42:56.413

没有更多的zf.bat

从这个[http://framework.zend.com/manual/2.0/en/user-guide/skeleton-application.html开始](http://framework.zend.com/manual/2.0/en/user-guide/skeleton-application.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-19T20:09:05.483

Zend Framework 2 中没有 Zend_Tool。您只需复制 Skeleton Application（暂时）。

在 ZF1 中，bin 目录中肯定有 zf.bat。仔细检查您正在下载 ZF1 并仔细检查存档的内容。

# mvvm - 如何在 MVVM 项目中实现通知图标

> ID：12501348
> 
> 赞同：5
> 
> 时间：2012-09-19T19:12:47.977
> 
> 标签：mvvm, notifyicon

我正在尝试在 MVVM 项目中实现通知图标（ [http://www.hardcodet.net/projects/wpf-notifyicon ）。](http://www.hardcodet.net/projects/wpf-notifyicon)我了解此控件旨在用于常规 WPF 项目。

我想知道如何实现气球功能（[气球功能](http://www.codeproject.com/Articles/36468/WPF-NotifyIcon#balloons)）。如本教程中所述，需要调用方法“ShowBallonTip”

```
//show balloon with built-in icon
  MyNotifyIcon.ShowBalloonTip(title, text, BalloonIcon.Error); 
```

我能想到的唯一可以调用此方法的地方是在后面的代码中。我在后面的视图代码中有一点代码没有问题（即使我不想有任何代码），但我不知道如何让视图模型与视图对话并要求它调用这个方法。

即使我将此方法放在一个事件中，我如何以编程方式从视图模型中引发此事件？

知道我怎么能做到这一点吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-20T16:19:21.610

我已经能够通过初始化视图模型中的图标而不是 XAML 来显示气球提示。

只需在我的命令中调用 ShowBalloonTip 方法就可以了。

我为通知图标创建了一个包装器：NotifyService：

```
public class NotifyService : INotifyService
{
    private TaskbarIcon icon = new TaskbarIcon
        {
            Name = "NotifyIcon",
            Icon =
                new System.Drawing.Icon(
                    Application.GetResourceStream(Utils.FileUtils.MakeUri("/Icons/email.ico")).Stream),
        };

    public void Notify(string message)
    {

        icon.ShowBalloonTip("title", message, BalloonIcon.None);
    }

    public void ChangeIconSource(string path)
    {
        icon.Icon = new System.Drawing.Icon(
                    Application.GetResourceStream(Utils.FileUtils.MakeUri(path)).Stream);
    }
} 
```

我在我的视图模型中使用了它：viewmodel

```
public class MainWindowViewModel : WindowViewModelBase
{
    private readonly INotifyService notifyService = new NotifyService();

    #region Fields
    private static HomeWindowViewModel homeViewModel = new HomeWindowViewModel();
    #endregion
    /// Initializes a new instance of the <see cref="MainWindowViewModel"/> class.
    /// </summary>
    public MainWindowViewModel()
        : base()
    {
        CurrentViewModel = homeViewModel;
    }

    #region Methods

    protected override void OnViewModelPropertyChanged(IViewModel viewModel, string propertyName)
    {
        int t = 2;
    }

    protected override void OnViewModelCommandExecuted(IViewModel viewModel, ICatelCommand command, object commandParameter)
    {
        int t = 2;
        notifyService.ChangeIconSource(@"/Icons/new_email.ico");
        notifyService.Notify("test");
    }
    #endregion
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-04-27T20:36:41.637

我找到了一个不太明显的解决方案，但可以说更适合 MVVM 模式。它允许在 XAML 中创建 TaskbarIcon 并由 ViewModel 提供新的气球数据。

首先要做的是添加某种功能来通知 TaskbarIcon 我们希望它显示一个气泡我选择使用 Microsofts Rx Extensions (NuGet Package Rx-Main) 来实现此目的，但任何合适的基础设施都可以工作。这是新的 TaskbarIcon 类，并且是一个用于保存我们希望在调用 ShowBubbleTip 方法时传递的数据的类。

```
using Hardcodet.Wpf.TaskbarNotification;
using System;
using System.Windows;
namespace Phi.Utility
{
    public class TaskbarIconRxBallonNotification
    {
        public Hardcodet.Wpf.TaskbarNotification.BalloonIcon Icon
        {
            get;
            private set;
        }
        public string BallonTitle
        {
            get;
            private set;
        }
        public string Message
        {
            get;
            private set;
        }
        public TaskbarIconRxBallonNotification(Hardcodet.Wpf.TaskbarNotification.BalloonIcon icon, string balloonTitle, string message)
        {
            Icon = icon;
            BallonTitle = balloonTitle;
            Message = message;
        }
    }
    public class TaskbarIconRx : TaskbarIcon
    {
        public IObservable<TaskbarIconRxBallonNotification> BalloonTipNotifier
        {
            get { return (IObservable<TaskbarIconRxBallonNotification>)GetValue(BallonTipNotifierProperty); }
            set { SetValue(BallonTipNotifierProperty, value); }
        }

        // Using a DependencyProperty as the backing store for BalloonSubject.  This enables animation, styling, binding, etc...
        public static readonly DependencyProperty BallonTipNotifierProperty =
            DependencyProperty.Register("BalloonTipNotifier", typeof(IObservable<TaskbarIconRxBallonNotification>), typeof(TaskbarIconRx), new PropertyMetadata(null, BallonTipNotifierChanged));

        //What to do when we get a new ballonIcon request
        protected void OnNextNotification(TaskbarIconRxBallonNotification notification)
        {
            ShowBalloonTip("", notification.Message, BalloonIcon.Info);
        }
        private IDisposable _subscription;

        //Make sure swapping out bindings doesn't break our program.
        public static void BallonTipNotifierChanged(DependencyObject d, DependencyPropertyChangedEventArgs e)
        {
            TaskbarIconRx currentNotifier = d as TaskbarIconRx;
            if (currentNotifier != null)
            {
                IObservable<TaskbarIconRxBallonNotification> prev = e.OldValue as IObservable<TaskbarIconRxBallonNotification>;
                IObservable<TaskbarIconRxBallonNotification> next = e.NewValue as IObservable<TaskbarIconRxBallonNotification>;

                if (currentNotifier._subscription != null)
                {
                    currentNotifier._subscription.Dispose();
                    currentNotifier._subscription = null;
                }
                if ((next != null))
                {

                    currentNotifier._subscription = next.Subscribe(currentNotifier.OnNextNotification);
                }
            }
        }

    }
} 
```

在我们的模型中，我们提供了一个 ISubject 来绑定

```
using System.Reactive.Subjects;
namespace Phi.Models {
    public class SomeModel:ModelBase {
        public ISubject<Utility.TaskbarIconRxBallonNotification> NotifierInterface
        {
            get;
            private set;
        }
        public SomeModel() {
            NotifierInterface = new Subject<Utility.TaskbarIconRxBallonNotification>();

        }
    }
} 
```

在我们的 ViewModel 中，我们现在可以通过模型主题推送通知，如下所示：

```
namespace Phi.ViewModels{
    public class SomeViewModel:ViewModelBase
    {
        public SomeModel Model{
            get;
            private set;
        }
        public void PushNotification(string message)
        {
            //Pushes a new notification to the TaskbarIcon.
            Model.NotifierInterface.OnNext(new Utility.TaskbarIconRxBallonNotification(Hardcodet.Wpf.TaskbarNotification.BalloonIcon.Info, "Title", message));
        }
    }
} 
```

在 XAML 中，我们绑定到我们的模型 ISubject

```
<Utility:TaskbarIconRx Visibility= IconSource="/Resources/TinyLogo.ico" BalloonTipNotifier="{Binding Model.NotifierInterface}" > 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-07-12T15:43:01.113

只需在视图中使用 ContentControl 绑定到在 VM 中实例化的 TaskbarIcon 对象。然后直接向 VM 中的对象发出命令。

XAML：

```
 <ContentControl Content="{Binding NotifyIcon}"/> 
```

代码：

```
 private TaskbarIcon notifyIcon;
    public TaskbarIcon NotifyIcon
    {
        get { return notifyIcon; }
        set { notifyIcon = value; OnPropertyChanged("NotifyIcon"); }
    }
    private void ShowBalloon()
    {
       NotifyIcon.ShowBalloonTip("Hi", "Some info here.", BalloonIcon.Info);
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-08-08T11:37:37.767

```
TaskbarIcon MyNotifyIcon = new TaskbarIcon();

    private void ShowStandardBalloon()
    {

        if (ping == false)
        {
            string title = "Website is offline!";
            string text = Url;
            MyNotifyIcon.ShowBalloonTip(title, text, BalloonIcon.Error);
        }else if(ping == true)
        {
            string title = "Website is online!";
            string text = Url;
            MyNotifyIcon.ShowBalloonTip(title, text, BalloonIcon.Info);
        }
     } 
```

将其粘贴到您的 ViewModel 中并更改值，您就可以开始了。只需调用 ShowStandartBallon(); 并且您在 Code Behind 中没有代码。

[编辑]

```
TaskbarIcon MyNotifyIcon = new TaskbarIcon();

    private void ShowStandardBalloon()
    {
            string title = "Website is offline!";
            string text = Url; //Url is a String
            MyNotifyIcon.ShowBalloonTip(title, text, BalloonIcon.Error);
    } 
```

# php - Google 或 Bing 地图类或插件

> ID：12501353
> 
> 赞同：-1
> 
> 时间：2012-09-19T19:13:05.477
> 
> 标签：php, class, google-maps, plugins, bing-maps

我在网上搜索过，似乎找不到任何最新且简单的 google 或 bing map php 类或插件。

我正在建立一个房地产搜索网站，我正在寻找一个简单的 php 类，它可以在地图上显示多个地址。我希望找到一个 php 类或插件，我所要做的就是“要求一次”类/插件和地址，并且类/插件将完成所有工作。

我愿意使用谷歌或必应地图。有谁知道任何有助于实现这一目标的 php 类/插件，而无需手动编写整个功能的代码。

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T19:22:14.627

谷歌地图和必应地图是客户端的（JavaScript 驱动的），这就是为什么你找不到任何 PHP 库的原因。

为了在地图上显示感兴趣的地点，您希望从数据库中获取您的项目，然后使用 JavaScript 将它们添加到您的地图中。在谷歌地图中，​​这看起来像这样：

```
// instantiate the map
var map = new google.maps.Map(document.getElementById('map'), {
    center: new google.maps.LatLng(54.673830, -4.746093),
    mapTypeId: google.maps.MapTypeId.ROADMAP,
    zoom: 8
});

// create an InfoWindow
var infowindow = new google.maps.InfoWindow();

// fetch results from a PHP script
// assumes results are returned as a JSON-encoded array
$.getJSON('script.php', function(results) {
    $.each(results, function(i, result) {
        // create a market representing place of interest
        var marker = new google.maps.Marker({
            map: map,
            position: new google.maps.LatLng(result.latitude, result.longitude);
            title: result.title
        });

        // display information in infowindow on click
        google.maps.event.addListener(marker, 'click', function() {
            infowindow.setContent(result.content);
            infowindow.open(map, marker);
        });
    });
}); 
```

希望这会让你开始。查看[Google Maps JavaScript API](https://developers.google.com/maps/documentation/javascript/)的文档，其中包含 API 的综合指南以及大量示例。

# mysql - 总答案数

> ID：12501354
> 
> 赞同：0
> 
> 时间：2012-09-19T19:13:07.730
> 
> 标签：mysql, count

我正在尝试获取该问题的总答案数。（表结构见附图）

不知何故，我发现了这段代码，我相信它与我正在寻找的类似，但不确定如何显示总答案数（数据库中的类型 = A）

```
SELECT * FROM ^posts a, ^posts q WHERE a.parentid=q.postid AND a.type="A" AND q.type="Q" 
```

![在此处输入图像描述](../Images/79a4d8a00d5c2193fd790817ee9adfc1.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T19:24:58.020

如果你想要答案总数（类型 = 'A'），彼得给了你答案。

如果您想知道特定问题的答案数量，

```
SELECT COUNT(*) FROM posts a, posts q 
WHERE a.parentid = q.postid 
AND a.type='A' AND q.type='Q' 
AND q.postid = <question_id_for_which_you_need_answer_count> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T19:27:18.890

回到表中查看答案。LEFT JOIN 如果没有答案：

```
SELECT q.postid, count(a.*)
FROM posts p
LEFT OUTER JOIN posts a ON p.postid = a.parentid
WHERE p.type = "Q"
GROUP BY 1; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-19T19:35:45.387

```
select q.postid, count(a.postid) from posts q 
left outer join posts a on q.postid = a.parentid
where q.type = 'Q' 
group by q.postid 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-19T19:15:32.193

你试过这个吗？

```
SELECT COUNT(*) FROM [table] WHERE type = 'A' 
```

（为 [table] 插入您的表名）

# java - 在 Mac OS X 的 Chrome 中运行 Java7（需要 64 位？）

> ID：12501356
> 
> 赞同：32
> 
> 时间：2012-09-19T19:13:17.657
> 
> 标签：java, macos, google-chrome, 64-bit

我的家庭银行系统需要 Java 才能登录银行 - 请参阅[https://www.nemid.nu/](https://www.nemid.nu/)了解系统说明（仅限丹麦语）。

这在 Mac OS X 下的 Chrome 中运行良好，直到最近突然需要重新下载 Java 插件。不幸的是，Oracle 给了我以下信息：

> Chrome 不支持 Java 7。Java 7 只能在 64 位浏览器上运行，而 Chrome 是 32 位浏览器。
> 
> 如果您下载 Java 7，您将无法在 Chrome 中运行 Java 内容，并且需要使用 64 位浏览器（例如 Safari 或 Firefox）在浏览器中运行 Java 内容。此外，安装 Java 7 将禁用在您的系统上使用 Apple Java 6 的能力。

请注意，我无法从 Mac 上卸载 Java 7，因为它用于我的工作。

除了使用 Safari 进行家庭银行业务之外，我现在还能做什么？我找不到 64 位 Chrome，虽然 Chrome 应该[支持它](http://www.chromium.org/developers/design-documents/64-bit-support)，但似乎没有[任何正式发布的计划](http://www.quora.com/Why-is-Chrome-for-Mac-not-64-bit-yet)。

# java - 另一个警报对话框之后的警报对话框？第一个不见了！安卓

> ID：12501357
> 
> 赞同：3
> 
> 时间：2012-09-19T19:13:16.757
> 
> 标签：java, android, dialog, progressdialog, android-alertdialog

我有一个活动（ImportActivity），用户在其中输入一些度量值并将它们保存到 sqlite 数据库中。

当用户在导入数据库后单击保存按钮时，我有一个警报对话框（SAVEORBACK_DIALOG_ID），用户可以在其中离开此活动或导入另一个措施。它工作得很好。

我的问题是当我尝试在（SAVEORBACK_DIALOG_ID）警报对话框之前显示另一个警报对话框（SMS_DIALOG_ID）时。这是因为我想询问用户是否发送短信。

当我运行它时，它只显示**第二个警报对话框**（SAVEORBACK_DIALOG_ID）！

![进口活动](../Images/1e6a7f8ab3182c9f7a94d70a1f4ceff3.png) ![这是最后的对话](../Images/ca1738dbeacccb479021040b29328f92.png)

我在活动中：

```
 static final int DATE_DIALOG_ID = 0;
static final int TIME_DIALOG_ID = 1;
static final int SAVEORBACK_DIALOG_ID = 2;
static final int SMS_DIALOG_ID = 3; 
```

我从我的活动中给他们打电话：

```
 // sms dialog(send sms to doctor?yes/no)
        showDialog(SMS_DIALOG_ID);

        // save or back dialog
        showDialog(SAVEORBACK_DIALOG_ID); 
```

这是我有我的对话框的 onCreateDialog 方法（我删除了一些更容易阅读）：

```
 @Override
protected Dialog onCreateDialog(int id) {
    switch (id) {
    case DATE_DIALOG_ID:
        return new DatePickerDialog(this, mDateSetListener, mYear, mMonth,
                mDay);
    case TIME_DIALOG_ID:
        return new TimePickerDialog(this, mTimeSetListener, mHour, mMinute,
                false);
    case SAVEORBACK_DIALOG_ID:
        AlertDialog.Builder builder = new AlertDialog.Builder(this);
        builder.setMessage(
                "Information saved successfully ! Add Another Info?")
                .setCancelable(false)
                .setPositiveButton("No",
                        new DialogInterface.OnClickListener() {
                            public void onClick(DialogInterface dialog,
                                    int id) {
                                ImportActivity.this.finish();

                            }
                        })
                .setNegativeButton("Yes",
                        new DialogInterface.OnClickListener() {
                            public void onClick(DialogInterface dialog,
                                    int id) {
                                dialog.cancel();
                                // get the new date
                                // Clearing the fields & update date/time
                                // textviews
                            }
                        });
        AlertDialog dialog = builder.create();
        return dialog;

        // case sms dialog
    case SMS_DIALOG_ID:
        AlertDialog.Builder builder2 = new AlertDialog.Builder(this);
        builder2.setMessage("High blood pressure ! Send sms to doctor?")
                .setCancelable(false)
                .setPositiveButton("No",
                        new DialogInterface.OnClickListener() {
                            public void onClick(DialogInterface dialog,
                                    int id) {
                                dialog.cancel();
                                // do nothing - just continue
                            }
                        })
                .setNegativeButton("Yes",
                        new DialogInterface.OnClickListener() {
                            public void onClick(DialogInterface dialog,
                                    int id) {
                                dialog.cancel();
                                // try to send sms - report status
                            }
                        });
        AlertDialog dialog2 = builder2.create();
        return dialog2;
        //

    }
    return null;
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-19T19:18:54.240

这些命令是连续执行的，正如您所注意到的，它会覆盖第一个对话框：

```
 // sms dialog(send sms to doctor?yes/no)
    showDialog(SMS_DIALOG_ID);

    // save or back dialog
    showDialog(SAVEORBACK_DIALOG_ID); 
```

因为`showDialog()`在显示第二个对话框之前不会等待第一个对话框的响应。

只需将第二个`showDialog()`命令移动到第一个对话框中的按钮：

```
.setPositiveButton("No",
    new DialogInterface.OnClickListener() {
        public void onClick(DialogInterface dialog, int id) {
            dialog.cancel();
            // do nothing - just continue
            ImportActivity.this.showDialog(SAVEORBACK_DIALOG_ID);
        }
    })
// etc, etc 
```

* * *

或者，您可以使用 OnDismissDialogListener，*只要*对话框关闭（通过按钮单击、取消操作等），就会调用它：

```
case SMS_DIALOG_ID:
    ...
    AlertDialog dialog2 = builder2.create();

    dialog2.setOnDismissListener(new OnDismissListener() {
        public void onDismiss(DialogInterface dialog) {
            ImportActivity.this.showDialog(SAVEORBACK_DIALOG_ID);
        }
    });

    return dialog2;
} 
```

# javascript - 单页应用程序上的用户身份验证？

> ID：12501359
> 
> 赞同：39
> 
> 时间：2012-09-19T19:13:32.573
> 
> 标签：javascript, authentication, backbone.js, javascriptmvc, single-page-application

我开发了一个单页应用程序原型，它在前端使用 Backbone，并从服务器上的瘦 RESTful API 中使用它的数据。

来自繁重的服务器端应用程序开发（php 和 python），我真的很喜欢带有厚客户端 MVC 的新的不同设计方法，但对于如何最好地将应用程序限制为登录的经过身份验证的用户感到困惑。

我更喜欢让应用程序本身在登录之后，并且除了站点的本机登录之外，还希望最终实现其他类型的登录（openid、fb connect 等）。我不清楚这是如何完成的，并且一直在搜索 - 但是没有成功找到让我清楚的信息。

总的来说，目前注册用户并要求他们登录以使用您的单页应用程序的最佳实践是什么？

用户登录后，如何对 api 请求进行身份验证？我可以存储一个会话，但是如何在 API 调用中检测这个会话，或者是否有一个令牌我必须在每个 API 调用中传递？对此的任何答案将不胜感激！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-11-06T19:10:03.463

我见过的最 RESTful 方式是基于 OAuth 客户端凭据流，基本上是您发布用户名/密码的 /token 端点，该端点返回此会话的访问令牌。之后的每个 ajax 请求都会附加一个`Authorization`带有令牌的不记名标头。您可以将令牌存储在全局变量中，以便在页面刷新/关闭之前保留它，使用本地存储来保持用户在会话之间登录，或使用 javascript cookie。如果您不喜欢令牌的想法，那么您可以使用旧的 cookie 方法，无论如何都会自动发送任何 ajax 请求。

至于 facebook/google 等，我通常遵循 stackoverflow 方法，将外部用户登录与帐户相关联。然后使用一个相当普通的基于服务器的 oauth 舞蹈（尽管您可以用 ajax 请求替换所有对服务器的请求，只需稍作修改，我只是发现它并没有太大的区别，因为无论如何您都需要在您和服务器之间进行重定向）。我通常为 facebook 登录发布一个加密的 cookie，然后我使用与上述类似的方法将其转换为令牌（只需发送带有请求而不是用户名/密码的 cookie）。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-09-19T20:58:11.333

我们使用基于 django cookie 的身份验证，并为登录和单页应用程序提供单独的页面。非常适合我们的用例。我们使用了我在这里描述的基于 Backbone 的会话管理系统：[backbone.js - 处理用户是否登录](https://stackoverflow.com/questions/5808655/backbone-js-handling-if-a-user-is-logged-in-or-not/5837057#5837057)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-04-08T16:15:07.507

我们正在使用 Angular.js，并且还有一个单独的登录页面。单独的页面加载单独的单页面（和安全）应用程序，该应用程序使用 http XHR 请求调用服务器，发送用户名和密码。如果服务器对凭据进行了身份验证，则 javascript 代码会设置一个 cookie。此 cookie 可以从“另一端”读取，即非安全应用程序。在 cookie 中，我们只输入用户名，当然，没有密码或其他安全信息。那么我们可以展示类似'Not Lior? 在非安全应用程序上注销。

唯一需要注意的是重写 Angular 的 cookie 机制来设置无限期过期，最重要的是，根路径：

```
$document[0].cookie = 'username=' + escape($scope.userName) + ";expires=Thu, 01 Jan 2970 00:00:00 GMT; Path=/"; 
```

# html - 窗口 div 超出页脚

> ID：12501364
> 
> 赞同：0
> 
> 时间：2012-09-19T19:14:04.003
> 
> 标签：html, css

我一直在努力让我的网站有一个边距均匀的包装器，但是底部边距总是太大。为了隔离问题，我注释掉了 html 中的所有 div 内容，并注释掉了所有与基本 div 无关的 css 选择器，但窗口 div 仍然会超出页脚。

这是 css，您会注意到某些 css 属性以 s 开头拼写错误。不用担心这些，这只是我注释掉 css 属性的一种快速方法。

```
.window {
    width: 88%;
    height: 99%;
    smargin-top: 3%;
    smin-height: 800px;
    margin-left: 7%;
    sbox-shadow: 0px 0px 10px 1px #000000;
    min-width: 1110px;
    background-color: #FF0000;
}
.header {
    height: 15%;
    width: 100%;
    background-color: #DDDDDD;
    padding-top: 1%;
    smin-height: 100px;
}
.nav {
    font-size: 20px;
    spadding-top: 1%;
    height: 5%;
    width: 100%;
    background-color: #999999;
    font-family: Tahoma, Geneva, sans-serif;
    smin-height: 35px;
    max-height: 40px;
}
.content {
    height: 60%;
    width: 100%;
    smin-height: 350px;
    : ;
    spadding-top: 3%;
    background-color: #FFFFFF;
}
.footer {
    font-family: Arial, Helvetica, sans-serif;
    height: 5%;
    width: 100%;
    background-color: #DDDDDD;
    smin-height: 30px;
} 
```

这是 html，我排除了所有注释掉的内容，因此问题将与它的基本基础结构隔离。

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Excercise 2 CSS</title>
</head>

<body>
    <div class="window">
             <div class="header">

             </div>
             <div class="nav">

             </div>
             <div class="content">

             </div>
             <div class="footer">

             </div>
        </div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T20:06:28.077

您的添加不正确。在您的 CSS 中，您的高度为：页眉 15%、导航 5%、内容 60% 和页脚 5%，它们加在一起仅等于 85%。我不肯定填充会如何影响这样的布局，但如果你应用 box-sizing:border-box; 对于您的 div，填充不会影响整体大小（将减法而不是加法）

更正的代码如下（尽管我删除了大部分其他 CSS）

```
html, body
{
    height: 100%;
}

.window {
    height: 100%;
    width: 100%;
    background-color: #FF0000;
}
.header {
    height: 15%;
    background-color: #DDDDDD;
}
.nav {
    height: 5%;
    background-color: #999999;
}
.content {
    height: 75%;
    background-color: #FFFFFF;
}
.footer {
    height: 5%;
    background-color: #DDDDDD;
}​ 
```

# javascript - 如何使用 JSP 或 Javascript 在 C: 驱动器上获取本地文件的属性？

> ID：12501365
> 
> 赞同：1
> 
> 时间：2012-09-19T19:14:04.160
> 
> 标签：javascript, file, jsp, properties

我正在使用 JSP/Javascript 开发一个 Web 应用程序，它允许用户上传本地字体文件，如何使用 Java 或 Javascript 从 JSP 页面中字体的文件属性中获取字体标题？

![在此处输入图像描述](../Images/456ae184c75013d9fbe0f8983316c36a.png)

从附图中查看详细信息，我想获得“标题”的值，即：ACME Explosive Bold

我想在用户实际点击提交按钮并上传之前向他们展示信息。是的，它需要在用户端发生，如下所示：

![在此处输入图像描述](../Images/489cfac0fd83f9c3d05559b141d75c7d.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T19:23:34.083

我写了一个库来做到这一点。[请参阅此处](http://fontificate.samlecuyer.com/)的示例。您要特别查看的文件是 fontificate.js 以及 index.html 内联脚本。Calabash.js 是我为 Promise 编写的另一个库，大部分情况下都可以忽略（只要它仍然包含在内）。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-20T08:11:33.797

我相信这对于 JSP 或 JavaScript 是不可能的。安全约束不允许您访问本地文件。HTML`<input type="file"`也不能被您的代码截获，因此我只看到一次机会：只要用户信任它，Java Applet 就可以做到这一点。Flash 可能也可以，但我不知道。

# c++ - 查找表是哈希表的一种形式吗？

> ID：12501367
> 
> 赞同：5
> 
> 时间：2012-09-19T19:14:09.663
> 
> 标签：c++, c, language-agnostic, hashtable, terminology

我想看看我在这里的概念是否正确。.

如果我试图避免必须为`someExpensiveFun(x)`浮点数据数组中的每个元素计算计算量大`x`，比如限制在零和一之间的值，则可以首先预先计算昂贵函数的输出并将其存储在表中。. .

```
for (int nn = 0; nn < 1000; ++nn)
{
    float tmp = ((float)nn) / 1000.f;
    lookup[nn] = someExpensiveFun(tmp);
} 
```

然后在性能关键代码的主体中我可以使用 . . .

```
y = lookup[(int)floor(x*1000.f)]; 
```

`lookup`调用某种形式的哈希表和相关的哈希函数在概念上是否正确（而不是滥用术语）`x*1000`？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-19T19:19:08.233

不，将查找表称为哈希表在概念上是不正确的：在您的情况下，查找表是一个简单的数组。在散列函数不完美的情况下（即存在散列冲突），将某些东西称为散列表意味着某些行为；数组没有这种行为，因此称其为“哈希查找”可能会误导您的听众或读者。

一般来说，任何类型的关联存储，包括哈希表、各种树等，都可以用来执行查找操作。在您的情况下，数组的索引与存储在该索引处的值相关联，让您可以在恒定时间内查找该值。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-19T19:32:32.837

我个人认为这是对术语的滥用。它缺乏人们自然期望从哈希表中获得的属性，尤其是对具有相等哈希的非相等键执行某些操作的能力。而且我很确定您的“哈希函数”必须被视为`floor(x*1000.f)`or `(int)floor(x*1000.f)`，而不仅仅是`x*1000.f`.

哈希表通常也可以接受其键类型的任何值作为键，而不仅仅是一个范围内的值，但也许我在那里太挑剔了。我不会将不允许`NaN`作为键的其他正常哈希表称为“不是哈希表”。

它与哈希表有一些共同的属性（将键映射到整数的非内射函数，所述整数用作数组中的索引）。如果有人想确定这两个东西共同表征“哈希表”，好吧，祝他们好运，这是一个哈希表:-)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-19T20:02:42.627

你倒过来了。哈希表总是可以用作数组的慢替代品，但数组不能用作哈希表的替代品（除非满足一些非常严格的先决条件）。

在您的情况下，查找甚至不会产生与计算相同的结果，只会产生近似值。真正的哈希表将区分散列到相同索引的不同输入。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-19T20:10:03.560

是的，如果您接受 Wikipedia 对[hash table](http://en.wikipedia.org/wiki/Hash_table)的定义。引用该定义：

```
Ideally, the hash function should map each possible key to a unique slot index,
but this ideal is rarely achievable in practice (unless the hash keys are fixed;
i.e. new entries are never added to the table after it is created). 
```

您选择了一个数组，因为[您的函数的域](http://en.wikipedia.org/wiki/Domain_of_a_function)定义明确且相对较小，并且适合作为数组的索引 - 函数的域具有到数组索引的[到](http://en.wikipedia.org/wiki/Surjective_function)映射。您可以将索引视为`key`to，`hash table`而函数输出是关联的值。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-20T07:31:03.993

您可以用哈希表替换所有查找表，但不能用查找表替换所有哈希表。所以是的，查找表可以被认为是哈希表的一种特殊形式，而哈希表可以被认为是查找表的一般形式。

类似地，列表可以被认为是二维表的一种特殊形式（只有一列）。

但是，我们在这里谈论的是软件。给定问题有无数种不同的解决方案，构建数据结构的可能性也有无数种。例如，具有静态大小或动态增长，具有所需的唯一条目或具有冲突处理，具有固定或可配置的哈希函数等。在普通查找表和完整哈希表之间有很多方法，没有清晰的边界，你可以在这里说它是这个，但它已经变成那个了。

然而（再一次），当一个特定的数据结构被证明是有用的时，它通常有自己的名字。正如这里所说，有了这样的名称，就会对功能产生相关的期望。甚至可能对所需的最低功能有严格的定义。如果您希望其他人可以阅读您的代码，则最好遵守已知术语。因此，您应该将您的查找表称为查找表，即使从技术上讲它是一种特殊形式的哈希表。

# regex - 如何从字符串中删除一系列十六进制值？

> ID：12501370
> 
> 赞同：1
> 
> 时间：2012-09-19T19:14:22.800
> 
> 标签：regex, oracle, oracle11g

使用 Oracle 11g，我有一个转储为以下十六进制值的字符串：

v_string := t
?

```
74:3c:42:52:3e:a:3c:42:52:3e:a 
```

我试过了

```
 v_string := REGEXP_REPLACE(v_string,'\x03c\x042\x052\x03e\x0a\x03c\x042\x052\x03e\x0a',''); 
```

但这不起作用。如何从 v_string 中删除该十六进制值字符串，留下 v_string = t？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T20:07:12.600

由于您似乎正在处理一个字符串，并且您似乎只想删除该序列，所以问题可能是您认为十六进制字符串很特殊，而它只是一个字符串？也许这就是你要找的？

```
 v_string := REGEXP_REPLACE(v_string,'74:3c:42:52:3e:a:3c:42:52:3e:a',''); 
```

如果这不是一个有用的解决方案，完整字符串的示例及其正确替换可能会有所帮助......不确定我是否完全理解您的问题。

# php - "!$a==$b" 比 "$a != $b" 快吗？

> ID：12501373
> 
> 赞同：0
> 
> 时间：2012-09-19T19:14:29.630
> 
> 标签：php, operators

我正在阅读一本关于运算符的 PHP 书籍。

书上说这样`if(!$a == $b)`更快`if($a != $b)`。
这是真的？

我用 MS 试过这个，但没有结果。你怎么看？

**编辑：** `if($a != $b)`然后更快`if(!$a == $b)`

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-19T19:21:06.453

这似乎是一个悖论，但这些陈述并不等同：

```
$a = '0';
$b = null;

var_dump(!$a == $b); // false
var_dump($a != $b); // true 
```

...因为非传递类型强制。因此在这里谈论速度没有任何意义。

**更新：**也许这也应该解释一下。) 第一次比较将被评估为...

```
(!'0') == null; 
```

换句话说， first`'0'`将被转换为`boolean`（导致`false`; 注意与 JavaScript 的区别）。当然，`!false`计算结果为-在任何语言中`true`都不能等于（*但实际上**也被转换为布尔值，只有这样才会比较这些值*）。`null` *`null`*

 **在第二个比较中`'0'`（一个字符串）与`null`- 进行比较，突然规则[发生了变化](http://php.net/manual/en/language.operators.comparison.php#language.operators.comparison.types)。`null`被转换为一个空字符串 (!)，这个空字符串将实际与`'0'`. 不用说，这些也不相等。

最重要的是，在摆弄比较运算符以提高速度时，您应该非常小心。它可能会导致非常微妙的 - 并且跟踪非常不同的 - 错误。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-19T19:23:55.083

编辑：不，几次之后似乎根本没有区别：

[http://sandbox.onlinephpfunctions.com/code/09c03d21b5dfe626d6a5c4791b94ac49e2d4fa1a](http://sandbox.onlinephpfunctions.com/code/09c03d21b5dfe626d6a5c4791b94ac49e2d4fa1a)

点击执行几次，没有区别。

第一次测试：0.075621128082275 第二次测试：0.080623149871826

一百万次迭代平均慢约 0.005 秒。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-19T19:24:57.897

超过 1,000,000 次迭代，我发现它`if( $a != $b)`比 慢了大约 40% `if( !$a == $b)`，但是这个差异只有大约 0.04 纳秒，而且它们并不相等。

```
$a = "123";
$b = 456;
var_dump(
    $a != $b, // true
    !$a == $b // false
); 
```**

# mysql - 为列分配随机值

> ID：12501374
> 
> 赞同：0
> 
> 时间：2012-09-19T19:14:30.820
> 
> 标签：mysql, sql

我有以下表格：

表格1：

```
+-----------+-------------+
| record_id | record_name |
+-----------+-------------+
| 0         | 'test'      |
| 1         | 'test1'     |
| 5         | 'mytest'    |
| 8         | 'ultratest' |
| ....      | ....        |
+-----------+-------------+ 
```

表2：

```
+---------+-----------+
| user_id | record_id |
+---------+-----------+
| 1       | 0         |
| 2       | 0         |
| 3       | 0         |
| 4       | 0         |
| ....    | ....      |
+---------+-----------+ 
```

我想为表 2 的每一行分配一个随机的 record_id，从表 1（0,1,5,8）中的 ids 中获取；id 不必是唯一的。

我已经阅读[了这个答案](https://stackoverflow.com/questions/602952/mysql-query-to-assign-a-unique-random-number-to-each-row)，这对这种情况没有好处，因为那里分配的数字是连续的

我如何用 mysql 做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T19:29:33.133

来自 mysql 文档

要获得`R`范围内的随机整数`i <= R < j`，请使用表达式`FLOOR(i + RAND() * (j – i))`。例如，要获取 range 范围内的随机整数`7 <= R < 12`，可以使用以下语句：

```
SELECT FLOOR(7 + (RAND() * 5)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T19:46:23.810

```
select t2.user_id, t1.record_id 
from 
    t2
    inner join (
        select record_id
        from t1
        order by rand()
    ) t1 on 1 = 1
group by t2.user_id 
```

# asp.net-mvc - 在 MVC3 中创建删除链接的正确方法是什么？

> ID：12501381
> 
> 赞同：0
> 
> 时间：2012-09-19T19:14:43.693
> 
> 标签：asp.net-mvc, asp.net-mvc-3, actionlink

起初，我只使用该`Html.ActionLink`方法创建删除链接。但后来我看到一篇文章说那是错误的。并且不应该那样使用。然后建议Master -> Detail方式。但这似乎很愚蠢。应该有一种方法让我拥有一个删除链接（带有“你确定”提示）并且仍然不是安全漏洞。正确的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T19:23:01.680

是的，使用 GET 方法删除数据是不好的做法。您需要使用 POST 方法，它可以完成，例如使用表单或 jquery/javascript。但请注意，如果您使用带有附加提示的简单链接，用户可以单击中心按钮并删除数据或禁用 javascript。这也是一个安全问题，有人可以给你链接，你从服务器中删除一些数据。

**例子：**

```
<a href="/controller/delete/1" onclick="$.post(this.href); return false;">Delete</a> 
```

如果服务器获取到 /controller/delete/x 的 GET，则提供带有 POST 表单的确认页面（在此表单上，我们放置了两个按钮`Yes`和`No`，第一个按钮提交带有隐藏字段的表单）。如果服务器收到 POST（或者可能是 DELETE）请求，则执行删除。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T01:34:43.133

该问题与链接或 ActionLink 或类似内容无关。问题是您不应该有在 HttpGet 请求上删除的操作方法。

至于为什么你不应该这样做。想象一下，您的老板在您的在线员工档案中输入了谴责。如果您碰巧知道这个应用程序使用Get请求删除记录，那么您只需创建一个特制页面，其中img标签包含删除您谴责的URL，然后将其放在公司主页上。最终，有权删除这些条目的人会进入网页并噗嗤……你有一个明确的记录。

这可能看起来并不那么糟糕。你只是提高了你的地位。但是想象一下，你的同事生你的气，他知道一个类似的技巧，可以让他欺骗你的老板降低你的工资。

不再那么好笑了。

允许这些类型或操作是不安全的，因为它们可以在用户甚至不知道他们在做什么的情况下被触发。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-20T01:12:22.290

在下面的文章中，他们描述了一种很好的方式来做你正在寻找的事情： [Simple jQuery Delete Link For ASP.NET MVC](http://haacked.com/archive/2009/01/30/simple-jquery-delete-link-for-asp.net-mvc.aspx)。

但我认为你真正寻找的替代方法是这个帖子： [ASP.NET MVC Delete ActionLink with confirm](https://stackoverflow.com/questions/4682107/asp-net-mvc-delete-actionlink-with-confirm)。

所以你有两个选择，我希望它对你有帮助。

# c++ - 如何解析以下字符串

> ID：12501388
> 
> 赞同：0
> 
> 时间：2012-09-19T19:15:11.887
> 
> 标签：c++, c, lex

我想解析

```
CLASSA classAvalue;
CLASSB classBvalue;
... ....
CLASSX classXvalue; 
```

文件中的文本..

他们的顺序是不可预测的，即；

```
CLASSX classXvalue;
CLASSY classYvalue;
....   ......
CLASSA classAvalue;
CLASSB classBvalue; 
```

我有名称 A,B,C....X 的类/结构，我需要将值推送到它们各自的值，**我想保持简单，没有正则表达式用于解析此文本..**

**RUNTIME 对我来说至关重要。我有一个文件，其中有 >300MB 的数据要解析，**

我想到了对字符串 strtok() 进行标记的想法。但在推送 tvalue 之前，我必须比较我正在推送的数据类型。这需要一些时间。

一些我想如何优化将数据推送到相关类的方式..即使是几毫秒也很重要，最后我可能会节省几秒钟宝贵的运行时间..

请分享您对此的想法，我将不胜感激..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T01:22:28.463

您对问题的描述需要更详细。如果标记*可以表示*为正则表达式（我不是说实际使用 RE，只是询问是否可能），那么扫描它们的最快方法是手动编码离散有限自动机。如果您提供 RE，我将向您展示如何做到这一点。

如前所述，以最佳方式使用文件系统与良好的扫描算法同样重要。你没有提供你的操作系统，所以我们无法帮助你。在许多操作系统中，内存映射（例如在 Linux 中`mmap`）是最快的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T00:33:36.797

在像您这样的简单情况下，IO 性能通常比 CPU 性能更重要。因此，例如，您应该确保获得正确的缓冲。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-19T19:50:59.520

“将 [ing] 值推到各自的值”涉及什么？也许您的意思是相应的类或某种累加器变量/函数？如果您可以提供一个至少处理两种不同类别的数据的示例，这将大大有助于获得“最佳”答案。

现在我将假设数据完全按照您的问题所示。根据您在文本文件中指定类的方式，有更好的方法来 switch() 值，例如使用整数来避免下面使用的 strcmp()。

//伪代码

```
while(not EOF)
  read a line from the file with fscanf or similar
  split sequence on first occurrence of a space
  switch() on the first segment which should be CLASS_
  call appropriate function to handle your data 
```

//示例数据：myclassA 12345 myclassB 67890 myclassC 19348

```
int data
char class_str[MAX_CHARS];

ret = fscanf(fp,"%s %i",class_str,&data);
while(ret != EOF){
    switch(class_str){

        case(strcmp(class_Str,"myclassA")==0):
            myclassA_data_processing_function();
            break;

        case(strcmp(class_Str,"myclassB")==0):
            myclassB_data_processing_function();
            break;
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-19T20:06:47.800

如果单毫秒很重要 - 然后尝试实现[Trie 数据结构](http://en.wikipedia.org/wiki/Trie)以获得最快的类型匹配。假设您已经阅读 type`char type[]`并且您知道`type`长度：

```
switch (typeLength) {
case 3: // for cases where only one type aplies like e.g. Abc 
  if (0 == memcmp(type, "Abc", 3) { /*  read Abc object from stream */ }
  else ERROR;
  break;
case 5: // e.g. "Abcde", "Abcdf", "Ebcde"
  switch (type[0]) {
     case 'A': 
         // "A,,,"
         switch (type[1]) {
             case 'b':
...
                 switch (type[4]) {
                    case 'e': // read Abcde object
                    case 'f': // read Abcdf object
...     default: ERROR
     case 'E': // only Ebcde matches
         if (0 == memcmp(type + 1, "bcde") { /*  read Ebcde object from stream */ }
         else ERROR;
..... 
```

这不是很容易实现 - 但我相信如果您在解析之前知道类型，这是从字符串确定对象类型的最快方法。

# android - 在 App Billing 中相同的版本要求

> ID：12501391
> 
> 赞同：2
> 
> 时间：2012-09-19T19:15:17.213
> 
> 标签：android, in-app-purchase, in-app-billing, google-play

最终发布的应用是否需要与测试版本相同的应用内结算版本：

> 上传的应用程序的版本号必须与您加载到设备进行测试的应用程序的版本号匹配

[http://developer.android.com/guide/google/play/billing/billing_testing.html](http://developer.android.com/guide/google/play/billing/billing_testing.html)

例如，如果使用旧应用程序版本的用户无法付费将他们的演示游戏解锁到完整模式，这将是一个问题。

如果是这种情况，那么任何尝试解锁演示游戏的人都应该在购买前首先收到下载最新版本的消息，而不是错误消息，例如：

> “应用程序错误：此版本的应用程序未针对市场计费进行配置。有关更多信息，请查看帮助中心。”

有关处理此问题的最佳方法的任何建议？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-29T08:19:38.877

每次我发布我们的应用程序的新版本时，我都会抛出这个。解决方案很简单 - 只需将`apk`与您现在正在测试的版本相同的文件（具有 BILLING 权限，使用您的发行证书签名）作为**草稿**上传到您的[Google Play Developer Console](https://play.google.com/apps/publish/Home)。为此，请在开发者控制台的应用程序列表中单击您的应用程序名称，单击“APK 文件”选项卡，然后单击“上传 APK”按钮，`apk`从本地计算机中选择您的新应用程序，上传，然后在上传对话框中单击“保存”按钮，并且不要忘记单击“编辑应用程序”页面右上角的另一个“保存”按钮。

之后，您将在“APK 文件”选项卡中看到两个部分 - **Active**和**New**。在您新上传的附近也会有一个“激活”链接`apk`。但是，在您准备好向用户发布您的新产品之前，请**不要**`apk`单击它。

请注意，您可能需要等待**几个小时**，直到您的新版本`apk`激活并且*“此版本的应用程序未配置为市场计费”*错误消息消失。

关于来自官方来源的证明 - 此信息显示在您在问题中提供的链接中：

> 将您的应用程序作为草稿应用程序上传到发布者网站。您无需发布应用程序即可使用真实产品 ID 执行端到端测试；您只需将您的申请上传为草稿申请。但是，您必须先使用您的发布密钥对您的应用程序进行签名，然后才能将其作为草稿应用程序上传。此外，上传的应用程序的版本号必须与您加载到设备进行测试的应用程序的版本号匹配。要了解如何将应用程序上传到 Google Play，请参阅[上传应用程序](https://support.google.com/googleplay/android-developer/bin/answer.py?hl=en&answer=113469&rd=1)。

而且我可以根据我自己的经验向您保证这种方法是有效的。

使用旧版本应用程序的用户仍然可以使用您的应用程序，并且即使在您发布新版本的`apk`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-20T11:06:45.683

您需要将应用的新版本上传到 Play 商店（但不要激活它）。这将允许您测试 IAP。您的应用程序的旧（已发布）版本保留使用 IAP 的能力。IAP 不适用于尚未上传到 Play 商店的应用版本。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-29T05:10:02.917

最终发布的应用是否需要与测试版本相同的应用内结算版本：

> 您可以更改应用程序版本，但包名称和签名应与您上传到 Google Play 市场的应用程序匹配。

如果是这种情况，那么任何尝试解锁演示游戏的人都应该在购买前首先收到下载最新版本的消息，而不是错误消息，例如：

“应用程序错误：此版本的应用程序未针对市场计费进行配置。有关更多信息，请查看帮助中心。”

有关处理此问题的最佳方法的任何建议？

> Google Play 市场拒绝来自未签名应用的应用内计费。您应该签署该应用程序并将其上传到 Google Play 市场。您也应该为后续版本使用相同的签名。希望这可以帮助。
> 
> 有时 Google Play 同步会有一些延迟。等待大约 30 分钟，然后重试。

# c++ - 为什么编译器会抱怨对齐？

> ID：12501392
> 
> 赞同：12
> 
> 时间：2012-09-19T19:15:22.170
> 
> 标签：c++, visual-c++, compiler-construction, alignment, compiler-warnings

我想了解更多关于对齐的信息。为什么 Microsoft 编译器 (Visual Studio 2012 Express) 抱怨以下代码片段的对齐？

```
__declspec(align(16)) class Foo
{
public:
    virtual ~Foo() {}
    virtual void bar() = 0;
}; 
```

这是编译器向我显示的警告：

```
warning C4324: 'Foo' : structure was padded due to __declspec(align()) 
```

该类是否具有任何虚拟方法甚至都没有关系。即使对于一个空类，编译器也会抱怨同样的警告信息。空类如何对齐？编译器如何填充这个类？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-09-19T19:41:03.933

警告并不一定意味着你做错了什么，而是告诉你你*可能*不是有意的这种行为。请注意，允许编译器警告开发人员认为值得警告的任何事情。原则上，您也可能会在 13 日星期五收到有关编译的警告。

在这种特定情况下，假设可能是当您指定对齐方式时，您不想让类更大。因此，如果由于您提供的对齐要求而使班级变大，那么您犯错误的可能性不大。

当然，这就留下了为什么对齐要求会使班级更大的问题。现在我们又回到了标准领域（尽管它`__declspec`本身是微软的扩展而不是标准）。C++ 标准要求在数组中，对象彼此跟随，中间没有任何空格。因此，如果您的对象必须与 16 字节边界对齐，则对象的大小必须是 16 的倍数。如果成员的大小（显式和隐式）没有给出必要的大小，编译器必须将未使用的字节添加到对象。这些字节称为填充。请注意，即使在不是数组成员的对象中也存在此填充。

现在您的类只包含一个隐式虚拟指针（因为它包含虚拟函数），根据架构，它可能是 4 或 8 个字节大。由于您已请求 16 字节对齐，编译器必须添加 12 或 8 个字节的填充以使大小达到 16 的倍数，如果没有手动对齐规范，它就不必添加。这就是编译器警告的内容。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-19T19:25:36.297

在 x86 中，Foo 需要 4 个字节，因此需要一个 12 字节的填充。在 x64 中，Foo 需要 8 个字节，因此需要一个 8 字节的填充。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-19T19:27:32.840

这个警告说的是类的大小（由 . 返回`sizeof`）由于使用`__declspec(align())`. 这可能会破坏事情，因此会发出警告。

空类当然有大小，而且必须大于 0，所以它至少为 1。

通常大小不会随对齐而改变，但在您的情况下它会改变，因为您指定的对齐大于类的未填充大小。请记住，在 C 中，类型的对齐方式不能小于其大小，实际上大小必须是对齐方式的倍数，因此会增加大小以匹配对齐方式。

为什么大小必须是对齐的倍数？好吧，想象一下这种类型的数组：连续的元素需要精确地分隔`sizeof(T)`，但是每个对象必须在内存地址中对齐的倍数。该等式的唯一解决方案是它`sizeof(T)`必须是对齐的（非空）倍数。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-08-31T10:09:10.773

当您使用 `__declspec(align())`or增加结构的对齐方式时`alignas()`，它不仅会使您的结构更加严格地对齐，而且*可能*必须在最后*填充*您的结构，根据以下[规则](https://msdn.microsoft.com/en-us/library/83ythb65.aspx)：

> 结构的大小是其对齐大于或等于其最后一个成员末尾偏移量的最小倍数。

换句话说，如果你增加一个结构的对齐方式，比如 16，你最好确保你的结构的大小也是 16 的倍数，否则你可能会因为填充而改变结构的大小，这可能会导致你的程序打破（编译器无法判断您对结构大小的依赖程度以及您是否了解此规则，因此会发出警告）。

# multithreading - 如何设计具有侦听和发送数据的进程的多线程 .NET 应用程序？

> ID：12501395
> 
> 赞同：0
> 
> 时间：2012-09-19T19:15:33.737
> 
> 标签：multithreading, c#-4.0

我正在尝试设计一个可以同时执行多个进程的多线程 .NET 应用程序。我没有使用多线程应用程序的经验，最近几天一直在阅读它。这是我需要做的。我将有两个进程在某个时间间隔内“监听”UDP 广播数据。然后我将有第三个进程在某个时间间隔发送最新数据。现在我正在构建一个概念验证应用程序。我将其构建为 C# WinForms 应用程序。我的想法是有一个类实例，我将使用它来保存最新数据，并且我将使用锁定来确保我没有任何问题。

我的应用程序类型的作品。它似乎运行了大约 60 秒左右，然后它就停止了工作。它并没有因为错误或任何东西而真正失败。有时它似乎只是停止发送。其他时候，应用程序将关闭而没有任何错误。让我觉得我遇到了多线程同步问题或其他问题。

这是一些简化的代码：

```
public class MyData
{
  public string Field1 {get; set;}
  public string Field2 {get; set;}
}

public class myForm : Form
{
  private MyData _data = new MyData();
  readonly object _locker = new object();
  Thread _thread1;
  Thread _thread2;
  Thread _thread3;

  public myForm()
  {
    _thread1 = new Thread(new ThreadStart(Listener1));
    _thread2 = new Thread(new ThreadStart(Listener2));
    _thread3 = new Thread(new ThreadStart(Sender));

    _thread1.Start();
    _thread2.Start();
    _thread3.Start();
  }

  private void Listener1()
  {
    bool _done = false;
    while (!_done)
    {
      ...listen and get data...
      lock(_locker)
      {
        _data.Field1 = ...value...
      }
    }
  }

  private void Listener2()
  {
    bool _done = false;
    while (!_done)
    {
      ...listen and get data...
      lock(_locker)
      {
        _data.Field2 = ...value...
      }
    }
  }

  private void Sender()
  {
    string _dataToSend = "";
    bool _done = false;
    while(!_done)
    {
      Thread.Sleep(2000);
      lock(_locker)
      {
        _dataToSend = _data.Field1 + "," + _data.Field2;
      }
    }
    ...send _dataToSend...
  }
} 
```

有没有人对我可能做错了什么有任何想法？这个概念看起来正确吗？有没有更好的方法可以完成同样的事情？而不是使用类变量来保存数据（MyData），如果我只是从不同的线程读取/写入文件系统上的文件会更好吗？

谢谢，科里

编辑：我遗漏了启动线程的代码。

# symfony - “标量”类型的预期参数

> ID：12501398
> 
> 赞同：0
> 
> 时间：2012-09-19T19:16:08.517
> 
> 标签：symfony

我必须在注册表格时保存一个值。在控制器中我有这个：

```
<?php
$heritageBuilder = $this->createFormBuilder($heritage)
    ->add('category', 'choice')
    ->add('designation', 'text')
    ->add('value', 'text');
$heritageFormBuilder = $heritageBuilder->getForm();
$request = $this->get('request');
if ($request->getMethod() == 'POST') {
    $heritageFormBuilder->bindRequest($request);
...
}
?> 
```

我收到了这个：

```
array(2) {
      ["form"]=>
      array(4) {
        ["category"]=>
        string(1) "4"
... 
```

它不起作用，因为**类别是另一个表类型****HeritageCategory**的外键， 因此我对收到的值进行了如下修改，正确的格式是：

```
<?php
$request = $this->get('request');
if ($request->getMethod() == 'POST') {
    $post = $request->request->get('form');
    $post['category'] = $em->getRepository('PrismeMigrationBundle:HeritageCategory')->find((int)$post['category']);
    $request->request->set('form', $post);

    $heritageFormBuilder->bindRequest($request);
}
?> 
```

我重视我的要求中的许多变化：

```
["form"]=>
      array(4) {
        ["category"]=>
        object(Test\MonBundle\Entity\HeritageCategory)#427 (6) {
          ["id":"Test\MonBundle\Entity\HeritageCategory":private]=>
          int(4)
          ["parent":"Test\MonBundle\Entity\HeritageCategory":private]=>
          int(3)
          ["code":"Test\MonBundle\Entity\HeritageCategory":private]=>
          string(0) ""
          ["name":"Test\MonBundle\Entity\HeritageCategory":private]=>
          string(21) "Résidence principale"
          ["bg":"Test\MonBundle\Entity\HeritageCategory":private]=>
          int(4)
          ["bd":"Test\MonBundle\Entity\HeritageCategory":private]=>
          int(5)
        } 
```

但我收到此错误： **“标量”类型的预期参数，“Prisme\MigrationBundle\Entity\HeritageCategory”给出**

正确完成对 BindRequest 的修改后，我应该怎么做？

先感谢您

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T19:22:22.230

不确定这是否会解决整个问题，但我希望这是一个开始......

代替：

```
$heritageBuilder = $this->createFormBuilder($heritage)
    ->add('category', 'choice')
    ->add('designation', 'text')
    ->add('value', 'text'); 
```

尝试：

```
$heritageBuilder = $this->createFormBuilder($heritage)
    ->add('category', 'entity')
    ->add('designation', 'text')
    ->add('value', 'text'); 
```

“选择”类型是为简单的标量信息数组设计的（“男性”/“女性”等）。但是“类别”不是标量；它是一个完整的实体，因此“实体”类型在这里更有意义。

以下是有关实体字段类型的文档：

[http://symfony.com/doc/2.0/reference/forms/types/entity.html](http://symfony.com/doc/2.0/reference/forms/types/entity.html)

哦，确保 HeritageCategory 有一个 toString() 方法。表单将需要它来呈现标签。

# visual-c++ - Windows SEH 和内存管理

> ID：12501400
> 
> 赞同：3
> 
> 时间：2012-09-19T19:16:09.630
> 
> 标签：visual-c++, exception-handling

我正在编写一些处理 Windows 结构化异常的代码（在我的情况下，[`_set_se_translator()`](http://msdn.microsoft.com/en-us/library/5z4bw5h5%28v=vs.80%29.aspx)用于将它们转换为 C++ 异常）。

让我担心的是，当异常发生时，我在传递的异常信息中大量使用了指针。我得到了一个指向结构的指针[`_EXCEPTION_POINTERS`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms679331%28v=vs.85%29.aspx)。它包含指向其他两个结构的指针，其中一个可能包含另一个指针字段，该字段使该对象基本上是一个链表。

所有这些指针背后的内存在哪里分配？谁负责解除分配？如果不是我，我可以指望数据有效多长时间以及如何避免泄漏？

我的 se 翻译程序目前看起来像这样：

```
void se_translator(unsigned int exception_code, struct _EXCEPTION_POINTERS* exception_information) {
    _clearfp();
    throw se_exception(exception_code, exception_information);
}; 
```

而这里的担心是要么里面指向的所有数据`exception_information`都超出了我的`catch`es内的范围，要么它们都会以某种方式泄漏。

如果有一些文档讨论了这一点，我想指出它。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-19T20:17:55.393

堆。异常记录在引发异常之前被压入堆栈。请参阅[Win32™ 结构化异常处理深度速成课程](http://www.microsoft.com/msj/0197/exception/exception.aspx)。EXCEPTION_POINTERS 是对 SEH 的 EXCEPTION_REGISTRATION 的 Visual C++ 特定扩展：

> 紧接其扩展的 EXCEPTION_REGISTRATION 结构下方，Visual C++ 推送了两个附加值。在下面的 DWORD 中，它为指向 EXCEPTION_POINTERS 结构（标准 Win32 结构）的指针保留空间。这是调用 GetExceptionInformation API 时返回的指针。

事实上，SEH 只使用堆栈结构，因为在异常情况下是~~唯一~~最可靠的内存分配器。不是防犯规的（如果没有用于异常记录的堆栈空间，则您的进程会在没有 oa 跟踪的情况下消失），但它是最好的。

```
 throw se_exception(exception_code, exception_information); 
```

> `exception_information`将超出我的捕获范围

不，不会的。您的堆栈将如下所示：

```
somefunction_x::`catch block
DispatchException
RaiseException 
<- exception record is here ->
frame that triggered the SEH raise (c++ throw, AV, stack overflow etc)
caller
somefunction_x
caller
threadentrypoint 
```

但是你正在做的事情是非常不寻常的。通常，翻译人员将像 AV ( `ExceptionCode`is `EXCEPTION_ACCESS_VIOLATION`) 这样的非 c++ 异常转换为特定的 c++ 异常，例如。他们检查异常记录`ExceptionCode`并引发适当的 C++ 类型异常。

# node.js - nodejs强大不触发任何事件

> ID：12501410
> 
> 赞同：7
> 
> 时间：2012-09-19T19:16:46.093
> 
> 标签：node.js, express, formidable

我在 express3.x 上并使用强大的

```
app.post "/up",(req,res)->
formidable = require('formidable')
form = new formidable.IncomingForm()
form.uploadDir = __dirname + "/uploads"
form.encoding = 'binary'

form.addListener 'file',(name,file) ->
    #write file
    console.log('file uploaded')
    return
console.log('$$$$$$$$$$$')
form.addListener 'end', ->
    console.log('end')
    res.end()
    return
console.log('@@@@@$$$$')
form.parse req,(err,fields,files)->
    console.log('parse')
    console.log(err) if(err)
    return
console.log('######')
return 
```

上传表格是

```
block content
:coffeescript
    $ ->
        formData = new FormData()
        xhr = new XMLHttpRequest()
        onProgress = (e)->
            per_complete = (e.loaded/e.total) * 100 if e.lengthComputable

        onReady = (e)->
            alert("Ready")

        onError = (err)->
            alert("Error Loading "+err)

        $('#upload').click (e)->
            formData.append('img',document.getElementById('img').files[0])
            xhr.open('post','/up',true)
            xhr.addEventListener('error',onError,false)
            xhr.addEventListener('progress',onProgress,false)
            xhr.send(formData)
            xhr.addEventListener('readystatechange',onReady,false)

h1 hello world
form
    |select Image: 
    input(type='file',name='img', id='img')
    input(type='button',value='button', id='upload') 
```

没有任何事件被触发......不确定我错过了什么......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-09-29T09:15:38.893

如果你使用`app.use(express.bodyParser())` 相当于：

```
app.use(express.json());
app.use(express.urlencoded());
app.use(express.multipart()); 
```

你可以删除`app.use(express.multipart());`然后你可以使用强大的对象。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-27T15:47:28.163

express 在内部使用了强大的功能，因此您的强大功能不会收到任何事件，如果您想自己使用强大的功能，则必须`multipart/form-data`从 bodyParser中删除

我还在 express 2.x 上，但在你的 app.configure 函数中，这也应该在 3.x 上解决问题

```
app.configure(function(){
  delete express.bodyParser.parse['multipart/form-data']
}) 
```

现在你可以自己使用强大的了。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-01T17:13:18.637

我遇到了同样的问题，在我的控制器开始处理文件之前，文件已完全上传。事件被触发了，但我还没有在听。为了解决这个问题，我编写了一个中间件来捕获文件上传并保留它们以供控制器稍后访问。

[https://gist.github.com/3813103](https://gist.github.com/3813103)

你可以用

```
var fileHandler = require('./middleware/fileHandler');
app.use(fileHandler()); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-26T11:27:31.980

[您使用强大的而不是内置的bodyParser](http://www.senchalabs.org/connect/bodyParser.html)是否有特定原因？它使用[多部分](http://www.senchalabs.org/connect/multipart.html)中间件并基于强大的。[因此，强大](https://github.com/felixge/node-formidable)的大多数选项也可以应用于 bodyParser。例如：

```
app.use(connect.multipart({ uploadDir: path })); 
```

要回答您的问题，请尝试以下代码：

应用程序.js

```
app.configure(function(){
  app.set('port', process.env.PORT || 3000);
  app.set('views', __dirname + '/views');
  app.set('view engine', 'jade');
  app.use(express.favicon());
  app.use(express.logger('dev'));
  app.use(express.bodyParser());
  app.use(express.methodOverride());
  app.use(app.router);
  app.use(express.static(path.join(__dirname, 'public')));
});

app.post("/", function(req, res) {
  console.log(req.files.img)
  res.end()
}) 
```

索引.jade

```
form
  input(type="file", name="img", id="img")
  input(type="button", value="button", id="upload")
script
  var formdata = new FormData()
  var xhr = new XMLHttpRequest()

  $("#upload").on("click", function(e) {            
    xhr.upload.onprogress = function(evt) {
      console.log("While sending and loading data.")
      if (evt.lengthComputable) {
        console.log (evt.loaded / evt.total * 100);
      }
    }

    xhr.onloadend = function(evt) {
      console.log("When the request has completed (either in success or failure).")
    }

    xhr.onload = function(evt) {
      console.log("When the request has successfully completed.")
    }

    var image = document.getElementById('img').files[0]
    formdata.append("img", image)
    xhr.open("POST", "/", true)
    xhr.send(formdata)
  }) 
```

查看[W3C 规范](http://www.w3.org/TR/XMLHttpRequest2/#event-handlers)以了解更多活动。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2021-03-15T20:24:54.937

**Nodejs / 快速设置**

```
// https://www.npmjs.com/package/express-formidable
npm install express-formidable 
```

**快速演示**

```
const express = require('express');
const formidableMiddleware = require('express-formidable');

const app = express();

// Express-Formidable attaches your multi-part form to the request object
app.use('/formdata/with-fields-and-files', formidableMiddleware(), (req, res) => {
   console.log(req.fields, 'fields')
   console.log(req.files, 'files')
}

app.listen(3000) 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-10-30T02:55:05.427

今天也发生了类似的问题。
浪费了4个多小时的时间。
在这里期待答案，但在这里找不到，所以写下来。

**问题**

```
1\. formidable - fileBegin event is     fired  
2\. formidable - file      event is     fired - for small ~3MB/~4MB files
3\. formidable - file      event is not fired - for large files

on local machine - nodejs/libraries will work fine
on remote machine - behind nginx it above issue happens 
```

使用的库：
- 微型 - [https://github.com/zeit/micro](https://github.com/zeit/micro) - 主要罪魁祸首，由于过于简单的编程模型
- 强大 - [https://www.npmjs.com/package/formidable](https://www.npmjs.com/package/formidable) - 较小的罪魁祸首没有给出示例异步/等待

**解决方案**

```
1\. increase the VM memory size 2/3 times the file upload size (libraries eat a lot of memory)
2\. increase both proxy & http timeout/ size in the nginx to the required
    - example, 10 mins timeout & 2G size
3\. change the programming model for large files
    a. on local machine - nodejs/libraries will work fine
    b. but behind the nginx proxy, it optimizes and kills the on going process asap
        to solve this proxy issue, use more promises/ async-awaits, delay the reply to nginx 
```

希望有帮助。

# cakephp - 查找正在从表中省略一些记录

> ID：12501421
> 
> 赞同：0
> 
> 时间：2012-09-19T19:17:21.633
> 
> 标签：cakephp, find, conditional-statements

我基本上是在尝试从表中提取最后 5 条记录。唯一的问题是我不希望带来一些具有相同 x_id 的记录，因为我会重复 x_id，所以我通过一个“组”条件来实现这一点。但是，当添加这个新的组条件时，会发生一些奇怪的事情，并且查询的结果会随机省略表中的某些行。所以，随机地，一些记录被带来，而一些则没有。所以有些本该带的记录却没有。

例如：我表中的最后 10 条记录是：1-2-3-4-5-6-7-8-9-0 进行查询后，结果应该是：0-9-8-7- 6 但是，我随机得到：9-8-6-5-3 OR 0-8-7-6-4

基本上它会跳过一些记录 =//

```
$condicionesComentarios = array('conditions' => array('Comentario.aceptado' => 1), 'limit' => 5, 'order' => 'Comentario.id DESC', 'group' => array('Comentario.empresa_id'));

$ultimosComentarios = $this->Empresa->Comentario->find('all', $condicionesComentarios); 
```

**更新澄清**

*Empresa 有很多评论*

评论表的一小部分：

```
**id**     **empresa_id**
1           7
2           9 
3           3
4           1
5           1
6           4
7           8
8           5 
```

预期结果：表中的最后 5 条记录，没有重复的 empresa_id

查询结果-> (id = 8, 7, 6, 5, 3) *注意id: 4的行应该被跳过，以避免empresa_id重复*

我得到了什么：有些记录在不应该的时候被随机跳过。

查询结果-> (id = 7, 6, 5, 2, 1) *请注意，此处 id: 8 的行不应被跳过，但仍然如此。*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T16:05:37.793

您`ORDER BY`位于一列 ( `Comentario.id`) 和`GROUP BY`另一列 ( `Comentario.empresa_id`)。

从您的描述看来，您想按同一列排序和分组：

```
$condicionesComentarios = array(
    'conditions' => array('Comentario.aceptado' => 1), 
    'limit' => 5,
    'order' => 'Comentario.empresa_id DESC',
    'group' => array('Comentario.empresa_id')); 
```

* * *

**更新**：听起来你想要的是每个组的 MAX(id) 。在 SQL 中，您将使用以下查询：

```
select max(id) from Comentarios where Comentario.aceptado
    group by empresa_id order by id desc limit 5; 
```

在 CakePHP 中你可以这样写：

```
$condicionesComentarios = array(
    'fields' => array('max(Comentario.id)'),
    'conditions' => array('Comentario.aceptado' => 1), 
    'limit' => 5,
    'order' => 'Comentario.id DESC',
    'group' => array('Comentario.empresa_id')); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-23T20:50:39.687

Joni，你几乎是对的，让我走上正轨。您的代码本身无法正常工作，尽管稍作修改使其正常工作：

```
$condicionesComentarios = array(
                          'conditions' => array('Comentario.aceptado' => 1), 
                          'limit' => 5, 'order' => 'max(Comentario.id) DESC', 
                          'group' => array('Comentario.empresa_id'), 
                          'fields' => array('max(Comentario.id)', 'Comentario.empresa_id')); 
```

如您所见，我必须修改“订单”并为“字段”添加额外条件。再次说明它的作用：从 Commentarios 表中提取最后 5 行，但不从最后几行中重复 empresa_id 字段。

谢谢您的帮助 ;）

# asp.net-mvc - Kendo UI - 将命令工具栏放在网格底部

> ID：12501427
> 
> 赞同：9
> 
> 时间：2012-09-19T19:17:32.107
> 
> 标签：asp.net-mvc, kendo-ui

在我的应用程序的某些区域中，将网格命令工具栏中的自定义命令放在网格底部而不是顶部会更加用户友好。

我想知道这是否可以在 Kendo UI 中实现，或者是否有其他解决方法。

下面是标准只读但可选网格的代码。

提前致谢！

```
@(Html.Kendo().Grid(Model)
.Name("AddressBookGrid")
.Columns(columns =>
{
    columns.Bound(i => i.IsOrigin).ClientTemplate("<input name='Origin' id='origin' type='radio' value='Origin' />").Width(70);
    columns.Bound(i => i.IsDestination).ClientTemplate("<input name='Destination' id='destination' type='radio' value='Destination' />").Width(70);
    columns.Bound(i => i.CompanyName).Width(120).HtmlAttributes(new { id = "CompanyName" });
    columns.Bound(i => i.AddressLine1).Width(150).HtmlAttributes(new { id = "AddressLine1" });
    columns.Bound(i => i.AddressLine2).Width(150).HtmlAttributes(new { id = "AddressLine2" });
    columns.Bound(i => i.City).Width(100).HtmlAttributes(new { id = "City" });
    columns.Bound(i => i.StateProvince).Width(70).HtmlAttributes(new { id = "StateProvince" });
    columns.Bound(i => i.PostalCode).Width(70).HtmlAttributes(new { id = "PostalCode" });
    columns.Bound(i => i.CountryCode).Width(70).HtmlAttributes(new { id = "CountryCode" });
})
.ToolBar(toolbar =>
{
    //Want to place this at the bottom
    toolbar.Custom().Text("Add").Url("#_").HtmlAttributes(new { onclick = "PopulateAddressForm()" });
})
.Resizable(resize => resize.Columns(true))
.Reorderable(reorder => reorder.Columns(true))
.DataSource(dataSource => dataSource
    .Ajax()
    .Batch(true)
    .ServerOperation(false)
) 
```

)

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-09-20T13:46:30.060

不，这不支持开箱即用。可以使用以下代码行来完成：

```
$("#grid").find(".k-grid-toolbar").insertAfter($("#grid .k-grid-content")); 
```

这是一个演示：http: [//jsbin.com/ahifiz/2/edit](http://jsbin.com/ahifiz/2/edit)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-11-19T18:46:19.647

在回答 Angular 问题时，我创建了一个指令来做同样的事情。它当前检查分页控件并在此之后移动工具栏，或者如果分页器不存在，则在网格内容之后移动。

```
[YourApp].directive("toolbarOnBottom", ["$timeout",
    function ($timeout) {
        return {
            restrict: "A",
            link: function link(scope, element, attrs) {
                $timeout(function () {
                    element.find(".k-grid-toolbar").insertAfter(element.find(".k-grid-pager").length === 1 ? element.find(".k-grid-pager") : element.find(".k-grid-content"));
                }, 1);
            }
        };
    }
]); 
```

# alloy - 三元关系中的多重性

> ID：12501430
> 
> 赞同：2
> 
> 时间：2012-09-19T19:17:56.313
> 
> 标签：alloy

下界多重性`some`和`one`三元关系的语义很难掌握。根据*Software Abstractions* (Rev. ed.) pp.79-80，关系`addr: Book -> (Name -> some Addr)`应该等同于`all b: Book | b.addr in Name -> some Addr`（另见 p.97）。但是后一个公式究竟是什么意思呢？我的想象力在这里失败了。这就是为什么我在 Alloy Analyzer 4.1.0 中做了一些实验。该模型的含义：

```
sig Name, Addr {}
sig Book { addr: Name -> some Addr }
assert implication {
 #Book = 0 or all n: Name | some b: Book, a: Addr | n in b.addr.a
}
check implication 
```

成立（没有找到反例）。因此，如果有任何书籍，则每个名称都应至少在其中一本中注册。允许未记录的地址，并且没有书籍，未记录的名称突然似乎也被允许。

以下模型中的含义：

```
sig Name, Addr {}
sig Book { addr: Name some -> Addr }
assert implication {
  #Book = 0 or all a: Addr | some b: Book | #b.addr.a > 0
}
check implication 
```

再次持有。这是之前模型的镜像：禁止无证 Addrs，除非根本没有 Book。并且对于名称的文档没有任何限制。

两种模型都可以组合起来更简洁：

```
sig Name, Addr {}
sig Book { addr1: Name -> some Addr, addr2: Name some -> Addr }
assert implications {
  some Book implies Name in Book.addr1.Addr and Addr in Book.addr2[Name]
}
check implications 
```

因此，如果有任何 Book，*所有*Names 都应该参与关系 addr1，*所有*Addr 都应该参与 addr2。多重`one`性行为相似。

就下界约束而言，似乎*软件抽象*和分析器并没有讲述关于**R: A -> (B *m* -> *n* C)之类的构造的相同故事，但我可能遗漏了一些东西。**我发现的含义不是我所期望的，并且可能还有其他我尚未发现的奇怪含义。我越来越觉得嵌套的下界多重性根本没有意义。我能说对吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T18:53:18.217

第一个例子让我困惑了很久。令我惊讶的是，在任何情况下都没有未映射的名称。然而，对于它的价值，我在 p 上找到了。第一版的第 78 条声明“多重性只是一种简写，可以用标准约束代替；多重性约束在

```
r: A m -> n B 
```

可以写成

```
all a: A | n a.r
all b: B | m r.b 
```

将这些重写规则中的第一个应用于语句

```
all b: Book | b.addr in Name -> some Addr 
```

您从第一个示例模型中得出，我们得到

```
all b: Book | all n: Name | some n.(b.addr) 
```

或者在散文中“对于所有书籍*b*和名称*n* ，在*b.addr*中有一些映射*n* ”，这至少解决了我最初的困惑。要允许未映射的名称，必须编写或（如 Whirlwind Tour 中后面的示例）。*`sig Book { addr: set (Name -> Addr) }``sig Book { names: set Name, addr: names -> some Addr}`*

 **我在第二个重写规则（涉及m*的那个）上遇到了更多麻烦。`Name`(no *m* )上没有明确的多重性，我花了一些时间翻阅本书以找到关系的默认多重性约束的规范（类似于`one`其他字段的默认值），并尝试了各种编写等效约束的方法，在得出没有默认多重性约束的结论之前；相反，默认设置是*没有*多重性约束。所以第二个重写规则在 p 上给出。78 不适用于`Name -> some Addr`; 没有多重性约束，效果是对于 Addr 中的*每个**a***, (b.addr).a*可能有零个或多个实例。*

 *我想从语言设计的角度来看，我认为有一个明确的“默认多重性约束”`set`并允许像这样的语句可能会有所帮助

```
all b: Book | all a: Addr | set (b.addr).a
/* currently produces type error */ 
```

这意味着每个地址的*b.addr*中可能有零个或多个条目。

但我倾向于认为，不管有没有这样的变化，你仍然可以说三元关系的影响`some`和`one`在三元关系中可能难以掌握。**

# apache - apache访问日志文件持续多长时间？

> ID：12501431
> 
> 赞同：2
> 
> 时间：2012-09-19T19:17:56.573
> 
> 标签：apache, access-log

服务器将访问日志文件保留多长时间？

今天我访问了我的服务器日志文件，发现它们只能追溯到 8 月 19 日。一个月后是否会自动转储访问日志文件？

如果是这样，有什么办法可以恢复它们？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-19T19:24:12.597

这取决于如何配置[日志轮换](http://httpd.apache.org/docs/2.4/logs.html#rotation)。在 unix 环境中，此任务通常委托给 logrotate 守护进程。

# matlab - 如何将标签（值）添加到我的 MATLAB 图的顶部？

> ID：12501432
> 
> 赞同：2
> 
> 时间：2012-09-19T19:18:00.267
> 
> 标签：matlab, plot

在使用命令（我可以将命令的输出分配给两个矩阵）以手动获取计数和中点`plot`之后，我正在使用数据集上的命令在 MATLAB 中“手动”创建直方图。`hist`我真正想做的是在直方图的每个条形上方添加一个标签，说明该列的中心点值。由于我已经有一个包含所有这些中心值的向量，我的问题在于弄清楚如何实际创建标签并将它们放置在每个条形上方。任何添加这些的帮助将不胜感激！

**到目前为止我尝试过的：**

基于另一个 StackOverflow 帖子，我看到了一个沿着这些行的命令

```
for b = 1:nBins
    text(bins(b),counts(b)*2,num2str(a(b==binIdx,1)),'VerticalAlignment','top')
end 
```

我的想法是，我可能`text`在循环中使用该命令在每个条形上方放置一个标签，但是当我尝试将`text`上面的命令修改为我拥有的数据时，我看不到绘图上的标签。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-19T19:38:26.413

您确实可以将示例与 一起使用[`text`](http://www.mathworks.com/help/matlab/ref/text.html)，但稍有改进。

`text(x, y, ' a string')`将文本字符串放在图上点 (x, y) 的位置。在您的示例中，x 坐标是可以的（条的中心），但每个 y 坐标的高度是相应条的两倍。这可能会使文本字符串放置在图形边界之外。

我建议您首先做的是按以下方式设置 y 轴，以便为新的文本标签留出一些额外的空间：

```
ylim([0, max(counts) * 1.2]);  %# The 1.2 factor is just an example 
```

然后您使用问题中的示例代码，如下所示：

```
A = fix(10 * rand(30, 1)) + 1; %# Randomize 30 samples between 1 and 10
[counts, bins] = hist(A);      %# Compute the histogram
figure, bar(bins, counts),     %# Plot the histogram bars
ylim([0, max(counts) * 1.2]);  %# Resize the y-axis

%# Add a text string above each bin
for i = 1:numel(bins)
    text(bins(i) - 0.2, counts(i) + 0.4, ['y = ', num2str(counts(i))], 'VerticalAlignment', 'top', 'FontSize', 8)
end 
```

这是你应该得到的：

![直方图](../Images/7ba7ee12ad66bdb5e8106464e1f7c3c2.png)

这里每个标签都放置在相应条形 y 轴上方 0.4 个刻度处），距离条形中心（x 轴）有 -0.2 个刻度偏移。

请注意，我还将字体大小减小到 8，以便每个标签都很好地适合每个条的宽度。当然，您可以使用 的不同属性`text`来根据自己的喜好调整标签。

# performance - 填充指令有什么真正的好处吗

> ID：12501434
> 
> 赞同：1
> 
> 时间：2012-09-19T19:18:19.260
> 
> 标签：performance, assembly, x86, padding

知道 Intel 和 AMD 处理器以它们的本机字长（现在主要是 64 位）获取指令，我问了我的兄弟，他说为了让处理器更有效地运行，一些汇编程序员将他们的指令填充到 32 位`nop`s 如果下一条指令将字节长度设置为超过 4 或 8 个字节：

```
xor ax, ax ; 2 bytes
nop ; 1
nop ; 1 
```

那么这样做有什么好处吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-19T20:42:26.780

在您的示例中没有理由使用 nop 指令。通常，指令对齐的唯一用途是最大化在控制流分支（例如函数调用）的目标处获取的指令数量。现代 x86 获取和解码单元针对 x86 编码的可变长度特性进行了很好的优化。像这样的填充只会减慢速度。

对英特尔第 4 卷优化手册的扫描（可能已经过时几年）没有提供任何指令填充的理由。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-20T03:32:34.250

是的，它可以显着提高 AMD Bulldozer 和 Intel Atom 的性能，并在较小程度上提高 Intel Core 2 和 Nehalem 的性能。Bulldozer 和 Core 2 在 16 字节边界上对齐，对于 Atom 在 8 字节边界上对齐。然而，最好使用附加前缀或更长的指令形式而不是 NOP。请注意，仅当您需要超过一半的峰值 IPC 时，对齐指令才有意义。

# c++ - 如果逻辑上是可选的，我应该用 `else { return ... }` 封装最后一个 `return` 语句吗？

> ID：12501436
> 
> 赞同：2
> 
> 时间：2012-09-19T19:18:32.757
> 
> 标签：c++, performance, optimization, if-statement, code-size

哪种格式在速度、性能和机器代码大小方面更好？

最后`return`是封装的：

```
static bool MyClass::IsEqual(int A, int B)
{
    if (A == B)
    {
        return true;
    } 
    else
    {
        return false;
    }
} 
```

最后`return`没有封装：

```
static bool MyClass::IsEqual(int A, int B)
{
    if (A == B)
    {
        return true;
    }
    return false;
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-19T19:23:41.800

要回答您的问题 - 生成并查看汇编代码。我敢打赌汇编代码是相同的——所以性能上没有区别。

如果可能的话，我总是删除`if/else`，考虑到你的例子，我会这样做：

```
static bool MyClass::IsEqual(int A, int B)
{
    return (A == B);
} 
```

但我知道现实世界的例子并不像这样简单。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-19T19:28:13.867

> 哪种格式在速度、性能和机器代码大小方面更好？

它们都应该相同或接近。此外，你问错了问题。

一个更好的问题是，

> 我应该更喜欢哪个，为什么？

请记住，C++ 代码是为*人类*而非机器而设计的。鉴于此，选择一种编码风格而不是另一种的主要动机应该是它对人类的可读性。尽管这个考虑很重要，但不幸的是它也是主观的。底线是您必须自己决定哪个更好，但重要的是您要出于正确的原因提出正确的问题并考虑答案。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-19T19:27:07.363

两个代码片段都应该产生完全相同的结果，所以这不是它们中的任何一个的论据。

真正决定使用哪个版本的是编码风格。`if`/变体的`else`优点是两个分支都在同一逻辑层上。有时这可能是这样写的一个很好的理由。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-19T19:22:36.437

第二种形式更具可读性，因为它降低了嵌套级别。使用一种或另一种形式绝对没有性能损失。

# php - PHP MySQL PDO 存储过程和 INOUT 参数

> ID：12501439
> 
> 赞同：0
> 
> 时间：2012-09-19T19:18:52.240
> 
> 标签：php, stored-procedures, pdo, mysql5

我正在对多个应用程序共享的数据存储使用一些存储过程，并且需要调用具有`INOUT`参数的存储过程。

从文档来看，这将类似于

```
$prob_param = null;
$stmt = $pdo->prepare('CALL obnoxiousStoredProc(:problem_param)');
$stmt->bindParam(':problem_param', $prob_param, PDO::PARAM_INT|PDO::PARAM_INPUT_OUTPUT, 11);
$stmt->execute();
echo 'Prob param: ' . var_export($prob_param, true); 
```

我们会看到类似的东西

```
Prob param: int(420) 
```

但是**有一个错误**会阻止它按预期工作[请参阅此答案](https://stackoverflow.com/a/4502524/701368)。

所以相反我们得到

```
Syntax error or access violation: 1414 OUT or INOUT argument $parameter_number for routine $procedure_name is not a variable or NEW pseudo-variable 
```

如答案中所述，解决方法是双重的，将输入和输出参数分开（我可以让我的 DBA 来做）并使用局部变量

例如

```
$stmt = $pdo->prepare('CALL obnoxiousStoredProc(@problem_param)'); 
```

然后使用第二个查询

```
SELECT @problem_param 
```

获得你的价值。

**我的问题是：PDO 中这个“局部变量”的范围是什么？如果我的 php 代码同时获取，我是否将自己设置为竞争条件？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T19:29:57.247

> 用户定义的变量是特定于连接的。

请参阅[文档](http://dev.mysql.com/doc/refman/5.1/en/user-variables.html)。

所以不，在 php 执行上下文中不可能出现竞争条件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-07-25T00:01:15.380

这个解决方案对我有用：

```
$pdo = new PDO(...);
$stmt = $pdo->prepare('CALL obnoxiousStoredProc(@problem_param)');
$stmt->execute();

$stmt2 = $pdo->prepare('SELECT @problem_param');
$stmt2->execute();
$var = $stmt->fetch();

var_dump($var) 
```

# ruby-on-rails - 如果 VCR 也捕获 javascript 请求？

> ID：12501443
> 
> 赞同：1
> 
> 时间：2012-09-19T19:19:09.957
> 
> 标签：ruby-on-rails, stripe-payments

我的问题是，如果 VCR 也捕获客户端发出的请求？基本上，我正在使用 Stripe 支付，并希望使用我的 javascript 进行检查卡验证，但它使用外部 js 函数，来自 stripe 站点包含的文件。可能吗 ？

# grails - 什么是基于模块化/组件的开发的最佳架构/设计模式/最佳实践：第 2 部分

> ID：12501446
> 
> 赞同：2
> 
> 时间：2012-09-19T19:19:26.897
> 
> 标签：grails, multi-tenant, modularity

## 这是我原始问题的第二部分：[原始问题](https://stackoverflow.com/questions/12492639/what-are-the-best-architecture-design-pattern-best-practices-for-modular-compone "原始问题")

我有一个基于 Grails 的多租户应用程序（刚刚迁移到 Grails 2.1）。现在我想在我的应用程序中添加许多新功能，但我的基本要求是所有新模块都应该为每个租户配置，并且代码库应该是模块化的并且与其他功能/组件松散耦合。

在短期内，我想将我的应用程序转换为基于模块的应用程序，该应用程序应该能够用作即插即用基础，并且还能够在每个租户的基础上对其进行配置。通常，所有新组件/功能都是基于 Web 的。

所以我的问题是：
**如何管理代码库**：我想知道我应该遵循哪种方法来分离代码库。
一个。为每个新模块创建一个新插件。
湾。在 Spring 中创建一个新模块并在我的应用程序中使用它。
C。对新模块使用 OSGi 框架。
d。为每个新模块创建一个新的 Web 应用程序并使用 CAS 配置应用程序。
e. 在这种情况下应遵循哪些最佳实践。

我想了解设计和架构或 Grails 插件方面的理想解决方案/建议。如果我的要求有任何问题，也请告诉我……<br />

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T19:27:48.547

您可以使用多种设计模式。对于基础架构，[复合模式](http://en.wikipedia.org/wiki/Composite_pattern)可能会派上用场。

对于一个很好的概述谷歌“GOF设计模式”。GOF 代表四人帮，这本书的作者。更多信息[在这里](http://en.wikipedia.org/wiki/Design_Patterns)。

设计模式为您提供解决问题的解决方案。熟悉他们是好的。

# c# - MonoTouch.Dialog 是否支持（字母）索引？

> ID：12501462
> 
> 赞同：2
> 
> 时间：2012-09-19T19:20:57.980
> 
> 标签：c#, uitableview, xamarin.ios, monotouch.dialog

可以在`UITableView`右侧添加快速导航（如 iOS 上的联系人）。MT.Dialog 也支持这个吗？如何？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-19T19:55:17.460

是的，它受支持。

查看GIT 存储库中与[MonoTouch.Dialog](https://github.com/migueldeicaza/MonoTouch.Dialog)捆绑的[示例。](https://github.com/migueldeicaza/MonoTouch.Dialog/tree/master/Sample)启动它并选择**Container features**下的**[Index 示例](https://github.com/migueldeicaza/MonoTouch.Dialog/blob/master/Sample/DemoIndex.cs)**。

# android - 使用 MindStorms 通过 MailBox 进行 Android NXT 通信

> ID：12501465
> 
> 赞同：0
> 
> 时间：2012-09-19T19:21:04.970
> 
> 标签：android, bluetooth, nxt

我可以写信到 NXT 上的邮箱，但（还）不能从中读取。

设置是使用来自 GitHub 的 MindDroid 作为启动器。

```
sendBTCmessage(0, BTCommunicator.START_PROGRAM, "bt1.rxe");
            sendBTCmessage(1000, BTCommunicator.SENDMAILBOX, "Kilroy was here");
            sendBTCmessage(3000, BTCommunicator.READMAILBOX,"",1); 
```

SendBTCmessage (int,int,String,int) 是新的...

void sendBTCmessage(int delay, int message, String name, int mBox) { Bundle myBundle = new Bundle(); myBundle.putInt("消息", 消息); myBundle.putString("name", name); myBundle.putInt("邮箱",mBox); 消息 myMessage = myHandler.obtainMessage(); myMessage.setData(myBundle); Log.d(TAG,String.format("sendBTCmessageStringMbox %d %d %s mBox=%d",delay, message,name,mBox));

```
 if (delay == 0)
        btcHandler.sendMessage(myMessage);
    else
        btcHandler.sendMessageDelayed(myMessage, delay);
} 
```

这会将请求发送到处理程序，其中...

```
case SENDMAILBOX:
                Log.d(TAG,String.format("case SENDMAILBOX %d %s",myMessage.getData().getInt("value1"), myMessage.getData().getString("name")));
                sendMailbox(myMessage.getData().getInt("MailBox"),myMessage.getData().getString("name"));
                break;
            case READMAILBOX:
                Log.d(TAG,String.format("case ReadMAILBOX %d %s",myMessage.getData().getInt("MailBox"), myMessage.getData().getString("name")));
                readMailbox(myMessage.getData().getInt("MailBox")); 
                break;
            case START_PROGRAM:
                startProgram(myMessage.getData().getString("name"));
                break; 
```

消息已进一步准备，“startProgram”是标准的并且工作正常......

```
 private void startProgram(String programName) {
    byte[] message = LCPMessage.getStartProgramMessage(programName);
    Log.d(TAG,String.format("startProgram %s %s",programName,LCPMessage.getStartProgramMessage(programName)));
    sendMessageAndState(message);
}
private void readMailbox(int mBox){
    byte[] message = LCPMessage.getReadMailboxMessage(mBox);
    Log.d(TAG,String.format("readMailbox %d",mBox));
    logByteArray(TAG,"sendMailBox",message);
    sendMessageAndState(message);
}
private void sendMailbox(int mBox,String text){
    byte[] message = LCPMessage.getMailBoxMessage(mBox,text);
    Log.d(TAG,String.format("mail box message %s %d",text,message.length));
    logByteArray(TAG,"sendMailBox",message);
    sendMessageAndState(message);
} 
```

最后的准备是...

```
 public static byte[] getMailBoxMessage(int mBox, String text){
    byte[] message = new byte[text.length()+5];
    message[0] = DIRECT_COMMAND_NOREPLY;
    message[1] = MESSAGE_WRITE;
    message[2] =  (byte)mBox;
    message[3] =  (byte)(text.length()+1);
    for (int pos=0; pos<text.length(); pos++)
        message[4+pos] = (byte) text.charAt(pos);
    message[text.length()+4] = 0;
    return message;
}
public static byte[] getReadMailboxMessage(int mBox){
    byte[] message = new byte[5];
    message[0] = DIRECT_COMMAND_REPLY;
    message[1] = MESSAGE_READ;
    message[2] = (byte)(mBox+10);
    message[3] = (byte)mBox;
    message[4] = (byte)0x01; //true 
    return message;
}
public static byte[] getStartProgramMessage(String programName) {
    byte[] message = new byte[22];

    message[0] = DIRECT_COMMAND_NOREPLY;
    message[1] = START_PROGRAM;

    // copy programName and end with 0 delimiter
    for (int pos=0; pos<programName.length(); pos++)
        message[2+pos] = (byte) programName.charAt(pos);

    message[programName.length()+2] = 0;

    return message;
} 
```

我遇到的问题是接收消息的 NXT 程序工作正常，但我不知道如何读取邮箱中的内容 [http://www.android-tele-health.com/bt1.rbt](http://www.android-tele-health.com/bt1.rbt)是正在运行的程序在NXT。

任何帮助表示赞赏...谢谢约翰

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T08:08:26.440

该`MESSAGE_READ`命令请求遥控器将邮箱中的第一条可用消息*作为回复*`NXT`发送回您。这就是为什么你必须使用命令类型，而不是.*`DIRECT_COMMAND_REPLY``DIRECT_COMMAND_NOREPLY`*

 *您没有显示如何从蓝牙流中读取回复数据，但看起来您的方法`SendMessageAndState()`需要能够从远程读取回复数据`NXT`并将其作为适当的数据类型返回给您，如果您请求回复从`NXT`使用`DIRECT_COMMAND_REPLY`或`SYSTEM_COMMAND_REPLY`。

下面的代码片段展示了我是如何解决这个问题的（如果它不是世界上最优雅的 Java 代码，请原谅！）

```
public synchronized byte[] sendBTMessage(byte[] request) {
    int lsb = request.length;
    int msb = request.length >>> 8;
    try {
        mOut.write((byte) lsb);
        mOut.write((byte) msb);
        mOut.write(request);
    } catch (IOException e) {
        Log.e(TAG, "sendBTMessage: Write failed.");
    }
    if ((request[0] & MASK_NOREPLY) == 0) { // Reply requested
        byte[] reply = readBTMessage();
        if (reply == null) {
            return null;
        }
        if (reply[0] != 0x02) {
            // Not a reply?
            Log.e(TAG, "sendBTMessage read a message that was not a reply.");
            Log.e(TAG, "Hex: " + HexValues(reply));
            return new byte[] {(byte) 0xFF}; 
        }
        if (reply[1] != request[1]) {
            // Reply for incorrect request?
            Log.e(TAG, "sendBTMessage received a reply for the wrong request.");
            Log.e(TAG, "Hex: " + HexValues(reply));
            return new byte[] {(byte) 0xFF}; 
        }
        byte[] replymessage = new byte[reply.length - 2];
        System.arraycopy(reply, 2, replymessage, 0, replymessage.length);               
        return replymessage;
    }
    return new byte[] {0};
}

public byte[] readBTMessage() {
    byte[] buffer = new byte[66];  // All BT messages are a maximum of 66 bytes long
    int numBytes;
    try {
        numBytes = mIn.read(buffer);
    } catch (IOException e) {
        Log.e(TAG, "readBTMessage: Read failed.");
        return null;
    }
    if (numBytes <= 0) return null;
    int msgLength = buffer[0] + (buffer[1] << 8);
    if (numBytes != msgLength + 2) {
        Log.e(TAG, "readBTMessage: BT Message wrong length.");
        Log.e(TAG, "BT Message: " + HexValues(buffer));
        return null;
    }
    byte[] result = new byte[msgLength];
    System.arraycopy(buffer, 2, result, 0, msgLength);
    return result;
} 
```

`mIn`和`mOut`分别是蓝牙套接字的 InputStream 和 OutputStream，由调用`getInputStream()`和返回的蓝牙套接字`getOutputStream()`返回`createRfcommSocketToServiceRecord(SPP_UUID)`。`MASK_NOREPLY`在我的包中的其他地方定义为：

```
 public static byte MASK_NOREPLY = (byte) 0x80; 
```

因此，您的消息发送方法（或附近的某处）应该准备好读取远程 NXT 的回复（如果您已请求）。然后您将能够看到您从远程NXT 请求的邮箱消息。

顺便说一句，您的 NXT-G 程序看起来不错。——迈克*

# php - joomla 2.5 基于来自外部表的用户 ID 回显用户名

> ID：12501467
> 
> 赞同：0
> 
> 时间：2012-09-19T19:21:09.637
> 
> 标签：php, mysql, joomla2.5, userid

我已经挖了一些寻找答案。我缺乏 php 和 sql 技能正在杀死我。

我有一个表，它利用在该表中创建条目的任何给定用户的用户 ID，我需要获取它“关联用户”（等于 joomla“用户 ID”）并显示该用户 ID 的用户名（希望有意义） .

我可以像这样显示关联的用户就好了

```
<?php echo $row->associated_user; ?> 
```

我认为这会呼应我需要的结果

```
<?php 
$associated_user = "SELECT * FROM #__users  WHERE id='".$row->userid."' ";
$db->setQuery($user_type);
$user_type_detail = $db->loadAssoc();
echo $user_type_detail["username"];
?> 
```

但它与“调用非对象上的成员函数 setQuery()”有关

我已经看到了一些其他解决方案，假设我打算直接从用户表中提取，但我需要将它转换到某个地方，我真的迷路了，感谢所有帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T19:28:10.370

在您的代码中添加以下行。

```
 $db=JFactory::getDBO(); 
```

**并使用**

$db->setQuery($associated_user);

**插入的**

$db->setQuery($user_type);

**尝试一下**

```
$db=JFactory::getDBO();

$associated_user = "SELECT * FROM #__users  WHERE id='".$row->userid."' ";
$db->setQuery($associated_user);
$user_type_detail = $db->loadAssoc();
echo $user_type_detail["username"]; 
```

# node.js - 使用虚拟数据库在自己的环境中测试 express.js 应用程序

> ID：12501468
> 
> 赞同：2
> 
> 时间：2012-09-19T19:21:12.913
> 
> 标签：node.js, express, mongoose, mocha.js

我的网络应用程序具有以下结构

db.js：

```
mongoose = require('mongoose');
db = mongoose.createConnection("...");
playerSchema = new mongoose.Schema({
  // my schema stuff
});
exports.Player = db.model("player", playerSchema); 
```

我将所有路线都放在一个自己的文件中（route/index.js）：

```
db = require('../db');

exports.createPlayer = function(req, res) {
  player = new db.Player();
  player.name = req.body.player_name;
  player.save(function(err) {
    if (err) {
      log(err);
    }
    res.redirect("/");
  });
}; 
```

应用程序.js

```
routes = require('./routes');
app.post("/start", routes.createPlayer); 
```

我使用 mocha 测试应用程序，应该和 supertest 像下面的例子

```
should = require('should');
supertest = require('supertest');
app = require('../app');

describe("POST /start", function() {
  it("should redirect", function(done) {
    supertest(app)
    .post("/start")
    .send({
      player_name: "John Wayne"
    }).end(function(err, res) {
      should.not.exist(err);
      done();
    });
  });
}); 
```

一切正常，但我不想针对我的生产数据库进行测试。有谁知道使用虚拟/不同数据库进行测试的聪明方法？也许使用不同的环境？我有点卡住了！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-20T04:13:51.357

我有一个 common.js 文件，它是我包含在测试文件中的第一个文件。顶部是这样的：

```
process.env.NODE_ENV    = 'test'
process.env.MONGOHQ_URL = 'mongodb://localhost/project-testing' 
```

当我进行数据库连接时，我有这样的：

```
var dbUri = process.env.MONGOHQ_URL || 'mongodb://localhost/project'
var db    = mongoose.connect(dbUri) 
```

# c# - 防止在工作目录中加载 dll，InvalidCastException Type A 无法强制转换为 Type B

> ID：12501470
> 
> 赞同：-1
> 
> 时间：2012-09-19T19:21:35.887
> 
> 标签：c#, .net, assemblies, appdomain

是否可以阻止加载工作目录中的 dll 并强制它在我指定的其他地方使用 dll？

我正在尝试运行一些单元测试并收到此 InvalidCast 异常：

> [A]AssemblyA.DataType 不能转换为 [B]AssemblyA.DataType。类型 A 源自位置“E:\webservice\bin\AssemblyA\AssemblyA.dll”的上下文“LoadFrom”中的“AssemblyA, Version=1.0.4645.21698, Culture=neutral, PublicKeyToken=null”。类型 B 源自 'AssemblyA，Version=1.0.4645.21698，Culture=neutral，PublicKeyToken=null'，位于位置 'E:\TestResults\Out\AssemblyA.dll' 的上下文 'Default' 中。

在测试启动时，它会调用一些初始化代码，这些代码使用 Assembly.LoadFrom 从 E:\webservice\bin\AssemblyA\AssemblyA.dll 加载 dll 并创建一些类型并将它们放入缓存中。

有构建后事件将 dll 复制到该位置，因此它们在两个位置都是完全相同的 dll。

但是单元测试是从 E:\testresults\out\ 的工作目录运行的，所以它会自动在那里加载 AssemblyA.dll，忽略已经加载的程序集，而没有给我机会使用 Appdomain.AssemblyResolve 事件拦截该加载

因此，当单元测试代码尝试从 E:\webservice\bin\AssemblyA\AssemblyA.dll 中的缓存中检索对象时，它会说无效转换，因为它期望来自 E:\TestResults\Out\AssemblyA 的类型.dll

在查看了[程序集加载的最佳实践](http://msdn.microsoft.com/en-us/library/dd153782%28v=vs.110%29.aspx)之后，似乎没有办法阻止它从工作目录加载 dll，即使我已经手动加载了我想要使用的 dll。除了将应用程序更改为不从 E:\webservice\bin... 加载之外，还有其他选择吗？

（同时使用 LoadFile 或 Load byte[] 也会导致同样的错误）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T07:56:22.130

现在，我试图帮助你解决你的问题..

我建议使用[StrongName](http://msdn.microsoft.com/en-us/library/0k50fs3b.aspx)签署您的程序集。

CLR 使用它来识别程序集。这几乎不能解决你的问题。但是为了解决您的问题，我建议使用接口来封装您的不同类型。因此，您可以在缓存中存储任何类型并仅返回接口，并且演员表消失了。

如果这不能解决您的问题，您必须向我提供更多信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-02T21:12:18.563

正如 Panos 在上面的评论中建议的那样，通过在引用的程序集上设置 CopyLocal=false 来解决这个问题。这样，CLR 就无法尝试从工作目录加载 dll，因为 dll 不存在。

# android - 更新 ListView 中的 ImageView

> ID：12501477
> 
> 赞同：2
> 
> 时间：2012-09-19T19:22:11.540
> 
> 标签：android, listview, caching, adapter

我坚持了几个小时，我试图为我的 ListView 中的第一个列表项设置一个图像，但其他列表项上的一些 ImageViews 也在发生变化。

```
public class MyAdapter extends BaseAdapter {
    private LayoutInflater mInflater;
    public ArrayList<ListItem> myItems = new ArrayList<ListItem>();

    Player[] players;

    public MyAdapter() {
        DataBase banco = new DataBase(ScoreBoard.this);
        players = banco.consultaJogadores(); 
        mInflater = (LayoutInflater) getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        for (int i = 0; players[i] != null; i++) {
            ListItem listItem = new ListItem();
            listItem.caption = players[i].getName();
            myItems.add(listItem);
        }
        notifyDataSetChanged();
    }

    public int getCount() {
        return myItems.size();
    }

    public Object getItem(int position) {
        return position;
    }

    public long getItemId(int position) {
        return position;
    }

    public View getView(int position, View convertView, ViewGroup parent) {
        ViewHolder holder;
        if (convertView == null) {
            holder = new ViewHolder();
            convertView = mInflater.inflate(R.layout.topplayer, null);      
            holder.textView = (TextView) convertView.findViewById(R.id.topPlayerTextView);
            holder.imageview = (ImageView) convertView.findViewById(R.id.topPlayerImageView);   
            convertView.setTag(holder);
        } else {
            holder = (ViewHolder) convertView.getTag();
        }           
        holder.textView.setText(position + " " + players[position].getName() + " " + players[position].getScore());
        if (position == 0) {
            holder.imageview.setImageResource(R.drawable.ball);
        }
        return convertView;
    }
}

class ViewHolder {
    TextView textView;
    ImageView imageview;
}

class ListItem {
    String caption;
} 
```

我想从列表中的第一个玩家更改图像。索引为 0、1、4、6、8、9、11、13 和 14 的玩家得到更新，它不遵循逻辑顺序。当我滚动时，图像再次改变。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-19T19:50:41.017

您正在回收视图，因此当您不希望设置 listitems 图像时，您必须明确取消设置它：

```
if (position == 0) {
    holder.imageview.setImageResource(R.drawable.ball);
} else {
    holder.imageview.setImageDrawable(null);
} 
```

（否则它只会记住上次使用该视图（（即convertView））时设置的图像！

# android - 基于Android中的屏幕/片段宽度隐藏TableLayout中的列

> ID：12501482
> 
> 赞同：0
> 
> 时间：2012-09-19T19:22:28.980
> 
> 标签：android, android-layout

我希望我的 Android 应用程序能够流畅地适应不同的屏幕分辨率和旋转（横向/纵向方向变化）。到目前为止，按照[建议](http://developer.android.com/training/multiscreen/adaptui.html)，使用 Fragments 和几个布局文件已经完成了这项工作。

现在我使用[TableLayout](http://developer.android.com/reference/android/widget/TableLayout.html)以表格格式显示数据库查询结果。

为了使这种布局适应不同的屏幕/布局宽度，我想*完全隐藏*列（首先隐藏最不重要的列），直到有足够的空间容纳可用空间中剩余的内容。理想情况下，单元格内容不会换行，并且列宽将固定为完全显示其内容所需的最小值。

请注意最后一部分：由于列宽是其内容的函数，并且在设计时未知，因此布局必须在运行时适应可用空间，并且不允许缩小列宽。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T19:34:13.337

我想，最简单的方法是为不同的屏幕分辨率创建不同的 TableLayouts。在您的代码中，您将测试布局中是否有某个字段可用，如果有则填充它。如果不是，那么您使用的设备的屏幕分辨率没有该特定字段的列。无论如何，在 Android 上推荐使用针对不同屏幕尺寸和分辨率的不同布局。

补充：您可以做的是编写自己的 MyTableLayout，并动态确定列数。写一个视图，实现“onLayout”和“onMeasure”并不难。这样，您将永远拥有最合适的人选。该视图将接受该行中的所有项目，并且只会显示适合的项目。

# android - SELECT 语句不返回 MAX 数

> ID：12501484
> 
> 赞同：1
> 
> 时间：2012-09-19T19:22:36.460
> 
> 标签：android, select, cursor

我在以下代码中遇到了 SELECT 语句的问题（这是在我的数据库助手类中）：

```
public Cursor selectMaxAreaNumber (long inspectionId) { 
String inspectionIdString = String.valueOf(inspectionId); 
String[] tableColumns = new String[] {  
        AREA_NUMBER,  
        "(SELECT max(" + AREA_NUMBER + ") FROM " + AREAS_TABLE + ") AS max"  
    };  
String whereClause = INSPECTION_LINK + " = ?"; 
String[] whereArgs = new String[] { 
        inspectionIdString           
    }; 
Cursor c = rmDb.query(AREAS_TABLE, tableColumns, whereClause, whereArgs,  
        null, null, null); 

if (c != null) { 
    c.moveToFirst(); 
} 
c.close(); 
return c; 
```

}

然后我在我的活动中这样称呼它：

```
Cursor c = rmDbHelper.selectMaxAreaNumber(inspectionId); 
    startManagingCursor(c); 
    c.moveToFirst(); 
    nextAreaNumber = c.getInt(c.getColumnIndex("max")) + 1; 
```

它正在从表中提取最大数量，因此 WHERE 语句似乎失败了。但是，我看不出问题是什么。

作为这个问题的一部分，任何人都可以通过在查询中使用 ID 之前将 ID 转换为字符串来确认我是否在做正确的事情，我是否需要在这两个位中编写 c.moveToFirst() ？

提前谢谢了！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T19:44:19.553

尝试改变

"(SELECT max(" + AREA_NUMBER + ") FROM " + AREAS_TABLE + ") AS 最大值"

至

"SELECT max(" + AREA_NUMBER + ") AS max FROM " + AREAS_TABLE

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T19:53:24.910

试试这个：

```
public Cursor selectMaxAreaNumber (long inspectionId) { 
    String[] tableColumns = new String[] {  
        "Max(" + AREA_NUMBER + ") AS max"  
    };  
    String whereClause = INSPECTION_LINK + " = ?"; 
    String[] whereArgs = new String[] { 
        String.valueOf(inspectionId); 
    }; 
    return rmDb.query(AREAS_TABLE, tableColumns, whereClause, whereArgs,  
        null, null, null); 
} 
```

这将返回一个`AREA_NUMBER`具有适当`inspectionId`.

几点注意事项：

*   当你使用一个函数时，`Max()`你只得到一行结果，没有必要要求`AREA_NUMBERS` *和* `Max(AREA_NUMBERS)`
*   游标可能是*空*的，但不会是`null`
*   在使用之前不要关闭光标

所以你不需要这个：

```
if (c != null) { 
    c.moveToFirst(); 
} 
c.close(); 
```

了解如果`c`以某种方式出现`null`，您仍然会收到 NullPointerException`c.close()`

* * *

（可选）您可以删除`whereArgs`并使用：

```
String whereClause = INSPECTION_LINK + " = " + inspectionId; 
```

（仅仅因为`inspectionId`是`long`数据类型，你需要一个字符串来执行注入攻击。）

* * *

最后你应该在这里检查一个空的光标：

```
Cursor c = rmDbHelper.selectMaxAreaNumber(inspectionId); 
startManagingCursor(c); 
if(c.moveToFirst()) 
    nextAreaNumber = c.getInt(c.getColumnIndex("max")) + 1;
else //empty Cursor, return a default value
    nextAreaNumber = 0; 
```

# python - 在数值工作中混合 numpy 和 OO

> ID：12501487
> 
> 赞同：4
> 
> 时间：2012-09-19T19:22:47.810
> 
> 标签：python, performance, oop, numpy, numerical

首先，我想知道在数值工作中使用 OO 方法是否是一般的好习惯。

其次，OO 的一个可能用例是将某个模型的参数封装在某个对象中。比如说，我想研究形式为 ax^2 + bx +c 的抛物线。所以我会将 a、b、c 封装在某个抛物线对象中。我可以绘制它等等。现在，假设我想探索抛物线垂直轴的位置。基本上，如果没有 OO，我可以为几个给定的 c 值绘制所有垂直轴位置 wrt a 和 b（这将是两个 numpy 数组）的表面。

我的问题是，如何在不牺牲（太多）numpy 性能的情况下使用额外的 OO 层进行这样的表面绘图？

**额外说明**

使用 OO 方法的一种方法是为一系列参数 a 和 b 的值创建抛物线对象矩阵。但是这种方式将处理可能非常大的对象，而不是参数范围的普通 numpy 数组。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-20T19:33:50.833

我建议不要使用对象数组，因为您最终会失去使用 numpy 的几乎所有性能优势。我们的结构或编码更像这样：

```
class Points:

    def __init__(self, x, y):
        self.x = np.asarray(x)
        self.y = np.asarray(y)

    def shift_left(self, distance):
        self.x -= distance

x = np.zeros(10000)
y = np.zeros(10000)

points_obj = Points(x, y) 
```

现在您可以创建函数、方法等，这些函数、方法等在`points_obj`知道这一点的情况下进行操作，`points_obj.x`并且`point_obj.y`是 numpy 数组（可能大小为 1，或者可能更大）。如果您需要能够索引到 points_obj，您总是可以`__getitem__`在您的类上定义一个方法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-19T20:54:52.233

无论是否面向对象，您都可以使用相同的数值算法。我不太明白你的问题。OO更多的是关于程序结构和数据之间的连接。方法中的数字可以与普通程序程序中的数字相同。 - 编辑 -

当你向量化它的方法时，你可以很快地制作你的抛物线数组。您当然可以对更复杂的向量进行矢量化。

```
import numpy as np

class parabola:
    a = 0.0
    b = 0.0
    c = 0.0
    def __init__(self,a,b,c):
        self.a = a
        self.b = b
        self.c = c
    def set_a(self, new_a):
        self.a = new_a
    def set_b(self, new_b):
        self.b = new_b
    def set_c(self, new_c):
        self.c = new_c
    def get_a(self):
        return self.a
    def get_b(self):
        return self.b
    def get_c(self):
        return self.c

vpara = np.vectorize(parabola)
vgeta = np.vectorize(parabola.get_a)
vgetb = np.vectorize(parabola.get_b)
vgetc = np.vectorize(parabola.get_c)

a = np.zeros(10000)
b = np.zeros(10000)
c = np.zeros(10000)
a[:]  = [i for i in xrange(10000)]
b[:]  = [2*i for i in xrange(10000)]
c[:]  = [i*i for i in xrange(10000)]

objs = np.empty((10000), dtype=object)
objs[:] = vpara(a,b,c)

print vgeta(objs[1:10:2]),vgetc(objs[9900:9820:-3]) 
```

# android - 带有圆角的 Android AlertDialog

> ID：12501488
> 
> 赞同：38
> 
> 时间：2012-09-19T19:22:52.083
> 
> 标签：android, android-layout, android-alertdialog, android-styles

我一直在尝试用圆角制作我的警报对话框，但不知何故我做不到。我试过了，但我失败了。我试着关注这个博客[http://blog.stylingandroid.com/archives/271](http://blog.stylingandroid.com/archives/271)并以此为基础制作了我的风格。

**顺便说一句，现在补充我的问题。我的一些新发现。上面链接中的代码在 2.3.3 (GB) 上运行良好，但在 ICS 中根本不起作用。一些更改使代码中断。**

**我想避免创建 9 个补丁图像，因此我使用的是形状。9 补丁图像是我将尝试的最后一件事。我知道 android 警报对话框样式正在使用 9 补丁图像。在提出这个问题之前，我已经查过了。**

**/res/values/themes.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<resources>

    <style name="MyTheme" parent="@android:style/Theme.Dialog">
        <item name="android:alertDialogStyle">@style/dialog</item>
    </style>

</resources> 
```

**/res/values/styles.xml**

```
<resources xmlns:android="http://schemas.android.com/apk/res/android">

    <style name="AppTheme" parent="android:Theme.Light" />

    <style name="myImageView">

        <!-- 3dp so the background border to be visible -->
        <item name="android:padding">3dp</item>
        <item name="android:background">@drawable/image_drawable</item>
        <item name="android:scaleType">fitCenter</item>
    </style>

    <style name="dialog">
        <item name="android:fullDark">@drawable/dialog_body</item>
        <item name="android:topDark">@drawable/dialog_title</item>
        <item name="android:centerDark">@drawable/dialog_body</item>
        <item name="android:bottomDark">@drawable/dialog_footer</item>
        <item name="android:fullBright">@drawable/dialog_body</item>
        <item name="android:centerBright">@drawable/dialog_body</item>
        <item name="android:topBright">@drawable/dialog_title</item>
        <item name="android:bottomBright">@drawable/dialog_footer</item>
        <item name="android:bottomMedium">@drawable/dialog_footer</item>
        <item name="android:centerMedium">@drawable/dialog_body</item>
    </style>

</resources> 
```

**/res/drawable/dialog_title.xml**

```
<inset xmlns:android="http://schemas.android.com/apk/res/android"
    android:insetBottom="-1dp">
    <shape android:shape="rectangle">
        <solid android:color="#FFFFFF" />
        <corners android:topLeftRadius="5dp" android:topRightRadius="5dp" />
        <stroke android:color="#FFFFFF" android:width="1dp" />
    </shape>
</inset> 
```

**/res/drawable/dialog_body.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<shape xmlns:android="http://schemas.android.com/apk/res/android"
    android:shape="rectangle">
    <gradient android:startColor="#FFFFFFFF" android:endColor="#FFFFFFFF"
        android:angle="270" />
</shape> 
```

**/res/drawable/dialog_footer.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<shape xmlns:android="http://schemas.android.com/apk/res/android"
    android:shape="rectangle" >

    <solid android:color="#FFFFFF" />

    <corners
        android:bottomLeftRadius="5dp"
        android:bottomRightRadius="5dp" />

    <stroke
        android:width="1dp"
        android:color="#FFFFFF" />

</shape> 
```

**res/layout/dialog_layout.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    >

    <TextView
        android:id="@+id/textView1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentTop="true"
        android:layout_centerHorizontal="true"
        android:layout_marginTop="45dp"
        android:text="Large Text"
        android:textAppearance="?android:attr/textAppearanceLarge" />

    <Button
        android:id="@+id/button1"
        style="?android:attr/buttonStyleSmall"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_below="@+id/textView1"
        android:layout_marginTop="90dp"
        android:layout_toLeftOf="@+id/textView1"
        android:background="@drawable/button_selector"
        android:text="Ok"
        android:textColor="@android:color/white"
        android:textStyle="bold" />

    <Button
        android:id="@+id/button2"
        style="?android:attr/buttonStyleSmall"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentRight="true"
        android:layout_alignTop="@+id/button1"
        android:layout_marginRight="48dp"
        android:background="@drawable/button_selector"
        android:text="More"
        android:textColor="@android:color/white"
        android:textStyle="bold" />

    <LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_below="@+id/button1"
        android:layout_marginTop="41dp"
        android:orientation="vertical" >
    </LinearLayout>

</RelativeLayout> 
```

**我的警报对话框代码：**

```
public static void createYesNoDialog(final Context context, String positivebuttonname,
            String negativebuttonname, String message, int messagedrawable, String headermessage,
            final DialogResponse dr) {
        final DialogResponse dialogResponse = dr;
        ContextThemeWrapper ctw = new ContextThemeWrapper(context,
                com.gp4ever.worldlogo.quiz.R.style.MyTheme);

        AlertDialog.Builder builder = new AlertDialog.Builder(ctw);
        LayoutInflater inflater = (LayoutInflater)context
                .getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        View layout = inflater.inflate(com.gp4ever.worldlogo.quiz.R.layout.dialog_layout, null);
        TextView text = (TextView)layout.findViewById(com.gp4ever.worldlogo.quiz.R.id.textView1);
        Button buttonOk = (Button)layout.findViewById(com.gp4ever.worldlogo.quiz.R.id.button1);
        Button buttonMore = (Button)layout.findViewById(com.gp4ever.worldlogo.quiz.R.id.button2);
        text.setText(message);
        if (messagedrawable > 0) {
            text.setCompoundDrawablesWithIntrinsicBounds(messagedrawable, 0, 0, 0);
        } else if (messagedrawable == 0)
            text.setCompoundDrawablesWithIntrinsicBounds(0, 0, 0, 0);
        builder.setView(layout);
        builder.setCancelable(false);
        builder.setTitle(headermessage);
        builder.setIcon(android.R.drawable.ic_dialog_alert);
        final AlertDialog dialog = builder.create();

        buttonOk.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {
                // TODO Auto-generated method stub
                dialog.cancel();
            }
        });
        buttonMore.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {
                // TODO Auto-generated method stub
                dialog.cancel();
            }
        }); 
```

}

**我当前的输出：**

我没有得到任何圆角。我可以看到它与通常的风格不同。即使我更改了可绘制对象的半径，角也不会反映这些更改。

![在此处输入图像描述](../Images/0c46809892fe4ec370781d16c4ffaf43.png)

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2012-09-23T08:55:01.537

您可以使用以下代码执行此操作：

自定义对话框.java：

```
public class MainActivity extends Activity{

    private static final int ALERT_DIALOG = 1;

    @Override
    public void onCreate( Bundle savedInstanceState )
    {
        super.onCreate( savedInstanceState );
        setContentView( R.layout.main );

        ( (Button) findViewById( R.id.button1 ) )
            .setOnClickListener( new OnClickListener()
                {
                    public void onClick( View v )
                    {
                        showDialog( ALERT_DIALOG );
                    }
                }
            );
    }

    @Override
    protected Dialog onCreateDialog( int id ){
        Dialog dialog = null;
        if ( id == ALERT_DIALOG )
        {
            ContextThemeWrapper ctw = new ContextThemeWrapper( this, R.style.MyTheme );
            AlertDialog.Builder builder = new AlertDialog.Builder( ctw );
            builder.setMessage( "Hello World" )
                .setTitle( "Alert Dialog" )
                .setIcon( android.R.drawable.ic_dialog_alert )
                .setCancelable( false )
                .setPositiveButton( "Close", new DialogInterface.OnClickListener()
                    {
                        public void onClick( DialogInterface dialog, int which )
                           {
                                dialog.dismiss();
                           }
                        } 
                    );
            dialog = builder.create();
        }
        if ( dialog == null )
        {
            dialog = super.onCreateDialog( id );
        }
        return dialog;
     }
 } 
```

对话框标题.xml

```
<?xml version="1.0" encoding="utf-8"?>
<inset xmlns:android="http://schemas.android.com/apk/res/android" android:insetBottom="-1dp">
    <shape android:shape="rectangle">
        <solid android:color="#000000" />
        <corners android:topLeftRadius="20dp" android:topRightRadius="20dp" />
        <stroke android:color="#7F7F7F" android:width="1dp" />
    </shape>
</inset> 
```

dialog_footer.xml

```
<?xml version="1.0" encoding="utf-8"?>
<shape xmlns:android="http://schemas.android.com/apk/res/android"
    android:shape="rectangle">
    <solid android:color="#7F7F7F" />
    <corners android:bottomLeftRadius="20dp" android:bottomRightRadius="20dp" />
    <stroke android:color="#7F7F7F" android:width="1dp" />
</shape> 
```

只需将半径量更改为：

`dialog_title.xml`

和

`dialog_footer.xml`

这将生成以下输出：

![在此处输入图像描述](../Images/504361fd00856b469adffa3dab26b344.png)

希望这会帮助你。

* * *

**更新：**
我不是专家，但这就是我发现的。这可能是对的，也可能是错的。经过多次尝试，我最终得到以下结果：

1-`ContextThemeWrapper`不适用于 API 14，它在 Gingerbread 和旧版本上运行良好，但在 API > 10 时它不起作用。

2-为了克服上述问题并使其按要求在 API > 10 上工作，我替换了这一行：

```
ContextThemeWrapper ctw = new ContextThemeWrapper( this, R.style.MyTheme );
AlertDialog.Builder builder= new AlertDialog.Builder( ctw ); 
```

有了这个：

```
AlertDialog.Builder builder= new AlertDialog.Builder( this,R.style.MyTheme ); 
```

但你需要改变：

```
android:minSdkVersion="8" 
```

至

```
android:minSdkVersion="11" 
```

结果将如下图所示在 ICS (API 14) 上：

![在此处输入图像描述](../Images/72e923632cbfdb87711cf3ac66e38f02.png)

此图像来自运行 ICS 的三星 Galaxy S3。

注意：使用 API 14 SO manifest sdk 启动的修改项目将是：

```
<uses-sdk
  android:minSdkVersion="11"
  android:targetSdkVersion="15" /> 
```

* * *

**最后一句话：** 作为我对Android开发的一点了解（我不是专家），

1-自定义警报对话框在 API < 10 但不是 > 10 中使用相同的 Java 代码顺利运行，

如果我们希望它在 ICS 中运行并具有与 API < 10 中出现的效果相同的效果，**我们需要修改代码**，使其可以在 ICS 上运行，但不会在 API 11 以下的任何版本中运行。

2- 即使在 ICS 中的结果也不尽如人意，圆角仅适用于标题而不适用于页脚。

* * *

**第二** 次更新：最后我得到了所有的角落，

`padding`只需申请`dialog_footer.xml`如下：

```
<?xml version="1.0" encoding="utf-8"?>
<shape xmlns:android="http://schemas.android.com/apk/res/android"
android:shape="rectangle">
    <solid android:color="#7F7F7F" />
    <corners android:bottomLeftRadius="20dp" android:bottomRightRadius="20dp" />
    <stroke android:color="#7F7F7F" android:width="1dp" />
    <padding android:left="10dp" android:top="10dp" android:right="10dp"
android:bottom="10dp" /> 
</shape> 
```

输出图像：

![在此处输入图像描述](../Images/91c84d5f9efc3a97f93d317b97d06874.png)

**此图像来自运行 ICS 的三星 Galaxy S3。**

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2014-01-23T09:48:08.007

距离@iDroid Explorer 答案仅一步之遥

构建对话框时添加此行

```
dialog.getWindow().setBackgroundDrawable(new ColorDrawable(android.graphics.Color.TRANSPARENT)); 
```

这将使矩形消失（实际上是透明的）并得到一个完美的圆形对话框。

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2019-09-08T16:57:18.583

只需使用[**`MaterialAlertDialogBuilder`**](https://github.com/material-components/material-components-android/blob/master/docs/components/Dialog.md)官方材料组件库中包含的即可。

```
new MaterialAlertDialogBuilder(MainActivity.this,R.style.MyThemeOverlay_MaterialComponents_MaterialAlertDialog)
            .setTitle("Dialog")
            .setMessage("Lorem ipsum dolor ....")
            .setPositiveButton("Ok", /* listener = */ null)
            .setNegativeButton("Cancel", /* listener = */ null)
            .show(); 
```

**`shapeAppearanceOverlay`**然后使用属性定义样式。

```
 <style name="MyThemeOverlay.MaterialComponents.MaterialAlertDialog" parent="@style/ThemeOverlay.MaterialComponents.MaterialAlertDialog">
    <item name="shapeAppearanceOverlay">@style/ShapeAppearanceOverlay.MyApp.Dialog.Rounded</item>
  </style>

  <style name="ShapeAppearanceOverlay.MyApp.Dialog.Rounded" parent="">
    <item name="cornerFamily">rounded</item>
    <item name="cornerSize">8dp</item>
  </style> 
```

[![在此处输入图像描述](../Images/f79a8823e3ecc5acd4222f93405d4ee3.png)](https://i.stack.imgur.com/Kcufy.png)

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-09-28T05:30:23.647

我尝试了以下一个相同的问题，它对我有用。**即使对于 ICS 也是如此。**

**1\. 首先我把主题放到我的 AlertDialog 中。**

```
final Dialog  nag = new Dialog(this,android.R.style.Theme_Translucent_NoTitleBar_Fullscreen);
        nag.requestWindowFeature(Window.FEATURE_NO_TITLE);
        nag.setCancelable(true);
        nag.setContentView(R.layout.pop_exit);  
        Button btnNO = (Button)nag.findViewById(R.id.btn_popup_NO);
        Button btnYES = (Button)nag.findViewById(R.id.btn_popup_YES);

        btnNO.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {

            nag.cancel();

            }
        });

        btnYES.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {

                System.exit(0);

            }
        });

        nag.show(); 
```

**2\. 然后实现了对话框视图的自定义布局**

**pop_exit.xml**

```
 <?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:orientation="vertical" android:layout_width="fill_parent"
    android:gravity="center" android:layout_height="fill_parent">

    <!-- <LinearLayout android:orientation="vertical" android:layout_marginLeft="20dp" 
        android:layout_marginRight="20dp" android:background="#95000056" android:layout_width="fill_parent" 
        android:layout_height="wrap_content"> -->

    <LinearLayout android:orientation="vertical"
        android:layout_marginLeft="20dp" android:layout_marginRight="20dp"
        android:background="@drawable/round" android:layout_width="fill_parent"
        android:layout_height="wrap_content">

        <TextView android:text="Exit Application"
            android:layout_width="wrap_content" android:layout_height="wrap_content"
            android:layout_gravity="center_horizontal" android:textStyle="bold"
            android:textColor="#fff" android:textSize="20dp"
            android:layout_marginTop="5dp" />

        <LinearLayout android:layout_width="fill_parent"
            android:layout_height="wrap_content" android:orientation="horizontal"
            android:layout_marginTop="5dp" android:weightSum="2"
            android:layout_marginLeft="10dp" android:layout_marginRight="10dp"
            android:gravity="center">

            <Button android:text="No" android:layout_weight="1"
                android:gravity="center" android:layout_width="wrap_content"
                android:layout_height="wrap_content" android:id="@+id/btn_popup_NO" />

            <Button android:text="Ok" android:layout_weight="1"
                android:layout_width="wrap_content" android:layout_height="wrap_content"
                android:id="@+id/btn_popup_YES" />
        </LinearLayout>

    </LinearLayout>

</LinearLayout> 
```

**3\. 现在将形状添加到 pop_exit.xml 的父布局的背景中**

**round.xml // 形状文件**

```
 <?xml version="1.0" encoding="utf-8"?>
<shape xmlns:android="http://schemas.android.com/apk/res/android">
    <solid android:color="#99000056" />
    <corners android:radius="35px" />
    <padding android:left="0dp" android:top="0dp" android:right="0dp"
        android:bottom="0dp" />
</shape> 
```

我只是这样做。它也适用**于 ICS**。

希望它会帮助你。如果没有，请告诉我。

享受编码...

:)

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2012-09-21T20:59:51.650

正如您所说，您不想使用 9 补丁图像，请看这里。

[https://stackoverflow.com/a/1683195/940834](https://stackoverflow.com/a/1683195/940834)

原理完全相同，只是将背景分配给布局，而本示例是线性布局。

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2021-03-07T04:06:23.087

# 最简单的方法：

***dialog_card.xml***

```
<?xml version="1.0" encoding="utf-8"?>
<shape xmlns:android="http://schemas.android.com/apk/res/android">
    <solid android:color="@android:color/white"/>
    <corners android:radius="8dp"/>
</shape> 
```

***主题.xml***

```
<!--    ... your other style codes -->

<style name="MyAlertTheme" parent="@style/Theme.AppCompat.Light.Dialog.Alert">
    <item name="android:windowBackground">@drawable/dialog_card</item>
</style> 
```

***在您的活动中***

```
AlertDialog.Builder alert = new AlertDialog.Builder(MainActivity.this, R.style.MyAlertTheme);
alert.setTitle("<Your Title>");
alert.setMessage("<Your Message>");
// ... 
```

### 奖金：

如果您想`AlertDialog`在应用程序的任何地方使用它，
只需添加`<item name="alertDialogTheme">@style/MyAlertTheme</item>`您的`AppTheme`.

所以你不必`R.style.MyAlertTheme`传入`AlertDialog.BUilder`.

***主题.xml***

```
<style name="AppTheme" parent="Theme.AppCompat.Light.NoActionBar">
    <item name="colorPrimary">@color/colorPrimary</item>
    <item name="colorPrimaryDark">@color/colorPrimaryDark</item>
    <item name="colorAccent">@color/colorAccent</item>
<!-- here -->
    <item name="alertDialogTheme">@style/MyAlertTheme</item>
</style> 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2016-11-11T11:51:34.253

1.  使用 dialog_corner 在可绘制文件夹中创建 xml。

```
<?xml version="1.0" encoding="utf-8"?>
<shape xmlns:android="http://schemas.android.com/apk/res/android">
  <solid android:color="@color/main_background"/>
  <corners
    android:topLeftRadius="@dimen/margin_10" 
    android:topRightRadius="@dimen/margin_10"
    android:bottomRightRadius="@dimen/margin_10" 
    android:bottomLeftRadius="@dimen/margin_10" />
</shape> 
```

2.放入布局

`android:background="@drawable/dialog_corner"`

3.在你的java文件中保留下面的代码

```
View mView = LayoutInflater.from(mContext).inflate(R.layout.layout_pob,null); 
alertDialog.getWindow().setBackgroundDrawable(new ColorDrawable(Color.TRANSPARENT)); 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-12-21T17:47:33.070

这对我有用：

```
<style name="AppTheme.AlertDialog" parent="Theme.AppCompat.Light.Dialog.Alert">
        <item name="android:colorBackground">@android:color/transparent</item>
        <item name="android:background">@drawable/dialog_bg</item>
</style> 
```

dialog_bg.xml

```
<?xml version="1.0" encoding="utf-8"?>
<shape xmlns:android="http://schemas.android.com/apk/res/android">
    <solid android:color="@color/white"/>
    <corners android:radius="12dp"/>
</shape> 
```

# iphone - MPMoviePlayerController 无法播放

> ID：12501489
> 
> 赞同：1
> 
> 时间：2012-09-19T19:22:52.523
> 
> 标签：iphone, objective-c, ios

感觉这应该在SO的某个地方。然而我找不到...

我正在尝试使用 MPMoviePlayerController，但问题是完全没有任何反应。我什至没有收到错误...

这是一些代码：

```
NSURL *movieUrl = [NSURL URLWithString:[attachmentDictionary objectForKey:@"Uri"]];
    NSLog(@"URI %@", movieUrl);
    MPMoviePlayerController *mediaController = [[MPMoviePlayerController alloc] initWithContentURL:movieUrl];

    [mediaController prepareToPlay];
    [mediaController.view setFrame:self.view.bounds];
    [self.view addSubview:mediaController.view];

    [mediaController play]; 
```

我已经包含了 MediaPlayer 框架和 MediaPlayer/MediaPlayer.h。

你知道什么可能是错的吗？

编辑：

发现我收到此错误代码：

```
2012-09-28 09:45:57.346 Famorable[178:907] [MPAVController] Autoplay: Disabling autoplay for pause
2012-09-28 09:45:57.348 Famorable[178:907] [MPAVController] Autoplay: Disabling autoplay
2012-09-28 09:45:57.435 Famorable[178:907] [MPAVController] Autoplay: Skipping autoplay, disabled (for current item: 1, on player: 0) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T08:51:05.143

我知道了！

通过在 MPMoviePlayerController 播放之前释放它来再次吓到 ARC...通过在头文件中声明该属性，您就可以开始了！

# c# - 排序时出现意外结果

> ID：12501492
> 
> 赞同：-3
> 
> 时间：2012-09-19T19:23:21.597
> 
> 标签：c#, linq, sorting

我使用此代码进行排序：

```
var fileEntries = from f in Directory.GetFiles(Application.StartupPath + "/TrainedFaces/", "*.bmp", SearchOption.AllDirectories) 
                  let fi = new FileInfo(f) 
                  orderby fi.Name 
                  select fi.FullName; 
```

出了点问题当我先放 Face10，Face11 后才使用 Face1，所以这就是问题所在

这是我想要的输出

```
[0] = "N:\FaceRecProOV - Copy (2)\FaceRecProOV\bin\Debug/TrainedFace/1\ 1.bmp"
[1] = "N:\FaceRecProOV - Copy (2)\FaceRecProOV\bin\Debug/TrainedFaces/2\ 2.bmp"
[2] = "N:\FaceRecProOV - Copy (2)\FaceRecProOV\bin\Debug/TrainedFaces/3\ 3.bmp"
[3] = "N:\FaceRecProOV - Copy (2)\FaceRecProOV\bin\Debug/TrainedFaces/4\ 4.bmp"
[4] = "N:\FaceRecProOV - Copy (2)\FaceRecProOV\bin\Debug/TrainedFaces/4\ 9.bmp"
[5] = "N:\FaceRecProOV - Copy (2)\FaceRecProOV\bin\Debug/TrainedFaces/4\ 10.bmp" 
```

但它给

```
[0] = "N:\FaceRecProOV - Copy (2)\FaceRecProOV\bin\Debug/TrainedFace/1\ 1.bmp"
[5] = "N:\FaceRecProOV - Copy (2)\FaceRecProOV\bin\Debug/TrainedFaces/4\ 10.bmp"
[1] = "N:\FaceRecProOV - Copy (2)\FaceRecProOV\bin\Debug/TrainedFaces/2\ 2.bmp" 
```

代码有什么问题？？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T19:25:39.503

这样做是因为它假设它是一个字符串（“10”在“2.”之前）对其进行排序。

您将必须获取文件名并将其转换为 int 并以此为基础进行排序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T19:27:49.267

您正在按字母顺序对数据进行排序，而不是按数字排序。假设输入根本无法修改，您需要将文件名解析为数字，然后对其进行排序。

```
var fileEntries = from f in Directory.GetFiles(Application.StartupPath + "/TrainedFaces/", "*.bmp", SearchOption.AllDirectories) 
let fi = new FileInfo(f) 
orderby parse(fi.Name )
select fi.FullName;

public static int Parse(string filename)
{
  //for your real program you'll want to ensure that there is error handling and determine what to do with non-numeric filenames.
  return int.Parse(filename.Substring(0, filename.LastIndexOf('.'));
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-19T20:57:46.923

```
var fileEntries = Directory.GetFiles(Application.StartupPath + "/TrainedFaces/", "*.bmp", SearchOption.AllDirectories)
                           .Select(f=>new FileInfo(f))
                           .OrderNaturallyBy(fi=>fi.Name)
                           .Select(fi=>fi.FullName);

public static class S_O_Extensions
{
    public static IEnumerable<T> OrderNaturallyBy<T>(this IEnumerable<T> list, Func<T,string> selector)
    {
        return list.Select(item => new
                    {
                        t = item,
                        tempstr = Regex.Replace(selector(item), @"\d+", m => m.Value.PadLeft(20, '0'))
                    })
                    .OrderBy(x => x.tempstr)
                    .Select(x => x.t);
    }
} 
```

# apache - 跟踪 wget 请求

> ID：12501493
> 
> 赞同：0
> 
> 时间：2012-09-19T19:23:28.977
> 
> 标签：apache, web, wget

我想知道是否有任何方法可以跟踪我在开发服务器时发出的所有 wget 请求。

有没有办法做到这一点？

我正在运行一个 apache 服务器。如果您需要更多信息，请告诉我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T19:27:00.073

您可以在 access.log 文件中查看对 Web 服务器 (apache) 的所有请求。它通常在 /var/log/httpd/access.log 中（在基于 redhat 的发行版上）

# sql-server - 如何使用 SQL 将变量分成两个？

> ID：12501496
> 
> 赞同：0
> 
> 时间：2012-09-19T19:23:41.093
> 
> 标签：sql-server

我有一个变量，@RegionPeril 从游标中检索，我想知道我是否可以将这个变量一分为二。

@RegionPeril 可以是以下（但不限于）：

```
WS EU
WS CA
EQ Worldwide
FL ROW 
```

我想要两个变量：@Peril 和@Region 其中@Peril = WS 或@Peril = EQ（可以有更多，但它是@RegionPeril 变量的前两个字符串）和@Region = EU 或@Region = Worldwide（等等on...这是直到@RegionPeril 变量末尾的第三个字符串）

有什么办法可以分开吗？？

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T19:27:13.160

像这样的东西应该可以工作（假设@RegionPeril 中的第一项始终是 2 个字符）：

```
SELECT 
    @Region = LEFT(@RegionPeril, 2), 
    @Peril = RIGHT(@RegionPeril,LEN(RegionPeril)-3) 
```

或者，如果 Region 可以有不同的长度：

```
SELECT
    @Region = LEFT(@RegionPeril, CHARINDEX(' ', @RegionPeril)),
    @Peril = Right(@RegionPeril, LEN(@RegionPeril) - CHARINDEX(' ', @RegionPeril)) 
```

# sql-server-2008 - 使用 SQL 从范围中选择最低的未使用数字

> ID：12501501
> 
> 赞同：-3
> 
> 时间：2012-09-19T19:23:54.240
> 
> 标签：sql-server-2008, stored-procedures

我有一个表，其“位置”字段的范围从 1 到 25。我使用以下 SQL 当前返回当前未使用的最低“位置”；

```
select top 1 field from [dbo].[misc_fields] where field NOT IN (select location from ListFields where listid = @listid) order by field 
```

问题在于它依赖于 misc_fields 表，该表包含每个位置 (1-25) 的一行。我想消除拥有此查找表的需要，而只需在存储过程本身中定义范围。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T19:51:51.533

这是我现在能想到的最好的，虽然比你所拥有的要复杂一点；

```
SELECT MIN(pos) AS nextlocation FROM
(
  SELECT location, ROW_NUMBER() OVER (ORDER BY location) AS pos
  FROM ListFields WHERE listid=1
  UNION
  SELECT 0, MAX(location)+1
  FROM ListFields WHERE listid=1
) a
WHERE location<>pos; 
```

请注意，这不限于 25，它很可能会给出 26，因此您需要在其他地方自己检测您的限制。

[SQLfiddle 在这里尝试一下](http://sqlfiddle.com/#!3/6cf87/1)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T20:00:28.213

此解决方案不起作用。哔叽。

尝试使用[IDENTITY 功能](http://technet.microsoft.com/en-us/library/ms189838.aspx)：

```
SELECT MIN(artificial_table.id) FROM your_table RIGHT JOIN 
(SELECT TOP 25 IDENTITY(int,1,1) AS id) AS artificial_table 
ON your_table.id = artificial_table.id WHERE your_table.id IS NULL 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-09-19T21:05:27.967

取自 Martin Smith 提供的链接；

```
 WITH Locations (Location) AS 
        ( 
         SELECT 1 UNION ALL 
         SELECT 1 + Location FROM Locations WHERE Location < 26 
        ) 

SELECT Location INTO #Locations FROM Locations 

SELECT TOP 1 Location from #Locations where Location NOT IN (select location from ListFields where listid = @listid) order by Location

DROP TABLE #Locations 
```

# java - 如何在 Jruby-rack 中配置自定义 servlet？

> ID：12501504
> 
> 赞同：0
> 
> 时间：2012-09-19T19:24:18.753
> 
> 标签：java, ruby-on-rails, servlets, jruby, jruby-rack

根据[Jruby-Rack Github](https://github.com/jruby/jruby-rack)，我们可以配置为使用 org.jruby.rack.RackServlet 而不是上下文监听器。

我们可以使用另一个自定义 servlet 而不是 RackServlet 吗？或者我们可以覆盖 org.jruby.rack.RackServlet 吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T19:16:56.867

侦听器保留 - 您通常使用 servlet 而不是带有 Servlet API 的过滤器，例如

```
<servlet>
  <servlet-name>rack</servlet-name>
  <servlet-class>org.jruby.rack.RackFilter</servlet-class>
</servlet>
<servlet-mapping>
  <servlet-name>rack</servlet-name>
  <url-pattern>/*</url-pattern>
</servlet-mapping>

<!-- using the above servlet instead of : -->
<!--
<filter>
  <filter-name>RackFilter</filter-name>
  <filter-class>org.jruby.rack.RackFilter</filter-class>
</filter>
<filter-mapping>
  <filter-name>RackFilter</filter-name>
  <url-pattern>/*</url-pattern>
</filter-mapping>
-->

<listener>
  <listener-class>org.jruby.rack.RackServletContextListener</listener-class>
</listener> 
```

您可以覆盖它`RackFilter`，`RackServlet`甚至可以使用自定义类，只要它符合 JRuby-Rack 的规则即可。使用最新的 Trinidad（在引擎盖下使用 JRuby-Rack）配置备用 servlet 会更容易一些，而无需编写*web.xml*，例如在*config/trinidad.yml*中，您可能会：

```
---
  address: localhost
  port: 3000  # port where Trinidad is running
  rack_servlet:
    class: org.blue-smith.rack.CoolRackServlet 
```

如果您确实确保您的`CoolRackServlet`类在类路径上，例如将其打包在一个 jar 中并将 .jar 放在 *[APP_ROOT]/lib/java* 下，或者为了快速测试，只需复制已编译的 .class 文件，包括*lib/java/classes*下的包目录...

# regex - 查找小写化学式的所有可能排列

> ID：12501507
> 
> 赞同：3
> 
> 时间：2012-09-19T19:24:30.987
> 
> 标签：regex, chemistry

我正在尝试解决小写化学式中的歧义。由于某些元素名称是其他元素名称的子字符串，并且它们都一起运行，因此同一模式可以有多个全局匹配。

考虑`/^((h)|(s)|(hg)|(ga)|(as))+$/`针对字符串的正则表达式`hgas`。有两种可能的匹配。`hg, as`和`h, s, ga`（与输入相比无序，但不是问题）。显然，所有可能符号的正则表达式会更长，但这个例子是为了简单起见。

正则表达式强大的前瞻和后瞻功能使其能够最终确定即使是很长的字符串是否与此模式匹配，或者是否有可能的字母排列。它将努力尝试所有可能的匹配排列，例如，如果它以 leftover 命中字符串的末尾，则`g`返回并重试不同的组合。

我正在寻找一个正则表达式，或者一种具有某种扩展名的语言，它增加了在找到匹配项后继续查找匹配项的能力，在这种情况下，查找`h, s, ga`以及`hg, as`.

为这个问题重建复杂的正则表达式的前瞻和后视功能似乎不是一个合理的解决方案，特别是考虑到最终的正则表达式还在每个符号后包含一个 \d*。

我想过颠倒正则表达式的顺序`/^((as)|(ga)|(hg)|(s)|(h))+$/`，以找到额外的映射，但最多只能找到一个额外的匹配项，而且我没有正则表达式的理论背景，不知道尝试是否合理。

我使用现有的正则表达式创建了一个示例页面，它为给定的小写字符串找到 1 个或 0 个匹配项，并将其正确大写（并且无序）返回。它在匹配中使用前 100 个化学符号。

[http://www.ptable.com/Script/lowercase_formula.php?formula=hgas](http://www.ptable.com/Script/lowercase_formula.php?formula=hgas)

tl; dr：我有一个正则表达式来匹配字符串中的 0 或 1 个可能的化学式排列。如何找到超过 1 个匹配项？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-19T20:08:28.463

我很清楚这个答案可能是题外话（如方法），但我认为它很有趣，它解决了 OP 的问题。

如果您不介意学习一门新语言（Prolog），那么它可能会帮助您生成所有可能的组合：

```
name(X) :- member(X, ['h', 's', 'hg', 'ga', 'as']).

parse_([], []).
parse_(InList, [HeadAtom | OutTail]) :-
    atom_chars(InAtom, InList),
    name(HeadAtom),
    atom_concat(HeadAtom, TailAtom, InAtom),
    atom_chars(TailAtom, TailList),
    parse_(TailList, OutTail).

parse(In, Out) :- atom_chars(In, List), parse_(List, Out). 
```

样品运行：

```
?- parse('hgas', Out).
Out = [h, ga, s] ;
Out = [hg, as] ;
false. 
```

* * *

改进后的版本，包括对数字的处理，稍微长一点：

```
isName(X) :- member(X, ['h', 's', 'hg', 'ga', 'as', 'o', 'c']).

% Collect all numbers, since it will not be part of element name.
collect([],[],[]).
collect([H|T], [], [H|T]) :-
    \+ char_type(H, digit), !.
collect([H|T], [H|OT], L) :-
    char_type(H, digit), !, collect(T, OT, L).

parse_([], []).
parse_(InputChars, [Token | RestTokens]) :-
    atom_chars(InputAtom, InputChars),
    isName(Token),
    atom_concat(Token, TailAtom, InputAtom),
    atom_chars(TailAtom, TailChars),
    parse_(TailChars, RestTokens).

parse_(InputChars, [Token | RestTokens]) :-
    InputChars = [H|_], char_type(H, digit),
    collect(InputChars, NumberChars, TailChars),
    atom_chars(Token, NumberChars),
    parse_(TailChars, RestTokens).

parse(In, Out) :- atom_chars(In, List), parse_(List, Out). 
```

样品运行：

```
?- parse('hgassc20h245o', X).
X = [h, ga, s, s, c, '20', h, '245', o] ;
X = [hg, as, s, c, '20', h, '245', o] ;
false.

?- parse('h2so4', X).
X = [h, '2', s, o, '4'] ;
false.

?- parse('hgas', X).
X = [h, ga, s] ;
X = [hg, as] ;
false. 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T19:44:37.200

您没有找到执行此操作的通用正则表达式库的原因是所有正则表达式都无法执行此操作。有些正则表达式不会终止。

想象一下您的示例，您刚刚将空字符串添加到术语列表中，然后

'hgas' 可能是：

```
['hg', 'as']
['hg', '', 'as']
['hg', '', '', 'as'] 
```

你可能只需要自己动手。

在伪代码中：

```
def findall(term, possible):
    out = []

    # for all the terms
    for pos in possible:

        # if it is a candidate
        if term.startswith(pos):

            # combine it with all possible endings
            for combo in findall(term.removefrombegining(pos), possible):
                newCombo = combo.prepend(out)
                out.append(newCombo)
    return out

findall('hgas', ['h', 'as', ...]) 
```

以上将在指数时间内运行，因此动态编程将成为这不是指数大问题的方式。[为了胜利而记忆](http://en.wikipedia.org/wiki/Memoization)。

最后值得注意的是上面的代码没有检查它是否完全匹配。

IE。'hga' 可能会返回 ['hg']。

正如我的教授们亲切地说的那样，我将把实际的编码、记忆和最后的小插曲留给“读者练习”

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-19T20:18:47.423

不要使用正则表达式。正如您所说，正则表达式仅匹配 1 个元素，相反，您需要找到字符串的所有可能“含义”。鉴于每个元素的长度是 1-2 个字符，我会使用这个算法（原谅伪代码）：

```
string[][] results;

void formulas(string[] elements, string formula){
    string[] elements2=elements;

    if(checkSymbol(formula.substring(0,1))){
        elements.append(formula.substring(0,1));
        if(formula.length-1 ==0){
            results.append(elements);
        } else {
            formulas(elements,formula.substring(1,formula.length);
        }
    }
    if(checkSymbol(formula.substring(0,2))){
        elements2.append(formula.substring(0,2));
        if(formula.length-2 ==0){
            results.append(elements2);
        } else {
            formulas(elements2,formula.substring(2,formula.length);
        }
    }

}

bool checkSymbol(string symbol){
    // verifies if symbol is the name of an element
} 
```

输入`"hgas"`（让我们先深入）

第一步： `checkSymbol(formula.substring(0,1))`为真`"h"`

```
elements2 = [h] 
```

递归调用，`if(checkSymbol(formula.substring(0,1))) false`

然后它测试`ga`=> true

```
elements2 = [h, ga] 
```

第三次递归调用

测试`s`，`checksymbol`返回 true，元素是 then `[h, ga, s]`。子字符串的长度为 0，因此它附加到第一个数组的结果中：`[h, ga, s]`

——让我们回到第一步的第二个“分支”

测试`checkSymbol(formula.substring(0,2)`发现它`"hg"`也是一个元素

```
elements2 = [hg] 
```

然后我们调用`formulas([hg],"as")`

测试`"a"`失败（它不是元素）和测试`"as"`工作，长度完全消耗，结果`[hg,as]`附加到`results[]`

在最坏的情况下，这个算法应该在 O(n^2) 时间内运行，n 是字符串的长度。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-19T20:32:31.047

这不是正则表达式的工作，您需要更像状态机的东西。

您需要解析弹出所有已知符号的字符串，如果没有则停止，然后继续。如果整个字符串在一个分支上被消耗掉，你就发现了一种可能性。

在 PHP 中，类似：

```
<?php
    $Elements = array('h','he','li','s','ga','hg','as',
         // "...and there may be many others, but they haven't been discovered".
    );

    function check($string, $found = array(), $path = '')
    {
        GLOBAL $Elements, $calls;
        $calls++;
        if ('' == $string)
        {
            if (!empty($path))
                $found[] = $path;
            return $found;
        }
        $es = array_unique(array(
                  substr($string, 0, 1), // Element of 1 letter ("H")
                  substr($string, 0, 2), // Element of 2 letter ("He")
        ));
        foreach($es as $e)
            if (in_array($e, $Elements))
                    $found  = check(substr($string, strlen($e)), $found, $path.$e.',');
        return $found;
    }

    print_r(check('hgas'));
    print "in $calls calls.\n";
?> 
```

# python - 如何在 Javascript 链接后面下载和存储 .txt 文件

> ID：12501510
> 
> 赞同：0
> 
> 时间：2012-09-19T19:24:36.043
> 
> 标签：python, screen-scraping, web-scraping

我正在尝试在此处下载 .txt 文件：http: [//www.namejet.com/Pages/Downloads.aspx](http://www.namejet.com/Pages/Downloads.aspx)

但是下载链接是我以前从未见过的格式...

```
<a id="ctl00_ContentPlaceHolder1_hlPreRelease0" class="sIcoTxt" rel="nofollow" href="javascript:__doPostBack('ctl00$ContentPlaceHolder1$hlPreRelease0','')">Wednesday, September 19, 2012</a> 
```

我不知道从哪里开始，我需要一个脚本来访问下载页面并下载并存储此链接后面的文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T19:28:56.927

此处的链接是对 javascript 函数的调用`__doPostBack`。

自动处理此问题的唯一方法是下载脚本并`__doPostBack`在具有适当环境的 JS 解释器中运行该函数。最简单的方法是在浏览器环境中编写脚本——例如，使用 Greasemonkey。

但是，您可以通过下载和阅读脚本来半自动地处理这个问题，弄清楚是做什么`__doPostBack`的，看看您是否可以使用您拥有的信息在 Python 中实现相同的逻辑，这样您就可以转换`javascript:__doPostBack('ctl00$ContentPlaceHolder1$hlPreRelease0','')`为您可以实际下载的 URL。

举一个非常简单的例子，假设你发现了这个：

```
function __doPostBack(name, callback) {
  var url = 'http://' + window.location.hostname + '/postbacks/' + name + ".xml";
  var xhr = new XMLHttpRequest();
  xhr.open("POST", url, false);
  xhr.send();
  var xml = xhr.responseXML;
  if (callback) callback(xml);
} 
```

所以，你会做这样的事情：

```
r = re.compile(r"javascript:__doPostBack\('(.*?)','')") 
```

现在，当您获得与此正则表达式匹配的 href 时，您可以执行以下操作：

```
nexturl = 'http://' + urlparse.urlparse(lasturl).netloc + '/postbacks/' + m.groups(1) + '.xml'
u = urllib2.urlopen(nexturl, '')
xml = u.read() 
```

如果 JS 非常复杂且难以理解，则使用浏览器的 Web 开发工具查看单击链接时下载的 URL，然后对转换进行逆向工程可能会更简单。（当然，如果你只是抓取几个文件，你也可以从同一个地方在缓存中找到它们，然后你就完成了。）

# android - 从 android 应用程序中的数据库中读取数据

> ID：12501511
> 
> 赞同：0
> 
> 时间：2012-09-19T19:24:39.460
> 
> 标签：android, database, sqlite, android-intent

这是我从数据库中读取数据的代码。在这里，我只是接收值并使用“Toast”类打印它们。

```
public void OnClickLogin(View btnLogin)
{
    String email,password;
    String[] cols = new String[] {DataBase_Server.EMAIL, DataBase_Server.PASS};
    EditText edtPassword = (EditText) findViewById(R.id.edtPassword);
    EditText edtLoginId = (EditText) findViewById(R.id.btnLogin);
    DataBase_Server database=new DataBase_Server(login.this);
    SQLiteDatabase db=database.getReadableDatabase();
    Cursor c=db.query(DataBase_Server.TABLE, null, null, null, null, null, null);
    //startManagingCursor(c);
    c.moveToFirst();
    email=c.getString(c.getColumnIndex(DataBase_Server.EMAIL));
    password=c.getString(c.getColumnIndex(DataBase_Server.PASS));
    Toast.makeText(this,email+" hello "+password, Toast.LENGTH_SHORT).show();
} 
```

代码中没有语法错误，但是当我运行我的应用程序并单击我的登录按钮时，我得到一个强制关闭对话框，最终退出我的应用程序，并且在“logcat”中我看到一些异常，如“无法打开堆栈文件......访问被拒绝”等等等等。

日志猫：

09-20 00:44:06.755：E/AndroidRuntime(244)：未捕获的处理程序：线程主因未捕获的异常而退出 09-20 00:44:06.775：E/AndroidRuntime(244)：java.lang.IllegalStateException：不能在活动 09-20 00:44:06.805 中找到方法 onClickLogin(View): E/dalvikvm(244): Unable to open stack trace file '/data/anr/traces.txt': Permission denied

日志猫

仍然出现更多错误：logcat：

09-20 00:44:06.755：E/AndroidRuntime(244)：未捕获的处理程序：线程主因未捕获的异常而退出 09-20 00:44:06.775：E/AndroidRuntime(244)：java.lang.IllegalStateException：不能在活动 09-20 00:44:06.805 中找到方法 onClickLogin(View)：E/dalvikvm(244)：无法打开堆栈跟踪文件 '/data/anr/traces.txt'：权限被拒绝 09-20 01： 22：04.535：E/AndroidRuntime（352）：未捕获的处理程序：线程主因未捕获的异常而退出 09-20 01：22：04.555：E/AndroidRuntime（352）：java.lang.IllegalStateException：无法执行活动的方法09-20 01:22:04.555: E/AndroidRuntime(352): 在 android.view.View$1.onClick(View.java:2031) 09-20 01:22:04.585: E/dalvikvm(352): 无法打开堆栈跟踪文件'/data/anr/traces.txt'：权限被拒绝

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-19T19:39:40.623

你的方法被称为

`OnClickLogin`

但在您的 XML 布局文件中，您已将其声明为：

`android:onClick="onClickLogin"`

大写 O 错误。只需在您的课程中重命名您的方法：

`public void onClickLogin(View btnLogin)`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T19:40:41.640

检查拼写，我假设您在 xml 中指定了单击处理程序，我个人认为这很容易出错。错误是该方法是拼写的`OnClickLogin`，而您在 xml 中指定`onClickLogin`（注意小写的“o”）。我个人更喜欢不在 XML 中指定 clickhandler，而是通过代码指定它，例如

```
Button btn = (Button) findViewById(R.id.mybutton);
btn.setOnClickHandler(...). 
```

# ios - xcode 控制台中的 GKSConnSettings 消息

> ID：12501514
> 
> 赞同：8
> 
> 时间：2012-09-19T19:24:49.400
> 
> 标签：ios, xcode

在我的应用程序中突然收到此消息 -

```
 <Info>: 22:20:44.800330 com.apple.AVConference: GKSConnSettings: set server: {

        "gk-cdx" = "17.173.254.218:4398";
        "gk-commnat-cohort" = "17.173.254.220:16386";
        "gk-commnat-main0" = "17.173.254.219:16384";
        "gk-commnat-main1" = "17.173.254.219:16385";
     } 
```

它来自哪里？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-29T19:34:47.060

在 iOS 6.0 + 中，一旦你的 localPlayer 被认证，这个日志就会显示出来，即设置

```
[GKLocalPlayer localPlayer].authenticateHandler = ^(UIViewController *viewController, NSError *error) {
        if (viewController != NULL) {
            // present the viewController now
        } else if ([GKLocalPlayer localPlayer].isAuthenticated) {
            NSLog(@"Already authenticated");
        } else {
            NSLog(@"Not authenticated, disable GameCenter");
        }
    }; 
```

如有必要，请出示 viewController 以登录 GameCenter

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T16:34:13.753

我的第一直觉告诉我这可能与您的环境有关。您是否偶然在虚拟机上工作？这恰好是我的情况。

# unix - 用于按列和标记最高版本识别重复项的 awk 脚本

> ID：12501517
> 
> 赞同：1
> 
> 时间：2012-09-19T19:25:01.117
> 
> 标签：unix, sorting, duplicates

查找 UNIX 脚本命令（如 awk、sed 或 sort）以查看此列表根据第 1、第 2 和第 3 列确定重复项，然后使用第 4 列确定哪个是最高版本。然后在最后一列标记它。

已经使用以下命令完成了我所有的排序和重复删除：

```
cat orig.txt |sort -t\| -k3 |uniq -u -d > list.uni 
sort -t'|' -k 1,3 -k 4,4n list.uni > list.txt 
```

我们将调用 list.txt 的零件名称示例列表

```
cat list.txt

M86-STD|LIB DRAWING|0186-528013|2| | 
M86-STD|LIB DRAWING|0186-528013|3|B| 
M86-STD|LIB DRAWING|0186-528013|4|C| 
M86-STD|LIB DRAWING|0186-528013|5|D| 
M86_STD|LIB ASSEMBLY|0186-528013|3| | 
M86_STD|LIB ASSEMBLY|0186-528013|4|B| 
M86_STD|LIB ASSEMBLY|0186-528013|5|D| 
```

结果将如下所示：

```
M86-STD|LIB DRAWING|0186-528013|2| | 
M86-STD|LIB DRAWING|0186-528013|3|B| 
M86-STD|LIB DRAWING|0186-528013|4|C| 
M86-STD|LIB DRAWING|0186-528013|5|D|Highestver
M86_STD|LIB ASSEMBLY|0186-528013|3| | 
M86_STD|LIB ASSEMBLY|0186-528013|4|B| 
M86_STD|LIB ASSEMBLY|0186-528013|5|D|Highestver 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T13:49:52.657

```
awk -F'|' -e '{b=$1"|"$2"|"$3;h="highest version";if(a==b)h="";a=b;print $0 h}' 
```

这个想法是`b`包含标识当前行序列的三列。`a`具有上一行的对应值。如果两者不同，则这是一组的第一行，因此是最高版本。

# image - 高分辨率屏幕的网页设计。浏览器真的会忽略图像 PPI 吗？

> ID：12501528
> 
> 赞同：2
> 
> 时间：2012-09-19T19:25:52.023
> 
> 标签：image, web, high-resolution

在配备 Retina 显示屏 (220 PPI) 的新款 MacBook Pro 上，我的图像看起来非常模糊。将图像的分辨率提高到 220 PPI 似乎不起作用，好像浏览器完全忽略了图像的 PPI。阅读[this](http://www.webmonkey.com/2012/06/make-sure-your-site-looks-good-on-the-new-retina-macbook-pro/)和[this](https://stackoverflow.com/questions/9673234/what-is-the-proper-way-to-handle-hi-res-web-images-for-hi-res-displays-mainly-i)后，似乎没有简单的解决方法。但是，我无法让自己相信没有干净的解决方案，所以我再次提出这个问题，希望有人知道比为每个图像创建双倍大小的副本并使用媒体查询图像更好的解决方法选择（或使用 SVG，这对于我当前的应用程序是不可能的）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T19:32:12.507

浏览器不关心 DPI 或 PPI（与 afaik 同义）。他们通常使用 96。

请参阅[此处](http://www.wfu.edu/~matthews/misc/ppi/ppi.html)以及[我链接的问题](https://stackoverflow.com/questions/3803644/does-image-dpi-matter-to-web-browsers)。

# objective-c - 如何从iOS中的块中获取变量

> ID：12501529
> 
> 赞同：1
> 
> 时间：2012-09-19T19:25:58.473
> 
> 标签：objective-c, ios, objective-c-blocks

我有以下代码：

```
__block NSDictionary *results;

if (username.length != 0 && password.length != 0) {
    NSMutableDictionary* params =[NSMutableDictionary dictionaryWithObjectsAndKeys:
                                  @"login", @"command",
                                  username, @"username",
                                  password, @"password",
                                  nil];

    [[API sharedInstance] commandWithParams:params onCompletion:^(NSDictionary *json) {
        for (id key in json) {

            NSLog(@"key: %@, value: %@", key, [json objectForKey:key]);
        }

        results = json;
    }];
}
for (id key in results) {

    NSLog(@"key: %@, value: %@", key, [results objectForKey:key]);

} 
```

这是我正在尝试使用的教程中的一些代码来解决一些问题。在本教程中，在“完成时”部分完成了很多代码，我想让它返回 NSDictionary，这样调用代码就可以自己处理结果。

我遇到的问题是没有设置结果。第一个 NSLog for 循环打印输出，但第二个不打印。我错过了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T19:30:59.573

您缺少对异步操作的理解。在您启动的操作完成之前，不会调用完成块。但是，NSLog 语句在消息发送到`[API sharedInstance]`-之后立即执行，`results`然后为 nil。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T19:33:55.127

通常，完成处理程序表示异步请求。在这种情况下，`commandWithParams:onCompletion:`方法中的代码在执行之后的代码时还没有运行。

因此，您正在查看结果对象，但完成处理程序尚未运行以设置其值，因此它仍然为 nil。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-19T19:30:47.520

问题很可能是您的`commandWithParams:onCompletion:`方法是异步的。也就是说，它被分派到另一个线程上。

我假设这是一个网络调用，因为它看起来像这样，但这适用于任何异步方法。基本上它是在后台下载你的数据，这样你就不会冻结应用程序。

那么这对您的代码意味着什么？好吧，您创建了一个指向 NSDictionary 的未初始化指针。然后您要求您的 API 类的共享实例为您分派网络请求。然后在请求发送后*立即*执行，很可能在网络请求/长时间运行的进程完成之前，执行下一行代码，这恰好是您的 for 循环。

# actionscript-3 - 缺少 AS3 的 ScrollPane 功能

> ID：12501534
> 
> 赞同：1
> 
> 时间：2012-09-19T19:26:25.493
> 
> 标签：actionscript-3

我最近发现我的 ScrollPane 类代码提示完全丢失了。尽管如此，一些基本功能，如 setStyle 和 source 可以在项目列表中找到，并且仍然有效。当尝试使用horizo​​ntalScrollPolicy 等函数自定义ScrollPane 时，问题就开始了，此时编译器会返回错误，例如“调用可能未定义的方法”。帮助>_<

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T14:31:07.940

一段时间后我想通了。似乎在各种来源中使用的代码片段不起作用。相反，我使用`myScrollPane.horizontalScrollPolicy = "on";`

# mongodb - Mongo 导入的 GridFS 问题

> ID：12501536
> 
> 赞同：0
> 
> 时间：2012-09-19T19:26:31.370
> 
> 标签：mongodb, gridfs

我有一台运行 Mongo 2.0.7 的生产服务器和一台运行 Mongo 2.0.6 的本地机器。

我将数据库导出为 JS 文件，然后将其导入本地计算机。一切似乎都运行良好，但是我无法提供 GridFS 文件。那是当我尝试访问该资源时，我得到损坏的数据，因此没有图像。有什么想法吗？我尝试查看版本更改的更改日志，但没有看到任何可能影响的内容？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T21:15:18.667

我猜您使用 mongoexport 来生成 JSON 转储。mongoexport 不提供与 mongodump 相同的数据保真度，因此请尝试使用它。

# apache-pig - 如何将带有空格的命令行参数传递给 apache pig 脚本？

> ID：12501537
> 
> 赞同：3
> 
> 时间：2012-09-19T19:26:29.910
> 
> 标签：apache-pig

我想编写一个将过滤条件作为命令行参数的猪脚本。从命令行我想输入如下内容：

```
pig -p "MY_FILTER=field1 == 0 and field2 == 5" myscript.pig 
```

在我的脚本中，我有一行：

```
my_filtered_data = filter my_data by $MY_FILTER; 
```

`MY_FILTER`当没有空格*并且*我在值周围传递引号时，这可以按预期工作；因此，如果我`MY_FILTER=\"field1==0\"`在命令行键入，shell 将传递带有值的引号，而 pig 会执行我想要的扩展。但是，如果我提供它，参数将无法扩展`MY_FILTER=\"field1 == 0\"`

我尝试了许多不同的引用技术，甚至尝试直接从 python 的 subprocess 模块运行命令，以确保我的 shell 没有做一些奇怪的事情。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T16:00:36.560

你用的是哪个版本的猪？我使用 0.9.2，以下命令适用于我：

```
 pig -p "F='field1 == 3 AND field2 == 5'" test.pig 
```

但它不适用于 0.8.1。

# z3 - 在 C/C++ 中遍历 Z3_ast 树

> ID：12501540
> 
> 赞同：10
> 
> 时间：2012-09-19T19:26:57.140
> 
> 标签：z3

简而言之，我需要能够遍历 Z3_ast 树并访问与其节点关联的数据。似乎找不到有关如何执行此操作的任何文档/示例。任何指针都会有所帮助。

最后，我需要将 smt2lib 类型的公式解析为 Z3，对常量替换进行一些变量，然后在与另一个不相关的 SMT sovler 兼容的数据结构中重现公式（具体来说，mistral，我不认为有关 mistra 的详细信息对这个问题很重要，但有趣的是它没有命令行界面，我可以在其中输入文本公式。它只有一个 C API）。我认为要生成 misral 格式的公式，我需要遍历 Z3_ast 树并以所需格式重建公式。我似乎找不到任何说明如何执行此操作的文档/示例。任何指针都会有所帮助。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-19T20:02:41.307

考虑使用定义在`z3++.h`. Z3 发行版还包括一个使用这些类的示例。这是一个遍历 Z3 表达式的小代码片段。如果您的公式不包含量词，那么您甚至不需要处理`is_quantifier()`and`is_var()`分支。

```
void visit(expr const & e) {
    if (e.is_app()) {
        unsigned num = e.num_args();
        for (unsigned i = 0; i < num; i++) {
            visit(e.arg(i));
        }
        // do something
        // Example: print the visited expression
        func_decl f = e.decl();
        std::cout << "application of " << f.name() << ": " << e << "\n";
    }
    else if (e.is_quantifier()) {
        visit(e.body());
        // do something
    }
    else { 
        assert(e.is_var());
        // do something
    }
}

void tst_visit() {
    std::cout << "visit example\n";
    context c;

    expr x = c.int_const("x");
    expr y = c.int_const("y");
    expr z = c.int_const("z");
    expr f = x*x - y*y >= 0;

    visit(f);
} 
```

# uitextview - UITextView 撤消管理器不适用于替换属性字符串（iOS 6）

> ID：12501541
> 
> 赞同：4
> 
> 时间：2012-09-19T19:26:59.433
> 
> 标签：uitextview, ios6, nsundomanager

iOS 6 已更新为使用 UITextView 进行富文本编辑（UITextView 现在获得了属性文本属性——这是愚蠢的不可变的——）。这是在 NDA 下在 iOS 6 Apple 论坛上提出的一个问题，由于 iOS 6 现已公开，因此可以公开...

在 UITextView 中，我可以撤消任何字体更改，但不能撤消视图属性字符串副本中的替换。使用此代码时...

```
- (void) replace: (NSAttributedString*) old with: (NSAttributedString*) new

{
1\.    [[myView.undoManager prepareWithInvocationTarget:self] replace:new with:old];
2\.    old=new;

} 
```

...撤消效果很好。

但是，如果我添加一行以使结果在我的视图中可见，则 undoManager 不会触发“replace:with:”方法，因为它应该......

```
- (void) replace: (NSAttributedString*) old with: (NSAttributedString*) new

{
1\.    [[myView.undoManager prepareWithInvocationTarget:self] replace:new with:old];
2\.    old=new;
3\.    myView.attributedText=[[NSAttributedString alloc] initWithAttributedString:old];

} 
```

任何想法？对于我尝试在“2”行使用的 MutableAttributedString 的任何替换方法，无论是否使用范围，我都有同样的问题......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-06-17T13:10:27.997

嗯，哇，我真的没想到这会奏效！我找不到解决方案，所以我开始尝试任何事情......

```
- (void)applyAttributesToSelection:(NSDictionary*)attributes {
    UITextView *textView = self.contentCell.textView;

    NSRange selectedRange = textView.selectedRange;
    UITextRange *selectedTextRange = textView.selectedTextRange;
    NSAttributedString *selectedText = [textView.textStorage attributedSubstringFromRange:selectedRange];

    [textView.undoManager beginUndoGrouping];
    [textView replaceRange:selectedTextRange withText:selectedText.string];
    [textView.textStorage addAttributes:attributes range:selectedRange];
    [textView.undoManager endUndoGrouping];

    [textView setTypingAttributes:attributes];
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2021-09-06T11:58:40.333

**Mac 催化剂 (iOS14)**

`UITextView`可以`undoManager`免费管理撤消和重做，无需任何额外代码。

但是替换它`attributedText`会重置`undoManager`（更新文本及其属性`textStorage`对我也不起作用）。我发现在格式化文本而不替换`attributedText`但通过标准编辑操作（右键单击突出显示文本>字体>粗体（Mac Catalyst））时，撤消和重做将正常工作。

所以要解决这个问题：

1.  您需要将`allowsEditingTextAttributes`of设置`UITextView`为`true`，这将使 UITextView 支持 undo 和 redo `attributedText`。

```
self.textView.allowsEditingTextAttributes = true 
```

2.  如果您想更改符合的、`attributedText`的`replace(_:withText:)`、或`UITextInput`的`insertText(_:)`文本。`deleteBackward()``UIKeyInput``UITextView`

```
self.textView.replace(self.textView.selectedTextRange!, withText: "test") 
```

3.  如果要更改文本的属性，请改用`updateTextAttributes(conversionHandler:)`of `UITextView`。

```
self.textView.updateTextAttributes { _ in

    let font = UIFont.boldSystemFont(ofSize: 17)
    let attributes: [NSAttributedString.Key: Any] = [
        .font: font,
    ]

    return attributes
} 
```

要更改特定范围内的文本及其属性，请修改`selectedRange`.`UITextView`

要实现撤消和重做按钮，请查看以下答案：[https ://stackoverflow.com/a/50530040/8637708](https://stackoverflow.com/a/50530040/8637708)

我已经用 Mac Catalyst 进行了测试，它应该也可以在 iOS 和 iPadOS 上运行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-17T12:56:17.110

撤消管理器在设置其“文本”或“属性文本”属性后被重置，这就是它不起作用的原因。我不知道这种行为是错误还是设计使然。

但是，您可以改用 UITextInput 协议方法。

*   (void)replaceRange:(UITextRange *)range withText:(NSString *)text

这行得通。

# ms-access-2007 - 如何让 MS Access 2007 计算行百分比？

> ID：12501544
> 
> 赞同：-1
> 
> 时间：2012-09-19T19:27:00.067
> 
> 标签：ms-access-2007

如何在 MS Access 2007 中编写查询，同时显示指定字段中每一行的表中总记录的计数和百分比？

例如，如果我的表有一个名为“性别”的字段，我应该编写什么查询来查看男性的行数和百分比以及女性的行数和百分比？

因此，如果表有 1000 条记录，结果将类似于：

```
Men.....600.....60%
Women...400.....40% 
```

我可以很容易地编写一个只给我行数的查询，但我不知道如何也能看到百分比。

我应该提到我不知道 SQL。我在创建查询时使用设计视图。但是，如果您可以将 SQL 中的查询文本提供给我，我可以将其复制并粘贴到新查询中，然后保存。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T10:11:38.937

它不是 SQL 本身的一部分，但您可以在查询中使用 VBA 函数来计算表中的记录数量：DCount ( [MSDN](http://office.microsoft.com/en-us/access-help/dcount-function-HA001228817.aspx) )。

在查询设计器中复制并粘贴以下行（顶行，每列一行）：

```
 TotalMen: DCount("*";"[TableNameHere]";"[Gender]='Male'")
    TotalWomen: DCount("*";"[TableNameHere]";"[Gender]='Female'") 
```

然后，您可以通过对返回值执行一些简单的数学运算来获得百分比（同样每列一行）：

```
 TotalPersons: [TotalMen]+[TotalWomen]
    PercentageMen: [TotalMen]/[TotalPersons]
    PercentageWomen: [TotalWomen]/[TotalPersons] 
```

不要忘记将格式设置为百分比，否则值将显示为 0,6 和 0,4 而不是 60% 和 40%。

顺便说一句，可能有更简洁的方法来做到这一点。我试图让它可读。

PS：不要忘记替换表和字段的名称。

# iphone - 不兼容的指针类型将类发送到 id 类型为 fbsessiondelegate 的参数

> ID：12501550
> 
> 赞同：2
> 
> 时间：2012-09-19T19:27:27.220
> 
> 标签：iphone, ios, facebook, sharekit

在我的项目中添加了 Sharekit 组，并获得了如此多的编译警告。

在这种情况下，它是一个静态实例，并且在静态方法中传递 self 参数是不正确的，因为在静态方法中没有此对象的特定实例。我该如何解决这个问题。

```
 + (void)logout
{
FBSession *fbSession; 

if(!SHKFacebookUseSessionProxy){
    fbSession = [FBSession sessionForApplication:SHKFacebookKey
                                             secret:SHKFacebookSecret
                                           delegate:self];

}else {
    fbSession = [FBSession sessionForApplication:SHKFacebookKey
                                    getSessionProxy:SHKFacebookSessionProxyURL
                                          delegate:self];
                  //delegate:[self sharedSomeProtocolDelegate]];
}

[fbSession logout];
} 
```

请任何人。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T19:41:22.177

做一个符合 FBSessionDelegate 协议的 SocialManager 对象。实例化它并在代码中给出而不是 self 参数。例如：

社会管理器.h：

```
 @interface SocialManager : NSObject <FBSessionDelegate>
- (id) init;
/**
 * Called when the user successfully logged in.
 */
- (void)fbDidLogin;

/**
 * Called when the user dismissed the dialog without logging in.
 */
- (void)fbDidNotLogin:(BOOL)cancelled;

/**
 * Called when the user logged out.
 */
- (void)fbDidLogout;
@end 
```

社会管理器.m：

```
-(id) init
{
  self = [super init];
  return self;
}
- (void)fbDidLogin;
{
}
- (void)fbDidNotLogin:(BOOL)cancelled;
{
}
- (void)fbDidLogout
{
} 
```

并在您的代码中：

```
 + (void)logout
{
FBSession *fbSession;
SocialManager* socialManager = [[SocialManager alloc] init];

if(!SHKFacebookUseSessionProxy){
    fbSession = [FBSession sessionForApplication:SHKFacebookKey
                                             secret:SHKFacebookSecret
                                           delegate:socialManager];

}else {
    fbSession = [FBSession sessionForApplication:SHKFacebookKey
                                    getSessionProxy:SHKFacebookSessionProxyURL
                                          delegate:socialManager];
                  //delegate:[self sharedSomeProtocolDelegate]];
}

[fbSession logout];
} 
```

这是一个简单的示例，但您必须在代码中实现自己的委托。只需将协议中的对象（可能是 viewController）添加到您的对象中，并将该对象设置为 FBsession 的委托。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-19T14:05:01.530

使用静态类时，您可以在这种情况下手动获取警告：

```
...
delegate:(id<FBSessionDelegate>)self]; 
```

# jquery - 屏蔽文本输入

> ID：12501558
> 
> 赞同：0
> 
> 时间：2012-09-19T19:28:19.937
> 
> 标签：jquery

我有一个文本输入框，无论用户输入什么，都需要用“X”屏蔽输入。有什么方法可以使用 jQuery 来实现。我们在我们的应用程序中使用 struts2。谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-19T19:30:12.197

用于`type=password`屏蔽用户键入的输入。

```
<input type="password" .../> 
```

我认为在struts 2中你有一个标签。

```
<s:password .. /> 
```

**[密码字段： http](http://struts.apache.org/2.1.8/docs/password.html) **://struts.apache.org/2.1.8/docs/password.html****

# cakephp - 如何在 CakePHP 上测试 HTML 电子邮件模板？

> ID：12501561
> 
> 赞同：6
> 
> 时间：2012-09-19T19:28:39.043
> 
> 标签：cakephp

为了确认购买，我必须向客户发送一封电子邮件，其中包含她的购物车详细信息。我想测试 HTML 模板以使用适当的 CSS，当然还要检查到达它的数据。我应该使用什么代码而不是设置电子邮件参数来观察模板将如何呈现在电子邮件上？

我是 CakePHP 的新手，非常感谢您的帮助。

提前致谢。

~何塞

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-20T19:52:11.680

这是 CakePHP 1.3，但我感觉它也可以与 2.0 一起使用。虽然可能有其他方法可以做到这一点，但我通过在任何控制器中创建一个测试操作，然后返回电子邮件模板的渲染调用来做到这一点。看一下这个：

```
function email_test()
{
    $this->layout = 'email/html/default';
    $user = $this->User->findById(1);
    $this->set('name', $user['User']['firstname']);
    $this->set('email_heading', 'Welcome to My App');
    return $this->render('/elements/email/html/welcome');
} 
```

此操作现在将在浏览器中呈现您的电子邮件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T19:35:37.930

使用调试传输进行测试。

如果您想让编写自己的传输更舒适，例如在 APP/tmp/email/.html 中创建一个新的 html 文件，请参阅调试传输类作为参考，这样做很容易[http://api20。 cakephp.org/view_source/debug-transport#l-34](http://api20.cakephp.org/view_source/debug-transport#l-34)

另见本书 - > [http://book.cakephp.org/2.0/en/core-utility-libraries/email.html#using-transports](http://book.cakephp.org/2.0/en/core-utility-libraries/email.html#using-transports)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-20T11:54:29.473

```
 $this->Email->to = $user_id_array[0]['User']['email'];
    $this->Email->subject = $arrTemplate[0]['EmailTemplate']['subject'];
    $this->Email->replyTo = 'Admin<admin@indianic.com>';
    $this->Email->from = 'Admin<admin@indianic.com>';
    $this->Email->sendAs = 'html';
    $this->Email->template = '/elements/email/html/warning_message';

   $this->set('email_message',$arrTemplate[0]['EmailTemplate']['body']);
   $this->Email->send(); 
```

这样您就可以为电子邮件设置模板

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-07-26T09:58:59.290

这是我用来在浏览器中显示我想使用 cakephp 电子邮件类发送的电子邮件的 html/纯文本内容的简单方法，即`App::uses('CakeEmail', 'Network/Email');`。只需`exit`在电子邮件模板文件或（电子邮件布局文件）的末尾做一个，然后尝试发送电子邮件。它将呈现电子邮件内容。

HTH。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-03-18T05:54:50.710

如果您想在本地主机上打印您的**电子邮件模板**进行测试，那么您可以使用此代码。

```
$this->Email->send();
print_r($this->Email->htmlMessage); 
```

# ios - CCLabelTTF 支持的字体？

> ID：12501567
> 
> 赞同：3
> 
> 时间：2012-09-19T19:29:25.177
> 
> 标签：ios, xcode, ios5, fonts, cocos2d-iphone

在哪里可以找到 CCLabelTTF 支持的字体列表？如果我尝试将 CCLabel 的字体设置为 Bank Gothic xcode 之类的字体，则表示该字体无法加载。如果您在 xcode 中转到 Edit>Format>Font>Show Fonts，它会为您提供 xcode 中的字体列表，而 Bank Gothic 就是其中之一，那么为什么它不能与 CCLabelTTF 一起使用？

谢谢！

-马格纳斯

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-19T20:03:24.230

包括的字体是：

```
"American Typewriter"
"Arial"
"Arial Rounded MT Bold"
"Courier New"
"Georgia"
"Helvetica"
"Marker Felt"
"Times New Roman"
"Trebuchet MS"
"Verdana"
"Zapfino" 
```

但是你可以很简单地添加字体：[在 Cocos2d 中使用自定义字体](https://stackoverflow.com/questions/4228644/using-custom-fonts-in-cocos2d)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T19:58:41.333

CCLabelTTF 不“支持”任何字体。它只能渲染设备上可用的任何字体的文本。所以，你的 mac 有这种字体，但也许 iOS 设备上没有这种字体。无论如何，您可以将任何字体作为资源添加到应用程序中。只是不要忘记将它添加到 info.plist 的“应用程序提供的字体”部分。

# javascript - 部分页面更新

> ID：12501569
> 
> 赞同：0
> 
> 时间：2012-09-19T19:29:35.473
> 
> 标签：javascript, python, google-app-engine, webapp2

我目前正在使用 webapp2 框架编写一个在 google-app-engine 上运行的 python web 应用程序。由于我不是网络人，我需要一个如何解决以下问题的建议：

假设我有一个非常简单的网络订单系统，您将一些商品放入购物卡并进入结帐表格......在结帐表格上，我需要显示订单的总成本。问题是还有一个组合框，客户可以在其中选择运输方式。每种运输方式都有其单独的运输成本。

问题是如何在不重新加载整个页面的情况下计算和更新总成本（包括所选的运输方式及其运输成本）？使用客户端 Javascript 进行计算似乎对我来说是不合适的解决方案。但是谁在不重新加载整个页面的情况下在服务器端进行计算呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T19:35:28.697

您可以让浏览器请求使用 jQuery 进行部分更新。由于您不是网络人，我认为其他人是。他可能会知道该怎么做。然后，您可以让服务器执行计算并返回 html 片段或 json 格式的结果。

你应该看看`jQuery.load()`方法。

对于 appengine 部分，它看起来像：

```
class CalculateCost(webapp.RequestHandler):
    def get(self):
        shipping_method = self.request.get('shipping_method')
        # calculate your cost here
        self.response.headers['Content-Type'] = 'text/plain'
        self.response.out.write('%d' % cost) 
```

# c# - 在运行时创建属性

> ID：12501570
> 
> 赞同：0
> 
> 时间：2012-09-19T19:29:40.700
> 
> 标签：c#

是否可以在运行时在类型上创建属性？我的类型“Account”有一组预定义的属性，例如“ID”和“Account Name”，它实现了 INotifyPropertyChanged，我想在运行时向这个类型添加属性，所以 getter 和 setter 和 setter 会调用一个方法通知传入它的属性名称，即

```
public string Name
{
     get { return _name; }
     set
     {
          _name = value;
          NotifyPropertyChanged("Name");
     }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T19:31:10.573

是的，但不是“正常”`CLR`类型。您可以实现这一点，实际上该类型是专门为以下功能创建的：[DynamicObject](http://msdn.microsoft.com/en-us/library/system.dynamic.dynamicobject.aspx)

查看提供的实现类的示例代码*，* `DynamicObject`例如

```
public class DynamicDictionary : DynamicObject
{
   ...
} 
```

在你能够像这样使用它之后：

```
dynamic person = new DynamicDictionary();

// Adding new dynamic properties.      
person.FirstName = "Ellen";
person.LastName = "Adams"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T20:30:49.783

您可以使用`Reflection.Emit`动态创建从您的类继承的新类，然后将属性添加到该新类型。由于它继承了您自己的类型，因此可以将其视为该类型的“扩展”。

我必须警告你，这条路很复杂，你可能会写出完成工作后再也看不懂的代码！

**您还将了解 MSIL 代码的工作**原理。这有点奇怪，而且是颠倒的。您必须以与 C# 等语言所期望的完全相反的方式做事。您必须从堆栈中推送和弹出值以作为参数传递给函数，并且您必须主动丢弃函数中未使用的返回值......等等。

是的，我**想让你害怕这个**……这是一种痛苦的方式；）

在落入这个之前考虑其他替代方案。

SO中已经有很多关于这个问题的材料：[https ://stackoverflow.com/questions/tagged/reflection.emit](https://stackoverflow.com/questions/tagged/reflection.emit)

CodeProject 文章解释 Reflection.Emit： [使用 Reflection.Emit 的动态类型](http://www.codeproject.com/Articles/121568/Dynamic-Type-Using-Reflection-Emit)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-19T19:32:26.333

您要么使用动态对象，要么通过扩展方法扩展行为。我不知道其他选择。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-09-19T19:33:10.353

不，这对于 c# 对象是不可能的

你可以像类一样制作字典，它可以存储不同的属性，比如在 DynamicObject 的问题中

你可以做的是通过反射创建新的类类型，它们可以包含新的属性。但是没有简单的方法可以访问这些

# actionscript-3 - Flex 应用程序类和“普通”应用程序之间的安全差异

> ID：12501575
> 
> 赞同：0
> 
> 时间：2012-09-19T19:29:59.623
> 
> 标签：actionscript-3, apache-flex, security, sandbox

我有一段有问题的代码，它使用 Wordnik API 来获取单词定义。此代码在“本地受信任”安全沙箱中运行良好，但不能在线运行 - 它会产生“安全沙箱违规”（但没有解决沙箱违规的常用方法）。

我已经向 Wordnik API 创建者咨询过这个问题，他们没有直接解决我的问题，而是向我指出了一个工作示例。他们的示例确实有效，但它使用了 Flex 类“应用程序”。

在独立的 .as 类中不起作用的相同代码在 Flex 应用程序中使用时起作用。

我的问题是：Flex Application 类和扩展 Sprite 的普通 AS3 类之间有什么区别（尤其是安全性区别）？

我正在使用 Flashdevelop 进行编译。这可能很重要，因为 Wordnik 的人说它在 Flash Builder 中运行良好——尽管他们没有提供细节，我也无法重现它。

如果需要，我可以附上代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T21:51:26.020

所以，我不明白到底发生了什么，但我看到了正在发生的事情——而且似乎它根本与闪存安全性无关。

当您使用 mx 应用程序时，WordnikClient 会发送序列化数据包，这些数据包与非 mx 应用程序的数据包不同：

MX 应用程序：

```
<object type="flex.messaging.messages.CommandMessage"> 
```

应用程序：

```
<object> 
```

并要求：

```
<object type="flex.messaging.messages.HTTPMessage"> 
```

对比

```
<object> 
```

但是当您在本地受信任的沙箱中时，客户端使用 GET 请求，例如：

```
http://api.wordnik.com/v4/word.xml/drama/definitions?limit=1&useCanonical=true&api_key=148404f291e734bbf372b66b13785d85cb962394b22a8384e 
```

服务器返回 xml。

所以，

1) 我可以建议你只使用 GET 请求并解析 XML ;)。至少在这个问题发生时

2) 尝试将此报告发送给支持人员。我认为，问题可能出在序列化过程中。

希望它会有所帮助。问候

# php - SQL 代码在 PHP 中不起作用，但在 phpmyadmin 中起作用

> ID：12501576
> 
> 赞同：0
> 
> 时间：2012-09-19T19:29:59.403
> 
> 标签：php, mysql, phpmyadmin

我有一个可以在表中进行完整查询的数据库。每个用户都有一个会员身份，尽管并非所有这些身份都是真正的会员身份。在此查询中，我必须获取所有具有真实会员身份的用户。我也有一个过滤器，用于过滤用户的工作分配，例如“公关经理”。首先，我检查是否有任何过滤器：

```
if($filter != 0)
{
    $filter = "Assignment NOT LIKE '$filter'";
}
else
{
    $filter = "1";
} 
```

接下来，我搜索所有真实的会员值：

```
$member_ids = "";
while($get = mysql_fetch_array($query))
{
    if($get["IsMember"] == 1)
    {
        $id = $get["ID"];
        if($member_ids == ""){ $member_ids = "'$id'"; } else { $member_ids .= " OR '$id'"; }
    }
} 
```

从这两个生成的参数中，我构建了我的 SQL 查询：

```
$query = mysql_query("SELECT * FROM vilma_contact WHERE Membership LIKE $member_ids AND $filter"); 
```

输出如下所示：

```
SELECT * FROM vilma_contact WHERE Membership LIKE '3' OR '2' AND Assignment NOT LIKE '10' 
```

现在解决问题。它不在 PHP 中运行，但如果我将它复制到 phpmyadmin，它不会显示任何错误并显示正确的行。我从来没有遇到过这样的事情，如果有人可以提供帮助，我将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T19:34:05.007

```
SELECT * 
FROM vilma_contact 
WHERE 
    Membership LIKE '3' OR '2' 
    AND Assignment NOT LIKE '10' 
```

看起来像坏 SQL 它可能应该是

```
SELECT * 
FROM vilma_contact 
WHERE 
    (Membership LIKE '3' OR Membership LIKE '2') AND
    Assignment NOT LIKE '10' 
```

你可能需要使用 = 所以进一步的改变是

```
SELECT * 
FROM vilma_contact 
WHERE 
    (Membership = '3' OR Membership = '2') AND
    Assignment != '10'; 
```

也尝试添加“;” 在最后

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T19:37:02.957

您的 WHERE 子句确实格式错误。通常，当使用`LIKE`one 时，字符串中会包含通配符 (`%`或`_`) 的组合，以实际指示您要匹配的内容。如果你想匹配那些你需要使用 equal 的确切字符串，那么可能是这样的：

```
SELECT *
FROM vilma_contact
WHERE
(Membership = '3' OR Membership = '2') 
AND Assignment <> '10' 
```

如果您真的想匹配子字符串，您的查询可能看起来像

```
SELECT *
FROM vilma_contact
WHERE
(Membership LIKE '%3%' OR Membership LIKE '%2%') 
AND Assignment NOT LIKE '%10%' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-19T19:43:46.390

我不确定您的代码顺序是否正确

`$query = mysql_query("SELECT * FROM vilma_contact WHERE Membership LIKE $member_ids AND $filter");`

是之后

`while($get = mysql_fetch_array($query))`

该错误似乎表明在此之前没有查询。因此，也许您可​​以向我们展示正在传递给`while`?

同样正如我在评论中提到的，您需要修复查询部分`Membership LIKE '3' OR '2'`

# css - 为什么这个网站上的两个 div 之间有很大的差距？

> ID：12501577
> 
> 赞同：0
> 
> 时间：2012-09-19T19:30:01.803
> 
> 标签：css, html

上`http://www.gelcreative.co.uk/ightham/`，为什么我的内容 div 的结尾和我的页脚 div 之间的差距如此之大？没有可见的填充或边距，我无法弄清楚是什么造成了差距。

它位于白色内容区域的末尾和页脚之间。页脚文本应该更接近内容。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T19:34:07.377

您通过使用移动您的#contentWraper

```
position: relative;
top: -69px; 
```

你需要为你的页脚做同样的事情。

如果你使用

```
margin-top: -69px; 
```

相反，您的页脚将自动正确定位。

# jaxb - WSDL 定制：XMLGregorianCalender 到 java.util.Date

> ID：12501581
> 
> 赞同：5
> 
> 时间：2012-09-19T19:30:30.213
> 
> 标签：jaxb, wsimport, jax-ws-customization

我有几个几乎数百个 wsdl 文件。每当我为它们创建客户端 jaxb 客户端类时，Jaxb 会自动将所有日期/时间字段映射到 XMLGregorianCalender。经过大量谷歌搜索，我发现提供单独的绑定文件是唯一的解决方案。

我不想提供 wsdl 位置，因为我有很多，否则我必须为每个 wsdl 创建单独的绑定文件。

下面是我使用的绑定文件。

```
<bindings xmlns="http://java.sun.com/xml/ns/jaxb" version="2.0" >
    <globalBindings>
        <javaType name="java.util.Date" xmlType="xsd:dateTime"  />
    </globalBindings>
</bindings> 
```

它创建了具有 Date 类型的 jaxb 类，但它还自动创建了一个名为 Adapter1.java 的适配器，它被放入了我不想要的地方。我有自己的包结构，不能偏离它。

> org.w3._2001.xmlschema

并且此适配器将日期从 String 转换为 java.util.Date 并且我的应用程序失败，因为转换器应从 XMLGregorianCalender 转换为 java.util.Date

所以，我自己写了一个适配器

```
import java.util.Date;
import java.util.GregorianCalendar;

import javax.xml.bind.annotation.adapters.XmlAdapter;
import javax.xml.datatype.DatatypeFactory;
import javax.xml.datatype.XMLGregorianCalendar;

import java.util.Calendar;
import javax.xml.bind.annotation.adapters.XmlAdapter;

public class DateAdapter extends XmlAdapter<XMLGregorianCalendar, Date> {

    @Override
    public XMLGregorianCalendar marshal(Date date) throws Exception {
        GregorianCalendar gregorianCalendar = new GregorianCalendar();
        gregorianCalendar.setTime(date);
        XMLGregorianCalendar xmlGregorianCalendar = DatatypeFactory.newInstance().newXMLGregorianCalendar(gregorianCalendar);
        return xmlGregorianCalendar;
    }

    @Override
    public Date unmarshal(XMLGregorianCalendar xmlGregorianCalendar) throws Exception {
        return xmlGregorianCalendar.toGregorianCalendar().getTime();
    }

} 
```

并像这样更改了我的自定义文件：

```
<bindings xmlns="http://java.sun.com/xml/ns/jaxb" version="2.0" >
    <globalBindings>
        <javaType name="java.util.Date" xmlType="xsd:dateTime"
        parseMethod="DateAdapter.marshal"
            printMethod="DateAdapter.unmarshal" />
    </globalBindings>
</bindings> 
```

然后我运行了 wsimport 工具，但它失败了。

```
C:\Users\stuart\Desktop\code>wsimport -s src -d gen -b cust.txt http://localhost:8080/webservice-jaxws/DummyService?wsdl

parsing WSDL...

generating code...

compiling code...

C:\Users\stuart\Desktop\code\src\org\w3\_2001\xmlschema\Adapter1.java:13: cannot find symbol
symbol  : variable DateAdapter
location: class org.w3._2001.xmlschema.Adapter1
        return (DateAdapter.marshal(value));
                ^
C:\Users\stuart\Desktop\code\src\org\w3\_2001\xmlschema\Adapter1.java:17: cannot find symbol
symbol  : variable DateAdapter
location: class org.w3._2001.xmlschema.Adapter1
        return (DateAdapter.unmarshal(value));
                ^
2 errors
compilation failed, errors should have been reported 
```

我将自定义设置保存在 wsimport 命令中给出的 cust.txt 中，并且我的 DateAdapter 类源文件也在同一目录中。该课程没有包装。以下是我的目录结构。

```
³   cust.txt
³   DateAdapter.java
³   
ÃÄÄÄgen
³   ÃÄÄÄorg
³   ³   ÀÄÄÄw3
³   ³       ÀÄÄÄ_2001
³   ³           ÀÄÄÄxmlschema
³   ³                   Adapter1.class
³   ³                   
³   ÀÄÄÄwebservice
³       ÀÄÄÄjaxws
³           ÀÄÄÄgenerated
³                   GetBook.class
³                   GetBookResponse.class
³                   ObjectFactory.class
³                   package-info.class
³                   Book.class
³                   BookService.class
³                   BookServiceImpl.class
³                   ReturnBook.class
³                   ReturnBookResponse.class
³                   
ÀÄÄÄsrc
    ÃÄÄÄorg
    ³   ÀÄÄÄw3
    ³       ÀÄÄÄ_2001
    ³           ÀÄÄÄxmlschema
    ³                   Adapter1.java
    ³                   
    ÀÄÄÄwebservice
        ÀÄÄÄjaxws
            ÀÄÄÄgenerated
                    GetBook.java
                    GetBookResponse.java
                    ObjectFactory.java
                    package-info.java
                    Book.java
                    BookService.java
                    BookServiceImpl.java
                    ReturnBook.java
                    ReturnBookResponse.java 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-09-01T20:53:50.743

通过使用您所做的相同绑定声明解决了这个问题，除了我的 DateAdapter 实际上看起来像这样：

```
public class DateAdapter {

    private DateAdapter() {}

    public static String marshal(Date date) {
        Calendar cal = GregorianCalendar.getInstance();
        cal.setTime(date);
        return DatatypeConverter.printDateTime(cal);
    }

    public static Date unmarshal(String xmlDate) {
        return DatatypeConverter.parseDate(xmlDate).getTime();
    }
} 
```

它就像一个魅力。XML 方面我有 dateTime，java 方面我有 java.util.Date。我实际上制作了另一个使用 java.time.Instant 而不是 Date，我发现它更易于使用。

# linq - 将 LinQ 与标准对象一起使用的最佳实践

> ID：12501586
> 
> 赞同：0
> 
> 时间：2012-09-19T19:30:57.783
> 
> 标签：linq, object, criteria

我们刚刚从 ADO.Net 迁移到 Entity Framework。我有一个包含许多字段的 SearchCriteria 对象。因为它有很多字段，所以它有很多where子句的可能性。使用 LinQ 和 EntityFramework 执行此操作的最佳实践是什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T15:16:39.907

我想到了。我们需要使用 IQueryable 并继续添加 where 子句以最终获取数据。

# drupal-6 - Drupal 从节点中删除节点引用

> ID：12501588
> 
> 赞同：0
> 
> 时间：2012-09-19T19:31:05.833
> 
> 标签：drupal-6, cck

好的，尝试处理一个脚本，包括 PHP 和 JavaScript，我将在其中将特定内容类型的节点从一个引用移动到另一个引用。这是结构：

我有一个项目
，每个项目
里面都有页面，每个页面里面都有标注
，每个标注里面都是产品。

我想做的是将产品从一个 CALLOUT 带到另一个 CALLOUT。我可以合并这些，但现在我想做的是删除第一个实例。一个例子：

我有`AAG-794200`第 6 页标注 A 上的产品。我正在将该产品与第 6 页标注 B 合并。

我可以合并产品，但现在我需要从 CALLOUT A 中删除它。这是我的代码：

```
$merge = explode(',', $merge); //Merge SKUs
$mpages = explode(',', $mpages); //Merge Pages
$mcallouts = explode(',', $mcallouts); //Merge Callouts
$mcallout_nid = explode(',', $mcallout_nid);  //Merge Current callout

$length = count($merge);
$e = 0;
while ($e < $length) {
    //Where is the SKU going to?
    $to_callout_letter = strtoupper($mcallouts[$e]);
    $to_page_num = $mpages[$e];
    $sku = $merge[$e];
    $from_callout = $mcallout_nid[$e];

    //Where is the SKU coming from?     
    $other_callout = node_load($from_callout);

    //Need page ID of current callout for project purposes
    $page_nid = $other_callout->field_page[0]['nid'];
    $page = node_load($page_nid);
    //Need the project NID
    $project_nid = $page->field_project[0]['nid'];

    //We need to get the NID of the page we are going to
    $page_nid = db_query('SELECT * FROM content_type_page WHERE field_page_order_value = "%d" and field_project_nid = "%d" ORDER BY vid DESC LIMIT 1', $to_page_num, $project_nid);

    $page_nid_res = db_fetch_array($page_nid);
    $to_page_nid = $page_nid_res['nid'];

    //We need to get the NID of the callout here
    $co_nid = db_query('SELECT * FROM content_type_callout WHERE field_identifier_value = "%s" and field_page_nid = "%d"', $to_callout_letter, $to_page_nid);
    $co_nid_res = db_fetch_array($co_nid);
    $to_callout_letter_nid = $co_nid_res['nid'];

    //Load the present callout the SKU resides on
    $f_callout = node_load($from_callout);

    $callout = node_load($to_callout_letter_nid);
    $long = count($f_callout->field_skus);
    $deletecallout = array();
    foreach($f_callout->field_skus as $skus) {
        $s = 0;
        while ($s < $long) {
            if($skus['nid'] == $sku) {
                $callout->field_skus[] = $skus;
                $s++;
            }
            else {
                $deletecallout[] = $skus;
                $s++;
            }
        }
    }

    foreach($other_callout->field_images as $old_image) {
        $callout->field_images[] = $old_image;
    }
    foreach($other_callout->field_line_art as $old_image) {
        $callout->field_line_art[] = $old_image;
    }
    foreach($other_callout->field_swatches as $old_image) {
        $callout->field_swatches[] = $old_image;
    }

    $callout->field_copy_text[0]['value'] .= $other_callout->field_copy_text[0]['value'];
    $callout->field_notes[0]['value'] .= $other_callout->field_notes[0]['value'];
    $callout->field_image_notes[0]['value'] .= $other_callout->field_image_notes[0]['value'];
    $callout->field_status[0]['value'] = 'In Process';
    node_save($callout); 
```

这会导致 PRODUCTS 合并，但不会删除原始文件。

谢谢你的帮助。我知道这很简单，这将是一个面对面的时刻。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T12:41:50.387

我实际上能够自己解决这个问题。`node_save(callout);` @Chris -在我复制和粘贴时我一定错过了之后，括号结束了。但是，这是我最终使用的代码：

```
$merge = explode(',', $merge); //Merge SKUs
$mpages = explode(',', $mpages); //Merge Pages
$mcallouts = explode(',', $mcallouts); //Merge Callouts
$mcallout_nid = explode(',', $mcallout_nid);  //Merge Current callout
if($merge[0] !== '0') {
    //Store NIDs of Old Callouts to the proper SKU
    $oc_sku = array();
    $oc_sku_e = count($merge);
    $oc_sku_ee = 0;
    while ($oc_sku_ee < $oc_sku_e) {
        $curr_sku = $merge[$oc_sku_ee];
        $curr_oldco = $mcallout_nid[$oc_sku_ee];
        $oc_sku[$curr_sku] = $curr_oldco;
        $oc_sku_ee++;
    }

    //Convert page numbers to page_nids
    $pc = count($mpages); //How many pages are we getting
    $pc_e = 0;
    while($pc_e < $pc) {
        $nid = $mpages[$pc_e];
        $sql = db_query('SELECT * FROM content_type_page WHERE field_page_order_value = "%d" AND field_project_nid = "%d" ORDER BY vid DESC LIMIT 1', $nid, $project_nid);
        $res = db_fetch_array($sql);
        if($res) {
            $npage_arr[] = $res['nid'];
        } else {  //If there is no page, we need to create it here.
            $node = new StdClass();
            $node->type = 'page';
            $node->title = 'Page ' . $nid . ' of ' . $project->title;
            $node->field_project[0]['nid'] = $project_nid;
            $node->field_page_order[0]['value'] = $nid;
            $node = node_submit($node);
            node_save($node);
            $npage_arr[] = $node->nid;
        }
    $pc_e++;
    }

    // Convert callout letters to callout_nids
    $coc = count($mcallouts);
    $coc_e = 0;
    while($coc_e < $coc) {
        $cnid = strtoupper($mcallouts[$coc_e]);
        $pnid = $npage_arr[$coc_e];
        $page_node = node_load($pnid);
        $sql = db_query('SELECT * FROM content_type_callout WHERE field_identifier_value = "%s" AND field_page_nid = "%d" ORDER BY vid DESC LIMIT 1', $cnid, $pnid);
        $res = db_fetch_array($sql);
        if($res) {
            $cpage_arr[] = $res['nid'];
        } else { //If there is no callout that exists, we need to make it here.
            $callout_node = new stdClass();
            $callout_node->type = 'callout';
            $callout_node->field_page[0]['nid'] = $pnid;
            $callout_node->field_identifier[0]['value'] = $cnid;
            $callout_node->field_sequence[0]['value'] = 0;
            $callout_node->title = "Callout ".$callout." on page ".$page_node->field_page_order[0]['value'];
            $callout_node->field_project[0]['nid'] = $project->nid;
            $callout_node->field_wholesaler[0]['value'] = $project->field_wholesaler[0]['value'];
            $callout_node->field_skus = array();

            $callout_node->status = 1;
            $callout_node->uid = 1;             
            $callout_node->revision = true;
            $callout_node = node_submit($callout_node);
            node_save($callout_node);
            $cpage_arr[] = $callout_node->nid;
        }
    $coc_e++;
    }

    //Now we need to assign the skus to the appropriate callout for processing
    $coc2 = count($cpage_arr);
    $coc_e2 = 0;
    while($coc_e2 < $coc2) {
        $co = $cpage_arr[$coc_e2];
        if($co !== '0') {
            $sku = $merge[$coc_e2];
            $m_arr[$co][] = $sku;
        }
    $coc_e2++;
    }

    //we need a way to centrally store all NID's of SKUs to the callouts they belong to
    $oc_arr = array();
    $oc = count($mcallout_nid);
    $oc_e = 0;
    while($oc_e < $oc) {
        $f_callout = $mcallout_nid[$oc_e];
        $former_callout = node_load($f_callout);
        foreach($former_callout->field_skus as $key=>$skus) {
            $oc_arr[] = $skus;
        }
        $oc_e++;
    }

    //Now we are processing the Pages/Callouts/SKUs to save
    $pc_e2 = 0;
    foreach($m_arr as $key=>$values) {
        $callout = node_load($key);
        foreach($values as $value) {
            $oc = count($oc_arr);
            $oc_e = 0;
            while($oc_e < $oc) {
                $skus = $oc_arr[$oc_e];
                if($value == $skus['nid']) {
                    $callout->field_skus[] = $skus;
                    //$nid = $oc_sku[$value];
                    $old_callout_info[] = $oc_sku[$value];
                    $oc_e = $oc;
                }
                else {
                    $oc_e++;
                }
            }
        }

        foreach($old_callout_info as $nid) {
/*          $nid = $oc_sku[$value]; */
            $former_callout = node_load($nid);
            foreach($former_callout->field_images as $old_image) {
            $callout->field_images[] = $old_image;
            }
            foreach($former_callout->field_line_art as $old_image) {
                $callout->field_line_art[] = $old_image;
            }
            foreach($former_callout->field_swatches as $old_image) {
                $callout->field_swatches[] = $old_image;
            }
            $callout->field_copy_text[0]['value'] .= $former_callout->field_copy_text[0]['value'];
        }
        $callout->field_notes[0]['value'] .= $former_callout->field_notes[0]['value'];
        $callout->field_image_notes[0]['value'] .= $former_callout->field_image_notes[0]['value'];
        $callout->field_logos = $former_callout->field_logos;
        $callout->field_affiliations = $former_callout->field_affiliations;
        $callout->field_graphics = $former_callout->field_graphics;
        $callout->revision = 1;

        $callout->field_status[0]['value'] = 'inprocess';
        node_save($callout);
        $pc_e2++;
    }
    } 
```

我意识到这可能在某种程度上可以简化，但就目前而言，考虑到我正在尝试做的事情，这非常有效。目前没有收到客户的投诉。感谢您浏览 Drupal 社区。

# mysql - 我应该使用表锁还是事务？

> ID：12501590
> 
> 赞同：0
> 
> 时间：2012-09-19T19:31:10.577
> 
> 标签：mysql, transactions, table-locking

我有 2 个表，一个称为 user，用于存储用户，另一个称为 process，用于存储更新用户的活动进程列表。

我想要做的是能够选择 50 个过时的用户，通过在进程表中插入一条记录来锁定他们，该记录具有我正在更新的用户 ID 范围，这样如果启动了第二个进程，它将不开始处理相同的用户。

总结一下：

1.  在进程表中选择最后处理的id
2.  在用户表中选择 50 ids > last processes id
3.  在进程表中插入一条新记录，其 ids 范围为我将要处理的范围

我想确保如果同时启动 2 个进程（P1 和 P2），则每个进程连续执行 3 个步骤。IE：

> *   P1 步骤 1
> *   P1 步骤 2
> *   P1 步骤 3
> *   P2 步骤 1
> *   P2 步骤 2
> *   P2 步骤 3

并不是

> *   P1 步骤 1
> *   P2 步骤 1
> *   P1 步骤 2
> *   等等

我该怎么做？事务或表锁？还是别的什么？

我的表是 InnoDB 的。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T19:59:53.960

行级锁。InnoDB 的优点是它支持行级锁。您需要锁定有兴趣更新到该事务的记录。您应该每批使用一个事务，这样您就可以在完成后积极释放它们。

见：[http ://dev.mysql.com/doc/refman/5.0/en/innodb-lock-modes.html](http://dev.mysql.com/doc/refman/5.0/en/innodb-lock-modes.html)

# javascript - 如何通过 YouTube 上传小部件知道上传是否已开始？

> ID：12501592
> 
> 赞同：0
> 
> 时间：2012-09-19T19:31:23.100
> 
> 标签：javascript, upload, youtube, widget

Google 推出了一项名为 youtube 上传小部件的实验性功能。文档可以在[这里找到](https://developers.google.com/youtube/youtube_upload_widget)。

我们可以通过 onUploadSuccess、onProcessingComplete 等侦听器获取 VideoID、上传视频后的状态等响应。还有一些方法可以检测网络摄像头的操作，因此我们可以跟踪这些操作。

有没有办法知道是否开始上传？当用户从计算机选择文件到小部件时，我正在寻找一些 Javascript 函数来触发事件。（类似于 onUploadStart）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T08:31:11.377

目前还没有这种功能。[我在https://code.google.com/p/gdata-issues/issues/detail?id=3011](https://code.google.com/p/gdata-issues/issues/detail?id=3011)上向 Youtube 团队提问

# c# - 程序无法识别命令行参数

> ID：12501593
> 
> 赞同：0
> 
> 时间：2012-09-19T19:31:25.490
> 
> 标签：c#, .net, command-line-arguments

> **可能重复：**
> [如何从 ClickOnce 应用程序获取命令行？](https://stackoverflow.com/questions/4607632/how-to-get-command-line-from-a-clickonce-application)

我正在开发一个控制台应用程序，并`string[] args`在完成大量其他工作后手动添加了 Main() 的内部。这就是我接受命令行参数所要做的全部吗？还是我还需要在其他地方配置一些东西？`Console.WriteLine("{0}",args.Length)`无论我在执行后发送什么，我都会继续做并获得零。

```
class Program
{
    static void Main(string[] args)
    {
        Console.WriteLine("{0}", args.Length);
    }
} 
```

然后我运行`...\setup.exe yes no maybe`并得到 0 的长度。我还需要做什么？

更多信息：

在属性页面中设置命令行参数后，我尝试中断，但出现以下错误：

![在此处输入图像描述](../Images/85afc9329606694ad89c4b7480fe03b7.png)

我认为有人对 ClickOnce 部署的评论是我的问题。如何在 VS2010 中部署以允许这样做？

更多信息：

我在“属性”->“安全”下禁用了“ClickOnce 安全设置”，并且能够成功调试，但是当我单击“发布”时，它会自动重新打开此设置。如何防止这种情况发生？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-19T19:39:36.200

这个例子：

```
using System;

namespace ConsoleApplication1
{
    internal class Program
    {
        private static void Main(string[] args)
        {
            Console.WriteLine("Number of command line parameters = {0}", args.Length);
            for (int i = 0; i < args.Length; i++)
            {
                Console.WriteLine("Arg[{0}] = [{1}]", i, args[i]);
            }
        }
    }
} 
```

执行时`ConsoleApplication1.exe a b c`将输出：

```
Number of command line parameters = 3
Arg[0] = [a]
Arg[1] = [b]
Arg[2] = [c] 
```

请参阅[命令行参数教程](http://msdn.microsoft.com/en-us/library/aa288457%28v=vs.71%29.aspx)

更新：此代码

```
class Program
{
    static void Main(string[] args)
    {
        Console.WriteLine("{0}", args.Length);
    }
} 
```

作为`ConsoleApplication1.exe a b c`输出执行时

```
3 
```

最重要的是，请确保您正在执行正确的 .exe。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T19:39:10.710

也许您可以在 for 循环中执行类似的操作来检查任何命令参数的值是什么

```
public class CountCommandLineArgs
{
   public static void Main(string[] args)
   {
       Console.WriteLine("Number of command line parameters = {0}",
          args.Length);
       foreach(string s in args)
       {
          Console.WriteLine(s);
       }
   }
} 
```

# javascript - 为什么单击一个表单元素会将焦点设置为另一个？

> ID：12501596
> 
> 赞同：3
> 
> 时间：2012-09-19T19:31:42.230
> 
> 标签：javascript, html

我有一个奇怪的问题。当我单击表单的“TransDesc”输入文本元素时，焦点立即转到第一个元素“数量”。我相信这与我对“金额”元素的 onchange 有关。

为了专注于“TransDesc”，我必须选择过去的“数量”，然后是“金额”。

我尝试在 retTotalAmt() 中设置焦点，但没有奏效。

我需要改变什么，所以我可以点击 TransDesc，而不是让焦点回到“数量”

```
function retTotalAmt()
{
var total_amt = 
document.forms["InvGenPayTickets"]["Quantity"].value * ticketCost;

document.getElementById('Amount').value = total_amt.toFixed(2);
}

.
.
.

Quantity
<input type='text' name='Quantity' id='Quantity' 
       onchange="return retTotalAmt();" /> 

Amount 
$<input type='text' name='Amount' id='Amount' readonly="readonly" />
<input type=text name="TransDesc" id="TransDesc" maxlength=255 /> 
```

一些表单域周围有元素。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T19:46:20.617

所以我认为`<label>`输入字段周围的元素存在问题，可能有像本例中那样令人困惑的 ID：

```
<label for="input1"><input id="input1" /></label>
<label for="input1"><input id="input2" /></label>​ 
```

so if you don't need that labels, just remove them or try to fix the IDs

# shell - 使用 sed 查找和连接行

> ID：12501603
> 
> 赞同：3
> 
> 时间：2012-09-19T19:32:21.197
> 
> 标签：shell, unix

我在长 c 文件中有一个结构块

```
struct node {
   int val;
   struct node *next;
}; 
```

如何使用 sed 函数找到这个结构块并将其转换为一行。所以它看起来像这样：

```
struct node {   int val;   struct node *next;}; 
```

提前致谢

* * *

我的输入是这样的：

```
struct node {
   int val;
   struct node *next;
};

typedef struct {
   int numer;
   int denom;
} Rational;

int main()
{
struct node head;
Rational half, *newf = malloc(sizeof(Rational));

head = (struct node){ 5, NULL };
half = (Rational){ 1, 2 };
*newf = (Rational){ 2, 3 };
} 
```

我的输出是：

```
struct node { int val; struct node *next;};

typedef struct { int numer; int denom;} Rational;int main(){struct node head;Rational  half, *newf = malloc(sizeof(Rational));head = (struct node){ 5, NULL };
half = (Rational){ 1, 2 };
*newf = (Rational){ 2, 3 };
} 
```

我只希望 struct node:`struct node { int val; struct node *next;};`
和 typedef struct:`typedef struct { int numer; int denom;} Rational;` 在一行中。然而 int main() 被附加到 Rational 的末尾；

我希望 main 函数中的内容保持原样。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-19T20:01:00.847

使用 sed：

```
sed '/struct[^(){]*{/{:l N;s/\n//;/}[^}]*;/!t l;s/  */ /g}' input.c 
```

当`sed`看到一个结构定义 ( `/struct[^{]*{/`) 时，它将读取行，直到`};`在一行 ( `:l N;s/\n//;/[}];/!t l;`) 上看到 a ，同时还删除换行符。当它匹配时，`};`它会删除多余的空格 ( `;s/ */ /g`)。

# php - iframe 提交然后重定向

> ID：12501604
> 
> 赞同：1
> 
> 时间：2012-09-19T19:32:25.443
> 
> 标签：php, javascript, iframe

如何让 iframe 保持其默认提交但在将用户重定向到另一个页面之后。我听说我需要在服务器端进行此重定向，但不知道这意味着什么。

以下是我尝试过的，但它取消了默认的 iframe 提交并只是重定向。

```
function convert() {
            document.location = '/sidingsuccess';
} 
```

和

```
onSubmit="convert();" 
```

在 iframe 代码上

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T19:39:09.180

在服务器上，您可以在提交完成后，通过执行以下操作使用该`header`功能将页面重定向到另一个页面（例如`example.php`）：

```
header('Location: example.php'); 
```

那是你要找的吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T19:46:30.470

将表单提交到隐藏的 iframe。

iframe HTML：

```
<g:form controller="..." action="submit" method="POST" target="hidden-frame">
...
</g:form>

<iframe id="hidden-frame" style="display: none" onload="onSubmitCompleted"></iframe>

<script>
    function onSubmitCompleted() {
        window.top.location.href = <redirect url>
    }
</script> 
```

控制器：

```
/*process submission */

render("<html><head><script>window.parent.onSubmitCompleted();</script></head><body></body></html>"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-19T19:47:07.840

替换您的以下行：

```
document.location = '/sidingsuccess'; 
```

对于这个：

```
window.top.location.href = '/sidingsuccess'; 
```

应该这样做。

# ios - 关闭应用程序 IOS 后处理会话

> ID：12501607
> 
> 赞同：0
> 
> 时间：2012-09-19T19:32:40.777
> 
> 标签：ios, session, cookies

我想将此功能提供给我的应用程序。当用户一次输入登录信息（用户名和密码）时，我想保存此信息，当他们从多任务栏关闭应用程序时，他们应该自动登录......我该如何管理这个？你能帮助我吗？

提前致谢...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T19:40:38.627

以安全方式执行此操作将需要使用密钥库。查看 Apple Developer 网站上的**Keychain Services Programming Guide**，了解如何执行此操作的详细信息。

[http://developer.apple.com/library/ios/#documentation/Security/Conceptual/keychainServConcepts/iPhoneTasks/iPhoneTasks.html](http://developer.apple.com/library/ios/#documentation/Security/Conceptual/keychainServConcepts/iPhoneTasks/iPhoneTasks.html)

# php - 我想将 MySQL 查询转换为 PDO？

> ID：12501608
> 
> 赞同：0
> 
> 时间：2012-09-19T19:32:42.803
> 
> 标签：php, mysql, pdo

我需要将其转换为课程的 PDO 形式，但由于我对这一切都不熟悉，有人可以帮我吗？我的教授声称每个功能都可以转换，但我在网上找不到任何可以帮助我的东西。

```
<?php
    // rnfunctions.php
    $dbhost = 'localhost';
    $dbname = 'social_local';
    $dbuser = 'root';
    $dbpass = 'root';
    $appname = "Social Networking Test Site";
    try
    {
        $dbh = new PDO("mysql:host=$dbhost;dbname=$dbname", $dbuser, $dbpass);
    }
    catch ( PDOException $e )
    {
        echo $e->getMessage();
    }

    function createTable ($name, $query)
    {
        if (tableExists($name)) {
            echo "Table '$name' already exists<br />";
        } else {
            queryMysql("CREATE TABLE $name($query)");
            echo "Table '$name' created<br />";
        }
    }

    function tableExists ($name)
    {
        $result = queryMysql("SHOW TABLES LIKE '$name'");
        return mysql_num_rows($result);
    }

    function queryMysql ($query)
    {
        $result = mysql_query($query) or die(mysql_error());
        return $result;
    }

    function destroySession ()
    {
        $_SESSION = array();
        if (session_id() != "" || isset($_COOKIE[session_name()])) {
            setcookie(session_name(), '', time() - 2592000, '/');
        }
        session_destroy();
    }

    function sanitizeString ($var)
    {
        $var = strip_tags($var);
        $var = htmlentities($var);
        $var = stripslashes($var);
        return $var;
    }

    function showProfile ($user)
    {
        if (file_exists("$user.jpg")) {
            echo "<img src='$user.jpg' border='1' align='left' />";
        }
        $result = queryMysql("SELECT * FROM rnprofiles WHERE user='$user'");
        if (mysql_num_rows($result)) {
            $row = mysql_fetch_row($result);
            echo stripslashes($row[1]) . "<br clear=left /><br />";
        }
    }
    ?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T19:34:27.340

您需要先实例化一个 PDO 类。然后学习 PDO 功能。

```
$dbh = new PDO('mysql:host='.DB_HOST.';dbname='.DB_NAME, DB_USER, DB_PASS);
$stmt = $dbh->prepare($sql);
$stmt->execute();
return $stmt; 
```

使用类似的东西`$stmt->FetchAll()`来获得结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T19:44:28.070

这样的事情可能会帮助你：

```
$dbh = new PDO("mysql:host=localhost;dbname=yourBaseName", 'someLogin', 'somePassword');
$dbh->prepare('SELECT login FROM members WHERE login=? AND password=?');
$stm = $dbh->execute(array($login, $pass));
if (($row = $stm->fetchObject())) {
    echo "You are loggued!";
    // stuffs with loggued user
} else {
    echo "Invalid user or password";
    // login form again
} 
```

# clojure - 异类树上的 Clojure 拉链

> ID：12501609
> 
> 赞同：3
> 
> 时间：2012-09-19T19:32:45.377
> 
> 标签：clojure, functional-programming, zipper

我在编写可以遍历异构节点树的拉链时遇到问题。我有 i) 地图列表。每个地图都有 ii) 一个 :inputs 键，其值是地图列表。

我想使用拉链来访问每一片叶子并添加一个计算值。代码块和输入树数据如下。我似乎无法获取访问叶节点的拉链代码，并添加 { :thing 123 }。我一定错过了一些简单的东西。有什么见解吗？

一种）

```
      (loop [loc (zip/zipper (or map?list?)
                              #((if (map?%1) ;; 获取节点的子节点
                                  (:输入 %1)
                                  %1))
                              #(%1) ;; 创建一个新节点
                              (:输入层神经网络))]

        (如果 (zip/end?loc)
          （zip/根目录）
          （如果（地图？位置）
            （重复（邮编/下一个
                      (zip/edit loc 合并 { :thing 123 } )))
            （重复（zip/next loc））
          )
        )
      )

```

二）

```
     ({:输入
       ({:key :avolume, :value 2.25, :weight 0.4283380545172636, :bias 0}
        {:key :bvolume, :value 3.0, :weight 0.6970037374879661, :bias 0}
        {:key:ask,:value 1.32379,:weight 0.5387437158323669,:bias 0}
        {:key :bid, :value 1.3239, :weight 0.4648184032361037, :bias 0}
        {:key:time,:value 1.335902400676,:weight 0.43632873607404554,:bias 0}),
       :id "583c10bfdbd326ba34aed329139df6be2487ffc"}
      {：输入
       ({:key :avolume, :value 2.25, :weight 0.13162215440222336, :bias 0}
        {:key :bvolume,:value 3.0,:weight 0.23886901184352727,:bias 0}
        {:key:ask,:value 1.32379,:weight 0.8408470512339872,:bias 0}
        {:key:bid,:value 1.3239,:weight 0.27071013797961796,:bias 0}
        {:key:time,:value 1.335902400676,:weight 0.6304505838898373,:bias 0}),
       :id "583c10bfdbd326ba34aed329139df6be2487ffd"}
      {：输入
       ({:key :avolume, :value 2.25, :weight 0.8236972641966921, :bias 0}
        {:key :bvolume,:value 3.0,:weight 0.32421537754016705,:bias 0}
        {:key :ask, :value 1.32379, :weight 0.966306328543246, :bias 0}
        {:key :bid, :value 1.3239, :weight 0.8891668220470931, :bias 0}
        {:key:time,:value 1.335902400676,:weight 0.278993745549462,:bias 0}),
       :id "583c10bfdbd326ba34aed329139df6be2487ffe"}
      {：输入
       ({:key :avolume, :value 2.25, :weight 0.27388486254027167, :bias 0}
        {:key :bvolume,:value 3.0,:weight 0.33659579299487363,:bias 0}
        {:key:ask,:value 1.32379,:weight 0.16610378593177033,:bias 0}
        {:key :bid, :value 1.3239, :weight 0.6964784902474896, :bias 0}
        {:key:time,:value 1.335902400676,:weight 0.6306732906337643,:bias 0}),
       :id "583c10bfdbd326ba34aed329139df6be2487fff"}
      {：输入
       ({:key:avolume,:value 2.25,:weight 0.8819171698935051,:bias 0}
        {:key :bvolume,:value 3.0,:weight 0.5944805362120958,:bias 0}
        {:key:ask,:value 1.32379,:weight 0.9060962647355373,:bias 0}
        {:key:bid,:value 1.3239,:weight 0.37647418075176464,:bias 0}
        {:key:time,:value 1.335902400676,:weight 0.7797681719480866,:bias 0}),
       :id "583c10bfdbd326ba34aed329139df6be2488000"})

```

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-19T21:18:26.933

我认为创建新节点的拉链部分不正确。如果您阅读[zipper 函数的定义](http://richhickey.github.com/clojure/clojure.zip-api.html#clojure.zip/zipper)，您会看到它`make-node`使用 2 个参数调用：当前节点、新子节点序列。函数应该返回新节点。

您使用的表达式`#(%1)`根本不起作用，因为您试图将 map 或 list 作为函数调用。

此外，表达`(or map? list?)`并不能真正做到你想要的。

* * *

我将其改编为仅用于测试的向量。

```
(defn mk-zip [根]
  （让[分支？（fn [节点]
                  （当节点
                    （或（和（地图？节点）（包含？节点：输入））
                        （向量？节点））））
        孩子（fn [节点]
                   （条件
                     （无？节点）无
                     （地图？节点）（：输入节点）
                     ：其他节点））
        make-node (fn [节点子节点]
                    （条件
                      （无？节点）无
                      （地图？节点）（关联节点：输入子节点）
                      （向量？节点）（进入[]孩子）
                      ：其他节点））]
    （zip/zipper 分支？子节点根）））

（定义根[{：输入
            [{:key:avolume,:value 2.25,:weight 0.4283380545172636,:bias 0}
             {:key :bvolume, :value 3.0, :weight 0.6970037374879661, :bias 0}
             {:key:ask,:value 1.32379,:weight 0.5387437158323669,:bias 0}
             {:key :bid, :value 1.3239, :weight 0.4648184032361037, :bias 0}
             {:key:time,:value 1.335902400676,:weight 0.43632873607404554,:bias 0}],
            :id "583c10bfdbd326ba34aed329139df6be2487ffc"}])

```

现在可以更新地图项目：

```
(def z (mk-zip root))
(-> z zip/next zip/down 
    (zip/insert-right {:key :new :value -10}) 
    zip/up
    zip/node) 
```

印刷：

```
{：输入
 ({:key:avolume,:weight 0.4283380545172636,:bias 0,:value 2.25}
  {:key :new, :value -10}
  {:key :bvolume, :weight 0.6970037374879661, :bias 0, :value 3.0}
  {:key:ask,:weight 0.5387437158323669,:bias 0,:value 1.32379}
  {:key:bid,:weight 0.4648184032361037,:bias 0,:value 1.3239}
  {：键：时间，
   ：重量0.43632873607404554，
   ：偏差0，
   :值 1.335902400676}),
 :id "583c10bfdbd326ba34aed329139df6be2487ffc"}

```

# javascript - JavaScript 防止函数在窗口关闭时触发

> ID：12501610
> 
> 赞同：2
> 
> 时间：2012-09-19T19:32:51.070
> 
> 标签：javascript, onbeforeunload, onunload

我有一个文本字段 ID="Text1"，它会在 Text1 字段失去焦点时触发一个函数“validateField()”（它还会检查输入键是否被按下“onkeydown”）

例子：

```
<input type=text ID="Text1" onkeydown="wasEnterKey(); " onblur="validateField()" > 
```

问题是当用户关闭窗口时，此事件会触发，我想防止这种情况发生。

我曾尝试在 validatField 函数中使用 window.onbeforeunload 和 window.onunload：

```
function validateField() 
{
 if (window.onbeforeunload) { 
    window.open('','_parent','');window.close(); return false;
                            } 
... (other actions follow)
} 
```

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T22:35:08.530

感谢：@3on 和 @Champ！

这是我制定的解决方案，认为实际代码可能对某人有所帮助。再次感谢！

```
<SCRIPT LANGUAGE="JavaScript">
function delayBlur()
{   setTimeout( validatePwd, 100);  }

function closenow()
    {   window.open('','_parent','');window.close(); return false;  }

function validateField() 
{
    var field1 = document.myForm.Text1.value;
    if (Text1 == '')
    {... (other actions follow)}
}
</SCRIPT>
<input type=Text ID="Text1" onkeydown="wasEnterKey(); " onblur="delayBlur()"> 
```

正如 3on 和 Champ 所建议的那样，当用户单击关闭按钮时，这允许窗口关闭。它还阻止输入键提交表单。我检测到输入键并用制表键替换键码。我尝试将超时设置为低于 100 并且有零星的问题，但 100 从未失败过！

# asp.net-mvc - 如何避免布局重新加载？

> ID：12501611
> 
> 赞同：1
> 
> 时间：2012-09-19T19:32:51.477
> 
> 标签：asp.net-mvc, asp.net-mvc-4

我正在构建一个 MVC 应用程序，当我浏览该应用程序时，我注意到布局与我的内容一起重新加载。

**我知道这是默认和预期的行为。**

我真的很想避免重新加载布局，有什么想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-19T19:49:22.207

你至少有两个能力：

*   使用 Ajax 助手 ( `@Ajax.ActionLink`)

    *   [链接 1](https://stackoverflow.com/questions/5586327/how-to-use-ajax-actionlink)
    *   [链接 2](https://www.c-sharpcorner.com/UploadFile/abhikumarvatsa/ajax-actionlink-and-html-actionlink-in-mvc/)
*   使用 javascript/jquery

    *   [链接 1](http://api.jquery.com/load/)

主要思想是加载`PartialView`ajax 请求并在 DOM 中插入/替换内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-06-20T08:46:31.773

没有办法指示它不重新加载布局

只要您请求 url，Layout 就会在后端呈现，它会返回一个使用 layout 重新渲染的视图。

但是，使用 ajax 加载视图对 SEO 不利，您可以采取一些变通方法。或者我应该说搜索引擎优化是愚蠢的，有人应该修复那个狗屎。

我发布了一个链接，向您展示当您拥有 ajax 网站时，爬虫的行为方式

[http://moz.com/blog/how-to-allow-google-to-crawl-ajax-content](http://moz.com/blog/how-to-allow-google-to-crawl-ajax-content)

有一些很棒的框架，比如 Backbone、angularjs、knockout，它们可以让你轻松完成你想做的事情。

# c# - 如何防止应用程序被标记为可疑

> ID：12501614
> 
> 赞同：4
> 
> 时间：2012-09-19T19:32:59.590
> 
> 标签：c#, deployment, visual-studio-2012, code-signing, false-positive

我有一个使用 Visual Studio 2012 用 C# 编写的 .NET 应用程序。我正在通过自己的网站推广该应用程序并提供下载。在 Chrome 中下载它时，我收到一条消息，指出我的应用程序“不常下载并且可能很危险”。此外，当我下载自己的应用程序并执行它时，Avast 认为它是可疑的，并希望在沙箱中运行它。

无论如何我可以防止这种情况发生（无需购买证书进行签名）？我不希望潜在用户遇到这个问题。

编辑：我没有做任何恶意或在我的应用程序中使用任何钩子。[如您在此处看到的，该应用程序只是一个简单的小工具。](https://github.com/aaronjwood/periodkiller)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-19T19:35:02.103

要么你对应用程序进行代码签名，要么等到成千上万的人下载你的应用程序，安装它，不要将其报告为垃圾，然后你就可以从提供商那里获得善意的资助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-09T01:30:43.150

即使您的应用程序是使用参与 Microsoft 的受信任的根证书颁发机构计划的 CA 颁发的证书签署的，它仍然可能面临一些问题，除非您使用 EV Authenticode 代码签名证书和/或继续永久更新相同的证书. 有关示例，请参阅[“IE9 SmartScreen 警告，尽管遵循所有建议”](https://stackoverflow.com/questions/6313189/ie9-smartscreen-warning-despite-following-all-recommendations/15305918#15305918)。简而言之，您是在为作为软件发行商的声誉付费。

# facebook - 脸书刮板。我可以回复不同的内容吗？

> ID：12501620
> 
> 赞同：0
> 
> 时间：2012-09-19T19:33:28.543
> 
> 标签：facebook, facebook-graph-api

我正在开发一个 url 缩短器，当前的规范要求避免 Facebook 抓取这些链接，而是一个集成的抓取器会这样做并将 og 元标签交给 Facebook。Facebook 术语中是否有任何内容不允许我使用与普通用户看到的内容不同的内容（例如，仅带有 opengraph 元标记的空白页面）回复其抓取工具？

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-02T13:34:53.240

我刚刚在我的网站上做了这个。我正在将非移动设备重定向到另一个页面，但希望 facebook 刮板获取移动设备可以获得的内容。

这是我得到的用户代理：

```
facebookexternalhit/1.1 (+http://www.facebook.com/externalhit_uatext.php) 
```

因此，与这样的常规模式匹配应该会检测到 facebook 刮板。

```
/^(facebookexternalhit.*)/ 
```

如上所述，这个用户代理很容易被欺骗，在我的情况下，这并不重要。

如果 facebook 更改其爬网脚本的用户代理，则只会出现问题。

# mysql - 如何为 AVG 查询优化表？

> ID：12501622
> 
> 赞同：2
> 
> 时间：2012-09-19T19:33:35.920
> 
> 标签：mysql, sql, indexing

我有一个看起来像这样的表：

```
| calls | CREATE TABLE `calls` (
  `id` int(10) unsigned NOT NULL AUTO_INCREMENT,
  `request_id` int(10) unsigned NOT NULL,
  `ct` int(10) unsigned DEFAULT NULL,
  `wt` int(10) unsigned DEFAULT NULL,
  `cpu` int(10) unsigned DEFAULT NULL,
  `mu` int(10) unsigned DEFAULT NULL,
  `pmu` int(10) unsigned DEFAULT NULL,
  `caller_id` int(10) unsigned DEFAULT NULL,
  `callee_id` int(10) unsigned NOT NULL,
  PRIMARY KEY (`id`),
  KEY `caller_id` (`caller_id`,`request_id`)
) ENGINE=InnoDB AUTO_INCREMENT=3164057 DEFAULT CHARSET=utf8 | 
```

和一个简单的查询：

```
mysql> EXPLAIN SELECT
    -> AVG(`c1`.`wt`) `wt`,
    -> AVG(`c1`.`cpu`) `cpu`,
    -> AVG(`c1`.`mu`) `mu`,
    -> AVG(`c1`.`pmu`) `pmu`
    -> FROM
    -> `calls` `c1`;
+----+-------------+-------+------+---------------+------+---------+------+---------+-------+
| id | select_type | table | type | possible_keys | key  | key_len | ref  | rows    | Extra |
+----+-------------+-------+------+---------------+------+---------+------+---------+-------+
|  1 | SIMPLE      | c1    | ALL  | NULL          | NULL | NULL    | NULL | 3161147 |       |
+----+-------------+-------+------+---------------+------+---------+------+---------+-------+
1 row in set (0.00 sec)

mysql> SELECT
    -> AVG(`c1`.`wt`) `wt`,
    -> AVG(`c1`.`cpu`) `cpu`,
    -> AVG(`c1`.`mu`) `mu`,
    -> AVG(`c1`.`pmu`) `pmu`
    -> FROM
    -> `calls` `c1`;
+-----------+----------+------------+------------+
| wt        | cpu      | mu         | pmu        |
+-----------+----------+------------+------------+
| 2285.2079 | 428.2061 | 30567.4517 | 24925.7182 |
+-----------+----------+------------+------------+
1 row in set (1.61 sec) 
```

服务器非常快（24 GB RAM）。最相关的`my.cnf`（[完整的 my.cnf](https://gist.github.com/bfab4e034df75bb0c46f)）是：

```
query_cache_type=0
query_cache_size=0
key_buffer_size=50M
sort_buffer_size=10M
innodb_buffer_pool_size=1G
read_rnd_buffer_size=1M
join_buffer_size=4M
max_connections=400
table_cache=2000
table_definition_cache=2000 
```

我可以做些什么来优化查询吗？只有 5,278,808 条记录，我似乎不太可能达到硬件限制。

我还尝试将整个表格移动到另一个相同的`ENGINE=MEMORY`表格。时间缩短了大约 30%。但是，这仍然很慢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T19:37:17.453

您可以做的最好的短期事情是添加一个索引，该索引将涵盖您计算的 4 个字段。现在您正在执行全表扫描，如果您创建一个仅覆盖 MySQL 上方 4 列的索引，则遍历包含您的表的所有页面的操作将遍历索引，索引单独存储并且包含更少的数据，因此更多的数据将适合单页。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T22:34:14.050

您可以尝试避免一遍又一遍地查看旧数据...

也许将记录计数和总和值与上次更新的日期时间一起存储在另一个表中，并将日期时间列添加到您的调用表中（确保它被索引）。

当您需要计算平均值时，只需查看上次检查后创建的数据，将其与新表中的数据结合，然后更新新表。

如果您的旧数据可以更新，它会变得更加复杂 - 您可能需要有触发器。

# sql-server - 如何连接到在使用代理的计算机上工作的 SQL 服务器

> ID：12501623
> 
> 赞同：1
> 
> 时间：2012-09-19T19:33:38.017
> 
> 标签：sql-server, proxy

我的 SQL 服务器安装在远程计算机上，通过代理服务器工作。我知道计算机的外部 IP 地址和本地网络 IP。我该如何连接？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T11:00:09.903

按照 MSDN 上的说明进行操作：

[`Connecting to SQL Server Through a Proxy Server`](http://msdn.microsoft.com/en-us/library/ms190801%28v=sql.105%29.aspx)：

[`How to: Connect to SQL Server Through a Proxy Server (SQL Server Configuration Manager)`](http://msdn.microsoft.com/en-us/library/ms179448%28v=sql.105%29.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T19:48:07.257

如果托管 SQL Server 的计算机位于代理服务器之后，并且除了通过该代理服务器之外，您没有到该主机的备用路由，那么您将必须确定配置代理以允许从您的机器连接到SQL服务器...

# linq - 将自定义列表中的属性值与 LINQ 组合

> ID：12501640
> 
> 赞同：0
> 
> 时间：2012-09-19T19:34:46.640
> 
> 标签：linq, list

假设我有一个人员列表，在列表中我有以下对象：

```
Person = { ID= 1, State="CA"}
Person = { ID= 2, State="PA"}
Person = { ID= 1, State="NY"}
Person = { ID= 1, State="OH"}
Person = { ID= 3, State="FL"}
Person = { ID= 2, State="KC"} 
```

如何获得一个新列表，其中我只能通过 ID 获得新的 Persons 一次，如果重复获取 State 值并将其放入以逗号分隔的新 Person 对象中。例如，新列表将是

```
Person = { ID= 1, State="CA,NY,OH"}
Person = { ID= 2, State="PA,KC"}
Person = { ID= 3, State="FL"} 
```

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T19:37:07.653

使用[`Enumerable.GroupBy`](http://msdn.microsoft.com/en-us/library/bb534501.aspx)和[`String.Join`](http://msdn.microsoft.com/en-us/library/dd783876%28v=vs.100%29.aspx)：

```
var result = persons.GroupBy(p => p.ID)
                    .Select(g => new Person{
                        ID = g.Key,
                        State = string.Join(",", g.Select(p => p.State))
                    }).ToList(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T19:39:08.683

这是扩展方法版本

```
 var persons = Person.GroupBy(p => p.ID).Select(p => new Person() { ID = p.Key, State = String.Join(",", p.Select(p2 => p2.State).ToArray()) }).ToList(); 
```

# java - 为什么我的视图不是垂直设置的？

> ID：12501643
> 
> 赞同：0
> 
> 时间：2012-09-19T19:35:11.007
> 
> 标签：java, android

这是代码：

```
 <RelativeLayout
            android:id="@+id/top_lay2"
            android:layout_below="@id/top_lay1"
            android:layout_width="fill_parent"
            android:layout_marginTop="10dp"
            android:orientation="vertical"
            android:layout_height="wrap_content"
            android:background="@drawable/customrect">
<TextView
            android:layout_gravity="center"
            android:layout_width="fill_parent"
            android:layout_height="wrao_content"
            android:textColor="@color/white1"
            android:text="some text"
         />
<Button
            android:layout_gravity="center"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:text="click me"
    />

    </RelativeLayout> 
```

从那个 xml 代码中，我除了视图将相对于另一个垂直显示，而是它们彼此堆叠。这里有什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T19:38:46.020

在 LinearLayout 中，您的字段将垂直显示。但是在 RelativeLayout 中，您必须指定它们相对于彼此的位置。因此，如果您将“RelativeLayout”替换为“LinearLayout”，则一切就绪。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T19:37:31.760

一个[RelativeLayoutRelativeLayout](http://developer.android.com/guide/topics/ui/layout/relative.html)需要描述它的孩子相对于彼此的位置。

如果您希望自动定位，请使用[LinearLayout](http://developer.android.com/guide/topics/ui/layout/linear.html)并将其方向设置为垂直。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-19T19:37:59.547

`orientation="vertical"`不支持`RelativeLayout`use instead 或定义和`LinearLayout`之间的适当关系。`TextView``Button`

还要检查 [http://developer.android.com/guide/topics/ui/layout/linear.html](http://developer.android.com/guide/topics/ui/layout/linear.html)

# version-control - 使用 Mercurial & Tortoisehg

> ID：12501653
> 
> 赞同：0
> 
> 时间：2012-09-19T19:35:57.730
> 
> 标签：version-control, mercurial, tortoisehg

在我职业生涯的不同时期，我是 Visual Source Safe、TFS 或 SVN 的长期用户。我想切换到 Mercurial & TortoideHG。

我已经从 [这个页面](http://tortoisehg.bitbucket.io/download/index.html)下载了 TortoiseHG 2.5 版。

首先，我想使用 TortoiseHG 将 .net 解决方案和该解决方案的整个结构（文件夹/文件等）传输到 Mercurial 源代码控件中。

问题

1.  谁能简单地告诉我如何将.net解决方案转移到源代码控制？

2.  我是否使用 Shell 扩展命令来创建存储库或 Tortoise 工作台？

我想开始使用和学习基本的基础知识，因为我大部分时间都在使用 Visual Studio 中的插件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T19:38:59.673

您可以从 UI 中执行您需要的操作。从[Mercurial 网页](https://www.mercurial-scm.org/)开始。

还有很好的入门资源：[重新教育自己的版本控制](http://hginit.com/)。

# python - python：将字符串的一部分分配给变量

> ID：12501657
> 
> 赞同：1
> 
> 时间：2012-09-19T19:36:23.013
> 
> 标签：python, string, beautifulsoup

我需要一些帮助来学习像程序员一样思考。

我正在使用 beautifulsoup4 来获取内容。我想要在 ap 标签中包含三个字符串。前两个是子标签的字符串。第三个是 p 制表符的字符串。它看起来像这样：

```
<p>
<a href="some stuff">First String</a>
<br/>
<a href="some stuff">Second String</a>
<br/>
Third String
<br/>
unimportant fourth string
<br/>
</p> 
```

我想将每个字符串分配给它自己的变量，但我不知道如何将它们分开。似乎我应该能够分成几行然后分配每一行。我的代码目前如下所示：

```
events=body.find_all('p') #find all the p tags
for strings in events[3]: #get the first of the p tags i'm interested in
    if strings.string:
        all= str(strings.string).splitlines() #puts each string on its own line
        for line in all: #shouldn't I be able to get each line by its index?
            print line 
```

无论我尝试什么，我都会得到所有三行。我花了几个小时尝试不同的事情，我希望这里的人能告诉我正确的思考方式。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T23:01:31.100

```
variable = {} # a dictionary
variable_names = ['line-1', 'line-2', 'line-3', 'line-4']

events=body.find_all('p')
for strings in events[3]:
    if strings.string:
        all= str(strings.string).splitlines()
        for i,line in enumerate(all):
            variable[variable_names[i]] = line

        # test
        print variable['line-1'] 
```

# php - Wordpress 永久链接页面上的自定义查询字符串

> ID：12501660
> 
> 赞同：2
> 
> 时间：2012-09-19T19:36:29.767
> 
> 标签：php, wordpress, .htaccess, permalinks

我很难让这个工作......

基本上 - 我有一个网址

```
http://www.mysite.com/calendar-of-events 
```

我正在努力做到这一点，这样我就可以通过查询字符串传递月份和年份，例如

```
http://www.mysite.com/calendar-of-events?m=10&y=2012 
```

但是 - 每当我这样做时，我都会得到一个在 wordpress 中找不到的 404 页面

我不确定如何配置重写以允许这样的 url 并允许我访问那些查询字符串值

我真的很感谢你在这方面的指导！！

罗兰

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-26T12:40:55.037

您在查询字符串中使用“m”。悬停，'m' 是一个保留的 Wordpress 查询变量，你可以在这里看到： [wp codex](http://codex.wordpress.org/WordPress_Query_Vars)

我不确定 'm' 是做什么用的，但是像你正在做的那样在查询字符串中使用它会在`$wp_query->request`. 结果可能不是您所期望的。

编辑：您还应该在查询字符串的开头添加一个“/”，如下所示：

```
http://www.mysite.com/calendar-of-events/?m=10&y=2012 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T19:43:06.497

wordpress 插件在这里[http://wordpress.org/plugins/qstring-parameter/](http://wordpress.org/plugins/qstring-parameter/)。我在本地测试了它，它确实有效。

# ruby-on-rails - 在 Rails 或 postgresql 中通过电子邮件查找多个用户

> ID：12501664
> 
> 赞同：1
> 
> 时间：2012-09-19T19:36:38.947
> 
> 标签：ruby-on-rails

我正在尝试一次更新多个用户属性。Rails 有没有办法通过电子邮件找到多个用户？例如 User.find_by_email(joe@example.com, tom@example.com) 我在 heroku 控制台中写了这个，但它不起作用。我知道在 Rails 中，find 方法接受一组数字作为我希望电子邮件相同的 id。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-19T19:42:44.697

rails 3 中的正确语法是这样的：

```
User.where(:email => ["joe@example.com", "tom@example.com"]) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-19T19:40:00.390

`User.find_all_by_email( ["joe@example.com", "tom@example.com"] )`

# java - MongoDB 模式 Java Spring

> ID：12501665
> 
> 赞同：1
> 
> 时间：2012-09-19T19:36:44.267
> 
> 标签：java, spring, mongodb, schema

我知道 MongoDB 没有架构。我在互联网上看过，但找不到任何东西。

基本上有一个用于 Java Spring MongoDB 的 API。有什么方法可以在 Spring 之上为 MongoDB 定义模式，以便可以控制模式。我什么也找不到。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T03:10:49.227

你应该看看[Morphia](http://code.google.com/p/morphia/)和[Spring Data MongoDB](http://static.springsource.org/spring-data/data-mongodb/docs/current/reference/html/)。它们都是帮助您与 MongoDB 交互的库。

这是[Morphia、Mongo4j 和 Spring Data 之间的比较](https://stackoverflow.com/questions/5837135/how-do-morphia-mongo4j-and-spring-data-for-mongodb-compare)。

# css - 父脱节文本翻转中的两个独立文本翻转

> ID：12501667
> 
> 赞同：0
> 
> 时间：2012-09-19T19:36:54.710
> 
> 标签：css, rollover

我有一个文本翻转，其中一个地址块出现在翻转上。地址块本身有两个独立的翻转链路。在这里（为了简化，我隔离了相关的顶部菜单）。请滚动“联系人”菜单以了解我的意思：

[这是示例页面](http://raphaelzwyer.com/testRapha/indierollovertest.html)

电子邮件链接工作正常，但我不知道如何使电话链接独立于电子邮件链接，以便如果您翻转电子邮件链接，它会将您引导到您的电子邮件浏览器，如果您翻转电话线，它会拨打相应的电话号码（带有 href="tel:917-650...." 等）。如果我在各自的段落标签中都有两个链接，则联系人翻转不再起作用。看起来链接标签需要包裹在地址块周围以进行接触翻转工作，嵌套链接也不是解决方案。我该如何解决？

的HTML：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<title>raphaelzwyer</title>
<link href="css/raphaelzwyer.css" type="text/css" media="screen" title="raphaelzwyer stylesheet" rel="stylesheet" charset="utf-8"/>
<script type="text/javascript" src="js/raphaelzwyerFive.js"></script>
</head>

<body onload="MM_preloadImages('images/menubg_b.png','images/th_att_b.png','images/th_bmw_b.png','images/th_directv_b.png','images/th_giostra_b.png')">

<div id="container">

    <div id="topmenu">
        <ul id="menulist">
            <li class="menubuttonactive"><a href="portfolio.html">portfolio</a></li>
            <li class="buttonspaces"><img src="images/spacer.png" width="68" height="36" alt="spacer" /></li>
            <li class="menubuttons"><a href="about.html">about</a></li>
            <li class="buttonspaces"><img src="images/spacer.png" width="12" height="36" alt="spacer" /></li>
            <li class="menubuttons"><a href="downloads/raphael_zwyer_CV.pdf" target="_new">resume</a></li>
            <li class="buttonspaces"><img src="images/spacer.png" width="180" height="36" alt="spacer" /></li>
            <li id="contactrollover">
                <div class="menubuttons">
                    <a href="mailto:info@raphaelzwyer.com" target="_new">contact
                        <span id="addressbox">
                                <p id="email">info@raphaelzwyer.com</p>
                                <p id="phone">917-650-9534</p>
                                <p id="address">143 leonard street, apartment 5, brooklyn ny 11206</p>
                        </span>
                     </a>
                 </div> <!-- end of menubuttons -->
          </li> <!-- end of contactrollover --> 
        </ul> <!-- end of menulist --> 
      </div> <!-- end of topmenu --> 
    </div>  <!-- end of header --> 
</body>
</html> 
```

相关的CSS：

```
.menubuttons {
        position: relative;
        top: 0px;
        width: 100px;
        height: 36px;
        background-image: url("../images/menubg.png");
        background-repeat: repeat-x;
        padding-top: 10px;
        float: left;}
.menubuttons:hover {
        position: relative;
        top: 0px;
        width: 100px;
        height: 36px;
        background-image: url("../images/menubg_h.png");
        background-repeat: repeat-x;
        padding-top: 10px;
        float: left;}
.menubuttonactive {
        position :relative;
        top: 0px;
        width: 100px;
        height: 36px;
        background-image: url("../images/menubg_a.png");
        background-repeat: repeat-x;
        padding-top: 10px;
        float: left;}
.menubuttonactive a {
        color: #be1f2d;}
.buttonspaces {
        height: 36px;
        list-style: none;
        float: left;}
#contactrollover {
        position: relative;
        top: 0px;
        margin-bottom: -36px;
        width: 100px;
        left: 0px;
        float: left;}
#contactrollover div {
        width: 100px;
        height: 50px;
        float: left;}
#contactrollover a span {
        display: none;}
#contactrollover a {
        display: block;}
#contactrollover a:hover span {
        display: block;
        position: absolute;
        top: 0px;
        left: -560px;
        padding-right: 12px;}
#addressbox {
        position: absolute;
        top: 0px;
        width: 548px;
        left: 212px;
        height: 60px;
        background-image: url("../images/menubg.png");
        background-repeat: repeat-x;
        padding-top: 10px;
        letter-spacing: 0.062em;
        text-align: right;
        float: left;
        z-index: 800;
        color: #a9a9a9;
        background-color: white;}
#addressbox:hover {
        float: left;
        z-index: 900;}
#phone:hover, #email:hover {
        color: #be1f2d;}
#address {
        position: relative;
        width: 548px;;
        height: 22px;
        float: left;
        z-index: 900;
        color: #a9a9a9;} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T19:46:58.317

您将所有内容都包含在您的电子邮件链接中。试试这个 -[**演示**](http://jsfiddle.net/qq5jJ/)

***HTML***

```
<li id="contactrollover">
    <div class="menubuttons">
        <a href="mailto:info@raphaelzwyer.com" target="_new">contact</a>
        <span id="addressbox">
            <p id="email"><a href="mailto:info@raphaelzwyer.com" target="_new">info@raphaelzwyer.com</a></p>
            <p id="phone"><a href="tel:917-650-9534" target="_new">917-650-9534</a></p>
            <p id="address">143 leonard street, apartment 5, brooklyn ny 11206</p>
        </span>
    </div> <!-- end of menubuttons -->
</li> <!-- end of contactrollover --> 
```

***CSS***

```
#contactrollover a+span {
    display: none;
}
#contactrollover a {
    display: block;
}
#contactrollover a:hover+span,
#contactrollover span:hover {
    display: block;
    position: absolute;
    top: 0px;
    left: -560px;
    padding-right: 12px;
} 
```

# ruby-on-rails - 在 Heroku 上运行的 Rails 应用程序上运行夜间报告的最佳方式

> ID：12501674
> 
> 赞同：1
> 
> 时间：2012-09-19T19:37:20.747
> 
> 标签：ruby-on-rails, heroku, report, cron-task

我有一个在 Heroku 上运行的 Rails 应用程序。

我想，每个午夜，在我的数据库上运行一些查询（我可以使用 ActiveRecord 或 SQL 来完成，而不是繁琐），对结果进行一些简单的处理，然后发送带有数据的格式化电子邮件（内联或附件 CSV）。

最好的方法是什么？在本地，我可以安排一个 cron 作业来运行脚本，我不确定 Heroku。我读到 heroku 有一个 cron 插件，但找不到它，而且我不确定那里有什么可用的功能。我可以对 Rails 控制台进行无头连接并获得输出吗？我可以将其作为 rake 任务执行吗？

任何信息，将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-19T21:22:11.113

提到的 [Heroku Scheduler 插件] 是进行调度的好方法。

```
class Report
   def self.generate_and_send
      # Your logic here
   end
end

# To run task in Terminal
$ heroku run rails runner Report.generate_and_send

# What to schedule on Heroku Scheduler
  rails runner Report.generate_and_send 
```

# spring - 如何将自定义密码编码器添加到 Spring Security？

> ID：12501678
> 
> 赞同：1
> 
> 时间：2012-09-19T19:37:32.567
> 
> 标签：spring, spring-security

我正在尝试将 Web 项目转换为 Spring。我已经合并了 Spring Security，但是旧项目使用 SHA-1 转换为十六进制字符串来加密用户密码。

我想知道如何制作一个自定义密码编码器，它可以让我准确指定我希望如何加密密码。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-29T08:32:29.137

你可以直接使用这个。构造函数参数是 SHA 编码器的强度

```
<beans:bean id="passwordEncoder"
    class="org.springframework.security.authentication.encoding.ShaPasswordEncoder">
    <beans:constructor-arg index="0" value="1" />
</beans:bean> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-19T19:50:12.800

当然，您可能不需要自定义编码器，因为使用 Security 的命名空间配置非常容易[`<password-encoder>`](http://static.springsource.org/spring-security/site/docs/3.1.x/reference/springsecurity-single.html#nsa-password-encoder)：

```
<password-encoder hash="sha" base64="true" /> 
```

将此行放入您的 security-context.xml 中，它将[`ShaPasswordEncoder`](http://static.springsource.org/spring-security/site/docs/3.1.x/apidocs/org/springframework/security/authentication/encoding/ShaPasswordEncoder.html)与 SHA-1 算法和启用的 BASE64 编码一起使用。

# django - Django 表单获取更改的字段

> ID：12501682
> 
> 赞同：2
> 
> 时间：2012-09-19T19:37:54.803
> 
> 标签：django, django-forms

我想查看更改的数据，如果有任何字段更改，我想将其邮寄到管理员电子邮件。

这是我的代码：

```
def send_change_email(changed_data, cleaned_data, merchant):
    changed_stuff = {}
    for key in changed_data:
        changed_stuff[key] = cleaned_data[key]
    rendered = render_to_string('model_change.txt', {'changed_stuff':changed_stuff, 'merchant':merchant })
    send_mail('Model Change!', rendered, 'no-reply@mysite.com', ['hi@test.com'])    

class FooForm(forms.Form):
    field_1 = forms.CharField()
    field_2 = forms.CharField()

    def clean(self): # Here I test if any field is changed, if so, mail to them
        if self.is_valid() and self.changed_data:
            send_change_email(self.changed_data, self.cleaned_data, None)
        return self.cleaned_data 
```

问题是，当我尝试`self.changed_data`. 我该如何克服这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T07:34:23.160

也许你可以试试这个[片段](http://djangosnippets.org/snippets/2290/)，如果你的问题仍然存在，你可能在初始化或提交表单时遇到问题。

# c# - 索引超出数组范围：用户代码未处理 IndexOutOfRangeException

> ID：12501685
> 
> 赞同：1
> 
> 时间：2012-09-19T19:38:00.023
> 
> 标签：c#, arrays

我今天似乎失去了它。谁能帮我找到我在这里做错了什么：

```
1\. for (int y = 0; y < 5; y++)
2\. {
3\.      IDataReader getLineInfo = DB.GetRS("Select LineText From TIF Where SCRID ='" + scRID + "' AND LineNum='" + y + "'");
4\.      if (getLineInfo.Read())
5\.      {
6\.            string[] lineText = new string[y];
7\.            lineText[y] = (string)getLineInfo["LineText"];
8.
9\.            ((Label)item.FindControl(string.Format("lbl{0}", y))).Text = "<a href='" + lineText[y] + "' target='_blank'> Link</a>";
10\.     }
11\.     getLineInfo.Dispose();
12\.     getLineInfo.Close();
13\. } 
```

我在第 9 行得到错误。我最初的 'y' 从 1 开始，因为没有 lineNum == 0 .. 但我认为由于数组以 0 开头，所以我在那里搞砸了。但这并没有解决我的问题。如果有人可以帮助我了解我不是什么，将不胜感激。此页面上也没有用户输入，因为我知道使用 select 语句的整个 IDataReader 可能很糟糕。

如果需要任何其他信息，我可以写进去，感谢任何可以提供帮助的人

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-19T19:40:06.297

```
string[] lineText = new string[y];  // array 0 .. y-1
lineText[y] = ...;                  // y = 1 element too far 
```

此外，`lineText`在循环内本地创建，您可以简单地替换`string[] lineText`为`string lineText`并忘记`y`.

如果您认为需要`y`，则此代码中还有其他错误/缺失。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-19T19:43:56.787

为什么不只使用字符串而不是字符串数组？

```
string lineText = (string)getLineInfo["LineText"];

((Label)item.FindControl(string.Format("lbl{0}", y))).Text = "<a href='" lineText + "' target='_blank'> Link</a>"; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-19T19:42:40.243

有充分的理由吗

```
string[] lineText = new string[y]; 
```

在循环内？`

而且，如果您分配一个“y”元素数组，那么访问索引“y”处的元素势必会引发异常。在“y”元素的数组中，最后一个元素位于索引“y-1”处（从 0 开始）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-19T19:40:15.157

你需要像这样声明你的数组

```
 string[] lineText = new string[y+1]; 
```

# android - 用作 Google v3 地图缩略图的静态图像

> ID：12501687
> 
> 赞同：1
> 
> 时间：2012-09-19T19:38:00.100
> 
> 标签：android, google-maps-api-3, android-gridview

我正在填充我想成为 google v3 地图“快照”的位置的网格视图。当用户单击网格的单元格时，我想在 web 视图中打开交互式地图。知道如何让静态图像填充网格视图吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T20:18:53.973

使用[Google 静态地图 API](https://developers.google.com/maps/documentation/imageapis/)。它提供了一个静态图像（带有一些基本的叠加层）。然后，您可以将图像链接到您的完整地图。

# android - 我可以将 Android 应用程序转换为 iOS 应用程序吗？

> ID：12501689
> 
> 赞同：-3
> 
> 时间：2012-09-19T19:38:25.173
> 
> 标签：android, objective-c

我听说 j2objc 存在。我可以将我的 Android 应用程序转换为 iOS 应用程序吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T19:40:50.473

不，从[j2objc 项目页面](https://code.google.com/p/j2objc/)：

> 目标是用 Java 编写应用程序的非 UI 代码（例如数据访问或应用程序逻辑）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T19:40:58.763

您是否阅读了他们对 j2objc[是什么和不是](http://code.google.com/p/j2objc/)什么的解释？它允许您将 java 集成到 ObjectiveC 应用程序中，但它并不是一个独立/跨平台的 UI 工具包。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-19T19:41:38.347

不，你不能。你必须重写它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-19T19:40:32.737

试试看这个[http://google-opensource.blogspot.com/](http://google-opensource.blogspot.com/)

# wpf - 将相同类型视图模型的列表绑定到 Caliburn.Micro 中的选项卡控件

> ID：12501691
> 
> 赞同：2
> 
> 时间：2012-09-19T19:38:29.407
> 
> 标签：wpf, c#-4.0, mvvm, wpf-controls, caliburn.micro

我无法将 ViewModel 列表作为项目绑定到选项卡控件。

```
//ShellViewModel.cs
private BindableCollection<RecentUnitViewModel> RecentUnitModels { get; set; } 
```

```
<!-- ShellView.xaml -->
<GroupBox FontSize="16" Margin="10" FontWeight="DemiBold" Grid.Row="3">
    <GroupBox.Header>Last Seen</GroupBox.Header>
    <TabControl ItemsSource="{Binding RecentUnitModels}" >
    </TabControl>
</GroupBox> 
```

意外结果：显示类型“RecentUnitViewModel”而不是视图。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-19T20:11:59.883

[如果您有一个按约定绑定的导体](http://caliburnmicro.codeplex.com/wikipage?title=Screens,%20Conductors%20and%20Composition&referringTitle=Documentation)（将 DataContext 设置为导体实例并将 TabControl 命名为“项目”），则 TabControl 的 Caliburn 绑定是最简单的。这里的问题是 TabControl 实例化了一个共享的内容呈现器通过所有选项卡，但您需要以某种方式告诉 Caliburn.Micro 在更改内容时为 ViewModel 找到视图。我发现这很好用：

```
 <TabControl.ContentTemplate>
            <DataTemplate>
                <ContentControl cal:View.Model="{Binding}"/>
            </DataTemplate>
        </TabControl.ContentTemplate> 
```

我在这里假设您要绑定的 ViewModel 是真正的 ViewModel（不是 UserControl），并且您有 Caliburn.Micro 为您绑定的单独的 View（UserControl）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T19:41:44.250

您的财产需要公开...

# google-chrome-extension - Chrome 扩展在控制台中抛出错误

> ID：12501693
> 
> 赞同：7
> 
> 时间：2012-09-19T19:38:56.240
> 
> 标签：google-chrome-extension

我的内容脚本向 background.js 发送消息。在响应的回调处理程序中，我将最后一行作为`"alert(alrt_msg)"`. 执行代码后，我收到警告框，但单击“确定”后，chrome 控制台显示为红色：

```
Error in event handler for 'undefined': Cannot call method 'disconnect' of null TypeError: Cannot call method 'disconnect' of null
    at chromeHidden.Port.sendMessageImpl (miscellaneous_bindings:285:14)
    at chrome.Event.dispatch (event_bindings:237:41)
    at Object.chromeHidden.Port.dispatchOnMessage (miscellaneous_bindings:250:22) 
```

它提供的信息不多，但直觉上我知道这个错误是因为用户单击“确定”时某处的某些结构被垃圾收集。所以我把我的代码作为

`window.setTimeout(function() { alert(alrt_msg); } , 1);`

这使它在没有上述错误的情况下工作。尽管如此，在搜索文档或谷歌之后，我还是找不到这背后的确切原因。有人可以解释发生了什么以及文档是否包含执行此操作的特定方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-15T03:15:35.660

我遇到了同样的问题。这是由于在响应处理程序中调用的函数中的错误（我的代码的错误）。

这是我的代码：

在 background.js - 监听端

```
chrome.runtime.onMessage.addListener(
  function(request, sender, sendResponse) {
    var update_msg = 'test';
    sendResponse({data: update_msg});
    return false; // -> Add this or not add this do not matter
  });
} 
```

在发送方：

```
function updateObjDatabase(obj) {
  chrome.runtime.sendMessage({data: obj}, function(response) {
    // Update when it's done
    update_msg_handler(response.data);
  });
}

function update_msg_handler(msg) {
  ..... error code here
} 
```

错误的代码实际上在函数中`update_msg_handler`。但是 Chrome 控制台不会告诉你这些细节。如果您没有 IDE，则必须添加一些 console.log 进行调试。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-11-15T13:32:17.097

我有同样的错误。这是 iMacros 应用程序。我删除后没有错误。

# java - 提交不能在里面工作

> ID：12501700
> 
> 赞同：1
> 
> 时间：2012-09-19T19:39:16.677
> 
> 标签：java, jsf, jpa, jsf-2

我正在尝试评论从数据库中检索到的状态。每当我提交特定状态的评论时，我都会收到异常。我曾经`<ui:repeat>`重复命令按钮。我不知道commandButton 是否可以放在里面`<ui:repeat>`。如果有人能指出我的错误，那将非常有帮助。

当我使用 dataTable 而不是 ui:repeat 时，我遇到了完全相同的问题。问题是多个 commandButton 可能会被触发。如果我使用 dataTable ，假设数据表中有一个 inputText 和一个 commandButton ，并且重复了四次。因此，每当我单击与 inputText 关联的第一个 commandButton 时，都会出现四次异常，注释不能为空。所以我假设 commandButton 被触发了四次。但是，如果我单击第四个 commandButton 一切正常，注释字段将被插入到数据库中。

1）这是我的xhtml

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:p="http://primefaces.org/ui">

<h:head></h:head>

<h:body>
    <ui:repeat var="p" value="#{statusBean.statusList}">
    <li>
    <h:form>
    <h:outputText value="#{p.statusId}-#{p.statusmsg}"/><br/>
    <h:inputText value="#{statusBean.comment.comment}"/><h:commandButton value="comment" action="${statusBean.update(p.statusId)}"/>
    </h:form>
    </li>
    </ui:repeat>
</h:body>
</html> 
```

2）这里是statusBean

```
package com.bean;

import java.util.List;

import javax.faces.context.FacesContext;
import javax.persistence.EntityManager;
import javax.persistence.EntityManagerFactory;
import javax.persistence.Persistence;
import javax.persistence.Query;
import javax.servlet.http.HttpSession;

import com.entity.Album;
import com.entity.Comment;
import com.entity.Status;
import com.entity.User;

public class StatusBean {
    Comment comment;
    Status status;
    private EntityManager em;

    public Comment getComment() {
        return comment;
    }

    public void setComment(Comment comment) {
        this.comment = comment;
    }

    public Status getStatus() {
        return status;
    }

    public void setStatus(Status status) {
        this.status = status;
    }

    public StatusBean(){
        comment = new Comment();
        status=new Status();
        EntityManagerFactory emf=Persistence.createEntityManagerFactory("FreeBird");
         em =emf.createEntityManager();
    }

    public String save(){
        FacesContext context = FacesContext.getCurrentInstance();
        HttpSession session = (HttpSession) context.getExternalContext().getSession(true);
        User user = (User) session.getAttribute("userdet");
        status.setEmail(user.getEmail());
        System.out.println("status save called");
        em.getTransaction().begin();
        em.persist(status);
        em.getTransaction().commit();
        return "success";
    }
    public List<Status> getStatusList(){
        FacesContext context = FacesContext.getCurrentInstance();
        HttpSession session = (HttpSession) context.getExternalContext().getSession(true);
        User user=(User) session.getAttribute("userdet");
        Query query = em.createQuery("SELECT s FROM Status s WHERE s.email='"+user.getEmail()+"'", Status.class);
              List<Status> results =query.getResultList();
              return results;

    }
    public String update(String statusId){
        System.out.println("Update Called...");
        comment.setStatusId(Integer.parseInt(statusId));
        em.getTransaction().begin();
        em.persist(comment);
        em.getTransaction().commit();

        return "success";

    }
} 
```

3）这里是评论实体类

```
package com.entity;

import java.io.Serializable;
import javax.persistence.*;

/**
 * The persistent class for the comment database table.
 * 
 */
@Entity
public class Comment implements Serializable {
    private static final long serialVersionUID = 1L;

    @Id
    private int commentId;

    private String comment;

    private int statusId;

    public Comment() {
    }

    public int getCommentId() {
        return this.commentId;
    }

    public void setCommentId(int commentId) {
        this.commentId = commentId;
    }

    public String getComment() {
        return this.comment;
    }

    public void setComment(String comment) {
        this.comment = comment;
    }

    public int getStatusId() {
        return this.statusId;
    }

    public void setStatusId(int statusId) {
        this.statusId = statusId;
    }

} 
```

4）这是我得到的堆栈跟踪

```
INFO: [EL Warning]: 2012-09-20 01:02:13.945--UnitOfWork(19270851)--Exception [EclipseLink-4002] (Eclipse Persistence Services - 2.3.2.v20111125-r10461): org.eclipse.persistence.exceptions.DatabaseException
Internal Exception: com.mysql.jdbc.exceptions.jdbc4.MySQLIntegrityConstraintViolationException: Column 'comment' cannot be null
Error Code: 1048
Call: INSERT INTO COMMENT (COMMENTID, COMMENT, STATUSID) VALUES (?, ?, ?)
    bind => [3 parameters bound]
Query: InsertObjectQuery(com.entity.Comment@1432634)

WARNING: ${statusBean.update(p.statusId)}: javax.persistence.RollbackException: Exception [EclipseLink-4002] (Eclipse Persistence Services - 2.3.2.v20111125-r10461): org.eclipse.persistence.exceptions.DatabaseException
Internal Exception: com.mysql.jdbc.exceptions.jdbc4.MySQLIntegrityConstraintViolationException: Column 'comment' cannot be null
Error Code: 1048
Call: INSERT INTO COMMENT (COMMENTID, COMMENT, STATUSID) VALUES (?, ?, ?)
    bind => [3 parameters bound]
Query: InsertObjectQuery(com.entity.Comment@1432634)
javax.faces.FacesException: ${statusBean.update(p.statusId)}: javax.persistence.RollbackException: Exception [EclipseLink-4002] (Eclipse Persistence Services - 2.3.2.v20111125-r10461): org.eclipse.persistence.exceptions.DatabaseException
Internal Exception: com.mysql.jdbc.exceptions.jdbc4.MySQLIntegrityConstraintViolationException: Column 'comment' cannot be null
Error Code: 1048
Call: INSERT INTO COMMENT (COMMENTID, COMMENT, STATUSID) VALUES (?, ?, ?)
    bind => [3 parameters bound]
Query: InsertObjectQuery(com.entity.Comment@1432634)
    at com.sun.faces.application.ActionListenerImpl.processAction(ActionListenerImpl.java:118)
    at javax.faces.component.UICommand.broadcast(UICommand.java:315)
    at com.sun.faces.facelets.component.UIRepeat.broadcast(UIRepeat.java:921)
    at javax.faces.component.UIViewRoot.broadcastEvents(UIViewRoot.java:794)
    at javax.faces.component.UIViewRoot.processApplication(UIViewRoot.java:1259)
    at com.sun.faces.lifecycle.InvokeApplicationPhase.execute(InvokeApplicationPhase.java:81)
    at com.sun.faces.lifecycle.Phase.doPhase(Phase.java:101)
    at com.sun.faces.lifecycle.LifecycleImpl.execute(LifecycleImpl.java:118)
    at javax.faces.webapp.FacesServlet.service(FacesServlet.java:593)
    at org.apache.catalina.core.StandardWrapper.service(StandardWrapper.java:1550)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:343)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:217)
    at org.primefaces.webapp.filter.FileUploadFilter.doFilter(FileUploadFilter.java:79)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:256)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:217)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:279)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:175)
    at org.apache.catalina.core.StandardPipeline.doInvoke(StandardPipeline.java:655)
    at org.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java:595)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:161)
    at org.apache.catalina.connector.CoyoteAdapter.doService(CoyoteAdapter.java:331)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:231)
    at com.sun.enterprise.v3.services.impl.ContainerMapper$AdapterCallable.call(ContainerMapper.java:317)
    at com.sun.enterprise.v3.services.impl.ContainerMapper.service(ContainerMapper.java:195)
    at com.sun.grizzly.http.ProcessorTask.invokeAdapter(ProcessorTask.java:860)
    at com.sun.grizzly.http.ProcessorTask.doProcess(ProcessorTask.java:757)
    at com.sun.grizzly.http.ProcessorTask.process(ProcessorTask.java:1056)
    at com.sun.grizzly.http.DefaultProtocolFilter.execute(DefaultProtocolFilter.java:229)
    at com.sun.grizzly.DefaultProtocolChain.executeProtocolFilter(DefaultProtocolChain.java:137)
    at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:104)
    at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:90)
    at com.sun.grizzly.http.HttpProtocolChain.execute(HttpProtocolChain.java:79)
    at com.sun.grizzly.ProtocolChainContextTask.doCall(ProtocolChainContextTask.java:54)
    at com.sun.grizzly.SelectionKeyContextTask.call(SelectionKeyContextTask.java:59)
    at com.sun.grizzly.ContextTask.run(ContextTask.java:71)
    at com.sun.grizzly.util.AbstractThreadPool$Worker.doWork(AbstractThreadPool.java:532)
    at com.sun.grizzly.util.AbstractThreadPool$Worker.run(AbstractThreadPool.java:513)
    at java.lang.Thread.run(Thread.java:722)
Caused by: javax.faces.el.EvaluationException: javax.persistence.RollbackException: Exception [EclipseLink-4002] (Eclipse Persistence Services - 2.3.2.v20111125-r10461): org.eclipse.persistence.exceptions.DatabaseException
Internal Exception: com.mysql.jdbc.exceptions.jdbc4.MySQLIntegrityConstraintViolationException: Column 'comment' cannot be null
Error Code: 1048
Call: INSERT INTO COMMENT (COMMENTID, COMMENT, STATUSID) VALUES (?, ?, ?)
    bind => [3 parameters bound]
Query: InsertObjectQuery(com.entity.Comment@1432634)
    at javax.faces.component.MethodBindingMethodExpressionAdapter.invoke(MethodBindingMethodExpressionAdapter.java:102)
    at com.sun.faces.application.ActionListenerImpl.processAction(ActionListenerImpl.java:102)
    ... 37 more
Caused by: javax.persistence.RollbackException: Exception [EclipseLink-4002] (Eclipse Persistence Services - 2.3.2.v20111125-r10461): org.eclipse.persistence.exceptions.DatabaseException
Internal Exception: com.mysql.jdbc.exceptions.jdbc4.MySQLIntegrityConstraintViolationException: Column 'comment' cannot be null
Error Code: 1048
Call: INSERT INTO COMMENT (COMMENTID, COMMENT, STATUSID) VALUES (?, ?, ?)
    bind => [3 parameters bound]
Query: InsertObjectQuery(com.entity.Comment@1432634)
    at org.eclipse.persistence.internal.jpa.transaction.EntityTransactionImpl.commitInternal(EntityTransactionImpl.java:102)
    at org.eclipse.persistence.internal.jpa.transaction.EntityTransactionImpl.commit(EntityTransactionImpl.java:63)
    at com.bean.StatusBean.update(StatusBean.java:70)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at javax.el.BeanELResolver.invokeMethod(BeanELResolver.java:779)
    at javax.el.BeanELResolver.invoke(BeanELResolver.java:528)
    at javax.el.CompositeELResolver.invoke(CompositeELResolver.java:257)
    at com.sun.el.parser.AstValue.invoke(AstValue.java:248)
    at com.sun.el.MethodExpressionImpl.invoke(MethodExpressionImpl.java:302)
    at com.sun.faces.facelets.el.TagMethodExpression.invoke(TagMethodExpression.java:105)
    at javax.faces.component.MethodBindingMethodExpressionAdapter.invoke(MethodBindingMethodExpressionAdapter.java:88)
    ... 38 more
Caused by: Exception [EclipseLink-4002] (Eclipse Persistence Services - 2.3.2.v20111125-r10461): org.eclipse.persistence.exceptions.DatabaseException
Internal Exception: com.mysql.jdbc.exceptions.jdbc4.MySQLIntegrityConstraintViolationException: Column 'comment' cannot be null
Error Code: 1048
Call: INSERT INTO COMMENT (COMMENTID, COMMENT, STATUSID) VALUES (?, ?, ?)
    bind => [3 parameters bound]
Query: InsertObjectQuery(com.entity.Comment@1432634)
    at org.eclipse.persistence.exceptions.DatabaseException.sqlException(DatabaseException.java:324)
    at org.eclipse.persistence.internal.databaseaccess.DatabaseAccessor.executeDirectNoSelect(DatabaseAccessor.java:840)
    at org.eclipse.persistence.internal.databaseaccess.DatabaseAccessor.executeNoSelect(DatabaseAccessor.java:906)
    at org.eclipse.persistence.internal.databaseaccess.DatabaseAccessor.basicExecuteCall(DatabaseAccessor.java:592)
    at org.eclipse.persistence.internal.databaseaccess.DatabaseAccessor.executeCall(DatabaseAccessor.java:535)
    at org.eclipse.persistence.internal.sessions.AbstractSession.basicExecuteCall(AbstractSession.java:1717)
    at org.eclipse.persistence.sessions.server.ClientSession.executeCall(ClientSession.java:253)
    at org.eclipse.persistence.internal.queries.DatasourceCallQueryMechanism.executeCall(DatasourceCallQueryMechanism.java:207)
    at org.eclipse.persistence.internal.queries.DatasourceCallQueryMechanism.executeCall(DatasourceCallQueryMechanism.java:193)
    at org.eclipse.persistence.internal.queries.DatasourceCallQueryMechanism.insertObject(DatasourceCallQueryMechanism.java:342)
    at org.eclipse.persistence.internal.queries.StatementQueryMechanism.insertObject(StatementQueryMechanism.java:162)
    at org.eclipse.persistence.internal.queries.StatementQueryMechanism.insertObject(StatementQueryMechanism.java:177)
    at org.eclipse.persistence.internal.queries.DatabaseQueryMechanism.insertObjectForWrite(DatabaseQueryMechanism.java:472)
    at org.eclipse.persistence.queries.InsertObjectQuery.executeCommit(InsertObjectQuery.java:80)
    at org.eclipse.persistence.queries.InsertObjectQuery.executeCommitWithChangeSet(InsertObjectQuery.java:90)
    at org.eclipse.persistence.internal.queries.DatabaseQueryMechanism.executeWriteWithChangeSet(DatabaseQueryMechanism.java:287)
    at org.eclipse.persistence.queries.WriteObjectQuery.executeDatabaseQuery(WriteObjectQuery.java:58)
    at org.eclipse.persistence.queries.DatabaseQuery.execute(DatabaseQuery.java:844)
    at org.eclipse.persistence.queries.DatabaseQuery.executeInUnitOfWork(DatabaseQuery.java:743)
    at org.eclipse.persistence.queries.ObjectLevelModifyQuery.executeInUnitOfWorkObjectLevelModifyQuery(ObjectLevelModifyQuery.java:108)
    at org.eclipse.persistence.queries.ObjectLevelModifyQuery.executeInUnitOfWork(ObjectLevelModifyQuery.java:85)
    at org.eclipse.persistence.internal.sessions.UnitOfWorkImpl.internalExecuteQuery(UnitOfWorkImpl.java:2871)
    at org.eclipse.persistence.internal.sessions.AbstractSession.executeQuery(AbstractSession.java:1516)
    at org.eclipse.persistence.internal.sessions.AbstractSession.executeQuery(AbstractSession.java:1498)
    at org.eclipse.persistence.internal.sessions.AbstractSession.executeQuery(AbstractSession.java:1449)
    at org.eclipse.persistence.internal.sessions.CommitManager.commitNewObjectsForClassWithChangeSet(CommitManager.java:224)
    at org.eclipse.persistence.internal.sessions.CommitManager.commitAllObjectsWithChangeSet(CommitManager.java:123)
    at org.eclipse.persistence.internal.sessions.AbstractSession.writeAllObjectsWithChangeSet(AbstractSession.java:3799)
    at org.eclipse.persistence.internal.sessions.UnitOfWorkImpl.commitToDatabase(UnitOfWorkImpl.java:1415)
    at org.eclipse.persistence.internal.sessions.RepeatableWriteUnitOfWork.commitToDatabase(RepeatableWriteUnitOfWork.java:636)
    at org.eclipse.persistence.internal.sessions.UnitOfWorkImpl.commitToDatabaseWithChangeSet(UnitOfWorkImpl.java:1505)
    at org.eclipse.persistence.internal.sessions.RepeatableWriteUnitOfWork.commitRootUnitOfWork(RepeatableWriteUnitOfWork.java:267)
    at org.eclipse.persistence.internal.sessions.UnitOfWorkImpl.commitAndResume(UnitOfWorkImpl.java:1143)
    at org.eclipse.persistence.internal.jpa.transaction.EntityTransactionImpl.commitInternal(EntityTransactionImpl.java:84)
    ... 51 more
Caused by: com.mysql.jdbc.exceptions.jdbc4.MySQLIntegrityConstraintViolationException: Column 'comment' cannot be null
    at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
    at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:57)
    at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)
    at java.lang.reflect.Constructor.newInstance(Constructor.java:525)
    at com.mysql.jdbc.Util.handleNewInstance(Util.java:411)
    at com.mysql.jdbc.Util.getInstance(Util.java:386)
    at com.mysql.jdbc.SQLError.createSQLException(SQLError.java:1039)
    at com.mysql.jdbc.MysqlIO.checkErrorPacket(MysqlIO.java:4096)
    at com.mysql.jdbc.MysqlIO.checkErrorPacket(MysqlIO.java:4028)
    at com.mysql.jdbc.MysqlIO.sendCommand(MysqlIO.java:2490)
    at com.mysql.jdbc.MysqlIO.sqlQueryDirect(MysqlIO.java:2651)
    at com.mysql.jdbc.ConnectionImpl.execSQL(ConnectionImpl.java:2683)
    at com.mysql.jdbc.PreparedStatement.executeInternal(PreparedStatement.java:2144)
    at com.mysql.jdbc.PreparedStatement.executeUpdate(PreparedStatement.java:2444)
    at com.mysql.jdbc.PreparedStatement.executeUpdate(PreparedStatement.java:2362)
    at com.mysql.jdbc.PreparedStatement.executeUpdate(PreparedStatement.java:2347)
    at org.eclipse.persistence.internal.databaseaccess.DatabaseAccessor.executeDirectNoSelect(DatabaseAccessor.java:831)
    ... 83 more

WARNING: StandardWrapperValve[Faces Servlet]: PWC1406: Servlet.service() for servlet Faces Servlet threw exception
com.mysql.jdbc.exceptions.jdbc4.MySQLIntegrityConstraintViolationException: Column 'comment' cannot be null
    at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
    at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:57)
    at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)
    at java.lang.reflect.Constructor.newInstance(Constructor.java:525)
    at com.mysql.jdbc.Util.handleNewInstance(Util.java:411)
    at com.mysql.jdbc.Util.getInstance(Util.java:386)
    at com.mysql.jdbc.SQLError.createSQLException(SQLError.java:1039)
    at com.mysql.jdbc.MysqlIO.checkErrorPacket(MysqlIO.java:4096)
    at com.mysql.jdbc.MysqlIO.checkErrorPacket(MysqlIO.java:4028)
    at com.mysql.jdbc.MysqlIO.sendCommand(MysqlIO.java:2490)
    at com.mysql.jdbc.MysqlIO.sqlQueryDirect(MysqlIO.java:2651)
    at com.mysql.jdbc.ConnectionImpl.execSQL(ConnectionImpl.java:2683)
    at com.mysql.jdbc.PreparedStatement.executeInternal(PreparedStatement.java:2144)
    at com.mysql.jdbc.PreparedStatement.executeUpdate(PreparedStatement.java:2444)
    at com.mysql.jdbc.PreparedStatement.executeUpdate(PreparedStatement.java:2362)
    at com.mysql.jdbc.PreparedStatement.executeUpdate(PreparedStatement.java:2347)
    at org.eclipse.persistence.internal.databaseaccess.DatabaseAccessor.executeDirectNoSelect(DatabaseAccessor.java:831)
    at org.eclipse.persistence.internal.databaseaccess.DatabaseAccessor.executeNoSelect(DatabaseAccessor.java:906)
    at org.eclipse.persistence.internal.databaseaccess.DatabaseAccessor.basicExecuteCall(DatabaseAccessor.java:592)
    at org.eclipse.persistence.internal.databaseaccess.DatabaseAccessor.executeCall(DatabaseAccessor.java:535)
    at org.eclipse.persistence.internal.sessions.AbstractSession.basicExecuteCall(AbstractSession.java:1717)
    at org.eclipse.persistence.sessions.server.ClientSession.executeCall(ClientSession.java:253)
    at org.eclipse.persistence.internal.queries.DatasourceCallQueryMechanism.executeCall(DatasourceCallQueryMechanism.java:207)
    at org.eclipse.persistence.internal.queries.DatasourceCallQueryMechanism.executeCall(DatasourceCallQueryMechanism.java:193)
    at org.eclipse.persistence.internal.queries.DatasourceCallQueryMechanism.insertObject(DatasourceCallQueryMechanism.java:342)
    at org.eclipse.persistence.internal.queries.StatementQueryMechanism.insertObject(StatementQueryMechanism.java:162)
    at org.eclipse.persistence.internal.queries.StatementQueryMechanism.insertObject(StatementQueryMechanism.java:177)
    at org.eclipse.persistence.internal.queries.DatabaseQueryMechanism.insertObjectForWrite(DatabaseQueryMechanism.java:472)
    at org.eclipse.persistence.queries.InsertObjectQuery.executeCommit(InsertObjectQuery.java:80)
    at org.eclipse.persistence.queries.InsertObjectQuery.executeCommitWithChangeSet(InsertObjectQuery.java:90)
    at org.eclipse.persistence.internal.queries.DatabaseQueryMechanism.executeWriteWithChangeSet(DatabaseQueryMechanism.java:287)
    at org.eclipse.persistence.queries.WriteObjectQuery.executeDatabaseQuery(WriteObjectQuery.java:58)
    at org.eclipse.persistence.queries.DatabaseQuery.execute(DatabaseQuery.java:844)
    at org.eclipse.persistence.queries.DatabaseQuery.executeInUnitOfWork(DatabaseQuery.java:743)
    at org.eclipse.persistence.queries.ObjectLevelModifyQuery.executeInUnitOfWorkObjectLevelModifyQuery(ObjectLevelModifyQuery.java:108)
    at org.eclipse.persistence.queries.ObjectLevelModifyQuery.executeInUnitOfWork(ObjectLevelModifyQuery.java:85)
    at org.eclipse.persistence.internal.sessions.UnitOfWorkImpl.internalExecuteQuery(UnitOfWorkImpl.java:2871)
    at org.eclipse.persistence.internal.sessions.AbstractSession.executeQuery(AbstractSession.java:1516)
    at org.eclipse.persistence.internal.sessions.AbstractSession.executeQuery(AbstractSession.java:1498)
    at org.eclipse.persistence.internal.sessions.AbstractSession.executeQuery(AbstractSession.java:1449)
    at org.eclipse.persistence.internal.sessions.CommitManager.commitNewObjectsForClassWithChangeSet(CommitManager.java:224)
    at org.eclipse.persistence.internal.sessions.CommitManager.commitAllObjectsWithChangeSet(CommitManager.java:123)
    at org.eclipse.persistence.internal.sessions.AbstractSession.writeAllObjectsWithChangeSet(AbstractSession.java:3799)
    at org.eclipse.persistence.internal.sessions.UnitOfWorkImpl.commitToDatabase(UnitOfWorkImpl.java:1415)
    at org.eclipse.persistence.internal.sessions.RepeatableWriteUnitOfWork.commitToDatabase(RepeatableWriteUnitOfWork.java:636)
    at org.eclipse.persistence.internal.sessions.UnitOfWorkImpl.commitToDatabaseWithChangeSet(UnitOfWorkImpl.java:1505)
    at org.eclipse.persistence.internal.sessions.RepeatableWriteUnitOfWork.commitRootUnitOfWork(RepeatableWriteUnitOfWork.java:267)
    at org.eclipse.persistence.internal.sessions.UnitOfWorkImpl.commitAndResume(UnitOfWorkImpl.java:1143)
    at org.eclipse.persistence.internal.jpa.transaction.EntityTransactionImpl.commitInternal(EntityTransactionImpl.java:84)
    at org.eclipse.persistence.internal.jpa.transaction.EntityTransactionImpl.commit(EntityTransactionImpl.java:63)
    at com.bean.StatusBean.update(StatusBean.java:70)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at javax.el.BeanELResolver.invokeMethod(BeanELResolver.java:779)
    at javax.el.BeanELResolver.invoke(BeanELResolver.java:528)
    at javax.el.CompositeELResolver.invoke(CompositeELResolver.java:257)
    at com.sun.el.parser.AstValue.invoke(AstValue.java:248)
    at com.sun.el.MethodExpressionImpl.invoke(MethodExpressionImpl.java:302)
    at com.sun.faces.facelets.el.TagMethodExpression.invoke(TagMethodExpression.java:105)
    at javax.faces.component.MethodBindingMethodExpressionAdapter.invoke(MethodBindingMethodExpressionAdapter.java:88)
    at com.sun.faces.application.ActionListenerImpl.processAction(ActionListenerImpl.java:102)
    at javax.faces.component.UICommand.broadcast(UICommand.java:315)
    at com.sun.faces.facelets.component.UIRepeat.broadcast(UIRepeat.java:921)
    at javax.faces.component.UIViewRoot.broadcastEvents(UIViewRoot.java:794)
    at javax.faces.component.UIViewRoot.processApplication(UIViewRoot.java:1259)
    at com.sun.faces.lifecycle.InvokeApplicationPhase.execute(InvokeApplicationPhase.java:81)
    at com.sun.faces.lifecycle.Phase.doPhase(Phase.java:101)
    at com.sun.faces.lifecycle.LifecycleImpl.execute(LifecycleImpl.java:118)
    at javax.faces.webapp.FacesServlet.service(FacesServlet.java:593)
    at org.apache.catalina.core.StandardWrapper.service(StandardWrapper.java:1550)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:343)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:217)
    at org.primefaces.webapp.filter.FileUploadFilter.doFilter(FileUploadFilter.java:79)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:256)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:217)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:279)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:175)
    at org.apache.catalina.core.StandardPipeline.doInvoke(StandardPipeline.java:655)
    at org.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java:595)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:161)
    at org.apache.catalina.connector.CoyoteAdapter.doService(CoyoteAdapter.java:331)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:231)
    at com.sun.enterprise.v3.services.impl.ContainerMapper$AdapterCallable.call(ContainerMapper.java:317)
    at com.sun.enterprise.v3.services.impl.ContainerMapper.service(ContainerMapper.java:195)
    at com.sun.grizzly.http.ProcessorTask.invokeAdapter(ProcessorTask.java:860)
    at com.sun.grizzly.http.ProcessorTask.doProcess(ProcessorTask.java:757)
    at com.sun.grizzly.http.ProcessorTask.process(ProcessorTask.java:1056)
    at com.sun.grizzly.http.DefaultProtocolFilter.execute(DefaultProtocolFilter.java:229)
    at com.sun.grizzly.DefaultProtocolChain.executeProtocolFilter(DefaultProtocolChain.java:137)
    at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:104)
    at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:90)
    at com.sun.grizzly.http.HttpProtocolChain.execute(HttpProtocolChain.java:79)
    at com.sun.grizzly.ProtocolChainContextTask.doCall(ProtocolChainContextTask.java:54)
    at com.sun.grizzly.SelectionKeyContextTask.call(SelectionKeyContextTask.java:59)
    at com.sun.grizzly.ContextTask.run(ContextTask.java:71)
    at com.sun.grizzly.util.AbstractThreadPool$Worker.doWork(AbstractThreadPool.java:532)
    at com.sun.grizzly.util.AbstractThreadPool$Worker.run(AbstractThreadPool.java:513)
    at java.lang.Thread.run(Thread.java:722) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T19:43:47.303

从查看您的堆栈跟踪来看，它似乎与重复标记内的命令按钮无关，而是与您的数据库调用错误有关。

您正在尝试将数据插入到列不能为空的表中。检查以确保您正在尝试插入您认为正在插入的数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-13T15:34:15.950

您的情况似乎确实有问题`ui:repeat`。这可能会导致输入字段和/或按钮的重复渲染 ID。

因此，首先您应该检查渲染的 id 对于输入字段和/或按钮是否是唯一的。如果所有四个按钮的 id 都相同，这就解释了为什么 action 方法被调用了四次。这也可以解释为什么第四个按钮的工作原理是第四个输入字段的值是最后一个并且总是“获胜”。

你可以尝试几件事来解决这个问题：

1.  搬出. `h:form`_ `ui:repeat`您只需要一个表格，多个表格可能是个问题（也是 ID 方面的）。
2.  看来您在 Glassfish 上使用 Mojarra，不是吗？尝试升级 Mojarra，我认为他们在这方面存在一些问题。

# rest - 使用带有基本身份验证的 Fiddler 访问 RESTful WebAPI

> ID：12501701
> 
> 赞同：72
> 
> 时间：2012-09-19T19:39:19.563
> 
> 标签：rest, asp.net-web-api, fiddler

我有一个可以正常工作的 WebAPI。我已经在本地测试并部署到我的服务器并在 IIS 中配置此服务以使用基本身份验证。我能够浏览到我的服务，并且收到了我期望的身份验证挑战，并且一切正常！现在我想使用 Fiddler 来测试这个，我已经构建了一个到特定 url 的 POST，我得到了一个 401 (Unauthorized) 错误。所以我决定在我的请求标头中添加一个 base64 字符串，我现在收到 500 错误。

我想知道的是，我的请求标头看起来正确吗？我显然会混淆我的 Host 和 base64 字符串，其中包含格式 username:password 用于身份验证质询。

```
User-Agent: Fiddler
Host: xxx.xxx.xxx.xxx:xxxx
Content-Length: 185
Content-Type: text/json
Authorization: Basic jskadjfhlksadjhdflkjhiu9813ryiu34 
```

* * *

## 回答 #1

> 赞同：140
> 
> 时间：2012-09-19T21:43:30.363

Fiddler 有一个为您执行 Base64 的工具。只需创建您的字符串：username:password，然后转到 Tools -> TextWizard 并输入用户名密码组合并选择 ToBase64。将其复制并粘贴到您的授权标题中，您应该一切顺利。

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2014-10-27T09:21:06.443

亚历克斯加德是对的。创建 ToBase64 编码后，在编写请求时在标题下添加以下行：

`Authorization: Basic [encoded_value]`

现在执行请求，它应该可以工作了！:)

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2017-09-08T15:06:46.640

如果您在 Composer URL 字段中指定用户名和密码，较新版本的 Fiddler（我在 v4.6.20172.31233 中测试）将*自动*`Authorization`为您创建并添加必要的标头，如下所示：

 *```
https://SomeUser:SomePass@sitename 
```

执行后，这会将其从 URL 中剥离出来并变成一个 HTTP 标头，例如：

```
Authorization: Basic U29tZVVzZXI6U29tZVBhc3M= 
```

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2016-02-06T02:54:43.833

我知道这是一篇较旧的帖子，但是当我第一次查看如何执行此操作时，我遇到了这篇帖子并知道这是答案，但我仍然不知道凭据是否需要以逗号分隔等。所以，以防万一这可能对这里的某人有所帮助，这是我为 Fiddler 整理的 JSON POST 笔记。

```
First you need to Base64 encode your "username:password"
    • Go to Tools | Text Wizard | To Base64 in dropdown

Post a message in the Composer tab
    • Change the type to POST in the dropdown.
    • Put in the URL
    • Add the following to the top header section.
        ○ Authorization: Basic ReplaceWithYourEncodedCredtials=
        ○ Content-Type: application/json; charset=utf-8
    • Add some JSON content to the body
        ○ [{"Address1":null,"Address2":null,"BirthDate":"1967-10-06T00:00:00","City":null,"CompanyHireDate":"2011-06-03T00:00:00","EmailAddress":"myEmail@company.com","EmployeeNumber":"112233","FirstName":"JOHN","LastName":"DOE","PhoneNumber":null,"State":null,"UserName":"JDoe","ZipCode":null}] 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-11-23T11:35:41.843

我希望这可以帮助像我这样的新手。

如果您使用 GET，则在令牌周围使用**[ ]**将不起作用。

以下没有工作： -

```
Authorization: Basic [MkgzczhaVnhZNG13d1FkTVJ2ZmZMQzFQQnhZRG5WdUVhbDNiVWs0ZldDdzo=] 
```

以下工作： -

```
Authorization: Basic MkgzczhaVnhZNG13d1FkTVJ2ZmZMQzFQQnhZRG5WdUVhbDNiVWs0ZldDdzo= 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2017-12-08T16:08:10.103

我发现在 Fiddler 4 中，我所要做的就是检查规则菜单上的自动验证选项。*

# vb.net - 如何强制特定的过载？

> ID：12501702
> 
> 赞同：0
> 
> 时间：2012-09-19T19:39:19.807
> 
> 标签：vb.net, overloading

我正在使用二进制编写器，我想将 0 写入文件，我正在做：

_writer.Write(0)

但是当我希望它执行字节时，它正在向文件写入一个整数，不只是将字节变量声明为0，正确的方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T19:43:23.953

`_writer.Write(CByte(0))`应该做的伎俩。

# jquery - jQuery Ajax 和 HTML 回调

> ID：12501704
> 
> 赞同：0
> 
> 时间：2012-09-19T19:39:27.520
> 
> 标签：jquery, html, ajax, callback

我有这段代码，当点击链接时执行：

```
$.get(file.html, function(data) {           
  $('selector_1').html($(data).find('selector_2').html());
}); 
```

我想以这样的方式修改代码，当我点击一个链接时，`$.get`命令在`selector_1`淡出时运行，而当我的 HTML`selector_1`放置 HTML 时，它又淡入。

如何才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T19:42:24.640

假设`selector_1`和`selector_2`只是一个示例，请尝试以下使用`fadeOut`回调的代码。

```
$('selector_1').fadeOut(300, function() {        
    $.get(file.html, function(data) {
        $('selector_1')
            .html($(data).find('selector_2').html())
            .fadeIn();
    });    
}); 
```

另请注意，`$.get`被包裹在`fadeOut`回调中，因此过渡是完美的。

> 这也是我想到的解决方案，但问题是`$.get`命令是在淡出之后发送的，而不是同时发送的——我希望`$.get`命令立即执行。

见下文。

```
$('selector_1').fadeOut(300);
$.get(file.html, function(data) {
    $('selector_1')
      .html($(data).find('selector_2').html())
      .fadeIn();
}); 
```

# javascript - Remove character from image name

> ID：12501705
> 
> 赞同：1
> 
> 时间：2012-09-19T19:39:27.940
> 
> 标签：javascript, jquery

I am trying to remove part of the name of the image to create thumbnails.

The image name is created dynamically ie HG57JWY_0.jpg, HG57JWY_1.jpg, HG57JWY_2.jpg. I managed to remove the .jpg using:

```
var imageName = $('#slider1 li img').prop('src').match(/(\w*)\.\w{3,4}$/)[1]; 
```

My problem is that i cant figure how to remove the "_0"

```
return '<img src="sample-img/'+ imageName +'_' + [i -+ 1] + '.jpg">'; 
```

this generates HG57JWY_0_0.jpg

Any ideas how i do that?

Edit: Forgot to mention that big image and the thumb are in different folder. So i display the big image in one place holder with the src = [http://mydomain.com/sample-img/imagename.jpg](http://mydomain.com/sample-img/imagename.jpg)

and i place the thumbs in a list with the src = [http://mydomain.com/sample-img-thumb/imagename.jpg](http://mydomain.com/sample-img-thumb/imagename.jpg)

Edit 2:

Thanks to Alexander, i used my original code

```
 var imageName = $('#slider1 li img').prop('src').match(/(\w*)\.\w{3,4}$/)[1]; 
```

and added his .split("_")[0]

```
var imageName = $('#slider1 li img').prop('src').match(/(\w*)\.\w{3,4}$/)[1].split("_")[0]; 
```

This takes the whole image src ie `http://mydomain/imageFolder/image_1.jpg`, and returns just the "image".

Then i was able to use what ever path i want with

```
return '<img src="sample-img/'+ imageName +'_' + [i -+ 1] + '.jpg">'; 
```

and just changed the sample-img/ with what i needed.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-19T19:42:26.653

Use [`split`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/String/split).

```
var imageName = $('#slider1 li img').prop('src').split("_")[0]; 
```

**UPDATE**

You could use `split` in your match:

```
var imageName = $('#slider1 li img').prop('src')
                                    .match(/(\w*)\.\w{3,4}$/)[1]
                                    .split("_")[0]; 
```

Or, modifying your regular expression (as shown also in [Dave Rager](https://stackoverflow.com/users/416627)'s answer) to exclude the matching of the pattern `_number`:

```
var imageName = $('#slider1 li img').prop('src').match(/(\w+)_\d+\.\w{3,4}$/)[1] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T19:42:51.163

If the image name guaranteed to contain "_x" then try:

```
var imageName = $('#slider1 li img').prop('src').match(/(\w*)_\d+\.\w{3,4}$/)[1]; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-19T19:42:58.373

```
$('#slider1 li img').prop('src', function(i, value) {
    return value.substr(0, value.indexOf('_'));
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-19T19:44:01.160

```
var imageName = $('#slider1 li img').prop('src').match(/(\w*)(_[0-9]+)\.\w{3,4}$/)[1]; 
```

# visual-studio-2010 - 防止签入并限制 TFS 分支的合并

> ID：12501711
> 
> 赞同：11
> 
> 时间：2012-09-19T19:39:51.380
> 
> 标签：visual-studio-2010, tfs

在我的环境中，我们有 Dev、Main 和 Production 分支。我们还有业务和架构团队。我想要达到的目标如下：

1.  两个团队都可以为开发做出贡献
2.  业务团队只能阅读 Main 和 Production
3.  架构团队只能合并到 Main 和 Production

目前，两个团队都是团队项目贡献者组的成员。

* * *

最终解决方案：

1.  在收藏级别创建了一个名为 Promo Officers 的组
2.  将架构团队添加到新组
3.  将 Promo 组添加到集合级别的权限（在 Source Control Explorer 中右键单击集合，选择属性并单击权限
4.  授予促销人员阅读、签出、签入、标签、管理员标签、合并和管理分支机构权限
5.  关闭主分支和生产分支的继承安全性。
6.  将贡献者的权限设置为只读。

注意：您不能拒绝贡献者不需要的权限，因为如果用户同时处于贡献者和促销官中，则拒绝优先，他们将没有正确的权限。其次，我无法实现仅允许合并到 Main 和 Production 的目标，因为您需要签入和签出权限才能进行合并。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-09-19T20:29:09.487

如果您在源代码管理资源管理器中右键单击文件夹并转到属性 -> 安全性，您可以将权限管理到文件夹/分支级别。

# visualization - 数据流可视化

> ID：12501715
> 
> 赞同：1
> 
> 时间：2012-09-19T19:40:06.427
> 
> 标签：visualization

有人可以推荐一个库，该库将提供基于交互式网络的数据流可视化。我有 x 个节点，流线连接它们。我需要一种动态创建流程图的方法，该方法能够单击节点和线条以显示信息。

任何输入表示赞赏，谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T09:55:51.667

请参阅[http://neyric.github.com/wireit/docs/](http://neyric.github.com/wireit/docs/)：

> WireIt 是一个开源 javascript 库，用于为数据流应用程序、可视化编程语言、图形建模或图形编辑器创建全 Web 图形编辑器。

# opengl - 如何将球中心的更新值传递到我的片段着色器中？

> ID：12501716
> 
> 赞同：0
> 
> 时间：2012-09-19T19:40:10.473
> 
> 标签：opengl

这是我的主要、顶点和片段着色器。我非常接近让这个工作。我的片段着色器需要根据我的 update_balls 函数更新的中心计算 f。我不知道该怎么做。

```
#include "Angel.h"
#include <assert.h>
#include <vector>

using namespace std;

typedef Angel::vec4 vec4_t;
typedef Angel::vec3 vec3_t;
typedef Angel::vec2 vec2_t;

// the data structure of a 2D ball
typedef struct {
    vec2_t center;
    float radius;
    float currentTime;
    vec2_t velocity;
    vec2_t vertices[4];
    vec4_t color;   
} ball_t;

// the boundary
typedef enum {
    LEFT, RIGHT, TOP, BOTTOM, NONE
} boundary_t;

//the number of balls
int theNumBalls = 0;

//the ball array using the STL vector
vector<ball_t> theBalls;

//the program object
GLuint theProgram = 0;

//the minimal and maximal radiuses
const float theMinRadius = 0.05;
const float theMaxRadius = 0.5;

//the window size
const int   theWinWidth = 512;
const int   theWinHeight = 512;

//the time interval for advecting balls
const float theTimeInterval = 0.005;

//create a new 2D ball where the center is (x, y) and the radius
ball_t new_ball(float x, float y, float radius)
{
    ball_t ball;

    ball.center = vec2_t(x, y);
    ball.radius = radius;

    ball.vertices[0] = vec2_t(ball.center.x - ball.radius, ball.center.y - ball.radius);
    ball.vertices[1] = vec2_t(ball.center.x + ball.radius, ball.center.y - ball.radius);
    ball.vertices[2] = vec2_t(ball.center.x + ball.radius, ball.center.y + ball.radius);
    ball.vertices[3] = vec2_t(ball.center.x - ball.radius, ball.center.y + ball.radius);

    //random color
    ball.color = vec4_t((float)rand()/RAND_MAX, (float)rand()/RAND_MAX, (float)rand()/RAND_MAX, 1.0f);

    //random velocity
    ball.velocity = normalize(vec2(((float)rand()/RAND_MAX) - 0.5f, ((float)rand()/RAND_MAX) - 0.5f));

    return ball;
}

//return the boundary edge if collision
boundary_t collision_boundary(ball_t &ball)
{
    return NONE;
}

void renderBitmapString(float x, float y, void *font, string str) 
{
  glRasterPos2f(x,y);
  for (string::iterator c = (&str)->begin(); c != (&str)->end(); ++c) 
  {
    glutBitmapCharacter(font, *c);
  }
}

 // update the position or size of the balls
void update_balls()
{

    //change the size of a new ball if pressing the left button

    //or advect the ball according to the ball's velocity
    //string a ("UpdateBallsTest");
    //renderBitmapString(20, 20, GLUT_BITMAP_TIMES_ROMAN_24, a);

    for (int i = 0; i < theNumBalls; i++) {

    theBalls[i].center = vec2_t(theBalls[i].center.x + theBalls[i].velocity.x * theTimeInterval, theBalls[i].center.y + theBalls[i].velocity.y * theTimeInterval);

    //assign the uniform center
    GLuint nCenter = glGetUniformLocation(theProgram, "vCenter");
    glUniform2f(nCenter, theBalls[i].center.x, theBalls[i].center.y);
        theBalls[i].vertices[0] =  vec2_t(theBalls[i].vertices[0].x + (theBalls[i].velocity.x * theTimeInterval), theBalls[i].vertices[0].y + (theBalls[i].velocity.y * theTimeInterval));
        theBalls[i].vertices[1] =  vec2_t(theBalls[i].vertices[1].x + (theBalls[i].velocity.x * theTimeInterval), theBalls[i].vertices[1].y + (theBalls[i].velocity.y * theTimeInterval));
        theBalls[i].vertices[2] =  vec2_t(theBalls[i].vertices[2].x + (theBalls[i].velocity.x * theTimeInterval), theBalls[i].vertices[2].y + (theBalls[i].velocity.y * theTimeInterval));
        theBalls[i].vertices[3] =  vec2_t(theBalls[i].vertices[3].x + (theBalls[i].velocity.x * theTimeInterval), theBalls[i].vertices[3].y + (theBalls[i].velocity.y * theTimeInterval));

    }
     //change the ball's velocity according to the return value of collision_boundary 
}

// OpenGL initialization
void init()
{
    //create a inital ball
    ball_t ball = new_ball(0, 0, 0.05);
    theBalls.push_back(ball);
    theNumBalls = theBalls.size();

    // Load shaders and use the resulting shader program
    theProgram = InitShader("vshader02.glsl", "fshader02.glsl");
    glUseProgram(theProgram);

    glEnable(GL_BLEND);
    glBlendFunc(GL_SRC_ALPHA, GL_ONE_MINUS_SRC_ALPHA);
    glClearColor( 1.0, 1.0, 1.0, 0.0 ); 
}

void mydisplay( void )
{
    update_balls();

    glClear( GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT);

    for (int i = 0; i < theNumBalls; i++) {

        //assign the uniform variabe color
        GLuint nColor = glGetUniformLocation(theProgram, "vColor");
        glUniform4f(nColor, theBalls[i].color.x, theBalls[i].color.y, theBalls[i].color.z, theBalls[i].color.w);

        //render the ball as a qaud
        GLuint nPosition = glGetAttribLocation(theProgram, "vPosition");

        glBegin(GL_QUADS);
        glVertexAttrib2fv(nPosition, theBalls[i].vertices[0]);
        glVertexAttrib2fv(nPosition, theBalls[i].vertices[1]);
        glVertexAttrib2fv(nPosition, theBalls[i].vertices[2]);
        glVertexAttrib2fv(nPosition, theBalls[i].vertices[3]);
        glEnd();
    }
    glutSwapBuffers();
    glFlush();
}

void mymouse(int button, int state, int x, int y)
{
    //create a new ball under the curret mouse position if pressing the left button
}

void myidle()
{
    glutPostRedisplay();
}

int
main( int argc, char **argv )
{
    glutInit( &argc, argv );
    glutInitDisplayMode(GLUT_RGBA | GLUT_DOUBLE);
    glutInitWindowSize(theWinWidth, theWinHeight);

    glutCreateWindow( "Derek Meyer 73379861" );

    glewInit();

    init();

    glutDisplayFunc(mydisplay);
    glutMouseFunc(mymouse);
    glutIdleFunc(myidle);

    glutMainLoop();
    return 0;
} 
```

```
/////////VSHADER

#version 150

in vec2 vPosition;
uniform vec2    vCenter;
out vec4 color;

void main() 
{
gl_Position = vec4(vCenter, 0.0, 1.0);
color = gl_Position;
} 
```

```
/////////// FSHADER

#version 150
uniform vec4    vColor;
uniform vec2    vCenter;

in vec4 color;

out vec4    FragColor;

void main() 
{ 
float f = sqrt(((color.x - vCenter.x) * (color.x - vCenter.x)) + ((color.y - vCenter.y)               * (color.y - vCenter.y)));     
if (f < 0.043)
    FragColor = vColor;
else if (f < 0.05)
    FragColor = vec4(0, 0, 0, 1);
else
    FragColor = vec4(0, 1, 0, 0);
} 
```

# sql - Joomla！SQL Query 不会在数据库中插入数据

> ID：12501718
> 
> 赞同：0
> 
> 时间：2012-09-19T19:40:15.297
> 
> 标签：sql, joomla, joomla2.5

我使用 Joomla 2.5，我正在尝试将数据插入我的数据库

这是我的代码

```
 $db =& JFactory::getDBO();
    $query = 
    "INSERT INTO '#__restaurantes' ('nombre', 'direccion', 'localizacion', 'cod_postal', 'telefono', 'web')
    VALUES ( JRequest::getCmd('restaurante'), JRequest::getCmd('direccion'), JRequest::getCmd('localizacion'), JRequest::getCmd('postal'), JRequest::getCmd('telefonoEmpresa'), JRequest::getCmd('web') )";
    $db->setQuery( $query );
    $db->query(); 
```

一切都很好，我没有任何错误，但它没有插入任何东西。

任何的想法？谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-20T00:16:44.980

当试图弄清楚你的 Joomla 出了什么问题时！代码要做的第一件事是将`Site->Global Configuration->Server`屏幕中的错误报告级别设置为`Maximum`（或者`Development`如果您没有安装任何会导致 Joomla 崩溃的扩展！在`Maximum`.

这不仅会报告更多错误及其详细信息，还会提供一个“调试控制台”，其中有一个名为“数据库查询”的部分，它将准确显示所有 SQL 查询发生的情况。

现在，在您提供的代码上：

1.  `$query`不会按照您构建它的方式工作，因为每个都将`JRequest()`被视为语法错误。
2.  有两种方法可以提取值，或者事先将它们存储在临时变量中，然后使用这些值，或者`$query`通过使用连接来构建查询来修复您的初始方法。

### 方法一

在 PHP 中，当您[将字符串用 " 双引号括起来](http://www.php.net/manual/en/language.types.string.php#language.types.string.syntax.double)时，该字符串将由 PHP 处理，并且任何变量或转义序列都会被替换。

```
$restaurante = JRequest::getCmd('restaurante');
$direccion = JRequest::getCmd('direccion');
$localizacion = JRequest::getCmd('localizacion');
$postal = JRequest::getCmd('postal');
$telefonoEmpresa = JRequest::getCmd('telefonoEmpresa');
$telefonoEmpresa = JRequest::getCmd('telefonoEmpresa');
$query = "INSERT INTO '#__restaurantes' ('nombre', 'direccion', 'localizacion', 'cod_postal', 'telefono', 'web') VALUES ( $restaurante, $direccion, $localizacion, $postal, $telefonoEmpresa, $web )";
$db->setQuery( $query ); 
```

### 方法二

要按您的方式使用`JRequest()`呼叫，您需要使用“。” （[连接运算符](http://php.net/manual/en/language.operators.string.php)）构建字符串并在线进行调用。

```
$query = "INSERT INTO '#__restaurantes' ('nombre', 'direccion', 'localizacion', 'cod_postal', 'telefono', 'web') VALUES ("
       . JRequest::getCmd('restaurante') . ", "
       . JRequest::getCmd('direccion') . ", "
       . JRequest::getCmd('localizacion') . ", "
       . JRequest::getCmd('postal') . ", "
       . JRequest::getCmd('telefonoEmpresa') . ", "
       . JRequest::getCmd('web'). " )"; 
```

### 您应该注意的事项：

1.  `JRequest`除非您尝试支持 Joomla，否则不应使用！1.5 和 2.5。您应该使用[`JInput()`](http://docs.joomla.org/Retrieving_request_data_using_JInput)- 阅读该链接以获取更多信息。
2.  您正在构建的查询是旧式字符串查询，并没有利用 JDatabases 抽象层，[您应该在此处阅读更多相关信息](http://www.theartofjoomla.com/home/9-developer/135-database-upgrades-in-joomla-16.html)。
3.  `JRequest::getCmd()`过滤所有值，并且只允许集合 [A-Za-z0-9.-_] 中的字符，因此将删除任何非 ascii 值。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-20T07:50:48.833

您需要在您的价值观周围加上引号：

```
$restaurante = JRequest::getCmd('restaurante');
$direccion = JRequest::getCmd('direccion');
$localizacion = JRequest::getCmd('localizacion');
$postal = JRequest::getCmd('postal');
$telefonoEmpresa = JRequest::getCmd('telefonoEmpresa');
$telefonoEmpresa = JRequest::getCmd('telefonoEmpresa');
$query = "INSERT INTO '#__restaurantes' ('nombre', 'direccion', 'localizacion', 'cod_postal', 'telefono', 'web') VALUES ( '$restaurante', '$direccion', '$localizacion', '$postal', '$telefonoEmpresa', '$web' )";
$db->setQuery( $query ); 
```

此外，您应该在查询后添加此代码以捕获任何错误：

```
if ($db->getErrorNum()) {
    JError::raiseError("Error", $db->stderr());
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-05-20T06:59:08.907

这也应该有效：

```
$data =new stdClass();
$data->id = null;
$data->field1 = 'val1';
$data->field2 = 'val2';
$data->field3 = 'val3';

$db = JFactory::getDBO();
$db->insertObject( '#__mytable', $data, id ); 
```

stdClass 是一个 php 基类，所有其他类都从该基类扩展而来。

'id' 是主键的名称。

# iphone - UIImagePickerController 获取压缩前的视频长度

> ID：12501738
> 
> 赞同：1
> 
> 时间：2012-09-19T19:41:58.097
> 
> 标签：iphone, ios, ios4, ios5

我需要在压缩发生之前获取视频长度，因为我需要将视频长度限制为最大时间间隔。当我点击一个视频时，压缩首先发生，然后它只调用 didFinishPickingMediaWithInfo。因此，如果它的视频文件较大，则没有必要让用户等待进行视频大小验证。在didFinishPickingMediaWithInfo 之前有没有办法做到这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T19:49:59.680

如果您让他们录制，您可以使用 限制视频捕获的长度`videoMaximumDuration`。

我相信它也适用于图书馆，但不确定。

# java-me - 在手机上运行时 J2ME 润色问题

> ID：12501741
> 
> 赞同：0
> 
> 时间：2012-09-19T19:42:15.293
> 
> 标签：java-me, arabic, j2mepolish

我用 j2me Polish 构建了一个应用程序，它在模拟器上运行良好，但在手机上安装后，我遇到了一些基本问题：

1.  首先为什么应用程序的大小很大（在我的情况下为 1.5 mb），有没有办法减少波兰应用程序的大小（我的资源只有 300 kb）。

与此级别的类似应用程序相比，某些手机的安装过程也需要很长时间。

1.  为了在手机上安装它，我从 dist 文件夹中复制了 jar 文件；我的方法正确吗？

2.  重要！：有些索尼爱立信手机的阿拉伯语单词是分离和反转的，我搜索了网络，但我只是找到了一些关于LWUIT的主题，我无法解决它！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T10:20:14.840

我想我通过帮助 Telmo Pimentel Mota 和 Lucifer 找到了第一个和第二个问题的答案。答案是：

```
 <obfuscator name="ProGuard" unless="test or polish.blackberry" >
                <parameter name="optimize" value="true" />
                <parameter name="optimizationpasses" value="3"/>                    
            </obfuscator> 
```

但第三个问题仍然存在。

# javascript - 将javascript变量放入播放功能

> ID：12501744
> 
> 赞同：1
> 
> 时间：2012-09-19T19:42:26.390
> 
> 标签：javascript, playframework, playframework-2.0

对于我的公共文件，我通常使用：

```
@routes.Assets.at("data/table.txt") 
```

在常规 html 中

但是，我有一个带有变量链接的 javascript

```
var file = "table.txt"//This changes depending on the code
var link = "data/"+ file; 
```

并想像这样运行一些jquery函数

```
$('#mydiv').CSVToTable(@routes.Assets.at(link)) 
```

但这不起作用。我的问题

1.  为什么 play 使用@routes.Assets.at？它在某种程度上更安全​​吗？它似乎只是在传递给它的任何东西前面加上“资产”。仅使用文本“/assets/data/table.txt”是否有缺点
2.  我如何将 javascript 变量传递到 @routes.Assets.at

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T20:08:32.470

1.  它更...舒服（谁来过？:)）只是当您使用资产的路线时，您可以切换即。CDN 之间的速度要快得多。如果您将硬编码的 URL 放置在任何地方，当您更改应用程序的位置时，您需要修复所有这些 URL。
2.  常见的 JavaScript 也有一些可能性，例如，您可以`write`将路由的值传递给 JS' `someSpecificRoute = '@routes.Assets.at(link)';`，然后在脚本中使用它

    ```
    $('#mydiv').CSVToTable(someSpecificRoute); 
    ```

    也许您也可以使用[javascriptRoutes](https://stackoverflow.com/questions/11133059/play-2-x-how-to-make-an-ajax-request-with-a-common-button/11133586#11133586)但是您需要自己决定。一般来说，当您计划使用它们不止一次或两次时，使用它是个好主意。

3.  最后，您可以使用硬编码路径和常见的 JavaScript 技术来发送额外的参数。在这种情况下，我只能建议，出于安全原因，最好验证传递的参数是否符合允许的类型和/或范围。

# c++ - `QGraphicsView`滚动后不调用`paint`方法

> ID：12501745
> 
> 赞同：1
> 
> 时间：2012-09-19T19:42:40.033
> 
> 标签：c++, qt, qgraphicsview, qgraphicsscene, qpainter

我有`QGraphicsItem`现场。`hoverEnterEvent`为这个项目重新实现。这是来自的代码`hoverEnterEvent`：

```
grabber = new agnt::A_CornerGrabber(A_CornerGrabber::TOP_RIGHT,this,8,3);
assert(grabber);
grabber->installSceneEventFilter(this);
update(boundingRect()); 
```

`A_CornerGrabber`是一个继承自的类`QGraphicsRectItem`。这个想法是当您悬停项目时会出现一个抓取器，以便您可以拖动它来调整主项目的大小。

在我滚动 graphicsview 之前它工作正常，所以第一项在视图中并不完整。在这个 hoverEnterEvent 仍然被调用之后，grabber ctor 仍然被调用，但是`grabber->paint()`方法不再被调用。这里是`grabber->paint()`：

```
 painter->setPen(Qt::NoPen);
    QRectF pRect  = parent->boundingRect();
    painter->drawRect(rect());
    setPos(pRect.bottomRight().x()-size-adjust,pRect.bottomRight().y()-size-adjust); 
```

这是为什么？

PS 在我对代码进行一些更改之前，一切都运行良好。不幸的是，我无法恢复旧代码，也无法理解究竟是什么被宠坏了`grabber->paint()`。

编辑：添加了 sceneEventFilter()

```
if(event->type()== 155)
{
    QGraphicsSceneMouseEvent* me = dynamic_cast<QGraphicsSceneMouseEvent*>(event);
    if(!me) return true;
    if(rect().adjusted(0,0,me->pos().x()-me->lastPos().x(),0).width()>xStep)
    {
        prepareGeometryChange();
        int relX = me->pos().x() - xOffset;
        int newRelX = me->lastPos().x() - xOffset;
        int steps = relX/xStep;
        int newSteps = newRelX/xStep;
        setWidth(getWidth()+xStep*(steps-newSteps));
        setInitialTime(QString::number(getTime().toInt()+(steps - newSteps) ) );// my func
    }
}
if(event->type()== 187)
{
    dynamic_cast<agnt::A_GntGV*>(scene()->views().at(0))->timeChanged(getT(),getId());
    //my func, has nothing to do with painting
}

if(event->type()==160||event->type()==162)
    return false;
return true; 
```

编辑 2：我认为 sceneEventFilter() 甚至无关紧要。如果我发表评论，问题仍然存在

```
//grabber->installSceneEventFilter(this); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-15T22:09:01.343

`paint()`未调用的一个原因是`boundingRect()`您的符号的函数没有返回正确的值。

尝试`boundingRect()`为您的项目重新定义功能。它必须返回一个`QRectF`.

# php - 从 MySQL 以编程方式从 URL 获取图像

> ID：12501757
> 
> 赞同：0
> 
> 时间：2012-09-19T19:43:44.347
> 
> 标签：php, mysql, image, url

我需要通过我从 MySQL 数据库中的几个字段创建的 url 获取图像。所以，我得到两个字段：“id”和“placeID”，我执行以下命令：

```
select concat('http://whatever.come?id=',
              cast(Votis.SequencialDoCandidato as char),
              '&placeID=',
              cast(IDUnidadeEleitoral as char))
from database.table; 
```

此 URL 指向图片。

所以我的问题是：'无论如何是否会自动插入此 URL 带入图像字段的图片？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T19:46:43.967

不，这是不可能的，无论如何这将是一个非常可怕的组合，因为检索 URL 不是您的数据库的工作。

# events - VBA - 通过用户定义的函数更新其他单元格

> ID：12501759
> 
> 赞同：4
> 
> 时间：2012-09-19T19:43:46.433
> 
> 标签：events, vba, excel, handlers

我在 VBA 中有一个 UDF（用户定义函数），需要修改 Excel 上的单元格范围。

由于 UDF 无法做到这一点，我尝试使用事件调用。

当我引发自定义事件并尝试写入单元格时，我收到 #Value 错误。另一方面，诸如 `Private Sub App_SheetChange(ByVal Sh As Object, ByVal Target As Range)`可以写入单元的应用程序事件。

我的问题是如何通过调用 UDF 来更新其他单元格？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-19T23:58:29.610

这是一种可以规避约束的方法，你必须间接地做到这一点。从 Excel 复制的方法[- 如何从用户定义的函数中填充单元格？](https://web.archive.org/web/20170511201404/http://www.excel-answers.com:80/microsoft/Excel/31583594/how-to-fill-cells-from-user-defined-function.aspx)：

在标准模块中：

```
Public triggger As Boolean
Public carryover As Variant
Function reallysimple(r As Range) As Variant
    triggger = True
    reallysimple = r.Value
    carryover = r.Value / 99
End Function 
```

在工作表代码中：

```
Private Sub Worksheet_Calculate()
    If Not triggger Then Exit Sub
    triggger = False
    Range("C1").Value = carryover
End Sub 
```

这可以根据您的目的进行扩展。本质上，UDF 会更新公共变量，然后从`Worksheet_Calculate`事件中读取这些变量以执行...任何您喜欢的操作。

另一种更复杂的方法是从您的函数中编写一个 vbscript 文件，该文件将尝试自动化 Excel 并通过 Shell 运行它。但是，我上面列出的方法要可靠得多。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-05-20T10:29:56.640

如果使用 UDF 函数中的方法调用其他函数，`Application.Evaluate`则可以更改工作表上的所有内容（值、钢等），因为 VBA 不知道调用了哪个函数。

例子：

```
Sub UDFfunction()
  Evaluate "otherfunc(""abc"")"
End Sub

Public Function otherfunc(ByVal str As String)
  ActiveSheet.Cells(1, 1).Value = str
End Function 
```

# python - 在Windows中将带有星号的多个文件传递给python shell

> ID：12501761
> 
> 赞同：18
> 
> 时间：2012-09-19T19:43:50.987
> 
> 标签：python, command-line, arguments

我正在学习 Google 的 Python 练习，我需要能够从命令行执行此操作：

```
python babynames.py --summaryfile baby*.html 
```

`python`Python shell在哪里，`babynames.py`是 Python 程序，是我的程序`--summaryfile`要解释的参数，是与该表达式匹配的文件列表。但是，它不起作用，我不确定问题是 Windows 命令 shell 还是 Python。该表达式没有扩展到完整的文件列表，而是严格作为字符串传递。可以以这种方式将多个文件传递给 Python 程序吗？`babynames``baby*.html``baby*.html`

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-09-19T19:49:54.140

在将通配符传递给执行的程序或脚本之前，Windows 的命令解释器不会像 UNIX shell 那样扩展通配符。

```
python.exe -c "import sys; print sys.argv[1:]" *.txt 
```

结果：

```
['*.txt'] 
```

解决方案：使用`glob`模块。

```
from glob import glob
from sys import argv

for filename in glob(argv[1]):
    print filename 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-09-19T19:52:24.523

跨平台：

```
import glob
if '*' in sys.argv[-1]:
     sys.argv[-1:] = glob.glob(sys.argv[-1])
continue... 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2018-01-10T15:35:18.053

使用 argparse：

```
import argparse
parser=argparse.ArgumentParser()
parser.add_argument(dest='wildcard',nargs='+')

print(parser.parse_args().wildcard) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-07-30T08:20:42.460

您可以从类似 UNIX 的 shell 中执行此操作，就在您所写的内容中。就我而言，Git Bash 完成了这项工作——它接受星号作为输入并正确处理它们。

# sql - SQL查询；水平到垂直

> ID：12501766
> 
> 赞同：7
> 
> 时间：2012-09-19T19:44:03.953
> 
> 标签：sql, sql-server, sql-server-2008, sql-server-2005, unpivot

我坚持使用涉及将水平行转换为垂直行的 SQL 查询（SQL Server）

下面是我的数据

```
No      Flag_1    Flag_2    Flag_3
---      ----      -----     -----
A         1         2         3
B         4         1         6 
```

转换后，表格应该是

```
No     FlagsName    Flag_value
--      ----        ----------
A        Flag_1        1
A        Flag_2        2  
A        Flag_3        3
B        Flag_1        4
B        Flag_2        1
B        Flag_3        6 
```

对此有任何意见会有帮助吗？

`ROW_NUMBER`我正在尝试在分区上玩耍。但它不工作！

谢谢 ！！！

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-09-19T19:49:42.797

您可以使用`UNION ALL`：

```
select No, 'Flag_1' as FlagName, Flag_1 as Flag_Value
from yourtable
union all
select No, 'Flag_2' as FlagName, Flag_2 as Flag_Value
from yourtable
union all
select No, 'Flag_3' as FlagName, Flag_3 as Flag_Value
from yourtable 
```

或者一个`UNPIVOT`：

```
select no, FlagsName, flag_value
from yourtable
unpivot
(
    flag_value
    for FlagsName in (Flag_1, Flag_2, Flag_3)
) u 
```

# 请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!3/7922d/3)

# c# - 如何在具有 ExpandoObject 类型的对象上应用扩展方法？

> ID：12501773
> 
> 赞同：2
> 
> 时间：2012-09-19T19:44:28.930
> 
> 标签：c#, extension-methods, expandoobject

这是我的代码：

```
public static class DynamicExtensions

    public static void Add(this ExpandoObject obj, string path){
        dynamic _obj = obj;
        if (_obj == null) throw new ArgumentNullException("obj");
        _obj.path = path;
    }
} 
```

但是当我以这种方式调用它时，我得到了“'System.Dynamic.ExpandoObject'不包含'Add'的定义”的错误：

```
dynamic obj = new ExpandoObject();
obj.Add("p1"); 
```

如何解决？

提前致谢！

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-19T19:47:45.010

问题在于使用`dynamic`扩展方法 - 两者不能一起使用。这会很好：

```
ExpandoObject obj = new ExpandoObject();
obj.Add("p1"); 
```

...但只是`dynamic`，没有扩展方法支持。

从 C# 5 规范的第 7.6.5.2 节：

> 在其中一种形式的方法调用（§7.5.5.1）中
> 
> ```
> expr . identifier ( )
> expr . identifier ( args )
> expr . identifier < typeargs > ( )
> expr . identifier < typeargs > ( args ) 
> ```
> 
> 如果调用的正常处理未找到适用的方法，则尝试将构造作为扩展方法调用进行处理。**如果 expr 或任何 args 具有编译时类型 dynamic，则扩展方法将不适用。**

虽然编译器*可以*记住`using`它必须检查以应用扩展方法的指令，但它只是没有 - 可能是出于性能原因，或者可能是因为它被认为是大量工作而收益相对较小。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-19T19:47:58.383

动态明确排除扩展方法。这是因为该方法是在运行时解析的，而不是编译时解析的。为了正确解析方法调用，DLR 需要有关调用的信息，包括哪些 using 指令有效；没有机制可以做到这一点。有关更多详细信息，请参阅 Eric Lippert 的此答案：[https ://stackoverflow.com/a/5313149/385844](https://stackoverflow.com/a/5313149/385844)

当然，您可以使用静态方法调用语法调用该方法：

```
DynamicExtensions.Add(obj, "p1"); 
```

# mongodb - 在 mongo 中查询嵌入集合

> ID：12501777
> 
> 赞同：1
> 
> 时间：2012-09-19T19:44:49.350
> 
> 标签：mongodb, mongoose

我想查询我的帖子集合中的所有项目以查找最新评论。目前每个帖子都有一个嵌入式评论集合，像这样

```
{ "_id" : ObjectId("4f84b8da6c33f31122000001"), "comments" :    
[{
        "uname" : "bargledoofus",
        "msg" : "hello hello hello",
        "_id" : ObjectId("4fe926fa811ec70100008888"),
        "date" : ISODate("2012-06-26T03:05:30Z")
    },
    {
        "uname" : "bargledoofus",
        "msg" : "moar hello",
        "_id" : ObjectId("4fe9272b2f1efb0100000078"),
        "date" : ISODate("2012-06-26T03:06:19Z")
    },
    {
        "uname" : "bargledoofus",
        "msg" : "most hello ever",
        "_id" : ObjectId("4fe92cfd7614c8010000002b"),
        "date" : ISODate("2012-06-26T03:31:09Z")
    },
    {
        "uname" : "bargledoofus",
        "msg" : "i think i've got it",
        "_id" : ObjectId("4fe92d04f4a35c010000000e"),
        "date" : ISODate("2012-06-26T03:31:16Z")
    }
]} 
```

如何查询帖子集合以获取最新评论、比某个日期时间更新的评论或评论属性（如comment.uname）？

我可以以某种方式使用 map reduce 来实现这一点吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T21:25:05.910

我不确定是否可以只返回当前模式的评论。但是您可以返回所有带有符合特定条件的评论的帖子。MongoDB 的 db.find() 匹配文档而不是嵌入文档。你可以做一个：

`db.posts.find({"comments.date":{$gt:<insert date object>}})`

它将返回所有评论包含大于指定日期的评论的所有帖子，但也会返回该帖子的其他评论。

您可能有几个选择：

*   更改架构以单独存储评论
*   查询具有与您的查询匹配的注释的所有文档并遍历查询中的相关注释

# wpf - 将 Listbox 的 itemsource 设置为单列 Datatable

> ID：12501779
> 
> 赞同：0
> 
> 时间：2012-09-19T19:44:54.923
> 
> 标签：wpf, listbox, datatable

我在以下函数中有一个单列数据表和一个列表框我试图将列表框项目源设置为数据表，但它将行显示为 System.Datarow

```
Private Sub setghostshopslistitemsource()
        GhostShopsList.Items.Clear()
        Dim con As New OleDbConnection("Provider=Microsoft.Jet.OLEDB.4.0;Data Source=" & mydocumentddir & "\Settings\Settings.mdb")
        GhostsDatatableda = New OleDbDataAdapter("Select Ghost From GhostsTable", con)
        GhostsDatatableda.Fill(GhostsDatatable)
        GhostShopsList.ItemsSource = GhostsDatatable.DefaultView
    End Sub 
```

那么最后一行有什么问题？数据表看起来像

鬼魂

文本1

文本2

文本 3。. .

我只想在列表框中显示每个文本

使用上面的函数列表框显示

System.Data.DataRow

System.Data.DataRow

System.Data.DataRow

.

.

.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T19:49:18.100

这些项目仍然是行，尝试将[`DisplayMemberPath`](http://msdn.microsoft.com/en-us/library/system.windows.controls.itemscontrol.displaymemberpath.aspx)to设置`"[0]"`为绑定到第一列值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T19:49:05.233

您需要指定行的显示方式。如果您只需要一个文本框，请编写如下内容：

```
<ListBox>
    <ListBox.ItemTemplate>
        <DataTemplate>
            <TextBlock Text="{Binding Ghost}" />
        </DataTemplate>
    </ListBox.ItemTemplate> 
</ListBox> 
```

# scapy - DNSRR 迭代

> ID：12501780
> 
> 赞同：6
> 
> 时间：2012-09-19T19:44:59.073
> 
> 标签：scapy

如果我使用 sr1 为 www.google.com 发送 DNSQR，我会收到几个 DNSRR(s) 作为回复，例如（使用 完成`ans[DNSRR].show()`）：

```
###[ DNS Resource Record ]###
   rrname= 'www.google.com.'
   type= A
   rclass= IN
   ttl= 294
   rdlen= 4
   rdata= '173.194.35.176'
###[ DNS Resource Record ]###
   rrname= 'www.google.com.'
   type= A
   rclass= IN
   ttl= 294
   rdlen= 4
   rdata= '173.194.35.178'
###[ DNS Resource Record ]###
   .... 
```

有没有一种巧妙的方法来迭代那些 DNSRR(s)？正如我使用正则表达式和以下代码一样：

```
def get_ip_addr(s):
    pattern = r'[0-9]+(?:\.[0-9]+){3}'
    match = re.search(pattern, s)
    if match:
        return match.group()
    return None    

def resolve_host(host, nserver):
    print "resolving host: " + host + " (using nserver: " + nserver + ")"
    dns_pkt = IP(dst=nserver)/UDP()/DNS(rd=1, qd=DNSQR(qname=host))
    ans = sr1(dns_pkt)
    if ans:
        print "IP(s) for %s:" % (host)
        dnsrr_strings = repr(ans[DNSRR]).split("|")
        for dnsrr in dnsrr_strings :
            ip_addr = get_ip_addr(dnsrr)
            if ip_addr:
                print " %s"  % ip_addr
    else:
        sys.stderr.write("unable to lookup " + host) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-05-23T02:31:12.777

如果我们使用 scapy 发送一个 dns 请求，我们可以得到如下的 dns 响应：

```
>>> dns.show()
###[ DNS ]###
id= 43223
qr= 1L
opcode= QUERY
aa= 0L
tc= 0L
rd= 1L
ra= 1L
z= 0L
rcode= ok
qdcount= 1
ancount= 3
nscount= 0
arcount= 0
\qd\
 |###[ DNS Question Record ]###
 |  qname= 'search.yahoo.com.'
 |  qtype= A
 |  qclass= IN
\an\
 |###[ DNS Resource Record ]###
 |  rrname= 'search.yahoo.com.'
 |  type= CNAME
 |  rclass= IN
 |  ttl= 5
 |  rdlen= 39
 |  rdata= 'ds-global.l7.search.ystg1.b.yahoo.com.'
 |###[ DNS Resource Record ]###
 |  rrname= 'ds-global.l7.search.ystg1.b.yahoo.com.'
 |  type= CNAME
 |  rclass= IN
 |  ttl= 96
 |  rdlen= 43
 |  rdata= 'ds-any-global.l7.search.ysta1.b.yahoo.com.'
 |###[ DNS Resource Record ]###
 |  rrname= 'ds-any-global.l7.search.ysta1.b.yahoo.com.'
 |  type= A
 |  rclass= IN
 |  ttl= 94
 |  rdlen= 4
 |  rdata= '188.125.66.104'
ns= None
ar= None 
```

**qdcount** - 查询 dns 计数，
**ancount** - dns 应答计数，

**dns.an[0]**是第一个 DNSRR，
**dns.an[1]**是第二个 DNSRR，
...

* * *

我们可以用 ancount 解析 DNSRR **，**这是我的演示代码：

```
#!/usr/bin/env python
# -*- coding: utf8 -*-

from scapy.all import *

# disable verbose mode
conf.verb = 0

def parse_dnspkt(pkt):
    """ parse dns request / response packet """
    if pkt and pkt.haslayer('UDP') and pkt.haslayer('DNS'):
        ip = pkt['IP']
        udp = pkt['UDP']
        dns = pkt['DNS']

        # dns query packet
        if int(udp.dport) == 53:
            qname = dns.qd.qname

            print "\n[*] request: %s:%d -> %s:%d : %s" % (
                ip.src, udp.sport,
                ip.dst, udp.dport,
                qname)

        # dns reply packet
        elif int(udp.sport) == 53:
            # dns DNSRR count (answer count)
            for i in range(dns.ancount):
                dnsrr = dns.an[i]
                print "[*] response: %s:%s <- %s:%d : %s - %s" % (
                    ip.dst, udp.dport,
                    ip.src, udp.sport,
                    dnsrr.rrname, dnsrr.rdata)

def sniffer():
    sniff(filter="udp port 53", prn=parse_dnspkt)

if __name__ == "__main__":
    sniffer() 
```

* * *

在你的 shell 中执行**nslookup search.yahoo.com**和**nslookup stackoverflow.com 。**

```
root:scapy/ #  python scapy-dns_sniff.py
WARNING: No route found for IPv6 destination :: (no default route?)

[*] request: 192.168.1.108:59199 -> 192.168.1.1:53 : search.yahoo.com.
[*] response: 192.168.1.108:59199 <- 192.168.1.1:53 : search.yahoo.com. - ds-global.l7.search.ystg1.b.yahoo.com.
[*] response: 192.168.1.108:59199 <- 192.168.1.1:53 : ds-global.l7.search.ystg1.b.yahoo.com. - ds-any-global.l7.search.ysta1.b.yahoo.com.
[*] response: 192.168.1.108:59199 <- 192.168.1.1:53 : ds-any-global.l7.search.ysta1.b.yahoo.com. - 188.125.66.104

[*] request: 192.168.1.108:55391 -> 192.168.1.1:53 : stackoverflow.com.
[*] response: 192.168.1.108:55391 <- 192.168.1.1:53 : stackoverflow.com. - 198.252.206.16 
```

# tomcat - 使用安全管理器将 Tomcat 作为 Windows 服务启动

> ID：12501782
> 
> 赞同：6
> 
> 时间：2012-09-19T19:45:14.557
> 
> 标签：tomcat

要从命令行使用 Security Manager 启动 Tomcat，我们执行以下操作：

```
bin\catalina.bat start -security 
```

我正在尝试对 Tomcat 服务执行类似操作，默认情况下调用没有安全管理器：

```
bin\tomcat6.exe" //RS//Tomcat6 
```

有人知道如何安全地启动服务吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-20T17:02:13.920

我找到了我的问题的答案：将 Tomcat 作为服务安装后，运行`bin\tomcat6w.exe`. 在 Java 选项卡下，添加以下 2 行：

```
-Djava.security.manager 
-Djava.security.policy=[tomcat_dir]\conf\catalina.policy 
```

如果您通过脚本安装服务，请添加上述行`++JvmOptions`（请参阅[http://commons.apache.org/daemon/procrun.html](http://commons.apache.org/daemon/procrun.html)）

```
...\Tomcat6.exe //US//Tomcat6 ++JvmOptions=-Djava.security.manager;-Djava.security.policy=... 
```

# javascript - 确定弹出窗口在哪里弹出

> ID：12501785
> 
> 赞同：1
> 
> 时间：2012-09-19T19:45:29.740
> 
> 标签：javascript, popup

是否可以确定弹出窗口相对于浏览器窗口的位置？例如左，右，上等。等。

我知道我可以设置大小、滚动条等

我使用以下命令打开窗口：

```
javascript:(function(){window.open('http://myurl.com/mypage.html')})() 
```

这个弹出窗口是从书签工具栏产生的，因此是一个链接

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T19:53:26.103

这是方法语法：

```
var windowObjectReference = window.open(strUrl, strWindowName[, strWindowFeatures]); 
```

对于位置使用`left`和`top`参数，所以它会是这样的：

```
 javascript: (function () {
        window.open('http://myurl.com/mypage.html', 
                    'windowname', 
                    'toolbar=yes,top=10,left=10,width=200,height=200')
    })() 
```

, `left`, `top`,以像素为单位`width`。`height`

查看此链接以获取更多信息：

[https://developer.mozilla.org/en-US/docs/DOM/window.open](https://developer.mozilla.org/en-US/docs/DOM/window.open)

# google-apps-script - 在单个项目下创建多个 Web 应用程序表单

> ID：12501786
> 
> 赞同：0
> 
> 时间：2012-09-19T19:45:34.420
> 
> 标签：google-apps-script

我对 Google Scripts 非常陌生——我正在尝试为我的研究小组设置每周提交和投票系统。

我找不到任何好的文档，`doGet(e)`所以这可能是一个非常愚蠢的问题。如何为每个项目制作超过 1 个 Web 应用程序表单？我想发送一份表格供人们填写他们提交的论文——这将填充电子表格——并在本周晚些时候发送另一份表格供人们对这些提交进行投票。

非常感谢，埃德

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T08:42:02.720

问候：doGet 文档参见[https://developers.google.com/apps-script/uiapp](https://developers.google.com/apps-script/uiapp)和 GUI Builder

这可能会有所帮助： doGet(params) { ... } 即从 URL 传递参数

您可以使用 2 个脚本，（并按 ID 打开电子表格）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T21:07:29.830

您只能在一个项目中拥有一个 Ui 实例，但在特定条件下可以很容易地在 UI 中拥有多个面板（在表单中也是如此）......我目前正在处理一个有 2 个部分的表单，一个在一周的第一部分可见，另一个在第二部分可见......面板都在同一个主面板中，并且看起来就像根据日期提供的 2 个版本一样 ;-)

我的用例是人们向农民订购水果和蔬菜，但我想真正的目的并不相关；-)

# matlab - 在 Matlab 中创建 GUI 的替代方法

> ID：12501788
> 
> 赞同：-1
> 
> 时间：2012-09-19T19:45:52.890
> 
> 标签：matlab, matlab-guide

如何在 Matlab 中创建图形用户界面？

我知道 GUIDE，但我对它提供的定制量不满意。我还有什么其他选择？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T20:46:43.247

我非常支持在 Matlab 中为 GUI 使用 Matlab-Java 接口。它有点麻烦，但如果它是一个功能合理的 GUI，那么绝对值得麻烦。这就像用 Java 编程，但使用了 m-script 接口。要创建 Java GUI，您需要使用 Matlab 内置函数`javaObjectEDT`并将您想要实例化的类传递给它。

```
frame = javaObjectEDT('javax.swing.JFrame'); 
```

Mathworks 建议调用该`javaObjectEDT`调用以确保垃圾回收等。当您为 Matlab 函数句柄设置回调时，您需要遵循：

```
hjObj = handle(jObj, 'CallbackProperties');
set(hjObj,'MouseClickedCallback',{@treeClicked,fig},'ToolTipText','Tip: use Alt-Click to edit plotting functions'); 
```

这是解释[here](http://www.mathworks.com/matlabcentral/newsreader/view_thread/294487)。

有很多细节，但核心是基于 m 脚本的 Java，它与 Matlab 集成得非常好。

# sql - 嵌套事务和遵守回滚

> ID：12501793
> 
> 赞同：0
> 
> 时间：2012-09-19T19:46:08.010
> 
> 标签：sql, sql-server-2008, tsql

一般来说，我只想能够做到这一点：

```
begin transaction
begin transaction
select 'x'
rollback
rollback 
```

原因是，我有一个存储过程，代码如下：

```
begin transaction

--Do stuff

If(problem)
begin 
    rollback
end else begin
    commit
end 
```

它就像我想要的那样工作，但我想通过这样做来测试它：

```
begin transaction
exec MyStoredProc
rollback 
```

当存储过程执行回滚时，它似乎关闭了两个事务，然后我在存储过程之外的回滚失败。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T19:48:15.140

SQL Server 中不存在自治事务。嵌套事务有助于增加`@@TRANCOUNT`，但仅此而已。正如@marc_s 在他的评论中所建议的那样，`ROLLBACK`它不仅仅适用于当前的事务范围/级别，它适用于整个事情。

该请求在 2008 年被拒绝：

[http://connect.microsoft.com/SQLServer/feedback/details/324569/add-support-for-true-nested-transactions](http://connect.microsoft.com/SQLServer/feedback/details/324569/add-support-for-true-nested-transactions)

但是，此请求仍然有效 - 所以也许有希望：

[http://connect.microsoft.com/SQLServer/feedback/details/296870/add-support-for-autonomous-transactions](http://connect.microsoft.com/SQLServer/feedback/details/296870/add-support-for-autonomous-transactions)

至于您的外部回滚失败，您始终可以先检查这一点，而不是盲目地进行，例如：

```
IF @@TRANCOUNT > 0
  ROLLBACK TRANSACTION; 
```

# ruby-on-rails - 调用了 RR 模拟方法，但规范仍然失败

> ID：12501797
> 
> 赞同：0
> 
> 时间：2012-09-19T19:46:19.940
> 
> 标签：ruby-on-rails, rspec, mocking, rr

堆栈：Rails 3.0.7、Mongoid 2.2.5、RSpec 2.11.0、RR 1.0.4

我有一个看起来像这样的订阅模型：

```
class Subscription
  include Mongoid::Document

  embeds_many :addons

  after_save :update_feature_policy!

  def update_feature_policy!
    puts "Updating feature policy!"
  end
end 
```

我有一个看起来像这样的规范：

```
it "should update FeaturePolicy when adding an addon" do
  puts "Starting spec"
  mock(subscription).update_feature_policy! { true }
  subscription.addons << user_addon
  puts "Finished spec"
end 
```

规范失败，但我在控制台中看到了这个输出：

```
Starting spec
Updating feature policy!
Finished spec

Failure/Error: mock(subscription).update_feature_policy! { true }
 RR::Errors::TimesCalledError:
   update_feature_policy!()
   Called 0 times.
   Expected 1 times. 
```

是什么导致模拟对象不捕获方法调用并通过规范？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T18:32:10.287

回调似乎正在重新查找记录并创建一个单独的订阅实例（因此没有命中模拟对象）。我不知道为什么 - 似乎它的性能不是很好 - 但我找到了一个解决方法：

```
it "should update FeaturePolicy when adding an addon" do
  puts "Starting spec"
  mock.instance_of(Subscription).update_feature_policy! { true }
  subscription.addons << user_addon
  puts "Finished spec"
end 
```

这会检查是否`update_feature_policy!`在 的任何实例上被调用`Subscription`。不是很好，但就我的目的而言，它有效。

如果有人可以回答为什么会发生这种情况或提供更好的解决方案，请这样做。

# android - Android，语言文件不起作用

> ID：12501801
> 
> 赞同：4
> 
> 时间：2012-09-19T19:46:29.977
> 
> 标签：android, xml

我现在正在创建一个 android 应用程序并尝试为我的母语添加语言文件。但在某种程度上，这对我不起作用，尝试将应用程序加载到两个不同的手机中，结果相同。之前创建的语言文件效果很好，但这次没有。（手机设置为瑞典语，语言文件适用于我创建的其他应用程序。）

在我的项目中，我有

```
res
   values
      strings.xml
      style.xml
   values-se
      strings.xml
   [more not values folder] 
```

目标语言是瑞典语（se），但我找不到在这个应用程序中对我不起作用的方法。

values/strings.xml 文件

```
<?xml version="1.0" encoding="utf-8"?>
<resources>
    <string name="app_name">My Quick Notes</string>
    <string name="delete_item">Delete this note?</string>
    <string name="add_item">Add new note</string>
    <string name="switch_note_mode">Switches notes mode</string>
    <string name="text_about">About</string>
    <string name="text_help">Help</string>
    <string name="text_ok">Ok</string>
    <string name="text_switch_mode">Switch Mode</string>
    <string name="text_about_message" formatted="false">Created by Figaro\nA simple notepad app.\nCopyright © 2012\nfigaro@evigfilosofi.se</string>
    <string name="text_help_message">A simple notepad app for make quick notes.\n
        \nClick on the first note with the green plus chars for add a new note.\n
        \nMy Quick Notes support mulit list mode as normal mode, bullet list and checkbox list.
        \nThe checkbox mode can be use for create a check list and check off list. Click on the checkbox for toggle the checkbox.
    </string>
</resources> 
```

和 values-se/strings.xml

```
<?xml version="1.0" encoding="utf-8"?>
<resources>
    <string name="app_name">My Quick Notes</string>
    <string name="delete_item">Radera anteckning</string>
    <string name="add_item">Ny anteckning</string>
    <string name="switch_note_mode">Växa anteckningsläge</string>
    <string name="text_about">Om</string>
    <string name="text_help">Hjälp</string>
    <string name="text_ok">Ok</string>
    <string name="text_switch_mode">Växla Läge</string>
    <string name="text_about_message" formatted="false">Skapad av Figaro\nEn enkel antecknings app\nCopyright © 2012\nfigaro@evigfilosofi.se</string>
    <string name="text_help_message" formatted="false">En enkel notepad för att snabbt göra anteckningar\n
        \nKlicka på den första noten med grönt plustecken för att skapa en ny anteckning.\n
        \nMy Quick Notes stöder flera list lägen så som normalt läge, punktlista och checkboxlista\n
        \nCheckbox läge kan användas för att skapa checklistor som kan prickas av. Klicka på checkrutan för att ändra den.
    </string>
</resources> 
```

这两个文件都是utf-8类型（记事本++说它），我也尝试用瑞典语言文件替换英文副本，这个工作，我可以看到，系统只选择默认语言文件和自定义文件?

有人知道这对我不起作用吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-19T19:59:20.280

您使用的是瑞典顶级域名缩写，这不是您在这种情况下应该使用的。

来自瑞典的瑞典语的[Android 本地化](http://www.wilsonmar.com/android_localization.htm)代码是`values-sv-rSE`

`sv`是瑞典语的**实际**代码

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-03-29T08:39:47.643

来自安卓文档

> 该语言由两个字母的 ISO 639-1 语言代码定义，可选地后跟两个字母的 ISO 3166-1-alpha-2 区域代码（前面为小写 r）。

代码不区分大小写；r 前缀用于区分区域部分。您不能单独指定区域。

# javascript - div关闭一次后，Jquery动画没有“重新激活”

> ID：12501802
> 
> 赞同：0
> 
> 时间：2012-09-19T19:46:33.997
> 
> 标签：javascript, jquery, html, css, jquery-animate

我有一个使用 .animate 的 div。我有 div css 在：

```
 position:fixed; 
 bottom:-240px; 
```

动画脚本是：

```
 $("#media").click(function () {
 $("#mediadetails").animate({height: "425px"}, 1000); 
```

用一个特殊的 div 关闭：

```
 $("#mediaclose").click(function() {
 $("#mediadetails").toggle(2000); 
```

最初的动画效果很好——你点击关闭按钮，div 就关闭了。但是如果你再次点击媒体链接，它就不会再动画了。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T19:51:09.243

这是因为`.toggle()`只会隐藏元素~~而不改变高度~~（它确实改变了高度，但也改变了宽度和不透明度）。接下来`.animate()`只会改变高度，宽度和不透明度将保持不变。

```
$('#mediaclose').click(function() {
    $('#mediadetails').animate({height: "0px"}, 2000);
}); 
```

# c# - 如何为某个特定类型而不是全局设置 Json.NET ContractSerializer？

> ID：12501805
> 
> 赞同：7
> 
> 时间：2012-09-19T19:46:50.850
> 
> 标签：c#, asp.net-web-api, json.net

我想为我的 ASP.NET Web API 应用程序中的某些类型设置一个合同序列化程序。我可以像这样在 App_Start/FormatterConfig.cs 中全局设置设置：

```
public static void RegisterGlobalFormatters(MediaTypeFormatterCollection formatters)
{
    jsonSerializerSettings.ContractResolver = new CriteriaContractResolver(new List<string>(new string[]{"mdData", "name", "label"})); 
```

...

但是我如何才能将其应用于一种或多种特定的类类型？

我想这样做的原因是因为我需要能够根据 Web 服务的配置或参数在运行时设置哪些字段应该在运行时序列化，类似于这些示例：

[使用 JSON.net，如何防止在基类上下文中使用派生类的属性？](https://stackoverflow.com/questions/5872855/using-json-net-how-do-i-prevent-serializing-properties-of-a-derived-class-when)

[http://json.codeplex.com/discussions/347610](http://json.codeplex.com/discussions/347610)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-20T08:45:15.497

你有几个选择：

*   创建由自定义格式化程序处理的自定义类型。这种自定义类型可以（以某种方式）指定需要序列化的字段（然后将该信息输入到 Json 序列化程序中）
*   查看每个控制器配置（请参阅[此处](http://blogs.msdn.com/b/jmstall/archive/2012/05/11/per-controller-configuration-in-webapi.aspx)）以尝试根据需要设置格式化程序

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-24T21:04:45.343

我最终使用了只写入“属性”列表中指定的参数的 JsonConverter。它比 ContractResolver 或格式化程序更低级别，但我认为不可能为特定类型配置任何一个。

```
public class ResourceConverter : JsonConverter
{
    public override bool CanConvert(Type objectType)
    {
        return (objectType == typeof(Resource));
    }

    public override object ReadJson(JsonReader reader, Type objectType, object existingValue, JsonSerializer serializer)
    {
        throw new NotImplementedException();
    }

    public override void WriteJson(JsonWriter writer, object value, JsonSerializer serializer)
    {
        List<string> properties = new List<string>(new string[] { "Name", "Label" });

        writer.WriteStartObject();
        foreach (MemberInfo mi in value.GetType().GetMembers(BindingFlags.GetField | BindingFlags.Instance | BindingFlags.Public) )
        {
            PropertyInfo p = mi as PropertyInfo;

            if (p != null && p.GetCustomAttributes(typeof(JsonIgnoreAttribute), true).Length == 0 && properties.Contains(p.Name))
            {
                writer.WritePropertyName(p.Name);
                serializer.Serialize(writer, p.GetValue(value, new object[] { }));
            }
        }
        writer.WriteEndObject();
    }
} 
```

这可以使用属性应用于类：

```
[JsonConverter(typeof(ResourceConverter))] 
```

虽然这似乎是一个 hack，但我认为我应该使用合同解析器来获取要序列化的属性列表，而不是直接使用反射，但我不确定如何。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-20T12:46:11.160

我会尝试创建这样的东西

```
public class MyJsonFormatter : JsonMediaTypeFormatter
    {
        public override bool CanWriteType(Type type)
        {
            return type == typeof(MyClass);
        }
    } 
```

然后将其插入到格式化程序集合的开头

# php - PHP - 字符串到整数

> ID：12501806
> 
> 赞同：0
> 
> 时间：2012-09-19T19:46:53.250
> 
> 标签：php, casting

我必须根据时间、计数器和从 1 到 10 的随机前置值生成唯一 ID。我生成它的方式：

```
$time = (int)(time()+$i);
$time = $time.(rand(1,9));
//At this step we have strings looking like this:
"13480835672" //This is time in first iteration
"13480835672" //This is time in second iteration
//But if I convert it to int 
$time = (int)$time;
2147483647 //This is time converted in first iteration
2147483647 //This is time converted in second iteration 
```

正如你所看到的，上面的时间是一样的。他们都是。我在这里想念什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T19:51:03.813

2147483647 是您的操作系统/php 二进制文件可以使用的最大（有符号）整数。

2147483647*2 = 2^32 这意味着您的操作系统 / php 二进制文件正在 32 位运行。

在上面的解释中，我乘以 2，因为 php 使用的整数是有符号的，这意味着它们跨越整数的负轴和正轴。

使用诸如返回的浮点值`microtime(TRUE)`允许您处理更大的数字。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T19:47:57.667

使用[microtime](http://php.net/manual/en/function.microtime.php)获取函数发生的确切时间。

您还应该使用[uniqid](http://php.net/manual/en/function.uniqid.php)来获得适当的随机返回。

# visual-studio-2010 - Visual Studio：如何允许空白值或不必选择默认为 ALL 的值？

> ID：12501810
> 
> 赞同：0
> 
> 时间：2012-09-19T19:47:08.587
> 
> 标签：visual-studio-2010, visual-studio, visual-studio-2008, reporting-services

我通过 Visual Studio 设置了一个非常基本的 SSRS 报告。到目前为止，我设置的参数没有“允许空白值”、“允许空值”和“允许多个值”，但我尝试使用它们没有运气。允许空白值和允许空值似乎根本不起作用。

在预览中，仍然弹出“请为参数‘xxxx’选择一个值。

我尝试在主数据集查询中处理“column = @column”与“column IN @column”查询。我还搜索了谷歌并将额外的数据集查询设置为“从表中选择不同的列，其中列不为空”我还尝试在查询中使用 UNION，它让我可以选择“NULL”作为选项，但是null 不包括所有内容，所以结果什么也没给我....

有谁知道解决方法或如何获取单个参数以在将其设置为全选的地方不需要选项？

任何帮助将不胜感激！谢谢你们！

-EDIT 这就是我的查询“SELECT DOCDATE, DOCID, CUSTNMBR, CUSTNAME, DOCAMNT FROM SOP30200 WHERE (DOCDATE BETWEEN @Fromdate AND @Todate) GROUP BY DOCDATE, DOCID, CUSTNMBR, CUSTNAME, DOCAMNT HAVING (CUSTNMBR = @Custnmbr OR @Custnmbr IS NULL) AND (DOCID IN (@DocID) OR @DocID IS NULL)”，但我仍然无法将 docID 部分设为空白。上面是什么，我仍然需要一个 SP 或者你下面的例子中的东西？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T19:51:51.160

通过设置 allow null 值，您表示您的数据集看起来像这样：

```
CREATE PROCEDURE myRSStoredProcedure
 @MyParameter varchar(50)=NULL
 --more code
 SELECT * FROM MyTable WHERE (MyField=@MyParameter OR @MyParameter IS NULL)

END 
```

也就是说，NULL 是一个有效值，并且在您的存储过程中的某处被引用，请注意这部分`WHERE (MyField=@MyParameter OR @MyParameter IS NULL)`处理它的值或 NULL。如果你不包括`OR @MyParameter IS NULL`你所拥有的，`WHERE MyField=@MyParameter`那么考虑到你没有解决它们，你将如何期望 RS“允许 Nulls”。

对于允许多个值，这只是 Reporting Services 中允许进行多项选择的指示器。您仍然需要处理数据集中的逗号分隔值（您的存储过程），您不能只说：

`SELECT * FROM MyTable WHERE ID IN (@MyParam)`

它不是那样工作的。解决这个问题的一种方法是创建一个表值函数，该函数接受一个 CSV 列表并返回一个整数表。这是一个例子：

```
CREATE Function [dbo].[CsvToInt] ( @Array varchar(1000)) 
returns @IntTable table 
    (IntValue int)
--Parse comma seperated value parameters
--To be used in SELECT blah WHERE blah IN (...)
--This function returns int, but may be modified to return any datatype
AS
begin

    declare @separator char(1)
    set @separator = ','

    declare @separator_position int 
    declare @array_value varchar(1000) 

    set @array = @array + ','

    while patindex('%,%' , @array) <> 0 
    begin

      select @separator_position =  patindex('%,%' , @array)
      select @array_value = left(@array, @separator_position - 1)

        Insert @IntTable
        Values (Cast(@array_value as int))

      select @array = stuff(@array, 1, @separator_position, '')
    end

    return
end 
```

最后，包含“所有”数据而不是空选择的一种巧妙方法是创建两个数据集，这意味着给我所有数据。第一个数据集是您的参数，例如对于您可能拥有的客户：

```
SELECT
  1 As SortOrder
  CustomerID,
  Customer
FROM
  MyCustomers
UNION ALL
SELECT
  0 As SortOrder
  0 As CustomerID,
  'All' As Customer
ORDER BY
  SortOrder,
  Customer 
```

这将列出顶部带有单词 All 的所有客户（注意 SortOrder）。然后您的 RS 报告参数可以将默认值指定为 0（如果您使用的是 CustomerID）或`All`（如果您使用的是实际客户名称）。然后，您的报告数据集将执行以下操作：

```
CREATE PROCEDURE rsp_MainReport
@CustomerID int = 0  --this could also be @CustomerID varchar(50)='All'
--more code
SELECT Blah FROM MyTable WHERE (CustomerID = @CustomerID OR @CustomerID=0) 
--or you could of done WHERE (Customer = @Customer OR @Customer='All') 
```

我将发布一个我为您完成的示例，这是一个参数数据集：

```
SELECT 
                    1 as SortOrder,
                    FacilityID,
                    Facility
                FROM
                    Facility
                UNION ALL
                SELECT
                    0 as SortOrder,
                    0 as FacilityID,
                    'All' as Facility
                ORDER BY 
                    SortOrder,
                    Facility 
```

结果如下：

![在此处输入图像描述](../Images/5c72fc215208752db18d62f92fd59543.png)

然后你可以在你的主数据集（你的报告的数据集）中使用它：

```
CREATE PROCEDURE rsp_QuikFixStats_ByFacilityCategory
    -- Add the parameters for the stored procedure here
    @FacilityID bigint=0,
    @StartDate datetime=NULL,
    @EndDate datetime=NULL

AS
BEGIN
    -- SET NOCOUNT ON added to prevent extra result sets from
    -- interfering with SELECT statements.
    SET NOCOUNT ON;

    -- Insert statements for procedure here
    SELECT 
        f.Facility,
        c.Category, 
        COUNT(t.TicketID) AS TotalNumberOfTickets,
        SUM(CASE WHEN ClosedDate IS NULL AND TargetDate IS NOT NULL THEN 1 ELSE 0 END) AS TotalNumberOfOpenTickets,
        SUM(CASE WHEN ClosedDate IS NOT NULL THEN 1 ELSE 0 END) AS TotalNumberOfClosedTickets,
        SUM(CASE WHEN TargetDate IS NULL AND ClosedDate IS NULL THEN 1 ELSE 0 END) AS TotalNumberOfWaitForTickets,
        SUM(CASE WHEN TargetDate IS NOT NULL AND ClosedDate IS NULL AND TargetDate < GetDate() THEN 1 ELSE 0 END) AS TotalNumberOfOverdueTickets
    FROM 
        Ticket t
    INNER JOIN
        Facility f
    ON
        f.FacilityID = t.FacilityID
    INNER JOIN
        Category c
    ON
        c.CategoryID = t.CategoryID
    WHERE 
        (f.Inactive=0)
        AND (f.FacilityID = @FacilityID OR @FacilityID=0)
        AND (t.OpenDate >= @StartDate OR @StartDate IS NULL)
        AND (t.OpenDate <= @EndDate OR @EndDate IS NULL)
    GROUP BY
        f.Facility,
        c.Category
    ORDER BY
        f.Facility,
        COUNT(t.TicketID) DESC,
        c.Category      
END
GO 
```

报告参数如下所示：

![在此处输入图像描述](../Images/53df4b062f5d6bf4ad976cb06f039877.png)

# java - 如何在任何应用程序中为不同的包使用不同的 log4j 转换模式

> ID：12501811
> 
> 赞同：3
> 
> 时间：2012-09-19T19:47:26.070
> 
> 标签：java, log4j

如何使用不同的 log4j 转换模式在不同的包中记录消息并使用相同的文件进行输出。

以下是我的配置文件，请建议如何修改以使用不同的转换模式

```
<!DOCTYPE log4j:configuration SYSTEM "log4j.dtd"> 

<log4j:configuration debug="true" xmlns:log4j='http://jakarta.apache.org/log4j/'> 

<appender name="PLUGIN_FILE" class="LoggerTest.NewLogForEachRunFileAppender"> 
     <!-- Below param sets the dir path of the log files -->
    <param name="FileDirPath" value ="/var/opt/mycomp/ftpm/" />
    <!-- Below param sets the suffix name for the log file -->
    <param name="FileNameSuffix" value="_error.log" /> 
    <param name="MaxFileSize" value="10KB"/> 
    <!-- Below param creates the specified number of backup files to be created when rolled back -->
    <param name="MaxBackupIndex" value="10"/> 
    <layout class="org.apache.log4j.PatternLayout"> 
        <param name="ConversionPattern" value="%-4r %d [%t] %-5.37c %M() %L %x %m%n" /> 
    </layout>   
    <filter class="org.apache.log4j.varia.LevelRangeFilter"> 
        <param name="LevelMin" value="debug" /> 
        <param name="LevelMax" value="fatal" /> 
        <param name="AcceptOnMatch" value="true" /> 
    </filter> 
</appender> 

<appender name="ERROR_FILE" class="LoggerTest.NewLogForEachRunFileAppender"> 
     <!-- Below param sets the dir path of the log files -->
    <param name="FileDirPath" value ="/var/opt/mycomp/ftpm/" />
    <!-- Below param sets the suffix name for the log file -->
    <param name="FileNameSuffix" value="_error.log"/> 
    <param name="MaxFileSize" value="10KB"/> 
    <!-- Below param creates the specified number of backup files to be created when rolled back -->
    <param name="MaxBackupIndex" value="10"/> 
    <layout class="org.apache.log4j.PatternLayout"> 

        <param name="ConversionPattern" value="%d [%t] - %m%n" /> 
    </layout> 
    <filter class="org.apache.log4j.varia.LevelRangeFilter"> 
        <param name="LevelMin" value="error" /> 
        <param name="LevelMax" value="fatal" /> 
        <param name="AcceptOnMatch" value="true" /> 
    </filter> 
</appender> 

<logger name="LoggerTest.a" additivity="false">
        <appender-ref ref="PLUGIN_FILE"/>
</logger>

<root> 
    <level value="error" />     
        <appender-ref ref="ERROR_FILE" />

    <!-- To enable the trace messages for debugging uncomment the below appender ref statement -->
    <level value="DEBUG" />
             <appender-ref ref="DEBUG_FILE" /> 
</root>
</log4j:configuration> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T10:06:02.153

在浏览您的 log4j 配置文件时，我可以确定您想要`DEBUG`在一个文件中捕获所有具有级别的日志，并`ERROR`在另一个文件中捕获具有不同级别的所有日志，每个文件具有不同的转换模式。

如果是这样，那么您必须使用其他一些机制来实现它，因为当您在根记录器中定义级别值时，它将捕获所有具有提到的级别以及低于日志层次结构中的所有级别的日志

```
OFF
FATAL
ERROR
WARN
INFO
DEBUG
TRACE
ALL 
```

![记录器级别](../Images/97b15221c368788e24e4649dfcebd5cc.png)

有关更多详细信息，请阅读[**此**](http://supportweb.cs.bham.ac.uk/documentation/tutorials/docsystem/build/tutorials/log4j/log4j.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-25T11:20:01.630

我认为这是不可能的，因为转换模式已分配给 FileAppender。您是否有充分的理由要将不同的模式放入同一个文件中？这将使阅读/解析日志变得困难。

# java - java xml解析大文件和db关系

> ID：12501820
> 
> 赞同：0
> 
> 时间：2012-09-19T19:48:03.997
> 
> 标签：java, xml

我有一个 10+ MB 的 xml 文件，其中包含具有关系的节点（大约 10K 到 20K）。

```
<.....>
<Emplyoyee>
    <name>Jack</name>
    <age>35</age>
    <supervisor></supervisor>
    <....>
</Emplyoyee>
<.....>
<.....>
<.....>
<Emplyoyee>
    <name>Smith</name>
    <age>20</age>
    <supervisor>Jack</supervisor>
    <....>
</Emplyoyee>
<.....> 
```

现在，我想解析这个文件并将所有详细信息存储在数据库中，其中包含一个名为“supervisorID”的字段（ID）的“Employee”表。到目前为止，我一直在尝试制作所有员工的列表，然后迭代列表以查找主管关系。

请建议我一种高效且更快的方法来执行此操作。我可以使用哪些库来处理此类问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T21:33:19.813

查看*EclipseLink提供的*[**MOXy**](http://wiki.eclipse.org/EclipseLink/Examples/MOXy)框架。它实际上在幕后使用**JAXB实现。****但是JPA**的 ORM 也是如此。

 ****** * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T19:54:53.943

您可以使用 + 将数据从`XML`文件转换为 Java 对象，并使用+`JAXB`将 Java 对象插入数据库。 您可以创建 2 个 DTO - 包含有关 Emplyoyee 的所有信息（姓名、年龄、...） 以及用于JAXB 解 组`Hibernate``JPA`

`Emplyoyee`

`Emplyoyees``List<Emplyoyee>`

**编辑：没有 JAXB 和 JPA**

**您可以使用javascript**解析文件并使用**Ajax**发送**SQL**查询

 **```
var xmlDoc = new ActiveXObject("MSXML.DOMDocument");  
xmlDoc.async = false;
xmlDoc.preserveWhiteSpace = true;
xmlDoc.load(pathToFile);
var nodes = xmlDoc.selectNodes("/Emplyoyee");  
for (var node = nodes.nextNode(); node != null; node = nodes.nextNode())
{
   // get another nodes, create SQL query and sent it to server usinj Ajax  
} 
```*******

# php - 通过多域托管防止直接访问主域上的网站

> ID：12501827
> 
> 赞同：2
> 
> 时间：2012-09-19T19:48:27.193
> 
> 标签：php, .htaccess, hosting

我最近购买了多域托管，并在我的计划中托管了多个域。其他域托管在我的主域中的子文件夹上。所以当我去它时，`www.secondarydomain.com`它会显示位于的网站`www.primarydomain.com/secondarydomain`。

现在我想做的是当有人试图访问`www.primarydomain.com/secondarydomain`同时保持 www.secondarydomain.com 活着时阻止直接访问。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T20:00:06.403

通过启用 mod_rewrite 和 .htaccess `httpd.conf`，然后将此代码放在您`.htaccess`的`DOCUMENT_ROOT`目录下：

```
Options +FollowSymLinks -MultiViews
# Turn mod_rewrite on
RewriteEngine On
RewriteBase /

RewriteCond %{REQUEST_FILENAME} -d
RewriteCond %{HTTP_HOST} ^www\.primarydomain\.com$ [NC]
RewriteCond %{THE_REQUEST} ^[A-Z]{3,}\s/+([^\s\?]+)
RewriteRule ^ http://www.%1.com [R=302,L] 
```

确保它工作正常后，将 302 更改为 301。

PS：请记住，它将像`http://www.primarydomain.com/foo`物理目录一样将每个 URL 重定向`foo`到`http://www.foo.com`.

### 编辑 - 为避免匹配某些已知文件夹，请使用负前瞻，如下所示：

```
RewriteCond %{REQUEST_FILENAME} -d
RewriteCond %{HTTP_HOST} ^www\.primarydomain\.com$ [NC]
RewriteCond %{THE_REQUEST} ^[A-Z]{3,}\s/+([^\s\?]+)
RewriteRule ^(?!(foo|bar|baz)/).*$ http://www.%1.com [R=302,L] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T19:52:20.007

我知道在 IIS 中，您可以设置规则，以便如果有人进入 www.primarydomain.com/secondarydomain，您可以将他们重定向到 www.secondarydomain.com。这是您要查找的基本模式匹配，如果它解析为“true”，它将按照您的指示重定向。

如果您根本不希望 www.primarydomain.com/secondarydomain 工作，您可以做同样的事情，除了重定向到错误页面。我确信 apache 和其他服务器具有类似的功能，但我只在 IIS 中处理过它。它被称为 URL 重写和重定向。

希望这可以帮助。

# objective-c - 在 iOS 中更改坐标方向

> ID：12501837
> 
> 赞同：2
> 
> 时间：2012-09-19T19:49:07.167
> 
> 标签：objective-c, ios, xcode

我的 GLKViewController 子类中有一些看起来像这样的代码：

```
-(void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event
{
    UITouch * touch = [touches anyObject];
    CGPoint point = [touch locationInView:self.view];
    NSLog(@"touch has begun!: %f %f",point.x,point.y);
    float xw = [self.view bounds].size.width;
    float yw = [self.view bounds].size.height;
    NSLog(@"touch -- %f %f", point.x / xw, point.y / yw);
}

-(BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)toInterfaceOrientation
{
    return UIInterfaceOrientationLandscapeRight == toInterfaceOrientation;
} 
```

此外，我在“iPhone/iPod 部署信息”中将唯一支持的设备方向设置为“横向”。

通过运行上面的代码进行测试，它看起来好像左上角是 (0,0)。但是，我有另一个与此类似的测试项目，其中 (0,0) 点位于左下角。

究竟是什么决定了坐标系的方向？如果我希望我的 (0,0) 点位于左下角而不是左上角，我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T20:08:58.703

在 iOS 上，(0,0) 处的角（称为*原点*）应始终位于左上角。我不知道有没有一种方便的方法来更改它，除了可能将 UIView 子类化并处理所有各种算术 - 计算你的边界/框架，布置你的子视图和绘制你的内容 - 你自己。

在 Mac 上，原点略有不同：默认位于左下角。但是，您可以继承 NSView 并`YES`从该`-isFlipped`方法返回，以向视图层次结构表明您希望您的坐标表现得像 iOS，原点位于左上角。

我不知道有什么简单的方法可以让您意外地在 iOS 的左下角看到原点。如果您发布其他测试项目中的一些代码，我可以扩展这个答案来解决它。

# c++ - C++ 中 pipe() 和 fork() 的新手 -

> ID：12501838
> 
> 赞同：2
> 
> 时间：2012-09-19T19:49:13.903
> 
> 标签：c++, fork, pipe

**环境：** x86_64 上的 Linux 2.6.32 (RHEL 6.3) 和 gcc 4.4.6

**背景：**我正在运行一些繁重的数据处理：~500 GB 输入数据分布在~2000 个文件中。我的主进程分叉了 N 个子进程，每个子进程都会收到一个要处理的文件名列表。

**我想要**的是控制台 I/O 通过父级。我一直在研究`pipe()`并看到一些关于使用`poll()`让我的父母阻止的有趣的东西，直到有错误消息要阅读。看来我需要有 N 个管道（每个孩子一个）并传递`poll()`有关我想听什么信号的信息。另外，我*认为*一旦我`dup2(pipe[1], STDOUT)`在每个孩子中，每个孩子都应该能够`cout << stuff;`像往常一样向管道写入，对吧？

**首先**，我上面所说的关于多个管道的内容是`poll()`正确`dup2()`的吗？

**其次**，如何设置父`poll()`循环，以便在所有孩子都死后继续前进？

现在，这段（不完整的）代码如下：

```
int status;
while (1) { // wait for stuff
    while ((status = poll(pollfds, ss.max_forks, -1)) > 1)
        cout << "fork "<< status << ": " << pipes[status][0];
    if (status == -1)   Die(errno, "poll error");
    if (status == 0) { // check that we still have at least one open fd
        bool still_running = false;
        for (int i=0; i<ss.max_forks; i++) {
             // check pipe i and set still_running if it is not zero
        }
        if (!still_running)
            break;
    }
} 
```

**第三**，我应该设置什么，什么时候应该用 fcntl() 设置？我想做 O_ASYNC 吗？我想做阻塞还是非阻塞？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T20:03:25.580

实际上，您需要 close() 两个进程（父进程和子进程）中各自的“未使用”端，以确保遇到“断管”。因此，如果子进程写入 Pipe[0]，则父进程将从 Pipe[1] 读取并关闭自己的 Pipe[0]。同样，孩子将关闭 Pipe[1]。

如果你这样做，在孩子死后，父母从管道中读取时会出错。不要忘记使用其中一种 waitpid() 风格的函数来清理死进程。

您可能希望将句柄设置为非阻塞，这样您就可以读取其中的任何内容，而不必使用效率极低的 1 字节读取。虽然我只是使用合适的缓冲区大小（通常为 1024 或 4096）调用 read()，但如果有更多数据则让下一次轮询触发。但是，我通常只有一个孩子可以一起工作，而不是几百个:-)

至于您的循环，您必须跟踪每个孩子的状态，并在没有活着的孩子时退出。

编辑：实际上，即使设置了 POLLIN，或者当我得到 POLLERR 或 POLLHUP 标志时，我发现当我读取 0 字节时，我认为孩子已经死了。不知道哪种情况是正确的...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T21:37:52.030

这里有一个关于`select()`vs的问题`poll()`：[poll 和 select 有什么区别？](https://stackoverflow.com/questions/970979/what-are-the-differences-between-poll-and-select)

但是，您是否考虑过使用线程而不是单独的进程？您可以更好地控制与线程的交互，并且通信是通过数据结构而不是流水线 I/O 流进行的。管道很*昂贵*；您正在通过操作系统，并且您必须格式化输出结果/解析输入结果，这也很昂贵。

最后一点：无论您使用的是轻量级线程还是重量级 fork/exec，除非您拥有 2000 个 CPU 多处理器，否则您不希望一次启动 2000 个线程。如果争用 CPU 的线程/进程多于 CPU，则会造成代价高昂且持续上下文交换的情况。

# php - PHP在多维数组中搜索子字符串

> ID：12501840
> 
> 赞同：1
> 
> 时间：2012-09-19T19:49:20.470
> 
> 标签：php, arrays, substring

我正在尝试在 2 层数组的底层部分中搜索子字符串，并从顶层返回密钥。例如，在下面的数组中在“A”中搜索“ca”将返回“0”和“2”（但会错过“cattle”）：

```
Array (
    [0] => Array (
        [A] => cat
        [B] => horses
        )
    [1] => Array (
        [A] => dog
        [B] => cattle
    )
    [2] => Array (
        [A] => cat
        [B] => sheep
    )
) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T20:04:29.987

你可以这样尝试：

```
$array = array(
    array(
        "A" => "cat",
        "B" => "horse"
    ),
    array(
        "A" => "dog",
        "B" => "cattle"
    ),
    array(
        "A" => "cat",
        "B" => "sheep"
    ),
);

$result = mySearch($array, "A", "ca");

function mySearch($array, $key, $search)
{
    $results = array();
    foreach ($array as $rootKey => $data) {
        if (array_key_exists($key, $data)) {
            if (strncmp($search, substr($data[$key], 0, 2), strlen($search)) == 0) {
                $results[] = $rootKey;
            }
        }
    }
    return $results;
}

var_dump($result); 
```

将输出：

```
array(2) {
  [0]=>
  int(0)
  [1]=>
  int(2)
} 
```

请注意，此方法不是编码安全的（您可以使用 mb_str* 代替 str* 函数族，更多详细信息请参见[此处](http://php.net/manual/en/book.mbstring.php)）。

# xcode - UITableView 上的浮动 UIView 在 iOS6 中损坏

> ID：12501842
> 
> 赞同：1
> 
> 时间：2012-09-19T19:49:25.820
> 
> 标签：xcode, uitableview, uiview, scrollview, ios6

在我的应用程序中，我的 UIView 浮动在 UITableView 的顶部（可视化：附加到导航栏的底部），在 iOS5 下，我使用**scrollViewDidScroll中的这些代码行使其能够浮动在顶部**

```
// get the table and buttonView bounds

CGRect tableBounds = self.tableView.bounds;

CGRect buttonViewFrame = self.buttonView.frame;

// make sure the buttonView at the table's original x and y as the content moves 

self.buttonView.frame = CGRectMake(tableBounds.origin.x,tableBounds.origin.y,buttonViewFrame.size.width,buttonViewFrame.size.height); 
```

然而，这似乎不再适用于 iOS6，有谁知道为什么或如何解决这个问题？我支持iOS5及以上。

浏览了 iOS6 发行说明后，我发现了这个......

> 请注意，您可以通过在视图和滚动视图的子树之外的视图（例如滚动视图的超级视图）之间创建约束，使滚动视图的子视图看起来浮动（不滚动）在其他滚动内容之上。

我将如何在代码中设置它，因为我没有在情节提要中使用 AutoLayout，因为我仍然支持 iOS5。如果有人能告诉我为什么我在 iOS5 中使用的代码在 6 中不再适用，那也太好了。

# ms-access - Access 2007：2 台计算机将相同的报告导出为文本文件时出现问题

> ID：12501844
> 
> 赞同：0
> 
> 时间：2012-09-19T19:49:40.237
> 
> 标签：ms-access, text, ms-access-2007

所以我有一个共享的 Access 2007 数据库，它基本上创建了这个大报告，充满了令人讨厌的子报告和各种其他禁忌，然后将其导出到一个文本文件，我们用于输入到不同的应用程序中。使用 Access 功能将报告导出为文本非常简单。没有VBA。

现在在我的电脑上，这个文本文件完全按照它应该的方式导出，而在同事的电脑上，使用 Access 数据库的相同副本，相同的报告，甚至在远程桌面进入同一台不同的计算机时使用它，具有不同的格式、间距和其他愚蠢的 Access Report-to-text 问题。

我的问题是：鉴于数据库完全相同并且我们在两台计算机上得到两个不同的结果，到底是什么导致了这种情况？我已尝试确保默认打印机相同，更改报告中的字体，从我的同事登录的 Windows 服务器运行它，但无论看起来如何，他总是遇到相同的格式问题。似乎在某个地方，嵌入在他和我的机器上，我们有两个不同的控件，它们允许 Access 格式化并将报告导出为不同的文本，即使我们使用的是相同的数据库。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T15:22:42.943

Access 有很多“令人兴奋的”选项。默认打印机，请确保您已全部选中。

在设计模式下打开报表，然后转到页面设置并查看是否为该报表选择了特定的打印机（页面设置|页面）。如果有，请尝试将其更改为使用默认打印机。如果没有，请尝试在两台机器上设置一个您知道的。无论哪种方式，保存报告。

确保您已安装[http://support.microsoft.com/kb/950488](http://support.microsoft.com/kb/950488)，否则特定的打印机设置将无法在 2007 年保存报告。

# linq-to-sql - 使用带有 NN 连接的 PredicateBuilder 优化 Linq 查询

> ID：12501848
> 
> 赞同：0
> 
> 时间：2012-09-19T19:49:52.080
> 
> 标签：linq-to-sql, dynamics-crm-2011, predicatebuilder

我正在使用 Linq 查询 MS CRM 2011 Web 服务。我有一个查询导致 SQL 很差，它获取了太多的中间数据，而且它的性能很糟糕！！我是新手，所以很可能是我使用它的方式......

我有两个通过 NN 关系链接的实体：`Product`和`SalesLink`. `Product`我想从他们那里恢复一堆`SerialNumber`以及与他们相关的所有`SalesLink`东西。

这是我使用 PredicateBuilder 的查询：

```
// Build inner OR predicate on Serial Number list
var innerPredicate = PredicateBuilder.False<Xrm.c_product>();
foreach (string sn in serialNumbers) {
   string temp = sn; // This temp assignement is important!
   innerPredicate = innerPredicate.Or(p => p.c_SerialNumber == temp);
}

// Combine predicate with outer AND predicate
var predicate = PredicateBuilder.True<Xrm.c_product>();
predicate = predicate.And(innerPredicate);
predicate = predicate.And(p => p.statecode == (int)CrmStateValueType.Active);

// Inner Join Query
var prodAndLinks = from p in orgContext.CreateQuery<Xrm.c_product>().AsExpandable()
                                                                    .Where(predicate)
                                                                    .AsEnumerable()
                   join link in orgContext.CreateQuery<Xrm.c_saleslink>()
                        on p.Id equals link.c_ProductSalesLinkId.Id
                   where link.statecode == (int)CrmStateValueType.Active
                   select new {
                         productId = p.Id
                       , productSerialNumber = p.c_SerialNumber
                       , accountId = link.c_Account.Id
                       , accountName = link.c_Account.Name
                   };
... 
```

使用 SQL 探查器，我看到它会导致没有 WHERE 子句的中间 SQL 查询，如下所示：

```
select 
top 5001 "c_saleslink0".statecode as "statecode"
  ...
, "c_saleslink0".ModifiedOnBehalfByName as "modifiedonbehalfbyname"
, "c_saleslink0".ModifiedOnBehalfByYomiName as "modifiedonbehalfbyyominame" 
from
 c_saleslink as "c_saleslink0" order by
 "c_saleslink0".c_saleslinkId asc 
```

这会返回大量（无用）数据。我认为加入是在客户端而不是在数据库端完成的......

我应该如何改进这个查询？我跑了大约 3 分钟，这是完全不能接受的。

谢谢。

* * *

# “解决方案”

根据 Daryl 对使用 QueryExpression 而不是 Linq to CRM 的回答，我得到了完全相同的结果。

```
var qe = new QueryExpression("c_product");
qe.ColumnSet = new ColumnSet("c_serialnumber");
var filter = qe.Criteria.AddFilter(LogicalOperator.Or);
filter.AddCondition("c_serialnumber", ConditionOperator.In, serialNumbers.ToArray());
var link = qe.AddLink("c_saleslink", "c_productid", "c_productsaleslinkid");
link.LinkCriteria.AddCondition("statecode", ConditionOperator.Equal, (int)CrmStateValueType.Active);
link.Columns.AddColumns("c_account");
var entities = serviceProxy.RetrieveMultiple(qe).Entities.ToList();;

var prodAndLinks = entities.Select(x => x.ToEntity<Xrm.c_product>()).Select(x => 
                   new {
                      productId = x.c_productId
                    , productSerialNumber = x.c_SerialNumber
                    , accountId = ((Microsoft.Xrm.Sdk.EntityReference)((Microsoft.Xrm.Sdk.AliasedValue)x["c_saleslink1.c_account"]).Value).Id
                    , accountName = ((Microsoft.Xrm.Sdk.EntityReference)((Microsoft.Xrm.Sdk.AliasedValue)x["c_saleslink1.c_account"]).Value).Name
                   }).ToList(); 
```

我真的很想找到使用 Linq 的解决方案，但似乎 Linq to CRM 还没有……

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T11:30:02.830

95% 的情况下，当您在 CRM 中遇到复杂查询的性能问题时，提高性能的最简单方法是对数据库运行直接 SQL 查询（当然，假设这不是在线 CRM）。这可能是 5% 的时间之一。

在您的情况下，您遇到的主要性能问题是由于谓词构建器强制 CRM 服务器（而不是 SQL 数据库）侧连接数据。如果您使用查询表达式（这是您的链接语句得到的翻译），您可以使用 IN 运算符指定条件表达式，该运算符允许您传入您的 serialNumbers 集合。您也可以使用 FetchXml。这两种方法都允许 CRM 执行 SQL 端连接。

编辑：

这应该让您使用 Query Expressions 完成 80% 的工作：

```
IOrganizationService service = GetService();
var qe = new QueryExpression("c_product");
var filter = qe.Criteria.AddFilter(LogicalOperator.Or);
filter.AddCondition("c_serialnumber", ConditionOperator.In, serialNumbers.ToArray());
var link = qe.AddLink("c_saleslink", "c_productid", "c_productsaleslinkid");
link.LinkCriteria.AddCondition("statecode", ConditionOperator.Equal, (int)CrmStateValueType.Active);
link.Columns.AddColumns("c_Account");
var entities = service.RetrieveMultiple(qe).Entities.ToList(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T20:07:52.853

您可能会发现不使用 Linq to Crm 可以获得更好的控制。你可以试试：

1.  FetchXml，这是一种 xml 语法，类似于 tsql [MSDN](http://msdn.microsoft.com/en-gb/library/gg328117.aspx)的方法。

2.  `QueryExpression`，[MSDN](http://msdn.microsoft.com/en-us/library/gg328300.aspx)。

3.  你可以发布一个`RetrieveRequest`，[博客](http://woodsworkblog.wordpress.com/2012/07/27/querying-crm-relationships/)。

# php - 在 PHP 中获取消息

> ID：12501853
> 
> 赞同：0
> 
> 时间：2012-09-19T19:50:04.210
> 
> 标签：php, url, get

我在 PHP 中尝试非常简单，但不太确定在此处或在 google 上搜索什么。

问题是——

在 PHP 函数中我想调用/获取一个 URL

> [http://www.example.com/message?Name=MyNameIsX](http://www.example.com/message?Name=MyNameIsX)

并喜欢阅读此 URL 的返回值（正文）（可能包含“您的姓名是 MyNameIsX”）

我试过

> $data = file_get_contents($url)

这是超时；虽然我可以在浏览器中打开 $url。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T19:55:43.653

是的，file_get_contents 正常用于此服务器上的文件，并且基于支持和设置这可能是不允许的。

参见 PHP CUrl [http://php.net/manual/en/curl.examples.php](http://php.net/manual/en/curl.examples.php)或示例 [http://php.net/manual/en/curl.examples.php](http://php.net/manual/en/curl.examples.php) , [http://php.net/manual/ en/curl.examples-basic.php](http://php.net/manual/en/curl.examples-basic.php)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T20:07:22.833

您可以按照 FIG-GHD742 的建议使用 cUrl，但我发现[HTTP 扩展](http://lt.php.net/manual/en/book.http.php)更易于使用。它更新并且有一个整洁的 OOP api。

另一种方法是您实际上可以对这些进行包含/要求，但如果您不控制数据的来源，那么这样做通常是个坏主意

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-19T20:04:45.623

听起来您需要在服务器上启用环回调用（自调用）。如果您需要在同一台服务器上获取数据，最好在后端获取数据。通过 PHP API 或对数据库的调用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-20T13:51:28.240

**

*   这将帮助你很多： http: [//php.net/manual/en/curl.examples.php](http://php.net/manual/en/curl.examples.php)
    [http://php.net/manual/en/curl.examples.php](http://php.net/manual/en/curl.examples.php) , [http://php.net/manual /en/curl.examples-basic.php](http://php.net/manual/en/curl.examples-basic.php)

**

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-09-19T20:00:11.760

是的，上面的答案是正确的。一些托管服务提供商出于安全目的禁用它。如果您不是在寻找 Curl 方式，您也可以尝试 fopen(php)。在此处阅读文档[http://php.net/manual/en/function.fopen.php](http://php.net/manual/en/function.fopen.php)

# c - 骰子游戏坚持原始分数但循环成功

> ID：12501854
> 
> 赞同：2
> 
> 时间：2012-09-19T19:50:10.170
> 
> 标签：c, function, srand

我正在用 C 编写一个程序，它将掷两个骰子并输出总和。游戏很简单，现在我正在合并一个函数和循环，以便使用将进行多次尝试。问题是第一次尝试后分数永远不会改变。所以我知道该功能正在工作，但不知何故循环正在抛出一些东西。这是我的代码：

```
#include<stdio.h>

//Function prototype
int RollScore(int , int);

main()
{
  int LoopCount;
  LoopCount = 0;

  for(LoopCount = 0; LoopCount < 11; LoopCount ++)
  {

 //Declare Variables
  int DieOne,DieTwo,DiceScore;

  //  One and Two will be hidden only Score will be output  
  DieOne = 0;
  DieTwo = 0;
  DiceScore = 0;

  printf("\n\n\tTo win you need a score of 7 or 11.");
  printf("\n\n\tPress a key to Roll the Dice!");

  //Trigger Random number generator and remove previous text    
  getch();
  system("cls");

  DiceScore = RollScore(DieOne , DieTwo);

  //Create Condition to either show user a win/lose output
  if (DiceScore == 7 || DiceScore == 11)
    {
                printf("\n\n\n\t\tYou Rolled a score of %d" , DiceScore);
                printf("\n\n\n\t\tCongratulation! You win!");

                LoopCount = 11;
    }//end if
     else
         {
                  printf("\n\n\n\t\tYou Rolled a score of %d" , DiceScore);
                  printf("\n\n\n\t\tSorry you have lost! Thanks for playing!");                 
                  printf("\n\n\t %d Attempt!" , LoopCount);
         }//end else

  //Prevent the IDE from closing program upon termination
  getch();
  system("cls");

  }//End For

}

//Function definition
int RollScore (int Dieone , int Dietwo)
{
return (srand() % 5) + 1 , (srand() % 5) + 1;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T19:51:50.313

```
return (srand() % 5) + 1 , (srand() % 5) + 1; 
```

调用`srand`一次以播种随机数生成器，然后调用`rand`以获取随机数。

[带有示例的基本 rand 函数文档](http://www.cplusplus.com/reference/clibrary/cstdlib/rand/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T20:00:45.863

首先，要获得 1 到 6 之间的值，您必须执行类似`srand() % 6 + 1`. 模 5 产生一个介于 0 和 4 之间的值，加 1 你会得到一个介于 1 和 5 之间的数字，6 永远不会出现。
第二次你要返回两个num之和，你只返回第二次平局的值。尝试 ：

```
//Function definition
int RollScore (int Dieone , int Dietwo)
{
  return (srand() % 6) + 1 + (srand() % 6) + 1;
} 
```

如果您想要抽签结果，请不要忘记使用指针...

```
//Function definition
int RollScore (int *Dieone , int *Dietwo)
{
  *Dieone = srand() % 6 + 1;
  *Dietwo = srand() % 6 + 1;
  return *Dieone + *Dietwo;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-19T19:53:57.953

srand() 用于初始化随机数生成器的种子，rand() 是实际返回随机数的函数，因此您需要在 for 循环之前调用 srand() 一次，

# yii - gii 404 错误。无法使用 Gii

> ID：12501858
> 
> 赞同：2
> 
> 时间：2012-09-19T19:50:16.730
> 
> 标签：yii, installation, http-status-code-404, gii

在[http://www.yiiframework.com/doc/blog/1.1/en/prototype.scaffold](http://www.yiiframework.com/doc/blog/1.1/en/prototype.scaffold)教程之后，它提到添加一些代码到 /blog/protected/config/main.php

```
return array(
    ......
    'import'=>array(
        'application.models.*',
        'application.components.*',
    ),

    'modules'=>array(
        'gii'=>array(
            'class'=>'system.gii.GiiModule',
            'password'=>'pick up a password here',
        ),
    ),
); 
```

这些是我的 main.php 代码的最后几行，如您所见，我已按照说明进行操作...

```
 'errorHandler'=>array(
            // use 'site/error' action to display errors
            'errorAction'=>'site/error',
        ),
        'log'=>array(
            'class'=>'CLogRouter',
            'routes'=>array(
                array(
                    'class'=>'CFileLogRoute',
                    'levels'=>'error, warning',
                ),
                // uncomment the following to show log messages on web pages
                /*
                array(
                    'class'=>'CWebLogRoute',
                ),
                */
            ),
        ),
    ),

    // application-level parameters that can be accessed
    // using Yii::app()->params['paramName']
    'params'=>array(
        // this is used in contact page
        'adminEmail'=>'example@example.com',
    ),
    'import'=>array(
        'application.models.*',
        'application.components.*',
    ),
    'modules'=>array(
        'gii'=>array(
            'class'=>'system.gii.GiiModule',
            'password'=>'pick up a password here',
        ),
    ),
); 
```

然而，当我访问 index.php?r=gii 时，我收到以下错误：

```
Error 404 Unable to resolve the request "gii". 
```

仅供参考 - 我使用的是最新的稳定版本 1.1.12。

**更新**

我删除了所有内容并重新开始，现在正在工作。一定是在途中做了什么傻事

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-06-09T00:30:21.200

好吧，您是否尝试过另一个 uri，例如：`localhost/site/error`？

如果得到 404 那么这是一个**.htaccess**问题，尝试将以下代码保存在根目录下的**.htaccess文件中：**

```
Options +FollowSymLinks
IndexIgnore */*
RewriteEngine on

# if a directory or a file exists, use it directly
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d

# otherwise forward it to index.php
RewriteRule ^.*$ /index.php [L] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T20:22:22.537

您已经在[http://pastebin.com/x3zWWLtm](http://pastebin.com/x3zWWLtm)`'modules'`的第 21 行获得了配置数组的键。删除您手动添加的密钥并在第 21 行取消注释：`'modules'``'gii'`

```
<?php

// uncomment the following to define a path alias
// Yii::setPathOfAlias('local','path/to/local-folder');

// This is the main Web application configuration. Any writable
// CWebApplication properties can be configured here.
return array(
        // ...

        'modules'=>array(
                // uncomment the following to enable the Gii tool
                /*
                'gii'=>array(
                        'class'=>'system.gii.GiiModule',
                        'password'=>'Enter Your Password Here',
                        // If removed, Gii defaults to localhost only. Edit carefully to taste.
                        'ipFilters'=>array('127.0.0.1','::1'),
                ),
                */
        ),
        // ...
    ); 
```

我刚刚下载了最新的 yii 并创建了一个 Web 应用程序：

```
f0t0n@lotus:~/public_html/localhost/yii$ php framework/yiic webapp ../yiiapp 
```

然后`gii`像我提到的那样取消注释包括在配置中的模块行，它工作完美：[http://localhost/yiiapp/index.php?r=gii](http://snag.gy/jIaBj.jpg)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-31T16:51:07.137

我遇到了同样的问题，我只是在 config/main.php 中临时注释了作为`rules`键值的数组内容：

```
'urlManager'=>array(
    'urlFormat'=>'path',
    'rules'=>array(/*
        '<controller:\w+>/<id:\d+>'=>'<controller>/view',
        '<controller:\w+>'=>'<controller>/index',
        '<controller:\w+>/<action:\w+>/<id:\d+>'=>'<controller>/<action>',
        '<controller:\w+>/<action:\w+>'=>'<controller>/<action>'*/
    ),
    'showScriptName'=>false,
), 
```

然后我访问`gii`，生成了我的控制器和视图，最后取消了这些行的注释。

# sql-server-2008 - 如何检查不同表的列中是否存在特定字符串？（微软 SQL 服务器）

> ID：12501864
> 
> 赞同：1
> 
> 时间：2012-09-19T19:50:40.613
> 
> 标签：sql-server-2008

我有 6 个不同的表，例如：dbo.One、dbo.Two、dbo.Three、.....、dbo.Six

我想检查 6 个不同表的任何列中是否存在某个字符串（例如：“CatWS_Energy_CB”）（该字符串不是整个列名，而是包含在列名中）。有没有办法做到这一点？我正在尝试在 SQL 中执行 if 语句，但我不太确定如何处理第一部分。

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T20:50:31.467

根据评论中的讨论，我认为这是您需要的。

```
SELECT Object_name(object_id, Db_id('Catastrophe'))
FROM   Catastrophe.sys.columns
WHERE  name LIKE '%CatWS_Energy_CB%'
       AND object_id IN ( Object_id('Catastrophe.dbo.One'), 
                          Object_id('Catastrophe.dbo.Two'), 
                          Object_id('Catastrophe.dbo.Three') ) 
```

# jquery - 带有哈希的 jQuery 选项卡

> ID：12501865
> 
> 赞同：0
> 
> 时间：2012-09-19T19:50:45.480
> 
> 标签：jquery, tabs

任何人都可以帮助我处理这段代码。我正在尝试使用哈希制作基本标签。但我不知道，怎么了……

[http://jsfiddle.net/QHdvP/1/](http://jsfiddle.net/QHdvP/1/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T19:59:21.193

为什么不使用 jquery ui 选项卡（[jqueryui 选项卡](http://jqueryui.com/demos/tabs/)）？

这里的第一个错误：

```
showTab($this); 
```

需要：

```
showTab($(this)); 
```

然后我无法理解哈希的逻辑：

```
var tabNumber = tabName.substr(4,1); //string.substr(start,length) 
```

没有名称为“tab-1”的元素

# java - 在 java/jsp 中远程登录 ip/port

> ID：12501866
> 
> 赞同：0
> 
> 时间：2012-09-19T19:50:50.640
> 
> 标签：java, html, jsp

我正在尝试制作一个 telnet ip 端口的脚本，以查看服务器是启动还是关闭。（就像你在窗口命令提示符下所做的那样。cmd [enter] => telnet 11.111.11.11 200 (ip& port) 如果连接成功，程序将返回 true 否则返回 false。我需要这段代码才能真正有效，因为这函数将进入forloop，在这里我为每个ip在网站上进行所有显示。提前Thnx

PS Ops 我的意思是 java/jsp 我不好哈哈

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T20:11:11.130

```
 try {
        InetAddress addr = InetAddress.getByName("java.sun.com");
        int port = 80;
        SocketAddress sockaddr = new InetSocketAddress(addr, port);

        // Create an unbound socket
        Socket sock = new Socket();

        // This method will block no more than timeoutMs.
        // If the timeout occurs, SocketTimeoutException is thrown.
        int timeoutMs = 2000;   // 2 seconds
        sock.connect(sockaddr, timeoutMs);
    } catch (UnknownHostException e) {
    } catch (SocketTimeoutException e) {
    } catch (IOException e) {
    } 
```

# javascript - 如何将对象传递给 onclick 事件

> ID：12501867
> 
> 赞同：4
> 
> 时间：2012-09-19T19:50:57.480
> 
> 标签：javascript, jquery

> **可能重复：**
> [Javascript 循环中的事件处理程序 - 需要闭包吗？](https://stackoverflow.com/questions/341723/event-handlers-inside-a-javascript-loop-need-a-closure)

我通过 API 调用获取了一些 json 对象。它具有以下格式：-

```
{data:[{id:"1",name:"some1",url:"someurl1"},{id:"2",name:"some2",url:"someurl2"}...]} 
```

我通过 jsonp 结果得到它，它被解析如下： -

```
function(results){
   for(var i=0;i<10;i++){
    item=document.createElement("div");
    item.innerHTML=results.data[i].name;
    item.onclick=function(){
        console.log(results.data[i]);  //--->this is where i am stuck 
      }
    }
 } 
```

如何将特定对象从循环传递到 onclick 事件。我的意思是创建的第一个 div 应该有一个带有第一个对象的数据的 onclick 事件，第二个 div 应该有来自第二个对象的数据。如果需要更多说明，请询问我

编辑：-如果我这样做：-

```
item.onclick=function(){
  console.log(results.data[1])
} 
```

我在所有项目的 onclick 事件中都得到了那个特定的对象，但这不是我想要的

编辑： - 这就是我最终解决它的方法。感谢 DCoder 指向的链接。

```
item.onclick =function(object){
           return function(){
           //do something with the object
           }

         }(obj); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T20:10:07.593

您总是可以使用 jQuery 的[数据](http://docs.jquery.com/Core/data#name)函数来存储和检索数据对象：

```
function(results){
  for(var i=0;i<10;i++){
    item=document.createElement("div");
    item.innerHTML=results.data[i].name;

    // Store object in data 
    $(item).data("results", results.data[i]);

    item.onclick=function(){
        // Retrieve the data needed
        var data = $(this).data("results");
        console.log(data);
      }
    }
 } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-19T20:13:51.630

快速解决方案：

```
function(results){
    for(var i=0;i<10;i++){
        (function(index){ // create a closure, this makes a new scope
            item=document.createElement("div");
            item.innerHTML=results.data[index].name;
            item.onclick=function(){
                console.log(results.data[index]);  //--->this is where i am stuck 
            }
        })(i);  // pass in i
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-19T19:59:05.853

当有人单击“项目”时，会从 jquery 触发 onclick 事件。除非使用触发器函数触发，否则您不能期望事件处理程序的自定义数据。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-19T20:06:46.830

在 js 中进行异步调用时遇到了麻烦。这是一个常见问题，在此处进行了描述：http: [//dojo-toolkit.33424.n3.nabble.com/Advice-on-closures-and-retaining-variable-values-inside-async-handlers-eg-xhrGet- td3227726.html](http://dojo-toolkit.33424.n3.nabble.com/Advice-on-closures-and-retaining-variable-values-inside-async-handlers-e-g-xhrGet-td3227726.html)

基本上， 的值`i`等于`9`实际运行 console.log 的时间。

一般来说，有很多方法可以解决这个问题，但您的具体解决方案可能应该是极大地重组事物。考虑这个替代方案（需要 jQuery），但如果没有它，我们也可以很容易地做到这一点。

```
$.each(results, function(data) {
  var $el = $("<div></div>").html(data.name).click(function() { console.log(data) });
}) 
```

但是最好使用[jQuery.data()](http://api.jquery.com/data/)来存储东西，然后使用`.on()`或`.delegate()`监听这样的点击事件

```
$.each(results, function(data) {
  var $el = $("<div></div>").addClass("yourThing").html(data.name).data("data", data);
})

// replace window with a closer parent if one exists
$(window).on("click", ".yourThing", function() {
   console.log($(this).data("data")); // retrieve data from jquerys .data() store
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-19T20:14:13.940

在您的 div 中添加一个隐藏字段（在循环中创建），保留您想要的任何内容。然后点击div。找到其中的隐藏字段（div）并读取其值。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-19T20:20:07.233

我个人会使用[`$.map`](http://api.jquery.com/jQuery.map/)所以函数回调为每次迭代创建一个新的执行上下文。

当您使用 jQuery 标记问题时，您的代码可以很简单

```
$($.map(data, function(v, i) {
    return $('<div>').html(data[i].name).click(function() {
        console.log(data[i]);
    });
})).appendTo('body'); //appending for demonstration purposes 
```

[**小提琴**](http://jsfiddle.net/ult_combo/x9gu5/)

当然，您必须将它包装在一个函数中并`data`像以前一样传递对象数组。

# python - 仅在 django 模板中显示唯一对象

> ID：12501876
> 
> 赞同：1
> 
> 时间：2012-09-19T19:51:09.397
> 
> 标签：python, django, django-templates, django-template-filters

我有一个对象列表。我想以这样一种方式显示这些对象，即如果后续对象包含相同的日期，则仅显示第一个唯一日期。如果日期与应显示的日期不同。这是一个例子。

数据：

*   ID：2，日期：“01/01/2010”
*   id：3，日期：“01/01/2010”
*   id：4，日期：“02/02/2010”

我要显示的内容：

*   id - 2，“2010 年 1 月 1 日”
*   编号 - 3，
*   id - 4，“2010 年 2 月 2 日”

看看 id 3 自从上一个日期是一样的之后怎么什么都没有显示？

如何使用 django 模板执行此操作？我尝试过的一件事是创建一个自定义过滤器。唯一的问题是它使用了一个全局变量，在我看来这是一个禁忌。如何在函数过滤器或 django 模板语言中维护状态以了解先前的值？

```
__author__ = 'Dave'
#This works but isn't best practice
from django import template
register = template.Library()

a = ''
@register.filter()
def ensure_unique(value):
    global a
    if a == value:
        return ''
    else:
        a = value
        return value 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T22:51:24.603

使用 simple_tag 让我更容易保存状态并准确地完成我需要做的事情。

```
from django import template
register = template.Library()

@register.simple_tag(takes_context=True)
def stop_repeat(context, event):
    """
    Finds various types of links embedded in feed text and creates links out of them.
    """
    if event.date:
        if (event.get_date_time_location(), event.id) in context:
            return ''
        else:
            context[(event.get_date_time_location(), event.id)] = (event.get_date_time_location(), event.id)
            return event.get_date_time_location() 
```

# php - foreach 中的适当安排

> ID：12501878
> 
> 赞同：0
> 
> 时间：2012-09-19T19:51:15.047
> 
> 标签：php, foreach

```
$random = rand(4, 23);
$range = range(1, $random ); 
```

嗨..伙计们，我在 foreach 函数中有一个随机范围值，我想用以下规则显示.. 我的目标是像方形框一样显示

如果我得到范围 1 到 3，它必须像这样显示表格

```
1 2
3 
```

如果范围从 1 到 6

```
1 2 3
4 5 6 
```

如果范围从 1 到 19

```
1   2  3  4  5
6   7  8  9 10
11 12 13 14 15
16 17 18 19 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T19:53:27.663

获取记录数的平方根的 ceil，然后只要您处于该值的 mod 等于 0 的索引处，就开始新的一行。因为你已经有类似的`$random`东西：

```
$dim = ceil(sqrt($random));

foreach ($range as $index => $number) {
    print $number;
    if (!(($index + 1) % $dim)) {
      print "\n";
    }
    else {
      print " ";
    }
} 
```

可能需要一些调整（我不在 PHP 模式 atm 中）并且也不考虑填充，但这应该很简单。

# java - Cargo 在远程服务器中部署 ROOT.war

> ID：12501881
> 
> 赞同：2
> 
> 时间：2012-09-19T19:51:33.697
> 
> 标签：java, tomcat, maven, deployment, cargo

我正在尝试使用[cargo 插件在正在运行的 tomcat 5.5.27 上进行远程部署](http://cargo.codehaus.org/Deploying+to+a+running+container)

在运行的构建服务器`mvn -P rdeploy-staging clean package cargo:redeploy` 上控制台没有错误，但应用程序没有在tomcat上启动，它应该在“/”根上下文中启动。

这是我用于远程部署的 Maven 配置文件：

```
<profile>
        <id>rdeploy-staging</id>
        <build>
            <finalName>ROOT</finalName>
            <resources>
                <resource>
                    <directory>src/main/resources-staging</directory>
                </resource>
                <resource>
                    <directory>src/main/resources</directory>
                </resource>
            </resources>
            <plugins>
                <plugin>
                    <artifactId>maven-antrun-plugin</artifactId>
                    <executions>
                        <execution>
                            <phase>validate</phase>
                            <goals>
                                <goal>run</goal>
                            </goals>
                            <configuration>
                            <tasks>
                                <copy file="${basedir}\src\main\webapp\WEB-INF\web_staging.xml"
                                        tofile="${basedir}\src\main\webapp\WEB-INF\web.xml" overwrite="true" />
                            </tasks>
                            </configuration>
                        </execution>
                    </executions>
                </plugin>
                <plugin>
                    <artifactId>maven-surefire-plugin</artifactId>
                    <configuration>
                        <skip>true</skip>
                    </configuration>
                </plugin>
                <!-- Cargo Plug in -->
                <plugin>
                    <groupId>org.codehaus.cargo</groupId>
                    <artifactId>cargo-maven2-plugin</artifactId>
                    <version>1.2.2</version>
                    <configuration>
                        <!-- Container configuration -->
                        <container>
                            <containerId>tomcat5x</containerId>
                            <type>remote</type>
                        </container>
                        <configuration>
                            <type>runtime</type>
                            <properties>
                                <cargo.remote.username>admin</cargo.remote.username>
                                <cargo.remote.password>admin</cargo.remote.password>
                                <cargo.hostname>server_ip</cargo.hostname>
                                <cargo.tomcat.manager.url>http://server_ip:8080/manager</cargo.tomcat.manager.url>
                            </properties>
                        </configuration>
                        <deployables>
                            <deployable>
                                <groupId>com.mycompany</groupId>
                                <artifactId>myapp</artifactId>
                                <type>war</type>
                            </deployable>
                        </deployables>
                    </configuration>
                </plugin>
            </plugins>
        </build>
    </profile> 
```

tomcat标准错误日志的输出：

> **信息**： validateJarFile(C:\Program Files\Apache Software Foundation\Tomcat 5.5\temp\1-ROOT\WEB-INF\lib\grizzly-servlet-webserver-1.9.35.jar) - jar 未加载。请参阅 Servlet 规范 2.3，第 9.7.2 节。违规类：javax/servlet/Servlet.class 2012 年 9 月 19 日下午 1:48:47 org.apache.catalina.loader.WebappClassLoader validateJarFile
> 
> **信息**： validateJarFile(C:\Program Files\Apache Software Foundation\Tomcat 5.5\temp\1-ROOT\WEB-INF\lib\javax.servlet-api-3.0.1.jar) - jar 未加载。请参阅 Servlet 规范 2.3，第 9.7.2 节。违规类：javax/servlet/Servlet.class 2012 年 9 月 19 日下午 1:48:48 org.apache.catalina.core.StandardContext 开始
> 
> **严重**：错误 listenerStart Sep 19, 2012 1:48:48 PM org.apache.catalina.core.StandardContext start
> 
> **SEVERE** : Context [] 启动因先前的错误而失败

# xaml - Visual Studio 2012 XAML 设计器垂直拆分不能设置为默认值？

> ID：12501885
> 
> 赞同：5
> 
> 时间：2012-09-19T19:51:48.427
> 
> 标签：xaml, visual-studio-2012, xaml-designer

是否仅`Horizontal Split`作为默认值而不存在`Vertical Split`？还是我的眼睛坏了？这是 VS2008 和 VS2010 中的一个问题，它是基于每个文件的，所以什么都没有改变？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-21T09:13:35.450

是的，目前没有办法在 VS2012 中默认为 XAML 设计器进行垂直拆分。

就像您提到的，此时唯一的方法是按文件执行，因为这些设置一起保存在您的 .suo 文件中。

这适用于 VS08 和 VS10 或 VS12...

如果您确实想让微软知道您希望这是一项功能，您可以[在此处向他们发送请求](https://connect.microsoft.com/VisualStudio)

[这](http://social.msdn.microsoft.com/Forums/en-US/1bdf2ddd-472c-4c17-ad2e-845f5bf1f086/default-designer-to-vertical-split-view?forum=vswpfdesigner)是有关此问题的原始线程。

有趣的是，他们的 HTML 设计器确实允许[默认为垂直拆分](http://weblogs.asp.net/scottgu/archive/2007/07/30/enabling-vertical-split-view-in-vs-2008.aspx)..

# asp.net - EF：更新存储在会话中的实体

> ID：12501895
> 
> 赞同：0
> 
> 时间：2012-09-19T19:52:29.327
> 
> 标签：asp.net, entity-framework

我将 EF 5 与 Web 窗体 (ASP.NET 4.5) 一起使用，采用“每个请求一个 DbContext 实例”的方法。

但是这种情况有点复杂：我有一个多步骤的创建/编辑屏幕，我将当前实体存储在 Session 中，然后我对其进行操作，在最后一步中，我将其提交到数据库。

创建一个新实例很好，但我无法终生编辑现有实体......因为这是另一个请求，我原来的 DbContext 实例丢失了，当我将它附加到一个新实例时，我得到了**一个实体对象不能被多个 IEntityChangeTracker**错误实例引用。

我的代码太复杂了，无法在这里发布，但我会尝试准确地总结一下：

我的数据库上下文：

```
public class AppContext : DbContext
{
    // DbSet declarations...

    public static AppContext Current { 
         get { var context = HttpContext.Current.Items["Contexts.AppContext"] as AppContext;
             if (context == null)
             {
                 context = new AppContext();
                 HttpContext.Current.Items["Contexts.AppContext"] = context;
             }
             return context; 
         }
    }
} 
```

页面代码的示例：

```
protected void Page_Load(object sender, EventArgs e)
{
    int? id = null; // After this, I try to get it from the QueryString, parse it, etc.. Omitted for sake of brevity 

    // If I have an ID, it means I'm editing...
    Session["Product"] = id.HasValue ? new Product() : AppContext.Current.Products.Find(id));

    MethodToPopulateFields(); // Internally, it uses the Session variable
}

protected void Step1(){ // through n
    // Manipulates the Session["Product"] based on page input...
}

protected void Save(){
    var product = Session["Product"] as Product;

    if(product.ID == 0)
        product = AppContext.Current.Products.Add(product);

    // throws an exception:
    // AppContext.Current.Entry(product).State = EntityState.Modified;

    // this too:
    // AppContext.Products.Attach(product);

    AppContext.Current.SaveChanges();
} 
```

我知道我可以从数据库中获取旧实体，手动更新并保存，所有这些都在最后一步，但我真的不想这样做......

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T20:36:59.813

试着打电话

```
AppContext.Current.Entry(product).State = EntityState.Detached; 
```

在第一种方法中。

# scala - 使用项目中的类的 sbt 自定义任务

> ID：12501897
> 
> 赞同：4
> 
> 时间：2012-09-19T19:52:35.397
> 
> 标签：scala, sbt

如何将自定义任务添加到使用（使用类、运行方法等）项目源的 sbt 构建定义？似乎它甚至在编译之前就试图找到它们。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-24T13:47:26.350

我需要知道你为什么要调用这些方法，因为这会改变答案。如果你想做某事...

### 构建相关

想要使用与构建相关的类/方法（minfiy 事物，将 jar/wars 上传到服务器等。）

*   您必须将其放入插件中，或者您需要将源代码放入项目文件夹中。
*   无法从您的项目中调用代码

如果它与构建相关，有人可能已经处理过类似的问题，并且可能已经有一个 sbt 插件，但如果没有，请告诉我，我可以解释创建 sbt 插件。

### 非构建相关

只想调用/测试与构建周期无关的方法。

*   您可以将其放在项目中名为 Script 的对象中（随便命名），启动控制台，然后导入脚本对象并运行。
*   为了使这更容易，您可以为控制台制作一个自定义导入脚本，该脚本会自动导入所有脚本，然后您可以运行

例如，打包脚本

```
object Script {
    def foo = println("I am doing things non-build related")
} 
```

在 sbt 现在运行

```
console
>> import script._
>> foo    // prints out  "I am doing things non-build related" 
```

# c# - TreeItem 滚动到所选项目

> ID：12501902
> 
> 赞同：1
> 
> 时间：2012-09-19T19:53:08.037
> 
> 标签：c#, .net, wpf

有谁知道如何将 TreeItem 滚动到所选项目。我一直在谷歌搜索，但不清楚的结果对我有用。我尝试了 BringIntoView() 但它不起作用......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T11:31:54.187

一个简单的解决方案是使用绑定到选定项的行为，请参阅： [Data binding to SelectedItem in a WPF Treeview](https://stackoverflow.com/questions/1000040/selecteditem-in-a-wpf-treeview)。将 OnSelectedItemPropertyChanged 修改为：

```
private static void OnSelectedItemPropertyChanged(DependencyObject sender, DependencyPropertyChangedEventArgs e)
{
  ((BindableSelectedItemBehavior) sender).OnSelectedItemChanged(e.NewValue);
}

private void OnSelectedItemChanged(object newValue)
{
  var treeViewItem = AssociatedObject.ItemContainerGenerator.ContainerFromItem(newValue) as TreeViewItem;
  treeViewItem.SetValue(TreeViewItem.IsSelectedProperty, true);
  treeViewItem.BringIntoView();
} 
```

# xml - XML 介绍（论文等）

> ID：12501904
> 
> 赞同：-2
> 
> 时间：2012-09-19T19:53:19.897
> 
> 标签：xml

有人知道一个很好的 XML 介绍，最好是一篇论文吗？我找到了很多网页，但没有论文。它不应该有太多的页面，也不能太复杂。我不想自己编写 XML 文档，我只需要理解它们。它是关于在 XML 文件中表示的代码。;)

非常感谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T19:55:59.713

在我看来[，这](http://www.w3schools.com/xml/default.asp)对您非常有用。我知道，这不是一篇论文，但它是学习基础知识和了解 XML 的全部内容的好地方。

# javascript - 如何忽略 div 弹出窗口下的点击？

> ID：12501908
> 
> 赞同：0
> 
> 时间：2012-09-19T19:53:25.980
> 
> 标签：javascript, html, click

我有一个可以激活的弹出窗口，但它下面的所有内容，即使您不再看到它，仍然接受点击。

我的弹出 div 的 CSS 是

```
#wrapper {
    position:fixed;
    border-top:0px;
    border-bottom:0px;
    z-index:1002;
    overflow:hidden;
    visibility:hidden;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T19:55:57.123

当弹出窗口出现时，您可以尝试将所有点击事件捕获到窗口，`event.stopImmediatePropagation();`如果您使用的是 jQuery，或者只是返回 false 以防止任何其他事件被调用，请执行 a。

然后在弹出窗口消失时删除此绑定。这就像在你所有的活动上盖上一层黑色的窗帘。

# java - java中STDIN的不同方式有哪些

> ID：12501911
> 
> 赞同：0
> 
> 时间：2012-09-19T19:53:44.233
> 
> 标签：java, stdin

我在想`STDIN`。`System.in`是`STDIN`Java 中的标准流。对于一般的建议，键盘是用来提供输入的，`STDIN`但是如果输入很大，包含的参数太多，那么使用键盘输入每个参数是相当困难的，也是不可能的。

对于相同的情况，有什么替代方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T20:05:57.253

> 服务器将如何提供 Java 代码的输入？

通常你会有一些罐头输入作为文件。所以你会跑

```
java -cp build-dir ClassName < input-N.txt > build-dir/output-N.txt 2>&1 
```

然后你会将你的 output-N.txt 与程序生成的进行比较，看看它是否足够接近。

这会将文件的所有内容传递到 System.in 并将所有输出写入 System.out 和 System.err 到输出文件。

# java - 使用 HttpComponents 设置和检索 Cookie

> ID：12501912
> 
> 赞同：4
> 
> 时间：2012-09-19T19:53:48.807
> 
> 标签：java, apache-httpcomponents

我试图弄清楚如何使用 HttpComponents 设置和检索 cookie，但我找不到可靠的文档，尤其是在请求上设置 cookie 时。我所拥有的似乎有效，但同时我无法确认我设置的 cookie 是否正确发送。

我注意到我在请求上设置的 cookie 在调用 client.execute() 之后也在 CookieStore 中，但我不确定这是否只是因为我在调用 client.execute() 之前将它添加到 CookieStore（也许是留在 CookieStore 中而没有实际与请求一起发送？）。有没有什么好的方法可以确认 cookie 已发送？

```
HttpGet get = new HttpGet("http://example.com/");
DefaultHttpClient client = new DefaultHttpClient();

// set the cookies
CookieStore cookieStore = new BasicCookieStore();
BasicClientCookie cookie = new BasicClientCookie("foo", "bar");
cookie.setDomain("example.com");
cookie.setPath("/something/");
cookieStore.addCookie(cookie);    
client.setCookieStore(cookieStore);

// get the cookies
HttpResponse response = client.execute(get);
List<Cookie> cookies = client.getCookieStore().getCookies(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T22:37:35.357

刚刚找到以下示例，该示例演示了在登录示例中使用 cookie：[HttpComponents Example with Cookies](http://wiki.apache.org/HttpComponents/QuickStart)

也许您可以通过服务器响应发送的 cookie 内容的方式来修改它，这样您就可以评估 cookie 是否真的被发送到服务器。（你发送带有“foo”、“bar”或一些随机值的cookie，服务器会用“bar”、“foo”或类似的东西响应）

# javascript - 如何在 ajax 投票中发送最后一类 div？

> ID：12501913
> 
> 赞同：0
> 
> 时间：2012-09-19T19:53:50.407
> 
> 标签：javascript, jquery, ajax-polling

我的 ajaxPoll 聊天系统有问题。我正在尝试将聊天消息的最后一个 ID 发送`div`回`php`，因此查询只能显示高于发送的最后一个 id 的结果。

所有聊天消息都在一个`div`被调用的`chat_log`. `div`一条消息周围会有一个带有消息id 的类。它将具有文本`message`，然后是该消息的 ID，例如：`class="message543"`. 好的，为了更容易理解，这里有一个 HTML 示例，其结构和顺序正确。

```
<div id='chat_log'>
    <div class='message435'></div>
    <div class='message436'></div>
    <div class='message437'></div>
    <div class='message438'></div>
    <div class='message439'></div>
    <div class='message440'></div>
    <div class='message441'></div>
</div> 
```

如您所见，div max 中有 7 条消息。任何高于此的消息都将被清除（如果一切正常，只需一点额外信息。）另外需要注意的是，我使用了[jquery](http://jquery.com/)库和一个 jquery 插件在[这里](http://pastebin.com/2wD5A2aE)找到，归功于[这篇](http://www.nickriggs.com/posts/simple-ajax-polling-plugin-for-jquery/)博文。（可以在[此处](http://www.nickriggs.com/posts/simple-ajax-polling-plugin-for-jquery/)找到有关插件功能的信息。）

* * *

我试过的：

```
function ajaxGo() {
    $.ajaxPollSettings.pollingType = "interval";
    $.ajaxPollSettings.interval = 700;
    $.ajaxPollSettings.maxInterval = 1000;
    $.ajaxPollSettings.durationUntilMaxInterval = 2000;

    var httpcount = 1;

    var lastDiv = lastDiv = $('#chat_log').find('div:last-child');
    var lastId = lastDiv[0].className.substring(7);

    $.ajaxPoll({
        url: "place_chat/update.php",
        type: "POST",
        data: {
            where: where,
            'last': lastId
        },
        dataType: "html",
        cache: false,

        successCondition: function (result) {
            var responseString = result;

            if (result != '') {
                $(result).appendTo('#chat_log').show();
                lastDiv = lastDiv = $('#chat_log').find('div:last-child');
                lastId = lastDiv[0].className.substring(7);
                console.log(lastId);
                httpcount = httpcount + 1;

                if (!hasFocus && !titleCurrentlyChanging) {
                    changeTitle();
                }

                soundHandle = document.getElementById('soundHandle');
                soundHandle.src = '../Sounds/Message.wav';
                soundHandle.play();
            }
        }

    });
}

$(document).ready(function () {
    $('#chat_log').append('<div class="message0">Test</div>');

    setTimeout(ajaxGo, 500);
}); 
```

* * *

代码去掉字符串'message'，然后获取数字。编码：

```
lastDiv = lastDiv = $('#chat_log').find('div:last-child');
lastId = lastDiv[0].className.substring(7);
console.log(lastId); 
```

...粘贴到控制台时可以正常工作并输出正确的 last `div`'s message `id`。

但是，当非手动运行时（可能是因为它不在函数或循环中或其他什么情况下）它不会，由于某种原因，代码仅`0`在有其他带有+`id`的消息时发送“” `1000`。我还尝试了很多其他的东西，比如`setInterval`'s，等等。我认为可能导致问题的一件事是变量范围，就好像当`function`调用成功的民意调查时，它不会调整`lastId`变量。我不完全确定是否是这种情况。如果是这种情况，我将不胜感激有关如何修复变量范围以使代码正常工作的支持。

*附带说明一下，php 运行成功，所以我不需要帮助。*

**重要编辑（使问题更容易理解）：**代码

```
lastDiv = lastDiv = $('#chat_log').find('div:last-child');
lastId = lastDiv[0].className.substring(7); 
```

...工作正常，它的周边区域（结构）似乎是问题所在。也`where`与此无关，`where`只是告诉 php 脚本是从哪里发送的。我知道在 first called 上附加了一个 div `test`，即将第一个定义`lastId`为`0`. **Loop**应该处理获取最新的，`lastId`但它没有。

**我发现**： `lastId`没有在 ajaxPoll 中编辑，它从 div 获取正确的 lastId，但没有编辑`lastId`。这几乎可以确定这是一个范围问题

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T21:00:10.033

一个问题是`ajaxPoll`。您创建要发送一次的数据，并且不会在每次轮询时重新评估。

另一个问题是函数`lastId`的本地问题`ajaxGo`。把它移到外面。

这是一个使用and的[jsfiddle](http://jsfiddle.net/morrison/bLbTH/)：`jQuery.ajax``setInterval`

```
var lastId = 0;

function ajaxGo() {

    $.ajax({
        url: "/echo/html/",
        type: "POST",
        data: {
            'last': lastId,
            html: '<div class="message' + (parseInt(lastId) + 1) + '">' + (parseInt(lastId) + 1) + '</div>'
        },
        dataType: "html",

        success: function(result) {

            if (result) {
                $(result).appendTo('#chat_log').show();
                lastDiv = $('#chat_log').find('div:last-child');
                lastId = lastDiv[0].className.substring(7);
                console.log(lastId);

/*                if (!hasFocus && !titleCurrentlyChanging) {
                    changeTitle();
                }

                soundHandle = document.getElementById('soundHandle');
                soundHandle.src = '../Sounds/Message.wav';
                soundHandle.play();*/
            }
        }

    });
}

var timer = setInterval(ajaxGo, 1000);​ 
```

一些与您的问题无关的代码已被注释掉或省略。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T21:01:18.143

如果是范围问题，可能会通过放置

```
var lastId = -1; 
```

在代码的顶部，然后替换`var lastId = ...`为`lastId = ...`.

# java - 在 Ant exec 任务中检测超时

> ID：12501917
> 
> 赞同：5
> 
> 时间：2012-09-19T19:54:08.460
> 
> 标签：java, android, ant

当你在 Ant exec 任务中设置了 timeout 属性，并且任务超时了进程，有没有办法检测到 timeout 呢？我在结果、输出或错误属性中没有看到任何有用的指示超时的信息。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-19T20:27:35.527

When [`<exec>`](http://ant.apache.org/manual/Tasks/exec.html) kills a subprocess due to a timeout, the parent Ant process logs the message `Timeout: killed the sub-process`. However, since the `<exec>` redirector only captures output from the subprocess, there is no indication of the timeout in the `<exec>` `outputProperty` or `errorProperty`.

To set a property indicating the subprocess timed out, Ant's log output can be captured using the [`<record>`](http://ant.apache.org/manual/Tasks/recorder.html) task as demonstrated in the following example.

```
<target name="exec-timeout">
  <record name="exec.log" action="start" />
    <exec executable="java" timeout="1500">
      <arg line="-jar /path/to/executable.jar" />
    </exec>
  <record name="exec.log" action="stop" />      

  <condition property="timed-out" else="false">
    <resourcecontains resource="exec.log"
        substring="Timeout: killed the sub-process" />
  </condition>
  <delete file="exec.log" />

  <echo message="exec timed out: ${timed-out}" />
</target> 
```

### Output

```
exec-timeout:
     [exec] Timeout: killed the sub-process
     [exec] Result: 143
     [echo] exec timed out: true

BUILD SUCCESSFUL
Total time: 2 seconds 
```

# sql-server - 不确定如何将 SQL 全文搜索查询转换为 Linq to Entities 表达式

> ID：12501919
> 
> 赞同：1
> 
> 时间：2012-09-19T19:54:11.680
> 
> 标签：sql-server, linq, entity-framework, linq-to-entities

我需要帮助将简单的 SQL 包含查询转换为 Linq to Entities 等效项。我正在使用 EF 4、MVC 4、VS 2012 和 SQL 2008。我在表上创建了全文索引。

这是我的查询：

```
SELECT * FROM Media WHERE CONTAINS (*, 'cat') 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T20:00:22.793

EF 不支持全文搜索。如果您只搜索一列，您可以尝试使用 .Contains。在您的情况下，您可能只想将 Sql 查询发送到数据库而不是使用 Linq，因为上述查询没有等效项。

# hadoop - Hadoop 是否旨在解决需要对相同数据进行多次并行计算但参数不同的问题？

> ID：12501920
> 
> 赞同：3
> 
> 时间：2012-09-19T19:54:14.553
> 
> 标签：hadoop

从我所读到的少量内容中，我了解到 Hadoop 非常适合处理以下一类问题——通过在可能的多个节点之间分配计算来回答一个庞大的问题。

Hadoop 是否旨在解决涉及多个计算的问题，在同一个数据集上，但每个都有不同的参数？例如，基于相同的主数据集，但使用不同的参数模拟不同的场景（例如，在相同的数据集上测试数据挖掘模型，但产生多次模拟迭代，每次迭代都有不同的参数集并找到最佳模型)

例如，对于一个预测天气的模型，它有一组具有不同权重的规则，Hadoop 是否支持运行相同的模型，但每个“节点”在学习集上以不同的权重值运行并比较预测结果以找到最佳模型？

或者这是 Hadoop 根本不适合做的事情？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-19T22:46:48.663

这并不是它的设计初衷。通常，您希望能够将数据集的不同部分分布到不同的节点。这是 hadoop 背后的主要思想之一：将庞大的数据集拆分到多个节点上，并将计算带到数据中。但是，它仍然绝对可以在不跳过太多圈子的情况下完成。

我不确定您对 MapReduce 范式有多熟悉，但您可以将模型的参数视为地图任务的“输入”。将数据集放在 HDFS 中的某个位置，并编写 MapReduce 作业，以便地图任务从 HDFS 中读取数据集，然后使用给定参数评估模型。所有的 map 输出都被发送到一个 reducer，它简单地输出给出最高分数的参数。如果您使输入文件（模型参数）的数量等于节点的数量，您应该每个节点获得一个地图任务，这就是您想要的。

# java - 如何在 JFreeChart 散点图中找到离鼠标最近的点？

> ID：12501924
> 
> 赞同：1
> 
> 时间：2012-09-19T19:54:26.507
> 
> 标签：java, jfreechart

我需要能够从 MouseListener 返回一个点，并确定散点图中最近的点。我将 JFreeChart 与 XYDataset 一起使用。

我在我的 ChartPanel 中添加了一个鼠标侦听器，并试图将这些 x,y 值与我遍历数据并检查它们的位置时返回的值进行比较。我的代码看起来像这样：

```
ValueAxis domainAxis = chartPanel.getXYPlot().getDomainAxis();
ChartArea chartArea = chartPanel.getChartRenderingInfo().getChartArea();

for(int i=0; i < myXYData.getItemCount(0); i++) {
    double mouseX = e.getX(); // e is the MouseEvent
    double pointX = domainAxis.valueToJava2D(myXYData.getX(0, i), chartArea, RectangleEdge.BOTTOM);
    System.out.println("difference is " + (pointX - mouseX));
} 
```

问题是 MouseEvent 报告的点相对于 ChartPanel 的左上角，因此 (0,0) 位于标题上方，位于 x 轴标签的左侧。然而，valueToJava2D 方法给出的是相对于绘制值的区域的值，因此 (0,0) 位于图形标题下方和 x 轴标签的右侧。这意味着当鼠标直接在我的一个数据点上时，我得到一个非零差异！

我该如何解决这种差异？

谢谢，埃里克

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T21:27:29.167

我会看一下，[这里](https://stackoverflow.com/a/8525187/230513)和[这里](https://stackoverflow.com/a/8002959/230513)`ChartMouseListener`都有插图。

如果这还不够，您可能必须查看轴，其中区域和边缘有意义。

它可能有助于解释目标，而不是您当前的方法。或者，编辑您的问题以包含显示您当前方法的[sscce 。](http://sscce.org/)许多简短的例子可以在[这里](https://stackoverflow.com/search?q=user:230513%20%5Bjfreechart%5D%20ChartFactory.createScatterPlot&submit=search)找到。

附录：*最大点数的实际限制非常小。*

对于合理的点数，您可以放大`Shape`，如此[处](https://stackoverflow.com/a/7285922/230513)和[此处](https://stackoverflow.com/a/9875534/230513)所示；另见。要调出详细信息，请考虑使用自定义工具提示生成器，[在此处](https://stackoverflow.com/a/6770477/230513)进行检查。[`ShapeUtilities`](http://www.jfree.org/jcommon/api/org/jfree/util/ShapeUtilities.html)

# java - 使用 Android，将画布大小限制为使用 layoutparams 指定的 View 大小

> ID：12501925
> 
> 赞同：0
> 
> 时间：2012-09-19T19:54:26.610
> 
> 标签：java, android, layout, view, android-canvas

创建自定义视图并覆盖它的 onDraw()。

*   不覆盖 onMeasure() 画布占据设备的整个屏幕。
*   覆盖 onMeasure()，画布被重新调整为传递给 setMeasuredDimension() 的尺寸。

因此，我们可以确定地调整画布的大小，并且必须在 onMeasure() 中完成。

我想将自定义视图的画布重新调整为 LayoutParams（XML 或 Java）中指定的大小

现在需要方法/属性，它将返回 LayoutParams 中提到的大小参数以在 setMeasuredDimension() 内部传递。

*   getWidth()/getHeight() - 仅在第一次通过 onMeasure() 后设置值

*   getLayoutParams().width/getLayoutParams().height - 不确定该值何时返回有效值（以编程方式设置参数给出值“-1”）

*   getMeasuredWidth()/getMeasuredHeight() - 仅当它已在 XML 中设置时返回在布局参数中指定的尺寸参数，而不是在以编程方式分配的情况下。

是否有任何其他保证方法将返回已在 customview 的布局参数中设置的宽度和高度，或者 getMeasuredWidth()/getMeasuredHeight() 是传入 setMeasureDimensions() 的正确选择？

可能与[Android 自定义视图大小重复](https://stackoverflow.com/questions/12380461/android-custom-view-size)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T20:11:19.733

一种解决方案是从 Activity 获取维度并将它们传递给 View。

```
DisplayMetrics metrics = new DisplayMetrics();
getWindowManager().getDefaultDisplay().getMetrics(metrics); 
```

`metrics.widthPixels`将为您提供所需的宽度

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T09:23:05.643

[正如他所说](https://stackoverflow.com/questions/12501925/using-android-restricting-canvas-size-to-views-size-which-is-specified-using-l#comment16824966_12501925)，归功于@Luksprog 。有了这些信息，我可以弄清楚以下内容：

getLayoutParams().width/getLayoutParams().height - 可以包含以下任一值

*   LayoutParams.WRAP_CONTENT（其值为-2）
*   LayoutParams.MATCH_PARENT（其值为-1）或
*   视图属性中指定的宽度（在 XML 中） layout_width

getMeasuredWidth()/getMeasuredHeight()（也是 onMeasure() 的 i/p 参数） - 将保持此视图的最大尺寸，可以在*PIXELS*中明显占用。

因此，回答我自己的问题：我们需要在 onMeasure() 中添加逻辑，*使用*这些方法来限制画布大小，以回答与这篇文章相关的问题，或者您自己的计算来调整画布大小！

# c++ - gsl_matrix 等的 Boost 或 TR1 等价物

> ID：12501927
> 
> 赞同：2
> 
> 时间：2012-09-19T19:54:30.613
> 
> 标签：c++, boost, open-source, tr1

我不能使用`gsl_matrix`，因为我的应用程序是封闭源代码，根据[这个问题](https://stackoverflow.com/questions/842776/gpl-license-in-closed-source-application)，如果我直接使用 GPL 代码，我必须让我的应用程序开源。这是上级禁止的。

那么...... Boost，甚至更好的 TR1，是否有一个库，其类相当于[GNU 科学库](http://www.gnu.org/software/gsl/)`gsl_matrix`中`gsl_vector`的其他类型？如果有这样的类，它们怎么称呼？

**编辑：**我需要：

*   执行密集矩阵向量乘积和求和（like `gsl_blas_dgemv`and `gsl_blas_dgemm`do）
*   （可选）求解[二次规划](http://en.wikipedia.org/wiki/Quadratic_programming)模型。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T21:17:13.907

首先，[BLAS/LAPACK 有 C 接口](http://www.netlib.org/blas/faq.html#7)。有些人发现处理直接反映原始 BLAS 的调用签名“很难”。

如果您更喜欢更高级的方面，则有[Boost uBLAS 界面](http://www.boost.org/doc/libs/1_51_0/libs/numeric/ublas/doc/index.htm)，还有[犰狳](http://arma.sourceforge.net/)，仅举两例。在性能方面，您的里程可能会有所不同。

# javascript - 在新窗口中写入 div

> ID：12501928
> 
> 赞同：0
> 
> 时间：2012-09-19T19:54:35.597
> 
> 标签：javascript, html

我有一个 HTML 页面，X.html：

```
......
<div id = "content"></div>
...... 
```

我使用以下代码打开 X.html 并想在内容 div 中写一些东西。

```
content = "show in the div in the new window";
newWindow = window.open('X.html','');
newWindow.document.getElementById("content").innerHTML = content; 
```

这行不通。我用的是Firebug，弹出新窗口后代码结束。我不想在 X.html 中编写整个内容，我想使用这种简单的方式在 X.html 的特定区域中编写内容。

我应该怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T20:02:19.177

我相信这会对你有所帮助。

[http://www.javascripter.net/faq/writingt.htm](http://www.javascripter.net/faq/writingt.htm)

# android - OnSharedPreferenceChangeListener 实现

> ID：12501931
> 
> 赞同：0
> 
> 时间：2012-09-19T19:55:08.543
> 
> 标签：android, android-preferences

我有一个 listView 活动，需要应用和保存用户做出的一些首选项。我的 ListView 的每一行都包含两个 TextView（年份和国家/地区）。

我以这种方式处理 onSharedPreferenceChanged 事件：

```
SharedPreferences prefs = PreferenceManager.getDefaultSharedPreferences(this);
prefs.registerOnSharedPreferenceChangeListener(new SharedPreferences.
        OnSharedPreferenceChangeListener() {
    public void onSharedPreferenceChanged(SharedPreferences prefs,
            String key) {
        TextView year = (TextView) findViewById(R.id.year);
        year.setTextSize(Float.parseFloat(prefs.getString(key, null)));
        TextView country = (TextView) findViewById(R.id.country);
        country.setTextSize(Float.parseFloat(prefs.getString(key, null)));
    }
}); 
```

但更改仅适用于第一行，其他与以前相同。

我应该怎么做才能为列表的每一行应用新设置？感谢您的回答。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T19:49:52.340

将您的代码更改为：

```
OnSharedPreferenceChangeListener listener; // class field

// in onResume()
SharedPreferences prefs = PreferenceManager
        .getDefaultSharedPreferences(this);
listener = new SharedPreferences.
        OnSharedPreferenceChangeListener() {
    public void onSharedPreferenceChanged(SharedPreferences prefs,
            String key) {
        TextView year = (TextView) findViewById(R.id.year);
        year.setTextSize(Float.parseFloat(prefs.getString(key, null)));
        TextView country = (TextView) findViewById(R.id.country);
        country.setTextSize(Float.parseFloat(prefs.getString(key, null)));
    }
};
prefs.registerOnSharedPreferenceChangeListener(listener);
// unregister in onPause() 
```

有关说明，请参见[此处](https://stackoverflow.com/a/3104265/281545)

# mongodb - 在 mongoid 中使用嵌入式文档与使用数组的优缺点是什么？

> ID：12501934
> 
> 赞同：2
> 
> 时间：2012-09-19T19:55:17.070
> 
> 标签：mongodb, mongoid

当您可以简单地使用数组数据类型时，使用嵌入式文档的优缺点是什么？两者似乎都与我相似（我无法通过谷歌搜索在线找到任何信息）。请提供案例！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-20T05:11:24.457

就数据结构而言，您可以将*嵌入式文档*视为[散列](http://en.wikipedia.org/wiki/Hash_table)或字典……而*数组*是值的列表。

在 MongoDB 中嵌入文档：

*   嵌入文档有命名字段，可以嵌入其他文档，实现丰富的数据表示
*   [您可以使用点分符号](http://www.mongodb.org/display/DOCS/Dot+Notation+%28Reaching+into+Objects%29)直接引用字段
*   在嵌入的文档字段上创建索引只索引该字段
*   您可以使用[字段选择](http://www.mongodb.org/display/DOCS/Querying#Querying-FieldSelection)来检索字段的子集。

在 MongoDB 中使用数组：

*   您可以使用、、和等[运算符](http://docs.mongodb.org/manual/reference/operators)来操作数组。`$push``$pop``$pull``$addToSet`
*   `$all`您可以使用, `$in`,等运算符匹配数组值`$nin`。
*   您还可以使用[多键索引](http://www.mongodb.org/display/DOCS/Multikeys)
*   在数组元素上创建索引会索引数组的每个元素。
*   您可以使用[`$slice`运算符](http://www.mongodb.org/display/DOCS/Retrieving+a+Subset+of+Fields#RetrievingaSubsetofFields-RetrievingaSubrangeofArrayElements)来检索数组的子集。

Mongoid 的[关系](http://mongoid.org/en/mongoid/docs/relations.html)概念表达了嵌入文档和数组的几种不同组合：

*   embeds_one - 单个嵌入文档
*   embeds_many - 嵌入文档的数组

# java - 构建单独的 Java 类层次结构

> ID：12501936
> 
> 赞同：2
> 
> 时间：2012-09-19T19:55:42.000
> 
> 标签：java, object, hierarchy, class-hierarchy

Java 中的所有其他类都继承自[Object](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/Object.html)类。

**是否可以基于我自己的`FastObject`类在 Java 中添加第二个完全独立的类层次结构？**

我这样做的最初目标是创建更小、更快的对象，并且专门为某些算法设计的功能更少。但让我明确一点，我对这是否是一个“好主意”不感兴趣。我只是想知道这是否可能；我一直无法找到这样做的方法。是否需要更改 JVM？新的引导类路径功能？真正的解决方案是忽略`Object`并考虑更换`java.lang.Class`吗？使用直接 Java 编译器而不是 VM 会让我的工作更轻松吗？

需要明确的是，我不只是想编辑根`Object`类。这可能需要重新编写整个 Java 库。我不想替换当前的层次结构，我只想创建一个可以在同一代码中使用的单独的层次结构。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T19:59:32.170

不，这是不可能的。

所有创建的类都显式或隐式扩展另一个类。如果您创建一个类并明确定义它扩展的类，那么它会扩展该类。如果不是，则它隐式扩展`Object`. 没有办法解决这个问题，就像没有办法重载运算符或类似的东西一样。它是 Java 编程语言的基本设计决策。

所有类都扩展`Object`. 唯一不是原始类型的东西。当然，它本身是个例外`Object`，它不会扩展自身。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T19:58:14.860

您可以通过使用引导类路径来注入自己的 Object 实现。但是，我认为没有任何方法可以使用 Object 以外的基础对象。您可以尝试一些字节码操作，但您修改的类完全有可能被类加载器拒绝。

# select - 淘汰赛 - 根据选择/下拉选择更新 UI（过滤数据）？

> ID：12501939
> 
> 赞同：0
> 
> 时间：2012-09-19T19:55:55.027
> 
> 标签：select, knockout.js, filtering, knockout-mapping-plugin

如何根据选择/下拉菜单中的选择更新此 UI？

例如，如果我从选择/下拉列表中选择一个成员名称，我希望表格更新/过滤以仅显示那些成员行（成员名称在最右列）及其相应的日期标题（灰色背景）。

如果我从选择/下拉列表中选择提供者名称），我希望表格更新/过滤以仅显示那些提供者行（左列中的提供者名称）及其相应的日期标题（灰色背景）。

我正在使用 KO 映射插件。虚拟数据是硬编码的，最终会通过 ajax 返回。

这是所有代码的一部分（它们都只是内联在 HTML 窗格中）。如果需要，您也可以复制/粘贴它并在本地运行它。

[http://jsfiddle.net/qBGTh/](http://jsfiddle.net/qBGTh/)

非常感谢任何帮助/指导！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T20:44:18.637

*我的建议是在eob*级别使用*计算*值返回过滤后的数组。*要在映射*过程中添加此计算值，您必须使用映射选项参数中的*创建*回调自定义*eob*对象创建（请参阅[映射文档](http://knockoutjs.com/documentation/plugins-mapping.html)）

 ***这是更新的[小提琴](http://jsfiddle.net/gbos/hA5Vj/3/)，可以看到它的实际效果。

另外不要忘记再添加 2 个 observables 来捕获 2 个*选择*元素的当前值。计算值将取决于这 2 个 observables。

> *注意：提供的小提琴不会在 IE 上运行，因为映射*javascript所在的 github 不会返回 IE 所需的*内容类型*标头。***

# java - Android：单击后更改操作栏图标，并在 onCreate() 后更改回来

> ID：12501943
> 
> 赞同：0
> 
> 时间：2012-09-19T19:56:19.743
> 
> 标签：java, android, android-layout, android-actionbar

我尝试将操作栏的图标更改为`onOptionsItemSelected(MenuItem)`方法中的进度条。

```
 public boolean onOptionsItemSelected(MenuItem item) {
    switch (item.getItemId()) {
    case android.R.id.home:
        NavUtils.navigateUpFromSameTask(this);
        return true;
    case R.id.progressitem2:
        mProgress = item;
        mProgressCreate = mProgress;
        mProgress.setActionView(R.layout.progress);
        mLayout.removeView(mTable);
        // Execute code that change mTable again.
        return true;
    } 
```

进度.xml 文件：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
              android:layout_width="wrap_content"
              android:layout_height="wrap_content"
              android:addStatesFromChildren="true"
              android:focusable="true"
              android:paddingLeft="4dp"
              android:paddingRight="4dp"
              android:gravity="center" >
    <ProgressBar
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:focusable="true"
            style="@android:style/Widget.ProgressBar.Small"/>

</LinearLayout> 
```

操作栏是这样创建的：

```
@Override
public boolean onCreateOptionsMenu(Menu menu) {
    getMenuInflater().inflate(R.menu.actionbar, menu);
    mProgress = menu.getItem(0);
    mProgressCreate = mProgress;
    return true;
} 
```

action_menu.xml

```
<?xml version="1.0" encoding="utf-8"?>
<menu xmlns:android="http://schemas.android.com/apk/res/android">
        <item android:id="@+id/progressitem2" 
            android:icon="@drawable/ic_action_refresh"
            android:title="Reload"
            android:showAsAction="ifRoom|withText"
            android:visible="true" />
</menu> 
```

这很好用。单击操作栏图标后会显示进度图标。

我尝试保留原始操作栏符号的引用，`mProgressCreate`并尝试在方法末尾添加操作视图`onCreate()`：

```
mProgress.setActionView(mProgressCreate.getActionView()); 
```

但这不起作用...

这里有什么问题？

问候， 桑德罗

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T07:27:25.843

我找到了解决方案。`invalidateOptionsMenu()`在我重置动作视图之前我只是忘记打电话了`mProgress.setActionView(mProgressCreate.getActionView());`

```
invalidateOptionsMenu();
mProgress.setActionView(mProgressCreate.getActionView()); 
```

一切正常:-)。

# mysql - MySQL中多个字段的唯一约束

> ID：12501944
> 
> 赞同：1
> 
> 时间：2012-09-19T19:56:22.817
> 
> 标签：mysql

假设我有一个包含以下字段的表：

```
primaryEmail | secondaryEmail 
```

我知道如何`UNIQUE`在其中一个字段上创建一个约束，并且我知道如何创建一个**结合**`UNIQUE`两个字段的约束，但是有没有办法确保没有值存在两次，跨越两列？例如，如果字段中有值，我不希望它能够再次出现在字段或字段中。**`joe@example.com``primaryEmail``primaryEmail``secondaryEmail`**

 *** * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T20:55:10.023

您可能会考虑修改您的数据模型并将电子邮件地址拉到另一个表，然后将新表和旧表关联在一起。在我的脑海中，这样的事情应该可以工作

```
create table master (
  id int not null primary key,
  name varchar(64)
);

create table email (
  id int not null primary key,
  address varchar(128) not null unique,
  parent_id int not null,
  type enum('prim', 'secd'),
  foreign key (parent_id) references master(id)
    on delete cascade,
  unique (parent_id, type)
); 
```

我不喜欢这种设计——例如，我不喜欢枚举——但它会解决你的唯一性限制。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T20:01:41.207

在我看来，如果这确实是你想要完成的事情，你会想要在那个领域设置两个单独的约束。您实际上要做的是两件不同的事情（确保该列在记录中是唯一的，并确保该行中的列对于整个表也是唯一的）。**

# c# - 使用 HTMLAgilityPack 单独选择 HTML 选项值

> ID：12501945
> 
> 赞同：1
> 
> 时间：2012-09-19T19:56:25.230
> 
> 标签：c#, html-agility-pack

我试图将选项列表的值作为单个项目获取，但此代码只是将整个列表抓取到一个元素中。这是我正在使用的代码：

```
List<string> chapterTitles = new List<string>();
HtmlNode.ElementsFlags.Remove("option");
doc.LoadHtml(htmlContent);
foreach (HtmlNode node in doc.DocumentNode.SelectNodes("//select[@id='chap_select']/option"))
chapterTitles.Add(node.InnerText); 
```

发生的情况是 chapterTitles 中的第一个元素具有完整的选项值集，而不是（例如）列表中有 12 个不同的条目对应于具有 12 个值的选项列表。

这是我要解析的 HTML 段：

```
<SELECT id=chap_select title="Chapter Navigation" Name=chapter onChange="self.location = '/s/5231611/'+ this.options[this.selectedIndex].value + '/Behind-Enemy-Lines-I-Light-Hammer';"><option  value=1 selected>1\. Prologue<option  value=2 >2\. Chapter One<option  value=3 >3\. Chapter Two<option  value=4 >4\. Chapter Three<option  value=5 >5\. Chapter Four<option  value=6 >6\. Chapter Five<option  value=7 >7\. Chapter Six<option  value=8 >8\. Chapter Seven<option  value=9 >9\. Chapter Eight<option  value=10 >10\. Chapter Nine<option  value=11 >11\. Chapter Ten<option  value=12 >12\. Chapter Eleven</select> 
```

有什么建议么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T05:13:15.540

HtmlAgilityPack 似乎并不能很好地解析该代码。例如，代码

```
<option  value=3 >3\. Chapter Two<option  value=4 >... 
```

真的应该

```
<option value="3">3\. Chapter Two</option>
<option value="4">... 
```

所以，我建议你解析的内容是：

```
var doc = .. //Load the HTML code here.
foreach (HtmlNode node in doc.DocumentNode.SelectNodes("//select[@id='chap_select']/option")) {
    chapterTitles.Add(node.NextSibling.InnerText);
} 
```

主要的两个区别：

1.  我删除了`HtmlNode.ElementsFlags.Remove("option");`
2.  文本位于节点旁边`option`（而不是内部）的节点中；

# version-control - Mercurial 通过 VPN 连接速度非常慢

> ID：12501947
> 
> 赞同：5
> 
> 时间：2012-09-19T19:56:38.627
> 
> 标签：version-control, mercurial, vpn, mercurialeclipse

我们的团队使用 Mercurial 已经有一段时间了，一切都很好。我们都有存储库的克隆，并将命名分支推/拉到集中式 Windows 服务器，该服务器位于我们的 LAN 上，通过映射驱动器访问。

问题是我最近开始远程工作，性能显着下降。我通过 VPN 连接到办公室并像往常一样访问共享驱动器，但过去 20-30 秒的推送现在需要 10 多分钟！

我有一个不错的电缆连接（30Mpbs/2Mbps），所以我不希望小的更改需要这么长时间才能推送，但似乎无论我的更改集有多小，都会交换许多 MB（通过在推送期间监控网络适配器） ）。即使我只修改了源文件中的一行，情况也是如此。它似乎也取决于存储库的大小，存储库越小越好，但它永远不会“快”。

我不熟悉 Mercurial 推送中涉及的内容，但似乎它需要在主存储库和我的存储库之间来回做很多事情才能最终决定发送什么。

我刚刚完成了 5 个文件的推送，总共添加了不到 5KB 的代码，这是我`hg push -b branch --debug --time`超过 13 分钟的结果！

这是 VPN 上的“正常”还是我缺少某种关键配置？

```
C:\inetpub\www\app1>hg push -b mynewbranch --new-branch --debug --time
pushing to X:\app1
query 1; heads
searching for changes
taking initial sample
searching: 2 queries
query 2; still undecided: 4, sample size is: 4
2 total queries
listing keys for "bookmarks"
5 changesets found
list of changesets:
7327fd8a913d019475783693fba7afc790bba11a
967e02cbdddb844b0cf1b67b452ff8e96614daa6
b5c9166ca22e98c499d71c9a0b7da2c36649f9f5
7e30ec219db545ba9309f7b8e8b015cf2a652383
79d028c22d2bc4554092ba5bad8249c7129d3caf
adding changesets
bundling: 1/5 changesets (20.00%)
bundling: 2/5 changesets (40.00%)
bundling: 3/5 changesets (60.00%)
bundling: 4/5 changesets (80.00%)
bundling: 5/5 changesets (100.00%)
bundling: 1/5 manifests (20.00%)
bundling: 2/5 manifests (40.00%)
bundling: 3/5 manifests (60.00%)
bundling: 4/5 manifests (80.00%)
bundling: Core/Module/Desktop/Display/file1.x 1/5 files (20.00%
)
bundling: Core/Module/Desktop/Display/file2.x 2/5 files (40.00%
)
bundling: Core/Module/Individual/Display/file3.x 3/5 files (60.00%
)
bundling: Core/Module/Individual/Forms/file4.x 4/5 files (80.
00%)
bundling: Public/Module/Desktop/file5.js 5/5 files (100.00%)
changesets: 1 chunks
add changeset 7327fd8a913d
changesets: 2 chunks
add changeset 967e02cbdddb
changesets: 3 chunks
add changeset b5c9166ca22e
changesets: 4 chunks
add changeset 7e30ec219db5
changesets: 5 chunks
add changeset 79d028c22d2b
adding manifests
manifests: 1/5 chunks (20.00%)
manifests: 2/5 chunks (40.00%)
manifests: 3/5 chunks (60.00%)
manifests: 4/5 chunks (80.00%)
adding file changes
adding Core/Module/Desktop/Display/file1.x revisions
files: 1/5 chunks (20.00%)
adding Core/Module/Desktop/Display/file2.x revisions
files: 2/5 chunks (40.00%)
adding Core/Module/Desktop/Display/file3.x revisions
files: 3/5 chunks (60.00%)
adding Core/Module/Desktop/Display/file4.x revisions
files: 4/5 chunks (80.00%)
adding Public/Module/Desktop/file5.js revisions
files: 5/5 chunks (100.00%)
added 5 changesets with 5 changes to 5 files (+1 heads)
listing keys for "phases"
try to push obsolete markers to remote
updating the branch cache
checking for updated bookmarks
listing keys for "bookmarks"
time: real 833.334 secs (user 0.577+0.000 sys 0.546+0.000)

C:\inetpub\www\app1> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-20T10:24:25.230

You're using Mercurial in a mode which assumes fast local access to the repository. Over a LAN that can be acceptable, but anything higher latency will produce the effect you're seeing. Latency isn't the only thing - using Mercurial in this mode will transfer files (or at least deltas) over your VPN uncompressed.

I would instead suggest that you get either [hgweb.cgi](http://mercurial.selenic.com/wiki/HgWebDirStepByStep) or [mercurial-server](http://www.lshift.net/mercurial-server.html) configured on your central server (that's currently publishing over a shared drive). I'd suggest this even when accessing over the LAN.

More information in general about [publishing repositories](http://mercurial.selenic.com/wiki/PublishingRepositories).

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-20T00:56:10.333

当您通过 VPN 与映射的网络驱动器通信时，我倾向于怀疑网络延迟会增加。您可以添加`--profile`到您的`hg`命令并检查/发布输出吗？

# java - 使用 java.lang.Integer 属性将空字符串传递给 .tag 会导致 0（非空）

> ID：12501948
> 
> 赞同：2
> 
> 时间：2012-09-19T19:56:40.880
> 
> 标签：java, jsp, jsp-tags

我有一个带有 java.lang.Integer 类型属性的 .tag 文件，如下所示：

```
<%@ attribute name="userId" required="true" type="java.lang.Integer"%> 
```

当将一个空字符串传递给此标记时，该属性的值最终为**0**而不是**null**（正如我希望使用**java.lang.Integer**和所有内容一样）。

我错过了什么吗？在这种情况下，有什么方法可以强制属性值为**null吗？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T20:28:53.047

My guess is that if the type conversion fails (i.e. the value passed in won't parse as an Integer, so Integer.parseInt throws a NumberFormatException) then the attribute is initialised to 0\. This kind of makes sense as it distinguishes between that case and a null object reference.

How about having a String attribute instead in your .tag file? You can then test it's value (for null or empty etc) and convert to an Integer as necessary.

# mysql - 需要帮助选择具有最大日期的行

> ID：12501953
> 
> 赞同：1
> 
> 时间：2012-09-19T19:56:57.920
> 
> 标签：mysql, sql, database, max

## 解释

我正在做一个项目，我的客户将文件（合同）发送给他们的客户。这些文档在来回发送时会经历几轮“事件”（例如准备、发送给客户、从客户那里收到修订、由客户签名等）。对于特定公司（companyID 123456），我正在尝试提取每个文档的最新事件。因此，下面的示例查询可能会返回 5 个不同的文档，每个文档可能有 4 个不同的事件经历。在示例结果中，我将其简化为单个文档（documentId 6789）。

鉴于下面的示例结果，我希望得到第三行。所有行都针对单个文档，并且该文档具有最近的日期。但是，如下所示，我得到了四个。

如果我按 documentID 分组，那么我得到正确的日期，但我的事件和事件 ID 值不正确（转置）。我唯一的成功是将 Select 语句中的每个值包装在 Max() 函数中。当我这样做时，我会通过正确的事件获得我想要的一行。但是，文档 ID 之类的东西是错误的，因为它当然会返回最大 ID，而不是匹配的 ID。

有人可以帮我调整这个查询，以便我得到我需要的结果吗？提前致谢！

注意：我在这里找到了这个“解决方案”，但我认为它并不直接适用于我正在做的事情： [Fetch the row which has the Max value for a column](https://stackoverflow.com/questions/121387/fetch-the-row-which-has-the-max-value-for-a-column)

## 询问

```
    选择 e.eventID，
            e.事件，
            de.documentEventID,
            de.documentID,  
            Max(de.eventDate) 作为事件日期，
            sd.公司ID，
    FROM siteDocuments sd
        LEFT JOIN 文档 d ON d.documentID = sd.documentID
        左连接 documentTypes dt ON dt.documentTypeID = d.documentTypeID
        LEFT JOIN documentEvents de ON de.documentID = sd.documentID
        LEFT JOIN 事件 e ON e.eventID = de.eventID

    哪里 sd.companyID = 123456

    按 e.eventID 分组

```

```
EXAMPLE RESULTS
-----------------------
EventId --- Event Doc --- EventId --- documentId --- eventDate
16 -------- FakeEventA -- 135791 ------ 6789 ------- 2012-04-11 08:35:54
32 -------- FakeEventB -- 726351 ------ 6789 ------- 2012-04-11 08:56:02
24 -------- FakeEventC -- 987236 ------ 6789 ------- 2012-05-09 16:48:57 <======
81 -------- FakeEventD -- 982378 ------ 6789 ------- 2012-04-20 14:06:19 
```

（我放入破折号以强制格式化）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T20:10:03.343

您确定链接问题的答案（特别是[这个答案](https://stackoverflow.com/a/123481/81554)）没有完全符合您的要求吗？

```
SELECT sd.* 
FROM siteDocuments AS sd
  LEFT OUTER JOIN siteDocuments AS sd2
    ON (sd.documentId = sd2.documentId AND sd.eventDate < sd2.eventDate) 
WHERE 
    sd2.documentId IS NULL
    and sd.documentId = 6789; 
```

我以前用过这个答案来实现你正在寻找的东西。（为了保持性能，您必须小心在大型数据集上正确设置索引，但是 - 根据您使用的 DBMS 有所不同）。

# python - 从python中的类列表中随机选择x个项目

> ID：12501956
> 
> 赞同：7
> 
> 时间：2012-09-19T19:57:14.257
> 
> 标签：python, list, class, random, jython

在 jython 中，我有一个这样定义的对象类：

```
class Item:
  def __init__(self, pid, aisle, bay, hits, qtyPerOrder):
    self.pid = pid
    self.aisle = int(aisle)
    self.bay = bay
    self.hits = int(hits)
    self.qtyPerOrder = int(qtyPerOrder) 
```

我创建了一个名为“列表”的类列表，其中包含 4000~ 行，如下所示：

```
'PO78141', 13, ' B ', 40 
```

我试图在 3 到 20 的范围内随机选择一个名为 x 的数字。然后，代码将在列表中选择 x 行。

例如：如果 x = 5 我希望它返回：

```
'PO78141', 13, ' B ', 40
'MA14338', 13, ' B ', 40
'GO05143', 13, ' C ', 40
'SE162004', 13, ' F ', 40
'WA15001', 13, ' F ', 40 
```

**编辑** 好的，这似乎有效。但是，它会返回此 < **main** .Item object at 0x029990D0>。我如何让它以上述格式返回？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-19T20:01:11.613

您可以使用该[`random`模块](http://www.jython.org/docs/library/random.html)来选择 3 到 20 之间的数字，并获取行样本：

```
import random

sample_size = random.randint(3, 20)
sample = random.sample(yourlist, sample_size)

for item in sample:
    print '%s, %d, %s, %d' % (item.pid, item.aisle, item.bay, item.hits) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T22:03:16.063

备注 - 我将列表重命名为`lst`. 假设您有一个对象列表，请尝试以下操作：

```
from random import randint
for item in lst[:randint(3, 20)]:
    (item.pid, item.aisle, item.bay, item.hits) 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-09-19T20:00:08.407

```
i = 0
while i < randint(3, 20):
    # Display code here.
    i += 1 
```

# tags - 视频标签不再通过 YouTube API 可用？

> ID：12501957
> 
> 赞同：4
> 
> 时间：2012-09-19T19:57:16.463
> 
> 标签：tags, youtube, youtube-api, keyword

大约一个月前，YouTube 决定从他们网站的前端删除它的“标签”：http: [//youtubecreator.blogspot.com/2012/08/tags-removed-from-video-watch-pages.html](http://youtubecreator.blogspot.com/2012/08/tags-removed-from-video-watch-pages.html)

这也反过来让**media:keywords**通过任何 API 提要请求为空，如下所示：http: [//apiblog.youtube.com/2012/08/video-tags-just-for-uploaders.html](http://apiblog.youtube.com/2012/08/video-tags-just-for-uploaders.html)

好消息是再过一个月左右（直到几天前），您仍然可以通过循环访问类别术语通过 API 访问视频的“标签”或“关键字**”**

YouTube 似乎也取消了这一点，现在它只为每个 API 提要显示一个类别术语……而且大多数时候它们是基本的 YouTube 类别，如“音乐”或“人物”等。

我向 YouTube 开发团队提出的问题是，为什么它会从 API 中移除（我理解将它从网站的前端移除）并且它会以任何形式返回到 API 中吗？

* * *

在最初的创作者博客文章中，你们说：

"*标签仍然是组织和帮助他人找到您的视频的重要方式。我们强烈建议您继续为视频添加标签 - 这将通过提高您的内容的可发现性来帮助增加您的观众。* "

因此，如果标签仍然很重要并且仍然用于搜索结果......为什么它们不再可以通过 API 获得？

* * *

任何帮助和/或信息将不胜感激，因为这完全破坏了我许多网站的功能！谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-26T16:21:11.643

看来他们已将它们设为私有，您现在必须使用具有足够通道权限的授权 API 请求才能访问它们。这真的很糟糕，因为我已经使用它们来过滤来自站点上的频道的视频并通过 PHP 与 API 建立授权连接，这对我来说很难正常工作。而且这种增加的复杂性仅适用于关键字这一事实似乎有点荒谬，但我猜 Youtube API 团队并不在乎。

除非有很多人抱怨它，否则我怀疑他们会将其添加为公众。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T21:27:35.960

我刚刚添加

> 更新：此更改也适用于原始公告中未提及的 <category scheme="http://gdata.youtube.com/schemas/2007/keywords.cat"> 标记。

到[公告博](http://apiblog.youtube.com/2012/08/video-tags-just-for-uploaders.html)文。<category> 标签应该被删除，原因与 <media:keywords> 被删除的原因相同，但由于疏忽，它们被留在未经身份验证的 API 响应中几周。没有计划通过任一元数据字段添加回关键字信息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-08T07:30:24.740

如果您的目标是在视频中包含一些语义，Freebase 主题可以提供帮助。例如，您可以进行 JSONp 调用

```
<script src="https://www.googleapis.com/freebase/v1/topic${item}?filter=/type/object/name&callback=putFBname"></script> 
```

带有一个小的 javascript 函数

```
<script>
function putFBname(respuesta){
 span=document.getElementById(respuesta["id"]);
 span.innerHTML=" "+respuesta["property"]["/type/object/name"]["values"][0]["text"];
}
</script> 
```

获取主题的名称。

Freebase 主题来自 API v3。

# javascript - 将变量引入 onreadystatechange

> ID：12501959
> 
> 赞同：0
> 
> 时间：2012-09-19T19:57:44.290
> 
> 标签：javascript

例如这是我们的一段代码：

```
function blabla(A,B) {

    // Something

    httpReq.onreadystatechange = function(A,B) {
        if (httpReq.readyState == 4) {
            // console.log(A,B) says 'undefined'
            // How can I use the values of A and B here?
        };
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T20:01:31.887

你只需使用它们。你的问题是阴影。内部函数参数正在覆盖外部函数参数，因为它们具有相同的名称。

通常，对于在同一范围内声明的任何函数，任何局部变量都是可用的。这意味着您只需使用它们，只要您不使用同名的新局部变量来隐藏它们。

```
function blabla(a, b) {

    // Something

    httpReq.onreadystatechange = function(c, d) {
        // logs undefined, because no arguments are actually passed in
        // so the variables are undefined.
        console.log(c, d);

        // log arguments passed to blabla() because it picks up the reference
        // the parent scope.
        console.log(a, b);
    }
}

blabla('Hi', 'There'); // should log "Hi", "There" 
```

只要您为每个函数的参数使用唯一的变量名，这就是有效的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-19T20:00:12.970

只需使用 A 和 B。闭包支持（JavaScript 的纯基本特性）会处理它。请参阅[JavaScript 闭包如何工作？](https://stackoverflow.com/questions/111102/how-do-javascript-closures-work)

在你的情况下，

```
function blabla(A,B) {

    // Something

    httpReq.onreadystatechange = function(paramA, paramB) {
        if (httpReq.readyState == 4) {
            // console.log(A,B) prints A and B arguments of blabla
            // console.log(paramA, paramB) prints actual parameters
        };
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-19T20:03:20.147

您可以将 A 和 B 临时存储在变量中。

```
var data = {};
function blabla(A,B) {
    data.A = A;
    data.B = B;

    httpReq.onreadystatechange = function() {
        // How can I lead the values of A and B into this?
        console.log(data.A, data.B)
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-06T05:07:12.320

需要将onreadystate change函数放在发送请求之后，同时将open函数的第三个参数设置为false，使其同步。

# ios - 为什么归档期间 dSYM 中不包含静态库符号？

> ID：12501960
> 
> 赞同：8
> 
> 时间：2012-09-19T19:57:47.650
> 
> 标签：ios, xcode4, static-libraries

我们有一个非常重要的应用程序套件，用于具有几个应用程序目标的客户端，这些应用程序目标使用我们内部制作的几个静态库。所有目标都包含在一个 XCode 项目文件中。

出于某种原因，在归档应用程序时，dSYM 文件不包含任何静态库的调试符号。结果是，当尝试从现场代理符号化崩溃日志时，我们看不到这些静态库中发生了什么。

我试图用一个应用程序目标和一个静态库创建一个新的简单 XCode 项目。即使这样，调试符号也丢失了。我没有运气根据这个[https://github.com/TheRealKerni/QuincyKit/issues/91](https://github.com/TheRealKerni/QuincyKit/issues/91)摆弄构建设置。

如果我构建用于存档的调试符号包括在内。我在生成的 dSYM 文件上运行了 dwarfdump，并且能够看到静态库实现文件的符号。但是，当我尝试归档项目时，符号被排除在外。

我错过了什么吗？XCode 版本 4.4.1

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-11-17T08:23:30.250

我正在使用 XCode 5.1.1 并且遇到了同样的问题。

修复方法是为每个依赖库项目将“部署”部分下的“剥离链接产品”设置设置为“否”。更详细的可以看我的帖子

[我可以调试从 ipa 存档安装的 ios 应用程序吗](https://stackoverflow.com/questions/26861275/can-i-debug-ios-app-installed-from-ipa-archive)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T18:05:23.220

这似乎在更高版本的 XCode 中得到修复，目前使用 4.6 并且问题消失了。

如果您无法使用旧版本，请执行以下操作： Product > Build For > Archiving Product > Archive 从派生数据打开构建的产品，您可以通过右键单击 Products 组中的 Youapp.app 文件并选择 show in 来执行此操作发现者。确保您位于 Release-xxx 文件夹中。复制那里生成的 dSYM 文件并替换存档过程生成的文件。要查找存档文件的位置，请转到管理器，存档选项卡，右键单击项目并在查找器中显示。

希望这可以帮助。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2014-01-10T08:48:55.903

默认情况下，存档使用发布版本，它已经对调试符号进行了条带化​​。您可以将存档构建选项更改为“非条带化”。

# extjs - 创建分页不起作用

> ID：12501964
> 
> 赞同：0
> 
> 时间：2012-09-19T19:58:10.397
> 
> 标签：extjs, extjs3

我在 extjs 3.1 中创建分页，但由于某种原因它不起作用。请我做错了什么。我使页数= 5。分页计数正确。意味着它显示底部的页数即将到来。

但网格显示所有数据。我的代码如下

```
Ext.onReady(function() {

    var store = new Ext.data.JsonStore({
        root : 'data',
        totalProperty : 'total',
        idProperty : 'facId',
        fields : [ "address1", "address2", "city", "country", "ehsContact",
                "facilityManager", "facilityProduct", "facilityType", "fax",
                "facId", "name", "phone", "state", "subGroupA", "subGroupB",
                "zipCode", {
                    name : 'businessUnitId',
                    mapping : 'businessVO.businessId'
                }, {
                    name : 'businessUnitName',
                    mapping : 'businessVO.businessName'
                } ],

        proxy : new Ext.data.HttpProxy({
            url : 'facility.do?method=getAllFacility'
        })
    });

    var grid = new Ext.grid.GridPanel({
        width : 700,
        height : 500,
        title : 'ExtJS.com - Browse Forums',
        store : store,
        trackMouseOver : false,
        disableSelection : true,
        loadMask : true,

        columns : [ {
            id : 'facId',
            header : "facId",
            dataIndex : 'facId',
            sortable : true
        }, {
            header : "fax",
            dataIndex : 'fax',
            width : 100,
            sortable : true
        }, {
            header : "state",
            dataIndex : 'state',
            sortable : true
        }, {
            id : 'address1',
            header : "address1",
            dataIndex : 'address1',
            sortable : true
        } ],

        viewConfig : {
            forceFit : true,
        },

        bbar : new Ext.PagingToolbar({
            pageSize : 5,
            store : store,
            displayInfo : true,
            displayMsg : 'Displaying topics {0} - {1} of {2}',
            emptyMsg : "No topics to display"
        })
    });

    store.load({
        params : {
            start : 0,
            limit : 5
        }
    });

    centerPanel = Ext.getCmp('centerlPanel');
    centerPanel.add({
        layout : 'border',
        region : 'center',
        layout : 'fit',
        items : grid
    });
    centerPanel.doLayout();
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T15:20:31.393

我一直发现使用分页（使用 JSON/PHP/MySQL）我必须返回总数，然后强制我的数据库查询对其进行限制。这就是 start 和 limit 的参数。

```
store.load({
    params : {
        start : 0,
        limit : 5
    }
}); 
```

然后对数据库的查询将是

```
 $start = (integer) (isset($_POST['start']) ? $_POST['start'] : $_GET['start']);
       $end = (integer) (isset($_POST['limit']) ? $_POST['limit'] : $_GET['limit']);
$limitquery = $query." LIMIT ".$start.",".$end; 
```

（这是针对 PHP/MySQL 的）然后页面发送适当的开始/结束来浏览您的数据。然后服务器/数据库将对您的回报进行排序。如果您想像客户端内存数据库一样使用，您仍然需要找到一种方法来执行此方法。如果您担心这会给您的服务器带来的工作量，我发现使用该`LIMIT`方法对我们的 MySQL 数据库来说这是一个非常小的工作量。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T06:37:08.533

ExtJS3 原生只支持远程分页（所以你必须在服务器端处理它）。AFAIK`pageSize`参数仅用于计算页数、当前页数以及作为请求的参数之一（因此您可以在服务器上获取它的值）。如果您从服务器提供超过 5 行 - 所有都将可见。

您可以通过在服务器上实现分页或使用来修复它`PagingStore`（这是第二种方法的示例解决方案：[http://www.sencha.com/forum/showthread.php?71532-Ext.ux.data.PagingStore-v0。 5](http://www.sencha.com/forum/showthread.php?71532-Ext.ux.data.PagingStore-v0.5) )

# ruby-on-rails-3 - 向设计表单添加额外字段

> ID：12501966
> 
> 赞同：1
> 
> 时间：2012-09-19T19:58:27.507
> 
> 标签：ruby-on-rails-3, devise

我在 Rails 应用程序中使用 Devise，当用户登录时需要传递一个额外的字段（可能）。如果用户通过子域登录，一切正常。如果他们在没有子域的情况下进入，我希望他们被要求将其放入文本框中。子域不是用户模型的一部分，它是组织（公司）的一部分。这是视图```

```
<div class="row">
    <%= f.email_field :email, :class => "input_text", :placeholder=> "Email" %>
</div>

<div class="row">
    <%= f.password_field :password, :class => "input_text", :placeholder=> "Password" %>
</div>

<% if request.subdomain.blank? %>
  <div class="row">
    <%= f.text_field :subdomain, :class => "input_text", :placeholder=> "Organization" %>
  </div>
<% end %> 
```

```

这是用户模型的相关部分......

```

```
devise :token_authenticatable, :database_authenticatable, :recoverable, :rememberable, :trackable, :lockable, 
  :authentication_keys => [:email], :request_keys => [:subdomain]

def self.find_for_authentication(conditions={})
  conditions[:organization_id] = Organization.find_by_subdomain(conditions[:subdomain]).id
  conditions.delete(:subdomain)
  super(conditions)
end 
```

```

我最终在视图中为 nil 类未定义子域。

关于如何使这项工作的任何想法？

# javafx - JavaFX 压力测试失败

> ID：12501968
> 
> 赞同：2
> 
> 时间：2012-09-19T19:58:33.360
> 
> 标签：javafx, stress-testing, resource-leak

我们正在研究 JavaFX 2.2 作为构建桌面应用程序的框架。但是在花费大量开发人员时间之前，我们想确保 JavaFX 适合这项工作，因此我们进行了一个小型压力测试，看看它是否会泄漏资源。该测试在一个永无止境的循环中显示和隐藏一个包含标签和按钮的舞台。我们希望这会永远持续下去而不会出现问题，但是经过大约 15500 次迭代后，我们得到了这个异常

```
java.lang.RuntimeException: could not create platform window
at com.sun.glass.ui.Window.<init>(Window.java:180)
at com.sun.glass.ui.win.WinWindow.<init>(WinWindow.java:20)
at com.sun.glass.ui.win.WinApplication.createWindow(WinApplication.java:97)
at com.sun.javafx.tk.quantum.WindowStage.initPlatformWindow(WindowStage.java:131)
at com.sun.javafx.tk.quantum.WindowStage.init(WindowStage.java:82)
at com.sun.javafx.tk.quantum.QuantumToolkit.createTKStage(QuantumToolkit.java:501)
at javafx.stage.Stage.impl_visibleChanging(Stage.java:928)
at javafx.stage.Window$10.invalidated(Window.java:689)
at javafx.beans.property.BooleanPropertyBase.markInvalid(BooleanPropertyBase.java:127)
at javafx.beans.property.BooleanPropertyBase.set(BooleanPropertyBase.java:161)
at javafx.stage.Window.setShowing(Window.java:782)
at javafx.stage.Window.show(Window.java:797)
at javafx.stage.Stage.show(Stage.java:229)
at leaktest.FXMLController.showHideDialog(FXMLController.java:58) 
```

我们最好的猜测是 Stage 上的 show()/hide() 泄漏了一些资源，而 dheapmon 揭示了桌面堆内存实际上在测试期间泄漏，但我们没有达到限制（在我们的测试机器上为 20 MB）。GDI 句柄和 USER 句柄限制也不是问题，因为这些句柄没有泄漏（根据 Process explorer）。对导致异常的原因有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-08-04T17:51:38.693

这是 JavaFX 的窗口处理代码中的内存泄漏。作为错误修复[RT-26822 Win: Stage Exception:could not create platform window](https://javafx-jira.kenai.com/browse/RT-26822)的一部分，该漏洞已在 JavaFX 2.2.40 中得到修复。

# php - 如何在两个不同的域中共享 PHP 会话

> ID：12501970
> 
> 赞同：1
> 
> 时间：2012-09-19T19:58:36.013
> 
> 标签：php, session, dns

好吧，就这样吧。

我的客户最近为 domain1.net 购买了 SSL 证书。几周后，他买了他认为更好的 domain1.com。

现在，他想使用 domain1.com，但我无法将证书从 domain1.net 移动到 domain1.com，因为时间已过。

因此，客户在 domain1.com 中导航，当他需要登录或输入信用卡信息时，我重定向到[https://domain1.net](https://domain1.net)。但是我需要在这两个域之间共享 PHP $_SESSION。

我怎样才能做到这一点？有任何想法吗？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T20:04:39.157

您可以将会话数据放入缓存中，这两个域都应该可以访问（不确定您在后台有多少台服务器），然后在重定向发生后从缓存中检索会话数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T20:15:21.177

There is a long way here

Create a php file(share.php) as following in both domains, data is shared by this method

```
<?php session_start();
echo json_encode($_SESSION);
?> 
```

Now create another file, better to use as include, on another domain for receiving session data

```
<?php session_start();
$abc = file_get_contents('http://domain1.com/share.php');
$obj = json_decode($abc);

print_r($obj);

?> 
```

print_r will show you whole session data of another server in this way. Use combination of objects and arrays to access all elements. If you need to overwrite this server's session use this code instead of print_r

```
<?php

foreach($obj as $key => $value){
$_SESSION[$key] = $value;
}

?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-19T20:05:12.610

我认为您对使用 $_SESSION 功能非常不走运。问题是您将无法在两个不同的域之间传递会话 id cookie（您可以通过控制 cookie 域在两个子域之间传递）。您可以尝试在查询字符串中传递会话 ID，但谁愿意这样做。

您可以实现自己的后端逻辑来存储两个域共有的信息，但我认为这将需要您自己的令牌系统在域之间来回移动时对用户进行身份验证以替换您的会话 ID。

您最好的选择是告诉您的客户他需要购买 .com 域的证书。要么他要么付给你更多的钱来构建你自己定制的伪会话系统。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-19T20:06:37.110

你不能那样做，（感谢上帝）。

您必须找到其他方式来交换数据：

*   也许这两个站点在同一台服务器上，并且可以访问一个公共目录。`/tmp`例如，这也是默认会话文件所在的位置。
*   如果不在同一台服务器上，请使用 ftp、http 或其他协议来交换数据。

当然，最简单的解决方案是购买一个新证书（一年几美元）并将这些站点合并在一起。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-20T00:27:23.557

您需要会话数据还是只需要一些登录信息？无论哪种情况，您都可以序列化 $_SESSION (http://php.net/manual/en/function.serialize.php) 或将其存储在数据库中。添加一个主键和一个可以用 rand(0,1000000000) 填充的“秘密”字段；

然后，当您链接到网站时，传递主密钥和密码，并使用它从数据库中获取会话信息。

# c++ - C++ 内存泄漏 new 和 delete

> ID：12501973
> 
> 赞同：0
> 
> 时间：2012-09-19T19:58:41.347
> 
> 标签：c++, memory, memory-leaks

我很难找到这个内存泄漏。

我相信它与**盆地有关**

```
int numbasinsx(int size, double *f)
{
    int maxBasin, maxRelabel, bcnt;
    unsigned int newgene;
    int *basin, *relabel;
    int relabelcnt;

    //
    // find the basins
    //
    maxBasin = 1<<size;
    basin = new int [maxBasin];
    for (int gene=0; gene<maxBasin; gene++) basin[gene] = 0;

    bool change = true;
    bcnt = 0;
    while (change) {
        change = false;

        for (int gene=0; gene<maxBasin; gene++) {

            bool dominated = false;
            for (int i=0; i<size; i++) {               // for all neighbors
                newgene = gene ^ (1<<i);               // newgene is a neighbor 1 bit away

                if (f[newgene] > f[gene]) dominated = true;  // if neighbor is better mark it

                if (basin[newgene]!=0) {                                        // something to copy
                    if (f[newgene] > f[gene]) {                                // gene is dominated
                        if (basin[gene]==0 || basin[gene]<basin[newgene]) {    // if not labeled or not lowest number
                            basin[gene] = basin[newgene];                      // then label or relabel
                            change = true;
                        }
                    }
                    else if (f[newgene] == f[gene]) {
                        if (basin[gene]<basin[newgene]) {
                            basin[gene] = basin[newgene];
                            change = true;
                        }
                    }
                }
            }

            if (! dominated && basin[gene]==0) {
//                printf("max: %d %lg\n", gene, f[gene]);
                basin[gene] = ++bcnt;
                change = true;
            }
        }
    }

    //
    // relabel the basins
    //
    maxRelabel = maxBasin/2+1;
    relabel = new int [maxRelabel];
    for (int gene=0; gene<maxRelabel; gene++) relabel[gene] = 0;

    relabelcnt = 1;
    for (int gene=0; gene<maxBasin; gene++) {
        if (basin[gene]>=maxRelabel) printf("ERROR: trying to index %d into relabel array with max index of %d\n", basin[gene], maxRelabel-1);

        if (relabel[basin[gene]]==0) {
            relabel[basin[gene]] = relabelcnt++;
        }
//        printf("%d %lg %d\n", gene, f[gene], relabel[basin[gene]]);
    }
//    printf("%d\n", relabelcnt-1);

    delete basin;
    delete relabel;

    return relabelcnt-1;
} 
```

我将保留以上内容以帮助其他人，但带有向量的新代码现在位于[http://codepad.org/KiV85Brw](http://codepad.org/KiV85Brw)。向量运行时间比 delete[] 版本慢得多，而且对于大输入它甚至会出现段错误。我做错了什么

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-19T20:01:38.663

如果你`operator new[]`用来分配一堆字节，那么你**必须**用来`operator delete[]`销毁它们：

```
basin = new int [maxBasin];
//.....
delete[] basin; 
```

请注意，您正在使用`relabel`.

无论如何，对于此类任务，您应该使用`std::vector`：

```
std::vector<int> basin(maxBasin), relabel(maxRelabel); // We haz no leaks 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-19T20:00:55.107

`new[]`必须紧随其后`delete[]`，而不仅仅是`delete`。您用于释放数组的代码`basin`都是`relabel`错误的。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-19T20:08:48.587

`basin`和都是`relable`数组。当您使用运算符在堆上分配数组时**`new`**，删除数组的语法与删除单个变量的语法不同。正确的语法是：

```
delete[] basin;
delete[] relable; 
```

我相信你所写的代码只会删除每个数组的第一个元素。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-19T20:01:31.237

由于您正在分配一个数组，因此请使用`delete [] basin;`. 运算符用于单个对象
；`delete`这`delete []`是用于多个对象（数组）。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-19T20:02:29.490

```
 basin = new int [maxBasin]; 
```

对于数组，您应该使用运算符 delete[]。还要检查 `relabel`.

看起来是一个小的局部变量，你确定要使用动态分配吗？为什么？如果您必须尝试 unique_ptr。

# c# - Google 协作平台 API：父链接必须指向同一个站点

> ID：12501974
> 
> 赞同：1
> 
> 时间：2012-09-19T19:58:45.937
> 
> 标签：c#, gdata, google-sites

我正在尝试创建一个子页面，但遇到了标题中提到的错误。我使用 fiddler 来获取正在发送的请求，它看起来如下所示。

```
POST https://sites.google.com/feeds/content/domain/site/ HTTP/1.1
Content-Type: application/atom+xml; charset=UTF-8
User-Agent: G-google-SitesAPIDemo-v1.2/GDataGAuthRequestFactory-CS-Version=2.1.0.0
Authorization: xxx
GData-Version: 1.0
Host: sites.google.com
Content-Length: 17272
Expect: 100-continue

<?xml version="1.0" encoding="utf-8"?>
  <entry xmlns="http://www.w3.org/2005/Atom" xmlns:gd="http://schemas.google.com/g/2005">
  <sites:pageName xmlns:sites="http://schemas.google.com/sites/2008">Title</sites:pageName>
  <title type="text">title</title>
  <link href="https://sites.google.com/feeds/content/site/domain/Parent_Id" rel="http://schemas.google.com/sites/2008#parent" type="application/atom+xml" />
  <category term="http://schemas.google.com/sites/2008#announcement" scheme="http://schemas.google.com/g/2005#kind" label="announcement" /> 
```

它与[api](https://developers.google.com/google-apps/sites/docs/1.0/developers_guide_protocol#CreatingSubpages)匹配，但我不确定似乎是什么问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T20:54:14.463

我错误地在父链接中切换了我的域和站点。解决这个问题解决了这个问题。

# iphone - 我的按钮在 iPhone（Retina 4 英寸）模拟器上没有检测到触摸事件，但在 iPhone（Retina 3.5 英寸）模拟器中有效

> ID：12501976
> 
> 赞同：20
> 
> 时间：2012-09-19T19:59:01.827
> 
> 标签：iphone, ios, ios6, iphone-5

我正在使用模拟器为 iPhone 5 准备我的应用程序，我发现了一个奇怪的问题，在我看来，我的几个按钮在 iPhone（Retina 4 英寸）模拟器中不起作用，但在 iPhone（Retina 3.5 英寸）模拟器中工作正常。这些按钮在被点击时根本不做任何事情。有没有其他人遇到过这个问题？

我很难弄清楚从哪里开始。关于从哪里开始的任何建议？

非常感谢您的智慧！

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-10-31T00:09:45.163

您需要编辑 MainWindow.xib 并启用“启动时全屏”。有关更详细的说明，请参阅 Apple 的文档：

> 重要提示：在 Interface Builder 中创建窗口时，建议您在属性检查器中启用 Full Screen at Launch 选项。如果未启用此选项并且您的窗口小于目标设备的屏幕，您的某些视图将不会接收到触摸事件。这是因为窗口（像所有视图一样）不会接收超出其边界矩形的触摸事件。因为默认情况下视图不会被裁剪到窗口的边界，所以视图仍然可见，但事件不会到达它们。启用“启动时全屏”选项可确保窗口大小适合当前屏幕。

[来自 Apple 的完整文档](http://developer.apple.com/library/ios/#documentation/WindowsViews/Conceptual/ViewPG_iPhoneOS/CreatingWindows/CreatingWindows.html)

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-09-19T20:30:10.360

对我来说，解决方案是将 MainWindow.xib 的大小（“模拟指标”）设置为“Retina 4 全屏”。我不需要更改其他屏幕的大小（它们仍然设置为无）。更改 MainWindow.xib 后，底部区域再次变为可点击...

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-09-19T21:18:28.237

问题是由于弹簧和支柱的设置方式与我的按钮重叠的另一个控件引起的。调整按钮的 z 顺序解决了这个问题。谢谢大家！

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-04-18T10:08:17.307

这个问题有两种解决方案：

如果您使用 MainWindow，请按照以下步骤操作：

**一种。**选择`MainWindow.xib`。

**湾。**`Full Screen at Launch`从属性检查器中可用的 Windows 选项中选择。

如果您的应用程序不包含 MainWindow，则只需添加：

```
self.view.frame = [UIScreen mainScreen].bounds 
```

在 ViewDidLoad 中。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-15T06:28:01.367

我解决了我的问题。

3.5寸和4寸的view .origin 是不一样的，所以在写通用代码的时候要注意给`CGRectmake(x,y,w,h)`；

设置温度。diff 视图的 diff 背景颜色，因此您可以检查任何视图是否重叠，以获取 4.0 英寸的事件。

# c# - 为什么“int”和“sbyte”GetHashCode 函数会生成不同的值？

> ID：12501979
> 
> 赞同：5
> 
> 时间：2012-09-19T19:59:19.350
> 
> 标签：c#, hash

我们有以下代码：

```
int i = 1;
Console.WriteLine(i.GetHashCode());  // outputs => 1 
```

这是有道理的，除了 sbyte 和 short 之外，C# 中的所有整数类型都会发生同样的情况。那是：

```
sbyte i = 1;
Console.WriteLine(i.GetHashCode());   //  outputs => 257 
```

为什么是这样？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-19T20:04:29.567

因为该方法 ( `SByte.GetHashCode`) 的来源是

```
public override int GetHashCode()
{
    return (int)this ^ ((int)this << 8);
} 
```

至于为什么，微软的某个人知道..

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T20:43:32.920

是的，这都是关于价值分配的。由于 GetHashCode 方法的返回类型是 sbyte 类型的 int，因此值将以 257 的间隔分布。出于同样的原因，long 类型将是 colisions。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-19T20:53:49.160

原因是这样做可能是为了避免散列值的聚类。

正如`GetHashCode` [文件](http://msdn.microsoft.com/en-us/library/system.object.gethashcode.aspx)所说：

> 为了获得最佳性能，散列函数必须为所有输入生成随机分布。为类提供良好的散列函数会显着影响将这些对象添加到散列表的性能。在具有良好实现散列函数的散列表中，搜索元素需要恒定时间（例如，O(1) 操作）。

此外，正如[这篇出色的文章](http://blogs.msdn.com/b/ericlippert/archive/2011/02/28/guidelines-and-rules-for-gethashcode.aspx)所解释的：

> 准则：散列码的分布必须是“随机的” “随机分布”是指如果被散列的对象有共同点，那么在产生的散列码中不应该有相似的共同点。例如，假设您正在散列一个表示一个点的纬度和经度的对象。一组这样的位置很可能是“聚集”的；例如，您的一组位置很有可能是同一城市中的大多数房屋，或者同一油田中的大多数阀门，或其他任何地方。如果集群数据产生集群哈希值，那么这可能会减少使用的桶数，并在桶变得非常大时导致性能问题。

# android - 在启动意图时强制关闭，并且 android 清单中提到了该活动

> ID：12501980
> 
> 赞同：1
> 
> 时间：2012-09-19T19:59:18.977
> 
> 标签：android, button, android-intent, onclicklistener, forceclose

当我按下链接到这个类的按钮时，我会强制关闭。这是课程：

```
public class Introduction extends Activity {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.introduction);
        Button start = (Button) findViewById(R.id.introstartbutton);
        start.setOnClickListener(new View.OnClickListener() {

            @Override
            public void onClick(View v) {
                // TODO Auto-generated method stub
                Intent i = new Intent(v.getContext(), QuestionOne.class);
                startActivity(i);
            }
        });
    }
} 
```

这是 LogCat

```
09-19 20:40:21.870: E/AndroidRuntime(28122): FATAL EXCEPTION: main
09-19 20:40:21.870: E/AndroidRuntime(28122): java.lang.RuntimeException: Unable to instantiate activity ComponentInfo{com.mikenning.foreveralonequiz/com.mikenning.foreveralonequiz.QuestionOne}: java.lang.InstantiationException: can't instantiate class com.mikenning.foreveralonequiz.QuestionOne; no empty constructor
09-19 20:40:21.870: E/AndroidRuntime(28122):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2099)
09-19 20:40:21.870: E/AndroidRuntime(28122):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2210)
09-19 20:40:21.870: E/AndroidRuntime(28122):    at android.app.ActivityThread.access$600(ActivityThread.java:142)
09-19 20:40:21.870: E/AndroidRuntime(28122):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1208)
09-19 20:40:21.870: E/AndroidRuntime(28122):    at android.os.Handler.dispatchMessage(Handler.java:99)
09-19 20:40:21.870: E/AndroidRuntime(28122):    at android.os.Looper.loop(Looper.java:137)
09-19 20:40:21.870: E/AndroidRuntime(28122):    at android.app.ActivityThread.main(ActivityThread.java:4931)
09-19 20:40:21.870: E/AndroidRuntime(28122):    at java.lang.reflect.Method.invokeNative(Native Method)
09-19 20:40:21.870: E/AndroidRuntime(28122):    at java.lang.reflect.Method.invoke(Method.java:511)
09-19 20:40:21.870: E/AndroidRuntime(28122):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:791)
09-19 20:40:21.870: E/AndroidRuntime(28122):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:558)
09-19 20:40:21.870: E/AndroidRuntime(28122):    at dalvik.system.NativeStart.main(Native Method)
09-19 20:40:21.870: E/AndroidRuntime(28122): Caused by: java.lang.InstantiationException: can't instantiate class com.mikenning.foreveralonequiz.QuestionOne; no empty constructor
09-19 20:40:21.870: E/AndroidRuntime(28122):    at java.lang.Class.newInstanceImpl(Native Method)
09-19 20:40:21.870: E/AndroidRuntime(28122):    at java.lang.Class.newInstance(Class.java:1319)
09-19 20:40:21.870: E/AndroidRuntime(28122):    at android.app.Instrumentation.newActivity(Instrumentation.java:1053)
09-19 20:40:21.870: E/AndroidRuntime(28122):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2090)
09-19 20:40:21.870: E/AndroidRuntime(28122):    ... 11 more 
```

这是Android清单

```
<application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@android:style/Theme.Light.NoTitleBar" >
        <activity
            android:name=".Introduction"
            android:label="@string/title_activity_introduction" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />
                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
        <activity
            android:name=".QuestionOne"
            android:label="@string/title_activity_introduction" >
        </activity>
        <activity
            android:name=".Result"
            android:label="@string/title_activity_introduction" >
        </activity>
    </application> 
```

我希望这也能解决任何未来的问题。我也用谷歌搜索了很多，但除了关键字之外，我无法正确理解 logcat。

提前致谢 ：）

编辑：这是 QuestionOne.java

```
public class QuestionOne extends Results {

    public QuestionOne(int score) {
        super(score);
        // TODO Auto-generated constructor stub
        score = super.score;
    }

    RadioButton answer1, answer2, answer3;
    Button oneNext;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
        setContentView(R.layout.one);

        RadioGroup answerGroup = (RadioGroup) findViewById(R.id.oneradiogroup);
        final int index = answerGroup.indexOfChild(findViewById(answerGroup.getCheckedRadioButtonId()));

        Button oneNext = (Button) findViewById(R.id.onenext);

        oneNext.setOnClickListener(new View.OnClickListener() {

            @Override
            public void onClick(View arg0) {
                // TODO Auto-generated method stub
                Intent questionTwo = new Intent("com.mikenning.foreveralonequiz.QuestionTwo");
                switch(index) {
                case 1 : score = score + 10; // y is the score of the second answer
                startActivity(questionTwo);
                break;
                case 2 : score = score + 20; // z is the score of the third answer
                startActivity(questionTwo);
                break;
                }

            }
        });

    }

} 
```

这是结果类：

```
public class Results extends Activity {

    public int score;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        TextView textScore = (TextView) findViewById(R.id.textView1);
        textScore.setText("Your score is " + score);
    }

    public int getScore() {
        return score;
    }

    public Results(int score) {
        this.score = 0;
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T20:02:44.463

解决方案就是错误所说的：

> 无法实例化 com.mikenning.foreveralonequiz.QuestionOne 类；没有空的构造函数

由于您尚未发布`QuestionOne`课程，因此我无法给您确切的代码。但是，我怀疑你有这样的事情：

```
public class QuestionOne extends Activity {
    public QuestionOne(someType someParam) {
        // ...
    }
    // ...
} 
```

但是，您必须创建一个*没有*参数的构造函数。即，`public QuestionOne() {`。

如果您需要将数据传递给您的第二个`Activity`，您将需要使用[`Intent`](http://developer.android.com/reference/android/content/Intent.html)extras。

# oracle - “以 CSV 列表中的任何值开头”的 WHERE 条件

> ID：12501996
> 
> 赞同：1
> 
> 时间：2012-09-19T20:00:38.227
> 
> 标签：oracle, csv, plsql, oracle10g, stringtokenizer

> **可能重复：**
> [如何将 csv 转换为 oracle 中的表](https://stackoverflow.com/questions/3142665/how-to-convert-csv-to-table-in-oracle)

我在 PL/SQL 中有一个查询，该查询旨在将变量中的输入作为“starts-with”过滤器处理：

```
WHERE product_group LIKE strProductGroup || '%' 
```

作为一个新的“特征”，输入变量可以包含逗号分隔的值。所以，在我期待“ART”之类的东西之前，我现在可以看到“ART,DRM”。

如果可能，我想避免将此查询构建为字符串并使用 EXECUTE IMMEDIATE。谁能想到一种方法来编写一个 WHERE 条件，它相当于在 Oracle 10g 中说“以 CSV 列表中的任何值开头”？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T20:30:40.303

假设您对创建几个附加对象（集合类型和函数）没有任何限制，您可以将列表解析为可以在查询中引用的集合。[Tom Kyte 在他的变量“IN”列表](http://asktom.oracle.com/pls/asktom/f?p=100:11:0%3a%3a%3a%3aP11_QUESTION_ID:210612357425)线程中对此进行了很好的讨论。

例如，如果您使用 Tom's `myTableType`and`in_list`函数

```
SQL> create or replace type myTableType as table 
     of varchar2 (255);
  2  /

Type created.

ops$tkyte@dev8i> create or replace 
     function in_list( p_string in varchar2 ) return myTableType
  2  as
  3      l_string        long default p_string || ',';
  4      l_data          myTableType := myTableType();
  5      n               number;
  6  begin
  7    loop
  8        exit when l_string is null;
  9        n := instr( l_string, ',' );
10         l_data.extend;
11         l_data(l_data.count) := 
                 ltrim( rtrim( substr( l_string, 1, n-1 ) ) );
12         l_string := substr( l_string, n+1 );
13    end loop;
14
15    return l_data;
16  end;
17  / 
```

然后您可以相对容易地搜索相等性。

```
WHERE product_group IN (SELECT column_value 
                          FROM TABLE( in_list( strProductGroup ))) 
```

但是你想做`LIKE`一个更具挑战性的事情，因为你不能`LIKE`在列表中做一个。但是，您可以执行类似的操作

```
select *
  from emp e,
       (select '^' || column_value search_regexp
          from table( in_list( 'KIN,BOB' ))) a
 where regexp_like( e.ename, a.search_regexp ) 
```

这将在表中搜索以或开头`EMP`的任何员工。在默认表中，这将只返回一行，即“KING”所在的行`ENAME``KIN``BOB``SCOTT.EMP``ENAME`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T20:35:23.443

我发现另一个[帖子](https://stackoverflow.com/questions/1089508/how-to-best-split-csv-strings-in-oracle-9i)给了我一个想法。在我的具体情况下，输入中的值都是 3 个字符，所以我可以执行以下操作：

```
AND SUBSTR(product_group, 0, 3) IN
    (SELECT regexp_substr(strProductGroup, '[^,]+', 1, LEVEL)
      FROM dual
      CONNECT BY LEVEL <= length(regexp_replace(strProductGroup, '[^,]+')) + 1) 
```

我喜欢这个解决方案，因为它不需要额外的类型或功能，但仅限于我的具体情况。