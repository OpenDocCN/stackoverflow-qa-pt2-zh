# StackOverflow 问答 12798000-12798999

# android - Android 如何发送多个联系人附加在单个 .vcf 文件中并发送到邮件？

> ID：12798001
> 
> 赞同：8
> 
> 时间：2012-10-09T10:26:46.363
> 
> 标签：android, contacts, vcf-vcard

在我的应用程序中，多个联系人附加到单个**.vcf**文件并且该文件发送到邮件，尝试将所有联系人数据显示在 log cat 中，但无法发送附加到单个 .vcf 文件的所有数据？

任何人对此有任何想法，请帮助我。

这是我的代码

```
 public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);  

    vCard = new ArrayList<String>();                 

    Log.i("TAG one", "vfile" +vfile);
    vfile = "Contacts" + "_" + System.currentTimeMillis() + ".vcf";  

    /**
     * This Function For Vcard And here i take one Array List in Which i
     * store every Vcard String of Every Contact Here i take one Cursor and
     * this cursor is not null and its count>0 than i repeat one loop up to
     * cursor.getcount() means Up to number of phone contacts. And in Every
     * Loop i can make vcard string and store in Array list which i declared
     * as a Global. And in Every Loop i move cursor next and print log in
     * logcat.
     * */
    getVcardString();           
}       

private void getVcardString() { 

    cursor = getContentResolver().query(ContactsContract.CommonDataKinds.Phone.CONTENT_URI, null, null, null, null);
    Log.i("TAG two", "cursor" +cursor);
    if (cursor != null && cursor.getCount() > 0) {
        cursor.moveToFirst();
        Log.i("Number of contacts", "cursorCount" +cursor.getCount());          

        for (int i = 0; i < cursor.getCount(); i++) {                       
            get(cursor);                    
            Log.i("TAG send contacts",  "Contact " + (i + 1) + "VcF String is" +  vCard.get(i));                     
            cursor.moveToNext();                                        
        }           

        StringBuffer s = new StringBuffer();
        s.append( vCard.toString());                
        string = s.toString();                           
        file = new File(string);        

    //  Log.i("s", ""+s);   
    //  Log.i("string", ""+string); 
        Log.i("file", ""+file);             

    } else {
        Log.i("TAG", "No Contacts in Your Phone");
    }        
}       

public void get(Cursor cursor) {

    String lookupKey = cursor.getString(cursor.getColumnIndex(ContactsContract.Contacts.LOOKUP_KEY));
    Log.i("lookupKey", ""+lookupKey);
    Uri uri = Uri.withAppendedPath(ContactsContract.Contacts.CONTENT_VCARD_URI, lookupKey);     

    try {
        AssetFileDescriptor fd = this.getContentResolver().openAssetFileDescriptor(uri, "r");          

        FileInputStream fis = fd.createInputStream();
        byte[] buf = new byte[(int) fd.getDeclaredLength()];
        fis.read(buf);
        String vcardstring= new String(buf);          

        String storage_path = Environment.getExternalStorageDirectory().toString() + File.separator + vfile;
        FileOutputStream mFileOutputStream = new FileOutputStream(storage_path, true);
        mFileOutputStream.write(vcardstring.toString().getBytes());

        vCard.add(storage_path);            

    } catch (Exception e1)  {            
        e1.printStackTrace();
    }
}       

private void data() {       

    File filelocation = file;     
    Intent sharingIntent = new Intent(Intent.ACTION_SEND);
    sharingIntent.setType("vnd.android.cursor.dir/email");      
    sharingIntent.setType("application/x-vcard");             
    sharingIntent.putExtra(Intent.EXTRA_STREAM, Uri.parse("file://"+filelocation));
    startActivity(Intent.createChooser(sharingIntent, "Send email"));            
}
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-16T11:39:46.963

最后我的问题是这样解决的

```
 public void onCreate(Bundle savedInstanceState) {
     super.onCreate(savedInstanceState);
     setContentView(R.layout.main);     

     mContext = this; 

     button = (Button) findViewById(R.id.send);          
     button.setOnClickListener(new OnClickListener() {          
        public void onClick(View v) {        
            data();
        }
    });                      

    /**
     * This Function For Vcard And here i take one Array List in Which i
     * store every Vcard String of Every Contact Here i take one Cursor and
     * this cursor is not null and its count>0 than i repeat one loop up to
     * cursor.getcount() means Up to number of phone contacts. And in Every
     * Loop i can make vcard string and store in Array list which i declared
     * as a Global. And in Every Loop i move cursor next and print log in
     * logcat.
     * */
    getVcardString();           
}       

 public static void getVcardString() {   

    String path = null;     
    String vfile = null;

     vfile = "Contacts.vcf";           
    Cursor phones = mContext.getContentResolver().query(ContactsContract.CommonDataKinds.Phone.CONTENT_URI, null,
                    null, null, null);

    phones.moveToFirst();
    Log.i("Number of contacts", "cursorCount" +phones.getCount());  
    for(int i =0;i<phones.getCount();i++)   {       

         String lookupKey = phones.getString(phones.getColumnIndex(ContactsContract.Contacts.LOOKUP_KEY));
         Log.i("lookupKey", " " +lookupKey);
         Uri uri = Uri.withAppendedPath(ContactsContract.Contacts.CONTENT_VCARD_URI, lookupKey);
         AssetFileDescriptor fd;

         try  {
             fd = mContext.getContentResolver().openAssetFileDescriptor(uri, "r");
             FileInputStream fis = fd.createInputStream();
             byte[] buf = new byte[(int) fd.getDeclaredLength()];
             fis.read(buf);
             String VCard = new String(buf);          

             path = Environment.getExternalStorageDirectory().toString() + File.separator + vfile;
             FileOutputStream mFileOutputStream = new FileOutputStream(path, true);
             mFileOutputStream.write(VCard.toString().getBytes());    

             phones.moveToNext();               

             filevcf = new File(path);
             Log.i("file", "file" +filevcf);

         }catch(Exception e1) {
             e1.printStackTrace();  
         }
    }       
    Log.i("TAG", "No Contacts in Your Phone");          
}

protected void data() {             
    File filelocation = filevcf ;     
    Intent sharingIntent = new Intent(Intent.ACTION_SEND);
    sharingIntent.setType("vnd.android.cursor.dir/email");      
    sharingIntent.setType("application/x-vcard");       
    sharingIntent.putExtra(Intent.EXTRA_EMAIL, "mail@gmail.com" );        
    sharingIntent.putExtra(Intent.EXTRA_STREAM, Uri.parse("file://"+filelocation.getAbsolutePath()));
    startActivity(Intent.createChooser(sharingIntent, "Send email"));            
 } 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-15T04:01:40.070

我成功测试了以下内容。对代码的更改以“CHANGE:”开头的注释表示。不要忘记`android.permission.WRITE_EXTERNAL_STORAGE`在你的清单中有。

```
public class MainActivity extends Activity {
    private String vfile;
    private Cursor cursor;
    private ArrayList<String> vCard;
    private String string;
    private File file;
    private String storage_path; //CHANGE:  storage_path global

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        vCard = new ArrayList<String>();                 

        Log.i("TAG one", "vfile" + vfile);
        vfile = "Contacts" + "_" + System.currentTimeMillis() + ".vcf";  

    /**
     * This Function For Vcard And here i take one Array List in Which i
     * store every Vcard String of Every Contact Here i take one Cursor and
     * this cursor is not null and its count>0 than i repeat one loop up to
     * cursor.getcount() means Up to number of phone contacts. And in Every
     * Loop i can make vcard string and store in Array list which i declared
     * as a Global. And in Every Loop i move cursor next and print log in
     * logcat.
     * */
        getVcardString();    
        data(); //CHANGE: now calling data to send vCard intent
    }

    private void getVcardString() { 

       cursor =  getContentResolver().
       query(ContactsContract.CommonDataKinds.Phone.CONTENT_URI,
       null, null, null, null);
       Log.i("TAG two", "cursor" +cursor);
       if (cursor != null && cursor.getCount() > 0) {
       cursor.moveToFirst();
       Log.i("Number of contacts", "cursorCount" +cursor.getCount());          

       for (int i = 0; i < cursor.getCount(); i++) {                       
            get(cursor);                    
            Log.i("TAG send contacts",  
            "Contact " + (i + 1) + "VcF String is" +  vCard.get(i));                     
            cursor.moveToNext();                                        
        }           

//            StringBuffer s = new StringBuffer(); CHANGE: not needed
//            s.append( vCard.toString());                
//            string = s.toString();                           
//            file = new File(string); //CHANGE: this is not what file should be        

        } else {
            Log.i("TAG", "No Contacts in Your Phone");
        }        
    }       

    public void get(Cursor cursor) {

        String lookupKey =     cursor.getString(cursor.getColumnIndex(ContactsContract.Contacts.LOOKUP_KEY));
        Log.i("lookupKey", ""+lookupKey);
        Uri uri = Uri.withAppendedPath(ContactsContract.Contacts.CONTENT_VCARD_URI, lookupKey);     

        try {
            AssetFileDescriptor fd = this.getContentResolver().openAssetFileDescriptor(uri, "r");          

            FileInputStream fis = fd.createInputStream();
            byte[] buf = new byte[(int) fd.getDeclaredLength()];
            fis.read(buf);
            String vcardstring= new String(buf);     
            vCard.add(vcardstring); //CHANGE: added this, so log statement in above method doesn't generate error

//            String storage_path = Environment.getExternalStorageDirectory().toString() + File.separator + vfile;
            //CHANGE: this is the path we need to get file for intent:
            storage_path = getExternalFilesDir(null).toString() + File.separator + vfile;            
            Log.i("MainActivity", storage_path);
            //CHANGE: this will create the file we need:
            file = new File(getExternalFilesDir(null), vfile);
            file.createNewFile(); //CHANGE
            //CHANGE: this will create the stream we need:
            FileOutputStream mFileOutputStream = new FileOutputStream(file, true); 
            mFileOutputStream.write(vcardstring.toString().getBytes());
            mFileOutputStream.close(); //don't forget to close

    //            vCard.add(storage_path); //CHANGE: not needed           

        } catch (Exception e1)  {            
            e1.printStackTrace();
        }
    }       

    private void data() {     
    //        File filelocation = file; //CHANGE: not what we need    
        Intent sharingIntent = new Intent(Intent.ACTION_SEND);
        sharingIntent.setType("vnd.android.cursor.dir/email");      
        sharingIntent.setType("application/x-vcard"); 
        //CHANGE: using correct path:
        sharingIntent.putExtra(Intent.EXTRA_STREAM, Uri.parse(storage_path));
        startActivity(Intent.createChooser(sharingIntent, "Send email"));            
    }

} 
```

# java - 内部 JAR 使用文件系统上的文件

> ID：12798007
> 
> 赞同：0
> 
> 时间：2012-10-09T10:27:12.153
> 
> 标签：java, file-io, jar, static-libraries

我有一个用例，我需要将这段特定的代码导出为 java 库（最终将是一个 JAR），但问题是它需要使用存储在文件系统上的物理文件中的一些信息。

我在这里有两个问题：

1）我应该将这些文件放在文件系统的哪里（我能想到的一个选项是在包含库的 Java 模块的资源目录中：尽管资源目录也被编译到 jar 中，但有疑问吗？）

2) 当我从外部 Java 应用程序使用这个库时，该库如何能够找到这些文件？他们还会在类路径中吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T10:37:59.520

您有两个选择，第一个是将文件放在包结构中，以便将它们打包在 jar 中。你会从这样的代码中得到它们：

```
getClass().getResourceAsStream("/path/to/your/resource/resource.ext"); 
```

如果您要从名为 A 的类的静态方法中调用它，那么您应该这样编写：

```
A.class.getResourceAsStream("/path/to/your/resource/resource.ext"); 
```

路径的“/path”部分是最顶层的包，resource.ext 是你的文件名。

另一种选择是将它们放在 jar 包之外，但是 jar 需要知道它们的位置：

*   将其作为参数提供给程序（java -jar program.jar system/path/to/file）
*   硬编码您将使用路径读取文件的位置

[我解开你的问题并回答它的方式，它与classpath](http://docs.oracle.com/javase/tutorial/essential/environment/paths.html)无关：

> CLASSPATH 变量是告诉应用程序（包括 JDK 工具）在哪里查找用户类的一种方式。（属于 JRE、JDK 平台和扩展的类应通过其他方式定义，例如引导类路径或扩展目录。）

编辑：但是您仍然可以将其放在那里并从如下代码中获取：

```
System.getProperty("java.class.path"); 
```

然而，它需要一些逻辑来解析它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T10:28:48.150

您可以在属性文件或类似的技术中传递文件的位置。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-09T10:35:32.927

> 我应该把这些文件放在文件系统的什么地方

这由您来决定，尽管将其设置为可配置是一个好主意。尝试适应主机操作系统/发行版的约定也是一个好主意，尽管这些会有所不同……并且取决于您的应用程序的性质。

> 当我从外部 Java 应用程序使用这个库时，该库如何能够找到这些文件？

您通常会使用配置属性或初始化参数来保存/传递位置。如果您正在编写应用程序而不是库，则可以使用[Java Preferences API](http://docs.oracle.com/javase/7/docs/api/java/util/prefs/package-summary.html)，尽管这对于库来说可能是一个糟糕的选择。

> 他们还会在类路径中吗？

仅当您将位置放在类路径上时……这将使配置更加棘手。鉴于这些文件需要存储在文件系统中，我建议使用`FileInputStream`或类似的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-09T10:36:36.793

使用 Eclipse，我总是创建一个包“资源”，在其中放置 jar 需要的文件。我通过以下方式访问文件（几乎可以从任何地方）

```
this.getClass().getClassLoader().getResources("/resources/file.ext"); 
```

使用**export->runnable jar，**所有这些文件都包含在 .jar 中。我不确定这是不是正确的做法。另外，我不是 100% 确定资源前的“/”，也许应该省略它。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-15T09:54:26.860

作为另一个问题的一部分，我找到了一个相关答案：[如何从 .jar 加载文件夹？](https://stackoverflow.com/questions/6247144/how-to-load-a-folder-from-a-jar)

我能够使用以下代码成功检索文件：

```
 /**
   * List directory contents for a resource folder. Not recursive.
   * This is basically a brute-force implementation.
   * Works for regular files and also JARs.
   * 
   * @author Greg Briggs
   * @param clazz Any java class that lives in the same place as the resources you want.
   * @param path Should end with "/", but not start with one.
   * @return Just the name of each member item, not the full paths.
   * @throws URISyntaxException 
   * @throws IOException 
   */
  String[] getResourceListing(Class clazz, String path) throws URISyntaxException, IOException {
      URL dirURL = clazz.getClassLoader().getResource(path);
      if (dirURL != null && dirURL.getProtocol().equals("file")) {
        /* A file path: easy enough */
        return new File(dirURL.toURI()).list();
      } 

      if (dirURL == null) {
        /* 
         * In case of a jar file, we can't actually find a directory.
         * Have to assume the same jar as clazz.
         */
        String me = clazz.getName().replace(".", "/")+".class";
        dirURL = clazz.getClassLoader().getResource(me);
      }

      if (dirURL.getProtocol().equals("jar")) {
        /* A JAR path */
        String jarPath = dirURL.getPath().substring(5, dirURL.getPath().indexOf("!")); //strip out only the JAR file
        JarFile jar = new JarFile(URLDecoder.decode(jarPath, "UTF-8"));
        Enumeration<JarEntry> entries = jar.entries(); //gives ALL entries in jar
        Set<String> result = new HashSet<String>(); //avoid duplicates in case it is a subdirectory
        while(entries.hasMoreElements()) {
          String name = entries.nextElement().getName();
          if (name.startsWith(path)) { //filter according to the path
            String entry = name.substring(path.length());
            int checkSubdir = entry.indexOf("/");
            if (checkSubdir >= 0) {
              // if it is a subdirectory, we just return the directory name
              entry = entry.substring(0, checkSubdir);
            }
            result.add(entry);
          }
        }
        return result.toArray(new String[result.size()]);
      } 

      throw new UnsupportedOperationException("Cannot list files for URL "+dirURL);
  } 
```

# php - Apache、Plesk11 Ubuntu 服务器上的不明上传错误

> ID：12798013
> 
> 赞同：1
> 
> 时间：2012-10-09T10:27:36.347
> 
> 标签：php, apache, ubuntu, file-upload, plesk

我在我的网站上使用上传器。当我尝试上传大于 150MB 的文件时，它会上传 1%，然后恢复到 1%，然后失败。我认为这可能是上传器问题，但是，我再次创建了单个文件上传器，而不是同样的事情发生了。我正在使用 apache 和 nginx 作为反向代理支持在 Ubuntu 服务器 10.04 上的并行 plesk 11

我检查了错误日志。我找到了这个

选项 FollowSymLinks 或 SymLinksIfOwnerMatch 关闭，这意味着禁止 RewriteRule 指令

当我的 .htaccess 文件是这个时，我不断收到此错误

```
Options FollowSymLinks
RewriteEngine on
RewriteCond %{HTTP_HOST} ^domain.com [NC]
RewriteRule ^(.*)$ http://www.domain.com/$1 [L,R=301]

RewriteEngine on

RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^([a-zA-Z0-9-_.]*)$ /profile.php?id=$1 [L]

ErrorDocument 404 /404.html 
```

我的 php 信息详细信息是这样的。

我在服务器上安装了 apc

```
apc.max_file_size 1M

max_file_uploads 20
max_execution_time 0
post_max_size 200M
upload_max_filesize 450M 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T12:53:46.137

如果在 plesk 上使用 Fastcgid，您还需要将其添加到配置中：

```
FcgidMaxRequestLen 471859200

/etc/apache2/mods-enabled/fcgid.conf 
```

所以 Fastcgid 看到该文件而不是 php.ini 的某些值。

所以，我认为如果使用 Fastcgi，这就是问题所在。

对不起我的英语不好，我试着改进它，我希望这对你有帮助；）

# css - css 和 html div p 标签的问题

> ID：12798016
> 
> 赞同：-3
> 
> 时间：2012-10-09T10:27:46.460
> 
> 标签：css, html

当我在其中一个页面上工作时，我遇到了一些奇怪的问题。就像我设计了一个页面，其中图像位于左侧，图像的相应文本将位于右侧。但问题是我试图选择的文本不是用鼠标选择的。并且对图像的测试也是通过留下一个 div 来进行的。请参阅此链接以更好地理解问题[http://www.startonlinegames.com/download1](http://www.startonlinegames.com/download1)请参阅下面的代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T10:30:32.803

图像描述显示在另一个图像旁边。您需要更改 div 的位置。我对你的代码做了些微改动。检查下面的一个块参考。并删除描述中的空 p 标签

```
<div style="float:left; width:462px; height:196px; margin:5px; border:solid #b8cbd2 1px;-webkit-border-radius: 5px;-moz-border-radius: 5px">
        <div style="float:right; width:230px">
        <p>         
        </p><div style="background:#fff; margin-left:5px; margin-top: 5px; width:230px; height:150px;">

       <p><b>Name:</b>Astrobot</p>
        <p><b>Description:</b> Defend our lunar-base and destroy the alien robots nest!</p>
            <p><b>Dimensions:</b> 600x600</p>
       </div>

          </div><div style="background:#fff; margin-left:5px; width:225px; height:150px; margin-top:5px">
        <a href="http://www.startonlinegames.com/play/Astrobot"><img src="http://www.startonlinegames.com/download/images/538263_Upload.gif" width="225" height="150" border="0" class="imgShadowEffect"></a>
        </div>

        <div style="margin-top: 10px">
            <a href="http://www.startonlinegames.com/play/Astrobot"><img src="http://www.startonlinegames.com/download/play.png" border="0" width="117" height="30"></a><a href="download/zip/538263_Astrobot.rar"><img src="http://www.startonlinegames.com/download/download.png" border="0" width="117" height="30"></a>
        </div>         

        </div> 
```

![在此处输入图像描述](../Images/efbfccd5fdc92a7223363a5f96e65d9a.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T11:09:51.350

```
Changes in first column. same as change others columns.  

<div style="float:left; width:462px; height:196px; margin:5px; border:solid #b8cbd2 1px;-webkit-border-radius: 5px;-moz-border-radius: 5px">
                <div style="background: none repeat scroll 0% 0% rgb(255, 255, 255); margin-left: 5px; width: 225px; height: 150px; margin-top: 5px; float: left;">
                <a href="http://www.startonlinegames.com/play/Astrobot"><img width="225" height="150" border="0" class="imgShadowEffect" src="http://www.startonlinegames.com/download/images/538263_Upload.gif"></a>
                </div>

               <div style="float: left; width: 222px; margin: 0px 0px 0px 8px;">
                <div style="background: none repeat scroll 0% 0% rgb(255, 255, 255); margin-top: 5px; height: 150px; width: 220px;">

               <p><b>Name:</b>Astrobot</p>
                <b>Description:</b> Defend our lunar-base and destroy the alien robots nest!                <p><b>Dimensions:</b> 600x600</p>
               </div>

                  </div>

                  <div style="margin-top: 5px">
                    <a href="http://www.startonlinegames.com/play/Astrobot"><img width="117" height="30" border="0" src="http://www.startonlinegames.com/download/play.png"></a><a href="download/zip/538263_Astrobot.rar"><img width="117" height="30" border="0" src="http://www.startonlinegames.com/download/download.png"></a>
                </div>

                </div> 
```

# java - Jenkins 中的 JaCoCo 代码覆盖引擎和 Sonar

> ID：12798021
> 
> 赞同：4
> 
> 时间：2012-10-09T10:28:07.883
> 
> 标签：java, junit, jenkins, sonarqube, jacoco

我需要在 Jenkins 中使用 Sonar 配置 JaCoCo 代码覆盖引擎。

我在 sonar-project.properties 文件中做了以下条目

```
sonar.projectKey=projectX:projectX
sonar.projectName=projectX
sonar.projectVersion=1.0
sources=src
tests=test
binaries=workspace/stage/main/classes,workspace/stage/test/classes
libraries=workspace/stage/artifact/lib/*.jar
sonar.dynamicAnalysis=reuseReports
sonar.core.codeCoveragePlugin=jacoco
sonar.jacoco.reportPath=reports/jacoco.exec 
```

我还写了以下蚂蚁任务：

```
<taskdef uri="antlib:org.jacoco.ant" resource="org/jacoco/ant/antlib.xml">
</taskdef>
<target name="jacoco-coverage">
<jacoco:coverage enabled="true" destfile="jacoco.exec">
<junit fork="true" forkmode="once" includeAntRuntime="true" maxmemory="512M"                                                                                                                                 printsummary="withOutAndErr" haltonfailure="false">
<test name="com.test.HelloWorld"/>
<batchtest todir="workspace/stage/test/classes/">
<fileset dir="../test" includes="**/*.java"/>
</batchtest>
<classpath>
<path refid="classpath.test"/>
<pathelement location="workspace/stage/test/classes/" />
</classpath>
</junit>
</jacoco:coverage>
</target>

<target name="jacoco-report">
<jacoco:report>
<executiondata>
<file file="jacoco.exec" />
</executiondata>
<structure name="Example Project">
<classfiles>
<fileset dir="workspace/stage/test/classes" />
</classfiles>
<sourcefiles encoding="UTF-8">
<fileset dir="test" />
</sourcefiles>
</structure>
<html destdir="report" />
</jacoco:report>
</target> 
```

jacoco.exec 文件不是从“jacoco-coverage”生成的，因此“jacoco-report”目标失败。

任何输入，指针将不胜感激。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T10:36:56.917

在此处查看我们的示例项目：[https ://github.com/SonarSource/sonar-examples/tree/master/projects/code-coverage/ut/ant/ut-ant-jacoco-reuseReports](https://github.com/SonarSource/sonar-examples/tree/master/projects/code-coverage/ut/ant/ut-ant-jacoco-reuseReports)

这应该可以帮助你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-20T16:11:44.497

以下没有任何属性的设置对我有用：

```
<plugins>
        <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-failsafe-plugin</artifactId>
            <configuration>
                <encoding>UTF-8</encoding>
                <!--write repo  rts into surefire-reports dir so jacoco can pick them up-->
                <reportsDirectory>${project.build.directory}/surefire reports</reportsDirectory>
                <!--add jacoco-->
                <argLine>${jacoco.agent.argLine}</argLine>
            </configuration>
            <executions>
                <execution>
                    <goals>
                        <goal>integration-test</goal>
                        <goal>verify</goal>
                    </goals>
                </execution>
            </executions>
        </plugin>

        <plugin>
            <groupId>org.jacoco</groupId>
            <artifactId>jacoco-maven-plugin</artifactId>
            <configuration>
                <propertyName>jacoco.agent.argLine</propertyName> <!-- default: argLine -->
                <destFile>${project.build.directory}/jacoco-integration.exec</destFile> <!-- agent -->
                <dataFile>${project.build.directory}/jacoco-integration.exec</dataFile> <!-- report -->
            </configuration>
            <executions>
                <execution>
                    <id>agent</id>
                    <goals><goal>prepare-agent</goal></goals>
                </execution>
            </executions>
        </plugin>
</plugins> 
```

# mysql - 根据行号在MYSQL中查询

> ID：12798030
> 
> 赞同：-3
> 
> 时间：2012-10-09T10:28:18.593
> 
> 标签：mysql, database

如果有办法根据行号查询？像：

```
select rownumber from table; 
```

**我正在尝试做的事情：** 我已经使用子查询计算了表中的总行数，现在我只想显示最后一个。

**菜鸟回答：**

我想拿到第二高的薪水。所以这就是我所做的：

```
select * from gg where salary< (select max(salary) from gg) order by salary desc limit 1 
```

这不适用于第 N 高的薪水，它仅适用于第二高的薪水。我是新手，所以我只是想通过我自己的方法获得第二高。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T10:29:47.873

虽然我不确定您为什么要获得特定的 rownumer，但您可以这样做：

```
select * from table LIMIT rownumer, 1; 
```

[在http://dev.mysql.com/doc/refman/5.0/en/select.html](http://dev.mysql.com/doc/refman/5.0/en/select.html)上阅读更多信息

因此，如果您想要第三行，您将执行以下操作： `SELECT * FROM table LIMIT 3,1;`

如果您想要第 6-16 行，您将使用： `SELECT * FROM table LIMIT 6,10`

请理解，这仅在获取随机行或添加 SORT BY 时有用。否则，您将永远无法确定将返回哪一行...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T10:30:11.530

如果您只想将查询限制为仅返回特定数量的行，则可以使用 Mysql 内置`LIMIT row_count OFFSET offset`子句。但是，如果您想选择像行号这样的排名数字，请使用：

```
SET @rownum = 0; 
Select *
FROM
(
   Select *,  (@rownum := @rownum+1) as rank
   FROM t
) sub 
```

**更新：**如果你想

> 我只想显示最后一个。

然后你可以这样做：

```
 SELECT *
  FROM Yourquery
  ORDER BY SomeField DESC --This how you determine the last one based on the order
  LIMIT 1; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-09T10:34:50.420

如果要选择具有行号的记录，请参见：

```
SELECT (@rank := @rank + 1) AS row_number
        ,contract_id, price1, price2, price3
      FROM t1, (SELECT @rank := 0) tmp; 
```

如果您只想要行号，请参见：

```
SELECT (@rank := @rank + 1) AS row_number
      FROM t1, (SELECT @rank := 0) tmp 
```

# [看到这个 SQLFiddle](http://sqlfiddle.com/#!2/f3d39/12)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-09T10:31:50.157

```
select * from table limit [offset,limit] 
```

**offset**是您要开始的行号，

**limit**是您想要从偏移量开始的行数

所以你可以像使用它一样

```
select * from table limit rownumber,1 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-09T10:31:58.607

没有排序就没有行号，但是如果您确实有排序顺序，那么

```
SELECT * FROM thing ORDER BY ordering LIMIT 1 OFFSET your_row; 
```

# asp.net - 即使我们导航到另一个页面，页面也会自动刷新

> ID：12798037
> 
> 赞同：1
> 
> 时间：2012-10-09T10:28:48.810
> 
> 标签：asp.net

我在页面导航中遇到问题。请帮我解决。

在一个 asp.net 页面中，例如 Page1.aspx，当我们在下拉列表中选择将显示在标签中的项目时，我有下拉列表。然后我们通过单击 page1.aspx 中的链接按钮导航到从 page1.aspx 到 page2.aspx 的另一个页面。再次，如果我来到 page1.aspx，之前选择的下拉列表值应该出现在标签中。

请帮我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T10:33:25.247

HTTP 是一种无状态协议。这意味着它会忘记任何你没有告诉它专门要求它去做的事情。

返回 Page1.aspx 时，您的程序不知道之前选择了什么。

在持久化用户选择方面，您应该考虑将它们存储在 Session（或 cookie 中）并在返回 Page1.aspx 时检查预先存在的选择。

如果此时您为用户保存了值，则可以在 Page_Load 事件期间设置正确的值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T10:38:35.307

如果是像精灵，我建议你在同一个页面中使用精灵控件。

这是一个例子， [http://www.4guysfromrolla.com/articles/061406-1.aspx](http://www.4guysfromrolla.com/articles/061406-1.aspx)

# objective-c - 已发布的 UIViewController 已正确销毁，但未调用其 -(void)dealloc 方法

> ID：12798045
> 
> 赞同：0
> 
> 时间：2012-10-09T10:29:03.407
> 
> 标签：objective-c, ios

当我释放 UIViewController 时， UIViewController 被正确销毁，但它的 dealloc 方法没有被调用。

如果 UIViewController 已被销毁（在控制台中为 nil），则保留计数应为 0，因此我希望`-(void)dealloc`调用该方法。

我还检查了我的 UIViewController 的子类，在不调用超类方法的情况下覆盖了 dealloc，但事实并非如此。

这就是我初始化它的方式：

```
myViewController = [[MyViewController alloc] initWithViewController:statusPicker]; 
```

可能是什么原因 ？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T10:56:52.360

> 如果 UIViewController 已被销毁（在控制台中为 nil），则保留计数应为 0，因此我希望调用 -(void)dealloc 方法。

嗯，不。存在的事实`nil`，并不意味着`UIViewController`已经被释放。简单来说， , 的指针`UIViewController`现在指向`nil`，但是`UIViewController`驻留的内存仍然被占用。可能会发生两件事，而不是被调用`dealloc`：

1）还有其他东西引用了`UIViewController`（例如：当你`pushViewController`从A中获得B时，A得到了对B的引用）。

2）你有内存泄漏。

我再次根据您所说的回答：

> @Lefteris 自动参考计数 = 否

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T16:24:55.433

检查您是否没有任何循环引用。例如，如果您的视图控制器实现了委托协议，请检查您的代码是否没有保留此委托。

# css - Windows 8 - 使用图像作为背景

> ID：12798046
> 
> 赞同：4
> 
> 时间：2012-10-09T10:29:03.370
> 
> 标签：css, windows, html, windows-8, winjs

我正在创建我的第一个 Windows 8 应用程序，但我遇到了 CSS 问题！

我里面有一个文件夹`images`和背景纹理`bg.png`。此外，样式表在`css`文件夹中。

**CSS**：

```
#contenthost {
  height: 100%;
  width: 100%;
  background: url("../images/bg.png") repeat;
} 
```

但是什么也没有发生！我试过`background: #999`哪个有效。我应该怎么办？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T10:35:34.967

我使用相对于应用程序根目录的图像路径尝试了您的示例，它可以正常工作：

```
#contenthost {
    height: 100%;
    width: 100%;
    background-image: url('/images/logo.png');
    background-repeat: repeat;
} 
```

就您的代码而言，这将是：

```
#contenthost {
    height: 100%;
    width: 100%;
    background: url('/images/bg.png') repeat;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T14:53:29.803

您还可以将图像保存在项目文件夹中。并将其加载到 html 页面中，如下所示：

```
<img id="mainImg2" src="ms-appdata:///Local//bckgrnd.jpg" /> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-09T12:25:48.953

如果它不是路径（如上所述使用绝对与相对可以解决此问题），您还需要确保您有一个 id = contenthost 的元素。

CSS 让你同时处理 id 和 classes，所以如果你开始使用样式页面控件，你会看到大量使用类，如 (.mypage .subsection)。

最后，您始终可以直接在 body 标记上设置任何单个 html 文件中的背景，例如：

```
 <body style="background-image: url('/images/bg.png');"> 
```

# android - Android AES 加密 192 位密钥

> ID：12798048
> 
> 赞同：3
> 
> 时间：2012-10-09T10:29:07.557
> 
> 标签：android, aes

我想使用 192 位密钥加密数据。

```
SecretKeySpec key = new SecretKeySpec(new byte[]{0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00}, "AES/CBC/NoPadding");
byte[] data = new byte[] {0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00};
byte[] encrypted = null;
try {
    Cipher cipher = Cipher.getInstance("AES/CBC/NoPadding");
    cipher.init(Cipher.ENCRYPT_MODE, key);
    encrypted = cipher.doFinal(data);
} catch (Exception e) {
    System.out.println(e.getMessage());
} 
```

但加密不是真的。而且每次数组的内容都不一样。为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T03:13:18.093

您正在使用 CBC 模式，这需要一个初始化向量 (IV)。由于您没有明确设置一个，因此每次加密时都会生成一个随机值。您必须：

*   使用静态 IV（不推荐），或
*   将 IV 与密文一起发送到 C++ 程序

以下是如何在 Java 中设置 IV，对于 C++，请参阅您正在使用的库的文档：

```
 byte[] iv = generateIv(cipher.getBlockSize());
 IvParameterSpec ivParams = new IvParameterSpec(iv);
 cipher.init(Cipher.ENCRYPT_MODE, key, ivParams); 
```

# c# - 具有复制/粘贴功能的只读 DataGridView？

> ID：12798052
> 
> 赞同：2
> 
> 时间：2012-10-09T10:29:29.607
> 
> 标签：c#, .net, winforms, datagridview

我正在开发一个 winform 应用程序，我使用 Datagridview 来显示记录。

现在我要求单元格内容应该是只读的，但同时我希望最终用户可以将单元格内容复制到剪贴板而不是编辑它。

请建议您是否有任何解决方案。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-09T12:22:29.263

```
DataGridView.ReadOnly = True;   
DataGridView.SelectionMode = DataGridViewSelectionMode.CellSelect; 
```

然后用户可以从单元格中选择数据（字符串）并 CTRL+V 将其放入剪贴板

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-09T16:16:25.763

您还可以向 DataGrid 添加一个 ContextMenu，并添加一个 Copy and Paste 项，向其添加 Ctrl+V 和 Ctrl+C 快捷方式

然后你处理他们的事件。如果需要，您可以将菜单设置为 Visible = false 并且右键单击时菜单不会显示，但快捷方式仍然有效。

就我个人而言，我喜欢添加到 DataGrid 中的右键单击菜单，但那是您的决定。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-09T12:31:27.020

您可以尝试使用此代码 - 基于`DataGridViewCell.OnKeyPress`

链接：http: [//msdn.microsoft.com/en-us/library/system.windows.forms.datagridviewcell.onkeypress.aspx](http://msdn.microsoft.com/en-us/library/system.windows.forms.datagridviewcell.onkeypress.aspx)

```
private void DataGridViewCell_KeyPress(KeyPressEventArgs e, int index)
{
     if ( (e.Key == Key.LeftCtrl || e.Key == Key.RightCtrl) 
          && e.Key == Key.C)
     {
        //You can get your cell based on index
        Clipboard.SetText(.....);
     }
} 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2015-05-11T17:57:33.090

您可以添加到 XAML：ClipboardCopyMode="IncludeHeader"/"ExcludeHeader"/"NONE"

# forms - Drupal 7中用户注册表单中的唯一字段

> ID：12798059
> 
> 赞同：1
> 
> 时间：2012-10-09T10:29:42.740
> 
> 标签：forms, drupal, drupal-7, user-registration

我在 drupal 7 工作。我需要用户注册表单中的一个字段，该字段必须是唯一的。它是一个整数字段，用于存储用户的 ID。我已经搜索了几个小时，没有任何进展。有人可以指导我完成这个吗？

谢谢你。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-09T15:34:30.310

您可以从 admin/config/people/account/fields (configuration->people->account settings) 向用户实体类型添加自定义“员工 ID”字段。您可以添加一个新的整数字段，并将其标记为显示在注册表单中，和/或必填。

要检查字段值是否为 unqiue，您需要使用自定义模块。在您的自定义模块中，使用[form_id_form_alter 挂钩](http://api.drupal.org/api/drupal/modules!system!system.api.php/function/hook_form_FORM_ID_alter/7)向注册表单添加自定义验证。然后在验证期间，您可以检查该值是否已存在于数据库中并返回表单错误。

自定义模块示例：

```
<?php
    function mymodule_form_user_register_form_alter(&$form, &$form_state, $form_id){
        $form['#validate'][] = 'mymodule_user_registration_validate';
    }

    function mymodule_user_registration_validate(&$form,&$form_state){
        $staff_id = $form_state['values']['staff_id_field'];

        $check_unique_query = 'SELECT field_staff_id_value FROM {field_data_staff_id} WHERE field_staff_id_value = :staff_id LIMIT 1';
        //if a result is returned, that means the $staff_id exists
        if (db_query($check_unique_query,array(':staff_id'=>$staff_id))->fetchField()){
            form_set_error('staff_id_field','This Staff ID is already in use');
        }
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T06:16:58.777

您是否尝试过[独特的字段模块](http://drupal.org/project/unique_field)？很确定它可以满足您的需要。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-19T22:52:51.227

字段验证可以解决问题[https://drupal.org/project/field_validation](https://drupal.org/project/field_validation)。即使在注册表单上，您也可以为每个字段设置任何规则

# jquery - JqPlot 条形图 - 条形位置卡在左侧

> ID：12798068
> 
> 赞同：0
> 
> 时间：2012-10-09T10:30:10.760
> 
> 标签：jquery, jqplot, bar-chart

我有一个使用 JqPlot 创建的条形图。它呈现如下：

![条形图图像](../Images/4331cb0bcde6552ba7ed803eda839e22.png)

这是条形图的 jQuery 代码：

```
$(document).ready(function(){

    var plots = [[['US',330]], [['GB',300]], [['IN',230]], [['AU',70]], [['RoW',70]]]
    var plot1 = $.jqplot('TopCountries', plots, {
        // The "seriesDefaults" option is an options object that will
        // be applied to all series in the chart.
        animate: true,
            // Will animate plot on calls to plot1.replot({resetAxes:true})
            animateReplot: true,
        seriesDefaults:{
            renderer:$.jqplot.BarRenderer,
            pointLabels: { show: true, location: 'n', edgeTolerance: -15 },
            rendererOptions: {
            fillToZero: true,
            barWidth: 15,
            shadow: false
            }
        },
        // Custom labels for the series are specified with the "label"
        // option on the series option.  Here a series option object
        // is specified for each series.
        series:[

        ],
        axes: {
            // Use a category axis on the x axis and use our custom ticks.
            xaxis: {
                renderer: $.jqplot.CategoryAxisRenderer,
                //ticks: ticks
            },
            // Pad the y axis just a little so bars can get close to, but
            // not touch, the grid boundaries.  1.2 is the default padding.
            yaxis: {
                pad: 1.05,
                //tickOptions: {formatString: '$%d'}
            }
        }
    });
}); 
```

这是完美的，但我希望酒吧本身更厚。如果我将 barWidth 更改为更高，则条形确实会变粗，但似乎与左侧对齐，导致条形出现在图表之外，例如

![条形图 2](../Images/bd0720c046fbc9d960c1e2c2fcb529de.png)

理想情况下，我希望酒吧位于蜱虫上方。我玩过 edgeTolerance、fillToZero、yaxis pad 等，但这些似乎没有什么区别。

有谁知道我能做什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-21T14:03:44.807

你有两个错误：
- 在情节 '[' 的位置不好
- 添加 varyBarColor: true

```
var plots = [['US',330], ['GB',300], ['IN',230], ['AU',70], ['RoW',70]];
var plot1 = $.jqplot('chartgaugeidentauto', [plots], {
// The "seriesDefaults" option is an options object that will
// be applied to all series in the chart.
animate: true,
// Will animate plot on calls to plot1.replot({resetAxes:true})
animateReplot: true,
seriesDefaults:{
    renderer:$.jqplot.BarRenderer,
    pointLabels: { 
        show: true, 
        location: 'n', 
        edgeTolerance: -15 
    },
    rendererOptions: {
        fillToZero: true,
        barWidth: 15,
        shadow: false,
        varyBarColor: true
    }
},
// Custom labels for the series are specified with the "label"
// option on the series option.  Here a series option object
// is specified for each series.
series:[
],
axes: {
    // Use a category axis on the x axis and use our custom ticks.
    xaxis: {
        renderer: $.jqplot.CategoryAxisRenderer,
        //ticks: ticks
    },
    // Pad the y axis just a little so bars can get close to, but
    // not touch, the grid boundaries.  1.2 is the default padding.
    yaxis: {
        pad: 1.05,
        //tickOptions: {formatString: '$%d'}
    }
}
}); 
```

结果 ：![在此处输入图像描述](../Images/a07cc93fd171318d1a5aba484daaca91.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T14:03:51.377

你能减少**barMargin**属性吗？IE：

```
seriesDefaults:{
    renderer:$.jqplot.BarRenderer,
        waterfall:true,
        shadow:true,
        rendererOptions: {
        barWidth:20,
        barMargin:10,
        barPadding:10
    }
}... 
```

# css - 使用背景大小的水平渐变条纹在 IE9 中不起作用

> ID：12798078
> 
> 赞同：1
> 
> 时间：2012-10-09T10:30:43.517
> 
> 标签：css, background, filter, internet-explorer-9, gradient

我正在生成一个水平渐变条作为我网站的背景，该条在除...IE9 之外的所有浏览器中都能完美运行。

渐变本身是有效的，只是我想限制蓝条的高度。在 Safari/Firefox/Chrome 中查看，然后在 IE9 中查看，您可以看到蓝色渐变填充了整个元素。

[使用 CSS 的水平渐变条](http://solaslite.wpengine.com)

这是我的CSS：

```
#inner {
background: #1e5799;
background: -moz-linear-gradient(top,  #1e5799 0%, #0057be 35%);
background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,#1e5799), color-stop(35%,#0057be));
background: -webkit-linear-gradient(top,  #1e5799 0%,#0057be 35%);
background: -o-linear-gradient(top,  #1e5799 0%,#0057be 35%);
background: -ms-linear-gradient(top,  #1e5799 0%,#0057be 35%);
background: linear-gradient(to bottom,  #1e5799 0%,#0057be 35%);
filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#1e5799', endColorstr='#0057be',GradientType=0 );
background-size: 1px 10%;
background-repeat: repeat-x;
margin: 0 auto;
padding: 1em 0; 
```

}

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-09T10:39:09.090

此代码应适用于 IE9：

```
background: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMDAlIiBoZWlnaHQ9IjEwMCUiPjxsaW5lYXJHcmFkaWVudCBpZD0iZzEiIGdyYWRpZW50VW5pdHM9InVzZXJTcGFjZU9uVXNlIiB4MT0iMCUiIHkxPSIwJSIgeDI9IjAlIiB5Mj0iMTAwJSI+PHN0b3Agb2Zmc2V0PSIwIiBzdG9wLWNvbG9yPSIjMWU1Nzk5Ii8+PHN0b3Agb2Zmc2V0PSIwLjM1IiBzdG9wLWNvbG9yPSIjMDA1N2JlIi8+PC9saW5lYXJHcmFkaWVudD48cmVjdCB4PSIwIiB5PSIwIiB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSJ1cmwoI2cxKSIgLz48L3N2Zz4=); 
```

我用[Visual CSS Gradient Generator做的](http://www.visualcsstools.com/)

* * *

更新的 CSS：

```
#inner {
background: #1e5799;
background: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMDAlIiBoZWlnaHQ9IjEwMCUiPjxsaW5lYXJHcmFkaWVudCBpZD0iZzEiIGdyYWRpZW50VW5pdHM9InVzZXJTcGFjZU9uVXNlIiB4MT0iMCUiIHkxPSIwJSIgeDI9IjAlIiB5Mj0iMTAwJSI+PHN0b3Agb2Zmc2V0PSIwIiBzdG9wLWNvbG9yPSIjMWU1Nzk5Ii8+PHN0b3Agb2Zmc2V0PSIwLjM1IiBzdG9wLWNvbG9yPSIjMDA1N2JlIi8+PC9saW5lYXJHcmFkaWVudD48cmVjdCB4PSIwIiB5PSIwIiB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSJ1cmwoI2cxKSIgLz48L3N2Zz4=);
background: -webkit-gradient(linear, center top, center bottom, color-stop(0%, #1e5799), color-stop(35%, #0057be));
background: -webkit-linear-gradient(top, #1e5799 0%, #0057be 35%);
background: -moz-linear-gradient(top, #1e5799 0%, #0057be 35%);
background: -ms-linear-gradient(top, #1e5799 0%, #0057be 35%);
background: -o-linear-gradient(top, #1e5799 0%, #0057be 35%);
background: linear-gradient(to bottom, #1e5799 0%, #0057be 35%);
filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#1e5799', endColorstr='#0057be',GradientType=0 );
background-size: 1px 10%;
background-repeat: repeat-x;
margin: 0 auto;
padding: 1em 0;
} 
```

* * *

IE9 不支持 CSS3 渐变，但它支持内联 SVG。我不建议`filter`在 IE9 上混合使用 SVG 背景，我认为最好的方法是使用[Paul Irish 的这篇文章](http://paulirish.com/2008/conditional-stylesheets-vs-css-hacks-answer-neither/)中解释的条件注释。

# java - 执行单个测试时 Eclipse 和 JUNIT4 的初始化错误

> ID：12798079
> 
> 赞同：8
> 
> 时间：2012-10-09T10:30:46.117
> 
> 标签：java, eclipse, junit4, eclipse-indigo

我的测试课是这个：

```
 /**
     * The Class TestAddSubscriber.
     */
    @RunWith(LabelledParameterized.class)
    public class TestAddSubscriber extends AbstractTestSubscriber {

        /**
         * Instantiates a new test add subscriber.
         * 
         * @param label
         *            the label
         * @param apiKey
         *            the api key
         * @param userKey
         *            the user key
         * @param customerId
         *            the customer id
         */
        public TestAddSubscriber(String label, String apiKey, String userKey,
                int customerId) {
            super(label, apiKey, userKey, customerId);
        }

        /**
         * @see com.contactlab.api.test.AbstractTest#setUp()
         */
        @Override
        @Before
        public void setUp() throws Exception {
            super.setUp();
        }

        /**
         * @see com.contactlab.api.test.AbstractTest#tearDown()
         */
        @Override
        @After
        public void tearDown() throws Exception {
            super.tearDown();
        }

        /**
         * Generated data.
         * 
         * @return the collection
         */
        @Parameters
        public static Collection<Object[]> generatedData() {
            return DataProvider.generatedCorrectSubscriberData();
        }

        /**
         * Test add subscriber with internal pk id case sensitive.
         * 
         * @outcome: success
         * @expected: success
         * @obtained: success
         */
        @Test
        public void testAddSubscriberWithInternalPkIdCaseSensitive() {

  /** this is the test **/

        }

    /**
    * other tests
    **/
    } 
```

如果我执行测试套件我没有问题但是如果只突出显示其中一个并运行它我有`Unrooted Tests -> InitializationError`

该类使用`Parameterized`.

例外是：

```
TestAddSubscriber.testAddSubscriberWithInternalPkIdCaseSensitive
Unrooted Tests
initializationError(org.junit.runner.manipulation.Filter)
java.lang.Exception: No tests found matching Method testAddSubscriberWithInternalPkIdCaseSensitive(com.contactlab.api.test.subscriber.TestAddSubscriber) from org.junit.internal.requests.ClassRequest@18872380
    at org.junit.internal.requests.FilterRequest.getRunner(FilterRequest.java:37)
    at org.eclipse.jdt.internal.junit4.runner.JUnit4TestReference.<init>(JUnit4TestReference.java:33)
    at org.eclipse.jdt.internal.junit4.runner.JUnit4TestMethodReference.<init>(JUnit4TestMethodReference.java:25)
    at org.eclipse.jdt.internal.junit4.runner.JUnit4TestLoader.createTest(JUnit4TestLoader.java:54)
    at org.eclipse.jdt.internal.junit4.runner.JUnit4TestLoader.loadTests(JUnit4TestLoader.java:38)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:452)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:683)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:390)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:197) 
```

有什么我做错了吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-08-26T07:22:01.950

您可以通过扩展 Parameterized 覆盖 org.junit.runners.ParentRunner#filter 来解决问题

```
public class IDECompatibleParameterized extends Parameterized {

    public void filter(Filter filter) throws NoTestsRemainException {
        super.filter(new FilterDecorator(filter));
    }

   /**
     * Running single test in case of parameterized test causes issue as explained in
     * http://youtrack.jetbrains.com/issue/IDEA-65966
     *
     * As a workaround we wrap the original filter and then pass it a wrapped description
     * which removes the parameter part (See deparametrizedName)
     */
    private static class FilterDecorator extends Filter {
        private final Filter delegate;

        private FilterDecorator(Filter delegate) {
            this.delegate = delegate;
        }

        @Override
        public boolean shouldRun(Description description) {
            return delegate.shouldRun(wrap(description));
        }

        @Override
        public String describe() {
            return delegate.describe();
        }
    }

    private static Description wrap(Description description) {
        String name = description.getDisplayName();
        String fixedName = deparametrizedName(name);
        Description clonedDescription =
                Description.createSuiteDescription(fixedName,description.getAnnotations().toArray(new Annotation[0]));
        for(Description child : description.getChildren()){
            clonedDescription.addChild(wrap(child));
        }
        return clonedDescription;
    }

    private static String deparametrizedName(String name) {
        //Each parameter is named as [0], [1] etc
        if(name.startsWith("[")){
            return name;
        }

        //Convert methodName[index](className) to
        //methodName(className)
        int indexOfOpenBracket = name.indexOf('[');
        int indexOfCloseBracket = name.indexOf(']')+1;
        return name.substring(0,indexOfOpenBracket).concat(name.substring(indexOfCloseBracket));
    }
} 
```

另一种方法是将启动配置中的方法名称更改为具有类似的参数名称`testAddSubscriberWithInternalPkIdCaseSensitive[0]`

# java-me - MIDlet 未运行。无法初始化与模拟器 6 的连接

> ID：12798080
> 
> 赞同：2
> 
> 时间：2012-10-09T10:30:53.620
> 
> 标签：java-me, emulation, netbeans-7, midlet

**我正在尝试在集成到 Windows 7 Ultimate 上的 Netbeans 7.1 中的 Java ME SDK 3.0 上运行一个简单的 midlet（只是一个 UI）。直到昨天它运行良好，但现在显示错误，我在模拟器中看不到 midlet。我认为这与兼容性问题没有任何关系，因为前几天应用程序运行良好。有人可以帮我纠正这个故障或其他故障吗？**（我猜程序中没有错误）

```
 import java.io.IOException;
import javax.microedition.lcdui.*;
import javax.microedition.midlet.MIDlet;

public class Facebook extends MIDlet {

public void startApp() {
Form f = new Form("Facebook Login");
try {
Image g = Image.createImage("/Facebook 2.png");
ImageItem img = new ImageItem(null, g, Item.LAYOUT_CENTER, null, Item.PLAIN);
f.append(img);
} catch (IOException e) {
e.printStackTrace();
}
TextField tf = new TextField("Email or Phone", null, 300, TextField.ANY);
f.append(tf);
TextField tf1 = new TextField("Password", null, 300, TextField.ANY);
f.append(tf1);
ChoiceGroup cg = new ChoiceGroup(null, ChoiceGroup.MULTIPLE);
cg.append("Remember Me",null);
f.append(cg);
StringItem str = new StringItem(null, "Forgot Password?", StringItem.HYPERLINK);
f.append(str);
try {
Image g2 = Image.createImage("/Fb Login 2.png");
ImageItem img2 = new ImageItem(null, null, Item.LAYOUT_CENTER, null, Item.BUTTON);
f.append(img2);
} catch (IOException e2) {
e2.printStackTrace();
}
}

public void pauseApp() {
}

public void destroyApp(boolean unconditional) {
}
} 
```

输出消息：

在执行模式下启动模拟器 *** 错误 *** 无法连接到设备 6！原因：无法初始化与模拟器6的连接！（可能运行时不兼容） F:\NetBeansProjects\MobileApplication2\nbproject\build-impl.xml:782：执行失败，错误代码为 1。BUILD FAILED（总时间：12 秒）

# c++ - 对 boost::variant 类型的对象进行单元测试

> ID：12798083
> 
> 赞同：1
> 
> 时间：2012-10-09T10:31:03.377
> 
> 标签：c++, boost

我有一个看起来像这样的单元测试：

```
typedef boost::variant<std::vector<std::string, ...> > Container;
TEST_F (TestAppend, emptyContainer)
{
    Container container((std::vector<std::string>()));
    Append append("stringValueToAppend"); 
    boost::apply_visitor(append(), container);
    ...
} 
```

我需要测试容器仍然是`std::vector<std::string>()`应用访问者的类型。然后我需要`vector<string>`从变体中提取 以测试其内容。

做这两件事的方便方法是什么？

RTTI 已启用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T11:43:24.533

你可以`boost::get`用来检查是什么类型`boost::variant`。`NULL`如果您传入一个指针，那么如果变体不是您请求的类型 ，它将返回。

所以你可以做这样的事情：

```
ASSERT_TRUE( boost::get< std::vector<std::string> >( &container ) != NULL ); 
```

或者，您可以传入引用而不是指针，它将引发`bad_get`异常

[文档在这里以获取更多信息](http://www.boost.org/doc/libs/1_51_0/doc/html/boost/get_id1573726.html)

# jar - 将工作程序转换为可执行 Jar 的问题

> ID：12798087
> 
> 赞同：1
> 
> 时间：2012-10-09T10:31:13.323
> 
> 标签：jar, manifest

当我将（工作的）java 转换为可执行的 jar 文件时，我遇到了问题。

我编写了一个非常简单的数字排序程序。它分布在两个文件（TreeGui.java 和 SortTree.java）中，每个文件或多或少都按照他们所说的进行。TreeGui 有一个输入文本区域、一个按钮和一个输出区域。按下按钮将输入文本传递给 SortTree，它会返回显示在输出框中的排序良好的数字。

当我编译每个文件，然后运行 ​​TreeGui 时，一切正常

```
javac TreeGui.java
javac SortTree.java
java TreeGui 
```

...运行一切可爱。

现在，当我尝试将这些类放入 jar 文件中时，我不断遇到同样的问题。我有一个清单（TreeGuiManifest.txt），其中包含以下内容（和一个空白的新行）：

```
Main-Class: TreeGui 
```

但是当我把所有东西放在一起时：

```
jar cmf TreeGuiManifest.txt TreeGui.jar TreeGui.class SortTree.class 
```

我遇到了问题。无论我是通过选择 jar 文件直接运行它还是通过在控制台中使用“java -jar TreeGui.jar”来运行它，程序都可以正常加载，但是在按下按钮的那一刻，它会抛出一个像这样开始并继续运行的整个字符串很长的路要走：

```
Exception in thread "AWT-EventQueue-0" java.lang.NoClassDefFoundError: SortTree TreeNode  
    at SortTree.treeInsert(SortTree.java:35)
    at SortTree.main(SortTree.java:24)
    at TreeGui.actionPerformed(TreeGui.java:66)
    at javax.swing.AbstractButton.fireActionPerformed(Unknown Source)
    at javax.swing.AbstractButton$Handler.actionPerformed(Unknown Source)
    at javax.swing.DefaultButtonModel.fireActionPerformed(Unknown Source)
    at javax.swing.DefaultButtonModel.setPressed(Unknown Source) 
```

等等等等。显然很难在 SortTree 代码中找到按下 TreeGui 中的按钮所需的元素，但我不确定我能做些什么来让它工作。

我错过了一些非常明显的东西吗？我正在使用各种导入的 java.utils.*；等等，我在制作我的 jar 文件时是否必须提及它们？谢谢你的帮助。

（我没有在这里粘贴程序的实际代码的唯一原因是，当它*不是*Jar 文件时，它一切正常......不过，如果有必要，我会很乐意添加它们）

# android - Android：AndEngine 中的错误

> ID：12798089
> 
> 赞同：1
> 
> 时间：2012-10-09T10:31:27.250
> 
> 标签：android, andengine

我正在尝试学习游戏编程`Android`。我已将 AVD 中的 GPU 仿真设置为“是”，并将 AndEngine 库版本设置为 4.1

我也将项目的版本设置为 4.1，但仍然出现以下错误，请帮助我。

我正在使用河内塔的示例代码。

```
E/AndroidRuntime(698):  at org.andengine.opengl.view.ConfigChooser.chooseConfig(ConfigChooser.java:183)
D/gralloc_goldfish(786): Emulator without GPU emulation detected.
E/AndroidRuntime(786): FATAL EXCEPTION: GLThread 101
E/AndroidRuntime(786): java.lang.IllegalArgumentException: No EGLConfig found!
E/AndroidRuntime(786):  at org.andengine.opengl.view.ConfigChooser.chooseConfig(ConfigChooser.java:183)
E/AndroidRuntime(786):  at org.andengine.opengl.view.ConfigChooser.chooseConfig(ConfigChooser.java:157)
E/AndroidRuntime(786):  at android.opengl.GLSurfaceView$EglHelper.start(GLSurfaceView.java:1009)
E/AndroidRuntime(786):  at android.opengl.GLSurfaceView$GLThread.guardedRun(GLSurfaceView.java:1362)
E/AndroidRuntime(786):  at android.opengl.GLSurfaceView$GLThread.run(GLSurfaceView.java:1216) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T14:15:30.827

您可以使用此方法`org.andengine.AndEngine.IsDeviceSupported()`来检查您的设备是否受支持。
如果你有一个古老的显卡，你不能永远启用 GPU 仿真。
有关详细信息，请参阅[此线程](http://www.andengine.org/forums/tutorials/getting-started-with-andengine-t4858.html "这个线程")的第 1 篇文章“提示和技巧”部分。

# javascript - 树枝和 JavaScript

> ID：12798091
> 
> 赞同：2
> 
> 时间：2012-10-09T10:31:28.753
> 
> 标签：javascript, twig

我正在创建一个页面，该页面根据组合框中选择的类型显示图表

```
<div id="chartdiv"></div>

<select name="graphe" id="identifiantDeMonSelect">
<option value="Column2D">Column2D
<option value="Column3D">Column3D
<option value="Pie3D">Pie3D
<option value="Pie2D">Pie2D
</select>
<input type="submit" value="Afficher" onclick="ajax()">

<script type="text/javascript">
function ajax(){
    var xhr

    if (window.XMLHttpRequest) { 
        xhr = new XMLHttpRequest();
    }
    else if (window.ActiveXObject) 
    {
        xhr = new ActiveXObject("Microsoft.XMLHTTP");
    }

    if (xhr !=null)  {
    xhr.onreadystatechange = function() { type1(xhr); };
    xhr.open("GET", "{{ path('Ajax')}}", true);
    xhr.send(null);
    } else {

     alert("The XMLHttpRequest not supported");

  }}

function type1(xhr){
            var docXML= xhr.responseText;
            var val_type = getSelectValue('identifiantDeMonSelect');
            var type = val_type+"";
            var str="{{ asset('Charts/Pie2D.swf') }}";
            var chart = new FusionCharts(str, "ChartId", "600", "400", "0", "0");
            chart.setXMLData(docXML);                               
            chart.render("chartdiv");
            }
function getSelectValue(selectId)
{
    var selectElmt = document.getElementById(selectId);
    return selectElmt.options[selectElmt.selectedIndex].value;
}

</script> 
```

现在，当我简单地替换`var str="{{ asset('Charts/Pie2D.swf') }}";`为`"{{asset('Charts/'+type+'.swf') }}"`以动态更改图表的类型时，我得到以下 symfony 错误：`"Variable "type" does not exist in "`。当我放`"{{ asset('Charts/"+type+".swf') }}"`（我只是用“替换'）时，我得到了页面，当我点击提交按钮时没有任何反应，在控制台（chrome的控制台）内我得到这个错误“ `GET http://127.0.0.1:8888/dashboard2/Symfony/web/Charts/&quot;+type+&quot;.swf 404 (Not Found)`”。它就是这样`&quot;+type+&quot`；显然我需要帮助，我不知道这是连接问题还是与树枝和资产功能有关。提前致谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-09T13:49:43.997

我想这是不可能的。您不能将 javascript vars 与 twig 混合使用，因为一个是客户端，另一个是服务器。

除了在此处使用 {{asset}} 之外，您还可以创建一条路线来获取您的资产并在操作中使用资产功能。然后你可以使用这个： [https ://github.com/FriendsOfSymfony/FOSJsRoutingBundle](https://github.com/FriendsOfSymfony/FOSJsRoutingBundle)

或像这样的廉价解决方法：

```
route = "{{ path('myassetroute', { 'pie': "PLACEHOLDER" }) }}";
route = route.replace("PLACEHOLDER", type); 
```

# python - 在瓶子中使用 POST 方法时不允许使用 405 方法

> ID：12798095
> 
> 赞同：6
> 
> 时间：2012-10-09T10:31:43.677
> 
> 标签：python, bottle

我正在开发一个用于强制下载的简单代码，现在问题是我在 GET 方法中没有收到任何错误，但在发布方法请求中收到错误“405 Method Not Allowed”。我的 GET 方法代码。

```
@route('/down/<filename:path>',method=['GET', 'POST'])
    def home(filename):
        key = request.get.GET('key')
        if key == "tCJVNTh21nEJSekuQesM2A":        
            return static_file(filename, root='/home/azoi/tmp/bottle/down/', download=filename)
        else:
    return "File Not Found" 
```

当我使用密钥请求时，它会在获取方法 [http://mydomain.com/down/xyz.pdf?key=tCJVNTh21nEJSekuQesM2A时返回给我下载文件](http://mydomain.com/down/xyz.pdf?key=tCJVNTh21nEJSekuQesM2A)

现在我使用另一个代码来处理 POST 方法

```
@route('/down/<filename:path>',method=['GET', 'POST'])
    def home(filename):
        key = request.body.readline()
        if key == "tCJVNTh21nEJSekuQesM2A":        
            return static_file(filename, root='/home/azoi/tmp/bottle/down/', download=filename)
        else:
            return "File Not Found" 
```

现在通过使用此代码，我无法处理 post 方法，即我从服务器收到 405 Method Not Allowed 错误。

有什么解决方案吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-09T11:39:52.150

路由器仅在`method`参数中采用一种方法，而不是方法列表。改用几个`@route`装饰器：

```
@route('/down/<filename:path>', method='GET')
@route('/down/<filename:path>', method='POST')
def home(filename):
    pass 
```

查看文档以获取更多信息：[http ://bottlepy.org/docs/dev/routing.html#routing-order](http://bottlepy.org/docs/dev/routing.html#routing-order)

**更新**

最近的瓶子版本允许指定方法列表：http: [//bottlepy.org/docs/dev/api.html#bottle.Bottle.route](http://bottlepy.org/docs/dev/api.html#bottle.Bottle.route)

# php - php注册paypal账号认证不扣费

> ID：12798096
> 
> 赞同：0
> 
> 时间：2012-10-09T10:31:49.353
> 
> 标签：php, paypal

我正在使用 PayPal 创建注册表单（使用卡在现场）。我在这里使用 PayPal 只是为了客户的帐户身份验证，所以不应该有任何扣款，但是当我以零价格发送请求时，它不接受，因为你知道 PayPal 不接受 0 价格，那么这里有什么解决方案？我该如何解决？

# javascript - Javascript日期格式转换

> ID：12798099
> 
> 赞同：0
> 
> 时间：2012-10-09T10:31:56.973
> 
> 标签：javascript, datetime

> **可能重复：**
> [使用 javascript 将 UTC 纪元转换为本地日期](https://stackoverflow.com/questions/4631928/convert-utc-epoch-to-local-date-with-javascript)

在我的项目中，我收到一个 JSON。它包含一个字段，例如

```
"displayDate":"1349137055814", 
```

如何转换为用户可读的（可以理解的，具体的；））形式？例如 mm-dd-yyyy

这种格式是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T10:35:22.467

[new Date(milliseconds)](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Date#section_10)使用您的毫秒值创建一个新的日期对象。

然后，您可以使用 getYear、getDate、toLocaleFormat() 或[toUTCString](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Date/toUTCString)来获取正确的格式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T10:35:38.430

您可以使用 Javascript Date 对象将其转换为日期。

```
// Assuming 'result' contains your JSON

var myDate = new Date(result.displayDate); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-09T10:40:34.357

以这种方式使用它

```
var d = new Date(1349137055814);
alert(d.getMonth()+ '/' + d.getDate() + '/' + d.getFullYear()); 
```

检查这个[演示](http://jsfiddle.net/Qq9wv/)

# android - Android 手风琴/手风琴/折叠动画

> ID：12798103
> 
> 赞同：4
> 
> 时间：2012-10-09T10:32:09.427
> 
> 标签：android, animation

我正在尝试创建一个交互式手风琴/协奏曲/折叠动画，以便视图在与之交互时折叠/展开 - 以同样的方式[翻转板](https://play.google.com/store/apps/details?id=flipboard.app&referrer=utm_source=flipweb&utm_medium=web_button&utm_term=android&utm_campaign=download_button_android)折叠视图，但两侧折叠

我认为我可以做到的方法是覆盖 onDraw 方法，以某种方式复制画布或画布上的信息，然后以一种方式旋转画布的前半部分，然后以另一种方式旋转画布的另一半以便他们在中间相遇，但是我似乎无法从画布中获取信息！是否可以从画布上抓取位图/快照？

我认为可以实现这种动画的唯一其他方法是使用 OpenGL。

非常感谢任何帮助。

编辑这是我想要实现的一个很好的例子[http://www.nytimes.com/interactive/2008/03/28/arts/20080330_FOLD_IN_FEATURE.html](http://www.nytimes.com/interactive/2008/03/28/arts/20080330_FOLD_IN_FEATURE.html)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-11-08T05:58:49.940

检查此存档以实现折叠动画

代码：http: [//developer.android.com/shareables/devbytes/FoldingLayout.zip](http://developer.android.com/shareables/devbytes/FoldingLayout.zip)

对其进行修改以使其适用于 API level11 之前的较低版本

# grails - Grails 创建的战争忽略图像文件

> ID：12798105
> 
> 赞同：3
> 
> 时间：2012-10-09T10:32:12.987
> 
> 标签：grails, war, grails-2.0

我有 grails 版本 2.0.4 。当我在本地运行我的应用程序时，它运行良好。

但是当我在 tomcat 服务器中进行生产部署时，它运行但它忽略了 /image 文件夹中的一些文件

我收到以下警告：

```
 resource.ResourceMeta While processing /css/main.css, a resource was required but not found: /images/skin/house.png
    resource.ResourceMeta While processing /css/main.css, a resource was required but not found: /images/skin/house.png
    resource.ResourceMeta While processing /css/main.css, a resource was required but not found: /images/skin/database_table.png
    resource.ResourceMeta While processing /css/main.css, a resource was required but not found: /images/skin/database_add.png
    resource.ResourceMeta While processing /css/main.css, a resource was required but not found: /images/skin/exclamation.png
    resource.ResourceMeta While processing /css/main.css, a resource was required but not found: /images/skin/exclamation.png
    resource.ResourceMeta While processing /css/main.css, a resource was required but not found: /images/skin/information.png
    resource.ResourceMeta While processing /css/main.css, a resource was required but not found: /images/skin/sorted_asc.gif
    resource.ResourceMeta While processing /css/main.css, a resource was required but not found: /images/skin/sorted_desc.gif
    resource.ResourceMeta While processing /css/main.css, a resource was required but not found: /images/skin/cancel_icon.png
    resource.ResourceMeta While processing /css/main.css, a resource was required but not found: /images/skin/cancel_icon.png
    resource.ResourceMeta While processing /css/main.css, a resource was required but not found: /images/skin/database_delete.png
    resource.ResourceMeta While processing /css/main.css, a resource was required but not found: /images/skin/database_edit.png
    resource.ResourceMeta While processing /css/main.css, a resource was required but not found: /images/skin/database_save.png
    resource.ResourceMeta While processing /css/main.css, a resource was required but not found: /images/skin/new_shadow.gif
    resource.ResourceMeta While processing /css/main.css, a resource was required but not found: /images/skin/database_table.pn 
```

为什么它的行为如此......？如何解决这个问题呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T04:35:32.857

如果您还没有找到答案，那么这种行为似乎已经为其他人出现过几次。根据我的发现，请尝试以下操作：

侵入性最小 - 在您``conf/BuildConfig.groovy`添加以下内容：

```
compile ":webxml:1.4.1" 
```

如果那不行 - 将以下内容放在您的`conf/Config.groovy`

```
grails.resources.adhoc.excludes = ['**'] 
```

这更具侵入性，因为它禁用了资源即席处理，但仍然安装了插件。

最后的手段 - 完全删除资源插件。注释掉里面的行`conf/BuildConfig.groovy`

```
//runtime ":resources:1.1.6" 
```

这一切都来自[Nabble上的一个帖子](http://grails.1312388.n4.nabble.com/grails-2-0-3-2-0-4-disable-resource-plugin-for-images-td4629173.html)

# javascript - 是否可以从父站点交叉链接 JavaScript？

> ID：12798107
> 
> 赞同：-1
> 
> 时间：2012-10-09T10:32:14.540
> 
> 标签：javascript, subdomain

我想知道是否可以将 JavaScript 从我的主站点“http://example.com”链接到我的子域“http://subsite.example.com”。

它们未托管在同一台服务器上。

我认为出于安全原因，JavaScript 不能交叉链接。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T10:36:28.460

这是一个很好的方法： [http ://www.tomhoppe.com/index.php/2008/03/cross-sub-domain-javascript-ajax-iframe-etc/](http://www.tomhoppe.com/index.php/2008/03/cross-sub-domain-javascript-ajax-iframe-etc/)

我自己从来没有尝试过，但有一段时间喜欢它，等待需要它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T10:36:28.523

如果您的意思是您是否可以检索托管在与您拥有的此页面不同的位置的 javascript 文件，是的。事实上，Google CDN 允许您链接流行的库，例如 jQuery，以便从您的服务器上卸载它，并且还可能更快。所以它非常适合你的情况。

# java - 声纳：Java 项目的更好规则

> ID：12798108
> 
> 赞同：3
> 
> 时间：2012-10-09T10:32:19.517
> 
> 标签：java, sonarqube

我试图找到一个更好的替代默认 java 质量配置文件“Sonar way with Findbugs”。

在配置文件的 516 条规则中，有一些实际上没有正确设置（优先级或激活）。

例如：

*   “死存储到局部变量”真的是一个关键问题吗？
*   “添加空字符串”已禁用，但值得启用。
*   “使用等于比较字符串”已禁用...

由于我找不到任何比默认规则更好的即用型规则集，我想从有经验的 Sonar 用户那里获得有关此主题的反馈。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-11-24T14:05:26.773

我的经验（自 SQ 在 3 家不同的公司首次发布以来，我一直在使用它，多年来编写了 130 多份自定义检查）如下：

*   创建作为当前“SonarQube Way”配置文件副本的配置文件 P1
*   在此配置文件中删除所有与您的上下文无关的规则（主要是如果您有一个与现成规则冲突的自定义规则）并在需要时更改优先级（仅在您的上下文需要时尝试增加优先级。） 跟踪修改配置文件的原因。这里的重点是能够说“我们遵循现成的配置，除了一些我们想要更严格控制的特定情况”。此配置文件将用于轻松地将您当前的“SonarQube Way”配置文件与较新的配置文件进行比较。
*   创建一个从 P1 继承并添加其他规则的配置文件 P2，无论它们是否自定义。与您的开发团队一起讨论这个主题，以便达成共识。
*   尽可能保留您添加的规则的默认优先级（不要给那些想要争论您的配置有缺陷的人提供食物，如果您需要更改优先级，请准备好捍卫您的决定，请参阅下一点。）
*   对于所有规则优先级更改（现成和/或自定义规则），请遵循预定义的比例（例如[这个](http://sonarqube-archive.15.x6.nabble.com/Meaning-of-different-kind-of-violation-in-sonar-tp5000705p5000706.html)）并坚持下去。
*   将 P2 设为默认配置文件。

然后每次“SonarQube Way”进化时，您都可以轻松更新它，然后将其与 P1 进行比较。

您可以使用“SonarQube Way with Findbugs”配置文件执行完全相同的操作（但我不会这样做，因为这会启用很多规则......）

永远记住，你可以解释的规则越少越好，所有开发人员都愿意申请，而不是有很多难以解释的检查，没有人相信，没有人想申请，也因为巨大的 SQ 不再阅读支票金额。换句话说，从小处着手，与您的开发人员一起成长。

还请记住，未解决的问题（由于他的统治引发了太多误报、难以理解等事实，没有人愿意解决）是难以摆脱的债务。这是一个总是会带来更多债务的泄漏，主要是因为人们还没有准备好听到这些问题。在这种情况下，最好在人们准备好谈论它们并应用它们时停用这些规则并在以后将它们带回来。

最后但并非最不重要的。就质量配置文件的发布日期与开发团队达成一致。例如，假设您同意每年将有两次个人资料更新这一事实。在两个配置文件发布之间，欢迎人们讨论规则，但这些规则要到下一个版本才能修改，如果需要修改（添加/删除规则），必须讨论并达成共识。如果一个项目在两个版本之间开始，它会从当前配置文件开始并使用它。当配置文件更新时，您的项目可能有一个版本来使其代码与新规则保持一致，或者如果您使用“修复泄漏”方法，项目同意新代码以及重构代码将遵循新配置文件。

请记住，如果您是配置文件的所有者，您的开发人员应该是要求添加新规则的人（顺便说一下，这是一个很好的 KPI。）

关于这一点还有很多话要说，但这应该是一个很好的起点，以帮助您。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-06T08:45:43.857

> “死存储到局部变量”真的是一个关键问题吗？

这可能是一个严重的问题，因为它不仅仅表示在某些情况下浪费了内存。通常，此问题是由缺少或错误的变量访问引起的。考虑这个`m_valueY`将被标记为死存储的示例：

```
public class ResultData {
  private int m_valueX;
  private int m_valueY;

  public int getValueX() {
    return m_valueX;
   }
   public int getValueY() {
     //should actually be m_valueY
     return m_valueX;
   }
   public void setValueX(int valueX) {
     m_valueX = valueX;
   }
   public void setValueY(int valueY) {
     m_valueY = valueY;
   }
} 
```

> 使用等于比较字符串

可能“对象应该与'equals（）'进行比较”规则是活跃的，并且隐含地涵盖了这个检测到的问题。

# c# - 字符编码，char转xml值

> ID：12798109
> 
> 赞同：2
> 
> 时间：2012-10-09T10:32:22.450
> 
> 标签：c#, xml

我正在尝试将一些字符（\t、\r、\n、“\r\n”）转换为与 XML 兼容的“值”。所以 '\t' 应该是`&#009;`并且 \r\n 应该是`&#xD;&#xA;`. 我试过使用`HttpUtility.HtmlEncode()`，但没有任何成功。

对于那些感兴趣的人：

我无法获得我想要的格式，但以下似乎也是如此：

`"\r\n".ToList().ForEach(c => Console.Write("&#x" + ((int)c).ToString("X") + ";"));`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T10:38:20.857

AFAIK 实体如`\t`, `\r`or`\n`不需要“xml-escaped”（事实上你不能默认转义它们，因为它可能只是源格式或者它可能是真正的新行并且你不知道它是哪一个），所以我发现的[最佳解决方案](http://forums.asp.net/t/1165023.aspx/1)是“手动”转换这些字符：

```
HttpUtility.HtmlEncode()
    .Replace("\n\r", "<br/>")
    .Replace("\n", "<br/>")  // Or use &#012; if you want it "binary safe"
    .Replace("\r", "<br/>")
    .Replace("\t", "&#009;"); 
```

# php - 在php中创建带有标题+图像的pdf

> ID：12798113
> 
> 赞同：0
> 
> 时间：2012-10-09T10:32:35.923
> 
> 标签：php, pdf

我有以下数组，其中包含标题及其各自的图像。

```
Array
(
    [0] => Array
        (
            [title] => Title1 : Introduction
            [image] => http://path/to/file.png
        )

    [1] => Array
        (
            [title] => Title2 : Description
            [image] => http://path/to/file.jpg
       )
     .
     .
     .
     //and so on

) 
```

我想创建它的PDF，如：第1页上的Array [0]内容：顶部（对齐：中​​心）和下面的标题图像（对齐：中​​心，高度：400，宽度：400）

与第 2 页上的数组 [1] 内容相同......

我正在这样做，但没有取得任何成功。在下面检查我的代码：

```
<?php    
include_once ('class.ezpdf.php');

$feeddata = unserialize(urldecode($_GET['feed']));

$pdf = & new Cezpdf('LETTER');

$image = imagecreatefrompng("background.png");
$pdf->addImage($image, 0, 0, 611);

$pdf->selectFont("fonts/Helvetica.afm");
$pdf->setColor(0 / 255, 0 / 255, 0 / 255);

$pdf->setLineStyle(0.5);
$pdf->line(80, 615, 540, 615);
$pdf->setStrokeColor(0, 0, 0);

$pdf->setColor(0 / 255, 0 / 255, 0 / 255);
$pdf->addText(30, 16, 8, "<b>Created " . date("m/d/Y"));

foreach($feeddata as $data){
    $pdf->addText(80, 620, 10, $data['title']);
    $pdf->addImage($data['image'], 0, 0, 611);
}   

$pdf->ezStream();
?> 
```

谁能告诉我我该怎么做......谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T09:36:56.910

最后，我自己解决了：

我刚用这个：

```
foreach ($feeddata as $data) {
    $pdf->ezText($data['title'], 15);
    $pdf->ezImage($data['image'], 50, 300, none, center);
} 
```

现在它在我的 pdf 文件中显示标题和图像.....非常简单:-)

# java - EclipseLink 复合持久性单元类声明

> ID：12798118
> 
> 赞同：1
> 
> 时间：2012-10-09T10:32:58.590
> 
> 标签：java, persistence, eclipselink, composite

到目前为止，我在一个`persistence.xml`文件中有 3 个持久性单元。但是我发现了复合持久性单元，现在想将它实现到我的项目中。这是使用`<jar-file>`标签和单独`persistence.xml`文件执行此操作的示例：[http ://wiki.eclipse.org/EclipseLink/Examples/JPA/Composite](http://wiki.eclipse.org/EclipseLink/Examples/JPA/Composite)

当一个文件中的非复合持久性单元很少时，是否可以将所有实体放在一个包中（不是`.jar`）并使用`<class>`标签而不是like？如果没有，如何将单独的持久性单元导出到文件中？`<jar-file>``persistence.xml``.jar`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T14:16:33.023

是的，这些类不需要在 jars 文件中，只需要在 persistence.xml 文件中。

# php - 包含搜索词的文件的位置（带有 ExtractingRequestHandler 的 Solr）

> ID：12798122
> 
> 赞同：1
> 
> 时间：2012-10-09T10:33:03.090
> 
> 标签：php, solr, solarium

我刚刚启动 Solr 并使用[ExtractingRequestHandler](http://wiki.apache.org/solr/ExtractingRequestHandler)使用 curl 命令来索引 PDF 文件：

```
curl "http://localhost:8983/solr/update/extract?literal.id=doc1&commit=true" -F "myfile=@file.pdf" 
```

我使用 Solarium 作为 Solr 客户端来查询和列出结果。
但是只要用户不知道他正在搜索的单词来自哪个文件，所有这些步骤仍然是无用的。
所以我只想显示文件中关键字所在的文本的一部分，以及文件的链接以下载它。
任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T11:45:50.630

您将需要检查[solr highlighting](http://lucidworks.lucidimagination.com/display/solr/Highlighting)，这将允许您使用其周围的文本部分突出显示匹配项。

# javascript - jQuery UI 对话框独立/替代

> ID：12798132
> 
> 赞同：3
> 
> 时间：2012-10-09T10:33:38.260
> 
> 标签：javascript, jquery, jquery-ui, dialog, jquery-ui-dialog

我正在努力提高我网站的性能。一个好的轴是摆脱对 jQuery UI 的依赖。

目前我只需要对话功能。我以为我会重新编码它，但如果已经有类似的实现，它会节省我很多时间。

你知道是否有非常相似的独立版本的 jQuery UI 对话框？（基本上我需要的是打开一个居中的对话框并在 AJAX 中加载一个页面）

编辑：只是为了澄清我正在寻找的是一个与 jQuery UI 对话框具有**相同行为**的插件，类似于：

```
$(modale).dialog('option', 'position', 'center');
$(modale).dialog('option', 'width', 'auto');
$(modale).dialog('close');
$(modale).dialog('destroy'); 
```

以下是我使用的选项：

```
 var options = {
  width: 500,
  minWidth: false,
  minHeight: false,
  dialogClass: 'modalDefault',
  modal: true,
  closeOnEscape: false,
  open: function(event, ui) {.....},
  close: function() { ......}
  } 
```

如果您知道我可以按原样集成或只需很少修改的插件，那将非常棒。如果不可能，我将按照 tpaksu 的建议使用自定义 jquery-ui

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-09T10:46:28.627

看看下面的链接。

基于 jQuery 的简单模式插件，专门用于模式对话框。

[jQuery 简单模态插件](http://www.ericmmartin.com/projects/simplemodal/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T10:41:30.810

如果您不需要使用 jQuery UI 对话框的任何拖动行为，那么滚动您自己的轻量级解决方案（即居中模式对话框）很简单。

您可以在这里找到一个不依赖任何外部 javascript 框架的简单实现：[http ://raventools.com/blog/create-a-modal-dialog-using-css-and-javascript/](http://raventools.com/blog/create-a-modal-dialog-using-css-and-javascript/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-09T10:38:47.260

我将 Twitter Bootstrap 用于我的绝大多数前端 UI 控件，但有几个盲点没有充分覆盖，例如日期选择器。

幸运的是，jqueryui.com 上的站点允许您下载仅包含您需要的自定义构建。在尝试任何新事物之前，我会先尝试一下。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-09T12:39:51.447

您可以使用[下载构建器](http://jqueryui.com/download/)创建自定义的 jQuery UI 构建，其中仅包含您希望使用的小部件。

# c# - 如何在 MVC3 razor 视图页面中使用 Goto 语句？

> ID：12798135
> 
> 赞同：1
> 
> 时间：2012-10-09T10:33:47.827
> 
> 标签：c#, asp.net-mvc-3, razor

我正在开发 MVC3 razor Web 应用程序。查看页面我尝试使用 goto 语句但不起作用。如何在视图页面或 .chtml 文件中编写 goto 语句或语法，请帮助我。谢谢你提前。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T10:38:28.953

我相信您不想使用`goto`关键字而是导航到 (goto) a `View`。

MVC 使用`Controllers`该路由`HTTP`请求到`Views`，你将需要在你的控制器中这样的东西：

```
 public ActionResult YourWebPage()
    {
        return View("MyPage");
    } 
```

然后您可以导航到`URL`：`http://YourSite/YourWebPage`

它将使用指向`.cshtml`文件的视图“MyPage”。

作为教程，请查看：[http ://www.asp.net/mvc](http://www.asp.net/mvc)

# windows-8 - 在“SYSTEM”帐户下执行时由 Windows 8 中的 OpenPrinter() 返回的 ERROR_INVALID_PRINTER_NAME

> ID：12798137
> 
> 赞同：0
> 
> 时间：2012-10-09T10:33:49.150
> 
> 标签：windows-8

当用户卸载应用程序时，我的应用程序会删除虚拟打印机。应用程序的安装和卸载可以使用用户交互（向导）或通过在 Windows server 2003 中设置组策略来完成（域管理员在服务器中设置策略，客户端 PC 中的域用户需要更新组策略并重新启动客户端 PC 进行安装或卸载应用程序）。应用程序中的以下代码在卸载应用程序时删除打印机和打印机驱动程序。

```
void CPrinterDriver::DeletePrinterIfExists()
{
// Delete old printer driver if existing
ControlSpoolService(TRUE);

HANDLE hPrinter = NULL;
PRINTER_DEFAULTS    pDefaults = { NULL, NULL, PRINTER_ALL_ACCESS };
// Ignore error codes
OpenPrinter(m_driverInfo.pName, &hPrinter, &pDefaults);
if (hPrinter)
{
// deleting jobs
SetPrinter(hPrinter, 0, NULL, PRINTER_CONTROL_PURGE);
// Delete printer
DeletePrinter(hPrinter);
// Get printer driver name and delete it
DWORD   dwNeeded = 0;
GetPrinter(hPrinter, 2, NULL, 0, &dwNeeded);
if (dwNeeded)
{
PRINTER_INFO_2  *pi2 = (PRINTER_INFO_2 *)GlobalAlloc(GPTR, sizeof(PRINTER_INFO_2)*dwNeeded);
if (pi2)
{
   GetPrinter(hPrinter, 2, (LPBYTE)pi2, dwNeeded, &dwNeeded);
   DeletePrinterDriver(NULL, NULL, pi2->pDriverName);
   GlobalFree(pi2);
}
}
ClosePrinter(hPrinter);
}
} 
```

上述代码在 Windows 7 的两种卸载情况下（用户交互式安装和使用组策略）都可以正常工作。在 Windows 8 中，它使用用户交互式安装和卸载运行良好。但在 Windows 8 中，上述 OpenPrinter() 正在返回 ERROR_INVALID_PRINTER_NAME。

我们发现 OpenPrinter() 是使用“SYSTEM”帐户调用的。请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T11:53:54.937

我们发现在系统启动期间，组策略试图在填充 PC 中的可用打印机列表之前卸载打印机（列表填充在以下注册表项下。如果未填充列表，则以下项不存在）。

“HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Control\Print\Printers”

因此，我们在调用 openPrinter() 之前添加了 2 分钟（不少于 2 分钟）的延迟。延迟后，注册表项存在并且 OpenPrinter() 成功。这样我们就可以卸载打印机了。

注意：Microsoft 声称 Windows 8 启动时间对于某些受支持的硬件减少到 7 秒。但是 2 分钟的插入延迟会降低 Windows 8 PC 的启动性能。有关 Windwos 8 OS 启动时间改进的更多详细信息，请参阅以下链接。 [http://blogs.msdn.com/b/b8/archive/2012/05/22/designing-for-pcs-that-boot-faster-than-ever-before.aspx](http://blogs.msdn.com/b/b8/archive/2012/05/22/designing-for-pcs-that-boot-faster-than-ever-before.aspx) 因此延迟 2 分钟可以被视为一种解决方法。需要检查 10/26 之后的 Windows 8 OS 版本中的行为。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-07-04T09:52:29.447

如果您遇到以下问题：

*   共享（网络）打印机的注册表项丢失并且
*   API 为您提供无效的打印机名称错误

然后您可以尝试通过完整的 UNC 路径打开打印机。

因此，当打开`MYPRINTER`不起作用时，将其打开为`\\MYSERVER\MYPRINTER`.

当然，这仍然假设您已经可以从其他应用程序正常打印到这台打印机！

# regex - emacs lisp 正则表达式来检测 C++ 模板

> ID：12798138
> 
> 赞同：1
> 
> 时间：2012-10-09T10:33:57.217
> 
> 标签：regex, lisp

我试图摆脱一个 C++ 模板表达式，存储到属性类型中，每个单一类型的类，因此从类型

`A< B < C < D > >

我想提取单个类型 A、B、C、D 并将它们放入一个列表中。我在 lisp 中编写了以下代码：

```
(if (string-match "\\(\\w+\\)<+\\(\\w+\\)>+$" property-type)
    (progn
      (setq current-include (match-string 1 property-type) )
      (setq current-recursive-property-type (match-string 2 property-type)) 
```

但是匹配是错误的，因为第一个匹配（当前包含）是 C，其余的是 D。正则表达式中的错误是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T13:11:08.733

根据定义，正则表达式无法解析任意深度嵌套组，因此通常使用正则表达式实际上无法完成该任务，但是，在这种特殊情况下，您可以假装将字符串拆分为字符`?\<`并`?\>`同时删除空子字符串：

```
(split-string "A< B < C < D > > >" "\\s-*[,<>]+\\s-*" t) 
```

似乎会做你想做的事。

另请注意，如果您要匹配大量文本，并且必须使其成为多行表达式，那么它很可能非常低效。所以你可以改用这样的东西：

```
(defun parse-c++-types (type)
  (let ((current 0) c types word)
    (while (< current (length type))
      (setq c (aref type current))
      (if (or (char-equal c ?\<) (char-equal c ?\>))
          (when word
            (setq types (cons (coerce word 'string) types)
                  word nil))
        (unless (memberp c '(?\, ?\ ))
          (setq word (cons c word))))
      (incf current))
    (reverse types)))

(parse-c++-types "A< B < C < D > > >") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T10:51:32.893

假设每个类名前面都有 a 是正确的`<`吗？如果是这样，您可以轻松匹配（未转义）

```
(\w+)(?:\s*<\s*(\w+))* 
```

提取任何单个类名。

*   `(\w+)`是第一堂课
*   `(?:`是非捕获组
    *   `\s*<\s*`之前和之后的空格`<`
    *   (\w+)
    *   `)*`该组重复零次或多次

[这](http://www.rubular.com/r/kV8hONxwla)是一个使用命名组来展示其工作原理的示例，*第二*组是多重匹配，最后一个是 D。

# android - Android 模拟器无法正常启动

> ID：12798144
> 
> 赞同：0
> 
> 时间：2012-10-09T10:34:20.297
> 
> 标签：android, android-emulator

每当我尝试运行我的新应用程序时，模拟器最初都会启动，但一段时间后进程停止，它会向我显示如下错误：

```
Failed to install LoginUsingJSON.apk on device 'emulator-5556!
LoginUsingJSON] (null)
LoginUsingJSON] Failed to install LoginUsingJSON.apk on device 'emulator-5556': EOF
LoginUsingJSON] com.android.ddmlib.InstallException: EOF
LoginUsingJSON] Launch canceled! 
```

在 10 次或可能 15 次尝试后，相同的应用程序可以正常运行。关于模拟器，我每天都面临这个问题。我应该怎么做才能解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T10:37:29.307

这听起来很像您想在模拟器启动时部署应用程序，但这是失败的。然后经过一些重试（当模拟器启动时），它将成功。

只需在您的黑客会话开始时启动模拟器一次，并且仅在它显示正常登录屏幕时将您的应用程序部署到它。

无需为每次部署关闭/重新启动模拟器。

# java - Spring 3.1 命名空间错误组件扫描

> ID：12798146
> 
> 赞同：1
> 
> 时间：2012-10-09T10:34:36.020
> 
> 标签：java, spring, sax, mule, saxparser

我正在使用带有 mule 的 Spring 3.1.1。mule 内部使用的 jar 版本是 3.1.1 RELEASE。

在我的配置 XML 中，这是一个 mule 流，

我正在关注 SAX 解析器异常。

```
Caused by: org.xml.sax.SAXParseException: cvc-complex-type.2.4.a: Invalid content was found starting with element 'context:component-scan'. One of '{"http://www.mulesoft.org/schema/mule/core":annotations, "http://www.mulesoft.org/schema/mule/core":description, "http://www.springframework.org/schema/beans":beans, "http://www.springframework.org/schema/beans":bean, "http://www.springframework.org/schema/context":property-placeholder, "http://www.springframework.org/schema/beans":ref, "http://www.mulesoft.org/schema/mule/core":global-property, "http://www.mulesoft.org/schema/mule/core":configuration, "http://www.mulesoft.org/schema/mule/core":notifications, "http://www.mulesoft.org/schema/mule/core":abstract-extension, "http://www.mulesoft.org/schema/mule/core":abstract-mixed-content-extension, "http://www.mulesoft.org/schema/mule/core":abstract-agent, "http://www.mulesoft.org/schema/mule/core":abstract-security-manager, "http://www.mulesoft.org/schema/mule/core":abstract-transaction-manager, "http://www.mulesoft.org/schema/mule/core":abstract-connector, "http://www.mulesoft.org/schema/mule/core":abstract-global-endpoint, "http://www.mulesoft.org/schema/mule/core":abstract-exception-strategy, "http://www.mulesoft.org/schema/mule/core":abstract-flow-construct, "http://www.mulesoft.org/schema/mule/core":flow, "http://www.mulesoft.org/schema/mule/core":sub-flow, "http://www.mulesoft.org/schema/mule/core":abstract-model, "http://www.mulesoft.org/schema/mule/core":abstract-interceptor-stack, "http://www.mulesoft.org/schema/mule/core":abstract-filter, "http://www.mulesoft.org/schema/mule/core":abstract-transformer, "http://www.mulesoft.org/schema/mule/core":processor-chain, "http://www.mulesoft.org/schema/mule/core":custom-processor, "http://www.mulesoft.org/schema/mule/core":invoke, "http://www.mulesoft.org/schema/mule/core":abstract-global-intercepting-message-processor, "http://www.mulesoft.org/schema/mule/core":custom-queue-store, "http://www.mulesoft.org/schema/mule/core":abstract-processing-strategy}' is expected. 
```

我的骡子流程如下：

```
<?xml version="1.0" encoding="UTF-8"?>

<mule xmlns="http://www.mulesoft.org/schema/mule/core" xmlns:http="http://www.mulesoft.org/schema/mule/http" xmlns:jms="http://www.mulesoft.org/schema/mule/jms" xmlns:doc="http://www.mulesoft.org/schema/mule/documentation" xmlns:spring="http://www.springframework.org/schema/beans" xmlns:context="http://www.springframework.org/schema/context" xmlns:core="http://www.mulesoft.org/schema/mule/core" version="CE-3.3.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="
http://www.mulesoft.org/schema/mule/http http://www.mulesoft.org/schema/mule/http/current/mule-http.xsd 
http://www.mulesoft.org/schema/mule/jms http://www.mulesoft.org/schema/mule/jms/current/mule-jms.xsd 
http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-current.xsd 
http://www.mulesoft.org/schema/mule/core http://www.mulesoft.org/schema/mule/core/current/mule.xsd http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-3.1.xsd">

    <context:component-scan base-package="com.comviva.mfs.eig.logging.dataAccess" />

    <jms:activemq-connector name="Active_MQ" brokerURL="tcp://localhost:61616" validateConnections="true" doc:name="Active MQ"/> 
```

我确保两者都`xsi:schemaLocation`被 `xmlns:context`声明了。

无法弄清楚为什么会发生 sax 解析器异常。

请帮帮我。

**更新：** 分离两个 XML 文件的任何解决方案也适用于我。请帮助我如何在我们的 mule 应用程序中为 spring 维护单独的 ApplicationContext.xml。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-09T10:55:40.433

我认为您不能`<context:component-scan>`用作`<mule>`. 尝试以下操作：

```
<mule ...>
    <spring:beans>
         <context:component-scan ... />
    </spring:beans>
</mule> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T12:57:04.390

这是您问题的**更新**部分的答案：

您可以通过`<context:component-scan>`这种方式单独移动到新的上下文文件：appnewcontext.xml：

```
<context:component-scan base-package="com.comviva.mfs.eig.logging.dataAccess" /> 
```

并导入主要的：

```
<beans:import resource="appnewcontext.xml"/> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-04T22:45:27.533

您可以忽略资源未定义错误。这是一个错误，但不会影响您的应用程序运行。

# android - 动态更新 AutoCompleteTextView 有时不显示建议

> ID：12798147
> 
> 赞同：1
> 
> 时间：2012-10-09T10:34:36.467
> 
> 标签：android, textview, adapter

我在每 3 个/第 4 个字母上动态更新我的 AutoCompleteTextView。

出于某种原因，大约 5-10% 的时间在用户键入第三个字母时，虽然我确定我正在制作一个有效的数组列表并填充 AutoCompleteTextView，但它不会针对特殊情况显示。我注意到一致的是，未显示的单词列表长度为 5-15（其他范围为 50+）

知道发生了什么吗？我是否遗漏了一些关于 AutoCompleteTextView 的内容，如果数据列表没有那么大，它认为显示 10 条左右的建议是不值得的？我应该添加不相关的文件管理器数据还是会影响性能？谢谢

这是一些相关的源代码..

用于文本视图的 Textwatcher 检查；

```
 if (((start + count) == 3) || ((start + count) == 4)
                                || ((start == 3) && (before >= 1))) {
                            if (!last.equals(s)) {
                                thread = new Thread(new AutoCompleteThread(s));
                                thread.start();
                            }
                        } 
```

在我的自定义线程中，我将单词分组......然后我在我的文本视图和适配器上调用它；

```
 if(words.size() > 0)
                    {
                        last = s;
//                      adapter.clear();
//                      for(String e : words)
//                          adapter.add(e);
//                      adapter.notifyDataSetChanged();
                        adapter = new ArrayAdapter<String>(
                                getActivity(), android.R.layout.simple_list_item_1, words);
                        textView.setAdapter(adapter);

                        textView.showDropDown();
                    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-14T20:15:47.713

事实证明，如果我的动态加载列表非常小并且我的原始列表（来自我的 RES 文件夹）非常大（500 左右），那么经常会发生一个奇怪的故障。当动态加载的列表很大时它不会出现故障，也许它给了 AutoCompleteTextView 足够的时间来在加载时显示建议？不确定。

无论如何，解决方案是降低我的 res 文件夹中 arraylist 的原始大小

# visual-studio - 如何确保从同一个项目构建的 dll 的校验和是相同的

> ID：12798150
> 
> 赞同：2
> 
> 时间：2012-10-09T10:34:47.153
> 
> 标签：visual-studio, assembly, compilation, linker

我正在做一个需要 3rd 方公司来验证我们的源代码的项目，我们必须确保在我们的站点构建的 dll 具有与在他们的站点构建的相同的校验和。

我正在尝试为他们设置机器来构建我们的项目。问题是他们构建的一些 dll 与我们构建的不同。我们正在使用 Visual Studio 2005 来编译该项目。两台机器都运行 Windows XP prof SP3。两台机器的目录结构相同。dll的源代码和项目设置是一样的。我们确实有一个程序来更新文件头中的时间戳。

我使用一个工具调用PE explorer来比较不同的dll文件，不同的是在.text原始数据段中，有一些mov函数引用了.data段中不同的地址（初始化数据）。但是他们引用的地址都是零值，不会影响 .data 段或 dll 的功能。

我只想知道Visual Studio或Windows XP中是否有任何配置会导致这种不同？

谢谢

# ruby-on-rails - 在 ruby on rails 中包含嵌入链接文本的 FBGraph 消息？

> ID：12798154
> 
> 赞同：1
> 
> 时间：2012-10-09T10:35:11.717
> 
> 标签：ruby-on-rails, fb-graph

我是 FBGraph 和 ruby​​ 的新手。我正在为 facebook 使用 FBGraph api，并使用以下代码进行发布。 `me = FbGraph::User.me(ACCESS_TOKEN) me.feed!( :message => 'Updating via FbGraph', )`

它对我来说工作正常。

我想发布一条包含 html 标签的消息`<a href= "somelink">Text</a>`

请指教。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T02:43:30.983

您可以将以下内容添加到 me.feed！（我添加了一些其他的只是为了更好的衡量）：

```
 me.feed!(
        :message => 'Updating via FbGraph',
        :name => 'Update',
        :link => 'http://www.somelink.com/',
        :description => 'My description'
      ) 
```

# wpf - 如果窗口在 WPF 中调整大小，如何获取图像坐标（相对于原始图像）

> ID：12798155
> 
> 赞同：0
> 
> 时间：2012-10-09T10:35:13.790
> 
> 标签：wpf, image

我正在开发一个项目，其中 Image 正在显示到网格面板中。我需要在图像的不同区域显示不同的工具提示。我可以硬编码图像坐标，但问题是当我调整窗口大小时，硬编码部分不起作用。

请建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T10:47:18.930

像这样的东西可能对你有用：

```
<Grid>
    <Image />
    <UniformGrid Columns="2" Rows="2">
        <UniformGrid.Resources>
            <Style TargetType="Border">
                <Setter Property="Background" Value="Transparent" />
                <Setter Property="BorderBrush" Value="Gray" />
                <Setter Property="BorderThickness" Value="1" />
            </Style>
        </UniformGrid.Resources>
        <Border ToolTip="0,0"/>
        <Border ToolTip="0,1"/>
        <Border ToolTip="1,0"/>
        <Border ToolTip="1,1"/>
    </UniformGrid>
</Grid> 
```

边框仅用于演示。使用更多列和行以获得更多详细信息。

# ruby-on-rails-3 - 在 Rails 3 中以明文形式发送密码

> ID：12798157
> 
> 赞同：0
> 
> 时间：2012-10-09T10:35:20.833
> 
> 标签：ruby-on-rails-3, restful-authentication

在我的应用程序中，我使用 RESTful 身份验证来验证登录。但问题是每当我登录并检查日志时，我的密码都是以明文形式发送的，而且很容易阅读。我尝试了很多东西，但问题仍然存在。

关于如何解决这个问题的任何想法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T10:47:51.113

找到了解决方案。

在 application.rb 中只需添加以下行，其余的将被处理；

```
config.filter_parameters << :password 
```

# php - 我需要一个更好的解决方案来使我的应用程序中以前的用户头像无效（PHP/MySQL）

> ID：12798160
> 
> 赞同：2
> 
> 时间：2012-10-09T10:35:21.763
> 
> 标签：php, mysql

目前，当用户更改头像时，我正在执行以下操作来存储和使头像无效：

*   头像按用户 ID 存储，自动拆分为每个 1000 个文件夹（为了帮助文件系统并避免每个目录中有数百万个文件）

*   我用于检索用户头像的函数采用他们的用户 ID/性别/版本号 - 如果版本号大于 0，则将参数`?ver=$ver`附加到 URL，以便其他用户重新下载任何缓存的头像。

*   如果版本号为 0，则 url 根据他们的“性别”返回默认头像

*   性别和头像版本存储在我的用户数据表中，每次用户更改他/她的头像时版本都会增加。

这工作得很好，并且最大限度地减少了数据库查找，因为在任何给定的点上，我已经拥有了根据用户 ID/性别/版本生成相关和当前头像所需的用户数据。无需再次查询或执行任何联接即可获取用户当前的头像。

但是，现在我添加了一个活动提要，我遇到了问题。

鉴于活动提要的性质，我们通常将故事数据存储为 JSON（使用 Redis 扇出并使用 MySQL 作为持久层等......等等......）

在任何给定的活动中，我们一直在存储用户的用户 ID、性别、版本号，以避免在检索信息时必须执行 JOIN。当然，这意味着如果用户头像被更改，那么任何旧活动都可能显示旧头像。

我正在寻找一种解决此问题的方法，该方法理想情况下不涉及在查询我们的活动提要时添加 JOIN。

到目前为止，我能想出的唯一解决方案是在查询活动提要时根据 time() 附加一个参数，以确保下载任何新的头像。但这当然意味着对于提要，用户浏览器中不会缓存任何头像。

另一种选择是对提要进行排队更新，并使用新的头像版本检查并修改每个相关的提要，但这似乎很荒谬。

我唯一的另一个想法是在登录时获取所有朋友的头像版本号，并在会话期间将它们存储在一个大数组中，然后简单地将它们附加到各种头像 URL 中。意味着有一个查找而不是多个查找。但是当然....这不涉及您不是朋友/关注的用户对活动的评论。但是话又说回来，最新的头像对你不关注的人真的很重要吗？也许不是。

对我来说，每个解决方案似乎都有其不足之处。

我还有其他选择吗？我是否应该回到关于头像 url 存储的绘图板（尽管我真的看不到另一种历史存储这些 URL 并让它们在提要中自动更新的方式）。

任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T11:57:46.190

好吧，我不太确定您的配置，但我认为在 nginx 中可以这样做：

```
location ^~ /avatars/ {
        add_header Pragma public;
        add_header Cache-Control "public, must-revalidate, proxy-revalidate";
} 
```

在阿帕奇：

```
Header set Cache-Control "public, must-revalidate" 
```

# php - “A”与“An”——任何 php 库都可以处理这个语法规则？

> ID：12798162
> 
> 赞同：1
> 
> 时间：2012-10-09T10:35:23.900
> 
> 标签：php

> **可能重复：**
> [以编程方式确定是用“a”还是“an”来描述对象？](https://stackoverflow.com/questions/4558437/programmatically-determine-whether-to-describe-an-object-with-a-or-an)

我需要输出这样的句子：

```
Are you An American? 
```

或者：

```
Are you A German? 
```

我有国家名称，但我需要为该国家名称找到正确的文章 A 或 An。

是否有任何 php 库/实用程序函数可以实现该语法规则，除了[此处](http://owl.english.purdue.edu/owl/resource/591/01/)所述的所有例外情况？我想到了 Zend_Locale，但没有找到足够的东西。

我也用谷歌搜索过，但是“A vs An PHP”的结果并没有真正的帮助。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-09T11:09:06.550

请参阅[此答案](https://stackoverflow.com/a/4558514/196838)以获取一些有用的解决方案。答案包含 Perl 模块的摘录[`Lingua::EN::Inflect`](http://search.cpan.org/dist/Lingua-EN-Inflect/lib/Lingua/EN/Inflect.pm#PROVIDING_INDEFINITE_ARTICLES)，似乎在确定使用哪个不定冠词方面做得很好：

```
A("cat")        # -> "a cat"
AN("cat")       # -> "a cat"
A("euphemism")      # -> "a euphemism"
A("Euler number")   # -> "an Euler number"
A("hour")       # -> "an hour"
A("houri")      # -> "a houri" 
```

规则被定义为正则表达式，因此移植到 PHP 应该不会太难。

**编辑：**我最终将其转换为 PHP（也可在[github](https://github.com/Kaivosukeltaja/php-indefinite-article)上找到）。

用法：`print IndefiniteArticle::A("umbrella"); // an umbrella`

```
<?php

class IndefiniteArticle
{

    public static function AN($input, $count=1) {
        return self::A($input, $count);
    }

    public static function A($input, $count=1) {
        $matches = array();
        $matchCount = preg_match("/\A(\s*)(?:an?\s+)?(.+?)(\s*)\Z/i", $input, $matches);
        list($all, $pre, $word, $post) = $matches;
        if(!$word)
            return $input;
        $result = self::_indef_article($word, $count);  
                return $pre.$result.$post;
    }

    # THIS PATTERN MATCHES STRINGS OF CAPITALS STARTING WITH A "VOWEL-SOUND"
    # CONSONANT FOLLOWED BY ANOTHER CONSONANT, AND WHICH ARE NOT LIKELY
    # TO BE REAL WORDS (OH, ALL RIGHT THEN, IT'S JUST MAGIC!)

    private static $A_abbrev = "(?! FJO | [HLMNS]Y.  | RY[EO] | SQU
          | ( F[LR]? | [HL] | MN? | N | RH? | S[CHKLMNPTVW]? | X(YL)?) [AEIOU])
            [FHLMNRSX][A-Z]
        ";

    # THIS PATTERN CODES THE BEGINNINGS OF ALL ENGLISH WORDS BEGINING WITH A
    # 'y' FOLLOWED BY A CONSONANT. ANY OTHER Y-CONSONANT PREFIX THEREFORE
    # IMPLIES AN ABBREVIATION.

    private static $A_y_cons = 'y(b[lor]|cl[ea]|fere|gg|p[ios]|rou|tt)';

    # EXCEPTIONS TO EXCEPTIONS

    private static $A_explicit_an = "euler|hour(?!i)|heir|honest|hono";

    private static $A_ordinal_an = "[aefhilmnorsx]-?th";

    private static $A_ordinal_a = "[bcdgjkpqtuvwyz]-?th";

    private static function _indef_article($word, $count) {
        if($count != 1) // TODO: Check against $PL_count_one instead
            return "$count $word";

            # HANDLE USER-DEFINED VARIANTS
        // TODO

        # HANDLE ORDINAL FORMS
        if(preg_match("/^(".self::$A_ordinal_a.")/i", $word))       return "a $word";
        if(preg_match("/^(".self::$A_ordinal_an.")/i", $word))      return "an $word";

        # HANDLE SPECIAL CASES

        if(preg_match("/^(".self::$A_explicit_an.")/i", $word))         return "an $word";
        if(preg_match("/^[aefhilmnorsx]$/i", $word))        return "an $word";
        if(preg_match("/^[bcdgjkpqtuvwyz]$/i", $word))      return "a $word";

            # HANDLE ABBREVIATIONS

        if(preg_match("/^(".self::$A_abbrev.")/x", $word))          return "an $word";
        if(preg_match("/^[aefhilmnorsx][.-]/i", $word))         return "an $word";
        if(preg_match("/^[a-z][.-]/i", $word))          return "a $word";

        # HANDLE CONSONANTS

        if(preg_match("/^[^aeiouy]/i", $word))                  return "a $word";

            # HANDLE SPECIAL VOWEL-FORMS

        if(preg_match("/^e[uw]/i", $word))                      return "a $word";
        if(preg_match("/^onc?e\b/i", $word))                    return "a $word";
        if(preg_match("/^uni([^nmd]|mo)/i", $word))     return "a $word";
        if(preg_match("/^ut[th]/i", $word))                     return "an $word";
        if(preg_match("/^u[bcfhjkqrst][aeiou]/i", $word))   return "a $word";

            # HANDLE SPECIAL CAPITALS

        if(preg_match("/^U[NK][AIEO]?/", $word))                return "a $word";

        # HANDLE VOWELS

        if(preg_match("/^[aeiou]/i", $word))            return "an $word";

        # HANDLE y... (BEFORE CERTAIN CONSONANTS IMPLIES (UNNATURALIZED) "i.." SOUND)

        if(preg_match("/^(".self::$A_y_cons.")/i", $word))      return "an $word";

        # OTHERWISE, GUESS "a"
        return "a $word";
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T10:47:13.273

自己动手很简单：

```
function an($str) {

    $vowels = "aeiou";

    if (strpos($vowels, strtolower(substr($str, 0, 1))) !== false) {

        return "An " . $str;

    }
    else {

        return "A " . $str;

    }

} 
```

本质上，如果它以元音开头，则使用“An”，否则使用“A”。

可能有一些边缘情况不是这样，但我想不出任何想法。如果你找到了一个，在你做一般测试之前明确地测试它：

```
function an($str) {

    if ($str == "foobarbaz") {

        return "An";

    }

    $vowels = "aeiou";

    if (strpos($vowels, strtolower(substr($str, 0, 1))) !== false) {

        return "An " . $str;

    }
    else {

        return "A " . $str;

    }

} 
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-10-09T10:45:36.963

试试这个：-

```
$vowel_arr=array('a','e','i','o','u');
$string="America";
$len=strtolower(substr($string,0,1));

if(in_array($len,$vowel_arr))
  $pre = "an";
else
  $pre = "a";

 echo  $pre." ".$string; 
```

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-10-09T10:49:19.587

我建议创建一个非常简单的函数。

此函数将国家名称作为参数并查看第一个字符。如果字符来自这个数组

```
$an_char_array = array('a', 'e', 'i', 'o'); 
```

那么你会`return "an {$country}";`否则`return "a {$country}";`。

您应该首先考虑任何异常并处理它们，然后执行一般部分。

函数可能如下所示：

```
function prependAricle($word) {
    // handle exceptions here, e.g.:
    $an_exceptions = array('umbrella'/*, ...*/);
    $a_exceptions = array('pity'/*, ...*/);
    if(in_array(strtolower($word), $an_exceptions))
        return "an {$word}";
    if(in_array(strtolower($word), $a_exceptions))
        return "a {$word}";

    // handle general rule
    $an_char_array = array('a', 'e', 'i', 'o', 'A', 'E', 'I', 'O');
    if(in_array(substr($word, 0, 1), $an_char_array))
        return "an {$word}";
    else
        return "a {$word}";
} 
```

# php - 如何立即从 php 表单中获取数据并将数据写入 flash 横幅使用的 xml 文件

> ID：12798165
> 
> 赞同：0
> 
> 时间：2012-10-09T10:35:30.827
> 
> 标签：php, xml, flash, banner

我有一个使用 xml 的 flash 横幅，我想要一个控制页面。例如，当我从控制页面更改横幅宽度时，横幅也会同时更改并且同一页面没有刷新。这样就可以预览 Flash 横幅。PHP、HTML 和横幅可用。但是我怎样才能立即从表单中获取数据

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T11:00:54.297

您需要使用 AJAX 重新编写代码，修改 swf 的所有与大小相关的属性。该脚本将监视表单和 onChange（而不是 onSubmit），读取值，删除以前的代码并编写新代码。我认为简单地更改前一个对象的值不会立即生效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T10:44:03.183

如果“立即”表示不刷新页面，则需要搜索**AJAX**。

这是您的起点：

[http://net.tutsplus.com/tutorials/javascript-ajax/submit-a-form-without-page-refresh-using-jquery/](http://net.tutsplus.com/tutorials/javascript-ajax/submit-a-form-without-page-refresh-using-jquery/)

或者，直接从闪存：

[Flash - AJAX 调用](https://stackoverflow.com/questions/1045986/flash-ajax-call)

# ruby - 在 ruby 的最后一个单词之前添加一个单词

> ID：12798169
> 
> 赞同：-1
> 
> 时间：2012-10-09T10:35:36.230
> 
> 标签：ruby

我需要在句子的最后一个单词之前添加一个单词。

例子 ：

```
 t1 = "Top Senior Players" OR t1 = "Top Athlete" OR t1 = "Youngest Athlete"
   t2 = "Hockey"  OR t2 = "Cricket" etc. 
```

我希望得到像这样的输出

```
 var game = "Top Senior <t2> Players" OR t1 = "Top  <t2> Athlete" OR t1 = "Youngest  <t2>  Athlete" 
```

它应该在最后一个单词之前的单词处。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-09T10:48:06.927

```
t1.split(" ").insert(-2,t2).join(" ") 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-09T10:45:25.090

```
a = 'first third'
a.split(' ').insert(-2, 'second').join(' ')
=> "first second third"

a = 'first'
a.split(' ').insert(-2, 'second').join(' ')
=> "second first" 
```

# c++ - EncryptFile 函数是如何工作的，为什么我仍然可以看到内容？

> ID：12798172
> 
> 赞同：1
> 
> 时间：2012-10-09T10:35:38.477
> 
> 标签：c++, winapi, encryption

我正在使用该[`EncryptFile`功能](http://msdn.microsoft.com/en-us/library/windows/desktop/aa364021%28v=vs.85%29.aspx)来加密文件和目录，但结果是相同的文件或文件夹具有绿色文本名称。

我错过了什么吗？加密数据在哪里？

```
BOOL res= EncryptFile( L"D:\\test");
qDebug()<<"res "<<res<<"  last error  "<<GetLastError(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T10:38:15.227

它使用 Windows*[加密文件系统](http://windows.microsoft.com/is-IS/windows-vista/What-is-Encrypting-File-System-EFS)*，该系统使用用户的登录详细信息作为加密密钥。

加密是透明的，当当前*Windows 主体*打开文件时，他/她的安全详细信息用于解密其内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T10:36:22.270

你错过了一些东西。绿色文本名称表示 Windows 已对其进行了加密。

# playframework - 在播放框架中填充 html 下拉列表

> ID：12798174
> 
> 赞同：2
> 
> 时间：2012-10-09T10:36:04.997
> 
> 标签：playframework, playframework-2.0

> **可能重复：**
> [在 Play Framework 2.0 模板中使用选项助手](https://stackoverflow.com/questions/10127156/use-of-option-helper-in-play-framework-2-0-templates)

普通的html代码：

```
 <select id = "game_duration">          
                        <option>01 hour</option>
                        <option>02 hour</option>
                        <option>03 hour</option>
                        <option>04 hour</option>
                        <option>05 hour</option>
                        <option>Never end</option>
                        </select> 
```

到 Play 框架的 @select...
我尝试按照[教程](http://www.playframework.org/documentation/1.1/tags#select)进行操作，但它只打印了 @select 标签的纯 html。
我是新手，因此有人可以帮助我吗？
非常感谢。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-10-09T10:53:27.320

`helper`在视图开头首先导入包：

```
@import helper._ 
```

因此，您可以使用该示例：

```
@select(
   gameForm("game_duration"),
   options(Seq("01 hour","02 hour","03 hour","Never end")),
   '_label -> "Game duration", '_default -> "-- Select duration --"
) 
```

或者，您也可以使用该代码而无需先前`helper`的导入包

```
@helper.select(
   gameForm("game_duration"),
   helper.options(Seq("01 hour","02 hour","03 hour","Never end")),
   '_label -> "Game duration", '_default -> "-- Select duration --"
) 
```

**重要：**`options(List("01 hour","02 hour","03 hour","Never end"))`如果`Seq(...)`版本在编译时会失败，请尝试使用。

顺便说一句，很可能使用数值会更好（即`int`- 更容易在数据库中存储和搜索）：

```
...
helper.options("60" -> "01 hour","120" -> "02 hour","180" -> "03 hour", "9999" -> "Never end"),
... 
```

另请查看[此答案](https://stackoverflow.com/a/10137190/1066240)以获取更多示例

# session - 记住我和 symfony2 中的会话

> ID：12798176
> 
> 赞同：-2
> 
> 时间：2012-10-09T10:36:07.823
> 
> 标签：session, symfony, remember-me

我在会话中存储了一些与登录用户相关的信息。如果用户使用记住我的 cookie 登录，则他没有从会话中获取数据。这是正常行为。我的问题是如何解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T11:29:17.047

将信息存储在数据库中。

# c - 声明一个内部结构包含对外部结构的引用

> ID：12798177
> 
> 赞同：0
> 
> 时间：2012-10-09T10:36:08.243
> 
> 标签：c

> **可能重复：**
> [C 中的循环定义](https://stackoverflow.com/questions/7502730/circular-definition-in-c)

```
typedef struct{
  node *next;
  node *last;
} doubleLink;

typedef struct{
 doubleLink doubleLink;
 int data;
} node; 
```

以上是用双链接定义对象的注定失败的尝试。将任何一个 typedef 放在另一个之前会导致“未知类型”的编译错误一个明显的办法是将 doubleLink 中的指针类型说明符更改为`void *` 但我想知道是否有更多“无害”的解决方案，比如说，也许我可以声明节点结构没有定义它？

我知道这一定是一个常见问题，但我不知道我可以通过什么关键字找到它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T10:38:19.100

添加前向声明`node`：

```
struct node;
typedef struct{
  struct node *next;
  struct node *last;
} doubleLink; 
```

当你使用指针时，你不需要在定义之前完全定义这个类型`doubleLink`。

# delphi - LIBRTMP Delphi：使用 dll

> ID：12798181
> 
> 赞同：1
> 
> 时间：2012-10-09T10:36:19.303
> 
> 标签：delphi, delphi-xe2, rtmp

我面前有从服务器加载和保存 rtmp 流到您的计算机的任务。浏览互联网，我得出的结论是有必要使用库**LIBRTMP**。我在 Delphi XE2 工作，我在[这个页面上找到了唯一合适的代码，在](https://stackoverflow.com/questions/7580891/librtmp-delphi-mapping-of-the-dll)[Pascal 页面](http://pastebin.com/29XeZMvk)上进行了销售。
我在将此代码翻译成可用于 delphi 的形式时遇到困难，因为我不认识 types 等`cint`。 我不会使用 C 或 C++，你能给我工作的方向吗，或者更容易解决这个问题？`pcchar`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T11:03:59.810

您可以使用以下代码在 Delphi 中映射这些类型：

```
Type
cint = longint;
cchar = shortint;
pcchar = ^cchar; 
```

并尝试重新编译您的代码。

# cross-browser - Dojo 的嵌套 BorderContainer 在 IE 中消失

> ID：12798183
> 
> 赞同：0
> 
> 时间：2012-10-09T10:36:24.570
> 
> 标签：cross-browser, dijit.layout

我对 IE 7/8/9 有这个可怕的问题。

`Dojo toolkit 1.8.0`我使用and编写了一个应用程序`Play! framework`。它在除 IE 之外的所有浏览器中都能正常工作。它的“开发人员工具”没有错误，firebug 也是如此。有问题的代码部分在这里：

```
<div data-dojo-type="dijit.layout.BorderContainer" data-dojo-props="design: 'headline'">
    <div data-dojo-type="dijit.layout.ContentPane" id="head" region="top">
    </div>
    <div data-dojo-type="dijit.layout.BorderContainer" data-dojo-props="region: 'center'">
        <div data-dojo-type="dijit.layout.ContentPane" id="menu" region="left">
        </div>
        <div data-dojo-type="dijit.layout.BorderContainer" data-dojo-props="region: 'center'">
            <div data-dojo-type="dijit.layout.ContentPane" id="content_1" region="top">
            </div>
            <div data-dojo-type="dijit.layout.ContentPane" id="content_2" region="bottom">
            </div>
        </div>
    </div>
    <div data-dojo-type="dijit.layout.ContentPane" id="foot" region="bottom">
    </div>
</div> 
```

结果，在除 IE 之外的所有浏览器中都是这样的： ![好办法](../Images/7d6f55ec9739f389e7b35f10b2985c2c.png)

但在 IE 中显示如下： ![不好的方式](../Images/8e41b22e85230151e69ad00b8b167c8e.png)

谁能解释为什么会有这样的差异？一开始我以为在 IE 中内容是隐藏的，所以我设置了`overflow: auto`，但是页面加载后没有出现滚动条。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T14:03:45.367

想到两个可能的原因：

1.  您没有内容容器的“中心”元素-afaik，dojo 规范需要一个带`region="center"`或不指定区域的 BorderContainerChild，默认为中心

2.  您的标记中是否有任何非布局元素作为 BorderContainer 的直接子元素？在这种情况下，IE for once 是更标准的要求和不明确的标记

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T09:35:00.820

问题在于我的自定义类添加到`.menu`元素：

```
.menu {
    margin-right: auto;
    margin-left: auto;
} 
```

这 2 种样式破坏了我的整个布局 -.- 当我删除它时，它开始正常显示。

# android - 如何在自定义通知中的按钮上实现 onclick()

> ID：12798185
> 
> 赞同：2
> 
> 时间：2012-10-09T10:36:24.260
> 
> 标签：android, notifications

我正在尝试借助带有按钮的远程视图创建自定义通知。我想为此按钮编写 onclick 侦听器，但问题是通知容器正在捕获触摸事件并且未单击按钮。我的问题是有什么方法可以禁用此通知并让按钮被点击。我的代码如下所示：

```
Notification notification = new Notification(R.drawable.applogo,
        "Apps activated", System.currentTimeMillis());

Intent notificationIntent = new Intent(getBaseContext(), AppsActivity.class);
PendingIntent pendingIntent = PendingIntent.getActivity(getBaseContext(),
0, notificationIntent , 0);
notification.contentIntent = pendingIntent;

//Remoteview and intent for my button
RemoteViews remoteView = new RemoteViews(getBaseContext().getPackageName(),
R.layout.customnotification);

Intent mIntent = getPackageManager().getLaunchIntentForPackage(c.getString(1));//starting some application through package
PendingIntent pintent = PendingIntent.getActivity(this, 0,
                    mIntent, 0);

remoteView.setOnClickPendingIntent(R.id.button1,
pintent);

notification.contentView = remoteView;

notificationManager.notify(CUSTOM_NOTIFICATION_ID, notification); 
```

我正在研究 api 7。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-08-05T09:37:04.027

不幸的是，通知布局中的可点击按钮仅适用于 API >= 11 的[自定义通知](http://developer.android.com/guide/topics/ui/notifiers/notifications.html#CustomNotification)。

此外，对于 API >= 16，您可以使用[通知操作](http://developer.android.com/guide/topics/ui/notifiers/notifications.html#Actions)在通知中提供按钮。

# user-interface - 你如何编写一个跨平台的 GUI 工具包？

> ID：12798193
> 
> 赞同：1
> 
> 时间：2012-10-09T10:36:35.183
> 
> 标签：user-interface, cross-platform

就像 qT、wxwidgets 等工具包一样，API 设计器如何提供和 API 相同的 API，即使它调用完全不同的系统调用来做到这一点？例如，在 Windows 操作系统中，您必须处理 GDI 中的一大堆函数。在 Linux 上，您必须处理 XLib 中的大量功能以及该发行版之上的任何其他层。那么如何设计一个可以统一所有这些功能的 widgit 工具包？所以说 CreateWindow() 会在任何平台上创建一个windon？我不明白如何做到这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T10:45:51.030

您可以使用更通用的东西，而不是使用 Xlib 或 GDI。例如，您可以使用到处都支持的 OpenGL。我认为这就是 Blender 的 UI 所做的。

一些工具包可以修改为对它们支持的每个平台使用某种后端。这基本上就是 Qt 所做的。在 Mac OS X 上，Qt 应用程序使用 Cocoa 作为后端。Qt for OS X 是专门为那个操作系统制作的。但是，其他平台上还有其他 Qt 实现，这就是 Qt 在多个平台上工作的原因。SWT for Java 的工作方式相同（使用操作系统的本机工具包作为后端）。

其他工具包可以使用某种高级层进行渲染。例如，Swing for Java 纯粹使用 Java API 呈现，根本不依赖于任何平台。

# php - 在网页中显示 Flash 电影的进度条

> ID：12798195
> 
> 赞同：0
> 
> 时间：2012-10-09T10:36:37.597
> 
> 标签：php, flash, progress-bar, preloader

我有一个大约 10M 的 Flash 电影要在网页中显示。我想在加载给用户查看页面时放置一个进度条。我无权访问源文件以在其中放置一些预加载器。

我该怎么做 ？可以用 php 来做吗？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T10:38:29.143

您可以通过创建另一个 Flash 电影来实现，该电影将在显示进度条的同时加载第一个。

# c# - 在 C# 中对单个文件使用 FileSystemWatcher

> ID：12798197
> 
> 赞同：53
> 
> 时间：2012-10-09T10:36:44.903
> 
> 标签：c#, .net, filesystemwatcher

当我尝试将观察程序路径设置为单个文件时，如下所示：

```
watcher.Path = filePath1; 
```

我得到错误：

```
The directory name C:\Cromos 3.0\repository\diagnostics\dwm01_2011_06_13__09_03.LXD is invalid. 
```

您只能将路径设置为文件夹目录吗？

* * *

## 回答 #1

> 赞同：114
> 
> 时间：2012-10-09T10:40:12.267

您的错误是使用完整文件名设置 Path 属性

```
watcher.Path = Path.GetDirectoryName(filePath1); 
watcher.Filter = Path.GetFileName(filePath1); 
```

应该管用。

与您的正确问题无关，但是，当然，如以下评论所述，必须将*EnableRaisingEvents*属性设置为 true 以启用 FileSystemWatcher 的功能

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-10-09T10:38:33.237

是的，但是您可以通过将过滤器属性设置为文件名来监视特定文件。

例如

```
watcher.Filter = "dwm01_2011_06_13__09_03.LXD"; 
```

# android - 三个 Listview 使用单个自定义 Array 适配器

> ID：12798199
> 
> 赞同：0
> 
> 时间：2012-10-09T10:36:49.233
> 
> 标签：android, android-layout, android-listview, android-arrayadapter

我有 3 个`listview`，一个模型和自定义数组适配器。`listview`我正在尝试为所有三个s重新使用相同的自定义数组适配器和模型，每个都`listview`包含不同的图像集，这些图像被加载到`getview`.

有人可以给我一种实现它的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T10:52:09.810

是的，您可以重复使用您的适配器。就像只看示例代码

```
customAdapter1 cusad1 = new customAdapter1 (YourActivity1.this,R.layout.row_list,yourlist1);
        list1.setAdapter(customAdapter1);

customAdapter2 cusad2 = new customAdapter2 (YourActivity2.this,R.layout.row_list,yourlist2);
        list2.setAdapter(customAdapter2);

customAdapter3 cusad3 = new customAdapter2 (YourActivity3.this,R.layout.row_list,yourlist3);
        list2.setAdapter(customAdapter3); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T10:49:16.863

那里没什么难的...

```
MyArrayAdater myAdapter1= new MyArrayAdater (...myData for list 1....);
MyArrayAdater myAdapter2= new MyArrayAdater (...myData for list 2....);
MyArrayAdater myAdapter3= new MyArrayAdater (...myData for list 3....); 
```

并将每个listView的adapter设置为你想要的Adapter。

# apache - 在 httpd 文件中设置超时参数

> ID：12798200
> 
> 赞同：0
> 
> 时间：2012-10-09T10:36:50.940
> 
> 标签：apache

我正在尝试更改 apache 2.4 中的超时参数。请有人帮我更改它，因为我的 httpd.conf 文件中缺少 TimeOut 一词，这非常令人惊讶。但我可以看到我的会话在 60 年代到期。

请告知我需要在 httpd 文件中更改哪些模块。

-维杰

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T10:57:52.603

在 php.ini 中设置这些：

```
session.gc_maxlifetime = 1500
session.cache_expire = 1700 
```

并确保不要在代码中的任何位置将会话生命周期设置为另一个值。有关更多详细信息，请查看：

[http://www.php.net/manual/en/session.configuration.php#ini.session.cookie-lifetime](http://www.php.net/manual/en/session.configuration.php#ini.session.cookie-lifetime)

# css - CSS3 Flexbox Webkit、列流和水平滚动

> ID：12798201
> 
> 赞同：2
> 
> 时间：2012-10-09T10:36:51.133
> 
> 标签：css, webkit, flexbox

我有以下列表：

```
<ul class="contacts">
    <li>abc</li>
    <li>def</li>
    <li>ghi</li>
    <li>jkl</li>
    <li>mno</li>
    <li>pqr</li>
    <li>stu</li>
    <li>vwx</li>
    <li>yz0</li>
    <li>123</li>
    <li>456</li>
    <li>789</li>
</ul> 
```

有款式

```
ul { display: -webkit-flex; width: 800px; height: 600px; overflow-x: scroll; -webkit-flex-direction: column; }
ul li { width: 400px; height: 200px; } 
```

假设父容器是 800px x 600px 的固定大小，我希望内容垂直流动，然后水平流动，这样最终的布局将是：

```
abc  jkl  stu  123
def  mno  vwx  456
ghi  pqr  yz0  789 
```

如何使用 (webkit) flexbox 实现这一点？一旦第三个列表项到达父容器的底部，我似乎无法让列表项流动。请注意，我想要水平滚动，因为列表中的项目数量是不确定的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T10:44:09.007

找到了答案 - 我需要使用 -webkit-flex-flow 属性。

```
ul { display: -webkit-flex; width: 800px; height: 600px; overflow-x: scroll; -webkit-flex-flow: column wrap; }
ul li { width: 400px; height: 200px; } 
```

# haskell - GHC 中派生的 Eq 实例的效率如何？

> ID：12798204
> 
> 赞同：8
> 
> 时间：2012-10-09T10:36:58.293
> 
> 标签：haskell, lazy-evaluation

当我比较数据类型的相同实例时，GHC（以及一般的 Haskell）派生实例中是否存在*短路？*`Eq`

```
-- will this fire?
let same = complex == complex 
```

我的计划是读入一个惰性数据结构（比如说一棵树），更改一些值，然后比较旧版本和新版本以创建一个差异，然后将其写回文件。

如果内置短路，那么一旦发现新结构引用旧值，比较步骤就会中断。同时，这不会首先从文件中读取超过必要的内容。

我知道我不应该担心 Haskell 中的引用，但这似乎是处理延迟文件更改的好方法。如果没有内置短路，有没有办法实现这个？欢迎对不同方案提出建议。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-09T12:57:18.490

StableNames 是专门为解决像您这样的问题而设计的。

请注意，StableNames 只能在`IO`monad 中创建。所以你有两个选择：要么在monad中*创建*你的对象，要么在你的实现中使用（在这种情况下或多或少很好）。`IO``unsafePerformIO``(==)`

但我应该强调，可以以一种完全安全的方式（没有`unsafe*`函数）来做到这一点：只有稳定名称的创建应该发生在`IO`; 之后，您可以以完全纯粹的方式比较它们。

例如

```
data SNWrapper a = SNW !a !(StableName a)

snwrap :: a -> IO (SNWrapper a)
snwrap a = SNW a <$> makeStableName a

instance Eq a => Eq (SNWrapper a) where
  (SNW a sna) (SNW b snb) = sna == snb || a == b 
```

请注意，如果稳定名称比较说“否”，您仍然需要执行全值比较以获得明确的答案。

根据我的经验，当你有很多共享并且由于某种原因不愿意使用其他方法来表示共享时，效果很好。

（说到其他方法，例如，您可以将`IO`monad替换为`State Integer`monad 并在该 monad 中生成唯一整数作为“稳定名称”的等价物。）

另一个技巧是，如果你有一个递归数据结构，让递归通过`SNWrapper`. 例如，而不是

```
data Tree a = Bin (Tree a) (Tree a) | Leaf a
type WrappedTree a = SNWrapper (Tree a) 
```

采用

```
data Tree a = Bin (WrappedTree a) (WrappedTree a) | Leaf a
type WrappedTree a = SNWrapper (Tree a) 
```

这样，即使短路不会在最顶层触发，它也可能会在中间的某个地方触发，并且仍然可以为您节省一些工作。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-09T10:57:16.317

`(==)`当 的两个参数是同一个对象时，没有短路。派生的`Eq`实例会做结构比较，在相等的情况下，当然需要遍历整个结构。您可以使用自己构建一个可能的快捷方式

```
GHC.Prim.reallyUnsafePtrEquality# :: a -> a -> GHC.Prim.Int# 
```

但实际上这只会很少触发：

```
Prelude GHC.Base> let x = "foo"
Prelude GHC.Base> I# (reallyUnsafePtrEquality# x x)
1
Prelude GHC.Base> I# (reallyUnsafePtrEquality# True True)
1
Prelude GHC.Base> I# (reallyUnsafePtrEquality# 3 3)
0
Prelude GHC.Base> I# (reallyUnsafePtrEquality# (3 :: Int) 3)
0 
```

而且，如果您从文件中读取结构，它肯定不会找到与内存中已经存在的对象相同的对象。

您可以使用重写规则来避免词法相同对象的比较

```
module Equal where

{-# RULES
"==/same"  forall x. x == x = True
  #-}

main :: IO ()
main = let x = [1 :: Int .. 10] in print (x == x) 
```

这导致

```
$ ghc -O -ddump-rule-firings Equal.hs 
[1 of 1] Compiling Equal            ( Equal.hs, Equal.o )
Rule fired: Class op enumFromTo
Rule fired: ==/same
Rule fired: Class op show 
```

规则触发（注意：它不是用 触发的`let x = "foo"`，而是用用户定义的类型触发的，它应该）。

# iphone - Core Animation (CABasicAnimation) 的不可预测行为

> ID：12798207
> 
> 赞同：2
> 
> 时间：2012-10-09T10:37:00.783
> 
> 标签：iphone, objective-c, ios, core-animation, core-graphics

我正在为 iOS 编写一条线动画，其中一条线在 CALayer 上绘制为 CGPath 中的一组点。线条从平面位置动画到具有不同 y 坐标但始终相同的 x 坐标有点像折线图动画的“模制”形状。

为了使点插值更容易，我在我的 CALayer 子类中添加了一个自定义 CGFloat 属性。我将此属性称为“动画师”（更好的名称可能是进度、插值器等）。我的想法是在此属性上添加一个简单的 CABasicAnimation，从 0.0f 到 1.0f，这样我就可以使用 Core Animation 的计时功能和插值支持，同时仍然能够轻松编写自定义动画。例如，如果一条线的点从 y = 100 变为 y = 130，那么当动画师在 0.0f 时，我在 100，当它的 1.0f 时，我在点 130，中间值给我我的中间点，我继续用这些新点重新画线以获得我的动画。

现在动画效果很好，我禁用了图层动作，添加了 needsDisplayForKey 等，但我的问题是核心动画不准确。animator 的最终值有时是 0.95 .96 等，而不是 1.0。这很好，因为浮点数存在准确性问题，但是当我的模型值更新（在将动画添加到图层之前设置为 1.0f）时，线条应该重新绘制，我应该得到准确的视觉效果。

这是另一个问题出现的地方。有时动画不会立即删除。大多数时候它会立即被删除，我没有任何问题，但有时它会持续几秒钟，有时甚至几分钟。为了测试我的动画没有被删除的理论，我在我的层中添加了一个简单的 BOOL 标志，当我们在表示层上时返回 YES 并且确实有时我看到我的最后一次 drawInContext 调用是在表示层上，动画器值为0.98967f 或其他东西，最后一次 drawInContext 调用动画器 1.0f 和表示层标志为 NO 发生得更晚。结果，除了明显可怕的用户体验之外，我的视觉跳跃并且不准确。

我已尽力解释我的问题，如果有人想查看代码，我很乐意提供我的测试项目。这里希望一些聪明的人看到这一点并可以帮助我。

编辑 1：已上传整个 Xcode 项目（包括我讨厌的编辑，以显示我尝试过的所有内容）[here](http://dl.dropbox.com/u/6379375/MutipleLinesMoldTest.zip)。

编辑 2：有类似问题的人在完成时手动删除动画[http://lucas.tiz.ma/blog/2012/04/18/core-animation-is-a-bit-garbage-collection-y/](http://lucas.tiz.ma/blog/2012/04/18/core-animation-is-a-bit-garbage-collection-y/)

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T07:45:24.220

tl;dr 在 animationDidStop:finished: 委托回调中显式调用 setNeedsDisplay。

根据 Lucas Tizma 的帖子（参见上面的编辑 2），我尝试手动删除动画。我选择了一种比他基于块的方法更简单的方法，方法是将图层设置为在它们上设置的动画的代表。这样，动画开始和停止回调直接到达相关层。好吧，在 animationDidStop:finished: 回调中明确删除动画并不能解决问题。例如，有时（请参阅下面的日志，尤其是时间戳）动画会停止并检查它是否已被删除，这表明它已被删除，但是使用实际模型值的准确绘制发生在很久以后。

```
// animationDidStop:finished: call back code

NSLog(@"layer animation stopped");

// check if any animations exist
NSLog(@"animation keys: %@", [self animationKeys]);

// remove animations and check
NSLog(@"removing animations");
[self removeAllAnimations];
NSLog(@"animation keys: %@", [self animationKeys]);

// log

2012-10-11 11:47:16.774 ASPathAnimationTest[3017:c07] on presentation layer 1
2012-10-11 11:47:16.774 ASPathAnimationTest[3017:c07] 335 animation draw update, animator is 0.982606
2012-10-11 11:47:16.775 ASPathAnimationTest[3017:c07] startPoint: {100, 90} - endPoint: {100, 100} - newPoint: {100, 99.8261}
<snip>
2012-10-11 11:47:16.791 ASPathAnimationTest[3017:c07] startPoint: {1000, 50} - endPoint: {1000, 100} - newPoint: {1000, 99.1303}
2012-10-11 11:47:16.792 ASPathAnimationTest[3017:c07] layer animation stopped
2012-10-11 11:47:16.792 ASPathAnimationTest[3017:c07] animation keys: (null)
2012-10-11 11:47:16.793 ASPathAnimationTest[3017:c07] removing animations
2012-10-11 11:47:16.793 ASPathAnimationTest[3017:c07] animation keys: (null)
2012-10-11 11:47:16.794 ASPathAnimationTest[3017:c07] layer animation stopped
2012-10-11 11:47:16.794 ASPathAnimationTest[3017:c07] animation keys: (null)
2012-10-11 11:47:16.794 ASPathAnimationTest[3017:c07] removing animations
2012-10-11 11:47:16.795 ASPathAnimationTest[3017:c07] animation keys: (null)
2012-10-11 11:47:16.795 ASPathAnimationTest[3017:c07] layer animation stopped
2012-10-11 11:47:16.819 ASPathAnimationTest[3017:c07] animation keys: (null)
2012-10-11 11:47:16.820 ASPathAnimationTest[3017:c07] removing animations
2012-10-11 11:47:16.820 ASPathAnimationTest[3017:c07] animation keys: (null)
2012-10-11 11:47:16.821 ASPathAnimationTest[3017:c07] layer animation stopped
2012-10-11 11:47:16.821 ASPathAnimationTest[3017:c07] animation keys: (null)
2012-10-11 11:47:16.821 ASPathAnimationTest[3017:c07] removing animations
2012-10-11 11:47:16.822 ASPathAnimationTest[3017:c07] animation keys: (null)
2012-10-11 11:47:16.822 ASPathAnimationTest[3017:c07] layer animation stopped
2012-10-11 11:47:16.822 ASPathAnimationTest[3017:c07] animation keys: (null)
2012-10-11 11:47:16.823 ASPathAnimationTest[3017:c07] removing animations
2012-10-11 11:47:16.823 ASPathAnimationTest[3017:c07] animation keys: (null)
2012-10-11 11:48:00.000 ASPathAnimationTest[3017:c07] on presentation layer 0
2012-10-11 11:48:00.000 ASPathAnimationTest[3017:c07] 336 animation draw update, animator is 1.000000
<snip, there are 5 lines so draw and point logs go here>
2012-10-11 11:48:00.021 ASPathAnimationTest[3017:c07] 340 animation draw update, animator is 1.000000
2012-10-11 11:48:00.023 ASPathAnimationTest[3017:c07] startPoint: {100, 90} - endPoint: {100, 100} - newPoint: {100, 100}
<snip>
2012-10-11 11:48:00.026 ASPathAnimationTest[3017:c07] startPoint: {1000, 50} - endPoint: {1000, 100} - newPoint: {1000, 100} 
```

在查看日志并注意到动画确实被删除的事实后，只是使用实际准确的模型值重新绘制有时直到几秒钟甚至几分钟后才会发生，我更改了 animationDidStop:finished: 委托回调以显式调用图层上的 setNeedsDisplay。答对了。

# php - 如何在magento的主页中创建弹出窗口（要求注册）

> ID：12798210
> 
> 赞同：2
> 
> 时间：2012-10-09T10:37:19.143
> 
> 标签：php, magento, magento-1.5, magento-1.6, magento-1.7

当每次新访问者访问该网站时，我想在我的网站主页上创建一个弹出窗口。我有弹出窗口。问题是每当我点击主页时它就会出现。我希望它只在主页中显示一次，而不是在访问该站点期间每次单击主页时。如果浏览器关闭或会话结束，弹出来就可以了。

任何建议高度赞赏。

访问者数据的“is_new_visitor”怎么样：

```
$visitorData = Mage::getSingleton('core/session')->getVisitorData(); 
```

在本地它没有产生任何值吗？还有什么建议！！！！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T10:45:25.903

最简单的方法是直接在弹出块中设置会话变量（如果你有块层的话）。它需要在块实际显示后设置（因此它将第一次显示） - 例如在块析构函数中：

```
public function __destruct() {
    Mage::getSingleton('core/session')->setOldVisitor(true);
} 
```

然后在显示弹出窗口之前添加案例：

```
if (!Mage::getSingleton('core/session')->getOldVisitor()) {
    //do your thing here
} 
```

# c# - C# Webbrowser 控件找出 200 和 204 HTTP 响应 URL

> ID：12798218
> 
> 赞同：1
> 
> 时间：2012-10-09T10:37:38.303
> 
> 标签：c#, webbrowser-control

在我导航到网页并单击按钮（此按钮是下载按钮）后，我需要帮助试图找出网络浏览器 http 响应的 url，如果您通过 fiddler 检查，我可以看到其他请求/响应（ 200 和 204）我想将这些 URL 转换为字符串。

我有一个与 httpwebrequests 一起使用的想法 我只是在需要时检查最后一个引荐来源网址，即使没有手动执行它，我也会得到最后一个 http 请求/响应，它服务器/浏览器方面的事情我无法控制它如果你明白我的意思是说。

你们知道我怎样才能在网络浏览器控件中完成这项工作吗？谢谢！

# cocoa-touch - UIView 动画是否依赖于设置属性的顺序？

> ID：12798222
> 
> 赞同：1
> 
> 时间：2012-10-09T10:38:04.010
> 
> 标签：cocoa-touch, uiview, uiviewanimation

我遇到了一些奇怪的`UIView`动画。动画从矩形缩放子视图以填充其父视图：

```
//update views
CGRect startRect = ...; //A rect in parentView co-ordinates space that childView appears from
UIView *parentView = ...;
UIView *childView = ...;
[parentView addSubview:childView];

//animation start state
childView.alpha = 0;
childView.center = (CGPointMake( CGRectGetMidX(startRect),  CGRectGetMidY(startRect)));
//TODO: set childViews transform and so that it is completely contained with in startRect
childView.transform = CGAffineTransformMakeScale(.25, .25); 

[UIView animateWithDuration:.25 animations:^{
    childView.transform = CGAffineTransformIdentity;        
    childView.alpha = 1;
    childView.frame = parentView.bounds;
}]; 
```

上面的代码按预期工作。但是，如果将动画块重新排序为以下内容，则动画会变得混乱（大规模缩放并且中心点不在屏幕上）：

```
[UIView animateWithDuration:.25 animations:^{
    childView.frame = parentView.bounds; //This line was after .alpha
    childView.transform = CGAffineTransformIdentity;        
    childView.alpha = 1;
}]; 
```

这里发生了什么？为什么属性设置的顺序对动画很重要？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T11:12:14.990

属性的顺序可能是相关的，因为当变换不是恒等变换时，框架是未定义的。

> **警告：**如果该`transform`属性不是恒等变换，则该属性的值未定义，因此应被忽略。

[来自`frame`(on `UIView`)](http://developer.apple.com/library/ios/#documentation/uikit/reference/uiview_class/uiview/uiview.html#//apple_ref/occ/instp/UIView/frame)的文档。

这对于获取框架值是正确的，但我相信对于设置框架也是如此。

我几乎可以肯定，您的动画块中的更改发生在视图层的*模型*上，然后它们在视图层的*呈现*上被动画化。

由于您正在形成一个转换为比例的状态，因此设置框架是未定义的。

在您的顶级示例中，转换在设置框架之前设置为标识，因此它按预期工作，但在第二个示例中，您在恢复转换之前设置了框架。

# safari - Safari 扩展事件：SafariBeforeSearchEvent

> ID：12798226
> 
> 赞同：1
> 
> 时间：2012-10-09T10:38:14.300
> 
> 标签：safari, safari-extension, safari6

我已经看到该`SafariBeforeSearchEvent`事件在智能搜索字段执行搜索之前触发。所以我开始尝试它，但它不起作用或我的代码错误。这是我的代码：

```
safari.application.addEventListener("SafariBeforeSearchEvent", handleBeforeSearch, false);

function handleBeforeSearch(event) {
    alert("Test");
} 
```

当我使用智能搜索字段搜索内容时，不会出现任何警报。这是为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T23:48:27.250

事件的名称是“beforeSearch”，而不是“SafariBeforeSearchEvent”（这是事件的类）。

此外，如果您要在应用程序级别监听此事件，您可能需要将捕获参数设置为“true”。

```
safari.application.addEventListener("beforeSearch", handleBeforeSearch, true); 
```

请参阅[此处的文档](http://developer.apple.com/library/safari/#documentation/Tools/Conceptual/SafariExtensionGuide/WorkingwithWindowsandTabs/WorkingwithWindowsandTabs.html#//apple_ref/doc/uid/TP40009977-CH17-SW5)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-03-04T06:36:23.753

看起来在 App-Extensions 中这个 API 不再可用。

# java - 字符串（字节数组）到字节数组

> ID：12798231
> 
> 赞同：1
> 
> 时间：2012-10-09T10:38:27.223
> 
> 标签：java, string, bytearray

我需要从字符串转换为相同的字节数组：

```
String data = request.getParameter("data");

byte[] dataByte = new byte[]{};

data = -60,-33,-10,-119,126,114,-61,-31,55,-102,-35,-72,114,77,115,72,79,-117,102,64,98,-20,-75,27,58,-59,86,-97,106,19,-112,-79,100,105,115,107,100,105,114,101,99,116,111,114,95,115,97,102,101,46,99,111,110,102,105,103,49,52,53,53,83,112,97,99,101,115,83,116,111,114,101,114,117,99,111,110,116,101,110,116,85,114,108,61,115,116,111,114,101,58,47,47,50,48,49,50,47,49,48,47,49,47,57,47,53,50,47,57,100,48,48,48,48,55,97,45,54,50,48,48,45,52,54,52,102,45,97,48,48,97,45,50,52,97,100,52,98,100,55,50,53,53,48,46,98,105,110,124,109,105,109,101,116,121,112,101,61,97,112,112,108,105,99,97,116,105,111,110,47,111,99,116,101,116,45,115,116,114,101,97,109,124,115,105,122,101,61,52,53,57,53,49,124,101,110,99,111,100,105,110,103,61,85,84,70,45,56,124,108,111,99,97,108,101,61,114,117,95,124,105,100,61,52,49,48,56,101,57,100,100,50,100,56,45,56,102,54,97,45,52,54,55,54,45,56,53,99,57,45,50,52,54,102,55,57,57,55,101,102,48,99,77,111,110,32,79,99,116,32,48,49,32,48,57,58,53,50,58,49,53,32,78,79,86,83,84,32,50,48,49,50,119,111,114,107,115,112,97,99,101,97,100,109,105,110,97,100,109,105,110 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T10:40:29.990

```
String[] dataArray = data.split(",") 
```

然后，您可以对其进行迭代，`dataArray`然后从中创建`byte[]`。

```
 String dataArray[] = data.split(",");
    byte[] bytes = new byte[dataArray.length];
    int count = 0;
    for(String str : dataArray)
    {
        bytes[count++] = Byte.parseByte(str);
    } 
```

如果您知道字符编码，那么您可以使用[#String.getBytes](http://docs.oracle.com/javase/6/docs/api/java/lang/String.html#getBytes%28java.nio.charset.Charset%29)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T10:41:19.507

[String.getBytes(String charsetName)](http://docs.oracle.com/javase/6/docs/api/java/lang/String.html#getBytes%28java.lang.String%29)会给你一个字节数组。你将不得不小心重新。指定您的字符编码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-09T10:41:31.067

使用 StringTokenizer 或 String.split() 方法并将每个子字符串解析为字节。注意编码。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-09T10:43:53.283

使用`String.split()`并遍历结果数组：

```
String[] array = data.split(",");
byte[] dataByte = new byte[ array.length ];
for ( int i=0 ; i<array.length ; i++ ) { dataByte[ i ] = Byte.parseByte( array[ i ] ); } 
```

干杯，

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-09T10:44:34.607

您可以为此目的使用[String#getBytes()方法：-](http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#getBytes%28%29)

```
String data = request.getParameter("data");
byte[] dataByte = data.getBytes() 
```

它使用`default character encoding`..你可以指定你自己的..

请参见[String#getBytes(Charset)](http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#getBytes%28java.nio.charset.Charset%29)

或者您可以在拆分字符串数组的每个值后使用[Byte#parseByte(String)](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/Byte.html#parseByte%28java.lang.String%29)方法：-

```
 String data = request.getParameter("data");
    String arr[] = data.split(",");
    byte[] newarr = new byte[arr.length];

    int count = 0;
    for (String val: arr) {
        newarr[count++] = Byte.parseByte(val);
        System.out.println(Byte.parseByte(val) + ", ");
    } 
```

# mongodb - mongoDB mongoimport错误..获取文件不存在错误

> ID：12798244
> 
> 赞同：0
> 
> 时间：2012-10-09T10:39:02.230
> 
> 标签：mongodb, mongoimport

我是MongoDB的新手。当我尝试 mongoimport 时，出现以下错误。

我将文件放在 c:\mongo\data\db\mongo.csv ... 任何人都可以帮助我。

```
C:\mongodb\bin>mongoimport.exe -d test -c foo --file c:\mongo\data\db\mongo.csv --type csv

connected to: 127.0.0.1
file doesn't exist: c:\mongo\data\db\mongo.csv 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-08-14T06:13:31.327

要么你应该像在**C**指令中一样给出路径

```
C:\mongodb\bin>mongoimport.exe -d test -c foo --file /mongo/data/db/mongo.csv --type csv 
```

或者您可以在 Gianpj 提到的 qoute ( **" "** ) 中给出路径

```
C:\mongodb\bin>mongoimport.exe -d test -c foo --file "c:\mongo\data\db\mongo.csv" --type csv 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T10:50:18.443

您确定该文件确实存在吗？文件路径中没有空格？尝试使用双引号：

```
--file "c:\mongo\data\db\mongo.csv" 
```

最后从哪里得到那个 .csv 文件？从`mongoexport --csv`?

# javascript - 从 ajax 字符串创建 javascript 数组。

> ID：12798245
> 
> 赞同：0
> 
> 时间：2012-10-09T10:39:02.130
> 
> 标签：javascript, servlets

```
var  data = [
        {lastName: "Dente", name: "Al"},
        {lastName: "Noring", name: "Constance"},
        {lastName: "Haas", name: "Jack"},
        {lastName: "Tress", name: "Matt"},
        {lastName: "Turner", name: "Paige"}
    ]; 
```

这是我要创建的 javascript 数组。如何从 servlet 发送此数据并在 javascript 中创建数组对象。

```
String dataString=/*prepare data */
response.getWriter().write(dataString); 
```

如何在 servlet 中准备此 dataString 以及如何在客户端中从该字符串创建数组？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T10:53:20.490

如果您有以下 Java 类：

```
public class Person {
    private String lastName;
    private String name;

    public Person(String lastName, String name) {
        this.lastName = lastName;
        this.name = name;
    }

    /* getters and setters */
} 
```

[然后，您可以使用Gson](http://code.google.com/p/google-gson/)通过以下方式轻松生成数据：

```
List<Person> people = new ArrayList<Person>();

people.add(new Person("Smith", "John"));
people.add(new Person("Example", "An"));

String json = gson.toJson(people); 
```

然后该`json`变量的值为`[{"lastName": "Smith", "name": "John"},{"lastName": "Example", "name": "An"}]`。

然后只需将其作为 servlet 的响应发送，记住将请求的内容类型设置为`application/json`.

为了处理 JavaScript 中的数据，我建议使用 jQuery 的[.getJSON()](http://api.jquery.com/jQuery.getJSON/)方法，例如

```
$.getJSON('url of servlet', function (data) {
    console.log(data); // <-- data will be an Array containing two objects
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T11:45:43.040

用于`net.sf.json.JSONObject`在服务器端实现此目的

服务器端：

```
public class Data {
    String lastName;
    String name;
//......constructors,getters,setters
}

ArrayList<Data> serverData = new ArrayList<Data>();
serverData.add(new Data("Fred", "Flintstones"));
serverData.add(new Data("Wilma", "Flintstones"));
String jsonStr = JSONObject.fromObject(serverData);
response.getWriter().write(jsonStr); 
```

`JSON.parse`在客户端使用

客户端：

```
function ajaxCallback(data) {
    var jObj = JSON.parse(data);
    for(var i in jsonObject)
    {alert(jObj[i].name+" "+jObj[i].lastName);}
} 
```

希望这可以帮助！

# backbone.js - 如何使用自定义 idAttribute 更新模型

> ID：12798252
> 
> 赞同：0
> 
> 时间：2012-10-09T10:39:15.340
> 
> 标签：backbone.js, requirejs

在我简单的主干应用程序中，我试图更新一个模型，并且每次它发送一个放置请求而不是发布。

好吧，这是我的模型，名为**categoryModel**

```
define(['Backbone'], function (Backbone) {
var CategoryModel = Backbone.Model.extend({
    defaults: {
        ID: '',
        Name: 'Empty',
        TagID: '0',
        GID: '0'
    },
    idAttribute: "ID",
    initialize: function () {
        if (!this.get('Name')) {
            this.set({ 'Name': this.defaults.Name });
        }
    }
});

return CategoryModel;
}); 
```

这是收藏

```
define(['Backbone','../../models/categories/categoryModel'], function (Backbone, categoryModel) {
var CategoryCollection = Backbone.Collection.extend({
    url: '/parentcategory/Actions',
    model: categoryModel
   });

return new CategoryCollection;
}); 
```

这是我在视图中的方法

在一个`keychange event`

```
createNewItem: function (e) {
    var $this = $(e.currentTarget);
    $('#selectedCategoryName').html($this.val());
    //it creates a new model
    globals.NewCategory = new CategoryModel({ Name: $this.val() });
} 
```

在`handleDrop event`

```
handleDropEvent: function (event, ui) {
var draggable = ui.draggable;
//check if name has set
if (!globals.NewCategory) {
    alert("Please write a category name");
    $('#createNewCategory').focus();
    return;
}
//get itemID
var itemID = draggable.attr("id").split('_')[1];
var itemDesc = draggable.attr("id").split('_')[0];
//check items category
if (itemDesc == "Tag") {
    //check if tagID already exists
    if (globals.NewCategory.TagID) {
        alert("you have already specify a tag from this category");
        return;
    }
    globals.NewCategory.set("TagID", itemID);
} else if (itemDesc == "gTag") {
    if (globals.NewCategory.GID) {
        alert("you have already specify a tag from this category");
        return;
    }
    globals.NewCategory.set("GID", itemID);
}
categoriesCollection.create(globals.NewCategory, {
    silent: true,
    wait: true,
    success: function (model, response) {
        model.set("ID", response);
        alert(model.id);
    }
});
} 
```

**categoriesCollection.create**被调用两次。首先用于设置 TagID（在成功请求时它会获得一个 ID），其次用于设置 GID。由于 ID 已设置，不应该在第二次调用时发送 POST 请求而不是 PUT 吗？

我究竟做错了什么？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T12:18:47.480

标准行为是，`POST`如果模型是新的（没有属性 ID）则发送 a `PUT`，如果模型 ID 已设置，则发送 a。

在您的情况下，它按设计工作，如果您希望它用于`POST`发送 UPDATES，则必须覆盖[Backbone.sync](http://backbonejs.org/#Sync)才能根据需要工作，但我认为使后端 RESTful 并创建`PUT`用于更新的侦听器控制器方法更容易.

另一件事，如果我做对了，您正在使用`create()`更新集合中的模型，我建议您不要这样做，而是`save()`直接在要更新的模型中使用，代码将更具可读性。

干杯。

# sql-server - SQL Server 中的字符串连接问题

> ID：12798253
> 
> 赞同：2
> 
> 时间：2012-10-09T10:39:22.237
> 
> 标签：sql-server

```
ALTER PROCEDURE [dbo].[InsertSMS]
-- Add the parameters for the stored procedure here
@SmsMsgDesc Nvarchar(Max)

AS
BEGIN

SET NOCOUNT ON;

INSERT INTO [Tbl_Log]([LogDescription])VALUES (@SmsMsgDesc)
declare @LogID int;
SET @LogID = CAST(SCOPE_IDENTITY() AS INT)

INSERT INTO [Tbl_SMS]
       ([SmsMsgDesc])
 VALUES
       **(@SmsMsgDesc+CAST(@LogID AS NVarchar(12)))**

END 
```

这里的问题是有时连接不连接最后一个字符串我不知道为什么

即使我这样做

```
INSERT INTO [Tbl_SMS]
       ([SmsMsgDesc])
 VALUES
       **(@SmsMsgDesc+'Test')** 
```

恒定的“测试”有时不会出现在字符串的末尾，这让我发疯，请帮助！

我正在使用以下 C# 函数调用此过程：-

```
public int InsertSMSDB(string Message)
    {
        try
        {
            //int LogID;
            SqlConnection Conn=new SqlConnection(SmsDBConnection);
            SqlCommand Comm = new SqlCommand("InsertSMS", Conn);
            Comm.CommandType = System.Data.CommandType.StoredProcedure;

            Comm.Parameters.AddWithValue("@SmsMsgDesc", Message);

            Conn.Open();
            int RowEffected=Comm.ExecuteNonQuery();
            Conn.Close();

            if (RowEffected > 0)
            {
                return RowEffected;
            }
            else
            {
                return -1;
            }

        }
        catch (SqlException ex)
        {
            return -1;
        }
    } 
```

最后一些信息可能有助于在应用程序中调查这种情况有 2 个线程访问 Tbl_SMS 一个线程用于插入和 1 个线程用于选择

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T10:42:03.433

如果传递给过程@SmsMsgDesc 的值为空，则它不会连接

试试这个来避免空值

```
VALUES
       (isnull(@SmsMsgDesc,'')+CAST(@LogID AS NVarchar(12))) 
```

或者

您可以更改程序标题

```
ALTER PROCEDURE [dbo].[InsertSMS]
@SmsMsgDesc Nvarchar(Max)='' 
```

# javascript - 在注入 dom 之前有条件地隐藏/删除模板化数据？

> ID：12798255
> 
> 赞同：0
> 
> 时间：2012-10-09T10:39:30.347
> 
> 标签：javascript

基本上目前我有 2 个按钮，它们都使用相同的模板来获取 JSON 数据，然后在同一个 div 中显示模板化的内容，清除 HTML 并根据需要插入。我的问题是 1 个按钮需要我提供位置编号`<span class="positionNumber">'+i+'</span>`，而另一个则不需要，有没有办法可以根据使用条件或类似条件选择的按钮从模板中添加或删除它？

**JS**

```
var template = '<a href="http://www.youtube.com/embed/'+data.feed[i].code+'" class="videoEntry videoBg'+i+'" target="_blank"><img src="http://img.youtube.com/vi/'+data.feed[i].code+'/0.jpg" alt="'+data.feed[i].title+'" class="videoThumb" /><span class="positionNumber">'+i+'</span><h2>'+data.feed[i].title+'</h2></a>'; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T10:52:50.840

也许这有点过头了，但你试过 jquery tmpl 插件吗？

[http://api.jquery.com/jquery.tmpl/](http://api.jquery.com/jquery.tmpl/)

您可以按照以下方式在模板中指定 if 语句

```
{{if ${i}}} <span class="positionNumber">'+i+'</span> {{/if}} 
```

如果我没有设置，那么跨度标签将不会出现。

编辑：或者检查 i 并在需要时相应地附加模板字符串。

```
var template = '<a href="http://www.youtube.com/embed/'+data.feed[i].code+'" class="videoEntry videoBg'+i+'" target="_blank"><img src="http://img.youtube.com/vi/'+data.feed[i].code+'/0.jpg" alt="'+data.feed[i].title+'" class="videoThumb" />';
        if (typeof i != 'undefined'){
            template += '<span class="positionNumber">'+i+'</span>';
        }
        template += <h2>'+data.feed[i].title+'</h2></a>'; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T11:56:09.207

与其他答案相同的建议（编辑模板），但也许更简洁的方法是使用三元运算符：

```
var template = '<a href="http://www.youtube.com/embed/'+data.feed[i].code+'" class="videoEntry videoBg'+i+'" target="_blank"><img src="http://img.youtube.com/vi/'+data.feed[i].code+'/0.jpg" alt="'+data.feed[i].title+'" class="videoThumb" />' + (typeof i == undefined ? '<span class="positionNumber">'+i+'</span>' : '') + '<h2>'+data.feed[i].title+'</h2></a>'; 
```

# php - 表单验证错误-调用 php codeigniter 中未定义的方法 CI_Form_validation::set_fields()

> ID：12798257
> 
> 赞同：0
> 
> 时间：2012-10-09T10:39:43.903
> 
> 标签：php, mysql, codeigniter

当我尝试在 php-codeigniter 中更新查询时，我收到了这个 form_validation 错误。这是我的控制器，这给了我错误，我无法更新或在我的数据库中添加条目

```
 <?php

class Person extends CI_Controller {

// num of records per page
private $limit = 15;
function Person() {
parent::__construct();

//$this->load->library('table','form_validation');
$this->load->library('table');
$this->load->library('form_validation');
$this->form_validation->set_rules();
$this->load->helper('url');

$this->load->model('personModel', '', TRUE);
}

function index($offset = 0) {

$uri_segment = 3;
$offset = $this->uri->segment($uri_segment);

// load data
$persons = $this->personModel->get_paged_list($this->limit, $offset)->result();
// have pagntn
$this->load->library('pagination');
$config['base_url'] = site_url('person/index/');
$config['total_rows'] = $this->personModel->count_all();
$config['per_page'] = $this->limit;
$config['uri_segment'] = $uri_segment;
$this->pagination->initialize($config);
$data['pagination'] = $this->pagination->create_links();

// generate table data
$this->load->library('table');
$this->table->set_empty("&nbsp;");
$this->table->set_heading('No', 'Name', 'Gender', 'Education', 
'Date of Birth (dd-mm-   yyyy)', 'Interest', 'Actions');
$i = 0 + $offset;
foreach ($persons as $person) {
$this->table->add_row(++$i, $person->name, strtoupper($person->gender) == 
'M' ? 'Male'  : 'Female', ($person->education),
date('d-m-Y',     strtotime($person->dob)), ($person->interest), 
anchor('person/view/' . $person->id, 'view', array('class' => 'view',
'onclick' =>   "return confirm('View Full Details?')")) . ' ' .
anchor('person/update/' . $person->id, 'update', array('class' => 'update')) . ' ' .
anchor('person/delete/' . $person->id, 'delete', array('class' => 
'delete', 'onclick' => "return confirm('Are you sure want to delete this person?')"))
);
}
$data['table'] = $this->table->generate();
$this->load->library('table');
$this->load->library('form_validation');

// load view
$this->load->view('personList', $data);
}

function add() {

// set validation propert/ies
$this->set_fields();
// set common properties
$data['title'] = 'Add new person';
$data['message'] = '';
$data['action'] = site_url('person/addPerson');
$data['link_back'] = anchor('person/index/', 'Back to list of persons',
array('class' => 'back'));

// load view
$this->load->view('personEdit', $data);
}

function addPerson() {
// set common properties
$data['title'] = 'Add new person';
$data['action'] = site_url('person/addPerson');
$data['link_back'] = anchor('person/index/', 'Back to list of persons', 
array('class' => 'back'));

// set validation properties
$this->set_fields();
$this->set_rules();

// run validation
if ($this->form_validation->run() == FALSE) {
$data['message'] = '';
} else {
// save data
$person = array('name' => $this->input->post('name'),
'gender' => $this->input->post('gender'),
'dob' => date('Y-m-d', strtotime($this->input->post('dob'))));
$id = $this->personModel->save($person);
// set form input name="id"
$this->form_validation->id = $id;

// set user message
$data['message'] = '<div class="success">add new person success</div>';
}

// load view
$this->load->view('personEdit', $data);
}

function view($id) {
// set common properties
$data['title'] = 'Person Details';
$data['link_back'] = anchor('person/index/', 'Back to list of persons', 
array('class' => 'back'));

// get person details
$data['person'] = $this->personModel->get_by_id($id)->row();

// load view
$this->load->view('personView', $data);
}

function update($id) {
// set validation properties
$this->set_fields();

// prefill form values
$person = $this->personModel->get_by_id($id)->row();
$this->form_validation->id = $id;
$this->form_validation->name = $person->name;
$_POST['gender'] = strtoupper($person->gender);
$this->form_validation->dob = date('d-m-Y', strtotime($person->dob));

// set common properties
$data['title'] = 'Update person';
$data['message'] = '';
$data['action'] = site_url('person/updatePerson');
$data['link_back'] = anchor('person/index/', 'Back to list of persons', 
array('class' => 'back'));

// load view
$this->load->view('personEdit', $data);
}

function updatePerson() {
// set common properties
$data['title'] = 'Update person';
$data['action'] = site_url('person/updatePerson');
$data['link_back'] = anchor('person/index/', 'Back to list of persons', 
array('class' => 'back'));

// set validation properties
$this->set_fields();
$this->set_rules();

// run validation
if ($this->form_validation->run() == FALSE) {
$data['message'] = '';
} else {
// save data
$id = $this->input->post('id');
$person = array('name' => $this->input->post('name'),
'gender' => $this->input->post('gender'),
'dob' => date('Y-m-d', strtotime($this->input->post('dob'))),
'education'=>$this->input->post('education'),
'interest'=>$this->input->post('interest'));
$this->personModel->update($id, $person);
// set user message
$data['message'] = '<div class="success">update person success</div>';
}

// load view
$this->load->view('personEdit', $data);
}

function delete($id) {
// delete person
$this->personModel->delete($id);

// redirect to person list page
redirect('person/index/', 'refresh');
}

// validation fields
function set_fields() {

$fields['id'] = 'id';
$fields['name'] = 'name';
$fields['gender'] = 'gender';
$fields['dob'] = 'dob';
$fields['education']='educaiton';
$fields['interest']='

$this->form_validation->set_fields('$fields');
//echo"hellofff";
//exit;
}

// validation rules
function set_rules() {
$rules['name'] = 'trim|required';
$rules['gender'] = 'trim|required';
$rules['dob'] = 'trim|required|callback_valid_date';
$rules['education']='trim|required';
$rules['interest']='trim|required';
$this->form_validation->set_rules($rules);
$this->form_validation->set_message('required', '* required');
$this->form_validation->set_message('isset', '* required');
$this->form_validation->set_error_delimiters('<p class="error">', '</p>');
}

function form_validation() {
$this->add();
}

// date_validation callback
function valid_date($str) {
if (!ereg("^(0[1-9]|1[0-9]|2[0-9]|3[01])-(0[1-9]|1[012])-([0-9]{4})$", $str)) {
$this->form_validation->set_message('valid_date', 'date format is not 
valid. dd-mm-yyyy');
return false;
} else {
return true;
}
}

}

?>

 This is my model:
 PersonMOdel: Database name is employeeregistration and tableused is tbl_person
<?php
class PersonModel extends CI_Model {
// table name
private $tbl_person= 'tbl_person';

function Person(){
parent::construct();
}
// get number of persons in database
function count_all(){

return $this->db->count_all($this->tbl_person);
}
// get persons with paging
function get_paged_list($limit = 15, $offset = 0){

$this->db->order_by('id','asc');
return $this->db->get($this->tbl_person, $limit, $offset);
}
// get person by id
function get_by_id($id){
$this->db->where('id', $id);
return $this->db->get($this->tbl_person);
}
// add new person
function save($person){
$this->db->insert($this->tbl_person, $person);
return $this->db->insert_id();
}
// update person by id
function update($id, $person){
$this->db->where('id', $id);
$this->db->update($this->tbl_person, $person);
}
// delete person by id
function delete($id){
$this->db->where('id', $id);
$this->db->delete($this->tbl_person);
}
}
?> 
```

这可以看作是一个 CRUD 应用程序。

# asp.net - 从 Web 应用程序在本地打印机上打印，但有限制

> ID：12798260
> 
> 赞同：0
> 
> 时间：2012-10-09T10:39:54.680
> 
> 标签：asp.net, printing

我需要开发应用程序，从一些数据库中获取数据，编写文档，然后在本地（标签）打印机上打印。

如果主应用程序可以基于 Web（ASP.NET），那就太好了。但是我需要控制打印过程以不允许用户再次打印相同的文档。

你能给我一些解决方案吗？也可以创建桌面应用程序，但我们更喜欢 Web 应用程序。

我的一个想法是像 netmeeting 那样实现一些自定义协议（callto://），但我不知道这是否是个好主意以及它会有多困难。

谢谢你的建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-06T13:43:37.173

当我通过自定义协议 (callto://) 编写时，我已经意识到这一点，我可以推荐它。协议打开简单的桌面应用程序（可以在 Windows 注册表中设置），配置为将获取的数据打印到本地打印机。

在协议链接中，具有 base64 编码的 web 服务 url 以请求数据和会话 id，并带有用于生成打印数据的自定义打印请求。

工作正常。

# android - Google Fusion Tables - 从 android 访问数据和插入数据

> ID：12798262
> 
> 赞同：2
> 
> 时间：2012-10-09T10:40:02.360
> 
> 标签：android, google-fusion-tables

我正在尝试从我的 android 应用程序访问我的 google 融合表之一。我有一些疑问想澄清（也有一些问题）：

1.  我尝试在浏览器中使用此直接 URL查询其中一个[公共表（用于测试）：](https://www.google.com/fusiontables/DataSource?docid=1W-rjFNnEYYsfJiN2vR8m09XwGQqMQkBHbmRwpQ) [https://www.google.com/fusiontables/api/query?sql=SELECT%20*%20FROM%201W-rjFNnEYYsfJiN2vR8m09XwGQqMQkBHbmRwpQ](https://www.google.com/fusiontables/api/query?sql=SELECT%20%2a%20FROM%201W-rjFNnEYYsfJiN2vR8m09XwGQqMQkBHbmRwpQ)和没有遇到任何问题。现在我想选择所有有字符的州`u`。（更改）**第一项工作是首先选择州名。我试过这个：`https://www.google.com/fusiontables/api/query?sql=SELECT%20State/UT%20Code,India/State/Union%20Territory%20#%20FROM%201W-rjFNnEYYsfJiN2vR8m09XwGQqMQkBHbmRwpQ`** - 我被困在这一点上。可以请一些人帮忙。这是一个公开数据，可以在[这里](https://www.google.com/fusiontables/DataSource?docid=1W-rjFNnEYYsfJiN2vR8m09XwGQqMQkBHbmRwpQ)查看。为此，我已经查看了查询融合表的[开发人员文档和查询融合表](https://developers.google.com/chart/interactive/docs/fusiontables)的[开发人员指南](https://developers.google.com/fusiontables/docs/developers_guide#Querying)

2.  我不知道如何在我的 android 端访问这些数据并在其中插入值。我必须向我的桌子授予公开许可吗？我查看[了 fusion tables 的开发人员文档](https://developers.google.com/fusiontables/docs/tools)。我是否必须为它制作一个 REST 客户端并这样做？

3.  此外，从我的应用程序插入数据是个问题。在这方面我还没有尝试过任何东西，但是已经搜索了很多并且没有发现任何有用的东西。这方面的任何链接都可以。

4.  请求数量增加限制后会发生什么？另外，如果我使用 API 密钥创建应用程序，应用程序的每个用户的点击次数或应用程序的点击总数是否计算在内？另外，如果想增加限额，费用是多少？

高度赞赏这方面的任何链接或**代码**。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T20:37:59.777

如果您想要一种简单的方法来测试 API，我建议您使用[Google API Explorer for Fusion Tables](https://developers.google.com/apis-explorer/#p/fusiontables/v1/fusiontables.query.sql)。

1.  如果列名中有空格，则必须使用引号。
    ->[在 API explorer 中查看这个例子](https://developers.google.com/apis-explorer/#p/fusiontables/v1/fusiontables.query.sql?sql=SELECT%20%27State%252FUT%20Code%27%252C%20%27India%252FState%252FUnion%20Territory%20%2523%27%20FROM%201W-rjFNnEYYsfJiN2vR8m09XwGQqMQkBHbmRwpQ&_h=4&)。

    ```
    SELECT 'State/UT Code', 'India/State/Union Territory #' FROM 1W-rjFNnEYYsfJiN2vR8m09XwGQqMQkBHbmRwpQ 
    ```

2.  使用 Google API 的现有[Java 客户端](http://code.google.com/p/google-api-java-client/)可能是最简单的（还有[其他可用的库](https://developers.google.com/fusiontables/docs/v1/libraries)）。查看他们[的 Fusion Tables Java 示例，](http://samples.google-api-java-client.googlecode.com/hg/fusiontables-cmdline-sample/instructions.html)了解如何使用它。

3.  您必须使用 OAuth 对自己进行身份验证（请参阅[“已安装应用程序”的 OAUth 指南](https://developers.google.com/accounts/docs/OAuth2InstalledApp)）。上面提到的[Java 库也有 OAuth 支持](https://code.google.com/p/google-api-java-client/wiki/OAuth2)。

4.  我已经[在另一个问题上回答了这个问题](https://stackoverflow.com/a/11954718/549755)。

# java - 使用 Java Servlet 处理文件的 Range 内容请求

> ID：12798265
> 
> 赞同：9
> 
> 时间：2012-10-09T10:40:21.003
> 
> 标签：java, file, servlets, range

我有一个 Java Servlet，它从文件系统加载 File 对象并将它们提供给客户端 javascript Web 播放器。这些文件是视频/mp4 类型。当 Web 客户端 javascript 播放器请求与开头不同的视频部分时，它会向 Web 服务器发送一个带有标头 Range 的部分内容请求。例如

```
 Range: bytes = 500-900/1000 
```

如何正确选择与该范围相对应的 File 对象部分以及应在响应中放入哪些标头以使其有效使用？

# php - php中的语句

> ID：12798271
> 
> 赞同：0
> 
> 时间：2012-10-09T10:40:34.307
> 
> 标签：php, if-statement

```
if($getstatus->num_rows != 0 && $getstatusarr = $getstatus->fetch_assoc() && $getstatusarr["Type"] != $data["type"])
    echo "error"
else
    ... 
```

*第一个代码不起作用，要以这种方式工作，请参阅[Nin 的](https://stackoverflow.com/a/12798982/1532730)帖子*

是否可以轻松制作代码？

我也可以这样做：

```
if($getstatus->num_rows != 0)
    $getstatusarr = $getstatus->fetch_assoc();
    if($getstatusarr["Type"] != $data["type"]) {
        echo "error"
        $error = true;
    }
if(!$error) {
    ...
} 
```

通过省略号我有太多的代码行:)

**补充说：** 我也可以这样做：

```
if($getstatus->num_rows != 0) {
    $getstatusarr = $getstatus->fetch_assoc();
    if($getstatusarr["Type"] != $data["type"]) {
        echo "error";
        goto skip;
        }
}
... // some code which I need not to execute if $getstatusarr["Type"] != $data["type"] are true
skip:
// another code which will execute in all cases 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T10:49:18.243

从我的角度来看，最好尽可能多地解开语句并清理代码，也许以后有人将不得不阅读你所做的事情，而他将很难做到这一点。

您也不能在这样的 if 语句中分配新变量：

```
$error = false;
if($getstatus->num_rows)
    $getstatusarr = $getstatus->fetch_assoc();
    if($getstatusarr["Type"] != $data["type"]) {
        $error = array('type' => 'invalid type');
    }
}

if($error) {
    // do something with $error array
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T11:23:38.013

好吧，不要使用 goto ::)

将所有 if 放在一行还是几行主要取决于个人喜好。

if 的行数过多会使代码更难阅读，但将它们全部放在一行上也会使其难以阅读和调试（第 12 行的错误可能意味着很多事情）。如果您使用的是 xdebug 或 Zend debug 之类的调试器，那么多行跳过也更容易。

所以在这之间找到一种方法。

我会这样做，从那时起您还检查 fetch_assoc() 是否返回结果：

```
if($getstatus->num_rows != 0 && $getstatusarr = $getstatus->fetch_assoc())
    if($getstatusarr["Type"] != $data["type"]) {
        echo "error"
        $error = true;
    }
if(!$error) {
    ...
} 
```

# c - 了解 ATOI 功能

> ID：12798272
> 
> 赞同：0
> 
> 时间：2012-10-09T10:40:35.997
> 
> 标签：c, atoi

嗨，我有一个包含以下数据的文本文件

```
ABC00011234567
XYZ00021234567 
```

为了获取数据，我定义了一个结构

```
typedef struct data {
 char x[3];
 char y[4];
 char z[7];
} key; 
```

在程序中我所做的是读取每一行并将其分配给结构

```
unsigned char buf[1024];
fgets(buf,sizeof(buf),fptr); 
key *k=(key*)buf;
int y = atoi(k->y)
printf( "y=%d\n",y);` 
```

我得到的输出为

```
y=1123456
y=2123456 
```

我期望的输出是

```
y=1
y=2 
```

我应该假设，atoi 获取字符串的指针并迭代直到遇到 EOF？我应该怎么做才能获得价值`1`和`2`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T10:43:33.323

[atoi](http://linux.die.net/man/3/atoi)采用一个以 nul 结尾的字符串。`key`如果您想限制数据`atoi`解析的长度，您必须将自己的终止符添加到您的成员中

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-09T10:55:51.060

您应该假设它`atoi()`一直持续到它到达字符串的末尾或无效字符。例如，对于字符串“123zzz”，它会返回 123。

您应该终止您的字符串（在它们的末尾放置一个零）并停止使用`atoi()`（例如`strtol()`改用）；或编写您自己的不需要终止字符串的转换。

*注意：（通常）`atoi()`不应该用于编写编译器以外的任何事情，因为它所做的事情对普通人来说没有意义（例如，“0129”是 10 而不是 129，因为它决定数字是八进制并且9 不是八进制的有效数字）。*

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-09T10:43:40.937

atoi() 假定以零结尾的字符串。在您的情况下，字符串不会以零结尾，因此在读取 y 后， atoi 会读取 z 中的数据。

要仅读取 4 位数字，您可以使用 sscanf：

```
sscanf(k->y,"%4d",&y); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-09T10:43:41.763

该`atoi`函数需要一个以空字符结尾的字符串；您正在传递其终止超出边界的 char 数组的一部分`key::y`，因此`atoi`将整个值解释为一个数字。如果您想坚持使用“千篇一律”的方法来解析密钥，则需要制作一个副本，并将其传递给`atoi`：

```
char temp[5];
memcpy(temp, k->y, 4);
temp[4] = '\0';
int y = atoi(temp); 
```

但是，我认为 using`fscanf`是一个更好的选择：

```
char x[4];
int y, z;
fscanf(fptr, "%3s%4d%7d", x, &y, &z);
printf("%s %d %d", x, y, z); 
```

# android - 如何获取设备中只有加速度计传感器的RotationMatrix

> ID：12798273
> 
> 赞同：3
> 
> 时间：2012-10-09T10:40:35.617
> 
> 标签：android, accelerometer, sensormanager

我想获得设备旋转，我已经以某种方式实现了，但是代码不起作用，哪个设备不存在磁传感器、方向传感器和陀螺仪传感器。但我已经看到一些应用程序在设备上运行，如[XClinometer](https://play.google.com/store/apps/details?id=com.plaincode.clinometer&hl=en)和[iHandy 级别免费](https://play.google.com/store/apps/details?id=com.ihandysoft.carpenter.level&feature=search_result#?t=W251bGwsMSwxLDEsImNvbS5paGFuZHlzb2Z0LmNhcnBlbnRlci5sZXZlbCJd)。设备 htc Explorer 没有提供这些传感器不存在的价值。请告诉我如何完成这项任务。我已经使用了这个代码，但由于传感器不可用，所以没有得到任何值，所以也没有旋转矩阵。

```
 @Override
    public void onSensorChanged(SensorEvent event) {

        switch (event.sensor.getType()) {
        case Sensor.TYPE_ACCELEROMETER:
            // copy new accelerometer data into accel array and calculate
            // orientation
            System.arraycopy(event.values, 0, accel, 0, 3);
            calculateAccMagOrientation();
            break;

        case Sensor.TYPE_GYROSCOPE:
            // process gyro data
            gyroFunction(event);
            break;

        case Sensor.TYPE_MAGNETIC_FIELD:
            // copy new magnetometer data into magnet array
            System.arraycopy(event.values, 0, magnet, 0, 3);
            break;

        } 
```

}

方法是

```
public void calculateAccMagOrientation() {

         if (SensorManager.getRotationMatrix(rotationMatrix, null, accel,
                magnet)) {
            SensorManager.remapCoordinateSystem(rotationMatrix, SensorManager.AXIS_X,
                    SensorManager.AXIS_Y, mValuesOrientation);
            SensorManager.getOrientation(rotationMatrix, mValuesOrientation);

        }else{
            //float[] array = new float[9];
            if(magnet[0]<=0){
                System.out.println("herr.....");
                System.out.println();
            }else{
                System.out.println("null so herr.....");
            }
            /*on htc device it is coming here so i need code here to get angle as only received accelerometer sensor data.
           */
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T10:59:57.127

您链接到的示例只需要倾斜角度，而不需要旋转矩阵。有加速度计来获得倾斜角度就足够了。

旋转矩阵包含比倾斜角度更多的信息，它也需要陀螺仪。

# python - 我怎样才能在python中实现这一点

> ID：12798279
> 
> 赞同：-1
> 
> 时间：2012-10-09T10:40:58.527
> 
> 标签：python

这是一些代码：

```
li=[1,2,3]
def change(l):
    l[2]=10
change(li)
print li
[1, 2, 10] 
```

但我想要这个：

```
li=[1,2,3]
def change(l):
    l=[1,2,10]
change(li)
print li
[1,2,3] 
```

出于某种原因，我必须在方法中更改整个列表，我怎样才能做到这一点？有什么问题或我的错误吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T10:43:38.050

当您想更改方法中的整个列表时，您可能需要创建一个副本并*返回*它：

```
def change(li):
   new_list = li[:] #copy
   new_list[2] = 10
   return new_list

li = [1,2,3]
new_lst = change(li) #new_lst = [1,2,10] 
```

* * *

如果不想返回列表，但想原地修改，可以使用切片赋值（*警告：这不是常见的做法）：

```
def change(li):
    li[:] = [1,2,10]

li = [4,5,6]
change(li)
print(li) #[1, 2, 10] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T10:44:47.580

像这样：

```
li = [1, 2, 3]

def change(l):
    l[:] = [1, 2, 10]

change(li)
print li  # [1, 2, 10] 
```

您的方法不起作用的原因是在 python 中，变量只是引用对象的名称。当您编写时，`l = [1, 2, 10]`您正在重新绑定名称`l`以引用您刚刚创建的新列表，旧列表保持不变，仍然由全局变量引用`li`。

`l`上面的代码改为使用[slice assignment](http://docs.python.org/tutorial/introduction.html#lists)修改指向的对象。

正如 mgilson 在他的回答中指出的那样，您应该非常清楚该函数实际上就地修改了传递的参数。如果不是这样，一个毫无戒心的程序员可能会向它传递一个他打算稍后按原样使用的列表，结果却发现其中的所有内容都丢失了。给你的函数一个名称来表示修改（就像你所做的那样）并且不从它返回任何东西都是这些函数的常见指示符，例如[`random.shuffle`](http://docs.python.org/library/random.html#random.shuffle).

为了对 dict 实现相同的效果，[文档](http://docs.python.org/library/stdtypes.html#mapping-types-dict)告诉我们这样做：

```
def change_dict(d):
    d.clear()  # Empty dict
    d.update({"a": 3, "b": 9}) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-09T10:48:01.663

当您执行以下操作时：

```
def change(l):
    l=[1,2,10] 
```

您实际上正在更改哪个列表`l`指向。您需要将传入的列表实例更改为`change`. 你可以`append`去它，你可以`pop`从它，等等，你的更改将在你传入的列表中进行。如果你将你的`change`函数更改为我所拥有的，你的示例将起作用。

```
def change(l):
    l[:] = [1,2,10] 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-09T10:44:08.737

# 使用别名

> **文档：** [列表别名 — 如何像计算机科学家一样思考（第 2^版）](http://www.openbookproject.net/thinkcs/python/english2e/ch09.html#aliasing)

您可以利用 Python 的列表别名（这是初学者的[常见问题](http://www.openbookproject.net/thinkcs/python/english2e/ch09.html#aliasing)）。

当您传递`li`给`change`函数时，的`l`别名`li`，即它们都指向内存中的同一个对象，并且更改一个对象会更改另一个对象。但是当你这样做时`l = [1, 2, 10]`，`l`指向另一个列表，你就失去了混叠的魔力。要解决此问题，您可以使用切片操作替换为完整列表，如下所示：

```
li = [1, 2, 3]
def change(l):
    l[:] = [1, 2, 10]  # doesn't make a new list
change(li)             # preserves aliasing
print li               # returns [1, 2, 10] 
```

# 使用全局变量

> **文档：** [声明`global`— Python Docs](http://docs.python.org/reference/simple_stmts.html#the-global-statement)

您在`l`函数内部所做的更改不会应用于`li`外部列表。您可以使用全局来影响`li`您尝试更改的列表：

```
li = [1, 2, 3]
def change():
    global li
    li = [1, 2, 10]  # use this
    li[2] = 10       # or this, up to you
change()
print li             # returns [1, 2, 10] 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-09T11:25:42.537

在此代码中， l 是作为整体对象的通用对象，因此您可以通过提供对象内存位置的 id() 进行检查。所以这就是为什么你得到最后一个输出 [1,2,10]

```
l = [1, 2, 3]
print id(l)
def change(l):
    l[:] = [1, 2, 10]
    print id(l)
change(l)
print l
print id(l) 
```

如果你想要你想要的输出而不是使用提供不同对象的 deepcopy 来运行。

```
from  copy  import deepcopy
l = [1, 2, 3]
print id(l)
def change(l):
    l[:] = [1, 2, 10] 
    print id(l)
change(deepcopy(l)) 
print l
print id(l) 
```

# internet-explorer-9 - 我怎样才能删除这个奇怪的焦点（TinyMCE）

> ID：12798280
> 
> 赞同：1
> 
> 时间：2012-10-09T10:41:00.310
> 
> 标签：internet-explorer-9, tinymce

首先，让我告诉你这个问题。 [错误图片](http://tldr.me/1tj1f95.gif)

白框是 TinyMCE 编辑器。默认为只读。编辑时，编辑器会显示它的控件并获得焦点。退出编辑模式后，编辑器以某种方式保持其焦点，如 (1) 所示。

如果它没有导致以下问题，这将不是什么大问题：

当焦点在那里时，被按下的第一个按钮不会触发（（2）中的任何一个）。如果我首先单击屏幕主体，或者在第一个按钮之后单击其他按钮，则会触发。

我尝试在代码隐藏（C#）中设置焦点，但这没有任何区别。我进行的另一次尝试是通过添加 jQuery 将焦点设置到第一个可见输入，也没有删除位置 (1) 中的光标。

我希望这里有人知道以某种方式摆脱这种关注的诀窍:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T07:18:54.363

这个问题的解决方案是使用最新的稳定版本的tinymce。

# c# - 我们不需要 MVC3 架构中的 DAL 层吗？

> ID：12798288
> 
> 赞同：4
> 
> 时间：2012-10-09T10:41:40.653
> 
> 标签：c#, asp.net, .net, asp.net-mvc, asp.net-mvc-3

> **可能重复：**
> [在 MVC 中哪里编写数据库和业务逻辑？](https://stackoverflow.com/questions/3679263/where-to-write-database-and-business-logic-in-mvc)

我刚刚开始使用 MVC3 模式。我们如何在 MVC3 中进行数据访问？我们是将“模型”作为数据访问层还是添加另一个“DAL”层并从“模型”层调用它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T10:44:50.443

你的模型应该独立于数据访问的东西，这将允许你在未来改变你的 DAL 策略。

您应该从 DAL 提供模型，但模型不应该知道它是如何构建的，当然也不应该在其中包含任何特定于数据库的代码。

如果您采用我建议的方法，请查看 AutoMapper - 一个非常有用的工具，用于在 DAL 和模型类之间映射数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T10:45:15.777

模型是您的视图模型，而不是您的域模型。

如果你想做 DAL 活动，我倾向于将它包装在可以注入你的控制器的存储库/服务中。

这可以防止您的控制器变得臃肿，还允许您模拟 DAL 层以对控制器进行单元测试。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-09T10:43:16.503

当我处理我的最后一个 MVC3 项目时，我从各种示例（例如 GeekDinner）中了解到实体框架充当数据访问层。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-09T10:43:57.227

您的模型*可以是*直接映射的数据访问对象，但不一定必须如此。它们也可以作为后端 DAL 的代理，根据您的要求和项目的寿命，这始终是更好的选择。

我倾向于为大型项目处理它的方式是有一个名为的单独命名空间`Project.Entities`，其中包含我的实体框架数据模型。我`Project.Models`将包含使用实体作为其数据的后备存储的模型，并提供通用方法（必要时）来操作该数据。它可能不是最好的方法，但提供了最大的灵活性，并坚持将数据模型与允许更多抽象的后备存储分开。例如，您始终可以将底层数据层切换到内存存储、实体框架之外的另一个 DAL 或其他任何东西。

对于较小/临时/测试项目，我的实体框架数据模型将直接`Project.Models`使用并直接使用，因为它更快且不需要太多思考。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-09T10:44:33.947

不，模型不是数据访问。模型是一组保存数据的类，它通常不包含代码，除了可能用于验证分配的值是否允许。

您从控制器访问数据。采用哪种方式完全取决于您，而 MVC 并不关心。

# ado.net - 如何在 SSIS 表达式生成器中使用日期时间值来制定 SQL 命令？

> ID：12798289
> 
> 赞同：3
> 
> 时间：2012-10-09T10:41:41.140
> 
> 标签：ado.net, ssis, sqlcommandbuilder

我正在尝试使用 Ado.Net Sql 命令从带有日期过滤器的表中选择数据。

```
SELECT  COLUMN1
    ,   COLUMN2 
FROM    TABLENAME 
WHERE   DATE_INSERTED > @[User::LastInsertDate] 
```

`Date_Inserted`和都是`@[User::LastInsertedDate]`类型`DateTime`。当我尝试在表达式生成器中评估表达式时，出现以下错误；

> 表达式可能包含无效标记、不完整标记或无效元素，它可能不是格式正确的，或者可能缺少必需元素的一部分，例如括号。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-09T13:22:26.863

这是我对你的问题的理解。我相信您在包范围内创建了两个变量。一个名为*DateTime*`LastInsertDate`数据类型的变量和另一个名为*String*数据类型的变量，用于存储 SQL SELECT 命令。*`SqlQuery`*

 **![变量声明](../Images/ea97039adc57b05258a5b786cef1cb26.png)

您将变量的*EvaluateAsExpression*`SqlQuery`属性设置为**`True`**。然后你输入了以下命令`SELECT COLUMN1, COLUMN2 FROM TABLENAME WHERE DATE_INSERTED > @[User::LastInsertDate]`

![表达式生成器](../Images/c9f26efbe2dc8f2382d5b8ea877f648b.png)

当您单击*EvaluateAsExpression*时，您会收到以下错误消息：

`Expression cannot be evaluated.` **`Additional information:`** `Attempt to parse the expression "SELECT COLUMN1, COLUMN2 FROM TABLENAME WHERE DATE_INSERTED > @[User:LastInsertDate]" failed. The expression might contain an invalid token, an incomplete token, or an invalid element. It might not be well-formed, or might be missing part of a required element such as a parenthesis.`

![错误信息](../Images/617a5df9e37ed39159c061257786594f.png)

这里的问题是您尝试存储在变量 SqlQuery 中的值未包含在双引号中。字符串值应该用双引号括起来。在将文本括在双引号中时，不能`LastInsertDate`按原样使用 datetime 变量。您需要将日期时间变量转换为字符串，但如果您只是将日期时间值转换为字符串，您可能会遇到意外的格式。为了安全起见，我建议使用`DATEPART`函数将 datetime 值转换为 format 字符串**`YYYY-MM-DD hh:mi:ss`**。这是将执行此操作的完整表达式。

```
"SELECT COLUMN1, COLUMN2 FROM TABLENAME WHERE DATE_INSERTED > '" +
(DT_STR, 4, 1252) DATEPART("yyyy", @[User::LastInsertDate]) 
+ "-" + RIGHT("0" + (DT_STR, 2, 1252) DATEPART("mm", @[User::LastInsertDate]), 2)
+ "-" + RIGHT("0" + (DT_STR, 2, 1252) DATEPART("dd", @[User::LastInsertDate]), 2) 
+ " " + RIGHT("0" + (DT_STR, 2, 1252) DATEPART("hh", @[User::LastInsertDate]), 2) 
+ ":" + RIGHT("0" + (DT_STR, 2, 1252) DATEPART("mi", @[User::LastInsertDate]), 2)
+ ":" + RIGHT("0" + (DT_STR, 2, 1252) DATEPART("ss", @[User::LastInsertDate]), 2) 
```

当您单击 Evaluate Expression 时，您将在 Evaluated value 部分看到带有日期时间值的字符串。

希望有帮助。

![已更正](../Images/aa91a43b968098492de41bfa6dc8c685.png)**

# java - 读取括号、花括号和方括号的 Java 程序

> ID：12798290
> 
> 赞同：-1
> 
> 时间：2012-10-09T10:41:46.480
> 
> 标签：java

我应该创建一个 Java 程序来读取表达式，其中包含大括号 { }、方括号 [ ] 和圆括号 ( ) 等。我的程序应该正确嵌套，并且 '(' 匹配 ')'、'[' 匹配 ']' 和 '{' 匹配 '}' 程序应该在输入行的开头以 '$' 终止。这些应该是我的程序的示例运行：

```
Enter an Expression:
A[F + X {Y – 2}] 
The expression is Legal

Enter an Expression: 
B+[3 – {X/2})*19 + 2/(X – 7) 
ERROR—‘]’ expected 

Enter an Expression:
()) ( 
ERROR--‘)’ without ‘(‘ 
$ 
```

我创建了一个名为 BalancedExpression 的类和一个名为 ExpressionChecker 的驱动程序。我完成了我的 BalancedExpression 课程。但是，我在设置驱动程序以使用 InputStreamReader 和 BufferedReader 打印出表达式时遇到问题。我唯一能弄清楚的是如何通过让用户输入 $ 来终止我的程序。

到目前为止，这是我的代码：

平衡表达类：

```
public class BalancedExpression
{
public BalancedExpression() // Default Constructor
{
  sp = 0; // the stack pointer
  theStack = new int[MAX_STACK_SIZE]; 
} 

public void push(int value) // Method to push an expression into the stack
{ 
  if (!full()) 
    theStack[sp++] = value; 
} 

public int pop() // Method to pop an expression out of the stack
{ 
  if (!empty()) 
    return theStack[--sp]; 

  else 
    return -1;  
} 

public boolean full() // Method to determine if the stack is full
{ 
  if (sp == MAX_STACK_SIZE) 
    return true; 

  else 
    return false; 
} 

public boolean empty() // Method to determine if the stack is empty
{ 
  if (sp == 0) 
    return true; 

  else 
    return false; 
} 

public static boolean checkExpression(String ex) // Method to check Expression in stack
{
    BalancedExpression stExpression = new BalancedExpression();
    for(int i = 0; i<  MAX_STACK_SIZE; i++)
    {
        char ch = ex.charAt(i);
        if(ch == '(' || ch == '{' ||  ch == '[')
            stExpression.push(ch);
        else if(ch == ')' && !stExpression.empty() && stExpression.equals('('))
            stExpression.pop();
        else if(ch == '}' && !stExpression.empty() && stExpression.equals('{'))
            stExpression.pop();
        else if(ch == ']' && !stExpression.empty() && stExpression.equals('['))
            stExpression.pop();
        else if(ch == ')' || ch == '}' ||  ch == ']' )
            return false;
    }
    if(!stExpression.empty())
        return false;
    return true;
}

private int sp; 
private int[] theStack; 
private static final int MAX_STACK_SIZE = 6;

}// End of class BalancedExpression 
```

我的驱动程序：

```
import java.io.BufferedReader;
import java.io.InputStreamReader;

public class ExpressionChecker
{

public static void main(String[] args) 
{
    InputStreamReader reader = new InputStreamReader(System.in); 
    BufferedReader console = new BufferedReader(reader); 

    BalancedExpression exp = new BalancedExpression();
    String expression = "";

    do
    {
        try{
        System.out.print("Enter an Expression: ");
        expression = console.readLine();

        if("$".equals(expression)) 
            break;

        }catch(Exception e){
            System.out.println("IO error:" + e);
        }

    }while(!expression.equals(""));// End of while loop
}
}// End of class ExpressionChecker 
```

谁能帮我开发我的驱动程序以打印出类似于示例示例的输出？任何帮助表示赞赏。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-20T18:03:20.767

这是一个非常简短的示例，您可以很容易地进行上述检查:) 我们`Stack`在 Java 中有类，它将使程序非常容易。请在下面找到此问题的简单代码：

```
package com.test;

import java.util.Scanner;
import java.util.Stack;

public class StackChar {

    public static void main(String[] args) {

        Scanner sc = new Scanner(System.in);

        System.out.println("Enete an expression : ");
        String expr = sc.nextLine();

        if(checkvalidExpression(expr)){
            System.out.println("The Expression  '"+expr+"'  is a valid expression!!!");
        }
        else{
            System.out.println("The Expression  '"+expr+"'  is a NOT a valid expression!!!");
        }

    }

    public static boolean checkvalidExpression(String expr){

        Stack<Character> charStack = new Stack<Character>();

        int len = expr.length();
        char exprChar = ' ';

        for(int indexOfExpr = 0; indexOfExpr<len; indexOfExpr++){
            exprChar = expr.charAt(indexOfExpr);

            if(exprChar == '(' || exprChar == '{' ||  exprChar == '['){
                charStack.push(exprChar);
            }
            else if(exprChar == ')' && !charStack.empty()){
                if(charStack.peek() == '('){
                    charStack.pop();
                }
            }
            else if(exprChar == '}' && !charStack.empty()){
                if(charStack.peek() == '{'){
                    charStack.pop();
                }
            }
            else if(exprChar == ']' && !charStack.empty()){
                if(charStack.peek() == '['){
                    charStack.pop();
                }
            }

            else if(exprChar == ')' || exprChar == '}' ||  exprChar == ']' ){
                return false;
            }

        }
        if(!charStack.empty())
            return false;

        return true;

    }

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T10:48:09.863

在您正在使用的*checkExpression*方法的*if 语句* 中

 *> `stExpression.equals()`

而您想要做的是“窥视”堆栈顶部的值。

添加弹出值，将其推回并返回它的简单方法应该可以解决问题（至少这部分）。*

# email - 替代或修复谷歌脚本中的“\n”

> ID：12798292
> 
> 赞同：4
> 
> 时间：2012-10-09T10:42:02.667
> 
> 标签：email, text, google-apps-script, carriage-return

我第一次在这里提出问题（发布前一直在搜索）所以请容忍我可能犯的错误。

问题：我目前正在与谷歌网站合作的网站。在那里制作了一些表单，并在这些表单中添加了一个脚本，以便在表单提交并保存在电子表格上后通过电子邮件发送信息输入，这工作得很好，但是到达的电子邮件中的消息非常混乱。

代码中的所有“\n”表达式都会被忽略。我从 www.labnol.org 获得了代码的基础，并对其进行了一些编辑。

首先，代码：

```
 function sendFormByEmail(e) 
{    
  //I took the two mail addresses out here, but they are working in the original

  var email = "first mail address";
  var email2 = "second mail address";

  var subject = "New Announce your visit form submitted";  

  var s = SpreadsheetApp.getActiveSheet(); 
  var headers = s.getRange(1,1,1,s.getLastColumn()).getValues()[0]; 
  var message = "A new 'Announce your visit' form has been submitted on the website: \n\n" + "\n\n";   

  for(var i in headers) {
    message = message + "\n \n";
    message += headers[i] + ' = '+ e.namedValues[headers[i]].toString() + "\n\n";
  }

  var senderEmail = e.namedValues[headers[6]].toString();

  MailApp.sendEmail(email, senderEmail, subject, message);
  MailApp.sendEmail(email2, senderEmail, subject, message);

} 
```

如您所见，我一直在尝试将 \n 放置在不同的地方作为替代方案，尽管无论我将它放在哪里都会被忽略。

原来的循环是这样的：

```
 for(var i in headers)
    message += headers[i] + ' = '+ e.namedValues[headers[i]].toString() + "\n\n"; 
```

在我对代码进行一些修改之前，它工作得很好。但即使我没有触及这些行，也没有触及有助于获取消息的代码的任何其他部分，\n 停止了工作。我一直在尝试修复它（如上面显示的混乱 \n 所示），但没有成功。

所以现在我正试图找到一种方法来修复它们，或者至少是一种解决方法，并希望你们中的任何人都知道 \n 发生了什么或如何让它们再次工作。

提前致谢。

ps：如果您需要更多信息，请告诉我

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-09T12:26:03.047

一种解决方案是使用[GmailApp.sendEmail](https://developers.google.com/apps-script/class_gmailapp#sendEmail)方法而不是[MailApp.sendEmail](https://developers.google.com/apps-script/class_mailapp)方法。GmailApp 的`sendMail`处理`\n`正确。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-10T18:19:09.973

这是您正在做的事情的替代解决方案：[HtmlTemplate](https://developers.google.com/apps-script/html_service)

一些示例代码：

```
function sendEmailWithTemplateExample() {
  var t = HtmlService.createTemplateFromFile("body.html");
  t.someValue = "some dynamic value";
  var emailBody = t.evaluate().getContent();
  MailApp.sendEmail("your@email.here", "test email", emailBody);
} 
```

这是body.html中对应的模板代码（点击“文件->新建-> Html文件”）：

```
 Body goes here
<?= someValue ?> 
```

# svn - 使用 Maven 发布插件时无法标记 SCM

> ID：12798295
> 
> 赞同：2
> 
> 时间：2012-10-09T10:42:22.853
> 
> 标签：svn, maven, tags, release, revision

当我使用maven发布插件时，我遇到了一些问题，最常见的是tag scm failed，错误是：svn：“svn://192.168.5.222/show/test-show/trunk/show” does not in the revision 0 .

```
at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:213)
at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:153)
at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:145)
at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject(LifecycleModuleBuilder.java:84)
at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject(LifecycleModuleBuilder.java:59)
at org.apache.maven.lifecycle.internal.LifecycleStarter.singleThreadedBuild(LifecycleStarter.java:183)
at org.apache.maven.lifecycle.internal.LifecycleStarter.execute(LifecycleStarter.java:161)
at org.apache.maven.DefaultMaven.doExecute(DefaultMaven.java:320)
at org.apache.maven.DefaultMaven.execute(DefaultMaven.java:156)
at org.jvnet.hudson.maven3.launcher.Maven3Launcher.main(Maven3Launcher.java:79)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
at java.lang.reflect.Method.invoke(Method.java:597)
at org.codehaus.plexus.classworlds.launcher.Launcher.launchStandard(Launcher.java:329)
at org.codehaus.plexus.classworlds.launcher.Launcher.launch(Launcher.java:239)
at org.jvnet.hudson.maven3.agent.Maven3Main.launch(Maven3Main.java:158)
at hudson.maven.Maven3Builder.call(Maven3Builder.java:98)
at hudson.maven.Maven3Builder.call(Maven3Builder.java:64)
at hudson.remoting.UserRequest.perform(UserRequest.java:118)
at hudson.remoting.UserRequest.perform(UserRequest.java:48)
at hudson.remoting.Request$2.run(Request.java:326)
at hudson.remoting.InterceptingExecutorService$1.call(InterceptingExecutorService.java:72)
at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:303)
at java.util.concurrent.FutureTask.run(FutureTask.java:138)
at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
at java.lang.Thread.run(Thread.java:662) 
```

原因：org.apache.maven.plugin.MojoFailureException：无法标记 SCM

然后我找到了我的日志：

[INFO] 执行中：/bin/sh -c cd /data/.hudson/jobs/hxbos/workspace && svn --username liulaixi --password ' ***** ' --no-auth-cache --non-interactive copy --文件 /tmp/maven-scm-49732292.commit --revision 0 svn://192.168.5.213/hxbos/hxecp-src/trunk/hxbos svn://192.168.5.213/hxbos/hxecp-src/tags/hxbos/ hxbos-all-test-1.5.0 [INFO] 工作目录：/data/.hudson/jobs/hxbos/workspace

为什么我的--revision 是0？谁能帮帮我？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T00:45:49.353

问题是你没有正确的 svn 版本。检查安装最新版本并针对您的环境进行设置。如果正确，mvn 将能够在上传 pom.xml 后读取此信息，并以此标记发布。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-09-29T22:07:37.967

我犯了一个错误，我只检查了**主干**（没有**标签**和**分支**）。

对我来说：svn-repository 存储在`/svn/`. Apache 有`DAV svn`用于支持`<connection>`标签（不确定我们是否需要 DAV）的配置，如下所示：

```
<Location /svn>
  DAV svn
  SVNPath /svn
</Location> 
```

在`pom.xml`其内部：

```
<scm>
    <url>http://www.myproject.com/svn/Project</url>
    <connection>scm:svn:http://www.myproject.com/Project</connection>
    <developerConnection>scm:svn:svn+ssh://root@www.myproject.com/Project</developerConnection>
</scm> 
```

然后我做

```
svn co file:///svn/Project
cd Project/trunk/
eval `ssh-agent -s`
ssh-add   ~/mykey-to-commit-new-tag.ossh
mvn package gpg:sign
svn commit
mvn clean release:prepare release:perform -Darguments="-DskipTests -Dmaven.javadoc.failOnError=false" -X 
```

我真正要做的是检查整个项目。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-11-11T17:08:16.783

尝试将“tagBase”配置添加到您的 pom.xml：

```
<plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-release-plugin</artifactId>
                <version>2.2.2</version>
                <configuration>
                    <tagBase>https://svn.site.net.br/svn/SiteV6/Vitrine</tagBase>
                </configuration>
            </plugin> 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-07-26T07:33:35.113

您是否尝试忽略此错误并再次尝试 mvn release:prepare ？对我来说它有效。不过不要问我为什么。

# php - 使用 kannel post-url 但空 php $_POST

> ID：12798297
> 
> 赞同：0
> 
> 时间：2012-10-09T10:42:31.363
> 
> 标签：php, kannel

我正在使用 kannel 1.4.3 并使用如下所示的短信服务

```
group = sms-service
keyword = default
# keyword-regex = .*
catch-all = yes
max-messages = 0
post-url = "http://127.0.0.1/sms.php?phone=%p&text=%a&first_keyword=%k&second_keyword=%s&words=%r&binary_message=%b&time=%t&unix_time=%T&sms_id=%I&dr=%d&dr_url=%R&meta_data=%D&dr_smsc_reply=%A&message_coding=%c&message_class=%m&message_waiting_indicator=%m&message_charset=%C&udh=%u&xser0cfield=%B&account_identifier=%o&data_coding_schema=%O&smsc_originating_message=%f" 
```

这是 sms.php 脚本

```
<?php
    require_once dirname(__FILE__)."/send.php";
    echo "Ting..\n";
    $phone = isset($_POST['phone']) ? ($_POST['phone']."\n"):"??";
    $text = isset($_POST['text']) ? ($_POST['text']."\n"):"??";

    $username = "tester";
    $password = "foobar";
    $to = $_POST['phone'];
    //$text = "Nomor anda adalah : $to";
    //$url = "http://127.0.0.1:13013/cgi-bin/sendsms?username=".$username."&password=".$password."&to=".$to."&text=".urlencode($text);
    //
    //$result = getCURL($url);

    $fh = fopen(dirname(__FILE__)."/debug.txt","a");

    fwrite($fh,
        print_r(array(
            'method'=>$_SERVER['REQUEST_METHOD'],
            'data'=>print_r($_REQUEST,true),
            'header'=>print_r(getallheaders(), 1)
        ),true)
    );
    fclose($fh);
?> 
```

问题是当我发送消息时，**所有参数都作为 $_GET 接收，而不是 $_POST**甚至 request_method 值是 POST

如何使用 $_POST 检索电话、文本、关键字等所有参数？不是 $_GET？

输出示例：

```
Array
(
    [method] => POST
    [data] => Array
(
    [phone] => +6281210*****628
    [text] => babi pake manjat pohon
    [first_keyword] => babi
    [second_keyword] => pake
    [words] => manjat pohon
    [binary_message] => babi pake manjat pohon
    [time] => 2012-10-09 10:05:49
    [unix_time] => 1349777149
    [sms_id] => 2f3e12ed-5031-4d5f-b1f2-55e3c41063a4
    [dr] => -1
    [dr_url] => %R
    [meta_data] => %D
    [dr_smsc_reply] => babi pake manjat pohon
    [message_coding] => 0
    [message_class] => -1
    [message_waiting_indicator] => -1
    [message_charset] => UTF-8
    [udh] => 
    [xser0cfield] => 
    [account_identifier] => 
    [data_coding_schema] => 00
    [smsc_originating_message] => +628*****0000
)

    [header] => Array
(
    [Host] => 127.0.0.1
    [Connection] => keep-alive
    [User-Agent] => Kannel/1.4.3
    [Content-Type] => text/plain
    [X-Kannel-To] => 13013
    [X-Kannel-Time] => 2012-10-09 10:05:49
    [Date] => 2012-10-09 03:05:56
    [X-Kannel-SMSC] => at-modem
    [X-Kannel-PID] => 0
    [X-Kannel-Alt-DCS] => 0
    [X-Kannel-Coding] => 0
    [X-Kannel-Compress] => 0
    [X-Kannel-Service] => default
    [Content-Length] => 22
)

) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-08-17T08:22:54.807

在您的示例中，您在查询字符串中设置参数而不是发布数据，这就是您在 $_GET 中看到它们的原因。

$_POST 为空，因为 Kannel 在 X-Kannel-* HTTP 标头中提交数据，而不是在 post 字段中提交数据。

请参阅 gw/smsbox.c 第 1306-1431 行（v1.4.4）...它们仅在 userguide.xml 的用户指南中，因此阅读源代码将向您显示使用了哪些标题名称。

您无法选择与 post-url 一起使用的名称，也无法选择哪些参数 - 它们都在每个请求中发送。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T11:00:49.253

有同样的问题问题......我使用的只是使用 PHP `$_REQUEST`......所以它是否`$_GET`或`$_POST`能够处理信息并不重要。

如果你想有一个 POST 请求，你可以试试这个`post-xml`选项

# jquery - 使用 jquery 从 iframe 中触发点击事件

> ID：12798298
> 
> 赞同：3
> 
> 时间：2012-10-09T10:42:33.120
> 
> 标签：jquery, iframe, onclick

我的网站中有一个 iframe，并且想在 iframe 之外触发一个点击事件。iframe 作为灯箱加载，iframe 中有一个表单，我想在提交时关闭灯箱。

我使用此代码，但单击事件不起作用。当我在萤火虫中运行相同的代码时，灯箱成功关闭，但在这里我没有得到任何结果。

```
$('iframe', parent.document)
    .parent('div#pp_full_res .pp_pic_holder')
    .siblings('div.pp_details')
    .find('a.pp_close')
    .click(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T12:37:31.400

考虑改为在父框架中调用函数。如果 iframe 中的文档遵循[相同的来源策略](http://en.wikipedia.org/wiki/Same_origin_policy)，则可以执行以下操作：

```
window.parent.closeLightbox(); 
```

然后该`closeLightbox()`函数应该包含您在 Firebug 中测试过的代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T10:47:08.170

iframe 内的操作无法在父窗口中执行脚本，或访问父 DOM

编辑：看看[使用 jquery .hide 隐藏 iframe](https://stackoverflow.com/questions/12498437/hide-iframe-using-jquery-hide/12498547#comment16818932_12498547)

# javascript-events - 服务器发送事件

> ID：12798299
> 
> 赞同：1
> 
> 时间：2012-10-09T10:42:34.837
> 
> 标签：javascript-events

我从 W3Schools.com 获得此代码，它是服务器发送事件的示例。

```
<!DOCTYPE html>
<html>
<body>
<h1>Getting server updates</h1>
<div id="result"></div>

<script>
if(typeof(EventSource)!=="undefined")
  {
  var source=new EventSource("demo_sse.php");
  source.onmessage=function(event)
    {
    document.getElementById("result").innerHTML+="<br>" + event.data;
    };
  }
else
  {
  document.getElementById("result").innerHTML="Sorry, your browser does not support server-sent events...";
  }
</script> 
```

我的问题是如何编辑代码以使新条目高于旧条目？我不知道该怎么做。可以帮帮我。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T10:45:04.857

好

```
document.getElementById("result").innerHTML+="<br>" + event.data; 
```

获取文档并将新数据附加到它。

我很惊讶你没有尝试过

```
document.getElementById("result").innerHTML =event.data + "<br>" + document.getElementById("result").innerHTML; 
```

# performance - Hibernate Search MassIndexer 的合理设置是什么？

> ID：12798300
> 
> 赞同：1
> 
> 时间：2012-10-09T10:42:35.040
> 
> 标签：performance, lucene, hibernate-search

在我的应用程序中，我使用*Hibernate Search*来管理我的一些映射模型类的*Lucene*索引（10 个类，部分相互关联——`indexEmbedded`在索引定义中使用了相当长的时间）。大约有。1,500,000 个要索引的文档

为了重建整个索引，我使用文档 [http://docs.jboss.org/hibernate/search/3.3/reference/en-US/html/manual-index-changes.html中建议的海量索引器](http://docs.jboss.org/hibernate/search/3.3/reference/en-US/html/manual-index-changes.html)

```
fullTextSession
    .createIndexer()
    .batchSizeToLoadObjects(200)
    .cacheMode(CacheMode.IGNORE)
    .purgeAllOnStart(true)
    .threadsToLoadObjects(10)
    .threadsForIndexWriter(10)
    .threadsForSubsequentFetching(5)
    .startAndWait(); 
```

我的数据库连接池大小为 50

我观察到索引过程开始很有希望，直到它达到所有文档的 25% 左右。之后性能急剧下降（接下来的 5% 所花费的时间是前 25% 的两倍），我想知道为什么会发生这种情况？

*   我的对象加载线程和索引线程的比例是否错误？
*   还是仅仅是因为索引的规模不断扩大？这是否证明了这种性能下降的合理性？
*   如何提高性能？如何实现时间的不断进步？

因为我使用投影而不是让 Hibernate Search 从 DB 中获取搜索结果，所以我的许多索引字段都存储在 Index ( `Store.YES`) 中。这会显着影响性能吗？

- 编辑：

我的休眠搜索配置：

```
properties.setProperty("hibernate.search.default.directory_provider", "filesystem");
properties.setProperty("hibernate.search.default.indexBase", searchIndexPath);
properties.setProperty("hibernate.search.indexing_strategy", "manual");
properties.setProperty("hibernate.default_batch_fetch_size", "200"); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T12:05:29.593

您是否已对您的应用程序进行了概要分析。在这种情况下很难给出一般性的建议。

您还使用什么配置设置？有几个属性可以影响索引行为。有关详细信息，请参阅[http://docs.jboss.org/hibernate/stable/search/reference/en-US/html_single/#search-batchindex-massindexer 。](http://docs.jboss.org/hibernate/stable/search/reference/en-US/html_single/#search-batchindex-massindexer)索引期间的内存消耗是什么。您是否也对此进行了监控。

> 因为我使用投影而不是让 Hibernate Search 从 DB 中获取搜索结果，所以我的许多索引字段都存储在 Index (Store.YES) 中。这会显着影响性能吗？

我希望它主要影响索引大小而不是索引性能。

# javascript - Python打开浏览器并运行javascript函数

> ID：12798301
> 
> 赞同：4
> 
> 时间：2012-10-09T10:42:38.267
> 
> 标签：javascript, python

我有一个关于 python 和 javascript 的问题。我喜欢创建一个与 javascript 网页通信的文件。

首先，我将创建一个 Python 文件，该文件将打开一个本地网页。这个例子 localhost/test.html 这个页面是一个模板页面。代码是

```
<html><head><title>An example application</title></head>
<script>
function myFunction()
{
alert("Hello! I am an alert box!");
}
</script>
    <body>
    <h1 class="content">This is my sample application</h1>
    Put the content here...
    <hr>
    <a href="/exit">Quit</a>
    </body></html> 
```

当所有内容都加载并显示时，python 文件将激活 javascript 函数“myFunction()”

我怎么做？我正在运行 Debian 并安装了 Python 和 Chromium。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-09T10:45:09.443

您需要一个库来允许浏览器和程序之间的交互。

选项包括[Selenium](http://seleniumhq.org/)和[Ghost](http://jeanphix.me/Ghost.py/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T10:55:56.007

你看过[网络浏览器模块](http://docs.python.org/library/webbrowser.html)吗？它可用于显示您的网页。它不能调用你的 js 函数，但也许可以从 html 中的 ready() 事件触发？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-05-09T09:33:04.633

您可以使用带有包含您的 javascript 代码的 url 参数的[webbroser](https://docs.python.org/2/library/webbrowser.html)模块从 python 打开网站。

在你的例子中

```
import webbrowser
webbrowser.open('http://localhost/test.html' + '?script=myFunction();') 
```

然后你可以在你的 javascript 中读取 url 参数并通过[eval执行它](https://developer.mozilla.org/de/docs/Web/JavaScript/Reference/Global_Objects/eval)

```
<script>
    window.onload = function () {
        var url = new URL(window.location.href);
        var script = url.searchParams.get("script");
        console.log(script);
        eval(script)
    }    
</script> 
```

请注意，这仅适用于测试或开发目的，不得用于生产，因为像这样使用 eval 是[危险](https://developer.mozilla.org/de/docs/Web/JavaScript/Reference/Global_Objects/eval#Don't_use_eval_needlessly!)的。

# java - java中的生命周期方法

> ID：12798303
> 
> 赞同：-1
> 
> 时间：2012-10-09T10:42:58.710
> 
> 标签：java

当一个类继承这个类并覆盖这些生命周期方法时，如何创建一个具有一些按某种顺序执行的方法（即类的生命周期方法）的类？

**例如：**

1.  在 Servlet 中，首先调用 init()，然后调用 service()，最后在创建 servlet 对象时自动调用 destroy()。

2.  android中的Activity有生命周期方法onCreate()、onStart()、onResume()等，当Activity对象存在时会自动调用

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T11:34:04.107

在最简单的情况下，您可以使用模板方法方法来满足您的要求：

```
public class Template {
  public void templateMethod() {
    detail1();
    detail2();
  }
  protected void detail1() {}
  protected void detail2() {} 
```

}

然后你子类化 Template 类。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T10:45:32.407

这些方法的顺序是由引用您的类的框架/容器规定的。我通常希望您的框架需要客户端实现特定的接口（包含`start()`等`stop()`），并且框架*本身*将确定状态机和后续行为。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-09T10:48:07.793

**Java的生命周期方法**

由于小程序在浏览器中运行，因此 Applet 类包含生命周期方法。生命周期方法也称为环回方法。

**在 java.applet.Applet 我们有四种生命周期方法。他们是**

```
public void init (),
public void start (),
public void stop () 
public void destroy (). 
```

**1\. public void init()：**

```
This is the method which is called by the browser only one time after loading the applet.
In this method we write some block of statements which will perform one time operations, such as, obtaining the resources like opening the files, obtaining the database connection, initializing the parameters, etc. 
```

**2\. public void start()：**

```
 After calling the init method, the next method which is from second request to sub-sequent requests the start method only will be called i.e., short method will be called each and every time.
In this method we write the block of statement which provides business logic. 
```

**3\. public void stop()：**

```
 This id the method which is called by the browser when we minimize the window. 
In this method we write the block of statements which will temporarily releases the resources which are obtained in init method. 
```

**4\. public void destroy()：**

```
This is the method which will be called by the browser when we close the window button or when we terminate the applet application.
In this method we write same block of statements which will releases the resources permanently which are obtained in init method. 
```

另一个不是生命周期方法的方法是 public void paint()。这是在启动方法完成后将被浏览器调用的方法。此方法用于在浏览器上显示数据。Paint 方法在内部调用名为 drawString 的方法，其原型如下所示。java.awt.Graphics (Graphics => public void drawString (String, int row position, int column position)) 将小程序加载到浏览器后，会自动创建一个 Graphics 类的对象。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-09T10:51:12.827

您需要**应用程序容器**（最简单的解释是它是某个类，它将按指定顺序执行您的类的指定方法）。但是您需要更深入地了解应用程序容器的概念。我建议您阅读有关[Spring的内容](http://en.wikipedia.org/wiki/Spring_Framework)

# c#-4.0 - c#.net windows窗体中的datagridview组合框列

> ID：12798305
> 
> 赞同：1
> 
> 时间：2012-10-09T10:43:13.243
> 
> 标签：c#-4.0

嗨朋友们，我正在从加载的 Windows 表单中创建 datagridview 组合框列。但在运行时，我没有获得 datagridview 的组合框列中的值。我使用下面的代码

```
 DataGridViewComboBoxColumn clnStatus = new DataGridViewComboBoxColumn();
        clnStatus.DataPropertyName = "Status";
        clnStatus.Name = "Absent - Leave - Present";
        clnStatus.DataSource = new string[] { "Absent", "Leave", "Present" };
        DgvTeacherAttendance.Columns.Add(clnStatus); 
```

在我选择下拉列表中的任何一个之前，这里的组合框列将显示空值。为什么我收到这些错误请任何人都可以帮助我。

# php - 检查用户使用php查看apache服务器中静态文件的权限？

> ID：12798306
> 
> 赞同：0
> 
> 时间：2012-10-09T10:43:13.633
> 
> 标签：php, apache, .htaccess, permissions

我已经实现了一个有一些用户的 php 网站。我想管理他们对静态文件的访问。

此外，我在一个文件`permissions.php`中有一个函数，它获取一个 url（例如`/images/secret.jpg`）并检查当前登录用户的权限。

我想我需要在 .htaccess 文件中添加一些内容，对于每个请求，首先调用我的函数，`permissions.php`然后在返回 true 时提供文件，否则返回 404。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T10:48:11.903

您可以这样做的一种方法是为所有要保护的文件设置权限，并使用 PHP 获取文件并[通过修改标题来提供它。](https://stackoverflow.com/questions/1353850/serve-image-with-php-script-vs-direct-loading-image). 这样，您可以检查用户是否拥有该文件的权限，如果有，PHP 代码将获取该文件并将其提供给他们。

（顺便说一句，链接问题的答案会改变.htaccess。我不想自己弄乱它）。

# image-processing - 如何转换图像？

> ID：12798308
> 
> 赞同：4
> 
> 时间：2012-10-09T10:43:29.360
> 
> 标签：image-processing, opencv, transformation, emgucv

![原始图像](../Images/0adb30a7a34433b05d7066e23ef1445b.png)

你可以看到车道是歪斜的。我想让车道垂直。

我使用了**Photoshop的透视变换功能**，得到了结果：

![透视变换后](../Images/5a31b13821ffe3127817021ceca5d0e7.png)

虽然现在车道是垂直的，但远端的车变大了，近端的车变小了。那不是我想要的。

我尝试**了 Photoshop 的变形功能**。Photoshop 给了我 8 个控制点，我终于得到了理想的结果。

![我想要的是](../Images/89806ef33d92615a65ccbe168a97ae93.png)

这种转变的名称是什么？

如何以编程方式进行转换？我正在使用 C# + EmguCV(OpenCV)

非常感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-09T10:45:28.080

它被称为[径向失真](http://en.wikipedia.org/wiki/Distortion_%28optics%29)。它通常由[Browns 模型](http://en.wikipedia.org/wiki/Distortion_%28optics%29#cite_note-brown-1)固定。[这](http://www.creativepro.com/article/photoshop-how-to-eliminate-barrel-distortion-caused-by-camera-lenses)是有关如何使用 Photoshop 修复它的教程。

![在此处输入图像描述](../Images/885afd57cc0b778bebb37c672213a922.png)

请注意，在您的情况下，您应该**首先**修复径向失真，然后才进行投影变换（Homography），因为径向失真是镜头的属性，而投影变换是您正在拍摄的世界的属性看着。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-09T10:47:20.023

除了校正径向畸变外，还可以通过应用单应变换来校正透视（假设道路平坦）

# asp.net-mvc-4 - 未能找到或加载已注册的 .Net Framework 数据提供程序

> ID：12798312
> 
> 赞同：5
> 
> 时间：2012-10-09T10:43:34.850
> 
> 标签：asp.net-mvc-4, .net-4.5, appharbor

我收到以下错误：“无法找到或加载已注册的 .Net Framework 数据提供程序。” 它只发生在 AppHarbor 服务器中，而不是我的本地

我使用 .Net mvc4 和 mysql

我添加了 MySql.Data、MySql.Data.Entity、MySql.Web 来引用并设置 Copy Local = true。我还将 bin 文件夹推送到 AppHarbor

这是我的 web.config：

```
<?xml version="1.0" encoding="utf-8"?>
<configuration>
  <configSections>
    <section name="entityFramework" type="System.Data.Entity.Internal.ConfigFile.EntityFrameworkSection, EntityFramework, Version=5.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" requirePermission="false"/>
  </configSections>
  <system.data>
    <DbProviderFactories>
      <remove invariant="MySql.Data.MySqlClient"/>
      <add name="MySQL Data Provider" invariant="MySql.Data.MySqlClient" description=".Net Framework Data Provider for MySQL" type="MySql.Data.MySqlClient.MySqlClientFactory, MySql.Data, Version=6.5.4.0, Culture=neutral, PublicKeyToken=c5687fc88969c44d"/>
    </DbProviderFactories>
  </system.data>
  <connectionStrings>
    <add name="fmcdatabaseEntities" connectionString="metadata=res://*/Models.FMCEntityDataModel.csdl|res://*/Models.FMCEntityDataModel.ssdl|res://*/Models.FMCEntityDataModel.msl;provider=MySql.Data.MySqlClient;provider connection string=&quot;server=****;uid=****;port=3306;database=****&quot;" providerName="System.Data.EntityClient"/>
  </connectionStrings>
  <appSettings>
    <add key="webpages:Version" value="2.0.0.0"/>
    <add key="webpages:Enabled" value="false"/>
    <add key="PreserveLoginUrl" value="true"/>
    <add key="ClientValidationEnabled" value="true"/>
    <add key="UnobtrusiveJavaScriptEnabled" value="true"/>
    <add key="enableSimpleMembership" value="false"/>
    <add key="autoFormsAuthentication" value="false"/>
  </appSettings>
  <system.web>
    <compilation debug="true" targetFramework="4.5">
      <assemblies>
        <add assembly="System.Data.Entity, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" />
      </assemblies>
    </compilation>
    <httpRuntime targetFramework="4.5" />
    <authentication mode="Forms">
      <forms loginUrl="~/Account/Login" timeout="2880"/>
    </authentication>
    <membership defaultProvider="CustomMembershipProvider">
      <providers>
        <clear/>
        <add name="CustomMembershipProvider" type="FindMyCrushServer.Controllers.ControllerHelpers.CustomMembershipProvider" connectionStringName="fmcdatabaseEntities" applicationName="FindMyCrushServer" enablePasswordRetrieval="false" enablePasswordReset="false" requiresQuestionAndAnswer="false" requiresUniqueEmail="false" passwordFormat="Clear"/>
      </providers>
    </membership>
    <roleManager defaultProvider="CustomRoleProvider" enabled="true" cacheRolesInCookie="false">
      <providers>
        <clear/>
        <add name="CustomRoleProvider" type="FindMyCrushServer.Controllers.ControllerHelpers.CustomRoleProvider"/>
      </providers>
    </roleManager>
    <pages>
      <namespaces>
        <add namespace="System.Web.Helpers"/>
        <add namespace="System.Web.Mvc"/>
        <add namespace="System.Web.Mvc.Ajax"/>
        <add namespace="System.Web.Mvc.Html"/>
        <add namespace="System.Web.Optimization"/>
        <add namespace="System.Web.Routing"/>
        <add namespace="System.Web.WebPages"/>
      </namespaces>
    </pages>
  </system.web>
  <system.webServer>
    <validation validateIntegratedModeConfiguration="false" />
    <handlers>
      <remove name="ExtensionlessUrlHandler-ISAPI-4.0_32bit" />
      <remove name="ExtensionlessUrlHandler-ISAPI-4.0_64bit" />
      <remove name="ExtensionlessUrlHandler-Integrated-4.0" />
      <add name="ExtensionlessUrlHandler-ISAPI-4.0_32bit" path="*." verb="GET,HEAD,POST,DEBUG,PUT,DELETE,PATCH,OPTIONS" modules="IsapiModule" scriptProcessor="%windir%\Microsoft.NET\Framework\v4.0.30319\aspnet_isapi.dll" preCondition="classicMode,runtimeVersionv4.0,bitness32" responseBufferLimit="0" />
      <add name="ExtensionlessUrlHandler-ISAPI-4.0_64bit" path="*." verb="GET,HEAD,POST,DEBUG,PUT,DELETE,PATCH,OPTIONS" modules="IsapiModule" scriptProcessor="%windir%\Microsoft.NET\Framework64\v4.0.30319\aspnet_isapi.dll" preCondition="classicMode,runtimeVersionv4.0,bitness64" responseBufferLimit="0" />
      <add name="ExtensionlessUrlHandler-Integrated-4.0" path="*." verb="GET,HEAD,POST,DEBUG,PUT,DELETE,PATCH,OPTIONS" type="System.Web.Handlers.TransferRequestHandler" preCondition="integratedMode,runtimeVersionv4.0" />
    </handlers>
  </system.webServer>
  <runtime>
    <assemblyBinding xmlns="urn:schemas-microsoft-com:asm.v1">
      <dependentAssembly>
        <assemblyIdentity name="System.Web.Helpers" publicKeyToken="31bf3856ad364e35"/>
        <bindingRedirect oldVersion="1.0.0.0-2.0.0.0" newVersion="2.0.0.0"/>
      </dependentAssembly>
      <dependentAssembly>
        <assemblyIdentity name="System.Web.Mvc" publicKeyToken="31bf3856ad364e35"/>
        <bindingRedirect oldVersion="0.0.0.0-4.0.0.0" newVersion="4.0.0.0"/>
      </dependentAssembly>
      <dependentAssembly>
        <assemblyIdentity name="System.Web.WebPages" publicKeyToken="31bf3856ad364e35"/>
        <bindingRedirect oldVersion="1.0.0.0-2.0.0.0" newVersion="2.0.0.0"/>
      </dependentAssembly>
    </assemblyBinding>
  </runtime>
  <entityFramework>
    <defaultConnectionFactory type="System.Data.Entity.Infrastructure.SqlConnectionFactory, EntityFramework"/>
  </entityFramework>
</configuration> 
```

任何帮助都非常感谢。预先感谢

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-09T19:07:55.177

您是否尝试过使用 NuGet 包？

*   [http://nuget.org/packages/MySql.Data](http://nuget.org/packages/MySql.Data)
*   [http://nuget.org/packages/MySQL.Data.Entities](http://nuget.org/packages/MySQL.Data.Entities)

...他们应该确保将正确的位放在需要的地方。您可以使用[NuGet 包还原来](http://blog.appharbor.com/2012/02/06/use-nuget-package-restore-to-avoid-pushing-packages-to-appharbor)避免将包内容推送到 AppHarbor。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-07-30T19:17:02.603

我刚刚看到在我的案例中出现此异常的原因是 dll 和配置条目之间的不同版本。

因此，有时您实际拥有的 dll（通过 nuget 或其他方式安装）与 app.config 节点中的条目不同。这部分，如果不在 app.config 中，也可以在下面找到

> Windows\Microsoft.NET\Framework64\v4.0.30319\Config\machine.config 和附近的文件夹。

将条目中的版本更改为 dll 的版本解决了该问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-06-09T05:09:40.347

对我来说，我的 nuget 没有在我的项目/bin 中添加必要的 Dll。因此，将包文件夹中所有丢失的 DLL 复制粘贴到 bin 文件夹即可解决此问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-02-25T10:24:19.850

谢谢，我认为 web.config 中的数据库提供程序工厂是修复

```
<system.data>
    <DbProviderFactories>
        <remove invariant="MySql.Data.MySqlClient" />
        <add name="MySQL Data Provider" invariant="MySql.Data.MySqlClient" description=".Net Framework Data Provider for MySQL" type="MySql.Data.MySqlClient.MySqlClientFactory, MySql.Data, Version=6.9.5.0, Culture=neutral, PublicKeyToken=c5687fc88969c44d" />
    </DbProviderFactories>
</system.data> 
```

# android - Android Socket 通信异常

> ID：12798313
> 
> 赞同：1
> 
> 时间：2012-10-09T10:43:35.490
> 
> 标签：android, client

我的服务器代码

```
 public class RemoteServer {

public static void main(String[] args) {

    ServerSocket serverSocket = null;
    Socket socket = null;
    DataInputStream dataInputStream = null;
    DataOutputStream dataOutputStream = null;

    try {
        serverSocket = new ServerSocket(8888);
        System.out.println("Listening :8888");
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }

    while (true) {
        try {
            socket = serverSocket.accept();
            dataInputStream = new DataInputStream(socket.getInputStream());
            dataOutputStream = new DataOutputStream(
                    socket.getOutputStream());
            System.out.println("ip: " + socket.getInetAddress());
            System.out.println("message: " + dataInputStream.readUTF().toUpperCase());
            dataOutputStream.writeUTF("sajol");
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } finally {
            if (socket != null) {
                try {
                    socket.close();
                } catch (IOException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                }
            }

            if (dataInputStream != null) {
                try {
                    dataInputStream.close();
                } catch (IOException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                }
            }

            if (dataOutputStream != null) {
                try {
                    dataOutputStream.close();
                } catch (IOException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                }
            }
        }
    }
}
     } 
```

我的安卓设备客户端代码

```
public class Client extends Activity {

EditText textOut;
TextView textIn; 

/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    //Button b = findViewById(R.id.b)

    textOut = (EditText) findViewById(R.id.t);
    Button buttonSend = (Button) findViewById(R.id.b);
    textIn = (TextView) findViewById(R.id.te);
    buttonSend.setOnClickListener(buttonSendOnClickListener);
}

Button.OnClickListener buttonSendOnClickListener = new Button.OnClickListener() {

    @Override 
    public void onClick(View arg0) {
        // TODO Auto-generated method stub
    Thread t = new Thread(r);
    t.start();
    }
};
Runnable r = new Runnable() {

    @Override
    public void run() {
        // TODO Auto-generated method stub

        Socket socket = null;
        DataOutputStream dataOutputStream = null;
        DataInputStream dataInputStream = null;

        try {
            socket = new Socket("192.168.1.239", 8888);
            dataOutputStream = new DataOutputStream(
                    socket.getOutputStream());
            dataInputStream = new DataInputStream(socket.getInputStream());
            dataOutputStream.writeUTF(textOut.getText().toString());
            textIn.setText(dataInputStream.readUTF());
        } catch (UnknownHostException e) {
            // TODO Auto-generated catch block
            Log.e("Sajol", e+"");
            e.printStackTrace();
        } catch (IOException e) {
            // TODO Auto-generated catch block
            Log.e("Sajol", e+"");
            e.printStackTrace();
        } finally {
            if (socket != null) {
                try {
                    socket.close();
                } catch (IOException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                    Log.e("Sajol", e+"");
                }
            }

            if (dataOutputStream != null) {
                try {
                    dataOutputStream.close();
                } catch (IOException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                    Log.e("Sajol", e+"");
                }
            }

            if (dataInputStream != null) {
                try {
                    dataInputStream.close();
                } catch (IOException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                    Log.e("Sajol", e+"");
                }
            }
        }

    }
};
  } 
```

当我在模拟器服务器响应上运行此客户端代码时。但是当我在真实设备服务器上运行客户端代码时，服务器程序没有响应。我通过在 cmd 上执行 ipconfig 命令找到了在我的代码中使用的 IP 地址。我的电脑（Windows 7）和安卓设备都连接到 wifi。

我有以下异常

java.net.SocketTimeoutException：连接超时

请给我解决方案

# javascript - 使用 jQuery 向第一个 div 添加一个类

> ID：12798319
> 
> 赞同：2
> 
> 时间：2012-10-09T10:43:45.560
> 
> 标签：javascript, jquery, html, css

如何使用 jQuery 将类添加到第一个 div。

我尝试了以下代码，但对我不起作用。也许我错过了一些东西。

```
<html>
<head>
<script src="http://code.jquery.com/jquery-1.8.2.js" type="text/javascript"></script>
<script>
$('.item')
    .eq(0).addClass('first').end()
    .eq(-1).addClass('last').end();
</script>
<style type="text/css">
.first, .last{
background-color:#0099FF;
}
</style>
</head>
<body>
<div class="item">aaa</div>
<div class="item">bbb</div>
<div class="item">ccc</div>
<div class="item">ddd</div>
<div class="item">eee</div>
</body>
</html> 
```

编辑：谢谢大家，有没有为其他 DIV 添加一个类？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-09T10:44:53.077

尝试

```
$(document).ready(function() {
  $('.item:first-child').addClass('first');
}); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-09T10:46:27.033

您在标记准备好之前执行代码。将代码包装在

```
// document ready short-style
$(function() {

}); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-09T10:45:54.093

`<script></script>`您的代码是正确的，但它是在 DOM 准备好之前执行的，请将`</body>`.

要将类添加到其余元素中，您可以这样做（来自 VisioN 的[评论](https://stackoverflow.com/questions/12798319/add-a-class-to-first-div-using-jquery/12798379#comment17305439_12798319)）

```
$(".item:not(:first,:last)").addClass("differentClass"); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-09T10:45:16.380

```
$(".item :first").addClass('first'); 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-10-09T10:52:29.177

您的代码应该在 DOM 完全加载时执行。所以使用 $(document).ready()。

> 一旦完全构建了 DOM 层次结构，就可以运行该脚本。传递给 .ready() 的处理程序保证在 DOM 准备好后执行，因此这通常是附加所有其他事件处理程序和运行其他 jQuery 代码的最佳位置。

[阅读](http://api.jquery.com/ready/)有关 $(document).ready() 的更多信息。

检查下面的代码。它会帮助你完成你想做的事情。

```
 $(document).ready(function() {
          $('.item').first().addClass('first');
        }); 
```

否则，您的 js 甚至在加载 DOM 之前就已运行

`$(".item:first").addClass('first');`也可以正常工作。

**[也试试演示。](http://jsfiddle.net/62ZGK/)**

希望这会帮助你。如果您有任何问题，请随时提问。谢谢

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-10-09T10:58:59.017

你用这个代码

```
$(function(){
   $(".item:first-child").addClass("anyclass");
})

or
  $("div:first-child").addClass("anyclass"); 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2012-10-10T10:55:22.277

这是jQuery代码

```
<script>
$(document).ready(function(){
$('body .item:first').addClass('YOUR CLASS VALUE');
});
<script> 
```

问候， [http://www.santoshkori.com](http://www.santoshkori.com)

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2012-10-09T10:50:24.247

[在这里](http://jsfiddle.net/BrEcL/1/)看到jsfiddle

```
$(document).ready(function() {
    $('div:first').addClass('first');
}); 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2012-10-09T10:52:35.620

试试这个

***JS代码***

```
$(document).ready(function(){
   $('div.item')
     .eq(0).addClass('first').end()
     .eq(-1).addClass('last').end();
}); 
```

***[演示](http://jsfiddle.net/c28S2/5/)***

### 笔记

你需要用它`$(function() { ... })`来包装整个 jQuery 代码。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2012-10-09T10:56:15.303

你总是可以直接使用 CSS，尽管它是 CSS3。例如，您可以将当前的 CSS 替换为：

```
.item:nth-of-type(1), .item:nth-of-type(3)
{
   background-color:#0099FF;
} 
```

如果你只是想要 jQuery，那么你可以尝试：

```
$('.item:first').addClass('first');
$('.item:last').addClass('last'); 
```

# eclipse - Cloudfoundry Eclipse 插件：在服务器中看不到

> ID：12798321
> 
> 赞同：0
> 
> 时间：2012-10-09T10:43:48.377
> 
> 标签：eclipse, cloud-foundry

使用 Eclipse Indigo 更新到 CloudFoundry 1.2.0 后，我在 Eclipse 的新服务器定义中看不到任何 VMWare 服务器。这是一个错误还是我必须配置一些东西？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T11:36:46.017

Just did an eclipse juno J2EE update on 22oct2012 and this fixed the missing VMWare vFabric tc Server without needing to reinstall the VMWare component.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-22T10:06:33.883

尝试将您的 JDK 更新到 JDK7，当我将 JDK6 更新到 JDK7 时它对我有用

# hadoop - Nutch2.0依赖设置

> ID：12798325
> 
> 赞同：1
> 
> 时间：2012-10-09T10:43:58.860
> 
> 标签：hadoop, nutch, gora

我在部署模式下使用 Nutch2.0 抓取 URL：

1.  我用 Ant 构建 Nutch
2.  我将 Nutch-2.0.job 与 Hadoop 一起使用。

我运行了以下命令：

1.  `sudo -u hdfs hadoop jar /home/bluesky/nutch/runtime/deploy/apache-nutch-2.0.job org.apache.nutch.crawl.InjectorJob /user/bluesky/nutch/urls`

2.  `sudo -u hdfs hadoop jar /home/bluesky/nutch/runtime/deploy/apache-nutch-2.0.job org.apache.nutch.crawl.GeneratorJob`

3.  `sudo -u hdfs hadoop jar /home/bluesky/nutch/runtime/deploy/apache-nutch-2.0.job org.apache.nutch.fetcher.FetcherJob (batch -id)`

但是当我运行最后一个命令时，它在日志中给了我错误：

```
2012-10-09 15:35:04,292 ERROR org.apache.nutch.fetcher.FetcherJob: Unexpected error for http://www.imdb.com/title/tt0327056/
java.lang.AbstractMethodError: org.apache.gora.persistency.ListGenericArray.size()I
        at org.apache.avro.generic.GenericDatumWriter.getArraySize(GenericDatumWriter.java:142)
        at org.apache.avro.generic.GenericDatumWriter.writeArray(GenericDatumWriter.java:128)
        at org.apache.avro.generic.GenericDatumWriter.write(GenericDatumWriter.java:66)
        at org.apache.gora.avro.PersistentDatumWriter.write(PersistentDatumWriter.java:61)
        at org.apache.avro.generic.GenericDatumWriter.writeRecord(GenericDatumWriter.java:102)
        at org.apache.gora.avro.PersistentDatumWriter.writeRecord(PersistentDatumWriter.java:74)
        at org.apache.avro.generic.GenericDatumWriter.write(GenericDatumWriter.java:64)
        at org.apache.gora.avro.PersistentDatumWriter.write(PersistentDatumWriter.java:61)
        at org.apache.gora.util.IOUtils.serialize(IOUtils.java:170)
        at org.apache.gora.sql.store.SqlStore.setField(SqlStore.java:718)
        at org.apache.gora.sql.store.SqlStore.setObject(SqlStore.java:669)
        at org.apache.gora.sql.statement.MySqlInsertUpdateStatement.toStatement(MySqlInsertUpdateStatement.java:96)
        at org.apache.gora.sql.store.SqlStore.put(SqlStore.java:616)
        at org.apache.gora.mapreduce.GoraRecordWriter.write(GoraRecordWriter.java:60)
        at org.apache.hadoop.mapred.ReduceTask$NewTrackingRecordWriter.write(ReduceTask.java:514)
        at org.apache.hadoop.mapreduce.TaskInputOutputContext.write(TaskInputOutputContext.java:80)
        at org.apache.nutch.fetcher.FetcherReducer$FetcherThread.output(FetcherReducer.java:668)
        at org.apache.nutch.fetcher.FetcherReducer$FetcherThread.run(FetcherReducer.java:540)
2012-10-09 15:35:04,293 ERROR org.apache.nutch.fetcher.FetcherJob: fetcher throwable caught
java.lang.AbstractMethodError: org.apache.gora.persistency.ListGenericArray.size()I
        at org.apache.avro.generic.GenericDatumWriter.getArraySize(GenericDatumWriter.java:142)
        at org.apache.avro.generic.GenericDatumWriter.writeArray(GenericDatumWriter.java:128)
        at org.apache.avro.generic.GenericDatumWriter.write(GenericDatumWriter.java:66)
        at org.apache.gora.avro.PersistentDatumWriter.write(PersistentDatumWriter.java:61)
        at org.apache.avro.generic.GenericDatumWriter.writeRecord(GenericDatumWriter.java:102)
        at org.apache.gora.avro.PersistentDatumWriter.writeRecord(PersistentDatumWriter.java:74)
        at org.apache.avro.generic.GenericDatumWriter.write(GenericDatumWriter.java:64)
        at org.apache.gora.avro.PersistentDatumWriter.write(PersistentDatumWriter.java:61)
        at org.apache.gora.util.IOUtils.serialize(IOUtils.java:170)
        at org.apache.gora.sql.store.SqlStore.setField(SqlStore.java:718)
        at org.apache.gora.sql.store.SqlStore.setObject(SqlStore.java:669)
        at org.apache.gora.sql.statement.MySqlInsertUpdateStatement.toStatement(MySqlInsertUpdateStatement.java:96)
        at org.apache.gora.sql.store.SqlStore.put(SqlStore.java:616)
        at org.apache.gora.mapreduce.GoraRecordWriter.write(GoraRecordWriter.java:60) 
```

# oracle - 将行数据转换为不同的列

> ID：12798327
> 
> 赞同：0
> 
> 时间：2012-10-09T10:44:05.677
> 
> 标签：oracle, plsql, pivot

我有以下数据的福利表

```
id    |     Name
----------------
1     |  Shopping 
2     |  Travel 
3     |  Fuel 
4     |  Lifestyle 
5     |  Airline 
6     |  Entertainment 
7     |   Golf 
```

我还有另一个名为 Plan 的表，其中包含以下数据

```
Plan_id   Benefit_id
---------------------
101      |      1
101      |      2
101      |      3
102      |      2
102      |      4
102      |      6
102      |      1
103      |      7 
103      |      1
104      |      4
104      |      5 
```

现在，我想使用如下表显示数据。

```
Plan_id |  Shopping |Travel |Fuel  |Lifestyle  |Airline    |Entertainment|Golf
---------------------------------------------------------------------------------
101     |  yes      | yes   |  yes |   no      | no        | no          | no
102     |  yes      | yes   |  no  |   yes     | no        | yes         | no
103     |  yes      | no    |  no  |   no      | no        | no          | no
104     |  no       | no    |  no  |   yes     | yes       | no          | no 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-09T10:50:26.950

在没有看到完整的表结构或任何示例数据的情况下，您似乎可以将以下内容与聚合函数和`CASE`语句一起使用：

```
select 
  max(case when BENEFIT_CAT_NAME = 'Shopping' then value end) as Shopping,
  max(case when BENEFIT_CAT_NAME = 'Travel' then value end) as Travel,
  max(case when BENEFIT_CAT_NAME = 'Fuel' then value end) as Fuel,
  max(case when BENEFIT_CAT_NAME = 'Lifestyle' then value end) as Lifestyle,
  max(case when BENEFIT_CAT_NAME = 'Airline' then value end) as Airline,
  max(case when BENEFIT_CAT_NAME = 'Entertainment' then value end) as Entertainment
from yourtable 
```

或者根据您的 Oracle 版本，您可以使用以下`PIVOT`功能：

```
select *
from 
(
  select BENEFIT_CAT_NAME, value
  from yourtable
) x
pivot
(
  max(value)
  from BENEFIT_CAT_NAME in('Shopping', 'Travel', 'Fuel', 
                           'Lifestyle', 'Airline', 'Entertainment')
) p 
```

编辑，根据您的表结构和数据，您可以使用以下内容：

```
select p.plan_id,
  max(case when b.name = 'Shopping' then 'yes' else 'no' end) Shopping,
  max(case when b.name = 'Travel' then 'yes' else 'no' end) Travel,
  max(case when b.name = 'Fuel' then 'yes' else 'no' end) Fuel,
  max(case when b.name = 'Lifestyle' then 'yes' else 'no' end) Lifestyle,
  max(case when b.name = 'Airline' then 'yes' else 'no' end) Airline,
  max(case when b.name = 'Entertainment' then 'yes' else 'no' end) Entertainment,
  max(case when b.name = 'Golf' then 'yes' else 'no' end) Golf
from plan p
left join benefit b
  on p.benefit_id = b.id
group by p.plan_id
order by p.plan_id; 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!4/5caeb/7)

# maven - 自动化测试问题-testng 异常

> ID：12798332
> 
> 赞同：0
> 
> 时间：2012-10-09T10:44:17.010
> 
> 标签：maven, testng

我有 2 个模块都有各自的 pom.xmls，我想运行 module1 的 pom.xml 并使用要在 testng.xml 中运行的类名来运行 module2 的一些代码。现在这永远不会起作用，我得到一个 ClassNotFoundException。请帮忙。

```
Cannot find class in classpath: com.org.Console1
    at org.testng.xml.XmlClass.loadClass(XmlClass.java:76)
    at org.testng.xml.XmlClass.init(XmlClass.java:68)
    at org.testng.xml.XmlClass.<init>(XmlClass.java:54)
    at org.testng.xml.TestNGContentHandler.startElement(TestNGContentHandler.java:516)
    at com.sun.org.apache.xerces.internal.parsers.AbstractSAXParser.startElement(AbstractSAXParser.java:506)
    at com.sun.org.apache.xerces.internal.impl.XMLDocumentFragmentScannerImpl.scanStartElement(XMLDocumentFragmentScannerImpl.java:1322)
    at com.sun.org.apache.xerces.internal.impl.XMLDocumentFragmentScannerImpl$FragmentContentDriver.next(XMLDocumentFragmentScannerImpl.java:2715)
    at com.sun.org.apache.xerces.internal.impl.XMLDocumentScannerImpl.next(XMLDocumentScannerImpl.java:607)
    at com.sun.org.apache.xerces.internal.impl.XMLDocumentFragmentScannerImpl.scanDocument(XMLDocumentFragmentScannerImpl.java:488)
    at com.sun.org.apache.xerces.internal.parsers.XML11Configuration.parse(XML11Configuration.java:835)
    at com.sun.org.apache.xerces.internal.parsers.XML11Configuration.parse(XML11Configuration.java:764)
    at com.sun.org.apache.xerces.internal.parsers.XMLParser.parse(XMLParser.java:123)
    at com.sun.org.apache.xerces.internal.parsers.AbstractSAXParser.parse(AbstractSAXParser.java:1210)
    at com.sun.org.apache.xerces.internal.jaxp.SAXParserImpl$JAXPSAXParser.parse(SAXParserImpl.java:568)
    at com.sun.org.apache.xerces.internal.jaxp.SAXParserImpl.parse(SAXParserImpl.java:302)
    at javax.xml.parsers.SAXParser.parse(SAXParser.java:195)
    at org.testng.xml.SuiteXmlParser.parse(SuiteXmlParser.java:17)
    at org.testng.xml.SuiteXmlParser.parse(SuiteXmlParser.java:10)
    at org.testng.xml.Parser.parse(Parser.java:170)
    at org.testng.TestNG.initializeSuitesAndJarFile(TestNG.java:299)
    at org.testng.TestNG.run(TestNG.java:972)
    at org.apache.maven.surefire.testng.TestNGExecutor.run(TestNGExecutor.java:122)
    at org.apache.maven.surefire.testng.TestNGXmlTestSuite.execute(TestNGXmlTestSuite.java:88)
    at org.apache.maven.surefire.testng.TestNGProvider.invoke(TestNGProvider.java:104) 
```

这是我的 testng.xml

```
 <?xml version="1.0" encoding="UTF-8" standalone="no"?><suite allow-return-values="false" configfailurepolicy="skip" data-provider-thread-count="10" group-by-instances="false" junit="false" name="Suite" parallel="false" preserve-order="true" skipfailedinvocationcounts="false" thread-count="5">
<test allow-return-values="false" group-by-instances="false" junit="false" name="Test" preserve-order="true" skipfailedinvocationcounts="false">
    <classes>
    <class name="com.org.Console1">
    </class>

    </classes>
</test> <!-- Test --> 
```

这是我的 pom.xml

```
<plugin>
            <artifactId>maven-failsafe-plugin</artifactId>
            <version>2.8</version>
            <configuration>
                <suiteXmlFiles>
                    <suiteXmlFile>testng.xml</suiteXmlFile>
                </suiteXmlFiles>
            </configuration>

            <executions>
                <execution>
                    <goals>
                        <goal>integration-test</goal>
                        <goal>verify</goal>
                    </goals>

                </execution>
            </executions>
        </plugin> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T12:38:41.063

您无需指定套件仅用于测试。必须将surefire-plugin 配置为捕获所有java 类，默认是查找“*Test.java”，我个人不喜欢这种行为。

绒球片段：

```
 <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-surefire-plugin</artifactId>
                <version>2.12.4</version>
                <configuration>
                    <includes>
                        <include>**/*.java</include><!-- dont just run *Test.java-files, which is default for surefire -->
                    </includes>
                </configuration>
            </plugin> 
```

还请验证您的测试类是否处于正确的位置：

src/main/**测试**/com/org/Console1.java

它必须在那里，除非你想配置它（我不推荐）

# android - Android：在贝宝中重复出现

> ID：12798335
> 
> 赞同：0
> 
> 时间：2012-10-09T10:44:28.750
> 
> 标签：android, paypal-sandbox, recurring-billing

我正在制作一个应用程序，我必须在其中实施*定期付款*。`paypal`我已经实施了 paypal，但我不知道如何在 android 的 paypal 中实施定期付款。对此的任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T05:19:25.107

在android中无法进行定期付款。您只能进行一次付款，或者您必须一次又一次地付款..希望这会有所帮助..

# c# - 如何在 vb.net 中使用 GPGPU 或 GPU 处理 (CUDAFY)

> ID：12798340
> 
> 赞同：-1
> 
> 时间：2012-10-09T10:44:40.503
> 
> 标签：c#, vb.net, cuda, gpgpu, gpu

所以我正在尝试研究如何使用我的 GPU 在 vb.net 中进行处理。我发现了一个看起来很棒的 c# 教程（检查一下对于 c# 用户来说似乎很简单）。无论如何，我对 c# 的了解太差了，我无法将东西从 c# 转移到 vb.net。

这是链接：

[http://www.codeproject.com/Articles/202792/Using-Cudafy-for-GPGPU-Programming-in-NET](http://www.codeproject.com/Articles/202792/Using-Cudafy-for-GPGPU-Programming-in-NET)

如果有人可以将其转换为 vb.net 代码（这是有道理的），那就太好了。否则，如果有人可以根据本教程（或其他任何内容）给我一个非常简单的在 GPU 上运行矢量操作的 vb.net 示例，那可能会更好！:D

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-09T11:01:48.953

网上有很多 VB.NET 到 C# 的转换工具 [http://converter.telerik.com/](http://converter.telerik.com/)

例如：

```
CudafyModule km = CudafyModule.TryDeserialize(typeof(Program).Name);
if (km == null || !km.TryVerifyChecksums())
{
    km = CudafyTranslator.Cudafy(typeof(Program));
    km.Serialize();
} 
```

变成

```
Dim km As CudafyModule = CudafyModule.TryDeserialize(GetType(Program).Name)
If km Is Nothing OrElse Not km.TryVerifyChecksums() Then
    km = CudafyTranslator.Cudafy(GetType(Program))
    km.Serialize()
End If 
```

还有这样的应用：[http ://www.elegancetech.com/CSVB/CSVB.aspx?src=12](http://www.elegancetech.com/CSVB/CSVB.aspx?src=12)

但上述选项是免费的，可以帮助您了解正在发生的事情。

# android - 使用联系人 API 时，SG SIII 和注 2 的 JB 更新异常

> ID：12798345
> 
> 赞同：1
> 
> 时间：2012-10-09T10:44:49.640
> 
> 标签：android, sqlite, contactscontract

我正在开发一个使用 Android 联系人 API 的应用程序。我的代码工作正常，但最近 Play Market Feedback 中开始出现新错误。看起来这些错误只出现在 SGS3 和 Note2 上。

```
java.lang.RuntimeException: An error occured while executing doInBackground()
at android.support.v4.content.ModernAsyncTask$3.done(Unknown Source)
at java.util.concurrent.FutureTask$Sync.innerSetException(FutureTask.java:273)
at java.util.concurrent.FutureTask.setException(FutureTask.java:124)
at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:307)
at java.util.concurrent.FutureTask.run(FutureTask.java:137)
at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1076)
at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:569)
at java.lang.Thread.run(Thread.java:856)
Caused by: android.database.sqlite.SQLiteException: near ":<phonenumber>": syntax error (code 1): , while compiling: SELECT times_contacted, contacts_status_updates.status AS contact_status, phonetic_name, phonetic_name_style, ((CASE WHEN raw_contact_linkpriority1 > 0 THEN link_type1||'|' ELSE '' END)||(CASE WHEN raw_contact_linkpriority2 > 0 THEN link_type2||'|' ELSE '' END)||(CASE WHEN raw_contact_linkpriority3 > 0 THEN link_type3||'|' ELSE '' END)||(CASE WHEN raw_contact_linkpriority4 > 0 THEN link_type4||'|' ELSE '' END)||(CASE WHEN raw_contact_linkpriority5 > 0 THEN link_type5 ELSE '' END)) AS link, is_user_profile, snippet, raw_contact_linkpriority4, lookup, raw_contact_linkpriority5, contacts_status_updates.status_icon AS contact_status_icon, sec_custom_vibration, last_time_contacted, _id, photo_uri, display_name_source, photo_thumb_uri, agg_presence.chat_capability AS contact_chat_capability, photo_id, send_to_voicemail, display_name_alt AS display_name_reverse, name_raw_contact_id, custom_ringtone, photo_file_id, has_phone_number, link_type5, link_type4, link_type3, link_type2, contacts_status_updates.status_label AS contact_status_label, link_type1, raw_contact_linkpriority3, display_name, raw_contact_linkpriority2, raw_contact_linkpriority1, sort_key_alt, has_email, in_visible_group, dirty_contact, starred, link_count, sort_key, display_name_alt, agg_presence.mode AS contact_presence, contacts_status_updates.status_res_package AS contact_status_res_package, contacts_status_updates.status_ts AS contact_status_ts FROM view_contacts_restricted JOIN (SELECT contact_id AS snippet_contact_id, ifnull('['||(SELECT MIN(data1) FROM data JOIN raw_contacts ON (data.raw_contact_id = raw_contacts._id) JOIN phone_lookup ON data._id=phone_lookup.data_id WHERE search_index.contact_id=contact_id AND normalized_number LIKE '%+<phonenumber>%' OR normalized_number LIKE '%+<phonenumber>%')||']',snippet(search_index,'[',']','...',1,-10)) AS snippet FROM search_index WHERE search_index MATCH content:<phonenumber>* OR name:2024121E20201E14122412* UNION SELECT contact_id AS snippet_contact_id, NULL AS snippet FROM phone_lookup JOIN raw_contacts ON ( raw_contacts._id=raw_contact_id) WHERE normalized_number LIKE '%+<phonenumber>%') ON (_id=snippet_contact_id) LEFT OUTER JOIN agg_presence ON (_id = agg_presence.presence_contact_id) LEFT OUTER JOIN status_updates contacts_status_updates ON (status_update_id=contacts_status_updates.status_update_data_id)
at android.database.DatabaseUtils.readExceptionFromParcel(DatabaseUtils.java:184)
at android.database.DatabaseUtils.readExceptionFromParcel(DatabaseUtils.java:140)
at android.content.ContentProviderProxy.query(ContentProviderNative.java:366)
at android.content.ContentResolver.query(ContentResolver.java:372)
at android.content.ContentResolver.query(ContentResolver.java:315)
at android.support.v4.content.CursorLoader.loadInBackground(Unknown Source)
at android.support.v4.content.CursorLoader.loadInBackground(Unknown Source)
at android.support.v4.content.AsyncTaskLoader.onLoadInBackground(Unknown Source)
at android.support.v4.content.AsyncTaskLoader$LoadTask.doInBackground(Unknown Source)
at android.support.v4.content.AsyncTaskLoader$LoadTask.doInBackground(Unknown Source)
at android.support.v4.content.ModernAsyncTask$2.call(Unknown Source)
at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:305)
... 4 more 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T11:43:04.283

```
SQLiteException: near ":<phonenumber>": syntax error ... while compiling:
... WHERE search_index MATCH content:<phonenumber>* OR name:2024121E20201E14122412* ... 
```

`MATCH`适用于字符串。代码忘记在它们周围加上引号，如下所示：

```
... MATCH 'content:<phonenumber>* OR name:2024121E20201E14122412*' ... 
```

这似乎是该版本的 Android 联系人内容提供程序中的一个错误。

# php - PHP => ORM 与存储过程的高并发？

> ID：12798350
> 
> 赞同：1
> 
> 时间：2012-10-09T10:44:53.093
> 
> 标签：php

我们正在构建一个具有非常高并发的系统。

为了优化，我们考虑只使用存储过程，而不是使用 ORM 来简化我们的生活。

这是一件好事吗？

是否有任何 ORM 在性能方面真的值得，而且占用空间非常小？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T12:40:02.677

我不认为你会找到一个普遍的答案。

ORM 可以像几行代码一样简单，也可以像 Doctrine 一样复杂。

性能方面，我不确定您是否会看到使用存储过程和后端使用预准备语句的 ORM 之间有很大区别。可能值得进行基准测试以找出答案。

但是，从可维护性的角度来看，以在表中添加字段为例。在 ORM 中，这可以像单个文件编辑一样简单。对于存储过程，它可能意味着更新许多存储过程来解决它。

ORM 提供了更大的灵活性，因为它不会将您的所有数据绑定到数据库，并为您提供更多的可移植性。当然，它会根据您是否认为它们值得权衡这些好处。

也就是说，也没有什么可以阻止 ORM 调用存储过程。

# ios - IOS 本地化推送通知

> ID：12798351
> 
> 赞同：0
> 
> 时间：2012-10-09T10:45:01.190
> 
> 标签：ios, push, emoji

当我为推送通知设计原型时，我有一个带有非本地化字符串的 php 脚本推送到 iphone，在这里我还可以包含表情符号。

我现在使用 asp.net 创建了一个 web 服务，并在 IOS 端本地化了推送通知。

但我现在似乎无法让表情符号工作，我尝试了本地化字符串中的每个组合 og unicode 转义序列，还尝试将表情符号作为推送通知中的参数发送，并将其包含在本地化字符串“%@”中和“％C”但没有运气。

我卡在自动取款机上，所以任何让我回到正轨的提示都非常受欢迎

斯特凡

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T13:37:09.837

根据[JSON RFC](http://www.ietf.org/rfc/rfc4627.txt)，不属于“基本多语言平面”的字符可以使用 UTF-16 代理对进行转义。

例如，表情符号“THUMBS UP SIGN”是 Unicode codepoint `U+1F44D`，而 UTF-16 代理对是

```
0xD83D, 0xDC4D 
```

JSON Unicode 转义序列将是

```
\ud83d\udc4d 
```

如果您将其包含在推送通知有效负载的警报部分中，该符号将正确显示（我已经测试过）。

但是您也可以使用 UTF-8，对于“竖起大拇指”，这将是字节

```
0xF0, 0x9F, 0x91, 0x8D 
```

# entity-framework - 实体框架：从通用基类型映射内部属性

> ID：12798352
> 
> 赞同：2
> 
> 时间：2012-10-09T10:45:00.607
> 
> 标签：entity-framework, generics, database-migration, internalsvisibleto

我有相当复杂的 EF 映射现实场景，它似乎只有在我打破封装时才有效。也许有人会弄清楚如何正确地做到这一点，或者我们会接受这是一个错误。

我有 2 个项目，我们称它们`Domain`为`Persistance`. 包含 POCO 类，并通过属性`Domain`公开其内部。`Persistance``InternalsVisibleTo`

在内部`Domain`（目的是坚持`SomeProduct`）：

```
pubic class Company { ... }
pubic class InsuranceCompany : Company { ... }

pubic class Product<TCompany> where TCompany : Company
{
    ...
    public CustomValueType SomeProp { ... 
      // get/set from/into SomePropInternal 
    }
    internal string SomePropInternal { get;set; } 
    // exposed as internal to be accessible from EF mappings
}

public class SomeProduct : Product<InsuranceCompany> 
{
    ...
    public AnotherCustomValueType AnotherSomeProp { ... 
      // get/set from/into AnotherSomePropInternal 
    }
    internal string AnotherSomePropInternal { get;set; } 
    // exposed as internal to be accessible from EF mappings
} 
```

我需要以一张`SomeProduct`包含所有字段的表格结束。所以，在`Persistance`我们有：

里面`Persistance`：

所有的基本配置类型`Products`：

```
public class ProductEntityTypeConfiguration<TProduct, TCompany> : EntityTypeConfiguration<TProduct> 
    where TProduct : Product<TCompany> 
    where TCompany : Organization
{
    public ProductEntityTypeConfiguration() 
    {
        ...
        Property(_ => _.SomePropInternal)
            .IsRequired()
            .IsUnicode()
            .HasMaxLength(100);
    }
} 
```

对于某些产品：

```
public class SomeProductMap : ProductEntityTypeConfiguration<SomeProduct, InsuranceCompany>
{
    public SomeProductMap()
    {
        ToTable("Business.SomeProduct");

        Property(_ => _.AnotherSomePropInternal)
            .IsRequired()
            .IsUnicode()
            .HasMaxLength(100);
    }
} 
```

当我尝试使用这些映射添加迁移时，它会说`SomePropInternal is not declared on the type SomeProduct`.

**如果我将其更改`internal string SomePropInternal`为`public string SomePropInternal`迁移，则会创建。**这就是问题所在。我不想暴露那必须是私有财产。

因为`AnotherSomePropInternal`一切正常`internal`。

# android - 如何解决android中的黑屏？

> ID：12798361
> 
> 赞同：1
> 
> 时间：2012-10-09T10:45:17.923
> 
> 标签：android, android-activity, tabbar

我在我的 App 中使用 TabBar 。当我打开我的应用程序时它会出现黑屏。我使用服务器图像作为选项卡图标。我已经在 Handler 中使用了 postDelayed 方法，但它仍然会出现黑屏。请告诉我如何从我的应用程序中解决这个问题。

日志错误是：- 启动超时已过期，放弃唤醒锁！

HistoryRecord 的活动空闲超时{409d1880 com.education/.screens.More}

提前致谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-09T15:18:00.567

使用类**AsyncTask并在****doInBackground()**方法中加载图像。

# c# - 如何使用 DataContractJsonSerializer 序列化批量数据？

> ID：12798362
> 
> 赞同：2
> 
> 时间：2012-10-09T10:45:21.643
> 
> 标签：c#, c#-4.0, c#-3.0, datacontractserializer

我正在使用 DataContractJsonSerializer 序列化批量数据，但遇到错误即。**引发了“System.OutOfMemoryException”类型的异常。**

```
public static string MyDataContractJsonSerializer(object objToSerialize, Type objType)
{
        DataContractJsonSerializer ser = new DataContractJsonSerializer(objType);
        System.IO.MemoryStream st1 = new System.IO.MemoryStream();
        ser.WriteObject(st1, objToSerialize);  //Error encountering here.. Exception of type 'System.OutOfMemoryException' was thrown.
        byte[] barray = st1.ToArray(); 
        string abc = System.Text.Encoding.ASCII.GetString(barray);
        return abc;
} 
```

我该如何解决这个问题？

请告诉我序列化批量数据的任何替代方法。

请帮我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T12:36:26.727

这是因为要序列化的对象的大小是无限的。

如果它是一个大对象，你最好将它分解成更小的块，并一个一个地序列化它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T14:00:17.033

在您提到的评论部分中，您希望将序列化数据发送到客户端浏览器（javascript 客户端）。在这种情况下，您不应该将对象序列化为`MemoryStream`. 那是对内存的无用浪费。如果这是一个 ASP.NET 应用程序，您可以直接将对象序列化为`Response.OutputStream`.

例如，您的方法可能如下所示：

```
public static void MyDataContractJsonSerializer(
    object objToSerialize, 
    Type objType, 
    Stream output
)
{
    DataContractJsonSerializer ser = new DataContractJsonSerializer(objType);
    ser.WriteObject(output, objToSerialize);
} 
```

然后在调用方法时直接传递响应输出流。例如，如果您从通用 ASHX 处理程序调用此方法：

```
public class MyHandler : IHttpHandler
{
    public void ProcessRequest(HttpContext context)
    {
        context.Response.ContentType = "application/json";

        var objToSerialize = ...

        SerializerClass.MyDataContractJsonSerializer(
            objToSerialize, 
            objToSerialize.GetType(), 
            context.Response.OutputStream
        );
    }

    public bool IsReusable
    {
        get
        {
            return false;
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-10-24T06:33:30.517

您还可以序列化为流（即 FileStream）。这样您就可以序列化千兆字节的数据而不会出现 OutOfMemory 异常。

```
 public static void Serialize<T>(T obj, string path)
        {
            DataContractJsonSerializer serializer = new DataContractJsonSerializer(typeof(T));
            Stream stream = File.OpenWrite(path);
            serializer.WriteObject(stream, obj);
        }

        public static T Deserialize<T>(string path)
        {
            DataContractJsonSerializer serializer = new DataContractJsonSerializer(typeof(T));
            Stream stream = File.OpenRead(path);
            return (T)serializer.ReadObject(stream);
        } 
```

# python - Python中的random.sample和random.shuffle有什么区别

> ID：12798363
> 
> 赞同：4
> 
> 时间：2012-10-09T10:45:23.117
> 
> 标签：python, random

我有一个包含 1500 个元素的列表 a_tot，我想以随机方式将此列表分成两个列表。列表 a_1 将有 1300 个元素，而列表 a_2 将有 200 个元素。我的问题是关于用 1500 个元素随机化原始列表的最佳方法。当我将列表随机化后，我可以使用 1300 的切片和 200 的切片。一种方法是使用 random.shuffle，另一种方法是使用 random.sample。两种方法的随机化质量有何不同？列表 1 中的数据应该是随机样本以及列表 2 中的数据。有什么建议吗？使用随机播放：

```
random.shuffle(a_tot)    #get a randomized list
a_1 = a_tot[0:1300]     #pick the first 1300
a_2 = a_tot[1300:]      #pick the last 200 
```

使用样本

```
new_t = random.sample(a_tot,len(a_tot))    #get a randomized list
a_1 = new_t[0:1300]     #pick the first 1300
a_2 = new_t[1300:]      #pick the last 200 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-09T11:01:22.447

洗牌的来源：

```
def shuffle(self, x, random=None, int=int):
    """x, random=random.random -> shuffle list x in place; return None.

    Optional arg random is a 0-argument function returning a random
    float in [0.0, 1.0); by default, the standard random.random.
    """

    if random is None:
        random = self.random
    for i in reversed(xrange(1, len(x))):
        # pick an element in x[:i+1] with which to exchange x[i]
        j = int(random() * (i+1))
        x[i], x[j] = x[j], x[i] 
```

样品来源：

```
def sample(self, population, k):
    """Chooses k unique random elements from a population sequence.

    Returns a new list containing elements from the population while
    leaving the original population unchanged.  The resulting list is
    in selection order so that all sub-slices will also be valid random
    samples.  This allows raffle winners (the sample) to be partitioned
    into grand prize and second place winners (the subslices).

    Members of the population need not be hashable or unique.  If the
    population contains repeats, then each occurrence is a possible
    selection in the sample.

    To choose a sample in a range of integers, use xrange as an argument.
    This is especially fast and space efficient for sampling from a
    large population:   sample(xrange(10000000), 60)
    """

    # XXX Although the documentation says `population` is "a sequence",
    # XXX attempts are made to cater to any iterable with a __len__
    # XXX method.  This has had mixed success.  Examples from both
    # XXX sides:  sets work fine, and should become officially supported;
    # XXX dicts are much harder, and have failed in various subtle
    # XXX ways across attempts.  Support for mapping types should probably
    # XXX be dropped (and users should pass mapping.keys() or .values()
    # XXX explicitly).

    # Sampling without replacement entails tracking either potential
    # selections (the pool) in a list or previous selections in a set.

    # When the number of selections is small compared to the
    # population, then tracking selections is efficient, requiring
    # only a small set and an occasional reselection.  For
    # a larger number of selections, the pool tracking method is
    # preferred since the list takes less space than the
    # set and it doesn't suffer from frequent reselections.

    n = len(population)
    if not 0 <= k <= n:
        raise ValueError, "sample larger than population"
    random = self.random
    _int = int
    result = [None] * k
    setsize = 21        # size of a small set minus size of an empty list
    if k > 5:
        setsize += 4 ** _ceil(_log(k * 3, 4)) # table size for big sets
    if n <= setsize or hasattr(population, "keys"):
        # An n-length list is smaller than a k-length set, or this is a
        # mapping type so the other algorithm wouldn't work.
        pool = list(population)
        for i in xrange(k):         # invariant:  non-selected at [0,n-i)
            j = _int(random() * (n-i))
            result[i] = pool[j]
            pool[j] = pool[n-i-1]   # move non-selected item into vacancy
    else:
        try:
            selected = set()
            selected_add = selected.add
            for i in xrange(k):
                j = _int(random() * n)
                while j in selected:
                    j = _int(random() * n)
                selected_add(j)
                result[i] = population[j]
        except (TypeError, KeyError):   # handle (at least) sets
            if isinstance(population, list):
                raise
            return self.sample(tuple(population), k)
    return result 
```

如您所见，在这两种情况下，随机化基本上都是由 line 完成的`int(random() * n)`。因此，底层算法本质上是相同的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T10:58:26.287

`random.shuffle()`将给定`list`的就地洗牌。它的长度保持不变。

`random.sample()`从给定序列中挑选`n`项目而不进行替换（也可能是元组或其他任何东西，只要它有 a `__len__()`）并以随机顺序返回它们。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-04-26T19:43:37.907

*shuffle()*和*sample()*之间有两个主要区别：

1) Shuffle 将就地改变数据，因此其输入必须是可变序列。相比之下，sample 生成一个新列表，其输入可以更加多样化（元组、字符串、xrange、字节数组、集合等）。

2) Sample 让您可能做更少的工作（即部分洗牌）。

通过证明可以根据*sample()实现**shuffle()*来展示两者之间的概念关系是很有趣的：

 *```
def shuffle(p):
   p[:] = sample(p, len(p)) 
```

反之亦然，根据*shuffle()实现**sample(* ) ：

 *```
def sample(p, k):
   p = list(p)
   shuffle(p)
   return p[:k] 
```

这些在 shuffle() 和 sample() 的实际实现中都没有那么有效，但它确实显示了它们的概念关系。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-09T10:57:38.063

我认为它们完全一样，除了一个更新了原始列表，一个使用（只读）它。没有质量上的差异。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-09T10:59:24.710

两个选项的随机化应该一样好。我会说 go with `shuffle`，因为它对读者来说更清楚它的作用。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-09T11:08:17.673

```
from random import shuffle
from random import sample 
x = [[i] for i in range(10)]
shuffle(x)
sample(x,10) 
```

> shuffle 更新同一列表中的输出，但 sample 返回更新列表 sample 在 pic 工具中提供参数的 no，但 shuffle 提供相同长度的输入列表**

# magento - Magento 按过去 30 天内售出的产品排序

> ID：12798369
> 
> 赞同：0
> 
> 时间：2012-10-09T10:45:33.530
> 
> 标签：magento, sorting

如何按过去 30 天内的订购数量对产品（按类别）进行排序。

我找到[了这个教程](http://inchoo.net/ecommerce/magento/magento-products/sort-show-products-by-sold-quantity-in-magento/)，但这不是我真正想要的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T11:46:45.320

我的建议是创建一个计算这些数据的脚本。

sales_flat_order_item 表包含我认为您需要的信息（所有订购的商品，其中包括数量和日期）。将此计算的结果（ordered_quantity integer）放入产品的自定义新属性（'popularity'）中。该脚本可以通过 cron 作业运行，以防止客户遭受它的影响。

然后您需要做的就是将此属性用于排序并将其设置为类别的可用排序以及产品的默认排序（在 Magento 配置中）。

# android - 无法使视口元标记工作

> ID：12798370
> 
> 赞同：1
> 
> 时间：2012-10-09T10:45:35.740
> 
> 标签：android, mobile-safari, meta-tags, viewport

我目前正在开发一个网站，该网站旨在在 iPad 上显示最佳，但必须在大多数移动浏览器上很好地显示。

我以 2048px 的宽度为基础的 CSS，这是 iPad 3 在横向模式下的像素宽度。

然后我使用了如下所示的视口元标记：

```
<meta name="viewport" content="width=2048" /> 
```

在阅读了有关此主题的[Apple 文档](http://developer.apple.com/library/IOS/#documentation/AppleApplications/Reference/SafariWebContent/UsingtheViewport/UsingtheViewport.html)和[Android](http://developer.android.com/guide/webapps/targeting.html)文档后，我了解到移动浏览器首先在视口元标记定义的更大区域中呈现网页，然后将其缩小以匹配设备宽度。

这在 iPad 2 上运行良好，但在 iPhone、iPhone Retina 和 Galaxy Nexus 上宽度会溢出。我没有机会在 iPad 3 上测试该网站。

如何解释这种行为？

如果要在这个问题上添加任何细节，请告诉我。
在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T20:01:24.990

通读[http://developer.android.com/guide/webapps/targeting.html#ViewportScale](http://developer.android.com/guide/webapps/targeting.html#ViewportScale) 诀窍是找出设备宽度和视口比例之间的平衡。

具体来说：

> 计算默认初始比例以适应视口大小中的网页。因为默认视口宽度为 800 像素，如果设备屏幕分辨率小于 800 像素宽，则默认情况下初始比例小于 1.0，以适应屏幕上 800 像素宽的页面。

如果您将初始比例设置为 2，页面将被放大。如果您将其设置为 0.5，您将被缩小。min 和 max 也可以覆盖这些属性

# android - 在 Android 中获取 InflateException Google nexus Android 中的一个设备？

> ID：12798372
> 
> 赞同：0
> 
> 时间：2012-10-09T10:45:39.563
> 
> 标签：android, xml, android-layout, android-xml

单击按钮时，我只需加载一个视图翻转器 xml。此 xml 在所有设备上运行良好，但在 Google Nexus One 设备上报告崩溃。有时它运行时不会崩溃。下面是我的 XML：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/object_mainLayout"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:background="@android:color/white"
    android:orientation="vertical" >

    <RelativeLayout
        android:id="@+id/obj_top_bar_RL"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_margin="5dip" >

        <Button
            android:id="@+id/home"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentLeft="true"
            android:background="@drawable/home" />

        <Button
            android:id="@+id/sound"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_centerInParent="true"
            android:background="@drawable/sound" />

        <Button
            android:id="@+id/settings"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentRight="true"
            android:background="@drawable/setting" />
    </RelativeLayout>

    <RelativeLayout
        android:id="@+id/obj_bottom_bar_RL"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_alignParentBottom="true" >

        <Button
            android:id="@+id/next"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentRight="true"
            android:layout_marginRight="25dip"
            android:background="@drawable/next" />

        <Button
            android:id="@+id/prev"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentLeft="true"
            android:layout_marginLeft="25dip"
            android:background="@drawable/previous" />
         <RelativeLayout
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_below="@id/prev" >

            <LinearLayout
                xmlns:android="http://schemas.android.com/apk/res/android"
                xmlns:ads="http://schemas.android.com/apk/lib/com.google.ads"
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:orientation="vertical" >

                <com.google.ads.AdView
                    android:id="@+id/adView"
                    android:layout_width="fill_parent"
                    android:layout_height="wrap_content"
                    ads:adSize="BANNER"
                    ads:adUnitId="a1504ac5c4238ef"
                    ads:loadAdOnCreate="true" />
            </LinearLayout>
        </RelativeLayout>
    </RelativeLayout>

    <FrameLayout
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_above="@id/obj_bottom_bar_RL"
        android:layout_below="@id/obj_top_bar_RL"
        android:layout_centerHorizontal="true"
        android:layout_centerVertical="true" >

        <ViewFlipper
            android:id="@+id/flipper_object"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content" >

            <ImageView
                android:id="@+id/object_1"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:background="@drawable/object_1" />

            <ImageView
                android:id="@+id/object_2"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:background="@drawable/object_2" />

            <ImageView
                android:id="@+id/object_3"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:background="@drawable/object_3" />
        </ViewFlipper>
    </FrameLayout>

</RelativeLayout> 
```

日志如下：

```
Failed to inflate
android.view.InflateException: Binary XML file line #118: Error inflating class <unknown>
android.view.LayoutInflater.createView(LayoutInflater.java:518)
com.android.internal.policy.impl.PhoneLayoutInflater.onCreateView(PhoneLayoutInflater.java:56)
android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:568)
android.view.LayoutInflater.rInflate(LayoutInflater.java:623)
android.view.LayoutInflater.rInflate(LayoutInflater.java:626)
android.view.LayoutInflater.rInflate(LayoutInflater.java:626)
android.view.LayoutInflater.inflate(LayoutInflater.java:408)
android.view.LayoutInflater.inflate(LayoutInflater.java:320)
android.view.LayoutInflater.inflate(LayoutInflater.java:276)
com.android.internal.policy.impl.PhoneWindow.setContentView(PhoneWindow.java:212)
android.app.Activity.setContentView(Activity.java:1657)
com.flash.object.ObjectActivity.onCreate(ObjectActivity.java:78)
android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1722)
android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1784)
android.app.ActivityThread.access$1500(ActivityThread.java:123)
android.app.ActivityThread$H.handleMessage(ActivityThread.java:939)
android.os.Handler.dispatchMessage(Handler.java:99)
android.os.Looper.loop(Looper.java:123)
android.app.ActivityThread.main(ActivityThread.java:3839)
java.lang.reflect.Method.invokeNative(Native Method)
java.lang.reflect.Method.invoke(Method.java:507)
com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:841)
com.android.internal.os.ZygoteInit.main(ZygoteInit.java:599)
dalvik.system.NativeStart.main(Native Method)
10-09 15:58:25.201: Caused by: java.lang.reflect.InvocationTargetException
java.lang.reflect.Constructor.constructNative(Native Method)
java.lang.reflect.Constructor.newInstance(Constructor.java:415)
android.view.LayoutInflater.createView(LayoutInflater.java:505)
10-09 15:58:25.201:     ... 24 more
10-09 15:58:25.201: Caused by: java.lang.OutOfMemoryError: bitmap size exceeds VM budget
android.graphics.BitmapFactory.nativeDecodeAsset(Native Method)
android.graphics.BitmapFactory.decodeStream(BitmapFactory.java:460)
android.graphics.BitmapFactory.decodeResourceStream(BitmapFactory.java:336)
android.graphics.drawable.Drawable.createFromResourceStream(Drawable.java:697)
android.content.res.Resources.loadDrawable(Resources.java:1782)
android.content.res.TypedArray.getDrawable(TypedArray.java:601)
android.view.View.<init>(View.java:1967)
android.widget.ImageView.<init>(ImageView.java:112)
android.widget.ImageView.<init>(ImageView.java:108)
10-09 15:58:25.201:     ... 27 more 
```

请让我知道是否有人可以建议我..!!! :(

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T10:53:56.040

利用

`android:layout_below="@+id/prev`

始终使用“@+id/yourId”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T12:19:58.803

从 Stack Overflow 的一篇文章中得到了我的 OutOfMemoryException 的解决方案。是的，我已将该解决方案标记为向上箭头。

```
@Override
    protected void onDestroy() {
    super.onDestroy();

    unbindDrawables(findViewById(R.id.RootView));
    System.gc();
    }

    private void unbindDrawables(View view) {
        if (view.getBackground() != null) {
        view.getBackground().setCallback(null);
        }
        if (view instanceof ViewGroup) {
            for (int i = 0; i < ((ViewGroup) view).getChildCount(); i++) {
            unbindDrawables(((ViewGroup) view).getChildAt(i));
            }
        ((ViewGroup) view).removeAllViews();
        }
    } 
```

在 Activity 的 onDestroy() 方法上，调用 unbindDrawables() 方法传递对父视图的引用，然后执行 System.gc()。

这个 unbindDrawables() 方法递归地探索视图树并且：

删除所有背景可绘制对象上的回调删除每个视图组上的子项

# c - C - 将十进制数转换为压缩 BCD

> ID：12798375
> 
> 赞同：0
> 
> 时间：2012-10-09T10:45:44.990
> 
> 标签：c

如何在不使用 sprintf 的情况下在 C 中实现这些转换？

```
20 => 0x20
12 => 0x12 
```

目前我有：

```
int year = 12;
int month = 10;
int day = 9;
unsigned char date[3];

date[0] = year & 0xFF;
date[1] = month & 0xFF;
date[2] = day & 0xFF; 
```

日期将包含 { 0x0C, 0x0A, 0x09 } 但我希望它是 { 0x12, 0x10, 0x09 }

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-09T10:53:03.873

您只需要以十进制为基数检索每个数字，然后将其乘以十六进制的等效数字。

```
#include <stdio.h>

int hex(int v){
int total = 0;
int resultbase = 1;
while(v > 0 ){
    total += resultbase * (v % 10);
    resultbase *= 16;
    v /= 10;
}

return total;
}

 int  main(){
printf ("12 => %x, 20 => %x\n", hex(12), hex(20));
return 0; 
```

}

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-09T10:50:26.427

对于您使用的有限的 2 位数范围：

```
assert(year >= 0 && year < 100);
date[0] = (year / 10) * 16 + (year % 10); 
```

等等

你可以表达它，`((year / 10) << 4) | (year % 10)`好像这对你来说更有意义。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-03-27T09:52:08.600

在我的 PIC 单片机上使用 RTCC 时，我发现了同样的困难。以某种方式将 0 到 99 的值存储在一个字节中并使用较低和较高的 nybble 作为十进制值是很常见的。

所以来自 char 的二进制 nybbles 可能是：

```
0001 0010 (Binary BCD coded value)
 1    2   (Decimal BCD representation) ^ That would be 12 BCD but 18 Binary 
```

虽然 00010010 以常规二进制编码时为 18（[https://www.google.nl/webhp?sourceid=chrome-instant&ion=1&espv=2&ie=UTF-8#q=0b00010010+to+decimal](https://www.google.nl/webhp?sourceid=chrome-instant&ion=1&espv=2&ie=UTF-8#q=0b00010010+to+decimal)）

我使用下面的代码来解决这个问题。

```
#define HI_NIBBLE(b) (((b) >> 4) & 0x0F)
#define LO_NIBBLE(b) ((b) & 0x0F)

char BcdToDecimal(char bcd){
    return (char)((HI_NIBBLE(bcd)*10)+(LO_NIBBLE(bcd)));
}

char DecimalToBcd(char decimal){
    return (char) ((decimal / 10)*16)+(decimal % 10);
} 
```

# actionscript-3 - Flex：如何在 labelfield 属性已设置时截断 ComboBox 标签？

> ID：12798376
> 
> 赞同：0
> 
> 时间：2012-10-09T10:45:44.197
> 
> 标签：actionscript-3, apache-flex, combobox, flex4

我有一个 ComboBox，它的 dataprovider 设置为`ArrayCollection`. `dataProvider`包含 XML 数据。

```
<s:ComboBox id="articleComboBox" width="245" dataProvider="{_pageCollection}" labelField="title"  change="comboChange(event)"/> 
```

我想要一个功能，如果 的长度`itemlabel`大于某个值（例如 25），则必须截断标签并在末尾附加两个点（..）。

`Change`在ComboBox的情况下，我已将其实现为：

```
private function comboChange(event:*):void{
   var str:String = articleComboBox.textInput.text;
   if(str.length > 25){
      str = str.slice(0, 22) + "..";
      articleComboBox.textInput.text = str;
      }
} 
```

但它不起作用。文本仍然显示原始的“ `title`”字段`dataProvider`作为一个整体。

可能是由于`labelfield`mxml 中指定的属性。我在这里缺少什么？

任何建议将不胜感激。请帮忙...

这里是`dataProvider`（`_pageCollection`）：

```
<articles>
<article id="1146270" title="new article1" page_id="3205769"></article>
<article id="1144499" title="new article2"  page_id="3205771"></article>
<article id="1082813" title="All Dressed Up And No Place To Train…" page_id="3205773"></article>
<article id="1146024" title="The NCAA Doesn" page_id="3205776"></article>
<article id="1083014" title="The Chula Vista Olympic Training Center" page_id="3205777"></article>
</articles> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T11:18:08.113

您将为您的 ComboBox 创建一个自定义皮肤。在皮肤实现中，您将看到：

```
<s:TextInput id="textInput" enabled.disabled="false"
                 left="0" right="18" top="0" bottom="0" 
                 skinClass="spark.skins.spark.ComboBoxTextInputSkin"/> 
```

这是您需要的实际 TextInput。你可以玩它或修改`spark.skins.spark.ComboBoxTextInputSkin`它正在使用。

例如，添加`change`处理程序以在用户更改其内容时做出反应，以便您可以重新格式化字符串。

# wordpress - WAMP“连接被拒绝”HTTP 301 wordpress 站点

> ID：12798383
> 
> 赞同：0
> 
> 时间：2012-10-09T10:46:10.693
> 
> 标签：wordpress, apache, http, wamp, wampserver

我在本地主机上使用 wampserver 在我托管的网站上工作以进行测试等。通常当我将 wordpress 网站复制到我的开发 PC 时，我所要做的就是将文件复制到我的计算机，导入数据库并制作对本地数据库和 presto 进行一些小的更改 - 它在本地工作。

但是，对于一个特定的站点，我遇到了很大的问题。我已经能够找出问题的一部分，但我不知道如何解决它。

当我将站点移动到本地时，出现“连接被拒绝”错误消息。日志不显示任何特殊操作，除了：（在 access.log 中 - apache_error.log 中没有任何内容）

```
"GET /site.com HTTP/1.1" 301 241 
```

HTTP 301 消息是一条“永久移动”消息 - 但我终其一生都无法弄清楚它来自哪里。wordpress 设置正常，我的代码中没有任何特殊的标头引用...

301“永久移动”可能来自的任何想法都值得赞赏。谢谢！

# spring - Spring @RequestMapping 消耗字符集？

> ID：12798384
> 
> 赞同：3
> 
> 时间：2012-10-09T10:46:22.040
> 
> 标签：spring, character-encoding, httprequest

我正在尝试`@RequestMapping`与`consumes`-element 一起使用。读取它在请求的 -header 上工作的[API 文档。](http://static.springsource.org/spring/docs/3.1.x/javadoc-api/org/springframework/web/bind/annotation/RequestMapping.html)`Content-Type`但是，使用

```
@RequestMapping(consumes = "application/x-www-form-urlencoded;charset=UTF-8", value = "/test")
public void test() {
  :
} 
```

或者

```
@RequestMapping(consumes = "application/x-www-form-urlencoded;charset=ISO-8859-1", value = "/test")
public void test() {
  :
} 
```

没有什么区别。请求中的标头看起来像

```
Content-Type: application/x-www-form-urlencoded;charset=UTF-8 
```

或者

```
Content-Type: application/x-www-form-urlencoded 
```

`test()`将在所有四个可能的星座中被调用。

但是，这向我证明了 Spring 看到并尝试使用`charset`-part，如果我指定

```
@RequestMapping(consumes = "application/x-www-form-urlencoded;charset=UTF-x8", value = "/test")
public void test() {
  :
} 
```

在网络应用程序的启动（！）期间出现异常：

```
org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping#0': Initialization of bean failed;
    nested exception is java.nio.charset.UnsupportedCharsetException: UTF-x8 
```

请注意，关于`produces`-element 的文档也没有提到使用`charset`，但根据谷歌的一些使用它。

关于这里发生的事情或我做错了什么的任何线索？

顺便说一句，这是 Spring 3.1.1.RELEASE。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-10-09T19:59:03.143

我认为您已经回答了您的问题，所以从代码的角度来看，这更像是一个确认，为什么`charset`在解析映射时没有考虑到。

在深入研究 Spring 代码时，罪魁祸首似乎是[`MediaType#includes()`](http://grepcode.com/file/repo1.maven.org/maven2/org.springframework/spring-web/3.1.1.RELEASE/org/springframework/http/MediaType.java?av=f#468). 方法

更多的挖掘揭示了 a[`RequestMappingInfo`](http://static.springsource.org/spring/docs/3.1.x/javadoc-api/org/springframework/web/servlet/mvc/method/RequestMappingInfo.html)是与[`RequestMapping`](http://static.springsource.org/spring/docs/3.1.x/javadoc-api/org/springframework/web/bind/annotation/RequestMapping.html)方法的注释相关联的。这存储`RequestMappingInfo`了一系列`AbstractRequestCondition`对象，其中一个是在注释部分（即）中定义的对象。[`ConsumesRequestCondition`](http://static.springsource.org/spring/docs/3.1.x/javadoc-api/org/springframework/web/servlet/mvc/condition/ConsumesRequestCondition.html)[`MediaType`](http://static.springsource.org/spring/docs/3.1.x/javadoc-api/org/springframework/http/MediaType.html)`consumes``application/x-www-form-urlencoded;charset=UTF-8`

稍后，当发出请求时，它`ConsumesRequestCondition`有一个[内部`ConsumeMediaTypeExpression`类，其中包含一个`matchMediaType()`](http://grepcode.com/file/repo1.maven.org/maven2/org.springframework/spring-webmvc/3.1.1.RELEASE/org/springframework/web/servlet/mvc/condition/ConsumesRequestCondition.java?av=f#213)提取 的`MediaType`方法[并](http://grepcode.com/file/repo1.maven.org/maven2/org.springframework/spring-webmvc/3.1.1.RELEASE/org/springframework/web/servlet/mvc/condition/ConsumesRequestCondition.java?av=f#213)`HttpServletRequest`对照它自己的方法检查它`MediaType`以查看它是否包含在内。

如果您查看实现（第 426 到 428 行），它会在(ie ) 和(ie ) 相等`MediaType#includes()`时返回 true ，完全忽略在这种情况下保存剩余组合的 Map。`type``application``subtype``x-www-form-urlencoded``parameters``"charset","UTF-8"`

深入研究`produces`轨道似乎显示了类似的结果，但在这种情况下，它是所[`MediaType#isCompatibleWith()`](http://grepcode.com/file/repo1.maven.org/maven2/org.springframework/spring-web/3.1.1.RELEASE/org/springframework/http/MediaType.java#502)涉及的方法，并且再次，它仅达到`type`并且`subtype`如果它们相等。

如果你在谷歌上找到`produces`了字符集请求映射工作的证据，我会怀疑（除非他们改变了核心 Spring 的东西）

至于为什么这样设计，那是另一个问题:)

# jquery-animate - .hover 上的无限循环与 backgroundImage

> ID：12798385
> 
> 赞同：0
> 
> 时间：2012-10-09T10:46:25.027
> 
> 标签：jquery-animate

```
 <script type="text/javascript">
    $(document).ready(function() {

      $('.istina').hover(function() {
        animate_loop = function() {
          $(this).css('backgroundImage', 'url(<?php print $base_path . $directory ?>/img/istina-hover.png)').animate({backgroundImage: 'url(/sites/all/themes/ruh/img/istina.png)'}, 500, function() { animate_loop(); } );
      }, function() {
          $(this).css('backgroundImage', 'url(<?php print $base_path . $directory ?>/img/istina.png)');
        }
        }
      )
    }); 
```

我有一个类的链接，`<a class="istina">some text</a>`我想在悬停时更改它的背景图像，而悬停时我想在 istina.png 和 istina-hover.png 之间切换

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T10:49:54.700

你不需要任何javascript来做到这一点，它可以是CSS驱动的......

html:

```
<a class="istina">some text</a> 
```

css

```
#istina {  
background-image : url(istina.png); 
}

#istina :hover { 
background-image : url(istina-hover.png); 
} 
```

# c# - 使用 PostSharp 在 c# 中的构造函数上应用方面

> ID：12798391
> 
> 赞同：4
> 
> 时间：2012-10-09T10:46:54.723
> 
> 标签：c#, postsharp, aop, aspect

我正在研究 PostSharp 中的各种概念。

更新：

这是我的程序类

```
namespace myconstructor
{
    class Program
    {
        static void Main(string[] args)
        {
            createfolder();
            streamfolder();
        }
        public static void createfolder()
        {
            File.Create("E:/samplefile.txt");

        }
        public static void streamfolder()
        {
            StreamWriter sw = new StreamWriter("E:/samplestream.txt");
        }
    }

} 
```

我的方面类为

**1）一些跟踪方面类：**

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using PostSharp.Extensibility;
using PostSharp.Aspects.Dependencies;
using PostSharp.Aspects;
using PostSharp.Aspects.Advices;
using System.Reflection;
using System.Linq.Expressions;

namespace MyProviders
{
    [AttributeUsage(AttributeTargets.Assembly | AttributeTargets.Class | AttributeTargets.Event)]
    [MulticastAttributeUsage(MulticastTargets.Event, AllowMultiple = false)]
    [AspectTypeDependency(AspectDependencyAction.Commute,typeof(SomeTracingAspect))]
    [Serializable]
    public class SomeTracingAspect : EventLevelAspect
    {
        [OnMethodEntryAdvice, MethodPointcut("SelectConstructors")]
        public void OnConstructorEntry(MethodExecutionArgs args)
        {
            args.ReturnValue = "aspectfile"; 
        }

        IEnumerable<ConstructorInfo> SelectConstructors(EventInfo target)
        {
            return target.DeclaringType.GetConstructors(
                        BindingFlags.Instance | BindingFlags.Public | BindingFlags.NonPublic);
        }

        public override void RuntimeInitialize(EventInfo eventInfo)
        {
            base.RuntimeInitialize(eventInfo);

        }
    }

} 
```

**2)TraceAspectProvider 类：**

使用系统；使用 System.Collections.Generic；使用 System.Linq；使用 System.Text；使用 PostSharp.Aspects；使用 System.Reflection；

命名空间 MyProviders { 公共类 TraceAspectProvider : IAspectProvider { 只读 SomeTracingAspect aspectToApply = new SomeTracingAspect();

```
 public IEnumerable<AspectInstance> ProvideAspects(object targetElement)
    {
        Assembly assembly = (Assembly)targetElement;

        List<AspectInstance> instances = new List<AspectInstance>();
        foreach (Type type in assembly.GetTypes())
        {
            ProcessType(type, instances);
        }

        return instances;
    }

    private void ProcessType(Type type, List<AspectInstance> instances)
    {
        foreach (ConstructorInfo target in type.GetConstructors(BindingFlags.Instance | BindingFlags.Public | BindingFlags.DeclaredOnly))
        {
            instances.Add(new AspectInstance(target, aspectToApply));
        }

        foreach (Type nestedType in type.GetNestedTypes())
        {
            ProcessType(nestedType, instances);
        } 
```

} } }

我的方面文件为

```
 "C:\Program Files\PostSharp 2.1\Release\postsharp.4.0-x86-cil.exe" "D:\fileaspecttest\myconstructor.exe" /p:AspectProviders=MyProviders.AspectProvider,MyProviders /p:Output="D:\fileaspecttest\myaspect.exe" 
```

我收到错误

```
 error PS0125: An unexpected exception occured when executing user code: System.ArgumentNullException: Value cannot be null.
 error PS0125: Parameter name: type
 error PS0125:    at System.Activator.CreateInstance(Type type, Boolean nonPublic)
 error PS0125:    at ^7HtKTJrYMoHj.^kfEQVEmN.^jK8C2yxJ()
 error PS0125:    at PostSharp.Sdk.Utilities.ExceptionHelper.ExecuteUserCode[T](MessageLocation messageLocation, Func`1 userCode, Type[] acceptableExceptions) 
```

等待您的解决方案和回复

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T18:14:27.520

我认为您的主要问题是您正在尝试在第 3 方库（mscorlib）上应用方面。您可以查看[Dustin 的博客文章，了解如何执行此操作](http://programmersunlimited.wordpress.com/2011/07/27/applying-aspects-to-3rd-party-assemblies-using-postsharp/)，这可能会对您有所帮助。请注意官方不支持 PostSharp。

为了将方面应用于构造函数，您可能可以使用 a[`TypeLevelAspect`](http://doc.sharpcrafters.com/postsharp-2.1/Default.aspx##PostSharp-2.1.chm/html/T_PostSharp_Aspects_TypeLevelAspect.htm)和 a[`MulticastPointcut`](http://doc.sharpcrafters.com/postsharp-2.1/Default.aspx##PostSharp-2.1.chm/html/T_PostSharp_Aspects_Advices_MulticastPointcut.htm)并将[其`Targets`设置为 eg`InstanceConstructor`](http://doc.sharpcrafters.com/postsharp-2.1/Default.aspx##PostSharp-2.1.chm/html/T_PostSharp_Extensibility_MulticastTargets.htm)。

当您不能使用 a 时`TypeLevelAspect`（例如，您想将方面应用于事件）我以前使用过 a[`OnMethodEntryAdvice`](http://doc.sharpcrafters.com/postsharp-2.1/Default.aspx##PostSharp-2.1.chm/html/T_PostSharp_Aspects_Advices_OnMethodEntryAdvice.htm)和 a [`MethodPointCut`](http://doc.sharpcrafters.com/postsharp-2.1/Default.aspx##PostSharp-2.1.chm/html/T_PostSharp_Aspects_Advices_MethodPointcut.htm)。这允许您手动搜索构造函数。

```
[OnMethodEntryAdvice, MethodPointcut( "SelectConstructors" )]
public void OnConstructorEntry( MethodExecutionArgs args )
{
    ...
}

IEnumerable<ConstructorInfo> SelectConstructors( EventInfo target )
{
    return target.DeclaringType.GetConstructors(
        BindingFlags.Instance | BindingFlags.Public | BindingFlags.NonPublic );
} 
```

[可以在我的博客上找到](http://whathecode.wordpress.com/2012/03/26/null-checks-for-event-handlers-an-aspect-solution/)更详细的讨论我如何应用它来初始化构造函数中的事件。

这个类的最新完整源代码[可以在 github 上找到](https://github.com/Whathecode/Framework-Class-Library-Extension/blob/master/Whathecode.System.Aspects/InitializeEventHandlersAttribute.cs)。自博文发布以来，我进行了一些更改，但以构造函数为目标的原则保持不变。

# windows-phone-7 - WP7 播放音频类

> ID：12798393
> 
> 赞同：0
> 
> 时间：2012-10-09T10:47:01.223
> 
> 标签：windows-phone-7, audio-player

我读到 Windows Phone 7 提供了许多用于播放音频的类

[媒体元素](http://msdn.microsoft.com/en-us/library/system.windows.controls.mediaelement%28v=VS.95%29.aspx)

[音效](http://msdn.microsoft.com/en-us/library/microsoft.xna.framework.audio.soundeffect.aspx)

[媒体播放器](http://msdn.microsoft.com/en-us/library/dd254850.aspx)

[背景音频播放器](http://msdn.microsoft.com/en-us/library/windowsphone/develop/hh220901%28v=vs.92%29.aspx)

它们之间有什么区别？我应该选择什么

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-09T13:02:11.157

`MediaElement`是一个位于可视化树中的控件（这意味着您需要将它放在页面上的某个位置，即使它被隐藏，否则它不会播放）。您可以从独立存储、您的 XAP 文件或网络上流式传输歌曲。可以在[此处查看](http://msdn.microsoft.com/en-us/library/cc189080%28v=vs.95%29.aspx)支持的文件类型。

`SoundEffect`是一个`XNA`组件，通常用于循环背景音乐或枪声。这类似于`MediaElement`它不会改变用户的`MediaPlayer`设置，但两者之间的区别在于`MediaElement`您`SoundEffect`可以同时进行多个`SoundEffects`播放，而您只能`MediaElement`在页面上拥有一个控件。另外，我相信只`WAV`支持文件。即使它是一个 XNA 组件，它[也可以在 Silverlight 中使用](http://www.developer.nokia.com/Community/Wiki/How_to_play_audio_sounds_in_silverlight_using_XNA_library)。

`MediaPlayer`是系统范围的播放器。它是您从 播放曲目时使用的那个`Music and Video Hub`，以及当您按下手机的音量按钮并查看时您控制的那个`Universal Volume Control`（覆盖层与播放、暂停、下一个和上一个按钮一起下降）。如果用户当前正在收听曲目并且他们运行您的应用程序，该应用程序将接管`MediaPlayer`，则用户的曲目将停止并替换为您的曲目。

`BackgroundAudioPlayer`旨在让用户离开您的应用但继续播放应用的音乐。这就是主音乐播放器所做的事情，这就是为什么您可以关闭`Music and Video hub`，但仍继续播放音乐的原因。

您使用什么取决于您的应用程序是什么以及您需要什么。没有一刀切的推荐。此外，您应该阅读应用指南，以确保您的应用不会对无法通过市场提交的音频进行任何处理。

# c++ - 在 C++ 中将字符串输入到无符号短数组中

> ID：12798395
> 
> 赞同：-1
> 
> 时间：2012-10-09T10:47:00.760
> 
> 标签：c++

我必须将一个字符串输入到一个无符号短数组中。

这是我的实现：

```
unsigned short strFile [ 200 ] = {0};
cin >> strFile; 
```

我已经包括了`iostream.h`标题。

但我总是得到一个错误：

> 错误 C2678：二进制“>>”：未找到采用“std::istream”类型的左侧操作数的运算符

任何人都知道我应该如何解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-09T10:49:19.070

没有一种字符串可以与`unsigned short[]`.

有普通的字符串`char []`（在 C++ 中，`string`除了常量外，你应该始终将其保留在其中！）和宽字符串，即`wchar_t[]`（在 C++ 中，您应该始终将其保留在 中`wstring`）。并且 C++11 增加了`char16_t`and`char32_t`和它们对应的`u16string`and `u32string`。

您可以从普通输入流中读取普通字符串，例如`cin`. *您可以从宽*输入流中读取宽字符串，例如`wcin`.

`wchar_t`在 C 中曾经是 typedef `unsigned short`，但 C++ 要求它是一个单独的类型。ISO/IEC 14882:2003 3.9.1/5：

> Type`wchar_t`是一种独特的类型，其值可以表示支持的语言环境 (22.1.1) 中指定的最大扩展字符集的所有成员的不同代码。

# silverlight - 如何修复错误“调试资源字符串不可用”

> ID：12798403
> 
> 赞同：0
> 
> 时间：2012-10-09T10:47:28.367
> 
> 标签：silverlight, windows-phone-7, xaml, hyperlink

我希望这不是一个非常愚蠢的问题。我在运行中有文本块我想添加超链接。

有点像这样

```
<Hyperlink NavigateUri="http://google.com">
<Run Text="http://google.com"/>
</Hyperlink> 
```

我尝试了不同的方法，但每次我必须添加超链接时，都会发生错误。

`Error 2 [TextElementCollection_TypeNotSupportedInHost] Arguments: Debugging resource strings are unavailable. Often the key and arguments provide sufficient information to diagnose the problem.`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T14:59:30.733

该`TextBlock`控件不支持`Hyperlink`子控件。您应该使用 a`RichTextBox`代替，如下所示：

```
<RichTextBox IsReadOnly="True">
    <Paragraph>
        Displaying text with
        <Hyperlink NavigateUri="http://www.google.com" TargetName="_blank">hyperlink</Hyperlink>.
    </Paragraph>
</RichTextBox> 
```

# c# - 如何获取光标处标识符的类型

> ID：12798405
> 
> 赞同：1
> 
> 时间：2012-10-09T10:47:39.460
> 
> 标签：c#, visual-studio-2012, visual-studio-extensions, vs-extensibility

我正在为 Visual Studio 2012 编写一个包含 ICompletionSourceProvider 的扩展。我需要确定光标所在位置的标识符类型。我尝试了以下方法：

1.  使用 IClassifierAggregatorService，我能够确定当前单词是标识符，但没有其他信息。
2.  使用DTE2，我可以在当前位置获得一个CodeElement，但是模型不完整，我能获得的最接近的是当前方法（CodeFunction）

很明显，Visual Studio 有这些信息，但我该如何检索它呢？我只需要它在编辑 C# 文件时工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T16:18:50.130

Visual Studio 2012 不提供公共 API 来访问此信息。我们有，是的，但你不能得到它。您可能想看看[Roslyn CTP](http://msdn.microsoft.com/en-us/vstudio/roslyn.aspx)，我们正在开发一组 API 来支持与您自己的场景完全一样的场景。

披露：我在 Roslyn 团队。

# c# - 如何在课堂上调用模型？

> ID：12798407
> 
> 赞同：-2
> 
> 时间：2012-10-09T10:47:51.837
> 
> 标签：c#, asp.net-mvc

我有一个模特女巫在我的网站上持有不同的值，我目前正在尝试检索值令牌。

我用以下方式调用我的模型：

```
HoldToken t = new HoldToken();
string token = t.Token; 
```

这就是模型的外观

```
namespace MvcResComm.Models
{

    public class HoldToken
    {
        public string Token { get; set; }
    }
} 
```

我总是收到 null 作为我返回的令牌。我认为这是因为我使用了`new`关键字。

如何在不更新模型`HoldToken`的情况下实例化模型？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T10:52:16.197

最有可能的是，您正在使用无构造函数的类和自动属性。

我猜你没有设置 HoldToken 自动属性，这就是你得到空值的原因。

添加一个新的无参数构造函数并确保以某种方式初始化 Token 成员。

```
public HoldToken() 
{
   // Set value of token here
   // Guessing at how you'd instantiate it.
   Token = new Token();
} 
```

# iphone-5 - 如何在 iPhone 5 上关闭 Letterbox？

> ID：12798408
> 
> 赞同：0
> 
> 时间：2012-10-09T10:47:59.277
> 
> 标签：iphone-5

大小看起来与 iPhone 4 相同，并且在应用程序的顶部和下方有两个黑条。该区域是实际预览还是黑条内的区域是实际预览？

![在此处输入图像描述](../Images/f9ea6fd9a35bb819d8771f643a76e797.png)

并在表格视图下方

![在此处输入图像描述](../Images/dde3da18e2be8354e516dd8845a9cd95.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T11:59:55.847

该死的没有人想回答.....看起来如果我只是为 Retina 4 英寸添加启动画面，它会关闭信箱。

# java - 什么时候必须在 Java 中使用默认构造函数和参数化构造函数？

> ID：12798416
> 
> 赞同：4
> 
> 时间：2012-10-09T10:48:11.447
> 
> 标签：java, constructor

很多时候我都有一个异常说“缺少默认构造函数的实现”。很多时候，参数化构造函数的定义本身就可以完成所有工作。我想知道在什么条件下会发生这种情况。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-09T10:50:38.677

编译器永远不会强制存在默认构造函数。您可以根据需要使用任何类型的构造函数。

对于某些*库*或*框架*，类可能需要具有默认构造函数，但这不是由编译器强制执行的。

您可能会看到的问题是，如果您有一个带有自定义构造函数的类，并且您的构造函数主体中没有隐式`super()`调用。在这种情况下，编译器将引入对超类默认构造函数的调用。如果超类没有默认构造函数，那么*您的类*将无法编译。

```
public class MyClass extends ClassWithNoDefaultConstructor
    public MyClass() {
        super(); //this call will be added by the compiler if you don't have any super call here
        // if the super class has no default constructor the above line will not compile
        // and removing it won't help either because the compiler will add that call
    }
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-09T10:56:33.170

如果类中不存在构造函数，则在编译时添加一个默认构造函数。

如果类中存在任何一个参数化构造函数，则不会在编译时添加默认构造函数。

因此，如果您的程序有任何包含参数的构造函数并且没有指定默认构造函数，那么您将无法使用默认构造函数创建该类的对象。

例如：

```
class A{

A(int a){}

}

A a = new A() -----> Error.

-------------------------------------------------------

class A{

A(int a){}

A(){}

}

A a = new A() -----> It will work.

-----------------------------------------------------------

class A{

}

A a = new A() -----> It will work. 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-09T11:02:51.090

正如**Joachim Sauer**所说，当您使用 spring 之类的框架时，除了参数化构造函数之外，提供默认构造函数很重要/有时需要。因为如果你想通过依赖注入在另一个类中注入你的类对象，那么这个类应该有默认的构造函数。

否则你的依赖注入将失败。

这只是我遇到默认构造函数重要性的一种情况

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-09T11:15:39.180

目前尚不清楚您是在谈论运行时异常还是编译错误。

只有当您的代码（或您的代码调用的某些库代码）尝试使用反射来创建某个类的实例，并且不小心尝试使用不存在的构造函数时，才会发生运行时异常。（而且我怀疑异常消息会使用术语“默认构造函数”......）

发生编译错误是因为您显式或隐式尝试调用不存在的“无参数”构造函数。有三种情况'

```
// case #1
new Foo();

// case #2
public Bar extends Foo {
  public Bar() {
    super();
  }
}

// case #3
public Bar extends Foo {
  public Bar() {
    // no explicit 'this' or 'super' call.
  }
} 
```

前两个示例非常明显地调用了无参数构造函数。

最后一个示例调用无参数构造函数，因为如果您在构造函数的开头没有显式`super`或“调用”，JLS 表示将发生调用……除了构造函数 for 之外的所有情况。`this``super()``Object`

* * *

最后，你回答标题中的问题：

> 什么时候必须在 Java 中使用默认构造函数和参数化构造函数？

严格来说，拥有**默认**构造函数从来都不是强制性的。必须有一个**无参数**构造函数（显式声明或默认）......只有当它被显式或隐式调用时。

（可能有一些库/框架*假设*您的类具有无参数构造函数，但这超出了我们可以回答的范围。此外，这样的假设将使得可以反射地创建实例......我已经涵盖了。）

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-09T10:56:07.867

通常，当类的实例通过反射创建时（例如在反序列化时），可能会发生这种情况。如果你的类是可序列化的或者它的实例可以通过反射机制创建，你应该定义默认构造函数。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2018-12-16T08:35:50.983

*   案例1：
    如果您不编写构造函数，则将添加默认构造函数（由编译器），您可以使用它创建对象。但是如果你写了一个参数化的构造函数，并且想要创建像这样的对象

    `ClassName ObjName = new ClassName();`

    那么您必须手动添加默认构造函数。

*   案例2（继承）：如果您的子类构造函数没有
    显式调用父类构造函数（在第一行本身），那么编译器将为您完成。

    `class ChildClass extends ParentClass{ ChildClass(){ //super() added by compiler. } }`

    现在同样的事情，

    如果父类中没有构造函数，则将调用精细的默认构造函数（由编译器添加）。

    但是如果父类有一个参数化的构造函数，那么就没有默认构造函数，所以你会得到你的错误。

*   当你有一个参数化的构造函数和

    1.  想要创建像案例 1 一样的对象。

    2.  继承这个类并且不进行显式调用

        `super(parameter,...);`

        在 ChildClass 构造函数的第一行。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-06-04T12:54:41.783

编译器将在编译代码时添加默认构造函数，但是当您在代码中声明参数化构造函数时，将省略默认构造函数。

当默认构造函数被参数化构造函数重载时，使用默认构造函数而不是参数化构造函数创建对象时，代码中需要有一个默认构造函数。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2018-12-16T07:27:08.107

当您使用需要创建 Spring bean 实例且 bean 类只有参数化构造函数的框架（例如：Spring 框架）时，需要默认构造函数。

```
@Component
public class Bank {
    private String bankName;
    public Bank(String bankName){
        this.bankName = bankName;
    }
    @Override
    public String toString() {
    return this.bankName;
   }
}

public class Test {
    public static void main(String[] args) {
        ApplicationContext context = new 
AnnotationConfigApplicationContext(SpringConfig.class);
        Bank bank = context.getBean(Bank.class);    
        System.out.println(bank);
    }
} 
```

将抛出一个错误，要求实现默认构造函数

# vb.net - 如何在 vb.net 中只检查空的可见 Maskedtextboxes？

> ID：12798417
> 
> 赞同：0
> 
> 时间：2012-10-09T10:48:19.637
> 
> 标签：vb.net

我有大约 50 个 Maskedtextboxes，其中只有几个是可见的。我需要的是只检查可见的是否为空。

我使用此代码检查所有 Maskedtextboxes：

```
 Dim empty = TabLABOR.Controls.OfType(Of MaskedTextBox)().Where(Function(txt) txt.Text.Length = 0)
    If empty.Any Then
        MessageBox.Show(String.Format("Please fill all fields",
                        String.Join(",", empty.Select(Function(txt) txt.Name))))
    Else
        TabControlBlockD.SelectTab(TabMATERIALS)
    End If

End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T14:32:42.757

你应该像下面这样为每个使用

```
dim myfrm as MyCurrentForm() 
```

然后

```
for Each item As System.Windows.Forms.Control In myfrm.Controls
        If item.GetType Is GetType(System.Windows.Forms.MaskedTexbox) Then
            For Each mboxes As MaskedTexbox In item.Controls
                If MaskedTexbox.text = "" AND maskedTextbox.visible = true Then
                  //Make deltu king of the world
                 End If
            Next
        End If
    Next 
```

那应该行得通。

编辑：

# android - Android 为 AppWidget 设置不同的布局

> ID：12798418
> 
> 赞同：2
> 
> 时间：2012-10-09T10:48:20.793
> 
> 标签：android, android-appwidget, android-4.2-jelly-bean

我在 Android 4.1.1 中的 AppWidget 有一个非常奇怪的问题。我目前正在开发一个音乐播放器应用程序及其小部件。当歌曲更改、播放器启动和停止时，必须更新小部件。它有一个必须与应用程序中的播放列表同步的 ListView。

在 Jelly Bean 之前，一切正常。在我的测试设备从 4.0.3 升级到 4.1.1 后，每当以编程方式强制更新小部件时，Android 消息小部件的布局都会设置为我的小部件几秒钟！我还在 4.1 的模拟器中检查了这个案例，效果很好。

我使用那段代码来强制我的小部件更新：

```
AppWidgetManager man = AppWidgetManager.getInstance(applicationContext);
int[] ids = man.getAppWidgetIds(
        new ComponentName(applicationContext, MuzikLargeWidgetProvider.class));
Intent updateIntent = new Intent();
updateIntent.setAction(AppWidgetManager.ACTION_APPWIDGET_UPDATE);
updateIntent.putExtra(AppWidgetManager.EXTRA_APPWIDGET_IDS, ids);
applicationContext.sendBroadcast(updateIntent); 
```

这是我的 onUpdate 方法

```
public void onUpdate(Context context, AppWidgetManager appWidgetManager,
        int[] appWidgetIds) {
    this.context = context;
    this.appWidgetManager = appWidgetManager;

    ComponentName thisWidget = new ComponentName(context,
            MuzikLargeWidgetProvider.class);
    int[] allWidgetIds = appWidgetManager.getAppWidgetIds(thisWidget);

    for (int appWidgetId : allWidgetIds) {
        Intent svcIntent = new Intent(context, UpdateService.class);
        svcIntent.putExtra(WidgetActions.DATA_WIDGET_ID, appWidgetId);
        context.startService(svcIntent);
    }

    super.onUpdate(context, appWidgetManager, appWidgetIds);
} 
```

我正在使用一个静态内部类的服务 (UpdateService) 来更新我的小部件：

```
public static class UpdateService extends IntentService {

    public UpdateService() {
        super("UpdateService");
    }

    @Override
    public IBinder onBind(Intent intent) {
        return null;
    }

    public RemoteViews buildUpdate(Context context, int widgetId) {

        final RemoteViews views = new RemoteViews(context.getPackageName(),
                R.layout.muzikwidget_large);

        return views;
    }

    @Override
    protected void onHandleIntent(Intent intent) {
        // Build the widget update
        RemoteViews updateViews = buildUpdate(this, intent.getIntExtra(WidgetActions.DATA_WIDGET_ID, 0));

        // Push update for this widget to the home screen
        ComponentName thisWidget = new ComponentName(this, MuzikLargeWidgetProvider.class);
        AppWidgetManager manager = AppWidgetManager.getInstance(this);
        manager.updateAppWidget(thisWidget, updateViews);
    }
} 
```

buildUpdate 方法做了更多的事情（设置小部件按钮的意图，设置文本视图等），但它们与我的问题无关。我在华硕 TF 300 TG 平板电脑（未植根）上遇到了这个问题。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T14:33:01.163

问题已解决。我修改了用于强制小部件更新的代码片段。这是有效的：

```
AppWidgetManager man = AppWidgetManager.getInstance(applicationContext);
int[] ids = man.getAppWidgetIds(
        new ComponentName(applicationContext, MuzikLargeWidgetProvider.class));

for (int appWidgetId : ids) {
    Intent svcIntent = new Intent(applicationContext, UpdateService.class);
    svcIntent.putExtra(WidgetActions.DATA_WIDGET_ID, appWidgetId);
    applicationContext.startService(svcIntent);
} 
```

不调用 Widget 的 onUpdate 方法，直接调用 UpdateService。似乎有时应该避免 sendBroadcast。

编辑

如果您需要使用广播来更新您的小部件，这似乎是实现此目的的正确方法：

```
AppWidgetManager man = AppWidgetManager.getInstance(applicationContext);
int[] ids = man.getAppWidgetIds(
        new ComponentName(applicationContext, MuzikLargeWidgetProvider.class));
Intent updateIntent = new Intent(applicationContext, MuzikLargeWidgetProvider.class);
updateIntent.setAction(AppWidgetManager.ACTION_APPWIDGET_UPDATE);
updateIntent.putExtra(AppWidgetManager.EXTRA_APPWIDGET_IDS, ids);
applicationContext.sendBroadcast(updateIntent); 
```

# mysql - 在这个用例中如何设计数据库？

> ID：12798420
> 
> 赞同：0
> 
> 时间：2012-10-09T10:48:24.737
> 
> 标签：mysql, database, database-design

假设我有一个名为 的应用程序`ReportGenerator`，它允许用户输入多少个字段以及字段值。例如，他们可以有一个`jobApplicationReport`，所以，他们可以定义几个这样的字段：`jobTitle`, `expectedSalary`.

所以，在数据库中，我会有这样的东西： 表名：`UserReport`并有这些字段：`id`, `title`, `fields`。

数据会是这样的： `1`, `jobApplicationReport`,`jobTitle,expectedSalary`

而且，我有一个字段`UserReportData`，，，，`id`数据 会像这样 ：，，，`userReportId``value``1``1``jobTitle:programmer,expectedSalary:200K`

`2`, `1`,`jobTitle:projectManager,expectedSalary:400K`

所以，我的问题是， 中的`value`字段`UserReportData`似乎很愚蠢，因为它不能充分利用 SQL 数据库，也不能使用索引来提高性能。

我可能认为另一种解决方案是，当用户添加新报告时，我可以再创建一个表。在这个例子中，我可能没有抽象`UserReportData`表，而是有一个`UserReportData_jobApplicationReport`表。并拥有我想要的尽可能多的领域。

但是一个用户可能有很多报告，所以，我的数据库会有很多表。有什么解决方案可以解决这个问题？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T11:07:53.363

您可以为 report_fields: `report_id,field_id,value` 和字段创建一个额外的表： `field_id,name`

因此，在字段中，您将拥有：

```
1, jobTitle
2, expectedSalary 
```

和你的报告字段：

```
1,1,programmer
1,2,200k
2,1,projectManager
2,1,400k 
```

# sql - SQL Server 视图语法不正确

> ID：12798421
> 
> 赞同：0
> 
> 时间：2012-10-09T10:48:41.817
> 
> 标签：sql, sql-server-2008, view, pivot-table

我有以下数据库：

![我的数据库](../Images/9257f1fc3215b7b06603769588be304a.png)

我想创建连续提供此信息的视图：

```
document_id    Creator    Manager    Special    Archive 
```

(Creator,Manager,Special,Archive) 是 AuthorityName 值

所以首先我创建了一个视图：

```
SELECT     dbo.DocumentAuthorities.DocumentId, dbo.DocumentAuthorities.AuthorityId,   dbo.Authorities.AuthorityName, dbo.Authorities.AuthorityLevel
FROM         dbo.DocumentAuthorities CROSS JOIN
                          dbo.Authorities 
```

然后我尝试了这个：

```
 SELECT * FROM 
    (
    SELECT Documents.Id, AuthorityName.AuthorityId, AuthorityName.AuthorityName
    FROM AuthorityName CROSS JOIN Documents
     ) src 
     PIVOT
     ( 
        max(dbo.AuthorityName.AuthorityName) 
        FOR AuthorityName 
        IN ([Creator],[Director],[Special],[Archive])
      ) 
```

但我收到此错误：

> 消息 102，级别 15，状态 1，第 11 行 ')' 附近的语法不正确。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T10:50:18.403

试试这个：

您必须为数据透视表提供别名

```
SELECT * FROM 
(
SELECT Documents.Id, AuthorityName.AuthorityId, AuthorityName.AuthorityName
FROM AuthorityName CROSS JOIN Documents
 ) src 
 PIVOT
 ( 
    max(dbo.AuthorityName.AuthorityName) 
    FOR AuthorityName 
    IN ([Creator],[Director],[Special],[Archive])
  ) P -- < HERE 
```

# ruby - Cloudfoundry 升级错误 - 由 Chef 引起

> ID：12798422
> 
> 赞同：0
> 
> 时间：2012-10-09T10:48:42.427
> 
> 标签：ruby, ubuntu, chef-infra, cloud-foundry

我按照自述文件`https://github.com/cloudfoundry/vcap`

它应该可以正常工作......但我得到了这样的错误：

* * *

## ![在此处输入图像描述](../Images/92e8b24c404cb096b6c634bebb112451.png)

有谁知道发生了什么？我在 Ubuntu10.04 上运行...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T08:29:31.167

我用最新版本的VCAP没有遇到这个问题，你有多久没有在Ubuntu实例上更新VCAP源的副本了？

您还可以发布您正在使用的配置文件吗？如果有的话。

# c# - 如何以 OpenXML 格式更快地阅读

> ID：12798423
> 
> 赞同：5
> 
> 时间：2012-10-09T10:48:43.837
> 
> 标签：c#, .net, excel, c#-4.0, openxml

当我使用 OLEDB 时，从 Excel 表中读取 3200 行只需要 2 - 3 秒。现在我更改为 OpenXML 格式，现在从 Excel 表中读取 3200 行需要超过 1 分钟。

下面是我的代码：

```
public static DataTable ReadExcelFileDOM(string filename) 
{ 
    DataTable table; 

    using (SpreadsheetDocument myDoc = SpreadsheetDocument.Open(filename, true)) 
    { 
        WorkbookPart workbookPart = myDoc.WorkbookPart; 
        Sheet worksheet = workbookPart.Workbook.Descendants<Sheet>().First(); 
        WorksheetPart worksheetPart = 
         (WorksheetPart)(workbookPart.GetPartById(worksheet.Id)); 
        SheetData sheetData = 
            worksheetPart.Worksheet.Elements<SheetData>().First(); 
        List<List<string>> totalRows = new List<List<string>>(); 
        int maxCol = 0; 

        foreach (Row r in sheetData.Elements<Row>()) 
        { 
            // Add the empty row. 
            string value = null; 
            while (totalRows.Count < r.RowIndex - 1) 
            { 
                List<string> emptyRowValues = new List<string>(); 
                for (int i = 0; i < maxCol; i++) 
                { 
                    emptyRowValues.Add(""); 
                } 
                totalRows.Add(emptyRowValues); 
            } 

            List<string> tempRowValues = new List<string>(); 
            foreach (Cell c in r.Elements<Cell>()) 
            { 
                #region get the cell value of c. 
                if (c != null) 
                { 
                    value = c.InnerText; 

                    // If the cell represents a numeric value, you are done.  
                    // For dates, this code returns the serialized value that  
                    // represents the date. The code handles strings and Booleans 
                    // individually. For shared strings, the code looks up the  
                    // corresponding value in the shared string table. For Booleans,  
                    // the code converts the value into the words TRUE or FALSE. 
                    if (c.DataType != null) 
                    { 
                        switch (c.DataType.Value) 
                        { 
                            case CellValues.SharedString: 
                                // For shared strings, look up the value in the shared  
                                // strings table. 
                                var stringTable = workbookPart. 
                                    GetPartsOfType<SharedStringTablePart>().FirstOrDefault(); 

                                // If the shared string table is missing, something is  
                                // wrong. Return the index that you found in the cell. 
                                // Otherwise, look up the correct text in the table. 
                                if (stringTable != null) 
                                { 
                                    value = stringTable.SharedStringTable. 
                                        ElementAt(int.Parse(value)).InnerText; 
                                } 
                                break; 

                            case CellValues.Boolean: 
                                switch (value) 
                                { 
                                    case "0": 
                                        value = "FALSE"; 
                                        break; 
                                    default: 
                                        value = "TRUE"; 
                                        break; 
                                } 
                                break; 
                        } 
                    } 

                    Console.Write(value + "  "); 
                } 
                #endregion 

                // Add the cell to the row list. 
                int i = Convert.ToInt32(c.CellReference.ToString().ToCharArray().First() - 'A'); 

                // Add the blank cell in the row. 
                while (tempRowValues.Count < i) 
                { 
                    tempRowValues.Add(""); 
                } 
                tempRowValues.Add(value); 
            } 

            // add the row to the totalRows. 
            maxCol = processList(tempRowValues, totalRows, maxCol); 

            Console.WriteLine(); 
        } 

        table = ConvertListListStringToDataTable(totalRows, maxCol); 
    } 
    return table; 
} 

/// <summary> 
/// Add each row to the totalRows. 
/// </summary> 
/// <param name="tempRows"></param> 
/// <param name="totalRows"></param> 
/// <param name="MaxCol">the max column number in rows of the totalRows</param> 
/// <returns></returns> 
private static int processList(List<string> tempRows, List<List<string>> totalRows, int MaxCol) 
{ 
    if (tempRows.Count > MaxCol) 
    { 
        MaxCol = tempRows.Count; 
    } 

    totalRows.Add(tempRows); 
    return MaxCol; 
} 

private static DataTable ConvertListListStringToDataTable(List<List<string>> totalRows, int maxCol) 
{ 
    DataTable table = new DataTable(); 
    for (int i = 0; i < maxCol; i++) 
    { 
        table.Columns.Add(); 
    } 
    foreach (List<string> row in totalRows) 
    { 
        while (row.Count < maxCol) 
        { 
            row.Add(""); 
        } 
        table.Rows.Add(row.ToArray()); 
    } 
    return table; 
} 
```

有没有一种有效的方法可以在某处更改此代码，以便读取过程可以更快一点。我如何将其更改为代码以更快地阅读。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T14:12:03.987

我尝试了您的代码，并注意到在一个*非常简单的示例*中，我**大约需要 4 秒**才能完成。

在将 my 编辑`.xls file`到您*给定的详细信息*（列：区域前缀、城市、日期、功能......）并添加大约**3,600 行**之后，您的代码**大约需要 10 secs**。

我认为您应该**删除任何 Console.WriteLine 语句**，因为这些语句会减慢处理您的`xls file`. 删除所有这些后，我的秒表显示相同行数的**1.26 秒。**

即使在 SO 上，您也可以找到 console.WriteLine 如此缓慢的一些原因[**： Console.WriteLine slow**](https://stackoverflow.com/questions/5272177/console-writeline-slow)。在这个问题中，有一个答案指向`OutputDebugString`...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-01-17T11:34:21.043

我在您的代码中发现了一些缺点。

1.  当添加到 DataTable 大量行时，使用 BeginLoadData 和 EndLoadData
2.  你需要缓存 SharedStringTable
3.  您应该使用 OpenXmlReader（SAX 方法）。内存消耗会减少。

你可以试试我的 ExcelDataReader 没有这些缺点。见这里[https://github.com/gSerP1983/OpenXml.Excel.Data](https://github.com/gSerP1983/OpenXml.Excel.Data)

读取数据表示例：

```
class Program
{
    static void Main(string[] args)
    {
        var dt = new DataTable();
        using (var reader = new ExcelDataReader(@"data.xlsx"))
        {                
            dt.Load(reader);
        }

        Console.WriteLine("done: " + dt.Rows.Count);
        Console.ReadKey();
   }
} 
```

# c# - 在 ASP.net Web 应用程序中使用多种编程语言

> ID：12798425
> 
> 赞同：2
> 
> 时间：2012-10-09T10:48:46.540
> 
> 标签：c#, asp.net, vb.net

我有一个使用 VB 作为编程语言的 Web 应用程序项目。我想继续使用这种语言，因为我有更多的经验，而且它与 IntelliSense 配合得更好。

无论如何，现在我正在使用 Open XML SDK 2.0 Productivity Tool 通过给定的模板生成用于生成 OOXML 文档的代码，并且该工具仅生成 C# 代码。

为了在我的项目中混合两种语言，我遵循[了这个教程](http://msdn.microsoft.com/en-us/library/ms366714.aspx)，但是当我尝试添加一个新的 C# 类时，列表中出现的唯一语言是 Visual Basic，正如您在所附屏幕截图中看到的那样。

有谁知道我该如何解决这个问题？

非常感谢你

![添加新项目截图](../Images/d6b6cace5afba36f8adb626ea6cc195b.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-09T10:51:49.233

这是不可能的; 您不能在同一个项目中将 C# 与 VB.NET 混合使用。当 .NET 编译程序集时，它只能使用一个编译器来执行此操作。

您可以做的是拥有一个包含多个项目（例如一个 Web 应用程序和多个类库）的解决方案，然后您可以使用您选择的语言来拥有每个类库。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T10:54:17.693

混合语言不是我想要的。

将新 (DLL) 项目添加到使用 C# 并处理 XML 的解决方案中。从您的 VB 应用程序中引用该 C# 项目并调用它。

干净又容易。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-09T11:09:02.243

正如其他人所说的那样，你不能这样做。一个例外是网站项目。

网站项目和 Web 应用程序之间存在差异。主要是它们的编译方式。网站是您链接的教程所讨论的内容（注意他们所说的通过新网站而不是新项目创建它并选择 Web 应用程序的方式），而您在上面说您有一个 Web 应用程序。

您可以选择更改为网站或使用其他人建议的补充项目。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-09T10:55:39.460

您需要安装 Visual Studio for c#。看起来您当前安装的语言是 vb。这是下载vs的链接：

[http://www.microsoft.com/visualstudio/eng/downloads#d-2010-express](http://www.microsoft.com/visualstudio/eng/downloads#d-2010-express)

关于在同一解决方案中使用 vb 和 c# 代码，只要将它们分开到不同的项目中即可。

# asp.net - 如何在 Crystal Report 中创建多个详细信息部分？

> ID：12798426
> 
> 赞同：1
> 
> 时间：2012-10-09T10:48:46.807
> 
> 标签：asp.net, crystal-reports, report

我是水晶报告的新手，在过去的几天里，我喜欢很少的基本报告。我必须说它很好，看起来更专业的工具。今天我遇到了一个基本的演示问题，我无法以客户所需的格式呈现数据。如果你能做任何事情或者你擅长水晶报表，请帮助我

以下是数据展示，我认为我们需要多个可以不断重复的部分，就像组部分一样。我能够通过教育详细信息或经验详细信息显示人员详细信息，但我不知道如何同时显示。我已将人员详细信息放在组标题和其余部分中，这些信息将重复放入详细信息部分。

## 个人资料

```
Person Name
Address
Contact No.
EmailID
Date of birth 
```

## 教育详情

```
1   Education1      2010-11     75% Mumbai, India
2   Education2      2011-12     85% Mumbai, India
3   Education3      2012-13     65% Mumbai, India
4   Education4      2012-13     79% Mumbai, India 
```

## 体验详情

```
1   Job1        Trainee             5mnth   Mumbai, India
2   Job2        Developer           9mnth   Mumbai, India
3   Job3        Project Manager     8mnth   Mumbai, India
4   Job4        CTO                 6mnth   Mumbai, India 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T10:56:31.253

您需要创建一个子报表 Vikash。创建一个后，您可以为其设置标题和数据，它应该会出现。

# java - 在 AlertDialog 构建器中设置默认首选项

> ID：12798427
> 
> 赞同：1
> 
> 时间：2012-10-09T10:48:48.330
> 
> 标签：java, android, default, android-alertdialog

我目前有一个 AlertDialog，用户可以从三个选项中进行选择（在名为 itemsOutput1 的数组中定义）。尽管我希望能够通过将默认选择设置为先前存储的共享首选项来预测用户将根据先前的选择给出的答案，但这很好用。

假设我知道我想将默认选择设置为 itemsOutput1 中的第二项，如何将其应用于 .setSingleChoiceItems 以便在出现对话框时已经选择第二项？

```
case 1:
return new AlertDialog.Builder(this)
.setIcon(bmd)
.setTitle("What do you want the output to be?")
.setPositiveButton("OK", new
DialogInterface.OnClickListener() {
public void onClick(DialogInterface dialog, int which) 
    {
callShapeActivity();
}
})
.setSingleChoiceItems(itemsOutput1, 0, new
DialogInterface.OnClickListener() {
public void onClick(DialogInterface dialog, int which) {
//---get the SharedPreferences object---
prefs = getSharedPreferences(prefName, MODE_PRIVATE);
SharedPreferences.Editor editor = prefs.edit();

//---set the user inputs to prefo's---
editor.putString(OUTPUT_KEY, itemsOutput1[which]);
editor.commit(); 
}
    }
)
.create(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T11:17:54.590

Look at this previous answer [link](https://stackoverflow.com/questions/8184514/android-get-alert-dialog-default-selected-item).

If I understand your question well, this will be helpful to you.

# jquery-plugins - chrome浏览器的jqgrid冻结列问题

> ID：12798428
> 
> 赞同：4
> 
> 时间：2012-10-09T10:48:53.980
> 
> 标签：jquery-plugins, jqgrid

嗨，我看到 chrome（v22）和 firefox 之间的 jqgrid 冻结列演示中的对齐差异。任何机构都可以告诉我为什么会发生这种情况以及解决方法是什么。

![在此处输入图像描述](../Images/f09f105a8b384eb818dcefd858a42bf6.png)

如果您查看屏幕截图，您将看到客户端和金额列之间的一些水平对齐差异。

你可以在下面的链接中看到同样的内容： [http ://www.trirand.com/blog/jqgrid/jqgrid.html](http://www.trirand.com/blog/jqgrid/jqgrid.html)

打开上面的链接并转到最后一部分，即冻结的 cols 组标题。然后在 windows XP 的 chrome(v22) 浏览器中选择冻结列演示或冻结列组标题演示。

但是在 windows XP 中的 firefox(v 15) 和 safari(v5) 中对齐是正确的

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-18T20:43:13.823

我不能建议你真正解决这个问题，但我决定写下我如何解释这个问题。简短的回答是：[setFrozenColumns](https://github.com/tonytomov/jqGrid/blob/v4.4.1/js/grid.custom.js#L658-789)方法在计算`top`冻结 div 的位置时存在错误。应该改进代码。

有两个 div：一个用于冻结的标头（具有 classes 的 div `frozen-div ui-jqgrid-hdiv`），另一个用于冻结的主体（具有 classes 的 div `frozen-bdiv ui-jqgrid-bdiv`）。如果您从[官方 jqGrid 演示页面](http://www.trirand.com/blog/jqgrid/jqgrid.html)打开“Frozen Cols.Group Header(new)”/“Frozen column with group header”演示并检查`top`不同 Web 浏览器中的属性值，您会发现在某些浏览器中的值`top`应该增加或减少到 1px 以获得正确的视图。

例如，在 Firefox 16 中，潜水具有`top: 24px;`并且`top: 70px;`看起来一切正常。

在 IE9 中具有相同的值，但要正确查看网格，必须将值更改为`top: 25px;`和`top: 71px;`

`top: 24px;`以同样的方式，在 Chrome 22 中具有相同的值`top: 70px;`。要解决此问题，可以将值更改为`top: 23px;`和`top: 69px;`

您可以使用 Chrome 的开发者工具（IE 也一样）来验证更改`top`属性是否可以解决问题：

![在此处输入图像描述](../Images/a89e86fc9ee479194aef601c6596fc08.png)

更改后，演示的外观至少在 100% 时是完美的，但如果您将缩放更改为 200%，您会看到*原始*值`top: 24px;`并且`top: 70px;`更好。

我想问题的真正解决并不容易。它在网格的每一行冻结部分和非冻结部分的*每一*行上设置高度属性的方向。在[答案](https://stackoverflow.com/a/8771429/315935)中，您会找到方向的第一步。缺点是编辑后需要额外的代码来重新计算行的正确高度。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-12T16:37:24.857

如果您增加/减少字体大小，在所有浏览器中，对齐有时是正确的，有时是错误的。确实，只有在 Chrome 中默认大小会出错，而所有其他（Firefox、Opera、Safari、Internet Explorer）都可以正常启动，但是当您更改大小时，所有这些都可以调整/错误调整。不仅垂直对齐，而且其他东西也变得丑陋 - 比如冻结列和其余列之间的水平空间，甚至它的垂直大小（当你增加或减少太多时变得明显）。

检查 DOM，您会看到它实际上呈现了两个表 - 一个是固定的，用于冻结列，另一个是可滚动的，用于其余的。它试图将它们放置成一个单一的一致的东西，但最终它主要是一个 hack。至于修复，不幸的是我不知道，但由于这是一个比“在 Chrome 上不起作用”更普遍的问题，我希望插件开发人员最终能修复它。

# mysql - 每天将数据从 MySQL 传输到 SQLServer 2008 的 SSIS 包

> ID：12798429
> 
> 赞同：0
> 
> 时间：2012-10-09T10:48:55.777
> 
> 标签：mysql, sql-server, ssis

我需要将数据从 MySQL 数据库传输到 SQL Server 20078 数据库。我已经获得了从 CSV 文件中读取数据并将其输出到 SQL Server 的选项。这意味着我将为需要每天将数据传输到其中的每个表在 FTP 上放置一个单独的 CSV。我需要将此 CSV 复制到我的服务器机器，然后读取它并将数据插入 SQL Server 数据库。我成功地做到了这一点，但是文件非常大（大约 100 MB），这需要花费大量时间从 FTP 读取文件。所以我正在寻找其他一些选项，这让我想到了 SSIS。

但是，我对如何使用 SSIS 将数据从 MySQL 数据库迁移到 SQL Server 数据库一无所知。有人可以指导我进行适当的顺序过程来帮助我做到这一点吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T11:07:31.087

检查这个 pdf 文件。

[http://karthikeyananbarasan.files.wordpress.com/2011/09/sql-server-integration-services-ssis-step-by-step-sample-chapters.pdf](http://karthikeyananbarasan.files.wordpress.com/2011/09/sql-server-integration-services-ssis-step-by-step-sample-chapters.pdf)

FTP任务：

[http://www.cozyroc.com/script/get-ftp-file-list-task](http://www.cozyroc.com/script/get-ftp-file-list-task)

# javascript - .toFixed() 不工作

> ID：12798432
> 
> 赞同：-1
> 
> 时间：2012-10-09T10:49:09.147
> 
> 标签：javascript

我正在使用此代码

```
$('tr').each(function () {
                var td = $(this).children('td').eq(1);
                var val = td.html();
                if (val > 1000) {

                    var fixedVal = parseFloat(parseFloat(val).toFixed(3));
                    td.html(fixedVal / 1000 + " KM");
                }
                else {
                    td.html(Math.round(val) + " M");
                }
            }); 
```

然而我得到了像

```
3.5101280000000004 KM
8761.596300000001 KM 
```

问题是它`.toFixed()`不能正常工作。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-09T10:51:02.297

您首先*固定*该数字，然后将其除以*1000*，这将创建一个新的浮点数。改为拨打`toFixed`您的电话。`.html()`

```
var fixedVal = parseFloat( val );
td.html( (fixedVal / 1000).toFixed( 3 ) + " KM" ); 
```

# javascript - 什么样的 javascript 代码应该保留在 html 文件中？

> ID：12798443
> 
> 赞同：1
> 
> 时间：2012-10-09T10:49:40.817
> 
> 标签：javascript, html

将所有javascript代码放在html文件的标签中有多正确？

将所有 js 代码放在单独的 .js 文件中是否被认为更好？

我注意到许多网站（包括这个）都有一些用 html 文件本身编写的 js 代码（包含在脚本标签中）。

假设我决定将所有可能的 javascript 代码放在单独的文件中。现在，这些外部文件是否可以访问 html 文档中的元素。

我的意思是，假设我想在`<p>`每次用户单击按钮时创建一个带有文本的新元素。外部 javascript 文件是否可以访问文档元素以允许这样做？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-09T10:51:40.877

如果您`.js`在 HTML 中引用该文件，则 JavaScript 将有权访问页面上的所有元素。这也适用于动态创建的元素。

最好在外部文件中包含尽可能多的 JavaScript。在页面本身中包含 JavaScript 代码不应有任何理由。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-09T10:52:30.253

任何引用的 JS 文件中的任何 JS 代码都可以访问您的 html。

Javascript 通常意味着要分离到一个单独的文件中，但无论出于何种原因，有些人反对这一点，这并不是真正的世界末日。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-09T10:56:25.303

单独`.js`的文件会导致多个`http`请求，这会使您的页面加载速度稍慢，但是两者都有自己的优缺点链接，例如拥有`.js`文件会导致缓存，从而使您的页面在用户重新访问您的页面时加载得更快，以及您不需要在您使用的每个页面上更改它，只需编辑一个文件，另一方面，它的缺点是文件是否被缓存，如果您更改有时更改不会受到影响，因为浏览器有缓存`.js`所以有些人确实重命名了他们的 javascript，例如**abcv1.js、abcv2.js**等等，使用内联脚本可以减少你的 http 请求，它也不会被浏览器缓存，所以每当你改变它时，它都会在你的网页上影响到所有访问者，因为没有脚本被缓存的问题..

如果您想要外部`.js`文件，您可以将所有脚本绑定在一个文件中以减少您的`http`请求

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-09T10:57:16.430

楼上大家说的都对。要记住的一件事是 .js 文件由浏览器缓存，而内联代码则没有。这有许多优点，因为浏览器不必在每次用户访问您的页面时都请求 javascript，因此通过连接发送的数据更少，并且页面第二次加载速度更快。还可以降低您的带宽使用量。

您也可以通过[缩小](http://en.wikipedia.org/wiki/Minification_%28programming%29)js 文件来加快速度

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-09T10:53:16.537

在外部 .js 文件中包含 javascript 是保持代码整洁的“完成的事情”，一旦您在 html 中引用外部文件，它实际上就与 html 中包含的 javascript 相同

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-09T10:54:34.333

保存在外部`.js`文件中的 Javascript 的行为方式与 javascript 直接位于 HTML 中的方式完全相同。

将它放在`.js`文件中的好处是这些文件通常由浏览器缓存，因此不需要在每次加载页面时都下载。这样做的缺点是，如果您出于任何原因需要对文件进行更改，则需要重命名文件以确保获取最新的更改。

我通常将 javacsript 作为页面的一部分包含的唯一时间是，如果我需要使用从“代码背后”作为我的 ASP.NET 项目的一部分传递的特定值。
例如`var myJSVar = <%=_myCSVar%>;`

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-10-09T10:55:48.423

我总是试图将其降低到需要在渲染时写入并且或多或少独特的变量。像本地化一样（即使您也开始为此使用服务），其余的可以（并且应该）保存在外部文件中并由浏览器缓存

# python - 正则表达式，有条件地捕获不包含子字符串的行

> ID：12798446
> 
> 赞同：2
> 
> 时间：2012-10-09T10:49:51.767
> 
> 标签：python, regex, python-2.6

我的代码正在解析日志文件中的一些行。

我对此做了很多事情，但特别需要能够找到不包含某个子字符串的行。在一定条件下

我对正则表达式有很好的理解。但我似乎无法弄清楚这一点。

问题：我想捕获任何不包含单词`error`or的行`warn`。除非它是日志条目的第一部分并用方括号括起来。

到目前为止，我已经尝试过这样的事情：

```
(((?:abc|cba)\s+.*(?!\[?(?!error|warn)\]?).*)|((abc|cba)\s+\[(error|warn)\]\s+(.*))) 
```

日志中的行可能类似于以下示例：

**捕获组 2**：

```
abc [error] message
cba [error] message
cba [warn] message 
```

**捕获组 1**：

```
abc something random
cba i dont know 
```

**不要捕获**：

```
abc some [error] message
cba some [warn] message 
```

简单英语的问题；我想得到任何以`abc`or开头的行`cba`。如果第 1 组没有`[error]`或没有`[warn]`任何位置，则捕获组 1 应该抓住该线。只有当`[error]`或`[warn]`是条目的第一部分（在`abc`or之后`cba`）时，捕获组 2 才应获取它

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-09T10:57:11.653

这应该可以解决问题：

```
^(?:abc|cba)(?:(?!.*(?:\[error\]|\[warn\]))|\s*(?:\[error\]|\[warn\])).*$ 
```

请注意，我断言整行以将正则表达式与`^`and匹配`$`。

我首先检查`abc`并`cba`启动线路。

然后是2种情况：

*   既不`[error]`也不`[warn]`出现在该行的任何地方：（`(?!.*(?:\[error\]|\[warn\]))`不是`?:`很重要，只是非捕获组）。
*   或者`[error]`或者`[warn]`紧随其后`abc`and `cba`: `\s*(?:\[error\]|\[warn\])`。请注意，您可能想要更改`\s*`为`\s+`，因为当前的正则表达式将匹配`abc[error]`。

然后其余的我不在乎`.*`，但它需要在那里，因为我使用了`$`. 我对 Python 不太确定：检查是否可以删除`.*$`部分正则表达式。

我使所有组都不捕获，因为您似乎在断言该行遵循某种格式。如果您需要同时从线路中提取一些数据，请告诉我。

# javascript - GetCallbackEventReference 不做任何事情

> ID：12798450
> 
> 赞同：0
> 
> 时间：2012-10-09T10:49:59.453
> 
> 标签：javascript, asp.net

我有一个 ASP.Net 应用程序，当我从一个组合更改值时，它必须显示一个标签：

*   在cs文件中：

    ```
     public partial class WebFormAJAXControls : System.Web.UI.Page,System.Web.UI.ICallbackEventHandler
      {
    string _callbackArg;

    public void RaiseCallbackEvent(string eventArgument)
    {
        _callbackArg = eventArgument;
    }

    public string GetCallbackResult()
    {
        return _callbackArg;
    }

    protected void Page_Load(object sender, EventArgs e)
    {
        //register the name of the client side function that will be called by the server
        string callbackRef = Page.ClientScript.GetCallbackEventReference(this, "args", "ClientCallbackFunction","");

        //define a function used by client to call server
        string callbackScript = " function MyServerCall(args){alert ('1'); " + callbackRef + " ; }";

        //register the client function to the page 
        Page.ClientScript.RegisterClientScriptBlock(this.GetType(), "MyServerCall", callbackScript, true);

    }
      } 
    ```

*   在 aspx 文件中：

    ```
     <head runat="server">
         <title></title>
          <script type="text/javascript">
            function ClientCallbackFunction(args) {
              alert(args);
              LabelMessage.innerText = args;
           }
         </script>
      </head>
      <body>
      <form id="form1" runat="server">
       <div>

      <asp:DropDownList ID="DropDownListChoice" runat="server" OnChanged="MyServerCall(DropDownListChoice.value)">
         <asp:ListItem>Choise 1</asp:ListItem>
         <asp:ListItem>Choise 2</asp:ListItem>
         <asp:ListItem>Choise 3</asp:ListItem>
      </asp:DropDownList>
      <br /><br />
      <asp:Label ID="labelMessage" runat="server"></asp:Label>
     </div>
       </form>
      </body> 
    ```

当我在组合框中更改选择时，程序不会做任何事情。有人可以告诉我有什么问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T11:10:18.003

这不应该：

```
function ClientCallbackFunction(args) { 
    alert(args); 
    LabelMessage.innerText = args; 
} 
```

是这样的：

```
function MyServerCall(args) { 
    alert(args); 
    LabelMessage.innerText = args; 
} 
```

目前您没有可以`MyServerCall`调用的方法。

你要的方法是`OnChange`，不是`OnChanged`。`LabelMessage`以这种方式访问​​也会出错。像这样使用 jQuery 的东西可以解决问题：`$('#labelMessage').text(args);`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T11:22:15.330

尝试使用 RegisterStartupScript 注册客户端脚本功能。

例如：Page.ClientScript.RegisterStartupScript(typeof(Page), "MyServerCall", callbackScript, true);

# reporting-services - 访问报告服务

> ID：12798455
> 
> 赞同：0
> 
> 时间：2012-10-09T10:50:25.153
> 
> 标签：reporting-services

我有一个部署到 SQL Server Reporting Services Web 界面的报表。从同一域中的机器我可以毫无问题地访问报告。当我尝试从家里（不在同一个网络上）访问报告时，我也成功了。

问题在于我们的一位客户无法查看他的报告。他得到一个没有任何内容的页面。喜欢基本的 html 或找不到资源。因为我是新用户，所以我不能在这里发布图像本身。我把我的邮件留在这里，所以如果你有帮助并想看 img，我会把它转发给你。

gilad.sagiv@mobile-mx.com

我采取的步骤是：

1.在安装了报告服务的窗口中创建一个新用户。我给了它与一般reprot用户相同的组（我希望这个用户只看到一个特定的reprot）

2.在报告服务管理员中，我赋予该用户与一般报告服务用户相同的角色。

我认为这就足够了，但似乎还不够。有任何想法吗 ？谢谢吉尔德

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T11:59:21.120

我还不能发表评论，所以我会发布作为答案。

1.  如果你没有，你应该做的第一件事是检查他是否可以在他的其他机器上看到报告。

2.  当我们遇到权限问题时，SSRS 会给出一条消息，说用户由于权限问题而无法访问报告，而不是空白页或任何其他类型的错误，所以我认为这不是权限问题。

3.  其他可能的情况是，由于您授予他访问特定报告的权限，因此您可能向他提供了报告的直接 URL，请检查 URL 是否已更改。

# javascript - 使用phonegap在触摸时交换背景图像？

> ID：12798458
> 
> 赞同：0
> 
> 时间：2012-10-09T10:50:29.077
> 
> 标签：javascript, android, html, cordova

使用phonegap开发移动应用程序，我面临一个小问题。当触摸按下我的任何按钮时，我想在触摸期间交换背景，这样我就可以给用户一个关于正在发生的事情的视觉反馈。

但是除了onclick和onmouseup之外，android中的onmousedown事件或任何其他事件都不会触发？我怎样才能做到这一点？

我有我的 javascript 方法来交换有效的背景。

```
function touched(isTouched){
                console.log(isTouched);
                if (isTouched) {
                    $('.blue_cell.firstCell').css("background-image", "url(images/cells/list-cell.png)");                   
                } else {
                    $('.blue_cell.firstCell').css("background-image", "url(images/cells/blue-cell.png)");
                }

            } 
```

我有我尝试使用的事件的测试按钮：

```
<div class='blue_cell firstCell'  onmouseup="touched(false)" onmousedown="touched(true)"
        onmouseover="touched(true)" onfocusin="touched(true)">
    <div class='cellMainText'>openPopOver()</div>
    <div class='cellIconText'>POP</div></div> 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T11:16:24.620

尝试 ontouchstart 和 ontouchend

```
<div class='blue_cell firstCell' ontouchstart="javascript:alert()" ontouchend="javascript:alert()"> 
```

并查看警报是否触发。

# actionscript-3 - AS3 'with' 和 'removeChild' 语法

> ID：12798459
> 
> 赞同：0
> 
> 时间：2012-10-09T10:50:29.763
> 
> 标签：actionscript-3

使用以下代码..

```
var testContainer = new Sprite();
addChild(testContainer);

var testSprite = new Sprite();
testSprite.name = "sim":
testContainer.addChild(testSprite); 
```

我对为什么以下调用返回子空错误有点困惑：

```
testContainer.removeChild(getChildByName("sim")); 
```

然而，下面的代码并没有，而且实际上完全按照预期工作：

```
with(testContainer)
{
  removeChild(getChildByName("sim"));
} 
```

任何人都可以对此有所了解，正如我所假设的那样，当您不使用`with`它进行引用时，只需在您提供的任何函数调用前面加上它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-09T10:59:16.160

您必须从容器中调用 removeChild，如下所示。 `testContainer.removeChild(testContainer.getChildByName("sim"));`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T11:07:44.497

您可以用作顶级方法的通用实现：

```
function removeChildFromParent(d:DisplayObject):DisplayObject {
  if (!d || !d.parent) return d;

  return d.parent.removeChild(d);
} 
```

# windows - Windows 8 Metro - 如何制作密码文本框？

> ID：12798463
> 
> 赞同：4
> 
> 时间：2012-10-09T10:50:44.280
> 
> 标签：windows, textbox, passwords

就像我可以放入其中的任何内容一样，它只会显示*****。试过 textBox.PasswordChar 但没有用。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-09T10:56:04.900

也许你应该使用[PasswordBox](http://msdn.microsoft.com/en-us/library/windows/apps/xaml/windows.ui.xaml.controls.passwordbox.aspx)

[http://msdn.microsoft.com/en-us/library/windows/apps/xaml/hh700391.aspx](http://msdn.microsoft.com/en-us/library/windows/apps/xaml/hh700391.aspx)

# asp.net - 当我将 GridView 分页设置为 true 时，看不到 Page2,3,..

> ID：12798467
> 
> 赞同：1
> 
> 时间：2012-10-09T10:51:06.850
> 
> 标签：asp.net

我将`AllowPaging`Gridview 设置为 True，当记录多个页面时，我可以看到页面编号（1,2，..）但是当我单击编号时看不到其他页面（Page2,3，...）并且页面没有不要改变

我`DataBind()`在`PageIndexChanging`事件中使用，但是当我点击数字时，我看不到 GridView

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T11:06:27.877

调用是不够的`GridView.DataBind()`。您还必须设置新[`PageIndex`](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.gridview.pageindex.aspx)的 in [`PageIndexChanging`](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.gridview.pageindexchanging%28v=vs.100%29.aspx)：

```
void GridView1_PageIndexChanging(Object sender, GridViewPageEventArgs e)
{
    GridView1.PageIndex = e.NewPageIndex;
    // now get the DataSource(f.e. from database) and assign it
    GridView1.DataBind();
} 
```

另请注意，您不应[`Page_Load`](http://msdn.microsoft.com/en-us/library/system.web.ui.control.load%28v=vs.100%29.aspx)在回发时将 DataSource 绑定到 GridView，而应始终检查`IsPostback`属性：

如果是后者，请不要将`GridView`in绑定`page_load`到它的 DataSource if Page.IsPostback。

```
void Page_Load(Object sender, EventArgs e)
{
    if(!Page.IsPostback)
    {
         BindGridView(); // assuming this is the method where you databind the grid
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T11:08:58.297

您不能只在 PageIndexChanging 中调用 Databind，您需要像这样设置 GridViews PageIndex

```
void GrdView_PageIndexChanging(object sender, GridViewPageEventArgs e)
    {
        GridView x = ((GridView)sender);

        if (e.NewPageIndex > -1 && e.NewPageIndex <= x.PageCount)
        {
            x.PageIndex = e.NewPageIndex;
        }

        GrdView.DataBind();
    } 
```

# java - 获取 Windows 图像符号

> ID：12798469
> 
> 赞同：0
> 
> 时间：2012-10-09T10:51:14.777
> 
> 标签：java, windows, notation, image

我正在用 Java 开发一个图像管理器程序。我想检索符号，并最终检索其他信息，如 Windows 资源管理器中可用的日期或关键字。有没有办法检索这些信息？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T13:43:11.393

好的，我想我找到了解决方案：

我正在使用 tagDescriptor 和 tagType。

首先我需要得到这个 tagType ：

```
File pic = new File("C:/myPicture.jpg"); 
Metadata metadata = ImageMetadataReader.readMetadata(pic);
        for (Directory directory : metadata.getDirectories()) {
            for (Tag tag : directory.getTags()) {
                System.out.println(tag + " - " +tag.getTagType());
            }
        } 
```

对于评级，它返回：

```
[Exif IFD0] Unknown tag (0x4746) - 3 - 18246 
```

现在我知道了 tagType：

```
ExifIFD0Directory exifDirectory = metadata.getDirectory(ExifIFD0Directory.class);
ExifIFD0Descriptor descriptor = new ExifIFD0Descriptor(exifDirectory);
TagDescriptor td = new TagDescriptor(exifDirectory) {};
int rating = Integer.parseInt(td.getDescription(18246)); 
```

如果有更好的解决方案，请随时发表评论

# web-services - 如何从 Java 调用 ASP.NET Web API

> ID：12798472
> 
> 赞同：3
> 
> 时间：2012-10-09T10:51:22.970
> 
> 标签：web-services, apache, rest, asp.net-web-api, apache-httpclient-4.x

我需要使用 java 代码实现一个函数来调用远程服务器上的 ASP.NET Web API。有没有我可以使用的库，比如用于 Web 服务的axis2？我认为 Apache HttpClient 可以帮助我创建请求，还有其他选择吗？提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-09T11:33:36.367

基本上，Asp.net Web API 只是一个可以从多种技术（javascript、C#、java、php...）调用的 Restful 服务，与 Soap 格式不同，调用这种服务要容易得多。用你的浏览器试试！

您可以在 google 或 SO（[此处](https://stackoverflow.com/questions/7177628/calling-restful-service-from-java)和[此处](https://stackoverflow.com/questions/3262202/consuming-restful-apis-using-java)）中找到许多库。

# java - 在 jms 中为财务应用程序发布订阅模式

> ID：12798473
> 
> 赞同：1
> 
> 时间：2012-10-09T10:51:28.563
> 
> 标签：java, design-patterns, jms, finance, subscriber

我在 jms 中使用发布订阅模式，以便在金融应用程序中实现交易提要。但是，该应用程序需要立即显示提要数据。我用 java 编写的这个应用程序不能满足恒定和快速的发布速率，并且应用程序在显示提要数据方面落后。发布订阅模式的代码是在 java 中为任何应用程序编写的常用发布订阅代码。是否有建议以促进更快的发布者并保持恒定的发布率？非常感谢您的意见。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T10:59:43.450

一些建议：（如果您有更多详细信息，例如您在问题中使用的经纪人，他们可能会更具体）

*   JMS 提供者/代理是否配置为将所有消息持久保存到磁盘？如果是这样，您是否需要保证所有消息的传递？要求将所有消息持久化到磁盘会将您的吞吐量降低到数百（除非您有 SSD）
*   您的应用程序是否与代理在同一个 JVM 中运行？堆的大小是否正确？如果堆大小没有很好地调整，您可能会遇到很多垃圾收集暂停，这会降低性能。

# android - TextView 与 ImageView 的选框

> ID：12798474
> 
> 赞同：3
> 
> 时间：2012-10-09T10:51:32.730
> 
> 标签：android, textview, imageview, marquee

我需要有文本视图和图像视图的选框，如图所示。![textview 和 imageview 将在哪里移动](../Images/1b098e0e1a247622343181b093a0b84e.png) 在 textview 或 Imageview 的 onclick 处，它应该打开一个活动。有人可以提出一种方法吗？

ImageView 应该是可点击的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-09T11:39:27.863

我在 Horizo​​ntalView 中的图像视图上实现了选取框，类似于您在问题中描述的，使用[CountDownTimer](http://developer.android.com/reference/android/os/CountDownTimer.html)，

对于您的问题，您必须在 Horizo​​ntalView 内的一个布局内`texview`并`Imagview`在 Horizo​​ntalView 上应用选取框，

查看代码#

```
 public class MyCounter extends CountDownTimer {

    public MyCounter(long millisInFuture, long countDownInterval) {
        super(millisInFuture, countDownInterval);
    }

    @Override
    public void onFinish() {
        if (leftToRight == true) {

            MCObject.cancel();
            //if (gallery.getScrollX() > (((imgv.length - 1) * multiplyValue)+addValue)) {

            if (gallery.getScrollX() > ((imgv.length - 1) * multiplyValue)+addValue) {
                count=((imgv.length - 1) *imageHeightWidth);
                leftToRight = false;
                MCObject.start();
            }

            if (count != gallery.getScrollX()) {
                gallery.scrollBy(1, 0);

                count++;
                MCObject.start();
            } else {
                count=((imgv.length - 1) * imageHeightWidth);
                leftToRight = false;
                MCObject.start();
            }
        } else {
            MCObject.cancel();
            if (gallery.getScrollX() <= 0) {
                count = -20;
                leftToRight = true;
                MCObject = new MyCounter(50, 1);
                MCObject.start();
            }

            if (count != 0) {
                gallery.scrollBy(-1, 0);

                // Log.d("test", ""+hsv.getScrollX());
                count--;
                MCObject.start();
            } else {

                count = -20;
                leftToRight = true;
                MCObject = new MyCounter(50, 1);
                MCObject.start();

            }
        }
    }

    @Override
    public void onTick(long millisUntilFinished) {

    }

} 
```

它会从左到右给出选框直到长度，然后从右到左反转，两侧选框。

在运行时，我在 Horizo​​ntalview 的 xml 中声明的布局中添加图像，检查此函数以在运行时添加图像。

```
public void LLImageView() {
    imgv = new ImageView[25];
    for (int j = 0; j < 25; j++) {
        imgv[j] = new ImageView(this);

        img = new ImageView(MainScreenAnim.this);
        para = new LinearLayout.LayoutParams(imageHeightWidth,imageHeightWidth);

        para.leftMargin = 10;
        para.topMargin = 5;
        imgv[j].setOnClickListener(MainScreenAnim.this);
        imgv[j].setBackgroundResource(Imgid[j]);

        layoutHorizontal.addView(imgv[j], para);

        images.add(Imgid[j].toString());

        System.out.println("string arraylist@@@@@@@" + images.get(j));
    }

} 
```

内部 OnCreate#

```
MCObject = new MyCounter(50, 1);
    MCObject.start(); 
```

我有固定数量的图像要显示。要处理点击事件，请查看下面的代码。

```
 public void onClick(View v) {
    for (int j = 0; j < 25; j++) {
        if (v == imgv[j]) {

            //do something
        }
    }

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-16T06:03:57.183

创建自定义视图

```
public class MarqueeLayout extends ViewGroup {

private static final int VERTICAL_SPACING = 10;
private static final int HORIZONTAL_SPACING = 10;
private static final String TAG = MarqueeLayout.class.getName();
private int line_width;
private List<View> views; 
private Timer timer;

private int scrollX = 0;

public MarqueeLayout(Context context)
{
    super(context);
}
private Handler handler;
private int index = 0;
private int childCount;
public MarqueeLayout(Context context, AttributeSet attrs)
{
    super(context, attrs);
    handler = new Handler();
    timer = new Timer();
    timer.schedule(new TimerTask() {
        @Override
        public void run() {
            handler.post(new Runnable() {
                @Override
                public void run() {
                    requestLayout();
                }
            });
        }
    }, 1000, 200);
}

@Override
protected void onMeasure(int widthMeasureSpec, int heightMeasureSpec)
{
    assert (MeasureSpec.getMode(widthMeasureSpec) != MeasureSpec.UNSPECIFIED);
    if(views == null) {
        views = new ArrayList<View>();
        childCount = getChildCount();
        for(int i = 0; i < childCount; i++) {
            views.add(getChildAt(i));
        }

    }
    final int width = MeasureSpec.getSize(widthMeasureSpec) - getPaddingLeft() - getPaddingRight();
    int height = MeasureSpec.getSize(heightMeasureSpec) - getPaddingTop() - getPaddingBottom();
    final int count = getChildCount();
    int line_height = 0;

    int xpos = getPaddingLeft();
    int ypos = getPaddingTop();

    int childHeightMeasureSpec;
    if (MeasureSpec.getMode(heightMeasureSpec) == MeasureSpec.AT_MOST)
    {
        childHeightMeasureSpec = MeasureSpec.makeMeasureSpec(height, MeasureSpec.AT_MOST);
    }
    else
    {
        childHeightMeasureSpec = MeasureSpec.makeMeasureSpec(0, MeasureSpec.UNSPECIFIED);
    }

    for (int i = 0; i < count; i++)
    {
        final View child = getChildAt(i);
        if (child.getVisibility() != GONE)
        {
            child.measure(MeasureSpec.makeMeasureSpec(width, MeasureSpec.AT_MOST), childHeightMeasureSpec);
            final int childw = child.getMeasuredWidth();
            line_height = Math.max(line_height, child.getMeasuredHeight() + VERTICAL_SPACING);

            xpos += childw + HORIZONTAL_SPACING;
        }
    }
    this.line_width = xpos;

    setMeasuredDimension(width, height);
}

@Override
protected ViewGroup.LayoutParams generateDefaultLayoutParams()
{
    return new LayoutParams(1, 1); 
}

@Override
protected boolean checkLayoutParams(ViewGroup.LayoutParams p)
{
    if (p instanceof LayoutParams)
    {
        return true;
    }
    return false;
}

@Override
protected void onLayout(boolean changed, int l, int t, int r, int b)
{
    Log.d(TAG, "onLayout called");
    int count = getChildCount();
    final int width = r - l;

    scrollX -= 20;
    if(line_width + scrollX < 0) {
        scrollX = 0;
    }
    int i = 0;
    while(count > 0) {
        View c = getChildAt(i);
        if(c == null) {
            break;
        }
        int w = c.getMeasuredWidth();
        Log.d(TAG, "scrollX : " + scrollX + " width : " + w);
        if(scrollX < -w) {
            this.removeViewAt(0);
            scrollX += w;
        } else {
            break;
        }
        i++;
        count--;
    }
    count = getChildCount();
    int xpos = getPaddingLeft() + scrollX;
    int ypos = getPaddingTop();
    for (i = 0; i < count; i++)
    {
        final View child = getChildAt(i);
        if (child.getVisibility() != GONE)
        {
            final int childw = child.getMeasuredWidth();
            final int childh = child.getMeasuredHeight();
            child.layout(xpos, ypos, xpos + childw, ypos + childh);
            xpos += childw + HORIZONTAL_SPACING;
        }
    }
    while(xpos < getWidth()) {
        View v = views.get(index % childCount);
        addView(v);
        xpos += v.getMeasuredWidth();
        index++;
    }
}} 
```

并且您可以在此布局中拥有任何类型的视图，您可以在 xml 中调用此布局

```
<Your.Package.name.MarqueeLayout
    android:layout_width="wrap_content"
    android:layout_height="wrap_content" >

    <TextView
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="this is textview 1"
        tools:context=".MainActivity" />

    <Button
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:onClick="clicked"
        android:text="Click me 1" />

</Your.Package.name.MarqueeLayout> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-10-27T04:57:21.557

*   我将 TextView 与 android:ellipsize="marquee" 一起使用。它运行良好，但缺点之一是当品牌继续运行时，堆大小在 10 到 20 分钟后增加，应用程序崩溃。所以我使用了 RecycleView 选项。它的工作非常好并且不会增加堆大小。

*   可以使用recycleView 在marque 中设置文本和图像。我浪费了两天终于找到了正确的解决方案recycleView。按照这个步骤。

第 1 步：在您的片段或活动布局中使用 recycleView

```
<LinearLayout
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:layout_marginLeft="8dp"
    android:layout_marginRight="8dp"
    android:layout_marginTop="10dp"
    android:orientation="vertical">

    <android.support.v7.widget.RecyclerView
        android:id="@+id/marqueList"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:background="@color/white"
        android:clipToPadding="false" />

 </LinearLayout> 
```

Step2：为recycleView做一个适配器布局，命名为marque_adapter.xml

```
<?xml version="1.0" encoding="utf-8"?> 
```

```
<LinearLayout
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:layout_marginBottom="2dp"
    android:layout_marginTop="2dp"
    android:orientation="horizontal">

    <ImageView
        android:id="@+id/imageView1"
        android:layout_width="wrap_content"
        android:layout_height="15dp"
        android:layout_gravity="center_vertical"
        android:src="@mipmap/arrow_up"/>

    <TextView
        android:id="@+id/textView1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="center_vertical"
        android:textSize="18sp"
        android:text="One"
        />

    <ImageView
        android:id="@+id/imageView2"
        android:layout_width="wrap_content"
        android:layout_height="15dp"
        android:layout_gravity="center_vertical"
        android:src="@mipmap/arrow_down"
        />

    <TextView
        android:id="@+id/textView2"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="center_vertical"
        android:textSize="18sp"
        android:text="Two"
       />

    <ImageView
        android:id="@+id/imageView3"
        android:layout_width="wrap_content"
        android:layout_height="15dp"
        android:layout_gravity="center_vertical"
        android:src="@mipmap/arrow_up"/>

    <TextView
        android:id="@+id/textView3"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="center_vertical"
        android:textSize="18sp"
        android:text="Three"
        />

    <ImageView
        android:id="@+id/imageView4"
        android:layout_width="wrap_content"
        android:layout_height="15dp"
        android:layout_gravity="center_vertical"
        android:src="@mipmap/arrow_down"/>

    <TextView
        android:id="@+id/textView4"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="center_vertical"
        android:textSize="18sp"
        android:text="Four"
     />

    <TextView
        android:id="@+id/textView5"
        android:layout_width="300dp"
        android:layout_height="wrap_content"
        android:layout_gravity="center_vertical" />

</LinearLayout> 
```

Step3：为recycleView制作Adapter，命名为MarqueAdapter.java

```
public class MarqueAdapter extends RecyclerView.Adapter<RecyclerView.ViewHolder> {

public class ViewHolderItem extends RecyclerView.ViewHolder {
    public ViewHolderItem(View view) {
        super(view);
 }
}

@Override
public RecyclerView.ViewHolder onCreateViewHolder(ViewGroup parent, int viewType) {
    RecyclerView.ViewHolder viewHolder = null;

    View view = LayoutInflater.from(parent.getContext()).inflate(R.layout.marque_adapter, parent, false);
    viewHolder = new ViewHolderItem(view);

    return viewHolder;
}

@Override
public void onBindViewHolder(RecyclerView.ViewHolder holder, int position) {
}

@Override
public int getItemCount() {
    // You can make count infinite time
    return 1000;
}} 
```

第4步：最后在recycleView定义的片段或活动中执行此操作

```
 private final Handler mHandler = new Handler(Looper.getMainLooper());
  private final Runnable SCROLLING_RUNNABLE = new Runnable() {
    @Override
    public void run() {
        final int duration = 20;
        final int pixelsToMove = 20;
        mRecycleMarqueList.smoothScrollBy(pixelsToMove, 0);
        mHandler.postDelayed(this, duration);
    }
};

RecyclerView mRecycleMarqueList = (RecyclerView) view.findViewById(marqueList);
    LinearLayoutManager layoutManager = new LinearLayoutManager(getActivity());
    layoutManager.setOrientation(LinearLayoutManager.HORIZONTAL);
    mRecycleMarqueList.setLayoutManager(layoutManager);
    MarqueAdapter mMarqueAdapter = new MarqueAdapter();
    mRecycleMarqueList.setAdapter(mMarqueAdapter);
    mHandler.post(SCROLLING_RUNNABLE); 
```

最后它看起来像下面的屏幕短

[![在此处输入图像描述](../Images/26941b6640c298a072a1e165b3e2c66e.png)](https://i.stack.imgur.com/EcDhR.png)

[![在此处输入图像描述](../Images/23de1e4433093af801da7a98f24fc86a.png)](https://i.stack.imgur.com/HC6Iy.png)

# canvas - 调整页面大小时画布拉伸

> ID：12798481
> 
> 赞同：0
> 
> 时间：2012-10-09T10:51:59.237
> 
> 标签：canvas, jcanvas

我有一个画布（有宽度和高度），我使用 JCanvas 在上面绘图。我希望如果我调整浏览器的大小 - 画布将被拉伸（增加或减少）。我希望背景图像也可以调整大小，并且上面的所有内容也可以。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T12:04:09.333

好吧，我发现 JCanvas 有它自己的功能 [http://calebevans.me/projects/jcanvas/docs.php?p=scaleCanvas](http://calebevans.me/projects/jcanvas/docs.php?p=scaleCanvas)

# mysql - 连接三个mysql表/两个select语句

> ID：12798485
> 
> 赞同：1
> 
> 时间：2012-10-09T10:52:11.700
> 
> 标签：mysql

我有以下表格：

[http://www.gulllakeschools.net/mysqltables.pdf](http://www.gulllakeschools.net/mysqltables.pdf)

![在此处输入图像描述](../Images/a7fc41d327d589d0d997bdb5184b9ee3.png)

我需要以这种格式提取数据：学生姓氏、学生名字、日期事件、日期事件（学生登录的每一天都会有一个日期事件）

组件 com_users 是我需要从组件列中提取的组件。

我是主要的 mysql 菜鸟，无法弄清楚如何一次完成所有操作。我有这些单独工作的选择语句：

```
SELECT civicrm_contact.last_name, civicrm_contact.first_name, civicrm_uf_match.uf_id
FROM civicrm_contact, civicrm_uf_match
WHERE civicrm_contact.id = civicrm_uf_match.contact_id

SELECT user_id, component, group_concat( date_event )
FROM jos_content_statistics
WHERE component = "com_users"
GROUP BY user_id 
```

但我一辈子都不能让他们加入。我试过加入、加入、完全加入、联合，都产生错误。我在 where 语句之前和之后都尝试过加入。联合产生整理错误。我没有尝试过内部连接，因为我无法弄清楚那个。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T11:04:47.227

```
SELECT C.last_name, C.first_name, S.date_event
FROM civicrm_contact as C
INNER JOIN civicrm_uf_match as M on M.contact_id = C.id 
INNER JOIN jos_content_statistics as S on M.uf_id = S.user_id 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T10:57:09.100

```
SELECT 
  civicrm_contact.last_name, 
  civicrm_contact.first_name, 
  civicrm_uf_match.uf_id,
  (select group_concat(jos_content_statistics.date_event) 
   from jos_content_statistics 
   where user_id = civicrm_uf_match.uf_id 
     and civicrm_uf_match.contact_id = civicrm_contact.id 
     and component = "com_users" 
   GROUP BY user_id) as date_events
FROM civicrm_contact join civicrm_uf_match
on civicrm_contact.id = civicrm_uf_match.contact_id
where civicrm_contact.contact_sub_type='student' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-09T10:57:22.577

试试这个：

```
SELECT cc.last_name, cc.first_name, cm.uf_id, jc.component, jc.dateevent 
FROM civicrm_contact cc
INNER JOIN civicrm_uf_match cm ON cc.civicrm_contact.id = cm.contact_id
INNER JOIN
(
    SELECT user_id, component, group_concat( date_event ) dateevent
    FROM jos_content_statistics
    WHERE component = "com_users"
    GROUP BY user_id, component
) jc ON cm.uf_id = jc.user_id 
```

# c - C中的bss段

> ID：12798486
> 
> 赞同：8
> 
> 时间：2012-10-09T10:52:12.183
> 
> 标签：c, memory-management, data-segment

[在“关于 Unix 中的 bss 段和数据段](https://stackoverflow.com/questions/1909953/regarding-the-bss-segment-and-data-segment-in-unix)”问题的答案之一中，我看到了关于 bss 的解释如下：

> Bss 很特别：.bss 对象在对象文件中不占用任何空间，并且通过将所有未专门初始化的符号组合在一起，可以轻松地将它们一次清零。

但是当我在目标文件上使用 size 时，从代码中生成：

```
#include <stdio.h>
int uninit_global_var;
int init_global_var=5;

int main()
{
   int local_var;
   return 0;
} 
```

我有以下

```
text    data      bss    dec     hex filename
1231     280      12    1523     5f3 a.out 
```

并看到基于全局范围的未初始化数据成员的 bss 增长。那么任何人都可以证明上述声明的合理性吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-09T11:48:02.800

如果您删除 stdio.h 您的输出可能会更有意义。让我们忽略那个库，因为它包含内部变量。

在您的具体情况下，会发生以下情况：

```
int uninit_global_var; 
```

*由于这是在文件范围内*分配的变量，因此具有*静态存储持续时间*，就像任何声明为`static`. C 标准要求，如果具有静态存储持续时间的变量没有被程序员显式初始化，在这种情况下，必须在程序启动之前将其设置为零。所有这些变量都放在`.bss`段中。

```
int init_global_var=5; 
```

此变量也在文件范围内分配，因此它也将具有静态存储持续时间。但在这种情况下，它是由程序员初始化的。C 标准要求在程序启动之前将这些变量设置为给定的值。这些变量被放置在`.data`段中。

```
 int local_var; 
```

此变量具有自动存储持续时间（本地）。编译器很可能会优化掉这个变量，因为它没有任何意义。但是让我们假设这种优化不会发生。然后，该变量将在运行时分配，当它所在的范围（块）被执行时，一旦该范围结束（它超出范围）就不再存在。它将被分配在堆栈上或 CPU 寄存器中。换句话说，在链接时，这个变量只作为程序代码存在，以一些汇编指令的形式存在，说“将一个 int 压入堆栈”，然后“从堆栈中弹出一个 int”。

如何初始化这些不同类型的变量取决于系统。但通常在调用 main 之前编译器会注入一些代码。这是一种过度简化，但出于教学的原因，您可以想象您的程序实际上看起来像这样：

```
bss
{
  int uninit_global_var;
}

data
{
  int init_global_var;
}

rodata
{
  5;
}

int start_of_program (void) // called by OS
{
  memset(bss, 0, bss_size);
  memcpy(data, rodata, data_size);

  return main(); 
} 
```

数据：4 bss：4

具有真正非易失性存储器的嵌入式系统将与上述代码完全相同，而基于 RAM 的系统可能会以不同的方式解决数据初始化部分。bss 在所有系统上的工作方式都相同。

* * *

您可以通过运行以下程序轻松验证它们是否存储在不同的段中：

```
char uninit1;
char uninit2;
char init1 = 1;
char init2 = 2;

int main (void)
{
  char local1 = 1;
  char local2 = 2;

  printf("bss\t%p\t%p\n", &uninit1, &uninit2);
  printf("data\t%p\t%p\n", &init1, &init2);
  printf("auto\t%p\t%p\n", &local1, &local2);
} 
```

您将看到“uninit”变量被分配在相邻的地址，但在与其他变量不同的地址。与“init”变量相同。“本地”变量可以分配到任何地方，因此您可以从这两个变量中获得任何类型的奇怪地址。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-09T10:57:31.903

我不确定答案，但我有根据的猜测是：

bss 段的大小在目标文件中，并以大小显示-> 毕竟必须分配它。

但是当 bss 段增长时，目标文件不会增长。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-09T10:58:04.260

`a.out`可能不是目标文件，它可能是 ELF - 完整的可执行文件。可重定位对象，通常命名为*name* .o，是链接发生之​​前的中间文件。请参阅 gcc 的 -c 选项。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-09T11:56:33.707

bss 段会增长，但您的二进制文件中不需要此段（请参阅 objcopy）。

因此，最终如果您将此代码放入某种 ROM 中，它不会占用任何空间，但需要 RAM 中的空间（以及将其初始化为 0 的代码）。

# spring - Spring MVC 3.1 RESTful 控制器

> ID：12798488
> 
> 赞同：2
> 
> 时间：2012-10-09T10:52:25.007
> 
> 标签：spring, rest, jakarta-ee

我即将编写一个 Spring MVC 控制器来服务/接收 HTML 表单和 JSON。最好的方法似乎是使用 RESTful 控制器，但作为我写的第一个控制器，我想把它做好！

是否有可能有一种方法，如果它是一个 HTML 请求，将返回一个由 InternalResourceViewResolver 呈现的视图，或者如果它是一个 ajax 请求，将一个实体呈现为 JSON？

更新也是如此，您能否编写一个控制器方法来接受从传入 JSON 转换的对象或来自 HTML 表单的 @Valid 对象，具体取决于内容类型？

在我看来，您必须能够做到，否则为什么使用 sf taglib 表单元素在 HTML 表单中支持 DELETE 和 PUT？只是似乎无法在任何地方找到如何做到这一点的解释！

干杯! NFV

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T18:27:08.573

我会试一试。

这是我在`Configuration`课堂上的内容：

```
@Bean(name = "viewResolver")
public ContentNegotiatingViewResolver viewResolver() {
    final ContentNegotiatingViewResolver contentNegotiatingViewResolver = new ContentNegotiatingViewResolver();
    contentNegotiatingViewResolver.setOrder(1);
    contentNegotiatingViewResolver.setFavorPathExtension(true);
    contentNegotiatingViewResolver.setFavorParameter(true);
    contentNegotiatingViewResolver.setIgnoreAcceptHeader(false);
    final Map<String, String> mediaTypes = new HashMap<String, String>();
    mediaTypes.put("json", "application/x-json");
    mediaTypes.put("json", "text/json");
    mediaTypes.put("json", "text/x-json");
    mediaTypes.put("json", "application/json");
    mediaTypes.put("xml", "text/xml");
    mediaTypes.put("xml", "application/xml");
    contentNegotiatingViewResolver.setMediaTypes(mediaTypes);
    final List<View> defaultViews = new ArrayList<View>();
    defaultViews.add(jsonView());
    defaultViews.add(xmlView());
    contentNegotiatingViewResolver.setDefaultViews(defaultViews);
    return contentNegotiatingViewResolver;
}

@Bean(name = "xStreamMarshaller")
public XStreamMarshaller xStreamMarshaller() {
    return new XStreamMarshaller();
}

@Bean(name = "xmlView")
public MarshallingView xmlView() {
    final MarshallingView marshallingView = new MarshallingView(xStreamMarshaller());
    marshallingView.setContentType("application/xml");
    return marshallingView;
}

@Bean(name = "jsonView")
public MappingJacksonJsonView jsonView() {
    return new MappingJacksonJsonView();
} 
```

这就是`Controller`.

```
@RequestMapping(value = { "/pets" }, method = RequestMethod.GET)
public String list(Model model) {
    model.addAttribute("pets", petRepository.findAll());
    return "pets/list";
}

@RequestMapping(value = { "/pets" }, method = RequestMethod.POST)
public String create(@Valid @RequestBody Pet pet, Model model) {
    petRepository.save(pet);
    return "redirect:pets/read/" + pet.getId();
}

@RequestMapping(value = { "/pets/{petId}" }, method = RequestMethod.GET)
public String read(@PathVariable Integer petId, Model model) {
    model.addAttribute("pet", petRepository.findOne(petId));
    return "pets/read";
}

@RequestMapping(value = { "/pets" }, method = RequestMethod.PUT)
public String update(@Valid @RequestBody Pet pet, Model model) {
    petRepository.save(pet);
    return "redirect:pets/read/" + pet.getId();
}

@RequestMapping(value = { "/pets/{orderId}" }, method = RequestMethod.DELETE)
public void delete(@PathVariable Integer petId, Model model) {
    petRepository.delete(petId);
} 
```

根据我的经验，您可以将 HTML 表单或 JSON 对象作为`@RequestBody`. 试试看。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T11:16:52.780

It's surely possible but I don't see why that would be useful.

In my opnion a controller method should be created for every action you will need, making a controller handle 2 different kinds of input will make this controller method complicated to read and maintain over time.

A way to do it is using consumes in @RequestMapping annotation like this, then you write 2 methods and each watches for it's kind of input.

```
@RequestMapping(value = "/pets", method = RequestMethod.POST, consumes="application/json"); 
```

[source of this code](http://static.springsource.org/spring/docs/current/spring-framework-reference/html/mvc.html)

# unity3d - Unity Frustum 剔除问题

> ID：12798492
> 
> 赞同：2
> 
> 时间：2012-10-09T10:52:32.673
> 
> 标签：unity3d, frustum, culling

我正在创建一个利用偏心投影的游戏。我已经将我的游戏设置在一个集群中渲染的 CAVE 中，超过 8 台 PC，其中每只眼睛使用 4 台 PC（这会产生立体效果）。为了帮助在 CAVE 中对齐，我实现了一个偏离中心的投影类。

这个类只是告诉相机它的左上角、左下角和右下角是什么。从这里，它会创建一个新的投影矩阵，向玩家展示他们世界的左侧和右侧。然而，在 Unity 的编辑器中，摄像机仍然是面向前方的，因此 Unity 内部的剔除并没有渲染出现在左右屏幕上的一半图像。

有谁知道在 Unity 中关闭剔除或找到解决投影矩阵问题的方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-07-24T15:50:51.450

看看这个。您可以在那里找到可以解决您的问题的特定设置。还要考虑剔除层。每一层都可以有自己的剔除距离。也许您的相机设置弄乱了它们。

*   [Camera.stereoConvergence](http://docs.unity3d.com/ScriptReference/Camera-stereoConvergence.html)
*   [Camera.stereoSeparation](http://docs.unity3d.com/ScriptReference/Camera-stereoSeparation.html)

# java - Java XML 到 HTML

> ID：12798496
> 
> 赞同：0
> 
> 时间：2012-10-09T10:52:34.757
> 
> 标签：java, xml, xml-parsing

我有一个 XML 文件，其中包含 CDATA 中的另一个 XML，如下所示

```
 ... <report format="CP XML" ><![CDATA[<?xml version="1.0"
 encoding="UTF-8" standalone="yes"?> ... 
```

我需要通过遍历 CDATA 将 XML 转换为 HTML 文件。

将简单的 XML 转换为 HTML 很容易，但是如何转换上述类型的 XML（在 CData 中）。

有没有办法做到这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T12:39:09.230

是的，您可以使用[XSLT](http://en.wikipedia.org/wiki/XSLT)来读取 CDATA 中的 XML。

```
<xsl:value-of select="/report"></xsl:value-of> 
```

将返回 CDATA 标记内的 XML，当然您可以使用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T11:12:12.900

第一：当您说将简单的 XML 转换为 HTML 很容易时，您是什么意思？这是否意味着你有一个现有的软件呢？

鉴于此，我希望您可以提取内部 XML，遍历它，在外部 XML 中用空字符串替换它，遍历修改后的外部 XML，然后将第一个生成的 HTML 插入另一个。

问题是：你期望什么样的结果？我假设您将一个 HTML 嵌套到另一个 HTML 中，这可能不再是有效的 HTML。

# php - 如何将我检索到的值变成页面 SQL

> ID：12798501
> 
> 赞同：-2
> 
> 时间：2012-10-09T10:52:52.003
> 
> 标签：php, sql

我有存储在 MySQL 数据库中的信息，它有 1000 多行，我需要为结果制作页面，对于每页 50 个结果，我该如何制作这样的东西？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T10:54:21.750

读：

*   [http://www.9lessons.info/2009/09/pagination-with-jquery-mysql-and-php.html](http://www.9lessons.info/2009/09/pagination-with-jquery-mysql-and-php.html) (jQuery)
*   [http://www.phpeasystep.com/phptu/29.html](http://www.phpeasystep.com/phptu/29.html)

# entity-framework - 实体框架 - 实体只读属性映射到相关表的列

> ID：12798502
> 
> 赞同：9
> 
> 时间：2012-10-09T10:52:53.747
> 
> 标签：entity-framework, entity-framework-4, ef-database-first

我有一个有趣的问题要解决，但虽然很常见，但它看起来并不容易通过 Entity Framework 实现。有两个表：

```
Player(Id,TeamId,FirstName,LastName)
Team(Id, Name, IsProfessional) 
```

玩家只能属于一支球队。使用 TPT（DB first），我们有两个类映射到这些表：

```
public class Player
{
   public int Id{get;set;}
   public int TeamId{get;set;}
   public string FirstName{get; set;}
   public string LastName{get; set;}
   public Team Team{get;set;}
}

public class Team
{ 
   public int Id{get; set;}
   public string Name{get;set;}
   public bool IsProfessional{get;set;}
   public IEnumerable<Player> Players{get;}
} 
```

我想要实现的是 Player 实体上的属性 IsProfessional：

```
public class Player
    {
       public int Id{get;set;}
       public int TeamId{get;set;}
       public string FirstName{get; set;}
       public string LastName{get; set;}
       public Team Team{get;set;}
       **public bool IsProfessional{get;}** should be read-only
    } 
```

是否可以在 linq 查询中使用 IsProfessional 属性来配置映射？

```
var result= db.Players.Where(p=>p.IsProfessional==true); 
```

并在每次实现 Player 实体时填充该字段？

```
Player pl = db.Players.Where(p=>p.FirstName="Lionel").FirstOrDefault();
if(pl.IsProfessional)
{
//do something...
} 
```

已经尝试过：

*   **实体拆分**。不可能，因为我想保留团队映射并且因为关系不是 1:1）
*   **将播放器实体映射到数据库视图**。不喜欢它，因为玩家实体还有我需要的其他关系。我知道可以手动创建它们，但是从数据库更新 edmx 会重置 ssdl。

谢谢

**解决方案**

基于 Gert Arnold 回答中的第二个选项，适合我需要的解决方案如下：

1.  我创建函数`GetIsProfessional`（必须这样做，因为计算字段通常只能从自己的表字段中创建）

    ```
    CREATE FUNCTION [dbo].[GetIsProfessional](@teamId as INT)
    RETURNS bit

    BEGIN

    DECLARE @isProfi AS bit

    SELECT @isProfi = IsProfessional
    FROM Teams
    WHERE Id = @teamId

    RETURN @isProfi

    END 
    ```

2.  `Player`我在表上创建了计算字段

    ```
    ALTER TABLE Players ADD [IsProfessional] AS dbo.GetIsProfessional(TeamId) 
    ```

3.  当我使用 db first 方法时，我只是从数据库中更新模型，仅此而已，我可以在该字段上进行查询，并在 Player 对象物化时预先填充它。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-10T10:33:45.217

EF 无法做到这一点。有一些选项不能完全满足您的要求，但或多或​​少会接近：

1.  在您的上下文中创建一个属性，该属性`TeamPlayers`返回包含团队的球员，这样`player.Team.IsProfessional`即使上下文已经被处理，您也可以始终执行此操作。

    ```
    public IQueryable<Player> TeamPlayers
    {
        get { return this.Players.Include("Team"); }
    } 
    ```

2.  在数据库表中创建一个计算字段并使用 映射到它`DatabaseGeneratedOption.Computed`。

3.  在其中创建一个静态属性，`Player`该属性返回访问的表达式`Team.IsProfessional`（需要包含生活上下文或团队）：

    ```
    public static Expression<Func<Player, bool>> IsProfessional
    {
        get { return p => p.Team.IsProfessional; }
    }
    ...
    db.Players.Where( p=> p.FirstName="Lionel").Where(Player.IsProfessional).... 
    ```

我更喜欢计算字段，因为它总是被填充，所以你可以在上下文范围内外使用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T20:47:13.270

如果您将 Player 扩展为拥有从 Team 中提取的属性怎么办？

```
public partial class Player
{
   public int Id{get;set;}
   public int TeamId{get;set;}
   public string FirstName{get; set;}
   public string LastName{get; set;}
   public Team Team{get;set;}

   public bool IsProfessional{ get { return Team.IsProfessional; } }
} 
```

当然，如果您担心重新生成 EDMX，可以将其设为部分：

```
public partial class Player
{
   public bool IsProfessional{ get { return Team.IsProfessional; } }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-05T00:20:42.043

您可以使用[***`System.ComponentModel.DataAnnotations.Schema.NotMappedAttribute`***](http://msdn.microsoft.com/en-us/library/system.componentmodel.dataannotations.schema.notmappedattribute.aspx)来防止***`IsProfessional`***这些属性的映射：

```
// Mapped part of entity
public class Player
{
    public int Id { get; set; }
    public int TeamId { get; set; }
    public string FirstName { get; set; }
    public string LastName { get; set; }
    public Team Team { get; set; }
}

// Unmapped part of entity
using System.ComponentModel.DataAnnotations.Schema;
...
public partial class Player
{
    [NotMapped()]
    public bool IsProfessional { get { /* ... IsProfessional calculation logic comes here ... */ } }
} 
```

我在方法中使用了这个属性，***`EF5's Model First`***我查询了一遍***`DbContext/DbSet`***，***`ObjectContext/ObjectQuery`***没有任何异常。（100% 测试）

# cuda - CUDA 全局内存事务的成本

> ID：12798503
> 
> 赞同：5
> 
> 时间：2012-10-09T10:52:55.640
> 
> 标签：cuda

根据 CUDA 5.0 Programming Guide，如果我同时使用 L1 和 L2 缓存（在 Fermi 或 Kepler 上），所有全局内存操作都使用 128 字节内存事务完成。但是，如果我只使用 L2，则使用 32 字节内存事务（第 F.4.2 章）。

让我们假设所有缓存都是空的。如果我有一个扭曲，每个线程以完全对齐的方式访问一个 4 字节字，这将导致 L1+L2 情况下的 1x128B 事务，以及仅 L2 情况下的 4x32B 事务。那正确吗？

我的问题是 - 4 个 32B 事务是否比单个 128B 事务慢？我对 Fermi 之前的硬件的直觉表明它会更慢，但也许这在较新的硬件上不再适用？或者也许我应该只看带宽利用率来判断我的内存访问效率？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-09T14:16:15.493

是的，在缓存模式下，将生成一个 128 字节的事务（从 L1 缓存级别来看）。在非缓存模式下，将生成四个 32 字节的事务（从 L2 缓存级别来看 - 它仍然是一个 128 字节的请求来自由于合并导致的扭曲。）在您描述的情况下，对于完全合并的访问，四个 32 字节的事务并不慢，无论是缓存模式还是非缓存模式。在任何一种情况下，内存控制器（在给定的 GPU 上）都应该生成相同的事务以满足 warp 的请求。由于内存控制器由多个（最多 6 个）“分区”组成，每个分区都有一个 64 位宽的路径，最终将使用多个内存事务（可能跨越多个分区）来满足任一请求（4x32 字节或1x128 字节）。跨分区的特定事务和组织数量可能因 GPU 而异，（这不是您的问题的一部分，但是具有 DDR 泵送内存的 GPU 将在每个内存事务中每个分区返回 16 字节，并且使用 QDR 泵送内存，每个内存事务的每个分区将返回 32 个字节）。这也不是特定于 CUDA 5 的。您可能想回顾一下 NVIDIA 的[此材料的网络研讨会](http://developer.nvidia.com/cuda/gpu-computing-webinars)，特别是“CUDA 优化：内存带宽限制内核”。即使您不想看[视频](http://developer.download.nvidia.com/CUDA/training/Optimizing_Mem_limited_kernels.mp4)，快速浏览一下[幻灯片](http://developer.download.nvidia.com/CUDA/training/bandwidthlimitedkernels_webinar.pdf)也会提醒您所谓的“缓存”和“未缓存”访问（这里指的是 L1）之间的各种差异，并为您提供尝试每种情况所需的编译器开关。

查看幻灯片的另一个原因是它会提醒您在什么情况下您可能想尝试“未缓存”模式。特别是，如果您的 warp 有分散（未合并）访问模式，则未缓存模式访问可能会产生改进，因为与 128 字节相比，从内存中请求 32 字节数量以满足单个线程的请求时“浪费”更少数量。但是，在回答您的最后一个问题时，很难对其进行分析，因为您的代码可能是有序和无序访问模式的混合体。由于未缓存模式是通过编译器开关打开的，因此幻灯片中给出的建议只是“尝试两种方式的代码”，看看哪个运行得更快。在我的经验中，

编辑：对不起，我有错误演示文稿的链接和标题。固定幻灯片/视频链接和网络研讨会标题。

# java - 在 Java 中插入 Integral 的最快方法是什么？

> ID：12798517
> 
> 赞同：0
> 
> 时间：2012-10-09T10:53:42.120
> 
> 标签：java, math, interpolation, integral

我有很多数据点，我想计算滑动窗口曲线下的面积。但它应该很快。我用谷歌搜索了一下，在 Java 中找到了一个 NewtonCotes 实现，但我不知道是否有更快的方法。

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T11:44:04.907

答案取决于您尝试集成的功能。如果应用于正确的函数，高斯求积确实可以非常有效。5 阶自适应 Runga-Kutta 也可以做得很好。

一种自动增加细化以满足给定精度要求的自适应方法是非常可行的。

编写最快的代码是一个库：

[http://commons.apache.org/math/](http://commons.apache.org/math/)

我会推荐一本书，比如《[数字食谱](http://www.amazon.com/s/ref=nb_sb_noss_1?url=search-alias=aps&field-keywords=numerical%20recipes)》或[Forman Acton](https://rads.stackoverflow.com/amzn/click/com/0883854503)的另一本书。

# mysql - MYSQL - 根据条件更新新列的值

> ID：12798520
> 
> 赞同：3
> 
> 时间：2012-10-09T10:53:55.317
> 
> 标签：mysql, database, sql-update

我有下表

```
+--------------+------------+------+-----+---------+-------+
| Field        | Type       | Null | Key | Default | Extra |
+--------------+------------+------+-----+---------+-------+
| image_id     | int(11)    | YES  |     | NULL    |       |
| image_status | bit(3)     | YES  |     | NULL    |       |
| image_result | varchar(4) | YES  |     | NULL    |       |
+--------------+------------+------+-----+---------+-------+ 
```

image_id 和 image_status 列填充了值。image_result 中的值都是 NULL。

我想根据以下条件将以下值插入到 image_result 列中（我想更新表中的所有行）-

*   如果 image_status = '0' OR image_status = '3' 那么 image_result = 'Pass'
*   如果 image_status = '1' OR image_status = '4' 那么 image_result = 'Warn'
*   如果 image_status = '2' 那么 image_result = 'Fail'

我该怎么做以上？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-09T10:58:13.070

```
UPDATE table 
SET image_result = CASE 
    WHEN image_status = 0 OR image_status = 3 THEN 'Pass' 
    WHEN image_status = 1 OR image_status = 4 THEN 'Warm' 
    ELSE 'Fail' 
END 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-09T11:00:21.620

```
UPDATE TableName
SET image_result = CASE 
                     WHEN image_status = '0' OR image_status = '3' THEN 'PASS'  
                     WHEN image_status = '1' OR image_status = '4' THEN 'Warn' 
                     WHEN image_status = '2' THEN 'Fail'
                   END
WHERE image_status IN('0', '1', '2', '3', '4'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-09T10:57:52.420

```
update <table> set image_result = 
Case when image_status = '0' OR image_status = '3' then 'Pass'
     when image_status = '1' OR image_status = '4' then 'Warn'
     when image_status = '2'                       then 'Fail'
End 
```

# matlab - 仅当鼠标单击 xy 坐标时的数据标签

> ID：12798523
> 
> 赞同：1
> 
> 时间：2012-10-09T10:54:16.137
> 
> 标签：matlab, user-interface

嗨，我的问题与

[在图中按顺序标记点](https://stackoverflow.com/questions/4140312/labeling-points-in-order-in-a-plot)

和

[xy 散点图中每个条目的数据标签](https://stackoverflow.com/questions/7100398/data-label-on-each-entry-in-xy-scatter?lq=1)

但我想让标签仅在用户单击相应坐标时才可见。我的图表在散点图（172）上有很多点，因此无法标记所有点。

谢谢

# java - 在 Netbeans 中包含本机库

> ID：12798530
> 
> 赞同：10
> 
> 时间：2012-10-09T10:54:53.900
> 
> 标签：java, netbeans-7, unsatisfiedlinkerror, java.library.path, wpd

我正在尝试从 java 签名的小程序中读取便携式设备....我在 [http://code.google.com/p/jmtp/w/list](http://code.google.com/p/jmtp/w/list)上找到了一个 jmtp 库来访问便携式设备，但是当我运行它时netbeans 它给出了错误

```
    线程“主”java.lang.UnsatisfiedLinkError 中的异常：java.library.path 中没有 jmtp
        在 java.lang.ClassLoader.loadLibrary(ClassLoader.java:1860)
        在 java.lang.Runtime.loadLibrary0(Runtime.java:845)
        在 java.lang.System.loadLibrary(System.java:1084)
        在 jmtp.PortableDeviceManagerImplWin32.(PortableDeviceManagerImplWin32.java:38)
        在 jmtp.PortableDeviceManager.(PortableDeviceManager.java:34)
        在 jmtp.Jmtp.main(Jmtp.java:23)
    Java 结果：1

```

我搜索并发现我必须将 .dll 文件作为本机库包含在 jmtp 项目中...我右键单击项目并导航到属性，然后选择“运行”并选择 VM 选项为

```
-Djava.library.path="c:\jmtp\native\windows"
```

并将 jmtp.dll 文件放在 c:\jmtp 文件夹中

但同样的错误不断出现我的代码是

```
    打包 jmtp；

```
import jmtp.PortableDevice;
import jmtp.PortableDeviceManager;
import jmtp.PortableDeviceObject;
import jmtp.PortableDeviceStorageObject;

public class Jmtp {

    public static void main(String[] args) {
        PortableDeviceManager manager = new PortableDeviceManager();
        PortableDevice device = manager.getDevices()[0]; 

        // Connect to my mp3-player
        device.open();
        System.out.println(device.getModel());
        System.out.println("---------------");

        // Iterate over deviceObjects
        for(PortableDeviceObject object : device.getRootObjects()) {

            // If the object is a storage object
            if(object instanceof PortableDeviceStorageObject) {
                PortableDeviceStorageObject storage = (PortableDeviceStorageObject)object;

                for(PortableDeviceObject o2 :  storage.getChildObjects()){
                    System.out.println(o2.getName());
                 }              
            }
        }
        manager.getDevices()[0].close();

    }
} 
```

请告诉我是什么问题

            回答 #1

赞同：25

时间：2012-10-10T09:00:34.130

最后我找到了解决方案，为了包含本机库，我们需要在 netbeans 中添加以下步骤

```
     ==>右键单击项目
     ==>属性
     ==>点击运行
     ==>VM 选项：-Djava.library.path="C:\Your 存在 Dll 的目录"
     ==>好的

```

            回答 #2

赞同：6

时间：2013-10-26T01:03:24.410

您还可以使用以下行从程序中加载库：

```
System.loadLibrary("jmtp") 
```

将包含该文件的文件夹`jmtp.dll`直接放在 Java 项目下。

或者，我尝试了这个并且它有效：

```
System.setProperty( "java.library.path", "libs" ); 
```

而“libs”是包含 dll 的文件夹，直接放在 java 项目文件夹下。

我注意到`jmtp.dll`64 位 JDK 出现以下异常：

```
Exception in thread "main" java.lang.UnsatisfiedLinkError: libs/jmtp (.\libs/jmtp.dll is not a valid Win32 application. )
    at java.lang.ClassLoader.loadLibraryWithPath(ClassLoader.java:1018)
    at java.lang.ClassLoader.loadLibraryWithClassLoader(ClassLoader.java:982)
    at java.lang.System.loadLibrary(System.java:506)
    at podcasts.Transferer.main(Transferer.java:28) 
```

您需要在 32 位 JDK 上运行该程序才能使其正常工作。

            回答 #3

赞同：1

时间：2016-06-17T14:51:21.433

在为此苦苦挣扎了一段时间后，我找到了解决该问题的有效解决方案。

我`System.out.println(System.getProperty("java.library.path"));`
在我的代码中使用来找出`java.library.path`我系统上的实际值。它至少是`%PATH%`系统变量和用户环境变量的串联。所以我需要做的就是将我的库的位置添加到其中的任何一个中，问题就消失了。

```

# asp.net - 上下文不是asp.net用户控件中的成员

> ID：12798534
> 
> 赞同：2
> 
> 时间：2012-10-09T10:55:03.263
> 
> 标签：asp.net, web-user-controls

我刚刚在一个 asp.net webapplication 项目中创建了新的用户控件。

创建后，源代码如下所示：

```
<%@ Control Language="VB" AutoEventWireup="false" CodeFile="SSR_Project.ascx.vb" Inherits="CS_SSR_RAIO.SSR_Project" %> 
```

但是，一旦我向其中添加了一些额外的代码，第一行的错误就会立即出现：

> 上下文不是 'CS_SSR_RAIO.SSR_Project 的成员

我确实有其他用户控件似乎具有完全相同的声明，但没有此错误。

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-12-04T09:50:37.573

我收到此错误是因为它找不到我的新用户控件的代码隐藏类。我有这个是因为我复制了一个用户控件，它位于一个命名空间中，我没有正确地添加到继承属性中。

添加了命名空间前缀，它又开始工作了:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-22T17:35:07.290

我在以下情况下发生了这种情况：

使用VS2008 中的*网站*（而不是*项目）：*

1）我*复制*了一个现有的/正在运行的用户控件（如`CTRL`+单击、拖放、拖放）
2）我稍微修改了副本（将列表视图的数据源附加到不同的存储过程）

* * *

我将其修复如下：

1）创建一个新的用户控件（在VS中添加新项目）
2）打开我最初复制的.ascx，这次只需复制所有标记，并将其粘贴到新用户控件的.ascx中。
3) .ascx.vb 文件也一样——打开要复制的文件，复制所有代码，然后将其粘贴到新用户控件的 .asc.vb 文件中

* * *

如果你只看旧文件和新文件，就没有什么解释了——它们看起来是一样的。对我来说不同的是，复制*文件*失败，而复制文件内容成功。

*我怀疑这可能与部分类有关，以及在网站上*工作时无法访问所有部分的事实。我认为当涉及到*项目*时，您*可以*访问所有部分——如果是这样的话，我将能够看到导致问题的原因。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-09T11:19:30.183

Ensure that the Control inherits from System.Web.UI.UserControl

The code behind (SSR_Project.ascx.vb) should have the following

```
public partial class SSR_Project : System.Web.UI.UserControl 
```

Sorry that is C# syntax though .. but you get the picture :)

Edit: I think this is the Vb syntax ..

> Public MustInherit Class SSR_Project Inherits System.Web.UI.UserControl

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-11-18T14:35:44.053

复制现有控件然后粘贴和编辑可能会导致此问题。查看 .aspx.vb 页面顶部的“Web 表单设计器生成的代码”块。必须列出每个控件：即“Protected WithEvents lblX As System.Web.UI.WebControls.Label”将您粘贴的控件添加到列表中，您就可以开始了

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-09T14:30:37.863

感谢 zybroxz 和 Konstantin D 的帮助。
最后，我从解决方案中删除了用户控件，再次添加它并将相同的代码粘贴到其中，一切正常。我确实注意到用户控件的设计器第一次尝试为空，第二次正确填充。

如果在创建用户控件期间出现问题并且此错误渗透到 pdp 文件中并因此无法删除，我不会感到惊讶...

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-09T14:37:27.990

您可以访问您的上下文，`but your class must inherit from UserControl`

链接： http: [//msdn.microsoft.com/fr-fr/library/system.web.ui.control.context (v=vs.80).aspx](http://msdn.microsoft.com/fr-fr/library/system.web.ui.control.context(v=vs.80).aspx)

![在此处输入图像描述](../Images/103b1358ee39b9a762dbf8c812e3282f.png)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-04-16T10:23:43.370

对我来说，在 VB.Net 中，问题是这样的：

如果你有这个错误：`error BC30456: "AnyPublicMethodOrProperty" is not a member of 'UserControl'`

是因为用户控件被声明为泛型`UserControl`而不是完全继承的类，因此，在设计器父页面中，（例如：）`default.aspx.designer.vb`控件属性应该使用确切的类名声明，而不是使用继承的 UserControl 类。

所以...尝试在设计器父页面中找到它：

```
'''<summary>
'''UcYourControlName control.
'''</summary>
'''<remarks>
'''Auto-generated field.
'''To modify move field declaration from designer file to code-behind file.
'''</remarks>
Protected WithEvents ucYourControlName As Global.System.Web.UI.UserControl 
```

并将其替换为：

```
'''<summary>
'''UcYourControlName control.
'''</summary>
'''<remarks>
'''Auto-generated field.
'''To modify move field declaration from designer file to code-behind file.
'''</remarks>
Protected WithEvents ucYourControlName As Global.Wherever.Your.UserControl.Namespace.Is.Located.UcYourControlNameClass 
```

# javascript - JavaScript 在用户输入开始/结束日期时显示到期日期

> ID：12798535
> 
> 赞同：0
> 
> 时间：2012-10-09T10:55:05.070
> 
> 标签：javascript, date

**以前从未在 JavaScript 中编程过，所以我请求您帮助在用户从日历**中选择开始和结束日期时显示到期日期。从**日历**中选择结束日期后，到期日期应显示为结束日期增加了两个月。例如：用户选择 2012 年 10 月 9 日作为开始日期；2012年10月16日为结束日期；2012 年 12 月 16 日应为到期日。如何在 JavaScript 中实现这一点？

请检查此代码，因为我不知道如何编辑此代码。

```
/**
 * Click "Cal" on expiry date
 */
function getExpiryDate() {
if(!document.getElementById('enddate').value.length) {
    alert("End date must be set first.");
}
else {
    prevExpiryDate = document.getElementById('expirydate').value;
    displayCalendar(document.forms[0].expirydate,'yyyy/mm/dd',
        document.getElementById('expirydatebutton'));
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T10:59:39.020

我认为您需要查看 datejs。

[http://www.datejs.com/](http://www.datejs.com/)

扩展 Javascript 日期功能的库。

允许您执行以下操作：-

```
// Add 2 months to Today
Date.today().add(2).months(); 
```

这几乎涵盖了您的要求。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T11:07:29.253

由于您想在当前日期上增加 2 个月，

```
var d = new Date(year, month, day);
d.setMonth(d.getMonth() + 2); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-09T11:09:12.263

JavaScript 包含一个本机`Date`对象，您可以按如下方式向其添加月份...

```
var endDate = document.getElementById('enddate').value;
var date = new Date(endDate);
date.setMonth(date.getMonth() + 2); // Yes it will calculate going over a year etc
prevExpiryDate = date.getFullYear() + "/" + 
                 (date.getMonth() + 1) + "/" + // Months are 0 for January etc.
                 date.getDate(); 
```

**笔记**

*   您向对象输入值的格式`Date`很重要，您需要先验证这一点。
*   当我们创建到期日期时，该值不会在 2012/12/09 之前添加零，而是 2012/12/9

或者您可以按照建议使用库

**编辑**更新的代码，使其更容易添加到 OP 的代码中

**替代方法**，使用事件处理程序，我可以在您的代码中看到您正在使用 jQuery，如果您包含它，请充分利用它......

```
$("#enddate").change(function() {
  var endDate = $(this).val();

  // Calculate expiry date
  var date = new Date(endDate);
  date.setMonth(date.getMonth() + 2);

  // Get date parts
  var yyyy = date.getFullYear();
  var m = date.getMonth() + 1;
  var d = date.getDate();

  $("#expirydate").val(yyyy + "/" + m + "/" + d);
}); 
```

这需要在文档准备好后的某个时间运行，在您的代码行 441 中，它将设置 enddate 字段以在每次更改时更新到期日期字段。如果您以编程方式更改它，您可能需要手动调用更改处理程序

```
// Insert value programmatically
$("#enddate").val(newValue).change(); 
```

否则，您需要一种将初始值传递给`displayCalendar`函数的方法，我没有关于该函数如何工作的详细信息，因此我无法最好地建议如何做到这一点。

**编辑**该函数是 2006 年 DHTMLGoodies JS 日历的一部分，它调用 onchange 但与 jQuery 不兼容，所以你需要做的是使用元素的基本 onchange 属性来替换上面的 jQuery 代码。 .

```
document.getElementById("enddate").onchange = function() {
  var endDate = this.value;

  // Calculate expiry date
  var date = new Date(endDate);
  date.setMonth(date.getMonth() + 2);

  // Get date parts
  var yyyy = date.getFullYear();
  var m = date.getMonth() + 1;
  var d = date.getDate();

  document.getElementById("expirydate").value = yyyy + "/" + m + "/" + d;
} 
```

# htmlunit - HtmlUnit：禁用错误 401 的异常？

> ID：12798540
> 
> 赞同：0
> 
> 时间：2012-10-09T10:55:17.727
> 
> 标签：htmlunit

我正在使用 HtmlUnit 连接到网站 X，
在其代码中，站点 X 调用站点 Y，
由于防火墙，站点 Y 无法访问，返回 401 Unauthorized 错误，
=> 整个调用`WebClient.getPage()`失败并显示`FailingHttpStatusCodeException`.

即使没有来自 Y 的东西，有没有办法忽略 401 错误并加载页面 X？
我的代码中已经有了`webClient.setThrowExceptionOnFailingStatusCode(false);`。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T11:19:38.873

In my case it turned out website Y was called by javascript, as I didn't need js on that page doing `webClient.setJavaScriptEnabled(false);` fixed the problem.

However I still feel like HtmlUnit error reporting should be a bit more smart then: throw exception vs do nothing.

# c# - WPF中单击动态生成的按钮时控件无法进入方法

> ID：12798542
> 
> 赞同：1
> 
> 时间：2012-10-09T10:55:18.243
> 
> 标签：c#, wpf, data-binding, button

我很抱歉标题很奇怪。我正在处理 UI 组件的动态生成。我的 Xaml 类中有一个 ListBox 动态生成按钮。

**看法：**

```
<ListBox x:Name="SetButtonList" ItemsSource="{Binding}" >
         <ListBox.ItemTemplate>
               <DataTemplate >
                     <Grid>                                   
                         <Button Content="{Binding Path=SetButtonFreq}" Command="{Binding Path=SetFreqCommand}" />                                    
                     </Grid>
               </DataTemplate>
         </ListBox.ItemTemplate>
</ListBox> 
```

**视图模型：**

```
private ICommand mSetFreqCommand;
public ICommand SetFreqCommand
    {
        get
        {
            if (mSetFreqCommand == null)
                mSetFreqCommand = new DelegateCommand(new Action(SetFreqCommandExecuted), new Func<bool>(SetFreqCommandCanExecute));

            return mSetFreqCommand;
        }
        set;            
    }

    public bool SetFreqCommandCanExecute()
    {
        return true;
    }

    public void SetFreqCommandExecuted()
    {
        // Executes the Body when Button is Clicked
    } 
```

**模型：**

```
private string _SetFreqValue = "";
public String SetButtonFreq
    {
        set; get;            
    }

    public ClockModel(string SetButtonFreq)
    {
        this.SetButtonFreq = SetButtonFreq;
    }        

    public override string ToString()
    {
        return _SetFreqValue;
    } 
```

**查看.cs 文件：**

```
// mClock is object of Model Class
mClock.Add(new ClockModel("Set 12.0 MHz"));
mClock.Add(new ClockModel("Set 12.288 MHz"));
mClock.Add(new ClockModel("Set 15.36 MHz"));
mClock.Add(new ClockModel("Set 19.2 MHz")); 
```

这在我的列表框中为我提供了 4 个不同频率的按钮。但是当我尝试单击它们时，控件不会进入该`SetFreqCommandExecuted()`方法。我在哪里犯错？:(

请帮忙

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T11:00:38.843

该按钮尝试在绑定项目中找到**SetFreqCommand** ，而不是在当前页面的常规**ViewModel中。**您可以使用此绑定修复它：

```
Command="{Binding ElementName=SetButtonList, Path=DataContext.SetFreqCommand}" 
```

# xml - 用xml源填充静态pdf

> ID：12798550
> 
> 赞同：1
> 
> 时间：2012-10-09T10:55:49.410
> 
> 标签：xml, pdf, itextsharp, livecycle-designer, xfa

我正在生成填充了 xml 数据源的动态 pdf 文件： pdf 是在 LiveCycle Designer 中创建的，然后我使用 iTextSharp 动态填充它：

```
stamper.AcroFields.Xfa.FillXfaForm(sourceXml); 
```

然而，一些移动设备在打开动态 pdf（苹果、安卓）时遇到问题，所以我正在寻找一种方法在填写 xfa 表单后使我的 pdf 静态。如果以编程方式无法做到这一点，也许有人知道如何使用 Adob​​e Acrobat 做到这一点。

# php - PHP - 电子商务系统或 CMS 的框架

> ID：12798553
> 
> 赞同：0
> 
> 时间：2012-10-09T10:55:54.477
> 
> 标签：php, mysql

几年后，我因为一个项目（它是一个电子商务系统）而回到 PHP。我正在寻找一些好的骨架，其中包括：

*   数据库设置，数据库层（MySQL）
*   处理错误（不向用户的输出显示错误 - 以通过电子邮件处理电子邮件的最佳方式）
*   基本的前端和后端（管理）
*   其他东西会是一个加号

你能给我推荐一些东西吗？我需要开发一个电子商务系统，但我不想从头开始。OpenCart、Magneto 等系统。我不想使用它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T11:09:40.587

你想建立一个电子商务项目。你为什么要发明一个新轮子？

构建一个好的自己的电子商务软件需要很多时间，尤其是支付和权利组件。**Magento**拥有支付和 SEO 所需的一切，还有更多其他软件，如**XTCommerce Veyton**或其他商店也可以做到。

*   否则，使用**Symfony2 之**类的框架并搜索**Shop Bundle**。

*   您可以使用 Typo3 并使用 Shop Extension。有很多方法。

但是自己构建是很多工作。

我认为您现在可以讨论这个问题，但在我看来，最好的解决方案是使用可以满足您所有或大部分需求的维护系统。

# java - 如何在 MacOS 上使用分隔符修复 JComboBox PopUp 的垂直位置？

> ID：12798556
> 
> 赞同：4
> 
> 时间：2012-10-09T10:56:03.727
> 
> 标签：java, macos, swing, jcombobox, separator

我正在使用*“在 JPanel 上添加 JSeparator 和 ComboBoxItem-to-render”* -ListCellRenderer 方法在 JComboBox 中显示分隔符。

我注意到 MacOS 上将 PopUp 上的选定项目垂直居中的算法被 JSeparator-ComboBoxItems 的高度变化弄糊涂了。

有没有办法修复此屏幕截图右侧看到的弹出窗口的错误位置？如果选择了“西班牙”-项目，它被画得有点太高了；“汽车”-项目太高了。

![JComboBox 分隔符 MacOs 错误](../Images/5e56b101fc1f141153e2868c023de0ba.png)

源代码：

```
import java.awt.BorderLayout;
import java.awt.Component;
import java.util.Arrays;
import javax.swing.JComboBox;
import javax.swing.JFrame;
import javax.swing.JList;
import javax.swing.JPanel;
import javax.swing.JSeparator;
import javax.swing.ListCellRenderer;

public class JComboBoxSeparatorMacOs {

    public static void main(String[] args) {
    JFrame frame = new JFrame();
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

        frame.add(new JComboBox<String>("A,Normal,Combo Box,without Separators".split(",")), BorderLayout.WEST);

        JComboBox<String> comboBox = new JComboBox<String>("Spain,Italy,Car,Peru".split(","));
        ListCellRenderer<String> renderer = new SeparatorListCellRenderer<String>(comboBox.getRenderer(), 0);
        comboBox.setRenderer(renderer);
        frame.add(comboBox);

        frame.pack();
        frame.setVisible(true);
    }
}

class SeparatorListCellRenderer<E> implements ListCellRenderer<E> {
    private final ListCellRenderer<? super E> delegate;
    private final int[] indexes;
    private final JPanel panel = new JPanel(new BorderLayout());

    public SeparatorListCellRenderer(ListCellRenderer<? super E> delegate, int... indexes) {
        Arrays.sort(indexes);
        this.delegate = delegate;
        this.indexes = indexes;
        panel.setOpaque(false);  //for rendering of selected item on MSWindows
    }

    @Override
    public Component getListCellRendererComponent(JList list, E value, int index, boolean isSelected, boolean cellHasFocus) {
        panel.removeAll();
        panel.add(delegate.getListCellRendererComponent(list, value, index, isSelected, cellHasFocus));
        if (Arrays.binarySearch(indexes, index) >= 0)
            panel.add(new JSeparator(), BorderLayout.PAGE_END);

        return panel;
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T16:55:03.467

这看起来像是一个`com.apple.laf.AquaComboBoxUI`试图公开更多*围绕*当前选择的列表的功能。它只是不希望列表包含`JSeparator`具有`com.apple.laf.AquaPopupMenuSeparatorUI`.

作为替代方案，请考虑以下方法之一：

*   使用 HTML 来装饰条目，例如

    ```
    new JComboBox("<html><b>Spain</b></html>,Italy,Car,Peru"… 
    ```

*   更改渲染器中的 ，如此[处](https://stackoverflow.com/a/5231915/230513)`Font`所示。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T11:43:54.470

*   我认为这个问题与//`Platoform`无关`Native OS``Look and Feel`

*   `JComboBox`,`JPopup`可以/不能被限制、改变、覆盖一些 Swing GUI Builders 中的一些方法

*   用于`JComboBoxes JPopup`使用[组合框弹出](http://tips4java.wordpress.com/2010/11/28/combo-box-popup/)窗口`@camickr`

*   也许`JSeparator`在`Renderer`可能有点不同

    a) 可能的输出`ActionListener`或`ItemListener`

    b）请注意，这不适用于正确`KeyListener`添加到派生`JList`（可能不重要）

图片

![在此处输入图像描述](../Images/8f2b7354417f6d4ff47405f44cc6f377.png)![在此处输入图像描述](../Images/a608633c3df3452838aaeb947211c018.png)

代码

```
import java.util.*;
import java.awt.*;
import java.awt.event.*;
import javax.swing.*;
import javax.swing.border.*;

public class ComboBoxWithSeparator extends JFrame {

    private static final long serialVersionUID = 1L;
    final String SEPARATOR = "SEPARATOR";

    public ComboBoxWithSeparator() {
        super("Block ComboBox Example");
        String[][] str = {{"A", "B", "C"}, {"1", "2", "3"}, {"abc", "def", "ghi"}};
        JComboBox combo = new JComboBox(makeVectorData(str));
        combo.setRenderer(new ComboBoxRenderer());
        combo.addActionListener(new BlockComboListener(combo));
        combo.setPrototypeDisplayValue("XXXXXXXXXXXXXXXXX");
        setLayout(new FlowLayout());
        JComboBox combo1 = new JComboBox(makeVectorData(str));
        combo1.setRenderer(new ComboBoxRenderer());
        combo1.addActionListener(new BlockComboListener(combo));
        combo1.setPrototypeDisplayValue("XXXXXXXXXXXXXXXXX");
        BoundsPopupMenuListener listener = new BoundsPopupMenuListener(true, true);
        combo1.addPopupMenuListener(listener);
        combo1.setPrototypeDisplayValue("ItemWWW");
        add(combo);
        add(combo1);
        pack();
        setVisible(true);
    }

    private Vector<String> makeVectorData(String[][] str) {
        boolean needSeparator = false;
        Vector<String> data = new Vector<String>();
        for (int i = 0; i < str.length; i++) {
            if (needSeparator) {
                data.addElement(SEPARATOR);
            }
            for (int j = 0; j < str[i].length; j++) {
                data.addElement(str[i][j]);
                needSeparator = true;
            }
        }
        return data;
    }

    public static void main(String args[]) {
        try {
            for (UIManager.LookAndFeelInfo laf : UIManager.getInstalledLookAndFeels()) {
                if ("Nimbus".equals(laf.getName())) {
                    UIManager.setLookAndFeel(laf.getClassName());
                    //UIManager.getLookAndFeelDefaults().put("Panel.background", Color.white);
                    //UIManager.getLookAndFeelDefaults().put("Button.contentMargins", new InsetsUIResource(0,0,0,0));
                }
            }
        } catch (Exception e) {
            e.printStackTrace();
        }
        ComboBoxWithSeparator frame = new ComboBoxWithSeparator();
        frame.addWindowListener(new WindowAdapter() {

            @Override
            public void windowClosing(WindowEvent e) {
                System.exit(0);
            }
        });
    }

    private class ComboBoxRenderer extends JLabel implements ListCellRenderer {

        private static final long serialVersionUID = 1L;
        private JSeparator separator;

        public ComboBoxRenderer() {
            setOpaque(true);
            setBorder(new EmptyBorder(1, 1, 1, 1));
            separator = new JSeparator(JSeparator.HORIZONTAL);
        }

        @Override
        public Component getListCellRendererComponent(JList list, Object value,
                int index, boolean isSelected, boolean cellHasFocus) {
            String str = (value == null) ? "" : value.toString();
            if (SEPARATOR.equals(str)) {
                return separator;
            }
            if (isSelected) {
                setBackground(list.getSelectionBackground());
                setForeground(list.getSelectionForeground());
            } else {
                setBackground(list.getBackground());
                setForeground(list.getForeground());
            }
            setFont(list.getFont());
            setText(str);
            return this;
        }
    }

    private class BlockComboListener implements ActionListener {

        private JComboBox combo;
        private Object currentItem;

        BlockComboListener(JComboBox combo) {
            this.combo = combo;
            combo.setSelectedIndex(0);
            currentItem = combo.getSelectedItem();
        }

        @Override
        public void actionPerformed(ActionEvent e) {
            String tempItem = (String) combo.getSelectedItem();
            if (SEPARATOR.equals(tempItem)) {
                combo.setSelectedItem(currentItem);
            } else {
                currentItem = tempItem;
            }
        }
    }
} 
```

# hbase - Hbase 复制

> ID：12798559
> 
> 赞同：1
> 
> 时间：2012-10-09T10:56:09.270
> 
> 标签：hbase

我的 Hbase 在三台机器上运行，一台用于 hmaster，另外两台作为 regionServers，现在我想我必须做一些复制工作，因为这是防止机器崩溃或断电的生产环境。但是我阅读了一些 Hbase 文档和找不到任何方法来复制我的数据。我使用的唯一方法是设置 hadoop 复制，我设置 hdfs-site.xml dfs.replicate=1。那么有没有更好的方法来进行 Hbase 的复制以进行热备份。提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T08:46:30.813

在您的生产环境中，您需要数据的副本，以便在节点故障或集群故障的情况下，您的数据将保持安全。如果我的理解是正确的，那么您可以选择

*   数据节点的定期间隔备份
*   设置异步复制到从属集群，这些集群将从各自的区域服务器复制数据。更多信息可[在此处获得](http://hbase.apache.org/replication.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-01-10T14:37:34.147

请注意，您的问题中“复制”有两种不同的含义：

1.  HDFS 块的复制。这里`replication`的意思是“在不同的数据节点上保留一个块的多个（冗余）副本”，这就是 HDFS 实现高可用性的方式。您通过“dfs.replication”设置属性告诉 HDFS 要保留多少副本。查看“HDFS 架构指南”的[数据复制](https://hadoop.apache.org/docs/r1.2.1/hdfs_design.html#Data+Replication)部分。

2.  HBase 集群之间的复制。这里`replication`的意思是“将这个集群的更新发送到另一个集群，以便后者可以作为备份”。它可以作为灾难恢复解决方案，我想这就是你想要的。您需要设置另一个 hbase 集群（称为从属或备份集群），配置复制。之后，当主集群由于某种原因关闭时，您可以故障转移到备份集群。查看[此 cloudera 博客文章](http://blog.cloudera.com/blog/2012/07/hbase-replication-overview-2/)和[hbase 书籍的这一部分以](https://hbase.apache.org/0.94/replication.html)获取更多详细信息。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-05-14T05:57:47.423

HBase 完全依赖 HDFS 复制。

您的所有数据都存在于 HDFS 中而不是 HBase 中（HBase 内部存储到 HDFS）。HBase 只是这些数据的一种访问机制。由于您设置了 dfs.replication=1 ，请尝试定期进行数据节点备份。

如果您担心 HBase 中的区域服务器，那么此数据存在于 Zookeeper 中。即使您的 Master/RS 出现故障并出现，它也应该恢复正常状态。

如果您特别担心区域，它们会被 HBase 存储为目录表（ROOT、META）。这些就像将出现在 HDFS 中的普通表一样。

因此，根据社区的建议，将复制更改为 >1（或默认为 3）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-11-09T06:53:28.433

您不需要 Hbase 的复制因子。如前所述，由于 Hbase 通过 HDFS 存储数据，因此复制将由 HDFS 处理。如果 RegionServer 宕机（在 Hbase 中），HMaster 会将死区服务器处理的区域分配给健康的 regionserver 或在 dataNode 故障的情况下（在 HDFS 中），HMaster 将从新的 dataNodes 分配新的 dataBlocks（由 NameNode 提供）到另一个健康且正常工作的区域服务器。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-04-17T03:13:04.127

HBase uses HDFS to store data, so by default you will have replication for your data in HDFS (by default you will have replication of 3 in HDFS). So you need not worry to have replication explicitly.

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-04-05T07:11:34.633

Hbase 表以数据块的形式存储在 HDFS 中。Hadoop 分布式文件系统 (HDFS) 使我们能够决定对块使用什么复制因子。理想情况下，它保持在 3。这确保在任何给定时间，相同数据的 3 个副本将出现在集群的节点中，并且在任何节点发生故障的情况下，相同的数据将在其他地方可用以服务于查询。此属性是 hdfs-site.xml 中的 dfs.replication。Hbase 还允许我们将集群状态复制到另一个集群。也就是说，一个 Hbase 集群中存在的全部数据被复制到另一个集群。这样做的好处是管理灾难恢复。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-08-17T06:39:07.707

目前，关于复制有三个概念。

1.  hdfs 层中的块副本。
2.  hbase 集群之间的复制。
3.  区域复制。

dfs.replication 指的是第一个概念。它保证了物理机的单一故障，您的数据是安全的。

如果 dfs.replication = 1，你的数据节点的单点故障（磁盘故障）可能会导致数据块损坏，从而导致数据丢失。

# perl - 如何测试文件是否以}结尾？

> ID：12798563
> 
> 赞同：-1
> 
> 时间：2012-10-09T10:56:26.667
> 
> 标签：perl

我想检查我的木偶文件（.pp）是否`}`以可选`和换行符结尾。`

 `我只关心退出代码。

任何想法如何做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T11:09:42.053

您可以使用标志。如果一行以 } 结尾或为空，则将其设置为 1。在文件结束后，检索最后一个标志集：

```
my $ok;
while (<>) {
    if (/}\s*$/) {
        $ok = 1;
    } else {
        undef $ok unless /^\s*$/;
    }
}
die unless $ok; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T11:10:55.740

```
perl -ne 'unless(/^[\s]*$/){$x=$_;}if(eof){if($x=~m/\}[\s]*$/){print "match\n"}}' your_file 
```

测试如下：

文件末尾有一些空换行符，其中一个空换行符也有空格。

```
> cat temp2
this is key2
this is key1
this is key1
this is key1
this key2 kmkd
} 
```

执行：

```
> perl -ne 'unless(/^[\s]*$/){$x=$_;}if(eof){if($x=~m/\}[\s]*$/){print "match\n"}}' temp2
match 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-09T12:00:58.503

```
perl -ne 'undef$/;print"} at end\n"if$_=~/}\s*+$/' FILENAME 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-09T12:10:15.920

如果文件不是太大，你可以这样做：

```
{
    #Set input record separator to undefined; reads in everything as one line.
    local $/;
    #FILE is a filehandle you have already opened.
    print "Happy ending!" if (<FILE> =~ /}\n*$/s);  
} 
```

此方法将整个文件读入单个字符串，从而可以轻松地使用正则表达式匹配您要查找的内容。

（这种方法很简单，但是如果你有一个大文件，choroba 的方法会更好，因为它不会将整个内容读入内存。）

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-09T12:51:45.170

该解决方案应该适合您。本质上，它保留一个标志，说明最后一个非空白行是否以大括号结尾，后跟可选空格。它期望输入文件作为命令行上的参数。

```
use strict;
use warnings;

my $valid = 0;

while (<>) {
  $valid = /\}\s*$/ if /\S/;
}

print $valid ? "File is OK\n" : "File is invalid\n"; 
````

# xcode - 如何将 tableview 的 UIlabel 值发送到 iPhone 中的另一个视图？

> ID：12798564
> 
> 赞同：-1
> 
> 时间：2012-10-09T10:56:28.663
> 
> 标签：xcode, uitableview

我需要将所选表格视图行的 UiLabel 值传递给其他视图中的标签。我该怎么做？我试过这个：

```
 ViewController1.h:
UILabel *name1;
@property(nonatomic,retain)IBOutlet UILabel *name1;

    ViewController1.m:
- (void) tableView:(UITableView *)tableView accessoryButtonTappedForRowWithIndexPath:(NSIndexPath *)indexPath
{

ViewController2 *v2 = [[ViewController2 alloc] initWithNibName:@"ViewController2" bundle:nil];
v2.modalTransitionStyle = UIModalTransitionStyleFlipHorizontal;

[self presentModalViewController:v2 animated:YES];
 v2.provName=[name1 retain];   //name1 is the name of UILabel in TableView.
[v2 release];
}
    ViewController2.h
UILabel *providerName;
SString *provName;

    ViewController2.m:
- (void)viewDidLoad
{
providerName =[[UILabel alloc] init];
[providerName setFrame:CGRectMake(10,10,300,50) ];
providerName.textAlignment=UITextAlignmentLeft;
providerName.backgroundColor=[UIColor blackColor];

self.providerName.text=self.provName; 
 providerName.highlightedTextColor=[UIColor whiteColor];
[self.view addSubview:providerName];
} 
```

但没有得到价值

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T12:15:37.763

如果`provName`是字符串，则为其分配标签文本的值，而不是标签本身。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T12:22:08.773

您应该在第二个视图控制器中更新标签的文本：

```
v2.providerName.text = name1.text; 
```

或者，更好的是，将名称封装在您在第一个视图控制器中执行此操作的第二个视图控制器中：

```
v2.provName = name1.text; 
```

并在第二个视图控制器中提供一个设置器：

```
- (void)setProvName:(NSString *)name
{
    // This assumes that ARC is enable - if it isn't then you have to retain...

    self.provName = name;
    self.providerName.text = name;
} 
```

# android - 如何在android中创建动态图标，如短信图标

> ID：12798571
> 
> 赞同：2
> 
> 时间：2012-10-09T10:56:51.953
> 
> 标签：android, sms

我知道应用程序图标是静态的，但在 SMS 服务中，当我们收到消息时，应用程序启动器图标值如何增加或减少。

这怎么可能？谁能告诉我该怎么做？

# excel - 如何重命名重复的行

> ID：12798572
> 
> 赞同：0
> 
> 时间：2012-10-09T10:56:53.463
> 
> 标签：excel, excel-formula, excel-2010, excel-2007, worksheet-function

我有一个 Excel 表，其中包含大约 25k 行数据，格式如下：

**第 1 列 | 第 2 栏**

```
A | value1    
A | value2    
A | value3    
B | value1    
B | value2    
C | value1    
C | value2 
```

等等。我想重命名重复的行并用一个整数代替它。我希望新数据是：

**第 1 列 | 第 2 栏**

```
 1 | value1    
  1 | value2    
  1 | value3    
  2 | value1    
  2 | value2    
  3 | value1    
  3 | value2 
```

如何才能做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-09T12:33:14.250

考虑到混乱，由于问题的模棱两可，我无法详细描述的另一种选择是：

将“Column1”复制到新工作表（最好按字母顺序排序）。删除重复项。索引结果并将新工作表用作查找表。

编辑（现在提供一些细节，因为已经提供了澄清）：

将`ColumnB`工作表复制`Specifications`到新书作为`ColumnA`.
名称选项卡`Table`。
取消合并单元格。
按字母顺序排序。
选择`ColumnA`，数据工具，删除重复项。
选择第一个明显未被占用的行`Ctrl+Shift+Down`，删除。
将工作簿另存为 Table.xls。关闭并重新打开`Table.xls`。
键：在`A1` `Item#`；在 A2 中`1`；在`A3` `=A2+1`.
双击 的右下角`A2`。
复制`ColumnA`到`ColumnC`.
在`Specifications`最左边插入一列。
键：在`A1` `Item#`；在`A2` `=VLOOKUP(C2,Table.xls!$B:$C,2,FALSE)`
双击底部 RH 角。手动调整`#N/A`结果（合并单元格）。

如果需要，可以移动`Table`到同一个工作簿。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-09T11:04:52.740

我假设您的第 1 列在 Col A 中，而您的第 2 列在 Col B 中，并且您只是想将字母（大写字母）转换为数字。

插入一个新列作为 Col A。所以现在你的信在 Col B 中。然后输入公式

```
=CODE(B2) - 64 
```

在单元格 A2 中（假设第 1 行用于标题）并将其向下拖动。

然后复制整个 Col A，右键单击单元格 A1 并选择粘贴值。然后删除 Col B。

* * *

根据您的评论，请改为执行以下操作。

在您的示例中在两者之间插入一列。在列的顶部单元格中输入值`1`。在下一个单元格中`=IF(A2<>A1,B1+1, B1)`，然后向下拖动。

![在此处输入图像描述](../Images/79c160a7a0a7d11dca1bb7b7e045edf4.png)

# c#-4.0 - 如何使用具有 IEnumerable 类型的属性的 UIHint 创建 EditorTemplate

> ID：12798573
> 
> 赞同：8
> 
> 时间：2012-10-09T10:56:53.603
> 
> 标签：c#-4.0, razor, asp.net-mvc-4, mvc-editor-templates

在 MVC 中，您可以创建一个编辑器模板`T`，然后当您想要为类型的属性呈现编辑器时，`IEnumerable<T>`您可以简单地执行例如

```
Html.EditorFor(m => m.MyListOfT) 
```

这样做的好处是框架会自动为输入创建名称，然后在回发模型绑定时一切正常。

**我的问题是：**当您有不止一种类型的编辑器模板时，您如何执行上述操作？

我尝试过使用 UIHint()，但它似乎只允许您针对列表指定 UIHint，而不是列表中的每个项目。这意味着您必须使用 foreach() 循环为列表创建一个 EditorTemplate，然后您就会错过漂亮的自动命名和模型绑定。

我在这里想念什么？

该模型是例如

```
public class MyViewModel
{
    public IEnumerable<SomeType> SomeProperty { get; set; }
} 
```

理想情况下，我想做类似的事情：

```
public class MyViewModel
{
    [UIHint("SomeTypeTemplate")]
    public IEnumerable<SomeType> SomeProperty { get; set; }
} 
```

并让它自动应用于列表中的所有元素，这样我就可以渲染：

```
Html.EditorFor(m => m.SomeProperty) 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-10T09:26:19.873

> 我在这里想念什么？

没有什么。不幸的是，事情就是这样。如果您在调用 Html.EditorFor 或使用 UIHint 时指定模板名称，则将为列表调用模板，而不是为每个元素调用模板。

话虽这么说，您当然可以编写一个自定义扩展方法来实现此功能：

```
public static class HtmlExtensions
{
    private class ViewDataContainer: IViewDataContainer
    {
        public ViewDataContainer(ViewDataDictionary viewData)
        {
            ViewData = viewData;
        }

        public ViewDataDictionary ViewData { get; set; }
    }

    public static IHtmlString EditorForCollection<TModel, TProperty>(
        this HtmlHelper<TModel> html, 
        Expression<Func<TModel, IList<TProperty>>> expression
    )
    {
        var metadata = ModelMetadata.FromLambdaExpression(expression, html.ViewData);
        if (string.IsNullOrEmpty(metadata.TemplateHint))
        {
            return html.EditorFor(expression);
        }

        var collection = metadata.Model as IList<TProperty>;

        var sb = new StringBuilder();
        for (int i = 0; i < collection.Count; i++)
        {
            var indexExpression = Expression.Constant(i, typeof(int));
            var itemGetter = expression.Body.Type.GetProperty("Item", new[] { typeof(int) }).GetGetMethod();
            var methodCallExpression = Expression.Call(expression.Body, itemGetter, indexExpression);
            var itemExpression = Expression.Lambda<Func<TModel, TProperty>>(methodCallExpression, expression.Parameters[0]);
            var result = html.EditorFor(itemExpression, metadata.TemplateHint).ToHtmlString();
            sb.AppendLine(result);
        }
        return new HtmlString(sb.ToString());
    }
} 
```

可以对使用 UIHint 属性修饰的集合类型的视图模型属性进行操作：

```
public class MyViewModel
{
    [UIHint("SomeTypeTemplate")]
    public IList<ItemViewModel> Items { get; set; }
} 
```

在您看来：

```
@model MyViewModel
@Html.EditorForCollection(x => x.Items) 
```

你`~/Views/Shared/EditorTemplates/SomeTypeTemplate.cshtml`现在可以输入一个`ItemViewModel`：

```
@model ItemViewModel
... 
```

您不再需要一个中间显示模板，您只需在其中循环和调用实际模板 - 这将是一种真正的浪费。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-10T09:14:15.913

您创建 2 个 EditorTemplates。一个处理 IEnumerable，这个模板循环创建一个

```
Html.EditorFor(m => m.SomeProperty, "SomeIndividualTemplate") 
```

对于枚举中的每个项目。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-12-04T10:23:26.610

尽管@Darin 的答案很完美，但由于某些原因，我还没有从 ModelMetaData 中找到 TemplateHint 始终为空。作为解决方案，我创建了@Darin 代码的另一个重载来接受模板名称参数并呈现视图，而不是在 ModelMetaData 中检查 TemplateHint。很抱歉将其发布为答案，因为我没有发表评论的权限。谢谢达林 :)

# objective-c - 从发布版本中删除 NSLog

> ID：12798582
> 
> 赞同：1
> 
> 时间：2012-10-09T10:57:22.110
> 
> 标签：objective-c, ios, xcode

> **可能重复：**
> [不应该在生产代码上使用 NSLog() 是真的吗？](https://stackoverflow.com/questions/300673/is-it-true-that-one-should-not-use-nslog-on-production-code)
> [我需要在发布应用程序之前禁用 NSLog 吗？](https://stackoverflow.com/questions/2025471/do-i-need-to-disable-nslog-before-release-application)

我需要在发布构建期间删除我的项目中存在的所有 NSLOG。我尝试使用下面的代码，但仍然通过电话访问构建，仍然 NSLOG 显示在控制台中。

```
#ifdef DEBUG
#define debug_NSLog(format, ...) NSLog(format, ## __VA_ARGS__)
#else
#define debug_NSLog(format, ...)
#endif 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-10-09T11:11:58.220

要简单地删除 NSLog：

```
#define NSLog(s,...) 
```

没有指定替换的 A`#define`将不替换任何内容，删除与 匹配的任何内容`#define`。这适用于简单的令牌定义和类似上面的函数定义。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-09T11:03:05.147

使用以下代码

```
#ifdef DEBUGGING
# define DBLog(fmt,...) NSLog(@"%@",[NSString stringWithFormat:(fmt), ##__VA_ARGS__]);
#else
# define DBLog(...)
#endif 
```

确保正确设置了编译器标志。

另外，当您检查控制台时，您是否检查过您是否使用了发布模式？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-09T11:10:07.170

用这个

```
#if TARGET_IPHONE_SIMULATOR
#define NSLog(fmt,...) NSLog((@"%s [Line %d] " fmt), __PRETTY_FUNCTION__, __LINE__, ##__VA_ARGS__);
#else
#define NSLog(...)
#endif 
```

`NSLog`如果您在模拟器上运行它，这将打印出来..

# itext - iText - 如何在 pdf 中向下移动当前内容

> ID：12798583
> 
> 赞同：2
> 
> 时间：2012-10-09T10:57:23.210
> 
> 标签：itext

我需要在现有 PDF 的顶部添加几行。我使用 PdfReader 和 PdfStamper 完成了这项工作。为了在页眉区域有更多空间，我需要将当前内容向下移动 1 或 2 行。以下来自论坛。但这并不能解决问题。 [如何使用 IText 在 PDF 的页面中间插入内容](https://stackoverflow.com/questions/12073135/how-to-insert-content-in-the-middle-of-a-page-in-a-pdf-using-itext)

有什么建议么？

*-我不能上传pdf或pdf的图片，因为我是新用户*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T07:02:15.093

如果我假设您真的想向下移动页面上的所有内容并在上面添加一些行，我是否正确解释了您的问题？

您可以通过更改媒体框（和裁剪框以及可能为您的页面明确定义的其他框）来做到这一点，然后以您现在已经这样做的方式在顶部添加几行。

您可以访问相应页面词典中的这些框，您可以通过 PdfReader 检索这些框。有关这些框的详细信息，请查阅 PDF 规范。

还是我对您的解释有误，您只想在保留现有页眉和页脚的同时下移一些文本？在那种情况下，亚历克西斯对您提到的另一个问题的回答仍然成立。

# php - Doctrine+MongoDB - 如何查询数组不为空的文档

> ID：12798594
> 
> 赞同：5
> 
> 时间：2012-10-09T10:58:13.903
> 
> 标签：php, doctrine-odm

我想接收大小大于零的数组“喜欢”的所有文档。我看到了一个使用 ->size() 方法获取特定大小的数组的示例：

```
$qb = $dm->createQueryBuilder('Article')->field('comments')->size(0); 
```

但不要得到一个大小不为零的数组，有没有办法做到这一点？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-12-16T23:56:52.130

您可以将特定的正整数传递给`size`，但不能使用它来查询范围。这不是 Doctrine 的限制，而是 MongoDB 的限制。[$size](http://docs.mongodb.org/manual/reference/operator/query/size/ "$大小")上的文档说：

> $size 不接受值范围。要根据具有不同数量元素的字段选择文档，请创建一个计数器字段，当您将元素添加到字段时会增加该字段。

为此，请`$comments_count` `@Int`向文章添加一个字段并更新它 a) 在修改的文档方法中`$comments`或 b) 在带有注释的文档方法中`@PreUpdate`。

另一个（低效）选项是使用`where`javascript 表达式：

```
$where = "function() { return this.comments && this.comments.length > 0; }";
$qb = $dm->createQueryBuilder('Article')->field('comments')->where($where); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-08-26T15:07:14.090

为此使用 JavaScript 真的很慢。您应该更喜欢“纯”QueryBuilder：

```
$qb = $dm->createQueryBuilder('Article');
$qb = $qb->field('comments')
         ->exists(true)
         ->not($qb->expr()->size(0)); 
```

# c# - 文件访问和资源管理器窗口的奇怪异常

> ID：12798597
> 
> 赞同：1
> 
> 时间：2012-10-09T10:58:40.093
> 
> 标签：c#, windows-explorer

考虑这个简单的程序：

```
private static void Main(string[] args)
{
        var directoryName = Path.Combine(Environment.GetFolderPath(Environment.SpecialFolder.ApplicationData), "Directory");

        if (Directory.Exists(directoryName))
            Directory.Delete(directoryName, true);

        Directory.CreateDirectory(directoryName);

        var stream = File.Create(Path.Combine(directoryName, "File")); //throws
        stream.Close();
} 
```

当你简单地执行这个程序时，这很好用。`Directory`如果您在 Windows 资源管理器中浏览它然后运行，就会发生奇怪的事情。在这种情况下，我得到 UnautorizedAccessException`"Access to the path 'C:\Users\rfurman\AppData\Roaming\Directory\File' is denied."`

如果这很奇怪，那么在相同的条件下执行：

```
private static void Main(string[] args)
{
        var directoryName = Path.Combine(Environment.GetFolderPath(Environment.SpecialFolder.ApplicationData), "Directory");

        if (Directory.Exists(directoryName))
            Directory.Delete(directoryName, true);

        var value = Directory.Exists(directoryName);

        Console.WriteLine(value);
        Console.ReadKey();
 } 
```

该程序打印`True`是否`Directory`在资源管理器中打开。

我想知道的是为什么会发生这种情况以及如何防范这种情况。

我使用 Windows 7 和 .net 4。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-12T19:09:41.697

这有点重复： [SSD驱动器上的奇怪目录删除行为](https://stackoverflow.com/questions/6023141/bizarre-directory-delete-behaviour-on-ssd-drive/6023703#6023703)

资源管理器只是导致文件夹删除的延迟稍长。删除目录不是“完全”同步操作。该目录被标记为删除，但实际删除可能会滞后一点。

AFAIK 这与 NTFS (win2k/Xp) 一样长。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-12T11:28:32.820

`Directory.Delete`内部使用`RemoveDirectory`win api 在`Kernel32`. RemoveDirectory 所做的是“标记要删除的目录”。当该目录的最后一个句柄关闭时，该目录被删除。我相信这意味着“在资源管理器离开该文件夹后”

在我的计算机中不会发生这种情况，所以我无法测试，但我怀疑可能有适合您的方法。基于 NT 的系统有时允许重命名文件和目录，即使它们是打开的。我不知道这是允许的确切情况，但我用它来重命名加载的 dll 文件并编写新的文件，如下所示：

```
File.Rename(@"C:\App\test.dll", @"C:\App\test.dll");
File.Copy(@"C:\App\Update\test.dll-v1.1", @"C:\App\test.dll"); 
```

所以你的代码在改变后可能看起来像这样

```
var directoryName = Path.Combine(Environment.GetFolderPath(Environment.SpecialFolder.ApplicationData), "Directory");

if (Directory.Exists(directoryName)) {
    var randomExt = ".random"; // generate randomly
    Directory.Move(directoryName, directoryName + randomExt)
    Directory.Delete(directoryName + randomExt, true);
}
Directory.CreateDirectory(directoryName);

var stream = File.Create(Path.Combine(directoryName, "File")); //throws
stream.Close(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-28T17:16:03.547

这个问题也让我很惊讶。我的替代方案，这是一个不同的组合：

```
 if (Directory.Exists(directoryName))
    {
        Directory.Delete(directoryName, true);
        while (Directory.Exists(directoryName))
            Thread.Sleep(100);
    }

    Directory.CreateDirectory(directoryName); 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-10-09T11:15:51.660

在某些情况下，如果您在文件资源管理器中打开了指定的目录，Delete 方法可能无法将其删除。

参考：[Directory.Delete 方法](http://msdn.microsoft.com/en-us/library/fxeahc5f.aspx)

# android - 可通过代码绘制的圆角

> ID：12798600
> 
> 赞同：2
> 
> 时间：2012-10-09T10:58:57.767
> 
> 标签：android, drawable, background-drawable

我有一个有时会改变颜色的drawable，但它必须总是有圆角。这是一个 UI 库，所以我不知道它会有什么颜色。XML 不是一个选项，我必须用纯 java 来实现。

有没有办法在不使用 XML 的情况下以编程方式实现这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T11:27:34.627

创建一个自定义 Drawable（即扩展 Drawable）并在其 onDraw 中使用 Canvas.drawRoundRect(RectF rect, float rx, float ry, Paint paint)，将 Paint 设置为所需的颜色。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T11:19:07.483

如果您自己绘制drawable，您可以使用Canvas.clipPath 设置剪辑路径。路径将由一个或多个矩形和一些圆形组成，它们会夹住圆角。您可能不得不调整路径组件的排列，直到获得所需的输出。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-08-29T17:19:57.133

根据@nmw 的回答，这里有一些适用于此的代码：

```
public class RRDrawable extends Drawable {
    private Paint paint = new Paint(Paint.ANTI_ALIAS_FLAG);

    public RRDrawable(int color) {
        paint.setColor(color);
        paint.setStyle(Paint.Style.FILL);
    }

    @Override
    public void draw(Canvas canvas) {
        int radius = 10; // note this is actual pixels
        canvas.drawRoundRect(new RectF(0,0,canvas.getWidth(), canvas.getHeight()), radius, radius,  paint);
    }

    @Override
    public void setAlpha(int i) {
        //.. not supported
    }

    @Override
    public void setColorFilter(ColorFilter colorFilter) {
        //.. not supported
    }

    @Override
    public int getOpacity() {
        return 1;
    }
} 
```

编辑：向边缘添加抗锯齿。

[（来源）](https://gist.github.com/benvium/4230535b250b4bd75ebe)

# ruby-on-rails - ActiveRecord：如何从联接查询中选择单个列？

> ID：12798605
> 
> 赞同：0
> 
> 时间：2012-10-09T10:59:14.010
> 
> 标签：ruby-on-rails, activerecord

`user`has_many `devices`。

编辑：`device`有一个`registration_id`字段

我想获得一个用户的所有`registration_id`设备的数组，然后是某个用户。

我正在努力：

```
@user.followers.join(:devices).select("devices.registration_id") 
```

但这似乎可行，我该怎么做这个查询？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T11:25:55.447

我不确定，但认为这应该可行：

```
@user.followers.map { |f| f.devices.pluck(:registration_id) }.flatten 
```

**upd**：为了尽量减少查询次数，我可以提供以下解决方案：

```
Device.where(user_id: @user.followers.pluck(:id)).pluck(:registration_id) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T13:39:08.723

```
@user.followers.join(:devices).select("devices.registration_id") 
```

如果你在 .join 之后加上 en extra s 应该可以工作。它被称为 .joins("devices")

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-09T11:26:50.650

```
 try by swapping
        @user.select("devices.registration_id").followers.join(:devices) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-09T11:54:27.257

您可能需要重新检查设备和注册之间的关联

```
Device
  belongs_to :user
  has_one :registration  #but in this case the device_id should be in Registration 
```

考虑registration_id是Device的一个字段

```
 arr = @user.followers.collect(&:id)
 @user.devices.collect{|d| d.registration_id if arr.include?d.follower_id} 
```

# iphone - devicePixelRatio 真的有用吗

> ID：12798608
> 
> 赞同：0
> 
> 时间：2012-10-09T10:59:20.247
> 
> 标签：iphone, html, ios, css, retina-display

我只是想知道基于 web-kit 的浏览器和苹果设备相关的 devicePixelRatio 是否真的有用，或者它只是苹果的私人资产。要知道，web-kit 引擎也是苹果公司的。我认为这种东西只对Apple的Retina屏幕有意义，我一直认为屏幕分辨率和操作系统分辨率之间的差异应该由操作系统正确处理，这不是我们的任务。
如果 devicePixelRatio 的值范围从 0 到 1000000，我应该为这些屏幕准备多少张图片。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T10:24:22.617

网页浏览是移动设备用户最流行的活动，网页本身以各种形状和大小提供服务。

Apple 和跟随他们进入移动硬件领域的各家公司需要尽可能简化网络浏览体验，以最大限度地延长使用和依赖其设备的时间。他们需要避免用户为了阅读内容而在页面周围捏合、缩放和平移，因此他们向 Web 开发人员公开了一个称为“元视口”的 API，这使他们能够轻松地为小屏幕适配版本提供服务。他们的网站。

后来他们意识到，以这种方式缩放会使图像在更高 dpi 的设备（如 Apple Retina 和 android 设备（如 Galaxy sIII 和 nexus 设备）中放大时）看起来绝对是垃圾。因此，他们制作了一个可变的 devicePixelRatio 和相应的 CSS 媒体查询，以使 Web 开发人员能够检测给定设备需要更高分辨率的图像，以便网站在缩放后看起来不错。没有人期望网站所有者/开发者浪费 2 倍带宽为每个人提供带有子像素数据的位图，因为 0.2% 的用户碰巧使用的设备具有 2 倍于给定物理尺寸通常像素数量的设备。

由网站开发人员来权衡花费额外时间选择性地提供图像的成本和收益，以便网站在高像素密度设备上不会看起来很糟糕。如果网络到了大多数网站都这样做的地步，消费者会觉得您的网站质量低下，而不是由于他们使用的硬件存在一些缺陷。

只是为了澄清：

苹果只使用 1 和 2 作为他们的 devicePixelRatio。

google 提倡使用 1、1.5 和 2（尽管他们不能总是强制执行）。

微软在他们的 screen.deviceXDPI 值中使用 96dpi (1) 144dpi (1.5) 192dpi (2)

大多数人只为高于某种阈值的所有设备提供其资产的一个 2x 分辨率版本，例如为低于该阈值的设备提供 1.3 和 1x 版本。对于那些了解所有这些设备值的确切含义以及如何使用“CSS 媒体查询”或它们各自的 javascript 值的 Web 开发人员来说，这非常容易，而且不像我想象的那样令人沮丧。

# android - 显示存储在缓存中的图像，Android

> ID：12798610
> 
> 赞同：0
> 
> 时间：2012-10-09T10:59:24.507
> 
> 标签：android, android-layout, android-xml, android-image

我从网上下载图片并将它们存储在缓存中。现在，我如何在 XML 中显示照片。照片存储如下：

/data/data/com.example.app/cache/wpta_i.jpeg

根据位置变化。我的 XML 如下：

```
 <LinearLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:orientation="vertical">

    <ImageView
      android:id="@+id/img"  
      android:layout_width="wrap_content"
      android:layout_height="wrap_content"
      android:layout_gravity="center">      
    </ImageView>
  </LinearLayout> 
```

如何从缓存中加载图像并显示它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-09T11:05:48.187

您应该从代码中加载drawable，然后将setImageDrawable 设置为ImageView。

```
String pathName = "/data/data/com.example.app/cache/wpta_i.jpeg"; 
Drawable d = Drawable.createFromPath(pathName);
ImageView myImageView=(ImageView)findViewById(R.id.img);
myImageView.setImageDrawable(d); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T11:12:19.723

您可以使用[`Context.getCacheDir()`](https://developer.android.com/reference/android/content/Context.html#getCacheDir%28%29)获取缓存目录，然后从代码访问它，如 Perroloco 的答案所示。

该文档指出了一个明确的警告：

> **当设备存储空间不足时，**这些文件将首先被删除。****
> 
>  **无法保证何时删除这些文件。**

 **因此，请确保您的文件在尝试加载之前存在。**

# c - 拆分十六进制数

> ID：12798611
> 
> 赞同：5
> 
> 时间：2012-10-09T10:59:33.713
> 
> 标签：c

新手问题。

例如，我有十六进制数 0xABCDEF，我将如何将其拆分为 0xAB、0xCD 和 0xEF？是这样吗？

```
unsigned int number = 0xABCDEF
unsigned int ef = a & 0x000011;
unsigned int cd = (a>>8) & 0x000011;
unsigned int ab = (a>>16) & 0x000011; 
```

谢谢

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-10-09T11:01:12.710

用作`0xff`掩码以删除除 8 位之外的所有数字：

```
unsigned int number = 0xABCDEF
unsigned int ef = number & 0xff;
unsigned int cd = (number>>8) & 0xff;
unsigned int ab = (number>>16) & 0xff; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-09T11:03:18.857

```
unsigned int number = 0xABCDEF
unsigned int ef = number & 0xff;
unsigned int cd = (number >> 8) & 0xff;
unsigned int ab = (number >> 16) & 0xff; 
```

`&`您可能希望`ef`, `cd`,`ab`成为类型，而不是按位和 ( ) 操作，`unsigned char`这取决于您的代码的其余部分以及您如何使用这些变量。在这种情况下，您转换为`unsigned char`：

```
unsigned int number = 0xABCDEF
unsigned char ef = (unsigned char) number;
unsigned char cd = (unsigned char) (number >> 8);
unsigned char ab = (unsigned char) (number >> 16); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-09T11:01:23.990

要使用的掩码是`0xFF`，不是`0x11`。除此之外，你是对的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-12-26T15:26:20.927

```
void splitByte(unsigned char * split, unsigned int a,int quantBytes)
{
  unsigned char aux;
  int i;
  for(i=0;i<quantBytes;i++)
  {
      split[i]=a&0x00FF; 
      a=(a>>8);
  }
  for(i=0;i<quantBytes-1;i++)
  {
      aux = split[i];
      split[i] = split[quantBytes-i-1];
      split[quantBytes-i-1] = aux;

  }
} 
```

主要是： unsigned char split[4]; splitByte（拆分，0xffffffff，4）；

# php - Fuelphp中的验证参数获取方法

> ID：12798614
> 
> 赞同：0
> 
> 时间：2012-10-09T10:59:50.357
> 
> 标签：php, validation, fuelphp

当我想在fuelphp中使用GET方法进行验证时遇到问题

我正在查看[此文档](http://docs.fuelphp.com/classes/validation/validation.html#usage)

```
// run validation on just post
if ($val->run())
{
    // process your stuff when validation succeeds
}
else
{
    // validation failed
} 
```

该代码仅验证方法是 Post 还是默认 post。

如何验证方法获取？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T11:29:21.327

要对数组运行验证：

```
if ($val->run( array( $validation_rule => $value_to_validate) ))  
{  
     // process your stuff when validation succeeds  
}
else  
{
     // validation failed
} 
```

例子：

```
$val = Validation::factory();
$val->add('email')->add_rule('valid_email');

if ($val->run( array('email'=>$email) ))
{
    // $email is valid
}
else
{
    // $email is not valid
} 
```

# c# - 列表框再次选择第一项 wpf mvvm 不起作用

> ID：12798615
> 
> 赞同：0
> 
> 时间：2012-10-09T10:59:53.717
> 
> 标签：c#, wpf, mvvm, listbox, selectedindex

考虑 WPF (MVVM) 中的一个列表框，其中包含一个项目列表（项目是文件名）。如果选择了列表框中的第一个项目，则第一个文件将被正确打开。假设，如果单击“新建”按钮（打开新文件）并打开新文件。现在，如果第一个项目（第一个文件）被选中，那么第一个文件没有打开 insetead new 只会打开，因为列表框选择没有改变。相反，如果选择了任何其他项目，那么它工作正常。如何使第一个项目再次被选中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T19:41:05.023

您可以将 selectedItem 设置为 null，然后将其设置回您需要的值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T17:09:43.187

*   Add an extra item as "SelectFile" in databound collection of ListBox.
*   Whenenver Newbutton get clicked, through button command execution, set ListBox selected item as "SelectFile".
*   This will allow you to reselect last file.
*   If this default entry "SelectFile" get selected, do not proceed with file opening from view model.

# wpf - 使用 VisualStateManager 的数据模板中的 WPF 动画

> ID：12798618
> 
> 赞同：2
> 
> 时间：2012-10-09T10:59:56.930
> 
> 标签：wpf, animation, datatemplate, visualstatemanager

当您尝试输入`VisualStates`一些`DataTemplate`.

下面的代码可以正常工作，但前提是我使用 a `FrameworkElement`，例如 custom `UserControl`：

```
<UserControl>
    ...namespaces goes here...

 <Grid x:Name="rootgrid">
        <VisualStateManager.VisualStateGroups>
            <VisualStateGroup x:Name="States">
                <Storyboard x:Key="Focused">
        <ColorAnimationUsingKeyFrames Storyboard.TargetProperty="(Shape.Fill).(SolidColorBrush.Color)" Storyboard.TargetName="ellipse">
            <EasingColorKeyFrame KeyTime="0:0:0.1" Value="#FFE90B0B"/>
        </ColorAnimationUsingKeyFrames>
       </Storyboard>
            </VisualStateGroup>
        </VisualStateManager.VisualStateGroups>

        <Ellipse x:Name="ellipse"
              Width="26"
              Height="26"
              Fill="Yellow"
              SnapsToDevicePixels="True"
              Stretch="Fill"
              Stroke="Black"
              StrokeThickness="2">
            <Ellipse.RenderTransform>
                <TransformGroup>
                    <ScaleTransform/>
                    <SkewTransform/>
                    <RotateTransform/>
                    <TranslateTransform/>
                </TransformGroup>
            </Ellipse.RenderTransform>
        </Ellipse>
    </Grid> 

</UserControl> 
```

但是当我尝试将代码粘贴到`DataTemplate`：

```
<DataTemplate x:Key="MyDataTemplate">
   <Grid x:Name="rootgrid">
       ... Code the same as above...
    </Grid>
 </DataTemplate> 
```

然后我将“MyDataTemplate”应用于我的自定义元素（实现`ContentTemplate`依赖属性的类），在这种情况下我不能使用动画状态“Focused”。

即使我通过 VisualTree 得到一个名为“rootgrid”的网格对象并使用它：

```
VisualStateManager.GoToState(rootgrid,"Focused",true); 
```

什么都没发生 ... ：（

问题是如何为非对象使用`VisualStates`（动画）实现？`DataTemplate``FrameworkElement`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-05-23T10:58:49.603

对于OP来说答案可能为时已晚，但对于其他偶然发现这个问题的人来说：

可以`VisualStateManager`在 a 中使用 a `DataTemplate`。关键是调用`VisualStateManager.GoToElementState`而不是`VisualStateManager.GoToState`使用`FrameworkElement`包含`VisualStateManager`.

顺便说一句，上面的 XAML 没有正确指定`VisualState`for Focused，这应该更改为：

```
<VisualStateManager.VisualStateGroups>
    <VisualStateGroup x:Name="States">
        <VisualState Name="Focused>
            <StoryBoard> 
```

等等

# xcode - Xcode 4.5.1 中的“仅构建活动架构”标志在哪里？

> ID：12798619
> 
> 赞同：1
> 
> 时间：2012-10-09T10:59:57.983
> 
> 标签：xcode, xcode4

对不起，因为这不是一个严格的编程问题，但我快疯了，谷歌在这方面并不友好。

有人可以像我五岁那样向我解释我可以在哪里设置释放标志吗？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-09T12:42:42.210

在**Project Navigator** (Command+1) 中选择您的项目。
编辑器现在将显示您的项目设置。

**Build Active Architecture Only**设置在 **Architectures**部分的Project 级别可用（过滤例如“ *arch* ”，为获得最佳结果，请选择**All**而不是在屏幕截图中选择的**Basic**选项）。

可以针对 Debug 和 Release 目标单独调整该设置。

![在此处输入图像描述](../Images/78939a0194669c4c12f166304367a9cc.png)

# ios - NSFetchedResultsController 未显示所有结果

> ID：12798620
> 
> 赞同：0
> 
> 时间：2012-10-09T11:00:05.637
> 
> 标签：ios, core-data, uitableview, nsfetchedresultscontroller

一些背景信息：我正在从 Ruby on Rails 网站获取数据，解析其 json，并将对象分配给 Core Data 对象。这运行良好，并且行导入正常，但它尚未检查重复项（我尚未实现）。所以每次我启动应用程序时，我都会额外添加 3 个对象。

我已经设置了一个`NSFetchedResultsController`来获取我模型的所有对象：

```
NSFetchRequest *request = [NSFetchRequest fetchRequestWithEntityName:NSStringFromClass([self class])];
request.sortDescriptors = @[[NSSortDescriptor sortDescriptorWithKey:@"remote_id" ascending:YES]];
return [[NSFetchedResultsController alloc] initWithFetchRequest:request managedObjectContext:context sectionNameKeyPath:nil cacheName:nil]; 
```

并且在我的表控制器中，我添加了将数据从 FetchedResultsController 提取到表委托方法中的所有方法。

问题本身是，当`NSFetchRequest`我返回数组中的所有对象时（目前大约有 60 个），但表格只显示 3 个结果。我的 Rails 服务器上的（巧合..？）相同的 3 个结果。

我手动打开数据库并编辑了一些“重复”记录，以检查它是否进行了一些神奇的重复检查，而我手动编辑的记录仍然没有显示。在这一点上，我迷路了。什么可能导致结果被过滤掉？代码首先不应该知道这些模型是重复的。我只是不明白。

编辑 - -

更多信息：

我的 TableViewController 是 Standford 提供的 CoreDataTableViewController 的子类（附带的讲座视频可在 iTunes U 上找到，顺便说一句，非常棒）： http: [//www.stanford.edu/class/cs193p/cgi-bin/drupal /downloads-2011-fall](http://www.stanford.edu/class/cs193p/cgi-bin/drupal/downloads-2011-fall) （用于 CoreDataTableViewController.zip 的 ctrl+f）

这`performFetch`在 fetchedResultsController 属性设置器上分配后处理并简单地调用

```
NSError *error;
[self.fetchedResultsController performFetch:&error];
if (error) NSLog(@"[%@ %@] %@ (%@)", NSStringFromClass([self class]),  NSStringFromSelector(_cmd), [error localizedDescription], [error localizedFailureReason]);
//...
[self.tableView reloadData]; 
```

至于节数和行数（返回 1 和 3）：

```
- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView {
    return [[self.fetchedResultsController sections] count];
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section {
    return [[[self.fetchedResultsController sections] objectAtIndex:section] numberOfObjects];
} 
```

在`cellForRowAtIndexPath`我只是调用以下内容来检索每个对象

```
id myObject = [self.fetchedResultsController objectAtIndexPath:indexPath] 
```

编辑 2 ----- 好的，这是实际代码，而不是我挑选零件：

在我的`Registration+sync.m`：

```
+ (NSFetchRequest*)requestForAll {
    NSFetchRequest *request = [NSFetchRequest fetchRequestWithEntityName:NSStringFromClass([self class])];
    request.sortDescriptors = @[[NSSortDescriptor sortDescriptorWithKey:@"remote_id" ascending:YES]];
    return request;
}

+ (NSFetchedResultsController*)requestForAllResultsController {
    NSFetchRequest *request = [self requestForAll];
    NSManagedObjectContext *context = [DataController instance].database.managedObjectContext;
    return [[NSFetchedResultsController alloc] initWithFetchRequest:request managedObjectContext:context sectionNameKeyPath:nil cacheName:nil];
}

+ (NSArray*)allObjects {
    NSFetchRequest *request = [self requestForAll];
    return [[DataController instance] fetch:request];
} 
```

在数据控制器中：

```
- (NSArray*)fetch:(NSFetchRequest*)request {
    NSManagedObjectContext *context = self.database.managedObjectContext;
    NSError *error = nil;
    return [context executeFetchRequest:request error:&error];
} 
```

在 TableViewController 中：

```
- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    NSLog(@"rows: %d", [[[self.fetchedResultsController sections] objectAtIndex:section] numberOfObjects]);
    NSLog(@"all objects: %d", [[Registration allObjects] count]);
    return [[[self.fetchedResultsController sections] objectAtIndex:section] numberOfObjects];
} 
```

打印出以下内容：

```
2012-10-09 15:22:04.211 MyApp[8279:c07] rows: 4
2012-10-09 15:22:04.214 MyApp[8279:c07] all objects: 68 
```

# iphone - 如何用另一种颜色填充图像视图的一部分

> ID：12798623
> 
> 赞同：0
> 
> 时间：2012-10-09T11:00:21.073
> 
> 标签：iphone

我正在开发一个应用程序，我在其中使用一个`UIImageView`并向其中添加一个矩形图像`UIImageView`。我从像 67.4 这样的另一个计算中得到一些浮点值，我需要在矩形的 67.4 部分放置一个绿色图像`UIImageView`。那么请告诉我如何将绿色图像填充到上面`UIImageView`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T12:19:39.383

您可以制作一个“矩形”，即 a`UIView`并根据需要为其着色。然后将其添加到您的图像视图中。

```
UIView *greenRect = [[UIView alloc] initWithFrame:
   CGRectMake(67.4, 67.4, width, height)];
greenRect.backgroundColor = [UIColor greenColor]; 
[imageView addSubview:greenRect]; 
```

# javascript - java - 如何在java脚本中解析json中的响应数组？

> ID：12798629
> 
> 赞同：-1
> 
> 时间：2012-10-09T11:00:47.960
> 
> 标签：javascript, jquery

> **可能重复：**
> [如何在 JavaScript 中解析 JSON](https://stackoverflow.com/questions/4935632/how-to-parse-json-in-javascript)

嗨，我必须使用 AJAX 解析以下响应。我一直在尝试，但没有得到。

```
[{"Status":"True"},{"Data":[{"ApplicationNo":"RE09","ApplicationName":"Salim"},{"ApplicationNo":"RE13","ApplicationName":"V Damodaran"}]}]

 <script type="text/javascript">

     $(document).ready(function () {
         $("#btnlogin").click(function (e) {
             e.preventDefault();
              var txtUsernameID = $("input#useridtxt").val();
             var txtPasswordID = $("input#pwdtxt").val(); 
             alert(txtUsernameID+","+txtPasswordID);

             $.ajax({
                 type: 'POST',
                 //data: '{"username":"' + $("input#txtusername").val() + '","password":"' + $("input#txtpassword").val() + '"}',
                 url: '',
                 contentType: 'application/json; charset=utf-8',
                 dataType: 'json',

                 success:
              function (url, textStatus, XMLHttpRequest) {

                 $.each(url.Data, function(index, item) {
                    alert(item.agentid);

                });         

                 },
                 error:
              function (XMLHttpRequest, textStatus, errorThrown) {
                  alert(textStatus);
              }

             });

         });
     });

</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T11:11:28.740

您根本不需要解析 JSON，`ajax`当您指定`'json'`为数据类型时，该方法会为您执行此操作。

您得到的是一个包含两个项目的数组，该`Data`属性位于第二个数组项的对象中，因此您可以使用`url[1].Data`：

```
$.each(url[1].Data, function(index, item) {
  alert(item.agentid);
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T11:04:19.933

在你的成功函数中，你需要解析对 json 的响应。大多数浏览器都有一个原生 JSON.parse() 函数，你可以用它来测试

# date - Solr Lucene - 禁用按文档被索引的日期和时间排序？

> ID：12798630
> 
> 赞同：0
> 
> 时间：2012-10-09T11:01:01.497
> 
> 标签：date, solr, lucene, indexing

请问我可以按照返回搜索结果的顺序寻求一些帮助吗？在我看来，当重新索引文档时，它会出现在搜索结果的末尾。

我只按'score desc'排序，所以我不知道重新索引的项目如何最终成为最后的结果。

我可以以任何方式关闭或控制此索引日期排序吗？

非常感谢您的帮助 - 非常感谢。赛博。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T01:00:24.860

对于忽略日期/时间的排序，您可以使用[Random Sort](http://lucene.apache.org/solr/api-4_0_0-BETA/org/apache/solr/schema/RandomSortField.html)，然后它会返回忽略您提到的日期/时间的结果

# spring-mvc - 启动tomcat时出现'java.lang.ClassNotFoundException：org.springframework.beans.BeansException'

> ID：12798636
> 
> 赞同：0
> 
> 时间：2012-10-09T11:01:16.650
> 
> 标签：spring-mvc, noclassdeffounderror

我正在尝试一个**`Spring-MVC`**项目 SpringExample，它是一个简单的 Hello World 示例。代码中没有错误并且构建得非常好，但是当我启动 tomcat 来部署应用程序时，我收到以下异常：

```
SEVERE: Servlet /SpringExample threw load() exception
java.lang.ClassNotFoundException: org.springframework.beans.BeansException
at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1680)
at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1526)
at java.lang.Class.getDeclaredConstructors0(Native Method)
at java.lang.Class.privateGetDeclaredConstructors(Unknown Source)
at java.lang.Class.getConstructor0(Unknown Source)
at java.lang.Class.newInstance0(Unknown Source)
at java.lang.Class.newInstance(Unknown Source)
at org.apache.catalina.core.StandardWrapper.loadServlet(StandardWrapper.java:1149)
at org.apache.catalina.core.StandardWrapper.load(StandardWrapper.java:1026)
at org.apache.catalina.core.StandardContext.loadOnStartup(StandardContext.java:4421)
at org.apache.catalina.core.StandardContext.start(StandardContext.java:4734)
at org.apache.catalina.core.ContainerBase.start(ContainerBase.java:1057)
at org.apache.catalina.core.StandardHost.start(StandardHost.java:840)
at org.apache.catalina.core.ContainerBase.start(ContainerBase.java:1057)
at org.apache.catalina.core.StandardEngine.start(StandardEngine.java:463)
at org.apache.catalina.core.StandardService.start(StandardService.java:525)
at org.apache.catalina.core.StandardServer.start(StandardServer.java:754)
at org.apache.catalina.startup.Catalina.start(Catalina.java:595)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
at java.lang.reflect.Method.invoke(Unknown Source)
at org.apache.catalina.startup.Bootstrap.start(Bootstrap.java:289)
at org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:414) 
```

请建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-09-11T20:21:24.360

将 org.springframework.beans-XXXRELEASE.jar 添加到 Web 应用程序库。这应该解决异常。

# jquery - 滚动到文本框 onBlur 表单上的单选按钮

> ID：12798643
> 
> 赞同：0
> 
> 时间：2012-10-09T11:01:48.923
> 
> 标签：jquery

我有一个调查表供用户填写。当用户完成一个问题（触发 onBlur 事件）时，页面会平滑滚动到下一个问题（使用锚标记）以供他们完成。除了以下情况（在 jsFiddle 中显示）之外，这工作正常：

*   用户在第一个文本框“A”中输入文本
*   他们通过向下滚动到然后直接单击单选按钮列表中的选项来离开文本框“A”。

它完美地触发了滚动事件（尽管它在 jsFiddle 中看起来不那么平滑，尽管这无关紧要）。问题是它没有将单击的单选选项设置为选中，并且用户需要单击再次选择。

jsFiddle：http: [//jsfiddle.net/4ZkpZ/5/](http://jsfiddle.net/4ZkpZ/5/)

有人有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T11:29:37.750

问题很简单。您将事件处理程序附加到整个主体。因此，任何模糊事件都会导致滚动到指定的 div。导致模糊事件的任何其他操作都将被取消。这就是为什么单击生成模糊事件的单选按钮没有保持选中状态的原因。

我所做的只是将事件处理程序绑定到表。为了您的方便，您可以将特定的类添加到您的文本区域或添加封闭的 div。希望有帮助

[http://jsfiddle.net/4ZkpZ/10/](http://jsfiddle.net/4ZkpZ/10/)

# css - 我怎样才能让我的随机橙色框向上并在其上方的另一个橙色框下方？

> ID：12798646
> 
> 赞同：1
> 
> 时间：2012-10-09T11:02:10.870
> 
> 标签：css

嗨，这甚至可能吗？我已经尝试了将那个橙色盒子放在另一个橙色盒子下面的所有方法？这是我的代码，我要疯了！！

```
<div id="container">

    <div id="nav1"></div>
    <div id="nav2"></div>

    <div id="box3"></div>
    <div id="box4"></div>
    <div id="box5"></div>
    <div id="box5"></div>
    <div id="box3"></div>

</div> 
```

CSS

```
#box3
{ 
  width:250px;
  height:200px; 
  background-color:#F30; float:left; 
} 
#box4
{ 
  width:500px;
  height:400px; 
  background-color:#F00; 
  float:left; 
} 
#box5
{ 
  width:250px;
  height:200px; 
  background-color:#C00; 
  float:left; 
} 
```

[提琴手](http://jsfiddle.net/W5uE3/)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-09T11:15:46.860

JSfiddle：http: [//jsfiddle.net/W5uE3/](http://jsfiddle.net/W5uE3/)

html:

```
<div id="container">

    <div id="nav1"></div>
    <div id="nav2"></div>

    <div id = 'cont1'>    
        <div class="box3"></div>
        <div class="box3"></div>
    </div>
    <div id="box4"></div>
    <div class="box5"></div>
    <div class="box5"></div>
</div>​​​​​​​​​​​​​​​​​ 
```

CSS：

```
#container { 
    width: 1000px; 
}
.box3{ 
    width:250px; 
    height:200px; 
    background-color:#F30; 
    float:left; 
} 
#box4{ 
    width:500px; 
    height:400px; 
    background-color:#F00; 
    float:left; 
} 
.box5{ 
    width:250px; 
    height:200px; 
    background-color:#C00; 
    float:left; 
}
#cont1 {
    float: left;
    width: 250px;
} 
```

您不需要使用 z-index，只需一个额外的容器。并将多个 id 更改为类。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T11:13:06.997

首先，您不能使用任何具有相同 id 的 div，您有 2 个具有`box5`id 的 div 和 2 个具有 id 的 div `box3`，请考虑将它们更改为使用 a`class`而不是 an `id`。然后

您应该`clear:both`在要放置在其他底部的 div 上使用。

例如：

```
<div id="box4" style="clear:both"></div>
<div id="box3" style="clear:both"></div> 
```

# xslt - 尝试从属性值创建 xml

> ID：12798648
> 
> 赞同：1
> 
> 时间：2012-10-09T11:02:18.097
> 
> 标签：xslt, xslt-1.0, xslt-2.0, jsonx

我的输入 xml 会像这样带有 json 命名空间..

```
<json:object xmlns:json="http://www.ibm.com/xmlns/prod/2009/jsonx" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
    <json:object name="Login">
        <json:object name="Group">
            <json:object name="TargetSystem">
                <json:string name="Name">john</json:string>
                <json:string name="Password"/>
            </json:object>
        </json:object>
    </json:object>
</json:object> 
```

我需要这样的输出

```
<Login>
    <Group>
        <TargetSystem>
            <Name>john</Name>
            <Password/>
        </TargetSystem>
    </Group>
</Login> 
```

我必须使用 xslt 输入 xml 中的属性名称值创建此 xml。我正在使用下面的 xslt。

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" xmlns:json="http://www.ibm.com/xmlns/prod/2009/jsonx">
    <xsl:output method="xml" indent="yes" omit-xml-declaration="no"/>
    <xsl:template match="/">

        <xsl:apply-templates select="json:object/*"/>
    </xsl:template>
    <xsl:template match="json:object">
        <xsl:element name="{@name}">
            <xsl:value-of select="."/>
        </xsl:element>
    </xsl:template>
</xsl:stylesheet> 
```

使用这个我得到的只有约翰。我必须使用一些循环概念..谁能帮我实现这一目标？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T11:57:11.937

如果您喜欢最小的 XSLT，那么可以提出一个通用的 XSLT，它可以与任何名称空间一起使用。

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
   <xsl:output method="xml" indent="yes" omit-xml-declaration="no"/>

   <xsl:template match="*[@name]">
      <xsl:element name="{@name}">
       <xsl:apply-templates/>
      </xsl:element>
   </xsl:template>
</xsl:stylesheet> 
```

换句话说，这将匹配任何具有**@name**属性的元素，并创建一个具有该名称的元素。因为根元素没有这个属性，所以它不会被输出，但是默认的模板匹配会继续处理它的子元素。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T11:36:32.573

我想你想要

```
<xsl:stylesheet
  xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
  version="2.0"
  xmlns:json="http://www.ibm.com/xmlns/prod/2009/jsonx"
  exclude-result-prefixes="json">

<xsl:template match="/json:object">
  <xsl:apply-templates/>
</xsl:template>

<xsl:template match="json:object[@name]">
  <xsl:element name="{@name}">
    <xsl:apply-templates/>
  </xsl:element>
</xsl:template>

<xsl:template match="json:string[@name]">
  <xsl:element name="{@name}">
    <xsl:value-of select="."/>
  </xsl:element>
</xsl:template>

</xsl:stylesheet> 
```

# build - IntelliJ 编译多模块项目

> ID：12798650
> 
> 赞同：2
> 
> 时间：2012-10-09T11:02:26.987
> 
> 标签：build, compilation, intellij-idea

我将 IDE 从 Eclipse 更改为 IDEA。我正在尝试将其配置为尽可能有效地工作。我有以下问题。我希望 IDEA 在更改一个文件并导致问题后自动向我显示所有带有编译错误的文件。我安装了 IntelliJ Eclipse Mode 插件并选择了 Eclipse 编译器，但我仍然存在以下问题：在模块接口中，我有一个接口 - 假设为 InterfaceA。它的实现包含在 module-implementation1 *Implementation1*和 module-implementation2 *Implementation2*中，两者都依赖于模块接口。现在，当我更改一个 interfaceA 的方法签名并保存时，**使**被自动触发（eclipseMode 插件），但没有编译错误，因为在当前模块中只存在接口。当我选择所有模块并选择**make selected modules**编译在第一个有错误的模块上停止时，即 module-implementation1 所以我只看到*Implementation1*的问题。一旦我修复了这个实现并开始手动制作过程，IDE 就会在*Implementation2*中显示编译错误。

是否可以配置 Intelij 以便它编译所有依赖模块并显示所有有编译问题的文件，就像 eclipse 那样？在此先感谢，这对我来说真的很困惑。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T12:05:26.560

看到这个[答案](https://stackoverflow.com/questions/12744303/intellij-idea-java-classes-not-auto-compiling-on-save)。基本上，看起来它会在 IntelliJ 12 中得到支持

# android - 如何设计具有高分辨率但密度较低的屏幕的平板电脑用户界面？

> ID：12798651
> 
> 赞同：1
> 
> 时间：2012-10-09T11:02:27.733
> 
> 标签：android, tablet, hdpi

我希望模拟器利用文件夹中存在的`xhdpi`文件，同时它应该具有低密度。我的模拟器设置为`1280 X 800`类似于`motorola xoom`平板电脑的分辨率。现在，如果我保持密度`149 ppi`，android 不会访问该`xhdpi`文件夹。请帮忙。TIA。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T11:11:16.550

不要误会`Screen size`，`Screen density`和`Resolution`。首先阅读[这篇文章](http://developer.android.com/guide/practices/screens_support.html#terms)。

# python-3.x - setattr() 和 getattr() 会显着降低速度吗？

> ID：12798653
> 
> 赞同：7
> 
> 时间：2012-10-09T11:02:42.573
> 
> 标签：python-3.x

今天在办公室查了一些代码，发现如下代码。它震惊了我。

```
class XXXX():
    def __init__(self, k, v):
        for i in range(len(k)):
            setattr(self, k[i], v[i]) 
```

然后我发现大部分的类都是用同样的方式写的。这意味着所有的类都是同一个类，唯一不同的是他们的名字。

在这个项目`setattr()`中用于设置属性和`getattr()`用于获取属性在profile log`setattr`中被调用了2700次，`getattr`被调用了3800次。耗时分别为 0.003 秒和 0.005 秒（整个过程：0.069 秒）。

尽管我确实认为`setattr`并`getattr`降低了速度，但我不确定重写所有代码是否会使其变得更好。

obj.attribute = value 运行得比 快`setattr(obj,'attribute',value)`吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-11T19:21:06.590

是的，`getattr`而且`setattr`速度要慢得多，至少在 CPU 级别上是这样。

由于`__init__`每个对象只调用一次，除非您创建很多很多对象，否则我不会担心这一点。

如果对象的属性被多次访问，那么重写这些部分可能是值得的。不过，您应该先进行一些仔细的分析。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-12-13T19:47:04.960

我做了一个小测试。它大约慢了 2 倍。

```
Increment using member took 2.8221039772

Increment using attr took 5.94811701775 
```

这是我的代码

```
import timeit
class Dummy(object):
    __slots__ = ['testVal']
    def __init__(self):
        self.testVal = 0

    def increment_using_attr(self):
        i = getattr(self, 'testVal')
        setattr(self, 'testVal', i+1)

    def increment(self):
        self.testVal += 1

if __name__ == '__main__':
    d = Dummy()
    print "Increment using member took {0}".format(timeit.Timer(d.increment).timeit(10000000))
    print "Increment using attr took {0}".format(timeit.Timer(d.increment_using_attr).timeit(10000000)) 
```

在机器上运行 Intel(R) Core(TM)2 Quad CPU Q9550 @ 2.83GHz

# wordpress - WordPress 从 URL 获取类别 ID

> ID：12798665
> 
> 赞同：4
> 
> 时间：2012-10-09T11:03:28.610
> 
> 标签：wordpress, categories, posts

我很难找到解决方案，有人知道如何得到这个：

我在不止一个类别中有一篇 WordPress 帖子，但只有一个是永久链接类别。我只需要获取该永久链接类别的 ID（我需要此信息，因此我可以通过自定义查询从永久链接类别中获取一些最新帖子）。

网址看起来像这样[http://domain.com/](http://domain.com/) **category-name** /post-title

我需要那个“类别名称”ID。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2015-02-03T15:41:33.993

一个好用的是：

```
<?php $page_object = get_queried_object(); ?>
<h1><?php echo $page_object->cat_name; ?></h1> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-05-14T15:55:20.057

我的回答是：

```
function get_category_by_url($url) {
    foreach( (get_the_category()) as $category) {
        if ( get_category_link($category->cat_ID) == $url )
            return $category->slug;
    }
    return false;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-09T11:17:36.710

If the post belongs to many categories, what if you're viewing the post from a second category. In that case retrieving the category ID of the permalink category may not help, since you would need the related posts of the current category in action.

For that, you can get the ID by passing the category name as follows:

```
<?php get_cat_ID($cat_name)?> 
```

Does this help?

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-09T11:22:16.367

Wordpress 选择最旧的类别作为永久链接类别。除非您使用某些插件，否则无法更改该行为。如果您选择使用插件，您可以从插件设置中获取类别 ID。

您可以列出此帖子的所有类别并选择最相关的类别。在循环中使用以下代码：

```
foreach((get_the_category()) as $category) 
{
   if ( $category->cat_ID == 1000 )
      ; // DO SOMETHING
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-03-24T01:25:08.353

```
$category = end(get_the_category());
$current = $category->cat_ID;
echo 'id='.$current . ' - name=' . $category->cat_name; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-01-21T14:08:12.017

```
global $wp;
  $current_url = home_url( add_query_arg( array(), $wp->request ) ); get url

$url_array = explode('/',$current_url); 
$retVal = !empty($url_array[5]) ? $url_array[5] : $url_array[4] ;
$idObj = get_category_by_slug($retVal); 
echo $idObj->name
```

# gnu-make - 获取make变量的第一个字母

> ID：12798666
> 
> 赞同：8
> 
> 时间：2012-10-09T11:03:57.890
> 
> 标签：gnu-make

有没有比获取 GNU`make`变量的第一个字符更好的方法

```
FIRST=$(shell echo $(VARIABLE) | head -c 1) 
```

（这不仅笨拙，而且还调用了外壳）？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-09T22:29:25.313

这非常可怕，但至少它不会调用`shell`：

```
$(eval REMAINDER := $$$(VAR))          # variable minus the first char
FIRST := $(subst $(REMAINDER),,$(VAR)) # variable minus that 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-18T15:53:28.620

[GNU Make 标准库](http://gmsl.sourceforge.net/)提供了一个`substr`函数

**子串**

```
Arguments: 1: A string
           2: Start offset (first character is 1)
           3: Ending offset (inclusive)
Returns:   Returns a substring 
```

我没有测试过，但`$(call substr,$(VARIABLE),1,1)`应该可以

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-01-18T17:58:03.277

由于我在自己的搜索中遇到了这个并且没有找到我正在寻找的内容，因此我最终使用它来解析可以应用于任何已知字符集的十六进制数字

```
letters := 0 1 2 3 4 5 6 7 8 9 a b c d e f
nextletter = $(strip $(foreach v,$(letters),$(word 2,$(filter $(1)$(v)%,$(2)) $v))) 
```

然后

```
INPUT := 40b3
firstletter := $(call nextletter,,$(INPUT))
secondletter := $(call nextletter,$(firstletter),$(INPUT))
thirdletter := $(call nextletter,$(firstletter)$(secondletter),$(INPUT)) 
```

等等

它很丑，但它与外壳无关

# java - 路径之间的 java.nio.Path relativize 做了假设，我无法检查

> ID：12798668
> 
> 赞同：4
> 
> 时间：2012-10-09T11:04:03.943
> 
> 标签：java, file-io, path, java-7

我正在使用 java 7 的新 Path 对象，但遇到了问题。

我有一个带有基本目录的文件存储系统，并且我创建了自己的相对路径。最后，我只想将这个相对路径存储在某个地方。我遇到了 Path.relativize 的问题。

我有两个用例。1.

```
Path baseDir = Paths.get("uploads");
Path filename = Paths.get("uploads/image/test.png")

return baseDir.relativize(filename); 
```

这将返回一个完美的 Path `image/test.png`。

但是，用例 2：

```
Path baseDir = Paths.get("uploads");
Path filename = Paths.get("image/test.png")

return baseDir.relativize(filename); 
```

返回`../image/test.png`。我只想让它返回“image/test.png”

在[路径教程](http://docs.oracle.com/javase/tutorial/essential/io/pathOps.html#relativize)中它说

> 在没有任何其他信息的情况下，假设 2 个 Path 是兄弟姐妹

我想要的是能够检测到这种情况。在这种情况下，我只想返回文件名并忽略 baseDir。

我目前这样解决它，但我希望有更好的方法：

```
Path rootEnding = getRootDirectory().getName(getRootDirectory().getNameCount() - 1);

for (Path part : path) {
    if (part.equals(rootEnding)) {
        return getRootDirectory().relativize(path);
    }
}

return path; 
```

所以我的问题是，有没有更好的方法来检查这个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T11:25:06.173

尝试添加一个`normalize()`after `relativize()`。它似乎打算这样做（删除不必要的 .. 和 . ）。不要错过有关 javadoc 中符号链接的注意事项。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T13:05:16.303

这不是 100% 等同于您上面写的，但我认为它可以满足您的需求。基本上，让我们`baseDir`成为一个相对路径。假设任何`baseDir`相对于文件系统的根。然后允许`filename`来自这个“模拟根”的相对或绝对。

关于什么：

```
if (filename.startsWith(baseDir)) {
    filename = baseDir.relativize(filename);
} 
```

# java - 构造函数：从参数列表中获取类型列表

> ID：12798671
> 
> 赞同：0
> 
> 时间：2012-10-09T11:04:15.843
> 
> 标签：java, constructor, arguments

我目前正在开发一个程序，我将在运行时动态加载类并构建一个函数库来支持它。其中一个函数是一种方法，可以轻松地在给定的 jar 文件中搜索给定的类名，并从给定的一组初始化参数中创建一个新实例。

问题是争论。我知道如何为一组类类型找到一个类的构造函数，但是，试图找到一个接受参数列表的构造函数更难。我的第一个想法是遍历参数并调用`getClass()`每个参数，但是对于某些构造函数来说可能是有效的 null 参数呢？

是否有任何明智的方法可以为给定的一组参数找到正确的构造函数？

注意：仅限标准 Java，这是一个联合项目，因此 Java 派生语言和第 3 方库不可用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T11:08:44.953

您是否通过[反射 API](http://docs.oracle.com/javase/tutorial/reflect/member/ctorLocation.html)教程？它有你想要的实现..

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T11:26:19.503

通过反射 API 教程后，您可以使用单一方法解决您的问题

```
private final boolean checkConstructor(Class<?> type, Class<?>... parameterTypes)  {

        try {
             forName.getConstructor(parameterTypes);
             return true;
        }catch(NoSuchMethodException e) {

        }

        return false;
    } 
```

您必须记住的顺序`paraemterTypes`很重要。

您不应该在调用不知道参数类型的构造函数的地方分配信息。同样的规则也适用于你不应该在构造函数中使用 null 的代码风格。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-09T11:28:53.930

getClass() 是一种正确的方法。您必须遍历所有可访问的构造函数，并根据[选择构造函数及其参数](http://docs.oracle.com/javase/specs/jls/se7/html/jls-15.html#jls-15.9.3)的精神选择最具体的构造函数，包括在找到 0 或 >1 个构造函数时抛出异常，以及像[确定方法签名](http://docs.oracle.com/javase/specs/jls/se7/html/jls-15.html#jls-15.12.2)中那样装箱/拆箱。由于空值，您无法从字面上实现该算法，但应尽可能接近。

# java - GWT 检查移动浏览器是否可以打开/下载 pdf 文件

> ID：12798672
> 
> 赞同：0
> 
> 时间：2012-10-09T11:04:16.487
> 
> 标签：java, gwt, pdf, user-agent

我想知道是否`GWT`可以检测浏览器（移动/桌面）是否可以打开 pdf 文件？

在我的应用程序中，单击`gwt-Button`（名为 PDF）将生成 pdf 报告。pdf 创建发生在服务器端 (php)，我所要做的就是调用特定的操作。服务器包括`application/pdf`作为其`Content-type`.

现在，在（模拟器）中测试我的 PDF 按钮会`iPad/iPhone`打开一个新选项卡，其中显示在`Android`模拟器上生成的 PDF 报告（在 Eclipse 上运行的[Android SDK for Mac](http://dl.google.com/android/android-sdk_r20.0.3-macosx.zip)`.php` ），它会下载处理 pdf 报告而不是生成的 pdf 文件的处理。所以我决定只在那些可以打开`PDF`文件的浏览器上查看我的 PDF 按钮。这个怎么做？

检查用户代理后：

iPad模拟器=`Mozilla/5.0 (iPad; U; CPU OS 4_3 like Mac OS X; en-us) AppleWebKit/533.17.9 (KHTML, like Gecko) Version/5.0.2 Mobile/8F192 Safari/6533.18.5`

对于我的 Android 模拟器 =`Mozilla/5.0 (Linux; U; Android 4.1; en-us; sdk Build/JRN83C) AppleWebKit/534.30 (KHTML, like Gecko) Version/4.0 Mobile Safari/534.30 Safari/6533.18.5`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T12:49:55.423

您的代码中可能有一些错误，因为 .php 永远不能下载！

对于您的 pdf 检测问题，请检查此 jquery 插件： http: [//plugins.jquery.com/browser/](http://plugins.jquery.com/browser/)

您可以将它插入到您的 html 中，并通过 GWT 中的本机方法获取其结果。不是最干净的解决方案，但它应该可以根据需要工作。

# android - 在运行时设置按钮

> ID：12798678
> 
> 赞同：0
> 
> 时间：2012-10-09T11:04:22.570
> 
> 标签：android, android-layout, android-widget

我正在运行时创建按钮，如下所示...

```
 Button newCategoryButton = new Button(this);   
    newCategoryButton.setText(catName);
    newCategoryButton.setWidth(30);
    newCategoryButton.setBackgroundResource(R.drawable.bnt);     

    LayoutParams lp = new LayoutParams(LayoutParams.WRAP_CONTENT,     LayoutParams.WRAP_CONTENT);

    ll.addView(newCategoryButton, lp); 
```

但我的问题是当我从那个活动回来时它消失了。

我想要这个永久的。另一个问题是如何在其他按钮下方设置此按钮？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T11:24:08.080

```
 LinearLayout.LayoutParams  layoutParams;
 LinearLayout  ll;
   Button newCategoryButton=new Button(this)
   newCategoryButton.setText("Push Me");
 layoutParams = new LinearLayout.LayoutParams(LayoutParams.WRAP_CONTENT,LayoutParams.WRAP_CONTENT);
 ll.addView(view, newCategoryButton); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T11:08:31.930

您应该将此代码放在 onResume() 中，而不是 onCreate() 方法中；-)

![在此处输入图像描述](../Images/7f3babb335f03972dbbd441593b3d25d.png)

如果要使用另一个按钮下的按钮，则需要使用垂直方向的 LinearLayout！

```
LinearLayout myll = (LinearLayout) findViewById(R.id.yourLinearLayout);
myll.setLayoutParams(LinearLayout.WRAP_CONTENT, LinearLayout.WRAP_CONTENT);
myll.setOrientation(LinearLayout.VERTICAL);
myll.addView(view, Button1); 
myll.addView(view, Button2);
setContentView(myll) 
```

# ios - UIScrollview 中的 UIPanGesture 垂直拖动对象

> ID：12798679
> 
> 赞同：2
> 
> 时间：2012-10-09T11:04:22.570
> 
> 标签：ios, uiscrollview, drag-and-drop, uipangesturerecognizer

我已将 UIPanGesture 添加到 UIScrollView 和 Draggable 对象，以实现从 UIScrollView 到 UIView 的拖放功能，一切正常，但是当 O 垂直滚动 Draggable 对象而不是 UIScrollView 滚动时它不起作用。

有任何想法吗？当我使用 UIPanGesture 拖动对象时，如何使 UIScrollview 滚动？

# html - 如何在光标下找到 HTML5 画布元素？

> ID：12798681
> 
> 赞同：1
> 
> 时间：2012-10-09T11:04:28.340
> 
> 标签：html, canvas, cursor, html5-canvas, mousemove

我知道有[这个问题](https://stackoverflow.com/questions/12608729/cursorpointer-on-hover-html5-canvas-element)建议在每次鼠标移动时循环遍历所有画布元素。

但是，有没有比遍历所有元素更有效的方法？

我在画布上有很多元素，每次鼠标移动时循环遍历它们可能非常非常慢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T15:45:14.650

**是的，您必须遍历所有元素。**

这就是几乎所有命中测试/对象选择的工作原理。

现在您可以进行很多优化，例如在测试对象的实际边界之前确保鼠标坐标位于对象的矩形边界内（除非它们都是矩形，这将使一切变得方便快捷，即使有 10,000 个对象）。如果您有一百万个对象，您还可以将它们的位置分成象限，或者添加一层隔离。

但是在一天结束时，您需要遍历每个相关对象并询问其边界是否与鼠标点相交。没有办法解决这个问题。它*应该*很快，如果你实现了一些非常慢的东西，那么你应该发布它，这样我们就可以看看并给你指点。

如果您需要查看一个实时示例，我制作了一个[关于在画布中挑选和移动形状的简单教程，以](http://simonsarris.com/blog/510-making-html5-canvas-useful)准确解释这种情况。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T01:00:35.080

在 javascript 中循环遍历 10000 个元素仍然不费吹灰之力。

但是，您可能会考虑在每次鼠标移动时都以一定的间隔循环遍历它们。

```
var mouseX, mouseY;

$(document).on("mousemove", function(e) {
  mouseX = e.pageX;
  mouseY = e.pageY;

  /* dont do any probing there */

});

setInterval(function() {
  checkCollision();
}, 25); 
```

# php - 将数字添加到节点值并更新？

> ID：12798683
> 
> 赞同：0
> 
> 时间：2012-10-09T11:04:48.593
> 
> 标签：php, xml

我正在尝试将 +1 添加到我的 XML 文档中的数字，如果它只是一个没有问题，但是...如果我想更新 2 个节点，它会出错吗？

这是我尝试过的：

```
$xml = new DOMDocument("1.0", "ISO-8859-1");
$xml->formatOutput = true;
$xml->preserveWhiteSpace = false;
$xml->loadXML('<?xml version="1.0"?>
<friends>
  <friend id="1">
    <name>MyTest</name>
    <games>5</games>
    <wins>3</wins>
  </friend>
</friends>');

echo "<xmp>OLD:\n". $xml->saveXML() ."</xmp>";

$library = $xml->documentElement;
$xpath = new DOMXPath($xml);
$xpath2 = new DOMXPath($xml);

$result = $xpath->query('//friend[@id="1"]/games');
if($result){

    $cgames = $xpath->query('//friend[@id="1"]/games')->item(0);
    $cgames = $cgames->nodeValue;
    $result->item(0)->nodeValue = $cgames+1;

    $cwins = $xpath->query('//friend[@id="1"]/wins')->item(0);
    $cwins = $cwins->nodeValue;
    $result->item(0)->nodeValue = $cwins+1;

    echo "<xmp>NEW:\n". $xml->saveXML() ."</xmp>";
} 
```

这样做时，我只更新它的新值是 4？它应该是 6 应该是 4 ......我做错了什么？

请提前帮助和感谢:-)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T11:08:20.970

添加，因为您正在`$result2`尝试更新搜索`/wins``/games`

```
$result = $xpath->query('//friend[@id="1"]/games');
$result2 = $xpath->query('//friend[@id="1"]/wins');

if($result){
    $cgames = $result->item(0)->nodeValue;
    $result->item(0)->nodeValue = $cgames+1;
}

if($result2){
    $cwins = $result2->item(0)->nodeValue;
    $result2->item(0)->nodeValue = $cwins+1;
}

echo "<xmp>NEW:\n". $xml->saveXML() ."</xmp>"; 
```

并删除`$xpath2 = new DOMXPath($xml);`，你不需要 2 `XPath`s

[键盘示例](http://codepad.org/xOJG4nHW)

# django - 管理面板的问题

> ID：12798685
> 
> 赞同：2
> 
> 时间：2012-10-09T11:04:59.170
> 
> 标签：django, django-templates, django-admin

嗨，我想向**管理员展示一个表单，该表单**将从数据库（多个表）中获取一些数据，以便管理员可以在同一表单中获取更多用户信息。

那么我如何在 Django 的管理界面中添加模板并将其显示在主页上。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T15:40:42.803

您可以扩展管理模板，例如 admin/base.html。

# hibernate - Hibernate 在 session.createQuery.list 挂起

> ID：12798686
> 
> 赞同：2
> 
> 时间：2012-10-09T11:05:04.403
> 
> 标签：hibernate

下面是我的代码

 `````
@SuppressWarnings("unchecked")
protected List<String> executeTestQuery(final String query)
{
    List<String> ret;

    Session session = factory.openSession();
       try
    {
          ret = session.createQuery(query).list();//HANGS
     }
    finally
    {

        session.flush();

       session.close();

    }
    return ret;
} 
````  `上面的方法是常用的方法，它被每个方法调用，在某些情况下也是递归的。
几次运行后，Hibernate 在提到的点挂起。
我什至加了
`config.setProperty(Environment.C3P0_MAX_SIZE, "100");`
`session.clear(), SessionFactoryUtils.releaseSession(session, factory);`
还是没用。
对上述问题的任何建议都会有很大帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-11T19:09:50.307

谢谢大家的帮助。终于问题解决了。问题不在于提到的功能。问题出在调用函数上，它的会话从未关闭 .session.flush 和 session.close 解决了这个问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T11:21:33.460

尝试使用 SessionFactory 的 getCurrentSession()。``

# php - curl在提交之前获取页面内容

> ID：12798691
> 
> 赞同：0
> 
> 时间：2012-10-09T11:05:26.783
> 
> 标签：php, curl

我正在尝试使用 curl 访问我注册的站点的帐户，问题是登录页面有一个隐藏的身份验证输入字段，例如`<input type='hidden' name='auth' value='adih2yerjh'/>`，有没有办法确保我在使用 curl 之前检查该站点的该字段提交表格？这是我的功能的模型

```
function login(){
    $login_email = 'email';
    $login_pass = 'password';

    $ch = curl_init();
    curl_setopt($ch, CURLOPT_URL, 'http://www.mysite.com/login.php');
    curl_setopt($ch, CURLOPT_POSTFIELDS,'email='.urlencode($login_email).'&pass='.urlencode($login_pass).'&login=Login');
    curl_setopt($ch, CURLOPT_POST, 1);
    curl_setopt($ch, CURLOPT_HEADER, 0);
    curl_setopt($ch, CURLOPT_FOLLOWLOCATION, 1);
    curl_setopt($ch, CURLOPT_COOKIEJAR, "cookies.txt");
    curl_setopt($ch, CURLOPT_COOKIEFILE, "cookies.txt");
    curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
    curl_setopt($ch, CURLOPT_USERAGENT, "Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US; rv:1.8.1.3) Gecko/20070309 Firefox/2.0.0.3");
    $page = curl_exec($ch);
    echo $page;
} 
```

**编辑**：每次页面加载时身份验证代码都会更改

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T11:07:44.957

你必须提出两个 curl 请求。
首先获取页面内容并尝试从 HTML 中提取该名称。您可能还需要处理会话或 cookie。
然后你可以提出第二个 curl 请求提交。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T11:18:02.950

你可以试试

```
$url = "http://www.mysite.com/login.php";
$html = file_get_contents($url);
preg_match("~<input type='hidden' name='auth'  value='(.*?)' />~",$html,$authHidden);

/**
 // Run your post request with auth=$authHidden
 */ 
```

# java - Log4j 单独的日志文件

> ID：12798692
> 
> 赞同：1
> 
> 时间：2012-10-09T11:05:35.707
> 
> 标签：java, log4j

> **可能重复：**
> [使用 log4j 创建多个不同内容的日志文件](https://stackoverflow.com/questions/728295/creating-multiple-log-files-of-different-content-with-log4j)

我想将调试日志和信息日志存储在单独的文件中，任何人都可以给我示例。

```
log4j.rootLogger=debug,R1,R2

log4j.appender.R2=org.apache.log4j.DailyRollingFileAppender
log4j.appender.R2.File=/Test/ex/ex.log
log4j.appender.R1.DatePattern='.'dd-MM-yy
log4j.appender.R2.layout=org.apache.log4j.PatternLayout
log4j.appender.R2.layout.ConversionPattern=%d{dd/MM/yy kk:mm:ss.SSS} %-5p [%t] %x (%F:%L) - %m%n 
```

当我尝试上述方法时，调试和信息日志存储在示例文件中。但是我怎么能分开存放。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T11:39:30.557

关键是使用 log4j 提供的 LevelMatchFilter。

这里是您的配置的更新版本

```
log4j.rootLogger=debug,R1,R2

log4j.appender.R1.DatePattern='.'dd-MM-yy 
log4j.appender.R1=org.apache.log4j.DailyRollingFileAppender
log4j.appender.R1.File=/Test/error.log
log4j.appender.R1.layout=org.apache.log4j.PatternLayout 
log4j.appender.R1.layout.ConversionPattern=%d{dd/MM/yy kk:mm:ss.SSS} %-5p [%t] %x (%F:%L) - %m
log4j.appender.R1.filter.1=org.apache.log4j.varia.LevelMatchFilter
log4j.appender.R1.filter.1.LevelToMatch=ERROR
log4j.appender.R1.filter.1.AcceptOnMatch=true
log4j.appender.R1.filter.2=org.apache.log4j.varia.DenyAllFilter

log4j.appender.R2.DatePattern='.'dd-MM-yy 
log4j.appender.R2=org.apache.log4j.DailyRollingFileAppender
log4j.appender.R2.File=/Test/info.log
log4j.appender.R2.layout=org.apache.log4j.PatternLayout 
log4j.appender.R2.layout.ConversionPattern=%d{dd/MM/yy kk:mm:ss.SSS} %-5p [%t] %x (%F:%L) - %m
log4j.appender.R2.filter.1=org.apache.log4j.varia.LevelMatchFilter
log4j.appender.R2.filter.1.LevelToMatch=INFO
log4j.appender.R2.filter.1.AcceptOnMatch=true
log4j.appender.R2.filter.2=org.apache.log4j.varia.DenyAllFilter

log4j.appender.debug.DatePattern='.'dd-MM-yy 
log4j.appender.debug=org.apache.log4j.DailyRollingFileAppender
log4j.appender.debug.File=/Test/debug.log
log4j.appender.debug.layout=org.apache.log4j.PatternLayout 
log4j.appender.debug.layout.ConversionPattern=%d{dd/MM/yy kk:mm:ss.SSS} %-5p [%t] %x (%F:%L) - %m
log4j.appender.debug.filter.1=org.apache.log4j.varia.LevelMatchFilter
log4j.appender.debug.filter.1.LevelToMatch=DEBUG
log4j.appender.debug.filter.1.AcceptOnMatch=true
log4j.appender.debug.filter.2=org.apache.log4j.varia.DenyAllFilter 
```

参考： [PropertyConfiguration](http://logging.apache.org/log4j/1.2/apidocs/org/apache/log4j/PropertyConfigurator.html#doConfigure%28java.lang.String,%20org.apache.log4j.spi.LoggerRepository%29) [LevelMatchFilter](http://logging.apache.org/log4j/1.2/apidocs/org/apache/log4j/varia/LevelMatchFilter.html)

# c - gcc 类型的大小

> ID：12798693
> 
> 赞同：3
> 
> 时间：2012-10-09T11:05:43.950
> 
> 标签：c, gcc, portability

由于类型的大小在 C 的标准中并不接近，如果没有它们的最大和最小大小，我想知道在哪里可以找到 gcc 如何解释它。

在 gcc 文档中他们将采用的类型的大小在哪里？有指定吗？我找不到该信息，所以我想要一些帮助。

提前致谢。

--- 结论 ---

查看您所有的评论，我终于得到了这个链接中的信息来争论答案

5.2.4.2.1 整数类型的大小：[http ://www.open-std.org/jtc1/sc22/wg14/www/docs/n1336.pdf](http://www.open-std.org/jtc1/sc22/wg14/www/docs/n1336.pdf)

[http://gcc.gnu.org/onlinedocs/gccint/Type-Layout.html](http://gcc.gnu.org/onlinedocs/gccint/Type-Layout.html)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-09T11:11:56.033

根据其他人所说，您可以看到limits.h。然而，做自己的更好方法是说出你的意思。因此`#include <stdint.h>`，您可以使用

*   `int32_t`正好 32 位
*   `int_fast32_t`对于至少具有 32 位的最快数据类型

但是，如果要存储数组偏移量，则应使用`size_t`or `ssize_t`; 同样对于足够大以存储指针的整数数据类型，使用`intptr_t`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-09T11:12:55.050

它本身不在 GCC 文档中，而是在每个目标系统的 ABI 文档中。例如对于 Linux x86_64，ABI 文档在这里：[http ://www.x86-64.org/documentation/abi.pdf](http://www.x86-64.org/documentation/abi.pdf)

[GCC 支持的每个 ABI 的详细信息当然都在 GCC 源代码中进行了编码，请参见http://gcc.gnu.org/onlinedocs/gccint/Target-Macros.html](http://gcc.gnu.org/onlinedocs/gccint/Target-Macros.html)的 GCC 内部手册中的第 17 章

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-09T11:08:16.413

对于最小值和最大值，您可以查看 limits.h（或 C99 及更高版本中的等效项 - stdint.h，其中包括 limits.h）。

对于类型的大小，只需使用 sizeof();

# python - 曲线样条（python）

> ID：12798695
> 
> 赞同：0
> 
> 时间：2012-10-09T11:05:47.337
> 
> 标签：python, interpolation, spline

给定二维平面中的一系列点`[(x0,y0), (x1,y1), ...]`，我想找到一条穿过这些点的[样条曲线。](http://en.wikipedia.org/wiki/Spline_%28mathematics%29)

1D 样条中的类[`scipy.interpolate`](http://docs.scipy.org/doc/scipy/reference/interpolate.html)需要增加`x`，因为这些`x`坐标的列表不需要增加（即曲线不是函数，`f(x)=y`而是参数化曲线）。*不幸的是，它都不是一个函数`y`（否则通过切换 x 和 y 坐标问题将很容易解决）。*

我尝试过使用单变量插值类，但这并没有达到预期的效果。我怎样才能用它`scipy.interpolate`来计算这条样条曲线？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-09T11:29:50.873

您需要重新考虑如何看待这个问题：实际上`x`是曲线的参数化（通常表示`t`时间）并且`y`是`x,y`坐标：

```
L = [(x0,y0), (x1,y1), ...]
X = numpy.array(L).T
# Equivalently (but less generally):
# X = [[P[0] for P in L], [ P[1] for P in L ]]

t,X = enumerate(L) # here t[0]==0 and X[0]==(x0,x1,..), X[1]==(y0,y1,..)
# or to name in a more confusing manner but match the docs: x,y = enumerate(L) 
```

然后您可以使用各种[`scipy.interpolate`](http://docs.scipy.org/doc/scipy/reference/interpolate.html)功能，例如：

```
f = scipy.interpolate.interp1d(t, X) 
```

.

`(0,0)`例如和之间的直线`(1,1)`：

```
f = interp1d((0,1), numpy.array([[0,0],[1,1]]).T )
#          (t0,t1)  numpy.array([[x0,y0],[[x1,y1]]).T
#          (t0,t1)              [[x0,x1],[[y0,y1]]
f(0.5) # array([ 0.5,  0.5]) 
```

# php - 如何在 php 中使用 select 函数中的数组

> ID：12798700
> 
> 赞同：0
> 
> 时间：2012-10-09T11:06:06.080
> 
> 标签：php, mysql

我试图从我在三个不同艺术家下面的 SELECT 函数中的不同选项中插入值，但它没有将它插入到我在 mysql 中的表中，我做错了吗？还是有其他方法可以从 select 函数中获取不同的选项并将它们插入到 mysql 表中？请提供任何帮助。谢谢

```
Artist1:<select name="role[]"><option></option>
<option>Actor</option>
<option>Director</option>
<option>Writer</option></select>

Artist2:<select name="role[]"><option></option>
<option>Actor</option>
<option>Director</option>
<option>Writer</option></select>

Artist3:<select name="role[]"><option></option>
<option>Actor</option>
<option>Director</option>
<option>Writer</option></select> 
```

//这是我的php代码

```
$role=$_POST['role'];
$role = array();

if(count($role) > 0) {
    mysql_query('INSERT INTO movie_artists (job) VALUES ' . implode(',', $role));
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T11:13:19.543

您正在分配价值，`$role`因此最初它将包含`$_POST['role']`但随后`$role = array()`将引用空数组，因此
它应该是这样的

```
$role = array();
$role=$_POST['role'];

if(count($role) > 0) {
 mysql_query('INSERT INTO movie_artists (job) VALUES('". implode(',', $role) ."')");
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T11:10:44.700

```
$role=$_POST['role'];
$role = array();

if(count($role) > 0) {
    $job=implode(',', $role);
    mysql_query("INSERT INTO movie_artists(job) VALUES('". $job ."')");
} 
```

# iphone - 可以在 iOS 基础 sdk 之间进行选择吗？

> ID：12798705
> 
> 赞同：0
> 
> 时间：2012-10-09T11:06:31.260
> 
> 标签：iphone, ios, xcode, sdk

我已经将 Xcode 更新到最新版本，因此基础 SDK 是 iOS6。我只是想知道，是否仍然可以使用旧的 iOS5 SDK 编译应用程序？

谢谢你的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T11:16:20.747

不，对于 xcode 4.5，您只能使用 iOS 6 SDK 进行编译，但您仍然可以通过将部署目标设置为 iOS 5（或 4.3）来定位 iOS 5 设备。

这将允许您在 iOS 5 上运行应用程序，但请确保您不调用任何仅适用于 iOS 6 的方法。

# jquery - 具有不同主题的多个 jquery ui 对话框

> ID：12798706
> 
> 赞同：0
> 
> 时间：2012-10-09T11:06:34.147
> 
> 标签：jquery, jquery-ui-dialog

IHAC 想要两个 jquery ui 对话框，每个对话框都有来自主题滚轮的自己的主题。我试过像这样创建html：

```
<div id="popupDialog" title="Information">
    <div id="popupMessage"></div>
</div>
<div id="errorDialog" title="Error" class="error">
    <div id="errorMessage"></div>
</div> 
```

然后我从主题滚轮下载了两个主题，用 CSS Scope #errorDialog 限制其中一个（我也尝试过使用 .error 并在我的 #errorDialog 中添加一个“错误”类）。我已经包含了两个主题 css 并创建了两个不同的 js 函数来激活任一对话框。问题是，似乎整个#errorDialog 在显示时都被破坏了，包括我的CSS Scope，让我留下了第一个包含的css 的主题。

我误解了 CSS Scope 还是什么？谁能给我一些线索，让我有两个不同主题的不同对话？

提前致谢！

./CJ

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T11:21:43.817

Immediatly after I posted the question I found this answer:

[http://filamentgroup.com/lab/using_multiple_jquery_ui_themes_on_a_single_page/#commentNumber3](http://filamentgroup.com/lab/using_multiple_jquery_ui_themes_on_a_single_page/#commentNumber3)

# jsf - 带有 RadioCheckbox 空白的 DataTable

> ID：12798707
> 
> 赞同：0
> 
> 时间：2012-10-09T11:06:35.603
> 
> 标签：jsf, primefaces

我需要一个带有 RadioCheckbox 的 DataTable 然后找到了链接

[FacesException：启用选择时，DataModel 必须实现 org.primefaces.model.SelectableDataModel](https://stackoverflow.com/questions/10526857/facesexception-datamodel-must-implement-org-primefaces-model-selectabledatamode/12787526#comment17288675_12787526)

所有我需要的，但是在运行页面时是空白的并且没有给出异常。

无论如何，我也会发布我的代码。

我的xhtml：

```
<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
xmlns:ui="http://java.sun.com/jsf/facelets"
xmlns:f="http://java.sun.com/jsf/core"
xmlns:h="http://java.sun.com/jsf/html"
xmlns:p="http://primefaces.org/ui">

<h:head>
  <title>Primefaces 3.1</title>
</h:head>

<h:body>
 <h:form id="form">
   <p:dataTable value="#{tableBean.cars}" var="var" paginator="true" rows="10"
    selection="#{tableBean.car}"
    selectionMode="single">
      <p:column>
        <f:facet name="header">
      <h:outputText styleClass="outputText" value="Model"></h:outputText>
        </f:facet>
        <h:outputText styleClass="outputText" value="#{var.model}"></h:outputText>
      </p:column>
      <p:column>
    <f:facet name="header">
      <h:outputText styleClass="outputText" value="Color"></h:outputText>
    </f:facet>
        <h:outputText styleClass="outputText" value="#{var.randomColor}"></h:outputText>
       </p:column>
    </p:dataTable>
   </h:form>
 </h:body>
</html> 
```

豆：

```
@ManagedBean
@SessionScoped
public class TableBean implements Serializable{

    private static final long serialVersionUID = 1L;

    private List<Car> cars;
    private Car car;
    private CarDataModel carsModel;

    public TableBean() {
        cars = new ArrayList<Car>();     
        Car car1 = new Car();
        car1.setModel("BMW");
        car1.setRandomColor("Black");
        cars.add(car1);
        Car car2 = new Car();       
        car2.setModel("Audi");
        car2.setRandomColor("White");
        cars.add(car2);       

        carsModel = new CarDataModel(cars);
    }

    public List<Car> getCars() {   
        return cars;
    }

    public String onRowSelect(){
        System.out.println("Row Click!!!");
        return "otherpage";//Does this nav works???if not how???
    }

    public Car getCar() {
        return car;
    }    

    public CarDataModel getCarsModel() {
    return carsModel;
    }

    public void setCarsModel(CarDataModel carsModel) {
    this.carsModel = carsModel;
    } 
```

汽车数据模型：

```
public class CarDataModel extends ListDataModel<Car> implements SelectableDataModel<Car>, Serializable {  

    private static final long serialVersionUID = 1L;

    public CarDataModel(List<Car> data) {
        super(data);
    }

    @Override
    public Car getRowData(String rowKey) {
        @SuppressWarnings("unchecked")
        List<Car> cars = (List<Car>) getWrappedData();

        for(Car car : cars) {
            if(car.getModel().equals(rowKey))
                return car;
        }

        return null;
    }

    @Override
    public Object getRowKey(Car car) {
        return car.getModel();
    } 
```

我不知道可以是什么。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T11:34:23.480

我认为问题出在这里：

```
public TableBean() {
        cars = new ArrayList<Car>();     
        Car car1 = new Car();
        car1.setModel("BMW");
        car1.setRandomColor("Black");
        cars.add(car1);
        Car car2 = new Car();       
        car2.setModel("Audi");
        car2.setRandomColor("White");
        cars.add(car2);       

        carsModel = new CarDataModel(cars);
    } 
```

您不能将值放入构造函数中的列表中。如果您将该代码移至该`getCars()`方法，它应该可以工作

```
public TableBean() {}

public List<Car> getCars() {   
    if(cars != null && !cars.isEmpty()) return cars;
    else {
                  cars = new ArrayList<Car>();     
            Car car1 = new Car();
            car1.setModel("BMW");
            car1.setRandomColor("Black");
            cars.add(car1);
            Car car2 = new Car();       
            car2.setModel("Audi");
            car2.setRandomColor("White");
            cars.add(car2);       

            carsModel = new CarDataModel(cars);
    }
    return cars;
} 
```

# ruby-on-rails - 如何使用 ShopifyAPI (Ruby on Rails) 有效地更新许多 ShopifyAPI::Product 实例？

> ID：12798708
> 
> 赞同：2
> 
> 时间：2012-10-09T11:06:36.057
> 
> 标签：ruby-on-rails, shopify

我正在编写一个应用程序，它将位于供应商专有库存管理系统和他们的 Shopify 商店之间。该应用程序将根据库存管理系统生成的新数据定期更新 Shopify。它还将为 Shopify webhook 提供端点。

我目前正在做这样的事情（省略了很多东西的伪红宝石）：

```
 def update_product_with_proxy(product_proxy)
    product_proxy.variant_proxies.dirty.each do |variant_proxy|
      update_variant_with_proxy(variant_proxy)
    end

    if product_proxy.dirty_proxy
      shopify_product = ShopifyAPI::Product.find(product_proxy.shopify_id)
      shopify_product.update_attributes({some attributes here})
    end
  end 
```

别处：

```
 def update_variant_with_proxy(variant_proxy)
    shopify_variant = ShopifyAPI::Variant.find(variant_proxy.shopify_id)
    shopify_variant.update_attributes({some attributes here})
  end 
```

这似乎非常低效，因为我必须先获取每个更新的 ShopifyAPI::Product 和 ShopifyAPI::Variant 才能更新它们（我将它们的 id 缓存在本地）。一个更新周期大约需要 25 分钟，更新 24 个产品，每个产品有 16 个变体。Rails 用不到 2 秒的时间更新我的产品/变体代理。另外 99% 的时间都花在与 Shopify 交谈上。我一定做错了什么。

鉴于我知道远程对象的 id 有没有办法直接更新它而不必先获取它？

干杯，-托梅克

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-09T15:52:54.637

首先要做的事情：您可以通过其父产品更新变体。获取产品后，它会包含变体信息，因此您可以对其进行编辑、保存，并且更改将保留在单个 API 调用中。这样可以节省你一些时间。

第二：您可以使用 gem 在本地创建一个对象，给它一个 id，然后调用 save 来发起 PUT 请求，而无需先从 Shopify 获取该对象。这样的事情应该可以解决问题：

```
product = ShopifyAPI::Product.new(:id => 1, :title => "My new title")
product.save 
```

将这两件事放在一起应该可以满足您的需求：在单个 API 调用中更新产品变体的能力。

注意：为了将来参考，`shopify_api`gem 构建在[Active Resource](http://api.rubyonrails.org/classes/ActiveResource/Base.html)上，因此您可以使用该库执行的任何操作都可以使用 gem 执行。

# html - 输入框填满可用空间？

> ID：12798709
> 
> 赞同：-1
> 
> 时间：2012-10-09T11:06:40.893
> 
> 标签：html, css

我想设置该字段的字段集的宽度，*然后*让包装器和输入框流动以占用可用空间。

这就是我在这里得到一些帮助的程度：

```
.lft { float: left; }
ul, li { list-style-type: none; vertical-align:middle; }
.ts3 { font-size: 15px; }
.dc3 { background-color: #808080; }
.tc5 { color: #333333; }
.p4 { padding: 4px; }
.r2 { border-radius: 2px; -moz-border-radius: 2px; -webkit-border-radius: 2px; }
.r6 { border-radius: 6px; -moz-border-radius: 6px; -webkit-border-radius: 6px; }
.field { line-height:27px; font-family:arial, sans-serif; border-color: #d9d9d9; border-top:solid 1px #c0c0c0; }
input.field{width:100%}
.fieldwrapper{display:inline-block; width:100%}
label{width:300px; display:inline-block; }
```

```
<ul>
    <li>
<div class="r6 dc3 ts2 p4">
<label field_id="None" for="sender">Sender email address</label>
<div class="fieldwrapper">
<input class="field" placeholder="Email" type="text" value="">
</div>
</div>
</li></ul>
```

当我将包装器设置为 100% 时，它会一直延伸，而不是一直延伸到减去*fieldset*的宽度。

这是我试图为流体宽度网站实现的目标： ![字段集](../Images/b05d76a11459c937f17aa9632ede215a.png)

输入框填满可用空间？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T11:13:30.110

添加

```
input.field{width:100%}
.fieldwrapper{display:inline-block; width:70%}
label{width:25%; display:inline-block; }​ 
```

您可以调整标签的宽度并相应地输入。

演示[http://jsfiddle.net/cskQ8/38/](http://jsfiddle.net/cskQ8/38/)

* * *

新更新

```
input.field{width:100%}
.fieldwrapper{ padding: 0 5px 0 0;
    overflow: hidden;}
label{width:200px; display:inline-block; float:left}​ 
```

[在此处](http://jsfiddle.net/cskQ8/49/)查看更新的演示

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T11:16:46.120

Yup, of course it does you've floated the button right taking it out of the document flow. You'll have to set right padding on the container for the input (not the fieldwrapper) to make up for the elements to the right of it.

```
 .containingDiv{padding-right:75px;}
 .fieldwrapper{width:100%;} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-09T11:46:35.413

如果您现在以更语义化的方式构建您的 CSS 和标记，将来您将非常感激。定义列表是一个合适的起点：

```
<dl class="form-container clearfix">
  <dt><label for="sender">Sender email address</label></dt>
  <dd><input placeholder="Email" type="text" value="" /></dd>
</dl> 
```

和 CSS（记得包含一个 clearfix）：

```
.form-container { /*just whatever styles you had applied*/}

/*label container, fixed width*/
.form-container>dt {float:left; width:150px;}

/*input container, defaults to width:auto*/
.form-container>dd { margin-left:150px; }

/*box-sizing property is the best thing since sliced bread*/
.form-container input[type=text] {width:100%;box-sizing:border-box;padding:4px;} 
```

[​摆弄](http://jsfiddle.net/ovfiddle/cskQ8/53/) ，尝试调整*结果*框架的大小，看看它有多流畅！

# php - 此分辨率的 PHP 解密函数（查看）

> ID：12798710
> 
> 赞同：-1
> 
> 时间：2012-10-09T11:06:42.243
> 
> 标签：php, ios, encryption, aes, rijndael

经过很长时间寻找在 PHP 和 iOS 之间加密/解密数据的最佳方法后，我现在请您提供 PHP 中的函数。

我在 Objective-C 中使用这个框架（ [https://gist.github.com/2507415 ），我的代码是：](https://gist.github.com/2507415)

```
NSString *string= @"Affe";
NSString *key = @"12345678901234567890123456789012";
NSLog(%@,[string AES256EnryptWithKey:key]; 
```

输出：**UUfn34iyNlSK40VaehloaQ==**

我在 PHP 中尝试了很多，但没有任何效果。我希望有人知道如何解密这个服务器端。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T11:20:19.310

I dont know much about IOS, but I've implemented same logic recently between a PHP and Java API. I needed to encrypt the communication between an android device and a PHP backend.

I wrote a small summary, maybe the PHP part may help you out.

[http://blog.cwill-dev.com/2012/10/09/encryption-between-javaandroid-and-php/](http://blog.cwill-dev.com/2012/10/09/encryption-between-javaandroid-and-php/)

You should have a look at the [mcrypt library](http://ch2.php.net/mcrypt), as Louis already mentioned.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T11:14:37.713

好像 PHP 不支持 AES 256，[http://www.php.net/manual/en/function.hash-algos.php](http://www.php.net/manual/en/function.hash-algos.php)。

我找到了使用 Rijndael-256 的实现，但我不确定它是否正常工作：

[http://kix.in/2008/07/22/aes-256-using-php-mcrypt/](http://kix.in/2008/07/22/aes-256-using-php-mcrypt/)

[http://snipperize.todayclose.com/snippet/php/Encrypt-and-Decrypt-AES-256--17234/](http://snipperize.todayclose.com/snippet/php/Encrypt-and-Decrypt-AES-256--17234/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-09T11:30:57.630

这似乎是使用 AES 128，在 ECB 模式下没有 IV 和 PKCS-7 兼容填充，试试[这个](http://www.php.net/manual/en/function.mcrypt-encrypt.php#105173)：

```
function encrypt($str, $key)
{
    $block = mcrypt_get_block_size('rijndael-128', 'ecb');
    $pad = $block - (strlen($str) % $block);
    $str .= str_repeat(chr($pad), $pad);

    return base64_encode(mcrypt_encrypt('rijndael-128', $key, $str, 'ecb'));
}

function decrypt($str, $key)
{   
    $str = mcrypt_decrypt('rijndael-128', $key, base64_decode($str), 'ecb');

    $block = mcrypt_get_block_size('rijndael-128', 'ecb');
    $pad = ord($str[($len = strlen($str)) - 1]);
    return substr($str, 0, strlen($str) - $pad);
} 
```

**PS：我忘记了base64编码，现在已经修复了。**

# iis - Red5 媒体服务器 - Win 2008 服务器 x64 上的错误 1067

> ID：12798716
> 
> 赞同：1
> 
> 时间：2012-10-09T11:07:31.010
> 
> 标签：iis, red5

我正在尝试在我的 Live Server（Win Server 2008 R2）上运行 Red5 Media Server。安装成功，我已经使用端口 5080 输入了 localhost，但是在尝试启动 Red5 服务时出现此错误：

```
Windows could not start the Red5 service on Local Computer.
Error 1067: The process terminated unexpectedly. 
```

我已经尝试过的事情（没有成功）：

*   以管理员身份运行 red5 setup
*   以管理员身份运行 red5 服务
*   在防火墙中打开端口 5080
*   在尝试启动服务之前关闭 iis

有什么想法可能是错的吗？谢谢

**更新：**

我检查了日志：（我已经设置了 JAVA_HOME 用户环境变量并重新启动）.. 还没有成功

```
STATUS | wrapper  | 2012/10/09 13:36:42 | --> Wrapper Started as Service
STATUS | wrapper  | 2012/10/09 13:36:42 | Java Service Wrapper Community Edition 32-bit 3.3.6
STATUS | wrapper  | 2012/10/09 13:36:42 |   Copyright (C) 1999-2009 Tanuki Software, Ltd.  All Rights Reserved.
STATUS | wrapper  | 2012/10/09 13:36:42 |     http://wrapper.tanukisoftware.org
STATUS | wrapper  | 2012/10/09 13:36:42 | 
STATUS | wrapper  | 2012/10/09 13:36:43 | Launching a JVM...
FATAL  | wrapper  | 2012/10/09 13:36:43 | Unable to execute Java command.  The system cannot find the file specified. (0x2)
FATAL  | wrapper  | 2012/10/09 13:36:43 |     "java" -Xrs -XX:+AggressiveOpts -XX:+DisableExplicitGC -Djava.net.preferIPv4Stack=true -Dlogback.ContextSelector=org.red5.logging.LoggingContextSelector -Dcatalina.useNaming=true -Dpython.home=lib -Xverify:none -Xms256m -Xmx768m -Djava.library.path="lib" -classpath "lib/wrapper.jar;conf;boot.jar" -Dwrapper.key="35GMYkROEBTyRT4O" -Dwrapper.port=32000 -Dwrapper.jvm.port.min=31000 -Dwrapper.jvm.port.max=31999 -Dwrapper.pid=2420 -Dwrapper.version="3.3.6" -Dwrapper.native_library="wrapper" -Dwrapper.service="TRUE" -Dwrapper.cpu.timeout="10" -Dwrapper.jvmid=1 org.tanukisoftware.wrapper.WrapperSimpleApp org.red5.server.Bootstrap
ADVICE | wrapper  | 2012/10/09 13:36:43 | 
ADVICE | wrapper  | 2012/10/09 13:36:43 | ------------------------------------------------------------------------
ADVICE | wrapper  | 2012/10/09 13:36:43 | Advice:
ADVICE | wrapper  | 2012/10/09 13:36:43 | Usually when the Wrapper fails to start the JVM process, it is because
ADVICE | wrapper  | 2012/10/09 13:36:43 | of a problem with the value of the configured Java command.  Currently:
ADVICE | wrapper  | 2012/10/09 13:36:43 | wrapper.java.command=java
ADVICE | wrapper  | 2012/10/09 13:36:43 | Please make sure that the PATH or any other referenced environment
ADVICE | wrapper  | 2012/10/09 13:36:43 | variables are correctly defined for the current environment.
ADVICE | wrapper  | 2012/10/09 13:36:43 | ------------------------------------------------------------------------
ADVICE | wrapper  | 2012/10/09 13:36:43 | 
FATAL  | wrapper  | 2012/10/09 13:36:43 | Critical error: wait for JVM process failed 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T11:14:56.593

尝试运行 red5.bat 以获取有关错误的更多详细信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T22:21:46.290

我遇到了和你一样的问题并设法解决了我想我会分享的：

就我而言，我需要在 PATH 环境变量下添加对 Java 运行时环境的 bin 文件夹的引用。`(Start --> Computer; Properties --> Advanced System Settings --> tab "advanced"; Environment Variables --> system variabeles; PATH variable.`

单击编辑并将路径添加到 Java 安装的 bin 文件夹。

# ocaml - ocaml 漂亮的打印机（代码格式化程序）

> ID：12798723
> 
> 赞同：15
> 
> 时间：2012-10-09T11:07:46.920
> 
> 标签：ocaml

我正在为 ocaml 寻找代码格式化程序或漂亮的打印机。go 编程语言的 gofmt 之类的东西。它最好保留评论。

我正在更正手稿，并且某些代码的格式使其难以阅读。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-10-09T11:29:10.077

如果你不关心评论，你可以使用camlp4：

```
camlp4 <file> -parser o -printer o > <new-file> 
```

或者您可以使用外部压头工具，如[ocp-indent](https://github.com/OCamlPro/ocp-indent)。

# php - 两个站点具有相同数据库的 Drupal 站点 - 我需要更好的解决方案

> ID：12798730
> 
> 赞同：0
> 
> 时间：2012-10-09T11:08:18.590
> 
> 标签：php, drupal-7

我现在正在做一个drupal项目，客户需要相同的管理端和相同的数据库来保存内容，但他需要单独可视化事物。那是两个运行相同代码库的站点。这两个共享相同的内容。如新闻、报道等。

实现这一点的最佳方法是什么，我阅读了一些多站点文档，但它基于两个管理端和不同的数据库。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T13:01:20.347

您应该查看[域访问](http://drupal.org/project/domain)模块。它将允许您使用单个数据库进行多站点设置（共享所有用户和内容）。其中一个子模块域主题允许您为每个域设置活动主题（使每个站点看起来不同）

# android - 我们如何为tabhost android中的每个选项卡指定宽度

> ID：12798732
> 
> 赞同：0
> 
> 时间：2012-10-09T11:08:21.443
> 
> 标签：android, android-layout, tabs

我在我的应用程序中使用 tabhost。我们可以为每个选项卡提供单独的宽度属性吗？即，一个宽度较大，另一个宽度较小？请给我示例示例。如果可能的话，请给我代码。

**编辑：**

```
public class TabBarSimple extends TabActivity {
/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    setContentView(R.layout.main);

    TabHost tabHost = getTabHost();
    TabHost.TabSpec spec;
    Intent intent;

    TabSpec dbspec = tabHost.newTabSpec("DashBoard");
    dbspec.setIndicator("Dashboard", getResources().getDrawable(R.drawable.dashboard));

    Intent dbIntent = new Intent(this, PhotosActivity.class);
    dbspec.setContent(dbIntent);
    tabHost.addTab(dbspec);

    TabSpec orderspec = tabHost.newTabSpec("Orders");
    orderspec.setIndicator("Orders", getResources().getDrawable(R.drawable.orders));

    Intent orderIntent = new Intent(this, SongsActivity.class);
    orderspec.setContent(orderIntent);
    tabHost.addTab(orderspec);
    TabSpec settingspec = tabHost.newTabSpec("Customers");
    settingspec.setIndicator("Customers", getResources().getDrawable(R.drawable.customers));
    Intent settingIntent = new Intent(this, VideosActivity.class);
    settingspec.setContent(settingIntent);
    tabHost.addTab(settingspec);
    TabSpec aboutspec = tabHost.newTabSpec("Settings");
    aboutspec.setIndicator("Settings", getResources().getDrawable(R.drawable.settings));
    Intent aboutIntent = new Intent(this, PhotosActivity.class);
    aboutspec.setContent(aboutIntent);
    tabHost.addTab(aboutspec);
    TabSpec logoutspec = tabHost.newTabSpec("Logout");
    logoutspec.setIndicator("Logout", getResources().getDrawable(R.drawable.logout));
    Intent logoutIntent = new Intent(this, SongsActivity.class);
    logoutspec.setContent(logoutIntent);
    tabHost.addTab(logoutspec);

    for(int i=0;i<tabHost.getTabWidget().getChildCount();i++)
    {
    //tabHost.getTabWidget().getChildAt(i).setBackgroundColor(Color.parseColor("#8A4117"));
    tabHost.getTabWidget().getChildAt(i).setBackgroundResource(R.drawable.tab_indicator);
    tabHost.getTabWidget().getChildAt(0).getLayoutParams().width = 100;
    tabHost.getTabWidget().getChildAt(1).getLayoutParams().width = 50;
    }
    tabHost.getTabWidget().setCurrentTab(0);
    //tabHost.getTabWidget().getChildAt(0).setBackgroundColor(Color.parseColor("#C35817"));
    tabHost.getTabWidget().getChildAt(0).setBackgroundResource(R.drawable.tab_indicator);

     }

    public void onTabChanged(String tabId) {
          TabHost tabHost = getTabHost();
    // TODO Auto-generated method stub
    for(int i=0;i<tabHost.getTabWidget().getChildCount();i++)
    {
    //tabHost.getTabWidget().getChildAt(i).setBackgroundColor(Color.parseColor("#8A4117"));
    tabHost.getTabWidget().getChildAt(i).setBackgroundResource(R.drawable.tab_indicator);
    }
    //tabHost.getTabWidget().getChildAt(tabHost.getCurrentTab()).setBackgroundColor(Color.parseColor("#C35817"));
    tabHost.getTabWidget().getChildAt(tabHost.getCurrentTab()).setBackgroundResource(R.drawable.tab_indicator);
    }

     } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T11:33:44.823

您可以通过以下代码实现这一点 - ：

```
tabHost.getTabWidget().getChildAt(0).getLayoutParams().width = 50; 
```

# c# - C# switch 发生异常后如何继续

> ID：12798734
> 
> 赞同：1
> 
> 时间：2012-10-09T11:08:27.887
> 
> 标签：c#, loops, exception-handling, switch-statement

发生异常后如何继续循环？

```
 foreach (var oItem in List<Client>)
        switch (oItem.Name)
        {
         case "one":
         {
            break;
         }

         case "two":
         case "three":
         {
            break;
         }

        }

} 
```

当在块情况下抛出异常时，我想继续阻止两个或另一个块取决于循环的值。

那可能吗 ？

因为每个案例都是通过FTP从每个客户端下载数据的，所以当客户端的数据抛出异常时，并不意味着客户端的其余数据也不好。在循环结束时，我将输出客户端的哪些数据已下载，哪些数据不正确。

提前谢谢你，史蒂夫

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-09T11:12:01.587

将引发异常的代码放在 try/catch 块中。

```
case "one":
{
    try
    {
        //Code that may break
    }
    catch (Exception ex)
    {
        //Deal with the exception
    }
    break;
 } 
```

但是，您确实应该找出它抛出异常的*原因*，并确保在您处于会导致异常发生的情况下不执行代码。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-09T11:10:55.677

为此，您需要通过您的代码中的异常，例如

**注意**：如果可能在单独的文件中记录异常，以便您可以获取有关您遇到异常的项目的信息

```
 foreach (var oItem in List<Client>)
{
   try
    {
            switch (oItem.Name)
            {
             case "one":
             {

             }
             break;

             case "two":
             case "three":
             {

             }
             break;

            }
   }
   catch(Exception ex){ // log exception }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-09T11:18:24.883

```
foreach (var oItem in List<Client>)
{
   ret_val=call_switch(oItem.Name);
}
------------
private string call_switch(string val_str)
{
   string ret_val="";
    try
    {
           switch (oItem.Name)
            {
             case "one":
             {
               ret_val="valuee.. ";
             }
             break;

             case "two":
             case "three":
             {

             }
             break;

            }

   }
   catch(Exception ex){ //... }
   return ret_val;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-09T11:11:51.743

如果您在循环内捕获异常，则循环将继续

# ios - Objective-C - addToSubview 但不拦截触摸

> ID：12798737
> 
> 赞同：1
> 
> 时间：2012-10-09T11:08:41.823
> 
> 标签：ios, cocoa-touch, uiview, uitableview

有没有一种方法可以添加 UIView 而无需视图拦截触摸？我试过 insertSubview: belowSubview

我想这样做的原因是因为我将 UITextField 添加到 UITableViewCell 的 contentView。但是我不希望 UITextField 在我选择一行时拦截触摸。我知道我可以将 UITextField userInteractionEnabled 属性设置为 NO，但这会导致大量的微观管理。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T11:57:21.350

覆盖`canBecomeFirstResponder`返回`NO`。

请参阅[响应者链上的此信息](http://developer.apple.com/library/ios/#documentation/EventHandling/Conceptual/EventHandlingiPhoneOS/EventsiPhoneOS/EventsiPhoneOS.html#//apple_ref/doc/uid/TP40009541-CH2-SW1)。

# wpf - 删除输入文本时，WPF DataBinding 不适用于 WPF DateTimePicker

> ID：12798741
> 
> 赞同：-1
> 
> 时间：2012-10-09T11:08:58.463
> 
> 标签：wpf, wpf-controls

在 WPF DataTimePicker 中，用户可以通过单击日历旁边的日历或输入输入文本来设置日期。

因此，每当我使用上述情况之一时，都会调用属性的设置器（绑定到 DateTimePicker 的 SelectedDate 依赖属性）。

但是，当我手动从 datetimepicker 中删除输入文本时，绑定属性的设置器不会调用。

那么有人可以在这方面帮助我吗？从 WPF datetimepicker 中手动删除输入文本时，如何调用绑定属性的 setter。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T13:34:08.240

你是说日期选择器吗？

您可以简单地绑定到 DateTime？财产：

```
<DatePicker SelectedDate="{Binding MyDate, Mode=TwoWay}" />

private DateTime? _myDate;
public DateTime? MyDate
{
    get { return _myDate; }
    set { _myDate = value; OnPropertyChanged("MyDate"); }
} 
```

# jquery - e.preventDefault() 的行为；

> ID：12798749
> 
> 赞同：3
> 
> 时间：2012-10-09T11:09:17.297
> 
> 标签：jquery

我正在学习*jQuery*，并希望澄清`e.preventDefault()`它的作用。根据我的阅读，它可以防止事件的默认行为。

在我的例子中，我有一个锚标记，而不是带我到一个新页面，我希望它在我的屏幕上显示一个模式。所以我的*jQuery*看起来像这样

```
$(document).ready(function() {
$('#boxShow').click(function(e) {
    e.preventDefault();
    $("#light").fadeIn();
    $('#fade').fadeIn();
}); 
```

是否`preventDefault()`使我能够执行不同的事件？

抱歉，如果这是一个愚蠢的问题

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-09T11:11:54.147

这很简单，它可以防止**默认事件**发生。例如，一个`<a>`元素通常会在点击时打开一个链接。为了覆盖它，您将需要使用此功能。

`event`一旦使用而不是首字母缩略词，这将更容易阅读`e`。

```
$('a').click(function(event){
    event.preventDefault();
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-09T11:11:27.753

使用锚元素，“默认事件”是读取`href`（*超文本引用*）值，并为此位置形成一个 HTTP 请求。简而言之，它将用户引导至`href`价值的 URL。

因此`preventDefault()`将阻止该`href`属性调用 HTTP 请求，并在下面运行您的代码。即2`fadeIn()`种方法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-09T11:12:23.643

根据[**文档**](http://api.jquery.com/event.preventDefault/)，`e.preventDefault();`防止触发事件的默认操作。

例如，在锚点/超链接的情况下，它应该防止链接重定向到指定的位置。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-09T11:13:28.197

从[jquery](http://api.jquery.com/event.preventDefault/)网站：

> 如果调用该方法，则不会触发事件的默认动作。

因此，在锚标记的情况下，它不会将用户带到另一个网址，让您可以在点击事件中做您想做的事情。

ps这不是一个愚蠢的问题:-)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-09T11:18:29.623

`e.preventDefault();`将阻止操作的默认行为，以防锚（a）它将阻止打开与锚关联的新网址。如果是表单，它将阻止提交表单。但是 e.preventDefault(); 不能在 IE 中工作，因为我不支持它。你应该使用`e.returnValue = false;`

代码：

```
if(e.preventDefault){
      e.preventDefault();

}
else{
    e.returnValue = false; 
} 
```

# php - 打开购物车网站的最大用户请求是多少？

> ID：12798750
> 
> 赞同：-2
> 
> 时间：2012-10-09T11:09:22.753
> 
> 标签：php, opencart

谁能告诉我一次有多少用户可以访问打开的购物车网站？

我的意思是打开的购物车可以同时处理多少个请求？

还是取决于托管服务器？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-09T11:14:17.937

与所有 Web 应用程序一样，这取决于托管/服务器而不是软件

# silverlight - 控件的 Silverlight 命令绑定问题

> ID：12798751
> 
> 赞同：0
> 
> 时间：2012-10-09T11:09:24.190
> 
> 标签：silverlight, binding, command, prism, icommand

我正在创建在 silverlight xaml 绑定中使用的命令。但是该命令在控件之外不起作用。

我正在使用 ESRI silverlight API。API 有一个名为 map 的控件。

```
public sealed class Map : Control, INotifyPropertyChanged, IDisposable
{} 
```

此 API 中有一个名为 FeatureLayer 的层，但这不是从 Control 类继承的。

```
public class FeatureLayer : GraphicsLayer, IAttribution
{} 
```

我像这样在 xaml 中使用这些。

```
 xmlns:esri="clr-namespace:ESRI.ArcGIS.Client;assembly=ESRI.ArcGIS.Client" 
    xmlns:cmd="clr-namespace:Infrastructure.Commands;assembly=Infrastructure" 
    xmlns:fcmd="clr-namespace:Infrastructure.Commands.FeatureLayerCommands;assembly=Infrastructure"  

   <esri:Map x:Name="MyMap"
              VerticalAlignment="Stretch"
              HorizontalAlignment="Stretch"
              cmd:MouseClick.Command="{Binding Map_Click}" 
              cmd:SizeChange.Command="{Binding Size_Change}"
              >

        <esri:FeatureLayer ID="ff"                               
                           Mode="OnDemand"
                           fcmd:FeatureLayerMouseEnter.Command="{Binding FeatureLayerCommand}"
                           />

    </esri:Map> 
```

在这种情况下，

```
 cmd:MouseClick.Command="{Binding Map_Click}" 
              cmd:SizeChange.Command="{Binding Size_Change}" 
```

命令正在运行，但是，

```
 fcmd:FeatureLayerMouseEnter.Command="{Binding FeatureLayerCommand}" 
```

命令不起作用。有什么问题？

# c# - 企业验证阻止父子类的不同规则集

> ID：12798755
> 
> 赞同：0
> 
> 时间：2012-10-09T11:09:41.327
> 
> 标签：c#, .net, validation, enterprise-library, validation-application-bl

当我为父类和子类有 2 个不同的规则集时，对子类属性的验证不起作用。

这是类代码：Mytype 是父级，Person 是子级

```
 [HasSelfValidation]
    public class MyType
    {
        [SelfValidation(Ruleset = "RulesetA")]
        [SelfValidation(Ruleset = "RulesetB")]
        public void DoValidate(ValidationResults results)
        {
        }

        [NotNullValidator(Ruleset = "RulesetA")]
        [ObjectValidator("RulesetA", Ruleset = "RulesetA")]
        public Person Person { get; set; }

    }

    public class Person
    {
        [NotNullValidator(Ruleset = "RulesetB")]
        public string GivenName { get; set; }

    } 
```

这是针对所有规则集验证 MyType 类的自定义验证器类：

```
 public interface IValidator<T>
    {
        ValidationResults Validate(T target);
    }

    public class MyValidator : IValidator<MyType>
    {
        public ValidationResults Validate(MyType target)
        {
            return Validation.Validate(target, new string[] {"RulesetA", "RulesetB"});
        }
    } 
```

这是失败的测试：（IsValid 应该设置为 False，但它是 True）

```
 [TestMethod]
    public void Should_return_false_when_validating_MyType_without_PersonApplying_GivenName()
    {
        //arrange
        var myType = new MyType()
                            {
                                Person= new Person()
                            };
        myType.Person.GivenName = null;

        //act
        MyValidator _validator = new MyValidator();
        var resultList = _validator.Validate(myType);

        //assert
        Assert.IsFalse(resultList.IsValid);
    } 
```

你能帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T11:44:06.817

VAB 根据规则集验证您的对象并连接验证结果。这是该`Validation.Validate`方法的样子：

```
var resultsReturned = new ValidationResults();

foreach (string ruleset in rulesets)
{
    var validator = ValidationFactory.CreateValidator(
        targetType, ruleset, source);

    foreach (var validationResult in validator.Validate(target))
    {
        resultsReturned.AddResult(validationResult);
    }
}

return resultsReturned; 
```

换句话说，对对象的验证总是在单个规则集上执行。由于`ObjectValidator`仅用于 装饰`RulesetA`，因此`Person`对象在运行时不会得到验证`RulesetB`。

# spring - 如何将 XML 更改为配置类？

> ID：12798763
> 
> 赞同：1
> 
> 时间：2012-10-09T11:10:11.740
> 
> 标签：spring, configuration, annotations, spring-batch, cglib

对不起，我有点讨厌英语。

请帮我。我有一个问题。
我想将 XML 更改为 Java 类以供 @Configuration 和 @Bean 使用。
我该怎么办 ？？

以下是我想改变的。
我不知道'module-context.xml'，尤其是......
只是我想知道。

**启动上下文.xml**

```
<import resource="classpath:/META-INF/spring/module-context.xml" />

<bean id="jobOperator"
    class="org.springframework.batch.core.launch.support.SimpleJobOperator"
    p:jobLauncher-ref="jobLauncher" p:jobExplorer-ref="jobExplorer"
    p:jobRepository-ref="jobRepository" p:jobRegistry-ref="jobRegistry" />
<bean id="jobExplorer"
    class="org.springframework.batch.core.explore.support.JobExplorerFactoryBean"
    p:dataSource-ref="SpringDataSource" />
<bean id="jobRegistry"
    class="org.springframework.batch.core.configuration.support.MapJobRegistry" />
<bean
    class="org.springframework.batch.core.configuration.support.JobRegistryBeanPostProcessor">
    <property name="jobRegistry" ref="jobRegistry" />
</bean>
<bean id="jobLauncher"
    class="org.springframework.batch.core.launch.support.SimpleJobLauncher">
    <property name="jobRepository" ref="jobRepository" />
</bean>
<bean id="jobRepository"
    class="org.springframework.batch.core.repository.support.JobRepositoryFactoryBean"
    p:dataSource-ref="SpringDataSource" p:transactionManager-ref="springTransactionManager" />

<bean id="placeholderProperties"
    class="org.springframework.beans.factory.config.PropertyPlaceholderConfigurer">
    <property name="location" value="classpath:batch.properties" />
    <property name="systemPropertiesModeName" value="SYSTEM_PROPERTIES_MODE_OVERRIDE" />
    <property name="ignoreUnresolvablePlaceholders" value="true" />
    <property name="order" value="1" />
</bean>

<bean id="SpringDataSource" class="org.apache.commons.dbcp.BasicDataSource">
    <property name="driverClassName" value="${batch.jdbc.driver}" />
    <property name="url" value="${batch.jdbc.url}" />
    <property name="username" value="${spring.batch.jdbc.user}" />
    <property name="password" value="${spring.batch.jdbc.password}" />
</bean>
<bean id="springTransactionManager"
    class="org.springframework.jdbc.datasource.DataSourceTransactionManager"
    lazy-init="true">
    <property name="dataSource" ref="SpringDataSource" />
</bean> 
```

**模块上下文.xml**

```
<job id="job1" xmlns="http://www.springframework.org/schema/batch"
    incrementer="jobParametersIncrementer">
    <step id="simple-step" parent="simpleStep">
        <tasklet>
            <chunk reader="exampleReader" writer="exampleWriter" />
        </tasklet>
    </step>
</job>
<bean id="exampleReader"
    class="jp.co.app.cm.nochunk.ExampleItemReader" />
<bean id="exampleWriter"
    class="jp.co.app.cm.nochunk.ExampleItemWriter" />
<bean id="simpleStep"
    class="org.springframework.batch.core.step.item.SimpleStepFactoryBean"
    abstract="true">
    <property name="transactionManager" ref="springTransactionManager" />
    <property name="jobRepository" ref="jobRepository" />
    <property name="startLimit" value="100" />
</bean> 
```

请告诉我一个人？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-09T16:12:34.073

翻译前四个bean，这应该足以让您开始并掌握想法：

```
@Configuration
public class Spring {

    @Bean
    public MapJobRegistry mapJobRegistry() {
        return new MapJobRegistry();
    }

    @Bean
    public JobRegistryBeanPostProcessor jobRegistryBeanPostProcessor() {
        JobRegistryBeanPostProcessor pp = new JobRegistryBeanPostProcessor();
        pp.setJobRegistry(mapJobRegistry());
        return pp;
    }

    @Bean
    public SimpleJobLauncher simpleJobLauncher() {
        SimpleJobLauncher jl = new SimpleJobLauncher();
        jl.setJobRepository(jobRepository().getObject());
        return jl;
    }

    @Bean
    public JobRepositoryFactoryBean jobRepositoryFactoryBean() {
        JobRepositoryFactoryBean fb = new JobRepositoryFactoryBean();
        fb.setDataSource(springDataSource());
        fb.setTransactionManager(springTransactionManager());
        return fb;
    }

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-03-27T05:54:42.503

我知道这是一篇旧帖子，但以防万一有人通过谷歌点击这篇文章。
Java 配置被添加到 Spring Batch 开始版本 2.2。

> 在 2.2.0 之前，配置作业的唯一选项是通过 XML（通过批处理 DSL 或手动）。但是，在 2.2.0 中，添加了基于 Java 的配置作为定义 Spring Batch 作业的一种方式。为了支持这个新的配置选项，添加了注释和构建器类。

[http://docs.spring.io/spring-batch/2.2.x/reference/html/whatsNew.html#whatsNewJavaConfiguration](http://docs.spring.io/spring-batch/2.2.x/reference/html/whatsNew.html#whatsNewJavaConfiguration) [http://docs.spring.io/spring-batch/2.2.x/reference/html/configureJob .html#javaConfig](http://docs.spring.io/spring-batch/2.2.x/reference/html/configureJob.html#javaConfig)

你可以在这里找到一个例子：
[https ://github.com/spring-projects/spring-batch/tree/2.2.x/spring-batch-samples/src/main/java/org/springframework/batch/sample/config](https://github.com/spring-projects/spring-batch/tree/2.2.x/spring-batch-samples/src/main/java/org/springframework/batch/sample/config)

# javascript - Extjs 3.4 窗口不能用 DOCTYPE 拖动

> ID：12798765
> 
> 赞同：1
> 
> 时间：2012-10-09T11:10:41.333
> 
> 标签：javascript, extjs

我正在使用 estjs 3.4。在我的 html 页面上，我没有使用 DOCTYPE，并且在这些页面上有一个 CSS 菜单。如果没有 DOCTYPE，菜单会在 Firefox、Chrome 和 Opera 中正确呈现，而且我的 extjs 窗口也是可拖动的。当我使用 IE9 时，css 菜单无法正确呈现，所以我需要放置一个 DOCTYPE，那么问题是使用 DOCTYPE 时，extjs 窗口在 IE9 和 chrome 中不再可拖动。有没有办法克服这个问题，以便 css 菜单正确显示并且窗口在所有浏览器中都是可拖动的。

谢谢，伊万

# git - 合并分支时使用 pull 和 no-ff 时快进

> ID：12798767
> 
> 赞同：17
> 
> 时间：2012-10-09T11:10:45.770
> 
> 标签：git

我的工作流程中有许多短暂的分支，我希望将它们分开。所以，我打算用`git config --add merge.ff false`. 但是，当我进行拉动（我理解为 fetch+merge）时，我想要一个快进行为，以避免在这里不必要的额外提交。

这是一件好事吗？这可能吗？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-10-09T11:24:40.657

注意：Git 2.0（2014 年第二季度）将通过[提交 b814da8](https://github.com/git/git/commit/b814da891e8261b909fc5d9fb07b4e8b13989c2d)引入一个配置`push.ff`：

```
pull.ff:: 
```

> 默认情况下，Git 在合并作为当前提交的后代的提交时不会创建额外的合并提交。相反，当前分支的尖端是快进的。
> 
> *   当设置为 false 时，这个变量告诉 Git 在这种情况下创建一个额外的合并提交（相当于从命令行给出 --no-ff 选项）。
> *   当设置为 only 时，只允许这样的快进合并（相当于`--ff-only`从命令行给出选项）。

* * *

初步答案（2012 年 10 月）

尝试一个：

```
git pull --ff 
```

它应该优先于您的合并配置设置。
它会将`--ff`选项传递给 git pull 命令中的底层合并。

但请注意该`--no-ff`选项，如“[了解 Git 工作流程](http://sandofsky.com/blog/git-workflow.html)”中所述

> 有了足够多的标志，你就可以强制 Git 按照你认为应该的方式而不是它想要的方式行事。但这就像使用锤子一样的螺丝刀；它可以完成工作，但做得不好，需要更长的时间，并且会损坏螺丝刀。
> 
> 考虑一个常见的 Git 工作流程是如何分崩离析的。

```
Create a branch off Master, 
do work, 
and merge it back into Master when you’re done 
```

> 大多数情况下，这与您预期的一样，因为 Master 在您分支后发生了变化。然后有一天你将一个特性分支合并到 Master 中，但 Master 并没有发散。Git 没有创建合并提交，而是将 Master 指向功能分支上的最新提交，或“快进”。（图表）
> 
> 不幸的是，您的功能分支包含检查点提交，频繁的提交会备份您的工作，但会捕获处于不稳定状态的代码。现在这些提交与 Master 的稳定提交没有区别。你可以很容易地卷入一场灾难。
> 
> 所以你添加了一条新规则：“当你在你的特性分支中合并时，使用`–no-ff`来强制一个新的提交。” 这样就完成了工作，然后您继续前进。
> 
> 然后有一天你在生产中发现了一个严重的错误，你需要追踪它是什么时候引入的。您运行`bisect`但继续登陆检查点提交。你放弃并亲自调查。
> 
> 您将错误缩小到单个文件。你跑来`blame`看看它在过去 48 小时内是如何变化的。您知道这是不可能的，但`blame`报告说该文件已数周未动过。
> **结果`blame`是在初始提交时报告更改，而不是在合并时**。你的第一次检查点提交几周前修改了这个文件，但今天合并了。
> 
> `no-ff`创可贴、折断的二分法和怪罪之谜都是您将螺丝刀用作锤子的症状。

有关更多信息，请参阅：

*   "[With dvcs/git, is a single commit preferred over multiple, small, thematic commits?](https://stackoverflow.com/questions/7102764/with-dvcs-git-is-a-single-commit-preferred-over-multiple-small-thematic-commi/7102856#7102856)"
*   "[git newbie question - Commit style: Commit all changed files at once or one at a time?](https://stackoverflow.com/questions/7425541/git-newbie-question-commit-style-commit-all-changed-files-at-once-or-one-at-a/7425751#7425751)"

# sencha-touch - Sencha Touch 侧滑导航菜单

> ID：12798769
> 
> 赞同：1
> 
> 时间：2012-10-09T11:10:52.147
> 
> 标签：sencha-touch

我正在使用从以下位置获得的侧栏滑块菜单： [https ://github.com/wnielson/sencha-SlideNavigation](https://github.com/wnielson/sencha-SlideNavigation)

我已经对其进行了一些修改。它在打开时将 UI 拖到右侧，我对其进行了更改，现在它覆盖在主 UI 上。

该组件在 iPhone 和 Android 的一些高端设备上运行良好。

但我在 Android 2.2 和 2.3 设备中遇到了一些问题。侧边栏菜单永远不会关闭并始终保持打开状态。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T18:48:28.010

请在 GitHub 中添加一个“问题”，以便 repo 的作者可以回答并解决您的问题 :: [https://github.com/wnielson/sencha-SlideNavigation/issues](https://github.com/wnielson/sencha-SlideNavigation/issues)

您可以在此处添加问题：

[https://github.com/wnielson/sencha-SlideNavigation/issues](https://github.com/wnielson/sencha-SlideNavigation/issues)

# c - 系统调用的效率

> ID：12798773
> 
> 赞同：0
> 
> 时间：2012-10-09T11:10:58.317
> 
> 标签：c, linux, epoll

我正在阅读 libevent 的源代码，当它需要调用时`epoll_create`，它使用 syscall 代替。

```
int epoll_create(int size)
{
     return (syscall(__NR_epoll_create, size));
} 
```

后一种情况会提高性能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T12:41:26.447

[`syscall()`](http://linux.die.net/man/2/syscall)是执行系统调用的通用函数。即使当前 C 库比正在运行的内核旧，它也允许执行系统调用，因此不支持所有可能可用的系统调用。

在 Linux 上，[`epoll_create()`](http://linux.die.net/man/2/epoll_create)是系统调用，而不是库函数。考虑到从用户空间切换到内核空间并返回的成本，以及调用本身的成本，`syscall()`如果存在的话，任何与在更具体的包装器上使用可变参数调用程序相关的开销都可能可以忽略不计。

主要问题在`syscall()`于其编程接口而不是其性能：

1.  根本没有类型安全——如果系统调用需要 a`char *`并且程序员提供了 a `char`，那么调用很可能不会按预期工作。编译器无法防止此类错误。

2.  它提供了没有修改的底层内核接口，这通常不太适合在用户应用程序中直接使用。

另一方面，它不依赖于`libc`对相关系统调用的了解和包装，从兼容性的角度来看，这是一个优势。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T11:52:34.587

你所看到的几乎是预期的。如果您浏览内核，您会看到大多数引用`epoll_create()`都在`arch`目录中，这意味着它们非常依赖于体系结构。因此，不能直接从用户空间调用它是非常标准的。

至于效率，看看[man syscall](http://www.kernel.org/doc/man-pages/online/pages/man2/syscalls.2.html)。

正如它在那里所说：
`Often the glibc wrapper function is quite thin, doing little work other than copying arguments to the right registers before invoking the system call, and then setting errno appropriately after the system call has returned.`

所以不，通常这种实现不会对性能造成太大影响。

# c# - 使用 C# 登录后重定向到 HTML 页面。但是不应仅通过复制该 URL 来打开该 HTML

> ID：12798775
> 
> 赞同：1
> 
> 时间：2012-10-09T11:11:07.640
> 
> 标签：c#, asp.net, login, response.redirect

我是 ASP.Net 和 C# 的新手。我想用 C# 执行登录，然后想重定向到 HTML 文件。此 HTML 是 SuperGIS 服务器起始页。

我正在使用这样的东西：

```
 <%@ Page Language="C#" Debug="true" %>

    <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
    <script runat="server">

    protected void btnlogin_Click(object sender, EventArgs e)
    {
    if(some code to check username and password exist in DB)
        Response.Redirect("http://localhost/AddMarker/MapEditor.htm");
        else
         Response.Redirect("http://localhost/AddMarker/Login.aspx");

    }

    </script>

<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
    <title>Login Page</title>
</head>
<body>
    <form id="form1" runat="server">

    <div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
        Sign In<br />
        <br />
<asp:Label ID="lblUsername" runat="server" Text="Username"></asp:Label>
&nbsp;&nbsp;&nbsp;&nbsp;
<asp:TextBox ID="txtUsername" runat="server"></asp:TextBox>
        <br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 

        <asp:RequiredFieldValidator ID="RequiredFieldValidator1" runat="server" ControlToValidate = "txtUsername"
            ErrorMessage="This Feild is Mendetory"></asp:RequiredFieldValidator>
<br />
<br />
<asp:Label ID="lblPassword" runat="server" Text="Password"></asp:Label>
&nbsp;&nbsp;&nbsp;&nbsp;
<asp:TextBox ID="txtPassword" runat="server" TextMode="Password"></asp:TextBox>
<br />
<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
<asp:Button ID="btnlogin" runat="server" Text="Login" onclick="btnlogin_Click" 
Width="47px" />
&nbsp;
<br />

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</div>

    </form>
    <a href="forgetpass.aspx">Forgt Password</a><br>
    <a href="Create.aspx">New User</a>
</body>
</html> 
```

此代码将重定向到所需的目的地。但那时 url 将是
-->"http://localhost/AddMarker/MapEditor.htm"

这是由于代码：Response.Redirect("http://localhost/AddMarker/MapEditor.htm");

因此，任何人都可以复制此 URL 并无需身份验证即可访问此服务。

那么我可以创建一些动态 URL，如果不提供正确的 ID 和密码就无法使用。

请帮我。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T11:16:42.413

You can use session state to store if a user is authenticated.

```
if(some code to check username and password exist in DB) 
{
    HttpContext.Current.Session("UserIsAuthenticated") = True
    Response.Redirect("http://localhost/AddMarker/MapEditor.htm"); 
} 
```

You can set your session time in `web.config` so that you only stay authenticated for a certain amount of time. Then in the load event of the pages where you need to be authenticated use this:

```
if (HttpContext.Current.Session("UserIsAuthenticated") == null)
   //User needs to login
   Response.Redirect("Login.aspx")
else if(!HttpContext.Current.Session("UserIsAuthenticated"))
   //User needs to login
   Response.Redirect("Login.aspx") 
```

You could also do this with cookies, but I would recomend not doing this where possible due to the new leigislations with cookies.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T11:21:26.320

I think the best way would be using ASP .Net in your MapEditor.htm to check the access. When the user is authenticated you store in the Session your flag. Then, you check this flag always in your MapEditor.**aspx**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-09T11:14:17.023

这可以使用 http 处理程序来完成，请在此处阅读更多信息：

1.  [http://msdn.microsoft.com/en-us/library/bb398986(v=vs.100).aspx](http://msdn.microsoft.com/en-us/library/bb398986(v=vs.100).aspx)
2.  [http://codebetter.com/karlseguin/2006/05/25/httphandlers-%E2%80%93-learn-them-use-them/](http://codebetter.com/karlseguin/2006/05/25/httphandlers-%E2%80%93-learn-them-use-them/)
3.  [http://www.aspnettutorials.com/tutorials/advanced/httphandler-aspnet2-csharp.aspx](http://www.aspnettutorials.com/tutorials/advanced/httphandler-aspnet2-csharp.aspx)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-09T11:23:53.743

您应该将您的登录状态检查放在 Global.asax 中。使用 Application_BeginRequest 之类的事件之一来查看用户是否已登录，如果没有则重定向。您需要确保用户尝试打开的页面不是登录页面，否则它将无法正常工作。

**更新**：这是我在母版页中使用的一些代码，效果很好。如果您不使用母版页，那么只要将其放置在正确的位置，Global.asax 就会起作用。

请注意，此代码用于检查用户是否在特定的域组中，因为该站点正在使用 Windows 身份验证。您可以换出验证用户所需的任何方法。此外，我的 NoAccess 页面中的 AccessException bool 设置为 true，以便实际显示。最后，检查被缓存，所以我们不必继续检查它。

```
public bool AccessException;

protected void Page_Load(object sender, EventArgs e)
{
    UpdateNavigation();

    if (!HasAccess() && !AccessException)
    {
        Response.Redirect("~/NoAccess.aspx", true);
    }
}

/// <summary>
/// Check domain group membership to make sure the user is allowed to use the web site; redirect if not.
/// </summary>
/// <returns>True if the user has access to the site</returns>
private bool HasAccess()
{
    if (Page.Cache["hasAccess"] == null)
    {
        List<string> userDomainGroups = Common.GetUserDomainGroups(Request.LogonUserIdentity);
        string permittedGroups = ConfigurationManager.AppSettings["AllowedGroups"];

        Page.Cache["hasAccess"] = userDomainGroups.Where(permittedGroups.Contains).Count() != 0; ;
    }

    return (bool)Page.Cache["hasAccess"];
} 
```

# c# - 在gridview中的rowdatabound上分配列值

> ID：12798785
> 
> 赞同：0
> 
> 时间：2012-10-09T11:11:40.967
> 
> 标签：c#, asp.net

我在网格视图中遇到了一个问题，基本上我想要实现的目标如下：我有一个网格视图，其中我的第一列是一个链接按钮，我必须设置一个条件，其中我的第二列的值被获取并且是输入到 ac# 方法，用于填充我需要分配到我的第一列的值。

我正在尝试下面的代码，但是当我查看我的网格时，它将第一列的值显示为空白。页面：

```
<asp:TemplateField HeaderText="FileName" ItemStyle-HorizontalAlign="Center"> 
<ItemTemplate>
<asp:LinkButton ID="btn"  runat="server" CommandName="Click"/>
</ItemTemplate> 
</asp:TemplateField> 
```

aspx.cs

```
if (e.Row.RowType == DataControlRowType.DataRow)
{
int EmpiD = Int32.Parse(e.Row.Cells[2].Text);
DataSet EmpIDDs = GetEMP.getValue(EmpiD);
DataRow EmpRow = EmpIDDs.Tables[0].Rows[0];
e.Row.Cells[0].Text = EmpRow[3].ToString();
} 
```

如果您有任何解决方案，请帮助我

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T11:22:54.660

> 当我使用上面的代码时，网格在我的第一列中没有显示任何值

你说`LinkButton` 是在第一个`TemplateField`，那么你不能设置`Text`单元格的属性。您需要使用`FindControl`来获取对您的`LinkButton`.

```
LinkButton btn = (LinkButton)e.Row.FindControl("btn");
int EmpiD = Int32.Parse(e.Row.Cells[2].Text);
DataSet EmpIDDs = GetEMP.getValue(EmpiD);
DataRow EmpRow = EmpIDDs.Tables[0].Rows[0];
btn.Text = EmpRow[3].ToString(); 
```

假设您的代码的其余部分是正确的，例如第三列是 a`BoundField`并且包含一个整数，这样就`e.Row.Cells[2]` 可以了。

我不确定您是否熟悉调试器。

调试教程： http: [//www.dotnetperls.com/debugging](http://www.dotnetperls.com/debugging)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T11:26:31.810

第一，我会得到你绑定的数据项，而不是单元格的文本。

2，您必须使用查找控件并将LinkBut​​ton的文本属性设置为单元格的文本。

```
if (args.Row.RowType == DataControlRowType.DataRow)
{
YourObject dataObj = args.Row.DataItem as YourObj;
LinkButton but = args.Row.FindControl("linkButtonId") as LinkBUtton;
if(but != null)
{
but.Text = dataObj.SomePropertyYouWantToUse;
}
} 
```

# php - 使用 fpdf 将页面添加到 PDF

> ID：12798791
> 
> 赞同：0
> 
> 时间：2012-10-09T11:11:59.870
> 
> 标签：php, pdf, fpdf

我正在使用 fpdf 动态构建 pdf 并向其中添加一些数据。我现在需要将创建的 pdf 与不同的 pdf 合并，以便将合并的 pdf（这是一个单页）作为第 1 页插入，然后将其余的动态创建的 pdf 插入。关于如何使用 fpdf 来做到这一点的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T11:29:02.387

有一个类似的问题，用户尝试合并 10 个 pdf 文件。答案提供了一个 PHP 方法和一个 shell 方法 - 任何一个都应该工作。[看一看！](https://stackoverflow.com/questions/4794435/merge-pdf-files-with-php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T11:29:28.670

你可以试试这个[FPDI](http://www.setasign.de/products/pdf-php-solutions/fpdi/)。我认为这个对你有帮助。

# magento - Magento 将类别选择选项卡添加到自定义插件

> ID：12798796
> 
> 赞同：0
> 
> 时间：2012-10-09T11:12:14.537
> 
> 标签：magento

我正在使用 Inchoo 自定义设计的图库插件：http: [//incho.net/ecommerce/magento/magento-custom-design-gallery/](http://inchoo.net/ecommerce/magento/magento-custom-designed-gallery/)。这个插件创建一个画廊，可以给画廊一个名字。

虽然我想将插件链接到类别选择器（以选项卡形式）。以便画廊链接到一个类别。

我已经尝试将以下内容添加到 app/code/local/Inchoo/Cpa/Block/Cat/Edit/Tabs.php：

```
$this->addTab('categories', array(
                'label'     => Mage::helper('catalog')->__('Categories'),
                'url'       => $this->getUrl('*/*/categories', array('_current' => true)),
                'class'     => 'ajax',
            )); 
```

它没有任何效果。我能做些什么？我是 Magento 扩展开发的新手。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T14:52:47.043

我找到了解决方案。不幸的是，不是以标签的形式，但我找到了一种链接到类别的方法。

转到 app/code/local/Inchoo/Cpa/Block/Cat/Edit/Tab/Info.php 并在 addfield 函数之后添加一个新函数：

```
 $fieldset->addField('cat_select', 'select', array(
      'label'     => 'Category',
      'class'     => 'required-entry',
      'required'  => true,
      'name'      => 'cat_select',
      'values' => $this->get_categories(),
      'disabled' => false,
      'readonly' => false,
      'tabindex' => 1
    )); 
```

添加以下功能以选择类别：

```
protected function get_categories(){

    $category = Mage::getModel('catalog/category'); 
    $tree = $category->getTreeModel(); 
    $tree->load();
    $ids = $tree->getCollection()->getAllIds(); 
    $arr = array();
    if ($ids){ 
    foreach ($ids as $id){ 
    $cat = Mage::getModel('catalog/category'); 
    $cat->load($id);
    $arr[$id] = $cat->getName();
    } 
    }

    return $arr;

} 
```

# c# - 为什么我的确认消息没有从后面的代码中触发？

> ID：12798797
> 
> 赞同：1
> 
> 时间：2012-10-09T11:12:15.380
> 
> 标签：c#, asp.net, code-behind

我有以下代码

```
protected void Button1_Click(object sender, EventArgs e)
{
    string strScript = "if(confirm('Do you confirm?')){alert('OK'); }else{alert('cancel')}";
    Page.ClientScript.RegisterClientScriptBlock(typeof(Page), "Confirmation", strScript, true);

}
protected void Button2_Click(object sender, EventArgs e)
{
    string strScript = "if(confirm('Do you confirm?')){return false; }else{return true;}";
    Page.ClientScript.RegisterClientScriptBlock(typeof(Page), "Confirmation", strScript, true);

} 
```

Button1 正在显示确认消息，然后根据我的选择出现相应的警报消息。

但是，当我单击 Button2 时，我什至没有收到确认消息。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T11:21:43.180

那是因为代码是错误的——你不能`return`在函数之外拥有，这是不好的语法。

您必须将此类代码附加到*某些东西*，例如按钮单击事件：

```
Button2.OnClientClick = "return confirm('Do you confirm?');"; 
```

`Page_Load`在事件中（或直接在）中有这样的代码，`.aspx`然后单击按钮将触发确认对话框，如果取消，将取消按钮单击。

# ios - 如何加快 iPhone 应用程序中 sqlite 的数据检索速度

> ID：12798800
> 
> 赞同：0
> 
> 时间：2012-10-09T11:12:18.647
> 
> 标签：ios, sqlite

我的 sqlite 表中有 10000 条记录。加载到数组中需要 3 多分钟。我怎样才能加快这个过程。有什么办法可以将时间减少到至少一半？

我的代码：

```
NSString *qry=[NSString stringWithFormat:@"select * from employees"];
    const char *sql=(char *)[qry UTF8String];
    if (sqlite3_prepare_v2(database, sql, -1, &selectstmt,NULL) != SQLITE_OK) {
        NSAssert1(0, @"Error: failed to prepare statement with message '%s'.", sqlite3_errmsg(database));
    }
    if(sqlite3_prepare_v2(database, sql, -1, &selectstmt, NULL) == SQLITE_OK) {
        Vertex *objVertex = [[Vertex alloc] init];
        int counterIndex=0;
         while(sqlite3_step(selectstmt) == SQLITE_ROW){
            objVertex.vid=sqlite3_column_int(selectstmt, 0);
            objVertex.lat=sqlite3_column_double(selectstmt, 1);
            objVertex.lon=sqlite3_column_double(selectstmt, 2);
            objVertex.alt=sqlite3_column_double(selectstmt, 3);
            objVertex.assoc_type=[NSString stringWithUTF8String:(char *)sqlite3_column_text(selectstmt, 4)];
            objVertex.assoc_id=sqlite3_column_int(selectstmt, 5);
            objVertex.link=[NSString stringWithUTF8String:(char *)sqlite3_column_text(selectstmt, 6)];
            objVertex.bf=sqlite3_column_int(selectstmt, 7);

             [appdel.dicVertexEntry setObject:[NSString stringWithFormat:@"%d",counterIndex] forKey:[NSString stringWithFormat:@"%d",objVertex.vid]];
             // do pass vertex to Algo
             counterIndex++;

        }
        [[NSUserDefaults standardUserDefaults]setObject:appdel.dicVertexEntry forKey:@"VertexData"];
        [[NSUserDefaults standardUserDefaults]synchronize];

    } 
```

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T09:53:48.097

更好的解决方案是，如果您从 100 条或一些固定数量的记录开始获取，然后滚动获取下 100 条记录。这将加快您的速度。

要优化查询，您可以仅从查询中获取必填字段，而不是使用 * 获取所有字段。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T11:49:08.610

您可以尝试在 SQL 语句中显式指定您需要的字段名称，而不仅仅是使用 *，这应该会给您带来轻微的性能提升。您是否考虑过使用 Core Data 而不是 sqlite direct？

# c - 字符串中的子字符串增量

> ID：12798801
> 
> 赞同：0
> 
> 时间：2012-10-09T11:12:20.357
> 
> 标签：c, string

假设我有一个字符串值 "110099" 并且我需要以 x 为步长递增子字符串值 "00" 直到 y 并换行到零，如果 x =10 和 y=90 即 "111099","112099" ...在“119099”之后，字符串值为“110099”。谁能帮助我如何开始。谢谢你的时间。

编辑：将问题更改为通用的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T11:17:54.100

1.  获取要增加的子字符串。
2.  将其转换为整数值。
3.  增加 10，然后增加 %100。
4.  弹回字符串。
5.  将其替换回原始字符串。

    *代码非常简单。*

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-09T11:20:12.243

由于您只需要检查和更改一个数字，我会直接在字符串表示中进行。

也许是这样的：

```
#define INCR_INDEX 2

int increment(char *value)
{
  if( value[INCR_INDEX] == '9' )
  {
    value[INCR_INDEX] = '0';
    return 1;
  }
  ++value[INCR_INDEX];
  return 0;
} 
```

上面做了增量，`1`如果它包裹，则返回，`0`如果没有。

就编码而言，这是 100% 安全的，C 保证托管环境对相邻位置的十进制数字进行编码，因此`++`持有`char`任何小于的数字`9`总是会生成下一个数字。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-09T11:19:13.500

的规范具有`"00"`误导性，因为它只是字符串中的第三个字符需要更改（第二个字符`0`从不`"00"`更改）。可以增加 a`char`所以如果第三个`char`不等于`9`则增加它，否则将其设置为`0`：

```
char a[] = "110099";

for (int i = 0; i < 20; i++)
{
    a[2] = ('9' == a[2]) ? '0' : a[2] + 1;
    printf("%s\n", a);
} 
```

[请参阅https://ideone.com/uMyfo](https://ideone.com/uMyfo)上的演示。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-09T11:18:34.087

只需增加第三个“数字”：

```
char s[] = "110099";

for ( ; ; )
{
    printf("Current value: %s\n", s);

    if (s[2] == '9') { s[2] = '0'; break; }
    ++s[2];
} 
```

这假设您的字符集在升序范围内连续存储数字。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-09T11:24:33.200

这很简单：

```
#include <stdio.h>

void incDigit(char* str, size_t pos)
{
  if (++str[pos] > '9')
    str[pos] = '0';
}

int main(void)
{
  char str[] = "110099";
  int i;

  printf("Original:   %s\n", str);

  for (i = 1; i <= 10; i++)
  {
    printf("Adding 1... ");
    incDigit(str, 2);
    printf("%s\n", str);
  }

  return 0;
} 
```

输出（[ideone](http://ideone.com/M0A9C)）：

```
Original:   110099
Adding 1... 111099
Adding 1... 112099
Adding 1... 113099
Adding 1... 114099
Adding 1... 115099
Adding 1... 116099
Adding 1... 117099
Adding 1... 118099
Adding 1... 119099
Adding 1... 110099 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-09T11:27:42.913

目前尚不完全清楚您希望它有多灵活。您当前问题的解决方案可能是以下功能。

```
void increment(char str*) {
    str[2]++;
    if (str[2]>'9') str[2]='0';
} 
```

测试：

```
char str[] = "110099";
for (int i = 0; i < 12; i++) {
    increment(str);
    printf("%s\n", str);
} 
```

结果：

```
111099
112099
113099
114099
115099
116099
117099
118099
119099
110099
111099
112099 
```

# android - 检查 EditText 以启用/禁用按钮

> ID：12798803
> 
> 赞同：0
> 
> 时间：2012-10-09T11:12:28.797
> 
> 标签：android, string, button, android-edittext, clickable

我有一个存储了 stringA 的 EditText。当某些进程发生时，EditText 会使用新值 (stringB) 进行更新。我有三个按钮。我希望在 EditText = stringA 时禁用它们，当 EditText 保存 stringB 值时更新为启用。

```
final EditText latlongText = (EditText) findViewById(R.id.EditText_COord) 
```

这是我的编辑文本。默认情况下，它只保存一个以 android:hint= "blah blahstringA" 形式存储在 XML 中的字符串

我在代码中这样更新它：

```
 latlongText.setText(stringB); 
```

在 onCreate 中，我有：

```
 buttonA.setEnabled(false);
 buttonB.setEnabled(false);
 buttonC.setEnabled(false); 
```

我不确定在哪里或如何正确放置代码以重新启用这些按钮。

也许“可点击”属性也是一个选项？我希望它们在 stringB 覆盖当前存储为“android:hint”字符串的值时启用。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T11:38:18.203

[使用 textwatcher](https://stackoverflow.com/questions/8543449/how-to-use-textwatcher-in-android)看看这个基本上你需要使用 textwatchers 来了解你的 edittext 何时更改，你可以启用/禁用按钮 depeding on the text in edittext

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-09T12:30:04.830

```
latlongText.addTextChangedListener(new TextWatcher(){
   @Override
   public void onTextChanged(CharSequence s, int start, int before, int count) {   
   }   
   @Override
   public void beforeTextChanged(CharSequence s, int start, int count,
    int after) {    
   }
   @Override
   public void afterTextChanged(Editable s) {
        String st=latlongText.getText().toString().trim()
        if(st.equals(stringA)){
           buttonA.setEnabled(false);
           buttonB.setEnabled(false);
           buttonC.setEnabled(false);               
        }
        else if(st.equals(stringB)){
           buttonA.setEnabled(true);
           buttonB.setEnabled(true);
           buttonC.setEnabled(true);
        }
    }
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-09T11:43:15.803

```
if(latlongText.getText().equals(stringA)){
 buttonA.setEnabled(false);
 buttonB.setEnabled(false);
 buttonC.setEnabled(false);
}
elseIf(latlongText.getText().equals(stringB)){
 buttonA.setEnabled(true);
 buttonB.setEnabled(true);
 buttonC.setEnabled(true);
} 
```

试试这个代码

# java - 依赖注入能帮助我们实现松耦合吗？

> ID：12798812
> 
> 赞同：1
> 
> 时间：2012-10-09T11:13:08.867
> 
> 标签：java, spring, dependency-injection

> **可能重复：**
> [依赖注入究竟如何减少耦合？](https://stackoverflow.com/questions/4541952/how-exactly-does-dependency-injection-reduce-coupling)

我认为，依赖注入作为一个概念，封装了松散耦合。说它有助于实现松散耦合是否正确？据我了解，如果您设计了一个松散耦合的类，那么您可以在其上实现 DI。如果我错了，请帮助我理解并纠正我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-09T11:21:59.067

正如@maba 建议的那样，这个网站上有很多相关的材料。

但无论如何：是的，你是对的。您始终可以自己实现 DI，但它通常过于复杂。因为如果你想保持简单，你会遇到“依赖携带”问题和许多其他问题。

快速浏览一下 Guice、Spring、Pico ;-) 它们都经过了良好的测试并且功能齐全。祝你好运。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-09T20:42:32.373

我想说松耦合本质上与 DI 无关。如果需要，您可以在具有完全紧密耦合的项目中使用 DI。

松散耦合是将一个组件与另一个组件的实现细节隔离开来。它通常在 java 中通过提供协作者作为接口的实例而不是具体类来实现。

我想说的是，在许多情况下，DI 倾向于引导人们使用松散耦合的代码，但它不会强迫他们这样做（尽管在某些产品（如 spring）中，不使用接口有很多缺点）。容器还支持连接松散耦合的协作者。这个例子在 DI 容器中非常好，同时紧密耦合。

```
public class FooService { ... }

public class SomeOtherService {
     public SomeOtherService(FooService fooService) {
          this.fooService = fooService;
     }
} 
```

但是，这是松耦合的，因为“SomeOtherService”与接口相关联。

```
public interface FooService { ... }

public class SomeOtherService {
     public SomeOtherService(FooService fooService) {
          this.fooService = fooService;
     }
} 
```

插入你喜欢的接线机制（guice、spring注解、spring xml、java cdi），但概念是一样的。

维基百科有一篇关于松散耦合的好文章：

[http://en.wikipedia.org/wiki/Loose_coupling](http://en.wikipedia.org/wiki/Loose_coupling)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-09T13:35:38.313

是的，DI 有助于实现松散耦合，因为无论您需要任何组件或服务的对象，您都可以通过它的超级接口类型自动装配它。根据您将在应用程序上下文文件或您将使用@Component、@Service 或@Reposirory 注释的类中指定的类的类型，注入的实际对象的类型将在运行时决定。

# delphi - 使用 FASTMM4 生成报告而不写入文件

> ID：12798828
> 
> 赞同：3
> 
> 时间：2012-10-09T11:13:58.880
> 
> 标签：delphi, fastmm

我试图在用 Delphi 编写的 GUI 中查找内存泄漏（这不是一项简单的任务，因为代码是巨大的——数万行代码）。我制作了一个文件解析器，它分析由 生成的报告`FASTMM`，并创建`TMemoryLeak`实例并将它们存储在一个整洁的`VirtualNodeTree`.

然而，问题在于生成这样的报告然后对其进行解析需要大量时间。有一个名为 的 FMM 方法`CheckBlocksOnShutDown`，我只需单击一个按钮就可以隔离和调用它，但是，它再次创建了一个全新的报告，我必须遍历它，并将整个报告存储在我的 NodeTree 中。我想通过反复单击

我想调整 FASTMM 代码，使其“随时随地”创建内存泄漏实例，而不向文件写入任何内容。这可行吗？（类似[问题](https://stackoverflow.com/questions/12539319/how-to-obtain-the-names-of-custom-made-structures-whose-instances-have-leaked-me)）

# linux - OVERRIDE="-Dplan.override $2"

> ID：12798830
> 
> 赞同：2
> 
> 时间：2012-10-09T11:14:12.733
> 
> 标签：linux, shell, unix

在 shell 脚本中，以下是什么意思？

```
OVERRIDE="-Dplan.override $2" 
```

我们是否将程序的第二个参数的值分配给`OVERRIDE`变量并创建一个`plan.override`值为 的新环境变量`OVERRIDE`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T11:18:46.440

You are creating a new variable OVERRIDE with the content `-Dplan.override $2` - `$2` stands for the second argument your shell script was given. The variable is only usable within your shell script, not outside of it.

Example:

```
$ ./your-script.sh firstarg secarg
 -> OVERRIDE will have the value -Dplan.override secarg 
```

If you want to make OVERRIDE global, use export in your script:

```
export OVERRIDE="-Dplan.override $2" 
```

Then source your script from your shell, like

```
$ source your-script.sh firstarg secarg 
```

Then your variable OVERRIDE is globally available:

```
$ echo $OVERRIDE
-Dplan.override secarg 
```

# css - 同一位置上的两个精灵：如何做到这一点？

> ID：12798833
> 
> 赞同：0
> 
> 时间：2012-10-09T11:14:30.323
> 
> 标签：css, positioning, sprite, css-sprites

我有一个网站，主页上有两个新闻项目。他们都有相同的图像，所以人们可以点击阅读更多。所以所有标准的东西。现在，我有一个问题。如上所述，这两个图像是相同的精灵，并且在它们位于不同的文章下方时是分开的，这也是合乎逻辑的。现在，我想在两个图像上创建相同的效果。如果两者都悬停，则必须更改为不同的精灵，但现在不会发生。在一个精灵上，它的位置很好（所以看起来颜色发生了变化，技术人员无法理解它是图像），但在另一个精灵上，悬停的精灵将自身定位在阅读更多按钮上方。 .

我怎样才能使这两个均匀，以便它们正确定位而不是高于或低于阅读更多图像？

CSS：

```
.home article {
    background: url("images/readmore.png") no-repeat scroll left 250px transparent;
    float: left;
    padding: 15px 15px 45px;
    width: 300px;
}

.home article .readmore:hover {
    background: url("images/icon-readmore-sprite.png") no-repeat scroll 5px 3px transparent;
} 
```

的HTML：

```
<article>
    <div class="entry-content">
    <a rel="bookmark" title="..." href="....">
    <p>......</p>
    <span class="readmore" title="read">read further</span>
    </a>
    </div>
</article> 
```

**PS：如果我这样做：**

```
.home article:hover {
    background: url("images/icon-readmore-sprite.png") no-repeat scroll 5px 3px transparent;
background-position: 340px 250px;
} 
```

然后它会正确定位，但如果我悬停，它看起来就像被点击了。它**向左和向下**，就像点击一个按钮......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T11:35:56.970

您必须了解 CSS sprites 方法的基础知识。

你应该遵循这个例子

[http://www.24development.cz/examples/css-sprites/sprite.html](http://www.24development.cz/examples/css-sprites/sprite.html)

请查看源代码并根据您的图像数据移动图像精灵位置。

这也可以帮助您避免预加载所有图像的问题。

让我知道这是否适合您。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T11:48:10.103

据我所知，这就是你所需要的。使用一个小的 32x32 图像（或任何尺寸）并将其放置在右下角。

```
article a {
    display: block;
    background: grey url('small.png') bottom right no-repeat;
}

article a:hover {
    background: red url('small-hover.png') bottom right no-repeat;
} 
```

# visual-studio-2010 - Windows Phone 的 PhoneGap - 文件扩展名“.js”没有脚本引擎

> ID：12798836
> 
> 赞同：7
> 
> 时间：2012-10-09T11:14:42.633
> 
> 标签：visual-studio-2010, cordova

我使用 Microsoft Visual Studio 创建了新项目，但出现如下编译错误：

1.  文件扩展名“.js”没有脚本引擎
2.  命令 "CScript "c:\users\raja\documents\visual studio 2010\Projects\EasyMed.3\EasyMed.3/BuildManifestProcessor.js" "c:\users\raja\documents\visual studio 2010\Projects\EasyMed. 3\EasyMed.3\EasyMed.3.csproj"" 以代码 1 退出。

任何的想法？

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2012-11-19T01:44:14.267

当您的 .js 文件与 CScript 以外的其他内容相关联时，就会出现此问题。通常，当您决定将某些文本编辑器设为默认值时，就会发生这种情况。您可以通过从命令行键入以下内容来重置它：

`assoc .js=JSFILE`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T21:06:33.927

为 Windows Phone 安装 Cordova 2.1 的说明不完整。

他们说：

> *   将文件 CordovaStarter-xxxzip 复制到文件夹：\My Documents\Visual Studio 2010\Templates\ProjectTemplates\

但未提供该文件。[这里](https://github.com/purplecabbage/incubator-cordova-docs/blob/22cdc5a1bf43cd4015221558804ba2a809aab40a/docs/en/2.1.0/guide/getting-started/windows-phone/index.md)有更新的说明（参见第 2.1 节）。

这是 apache 的问题：[https ://issues.apache.org/jira/browse/CB-1531](https://issues.apache.org/jira/browse/CB-1531)

另请参阅此问题以获取更多详细信息：[无法为 Windows Phone7 安装 Apache Cordova](https://stackoverflow.com/questions/12759284/not-able-to-install-apache-cordova-for-windows-phone7)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-19T12:10:53.210

文件扩展名没有脚本引擎-----试试这个：

[http://www.microsoft.com/downloads/details.aspx?FamilyID=47809025-D896-482E-A0D6-524E7E844D81&displaylang=en](http://www.microsoft.com/downloads/details.aspx?FamilyID=47809025-D896-482E-A0D6-524E7E844D81&displaylang=en)

# javascript - 寻找没有提交按钮而不重新加载的计算脚本

> ID：12798842
> 
> 赞同：0
> 
> 时间：2012-10-09T11:15:02.653
> 
> 标签：javascript, ajax, forms

我在网上商店看到过几种表格，您只需更改您想要的商品数量，它就会立即改变价格。没有重新加载，也没有提交（或计算）按钮。

我正在寻找类似的东西，但非常简单。

```
Amount of pages: [textfield]
price: [answer] 
```

就这样。代码必须从 [textfield] 获取输入并将其乘以某个数字（我可以在代码中更改）。该计算的结果应显示在 [answer] 中。

我一直在谷歌上四处寻找，但我只能找到使用提交按钮的非常困难和大的表单。而且我的 php/ajax/javascript 还不足以自己编写代码。我知道 Stackoverflow 上有几个提交表单，但我不明白如何编辑它们来做我想做的事情。

你不必让它看起来很花哨，我已经制作了一个很好的表格来放入代码。显然它必须在每个主要浏览器上工作。

编辑：我试过 Khòi 提供的代码。

我试过玩这个：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html>
<head>
<script src="jquery-1.8.2.min.js" type="text/javascript" defer="defer">
$('#pages').change(function(ev){
var total = $('#pages').val() * 0.2;
$('#total').html((total).toFixed(2));
});?
</script>
</head>
<body>

Pages: <input type="text" name="pages" id="pages" />
<br/><br/>
Total: <span id="total">0.00</span>

</body>
</html> 
```

但这不起作用？？我确实下载了 Jquery 文件并放入与此页面相同的文件夹中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T12:47:39.760

我建议你学习一些基本的 JQuery。使用 JQuery 可以非常有效地完成这些事情，并且学习曲线不会太陡峭。

我做了一个小提琴让你开始：

[http://jsfiddle.net/jRs3n/](http://jsfiddle.net/jRs3n/)

以下是单个工作 HTML 页面的完整代码：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html>
<head>

<title>test</title>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js" type="text/javascript"></script>

<script  type="text/javascript">
$(document).ready(function() {
    $('#pages').keyup(function(ev){
        var total = $('#pages').val() * 0.2;
        $('#total').html((total).toFixed(2));
    });
});
</script>
</head>
<body>

Pages: <input type="text" name="pages" id="pages" />
<br/><br/>
Total: <span id="total">0.00</span>

</body>
</html> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T21:18:53.557

如果您希望在不离开框的情况下进行计算，则需要将事件从 更改`change`为`keyup`这将允许您在特定字段上的每次按键后进行更新。

# jquery - twitter bootstrap modal 隐藏显示效果

> ID：12798843
> 
> 赞同：0
> 
> 时间：2012-10-09T11:15:03.077
> 
> 标签：jquery, twitter-bootstrap, modal-dialog, jquery-effects

我在 twitter 引导模式中有一些元素，我想隐藏并替换为其他元素。

隐藏和显示工作，但尝试添加效果 - 例如幻灯片 - 没有。

有谁知道如何做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T07:52:34.550

我最终使用了引导效果，而不是尝试将 jquery 和引导的东西混合起来。

我在模态中使用了轮播，这与我的计划不同，但效果一样好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T11:52:22.983

也许你忘记了过渡脚本？

```
<script src="js/bootstrap-transition.js"></script>
<script src="js/bootstrap-modal.js"></script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-09T11:54:58.183

在您的模态 html 上，您可以添加淡入淡出的类以使其滑入

```
<div class="modal hide fade in" id="testModal">
...
</div> 
```

# javascript - 如何停止在 HTML 中重新加载 jquery

> ID：12798844
> 
> 赞同：0
> 
> 时间：2012-10-09T11:15:02.767
> 
> 标签：javascript, jquery, html

有没有办法停止使用每个 HTML 页面重新加载 jQuery？例如，我有两个 HTML 页面，都包含以下内容：

```
 <body>
      <script src="jquery"></script> 
```

在这两种情况下，相同的 jQuery 被发送到浏览器。IE。jquery-1.6.min.js（目前）

Fiddler 似乎表明在这两种情况下都发送了文件。这是提琴手显示：

```
#  Result  Protocol  Host            URL      Body    Caching  Content-Type

1  200     HTTP      localhost:4567  /        9,101            text/html;charset=utf-8
2  200     HTTP      localhost:4567  /jquery  90,518           text/html;charset=utf-8
3  200     HTTP      localhost:4567  /namadd  8,706            text/html;charset=utf-8
4  200     HTTP      localhost:4567  /jquery  90,518           text/html;charset=utf-8 
```

目前我正在使用 Ruby-Sinatra 微框架来提供数据，但最终它可能是别的东西。

*   上面的第 1 项显示了正在发送的 HTML 页面。
*   第 2 项显示 HTML 加载 jQuery，使用`<script src="jquery"></script>`.
*   第 3 项显示正在加载的另一个 HTML 页面。
*   第 4 项显示 HTML 加载 jQuery，使用`<script src="jquery"></script>`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-09T11:24:10.137

一般来说，您在这里谈论的是缓存。对于动态页面（IE：ASP.NET、php 等），您通常可以通过添加适当的 HTTP 标头以编程方式定义页面的可缓存性。

但是，对于像这样的静态文件，它的缓存将取决于 Web 服务器及其设置来确定。在 HTML 中没有简单的方法可以缓存它（您可能可以使用复杂的方法来完成）但是您想要做的是找出如何配置服务器以将文件设置为可缓存（您真的想要将其缓存在客户端上，以便它不会再次请求它）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T11:44:44.227

在您的情况下，您可以在加载另一个 jquery 库之前进行检查

像这样

```
if(window.$==undefined){ //Will return false if jquery is already loaded
   load your script 
}else{
  do not load the script 
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-11T03:39:05.320

我能找到解决这个问题的唯一方法是：

1.  浏览器中的新 sessionStorage 和 localStorage 功能。

2.  ajax.googleapis.com

我想要实现的是只下载一次 jQuery 以供多个表单使用。

Google 的解决方案非常棒，因为除非清除浏览器缓存或类似情况，否则您只需永远加载一次。这样可以节省大量带宽。也许 localStorage 也能达到同样的效果

sessionStorage 和 localStorage 可能实现相似，但我还没有尝试使用它们，但我可能只是为了消除对第 3 方的依赖。我的意思是，谷歌是一家企业，对吧。

# jsp - 在 servlet 的特定 jsp 页面中显示 pdf

> ID：12798847
> 
> 赞同：2
> 
> 时间：2012-10-09T11:15:28.930
> 
> 标签：jsp, pdf, servlets, pdf-generation

在我的 servlet 中，在做了一些操作之后，我正在生成一个 PDF。它在字节数组中。

我可以通过这样做在浏览器中显示该 PDF，

1.  采取`byte[]`_`InputStream`
2.  将其写入`ByteArrayOutputStream`
3.  然后`ByteArrayOutputStream`写入`ServletOutputStream`.
4.  然后返回null；

这将在我当前的窗口中显示 PDF，但是是否可以在任何特定的 JSP 页面中显示 PDF？因为我想在显示 pdf 的同时在该 JSP 的页脚中放置一些按钮。以上述方式，整个窗口仅包含 PDF。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T11:19:00.500

您可以在您的 JSP 页面中嵌入一个[`IFRAME`](https://developer.mozilla.org/en-US/docs/HTML/Element/iframe)并设置其尺寸以占据整个页面，除了您要显示页脚的部分，并且页脚将成为您的 JSP 的一部分。IFRAME 目标/src 将是显示 PDF 的 servlet。

目前，您似乎正在使用一些请求参数从页面 A 调用 Servlet B。您应该使用相同的请求参数从页面 A 调用新的 JSP，JSP 页面将为 IFRAME 构建目标 URL 并调用 servlet B，后者将处理并返回 PDF 页面。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-09-04T05:51:48.210

```
JSP 表单提交
动作="PDFServlet" 方法="发布"
SERVLET 代码
从 byte[] 读取到 ServletOutputStream

```

```
protected void doPost(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {

        File file = new File("estatement.pdf");

        ServletOutputStream stream = null;
        BufferedInputStream buf = null;
        try {
            stream = response.getOutputStream();
            // set response headers
            response.setContentType("application/pdf");
            response.setDateHeader("Expires", 0);
            response.addHeader("Content-Disposition",
                    "inline; filename=estatement.pdf");
            response.setContentLength((int) file.length());
            buf = new BufferedInputStream(new FileInputStream(file));
            int readBytes = 0;
            while ((readBytes = buf.read()) != -1)
                stream.write(readBytes);
        } finally {
            if (stream != null)
                stream.flush();
            stream.close();
            if (buf != null)
                buf.close();
        }
    } 
```

# ios - 在目标 C 中使用相应国家的货币格式

> ID：12798848
> 
> 赞同：0
> 
> 时间：2012-10-09T11:15:36.013
> 
> 标签：ios, macos, xcode4.2, nsnumberformatter

> **可能重复：**
> [为 iPhone 本地化货币](https://stackoverflow.com/questions/856019/localize-currency-for-iphone)

我开发了一个 MAC 应用程序，在这个应用程序中我使用货币。在这里我可以用印度卢比做。我希望这个应用程序能够在全球范围内使用。所以我需要开发以便用户获得他各自的国家货币。如果我选择使用任何国家/地区的国家/地区货币，我不知道该怎么做。如果你知道，你能帮助我吗？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T11:25:45.020

您可以使用以下代码：

```
NSNumberFormatter* fmtr = [[[NSNumberFormatter alloc] init] autorelease];
[fmtr setNumberStyle:NSNumberFormatterCurrencyStyle];
[fmtr setLocale:[NSLocale currentLocale]];

NSLog( @"%@", [fmtr  currencySymbol]); // Prints '$' for example
NSLog( @"%@", [fmtr internationalCurrencySymbol]); // Prints 'USD' for example 
```

# blackberry - 黑莓 WebBitmapField 不显示来自 url 的图像

> ID：12798853
> 
> 赞同：1
> 
> 时间：2012-10-09T11:16:04.677
> 
> 标签：blackberry

我正在使用下面的代码来显示来自 web 服务的 url 的图像。我没有收到任何错误，但也无法显示图像。

getWebData 是我的 Utils 类中的静态方法：

```
public static void getWebData(final String url, final WebDataCallback callback) throws IOException
{
    Thread t = new Thread(new Runnable()
    {
        public void run()
        {
            HttpConnection connection = null;
            InputStream inputStream = null;

            try
            {
                connection = (HttpConnection) Connector.open(url, Connector.READ, true);
                inputStream = connection.openInputStream();
                byte[] responseData = new byte[10000];
                int length = 0;
                StringBuffer rawResponse = new StringBuffer();
                while (-1 != (length = inputStream.read(responseData)))
                {
                    rawResponse.append(new String(responseData, 0, length));
                }
                int responseCode = connection.getResponseCode();
                if (responseCode != HttpConnection.HTTP_OK)
                {
                    throw new IOException("HTTP response code: "
                            + responseCode);
                }

                final String result = rawResponse.toString();
                UiApplication.getUiApplication().invokeLater(new Runnable()
                {
                    public void run()
                    {
                        callback.callback(result);
                    }
                });
            }
            catch (final Exception ex)
            {
                UiApplication.getUiApplication().invokeLater(new Runnable()
                {
                    public void run()
                    {
                        callback.callback("Exception (" + ex.getClass() + "): " + ex.getMessage());
                    }
                });
            }
            finally
            {
                try
                {
                    inputStream.close();
                    inputStream = null;
                    connection.close();
                    connection = null;
                }
                catch(Exception e){}
            }
        }
    });
    t.start();
} 
```

下面是使用 getWebData 方法的 WebBitmapField。您需要做的就是将 URL 传递给构造函数，它会加载图像：

```
public class WebBitmapField extends BitmapField implements WebDataCallback
{
    private EncodedImage bitmap = null;

    public WebBitmapField(String url)
    {
        try
        {
            Util.getWebData(url, this);
        }
        catch (Exception e) {}
    }

    public Bitmap getBitmap()
    {
        if (bitmap == null) return null;
        return bitmap.getBitmap();
    }

    public void callback(final String data)
    {
        if (data.startsWith("Exception")) return;

        try
        {
            byte[] dataArray = data.getBytes();
            bitmap = EncodedImage.createEncodedImage(dataArray, 0,
                    dataArray.length);
            setImage(bitmap);
        }
        catch (final Exception e){}
    }
} 
```

# java - 一种检查 void 和 null 的跨语言 Java/Beanshell 方法

> ID：12798854
> 
> 赞同：1
> 
> 时间：2012-10-09T11:16:07.930
> 
> 标签：java, beanshell

在 BeanShell 中变量可以是`null`或`void`。`void`有没有办法使用在 BeanShell 和 Java 中都可以工作（未修改，即复制/粘贴）的代码来测试两者（或至少）？类似的东西：`SomeUtilityClass.isNullOrVoid(...)`。

我使用复杂的 BeanShell 脚本，并且能够将代码从 Java IDE 复制/粘贴到脚本中，这对我的工作效率和代码质量有很大帮助（是的，这意味着我没有使用 BSH 的脚本功能）。唯一的问题是测试`void`迫使我事后手动调整每个脚本。

问题`void`：

*   检查`null`未捕获`void`：

`String foo; System.out.println("is null: "+ (foo == null));`

prints `is null: false`，这会导致类似`if (var != void && var != null) { ... }`which 在 Java 中不起作用的代码（并且声明`void`为常量是不可能的，因为它是保留字）

*   `bsh.NameSpace`没有检查`void`和`getVariable(...)`返回的方法`void`：

`String foo; System.out.println("variable: "+ this.namespace.getVariable("foo"));`

打印`variable: void`，所以我们回到第一方。即使有一种方法可以做到这一点（假设我将使用适当的方法编写一个自定义 NameSpace 子类，并且`setNameSpace(...)`它）也需要一种以跨环境方式调用它的方法（请参阅下一点）。

*   用 like 方法编写自定义帮助器类`isNull(Object bshNameSpace, String varName, Object var)`似乎是不可能的。

像这样的辅助方法：

```
public class Helper {
  public static boolean isNullOrVoid(This bshThis, String name) throws Exception {
    Primitive p = (Primitive) bshThis.getNameSpace().getVariable(name);
    return p == Primitive.NULL || p == Primitive.VOID;
  }
} 
```

从 BeanShell 工作得很好，但没有办法（我知道）将它重新设计为在 Java 中工作（使用反射或其他方式），因为它需要使用方法变量而不是实例字段。另一种（笨重）版本：

```
 public static boolean isNullOrVoid(Object bshThis, String name, Object var) throws Exception {
    if (!(bshThis instanceof This)) {
      return var == null;
    }
    Primitive p = (Primitive) ((This)bshThis).getNameSpace().getVariable(name);
    return p == Primitive.NULL || p == Primitive.VOID;
  } 
```

如果第三个参数是*Undefined argument* ，则适用于 Java 但不适用于 BeanShell 。

*   声明自定义 BSH 命令也不是一种选择。

即使在脚本本身中定义了辅助方法，它也会以完全相同的方式爆炸，并带有*未定义的参数*异常：

```
public boolean isNullOrVoid(Object var) {
    return var == null || var == void;
}
String foo;
System.out.println(isNullOrVoid(foo)); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-07T02:05:28.207

我无法发表评论，因为我在这里相对较新。我对此深表歉意，因为我更愿意将以下内容作为评论。

我确实质疑你正在尝试做的事情的前提。BeanShell 是弱类型的，这就是你需要 void 的原因。我可以说`print(x);`，在这个脚本中 x 是无效的。Java 是强类型的，并且此代码无法编译（显然，假设所有类/方法代码都已到位）。这意味着如果您将纯 Java 代码粘贴到 BeanShell 中，那么您永远不会遇到对 void 的需求。

但是如果你坚持，你可以尝试用 eval() 命令来愚弄。共享方法如下所示：

```
boolean isNullOrVoid(Object o) {
 return eval("o == void") || o == null;
} 
```

这对 BeanShell 来说很好，但是现在您必须在 Java 代码中实现 eval() 命令，但是因为（如前所述）没有 void 的概念，所以它应该总是返回 false。

PS 无效检查应该在无效检查之前。

# cassandra - BAM 外部卡桑德拉

> ID：12798855
> 
> 赞同：2
> 
> 时间：2012-10-09T11:16:09.040
> 
> 标签：cassandra, wso2, wso2carbon, wso2bam

我想将 Cassandra 与 WSO2 BAM 一起使用。BAM 是开箱即用的 cassandra db，但是我想使用外部 Cassandra 服务器。有没有办法使用外部卡桑德拉。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-09T13:57:08.627

您可以使用 $CARBON_HOME/repocitory/conf/etc/cassandra-component.xml 将 WSO2 BAM 指向外部 Cassandra 集群。

[https://svn.wso2.org/repos/wso2/carbon/platform/branches/4.0.0/products/bam2/2.0.1/modules/distributed-setup/cassandra-component.xml](https://svn.wso2.org/repos/wso2/carbon/platform/branches/4.0.0/products/bam2/2.0.1/modules/distributed-setup/cassandra-component.xml)

您可以在节点部分提供多个主机。使用逗号分隔主机：端口条目。

# shell - 移动选定的数据两个选项卡

> ID：12798865
> 
> 赞同：0
> 
> 时间：2012-10-09T11:16:36.727
> 
> 标签：shell, awk

我有一个包含一列的文件，它看起来像这样。

```
chr1
C1orf122
YRDC
chr1
chr1
chr1
chr1
NADK
chr1
chr1 
```

如果它不以 chr 开头，我想在第一列中移动数据 2 个选项卡。

预期产出

```
 chr1
                      C1orf122
                      YRDC
    chr1
    chr1
    chr1
    chr1
                      NADK
    chr1
    chr1 
```

我正在这样做

```
awk '{if($1 ~ /chr*/) print $_ ; else print "\t\t" $1}' <result >temp 
```

数据不会移动 2 个标签 :(

请帮忙

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T11:48:32.503

一种使用方式`GNU sed`：

```
sed '/^chr/!s/.*/\t\t&/' file.txt 
```

结果：

```
chr1
        C1orf122
        YRDC
chr1
chr1
chr1
chr1
        NADK
chr1
chr1 
```

（实际上有两个标签）。如果添加`-i`标志，则可以在*_place*进行更改并避免使用临时文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T12:26:10.543

我对您的程序有几点评论，顺便说一句（GNU awk）：

*   `$1 ~ /chr*/`尝试在第一个字段中查找`ch`or `chr`or等​​。`chrr`如果您的意思`chr`是使用任何内容`chr.*`，并且应该将其锚定在该字段的开头，请使用`/^chr.*/`.
*   `$_`是一个 perl 变量，我认为 awk 假设您的意思是`$0`，即整行（记录）。

通常，如果您的代码块以 an 开头，`if`您可以将其设置为该块的条件，例如以：

```
$1 ~ /^chr.*/ { ... } 
```

`\t\t`在您的情况下，如果它不以 开头，您想在该行前面加上`chr`，我会这样表达：

```
$1 !~ /^chr.*/ { printf("\t\t") } 1 
```

最后`1`打印`$0`.

输出：

```
chr1
        C1orf122
        YRDC
chr1
chr1
chr1
chr1
        NADK
chr1
chr1 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-10T12:38:34.657

另一种解决方案：

```
awk '{$2=$1; sub($(!/chr1/),"",$1); sub($(/chr1/),"",$2); print $1 "\t\t" $2 }' file 
```

结果：

```
awk '{$2=$1; sub($(!/chr1/),"",$1); sub($(/chr1/),"",$2); print $1 "\t\t" $2 }' file
chr1        
        C1orf122
        YRDC
chr1        
chr1        
chr1        
chr1        
        NADK
chr1        
chr1 
```

# iphone - NSString 有格式字符串解析器吗？

> ID：12798866
> 
> 赞同：0
> 
> 时间：2012-10-09T11:16:39.840
> 
> 标签：iphone, cocoa, parsing, nsstring

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T11:21:17.610

`stringWithFormat` is "just" a front-end to `sprintf`; as it's plain C, `scanf` and its variants are also available if you need.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T12:30:01.907

你描述你的`parseWithFormat`功能的方式，由于结构模糊，它不能工作。

格式替换的`%@`标记在您的结果字符串中消失了`string`，因此结果提取可能不明确。

*示例*：

```
NSString *format = @"He likes %@ and %@.";
NSString *string = [NSString 
   stringWithFormat:format, @"apples and oranges", @"bananas"];
// --> @"He likes apples and oranges and bananas."
NSArray *array = [string parseWithFormat:format];
// Array could be:
// @[@"apples and oranges", @"bananas"] or 
// @[@"apples"  @"oranges and bananas"] 
```

# c - net-snmp 解析代码，如何解析 MIB？

> ID：12798871
> 
> 赞同：3
> 
> 时间：2012-10-09T11:16:44.753
> 
> 标签：c, network-programming, snmp, net-snmp, nms

我正在学习**[net-snmp](http://sourceforge.net/mailarchive/forum.php?forum_name=net-snmp-coders&max_rows=25&style=nested&viewmonth=200112)**代码库。解析 MIB。

在`parse.c and parse.h`代码中保留了一个哈希桶。`(indexed bucket (tree list))`.
还有一个树形结构，其中包含一个指向的 next 指针`Next node in hashed list of names.`

```
struct tree{  
    .
    .
    struct tree    *next;       // Next node in hashed list of names 
    int             modid;     // The module containing this node 
} 
```

我打印了 MIB，

> SNMP-FRAMEWORK-MIB:snmpFrameworkMIB(10) type=24 Next- **>** ' ipSystemStatsHCOctetGroup ipSystemStatsOutFragReqds ifStackGroup2 ifOutErrors '

我不明白**Next->**之后出现的对象名称之间的关系是什么？

基于哪些对象名称在一起的标准是什么？**在这一点上，我还不清楚《守则》。**

什么是模态？它的值不等于模块 OID！

**注意**：对于 MIB 树中的纯粹遍历目的，给出了 *child、*parent 和 *peer！也不`modid`是 OID 的一部分。

parse.h 中名为“模块兼容性”的数据结构：

```
struct module_compatability {
        const char     *old_module;
        const char     *new_module;
        const char     *tag;    /* NULL implies unconditional replacement,
                                 * otherwise node identifier or prefix */
        size_t          tag_len;        /* 0 implies exact match (or unconditional) */
        struct module_compatability *next;      /* linked list */
    }; 
```

**这个结构有什么用？什么意义上的兼容？**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-11T12:55:09.913

我也和 Net-snmp 一起工作了很长一段时间，我正在和你分享我的观察。
可能这会对你有所帮助。

**1.结构树*next；**

```
struct tree    * next; /* Next node in hashed list of names */ 
```

Net-snmp 功能提供通过模块的“名称”进行查询，
当查询的对象名称（字符串）为 ASCII 时，**即**

```
$ snmptranslate -On -IR bundleSize  
  -   
  -  
  .1.3.6.1.4.1.26149.2.1.2.2.1.9 
```

它有一个大小为 128 的哈希表（内部）数据结构“桶”。

**哈希函数：**

```
name_hash(str*) - return some of ASCII value. 
```

然后将此哈希值传递给宏**NBUCKET(x) - 返回索引 (0-127)**。通过如下链接解决冲突。桶[i]->下一个->下一个->下一个........

* * *

**parse.c**中存在此代码——

**`tree->next`并按`'bucket'`以下方式管理：**

```
 tp->hash = name_hash(tp->name); // Fist find hash value as some of ASCII
 b = BUCKET(tp->hash);           // map hash value into (0-127)
 if (buckets[b])                 // check for collision 
     tp->next = buckets[b];     // collision is resolved ny chan chain 
 buckets[b] = tp;           // new coming node become first node in chain 
```

**2\. int modid;**

*   包含此节点的模块。
    *   有一个“结构模块”类型的链表
    *   modid 是模块链表中的序列号。
    *   序号从 0 开始。
    *   modid= 模块开始读取的编号
    *   parse.h 'find_module(int modid)' 返回节点地址中定义的函数存储有关模块的信息。

**parse.h 中名为“模块兼容性”的数据结构：**

```
This is an array of structre 'module compatability' use to store compatible 
basic MIB name (RFC's defined).   

const char     *old_module;   // snmp-v1  
const char     *new_module;   // snmp-v2 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T15:00:40.490

modid 不是模块 OID。它是定义模块标识的单个数字（包含在 OID 中）。此 MIB 模块引入的所有 OID 都将包含此编号作为 OID 前缀。对于下面定义的所有节点，modid 将是常量。我相信，在您的情况下，modid 是 31（ipTrafficStats）？

您可能知道，MIB 有一个树形结构。节点可能包含其他节点等。您所指的结构代表一个节点。因此，通过使用“下一个”指针，您可以遍历解析器读取的节点。

# javascript - jquery 在 div 外单击时关闭 div

> ID：12798875
> 
> 赞同：-1
> 
> 时间：2012-10-09T11:16:57.963
> 
> 标签：javascript, jquery, html

实际上我得到的是：http: [//jsfiddle.net/y9uwY/7/](http://jsfiddle.net/y9uwY/7/)

我想要的是：

1.  如果用户点击黑色区域，那么什么都不会发生
2.  在黑色区域外点击必须关闭

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T11:37:50.077

试试这个小提琴，你的`body`标签只会是主`.select_roles`元素的大小，所以将宽度和高度设置为 100% 为你提供了一个可点击的隐藏区域（这在 msot 浏览器中有效，允许更多，可能是也值得添加一些填充）。这只是设置为`.select_roles`，`display:none;`但从类开始，`.active`一旦`display:block;`您在我们删除`.active`类的区域之外单击，就可以了。

小提琴：http: [//jsfiddle.net/y9uwY/3/](http://jsfiddle.net/y9uwY/3/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-13T01:27:34.483

现在试试小提琴 [http://jsfiddle.net/y9uwY/9/](http://jsfiddle.net/y9uwY/9/)

```
$('.select_roles').click(function (e){
    e.stopPropagation();
                 if($(this).hasClass('active')){
                 }
                 });

            $('body').click(function (){
                 if($('.select_roles').hasClass('active')){
                     $('.select_roles').removeClass('active');
                 }
            }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-09T13:28:26.277

你必须阻止事件冒泡到正文。这是更正后的代码[http://jsfiddle.net/y9uwY/8/](http://jsfiddle.net/y9uwY/8/)

供参考和进一步阅读：[什么是事件冒泡和捕获？](https://stackoverflow.com/questions/4616694/what-is-event-bubbling-and-capturing)

# javascript - Ajax call to complete success, before actually completing the call?

> ID：12798876
> 
> 赞同：2
> 
> 时间：2012-10-09T11:17:00.963
> 
> 标签：javascript, jquery, ajax

I'm trying to figure out an ajax call... I need the call to hold up and finish loading HTML contents, before going over once again (it is triggered by keyup event)... Otherwise returned HTML is actually loaded multiple times. In my case the ajax call returns HTML which then executes a JS function. But when it gets loaded multiple times, JS function is executed twice = bad.

Here is my code (alert boxes are only for help...):

```
$(document).ready(function() {

   var isProcessing = false;

   $('#productSearchInput').keyup(function() {

   var productSearchInput = $(this).val();
   var dataString = 'searchInput='+ productSearchInput;
   var script_url = '../ajax/service-search.php';

    if(productSearchInput.length > 3 && isProcessing === false) {
        $.ajax({
        type: 'GET',
        url: script_url,
        data: dataString,
        beforeSend:     
            function() {    
            isProcessing = true;
                            alert('Processing input: ' + productSearchInput;
            },
        success:
            function(server_response)   {
            $('#searchresultdata').html(server_response).show('fast', function() { alert('Currently processing...');  } );  
            },
        error:
            function() {
            alert('ajax call failed...');
            },
        complete: 
            function() {
            isProcessing = false;
                            alert('Processing done');
            }
        });

    }

  return false;
  });
}); 
```

What is wrong is, that the "Processing done" alert appears before the "Wait for processing" alert... And then after "Processing done" alert has showed, the "Wait for processing" alert shows.

I need my HTML server_response to show, before completing the call and setting isProcessing = false;...

How do I achieve that?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T11:33:43.363

这是正常行为。使用`show`方法需要一些动画时间，所以在完成后调用回调。为什么不把你的代码简化成这样：

```
$.ajax({
    type: "GET",
    url: script_url,
    data: dataString,
    beforeSend: function() {    
        isProcessing = true;
        alert('Processing input: ' + productSearchInput);
        },
    success: function(server_response)   {
        alert('Wait for processing...');
        $('#searchresultdata').html(server_response).show('fast', function() { 
            alert('Processing done');
            isProcessing = false;
        });                    
    },
    error: function() {
        alert('ajax call failed...');
    }
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T12:14:11.383

你为什么不使用[jQuery.Deferred](http://api.jquery.com/category/deferred-object/)对象，而不是**isProcessing**？

请检查这种情况下的代码（类似这样）：

```
 var isProcessing = $.Deferred();

     $.ajax({
        type: "GET",
        url: script_url,
        data: dataString,
        beforeSend: function() {    
            alert('Processing input: ' + productSearchInput);
        },
        success: function(server_response) {
            alert('Wait for processing...');
            $('#searchresultdata').html(server_response).show('fast', isProcessing.resolve);                    
        },
        error: function() {
            alert('ajax call failed...');
        }
    });
    $.when(isProcessing).then(function(){alert('Processing done');}); 
```

# php - php mysql associative array for graph report

> ID：12798879
> 
> 赞同：0
> 
> 时间：2012-10-09T11:17:28.020
> 
> 标签：php, mysql, graph

i need the output like below.i want to generate a graph for my report so i need the result in mysql_fetch_assoc. i am new to this concept. basically am doing mysql_fetch_array thats all but now i need the associative array function.

```
$date = array("date" => reading);

$data = array("28-Sep-2012" => .0032, "27-Sep-2012" => .0028, "29-Sep-2012" => .0021,
"24-Sep-2012" => .0033); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T11:24:11.477

像这样试试

```
$results = mysql_query("SELECT vaccum_value,date FROM vaccum_details where serial_number='10P1005'");
$data=array();
while ($row = mysql_fetch_array($results))
{ 
    $data[$row['date']]=$row['vaccum_value'];
}

print_r($data); 
```

# c# - Authenticate User using Windows Authentication in REST WCF Web API

> ID：12798881
> 
> 赞同：2
> 
> 时间：2012-10-09T11:17:37.890
> 
> 标签：c#, rest, windows-authentication, asp.net-web-api

I have a requirement to expose some WCF Web API to a 3rd party system. The 3rd party system may validate the users using Windows Authentication. My Web service will expose a Login method where the username is passed in. I need to authenticate the passed in user using Windows Authentication.

I try to determine the role for the user by using:

```
 Roles.GetRolesForUser(UserID) 
```

I get the following error message: "Method is only supported if the user name parameter matches the user name in the current Windows Identity. "

How do I validate a passed in username using Windows Authentication?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T11:26:01.140

您必须先模拟用户，然后才能获得他/她的角色。或者无论如何都是具有足够访问权限的用户。

这是来自 Microsoft 的一个很好的参考资料，它解释了这一切：

[http://msdn.microsoft.com/en-us/library/ff647405.aspx](http://msdn.microsoft.com/en-us/library/ff647405.aspx)

# python - Python 图像库 - 将像素转换为 2D 列表

> ID：12798885
> 
> 赞同：0
> 
> 时间：2012-10-09T11:17:55.633
> 
> 标签：python, list, python-imaging-library

我需要对从图像读取的值的二维数组执行一些操作，然后使用生成的二维数组创建图像。我正在使用 python 列表来表示二维数组。

发生了一些非常奇怪的事情；二维数组（列表列表）中的值似乎在我标记的两个打印调用之间的某个时刻变为“0”。也就是说，它们似乎是从图像中正确读取的……但后来不知何故被设置为零。

代码：

```
image = Image.open("test.png").convert("L")

data = [ [255] * image.size[1] ] * image.size[0]
pix = image.load()
for x in range(0, image.size[0]):
    for y in range(0, image.size[1]):
        data[x][y] = pix[x, y]
        #data[x][y] = 77
        print "1\. data[x][y] = " + str(data[x][y]) + " .vs. " + str(pix[x, y]) # Prints correct values

for x in range(0, image.size[0]):
    for y in range(0, image.size[1]):
        print "2\. data[x][y] = " + str(data[x][y]) + " .vs. " + str(pix[x, y]) # Always prints "0 .vs. [correct value]" 
```

但是，如果我注释掉该行

```
data[x][y] = pix[x, y] 
```

并取消注释：

```
data[x][y] = 77 
```

然后两条print语句显示data中的所有元素都是77

到底是怎么回事？我不是 python 专家，但我想不出任何合理的理由为什么列表值会这样改变。

我已经尝试了以下行，以防像素访问器正在做一些奇怪的事情：

```
data[x][y] = 0 + int(pix[x, y]) 
```

但仍然得到相同的结果。我也尝试过使用 RGB 图像而不是灰度图像。

我应该明确表示，我绝对不会对这两个打印调用之间的数据做任何事情。上面的代码正是我将原始程序简化为的代码（在发现我所有的“结果”图像文件都是黑色之后）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-09T11:22:44.230

你的问题在于这条线：

```
data = [ [255] * image.size[1] ] * image.size[0] 
```

`image.size[1]`这将创建一个填充了 value的长度列表`255`。然后，您创建`image.size[0]`对*同一列表*的引用并将所有这些引用打包到另一个列表中。因此，当您更改时`a[1][1]`，您也会更改`a[0][1]`等，`a[2][1]`因为`a[0]`, `a[1]`, `a[2]`,是对*同一个列表*`...`的引用。

 *这是一个简单的例子：

```
a = [[255]*10]*10
a[1][1] = 77
print (a) 
```

最简单的解决方法是：

```
a = [[255]*10 for _ in range(10)] 
```

因为这会创建 10 个新列表，而不是对同一列表的引用列表。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T11:25:46.850

您最好更改`data`并`data = []`附加每一行。

```
data = []
pix = image.load()
for y in xrange(image.size[1]):
    data.append([pix[x, y] for x in xrange(image.size[0])]) 
```*

# openssl - 存折通行证签名 - WWDR 证书

> ID：12798886
> 
> 赞同：0
> 
> 时间：2012-10-09T11:17:58.047
> 
> 标签：openssl, certificate, passbook

我目前正在开发一个人们可以创建通行证的网络界面。这些通行证由我的证书签名，但现在我想添加一个功能，以便人们可以上传自己的证书。

我正在查看 passk.it，当您想使用自定义证书签名时，不需要上传您自己的 WWDR 证书；您只需要上传通行证。这是否意味着任何 WWDR 证书都可以对 Passbook 通行证进行签名？或者我在这里错过了什么？

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T14:18:43.773

WWDR 证书对每个人都是一样的，由 Apple 创建。它必须添加到签名堆栈中，但您不需要要求每个人上传自己的副本。

# mysql - check if given date does not exists with in the two date field

> ID：12798887
> 
> 赞同：0
> 
> 时间：2012-10-09T11:18:00.767
> 
> 标签：mysql

Hi friends just i don't know the query to check given date doesn't exists given date field in mysql .can any one help me to find out i have two table 1.Marriage Hall and Booking hall id is the primary key in hall table and foreign key in booking table .how to join two table . my question is 1.Retrieve the available marriage halls for the date 01-15-2013

```
booking_From      booking_to            
2012-10-12       2012-10-15         
2012-10-17       2012-10-19 
```

to check the given date '2012-10-12' doesn't exists above the date

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T11:21:48.127

尝试

```
select * from <your_table> where '2012-10-12' between `From` and `to` 
```

# [SQL Fiddle 演示](http://www.sqlfiddle.com/#!2/1badd/1)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T11:21:14.400

```
Here, we are find out date betwwen range of date or not.
If any record is exists then we count no of record is greater then o then date is exists otherwise date is not exists using case function :

   select (case when count(*) <=0 then 'Date is not exists' else 'Date is exists' end) as
     'exists' from given_date where `From` >= '2012-10-12' and  `to` <= '2012-10-12' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-09T11:22:25.737

```
select * from yourtable where `from`='2012-10-12' or `to`='2012-10-12'; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-09T11:22:28.797

您将使用 OR 条件运算符作为

```
SELECT * FROM yourTable WHERE FROM = YourDate OR To = YourDate 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-09T11:22:36.693

```
SELECT 
  CASE DoesExist
    WHEN 1 THEN 'Exists'
    ELSE 'Doesnt Exist'
  END AS 'Exists or not?'
FROM
(
    SELECT 1 AS DoesExist
    FROM tAble
    WHERE EXISTS 
    (
         SELECT Date 
         FROM Table WHERE `FROM` >= '20121012' AND `To` <= '20121012'
    )
) t 
```

# javascript - jquery .html() 注入对象与包含该对象的变量

> ID：12798890
> 
> 赞同：0
> 
> 时间：2012-10-09T11:18:02.533
> 
> 标签：javascript, jquery

不确定标题是否正确，如果您不同意，请提出更改。

我正在处理通过 jquery (.load()) 加载到 div 中的内容。我不得不从加载的内容中删除几个项目。我这样做的方式与我编写的 jsfiddle 示例 ( [http://jsfiddle.net/AzxaL/12](http://jsfiddle.net/AzxaL/12) ) 中的方式相同。这个不使用会创建 id 重复的 load() 函数，但这无关紧要。

问题是：为什么一个工作而另一个不工作以及需要改变什么 else if(this.tagName == 'H2') { $(this).remove(); 不工作的例子？

为了节省您寻找差异，唯一的一个是在 /* 感兴趣的行 */

### 在职的

```
$('#copy_working_box').html($('#copy_working_box').children('#wrapper').children()).fadeIn(300); 
```

### 不工作

```
$('#copy_working_not_box').html(content).fadeIn(300); 
```

另外，请注意，在不工作的示例中， div#subcontent 确实被删除了，只有 h2 没有。

PS 我正在寻求澄清，因为我知道这个问题的存在只是因为我对这个例子的工作原理有错误的理解。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T11:38:27.863

为什么不使用 jQuery 过滤器来删除元素？

```
$('#copy_working').click(function() {
    var $clone = $('#wrapper').clone();

    // remove unwanted elements
    $clone.find('#content #subcontent, h2').remove()

    $('#copy_working_box')
        .hide()
        .html($clone)
        .fadeIn(300);
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T11:43:37.623

当你这样做时：

```
var content = $('#copy_working_not_box').children('#wrapper').children(); 
```

在代码运行时，您会得到一个包含元素列表的 jQuery 对象。该列表不是动态的，因此从 DOM 中删除一个（或多个）元素（使用`.remove()`）不会更新对象中的元素列表。但是，这些元素*内容*的更改会反映为您的 jQuery 对象包含对 DOM 元素的引用。

* * *

当您使用 jQuery 函数选择元素时，在本例中使用以下代码：

```
var content = $('#copy_working_not_box').children('#wrapper').children(); 
```

你最终得到的是一个 jQuery 对象，其中包含对相应 DOM 元素的引用。jQuery 对象类似于数组（它们有一个`length`属性，并且可以使用方括号表示法访问单个元素`[0]`），因此出于我们的目的，我们可以将其简单地视为元素数组。

鉴于我们正在使用的 HTML，该数组将由一个`<h2>`元素和一个`<div>`带有`id`of的元素组成`content`。出于说明的目的，我们将这样表示：

```
[<h2>, <div#content>] 
```

现在，我们正在处理您的代码中的两种情况。

1.  从 DOM 中删除一个元素，该元素是我们数组中 DOM 元素的后代（jQuery 对象）。
2.  从 DOM 中删除一个元素，该元素是我们数组中的 DOM 元素之一。

在第一种情况下，我们从 jQuery 对象中的元素的引用开始；这就是`<div#content>`元素。然后我们访问它的孩子 - `[<p>, <div#subcontent>]`，将其过滤到仅`<div#subcontent>`并删除它。由于我们的数组仍然有一个对 的引用`<div#content>`，而它又对它的后代有引用，所以对 DOM 的这种更改会影响它（对子项的引用`<div#subcontent>`从 中删除`<div#content>`）。

在第二种情况下，我们从 jQuery 对象中的元素的引用开始；这就是`<h2>`元素。然后我们简单地删除这个元素——从 DOM 中删除它，因此在其他 DOM 元素（即它的祖先）中对它的任何引用都将被更新。但是，我们仍然有一个对存储在 jQuery 对象中的 DOM 元素本身的引用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-09T11:32:15.647

在你的代码中你正在做

```
var content = $('#copy_working_not_box').children('#wrapper').children(); 
```

进而

```
.html(content) 
```

请注意，该`jQuery.html(htmlString)`方法接受`htmlString`作为输入而不是`object`

也许你想做`.html(content.html());`

# google-maps - Reload google map API in a popup

> ID：12798891
> 
> 赞同：2
> 
> 时间：2012-10-09T11:18:05.867
> 
> 标签：google-maps

I've an issue with a popup, I load in a google map, but when I click for a second request , the google maps isn't refresh despite I use google.maps.event.trigger(map, 'resize'); My code is :

```
var geocoder;
  var map = null;
  function initialize() {
    geocoder = new google.maps.Geocoder();
    var latlng = new google.maps.LatLng(-34.397, 150.644);
    var mapOptions = {
      zoom: 12,
      center: latlng,
      mapTypeId: google.maps.MapTypeId.ROADMAP
    }
    map = new google.maps.Map(document.getElementById("map_canvas"), mapOptions);
 googlemaps();

  }
  function lafonction(){
   $( "#popupMap" ).popup( "open" );

  }
  function googlemaps(){   
   var address = window.localStorage.getItem("url");
   geocoder = new google.maps.Geocoder();
 geocoder.geocode({ 'address': address }, function(results, status) {
 if (status == google.maps.GeocoderStatus.OK) {
 map.setCenter(results[0].geometry.location);
 var marker = new google.maps.Marker({
 map: map,
 position: results[0].geometry.location
  });
 google.maps.event.trigger(map, 'resize');

   } else {
 alert("Pas de localisation");
   }
 });  
  } 
```

the HTML is :

```
<a href="#" data-rel="popup" data-position-to="window" data-role="button" data-theme="b" data-inline="true" onClick="lafonction()">Localiser</a>

         <div id="fiche" data-role="listview">
                   <div data-role="popup" id="popupMap" data-overlay-theme="a" data-theme="a" data-corners="false" data-tolerance="15,15">
                            <a href="#" data-rel="back" data-role="button" data-theme="a" data-icon="delete" data-iconpos="notext" class="ui-btn-right">Close</a>
                      <iframe src="map.html" width="480" height="320" seamless></iframe>
       </div> 
            </div> 
```

And then the map is not centerd on the marker, the marker is on the left corner.

# json - Actionscript 3 上的 JSON 输出缩进

> ID：12798892
> 
> 赞同：1
> 
> 时间：2012-10-09T11:18:07.437
> 
> 标签：json, actionscript-3, air

我正在使用 Adob​​e AIR 3 的本机 JSON 功能。我的对象正在使用本机“JSON.stringify()”函数成功转换为 JSON 字符串，但所有数据都写在一行上，没有空格。有没有办法用正确的制表符和空格使这个输出可读？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T11:04:52.243

我发现[这](http://maccherone.com/larry/projects/older/a-pretty-json-encoder-for-actionscript-3-as3/)是一个获得“漂亮”JSON 的好库。它基于 as3corelib JSON 编码器。我认为它已经有一段时间没有更新了，但它确实可以解决问题

[http://maccherone.com/larry/projects/older/a-pretty-json-encoder-for-actionscript-3-as3/](http://maccherone.com/larry/projects/older/a-pretty-json-encoder-for-actionscript-3-as3/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T11:23:02.577

从文档 [http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/JSON.html](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/JSON.html) stringify 有可选的参数空间。你试过了吗？

# jquery - 使用 Bootstrap 和 Ajax 创建新选项卡

> ID：12798895
> 
> 赞同：2
> 
> 时间：2012-10-09T11:18:18.050
> 
> 标签：jquery, ajax, tabs, twitter-bootstrap

我有一个标签菜单，用户可以在其中添加和删除他们想要的标签。创建新选项卡时，他们可以随意命名（为此会打开一个引导模式框）。命名选项卡后，选项卡被创建，但我不知道如何处理内容。我需要为添加的每个选项卡加载相同的内容，我尝试了我在网上找到的各种脚本，但似乎没有任何效果。

这是我使用的 jQuery：

```
$('.tabs a:last').tab('show');
        $('#createTab').click(function() {
            /* opens the modal box */
            $('#tabModal').modal();
        });
/* after clicking on a link Submit that has the id of newTab */
        $('#newTab').click(function(){
            var title = $('#myInput4').val();
            $('#tabHeaders')
                .append($('<li><a href="#' + title + '" class="tabs"><h1>'+ title +'<i class="icon-remove"></i></h1></a></li>'));
            $('#myTabContent') /* this way adding content does not really work */
                .append($('<div class="tab-pane fade in active" id="'+ title +'"></div>')); 
            $(title).tab('show');
        });
    /* tab delete */
    $('.tabs i.icon-remove').live('click', function() {
       $(this).closest('li').remove();
    }); 
```

用于添加按钮的 HTML：

```
<ul class="nav nav-tabs" id="tabHeaders">
  <li><a href="#" data-toggle="tab" id="createTab"><h1>&nbsp;&nbsp;<i class="icon-plus"></i>&nbsp;&nbsp;</h1></a></li>
</ul> 
```

如果有人可以帮助我加载内容，我将不胜感激。我创建了一个文件 addTab.php，我希望将其加载到内容部分 - 当用户单击#createTab 时，首先他们选择选项卡的名称，然后将内容加载到该选项卡。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T11:34:58.940

示例测试：

```
<ul class="nav nav-tabs" id="myTab">
    <li class="active"><a href="#home">Home</a></li>
    <li><a href="#profile">Profile</a></li>
    <li><a href="#messages">Messages</a></li>
    <li><a href="#settings">Settings</a></li>
</ul>

<div class="tab-content">
    <div class="tab-pane active" id="home">...</div>
    <div class="tab-pane" id="profile">...</div>
    <div class="tab-pane" id="messages">...</div>
    <div class="tab-pane" id="settings">...</div>
</div> 
```

添加选项卡只需这样做：

```
$(document).on('click', '#submit_button_in_the_modal', function(event){
    event.stopPropagation();

    var title = $('#myInput4').val();
    $('#tabHeaders').append('<li><a href="#new_tab_id" data-toggle="tab">'+ title +'</a></li>');
    $('.tabs a:last').tab('show');

    //this remove the active content
    $('div.active').removeClass('active').removeClass('in');

    //this add the new content
    $('.tab-content').append('<div class="tab-pane in active" id="new_tab_id"><p> Loading content ...</p></div>');
    //with this you add the tab
    $('#myTab').append('<li><a href="#new_tab_id" data-toggle="tab">Tab Name</a></li>');
    //this shows the tab
    $('#tab a:last').tab('show');
    //this loads the content you want in the content
    $('#new_tab_id').load('addTab.php');    
}) 
```

请试试这个。

# php - What is the maximum number of queries in a multi query?

> ID：12798896
> 
> 赞同：3
> 
> 时间：2012-10-09T11:18:23.297
> 
> 标签：php, mysql, mysqli

is there a maximum number of queries when run a multiquery using php?

```
 $conn = new mysqli($db_hostname, $db_username, $db_password);
    if (mysqli_connect_errno()) {
      exit('Connect failed: '. mysqli_connect_error());
    }  

   $sql = "CREATE TABLE IF NOT EXISTS......";
   $sql .= "CREATE TABLE IF NOT EXISTS......";
   $sql .= "CREATE TABLE IF NOT EXISTS......";
   $sql .= "INSERT ......";
   $sql .= "INSERT ......";
    <and so on>
    mysqli_autocommit($conn, false);
    mysqli_multi_query($conn, $sql);
    mysqli_rollback($conn); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T11:40:29.763

我现在不知道 PHP 函数[`mysqli_multi_query`](http://www.php.net/manual/en/mysqli.multi-query.php)是通过使用[MySQL API](http://dev.mysql.com/doc/refman/5.0/en/c-api-multiple-queries.html)的多查询可能性来实现的，还是在 PHP 端拆分语句。

但是你可以尝试在你`net_buffer_length but`的. 但我的印象是这些是每个语句缓冲区。`max_allowed_packet``my.cnf`

在这里绊倒的人要清楚，不是像 OP 那样出于好奇，而是因为他们碰到了最大值：通常还有[其他方法](https://stackoverflow.com/a/4451885/383793)可以做[许多 INSERTs](https://stackoverflow.com/a/5071591/383793)。

# php - PHP - 读取文件夹和子文件夹中的文件并导出到 XML 文件

> ID：12798899
> 
> 赞同：2
> 
> 时间：2012-10-09T11:18:26.540
> 
> 标签：php, xml, scandir

我明白了

> XML 解析错误：文档元素后出现垃圾 位置：xxxxxxxxx 第 2 行第 1 列

这是代码：

```
<?php

$xml_generator = new SimpleXMLElement('<data/>');

filesindir('assets/images/');
function filesindir($dirs) {
    $dirs = scandir($tdir);
    while ($file = readdir($dirs)) {
            if (($file == '.')||($file == '..')) {
            } elseif (is_dir($tdir.'/'.$file)) {
                filesInDir($tdir.'/'.$file);
            } else {
                $image = $xml_generator->addChild('image');  
                $image->addChild('name', $file);
            }
    }
}

header("Content-Type: text/xml");
$xml_generator->asXML('data.xml');
echo $xml_generator->asXML();
?> 
```

我做错什么了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T11:22:46.413

这么多东西错了..看起来你复制和合并了这么多代码..

尝试

```
$xml = new SimpleXMLElement('<data/>');

scanFiles(__DIR__, $xml);

function scanFiles($path, SimpleXMLElement $xml, $allowed = array("jpg","png")) {
    $list = scandir($path);
    foreach ( $list as $file ) {
        if ($file == "." || $file == ".." || ! in_array(pathinfo($file, PATHINFO_EXTENSION), $allowed))
            continue;
        $image = $xml->addChild('image');
        $image->addChild('name', $file);
        $image->addChild('size', filesize($file));
    }
}

header("Content-Type: text/xml");
$xml->asXML('data.xml');
echo $xml->asXML(); 
```

输出

```
<?xml version="1.0"?>
<data>
  <image>
    <name>a.jpg</name>
    <size>17129</size>
  </image>
  <image>
    <name>a2.jpg</name>
    <size>11100</size>
  </image>
  <image>
    <name>fake.png</name>
    <size>167</size>
  </image>
</data> 
```

# css - 仅底部的盒子阴影

> ID：12798902
> 
> 赞同：32
> 
> 时间：2012-10-09T11:18:34.020
> 
> 标签：css

我有一盒内容，需要为此提供阴影。但我只想为盒子的底部提供阴影。我用这个`css box-shadow: 0 3px 5px #000000;`

如果我给出这个代码，它会显示左、右和底部。我只需要底部

任何人都可以建议解决这个问题。非常感谢

* * *

## 回答 #1

> 赞同：67
> 
> 时间：2012-10-09T11:21:12.903

您可以在添加类后执行以下操作`one-edge-shadow`或随意使用。

```
.one-edge-shadow {
    -webkit-box-shadow: 0 8px 6px -6px black;
       -moz-box-shadow: 0 8px 6px -6px black;
            box-shadow: 0 8px 6px -6px black;
} 
```

**[来源](http://css-tricks.com/snippets/css/css-box-shadow/)**

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2014-03-13T17:25:04.557

您必须`negative spread`在框阴影中指定以删除侧阴影

```
-webkit-box-shadow: 0 10px 10px -10px #000000;
   -moz-box-shadow: 0 10px 10px -10px #000000;
        box-shadow: 0 10px 10px -10px #000000; 
```

查看[http://dabblet.com/gist/9532817](http://dabblet.com/gist/9532817)并尝试更改属性并了解其行为方式

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-05-10T21:24:26.937

指定负值以传播值。这对我有用：

```
box-shadow: 0 2px 3px -1px rgba(0, 0, 0, 0.1); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-09T11:23:32.730

```
-webkit-box-shadow: 0 3px 5px -3px #000;
-moz-box-shadow: 0 3px 5px -3px #000;
box-shadow: 0 3px 5px -3px #000; 
```

# ipad - ipad is showing my site at full height and not 980 full width

> ID：12798905
> 
> 赞同：4
> 
> 时间：2012-10-09T11:18:50.433
> 
> 标签：ipad, height, width

I have created a [site](http://www.econiq.com) and it works fine on all the major browsers unfortunately when viewed on a mobile device it is viewed at full height so the width of the site changes per page and I have an annoying white space to the right of the screen.
I have tried `meta name="viewport" content="width=988" or (width=988)` this does not seem to make any difference or `meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"` (or variations of it).

this really messed things up as it cut off the right third of the background images. Both leave the white space to the right. I have also tried :

```
@media only screen and (device-width:768px)and (orientation:portrait)
/*iPad Portrait orientation styles */

@media only screen and (device-width:768px)and (orientation:landscape)
/*iPad landscape orientation styles */ 
```

in the css but this hasn't done anything, in fairness I don't really understand how that's supposed to work. I think the main problem is the ipad wants to scale the page to full height and I want it full width.
Any ideas?

# http - 协议状态和转换

> ID：12798906
> 
> 赞同：-1
> 
> 时间：2012-10-09T11:18:55.767
> 
> 标签：http, networking, udp, ip, network-protocols

这是 TCP 状态转换图图像。HTTP，HTTPS，SMTP，UDP，IP，IP4，IP6是否有类似的图表？ ![在此处输入图像描述](../Images/257155c71597fbbfada732534a6c590b.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T14:46:49.700

IP（4 或 6）没有类似的图表，因为它们是无状态的。UDP也是无状态的。

HTTP 和 SMTP 等更高级别的协议是有状态的，但几乎没有，只有少量的线性状态（例如等待请求、处理、发送回复），因此不会费心创建此类图表。

SSL（HTTPS 中的 S）具有更多状态，但由于它遵循相当线性的进程，因此实际上并没有任何复杂的图表。 [http://www.eventhelix.com/realtimemantra/networking/SSL.pdf](http://www.eventhelix.com/realtimemantra/networking/SSL.pdf)

PPP 是我所知道的唯一具有复杂状态机的其他网络协议，该状态机在 RFC 的表格中给出。（PPP 实际上有两个状态机，一个称为“相位机”，但遗憾的是没有详细的转换图。）

# wpf - 绑定后如何捕获属性更改事件

> ID：12798909
> 
> 赞同：4
> 
> 时间：2012-10-09T11:19:06.647
> 
> 标签：wpf, events, data-binding

我有一个习惯`UserControl`：

```
public partial class CustomCtrl : UserControl
{
    public CustomCtrl()
    {
        InitializeComponent();
    }

    public string Prova
    {
        get { return (string)GetValue(ProvaProperty); }
        set 
        {
            SetValue(ProvaProperty, value); 
        }
    }

    public static readonly DependencyProperty ProvaProperty =
        DependencyProperty.Register("Prova", typeof(string), typeof(CustomCtrl));

} 
```

我做了这个简单的绑定：

```
CustomCtrl c = new CustomCtrl();
TextBlock t = new TextBlock();
c.SetBinding(CustomCtrl.ProvaProperty, new Binding("Text") { Source = t });
t.Text = "new string"; 
```

现在`c.Prova`是“ `new string`”，但我怎样才能在`CustomControl`课堂上发现通知我`Prova`发生变化的事件？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-09T11:30:28.363

像这样的东西（这将捕获所有实例的变化`CustomCtrl`）：

```
public static readonly DependencyProperty ProvaProperty =
    DependencyProperty.Register(
    "Prova",
    typeof(string),
    typeof(CustomCtrl),
    new PropertyMetadata( new PropertyChangedCallback(OnValueChanged) )
);

private static void OnValueChanged(DependencyObject d, DependencyPropertyChangedEventArgs e)
{
    // This is called whenever the Prova property has been changed.
} 
```

如果您的“客户”`CustomCtrl`想要捕捉特定实例对该属性的更改，那么他们可以使用：

```
CustomCtrl instanceofsomecustomctrl = .......

DependencyPropertyDescriptor descr = 
                  DependencyPropertyDescriptor.FromProperty(CustomCtrl.ProvaProperty, typeof(CustomCtrl));

if (descr != null)
{
    descr.AddValueChanged(instanceofsomecustomctrl, delegate
        {
            // do something because property changed...
        });
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T11:30:42.057

我认为这就是您要寻找的，您想要一个 onChangeHandler 事件。

```
public partial class CustomCtrl : UserControl
{
public CustomCtrl()
{
    InitializeComponent();
}

public string Prova
{
    get { return (string)GetValue(ProvaProperty); }
    set 
    {
        SetValue(ProvaProperty, value); 
        OnPropertyChanged("Prova");
    }
}
protected void OnPropertyChanged(string prova)
    {
        PropertyChangedEventHandler handler = PropertyChanged;
        if (handler != null)
        {
            handler(this, new PropertyChangedEventArgs(prova));
        }
    }
 //This portion could go in the class where the event takes place
 private delegate void UpdateDelegate(DependencyProperty dp, Object value);

} 
```

# java - Java - 匹配两个无序列表

> ID：12798911
> 
> 赞同：4
> 
> 时间：2012-10-09T11:19:16.423
> 
> 标签：java, collections, matching

我有以下问题：我需要在两个无序的列表中找到相同元素对。关于这两个列表的事情是它们“大致相等” - 只有某些元素被移动了一些索引，例如（注意，这些对象不是整数，我在这个例子中只是使用整数）：

```
[1,2,3,5,4,8,6,7,10,9]
[1,2,3,4,5,6,7,8,9,10] 
```

我的第一次尝试是遍历这两个列表并根据每个对象的某个唯一键生成两个 HashMap。然后，在第二遍时，我会简单地从两个地图中提取元素。这产生`O(2N)`了空间和时间。

我正在考虑一种不同的方法：我们将在两个列表中保留指向当前元素的指针，以及为每个列表设置 currentUnmatched 。伪代码将是以下类型：

```
while(elements to process)
    elem1 = list1.get(index1)
    elem2 = list2.get(index2)
    if(elem1 == elem2){ //do work
         ... index1++; 
             index2++;
    }
    else{
        //Move index of the list that has no unamtched elems
        if(firstListUnmatched.size() ==0){
            //Didn't find it also in the other list so we save for later 
            if(secondListUnamtched.remove(elem1) != true)
                firstListUnmatched.insert(elem1)
            index1++
        }
        else { // same but with other index}
    } 
```

以上可能不起作用......我只是想大致了解您对这种方法的看法。基本上，这会在每个列表的一侧维护一个哈希集，其大小 << 问题大小。对于少量错位元素和小的“间隙”，这应该是~O(N)。无论如何，我期待着您的回复。

编辑：我不能简单地返回两个对象列表的集合交集，因为我需要对我发现匹配/不匹配的对象执行操作（甚至多个操作）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T11:30:46.723

> 我不能简单地返回两个对象列表的集合交集，因为我需要对我找到的匹配/不匹配的对象执行操作（甚至多个操作）

您可以维护一组不匹配的对象。这将是空间中的 O(M)，其中 M 是任意点交换元素的最大数量。时间为 O(N)，其中 N 是元素的数量。

```
interface Listener<T> {
    void matched(T t1);
    void onlyIn1(T t1);
    void onlyIn2(T t2);
}

public static <T> void compare(List<T> list1, List<T> list2, Listener<T> tListener) {
    Set<T> onlyIn1 = new HashSet<T>();
    Set<T> onlyIn2 = new HashSet<T>();
    for (int i = 0; i < list1.size(); i++) {
        T t1 = list1.get(i);
        T t2 = list2.get(i);
        if (t1.equals(t2)) {
            tListener.matched(t1);
            continue;
        }
        if (onlyIn2.remove(t1)) 
            tListener.matched(t1);
         else 
            onlyIn1.add(t1);
        if (!onlyIn1.remove(t2))
            onlyIn2.add(t2);
    }
    for (T t1 : onlyIn1)
        tListener.onlyIn1(t1);
    for (T t2 : onlyIn2)
        tListener.onlyIn2(t2);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T11:41:14.493

如果我正确理解了您的问题，您可以使用[Collection.retainAll](http://docs.oracle.com/javase/6/docs/api/java/util/Collection.html#retainAll%28java.util.Collection%29)然后遍历保留的集合并执行您必须做的事情。

```
list2.retainAll(list1); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-09T12:01:16.637

所有基于地图的方法充其量都是 O(n log(n))，因为创建地图是一种插入排序。效果是对两者进行插入排序，然后将它们进行比较，这将达到预期效果。

如果列表几乎开始排序，排序步骤不应该像平均情况一样长，并且将按 O(n log(n)) 进行缩放，所以只需对两者进行排序并进行比较。这使您可以单步执行并根据需要对匹配或不匹配的项目执行操作。

# jenkins - sonar not generating reports with jenkins

> ID：12798913
> 
> 赞同：1
> 
> 时间：2012-10-09T11:19:17.363
> 
> 标签：jenkins, sonarqube

I have jenkins installed and integrated with sonar but I get the following error during sonar analysis:

```
send-mail: error while loading shared libraries: libmysqlclient.so.16: cannot open     shared object file: No such file or directory
[workspace] $ mvn -f /root/.jenkins/jobs/test_4.9/workspace/pom.xml -e -B sonar:sonar -Dsonar.jdbc.driver=com.mysql.jdbc.Driver -Dsonar.jdbc.url=jdbc:mysql://xx.xx.xx.xx:3306/sonar?useUnicode=true&characterEncoding=utf8&rewriteBatchedStatements=true -Dsonar.host.url=http://xx.xx.xx.xx:8080/sonar
FATAL: command execution failed
java.io.IOException: Cannot run program "mvn" (in directory "/root/.jenkins/jobs/test/workspace"): error=2, No such file or directory
at java.lang.ProcessBuilder.start(ProcessBuilder.java:1029)
at hudson.Proc$LocalProc.<init>(Proc.java:244)
at hudson.Proc$LocalProc.<init>(Proc.java:216)
at hudson.Launcher$LocalLauncher.launch(Launcher.java:709)
at hudson.Launcher$ProcStarter.start(Launcher.java:338)
at hudson.Launcher$ProcStarter.join(Launcher.java:345)
at hudson.tasks.Maven.perform(Maven.java:263)
at hudson.plugins.sonar.utils.SonarMaven.executeMaven(SonarMaven.java:138)
at hudson.plugins.sonar.SonarPublisher.executeSonar(SonarPublisher.java:300)
at hudson.plugins.sonar.SonarPublisher.perform(SonarPublisher.java:261)
at hudson.tasks.BuildStepMonitor$3.perform(BuildStepMonitor.java:36)
at hudson.model.AbstractBuild$AbstractRunner.perform(AbstractBuild.java:710)
at hudson.model.AbstractBuild$AbstractRunner.performAllBuildSteps(AbstractBuild.java:685)
at hudson.model.Build$RunnerImpl.post2(Build.java:162)
at hudson.model.AbstractBuild$AbstractRunner.post(AbstractBuild.java:632)
at hudson.model.Run.run(Run.java:1463)
at hudson.model.FreeStyleBuild.run(FreeStyleBuild.java:46)
at hudson.model.ResourceController.execute(ResourceController.java:88)
at hudson.model.Executor.run(Executor.java:239)
Caused by: java.io.IOException: error=2, No such file or directory
at java.lang.UNIXProcess.forkAndExec(Native Method)
at java.lang.UNIXProcess.<init>(UNIXProcess.java:135)
at java.lang.ProcessImpl.start(ProcessImpl.java:130)
at java.lang.ProcessBuilder.start(ProcessBuilder.java:1021)
... 18 more
Sonar analysis completed: FAILURE
Build step 'Sonar' changed build result to FAILURE
Build step 'Sonar' marked build as failure 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T08:01:18.433

正确按照[URL](http://docs.codehaus.org/pages/viewpage.action?pageId=116359341)中的说明使声纳与 jenkins 一起工作。

# php - session_regenerate_id doesnt work together with sesion_destroy

> ID：12798914
> 
> 赞同：1
> 
> 时间：2012-10-09T11:19:19.777
> 
> 标签：php, session

I found session_regenerate_id will not work it together with session_destroy(), please see this one works

```
<?php
   session_start();
   $old='old is: '.session_id();
   session_regenerate_id(true);
   echo $old;
   echo '<br>';
   echo 'new is: '.session_id();     
?> 
```

this one failed, return 2 same session id numbers

```
<?php
   session_start();
   $old='old is: '.session_id();
   session_regenerate_id(true);
   session_destroy();
   session_unset();
   session_start();
   echo $old;
   echo '<br>';
   echo 'new is: '.session_id();     
?> 
```

I use php 5.3.3, the second one is a recommended method to produce a new session, but why it does not work on my side.

thanks everyone,after tests, I found session_destroy must be invoked before session_regenerate_id(), or session_regenerate_id never works.

```
<?php
session_start();
$_SESSION['abc']=12323;
$old='old is: '.session_id();
session_unset();
session_destroy();
session_start();
session_regenerate_id(true);
echo $old;
echo '<br>';
echo 'new is: '.session_id(); 
```

?>

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T11:27:54.377

地方

```
session_unset(); 
```

以上 session_destroy(); 或删除 session_unset(); 完全地。当您破坏会话时。

试试这个代码：

```
<?php
   session_start();
   $oldSessionId ='Old session ID is: ' . session_id() . '<br />';
   echo $oldSessionId;
   session_destroy();
   session_start();
   session_regenerate_id(true);
   echo 'New session ID is: ' . session_id();     
?> 
```

如果您愿意，还可以在 session_destroy() 之后添加以下代码

```
setcookie(session_name(),'',0,'/'); 
```

希望这可以帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T11:40:13.893

```
session_start();
$old='old is: '.session_id();
session_destroy();
session_start();
session_regenerate_id(true);
echo $old;
echo '<br>';
echo 'new is: '.session_id(); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-09T11:33:04.957

您应该首先销毁会话。尝试这个：

```
session_destroy();
session_unset();
setcookie(session_name(), null, 0, "/"); 
```

# java - 如何动态区分java代码中的memcahce实例？

> ID：12798915
> 
> 赞同：0
> 
> 时间：2012-10-09T11:19:19.613
> 
> 标签：java, design-patterns, memcached

**任何人都可以建议任何设计模式来动态区分 java 代码中的 memcahce 实例吗？**

以前在我的应用程序中只有一个以这种方式配置的 memcache 实例

## 第1步：

**dev.memcached.location=33.10.77.88:11211**

**dev.memcached.poolsize=5**

## 第2步：

然后我在代码中访问该内存缓存，如下所示，

```
private MemcachedInterface() throws IOException {

    String location =stringParam("memcached.location", "33.10.77.88:11211");

    MemcachedClientBuilder builder = new XMemcachedClientBuilder(AddrUtil.getAddresses(location));

} 
```

然后我使用上面的 MemcachedInterface() 在代码中调用该 memcache，如下所示，

## 第 3 步：

**MemcachedInterface.getSoleInstance();**

然后我使用该 MemcachedInterface() 来获取/设置数据，如下所示，

**MemcachedInterface.set(MEMCACHED_CUTS, "{}"); resp = MemcachedInterface.gets(MEMCACHED_CUTSS);**

我的问题是如果我在我们的架构中引入一个新的 memcache 实例，配置如下，

## 第1步：

**dev.memcached.location=33.10.77.89:11211 dev.memcached.poolsize=5**

因此，第一个 memcache 实例位于 33.10.77.88:11211 中，第二个 memcache 实例位于 33.10.77.89:11211 中

直到这没问题……但是……

这种情况下如何处理Step-2和Step-3，动态获取MemcachedInterface。

1）我是否应该在步骤 2 中再使用一个名为 MemcachedInterface2() 的接口

**现在真正的问题来了，**

我的应用程序中有 4 个网络服务器。以前都在写入 MemcachedInterface()，但现在我将介绍另外一个 memcache 实例，例如：MemcachedInterface2() ws1 和 ws2 应该写入 MemcachedInterface()，ws3 和 ws4 应该写入 ex :MemcachedInterface2()

所以，如果我使用上面提到的另一个名为 MemcachedInterface2() 的接口，

这是一个代码负担，因为我应该将所有使用 WS3 和 WS4 的类更改为 Ex:MemcachedInterface2() 。

**任何人都可以建议一种代码更改有限的方法吗？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T11:42:35.143

xmemcached 支持一致散列，这将允许您的客户端从池中选择正确的 memcached 服务器实例。您可以参考这个答案以获得更多详细信息[客户端是否需要担心多个内存缓存服务器？](https://stackoverflow.com/questions/11116293/do-client-need-to-worry-about-multiple-memcache-servers)

所以，如果我理解正确，你将不得不

1.  在所有 webapps 中只使用一个 memcached 客户端
2.  由于您在 memcached 客户端周围有自己的包装类`MemcachedInterface`，因此您必须向此接口添加一些方法，以便将服务器添加/删除到现有客户端。请参阅用户指南（向下滚动一点）：[https ://code.google.com/p/xmemcached/wiki/User_Guide#JMX_Support](https://code.google.com/p/xmemcached/wiki/User_Guide#JMX_Support)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T11:54:19.907

据我所知，您在不同的机器上运行重复的代码，就像并行 Web 服务一样。因此，我建议这样做以区分每个；

1.  使用 Singleton Facade 服务来包装你的 memcached 客户端。（我想你已经在这样做了）
2.  使用封装。封装您的 memcached 客户端以与您的代码分离。`interface L2Cache`
3.  对于每个服务器，在全局变量中为它们命名。通过 JVM 或您自己的配置文件通过 jar 或其他方式分配这些值。虚拟机：`--Dcom.projectname.servername=server-1`
4.  使用这个全局变量作为参数，配置你的 Service getInstance 方法。

> ```
> public static L2Cache getCache() { 
> if (System.getProperty("com.projectname.servername").equals("server-1"))
>    return new L2CacheImpl(SERVER_1_L2_REACHIBILITY_ADDRESSES, POOL_SIZE);
> } 
> ```

祝你的设计好运！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-25T22:49:54.130

您应该在配置中将所有 memcached 服务器实例以空格分隔。

例如 33.10.77.88:11211 33.10.77.89:11211

因此，在您的代码中（**Step2**）：

```
private MemcachedInterface() throws IOException 
{
    String location =stringParam("memcached.location", "33.10.77.88:11211 33.10.77.89:11211");
    MemcachedClientBuilder builder = new XMemcachedClientBuilder(AddrUtil.getAddresses(location));
} 
```

然后在第 3 步中，您无需更改任何内容...例如`MemcachedInterface.getSoleInstance();`.

You can read more in memcached tutorial article:

**Use Memcached for Java enterprise performance**, **Part 1**: Architecture and setup [http://www.javaworld.com/javaworld/jw-04-2012/120418-memcached-for-java-enterprise-performance.html](http://www.javaworld.com/javaworld/jw-04-2012/120418-memcached-for-java-enterprise-performance.html)

**Use Memcached for Java enterprise performance, Part 2**: Database-driven web apps [http://www.javaworld.com/javaworld/jw-05-2012/120515-memcached-for-java-enterprise-performance-2.html](http://www.javaworld.com/javaworld/jw-05-2012/120515-memcached-for-java-enterprise-performance-2.html)

# android - Android UI Crash due to kernel error

> ID：12798917
> 
> 赞同：1
> 
> 时间：2012-10-09T11:19:29.177
> 
> 标签：android

When I return error from linux system calls like `create`/`open` etc. in order to fail such operations from my App, complete Android UI crashes. When I investigated more I realized that root cause is the system_server crashing because of my errors from system call.

I tried using errors like EACCESS, EBADF etc but each of these seems to be considered as a fatal exception by Android!

Any idea on non-fatal error values which I can use such that it does not cause Android UI to crash?

# java - JAVA中二维数组的排序问题

> ID：12798926
> 
> 赞同：2
> 
> 时间：2012-10-09T11:20:27.493
> 
> 标签：java, arrays, multidimensional-array, sorting, comparator

使用以下代码，我尝试对二维数组进行排序

```
 int[][] d2 = {
           {4,5,1},
           {4,1,1},
           {1,7,1},
           {3,3,2},
           {1}
          };

        java.util.Arrays.sort(d2, new java.util.Comparator<int[]>() {
            public int compare(int[] a, int[] b) {
                return a[0] - b[0];
            }
        }); 
```

排序后显示数组

```
for (int r=0; r<d2.length; r++) {
            for (int c=0; c<d2[r].length; c++) {
                System.out.print(" " + d2[r][c]);
            }
            System.out.println("");
} 
```

我得到的结果是这样的

```
 1 7 1
 1
 3 3 2
 4 5 1
 4 1 1 
```

我希望结果两个像这样

```
 1
 1 7 1
 3 3 2
 4 5 1
 4 1 1 
```

要使数组像上面那样排序，需要做什么？

我尝试将 替换为`{1}`，`{1,0,0}`但即使对于`{1,0,1}`.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-09T11:24:54.723

比较`compare`方法中传递的数组的长度。如果长度`a[]`小于`b[]`，返回-1：-

```
 java.util.Arrays.sort(d2, new java.util.Comparator<int[]>() {
                public int compare(int[] a, int[] b) {
                    if (a.length != b.length) {
                        return a.length < b.length ? -1 : 1;
                    }
                    return a[0] - b[0];
                }
            }); 
```

如果您想通过检查每个元素进行排序，我认为您应该这样做。将您的`compare`方法更改为：-

```
public int compare(int[] a, int[] b) {

    if (a.length == b.length) {
        for (int i = 0; i < a.length; i++) {
            if (a[i] == b[i]) {

            } else {
                return a[i] - b[i];
            }
        }
        return 0;

    } else {
        return a.length < b.length ? -1 : 1;
    }                       
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T11:27:36.220

在您`Comperator`中，您只使用第一个字段来比较 2 个数组。您必须包含所有字段来比较它们，或者至少您必须检查数组的长度以获得所需的结果。

# .net - 将窗口绑定到父窗口的子集合

> ID：12798928
> 
> 赞同：0
> 
> 时间：2012-10-09T11:20:54.060
> 
> 标签：.net, wpf, mvvm

我在 WPF 中使用 MVVM 模型时遇到了问题。这是我的对象：

**意见**

*   MainWindow(View)（此视图的 DataContext 绑定到 MainWindowViewModel）

*   ItemViewWindow（DataContext 绑定了一个 ItemListViewModel）

**视图模型**

*   MainWindowViewModel（包含：ObservableCollection 项）

*   ItemListViewModel（包含：ObservableCollection Items、ItemViewModel SelectedItem、其他属性/命令）

通过 MainWindow 上的菜单按钮访问 ItemViewWindow。我希望能够只将 MainWindow 中的集合传递给 ItemView（注意：我不能将它设置为 DataContext，因为它需要一个 ItemListViewModel）。然后在那里所做的任何更改都应反映在 MainWindow 中。

我知道一种方法是将 ItemListViewModel 作为 MainWindowViewModel 的属性而不是 Collection，然后我可以将其作为 DataContext 传递，但在 MainWindowViewModel 中拥有 ItemListViewModel 的额外功能似乎是错误的。有没有更优雅的方法可以在不使用 UI 代码隐藏的情况下做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T11:28:13.977

为什么不呢：

a：使 ItemListViewModel 公开一个属性，您可以在该属性上分配集合，例如

```
class ItemListViewModel 
{
    public SomeCollectionType TheCollection { get; set; } // most likely you have INotifyPropertyChanged etc so probably more to it than get/set
} 
```

然后在 MainWindowViewModel 中实例化 ItemVM 时设置它

```
public void OpenItemList() 
{
    var itemList = new ItemListViewModel();
    itemList.TheCollection = CollectionFromThisVM;
    // etc
} 
```

或者...

b：使用类似`EventAggregator`模式的东西来发布一条消息，其中包含要订阅的 ItemListViewModel 的集合

第一种方法似乎更简单

# javascript - Pass 'this' object from javascript to android native

> ID：12798931
> 
> 赞同：2
> 
> 时间：2012-10-09T11:21:04.893
> 
> 标签：javascript, android, webview

I want to pass the 'this' parameter from javascript to the native layer in android.

```
function abc() {

    function callf() {
        // 'this' should refer to the instance of the 
        // abc object
        Native.call(this);
    }
 } 
```

This is to make it possible to call a function on the 'abc' instance from the native layer.

When I do pass an object, either using 'this' or just an object directly, it gives 'null'.

Does anyone know how to solve this?

Thanks,
Rajath

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T22:04:03.723

当我需要做这样的事情时，我会使用这样的基板层：

**javascript**

```
(function() {

  var callbacks = {};

  function getNewId() {
    return Math.round(Math.random() * 999999999);
  }

  window.__withCallback = function(func, context, callback, params) {

    var cbId = getNewId(),
        args = Array.prototype.slice.call(arguments, 2);

    while (cbId in callbacks) {
      cbId = getNewId();
    }

    args.unshift(cbId);
    callbacks[cbId] = { context: context, callback: callback };

    func.apply(Native, args);

  };

  window.__callbackFromNative = function(id, params) {

    var args,
        cbItem = callbacks[id];    

    if (cbItem && typeof(cbItem.callback) === 'function') {
      args = Array.prototype.slice.call(arguments, 1);
      cbItem.callback.apply(cbItem.context, args);
    }

    delete callbacks[id];
  };

}()); 
```

所以现在当你有 Java 代码时（假设你暴露了与“Native”相同的对象）：

**爪哇**

```
class Native {
    public void test (long callbackId, String param1, String param2) {

        // do java stuff in here
        // webView is your webView
        webView.loadUrl("javascript:__callbackFromNative(" + callbackId + ", 'yay', 69)");

    }
} 
```

并像这样使用它：

**javascript**

```
var awesome = {

  test2: function(arg1, arg2) {
    // callback
  },

  startTest: function() {
    // here's the way you pass "this" to "Native.test", 
    // this.test2 is the function you want to "callback" to
    // the rest are all params 
    __withCallback(Native.test, this, this.test2, "xxx", 'yay');
  }
};

awesome.startTest(); 
```

底层现在是可重用和标准的，所以你不必担心设置全局变量或任何类似的疯狂，而且它可以在本地层内外使用任意数量的参数......

希望这会有所帮助-ck

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T11:44:50.603

请注意，您的示例正在传递`this`of `callf`。您必须将`abc`'s传递`this`给`callf`：

```
function abc() {
    function callf() {
        Native.call(this);
    }
    // ...
    callf.call(this);
    // ...
} 
```

或[关闭](http://en.wikipedia.org/wiki/Closure_(computer_science))：

```
function abc() {
    var that = this;
    function callf() {
        Native.call(that);
    }
    // ...
    callf();
    // ...
} 
```

编辑：

您仍然受限于可以传递给 Java 的值类型，请参阅[这个问题](https://stackoverflow.com/questions/2250917/passing-a-javascript-object-using-addjavascriptinterface-on-android)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-12T06:41:08.733

假设 Native 被映射为具有方法“调用”的命名 java 对象，您使用 addJavascriptInterface() 绑定到 Web 视图（请参阅相关的[https://stackoverflow.com/a/12832132/1367983](https://stackoverflow.com/a/12832132/1367983)），我认为您应该跳过尝试调用 webview 之外的 javascript 绑定对象上的任何操作，并使用动态生成的 javascript url 生成要在其上运行的逻辑，然后可以使用 webview 的 loadUrl() 方法执行。

```
in js of html content rendered by webview:

var myVar;

...

myVar = this;
Native.call('myVar');
...

in javascript interface class Native's implementation of call()

webView.loadUrl("javascript:myVar.doSomething('" + stringFromApp1 + "', " + numberFromApp1 + ");"); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-18T14:23:53.773

这是一个长镜头，但您可以将“this”对象字符串化并将其用作 Java 中的 JSON 对象

在 JavaScript 中

```
function abc() {

  function callf() {
    // 'this' should refer to the instance of the 
    // abc object
    Native.call(JSON.stringify(this));
  }
} 
```

在爪哇

```
 class Native {
    public void call (String object)
    {
        try {
            JSONObject thisObject = new JSONObject(object);
            // do whatever you want to the thisObject
        } catch (JSONException e) {
            e.printStackTrace();
        }

    }
} 
```

我不记得当您收到对象时是否会对其进行编码。如果是，您可以使用：

```
URLDecoder.decode(object, "UTF-8") 
```

# cakephp - Cakephp 唯一查看次数

> ID：12798938
> 
> 赞同：2
> 
> 时间：2012-10-09T11:21:30.373
> 
> 标签：cakephp, count, cakephp-2.0, unique

我试图让我的视图只计算唯一访问者。

在我的 Cakephp 2.x 项目控制器中，我有以下内容：

```
function view($slug = null) {
    [...]
    $this->Item->updateAll(
        array('Item.hits'=>'Item.hits+1'),
        array('Item.slug'=>$slug)
    );
} 
```

这将 +1 添加到命中列并且工作正常。缺陷是，多次单击视图会增加计数。

知道如何进行唯一计数吗？

提前致谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-09T11:51:39.760

快速解决方案

```
[...]
if($this->Session->check('has_read_item.' . $slug) === false) {
    $this->Item->updateAll(array('Item.hits'=>'Item.hits+1'),array('Item.slug'=>$slug));
    $this->Session->write('has_read_item.' . $slug, true);
}
[...] 
```

这会根据 slug 为查看的每个项目设置一个唯一的会话。

如果会话不存在，说明用户还没有查看文章，所以增加点击然后设置会话。

如果会话已经存在；不要再次更新它。

* * *

这意味着一个用户不能在任何一个会话中增加每个项目的点击次数超过一次，这与您在几行代码中获得的效果差不多。

任何更准确的事情都需要付出很多努力，而且很可能不值得。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-27T13:22:02.893

CakePHP Counter Helper：显示访问者统计信息的 CakePHP 助手

[http://www.phpclasses.org/package/7391-PHP-CakePHP-helper-to-display-visitor-statistics.html](http://www.phpclasses.org/package/7391-PHP-CakePHP-helper-to-display-visitor-statistics.html)

这是 CakePHP Counter Helper 的手动安装

下载包后，将其解压缩到任何地方。

1.  首先，转到您的 PHP MyAdmin -> 您的数据库导入“init.sql”文件为助手创建表。
2.  将“model\counter.php”复制到您的模型目录中。
3.  将文件夹“counter”复制到“webroot/img/”=>这是图像文件。
4.  将主文件“counter.php”复制到“app/view/helpers/”目录中。

全部做完。

用法请阅读example.php

# ios - 我可以得到 JSON 响应而不是 xml 吗？在 ASIs3bucketRequest

> ID：12798945
> 
> 赞同：1
> 
> 时间：2012-10-09T11:21:50.777
> 
> 标签：ios, amazon-s3, asihttprequest

我正在使用以下代码获取 s3-bucket 中的项目列表：

```
ASIS3BucketRequest *request = [ASIS3BucketRequest requestWithBucket:@"my-bucket"];
NSString *key = kS3SecretKey;
[request setSecretAccessKey:key];
key = kS3AccessKey;
[request setAccessKey:key];
[request setMaxResultCount:50]; // Max number of results we want
[request setDelegate:self];
[request setDidFailSelector:@selector(requestContentListFromBuckeFailed:)];
[request setDidFinishSelector:@selector(requestContentListFromBuckeSuccessfull:)];
[request startAsynchronous]; 
```

**当我收到响应并记录它时。它是xml的形式**

```
-(void) requestContentListFromBuckeSuccessfull: (id) request
{
    NSString *response = [[NSString alloc] initWithData:[request responseData] encoding:NSUTF8StringEncoding];
    NSLog(@"response=%@",response);

} 
```

**我的问题是我可以将请求设置为接收 JSON 响应吗？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T12:07:15.500

不

您无法在 json 中获得 s3 响应。Amazon S3 不支持 json 响应。为此，您必须在目标 C 代码中使用 xml 解析器。

# c# - Rijndael：多台机器上的相同输入/不同输出

> ID：12798947
> 
> 赞同：2
> 
> 时间：2012-10-09T11:21:54.527
> 
> 标签：c#, rijndael

我编写的一些软件使用 .Net4.0 中的 Rijndael 算法来加密和解密许可证信息。

问题如下：程序生成一个字符串，转换成一个byte[]。然后用 Rijndael 将这个 byte[] 加密为另一个 byte[]，然后将其传输到其他计算机。在那里，这个加密的 byte[] 再次被解密，得到的 byte[] 再次转换回字符串以从中检索信息。

基本上这工作得很好......但我猜不是那么完美。

我们办公室里有一台计算机似乎以不同的方式加密和解密。

如果我尝试在另一台计算机上解密 byte[]，它会给我类似的东西：

```
{"Zeichenabstände sind ungültig und können nicht entfernt werden."}
 bei System.Security.Cryptography.RijndaelManagedTransform.DecryptData(Byte[] inputBuffer, Int32 inputOffset, Int32 inputCount, Byte[]& outputBuffer, Int32 outputOffset, PaddingMode paddingMode, Boolean fLast)
 bei System.Security.Cryptography.RijndaelManagedTransform.TransformFinalBlock(Byte[] inputBuffer, Int32 inputOffset, Int32 inputCount)
 bei System.Security.Cryptography.CryptoStream.FlushFinalBlock()
 bei System.Security.Cryptography.CryptoStream.Dispose(Boolean disposing)
 bei System.IO.Stream.Close() 
```

进行加密的代码如下所示：

```
private byte[] EncryptBytes(byte[] originalBytes) {
    MemoryStream ms = new MemoryStream();
    Rijndael crypt = Rijndael.Create();
    crypt.Key = KeyBytes;
    crypt.IV = IVBytes;
    CryptoStream cs = new CryptoStream(ms, crypt.CreateEncryptor(), CryptoStreamMode.Write);
    cs.Write(originalBytes, 0, originalBytes.Length);
    cs.Close();
    Byte[] cryptedBytes = ms.ToArray();
    ms.Close();
    return cryptedBytes;
} 
```

对于解密，它是相同的，只是使用 CreateDecryptor() 而不是 CreateEncryptor()。

为了测试和解决问题，我做了以下事情：

在两台计算机上，我都加密了完全相同的字符串。我检查了这个字符串在两台机器上都被转换成完全相同的字节[]。Rijndael 对象在两台机器上具有相同的属性值，因此其配置方式相同（键、IV、填充等）

之后加密的 byte[] 输出在两台机器上完全不同。

这就是我卡住的地方。我想不出这种行为的原因，互联网也无法帮助我。两台计算机都运行带有 .Net4.0 的 Windows XP x86

我非常感谢任何提示，并提前感谢您，mls

有趣的事实：它在 12 台不同的计算机上运行良好，13 号机器在乱跑:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T11:42:32.507

消息的意思

```
Padding is invalid and cannot be removed 
```

我猜测被加密的实际数据是不同的。如果*应该*相同，则差异可能在于编码。我认为系统默认编码可能会有所不同，系统区域设置（System.Globalization.Culture 和 CurrentCulture）也会有所不同。

无论如何，在其中一种情况下，填充不正确。Rijndael 输入需要填充到特定大小才能支持加密。您应该查看 Rijndael crypt 的文档。

很有可能，您可以使用一个标志来*自动*对输入进行默认填充（解密时请注意这一点，因为您将获得源 + 填充，而不仅仅是源）

# objective-c - iOS - 以编程方式安装 SSL 证书

> ID：12798950
> 
> 赞同：22
> 
> 时间：2012-10-09T11:22:01.887
> 
> 标签：objective-c, ios, cordova, ssl, certificate

我正在编写一个 phonegap 插件，它在应用程序钥匙串中安装 CA 根证书和用户证书。

这是用于安装证书的代码：

```
NSData *PKCS12Data = [[NSData alloc] initWithContentsOfFile:certpath];
CFDataRef inPKCS12Data = (CFDataRef)PKCS12Data;
CFStringRef password = (CFStringRef)certPassword;
const void *keys[] = { kSecImportExportPassphrase };
const void *values[] = { password };
CFDictionaryRef optionsDictionary = CFDictionaryCreate(NULL, keys, values, 1, NULL, NULL);
CFArrayRef items = CFArrayCreate(NULL, 0, 0, NULL);
OSStatus securityError = SecPKCS12Import(inPKCS12Data, optionsDictionary, &items);
if (securityError == 0) {
    NSLog(@" *** Certificate install Success ***");
} else {
    NSLog(@" *** Certificate install Failure ***");
} 
```

上面的代码工作正常（securityError 等于 0）。但是，我收到了这些错误：

```
unknown apsd[59] <Warning>: <APSCourier: 0xee1ba80>: Stream error occurred for <APSTCPStream: 0x126940>: TLS Error Code=-9844 "peer dropped connection before responding"
unknown securityd[638] <Error>: CFReadStream domain: 12 error: 8 
```

这表明设备不接受安装的证书，所以我想知道证书没有针对设备上安装的 CA Root 证书进行验证。

我必须为应用程序安装 CA Root 证书吗？

有任何想法吗 ？

PS：我是 Objective-C 和 XCode 环境的新手。

***编辑：***

下面的代码用于在 keychain 中存储 CA 根证书：

```
NSString *rootCertPath = [[NSBundle mainBundle] pathForResource:@"rootca" ofType:@"cer"];
NSData *rootCertData = [NSData dataWithContentsOfFile:rootCertPath];

OSStatus err = noErr;
SecCertificateRef rootCert = SecCertificateCreateWithData(kCFAllocatorDefault, (CFDataRef) rootCertData);

CFTypeRef result;

NSDictionary* dict = [NSDictionary dictionaryWithObjectsAndKeys:
(id)kSecClassCertificate, kSecClass,
rootCert, kSecValueRef,
nil];

err = SecItemAdd((CFDictionaryRef)dict, &result);

if( err == noErr) {
    NSLog(@"Install root certificate success");
} else if( err == errSecDuplicateItem ) {
    NSLog(@"duplicate root certificate entry");
} else {
    NSLog(@"install root certificate failure");
} 
```

**编辑**：

似乎证书没有发送到服务器。我认为每次发出 https 请求时我都必须手动发送证书......我正在寻找一种方法来捕捉 phonegap 中的每个 https 调用。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-03-02T13:12:58.230

将证书导入钥匙串是不够的。新的根证书也已被用户或系统信任。

假设您仍然有`SecCertificateRef`变量`certificate`，请使用以下代码来提高信任级别：

```
NSDictionary *newTrustSettings = @{(id)kSecTrustSettingsResult: [NSNumber numberWithInt:kSecTrustSettingsResultTrustRoot]};
status = SecTrustSettingsSetTrustSettings(certificate, kSecTrustSettingsDomainUser, (__bridge CFTypeRef)(newTrustSettings));
if (status != errSecSuccess) {
    NSLog(@"Could not change the trust setting for a certificate. Error: %d", status);
    exit(0);
} 
```

更改信任级别将在弹出窗口中询问用户是否接受更改。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-09-06T10:21:07.883

> 斯威夫特 4.0

```
let rootCertPath = Bundle.main.path(forResource: "XXXXX", ofType: "der")
    let rootCertData = NSData(contentsOfFile: rootCertPath!)
    var err: OSStatus = noErr
    let rootCert = SecCertificateCreateWithData(kCFAllocatorDefault, rootCertData!)

    //var result: CFTypeRef1
    let dict = NSDictionary.init(objects: [kSecClassCertificate, rootCert!], forKeys: [kSecClass as! NSCopying, kSecValueRef as! NSCopying])

    err = SecItemAdd(dict, nil)

    if(err == noErr) {
        NSLog("Install root certificate success");
    } else if( err == errSecDuplicateItem ) {
        NSLog("duplicate root certificate entry");
    } else {
        NSLog("install root certificate failure");
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-06-24T11:17:44.147

我一直在寻找，为系统钥匙串证书设置“始终信任”，

```
// Trust always, as root certificated.
    NSDictionary *newTrustSettings = @{(id)kSecTrustSettingsResult: [NSNumber numberWithInt:kSecTrustSettingsResultTrustRoot]};
    status = SecTrustSettingsSetTrustSettings(myCertificate, kSecTrustSettingsDomainAdmin, (__bridge CFTypeRef)(newTrustSettings)); 
```

# java - 如何使用 HttpURLConnection 将序列化对象从 Java 类发送到 Servlet？

> ID：12798954
> 
> 赞同：8
> 
> 时间：2012-10-09T11:22:13.653
> 
> 标签：java, servlets, serialization, httpurlconnection

我想将 Java 类中的序列化对象发送到 servlet，servlet 应该在其中检索对象并将其保存为文件。我知道我必须使用 HttpURLConnection 向 servlet 发出 POST 请求，但我不知道下面的代码是否正确。

```
private static HttpURLConnection urlCon;
private static ObjectOutputStream out;

public static void main(String[] args) {

    Names names = new Names();
    names.setName("ABC");
    names.setPlace("Bangalore");
    URL url;
    try {
        url = new URL("http://localhost:6080/HttpClientSerializable/HttpPostServlet");
    try {
        out = (ObjectOutputStream) urlCon.getOutputStream();
        out.writeObject(names);
        urlCon = (HttpURLConnection) url.openConnection();
        urlCon.setRequestMethod("POST");
        urlCon.setDoOutput(true);
        out.close();
        } catch (IOException e) {
            e.printStackTrace();
        }

        } catch (MalformedURLException e1) {
            e1.printStackTrace();
        }
} 
```

在 servlet 中，我有以下代码：

```
protected void doPost(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
        ObjectInputStream in = new ObjectInputStream(request.getInputStream());
        try {
            names = (Names) in.readObject();

        } catch (ClassNotFoundException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
        in.close();
        ObjectOutputStream out = new ObjectOutputStream(new FileOutputStream("C:/Documents and Settings/RAGASTH/Desktop/Names"));
        out.writeObject(names);
        out.close();

    } 
```

我应该怎么做才能让它工作？另外，我希望 servlet 将它接收到的对象作为响应发回。

任何帮助，将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-09T11:26:54.940

你需要

*   确保`Names`该类实现了`java.io.Serializable`标记接口。
*   从 servlet 的输出流创建一个 ObjectOutputStream，如下所示：

    ```
    out = new ObjectOutputStream(urlCon.getOutputStream()); 
    ```

*   在接收端，一旦你从 servlet 的输入流中读取对象并保存在文件中，就将它写回响应的输出流，如下所示：

    ```
    out = new ObjectOutputStream(response.getOutputStream());
    out.writeObject(names);
    out.close(); 
    ```

在发件人方面：

```
Names names = new Names();
names.setName("ABC");
names.setPlace("Bangalore");
URL url;
try {
    url = new URL("http://localhost:6080/HttpClientSerializable/HttpPostServlet");
    urlCon = (HttpURLConnection) url.openConnection();

    urlCon.setDoOutput(true); // to be able to write.
    urlCon.setDoInput(true); // to be able to read.

    out = new ObjectOutputStream(urlCon.getOutputStream());
    out.writeObject(names);
    out.close();

    ObjectInputStream ois = new ObjectInputStream(urlCon.getInputStream());
    names = (Names) ois.readObject();
    ois.close();
} catch (IOException e) {
    e.printStackTrace();
}
catch (MalformedURLException e1) {
    e1.printStackTrace();
} 
```

在接收方：

```
ObjectInputStream in = new ObjectInputStream(request.getInputStream());
try {
    names = (Names) in.readObject();
} catch (ClassNotFoundException e) {
    e.printStackTrace();
}
in.close();
ObjectOutputStream out = new ObjectOutputStream(
    new FileOutputStream("C:/Documents and Settings/RAGASTH/Desktop/Names"));
out.writeObject(names);
out.close();

ObjectOutputStream oos = new ObjectOutputStream(response.getOutputStream());
oos.writeObject(names);
oos.close(); 
```

# c# - 使用 .net 服务应用程序的用户中的注册表项

> ID：12798956
> 
> 赞同：0
> 
> 时间：2012-10-09T11:22:15.587
> 
> 标签：c#, service

我试图在基于 c# 服务的应用程序中添加一些注册密钥，但它不起作用，它没有给我任何期望，也没有在注册中创建密钥。

```
Microsoft.Win32.RegistryKey key;
key = Microsoft.Win32.Registry.CurrentUser.CreateSubKey("Settings");
key.SetValue("version", "0.0.0.1");
key.Close(); 
```

该服务作为系统运行。

# jquery - 选择/取消选择在 ie-7 中不起作用的复选框

> ID：12798958
> 
> 赞同：0
> 
> 时间：2012-10-09T11:22:23.527
> 
> 标签：jquery

我在所有电子邮件和复选框之前都有一个列表。在底部，我有一个“全选”按钮，用于选择所有电子邮件复选框。它适用于 mozilla 和 ie-8，但对于 ie-7，它只能选择第一个复选框。

我使用的代码是

```
$('#selectAllEmail').click (function () {                   
  $('#checkBoxTable tbody tr ').find(':checkbox').each(function () {
      $(this).click();
  });
}); 
```

其中“selectAllEmail”是全选/取消全选按钮的 ID。请帮忙。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T11:24:09.097

尝试这个，

```
$('#selectAllEmail').click (function () {                   
  $('#checkBoxTable tbody tr ').find(':checkbox').each(function () {
      this.checked = !(this.checked);
  });
}); 
```

# javascript - Javascript 亵渎匹配不替换

> ID：12798961
> 
> 赞同：0
> 
> 时间：2012-10-09T11:22:30.510
> 
> 标签：javascript, profanity

我正在构建一个非常基本的亵渎过滤器，我只想将其应用于**服务器端**应用程序（fullName、userDescription）的**某些字段**。

 **有没有人有在生产中使用亵渎过滤器的经验？我只希望它：

```
'ass hello' <- match
'asster' <- NOT match 
```

下面是我当前的代码，但由于某种原因它**连续**返回 true 和 false 。

```
var badWords = [ 'ass', 'whore', 'slut' ]
  , check = new Regexp(badWords.join('|'), 'gi');

function filterString(string) {
  return check.test(string);
}

filterString('ass'); // Returns true / false in succession. 
```

如何修复这个“连续”错误？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-09T11:57:18.253

该[`test`方法](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/RegExp/test)将正则表达式的[`lastIndex`属性](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/RegExp/lastIndex)设置为当前匹配的位置，以便进一步的调用将匹配更多的事件（如果有的话）。

```
check.lastIndex // 0 (init)
filterString('ass'); // true
check.lastIndex // 3
filterString('ass'); // false
check.lastIndex // now 0 again 
```

`filterString`因此，如果您不每次都重新创建 RegExp ，则需要在函数中手动重置它：

```
function filterString(string) {
    check.lastIndex = 0;
    return check.test(string);
} 
```

顺便说一句，要仅匹配完整的单词（例如“ass”，而不是“assster”），您应该将匹配项包装在 WTK 建议的单词边界中，即

```
var check = new Regexp("\\b(?:"+badWords.join('|')+")\\b", 'gi'); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-09T11:25:20.777

您正在通过子字符串比较进行匹配。您的正则表达式需要修改以匹配整个单词

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-09T11:44:35.407

使用固定的正则表达式怎么样：

```
check = new Regexp('(^|\b)'+badWords.join('|')+'($|\b)', 'gi');

check.test('ass') // true
check.test('suckass') // false
check.test('mass of whore') // true
check.test('massive') // false
check.test('slut is massive') // true 
```

我在`\b`这里使用 match 来匹配单词边界（以及整个字符串的开头或结尾）。**

# tomcat - 配置 Tomcat 以检查 CRL 分发点

> ID：12798966
> 
> 赞同：1
> 
> 时间：2012-10-09T11:22:41.230
> 
> 标签：tomcat, ssl, openssl, ssl-certificate, client-certificates

我正在编写一个 webapp，它需要传入连接才能使用客户端证书来确保安全。我已将其设置为仅接受安全连接，并使用 clientAuth=true。

我一直在尝试检查它是否拒绝已被吊销的证书，但它似乎没有检查 CRL。这是我第一次真正尝试使用 CRL，所以有可能/很可能我做错了什么......

测试设置：

1.  在 openssl 中创建了测试 CA，它已添加到服务器的信任库中
2.  为 CA 创建 CRL，并将配置设置添加到 openssl 以在客户端证书中包含 crl 分发点（使用 [如何使用包含 CRL 分发点的 openssl 创建证书？](https://stackoverflow.com/questions/11966123/howto-create-a-certificate-using-openssl-including-a-crl-distribution-point)）
3.  使用 CA 创建了两个客户端证书
4.  撤销了其中一个客户端证书，更新了 crl 并将其放置在指定为分发点的地址中（此后检查了此 CRL 的内容，它确实将证书的 ID 列为已撤销）

设置完成后，我尝试使用这两个证书建立与应用程序的连接，但是即使其中一个被撤销，它也可以让两者成功连接？

我在 Tomcat 中是否遗漏了一个设置，使它在收到客户端证书时检查 CRL 分发点？我会认为这将是默认行为。

我发现了对设置的各种引用，这些设置允许您将 crl 位置嵌入到 tomcat 中的连接器中——这不是我想要的。该系统最终将被配置为接受来自多个不同 CA 的证书。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-09T11:41:12.223

假设您使用的是 Oracle/OpenJDK JRE，如果您在[认证路径 API 指南（附录 B）](http://docs.oracle.com/javase/7/docs/technotes/guides/security/certpath/CertPathProgGuide.html#AppB)的底部向下滚动，您会发现可以使用`com.sun.security.enableCRLDP`系统属性启用 CRLDP：

> 支持 CRL 分发点扩展。出于兼容性考虑，默认情况下禁用它，可以通过将系统属性设置`com.sun.security.enableCRLDP`为 value来启用它`true`。

您可能还对以下关于 OCSP 的部分感兴趣。

# java - Java不止一种utf-8

> ID：12798970
> 
> 赞同：0
> 
> 时间：2012-10-09T11:22:51.870
> 
> 标签：java, parsing, encoding, utf

我对编码有一种奇怪的问题。我正在编写一个读取和写入文件的java程序。读写都设置为uft-8，看起来效果不错。当我在记事本++中打开文件并选择“编码”时，它将被设置为“utf-8”，因为它应该。问题是，如果我选择“转换为 utf-8”选项（在记事本 ++ 中），我的文档将被标记为脏，并且切换到十六进制并在 diff 中查看两者会显示出差异。真正的问题是无法正确解析第二个版本。以双斜杠开头的行（应该是注释并被解析器忽略）被解释为“？//”。有谁知道是什么原因造成的以及如何解决？怎么会有不止一种 utf-8？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T13:17:28.870

老实说，我不明白为什么 Java UTF-8 解码器不会透明地忽略任何初始 BOM，但不幸的是它没有。

该行为在大约十年前被报告为错误，但 Sun 决定不修复它，因为修复可能会破坏现有的解决方法：[错误 4508058](http://bugs.sun.com/view_bug.do?bug_id=4508058)

一种可能的解决方法是使用 PushbackReade，查看第一个字符，如果它是 BOM，则将其丢弃：

```
FileInputStream fis = new FileInputStream("...");
InputStreamReader isr = new InputStreamReader(fis, "UTF-8");
PushbackReader pr = new PushbackReader(isr);
int c = pr.read();
if(c != 0xFEFF) {
    // not a BOM
    pr.unread(c);
}

// use pr as your reader 
```

# html - Magento 更改语言选择器

> ID：12798973
> 
> 赞同：1
> 
> 时间：2012-10-09T11:23:08.940
> 
> 标签：html, magento, select, php

在我的项目中，我必须以两种语言显示网上商店。默认情况下，您可以选择具有以下代码的语言：

app/design/frontend/base/default/template/page/switch/language.phtml

```
<?php if(count($this->getStores())>1): ?>
<div class="form-language">
<label for="select-language"><?php echo $this->__('Your Language:') ?></label>
<select id="select-language" title="<?php echo $this->__('Your Language') ?>" onchange="window.location.href=this.value">
<?php foreach ($this->getStores() as $_lang): ?>
    <?php $_selected = ($_lang->getId() == $this->getCurrentStoreId()) ? ' selected="selected"' : '' ?>
    <option value="<?php echo $_lang->getCurrentUrl() ?>"<?php echo $_selected ?>><?php      echo $this->htmlEscape($_lang->getName()) ?></option>
<?php endforeach; ?>
</select>
</div>
<?php endif; ?> 
```

这当然会显示一个选择框，其中的选项是所有语言。

但是，我想更改它以使其成为单独的链接。我真的不知道该怎么做。

这就是我现在所拥有的。

```
<?php if(count($this->getStores())>1): ?>
<div class="form-language">
<?php foreach ($this->getStores() as $_lang):?>
    <a href="" title=""><?php echo $this->htmlEscape($_lang->getName()) ?></a>
<?php endforeach;?>
</div>
<?php endif; ?> 
```

PS：我没有在默认的magento代码中改变这个。我在 app/design/frontend/default/projectname/template/page/switch/language.phtml 工作。

所以我设法用这段代码自己完成了这个工作：

```
<?php if(count($this->getStores())>1): ?>
<div class="form-language">
<?php foreach ($this->getStores() as $_lang):?>
    <a href="<?php echo Mage::getUrl() . '?___store=' . $_lang->getId()?>" title=""><?php echo $this->htmlEscape($_lang->getName()) ?></a>
<?php endforeach;?>
</div>
<?php endif; ?> 
```

但是现在当我切换语言时。它重定向到主页。我发现我应该使用：

```
$_lang->getCurrentUrl() 
```

但我不知道把它放在我的代码中的什么地方。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-09T12:02:21.543

您非常接近，您只需要包含 URL！

```
<?php if(count($this->getStores())>1): ?>
<div class="form-language">
<?php foreach ($this->getStores() as $_lang):?>
    <a href="<?php echo $_lang->getCurrentUrl() ?>" title="<?php echo $this->htmlEscape($_lang->getName()) ?>"><?php echo $this->htmlEscape($_lang->getName()) ?></a>
<?php endforeach;?>
</div>
<?php endif; ?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T12:02:27.970

与社区相比，这在企业版中似乎有所不同。这就是 Magento Enterprise v1.12 中的代码。也许它是有用的，或者它也可以工作。

```
<?php if(count($this->getStores())>1): ?>
<div class="switch switcher-language">
    <label><?php echo $this->__('Language') ?>:</label>
    <div class="switch-wrapper" id="languageSelect">
        <strong class="current language-<?php echo $this->htmlEscape(Mage::app()->getStore()->getCode()) ?>">
            <?php echo $this->htmlEscape(Mage::app()->getStore()->getName()) ?>
        </strong>
        <span class="switcher-holder">(<span onclick="popUpMenu(this);" class="switcher"><?php echo $this->__('Change')?></span>)</span>
        <ul style="display:none" id="popId-languageSelect">
            <li class="current language-<?php echo $this->htmlEscape(Mage::app()->getStore()->getCode()) ?>">
                <span><?php echo $this->htmlEscape(Mage::app()->getStore()->getName()) ?></span>
            </li>   
            <?php foreach ($this->getStores() as $_lang): ?>
                <?php if($_lang->getId()!=$this->getCurrentStoreId()): ?>
                    <li class="language-<?php echo $this->htmlEscape($_lang->getCode()); ?>">
                        <a href="<?php echo $_lang->getCurrentUrl() ?>"><?php echo $this->htmlEscape($_lang->getName()) ?></a>
                    </li>
                <?php endif; ?>
            <?php endforeach; ?>
        </ul>
    </div>
</div>
<?php endif; ?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-09T12:32:58.920

试试这个代码。我在 EE 1.12 中进行了测试。

```
<?php if(count($this->getStores())>1): ?>
    <ul>
    <?php foreach ($this->getStores() as $_lang): ?>
      <?php if($_lang->getId()!=$this->getCurrentStoreId()): ?>
        <li class="language-<?php echo $this->htmlEscape($_lang->getCode()); ?>">
        <a href="<?php echo $_lang->getCurrentUrl() ?>"><?php echo $this->htmlEscape($_lang->getName()) ?></a>
        </li>
      <?php endif; ?>
     <?php endforeach; ?>
    </ul>
    <?php endif; ?> 
```

# c# - 如何将 LINQ 查询结果分配给自定义集合并转换列表 到 T[]

> ID：12798974
> 
> 赞同：0
> 
> 时间：2012-10-09T11:23:11.760
> 
> 标签：c#, arrays, linq, loops, collections

这是一个简单的问题，但我真的不知道如何有效地做到这一点。有什么方法可以有效地将值列表转换为数组，例如直接转换`List<int>`为`int[]`OR而不使用循环，最好使用 Linq？`List<CustomObj>``CustomObj[]`

另外，我有一个`GenericCollection<T>`，我怎样才能将 Linq 查询`GenericCollection<T>`直接转换为不循环，例如

```
GenericCollection<T> result = SomeGenericCollection.Select(o => o).ToList<GenericCollection<T>>(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T11:24:36.773

尝试使用 Linqs`.ToArray()`方法

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-09T11:24:41.227

呃，如何使用[`ToArray()`](http://msdn.microsoft.com/en-us/library/x303t819.aspx#Y0)扩展方法。

```
var intList = new List<int> { 1, 2, 3 };
int[] intArray = intList.ToArray(); 
```

* * *

在回答扩展问题时，如果`GenericCollection<T>`implements`IEnumerable<T>`并且您有一个返回`IEnumerable<IEnumerable<T>>`类似或协变类型的查询， `IList<GenericCollection<T>>`您可以这样做，

```
IEnumerable<T> flat = SomeGenericCollectionCollection<T>.SelectMany(o => o) 
```

症结在于它`o`本身`IEnumerable<T>`。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-09T11:24:44.167

您只需使用`ToArray()`扩展方法即可。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-09T11:25:35.800

就这样做，在 List 上使用 ToArray：

```
List<string> l = new List<string> { "one", "two", "three", "four", "five" };

string[] s = l.ToArray(); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-09T11:25:52.150

```
List<int> l = ...
int [] s = l.ToArray() 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-10-09T11:26:01.577

您可以使用[**ToArray()**](http://msdn.microsoft.com/en-us/library/x303t819.aspx) linq 方法来完成。

```
List<int> lst = new List<int>();
int arr[] = lst.ToArray(); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-10-09T11:35:54.860

[`GenericCollection<T>`](http://msdn.microsoft.com/en-us/library/ee581741.aspx)实现`IEnumerable<T>`，因此[`ToArray()`](http://msdn.microsoft.com/en-us/library/bb298736.aspx)扩展方法应该适合您。

如果没有，请尝试以下操作：

```
using System.Linq;

GenericCollection<T> gc = ...
T[] arr = ((IEnumerable<T>)gc).ToArray(); 
```

或者

```
T[] arr = new List<T>(gc).ToArray(); 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-10-09T11:42:53.790

对于您问题的第一部分，请`ToArray()`按照其他答案查看方法：

*   `List<T>.ToArray()`：http: [//msdn.microsoft.com/en-us/library/x303t819.aspx](http://msdn.microsoft.com/en-us/library/x303t819.aspx)
*   `Enumerable.ToArray<T>()`扩展方法：http: [//msdn.microsoft.com/en-us/library/x303t819.aspx#Y0](http://msdn.microsoft.com/en-us/library/x303t819.aspx#Y0)

对于第二部分，您可以编写自己的扩展方法：

```
public static class MyExtensions
{
   public static GenericCollection<T> ToGenericCollection<T>(
     this IEnumerable<T> input
   )
   {
      // write the conversion here - typically you will need a for loop
   }
} 
```

一旦你有了这个，你可以将任何集合转换为你`GenericCollection<T>`的如下：

```
var result = SomeGenericCollection.Select(o => o).ToGenericCollection(); 
```

您确实无法避免编写循环，但这样您只需编写一次。

# ios - ios 6.0 新地址簿ABAddressBookRequestAccessWithCompletion

> ID：12798977
> 
> 赞同：2
> 
> 时间：2012-10-09T11:23:23.043
> 
> 标签：ios, addressbook

我想问我如何检测我的地址簿是否首先被 ios6.0 上的应用程序访问。我了解到，无论是否重新安装应用程序，系统只会认为第一次安装首次启动是第一次启动应用程序。问题是我想提醒用户允许应用程序使用 UIAlertView 访问地址簿，但是这个 alertview 会在系统的 alertview 之后不久出现。我怎样才能避免这种情况。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-02T17:36:58.793

你基本上应该忽略`ABAddressBookRequestAccessWithCompletion`. 这是没用的。如果您想知道您是否有权访问数据库，请调用`ABAddressBookGetAuthorizationStatus()`.

### 进一步讨论

`ABAddressBookRequestAccessWithCompletion`文档说要向用户请求地址簿访问权限。但事实并非如此。我现在将证明这`ABAddressBookRequestAccessWithCompletion`是没有用的。有两种情况：

(1) 如果这是一个完全未知的新应用程序，`ABAddressBookRequestAccessWithCompletion`则不需要：当应用程序尝试访问通讯录时，会自动向用户请求访问权限，因此不需要`ABAddressBookRequestAccessWithCompletion`.

(2) 如果用户拒绝或授予访问权限，`ABAddressBookRequestAccessWithCompletion`则为空操作！调用它什么都不做；它不会*发出*访问请求警报！

所以`ABAddressBookRequestAccessWithCompletion`只是一个错误，应该被忽略。

### 重大修正

**编辑**在 iOS 6.1 中，这种行为似乎已经改变。（我假设我在 iOS 6.0 上的测试是有效的，但我完全有理由相信它们是有效的。）然而，在 iOS 6.1 中，`ABAddressBookCreateWithOptions`永远不会出现授权警报。让它出现的*唯一*`ABAddressBookRequestAccessWithCompletion`方法是使用! 因此，这个功能现在是必不可少的；如果`ABAddressBookGetAuthorizationStatus`该访问权限未确定，您*必须*致电`ABAddressBookRequestAccessWithCompletion`，否则您将无法访问。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T01:22:54.947

我已经通过这种方式解决了。

```
__block BOOL accessGranted;
- (IBAction)accessAddressBook:(id)sender {
    CFErrorRef  error;
    ABAddressBookRef addressBook = ABAddressBookCreateWithOptions(NULL,&error);

    ABAddressBookRequestAccessWithCompletion(addressBook, ^(bool granted, CFErrorRef error) {
//        accessGranted = granted;
        if (!accessGranted && !granted) {
            UIAlertView * alertView = [[UIAlertView alloc]initWithTitle:@"Deny Access" message:@"Deny" delegate:self cancelButtonTitle:nil otherButtonTitles:@"cancel", nil];
            [alertView show];
            [alertView release];
        }
    });
}

- (void)alertView:(UIAlertView *)alertView clickedButtonAtIndex:(NSInteger)buttonIndex
{
    if ([alertView.message isEqualToString:@"use contact"] || alertView.message == @"use contact") {
        accessGranted = YES;
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-14T21:20:48.573

当您调用 ABAddressBookRequestAccessWithCompletion() 时，系统已经显示警报，只需使用您自己的字符串扩充系统应用程序。

你的 InfoPlist.strings 中应该有：

```
 "NSContactsUsageDescription" = "Tap 'OK' or this app is useless."; 
```

# ruby-on-rails - 如何将 AWS EC2 实例的弹性 IP 与 Ruby 应用程序的域名映射

> ID：12798979
> 
> 赞同：0
> 
> 时间：2012-10-09T11:23:29.827
> 
> 标签：ruby-on-rails, dns, amazon-web-services, mapping, a-records

我现在想将我的域名映射到这个网络应用程序，这样当有人在浏览器中输入域名时，它就会打开应用程序。

我将域的 A 记录更改为指向 IP 地址。但这不起作用。我认为我们不能在 A 记录中指定端口号？

我需要对我的域的 DNS 设置进行哪些更改，以便它指向 rails 应用程序，而无需我输入端口号？

我已经使用Passenger 部署了一个RoR Web 应用程序。我可以使用以下网址访问我的网站：ipaddres:3000。

谢谢。

# c++ - gfortran 未定义的引用

> ID：12798981
> 
> 赞同：1
> 
> 时间：2012-10-09T11:23:34.337
> 
> 标签：c++, fortran, g++, linker-errors, gfortran

我正在尝试编译一个依赖于很多东西的程序。我使用和修改提供的生成文件来代表我的计算机设置，但在编译的最后一步中我不断得到很多未定义的引用。

导致问题的命令行是：

```
gfortran -o ../cosmomc ParamNames.o Matrix_utils.o  settings.o IO.o cmbtypes.o Planck_like.o cmbdata.o WeakLen.o &
bbn.o lrggettheory.o mpk.o bao.o supernovae.o HST.o SDSSLy-a-v3.o CMB_Cls_simple.o paramdef.o propose.o params_CMB.o &
calclike.o EstCovmat.o PowellConstrainedMinimize.o minimize.o postprocess.o MCMC.o driver.o /home/darkside/tesis/CosmoMc &
/likelihood_v4p1/read_archive_map.o /home/darkside/tesis/CosmoMc/likelihood_v4p1/read_fits.o /home/darkside/tesis/CosmoMc/likelihood_v4p1/healpix_types.o /home/darkside/tesis &
/CosmoMc/likelihood_v4p1/WMAP_7yr_options.o /home/darkside/tesis/CosmoMc/likelihood_v4p1/WMAP_7yr_util.o /home/darkside/tesis &
/CosmoMc/likelihood_v4p1/WMAP_7yr_tt_pixlike.o /home/darkside/tesis/CosmoMc/likelihood_v4p1/WMAP_7yr_teeebb_pixlike.o /home/darkside/tesis/CosmoMc &
/likelihood_v4p1/WMAP_7yr_likelihood.o /home/darkside/tesis /CosmoMc/likelihood_v4p1/WMAP_7yr_gibbs.o /home/darkside/tesis &
/CosmoMc/likelihood_v4p1/WMAP_7yr_tt_beam_ptsrc_chisq.o /home/darkside/tesis/CosmoMc/likelihood_v4p1/br_mod_dist.o &

-L../camb -lcamb_cosmorec -lblas -llapack -L/usr/lib/gcc & 
/i686-linux-gnu/4.4/ -lstdc++ -L../CosmoRec -lCosmoRec &
-L/usr/lib -lgsl -lgslcblas  -L/usr/lib/i386-linux/gnu/lib &
-L/home/darkside/tesis/CosmoMc/likelihood_v4p1 -lcfitsio &
-DMATRIX_SINGLE -O3 -fopenmp -ffree-form -x f95-cpp-input  &
-ffast-math -march=native -funroll-loops -DCOSMOREC -I../camb &
-I/usr/lib/i386-linux/gnu/include -I/home/darkside/tesis/CosmoMc/likelihood_v4p1 
```

一些错误是：

```
../CosmoRec/libCosmoRec.a(CosmoRec.o): In function `__tcf_0':
 CosmoRec.cpp:(.text+0xb): undefined reference to `std::basic_string<char, std::char_traits<char>,  
 std::allocator<char> >::~basic_string()'
 CosmoRec.cpp:(.text+0x17): undefined reference to `std::basic_string<char, std::char_traits<char>,
 std::allocator<char> >::~basic_string()'
 ../CosmoRec/libCosmoRec.a(CosmoRec.o): In function `__tcf_1':
 CosmoRec.cpp:(.text+0x47): undefined reference to `std::basic_string<char, std::char_traits<char>, 
 std::allocator<char> >::~basic_string()'
 ../CosmoRec/libCosmoRec.a(CosmoRec.o): In function `std::_Vector_base<double, std::allocator<double> 
  >::_M_deallocate(double*, unsigned int) [clone .isra.76]': 
```

它们都在用 g++ 编译的包中，所以我猜问题可能是 lstdc++ 标志。我尝试将完整路径添加到库和其他选项，但它不起作用。

任何帮助都会非常感激。

问候， 伊拉

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T11:41:52.720

您是否尝试过将链接命令*放在末尾*`-lstdc++`？它需要*在*任何依赖它的对象和库之后。

# facebook - Facebook：将外部个人资料添加到 facebook

> ID：12798993
> 
> 赞同：1
> 
> 时间：2012-10-09T11:24:36.367
> 
> 标签：facebook, facebook-apps

我想构建一个 facebook 应用程序，但不知道如何规划它。facebook 用户应该找到该应用程序并单击那里的按钮，例如：“将此应用程序添加到您的 facebook 页面”。之后（或当用户第一次打开应用程序选项卡时）用户将被要求登录外部网站。当凭据正常并且用户是该 facebook 页面/选项卡的所有者时，此外部 Web 应用程序将显示该 facebook 用户的外部个人资料页面（该应用程序已放入的 facebook 个人资料的所有者）。之后，用户不必再登录，访问该选项卡的每个用户都将看到该 Facebook 页面的外部配置文件。

...为了更清楚地举一个例子：

用户 Foo 在 example.com 上拥有一个帐户，并且在 example.com/profiles/Foo 上拥有一个可公开访问的个人资料。用户 A 也有一个 facebook 页面。现在 example.com 告诉它的用户，他们开发了一个 facebook 应用程序来将他们的 example.com-profiles 集成到他们的 facebook 个人资料中。因此，用户 A 打开该应用程序页面，单击一个按钮，登录到 example.com，现在她的 facebook 页面上有一个包含 example.com/profiles/Foo 的新标签。如果用户 B 访问用户 A 的 facebook 页面，他将在应用程序选项卡中找到用户 A（不是 B）的 example.com-profile。

我需要的是以下信息：

*   如何使应用程序可供 facebook 用户使用？

**更新：**找到本教程：[http ://www.hyperarts.com/blog/facebook-removing-app-profile-pages-on-feb-1-2012/](http://www.hyperarts.com/blog/facebook-removing-app-profile-pages-on-feb-1-2012/)

*   是否可以制作类似于应用程序安装过程的东西？否则，如果用户 A 单击按钮以将应用程序集成到她的页面中，并且用户 B 在用户 A 可以打开它并登录到 example.com 之前打开选项卡，那么用户 B 可以登录并且他的 example.com 个人资料将出现在用户 A 的 facebook 页面。或者我该如何解决这个问题。

*   下一个问题是——我认为——应用程序的 URL 对所有用户来说都是相同的，将这个应用程序集成到他们的个人资料中。所以我需要能够检测到应用请求的 facebook 页面。

**更新：**我将能够从[`signed request`](https://developers.facebook.com/docs/authentication/signed_request/). 问题接缝是页面管理员必须知道他/她的页面 ID，但我认为可以通过图形 API 检索它（如果它不是 URL 的一部分）。