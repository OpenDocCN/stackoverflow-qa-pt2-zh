# StackOverflow 问答 13333000-13333999

# javascript - 为什么 JavaScript 中的数组显示错误的长度

> ID：13333000
> 
> 赞同：4
> 
> 时间：2012-11-11T04:07:55.393
> 
> 标签：javascript

我正在学习 Javascript。作为学习的一部分，我遇到了以下场景，我希望 a1.length（代码的最后一行）显示 201，但它显示 101，有什么想法吗？

```
var a1 = new Array();

for (var i = -100; i<=100; i++)
 a1[i]  = i;

for (var i in a1)
{
    document.write(i + "=" + a1[i])
    document.write("<br>");
}

document.write(a1.length); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-11T16:24:15.890

我会将我的原始评论转换为更彻底的答案。

计数的数组索引`.length`从`0`上往下。负索引被认为是对象的属性，而不是数组值。正如您从下面的 ECMAScript 规范中看到的那样，数组索引本质上只是经过特殊处理的某些类型的属性值。

从[ECMAScript 规范](http://www.ecma-international.org/publications/files/ECMA-ST/Ecma-262.pdf)的第 15.4 节：

> **15.4 数组对象**
> 
> 数组对象对某一类属性名称给予特殊处理。当且仅当 ToString(ToUint32(P)) 等于 P 且 ToUint32(P) 不等于 2^32 时，属性名称 P（以字符串值的形式）是数组索引。属性名称为数组索引的属性也称为元素。每个 Array 对象都有一个长度属性，其值始终是小于 2^32 的非负整数。length 属性的值在数值上大于名称为数组索引的每个属性的名称；每当创建或更改 Array 对象的属性时，都会根据需要调整其他属性以保持此不变性。具体来说，每当添加名称为数组索引的属性时，如果需要，长度属性会更改为比该数组索引的数值大一；并且每当更改长度属性时，所有名称为数组索引且值不小于新长度的属性都会被自动删除。此约束仅适用于 Array 对象的自身属性，不受可能从其原型继承的长度或数组索引属性的影响。

* * *

此外，您永远不应该[使用 for-in-loop 来“迭代”数组](https://stackoverflow.com/questions/500504/javascript-for-in-with-arrays)：

```
for (var i in a1) 
```

迭代所有可枚举属性，`a1`其中将包括所有数组索引，但也可能包括其他属性。如果你只想用循环迭代数组元素`for`，你应该使用另一种形式：

```
for (var i = 0, len = a1.length; i < len; i++) 
```

打字稍微多一点，但更安全。

或者，在更现代的浏览器中，您可以使用[`.forEach()`方法](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/forEach).

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-11T15:50:06.677

这是因为 Javascript 中的数组是[从零开始的](https://softwareengineering.stackexchange.com/questions/110804/why-are-zero-based-arrays-the-norm)，即它们从零开始并上升到`length - 1`.

您通常编写您的 for 循环以由小于运算符绑定，如下所示：

```
for(i = 0; i < arr.length; i++) {
    // do something with arr[i]
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-11T15:00:44.657

数组长度定义为最后一个元素的索引加一。数组不需要是连续的，这会产生奇怪的结果：

```
var myArray = [];
myArray[-42] = 1
myArray[1000] = 2;
document.write(myArray.length); // 1001 
```

# .htaccess - htaccess 重写年度网站

> ID：13333005
> 
> 赞同：1
> 
> 时间：2012-11-11T16:20:47.240
> 
> 标签：.htaccess, cakephp, web, rewrite

我已经寻找了很多答案，但没有令人满意的答案，我现在带着我的问题来了：

我正在为音乐节创建一个网站，该网站每年都会更新。我想保留古人的版本。所以我有以下结构：

```
/
2011
2012
2013
.htaccess 
```

每年的网址几乎相同。我想让实际的网站（现在是 2013 年）直接在根目录下访问。举个例子 ：

```
aaa.com/festival/presentation -> aaa.com/2013/festival/presentation
aaa.com/programme/groupes     -> aaa.com/2013/programme/groupes 
```

用户不应该在 url 中看到 2013/，而是像在栏中键入它一样访问该页面。

我已经尝试了一些解决方案，例如

```
RewriteEngine on
RewriteRule ^(.*)$ 2013/$1 
```

但它不起作用：页面没有呈现，就好像我在 url 中输入了 2013/ 一样（我使用 CakePHP，它告诉我，控制器丢失了；它会寻找一个名为 ordner 的控制器，我的整个网站是）。

什么是我需要的好解决方案？

## 健康）状况：

另一件事是我想提出条件，在某些情况下，它不应该重写 url，实际上是访问旧网站 2012、2011 等，例如：

```
aaa.com/2012/presentation does not -> aaa.com/2013/2012/presentation 
```

Thaaaaannnks 一个looooot，如果你能帮助我！！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T20:51:30.687

尝试这样的事情：

```
RewriteEngine On
RewriteCond %{DOCUMENT_ROOT}/2013%{REQUEST_URI} -f [OR]
RewriteCond %{DOCUMENT_ROOT}/2013%{REQUEST_URI} -d
RewriteRule ^ /2013%{REQUEST_URI} [L] 
```

或者可以使用`%{TIME_YEAR}`变量自动完成它，但它可能适合您的需求：

```
RewriteEngine On
RewriteCond %{DOCUMENT_ROOT}/%{TIME_YEAR}%{REQUEST_URI} -f [OR]
RewriteCond %{DOCUMENT_ROOT}/%{TIME_YEAR}%{REQUEST_URI} -d
RewriteRule ^ /%{TIME_YEAR}%{REQUEST_URI} [L] 
```

这实质上增加了请求的 URI在被重写之前*必须*作为目录中的文件或目录存在的条件。`2013`

# php - 使用 PDO 将大量变量插入表中

> ID：13333006
> 
> 赞同：7
> 
> 时间：2012-11-11T16:20:48.043
> 
> 标签：php, mysql, pdo

我有一个包含大约 25 个输入字段的大表单。

我试图将它们插入我的表中，我知道如何使用以下内容的唯一方法......

```
$count = $dbh->exec("INSERT INTO directory(field1, field2) VALUES (':value1', ':value2')"); 
```

由于我有很多帖子变量，有没有比在我的查询中输入每个人更好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-11T17:01:28.320

## 动态准备查询

您可以从 $_POST 数组动态构建查询：

但是，永远不要相信用户输入，这意味着您不能相信 $_POST 中的数据将包含有效的列名。

**1.清理帖子数据**

您可以定义一个列入白名单的列名数组`$whitelist = array('field1', 'field2', ...)`，然后使用：

```
$data = array_intersect_key($_POST, array_flip($whitelist)); 
```

找到列入白名单的列和您的 $_POST 数组之间的交集。（感谢@BillKarwin）

**2.构建查询**

```
private function buildInsertSql($data, $table) {
    $columns = "";  
    $holders = "";  
    foreach ($data as $column => $value) {  
       $columns .= ($columns == "") ? "" : ", ";  
       $columns .= $column;  
       $holders .= ($holders == "") ? "" : ", ";  
       $holders .= ":$column";  
    }  
    $sql = "INSERT INTO $table ($columns) VALUES ($holders)";  
    return $sql; 
} 
```

这将为您提供以下形式的 SQL 语句：

```
$sql = INSERT INTO directory (field1, field2) VALUES (:field1, :field2) 
```

并准备声明：

```
$stmt = $dbh->prepare($sql); 
```

**3.绑定参数**

然后，您可以将参数动态绑定到占位符：

```
foreach ($data as $placeholder => $value) {
    $stmt->bindValue(":$placeholder", $value);
 } 
```

并执行它：

```
$stmt->execute(); 
```

* * *

## 稍微高级一点...

*   查看此链接[Binding to the same placeholder](https://stackoverflow.com/questions/13187322/php-pdo-how-to-deal-with-bindvalue-and-reserved-keywords/13187498#13187498)有关如何使您的动态准备语句更健壮的信息。
*   看看这个链接：[在循环内绑定参数](https://stackoverflow.com/questions/4174524/a-problem-while-bind-params-for-pdo-statement-inside-loop)关于绑定参数与循环中的值的警告。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-11T17:35:15.723

您可以动态构建 INSERT 语句，但您应该小心限制 POST 字段。不要相信请求只包含有效的列。

还分隔表和列标识符。MySQL 默认使用反引号作为标识符分隔符。

```
function execInsert($pdo, $table, $_POST) {
    // get a list of columns in $table, either by hard-coding them per table, 
    // or by querying DESC or INFORMATION_SCHEMA
    $real_columns = array('col1', 'col2', 'col3');

    $fields = array_intersect_key($_POST, array_flip($real_columns));
    if (!$fields) {
        // no POST fields match the real columns
        return false;
    }

    $columns = array_map(function($col) { return "`".$col."`"; }, array_keys($fields));
    $holders = array_map(function($col) { return ":".$col; }, array_keys($fields));
    $values = $fields;

    $sql = "INSERT INTO `$table` (" . join(",", $columns) . 
        " VALUES (" . join(",", $holders) . ")";  

    if (($stmt = $pdo->prepare($sql)) === false) {
        die(print_r($pdo->errorInfo(), true));
    }
    if (($retval = $stmt->execute($values)) === false) {
        die (print_r($stmt->errorInfo(), true));
    }
    return $retval;
} 
```

# javascript - 从 alert() 中删除“Javascript”

> ID：13333007
> 
> 赞同：1
> 
> 时间：2012-11-11T16:21:01.157
> 
> 标签：javascript, alert

每当我使用 javascript`alert()`函数时，消息上方总会出现某种形式的文本。我相信每个浏览器都不同。

*   Chrome 显示“Javascript 警报”
*   Safari 显示“Javascript”（如下所示）
*   iOS Safari 显示网站 URL。

有什么办法可以抑制这种情况吗？我只想`alert()`说：“警报文本”。老实说，我什至不知道从哪里开始（我很少/没有 Javascript 经验）所以我还没有尝试过任何东西。如果有人能指出我正确的方向，我将不胜感激。

```
alert("Alert Text"); 
```

![在此处输入图像描述](../Images/d4b6c3146cb19e29d344ba62099f0004.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-11T16:21:57.103

不，它作为一种安全措施存在，以便最终用户知道浏览器本身不是在发送消息，而是某些脚本的开发人员。

...也就是说，没有什么能阻止您创建一个看起来与浏览器警报非常相似的自定义警报。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-11T16:21:47.007

这是一个实现细节。你无法改变这一点。

# java - 在小程序中创建多页 TIFF

> ID：13333011
> 
> 赞同：0
> 
> 时间：2012-11-11T16:21:17.473
> 
> 标签：java, applet, tiff, jai

我有一个图像列表，想用它们创建一个多页 TIFF。我知道[它可以](https://stackoverflow.com/questions/3165792/how-to-combine-two-or-many-tiff-image-files-in-to-one-multipage-tiff-image-in-ja?lq=1)使用 JAI 来完成，但由于它的 jar 很大（9mb，在 Windows 上），如果可能的话，我宁愿不使用它（我不喜欢强迫用户下载 9mb*额外*内容的想法）。

有替代品吗？如果没有我不会使用的所有功能，是否可以获得 JAI 的*精简版（尺寸减小）？*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T20:38:21.943

要知道我通过使用平台独立版本的 JAI 解决了这个问题，因为它只有 2mb。我失去了硬件加速，但在这种情况下这不是问题。

# css - 有没有办法将 CSS 样式应用于同一级别的所有评论？

> ID：13333012
> 
> 赞同：1
> 
> 时间：2012-11-11T16:21:24.717
> 
> 标签：css, html-lists

我有一个分层的评论结构，这意味着有多个级别（父母、孩子、孩子的孩子等），每个级别都有多个评论。

我想将每隔一个级别（不是评论）的背景设​​置为某种颜色。这意味着：同一级别的所有评论都具有相同的颜色，但上下级别的评论都有第二个不同的颜色。

我玩了一下 li:nth-child，但我只设法将其应用于评论本身，而不是应用于关卡。

我的评论结构看起来像这样：

```
<ul class="tree-block">
  <li>
  <li>
   <div class="comment">
   <ul>
    <li>
     <div class="comment">
     <ul>
      <li>
       <div class="comment">
       <ul>
        <li> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-11T16:25:15.130

```
div.tree-block .comment { /* first level */ }
div.tree-block .comment .comment { /* second level */ }
div.tree-block .comment .comment .comment { /* third level */ } 
```

像这样，二级和三级评论会继承一级评论风格。您需要用其他值覆盖不需要的属性。如果您不希望这样，请使用“>”选择器语法（直接子级）：

```
div.tree-block > ul > li > .comment { /* first level */ }
div.tree-block > ul > li > .comment > ul > li > .comment { /* second level */ }
div.tree-block > ul > li > .comment > ul > li > .comment > ul > li > .comment { /* third level */ } 
```

我不知道通常为每个奇数/偶数级别创建规则的方法，但是您可以对这些进行硬编码，直到达到合理的深度，这可能永远不会发生（我见过的没有多少线程超过 10 条评论，可能仅在 reddit 上 :D)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-11T16:23:56.840

使用 #comment{value1, value2, value3,...} 将 css 应用为自己的编码，您还可以使用 #treeblock{value1, value2, value3} 将 css 放置到所有项目的 div 容器中，依此类推等等。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-11-11T16:25:21.957

是的，这对于 nth-child 是非常可行的。这是我使用的一个很棒的工具，因为它可能会让人感到困惑：

[http://css-tricks.com/examples/nth-child-tester/](http://css-tricks.com/examples/nth-child-tester/)

# c++ - 如何在数组中设置类型化信息长度

> ID：13333014
> 
> 赞同：0
> 
> 时间：2012-11-11T16:21:38.720
> 
> 标签：c++

我想检查这个数组中输入的长度。这里必须输入八个数字。这是我的代码：

```
#include <iostream.h>
#include <iomanip.h>

void main () 
{
    int n, i;
    cout << "1\. Vyvedi fakulteten nomer" << endl;
    cin >> n;
    switch(n) {
    case 1:
        int F[30];
        for (i=1; i<=30; i++) {
            cout << i << ". Fak. nomer: ";
            cin >> F[i];
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T16:27:59.290

如果您需要 8 位数字，那么您知道输入必须介于 10000000 和 99999999 之间。所以只需检查一下：

```
cin >> n;
if (n < 10000000 or n > 99999999) {
    // Error: need 8 digits.
} 
```

这适用于正数。如果您还需要处理负数，请相应地调整条件。

如果您还需要从数字中提取每个数字，那么这里已经多次回答了这个问题。例如：[如何通过按位运算获得整数的第 N 位？](https://stackoverflow.com/questions/203854/how-to-get-the-nth-digit-of-an-integer-with-bit-wise-operations)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-11T17:26:58.777

输入正确性检查的常用例程使用 do while 循环

```
 int input;
 do
 {
      std::cin >> input;
 }
 while(input < 10000000 || input > 99999999); 
```

这样，程序将等待有效输入，直到提供。这里不需要数组。如果程序需要处理不适合任何整数类型的非常大的数字，那么您可以将其读取为字符串

```
 std::string input;
 do
 {
      std::cin >> input;
 }while(input.length() != my_desired_length); 
```

# list - 动态列表的逻辑

> ID：13333016
> 
> 赞同：-1
> 
> 时间：2012-11-11T16:21:51.790
> 
> 标签：list, arraylist

我想知道一个列表对象在幕后看什么。是否有一个变大的数组，一个引用另一个对象的元素等等。有没有更好的方法来用 C#、Java 等任何语言实现我自己的列表，或者你会使用什么？

编辑：我忘了说使用索引获取或设置对象的能力应该尽可能快。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T16:26:51.673

如果不了解您的语言/框架，这是无法回答的。

例如，.NET Framework`List<T>`是基于数组的，当超出初始容量时会调整其大小。但在另一个框架中，它可能被实现为另一个数据结构。

# node.js - DotCloud：应用程序没有响应

> ID：13333017
> 
> 赞同：0
> 
> 时间：2012-11-11T16:21:53.433
> 
> 标签：node.js, mongodb, dotcloud

我试图看到 dotcloud 实际工作，但我无法让它工作。我克隆并推送了[https://github.com/sebm/MongoPop.git](https://github.com/sebm/MongoPop.git)我添加了一个 dotcloud.yml

api：类型：nodejs mongo：类型：mongodb

因为没有它似乎没有推送，然后我尝试访问该 url，我得到一个错误应用程序没有响应。我应该得到类似[http://2a6ad2ac.dotcloud.com/](http://2a6ad2ac.dotcloud.com/)

我想使用 dotcloud，但从未真正看到它工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-11T20:59:24.433

Application Not Responding 错误有时可能是由[dotCloud 的健康检查](http://docs.dotcloud.com/tutorials/more/cloud-health-check/)引起的。确保您以 404 或 200 状态代码响应，`/CloudHealthCheck` 否则，dotCloud 会假设发生了不好的事情，将您的服务从轮换中删除。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T14:16:30.440

确保添加一个`dotcloud.yml`和一个`supervisord.conf`文件。

您所指的回购有它们，并且由于某种原因删除了它们。看到这个提交。

[https://github.com/sebm/MongoPop/commit/5aea02dd88b282b23d367157a44de21416485afa](https://github.com/sebm/MongoPop/commit/5aea02dd88b282b23d367157a44de21416485afa)

这是他们应该看起来的样子

**`dotcloud.yml`**

```
api:
   type: nodejs
mongo:
   type: mongodb 
```

**`supervisord.conf`**

```
[program:node]
command = node app.js
directory = /home/dotcloud/current 
```

将这些添加到您的项目中，将文件添加并提交到 repo，然后重新推送。如果它不起作用，请使用命令的日志输出更新您的问题。

# javascript - 不使用答案的外部 HTTP 请求

> ID：13333023
> 
> 赞同：1
> 
> 时间：2012-11-11T16:22:43.240
> 
> 标签：javascript, jquery, html, ajax, http

我正在使用 jQueryMobile。我想发出一个 http 请求，但我不需要答案，因为我很清楚请求会成功。问题：请求以外部服务器为目标，因此我只能使用 JSONP。但是服务器不支持它，只返回纯文本或有效的 xml（我可以使用请求 url 更改它）。如何在不出错的情况下提出此请求？

在 ajax 中使用 jsonp 时，我收到错误，即存在语法错误。当仅将请求作为普通的 ajax/text/xml 请求发送时，根本不会联系服务器。我知道这一点，因为我正在联系短信网关并且没有收到短信。

我的解决方法目前正在插入一个新的 iframe，其中包含该 url 的 src 和显示样式：无；在 Firefox 中运行良好，但我怀疑这是（唯一的）解决方案。

你有什么解决方案？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-11T20:00:57.727

我认为您已经实施了最佳答案。让我们来看看约束：

1.  这是对您无法控制的服务器的跨域请求，因此您不能使用各种 HTML5、Flash 或 Java API 来检查同源。

2.  剩下的就是插入一些将加载远程资源的 DOM 元素。

3.  您已经确定`<script>`不会这样做，因为内容类型错误。

4.  同样，您不能使用`<img>`, `<embed>`, or `<object>`, 即使它们有效，这些也是邪恶的骇人听闻的选择。

`<iframe>`如果您想从浏览器发出请求，我认为这是唯一的选择。

您的另一个选择是在您自己的服务器上实现一个 API 代理到远程 API。然后您可以使用 XHR 发出请求，如果您愿意，您可以在客户端上进行完整的错误检查。

# c++ - 京都内阁TreeDB：内存使用量增长失控，直到数据库关闭

> ID：13333028
> 
> 赞同：2
> 
> 时间：2012-11-11T16:23:47.487
> 
> 标签：c++, memory-management, kyotocabinet

我一直在尝试使用kyotocabinet TreeDB（MSVC10 build）并偶然发现了一个奇怪的内存问题：基本上，在每次数据库写入时，内存使用量都会增加，并且在数据库关闭之前它不会下降。

测试代码如下所示：

```
size_t BLOCK_SIZE = 1 << 20; // use 1MB-sized records
char* test_block = new char[BLOCK_SIZE]; // allocate record data

TreeDB db;
db.open("test.db")

// add 5000 records
for (int i = 0; i < 5000; ++i)
{
    // at each call, process virtual memory usage increases by 1 MB even though i'm not allocating more memory
    // also, as expected, in x86-32 process the whole thing runs out of memory and crashes when iteration counter comes close to 2000
    db.set(&i, sizeof(i), test_block, BLOCK_SIZE);
}

db.close(); // memory usage returns to normal here
delete [] test_block; 
```

当然，我可以在添加每条记录时打开/关闭数据库，但这会带来巨大的延迟（大约 1 秒），这对于我的任务来说是不可接受的。另外，这个问题在 HashDB 中不会出现，但是我不能真正使用 HashDB，因为我偶尔需要按键顺序访问。

我尝试过更改调整参数（tune_page_cache、tune_buckets、tune_page），但没有成功。请有人提示我在这里缺少什么？我需要存储不可预测数量的 100KB-10MB 大小的记录并在 32 位系统上运行它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T22:45:43.970

也许`db.synchronize()`会有所帮助，因为它应该将缓存的数据推送到文件系统，从而释放用户内存。如果是这样，并且您需要一直发生这种情况，请`open`使用可选参数 OAUTOSYNC 调用，尽管这可能会大大减慢您的速度。

# compact-framework - 使用 Windows Mobile 将值传递给 Zebra 中的标签变量

> ID：13333036
> 
> 赞同：0
> 
> 时间：2012-11-11T16:24:22.693
> 
> 标签：compact-framework, windows-mobile-6.5, zebra-printers, zpl

如果我的 Zebra 打印机的预制标签上有可变文本和 QR 码。如何使用 Windows Mobile 6 将值传递给 2 个变量？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T07:40:10.210

您是在起诉 ZPL2 打印机语言还是您的标签代码是什么？

这是一个使用变量字段的示例。

![在此处输入图像描述](../Images/017941d2aecae279a5bf38e73b2040be.png)

下面的代码窗口显示了要发送什么来替换变量数据。这就是在上层代码窗口中第一次发送标签代码后，您必须将通信通道发送到打印机。

如果您需要更具体的帮助，您必须发布您已经使用的标签命令等。

~约瑟夫

# youtube - Youtube API 获取原始文件

> ID：13333037
> 
> 赞同：2
> 
> 时间：2012-11-11T16:24:26.193
> 
> 标签：youtube, youtube-api

有没有办法使用 Youtube API 来获取用户上传到 youtube 的原始文件？

在我的应用程序中，我需要这个原始文件。我可以使用直接方法上传并在本地保留一份副本，然后上传到 youtube，但我想知道我是否可以使用基于浏览器的上传方法并且仍然可以访问原件。我需要原始文件，而不是一些高清版本的 youtube 或类似的东西。

谢谢，

# javascript - 如何为同一个 onclick 事件添加额外的功能？

> ID：13333049
> 
> 赞同：1
> 
> 时间：2012-11-11T16:25:40.853
> 
> 标签：javascript, jquery, css, onclick, bind

我有一个

```
<input onclick="javascript:WebForm_DoPostBackWithOptions........" id='input-no1'></input> 
```

元素，我想使用 jQuery 向它添加第二个 onclick 事件

我的意思是，一旦 onclick 事件：`javascript:WebForm_DoP....`被执行，我希望页面通过调用重新加载`location.reload();`

如何将此额外功能添加到上述元素的相同 onclick 属性？

我查看了 bind()，但语法要求我按顺序输入所有事件。我想要做的是将后续事件添加到同一个 onclick 函数中，无论初始事件可能是什么（我什至可能不知道初始事件是什么......）

提前感谢您的帮助。

**编辑：**

我现在使用的代码是：

```
$("#input-no1").bind('click',function()
{
   location.reload();
}); 
```

但是没有任何反应，即使选择了元素并且我没有收到任何错误。我也尝试过：

```
$("#input-no1").bind('onclick',function()
{
   location.reload();
}); 
```

但仍然没有

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T16:27:25.923

您可以直接将这两个函数添加到您的 onclick 处理程序中。

```
<input onclick="WebForm_DoPostBackWithOptions();location.reload(); " /> 
```

或者您可以使用以下方法单独附加它：

```
$("#input-no1").click(function () { 
    location.reload();
    //more code
});​ 
```

**示例**：**[JSFiddle](http://jsfiddle.net/9uM3j/)**

# wordpress - 添加 kmllayer 会遮挡地图

> ID：13333050
> 
> 赞同：2
> 
> 时间：2012-11-11T16:25:57.430
> 
> 标签：wordpress, google-maps-api-3, kml

使用 Google Maps API 时，我无法添加 KML 图层。

使用以下 javascript，地图呈现良好。

```
 function initialize() {
    var mapOptions = {
      zoom: 8,
      center: new google.maps.LatLng(49.754,-115.834),
      mapTypeId: google.maps.MapTypeId.ROADMAP
    };

var map = new google.maps.Map(document.getElementById('map_canvas'),
        mapOptions);

    //var ctaLayer = new google.maps.KmlLayer('http://forestcrowne.ca/earth/dave.kml');
    //ctaLayer.setMap(map);
    }

    google.maps.event.addDomListener(window, 'load', initialize); 
```

当我取消注释 ctaLayer 时，地图消失了（昨天它会渲染 kml 文件，但地图仍然消失了）。怎么了？

看一看： http://forestcrowne.ca/ [?](http://forestcrowne.ca/?page_id=1668) page_id=1647 - ctaLayer 已评论 http://forestcrowne.ca/?page_id=1668 - ctaLayer
[未](http://forestcrowne.ca/?page_id=1647)评论

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T17:05:09.843

KmlLayer[不在您的页面上时显示良好](http://www.geocodezip.com/v3_GoogleEx_layer-kml_linkto.html?filename=http://forestcrowne.ca/earth/dave.kml)。尝试不使用 API 的“实验/夜间构建”版本，更改：

```
<script type="text/javascript" src="https://maps.googleapis.com/maps/api/js?v=3.exp&#038;sensor=false"></script> 
```

调出特定版本（或 v=3）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T02:21:45.887

所以，感谢所有的帮助 - 我明白了。我在“帖子中的图片”上将背景颜色更改为透明。Atahualpa 有一些花哨的 css 可以在图像上创建圆角边框 - 背景颜色中指定的属性之一。所以..这是CSS

# c++ - 网络编程。确定消息的结尾

> ID：13333051
> 
> 赞同：0
> 
> 时间：2012-11-11T16:26:05.327
> 
> 标签：c++, c, sockets, network-programming, cross-platform

Linux 缓冲所有在套接字上接收到的消息。但在收到之前，这条消息有一个开始和一个结束。Linux 将这些消息顺序写入缓冲区，因此丢失了消息末尾的信息。

我知道在 Linux 中我可以使用 cmsg_header。但 Windows 不提供 send-/recvmsg() 程序。如何确定缓冲区平台无关的消息结束？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-11T16:29:50.683

我不确定 TCP/IP 连接是否正在交换分隔良好的消息。路由器可以对数据包进行分段。（所以`cmsg_header`可能不可靠）。

我所知道的所有基于 TCP/IP 的协议（HTTP、SMTP、X11、RPCXDR）都在应用程序级别处理消息组织。您的应用程序库需要以某种方式知道“消息”何时以及何时开始或结束。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-11T16:31:49.020

只需按网络顺序在前 4 个字节中发送消息的长度。那么你就不会有这个问题了。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-11T16:41:49.843

我认为 Winsock 等价于`sendmsg`,`recvmsg`是`WSASendMsg`和`WSARecvMsg`。`LPWSAMSG`根据[文档](http://msdn.microsoft.com/en-us/library/windows/desktop/ms741687%28v=vs.85%29.aspx)，他们采用的参数是基于 Posix.1g 规范的 msghdr 结构的结构。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-11T16:37:49.130

面向网络的应用程序通常具有清晰的传输/业务逻辑分离。

业务层只操作整个消息。传输将整个消息传递到上游业务层，可能会从片段中组装连续的流，重新切片并将其重新解释为一系列消息。

传输层通常使用 [size(length=S)][payload(variable length)] 形式的协议消息与远程传输层通信。其中 [size] 是单个数字，其编组长度 S 为所有通信方所知。

传输层做的第一件事是等待从下游（异步或同步，无关紧要）接收 S 字节到临时缓冲区。完成后，它会解组接收到的数据并知道要接收的有效载荷 L 的长度。

一旦已知有效载荷 L 的长度，传输将等待从下游接收 L 个字节到临时缓冲区（可能必须组合多次读取），一旦完成，它就会通知应用层将整个组装消息传递到单个缓冲区中。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-13T07:34:04.373

> Linux 将这些消息顺序写入缓冲区，因此丢失了消息末尾的信息。

这是不正确的。接收端永远不会丢失任何“[关于]消息结尾的信息”。TCP 是一种字节流协议。您`send()`的 s 或`write()`s*在 sender 处*连接到其套接字*发送*缓冲区，然后从那里以 TCP 段和 IP 数据包的形式传输数据，但是传输决定这样做。

如果你想通过 TCP 发送消息，你必须完全自己实现它们。常用技术：

*   在消息前发送一个长度字
*   封装消息，例如在 STX 和 ETX 之间，如果它出现在消息中，对 ETX (ESC ETX) 进行适当的转义，因此在消息中出现时对 ESC 本身 (ESC ESC) 进行转义
*   使用自描述协议，例如 XML。

# mysql - SQL Group By 其他表中的字段

> ID：13333052
> 
> 赞同：0
> 
> 时间：2012-11-11T16:26:06.437
> 
> 标签：mysql, sql

如何在 sql 中对其他表中的字段进行分组。这是我的代码

```
select 
  sum(a.trans_amount), (
    select 
      ledger_name 
    from 
      ledger_master 
    where 
      ledger_master.ledger_code = transaction_ledger.ledger_code
  ) as ledger_name,
  ledger_code 
from 
  transaction_ledger 
where 
  ledger_parent = 'Sundry Debtors' 
group by 
  ledger_code,
  ledger_name 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T16:31:24.990

假设每个交易分类账只有一个分类账主记录，这可能是您所追求的：

```
select 
  sum(t.trans_amount),
  m.ledger_name, 
  t.ledger_code 
from 
  transaction_ledger t
    inner join
  ledger_master m
    on t.ledger_code = m.ledger_code
where 
  t.ledger_parent = 'Sundry Debtors'
group by 
  t.ledger_code,
  m.ledger_name 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-11T16:33:06.420

为什么不加入结果然后分组？

```
SELECT 
SUM(Trans_Amount), 
A.Ledger_Name, 
A.Ledger_Code 
FROM Transaction_Ledger A INNER JOIN Ledger_Master B 
ON A.Ledger_Code=B.Ledger_Code 
WHERE A.Ledger_Parent='Sundry Debtors' 
GROUP BY A.Ledger_Code, A.Ledger_Name 
```

您的 Ledger_Master 和 Transaction_Ledger 有一个相关列“Ledger_Code”，您在提供的示例查询中使用了该列。

记住这一点，您可以在连接两个表的这两个字段后继续按必填字段进行分组。

幸运的是，您想要的选择列表（名称和代码）也可以用于分组 - 因此不会违反分组规则。

# r - 使用 R 绘制一组数字

> ID：13333055
> 
> 赞同：-4
> 
> 时间：2012-11-11T16:27:14.597
> 
> 标签：r, plot, statistics

我有一组数字：

```
170,295,200,165,140,190,195,142,138,148,110,140,103,176,125,126,204,196,98,123,124
152,177,168,175,186,140,147,174,155,195 
```

我想用 R 在直方图中绘制它们。我需要将它们全部放在一个数组中吗？我试过`X = a[170,...]`了，但没有用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-11T16:30:23.027

这应该足够了

```
x <- c(170,295,200,165,140,190,195,142,138,148,110,140,103,
       176,125,126,204,196,98,123,124,152,177,168,175,186,140,
       147,174,155,195) 

hist(x) 
```

![在此处输入图像描述](../Images/171ba2d321b91f094285130ef3a96725.png)

请注意，我使用`c()`函数将所有数字连接到一个向量中，然后我只是使用`hist()`函数生成直方图

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-11T16:32:36.777

您想将各个元素（数字）组合或连接成一个向量。使用该`c()`功能执行此操作。例如

```
dat <- c(170,295,200,165,140,190,195,142,138,148,110,140,103,176,125,126,204,
         196,98,123,124,152,177,168,175,186,140,147,174,155,195)
hist(dat) 
```

生产

![在此处输入图像描述](../Images/2187544bc86639d667bc5ff2a7540175.png)

# php - Bootstrap 下拉菜单不起作用 - 下拉菜单无法切换

> ID：13333062
> 
> 赞同：0
> 
> 时间：2012-11-11T16:27:40.337
> 
> 标签：php, javascript, jquery, drop-down-menu, twitter-bootstrap

我正在尝试使用 Twitters 引导下拉菜单，但是当我单击下拉切换器（信息）时，下拉菜单不会激活并且没有任何反应。

header.php：

```
<?php
include('minequery.class.php');
?>
<html>
<head>      
<LINK REL=StyleSheet HREF="style.css" TYPE="text/css" MEDIA=screen>    
<LINK REL=StyleSheet HREF="css/bootstrap.css" TYPE="text/css" MEDIA=screen>
<script type="text/javascript" src="http://code.jquery.com/jquery-1.8.2.js"></script>
<script type="text/javascript" src="http://twitter.github.com/bootstrap/assets/js/  
bootstrap-dropdown.js"></script>
<script src="js/bootstrap.js" type="text/javascript"></script> 
</head>    
<body>        
<div class="header">            
<a href=""><div id="logo"></div><div id="banner"></div></a>            
<div class="navbar navbar-inverse">
  <div class="navbar-inner">
<ul class="nav">
  <li class="active"><a href="index.php">Home</a></li>
  <li><a href="about.php">About</a></li>
  <li><a href="server.php">Server</a></li>
  <li><a href="http://forums.interitumcraft.com">Forums</a></li>
  <li><a href="downloads.php">Downloads</a></li>
  <li><a href="http://donate.interitumcraft.com">Donate</a></li>
  <li><a href="vote.php">Vote</a></li>
  <li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown">
  Information
  <b class="caret"></b>
  </a>
  <ul class="dropdown-menu">
    <li><a href="#">Rules</a></li>
    <li><a href="#">Guilds</a></li>
    <li><a href="#">Staff</a></li>
  </ul>
  </li>
 </ul>
  </div>
</div>       
</div> 
```

索引.php

```
<?php include('header.php'); ?>
<html><head><title>InteritumCraft | Minecraft Guild Server</title></head></html>
<div class="main">            
<h2>Home</h2>            
<div id="content">                
<h3>Announcements</h3> 
<?php
 $con = mysql_connect("localhost","interitu_forums","");
 if (!$con)
   {    
   die('Could not connect: ' . mysql_error());
   }

 mysql_select_db("interitu_forums", $con);

 $result = mysql_query("SELECT * FROM mybb_posts WHERE fid='4' LIMIT 5");

 while($row = mysql_fetch_array($result))
   {
?>
<h4>
<?php echo $row['subject']; ?></h4>
<?php echo(substr($row['message'], 0,500)) . '…'; ?>
<?php
echo $text; ?>
<br />
<i><a style="float: right;" href="http://forums.interitumcraft.com/thread-<?php 
echo $row['tid']; ?>.html">Read On</a></i>      
<?php
}

 mysql_close($con);
 ?>
</div>            
<?php include('sidebar.php'); ?> 
```

侧边栏：

```
 </div>
 </div>
 <br /><br />
 <div id="footer">
 <p>© Copyright Lewes & Mathias / InteritumCraft 2012\. All rights reserved</p>  
 </body>
 </html> 
```

我正在使用具有所有功能和组件的最新引导程序。为什么下拉菜单不能切换？div id=

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T18:36:58.173

不需要直接添加`bootstrap-dropdown.js`，因为 js 文件`bootstrap.js`中已经包含了 bootstrap 使用的所有 jQuery 插件。

在 Chromium 23 上，使用这两个脚本禁用功能而不显示任何错误消息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-09-13T22:08:25.107

在引用 bootstrap js 之前，您必须先引用 Jquery。

# jquery - 使用 Jquery 重置 Dom，然后再次对其进行操作

> ID：13333066
> 
> 赞同：5
> 
> 时间：2012-11-11T16:28:02.487
> 
> 标签：jquery

我想将 DOM 重置为原始状态，然后再次对其进行操作。

我发现[最好的方法](https://stackoverflow.com/questions/7671965/how-to-reset-dom-after-manipulation)如下：

```
// Clone the Dom and assign it to a variable
divClone = $("#document").clone();

// .... More Code ......

// When required, replace the DOM with with the cloned variable. 
       $("#document").replaceWith(divClone); 
```

唯一的问题是您无法再次操作新重置的 DOM。

我整理了一个[JSFiddle](http://jsfiddle.net/big_smile/JCtJh/2/)，它使用了一个添加类的简单示例。您可以单击“测试”链接添加一个类。然后，您可以单击“重置”将 DOM 返回到其原始状态。但是，如果您再次单击“测试”链接，则不会再向恢复的 DOM 添加更多类。（显然，这只是一个简化的示例。有更好的删除和添加类的方法）。

如何操作恢复的 DOM？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-11T16:48:59.377

您的代码按预期工作，问题是您克隆的 DOM 没有绑定到它的处理程序。

您有 2 个选项，第一个是在绑定所有处理程序后克隆，传递`true`给`withDataAndEvents` [`clone`](http://api.jquery.com/clone/)方法参数：

```
$(".test").click(function() {
    $("#document").addClass("green");
});

$(".reset").click(function() {
    $("#document").replaceWith(divClone.clone(true));
});

var divClone = $("#document").clone(true); 
```

[**小提琴**](http://jsfiddle.net/JCtJh/7/)

* * *

第二种选择是使用[事件委托](http://api.jquery.com/on/#direct-and-delegated-events)。

```
var divClone = $("#document").clone();

$(document).on('click', '.test', function() {
    $("#document").addClass("green");
}).on('click', '.reset', function() {
    $("#document").replaceWith(divClone.clone());
}); 
```

[**小提琴**](http://jsfiddle.net/JCtJh/6/)

第二种方法的缺点是所有事件都必须冒泡到文档级别，并且您无法取消冒泡`event.stopPropagation()`。

* * *

**编辑：**更新了用克隆的克隆替换的答案，以便原始克隆在初始状态下始终保持安全，并且可以作为以后重置的基础。

# php - 使用 php 连接到灯服务器上的数据库

> ID：13333067
> 
> 赞同：0
> 
> 时间：2012-11-11T16:28:08.330
> 
> 标签：php, mysql, ssh, lamp

我在灯服务器上有一个数据库，想用我家的 Windows 7 电脑连接到这个数据库并使用查询。

使用 putty，我可以使用 ssh 连接服务器。先用ssh连接，再连接mysql数据库。

在 php 中，我是否需要使用 phpseclib 之类的 ssh2 库并通过 ssh2 连接并使用交互式 shell，或者是否有直接与数据库连接的方法。从而跳过外壳？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T16:38:31.037

看看这个：

```
<?php
  $connection = mysql_connect("localhost","root_user","root_password")
         or die("problems connecting to DB.");

  mysql_select_db("my_database",$connection) 
         or  die("Problems selecting DB.");

  $records = mysql_query("select id, name, school from students",$connection) 
         or die("Problems on querying " . mysql_error() );

  while ($record = mysql_fetch_array($records)) {
    echo "id: " . $record['id'] . "<br>";
    echo "name: " . $record['nombre'] . "<br>";
    echo "school: " . $record['school'] . "<br>";
  }
  mysq_close($connection);
?> 
```

# android - 获取自定义布局 SimpleCursorAdapter 的行 ID

> ID：13333068
> 
> 赞同：0
> 
> 时间：2012-11-11T16:28:27.583
> 
> 标签：android, simplecursoradapter, android-contentresolver

我在 AlertDialog 片段中应用了自定义 SimpleCursorAdapter，以便在列表条目中创建带有嵌入按钮的自定义列表布局。当我尝试在 ClickListener 中为我的 ContentResolver 获取 _id 时，我无法尝试找到正确的 id 值。我目前正在使用“位置”，但这是列表中的位置，而不是基础 id AFAIK。

```
public class ProfileSelectFragment extends DialogFragment {
    private static final String DEBUG_TAG = "ProfileSelectFragment";
    protected int layout = R.layout.profileselect_dialog;
    final Fragment fragment0 = new LoadedProfilesFragment();

    protected SimpleCursorAdapter listAdapter;
    protected String[] uiBindFrom = { ProfilesColumns.USERNAME, ProfilesColumns.CREATIONDATE };
    protected int[] uiBindTo = { R.id.title, R.id.creationdate };
    protected int entryLayout = R.layout.profileselect_list_item;
    protected final Uri table = ProfileProvider.URI_LOADEDPROFILEVIEW;
    protected String[] projection = { CommonDatabaseHelper._ID, ProfilesColumns.USERNAME, ProfilesColumns.CREATIONDATE };

    static ProfileSelectFragment newInstance() {
        ProfileSelectFragment f = new ProfileSelectFragment();
        return f;
    }

    @Override
    public Dialog onCreateDialog(Bundle savedInstanceState) {
        LayoutInflater inflater = ((LayoutInflater) getActivity().getSystemService(Context.LAYOUT_INFLATER_SERVICE));
        View customView = inflater.inflate(layout, null, false);
        Cursor c = getActivity().getContentResolver().query(table, projection, null, null, null);
        listAdapter = new SelectProfileAdapter(getActivity().getApplicationContext(), entryLayout, c, uiBindFrom,
                uiBindTo, CursorAdapter.FLAG_REGISTER_CONTENT_OBSERVER);

        Dialog myDialog = new AlertDialog.Builder(getActivity()).setView(customView)
                .setAdapter(listAdapter, new DialogInterface.OnClickListener() {
                    @Override
                    public void onClick(DialogInterface dialog, int which) {
                        Log.e(DEBUG_TAG, "NEVER CALLED");
                    }
                }).setNegativeButton("Cancel", new DialogInterface.OnClickListener() {
                    @Override
                    public void onClick(DialogInterface dialog, int which) {
                        Log.d(DEBUG_TAG, "cancel");
                    }
                }).create();
        final android.support.v4.app.FragmentManager fm = getActivity().getSupportFragmentManager();
        final android.support.v4.app.FragmentTransaction transaction = fm.beginTransaction();
        transaction.replace(R.id.fragment, fragment0);
        transaction.commit();
        return myDialog;
    }

    static class ViewHolder {
        public Button name;
        public Button logout;
        public int id;
        public int creationDate;
    }

    public class SelectProfileAdapter extends SimpleCursorAdapter {
        final static String DEBUG_TAG = "SelectProfileAdapter";
        int layout;
        Cursor c;
        private final LayoutInflater mInflater;

        public SelectProfileAdapter(Context context, int layout, Cursor c, String[] from, int[] to, int flags) {
            super(context, layout, c, from, to, flags);
            Log.d(DEBUG_TAG, "SelectProfileAdapter");
            this.layout = layout;
            this.c = c;
            mInflater = LayoutInflater.from(context);
        }

        @Override
        public View getView(final int position, View convertView, final ViewGroup parent) {

            ViewHolder holder;

            if (convertView == null) {
                convertView = mInflater.inflate(entryLayout, null);
                holder = new ViewHolder();
                holder.name = (Button) convertView.findViewById(R.id.title);
                holder.logout = (Button) convertView.findViewById(R.id.logout);
                holder.id = position;
                convertView.setTag(holder);
            } else {
                holder = (ViewHolder) convertView.getTag();
            }

            c.moveToPosition(position);         
            final String label = c.getString(label_index);
            holder.name.setText(label);
            ...

            holder.logout.setOnClickListener(new OnClickListener() {
                @Override
                public void onClick(final View v) {
                    ContentResolver cr = getActivity().getContentResolver();
                    String[] argument = { "" + position };
                    cr.delete(ProfileProvider.URI_LOADEDPROFILETABLE, CommonDatabaseHelper._ID + "=?", argument);
                }
            });
            return convertView;
        }

        @Override
        public boolean areAllItemsEnabled() {
            return false;
        }

        @Override
        public boolean isEnabled(int position) {
            return false;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T16:49:48.000

`holder.logout`你可以为ie设置一个标签

```
holder.logout.setTag(c.getint("_id")); 
```

在`getView()`方法中填充视图时。

并从ie`Button`中获取标签值`onClickListener()`

```
holder.logout.setOnClickListener(new OnClickListener() {
            @Override
            public void onClick(final View v) {
                int idField = (int) this.getTag();
                System.out.println("Id value - " + idField);
            }
        }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-11T16:58:26.783

您可以轻松地使用真实的 _id 而不是位置，替换

```
holder.id = position; 
```

和

```
holder.id = getItemId(position); 
```

您已经从底层 CursorAdapter 获得了此方法。

# node.js - Socket.io 连接仅在服务器重置时建立（nodejitsu）在本地工作正常吗？

> ID：13333069
> 
> 赞同：2
> 
> 时间：2012-11-11T16:28:30.130
> 
> 标签：node.js, express, socket.io, nodejitsu

所以基本上我正在使用 node.js/express/socket.io 制作一个简单的 RTS 棋盘游戏，以获得学习体验。到目前为止，一切都很顺利，虽然我几乎在那里工作，纯粹是在本地主机上工作。将其部署到 nodejitsu 并加载页面，但服务器没有将初始服务器数据发送到客户端。如果（当页面打开时，没有刷新）我重置服务器然后建立连接，整个事情按预期工作，但是访问服务器的客户端没有这样做。

服务器初始化代码：

```
 var express = require('express');
var app = require('express')()
  , server = require('http').createServer(app)
  , io = require('socket.io').listen(server);

server.listen(8080);

app.use(express.static(__dirname + '/public'));
app.get('/', function(req, res){

    res.sendfile("index.html");

});

app.get('/RTSwords', function(req, res){

    //res.sendfile("public\\RTSwords.html");
    res.sendfile("RTSwords.html");

}); 
```

服务器 socket.io 代码

```
// define interactions with client
io.sockets.on('connection', function(socket){
    //send them board and first seven tiles.

    socket.emit('serverNews', {'game': JSON.stringify(gameBoard), 'newTiles': randomTileString(7)}); 
```

和客户端socket.io代码

```
var socket = io.connect('http://MYURLHERE');
.......
socket.on('serverNews', function(data){
            update(data);
        }); 
```

所以是的，总而言之，它在本地工作，在加载页面并重新启动服务器时工作（我只是“jistu deploy”这样做）但不是在服务器运行时加载页面。

任何帮助将非常感激！

谢谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-11T16:58:37.763

在客户端使用`io.connect()`，如果您需要更多帮助，请加入 IRC 上的#nodejitsu，[http](http://webchat.jit.su) ://webchat.jit.su 或 irc://chat.freenode.net/#nodejitsu

# ruby-on-rails - ember 嵌套资源 FK 值在创建时

> ID：13333072
> 
> 赞同：1
> 
> 时间：2012-11-11T16:29:03.727
> 
> 标签：ruby-on-rails, ember.js, ember-data

我是 ember 的新手，从昨天开始我就一直在摸索。我想使用带有序列化程序的 ember 和 rails 制作一个简单的博客示例。

我已经能够为帖子制作 CRUD，没问题。大部分代码都在路由器中。

我的评论有问题，声明如下：

```
App.Comment = DS.Model.extend
   body: DS.attr('string')
   post: DS.belongsTo('App.Post')  

App.Post = DS.Model.extend
    title: DS.attr('string')
    body: DS.attr('string')
    comments: DS.hasMany('App.Comment',embedded: true) 
```

显示帖子的评论是可以的，路线看起来像： /#/posts/:id/comments 。

新评论链接位于评论列表的底部，因此创建新评论的路线是：

/#/posts/:id/comments/new

那时我遇到了问题：我如何告诉 ember-data 哪个帖子拥有该评论？我的意思是这样做的最佳做法是什么？

最后我决定在显示表单之前初始化comment.post_id，在路由器中对其进行编码。看起来像 ：

```
create: Em.Route.extend
   route: '/new'
   connectOutlets: (router, context) ->
      transaction = router.get('store').transaction()
      comment = transaction.createRecord(App.Comment)
      comment.set('post_id', router.get('postController').get('id'))
      router.get('applicationController').set('transaction', transaction)
      router.get('commentsController').connectOutlet
          viewClass: App.EditCommentView
          controller: router.get('commentController')
          context: comment
   save: (router, event) ->
       router.get('applicationController.transaction').commit()
       router.transitionTo('index') 
```

但是不行，回到服务器，post请求对post_id没有任何价值。

我尝试在表单中为 post_id 添加一个输入字段，以在保存之前检查该值，并且该值存在且正确。

我试图调试提交表单时触发的路由器中的保存功能。这里的 post_id 值也是正确的。

我一定是错过了什么，但地狱我不知道是什么.....

菲利普

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T16:27:02.173

您应该在评论上设置帖子，而不是通过`post_id`属性。

是的，`post_id`您的服务器和 Ember Data 将如何序列化关联的外键，但这是 Ember Data 想要从您那里抽象出来的细节。在与模型交互时，您不应该知道或关心关联数据（或任何数据，实际上）是如何由 Ember Data 序列化并传递给服务器的。（事实上​​，与 Rails 不同，`post_id`它永远不会作为属性存在于您的`Comment`记录中。）

相反，您应该简单地与模型中定义的属性和关联进行交互。如果您有一个`Comment`具有`post`belongsTo 关联的模型，那么只需使用`comment.set('post', post)`. 它的行为就像`comment.post = post`在 Rails 中一样，为您处理所有细节。

# html - CSS 菜单 - 两行应该删除填充

> ID：13333074
> 
> 赞同：0
> 
> 时间：2012-11-11T16:29:17.127
> 
> 标签：html, css

我有一个问题，我还没有找到解决方案。我有一个非常简单的菜单：[jsfiddle](http://jsfiddle.net/qsESh/)

如您所见，由于 padding-top，第一个项目位于中间，现在这很好，但其余项目有 2 行，因此填充将它们向下推。

有没有办法定义“如果项目有 2 行，则删除 padding-top”？

HTML：

```
<div class="menu">
<ul class="foldoutmenu">
<li class="current menuitem1 firstitem "><a href="/angsthaantering.aspx"><span class="foldoutmenu_title">Angsthåntering</span></a></li>
<li class="menuitem2 "><a href="/haandter-din-depression.aspx"><span class="foldoutmenu_title">Håndter din depression</span></a></li>
<li class="menuitem3 "><a href="/laer-at-leve-med-adhd-som-voksen.aspx"><span class="foldoutmenu_title">Lær at leve med ADHD som voksen</span></a></li>
<li class="menuitem4 "><a href="/styr-din-spiseforstyrrelse.aspx"><span class="foldoutmenu_title">Styr din spiseforstyrrelse</span></a></li>
<li class="menuitem5 lastitem "><a href="/personlig-udvikling-via-musik-og-kunst.aspx"><span class="foldoutmenu_title">Personlig udvikling via musik og kunst</span></a></li> 
```

​</p>

CSS：

```
.menu, .menu ul { float: left; width: 100%; background: #464646; height: 41px; border-top: 1px solid #000; border-bottom: 1px solid #000; }
.menu ul { margin: 0; padding: 0; }
.menu a { color: #e4e4e4; text-decoration: none; font-weight: bold; font-size: 18px; }
.menu li { float: left; margin: 0px; padding:10px 10px 0 10px; width:170px; height:32px; border-right: 1px solid #000; list-style-type: none; }
.menu li ul { position: absolute; left: -999em; top:42px; left:0; }
.menu li:hover ul { left: 0; }

.menu ul li.current a { text-decoration:none; }
.menu ul li.current { background:#c1001f; } 
```

我/希望我的问题足够清楚。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T16:31:09.910

没有办法给出纯**CSS 解决方案**。但你可以做点什么。

### 案例一：JavaScript

找到最高的元素，将高度应用于所有元素。你可以这样做：

```
var maxHeight = Math.max.apply(null, $("#menu li").map(function ()
{
    return $(this).height();
}).get()); 
```

### 案例 2：CSS

给一个`nowrap`和`ellipsis`。

```
.menu a span {width: 100px; white-space: nowrap; text-overflow: ellipsis; overflow: hidden;} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-11T16:43:55.787

您可以制作 items`display: table-cell;`和 parent `table-row`。然后设置`vertical-align: middle;`属性：

[http://jsfiddle.net/qsESh/1/](http://jsfiddle.net/qsESh/1/)

如果您不想让项目分布在页面的整个宽度上，请使`<ul>`元素更小。

编辑：您还可以将 a`min-width`或设置`width`为`<li>`元素以使它们更大。虽然这样的菜单可能比页面本身更宽：http: [//jsfiddle.net/qsESh/2/](http://jsfiddle.net/qsESh/2/)

# qt - 当 QImage 是从它构造并可能浅复制时，我们什么时候可以删除帧缓冲区？

> ID：13333076
> 
> 赞同：2
> 
> 时间：2012-11-11T16:29:32.400
> 
> 标签：qt, object-lifetime, qimage

在这个问题中，我想知道维护与 QImage 对象关联的外部缓冲区对象的生命周期的最佳实践。

**背景**

我正在用 QT 开发一个未压缩的图像文件查看器。它从文件中读取 YV12 数据，将其转换为 RGB 帧缓冲区，构造 QImage 对象，并将其传递到 UI 层进行渲染。

YV12 文件阅读器看起来像这样。

```
class YV12Frame
{
public:
    YV12Frame(std::string const& fileName)
    {
        // Initialize m_frameBuffer
        // ... (Omitted for brevity)
    }

    QImage GetQImage()
    {
        // Build QImage object
        return QImage(m_frameBuffer, WIDTH, HEIGHT, QImage::Format_RGB32); 
    }

private:
    unsigned char m_frameBuffer[WIDTH * HEIGHT * 4];
}; 
```

正如 QT 文档所说，我们需要在 QImage 对象的整个生命周期内保持 YV12Frame 对象有效。

UI 层可以通过浅拷贝或深拷贝来拷贝 QImage 对象。换句话说，一次可能有未知数量的 QImage 对象引用帧缓冲区。

**问题**

我们如何知道何时安全地删除 YV12Frame 对象？

**预期答案**

有一个通知（回调或其他）告诉“嘿，我是最后一个引用帧缓冲区的 QImage 对象，我即将被删除。你现在可以安全地删除帧缓冲区。”

但是，我找不到这样的通知。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T06:07:15.143

以下解决方法可能适合您的需要。

代替数组，存储一个真正的 QImage 对象作为 YV12Frame 的私有成员（使用正确的宽度和高度初始化）。`GetQtImage()`这是您需要从函数返回的对象。由于 QImage 隐式共享，您可以随时安全地删除 YV12Frame，因为任何其他 QImage 实例在发生时都会分离自己的像素数据。

[在您的帧解码中，通过通常的setPixel()](http://doc.qt.digia.com/qt/qimage.html#setPixel-2)函数更改 QImage 的内容。

如果速度很关键，那么您不能使用 setPixel ，因此您需要直接操作像素数据。这里的技巧是防止 QImage 分离像素数据。因此，您需要使用[constBits()](http://doc.qt.digia.com/qt/qimage.html#constBits)或[constScanLine()](http://doc.qt.digia.com/qt/qimage.html#constScanLine)，将其转换为非常量指针，然后直接访问它（丑陋，我知道）。

# c# - 扩展以显示字段 - Visual Studio C#

> ID：13333077
> 
> 赞同：0
> 
> 时间：2012-11-11T16:29:33.830
> 
> 标签：c#, visual-studio-2010, listview, expandablelistview, windows-forms-designer

我将有一个是和否单选按钮，如果用户选择是，它将展开并显示更多字段，如果不是，则不会。现在，我想有两个不同的面板，第二个将被隐藏，当用户选择“是”时，我可以将其设置为可见，它将显示在屏幕上。但是这样做的问题是隐藏面板的位置会有很大的差距。

还有另一种方法吗？

PS 我正在使用 Visual Studio 2010 C# Windows 窗体。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T16:05:29.580

我决定使用面板并在调用时将可见性设置为 true，在不需要时将可见性设置为 false。

# html - Internet Explorer 错误

> ID：13333079
> 
> 赞同：-6
> 
> 时间：2012-11-11T16:29:37.507
> 
> 标签：html, internet-explorer

我在使用 IE 浏览器时遇到了问题...我一切正常，直到我尝试检查资源管理器大声笑。

无论如何，我想创建固定位置的顶部菜单，但 IE 得到了不同的边距，然后是 moizila 或任何其他高级浏览器。

```
 <center>
        <div class="header-line">
          <ul id="navigation">
             <li><a href="forum.php" class="a1">Soldier Of Fortune 2</a></li>
             <li><font style="color: #464545">|</font></li><li><a href="forum.php" class="a2">Index</a></li>
             <li><font style="color: #464545">|</font></li>
             <li><a href="members.php" class="a2">Members</a></li>
             <li><font style="color: #464545">|</font></li>
             <li><a href="download.php" class="a2">Downloads</a></li>
             <li><font style="color: #464545">|</font></li>
             <li><a href="tutorials.php" class="a2">Tutorials</a></li>
             <div class="header-line1">
                <li>
                  <a class="a" href="profile.php" title="View Profile">
                    <?php echo $_SESSION['username']; ?>
                  </a>
                </li>
                <li><font style="color: #464545">|</font></li>
                <li><a href="logout.php">Log Out</a></li>
             </div>
          </ul>
        </center>

.header-line1 {
    position:fixed;
    color: #fff;
    float: right;
    margin-top: -30px;
    margin-left: 1100px;
    width: 300px;
    height: 25px;
    padding: 10px;
    text-align: left;
    /* For WebKit (Safari, Google Chrome etc) */
    background: -webkit-gradient(linear, left top, left bottom, from(#2c2a2a), to(#131010));
    /* For Mozilla/Gecko (Firefox etc) */
    background: -moz-linear-gradient(top, #2c2a2a, #131010);
    /* For Internet Explorer 5.5 - 7 */
    filter: progid:DXImageTransform.Microsoft.gradient(startColorstr=#2c2a2a, endColorstr=#131010);
    /* For Internet Explorer 8 */
    -ms-filter: "progid:DXImageTransform.Microsoft.gradient(startColorstr=#2c2a2a, endColorstr=#131010)";
} 
```

感谢所有帮助者

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-11T16:36:59.027

您的 HTML 无效。

无序列表 ( `ul`) 只能包含列表项 ( `li`) 作为它们的第一个后代。`font`-tag 或`div`容器不能直接作为父级，`ul`但您可以将它们放在`li`.

还要确保所有元素都正确关闭。你有一个未关闭的`div`.

如果您的 HTML 无效，您会得到奇怪的结果。首先修复您的验证，看看是否有帮助。

# java - Java getImage() 位置 (NetBeans IDE)

> ID：13333081
> 
> 赞同：0
> 
> 时间：2012-11-11T16:29:39.530
> 
> 标签：java, icons

我正在熟悉 NetBeans 并使用 Java 完成我的第一个教程。

我没有看到我的系统托盘图标出现，我怀疑我将图标放置在项目文件中的错误位置。这是我在 SysTray.java 中的代码：

```
package systray;

import java.awt.*;

public class SysTray {

    public static void main(String[] args) {

        Runnable runner;
        runner = new Runnable() {

    public void run() {
      if (SystemTray.isSupported()) {
          SystemTray tray = SystemTray.getSystemTray();
          Image image = Toolkit.getDefaultToolkit().getImage("MyIcon.png");
          PopupMenu popup = new PopupMenu();
          MenuItem item = new MenuItem("A MenuItem");
          popup.add(item);
          TrayIcon trayIcon = new TrayIcon(image, "The Tip Text", popup);
          try {
            tray.add(trayIcon);
          } catch (AWTException e) {
            System.err.println("Can't add to tray");
          }
        } else {
          System.err.println("Tray unavailable");
        }

      }
    };
    EventQueue.invokeLater(runner);
  }
} 
```

我将“MyIcon.png”放在与 SysTray.java（主）相同的目录中。但我实际上猜想那是我应该放置它的地方。

这是目录结构：

系统托盘/

*   源包/ - systray/ - SysTray.java
*   源包/ - 系统托盘/ - MyIcon.png
*   图书馆/

我在系统托盘中看到图标的空白区域，当我将鼠标悬停时，我确实看到了“提示文本”。但没有图标。

我也没有收到来自 NetBeans 的关于丢失图像的错误。所以，我被困住了

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T18:47:44.110

您可以通过指定图像的绝对路径来使您的方式工作，例如“C:\MyProjects\projectname\packagename\MyIcon.png”

您想要的是将图像作为资源加载，而不是直接从文件系统加载（当您部署为 jar 时）。像这样：

```
String imageLocation = "/systray/MyIcon.png";
URL imageURL = this.getClass().getResource(imageLocation);
Image image = Toolkit.getDefaultToolkit().getImage(imageURL); 
```

有关如何添加资源文件夹（用于图像、音频等）的信息，请参阅[如何从 NetBeans 中的“资源”文件夹中正确获取图像。](https://stackoverflow.com/questions/6845231/how-to-correctly-get-image-from-resources-folder-in-netbeans)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-04-21T18:48:17.857

图像文件夹 - 使用 NetBeans IDE 12.x

在“resources”文件夹中保存图像，例如“Sample.png”，该文件夹将与“java”文件夹在同一层次结构中。（构建项目时会自动提取资源文件夹内容，并与编译的类一起发送到jar文件。）jar文件将存储在父项目文件夹下的'target'文件夹中。

接下来将资源文件夹的所有内容手动复制到项目文件夹中，就像项目文件夹中的文件一样。（这些将用于 IDE 中的代码测试）

用于在代码中编码图像访问，例如

```
img = ImageIO.read(new File("Sample.png")); 
```

只需键入所有需要的图像文件名。构建项目，您将在 jar 文件的“target”文件夹中看到包含在 java 类中的图像文件。打开 jar 文件以查看已编译的类和图像。

使用 java 命令“java classname”正常执行类文件。

要从命令行运行类文件，首先将 jar 解压缩到计算机上的任何位置，然后 cd 到该文件夹​​。***确保在更新或替换资源后始终将资源文件夹内容直接复制到项目文件夹***

这些文件夹之外的任何资源都需要额外的代码来处理计算机中这些位置的绝对路径。

# .htaccess - 如何使用.htaccess 将除一种语言之外的所有语言重定向到我的页面的英文版本？

> ID：13333082
> 
> 赞同：0
> 
> 时间：2012-11-11T16:29:38.313
> 
> 标签：.htaccess, mod-rewrite, redirect, multilingual

我有一个德语和英语版本的系统，我正在尝试设置`.htaccess`将所有非德语语言重定向到我网站的英语版本。

为了测试，我正在尝试这个：

```
<IfModule mod_rewrite.c>
    # Redirect non German to English site
    RewriteCond %{HTTPS} !=on
    #RewriteCond %{HTTP:Accept-Language} de [NC]
    RewriteRule ^(.*)$ /$1?Sprachwechsel=EN [R,L,QSA]
</IfModule> 
```

当浏览器语言是德语时，它应该转发到英语页面。然而，什么也没有发生。

**问题：**
我只知道非常基本`.htaccess`的，所以我的代码片段有问题吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T16:45:55.713

除非您的帖子中有错字，否则您检查语言的行会在您发布的代码中被注释掉。

我没有对此进行测试，但看起来你真的很接近，然后被注释掉可能只是错过了对德语的否定。

```
<IfModule mod_rewrite.c>
    # Redirect non German to English site
    RewriteCond %{HTTP:Accept-Language} ^de [NC]
    RewriteRule ^(.*)$ /$1?Sprachwechsel=EN [R,L,QSA]
</IfModule> 
```

# svg - 在 d3js 中刷新图形

> ID：13333084
> 
> 赞同：0
> 
> 时间：2012-11-11T16:29:43.890
> 
> 标签：svg, d3.js, nodes

我已经使用 d3.js 库有一段时间了，我喜欢可视化，但我很难准确地实现我需要的东西。

我正在尝试做的事情：

*   我构建了一个图形，其中心节点的样式与其他节点不同。可视化在中心有一个标签（一个 id=node0 的特殊节点），连接到该标签的是其他样式节点。

*   当用户点击提交时，ajax 调用会刷新 javascript 信息并使用新节点重新启动模拟。

我已经按照我在这里看到的相同方式进行了设置：

[在 D3js 力图中添加和删除节点](https://stackoverflow.com/questions/11606214/add-and-remove-nodes-in-d3js)

我的刷新功能如下所示：

```
 function restart() 
 {

   for ( ii = 0; ii < nodes.length; ii++ ) {
   var n = nodes[ii];

   if (n.id == 0)
   {
      n.fixed = true;
      n.x = w/2;
      n.y = h/2;
      continue;
   }

   mult1 = [ -1.0, -1.0, 1.0, 1.0 ];
   mult2 = [ 1.0, -1.0, -1.0, 1.0 ];
   n.x = w/2 + ii*5 * mult1[ii%4];
   n.y = h/2 + ii*5 * mult2[ii%4];
   }

 var node = svg.selectAll("g.node")
  .data(nodes, function(d) { return d.id;});

 var nodeEnter = node.enter().append("g")
  .attr("id", function(d) { return "node" + d.id })
  .attr("class", "node")
  .call(force.drag);

 node.exit().remove();

 node.each( function(d)  {

    if (d.id != 0)
    {
       n = svg.select("#node" + d.id);
       frame = n.append("svg:foreignObject")
         .attr("x", -1.0 * platewidth/2)
         .attr("y", -1.0 * plateheight/2)
         .attr("width", platewidth)
         .attr("height", plateheight)
         .on("click", showdetail)
         .on("tap", showdetail);
       frame.append("xhtml:div")
         .attr("class", "top-plate")
         .html(function(d) { return "<img src='/img/" + d.img + "'>" } );
       frame.append("xhtml:div")
         .attr("class", "btm-plate")
         .html( function (d) { return d.name });

       n.append("image")
         .attr("xlink:href", function(d) { return d.ownerimg })
         .attr("x", platewidth/2 - 35)
         .attr("y", plateheight/2 - 15)
         .attr("width", 30)
         .attr("height", 30)
         .on("click", showdetail)
         .on("tap", showdetail);

      n.append("image")
         .attr("xlink:href", function(d) { return d.houseimg })
         .attr("x", platewidth/2 - 70)
         .attr("y", plateheight/2 - 15)
         .attr("width", 30)
         .attr("height", 30)
         .on("click", showdetail)
         .on("tap", showdetail);
    }
    else
    {
        querytext = d.query;
        n = svg.select("#node" + d.id);
        n.append("text")
          .attr("text-anchor", "middle")
          .text(querytext);    

        n.attr("transform", function(d) {
           return "translate(" + d.x + "," + d.y + ")";
        });    
    }

  });

    force.start();

 } 
```

我遇到的问题：

*   节点的第二个 DIV 元素（HTML 元素包含 d.name 的那个）不会在 Chrome 中重新定位。它在 Firefox 中运行良好，但在 Chrome 中，所有这些 DIV 都显示为 0,0。请注意，这些节点的第一个 DIV（具有 img 标签）以及附加到节点的所有图像都显示良好并正确重新定位。这只是第二个 DIV，它没有与关联的节点重新定位。

*   我无法让 node0 的标签文本正确更新/更改。当我在（使用 d.query）中传递新文本时，该文本会覆盖旧文本，以便两者都显示出来。我想我需要先删除与 node0 关联的“文本”元素，但我不知道该怎么做。

*   一般来说，我不确定我是否以正确的方式使用这个库。这里的困难源于这样一个事实，即我在节点上附加了很多内容，并且我有一个特殊的中央节点，其行为与其他节点不同。因此，任何有关如何更好地做到这一点的指示将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-20T11:29:35.273

我认为您的第二个问题可以通过使用来解决

```
n.selectAll("text")
.attr("text-anchor", "middle")
.text(querytext); 
```

代替

```
n.append("text")
.attr("text-anchor", "middle")
.text(querytext); 
```

# mysql - 在mysql中加入具有不相等字段的多个表

> ID：13333086
> 
> 赞同：0
> 
> 时间：2012-11-11T16:29:57.623
> 
> 标签：mysql, join, union

我已经尝试了一段时间。我尝试了 UNION 和假（一左一右连接）完全连接。我对 sql 不是很好，所以也许我偶然发现了解决方案，但做错了。

对于这个例子，我有三个表（我可能有更多的时间）。

```
post:
 ----------------------------
|  type  |  rel_id  |   id   |
 ----------------------------
|  video |     2    |    51  |
|----------------------------|
|  text  |     1    |    50  |
 ----------------------------

video:
 ----------------------------
|  id |  video_url |  title  |
 ----------------------------
|  2  |     ...    |    ...  |
|----------------------------|
|  1  |     ...    |    ...  |
 ----------------------------

text:
 ----------------
|  id |  contend |
 ----------------
|  2  |    ...   |
|----------------|
|  1  |    ...   |
 ---------------- 
```

post表是主表。类型字段显示要加入的表。字段 rel_id 表示要连接到哪一行。

我可以使用这样的一些输出：

```
 ------------------------------------------
| id | type  | video_url | title | contend |
 ------------------------------------------
| 51 | video |    ...    |  ...  |   NULL  |
|------------------------------------------|
| 50 | text  |    NULL   |  NULL |   ...   |
 ------------------------------------------ 
```

最后一个问题是最后一个 WHERE 子句需要是空闲的，以便我可以使用它来搜索所有结果。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T16:39:41.000

你可以试试：

```
SELECT p.id AS id, p.type AS type, v.video_url AS video_url, 
       v.title AS title, NULL AS contend
FROM post p INNER JOIN video v 
  ON p.rel_id = v.id AND p.type = 'video'
UNION
SELECT p.id, p.type, NULL, NULL, t.contend
FROM post p INNER JOIN text t
  ON p.rel_id = t.id AND p.type = 'text' 
```

# php - 在 Zend 表单前添加自定义 html

> ID：13333088
> 
> 赞同：0
> 
> 时间：2012-11-11T16:30:01.827
> 
> 标签：php, forms, zend-framework

我正在编写我的第一个 Zend PHP 应用程序，我需要一些帮助。我通过创建扩展 Zend_Form 的类来生成我的表单，并在 init() 中添加如下元素：

```
 $user = $this->addElement('text', 'user', array(

    'filters'    => array('StringTrim'),

    'validators' => array(

            array('StringLength', false, array(3, 30)),

        ),

    'required'   => true,

    'label'      => 'Name',

        'size' => 30 

    )); 
```

现在我需要在我的表单前面加上自`<p>`定义文本的自定义 html 段落（元素）。我怎么能做到这一点？

PS：我使用的是旧的 ZEND（ZF2 之前）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T18:32:17.433

您可以在将呈现表单的视图中插入任何一段 html 代码，如下所示：

```
file: formView.phtml

----------
<p> Here's my text </p>

<?php echo $this->form; ?> 
```

但是，如果您希望 <p> 块位于 <form> 标记内，我会使用 viewscript 装饰器来实现它。

在表单类的 init 方法中添加类似的内容：

```
$this->setDecorators(array(
        array('ViewScript', array('viewScript' => 'templates/myForm.phtml'))
    )); 
```

在 templates/myForm.phtml 文件中，您可以以任何您想要的方式呈现您的表单。这是一个例子：

```
<?php $form = $this->element; ?>
<form action="<?php echo $form->getAction(); ?>">
      <p> Your text goes here </p>
     <?php echo $form->user; ?>
</form> 
```

我希望我说清楚了。如果您有任何疑问，请随时询问

您可以在此处阅读有关 viewscript 装饰器的更多信息 [http://framework.zend.com/manual/1.12/en/zend.form.standardDecorators.html#zend.form.standardDecorators.viewScript](http://framework.zend.com/manual/1.12/en/zend.form.standardDecorators.html#zend.form.standardDecorators.viewScript)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T11:26:17.037

看看这个装饰器可能会有所帮助

```
$this->setDecorators(array(

           'FormElements',
           array(array('data'=>'HtmlTag'),array('tag'=>'p')),
           'Form'

   )); 
```

# javascript - Javascript Value 由几个单词组成 [value=dog crazy]

> ID：13333094
> 
> 赞同：1
> 
> 时间：2012-11-11T16:30:51.467
> 
> 标签：javascript, html, radio-button, greasemonkey, words

感谢这个论坛的帮助，我能够让我的代码工作：

```
// ==UserScript==
// @name        PARINGO
// @description Auto select rpt radio button
// @namespace   PARINGO
// @include     https://docs.google.com/spreadsheet/viewform?formkey=dG1fdUU1bTR5R1l3dmtGS095QVYxZlE6MQ
// @require     http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js
// @grant       GM_addStyle
// @version     1
// ==/UserScript==
/*- The @grant directive is needed to work around a design change introduced
    in GM 1.0\.   It restores the sandbox.
*/
//-- Note that :contains() is case-sensitive
var questionLabel   = $(
    "label.ss-q-title:contains('How much is 1+1') ~ ul.ss-choices"
).first ().find ("input[type=radio][value=2]");
questionLabel.prop ('checked', true);

var questionLabel   = $(
    "label.ss-q-title:contains('How much is 4+2') ~ ul.ss-choices"
).first ().find ("input[type=radio][value=6]");
questionLabel.prop ('checked', true); 
```

制作此脚本的原因是检查标签并标记正确答案。但如果响应由两个或多个单独的单词组成。没有作品，例如：

```
var questionLabel   = $(
        "label.ss-q-title:contains('How much is 4+2') ~ ul.ss-choices"
    ).first ().find ("input[type=radio][value=dog crazy]");
questionLabel.prop ('checked', true); 
```

这适用于谷歌文档中的表单： [Form Google Docs](https://docs.google.com/spreadsheet/viewform?formkey=dG1fdUU1bTR5R1l3dmtGS095QVYxZlE6MQ)

任何人都可以告诉我该值如何接受单独的单词？

```
("input[type=radio][value=dog crazy]") 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-11T16:33:10.157

如果一个属性由多个单词组成，则必须使用如下引号：

```
"input[type=radio][value='dog crazy']" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-11T16:33:12.333

尝试将值放在引号中

```
"input[type=radio][value='dog crazy']" 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-11T16:36:06.283

您正在使用[jQuery 的](http://jquery.com/) [find](http://api.jquery.com/find/)方法。将值放在引号中：

```
"input[type=radio][value='dog crazy']" 
```

在选择器中的[属性](http://api.jquery.com/category/selectors/attribute-selectors/)的 jQuery[文档](http://docs.jquery.com/)中有这样的示例。例如：

*   单引号内的双引号：`$('a[rel="nofollow self"]')`
*   双引号内的单引号：`$("a[rel='nofollow self']")`

具体来说，文档状态：

> 选择器表达式中的属性值必须遵循 W3C CSS 选择器的规则，通常这意味着除了简单标识符之外的任何内容都应该用引号引起来。

# c# - 部署 WCF 客户端时出错 - “在 SQL 目录中找不到 system.servicemodel”

> ID：13333101
> 
> 赞同：0
> 
> 时间：2012-11-11T16:31:33.103
> 
> 标签：c#, sql-server, wcf, triggers, clr

我正在尝试完成教程，`http://www.codeproject.com/Articles/21149/Invoking-a-WCF-Service-from-a-CLR-Trigger`但在尝试部署客户端时遇到问题，输出中出现以下错误：

> 部署错误 SQL01268：.Net SqlClient 数据提供程序：消息 6503，级别 16，状态 12，第 1 行程序集“system.servicemodel，版本=3.0.0.0，文化=中性，publickeytoken=b77a5c561934e089。” 在 SQL 目录中找不到。

我正在使用 c# 2010、.NET 4.0 和 SQL Server Express 10。

我尝试将项目更改为使用 .NET Framework 3.0 和 3.5，但我仍然收到相同的错误。请问有谁知道如何解决这个问题？

编辑

这可能与我尝试将以下程序集添加到 SQL Server 时遇到的错误有关。

```
CREATE ASSEMBLY SMDiagnostics 
FROM 'C:\Windows\Microsoft.NET\Framework\v3.0\Windows Communication Foundation\SMDiagnostics.dll'
WITH permission_set = UNSAFE
GO

CREATE ASSEMBLY [System.Web] 
FROM 'C:\Windows\Microsoft.NET\Framework\v2.0.50727\System.Web.dll'
WITH permission_set = UNSAFE
GO

CREATE ASSEMBLY [System.Messaging] 
FROM 'C:\Windows\Microsoft.NET\Framework\v2.0.50727\System.Messaging.dll'
WITH permission_set = UNSAFE
GO

CREATE ASSEMBLY [System.IdentityModel] 
FROM 'C:\Program Files\Reference Assemblies\Microsoft\Framework\v3.0\System.IdentityModel.dll'
WITH permission_set = UNSAFE
GO

CREATE ASSEMBLY [System.IdentityModel.Selectors] 
FROM 'C:\Program Files\Reference Assemblies\Microsoft\Framework\v3.0\System.IdentityModel.Selectors.dll'
WITH permission_set = UNSAFE
GO

-- this will add service modal
CREATE ASSEMBLY [Microsoft.Transactions.Bridge] 
FROM 'C:\Windows\Microsoft.NET\Framework\v3.0\Windows Communication     Foundation\Microsoft.Transactions.Bridge.dll'
WITH permission_set = UNSAFE
GO 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-12-17T10:24:01.437

经过2天的反复试验，我终于让它工作了，就像这样：

（在**Windows Server 2008 x64、SQL Server 2008 64 位、使用 Framework 3.0 构建的程序集 DLL、任何 CPU 上**）。我建议您坚持使用适用于 SQL 2008 的 .Net 3。

```
alter database [TTBackup]
set trustworthy on;
go
USE TTBackup
--Register the assemblies referenced by our assembly.
CREATE ASSEMBLY SMdiagnostics AUTHORIZATION dbo FROM 'C:\Windows\Microsoft.NET\Framework\v3.0\Windows Communication Foundation\SMdiagnostics.dll' WITH permission_set = unsafe
CREATE ASSEMBLY [System.Web] AUTHORIZATION dbo FROM 'C:\Windows\Microsoft.NET\Framework64\v2.0.50727\System.Web.dll' WITH permission_set = unsafe
CREATE ASSEMBLY [System.Runtime.Serialization] AUTHORIZATION dbo FROM 'C:\Program Files (x86)\Reference Assemblies\Microsoft\Framework\v3.0\System.Runtime.Serialization.dll' WITH permission_set = unsafe
CREATE ASSEMBLY [System.IdentityModel.Selectors] FROM 'C:\Program Files (x86)\Reference Assemblies\Microsoft\Framework\v3.0\System.IdentityModel.Selectors.dll' with permission_set = unsafe 
CREATE ASSEMBLY [System.Messaging] AUTHORIZATION dbo FROM 'C:\Windows\Microsoft.NET\Framework\v2.0.50727\System.Messaging.dll' WITH permission_set = unsafe
CREATE ASSEMBLY [Microsoft.Transactions.Bridge] FROM 'C:\Windows\Microsoft.NET\Framework\v3.0\Windows Communication Foundation\Microsoft.Transactions.Bridge.dll' with permission_set = unsafe 

--register our assembly
CREATE ASSEMBLY [TTDatabaseIntegration] AUTHORIZATION dbo FROM 'D:\TTDatabaseIntegration.dll' WITH permission_set = unsafe
GO
--Register the UDF from CLR
CREATE FUNCTION [ListImportTemplates]( ) RETURNS TABLE(TemplateID int, TemplateName NVARCHAR(4000))
AS EXTERNAL NAME [TTDatabaseIntegration].[UserDefinedFunctions].[ListImportTemplates]
GO 

--Test my function 
select  * FROM dbo.[ListImportTemplates]() 
```

请注意，大多数引用的 DLL 都是 32 位的，但 System.Web 是 64 位的。（这是它对我有用的唯一方法）。

### 笔记：

1.  起初我注册了 64 位程序集，但它引发了运行时异常：`System.IO.FileLoadException: Could not load file or assembly 'System.ServiceModel, Version=3.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089' or one of its dependencies. Assembly in host store has a different signature than assembly in GAC. (Exception from HRESULT: 0x80131050) See Microsoft Knowledge Base article 949080 for more information.`

    我最终将 GAC 中的文件（按大小）与我在 SQL 中注册的文件进行了比较。（GAC 位于 C:\Windows\assembly，但您无法在资源管理器中查看该文件夹，我一直在使用[Total Commander](http://www.ghisler.com/)。）这就是我发现 GAC 中的版本是 32 位版本的方式。

2.  您可以使用此查询查看已注册的程序集：`SELECT * FROM sys.assemblies`

### 参考资料（逐步解释）：

1.  [http://nielsb.wordpress.com/sqlclrwcf/](http://nielsb.wordpress.com/sqlclrwcf/)
2.  [http://hyper-choi.blogspot.ro/2011/07/sql-2008-calling-wcf-service-from.html](http://hyper-choi.blogspot.ro/2011/07/sql-2008-calling-wcf-service-from.html)

# google-maps-api-3 - Google 地图和 IE8 Zoom + InfoWindow 问题

> ID：13333102
> 
> 赞同：1
> 
> 时间：2012-11-11T16:31:39.697
> 
> 标签：google-maps-api-3, sharepoint-2010

我有这个加载谷歌地图 API 的 JS

```
function initialize() {
    var mapOptions = { center: new google.maps.LatLng(41.123105, -73.370886),
        zoom: 8,
        mapTypeId: google.maps.MapTypeId.ROADMAP
    };

    var map = new google.maps.Map(document.getElementById('mapCanvas'), mapOptions);
}

google.maps.event.addDomListener(window, 'load', initialize); 
```

上面的 JS 放在一个文件中，并在这个 google maps api 调用之后加载

```
<script src="https://maps.googleapis.com/maps/api/js?v=3.exp&amp;sensor=false" type="text/javascript"></script>
<script src="/Style Library/js/locationmap.js" type="text/javascript"></script> 
```

上面的标签在头部，HTML如下

```
<div class="locationsMap">
    <div style="display: none;">
        <asp:Label runat="server" ID="lblCenterLatLng" CssClass="divCenterLatLng" />
    </div>
    <div id="mapCanvas" class="mapCanvas" style="width: 450px; height: 450px;" />
</div> 
```

我想我应该说所有这些都发生在 SharePoint Web 部件中，但它确实可以在 IE9 中按预期工作。

当地图在 IE8 中放大时，地图消失并呈白色。有任何想法吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T16:38:35.947

There is a problem with your IE8 specific css

# python - 如何将 Python 对象转换为正确的字符串表示形式

> ID：13333107
> 
> 赞同：0
> 
> 时间：2012-11-11T16:32:08.780
> 
> 标签：python

关于使用“hasattr”或“isinstance”来确定对象类型的争论很多。但是，我有一种情况，我试图构建一个查询`numexpr`，我需要引用字符串，而不是其他值。我打算使用以下代码：

```
def get_query(key_map):
    """
    Generate an equality query, based on key/value
    pair in key_map
    """
    stmnt = ""
    for k,v in key_map.items():
        value = '"%s"' % v if isinstance(v, str) else v
        if not stmnt:
            # first equality in statement
            stmnt = "'(%s == %s)" % (k,value)
        else:
            stmnt += " & (%s == %s)" % (k,value)

    if stmnt:
        # close statement
        stmnt += "'"
    return stmnt 
```

我也考虑`hasattr`过使用：

```
value = '"%v"' % v if hasattr(v,'lower') else v 
```

我曾经有一位音乐老师告诉我，只要你知道如何正确地打破规则，就可以打破规则。对我来说，这似乎是其中之一。有没有人建议用一种更 Pythonic 的方式来实现这段代码？

样本输入：

```
key_map = {'symbol':'APPL', 'price':698.38'} 
```

在上面的示例中，我想引用 APPL，因为它是一个字符串，而不是 698.38，因为它是一个浮点数。

问候

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-11T16:36:57.063

我想你可能会追求的是：

```
value = repr(v) 
```

此外，你的下半场*无论如何都**不会使用`value`*。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-11T16:39:03.110

然而，让我印象深刻的一件事是你的引号。假设您用引号括起来的字符串已经包含引号。@Eric 提出的答案会为您解决这个问题，它会正确处理转义字符串中的引号（如果有的话）。

# lua - 如何处理没有 coroutine.yield() 的 Lua 库？

> ID：13333108
> 
> 赞同：6
> 
> 时间：2012-11-11T16:32:09.887
> 
> 标签：lua, modularity, coroutine, luasocket

我想下载一个大文件并同时处理其他事情。

但是，[`luasocket.http`](http://luasocket.luaforge.net/)从不调用`coroutine.yield()`. 文件下载时，其他所有内容都会冻结。

这是一个说明性示例，我尝试同时下载文件并打印一些数字：

```
local http = require'socket.http'

local downloadRoutine = coroutine.create(function ()
    print 'Downloading large file'
    -- Download an example file
    local url = 'http://ipv4.download.thinkbroadband.com/5MB.zip'
    local result, status = http.request(url)
    print('FINISHED download ('..status..', '..#result..'bytes)')
end)

local printRoutine = coroutine.create(function ()
    -- Print some numbers
    for i=1,10 do
        print(i)
        coroutine.yield()
    end
    print 'FINISHED printing numbers'
end)

repeat
    local printActive = coroutine.resume(printRoutine)
    local downloadActive = coroutine.resume(downloadRoutine)
until not downloadActive and not printActive
print 'Both done!' 
```

运行它会产生这个：

```
1
Downloading large file
FINISHED download (200, 5242880bytes)
2
3
4
5
6
7
8
9
10
FINISHED printing numbers
Both done! 
```

如您所见，`printRoutine`是`resume`d 首先。它打印数字 1 和`yield`s。然后`downloadRoutine`是`resume`d，它下载*整个文件，而不产生*. 只有这样才能打印其余的数字。

我不想编写自己的套接字库！我能做些什么？

**编辑（同一天晚些时候）**：一些 MUSH 用户[也注意到了](http://www.gammon.com.au/forum/?id=11344)。他们提供有用的想法。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-12T22:33:41.683

我不明白为什么您不能使用[PiL 建议](http://www.lua.org/pil/9.4.html)或[copas 库（这与](http://keplerproject.github.com/copas/index.html)[此处](https://stackoverflow.com/a/13223515/1442917)给出的答案几乎相同）。

Copas 包装了套接字接口（不是`socket.http`），但你可以使用低级接口来获得你需要的东西（未经测试）：

```
require("socket")
local conn = socket.tcp()
conn:connect("ipv4.download.thinkbroadband.com", 80)
conn:send("GET /5MB.zip HTTP/1.1\n\n")
local file, err = conn:receive()
print(err or file)
conn:close() 
```

然后，您可以使用`addthread`from copas 为您提供一个非阻塞套接字，并在有东西要接收时使用`step/loop`函数来执行。`receive`

使用 copas 的工作量更少，而`settimeout(0)`直接使用则为您提供更多控制权。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-11T22:07:34.130

协程不是线程；他们是合作的，而不是同时的。当一个协程屈服于另一个协程时，它就会被阻塞。vanilla Lua 中不能有两个同时执行的指针。

但是，您可以使用外部库来实现该效果。最受欢迎的之一是[Lua Lanes](http://kotisivu.dnainternet.net/askok/bin/lanes/)。

# image - 以快速可靠的方式比较图像的好比较方法是什么？

> ID：13333113
> 
> 赞同：2
> 
> 时间：2012-11-11T16:32:37.473
> 
> 标签：image, matlab, image-processing, opencv, real-time

我正在实现粒子滤波算法以跟踪视频序列中的移动对象（每一帧都是彩色图像）。该算法对视频的帧进行迭代，在每次迭代时，将被跟踪对象（即前一帧中包含被跟踪对象的子图像）与当前帧的**N**个不同部分（即子图像）进行比较。可能包含对象的图像）。

被跟踪物体的大小可能会随时间变化，分配给**N**的值可能很高（100，或者几百），那么需要解决的问题如下。

1.  找到一种快速的方法来比较图像的两个部分，因为每次迭代都会执行 N 次。
2.  比较方法也应该是可靠的（即在**N**个可能的子图像中，应该选择与前一帧中包含被跟踪对象的子图像最相似的子图像）。
3.  最后，比较操作必须遵守实时约束：执行比较所需的时间必须是恒定的，或者它必须具有已知的上限。

我相信满足第三个约束的唯一方法是选择要比较的子图像的最大尺寸：这意味着必须调整任何较大的子图像的大小。你怎么看？

我可以使用什么比较方法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-16T19:00:11.780

我想您可以尝试使用均方误差方法比较图像，它通常用于估计两个图像的相似程度。

```
function [ mse ] = MSE( X, Y )
%MSE

  [x,y] = size(X);
  mse = 0;

  for i=1:x
    for j=1:y
      mse = double(mse) + double(power((X(i,j)-Y(i,j)),2));
    end
  end

  mse = mse / (x*y);
end 
```

# ruby - 如何在 Ruby 中搜索和替换字符串（不是正则表达式）？

> ID：13333116
> 
> 赞同：2
> 
> 时间：2012-11-11T16:33:02.067
> 
> 标签：ruby, replace

我以前使用 gsub 进行正则表达式匹配，但我应该为字符串文字调用什么？

我想`pair[0]`用在文件中找到的`pair[1]`任何地方替换。`pair[0]`

```
text = File.read( fname )  
@hash_old_to_new.each do
  |pair|
  puts "\tReplacing " + pair[0] + " with " + pair[1]
  # result = text.gsub( /pair[0]/, pair[1] )  <--- this is no good
end
File.open( fname, "w" ) { |file| file << result } 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-11T16:34:56.073

`gsub`也适用于字符串文字。

```
text.gsub!(pair[0], pair[1]) 
```

请注意，它`gsub`返回一个新字符串，而不是“就地”修改现有字符串。由于您的代码编写方式，这将导致您丢失更新。您可以使用`gsub!`，或者您可以像这样链接调用：

```
text = text.gsub(pair[0], pair[1]) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-11T16:40:44.167

你离答案不远：

在 gsub 中直接使用字符串：

```
result = text.gsub( pair[0], pair[1] ) 
```

或者在正则表达式中使用字符串：

```
result = text.gsub( /#{pair[0]}/, pair[1] ) 
```

# regex - 如何用 Vim 中每行开头从 1 开始的运行数字替换子匹配

> ID：13333120
> 
> 赞同：4
> 
> 时间：2012-11-11T16:33:35.387
> 
> 标签：regex, vim

我想用每行开头从 1 开始的递增索引的字符串替换每个子匹配，以便替换字符串为`varargin{1}`, `varargin{2}`,`varargin{3}`等。对于更大的数字，数字字符串自然需要多个字符， eg: `varargin{9}`, `varargin{10}`, 等。输入数据为MATLAB代码；示例输入和所需输出如下所示。我主要是在寻找 Vim 解决方案，但也可以通过其他方式来实现这一点。

下面的正则表达式创建从 1 开始的运行索引，但每行都会更改：

```
:let @a=1 | %s/\v.*'\zs.*\ze\);/\=substitute(submatch(0), '\s[a-zA-Z0-9{}_.]*', ' varargin{'.(@a+setreg('a',@a+1)).'}', 'g')/g 
```

我的问题是：

**如何在每行的开头将索引重置为 1，并在每个子匹配之间将索引增加 1？**

[上面的代码是http://vim.wikia.com/wiki/Substitute_with_incrementing_numbers](http://vim.wikia.com/wiki/Substitute_with_incrementing_numbers)上的“用升序替换”示例的修改版本：

```
:let @a=1 | %s/abc/\='xyz_'.(@a+setreg('a',@a+1))/g 
```

示例输入 #1：

```
messages.msg1.English = xprintf('analysis directory is on %s\n', analysis_dir); 
```

例如输入 #1 的所需输出：

```
messages.msg1.English = xprintf('analysis directory is on %s\n', varargin{1}); 
```

示例输入#2：

```
messages.msg15.English = xprintf('the following sessions (%d pcs) have been approved: %s', handling_struct.n_of_accepted, handling_struct.accepted_sessions_vector); 
```

例如输入 #2 的所需输出：

```
messages.msg15.English = xprintf('the following sessions (%d pcs) have been approved: %s', varargin{1}, varargin{2}); 
```

示例输入#3：

```
messages.msg19.English = xprintf('looking for files ''%s'' in %d separate dirs', give_file_struct.regex, number_of_dirs); 
```

例如输入#3的所需输出：

```
messages.msg19.English = xprintf('looking for files ''%s'' in %d separate dirs', varargin{1}, varargin{2}); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-11T18:45:38.713

在这种情况下，我会使用以下命令：

```
:g/^/let n=[0] | s/abc/\='xyz_'.map(n,'v:val+1')[0]/g 
```

另请参阅[我](https://stackoverflow.com/a/7369009/254635)对“<a href="https://stackoverflow.com/q/7366430/254635">如何在 Vim 中用编号标签替换 CSV 列分隔符？”问题的回答。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-11T18:01:01.433

这可能是一个 hacky 解决方案，但如果我想在没有函数的情况下快速执行此操作，那么我会执行以下操作：

```
:let i=1<cr>                                         "set the index variable
qbf lcEvarargin{<C-r>=i<cr>},<esc>:let i+=1<cr>q     "record a macro
u                                                    "undo those changes
:%norm$F':let i=1<C-v><C-j>1000@b<cr>                "run the macro on each line
:%s/,$/);/<cr>                                       "clean up 
```

请注意，我使用`<>`vim 中的符号来表示特殊键，因此`<cr>`表示回车并`<C-r>`表示 CTRL-R（请参阅 参考资料`:h i_CTRL-R`）。在命令行`<C-v><C-j>`中放入文字字符。`^@`这允许普通模式在不完成命令的情况下“按 Enter”。我`:norm`在这里使用宏而不是宏，因为当`:norm`抛出错误时，它只会移动到下一行。当宏抛出错误时（例如，`ft`当行中没有更多的 t 时尝试执行），那么它就完全失败了。这样我可以运行宏 1000 次，一旦失败就继续移动。同样，这可能不是最优雅的解决方案，但它确实有效，而且我的懒惰通常会胜出。

# windows-server-2008 - SSMS 2012 无法加载数据库

> ID：13333121
> 
> 赞同：4
> 
> 时间：2012-11-11T16:34:09.513
> 
> 标签：windows-server-2008, windows-server-2008-r2, sql-server-2012, msdn

当我尝试使用 Management Studio 2012 连接到 SQL Server 2012 时收到此错误消息。

> 未找到服务“Microsoft.SqlServer.Management.IRegistrationService”（Microsoft.SqlServer.Management.SDK.SqlStudio）

这是我得到错误的步骤。
1\. 启动 SQL 2012 management studio
2\. 它要求连接到数据库。连接到 SQL 2012 服务器服务器

然后它产生了这个错误。

没有附加组件，我一直在卸载并重新安装。做维修。仍然有错误。我们有 MSDN 订阅，我们安装的版本是 SQL 2012 Developer 版本。附带说明一下，我们可以将它安装在不同的服务器上。这两台服务器之间的唯一区别是一台运行的是 Windows 2008 Enterprise (R2 sp1)，而另一台运行的是 Windows 2008 Standard。Windows 2008 Enterprise 有问题。

有一件事想到，每当我运行管理工作室 2012 时，它给了我“用户帐户控制”的温暖，“您是否要允许以下程序对计算机进行更改”。运行管理工作室 2008 时，我没有这种变暖。谢谢，

任何建议表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-06-26T20:03:17.760

您必须在计算机上以管理员身份运行它才能避免出现这些错误。此外，您必须更新您在 SSMS 2008 上的任何附加组件，否则您将继续收到此错误。您当前是否安装了任何附加组件？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-08-04T09:34:08.650

从损坏的 ie 中获取错误：我错误地将“程序文件 (x86)\Internet Explorer”移动到了随机邻居文件夹中。

希望它可以帮助像我这样不幸的人：检查您是否可以运行 ie，无论这听起来离 SQL Server 有多远。

消息在我修复时消失了，即。

# ruby - 在 Sequel 中没有密码列的情况下验证密码的存在

> ID：13333124
> 
> 赞同：1
> 
> 时间：2012-11-11T16:34:24.963
> 
> 标签：ruby, sequel

我正在尝试验证是否存在“密码”，尽管我不想在我的数据库中有密码列...我将密码转换为密码盐。如何在没有密码列的情况下验证保存前加密的密码是否存在？

架构：

```
migration "create users table" do
  database.create_table :users do
    primary_key :id
    text        :name
    text        :email
    text        :username
    text        :password_hash
    text        :password_salt
    index       :username, :unique => true
  end
end 
```

用户模型：

```
class User < Sequel::Model

  require 'bcrypt'

  def before_save
    if password
      self.password_salt = BCrypt::Engine.generate_salt
      self.password_hash = BCrypt::Engine.hash_secret(password, password_salt)
    end
  end

  def validate
    super
    validates_presence  [:password,:email] if new?
    validates_unique    [:email]
  end

  def self.authenticate(email, password)
    user = User.find(:email=>email)
    if user && user.password_hash == BCrypt::Engine.hash_secret(password, user.password_salt)
      user
    else
      nil
    end
  end

  def encrypt_password
    if password.present?
      self.password_salt = BCrypt::Engine.generate_salt
      self.password_hash = BCrypt::Engine.hash_secret(password, password_salt)
    end
  end

end 
```

当我尝试验证密码的存在时，我得到

```
NoMethodError: undefined method `password' for #<User @values={:email=>"foo@bar.com"}> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T17:18:22.907

好的，我知道了...

我刚刚补充说：

```
 attr_accessor :password 
```

它验证其存在而不尝试保存到密码列。谢谢 ：）

# java - Java中对对象的链式调用和继承

> ID：13333127
> 
> 赞同：2
> 
> 时间：2012-11-11T16:34:52.953
> 
> 标签：java, android

当为链式调用声明方法时，通常`returns this`在方法的末尾。

所以我声明：

```
public class Foo {

    public Foo setTitle(String title){
        ...
        return this;
    }

} 
```

和：

```
public class Bar extends Foo{

      /* OTHER STUFF */
} 
```

如果你调用`new Bar().setTitle("Test")`它返回一个`Foo`' 的引用。

为了清晰、简洁和可维护性，是否可以声明该方法以自动返回 a`Bar`的引用**而不重写 Bar 中的方法？**

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-11T16:39:31.410

> 是否可以声明该方法以自动返回 Bar 的引用，而无需为了清晰、简洁和可维护性而重写 Bar 中的方法？

不，你可以连接一些奇怪的泛型——`Foo<T extends Foo>`或类似的——但它不会很令人满意。

基本上，“这种类型”需要一些语言支持，其中该类型的唯一有效表达式是`null`and `this`。那不存在，所以你只剩下覆盖了：

```
public Bar setTitle(String title) {
    super.setTitle(title);
    return this;
} 
```

或者：

```
public Bar setTitle(String title) {
    return (Bar) super.setTitle(title);
} 
```

这只是继承最终成为痛苦的情况之一:(

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-11T16:41:11.247

我确实尝试过使用泛型...

```
public class Foo<T extends Foo> {

    public T setTitle(String title){
        .....
        return (T) this;
    }
}

public class Bar extends Foo<Bar>{

    /* OTHER STUFF */
} 
```

似乎工作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-11T16:41:16.817

我认为它的实际返回`Bar`只有。**只需进行类型转换以引用对象，`Bar`**如下所示：

```
 Bar bar = (Bar)(new Bar().setTitle("Foo Title"));
    System.out.println(bar.getTitle());//prints Foo Title 
```

假设`getTitle()`方法存在于`Foo`返回标题中。

如果您添加另一个方法，例如`getBarTitle`在`Bar`类中：

```
 public String getBarTitle(){
          return getTitle()+" of Bar";
      } 
```

然后

```
 System.out.println(bar.getBarTitle());//prints Foo Title of Bar 
```

**说明：** 当您调用`setTitle`on 时`new Bar()`，该方法在`Bar`Object 上调用并且`this`表示`Bar`对象 not `Foo`，因此它`Bar`仅返回类类型 as 的 onject `Foo`，这是超类。**在这个过程中，它不会改变原来的类类型，它根本是 bar，** 因此类型转换应该为你服务。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-11T16:43:59.073

您可以使用具有上限的泛型：

```
public class Foo<T extends Foo<T>> {
    public T setTitle() {
        ...
        return (T) this;
    }
}

public class Bar extends Foo<Bar> {
    ....
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-11T16:46:06.230

准确地说，它不返回 Foo 引用，而是返回 Bar 引用，您可以使用 System.out.println(reference.getClass().getName()) 进行检查。

写的时候也一样，

```
List l=new ArrayList(); 
```

（忘记 LIst 是一个接口，这是题外话）

`l`实际上是对 ArrayList 的引用，即使此信息是“隐藏的”，但调用 l.someMathod() 会调用 ArrayList 方法，而不是 List 方法——这就是面向对象的工作原理！

# jquery - 用 jquery替换 空格

> ID：13333137
> 
> 赞同：0
> 
> 时间：2012-11-11T16:36:09.640
> 
> 标签：jquery

我有以下html

```
<ul>
    <li>
        <a href="#">
            Cross<br>Section
        </a>
    </li>
</ul> 
```

我尝试了以下

```
$('ul li a').text().replace('<br>', '&nbsp;'); 
```

但它不起作用

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-11T16:39:00.177

这应该工作

```
$('ul li a br').replaceWith(' ') 
```

演示：http: [//jsfiddle.net/euTSs/](http://jsfiddle.net/euTSs/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-11T16:39:02.710

尝试选择`br`，然后用空格[替换它。](http://api.jquery.com/replaceWith/)

```
$('ul li a br').replaceWith('&nbsp;'); 
```

[http://jsfiddle.net/uXasp/](http://jsfiddle.net/uXasp/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-11T16:38:47.210

尝试：

```
 $('ul li a').text($('ul li a').text().replace('<br>', '&nbsp;')); 
```

# java - 如何使用 servlet 和 jsp 防止在注销后查看页面

> ID：13333139
> 
> 赞同：3
> 
> 时间：2012-11-11T16:36:33.957
> 
> 标签：java, jsp, session, servlets, logout

这是我在这个网站上的第一个查询。希望你们能帮助完成我的项目。提前谢谢。

我粘贴了我的项目的完整代码。我想要一个解决方案（即）单击注销按钮后，用户应该导航到登录页面，当他尝试单击后退按钮时，他不应该转到上一页并且应该在同一个登录页面中。

**索引.jsp**

```
 <%@ page language="java" contentType="text/html; charset=ISO-8859-1"
                pageEncoding="ISO-8859-1"%>
                    <!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
                    <html>
                    <head>
                    <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
                    <title>Login</title>

                    <style type="text/css">
                    .header {
                width: 250px;
            height: 50px;
            background-color: #6495ED;
            font-family: verdana;
            font-size: 20px;
            font-weight: bold;
        }

        .header2 {
            width: 250px;
            height: 50px;
            background-color: "#FFE4B5";
            font-family: verdana;
            font-size: 12px;
            font-weight: bold;
        }
        </style>

        <script type="text/javascript">
        <%String name = (String) request.getAttribute("status");%>
        var alertMsg = "<%=name%>
            ";
            if (alertMsg != "null" && alertMsg != '') {
                alert(alertMsg);
            }
        </script>

        <script src="<%=request.getContextPath()%>/gen_validatorv4.js"
            type="text/javascript"></script>
        </head>
        <body>

            <form name="login" action="LoginServlet" method="post">

                <center>
                    <a href="index.jsp" class="header2" style="background-color: #FFE4B5";>Home</a>
                </center>

                <center>
                    <table
                        style="background-color: #CAE1FF; border-color: 1px solid red;">
                        <tr>
                            <td align="center" class="header" colspan="2">Login</td>
                        </tr>
                        <tr height="50px">
                            <td align="" class=""
                                style="padding-left: 10px; font-family: tohoma;">Username</td>
                            <td><input type="text" name="username" style="width: 150px;" />
                            </td>
                        </tr>
                        <tr height="50px">
                            <td align="" class=""
                                style="padding-left: 10px; font-family: tohoma;">Password</td>
                            <td><input type="password" name="password"
                                style="width: 150px;" /></td>
                        </tr>
                        <tr height="50px">
                            <td></td>
                            <td align="center" colspan="0">
                                <table style="width: 100%;">
                                    <tr>
                                        <td align="left"><input type="submit" name="submit"
                                            value="Login"
                                            style="width: 60px; height: 25px; background: #436EEE; color: white !important; border: 1px solid #0000EE;; border-radius: 2;" />
                                        </td>
                                        <td><input type="reset" value="Cancel"
                                            style="width: 60px; height: 25px; background: #436EEE; color: white !important; border: 1px solid #0000EE;; border-radius: 2;" />
                                        </td>
                                        <td><a href="register.jsp">New User?</a></td>
                                    </tr>
                                </table></td>
                        </tr>
                    </table>
                </center>
            </form>

            <script type="text/javascript">
                var formValidator = new Validator("login");
                formValidator.addValidation("username", "req",
                        "Please enter your User Name");
                formValidator.addValidation("password", "req",
                        "Please enter your Password");
            </script>

        </body>
        </html> 
```

**登录Servlet.java**

```
 package pack;

        import java.io.IOException;
        import java.sql.Connection;
        import java.sql.DriverManager;
        import java.sql.ResultSet;
        import java.sql.Statement;

        import javax.servlet.Filter;
        import javax.servlet.FilterChain;
        import javax.servlet.FilterConfig;
        import javax.servlet.RequestDispatcher;
        import javax.servlet.ServletException;
        import javax.servlet.ServletRequest;
        import javax.servlet.ServletResponse;
        import javax.servlet.annotation.WebServlet;
        import javax.servlet.http.HttpServlet;
        import javax.servlet.http.HttpServletRequest;
        import javax.servlet.http.HttpServletResponse;
        import javax.servlet.http.HttpSession;

        /**
         * Servlet implementation class LoginServlet
         */
        @WebServlet("/LoginServlet")
        public class LoginServlet extends HttpServlet implements Filter {

            private static final long serialVersionUID = 1L;

            /**
             * @see HttpServlet#HttpServlet()
             */
            public LoginServlet() {
                super();
                // TODO Auto-generated constructor stub
            }

            /**
             * @see HttpServlet#doGet(HttpServletRequest request, HttpServletResponse
             *      response)
             */
            @Override
            protected void doGet(HttpServletRequest request,
                    HttpServletResponse response) throws ServletException, IOException {
                // TODO Auto-generated method stub
            }

            /**
             * @see HttpServlet#doPost(HttpServletRequest request, HttpServletResponse
             *      response)
             */
            @Override
            protected void doPost(HttpServletRequest request,
                    HttpServletResponse response) throws ServletException, IOException {
                String loginName = null;
                String loginPass = null;
                String status;
                HttpSession session = request.getSession();
                String username = request.getParameter("username");
                String password = request.getParameter("password");

                String jdbcDriver = "com.mysql.jdbc.Driver";
                String dbURL = "jdbc:mysql://localhost:3306/studentdetails";
                String uname = "root";
                String pwd = "admin";

                try {
                    Class.forName(jdbcDriver);
                    Connection con = DriverManager.getConnection(dbURL, uname, pwd);
                    Statement stmt = con.createStatement();
                    ResultSet rs;
                    String query = "SELECT username, password FROM registration WHERE username = '"
                            + username + "' AND password = '" + password + "'";

                    System.out.println(query);
                    stmt.executeQuery(query);

                    boolean permission = false;
                    rs = stmt.getResultSet();

                    while (rs.next()) {
                        permission = true;
                        loginName = rs.getString("username");
                        loginPass = rs.getString("password");

                    }

                    System.out.println(loginName);
                    System.out.println(loginPass);

                    rs.close();
                    stmt.close();

                    if (permission == true) {
                        request.getSession(true);
                        session.setAttribute("username", loginName);
                        RequestDispatcher redis = request
                                .getRequestDispatcher("/WEB-INF/pages/list.jsp");
                        redis.forward(request, response);

                    } else {
                        System.out.println("Permission denied");
                        status = "Username not yet registered";
                        request.setAttribute("status", status);

                        RequestDispatcher redis = request
                                .getRequestDispatcher("index.jsp");
                        redis.forward(request, response);

                    }

                } catch (Exception e) {
                    // TODO: handle exception
                    e.printStackTrace();
                }
            }

            @Override
            public void doFilter(ServletRequest req, ServletResponse res,
                    FilterChain chain) throws IOException, ServletException {
                // TODO Auto-generated method stub
                HttpServletRequest request = (HttpServletRequest) req;
                HttpServletResponse response = (HttpServletResponse) res;
                HttpSession session = request.getSession(false);
                if (session != null && session.isNew()) {
                    response.setHeader("Pragma", "no-cache");
                    response.setHeader("Cache-Control", "no-cache");
                    response.setDateHeader("Expires", 0);
                    chain.doFilter(request, response);
                } else {
                    response.sendRedirect("index.jsp");
                }

            }

            @Override
            public void init(FilterConfig arg0) throws ServletException {
                // TODO Auto-generated method stub

            }
        } 
```

**列表.jsp**

```
 <%@ page language="java" contentType="text/html; charset=ISO-8859-1"
                pageEncoding="ISO-8859-1"%>
            <!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
            <html>
            <head>
            <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
            <meta http-equiv="Pragma" content="no-cache">
            <meta http-equiv="Expires" content="-1">
            <meta http-equiv="CACHE-CONTROL" content="NO-CACHE">
            <title>Insert title here</title>
            <script type="text/javascript">
                function logout() {

                    session.removeAttribute("username");
                    request.getSession().invalidate();
                    response.sendRedirect("index.jsp");
                }
            </script>
            </head>

            <body>
                <form action="LoginServlet" name = "list">
                    <p><%if(session.getAttribute("username")!=null){
                    %>
                    <%session.getAttribute("username");%></p>
                    <%} %>
                    <input type="button" value = "Logout" onclick="logout();"/>

                </form>
            </body>
            </html> 
```

**web.xml**

```
 <?xml version="1.0" encoding="UTF-8"?>
            <web-app xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
                xmlns="http://java.sun.com/xml/ns/javaee" xmlns:web="http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd"
                xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd"
                id="WebApp_ID" version="3.0">
                <display-name>SessionManagement</display-name>
                <servlet>
                    <servlet-name>Session</servlet-name>
                    <servlet-class>pack.LoginServlet</servlet-class>
                </servlet>
                <servlet-mapping>
                    <servlet-name>LoginServlet</servlet-name>
                    <url-pattern>/LoginServlet</url-pattern>
                </servlet-mapping>
                <filter>
                    <filter-name>noCacheFilter</filter-name>
                    <filter-class>pack.LoginServlet</filter-class>
                </filter>
                <filter-mapping>
                    <filter-name>noCacheFilter</filter-name>
                    <url-pattern>/list.jsp</url-pattern>
                </filter-mapping>
                <welcome-file-list>
                    <welcome-file>index.jsp</welcome-file>
                </welcome-file-list>
            </web-app> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-11T16:39:32.140

我认为您必须禁用“bfcache”，强制浏览器重新下载页面 - 这反过来会检测到用户不再登录并重定向到登录页面

# c++ - 向 MFC 应用程序添加许可保护

> ID：13333140
> 
> 赞同：0
> 
> 时间：2012-11-11T16:36:42.227
> 
> 标签：c++, winapi, encryption, licensing

任何人都可以建议通过许可证密钥或其他方式为应用程序实施复制保护的最佳方法。

有没有标准的API？还是自己编写是标准做法？如果是这样，是否有任何教程可以演示如何实现这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-11T16:43:17.203

根据我的个人经验，我必须说，没有任何情况下许可/复制保护是合理的。
要么你有一个小规模（私人）项目，它不是很普遍，因此不会被破解。
或者你有一个大型的、著名的项目。在这种情况下，不管你在复制保护上投入了多少时间和金钱，它无论如何都会被破解。

在我看来 - 只是节省您的时间和金钱。如果您的软件值得被盗版，那将是。但有时，可能有人盗版了你的软件，但对自己说：“好吧，这是一个很好的软件，作者没有用烦人的许可来骚扰我……我会付钱的” .

只是我的 2 美分

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-11T16:49:41.383

执行此操作的典型方法是根据密钥（只有您知道的）和用户的电子邮件计算[HMAC——基本上是两部分组合的哈希值。](http://en.wikipedia.org/wiki/HMAC)注册密钥是哈希。查看 Windows 的[Crypto API](http://msdn.microsoft.com/en-us/library/windows/desktop/aa379863.aspx)以了解可以执行 HMAC 的操作。

有些人进行许可的方式更复杂，但实际上并没有什么意义。永远记住：许可证就像你家门上的锁。如果有人愿意，它可以被打破。它的存在是为了让人们保持诚实，而不是让人们远离，所以不要浪费你的时间过火。

# bash - BASH：如何创建将所有脚本参数作为数组返回的函数

> ID：13333142
> 
> 赞同：2
> 
> 时间：2012-11-11T16:36:50.947
> 
> 标签：bash, getopts

我是 bash 的新手，我有一个问题，我无法在互联网上的任何地方找到解决方案。

在我尝试自己编程之前，我想看看处理这种情况的标准方法是什么。

基本上我想将getopts捕获到数组...

我不确定我是否足够清楚，所以让我们尝试看一下这个 PHP 示例：

```
http://www.test.com/index.php?a=1&b=2

<?php
function getParams() {
return $_GET[];
}
?> 
```

这就是我想要的： myscript -a 1 -b 2

到目前为止，我发现的每一次提到 getopts 都暗示我需要确切地知道我想要得到什么：

```
while getopts a:b: option
do
  case "${option}"
    in
      a) a=${OPTARG};;
      b) b=${OPTARG};;
  esac
done 
```

有没有一种方法可以将所有参数的关联数组传递给脚本，无论这些选项是什么，所以我总是可以做这样的事情：

```
OPTS = get_params

echo $OPTS[@] 
```

然后我可以做一些我自己的验证等......

再次抱歉，如果我遗漏了一些明显的东西，我真的是 bash 新手，我非常感谢从哪里开始的任何帮助或指导。

非常感谢您提前。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T17:18:08.087

简单地：

```
declare -A myopts
while getopts cqz:b:a: OPTNAM ;do
    myopts[$OPTNAM]=$OPTARG
  done 
```

测试：

```
set -- -a 4 -b 23 -c -q -- file test

declare -A myopts
while getopts cqz:b:a: OPTNAM ;do
    myopts[$OPTNAM]=$OPTARG
  done

set | grep ^myopts=
myopts=([a]="3" [b]="3" [c]="" [q]="" )

echo ${@:$OPTIND}
file test

[ ${myopts[c]+.} ] && echo switch c present
switch c present

for sw in c q z;do
    echo switch $sw $(
        [ ${myopts[$sw]+.} ] && echo present || echo absent )
  done
switch c present
switch q present
switch z absent

echo ${myopts[a]}
3 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-11T17:12:20.103

你可以沿着这些路线走：

```
#!/bin/bash

declare -A my_opts

while (($#)); do
   case $1 in
      -- )
         shift
         break
         ;;
      -* )
         my_opts[${1#-}]=$2
         shift 2
         ;;
      * )
         break
         ;;
   esac
done

for k in "${!my_opts[@]}"; do
   echo "$k => ${my_opts[$k]}"
done

# At this point, you still have the remaining arguments in $@

echo "Arguments left: ${@:-(none)}"

# End of script # 
```

调用此脚本`test_args`和`chmod +x test_args`. 然后（说明这种过于简化的方法的副作用）：

```
$ ./test_args -a 1 -b 2
a => 1
b => 2
Arguments left: (none)

$ ./test_args -a 1 -- -b 2
a => 1
Arguments left: -b 2
$ ./test_args -a 1 foo -b 2
a => 1
Arguments left: foo -b 2

$ ./test_args --a 1 -b 2
-a => 1
b => 2
Arguments left: (none)

$ # And a bad one (with this simplified version):
$ ./test_args -a -- foo
-a => --
Arguments left: foo 
```

# email - 用于 Web 应用的自定义电子邮件或邮件软件？

> ID：13333148
> 
> 赞同：0
> 
> 时间：2012-11-11T16:37:35.193
> 
> 标签：email, notifications

当涉及到与您的用户进行电子邮件通信时，我看到了两种选择。

1.  根据某些事件从服务器发送电子邮件（例如使用[RabbitMQ ）](http://www.rabbitmq.com/)

2.  使用 MailChimp、Constant Contact 等电子邮件软件或类似软件

选项 1 适用于一般活动，但选项 2 似乎更适合时事通讯、促销活动、销售人员快速起草电子邮件、跟踪响应、维护销售线索等的能力。缺点是这些工具可能会变得相当昂贵。

两者之间是否存在最佳平衡点，或者像 Groupon、Spotify、Apple 等公司或其他公司使用这两种解决方案？

更新：

与销售（每月很少）相比，应用事件需要更多的通知（有时每天很少）。因此，将选项 2 应用于事件将是无用的昂贵。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T01:48:57.000

使用统计跟踪、时间敏感的自动回复、自定义订阅表格、个性化邮件、高级实时图形报告等来管理您的电子邮件活动。那就是 iKode[通讯软件](http://www.phpnewsletter.org/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-11T16:49:37.780

一些邮件服务提供了一个 API，允许您通过他们的服务发送邮件，当某些事件发生时，这样一个邮件服务就可以满足您所有的邮件需求。

这有很多好处，主要不是重新发明轮子......邮寄的许多方面并不是立即显而易见的，专业的邮寄服务公司会为您解决。

话虽如此，与特定供应商绑定也意味着您非常依赖该供应商的服务。如果他的 API 出现故障，您将无法发送邮件。

我已经看到了许多解决电子邮件问题的方法，如果我可以概括一下；我会说：

*   许多小型站点都运行自己的站点，这在一段时间内运行良好。
*   当企业发展到大中型时，对电子邮件供应商的需求就出现了，企业很可能能够花费成本来获得专业的邮件解决方案。
*   当业务变得足够大时（想想苹果、Facebook），他们可能会构建自己的解决方案——因为公司的需求变得非常庞大且非常具体，而且很难找到完全满足他们需求的供应商。最后，大公司通常不喜欢非常依赖特定的供应商。

# java - Java Hangman - 单击时如何为 JButton 分配字母？

> ID：13333149
> 
> 赞同：0
> 
> 时间：2012-11-11T16:37:36.987
> 
> 标签：java, arrays, netbeans, jbutton

我在 Netbeans 上制作了一个基本的刽子手游戏，它的工作方式是用户单击 26 个按钮中的一个（每个字母对应一个），然后在单词中测试该字母。我遇到的主要问题是要测试这封信。

```
 //array holding all buttons        
    JButton[] alphabet = {AButton, BButton, CButton, DButton, EButton, FButton, GButton, HButton, IButton, JButton, KButton, LButton, MButton, NButton, OButton, PButton, QButton, RButton, SButton, TButton, UButton, VButton, WButton, XButton, YButton, ZButton};

    //getting the current letter(need something in place of the 0)
    String currentLetter = (alphabet[0].getLabel());             

    //replace underscores with letters as they are guessed
                for (int i = 0; i < 1; i++) {
                    secretWord = secretWord + currentLetter.charAt(0);
                    foundWord = words[randValue].replaceAll("[^" + secretWord + "]", "_ ");
    } 
```

我在某处读到使用按钮数组是我必须做的，所以我把它放进去，但它没有用。另外，我读到程序需要一个 ActionListener 来读取它是什么字母。我以前使用过的尝试是：

```
currentLetter = AButton.getText();

currentLetter = AButton.getLabel(); 
```

但遗憾的是无济于事。所以请记住，我使用的是 Netbeans，而且我是 Java 新手，所以没有复杂的复杂内容，保持简单。谢谢：）

编辑：

```
 private void AButtonActionPerformed(java.awt.event.ActionEvent evt) {                                        
        DoButton.doClick();
}                                       

        private void DoButtonActionPerformed(java.awt.event.ActionEvent evt) {                                         
            JButton button = (JButton) evt.getSource();
            String currentLetter = button.getText(); 

        //replace underscores with letters as they are guessed
                        for (int i = 0; i < 1; i++) {
                            secretWord = secretWord + currentLetter.charAt(0);
                            foundWord = words[0].replaceAll("[^" + secretWord + "]", "_ ");
               }
    } 
```

完整代码：

```
 import java.awt.Color;
    import java.awt.Font;
    import java.awt.event.ActionEvent;
    import java.awt.event.ActionListener;
    import java.util.Random;
    import javax.swing.JButton;
    import javax.swing.JOptionPane;
    import javax.swing.UIManager;
    import javax.swing.plaf.FontUIResource;

    public class MainFrame extends javax.swing.JFrame {

        public MainFrame() {
            initComponents();
        }

        static String secretWord = "";
        StringBuilder mainWord = new StringBuilder();
        String[] words =         {"technology", "computer", "camera", "graphic", "digital", "media", "technician",
            "photography", "troubleshoot", "pixels", "application", "download"};
        Random r = new Random();
        int randValue = r.nextInt(11)+1;
        String guessWord = words[0];//words[randValue];
        int errors = 0;
        public static int wins = 0, losses = 0;
        String foundWord = null;
        String currentLetter;
        private void RestartButtonActionPerformed(java.awt.event.ActionEvent evt)         {                                              
            //restart game
                DirectionsFrame DFrame = new DirectionsFrame();
                DFrame.setVisible(true);
                setVisible(false);
                MainFrame MFrame = new MainFrame();
                MFrame.dispose();
                secretWord = "";
                foundWord = null;
                DirectionsFrame.WinsLabel.setText(null);
                DirectionsFrame.LossesLabel.setText(null);
        }                                             

        private void GetButtonActionPerformed(java.awt.event.ActionEvent evt)         {                                          
            for (int i = 0; i < guessWord.length(); i++) {
                mainWord.append("_ ");
            }
            String SetMain = mainWord.toString();
            mainWord.append(secretWord);
            WordLabel.setText(SetMain);
            GetButton.setEnabled(false);
            AButton.setEnabled(true);BButton.setEnabled(true);CButton.setEnabled        (true);DButton.setEnabled(true);EButton.setEnabled(true);
            FButton.setEnabled(true);GButton.setEnabled(true);HButton.setEnabled        (true);IButton.setEnabled(true);JButton.setEnabled(true);
    KButton.setEnabled(true);LButton.setEnabled(true);MButton.setEnabled(true);NButton.setEnabled(true);OButton.setEnabled(true);
    PButton.setEnabled(true);QButton.setEnabled(true);RButton.setEnabled(true);SButton.setEnabled(true);TButton.setEnabled(true);
    UButton.setEnabled(true);VButton.setEnabled(true);WButton.setEnabled(true);XButton.setEnabled(true);YButton.setEnabled(true);
    ZButton.setEnabled(true);
}                                         

private void ExitButtonActionPerformed(java.awt.event.ActionEvent evt) {                                           
    // Exit the program
    System.exit(0);
}                                          

private void AButtonActionPerformed(java.awt.event.ActionEvent evt) {                                        
    DoButton.doClick();
}                                       

private void BButtonActionPerformed(java.awt.event.ActionEvent evt) {                                        
    DoButton.doClick();
}                                       

private void CButtonActionPerformed(java.awt.event.ActionEvent evt) {                                        
    DoButton.doClick();
}                                       

private void DButtonActionPerformed(java.awt.event.ActionEvent evt) {                                        
    DoButton.doClick();
}                                       

private void EButtonActionPerformed(java.awt.event.ActionEvent evt) {                                        
    DoButton.doClick();
}                                       

private void FButtonActionPerformed(java.awt.event.ActionEvent evt) {                                        
    DoButton.doClick();
}                                       

private void GButtonActionPerformed(java.awt.event.ActionEvent evt) {                                        
    DoButton.doClick();
}                                       

private void HButtonActionPerformed(java.awt.event.ActionEvent evt) {                                        
    DoButton.doClick();
}                                       

private void IButtonActionPerformed(java.awt.event.ActionEvent evt) {                                        
    DoButton.doClick();
}                                       

private void JButtonActionPerformed(java.awt.event.ActionEvent evt) {                                        
    DoButton.doClick();
}                                       

private void KButtonActionPerformed(java.awt.event.ActionEvent evt) {                                        
    DoButton.doClick();
}                                       

private void LButtonActionPerformed(java.awt.event.ActionEvent evt) {                                        
    DoButton.doClick();
}                                       

private void MButtonActionPerformed(java.awt.event.ActionEvent evt) {                                        
    DoButton.doClick();
}                                       

private void NButtonActionPerformed(java.awt.event.ActionEvent evt) {                                        
    DoButton.doClick();
}                                       

private void OButtonActionPerformed(java.awt.event.ActionEvent evt) {                                        
    DoButton.doClick();
}                                       

private void PButtonActionPerformed(java.awt.event.ActionEvent evt) {                                        
    DoButton.doClick();
}                                       

private void QButtonActionPerformed(java.awt.event.ActionEvent evt) {                                        
    DoButton.doClick();
}                                       

private void RButtonActionPerformed(java.awt.event.ActionEvent evt) {                                        
    DoButton.doClick();
}                                       

private void SButtonActionPerformed(java.awt.event.ActionEvent evt) {                                        
    DoButton.doClick();
}                                       

private void TButtonActionPerformed(java.awt.event.ActionEvent evt) {                                        
    DoButton.doClick();
}                                       

private void UButtonActionPerformed(java.awt.event.ActionEvent evt) {                                        
    DoButton.doClick();
}                                       

private void VButtonActionPerformed(java.awt.event.ActionEvent evt) {                                        
    DoButton.doClick();
}                                       

private void WButtonActionPerformed(java.awt.event.ActionEvent evt) {                                        
    DoButton.doClick();
}                                       

private void XButtonActionPerformed(java.awt.event.ActionEvent evt) {                                        
    DoButton.doClick();
}                                       

private void YButtonActionPerformed(java.awt.event.ActionEvent evt) {                                        
    DoButton.doClick();
}                                       

private void ZButtonActionPerformed(java.awt.event.ActionEvent evt) {                                        
    DoButton.doClick();
}                                       

private void DoButtonActionPerformed(java.awt.event.ActionEvent evt) {                                         
    JButton button = (JButton) evt.getSource();
    String currentLetter = button.getText(); 

//replace underscores with letters as they are guessed
            do {
                for (int i = 0; i < 1; i++) {
                    secretWord = secretWord + currentLetter.charAt(0);
                    foundWord = words[0].replaceAll("[^" + secretWord + "]", "_ ");
                //if letter isn't in word
                    if (guessWord.indexOf(currentLetter) == -1) {
                        JOptionPane.showMessageDialog(null, "Sorry, that wasn't in the word.");
                        errors++;
                        if (errors == 1) {
                            Hangman0.setVisible(false);
                        }
                        if (errors == 2) {
                            Hangman1.setVisible(false);
                        }
                        if (errors == 3) {
                            Hangman2.setVisible(false);
                        }
                        if (errors == 4) {
                            Hangman3.setVisible(false);
                        }
                        if (errors == 5) {
                            Hangman4.setVisible(false);
                        }
                        if (errors == 6) {
                            Hangman5.setVisible(false);
                        }
                        if (errors == 7) {
                            Hangman6.setVisible(false);
                        }
                        if (errors == 8) {
                            Hangman7.setVisible(false);
                        }
                        if (errors == 9) {
                            Hangman8.setVisible(false);
                        }
                        if (errors == 10) {
                            Hangman9.setVisible(false);
                            JOptionPane.showMessageDialog(null, "You lost! The word was: " + guessWord);
                            losses++;
                            DirectionsFrame DFrame = new DirectionsFrame();
                            DFrame.setVisible(true);
                            setVisible(false);
                            MainFrame MFrame = new MainFrame();
                            MFrame.dispose();
                            secretWord = "";
                            foundWord = null;
                            String strLosses = Integer.toString(losses);
                            String strWin = Integer.toString(wins);
                            DirectionsFrame.WinsLabel.setText(strWin);
                            DirectionsFrame.LossesLabel.setText(strLosses);
                        }
            }
        }
                WordLabel.setText(foundWord.toUpperCase());
            } while (foundWord == null);
            if (foundWord.equalsIgnoreCase(guessWord)) {
                JOptionPane.showMessageDialog(null, "Yay!");
                wins++;
                DirectionsFrame DFrame = new DirectionsFrame();
                DFrame.setVisible(true);
                setVisible(false);
                MainFrame MFrame = new MainFrame();
                MFrame.dispose();
                secretWord = "";
                foundWord = null;
                String strWin = Integer.toString(wins);
                String strLosses = Integer.toString(losses);
                DirectionsFrame.WinsLabel.setText(strWin);
                DirectionsFrame.LossesLabel.setText(strLosses);
            }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-11T16:45:23.087

创建一个动作监听器：

```
ActionListener al = new ActionListener() {
    public void actionPerformed(ActionEvent evt) {
        Object src = evt.getSource();
        if (evt instanceof JButton) {
            currentLetter = ((JButton) src).getText();
            // do something with letter
        } // else something seriously wrong
    }
}; 
```

然后将此动作侦听器添加到中的每个按钮`alphabet`：

```
for (JButton button : alphabet) {
    button.addActionListener(al);
} 
```

**编辑**我`initComponents()`在您更新的代码中看不到实现。无论如何，为每个按钮添加一个动作监听器只需要做一次。这是我将如何开始实施`initComponents()`：

```
private static String[] letters = { "A", "B", "C", "D", "E", "F",
    "G", "H", "I", "J", "K", "L", "M", "N", "O", "P", "Q", "R",
    "S", "T", "U", "V", "W", "X", "Y", "Z" };
private JButton[] letterButtons = new JButton[letters.length];

private void initComponents() {
    ActionListener al = new ActionListener() {
        public void actionPerformed(ActionEvent evt) {
            Object src = evt.getSource();
            if (evt instanceof JButton) {
                currentLetter = ((JButton) src).getText();
                // do something with letter
            } // else something seriously wrong
        }
    };
    for (int i = 0; i < letters.length; ++i) {
        letterButtons[i] = new JButton(letters[i]);
        letterButtons[i].addActionListener(al);
    }
    . . .
    // add all the buttons to the user interface
    . . .
} 
```

请使用更多数组来简化您的代码！我当然不会为每个字母按钮使用单独的变量，也不会有 26 个单独的方法来分别处理每个字母点击。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-11T16:46:06.723

是的，每个按钮都可以使用单个`ActionListener`来确定单击的内容以及获取其文本。在您的听众中，您可以使用：

```
public void actionPerformed(ActionEvent e) {
    JButton button = (JButton) e.getSource();
    String currentLetter = button.getText(); 
    updateWord(currentLetter);
} 
```

一旦`currentLetter`知道，您可以将其传递给辅助方法，例如，`updateWord`显示必要的字符等。

```
private void updateWord(String currentLetter) {
 // reveal letters
 // increment 'Hangman' guess counter
} 
```

请阅读[如何编写动作监听器](http://docs.oracle.com/javase/tutorial/uiswing/events/actionlistener.html)

还可以考虑使用[Action](http://docs.oracle.com/javase/tutorial/uiswing/misc/action.html)在按钮之间共享功能。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-11T17:14:42.417

一个好的解决方案不会使用诸如“AButton”、“BButton”之类的东西。

正如您所提到的，您可以使用 Button-Array（长度 26）来完成所有操作！

在循环中初始化它，创建 26 个按钮实例，并注册一个 ActionListener（始终相同，而不是 26 个）。

你可以从Array-Index中得到对应的字母！

如何？以 ASCII 表为例。假设您只想使用大字母，A 的值为 65。

所以每个按钮对应的字母

> 65 + indexOf（按钮）
> 
> 按钮[0] -> 65+0 = 'A' 按钮[1] -> 65+1 = 'B'

你明白了。

单个 ActionListener 可以使用相同的方法来获取对应的字母： 类似：

> char theLetter = (char) 65 + buttonArray.indexOf(e.getSource())

你完成了。

我认为编程不是要以某种方式完成它。你总是应该寻找完美的解决方案。如果该解决方案对您来说很难，您应该学习如何去做。

问候！

# android - 在 android 上找出设备显示参数 - 选择错误的布局

> ID：13333150
> 
> 赞同：0
> 
> 时间：2012-11-11T16:37:45.040
> 
> 标签：android, android-layout

我的 Android 应用程序中有几个布局。所有布局都有一个标签来在运行时识别它们，使用以下代码：

```
RelativeLayout relativeLayout = (RelativeLayout) findViewById(R.id.RelativeLayout01);

if(relativeLayout.getTag() != null)
{
    Log.v("Layout", (String) relativeLayout.getTag());
} 
```

提供以下布局：“layout”、“layout-long-port-hdpi-finger-800x480”、“layout-long-port-hdpi-finger-854x480”、“layout-normal-port-hdpi-finger-v15” ", "布局-正常端口-mdpi-finger-480x320"。

当我使用 Galaxy SIII 模拟器时，布局 layout-normal-port-hdpi-finger-v15 将被纠察。

现在我从三星网站下载了[Galaxy S II](http://developer.samsung.com/android/tools-sdks/Samsung-GALAXY-S2-Skin-for-handset-emulation)模拟器皮肤，据我所知，它的屏幕尺寸为 480x800。然而，它不会选择 layout-long-port-hdpi-finger-800x480 布局，而是始终从“布局”目录中获取默认布局。

**问题：**如何找出设备或仿真器的显示要求，以便我可以制作正确的布局定义？有没有办法调试/记录这些要求？

感谢您的帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T04:39:34.760

Android 在选择资源时会考虑通知栏的大小。考虑到通知栏时，Galaxy S II 显示屏的高度略小于 800。为了调试它，我建议添加一个同名的 values 文件夹（values-long-port-hdpi-finger-800x480）。将 bools.xml 文件添加到该文件夹​​并将其放入其中：

```
<?xml version="1.0" encoding="utf-8"?>
<resources>
 <bool name="your_display_size_name">true</bool>
</resources> 
```

还将一个 bools.xml 文件添加到与所有其他显示尺寸相对应的值文件夹（或仅覆盖您希望布尔值适用的屏幕旁边的所有内容的文件夹），将其放入其中：

```
<?xml version="1.0" encoding="utf-8"?>
<resources>
 <bool name="your_display_size_name">false</bool>
</resources> 
```

然后以编程方式获取它并将其放入日志中或以您喜欢的方式使用它。

```
boolean yourVariableName = false;
if (getResources().getBoolean(R.bool.your_display_size_name)) {
        yourVariableName = true;
} 
```

我敢打赌通知栏是导致您出现问题的原因，如果不是，这应该可以帮助您调试。

# python - pandas 使用 fill_method 重新采样：需要知道从哪一行复制的数据？

> ID：13333159
> 
> 赞同：6
> 
> 时间：2012-11-11T16:39:08.200
> 
> 标签：python, pandas

我正在尝试使用重采样方法来填补时间序列数据中的空白。但我也想知道哪一行是用来填充遗漏的数据的。

这是我的输入系列。

```
In [28]: data
Out[28]: 
Date
2002-09-09    233.25
2002-09-11    233.05
2002-09-16    230.25
2002-09-18    230.10
2002-09-19    230.05
Name: Price 
```

通过重新采样，我会得到这个

```
In [29]: data.resample("D", fill_method='bfill')
Out[29]: 
Date
2002-09-09    233.25
2002-09-10    233.05
2002-09-11    233.05
2002-09-12    230.25
2002-09-13    230.25
2002-09-14    230.25
2002-09-15    230.25
2002-09-16    230.25
2002-09-17    230.10
2002-09-18    230.10
2002-09-19    230.05
Freq: D 
```

我在寻找

```
Out[29]: 
Date
2002-09-09    233.25  2002-09-09
2002-09-10    233.05  2012-09-11
2002-09-11    233.05  2012-09-11
2002-09-12    230.25  2012-09-16
2002-09-13    230.25  2012-09-16
2002-09-14    230.25  2012-09-16
2002-09-15    230.25  2012-09-16
2002-09-16    230.25  2012-09-16
2002-09-17    230.10  2012-09-18  
2002-09-18    230.10  2012-09-18
2002-09-19    230.05  2012-09-19 
```

有什么帮助吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-12T02:25:17.673

将 转换`Series`为 a后`DataFrame`，将索引复制到它自己的列中。（`DatetimeIndex.format()`在这里很有用，因为它返回索引的字符串表示形式，而不是 Timestamp/datetime 对象。）

```
In [510]: df = pd.DataFrame(data)

In [511]: df['OrigDate'] = df.index.format()

In [513]: df
Out[513]: 
             Price    OrigDate
Date                          
2002-09-09  233.25  2002-09-09
2002-09-11  233.05  2002-09-11
2002-09-16  230.25  2002-09-16
2002-09-18  230.10  2002-09-18
2002-09-19  230.05  2002-09-19 
```

对于没有聚合的重采样，有一个辅助方法`asfreq()`。

```
In [528]: df.asfreq("D", method='bfill')
Out[528]: 
             Price    OrigDate
2002-09-09  233.25  2002-09-09
2002-09-10  233.05  2002-09-11
2002-09-11  233.05  2002-09-11
2002-09-12  230.25  2002-09-16
2002-09-13  230.25  2002-09-16
2002-09-14  230.25  2002-09-16
2002-09-15  230.25  2002-09-16
2002-09-16  230.25  2002-09-16
2002-09-17  230.10  2002-09-18
2002-09-18  230.10  2002-09-18
2002-09-19  230.05  2002-09-19 
```

这实际上是以下内容的简写，其中`last()`在中间`DataFrameGroupBy`对象上调用。

```
In [529]: df.resample("D", how='last', fill_method='bfill')
Out[529]: 
             Price    OrigDate
Date                          
2002-09-09  233.25  2002-09-09
2002-09-10  233.05  2002-09-11
2002-09-11  233.05  2002-09-11
2002-09-12  230.25  2002-09-16
2002-09-13  230.25  2002-09-16
2002-09-14  230.25  2002-09-16
2002-09-15  230.25  2002-09-16
2002-09-16  230.25  2002-09-16
2002-09-17  230.10  2002-09-18
2002-09-18  230.10  2002-09-18
2002-09-19  230.05  2002-09-19 
```

# jquery - 复选框和 SetInterval

> ID：13333163
> 
> 赞同：1
> 
> 时间：2012-11-11T16:39:28.303
> 
> 标签：jquery, checkbox, setinterval, clearinterval

问题是这样的：当您打开复选框时，计时器打开，关闭复选框并且计时器关闭。我试过了，但没有任何尝试。

```
 $('#apply').click(function () {

    if ($('#autoupdate').prop("checked")) {

            var timerId = setInterval(function () {
                $.ajax({
                    type: "post",
                    url: "1.php",
                    cache: false,
                    success: function (html) {
                        $("#result").html(html);
                    }
                });
            }, 1000);

    } else {clearInterval(timerId);}

    });

Autoupdate: <input type="checkbox" id="autoupdate">
<input id="apply" type="submit" value="Apply">
<div id="result"></div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-11T16:42:03.783

你必须在外面声明变量。像

```
var timerId = 0; 
```

然后把你的代码

```
var timerId= 0;
$('#apply').click(function () {

    if ($('#autoupdate').prop("checked")) {

            timerId = setInterval(function () {
                $.ajax({
                    type: "post",
                    url: "1.php",
                    cache: false,
                    success: function (html) {
                        $("#result").html(html);
                    }
                });
            }, 1000);

    } else {clearInterval(timerId);}

}); 
```

因为如果它是在内部声明的，`if`那么从 else 访问变量 timerId 是不可能的，导致它未定义。

# android - 从另一个片段打开片段？

> ID：13333166
> 
> 赞同：1
> 
> 时间：2012-11-11T16:39:31.717
> 
> 标签：android, android-fragments

是否可以通过点击片段 A 中的按钮从片段 A 打开片段 B？这两个片段都是主 FragmentActivity 的一部分。我该如何处理？

![从片段 A 打开片段 B](../Images/1860a09c1b5f9d2c9799e5056a593b88.png)

编辑：

选项卡是这样实现的：

```
 ActionBar actionbar = getSupportActionBar();
    actionbar.setNavigationMode(ActionBar.NAVIGATION_MODE_TABS);

    Tab tab1 = actionbar.newTab().setText("");
    Tab tab2 = actionbar.newTab().setText("");

    tab1.setTabListener(new MyTabListener<AFragment>(this, "tab1",AFragment.class));
    tab2.setTabListener(new MyTabListener<BFragment>(this, "tab2",BFragment.class));

    tab1.setIcon(R.drawable.ic_a);
    tab2.setIcon(R.drawable.ic_b);

    actionbar.addTab(tab1,0,true);
    actionbar.addTab(tab2,1,false); 
```

谢谢 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2019-09-02T08:06:02.997

将以下代码添加到 onClick()：

```
public void onClick(View v) {
            Fragment fragment = new projectInformationFragment();
            FragmentTransaction transaction = 
            getActivity().getSupportFragmentManager().beginTransaction();
            transaction.replace(R.id.nav_host_fragment, fragment);
            transaction.addToBackStack(null);
            transaction.commit();
        } 
```

# c++ - 输入数据未分配给 sql 查询

> ID：13333167
> 
> 赞同：0
> 
> 时间：2012-11-11T16:39:32.143
> 
> 标签：c++, oracle-pro-c

下面的 sql 更新将不起作用，但如果我在员工更新时注释掉“cin name”，它将更新。我不明白，因为我已经在员工搜索期间询问了员工姓名，因此应该为 name 变量分配数据，但这并没有发生。有人帮我吗？谢谢你。

```
 EXEC SQL BEGIN DECLARE SECTION;
                //int customer_id,cu_id;
                char salary[10],address[50];
                char name[50];
            EXEC SQL END DECLARE SECTION;

            fnConnectDB();

            cout<<"Customer Id\t\t: ";
            cin.getline(name,50); // search employee

                EXEC SQL SELECT * INTO :salary,:address,:name FROM EMPLOYEES WHERE NAME = :name;  
            // output empoyee information
            cout<<"\nCustomer Name\t\t: "<<name;
            cout<<"\nCustomer contact\t: "<<salary;
            cout<<"\nCustomer status\t\t: "<<address;
            cout<<"\n\nEnter new value for customer:\n\n";

    // update employee
        //  cout<<"Customer name\t\t: "; // if I comment out this it will update
        //  cin.getline(name,50);   // if I comment out this it will update
            cout<<"Customer salary\t\t: ";
            cin.getline(salary,10);
            cout<<"Customer address\t\t: ";
            cin.getline(address,50);

// check employee name if it initialize
    cout<<"\nCustomer Name\t\t: "<<name;

            EXEC SQL UPDATE EMPLOYEES SET SALARY=:salary, ADDRESS=:address WHERE NAME = :name; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-14T13:33:43.110

I think you should replace `NAME = :name` with `NAME = 'name'`

Instead of using colon as **:name** in where condition, **put name under single quotes** just like we do in SQL query statement.

Check this link: [http://publib.boulder.ibm.com/infocenter/db2luw/v8/index.jsp?topic=/com.ibm.db2.udb.doc/ad/c0005909.htm](http://publib.boulder.ibm.com/infocenter/db2luw/v8/index.jsp?topic=/com.ibm.db2.udb.doc/ad/c0005909.htm)

# windows - 未检测到支持 CUDA 的设备

> ID：13333168
> 
> 赞同：8
> 
> 时间：2012-11-11T16:39:33.820
> 
> 标签：windows, cuda, nvidia

我是 CUDA 编程的新手，我完全被卡住了。当我尝试运行提供的*deviceQuery*实用程序或示例应用程序之一时，我收到以下错误：

```
cudaGetDeviceCount returned 38
no CUDA-capable device is detected. 
```

我使用的是 64 位的 Windows 7。我安装了 Visual Studio 2012，然后安装了 CUDA 5.0 64 位。我的显卡是 NVIDIA GeForce GTS 250。今天我去了 NVIDIA 网站并重新安装了该卡的最新驱动程序。

除了“确保您安装了有效的驱动程序”之外，我在 Windows 中找不到任何对此错误的支持。有谁知道可能出了什么问题？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-11T18:40:32.983

评论中讨论的问题是您试图在您通过 RDP 连接的机器上运行 CUDA 会话。这不适用于 WDDM 设备。请参阅[此问题/答案](https://stackoverflow.com/questions/12304082/can-i-run-a-cuda-program-on-a-computer-if-i-remote-into-it-using-windows-rdp)以获取有关它的更多讨论以及可能的解决方法的建议。不幸的是，由于您使用的是 GeForce 设备，因此 TCC 模式不适合您，但如果您可以切换到 VNC 或其他一些远程处理方法，您可能会得到很好的结果。

**编辑：**

请注意，使用一些我无法解释的魔法，NVIDIA 最近推出了新的 Windows GPU 驱动程序，它可能（应该）解决上述限制。现在，即使在 RDP 会话中也可以使用最新的 NVIDIA 驱动程序为您的 GPU 启用 GPU 的使用。此功能仅适用于具有最新驱动程序支持的最新 CUDA GPU（即 353.xx 或更高版本、r352 和更高版本）。所以应该支持 cc2.0 GPU，但对 cc1.x GPU 的驱动程序支持在前一段时间就结束了，所以这些较旧的 GPU 将无法利用此功能。

# html - CSS 打印 - 默认页面方向

> ID：13333174
> 
> 赞同：0
> 
> 时间：2012-11-11T16:40:06.133
> 
> 标签：html, css, printing

我在表格上有一个包含一些数据的页面，并且我对 CSS 进行了样式设置，因此所有内容都可以正确打印。但是，由于页面的性质，最好“横向”打印，这样表格的宽度就会更大。我知道这是用户应该从系统的打印选项中选择自己的设置，但我想知道是否有任何方法可以让打印面板为用户预先选择该选项。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T16:43:32.303

```
@page {
    size: landscape;
} 
```

请参阅[CSS3 模块：分页媒体 3.3 页面大小](http://www.w3.org/TR/css3-page/#page-size)。然而，CSS3M:PM 是一个有六年历史的工作草案，在过去几年里并没有引起太多关注，所以你必须检查你的目标浏览器是否真的支持这个规则。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-11T16:44:54.710

简而言之，在 web 开发下，你不能使用 javascript 来触摸打印机。您甚至无法知道查看您网站的计算机是否连接了打印机。并且在你发出window.print() 之后，你无法确定页面是否打印成功。

如果您的要求是将布局设置为横向，这里有一个 CSS 技巧适合您：

```
<style type="text/css" media="print">
.landScape
{ 
 width: 100%; 
 height: 100%; 
 margin: 0% 0% 0% 0%; 
 filter: progid:DXImageTransform.Microsoft.BasicImage(Rotation=3);
} 
</style>

<body class="landScape">
...
</body> 
```

试试看是否适合你。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-11T16:42:39.573

不幸的是，打印是 DOM 范围之外的系统功能，因此 CSS 不会让您触及它。

# xml - 解析从 Curl 接收的 XML 以获取特定值

> ID：13333179
> 
> 赞同：5
> 
> 时间：2012-11-11T16:41:05.540
> 
> 标签：xml, curl, xml-parsing

我正在尝试为`<cookie>`&之间的数据和 &之间`</cookie>`的数据（尾引号）过滤此代码`account-id="``"`

```
<?xml version="1.0" encoding="utf-8"?>
<results>
 <status code="ok"/>
 <common locale="en" time-zone-id="85">
  <cookie>na3breezfxm5hk6co2kfzuxq</cookie>
  <date>2012-11-11T16:26:52.713+00:00</date>
  <host>http://meet97263421.adobeconnect.com</host>
  <local-host>pacna3app09</local-host>
  <admin-host>na3cps.adobeconnect.com</admin-host>
  <url>/api/xml?action=common-info</url>
  <version>8.2.2.0</version>
  <tos-version>7.5</tos-version>
  <product-notification>true</product-notification>
  <account account-id="1013353222"/>
  <user-agent>curl/7.24.0 (x86_64-apple-darwin12.0) libcurl/7.24.0 OpenSSL/0.9.8r zlib/1.2.5</user-agent>
 </common>
</results> 
```

任何帮助，将不胜感激。

编辑

这是我运行以返回上述 xml 的 curl 命令。

```
curl -s http://meet97263421.adobeconnect.com/api/xml?action=common-info 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-11T17:05:20.770

通常，正则表达式（因此`grep`）[不太适合解析 XML](https://stackoverflow.com/a/1732454/900873)，但如果您可以保证输入格式正确且一致，则可以使用`grep`'perl 样式的正则表达式（在 grep 具有他们）：

```
grep -oP '(?<=<cookie>).*?(?=</cookie>)'
grep -oP '(?<=account-id=").*?(?=")' 
```

如果你想让它们在同一个命令中，你可以用 分隔它们`|`，但是你必须告诉哪个匹配哪个。

```
grep -oP '(?<=<cookie>).*?(?=</cookie>)|(?<=account-id=").*?(?=")' 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-11T20:18:44.097

正如@Kevin 所述，正则表达式不适合解析 XML。

更好的方法是使用**xmllint**程序，该程序应用 xpath 表达式，如下所示：

```
$ xmllint --xpath "string(/results/common/cookie)" data.xml
na3breezfxm5hk6co2kfzuxq

$ xmllint --xpath "string(/results/common/account/@account-id)" data.xml
1013353222 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-11T20:16:28.133

使用这些 XPath 表达式

```
/results/common/cookie

/results/common/account/@account-id 
```

使用命令行 XPath 解释器

# c++ - SDL 不绘制图像

> ID：13333181
> 
> 赞同：0
> 
> 时间：2012-11-11T16:41:07.730
> 
> 标签：c++, sdl, sprite, render, draw

这是我的 main.cpp

```
#include <cstdlib>
#include <iostream>

#include "Sprite.h"
#include <SDL/SDL.h>
#include <SDL/SDL_ttf.h>
#include "SDL/SDL_mixer.h"

#undef main

SDL_Surface* m_pScreen;
SDL_Surface* bg_image;

int main(int argc, char* argv[]){

        SDL_Event evt;
        bool p_running = true;

        // initialize SDL
        SDL_Init(SDL_INIT_EVERYTHING);
        SDL_EnableUNICODE( SDL_ENABLE );
        TTF_Init();

        // set the title bar text
        SDL_WM_SetCaption("test1", NULL);

        // create the screen surface
        m_pScreen = SDL_SetVideoMode(500, 400, 32, SDL_DOUBLEBUF);

        bg_image = NULL;

        bg_image = Sprite::Load("images/bg.png");

        Sprite::Draw(m_pScreen, bg_image, 0, 0);

        while(p_running)
        {
          SDL_WaitEvent(&evt);
          if(evt.type == SDL_QUIT)
            p_running = false;
        }

        SDL_Quit();

       system("pause");
       return 0;

} 
```

雪碧.h：

```
#ifndef  _SPRITE_H_
#define _SPRITE_H_

#include <SDL/SDL.h>
#include <SDL/SDL_image.h>

class Sprite
{
    public:

             Sprite();

             static SDL_Surface* Load(char* pFile);

             static bool Draw( SDL_Surface* dest, SDL_Surface* src, int x, int y );

             static bool Draw( SDL_Surface* dest, SDL_Surface* src, int x, int y, int x2,
              int y2, int width, int height );
};

// constructor
Sprite::Sprite() {}

SDL_Surface* Sprite::Load( char* File )
{
    SDL_Surface* temp = NULL;
    SDL_Surface* optimized = NULL;

    if(( temp = IMG_Load(File)) == NULL )
    {
          return NULL;
    }

    optimized = SDL_DisplayFormatAlpha(temp);

    SDL_FreeSurface(temp);

    //Uint32 colorkey = SDL_MapRGB( optimized->format, 0xFF, 0x80, 0xC0 );//0xFF, 0x04, 0xC1 );
    //SDL_SetColorKey( optimized, SDL_RLEACCEL | SDL_SRCCOLORKEY, colorkey );

    return optimized;
}

bool Sprite::Draw( SDL_Surface* dest, SDL_Surface* src, int x, int y )
{
      if(dest == NULL || src == NULL)
       {
                  return false;
       }

       SDL_Rect  destR;

       destR.x = x;
       destR.y = y;

       SDL_BlitSurface(src, NULL, dest, &destR);

        return true;
}

#endif 
```

我创建了一个名为 images 的文件夹，并在其中添加了一个名为 bg.png 500x400 的文件，带有一些黑色背景和一些白线，因此我可以将其设置为我的背景...

问题是我总是得到黑屏而不是我尝试加载的图像

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T18:03:26.843

你忘了`SDL_Flip()`

```
while(p_running)
{
  SDL_WaitEvent(&evt);
  if(evt.type == SDL_QUIT)
    p_running = false;
  SDL_Flip(m_pScreen);
  ^^^^^^^^^^^^^^^^^^^^
} 
```

并且可能您的 ide 更改了应用程序的工作目录，在这种情况下，请尝试在完整路径上打开图像。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-11T18:14:55.333

通常，您希望主循环清除屏幕、绘制精灵然后翻转缓冲区。这可以通过简单地改变你的循环来使用你已经拥有的代码很容易地完成：

```
while(p_running)
{
  SDL_PollEvent(&evt); // Poll for new events
  if(evt.type == SDL_QUIT)
  {
    p_running = false;
    break;
  }

  SDL_FillRect(m_pScreen, NULL, 0); // Clear the screen

  // Perform "game" logic here, like moving the sprite

  Sprite::Draw(m_pScreen, bg_image, 0, 0); // Draw the sprite

  SDL_Flip(m_pScreen); // Flip the buffers

} 
```

如果您进行此更改，请记住您应该在循环之前删除 Draw 调用。

# css - 显示时附加下划线：使用 inline-block

> ID：13333188
> 
> 赞同：1
> 
> 时间：2012-11-11T16:42:20.153
> 
> 标签：css

`display: inline-block`当我添加到我的锚点时，这似乎正在发生。有谁知道这是为什么以及我该如何解决？

![在此处输入图像描述](../Images/4636f90c5d52267bbe1efb83aa8b911b.png)

这是我的代码：

```
.nav{
  background-color: $light-grey;
  text-align: center;
  border-top: 10px solid $yellow;
  border-bottom: 10px solid $yellow;
  font-size: 2rem;
}

.nav li{
  display: inline;
}

.nav a{
  display: inline-block;
  padding: 30px 5% 30px 0;
  color: $dark-blue;
  text-transform: capitalize;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-11T16:52:55.030

这修复了它：

```
u{
  text-decoration: none;
} 
```

谢谢你让我走上正确的道路，保罗。

# javascript - 列出来自多个路径的文件

> ID：13333189
> 
> 赞同：0
> 
> 时间：2012-11-11T16:42:26.157
> 
> 标签：javascript, fso

我正在编写一个需要列出来自多个路径的文件的小应用程序。

我试图做这样的事情，但它只向我展示了第一条路径。

任何线索为什么会这样？

这是代码：

```
var wsh = new ActiveXObject("WScript.Shell");
var FSO = new ActiveXObject("Scripting.FileSystemObject");

function window.onload() {
    var s = "";
    var paths = FSO.OpenTextFile("bin\\paths.txt")

    while (!paths.AtEndOfStream) {
    content = paths.ReadLine();
    s += content;
    loadMediaFolders(s);
    }
    stat.innerHTML= s;
}

function loadMediaFolders(wathPath) {
var str = "";
    var folder = FSO.GetFolder(wathPath);
        var mainFolders = new Enumerator(folder.SubFolders);
            for (; !mainFolders.atEnd(); mainFolders.moveNext()) {

                var FolderPath = mainFolders.item().Path;

                var files = FSO.GetFolder(FolderPath);
                var sbFiles = new Enumerator(files.Files);

                for (; !sbFiles.atEnd(); sbFiles.moveNext()) {
                var FilleName = sbFiles.item().Name;

                str += FilleName;
                }
            }
    stat.innerHTML= str;
} 
```

这是路径在文件中的存储方式：

```
F:\\stuff\\Media\\Movies\\
D:\\Media\\Movies\\ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T16:55:47.117

在读取文件夹路径的循环中，您在将路径传递给`loadMediaFolders(...)`. 第一个将起作用，因为`s`将是`F:\stuff\Media\Movies\`，第二次`s`将是`F:\stuff\Media\Movies\D:\Media\Movies\`。

尝试这样的事情

```
while (!paths.AtEndOfStream) {
    content = paths.ReadLine();
    loadMediaFolders(content);
} 
```

`loadMediaFolders(...)`已经将结果写入`stat.innerHtml`，因此也可以删除该行。请记住`stat.innerHtml`，当您真正想要连接结果时，您可能会覆盖所有`loadMediaFolders(...)`.

# python - Sphinx 生成空文档

> ID：13333190
> 
> 赞同：14
> 
> 时间：2012-11-11T16:42:36.343
> 
> 标签：python, python-sphinx

我正在尝试使用 Sphinx 为我的项目生成文档，但输出文档不包含我的任何类。我究竟做错了什么？以下是我用来生成文档的命令：

```
> ls
Aplikacja.py*   Baza.py            doc/                 EkranLogowania.py     EkranRejestracji.py  InterfejsWWW.py  RequestHandler.py    _static/     util.py
BazaLoginow.py  BladWalidiacji.py  EkranBledu.py        EkranMenuGlownego.py  GodzinyZajec.py      Makefile         res/                 _templates/  Zajecia.py
BazaPlanow.py   db/                EkranEdycjiZajec.py  EkranPlanu.py         HTTPServer.py        Plan.py          SesjaUzytkownika.py  USOSApi.py
> sphinx-quickstart
Welcome to the Sphinx 1.1.3 quickstart utility.

Please enter values for the following settings (just press Enter to
accept a default value, if one is given in brackets).

Enter the root path for documentation.
> Root path for the documentation [.]:

You have two options for placing the build directory for Sphinx output.
Either, you use a directory "_build" within the root path, or you separate
"source" and "build" directories within the root path.
> Separate source and build directories (y/N) [n]: n

Inside the root directory, two more directories will be created; "_templates"
for custom HTML templates and "_static" for custom stylesheets and other static
files. You can enter another prefix (such as ".") to replace the underscore.
> Name prefix for templates and static dir [_]:

The project name will occur in several places in the built documentation.
> Project name: usos-python
> Author name(s): d33tah

Sphinx has the notion of a "version" and a "release" for the
software. Each version can have multiple releases. For example, for
Python the version is something like 2.5 or 3.0, while the release is
something like 2.5.1 or 3.0a1\.  If you don't need this dual structure,
just set both to the same value.
> Project version: 0.1
> Project release [0.1]:

The file name suffix for source files. Commonly, this is either ".txt"
or ".rst".  Only files with this suffix are considered documents.
> Source file suffix [.rst]:

One document is special in that it is considered the top node of the
"contents tree", that is, it is the root of the hierarchical structure
of the documents. Normally, this is "index", but if your "index"
document is a custom template, you can also set this to another filename.
> Name of your master document (without suffix) [index]:

Sphinx can also add configuration for epub output:
> Do you want to use the epub builder (y/N) [n]: n

Please indicate if you want to use one of the following Sphinx extensions:
> autodoc: automatically insert docstrings from modules (y/N) [n]: y
> doctest: automatically test code snippets in doctest blocks (y/N) [n]:
> intersphinx: link between Sphinx documentation of different projects (y/N) [n]:
> todo: write "todo" entries that can be shown or hidden on build (y/N) [n]:
> coverage: checks for documentation coverage (y/N) [n]:
> pngmath: include math, rendered as PNG images (y/N) [n]:
> mathjax: include math, rendered in the browser by MathJax (y/N) [n]:
> ifconfig: conditional inclusion of content based on config values (y/N) [n]:
> viewcode: include links to the source code of documented Python objects (y/N) [n]:

A Makefile and a Windows command file can be generated for you so that you
only have to run e.g. `make html' instead of invoking sphinx-build
directly.
> Create Makefile? (Y/n) [y]: y
> Create Windows command file? (Y/n) [y]: n

Creating file ./conf.py.
Creating file ./index.rst.
Creating file ./Makefile.

Finished: An initial directory structure has been created.

You should now populate your master file ./index.rst and create other documentation
source files. Use the Makefile to build the docs, like so:
   make builder
where "builder" is one of the supported builders, e.g. html, latex or linkcheck.

> make html
sphinx-build -b html -d _build/doctrees   . _build/html
Making output directory...
Running Sphinx v1.1.3
loading pickled environment... not yet created
building [html]: targets for 1 source files that are out of date
updating environment: 1 added, 0 changed, 0 removed
reading sources... [100%] index
looking for now-outdated files... none found
pickling environment... done
checking consistency... done
preparing documents... done
writing output... [100%] index
writing additional files... genindex search
copying static files... done
dumping search index... done
dumping object inventory... done
build succeeded.

Build finished. The HTML pages are in _build/html.
> find _build/html
_build/html
_build/html/search.html
_build/html/index.html
_build/html/_static
_build/html/_static/file.png
_build/html/_static/comment-bright.png
_build/html/_static/sidebar.js
_build/html/_static/minus.png
_build/html/_static/ajax-loader.gif
_build/html/_static/jquery.js
_build/html/_static/pygments.css
_build/html/_static/comment.png
_build/html/_static/up.png
_build/html/_static/underscore.js
_build/html/_static/down-pressed.png
_build/html/_static/down.png
_build/html/_static/doctools.js
_build/html/_static/websupport.js
_build/html/_static/default.css
_build/html/_static/comment-close.png
_build/html/_static/up-pressed.png
_build/html/_static/searchtools.js
_build/html/_static/basic.css
_build/html/_static/plus.png
_build/html/objects.inv
_build/html/genindex.html
_build/html/_sources
_build/html/_sources/index.txt
_build/html/.buildinfo
_build/html/searchindex.js 
```

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-11-11T16:49:14.333

您需要[`sphinx-apidoc`](http://www.sphinx-doc.org/en/master/man/sphinx-apidoc.html)在项目上运行该命令以自动生成`.rst`与您的 Python 模块对应的文件。然后扩展程序将使用这些[`autodoc`](http://sphinx-doc.org/ext/autodoc.html)来实际生成文档。

# c++ - 变换将图像恢复到原始位置并停止位置更改

> ID：13333193
> 
> 赞同：0
> 
> 时间：2012-11-11T16:42:41.793
> 
> 标签：c++, objective-c, ios, xcode

在 xcode 上，我有一个 imageView，我想移动到一个位置然后旋转它......但它不会工作......当添加变换线时，imageView 恢复到其原始位置。在盯着相同的代码 6 小时后，我正要认输，但我想我会再试一次......

代码如下：

```
fourImageView.center = CGPointMake(80.0f, 108.0f);
twoImageView.center = CGPointMake(80.0f, 108.0f);

[UIView animateWithDuration:0.65f
                      delay:0.5f
                    options:UIViewAnimationOptionCurveEaseOut
                 animations:^
 {
     fourImageView.transform = CGAffineTransformMakeRotation(-0.22f);
 } completion:nil]; 
```

fourImageView 和 twoImageView 都是 UIImageViews 并声明为（非原子，弱），并作为出口链接到各自的视图。

我什至尝试添加到最后：

```
fourImageView.center = CGPointMake(80.0f, 108.0f); 
```

但可惜没有这样的运气:(

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T19:25:30.040

```
[UIView beginAnimations:@"nameofAnimation" context:nil];
[UIView setAnimationDuration:0.5];
fourImageView.transform = CGAffineTransformMakeRotation(M_PI_2);
[UIView commitAnimations]; 
```

这会将您的图像旋转 90°

# php - 将 php 变量传递给 JavaScript 的问题

> ID：13333194
> 
> 赞同：2
> 
> 时间：2012-11-11T16:42:45.873
> 
> 标签：php, javascript

我想将一个 php 变量传递给 JavaScript。我必须从数据库中获取问题（随机地，一个一个地），如果最终用户回答正确，那么程序正在做其他事情。

数据库

```
+------+-----------------------+---------------+-----------------+
| q_id | description           | text          | answer          |
+------+-----------------------+---------------+-----------------+
|    1 |What is the capital    | United States | Washington D.C. |
|    2 |What is the capital    | California    | Sacramento      |
|    3 |What is the capital    | Maryland      | Annapolis       |
+------+-----------------------+---------------+-----------------+ 
```

在 php 文件中，变量`$question`和`$correctAnswer`具有以下值：

php代码：

```
$sql="SELECT description, text, answer  FROM Questions";
$result = mysql_query($sql);
while($row = mysql_fetch_array($result))
{
   $question=$row['description']."of ".$row['text']."?";
   echo($question);
   $correctAnswer=$row['answer'];
   //echo($correctAnswer);
} 
```

javascript代码：

```
var rightAnswer;
function takeQuestion()
{
    var xmlhttp;    
    if (window.XMLHttpRequest)
    {
        xmlhttp=new XMLHttpRequest();
    }
    else
    {
        xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
    }
    xmlhttp.onreadystatechange=function()
    {
        if (xmlhttp.readyState==4 && xmlhttp.status==200)
        {
           document.getElementById("question").innerHTML=xmlhttp.responseText;
           rightAnswer ='<?php echo $correctAnswer;?>';
           alert(rightAnswer); 
        }
    }
    xmlhttp.open("GET","getQuestion.php",true);
    xmlhttp.send();
 } 
```

该程序正在随机打印问题，但我在将变量传递 `$correctAnswer`给 Javascript 时遇到问题。JavaScript 中的变量`rightAnswer`应该取 php 变量的值`$correctAnswer`。任何帮助将不胜感激。先感谢您！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-11T17:06:34.893

在你的 PHP 里面 while 循环做这个

```
$question=$row['description']."of ".$row['text']."?|".$row['answer'];
echo($question); 
```

在你的java脚本中

```
if (xmlhttp.readyState==4 && xmlhttp.status==200)
    {
        var elements = xmlhttp.responseText.split("|");
       document.getElementById("question").innerHTML=elements[0];
       var rightAnswer = elements[1];
       alert(rightAnswer); 
    } 
```

这是一个想法。将其更改为您想要的方式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-11T17:18:53.020

将您的 javascript 更改为：

将其称为 responseXml：

```
<script type="text/javascript">
var rightAnswer;
function takeQuestion()
{
    var xmlhttp;    
    if (window.XMLHttpRequest)
    {
        xmlhttp=new XMLHttpRequest();
    }
    else
    {
        xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
    }
    xmlhttp.onreadystatechange=function()
    {
        if (xmlhttp.readyState==4 && xmlhttp.status==200)
        {
           xmlDoc=xmlhttp.responseXML; 
           document.getElementById("question").innerHTML=xmlDoc.getElementsByTagName('question')[0].firstChild.nodeValue;
           rightAnswer =xmlDoc.getElementsByTagName('answer')[0].firstChild.nodeValue;
           alert(rightAnswer); 
        }
    }
    xmlhttp.open("GET","getQuestion.php",true);
    xmlhttp.send();
 }

 </script> 
```

将您的 php 文件更改为：

```
<?php
 header('Content-Type: text/xml');
 header ('Cache-Control: no-cache');
 header ('Cache-Control: no-store' , false);     // false => this header not override the previous similar header

$sql="SELECT description, text, answer  FROM Questions";
$result = mysql_query($sql);
while($row = mysql_fetch_array($result))
{
   $question=$row['description']."of ".$row['text']."?";
   //echo($question);
   $correctAnswer=$row['answer'];
   //echo($correctAnswer);
} 

$xmlStr='<?xml version="1.0" encoding="UTF-8"?>
<data>
   <question>'.$question.'</question>
   <answer>'.$correctAnswer.'</answer>
</data>
';
echo $xmlStr;
?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-11T17:02:21.330

当您在同一页面上有 Javascript 和 PHP 时，您可以使用 json_encode 将数据传递给 javascript：

```
<?php
$var = 'hello';
?>
<script type="text/javascript">
var v = <?= json_encode($var); ?>;
</script> 
```

不带引号

如果您进行 ajax 调用 - 该变量不会通过 PHP 传递，而是作为 http 请求传递。在这种情况下，您使用纯 JS

# java - Struts2：方法属性在 按钮不起作用

> ID：13333196
> 
> 赞同：8
> 
> 时间：2012-11-11T16:43:01.850
> 
> 标签：java, jsp, struts2, submit-button, struts-action

我在jsp中有一个表格。有两个提交按钮：“搜索”和“添加新”按钮。我已经为每个按钮设置了自己的方法属性。

```
<s:form name="searchForm" action="employeeAction" method="post">
    <s:textfield name="id" label="Employee ID"/>
    <s:textfield name="name" label="Employee Name"/>

    <s:submit value="Search" method="doSearch"/>
    <s:submit value="Add New" method="doAddNew"/>
</s:form> 
```

在 struts.xml 中

```
<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE struts PUBLIC
    "-//Apache Software Foundation//DTD Struts Configuration 2.3//EN"
    "http://struts.apache.org/dtds/struts-2.3.dtd">

<struts>

    <constant name="struts.enable.DynamicMethodInvocation" value="false" />
    <constant name="struts.devMode" value="true" />

    <package name="default" namespace="/" extends="struts-default">

        <default-action-ref name="index" />

        <global-results>
            <result name="error">/error.jsp</result>
        </global-results>

        <global-exception-mappings>
            <exception-mapping exception="java.lang.Exception" result="error"/>
        </global-exception-mappings>

    </package>

    <package name="example" namespace="/example" extends="default">

        <action name="employeeAction" class="example.EmployeeAction">
           <result name="search">/example/search.jsp</result>
           <result name="add">/example/add.jsp</result>
        </action>

    </package>
</struts> 
```

在 EmployeeAction 类中

```
public class EmployeeAction extends ActionSupport {

    private static final Logger logger = Logger.getLogger(EmployeeAction.class);

    @Override
    public String execute() throws Exception {    
        logger.info("Calling execute!");    
        return SUCCESS;
    }

    public String doSearch() throws Exception {    
        logger.info("Calling doSearch!");    
        return "search";
    }

    public String doAddNew() throws Exception {    
        logger.info("Calling doAddNew!");    
        return "add";
    }
} 
```

问题是当我单击**“搜索”**或**“添加新”**按钮时，从未调用方法**doSearch()**或**doAddNew()**，而是调用方法**execute()**。我上面的代码有什么问题？

我正在使用struts v2.3。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-11T23:00:02.503

放

```
<constant name="struts.enable.DynamicMethodInvocation" value="false" /> 
```

至

```
<constant name="struts.enable.DynamicMethodInvocation" value="true" /> 
```

另一种方法是为同一个 Action 定义多个映射，例如

在 JSP 中：

```
<s:submit value="Search"  action="employeeSearchAction" />
<s:submit value="Add New" action="employeeAddNewAction"/> 
```

在 Struts.xml 中

```
<action name="employeeSearchAction" class="example.EmployeeAction" method="doSearch">
       <result>/example/search.jsp</result>
</action>
<action name="employeeAddNewAction" class="example.EmployeeAction" method="doAddNew">
       <result>/example/add.jsp</result>
</action> 
```

第三种方法是使用[通配符映射](https://cwiki.apache.org/confluence/display/WW/Wildcard+Mappings)。

PS：如果您选择第二个，我建议作为最佳实践，为您必须执行的每个逻辑操作使用一个操作...

如果您的操作“search”和“addNew”都加载/管理了公共数据，那么您可以定义一个由employeeSearchAction 和employeeAddNewAction 扩展的employeeBaseAction。

* * *

# 编辑

现在是 2014 年，**一致不鼓励使用 DMI**（今天比以往任何时候都更），除了非常没用，所以我**强烈**建议您使用解决方案 n.2。

# php - 在不刷新页面的情况下单击链接时运行 PHP 脚本

> ID：13333198
> 
> 赞同：4
> 
> 时间：2012-11-11T16:43:14.507
> 
> 标签：php, javascript, jquery, styleswitching

好的，所以我在php中做了一个样式切换器，我将它用作我网站上的隐藏功能，当用户键入“teema”时触发，页面内容顶部会出现一个模式框并显示可用的主题。

```
<ul>
    <li><a href="teema.php?teema=default" class="ajaxLink">Normaali</a></li>
    <li><a href="teema.php?teema=superhero" class="ajaxLink">Superhero</a></li>
    <li><a href="teema.php?teema=spacelab" class="ajaxLink">Spacelab</a></li>
    <li><a href="teema.php?teema=united" class="ajaxLink">United</a></li>
    <li><a href="teema.php?teema=cyborg" class="ajaxLink">Cyborg</a></li>
</ul> 
```

但是，我想在不刷新页面的情况下更改主题，因此 css 应该在后台加载。这是 teema.php：

```
<?php
    $style = $_GET['teema'];
    setcookie("teema", $style, time()+604800);
    if(isset($_GET['js'])) {
        echo $style; 
    } 
    else{
    header("Location: ".$_SERVER['HTTP_REFERER']);  
    }
?> 
```

以及检查 cookie 的索引上的 php：

```
<?php 
if(!empty($_COOKIE['teema'])) $style = $_COOKIE['teema'];
else $style = 'default';
?>
<link rel="stylesheet" href="css/<? echo $style;?>.css" id="theme"> 
```

如何在后台加载新的 css，并使用 jQuery 将其淡入旧 css？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T16:59:45.277

更改此链接的内容 ( `$('$#theme').attr('href', 'css/' + selectedtheme +'.css');`，您也可以在 javascript 中设置 cookie ( `document.cookie = 'theme=' + selectedtheme`)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-11T17:02:44.347

您可以简单地发出 ajax 请求，以便返回 cookie

使用 jQuery：

```
$('.ajaxLink').click(function(e) {
    e.preventDefault();
    var teemaUrl=this.href;
    var teema=teemaUrl.split('=').pop()
    $.get(teemaUrl, { js:true}, function(data){
       $('#theme').attr('href','css/'+ teema+'.css')

    })
}); 
```

这将解析`teema`来自 link 的值`href`，调用它`href`（可能需要添加路径信息）并更新`href`ID=theme 的链接标签

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-11T16:54:31.953

您可以在 PHP 文件中给出 JavaScript 内容类型的响应并操作样式表。

### 以这种方式更改代码：

```
<?php
    $style = $_GET['teema'];
    setcookie("teema", $style, time()+604800);
    if(isset($_GET['js'])) {
        // echo $style; 
    } 
    else{
     // header("Location: ".$_SERVER['HTTP_REFERER']);  
    }
    header("Content-type: text/javascript");
?>
document.getElementById("theme").setAttribute("href", "teema.css"); 
```

* * *

### 使用 AJAX 和 PHP 更改主题。

由于您已经`id="theme"`在`<link />`标签中使用了，我们可以使用 AJAX 在 jQuery 中轻松设置内容。

因此，您以这种方式提出主题请求：

```
$.getScript("theme.php?teema=theme"); 
```

在 PHP 中：

```
header("Content-type: text/javascript");
$('#theme').attr('href', 'css/<?php echo $_GET['teema']; ?>'); 
```

# c# - 无法在方法调用中将字典转换为 IDictionary

> ID：13333200
> 
> 赞同：5
> 
> 时间：2012-11-11T16:43:24.350
> 
> 标签：c#, .net, type-conversion, covariance, implicit-conversion

我这辈子都想不通。假设我有以下两个字典对象：

```
// Assume "query" is a LINQ queryable.
Dictionary<string, int> d1 = query.ToDictionary(k => k.Key, v => v.Value);
Dictionary<string, int>  d1 = query.ToDictionary(k => k.Key, v => v.Value); 
```

以下语句会产生一个编译时错误，即无法在 Dictionary 和 IDictionary 之间进行隐式转换：

```
// Compile time error!
Tuple<IDictionary<string, int>, IDictionary<string, int>> = Tuple.Create(d1, d2); 
```

我必须明确地进行转换：

```
Tuple<IDictionary<string, int>, IDictionary<string, int>> = Tuple.Create(d1 as IDictionary<string, int>, d2 as IDictionary<string, int>); 
```

我不明白为什么编译器无法弄清楚协方差操作 - Dictionary 实现 IDictionary - 特别是因为我们都知道这样的事情当然会起作用：

```
IDictionary<string, int> d3 = d1; 
```

我确信这种行为是有充分理由的，我很好奇它是什么。

**更新1：** 为了澄清，我对行为而不是如何解决问题感到好奇。我知道不同的解决方案:)

**更新 2：** 谢谢大家的精彩回答。我不知道`Tuple`是不变的，现在我知道了。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-11T16:56:44.100

基本上，问题在于该`Tuple`族的类型参数不是协变的。不可能，因为这是一门课。*但是，可以*创建协变的接口或委托版本，因为没有成员在输入位置接受类型参数。

这是最容易看到的[`Tuple<T1>`](http://msdn.microsoft.com/en-us/library/dd386941.aspx)：

```
Tuple<string> stringTuple = Tuple.Create("Foo");
Tuple<object> objectTuple = stringTuple; 
```

这个电话：

```
Tuple.Create(d1, d2); 
```

... 将两个类型参数都推断为`Dictionary<string, int>`，因此您尝试从 转换`Tuple<Dictionary<string, int>, Dictionary<string, int>>`为 `Tuple<IDictionary<string, int>, IDictionary<string, int>>`，但这是行不通的。

具有更改参数类型的版本，`as`以便类型推断给出所需的类型参数 - 但根据塞巴斯蒂安的回答，直接编写类型参数并完全避免推断会更简单：

```
Tuple.Create<IDictionary<string, int>, IDictionary<string, int>>(d1, d2) 
```

如果你`var`在这一点上使用，它还*不错*：

```
var x = Tuple.Create<IDictionary<string, int>, IDictionary<string, int>>(d1, d2); 
```

`x`现在将`Tuple<IDictionary<string, int>, IDictionary<string, int>>`是您想要的类型。

编辑：如评论中所述，您不妨在此时使用构造函数：

```
var x = new Tuple<IDictionary<string, int>, IDictionary<string, int>>(d1, d2); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-11T16:56:56.040

您正在尝试分配...

```
Tuple<Dictionary<string, int>, Dictionary<string, int>> 
```

...到...

```
Tuple<IDictionary<string, int>, IDictionary<string, int>> 
```

...但是 the`Tuple<T1, T2>`是一个类，因此是**[不变](https://stackoverflow.com/a/2872938/533120)**的。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-11T16:56:00.220

Tuple.Create 的类型参数是从类型推断的，因此右侧是两个字典的元组，这是与 IDictionarys 元组不同的类型 - 如果您将类型参数显式添加到 Tuple.Create 为类型IDictionary 一切都应该按预期工作，因为方法参数可以是更具体的类型。

```
 Tuple.Create<IDictionary<string, int>,IDictionary<string, int>>(d1,d2) 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-11T16:56:49.437

`Tuple<Dictionary<string, int>, Dictionary<string, int>>`a和 a之间没有转换，`Tuple<IDictionary<string, int>, IDictionary<string, int>>`因为 C# 中的类（因此`Tuple<T1, T2>`该类）不支持协方差。

编译器已为您的调用推断出最具体的返回类型`Tuple.Create`，并且在推断期间不使用左侧的类型。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-11T16:49:55.720

尝试将变量类型从更改`Dictionary<string, int>`为`IDictionary<string, int>.`

```
IDictionary<string, int> d1 = query.ToDictionary(k => k.Key, v => v.Value);
IDictionary<string, int>  d1 = query.ToDictionary(k => k.Key, v => v.Value); 
```

# javascript - 当单击某些链接然后友好转发时，通过弹出窗口强制 Omniauth 登录

> ID：13333202
> 
> 赞同：5
> 
> 时间：2012-11-11T16:43:27.283
> 
> 标签：javascript, ruby-on-rails, facebook, redirect, omniauth

在[这个问答线程](https://stackoverflow.com/questions/4491433/turn-omniauth-facebook-login-into-a-popup)之后，我得到了它，以便用户可以使用弹出窗口通过 Omniauth Facebook 策略登录。这是我的代码：

看法：

```
<%= link_to("Sign in with Facebook", "/auth/facebook", :id => "signin", 
:data => {:width => 600, :height => 400}) %> 
```

应用程序.js：

```
function popupCenter(url, width, height, name) {
  var left = (screen.width/2)-(width/2);
  var top = (screen.height/2)-(height/2);
  return window.open(url, name, "menubar=no,toolbar=no,status=no,width="+width+",height="+height+",toolbar=no,left="+left+",top="+top);
}

$(document).ready(function() {
  $('a#signin').click(function(e) {
    popupCenter($(this).attr('href'), $(this).attr('data-width'), $(this).attr('data-height'), 'authPopup');
    e.stopPropagation();
    return false;
  });
}); 
```

session_controller.rb：

```
 def create
    user = AuthProviders::FacebookUser.find_or_create_user_from(auth_hash)
    session[:current_user_id] = user.id
    @return_to = origin || root_url
    render :callback, :layout => false
  end

  protected

  def auth_hash
    request.env['omniauth.auth']
  end

  def origin
    request.env['omniauth.origin']
  end 
```

意见/会话/callback.html.erb：

```
<script type="text/javascript">
  if (window.opener) {
    window.opener.location = '<%= @return_to %>';
  }
  else {
    window.location = '<%= @return_to %>';
  }
  return window.close();
</script> 
```

这很好用，但我需要代码能够处理两个额外的场景：

**(1) 用户点击一个链接，控制器动作呈现一个普通的旧 html 响应，但只有当有 current_user（即登录）时才能查看该页面。单击链接后，用户将被迫使用弹出窗口通过 Facebook 登录。一旦通过身份验证，用户将被转发到原始请求页面。** 例如，用户单击此链接，但由于他未登录，系统会提示他通过 Facebook 登录，然后返回到请求的页面：

```
<%= active_link_to("Your Stuff", user_stuff_path(current_user), :wrap_tag => :li) %> 
```

当您不使用弹出窗口时，使用[Hartly 的友好转发章节](http://ruby.railstutorial.org/chapters/updating-showing-and-deleting-users?version=3.1#sec:friendly_forwarding)很容易做到这一点。

**(2) 另一个场景与 (1) 类似，但控制器操作不是 html，而是呈现 javascript，然后打开一个（Twitter 引导）模式对话框。**用户必须登录才能查看此模态框，因此应用程序需要向用户显示 Facebook 身份验证对话框，然后将他/她转发回模态框。这是我的应用程序中的示例链接：

```
<%= link_to(event.home_pick_path, :remote => true, :class => "#{event.home_button_class}", :rel => "tooltip", :data => {:placement => "top", "original-title" => "#{event.home_bet_tooltip}"}) do %>
  <div class="team-name"><%= event.home_team_nickname %></div>
<% end %> 
```

请求 URL 如下所示：`/picks/new?pick_line_id=1&pick_num=1`。

所以我想无论这两种情况的解决方案是什么，都会涉及到一些管道，所以我很感谢您抽出时间提前做出回应。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T08:12:36.180

我认为你过度工程。我会采用一种非常简单的方法，但这当然取决于您的业务逻辑。

如果没有当前用户，我将在同一个 url 中呈现带有“登录”按钮的“401”模板，这将触发 Fb 登录按钮。

在回调中（未测试）..

```
def create
  if session[:redirect_to].nil?
    session[:redirect_to] = origin
  end
  user = AuthProviders::FacebookUser.find_or_create_user_from(auth_hash)
  session[:current_user_id] = user.id
  unless session[:redirect_to].nil?
    redirect = session[:redirect_to] || root_url
    session[:redirect_to] = nil
    redirect_to redirect
  end 
end 
```

当然，没有模板可以处理它，因为您不需要它。

# javascript - 使用 jquery 从元素列表中获取 id

> ID：13333206
> 
> 赞同：0
> 
> 时间：2012-11-11T16:43:49.357
> 
> 标签：javascript, jquery, html

我有下一个 HTML 代码，我想用 jquery 从 HTML 列表（id="seconde"）中获取 id 属性。

```
 <div id="navigation">
<ul    class=" sf-menu sf-vertical " >
            <li >

                <a href="#">Pollo</a>
                <ul>
                    <li>
                        <a href="#">Prime lavorazioni</a>

                    </li>
                    <li id = "seconde">
                        <a href="#">Seconde lavorazioni</a>

                    </li>
                    <li>
                        <a href="#">Terze lavorazioni</a>

                    </li>

                </ul>
            </li>

        </ul>
        </div> 
```

这是我的.js：

```
 $("ul.sf-menu li ").click(function(){

          var oID = $(this).attr("id");
          alert(oID);
        }); 
```

但不起作用。任何的想法？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T16:49:35.800

您应该只将事件处理程序附加到内部 li 标签（并确保定义了 oID 变量，因为某些 li 标签没有“id”属性）：

```
$("ul.sf-menu ul li ").click(function()
{
  var oID = $(this).attr("id");
  if ( oID )
    alert(oID);
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-11T16:51:49.760

问题是，您的列表是嵌套的。你有一个 ul.sf-menu > li > ul > li 的 DOM 树

因此，当您单击列表项时，您的回调实际上会触发两次，因为已单击了两个列表项。

您可能会考虑将代码更改为此，因此仅匹配 ul 的子项的列表项：

```
$("ul.sf-menu ul > li ").click(function(){

      var oID = $(this).attr("id");
      alert(oID);
}); 
```

或者，您可以从 li-items 中删除 id 并将它们添加到链接本身。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-11T16:52:47.263

```
$("ul.sf-menu ul li ").click(function(){
    var oID = $(this).attr("id");

    if(typeof oID != 'undefined'){
        alert(oID);
    }
});​ 
```

找到目标（DOM 树）LI，我也只是验证未定义

[http://jsfiddle.net/sameerast/8YwVj/](http://jsfiddle.net/sameerast/8YwVj/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-12T05:58:51.170

当您单击一个列表项时，您的回调实际上会触发两次，因为已单击了两个列表项。您仅在第二个 LI 项目中提供了 id。请在每个 LI 元素中使用 ID 并尝试以下代码。

你有一个 ul.sf-menu > li > ul > li 的 DOM 树。

您可以使用

$("ul.sf-menu ul > li").click(function(){

```
 var oID = $(this).attr("id");
  alert(oID); 
```

});

# python - Python结构“本地”功能不尊重环境变量DJANGO_SETTINGS_MODULE

> ID：13333207
> 
> 赞同：3
> 
> 时间：2012-11-11T16:43:53.877
> 
> 标签：python, django, deployment, fabric

我的项目设置有以下方案：

```
myproject/
   app1/
   app2/
   appN/
   settings/
      __init__.py
      base.py
      devel.py
      production.py 
```

在我的本地环境中，我在 virtualenvwrapper 的`postactivate`脚本中：

```
myproject_root=/home/rantanplan/Projects/repos/myproject
cd $myproject_root
export DJANGO_SETTINGS_MODULE=myproject.settings.devel 
```

这样当我这样做`workon myproject`时，它将更改为项目的根目录并设置`DJANGO_SETTINGS_MODULE`我想要的活动。

这对 django 和所有命令（如`python manage.py syncdb`）都有效。

另一方面，现在我有这个织物任务：

```
@task
def syncdb():
    local('python manage.py syncdb --noinput') 
```

当我有一个简单的`settings.py`文件时，这曾经可以正常工作，但是当我更改为上述方案时，它会引发此异常：

```
django.core.exceptions.ImproperlyConfigured: settings.DATABASES is improperly configured. Please supply the ENGINE value. Check settings documentation for more details.

Fatal error: local() encountered an error (return code 1) while executing 'python manage.py syncdb --noinput'

Aborting. 
```

一些附加说明：

*   [项目](http://docs.fabfile.org/en/1.5/api/contrib/django.html#fabric.contrib.django.project)功能在这里不适用，因为它错误地假设（内部）所有 django 设置模块都被命名为“设置”。
*   我尝试了[settings_module](http://docs.fabfile.org/en/1.5/api/contrib/django.html#fabric.contrib.django.settings_module)功能无济于事。它在`os.environ`内部使用来设置环境变量，但没有效果。
*   如果我`os.environ['DJANGO_SETTINGS_MODULE']`在任务定义之前打印，它会正确打印“myproject.settings.devel”。

那么我在这里做错了什么，你建议我应该如何解决这个问题？

* * *

为了省去你的麻烦，我应该说我知道我可以通过以下方式解决这个问题：

```
def syncdb():
    with prefix('export DJANGO_SETTINGS_MODULE=myproject.settings.devel'):
        local('python manage.py syncdb --noinput') 
```

但如果可以的话，我宁愿避免使用`prefix`。

我也知道我可以做到，正如 hynekcer 建议的那样：

```
@task
def syncdb():
    local('python manage.py syncdb --settings=myproject.settings.devel --noinput') 
```

但我真的很想知道为什么`local`不尊重`DJANGO_SETTINGS_MODULE`和为什么`settings_module`不像宣传的那样工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T00:45:28.983

您可以使用`settings`选项。它优先于 DJANGO_SETTINGS_MODULE 变量。

```
@task
def syncdb():
    local('python manage.py syncdb --settings=myproject.settings.devel --noinput') 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T18:50:21.587

好吧，我发现了问题，但我不知道该怎么做。

首先，我似乎没有透露所有必要的信息。

虽然我的 django 项目的结构与我描述的完全一样，但我的结构结构有点复杂。

本质上，我遵循[织物文档的这一部分中的一些模式](http://docs.fabfile.org/en/1.4.0/usage/tasks.html#namespaces)

完整的结构描述如下：

```
deployment/
  __init__.py
  fabric/
    __init__.py
    database.py
    repo.py
    services.py
myproject/
  app1/
  app2/
  appN/
manage.py
fabfile.py 
```

在里面`deployment/fabric/database.py`我有这个代码：

```
django.settings_module('myproject.settings.devel')

@task
def syncdb():
    local('python manage.py syncdb --noinput') 
```

在我的里面我`fabfile.py`有我所有的进口：

```
from deployment.fabric.database import dropdb, createdb, syncdb, createuser
from deployment.fabric.something import blahblah 
```

出于某种原因，我现在似乎无法掌握，在（在部署/织物/数据库.py中发生的）`fabfile.py` 的设置内部没有保留。`DJANGO_SETTINGS_MODULE`

起初我错误地意识到`os.environ`动作不会跨模块持续存在！但这不是真的，因为我立即在我的 django 项目之外构建了一个类似的场景，并使我的错误前提无效。

然后我检查了织物的`local`功能，发现它本质上是一个包装器`subprocess.Popen('...', shell=True)`。所以我测试了我之前的实验，`subprocess.Popen`它仍然保留了跨模块的环境变量。

我不知道这是否与面料的魔术任务导入有关，或者我不掌握一些基本的东西，但以下任何一种方法都可以解决这个问题。

**1）**使用`prefix`上下文管理器

```
def syncdb():
    with prefix('export DJANGO_SETTINGS_MODULE=myproject.settings.devel'):
        local('python manage.py syncdb --noinput') 
```

**2）**在命令中附加一个`--settings`值`local`（如hynekcer所述）

```
@task
def syncdb():
    local('python manage.py syncdb --settings=myproject.settings.devel --noinput') 
```

**3）**在任务中包含`settings_module`调用（尽管它有点使其目的无效）。

```
@task
def syncdb():
    django.settings_module('myproject.settings.devel')
    local('python manage.py syncdb --noinput') 
```

# visual-studio-addins - 获取 Visual Studio 项目中所有变量和参数的列表

> ID：13333210
> 
> 赞同：0
> 
> 时间：2012-11-11T16:44:00.040
> 
> 标签：visual-studio-addins, visual-studio-extensions, visual-studio-macros

我的目标是创建一个 Visual Studio 扩展、宏或插件，为用户提供所有变量和参数的列表。然后，用户将能够重命名该列表中的任何给定变量。

如何在插件、宏或扩展中获取 Visual Studio 项目中*所有变量和方法参数的列表？*此外，在扩展、宏或插件之间，哪个更合适？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T20:44:06.353

您可以通过 CodeModel API 获得大部分（如果不是全部）信息。[这](http://msdn.microsoft.com/en-us/library/ms228763.aspx)给出了一个高层次的概述。您要做的是获取文件和项目的代码模型对象并循环查找 CodeVariables 和 CodeParameters。请注意，这只会获取您的字段——局部变量不会通过 API 表示。如果您还需要本地人，您可能想尝试 Roslyn CTP，但需要注意的是它尚未完成。

至于要构建的技术——它对您要编写的实际代码没有任何影响，因为无论您如何开始，您都将使用相同的 API。这主要是部署的差异。也就是说，Visual Studio 2012 不再支持宏，并且插件可能是一个巨大的痛苦（并且在这一点上是一种相对遗留的技术）。做一个扩展，这将是最简单的。

# c# - 有什么方法可以将 C# XML 注释转换为 C# 注释？

> ID：13333211
> 
> 赞同：-1
> 
> 时间：2012-11-11T16:44:01.523
> 
> 标签：c#, xml, c#-4.0

**更新：** ILSPY、DotPeek 和 JustDecompile 自动支持我正在寻找的内容。

我只想将我的 C# XML 注释转换为注释。

**输入**

```
<member name="P:...">
      <summary>.......</summary>
      <returns>
        ......
      </returns>
</member> 
```

**输出**，

```
/// <summary>
/// ...
/// </summary>
/// <returns>...</returns> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-11T17:11:33.897

如果没有更多关于您最终试图摆​​脱它的上下文，这应该将 Xml 转换为注释。这里没有什么真正棘手的事情......

```
string content =
@"<member name=""P:..."">
  <summary>This is the summary.</summary>
  <returns>This is the return info.</returns>
  </member>";

XDocument doc = XDocument.Parse(content);                        
foreach (var member in doc.Descendants("member"))
{
     StringBuilder sb = new StringBuilder();

     sb.AppendLine("/// <summary>");
     sb.AppendLine("/// " + member.Descendants("summary").Select(e => e.Value).FirstOrDefault());
     sb.AppendLine("/// </summary>");

     sb.AppendLine("/// <returns>");
     sb.AppendLine("/// " + member.Descendants("returns").Select(e => e.Value).FirstOrDefault());
     sb.AppendLine("/// </returns>");

     // sb.ToString() contains the comments for this member
 } 
```

您可能需要做更多工作才能完全按照您的意愿进行操作。

# python - 在 Python 中给出一对数字作为参数

> ID：13333212
> 
> 赞同：3
> 
> 时间：2012-11-11T16:44:01.883
> 
> 标签：python, python-3.x

在[此](https://stackoverflow.com/questions/746082/how-to-find-list-of-possible-words-from-a-letter-matrix-boggle-solver/750012#750012)消息中，作者写道

```
def neighbors((x, y)): 
```

当我尝试使用 Python 3.3 运行它时，它告诉我这是无效的语法。我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-11T16:44:39.570

解决办法是：

```
def neighbors(point):
    x, y = point 
```

[由于多种原因](http://www.python.org/dev/peps/pep-3113/)，此功能已从 3.x 中删除。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-11T16:57:05.240

另一种选择是将其写为

```
def neighbors(x, y): 
```

并替换：

```
for (nx, ny) in neighbors(path[-1]): 
```

和

```
for (nx, ny) in neighbors(*path[-1]): 
```

# objective-c - CABasicAnimation - 设置开始笔画位置

> ID：13333214
> 
> 赞同：7
> 
> 时间：2012-11-11T16:44:35.303
> 
> 标签：objective-c, ios, cabasicanimation, cashapelayer

我正在动画绘制一个基本圆圈。这工作正常，除了动画在 3 点钟位置开始绘制。有谁知道我怎样才能让它在 12 点开始？

```
self.circle = [CAShapeLayer layer];
self.circle.fillColor = nil;
self.circle.lineWidth = 7;
self.circle.strokeColor = [UIColor blackColor].CGColor;
self.circle.bounds = CGRectMake(0, 0, 200, 200);
self.circle.path = [UIBezierPath bezierPathWithOvalInRect:self.circle.bounds].CGPath;
[self.view.layer addSublayer:self.circle];

CABasicAnimation *drawAnimation = [CABasicAnimation animationWithKeyPath:@"strokeEnd"];
drawAnimation.duration            = 5.0;
drawAnimation.repeatCount         = 1.0;
drawAnimation.removedOnCompletion = NO;
drawAnimation.fromValue = [NSNumber numberWithFloat:0.0f];
drawAnimation.toValue   = [NSNumber numberWithFloat:1.0f];
drawAnimation.timingFunction = [CAMediaTimingFunction functionWithName:kCAMediaTimingFunctionEaseIn];
[self.circle addAnimation:drawAnimation forKey:@"drawCircleAnimation"]; 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-11-11T17:19:11.330

您可以使用`bezierPathWithArcCenter`代替`bezierPathWithOvalInRect`，因为它允许指定开始和结束角度：

```
CGFloat radius = self.circle.bounds.size.width/2; // Assuming that width == height
self.circle.path = [UIBezierPath bezierPathWithArcCenter:CGPointMake(radius, radius)
                                                  radius:radius
                                              startAngle:(-M_PI/2)
                                                endAngle:(3*M_PI/2)
                                               clockwise:YES].CGPath; 
```

有关角度的含义，请参阅[bezierPathWithArcCenter](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIBezierPath_class/Reference/Reference.html#//apple_ref/doc/uid/TP40009276-CH1-SW15)文档。

# c++ - C++ 对象名与类名相同

> ID：13333218
> 
> 赞同：9
> 
> 时间：2012-11-11T16:44:59.407
> 
> 标签：c++

我碰巧写了这样的代码：

```
class a
{
    public:
        a() {}
};

int main()
{
    a *a = new a;        // line 10
    a a;                 // line 11
    return 0;
} 
```

g++ 错误：

```
2.c: In function ‘int main()’:
2.c:10:16: error: expected type-specifier before ‘a’
2.c:10:16: error: cannot convert ‘int*’ to ‘a*’ in initialization
2.c:10:16: error: expected ‘,’ or ‘;’ before ‘a’
2.c:11:7: error: expected ‘;’ before ‘a’ 
```

我发现，如果我在第 10 行将“a *a”更改为“a *b”，那么 g++ 很高兴，这里是好的代码：

```
class a
{
    public:
        a() {}
};

int main()
{
    a *b = new a;
    a a;
    return 0;
} 
```

我很困惑，不确定为什么原始代码无法编译以及“修复”如何工作。

任何的想法？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-11-11T16:51:29.277

有关详细信息，请参阅[Vaughn 的答案](https://stackoverflow.com/a/13333242/1139697)。但是，如果您指定要使用*类*而不是变量，则可以解决此问题：

```
class a
{
    public:
        a() {}
};

int main()
{
    a *a = new class a;
    return 0;
} 
```

或者

```
int main()
{
    class a a; // although the class word isn't needed here
    return 0;
} 
```

## 解释

早在 C 结构被放置在它们自己的命名空间中的时代。然而，在 C++ 中也会发生类似的情况，只要没有同名的局部函数或变量，类名就可以在其命名空间之外使用。

如果您碰巧对类/结构`A`和变量/函数使用相同的名称，`A`则必须使用`struct`/`class`关键字，因为编译器将所有以下出现的 解释`A`为变量/函数而不是结构/类。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-11T16:49:05.260

一旦看到您声明的变量名称，它就可以访问。

所以在这段代码中：

```
a *a = new a;
           1 
```

在第 1 点，`a`是指变量 a 而不是类 a。

当您这样做时：

```
a *b = new a;
a a; 
```

这不是问题，因为`b`是不同的名称。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-11T16:51:45.690

G++ 找到标识符`a`并认为您的意思是指针，而不是类名。您的行`a *a = new a;`与以下内容相同：

```
a *a;
a = new a; 
```

在第二行中，G++ 感到困惑，因为您已经将其定义`a`为指针，而不是类名。

另一行`a a;`有效，因为它只是一个语句。

给类`CamelCase`（每个单词的第一个字母大写）名称和实例（变量名称）`lower_case`或`lowerCamelCase`（有时称为`mixedCase`）名称通常是一个好主意。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-21T23:31:05.463

您可以使用 typedef 临时为类型设置别名。

```
class a;
typedef a _a;
_a a;
void Get(_a a); 
```

# java - sipFactory.setPathName("gov.nist"); 运行时错误

> ID：13333219
> 
> 赞同：1
> 
> 时间：2012-11-11T16:45:03.053
> 
> 标签：java, android, jar, sip

我用 Java 为 Android 客户端和服务器开发 Sip 应用程序，但是当我运行 Android 应用程序时。
我有错误

```
sipFactory.setPathName("gov.nist"); 
```

> 运行时错误消息：- 11-11 07:39:45.816: E/AndroidRuntime(510): java.lang.NoSuchMethodError: javax.sip.SipFactory.setPathName

在 Java 中也是这个错误，但是当我添加**log4j-1.2.17.jar 文件**时它解决了，但在 Android 中出现了同样的错误，我添加了**log4j-1.2.17.jar 文件**，但它不起作用....

谁能帮我？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T10:10:39.907

in android you should add log4j in libs folder. adding jar in build file would not work. if project does not contain libs folder then create a libs folder in project and put your jar in there. then by right click over the jar -> build path-> add to build path. it should works. another thing in android you may face core javax error. see below link for that [Jain SIP stack on android complains of mistaken use of core class](https://stackoverflow.com/questions/13335248/jain-sip-stack-on-android-complains-of-mistaken-use-of-core-class)

# node.js - 如何更改 node.js 中 process.env.PORT 的值？

> ID：13333221
> 
> 赞同：146
> 
> 时间：2012-11-11T16:45:21.543
> 
> 标签：node.js, environment-variables

我想更改 的值`process.env.PORT`，我该怎么做？

我正在运行 Ubuntu 12.04。

* * *

## 回答 #1

> 赞同：303
> 
> 时间：2012-11-11T16:56:53.023

只需运行一次（从 unix shell 提示符）：

```
$ PORT=1234 node app.js 
```

更永久：

```
$ export PORT=1234
$ node app.js 
```

在[Windows](http://msdn.microsoft.com/en-us/library/windows/desktop/bb776899%28v=vs.85%29.aspx)中：

```
set PORT=1234 
```

在 Windows [PowerShell](http://technet.microsoft.com/en-us/library/ff730964.aspx)中：

```
$env:PORT = 1234 
```

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2016-08-05T09:30:39.687

您可以使用跨平台解决方案[https://www.npmjs.com/package/cross-env](https://www.npmjs.com/package/cross-env)

```
$ cross-env PORT=1234 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2017-04-18T16:19:02.073

在运行 node JS 程序时，使用以下命令在 node 进程中设置端口号：

```
set PORT =3000 && node file_name.js 
```

设置的端口可以在代码中访问为

```
process.env.PORT 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-01-05T15:49:57.313

**编辑：**根据@sshow 的评论，如果您尝试在端口 80 上运行您的节点应用程序，则以下方法不是最好的方法。这是一个更好的答案：[如何在端口 80 上运行 Node.js？](https://stackoverflow.com/questions/6109089/how-do-i-run-node-js-on-port-80/27805105#27805105)

**原答案：**

如果你想在端口 80 上运行（或者想**更永久**地设置环境变量），

1.  打开你的 bash 个人资料 `vim ~/.bash_profile`
2.  将环境变量添加到文件中`export PORT=80`
3.  打开 sudoers 配置文件`sudo visudo`
4.  将以下行添加到文件中`Defaults env_keep +="PORT"`

现在，当您运行`sudo node app.js`它时，它应该可以按需要工作。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-08-27T08:44:56.847

最简单的方法是：

```
PORT=2222 node-dev app.js 
```

# web-services - PowerShell 10 分钟的写入进度

> ID：13333223
> 
> 赞同：4
> 
> 时间：2012-11-11T16:45:32.693
> 
> 标签：web-services, sharepoint, powershell, powershell-2.0

大家好，有没有一种方法可以显示 10 分钟的进度条并统计完成百分比，10 分钟还剩多少时间？使用写进度。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-11T17:21:56.193

如果我正确理解了这个问题，那么目标是在进度消息中显示一些额外的信息。例如，这可以通过使用 `Activity`参数来完成。下面的脚本仅显示了这个想法（1 分钟，用于更短的测试）。应该修改它以反映实际需要的消息格式和要显示的信息。

```
$time = 60 # seconds, use you actual time in here
foreach($i in (1..$time)) {
    $percentage = $i / $time
    $remaining = New-TimeSpan -Seconds ($time - $i)
    $message = "{0:p0} complete, remaining time {1}" -f $percentage, $remaining
    Write-Progress -Activity $message -PercentComplete ($percentage * 100)
    Start-Sleep 1
} 
```

进度如下：

```
57 % complete, remaining time 00:00:26
   Processing
   [oooooooooooooooooooooooooooooooooooooooooooooooooooooo 
```

# iphone - 如何使 AVCaptureDevice 静音？

> ID：13333227
> 
> 赞同：1
> 
> 时间：2012-11-11T16:46:26.937
> 
> 标签：iphone, ios, xcode, cocoa

我有`cams`哪个是 AVCaptureDevice，我确定闪光灯已关闭，但现在我需要关闭相机噪音，有没有办法做到这一点？

```
NSArray* cams = [AVCaptureDevice devicesWithMediaType:AVMediaTypeVideo];
    AVCaptureDevice* device = nil;
    if(isBackCamera)
    {
        device = [possibleCameras objectAtIndex:0];
    }
    else
    {
        device = [possibleCameras objectAtIndex:1];
    }

    device.flashMode = AVCaptureFlashModeOff; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T03:50:09.353

我认为苹果不允许你这样做

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-29T14:17:51.157

在使用以下代码以编程方式截取屏幕截图时，我能够禁用/静音相机快门声音。确认可以在 iPhone 5 上的 iOS8.3 上工作，并在 App Store 中接受。

```
MPVolumeView* volumeView = [[MPVolumeView alloc] init];
//find the volumeSlider
UISlider* volumeViewSlider = nil;
for (UIView *view in [volumeView subviews]){
    if ([view.class.description isEqualToString:@"MPVolumeSlider"]){
        volumeViewSlider = (UISlider*)view;
        break;
    }
}

[volumeViewSlider setValue:0.0f animated:YES];
[volumeViewSlider sendActionsForControlEvents:UIControlEventTouchUpInside]; 
```

# jquery - 在 TinyMCE 插件中使用 jQuery

> ID：13333228
> 
> 赞同：6
> 
> 时间：2012-11-11T16:46:28.783
> 
> 标签：jquery, plugins, tinymce

我正在为 TinyMCE 编写一个插件，我想使用 jQuery 对正在编辑的文档进行一些操作。

我不是在寻找一种将 TinyMCE*与*jQuery 一起使用的方法（例如，选择器上的 .tinymce() 方法），我知道有解决方案。

基本上我需要在 TinyMCE 生成的 iframe 中包含 jQuery。

tinymce.dom.ScriptLoader 似乎加载在父窗口中，而不是在 iframe 中，所以这不是一个选项。

到目前为止我已经尝试过：

*   在父和插件上下文中通过ScriptLoader加载jquery（后者完全没有效果，前者加载到错误的上下文中）
*   访问window.parent.$，它是未定义的（即使它是在父窗口中加载的）
*   RTFM'ing 和谷歌搜索，但没有相关的点击。如果插件打开一个对话框，则可以选择加载其他 javascript，但这也不是我需要的。

有人在 TinyMCE 插件中使用 jQuery 吗？如何？

**更新/解决方案**

感谢 Thariama 的建议，我能够让它发挥作用。您可以使用显式 tinymce.get() 来获取编辑器，也可以使用传递给插件的 init() 方法的“ed”实例。然而事实证明，在 init 阶段本身你不能（还）以这种方式访问​​父级。您可以在特定的处理程序中执行此操作。

例如

```
(function($) {
  tinymce.create('tinymce.plugins.SOSamplePlugin', {
    init: function(ed, url) {
        $ = ed.getWin().parent.jQuery; // <- WON'T WORK!

        ed.addCommand('soCmd', function(ui, v) {
            if(e = ed.selection.getNode()) {
                $ = ed.getWin().parent.jQuery; // <- WORKS!
                $(e).wrap('<div class="sample" />');
                ed.execCommand("mceRepaint");
            }
        });
        ed.addButton('SO', {
           title: 'Title',
           cmd: 'soCmd',
           image: 'somebutton.png'
        });
    },
    getInfo: function() {
        return {
            longname: 'Example Plugin',
            author: 'Ivo',
            authorurl: 'http://vanderwijk.info/',
            infourl: 'http://vanderwijk.info',
            version: '1.0'
        };
    }
  });
  tinymce.PluginManager.add('so', tinymce.plugins.SOSamplePlugin);
})($); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-12T09:59:13.637

这很容易

```
var editor = tinymce.get('your_editor_id'); 
```

jQuery 可以使用

```
editor.getWin().parent.jQuery 
```

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2012-11-11T16:56:30.913

好吧，根据我的经验，您不能对 IFrame 进行任何 JS 或 jquery 更改，所以这件事是不可能的。

# mysql - 为什么用分号连接多个 MySQL 查询不能与 Perl DBI 一起使用？

> ID：13333230
> 
> 赞同：4
> 
> 时间：2012-11-11T16:47:11.587
> 
> 标签：mysql, perl, dbi

我想使用[DBI](https://metacpan.org/pod/DBI)将值插入两个单独的 MySQL 表中。我试图`INSERT`通过在它们之间插入 a 将两个工作查询合并为一个`;`：

```
$dbh->do(q{
    INSERT INTO `testA`(test) values('testvalue111');
    INSERT INTO `testB`(test) values('testvalue222');
}); 
```

但我总是得到一个错误：

> “INSERT INTO `testB`(test) values('testvalue222 ...”中的语法错误

如果我将查询分成两个单独的`do`调用，它就可以工作。但组合查询在 phpMyAdmin 中运行良好。为什么它在 Perl 中失败？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-11T16:53:52.777

您需要在`connect`调用中设置一个选项以启用此功能。从[文档](http://search.cpan.org/~capttofu/DBD-mysql-4.022/lib/DBD/mysql.pm)：

> `mysql_multi_statements`
> 从 MySQL 4.1 开始，可以使用此选项启用对由分号 (;) 分隔的多个语句的支持。如果还启用了服务器端准备好的语句，则启用此选项可能会导致问题。

默认情况下它是禁用的，并且可能应该保持未设置 - 这是 SQL 注入的一个重要途径（你应该阅读它，特别是如果你不使用绑定）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-03-02T18:02:33.647

默认情况下，DBD::mysql 不允许您一次执行多个语句。尽管您*可以使用*[Mat 显示](https://stackoverflow.com/a/13333281)`mysql_multi_statements`的选项启用此功能，但您不应该这样做：除此之外，您的代码的可移植性会降低，因为某些数据库驱动程序没有任何此类选项，并且可能会导致准备好的语句出现问题。

相反，只需为每个语句发出单独的 DBI 命令。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-11-11T16:55:24.677

插入`testA`（测试）值（'testvalue111'），（'testvalue222'）；

# php - 将 2 个 mysql 查询合二为一？

> ID：13333231
> 
> 赞同：1
> 
> 时间：2012-11-11T16:47:17.317
> 
> 标签：php, mysql

我有一个多人游戏网站，用户每 20 秒就会获得一次这样的游戏列表：

```
$sql1 = mysql_query("SELECT gp.fk_game_id, gp.player_tiles, gp.infoPop, gp.chatbadge, g.lastdraw FROM ".$prefix."_gameplayer gp
                        INNER JOIN ".$prefix."_games g ON gp.fk_game_id = g.game_id
                    WHERE gp.fk_player_id = $currplayer AND g.invite=0 AND g.deleteby != $currplayer ORDER BY g.lastdraw ASC");  

while($row1 = mysql_fetch_assoc($sql1)){

    $gameid = $row1['fk_game_id'];

    // GET CURRENT GAME OPPONENT ID AND BOARD DATA //
    $sql = mysql_query("SELECT gp.fk_player_id
                              ,gp.last_draw_type
                              ,gp.player_turn
                              ,u.country
                              ,u.username
                              ,u.profileimg
                        FROM ".$prefix."_gameplayer gp
                            INNER JOIN ".$prefix."_users u
                                ON gp.fk_player_id = u.id
                         WHERE gp.fk_player_id!=$currplayer AND gp.fk_game_id=$gameid");
    $row = mysql_fetch_assoc($sql); 
```

如果一个玩家有 30 场比赛，由于 while 循环中的 mysql_query，它会使用大量资源。

每个游戏都存储在 3 行的 2 个 db 表中。

一个包含游戏数据的游戏表行和 2 个游戏玩家表行，一个用于当前玩家，一个用于对手。

这是我必须为其运行第二次查询的对手的行。

是否可以将此行加入到第一个查询中，以便我每 20 秒只为玩家运行一次查询？

表模式如下：

**桌面游戏** game_id - int(11) 邀请时间 - 时间戳 lastdraw - 时间戳 timetodraw - 日期时间 bag_tiles - 文本 table_tiles - 文本 new_tiles - 文本邀请 - int(11) 随机 - int(11) 活动 - int(11) 完成 - int(11) deleteby - int(11) warn1 - int(11) warn2 - int(11)

**表游戏玩家** id - int(11) fk_game_id - int(11) fk_player_id - int(11) player_tiles - 文本 player_draws - int(11) first_draw - int(11) player_turn - int(11) last_draw_type - int(11) player_passes - int (11) swapped - int(11) player_win - int(11) player_points - int(11) infoPop - int(11) chatbadge - int(11)

**表用户** id - int(11) 电子邮件 - varchar(255) 用户名​​ - varchar(255) 密码 - varchar(50) profileimg - varchar(25) 国家 - int(11) 注册 - 日期 date - 时间戳

希望这是有道理的，并希望得到帮助:-)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T16:59:34.530

您可以尝试以下方法：

```
 $sql1 = mysql_query("SELECT gp.fk_player_id,gp.last_draw_type,gp.player_turn, u.country,u.username,u.profileimg,
                    gp.fk_game_id, gp.player_tiles, gp.infoPop, gp.chatbadge, g.lastdraw FROM ".$prefix."_gameplayer gp
                    INNER JOIN ".$prefix."_games g ON gp.fk_game_id = g.game_id 
                    INNER JOIN ".$prefix."_users u ON gp.fk_player_id = u.id
                    WHERE g.invite=0 AND g.deleteby != $currplayer 
                    AND gp.fk_game_id=$gameid ORDER BY g.lastdraw ASC"); 
```

# android - 在opengles中重新调整纹理

> ID：13333237
> 
> 赞同：0
> 
> 时间：2012-11-11T16:48:43.560
> 
> 标签：android, opengl-es, compatibility

我正在使用 OpenGL ES 在 Android 中开发视频游戏。我在重新调整纹理时遇到了一些问题。

我希望我的游戏可以兼容任何分辨率，为此，我创建了一个游戏分辨率和屏幕分辨率之间关系的常量，如下所示：

```
Display display = getWindowManager().getDefaultDisplay(); 
KTE.SCREEN_WIDTH = display.getWidth();
KTE.SCREEN_HEIGHT = display.getHeight();
KTE.REDIMENSION_X = KTE.SCREEN_WIDTH/KTE.GAME_WIDTH; 
KTE.REDIMENSION_Y = KTE.SCREEN_HEIGHT/KTE.GAME_HEIGHT; 
```

使用这个常数，我使用不同的屏幕尺寸得到相同的结果（使用我之前在代码中计算的常数重新调整所有纹理的尺寸）。

问题是我想降低游戏分辨率以使所有纹理更大，现在我在纹理周围得到黑色像素，因为我的重新尺寸常数是带有很多小数的浮点数，我猜所有这些黑色像素都是位置在此计算过程中留下...

以前有人遇到过这个问题吗？重新调整游戏大小的任何提示？我已经尝试了很多东西，但我真的被困住了。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T12:16:09.837

听起来纹理的“重新调整尺寸”没有按预期工作。例如，也许您只是调整纹理数据的大小，但纹理本身的大小仍然与以前相同。这将解释边界处的黑色像素。确保使用 KTE.REDIMENSION_X/Y 因子创建纹理，并确保在写入纹理时写入纹理的边缘。

至于重新调整游戏的尺寸，您是指渲染到的屏幕尺寸吗？为此，它应该是对 glViewport(...) 的简单更改，也许是您为查看场景而创建的透视平截头体或正交。对这两者的更改通常在屏幕尺寸更改时完成 - 通常不需要更改纹理，除非可能提高分辨率（例如对于具有 2x 像素的 iOS 视网膜显示器）。

# sql-server - 如何从选择其他表中更新？

> ID：13333243
> 
> 赞同：2
> 
> 时间：2012-11-11T16:49:08.230
> 
> 标签：sql-server, select, subquery, sql-update, insert-update

我需要从 2 个表之间的选择中更新字段“ErrCode”。我尝试查询它更新所有记录。

**表 LeaveEmp**

```
EmpRun Date                      Start                    Stop
00003  2012-10-02 00:00:00.000   2012-10-02 13:00:00.000  2012-10-02 17:00:00.000
00004  2012-10-02 00:00:00.000   NULL                     NULL 
```

**表修改时间**

```
EmpNo  cDate                     cIn                      cOut                      ErrCode
00001  2012-10-02 00:00:00.000   NULL                     NULL                      NULL
00002  2012-10-02 00:00:00.000   2012-10-02 07:35:00.000  2012-10-02 20:12:00.000   NULL
00003  2012-10-02 00:00:00.000   2012-10-02 13:00:00.000  2012-10-02 17:00:00.000   NULL 
00004  2012-10-02 00:00:00.000   NULL                     NULL                      NULL
00005  2012-10-02 00:00:00.000   2012-10-02 07:13:00.000  2012-10-02 19:24:00.000   NULL
00006  2012-10-02 00:00:00.000   2012-10-02 07:55:00.000  2012-10-02 20:58:00.000   NULL
*****00003,00004 from Table LeaveEmp.step one i insert Table LeaveEmp to Table modifyTime** 
```

**代码：**

```
UPDATE modifyTime
SET ErrCode = '3'
WHERE EXISTS (SELECT coalesce(l.Start,'2012-10-02')
FROM LeaveEmp l
WHERE l.Start = '2012-10-02' and modifyTime.cDate = '2012-10-02') 
```

**这得到输出：**

```
EmpNo  cDate                     cIn                      cOut                      ErrCode
00001  2012-10-02 00:00:00.000   NULL                     NULL                      3
00002  2012-10-02 00:00:00.000   2012-10-02 07:35:00.000  2012-10-02 20:12:00.000   3
00003  2012-10-02 00:00:00.000   2012-10-02 13:00:00.000  2012-10-02 17:00:00.000   3 
00004  2012-10-02 00:00:00.000   NULL                     NULL                      3
00005  2012-10-02 00:00:00.000   2012-10-02 07:13:00.000  2012-10-02 19:24:00.000   3
00006  2012-10-02 00:00:00.000   2012-10-02 07:55:00.000  2012-10-02 20:58:00.000   3 
```

**但我需要输出：**

```
EmpNo  cDate                     cIn                      cOut                      ErrCode
00001  2012-10-02 00:00:00.000   NULL                     NULL                      NULL
00002  2012-10-02 00:00:00.000   2012-10-02 07:35:00.000  2012-10-02 20:12:00.000   NULL
00003  2012-10-02 00:00:00.000   2012-10-02 13:00:00.000  2012-10-02 17:00:00.000   3 
00004  2012-10-02 00:00:00.000   NULL                     NULL                      3
00005  2012-10-02 00:00:00.000   2012-10-02 07:13:00.000  2012-10-02 19:24:00.000   NULL
00006  2012-10-02 00:00:00.000   2012-10-02 07:55:00.000  2012-10-02 20:58:00.000   NULL 
```

我只需要从 Table LeaveEmp 更新。

谢谢你的时间。:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T16:55:20.957

您缺少 modifyTime 和 LeaveEmp 之间的链接...试试这个

```
UPDATE modifyTime
SET ErrCode = '3'
FROM modifyTime m
INNER JOIN LeaveEmp l
  ON m.EmpNo = l.EmpRun
WHERE l.Start = '2012-10-02' and modifyTime.cDate = '2012-10-02' 
```

# python - 不懂 Python 方法

> ID：13333244
> 
> 赞同：0
> 
> 时间：2012-11-11T16:49:09.690
> 
> 标签：python, artificial-intelligence

我不明白该`move`方法中发生了什么。我正在学习 Udacity.com 的 AI 课程。视频位置是：[http ://www.udacity.com/view#Course/cs373/CourseRev/apr2012/Unit/512001/Nugget/480015](http://www.udacity.com/view#Course/cs373/CourseRev/apr2012/Unit/512001/Nugget/480015)

下面是我没有得到的代码，它不像视频中所示的那样工作.. 根据 Udacity 我应该得到的答案是 [0, 0, 1, 0, 0]
这就是我得到的 `[]`

```
p=[0, 1, 0, 0, 0]

def move(p, U):
    q = []
    for i in range(len(p)):
        q.append(p[(i-U) % len(p)])
        return q

print move(p, 1) 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-11T16:51:33.920

*缩进问题*。您应该将您的 return 语句移到 for 循环之外，否则它将在第一次迭代后立即返回：-

```
for i in range(len(p)):
    q.append(p[(i-U) % len(p)])
return q 
```

而且，您的原始代码会返回`[0]`，而不仅仅是`[]`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-11T16:51:56.640

你的 return 不应该缩进到 for 循环中......

```
p=[0, 1, 0, 0, 0]

def move(p, U):
    q = []
    for i in range(len(p)):
        q.append(p[(i-U) % len(p)])
    return q

print move(p, 1) 
```

# curl - couchdb 如何列出数据库上的所有用户？

> ID：13333245
> 
> 赞同：5
> 
> 时间：2012-11-11T16:49:09.497
> 
> 标签：curl, couchdb

我正在尝试确定创建了哪些用户。

沙发上是否有一个 curl 命令可以列出所有现有的 couchdb 用户？

如果是这样，那么 curl 调用是什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-11T19:12:58.277

curl 将所有用户作为文档获取，grep 提取文档`_id`，sed`org.couchdb.user:`去除前缀和 sort 删除来自视图结果的重复项：

```
curl -s http://localhost:5984/_users/_all_docs | grep -o 'org.couchdb.user:[[:alnum:]]\+' | sed -n -e 's/org.couchdb.user:\(.*\)/\1/p' | sort -u 
```

请注意，从 1.2.0 版本开始，如果您在服务器上固定了 Admin Party，则需要传递 CouchDB 管理员凭据才能对`_users`数据库发出此类请求。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2015-07-31T22:17:44.840

使用`_all_docs`，以下命令列出特定数据库的所有文档信息，只需指定数据库名称即可：

```
curl -X GET http://localhost:5984/<db_name>/_all_docs 
```

然后替换`<db_name>`为`_users`, 并使用端口 5986，因为`_users`是端口 5986 下的系统表：

```
curl -X GET http://localhost:5986/_users/_all_docs 
```

# windows - 桌面图标在 Windows 中的位置

> ID：13333249
> 
> 赞同：6
> 
> 时间：2012-11-11T16:49:36.327
> 
> 标签：windows, windows-7, desktop-shortcut

我的一个朋友想要一个程序，它可以“记住”他桌面上某些快捷方式的位置，并通过单击按钮恢复这些位置。我说编写代码可能不会太难，但是在谷歌上搜索了相当长的一段时间后，我还没有找到桌面图标位置的存储位置。

所以，我的问题是：Windows 7 如何以及在哪里记住图标在桌面上的位置？

# android - 在 android 测试项目中测试抽象服务的实现

> ID：13333255
> 
> 赞同：1
> 
> 时间：2012-11-11T16:50:07.683
> 
> 标签：android, unit-testing, testing

我有一个在我的应用程序中多次实现的抽象服务。（[https://developer.android.com/reference/android/app/Service.html](https://developer.android.com/reference/android/app/Service.html)）

是否可以在 android 测试项目下有此服务的自定义实现并测试此自定义实现？

# ruby-on-rails - 用一段独立的代码扩展一个 Ruby 类

> ID：13333256
> 
> 赞同：5
> 
> 时间：2012-11-11T16:50:08.043
> 
> 标签：ruby-on-rails, ruby, class, inheritance

我有一个带有多个具有相同结构的模型的 Rails 应用程序：

```
class Item1 < ActiveRecord::Base
  WIDTH = 100
  HEIGHT = 100
  has_attached_file :image, styles: {original: "#{WIDTH}x#{HEIGHT}"}
  validates_attachment :image, :presence => true
end

class Item2 < ActiveRecord::Base
  WIDTH = 200
  HEIGHT = 200
  has_attached_file :image, styles: {original: "#{WIDTH}x#{HEIGHT}"}
  validates_attachment :image, :presence => true
end 
```

实际的代码更复杂，但这对于简单来说已经足够了。

我想我可以将代码的公共部分放在一个地方，然后在所有模型中使用它。

这是我想到的：

```
class Item1 < ActiveRecord::Base
  WIDTH = 100
  HEIGHT = 100
  extend CommonItem
end

module CommonItem
  has_attached_file :image, styles: {original: "#{WIDTH}x#{HEIGHT}"}
  validates_attachment :image, :presence => true
end 
```

显然它不起作用有两个原因：

1.  `CommonItem`不知道我调用的类方法。
2.  `WIDTH`和`HEIGHT`常量被查找`CommonItem`而不是`Item1`.

我尝试使用一些方法和类继承来`include`代替，但没有一个工作。`extend``class_eval`

看来我错过了一些明显的东西。请告诉我什么。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-11T17:15:00.700

这是我的做法：

```
class Model
  def self.model_method
    puts "model_method"
  end
end

module Item
  def self.included(base)
    base.class_eval do
      p base::WIDTH, base::HEIGHT
      model_method
    end
  end
end

class Item1 < Model
  WIDTH = 100
  HEIGHT = 100
  include Item
end

class Item2 < Model
  WIDTH = 200
  HEIGHT = 200
  include Item
end 
```

该`included`方法在包含时在模块上调用。

我想我已经设法创建了一个与您的问题类似的结构。该模块正在调用从类中的项目类继承的方法`Model`。

输出：

```
100
100
model_method
200
200
model_method 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-11T17:37:51.413

在 Ruby 中，用于将重复代码提取到单个单元中的构造是*方法*：

```
class Model
  def self.model_method
    p __method__
  end

  private

  def self.item
    p self::WIDTH, self::HEIGHT
    model_method
  end
end

class Item1 < Model
  WIDTH = 100
  HEIGHT = 100
  item
end

class Item2 < Model
  WIDTH = 200
  HEIGHT = 200
  item
end 
```

# python - 来自`scipy.ndimage.map_coordinates`的向量/数组输出

> ID：13333265
> 
> 赞同：2
> 
> 时间：2012-11-11T16:51:54.983
> 
> 标签：python, scipy

基本上，是否有可能`scipy.ndimage.map_coordinates`返回一个多值结构，而不仅仅是一个标量？我希望能够插值一次以检索 5 个值，而不是插值 5 次。

这是我在 MWE 上的尝试来证明这个问题。我将从标量的 3D 插值开始。我暂时不会在点之间进行，因为那不是重点。

```
import numpy as np
from scipy import ndimage
coords = np.array([[1.,1.,1.]])
a = np.arange(3*3*3).reshape(3,3,3)
ndimage.map_coordinates(a,coords.T) # array([13.]) 
```

现在，假设我想要`a`一对值，而不仅仅是一个。我的直觉是

```
a = np.arange(3*3*3*2).reshape(3,3,3,2)
a[1,1,1] # array([26.,27.])
ndimage.map_coordinates(a[:,:,:],coords.T)  # I'd like array([26.,27.]) 
```

而不是所需的输出，我得到以下内容：

```
RuntimeError                              Traceback (most recent call last)
(...)/<ipython-input-84-77334fb7469f> in <module>()
----> 1 ndimage.map_coordinates(a[:,:,:],np.array([[1.,1.,1.]]).T)

/usr/lib/python2.7/dist-packages/scipy/ndimage/interpolation.pyc in map_coordinates(input, coordinates, output, order, mode, cval, prefilter)
    287         raise RuntimeError('input and output rank must be > 0')
    288     if coordinates.shape[0] != input.ndim:
--> 289         raise RuntimeError('invalid shape for coordinate array')
    290     mode = _extend_mode_to_code(mode)
    291     if prefilter and order > 1:

RuntimeError: invalid shape for coordinate array 
```

我找不到任何结构（ 、 等）的形状排列，`a`这`coords`给了我正在寻找的答案。此外，如果有比使用更好的方法来做到这一点`map_coordinates`，请继续。我认为`scipy.interpolate.interp1d`可能是要走的路，但我找不到任何文档或暗示它可能会做什么......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-11T22:25:56.137

这是不可能的，我想。

但是张量积插值并不难：

```
import numpy as np
from scipy.interpolate import interp1d

def interpn(*args, **kw):
    """Interpolation on N-D. 

    ai = interpn(x, y, z, ..., a, xi, yi, zi, ...)
    where the arrays x, y, z, ... define a rectangular grid
    and a.shape == (len(x), len(y), len(z), ...)
    """
    method = kw.pop('method', 'cubic')
    if kw:
        raise ValueError("Unknown arguments: " % kw.keys())
    nd = (len(args)-1)//2
    if len(args) != 2*nd+1:
        raise ValueError("Wrong number of arguments")
    q = args[:nd]
    qi = args[nd+1:]
    a = args[nd]
    for j in range(nd):
        a = interp1d(q[j], a, axis=j, kind=method)(qi[j])
    return a

import matplotlib.pyplot as plt

x = np.linspace(0, 1, 6)
y = np.linspace(0, 1, 7)
k = np.array([0, 1])
z = np.cos(2*x[:,None,None] + k[None,None,:]) * np.sin(3*y[None,:,None])

xi = np.linspace(0, 1, 60)
yi = np.linspace(0, 1, 70)
zi = interpn(x, y, z, xi, yi, method='linear')

plt.subplot(221)
plt.imshow(z[:,:,0].T, interpolation='nearest')

plt.subplot(222)
plt.imshow(zi[:,:,0].T, interpolation='nearest')

plt.subplot(223)
plt.imshow(z[:,:,1].T, interpolation='nearest')

plt.subplot(224)
plt.imshow(zi[:,:,1].T, interpolation='nearest')

plt.show() 
```

# android - Build-it ListView 是透明的 - 如何设置不透明？

> ID：13333271
> 
> 赞同：1
> 
> 时间：2012-11-11T16:52:10.550
> 
> 标签：android, user-interface, layout, android-listview

我有以下简单的几行，为我构建了一个列表视图：

```
ffLv = new ListView(this); // create my ListView
ArrayAdapter<String> adapter = new ArrayAdapter<String>(this,android.R.layout.simple_list_item_1, android.R.id.text1);
for (int i=0; i<ffList.size(); i++)
{
   ... // fill the adapter with data here
}
ffLv.setAdapter(adapter);
rootLayout.addView(ffLv); 
```

“rootLayout”是一个 FrameLayout，ListView 应位于顶部并覆盖此视图中的所有其他元素。令人惊讶的是，ListView 是透明的，项目之间的线条和每个项目中的文本都绘制在其他内容之上。

如何将其更改为不透明的 ListView？我真的必须添加一个 Panel 作为 ListView 的父级，还是有更简单的方法来做到这一点？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T17:13:57.340

您可以使用 更改任何元素的背景颜色`setBackgroundColor()`，例如：

```
ffLv.setBackgroundColor(0x55ffffff). 
```

# bison - 野牛中的相互递归

> ID：13333272
> 
> 赞同：1
> 
> 时间：2012-11-11T16:52:19.057
> 
> 标签：bison, yacc

我正在尝试使用 flex/bison 为类似 verilog 的语言创建一个解析器（或者更具体地说是带有一些额外结构的 verilog，用于生成 verilog 代码），但我无法弄清楚如何构建我的 bison 规则来处理语言中可用的一般类型的构造。

这个结构的一个一般例子是这样的：

```
(
output wire          up_o,
input  wire [4:0]    up_i,
///////////////////////////////////////////////////////////
// A comment
///////////////////////////////////////////////////////////
`my_if (`$a eq `$b)
  input  wire        a_{n}_clk_i,
  output wire        a_{n}_rst_o,
`my_endif
output wire                                           out_o
); 
```

原则上 the`my_if`可以嵌套，并且`( );`一切都可以在一个`my_if`块内，没有任何`my_if`. 这让我相信我目前的想法是有缺陷的，我根本不明白如何进行这种相互递归。

似乎引起我问题的是`,`，除了最后一行之外，它正在终止块中的每一行。我的词法分析器忽略注释并对行进行标记，我还`my_if`专门解析了行。

以下是我现在拥有的相关野牛规则，

```
portdecla:
'(' ports ')' ';'
;

ports:
port
| ports ',' port
| ports ',' ifs
| ifs
;

ifs:
ifhead ports TENDIF
| if
; 
```

和解析`ifhead`和输入/输出行罚款。`port``my_if`

任何关于如何创建这些规则的想法将不胜感激

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-12T16:09:01.083

我在理解你的问题时遇到了一些麻烦。如果您描述了问题，而不是仅仅含糊地断言它可能与逗号有关，那会容易得多。当然，它确实与逗号有关：您的语法坚持在 after`ifs`和 after中都有逗号`port`。（另外，要么你没有正确复制和粘贴，要么真的很奇怪`ifs`。）

实际上，您不需要`ifs`，但您需要区分`if`声明末尾的 an 和任何其他`if`：

```
port_declaration: tail_ports;

ports:  port ','
     |  port ',' ports
     |  if
     |  if ports
     ;
tail_ports
     :  port
     |  tail_if
     |  port ',' tail_ports
     |  if tail_ports
     ;
if   :  IF '(' condition ')' ports END_IF
     ;
tail_if
     :  IF '(' condition ')' tail_ports END_IF
     ; 
```

（我写的是右递归，因为它更容易理解，恕我直言，而且从右递归列表中构建 AST 也更容易。参见 Levine，第 66 页。在现代机器上，解析堆栈确实没有问题增长；默认的最大堆栈深度为 10,000；如果这还不够，您可以增加它。）

**编辑：**我想我终于得到了上面的权利。

这类问题通常通过两遍解析来解决；首先是预处理过程，其输出被馈送到真正的解析器中。标记化只进行一次；预处理解析器不区分语言标记；它只关心它自己的令牌。（C 预处理器可以将标记与`##`运算符融合，但它从不拆分标记；这通常被证明是一种合理的方法。）这可以用 bison 来实现，尽管让数据流正确有点挑战；我个人更喜欢`lemon`词法分析器将标记推送到解析器的方法，因为这更容易扩展。

但是，在您的特定情况下，您希望预处理器只接受完整的短语 ( `port`)，因此正如您所说，挑战是`,`正确的，即使最后一个`port`被深埋在`if`结构中。因此，上述区分`if`和的方法`tail_if`。

构建 AST 有多种方法，具体取决于您是否可以在解析时评估条件。如果可以，那么您可以将不需要的端口完全排除在外，这可能是最简单的解决方案。

如果您需要在应用条件之前进行整个解析，那么您仍然有几个选择：明显的一种选择是构建一个节点为`port`or的树`conditional_list`，或者您有效地构建操作向量的代码生成样式`build-port`和`jump-if-condition-false`。这两个选项都需要某种形式的标记联合。

**/Edit**（以下仍然不正确。）

```
typedef struct PortList {
  Port* port;
  struct PortList* next;
} PortList;

typedef struct ConditionalPortList {
  Condition* cond;  /* Optional condition; if absent, unconditional */
  PortList*  ports;
} ConditionalPortList;

typedef struct PortDeclaration {
  ConditionalPortList* clause;
  struct PortDeclaration *next;
} PortDeclaration; 
```

这很容易构建（它可能比这个片段更容易，我有点不习惯。）（警告：未尝试）：

```
%union {
   PortList*            port_list;
   ConditionalPortList* conditional;
   PortDeclaration*     port_declaration;
   /* ... */
}
%type <port_list> ports
%type <conditional> if always
%type <port_declaration> port_tail port_declaration
/* ... */

%%

ports:  port             { $$ = NewPortList($1, NULL); }
     |  port ',' ports   { $$ = NewPortList($1, $3); }
     ;

if: IF '(' condition ')' ports ENDIF
                         { $$ = NewConditionalPortList($3, $5); }
  ;

always: ports            { $$ = NewConditionalPortList(NULL, $1); }
      ;

port_tail: if
         | if port_tail  { $$ = NewPortDeclaration($1, $2); }
         | if always port_tail
                         { $$ = NewPortDeclaration($1, NewPortDeclaration($2, $3); }
         ;

port_declaration:
           '(' always ')' ';'    { $$ = $2; }
         | '(' port_tail ')' ';' { $$ = $2; }
         | '(' always port_tail ')' ';'
                                 { $$ = NewPortDeclaration($2, $3); }
         ; 
```

# c# - 具有数据访问层和 App.Config 的 MVC4 项目中的新实体框架 5 是否存在错误

> ID：13333273
> 
> 赞同：3
> 
> 时间：2012-11-11T16:52:24.967
> 
> 标签：c#, asp.net-mvc, entity-framework, app-config

我已经为此工作了一周，并在 ASP.Net 论坛上发布了许多问题，但没有人回复我。这是故障。我有一个 MVC4 项目，它包含两个类库，一个用于建模数据，另一个用于访问数据。在 DAL 中，我有以下内容：

```
public class GinkysDb : DbContext
{
   public GinkysDb()
        : base("ginkys")
    {
        Debug.Write(Database.Connection.ConnectionString);
    }

    public DbSet<User> Users { get; set; }
    public DbSet<SearchLog> SearchLogs { get; set; }

    public class DbInitializer : DropCreateDatabaseIfModelChanges<GinkysDb>
    {
        protected override void Seed(GinkysDb context)
        {

        Guid g1 = Guid.NewGuid();
        Guid g2 = Guid.NewGuid();
        DateTime Date1 = DateTime.Now.AddDays(-160);
        DateTime Date2 = DateTime.Now.AddDays(-37);
        DateTime Date3 = DateTime.Now.AddDays(-16);
        DateTime Date4 = DateTime.Now.AddDays(-10);
        DateTime Date5 = DateTime.Now.AddDays(-60);
        DateTime Date6 = DateTime.Now.AddDays(-23);
            new List<User>
            {
                new User{Id=g1,UserName="jIgnatowski",FirstName="Jim",LastName="Ignatowski",EmailAddress="Jim@Ignatowski.com"},
                new User{Id=g2,UserName="esmtih",FirstName="Elliott",LastName="Smith",EmailAddress="elliott@smith.com"},
            }.ForEach(u => context.Users.Add(u));
            base.Seed(context);

            new List<SearchLog>
            {
                new SearchLog{Id=(Guid.NewGuid()),UserId=g1,ComapnyName="GT",Notes=""},
                new SearchLog{Id=(Guid.NewGuid()),UserId=g2,ComapnyName="MCA",Notes=""},
                new SearchLog{Id=(Guid.NewGuid()),UserId=g1,ComapnyName="RLL",Notes=""},
                new SearchLog{Id=(Guid.NewGuid()),UserId=g1,ComapnyName="PwC",Notes=""},
                new SearchLog{Id=(Guid.NewGuid()),UserId=g2,ComapnyName="PH",Notes=""},
                new SearchLog{Id=(Guid.NewGuid()),UserId=g1,ComapnyName="KPMG",Notes=""},
            }.ForEach(s => context.SearchLogs.Add(s));
            base.Seed(context);
        }
    }

    protected override void OnModelCreating(DbModelBuilder modelBuilder)
    {
        Database.SetInitializer(new DbInitializer());
        base.OnModelCreating(modelBuilder);
    }
} 
```

我有以下 App.Config：

```
<configuration>
  <connectionStrings>
    <add name="GinkysDb" connectionString="Data Source=.\SQLEXPRESS;initial catalog=ginkys;integrated security=true;App=EntityFramework;multipleactiveresultsets=True" providerName="System.Data.SqlClient" ></add>

  </connectionStrings>
  <configSections>
    <!-- For more information on Entity Framework configuration, visit http://go.microsoft.com/fwlink/?LinkID=237468 -->
    <section name="entityFramework" type="System.Data.Entity.Internal.ConfigFile.EntityFrameworkSection, EntityFramework, Version=5.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" requirePermission="false" />
  </configSections>
  <entityFramework>
    <defaultConnectionFactory type="System.Data.Entity.Infrastructure.SqlConnectionFactory, EntityFramework" />
  </entityFramework>
</configuration> 
```

我尝试添加： base("name=GinkysDb") 以强制它在 App.config 中查找此连接字符串，但我只收到以下错误：

在应用程序配置文件中找不到名为“GinkysDb”的连接字符串。

它显然在 App.Config 中！我好生气！我过去使用 VS2010、MVC3 和 EF4.2（或任何版本首先引入代码）设置了这些类型的项目。这是我第一次使用 VS2012、EF5 和 MVC4...

如果我删除 name= 部分，它工作正常，但使用默认连接器连接到我的本地 SQLEXPRESS DB。作为确保我知道它没有使用 App.Config 的测试，我将连接字符串替换为到我的 Web 托管服务的经过验证的工作连接字符串，并删除了我本地 SQLEXPRESS 服务器上的所有数据库实例。当我运行该应用程序时，它会在本地 SQL 服务器上创建数据库！请帮忙！我求求你了！

谢谢！托尼

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T22:22:54.903

默认情况下，所有配置都是从启动项目的配置文件中获取的。因此，您的 App.config 连接字符串未搜索且未找到。你应该把你的连接字符串放到你开始项目的 web.config 文件中，它就会被找到。

# rendering - 漫反射：为什么黑色材料的“k 漫反射”常数为 0？

> ID：13333278
> 
> 赞同：2
> 
> 时间：2012-11-11T16:53:01.487
> 
> 标签：rendering, glsl, unity3d, shader

我正在学习从头开始编写着色器程序，现在我正在使用漫射照明。目前方程是

```
Diffuse Intensity = Intensity of light * 'k' diffuse constant of material * (dot product of surface's normal vector and light direction vector) 
```

问题是，我读过白色材料的 k 常数为 1，如果材料为黑色，则 k 为 0。现实世界的情况并非如此，因为当我将黑色物体暴露在光线下时，它**确实**变亮了来源。为什么算法是这样的？

我正在从这个链接学习，它教如何在 Unity 中编写 GLSL。我可以更轻松地设置场景，以便在 Unity 中使用着色器进行试验。 [http://en.wikibooks.org/wiki/GLSL_Programming/Unity/Diffuse_Reflection](http://en.wikibooks.org/wiki/GLSL_Programming/Unity/Diffuse_Reflection)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-11T19:01:19.990

计算机图形学中的光照模型只是对现实的简化/近似。大多数介绍都是从[Phong 模型](https://en.wikipedia.org/wiki/Phong_reflection_model)开始的。您的资源仅使用其中的漫反射部分。如果使用镜面光扩展着色器，您可以获得带有镜面高光的黑色对象的效果。

您的真实世界对象反射可能比仅使用 Phong 模型中的漫反射和镜面反射分量表达的要复杂得多。

找到仅反射漫射光的真实世界表面（[朗伯反射器](https://en.wikipedia.org/wiki/Lambertian_reflection#Examples)）也很重要。

# ruby-on-rails - 如何覆盖 Rails 的选择表单助手？

> ID：13333280
> 
> 赞同：2
> 
> 时间：2012-11-11T16:53:16.003
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

我正在尝试像这样覆盖 Rails 的表单选择助手：

```
def select(method, choices, options = {}, html_options = {})
  html_options.reverse_merge!(:disabled => true)
  super(method, choices, options = {}, html_options = {})
end 
```

目标是`disable`所有选择标签。

不幸的是，它根本不起作用。选择框根本不会被禁用，也不会引发错误。我已经验证了该方法在表单中被正确调用，所以这不是问题。

谁能告诉我我在这里想念什么？

感谢您的任何指示。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T20:10:31.510

当您将选项发送给 super 时，您正在重置选项选项。

```
def select(method, choices, options = {}, html_options = {})
  html_options.reverse_merge!(:disabled => true)

  # Don't do this!  By doing this you're *always* sending empty objects for
  # options and html_options to super.
  #super(method, choices, options = {}, html_options = {})

  # Do this!
  super(method, choices, options, html_options)
end 
```

# java - 使用 jvm.dll 运行 java 程序

> ID：13333282
> 
> 赞同：2
> 
> 时间：2012-11-11T16:54:11.990
> 
> 标签：java, c++, jvm

> **可能重复：**
> [将 Java 嵌入到 C++ 应用程序中？](https://stackoverflow.com/questions/7506329/embed-java-into-a-c-application)

是否可以编写 ac/c++ 程序来使用 jvm.dll 库而不是使用 java 或 javaw 来运行类/jar 文件？如果是，那么它是如何完成的？

# matlab - 如何将 1xN 向量拆分为 MxL 向量并用零 填充其余向量？

> ID：13333283
> 
> 赞同：-3
> 
> 时间：2012-11-11T16:54:15.450
> 
> 标签：matlab, reshape

我有一个矩阵

```
a = [1 2 3 4 5 6 7 8 9 10 11] 
```

我需要将它分成 5 行并用零填充未设置块的其余部分，如下所示：

```
transformed = [ 1  2  3  4  5 ;
                6  7  8  9  10;
                11 0  0  0  0 ] 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-11T17:12:18.520

您可以首先扩展`a`以拥有所需数量的元素，如下所示；

```
a(15) = 0 % Matlab will automatically fill elements 12:14 with 0 
```

然后

```
transformed = reshape(a,[5,3])' 
```

生产

```
ans =

     1     2     3     4     5
     6     7     8     9    10
    11     0     0     0     0 
```

# graph - gnuplot 输入文件 7 列带小数

> ID：13333285
> 
> 赞同：0
> 
> 时间：2012-11-11T16:54:27.880
> 
> 标签：graph, gnuplot

我正在尝试绘制以下数据文件：

```
61.0       16.4       100.0      28.6       28.6       12.2       12.2
59.0       25.4       100.0      21.4       21.4       11.8       11.8
69.0       15.9       100.0      35.7       35.7       11.5       11.5
59.0       23.7       100.0      23.4       23.4       11.8       11.8
49.0       20.4       100.0      18.0       18.0       9.8        9.8
84.0       13.1       90.9       50.8       50.8       16.8       16.8
59.0       16.9       100.0      22.6       22.6       11.8       11.8
71.0       16.9       100.0      32.8       32.8       14.2       14.2
68.0       19.1       100.0      26.2       26.2       13.6       13.6
91.0       13.2       100.0      51.6       51.6       18.2       18.2
57.0       22.8       100.0      29.4       29.4       11.4       11.4
52.0       26.9       100.0      17.8       17.8       10.4       10.4
55.0       21.8       100.0      32.2       32.2       11.0       11.0
68.0       19.1       100.0      29.8       29.8       13.6       13.6
50.0       22.0       100.0      19.0       19.0       10.0       10.0
149.0      12.1       66.7       111.2      111.2      29.8       29.8
69.0       20.3       100.0      29.8       29.8       13.8       13.8 
```

我对 gnuplot 很陌生，我似乎无法弄清楚获取此图的正确代码是什么：

我正在尝试这样的事情：

```
gnuplot> set output 'datastore1.png'                                                              
gnuplot> plot 'desktop1.dat' using 0:1 title "totalio" with lines, 'desktop1.dat' using 0:2 title "readpercentage" with lines, 'desktop1.dat' using 0:3 title "cachehitpercentage" with lines, 'desktop1.dat' using 0:4 title "currentkbpersecond" with lines, 'desktop1.dat' using 0:5 title "maximumkbpersecond" with lines, 'desktop1.dat' using 0:6 title "currentiopersecond" with lines, 'desktop1.dat' using 0:7 title "maximumiopersecond" with lines
gnuplot> quit 
```

然而，图表并不完全正确。

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T17:00:38.073

不确定您要在这里绘制什么，但我认为错误是您正在使用第零列作为不存在的“使用”命令。而是使用这个

```
p 'desktop1.dat' u 1:2, 'desktop1.dat' u 1:3 
```

**编辑**

因此，当您针对时间进行绘图时，您可能希望在从文件中读取的数据中添加另一列，以便您拥有

```
15       61.0       16.4       100.0      28.6       28.6       12.2       12.2 
```

作为数据第一行的示例。之后，您使用我上面给出的给定绘图命令。

# ios - 核心数据：在应用程序启动时添加持久存储超时

> ID：13333289
> 
> 赞同：0
> 
> 时间：2012-11-11T16:54:40.973
> 
> 标签：ios, core-data

我有一个应用程序可以在`application:didFinishLaunchingWithOptions`. 添加商店显然需要很长时间，这会导致 iOS 在应用程序完成启动之前终止它。超时时的堆栈跟踪如下所示。有谁知道如何防止这种情况发生？

```
Exception Type:  00000020
Exception Codes: 0x000000008badf00d
Highlighted Thread:  0

Application Specific Information:
com.foo.bar failed to launch in time

Elapsed total CPU time (seconds): 23.490 (user 23.490, system 0.000), 78% CPU 
Elapsed application CPU time (seconds): 8.406, 28% CPU

Thread 0 name:  Dispatch queue: com.apple.main-thread
Thread 0:
0   libsystem_kernel.dylib          0x31b8939c pread + 20
1   libsqlite3.dylib                0x31ed95d0 unixRead
2   libsqlite3.dylib                0x31eec106 readDbPage
3   libsqlite3.dylib                0x31eeb2a2 sqlite3PagerAcquire
4   libsqlite3.dylib                0x31f04096 moveToChild
5   libsqlite3.dylib                0x31f052c6 sqlite3BtreeNext
6   libsqlite3.dylib                0x31f01490 sqlite3VdbeExec
7   libsqlite3.dylib                0x31efa48a sqlite3_step
8   CoreData                        0x364f8892 _execute
9   CoreData                        0x364f878c -[NSSQLiteConnection execute]
10  CoreData                        0x3658bd94 -[NSSQLConnection prepareAndExecuteSQLStatement:]
11  CoreData                        0x365dd4f2 -[_NSSQLiteStoreMigrator performMigration:]
12  CoreData                        0x365d70dc -[NSSQLiteInPlaceMigrationManager migrateStoreFromURL:type:options:withMappingModel:toDestinationURL:destinationType:destinationOptions:error:]
13  CoreData                        0x36577428 -[NSMigrationManager migrateStoreFromURL:type:options:withMappingModel:toDestinationURL:destinationType:destinationOptions:error:]
14  CoreData                        0x365c8670 -[NSStoreMigrationPolicy(InternalMethods) migrateStoreAtURL:toURL:storeType:options:withManager:error:]
15  CoreData                        0x365c79c4 -[NSStoreMigrationPolicy migrateStoreAtURL:withManager:metadata:options:error:]
16  CoreData                        0x365c8ece -[NSStoreMigrationPolicy(InternalMethods) _gatherDataAndPerformMigration:]
17  CoreData                        0x364ec3b0 -[NSPersistentStoreCoordinator addPersistentStoreWithType:configuration:URL:options:error:] 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-11T18:21:38.913

badfood 是常见的启动崩溃。您需要在主线程之外创建 Core Data 堆栈。过去我在这里和其他地方已经讨论过几次了。

您还可以查看 Aplle 的 iCloud Core Datavidros，因为该启动代码也可以解决您的问题。

请记住，您的应用程序需要能够在没有堆栈的情况下启动。对于现有的应用程序，这可能是一个重大变化。

## 更新 2

这*一直*被推荐，但不幸的是直到最近它才开始在模板中显示。

有几件事会导致添加持久存储需要更长的时间：

1.  如果您要将数据库从一个版本迁移到另一个版本；当您将商店添加到协调器时会发生迁移。
2.  如果您将 iCloud 添加到您的应用程序中，则第一次启动需要更长的时间*。*
3.  如果 Core Data 确定需要对数据库进行维护，则可能需要比预期更长的时间。

“正确”的答案是将商店添加到主线程之外的协调器。

快速/创可贴的答案是为核心数据打开 sql 日志记录，然后查看启动期间发生了什么。一旦您了解导致延迟的原因，您就可以解决它。如果是迁移，那么正确的答案可能是唯一的答案。

## 更新 3

1.  在仪器中对此进行分析。这会告诉你慢在哪里。
2.  做什么`dataToMigrate = [self fetchSomeDataFromDatabase];`？

查看您的时间档案，这将告诉您什么是慢的。把仪器的时间曲线发给我，我也会看看。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-11T18:59:58.557

代码很简单：

```
 dispatch_async(DISPATCH_QUEUE_PRIORITY_HIGH, ^{
        [self setupCoreDataStack]; //TODO
    }) 
```

但正如马库斯所说，确保您的应用程序可以处理在启动时没有准备好CoreData（它现在是异步的）..您可以设置一个启动画面！？/ 一个不使用数据库的基本菜单

# lisp - 访问方案中高阶过程的输入

> ID：13333290
> 
> 赞同：0
> 
> 时间：2012-11-11T16:54:55.583
> 
> 标签：lisp, scheme, procedure, mit-scheme

我需要了解如何访问作为输入提供给另一个函数的函数的输入。

例如; 我有一个名为 f 的函数，它只是执行`(define f (lambda (x) (if (null? x) #t (car x))))`此操作。我需要编写一个函数，以这个 f 作为输入并返回另一个函数，这样，

- 定义一个`(twoback f)`以函数 f 作为其输入的函数。

- 作为它的输出，它应该返回一个具有以下行为的新函数 g：

> g(x) = #t 如果 x 是空列表或长度为 1 的列表。
> 
> ```
>  = f(y) where y=(cdr x) otherwise. 
> ```

该函数将像这样调用：`((twoback f3) (list #t #f #t #f))`

所以实际上我的问题是：如何访问我要编写的函数中的函数调用给出的列表（twoback 函数）？因为我需要检查它是否为空。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-11T17:28:02.010

简短的回答，通过柯里化`x`参数。像这样的东西：

```
(define twoback
  (lambda (f)
    (lambda (x)
      ...)))     ; fill-in with the logic requested 
```

上面将定义一个`twoback`接收`f`作为参数的过程调用，然后它将返回一个接收`x`作为参数的新过程。返回的第二个过程是`g`问题中调用的过程，您可以从中访问这两个过程`f`，并且`x`可以像往常一样访问。

现在只需完成`...`具有预期输出的部分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-11T17:20:06.300

我想这就是你的意思：

```
(define (twoback f)
 (lambda (x)
  (if
   (or (null? x) (null? (cdr x)))
   #t
   (f (cdr x)))))
(define f (lambda (x) (if (null? x) #t (car x)))) 
```

# list - 如何在方案中制作深度过滤器

> ID：13333291
> 
> 赞同：2
> 
> 时间：2012-11-11T16:54:56.523
> 
> 标签：list, recursion, scheme, nested, predicate

我有这个方案过程，它列出了谓词为真的（嵌套）列表中的所有事物。

```
(define (deep-filter f lst)
 (cond
  ((null? lst) '())
  ((and (atom? lst) (f lst)) lst)
  ((atom? lst) '() )
  (else (cons (deep-filter f (car lst)) 
              (deep-filter f (cdr lst)))))) 
```

一个例子：

```
 (deep-filter number? '(2 (a ((c)) (1)) 6)) => (2 (() ((())) (1)) 6) 
```

是否可以修复此过程以使其不打印空列表？

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-11T17:11:56.847

尝试这个：

```
(define (deep-filter f lst)
  (cond
    ((null? lst) '())
    ((and (atom? lst) (f lst)) (list lst))
    ((atom? lst) '())
    (else (append (deep-filter f (car lst)) 
                  (deep-filter f (cdr lst)))))) 
```

这称为*展平*列表，诀窍是在列表中使用`append`而不是`cons`和打包单个元素（ 中的第二种情况`cond`）。请注意，这将消除所有子列表，仅返回满足谓词的元素。

如果您需要在删除空列表后保留列表结构，请改为执行以下操作：

```
(define (deep-filter f lst)
  (cond ((null? lst)
         '())
        ((atom? (car lst))
         (if (f (car lst))
             (cons (car lst) (deep-filter f (cdr lst)))
             (deep-filter f (cdr lst))))
        (else
         (filter (compose not null?)
                 (cons (deep-filter f (car lst)) 
                       (deep-filter f (cdr lst))))))) 
```

现在它将按预期工作：

```
(deep-filter number? '(2 (a ((c)) (b)) 6))
=> '(2 6)

(deep-filter number? '(2 (a ((c)) (1)) 6))
=>'(2 ((1)) 6)

(deep-filter number? '(2 (a ((4)) (1)) 6))
=> '(2 (((4)) (1)) 6)

(deep-filter number? '(2 (a ((4)) (1)) 6 ((((((b))))))))
=> '(2 (((4)) (1)) 6) 
```

# c# - 一个实体到另一个具有多个属性的实体

> ID：13333292
> 
> 赞同：0
> 
> 时间：2012-11-11T16:55:07.953
> 
> 标签：c#, entity-framework, c#-4.0, entity-framework-4

我首先遇到了 EF5 代码的表创建问题。我将演示两个案例及其输出。我想知道它们之间的区别以及我如何才能成功实现我的目标。

**情况1**

```
public class User{

public int ID { get; set; }

public string Name { get; set; }

public ICollection<UserMessage> Messages { get; set; }

}

public class UserMessage{

public int ID { get; set; }

public string Message { get; set; }   

public User CreatedBy { get; set; }

public ICollection<User> PermittedUsers {get; set;}

} 
```

现在，在这种情况下，实体框架仅生成 User 和 UserMessage 类，它们仅通过 User 中的 UserMessage_ID 和 UserMessage 中的 CreatedBy_ID 相互绑定。

我很好奇的问题就在这里。每当我创建新消息时，EF5 将如何识别允许的用户？是否会为每个允许的用户复制相同的消息？或者是什么？

**案例2**

```
public class User{

public int ID { get; set; }

public string Name { get; set; }

public ICollection<UserMessage> Messages { get; set; }

}

public class UserMessage{

public int ID { get; set; }

public string Message { get; set; }   

public ICollection<User> PermittedUsers {get; set;}

} 
```

在这种情况下，我只删除了 UserMessage 实体中的 CreatedBy。现在 EF5 生成 3 个表，分别命名为：User、UserMessage、UserMessageUsers。UserMessage 和 User 之间的链接现在通过 UserMessageUsers 进行，以便我们可以轻松管理允许的用户。

如何在不破坏案例 2 的情况下将 CreatedBy 属性添加到 UserMessage 中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T17:12:14.877

您可以使用 fluent api 对其进行配置：

```
modelBuilder.Entity<UserMessage>()
    .HasMany(d=>d.PermittedUsers)
    .WithMany(d=>d.Messages)
    .Map(c=>c.ToTable("UserMessageUsers")); 
```

# objective-c - 在ios中长按按钮使按钮弹出

> ID：13333295
> 
> 赞同：1
> 
> 时间：2012-11-11T16:55:44.197
> 
> 标签：objective-c, ios, button, uibutton

当我实际按下按钮超过一秒钟时，我想让我的按钮弹出。当它弹出时，按钮中的字母或单词应该与它一起出现......关于如何做到这一点的任何指导？非常感谢提供的任何帮助...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-11T17:16:03.313

这很简单，您需要做的是在该按钮上实现长按。`UILongPressGestureRecognizer`. 因此，该手势接管了什么，您可以设置动画`CGSizeMake`以使框架变得比实际更大，或者您可以使用`scale`属性将按钮缩放得更大。

希望这足够清楚。让我知道这是否适合您...

**更新：**一些代码 -

```
- (void)longPressHandler:(UILongPressGestureRecognizer *)gesture
{
    UIButton *btn;
    if(gesture.state == UIGestureRecognizerStateBegan)
    {
        btn = (UIButton *)gesture.view;
        [btn setFrame:CGRectMake(btn.frame.origin.x, btn.frame.origin.y, 150, 70)];
    }
    return;
} 
```

仅供参考，LongTap 手势有不同的状态`UIGestureRecognizerStateBegan`, `UIGestureRecognizerStateChanged`, `UIGestureRecognizerStateEnded`. 还有一些，但这些是主要的。

# api - Inno Setup Pascal 脚本文档

> ID：13333296
> 
> 赞同：3
> 
> 时间：2012-11-11T16:55:44.760
> 
> 标签：api, inno-setup

我开始使用 Inno Setup，因为我认为与 NSIS 相比，Pascal 脚本会让我更容易做自定义的东西。但是，似乎 Web 上的任何地方都没有文档？[官方 Wiki](http://wiki.remobjects.com/wiki/Using_RemObjects_Pascal_Script)已被删除，我找不到任何 API 文档。有一个[更早的问题](https://stackoverflow.com/questions/1743367/are-there-any-good-pascal-script-resources-documentation)（3 岁，永恒！）以悲伤的陈述结束，即什么都不存在。

到目前为止，每次我想做一些具体的事情时，我都能获得帮助（主要是在 Stackoverflow 上；-)），但我不想每次想做某事时都去论坛。我现在的问题是创建一个目录，如果它不存在，我还没有找到任何人问这个问题。所以我在问。如果你知道怎么做，你能告诉我（怎么做;-)）以及你**在哪里**学的？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-12T06:16:58.257

Pascal 脚本语法非常接近 Pascal/Delphi 语法，因此在[Delphi DocWiki](http://docwiki.embarcadero.com/RADStudio/XE/en/Getting_Started_with_RAD_Studio)和[Free pascal 文档](http://www.freepascal.org/docs-html/ref/ref.html)中有很多关于它的文档。

我知道的关于 inno-setup 特定的 pascal 脚本功能支持的最好的地方是 Inno Setup Help File 中的 PascalScript 部分，最相关的部分是：

*   [支持功能参考](http://www.jrsoftware.org/ishelp/topic_scriptfunctions.htm)
*   [支持类参考](http://www.jrsoftware.org/ishelp/topic_scriptclasses.htm)
*   [使用 DLL](http://www.jrsoftware.org/ishelp/topic_scriptdll.htm)

至于你的最后一个问题，看看这个：

```
var
  DocPath: string;
  DirPath: string;
begin
  DocPath := ExpandConstant('{userdocs}');
  DirPath := DocPath + '\ISTest';
  if not DirExists(DirPath) then
  begin
    if not CreateDir(DirPath) then
       MsgBox(SysErrorMessage(DLLGetLastError), mbError, mb_Ok);
  end;
end; 
```

我在哪里学的？我是一个Delphi开发者，pascal脚本的目的是接近Delphi，所以我觉得我是通过学习Delphi才真正学会的。如今，在查看文档之前，我会尝试做我想做的事*，*如果我没有这样做，我会求助于文档作为最后的资源。

# macports - 指示 Macports 下载但不安装端口的依赖项

> ID：13333298
> 
> 赞同：3
> 
> 时间：2012-11-11T16:55:50.613
> 
> 标签：macports

我坐在机场里，想出了一些我想尝试的东西，但是`sudo port install`如果 macports 下载-编译-下载-编译，我就没有时间了。但是，如果它下载了所有内容，那么我可以让它在飞机上编译。

如何缓存端口的依赖项但稍后编译和安装？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-11T17:47:30.303

我会用

`sudo port fetch \( {packagename} or rdepof:{packagename} \) and not installed`

`rdepof:`递归列出你的包的所有依赖项（包括依赖项本身的依赖项）

`and not installed`排除您已安装的所有软件包。

# dart - 是否可以为 Dartium 启动设置包根目录？

> ID：13333303
> 
> 赞同：0
> 
> 时间：2012-11-11T16:56:07.847
> 
> 标签：dart, dartium

我希望能够在每次启动的基础上执行此操作，而不必在 Tools->Preferences 中设置全局包根。这可能吗？

我在 Dartium 启动配置中看到一个“参数”选项，但这似乎是将参数传递给浏览器，而不是嵌入式 VM？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-13T03:27:40.767

目前，编辑器不支持在每次启动时为 Dartium 启动设置包根。Dartium 在环境变量 DART_PACKAGE_ROOT 中查找包根的值，它不会作为参数传入。

# json - 使用淘汰赛 js 获取用户 youtube 提要？

> ID：13333304
> 
> 赞同：-1
> 
> 时间：2012-11-11T16:56:08.473
> 
> 标签：json, youtube, knockout.js, youtube-api

这可能吗..这就是我的atm，但我的数据对象只是返回一堆行话，我做错了什么？我在做什么……对吗？

我基本上想打印出用户视频列表（缩略图和标题，并让每个视频本身都成为可点击的链接）

谢谢！

```
$(document).ready(function(){
    $player.init();

})

var $player = (function(){

    var player = {};

    player.init = function(){

    //init Youtube knockout
        player.initYoutubeKnockout();

    }
    player.knockoutModel = {
        videoData : ko.observableArray([]),

    }
    player.initYoutubeKnockout = function()
    {

        //load the Youtube json feed
        $.ajax({
            url: 'http://gdata.youtube.com/feeds/api/users/USERNAME/uploads?v=2&alt=json',
            type: 'GET',
            dataType: 'jsonp',
            data: {
                count: 5
            },
            success: function(data, textStatus, xhr) {
                player.doYoutubeKnockout(data.item);            
            }
        });   
    }
    player.doYoutubeKnockout = function( data )
    {

        player.knockoutModel.videoData(data);

        ko.applyBindings(player.knockoutModel, $('#youtube-feed')[0]);
        console.log($(this));
    }       

    return player;

})(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T08:35:01.827

坦率地说，你根本没有做太多事情。

*   您从 YouTube 返回的 JSON 数据不是来自`data.item`，而是完全不同的结构。

*   我假设您希望从用户那里获得 5 次上传。参数名称将是`max-results`，而不是`count`。

*   可能您唯一做得很好的就是设置了网址，但仅此而已。

您需要检查返回的 JSON 的样子。检查 API 参考以了解[atom 提要](https://developers.google.com/youtube/2.0/developers_guide_protocol_understanding_video_feeds)的结构。这是在 XML 中，但相应的 JSON 响应将具有几乎相同的格式，但存在一些细微差别。通过将对象写入控制台来检查对象，以验证您获得了正确的属性。

一旦你理解了这一点，你就需要使用正确的查询来获得你所期望的。查看他们关于[查询参数](https://developers.google.com/youtube/2.0/developers_guide_protocol_api_query_parameters)的 API 参考。

为了帮助简化您的淘汰代码，我强烈建议您获取返回的响应并将其映射到具有简化属性名称的对象。例如，要获取条目的缩略图，您必须访问`media$group.media$thumbnail`数组。如果你可以通过它访问它会更容易`thumbnail`。

此外，如果您要绑定的元素需要绑定多个值，那么以使您的绑定更容易的方式映射这些值会有所帮助。例如，在使用`attr`绑定时，您将为要添加的每个属性设置一个属性。相反，您可以将对象中的所有属性分组并绑定到该对象。

我写了一个小提琴，应用我上面所说的一切来做你所要求的。这应该有助于您了解您可以做什么以及如何去做。

[演示](http://jsfiddle.net/jeff1203/pueh4/)

# django - 外键关系

> ID：13333305
> 
> 赞同：0
> 
> 时间：2012-11-11T16:56:18.283
> 
> 标签：django, django-models, django-views

我有两个模型

```
class Subject(models.Model):
    name = models.CharField(max_length=100,choices=COURSE_CHOICES)
    created = models.DateTimeField('created', auto_now_add=True)
    modified = models.DateTimeField('modified', auto_now=True)
    syllabus = models.FileField(upload_to='syllabus')
    def __unicode__(self):
        return self.name 
```

和

```
class Pastquestion(models.Model):
    subject=models.ForeignKey(Subject)
    year =models.PositiveIntegerField()
    questions = models.FileField(upload_to='pastquestions')
    def __unicode__(self):
        return str(self.year) 
```

每个主题可以有一个或多个过去的问题，但过去的问题只能有一个主题。我想得到一个主题，并得到一个特定的过去相关的问题`year`。我正在考虑获取一个主题并获取其相关的过去问题。

目前正在实现我的代码，这样我宁愿得到过去的问题，其主题和年份对应于任何指定的主题，比如

```
this_subject=Subject.objects.get(name=the_subject)
thepastQ=Pastquestion.objects.get(year=2000,subject=this_subject) 
```

我在想有更好的方法来做到这一点。或者这已经是更好的方法了吗？请告诉我？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T17:08:51.587

我认为您想要的是`related_name`该领域的财产`ForeignKey`。这将创建一个返回`Subject`对象的链接，并提供一个可用于查询集合的管理器。

因此，要使用此功能，请将外键行更改为：

```
subject=models.ForeignKey(Subject, related_name='questions') 
```

`Subject`然后使用我们调用的实例`subj`，您可以：

```
subj.questions.filter(year=2000) 
```

我认为这与您使用的技术没有太大不同。粗略地说，SQL 性能归结为 a) 是否有索引和 b) 您发出多少查询。所以你需要考虑两者。找出模型使用正在生成的 SQL 的一种方法是使用[SqlLogMiddleware](http://djangosnippets.org/snippets/61/) - 或者使用[如何显示 SQL Django 正在运行](https://stackoverflow.com/questions/1074212/show-the-sql-django-is-running)中的选项当您开始跨关系发出查询时可能很诱人 - 例如`q = Question.objects.get(year=2000, subject__name=SUBJ_MATHS)`，但除非如果您密切关注这些类型的查询，您可以并且将会严重影响您的应用程序的性能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-11T17:10:01.237

Django 的查询语法允许您[“触及](https://docs.djangoproject.com/en/dev/topics/db/queries/#lookups-that-span-relationships)”相关对象。

```
past_questions = Pastquestion.objects.filter(year=2000, subject__name=subject_name) 
```

# eclipse - 将 MOTODEV 核心插件安装到 eclipse "git command" 中

> ID：13333307
> 
> 赞同：-1
> 
> 时间：2012-11-11T16:56:30.170
> 
> 标签：eclipse, eclipse-plugin, motodev-studio

我正在[这里安装 MOTODEV Core 插件](http://www.motorola.com/sites/motodev/library/motodev_core_plugins.html)

我开始执行以下步骤：-“使用 git clone 命令将 MOTODEV 核心插件源存储库下载到工作副本中”

这就是我卡住的地方。我在哪里将这个“git clone”命令输入到 Eclipse 中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T17:32:28.263

您可以很容易地从命令行执行克隆，如下所示：

```
git clone https://android.googlesource.com/platform/tools/motodev.git 
```

然后将文件系统中的源代码导入到 eclipse 中——它应该会自动选择你的项目结构。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T21:12:27.003

安装“windows git”（http://msysgit.github.com/）

然后将该 git clone 键入命令行。

对我来说，它一直在 43% 和 61% 之间停止……该死的加重，因为 git clone 没有继续命令（我用谷歌搜索了一段时间，显然这是 2009 年谷歌代码之夏项目，但从未完成)=:

# gtkmm - 如何将 Gtk::Menu 附加到 Gtk::Widget

> ID：13333315
> 
> 赞同：1
> 
> 时间：2012-11-11T16:57:11.217
> 
> 标签：gtkmm

Gtk::菜单有

```
void Gtk::Menu::attach_to_widget(Widget& attach_widget,
                                 GtkMenuDetachFunc detacher)

void Gtk::Menu::attach_to_widget (Widget& attach_widget) 
```

包装方法

```
void gtk_menu_attach_to_widget(GtkMenu *menu,
                               GtkWidget *attach_widget,
                               GtkMenuDetachFunc detacher) 
```

但为什么他们*受到保护*？

如果我想在一个小部件上制作一个弹出菜单，那么如果不是通过这些方法，我如何从菜单的激活回调中访问它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-02T09:41:02.067

我猜它受到保护是因为我们误解了它应该如何使用。在最新的 gtkmm 版本中，它现在是公开的： [https ://git.gnome.org/browse/gtkmm/commit/?id=329d7c59bb3f75f79142600872221ae946c7c3a1](https://git.gnome.org/browse/gtkmm/commit/?id=329d7c59bb3f75f79142600872221ae946c7c3a1)

同时，您可以使用 yourmenu->gobj() 和 yourwidget->gobj() 调用 C 函数。

# c++ - 使用 C++ 在 Windows 上播放以编程方式生成的声音

> ID：13333316
> 
> 赞同：3
> 
> 时间：2012-11-11T16:57:26.093
> 
> 标签：c++, audio, text-to-speech

我很难找到有关如何以编程方式在 Windows 上使用 C++ 动态生成音频输出的信息。例如，输入值来控制音调和音调、幅度等。我想这必须是低级别的并且更接近硬件。我正在尝试自己制作一个文本到语音的程序。任何信息表示赞赏。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T16:51:08.570

To generate a sine wave:

**y(t) = A sin (2 Π f t + Φ)**

Where:
**A = Amplitude**
Π = pi (3.14159...)
**f = frequency (Hz)**
t = period (in seconds)
**Φ = phase (in radians)**

Source: http://en.wikipedia.org/wiki/Sine_wave

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T22:05:53.193

我认为你似乎是新手，你应该看看 Juce 库。它应该可以帮助您创建一个基本的应用程序来制作音频，然后您可以直接连接到声卡查看 lib 的示例。 [http://www.rawmaterialsoftware.com/juce.php](http://www.rawmaterialsoftware.com/juce.php)

您将看到，为了获得声音，您必须连接到音频系统 WASAPI 或直接在 Win 上使用 X。我真的认为你应该使用这个库来专注于制作音频而不是打扰如何连接到音频设备。如果您仍然想自己做，请查看 wasapi api。

最好的

# ruby-on-rails - Rails 渲染后退出控制器

> ID：13333319
> 
> 赞同：7
> 
> 时间：2012-11-11T16:57:45.897
> 
> 标签：ruby-on-rails, controller

我的控制器中有一个操作有问题。这是我的第一个 Rails 应用程序，所以我不确定 Rails 的最佳实践。

我有一个名为**Group**的模型和一些进入它的控制器的操作。我编写了一个测试，由于组 ID 无效，应该会导致控制器在 JSON 中呈现错误。看起来控制器正在渲染并继续执行，而不是渲染和退出。

**测试**

```
test 'should not remove group because of invalid group id' do
    post(:remove, {'group_id' => '3333'})
    response = JSON.parse(@response.body)
    assert_response :success
    assert_equal 'Success', response['message']
end 
```

**控制器动作**

```
# Post remove
# group_id
def remove
    if((@group = Group.find_by_id(params[:group_id])) == nil)
        render :json => { :message => "group_id not found" }
    end

    @group.destroy
    if(!Group.exists?(@group))
        render :json => { :message => "Success" }
    else
        render :json => { :errors => @group.errors.full_messages }
    end
end 
```

在控制器中，第一个 if 语句执行：`render :json => { :message => "group_id not found" }` 但`@group.destroy`仍在执行。这对我来说似乎违反直觉，我认为渲染方法应该退出控制器。

为什么控制器在`render`被调用后不退出？

此代码块的目的是在使用传入的 ID 找不到任何记录时优雅地恢复。这是做这样的事情的正确方法吗？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-11-11T19:09:35.783

就像@user1022209 所说，您可以添加返回退出操作：

```
render(:json => { :message => "group_id not found" }) and return 
```

关于你的代码，我想我会这样写：

```
def remove
  if(!Group.exists?(params[:group_id])
    render :json => { :message => "group_id not found" }
  else
    @group = Group.find(params[:group_id]
    @group.destroy
    if @group.destroyed?
      render :json => { :message => "Success" }
    else
      render :json => { :errors => @group.errors.full_messages }
    end
  end
end 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-11-11T17:00:31.753

只需简单地在退出方法体`return;`之后添加:)`render`

我认为`render`只是一个方法调用，你调用它，该方法将被放置在堆栈的顶部，该堆栈保存了该方法的执行顺序。完成后`render`，您将返回该`remove`方法并继续执行其余部分。但是您可以通过手动退出该 `remove`方法来避免此问题

![这是我的图来说明上面的话所描述的概念](../Images/1993d8f794da23c7e5701916b7344356.png)

# css - 在 Gentoo 上安装 Sass

> ID：13333321
> 
> 赞同：3
> 
> 时间：2012-11-11T16:58:08.930
> 
> 标签：css, ruby, sass, gentoo

我一直在尝试在 Gentoo 上安装 Sass，但进展并不顺利。不幸的是，portage 中 Sass 的最新版本是 3.1.21。我想使用 Sass 至少需要 Sass 3.2，它可以通过 ruby​​gems 获得。

我试过的：

*   `emerge dev-ruby/sass`（安装旧版本）
*   `gem install sass`

第二个命令似乎是安装 Sass gem。但是，除了 Sass，我没有在任何其他方面使用 Rails 或 Ruby，所以 gem 对我来说似乎毫无用处。另外，我不知道`gem`s 安装到哪里或如何使用它们（我是一个 ruby​​ 菜鸟。）我想做的就是`sass`从命令行调用。

有什么方法可以获得最新版本的 Sass，我可以从命令行使用它吗？

干杯。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-11T21:28:12.537

在 Gentoo 上，用户安装的 gems 默认不在你的 PATH 中。我创建[了一个错误报告](https://bugs.gentoo.org/show_bug.cgi?id=403157)，因为虽然用户安装的 gem 比以前工作得更好，但这个问题确实需要纠正。您可以通过在报告中表达您的意见并链接回此页面来提供帮助。为了让事情顺利进行，您可以部署我上传到报告中的脚本，或者改用 RVM，这将为您提供跨发行版的更一致的行为。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-26T12:49:23.850

有些人可能会发现知道在 Gentoo 下您可以使用emerge 安装 sass 会很有用，这将解决一些人遇到的 PATH 问题。

```
# emerge -av sass 
```

之后，您应该可以毫无问题地使用 sass。另一种解决方案是使用`rvm`它可以使事情在环境中更加便携和统一。

**编辑**：如果有人问：安装`rvm`只需按照以下位置的说明进行安装：[https](https://rvm.io/rvm/install/) ://rvm.io/rvm/install/并安装稳定版本。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-26T05:06:05.823

我想知道，但所有的答案对我来说都很奇怪。gentoo 最大的优势之一是 ebuild 编写，它很容易，因此每个用户都可以贡献任何他需要的东西。

*   添加本地覆盖
*   将上游 ebuild 分支到本地覆盖
*   凹凸版
*   利用
*   测试
*   将经过测试的 ebuild 附加到错误报告中，也许还可以在 #gentoo-dev-help 上联系某人

相信我，使用 gem （或 cabal 或其他什么）代替你的包管理器，如果这样会弄乱你的系统。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-11T17:09:39.597

考虑使用`compass`它将接受如下命令行：`compass [YOUR-FILE].sass`并且还可以`compass watch [SASS FOLDER]`和“编译”css。

[http://compass-style.org/](http://compass-style.org/)

使用 gem 安装

```
 gem update --system
 gem install compass 
```

[安装](http://compass-style.org/install/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-11T18:51:49.797

我没有看到使用 Sass 的 gem 版本的缺点。我也不是 Ruby/RoR 开发人员（我使用 Haskell/PHP），我只是使用 gem。我对 gems 的了解足以安装/卸载它们，这对于使用 Sass 来说似乎已经足够好了。

使用相同的命令安装和升级 Sass：

```
sudo gem install sass 
```

通过 gems 安装 Sass 使您能够通过命令行使用它，就像它在官方网站上显示的那样：http: [//sass-lang.com/](http://sass-lang.com/)。

```
sass --watch style.scss:style.css 
```

其他命令行选项可以通过 --help 或他们的文档找到：[http ://sass-lang.com/docs/yardoc/file.SASS_REFERENCE.html#using_sass](http://sass-lang.com/docs/yardoc/file.SASS_REFERENCE.html#using_sass)

```
sass --help 
```

# java - 片段、JSON、ListView

> ID：13333331
> 
> 赞同：0
> 
> 时间：2012-11-11T16:59:20.117
> 
> 标签：java, php, android, android-listview

我有一个扩展片段的类。

在 onCreateView 我必须从 PHP 文件请求 JSON 并将一些列放在布局中的列表视图中（fragment_events）。

我已经完成了 HTTP 请求并准备好了 JSON 文件，现在我可以做些什么来填充我的列表视图？

我有一个类扩展 Fragment，例如我不能在 Fragment 中做 new SimpleAdapter(this, mylist, R.layout.main!!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T17:25:22.180

您可以尝试 ListFragment 类，它将帮助您实现 listview

# php - Wordpress 主题 PHP 文件中特定短语的未知出现

> ID：13333334
> 
> 赞同：1
> 
> 时间：2012-11-11T16:59:49.900
> 
> 标签：php, wordpress, wordpress-theming, gettext

我有一个 Wordpress 主题，当我浏览主题时，我注意到这一行`hdb-theme`。我个人对这有什么重要性，它有什么作用以及如果我删除它是否有任何影响感到困惑。

以下是一些在我的主题的 PHP 文件中弹出的示例：

`<?php wp_link_pages('before=<div class="page-link">' . __( 'Pages:', 'hbd-theme' ) . '&after=</div>') ?>`

`<?php comment_form_title( __('Post a Comment', 'hbd-theme'), __('Post a Reply to %s', 'hbd-theme') ); ?>`

那么有人可以向我解释“ **hdb-theme** ”的重要性吗？

**编辑：**

我在 StackOverFlow 上找到了这篇文章来解释它：[Wordpress 主题名称在主题 php 文件中，这样做的目的是什么？](https://stackoverflow.com/questions/8388764/wordpress-theme-name-inside-theme-php-files-what-is-the-purpose-of-this)

虽然有人可以向我解释得更好一点吗？我只是一个初学者 Wordpress 主题开发人员。另外，如果我从我的主题中删除它可以吗？会不会有很大的影响？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-11T19:28:49.177

它与本地化有关——即翻译成不同的语言。这是 WordPress 使用的约定，以防您想要开发可以在世界各地以多种语言使用的产品 - 即西班牙语、俄语、德语等。

因此，回答您的问题，如果您删除`hdb-theme`，那么想要将您的主题翻译成不同语言的潜在未来贡献者将更难:)

以下是直接来自 WordPress 法典[http://codex.wordpress.org/Translating_WordPress#Localization_Technology](http://codex.wordpress.org/Translating_WordPress#Localization_Technology)的有关该技术的更多信息。

希望这有帮助！

# perl - 如何检查 Perl 标量是否包含对某个子例程的引用？

> ID：13333336
> 
> 赞同：8
> 
> 时间：2012-11-11T16:59:58.027
> 
> 标签：perl

换句话说，我如何检查 coderef “平等”？

[smartmatch 运算符由于明显的原因](http://perldoc.perl.org/perlop.html#Smartmatch-Operator)不起作用（将其视为`CODE->(ANY)`），但我已将其包含在示例中以显示我所追求的：

```
use strict;
use warnings;
use feature 'say';

sub pick_at_random {

    my %table = @_;
    return ( values %table )[ rand( keys %table ) ];
}

my %lookup = ( A => \&foo,
               B => \&bar,
               C => \&baz );

my $selected = pick_at_random( %lookup );

say $selected ~~ \&foo ? "Got 'foo'" :
    $selected ~~ \&bar ? "Got 'bar'" :
    $selected ~~ \&baz ? "Got 'baz'" :
                         "Got nadda" ; 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-11T17:07:41.473

您可以使用普通（数字）相等 ( `==`)，就像所有引用一样：

```
Perl> $selected == \&foo

Perl> $selected == \&bar

Perl> $selected == \&baz
1 
```

[在这里生活](http://ideone.com/2uVBII)

当引用受到重载`==`或`0+`（对于coderefs不太可能）的祝福时，就会中断。在这种情况下，你会比较`Scalar::Util::refaddr($selected)`.

来自[`man perlref`](http://perldoc.perl.org/perlref.html)：

> 将引用用作数字会生成一个整数，表示其在内存中的存储位置。唯一有用的事情是在数字上比较两个引用以查看它们是否引用相同的位置。
> 
> ```
>  if ($ref1 == $ref2) {  # cheap numeric compare of references
>            print "refs 1 and 2 refer to the same thing\n";
>        } 
> ```

# ios - 自定义 userLocation 视图时未调用 didUpdateUserLocation

> ID：13333339
> 
> 赞同：7
> 
> 时间：2012-11-11T17:00:23.843
> 
> 标签：ios, geolocation, mkmapview, mapkit, mkmapviewdelegate

我有一个`MKMapView`应该使用自定义视图（而不是蓝点）来跟踪用户的位置。为了用这个视图代替蓝点，我这样返回它：

```
- (MKAnnotationView *)mapView:(MKMapView *)mapView viewForAnnotation:(id<MKAnnotation>)annotation
{
    if (annotation == [mapView userLocation])
    {
        return userLocationView;
    }
} 
```

要初始化跟踪，我调用

```
[mapView setShowsUserLocation: YES];
[mapView setUserTrackingMode: MKUserTrackingModeFollow animated: NO];
[mapView setDelegate: self]; 
```

正如所料，`-mapView:didUpdateUserLocation:`在应用加载时被调用一次。`-mapView:viewForAnnotation:`不幸的是，除非我更改为具有以下实现，否则它再也不会被调用：

```
- (MKAnnotationView *)mapView:(MKMapView *)mapView viewForAnnotation:(id<MKAnnotation>)annotation
{
    if (annotation == [mapView userLocation])
    {
        return nil;
    }
} 
```

通过这些更改，地图会加载蓝点作为用户位置的指示符，并`-mapView:didUpdateUserLocation:`像预期的那样频繁调用。

是否有某种互斥性来跟踪用户的位置并拥有自定义的用户位置视图？我怎样才能使两者都发生？

### 来源

这个项目演示了这个问题。[https://dl.dropbox.com/u/2338382/MapKitFuckery.zip](https://dl.dropbox.com/u/2338382/MapKitFuckery.zip)

### 漏洞

这很可能是一个错误，我已将其归档为雷达。在此期间，接受的答案应该证明是足够的。然而，值得注意的是，我不得不完全放弃`[mapView userLocation]`and `[mapView showsUserLocation]`，转而支持简单的自定义注释和`CLLocationManager`.

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-14T00:17:38.640

与其依赖地图视图的位置更新，不如启动 a `CLLocationManager`，设置它`delegate`并等待`-locationManager:didUpdateToLocation:fromLocation:`（在 iOS 5 及更低版本中）或`-locationManager:didUpdateLocations:`（iOS 6）。与使用地图视图的委托方法相比，您将获得更可靠、更丰富的信息。你可能知道如何做到这一点，但这里是：

```
#import <CoreLocation/CoreLocation.h>

- (void)viewWillAppear:(BOOL)animated
{
    self.locationManager = [[CLLocationManager alloc] init];
    self.locationManager.delegate = self;
    [self.locationManager setDesiredAccuracy:kCLLocationAccuracyBest];
    [self.locationManager startUpdatingLocation];
}

// Deprecated in iOS 6
- (void)locationManager:(CLLocationManager *)manager
    didUpdateToLocation:(CLLocation *)newLocation
           fromLocation:(CLLocation *)oldLocation
{

    // Check the age of the newLocation isn't too long ago using newLocation.timestamp

    // Set the map dot using newLocation.coordinate

    // Set an MKCircle to represent accuracy using newLocation.horizontalAccuracy
} 
```

正如你所说，我查看了进入 mapView 委托的委托调用，并返回除了`nil`停止调用之外的任何内容。`-mapView:didUpdateUserLocation:`以下是按到达顺序的呼叫：

```
 - (void)mapViewWillStartLocatingUser:(MKMapView *)mapView
 - (void)mapView:(MKMapView *)mapView didUpdateUserLocation:(MKUserLocation *)userLocation
 - (MKAnnotationView *)mapView:(MKMapView *)mapView viewForAnnotation:(id < MKAnnotation >)annotation
 - (void)mapViewWillStartLoadingMap:(MKMapView *)mapView
 - (void)mapView:(MKMapView *)mapView didFailToLocateUserWithError:(NSError *)error 
```

大概是`MKUserLocation`对象，而不是`MKMapView`负责通过更新调用调用委托的对象。如果您检查 和 的状态`showsUserLocation`，`mapView.userLocation`它们看起来都很好：

```
NSLog(@"%d %@", mapView.showsUserLocation, mapView.userLocation); 
```

返回`1`一个非零对象 ( `1 <MKUserLocation: 0x1e02e580>`)。也许`mapView`查询其`userLocation`对象以获取当前位置，然后将其发送给委托。如果该对象已经消失，它将无法工作。

这有点奇怪，但就像我说的，你会从 a 的更新中得到更好`CLLocationManager`的更新。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-11-15T15:28:18.737

一个老问题，我想以自己的方式回答。我遇到了一个类似的问题。当我的 MapView 的 ViewController/Screen 被加载并且 mapView 检索到用户位置时，我只需要进行 Web 服务调用，将用户位置作为 GET 参数传递。在委托方法 didUpdateUserLocation 中调用 Web 服务是有意义的。我首先没有注意到错误的行为，因为事情似乎工作正常，但由于某些原因，有时在打开 mapView 屏幕时，会显示用户蓝点，但地图不会“放大”，也没有调用 didUpdateUserLocation 和我的内部显然是网络服务调用。盯着屏幕几秒钟后，地图将“放大”并调用 didUpdateUserLocation/web 服务。我想的一些小故障，没有大碍。现在我的注重细节的开发人员的头脑仍然感到沮丧，经过几周的思考，我决定对此采取行动。Stackoverflow 并没有立即给我答案，但仍然为我指明了正确的方向。罪魁祸首是：调用顺序！令人抓狂，但一旦我弄清楚事情就完全有意义了。我知道为了看到蓝点并获取用户位置，我必须告诉 mapView 这样做。因此，作为一个 Interface Builder 爱好者，我在 IB 中为我的 mapView 进行了正确设置，即我选中了框：“用户位置”，很简单。然后仔细阅读 mapView 文档，我意识到我的 ViewController 需要符合 MKMapViewDelegate，完成交易。正如我所说，一切似乎都正常，蓝点会立即显示，但有时会显示“[https://stackoverflow.com/a/37407955](https://stackoverflow.com/a/37407955)），事情变得清晰起来。就我而言，由于使用了 IB，因此调用顺序如下：

1.  在 IB 中选中的用户位置复选框
2.  在 viewDidLoad 中，调用：`mapView.delegate = self`

然而，这里是调用顺序应该是这样的：

1.  未在 IB 中选中用户位置复选框（这很重要）
2.  `mapView.delegate = self`
3.  `mapView.showsUserLocation = true`

这改变了一切。mapView 有时会立即放大，有时会在几秒钟后放大，现在 mapView 会在屏幕打开时立即放大，并调用 didUpdateUserLocation/web 服务。

现在再谈一谈为什么，它仍然“有时”有效。这仅仅是因为我的 iPhone 的位置有时会在地图屏幕加载后立即更新，有时不会:-)。我不得不说，除了我上面提到的 stackoverflow 帖子之外，帮助我的还有在模拟器中测试我的应用程序，因为我需要使用具有明显静态位置坐标的 gpx 文件，我描述的不可预测的行为是系统的。

因此，尽管我很喜欢 Interface Builder，但我可能不得不重新考虑这种爱是多么无条件。

PS：我知道这篇文章很旧，我的回答与@Patrick Perini 的问题并不完全相关，但我希望它对其他人有所帮助，并且它可能会回答@Patrick Perini 的结论，即错误不是错误的事实。感谢您阅读这篇博文 :-)

# spring-mvc - Spring Message Resource Bundles - 适合白标和版本控制？

> ID：13333343
> 
> 赞同：1
> 
> 时间：2012-11-11T17:00:58.353
> 
> 标签：spring-mvc, internationalization, spring-webflow-2, branding

我想知道是否有人可以提供帮助。我们正在组合一个 Spring MVC 和 Webflow 应用程序，并希望将所有屏幕文本等放在数据库支持的消息资源包中。我有一个简单的实现这个工作没问题。但是，我们需要支持应用程序的白标，包括文本的版本控制。

当我说“白标”时，我的意思是核心应用程序需要为不同的商业品牌打上烙印。品牌的 css 元素很简单——我们将使用 Spring 主题。但品牌延伸到不同的屏幕文字。例如，brandX 可能会问“你叫什么名字”，brandY 可能会问“请输入你的名字”。

此外，我们需要支持每个品牌的屏幕文本版本控制。这是为客户提供一致的用户旅程和信息 - 例如：如果他们在第 1 天看到一组给定的屏幕标签并保存他们的报价，他们应该在第 10 天检索他们的报价时看到相同的屏幕标签等，即使该品牌的屏幕文本同时进行了 5 次迭代。（实际上变化的频率不会那么频繁，但我们仍然需要支持它）

我已经玩了一段时间了，在我早期的实验中，我认为我可以简单地为资源包中的消息键添加前缀：

```
brandX.firstName = What is your firstname?
brandY.firstName = Please enter your firstname 
```

但这在几个方面感觉是错误的。

1.  除非我们有每个品牌的视图（我们可能必须这样做），否则视图需要以某种方式基于模型或主题中的某些内容应用前缀。视图了解模型以选择正确的消息来显示感觉是错误的
2.  我不知道如何应用版本控制（除了将其添加到复合键 = brandX.firstname.v2 = 你的名字是什么？）

总而言之，我得出的结论是，这不是消息资源包的用途——它们非常适合基于语言环境的国际化（这就是它们的用途！），但现在我正在尝试做一些完全不同的事情他们。感觉消息资源包作为解决方案可能不适合我的要求。

有没有其他人做过这样的事情？你是怎么解决的？

干杯

弥敦道

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T22:17:05.850

我已经用一个可以部署不同主题或品牌的主题网络应用程序做了类似的事情。根据部署的“品牌”，我还需要有稍微不同的标签。

我使用的解决方案是在 JSP 页面中指定相同的 i18n 代码，但要根据特定部署实例中使用的“品牌”选择适当的消息包。因此，我没有根据传统（基于语言的）语言环境选择不同的消息包，而是强制 Spring 通过指定自定义语言环境来选择自定义 i18n 包`org.springframework.web.servlet.i18n.CookieLocaleResolver`。这又是由应用程序主属性文件中的特定属性配置的。这是我的一些 dispatcher-servlet.xml 文件：

```
<bean id="localeChangeInterceptor" class="org.springframework.web.servlet.i18n.LocaleChangeInterceptor">
    <property name="paramName" value="lang" />
</bean>

<bean id="localeResolver" class="org.springframework.web.servlet.i18n.CookieLocaleResolver">
    <property name="defaultLocale" value="${i18n.code}"/><!-- value from app.properties -->
</bean>

<bean id="handlerMapping" class="org.springframework.web.servlet.mvc.annotation.DefaultAnnotationHandlerMapping">
    <property name="interceptors">
        <ref bean="localeChangeInterceptor" />
    </property>
</bean> 
```

唯一需要的手动启动是在特定品牌版本的部署中 - 一个 shell 脚本进行部署，它复制了一个特定的属性文件，例如`cp app.properties.BRAND_X app.properties`（另一个需要操作的文件是`web.xml`）。

编辑：不确定版本控制部分，但您也可以将其从 app.properties 文件中提取出来，但在 JSP 中指定它，例如：

```
<!-- custom tag that reads a properties file -->
<c:set var="version"><app:propertyLoader bundle="app" property="site.version"/></c:set>
<fmt:message key="form.firstName.${version}"/> 
```

# python - 重复一个功能

> ID：13333348
> 
> 赞同：-4
> 
> 时间：2012-11-11T17:02:20.353
> 
> 标签：python

```
from sys import exit

def answer():
    answer = raw_input("> ")
    if answer == "Yes" or answer == "yes":
        #going to next
        joint()
    elif answer == "No" or answer == "no":
        print "You still have something, I know..."
        again()
    else:
        fubar()

def again():
    again = raw_input("> ")
    if again == "Yes" or again == "yes":
        #going to next
        joint()
    elif again == "No" or again == "no":
        print "You still have something, I know..."
    else:
        fubar()

def fuck():
    print "Fubar'd!"

def joint():
    print "To be continue..."

def question():
    print "Hi duuuude..."
    raw_input("To say 'Hi' press Enter")
    print "Can you help me?"
    answer()

question() 
```

嗨，你能帮我解决这个问题吗？当我得到答案“否”时，我正在尝试重复“答案”功能。我想“再次”转义功能......还有一种方法可以转义“答案==“是”或答案==“是”：“所以无论我写大写还是小写字母都可以接受答案而不是像菜鸟一样写“是”还是“是”？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-11T17:03:20.420

这通常通过 while 循环来实现。

编辑：正如所指出的，while 循环很好而且清晰，并且避免了递归限制。

从未想过一个简单的答案会产生如此多的选票......

给你举个例子

```
while True:
    ans = raw_input("Enter only y or n to continue").strip().lower()
    if ans == "y":
        print "Done!"
        break
    elif ans == "n":
        print "No?"
    else:
        print "Not valid input." 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-11T17:03:42.183

解决您的问题的最简单方法是删除您的`again`功能，然后递归：

```
def answer():
    ans = raw_input("> ")
    if ans == "Yes" or ans == "yes":
        #going to next
        joint()
    elif ans == "No" or ans == "no":
        print "You still have something, I know..."
        answer() # again()
    else:
        fubar() 
```

我不得不将你的`answer`变量重命名为`ans`，这样它就不会与函数名发生冲突。

* * *

对于第二个问题，您想要：

```
if answer.lower() == "yes": 
```

或者

```
if answer in ("Yes", "yes"): 
```

# binding - 原生 Tapestry5 v5.3.6 地图绑定

> ID：13333351
> 
> 赞同：0
> 
> 时间：2012-11-11T17:02:26.507
> 
> 标签：binding, map, tapestry

我有一个名为的属性对象`ixlTest`，它有一个`map`. 该地图包含另一个地图，我需要将后者的对象绑定到我的页面模板文件中。相当复杂的对象图。

我基本上是在尝试这样做：

```
ixlTest.parameterGroups{'testOptions'}{'serverIp'}.value 
```

`ixlTest`是我页面中的一个属性对象 `parameterGroups`是一个成员变量`ixlTest`。这个变量是一个`map`。 `parameterGroups`有一个带有 key 的条目`testOptions`，它有另一个`map`带有 key的条目，`serverIp`它是一个对象，它有一个名为`value`我需要在模板文件中绑定的变量。

我需要使用 Tapestry 的本机支持，而不需要其他库，而且我也不需要使用方法来抽象操作，因为我已经走过了那条路，而且效率很低。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T14:18:39.713

有时最好将它放在页面上的 Java（或 Groovy 或 Scala）代码中并从模板中引用它。

Tapestry 的属性表达式语法没有用于取消引用映射的运算符；但是您可以调用该`get()`方法……但是 Tapestry 找出泛型的能力是有限的，这意味着您可能会收到有关缺少属性的错误。

我会将其编码为：

```
value="testValue" 
```

在模板中，并且：

```
public String getTextValue() {
    return ixlTest.getParameterGroups().get("testOptions").get("serverId").getValue(); 
} 
```

在课堂里。

由于您可以即时更改 Java 代码，这通常比将复杂的表达式放入模板中更好；在 Java 端重构事物可能会破坏模板内的复杂表达式，而 IDE 不知道它们。

# javascript - jQuery .ajax 和 DataSnap 的问题

> ID：13333354
> 
> 赞同：0
> 
> 时间：2012-11-11T17:02:32.943
> 
> 标签：javascript, jquery, json, delphi, datasnap

我有一个简单的 DataSnap 服务器，我无法通过 JQuery 使用 .ajax 函数上的 Json 数据。

这是我的代码：

```
$.ajax({
        url: "http://localhost:53383/datasnap/rest/TServerMethods1/ReverseString/logo",
        headers: {"Accept": "application/json",
                  "Content-Type": "text/plain;charset=UTF-8",
                  "If-Modified-Since": "Mon, 1 Oct 1990 05:00:00 GMT",
                  "Pragma": "dssession="+pragma,
                  "Authorization": "Basic YWRtaW46MTIz"},
        success: function(data) {
          alert(data);
        }
       }); 
```

该功能有效，但是当我发送 DataSnap 身份验证的标头（“授权”：“基本 YWRtaW46MTIz”）时，JQuery 会发出两个请求，一个是 401（未授权），另一个是好的。这是怎么发生的？我只提出一个要求。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T17:42:00.587

在实际发送请求之前尝试请求 Auth：

```
beforeSend: function(req) {
    req.setRequestHeader("Authorization": "Basic YWRtaW46MTIz");
} 
```

我不确定这是否能解决问题，但值得一试。

# asp.net - 在 aspx 上使用 intelsense 无法在 asp 服务器控件中看到定义的事件

> ID：13333358
> 
> 赞同：1
> 
> 时间：2012-11-11T17:03:15.143
> 
> 标签：asp.net, events, custom-server-controls

我可以在 .aspx 上使用 intelsense 看到在服务器控件中定义的任何属性并为其分配值。但是我如何处理我的自定义事件 - 我只能在 .cs 文件上为它们分配值。我的意思是我希望与它们一起工作与“OnInit”和其他事件。

```
 // server control
    static readonly object ourKey = new object();

    public event EventHandler MyEvent
    {
        add { Events.AddHandler(ourKey, value); }
        remove { Events.RemoveHandler(ourKey, value); }
    }

    // such I invokes event
    protected void OnMyEvent(EventArgs e)
    {
        EventHandler aH = Events[ourKey] as EventHandler;

        if (aH != null)
            aH(this, e);
    }

    // my aspx cant see [MyEvent]
     <hp:ServerControl1  MyEvent = "CustomEventHandler".../> 
```

我应该定义字符串属性，然后使用字符串方法名称查找并调用它（如果可能的话）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-11T17:26:38.073

检查代码：

```
<hp:ServerControl1 OnMyEvent="...." /> 
```

编辑显示答案。

# objective-c - 改变 UIImageView 的位置

> ID：13333361
> 
> 赞同：7
> 
> 时间：2012-11-11T17:03:21.950
> 
> 标签：objective-c, ios, xcode, animation, uiimageview

如何为 UIImageView 进行简单的位置更改。假设当前坐标是 x: 20 和 y:30

我想把它移到 x:100 和 y:100。

可以做运动动画吗？

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-11-11T17:05:06.707

您需要`UIImageView`像这样更改 CGFrame -

`[imageView setFrame:CGRectMake(100, 100, imageView.frame.size.width, imageView.frame.size.height)];`

这会改变`uiimageview`位置，`(100, 100)`同时保持高度和宽度相同。请注意，您可以使用上面的代码不仅更改`(x,y)`位置，还可以更改视图的大小。使用下面的代码，您也可以对其进行动画处理 :)

如果你想动画位置变化 -

```
[UIView animateWithDuration:0.35 
                      delay:0.0  
                    options: UIViewAnimationCurveEaseOut
                 animations:^{ 
                     [imageView setFrame:CGRectMake(100, 100, imageView.frame.size.width, imageView.frame.size.height)];
                 } 
                 completion:^(BOOL finished){
                     NSLog(@"Done!");
                 }]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-08-25T05:47:23.820

```
self.psView.frame = CGRectMake(self.wvView.frame.origin.x, self.wvView.frame.origin.y, self.psView.frame.size.width, self.psView.frame.size.height); 
```

# spring - currentUser 的 Spring Bean 会话范围

> ID：13333363
> 
> 赞同：1
> 
> 时间：2012-11-11T17:03:31.317
> 
> 标签：spring, session, login, scope

我最近刚开始在大学里和 Spring 一起工作，所以我还是很迷茫。目前我们正在尝试编写一个几乎可以复制涂鸦的应用程序。

我们已经设法构建了一个 login.jsp，它实际上验证了针对我们的 h2 数据库的登录，然后重定向到所有可用轮询的列表。现在我们希望能够从会话范围中获取 currentUser 以显示在右上角，并用于进一步的操作以及用户的签名。

到目前为止，我已经编辑了我的 spring-config.xml：

```
 <!-- Session Scope -->
<bean id="userInfo" class="de.nordakademie.iaa.nakdate.sessionbeans.UserInfo" scope="session">
</bean> 
```

然后我把这个

```
<p align="right">%{#userInfo.username}</p> 
```

进入 header.jsp，它在每个页面上都可见，即使是没有用户登录的第一页。这是一种聪明的做法吗？它甚至可以工作吗？

最后我做了一个 UserInfo.java 如下：

```
package de.nordakademie.iaa.nakdate.sessionbeans;

public class UserInfo {
public String username;

public UserInfo(){
    this.username = "Unregistered User";
} 
```

}

我还将在这里发布我们的登录操作：

```
package de.nordakademie.iaa.nakdate.action;

import java.util.List;

import com.opensymphony.xwork2.ActionSupport;

import de.nordakademie.iaa.nakdate.model.User;
import de.nordakademie.iaa.nakdate.service.UserService;

public class LogInUserAction extends ActionSupport {
private static final long serialVersionUID = 3734334931859908102L;
private transient UserService userService;
private transient User user;
private String email;
private String password;

@Override
public String execute() throws Exception {
    List<User> users = userService.loadAll();
    for (User currentUser : users) {
        if (currentUser.getEmail().equals(getEmail())) {
            if (currentUser.getPassword().equals(getPassword())) {
                return SUCCESS;
            }
        }
    }
    addActionError(getText("E-Mail / Passwort falsch!"));
    return ERROR;
}

public String getPassword() {
    return password;
}

public void setPassword(String password) {
    this.password = password;
}

public String getEmail() {
    return email;
}

public void setEmail(String email) {
    this.email = email;
}

public UserService getUserService() {
    return userService;
}

public void setUserService(UserService userService) {
    this.userService = userService;
}

public User getUser() {
    return user;
}

public void setUser(User user) {
    this.user = user;
} 
```

}

如果有人能帮助解决这个问题，我将不胜感激。非常感谢！

编辑：我刚刚使用了调试标签，发现我的会话是空的。我需要做什么才能在会话中实际填写一些内容？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T18:19:55.387

我能想到的方法有两种：第一种是在jsp中添加一个model属性并访问model属性，这样：

在您的控制器中：

```
@Controller
public class MyController{

    @Autowired Userinfo userInfo;

    @RequestMapping
    public String myMethod(Model model){
        model.addAttribute("userInfo", userInfo);
        ....
    } 
```

然后你可以在jsp中引用这个：

```
${userInfo.name} 
```

不幸的是，第二种方法没有记录在案的方法是以这种方式引用作用域 bean：

```
${sessionScope['scopedTarget.userInfo'].name} 
```

这是从这里：[http ://digitaljoel.nerd-herders.com/2010/11/01/accessing-spring-session-beans-in-jsp/](http://digitaljoel.nerd-herders.com/2010/11/01/accessing-spring-session-beans-in-jsp/)

# memory - 我们什么时候需要设备驱动程序

> ID：13333365
> 
> 赞同：2
> 
> 时间：2012-11-11T17:03:37.927
> 
> 标签：memory, operating-system, device-driver, disk

我注意到寄存器，主内存和缓存不需要设备驱动程序，而磁盘需要设备驱动程序，有人可以解释为什么吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-11T17:15:24.177

您还会发现操作系统也包含一些知识，例如如何驱动 VGA。操作 CPU 是在给定系统上实际运行的基础，因此操作系统必须知道这一点。其他一些功能也是必不可少的，并且操作系统包含访问这些设施的“内置”能力。

但是，某些功能是可选的。操作系统开发人员没有让开发人员选择“嵌入”或“强硬”——或者更糟糕的是，交付所有嵌入的驱动程序并使操作系统变得庞大，操作系统开发人员构建了一种加载任意驱动程序的抽象方式，通常匹配某些类型的子系统如 USB 或磁盘。这意味着任何人都可以添加功能。通常，对于自己的内置驱动程序也遵循这种架构是正常的，为了清洁，因此如果不需要，就不必使用它们。

您还会发现许多内核在代码方面被设计为与 CPU 无关，只要这是可能的。这是必要的编译时事情。例如，Linux 有一个`arch/`目录，其中包含特定于体系结构的代码，然后将其抽象到内核的其余部分，因此例如块存储层不需要为每个体系结构重新编写。例如，Windows NT 最初以 DEC Alpha 以及 x86 为目标。

# c# - 从 IronPython 调用 C# 方法

> ID：13333367
> 
> 赞同：2
> 
> 时间：2012-11-11T17:03:48.620
> 
> 标签：c#, ironpython

我正在构建一个可以使用 IronPython 自动化的 C# WebKit Web 浏览器，以帮助进行质量保证测试。我将使用 IronPython 创建测试计划，该计划将运行许多浏览器方法、提供参数并评估结果。

IronPython 的大部分文档都说明了如何使用 C# 调用 IronPython 方法，但我已经弄清楚了如何为方法设置参数，以及如何检索方法返回值，但不是从同一个方法。您将在下面的示例中注意到，我将参数传递给一个方法，该方法又设置一个类成员变量，然后使用另一个方法检索该值。

谁能推荐一个更优雅的模式？

> ```
> using System;
> using System.Windows.Forms;
> using IronPython.Hosting;
> using Microsoft.Scripting;
> using Microsoft.Scripting.Hosting;
> 
> namespace PythonScripting.TestApp
> {
> 
>  public partial class Form1 : Form
>  {
>    private ScriptEngine m_engine = Python.CreateEngine();
>    private ScriptScope m_scope = null;
> 
>    //used to call funcs by Python that dont need to return vals
>    delegate void VoidFunc(string val);
> 
>    public Form1()
>    {
>       InitializeComponent();
>    }
> 
>    private void doSomething()
>    {
>        MessageBox.Show("Something Done", "TestApp Result");
>    }
> 
>    private string _rslt = "";
> 
>    private string getSomething()
>    {
>       return _rslt;
>    }
> 
>    private void setSomething(string val)
>    {
>        _rslt = val;
>    }
> 
>    private void Form1_Load(object sender, EventArgs e)
>    {
>        m_scope = m_engine.CreateScope();
> 
>        Func<string> PyGetFunction = new Func<string>(getSomething);
>        VoidFunc PySetFunction = new VoidFunc(setSomething);
> 
>        m_scope.SetVariable("txt", txtBoxTarget);
>        m_scope.SetVariable("get_something", PyGetFunction);
>        m_scope.SetVariable("set_something", PySetFunction);           
>    }
> 
>    private void button1_Click(object sender, EventArgs e)
>    {
>        string code = comboBox1.Text.Trim();
>        ScriptSource source = m_engine.CreateScriptSourceFromString(code, SourceCodeKind.SingleStatement);
> 
>        try
>        {
>           source.Execute(m_scope);
>           Func<string> result = m_scope.GetVariable<Func<string>>("get_something");
> 
>           MessageBox.Show("Result: " + result(), "TestApp Result");
>        }
>        catch (Exception ue)
>        {
>            MessageBox.Show("Unrecognized Python Error\n\n" + ue.GetBaseException(), "Python Script Error");
>        }
>    }  
>  }
> } 
> ```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-17T22:35:53.363

在正常情况下，IronPython 只能访问 .Net 类型上的公共类和成员。您应该能够将您的对象设置为范围内的变量，并从您的脚本访问该对象上的任何公共成员。但是，您在示例中使用的方法是`private`如此，因此您无法真正访问它们。如果您希望能够访问它们，则需要以某种方式公开非公共成员，以便您可以操纵它们或使用反射。

您可以尝试的一种模式是添加一个方法，该方法将为您的对象创建一个代理，该代理将具有您想要公开的所有方法。然后将该代理对象添加到您的范围，然后使用该代理来调用您的方法。

```
public partial class MyForm : Form
{
    private readonly ScriptEngine m_engine;
    private readonly ScriptScope m_scope;

    public MyForm()
    {
        InitializeComponent();
        m_engine = Python.CreateEngine();

        dynamic scope = m_scope = m_engine.CreateScope();
        // add this form to the scope
        scope.form = this;
        // add the proxy to the scope
        scope.proxy = CreateProxy();
    }

    // public so accessible from a IronPython script
    public void ShowMessage(string message)
    {
        MessageBox.Show(message);
    }

    // private so not accessible from a IronPython script
    private int MyPrivateFunction()
    {
        MessageBox.Show("Called MyForm.MyPrivateFunction");
        return 42;
    }

    private object CreateProxy()
    {
        // let's expose all methods we want to access from a script
        dynamic proxy = new ExpandoObject();
        proxy.ShowMessage = new Action<string>(ShowMessage);
        proxy.MyPrivateFunction = new Func<int>(MyPrivateFunction);
        return proxy;
    }
} 
```

有了这个，您可以执行脚本通过`form`变量或代理通过`proxy`变量访问您的表单。为了更好地衡量，这是您可以轻松地从范围访问变量和其他对象的方法。

```
private void DoTests()
{
    // try to call the methods on the form or proxy objects
    var script = @"
form.ShowMessage('called form.ShowMessage')
# formFuncResult = form.MyPrivateFunction() # fail, MyPrivateFunction is not accessible
proxy.ShowMessage('called proxy.ShowMessage')
proxyFuncResult = proxy.MyPrivateFunction() # success, MyPrivateFunction on the proxy is accessible
";
    m_engine.Execute(script, m_scope);

    // access the scope through a dynamic variable
    dynamic scope = m_scope;

    // get the proxyFuncResult variable
    int proxyFuncResult = scope.proxyFuncResult;
    MessageBox.Show("proxyFuncResult variable: " + proxyFuncResult);

    // call the the function on the proxy directly
    int directResult = scope.proxy.MyPrivateFunction();
    MessageBox.Show("result of MyPrivateFunction: " + directResult);
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-11T22:12:42.533

我不确定你想要达到什么目标，但是这个怎么样？

在 C# 中：

```
m_scope.SetVariable("myAssembly", System.Reflection.Assembly.GetExecutingAssembly());

[...]

var result = (string) m_scope.GetVariable("theOutVar"); 
```

然后在 IronPython 脚本中：

```
import clr
clr.AddReference(myAssembly)
import MyNamespace
theOutVar = MyNamespace.MyClass.MyStaticMethod("hi") 
```

或者也许像这样？

在 C# 中：

```
m_scope.SetVariable("theTestObject", myTestObj); 
```

在 IronPython 中：

```
result = myTestObj.DoSomething("hi there", 10, false) 
```

# c# - 从 SQL 设置 img src

> ID：13333368
> 
> 赞同：0
> 
> 时间：2012-11-11T17:04:10.457
> 
> 标签：c#, asp.net, image

我正在使用 asp.net 中的标准 Web 表单，我的图像文件夹中有两个项目：

`images/Clear_Flag.png`
`images/S_Flag.png`

我已经能够从 SQL 数据库动态设置这些项目的背景颜色，但我无法设置文件位置 - 我尝试了很多不同的语法，但我得到了红十字错误。

下面的示例代码：

在代码中：

```
<img src=<#% Eval("Flag_Location") %;'> style='background-color: <%# Eval("Flag_Color") %>;'/> 
```

查询返回的字段

`Flag_Colour`： 蓝色的

`Flag_Location`: ~/images/Clear_Flag.png

谁能告诉我我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T20:14:23.697

标志位置应该是

```
/images/Clear_Flag.png 
```

删除数据库中的“~”或从图像 src 中删除“~”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-11T20:43:26.343

保留 Flag_Location 并添加 runat="server" 属性。这样，即使以后更改了目录结构，它也应该正确解析。

# c - 函数的参数

> ID：13333369
> 
> 赞同：6
> 
> 时间：2012-11-11T17:04:12.947
> 
> 标签：c, function, pointers, arguments, structure

我对定义为的函数的这个参数感到困惑

```
int bind(int s, const struct sockaddr *name, int namelen) 
```

并称为

```
bind(sd, (struct sockaddr_in *) &addr, length); 
```

我无法解释`struct sockaddr_in *`这里的意思。

这行得通吗：`bind (sd, &addr, length);`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-11T17:13:45.013

它应该这样调用：

```
bind (sd, (struct sockaddr *) &addr, length); 
```

至于为什么，这是做[多态](http://en.wikipedia.org/wiki/Polymorphism_in_object-oriented_programming)的C方式，如果你看一下这些结构的定义：

```
struct sockaddr {
    unsigned short    sa_family;    // address family, AF_xxx
    char              sa_data[14];  // 14 bytes of protocol address
};

// IPv4 AF_INET sockets:
struct sockaddr_in {
    short            sin_family;   // e.g. AF_INET, AF_INET6
    unsigned short   sin_port;     // e.g. htons(3490)
    struct in_addr   sin_addr;     // see struct in_addr, below
    char             sin_zero[8];  // zero this if you want to
};

// IPv6 AF_INET6 sockets:
struct sockaddr_in6 {
    u_int16_t       sin6_family;   // address family, AF_INET6
    u_int16_t       sin6_port;     // port number, Network Byte Order
    u_int32_t       sin6_flowinfo; // IPv6 flow information
    struct in6_addr sin6_addr;     // IPv6 address
    u_int32_t       sin6_scope_id; // Scope ID
}; 
```

它们都共享相同的第一个成员，`sa_family`当您将指向其中一个结构的指针传递给`bind()`您首先将其转换`struct sockaddr *`为函数并在函数内部时，`sa_family`用于确定您传递的结构并转换回正确的结构，而不是拥有一个函数对于每个结构，您都有一个接受`sockaddr*`.

另一种看待它的方式，从 OOP 的角度来看，想象它是and`sockaddr`的基类，并且传递一个指针类似于强制转换为基类型并调用一个泛型函数。希望这更清楚。`sockaddr_in``sockaddr_in6``sockaddr`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-11T17:08:34.600

除了`void`指针，从指针到`T`指针的转换`U`应该是显式的。

```
bind (sd, (struct sockaddr *) &addr, length); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-11T17:08:56.273

这取决于是什么`addr`。

如果它不是同一个结构的地址，那么你需要对它进行类型转换，否则你会收到隐式类型转换 from `<type of addr>`to 的警告`const struct sockaddr*`

查看编译器在编译任何程序时给出的所有警告消息。开始使用它（用于编译器`gcc`警告）：

`gcc -Wall <test.c> -o <test>`

这是程序员的最佳实践。

# algorithm - 段树：延迟传播

> ID：13333370
> 
> 赞同：0
> 
> 时间：2012-11-11T17:04:31.293
> 
> 标签：algorithm, data-structures, segment-tree

在一个整数数组（大小 10^5）中，操作是这样的......

1.  对从索引 L 到 R 的每个元素按特定数字 X 进行按位异或运算
2.  求从索引 L 到 R 的数字之和。

我如何使用分段树和惰性传播来做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T20:24:49.083

我会在每个节点上保留 32 个整数，告诉我在子节点的二进制表示的每个位置有多少个整数。

要对段节点进行异或运算，只需反转每个位置有多少个（对于 X 中的每个位 1）。

```
for i in range(32):
    if X&(1<<i):
        N[i] = (R-L+1)-N[i]. 
```

要计算总和，

```
s = 0
for i in range(32):
    s |= ((N[i]+carry)%2) << i
    carry = (N[i]+carry)/2 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-24T14:17:17.690

Your answer is not correct. You need to do some sort of lazy update like here: [http://p--np.blogspot.ro/2011/07/segment-tree.html](http://p--np.blogspot.ro/2011/07/segment-tree.html) . Else, if you do update(1,n, x) and query(4,5) you will get a wrong answer because the update has changed just the root node.

# jquery - 在谷歌浏览器扩展的内容脚本中访问 c ookie

> ID：13333371
> 
> 赞同：2
> 
> 时间：2012-11-11T17:04:50.293
> 
> 标签：jquery, google-chrome-extension, content-script

我在 Google chrome 中有简单的扩展。内容脚本是一个带有简单警报语句的 js 文件。现在我想通过名称 'sid' 获取 cookie 的值。如果我使用 $.cookie('sid')，它只是不工作。我不确定如何使用 chrome.cookie 来使其正常工作。

我要做的就是将 cookie 的值存储在变量中。

请帮忙

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T17:09:23.030

要使用它`$.cookie("example")`，您需要包含可以[在此处获取的插件文件](https://github.com/carhartl/jquery-cookie)

这是`<script src="jquery.cookie.js"></script>`

# java - 很难理解已检查和未检查的异常

> ID：13333372
> 
> 赞同：10
> 
> 时间：2012-11-11T17:04:58.460
> 
> 标签：java, exception, exception-handling, checked-exceptions, unchecked-exception

我已经阅读了有关此的所有内容，但我仍然不明白如何使用已检查和未检查的异常。我想我仍然无法理解这个概念。我在 StackOverflow 上阅读过，*最好*使用未检查的异常而不是检查的异常，但是 Eclipse*强制*我使用检查的异常，如`FileNotFoundException`（AFAIK，如果 Eclipse 强制我插入一个 try/catch 块，它是一个检查的异常）。我想知道，有什么办法可以将检查*翻译*成未检查？到底在*处理*什么？我不明白处理异常是什么。

我在这里有这个例子，我真的很想知道如何处理（？）这个。这是一个检查异常，对吧？

```
public void readFile() {
    File foo = new File("./foo.bar");
    try {
        BufferedReader bufferedReader = new BufferedReader(new FileReader(foo));
    } catch (FileNotFoundException e) {
        // What should I do here?
    }
    getDataFromFile(bufferedReader);
} 
```

我见过人们在这里做的各种事情。有些打印堆栈跟踪，这是我通常做的，我看不出它有什么问题。它为我提供了调试所需的信息。有些人忽略它们，我认为不应该这样做（我看到 JNode OS 引导程序忽略了一个异常）。有些人只是`throws`在签名中添加声明。有些会在那个东西里面抛出*更多异常！*（我想也许这就是使用未检查而不是检查的意思？）

此外，如果您添加`throws`声明，您将被迫进一步放置一个 try/catch 块，如果您有一个非常大的应用程序，这很不方便。对不起，我只是一无所知。完全地。我正在努力学习优秀而优雅的设计，这对我来说是一种折磨。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-11T17:13:17.340

**未经检查的异常**

是一个例外，因为某些事情本来就不应该发生，因此无法预料。它处理**仅当**您的程序有**错误**时才会出现的情况。

它是 的子类`RuntimeException`（它是 的子类`Exception`），通常使用`IllegalArgumentException`、`NullPointerException`或`IllegalStateException`

> 未经检查的运行时异常表示通常反映程序逻辑中的错误并且在运行时无法合理恢复的情况。

* * *

**检查异常**

是可能发生的事情，由于系统其余部分的不可预见的情况。它不在您的直接控制范围内，但**不一定是错误**，而是可能遇到**的情况。**

它是 的子类`Exception`。

**[来自：例外](http://www.javapractices.com/topic/TopicAction.do?Id=129)**

* * *

### 在你的例子中，

文件不存在是您需要处理的情况，因为它可能发生，即使在生产代码中，如果某些条件盛行（磁盘已满）。这使它成为一个检查异常。

* * *

### 处理异常：

> 例外旨在提供更好的用户体验。所以你应该向用户报告错误，如果你不能继续，优雅地终止。

1.  如果确实是您预料到的情况，那么您可能应该将问题告知用户，并在必要时优雅地终止，或者继续做下一件事。

2.  如果它是未经检查的异常，您可以做的最好的事情就是告诉用户发生了意外错误，因为这不是一开始就应该发生的事情，然后将堆栈跟踪报告给您。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-11T17:47:36.297

让我们以您的示例（修改）本身来解释。

```
public void readFile() {
    BufferedReader bufferedReader = null;
    try {
            File foo = new File("./foo.bar");
        bufferedReader = new BufferedReader(new FileReader(foo));
    } catch (FileNotFoundException e) {
        // What should I do here?
    }
    getDataFromFile(bufferedReader);
} 
```

当您遇到`FileNotFoundException`异常时，您的 bufferedReader 不会使用文件流初始化。在这种情况下，您的下一条语句 ie`getDataFromFile(bufferedReader);`将失败，因为没有 bufferedReader 来读取数据。

因此，在`catch`块中，您可以执行以下两项操作：

1.  抛出一个新的自定义异常并从程序中返回
2.  尝试更正再次获取文件句柄的问题（一个示例可能是在这种情况下使用默认文件），因此`bufferedReader`正确初始化。

这样，`CheckedException`在编写程序本身的情况下很有帮助。它们为您提供有关可能故障的输入，并使您能够**预先做出适当的处理决定。**

另一方面，未经检查的异常（例如`NullPointerException`在编译时难以识别）可能会被忽视。如果发生但未处理，它们会在运行时引起问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-23T09:36:58.870

已检查的异常是一件令人头疼的事情。

很抱歉使用这种生硬的语言，但它们是 Java 最严重的设计错误之一！如果你必须处理仍然使用已检查异常的遗留 API，例如 Eclipse 或 Java 自己的 API，我个人所做的就是将它们包装到我自己的未检查异常中。使用您自己的标记类是一种很好的做法。这有助于您将这些异常识别为由您的代码引起的，例如在日志文件中或在调试时。

就我个人而言，我对调用我的标记类感到非常满意，`BullshitFree`因此我可以重新抛出检查的异常，如下所示

```
try {
    // call to legacy API that still uses checked exceptions
} catch(CheckedException exception) {
    throw new BullshitFree(exception);
} 
```

确保您的`BullshitFree`异常类实际上是扩展`RuntimeException`的，因此它是未选中的！

在您的代码示例中，有两个选项。如果有办法从中恢复，例如通过创建文件或将错误报告给用户，请这样做。如果没有，或者它只是您自己使用的一个小脚本，请将其包装在一个`BullshitFree`异常中，然后用剩下的时间学习 Ruby 或其他精心设计的语言……</p>

您的里程可能会有所不同。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-11T17:28:43.617

首先，例外是​​你的朋友:) - 不，真的。异常是一种非常强大且安全的错误处理方式。

基本上，Java 中已检查和未检查异常的区别在于对异常的预期反应：

已检查异常通常用于将某种操作的“意外”结果传达给调用者，调用者被认为想要显式处理该异常状态。

未经检查的异常通常是被认为或多或少无法恢复的异常。它用于指示假定使整个操作无效的某些故障情况。就像`NullPointerException`这些异常在几乎所有操作中都或多或少是潜在的。让它们检查意味着调用者需要在错误处理中完成一些令人讨厌的开销。

在您的示例中，您可能会这样：

```
public void readFile() {
    File foo = new File("./foo.bar");
    try {
        BufferedReader bufferedReader = new BufferedReader(new FileReader(foo));
        getDataFromFile(bufferedReader);  // If the file could not be found above, this will never execute!
    } catch (IOException e) {
        // React, e.g.:
        System.out.println("Data could not be read due to an IO error.");
    }

} 
```

重新抛出异常或将一个异常包装到另一个异常中并不少见。- 例如，当发生`IOException`罢工时，您可能希望在将异常按原样或修改给调用者之前进行一些清理，关闭一些打开的文件等，以便他可以以适当的方式处理异常。

您如何实际处理特定异常几乎完全取决于您。根据运行代码的用户（例如您自己）和环境，打印堆栈跟踪可能没问题。或者，也许，您想在暂停后重试刚刚执行的操作。或者，在给出的示例中，您可以向用户显示一条消息并要求他重新输入文件名等。

后者是可以有效使用不同类别异常的方式：A `FileNotFoundException`（它是 的子类`IOException`）可以通过用户交互来恢复；裸机`IOException`可能被认为是不可恢复的，因为在最坏的情况下，它甚至可能表示某种硬件故障。

# javascript - javascript如何上传blob？

> ID：13333378
> 
> 赞同：123
> 
> 时间：2012-11-11T17:06:25.510
> 
> 标签：javascript, jquery, html

我在这个结构中有一个 blob 数据：

```
Blob {type: "audio/wav", size: 655404, slice: function}
size: 655404
type: "audio/wav"
__proto__: Blob 
```

它实际上是使用最近的 Chrome`getUerMedia()`和[Recorder.js录制的声音数据](https://github.com/mattdiamond/Recorderjs)

如何使用 jquery 的 post 方法将此 blob 上传到服务器？我试过这个没有任何运气：

```
 $.post('http://localhost/upload.php', { fname: "test.wav", data: soundBlob }, 
    function(responseText) {
           console.log(responseText);
    }); 
```

* * *

## 回答 #1

> 赞同：141
> 
> 时间：2012-11-11T17:17:28.573

您可以使用[FormData API](https://developer.mozilla.org/en-US/docs/DOM/XMLHttpRequest/FormData)。

如果您使用`jquery.ajax`，则需要设置`processData: false`和`contentType: false`。

```
var fd = new FormData();
fd.append('fname', 'test.wav');
fd.append('data', soundBlob);
$.ajax({
    type: 'POST',
    url: '/upload.php',
    data: fd,
    processData: false,
    contentType: false
}).done(function(data) {
       console.log(data);
}); 
```

* * *

## 回答 #2

> 赞同：45
> 
> 时间：2019-05-06T14:04:00.757

## 2019 更新

这将使用最新的[Fetch API](https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API)更新答案，并且不需要 jQuery。

免责声明：不适用于 IE、Opera Mini 和旧版浏览器。见[caniuse](https://caniuse.com/#search=fetch)。

**基本获取**

它可能很简单：

```
 fetch(`https://example.com/upload.php`, {method:"POST", body:blobData})
                .then(response => console.log(response.text())) 
```

**使用错误处理获取**

添加错误处理后，它可能如下所示：

```
fetch(`https://example.com/upload.php`, {method:"POST", body:blobData})
            .then(response => {
                if (response.ok) return response;
                else throw Error(`Server returned ${response.status}: ${response.statusText}`)
            })
            .then(response => console.log(response.text()))
            .catch(err => {
                alert(err);
            }); 
```

**PHP 代码**

这是upload.php 中的服务器端代码。

```
<?php    
    // gets entire POST body
    $data = file_get_contents('php://input');
    // write the data out to the file
    $fp = fopen("path/to/file", "wb");

    fwrite($fp, $data);
    fclose($fp);
?> 
```

* * *

## 回答 #3

> 赞同：22
> 
> 时间：2015-11-23T23:11:37.560

您实际上不必使用从 JavaScript 向服务器`FormData`发送 a （并且 a也是 a ）。`Blob``File``Blob`

jQuery 示例：

```
var file = $('#fileInput').get(0).files.item(0); // instance of File
$.ajax({
  type: 'POST',
  url: 'upload.php',
  data: file,
  contentType: 'application/my-binary-type', // set accordingly
  processData: false
}); 
```

香草 JavaScript 示例：

```
var file = $('#fileInput').get(0).files.item(0); // instance of File
var xhr = new XMLHttpRequest();
xhr.open('POST', '/upload.php', true);
xhr.onload = function(e) { ... };
xhr.send(file); 
```

当然，如果您要使用“AJAX”实现替换传统的 HTML 多部分表单（即，您的后端使用多部分表单数据），您希望使用`FormData`另一个答案中描述的对象。

来源：[XMLHttpRequest2 中的新技巧 | HTML5 摇滚](http://www.html5rocks.com/en/tutorials/file/xhr2/#toc-send-blob)

* * *

## 回答 #4

> 赞同：19
> 
> 时间：2013-08-15T14:24:01.747

我无法让上面的示例与 blob 一起使用，我想知道 upload.php 中到底有什么。所以你去：

（仅在 Chrome 28.0.1500.95 中测试）

```
// javascript function that uploads a blob to upload.php
function uploadBlob(){
    // create a blob here for testing
    var blob = new Blob(["i am a blob"]);
    //var blob = yourAudioBlobCapturedFromWebAudioAPI;// for example   
    var reader = new FileReader();
    // this function is triggered once a call to readAsDataURL returns
    reader.onload = function(event){
        var fd = new FormData();
        fd.append('fname', 'test.txt');
        fd.append('data', event.target.result);
        $.ajax({
            type: 'POST',
            url: 'upload.php',
            data: fd,
            processData: false,
            contentType: false
        }).done(function(data) {
            // print the output from the upload.php script
            console.log(data);
        });
    };      
    // trigger the read from the reader...
    reader.readAsDataURL(blob);

} 
```

upload.php 的内容：

```
<?
// pull the raw binary data from the POST array
$data = substr($_POST['data'], strpos($_POST['data'], ",") + 1);
// decode it
$decodedData = base64_decode($data);
// print out the raw data, 
echo ($decodedData);
$filename = "test.txt";
// write the data out to the file
$fp = fopen($filename, 'wb');
fwrite($fp, $decodedData);
fclose($fp);
?> 
```

* * *

## 回答 #5

> 赞同：12
> 
> 时间：2014-02-13T05:55:04.937

我能够通过不使用 FormData 而是使用 javascript 对象来传输 blob 来让 @yeeking 示例工作。适用于使用 recorder.js 创建的声音 blob。在 Chrome 版本 32.0.1700.107 中测试

```
function uploadAudio( blob ) {
  var reader = new FileReader();
  reader.onload = function(event){
    var fd = {};
    fd["fname"] = "test.wav";
    fd["data"] = event.target.result;
    $.ajax({
      type: 'POST',
      url: 'upload.php',
      data: fd,
      dataType: 'text'
    }).done(function(data) {
        console.log(data);
    });
  };
  reader.readAsDataURL(blob);
} 
```

upload.php 的内容

```
<?
// pull the raw binary data from the POST array
$data = substr($_POST['data'], strpos($_POST['data'], ",") + 1);
// decode it
$decodedData = base64_decode($data);
// print out the raw data,
$filename = $_POST['fname'];
echo $filename;
// write the data out to the file
$fp = fopen($filename, 'wb');
fwrite($fp, $decodedData);
fclose($fp);
?> 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2017-10-17T05:37:47.877

我尝试了上述所有解决方案，此外还尝试了相关答案中的解决方案。解决方案包括但不限于手动将 blob 传递给 HTMLInputElement 的文件属性，调用 FileReader 上的所有 readAs* 方法，使用 File 实例作为 FormData.append 调用的第二个参数，尝试通过获取将 blob 数据作为字符串获取URL.createObjectURL(myBlob) 中的值结果很糟糕并导致我的机器崩溃。

现在，如果您碰巧尝试了这些或更多但仍然发现您无法上传您的 blob，这可能意味着问题出在服务器端。就我而言，我的 blob 超出了PHP.INI 中的[http://www.php.net/manual/en/ini.core.php#ini.upload-max-filesize](http://www.php.net/manual/en/ini.core.php#ini.upload-max-filesize)和 post_max_size 限制，因此文件离开了前端表单但被服务器拒绝。您可以直接在 PHP.INI 中或通过 .htaccess 增加此值

# cocos2d-iphone - Obj-c *** -[CFString copyWithZone:]: 消息发送到释放的实例

> ID：13333381
> 
> 赞同：1
> 
> 时间：2012-11-11T17:06:37.317
> 
> 标签：cocos2d-iphone, crash, cfstring

这是调试器中的完整错误：

```
2012-11-11 17:57:34.534 Killer[13745:707] *** -[CFString copyWithZone:]: message sent to     deallocated instance 0xee57540
2012-11-11 18:01:59.231 Killer[13745:707] *** -[CFString class]: message sent to deallocated instance 0xee57540
(lldb) 
```

使用 Obj C 和 Cocos 2d v1.0.1 编程，这里是崩溃行

```
player.zombieImage = [playersPicturesZombies objectAtIndex:idx]; 
```

奇怪的是，我在崩溃之前做了 10 次潜在的崩溃操作，这与内存问题有关吗？非常感谢你的帮助。

# python - 在大型 Python 代码库中从结果追溯到其原因

> ID：13333382
> 
> 赞同：7
> 
> 时间：2012-11-11T17:06:39.667
> 
> 标签：python, debugging

我在 Django 中有一个相当大的项目，这是一个相当大的框架，并且我正在使用相当多的应用程序、中间件、上下文处理器等。规模意味着当代码库的一部分针对我的请求运行时不希望它，确定它为什么这样做是困难的。直接的代码检查过于耗时，就像在调试器中单步执行整个请求一样。

在这种特殊情况下，我的问题是我在每个响应上都设置了“Vary: Cookie”，包括一些我想要大量缓存的以及我不应该需要任何 cookie 的地方。我怀疑，但不知道如何证明，某些中间件或上下文处理器正在访问`request.session`，即使它不使用结果——尽管它可能是间接访问，例如通过`request.user`. 当然，它可能完全是另外一回事。

在 Python 中，如何在大型代码库中从效果（“将 Vary 标头添加到响应中”）追溯到其原因？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-11T17:49:51.947

这是一个想法：猴子修补 django HttpResponse 类，以便`__setitem__`如果设置的标头为`Vary`. 您可以在创建它时从其他什么都不做的中间件中处理它。它应该从设置标题的行中为您提供一个很好的回溯。

```
class MonkeyPatchMiddleware(object):

   def __init__(self):
       from django.http import HttpResponse

       original_set_item = HttpResponse.__setitem__

       def __setitem__(self, header, value):
           if header == "Vary":
               raise ValueError
           original_set_item(self, header, value)

       HttpResponse.__setitem__ = __setitem__ 
```

将中间件安装为 django 设置文件中的中间件堆栈中的第一件事。

# java - Java zlib解压报错“未知压缩方式”

> ID：13333396
> 
> 赞同：2
> 
> 时间：2012-11-11T17:07:48.293
> 
> 标签：java, minecraft

我在高中，需要为我的 ap 计算机编程课程完成一个项目。基本上，我的老师在java中回顾了zlib解压缩和压缩，并告诉我们制作一个小java程序来解压一些压缩数据。我想补充一点，我是一个 Minecraft 上瘾者，发现 minecraft 中的块在 zlib 中被压缩，所以我开始解压缩这些块。无论如何，代码不起作用，我必须在星期二之前完成它。我犯了什么错误？所有帮助将不胜感激。代码：

```
public static void read(String filein) throws IOException, DataFormatException{
    //Initialize
    ArrayList<Byte> bufflist = new ArrayList<Byte>();
    File file = new File(filein);
    RandomAccessFile mcr = new RandomAccessFile(file, "r");
    RandomAccessFile cache = new RandomAccessFile("cache", "rw");
    RandomAccessFile out = new RandomAccessFile("out", "rw");

    //read file
    int dataread = 0;
    mcr.seek(8192);
    while (dataread < file.length() - 8192){
        dataread = dataread + 1;
        byte b = mcr.readByte();
        bufflist.add(b);
    }
    mcr.close();
    //decode
    for (int y=0; y<bufflist.size()-1; y++){
        cache.write(bufflist.get(y));
    }
    InflaterInputStream infl = new InflaterInputStream(new FileInputStream("cache"), new Inflater());
    int data = infl.read();
    out.write(data);
}
public static void main(String[] args) throws IOException, DataFormatException
{
    read("r.1.1.mca");      
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-11T17:50:16.023

请注意：虽然有许多工具使用 zlib 进行（解）压缩，但结果以多种不同（专有）文件格式存储。- 即使压缩算法匹配，您也需要知道压缩数据存储在哪种格式中才能解压缩。

那么，您确定在输入文件的偏移量 8192 处遵循的是 zlib 期望的格式的数据流吗？- 我不会认为它是专有文件格式。使用普通的 zlib，您甚至无法解压缩常见的 PKZIP（“.zip”）存档。不要在这上面浪费你的时间，而是找一些其他的数据来玩。

您可能想尝试首先通过 zlib 压缩一些已知数据，将其存储到文件或其他任何文件中，如果您愿意，可以查看它。然后，把那个压缩数据文件交给zlib，看看你能不能把它解压成原始形式。如果你能做到这一点，你就已经学到了很多关于如何使用 zlib 的知识。

对于其他任务，例如处理那些“.zip”文件，您可能需要查看`java.util.zip`包中的 Java API。

哦，顺便说一句：**“未知压缩方法”**的结果可能有点误导。这仅表明 zlib 无法确定如何解压缩给定数据，这通常是由“损坏”输入引起的，至少在给定的形式中，zlib 首先无法处理。

至于你的代码：

确保在尝试写入之前删除输出文件；以您的方式写入现有文件会将数据*附加*到文件的现有数据中，而不是替换旧字节。

在尝试`close()`通过新的`InputStream`.

在你的`for`循环`y<bufflist.size()-1`中实际上应该是`y<bufflist.size()`.

您可以省去所有这些`bufflist`东西：只需替换`bufflist.add(b);`为`cache.write(b);`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-11T19:09:45.540

IIRC，在 Anvil 中，每个 .mca 文件都存储多个单独压缩的“部分”，因此每当修改某些内容时都不需要重新压缩整个块。

[在这里](http://www.mojang.com/2012/02/new-minecraft-map-format-anvil/)查看 McRegion/Anvil 转换器。这是了解如何打包 anvil 文件的一个很好的起点。

祝你的项目好运！

# asp.net - 采访：是否可以在 Tomcat 中托管 ASP.NET Web 服务？

> ID：13333397
> 
> 赞同：6
> 
> 时间：2012-11-11T17:07:57.510
> 
> 标签：asp.net, tomcat

面试官问我，我们用`Tomcat`for`ASP.NET`还是不用？？因为，我从来没有尝试过，或者我会说，我从来没有考虑过。所以，有人请告诉我，这是否可能？如果是，那怎么办？？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-11T17:23:34.553

您不能真正在 Tomcat 中托管 ASP.NET 文件。嗯……理论上你可能会写很多插件，但我怀疑有人曾经探索过理论练习之外的东西。

您可以做的是将 ASPX 文件的请求从 Tomcat 转发到 IIS。因此，如果浏览器请求 index.jsp，则该请求由 Tomcat 处理。如果浏览器请求 default.aspx，如果由 Tomat 转发到 IIS 和服务器，则由那里的 ASP.NET 网站。这通常称为在Tomcat**后面**托管 ASP.NET 网站。

但是反过来（在 IIS 后面托管一个 JSP 网站）更为常见，因为这样您可以让 IIS 处理身份验证部分——它非常擅长。该连接的官方页面在[此处](http://tomcat.apache.org/connectors-doc/webserver_howto/iis.html)，但还有许多其他专门针对该主题的站点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-05-10T19:02:55.153

好吧，永远不要说永远 :) 有一个开源项目“Mono”旨在为在没有 IIS 功能的机器上运行 .NET 应用程序提供支持。有关详细信息，请参阅本文[http://www.mono-project.com/Main_Page](http://www.mono-project.com/Main_Page)

# php - 扫描 .txt 中的行以获取特定值

> ID：13333398
> 
> 赞同：0
> 
> 时间：2012-11-11T17:08:11.377
> 
> 标签：php

> **可能重复：**
> [如何从 php 中的 csv 文件中提取数据](https://stackoverflow.com/questions/2805427/how-to-extract-data-from-csv-file-in-php)

我最近收到的一项任务要求我制作一个模拟约会网站。提供了很多工作，而我所需要的就是编写 PHP。我坚持的部分是关于在 .txt 文件（已经输入的名称数据库）中查找查询名称和名称之间的“匹配”。文本文件如下所示：

```
Jenny,F,28,INTJ,Gentoo,18,30
Michael,M,22,ISTJ,Windows,20,25
...
Name,Gender,Age,Personality,OS,minage,maxage 
```

我正在使用的页面提示我输入一个名字（.txt 文件中的一个人的名字），然后找到潜在的匹配项。“匹配”是具有以下所有条件的任何人：相反的性别，在他们各自的年龄范围内，共享至少两个性格类型的字母（例如，ISTP + ESFP = 匹配），以及最喜欢的操作系统。然后它以 HTML 格式显示匹配项，这是我能够做到的。

我的问题是我不完全确定如何交叉引用文本文件。我最初认为我应该将 .txt 的每一行放入更大数组的数组元素中：

```
<?php
    //Initialize the contents of the url (.php?name=$$$) into a variable $inputname
    $inputname = $_GET["name"];
    //Finds how many lines in the singles.txt file
    $lines = count(file("./singles.txt"));
    //Initialize each line into an array
    $matchespre = file("./singles.txt");
?> 
```

...但我不确定如何搜索特定字符（INTJ、M、30、40 等）。

如何获得我想要的结果？如果很难理解我的最终目标是什么，我很抱歉，这个问题本身很难理解（在我看来）。显然我缺乏发布图片的声誉，否则我会截屏发布作业问题本身。

编辑; 我想也许我正在寻找一种将 .txt 的每一行放入一个字符串的方法（例如 string1 = Jenny,F,28,INTJ,Gentoo,18,30; string2 = Michael,M,22, ISTJ、Windows、20、25 等），然后将每个字符串explode() 成一个数组，所以我有一堆数组。然后，我可以按顺序搜索每个数组以查找匹配的性别、年龄范围等。我只是缺乏 PHP 必须提供的函数百科全书，无法确切知道该做什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-11T17:21:00.620

如果所有值的顺序相同，您可以愉快地将它们放入一个数组中并对其进行排序以获得适当的值，只需创建一个数组并循环遍历这些行...

```
// Jenny,F,28,INTJ,Gentoo,18,30

// make an array to put your values in
$array = array();

// loop through the lines
foreach($text as $line) {
  $values = $explode(",",$line);
  $array[]['name'] = $values[0];             // Jenny
  $array[]['gender'] = $values[1];           // F
  $array[]['age'] = $values[2];              // 28
  $array[]['whatever_that_is'] = $values[3]; // INTJ
  $array[]['operating_system'] = $values[4]; // Gentoo
  $array[]['min_age'] = $values[5];          // 18
  $array[]['max_age'] = $values[6];          // 30
} 
```

抱歉，您可能想寻找符合条件的人...！

```
// search for the gender in your array
// set the gender you are looking for
$gender = "M";
// make a new array
$nameArray = array();

// loop through your other array
foreach($array as $fieldArr) {
  if($fieldArr['gender'] = $gender;) {
    // echo or add that person to another array,
    //or whatever you want to do
    echo $fieldArr['name'] . "<br />\n";
  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-11T17:20:23.493

我会将每一行分成单个参数：

```
$arrDating = array();
foreach($matchespre as $line) {
    array_push($arrDating, explode(',', $line) );
} 
```

# cakephp - CakeResponse 下载文件不工作

> ID：13333399
> 
> 赞同：0
> 
> 时间：2012-11-11T17:08:21.590
> 
> 标签：cakephp, cakephp-2.0

我正在用 cakePHP 2.x 编写一个简单的应用程序。我需要允许用户上传和下载文件。上传工作正常，但我坚持下载操作。

我有一个控制器名称 Documents，其中包含下载操作：

```
public function download($id = null) {
    $this->Document->recursive = -1;
    $doc = $this->Document->find('first', array('conditions' => array('Document.id' => $id)));

    $filename = $doc['Document']['file_file_name'];

    $resp = new CakeResponse();
    $resp->download(Configure::read('upload_dir').'upload'.DS.$id.'_'.$filename);
    $resp->send();
} 
```

是的，我没有检查文件是否存在等等......但这只是为了测试。所以下载方法中的路径类似于：/home/www-app/upload/$id_$filename

当然，文件存在并且两个路径是相等的。

但我从 chrome 得到以下错误：

```
Erreur 6 (net::ERR_FILE_NOT_FOUND) : File or Directory not found 
```

我尝试了 $resp->file() 方法，但 cakePHP 似乎不知道该方法。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T01:47:15.953

您没有以应有的方式使用 Cake2.x 及其响应类（以及它是如何记录的！）

不要使用新实例，您已经有一个需要使用：

```
$this->autoRender = false;
$this->response->send(); 
```

等等

此外，使用 autoRender false 您不需要视图（如果您直接发送文件怎么办？）。

**更正 2013-01-10：** 您甚至不需要 send()。autoRender 部分本身就足够了。然后，响应类将在调度过程结束时自动调用 send()：

```
$this->autoRender = false;
$this->response->file(Configure::read('upload_dir').'upload'.DS.$id.'_'.$filename);

// optionally force download as $name
$this->response->download($name); 
```

# android - 在定义之前请求自定义 android 权限

> ID：13333400
> 
> 赞同：1
> 
> 时间：2012-11-11T17:08:23.117
> 
> 标签：android, permissions

我的目标场景：用户在他/她喜欢的电子邮件应用中打开一个附件。建议我的应用打开/查看附件，用户选择我的应用，我的应用通过 ContentResolver.openInputStream(uri) 打开附件 uri 并从中读取。

这通常效果很好。不过，我注意到了一些电子邮件应用程序现在需要特殊权限，例如：com.fsck.k9.permission.READ_ATTACHMENT、com.android.email.permission.READ_ATTACHMENT、com.motorola.blur.service.email.Permissions .INTERACT等

我认为为市场上的每个电子邮件应用程序添加使用许可标签是不好的设计。有没有更好的方法可以普遍阅读附件？

此外 - 即使我决定在每次发布时继续向我的应用程序添加使用权限，我也会遇到另一个问题：如果需要权限的应用程序是在我的应用程序*之后*安装的，我的应用程序将没有权限，因为当时在我的应用程序安装中，packagemanager 不知道甚至存在这样的权限。

那么 - 如果我的用户决定切换到我的应用程序已经拥有使用权限的新电子邮件应用程序，我真的必须指示我的用户重新安装我的应用程序吗？仅仅因为我的应用程序首先出现在他们的系统上？？

任何帮助将不胜感激。谢谢阅读！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T06:24:54.457

我现在可以从我的应用程序中删除所有这些自定义权限，并且仍然可以读取附件。

事实证明我做的一切都是对的，除了一件小事......

...我在两个活动中处理阅读附件。第一个`Activity`- 我的主要`Activity`- 负责收集`Intent`信息并选择/准备用于存储要导入的数据的数据库。第二个`Activity`实际上是从`InputStream`获得的 via中读取`ContentResolver`并导入到数据库中。

事实证明，`FLAG_GRANT_READ_URI_PERMISSION`它只授予`Intent`. 当我将`Uri`附件传递到*第二个* `Activity`时，它无法再在那里阅读 - 只能通过授予我的应用程序几个 custom `Permissions`，如上所述我不能真正推荐的解决方案。

我现在的解决方案是读取我的第一个中的所有数据`Activity`，将其存储在一个临时文件中并将这个文件传递`Uri`给我的第二个`Activity`。当然，现在我必须关心复制需要多长时间，可能会显示进度对话框并确定我可以在哪里找到足够的空间来存放临时文件，访问原件`Uri`似乎要容易得多。

# ruby-on-rails-3 - Carrierwave pdf 到 jpg 缩略图，适用于 Safari +iOS 或 IE、Firefox、Chrome，但不能同时适用

> ID：13333402
> 
> 赞同：1
> 
> 时间：2012-11-11T17:08:40.130
> 
> 标签：ruby-on-rails-3, image-processing, imagemagick, carrierwave, rmagick

我正在拔头发，几天来一直在寻找解决方案。我正在尝试获取上传的 pdf 文档并创建一个可在所有浏览器上查看的缩略图。我可以让它在 Safari/iOS 或 Firefox/IE7+/Chrome 上运行，但不是一个可以在任何地方运行的版本。我尝试将色彩空间设置为 rgb（无效果），转换为 png 而不是 jpg（无效果）并设置：set_content_type（无效果）。我在本地机器和生产（Heroku）上得到了相同的结果。

pdfdoc_uploader.rb

```
include ImageManipulators
include CarrierWave::RMagick
include CarrierWave::MimeTypes

version :thumb do

 process :convert => 'jpg'  #<---This works in Safari and iOS
 process :resize_to_fit => [200, 200]
 process :paper_shape
 process :strip
 process :convert => 'jpg'  #<---Move it here and it works everywhere else

 def full_filename (for_file = model.logo.file)
   super.chomp(File.extname(super)) + '.jpg'
 end     
end 
```

image_manipulators.rb

```
module ImageManipulators

# creates an image with a 3x4 aspect ratio
def paper_shape
  manipulate! do |img|
if img.rows*4 != img.columns*3
  width=img.columns
  height=img.columns/3*4
  img.crop!(0,0,width,height,true)
else
  img
end
  end
 end

def set_content_type(*args)
   self.file.instance_variable_set(:@content_type, "image/jpeg")
end

# Autoorients image according to exif
 def auto_orient
   manipulate! {|img| img.auto_orient! || img }
 end

 # Crops the biggest possible square from the image
 def biggest_square
   manipulate! do |img|
     if img.rows != img.columns
       max = img.rows > img.columns ? img.columns : img.rows
       img.crop!(0,0,max,max,true)
     else
       img
     end
   end
 end

def paper_shape
  manipulate! do |img|
     if img.rows*4 != img.columns*3
       width=img.columns
       height=img.columns/3*4
       img.crop!(0,0,width,height,true)
     else
       img
     end
  end
 end

 # Create rounded corners for the image
 def rounded_corners
   radius = 10
   manipulate! do |img|
     #create a masq of same size
     masq = Magick::Image.new(img.columns, img.rows)
     d = Magick::Draw.new
     d.roundrectangle(0, 0, img.columns - 1, img.rows - 1, radius, radius)
     d.draw(masq)
     img.composite(masq, 0, 0, Magick::LightenCompositeOp)
   end
 end

 # Rotates the image based on the EXIF Orientation
     def fix_exif_rotation
       manipulate! do |img|
         img.auto_orient!
         img = yield(img) if block_given?
         img
       end
     end

     # Strips out all embedded information from the image
     def strip
       manipulate! do |img|
         img.strip!
         img = yield(img) if block_given?
         img
       end
     end

     def colorspace(cs)
         manipulate! do |img|
           case cs
           when 'rgb'
             img.colorspace = Magick::RGBColorspace
           when 'cmyk'
             img.colorspace = Magick::CMYKColorspace
           end
           img = yield(img) if block_given?
           img
         end
       end
end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-07-25T11:08:51.037

2.5 年后我也遇到了同样的问题，而且我的头发也比以前少了。

当 Carrierwave 使用 RMagick 转换文件时，它调用`manipulate!`并传递一个`:option => :format`. `manipulate!`然后，如果该方法看到选项格式，则执行此操作（您将在[lib/carrierwave/processing/rmagick.rb](https://github.com/carrierwaveuploader/carrierwave/blob/master/lib/carrierwave/processing/rmagick.rb)中找到）：

```
if options[:format] || @format
    frames.write("#{options[:format] || @format}:#{current_path}", &write_block)
  move_to = current_path.chomp(File.extname(current_path)) + ".#{options[:format] || @format}"
    file.move_to(move_to, permissions, directory_permissions)
else
  frames.write(current_path, &write_block)
end 
```

我认为，问题在于它没有**明确**设置文件内容，它只是更改了扩展名。

事实证明，一些浏览器（除了 Safari 之外）很乐意根据文件扩展名解释图像，而 Safari 显然使用或检查文件头。

所以，我的解决方案不是仅仅依靠 Carrierwave/RMagick 魔法来转换，而是在自定义进程中显式设置内容标题，看起来像这样，我从另一个[堆栈问题](https://stackoverflow.com/questions/19546637/carrierwave-setting-content-type-incorrectly)中直接提取：

```
 version :png_thumb, :if => :pdf_document? do
    process :cover
    process :convert => :png
    process :resize_to_fit => [200, 300]
    process :set_content_type_png
    def full_filename (for_file = model.document.file)
      super.chomp(File.extname(super)) + '.png'
    end
  end

  def set_content_type_png(*args)
    Rails.logger.debug "#{file.content_type}"
    self.file.instance_variable_set(:@content_type, "image/png")
  end 
```

你会注意到调试器会在你运行时打印 application/pdf，确认该`:convert`方法还没有工作（还没有！）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-11T23:19:59.623

我最终放弃了，只创建了两个版本并使用 useragent 来确定要显示哪个版本。虽然不是一个有吸引力的选择，但它正在发挥作用。我希望有人提出更好的解决方案。

```
version :thumb_safari do #special version for safari and ios
  process :resize_to_fit => [200,200]
  process :convert => 'jpg'
  process :paper_shape
  def full_filename (for_file = model.logo.file)
     super.chomp(File.extname(super)) + '.jpg'
  end     
end

version :thumb do #all browsers except safari
  process :resize_to_fit => [200,200]
  process :convert => 'jpg' #must convert to jpg before running paper shape
  process :paper_shape
  process :convert => 'jpg' #after running paper_shape it will default to original file type
  def full_filename (for_file = model.logo.file)
    super.chomp(File.extname(super)) + '.jpg'
  end
end

def paper_shape
   manipulate! do |img|
     if img.rows*4 != img.columns*3
       width=img.columns
       height=img.columns/3*4
       img.crop!(0,0,width,height,true)
     else
       img
     end
   end
 end 
```

在控制器/视图中，我使用了 useragent gem 并这样做了：

文档控制器.rb

```
def index
  @user_agent=UserAgent.parse(request.user_agent)
  @search = Document.search(params[:q])
end 
```

index.html.rb

```
<% if @user_agent.browser.downcase == 'safari' %>
<%= link_to(image_tag(doc.pdfdoc_url(:thumb_safari).to_s, :class=>"dropshadow", :size => "150x225"), doc.pdfdoc_url)%>
<% else %>
<%= link_to(image_tag(doc.pdfdoc_url(:thumb).to_s, :class=>"dropshadow", :size => "150x225"), doc.pdfdoc_url)%>
<% end %> 
```

毫无疑问，有一种更好的方法可以做到这一点，但目前正在奏效。

# uiimageview - touchesBegan/touchesMoved

> ID：13333410
> 
> 赞同：1
> 
> 时间：2012-11-11T17:09:32.093
> 
> 标签：uiimageview, touchesbegan, touchesmoved

我正在尝试做一个只有图像的应用程序。然后，当用户触摸图像时，会创建一个副本，然后可以将图像移动到另一个位置并将其放在那里。

这是我创建的代码：

```
-(void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event {

UITouch *myTouch = [[event allTouches] anyObject];

CGPoint touch_point = [myTouch locationInView:view1];

    if ([view1 pointInside:touch_point withEvent:event]) {
        UIImageView *view= [UIImageView alloc];
        [self.view addSubview:view];
        [view release];
        view.userInteractionEnabled=YES;
        view.frame = CGRectMake(0, 0, 100.0, 100.0);
        view.center = [myTouch locationInView:self.view];
    }       

}

-(void)touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event {

    UITouch *myTouch = [[event allTouches] anyObject];

    CGPoint touch_point = [myTouch locationInView:view1];

    if ([view1 pointInside:touch_point withEvent:event]) {
        view.image=view1.image;
    }

} 
```

我的问题是我无法访问在 中创建的 *view`touchesBegan`并在`touchesMoved`. 有人知道如何公开此图像视图吗？

# c# - 使用 NPOI 将 Excel 导出到 DataTable

> ID：13333413
> 
> 赞同：16
> 
> 时间：2012-11-11T17:09:49.193
> 
> 标签：c#, excel, datatable, npoi

我想使用 NPOI 读取 Excel Tables 2010 xlsx，然后将数据导出到 DataTables 但不知道如何使用它。谁能逐步告诉我如何将 Excel 导出到 Datatable？我已经下载了 NPOI.dll，添加到参考，但不知道还有什么...

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2015-11-03T08:54:28.847

以下是您可以使用 NPOI 将 Excel 文件转换为 DataSet 的最少代码：

```
IWorkbook workbook;
using (var stream = new FileStream(excelFilePath, FileMode.Open, FileAccess.Read))
{
    workbook = new HSSFWorkbook(stream); // XSSFWorkbook for XLSX
}

var sheet = workbook.GetSheetAt(0); // zero-based index of your target sheet
var dataTable = new DataTable(sheet.SheetName);

// write the header row
var headerRow = sheet.GetRow(0);
foreach (var headerCell in headerRow)
{
    dataTable.Columns.Add(headerCell.ToString());
}

// write the rest
for(int i = 1; i< sheet.PhysicalNumberOfRows; i++)
{
    var sheetRow = sheet.GetRow(i);
    var dtRow = dataTable.NewRow();
    dtRow.ItemArray = dataTable.Columns
        .Cast<DataColumn>()
        .Select(c => sheetRow.GetCell(c.Ordinal, MissingCellPolicy.CREATE_NULL_AS_BLANK).ToString())
        .ToArray();
    dataTable.Rows.Add(dtRow);
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2017-07-03T08:03:44.767

```
private static ISheet GetFileStream(string fullFilePath)
{
    var fileExtension = Path.GetExtension(fullFilePath);
    string sheetName;
    ISheet sheet = null;
    switch (fileExtension)
    {
        case ".xlsx":
            using (var fs = new FileStream(fullFilePath, FileMode.Open, FileAccess.Read))
            {
                var wb = new XSSFWorkbook(fs);
                sheetName = wb.GetSheetAt(0).SheetName;
                sheet = (XSSFSheet) wb.GetSheet(sheetName);
            }
            break;
        case ".xls":
            using (var fs = new FileStream(fullFilePath, FileMode.Open, FileAccess.Read))
            {
                var wb = new HSSFWorkbook(fs);
                sheetName = wb.GetSheetAt(0).SheetName;
                sheet = (HSSFSheet) wb.GetSheet(sheetName);
            }
            break;
    }
    return sheet;
}

private static DataTable GetRequestsDataFromExcel(string fullFilePath)
{
    try
    {
        var sh = GetFileStream(fullFilePath);
        var dtExcelTable = new DataTable();
        dtExcelTable.Rows.Clear();
        dtExcelTable.Columns.Clear();
        var headerRow = sh.GetRow(0);
        int colCount = headerRow.LastCellNum;
        for (var c = 0; c < colCount; c++)
            dtExcelTable.Columns.Add(headerRow.GetCell(c).ToString());
        var i = 1;
        var currentRow = sh.GetRow(i);
        while (currentRow != null)
        {
            var dr = dtExcelTable.NewRow();
            for (var j = 0; j < currentRow.Cells.Count; j++)
            {
                var cell = currentRow.GetCell(j);

                if (cell != null)
                    switch (cell.CellType)
                    {
                        case CellType.Numeric:
                            dr[j] = DateUtil.IsCellDateFormatted(cell)
                                ? cell.DateCellValue.ToString(CultureInfo.InvariantCulture)
                                : cell.NumericCellValue.ToString(CultureInfo.InvariantCulture);
                            break;
                        case CellType.String:
                            dr[j] = cell.StringCellValue;
                            break;
                        case CellType.Blank:
                            dr[j] = string.Empty;
                            break;
                    }
            }
            dtExcelTable.Rows.Add(dr);
            i++;
            currentRow = sh.GetRow(i);
        }
        return dtExcelTable;
    }
    catch (Exception e)
    {
        throw;
    }
} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2015-09-04T09:19:37.643

您可以通过 NPOI 尝试这种简单的方法：

```
private DataTable GetDataTableFromExcel(String Path)
    {
        XSSFWorkbook wb;
        XSSFSheet sh;
        String Sheet_name;

        using (var fs = new FileStream(Path, FileMode.Open, FileAccess.Read))
        {
            wb = new XSSFWorkbook(fs);

               Sheet_name= wb.GetSheetAt(0).SheetName;  //get first sheet name
        }
        DataTable DT = new DataTable();
        DT.Rows.Clear();
        DT.Columns.Clear();

        // get sheet
        sh = (XSSFSheet)wb.GetSheet(Sheet_name);

        int i = 0;
        while (sh.GetRow(i) != null)
        {
            // add neccessary columns
            if (DT.Columns.Count < sh.GetRow(i).Cells.Count)
            {
                for (int j = 0; j < sh.GetRow(i).Cells.Count; j++)
                {
                    DT.Columns.Add("", typeof(string));
                }
            }

            // add row
            DT.Rows.Add();

            // write row value
            for (int j = 0; j < sh.GetRow(i).Cells.Count; j++)
            {
                var cell = sh.GetRow(i).GetCell(j);

                if (cell != null)
                {
                    // TODO: you can add more cell types capatibility, e. g. formula
                    switch (cell.CellType)
                    {
                        case NPOI.SS.UserModel.CellType.Numeric:
                            DT.Rows[i][j] = sh.GetRow(i).GetCell(j).NumericCellValue;
                            //dataGridView1[j, i].Value = sh.GetRow(i).GetCell(j).NumericCellValue;

                            break;
                        case NPOI.SS.UserModel.CellType.String:
                            DT.Rows[i][j] = sh.GetRow(i).GetCell(j).StringCellValue;

                            break;
                    }
                }
            }

            i++;
        }

        return DT;
    } 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-09-30T15:14:45.920

你可以通过这样做来完成你的任务。

```
using NPOI.SS.UserModel;
using NPOI.XSSF.UserModel;
using NPOI.Util.Collections;
using NPOI;
using System.Collections.Generic;
using NPOI.OpenXmlFormats.Spreadsheet;
using NPOI.HSSF.UserModel;
using NPOI.SS.Util;

public DataTable xlsxToDT(Stream str)
{
XSSFWorkbook hssfworkbook = new XSSFWorkbook(str);
ISheet sheet = hssfworkbook.GetSheetAt(0);
str.Close();

DataTable dt = new DataTable();
IRow headerRow = sheet.GetRow(0);
IEnumerator rows = sheet.GetRowEnumerator();

int colCount = headerRow.LastCellNum;
int rowCount = sheet.LastRowNum;

for (int c = 0; c < colCount; c++)
    dt.Columns.Add(headerRow.GetCell(c).ToString());

while (rows.MoveNext())
{
    IRow row = (XSSFRow)rows.Current;
    DataRow dr = dt.NewRow();

    for (int i = 0; i < colCount; i++)
    {
        ICell cell = row.GetCell(i);

        if (cell != null)
            dr[i] = cell.ToString();
    }
    dt.Rows.Add(dr);
}
return dt; 
```

}

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2018-11-14T12:33:10.990

我编辑了@Saeb Amini 代码以允许空白单元格。

```
IWorkbook workbook;
using (FileStream stream = new FileStream(excelFilePath, FileMode.Open, FileAccess.Read))
{
    workbook = new HSSFWorkbook(stream);
}

ISheet sheet = workbook.GetSheetAt(0);
DataTable dt = new DataTable(sheet.SheetName);

// write header row
IRow headerRow = sheet.GetRow(0);
foreach (ICell headerCell in headerRow)
{
    dt.Columns.Add(headerCell.ToString());
}

// write the rest
int rowIndex = 0;
foreach (IRow row in sheet)
{
     // skip header row
     if (rowIndex++ == 0) continue;

     // add row into datatable
     var cells = new List<ICell>();
     for (int i = 0; i < dt.Columns.Count; i++)
     {
          cells.Add(row.GetCell(i, MissingCellPolicy.CREATE_NULL_AS_BLANK));
     }

     // Columns formatted as DateTime will be printed as '01-Jul-2005', 
     // which can be converted to datetime in the SQL server.
     // select cast('01-Jul-2005' as DateTime).
     // In SQL Server we can convert DateTime to whatever string we want, for example
     // select convert(nvarchar(255), cast('01-Jul-2005' as datetime), 112) will print '20050701'.
     // http://www.sqlusa.com/bestpractices/datetimeconversion/
     dt.Rows.Add(cells.Select(c => c.ToString()).ToArray());

     // Datetimes also can be reformatted directly like this :
     // dt.Rows.Add(cells.Select(c =>
     //    c.CellType == CellType.Numeric && DateUtil.IsCellDateFormatted(c) 
     //        ? c.DateCellValue.ToString("yyyyMMdd") 
     //        : c.ToString()
     // ).ToArray());

}

//return dt; 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2015-10-31T13:53:50.767

NPOI 是读取 Excel 文件的绝佳且免费的方式，现在在版本 2 中，您可以读取 XLS 和 XLSX 文件类型。

1.  在他们的网站上获取最新版本的 NPOI： [https ://npoi.codeplex.com/](https://npoi.codeplex.com/)
2.  在您的项目中添加对以下文件的引用：NPOI.dll、NPOI.OOXML.dll 和 NPOI.OpenXml4Net.dll。
3.  添加以下Usings： using NPOI.SS.UserModel; 使用 NPOI.HSSF.UserModel；使用 NPOI.XSSF.UserModel；

现在下面的代码可以解决问题，注释是西班牙语，抱歉:-p

```
private DataTable Excel_To_DataTable(string pRutaArchivo, int pHojaIndex)
    {
        // --------------------------------- //
        /* REFERENCIAS:
         * NPOI.dll
         * NPOI.OOXML.dll
         * NPOI.OpenXml4Net.dll */
        // --------------------------------- //
        /* USING:
         * using NPOI.SS.UserModel;
         * using NPOI.HSSF.UserModel;
         * using NPOI.XSSF.UserModel; */
        // --------------------------------- //
        DataTable Tabla = null;
        try
        {
            if (System.IO.File.Exists(pRutaArchivo))
            {

                IWorkbook workbook = null;  //IWorkbook determina se es xls o xlsx              
                ISheet worksheet = null;
                string first_sheet_name = "";

                using (FileStream FS = new FileStream(pRutaArchivo, FileMode.Open, FileAccess.Read))
                {
                    workbook = WorkbookFactory.Create(FS); //Abre tanto XLS como XLSX
                    worksheet = workbook.GetSheetAt(pHojaIndex); //Obtener Hoja por indice
                    first_sheet_name = worksheet.SheetName;  //Obtener el nombre de la Hoja

                    Tabla = new DataTable(first_sheet_name);
                    Tabla.Rows.Clear();
                    Tabla.Columns.Clear();

                    // Leer Fila por fila desde la primera
                    for (int rowIndex = 0; rowIndex <= worksheet.LastRowNum; rowIndex++)
                    {
                        DataRow NewReg = null;
                        IRow row = worksheet.GetRow(rowIndex);
                        IRow row2 = null;

                        if (row != null) //null is when the row only contains empty cells 
                        {
                            if (rowIndex > 0) NewReg = Tabla.NewRow();

                            //Leer cada Columna de la fila
                            foreach (ICell cell in row.Cells)
                            {
                                object valorCell = null;
                                string cellType = "";

                                if (rowIndex == 0) //Asumo que la primera fila contiene los titlos:
                                {
                                    row2 = worksheet.GetRow(rowIndex + 1); //Si es la rimera fila, obtengo tambien la segunda para saber los tipos:
                                    ICell cell2 = row2.GetCell(cell.ColumnIndex);
                                    switch (cell2.CellType)
                                    {
                                        case CellType.Boolean: cellType = "System.Boolean"; break;
                                        case CellType.String: cellType = "System.String"; break;
                                        case CellType.Numeric:
                                            if (HSSFDateUtil.IsCellDateFormatted(cell2)) { cellType = "System.DateTime"; }
                                            else { cellType = "System.Double"; }        break;
                                        case CellType.Formula:
                                            switch (cell2.CachedFormulaResultType)
                                            {
                                                case CellType.Boolean: cellType = "System.Boolean"; break;
                                                case CellType.String: cellType = "System.String"; break;
                                                case CellType.Numeric:
                                                    if (HSSFDateUtil.IsCellDateFormatted(cell2)) { cellType = "System.DateTime"; }
                                                    else { cellType = "System.Double"; }    break;
                                            }
                                            break;
                                        default:
                                            cellType = "System.String"; break;
                                    }

                                    //Agregar los campos de la tabla:
                                    DataColumn codigo = new DataColumn(cell.StringCellValue, System.Type.GetType(cellType));
                                    Tabla.Columns.Add(codigo);
                                }
                                else
                                {
                                    //Las demas filas son registros:
                                    switch (cell.CellType)
                                    {
                                        case CellType.Blank:    valorCell = DBNull.Value; break;
                                        case CellType.Boolean:  valorCell = cell.BooleanCellValue; break;
                                        case CellType.String:   valorCell = cell.StringCellValue; break;
                                        case CellType.Numeric:
                                            if (HSSFDateUtil.IsCellDateFormatted(cell)) { valorCell = cell.DateCellValue; }
                                            else { valorCell = cell.NumericCellValue; } break;
                                        case CellType.Formula:
                                            switch (cell.CachedFormulaResultType)
                                            {
                                                case CellType.Blank:    valorCell = DBNull.Value; break;
                                                case CellType.String:   valorCell = cell.StringCellValue; break;
                                                case CellType.Boolean:  valorCell = cell.BooleanCellValue; break;
                                                case CellType.Numeric:
                                                    if (HSSFDateUtil.IsCellDateFormatted(cell)) { valorCell = cell.DateCellValue; }
                                                    else { valorCell = cell.NumericCellValue; }
                                                    break;
                                            }
                                            break;                                          
                                        default: valorCell = cell.StringCellValue; break;
                                    }
                                    NewReg[cell.ColumnIndex] = valorCell;
                                }
                            }
                        }
                        if (rowIndex > 0) Tabla.Rows.Add(NewReg);
                    }
                    Tabla.AcceptChanges();
                }
            }
            else
            {
                throw new Exception("ERROR 404: El archivo especificado NO existe.");
            }
        }
        catch (Exception ex)
        {
            throw ex;
        }
        return Tabla;
    } 
```

上面的代码假设工作表的第一行具有列名。该代码还确定每个单元格的数据类型，并尝试将其转换为 ADO 数据类型。空白单元格将转换为 null。

希望这可以帮助您和其他处于相同情况的人。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2014-05-20T04:12:42.330

您可以在 Toxy 项目中尝试 ToxySpreadsheet - [https://github.com/nissl-lab/toxy](https://github.com/nissl-lab/toxy)。ToxySpreadsheet.ToDataSet() 是你想要的。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2012-11-11T17:13:33.253

在 Codeplex 网站[的](http://npoi.codeplex.com/releases/view/49524)下载部分有`example package`- 一组 C# 示例。试试吧，如果你还没有。

这是最简单的例子——

```
using NPOI.HSSF.UserModel;
using NPOI.SS.UserModel;

//.....

private void button1_Click(object sender, EventArgs e)
{
    HSSFWorkbook hssfwb;
    using (FileStream file = new FileStream(@"c:\test.xls", FileMode.Open, FileAccess.Read))
    {
        hssfwb= new HSSFWorkbook(file);
    }

    ISheet sheet = hssfwb.GetSheet("Arkusz1");
    for (int row = 0; row <= sheet.LastRowNum; row++)
    {
        if (sheet.GetRow(row) != null) //null is when the row only contains empty cells 
        {
            MessageBox.Show(string.Format("Row {0} = {1}", row, sheet.GetRow(row).GetCell(0).StringCellValue));
        }
    }
} 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2018-11-15T16:03:08.740

基于@Sean 的 GREAT Answer 和[NPOI 示例](https://github.com/tonyqus/npoi/tree/master/examples)，我将方法写入`Convert all worksheets in xls file to DataSet`and `Convert DataSet back to xls file`：

```
 public static DataSet GetDataSetFromXls(string excelFilePath)
    {
        IWorkbook workbook;
        using (FileStream stream = new FileStream(excelFilePath, FileMode.Open, FileAccess.Read))
        {
            workbook = new HSSFWorkbook(stream);  //2003 xls
            //workbook = new XSSFWorkbook();  //2007 xlsx
        }

        DataSet ds = new DataSet();
        for (int i = 0; i < workbook.NumberOfSheets; i++)
        {
            ISheet sheet = workbook.GetSheetAt(i); // zero-based index of your target sheet
            DataTable dt = new DataTable(sheet.SheetName);

            // write header row
            IRow headerRow = sheet.GetRow(0);
            foreach (ICell headerCell in headerRow)
            {
                dt.Columns.Add(headerCell.ToString());
            }

            // write the rest
            int rowIndex = 0;
            foreach (IRow row in sheet)
            {
                // skip header row
                if (rowIndex++ == 0) continue;
                DataRow dataRow = dt.NewRow();
                dataRow.ItemArray = row.Cells.Select(c => c.ToString()).ToArray();
                dt.Rows.Add(dataRow);
            }

            ds.Tables.Add(dt);
        }

        return ds;
    }

    public static void SaveDataSetToXls(DataSet ds, string savedExcelFilePath)
    {
        //IWorkbook workbook = new XSSFWorkbook();
        IWorkbook workbook = new HSSFWorkbook();

        foreach (DataTable dt in ds.Tables)
        {
            ISheet sheet = workbook.CreateSheet(dt.TableName);

            var row0 = sheet.CreateRow(0);//header
            for (int j = 0; j < dt.Columns.Count; j++)
            {
                row0.CreateCell(j).SetCellValue(dt.Columns[j].ColumnName);
            }

            for (int i = 0; i < dt.Rows.Count; i++)//rest
            {
                var row = sheet.CreateRow(1+i);
                for (int j = 0; j < dt.Columns.Count; j++)
                    row.CreateCell(j).SetCellValue(dt.Rows[i][j].ToString());
            }
        }

        FileStream sw = File.Create(savedExcelFilePath);
        workbook.Write(sw);
        sw.Close();
    } 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2021-01-15T15:04:53.307

我知道我在这里有点晚了，但我认为这可能对其他人有所帮助

我使用 NPOI 包开发了一个 excel 实用程序，它可以

1.  只需获取您的数据表或集合
2.  并返回您的 excel，同时在 excel 中保持所有数据表/列表数据类型不变。

Github 代码仓库：[https ://github.com/ansaridawood/.NET-Generic-Excel-Export-Sample/tree/master/GenericExcelExport/ExcelExport](https://github.com/ansaridawood/.NET-Generic-Excel-Export-Sample/tree/master/GenericExcelExport/ExcelExport)

找代码解释，可以在这里找到： [https ://www.codeproject.com/Articles/1241654/Export-to-Excel-using-NPOI-Csharp-and-WEB-API](https://www.codeproject.com/Articles/1241654/Export-to-Excel-using-NPOI-Csharp-and-WEB-API)

它使用 NPOI DLL 并包含 2 个 cs 文件，然后你就可以开始了

以下是参考**AbstractDataExport.cs**的第一个文件：

```
using NPOI.SS.UserModel;
using NPOI.XSSF.UserModel;
using System;
using System.Collections.Generic;
using System.IO;
using System.Net;
using System.Net.Http;
using System.Net.Http.Headers;

namespace GenericExcelExport.ExcelExport
{
    public interface IAbstractDataExport
    {
        HttpResponseMessage Export(List exportData, string fileName, string sheetName);
    }

    public abstract class AbstractDataExport : IAbstractDataExport
    {
        protected string _sheetName;
        protected string _fileName;
        protected List _headers;
        protected List _type;
        protected IWorkbook _workbook;
        protected ISheet _sheet;
        private const string DefaultSheetName = "Sheet1";

        public HttpResponseMessage Export
              (List exportData, string fileName, string sheetName = DefaultSheetName)
        {
            _fileName = fileName;
            _sheetName = sheetName;

            _workbook = new XSSFWorkbook(); //Creating New Excel object
            _sheet = _workbook.CreateSheet(_sheetName); //Creating New Excel Sheet object

            var headerStyle = _workbook.CreateCellStyle(); //Formatting
            var headerFont = _workbook.CreateFont();
            headerFont.IsBold = true;
            headerStyle.SetFont(headerFont);

            WriteData(exportData); //your list object to NPOI excel conversion happens here

            //Header
            var header = _sheet.CreateRow(0);
            for (var i = 0; i < _headers.Count; i++)
            {
                var cell = header.CreateCell(i);
                cell.SetCellValue(_headers[i]);
                cell.CellStyle = headerStyle;
            }

            for (var i = 0; i < _headers.Count; i++)
            {
                _sheet.AutoSizeColumn(i);
            }

            using (var memoryStream = new MemoryStream()) //creating memoryStream
            {
                _workbook.Write(memoryStream);
                var response = new HttpResponseMessage(HttpStatusCode.OK)
                {
                    Content = new ByteArrayContent(memoryStream.ToArray())
                };

                response.Content.Headers.ContentType = new MediaTypeHeaderValue
                       ("application/vnd.openxmlformats-officedocument.spreadsheetml.sheet");
                response.Content.Headers.ContentDisposition = 
                       new ContentDispositionHeaderValue("attachment")
                {
                    FileName = $"{_fileName}_{DateTime.Now.ToString("yyyyMMddHHmmss")}.xlsx"
                };

                return response;
            }
        }

        //Generic Definition to handle all types of List
        public abstract void WriteData(List exportData);
    }
} 
```

这是第二个也是最后一个文件**AbstractDataExportBridge.cs**：

```
using NPOI.SS.UserModel;
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Text.RegularExpressions;

namespace GenericExcelExport.ExcelExport
{
    public class AbstractDataExportBridge : AbstractDataExport
    {
        public AbstractDataExportBridge()
        {
            _headers = new List<string>();
            _type = new List<string>();
        }

        public override void WriteData<T>(List<T> exportData)
        {
            PropertyDescriptorCollection properties = TypeDescriptor.GetProperties(typeof(T));

            DataTable table = new DataTable();

            foreach (PropertyDescriptor prop in properties)
            {
                var type = Nullable.GetUnderlyingType(prop.PropertyType) ?? prop.PropertyType;
                _type.Add(type.Name);
                table.Columns.Add(prop.Name, Nullable.GetUnderlyingType(prop.PropertyType) ?? 
                                  prop.PropertyType);
                string name = Regex.Replace(prop.Name, "([A-Z])", " $1").Trim(); //space separated 
                                                                           //name by caps for header
                _headers.Add(name);
            }

            foreach (T item in exportData)
            {
                DataRow row = table.NewRow();
                foreach (PropertyDescriptor prop in properties)
                    row[prop.Name] = prop.GetValue(item) ?? DBNull.Value;
                table.Rows.Add(row);
            }

            IRow sheetRow = null;

            for (int i = 0; i < table.Rows.Count; i++)
            {
                sheetRow = _sheet.CreateRow(i + 1);
                for (int j = 0; j < table.Columns.Count; j++)
                {
                    ICell Row1 = sheetRow.CreateCell(j);

                    string type = _type[j].ToLower();
                    var currentCellValue = table.Rows[i][j];

                    if (currentCellValue != null && 
                        !string.IsNullOrEmpty(Convert.ToString(currentCellValue)))
                    {
                        if (type == "string")
                        {
                            Row1.SetCellValue(Convert.ToString(currentCellValue));
                        }
                        else if (type == "int32")
                        {
                            Row1.SetCellValue(Convert.ToInt32(currentCellValue));
                        }
                        else if (type == "double")
                        {
                            Row1.SetCellValue(Convert.ToDouble(currentCellValue));
                        }
                    }
                    else
                    {
                        Row1.SetCellValue(string.Empty);
                    }
                }
            }
        }
    }
} 
```

有关详细说明，请参阅开头提供的链接。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2020-12-25T16:22:27.600

您可以将 nuget 包用于 NOPI

[读取Excel](https://www.nuget.org/packages/ReadExcel/)

基本用法：ExcelImportHelper.ReadExcel(bytes);

# javascript - 未捕获的类型错误：对象原型在 ember-1.0.0-pre.2 上只能是对象或 null

> ID：13333416
> 
> 赞同：7
> 
> 时间：2012-11-11T17:10:09.540
> 
> 标签：javascript, ember.js

我从 Ember 开始，只是按照本[教程](http://trek.github.com/)进行操作。我从 Ember.js web 下载了最后一个源代码，我有以下代码：

**HTML**

```
<!doctype html>
<html>
 <head>
   <script src="js/libs/jquery-1.7.2.min.js"></script>
   <script src="js/libs/ember-1.0.0-pre.2.min.js"></script>
   <script src="js/libs/handlebars-1.0.0.beta.6.js"></script>
   <script src="js/app.js"></script>
 </head>
 <script type="text/x-handlebars" data-template-name="application">
   Test
 </script>
</html> 
```

**应用程序.js**

```
 App = Em.Application.create();

   App.ApplicationView = Em.View.extend({
     templateName: 'application'
   });
   App.ApplicationController = Em.Controller.extend();

   App.Router = Em.Router.extend({
    root: Em.Route.extend({
      index: Em.Route.extend({
        route: '/'
      })
    })
  });

  App.initialize(); 
```

这似乎是一个非常简单的例子，但我看不到这两件事：

1）为什么余烬的来源给我这个错误：

```
Uncaught TypeError: Object prototype may only be an Object or null 
```

在 ember 代码的第 18 行。

2）如果我定义了模板，为什么我不断收到这个未捕获的错误：

```
Uncaught Error: <App.ApplicationView:ember143> - Unable to find template "application". 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-11T18:04:13.707

尝试将应用程序模板放在车把之前。

```
<!doctype html>
<html>
 <head>
   <script type="text/x-handlebars" data-template-name="application">
     Test
   </script>
   <script src="js/libs/jquery-1.7.2.min.js"></script>
   <script src="js/libs/handlebars-1.0.0.beta.6.js"></script>
   <script src="js/libs/ember-1.0.0-pre.2.min.js"></script>
   <script src="js/app.js"></script>
 </head>
</html> 
```

# android - Youtube iframe 中的黑屏（Android 应用程序）

> ID：13333421
> 
> 赞同：3
> 
> 时间：2012-11-11T17:10:40.703
> 
> 标签：android, cordova, webview, youtube

我正在创建一个 Phonegap Android 应用程序，我在 webview 中放置了一个 Youtube iframe。但是在播放视频时，只有声音有效并且屏幕保持黑色。

我找到了一个解决方案，但我似乎无法让它工作。我必须添加代码“getSettings().setPluginsEnabled(true);” 在 App.java 中。有谁知道如何实现此代码？

**应用程序.java**

```
package com.package.name;

import org.apache.cordova.DroidGap;

import android.os.Bundle;
import android.os.Handler;
import android.widget.LinearLayout;

import com.google.ads.AdRequest;
import com.google.ads.AdSize;
import com.google.ads.AdView;

public class App extends DroidGap {
private Handler mHandler = new Handler();
private AdView adView;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    super.loadUrl("file:///android_asset/www/index.html");

    mHandler.postDelayed(new Runnable() {
        public void run() {
            doAdMob();
        }
    }, 1000);
}

private void doAdMob() {
    adView = new AdView(this, AdSize.BANNER, "CODE");
    LinearLayout layout = super.root;
    layout.addView(adView);
    layout.setHorizontalGravity(android.view.Gravity.CENTER_HORIZONTAL);
    AdRequest request = new AdRequest();
    adView.loadAd(request);
}
} 
```

非常感谢您提前。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T18:50:36.323

在您的 onCreate 方法中，您需要添加以下行：

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    super.loadUrl("file:///android_asset/www/index.html");
    this.appView.getSettings().setPluginsEnabled(true);

    mHandler.postDelayed(new Runnable() {
        public void run() {
            doAdMob();
        }
    }, 1000);
} 
```

# xml - XML 架构无效 - [s4s-elt-invalid-content.1:]

> ID：13333422
> 
> 赞同：4
> 
> 时间：2012-11-11T17:10:48.400
> 
> 标签：xml, schema

我在验证我的 XML 架构时遇到问题。我的模式 kod：

```
<?xml version="1.0" encoding="utf-8"?> 
```

```
 <xsd:element name="colection">
            <xsd:complexType>
                <xsd:sequence>
                    <xsd:element name="author" type="TypAuthor" maxOccurs="1"/>
                    <xsd:element name="books" type="TypBooks"/>
                    <xsd:element name="films" type="TypFilms"/>
                    <xsd:element name="copyright" type="xsd:string"/>
                </xsd:sequence>
            </xsd:complexType>
        </xsd:element>

        <xsd:complexType name="TypAuthor">
            <xsd:sequence>
                <xsd:element name="name" type="xsd:string" maxOccurs="1"/>
                <xsd:element name="surname" type="xsd:string"/>
                <xsd:element name="gender" type="TypSex"/>
                <xsd:element name="age" type="xsd:integer"/>
                <xsd:element name="city" type="xsd:string"/>
                <xsd:element name="country" type="xsd:string"/>
                <xsd:element name="study" type="xsd:string"/>
                <xsd:element name="semester" type="xsd:integer"/>
                <xsd:element name="group" type="xsd:string"/>
            </xsd:sequence>
        </xsd:complexType>

        <xsd:simpleType name="TypSex">
            <xsd:restriction base="xsd:string">
                <xsd:enumeration value="male"/>
                <xsd:enumeration value="female"/>
            </xsd:restriction>
        </xsd:simpleType>

        <xsd:complexType name="TypBooks">
            <xsd:sequence>
                <xsd:element name="book" type="TypBook" minOccurs="5" maxOccurs="unbounded"/>
            </xsd:sequence>
        </xsd:complexType>

        <xsd:complexType name="TypBook">
            <xsd:attribute name="nr" type="TypNr" />
            <xsd:attribute name= "lang" type="TypLang"/>
            <xsd:sequence>
                <xsd:element name="title" type="xsd:string"/>
                <xsd:element name="author" type="TypAuthor2"/>
                <xsd:element name="genre" type="xsd:string"/>
                <xsd:element name="pages" type="xsd:integer"/>
                <xsd:element name="year" type="xsd:integer"/>
            </xsd:sequence>
        </xsd:complexType>

        <xsd:complexType name="TypAuthor2">
            <xsd:simpleContent>
                <xsd:extension base="xsd:string">
                        <xsd:attribute name="country" type="TypCountry2" use="required"/>
                </xsd:extension>
            </xsd:simpleContent>    
        </xsd:complexType>

        <xsd:simpleType name="TypCountry2">
            <xsd:restriction base="xsd:string">
                <xsd:enumeration value="USA"/>
                <xsd:enumeration value="PL"/>
                <xsd:enumeration value="UK"/>
                <xsd:enumeration value="FR"/>
            </xsd:restriction>
        </xsd:simpleType>

        <xsd:simpleType name="TypNr">
            <xsd:restriction base="xsd:integer">
                <xsd:maxInclusive value="5"/>
            </xsd:restriction>
        </xsd:simpleType>

        <xsd:simpleType name="TypLang">
            <xsd:restriction base="xsd:string">
                <xsd:enumeration value="pl"/>
                <xsd:enumeration value="en"/>
                <xsd:enumeration value="fr"/>
            </xsd:restriction>
        </xsd:simpleType>

        <xsd:complexType name="TypFilms">
            <xsd:sequence>
                <xsd:element name="film" type="TypFilm" minOccurs="5" maxOccurs="unbounded"/>
            </xsd:sequence>
        </xsd:complexType>

        <xsd:complexType name="TypFilm">
            <xsd:attribute name="nr" type="TypNr" />
            <xsd:attribute name= "lang" type="TypLang"/>
            <xsd:sequence>
                <xsd:element name="title" type="xsd:string"/>
                <xsd:element name="director" type="TypDirector"/>
                <xsd:element name="year" type="xsd:integer"/>
                <xsd:element name="genre" type="xsd:string"/>
                <xsd:element name="stars" type="xsd:string"/>
            </xsd:sequence>
        </xsd:complexType>
        <xsd:complexType name="TypDirector">
            <xsd:simpleContent>
                <xsd:extension base="xsd:string">
                        <xsd:attribute name="country" type="TypCountry2" use="required"/>
                </xsd:extension>
            </xsd:simpleContent>
        </xsd:complexType> 
```

我收到的错误消息是这样的：

**s4s-elt-invalid-content.1：“TypBook”的内容无效。元素 'complexContent' 无效、放错位置或过于频繁地出现。**

**s4s-elt-invalid-content.1：“TypFilm”的内容无效。元素 'complexContent' 无效、放错位置或过于频繁地出现。**

你有什么建议吗？我需要在晚上 11 点之前将此有效模式发送给我的教授。请帮忙！！

非常感谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-12T10:18:24.557

这是一个非常糟糕的错误消息，但正如拉尔森所说，属性必须在内容之后定义。

如果您在规范的散文中找不到这样的规则，它可能在模式文档的模式中，这是规范的规范部分。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-11T17:29:39.887

我认为你的问题是由于属性之前的序列，试试这个：我确实花了几分钟尝试谷歌这个规则的来源，但没有找到太多。但是，[`w3Shools complex type docs`](http://www.w3schools.com/schema/el_complextype.asp)语法最后是用属性指定的。虽然不是很明确。

```
<?xml version="1.0" encoding="utf-8"?>
<xsd:schema id="XMLSchema1"
    targetNamespace="http://tempuri.org/XMLSchema1.xsd"
    elementFormDefault="qualified"
    xmlns="http://tempuri.org/XMLSchema1.xsd"
    xmlns:mstns="http://tempuri.org/XMLSchema1.xsd"
    xmlns:xsd="http://www.w3.org/2001/XMLSchema"
>
  <xsd:element name="colection">
    <xsd:complexType>
      <xsd:sequence>
        <xsd:element name="author" type="TypAuthor" maxOccurs="1"/>
        <xsd:element name="books" type="TypBooks"/>
        <xsd:element name="films" type="TypFilms"/>
        <xsd:element name="copyright" type="xsd:string"/>
      </xsd:sequence>
    </xsd:complexType>
  </xsd:element>

  <xsd:complexType name="TypAuthor">
    <xsd:sequence>
      <xsd:element name="name" type="xsd:string" maxOccurs="1"/>
      <xsd:element name="surname" type="xsd:string"/>
      <xsd:element name="gender" type="TypSex"/>
      <xsd:element name="age" type="xsd:integer"/>
      <xsd:element name="city" type="xsd:string"/>
      <xsd:element name="country" type="xsd:string"/>
      <xsd:element name="study" type="xsd:string"/>
      <xsd:element name="semester" type="xsd:integer"/>
      <xsd:element name="group" type="xsd:string"/>
    </xsd:sequence>
  </xsd:complexType>

  <xsd:simpleType name="TypSex">
    <xsd:restriction base="xsd:string">
      <xsd:enumeration value="male"/>
      <xsd:enumeration value="female"/>
    </xsd:restriction>
  </xsd:simpleType>

  <xsd:complexType name="TypBooks">
    <xsd:sequence>
      <xsd:element name="book" type="TypBook" minOccurs="5" maxOccurs="unbounded"/>
    </xsd:sequence>
  </xsd:complexType>

  <xsd:complexType name="TypBook">
    <xsd:sequence>
      <xsd:element name="title" type="xsd:string"/>
      <xsd:element name="author" type="TypAuthor2"/>
      <xsd:element name="genre" type="xsd:string"/>
      <xsd:element name="pages" type="xsd:integer"/>
      <xsd:element name="year" type="xsd:integer"/>
    </xsd:sequence>
    <xsd:attribute name="nr" type="TypNr" />
    <xsd:attribute name= "lang" type="TypLang"/>
  </xsd:complexType>

  <xsd:complexType name="TypAuthor2">
    <xsd:simpleContent>
      <xsd:extension base="xsd:string">
        <xsd:attribute name="country" type="TypCountry2" use="required"/>
      </xsd:extension>
    </xsd:simpleContent>
  </xsd:complexType>

  <xsd:simpleType name="TypCountry2">
    <xsd:restriction base="xsd:string">
      <xsd:enumeration value="USA"/>
      <xsd:enumeration value="PL"/>
      <xsd:enumeration value="UK"/>
      <xsd:enumeration value="FR"/>
    </xsd:restriction>
  </xsd:simpleType>

  <xsd:simpleType name="TypNr">
    <xsd:restriction base="xsd:integer">
      <xsd:maxInclusive value="5"/>
    </xsd:restriction>
  </xsd:simpleType>

  <xsd:simpleType name="TypLang">
    <xsd:restriction base="xsd:string">
      <xsd:enumeration value="pl"/>
      <xsd:enumeration value="en"/>
      <xsd:enumeration value="fr"/>
    </xsd:restriction>
  </xsd:simpleType>

  <xsd:complexType name="TypFilms">
    <xsd:sequence>
      <xsd:element name="film" type="TypFilm" minOccurs="5" maxOccurs="unbounded"/>
    </xsd:sequence>
  </xsd:complexType>

  <xsd:complexType name="TypFilm">
    <xsd:sequence>
      <xsd:element name="title" type="xsd:string"/>
      <xsd:element name="director" type="TypDirector"/>
      <xsd:element name="year" type="xsd:integer"/>
      <xsd:element name="genre" type="xsd:string"/>
      <xsd:element name="stars" type="xsd:string"/>
    </xsd:sequence>
    <xsd:attribute name="nr" type="TypNr" />
    <xsd:attribute name= "lang" type="TypLang"/>
  </xsd:complexType>
  <xsd:complexType name="TypDirector">
    <xsd:simpleContent>
      <xsd:extension base="xsd:string">
        <xsd:attribute name="country" type="TypCountry2" use="required"/>
      </xsd:extension>
    </xsd:simpleContent>
  </xsd:complexType>
</xsd:schema> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-11T18:12:32.913

您可以更改定义 xsd 元素的顺序。例如，考虑以下场景

```
<xsd:complexType name="Element-A>
  <xsd:attribute name="attribute1" type="xsd:string" use="required" />
  <xsd:attribute name="attribute2" type="xsd:int" use="required" />
</xsd:complexType> 
```

现在，在这种情况下，如果要添加属性，则只能在开头添加。此外，您必须用属性包围它。因此，上面的代码将转换为以下内容：

```
<xsd:complexType name="Element-A>
    <xsd:sequence>
      <xsd:element name="element1" type="f1:elementDefinition"  minOccurs="0" maxOccurs="unbounded"/>
    </xsd:sequence>
   <xsd:attribute name="attribute1" type="xsd:string" use="required"/>
   <xsd:attribute name="attribute2" type="xsd:int" use="required"/>
</xsd:complexType>

<xsd:complexType name="elementDefinition">
   <xsd:attribute name="id" type="xsd:string" />
</xsd:complexType> 
```

上面的代码确保您的“Element-A”中有一个类型为“elementDefinition”的列表，该列表由 xsd 中的 element1 引用。

# oracle - 使用 lag() 进行计算

> ID：13333424
> 
> 赞同：0
> 
> 时间：2012-11-11T17:11:02.010
> 
> 标签：oracle, plsql

我需要帮助来根据每月获取的当前值计算电表的消耗

我有以下表格：

地址(PostCode int, Street varchar)
Meter(MeterID int, InstallationDate date, PostCode int)
Reading(ReadNo int, ReadDate date, ReadValue int, MeterID int, ReaderID int)

我尝试了以下方法：

```
Select ReadDate, 
       ReadValue AS CurrentValue, 
       lag(readvalue, 1, 0) OVER (ORDER BY READVALUE) AS PreviousValue, 
       readvalue - lag(readvalue, 1, 0) OVER (ORDER BY READVALUE) AS Consumption
 From Reading R, 
      Meter M, 
      Address A 
Where R.MeterID = M.MeterID
  AND A.PostCode = M.PostCode AND A.PostCode = '1005'
Order By ReadDate; 
```

当地址的电表被新电表替换时会出现问题，有人可以帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T17:37:14.087

我相信很多人都会感谢你！

通过`ORDER BY READVALUE`在 LAG 中使用，您计算的是下一个*最大值*（默认排序顺序是升序），而不是最后一个值。这应该是

```
lag(readvalue, 1, 0) over (order by readdate desc) 
```

获取先前读取的值。

您的地址表中没有足够的信息来确定仪表是否位于同一地址。没有建筑物编号等。因此，您的问题的正确答案是社会性的，与数据库无关。如果有人有两个仪表，则发出两张账单。

但是，假设地址表*确实*有足够的信息以便能够唯一地标识一个地址，即每个邮政编码是一个单独的建筑物，那么您已经在做正确的事情，尽管我会重新组织您的查询如下（并停止引用整数）。

```
select r.readdate
     , r.readvalue - lag(r.readvalue, 1, 0) over ( order by readdate desc )
  from address a
  join meter m 
    on a.postcode = m.postcode
  join reading r
    on m.meterid = r.meterid
 where a.postcode = 1005
 order by readdate desc 
```

您正在选择邮政编码处的每个仪表，然后选择所有这些仪表的每个读数。如果在读数之间安装了新仪表，那就没问题了。

这似乎不太可能奏效；应该有前一个仪表的最终读数，否则`readvalue`将高于该值的滞后，这使您回到两个账单的情况。或者，您需要一种在数据库中显示账单何时“最终”的方法。

要获取最新值，只需将其全部包装在子选择中并选择第一行：

```
select * from ( <above query> ) where rownum < 2 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-11T18:24:12.263

您的模式是否不将计量（服务）与场所相关联？如果您使用的是商业客户信息系统，它们都会这样做并要求使用它来生成账单。有一个服务表，每个服务都位于一个场所。邮寄地址可能与房屋相同，也可能不同。邮寄地址与客户相关联，例如：一家连锁餐厅有一个主办公室和 20 家餐厅。他们在总公司收到账单，所以所有的邮寄地址都是一样的，服务的 20 个物理地址可能非常不同。

如果您为此推出了自己的架构，则需要考虑公用事业计费的实际运作方式。即使这只是一个玩具模型。

在过去的 30 年里，我在很多系统上都这样做了。它们都像上面那样工作。

# facebook - Facebook 的免费 SSL

> ID：13333427
> 
> 赞同：0
> 
> 时间：2012-11-11T17:11:42.417
> 
> 标签：facebook, ssh, securesocial

这听起来像重复，但我认为不是。如您所知，Facebook 在将您的应用程序注册到开发人员页面时需要安全的 https url。我是一名新手开发人员，我不想支付 SSL 证书。有一些网站可以免费 *使用（social-server.com、phpfogapp.com、fbssl.co）* 。然而，他们现在都没有工作。有没有免费的方法来获取安全的 url。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T16:56:04.987

您不需要在开发模式下使用 SSL。我仅在 HTTP 中将 SecureSocial 与 Facebook 一起使用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-11T17:28:27.570

您可以尝试将您的应用程序托管在像 Heroku 这样由 SSL 提供支持的免费托管中 - [http://www.heroku.com/](http://www.heroku.com/)

# ios - 模态 UINavigationController - 我无法停止旋转

> ID：13333429
> 
> 赞同：4
> 
> 时间：2012-11-11T17:11:53.163
> 
> 标签：ios, xcode

我正在使用情节提要，并且在 UITabBarController 中嵌入了 UINavigationController。我推送一个视图控制器，然后从这个视图控制器我呈现一个带有 UIViewController 的 MODAL UINavigationController。

问题是，当我在模态视图之前的所有视图都不能旋转时，模态视图控制器可以旋转。如何停止允许任何旋转的模态导航控制器？

我试过添加：

```
-(NSUInteger)supportedInterfaceOrientations
{
    return UIInterfaceOrientationMaskPortrait;
} 
```

和

```
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    return (interfaceOrientation == UIInterfaceOrientationPortrait);
} 
```

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-11T19:09:58.097

尝试分类 UINavigationController

```
@implementation UINavigationController (Rotation_IOS6)

-(BOOL)shouldAutorotate
{
    return [[self.viewControllers lastObject] shouldAutorotate];
}

-(NSUInteger)supportedInterfaceOrientations
{
    return [[self.viewControllers lastObject] supportedInterfaceOrientations];
}

- (UIInterfaceOrientation)preferredInterfaceOrientationForPresentation
{
    return [[self.viewControllers lastObject] preferredInterfaceOrientationForPresentation];
} 
```

# php - 如何从 preg_match 输出中只删除真正的重复项？

> ID：13333431
> 
> 赞同：0
> 
> 时间：2012-11-11T17:12:03.537
> 
> 标签：php, arrays, duplicates, preg-match

是的，我知道`array_unique`功能，但问题是匹配项在我的搜索词中可能有合法的重复项，例如：

```
$str = "fruit1: banana, fruit2: orange, fruit3: banana, fruit4: apple, fruit5: banana";
preg_match("@fruit1: (?<fruit1>\w+), fruit2: orange, fruit3: (banana), fruit4: (?<fruit4>apple), fruit5: (banana)@",$str,$match);
array_shift($match); // I dont need whole match
print_r($match); 
```

输出是：

```
Array
(
    [fruit1] => banana
    [0] => banana
    [1] => banana
    [fruit4] => apple
    [2] => apple
    [3] => banana
) 
```

所以唯一真正重复的键是 [0] 和 [2] 但`array_unique`给出：

```
Array
(
    [fruit1] => banana
    [fruit4] => apple
) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-01-26T19:41:51.520

这是我对您的问题的解决方案：

```
unset($matches[0]);
$matches = array_unique($matches); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-24T18:31:18.087

我自己找到了，解决方案是一个删除后续键的while循环，它所在的键不是数字：

```
while (next($match) !== false) {
  if (!is_int(key($match))) {
    next($match);
    unset($m[key($match)]);
  }
}
reset($match); 
```

# c - 使用 gsl_multiroot_fsolver 的错误

> ID：13333440
> 
> 赞同：1
> 
> 时间：2012-11-11T17:13:04.750
> 
> 标签：c, multidimensional-array, numerical, gsl, equation-solving

我是一个非常糟糕的程序员，所以要小心我犯了一个非常愚蠢的错误的可能性很大。我正在编写 C 并且使用**gsl_multiroot_fsolver_hybrid**错误，任何帮助都会非常有用！

我的代码包含以下两个功能：

```
/* ---  --- */
int quasilognormal_f (const gsl_vector * x, void *params,
               gsl_vector * f)
 {

   const double x0 = gsl_vector_get (x, 0);
   const double x1 = gsl_vector_get (x, 1);
   const double x2 = gsl_vector_get (x, 2);

   qparams->N =x0;
   qparams->A =x1;
   qparams->S =x2;
                printf("INNER POINT 1 -- Attention!\n"); 
                printf("N,A,S = %e %e %e \n",
                    x0, x1, x2);
   const double y0 = norm_quasilognormal(qparams) - 1.0;
   //const double y0 = 0;
                    printf("INNER POINT 2\n"); 
   const double y1 = mean_quasilognormal(qparams) - 0.0;
   //const double y1 =0;
                     printf("INNER POINT 3\n"); 
   const double y2 = var_quasilognormal(qparams) - kappa_var(gcosmo-> theta);
                     printf("INNER POINT 4\n");

   gsl_vector_set (f, 0, y0);
   gsl_vector_set (f, 1, y1);
   gsl_vector_set (f, 2, y2);

   return GSL_SUCCESS;
 }

int COMPUTE_QUASILOGNORMAL_PARAMETERS()
 {

 gsl_vector * root;
 const gsl_multiroot_fsolver_type *T;
 gsl_multiroot_fsolver *s;

   int status;
   size_t i, iter = 0;

   const size_t n = 3;

   gsl_multiroot_function F;

F.f = &quasilognormal_f;
F.params = NULL;
F.n = 3;

   double x_init[3] = {1.0, 0.0,gcosmo->ausgelagertes_lognormal_sigma};
   gsl_vector *x = gsl_vector_alloc (n);

   gsl_vector_set (x, 0, x_init[0]);
   gsl_vector_set (x, 1, x_init[1]);
   gsl_vector_set (x, 2, x_init[2]);

   T = gsl_multiroot_fsolver_hybrid;
   s = gsl_multiroot_fsolver_alloc (T, 3);

   gsl_multiroot_fsolver_set (s, &F, x);
   printf("THE SOLVER WAS SET!\n");
   do
     {
       iter++;
            printf("ABOUT TO ITERATE SOLVER\n");
                        printf("iter = %i\n",
                    iter);

                printf("x_init = %e %e %e \n",
                    x_init[0], x_init[1], x_init[2]);

                    printf("N,A,S = %e %e %e \n",
                    root[0], root[1], root[2]);
       status = gsl_multiroot_fsolver_iterate (s);

                printf("THE SOLVER WAS ITERATED\n");
                        printf("iter = %i\n",
                    iter);

                printf("x_init = %e %e %e \n",
                    x_init[0], x_init[1], x_init[2]);

                    printf("N,A,S = %e %e %e \n",
                    root[0], root[1], root[2]);
       if (status)   /* check if solver is stuck */
         break;

       status =
         gsl_multiroot_test_residual (s->f, 1e-7);
     }
   while (status == GSL_CONTINUE && iter < 1000);

   printf ("status = %s\n", gsl_strerror (status));

          root = gsl_multiroot_fsolver_root(s);

          printf("x = % .3e \n",
                root[0], root[1], root[2]);

   gsl_multiroot_fsolver_free (s);
   gsl_vector_free (x);
   return 0;
 }     
/* ---  --- */ 
```

函数**int COMPUTE_QUASILOGNORMAL_PARAMETERS应该求解在****int quasilognormal_f**中定义的三个方程组。这会出错，因为一旦第二次 (iter ==1) 迭代开始，参数 N、A 和 S在**int quasilognormal_f中就是****NAN**。这是我从程序输出中得出的结论：

 **```
INNER POINT 1 -- Attention!
N,A,S = 1.000000e+00 0.000000e+00 2.071317e-01 
INNER POINT 2
INNER POINT 3
INNER POINT 4
INNER POINT 1 -- Attention!
N,A,S = 1.000000e+00 0.000000e+00 2.071317e-01 
INNER POINT 2
INNER POINT 3
INNER POINT 4
INNER POINT 1 -- Attention!
N,A,S = 1.000000e+00 1.490116e-08 2.071317e-01 
INNER POINT 2
INNER POINT 3
INNER POINT 4
INNER POINT 1 -- Attention!
N,A,S = 1.000000e+00 0.000000e+00 2.071318e-01 
INNER POINT 2
INNER POINT 3
INNER POINT 4
THE SOLVER WAS SET!
ABOUT TO ITERATE SOLVER
iter = 1
x_init = 1.000000e+00 0.000000e+00 2.071317e-01 
N,A,S = 1.000000e+00 0.000000e+00 2.071317e-01 
INNER POINT 1 -- Attention!
N,A,S = nan nan nan 
```

我不知道该怎么做，因为求解器对我来说是一个黑匣子，我尝试按照 GSL 手册进行操作。**

# c++ - 在类中使用向量

> ID：13333441
> 
> 赞同：-3
> 
> 时间：2012-11-11T17:13:05.877
> 
> 标签：c++, vector

我尝试实现一个堆类，但我无法在其中使用向量。

```
#include <vector>

template <typename T>
class Heap {

public:
    Heap() {
    current_size = 0;
    }
private:
    int current_size;
    std::vector<T> array;
}; 
```

当我尝试运行该程序时，它会崩溃。“project2.exe 已停止工作。”

编辑 ：

主功能 ：

```
int main(int argc,char *argv[]) {

    Heap<int> events;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T18:25:15.177

`"project2.exe has stopped working."`是一个模糊的错误，但肯定会在运行时发生。这对您或您的程序的用户没有帮助，因此您需要实现更好的错误处理。

使用向量时，运行时错误通常来自错误的分配（`std::bad_alloc`异常）和访问向量中不存在的元素（`std::out_of_range`异常）。捕获这些异常以防止您的程序崩溃、内存泄漏和显示`"project2.exe has stopped working."`错误消息。

您可以通过在 main 函数中放置一个 try-catch 块来捕获程序中的所有异常：

```
int main(int argc, char *argv[])
{
    try
    {
        // put all your code here
        Heap<int> events;
    }
    catch (const std::exception& x)
    {
        // all std exceptions are caught here
        std::cerr << x.what() << '\n';
    }
} 
```

如果您的代码包含`vector[subscript]`，则不会引发`std::out_of_range`异常。如果您不需要对性能至关重要，请将其替换`vector.at(subscript)`为抛出异常。

请记住，错误处理不会解决问题，但可以为您提供关键提示，从而导致解决方案。此外，您应该考虑使用调试器。他们会告诉你哪一行代码导致程序停止工作。

# c++ - 带有运算符“> >”的typedef是什么意思？

> ID：13333442
> 
> 赞同：0
> 
> 时间：2012-11-11T17:13:10.070
> 
> 标签：c++, templates

C++ 中的这条语句是什么意思。我是通过阅读有关 Typelists 的。

我不明白运算符“>”在类型列表中代表什么？到目前为止，我从未在 C++ 模板中使用过这个？

```
template 
struct typelist
{
    typedef H head;
    typedef T tail;
};

typedef typelist > >
    floating_point_types; 
```

感谢您的一些简短解释！¿ 这是可变参数模板吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-11T17:25:25.790

代码片段看起来不对。从名称和上下文来看，我*猜*它应该看起来像这样：

```
template <typename H, typename T>
struct typelist
{
    typedef H head;
    typedef T tail;
};

typedef typelist<float, typelist<double, long double> >
    floating_point_types; 
```

原始代码就像粘贴到 HTML 文档中一样，因此删除了 '<...>' 序列。

当然，对于 C++ 2011，我们不需要做这样的事情。我们可以只使用可变参数模板：

```
template <typename... T> struct typelist {};

typedef typelist<float, double, long double> floating_point_types; 
```

# asp.net - 服务不可用 HTTP 错误 503。服务不可用。应用程序池已停止

> ID：13333443
> 
> 赞同：1
> 
> 时间：2012-11-11T17:13:14.437
> 
> 标签：asp.net, iis-7.5, application-pool, http-status-code-503

我正在使用 IIS8.0 运行 Windows 8

当我打开浏览器访问本地站点实例时收到此错误：
服务不可用 HTTP 错误 503。服务不可用。

收到错误消息后，应用程序池 ASP.NET v4.0 和 .NET v4.5 将停止。

检查 IIS 事件日志后，我看到：
警告：无法找到配置部分“system.serviceModel/serviceHostingEnvironment”的架构。此部分将被忽略。
警告：找不到配置部分“system.serviceModel/behaviors”的架构。此部分将被忽略。
警告：找不到配置部分“system.web.extensions/scripting/webServices/jsonSerialization”的架构。此部分将被忽略。
错误：发生错误：无法添加类型为“add”且唯一键属性“key”设置为“DefaultLanguage”的重复集合条目

对于上述所有事件，显示以下属性：
USER: MARK-PC\Mark
SOURCE: IIS-Configuration

我检查了 C:\Windows\System32\inetsrv\config\applicationHost.config 但在那里找不到条目“DefaultLanguage”。

我的 web.config 看起来像这样：

```
<?xml version="1.0"?>
<configuration>
    <configSections>
        <sectionGroup name="system.web.extensions" type="System.Web.Configuration.SystemWebExtensionsSectionGroup, System.Web.Extensions, Version=1.0.61025.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35">
        <sectionGroup name="scripting" type="System.Web.Configuration.ScriptingSectionGroup, System.Web.Extensions, Version=1.0.61025.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35">
            <sectionGroup name="webServices" type="System.Web.Configuration.ScriptingWebServicesSectionGroup, System.Web.Extensions, Version=1.0.61025.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35">
            </sectionGroup>
        </sectionGroup>
    </sectionGroup>
</configSections>

<appSettings>
    <clear/>
    <add key="DefaultLanguage" value="nl" />
... 
```

我还在事件查看器（本地）\Windows 日志\应用程序中找到以下行：“模块 DLL C:\WINDOWS\System32\inetsrv\compstat.dll 加载失败。数据是错误。”

我检查了 \inetsrv 文件夹中没有 compstat.dll 文件。显然这是用于静态压缩，但不知道我是否启用了此功能或如何安装文件！

然后我检查了启动了哪些工作进程（按照此处的说明操作：[http](http://technet.microsoft.com/en-us/library/cc735182(v=WS.10).aspx) ://technet.microsoft.com/en-us/library/cc735182(v=WS.10).aspx ）：
- 单击开始，单击控制面板，然后然后单击管理工具。
- 右键单击​​ Internet 信息服务 (IIS) 管理器并选择以管理员身份运行。
- 在“连接”窗格中，选择计算机名称。
- 在功能视图中，在功能名称列标题下，双击工作进程管理功能。将出现当前活动的应用程序池和工作进程的列表。
- 如果工作进程正在运行，工作进程的状态列将指示正在运行。

我在这里看不到任何正在运行的进程。

上述情况我能做些什么？

# ios - 如何将 NSMutableArray 的元素放入 NSURL？

> ID：13333445
> 
> 赞同：0
> 
> 时间：2012-11-11T17:13:19.540
> 
> 标签：ios, nsmutablearray, html-parsing, afnetworking, xcode4.4

> **可能重复：**
> [从 URL iphone sdk 将图像加载到 tableView](https://stackoverflow.com/questions/7565123/load-image-to-a-tableview-from-url-iphone-sdk)

如何将 NSMutableArray 的元素放在图像的 url 中？

NSMutableArray 在 ViewDidLoad 函数中创建。我敢肯定，这个数组一切正常，因为我 NSLog 它并且它很好。

我也尝试过这样的事情

```
NSString* myString;
myString = [data separatedWithString:@" , "]; 
```

然后用这些字符串初始化图像的 url。

先感谢您！！！

这是代码的一部分：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
    {
        static NSString *cellID = @"LinkID";

        UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:cellID];

        if (cell == nil) {
            cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:cellID];
        }

        NSData *n = [self.data objectAtIndex:indexPath.row];

        NSURL *someUrl = here I have to put the url of the images

        [cell.imageView setImageWithURL:someUrl placeholderImage:[UIImage imageNamed:@"placeholder"]];

        cell.textLabel.text = [n description];

        return cell;

    } 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-11-11T17:30:29.920

尝试这个：

```
NSEnumerator* e = [arrayInstance objectEnumerator];
NSURL *someUrl;
while (someUrl = [e nextObject]) {
   // do your thing here with someUrl
} 
```

# scala - 是否可以在 Scala 中使用带有命名参数的名称和值的 Map[String,Any]？

> ID：13333459
> 
> 赞同：6
> 
> 时间：2012-11-11T17:14:46.337
> 
> 标签：scala

我正在为 REST Web 服务编写一个包装器，并且我希望拥有强类型的 Scala API。

以下是我目前正在做的事情：

```
def getMentions(count: Option[Int] = None,
                sinceID: Option[TweetID] = None,
                maxID: Option[TweetID] = None,
                trimUser: Option[Boolean] = None,
                contributorDetails: Option[Boolean] = None,
                includeEntities: Option[Boolean] = None) : List[Tweet] = {
val parameters = Map("count" -> count,
                     "since_id" -> sinceID,
                     "max_id" -> maxID,
                     "trim_user" -> trimUser,
                     "contributor_details" -> contributorDetails,
                     "include_entities" -> includeEntities)
/* 
 * Convert parameters, which is a Map[String,Any] to a Map[String,String]
 * (Removing Nones) and pass it to an object in charge of generating the request.
 */
...
} 
```

这种方法是有效的，但它需要我手动生成`parameters`地图。如果我能够访问表示参数及其值的 Map，那么我所做的将会更加清晰。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-11T21:40:12.040

你可以通过运行时反射来做到这一点，我相信你会得到告诉你如何做的答案，如果你想要的话，但这实际上是[Scala 2.10 的宏的](http://scalamacros.org/)一个很好的用例，所以就这样吧。首先假设我们有一个名为的文件`ParamMapMaker.scala`：

```
object ParamMapMaker {
  def paramMap: Map[String, Any] = macro paramMapImpl

  def paramMapImpl(c: scala.reflect.macros.Context) = {
    import c.universe._

    val params = c.enclosingMethod match {
      case DefDef(_, _, _, ps :: Nil, _, _) =>
        ps.map(p =>
          reify((
            c.Expr[String](Literal(Constant(p.name.decoded))).splice,
            c.Expr[Any](Ident(p.symbol)).splice
          )).tree
        )
      case _ => c.abort(c.enclosingPosition, "Can't call paramMap here!")
    }

    c.Expr[Map[String, Any]](Apply(Select(Ident("Map"), "apply"), params))
  }
} 
```

我将把蛇形外壳作为对读者的（简单）练习。

我们还有一个测试文件（名为`Test.scala`）：

```
object Test extends App {
  def foo(hello: String, answer: Int) = ParamMapMaker.paramMap

  println(foo("world", 42))
} 
```

现在我们编译这两个：

```
scalac -language:experimental.macros ParamMapMaker.scala
scalac Test.scala 
```

当我们运行时，`Test`我们会得到以下信息：

```
Map(hello -> world, answer -> 42) 
```

有趣的是，没有运行时反射的开销。如果我们用 编译测试文件，我们会看到在编译时`-Ymacro-debug-verbose`为 的主体生成了以下代码（实际上） ：`foo`

```
Map.apply[String, Any](
  scala.Tuple2.apply[String, String]("hello", hello),
  scala.Tuple2.apply[String, Int]("answer", answer)
) 
```

完全符合我们的预期。

# javascript - 将图像调用 JQuery 转换为 iFrame 调用

> ID：13333463
> 
> 赞同：0
> 
> 时间：2012-11-11T17:15:12.140
> 
> 标签：javascript, jquery, iframe

我刚刚购买了这个模板： http: [//ferdiaobrien.com/template/](http://ferdiaobrien.com/template/)

它可以做我需要的一切，除了一个小问题。任何 jQuery 专家都可以告诉我如何更改调用主页（以及其他执行相同操作的页面）上较大图像的函数，以便它调用 iFrame？这样我就可以显示我喜欢的任何内容，而不仅仅是图像。

我相当确定这是处理这一切的文件，但 javascript 对我来说都是希腊语：http: [//ferdiaobrien.com/template/js/dynamicpage.js](http://ferdiaobrien.com/template/js/dynamicpage.js)

因此，为了让每个与我不同，知道他们在用 jQuery 做什么的人都明白这一点，我希望能够制作一个像这样的列表：

```
<ul class="thumbs">
    <li><a href="frames/frame1.php"><img src="images/photo/tfile_small_1_1.jpg" alt="" title=""></a></li>
</ul> 
```

而不是我从模板中复制和粘贴的当前格式：

```
<ul class="thumbs">
    <li><a href="images/photo/tfile_gall_1_1.jpg"><img src="images/photo/tfile_small_1_1.jpg" alt="" title=""></a></li>
</ul> 
```

并让它显示 frame1.php 的内容，而不是 tfile_gall_1_1.jpg，等等。

我认为这是加载第一张图片的功能：

```
initGallery =
    function(){
        var $gal = $('#gallery'),
            img_link = $gal.find('.thumbs li:first-child').children('a').attr("href");

        $gal.find('.thumbs li:first-child').addClass("current").find('img').fadeTo('500', 0);

        $loading.show();

        _img=$('<img class="big_img">')
        _img.css({left:"100px", top:"30px", opacity:0}).load(
            function(){
                $loading.hide();
                $gal.prepend(this);
                $(this).animate({left:"17px", top:0, opacity:1}, 500);
            })
            .attr({src:img_link});

        $gal.children('.gallery_nav').tinycarousel({ axis: 'y'});

        $gal.find("ul.thumbs li").each(
            function(){
                var thumbUrl = $(this).find("img").attr("src");
                $(this).children().css({'background' : 'url(' + thumbUrl + ') no-repeat right top'});
            }
        );

        $gal.hover(
            function(){
                $('.gallery_nav', this).stop().animate({right:0}, 'fast')
            },
            function(){
                $('.gallery_nav', this).stop().animate({right:"-164px"}, 'fast')
            }
        );
    }; 
```

这是后续图像的一个：

```
$mainContent.delegate("#gallery .thumbs a", "click", function(){

    if($(this).parent().is(".current")){
        return false
    }
    else {
    $(this).parent().addClass("current").find("img").css({opacity:0}).parent().parent().siblings(".current").removeClass("current").find("img").css({opacity:1});
        var img_link = $(this).attr("href");
        var $gal = $('#gallery');
        $loading.show();
        $gal.children('.big_img').animate({left:"-40px", top:"40px", opacity:0}, 500 , function(){
            $(this).remove()
        });

        _img=$('<img class="big_img">')
        _img.css({left:"100px", top:"30px", opacity:0}).load(
            function(){
                $loading.hide();
                $gal.prepend(this);
                $(this).animate({left:"17px", top:0, opacity:1}, 500);
            })
            .attr({src:img_link});

            return false;
        }
    }); 
```

但是当我改变

```
_img=$('<img class="big_img">') 
```

至

```
_img=$('<iframe class="big_img"></iframe>') 
```

它拒绝生成 HTML。这似乎与此有关：[将预加载 img 转换为 iframe](https://stackoverflow.com/questions/7390666/convert-preload-img-to-iframe?rq=1) ，但我无法理解它。

提前致谢

**更新：** 所以我已经将问题追踪到这里：http: [//jquery-howto.blogspot.ie/2010/02/dynamically-create-iframe-with-jquery.html](http://jquery-howto.blogspot.ie/2010/02/dynamically-create-iframe-with-jquery.html)

我曾尝试将 append() 函数添加到代码中，但它似乎进入了生成 iframe 的无限循环，然后再次生成它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T00:14:08.127

Ok, so the solution was to comment out the two excerpts that control the image (listed in question) and then add the following to a new file:

```
function loadIframe(iframeName, url) {
    var $iframe = $('#' + iframeName);
    if ($iframe.length) {
        $iframe.attr('src', url);
        return false;
    }
    return true;
 } 
```

set up an initial iframe such as:

```
<iframe src="" width="630" height="420" frameborder="0" webkitAllowFullScreen mozallowfullscreen allowFullScreen name="ifrm" id="ifrm"></iframe> 
```

and then in the menu add onClicks like so:

```
<ul class="thumbs">
    <li><a href="" onClick="return loadIframe('ifrm', this.href);"><img src="img/photo/" alt="" title=""></a></li> 
```

# java - KeyAdapter、awt、java 上的 swing 出现运行时错误。帮助发现错误

> ID：13333467
> 
> 赞同：0
> 
> 时间：2012-11-11T17:15:37.007
> 
> 标签：java, swing, awt

你好我写了一些代码我虽然它会工作但它编译并且它甚至不会抛出异常或任何东西。它还创建了打开的图标，但我点击它并没有做任何事情请需要帮助才能知道我做错了什么。继承人的类的代码：

```
package practicagraficos8;
import java.awt.*;
import java.awt.event.*;
import javax.swing.*;

public class ventanatexto {
   public JFrame ventana;
   public String texto;
    ventanatexto(){
    JFrame.setDefaultLookAndFeelDecorated(true);
    texto="";
    ventana= new JFrame("teclado");
    panel1 panel= new panel1();
    ventana.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    ventana.add(panel);
     ventana.setVisible(true);
    ventana.addKeyListener(new handler());

    }

    public class panel1 extends JPanel {

        @Override
    public void paint(Graphics g){
        super.paint(g);
    Dimension dim= getSize();
    g.clearRect(0, 0, dim.width, dim.height);
    g.drawString(texto, WIDTH, WIDTH);
    };

}
    class handler extends KeyAdapter{
        @Override
    public void keyPressed(KeyEvent k){
    char tecla= k.getKeyChar();
    switch(tecla){

        case 127:texto="";
    break;
        case 8: if(texto.length()>0){texto=texto.substring(0, texto.length()-1);}
            break;
        default:
            if (texto.length()<15){texto+=tecla;}

    }
    ventana.repaint();
    }

    }} 
```

这是我的主要内容：

```
package practicagraficos8;

public class Practicagraficos8 {

    public static void main(String[] args) {

        ventanatexto prueba= new ventanatexto();
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-11T18:13:04.303

[如此处](https://stackoverflow.com/a/11924118/230513)所示，“`drawString()`期望坐标代表 的[基线](http://docs.oracle.com/javase/6/docs/api/java/awt/FontMetrics.html)。`String`”

```
FontMetrics fm = g.getFontMetrics();
g.drawString(texto, 0, fm.getAscent()); 
```

![文塔纳](../Images/28c5f58ed366154da914c193c87e5d57.png)

此外，

*   用于`JTextComponent`可编辑文本。

*   使用[键绑定](http://docs.oracle.com/javase/tutorial/uiswing/misc/keybinding.html)，而不是`KeyListener`.

*   用`pack()`在附件上`Window`。

*   “Swing 程序应该覆盖`paintComponent()`而不是覆盖`paint()`。”—<a href="http://www.oracle.com/technetwork/java/painting-140037.html#callbacks" rel="nofollow noreferrer">*在 AWT 和 Swing 中绘画: 绘画方法*。

*   Swing GUI 对象应该*只*在[事件分派线程](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/initial.html)上构建和操作。

*   使用适当的[访问控制](http://docs.oracle.com/javase/tutorial/java/javaOO/accesscontrol.html)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-11T17:56:10.823

我试过运行你的代码。如果您问为什么您的窗口没有显示，请尝试在您的 JFrame 上设置边界（大小和位置）：

```
ventana.setBounds(0, 0, 200, 200); 
```

如果未设置边界，则在使用装饰外观时，窗口似乎不会显示。

# vtk - 使用 vtk 通过 paraview 着色的简单图形可视化

> ID：13333470
> 
> 赞同：3
> 
> 时间：2012-11-11T17:16:00.700
> 
> 标签：vtk, paraview

我想在 paraview 中可视化一些图形：一堆带有坐标的点，它们之间有一堆边。我也想给点和边线上色。我认为这对 vtk 格式并不难，因为我发现 vtk 格式示例几乎有我需要的东西。

据我了解，paraview 使用点数据为点分配一些标量值，并使用颜色查找表来绑定标量值和颜色之间的对应关系。但是我几乎无法从查找表的描述中理解如何声明它。我已经开始对多维数据集的 vtk 示例进行一些修改：

```
# vtk DataFile Version 2.0
Cube example
ASCII
DATASET POLYDATA
POINTS 8 float
-1.0 -1.0 -1.0
1.0 -1.0 -1.0
1.0 1.0 -1.0
-1.0 1.0 -1.0
-1.0 -1.0 1.0
1.0 -1.0 1.0
1.0 1.0 1.0
-1.0 1.0 1.0
LINES 12 36
2 0 1
2 0 3
2 0 4
2 1 2
2 1 5
2 2 6
2 2 3
2 3 7
2 4 7
2 4 5
2 5 6
2 6 7

POINT_DATA 8
SCALARS sample_scalars float 1
LOOKUP_TABLE my_table
0.0
1.0
2.0
3.0
4.0
5.0
6.0
7.0
LOOKUP_TABLE my_table 8
0.0 0.0 0.0 1.0
1.0 0.0 0.0 1.0
0.0 1.0 0.0 1.0
1.0 1.0 0.0 1.0
0.0 0.0 1.0 1.0
1.0 0.0 1.0 1.0
0.0 1.0 1.0 1.0
1.0 1.0 1.0 1.0 
```

0）我真的不明白如何在结果可视化上执行着色。（[http://i49.tinypic.com/igksqa.png](http://i49.tinypic.com/igksqa.png)）。此文件中的数字如何与此颜色相对应？

我要修改的内容：

1）我怎样才能实现可见点。在这个 vtk 文件中，点只是线条的锚点，不可见。我也想显示它们并能够在 paraview 中改变它们的大小，就像可以修改线宽一样（显示 -> 样式 -> 点大小）。我也希望这些点也被着色。

2）我能以某种方式打开\关闭颜色吗？假设我有 5 种颜色，并且我希望能够仅显示具有其中一种颜色的节点\边缘。如果我理解正确，这可以使用几个标量表来实现，其中每个标量表对于那些我不想显示的节点\边缘具有不透明度 = 0 的颜色。

3）我对线不能直接引用并且只使用两点的数据着色是对的吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-12-22T14:08:13.433

[VTK 中的文件格式](http://www.vtk.org/wp-content/uploads/2015/04/file-formats.pdf)

嗨，在链接中，您将找到您想要的有关查找表的答案（示例更清楚）

最合适的是非结构化网格，使用不同的单元格类型“vtk_vertex”和“vtk_line”

关于大小，只需将字形过滤器应用于您的数据。你可以在你的文件上设置一个标量“大小”，然后你就可以用你给它的大小值来标记每个顶点。

# java - 模余数不同于 java 和 php

> ID：13333472
> 
> 赞同：1
> 
> 时间：2012-11-11T17:16:08.470
> 
> 标签：java, php

我正在尝试在 PHP 和 JAVA 中实现两种方法，它们返回一个公共整数并具有相同的输出。

内部参数匹配，但是当涉及到模块化划分时，它会失败。

我的号码存储为 int。

在 PHP 中我有这个结果

> 1192581159 % 100000000 = 85278720

在Java中我有这个结果

> 1192581159 % 100000000 = 92581159

**LATER_EDIT_WHILE_POSTING_QUESTION**我认为 1192581159 比 PHP_MAX_INT 更大，一种可能的解决方案是将其视为字符串并应用子字符串以便从 Java 获得正确的结果

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T17:47:04.840

解决方案在这里描述

[模数 PHP 问题](https://stackoverflow.com/questions/2366117/modulus-php-problem)

我的方法是将 1192581159 视为一个字符串，并将我的计算所需的结果子串化

```
 $bigint = (string)$bigint;
    $bigint = substr($bigint,-$returnDigits);
    // $returnDigits is the same as the last
    // x numbers from the end of my "string" 
```

# c# - 如果两个库具有完全相同的类怎么办？

> ID：13333473
> 
> 赞同：7
> 
> 时间：2012-11-11T17:16:16.850
> 
> 标签：c#

我有这样的错误

> 错误 8 'c:\Oleg\projects\MBClient\packages\Disruptor.1.1.0\lib\net40\Atomic.dll' 和 'c:\Program Files (x86) 中都存在类型 'System.Threading.Volatile' \Reference Assemblies\Microsoft\Framework.NETFramework\v4.5\mscorlib.dll' C:\Oleg\projects\MBClient\MBClient\CustomIndeces\CompositeIndex.cs 77 40 MBClient

我不知道该怎么做，因为完全限定名称不能准确识别要使用的类。如何解决这个问题呢？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-11T18:12:36.370

您可以通过右键单击引用列表中的程序集，转到属性并将“别名”属性设置为您想要的任何值来为 VS 中的库分配别名。然后要使用此程序集中的类型，请`extern alias`在命名空间的开头使用。

例子：

```
namespace TestApp
{
    extern alias Threading1;
    using Threading1.System.Threading.Volatile;
} 
```

[`extern alias`微软](http://msdn.microsoft.com/en-us/library/ms173212.aspx)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-11T17:20:56.057

也许您可以[`alias`](http://msdn.microsoft.com/en-us/library/sf0df423%28VS.80%29.aspx)为该命名空间定义一个，`Timer`类的示例可在以下命名空间中找到

```
using WinTimer = System.Windows.Forms;
using ThreadTimer = System.Threading; 
```

然后你可以像这样使用它，

```
WinTimer.Timer _tmr = new WinTimer.Timer();
ThreadTimer.Timer _Thrtmr = new ThreadTimer.Timer(); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-11T17:20:41.027

使用库时可以使用别名。

[http://msdn.microsoft.com/en-us/library/sf0df423(VS.80).aspx](http://msdn.microsoft.com/en-us/library/sf0df423(VS.80).aspx)

# java - 即使计算正确，方法仍返回 NaN

> ID：13333475
> 
> 赞同：2
> 
> 时间：2012-11-11T17:16:48.657
> 
> 标签：java, class, methods

当我调用应该返回计算出的角度angleA、angleB、angleC的方法（在另一个类中）时，我得到的结果是NaN。我已经三次检查了我的所有计算，所以我设置程序的方式必须有所了解。我做错了什么？？

```
/* Write a Java program enabled to compute and show the following properties of a given triangle :
    The individual length of all sides
    The angles at all corners
    The perimeter
    The area

    */

   public class Triangle
   {
    private double x1, x2, x3, y1, y2, y3;
    double sideA, sideB, sideC;
    private double angleA, angleB, angleC;
    double longestSide, shortSide1, shortSide2;
    private double perimeter, halfPerimeter, triangleArea;
    private String stringLongestSide;

    public Triangle(double x1, double y1, double x2, double y2, double x3, double y3)
    {
        this.x1 = x1;
       this.y1 = y1;
       this.x2 = x2;
       this.y2 = y2;
       this.x3 = x3;
       this.y3 = y3;
    }

    public double getSideA()
    {
    return (Math.sqrt(Math.pow((x3-x2),2)+Math.pow((y3-y2),2)));
    }

    public double getSideB()
    {
    return (Math.sqrt(Math.pow((x3-x1),2)+Math.pow((y3-y1),2)));
    }

    public double getSideC()
    {
    return (Math.sqrt(Math.pow((x2-x1),2)+ Math.pow((y2-y1),2)));
    }

        //Begin by using the cosine rule to find the largest angle
    public double getAngleA()
    {
            //which side is the longest?

        longestSide = sideA;
        shortSide1 = sideB;
        shortSide2 = sideC;

        if (longestSide < sideC)
        {
            longestSide = sideC;
            shortSide1 = sideA;
            shortSide2 = sideB;             
        }
            else
            if (longestSide < sideB)
            {
            longestSide = sideB;
            shortSide1 = sideA;
            shortSide2 = sideC;
            }

    return (Math.acos((Math.pow(shortSide1,2)+Math.pow(shortSide2,2)-Math.pow(longestSide,2))/(2*shortSide1*shortSide2)))*180/Math.PI;
    }

        //Use the sine rule to find one of the remaining angles 
    public double getAngleB()
    {
    return ((Math.asin((shortSide1*Math.sin((angleA*Math.PI/180))/longestSide)))*180/Math.PI);
    }   

        //Use the 'sum of internal angles' rule to find the third angle
    public double getAngleC()
    {
    return (180 - (angleA + angleB));
    }

    //Calculating the perimeter
    public double getPerimeter()
    {
    return (sideA + sideB + sideC);
    }

//Calculating the area of the triangle
    public double getArea()
    {
    halfPerimeter = perimeter/2;
    return (Math.sqrt(halfPerimeter*(halfPerimeter-sideA) * (halfPerimeter-sideB) * (halfPerimeter-sideC)));
    }

    } 
```

调用方法的类：

```
/* ShellApplication
    Rakel Bára Þorvaldsdóttir
*/
import java.util.Scanner;
import java.text.DecimalFormat;

public class Interaction
{
    public static void main(String [] args)  //required
    {
    //write your code here
    double x1, x2, x3, y1, y2, y3;
    double sideA, sideB, sideC;
    double angleA, angleB, angleC;
    double perimeter, area;

    DecimalFormat coordinates = new DecimalFormat ("#");
    DecimalFormat calculations = new DecimalFormat ("#.##");

    System.out.println("Welcome!");
    System.out.println("Please enter the coordinates of your triangle, the x-coordinate first each time and then the y-coordinate.\n\t------------------------\n");

    String garbage;

    Scanner scan = new Scanner( System.in );

    System.out.print( "Enter the x-coordinate for the first point, and then press Enter: ");
    while (! scan.hasNextInt())
    {
        garbage = scan.nextLine();
        System.out.println("Please enter an integer.");
    } 
        x1 = scan.nextDouble( );

    System.out.print( "Enter the y-coordinate for the first point, and then press Enter: ");
    while (! scan.hasNextInt())  //creating a while loop to ensure only integer numbers are accepted
    {
        garbage = scan.nextLine();
        System.out.println("Please enter an integer.");
    }
       y1 = scan.nextDouble( );

    System.out.print( "Thanks for entering the first point. Now on to the next! \n\t------------------------\n");

    System.out.print( "Enter the x-coordinate for the second point, and then press Enter: ");
    while (! scan.hasNextInt())
    {
        garbage = scan.nextLine();
        System.out.println("Please enter an integer.");
    }
      x2 = scan.nextDouble( );

    System.out.print( "Enter the y-coordinate for the second point, and then press Enter: ");
    while (! scan.hasNextInt())
    {
        garbage = scan.nextLine();
        System.out.println("Please enter an integer.");
    }
      y2 = scan.nextDouble( );

    System.out.print( "Thanks for entering the second point. Just one more left! \n\t------------------------\n");

    System.out.print( "Enter the x-coordinate for the third point, and then press Enter: ");
    while (! scan.hasNextInt())
    {
        garbage = scan.nextLine();
        System.out.println("Please enter an integer.");
    }
      x3 = scan.nextDouble( );

    System.out.print( "Enter the y-coordinate for the third point, and then press Enter: ");
    while (! scan.hasNextInt())
    {
        garbage = scan.nextLine();
        System.out.println("Please enter an integer.");
    }
      y3 = scan.nextDouble( );

    System.out.println( "You did it!  Your triangle has the following coordinates: ");
    System.out.println( "Point A: ("+coordinates.format(x1) +" , " +coordinates.format(y1) +")" + " , Point B: ("+coordinates.format(x2) +" , " +coordinates.format(y2) +")" +  " , Point C: ("+coordinates.format(x3) +" , " +coordinates.format(y3) +")");

    Triangle userTriangle = new Triangle(x1, y1, x2, y2, x3, y3);   

     sideA = userTriangle.getSideA();
     sideB = userTriangle.getSideB();
     sideC = userTriangle.getSideC();

     angleA = userTriangle.getAngleA();
     angleB = userTriangle.getAngleB();
     angleC = userTriangle.getAngleC();

     perimeter = userTriangle.getPerimeter();
     area = userTriangle.getArea();

     System.out.println( "-----------------");
     System.out.println( "SideA is: " +calculations.format(sideA));
     System.out.println( "SideB is: " +calculations.format(sideB));
     System.out.println( "SideC is: " +calculations.format(sideC));
     System.out.println( "-----------------");

     System.out.println( "AngleA is: " +angleA);
     System.out.println( "AngleB is: " +angleB);
     System.out.println( "AngleC is: " +angleC);
     System.out.println( "-----------------");

     System.out.println( "Perimeter is: " +perimeter);
     System.out.println( "Area is: " +area);

    }
} 
```

结果是：

* * *

SideA 是：14,32 SideB 是：5,83

## SideC 是：11,18

角度A 是：NaN 角度B 是：NaN

## 角度C为：180.0

周长：0.0 面积：0.0

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-11T17:26:29.860

在您使用它们之前，您的某些变量没有使用正确的值进行初始化。例如，sideA、sideB 和 sideC 在您的 getAngleA() 方法中都是 0.0。

如果您使用它们的默认值（对于类变量显然是 0.0：双精度数）然后尝试除以它，结果将是 NaN（实际上是无穷大，但是如果您尝试使用无穷大进行计算，则会得到 NaN 作为结果） .

当您从通话中调用 getAngleA() 时：

```
angleA = userTriangle.getAngleA(); 
```

打印出以下方法变量，都是0.0

您在方法 getAngleA() 中设置的变量：

```
longestSide = sideA;
shortSide1 = sideB;
shortSide2 = sideC; 
```

设置后立即打印它们的值：

```
System.out.println("longestSide = " + longestSide);
System.out.println("shortSide1 = " + shortSide1);
System.out.println("shortSide2 = " + shortSide2); 
```

这是打印出来的：longestSide = 0.0 shortSide1 = 0.0 shortSide2 = 0.0

所以它们没有被设置为 0.0 以外的值。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-11T19:15:14.027

要正确封装您的字段，您需要将所有类变量设置为私有访问，并使用 getter 和 setter 来设置和获取值。

因此，为了扩展 Sura 的答案，您可以将这些方法添加到您的 Triangle 类中，并将您的 sideA、sideB 和 sideC（以及所有其他类变量）设置为私有

例如

```
public double getSideA()
{
  return sideA;
}

public double getSideB()
{
  return sideB;
}

public double getSideC()
{
  return sideC;
}

public void setSideA()
{
  sideA = (Math.sqrt(Math.pow((x3-x2),2)+Math.pow((y3-y2),2)));
}

public void setSideB()
{
  sideB =  (Math.sqrt(Math.pow((x3-x1),2)+Math.pow((y3-y1),2)));
}

public void setSideC()
{
  sideC = (Math.sqrt(Math.pow((x2-x1),2)+ Math.pow((y2-y1),2)));
} 
```

话虽如此 - 我猜在你的三角形情况下你不想让人们在不改变你的初始输入值（你的 x、y、z 变量）的情况下更新你的侧面测量值，在这种情况下我会省略设置器完全并将 Sura 的 3 条侧面设置线添加到构造函数的底部，因此它们是在初始化对象时设置的。

```
sideA = (Math.sqrt(Math.pow((x3-x2),2)+Math.pow((y3-y2),2))); 
sideB = (Math.sqrt(Math.pow((x3-x1),2)+Math.pow((y3-y1),2)));  
sideC = (Math.sqrt(Math.pow((x2-x1),2)+ Math.pow((y2-y1),2))); 
```

如果您希望人们能够更改三角形的尺寸，我建议只使用一个 updateTriangle() 方法，该方法再次运行您的输入菜单以获取新值，并再次在底部包含这 3 行以进行更新支持新价值观。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-11T17:48:40.020

这是你在 Trangle 类中必须做的改变。在每个 Side 获取方法而不是返回值中，您必须首先将值分配给 sideA、sideB、sideC 然后返回

```
public double getSideA()
 {
  sideA = (Math.sqrt(Math.pow((x3-x2),2)+Math.pow((y3-y2),2)));
  return sideA;
}

 public double getSideB()
{
sideB =  (Math.sqrt(Math.pow((x3-x1),2)+Math.pow((y3-y1),2)));
 return sideB;
}

 public double getSideC()
 {
 sideC = (Math.sqrt(Math.pow((x2-x1),2)+ Math.pow((y2-y1),2)));
 return sideC;
 } 
```

# android - 安卓系统收不到短信

> ID：13333476
> 
> 赞同：1
> 
> 时间：2012-11-11T17:17:01.813
> 
> 标签：android, android-layout, android-intent

我有一个小问题。我无法让我的广播接收器显示任何 toast 消息。也许我无法以某种方式触发它，但我的发件人可以工作。我想知道它是否甚至触发。

**主班**

```
 public class Main_Activity extends Activity {

Button buttonSend;
EditText textPhoneNo;
EditText textSMS;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
   Button  buttons = (Button) findViewById(R.id.gett);
    buttonSend = (Button) findViewById(R.id.buttonSend);
    textPhoneNo = (EditText) findViewById(R.id.editTextPhoneNo);
    textSMS = (EditText) findViewById(R.id.editTextSMS);
    EditText edt = (EditText)findViewById(R.id.reciving);

    buttons.setOnClickListener(new OnClickListener() {

        public void onClick(View v) {
            // TODO Auto-generated method stub
        //  EditText edt = (EditText)findViewById(R.id.reciving);
        //  SmsReceiver obj = new SmsReceiver();
        //  String test = obj.number2;
        //    edt.setText("you stupid result "+test);

        }
    });

    SmsReceiver obj = new SmsReceiver();
//  String test = obj.number2;
 //   edt.setText("you stupid result "+test);

  buttonSend.setOnClickListener(new OnClickListener() {

    public void onClick(View v) {
        // TODO Auto-generated method stub

        String phoneNo = textPhoneNo.getText().toString();
        String sms = textSMS.getText().toString();

        try{
            SmsManager  smsManager = SmsManager.getDefault();
            smsManager.sendTextMessage(phoneNo, null, sms, null, null);

        }catch (Exception e)
        {
            System.out.println("Not send");
        }

    }
})  ;

}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    getMenuInflater().inflate(R.menu.activity_main, menu);
    return true;
}
 } 
```

**短信接收器类：**

```
 public class SmsReceiver extends BroadcastReceiver
 {
@Override
public void onReceive(Context context, Intent intent) 
{
    //---get the SMS message passed in---
    Bundle bundle = intent.getExtras();        
    SmsMessage[] msgs = null;
    String str = "";            
    if (bundle != null)
    {
        //---retrieve the SMS message received---
        Object[] pdus = (Object[]) bundle.get("pdus");
        msgs = new SmsMessage[pdus.length];            
        for (int i=0; i<msgs.length; i++){
            msgs[i] = SmsMessage.createFromPdu((byte[])pdus[i]);                
            str += "SMS from " + msgs[i].getOriginatingAddress();                     
            str += " :";
            str += msgs[i].getMessageBody().toString();
            str += "\n";        
        }
        //---display the new SMS message---
        Toast.makeText(context, str, Toast.LENGTH_SHORT).show();
    }                         
}
 } 
```

**主播**

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="dom.example.sms_exp"
    android:versionCode="1"
    android:versionName="1.0" >

<uses-permission android:name="android.permission.SEND_SMS" />
<uses-permission android:name="android.permission.SEND_SMS" />

<uses-sdk
    android:minSdkVersion="8"
    android:targetSdkVersion="15" />

<application
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppTheme" >
    <activity
        android:name=".Main_Activity"
        android:label="@string/title_activity_main_" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>

    <receiver android:name=".SmsReceiver" >
        <intent-filter>
            <action android:name="android.provider.Telephony.SMS_RECEIVED" />
        </intent-filter>
    </receiver>

    <activity
        android:name=".SmsReceiver"
        android:label="@string/title_activity_send_activity" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
</application>
</manifest> 
```

请帮忙，我明天有一个项目要提交。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T17:34:44.903

如果您希望您的应用程序接收 SMS 广播，那么您必须在 manifast 中包含以下权限

```
<uses-permission android:name="android.permission.RECEIVE_SMS"/> 
```

并将您的 SmsReceiver 代码更改为：

```
public class SmsReceiver extends BroadcastReceiver
 {
  @Override
    public void onReceive(Context context, Intent intent) 
    {
       if (intent.getAction().equals("android.provider.Telephony.SMS_RECEIVED"))
           {
              //put your code here....
           }
       else{
             // do something here...
           }
    }
} 
```

# javascript - 在异步 jQuery getJSON 调用之后访问变量

> ID：13333482
> 
> 赞同：1
> 
> 时间：2012-11-11T17:17:41.540
> 
> 标签：javascript, jquery, asynchronous, getjson

我是异步 Javascript 调用的新手，所以我很难弄清楚在 getJSON 调用修改后如何访问某个对象的数据。

我有一个带有空数组（单词）以及一个 mainMethod 和一个 subMethod 的对象。mainMethod 获取一些 JSON 并根据 JSON 数据多次调用 subMethod。subMethod 访问不同的 JSON 文件并使用它来填充对象的空数组（单词）。

当我创建对象时，我调用 mainMethod。我想获取对象的数组，但只有在它被 JSON 调用填充之后。

我知道它必须对延迟方法或其他东西做一些事情，但我在调用中不断得到一个空白数组。我该怎么做呢？谢谢！

对象代码：

```
 function Something(numTerms){
        var self=this;
        this.words=[];
        this.wordsNeeded=numTerms;
        this.mainMethod = function(){
            $.getJSON("external JSON url", function(data) {
                var setIds=self.getDifferentSets(data, self.wordsNeeded).ids;
                for(var i=0; i<setIds.length; i++){
                    self.subMethod(setIds[i]);
                }   

            });
        }
     this.getDifferentSets= function(data, num){
        var obj= {};
        obj.ids=[];
        obj.wordsFound=0;
        var currSet=0;
        while(obj.wordsFound<num){
                obj.ids.push(data.sets[currSet].id);
                obj.wordsFound+=data.sets[currSet].term_count;
                currSet++;
        }
        return obj;
    }
        this.subMethod= function(id){
            $.getJSON("some other external JSON url", function(data) {
                var numberTerms= data.terms.length;
                var terms=[];
                if(self.wordsNeeded<numberTerms) numberTerms=self.wordsNeeded;

                for(var i=0;i<numberTerms;i++){
                    var word= new Object();
                    word.term=data.terms[i].term;
                    word.definition=data.terms[i].definition;
                    terms.push(word);
                }
                for(var i=0;i<terms.length;i++){
                    var word= {"term":terms[i].term, "definition":terms[i].definition};
                    self.words.push(word); //Changing the object's variable
                }
                self.wordsNeeded-=numberTerms;
            });
        }
    } 
```

创建对象：

```
 $(document).ready(function(){   
        $("#fetch_button").click(function(){
           var num=Number($("#numTerms").val());
           var some= new Something(num);
           some.mainMethod();
           var words=some.words; //How can I get the final value of some.words AFTER it has been changed by the JSON calls?
        });
    }) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T17:26:58.043

`return this`能不能在main函数里试试

```
function Something(numTerms){
    var self=this;
    //Blah blah blah

    return this;
} 
```

# vbscript - 管理文件共享上的远程 DACL：Win32_ACE 到 Win32_Share

> ID：13333483
> 
> 赞同：2
> 
> 时间：2012-11-11T17:17:44.703
> 
> 标签：vbscript, wmi, share, windows-server-2003, dacl

目标：向现有文件共享添加本地用户帐户共享级别的读/写权限。

我在开发这个时遇到了障碍。显然，Microsoft 希望您将用户的 ACE 添加到 DACL，然后再返回到共享的安全描述符中。(1)。（不，NET SHARE /ADD 不适用于现有共享，我很惊讶。）

理论上这应该很简单，但我主要担心做错了并失去现有的共享权限（很多网络用户，特定组）。该解决方案需要扩展到几千个共享。我正在开发解决方案以输出有关现有 DACL 的数据，以防我需要退出。我应该编写代码来解释该日志，并准备好在出现任何问题时将它们全部添加回来。

目前我正在使用 VBscript——我觉得 PowerShell 可能是一种更强大的方法，但 VBscript/WMI 是一个已知数量。

研究：（1）[http://blogs.msdn.com/b/helloworld/archive/2008/07/22/editing-share-permission.aspx](http://blogs.msdn.com/b/helloworld/archive/2008/07/22/editing-share-permission.aspx)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T09:50:44.777

将现有 ACE 复制到数组中：

```
rc = shareSec.GetSecurityDescriptor(sd)
ReDim acl(UBound(sd.DACL)+1)  '+1 for the new ACL we're going to add
For i = 0 To UBound(sd.DACL)
  Set acl(i) = sd.DACL(i)
Next 
```

将新的 ACE 添加到该数组中：

```
Set acl(UBound(acl)) = NewACE(NewTrustee(username, domain), 2032127) 
```

函数`NewTrustee()`并`NewACE()`封装了用于创建受托者和 ACE 的指令。该数字是*完全控制*的访问掩码。

创建一个新的安全描述符并将其分配给共享：

```
Set sd = wmi.Get("Win32_SecurityDescriptor").SpawnInstance_
sd.ControlFlags = flags
sd.DACL = acl
rc = shareSec.SetSecurityDescriptor(sd) 
```

查看[此页面](https://secure.marumoto.us/motowiki/tiki-index.php?page=Reading+NTFS+and+Share+Permissions+with+VBScript+and+.Net)以获取有关安全描述符、受托者、ACL 和 ACE 的更多详细信息。

* * *

完整脚本：

```
Const FullControl = 2032127

' modify these variables according to your requirements:
computer = "."
share    = "..."
username = "..."
domain   = CreateObject("WScript.Network").UserDomain

Set wmi = GetObject("winmgmts:{impersonationLevel=impersonate}!//" _
  & computer & "/root/cimv2")
Set shareSec = GetObject("winmgmts:Win32_LogicalShareSecuritySetting.Name='" _
  & share & "'")

Function NewTrustee(name, domain)
  Dim trustee, account

  Set trustee = wmi.Get("Win32_Trustee").SpawnInstance_
  trustee.Name   = name
  trustee.Domain = domain
  Set account = wmi.Get("Win32_UserAccount.Domain='" & domain & "',Name='" _
    & name & "'")
  trustee.Properties_.Item("SID") = wmi.Get("Win32_SID.SID='" & account.SID _
    & "'").BinaryRepresentation

  Set NewTrustee = trustee
End Function

Function NewACE(trustee, permissions)
  Dim ace : Set ace = wmi.Get("Win32_Ace").SpawnInstance_
  ace.Properties_.Item("AccessMask") = permissions
  ace.Properties_.Item("AceFlags") = 3
  ace.Properties_.Item("AceType") = 0
  ace.Properties_.Item("Trustee") = trustee
  Set NewACE = ace
End Function

' copy existing ACEs
rc = shareSec.GetSecurityDescriptor(sd)
flags = sd.ControlFlags
ReDim acl(UBound(sd.DACL)+1)  '+1 for the new ACL we're going to add
For i = 0 To UBound(sd.DACL)
  Set acl(i) = sd.DACL(i)
Next
Set sd = Nothing

' add new ACE
Set acl(UBound(acl)) = NewACE(NewTrustee(username, domain), FullControl)

' prepare new security descriptor
Set sd = wmi.Get("Win32_SecurityDescriptor").SpawnInstance_
sd.ControlFlags = flags
sd.DACL = acl

' assign new security descriptor
rc = shareSec.SetSecurityDescriptor(sd) 
```

# php - 表单的不同 POST 选项，然后传递数据

> ID：13333486
> 
> 赞同：4
> 
> 时间：2012-11-11T17:18:09.667
> 
> 标签：php, html, paypal, stripe-payments

目前，我正在一个使用 PayPal 结帐的网站上工作。我也想启用条纹，因此表单底部可以有一个“带条纹结帐”按钮。

```
<form method="POST" id="form1" >
    <select id="udidSelect" onchange="udidPrice(this)">
        <option value="invalid" disabled="disabled">Choose Package</option>
        <option value="udid">UDID Registration</option>
        <option value="profile">UDID Registration & Free Unlimited Apps (Provisioning Profile)</option>
    </select><br />
    <br />
    <input type="text" placeholder="Name" /><br />
    <br />
    <input type="email" placeholder="Email" /><br />
    <br />

    <input type="text" placeholder="UDID (40 Characters Long)" name="os0" /> <br />
    <input type="hidden" name="on0" value="UDID">
    <br />

    <input type="hidden" name="cmd" value="_s-xclick">
    <input type="hidden" name="hosted_button_id" id="udidbuttonID" value="9PSTCESRS3FSG">
    <input type="image" src="https://www.paypalobjects.com/en_US/i/btn/btn_buynow_SM.gif" border="0" name="submit" alt="PayPal - The safer, easier way to pay online!" value="PayPal" onclick="submitForm('https://www.paypal.com/cgi-bin/webscr')" style="float:right;">
    <img alt="" border="0" src="https://www.paypalobjects.com/en_US/i/scr/pixel.gif" width="1" height="1">

</form> 
```

现在我想在表单底部有一个 PayPal 按钮，在表单底部有一个 Stripe 按钮。如果用户点击条带按钮，它会将他们带到下一页并传递在此页面中输入的信息。我不确定如何执行此操作，我也不确定如何为表单设置不同的发布选项。（对不起，我对此有点陌生。）

同样，在条带结帐页面上，我将如何从以前的表单中请求传递的信息。会是这样吗？

```
<input type="hidden" name="somedata" value="<?php echo $_POST['somedata']; ?>" />
<input type="hidden" name="otherdata" value="<?php echo $_POST['otherdata']; ?>" /> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T17:33:55.137

如果我正确阅读了您的问题，您希望表单根据用户点击的是 Stripe 还是 Paypal 转到不同的页面。

您可以使用 JavaScript/jQuery 来更改`action`表单的属性：

```
<!--HTML-->
<button onClick="setFormAction('stripe')">Stripe</button>
<button onClick="setFormAction('paypal')">Paypal</button>

//Javascript
function setFormAction(which) {
    if (which == 'stripe') {
        //Change 'stripe.php' to the proper URL
        document.getElementById('form1').action = 'stripe.php';
    } else {
        document.getElementById('form1').action = 'paypal.php'; //Change this also
    }
    //Finally, submit the form
    document.getElementById('form1').submit();
} 
```

或者，更容易理解的是 jQuery 解决方案：

```
<!--HTML-->
<button id="stripe">Stripe</button>
<button id="paypal">Paypal</button>

//Javascript
$('button#stripe').click(function() {
    $('form#form1')
        .attr('action', 'stripe.php') //Change to proper stripe URL
        .submit();
});
$('button#paypal').click(function() {
    $('form#form1')
        .attr('action', 'paypal.php') //Change to paypal URL
        .submit();
}); 
```

在下一页上，您完全按照您之前所说的做：

```
<input type="hidden" name="somedata" val="<?php echo $somedata; ?>" /> 
```

始终在页面上回显用户输入的值之前对其进行清理（因此变量`$somedata`而不是`$_POST['somedata']`.

隐藏输入字段的替代方法是会话。一旦掌握了窍门，处理起来就容易得多。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-11T17:34:03.203

添加另一行：

test.php 是您要发布此表单的页面

```
<input type="button"  border="0"   value="Pay with Stripe" onclick="submitForm('test.php')">

in test.php you can get the values like this:

<input type="hidden" name="test" value="<?php echo $_REQUEST['test'] ?>"> 
```

# typescript - 在 TypeScript 中声明抽象方法

> ID：13333489
> 
> 赞同：230
> 
> 时间：2012-11-11T17:18:22.913
> 
> 标签：typescript

我试图弄清楚如何在 TypeScript 中正确定义抽象方法：

使用原始继承示例：

```
class Animal {
    constructor(public name) { }
    makeSound(input : string) : string;
    move(meters) {
        alert(this.name + " moved " + meters + "m.");
    }
}

class Snake extends Animal {
    constructor(name) { super(name); }
    makeSound(input : string) : string {
        return "sssss"+input;
    }
    move() {
        alert("Slithering...");
        super.move(5);
    }
} 
```

我想知道如何正确定义方法 makeSound，所以它是类型化的并且可以被覆盖。

另外，我不确定如何正确定义`protected`方法 - 它似乎是一个关键字，但没有效果并且代码不会编译。

* * *

## 回答 #1

> 赞同：339
> 
> 时间：2012-11-11T21:28:15.317

该`name`属性标记为`protected`。这是在 TypeScript 1.3 中添加的，现在已经牢固确立。

该`makeSound`方法被标记为`abstract`，类也是如此。你不能直接实例化一个`Animal`now，因为它是抽象的。[这是 TypeScript 1.6 的一部分，](https://github.com/Microsoft/TypeScript/issues/3578)现已正式上线。

```
abstract class Animal {
    constructor(protected name: string) { }

    abstract makeSound(input : string) : string;

    move(meters) {
        alert(this.name + " moved " + meters + "m.");
    }
}

class Snake extends Animal {
    constructor(name: string) { super(name); }

    makeSound(input : string) : string {
        return "sssss"+input;
    }

    move() {
        alert("Slithering...");
        super.move(5);
    }
} 
```

模仿抽象方法的旧方法是在有人使用它时抛出错误。一旦 TypeScript 1.6 进入您的项目，您就不再需要这样做了：

```
class Animal {
    constructor(public name) { }
    makeSound(input : string) : string {
        throw new Error('This method is abstract');
    }
    move(meters) {
        alert(this.name + " moved " + meters + "m.");
    }
}

class Snake extends Animal {
    constructor(name) { super(name); }
    makeSound(input : string) : string {
        return "sssss"+input;
    }
    move() {
        alert("Slithering...");
        super.move(5);
    }
} 
```

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2014-05-02T10:12:44.993

如果您进一步了解 Eric 的回答，您实际上可以创建一个相当不错的抽象类实现，完全支持多态性并能够从基类调用实现的方法。让我们从代码开始：

```
/**
 * The interface defines all abstract methods and extends the concrete base class
 */
interface IAnimal extends Animal {
    speak() : void;
}

/**
 * The abstract base class only defines concrete methods & properties.
 */
class Animal {

    private _impl : IAnimal;

    public name : string;

    /**
     * Here comes the clever part: by letting the constructor take an 
     * implementation of IAnimal as argument Animal cannot be instantiated
     * without a valid implementation of the abstract methods.
     */
    constructor(impl : IAnimal, name : string) {
        this.name = name;
        this._impl = impl;

        // The `impl` object can be used to delegate functionality to the
        // implementation class.
        console.log(this.name + " is born!");
        this._impl.speak();
    }
}

class Dog extends Animal implements IAnimal {
    constructor(name : string) {
        // The child class simply passes itself to Animal
        super(this, name);
    }

    public speak() {
        console.log("bark");
    }
}

var dog = new Dog("Bob");
dog.speak(); //logs "bark"
console.log(dog instanceof Dog); //true
console.log(dog instanceof Animal); //true
console.log(dog.name); //"Bob" 
```

由于`Animal`该类需要一个实现，因此如果没有抽象方法的有效实现，`IAnimal`就不可能构造一个类型的对象。`Animal`请注意，要使多态性起作用，您需要传递 的实例`IAnimal`，而不是`Animal`. 例如：

```
//This works
function letTheIAnimalSpeak(animal: IAnimal) {
    console.log(animal.name + " says:");
    animal.speak();
}
//This doesn't ("The property 'speak' does not exist on value of type 'Animal')
function letTheAnimalSpeak(animal: Animal) {
    console.log(animal.name + " says:");
    animal.speak();
} 
```

这里与 Erics 答案的主要区别在于“抽象”基类*需要*接口的实现，因此不能自行实例化。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-03-18T23:37:09.090

我相信结合使用接口和基类可以为您工作。它将在编译时强制执行行为要求（rq_ post "below" 指的是上面的帖子，不是这个）。

该接口设置了基类未满足的行为 API。您将无法设置基类方法来调用接口中定义的方法（因为您将无法在基类中实现该接口而无需定义这些行为）。也许有人可以想出一个*安全*的技巧来允许调用父级中的接口方法。

您必须记住在您将实例化的类中扩展和实现。它满足了对定义运行时失败代码的关注。如果您还没有实现接口（例如，如果您尝试实例化 Animal 类），您甚至无法调用会呕吐的方法。我尝试让接口扩展下面的 BaseAnimal，但它对 Snake 隐藏了 BaseAnimal 的构造函数和“名称”字段。如果我能够做到这一点，那么使用模块和导出可以防止 BaseAnimal 类的意外直接实例化。

将此粘贴到此处以查看它是否适合您：[http ://www.typescriptlang.org/Playground/](http://www.typescriptlang.org/Playground/)

```
// The behavioral interface also needs to extend base for substitutability
interface AbstractAnimal extends BaseAnimal {
    // encapsulates animal behaviors that must be implemented
    makeSound(input : string): string;
}

class BaseAnimal {
    constructor(public name) { }

    move(meters) {
        alert(this.name + " moved " + meters + "m.");
    }
}

// If concrete class doesn't extend both, it cannot use super methods.
class Snake extends BaseAnimal implements AbstractAnimal {
    constructor(name) { super(name); }
    makeSound(input : string): string {
        var utterance = "sssss"+input;
        alert(utterance);
        return utterance;
    }
    move() {
        alert("Slithering...");
        super.move(5);
    }
}

var longMover = new Snake("windy man");

longMover.makeSound("...am I nothing?");
longMover.move();

var fulture = new BaseAnimal("bob fossil");
// compile error on makeSound() because it is not defined.
// fulture.makeSound("you know, like a...")
fulture.move(1); 
```

我遇到了 FristvanCampen 的答案，如下所示。他说抽象类是一种反模式，并建议使用实现类的注入实例来实例化基本“抽象”类。这是公平的，但也有人提出反对意见。自己阅读： [https ://typescript.codeplex.com/discussions/449920](https://typescript.codeplex.com/discussions/449920)

第 2 部分：我有另一种情况，我想要一个抽象类，但我无法使用上面的解决方案，因为“抽象类”中定义的方法需要引用匹配接口中定义的方法。所以，我参考了 FristvanCampen 的建议。我有不完整的“抽象”类，带有方法实现。我有未实现方法的接口；这个接口扩展了“抽象”类。然后我有一个扩展第一个并实现第二个的类（它必须扩展两者，因为超级构造函数否则无法访问）。请参阅下面的（不可运行的）示例：

```
export class OntologyConceptFilter extends FilterWidget.FilterWidget<ConceptGraph.Node, ConceptGraph.Link> implements FilterWidget.IFilterWidget<ConceptGraph.Node, ConceptGraph.Link> {

    subMenuTitle = "Ontologies Rendered"; // overload or overshadow?

    constructor(
        public conceptGraph: ConceptGraph.ConceptGraph,
        graphView: PathToRoot.ConceptPathsToRoot,
        implementation: FilterWidget.IFilterWidget<ConceptGraph.Node, ConceptGraph.Link>
        ){
        super(graphView);
        this.implementation = this;
    }
} 
```

和

```
export class FilterWidget<N extends GraphView.BaseNode, L extends GraphView.BaseLink<GraphView.BaseNode>> {

    public implementation: IFilterWidget<N, L>

    filterContainer: JQuery;

    public subMenuTitle : string; // Given value in children

    constructor(
        public graphView: GraphView.GraphView<N, L>
        ){

    }

    doStuff(node: N){
        this.implementation.generateStuff(thing);
    }

}

export interface IFilterWidget<N extends GraphView.BaseNode, L extends GraphView.BaseLink<GraphView.BaseNode>> extends FilterWidget<N, L> {

    generateStuff(node: N): string;

} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-08-13T17:52:03.527

我习惯在基类中抛出异常。

```
protected abstractMethod() {
    throw new Error("abstractMethod not implemented");
} 
```

然后你必须在子类中实现。缺点是没有构建错误，而是运行时。优点是你可以从超类调用这个方法，假设它会工作:)

HTH！

弥尔顿

* * *

## 回答 #5

> 赞同：-23
> 
> 时间：2013-12-16T20:07:24.823

***不不不！***当语言不支持该功能时，请不要尝试制作自己的“抽象”类和方法；对于您希望支持给定语言的任何语言功能也是如此。在 TypeScript 中实现抽象方法没有正确的方法。只需使用命名约定来构建您的代码，以使某些类永远不会直接实例化，但无需明确执行此禁令。

此外，上面的示例仅在运行时提供此强制执行，而不是在编译时提供，正如您在 Java/C# 中所期望的那样。

# c# - 流式传输 ffmpeg.exe 标准输出

> ID：13333498
> 
> 赞同：5
> 
> 时间：2012-11-11T17:19:50.507
> 
> 标签：c#, ffmpeg

我需要即时将标准输出从 ffmpeg.exe 直接传输到 Web 响应流。我使用 Process/RedirectStandardOutput/etc 设置命令行来管道输出流没有问题。

但是，问题似乎是 Process.StandardOutput 的输出不是正确的原始格式。像这样的东西（伪代码）：

```
var ffpsi = new ProcessStartInfo("ffmpeg.exe", "-i input.mp3 -acodec copy -f mp3 -")
ffpsi.UseShellExecute = false;
ffpsi.RedirectStandardOutput = true;
var ffmpegProcess = new Process();
ffpmpegProcess.StartInfo = ffpsi;

ffmpegProcess.Start();

var outputFile = new FileStream("out.mp3");
ffmpegProcess.StandardOutput.BaseStream.CopyTo(outputFile); 
```

创建一个比原始文件大一点的文件，它显然不是有效的 MP3。

我已经使用基本流的各种编码复制策略并从异步回调中获取数据，但似乎没有任何效果。

这里有什么想法吗？我想这归结为如何将 ffmpeg stdout 的原始二进制输出转换为可以传递给响应流的 .NET 流？

# python - wxPython 语法高亮小部件

> ID：13333499
> 
> 赞同：2
> 
> 时间：2012-11-11T17:19:58.503
> 
> 标签：python, syntax, wxpython

是否有类似于**wxPython中的****TextCtr**的小部件，可以将语法高亮添加到文本字段。 我翻阅了文档，但找不到任何东西。

 **如果没有，我该如何自己创建它。我只需要简单的 HTML 突出显示。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T14:26:54.140

有几个地方可以查找此类示例。StyledTextCtrl、PyShell/PyCrust 和 Editra。PyShell / PyCrust 在官方 wxPython 演示中有一个演示，实际上显示了语法高亮。Editra 与 wx 2.8 和 2.9 一起分发，但我不确定它是否包含在最前沿的 Phoenix 版本中。但是，我认为它可以为多种语言进行语法突出显示。你也可以在这里下载：[http ://editra.org/](http://editra.org/)**

# ruby - 引用模块中与类同名的方法

> ID：13333501
> 
> 赞同：9
> 
> 时间：2012-11-11T17:20:12.947
> 
> 标签：ruby

我有一个具有相同名称的类和一个模块：

```
module Pushover
  def configure
    ..
  end
end

module MyModule
  class Pushover
    def blah
      Pushover.configure
    end
  end
end 
```

这不起作用，因为`Pushover.configure`调用指向包含类。现在，一个明显的解决方法是重命名该类。但是，模块来自 gem，并且类符合 DSL 中所需的命名约定。所以理想情况下，它们都应该保持不变。我还可以创建第二个助手类并通过它调用，但这一切似乎有点 hacky。我首选的解决方案是直接引用模块方法。

围绕这个领域的所有现有问题似乎都在向相反的方向消除歧义——即他们想要获得类引用而不是模块。

当我指定时，有什么方法可以告诉 Ruby 我的意思是模块而不是类`Pushover`？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-11-11T17:30:18.937

如果您不想查找相对于当前范围的常量，只需使用绝对路径：

```
::Pushover.configure 
```

# javascript - 动画不适用于外循环

> ID：13333502
> 
> 赞同：2
> 
> 时间：2012-11-11T17:20:16.030
> 
> 标签：javascript, jquery, animation, loops

我正在尝试对图像、它们的位置和尺寸执行一些 jquery 动画。我想要做的是将点击的图像移动到最大图像的位置（位置 1，p1，图像）。

到目前为止，我能够做的是将每个图像旋转到下一个前进位置。

你可以在这个[小提琴](http://jsfiddle.net/7HZ6L/)中看到。

我试图做的是将函数`movement`放在这样的循环中

```
for(var x = 0; x < 3; x++){
    movement(checker);
} 
```

起初以为我希望它只是将每个元素向前移动 3 个位置，但事实并非如此。没有什么明显的事情发生。注意：`checker`是点击图片的id号。

我还认为使`movement`函数继续运行的次数超过 element(16) 的数量也会导致它在一定程度上解决问题。我将其更改为 32，期望每个元素移动 2 个位置。

```
function movement(checker){
    var count = 1;
    var first, last, positions, dimensions, leftPos, topPos, imgWidth, imgHeight;
    while(count<=32){//Increasing the loops to 32 from 16
        if(checker == 0){
            checker = 16;
        }

        first = d.e("p"+checker);

        if(checker == 1){
            last = d.e("p"+16);

    }else{
        last = d.e("p"+(checker-1));
    }
    //console.log(checker);
    positions = findPos(last);
    dimensions = getCanvas(last);
    leftPos = positions[0]; topPos = positions[1];
    imgWidth = dimensions[0]; imgHeight = dimensions[1];
    $("#p"+checker).animate({"left":leftPos, "top":topPos, "width":imgWidth, "height":imgHeight}, "fast");
    checker--; count++;

} 
```

我不知道现在该做什么。理想情况下，我想要做的是将它放在一个循环中，该循环将具有参数“继续直到检查器左侧和顶部位置 == p1（初始）的左侧和顶部位置”。

所以我的问题是让元素在点击时移动多个位置。我不确定我是否在这方面采取了正确的方法，但我们将不胜感激。

先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T04:18:02.447

```
//move object
// current status: index of largest picture
var status = 1;

function movement(checker){
    var count = 1;
    var first, last, positions, dimensions, leftPos, topPos, imgWidth, imgHeight;
    while(count<=16){
        if(checker == 0){
            checker = 16;
        }
        first = d.e("p"+checker);

        if(checker == 1){
            last = d.e("p"+16);

        }else{
            last = d.e("p"+(checker-1));
        }    
        //console.log(checker);
        positions = findPos(last);
        dimensions = getCanvas(last);
        leftPos = positions[0]; topPos = positions[1];
        imgWidth = dimensions[0]; imgHeight = dimensions[1];
        var animateCount = 0;
        $("#p"+checker).animate({"left":leftPos, "top":topPos, "width":imgWidth, "height":imgHeight}, "fast", function() {
            animateCount++;
            // check if all 16 picture's animation was completed.
            if (16 == animateCount) {
                console.log('finished');
                // update the index of largest picture
                status = (status % 16) + 1;
                // rotate all again if status is not equal to checker
                if (status != checker)
                    movement(checker);
            }    
        });
        checker--; count++;

    }
} 
```

# linux - Git remote 尝试以我当前的本地用户身份连接到我的服务器

> ID：13333504
> 
> 赞同：0
> 
> 时间：2012-11-11T17:20:28.670
> 
> 标签：linux, macos, git, node.js, ssh

我正在尝试设置我的 git 工作流程（在我推送时自动部署我的 node.js 应用程序）。我尝试了多种方法并最终这样做：[http ://toroid.org/ams/git-website-howto](http://toroid.org/ams/git-website-howto)

我设法使这种方法起作用，但还有一个问题：我在我的 git 和 root 用户的授权密钥列表中，因此我可以通过 SSH 登录这些用户。但是当我执行 git pull 时，我的计算机尝试使用其当前用户 ssh 到服务器。这意味着它会在我的服务器上搜索与我的本地用户具有相同登录名的用户（不存在）

如果我在本地以 root 身份登录，它会以 root 身份连接到远程服务器并正常工作。否则，它会尝试一个不存在且不起作用的用户。

不确定我是否解释得很好......如果不是，对不起。无论如何，如果有人知道如何解决这个问题并使我能够使用 git 而不必为我团队中的每个人创建一个远程用户，那就太酷了:) 哦，我的客户端是 OS X 和服务器 Ubuntu

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T17:30:55.490

我不完全确定我是否理解正确，但是您可以在指定远程 URL 时直接设置用户名。

例如，在大多数 Git 托管站点上，您应该`git`在通过 SSH 连接时使用用户。这允许他们只创建一个他们必须维护的用户，同时将所有授权细节放在后面。

因此，例如 GitHub 上的常用远程 URL 如下所示`git@github.com:user/repository`：这是 的长形式`ssh://git@github.com/user/repository`。

因此，当您设置远程、克隆或之后，只需在其中包含您的用户名，Git 将在通过 SSH 连接时使用它：

```
git clone git@myserver:/path/to/repository 
```

# size - /proc/[pid]/cmdline 文件大小

> ID：13333505
> 
> 赞同：0
> 
> 时间：2012-11-11T17:20:29.560
> 
> 标签：size, fopen, proc

我正在尝试在 proc/[pid] 中获取 cmdline 文件的文件大小。例如 porc/1/cmdline。该文件不是空的，它包含“/sbin/init”。但我得到 file_size = 0。

```
int main(int argc, char **argv) {
    int file_size;
    FILE *file_cmd;
    file_cmd = fopen("/proc/1/cmdline", "r");
    if(file_cmd == NULL) {
        perror("proc/1/cmdline");
        exit(1);
    }else {
        if(fseek(file_cmd, 0L, SEEK_END)!=0) {
            perror("proc/1/cmdline");
            exit(1);
        }
        file_size = ftell(file_cmd);
    }
    printf("fs: %d\n",file_size);
    fclose(file_cmd);
    } 
```

问候

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-11T17:27:33.097

这很正常。/proc 文件（其中大多数，有一些例外）是在您读取它们时由内核生成的。这意味着在读取文件之前不可能知道大小。把它想象成文件上的量子力学。除非您阅读信息，否则您不会获得状态，但不能保证再次阅读会两次给您相同的信息；-)

换句话说，EOF 仅在您尝试阅读时生成。在此之前它不存在，因此无法确定文件大小。

这实际上只是伪装成文件 I/O 与内核的通信。

# c# - 如何对 Linq/EF 查询进行软编码

> ID：13333506
> 
> 赞同：3
> 
> 时间：2012-11-11T17:20:34.180
> 
> 标签：c#, linq, entity-framework, entity-framework-5

我想编写一个通用扩展方法，它将根据用户定义的过滤器返回一组指定的对象，其签名如下：

```
public static IEnumerable<T> GetObjects<T>(this ObjectSet<T> os, string fieldName, object value) where T : EntityObject {} 
```

当然，我们可以更改签名以处理多个过滤器，但让我们首先关注单字段过滤器。

你将如何编写一个这样的 Linq 查询？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-11T17:49:48.843

您需要动态构建 lambda 表达式并`Queryable.Where`使用此表达式调用 os：

```
public static IQueryable<T> GetObjects<T>(this ObjectSet<T> os, 
                                          string fieldName, object value)
{
    var param = Expression.Parameter(typeof(T), "x");
    var body = Expression.Equal(
        Expression.PropertyOrField(param, fieldName), 
        Expression.Constant(value, value.GetType()));
    var lambda = Expression.Lambda<Func<T, bool>>(body, param);
    return os.Where(lambda);
} 
```

# java - 将节点添加到 JTree 时 startEditingAtPath() 引发异常

> ID：13333509
> 
> 赞同：3
> 
> 时间：2012-11-11T03:14:07.630
> 
> 标签：java, swing

我正在学习 JTrees 和 Java。
非常欢迎建设性的建议和反馈。

我想我缺少对 JTrees 的一些了解，经过 5 个小时的谷歌搜索和测试，我陷入了困境。我已经尽可能地简化了代码。

```
 public void actionPerformed(ActionEvent event) {
            MyNode selNode = (MyNode) m_tree.getLastSelectedPathComponent();
            if (selNode != null) {
                MyNode newNode = new MyNode("New Node");
                model.insertNodeInto(newNode, selNode,
                        selNode.getChildCount());
                MyNode[] nodes = model.getPathToRoot(newNode);
                TreePath path = new TreePath(nodes);
                m_tree.scrollPathToVisible(path);
                m_tree.setSelectionPath(path);
                // *******   The next line throws the exception shown below.  ****
                m_tree.startEditingAtPath(path);
            }

Exception in thread "AWT-EventQueue-0" java.lang.NullPointerException
at javax.swing.plaf.basic.BasicTreeUI.startEditing(BasicTreeUI.java:2059)
at javax.swing.plaf.basic.BasicTreeUI.startEditingAtPath(BasicTreeUI.java:601)
at javax.swing.JTree.startEditingAtPath(JTree.java:2349)
at ItemCreator.ItemCreator$1.actionPerformed(ItemCreator.java:74) 
```

[代码 - 我的简单可变 JTree](http://www.hal9000.net.au/code/mutablejtree/)

1) 当向 JTree 添加新节点时，代码在线程“AWT-EventQueue-0”java.lang.NullPointerException 中抛出异常

2) 非常欢迎任何一般性的建设性反馈。

亲切的问候

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T10:53:05.130

问题不在于 startEditingPath，而在于不正确的模型实现。基本上它无法通知其侦听器更改，因此 ui 没有机会更新其内部以包含添加的节点。

模型失败

1.  不接受侦听器（addTreeModelListener 的空实现）
2.  更改后甚至不尝试触发（插入，更新......）
3.  不正确的 getPathToRoot 实现

这并非完全微不足道，而且 java doc 稍微（委婉地说）令人困惑——这就是为什么[SwingX](http://swingx.java.net)有一个经过良好测试的实用程序类[TreeModelSupport](http://java.net/projects/swingx/sources/svn/show/trunk/swingx-core/src/main/java/org/jdesktop/swingx/tree)来接管负担。它可以单独使用，也可以作为操作方法的蓝图。

在您的自定义模型中，一些相关更改（不完整，必须相应地修复其他修改方法，删除侦听器也必须如此）：

```
// prepare fix issue 1: instantiate the notification support    
private TreeModelSupport support;

public ItemTreeModel(MyNode root) {
    this.root = root;
    support = new TreeModelSupport(this);
    // remove the following: a model never listens to itself
    // this.addTreeModelListener(new MyTreeModelListener());
}

// fix issue 1: accept listener
public void addTreeModelListener(TreeModelListener l) {
    support.addTreeModelListener(l);
}

// fix issue 2: notify the listeners on inserts
public void insertNodeInto(final MyNode newNode, final MyNode selNode,
        final int childCount) {
    selNode.add(childCount, newNode);
    newNode.setLocation(selNode);
    support.fireChildAdded(new TreePath(getPathToRoot(selNode)),
            childCount, newNode);
}

// fix issue 3: pathToRoot as needed in TreePath 
public MyNode[] getPathToRoot(MyNode node) {
    ArrayList<MyNode> itemArrayList = new ArrayList<MyNode>();
    // TODO - Add root node ?
    // yes, certainly - please read the java doc for TreePath
    while ((node != null)) { // && (node != root)) {
        itemArrayList.add(0, node);
        node = node.getLocation();
    }
    return itemArrayList
            .toArray(new MyNode[itemArrayList.size()]);
} 
```

# c++ - 多重继承和多态性问题

> ID：13333516
> 
> 赞同：11
> 
> 时间：2012-11-11T17:21:44.603
> 
> 标签：c++, multiple-inheritance

考虑这个 C++ 代码：

```
#include <iostream>
using namespace std;

struct B {
    virtual int f() { return 1; }
    int g() { return 2; }
};
struct D1 : public B { // (*)
    int g() { return 3; }
};
struct D2 : public B { // (*)
    virtual int f() { return 4; }
};
struct M : public D1, public D2 {
    int g() { return 5; }
};

int main() {
    M m;
    D1* d1 = &m;
    cout << d1->f()
         << static_cast<D2&>(m).g()
         << static_cast<B*>(d1)->g()
         << m.g();
} 
```

它打印`1225`。如果我们进行虚拟继承，即在标有 (*) 的行中添加`virtual`before ，它会打印.`public``4225`

1.  你能解释一下为什么`1`会改变`4`吗？
2.  你能解释一下`static_cast<D2&>(m)`和的意思`static_cast<B*>(d1)`吗？
3.  你怎么不会迷失在这种组合中？你在画什么吗？
4.  在正常项目中发现如此复杂的设置是否很常见？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-11T17:45:39.433

图片胜于雄辩，所以在答案之前...

* * *

**没有**D1 和 D2 的 B 的虚拟基继承的M 类层次结构：

```
 M
   / \
  D1 D2
  |   |
  B   B 
```

* * *

**D1 和D2**具有 B 的虚拟基继承的M 类层次结构：

```
 M
   / \
  D1 D2
   \ /
    B 
```

* * *

1.  [Cross-Delegation](http://www.parashift.com/c++-faq-lite/mi-delegate-to-sister.html)，或者我喜欢称之为的兄弟多态性。虚拟基继承会将 B::f() 覆盖修复为 D2:f()。希望当您考虑在何处实现虚函数以及它们作为继承链的结果覆盖什么时，图片有助于解释这一点。

2.  在这种情况下，[`static_cast`](http://www.cplusplus.com/doc/tutorial/typecasting/)运算符的使用推动了从派生类到基类类型的转换。

3.  阅读非常糟糕的代码并了解该语言的基础如何“工作”的大量经验

4.  谢天谢地没有。这并不常见。但是，如果这完全令人困惑，那么原始的 iostream 库会让您做噩梦。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-11T17:41:40.197

> 你能解释为什么 1 变成 4 吗？

为什么会变成`4`? 因为[交叉授权](http://www.parashift.com/c++-faq-lite/mi-delegate-to-sister.html)。

这是虚拟继承之前的继承图：

```
B   B
|   |
D1  D2
 \ /
  M 
```

`d1`是 a `D1`，所以它`D2`甚至不知道存在，它的父 ( `B`) 也不知道`D2`存在。唯一可能的结果是`B::f()`被调用。

添加虚拟继承后，基类合并在一起。

```
 B
 / \
D1  D2
 \ /
  M 
```

在这里，当您请求`d1`时`f()`，它会查看其父级。现在，他们共享相同的`B`，所以`B`'s`f()`将被覆盖`D2::f()`，你得到`4`.

是的，这很奇怪，因为这意味着它`D1`已经设法从 调用了一个函数`D2`，而它对此一无所知。这是 C++ 中比较奇怪的部分之一，通常会被避免。

* * *

> 你能解释一下 static_cast(m) 和 static_cast(d1) 的含义吗？

你不明白什么？他们分别施放`m`和`d1`到`D2&`和`B*`。

* * *

> 你怎么不会迷失在这种组合中？你在画什么吗？

在这种情况下不是。它很复杂，但足够小，可以留在你的脑海中。我在上面的示例中绘制了图表，以使事情尽可能清晰。

* * *

> 在正常项目中发现如此复杂的设置是否很常见？

不。每个人都知道要避免可怕的菱形继承模式，因为它太复杂了，而且通常有一种更简单的方法可以做任何你想做的事情。

一般来说，最好是[组合而不是继承](https://stackoverflow.com/questions/49002/prefer-composition-over-inheritance)。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-11T17:40:44.060

这个问题实际上是多个问题：

1.  为什么使用非继承时`virtual`函数没有被覆盖？答案当然是你有两个对象：一个是覆盖的基础，另一个是不覆盖的基础。根据您在调用时认为您的对象从哪个分支派生，您将得到不同的结果。当您将设置更改为只有一个子对象时，将考虑继承图中的任何覆盖（如果两个分支都覆盖它，我认为除非您在分支再次合并的地方覆盖它，否则您会收到错误消息。`B::f()``virtual``Base``D1``f()``D2``f()``f()``B`
2.  是什么`static_cast<D2&>(m)`意思？`f()`由于来自 的有两个版本`Base`，因此您需要选择您想要的一个。与`static_cast<D2&>(m)`您一起将其`M`视为一个`D2`对象。如果没有强制转换，编译器将无法判断您正在查看的两个主题中的哪一个，并且会产生歧义错误。
3.  是什么`static_cast<B*>(d1)`意思？它恰好是不必要的，但仅将对象视为`B*`对象。

一般来说，我倾向于避免对任何不重要的事情进行多重继承。大多数时候，我使用多重继承来利用空基优化或创建具有可变数量成员的东西（想想`std::tuple<...>`）。我不确定我是否真的需要使用多重继承来处理生产代码中的多态性。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-11T17:55:12.483

> 1) 你能解释一下为什么 1 变成 4 吗？

如果没有虚拟继承，则有两个in**实例**，一个用于这个“菱形”的每个分支。菱形边之一 ( ) 会覆盖该函数，而另一个 ( ) 则不会。由于被声明为，意味着您希望访问其函数*未被*覆盖的副本。如果你要投到，你会得到不同的结果。`B``M``D2``D1``d1``D1``d1->f()``B`*`D2`*

 *通过使用虚拟继承，您可以将 的两个实例合并`B`为一个，因此一旦创建 ，就可以`D2::f`有效地覆盖。`B:f``M`

> 2）你能解释一下`static_cast<D2&>(m)`和的意思`static_cast<B*>(d1)`吗？

他们分别投到`D2&`和`B*`。由于`g`不是虚拟的，因此`B:::g`被调用。

> 3）你怎么不会迷失在这种组合中？你在画什么吗？

有时 ;）

> 4）在正常项目中发现如此复杂的设置是否常见？

不太常见。事实上，没有多重更不用说虚拟继承（Java，C#...），所有语言都可以很好地运行。

但是，在某些情况下它可以使事情变得更容易，尤其是在库开发中。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-11-11T17:50:40.357

> (1) 你能解释一下为什么 1 变成 4 吗？

没有`virtual`继承，有2个独立的继承层次；`B->D1->M`和`B->D2->M`。所以想象2个`virtual`函数表（尽管这是实现定义的）。
当您调用`f()`with 时`D1*`，它只知道关于，**仅**`B::f()`此而已。通过`virtual`继承，base`class B`被委托给`M`并因此`D2::f()`被视为`class M`.

> (2) 你能解释一下`static_cast<D2&>(m)`和的意思`static_cast<B*>(d1)`吗？

`static_cast<D2&>(m)`, 就像考虑 as 的对象，`class M`就像考虑as`class D2`
`static_cast<B*>(d1)`的指针。 两者都是有效的演员表。 因为不是函数选择发生在*compile-time*。如果是这样，那么所有这些选角都无关紧要。`class D1``class B1`

`g()``virtual`*`virtual`*

 *> (3) 你怎么不会迷失在这种组合中？你在画什么吗？

当然它很复杂，乍一看，如果有这么多这样的类，很容易迷路。

> （4）在正常项目中是否经常发现这种复杂的设置？

**一点也不**，这是不寻常的，有时是代码的味道。**

# hadoop - 启动 Hive 时出错：java.lang.NoClassDefFoundError: org/apache/hadoop/hive/conf/HiveConf

> ID：13333519
> 
> 赞同：3
> 
> 时间：2012-11-11T17:22:07.723
> 
> 标签：hadoop, hbase, hive

我已经下载了 Hive 的最新稳定版本，当我启动 /usr/local/hive/bin/hive 时，它​​给了我这个错误：

```
Exception in thread "main" java.lang.NoClassDefFoundError: org/apache/hadoop/hive/conf/HiveConf
at java.lang.Class.forName0(Native Method)
at java.lang.Class.forName(Class.java:264)
at org.apache.hadoop.util.RunJar.main(RunJar.java:149)
Caused by: java.lang.ClassNotFoundException: org.apache.hadoop.hive.conf.HiveConf
at java.net.URLClassLoader$1.run(URLClassLoader.java:366)
at java.net.URLClassLoader$1.run(URLClassLoader.java:355)
at java.security.AccessController.doPrivileged(Native Method)
at java.net.URLClassLoader.findClass(URLClassLoader.java:354)
at java.lang.ClassLoader.loadClass(ClassLoader.java:423)
at java.lang.ClassLoader.loadClass(ClassLoader.java:356)
... 3 more 
```

Hadoop DFS 已启动并正常工作，我已更改 /usr/local/hive/conf/hive-env.sh 以导出 HADOOP_HOME。

有谁知道我还能做什么？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T12:24:55.247

除了编辑 hive-env.sh 之外，您还需要编辑 bash_profile。

```
vim ~/.bash_profile 
```

将以下行添加到您的 bash_profile

```
export HIVE_HOME=/usr/local/hive
export PATH=$PATH:$HIVE_HOME/bin 
```

保存此文件，然后

```
source ~/.bash_profile 
```

如果这仍然不起作用，请包含您的 hive-env.sh 文件和 hive-site.xml 文件。另外请告诉我您使用的是 derby 还是 mysql 作为 Metastore。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T16:02:30.867

解决移动：

```
export HADOOP_CLASSPATH=/usr/local/hbase/hbase-0.94.1.jar:/usr/local/hbase/hbase-0.94.1-test.jar:/usr/local/hbase/conf:/usr/local/hbase/lib/zookeeper-3.4.3.jar:/usr/local/hive/lib/*.jar:/usr/local/hbase 
```

从**/usr/local/hadoop/conf/hadoop-env.sh**到**~/.bashrc**

谢谢您的帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-07-18T09:04:49.090

如果您在 hive-imports 时在 sqoop 中遇到此问题，那么您需要从 $HIVE_HOME/lib 文件夹中复制 hive-common-3.1.2.jar（或任何版本的 hive-common-xxxjar）并将其粘贴到 $ SQOOP_HOME/lib 文件夹，错误将消失

# javascript - 使用 javascript 在 Windows 8 应用程序中保存图像

> ID：13333520
> 
> 赞同：0
> 
> 时间：2012-11-11T17:22:14.957
> 
> 标签：javascript, windows-8

我正在为 Windows 8 编写一个应用程序，它显示来自 json 文件的图像。我想添加将图像保存到本地计算机的功能，但我不知道从哪里开始。

所以我只是在寻求建议以及在哪里寻找以了解如何做到这一点，我想明确表示我不是在向人们询问代码，而只是寻求一些关于如何找到如何去做的指导。

先感谢您

编辑：我在环顾四周后找到了一种方法，我发现我能够对我试图保存的图像进行 ajax 调用并让它返回一个 Blob，然后将其写入文件

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T13:30:22.217

在多看几眼之后，我找到了一种方法，我发现我能够对我试图保存的图像进行 ajax 调用并让它返回一个 Blob，然后将其写入文件

# objective-c - 如何在顶部使用 UIViewContentModeScaleAspectFill

> ID：13333522
> 
> 赞同：4
> 
> 时间：2012-11-11T17:22:48.477
> 
> 标签：objective-c, xcode, uiimageview

如果我做`self.imageOfCatalog.Image.contentMode = UIViewContentModeScaleAspectFill;// | UIViewContentModeTop;`

我用一个小缓存得到了我想要的东西。看起来像IOS然后把图像的中心。

我希望 UIImageView 显示图像的顶部并裁剪其余部分。

我该怎么做？

这是屏幕截图：

![在此处输入图像描述](../Images/bb07d5c05bc8b5b6a3588492e5a74146.png)

图像足够好。但是，我希望显示的部分是顶部而不是中心部分。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-19T08:49:59.610

这对于 UIImageView 是不可能的，

*   你必须继承 UIView
*   添加一个 UIImageview 作为属性并将其添加为子视图。
*   将 clipsToBounds 设置为 YES `[self setClipsToBounds:YES];`
*   将 UIImageView 对齐到视图的顶部
*   根据layoutSubviews中图片的比例调整UIImageView的大小

一个例子可以在[这里](https://stackoverflow.com/questions/3272335/alignment-uiimageview-with-aspect-fit)找到。

# azure-devops - 从 TFS2010 升级到 Team Foundation 服务

> ID：13333523
> 
> 赞同：1
> 
> 时间：2012-11-11T17:22:51.303
> 
> 标签：azure-devops

我在一家公司工作，该公司有一个小型开发团队（约 30 人），分布在多个大洲和多个开发平台（Windows 和 OSX）。因此，Team Foundation Service 似乎是一种很好的方式来获得与不同开发平台一起工作的高可用性源代码控制。我们目前正在使用 TFS2010，并且在我们的签入历史记录中有大约 20,000 次签入。如果我们要迁移到 TFService，我们希望能够带来源代码控制历史。

*   这可能吗？
*   如果可能，是否有任何可用的指南涵盖如何进行此升级？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-11T18:47:33.450

> Team Foundation Service 似乎是一种很好的方式来拥有一个与不同开发平台一起工作的高可用性源代码控制。

我不能保证多个平台（目前），但对于所有与 Windows 相关的事情，我对“在云中”的 TFS 感到非常满意。

这篇文章看起来很有希望：[使用 TFS 集成工具从本地 Team Foundation Server 迁移到 Team Foundation Service Preview](http://msdn.microsoft.com/en-us/magazine/jj130558.aspx)

> 在本文中，我演示了从本地 Microsoft Team Foundation Server (TFS) 2010 迁移到使用最新 TFS 集成工具的 Team Foundation Service Preview。
> ...
> TFS 集成工具可帮助您移动并保持版本控制 (VC) 数据、工作项跟踪 (WIT) 数据和两者中的链接的完整性。

这篇文章的关键似乎是 TFS 集成平台的使用，[在 Codeplex 上可以找到](http://tfsintegration.codeplex.com/)

请注意，最近 TFS 预览版（我相信是 2012 年 10 月）上线，因此它不再是“预览版”。

这个过程的一个很好的搜索短语似乎是“将本地 TFS 迁移到云”。

# visual-studio - 当明确文件存在时，为什么 IISExpress 给我一个 404？

> ID：13333524
> 
> 赞同：0
> 
> 时间：2012-11-11T17:23:00.983
> 
> 标签：visual-studio, iis-express

我有一个带有简单文件“release-notes.html”的路径 C:\development\app。

我已经在相同的路径中启动了 IISExpress，如下所示：

```
C:\development\app\iisexpress /port:8080 /path:. 
```

然而，当我浏览到 release-notes.html 文件时，我收到了 404 错误。

我可以看到 IISExpress 启动正常，为什么当文件存在时我会收到 404 错误？

# python - Python代码翻译问题或随机数生成中的语言差异

> ID：13333525
> 
> 赞同：0
> 
> 时间：2012-11-11T17:23:12.717
> 
> 标签：python, simulation, qbasic

我是 Python 新手，没有使用 QBasic 的经验。我在 Python 中运行了一个模拟，得出了理论上错误的值。然后我在 QBasic 中运行它并得出了理论上的预测值。

以下是测试用例。我只计算概率 P(0.9<%Y<=1.8) 所以计数必须在这些值范围内。1-random.random() 仅适用于这种情况，当我尝试将其用于所有情况时，他们仍然得出错误的值。这是理论上的结果，你可以看到它有什么不同：

> y~u(0,1) = 0.575
> 
> y~exp(2) = 0.3371
> 
> x1~u(0,1) x2~u(0,2) = 0.4475
> 
> P(y=0.25)=0.8 P(y=1.5)=0.2 = 0.32

* * *

在 Python 中，模拟代码为：

```
def test():
  x1,x2,c = 0.0,0.0,0.0
  for i in range(10000):
    if random.random()< 0.8:
      x1 += 0.25
    else:
      x2 += 1.5
    y = x1 + x2
    if y>0.9 and y<=1.8:
      c = c + 1
  return x1,x2,c

print "test: ",test()

def sim(a,b):
  #pyab1 = sum([a for a in a if a>0.9 and a<=1.8])/10000
  #pyab2 = sum([b for b in b if b>0.9 and b<=1.8])/10000
  #print "*****",float(pyab1+pyab2)
  #print a+b
  #array1 = [[a],[b]]
  array1 = a+b
  #array1.extend(a)
  #array1.extend(b)
  #c = 0
  #for y in array1:
    #if y>0.9 and y<=1.8:
      #c = c + 1
  pyab = sum([y for y in array1 if y>0.9 and y<=1.8])/10000
  print("P(a < x <= b) : {0:8.4f}".format(pyab)) 
```

这是 Python 输出，后面是它应该给出的值，但这显示了结果有多远。

```
case 1: P(a < x <= b) : 0.7169 #should be 0.575 
case 2: P(a < x <= b) : 0.4282 #should be 0.3371 
case 3: P(a < x <= b) : 0.5966 #should be 0.4475 
case 4: P(a < x <= b) : 0.5595 #should be 0.32 
```

* * *

在 QBasic 中，模拟代码是：

情况1：

```
RANDOMIZE
FOR i = 1 TO 10000
    X1 = RND(1)
    X2 = RND(1)
    Y = X1+X2
    IF (Y>0.9) AND (Y<=1.8) THEN C=C+1
NEXT i

PRINT C/10000 
```

案例二：

```
RANDOMIZE
FOR i = 1 TO 10000
    X1 = (-0.5)*(LOG(1-RND(1)))
    X2 = (-0.5)*(LOG(1-RND(1)))
    Y = X1+X2
    IF (Y>0.9) AND (Y<=1.8) THEN C=C+1
NEXT i

PRINT C/10000 
```

案例3：

```
RANDOMIZE
FOR i = 1 TO 10000
    X1 = RND(1)
    X2 = RND(1)*2
    Y = X1+X2
    IF (Y>0.9) AND (Y<=1.8) THEN C=C+1
NEXT i

PRINT C/10000 
```

案例4：

```
RANDOMIZE
FOR i = 1 TO 10000
    X14 = RND(1)
    X24 = RND(1)
    IF (X14<0.8) THEN X41=0.25 ELSE X41=1.5
    IF (X24<0.8) THEN X42=0.25 ELSE X42=1.5
    Y = X1+X2
    IF (Y>0.9) AND (Y<=1.8) THEN C=C+1
NEXT i

PRINT C/10000 
```

这是 QBasic 输出，它显示了这实际上是如何获得正确的结果的。

```
case 1: P(a < x <= b) :  0.5715 
case 2: P(a < x <= b) :  0.3371 
case 3: P(a < x <= b) :  0.4413 
case 4: P(a < x <= b) :  0.3213 
```

以上所有代码都对我有用，没有错误。我看不到用于获取值的算法有任何差异。不确定 Python 生成的数字是否与 QBasic 不同，以及这是否解释了这种行为背后的原因。

我对这两种语言都很陌生，但 QBasic 似乎非常原始，而且 Python 似乎更有可能得到正确的答案而 QBasic 得到错误的答案。但相反的情况正在发生。它似乎与代码中的任何差异无关。在翻译时，他们似乎都在说同样的话。

我对他们给出两种不同结果的原因很感兴趣。我更感兴趣的是为什么 Python 给出了错误的答案而 QBasic 给出了正确的答案。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-11T18:21:40.303

您的 Python 代码完全错误。我认为你想要它做的是以下几点：

*   取两个数组 a 和 b，每个数组包含由某个随机函数生成的 10000 个数字。（等效地，每个数组都包含 10000 个样本，这些样本来自遵循某个给定分布的数据。）
*   将这些值配对为 10000 对，每对从 a 中获取一个元素，从 b 中获取一个元素。
*   取每一对的总和。
*   计算这 10000 个对和中有多少在 0.9 和 1.8 之间
*   将上述计数除以 10000 以获得从这些分布中提取的任何给定数据对的总和在 0.9 和 1.8 之间的概率，并打印该概率。

但是，您的 sim(a, b) 函数正在做一些*完全不同*的事情。基本上，你实际上在做的是：

*   连接两个 10000 元素数组，形成它们元素的 20000 元素数组。
*   取这个新的 20000 元素数组中大于 0.9 的任何元素的总和。
*   将该总和除以 10000 并打印出来。

此算法与您的 Q-Basic 代码中的任何内容都没有相似之处。

如果我正确理解了您的问题，我认为您希望您的 sim 功能是这样的：

```
def sim(x_sample, y_sample):

    count = 0
    for i in range(10000):
        if 0.9 <= x_sample[i] + y_sample[i] <= 1.8:
            count += 1

    probability = count/10000.0

    print("P(a < x <= b) : {0:8.4f}".format(probability)) 
```

（几乎可以肯定有更优雅和 Pythonic 的方式来实现上述功能，但这种方式对于 Python 新手来说应该很容易理解。）

这是我在解释器中为您的案例 1 到 3 运行的测试结果，因为我已经从 QBasic 程序中理解了它们。我没有包含测试 4 的版本，因为我不理解测试 4 的 QBasic 代码。不过，前三个测试的结果是你说的应该是这样。

```
>>> from random import random
>>> 
>>> sim([random() for i in range(10000)],
...     [random() for i in range(10000)])
P(a < x <= b) :   0.5746
>>>      
... from math import log
>>> 
>>> sim([-0.5*log(1-random()) for i in range(10000)],
...     [-0.5*log(1-random()) for i in range(10000)])
P(a < x <= b) :   0.3405
>>>     
... sim([random() for i in range(10000)],
...     [2*random() for i in range(10000)])
P(a < x <= b) :   0.4479 
```

# f# - F# 模块/命名空间错误

> ID：13333527
> 
> 赞同：4
> 
> 时间：2012-11-11T17:23:38.553
> 
> 标签：f#

我的第一个 F# 程序。

我有一个像这样的文件：

```
namespace LanguageMapper.Data

#if INTERACTIVE
#r "System.Data"
#r "System.Data.Linq"
#r "FSharp.Data.TypeProviders"
#endif

open System.Data
open System.Data.Linq
open Microsoft.FSharp.Data.TypeProviders

module Data = 

    // You can use Server Explorer to build your ConnectionString. 
    type SqlConnection = Microsoft.FSharp.Data.TypeProviders.SqlDataConnection<ConnectionString = @"connstring">
    let db = SqlConnection.GetDataContext() 
```

然后我有另一个像这样的文件

```
namespace LanguageMapper.Program

open Data

module Program = 

[<EntryPoint>]
let main argv = 

    let getLocale x = 
        match x with
        | [|"live"|] -> "live"
        | [|"dev"|] -> "dev"
        | _ -> "local" 
```

最重要的是，`open Data`我在 VS 中得到一个红色波浪线告诉我：

> “错误 1 ​​此声明通过部分限定路径打开命名空间或模块‘Microsoft.FSharp.Data’。调整此代码以使用命名空间的完整路径。此更改将使您的代码更加健壮，因为新结构被添加到F# 和 CLI 库。”

我究竟做错了什么？我只想从另一个文件中引用一个文件。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-11T17:32:12.490

您需要使用其完全限定名称（包括其命名空间）打开模块。所以`LanguageMapper.Program`你需要`open LanguageMapper.Data.Data`（只有最后一位是模块名称）。

编译器抱怨您的`open`定义，因为它只指定打开名为 Data 的命名空间或模块 - 它在 Microsoft.FSharp.Data 中找到一个，可能是因为 Microsoft.FSharp 命名空间有一些“自动”打开。

# content-management-system - silverstripe 权限 - 防止数据对象被编辑

> ID：13333530
> 
> 赞同：1
> 
> 时间：2012-11-11T17:24:17.050
> 
> 标签：content-management-system, silverstripe

目前我正在检查 Dataobject 的 canEdit 和 canDelete 函数。据我所见，我必须始终在模板或其他 php 代码中手动调用该函数......有没有办法防止编辑/删除某个数据对象？当我第一次看到 canEdit 函数时，我希望它会在编写 DataObject 之前由 silverstripe 自动检查。

所以我只希望允许 ADMINS 编写这个 DataObject：

```
public function canEdit($member = null){
    return(
        Permission::checkMember($member = Member::currentUser(), 'ADMIN')
    );
} 
```

问候，弗洛里安

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T23:50:57.337

```
public function canEdit($member){
  if (Permission::check('ADMIN')){
      return true;
  }else{
     // do something here if applicable 
  } 
} 
```

[参考链接1](http://www.silverstripe.org/data-model-questions/show/6059)

[参考链接 2](http://www.silverstripe.org/general-questions/show/16894)

[参考链接 3](http://www.balbuss.com/adding-new-group-permissions/)

# spring - 春天，休眠与谷歌应用引擎

> ID：13333531
> 
> 赞同：3
> 
> 时间：2012-11-11T17:24:18.357
> 
> 标签：spring, google-app-engine, transactions, google-cloud-datastore

项目名称：CarpoolDB，我已将此项目的 jar 添加到另一个应用程序名称 Carpool 中。在运行拼车应用程序时，我遇到了以下异常。

项目：拼车。在这里，我遇到异常，因为“carpoolService”在作为“Google Web 应用程序”运行时没有自动连接，但在 Tomcat 下运行相同，并且 bean 被正确注入。

```
@Controller
public class PlacesSearchController {

    @Autowired
    CarpoolService carpoolService=null;

    public CarpoolService getCarpoolService() {
        return carpoolService;
    }
    public void setCarpoolService(CarpoolService carpoolService) {
        this.carpoolService = carpoolService;
    }

} 
```

carpool-application-context1.xml

我还有 applicationContext-security.xml，用于弹簧安全性。

项目：CarpoolDB 所有类都在包中，com.company.carpooldb.db

```
 public interface CarpoolService {
        public boolean validateUser(User user);
    }

    @Service("carpoolService")
    public class CarpoolServiceImpl implements CarpoolService{

        @Autowired
        private CarpoolDao carpoolDao=null;

        public CarpoolDao getCarpoolDao() {
            return carpoolDao;
        }

        public void setCarpoolDao(CarpoolDao carpoolDao) {
            this.carpoolDao = carpoolDao;
        }

        @Override
        public boolean validateUser(User user) {
              return carpoolDao.validateUser(user);;
        }

    }

public interface CarpoolDao {
  public boolean validateUser(User user);
}

public class CarpoolDaoImpl extends HibernateDaoSupport implements CarpoolDao{
    @Override
    public boolean validateUser(User user) {
        // TODO Auto-generated method stub
        return false;
    }
} 
```

拼车应用程序上下文.xml

```
<context:annotation-config />
        <context:component-scan base-package="com.onmobile" />
    <context:property-placeholder location="classpath:server.properties" />

    <bean id="sessionFactory" 

class="org.springframework.orm.hibernate3.LocalSessionFactoryBean">
    <property name="mappingResources">
     <list>
            <value>com\company\carpooldb\hbm\User.hbm.xml</value>
     </list>   
     </property>
     <property name="hibernateProperties">
        <props>
            <prop key="hibernate.dialect"><!--Which dialect is used of hibernate according to type of underlying database-->
                org.hibernate.dialect.MySQLDialect
            </prop>
            <prop key="hibernate.show_sql">false</prop>
        </props>
    </property>
    <property name="dataSource"><ref bean="dataSource"/></property> 

</bean>

<beans:bean id="dataSource" class="org.apache.commons.dbcp.BasicDataSource" destroy-method="close">
    <beans:property name="driverClassName"><beans:value>${cm.db.driverClassName}</beans:value></beans:property>
    <beans:property name="url"><beans:value>${cm.db.url}</beans:value></beans:property>
    <beans:property name="username"><beans:value>${cm.db.username}</beans:value></beans:property>
    <beans:property name="password"><beans:value>${cm.db.password}</beans:value></beans:property>
    <beans:property name="testOnBorrow"><beans:value>true</beans:value></beans:property>
    <beans:property name="testOnReturn"><beans:value>true</beans:value></beans:property>
    <beans:property name="validationQuery"><beans:value>select 1</beans:value></beans:property>
</beans:bean>

    <!--Hibernate's transaction manager used for handling database transactions/manipulating data happening-->
    <bean id="transactionManager"
        class="org.springframework.orm.hibernate3.HibernateTransactionManager" >
        <property name="sessionFactory">
            <ref bean="sessionFactory" />
        </property>
    </bean>

    <bean id="carpoolDaoImpl" class="com.company.carpooldb.db.CarpoolDaoImpl">
        <property name="sessionFactory">
            <ref bean="sessionFactory" />
        </property>
    </bean> 
```

在运行应用程序时，我遇到了异常，

```
log4j:WARN Error during default initialization
java.lang.NoClassDefFoundError: java.io.FileOutputStream is a restricted class. Please see the Google  App Engine developer's guide for more details.
    at com.google.appengine.tools.development.agent.runtime.Runtime.reject(Runtime.java:51)
    at org.apache.log4j.FileAppender.setFile(FileAppender.java:290)
.........

    at com.google.appengine.tools.development.DevAppServerMain$StartAction.apply(DevAppServerMain.java:162)
    at com.google.appengine.tools.util.Parser$ParseResult.applyArgs(Parser.java:48)
    at com.google.appengine.tools.development.DevAppServerMain.<init>(DevAppServerMain.java:113)
    at com.google.appengine.tools.development.DevAppServerMain.main(DevAppServerMain.java:89)
log4j:WARN No appenders could be found for logger (org.springframework.web.context.ContextLoader).
log4j:WARN Please initialize the log4j system properly.
11 Nov, 2012 5:14:18 PM com.google.apphosting.utils.jetty.JettyLogger warn
WARNING: Failed startup of context com.google.apphosting.utils.jetty.DevAppEngineWebAppContext@5e55ab{/,D:\EclipseEuropa\CarpoolingGAE\war}
org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'placesSearchController': Injection of autowired dependencies failed; nested exception is org.springframework.beans.factory.BeanCreationException: Could not autowire field: com.onmobile.carpooldb.db.CarpoolService com.onmobile.carpool.controller.PlacesSearchController.carpoolService; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'carpoolService': Injection of autowired dependencies failed; nested exception is org.springframework.beans.factory.BeanCreationException: Could not autowire field: private com.onmobile.carpooldb.db.CarpoolDao com.onmobile.carpooldb.db.CarpoolServiceImpl.carpoolDao; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'carpoolDaoImpl' defined in class path resource [carpool-application-context.xml]: Cannot resolve reference to bean 'sessionFactory' while setting bean property 'sessionFactory'; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'sessionFactory' defined in class path resource [carpool-application-context.xml]: Invocation of init method failed; nested exception is java.lang.NoClassDefFoundError: java.net.InetAddress is a restricted class. Please see the Google  App Engine developer's guide for more details.
    at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.postProcessPropertyValues(AutowiredAnnotationBeanPostProcessor.java:286)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1064)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:517)
.........   
at com.google.appengine.tools.development.DevAppServerMain.<init>(DevAppServerMain.java:113)
    at com.google.appengine.tools.development.DevAppServerMain.main(DevAppServerMain.java:89)
Caused by: org.springframework.beans.factory.BeanCreationException: Could not autowire field: com.onmobile.carpooldb.db.CarpoolService com.onmobile.carpool.controller.PlacesSearchController.carpoolService; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'carpoolService': Injection of autowired dependencies failed; nested exception is org.springframework.beans.factory.BeanCreationException: Could not autowire field: private com.onmobile.carpooldb.db.CarpoolDao com.onmobile.carpooldb.db.CarpoolServiceImpl.carpoolDao; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'carpoolDaoImpl' defined in class path resource [carpool-application-context.xml]: Cannot resolve reference to bean 'sessionFactory' while setting bean property 'sessionFactory'; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'sessionFactory' defined in class path resource [carpool-application-context.xml]: Invocation of init method failed; nested exception is java.lang.NoClassDefFoundError: java.net.InetAddress is a restricted class. Please see the Google  App Engine developer's guide for more details.
    at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.inject(AutowiredAnnotationBeanPostProcessor.java:507)
    at org.springframework.beans.factory.annotation.InjectionMetadata.inject(InjectionMetadata.java:84)
    at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.postProcessPropertyValues(AutowiredAnnotationBeanPostProcessor.java:283)
    ... 31 more
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'carpoolService': Injection of autowired dependencies failed; nested exception is org.springframework.beans.factory.BeanCreationException: Could not autowire field: private com.onmobile.carpooldb.db.CarpoolDao com.onmobile.carpooldb.db.CarpoolServiceImpl.carpoolDao; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'carpoolDaoImpl' defined in class path resource [carpool-application-context.xml]: Cannot resolve reference to bean 'sessionFactory' while setting bean property 'sessionFactory'; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'sessionFactory' defined in class path resource [carpool-application-context.xml]: Invocation of init method failed; nested exception is java.lang.NoClassDefFoundError: java.net.InetAddress is a restricted class. Please see the Google  App Engine developer's guide for more details.
    at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.postProcessPropertyValues(AutowiredAnnotationBeanPostProcessor.java:286)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1064)
....    at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:780)
    at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:697)
    at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.inject(AutowiredAnnotationBeanPostProcessor.java:478)
    ... 33 more
Caused by: org.springframework.beans.factory.BeanCreationException: Could not autowire field: private com.onmobile.carpooldb.db.CarpoolDao com.onmobile.carpooldb.db.CarpoolServiceImpl.carpoolDao; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'carpoolDaoImpl' defined in class path resource [carpool-application-context.xml]: Cannot resolve reference to bean 'sessionFactory' while setting bean property 'sessionFactory'; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'sessionFactory' defined in class path resource [carpool-application-context.xml]: Invocation of init method failed; nested exception is java.lang.NoClassDefFoundError: java.net.InetAddress is a restricted class. Please see the Google  App Engine developer's guide for more details.
    at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.inject(AutowiredAnnotationBeanPostProcessor.java:507)
    at org.springframework.beans.factory.annotation.InjectionMetadata.inject(InjectionMetadata.java:84)
    at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.postProcessPropertyValues(AutowiredAnnotationBeanPostProcessor.java:283)
    ... 44 more
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'carpoolDaoImpl' defined in class path resource [carpool-application-context.xml]: Cannot resolve reference to bean 'sessionFactory' while setting bean property 'sessionFactory'; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'sessionFactory' defined in class path resource [carpool-application-context.xml]: Invocation of init method failed; nested exception is java.lang.NoClassDefFoundError: java.net.InetAddress is a restricted class. Please see the Google  App Engine developer's guide for more details.
    at org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveReference(BeanDefinitionValueResolver.java:328)
    at org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveValueIfNecessary(BeanDefinitionValueResolver.java:106)
....    at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:697)
    at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.inject(AutowiredAnnotationBeanPostProcessor.java:478)
    ... 46 more
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'sessionFactory' defined in class path resource [carpool-application-context.xml]: Invocation of init method failed; nested exception is java.lang.NoClassDefFoundError: java.net.InetAddress is a restricted class. Please see the Google  App Engine developer's guide for more details.
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1412)
....    at org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveReference(BeanDefinitionValueResolver.java:322)
    ... 59 more
Caused by: java.lang.NoClassDefFoundError: java.net.InetAddress is a restricted class. Please see the Google  App Engine developer's guide for more details.
    at com.google.appengine.tools.development.agent.runtime.Runtime.reject(Runtime.java:51)
....    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1457)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1409)
    ... 66 more
11 Nov, 2012 5:14:18 PM com.google.apphosting.utils.jetty.JettyLogger warn
WARNING: Nested in org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'placesSearchController': Injection of autowired dependencies failed; nested exception is org.springframework.beans.factory.BeanCreationException: Could not autowire field: com.onmobile.carpooldb.db.CarpoolService com.onmobile.carpool.controller.PlacesSearchController.carpoolService; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'carpoolService': Injection of autowired dependencies failed; nested exception is org.springframework.beans.factory.BeanCreationException: Could not autowire field: private com.onmobile.carpooldb.db.CarpoolDao com.onmobile.carpooldb.db.CarpoolServiceImpl.carpoolDao; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'carpoolDaoImpl' defined in class path resource [carpool-application-context.xml]: Cannot resolve reference to bean 'sessionFactory' while setting bean property 'sessionFactory'; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'sessionFactory' defined in class path resource [carpool-application-context.xml]: Invocation of init method failed; nested exception is java.lang.NoClassDefFoundError: java.net.InetAddress is a restricted class. Please see the Google  App Engine developer's guide for more details.:
java.lang.NoClassDefFoundError: java.net.InetAddress is a restricted class. Please see the Google  App Engine developer's guide for more details.
    at com.google.appengine.tools.development.agent.runtime.Runtime.reject(Runtime.java:51)
    at org.hibernate.id.AbstractUUIDGenerator.<clinit>(AbstractUUIDGenerator.java:22)
    ......at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:697)
    at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.inject(AutowiredAnnotationBeanPostProcessor.java:478)
    at org.springframework.beans.factory.annotation.InjectionMetadata.inject(InjectionMetadata.java:84)
    at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.postProcessPropertyValues(AutowiredAnnotationBeanPostProcessor.java:283)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1064)
.....
    at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:697)
    at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.inject(AutowiredAnnotationBeanPostProcessor.java:478)
    at org.springframework.beans.factory.annotation.InjectionMetadata.inject(InjectionMetadata.java:84)
    at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.postProcessPropertyValues(AutowiredAnnotationBeanPostProcessor.java:283)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1064)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:517)
.....   at com.google.appengine.tools.development.DevAppServerMain.main(DevAppServerMain.java:89)
The server is running at http://localhost:8888/ 
```

为什么我得到 1\. java.lang.NoClassDefFoundError: java.io.FileOutputStream 是一个受限类。

我没有在文件上写任何东西

1.  GAE 不支持我知道的少数 API，但我的应用程序已经在 MySQL 上工作，我想同时支持两者。我的意思是基于我的属性文件中设置的属性，我有时想使用 MySQL，有时想使用 GAE 数据存储。

我正在使用弹簧 3。

在这种情况下我应该怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-29T19:00:33.763

正如 Boris 所指出的，问题似乎与您的会话工厂有关。GAE 不支持 jdbc，而且看起来你的 sessionFactory 是为 mysql 配置的：

```
<property name="hibernateProperties">
    <props>
        <prop key="hibernate.dialect"><!--Which dialect is used of hibernate according to type of underlying database-->
            org.hibernate.dialect.MySQLDialect
        </prop>
        <prop key="hibernate.show_sql">false</prop>
    </props>
</property> 
```

如果您正在使用依赖于 Hibernate 的现有代码库，您可以尝试将 Hibernate 配置为由 Cloud SQL 支持运行：[https ://developers.google.com/appengine/articles/using_hibernate](https://developers.google.com/appengine/articles/using_hibernate)

至于 FileOutputStream 问题，我相信 log4j 的默认附加程序之一是 FileAppender，因此简单地不配置 log4j 不会解决它 - 您需要显式配置它。看看这个页面是否有帮助：[http ://blog.xam.de/2010/03/logging-in-google-appengine-for-java.html](http://blog.xam.de/2010/03/logging-in-google-appengine-for-java.html)

# java - 如何使用 iText 在段落中设置默认 windows 字体

> ID：13333532
> 
> 赞同：0
> 
> 时间：2012-11-11T17:24:19.553
> 
> 标签：java, itext

如何通过在 iText 中给出它的路径来设置字体类型

我试过这个。但它不起作用。

```
Font ff = new Font(Font.getFamily("C:/Windows/Fonts/Harry Potter Regular.ttf"));
ff.setSize(12); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T09:49:55.433

首先创建一个`BaseFont`需要的字体文件：

```
BaseFont bf = BaseFont.createFont(src, myEncoding, BaseFont.EMBEDDED); 
```

然后创建具有大小和样式属性的实际字体，例如：

```
com.itextpdf.text.Font f = new Font(bf, 14.5f, Font.ITALIC | Font.BOLD); 
```

您使用的 getFamily 方法是指 Acrobat 预定义的字体：`FontFactory.COURIER, FontFactory.HELVETICA, FontFactory.TIMES_ROMAN, FontFactory.SYMBOL, FontFactory.ZAPFDINGBATS`.

# iphone - 发送或取消短信后，短信窗口不会关闭

> ID：13333533
> 
> 赞同：-2
> 
> 时间：2012-11-11T17:24:31.937
> 
> 标签：iphone, ios, sms

```
- (IBAction)SendTxt:(id)sender {

MFMessageComposeViewController *textComposer = [[MFMessageComposeViewController alloc] init];

[textComposer setMessageComposeDelegate:self];

if ([MFMessageComposeViewController canSendText]) {

    [textComposer setRecipients:[NSArray arrayWithObjects:@"123456",@"123456", nil]];
    [textComposer setBody:@"HELP ME"];
    [self presentViewController:textComposer animated:YES completion:NO];

}

    else {
        NSLog(@"Can't open Text");
    }
}

-(void)messageComposeViewController:(MFMessageComposeViewController *)controller didFinishWithResult:(MessageComposeResult)result

{

switch (result) {
    case MessageComposeResultSent:
        NSLog(@"SENT");
        break;

    case MessageComposeResultFailed:
        NSLog(@"FAILED");
        break;

    case MessageComposeResultCancelled:
        NSLog(@"CANCELLED");
        break;

    default:
        break;
}

} 
```

我有上面的代码可以正常打开短信窗口。它工作正常并发送短信，但发送或取消后短信窗口不会关闭。NSLog注册发送或取消但短信窗口不会消失！

任何人都可以帮忙吗？谢谢垫

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T17:35:24.120

您必须自己使用

```
[self dismissViewControllerAnimated:YES completion:^{ // something to do on completion if you need}]; 
```

# android - 如何在android中扩展菜单选项？

> ID：13333538
> 
> 赞同：0
> 
> 时间：2012-11-11T17:25:06.530
> 
> 标签：android

我写了这段代码`mainactivty.java`

```
@Override
public boolean onCreateOptionsMenu(Menu menu)
{
    menu.add("About");
    return true;
} 
```

它创建了一个菜单，但我希望它在我单击菜单时打开一个新窗口。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T23:44:07.277

我不确定这是否是你想要的（因为它看起来太明显了）但听起来你要求以下

```
@Override
 public boolean onOptionsItemSelected(MenuItem item) {
   switch (item.getItemId()) {

     case R.id.someItem: //this is your menu item in the menu.xml
        startActivity(new Intent(this, MyNewActivity.class)); //here you start your new activity
     break;
   }
} 
```

# javascript - 未定义显示而不是 Twitter 的用户名

> ID：13333543
> 
> 赞同：1
> 
> 时间：2012-11-11T17:25:29.677
> 
> 标签：javascript, jquery, jquery-mobile

我正在我的 jQuery Mobile 页面上实现一个 twitter 推文功能，但我一直在`undefined`显示而不是显示此人的用户名。

顺便说一句，我正在使用谷歌浏览器。正如答案所建议的，我已经编辑了 JavaScript 代码。

HTML：

```
<!DOCTYPE html>
<html>
<head> 
  <title>Twitter Search</title> 
  <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no"> 
  <link rel="stylesheet" href="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.css" />
  <script src="http://code.jquery.com/jquery-1.8.2.min.js"></script>
  <script src="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.js"></script>
   <script src="_/js/myscript.js"></script>
  <link rel="stylesheet" href="_/css/mystyles.css" />
</head>
<body>
<div id="home"data-role="page">
    <div data-role="header" data-position="fixed" data-theme="b">
      <h1>Choose your Query</h1>
    </div><!-- /header -->

    <div data-role="content">   
      <ul>
        <li class="main"><a href="#tweetQ" data-transition="flip" data-search="Coventry">Coventry </a></li>
        <li class="main"><a href="#tweetQ" data-transition="flip" data-search="Birmingham">Birmingham</a></li>
    </ul>

    </div><!-- /content --> 
</div><!-- /page -->

<div id="tweetQ" data-role="page" data-add-back-btn="true">
    <div data-role="header" data-position="fixed" data-theme="b">
      <h1>The Tweets</h1>
    </div><!-- /header -->

    <div data-role="content">   
      <ul data-role="listview"  id="searchlist"> 
      <li><a href="#tweet" data-transition="flip">tweet 1</a></li>
      </ul>

    </div><!-- /content -->
</div><!-- second page -->

<div id="tweet" data-role="page" data-add-back-btn="true">
    <div data-role="header" data-position="fixed" data-theme="b">
      <h1>The account</h1>
    </div><!-- /header -->
    <div data-role="content">   
      <p>Yo</p>     
    </div><!-- /content -->
</div><!-- result page -->

</html>
</body> 
```

JavaScript 代码：

```
$('#tweetQ').live('pageshow', loadSearch);

function loadSearch() {
console.log('data');
var search = $('#tweetQ').data('search');
var url = 'http://search.twitter.com/search.json?q='+ search;
console.log('search');
$.ajax({
url: 'http://search.twitter.com/search.json?q='+search,
dataType: "jsonp",
jsonpCallback: "tweetList",
success:
    function(tweetList) { 
                alert("success");
            }
 });
} 
function tweetList(data) {
console.log('data');
$.each(data.results, function(i, result) {
console.log(result.from_user);
console.log(result.text);
var html = '<li><a href="#tweet"><h3>'+result.from_user+ '</h3></a></li>'
$('ul#searchlist').append(html);
$('ul#searchlist').listview('refresh');
$('ul#searchlist').find("a:last").click(function() {
console.log('click');
});
});
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T17:37:16.113

你的问题在这条线上

```
jsonpCallback: "tweetList" 
```

我相信您正在尝试`tweetList`在请求完成时调用该函数，在这种情况下，您应该设置 success 属性

```
success: tweetList 
```

所以你的ajax调用应该看起来像

```
$.ajax({
    url: 'http://search.twitter.com/search.json?q='+search,
    dataType: "jsonp",
    success:tweetList
 }); 
```

# c# - 调色板窗口/浮动工具窗口 (C# .NET)

> ID：13333548
> 
> 赞同：0
> 
> 时间：2012-11-11T17:26:29.740
> 
> 标签：c#, windows, winforms, floating, palette

我的应用程序需要浮动调色板窗口。我已经自己实现了这种行为，当它是单个文档应用程序时效果很好，但现在我的应用程序需要多个文档窗口。我现在尝试为此调整调色板窗口系统，这使得实现过于hacky，并且在切换文档时效果不佳。

Windows 有一个扩展的窗口样式，`WS_EX_PALETTEWINDOW`我已经尝试通过覆盖来使用它，`CreateParams`但这使我的浮动窗口保持在所有其他正在运行的应用程序之上。我需要他们只停留在我的应用程序之上，并在另一个应用程序进入前台时离开。

有什么建议么？

编辑：最好的解决方案不应该涉及使用 MDI 容器，因为我需要文档窗口本身就是顶级窗口。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T19:59:17.543

使用[DockPanel 套件](https://sourceforge.net/projects/dockpanelsuite/)。它是用于处理工具窗口的现成库。

此外，如果您愿意，您可以启用用户自定义的工具窗口停靠。

# java - Jackson - 更紧凑地将通用集合序列化为 json

> ID：13333549
> 
> 赞同：3
> 
> 时间：2012-11-11T17:26:30.083
> 
> 标签：java, json, jackson

我想以紧凑的方式用杰克逊序列化通用集合，这样在输出中我会得到看起来像

> {genericType : [ {field1:1},{field1:25} ]}

# 例子：

我有一个看起来像的 PoJo

```
public class ContainList<SomePojo> {
@JsonTypeInfo(use=Id.NAME, include=As.WRAPPER_OBJECT, property="type")
@JsonSubTypes({
    @JsonSubTypes.Type(value=SimplePojo1.class, name="simplePojo11")
    ,@JsonSubTypes.Type(value=SimplePojo2.class, name="simplePojo22")
})    
   public List<SomePojo> list;
} 
```

现在，当我序列化对象时，我得到了类似的东西

```
{
  "list": [
    {
      "simplePojo11": {
        "simplePojo11Field": "privet"
      }
    },
    {
      "simplePojo11": {
        "simplePojo11Field": "poka"
      }
    }
  ]
} 
```

我的目标是得到类似的东西

```
{
  "list": 
  { simplePojo11 : [  {"simplePojo11Field": "privet"}, {"simplePojo11Field": "poka"} ] }
} 
```

或者根本没有清单

```
 { simplePojo11111 : [  {"simplePojo111111Field": "privet"}, {"simplePojo111111Field": "poka"} ] } 
```

# java - JLabel transferhandler 复制工作但不移动

> ID：13333556
> 
> 赞同：2
> 
> 时间：2012-11-11T17:27:34.297
> 
> 标签：java, swing, jlabel, move

我想将文本从一个 jlabel 移动到另一个，但由于某种原因，只有复制工作而不移动。我在 handler.exportAsDrag(comp, e, TransferHandler.MOVE); 中使用了 transferhandler 只有 TransferHandler.COPY 有效。

```
 add1 = new JLabel("", JLabel.CENTER);
        add1.setTransferHandler(new TransferHandler("text"));
        add1.setBorder(b2);

        add2 = new JLabel("", JLabel.CENTER);
        add2.setTransferHandler(new TransferHandler("text"));
        add2.setBorder(b2);

            MouseListener listener = new DragMouseAdapter();

        add1.addMouseListener(listener);
        add2.addMouseListener(listener);

            panel2a.add(add1);

        panel2a.add(add2); 
```

他们使用这个私有内部类被拖动

```
private class DragMouseAdapter extends MouseAdapter
    {
        public void mousePressed(MouseEvent e)
        {
            JComponent comp = (JComponent)e.getSource();
            TransferHandler handler = comp.getTransferHandler();

            //c.setOpaque(true);
            handler.exportAsDrag(comp, e, TransferHandler.MOVE);

        }

    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-11T18:57:41.137

如果指定的属性存在并且具有适当的 getter，则默认情况下[TransferHandler.getSourceActions()](http://docs.oracle.com/javase/7/docs/api/javax/swing/TransferHandler.html#getSourceActions%28javax.swing.JComponent%29)的实现返回：`COPY`

```
public int getSourceActions(JComponent c) {
PropertyDescriptor prop = getPropertyDescriptor(c);
if (prop != null) {
    return COPY;
}
return NONE;
} 
```

结果，当您`MOVE`在`exportAsDrag()`处理程序中指定时决定不支持该操作。

您可以覆盖此方法以添加您的源支持的任何操作。例如：

```
add1.setTransferHandler(new TransferHandler("text") {
    @Override
    public int getSourceActions(JComponent c) {
        return COPY | MOVE;
    }
}); 
```

***编辑：实施 exportDone***

```
this.setTransferHandler(new TransferHandler("text") {
    @Override
    protected void exportDone(JComponent source, Transferable data, int action) {
        if (action == MOVE){
            ((JLabel) source).setText("");
        }
    }

    @Override
    public int getSourceActions(JComponent c) {
        return COPY | MOVE;
    }
}); 
```

# php - Php 是否可以创建一个将连接表放入嵌套数组的通用算法？

> ID：13333560
> 
> 赞同：-1
> 
> 时间：2012-11-11T17:27:59.683
> 
> 标签：php, sql, arrays, join, group-by

让我们想象一下这样的事情：

```
SELECT * FROM products LEFT JOIN prices ON prices.PRODUCT_ID = products.ID; 
```

这给出了：

```
ID: 1; NAME: 'product with no price';   PRODUCT_ID: null; PRICE: null;
ID: 2; NAME: 'product with one price';  PRODUCT_ID: 2;    PRICE: 1000;
ID: 3; NAME: 'product with two prices'; PRODUCT_ID: 3;    PRICE: 2000;
ID: 3; NAME: 'product with two prices'; PRODUCT_ID: 3;    PRICE: 2500; 
```

这个算法应该产生：

```
array:
 product => (
  [0]
   id = 1
   name = product with no price
   prices = array()
  [1]
   id = 2
   name = product with one price
   prices = array(
    product_id: 2,
    price: 1000
   )
  [2]
   id = 3
   name = product with two prices
   prices = array(
    array(product_id: 3,
    price: 2000),
    array(product_id: 3,
    price: 2500)
   ) 
```

并且不要忘记传递连接。所以价格 -> 产品，但可以是 commentOnPrice -> 价格 -> 产品。是否有可能创建这种复杂的算法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-11T17:31:33.863

**你不能那样做**。查询的结果是*线性*的，这意味着它们不能按您想要的方式分组。它们是一维数组。

最好的方法是在你的`PHP`代码上手动格式化。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-11T17:45:01.540

您可以使用 GROUP_CONCAT 函数并检索以“，”分隔的字符串中的价格（在我的示例中）：

```
SELECT products.ID, products.NAME, GROUP_CONCAT(prices.PRICE) FROM products 
LEFT JOIN prices ON prices.PRODUCT_ID = products.ID 
GROUP BY products.ID, products.NAME 
```

你会得到类似的东西（我为这个例子创建的数据库）

> ID NAME GROUP_CONCAT(prices.PRICE,',')
> 
> 1 个没有价格的产品 [BLOB -> 0B]
> 
> 2 个产品有两个价格 200,400
> 
> 3 产品一价 34

然后，在 php 中，按“，”分解分组字段并创建价格数组

# c++ - 提供高效连接的字符串模板库

> ID：13333564
> 
> 赞同：4
> 
> 时间：2012-11-11T17:28:40.527
> 
> 标签：c++, template-meta-programming

是否有等效于字符串的 blitz++ 库（即，通过延迟字符串构建直到读取整个表达式来提高字符串构造/操作性能的库）？

Blitz++ 通过模板元编程提高矩阵/向量运算的速度，在编译时从表达式构建“语法树”，`A + B + C`然后评估语法树。例如，这种方法可以提高字符串连接的性能，因为在看到类似的表达式之后`s1 + s2 + s3`，结果的大小将是已知的，这样就可以一步完成内存分配和复制，而不是先分配内存for `s1 + s2`，复制，为 分配内存`(s1 + s2) + s3`，然后再次复制。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T17:43:24.490

我知道`QString`使用表达式模板来确定最终字符串的大小并预先有效地分配它。我认为底层代码并不难，并且可以与大多数现有的字符串类一起使用。来自 Qt 4.8 手册：

> `QStringBuilder`使用表达式模板并重新实现`'%'`运算符，以便当您使用`'%'`for 字符串连接而不是 时`'+'`，多个子字符串连接将被推迟，直到最终结果即将分配给 a `QString`。此时，最终结果所需的内存量是已知的。然后调用内存分配器一次以获得所需的空间，并将子字符串一一复制到其中。

查看[有关该主题的 wiki 以](http://en.wikipedia.org/wiki/Expression_templates)获取有关该技术的示例。

请注意，这确实会干扰诸如`decltype(a+b)`或`auto c = a+b`使用表达式模板之类的东西`operator+`，因为返回的类型是代理类型，而不是`a`or的原始类型`b`。

# jquery - Telerik RadScriptManager 与 jQuery 冲突

> ID：13333566
> 
> 赞同：1
> 
> 时间：2012-11-11T17:28:45.380
> 
> 标签：jquery, telerik, scriptmanager

我正在使用 Telerik RadScriptManager 为我正在使用的其中一个滑块调用他们的 .js 文件。但是，我有另一个要在页面中实现的自定义 jQuery 插件。我的 RadScriptManager 放置在我的 aspx 网站的母版页中。

我已成功更改 RadScriptManager 以添加一个 jQuery Lib 并且它可以工作，但是我需要添加 jquery.min.1.7.1.js 才能使该插件正常工作。

所以总结一下我需要的是一种改变 RadScript 以便它接受外部 jQuery 插件的方法。

这是我的 RadScriptManager 的代码，我更改了最后一个 ScriptReference 并且它有效。我需要按照上面的要求添加更多的 Lib。

```
<telerik:RadScriptManager ID="RadScriptManager1" runat="server">
    <Scripts>
        <asp:ScriptReference Assembly="Telerik.Web.UI" Name="Telerik.Web.UI.Common.Core.js">
        </asp:ScriptReference>
        <asp:ScriptReference Assembly="Telerik.Web.UI" Name="Telerik.Web.UI.Common.jQuery.js">
        </asp:ScriptReference>
        <asp:ScriptReference Assembly="Telerik.Web.UI" Name="Telerik.Web.UI.Common.jQueryInclude.js">
        </asp:ScriptReference>
        <asp:ScriptReference Assembly="Telerik.Web.UI" Name="Telerik.Web.UI.Common.jQuery.js" 
                             Path="css/Jquery/jquery.easing.1.3.js" />
        <asp:ScriptReference Assembly="Telerik.Web.UI" Name="Telerik.Web.UI.Common.jQuery.js"
                             Path="css/Jquery/jquery.min.1.7.1.js" />
        <asp:ScriptReference Assembly="Telerik.Web.UI" Name="Telerik.Web.UI.Common.jQuery.js"
                             Path="css/Jquery/Service.heading.js" />
        <asp:ScriptReference Assembly="Telerik.Web.UI" Name="Telerik.Web.UI.Common.jQuery.js"
                             Path="css/Jquery/Service.heading_2.js" />    
    </Scripts>
</telerik:RadScriptManager> 
```

我试过这样做：

```
<Scripts>
    <asp:ScriptReference Path="css/Jquery/jquery.min.1.7.1.js" />
    <asp:ScriptReference Path="css/Jquery/Service.heading.js" />
    <asp:ScriptReference Path="css/Jquery/Service.heading_2.js" />
</Scripts> 
```

但是它在 IE 中不起作用。

请帮我把这件事弄好。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T21:09:59.420

查看这篇关于禁用内部 JQuery 库的 Telerik 文章。

[http://www.telerik.com/help/aspnet-ajax/scriptmanager-disabling-embedded-jquery.html](http://www.telerik.com/help/aspnet-ajax/scriptmanager-disabling-embedded-jquery.html)

# jquery - Knockout.js：无法解析来自 JSON 的绑定

> ID：13333567
> 
> 赞同：2
> 
> 时间：2012-11-11T17:28:59.753
> 
> 标签：jquery, ajax, json, knockout.js, knockout-2.0

我有一个通过 AJAX 获取 JSON 并创建新任务的视图模型，但 Knockout 不断给我一个绑定错误。

如果我直接在我的视图模型中对来自服务器的数据进行硬编码，我不会收到任何错误。

我的视图模型创建了一个新任务，它有一个 id、一个问题和一些备选方案，它本身有一个文本和正确的布尔标志。

以下代码可以正常工作：

```
function Task(data) {
    var self = this;

    self.id = data.id;
    self.question = ko.observable(data.question);

    var alts = new Array();
    $(data.alternatives).each(function(index){
        alts.push(new Alternative(data.alternatives[index].alternative, data.alternatives[index].correct));
    });

    self.alternatives = ko.observableArray(alts);
}
function Alternative(alternativeText, correctAnswer) {
    var self         = this;
    self.alternative = ko.observable(alternativeText);
    self.correct     = ko.observable(correctAnswer);
}
function TaskViewModel() {
    var self = this;

    var data = {
        id: 5,
        question: 'test',
        alternatives: [{
            alternative: 'alt 1',
            correct: false
        },{
            alternative: 'alt 2',
            correct: true
        },{
            alternative: 'alt 3',
            correct: false
        }]
    };

    self.task = new Task(data);
} 
```

但是，如果我用来自服务器的真实数据交换硬编码`data`变量：

```
function TaskViewModel() {
    var self = this;

    $.getJSON('/data', function(data){
        self.task = new Task(data);
    });
} 
```

淘汰赛给了我这个错误：

```
Error: Unable to parse bindings.
Message: ReferenceError: Can't find variable: task;
Bindings value: value: task.question 
```

URL 中的数据如下所示：

```
{"id":5,"question":"test","alternatives":[{"alternative":"alt 1","correct":false},{"alternative":"alt 2","correct":true},{"alternative":"alt 3","correct":false}]} 
```

我似乎无法弄清楚为什么这不起作用：/

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-11T18:23:40.860

应用绑定时，您的视图模型实际上没有`task`属性。你需要给它一些绑定的东西。

有几种方法可以处理这个问题。

可能最简单的方法是使`task`observable 并将其设置为 ajax 调用的结果。您可能需要调整绑定以应对此更改。

```
function TaskViewModel() {
    var self = this;
    self.task = ko.observable();

    $.getJSON('/data', function(data){
        self.task(new Task(data));
    });
} 
```

更灵活的选择是为您的`Task`对象添加单独的初始化方法并设置任务（未初始化）。然后作为ajax调用的结果，调用初始化方法对其进行初始化。当然，您必须调整任务对象的初始化代码。

```
function TaskViewModel() {
    var self = this;
    self.task = new Task();

    $.getJSON('/data', function(data){
        self.task.init(data);
    });
}

function Task() {
    var self = this;
    self.id = ko.observable();
    self.question = ko.observable();
    self.alternatives = ko.observableArray();

    self.init = function (data) {
        self.id(data.id);
        self.question(data.question);
        self.alternatives(ko.utils.arrayForEach(data.alternatives, function (item) {
            return new Alternative(item.alternative, item.correct);
        }));
    };
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-26T20:49:43.710

这篇文章包含了在 source 为 null 时可以处理绑定的多种方法。

[源为空/未定义时的 KnockoutJS 绑定](https://stackoverflow.com/questions/11387501/knockoutjs-binding-when-source-is-null-undefined)

如果您对不可绑定的 UI 消失感到满意，我建议您使用[`with`](http://knockoutjs.com/documentation/with-binding.html)

如果`selectedItem`为 null 则该元素甚至不会显示。

```
<div data-bind="with: selecteditem">
    <form>
        <fieldset>
            <div>
                <label>first name</label>
                <input data-bind="value: firstname"></input>
            </div>
            <div>
                <label>lasst name</label>
                <input data-bind="value: lastname"></input>
            </div>
        </fieldset>
        <div>
            <a href="#" data-bind="click: $root.savechanges">Save</a>
        </div>
    </form>
</div> 
```

# c# - MySQL C# 验证错误

> ID：13333570
> 
> 赞同：-5
> 
> 时间：2012-11-11T17:29:16.123
> 
> 标签：c#, mysql, validation, passwords

```
public void Find(string userName, string password)
    {
        string query = "SELECT COUNT(*) FROM user WHERE username =\'" + userName + "\', \'" + GetMd5Sum(password) + "\'";
        MySqlCommand cmd = new MySqlCommand(query, connection);

        try
        {

            //This will return 1 if the username and password exist.
            //It will return 0 if the username and password are not found.
            int count = (int)cmd.ExecuteScalar();

            if (count > 0)
                MessageBox.Show("You have succesfully logged in!");
            else
                MessageBox.Show("Incorrect username or password.");

            connection.Close();
        }
        catch (Exception ex)
        {
            Console.WriteLine(ex.Message.ToString());
        }
    } 
```

我认为这就是问题所在。谁能解释或帮助我解决这个错误？

错误是：

> 您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 1 行的“C8059E2Ec7419F590E79D7F1B774BFE6”附近使用正确的语法

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-11T17:32:41.770

您的 SQL 看起来像这样（当然，值在哪里`$user`和是）：`$passwordhash`

```
SELECT COUNT(*) FROM user WHERE username = '$user', '$passwordhash' 
```

您希望第二个值做什么？我怀疑你想要类似的东西：

```
SELECT COUNT(*) FROM user WHERE username = '$user' AND passhash = '$passwordhash' 
```

`passhash`（根据您的实际列名进行更改。）

但是，您不应该*只是*将该文本添加到您的查询中。相反，更改您的代码以使用*参数化 SQL*来避免 SQL 注入攻击。*始终*使用参数而不是将值直接包含到 SQL 中：

*   它避免了 SQL 注入攻击
*   它避免了不必要且容易出错的字符串转换（尤其是日期/时间值）
*   它将您的代码 (SQL) 与您的数据分开，使查询更易于阅读

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-11T17:30:22.557

您需要在 where 子句中的值之间使用**AND**

```
string query = "SELECT COUNT(*) FROM user " + 
               "WHERE username ='" + userName + "' AND " +
               "PASSWORD ='" + GetMd5Sum(password) + "'"; 
```

而且您没有命名密码列。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-11-11T17:32:05.093

您的查询将如下所示：

```
SELECT COUNT(*) FROM user WHERE username ='user', 'pass' 
```

而它应该是：

```
SELECT COUNT(*) FROM user WHERE username ='user' AND password='pass' 
```

一点研究和回顾会有所帮助。

# jquery - 单击外部时，jQuery UI datepicker 不会隐藏

> ID：13333571
> 
> 赞同：18
> 
> 时间：2012-11-11T17:29:24.180
> 
> 标签：jquery, jquery-ui, datepicker, jquery-ui-datepicker

我在我的网站上发现了 jQuery UI Datepicker 的问题。

当我单击输入时，它确实显示`datepicker`正确。然而，当我没有选择任何日期并且我只是在元素外部单击时，它并没有像我期望的那样隐藏日期选择器。

当我按 Esc 时，它会消失，当我选择一天时，它会消失，但当我在外面单击时，它会停留在那里。

有没有人能够找到问题？

链接： http: [//pec.solarismedia.net/index.html#content](http://pec.solarismedia.net/index.html#content)

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-11-11T18:00:05.543

你的 datepickers 有 class `hasDatepicker`，所以试试这个：

```
$(".hasDatepicker").blur(function(e) { $(this).datepicker("hide"); }); 
```

我 99% 肯定这会奏效！

仅供参考，如果您希望它是动态的（适用于之后创建的输入），您可以使用 .on

```
$(".hasDatepicker").on("blur", function(e) { $(this).datepicker("hide"); }); 
```

> **更新** ^(（PS，使用以下从您的代码中完全删除上述内容）)

要回答您的评论，以下可能不是最佳解决方案，但通过反复试验（在您的网站上，使用控制台）它可以工作！与我想到的其他方式相比，它相对较短。

```
$(document).click(function(e) { 
    var ele = $(e.toElement); 
    if (!ele.hasClass("hasDatepicker") && !ele.hasClass("ui-datepicker") && !ele.hasClass("ui-icon") && !$(ele).parent().parents(".ui-datepicker").length)
       $(".hasDatepicker").datepicker("hide"); 
}); 
```

作为一条线

```
$(document).click(function(e) { var ele = $(e.toElement); if (!ele.hasClass("hasDatepicker") && !ele.hasClass("ui-datepicker") && !ele.hasClass("ui-icon") && !$(ele).parent().parents(".ui-datepicker").length) $(".hasDatepicker").datepicker("hide"); }); 
```

我遇到的问题是能够判断单击跨度图标的时间，它并不是真的想要合作，因此额外的有类检查

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-08-16T08:23:29.640

我稍微修改了@SaraVanaN 的代码，它看起来像这样：

```
$(document).on("click", function(e) {
    var elem = $(e.target);
    if(!elem.hasClass("hasDatepicker") && 
        !elem.hasClass("ui-datepicker") && 
        !elem.hasClass("ui-icon") && 
        !elem.hasClass("ui-datepicker-next") && 
        !elem.hasClass("ui-datepicker-prev") && 
        !$(elem).parents(".ui-datepicker").length){
            $('.hasDatepicker').datepicker('hide');
    }
}); 
```

我改变了这条线`$(document).on("click", function(e) {`，但不管你怎么做，`.on("click")`或者`.click()` 这条线`!$(elem).parents(".ui-datepicker").length`我`.parent()` 为我工作，你应该重新检查你的网页日期选择器，因为现在，对我来说，当你点击一个`div`弹出的日期时日期立即关闭，您无法选择任何日期...

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-02-23T16:08:27.343

在这里检查比我有更好的解决方案，但我想我喜欢我的解决方案

```
$(function() {
  $(".datepicker").datepicker();

  $(".hasDatepicker, .ui-datepicker, .ui-datepicker-trigger").click(function(event) {
    event.stopPropagation();
  });

  $("body").bind("click touchstart", function(event) {
    $('.ui-datepicker').hide();
    $('.hasDatepicker').blur();
  });
});
```

```
<link href="//code.jquery.com/ui/1.11.3/themes/smoothness/jquery-ui.css" rel="stylesheet"/>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
<script src="//code.jquery.com/ui/1.9.2/jquery-ui.js"></script>
<input type="text" class="datepicker"/>
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-04-16T11:56:51.327

如果您不想在单击下个月/上个月时隐藏日历，请应用以下代码..

```
$(document).click(function(e) { 
    var ele = $(e.toElement); 
    if (!ele.hasClass("hasDatepicker") && 
        !ele.hasClass("ui-datepicker") && 
        !ele.hasClass("ui-icon") && 
        !ele.hasClass("ui-datepicker-next") && 
        !ele.hasClass("ui-datepicker-prev") && 
        !$(ele).parent().parents(".ui-datepicker").length)
       $(".hasDatepicker").datepicker("hide"); 
}); 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2014-01-16T14:52:31.320

这是一个对我有用的修改后的解决方案：

```
$(".hasDatepicker").each(function (index, element) {
    var context = $(this);
    context.on("blur", function (e) {
        // The setTimeout is the key here.
        setTimeout(function () {
            if (!context.is(':focus')) {
                $(context).datepicker("hide");
            }
        }, 250);        
    });        
}); 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2014-11-15T10:03:06.997

这是我的解决方案：

```
var datePickerHover = false;

$(document).on({
    mouseenter: function (e) 
    {
        datePickerHover = true;
    },
    mouseleave: function () 
    {
        datePickerHover = false;
    }
}, ".datepicker");

$(document).on('mouseup','html',function()
{
    if(datePickerHover == false) $('.datepicker').hide();
}); 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-02-06T00:25:52.557

这是上述代码的较短版本，更易于阅读：

```
$(document).click(function(e) { 
    if (!$(e.target).parents('.ui-datepicker').length)
        $('.hasDatepicker').datepicker('hide');
}); 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-12-16T08:34:13.307

在 js 文件中用于日历初始化的 init 方法中，找到您打开的日历所在的 div。就像我有：

```
div.className="calendar-box"; 
```

//我在“#container”元素上有日期选择器

> $(document).unbind('click').bind("click", function (e) {
> 
> ```
> if($(e.target).parents(".calendar-box").length == 0 && (e.target).id != 'container')
> {
>        //code to hide calendar..
> }   }); 
> ```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2013-07-08T15:05:19.870

这是我的解决方案..

下面您可能会发现此代码与合并的 if()s

```
var datepickerHideFix = function() {

$(document).on("click", function (e) {

    var elee = $(e.target);

    if (!elee.hasClass('hasDatepicker')) {

        if (elee.isChildOf('.ui-datepicker') === false) {

            if (elee.parent().hasClass('ui-datepicker-header') === false) {

                $('.hasDatepicker').datepicker('hide');
            }
        }
    }

    e.stopPropagation();
});
}; 
```

合并 if()s

```
var datepickerHideFix = function() {

$(document).on("click", function (e) {

    var elee = $(e.target);

    if (!elee.hasClass('hasDatepicker') &&
        elee.isChildOf('.ui-datepicker') === false &&
        elee.parent().hasClass('ui-datepicker-header') === false) {

        $('.hasDatepicker').datepicker('hide');
    }

    e.stopPropagation();
});
}; 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2013-09-23T15:45:26.803

我遇到了同样的问题。看起来这个问题在最新的开发版本中得到解决和修复，您可以从这里获得：

[http://eternicode.github.io/bootstrap-datepicker/](http://eternicode.github.io/bootstrap-datepicker/)

我正在使用默认值，这似乎有效。早期版本中一定存在错误。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2022-02-02T07:22:23.477

我想出了这个解决方案。从另一个来源收集。这对我有用。我有一个弹出 jquery datepicker 的按钮。并且不会在日期选择器的外部点击时关闭。

```
<script>
var mouse_is_inside = false;

$(document).ready(function () {        
    $('#j-calender').hover(function(){ 
      mouse_is_inside=true; 
    }, function(){ 
        mouse_is_inside=false; 
    });

    $("body").mouseup(function(){ 
        if(! mouse_is_inside) $('.ui-datepicker').hide();
    });
});
</script> 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2015-11-26T13:37:19.777

```
$(function() {
  $(".datepicker").datepicker();

  $(".hasDatepicker, .ui-datepicker, .ui-datepicker-trigger").click(function(event) {
    event.stopPropagation();
  });

  $("body").bind("click touchstart", function(event) {
    $('.ui-datepicker').hide();
    $('.hasDatepicker').blur();
  });
});
```

```
<link href="//code.jquery.com/ui/1.11.3/themes/smoothness/jquery-ui.css" rel="stylesheet"/>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
<script src="//code.jquery.com/ui/1.9.2/jquery-ui.js"></script>
<input type="text" class="datepicker"/>
```

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2018-06-22T13:35:56.253

```
$("body").on("click", function (e) {
    var elem = e.target.offsetParent;
    if (elem &&
       !elem.classList.contains("ui-datepicker") &&
        !elem.classList.contains("ui-datepicker-calendar") &&
        !elem.classList.contains("ui-datepicker-header") &&
        !elem.hasAttribute("scope") &&
        !elem.classList.contains("ui-datepicker-week-end") &&
        !elem.classList.contains("input-cal-wrapper") &&
        !elem.classList.contains("picto-cal")
    ) {
        $(".hasDatepicker").datepicker("hide");
    }
}); 
```

# web-platform-installer - 为什么我不能使用 Web Platform Installer 卸载或重新安装应用程序？

> ID：13333574
> 
> 赞同：1
> 
> 时间：2012-11-11T17:29:42.197
> 
> 标签：web-platform-installer

我在使用 IIS Express 时遇到问题，因此我决定尝试在 Web 平台安装程序中卸载或重新安装该应用程序。唯一的问题是似乎没有办法卸载或再次安装应用程序。有谁知道如何实现这一目标？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-13T04:08:50.597

您可以在 %LocalAppData%\Microsoft\Web Platform Installer\installers 中找到这些安装文件，我手动卸载它们。IIS Express 您可以在控制面板中卸载，它在列表中...

# python - 使用 python feedparser 解析 xml 提要

> ID：13333575
> 
> 赞同：0
> 
> 时间：2012-11-11T17:29:43.947
> 
> 标签：python

我有这个提要，我想从[http://www.boutique-artisans-du-monde.com/rss/catalog/category/cid/6/store_id/1/中提取信息](http://www.boutique-artisans-du-monde.com/rss/catalog/category/cid/6/store_id/1/)

从我的代码

```
try:
   xml = urllib2.urlopen(link_rss)
except urllib2.URLError, e:
   pass
else:
   f = feedparser.parse(xml)
   print len(f.entries) 
```

当我打印 len(f.entries) 我得到的最大条目是 50 时，提取所有条目的正确方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-11T17:40:46.853

我认为它会返回所有条目，也许这只是提要包含的内容。如果您想提取较旧的条目，则必须找到正确的提要并将其传递给RSS， `feedparser`RSS 只是存储在服务器上的一个 XML 文件。

检查这个[答案](https://stackoverflow.com/a/1676258/1157444)

# c++ - C ++无法从txt文件中读取单词

> ID：13333576
> 
> 赞同：-1
> 
> 时间：2012-11-11T17:29:54.383
> 
> 标签：c++, file, class, text, readfile

我目前正在尝试编写一个从文本文件中读取单词的程序。最后我计划从文件中读取某些单词等等，但目前我无法让我当前的代码工作。

我有 3 个文件。头文件、主文件和实现文件。

读字.h

```
#ifndef READWORDS_H
#define READWORDS_H
/**
* ReadWords class. Provides mechanisms to read a text file, and return
* capitalized words from that file.
*/
using namespace std;

#include <string>
#include <fstream>

 class ReadWords
 {
   public:
    /**
     * Constructor. Opens the file with the default name "text.txt".
     * Program exits with an error message if the file does not exist.
     */
     ReadWords();

    /**
     * Constructor. Opens the file with the given filename.
     * Program exits with an error message if the file does not exist.
     * @param filename - a C string naming the file to read.
     */
     ReadWords(char *filename);

    /**
     * Closes the file.
     */
     void close();

   // working storage.
   private:
     string nextword;
     ifstream wordfile;
     bool eoffound;

 };

 #endif 
```

ReadWords.cpp

```
#include "ReadWords.h"
#include <iostream>
using namespace std;

//:: Defines function as member of class.

ReadWords::ReadWords(char *filename)
{
    ifstream str;
    str.open("hamlet.txt");
    char c;
    while ((c = str.get()) !=EOF){
        cout << c << endl;
    }
}

void close()
{

} 
```

主文件

```
#include "ReadWords.h"

int main()
{
    ReadWords rw;
    rw.ReadWords("hamlet.txt");
} 
```

现在我知道我显然做错了什么，但我不是 100% 确定是什么。我在编译中收到的错误如下：

```
main.cpp: In function `int main()':
main.cpp:6: error: invalid use of `class ReadWords' 
```

工具已完成，退出代码为 1

任何帮助是极大的赞赏。:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-11T17:34:15.043

在您的 main.cpp 中，您错过了`#include ReadWords.h`指令中的引号。要解决此问题，您应该使用`#include "ReadWords.h"`.

另外，您应该注意`std::istream::get`只返回一个字符。如果你想阅读 a (for example) 中的整个单词`std::string`，你应该`std::istream::operator >>`这样使用：

```
std::ifstream in("my_file");
std::string word;

if (in.is_open()) {
    while (in >> word) {
        //do something with word
    }
} 
```

另一件突出的事情是，在`rw.ReadWords("hamlet.txt")`您调用构造函数时，就好像它是成员函数一样。使用该重载的正确方法是：`ReadWords rw("hamlet.txt")`.

附带说明：构造函数的工作是初始化对象。在它的身体内做更多的事情并不是一个好习惯。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-11T17:39:55.403

您的编程中有许多错误：

1.  关闭您打开的文件。永远记住这一点，它可能会导致运行时错误。
2.  在 main.cpp 文件的第一行是 #include "ReadWords.h"
3.  在代码行末尾添加一个分号：rw.ReadWords("hamlet.txt");

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-11T17:32:55.657

要修复编译器的第一个错误，main.cpp 的第一行

```
#include ReadWords.h 
```

需要是：

```
#include "ReadWords.h" 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-11T17:33:03.873

它应该是

```
#include "ReadWords.h" 
```

或者

```
#include <ReadWords.h> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-11T17:33:16.570

首先，您需要添加一个“;” 在 main.cpp 中的 rw.ReadWords("hamlet.txt") 之后。这就是编译器输出的最后一行的含义。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-11T17:33:58.070

这似乎是不必要的复杂。这不行吗？

```
vector<string> words;
string word;
while(cin >> word)
    words.push_back(word); 
```

# ruby-on-rails - 运行迁移时出现重复列名错误

> ID：13333580
> 
> 赞同：9
> 
> 时间：2012-11-11T17:30:13.993
> 
> 标签：ruby-on-rails, sqlite, migration, paperclip

每当我在 Rails 应用程序中运行迁移时，都会从 SQLite3 收到错误消息：

```
SQLite3::SQLException: duplicate column name: photo_file_name: ALTER TABLE "users" ADD "photo_file_name" varchar(255) 
```

我已经进行了“向用户添加照片”迁移。这里是：

```
class AddAttachmentPhotoToUsers < ActiveRecord::Migration
   def self.up
     change_table :users do |t|
     t.has_attached_file :photo
    end
   end

  def self.down
   drop_attached_file :users, :photo
  end
end 
```

这是用户迁移：

```
class CreateUsers < ActiveRecord::Migration
  def change
    create_table :users do |t|
    t.string :name
    t.string :title
    t.string :department
    t.text :skills
    t.boolean :available

    t.timestamps
   end
 end
end 
```

我对此有点困惑，因为它告诉我有一个重复的列名“photo_file_name”，但我需要将它添加到用户表中？那没有意义。我不需要删除它吗？

如果您需要有关我的应用程序的任何其他详细信息，请告诉我。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-11-11T17:46:17.697

如果您的迁移与数据库架构不同步，就会发生这种情况。如果发生这种情况

*   您“手动”修改了数据库架构
*   您更改了正在运行的迁移文件
*   `schema_migrations`表中未更新迁移

如果您**不**依赖数据库中的数据，则 a`rake db:reset`将从头开始重新运行所有迁移。否则，您必须通过添加到`schema_migrations`表中来将冲突的迁移识别为已运行。

另请参阅[迁移的 RailsGuides](http://guides.rubyonrails.org/migrations.html#resetting-the-database)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-07-21T21:03:10.320

我还通过登录 heroku 数据库解决了这个问题，然后只删除有问题的列。我认为这是一个破坏性较小的解决方案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-07-18T07:11:33.553

*   从工作台中删除开发模式
*   跑`rails db:create db:migrate`

# macos - 如何“重播”自制食谱中的“注意事项”部分

> ID：13333585
> 
> 赞同：66
> 
> 时间：2012-11-11T17:30:40.433
> 
> 标签：macos, homebrew

安装自制配方时，您有时会在“注意事项”部分中获得一些有用的信息，您可能想把它们藏在帽子里。一旦在安装时显示此信息，是否有任何方法可以重播或访问此信息，或者除非您在某处复制粘贴，否则它会永远丢失？

例如

```
==> Caveats
To have launchd start mongodb at login:
    ln -s /usr/local/opt/mongodb/*.plist ~/Library/LaunchAgents/
Then to load mongodb now:
    launchctl load -w ~/Library/LaunchAgents/homebrew.mxcl.mongodb.plist
Or, if you don't want/need launchctl, you can just run:
    mongod 
```

如果我以后想要它，我可能希望能够再次看到这个和/或知道那个 plist 在哪里。

**tl; dr**从自制软件安装某些内容后，如何再次看到上述代码段？

* * *

## 回答 #1

> 赞同：84
> 
> 时间：2012-11-11T18:03:05.487

`brew info mongodb`将显示它。但是，如果您做出警告建议的更改，可能会出现其他更适用于您的实际情况的警告。

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2015-05-22T06:42:06.563

我为此创建了一个 brew 外部命令：[https ://github.com/rafaelgarrido/homebrew-caveats](https://github.com/rafaelgarrido/homebrew-caveats)

```
$ brew caveats zsh
==> zsh: Caveats
Add the following to your zshrc to access the online help:
    unalias run-help
    autoload run-help
    HELPDIR=/usr/local/share/zsh/helpfiles 
```

您还可以传递多个公式：

```
$ brew caveats rabbitmq mongodb
==> rabbitmq: Caveats
Management Plugin enabled by default at http://localhost:15672

Bash completion has been installed to:
  /usr/local/etc/bash_completion.d

To have launchd start rabbitmq at login:
  ln -sfv /usr/local/opt/rabbitmq/*.plist ~/Library/LaunchAgents
Then to load rabbitmq now:
  launchctl load ~/Library/LaunchAgents/homebrew.mxcl.rabbitmq.plist
Or, if you don't want/need launchctl, you can just run:
  rabbitmq-server

==> mongodb: Caveats
To have launchd start mongodb at login:
  ln -sfv /usr/local/opt/mongodb/*.plist ~/Library/LaunchAgents
Then to load mongodb now:
  launchctl load ~/Library/LaunchAgents/homebrew.mxcl.mongodb.plist
Or, if you don't want/need launchctl, you can just run:
  mongod --config /usr/local/etc/mongod.conf 
```

当您需要检查一些配置时非常方便！

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2013-10-02T13:43:15.153

要查看当前安装公式的所有注意事项，您可以使用以下命令

```
brew info $(brew list) 
```

您还可以使用 awk 过滤输出以仅获取警告部分。（我是 awk 新手，欢迎提出建议或编辑）

```
brew info $(brew list) | awk '/^==> Caveats$/,/^[a-z][a-zA-Z0-9_+-]+: stable |^==> (Dependencies|Options)$/' 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2016-05-25T18:46:54.557

另一种可能性是使用 sed

```
brew info $(brew list) | sed '/==> Caveats/,/==>/!d;//d' 
```

并有一个格式化的输出（bash）

```
for cmd in $(brew list); do 
  if brew info $cmd | grep -q Caveats; then
    echo "$cmd\n"; 
    brew info $cmd | sed '/==> Caveats/,/==>/!d;//d'; 
    printf '%40s\n' | tr ' ' -; 
  fi; 
done; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-05-26T13:03:35.557

对于那些拥有很棒的`jq`工具的人：

```
# For brews
$ brew info --json $(brew list) | jq -r '.[] | select(.caveats != null) | "\n\nName: \(.name)\nCaveats: \(.caveats)"'

# For casks
$ brew cask --json=v1 info $(brew cask list) | jq -r '.[] | select(.caveats != null) | "\n\nName: \(.name)\nCaveats: \(.caveats)"' 
```

[`jq`](https://stedolan.github.io/jq/)是一个命令行 JSON 处理器。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-01-27T05:08:36.233

更新和组合上面的几个答案，这是一个 bash/zsh 循环，可以粘贴到终端中，以获取所有已安装 brew 公式的所有警告。

```
for x in $(brew list --formula); do 
    cavs=$(brew info "$x" | sed '/==> Caveats/,/==>/!d;//d')
    if [ ! -z "$cavs" ]; then
        echo "$x"
        echo "---"
        echo "$cavs"
        echo ""
    fi
done 
```

# java - 带有 git 的 Java Eclipse 文件夹

> ID：13333586
> 
> 赞同：0
> 
> 时间：2012-11-11T17:30:52.440
> 
> 标签：java, eclipse, git

我一直在使用 eclipse 开发 Java 包，并且一直在使用 git 进行版本控制。我不小心`git rm'd`一个文件，提交并推送它。

为了恢复效果，我从先前的提交中检查了已删除的文件，进行了另一次提交并将其推回。现在我的文件回来了。

但是，这些文件没有显示在 Eclipse 的包中——我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T17:34:43.833

我有时会在 Eclipse 和 Git 之间遇到不一致的问题，为了解决这个问题，我通常只需刷新 Eclipse 项目即可。我可能比这更复杂，但首先消除最简单的解决方案。

# python - 数独检查条款

> ID：13333591
> 
> 赞同：4
> 
> 时间：2012-11-11T17:31:30.817
> 
> 标签：python, sudoku

我需要检查用户插入的数字是否已经在列、行或“块”中（仍在处理最后一部分）。出于某种原因，这些检查不起作用，我不明白为什么？
我在 shell 中编写了相同的代码，它工作得很好。

我的代码：

```
def is_valid_move(board,row, column, digit):
    if digit in board[row]:
        print "Row already contains", digit
        return (False)
    else:
        return (True)

    for i in range(9):
        if digit in board[i][row]:
            print "Colum already contains", digit
            return (False)
            break
        else:
            return (True)

board = [[3,7,0,0,5,0,0,0,0],
         [0,6,0,0,3,0,2,0,0],
         [0,2,9,4,0,0,0,7,8],
         [0,0,4,1,7,0,0,8,0],
         [0,0,6,3,0,5,9,0,0],
         [0,5,0,0,8,4,1,0,0],
         [7,1,0,0,0,8,5,6,0],
         [0,0,5,0,1,0,0,2,0],
         [0,0,0,0,9,0,0,1,3]]

a=is_valid_move(board,1, 2, 9)
print a 
```

我得到的输出：

```
True 
```

* * *

知道如何检查号码是否已经在框中吗？

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-11T17:35:48.877

问题是，一旦您发现任何未失败的检查，您就会返回 true。因此，如果您有一个有效的行，则您的检查已经成功，尽管该列可能已满且具有相同的数字。

所以基本上，`return True`在所有检查结束后，删除所有行并在最后放置一个。

还有几件事：

*   不要在您的退货中`True`或周围加上括号。`False`
*   您不需要`break`after `return`，因为后者已经结束了该功能。
*   `board[i][row]`以单个数字进行评估，因此检查`digit in`将无法正常工作，因为它期望可迭代。
*   `board[i][row]`应该是`board[i][column]`因为第一个列表索引已经是该行。

要检查 3x3 组的第三个条件是否有效，首先需要确定一个单元格属于哪个“框”，然后检查其中的所有数字：

```
# get the first row/column index of a block
blockRow = row // 3 * 3
blockColumn = column // 3 * 3

# check all 8 fields in the block
for r in range(blockRow, blockRow + 3):
    for c in range(blockColumn, blockColumn + 3):
        # skip the field we want to check
        if r == row and c == column:
            continue

        if digit == board[r][c]:
            return False 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-11T18:43:13.503

如果您想为用户创建数独，请使用此提示以删除镜像模式中的数字（对不起，我的英语）示例

(1 _ 3 4)

```
 (7 _ 5 6) 
```

# git - 添加一个 git 合并驱动程序并使其成为默认值

> ID：13333606
> 
> 赞同：2
> 
> 时间：2012-11-11T17:33:05.610
> 
> 标签：git, git-merge

我编写了一个自定义合并驱动程序，它适用于我在多个存储库中所做的所有工作。

我想知道是否有一种全局方法可以指定所有文件都应使用我的自定义合并驱动程序，而不是在每个 repo 中都有一个 .gitattributes？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T18:19:07.087

自定义合并驱动程序在`.gitattributes`文件中声明，这是针对*一个存储库（在具有**相同*历史记录的上游存储库中推送/拉取：克隆）

但这不适用于*不同*的存储库（即具有不同的历史记录），即使您将这些不同的存储库分组为一个父存储库（将包含所述`.gitattributes`文件）的子模块：该文件中声明的属性将遍历子模块并将仅限于父回购。

# haskell - 将两个年龄段的人的总余额相加

> ID：13333607
> 
> 赞同：1
> 
> 时间：2012-11-11T17:33:11.020
> 
> 标签：haskell

我正在尝试计算在银行内拥有账户的两个年龄段的人/客户的总余额。我可以让它显示符合要求的人员列表。

这些是构造函数

```
 type NI = Int
    type Age = Int
    type Balance = Int
    type Person = (NI, Age, Balance)
    type Bank = [Person] 
```

这是银行

```
 rbs :: Bank
    rbs = [ (1, 73, 1000)
        , (2, 18, -50)
        , (3, 60, 190)
        , (4, 26, 300)
        , (5, 24, 456)
        , (6, 32, 7500)
        , (7, 41, -46)
        , (8, 59, -850)
        , (9, 44, 348)
        , (10, 66, -1000)
        , (11, 37, 20000)
        , (12, 29, -245)
        , (13, 55, 3090)
        ] 
```

这是我递归检查银行的​​代码

```
 equityA' :: Bank -> (Int, Int) -> Bank
        equityA' ((n,a,b):xs) (0,0) = error "No ages were selected"
        equityA' [] (x,y) = []
        equityA' ((n,a,b):xs) (f, s) = if  (f <= a) && (s >= a) then  (n,a,b) : equityA' xs (f, s) 
                                       else equityA' xs (f, s) 
```

如果我运行equityA' rbs (40,50) 输出将是[(7,41,-46),(9,44,348)]

我正在努力做的是打印出这些人的总余额。我有一些代码，但被困在实际的计算部分。

检查总数的代码。

```
 equityAge :: Bank -> (Int, Int) -> Int              
    equityAge ((n,a,b):xs) (0,0) = error "No ages were selected"
    equityAge [] (x,y) = 0
    equityAge ((n,a,b):xs) (f, s) = 
```

如果有任何帮助，我将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-11T18:03:50.690

如果您使用[列表推导](http://en.wikibooks.org/wiki/Haskell/List_processing#List_comprehensions)，这非常简单：

```
equityAge :: Bank -> (Int,Int) -> Int
equityAge _ (0,0) = error "No ages were selected"
equityAge [] (x,y) = 0
equityAge x (f,s) = sum [ b | (n,a,b) <-x, f <= a, a <= s] 
```

除此之外，您可以应用[莎拉的建议](https://stackoverflow.com/questions/13333607/sum-the-total-balance-for-people-between-two-ages/13333865#comment18193528_13333607)和使用`map`以及`sum`您的原始功能：

```
equityAge :: Bank -> (Int,Int) -> Int
equityAge _ (0,0) = error "No ages were selected"
equityAge [] (x,y) = 0
equityAge x (f,s) = sum (map(\(_,_,b) -> b) (equityA' x (f,s))) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-11T22:37:52.090

我在这里推荐三件主要的事情：（a）使用**记录类型**而不是元组；(b) 使用**标准实用函数**来处理列表和其他标准类型；(c) 编写**辅助函数**以帮助使所有函数保持简短易读。

关于第一个建议：

```
data Person = Person { ni :: NI, age :: Age, balance :: Balance } deriving (Eq, Show) 
```

现在，您不必为了得到一个人的年龄而进行任何元组模式匹配；此记录类型声明为您`age :: Person -> Age`提供`balance :: Person -> Balance`免费的功能。

第三个建议的例子：这里有一个计算a`Person`是否在两个年龄之间的函数：

```
betweenAges :: Age -> Age -> Person -> Bool
betweenAges lo hi person = lo <= age person && age person <= hi 
```

现在，使用那个辅助函数和标准`filter`函数，你可以得到所有两个年龄之间的人，如下所示：

```
filter (betweenAges 18 27) rbs 
```

要获得`Person`s 列表的平衡，您可以使用标准`sum`和`map`函数：

```
sum (map balance somePersons) 
```

所以完整的解决方案是这样的：

```
-- Note how much easier to read this is when you use sum, map, filter 
-- and betweenAges!
equityAge :: Age -> Age -> Bank -> Balance
equityAge lo hi bank = sum (map balance (filter (betweenAges lo hi) bank))
    -- This could be its own top-level function if you're going to reuse it
    -- somewhere else, but here I'm putting it in a where declaration assuming
    -- that it's a throwaway.
    where betweenAges lo hi person = lo <= age person && age person <= hi 
```

作为一般规则，努力弄清楚如何解决您正在解决的问题是没有成效的。我相信，更有效的策略如下：(a) 学习根据基本库中的功能来解决您的问题，例如`Prelude`,`Data.List`和`Data.Maybe`; (b) 学习如何自己编写这些实用函数。为什么这样？因为 (a) 教你如何将问题分解成小的、可重用的部分，并且 (b) 教你理解这些程序从底部到顶部发生了什么。

# c++ - 从直接多重继承改为间接多重继承时会出现什么问题？

> ID：13333610
> 
> 赞同：1
> 
> 时间：2012-11-11T17:33:29.550
> 
> 标签：c++, inheritance

假设以下类：

```
struct X : A, B, C{}; 
```

改成下面这样会出现什么问题？

```
struct indirect_C : C{};
struct indirect_BC : B, indirect_C{};
struct X : A, indirect_BC{}; 
```

* * *

该示例可能看起来有些做作，但是当您通过可变参数模板继承可变数量的基时，并且还希望派生类中可用（或不可用）这些基的功能时，就会发生这种情况。

```
template<class... List>
struct X : List...{
  using List::something...; // ill-formed in C++11
}; 
```

因此，您需要一种解决方法，即“递归地”继承并在每个递归步骤中将功能纳入范围：

```
template<class Head, class... Tail>
struct inherit_indirect
  : Head
  , inherit_indirect<Tail...>
{
  using Head::something;
  using inherit_indirect<Tail...>::something;
};

template<class T>
struct inherit_indirect<T>
  : T
{
  using T::something;
}; 
```

（例如，参见我的[这个答案](https://stackoverflow.com/a/9024520/500104)，我使用了这种技术。）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-11T18:08:13.550

您不能再在 X 的构造函数中直接初始化类基对象 B 和 C。

# c - 二维数组作为返回值

> ID：13333616
> 
> 赞同：4
> 
> 时间：2012-11-11T17:34:09.600
> 
> 标签：c

对于我的作业，我必须从输入文件中读取数据并将其存储在一个二维数组中，然后将该数组传递给另一个函数。这是我到目前为止所尝试的，但我不知道当我在 main 中调用这个函数时它会给出错误：

> 访问冲突写入位置 0x00000000。

我试图动态分配内存，它给出了同样的错误。我做错了什么？

最后更新代码：

```
 #include<stdio.h>
 #include<stdlib.h>

int *a[2];
void getData(void)
{
    FILE *fp = fopen("input.txt", "r");
    int number;

    fscanf(fp, "%d", &number);

    for (int i = 0; i < number; i++)
    {
        a[i]=(int*)malloc(number * sizeof (int));
        fscanf(fp, "%d %d", &a[i][0], &a[i][1]);
    }
    fclose(fp);
}

int main()
{   
    getData();
    for(int i=0;i<8;i++)
    {
        printf("%d %d\n",a[i][0],a[i][1]);
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-11T17:36:18.920

您需要为`a`

在 for 循环之前

```
a = (int **)malloc(number * sizeof(int *)) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-11T17:36:36.123

您没有分配第一个维度，即当您尝试取消引用时 a 是一个空指针。

```
#include <stdlib.h>
a = malloc(number * sizeof *a); 
```

顺便说一句，`sizeof(int)`不足以存储两个数字。

```
#include <stdlib.h>
a[i] = malloc(2 * sizeof *a[i]); 
fscanf(iFile, "%d %d", &a[i][0], &a[i][1]); 
```

这是一个完整的正确代码（虽然不完美，只要`a`是一个非常大的全局变量）：

```
int (*a)[2] = NULL;

void getData(void)
{
    FILE *fp = fopen("input.txt", "r");
    int number;

    fscanf(fp, "%d", &number);
    a = malloc(number * sizeof *a);

    for (int i = 0; i < number; i++)
        fscanf(fp, "%d %d", &a[i][0], &a[i][1]);

    fclose(fp);
} 
```

# iphone - NSRegularExpression 匹配一个或多个字母数字

> ID：13333619
> 
> 赞同：0
> 
> 时间：2012-11-11T17:34:40.970
> 
> 标签：iphone, objective-c, ios, ipad, nsregularexpression

我有以下网址：

[https://api.instagram.com/v1/tags/picoftheday/media/recent?access_token=29088696%2Efd3325f%2E7e277194e17340788abc72583dfd48b3](https://api.instagram.com/v1/tags/picoftheday/media/recent?access_token=29088696%2Efd3325f%2E7e277194e17340788abc72583dfd48b3)

和以下正则表达式：

```
 NSRegularExpression * regexTags = [NSRegularExpression regularExpressionWithPattern:@"tags/\\[a-zA-Z0-9]+/media/recent" options:NSRegularExpressionCaseInsensitive error:&error];
   NSArray* tagMatch = [regexTags matchesInString:self.currentRequestURL_
                                                 options:0 range:NSMakeRange(0, [self.currentRequestURL_ length])]; 
```

为什么这与正则表达式不匹配？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-11T18:08:43.070

正则表达式本身有错误

正则表达式 `@"tags/\\[a-zA-Z0-9]+/media/recent"`匹配 **标签/\picoftheday/media/recent**

但你需要**`tags/[a-zA-Z0-9]+/media/recent`**匹配**标签/picoftheday/media/recent**

有一个有用的在线测试器来测试你的正则表达式是否匹配字符串[http://regexpal.com/](http://regexpal.com/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-11T17:54:00.420

去掉表达式中的双反斜杠。你有：

```
@"tags/\\[a-zA-Z0-9]+/media/recent" 
```

这不应该是：

```
@"tags/[a-zA-Z0-9]+/media/recent" 
```

双反斜杠被转换为单反斜杠，这意味着它转义了左方括号。这意味着表达式正在字符串中查找实际的开放方括号，而不是打开字符组。

# ruby-on-rails - 在 Rails 项目中重新生成默认 database.yml 的简单方法

> ID：13333625
> 
> 赞同：0
> 
> 时间：2012-11-11T17:35:25.257
> 
> 标签：ruby-on-rails, database, ruby-on-rails-3

一般的最佳实践是不在`config/database.yml`版本控制系统 (pe git) 中跟踪文件。如果我克隆一个项目，则此文件丢失并且必须重新创建。我过去是通过复制另一个项目来做到这一点的。

有没有更简单的方法？例如使用发电机？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-11T17:53:47.580

您可以尝试将文件命名为 database.yml.example，并将其保存在版本控制中。然后你应该指示 Capistrano 将 database.yml.example 复制到 database.yml 。无论如何，最好将您的用户名、密码、秘密令牌等移动到环境变量中。然后在你的 *.yml 文件中（如果是开源项目）人们会看到：

```
username: ENV["USERNAME"]
password: ENV["PASSWORD"] 
```

Ryan Bates 解释了这个[Railscast](http://railscasts.com/episodes/85-yaml-configuration-revised?view=asciicast)中的所有步骤。

# sql-server-2008-r2 - 获取所有复合外键

> ID：13333630
> 
> 赞同：1
> 
> 时间：2012-11-11T17:36:04.773
> 
> 标签：sql-server-2008-r2, foreign-keys, primary-key, composite-primary-key

**我想知道如何使用信息模式视图获取所有复合外键。** 我正在使用 Microsoft SQL Server Management Studio 2008 R2

这是我获取所有复合主键的代码

```
select distinct tc.TABLE_NAME, key_col_us.COLUMN_NAME
  from INFORMATION_SCHEMA.TABLE_CONSTRAINTS as tc inner join INFORMATION_SCHEMA.KEY_COLUMN_USAGE key_col_us on tc.TABLE_NAME = key_col_us.TABLE_NAME
 group by tc.table_name, key_col_us.COLUMN_NAME
having count(key_col_us.ORDINAL_POSITION) > 1
 order by tc.TABLE_NAME;
go 
```

谢谢

# java - 如何在调整自定义 JSlider 的大小时重新绘制

> ID：13333631
> 
> 赞同：1
> 
> 时间：2012-11-11T17:36:05.720
> 
> 标签：java, resize, widget, jcomponent, jslider

简单的Java问题在这里。我制作了一个自定义 JSlider，它在用户将滑块移动到的最后一个位置绘制正方形。我们覆盖paintcomponent并绘制相对于滑块大小的正方形。正确使用滑块时一切正常。但是，当您调整框架大小时会出现问题。滑块变大，滑块调节器随之移动，但我们放置的方块不会相对于滑块移动。当我们调整框架大小时，我们应该使用 JSlider 中的哪个函数来重新绘制？

我试图将 JSlider 代码与框架代码分开，因此我们希望用户能够使用我们的自定义 JSlider，而不是试图自己处理这个调整大小的功能。关于我们应该使用哪种方法的任何帮助？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T17:52:47.037

您可以将[ComponentListener](http://docs.oracle.com/javase/7/docs/api/java/awt/event/ComponentListener.html)添加到重新绘制它的滑块上`componentResized`。

```
slider.addComponentListener(new ComponentAdapter() {
    @Override
    public void componentResized(ComponentEvent e) {
        e.getComponent().repaint();
    }
} 
```

# iphone - 如何在动画期间启用按钮

> ID：13333634
> 
> 赞同：0
> 
> 时间：2012-11-11T17:36:19.183
> 
> 标签：iphone, objective-c, ios, ipad, animation

我正在使用 CAKeyframeAnimation。

```
-(IBAction)start:(id)sender {

    UIBezierPath *path = [UIBezierPath bezierPath];
    [path moveToPoint:CGPointMake(600, 150)];
    [path addLineToPoint:CGPointMake(600, 300)];
    [path addLineToPoint:CGPointMake(450, 300)];
    [path addLineToPoint:CGPointMake(450, 150)];
    [path addLineToPoint:CGPointMake(600, 150)];

    CAKeyframeAnimation *move = [CAKeyframeAnimation animationWithKeyPath:@"position"];
    move.path = path.CGPath;
    move.duration = 6.0f;
    move.repeatCount = 100;

    [testButton.layer addAnimation:move forKey:@"move"]; 
```

我需要在按钮移动时使用它。我也尝试过使用触摸检测，但它在停止时只能与按钮一起使用。是否可以？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T17:53:34.267

真的！您希望用户在制作动画时按下按钮？人们更喜欢在动画期间关闭交互。但无论如何，这是你的互动，那就这样吧。你有没有尝试过 -`[yourButton setUserInteractionEnabled:TRUE];`

通常在任何`UIView`动画中，我们只需简单地将`UIViewAnimationOptionAllowUserInteraction`其作为动画选项就可以了。由于您已经更深入地使用 CoreAnimation 和图层，因此不确定哪些选项可以使它在那里工作。请让我们知道它对您的效果如何...

**更新：**这个问题对我来说很有趣。所以我只是在 Xcode 中尝试一下。这是我发现的。要点击移动按钮，您需要在视图控制器中对按钮的`.layer.presentationLayer`属性（需要这个）进行点击测试。`QuartzCore`

在内部，动画只是养眼。动画滞后于视图的实际移动。动画开始时，按钮已经位于目标点。您只是看到视图/按钮移动的电影。如果您希望在动画期间可以点击按钮，则必须自己制作动画。

所以coe会是这样的——

```
- (void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event
{
    UITouch *t = [touches anyObject];
    CGPoint location = [t locationInView:self.view];
    for (UIButton *button in self.buttonsOutletCollection)
    {
        if ([button.layer.presentationLayer hitTest:location])
        {
            // This button was hit whilst moving - do something with it here
            break;
        }
    }
} 
```

# c++ - 数字作为 std::string 还是双精度数？

> ID：13333635
> 
> 赞同：0
> 
> 时间：2012-11-11T17:36:21.437
> 
> 标签：c++, string, parameters

我正在为 http 客户端编写一个 C++ 库。我没有太多编程经验，所以请帮助我。

我有名为`add`. 它有两个参数。第一个是类型名称，第二个是参数 q。它是一个介于 0 和 1 <0,1> 之间的数字。点后应有 0 到 4 位数字。

我可以写它，但我不知道什么更好：

1.  `void add(std::string type, double q)`-> 我必须在这个方法的主体中将 q 转换为 std::string。

2.  `void add(std::string type, std::string q)`-> 没关系，它更快，但对用户来说可能不太直观，因为它是一个数字 (?)....

有两种方法：1）和2）是个好主意吗？

请帮我。我没有经验...我知道其中两种方法有效，但更好、更受欢迎的方法。你怎么看？你会怎么写这个？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-11T17:41:11.893

通常，您希望通过查看方法签名来明确用户的期望。您的代码应该为使用它的人提供有用的信息（即让您的代码在做什么以及对它们的期望更加明显）。

让我们从最糟糕的开始：

```
void add(std::string type, std::string q) 
```

*   没有什么可以明确说明`q`应该是一个数字。
*   `q`不是一个描述性很强的名字。

对于上面的例子，调用者可能会感到困惑并使用反向参数调用方法：`add("5.0123", "someType")`没有任何东西告诉用户他们做错了什么，直到必须使用参数。最糟糕的是，你不知道现在事情会在哪里爆发。这可能会导致一些非常难以追踪的错误，因为没有强制执行正确的类型。

稍微好一些：

```
void add(std::string type, double q) 
```

*   现在很明显，用户正在添加一个类型和某种类型的双精度值。
*   `q`仍然不是一个描述性的名称

**我会推荐：**

```
void add(std::string type, double value) 
```

*   现在很明显，用户正在添加一个类型和某种类型的双精度值。
*   double 的参数名称现在是`value`（比 更具描述性`q`）。

现在用户不能调用参数乱序的方法，即`add(5.0123, "someType")`，因为它会导致编译器错误。如果不是很明显：最好得到一个编译器错误，因为它可以立即修复。这样，您就可以从头开始编写更安全的代码。

当然，这意味着您必须将 a 转换`double`为 a `string`，但*在大多数情况*下，鉴于上述所有好处，这是一个很小的代价。

我不知道该值代表什么，但是您可以将参数命名为越接近它所代表的“真实世界”实体，它就越好。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-11T17:50:05.817

想想该方法应该做什么以及用户将如何调用它。如果第二个参数是数字，那么您应该使用适当的数字类型。一般来说，您应该以任何看起来更“自然”的方式编写代码。Link 的上述帖子很棒，并且对此进行了更多详细说明。

至于您对什么是“更快”的担忧，您需要**停止**考虑这一点。这类微优化不太可能对性能产生可衡量的影响，并且作为新程序员，您不应该担心它们。专注于*正确的*代码。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-11T17:58:06.357

这里有两个交错问题：

1.  浮点类型`float`、`double`和`long double`不能准确表示十进制数，即使十进制数只有几位数字。例如，当表示`0.1`为其中一种类型时，您将得到一个四舍五入的值。标准库确保当您读取该值并再次写入时，您会取回原始值（尾随零除外：`0.1000`可能会被格式化为`0.1`）。对于格式化舍入误差不是什么大问题，但是当你开始做算术时，小误差可能会导致有趣的问题。传递一个精确的表示，例如 a `std::string`，具有处理这些值的函数可以做正确的事情的优点。
2.  使用`std::string`而不是数值的问题是接口没有指示参数代表什么，编译器无法帮助直接使用类型检查来获取参数：实际类型隐藏在`std::string`. 理想情况下，您将使用一个参数，该参数准确地保留了该值，同时还表明了它的语义。

根据您的需要，使用浮点类型或 a`std::string`可能是正确的选择：如果您想通过函数传递数值并且可以接受松散尾随小数位，则最好使用浮点类型。如果您需要精确算术并需要保留尾随的派系零，a`std::string`可能是更好的选择。不过，您最好使用一种专用于正确表示十进制值的类型（希望将来您可以使用[`std::decimal64`](http://www.open-std.org/JTC1/SC22/WG21/docs/papers/2012/n3407.html)，但它还不是标准的一部分）。

# java - 如何通过数据 id 从 Arraylist 中删除数据

> ID：13333637
> 
> 赞同：0
> 
> 时间：2012-11-11T17:36:33.880
> 
> 标签：java, list, struts2, arraylist

我在按 id 从我的数组列表中删除数据时遇到问题。我的数组列表中有一本书，我想根据其 id 删除特定书籍。我尝试了下面的代码，但我的数据没有被删除。

请检查我下面的代码并提出解决方案。

**更新** 当我调用此方法时，编译器会读取以下所有代码，但不会从我的数组列表中删除我的数据。我没有收到任何错误。

```
 -------------------
  -------------------
   public String removebookfrmSession()
    {  
        List<Bookdetails> books = new ArrayList<Bookdetails>();
        String bookid = request.getParameter("bkid");    
        Bookdetails book = dao.listBookDetailsById(Integer.parseInt(bookid));
        books = (ArrayList) session.get(BillTransactionBooksConstants.BOK);
        if ( books == null ) books = new ArrayList<Bookdetails>();
        boolean already_exists = false;
        for ( Bookdetails b : books ) 
        {
            if ( Integer.toString(b.getId()).equals(bookid))
            {
                already_exists = true; 
                break;
            }
        }
        if (book != null && already_exists  ) 
        { 
            books.remove(book);
            System.out.println("books size"+books.size()); 
            session.put(BillTransactionBooksConstants.BOK,books);
        }
        return SUCCESS;
    } 
```

Bookdetails.java (POJO)

```
 package v.esoft.pojos;

    // Generated Nov 5, 2012 9:37:14 PM by Hibernate Tools 3.4.0.CR1

    import java.util.Date;
    import javax.persistence.Column;
    import javax.persistence.Entity;
    import javax.persistence.GeneratedValue;
    import static javax.persistence.GenerationType.IDENTITY;
    import javax.persistence.Id;
    import javax.persistence.Table;
    import javax.persistence.Temporal;
    import javax.persistence.TemporalType;

    /**
     * Bookdetails generated by hbm2java
     */
    @Entity
    @Table(name = "bookdetails", catalog = "vbsoftware")
    public class Bookdetails implements java.io.Serializable {

        private Integer id;
        private String isbn;
        private String bookTitile;
        private String authFirstname;
        private String authLastname;
        private String editionYear;
        private Integer subjectId;
        private Integer coverId;
        private Integer languageId;
        private String publisherName;
        private Integer editionId;
        private Float price;
        private String quantity;
        private String description;
        private Integer locationId;
        private String remarks;
        private String img1;
        private String img2;
        private String videoUrl;
        private Integer createrId;
        private Date createdDate;
        private Integer updateId;
        private Date updatedDate;

        public Bookdetails() {
        }

        public Bookdetails(String isbn, String bookTitile, String authFirstname,
                String authLastname, String editionYear, Integer subjectId,
                Integer coverId, Integer languageId, String publisherName,
                Integer editionId, Float price, String quantity,
                String description, Integer locationId, String remarks,
                String img1, String img2, String videoUrl, Integer createrId,
                Date createdDate, Integer updateId, Date updatedDate) {
            this.isbn = isbn;
            this.bookTitile = bookTitile;
            this.authFirstname = authFirstname;
            this.authLastname = authLastname;
            this.editionYear = editionYear;
            this.subjectId = subjectId;
            this.coverId = coverId;
            this.languageId = languageId;
            this.publisherName = publisherName;
            this.editionId = editionId;
            this.price = price;
            this.quantity = quantity;
            this.description = description;
            this.locationId = locationId;
            this.remarks = remarks;
            this.img1 = img1;
            this.img2 = img2;
            this.videoUrl = videoUrl;
            this.createrId = createrId;
            this.createdDate = createdDate;
            this.updateId = updateId;
            this.updatedDate = updatedDate;
        }

        @Id
        @GeneratedValue(strategy = IDENTITY)
        @Column(name = "id", unique = true, nullable = false)
        public Integer getId() {
            return this.id;
        }

        public void setId(Integer id) {
            this.id = id;
        }

        @Column(name = "isbn", length = 90)
        public String getIsbn() {
            return this.isbn;
        }

        public void setIsbn(String isbn) {
            this.isbn = isbn;
        }

        @Column(name = "book_titile")
        public String getBookTitile() {
            return this.bookTitile;
        }

        public void setBookTitile(String bookTitile) {
            this.bookTitile = bookTitile;
        }

        @Column(name = "auth_firstname", length = 120)
        public String getAuthFirstname() {
            return this.authFirstname;
        }

        public void setAuthFirstname(String authFirstname) {
            this.authFirstname = authFirstname;
        }

        @Column(name = "auth_lastname", length = 120)
        public String getAuthLastname() {
            return this.authLastname;
        }

        public void setAuthLastname(String authLastname) {
            this.authLastname = authLastname;
        }

        @Column(name = "edition_year", length = 20)
        public String getEditionYear() {
            return this.editionYear;
        }

        public void setEditionYear(String editionYear) {
            this.editionYear = editionYear;
        }

        @Column(name = "subject_id")
        public Integer getSubjectId() {
            return this.subjectId;
        }

        public void setSubjectId(Integer subjectId) {
            this.subjectId = subjectId;
        }

        @Column(name = "cover_id")
        public Integer getCoverId() {
            return this.coverId;
        }

        public void setCoverId(Integer coverId) {
            this.coverId = coverId;
        }

        @Column(name = "language_id")
        public Integer getLanguageId() {
            return this.languageId;
        }

        public void setLanguageId(Integer languageId) {
            this.languageId = languageId;
        }

        @Column(name = "publisher_name", length = 70)
        public String getPublisherName() {
            return this.publisherName;
        }

        public void setPublisherName(String publisherName) {
            this.publisherName = publisherName;
        }

        @Column(name = "edition_id")
        public Integer getEditionId() {
            return this.editionId;
        }

        public void setEditionId(Integer editionId) {
            this.editionId = editionId;
        }

        @Column(name = "price", precision = 12, scale = 0)
        public Float getPrice() {
            return this.price;
        }

        public void setPrice(Float price) {
            this.price = price;
        }

        @Column(name = "quantity", length = 40)
        public String getQuantity() {
            return this.quantity;
        }

        public void setQuantity(String quantity) {
            this.quantity = quantity;
        }

        @Column(name = "description", length = 65535)
        public String getDescription() {
            return this.description;
        }

        public void setDescription(String description) {
            this.description = description;
        }

        @Column(name = "location_id")
        public Integer getLocationId() {
            return this.locationId;
        }

        public void setLocationId(Integer locationId) {
            this.locationId = locationId;
        }

        @Column(name = "remarks", length = 65535)
        public String getRemarks() {
            return this.remarks;
        }

        public void setRemarks(String remarks) {
            this.remarks = remarks;
        }

        @Column(name = "img1")
        public String getImg1() {
            return this.img1;
        }

        public void setImg1(String img1) {
            this.img1 = img1;
        }

        @Column(name = "img2")
        public String getImg2() {
            return this.img2;
        }

        public void setImg2(String img2) {
            this.img2 = img2;
        }

        @Column(name = "video_url", length = 65535)
        public String getVideoUrl() {
            return this.videoUrl;
        }

        public void setVideoUrl(String videoUrl) {
            this.videoUrl = videoUrl;
        }

        @Column(name = "creater_id")
        public Integer getCreaterId() {
            return this.createrId;
        }

        public void setCreaterId(Integer createrId) {
            this.createrId = createrId;
        }

        @Temporal(TemporalType.TIMESTAMP)
        @Column(name = "created_date", length = 19)
        public Date getCreatedDate() {
            return this.createdDate;
        }

        public void setCreatedDate(Date createdDate) {
            this.createdDate = createdDate;
        }

        @Column(name = "update_id")
        public Integer getUpdateId() {
            return this.updateId;
        }

        public void setUpdateId(Integer updateId) {
            this.updateId = updateId;
        }

        @Temporal(TemporalType.TIMESTAMP)
        @Column(name = "updated_date", length = 19)
        public Date getUpdatedDate() {
            return this.updatedDate;
        }

        public void setUpdatedDate(Date updatedDate) {
            this.updatedDate = updatedDate;
        }

    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-11T17:42:56.650

您的`Bookdetails`类必须实现该`public boolean equals(Object o)`方法才能使用该`List#remove(Object o)`方法。否则，您应该按照@juergend 的说明自行处理对象移除。

实现该`equals`方法将是这样的：

```
public class Bookdetails {
    private int id;
    //other attributes and methods...

    @Override
    public boolean equals(Object o) {
        if (o instanceof Bookdetails) {
            Bookdetails oBookdetails = (Bookdetails)o;
            return (this.id == oBookdetails.id);
        }
        return false;
    }
} 
```

现在`books.remove(book);`无需`for ( Bookdetails b : books )`循环即可工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-11T17:47:08.557

默认相等性是基于的，`reference`因此您需要分配`book`给来自的引用，`list`这样`remove`才能工作。或者你可以覆盖`equals`，但我不太确定你是否可以提供平等`bookId`

```
for ( Bookdetails b : books ) 
{
    if ( Integer.toString(b.getId()).equals(bookid))
    {
        already_exists = true;
        book= b; 
        break;
    }
} 
```

然后，当您`remove`因为引用相等而调用时，它将删除`book`

**更新：**

如果它的 POJO 和你有那么你可以很容易地实现`primary key`equals 。无需遍历列表。`primary key``id`

# jquery - iPad jquery滚动上的cufon字体替换问题

> ID：13333642
> 
> 赞同：0
> 
> 时间：2012-11-11T17:36:52.243
> 
> 标签：jquery, iphone, ipad, cufon

我在[这里遇到与此示例相同的问题](http://ralf-schmitz.de/aktuell/)。
当我`Cufon`在 iPad 或 iPhone 上使用字体替换时，字体在其 div 内滚动会有延迟。
在桌面浏览器上似乎一切正常，但在手机上，字体“粘住”并且滚动不流畅。

请问有人解决这个问题吗？

# google-analytics - 谷歌分析代码真的可以留在我的 HTML 的头部并且仍然不会影响性能吗？

> ID：13333651
> 
> 赞同：1
> 
> 时间：2012-11-11T17:37:50.990
> 
> 标签：google-analytics

我的小组正在将以下内容添加到头部区域：

```
 <script type="text/javascript">
        var _gaq = _gaq || [];
        _gaq.push(['_setAccount', 'UA-xxx-1']);
        _gaq.push(['_trackPageview']);
        (function () {
            var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
            ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
            var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
        })();
    </script>

 </head> 
```

当被问及这个问题时，他们说可以在那里，因为它不会同步运行。这是正确的还是应该将代码移到页脚？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T19:24:49.043

这是正确的，因为脚本正在加载`asynchronously`并且`asynchronous`加载不会保持/挂起页面加载过程，因此不会降低性能。

这是关于[异步 Vs的答案。同步](https://stackoverflow.com/questions/748175/asynchronous-vs-synchronous-execution-what-does-it-really-mean)，这里有一篇关于[加载 javascript](http://www.webtechresources.com/2012/01/loading-a-javascript-library-synchronous-asynchronous-lazy-loading/)的非常好的文章，其中包含更多技术和示例。

我认为这是一种更好的方法（一种不显眼的延迟加载模式）

```
(function() {
    function async_load(){
        // ...
    }
    if (window.attachEvent)
        window.attachEvent('onload', async_load);
    else
        window.addEventListener('load', async_load, false);
})(); 
```

但是当您像这样同步（经典）加载脚本时

```
<script type="text/javascript" src="yourScript.js"></script> 
```

将其保留在页脚中是个好主意，这样它就不会挂起页面加载。

您也可以`async`在脚本中使用以允许同步加载，但并非所有浏览器都支持。这是关于它的[另一个答案。](https://stackoverflow.com/questions/1834077/which-browsers-support-script-async-async)

# django - 通过 django social auth 和 tastepie 对主干应用程序进行身份验证

> ID：13333653
> 
> 赞同：3
> 
> 时间：2012-11-11T17:37:56.657
> 
> 标签：django, backbone.js, oauth-2.0, tastypie, django-authentication

我正在使用客户端 MVC，它将我的服务器简化为 API。我使用[django-tastypie](https://github.com/toastdriven/django-tastypie)作为 API。当我没有调用 api 的麻烦时，[django-social auth](https://github.com/omab/django-social-auth)为我解决了问题。我如何使用美味派处理社交登录/注册？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T19:59:25.873

这个问题有点老了，但对于其他感兴趣的人，我建议查看[django-tastypie-ext ，它有一个使用](https://github.com/adamhadani/django-tastypie-ext)[django-facebook](https://github.com/tschellenbach/Django-facebook)的优秀示例 login/reg Authentication 类。支持其他 Oauth 提供程序应该与示例类似。

# python-3.x - 如何在 Ubuntu 中为 glib 安装 Python3 绑定？

> ID：13333654
> 
> 赞同：1
> 
> 时间：2012-11-11T17:37:59.497
> 
> 标签：python-3.x, gtk, ubuntu-12.04, glib, cairo

我在 Ubuntu 12.04 系统上使用 Python3，并且正在编写一些小应用程序来教自己如何在 Python 中使用 cairo。在 idle3 我发现以下内容：

```
 >>> import glib
    Traceback (most recent call last):
      File "<pyshell#0>", line 1, in <module>
        import glib
    ImportError: No module named glib 
```

我在相同的设置上使用了 Gtk 和 cairo，并且都安装了 python3-gi 和 python3-gi-cairo，并且在其他方​​面似乎工作正常。似乎还缺少其他东西，但是尽管进行了几次网络搜索，我还没有发现任何关于这里出了什么问题的线索。

有人可以指出我正确的方向吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-12T05:11:34.840

对于 gobject 内省，这是 python3-gi 给你的，正确的咒语是这样的：

```
 >>> from gi.repository import GLib 
```

对于开罗，使用`cairo`而不是`GLib`.

一般来说，至少在 Linux 下，已安装的 gobject introspection 类型库是安装在`/usr/lib/girepository-1.0`（或类似的）中的。您用于导入的名称直接来自 typelib 文件名。

# c++ - C++：如何在类中声明一个空的私有静态向量？

> ID：13333658
> 
> 赞同：3
> 
> 时间：2012-11-11T17:38:44.927
> 
> 标签：c++, class, static, initialization

> **可能重复：**
> [初始化私有静态成员](https://stackoverflow.com/questions/185844/initializing-private-static-members)

这真的让我发疯，我想在一个类中声明一个静态私有向量，我将用作共享内存。

我的向量声明是这样的：

```
private: static vector< pair< string, bool > > flags; 
```

这是在一个类中完成的，但我怎样才能将它初始化为空向量？最好的办法是 init 在类本身中，因为我需要在很多地方使用它。另一种选择是，`main()`但仅此而已。

我有使用向量的 setFlag() 和 getFlag() 方法，但它给了我各种链接器错误，因为只有声明，没有定义！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-11T17:43:15.497

> 我有使用向量的 setFlag() 和 getFlag() 方法，但它给了我各种链接器错误，因为只有声明，没有定义！

您需要在类实现文件（或另一个源文件）中对其进行初始化：

```
vector< pair< string, bool > > MyClass::flags; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-11T17:43:05.653

您必须在实现的文件中添加*定义*`YourClass`：

```
vector< pair< string, bool > > YourClass::flags; 
```

此行将调用默认构造函数，该构造函数初始化一个空向量。

# arrays - 生成所有可能的整数数组

> ID：13333659
> 
> 赞同：3
> 
> 时间：2012-11-11T17:38:52.830
> 
> 标签：arrays, matlab, permutation

我想生成给定长度的所有可能的整数数组，`L`最大元素大小`M`。

最小元素大小为 1。

如果`M = 3`, 和`L = 2`, 输出将如下：

```
[1,1]
[1,2]
[1,3]
[2,1]
[2,2]
[2,3]
[3,1]
[3,2]
[3,3] 
```

有`M^L`不同的组合，所以我猜 Matlab 代码看起来像这样：

```
function [arrays] = allArrays(M,L)
  for i = 1:(M^L)
    arrays(i) = % Something here that translates i to the desired array.
  end
end 
```

我不确定循环中间应该做什么，任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-11T17:45:07.123

你应该使用`ndgrid`：

```
[y x]=ndgrid(1:3,1:3);
resu=[y(:) x(:)]; 
```

如果你想给出`M`和`L`作为输入，你应该做以下技巧：

```
arg=repmat((1:M)',1,L);
arg=mat2cell(arg,M,ones(1,L));
resu=cell(1,L);
[resu{:}]=ndgrid(arg{:});
resu=cell2mat(cellfun(@(x) x(:), resu,'UniformOutput',0)); 
```

结果：

```
 resu =  
     1     1
     2     1
     3     1
     1     2
     2     2
     3     2
     1     3
     2     3
     3     3 
```

# regex - 在 sed 中使用字幕

> ID：13333660
> 
> 赞同：0
> 
> 时间：2012-11-11T17:39:03.720
> 
> 标签：regex, sed

我从 sed 开始。任何人都可以引导我如何解决这个问题吗？我从这个开始，现在是 sed 的基本命令：

```
{0}{20}First subtitle
{30}{50}Second subtitle|New line is made this way.
{70}{100}Third.
{1010}{1033}Fourth etc. 
```

括号中的数字表示字幕应该可见的开始和结束。让我们有一位翻译人员以这种方式翻译字幕（我将在此文本上签名 (*)）：

```
{0}{20}First subtitle
Translation of the first subtitle.
{30}{50}Second subtitle|New line is made this way.
Translation of the second subtitle.|Second line of translation of the second subtitle.
{70}{100}Third.
Translation of third.
{1010}{1033}Fourth etc.
Translation of fourth etc. 
```

我需要做 3 件事：1）分离翻译的字幕：

```
{0}{20}Translation of the first subtitle.
{30}{50}Translation of the second subtitle|Second line of translation of the second subtitle.
{70}{100}Translation of third.
{1010}{1033}Translation of fourth etc. 
```

2）从带有两个字幕（用*签名）的文本中分离出只有原始字幕并得到这个：

```
{0}{20}First subtitle
{30}{50}Second subtitle|New line is made this way.
{70}{100}Third.
{1010}{1033}Fourth etc. 
```

3) 获取 1) 和 2) 的输出并获得带有两个字幕的原文（带符号 *）：

```
{0}{20}First subtitle
Translation of the first subtitle.
{30}{50}Second subtitle|New line is made this way.
Translation of the second subtitle.|Second line of translation of the second subtitle.
{70}{100}Third.
Translation of third.
{1010}{1033}Fourth etc.
Translation of fourth etc. 
```

有人可以给我一些建议如何开始吗？非常感谢。

我可能应该提到（应该很清楚）我会这样称呼它：

```
cat input_file.txt | sed <"program" in sed> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T05:34:30.537

One way of doing it:

* * *

Steps 1 and 2: separate out the translated subtitle and original subtitle from (*) (I call it `sub_both` in the script below)

```
sed -r '
/^((\{[0-9]+\}){2}).*/ {
    w sub_orig
    s//\1/
    N
}
s/\n//
w sub_tran
' sub_both 
```

What it does is:

1.  Matches lines beginning with two sequence of digits enclosed in braces.
2.  Write those lines to the file `sub_orig`
3.  Replace the line with the 1st captured subexpression (which is the 2 sequences of digits)
4.  Append next line (which is the translated line) to pattern space. As we recall, the pattern space after **3.** is just the 2 sequences of digit.
5.  Remove the newline in pattern space, resulting in `{digits}{digits}translated line...`
6.  Write the pattern space to file `sub_tran`

* * *

Step 3: Now that we have `sub_orig` and `sub_tran`, reconstruct (*) as `sub_both_2`

```
paste -d "\n" sub_orig <(sed -r '/^((\{[0-9]+\}){2})//' sub_tran) >sub_both_2 
```

`sub_tran` is preprocessed via `sed` to remove the 2 sequences of digits, and the 2 files are merged with newline as the separator.

p/s: `<(command)` is process substitution which creates a temporary file from `command`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-11T18:36:34.697

*将字幕文件* 的翻译保存`file_1`到*字幕文件* `file_2`后，执行以下命令：

```
sed -r 's/^[{][0-9]+[}][{][0-9]+[}]//' file_2 | paste -d"\n" file_1 - 
```

# asp.net - 将数组从 vb 代码隐藏到 javascript 数据表中

> ID：13333664
> 
> 赞同：0
> 
> 时间：2012-11-11T17:39:35.233
> 
> 标签：asp.net, arrays, vb.net, datatable, typeconverter

所以我试图在我的asp.net网站上使用这个javascript [https://google-developers.appspot.com/chart/interactive/docs/gallery/linechart](https://google-developers.appspot.com/chart/interactive/docs/gallery/linechart)

我在代码隐藏中有一个数组，其中包含我的数据，我将其转换为这样的多维数据表。

```
<in codebehind vb>
Public Property datat As DataTable

For outerIndex As Integer = 0 To 2
    Dim newRow As DataRow = table.NewRow()
    For innerIndex As Integer = 0 To 2
            newRow(innerIndex) = Array(outerIndex, innerIndex)
    Next
    table.Rows.Add(newRow)
Next

datat = table

<in asp>

function drawChart() {
    var data = <%=datat%> 
```

我总是得到一个未定义的错误数据表。

我的新作品

```
<in asp>

<script type="text/javascript" src="https://www.google.com/jsapi"></script>
<script type="text/javascript">
    google.load("visualization", "1", {packages:["corechart"]});
    google.setOnLoadCallback(drawcharts);
    function drawcharts() {
        var data = google.visualization.arrayToDataTable([
            ['X', 'MW'],
      [<%=mwtimepublic%>, <%=mwarraypublic%>]
        ]);

        var options = {
            title: 'MW Trend'
        };

        var chart = new google.visualization.LineChart(document.getElementById('chart_div'));
        chart.draw(data, options);
    });
</script> 
```

公共函数 Dtable() As DataTable 将 startdate 作为 String 将 enddate 作为 String

```
 If FirstRun = False Then
        datat.Clear()
    End If

    If FirstRun = True Then
        FirstRun = False
        enddate = Date.Today
        startdate = DateAdd(DateInterval.Day, -20, Date.Today)
    Else
        enddate = TextBox2.Text
        startdate = TextBox1.Text
    End If

'<confidential code></confidentialcode>

    Dim mwaray(pdata.Count)
    Dim mwtime(pdata.Count)
    Dim table As New DataTable
    table.Columns.Add("X")
    table.Columns.Add("MW")
    Dim i As Integer
    Dim x As Integer
    For i = 1 To pdata.Count
        mwaray(i) = pdata(i).Value
        If mwaray(i) > upperlimit Then
            upperlimit = mwaray(i) + 50
        End If
    Next

    For i = 1 To pdata.Count
        mwtime(i) = "'" & pdata(i).TimeStamp.LocalDate.Month.ToString() & "/" & pdata(i).TimeStamp.LocalDate.Day.ToString() & "/" & pdata(i).TimeStamp.LocalDate.Year.ToString() & " " & pdata(i).TimeStamp.LocalDate.TimeOfDay.Hours.ToString() & ":" & pdata(i).TimeStamp.LocalDate.TimeOfDay.Minutes.ToString() & ":" & pdata(i).TimeStamp.LocalDate.TimeOfDay.Seconds.ToString() & "'"
    Next

    For i = 1 To pdata.Count
        mwarraypublic.Add(mwaray(i))
    Next

    For i = 1 To pdata.Count
        mwtimepublic.Add(mwtime(i))
    Next

End Function 
```

我仍然没有绘制图表

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T17:50:01.060

我制作了一个视频，介绍如何在从代码隐藏获取数组到 javascript 时创建 jquery ui 自动完成功能

跳到 6:00 看看我是如何制作数组的 [http://www.youtube.com/watch?v=ULHSqoDHP-U&list=UUgtKyNvllU9E6c2Mi8OtzCQ&index=6&feature=plcp](http://www.youtube.com/watch?v=ULHSqoDHP-U&list=UUgtKyNvllU9E6c2Mi8OtzCQ&index=6&feature=plcp)

```
PageMethods.YourWebMethod(function(results){
  var data = resluts;
  //the rest of your code goes here...
}); 
```

更新：

* * *

Google 实际上将数组数组转换为数据表。换句话说，您必须返回一个行数组，它们自己的行是一个列值数组。

因此，在您背后的代码中，首先执行以下导入 webservices

```
Imports System.Web.Services 
```

然后使用返回数组列表的函数创建您的网络方法

```
<WebMethod()>
Public Shared Function Dtable() As ArrayList
dim table As New ArrayList
Dim YourDataSetTable as new Dataset.YorDataTable
'fill you table here

'first get column names as the first row/array
dim colNames as New ArrayList

For Each col as DataColumn in YourDataSetTable.Columns
   colNames.Add(col.ColumnName)
Next
table.Add(colNames)

'then on to the data
For Each r as DataRow in YourDataSetTable .Rows
  dim colVals as New ArrayList
  For Each col as DataColumn in YourDataSetTable.Columns
    colVals.Add(r.Item(col.ColumnName))
  Next
  table.Add(colVals)
Next
Return table
End Function 
```

然后在javascript中

```
PageMethods.Dtable(function(results){
  var data = resluts;
  //the rest of your code goes here...
}); 
```

确保页面上有一个启用了 pagemethods 的脚本管理器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-11T19:34:01.097

您发布的代码示例不应编译。在 Visual Basic 中，有一些[自动实现的属性](http://msdn.microsoft.com/en-us/library/dd293589.aspx)，就像您在代码的第一行中看到的那样，然后是一个与数据表无关的块。

尝试将代码放入您的属性 getter：

```
Public ReadOnly Property datat As DataTable
   Get
      For outerIndex As Integer = 0 To 2
          Dim newRow As DataRow = table.NewRow()

          For innerIndex As Integer = 0 To 2
              newRow(innerIndex) = Array(outerIndex, innerIndex)
          Next

          table.Rows.Add(newRow)
      Next

      Return table
   End Get
End Property 
```

# javascript - 如何修复这个 jQuery 消息栏功能？

> ID：13333668
> 
> 赞同：0
> 
> 时间：2012-11-11T17:40:06.867
> 
> 标签：javascript, jquery

```
function loader_bar(msg,msgtype) {

      switch (msgtype) {
        case 'error':
            $class = 'bar_error topbar'
            break;
        case 'success':
            $class = 'bar_success topbar'
            break;
        case 'working':
            $class = 'topbar'
            msg = 'Spinner ' + msg
            break;
        default:
            $class = 'topbar'
            msg = msg
            break;
      }

     if ($("#loader_bar").is(":visible")) {
         $("#loader_bar").removeClass()
         clearInterval(int);
         $("#loader_bar").html(msg).addClass($class);
    } else {
      $('<div />', { "class": $class, html: msg, "id" : "loader_bar" }).prependTo("body").slideDown('fast');    
    }

      myTimer = setInterval($("#loader_bar").slideUp('fast'), 10000);
} 
```

现在，它出现一瞬间然后消失？

基本上我希望在调用某个类时出现一个栏，10 秒后我希望它出现，`slideUp`但是如果在超时之前从另一个函数再次调用它。我想重置计时器并更改消息/类并再保持 10 秒...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T17:47:37.577

```
myTimer = setInterval($("#loader_bar").slideUp('fast'), 10000); 
```

应该

```
myTimer = setInterval(function() { $("#loader_bar").slideUp('fast'); }, 10000); 
```

要运行的语句必须在函数中，否则会立即被调用。

# jquery - Phonegap 上的 jQuery 动画停止工作

> ID：13333669
> 
> 赞同：1
> 
> 时间：2012-11-11T17:40:07.727
> 
> 标签：jquery, ios, animation, cordova

我在 iOS 上的 phonegap 应用程序中有一个动画，有时会完全停止工作。我有一个元素，它在其上侦听 touchstart 事件。处理程序应该打开一个 div，它最初设置了*display:none*。我尝试了以下功能来打开带有动画的 div：

```
$("#sections").toggle();
$("#sections").slideToggle();
$("#sections").stop().slideToggle(); 
```

显然，无论使用哪个功能，动画都会停止工作。也就是说，它首先打开和关闭 div 几次，但在任意时间后停止工作。失败后，我仍然可以在控制台中看到每个*touchstart*事件的调试消息，但动画不再起作用。

我正在使用 jQuery 1.8.1 和 Phonegap 2.1。

有没有人经历过这样的事情？

HTML 代码。touchstart*处理*程序绑定到#navibtn（工作正常），并且处理程序应该用动画打开#sections：

```
<div id="navibar">
<div id="titlebar" class="row">
    <div id="navibtn" class="pull-right"></div>

    <div>
    <span>Title</span>
    </div>
    <div id="sections">
        <ul class="nav">
        <li class="active" id="link1">
            <a href="#section1">Section</a>
        </li>
        <li id="link2">
            <a href="#section2">Section2</a>
        </li>
        <li id="link3">
            <a href="#section3">Section3</a>
        </li>
        <li id="link4">
            <a href="#section4">Section4</a>
        </li>
        </ul>
    </div>
</div>
</div> 
```

# c# - C# Property SetValue 无法处理泛型 List 类型

> ID：13333670
> 
> 赞同：1
> 
> 时间：2012-11-11T17:40:31.063
> 
> 标签：c#, winforms, generics, system.reflection, setvalue

在我的 WinForm 应用程序中，我实际上正在使用该`LightweightDAL`项目，它提供了一种很好的方法来填充我的数据模型。除了设置为另一个模型列表的属性外，一切正常。这是我的模型课：

```
public class SchedaFamiglia
{
    [DBField("Id")]
    public int Id { get; set; }

    [DBField("IdFamiglia")]
    public int IdFamiglia { get; set; }

    [DBField("IdMamma")]
    public int IdMamma { get; set; }

    [DBField("IdPapa")]
    public int IdPapa { get; set; }

    [DBField("IdBambino")]
    public List<SchedaBambino> Figli { get; set; }

    public SchedaFamiglia()
    {
    }} 
```

上面的模型`SchedaBambino`只是一个基本类型属性的列表（int32、string...）。

这是`GetItemFromReader`方法的片段：

```
private static T GetItemFromReader<T>(IDataReader rdr) where T : class
    {
        Type type = typeof(T);
        T item = Activator.CreateInstance<T>();
        PropertyInfo[] properties = type.GetProperties();

        foreach (PropertyInfo property in properties)
        {
            // for each property declared in the type provided check if the property is
            // decorated with the DBField attribute
            if (Attribute.IsDefined(property, typeof(DBFieldAttribute)))
            {
                DBFieldAttribute attrib = (DBFieldAttribute)Attribute.GetCustomAttribute(property, typeof(DBFieldAttribute));

                if (Convert.IsDBNull(rdr[attrib.FieldName])) // data in database is null, so do not set the value of the property
                    continue;

                if (property.PropertyType == rdr[attrib.FieldName].GetType()) // if the property and database field are the same
                    property.SetValue(item, rdr[attrib.FieldName], null); // set the value of property
                else
                {
                    // change the type of the data in table to that of property and set the value of the property
                    property.SetValue(item, Convert.ChangeType(rdr[attrib.FieldName], property.PropertyType), null);
                }
            }
        } 
```

不幸的是，上面的方法无法处理通用列表，我不知道如何实现。

有人可以帮助我吗？

# java - 解释 Python 并转换成 Java

> ID：13333676
> 
> 赞同：0
> 
> 时间：2012-11-11T17:41:28.113
> 
> 标签：java, python, list

在[Darius Bacon 的代码](https://stackoverflow.com/questions/746082/how-to-find-list-of-possible-words-from-a-letter-matrix-boggle-solver/750012#750012)中，在第 11 行和第 12 行，有以下代码：

```
prefixes = set(word[:i] for word in words for i in range(2, len(word)+1)) 
```

我正在尝试将他的程序翻译成 Java，但我遇到了困难。

这是做什么的？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-11T17:44:54.813

扩展列表理解：

```
prefixes = set()
for word in words:
    for i in range(2, len(word)+1)
        prefixes.add(word[:i]) 
```

`word[:i]`最多`word`但不包括索引`i`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-11T17:48:09.287

在 Java 中试试这个

```
Set<String> prefixes = new HashSet<String>();
for(String word:words){
  for(int i=1;i<word.length;i++){ 
     prefixes.add(word.substring(0,i));
  }
} 
```

# jquery - JqueryUI Autocomplete：如何正确显示带有条件的过滤建议？

> ID：13333678
> 
> 赞同：0
> 
> 时间：2012-11-11T17:41:30.470
> 
> 标签：jquery, jquery-ui, jquery-ui-autocomplete

我正在使用`renderItem`带有条件的 JQueryUI 自动完成来显示或不显示过滤后的建议。

在 1.8 版之前，`return false`如果条件不满足，我会使用它并且效果很好，但是在新的 1.9 版中，我得到了错误：`Uncaught TypeError: Object false has no method 'data'`

我设法通过返回一个 void object 找到了解决方法`$('')`，但我不确定这是不是这样做的好方法。

是否有人解释正确的方法来避免显示建议？

```
$('#myAutocomplete').data( "autocomplete" )._renderItem = function( ul, item ) {

     if(myCondition)
         return $( "<li>" )
            .data( "item.autocomplete", item )
            .append( "<a>" + item.label + "<br>" + item.desc + "</a>" )
            .appendTo( ul );
     else
         return $('');//Cancel the suggestion rendering, return void since 1.9 else just return false
}; 
```

灵感来自[http://jqueryui.com/autocomplete/#custom-data](http://jqueryui.com/autocomplete/#custom-data)

这是一个可以玩的小提琴：http: [//jsfiddle.net/GF5c4/](http://jsfiddle.net/GF5c4/)

# javascript - Javascript CustomEvent 详细信息未通过

> ID：13333683
> 
> 赞同：13
> 
> 时间：2012-11-11T17:42:33.260
> 
> 标签：javascript, jquery, jquery-events

我正在尝试创建一个自定义 Javascript 事件。该事件正常工作并触发，但我传递它的“详细信息”对象不可用。

这是我用来创建和调度事件的代码：

```
var double_tap = new CustomEvent("doubleTap", {
    detail: {
        hello: 'world'  
    },
    bubbles: true,
    cancelable: true
});

this.dispatchEvent(double_tap); 
```

然后我使用 jQuery 向正文添加事件侦听器：

```
$('body').on('doubleTap', function( e ) { 
    console.log(e);
}); 
```

它确实会触发，并且控制台日志会发生，但不幸的是，该日志仅输出事件详细信息，包括气泡和可取消属性，而不会输出“详细信息”对象，因此无法访问该信息。

这里以 jsbin 为例，我在 body 的 click 事件上创建事件，这样你就可以看到控制台；[http://jsbin.com/looseroots/6](http://jsbin.com/looseroots/6)

我希望能够在事件触发时从“详细信息”对象中获取数据。我究竟做错了什么？我已经在 Chrome 和 iOS 上的 Safari 中对此进行了测试。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2016-02-10T15:42:09.190

```
obj.addEventListener("eventName", function(e) {
console.log(e.your_property)
})

var event = new CustomEvent("eventName");
event.your_property = { key: "value" };

obj.dispatchEvent(event); 
```

您可以在发送时在您的 CustomEvent 中创建属性。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-11-11T18:03:09.603

您需要访问 originalEvent 属性以获取详细信息

```
console.log(e.originalEvent.detail); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-02-05T05:16:09.500

我发现了以下提交：[https ://github.com/jquery/jquery/commit/a90ff8c8c79bfcc32afd340a12f016f20a31d8b6](https://github.com/jquery/jquery/commit/a90ff8c8c79bfcc32afd340a12f016f20a31d8b6)

这个修复在 jQuery 的`compat`分支中，应该从 jQuery 3.0 开始修复。

# python - Flask 应用偶尔挂起

> ID：13333684
> 
> 赞同：13
> 
> 时间：2012-11-11T17:42:39.390
> 
> 标签：python, flask

我一直在开发一个 Flask 应用程序，它使用 Twilio 处理 SMS 消息，将它们存储在数据库中，并通过 JSONP GET 请求提供对前端的访问。我已经使用 supervisord 对其进行了守护，这似乎工作得很好，但是每隔几天它就会开始挂起（即所有请求都永远挂起或超时），我必须重新启动该过程。（我也试过用 nohup 简单地运行它，但同样的问题。）我怀疑 sqlite3 偶尔会阻塞，但我最近的测试是编写一个不涉及数据库访问的请求方法，那就是超时也。我非常困惑——希望你见过类似的东西或者知道是什么原因造成的。

相关代码可以在[这里](https://github.com/man1/txtbot/blob/master/backend/txtbot_server.py)找到，它目前正在我的 VPS 上运行（并且在这篇文章中停滞不前），地址为[mattnichols.net:6288](http://mattnichols.net:6288)

谢谢！

更新：你认为这可能是 Flask 的开发服务器的问题吗？我想相信用 Tornado（或类似的东西）包装我的应用程序可以解决这个问题，但我也运行其他东西的时间更长，使用开发服务器没有问题。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-19T19:09:58.067

作为记录，这似乎已经通过使用 Tornado 而不是 Flask 开发服务器运行我的应用程序来解决。一旦我决定这样做，将我的 Flask 代码包装到 Tornado 服务器中是非常容易的：如果你发现自己处于同样的情况，请查阅[http://flask.pocoo.org/docs/deploying/wsgi-standalone/#tornado 。](http://flask.pocoo.org/docs/deploying/wsgi-standalone/#tornado)

# java - Java GUI JPanel 不工作

> ID：13333687
> 
> 赞同：1
> 
> 时间：2012-11-11T17:43:04.633
> 
> 标签：java, user-interface

我真的不明白为什么这个JPanel“p”没有出现？我认为我将 JPanel p 编码到了 Jframe 的中间并且应该使整个 JFrame RED 但它似乎没有这样做并且按钮和 JPanel 没有出现。对不起。我知道我可能很愚蠢，但请帮忙。:? 这是代码。

```
package com.gorillalogic.henry;

import java.awt.BorderLayout;
import java.awt.Color;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;

import javax.swing.*;

public class Notepad {

    private JFrame f; // creates all GUI components
    private JPanel p;
    private JButton b1;

    public Notepad() {

        gui();
    }

    public void gui() {

        f = new JFrame("Notepad");
        p = new JPanel();

        b1 = new JButton("Quit");
        b1.addActionListener(new ActionListener() {
            public void actionPerformed(ActionEvent e) {
                System.exit(0);
            }
        });

        f.setSize(600, 400);
        f.setLocationRelativeTo(null);
        f.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        f.setVisible(true);

        p.setBackground(Color.RED);
        p.add(b1);

        f.add(p, BorderLayout.CENTER);

    }

    public static void main(String[] args) {
        new Notepad();

    }

} 
```

提前致谢。:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T17:47:44.823

```
p.setOpaque(true); 
```

你需要这样做。

# mongodb - 无法在 mongodb mapReduce 命令中设置查询过滤器

> ID：13333693
> 
> 赞同：4
> 
> 时间：2012-11-11T17:43:24.723
> 
> 标签：mongodb, mapreduce

我正在尝试使用查询过滤 mapReduce 命令。mapReduce 命令似乎没有使用此查询。当我使用具有相同参数的 runCommand 时，会使用查询过滤器。我尝试使用 mongodb 2.2.1 和 2.0.1。

我的 mapReduce 函数的查询没有使用。

```
m = function () {
    if (this.duration > 0) {
    emit("dur", this.duration);
  }
}

r = function (key, values) {
    var index = 0;
    var sum = 0;
    for (var i = 0; i < values.length; i++) {
        sum += values[i];
        index++;
    }
    return sum / index;
} 
```

此命令不起作用：

```
res = db.movies.mapReduce(m,r, {out: { inline : 1}},{query:{kinds:'Action'}});

{
    "results" : [
            {
                    "_id" : "dur",
                    "value" : 5148.227224559308
            }
    ],
    "timeMillis" : 1849,
    "counts" : {
            "input" : 105472,
            "emit" : 69602,
            "reduce" : 106,
            "output" : 1
    },
    "ok" : 1,
} 
```

该命令起作用：

```
res = db.runCommand({mapReduce : "movies", map : m, reduce : r, query : {kinds:'Action'}, out : {inline:1} })

{
    "results" : [
            {
                    "_id" : "dur",
                    "value" : 6134.118191572414
            }
    ],
    "timeMillis" : 238,
    "counts" : {
            "input" : 3577,
            "emit" : 2910,
            "reduce" : 4,
            "output" : 1
    },
    "ok" : 1
} 
```

使用 runCommand 可以使用查询。有任何想法吗 ？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-11T17:48:23.763

您需要将`out`和`query`选项组合成一个对象：

```
res = db.movies.mapReduce(m,r, {out: { inline : 1}, query: {kinds: 'Action'} }); 
```

# css - 背景固定位置

> ID：13333695
> 
> 赞同：1
> 
> 时间：2012-11-11T17:43:44.840
> 
> 标签：css, jquery-mobile

我正在使用 jquery UI 开发一个移动网页。我想设置一个即使用户向下滚动页面也保持静态的背景。所以背景总是一样的，但是页面的内容是滚动的。

我已经在谷歌上搜索了很长一段时间，但我找不到任何有用的东西......来自 StackOverflow 的这个链接是最准确的，但它现在可以在 android 浏览器上运行（[Jquery Mobile Android - Fixed full-screen background image ?](https://stackoverflow.com/questions/9880661/jquery-mobile-android-fixed-full-screen-background-image) )

知道怎么做吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T18:03:31.490

所以我想通常的（下面）都不适合你？

```
 <style>
 body{
 background-image:url('image.jpg');
 background-repeat:no-repeat;
 background-attachment:fixed;
 background-position:center top;
 background-size:auto;
 }</style> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-11T17:52:08.667

尝试将图像作为固定位置的全尺寸 div 的背景。

然后，您可以将所有内容放在可以滚动的全尺寸固定位置 div 中。

# css - 图像无拉伸或裁剪

> ID：13333699
> 
> 赞同：3
> 
> 时间：2012-11-11T17:44:36.677
> 
> 标签：css, image, stretch

我的问题很简单。假设我有两个矩形图像。第一个是 200px 宽和 100px 高，第二个是 100px 宽和 200px 高。

我想以恒定的宽度/高度显示图像，例如 150 像素 x 150 像素而不拉伸图像以适应：

![在此处输入图像描述](../Images/b3d7052f137e1de2f91be4e3be7a76ae.png)

我不介意图像周围有空白/填充。问题是图像可以是任何宽度和高度，我想将它们限制在一个方形盒子而不拉伸它们。

以下 CSS 将图像拉伸到 150 x 150 像素：

```
img {
    width: 150px;
    height: 150px;
} 
```

最可取的解决方案是 CSS，即使我需要更多的标记。JS/jQuery 也可以。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-11T17:50:48.983

关于什么：

```
img {
    max-height:150px;
    max-width:150px
} 
```

要解决关于使较小图像变大的第二个问题，您可以使用 jQuery。如果您事先知道照片方向并向这些图像应用不同的 css 类，CSS 就可以工作……但这会起作用，然后您就不再需要 CSS 最大宽度的东西了。

```
<div class="container"><img src="images/DSC_0470.JPG" alt="Rad Image" /></div>

<script>
    $(document).ready(
        function () {
            $('.container img').each(
            function () {
                var theWidth = $(this).width();
                var theHeight = $(this).height();
                if (theWidth < theHeight) {
                    $(this).height(150);
                }
                else {
                    $(this).width(150);
                }

            });
        });</script> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-11T17:54:27.193

您应该能够使用`max-width`and`max-height`属性，如下所示：

```
img {
    max-width: 150px;
    max-height: 150px;
} 
```

这应该将其约束到该框而不拉伸它。

如果要确保每个图像都出现在大小为 的方形框中`150px`，则`150px`可以将每个图像包含在容器 div 中，并强制它们完全是该大小：

```
<div class="container">
  <img>
</div> 
```

使用以下 CSS：

```
img {
    max-width: 150px;
    max-height: 150px;
}
.container {
    width: 150px;
    height: 150px;
} 
```

* * *

## 回答 #3

> 赞同：-4
> 
> 时间：2012-11-11T17:51:03.017

试试这个格式...

```
<img src="image.jpg" style="border:none;position:absolute; top:20px; left:50px; width:100px; height:200px;"> 
```

# mysql - 如何使用语句 update from 更新 mysql 表？

> ID：13333700
> 
> 赞同：1
> 
> 时间：2012-11-11T17:44:41.537
> 
> 标签：mysql, join, sql-update, mysql-workbench

我需要使用来自课程表的适当费用更新注册表，以便所有参加名为“课程名称”的课程的客户

```
update from enrollment as e
    join course as c on c.coursenumber = e.coursenumber
    join customer as cs on cs.customernumber = e.customernumber 
set e.amountpaid = course.fee
where e.coursenumber in (select coursenumber from course where course = 'COURSE   NAME'); 
```

这在 mysql 中可能吗？一般来说，我是这个 DBMS 和 sql 的新手。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T17:46:07.587

只需删除`FROM`关键字。

```
update enrollment as e
    join course as c on c.coursenumber = e.coursenumber
    join customer as cs on cs.customernumber = e.customernumber 
set e.amountpaid = course.fee
where e.coursenumber in (select coursenumber from course where course = 'COURSE   NAME'); 
```

或者直接不做`IN`

```
update enrollment as e
    join course as c on c.coursenumber = e.coursenumber
    join customer as cs on cs.customernumber = e.customernumber 
set e.amountpaid = course.fee
where  c.course = 'COURSE   NAME'; 
```

# python - pySVN - 获取给定 url 的标签列表

> ID：13333706
> 
> 赞同：1
> 
> 时间：2012-11-11T17:45:28.203
> 
> 标签：python, svn, tags, pysvn

与主题一样，为给定的 SVN 存储库 URL 获取标签列表（或简单的子目录）的推荐方法是什么？

我正在使用 pySVN 来处理存储库。

例如，如果有如下的树结构：

```
trunk/
branch/
tags/
    tag1/
    tag2/
    tag3/ 
```

我怎样才能得到类似的东西：

```
['tag1', 'tag2', 'tag3'] 
```

?

任何帮助，将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T15:45:16.087

我有以下代码的解决方案：

```
from pysvn import Client
import urlparse, posixpath

tagsUrl="svn://MyRepoUrl/tags"
tag_list=[posixpath.basename(urlparse.urlparse(elem[0].get('path'))[2]) for elem in Client().list(tagsUrl)[1:]] 
```

# iis - Localtest.me 在我的机器上不起作用

> ID：13333707
> 
> 赞同：2
> 
> 时间：2012-11-11T17:45:29.727
> 
> 标签：iis, dns, iis-express

我刚刚尝试使用此处解释的设施进行一些本地测试：

[http://readme.localtest.me](http://readme.localtest.me)

带有 *.localtest.me 的任何内容都将解析为本地环回，但这在我的机器上不起作用。

如果我 ping localtest.me 它不能解决。所以我的问题是我在这里错过了一些重要的东西吗？

# asp.net-mvc - 如何注入 Azure 辅助角色？

> ID：13333709
> 
> 赞同：4
> 
> 时间：2012-11-11T17:45:50.943
> 
> 标签：asp.net-mvc, azure, dependency-injection, ninject, azure-worker-roles

我有一个需要存储库的 Azure 辅助角色。我通常使用 Ninject 将这些东西注入到我创建的对象的构造函数中，这对于 MVC3/4 效果很好（我将它与 Ninject.MVC 一起使用）。

但是，它不适用于 Azure 辅助角色。我需要一个无参数的构造函数来启动角色，所以构造函数注入不是一个选项。我尝试使用`DependencyResolver.Current.GetService`来获取我的存储库（从构造函数、`OnStart()`方法和`Run()`方法），但它`null`每次都返回。我认为这是因为`Application_Start()`来自 MVC 的尚未运行？我不知道。

任何人都可以通过解释我如何做到这一点来帮助我吗？任何人？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T22:35:07.047

如果您使用此问题中提供的答案[无法使用 Spring.NET 向 Azure WorkerRole 对象注入依赖项，](https://stackoverflow.com/q/10671744/637425)您可以解决一些问题，然后使用 Ninject 而不是 Spring.NET

# c - 在 C 中排序：交换指针会导致意想不到的结果

> ID：13333710
> 
> 赞同：7
> 
> 时间：2012-11-11T17:45:54.750
> 
> 标签：c, pointers, swap

在程序开始时，我为一个字符指针数组分配内存：

`char **buffer = calloc( 20, sizeof(char *) );`

然后用户最多可以输入 20 个单词：

```
buffer[i] = calloc( 40, sizeof(char) );
fgets( buffer[i], 40, stdin )` 
```

之后我想对这个数组进行排序。如果我按如下方式使用我的交换功能，它会按预期工作：

```
void swap(char *args1, char *args2) {
    char tmp[40];
    strcpy( tmp, args1 );
    strcpy( args1, args2 );
    strcpy( args2, tmp );
}

void sort( char **args, int count ) {
    ...
    swap( args[i], args[j] );
    ...
} 
```

经过思考后，我注意到这是对 CPU 的浪费，因为我所要做的实际上是将指针重定向到相应的字符串。所以我重写了我的交换函数：

```
void swap(char **args1, char **args2) {
    char *tmp = *args1;
    *args1 = *args2;
    *args2 = tmp;
}

void sort( char **args, int count ) {
    ...
    swap( &args[i], &args[j] );
    ...
} 
```

但是，这根本行不通，结果非常出乎意料，我不知道为什么（我尝试了几次 printf 调用等等）......我的理解是指针只是被重定向并因此交换，假设内存看起来像这样：

```
(begin of char**):
100: *160
108: *200
116: *240
124: *280
...
(begin of char*):
160: Hello!\0
200: World!\0
... 
```

我的想法是更改指针而不是数组以减少 CPU 工作量（这里：将 100 中的指针与 108 中的指针交换）：

```
(begin of char**):
100: *200
108: *160
116: *240
124: *280
...
(begin of char*):
160: Hello!\0
200: World!\0
... 
```

我试图尽可能彻底地解释这一点，如果解释太多，我很抱歉。如果有人能让我深入了解这一点并提供帮助，我将非常高兴！

完整的代码（带有工作的 strcpy）可以在这里找到：http: [//pastie.org/5361481](http://pastie.org/5361481)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-11T17:56:10.353

您的排序函数最终应该如下所示：

```
void sort(char ** args, const int start, const int end) {
        char **pivot = &args[end];
        int i = start-1, j = start;
        while( j < end ) {
                int cmp = strcmp( *pivot, args[j] );
                if( cmp > 0 )
                        swap( &args[++i], &args[j] );
                j++;
        }
        swap( &args[++i], pivot );
        if( start + 1 < i )
                sort( args, start, i - 1 );
        if( end - 1 > i )
                sort( args, i + 1, end );
} 
```

我怀疑您没有将枢轴设为 a `char**`，而是将其保留为 a `char*`。如果你这样做，那么每当你进行交换时，你实际上并没有交换数组中的两个元素，而是用一个局部变量交换数组的一个元素。枢轴变量最终指向不同的字符串，而不是最后一个数组成员指向不同的字符串。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-11T18:05:43.753

```
 char *pivot = args[end];
...
    swap( &args[++i], &pivot ); 
```

这是你的问题。您不想将指针与局部变量交换，而是与数组中的实际枢轴元素（即`args+end`）交换。[这里的工作示例](http://ideone.com/fzHvc5)

# c# - Linq to XML 将元素添加到特定的子树

> ID：13333712
> 
> 赞同：12
> 
> 时间：2012-11-11T17:46:03.080
> 
> 标签：c#, xml, linq

我的 XML：

```
<Bank>
 <Customer id="0">
  <Accounts>
   <Account id="0" />
   <Account id="1" />                      
  </Accounts>
 </Customer>
 <Customer id="1">
  <Accounts>
   <Account id="0" />                    
   </Accounts>
 </Customer>
 <Customer id="2">
  <Accounts>
   <Account id="0" />                    
  </Accounts>
 </Customer>
</Bank> 
```

我想添加新的 Account 元素，让我们说 ID 为 2 的客户。我知道如何添加我不知道如何指定客户的行（我在哪里写客户的 ID？）

我的 LINQ to XML 代码：

```
XDocument document = XDocument.Load("database.xml");
document.Element("Bank").Element("Customer").Element("Accounts").Add
     (
         new XElement
             (
                 "Account", new XAttribute("id", "variable")
             )
      );
document.Save("database.xml"); 
```

谢谢您的帮助。XML 不是我的好朋友 :(

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-11-11T17:54:05.917

您快到了，您的代码将默认将元素添加到第一个`Customer`. `id`您需要在值为 2 的客户集合中搜索属性-

```
document.Element("Bank").Elements("Customer")
        .First(c => (int)c.Attribute("id") == 2).Element("Accounts").Add
                 (
                     new XElement
                         (
                             "Account", new XAttribute("id", "variable")
                         )
                  ); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-11T17:50:03.430

> 我知道如何添加我不知道如何指定客户的行（我在哪里写客户的 ID？）

您需要先找到`Customer`具有正确 ID 的元素。例如：

```
var customer = document.Root
                       .Elements("Customer")
                       .Single(x => (int) x.Attribute("id") == id);
customer.Element("Accounts").Add(new XElement("Account",
                                              new XAttribute("id", "variable"))); 
```

请注意，`Single`如果没有一个`Customer`元素具有正确的 ID，这将在调用中失败。如果你想创建一个*新*客户，你需要做更多的工作——但大概这将是一个不同的电话。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-11T17:52:31.810

```
var cust = xDoc.Descendants("Customer")
               .First(c => c.Attribute("id").Value == "2");
cust.Element("Accounts").Add(new XElement("Account", new XAttribute("id","3") )); 
```

# c# - 下载多个文件

> ID：13333714
> 
> 赞同：0
> 
> 时间：2012-11-11T17:46:07.437
> 
> 标签：c#, download, backgroundworker

首先，对不起我的英语:(。

嗨，我有这段代码可以一次下载多个文件，但是当我下载小文件时，它非常有问题。如果我说下载一个 80 KB 的文件，那么我显示进度的标签就是间隔 :(。

这是我现在拥有的代码：

```
bgwrkSplash.ReportProgress(44, 44444444444444);
ChangeText(lblStatus, "Downloading files to temp directory...", Color.Black);
DownloadFile();
resetEvent.WaitOne();

#region Download Handler

    private void DownloadFile()
    {
        if (_downloadUrls.Any())
        {
            _intCurrentProgressValue = prgSplashStatus.Value;
            _client.DownloadProgressChanged += client_DownloadProgressChanged;
            _client.DownloadFileCompleted += client_DownloadFileCompleted;

            var url = _downloadUrls.Dequeue();
            var uri = new Uri(url);
            _strFileName = Path.GetFileName(uri.LocalPath);

            _client.DownloadFileAsync(new Uri(url), _strTempLocation + _strFileName);
        }
    }

    private void client_DownloadProgressChanged(object sender, DownloadProgressChangedEventArgs e)
    {
        try
        {
            _byteCountFormatter.Add(new ByteCountFormatter {DataSize = e.BytesReceived, Time = DateTime.Now});
            _byteCountFormatter = _byteCountFormatter.Skip(Math.Min(0, _byteCountFormatter.Count - 6)).ToList();

            var speed = (_byteCountFormatter.Last().DataSize - _byteCountFormatter.First().DataSize)/
                        (_byteCountFormatter.Last().Time - _byteCountFormatter.First().Time).TotalSeconds;

            var timeRemaining = TimeSpan.FromSeconds((e.TotalBytesToReceive - e.BytesReceived)/speed);

            ChangeText(lblStatus, string.Format(
                "Downloading {0} - {1} - {2} of {3} ({4})",
                _strFileName,
                ByteCountFormatter.FormatTime(timeRemaining),
                ByteCountFormatter.FormatDataSize(e.BytesReceived),
                ByteCountFormatter.FormatDataSize(e.TotalBytesToReceive),
                ByteCountFormatter.FormatDataSpeed(speed)), Color.Black);
            ChangeProgress(prgSplashStatus, e.ProgressPercentage);
        }
        catch (Exception exception)
        {
            Console.WriteLine(exception);
        }
    }

    private void client_DownloadFileCompleted(object sender, AsyncCompletedEventArgs e)
    {
        try
        {
            try
            {
                if (e.Error != null)
                {

                    throw e.Error;
                }
                if (e.Cancelled)
                {

                }
                DownloadFile();
            }
            catch (Exception exception)
            {
                Console.WriteLine(exception);
            }

            if (!_client.IsBusy)
            {
                ChangeProgress(prgSplashStatus, _intCurrentProgressValue);
                resetEvent.Set();
            }
        }
        catch (Exception exception)
        {
            Console.WriteLine(exception);
        }
    }

    #endregion 
```

![1](../Images/be47f80aeeb229ad6107cfdc0f468246.png) ![2](../Images/3bc616daeac070a30addc1d10fd185f6.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T23:20:48.183

我已经删除了剩余时间部分，现在一切顺利，谢谢大家！

# jquery - 创建保持纵横比的响应式照片网格？

> ID：13333715
> 
> 赞同：2
> 
> 时间：2012-11-11T17:46:11.273
> 
> 标签：jquery, html, css

我有一组与砌体一起排列的图像。我希望图像能够调整大小，但我希望它们保持相同的顺序。基本上，我希望整个网格保持相同的纵横比。我尝试了流畅的 Masonry 布局选项，它使图像到处跳跃。如果我将容器 div 设置为保持纵横比，则图像会在浏览器调整大小时跳到容器下方。有没有办法用 CSS 做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T18:09:43.070

为了保持纵横比，你可以使用这个 jQuery 函数：

```
jQuery.fn.fitToParent = function()
{
    this.each(function()
    {
        var width  = $(this).width();
        var height = $(this).height();
        var parentWidth  = $(this).parent().width();
        var parentHeight = $(this).parent().height();

        if(width/parentWidth < height/parentHeight)
        {
            newWidth  = parentWidth;
            newHeight = newWidth/width*height;
        }
        else
        {
            newHeight = parentHeight;
            newWidth  = newHeight/height*width;
        }
        margin_top  = (parentHeight - newHeight) / 2;
        margin_left = (parentWidth  - newWidth ) / 2;

        $(this).css({'margin-top' :margin_top  + 'px',
                     'margin-left':margin_left + 'px',
                     'height'     :newHeight   + 'px',
                     'width'      :newWidth    + 'px'});
    });
}; 
```

# dll - ActiveX 组件无法创建对象：'jsShell.Ops' - 但通过编辑器工作

> ID：13333717
> 
> 赞同：1
> 
> 时间：2012-11-11T17:46:20.147
> 
> 标签：dll, vbscript, activex

我有以下问题。我想在我的项目中使用 jsShell.dll（[链接到 dll 和描述）。](http://www.jsware.net/jsware/scripts.php5#jsshl)我用的是Win7 64位。

1.  我下载了 dll 并将其放在 C:\Windows\system\jsshell 中（文件 jsShell.dll 和 khook.dll）
2.  我使用 c:\Windows\SysWOW64> regsvr32.exe c:\Windows\system\jsshell\jsShell.dll 成功注册了 dll（不需要注册 khook.dll）
3.  然后我尝试通过以下方式运行测试文件 jsshell\jsShell DLL\demo scripts\window.vbs，它是 jsShell.zip 的一部分：

    a) 双击 window.vbs 并出现以下错误：

    **脚本：C:\Users\joe\Downloads\jsshell\jsShell DLL\demoscripts\windows.vbs**

    **线路：6**

    **字符：3**

    **错误：ActiveX 组件无法创建对象：'jsShell.Ops'**

    **代码：800A01AD**

    **来源：Microsoft VBScript 运行时错误**

    这是有错误的行：`Set jsS = CreateObject("jsShell.Ops")`

    b) 在 WEB-ED 编辑器中加载（[链接到 WEB-EDD](http://www.jsware.net/jsware/webed.php5)）并通过编辑器运行脚本，效果很好。

有人可以解释一下，（a）和（b）之间的区别在哪里？为了使用（a）变体运行我的脚本，必须做什么？

多谢

# scala - 测试：FakeApplication 忽略附加配置

> ID：13333718
> 
> 赞同：0
> 
> 时间：2012-11-11T17:46:33.547
> 
> 标签：scala, playframework, playframework-2.0, specs2

我正在尝试在 Play 2.0 w/Scala 项目上添加测试：

```
"Application" should {

    "return 404 on the index Action if web is disabled " in {
      running(FakeApplication(additionalConfiguration = Map(("enable.webInterface" -> "false")) )) {

        Config.IS_WEB_ENABLED must beFalse

        val result = controllers.Application.index()(FakeRequest())

        status(result) must equalTo(NOT_FOUND)
        contentType(result) must beSome("text/html")
        charset(result) must beSome("utf-8")
      }
    }
} 
```

该值`Config.IS_WEB_ENABLED`定义为：

```
object Config {

  lazy val IS_WEB_ENABLED = Play.configuration.getBoolean("enable.webInterface").getOrElse(false)

} 
```

正如您所看到的测试，我尝试将配置设置覆盖为`enable.webInterface`false，因为`application.conf`文件默认设置为 true。但是 FakeApplication 没有获得新的配置值。

知道我在那里缺少什么吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-11T19:43:40.293

使用`def`代替`lazy val`，也许您之前使用过 Config.IS_WEB_ENABLED 并且它被初始化为 true 并且只返回相同的结果，因为它是一个 val。

```
object Config {

  def IS_WEB_ENABLED = Play.configuration.getBoolean("enable.webInterface").getOrElse(false)

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-12T13:25:22.197

我怀疑这`Play.configuration`没有考虑到假申请。

所以试试这个（使用`current`）：

```
object Config {

  lazy val IS_WEB_ENABLED = Play.current.configuration.getBoolean("enable.webInterface").getOrElse(false)

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-12T21:16:57.577

传入`Map`的`FakeApplication`是 a`Map[String, String]`并且您正在从配置中请求一个布尔值。我怀疑该值没有被拾取，因为它没有正确的类型。如果你尝试会发生什么

```
Play.configuration.getString("enable.webInterface") 
```

反而 ？

# ssl-certificate - keytool 无法导入证书 - 无法从回复建立链

> ID：13333722
> 
> 赞同：12
> 
> 时间：2012-11-11T17:47:18.883
> 
> 标签：ssl-certificate, keytool, digital-certificate

如果有人能对以下问题有所了解，我将不胜感激。我已阅读 keytool 文档，但找不到任何关于此处可能存在问题的提示。

我创建了一个密钥库

> keytool -genkey -alias privateKeyName -keyalg RSA -keystore privateKeyName.jks -validity 720 -keysize 1024

我创建了一个证书请求

> keytool -certreq -alias privateKeyName -keystore privateKeyName.jks -file certReqFileName.csr

在签名机构给我 .cer 文件后，我尝试使用

> keytool –import -alias privateKeyName -file certReqFileName_t_f.cer -keystore privateKeyName.jks

导入失败

> keytool 错误：java.lang.Exception：无法从回复建立链

我已经坚持了一段时间了，所以任何帮助都会很棒。谢谢。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-11-24T11:37:48.343

如果您的 CA 列在信任库中，请查看选项*-trustcacerts 。*此外，您可能必须首先将 CA 的中间证书添加到您的密钥库中。

# parallel-processing - 尴尬的平行例子

> ID：13333731
> 
> 赞同：0
> 
> 时间：2012-11-11T17:48:11.680
> 
> 标签：parallel-processing

我对并行编程的世界完全陌生。我打算知道如果有一个java程序叫Task A，它包含10个子任务T1...T10，其中T1从表A1读取数据，T2从表A2...T10从表A10，使用相同的键说employee_id，这个问题被称为令人尴尬的并行吗？我正在考虑使用 10 个线程来完成每个子任务。

# algorithm - 在另一个序列中找到一个序列

> ID：13333733
> 
> 赞同：-5
> 
> 时间：2012-11-11T17:48:26.210
> 
> 标签：algorithm, vector

我想编写一个算法来搜索另一个排序序列中的序列

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T20:13:18.163

*只有当这些数字在a*和*b*中以相反的顺序出现时，与两个数字相关联的一对线才能交叉。由于您声明第一个列表 - *a* *-已排序（按升序），因此如果我们在**b*中选择按降序排列的数字，我们只会有交叉线。

您在评论中声明要选择满足条件的*最大*元素数。（我有点困惑，在你的例子中，你选择了“5 7”，但你也指出了更长的序列也符合标准。我假设你实际上需要一个最长的序列，比如如“3 4 7”。）所以你需要找到*b*的最大增加子序列。这是一个经过充分研究的问题：[http ://en.wikipedia.org/wiki/Longest_increasing_subsequence#Efficient_algorithms](http://en.wikipedia.org/wiki/Longest_increasing_subsequence#Efficient_algorithms)

# numpy - 使用 Python / iPython 的网络绘图错误

> ID：13333738
> 
> 赞同：2
> 
> 时间：2012-11-11T17:49:16.300
> 
> 标签：numpy, matplotlib, ipython, networkx

当我尝试在 IPython 笔记本中的 OSX 10.8.2 上使用 networkx 时，出现以下启动代码错误（AttributeError：非连续数组的形状不兼容）。

```
import networkx as nx
g = nx.Graph()
g.add_node(1)
g.add_node(2)
g.add_edge(1,2) # no error if this line is omitted
nx.draw(g) 
```

如果我不将边添加到该图中，我看不到错误。Matplotlib、Numpy 和 Scipy 都按照[此处](http://www.thisisthegreenroom.com/2011/installing-python-numpy-scipy-matplotlib-and-ipython-on-lion/)的建议安装。

以下是错误消息：

* * *

```
AttributeError                            Traceback (most recent call last)

<ipython-input-33-df7dfeff6452> in <module>()
----> 1 nx.draw(g)

/usr/local/lib/python2.7/site-packages/networkx/drawing/nx_pylab.pyc in draw(G, pos, ax, hold, **kwds)
    131         pylab.hold(h)
    132     try:
--> 133         draw_networkx(G,pos=pos,ax=ax,**kwds)
    134         ax.set_axis_off()
    135         pylab.draw_if_interactive()

/usr/local/lib/python2.7/site-packages/networkx/drawing/nx_pylab.pyc in draw_networkx(G, pos, with_labels, **kwds)
    265 
    266     node_collection=draw_networkx_nodes(G, pos, **kwds)
--> 267     edge_collection=draw_networkx_edges(G, pos, **kwds)
    268     if with_labels:
    269         draw_networkx_labels(G, pos, **kwds)

/usr/local/lib/python2.7/site-packages/networkx/drawing/nx_pylab.pyc in draw_networkx_edges(G, pos, edgelist, width, edge_color, style, alpha, edge_cmap, edge_vmin, edge_vmax, ax, arrows, label, **kwds)
    544     edge_collection.set_zorder(1) # edges go behind nodes
    545     edge_collection.set_label(label)
--> 546     ax.add_collection(edge_collection)
    547 
    548     # Note: there was a bug in mpl regarding the handling of alpha values for

/usr/local/lib/python2.7/site-packages/matplotlib/axes.pyc in add_collection(self, collection, autolim)
   1443         if autolim:
   1444             if collection._paths and len(collection._paths):
-> 1445                 self.update_datalim(collection.get_datalim(self.transData))
   1446 
   1447         collection._remove_method = lambda h: self.collections.remove(h)

/usr/local/lib/python2.7/site-packages/matplotlib/collections.pyc in get_datalim(self, transData)
    165             offsets = offsets.filled(np.nan)
    166             # get_path_collection_extents handles nan but not masked arrays
--> 167         offsets.shape = (-1, 2)                     # Make it Nx2
    168 
    169         result = mpath.get_path_collection_extents(

AttributeError: incompatible shape for a non-contiguous array

---------------------------------------------------------------------------
AttributeError                            Traceback (most recent call last)
/usr/local/lib/python2.7/site-packages/IPython/zmq/pylab/backend_inline.pyc in show(close)
    100     try:
    101         for figure_manager in Gcf.get_all_fig_managers():
--> 102             send_figure(figure_manager.canvas.figure)
    103     finally:
    104         show._to_draw = []

/usr/local/lib/python2.7/site-packages/IPython/zmq/pylab/backend_inline.pyc in send_figure(fig)
    209     """
    210     fmt = InlineBackend.instance().figure_format
--> 211     data = print_figure(fig, fmt)
    212     # print_figure will return None if there's nothing to draw:
    213     if data is None:

/usr/local/lib/python2.7/site-packages/IPython/core/pylabtools.pyc in print_figure(fig, fmt)
    102     try:
    103         bytes_io = BytesIO()
--> 104         fig.canvas.print_figure(bytes_io, format=fmt, bbox_inches='tight')
    105         data = bytes_io.getvalue()
    106     finally:

/usr/local/lib/python2.7/site-packages/matplotlib/backend_bases.pyc in print_figure(self, filename, dpi, facecolor, edgecolor, orientation, format, **kwargs)
   1981                     orientation=orientation,
   1982                     dryrun=True,
-> 1983                     **kwargs)
   1984                 renderer = self.figure._cachedRenderer
   1985                 bbox_inches = self.figure.get_tightbbox(renderer)

/usr/local/lib/python2.7/site-packages/matplotlib/backends/backend_agg.pyc in print_png(self, filename_or_obj, *args, **kwargs)
    467 
    468     def print_png(self, filename_or_obj, *args, **kwargs):
--> 469         FigureCanvasAgg.draw(self)
    470         renderer = self.get_renderer()
    471         original_dpi = renderer.dpi

/usr/local/lib/python2.7/site-packages/matplotlib/backends/backend_agg.pyc in draw(self)
    419 
    420         try:
--> 421             self.figure.draw(self.renderer)
    422         finally:
    423             RendererAgg.lock.release()

/usr/local/lib/python2.7/site-packages/matplotlib/artist.pyc in draw_wrapper(artist, renderer, *args, **kwargs)
     53     def draw_wrapper(artist, renderer, *args, **kwargs):
     54         before(artist, renderer)
---> 55         draw(artist, renderer, *args, **kwargs)
     56         after(artist, renderer)
     57 

/usr/local/lib/python2.7/site-packages/matplotlib/figure.pyc in draw(self, renderer)
    896         dsu.sort(key=itemgetter(0))
    897         for zorder, a, func, args in dsu:
--> 898             func(*args)
    899 
    900         renderer.close_group('figure')

/usr/local/lib/python2.7/site-packages/matplotlib/artist.pyc in draw_wrapper(artist, renderer, *args, **kwargs)
     53     def draw_wrapper(artist, renderer, *args, **kwargs):
     54         before(artist, renderer)
---> 55         draw(artist, renderer, *args, **kwargs)
     56         after(artist, renderer)
     57 

/usr/local/lib/python2.7/site-packages/matplotlib/axes.pyc in draw(self, renderer, inframe)
   1995 
   1996         for zorder, a in dsu:
-> 1997             a.draw(renderer)
   1998 
   1999         renderer.close_group('axes')

/usr/local/lib/python2.7/site-packages/matplotlib/artist.pyc in draw_wrapper(artist, renderer, *args, **kwargs)
     53     def draw_wrapper(artist, renderer, *args, **kwargs):
     54         before(artist, renderer)
---> 55         draw(artist, renderer, *args, **kwargs)
     56         after(artist, renderer)
     57 

/usr/local/lib/python2.7/site-packages/matplotlib/collections.pyc in draw(self, renderer)
    227         self.update_scalarmappable()
    228 
--> 229         transform, transOffset, offsets, paths = self._prepare_points()
    230 
    231         gc = renderer.new_gc()

/usr/local/lib/python2.7/site-packages/matplotlib/collections.pyc in _prepare_points(self)
    203 
    204         offsets = np.asanyarray(offsets, np.float_)
--> 205         offsets.shape = (-1, 2)             # Make it Nx2
    206 
    207         if not transform.is_affine:

AttributeError: incompatible shape for a non-contiguous array 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T19:27:00.667

这在前面[使用 Networkx 绘制带边的图形中](https://stackoverflow.com/questions/13113155/networkx-draw-graph-with-edges)有所报道。如上所述，它可能是 NumPy 库开发版本中的一个错误/功能（numpy 问题 2700）。

# haskell - cairo 为什么不翻译文本？

> ID：13333740
> 
> 赞同：2
> 
> 时间：2012-11-11T17:49:41.763
> 
> 标签：haskell, cairo

在下面的程序中，我使用`cairo-0.12.2`. 不幸的是，当我使用该`translate`函数移动用户空间原点时，矩形被翻译但文本没有。

```
import Graphics.Rendering.Cairo

main = withSVGSurface "test.svg" 600 600 
  (`renderWith` draw)

draw = do
  color white
  rectangle 0 0 600 600
  fill
  newPath
  color black
  translate 300 300
  drawSortBox
  translate 200 200
  drawSortBox
  stroke

drawSortBox = do
  showText "V  Ʌ"
  a <- textExtents "V  Ʌ"
  rectangle (textExtentsXbearing a - 2) (textExtentsYbearing a - 2) (textExtentsWidth a / 2 + 2) (textExtentsHeight a + 4)
  rectangle (textExtentsXbearing a - 2) (textExtentsYbearing a - 2) (textExtentsWidth a + 4) (textExtentsHeight a + 4)

color (a,b,c) = setSourceRGB a b c

white = (255,255,255)
black =(0,0,0) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-11T19:22:35.867

根据文档，`showText`从当前位置开始绘制其文本。`translate`移动原点，但不移动当前位置。您必须使用`moveTo`而不是`translate`选择文本的位置。（第`translate`一次调用发生的事实与`newPath`删除当前位置的事实有关。）

# ruby-on-rails - 奇怪的 has_many ：通过新的记录表问题

> ID：13333751
> 
> 赞同：2
> 
> 时间：2012-11-11T17:50:36.300
> 
> 标签：ruby-on-rails, ruby-on-rails-4

我的 has_many :through 关系有一个带有复选框的常规 for。我的问题是我无法创建新项目并选中复选框。我收到验证错误“用户无效”。这真的很奇怪。

如果我创建一个没有用户检查的项目，它可以工作，我可以在编辑项目时检查它们。

```
- User.each do |user|
  %label.checkbox{title: user.email}
    = check_box_tag 'project[user_ids][]', user.id, @project.user_ids.include?(user.id)
    = truncate(user.full_name, length: 16) 
```

简而言之：我可以编辑项目但不能创建新项目。有任何想法吗？

编辑：我有三个模型，用户、项目、项目，其中最新的是其他模型之间的关系。当我试图创建一个项目并将用户关系传递给它时，我的问题就出现了。编辑时，一切都像魅力一样。

```
User
  id
  email

  has_many :projectships, dependent: :destroy
  has_many :projects,     through: :projectships

Project
  id
  name

  has_many :projectships, dependent: :destroy
  has_many :users, through: :projectships

Projectship
  id
  user_id
  project_id

  belongs_to :project
  belongs_to :user

  validates :project_id, presence: true
  validates :user_id,    presence: true 
```

项目控制器：

```
# GET /projects/new
def new
  @project = Project.new
end

# POST /projects
def create
  @project = Project.new(project_params)
  if @project.save
    redirect_to @project, notice: t('flash.project_created')
  else
    render :new
  end
end

  # GET /projects/:id/edit
def edit
  @project = Project.includes(:users).find(params[:id])
end

# PUT /projects/:id
def update
  @project = Project.find(params[:id])
  if @project.update_attributes(project_params)
    redirect_to :back, notice: t('flash.project_updated')
  else
    render :edit
  end
end

private

def project_params
  params.require(:project).permit(
    :client_id, :currency, :description, :end_date, :estimated_hours,
    :fixed_price, :hourly_rate, :name, :start_date, :status,
    :billable_type, :user_ids
  )
end 
```

PS 我使用的是 4.0.0.beta DS

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-21T14:42:29.777

要存储`users_ids`模型需要保存，这就是它不起作用的方式。所以现在我将 ID 存储在创建操作中，而不是在保存项目后直接添加它们。

# javascript - 相当于 sed 的 javascript

> ID：13333756
> 
> 赞同：3
> 
> 时间：2012-11-11T17:50:50.410
> 
> 标签：javascript, regex

我想修剪字符串，例如。

> 铅笔（4,99 美元）

只是一个括号数值：

> 4,99

我现在有点关于 sed 中的正则表达式，所以我会这样做`sed "s#.*(##" | sed "s# USD.*##"`：`replace`但是我应该如何在javascript函数中使用任何正则表达式？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-11T17:53:53.043

此处无需更换。使用该`match`功能可能更容易，更合适：

```
var priceStr;
var match = "Pencil (4,99 USD)".match(/[\d,]+/)
if(match)
    priceStr = match[0]; 
```

您可以稍微改进一下正则表达式。这个只会给你第一个由数字和/或逗号组成的子字符串。但是，如果您的字符串总是这么短并且采用这种格式，那应该没问题。但是，如果名称可以包含数字或逗号，您可能应该以括号开头并使用捕获组：

```
var priceStr;
var match = "Pencil, black, thickness 2 (4,99 USD)".match(/\(([\d,]+)/)
if(match)
    priceStr = match[1]; 
```

后一个正则表达式的简短解释。`\(`只是一个字面的左括号。未转义的括号“捕获”内部匹配的内容，以便您以后可以在没有文字左括号的情况下检索价格。`[\d,]`是一个字符类，它匹配一个数字或一个逗号，并`+`简单地重复 1 次或多次。然后我们可以从 中检索完整匹配`match[0]`和（第一个）捕获组`match[1]`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-11T18:09:45.967

我建议你这样做：

```
str.replace(/[^\d\.\,]/, "") 
```

这意味着摆脱所有不是数字、逗号或点的东西。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-11T18:03:27.587

几种可能性之一是：

```
var match = "Pencil (4,99 USD)".match(/[^(]+(?= USD)/); 
```

# matlab - 如何在matlab中测量Wimax的延迟和抖动

> ID：13333764
> 
> 赞同：2
> 
> 时间：2012-11-11T17:51:39.910
> 
> 标签：matlab, voip, skype, latency, wimax

我正在使用 USB 加密狗 Wimax，并且正在使用 Skype 作为 VOIP 应用程序。当我使用 Matlab 使用 Skype 时，我需要测量延迟和抖动。请对此提供任何帮助。

# java - 为什么不使用静态变量为子类共享对象？

> ID：13333766
> 
> 赞同：0
> 
> 时间：2012-11-11T17:51:45.623
> 
> 标签：java, oop, design-patterns

我的问题有点长。我正在学习**抽象工厂模式**。

我有一个抽象工厂的抽象类。我想分享混凝土工厂所需的“资源”。所以我只是将 AbstractFactory 中的变量设为静态

```
public class AbstractFactory{
    private static Vector vector = new Vector();

    protected Vector void getVector() {
        return vector;
    }

    protected void setVector(Vector v){
        this.vector = v;
    }

    public abstract Circle createCircle();
} 
```

它的子类看起来像：

```
public class ConcreteFactory extends AbstractFactory{
    public ConcreteFactory(){
        super();
    }

    public Circle createCircle(){
        Circle circle = new Circle();
        getVector().add(circle);
        return circle;
    }
} 
```

**但是，我的老师说我不应该使用静态对象实例，因为静态变量经常用于一些常量。**

因此，我对***Vector*****使用实例变量 instance**而不是**静态变量** ，并且在实例化具体工厂时从外部传递向量。

 *所以我的课程的新设计将如下所示：

```
public class AbstractFactory{
    private Vector vector;

    protected Vector void getVector() {
        return vector;
    }

    protected void setVector(Vector v){
        this.vector = v;
    }

    public abstract Circle createCircle();
}

public class ConcreteFactory extends AbstractFactory{
    public ConcreteFactory(Vector v){
        super();
        setVector(v);
    }

    public Circle createCircle(){
        Circle circle = new Circle();
        getVector().add(circle);
        return circle;
    }
} 
```

**

## 我的问题是：为什么我不应该使用静态变量来共享对象？

**

当我创建具体工厂的实例时，在不传入 Vector 的情况下，在具体工厂之间共享资源会更容易。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-11T18:05:24.180

有时，今天让你的生活更轻松的东西会让你的生活变得更加困难。

一些例子： 你并不总是知道你的类将被使用的环境。也许你的工厂的不同实例最终会被不同的类加载器加载（这在 Web 应用程序中经常发生）。以这种方式使用静态实例变量可能会导致完全不可预测的行为。静态变量几乎总是一个坏主意。

也就是说，我认为你在课堂上真正想做的是：

```
public class AbstractFactory{
    private final Vector vector;

    protected AbstractFactory(Vector vector){
        this.vector = vector;
    }

    protected Vector void getVector() {
        return vector;
    }

    public abstract Circle createCircle();
} 
```

和

```
public class ConcreteFactory extends AbstractFactory{
    // USE THIS IF YOU NEED TO SHARE THE VECTOR AMONGST MULTIPLE FACTORY INSTANCES
    public ConcreteFactory(Vector vector){
        super(vector);
    }
    // OR USE THIS IF THE VECTOR IS SPECIFIC TO THE FACTORY
    public ConcreteFactory(){
        super(new Vector());
    }    

    public Circle createCircle(){
        Circle circle = new Circle();
        getVector().add(circle);
        return circle;
    }
} 
```

在实例变量上使用 final 对于这类事情是一个好主意 - 它可以防止您意外更改代码中其他地方的变量。但这是可选的。我所做的关键更改是将向量添加到抽象基类的构造函数中，然后从超类传入。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-11T18:04:34.543

`static`属性并不意味着以这种方式使用。
`static`s 是一些东西，在运行时只能使用一次。
在您的情况下，这意味着您的**所有**工厂`AbstractFactory`都将共享这个单一的向量。

看这个例子：

```
ConcreteFactory a = new ConcreteFactory();
ConcreteFactory b = new ConcreteFactory();
a.createCircle();
b.createCircle(); 
```

两个对象`a`和`b`现在将在向量中有两个条目，因为它们共享相同的静态向量。

我也认为，

```
protected void setVector(Vector v){
    this.vector = v;
} 
```

是非法的，因为`vector`不是工厂实例的属性，而是工厂本身的属性！

除此之外，它只是一种糟糕的、容易出错的（尝试在更大范围内调试）和简单丑陋的编码风格。

只要相信那里的老师-他是对的；）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-11T18:17:24.390

*静态最终*变量有时用作常量这一事实不应阻止您使用相同的机制，只要它服务最好（记录器是我能给出的唯一其他示例）。

不过，当没有*与外部世界的隐式组件耦合*时，这总是好的。如果将向量定义为静态变量，则用户无法使您的工厂基于上下文且彼此独立。如果你将向量作为工厂的参数，那么由工厂创建者（现在通常是 Spring 上下文加载器）来定义哪些工厂共享向量，哪些不共享。

在您的案例中将向量作为参数传递的另一个原因与单元测试方面有关。如果您的课程旨在从外部获取矢量，您可以模拟它并更彻底地测试您的课程。*

# c - 在 Visual Studio 中将文件用作命令行参数的位置

> ID：13333769
> 
> 赞同：1
> 
> 时间：2012-11-11T17:52:03.200
> 
> 标签：c, visual-studio, file, command-line

我正在使用 Visual Studio 在 C 中创建一个项目，我需要它来读取文件并对该文件中的文本进行分析。我必须将文件传递到命令行，但我不知道将这个文件放在哪里才能被读取。这是帮助解释这将如何工作的主要方法：

```
int main(int argc, char *argv[]){

FILE * cmdFile;
char * nxtCmd = (char *) malloc(sizeof(char) * STR_LEN);

//Ensure memory allocation for nxtCmd succeeds
if (nxtCmd == NULL){
    puts("Memory failed to allocate for nxtCmd.");
    exit(1);
}

// check if argc is 2
if(argc == MAX_ARGS){}
else{
    puts("Innapropriate number of arguments passed to the program.");
    exit(1);
}

// check that argv[1] can be opened
if ((cmdFile = fopen(argv[1], "r")) == NULL){
    puts("Can't open the command file.");
    exit(1);
}

else{
    puts("Command file has opened successfully.");
}

// if both above are true:
//    start reading from the cmdfile
while ((nxtCmd = nextLine(cmdFile)) != NULL){
    nxtCmd = nextLine(cmdFile);
    printf("next line: %s", nxtCmd);
}
} 
```

任何帮助或意见将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T17:57:19.637

任何地方都可以，只需将其传递给命令行上的程序：

```
myprog.exe \path\to\file.txt 
```

# asp.net - 在 AspNetSqlMembershipProvider 中生成密码重置令牌

> ID：13333771
> 
> 赞同：1
> 
> 时间：2012-11-11T17:52:20.757
> 
> 标签：asp.net, asp.net-membership, membership-provider, sqlmembershipprovider

在 ASP.NET Razor 附带的 SimpleMembershipProvider 中，可以调用 GeneratePasswordResetToken，然后将生成的令牌通过电子邮件发送到用户的电子邮件。然后，当用户单击 URL 时，它会将他们带到一个页面以重置密码。

AspNetSqlMembershipProvider 中的等效工作流是什么？是否可以生成可用于重置密码的令牌？

谢谢。

# scala - Scala 的 Stream 和 StackOverflowError

> ID：13333775
> 
> 赞同：6
> 
> 时间：2012-11-11T17:52:53.873
> 
> 标签：scala, stream, stack-overflow, lazy-evaluation

考虑这段代码（取自Martin Odersky[的“Scala 函数式编程原理”课程）：](https://www.coursera.org/course/progfun)

```
def sieve(s: Stream[Int]): Stream[Int] = {
  s.head #:: sieve(s.tail.filter(_ % s.head != 0))
}

val primes = sieve(Stream.from(2))
primes.take(1000).toList 
```

它工作得很好。请注意，这`sieve`实际上不是尾递归（或者是吗？），即使`Stream`' 的尾是惰性的。

但是这段代码：

```
def sieve(n: Int): Stream[Int] = {
  n #:: sieve(n + 1).filter(_ % n != 0)
}

val primes = sieve(2)
primes.take(1000).toList 
```

抛出`StackOverflowError`。

第二个例子有什么问题？我`filter`想把事情搞砸了，但我不明白为什么。它返回 a `Stream`，所以它不会使评估变得急切（我是对的吗？）

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-11T18:31:18.820

您可以使用一些跟踪代码突出显示问题：

```
var counter1, counter2 = 0

def sieve1(s: Stream[Int]): Stream[Int] = {
  counter1 += 1
  s.head #:: sieve1(s.tail.filter(_ % s.head != 0))
}

def sieve2(n: Int): Stream[Int] = {
  counter2 += 1
  n #:: sieve2(n + 1).filter(_ % n != 0)
}

sieve1(Stream.from(2)).take(100).toList
sieve2(2).take(100).toList 
```

我们可以运行它并检查计数器：

```
scala> counter1
res2: Int = 100

scala> counter2
res3: Int = 540 
```

所以在第一种情况下，调用堆栈的深度是素数的数量，而在第二种情况下，它是最大的素数本身（嗯，减一）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-11T18:29:47.597

这些都不是尾递归的。

使用[tailrec](http://www.scala-lang.org/api/current/scala/annotation/package.html)注释会告诉你一个函数是否是尾递归的。

将@tailrec 添加到上面的两个函数中可以得到：

```
import scala.annotation.tailrec

@tailrec
def sieve(s: Stream[Int]): Stream[Int] = {
  s.head #:: sieve(s.tail.filter(_ % s.head != 0))
}

@tailrec
def sieve(n: Int): Stream[Int] = {
  n #:: sieve(n + 1).filter(_ % n != 0)
} 
```

加载这表明两个定义都不是尾递归的：

```
<console>:10: error: could not optimize @tailrec annotated method sieve: it contains a recursive call not in tail position
         s.head #:: sieve(s.tail.filter(_ % s.head != 0))
                ^
<console>:10: error: could not optimize @tailrec annotated method sieve: it contains a recursive call not in tail position
         n #:: sieve(n + 1).filter(_ % n != 0) 
```

# java - java中的随机生成方法似乎不是随机的

> ID：13333779
> 
> 赞同：2
> 
> 时间：2012-11-11T17:53:10.117
> 
> 标签：java, random

> **可能重复： Java 中的**
> [真正随机生成](https://stackoverflow.com/questions/381037/true-random-generation-in-java)
> [当我设置种子时，Java 随机总是返回相同的数字？](https://stackoverflow.com/questions/5533191/java-random-always-returns-the-same-number-when-i-set-the-seed)

我在我的一个程序中运行这段代码。

```
public String[] gen_phase_zero() {
        Random generator = new Random();
        int r = generator.nextInt(2);
        if (r == 1) {
            String big = "A";
            String small = "a";
            return new String[] { big, small };
        } else {
            String big = "B";
            String small = "b";
            return new String[] { big, small };
        }
    } 
```

如果我运行几次，我的输出是这样的。

Aa Aa Aa Aa Bb Aa Aa Aa Bb

它并不总是按这个顺序。但它几乎从来没有接近 50/50

## 更新：

我不期待五十五十，但似乎如果先选择“Aa”，那么接下来会多选 3 次左右，但如果先选择 Bb，那么接下来也会选择 3 次。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-11T17:56:24.037

好吧，对我来说它看起来并不太糟糕。让我们创建一个更具统计意义的测试：

```
import java.util.Random;

public class Test {
    public static void main(String[] args) throws Exception {

        Random rng = new Random();
        int total = 0;
        for (int i = 0; i < 1000000; i++) {
            total += rng.nextInt(2);
        }
        System.out.println("Total: " + total);
    }
} 
```

5 次运行的示例输出：

```
Total: 501184
Total: 499740
Total: 500116
Total: 500374
Total: 500413 
```

在我看来并没有太大*的*偏见...

在循环内部调用时，我得到了相同的结果，`new Random()`而不是只调用一次——尽管这样做不是一个好主意。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-11T17:56:09.733

这样做 10000 次，它将接近 50:50。

然后掷硬币 9 次 - 结果可能类似于 random.nextInt() 给你的结果。

这里的关键是统计上显着的数据量。

顺便说一句，使用`random.nextBoolean()`

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-11-11T17:58:46.297

您需要在随机类中添加一个种子。通常它是一个时间戳。所以尝试类似的东西

```
Random generator = new Random(System.currentTimeMillis); 
```

# c# - FileIO.WriteAsync 挂起

> ID：13333786
> 
> 赞同：2
> 
> 时间：2012-11-11T17:53:55.460
> 
> 标签：c#, windows, io, windows-8, windows-store-apps

我正在尝试开发一个基本的 Windows 8 应用商店应用程序，只需创建一个新文件并向其中写入一些示例数据。但是，当我运行我编写的功能时，应用程序会挂起并且没有响应。我尝试了两种不同的文件创建方法，它们都具有相同的效果：

使用漫游文件夹：

```
Windows.Storage.StorageFolder roamingFolder = Windows.Storage.ApplicationData.Current.RoamingFolder;
StorageFile file = await roamingFolder.CreateFileAsync("test.txt",CreationCollisionOption.ReplaceExisting);
string[] data = { "New project", "000000000" , "" };
await FileIO.WriteTextAsync(file, data[0]);
return new Project(file.Path, "New project", "", Windows.UI.Color.FromArgb(255, 0, 0, 0)); 
```

使用文件选择器：

```
Windows.Storage.Pickers.FileSavePicker fsp = new Windows.Storage.Pickers.FileSavePicker();
        fsp.FileTypeChoices.Clear();
        fsp.FileTypeChoices.Add("Plain Text", new List<string>() { ".jwp" });
        fsp.SuggestedStartLocation = Windows.Storage.Pickers.PickerLocationId.DocumentsLibrary;
        fsp.SuggestedFileName = "New Project";
        StorageFile file = await fsp.PickSaveFileAsync();
        if (file != null)
        {
            string[] data = { "New project", "000000000" , "" };
            CachedFileManager.DeferUpdates(file);
            await FileIO.WriteLinesAsync(file, data);
            Windows.Storage.Provider.FileUpdateStatus status = await CachedFileManager.CompleteUpdatesAsync(file);
            if (status == Windows.Storage.Provider.FileUpdateStatus.Complete)
            {
                return new Project(file.Path, "New project", "", Windows.UI.Color.FromArgb(255, 0, 0, 0));
            }
            else
            {
                return null;
            }
        }
        else
        {
            return null;
        } 
```

每次，它似乎挂在的行是：

```
await FileIO.WriteTextAsync(file,data[0]); 
```

或者：

```
await FileIO.WriteLinesAsync(file,data); 
```

分别。

有人知道这里发生了什么吗？我在选择器中选择的驱动器上肯定有空间，我什至可以看到选择器方法肯定是在创建一个文件（尽管大小为 0 字节），但我真的无能为力。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-11T21:26:48.027

我怀疑在调用层次结构的某个地方，您正在同步阻塞异步方法（例如，`Task.Wait`或`Task.Result`）。

这可以防止您的方法继续同步回 UI 线程，从而导致死锁。[我在我的博客上详细解释了这个死锁场景](http://nitoprograms.blogspot.com/2012/07/dont-block-on-async-code.html)。

有两个指导方针可以解决这个问题：

1.  一直使用`async`下去。不要阻塞`async`代码。替换`Task.Wait`/`Task.Result`并`await`让它成长。
2.  配置您的上下文。如果您的`async`方法不需要在 之后访问 UI 元素（或数据绑定属性）`await`，则使用`ConfigureAwait(false)`.

# air - Adobe Air - 适用于 BlackBerry 的签名应用程序

> ID：13333791
> 
> 赞同：0
> 
> 时间：2012-11-11T17:54:22.420
> 
> 标签：air, blackberry-playbook, sign, blackberry-10

我正在用 Flash CS5 和 Adob​​e Air 2.5 构建一个简单的游戏。我想在 BlackBerry App World 上发布它。

我发布了一个 .apk 并尝试使用[BlackBerry 在线工具](https://bdsc.webapps.blackberry.com/android/bpaa/)将其打包，但出现此兼容性错误：

> ImpactTypeReason 5 / 本机代码 / armeabi-v7a

什么是**armeabi-v7a**？

谢谢你，乌利

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T09:17:06.077

您为什么尝试转换您的 Android .apk 文件？

使用 Flash CS5，您可以[为 Blackberry 发布](https://developer.blackberry.com/air/)（作为 .bar 文件）。

# networking - 网络：传输层和网络层之间的区别

> ID：13333794
> 
> 赞同：33
> 
> 时间：2012-11-11T17:55:08.613
> 
> 标签：networking, osi

在 Internet 模型中有四层：链路 -> 网络 -> 传输 -> 应用程序。

我真的不知道网络层和传输层之间的区别。当我读到：

```
Transport layer: include congestion control, flow control, reliability ...
Networking layer: route data from A to B 
```

因此，基于上述属性，我发现这两层之间存在一些重叠。

1）网络层决定将数据从A移动到B。但是，当数据知道如何从A移动到B时，术语“流量控制”“拥塞控制”意味着什么......？当数据包（和字节流在数据包中）已经知道跨网络移动时，它如何控制以及控制什么。

2）或者其他例子，传输层中的TCP协议是流的ORDERED交付。但是，TCP 不决定如何移动数据，而是网络层。那么，TCP 能做什么呢？

所以，我无法理解这两个术语。请教我。

谢谢 ：）

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2012-11-11T18:00:57.363

**这些是抽象级别。**

**传输层**是决定使用 TCP/UDP 的地方。在这一层常用的协议中，TCP 是可靠的，UDP 不可靠。根据所做的选择，相应的标头会附加到您的数据包中。例如，TCP 只知道 SYN-ACK、三向握手机制，但不知道远程端点的地址，或通过网络获取数据包的机制。

**拥塞控制、流量控制**通过调节发送的数据包数量来帮助确保网络不会被数据包淹没。

现在，在附加 TCP/UDP 标头之后，它移动到网络层。直到这一步，**远程端点的 IP 地址**根本不是数据包的一部分。正是在此步骤中，源和目标 IP 地址被添加到数据包中。这一层实际上知道远程端点。

* * *

```
 Sender                          Receiver

    -----------                      ------------
   |           |   virtual link     |            |
   | Transport | -----------------> | Transport  |
   |           |                    |            |
    -----------                      ------------
         |                                |
         |                                |
    -----------                       -----------
   |           |    virtual link     |           |
   |  Network  | ------------------> |  Network  |
   |           |                     |           |
    -----------                       -----------
         |                                |
         |                                |
    -----------                       -----------
   |           |                     |           |
   | Physical  |                     | Physical  |
   |           |                     |           |
    -----------                       -----------
         ↓                                 ↑
         |____________real link____________| 
```

发送者的传输层数据，是接收者的传输层接收到的**确切数据。**

随着数据包沿发送方向下传播，每一层都添加了自己的报头信息，但所有这些都被接收方的相应层**删除。**

优点是建立了**虚拟链路**，如上图所示，而**真实链路**仅在物理层中。

* * *

## 回答 #2

> 赞同：39
> 
> 时间：2013-11-12T10:23:06.287

**传输层：**

*   进程之间的逻辑通信。

**网络层：**

*   主机之间的逻辑通信。

**传输层：**

*   负责检查会话层中可用的数据是否无错误。

**网络层：**

*   负责逻辑寻址并将逻辑地址（例如 amazon.com）转换为物理地址（例如 180.215.206.136）

**传输层：**该层使用的协议是：

*   TCP（传输控制协议）

*   UDP（用户数据报协议）

*   SCTP（流控制传输协议）

**网络层：**该层使用的协议是：

*   IP（互联网协议）

*   ICMP（互联网控制消息协议）

*   IGMP（互联网组消息协议）

*   RARP（反向地址解析协议）

*   ARP（地址解析协议）

**传输层：**

*   该层确保在该层运行的协议提供可靠的端到端流和错误控制。

**网络层：**

*   该层控制从源到目的地的数据路由以及构建和拆除数据包。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2015-06-02T17:36:29.457

传输：确定如何发送数据：可靠或不可靠。定义众所周知的服务（端口）。

网络：提供逻辑寻址，找到到达目的地的最佳路径。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2015-12-10T11:14:19.227

**传输层：**

OSI 参考模型协议栈的第四层也是“中间”层是传输层。我认为传输层在某些方面是 OSI 模型中下层和上层“组”的一部分。它更多地与较低层相关联，因为它涉及数据的传输，但它的功能也有些高级，导致该层与第 5 层到第 7 层有相当多的共同点。

回想一下，第 1、2 和 3 层与数据的实际打包、寻址、路由和传递有关；物理层处理比特；数据链路层处理本地网络，网络层处理网络之间的路由。相比之下，传输层具有足够的概念性，它不再关心这些“具体细节”问题。它依赖于较低层来处理设备之间移动数据的过程。

传输层实际上充当了高层应用程序的抽象世界与一到三层的具体功能之间的某种“联络”。由于这个角色，传输层的总体工作是提供必要的功能，以实现不同计算机上的软件应用程序进程之间的通信。这包括许多不同但相关的职责

现代计算机是多任务处理的，并且在任何给定时间可能有许多不同的软件应用程序都试图发送和接收数据。传输层负责提供一种方法，使这些应用程序都可以使用相同的低层协议实现来发送和接收数据。因此，传输层有时被称为负责端到端或主机到主机的传输（实际上，TCP/IP 模型中的等效层称为“主机到主机传输层”） .

**网络层：**

OSI 参考模型的第三低层是网络层。如果数据链路层基本上定义了被认为是网络的边界，那么网络层就是定义互联网络（互连网络）如何运作的层。网络层是 OSI 模型中最低的一层，它关注的是从一台计算机实际获取数据到另一台计算机，即使它位于远程网络上；相反，数据链路层只处理彼此本地的设备。

虽然 OSI 参考模型中的所有第 2 层到第 6 层都充当了它们下面的层和它们上面的层之间的“栅栏”，但网络层在这方面尤为重要。正是在这一层，真正开始了从更高层的更抽象的功能（与数据传递无关）到将数据传输到目的地所需的特定任务的转变。传输层以多种方式与网络层相关，随着您在 OSI 协议栈上的提升，它会继续这种“抽象转换”。网络层功能

网络层通常执行的一些特定工作包括：

> **逻辑寻址：**通过网络进行通信的每个设备都有一个与之相关的逻辑地址，有时称为第三层地址。例如，在 Internet 上，Internet 协议 (IP) 是网络层协议，每台机器都有一个 IP 地址。请注意，寻址也是在数据链路层完成的，但这些地址指的是本地物理设备。相反，逻辑地址独立于特定硬件，并且在整个互联网中必须是唯一的。
> 
> **路由：**在一系列互连网络中移动数据可能是网络层的定义功能。在网络层运行的设备和软件例程的工作是处理来自各种来源的传入数据包，确定它们的最终目的地，然后确定它们需要被发送到哪里才能将它们送到应该去的地方。我在关于间接设备连接的主题中更完整地讨论了 OSI 模型中的路由，并通过 OSI 模型类比来展示它是如何工作的。
> 
> **数据报封装：**网络层通常封装从更高层接收到的消息，方法是将它们放入带有网络层标头的数据报（也称为数据包）中。
> 
> **分片和重组：**网络层必须将消息向下发送到数据链路层进行传输。一些数据链路层技术对可以发送的任何消息的长度都有限制。如果网络层要发送的数据包太大，网络层必须将数据包拆分，将每个部分发送到数据链路层，然后在到达目标机器上的网络层后重新组合。一个很好的例子是互联网协议是如何做到这一点的。
> 
> **错误处理和诊断：**在网络层使用特殊协议，允许逻辑连接或尝试路由流量的设备交换有关网络上主机或设备本身状态的信息。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-11T18:15:14.133

Cthulhu 的解释还可以，但为了更好地理解，我建议你阅读 OSI 模型

传输层处理端口号、TCP、UDP、第 4 层 PDU，这是封装和分段数据以通过网络发送数据的第一步

PDU = 协议数据单元，它是一条包含标头、数据段和页脚的信息（参见第 2 层封装）

网络处理 ip 路由和跨网络数据包的传递

每一层（无论是 OSI 模型还是具有 4 层的 TCP/IP 模型），每一层都与它的相邻层交互，并为当今的电信目的提供一个抽象框架

关于您的问题：

1）。流量控制是 TCP 处理数据包大小以防止数据包丢失和重传的机制，拥塞控制是另一回事。网络层不做任何决定，它只是尝试通过网络发送你的包，如果失败，它会通知上层这个问题，然后应用程序或用户应该决定做什么）。

2）。TCP 启用了 3 次握手机制来启动会话，然后每个数据包都带有一个计数器，并且接收方确认收到了发送方的数据包。如果他不承认，TCP 会重新发送丢失的包。网络层只会转发数据包，不会对流量控制或数据包排序做出任何决定。

CCNA1 文档或网络上提供了更多详细信息。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2017-06-14T11:34:57.513

考虑到 ISO/OSI 参考模型传输层是第 4 层。它主要处理数据包的端到端传递。端到端意味着它负责将数据包传递到适当的端口。另一方面，网络层是第 3 层，负责将数据包仅传递到主机，而不是系统中的任何特定 [端口/进程。人们确实有疑问，当您拥有可以将数据包从一端传递到另一端的传输层时，为什么我们有网络层？这个问题的简单答案是网络层负责将数据包从发送方传送到目的地。但是在到达目的地之后，它依赖于传输层将其传递到适当的端口号或进程（在操作系统术语中）。此外，在网络层，我们的 IP 协议是互联网的核心。你可以阅读更多关于这个[在这里](http://csmonkk.blogspot.com/2017/06/complete-osi-model.html)。

# html - 在一行上固定多个表格的宽度

> ID：13333797
> 
> 赞同：-1
> 
> 时间：2012-11-11T17:55:19.080
> 
> 标签：html, css, html-table, width

我有多个表显示为内联块元素。但是，我想修复宽度，以便它们超出水平空间，为每个表提供 33% 的宽度（每行 3 个表）。示例代码如下：

```
<table>
<thead>
<tr><th></th><th></th><th></th><th></th></tr>
</thead>
<tbody>
<tr><td></td><td></td><td></td><td></td></tr>
<tr><td></td><td></td><td></td><td></td></tr>
<tr><td></td><td></td><td></td><td></td></tr>
<tr><td></td><td></td><td></td><td></td></tr>
<tr><td></td><td></td><td></td><td></td></tr>
</tbody>
</table> 
```

...重复以上代码 2 次。

现在我似乎无法做到这一点。所有表格都具有类属性并设置为 33% 宽度，但似乎没有任何变化。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T18:01:57.310

另一种可能是

```
'float: left' 
```

因此，您不必将宽度设置为几乎 33.3%。只需确保您在表的父元素上有一个**[Clearfix 。](http://www.webtoolkit.info/css-clearfix.html)**

**[小提琴](http://jsfiddle.net/6x4jP/)**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-11T18:04:06.890

尝试这个

```
table
{
   float:left;
   width:33%;
} 
```

在百分比中，您必须解决填充、边距和边框问题，并根据需要减少它。您可能需要添加`display:inline-block`到 3 个表的容器中

# ios - AVAssetWriter 和 AVAssetWriterInputPixelBufferAdaptor appendingPixelBuffer 组合失败

> ID：13333798
> 
> 赞同：2
> 
> 时间：2012-11-11T17:55:25.273
> 
> 标签：ios, avasset

我正在尝试使用为[编码资产](https://stackoverflow.com/questions/8191840/video-encoding-using-avassetwriter-crashes)编写器提供的示例和从[pixelBufferFromCGImage](https://stackoverflow.com/questions/5681927/using-avassetwriter-to-create-a-movie-from-images-is-not-working-as-expected-on)提供的示例的组合，以将 UIImage 覆盖在我正在导出的 AVAsset 上。

问题是，尽管此调用的 True 结果

```
[adaptor appendPixelBuffer:buffer withPresentationTime:kCMTimeZero]; 
```

导出的 avasset 已损坏，产生意外的大小，随后对其的访问失败并显示“此媒体可能已损坏”。

如果我避免尝试使用 appendPixelBuffer 调用，则导出本身是成功的。但是，将它定位在调度队列之前或其中会产生相同的故障。

希望不要在此处重复发布，但此处堆栈溢出中的其他示例似乎并未解决此特定组合故障。谢谢，代码如下

**出口代码**：

```
 AVAsset *sourceAsset = [AVAsset assetWithURL:outputUrl];

NSError *error = nil;

NSString *fileName = [NSString stringWithFormat:@"non_transform_%f.mov", [[NSDate date] timeIntervalSince1970]];
NSString *combinedPath = [NSString stringWithFormat:@"file://localhost%@/%@", [[GroupDiskManager sharedManager] getFolderPath], fileName];

NSURL *outputURL = [NSURL URLWithString:combinedPath];
NSLog(@"combined path: %@", combinedPath);

AVAssetWriter *videoWriter = [[AVAssetWriter alloc] initWithURL:outputURL fileType:AVFileTypeQuickTimeMovie error:&error];

AVAssetTrack *videoTrack = [[sourceAsset tracksWithMediaType:AVMediaTypeVideo] objectAtIndex:0];
AVAssetTrack *audioTrack = [[sourceAsset tracksWithMediaType:AVMediaTypeAudio] objectAtIndex:0];

NSDictionary *videoSettings = [NSDictionary dictionaryWithObjectsAndKeys:
                               AVVideoCodecH264, AVVideoCodecKey,
                               [NSNumber numberWithInt:1280], AVVideoWidthKey,
                               [NSNumber numberWithInt:720], AVVideoHeightKey,
                               nil];

AVAssetWriterInput* videoWriterInput = [[AVAssetWriterInput
                                         assetWriterInputWithMediaType:AVMediaTypeVideo
                                         outputSettings:videoSettings] retain];

NSMutableDictionary *attributes = [[NSMutableDictionary alloc] init];
[attributes setObject:[NSNumber numberWithUnsignedInt:kCVPixelFormatType_420YpCbCr8BiPlanarVideoRange] forKey:(NSString*)kCVPixelBufferPixelFormatTypeKey];
[attributes setObject:[NSNumber numberWithUnsignedInt:1280] forKey:(NSString*)kCVPixelBufferWidthKey];
[attributes setObject:[NSNumber numberWithUnsignedInt:720] forKey:(NSString*)kCVPixelBufferHeightKey];

AVAssetWriterInputPixelBufferAdaptor *adaptor = [AVAssetWriterInputPixelBufferAdaptor
                                                 assetWriterInputPixelBufferAdaptorWithAssetWriterInput:videoWriterInput
                                                 sourcePixelBufferAttributes:attributes];

NSParameterAssert(videoWriterInput);
NSParameterAssert([videoWriter canAddInput:videoWriterInput]);
videoWriterInput.expectsMediaDataInRealTime = NO;
[videoWriter addInput:videoWriterInput];

NSError *aerror = nil;

NSDictionary *videoOptions = [NSDictionary dictionaryWithObject:[NSNumber numberWithInt:kCVPixelFormatType_420YpCbCr8BiPlanarVideoRange] forKey:(id)kCVPixelBufferPixelFormatTypeKey];
AVAssetReaderTrackOutput *asset_reader_output = [[AVAssetReaderTrackOutput alloc] initWithTrack:videoTrack outputSettings:videoOptions];

AVAssetReader *reader = [[AVAssetReader alloc] initWithAsset:sourceAsset error:&aerror];
[reader addOutput:asset_reader_output];

AVAssetWriterInput* audioWriterInput = [[AVAssetWriterInput
                                         assetWriterInputWithMediaType:AVMediaTypeAudio
                                         outputSettings:nil] retain];
AVAssetReader *audioReader = [[AVAssetReader assetReaderWithAsset:sourceAsset error:&error] retain];

AVAssetReaderOutput *audioReaderOutput = [AVAssetReaderTrackOutput assetReaderTrackOutputWithTrack:audioTrack outputSettings:nil];
[audioReader addOutput:audioReaderOutput];
NSParameterAssert(audioWriterInput);
NSParameterAssert([videoWriter canAddInput:audioWriterInput]);
audioWriterInput.expectsMediaDataInRealTime = YES;
[videoWriter addInput:audioWriterInput];
[videoWriter startWriting];
[videoWriter startSessionAtSourceTime:kCMTimeZero];
[reader startReading];

CVPixelBufferRef buffer = [ImageToMovieManager pixelBufferFromCGImage:[UIImage imageNamed:@"234_1280x720_3.jpg"].CGImage size:CGSizeMake(1280, 720)];
BOOL theResult = [adaptor appendPixelBuffer:buffer withPresentationTime:kCMTimeZero];

if (theResult == NO) //failes on 3GS, but works on iphone 4
    NSLog(@"failed to append buffer");

if(buffer) {
    CVBufferRelease(buffer);
}

dispatch_queue_t _processingQueue = dispatch_queue_create("_processingQueue", NULL);
[videoWriterInput requestMediaDataWhenReadyOnQueue:_processingQueue usingBlock:
 ^{
     NSLog(@"requestMediaDataWhenReadyOnQueue");

     [self retain];

     while ([videoWriterInput isReadyForMoreMediaData]) {

         CMSampleBufferRef sampleBuffer;
         if ([reader status] == AVAssetReaderStatusReading &&
             (sampleBuffer = [asset_reader_output copyNextSampleBuffer])) {

             BOOL result = [videoWriterInput appendSampleBuffer:sampleBuffer];
             CFRelease(sampleBuffer);

             if (!result) {
                 NSLog(@" result == nil Cancel!");
                 NSLog(@"videoWriter.error: %@", videoWriter.error);
                 [reader cancelReading];
                 break;

             }
         } else {
             NSLog(@"[videoWriterInput markAsFinished]");

             [videoWriterInput markAsFinished];

             switch ([reader status]) {
                 case AVAssetReaderStatusReading:
                     NSLog(@"reading");
                     // the reader has more for other tracks, even if this one is done
                     break;

                 case AVAssetReaderStatusCompleted:
                     NSLog(@"AVAssetReaderStatusCompleted");

                     [audioReader startReading];
                     dispatch_queue_t mediaInputQueue = dispatch_queue_create("mediaInputQueue", NULL);
                     [audioWriterInput requestMediaDataWhenReadyOnQueue:mediaInputQueue usingBlock:^
                      {

                          while (audioWriterInput.readyForMoreMediaData) {
                              CMSampleBufferRef nextBuffer;
                              if ([audioReader status] == AVAssetReaderStatusReading &&
                                  (nextBuffer = [audioReaderOutput copyNextSampleBuffer])) {
                                  if (nextBuffer) {
                                      [audioWriterInput appendSampleBuffer:nextBuffer];
                                  }
                              }else{
                                  [audioWriterInput markAsFinished];
                                  switch ([audioReader status]) {
                                      case AVAssetReaderStatusCompleted:
                                          NSLog(@"AVAssetReaderStatusCompleted!!");
                                          [videoWriter finishWriting];
                                          [VideoManager videoSavedWithURL:outputURL withError:(NSError *)error];
                                          break;
                                  }
                              }
                          }

                      }
                      ];
                     break;

                 case AVAssetReaderStatusFailed:
                     NSLog(@"AVAssetReaderStatusFailed");
                     [videoWriter cancelWriting];
                     break;
             }
             break;
         }
     }
 }

 ]; 
```

**pixelBufferFromCGImageCode**

```
 CGSize frameSize = CGSizeMake(CGImageGetWidth(image), CGImageGetHeight(image));
NSDictionary *options = [NSDictionary dictionaryWithObjectsAndKeys:
                         [NSNumber numberWithBool:NO], kCVPixelBufferCGImageCompatibilityKey,
                         [NSNumber numberWithBool:NO], kCVPixelBufferCGBitmapContextCompatibilityKey,
                         nil];
CVPixelBufferRef pxbuffer = NULL;
CVReturn status = CVPixelBufferCreate(kCFAllocatorDefault, frameSize.width,
                                      frameSize.height,  kCVPixelFormatType_420YpCbCr8BiPlanarVideoRange, (CFDictionaryRef) options,
                                      &pxbuffer);
NSParameterAssert(status == kCVReturnSuccess && pxbuffer != NULL);

CVPixelBufferLockBaseAddress(pxbuffer, 0);
void *pxdata = CVPixelBufferGetBaseAddress(pxbuffer);

CGColorSpaceRef rgbColorSpace = CGColorSpaceCreateDeviceRGB();
CGContextRef context = CGBitmapContextCreate(pxdata, frameSize.width,
                                             frameSize.height, 8, 4*frameSize.width, rgbColorSpace,
                                             kCGImageAlphaNoneSkipLast);

CGContextDrawImage(context, CGRectMake(0, 0, CGImageGetWidth(image),
                                       CGImageGetHeight(image)), image);
CGColorSpaceRelease(rgbColorSpace);
CGContextRelease(context);

CVPixelBufferUnlockBaseAddress(pxbuffer, 0);

return pxbuffer; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-08-14T10:30:09.223

至少，pixelFormat 应该指定为 kCVPixelFormatType_32BGRA 而不是 kCVPixelFormatType_420YpCbCr8BiPlanarVideoRange。

# c++ - 从构造函数抛出异常的奇怪格式

> ID：13333800
> 
> 赞同：1
> 
> 时间：2012-11-11T17:56:05.760
> 
> 标签：c++, exception, constructor

我们的教授给了我们一个shell来编写程序。在里面他给了我们一个名为“Maker”的类，它能够抛出异常。考虑到他提供的构造函数的格式，我对如何抛出和捕获错误感到困惑。

他给了我们他自己的特殊异常头文件 CycleFoundException.h，它看起来像这样：

```
#include <iostream>
#include <exception>

using namespace std;

class CycleFoundException: public exception {
  // Don't add code
}; 
```

这是 Maker.h 头文件：

```
#include "CycleFoundException.h"    

class Maker
{
 private:
  // insert instance variables

 public:
  Maker(int x) throw (CycleFoundException);
}; 
```

最后是 cpp shell，Maker.cpp：

```
#include Maker.h

Maker::Maker(int x) throw (CycleFoundException){
//add code here
}

int main()
{
    return 0;
} 
```

我从未见过这样的构造函数声明。为什么将“抛出（CycleFoundException）”标记到构造函数的声明中？那有必要吗？

给定这种格式，我将如何抛出异常？我是否仍会以与其他方式相同的方式执行此操作，即如果不满足某个条件则抛出异常（从构造函数的主体内）？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-11T18:08:36.493

这只是说明允许函数抛出何种异常的一种方式：

```
Maker::Maker(int x) throw (CycleFoundException) 
```

意味着`Maker::Maker(int)`只允许抛出`CycleFoundException`异常，没有别的。这称为“异常规范”。

请注意，C++ 标准已弃用此机制。它不应该再使用了。您可能应该将此告知您的教授；-) 他们总是有问题： http: [//mu2e.fnal.gov/public/hep/computing/standards/C++FAQ.shtml#exceptionspec](http://mu2e.fnal.gov/public/hep/computing/standards/C++FAQ.shtml#exceptionspec)

# java - 解析日期 YYYY-MM-DD HH:mm:ss 的异常

> ID：13333808
> 
> 赞同：1
> 
> 时间：2012-11-11T17:56:53.910
> 
> 标签：java, date, formatting

我尝试以 YYYY-MM-DD HH:mm:ss 格式解析日期

```
String now = "2012-11-02 12:02:00";
DateFormat formatter;
formatter = new SimpleDateFormat("EEE MMM dd HH:mm:ss z yyyy");
Date date_temp = (Date) formatter.parse(now.toString());
System.out.println("output: " + date_temp); 
```

它给了我以下异常

```
java.text.ParseException: Unparseable date: "2012-11-02 12:02:00" 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-11T17:58:03.423

是的，您已经创建了一个格式为一种格式（“EEE MMM dd HH:mm:ss z yyyy”），然后给它一个完全不同格式的字符串来解析。为什么你*认为*这会奏效？试试这个：

```
// Locale specified to avoid any cultural differences. You may also
// want to specify the time zone.
DateFormat formatter = new SimpleDateFormat("yyyy-MM-dd HH:mm:ss",
                                            Locale.US);
Date date = formatter.parse(now); 
```

请注意， parsed`Date`对格式化*一无所知*- 调用的结果`toString()`（正如您在此处隐式所做的那样）始终只是 JRE 默认时区中的默认格式。如果您想以特定格式打印出来，请`SimpleDateFormat`再次使用。

另请注意，我已经结合了变量的声明和初始化。更喜欢在一行中声明一个变量并稍后给它一个初始值。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-11T17:58:27.070

当然，您`date string`不在`format`您正在使用的`SimpleDateFormat`. 因此它将无法将其解析为`date object`.

尝试使用这个： -

```
DateFormat formatter = new SimpleDateFormat("yyyy-MM-dd HH:mm:ss"); 
```

# sql - 使用 select 和 group by 的简单 SQL 查询

> ID：13333820
> 
> 赞同：2
> 
> 时间：2012-11-11T17:59:24.173
> 
> 标签：sql, sql-server, tsql, select, group-by

我有一些问题要理解。

我有下一张桌子：

```
ID  PROD    PRICE
1   A        10
2   B        20
3   C        30
4   A        1
5   B        12
6   C        2
7   A        7
8   B        8
9   C        9
10  A        5
11  B        2 
```

我想获得所有产品的所有最低价格，这意味着我想获得 3 条记录，即每个产品的最低价格。从上面的示例中，这就是我想要得到的：

```
ID  PROD    MIN(PRICE)
4   A       1
11  B       2
6   C       2 
```

这是我写的查询：

```
select id, prod, min(price)
from A1
group by(prod); 
```

但这是我得到的记录：

```
ID  PROD    MIN(PRICE)
1   A        1
2   B        2
3   C        2 
```

如您所见，ID 值是错误的，它只是给我某种行计数器，而不是实际的 ID 值。

您可以在下一个[链接中查看](http://sqlfiddle.com/#!2/87394/2)

我做错了什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-11T18:01:25.337

```
SELECT  a.*
FROM    A1 a
        INNER JOIN
        (
            SELECT Prod, MIN(Price) minPrice
            FROM A1
            GROUP BY Prod
        ) b ON a.Prod = b.Prod AND
                a.Price = b.minPrice 
```

*   [**SQLFiddle 演示**](http://sqlfiddle.com/#!2/87394/3)

为了`MSSQL`

```
SELECT ID, Prod, Price
FROM
(
  SELECT ID, Prod, Price,
        ROW_NUMBER() OVER(Partition BY Prod ORDER BY Price ASC) s
  FROM A1
) a
WHERE s = 1 
```

*   [**SQLFiddle 演示**](http://sqlfiddle.com/#!3/7e2a8/2)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-11T18:04:18.460

您必须使用 MySQL 或 PostgreSQL。

在标准 SQL 中，必须在 GROUP BY 子句中引用选择列表中的所有非聚合列。

我不清楚您是否需要 ID 列。如果没有，那么使用：

```
SELECT prod, MIN(price) AS min_price
  FROM A1
 GROUP BY prod; 
```

如果您需要匹配的 ID 号，那么这将成为一个子查询：

```
SELECT id, prod, price
  FROM A1
  JOIN (SELECT prod, MIN(price) AS min_price
          FROM A1
         GROUP BY prod
       ) AS A2 ON A1.prod = A2.prod AND A1.price = A2.min_price; 
```

* * *

> 您能否解释一下我写的内容有什么问题，是的，我需要 ID 列。

```
select id, prod, min(price)
from A1
group by(prod); 
```

在标准 SQL 中，您会收到一条错误消息（或者，如果不是标准的，在大多数 SQL DBMS 中）。

在允许您从 GROUP BY 子句中省略 ID 列的情况下，您将获得 ID 的准随机值，以获得正确的`prod`和`MIN(price)`值。基本上，优化器会根据自己的想法选择它知道的任何方便的 ID。具体来说，它不会像完整答案那样执行子查询和连接。例如，它可能会进行顺序扫描，它返回的 ID 可能是给定`prod`值遇到的第一个或最后一个 ID，或者它可能是其他值——我什至不确定返回的 ID 是否为`prod = 'A'`必须是与关联的 ID `prod = 'A'`；您必须仔细阅读手册。基本上，您的查询是不确定的，因此许多返回值是允许的并且是“正确的”（但不是您想要的）。

请注意，如果您按 ID 而不是 分组`prod`，则结果`prod`将是确定的。这是因为 ID 列是表的候选键（唯一标识符）。（我相信 PostgreSQL 区分了这两种情况——但我不确定；MySQL 没有。）

# xcode - UILabel 以编程方式设置 x,y 坐标

> ID：13333822
> 
> 赞同：13
> 
> 时间：2012-11-11T17:59:47.160
> 
> 标签：xcode, uilabel

如何以`position (x, y)`编程`UILabel`方式在视图中，最好从`viewDidLoad`？`label`有一个适合它的`Outlet`，例如`myLabel`。

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2012-11-11T18:05:15.593

在这里可以调整位置`UILabel`。在`viewWillAppear`方法中，您只需要更改 UILabel 的来源，如下所示。

```
 CGRect frame = myLabel.frame;
     frame.origin.y=10;//pass the Y cordinate 
     frame.origin.x= 12;//pass the X cordinate
     myLabel.frame= frame; 
```

我希望它能清除你。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-11-11T18:02:53.593

```
[label setFrame:CGRectMake(10,20,100,200)]; 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-11-11T18:08:08.007

而不是设置框架，您可以只使用`setCenter(x, y)`.

例如：`myLabel.center = CGPointMake(x,y);`。

在这里，您只需要传递要`UIlabel`放入`UIView`.

# bash - 每一分钟检查一个进程会降低服务器的性能吗？

> ID：13333827
> 
> 赞同：0
> 
> 时间：2012-11-11T18:00:11.767
> 
> 标签：bash

我有这个下面的脚本，它实际上检查 Memcache 服务器是否已关闭，它将启动 Mmecache 服务器。

```
#!/bin/bash
ps -eaf | grep 11211 | grep memcached
# if not found - equals to 1, start it
if [ $? -eq 1 ]
then
memcached -d -m 16 -p 11211 -u nobody
else
echo "eq 0 - memcache running - do nothing"
fi 
```

如果我通过这种方式在 crontab 中设置这个脚本每 1 分钟运行一次

```
* * * * * /usr/bin/memcached_autostart.sh 
```

它会以任何方式降低服务器的性能吗？或者可以吗？

请分享你的经验。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-11T18:11:21.880

它不会对服务器性能产生显着影响，尽管您需要在 memcached 已经运行时使其静默，否则每分钟向您发送电子邮件会浪费服务器时间和您的时间。

但是有更好的方法来做到这一点。systemd 和 daemontools 项目都旨在监视服务并保持它们运行，或者如果您使用的是 sysvinit，则可以将 memcached 命令添加到 /etc/inittab 以让 sysvinit 在退出时继续重新生成它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-11T18:11:31.100

它会比*不*每分钟运行一次要慢。您的代码可以通过做一些优化

```
pidof memcached || memcached… 
```

您也可以代替守护进程 memcached 做类似的事情

```
while true ; do memcached -m 16 -p 11211 -u nobody ; done 
```

在这种情况下，它将在终止后重新启动而不进行轮询。但是你最好确保如果重启太频繁，你会收到通知——这意味着出现了问题。

# django - 在 Django 的 shell 中，如何自动加载 ipython 魔术函数？

> ID：13333828
> 
> 赞同：5
> 
> 时间：2012-11-11T18:00:13.220
> 
> 标签：django, ipython

我想在使用 django shell 时使以下 ipython 命令永久化：

```
%load_ext autoreload
%autoreload 2 
```

不幸的是，Django 似乎没有使用我的全局 ipython 配置，因此将它们放在我的 default_profile 中似乎不起作用。运行 django shell 时有什么方法可以自动执行这些？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-13T18:20:06.050

您可以使用[django 扩展](http://packages.python.org/django-extensions/)包，其中包含一个`shell_plus`命令。此命令自动加载模型，但您也可以使用该`--notebook`属性。在那里您可以添加自动加载参数：`--ext django_extensions.management.notebook_extension`.

请参阅[此处](http://packages.python.org/django-extensions/shell_plus.html)了解更多信息。

# cocoa - NSBrowser 重用单元格而不是创建新单元格

> ID：13333829
> 
> 赞同：0
> 
> 时间：2012-11-11T18:00:17.953
> 
> 标签：cocoa, nsbrowser

我正在尝试使用 创建 UI 元素`NSBrowser`，但由于某种原因，浏览器会创建我指定的自定义单元格类的单例实例，而不是为浏览器中的每个单元格创建新的单元格实例。特别是，这是委托实现

```
- (void)awakeFromNib {
    [super awakeFromNib];

    self.browser.target = self;
    self.browser.doubleAction = @selector(_doubleClick:);
    self.browser.reusesColumns = YES;
//    self.browser.cellClass = [CLColumnViewCell class];
    [self.browser setCellPrototype:[[CLColumnViewCell alloc] init]];
}

#pragma mark NSBrowserDelegate

- (void)browser:(NSBrowser *)browser createRowsForColumn:(NSInteger)column inMatrix:(NSMatrix *)matrix {
    NSLog(@"This method never gets called");
}

- (NSInteger)browser:(NSBrowser *)browser numberOfChildrenOfItem:(id)item {
    return [(item ?: _root) countOfContents];
}

- (BOOL)browser:(NSBrowser *)browser isLeafItem:(id)item {
    return ![(item ?: _root) canHaveContents];
}

- (id)browser:(NSBrowser *)browser child:(NSInteger)index ofItem:(id)item {
    return [(item ?: _root) objectInContentsAtIndex:index];
}

- (id)browser:(NSBrowser *)browser objectValueForItem:(id)item {
    return nil; // Object value is handled by CLColumnViewCell itself.
}

- (void)browser:(NSBrowser *)browser willDisplayCell:(CLColumnViewCell *)cell atRow:(NSInteger)row column:(NSInteger)column {
    NSIndexPath *indexPath = [[browser indexPathForColumn:column] indexPathByAddingIndex:row];
    cell.columnView = browser;
    cell.indexPath = indexPath;
    cell.object = [browser itemAtIndexPath:indexPath];
    NSLog(@"will display cell %@", cell, cell);
} 
```

日志消息如下所示

```
2012-11-11 09:57:16.582 will diplay cell <CLColumnViewCell: 0x102e597c0>
2012-11-11 09:57:16.583 will diplay cell <CLColumnViewCell: 0x102e597c0>
2012-11-11 09:57:16.583 will diplay cell <CLColumnViewCell: 0x102e597c0>
2012-11-11 09:57:16.584 will diplay cell <CLColumnViewCell: 0x102e597c0>
2012-11-11 09:57:16.584 will diplay cell <CLColumnViewCell: 0x102e597c0>
2012-11-11 09:57:16.585 will diplay cell <CLColumnViewCell: 0x102e597c0>
2012-11-11 09:57:16.585 will diplay cell <CLColumnViewCell: 0x102e597c0>
2012-11-11 09:57:16.586 will diplay cell <CLColumnViewCell: 0x102e597c0>
2012-11-11 09:57:16.587 will diplay cell <CLColumnViewCell: 0x102e597c0>
2012-11-11 09:57:16.587 will diplay cell <CLColumnViewCell: 0x102e597c0>
2012-11-11 09:57:16.588 will diplay cell <CLColumnViewCell: 0x102e597c0>
2012-11-11 09:57:16.588 will diplay cell <CLColumnViewCell: 0x102e597c0>
2012-11-11 09:57:16.589 will diplay cell <CLColumnViewCell: 0x102e597c0>
2012-11-11 09:57:16.589 will diplay cell <CLColumnViewCell: 0x102e597c0> 
```

正如消息所示，同一个单元格实例被一遍又一遍地使用！有没有办法强制`NSBrowser`创建新的单元格实例而不是重用同一个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T00:04:31.837

并不真地。毕竟，这就是[NSCell 的重点](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/ControlCell/Concepts/AboutControlsCells.html#//apple_ref/doc/uid/20000731-BBCEACEA)。NSCells 是 NSViews 的轻量级替代品。这在过去性能更受限制的日子里更重要——事实上，正如你会注意到的那样，Apple 已经开始为以前的单元格重控件（如 NSTableView 和 NSOutlineView）提供基于 NSView 的替代方案。我猜他们还没有开始做一个基于 NSView 的 NSBrowser。（尽管查看 NSTableView API，很容易看出原因——改造有点笨拙。他们可能会更好地重新开始。但我离题了......）

简而言之，鉴于 NSCell 的整个想法是拥有一个可以重用的轻量级对象，而不必每次都重新分配一个新对象，如果有一种简单的方法让它每次都创建一个新对象，我会感到惊讶时间。您可能可以通过子类化 NSBrowser 来解决此问题，但您最好采用不同的方法。

# php - SQL 只更新最后一行

> ID：13333830
> 
> 赞同：0
> 
> 时间：2012-11-11T18:00:23.223
> 
> 标签：php, sql, updating

我在更新数据库中的多行时遇到问题。这是我的表格。

```
<form action="results-action" method="post" enctype="multipart/form-data">
<fieldset>   

<table id ="table_id" class="display">

<thead>

<tr><td><h2>Pending Order</h2></td></tr>

<tr>

<th scope="col">Order ID</th>
<th scope="col">Name</th>
<th scope="col">Address</th>
<th scope="col">Product Name</th>
<th scope="col">Produt Quantity</th>
<th scope="col">Price</th>
<th scope="col">Order status</th>
</tr>
</thead>

<tbody>

<?php 

while ($row = mysqli_fetch_array($result)) {
?>

<tr>

<td><input type="text" value='<?=$row['virtuemart_order_id']?>' name="orderid" id="virtuemart_order_id"></td>

<td><?=$row['first_name']?></td>
<td><?=$row['address_1']?></td>
<td><?=$row['order_item_name']?></td>
<td><?=$row['product_quantity']?></td>
<td><?=$row['product_final_price'] ?></td>

<td><select name='change'>

<option value='P'> Pending</option>

<option value='C'> Confirmed</option></select></td>

</tr>

<?php

}

?>

</tbody>
</table>
</fieldset>

<fieldset>
<table>
<tr>
<td><input type="submit" value="Update status" name="update status"> </td>
</tr>
</table>
</fieldset>

</form> 
```

当我更改订单状态以确认每一行时，它应该将每一行的订单状态更新为“P”。但相反，它只更新最新的行。

这是我的更新代码。

```
$change = $_POST["change"];
$orderid = $_POST['orderid'];

// build SQL statement 
$query = "update ruj3d_virtuemart_order_items set order_status= '$change' WHERE virtuemart_order_id = '$orderid'";

// execute SQL statement
$status = mysqli_query($link, $query) or die(mysqli_error($link));

if ($status) {
echo "<big>It has been updated !!. </big>";

}else {
echo "<br>Has not been successfully confirmed</br>";
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T18:11:11.477

如下更改您的下拉列表

```
<select name='change[<?=$row['virtuemart_order_id']?>]'>
  <option value='P'> Pending</option>
  <option value='C'> Confirmed</option>
</select> 
```

然后在你的php中，

```
foreach($_POST['change'] as $orderid => $change) {
   $query = "update ruj3d_virtuemart_order_items set order_status= '$change' WHERE virtuemart_order_id = '$orderid'";

   // execute SQL statement
   $status = mysqli_query($link, $query) or die(mysqli_error($link));
} 
```

# sql - 无法执行操作，因为链接服务器“DB_PROD_04”的 OLE DB 提供程序“SQLNCLI10”无法开始分布式事务

> ID：13333832
> 
> 赞同：0
> 
> 时间：2012-11-11T18:00:32.553
> 
> 标签：sql, tsql, linked-server, distributed-transactions

我有两台服务器：

> SQL_UAT_01
> 
> DB_PROD_04

这两个服务器具有相同的数据库名称和相同的表：

> SQL_UAT_01.Database_01.TestTable
> 
> DB_PROD_04.Database_01.TestTable

这两个表中的每一个都有一个触发器。

当触发器触发时，它会在 OTHER 服务器的表上执行一个简单的 UPDATE。

**例子**

触发器在这里触发：

> SQL_UAT_01.Database_01.Test

它在这里进行了更新：

> DB_PROD_04.Database_01.Test

反之亦然。

我遇到了一个错误，我不知道如何修复。

**同样，错误是这样的：**

> CallableStatementCallback; 错误的 SQL 语法 [{call spGetAndIncrementIndex(?)}]; 嵌套异常是 com.microsoft.sqlserver.jdbc.SQLServerException：无法执行操作，因为链接服务器“DB_PROD_04”的 OLE DB 提供程序“SQLNCLI10”无法开始分布式事务。

我已经链接了双方的服务器。

有谁知道我应该如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T21:32:41.497

答案是在服务器上安装 DT。这是一个窗口功能。我安装了它，哇！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-20T13:39:25.790

如果服务器用尽本地端口，您还会遇到 MSDTC 问题

这也可以通过纠正临时 TCP 端口饱和度来解决：

[http://msdn.microsoft.com/en-us/library/aa560610%28v=bts.20%29.aspx](http://msdn.microsoft.com/en-us/library/aa560610%28v=bts.20%29.aspx)

# javascript - 当我尝试创建对象并调用函数时未定义函数

> ID：13333835
> 
> 赞同：0
> 
> 时间：2012-11-11T18:00:46.157
> 
> 标签：javascript, jquery, html

我正在尝试创建一个对象，然后对该对象调用初始化函数。但是我得到了未定义的初始化。这是我的代码：

```
var SomeJSObj = function () {
    function Initialize() {
        $(document).ready(function () {
            alert('hello');
        });
    };
}; 
```

当我创建一个新对象`SomeJSObj`并调用时，`Initialize`我得到未定义的函数。有人可以帮我跟踪错误吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T18:03:04.140

应该是这样的，因为您想`Initialize`公开该功能：

```
var SomeJSObj = function () {
    this.Initialize = function() {
        $(document).ready(function () {
            alert('hello');
        });
    }
};

var t = new SomeJSObj();
t.Initialize();​ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-11T18:03:15.533

`Initialize`当前无法在`SomeJSObj`构造函数之外访问。您需要在每个实例或原型上公开它：

```
var SomeJSObj = function () {
    this.Initialize = function () {
        $(document).ready(function () {
            alert('hello');
        });
    };
}; 
```

在原型上更有效，因为只有一个函数副本必须存在于内存中，而不是每个实例一个：

```
var SomeJSObj = function () {};
SomeJSObj.prototype.Initialize = function () {
    //Do stuff
}; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-11T18:07:14.120

首先，`$(document).ready`应该在函数定义*之外：*

```
$(document.ready(function() {
    ...
}); 
```

问题是您的方法应该使用前缀在对象上定义`this.`：

```
this.Initialize = function() {
    ...
}; 
```

所以总而言之：

```
$(document).ready(function() {

    var SomeJSObj = function () {

        this.Initialize = function() {
             alert('hello');
        };

    };

}); 
```

要调用您的方法，您必须创建一个实例：

```
var instance = new SomeJSObj(); // make sure this in in $(document).ready 
```

并调用方法：

```
instance.initialize(); // works 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-11T18:15:11.557

你可以这样做，简单易行。

```
var SomeJSObj = function () {
    this.Initialize=function() {
        $(document).ready(function () {
            alert('hello');
        });
    };

};

var x = new SomeJSObj();
x.Initialize() 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-11T18:04:01.923

这就是你想要的。见[小提琴](http://jsfiddle.net/P7qfm/)。

```
var SomeJSObj = function () {
    this.initialize();
};
SomeJSObj.prototype.initialize = function() {
  $(document).ready(function () {
      alert('hello');
  });
};
new ​SomeJSObj​();​ 
```

# c++ - 增强编程选项使我的应用程序崩溃

> ID：13333844
> 
> 赞同：1
> 
> 时间：2012-11-11T18:01:32.147
> 
> 标签：c++, boost

为什么当我使用这个命令行时会崩溃：“program -p 1”而不是“program --p 1”

我用 VS 2008 编译它并使用 boost 1.51。

```
options_description desc("XXX");
desc.add_options()("p", value<std::string>(), "pi")
    ("s", value<std::string>(), "es");

std::cout << desc << std::endl;

variables_map vm;
store(parse_command_line(argc, argv, desc), vm);
notify(vm);
if (vm.count("p"))
    cout << "p is: " << vm["p"].as<string>() << endl;

if (vm.count("s"))
    cout << "s is: " << vm["s"].as<string>() << endl; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-11T18:56:29.597

Boost 程序选项采用`--`默认选项开始字符序列。如果您想支持以单个字符开头*的“单字母”*选项，则`-`需要指定

```
desc.add_options()("p,p", value<std::string>(), "pi") 
```

我猜程序崩溃发生在您显示的代码行之后的某个地方。您应该调试（或使用进一步`cout`的语句）来更准确地确定崩溃点。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-11T18:59:36.927

好的，它因未处理的异常而崩溃：

```
Unhandled exception at 0x76dbc41f in test.exe: Microsoft C++ exception: boost::exception_detail::clone_impl<boost::exception_detail::error_info_injector<boost::program_options::unknown_option> > at memory location 0x0018efd8.. 
```

它基本上不认识你`-p`，所以阅读我发现它期望参数是长参数的文档。这就是为什么它需要并与`--p`.

这是修改后的源（可编译）

```
#include <boost/program_options.hpp>
#include <iostream> 
#include <string> 

int main(unsigned int argc, const char** argv) 
{ 
boost::program_options::options_description desc("XXX");

desc.add_options()
    ("p-arg,p", boost::program_options::value<std::string>(), "pi")
    ("s", boost::program_options::value<std::string>(), "es");

std::cout << desc << std::endl;

boost::program_options::variables_map vm;
boost::program_options::store(
            boost::program_options::parse_command_line(argc, argv, desc), vm);

boost::program_options::notify(vm);

if (vm.count("p-arg"))
    std::cout << "p is: " << vm["p-arg"].as<std::string>() << std::endl;

if (vm.count("s"))
    std::cout << "s is: " << vm["s"].as<std::string>() << std::endl;

} 
```

您需要进行异常处理`try-catch`以处理无法识别的程序选项，否则您可能会进一步崩溃。

# android - 如何使应用程序被所有屏幕分辨率接受

> ID：13333847
> 
> 赞同：0
> 
> 时间：2012-11-11T18:01:46.723
> 
> 标签：android, android-layout

> **可能重复：**
> [如何为所有分辨率创建 Android 应用程序？](https://stackoverflow.com/questions/6894662/how-to-create-android-applications-for-all-resolutions)

大家好，我正在开发一个 android 应用程序并在 htc sense xl 上运行它。但是当我在其他更小或更大的设备上运行它时，我的设计就不同了。我在清单中应用了支持屏幕大小的代码，但仍然没有变化。我的问题是，在 Eclipse 中，如果我将我的设计设置为高、低和中，我们得到了三个可绘制文件夹，它有什么改变吗？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T18:20:28.433

[您可以从developer.android.com](http://developer.android.com)上的[Supporting Multiple Screens](http://developer.android.com/guide/practices/screens_support.html)和[Designing for Multiple Screens](http://developer.android.com/training/multiscreen/index.html)开始阅读。

# sql - 试图找到在 2 个可变日期之间免费的车辆

> ID：13333852
> 
> 赞同：0
> 
> 时间：2012-11-11T18:02:21.957
> 
> 标签：sql, oracle

我试图找出在一对用户输入变量作为日期之间哪些车辆是空闲的（如果有的话）。

每辆用于旅行的车辆在其行中都有一个开始和结束日期，表示旅行的开始和结束时间，因此该车辆不可用。

到目前为止，我几乎得到了每个列出的注册，而不是任何类型的过滤结果。

```
SELECT  vehicle_registration FROM 
(select vehicle_registration
FROM trips
WHERE departure
 not BETWEEN :departure AND :return
and return 
not BETWEEN :departure AND :return)
group by vehicle_registration 
```

请问有什么我想念的线索吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T18:23:06.243

像这样的东西，虽然我可能把 >= 弄混了。假设车辆表和 vehicle_id 是主键/外键：

此方法的另一个好处是可以显示尚未预订旅行的车辆。

```
Select
  v.*
From
  vehicle v
Where
  Not Exists (
    Select
      'x'
    From
      trips r
    Where
      r.vehicle_id = v.vehicle_id and
      :return >= r.departure and
      :departure <= r.return
) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-11T18:23:51.977

您正在使用 AND，这意味着两个条件都必须为真。您需要使用 OR 代替：

```
select vehicle_registration
  from trips
 where departure not between :departure and :return
    or return not between :departure and :return 
```

另一方面，正如语法突出显示的那样，`return`不是来自列名的*坏*名。它是 Oracle 中的保留字，如果可以，您应该避免使用它。

# air - flash builder在打包时不显示所有图标，

> ID：13333853
> 
> 赞同：0
> 
> 时间：2012-11-11T18:02:24.780
> 
> 标签：air, flash-builder

少数组件按钮从“/src/icons”动态更新其图标，并且在调试中运行良好。在发布版本中，我注意到缺少一些图标。在包装（发布版本）中，它没有显示所有这些图标（缺失）。有什么具体原因吗？或想法？我试过 > 清洁项目。它从 bin 中删除垃圾并重新复制所有数据（仍然错过那些图标）。这意味着，不知何故，它无法理解这些图标或与这些图标相关联。

问：我们可以强制打包对话框加载我们的图标吗？问：我错过了什么严重的事情吗？提前感谢您的时间和回复..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-09T17:50:27.850

确保您没有在任何类中嵌入（使用 [Embed] 标签）任何这些图标。我相信，如果您在源代码中嵌入图像，Flash Builder 会自动假定您在运行时不再需要它，因为该资产现在已嵌入到您的 swf 中，从某种角度来看，这似乎是合适的。

我通常尝试遵循的规则是：如果我要嵌入一些东西，我将它放在 src 文件夹之外的 lib 文件夹中。如果资产需要在运行时嵌入并加载而不是 2 个副本；一个在lib中，另一个在src中。

# javascript - Node.js - 解析简单的 JSON 对象并访问键和值

> ID：13333854
> 
> 赞同：10
> 
> 时间：2012-11-11T18:02:25.100
> 
> 标签：javascript, json, node.js, object, asynchronous

我是 Node 新手，正在努力访问一个简单的 JSON 对象。我的 request.body 将具有类似于以下内容的 JSON 内容：

```
{
    "store_config": [
        {
            "name": "hello",
            "name2": "world"
        }
    ]
} 
```

“store_config”值将始终存在，但其中的键和值可以是任何值。

我如何遍历键和值来访问每个？我还想以异步方式处理每个。

欣赏任何想法或方向。

* * *

更新

```
console.log(typeof(request.body)); 
```

回报：`Object`

```
parsedBody = JSON.parse(request.body); 
```

返回：

```
SyntaxError: Unexpected token o
    at Object.parse (native) 
```

* * *

更新 2 - 进一步调试：

当我尝试遍历数组时，只有一个值：

```
request.body.store_config.forEach(function(item, index) {
  console.log(index);
  console.log(request.body.store_config[index]);

}); 
```

返回：

```
0
{ name: 'hello', name2: 'world' } 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-11-11T18:08:35.383

如果`request.body`已经被解析为 JSON，您可以将数据作为 JavaScript 对象访问；例如，

```
request.body.store_config 
```

否则，您需要使用以下方式解析它`JSON.parse`：

```
parsedBody = JSON.parse(request.body); 
```

由于`store_config`是一个数组，因此您可以对其进行迭代：

```
request.body.store_config.forEach(function(item, index) {
  // `item` is the next item in the array
  // `index` is the numeric position in the array, e.g. `array[index] == item`
}); 
```

如果您需要对数组中的每个项目进行异步处理，并且需要知道何时完成，我建议您看一下 async 帮助程序库，[例如 async](https://github.com/caolan/async) ——特别是，[`async.forEach`它可能对您有用](https://github.com/caolan/async#forEach)：

```
async.forEach(request.body.store_config, function(item, callback) {
  someAsyncFunction(item, callback);
}, function(err){
  // if any of the async callbacks produced an error, err would equal that error
}); 
```

[在这个截屏视频中](http://nodecasts.net/episodes/5-thinking-asynchronously)，我稍微讨论了使用`async`库的异步处理。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-11T18:07:13.553

像这样的东西：

```
config = JSON.parse(jsonString);
for(var i = 0; i < config.store_config.length; ++i) {
   for(key in config.store_config[i]) {
      yourAsyncFunction.call(this, key, config.store_config[i][key]);
   }
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-11-11T18:09:53.507

要将此刺痛转换为实际对象，请使用`JSON.parse`. 您可以像使用数组一样迭代 Javascript 对象。

```
config = JSON.parse(string).store_config[0]
foreach (var key in config) {
    value = config[key]
} 
```

# image - 缓存图像但更新更改

> ID：13333855
> 
> 赞同：5
> 
> 时间：2012-11-11T18:02:32.200
> 
> 标签：image, .htaccess, caching

我正在使用这样的链接存储和缓存图像

```
http://example.com/1.jpg
http://example.com/2.jpg 
```

用户可以修改和覆盖`1.jpg`或`2.jpg`. 所以我想缓存所有图像，但更新刚刚被覆盖的图像文件的缓存。现在我正在使用`.htaccess`缓存方法

```
<IfModule mod_expires.c>
ExpiresActive On
<FilesMatch "(?i)^.*\.(jpg|jpeg|png)$">
ExpiresDefault "access plus 1 year"
</FilesMatch>
</IfModule> 
```

但是即使用户覆盖了文件，使用这种方法图像仍然保持不变。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-20T23:17:41.193

展望未来，[ETag](http://en.wikipedia.org/wiki/HTTP_ETag)应该可以毫不费力地满足您的需求。ETags 应该默认工作，所以你真的不需要做任何事情，但是为了避免在多服务器环境中出现问题，你可以配置你的 ETags 来计算文件大小和最后修改的时间戳。例如，将现有指令替换为您`.htaccess`或 Apache 配置中的以下行：

```
FileETag MTime Size 
```

当图像更改时，ETag 将有效地自动“过期”缓存的图像。缺点是浏览器仍然会在每个请求中查询资源，因此它的效率比您使用的过期指令低一点。另一方面，ETags 避免了您描述的问题。

但是，如果您已经使用了问题中描述的缓存指令之一并将`Expires`值设置为将来的某个值，那么过去请求该文件的任何浏览器都不会在一段时间内再次检查它。您可以通过`?cache=123`在 URL 中附加一个简单的查询字符串来解决这个问题，以使其与众不同（从而绕过缓存）。那么以后就可以依赖ETag机制了。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-21T03:02:53.437

问题可能不在服务器上，而在浏览器上。浏览器不会检查服务器是否对图像进行了更改。你所做的并不能完全解决这个问题。

以下将告诉浏览器始终检查服务器是否有更改。

```
<IfModule mod_headers.c>
  <FilesMatch "(?i)^.*\.(jpg|jpeg|png)$">
  Header set Cache-Control "max-age=0"
  </FilesMatch>
</IfModule> 
```

请注意，这会使您的网站在访问这些图像时变慢。文件仍将被缓存，但浏览器将检查服务器以查看它们是否已更改（If-Modifed-Since）。增加 max-age（以秒为单位）以牺牲陈旧性为代价提高性能。

（顺便说一句，“max-age=0, must-revalidate”是一个更好的值，但是浏览器错误地实现了规范。must-revalidate 可能会禁用某些浏览器和代理中的缓存。）

另请参阅[https://stackoverflow.com/a/1383359/1205867](https://stackoverflow.com/a/1383359/1205867)

# javascript - 如何使该功能只运行一次？

> ID：13333860
> 
> 赞同：-1
> 
> 时间：2012-11-11T18:03:11.303
> 
> 标签：javascript, jquery

为给定的一组DOM元素中的每一个执行的第一个脚本，附加到第二个DOM脚本的第一个元素。

**脚本一：**

```
function ptmedia(){
$('.ptmcss').eq(0).html('<div class="ptmcss"></div>')
.append('<div class="append"><script type="text/javascript" src="script2.js"></script></div>');
$('.spbin').each(function(){
if($(this).children().attr('class').indexOf('ptmd')!==-1){
$(this).addClass('ptmedia');ptmedia();} 
```

脚本二进行跨域查询，其实现执行指定的功能**(z)**。 **脚本二**：

```
$.getJSON('http://example.com?callback=?',function(z){alert(z.query+'Some text');} 
```

由于脚本多次为第一，因此函数**(z)**保持相同的次数。如何使函数**(z)**只运行一次？谢谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T18:06:41.203

您在寻找 jquery **.one**语句吗？ [http://api.jquery.com/one/](http://api.jquery.com/one/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-11T18:16:54.860

检查脚本是否已经附加，如果是，则不允许它运行。

```
if( $('.append').length <= 1 ) {
    $.getJSON('http://example.com?callback=?',function(z){alert(z.query+'Some text');}
} 
```

# java - 在一个 Fat Jar 中嵌入带有 App 的 Tomcat

> ID：13333867
> 
> 赞同：8
> 
> 时间：2012-11-11T18:03:55.177
> 
> 标签：onejar, java, tomcat, build, jar, onejar

我希望将 Tomcat*和*我的网络应用程序组合/嵌入为[onejar](/questions/tagged/onejar "显示标记为“onejar”的问题") aka fat jar，但我不确定它是否可能。Jetty可以[使用 Maven Shade 插件](http://dropwizard.codahale.com/getting-started/#building-fat-jars)和[Winstone](https://stackoverflow.com/a/6250460/318174)，但我尝试了与 Tomcat 7 类似的操作，但无法正确加载。目标是能够执行以下操作：`java -jar mywebapp.jar`.

问题是 Tomcat 想要从文件系统而不是类路径加载东西。也就是说，您可以嵌入 Tomcat，但它希望您的 WAR 文件可以作为文件使用。

[我在以前的SO Posts 中](https://stackoverflow.com/questions/640022/howto-embed-tomcat-6)尝试了许多嵌入 Tomcat 6 & 7 的技术。虽然我可以嵌入并启动它，但它无法访问我的应用程序。

我想一种选择是让 JAR 在启动时自行解压缩，以便文件系统上的文件`AppBase`。`DocBase`我还没有尝试过，但会。

我终于找到了一个重复的问题：[嵌入了 Tomcat 的自包含战争文件？](https://stackoverflow.com/questions/7903563/self-contained-war-file-with-tomcat-embedded)（请投票以关闭为重复）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-19T22:49:15.910

我不知道我是怎么一直错过这个的，但是 Tomcat Maven 插件现在支持生成可执行的 WAR：

[http://tomcat.apache.org/maven-plugin-2.0/executable-war-jar.html](http://tomcat.apache.org/maven-plugin-2.0/executable-war-jar.html)

**更新**如果你需要 Tomcat 8，你需要一个特殊的配置。您**必须使用 2.0 版本**的插件，因为 2.2 Tomcat 7 插件不起作用，您需要第三方插件[tomcat8-war-runner](https://github.com/NitorCreations/tomcat8-war-runner)。下面我附上了您需要的 Maven 配置，它还允许您选择所需的正确版本的 Tomcat 8（`tomcat.version`属性）。

Tomcat8 maven 插件处于乱七八糟的状态，仍然没有发布（请去 jira 投票并投诉他们完成它）。

最后，这个 maven 插件方法的一个主要警告是插件伪嵌入。也就是说，您的应用程序不会在与 Tomcat 相同的类加载器中运行，而是在初始化期间实际部署。这种方法有利有弊。

另一方面， Spring Boot 和[Oracle 的这个示例将在与您的应用程序相同的类加载器中运行 Tomcat（我认为它是真正嵌入的）。](http://www.oracle.com/webfolder/technetwork/tutorials/obe/java/basic_app_embedded_tomcat/basic_app-tomcat-embedded.html)

```
 <plugin>
      <groupId>org.apache.tomcat.maven</groupId>
      <artifactId>tomcat7-maven-plugin</artifactId>
      <version>2.0</version>
      <configuration>
        <port>${tomcat.port}</port>
        <path>/</path>
      </configuration>
      <executions>
        <execution>
          <id>tomcat-run</id>
          <goals>
            <goal>exec-war-only</goal>
          </goals>
          <phase>package</phase>
          <configuration>
            <path>/</path>
            <port>${tomcat.port}</port>
            <attachArtifactClassifierType>war</attachArtifactClassifierType>
            <mainClass>org.apache.tomcat.maven.runner.Tomcat8RunnerCli</mainClass>
            <extraDependencies>
              <extraDependency>
                <groupId>com.nitorcreations</groupId>
                <artifactId>tomcat8-war-runner</artifactId>
                <version>1.0</version>
              </extraDependency>
            </extraDependencies>
          </configuration>
        </execution>
      </executions>
      <dependencies>
        <dependency>
          <groupId>org.apache.tomcat.embed</groupId>
          <artifactId>tomcat-embed-core</artifactId>
          <version>${tomcat.version}</version>
        </dependency>
        <dependency>
          <groupId>org.apache.tomcat</groupId>
          <artifactId>tomcat-util</artifactId>
          <version>${tomcat.version}</version>
        </dependency>
        <dependency>
          <groupId>org.apache.tomcat</groupId>
          <artifactId>tomcat-coyote</artifactId>
          <version>${tomcat.version}</version>
        </dependency>
        <dependency>
          <groupId>org.apache.tomcat</groupId>
          <artifactId>tomcat-api</artifactId>
          <version>${tomcat.version}</version>
        </dependency>

        <dependency>
          <groupId>org.apache.tomcat</groupId>
          <artifactId>tomcat-jdbc</artifactId>
          <version>${tomcat.version}</version>
        </dependency>

        <dependency>
          <groupId>org.apache.tomcat</groupId>
          <artifactId>tomcat-dbcp</artifactId>
          <version>${tomcat.version}</version>
        </dependency>

        <dependency>
          <groupId>org.apache.tomcat</groupId>
          <artifactId>tomcat-servlet-api</artifactId>
          <version>${tomcat.version}</version>
        </dependency>

        <dependency>
          <groupId>org.apache.tomcat</groupId>
          <artifactId>tomcat-jsp-api</artifactId>
          <version>${tomcat.version}</version>
        </dependency>

        <dependency>
          <groupId>org.apache.tomcat</groupId>
          <artifactId>tomcat-jasper</artifactId>
          <version>${tomcat.version}</version>
        </dependency>

        <dependency>
          <groupId>org.apache.tomcat</groupId>
          <artifactId>tomcat-jasper-el</artifactId>
          <version>${tomcat.version}</version>
        </dependency>

        <dependency>
          <groupId>org.apache.tomcat</groupId>
          <artifactId>tomcat-el-api</artifactId>
          <version>${tomcat.version}</version>
        </dependency>

        <dependency>
          <groupId>org.apache.tomcat</groupId>
          <artifactId>tomcat-catalina</artifactId>
          <version>${tomcat.version}</version>
        </dependency>

        <dependency>
          <groupId>org.apache.tomcat</groupId>
          <artifactId>tomcat-tribes</artifactId>
          <version>${tomcat.version}</version>
        </dependency>

        <dependency>
          <groupId>org.apache.tomcat</groupId>
          <artifactId>tomcat-catalina-ha</artifactId>
          <version>${tomcat.version}</version>
        </dependency>

        <dependency>
          <groupId>org.apache.tomcat</groupId>
          <artifactId>tomcat-annotations-api</artifactId>
          <version>${tomcat.version}</version>
        </dependency>

        <dependency>
          <groupId>org.apache.tomcat</groupId>
          <artifactId>tomcat-juli</artifactId>
          <version>${tomcat.version}</version>
        </dependency>

        <dependency>
          <groupId>org.apache.tomcat.embed</groupId>
          <artifactId>tomcat-embed-logging-juli</artifactId>
          <version>${tomcat.version}</version>
        </dependency>
        <dependency>
          <groupId>org.apache.tomcat.embed</groupId>
          <artifactId>tomcat-embed-logging-log4j</artifactId>
          <version>${tomcat.version}</version>
        </dependency>
      </dependencies>
    </plugin> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-07-10T14:13:23.260

我做了一个[关于嵌入式 Tomcat JAR](https://www.theserverside.com/tutorial/How-to-embed-Tomcat-and-Java-web-apps-in-an-executable-JAR)的教程，并希望创建一个尽可能小的 POM 文件来创建一个可执行的 JAR。我不想要任何环境变量或多余的依赖项——只是最基本的。这是我想出的：

**Tomcat 插件的 POM 配置**

```
<?xml version="1.0" encoding="UTF-8"?>
<project>

  <!-- create an executable jar file example -->
  <modelVersion>4.0.0</modelVersion>
  <groupId>com.mcnz.maven</groupId>
  <artifactId>javawebapp</artifactId>
  <version>1.0-embedded</version>
  <packaging>war</packaging>

  <dependencies>
    <dependency>
      <groupId>junit</groupId>
      <artifactId>junit</artifactId>
      <version>4.11</version>
      <scope>test</scope>
    </dependency>
  </dependencies>

   <!-- Maven embedded Tomcat server example -->
   <build>
      <finalName>javawebapp</finalName>
      <pluginManagement>
           <plugins>
            <plugin>
               <groupId>org.apache.tomcat.maven</groupId>
               <artifactId>tomcat7-maven-plugin</artifactId>
               <version>2.1</version>
               <configuration>
                 <!-- context root for Java web apps -->
                 <path>/tutorial</path>
                 <!-- name of executable jar file -->
                 <finalName>executable.jar</finalName>
               </configuration>
            </plugin>
         </plugins>
      </pluginManagement>
   </build>
   <!-- end of embedded Tomcat server tutorial -->

</project> 
```

**使用 Maven 运行 tomcat7 插件**

maven命令共同创建嵌入式jar如下：

```
$ mvn clean install tomcat7:exec-war-only 
```

下面是运行命令时 maven 创建的项目结构：

[![Maven 项目结构](../Images/610b0fb7e5652b3102e4ae1cd2add980.png)](https://i.stack.imgur.com/vISfF.png)

**运行 JAR**

然后我使用以下命令运行 JAR：

```
$ java -jar executable.jar 
```

**更多信息**

这些是基础。我还发布了一个关于[如何创建嵌入式 Tomcat JA](https://www.theserverside.com/tutorial/How-to-embed-Tomcat-and-Java-web-apps-in-an-executable-JAR) R 的视频，供任何有兴趣了解从头到尾的所有步骤的人使用。

# c++ - 中断代码执行

> ID：13333868
> 
> 赞同：2
> 
> 时间：2012-11-11T18:03:57.950
> 
> 标签：c++, algorithm, loops, components, break

我有以下基于组件的架构。如何从特定组件的更新功能中跳出更新组件的管理器循环？

零件

```
class Component
{
    virtual void Update() = 0;
}; 
```

经理

```
class Manager
{
    vector<Component*> List;
    void Add(Component* cpnt)
    {
        List.push_back(cpnt);
    }
    void Loop()
    {
        while(1)
        {
            for (auto i = List.begin(); i != List.end(); i++)
                i->Update();
        }
    }
}; 
```

例子

```
class Example : public Component
{
    void Update()
    {
        // want to break out of mgr's while loop from here
    }
};

int main()
{
    Manager mgr;
    mgr.Add(new Example());
    mrg.Loop();
} 
```

（请注意，为简单起见，我在此示例中忽略了访问器。）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-11T18:06:36.037

您可以从循环中抛出异常`Update`并将其捕获，也可以`break`根据`Update`.

你选择哪一个取决于逻辑。如果跳出循环是逻辑错误的结果，请使用异常。

如果它是逻辑的一部分，请使用返回。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-11T18:06:12.363

您可以根据`Update`返回值不希望继续循环。

您也可以使用例外。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-11T18:07:49.973

使`Update()`返回一个指示是否停止的代码，并在`Manager`循环中检查它。或者抛出一个异常，这更像`C++`是，如果爆发不是经常发生的事情。

也就是说，使用以下循环更改`virtual void Update()`为或类似：`virtual bool Update()``Manager`

```
bool ok = true;
while(ok)
    for (auto i = List.begin(); i != List.end() && ok; i++)
        ok = i->Update(); 
```

或者`Update()`抛出异常：

```
void Update()
{
    do stuff;
    if(bad) throw SomeException();
} 
```

并将`Manager`循环包装在`try`/`catch`子句中。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-11-11T18:06:36.910

如果你可以改变`Update`，让它返回一个`bool`告诉经理它是否应该中断。

```
 while(1)
    {
        for (auto i = List.begin(); i != List.end(); i++)
            if( !i->Update() )
                 goto end_loop;
    }
    end_loop: 
```

我曾经退出外循环，如果你害怕，`goto`可以使用变量来制作双精度。`break``goto`

如果`return`在`Loop`.

# ruby - 使用控制台为所有用户设置角色

> ID：13333876
> 
> 赞同：1
> 
> 时间：2012-11-11T18:04:32.207
> 
> 标签：ruby, ruby-on-rails-3, console, cancan

我想要做的是将所有用户的角色设置为“用户”，但我没有过多地使用控制台或 Ruby，这从我在下面尝试使用它们的方式中应该很清楚。

我曾希望这样的事情会奏效：

```
u=User.all
u.role.name="user" 
```

但是，显然，这不起作用，我不知道如何进行。

我将 CanCan 与能力模型一起使用，并通过角色中的“名称”列设置角色名称。用户通过分配拥有许多角色

用户.rb

```
has_many :assignments
has_many :roles, :through => :assignments 
```

以下是所有内容的设置方式：

赋值.rb

```
class Assignment < ActiveRecord::Base
  belongs_to :user
  belongs_to :role
end 
```

能力.rb

```
class Ability
  include CanCan::Ability

  def initialize(user)
    user ||= User.new # in case of guest
    if user.has_role? :admin
      can :manage, :all
    #else
     # can :read, :all
  end
  end
end 
```

角色.rb

```
class Role < ActiveRecord::Base
  attr_accessible :name
  has_and_belongs_to_many :users, :join_table => :users_roles
  belongs_to :resource, :polymorphic => true
end 
```

角色架构

```
 # == Schema Information
  #
  # Table name: roles
  #
  #  id            :integer         not null, primary key
  #  name          :string(255)
  #  resource_id   :integer
  #  resource_type :string(255)
  #  created_at    :datetime        not null
  #  updated_at    :datetime        not null
  # 
```

您能告诉我如何使用控制台为所有用户设置角色名称吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-11T18:09:38.997

使用[`update_all`](http://api.rubyonrails.org/classes/ActiveRecord/Relation.html#method-i-update_all)：

```
role = Role.find_by_name 'user'
User.update_all :role => role 
```

但是，`update_all`不会触发 ActiveRecord 回调，因此如果您需要这些回调，则需要遍历所有用户：

```
role = Role.find_by_name 'user'
User.find_each do |user|
  user.role = role
  user.save
end 
```

[`User.find_each`](http://api.rubyonrails.org/classes/ActiveRecord/Batches.html#method-i-find_each)如果您有超过 1000 个用户，则分批加载用户以最大程度地减少内存使用量。

# iphone - 键盘出现时如何禁用背景

> ID：13333879
> 
> 赞同：0
> 
> 时间：2012-11-11T18:05:03.040
> 
> 标签：iphone, objective-c, ios, uitextfield

我想在 UITextField 键盘出现时禁用应用程序背景。我想创建与操作表相同的效果。可能吗？谢谢，路易吉。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-11T18:13:34.473

一种选择是添加覆盖整个视图控制器视图的清晰（或着色）视图。这将出现在键盘下方，因此您仍然可以键入。但是视图会阻止与视图控制器的其余部分（包括文本字段）的任何触摸交互。

您可以实现该`UITextFieldDelegate`方法`textFieldDidBeginEditing:`，以便添加视图和`textFieldDidEndEditing:`方法，以便删除视图。

当然，您需要确保键盘输入允许您关闭键盘，否则视图将永远不会被删除。

顺便说一句 - 你为什么要这样做？这是非常不寻常的。

# java - 给定根文件夹时，在java字符串数组中创建包含路径

> ID：13333882
> 
> 赞同：0
> 
> 时间：2012-11-11T18:05:23.727
> 
> 标签：java, arrays, string, path, root

我的计算机中有一个文件夹（一些根文件夹），其中包含很多文件夹和文件。我需要创建一个字符串数组，其中包含文件的所有路径（从根文件夹开始）（我的意思是只有叶子 = 文件，而不是文件夹）。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T18:12:23.967

使用标准 Java SE 类和递归，您可以这样做：

```
import java.io.File;

public class Test {
    public static void main(String[] args) {
        File root = new File("D:\\Downloaded"); // path to root folder
        process(root);
    }

    private static void process(File path) {
        File[] subs = path.listFiles();
        if (subs != null) {
            for (File f : subs) {
                if (f.isDirectory()) {
                    process(f);
                } else {
                    System.out.println(f.getAbsolutePath());
                }
            }
        }
    }
} 
```

请注意，`System.out.println()`您可能不想将路径放入 some `ArrayList`.

# c++ - C++ 和 R 接口，获取输出

> ID：13333884
> 
> 赞同：6
> 
> 时间：2012-11-11T18:05:41.037
> 
> 标签：c++, r, rcpp

我刚开始学习 R，因此陷入了看似琐碎的问题。我试图弄清楚值是如何在 R 中输出的。在 C++ 中，我们只是使用返回变量，但 R 似乎不是这种情况。假设我有一个接受 4 个输入参数的函数，将这些参数传递给执行所需计算的 c++ 函数，现在如果我想在 R 中加载这个 myfun 并从 c++ 函数获取输出，我需要做什么？以下是我尝试使用的模板。

```
extern "C" {
   SEXP myfun(SEXP S, SEXP A, SEXP B, SEXP C) { //will call this function from R.
     SEXP rate, dir, list, list_names; //declare variables

     PROTECT( rate = allocMatrix(REALSXP, 10, 2) ); //allocate 10x2 matrix of double type?
     PROTECT( dir = allocVector(INTSXP, 10) ); //allocated vector(10) of int type?

     double* p_rate = REAL(rate); //why do I need pointers? 
     int* p_dir = INTEGER(dir); 
```

//这里我调用一个计算`vector<vector<double> > someVal`和的C++函数`vector<int> someVal2`。

现在我想将这些值传递给速率和目录。

```
 for(int i =0; i < 10; i++){
      rate[i][0] = someVal1[i][0];
      rate[i][1] = someVal1[i][1];
      dir[i] = someVal2[i]; 
  } 
```

但编译器不喜欢它。在这种情况下，我不确定如何使用 p_rate 和 p_dir 指针。

另外，我不太明白为什么下面的代码是这样的。它似乎将字符串、rate 和 dir 传递给 list_names，并将值传递给 rate 和 dir。为什么我们不能简单地做 cout 并打印所需的值？

```
 char *tag[2] = {"rate","dir"};
   PROTECT(list_names = allocVector(STRSXP ,2));
   SET_STRING_ELT(list_names, 0, mkChar(tag[0]));
   SET_STRING_ELT(list_names, 1, mkChar(tag[1]));
   PROTECT(list = allocVector(VECSXP ,2));
   SET_VECTOR_ELT(list, 0, rate);
   SET_VECTOR_ELT(list, 1, dir);
   setAttrib(list, R_NamesSymbol , list_names);

   UNPROTECT(8);
   return (list);
} 
```

我没有得到在 R 中返回变量的基本想法，这似乎很混乱。如果有人能指出我解释这些东西的适当资源，我将不胜感激。

提前感谢您的帮助！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-11T18:09:35.807

如果您已经熟悉 C++，您可能会发现我们用于无缝 R 和 C++集成的[Rcpp项目很有用。](http://dirk.eddelbuettel.com/code/rcpp.html)它包含*大量*文档和示例，此外，CRAN 现在有超过 80 个使用它的包，这提供了另一个大型示例语料库。

您可以从与我们的[JSS 论文](http://www.jstatsoft.org/v40/i08)相对应的“简介”小插图开始，并在`[rcpp]`此处仔细阅读标签。

否则，您将回到更简单且仅基于 C 的 R API。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-12T08:40:53.383

正如我们在回答您[之前的问题](https://stackoverflow.com/questions/13324664/define-a-matrix-in-r-and-pass-it-to-c)时所说的那样，给[Rcpp](http://dirk.eddelbuettel.com/code/rcpp.html)一个机会，并消除代码中的所有问题。

```
#include <Rcpp.h>
using namespace Rcpp ;

void yourCode( std::vector< std::vector<double> >& someVal, 
               std::vector<double>& someVal2 ){ ... }

extern "C" SEXP myfun() { 
    NumericMatrix rate(10, 2); 
    NumericVector dir(10) ;

    std::vector< std::vector<double> > someVal ;
    std::vector< double > someVal2 ;

    // call whatever function that fills someVal and someVal2
    yourCode( someVal, someVal2 ) ;

    // fills rate and dir
    for(int i =0; i < 10; i++){
      rate(i, 0) = someVal1[i][0];
      rate(i, 1) = someVal1[i][1];
      dir[i] = someVal2[i]; 
    }

    // structure the output
    List result = List::create( 
        _["rate"] = rate,
        _["dir"] = dir
    ) ;

    return result ;

} 
```

# c# - 图像相对路径在一个项目中有效，但在其他项目中无效

> ID：13333888
> 
> 赞同：1
> 
> 时间：2012-11-11T18:05:59.530
> 
> 标签：c#, wpf

下面的代码适用于另一个项目。如果我包含绝对网址，也在第二个中。我的项目文件夹中有 res 文件夹。有什么不同？

```
 BitmapImage myBitmapImage = new BitmapImage();
         myBitmapImage.BeginInit();
         myBitmapImage.UriSource = new Uri(@"\res\arato.png", UriKind.RelativeOrAbsolute);
         myBitmapImage.EndInit();

         var img = new Image();
         img.Source = myBitmapImage;
         img.Margin = new Thickness(0, 0, 0, 0);

         canvas.Children.Add(img); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T18:10:24.303

使用[Pack URI](http://msdn.microsoft.com/en-us/library/aa970069.aspx)提供相对或绝对路径。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-11T18:20:22.763

解决方案是：我必须将图片拖到 Visual Studio 中的文件夹，而不是文件资源管理器中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-11T21:37:55.917

这可能与文件的构建操作有关。如果您在 Visual Studio 中查看文件的属性，您应该会看到生成操作。Wpf 与“资源”配合得最好，**而**与“嵌入式资源”配合得不好。遗憾的是，嵌入式资源的名称更直观（至少对我而言），所以当我第一次学习 WPF 时，我遇到了麻烦。

# objective-c - 从 system() 获取 XML

> ID：13333890
> 
> 赞同：0
> 
> 时间：2012-11-11T18:06:17.863
> 
> 标签：objective-c, xml

我有这个返回 xml 数据的 shell 命令。我是 Objective-C 的新手。我想使用该`system()`函数加载一些 XML。

任何人都可以帮助我或指出我正确的方向吗？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T20:34:23.720

你不能使用`system()`它，因为它不会从命令返回任何数据给你。相反，程序的所有输出都将发送到终端。

Cocoa 做到这一点的方法是[`NSTask`](http://developer.apple.com/documentation/Cocoa/Reference/Foundation/Classes/NSTask_Class/).

你需要：

*   使用`setLaunchPath`和可选`setArguments`地指定要运行的程序
*   传递`NSPipe`给`setStandardOutput`
*   `launch`该程序
*   从管道中读取，直到输入结束

# forms - Gumby 框架在行上的三个文本框？

> ID：13333891
> 
> 赞同：1
> 
> 时间：2012-11-11T18:06:24.347
> 
> 标签：forms, validation, frameworks, gumby-framework

这可能是一个愚蠢的问题，但我认为关于表单和验证的 gumby 框架非常缺乏文档。如何正确地在一行中获取三个文本框。我尝试过的所有验证插入符号都搞砸了。我想要数量、产品编号和 des 在一行上。

虽然在其中，任何人都没有如何使用此框架验证 zip 和电话号码？我找不到任何关于他们验证的文件。

```
<dl class="field row">
     <dt class="text"><input name="qty" required type="text" placeholder="Quantity" /></dt>
     <dd class="msg"><span class="caret"></span>Enter quantity.</dd>
</dl>
<dl class="field row">
     <dt class="text"><input name="productnum" required type="text" placeholder="Product Number" /></dt>
     <dd class="msg"><span class="caret"></span>Enter product number.</dd>
</dl>
<dl class="field row">
     <dt class="text"><input name="desription" required type="text" placeholder="Description" /></dt>
     <dd class="msg"><span class="caret"></span>Enter product description.</dd>
</dl> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T17:24:39.810

我不得不手动执行验证，因为我无法让 Gumby 验证工作。我的 jQuery 看起来像这样：

```
// Form validation
$('input').blur(function(){
    if( ($(this).data('form') == 'required') && ( $(this).val() == '' ) ){
        $(this).parents('.field').addClass('error');
    }
}); 
```

...我的内联字段看起来像这样：

```
<div class="row">                  
  <dl class="field inline textfield">
    <dt class="text">
      <input name="company_phone" type="text" placeholder="Company Phone" data-form="required" />
    </dt>
    <dd class="msg"><span class="caret"></span>Please enter a valid phone number</dd>
  </dl>
...
</div><!-- /.row --> 
```

为了让插入符号很好地排列，您可能想尝试将您的各个 .field 元素包装在 div.row 中！

如果你决定走这条路，你有一个可点击的验证功能——编写你自己的正则表达式来匹配邮政编码可能看起来像这样：

```
// Form validation
$('input').blur(function(){
    if( ($(this).attr('name') == 'zipcode') && ( !$(this).val().match(/[0-9]{5}/) ) ){
            $(this).parents('.field').addClass('error');
    }
}); 
```

当然，这是一个非常简单的例子。祝你好运 ：）

# java - 序列化和继承

> ID：13333895
> 
> 赞同：1
> 
> 时间：2012-11-11T18:07:02.323
> 
> 标签：java

以下问题（Sierra Bates SCJP 指南）的答案是**pcp**：

```
import java.io.*;

class Player {
    Player() { System.out.print("p"); }
}

class CardPlayer extends Player implements Serializable {
    CardPlayer() { System.out.print("c"); }

    public static void main(String[] args) {
        CardPlayer c1 = new CardPlayer();

        try {
            FileOutputStream fos = new FileOutputStream("play.txt");
            ObjectOutputStream os = new ObjectOutputStream(fos);
            os.writeObject(c1);
            os.close();

            FileInputStream fis = new FileInputStream("play.txt");
            ObjectInputStream is = new ObjectInputStream(fis);
            CardPlayer c2 = (CardPlayer) is.readObject();
            is.close();
        } catch (Exception x ) { }
    }
} 
```

所以它得到 pcp ：

> "pc" 打印为 Cardplayer 的序列化状态 - 继承的 p 和 Cardplayer 的 c。输出中的第三个 p 是超类 Player 构造函数运行的结果——因为它不可序列化——打印 p。

答案是这样得出的，不是吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-11T18:15:51.540

答案是肯定的。

[可序列化的 Java 文档](http://docs.oracle.com/javase/6/docs/api/java/io/Serializable.html)

> 为了允许序列化不可序列化类的子类型，子类型可以负责保存和恢复超类型的公共、受保护和（如果可访问）包字段的状态。仅当它扩展的类具有可访问的**无参数构造函数来初始化类的 state**时，子类型才可以承担此责任。如果不是这种情况，则声明类 Serializable 是错误的。将在运行时检测到错误

# perl - 在 Perl 中创建包含标题、文本和表格的 PDF 报告

> ID：13333909
> 
> 赞同：1
> 
> 时间：2012-11-11T18:08:37.307
> 
> 标签：perl, pdf, report

我正在尝试创建具有以下要求的报告：

1.  每页都有标题（例如作者姓名，报告日期）。
2.  然后会有一些描述文档的文本（例如设备名称、IP 等）
3.  然后会有一个只有几页的表格。

我遇到的问题是，每当我结合第 2 步和第 3 步时，每一个都是单独的页面。我希望表格就在文本之后。

我已经尝试过 PDF::API2、PDF::Table 和 PDF:Reuse（将这两个部分结合起来）。

它们中的每一个仍然出现在单独的页面上。有什么建议么？

这是代码：使用 PDF::API2；使用 PDF::Table；使用 PDF::重用；

```
my $pdftable = new PDF::Table;
my $pdf = new PDF::API2(-file => "1.pdf");
my $page = $pdf->page;

$hdr_props = 
{
        # This param could be a pdf core font or user specified TTF.
        #  See PDF::API2 FONT METHODS for more information
        font       => $pdf->corefont("Times", -encoding => "utf8"),
        font_size  => 10,
        font_color => '#006666',
        bg_color   => 'gray',
       repeat     => 1,    # 1/0 eq On/Off  if the header row should be repeated to every new       page
    };

# some data to layout
my $some_data =[
["1 Lorem ipsum dolor",
"Donec odio neque, faucibus vel",
"consequat quis, tincidunt vel, felis."],
["Nulla euismod sem eget neque.",
"Donec odio neque",
"Sed eu velit."],
["Nulla euismod sem eget neque.",
"Donec odio neque",
"Sed eu velit."],
["Nulla euismod sem eget neque.",
"Donec odio neque",
"Sed eu velit."],
["Nulla euismod sem eget neque.",
"Donec odio neque",
"Sed eu velit."],
#... and so on
];

   $left_edge_of_table = 50;
   # build the table layout
  $pdftable->table(
    # required params
    $pdf,
    $page,
    $some_data,
    x => $left_edge_of_table,
    w => 495,
    start_y => 750,
    next_y  => 700,
    start_h => 300,
    next_h  => 500,
    # some optional params
     padding => 5,
     padding_right => 10,
     background_color_odd  => shift @_ || "#FFFFFF",
     background_color_even => shift @_ || "#FFFFCC", #cell background color for even rows
     header_props   => $hdr_props, # see section HEADER ROW PROPERTIES

   );

  $pdf->saveas();

# Open an existing PDF file
$pdf = new PDF::API2(-file => "2.pdf");
$page = $pdf->page;

# Add a built-in font to the PDF
$font = $pdf->corefont('Helvetica-Bold');

# Add some text to the page
$text = $page->text();
$text->font($font, 20);
$text->translate(200, 700);
text->text('Hello World!');

  # Save the PDF
  $pdf->saveas();

prFile("report.pdf");

prDoc("2.pdf");
prDoc("1.pdf");

prEnd(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T19:55:22.517

只是我的2美分。

重新考虑你的代码，它说：

```
# Open an existing PDF file
$pdf = new PDF::API2(-file => "2.pdf");
$page = $pdf->page; 
```

您不是要“打开现有的 PDF”，而是要定义您希望能够保存 PDF 的位置（实际保存它是另一项任务）。

然后你刚刚添加了一个新页面。注意：每次打电话时`$pdf->page`，您的 PDF 中都会添加一个新的空白页。

所以继续使用已经定义的`$page`并继续使用 PDF::Table。

# java - hashtable类中的方法需要返回枚举类型

> ID：13333910
> 
> 赞同：2
> 
> 时间：2012-11-11T18:08:37.793
> 
> 标签：java, enums, key, hashtable

我已经搜索过，似乎无法找到答案。我了解枚举类型是什么，但我无法确定如何在函数中创建和返回一个。基本上，我有一个功能：

```
public Enumeration getKeys(){
    //Returns an Enumeration of valid keys in the hash table
} 
```

需要返回一个枚举。

我的哈希表包含一个键对象和一个值对象，并且我已经实现了诸如 containsKey(Object key) 和 retrieve(Object key) 之类的方法来帮助我确定表中的键是否有效以及表中的内容是什么关键值是。对于理解从哪里开始构建枚举类型并返回它的任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-11T18:18:41.203

这是“相对”容易，改变你的代码是这样的：

```
public Enumeration getKeys(){
       return new Enumeration() {

        @Override
        public boolean hasMoreElements() {
            // TODO Test if this enumeration contains more elements.
            return false;
        }

        @Override
        public Object nextElement() {
            // TODO Return the next element of this enumeration if this enumeration object has at least one more element to provide.
            return null;
        }
    };
    } 
```

现在由您来执行与您的业务规则相关的两种方法。

# google-api - 如何让任何人都可以查看 Google BigQuery 相关项目

> ID：13333915
> 
> 赞同：0
> 
> 时间：2012-11-11T18:09:31.317
> 
> 标签：google-api, google-bigquery

我按照教程here

```
https://developers.google.com/bigquery/articles/dashboard#enablebigqueryapi 
```

并创建了一个示例应用程序来查询 Google BigQuery。但只有我的电子邮件 ID 和密码才能查看该项目。

如何进行更改，以便任何人都可以在线查看项目。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T21:38:52.073

这取决于你想做什么，以及你所说的“任何人”是什么意思。

**如果您想让用户授权访问 API**：（*这是仪表板教程中描述的授权流程）*您不能完全公开访问 Google 开发人员项目（无论如何您都不想这样做）。但是，您可以让[拥有 Google 帐户的任何人都可以使用 BigQuery 数据集](https://developers.google.com/bigquery/docs/reference/v2/datasets/update)（您可以使用 API、Web UI 或 bq 命令行工具切换这些权限）。

以这种方式访问​​ BigQuery 的每个用户（即使他们不属于您的项目）都需要登录 Google Developer Console 并接受 BigQuery 服务条款。此流程称为 Web 服务器授权，[请在此处了解更多信息](https://developers.google.com/bigquery/docs/authorization#web-server-applications)。

**如果您想让仪表板对任何人开放：** 您可能希望应用程序本身被授权访问 BigQuery API。在此流程中，您将希望使用“[服务帐户授权流程](https://developers.google.com/bigquery/docs/authorization#service-accounts)”，并且可能希望使用[App Engine 服务帐户](https://developers.google.com/bigquery/docs/authorization#service-accounts-appengine)。有关如何构建此类授权的信息，请参阅此页面。

# wpf - 使用 StaticResource 设置 DataContext

> ID：13333922
> 
> 赞同：1
> 
> 时间：2012-11-11T18:09:50.567
> 
> 标签：wpf, viewmodel, datacontext, resourcedictionary

我正在尝试使用以下 XAML 代码将 ViewModel 设置为 View 的 DataContext：

```
<UserControl.DataContext>
    <local:MyViewModel />
</UserControl.DataContext>

<UserControl.Resources>
    <ResourceDictionary>
        <ResourceDictionary.MergedDictionaries>
            <ResourceDictionary Source="/MA_Resources/MA_ResourceDictionary.xaml" />
        </ResourceDictionary.MergedDictionaries>

        <local:MyViewModel x:Key="myViewModel" x:Name="myVM" />
    </ResourceDictionary>
</UserControl.Resources> 
```

但是，我观察到视图模型构造函数被调用了两次。我知道视图模型在 XAML 中被实例化了两次，我应该将 DataContext 设置为资源中的 StaticResource。但是，我无法弄清楚如何使用 StaticResource 设置 DataContext。我尝试了以下方法，但它给出了一个例外：

```
<UserControl .... DataContext="{StaticResource myViewModel}" > 
```

请帮我弄清楚分配 DataContext 的适当 XAML 代码应该是什么。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-11T18:20:20.497

如果稍后在 xaml 文件中定义，则无法引用静态资源。因此，您可以执行以下操作：

```
<UserControl.Resources>
    <ResourceDictionary>
        <ResourceDictionary.MergedDictionaries>
            <ResourceDictionary Source="/MA_Resources/MA_ResourceDictionary.xaml" />
        </ResourceDictionary.MergedDictionaries>

        <local:MyViewModel x:Key="myViewModel" x:Name="myVM" />
    </ResourceDictionary>
</UserControl.Resources>
<UserControl.DataContext>
    <StaticResourceExtension ResourceKey="myViewModel"/>
</UserControl.DataContext> 
```

I wonder why you want do define the ViewModel as a static resource. Personally, I would prefer the instantiation in the setter of the `DataContext`.

# ruby-on-rails - ActionView::MissingTemplate 发生在赞赏#create

> ID：13333925
> 
> 赞同：1
> 
> 时间：2012-11-11T18:10:19.387
> 
> 标签：ruby-on-rails

当我在请求中明确指定时，不知道为什么有时某些用户会收到**Missing template错误。**`remote: true`我无法重现该错误。

缺少模板`appreciations/create`, `logged_in/create`,`application/create`带有`{:locale=>[:en], :formats=>[:html], :handlers=>[:erb, :builder, :haml]}`. 搜索：...

我的查看代码

```
<%= link_to 'Appreciate',  feed_appreciations_path(feed), method: 'post', :remote => true %> 
```

控制器代码

```
class AppreciationsController
  respond_to :js
  before_filter :load_feed

  def create
    @appreciation = @feed.appreciations.new(params[:appreciation])
    @appreciation.save
  end

  ...
end 
```

我已经`views/appreciations/create.js.erb`定义和工作。

在进来的请求中，我有

*   `HTTP_ACCEPT : text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8`

*   `action_dispatch.request.formats : [text/html]`

既然我已经指定了，为什么请求不是作为 js 请求来的`remote: true`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T15:26:51.380

好的，这是答案

```
 def your_method_without_refresh
    # Put your stuff here
    redirect_to "#"          # This one is the trick
  end 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-11T18:24:05.773

因为他们试图直接在浏览器中调用该站点——例如，因为他们以某种方式从 AJAX 请求中复制了 URL……至少这是我们在客户这样做时遇到的错误；-) 我想你可以简单地忽略它

# iphone - 如何在 UIPickerView 中选择不同组件的完整行？

> ID：13333926
> 
> 赞同：0
> 
> 时间：2012-11-11T18:10:20.730
> 
> 标签：iphone, ios6, uipickerview

我在 PickerView 中有 4 个组件。I want to select the complete row in all the components when row 0 of component 0 is selected. 同样，对于每个组件的每隔一行。有没有办法为所有人扩展单一选择？

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T19:25:36.530

实现`UIPickerView`委托方法`pickerView:didSelectRow:inComponent:`。

```
// called when a user selects a row
- (void)pickerView:(UIPickerView *)pickerView didSelectRow:(NSInteger)row inComponent:(NSInteger)component {
    // This code assumes all four components have the same number of rows
    for (NSInteger c = 0; c < pickerView.numberOfComponent; c++) {
        if (c != component) {
            [pickerView selectRow:row inComponent:c animated:NO]; // animate if desired
        }
    }

    // do any other desired actions (if any) when a row is selected
} 
```

另一种选择是只有一个组件在每行中显示所有四组数据。如果用户不能为每个组件选择不同的值，那么拥有 4 个组件就没有多大意义。

# php - `id` NOT NULL auto_increment

> ID：13333933
> 
> 赞同：-1
> 
> 时间：2012-11-11T18:11:10.260
> 
> 标签：php, mysql, sql, database, auto-increment

我的服务器上安装了 MySQL 5.0。SQL 自动增量不起作用。我已经定义了具有自动增量的列，但仍然无法正常工作，它说：

```
Incorrect integer value: '' for column 'id' at row 1 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-11T18:12:12.643

在主键列中插入 NULL 而不是空字符串。从错误中我可以看到您正在尝试插入“”值。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-11T18:16:41.090

您的查询应该是

```
INSERT INTO myTable(col2, col3) VALUES('x','y'); 
```

省略自动增量列

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-11T19:36:53.977

我只是使用 DEFAULT 而不是“”

插入用户值（默认值，'$Username'，...）

对我来说自动递增。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-06-16T05:51:04.417

确保您的主键类似于以下内容：

```
`id` INT(11) NOT NULL AUTO_INCREMENT PRIMARY KEY 
```

我用过：

```
INSERT INTO `table` (`id`, `foo`, `hello`) VALUES ('', 'bar', 'world') 
```

如果像我一样设置密钥，则在密钥中放置一个空白字符串是可行的。这可能是一种不好的做法，但我知道它有效，所以如果它不适合您，那么我会说您在创建表格时可能错过了一些东西。

在 INSERT 中省略`id`最可能是最合适的方法，使用 NULL 可能是第二好的方法。我没有任何文件可以支持这一点，但作为一种观察，情况似乎可能是这样。

# windows - 搜索给定的文件集并复制到另一个目录

> ID：13333937
> 
> 赞同：0
> 
> 时间：2012-11-11T18:11:32.393
> 
> 标签：windows, batch-file, cmd, dos

在 needToFind.txt 文件中有一组给定的文件名，例如：

myImage1.jpg , theImage.jpg, parisImage.jpg （这是一个我会格式化的文件，不管文件名用逗号分隔，还是换行）

还有一个名为 /MyImageFolder 的文件夹，其中包含 1000 张图像，还包含 myImage1.jpg、theImage.jpg、parisImage.jpg

我想找到那些给定的图像并将它们复制到另一个目录。

* * *

## 我想在包含许多图像的目录/文件夹 MyImages 中搜索 needToFind.txt 中的给定文件名。并将创建的图像复制到另一个目录/文件夹，例如 MyGivenSetOfImages。

请帮助，这将挽救我的生命。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T19:04:09.640

我想最棘手的部分是读取文件

如果可以的话，我会建议你创建一个文本文件，所有名称都用一个逗号分隔。

请参阅[如何通过批处理读取文本](http://social.technet.microsoft.com/Forums/en-US/ITCG/thread/714c5808-0971-44c1-bacc-55d5ae576515)文件

稍后您可以在一个简单的`copy`命令中简单地使用提取的变量。

我本可以提供一个骨架，但在电话上。我希望这有助于提出问题

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-11T22:09:25.327

格式化needToFind.txt 以使每行有一个文件名。以下简单的批处理脚本应该可以工作。

```
@echo off
cd "\MyImageFolder"
for /f "usebackq eol=: delims=" %%F in ("needToFind.txt") do copy "%%~F" "\anotherFolder" 
```

它可以在没有批处理文件的命令行上完成：只需将每个更改`%%`为`%`.

# jquery - jquery在整个页面中隐藏2个div

> ID：13333940
> 
> 赞同：0
> 
> 时间：2012-11-11T18:11:51.250
> 
> 标签：jquery, html, hide

我想将所有第二个 div 隐藏在另一个 div 中

```
 <div class="inner">
       <div class="content"></div>
       **<div class="content"></div>**   // this show get hidden
    </div>

     <div class="inner">
       <div class="content"></div>
       **<div class="content"></div**>   // this should get hidden
    </div> 
```

我试过这个：

```
 $($('.inner').children()[12]).hide(); 
```

但它只隐藏了一个元素，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T18:13:12.107

如果您想在没有 :nthchild 选择器的情况下执行此操作：

```
$('.inner').each(function()
{
   $(this).find('.content').eq(1).hide(); 
});​ 
```

与：nthchild：

```
$(".inner div:nth-child(2)").hide(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-11T18:15:30.267

您可以使用[jQuery 中的 nth-child 选择器](http://api.jquery.com/nth-child-selector/)轻松完成此操作。

```
$(".inner div:nth-child(2)").hide(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-11T18:15:49.750

尝试

```
$('.inner div:nth-child(2)').hide() 
```

[http://jsfiddle.net/TmWzd/](http://jsfiddle.net/TmWzd/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-11T18:19:05.310

```
$(".content").next().hide(); will do the Job. 
```

或者

```
$(".inner").find(".content").eq(1).hide(); 
```

# php - 如何仅提交带有下拉选择值的表单？

> ID：13333941
> 
> 赞同：2
> 
> 时间：2012-11-11T18:11:55.577
> 
> 标签：php, jquery, mysql, wordpress

我想提交一个只有一个带有语言值的下拉列表的表单，我想提交表单并访问该值，以便我可以本地化页面上的一些文本。

这是我正在使用但无法访问帖子值的代码

**html表单：**

```
<form action='' method='post'>
<select id="lang">
    <option value="english">Eng</option>
    <option value="arabic">Arabic</option>
</select>
</form> 
```

jQuery提交表单：

```
 <script type="text/javascript">
    jQuery(function($){
        var lang = $("#lang").val();
        var Home = 'الرئيسية';

        $("#lang").change(function(){
            cntr = $("#lang option:selected").val();

            if(lang=="arabic"){
                $(".menu ul li a:eq(0)").text(Home);
            }
            $('form').submit();
        });
    });

</script> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-11T18:16:23.427

我认为您在选择上缺少“名称”属性：

```
<select name="lang" id="lang">
    <option value="english">Eng</option>
    <option value="arabic">Arabic</option>
</select> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-11T18:16:20.323

您应该为“选择”元素指定“名称”属性

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-11T18:16:02.343

`var lang = $("#lang").val();`只会在页面加载并需要`name`选择时触发

将其移动到更改处理程序中，以便每次更新

```
 $("#lang").change(function(){
       var lang=$(this).val();
        cntr = $("#lang option:selected").val();

        if(lang=="arabic"){
            $(".menu ul li a:eq(0)").text(Home);
        }
        $('form').submit();
    }); 
```

# visual-studio-2010 - 如何使用 visual-studio 2010 设置部署 RDLC 文件

> ID：13333946
> 
> 赞同：2
> 
> 时间：2012-11-11T18:12:08.040
> 
> 标签：visual-studio-2010, reporting-services, rdlc, setup-deployment

我正在开发一个 Windows 应用程序，其中许多`.rdlc`在该项目的“报告”文件夹中。当我创建交付给客户的设置时，我是否需要手动包含所有这些 .rdlc 文件，或者它们是否会像 .rpt（水晶报告）文件一样自动包含在内？

我能做什么：因此，当我批量构建我的项目时，总是自动包含 .rdlc 文件。谁能指导我？

我在另一个论坛上问了同样的事情并得到了以下指导：

> ...发现报告往往会增长，通常是在应用程序部署并使用了一段时间之后。此外，如果您有不同的客户，他们通常需要不同的报告。
> 
> 我将所有报告放在一个表中，所有记录都有一个存储过程名称和一个文件名，如果文件存在并且过程存在，则报告可以执行。
> 
> 然后我可以分发新报告，而无需重新编译和分发应用程序。简单交付文件和脚本来创建存储过程和报表记录。

但我想知道*RDLC*，这是客户端。我问我如何将我的`rdlc`文件与我的应用程序设置一起分发，这样当客户安装我的设置时，他可以查看基于 rdlc 的报告。我想知道将 rdlc 文件包含到安装项目中的行业标准（如果有的话）是什么。如果有人知道这样的事情，请告诉我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T18:21:42.997

以防万一有人像我一样收到这篇文章，这个问题已经在重复的帖子中得到了回答：

[发布 RDLC 文件](https://stackoverflow.com/questions/3481223/publishing-rdlc-files)

我有同样的问题，它对我有用。希望对看到这篇文章的人有所帮助

# gcc - 如何在 GCC 中禁用 SSE？

> ID：13333950
> 
> 赞同：1
> 
> 时间：2012-11-11T18:12:27.260
> 
> 标签：gcc, arm, debian, sse

我正在尝试在 debian 中制作一个包（挤压，armel）。问题是，我的 GCC 似乎设置了 ARM 不支持的 -msse2，我不知道如何禁用它。如何更改 GCC 的默认标志以禁用此功能？谢谢。

完整错误：

```
Building CXX object frameworks/CoreLib/CMakeFiles/.....cpp.o

cc1plus: error: unrecognized command line option "-msse2"

make[2] \*\*\* [fframeworks/CoreLib/CMakeFiles/.....cpp.o] Error 1

make[1] \*\*\* [frameworks/CoreLib/CMakeFiles/.....dir/all] Error 2

make \*\*\* [all] Error 2 
```

问题是，在任何地方都没有提到文件中包含 -msse2，这就是为什么我认为编译器可能是罪魁祸首。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-11T18:18:44.187

MMX、SSE 和 SSE2 是 ARM 不支持的 Intel/AMD 特定扩展，ARM 有自己的 NEON SIMD 扩展。在我看来，您似乎正在尝试为 ARM 交叉编译程序并使用本*机*工具链，因为您需要目标平台的工具链。这是有关如何安装可能有帮助的 ARM 工具链的[教程](http://www.ibm.com/developerworks/linux/library/l-arm-toolchain/)

编辑：现在我看到了错误，Makefile 正在传递`-msse2`给 gcc，你应该阅读将包编译到 ARM 的说明，看看这是否可能。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-03-23T21:19:35.467

万一其他人在这里结束：我在类似的 pbm 中运行，这是由于配置脚本没有正确处理 arm 案例。对我有用的解决方案是`configure`使用该选项运行`--disable-sse2`

# java - 整数坐标的多边形压缩

> ID：13333951
> 
> 赞同：3
> 
> 时间：2012-11-11T18:12:29.897
> 
> 标签：java, compression, polygon

我在带有“signed int”二维坐标的栅格中有多边形。多边形的顶点按顺时针方向排列。

我想以更“空间友好”的方式存储这个多边形，只存储 int x, y 坐标的序列。如果我用 rar 压缩这个文件，我得到的大小比未压缩的要小 3.5 倍。有没有比简单地将 x,y 存储在一个序列中更好的表示？

压缩应该是无损的。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-29T03:21:14.460

如果你的多边形是 (x1, y1), (x2, y2) ... (xn, yn)，你可以写成，

x1, x2-x1, x3-x2, xn-xn-1, y1, y2-y1 ..., yn-yn-1

通常，相邻 x,y 值之间的差异将小于绝对值，因此您可以将增量存储为[可变长度 ints](https://developers.google.com/protocol-buffers/docs/encoding#varints)。通过这样做，每个 x,y 对通常可以存储在 2 或 4 个字节而不是 8 个字节中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-29T21:27:00.407

很难给出一个明确的答案，因为结果取决于很多因素。我使用 GZIPOutputStream 进行了快速测试来压缩单个多边形，结果很大程度上取决于多边形的点数，也取决于它的面积。

基本上，我创建了具有越来越多的顶点随机分布在预定义区域中的多边形。然后我顺时针对顶点进行排序并用 GZIP 压缩差异

对于适合标准屏幕 (1440x900) 的多边形：

```
D Npoints: 3 Uncompressed: 24 Compressed: 41 Ratio: 0.58536583
D Npoints: 4 Uncompressed: 32 Compressed: 49 Ratio: 0.6530612
D Npoints: 5 Uncompressed: 40 Compressed: 58 Ratio: 0.6896552
D Npoints: 6 Uncompressed: 48 Compressed: 61 Ratio: 0.78688526
D Npoints: 7 Uncompressed: 56 Compressed: 66 Ratio: 0.8484849
D Npoints: 8 Uncompressed: 64 Compressed: 72 Ratio: 0.8888889
D Npoints: 9 Uncompressed: 72 Compressed: 80 Ratio: 0.9
D Npoints: 10 Uncompressed: 80 Compressed: 84 Ratio: 0.95238096
D Npoints: 11 Uncompressed: 88 Compressed: 89 Ratio: 0.98876405
D Npoints: 12 Uncompressed: 96 Compressed: 94 Ratio: 1.0212766
D Npoints: 13 Uncompressed: 104 Compressed: 96 Ratio: 1.0833334
D Npoints: 14 Uncompressed: 112 Compressed: 102 Ratio: 1.0980393
D Npoints: 15 Uncompressed: 120 Compressed: 108 Ratio: 1.1111112
. . .
D Npoints: 99 Uncompressed: 792 Compressed: 457 Ratio: 1.7330415 
```

较大区域 (1440*4x900*4) 的压缩比降低：

```
D Npoints: 3 Uncompressed: 24 Compressed: 45 Ratio: 0.53333336
D Npoints: 4 Uncompressed: 32 Compressed: 55 Ratio: 0.58181816
D Npoints: 5 Uncompressed: 40 Compressed: 60 Ratio: 0.6666667
D Npoints: 6 Uncompressed: 48 Compressed: 67 Ratio: 0.7164179
D Npoints: 7 Uncompressed: 56 Compressed: 70 Ratio: 0.8
D Npoints: 8 Uncompressed: 64 Compressed: 79 Ratio: 0.8101266
D Npoints: 9 Uncompressed: 72 Compressed: 87 Ratio: 0.82758623
D Npoints: 10 Uncompressed: 80 Compressed: 93 Ratio: 0.86021507
D Npoints: 11 Uncompressed: 88 Compressed: 102 Ratio: 0.8627451
D Npoints: 12 Uncompressed: 96 Compressed: 109 Ratio: 0.88073397
D Npoints: 13 Uncompressed: 104 Compressed: 113 Ratio: 0.920354
D Npoints: 14 Uncompressed: 112 Compressed: 119 Ratio: 0.9411765
D Npoints: 15 Uncompressed: 120 Compressed: 125 Ratio: 0.96
D Npoints: 16 Uncompressed: 128 Compressed: 135 Ratio: 0.94814813
D Npoints: 17 Uncompressed: 136 Compressed: 137 Ratio: 0.99270076
D Npoints: 18 Uncompressed: 144 Compressed: 137 Ratio: 1.0510949
D Npoints: 19 Uncompressed: 152 Compressed: 148 Ratio: 1.027027
D Npoints: 20 Uncompressed: 160 Compressed: 148 Ratio: 1.081081
D Npoints: 21 Uncompressed: 168 Compressed: 154 Ratio: 1.0909091
D Npoints: 22 Uncompressed: 176 Compressed: 160 Ratio: 1.1
    . . . 
D Npoints: 99 Uncompressed: 792 Compressed: 520 Ratio: 1.5230769 
```

我不确定如何获得小 3.5 的尺寸，但我假设您将一堆多边形压缩在一起。将多个多边形压缩在一起显然会增加压缩比。

当然，这对于程序来说不是一种可用的方法，因为它必须不断解压缩多边形才能将它们绘制到屏幕上，这需要更多内存，而 CPU 超出了整个目的。我只是想得到一些数字...

# nsmutablearray - 从前一个 View Controller 中的数组中获取数据，将其放入另一个 TableViewController

> ID：13333952
> 
> 赞同：4
> 
> 时间：2012-11-11T18:12:32.680
> 
> 标签：nsmutablearray, uitableview, xcode4.3

我有 2 个 TableViewController。当用户点击 UIBarButtonItem 时，它将来自 UITextField、runnameField 的文本保存在 SaveViewController 中。它应该获取runnameField 的文本并将其放入一个数组runsArray 中。在 RecordVC 中，tableView 的数据应该来自于 runsArray。有人可以帮我吗？我已经在谷歌上搜索了很长时间，但找不到任何答案。

SaveViewController.h：

```
#import <UIKit/UIKit.h>
#import "RecordsViewController.h" //Next ViewController

@interface SaveViewController : UITableViewController <UITableViewDataSource,UITableViewDelegate> {
__weak IBOutlet UITextField *runnameField;
RecordsViewController *RecordsVCData;
}
@property (weak, nonatomic) IBOutlet UITextField *runnameField;
@property (weak, nonatomic) IBOutlet UITextView *runnotesTextView;
@property (weak, nonatomic) IBOutlet UIBarButtonItem *saveBarItem;
@property (nonatomic, retain) RecordsViewController *RecordsVCData;

- (IBAction)saverun:(UIBarButtonItem *)sender;
- (IBAction)goAwayKeyboard:(id)sender;

@end 
```

保存视图控制器.m：

```
- (IBAction)saverun:(UIBarButtonItem *)sender {
RecordsViewController *RecordsVC = [[RecordsViewController alloc] initWithNibName:nil bundle:nil];
RecordsVC.tableView = [[UITableView alloc] initWithFrame:CGRectZero style:UITableViewStyleGrouped];
self.RecordsVCData = RecordsVC;
[RecordsVC.runsArray addObject:[NSString stringWithFormat:@"%@", runnameField.text]];
[self presentModalViewController:RecordsVC animated:YES];
}

- (IBAction)goAwayKeyboard:(id)sender {
    [sender resignFirstResponder];
} 
```

RecordsViewController.h：

```
#import <UIKit/UIKit.h>
@interface RecordsViewController : UITableViewController <UITableViewDataSource, UITableViewDelegate> {      
NSMutableArray *runsArray;
}
@property (weak, nonatomic) NSString *runname;
@property (strong, nonatomic) NSString *runnotes;
@property (weak, nonatomic) UITableViewCell *cell;
@property (retain,nonatomic) NSMutableArray *runsArray;
@end 
```

RecordsViewController.m：

```
-(UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:     (NSIndexPath *)indexPath {

// Identifier for retrieving reusable cells.
static NSString *cellIdentifier = @"MyCellIdentifier";

// Attempt to request the reusable cell.

UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:cellIdentifier];
cell = [[UITableViewCell alloc]initWithStyle:UITableViewCellStyleDefault     reuseIdentifier:cellIdentifier];
// No cell available - create one
if(cell == nil) {
    cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault
                                  reuseIdentifier:cellIdentifier];
[cell.textLabel setText:[NSString stringWithFormat:@"%@",[runsArray objectAtIndex:indexPath.row]]];

}

// Set the text of the cell to the runnamestring.
[cell.textLabel setText:[NSString stringWithFormat:@"%@",[runsArray objectAtIndex:indexPath.row]]];
return cell;

}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section {
return [runsArray count];
} 
```

任何帮助都将不胜感激。

谢谢，

德鲁夫

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T13:41:21.793

在您更新 RecordsVC.runsArray 时，我想您的 tableview 已经被初始化和加载，尽管没有数据。

我最近在这种情况下所做的就是使用通知。

在 RecordsViewController 中，您将在 init 方法中注册通知：

```
- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    if (self) {

        [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(dataLoaded:) name:@"runsArrayLoaded" object:nil];

        // Custom initialization
    }
    return self;
} 
```

同样在 RecordsViewController 中，您将需要在收到通知时调用的方法。在这种情况下，它是 dataLoaded：

```
-(void) dataLoaded:(NSNotification *)notif {
    if (notif.userInfo){
        runsArray = [notif.userInfo objectForKey:@"newdata"];
        [self.tableview reloadData];
    }
} 
```

使所有这些神奇工作的部分在于 SaveViewController 类中的 saverun 方法。

```
- (IBAction)saverun:(UIBarButtonItem *)sender {
    RecordsViewController *RecordsVC = [[RecordsViewController alloc] initWithNibName:nil bundle:nil];
    RecordsVC.tableView = [[UITableView alloc] initWithFrame:CGRectZero style:UITableViewStyleGrouped];
    [runsArray addObject:[NSString stringWithFormat:@"%@", runnameField.text]];
    [self presentModalViewController:RecordsVC animated:YES];

    // notify the RecordsViewController that new data is available
    NSMutableDictionary* userInfo = [[NSMutableDictionary alloc] initWithCapacity:1];
    [userInfo setObject:runsArray forKey:@"newdata"];
    [[NSNotificationCenter defaultCenter] postNotificationName:@runsArrayLoaded" object:nil userInfo:(NSDictionary*)userInfo];
} 
```

最后，您必须清理并删除 RecordsViewController 类中的通知观察。在您的 viewWillDisappear 中，添加以下行：

```
[[NSNotifcation defaultCenter] removeObserver:self name:@"runsArrayLoaded" object:nil]; 
```

# php - CakePHP 错误数据库未定义

> ID：13333955
> 
> 赞同：4
> 
> 时间：2012-11-11T18:12:52.577
> 
> 标签：php, mysql, database, cakephp

我在每个问题中都搜索了这个问题的答案，但没有找到！这是我输入 localhost/cakephp 时的错误：

```
Notice (8): Undefined index: datasource [CORE\Cake\Model\ConnectionManager.php, line 258] 
```

另一个错误：

```
Cake is NOT able to connect to the database. 
```

找不到数据源类。

这是我在 database.php 中的配置：

```
<?php
class DATABASE_CONFIG {
var $default = array('driver' => 'mysql',
                 'persistent'  => false,
                 'database' => '',
                     'host'        => 'localhost',
                     'login'       => 'lorizz',
                     'password'    => 'reyxD22!',
                     'database'    => 'my_cakephp_project',
                     'prefix'      => '');

var $test = array('driver' => 'mysql',
                 'persistent'  => false,
                  'database' => '',
                     'host'        => 'localhost',
                     'login'       => 'lorizz',
                     'password'    => 'reyxD22!',
                     'database'    => 'my_cakephp_project',
                     'prefix'      => '');

}
?> 
```

有什么答案吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T10:30:44.807

在那里，您需要删除变量 var $default 和 var $test 中使用过两次的数据库

database.php 中的配置应该是：

```
<?php
class DATABASE_CONFIG {
var $default = array('driver' => 'mysql',
                 'persistent'  => false,
                     'host'        => 'localhost',
                     'login'       => 'lorizz',
                     'password'    => 'reyxD22!',
                     'database'    => 'my_cakephp_project',
                     'prefix'      => '');

var $test = array('driver' => 'mysql',
                 'persistent'  => false,
                     'host'        => 'localhost',
                     'login'       => 'user',
                     'password'    => 'password!',
                     'database'    => 'test_database_name',
                     'prefix'      => '');

}
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-29T14:35:40.707

只需将 'driver' => 'mysql', 更改为 'datasource' => 'Database/Mysql',

```
<?php
class DATABASE_CONFIG {
public $default = array('datasource' => 'Database/Mysql',
                 'persistent'  => false,
                 'database' => '',
                     'host'        => 'localhost',
                     'login'       => 'lorizz',
                     'password'    => 'reyxD22!',
                     'database'    => 'my_cakephp_project',
                     'prefix'      => '');

public $test = array('datasource' => 'Database/Mysql',
                 'persistent'  => false,
                  'database' => '',
                     'host'        => 'localhost',
                     'login'       => 'lorizz',
                     'password'    => 'reyxD22!',
                     'database'    => 'my_cakephp_project',
                     'prefix'      => '');

}
?> 
```

# xcode - 工具栏中的模板图标在 Xcode 中不可见

> ID：13333958
> 
> 赞同：1
> 
> 时间：2012-11-11T18:13:28.187
> 
> 标签：xcode, cocoa

我准备了一个要在工具栏中使用的模板图标，并将其保存为 PDF 格式。然后我将它设置为工具栏中按钮的图像。不幸的是，它在 Xcode 中不可见，尽管它出现在工作应用程序中。

![Xcode 中的视图](../Images/80f5073f88c5a4f01ce9f864c803b40d.png) ![工作申请](../Images/f18f6b8366676f3807ad6c8a35ebce94.png)

可能是什么原因？

# ember.js - Ember.Deferred 的目的是什么？

> ID：13333960
> 
> 赞同：2
> 
> 时间：2012-11-11T18:13:41.530
> 
> 标签：ember.js

我发现很难遇到任何关于`Ember.Deferred`. 我浏览了 EmberJS 的源代码，所以我了解它的方法。我还发现它与承诺模式有关。然而，任何关于这个最近添加的 mixin 的进一步信息将不胜感激！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-11T20:20:30.920

Ember.Deferred 是[Ember.Mixin](https://github.com/tildeio/rsvp.js)形式的 RSVP.js。

RSVP.js 是[Promises/A](http://wiki.commonjs.org/wiki/Promises/A)的实现。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-12T05:57:46.180

Ember.Deferred 游戏计划的一部分是在 Ember Data 中使用它，以便模型和查询成为在加载时解析的承诺。你现在可以在任何你想使用 Promises/A 模式的地方开始使用它。如果您不使用或不了解该模式，则可以暂时忽略 Ember.Deferred。

# spring - 未处理 JSF 标记

> ID：13333961
> 
> 赞同：1
> 
> 时间：2012-11-11T18:13:41.743
> 
> 标签：spring, google-app-engine, jsf-2, maven-gae-plugin

我正在尝试在谷歌应用引擎上运行 jsf 2.1 / spring 3.1 应用程序。这一切都可以正常启动（在开发服务器上），没有任何例外。

但是我访问的每个页面都没有处理 jsf-tags。

*   在没有模板的页面上，所有的 HTML 都会被渲染。jsf-tags 在源代码中可见。
*   在带有模板的页面上，浏览器显示带有提示的纯 xhtml，没有可用的布局信息，这对我来说很有意义，因为只有部分被发送到浏览器。

在我看来，JSF 根本不起作用。尽管 JSF 似乎已正确初始化。

我正在使用 maven-gae-plugin 版本 0.9.2，因为我无法使用最新版本 0.9.5 将我的应用程序部署到开发服务器。

我的 web.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns="http://java.sun.com/xml/ns/javaee"
    xmlns:web="http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd"
    xsi:schemaLocation="http://java.sun.com/xml/ns/javaee     http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd"
    version="2.5">

  <context-param>
    <param-name>javax.faces.STATE_SAVING_METHOD</param-name>
    <param-value>client</param-value>
  </context-param>

    <context-param>
    <param-name>javax.faces.PROJECT_STAGE</param-name>
    <param-value>Development</param-value>
  </context-param>

  <context-param>
    <param-name>javax.faces.DEFAULT_SUFFIX</param-name>
    <param-value>.xhtml</param-value>
  </context-param>

  <!-- GAE Bug 1506 JSP 2.1 API but 2.0 Implementation -->
  <context-param>
    <param-name>com.sun.faces.expressionFactory</param-name>
    <param-value>com.sun.el.ExpressionFactoryImpl</param-value>
  </context-param>

  <context-param>
    <param-name>com.sun.faces.validateXml</param-name>
    <param-value>true</param-value>
  </context-param>

  <context-param>
    <param-name>com.sun.faces.enableThreading</param-name>
    <param-value>false</param-value>
  </context-param>

  <!-- Add Support for Spring -->
  <listener>
    <listener-class>
        org.springframework.web.context.ContextLoaderListener
    </listener-class>
  </listener>

   <context-param>
            <param-name>contextConfigLocation</param-name>
            <param-value>classpath:applicationContext.xml</param-value>
        </context-param>
  <listener>
    <listener-class>
        org.springframework.web.context.request.RequestContextListener
    </listener-class>
  </listener>

<!-- Welcome page -->
  <welcome-file-list>
    <welcome-file>index.xhtml</welcome-file>
  </welcome-file-list> 

   <!-- JSF Mapping -->
  <servlet>
    <servlet-name>facesServlet</servlet-name>
    <servlet-class>javax.faces.webapp.FacesServlet</servlet-class>
    <load-on-startup>1</load-on-startup>
  </servlet>

 <servlet-mapping>
    <servlet-name>facesServlet</servlet-name>
    <url-pattern>*.xhtml</url-pattern>
  </servlet-mapping>
</web-app> 
```

索引.xhtml

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"   
      xmlns:h="http://java.sun.com/jsf/html" >

    <h:body>

        <h1>JSF 2.0 + Spring Example</h1>

    <h:link value="Register" outcome="register" />

    <h2>TEST</h2>

    </h:body>

</html> 
```

面孔-config.xml

```
<?xml version="1.0" encoding="utf-8"?>
<faces-config xmlns="http://java.sun.com/xml/ns/javaee"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://java.sun.com/xml/ns/javaee     http://java.sun.com/xml/ns/javaee/web-facesconfig_2_1.xsd" version="2.1">

    <application>
        <el-resolver>
                org.springframework.web.jsf.el.SpringBeanFacesELResolver
        </el-resolver>
    </application>

</faces-config> 
```

问候。

# c# - 输入字符串的格式不正确。？

> ID：13333966
> 
> 赞同：-4
> 
> 时间：2012-11-11T18:14:22.853
> 
> 标签：c#, visual-studio-2010, null, int, formatexception

单击应用程序中的链接时出现以下错误，“输入字符串的格式不正确”。尝试多次更改内容但没有运气，所以这是我的最后手段。

这是引发错误的代码行

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-11T18:17:30.587

问题`Request[UrlParameters.UrlParameterName.ComplianceActionRisk]`不是 int 类型。因此，如果它兼容，则`Parse`使用`TryParse`它将值转换为 int 而不是 using ，否则`-1`将使用默认值 -

```
int ComplianceAction = -1;
Int32.TryParse(Request[UrlParameters.UrlParameterName.ComplianceActionRisk],
                       out ComplianceAction); 
```

# ios - 获取 MKMapView 以响应 touch up 内部事件

> ID：13333973
> 
> 赞同：2
> 
> 时间：2012-11-11T18:15:24.913
> 
> 标签：ios, cocoa-touch, ios6, mkmapview, uigesturerecognizer

我正在尝试禁用 MKMapView 实例的缩放和滚动，并让它响应内部事件（或类似事件）的触摸。下面链接的问题的公认答案使用添加到地图视图的手势识别器来响应点击，但这些会立即发生，并且通常在滚动经过 MKMapView 时触发。这不是期望的行为。

[如何拦截 MKMapView 或 UIWebView 对象上的触摸事件？](https://stackoverflow.com/questions/1049889/how-to-intercept-touches-events-on-a-mkmapview-or-uiwebview-objects)

允许 MKMapView 实例响应修饰内部事件的最佳方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T15:17:19.727

可能有一个与手势识别器相关的解决方案，但在朋友的建议下，我发现了一个更简单的解决方案。我在 MKMapView 顶部放置了一个 UIButton，并将其类型设置为“自定义”。这会导致按钮立即变得透明。将其连接到您选择的 IBAction 上，一切顺利。

# java - 如何使用带有通配符的集合和泛型？

> ID：13333978
> 
> 赞同：5
> 
> 时间：2012-11-11T18:15:51.320
> 
> 标签：java, generics, collections, wildcard

首先，我将尝试解释这段代码背后的想法。我有一堆可以处理某种类型的其他类（Processables）的类（Processors）。我有一个处理器列表，可以按特定顺序执行它们。我有一个地图，它将检索我要为某个处理器处理（Processables）的数据。它看起来像这样。

```
public abstract class AbstractProcessable {
    ...
}

public class DummyProcessable extends AbstractProcessable {
   ...
}

public abstract class AbstractProcessor<T extends AbstractProcessable> {
    public abstract void process(List<T> listOfProcessables);
}

public class DummyProcessor extends AbstractProcessor<DummyProcessable> {

    @Override
    public void process(List<DummyProcessable> listToProcess) {
        ...
    }
} 
```

到目前为止，这似乎工作正常。没有编译错误。但现在我有一个像下面这样的类：

```
public class RandomClass {

    private List<AbstractProcessor<? extends AbstractProcessable>> processors;

    private Map<Class<? extends AbstractProcessor>, List<? extends AbstractProcessable>> data;

    public RandomClass() {
        processors = new ArrayList<>();
        processors.add(new DummyProcessor());

        data = new HashMap<>();
        data.put(DummyProcessor.class, new ArrayList<DummyProcessable>());

        processAll();
    }

    private void processAll() {
        for (AbstractProcessor<? extends AbstractProcessable> processor : processors) {
            List<? extends AbstractProcessable> dataToProcess;
            dataToProcess = data.get(processor);
            processor.process(dataToProcess); // compile error
        }
    }
} 
```

编译错误：

```
 The method process(List<capture#4-of ? extends AbstractProcessable>) in the type AbstractProcessor<capture#4-of ? extends AbstractProcessable> is not applicable for the arguments (List<capture#5-of ? extends AbstractProcessable>) 
```

我知道它可能有点难以阅读，但我尽量简化它。我对泛型也不是很好，所以也许我用错了一些通配符？谁能帮我解决这个问题？

提前非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T18:35:33.167

如果我正确理解你的问题，我前段时间问[过一个类似的问题。](https://stackoverflow.com/questions/13038298/can-generics-and-super-type-tokens-help-to-build-a-type-safe-news-aggregator)简短的回答是您不能以您想要的方式使用这样的地图。好消息是你不需要它；）

问题是 Java 泛型是编译时的东西（你可能已经知道了），它们只存在于编译时，而**不是**你实际填充`List`. 你找不到用 Java 表达你的想法的方法，即使它看起来完全合法。

您可能会发现在某些情况下，[超级类型标记](http://gafter.blogspot.it/2006/12/super-type-tokens.html)对于提取参数很有用，并避免用户在合适的情况下提供显式参数（但请注意[限制](http://gafter.blogspot.it/2007/05/limitation-of-super-type-tokens.html)并考虑它们是否真的可以增加一些价值）。

简而言之，你最终会得到一个像

```
private Map<Class<?>, List<?>> data; 
```

（或者您可以为此使用[Guava 的`Multimap`](http://guava-libraries.googlecode.com/svn/tags/release03/javadoc/com/google/common/collect/Multimap.html)实现），使用一些强制转换并喊出一些警告，并依靠您的程序逻辑来确保客户端代码的类型安全。我在我的代码中使用了这种方法，到目前为止它从未失败过。

这是我的代码。我认为这正是您的情况，只需将`Subscriber<T>`and替换`Message`为您的`Processor<T>`and`Processable`

```
public class MessageBus {

    public enum Action {
        CREATE, REMOVE, UPDATE, DELETE;
    }

    private static Map<Class<?>, Set<Subscriber<?>>> subscriptions;

    static {
        subscriptions = new HashMap<Class<?>, Set<Subscriber<?>>>();
    }

    @SuppressWarnings("unchecked")
    public static <T> void publish(T message, Action action) {
        Set<Subscriber<?>> set = getSubscribersFor(message.getClass());

        if (set == null)
            return;

        for (Subscriber<?> subscriber: set) {
            ((Subscriber<T>) subscriber).onMessage(message, action);
        }
    }

    public static <T> void subscribe(Class<T> type, Subscriber<T> subscriber) {
        Set<Subscriber<?>> set = getSubscribersFor(type);

        if (set == null) {
            set = new HashSet<Subscriber<?>>();
            subscriptions.put(type, set);
        }

        set.add(subscriber);
    }

    public static <T> void unsuscribe(Class<T> type, Subscriber<T> subscriber) {
        Set<Subscriber<?>> set = getSubscribersFor(type);
        set.remove(subscriber);
    }

    private static Set<Subscriber<?>> getSubscribersFor(Class<?> topic) {
        return subscriptions.get(topic);
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-11T19:30:28.570

我怀疑这里的问题是：

1.  `? extends AbstractProcessable`从`private List<AbstractProcessor<? extends AbstractProcessable>> processors;`和
2.  `? extends AbstractProcessable`从`List<? extends AbstractProcessable> dataToProcess;`

不是同一类型。`? extends AbstractProcessable`表示 的未知子类`AbstractProcessable`，没有任何力量认为这两个未知数应该相同（这就是您收到错误的原因，因为 unknown: 与 unknown:`capture#4-of ?` 不同`capture#5-of ?`）。不确定您的用途，`RandomClass`但我会将其更改为 a`<T extends AbstractProcessable>`并用于`T`定义列表和地图。这样列表和地图将具有相同的类型。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-11T18:21:00.180

对我来说，听起来您在其中导入了 2 个不同的 List 类。检查导入部分并确保

```
import java.util.List 
```

在两者中（或您需要的任何列表类型）

就像第一个猜测一样，没有详细检查您的代码:)

# javascript - 将字符串文字从 html 传递到 javascript 函数

> ID：13333979
> 
> 赞同：0
> 
> 时间：2012-11-11T18:15:55.267
> 
> 标签：javascript, html, escaping, literals

在 IE9 中出现错误 Microsoft JScript 运行时错误：'populatedropdown' is undefined on the line`<input type="button"....`

我假设我没有正确转义文字值。我应该如何改变？

```
<html>
<head>
<title>Add items to dropdown</title>

<script type="text/javascript">
function populatedropdown(var devicelist) {
    var devList = document.frm.optdevices;
    var arrDev = split(devicelist, ";");

     devList.options.length = 0; // this removes existing options

     for (var i = 0; i <= 3; i++) {
         var option = new Option(arrDev[i],i);
         devList.options[i] = option; 
     }
}

</script>

</head>
<body>
<form name="frm">

<select name="optdevices">
</select>

<input type="button" value="TestAdd" onclick="populatedropdown('201;202;203;')" />

</form>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T18:25:34.023

将 JavaScript 与 HTML 分离并删除语法错误。看到这个[**小提琴**](http://jsfiddle.net/GvAYY/)

```
function populatedropdown(devicelist) {
    var devList = document.frm.optdevices;
    var arrDev = devicelist.split(';'); // split not defined

     devList.options.length = 0; // this removes existing options

     for (var i = 0; i <= 3; i++) {
         var option = new Option(arrDev[i],i);
         devList.options[i] = option; 
     }
}

// on window load
window.addEventListener('load', function load(){
    // attach event listener to button
    document.getElementById('testID').addEventListener('click', function click(){
        populatedropdown('201;202;203;');
    }, false);
}, false);
​ 
```

HTML

```
<form name="frm">

<select name="optdevices">
</select>

<input id="testID" type="button" value="TestAdd" />

</form>​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-11T18:22:25.427

您的函数无效，因为函数参数中有 var。只要您的脚本中有语法错误，该函数就不会被识别。`function populatedropdown(var devicelist)`无效。`var`参数中不应该有

```
function populatedropdown(devicelist) {
    var devList = document.frm.optdevices;
    var arrDev = split(devicelist, ";");

     devList.options.length = 0; // this removes existing options

     for (var i = 0; i <= 3; i++) {
         var option = new Option(arrDev[i],i);
         devList.options[i] = option; 
     }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-11T18:25:49.507

首先，你不应该通过定义函数来编写var，第二次使用函数split是错误的，应该使用split `var result = strToSplit.split(";")`，如果你想分割`;`，你可以阅读关于split here [Javascript Split method](http://www.w3schools.com/jsref/jsref_split.asp)

这是工作片段

```
function populatedropdown(devicelist) {
    var devList = document.frm.optdevices;
    var arrDev = devicelist.split(";");

     devList.options.length = 0; // this removes existing options

     for (var i = 0; i <= 3; i++) {
         var option = new Option(arrDev[i],i);
         devList.options[i] = option; 
     }
} 
```

刚刚在IE9上测试过

# css - 最小高度导致 Facebook 评论插件上的空白空间

> ID：13333986
> 
> 赞同：2
> 
> 时间：2012-11-11T18:16:42.457
> 
> 标签：css, plugins, height, facebook-comments

我遇到了一个非常烦人的问题。我正在我的新网站上设置 Facebook 评论插件，由于某种原因，它有一个最小高度：160 像素，当没有评论时，它会在插件底部创建一个巨大的空白空间。

这真的很烦人，根本不符合我的设计。我已经尝试用 !important 覆盖我自己的模板 .css 文件的最小高度，但这似乎没有任何作用。

看看上面的截图，看看我在说什么。

![在此处输入图像描述](../Images/bc7cdbeeb5ba2acb34f152ab699898a9.png) 帮助将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-03-07T11:17:07.427

**您无法设置该 Facebook 插件的样式，因为 iframe 不在同一个域中！**

您可以通过使用 javascript 插入 ca 链接标记来设置来自同一域的 iframe 样式。有关更多详细信息，请参阅此[帖子](https://stackoverflow.com/questions/217776/how-to-apply-css-to-iframe)。

# javascript - 在 jquery .post 中需要将 json 数组格式化为 html 表

> ID：13333992
> 
> 赞同：2
> 
> 时间：2012-11-11T18:16:53.927
> 
> 标签：javascript, jquery, json

我完全是新手，并学会了将我的旧式编码移至这些。现在我需要帮助。

我的 JSON（数组）-我的 php 结果`json_encode`：

```
{"e_id":"12101","e_password":kkkk,"e_secretQuestion":null
{"e_id":"12102","e_password":kkkk,"e_secretQuestion":"abc"}
{"e_id":"12103","e_password":kkkk,"e_secretQuestion":"abc"} 
```

我的jQuery：

```
e.preventDefault();
$.post("/general/helper.php?page=login",$(this).serialize(),function(data,status){          
    if (data != null){
        var tblheader = "<table><tr>";  
        var tblbody= "";    
        $.each(data, function(i, field){
            tblbody = tblbody + "<td style='border:1px solid gray'>" + field + "</td>";
        });
        tblbody = tblheader + tblbody + "</tr></table>";
        $("#hasil").html(tblbody);
    }
},"json"); 
```

问题：

如果仅返回 1 行，则其唯一格式为表格，但如果更多行表格未格式化...请帮助，如何简单地将其格式化为表格？此时，请不要建议我使用插件将 json 数组格式化为表格。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T18:55:46.780

如果您`data`是已解析的 JSON 数组，那么您的代码应如下所示：

```
e.preventDefault();
$.post("/general/helper.php?page=login",$(this).serialize(),function(data,status){          
    if (data != null){
        var tblbody = "<table>";    
        $.each(data, function(i, row){
            tblbody += '<tr>';
            $.each(row, function(i, field) {
                tblbody += "<td style='border:1px solid gray'>" + field + "</td>";
            });
            tblbody += '</tr>';
        });
        tblbody += "</table>";
        $("#hasil").html(tblbody);
    }
},"json"); 
```

# jquery-ui - 如何在此处更改关闭按钮的文本？

> ID：13333999
> 
> 赞同：1
> 
> 时间：2012-11-11T18:17:55.933
> 
> 标签：jquery-ui

```
if (typeof (ValidatorOnSubmit) == "function" && ValidatorOnSubmit() == false) {
            $("#validation_dialog").dialog({
                title: "Form alanlarini kontrol edin!",
                modal: true,
                resizable: false,
                show: "blind",
                hide: "explode",
                buttons: {                        
                    Close: function () {
                        $(this).dialog('close');
                    }
                }
            });
            return false;
        } 
```

我的页面上有这个，它工作正常，但我在哪里可以更改“关闭”按钮的文本？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-11T18:21:43.853

只需在此处指定一个名称：

```
buttons: {                        
    "Some other name": function () {
        $(this).dialog('close');
    }
} 
```