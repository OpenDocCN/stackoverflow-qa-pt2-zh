# StackOverflow 问答 16219000-16219999

# c# - MOQ 验证执行不起作用

> ID：16219005
> 
> 赞同：0
> 
> 时间：2013-04-25T15:36:06.990
> 
> 标签：c#, unit-testing, moq

我正在尝试模拟我的内部虚拟方法。当我调试时，我可以看到我到达了我期望的地方，并且我的内部虚拟方法被执行，但测试失败了。此外，我验证了“this”上下文是代理而不是常规类实例。

方法：

```
public void MyMethod() { MyInternalMethod() }
internal virtual void MyInternalMethod() {} 
```

单元测试部分：

```
Because of = () => { myMock.Object.MyMethod() };

It should_run_inner_internal_virtual_MyInternalMethod = () =>
{
              myMock.Verify(x => x.MyInternalMethod(),Times.Once());
}; 
```

我会很感激任何帮助。

亲切的问候。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T17:35:43.150

不确定您的代码是否可以编译，但我认为由于 Moq 和被测类位于不同的程序集中，您可能需要告诉被测对象的程序集以使 Moq 程序集内部可见。internal 仅使该程序集可见方法/属性/类。

尝试将此添加到您的 AssemblyInfo.cs 文件中（用于测试中的程序集）

```
[assembly: InternalsVisibleTo("DynamicProxyGenAssembly2")] 
```

假设 DynamicProxyGenAssembly2 是您的 Moq 的程序集名称。如果您的测试也在不同的程序集中，那么您也需要使内部组件对该程序集可见。我刚刚为此编写了一个 nunit 测试，它通过了。

```
[Test]
public void ShouldCallMyInternalMethodFromMyMethod()
{
  myMock = new Mock<MyClass>();
  myMock.Object.MyMethod();
  myMock.Verify(mockObj=> mockObj.MyInternalMethod(), Times.Once());
} 
```

# django - django-cms 未登录时出现 404 错误

> ID：16219007
> 
> 赞同：1
> 
> 时间：2013-04-25T15:36:16.617
> 
> 标签：django, content-management-system, django-cms

我正在运行 django-cms 2.4.1 并且在未登录时尝试访问任何页面（根目录除外）时出现 404 not found 错误。一旦我登录到管理控制台，所有页面都可以访问为预期的。没有设置页面权限，我已经仔细检查过“需要登录”没有在任何地方设置。关于可能导致这种情况的任何想法？

# jquery - 对 jquery .change() 的 Prgrammatic 调用未触发附加隐藏字段上的绑定更改的事件

> ID：16219009
> 
> 赞同：0
> 
> 时间：2013-04-25T15:36:20.040
> 
> 标签：jquery, forms, events, triggers

几个小时以来我一直在寻找可能的线索，结果一无所获，所以我以你的大智慧向你求助……

所以我有一个表单，在那个表单中有一个我称之为选择工具的字段，它由两部分组成，一个显示友好标签的字段，一个用于存储所选 ID 的隐藏字段。它看起来像这样：

```
<input type="hidden" name="selector" id="selector" value="" />
<input type="text" readonly="readonly" id="selector_label" value="" />
<a.... link to selection tool .... /> 
```

选择工具实际上在 iframe 中打开，这很重要，但不要担心，没有 XSS 错误。用户单击工具中的记录后，该远程页面将调用以下命令：

```
$('#selector_label',window.parent.document).val(label);
$('#selector',window.parent.document).val(selected).change();
...script to close iframe... 
```

如您所见，它直接更新表单，第二个更新隐藏部分值的语句通过调用`.change()`完成以触发任何侦听器。最后它关闭了自己。

为了使这更复杂，有一个分配给该字段的侦听器，如下所示：

```
$('#selector').on('blur change', function() {
    ... script to update a related field ...
}); 
```

请注意，`blur`这实际上是一个动态脚本，并且`.each()`出于不同的原因分配给了许多字段。我把它包括在内，以防你告诉我它会以某种方式干扰。

所以选择器工具很好用，更新标签和隐藏字段，但是我动态分配的监听器没有触发，所以相关字段没有得到新更改的值`#selector`字段的值。

任何想法为什么我的听众不会检测到以编程方式触发的`.change()`事件？谢谢你尽你所能的帮助！

- - - 编辑 - - -

根据评论中的建议更新以使用`.on()`而不是`.bind()`，不幸的是没有变化。

仅供参考，我知道这适用于其他领域，因为还有**其他人以相同的形式使用这个“相对”事件来更新并且它们工作正常**。重要的区别和可能的原因是**它们使用可见和可编辑的文本字段而不是隐藏字段**。

----- 编辑 2 -----

出于测试目的，我将隐藏字段更改为可见字段，仍然是只读的，最初它没有效果，选择器仍然有效，但分配的事件没有。然而，一个有趣的怪癖是，如果我单击该（以前隐藏的）字段，然后再次在其他地方触发`blur`事件状态，则分配的事件侦听器会触发并更新相关事件。那么为什么事件仅在我与字段交互时才触发，而不是在我以编程方式告诉它触发`.change()`事件时触发？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T15:41:24.007

正如我在评论中提出的那样，也许您的解决方案是使用 .on() 而不是 .bind() 来附加事件。来自 jQuery 网站：

*.on() 方法将事件处理程序附加到 jQuery 对象中当前选定的元素集。从 jQuery 1.7 开始，.on() 方法提供了附加事件处理程序所需的所有功能。有关从旧 jQuery 事件方法转换的帮助，请参阅 .bind()、.delegate() 和 .live()。要删除与 .on() 绑定的事件，请参阅 .off()。要附加仅运行一次然后自行删除的事件，请参阅 .one()*

# ocaml - 如何在 OCaml 中将浮点数转换为 little-endian 格式的字节？

> ID：16219014
> 
> 赞同：0
> 
> 时间：2013-04-25T15:36:30.573
> 
> 标签：ocaml

如何将浮点数转换为**little-endian 格式的字节**？

像

```
5.05 -> \x33\x33\x33\x33\x33\x33\x14\x40 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-25T15:43:48.540

像这样：

```
# let v = Int64.bits_of_float 5.05 in
  for i = 0 to 7 do
    Printf.printf "%Lx " (Int64.logand 255L (Int64.shift_right v (i*8))) ;
  done 
  ;;
33 33 33 33 33 33 14 40 - : unit = () 
```

# android - 在android自定义列表视图中向右滑动显示按钮

> ID：16219015
> 
> 赞同：3
> 
> 时间：2013-04-25T15:36:31.660
> 
> 标签：android, listview, android-listview, adapter, onfling

我正在尝试实现，在自定义列表视图中向右滑动显示按钮。我现在面临的问题是，我实现了我在网上找到的 onSwipeTouchListener。我可以看到滑动按钮。但它并不一致，我的意思是如果我在一行上向右滑动，按钮将显示在另一行。这是我尝试过的。

我创建了一个用于保存视图的适配器

```
//TransactionAddDropViewHolder

        public static final class TransactionAddDropViewHolder {

    public View moveUpButton = null;
    public View moveDownButton = null;
    public View withdrawButton = null;
    public View reviewButton = null;

    public View approveButton = null;
    public View rejectButton = null;

    public LinearLayout addContainer = null;
    public LinearLayout dropContainer = null;

    public void swipeButtons() {
        addDropListView.setOnTouchListener(new OnSwipeTouchListener() {

            public void onSwipeRight() {
                withdrawButton.setVisibility(View.VISIBLE);
            }

            public void onSwipeLeft() {
                withdrawButton.setVisibility(View.INVISIBLE);
            }
        });
    }

    public void showUserButtons() {
        this.moveUpButton.setVisibility(View.VISIBLE);
        this.moveDownButton.setVisibility(View.VISIBLE);
        // this.withdrawButton.setVisibility(View.VISIBLE);
    }

    public void hideUserButtons() {
        this.moveUpButton.setVisibility(View.GONE);
        this.moveDownButton.setVisibility(View.GONE);
        // this.withdrawButton.setVisibility(View.GONE);
    } 

} 
```

这是我显示 onSwipeButton 的自定义视图

```
@Override
    public View getView(final int position, View convertView,
            ViewGroup parent) {

        final TransactionAddDrop addDropData = this.addDropList.get(position);

        TransactionAddDropViewHolder holder = null;

        if (convertView == null) {
            convertView = inflater.inflate(R.layout.fragment_pending_transaction_list_item, null);
            holder = new TransactionAddDropViewHolder();

holder.withdrawButton = convertView.findViewById(R.id.pendingTransactionItem_withdrawButton);
            holder.addContainer = (LinearLayout) convertView.findViewById(R.id.pendingTransactionItem_addContainer);
            **holder.swipeButtons();** 
            convertView.setTag(holder);
        } else {
            holder = (TransactionAddDropViewHolder) convertView.getTag();
            holder.swipeButtons(); 
        } 
```

这是我的 OnSwipeTouchListener 类

```
 private final class GestureListener extends SimpleOnGestureListener {

    private static final int SWIPE_THRESHOLD = 100;
    private static final int SWIPE_VELOCITY_THRESHOLD = 100;

    @Override
    public boolean onDown(MotionEvent e) {
        return true;
    }

    @Override
    public boolean onFling(MotionEvent e1, MotionEvent e2, float velocityX, float velocityY) {
        boolean result = false;
        try {
            float diffY = e2.getY() - e1.getY();
            float diffX = e2.getX() - e1.getX();
            if (Math.abs(diffX) > Math.abs(diffY)) {
                if (Math.abs(diffX) > SWIPE_THRESHOLD && Math.abs(velocityX) > SWIPE_VELOCITY_THRESHOLD) {
                    if (diffX > 0) {
                        onSwipeRight();
                    } else {
                        onSwipeLeft();
                    }
                }
            } else {
                if (Math.abs(diffY) > SWIPE_THRESHOLD && Math.abs(velocityY) > SWIPE_VELOCITY_THRESHOLD) {
                    if (diffY > 0) {
                        onSwipeBottom();
                    } else {
                        onSwipeTop();
                    }
                }
            }
        } catch (Exception exception) {
            exception.printStackTrace();
        }
        return result;
    }
} 
```

添加 XML 布局

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:app="http://schemas.android.com/apk/res/com.cbssports.nflapp.ffb"
android:layout_width="match_parent"
android:layout_height="wrap_content"
android:id="@+id/swipeRight"
android:orientation="vertical" >

<LinearLayout
    android:id="@+id/claimlayout"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:orientation="horizontal" >

    <LinearLayout
        android:id="@+id/claim"
        android:layout_width="60dp"
        android:layout_height="wrap_content"
        android:gravity="center"
        android:orientation="vertical"
        android:padding="10dp" >

        <com.cbssports.nflapp.ffb.CustomText
            android:id="@+id/claimNumber"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_centerVertical="true"
            android:text="1"
            android:textColor="#B4B4B5"
            android:textSize="36dp"
            app:typeface="oswald_regular" />
    </LinearLayout>

    <RelativeLayout
        android:id="@+id/pendingPlayers"
        android:layout_width="200dp"
        android:layout_height="wrap_content" >

        <LinearLayout
            android:id="@+id/tradeDate"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentTop="true"
            android:orientation="horizontal"
            android:layout_toRightOf="@+id/claimlayout"
            android:paddingTop="5dp" >

            <com.cbssports.nflapp.ffb.CustomText
                android:id="@+id/pendingTransactionItem_teamName"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:textColor="#B4B4B5"
                android:textSize="9dp"
                app:typeface="oswald_regular" />

            <com.cbssports.nflapp.ffb.CustomText
                android:id="@+id/pendingTransactionItem_bidAmount"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:background="#797979"
                android:text=""
                android:textColor="#ffffff"
                android:textSize="9dp" />
        </LinearLayout>

        <LinearLayout
            android:id="@+id/adddropView"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_below="@+id/tradeDate"
            android:layout_toRightOf="@+id/claimlayout"
            android:orientation="vertical" >

            <LinearLayout
                android:id="@+id/addViewContainer"
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:orientation="horizontal" >

                <com.cbssports.nflapp.ffb.CustomText
                    android:layout_width="50dp"
                    android:layout_height="wrap_content"
                    android:paddingRight="10dp"
                    android:text="ADD"
                    android:textColor="#797979"
                    android:textSize="15dp"
                    app:typeface="oswald_regular" />

                <LinearLayout
                    android:id="@+id/pendingTransactionItem_addContainer"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:orientation="vertical" />
            </LinearLayout>

            <LinearLayout
                android:id="@+id/adddropViewContainer"
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:layout_toRightOf="@+id/claimlayout"
                android:orientation="horizontal" >

                <com.cbssports.nflapp.ffb.CustomText
                    android:layout_width="50dp"
                    android:layout_height="wrap_content"
                    android:paddingRight="10dp"
                    android:text="DROP"
                    android:textColor="#797979"
                    android:textSize="15dp"
                    app:typeface="oswald_regular" />

                <LinearLayout
                    android:id="@+id/pendingTransactionItem_dropContainer"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:orientation="vertical" />
            </LinearLayout>
        </LinearLayout>
    </RelativeLayout>

    <LinearLayout
        android:id="@+id/pendingTransactionItem_userButtonContainer"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentRight="true"
        android:layout_gravity="center_vertical"
        android:layout_toRightOf="@+id/pendingPlayers"
        android:gravity="center"
        android:orientation="vertical" >

        <LinearLayout
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentRight="true"
            android:layout_gravity="center_vertical"
            android:gravity="center"
            android:orientation="horizontal" >

            <Button
                android:id="@+id/pendingTransactionItem_moveUpButton"
                android:layout_width="20dp"
                android:layout_height="15dp"
                android:layout_margin="3dp"
                android:background="@drawable/gfx_up_arrow"
                android:padding="1dp"
                android:textColor="#ffffff"
                android:textSize="7sp"
                android:visibility="visible" />

            <Button
                android:id="@+id/pendingTransactionItem_moveDownButton"
                android:layout_width="20dp"
                android:layout_height="15dp"
                android:layout_margin="3dp"
                android:background="@drawable/gfx_down_arrow"
                android:padding="1dp"
                android:textColor="#ffffff"
                android:textSize="7sp"
                android:visibility="visible" />
        </LinearLayout>

        <ImageView
            android:id="@+id/pendingTransactionItem_withdrawButton"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:padding="1dp"
            android:src="@drawable/ic_cancelclaim"
            android:visibility="gone" />

        <!-- Transaction Review -->

        <ImageView
            android:id="@+id/pendingTransactionItem_reviewButton"
            android:layout_width="38dp"
            android:layout_height="38dp"
            android:padding="1dp"
            android:src="@drawable/btn_review"
            android:visibility="gone" />
    </LinearLayout>
</LinearLayout> 
```

再增加一个问题。获取视图的总计数。但想在不同的布局中显示。这是我的 onCreatedView

```
public View onCreateView(LayoutInflater inflater, ViewGroup container,
        Bundle savedInstanceState) {

    fragmentPendingTrades = inflater.inflate(R.layout.fragment_transactions_pending, container, false);
    pendingTradesView = inflater;

    return fragmentPendingTrades;
}

    public void onViewCreated(final View view, final Bundle savedInstanceState) {

    this.addDropListView = (ListView) view.findViewById(R.id.transactions_pending_transactionsListView);
    this.addDropAdapter = new TransactionAddDropAdapter(pendingTradesView);
    this.addDropListView.setAdapter(this.addDropAdapter);
    this.emptyTransationsContainer = view.findViewById(R.id.transactions_pending_transactions_emptyContainer);

    TextView getTotalCount = (TextView) view.findViewById(R.id.transactions_pending_TransactionsAddDropCount);

    getTotalCount.setText(""+addDropListView.getCount());

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T16:55:19.630

因此，正如我所见，这可以通过两种方式完成：

1.  听整个列表上的滑动，找出滑动发生在哪一行，并显示/隐藏正确行的按钮。
2.  聆听每一行的滑动，并显示/隐藏该行的按钮。

现在您正在列表中设置侦听器，但尝试应用显示/隐藏适配器中附加的按钮。在某种程度上，你正在做每个解决方案的一半。有了你所拥有的，我建议你选择#2。

在您的`TransactionAddDropViewHolder`中，您需要`View`在行布局中获取对根的引用，因此我们可以对其进行设置`OnSwipeTouchListener`。

```
public static final class TransactionAddDropViewHolder {

    public View rootView = null;

    // Your other code

    public void swipeButtons() {
        rootView.setOnTouchListener(new OnSwipeTouchListener() {

            public void onSwipeRight() {
                withdrawButton.setVisibility(View.VISIBLE);
            }

            public void onSwipeLeft() {
                withdrawButton.setVisibility(View.INVISIBLE);
            }
        });
    }

    // Your other code

} 
```

接下来，在您的`getView`方法中，更新它，以便您获得对布局`TransactionAddDropViewHolder`中根的引用。`View`

```
@Override
public View getView(final int position, View convertView, ViewGroup parent) {

    final TransactionAddDrop addDropData = this.addDropList.get(position);

    TransactionAddDropViewHolder holder = null;

    if (convertView == null) {
        convertView = inflater.inflate(R.layout.fragment_pending_transaction_list_item, null);
        holder = new TransactionAddDropViewHolder();

        // Get a reference to the root of the row layout
        holder.rootView = convertView.findViewById(R.id.swipeRight); 

        holder.withdrawButton = convertView.findViewById(R.id.pendingTransactionItem_withdrawButton);
        holder.addContainer = (LinearLayout) convertView.findViewById(R.id.pendingTransactionItem_addContainer);

        holder.swipeButtons();
        convertView.setTag(holder);
    } else {
        holder = (TransactionAddDropViewHolder) convertView.getTag();
        holder.swipeButtons(); 
    }
} 
```

您还会遇到一个问题，滑动时按钮会正确显示，但如果用户继续滚动，它将出现在其他行上。这是因为`ListView`回收其行的`View`s。我建议你做两件事：

1.  当按钮出现后用户再次开始滚动时，您将再次隐藏它。这就是 iOS 在列表中使用“滑动删除”所做的事情。
2.  `boolean`例如，如果该行处于按钮可见的模式，则使用 a存储在您的数据对象中`isDeleteShowing`。然后在你的 onSwipe 回调中，你设置`isDeleteShowing`为真/假。最后，在您的 中`getView`，您根据`isDeleteShowing`该数据行显示/隐藏按钮。

希望这一切都有帮助。

# asp.net-mvc-3 - jQuery - 在自动完成中使用键/值对

> ID：16219026
> 
> 赞同：6
> 
> 时间：2013-04-25T15:36:49.437
> 
> 标签：asp.net-mvc-3, jquery-ui, jquery, jquery-ui-autocomplete

在我的 ASP MVC 视图中，我从控制器传回了一个键/值对。查看 fiddler 并在 Chrome 的调试器中查看后，我可以看到信息正在正确传回。

我希望`value`键/值对的 是`autocomplete`列表中显示的项目。当用户从列表中选择一个项目时，我希望将该项目`key`放入文本框中。

这是我认为的 jQuery 代码

```
$(function () {
    $('#DRMCompanyId').autocomplete({
        source: '@Url.Action("compSearch", "AgentTransmission")',
        minLength: 2,
        select: function (event, ui) {
            $('#DRMCompanyId').val(ui.item.label);
        }
    });
}); 
```

我注意到一件事 - 如果我将`ui`变量添加到浏览器调试器中的监视列表中，我注意到标签和值完全相同。然而，我再次看到返回的是完整的键/值对。

这是搜索完成后网络/响应控制台的屏幕截图。有些数据是私有的，所以我把它涂黑了，但是你可以看到有一个键/值对被返回。

![在此处输入图像描述](https://i.stack.imgur.com/jRqM5.png)

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-04-25T16:07:08.313

您需要自己发出 AJAX 请求并将数据转换为 jQueryUI 期望的格式：

```
$(function () {
    $('#DRMCompanyId').autocomplete({
        source: function (request, response) {
           $.ajax({
               url: '@Url.Action("compSearch", "AgentTransmission")',
               type: 'GET',
               dataType: 'json',
               data: request,
               success: function (data) {
                   response($.map(data, function (value, key) { 
                        return {
                            label: value,
                            value: key
                        };
                   }));
               }
           });
        },
        minLength: 2
    });
}); 
```

此外，`value`自动完成项目的属性会自动放置在`input`选择该项目时，因此不需要自定义`select`处理程序。

**示例：http:** [//jsfiddle.net/Aa5nK/60/](http://jsfiddle.net/Aa5nK/60/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-11-30T08:14:51.100

与上面相同，稍微详细说明

前端

```
<input id="CompanySearch" type="text" />

<script>
    $(function () {
        $("#CompanySearch").autocomplete({
            source: function (request, response) {
                $.ajax({
                    url: '@Url.Action("GetCompanyAutoComplete", "Admin")',
                    dataType: "json",
                    data: { term: request.term },
                    success: function (data) {
                        response(data);
                    }
                });
            },
            minLength: 2
        });
    });
</script> 
```

C＃

```
public JsonResult GetCompanyAutoComplete(string term)
{
    var search = term.Trim();

    var itemList = (from items in db.TblProductSuggestionFirsts where items.Name.StartsWith(search) select new { label = items.Name, value = items.Name }).Take(50).ToList();

    return Json(itemList, JsonRequestBehavior.AllowGet);

} 
```

Json结果格式

[![在此处输入图像描述](https://i.stack.imgur.com/LPRZl.png)](https://i.stack.imgur.com/LPRZl.png)

# c++ - 矢量擦除错误

> ID：16219027
> 
> 赞同：5
> 
> 时间：2013-04-25T15:36:50.470
> 
> 标签：c++, vector

我在 C++ 中有以下代码：

```
#include <iostream>
#include <cstdlib>
#include <ctime>
#include <vector>
int main ()
{
    srand(time(0));
    int noOfElements = 9;
    for (int a = 0; a < 9; a++)
    {
        std::vector<int> poss;
        for (int a = 1; a <= 9; a++)
            poss.push_back(a);
        for (int b = 0; b < 9; b++)
        {
            int random = rand() % 9;
            std::cout << poss[random];
            poss.erase(random);
            noOfElements--;
        }
        std::cout << "\n";
    }
} 
```

然而，当我运行它时，它会返回：

```
error: no matching function for call to 'std::vector<int>::erase(int&)' 
```

对于第 13 行。

为什么会这样，我该如何纠正？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-04-25T15:38:04.473

您不能直接从向量中擦除*值*（向量是序列容器，而不是关联容器）：您需要为要擦除的元素提供迭代器。

为了获得迭代器，您可以：

*   根据元素的值（例如使用[`std::find()`](http://en.cppreference.com/w/cpp/algorithm/find)）查找元素，然后将返回的迭代器提供给[`erase()`](http://en.cppreference.com/w/cpp/container/vector/erase)成员函数的输入，或者
*   通过将偏移量应用于指向向量开头的迭代器（即[`begin()`](http://en.cppreference.com/w/cpp/container/vector/begin)成员函数返回的对象）来获取它。

**在第一种情况下**：

```
#include <vector>
#include <algorithm>

int main()
{
    std::vector<int> v { 1, 2, 3};
    auto i = std::find(begin(v), end(v), 2);
    v.erase(i);
} 
```

上面的代码使用了一些 C++11 特性。在 C++03 中，它看起来如下：

```
#include <vector>
#include <algorithm>

int main()
{
    std::vector<int> v;

    v.push_back(1);
    v.push_back(2);
    v.push_back(3);

    std::vector<int>::iterator i = std::find(v.begin(), v.end(), 2);
    v.erase(i);
} 
```

**在第二种情况下**，如果您知道向量内元素的*索引*（例如`pos`），那么您可以通过以下方式轻松获得迭代器：

```
v.begin() + pos 
```

或者（仅限 C++11）你可以这样做：

```
next(begin(v), pos); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-04-25T15:39:36.447

你必须通过一个迭代器来擦除。所以试试

```
poss.erase(poss.begin() + random); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-25T15:56:28.543

矢量擦除函数采用迭代器而不是值。而且您还需要检查边界条件以查看您正在擦除的索引是否超出范围。

```
std::vector<int>::iterator itr = poss.begin() + random;
if(itr != poss.end())
{
  poss.erase(itr);
} 
```

# android - 带有ndk平台错误帮助'_IOR'的c ++未在此范围内声明

> ID：16219028
> 
> 赞同：1
> 
> 时间：2013-04-25T15:36:51.497
> 
> 标签：android, c++, android-ndk, ioctl

任何人都可以告诉我为什么在使用 ndk 编译 cpp 代码时会出现此错误：

```
C:/ndk/samples/fmservice/src/jni/JFmRxNative.cpp:304:24: error: expected primary-expression before 'struct'
C:/ndk/samples/fmservice/src/jni/JFmRxNative.cpp:304:24: error: '_IOR' was not declared in this scope
line 304 : res = ioctl(radio_fd,VIDIOC_QUERYCAP,&cap); character 24: VIDIOC_QUERYCAP 
```

我使用 C:\ndk\platforms\android-14 文件

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-26T13:15:33.770

接缝我需要添加这个`#include <sys/ioctl.h>`

# reporting-services - 日历返回每个员工的重复行

> ID：16219035
> 
> 赞同：0
> 
> 时间：2013-04-25T15:37:08.167
> 
> 标签：reporting-services, calendar

我在 SSRS 中创建了一个简单的表格，左侧有员工，每列是一个数字 1 - 31。当员工预订假期时，它会使用 if 函数在他们休假的日期中放置一个 X介于日期从和日期到列之间。

这很好用，但是当该月预订了多个假期时，员工将有重复的行，而不是沿着表格中的同一行。添加组功能时，它只显示他们在当月预订的第一个假期。是否可以将所有行合二为一？

这是我的 SQL：

```
SELECT *
    ,firstname + ' ' + lastname AS 'full'
    ,datediff(d, holidaystart, holidayend) AS 'days'
    ,DAY(DATEADD(s, - 1, DATEADD(mm, DATEDIFF(m, 0, holidaystart) + 1, 0))) AS LastDay
FROM dbo.holdates
WHERE Month(holidaystart) = Param1
    AND holyear = '8'
    AND holidaystat = 'Approved'
    AND location = ISNULL(Param2, location)
    AND (holyear = @Param3 - 2005)
    OR Month(holidayend) = Param1
    AND (holyear = Param3 - 2005)
    AND holidaystat = 'Approved'
    AND location = ISNULL(Param2, location)
ORDER BY (firstname + ' ' + lastname) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-30T12:21:31.463

如果您使用 CTE 生成要报告的日期范围，然后将其连接到实际的假期日期，这会变得更容易。CTE 看起来像这样：

```
DECLARE @fromDate DATE = '20130701',
        @toDate DATE = '20130801';

WITH dates
AS (    SELECT @fromDate "date"

        UNION ALL

        SELECT DATEADD(dd, 1, "date")
        FROM dates
        WHERE DATEADD(dd, 1, "date") <= @toDate
    )
-- Continued below... 
```

然后针对此 CTE 选择您的数据，如下所示：

```
SELECT dates."date"
      ,CASE WHEN h.holidaystart IS NOT NULL THEN 'X' ELSE NULL END AS HasHoliday
      ,firstname + ' ' + lastname AS "full"
      ,datediff(d, holidaystart, holidayend) AS "days"
FROM dates
     LEFT JOIN @holdates h ON dates."date" BETWEEN h.holidaystart AND h.holidayend
WHERE Month(holidaystart) = Param1
    AND h.holyear = '8'
    AND h.holidaystat = 'Approved'
    AND h.location = ISNULL(Param2, location)
ORDER BY (firstname + ' ' + lastname) 
```

这将给出一个结果集：

```
date            HasHoliday  full
--------------- ----------- ---------
2013-07-01      NULL        NULL
2013-07-02      NULL        NULL
2013-07-03      NULL        NULL
2013-07-04      NULL        NULL
2013-07-05      X           John
2013-07-05      X           Mark
2013-07-06      X           John
2013-07-06      X           Mark
2013-07-07      X           John
etc. 
```

现在在 SSRS 中，您需要做的就是在其中添加一个矩阵：

*   分组行月中的某一天
*   基于月份（如果需要）然后按人对列进行分组
*   使用`HasHoliday`单元格中的值

无论如何，上述数据集是创建类似日历的报告的更方便的基础。

# javascript - 是否有适用于 iOS 和 Android 的原生控件的 javascript 框架？

> ID：16219038
> 
> 赞同：1
> 
> 时间：2013-04-25T15:37:13.997
> 
> 标签：javascript, android, iphone, ios, cross-platform

我正在尝试为 iOS 和 Android 制作跨平台游戏。它需要绘制到画布（实际的游戏部分）和通过本机控件（例如选择选项）看起来更好的导航。理想情况下，我希望编写一次代码并让它在两个平台上都运行。

使用 cocos2d-html5/javascript 在图形方面这似乎很可行。我还没有 100% 弄清楚，但我认为我可以用 javascript 编写所有图形代码，并且无需修改即可在 iPhone、Android 和 html5 上运行。

[在使用文件系统、网络和通知等功能方面， PhoneGap](http://phonegap.com/about/feature/)似乎适合我的目的。我还没有看到如何结合 cocos2d-javascript 和 PhoneGap，但它在理论上似乎是可能的。

我看到有一些 JavaScript 库使用 iPhone 的本机控件，例如[NimbleKit](http://www.nimblekit.com/index.php)。不过，这只适用于 iOS。是否有任何库可以使用相同的代码为 iPhone 和 Android 创建具有本机外观的控件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T16:13:11.987

根据您正在编写的游戏，性能可能会或可能不会成为问题。如果是这样，使用画布和 Web 视图可能是个问题。据我了解，您可以使用 cocos2d 的 javascript 绑定并在每个平台上通过 cocos2d 和 cocos2d-x 运行它。这很可能会给您带来更好的性能，因为您可以访问 OpenGL 渲染。在此处阅读有关 cocos2d 和 cocos2d-x 中 javascript 的更多信息：[https ://github.com/cocos2d/cocos2d-iphone/wiki/cocos2d-and-JavaScript](https://github.com/cocos2d/cocos2d-iphone/wiki/cocos2d-and-JavaScript)

在 UI 方面，cocos2d 不会帮助您访问标准组件，据我所知，Phonegap 也不会。如果您只想从 UI 访问某些特定功能，您总是可以为 Phonegap 编写自己的插件。这是一个相当简单的过程，但可能不是您想要为整个 UI 做的事情。不过，可能有人已经这样做了。Phonegap 有很多插件。

我的建议是先看看 cocos2d-html5 是否会给你足够的性能。另外，请让我知道您对表演的看法。如果它适用于移动设备，cocos2d-html5 似乎是一个非常方便的选择。

最后，cocos2d 和 Phonegap 之间的集成：如果你使用 cocos2d-html5，集成应该是微不足道的。Phonegap 基本上是在一个应用程序中打包一个网页，所以把你的 cocos2d-canvas 放在你的页面上并链接到你的 cocos2d-javascript。完毕。如果您使用非 html5 版本的 cocos2d，一种集成方法是将您的 cocos2d-game 放入 Phonegap 插件并将其插入您的 Phonegap 页面。

# spring - GenericJDBCException - 无法更新

> ID：16219045
> 
> 赞同：0
> 
> 时间：2013-04-25T15:37:40.110
> 
> 标签：spring, hibernate, jdbc

我正在尝试更新数据库中的记录，但出现以下错误。

我试图弄清楚这个错误到底意味着什么。SQLCODE -302 表示其中一个值可能超出了允许的长度，因此我检查了所有保存到数据库中的值 - 当我获取这些值并手动运行查询时，记录正在更新。

> JDBCException W org.hibernate.util.JDBCExceptionReporter logExceptions SQL 错误：-302，SQLState：22001
> 
> JDBC异常E
> 
> org.hibernate.util.JDBCExceptionReporter logExceptions DB2 SQL 错误：SQLCODE: -302, SQLSTATE: 22001, SQLERRMC: null AbstractFlush E
> 
> org.hibernate.event.def.AbstractFlushingEventListener performExecutions 无法将数据库状态与会话同步
> 
> org.hibernate.exception.GenericJDBCException：无法更新：[com.me.model.MyClass#6849972133] 在 org.hibernate.exception.SQLStateConverter.handledNonSpecificException(SQLStateConverter.java:82) 在 org.hibernate.exception.SQLStateConverter.convert (SQLStateConverter.java:70) 在 org.hibernate.exception.JDBCExceptionHelper.convert(JDBCExceptionHelper.java:43) 在 org.hibernate.persister.entity.BasicEntityPersister.update(BasicEntityPersister.java:2000) 在 org.hibernate.persister。 entity.BasicEntityPersister.updateOrInsert(BasicEntityPersister.java:1909) at org.hibernate.persister.entity.BasicEntityPersister.update(BasicEntityPersister.java:2149) at org.hibernate.action.EntityUpdateAction.execute(EntityUpdateAction.java:75) at org .hibernate.engine.ActionQueue.execute(ActionQueue.java:239) 在 org。hibernate.engine.ActionQueue.executeActions(ActionQueue.java:223) 在 org.hibernate.engine.ActionQueue.executeActions(ActionQueue.java:137) 在 org.hibernate.event.def.AbstractFlushingEventListener.performExecutions(AbstractFlushingEventListener.java:274)在 org.hibernate.event.def.DefaultFlushEventListener.onFlush(DefaultFlushEventListener.java:27) 在 org.hibernate.impl.SessionImpl.flush(SessionImpl.java:730) 在 org.springframework.orm.hibernate3.HibernateAccessor.flushIfNecessary(HibernateAccessor .java:394) 在 org.springframework.orm.hibernate3.HibernateTemplate.execute(HibernateTemplate.java:367) 在 org.springframework.orm.hibernate3.HibernateTemplate.update(HibernateTemplate.java:658) 在 org.springframework.orm。 hibernate3.HibernateTemplate.update(HibernateTemplate.java:654)executeActions(ActionQueue.java:223) 在 org.hibernate.engine.ActionQueue.executeActions(ActionQueue.java:137) 在 org.hibernate.event.def.AbstractFlushingEventListener.performExecutions(AbstractFlushingEventListener.java:274) 在 org.hibernate.event .def.DefaultFlushEventListener.onFlush(DefaultFlushEventListener.java:27) 在 org.hibernate.impl.SessionImpl.flush(SessionImpl.java:730) 在 org.springframework.orm.hibernate3.HibernateAccessor.flushIfNecessary(HibernateAccessor.java:394) 在org.springframework.orm.hibernate3.HibernateTemplate.execute(HibernateTemplate.java:367) at org.springframework.orm.hibernate3.HibernateTemplate.update(HibernateTemplate.java:658) at org.springframework.orm.hibernate3.HibernateTemplate.update( HibernateTemplate.java:654)executeActions(ActionQueue.java:223) 在 org.hibernate.engine.ActionQueue.executeActions(ActionQueue.java:137) 在 org.hibernate.event.def.AbstractFlushingEventListener.performExecutions(AbstractFlushingEventListener.java:274) 在 org.hibernate.event .def.DefaultFlushEventListener.onFlush(DefaultFlushEventListener.java:27) 在 org.hibernate.impl.SessionImpl.flush(SessionImpl.java:730) 在 org.springframework.orm.hibernate3.HibernateAccessor.flushIfNecessary(HibernateAccessor.java:394) 在org.springframework.orm.hibernate3.HibernateTemplate.execute(HibernateTemplate.java:367) at org.springframework.orm.hibernate3.HibernateTemplate.update(HibernateTemplate.java:658) at org.springframework.orm.hibernate3.HibernateTemplate.update( HibernateTemplate.java:654)engine.ActionQueue.executeActions(ActionQueue.java:137) at org.hibernate.event.def.AbstractFlushingEventListener.performExecutions(AbstractFlushingEventListener.java:274) at org.hibernate.event.def.DefaultFlushEventListener.onFlush(DefaultFlushEventListener.java:27)在 org.hibernate.impl.SessionImpl.flush(SessionImpl.java:730) 在 org.springframework.orm.hibernate3.HibernateAccessor.flushIfNecessary(HibernateAccessor.java:394) 在 org.springframework.orm.hibernate3.HibernateTemplate.execute(HibernateTemplate .java:367) 在 org.springframework.orm.hibernate3.HibernateTemplate.update(HibernateTemplate.java:658) 在 org.springframework.orm.hibernate3.HibernateTemplate.update(HibernateTemplate.java:654)engine.ActionQueue.executeActions(ActionQueue.java:137) at org.hibernate.event.def.AbstractFlushingEventListener.performExecutions(AbstractFlushingEventListener.java:274) at org.hibernate.event.def.DefaultFlushEventListener.onFlush(DefaultFlushEventListener.java:27)在 org.hibernate.impl.SessionImpl.flush(SessionImpl.java:730) 在 org.springframework.orm.hibernate3.HibernateAccessor.flushIfNecessary(HibernateAccessor.java:394) 在 org.springframework.orm.hibernate3.HibernateTemplate.execute(HibernateTemplate .java:367) 在 org.springframework.orm.hibernate3.HibernateTemplate.update(HibernateTemplate.java:658) 在 org.springframework.orm.hibernate3.HibernateTemplate.update(HibernateTemplate.java:654)performExecutions(AbstractFlushingEventListener.java:274) at org.hibernate.event.def.DefaultFlushEventListener.onFlush(DefaultFlushEventListener.java:27) at org.hibernate.impl.SessionImpl.flush(SessionImpl.java:730) at org.springframework.orm .hibernate3.HibernateAccessor.flushIfNecessary(HibernateAccessor.java:394) at org.springframework.orm.hibernate3.HibernateTemplate.execute(HibernateTemplate.java:367) at org.springframework.orm.hibernate3.HibernateTemplate.update(HibernateTemplate.java:658 ) 在 org.springframework.orm.hibernate3.HibernateTemplate.update(HibernateTemplate.java:654)performExecutions(AbstractFlushingEventListener.java:274) at org.hibernate.event.def.DefaultFlushEventListener.onFlush(DefaultFlushEventListener.java:27) at org.hibernate.impl.SessionImpl.flush(SessionImpl.java:730) at org.springframework.orm .hibernate3.HibernateAccessor.flushIfNecessary(HibernateAccessor.java:394) at org.springframework.orm.hibernate3.HibernateTemplate.execute(HibernateTemplate.java:367) at org.springframework.orm.hibernate3.HibernateTemplate.update(HibernateTemplate.java:658 ) 在 org.springframework.orm.hibernate3.HibernateTemplate.update(HibernateTemplate.java:654)springframework.orm.hibernate3.HibernateAccessor.flushIfNecessary(HibernateAccessor.java:394) at org.springframework.orm.hibernate3.HibernateTemplate.execute(HibernateTemplate.java:367) at org.springframework.orm.hibernate3.HibernateTemplate.update(HibernateTemplate. java:658) 在 org.springframework.orm.hibernate3.HibernateTemplate.update(HibernateTemplate.java:654)springframework.orm.hibernate3.HibernateAccessor.flushIfNecessary(HibernateAccessor.java:394) at org.springframework.orm.hibernate3.HibernateTemplate.execute(HibernateTemplate.java:367) at org.springframework.orm.hibernate3.HibernateTemplate.update(HibernateTemplate. java:658) 在 org.springframework.orm.hibernate3.HibernateTemplate.update(HibernateTemplate.java:654)

# jsp - Eclipse-HTTP 状态 404

> ID：16219046
> 
> 赞同：0
> 
> 时间：2013-04-25T15:37:40.670
> 
> 标签：jsp, struts2

我知道有人已经问过这个问题，但我没有得到我想要的答案。所以我正在尝试使用 Tomcat 运行 JSP 页面，但我不断收到以下错误消息：

```
HTTP Status 404 - /LoginWeather/

type Status report

message /LoginWeather/

description The requested resource is not available. 
```

* * *

Apache Tomcat/7.0.39

服务器配置正确，localhost:8080 正常。这是我的 web.xml 和我的 .jsp 文件内容：web.xml：

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns="http://java.sun.com/xml/ns/javaee" xmlns:web="http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd" xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd" id="WebApp_ID" version="3.0">
  <display-name>LoginWeather</display-name>
  <welcome-file-list>
    <welcome-file>login.jsp</welcome-file>
  </welcome-file-list>
  <filter>
    <filter-name>struts2</filter-name>
    <filter-class>org.apache.struts2.dispatcher.ng.filter.StrutsPrepareAndExecuteFilter</filter-class>
  </filter>
  <filter-mapping>
    <filter-name>struts2</filter-name>
    <url-pattern>/*</url-pattern>
  </filter-mapping>
</web-app> 
```

登录.jsp:``

```
<%@ page language="java" contentType="text/html; charset=ISO-8859-1"
    pageEncoding="ISO-8859-1"%>
<%@ taglib prefix="s" uri="/struts-tags" %>
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<title>Welcome</title>
</head>
<body>
<s:form>
    <s:textfield label="Username" key="userName"/>
    <s:password label="Password" key="password"/>
    <s:submit/>
</s:form>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T20:57:39.673

尝试添加`index.jsp`以下内容：

```
<%@ page language="java" contentType="text/html; charset=UTF-8"
    pageEncoding="UTF-8"%>
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Refresh" content="0;URL=login.action"/>
<title>Insert title here</title>
</head>
<body> 
```

然后你`web.xml`会看到：

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns="http://java.sun.com/xml/ns/javaee" xmlns:web="http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd" xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd" id="WebApp_ID" version="3.0">
  <display-name>LoginWeather</display-name>
  <welcome-file-list>
    <welcome-file>index.jsp</welcome-file>
  </welcome-file-list>
  <filter>
    <filter-name>struts2</filter-name>
    <filter-class>org.apache.struts2.dispatcher.ng.filter.StrutsPrepareAndExecuteFilter</filter-class>
  </filter>
  <filter-mapping>
    <filter-name>struts2</filter-name>
    <url-pattern>/*</url-pattern>
  </filter-mapping>
</web-app> 
```

加载后`index.jsp`会自动重定向到`login.jsp`.

您也可以尝试通过在浏览器中`login.jsp`输入来显示。`http://localhost:8080/LoginWeather/login.action`

# php - 使用 fputcsv() 在 csv 文件的顶部插入一行？

> ID：16219049
> 
> 赞同：5
> 
> 时间：2013-04-25T15:37:46.927
> 
> 标签：php, csv

很简单的问题。我知道如何使用`fputcsv()`将一行插入到 csv 中，但它会将其插入到底部。有没有办法用它在 csv 的顶部插入一些东西？

我需要向现有的 csv 文件添加标题。

对此的任何帮助都会很棒。

谢谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-25T15:43:41.030

`fputcsv()`在文件指针处插入数据，因此您可以将指针[rewind()](http://www.php.net/manual/function.rewind.php)指向文件的开头。

```
rewind($handle);
fputcsv($handle, $fields); 
```

或者，您可以简单地使用开头的指针打开文件：

```
$handle = fopen('yourfile.csv', 'r+');
fputcsv($handle, $fields); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-25T15:44:34.093

基本上有：

```
fseek($file, 0);
fputcsv($file, $titles, ','); 
```

我认为这对于 PHP 来说是重复的[：如何使用 fputcsv 在 csv 文件的顶部新添加一行？](https://stackoverflow.com/questions/14514069/php-how-can-i-add-newly-one-row-at-the-top-of-the-csv-file-using-fputcsv)

# maven - mvn deploy:deploy-file -- 无法部署工件：找不到工件

> ID：16219052
> 
> 赞同：9
> 
> 时间：2013-04-25T15:38:05.753
> 
> 标签：maven, nexus

我正在尝试将第 3 方供应商的 jar 添加到我们的内部 nexus 存储库中。

我尝试使用以下命令这样做：

```
mvn deploy:deploy-file 
-DgroupId=acme 
-DartifactId=acme 
-Dversion=1.0 
-Dpackaging=jar 
-Dfile=C:\tmp\acme-1.0.jar 
-DrepositoryId=Nexus 
-Durl=http://myserver:8888/nexus/content/repositories/thirdparty/ 
```

在我的 settings.xml 中有以下条目：

```
 <servers>
        <server>
            <id>Nexus</id>
            <username>myusername</username>
            <password>mypassword</password>
        </server>
  </servers> 
```

但我得到这个错误：

```
[ERROR] Failed to execute goal org.apache.maven.plugins:maven-deploy-plugin:2.7:
deploy-file (default-cli) on project standalone-pom: Failed to deploy artifacts:
 Could not find artifact acme:acme:jar:1.0 in Nexus (http://myserver:8888/nexus/c
ontent/repositories/thirdparty) -> [Help 1] 
```

**有什么建议么？**

一些相关信息......我可以使用以下命令安装到我的本地存储库中：

```
mvn install:install-file 
-DgroupId=acme 
-DartifactId=acme 
-Dversion=1.0 
-Dpackaging=jar 
-Dfile=C:\tmp\acme-1.0.jar 
```

我还使用 GAV 参数通过 Nexus Web 界面尝试了“工件上传”：

```
Group: acme
Artifact: acme
Version: 1.0
Packaging: jar 
```

并选择并添加 acme-1.0.jar。这可以很好地完成，但是根据这个 jar 在项目上的“mvn install”会导致：

```
Could not find artifact acme:acme:jar:1.0 in Nexus (http://myserver:8888/nexus/content/groups/public) 
```

我的 pom 包含：

```
<repositories>
  <repository>
    <id>Nexus</id>
    <url>http://myserver:8888/nexus/content/groups/public</url>
    <releases><enabled>true</enabled></releases>
    <snapshots><enabled>true</enabled></snapshots>
  </repository>
</repositories> 
```

非常感谢任何帮助...

[PS我知道这个问题与这个](https://stackoverflow.com/questions/16107789/failed-to-deploy-artifacts-could-not-find-artifact)问题非常相似，但问题似乎是使用了jenkins url，而不是nexus url。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-29T18:47:16.307

回答我自己的问题。我解决了这个问题：

1）如果您在代理服务器后面（即您在 maven settings.xml 中设置了代理服务器）但您的 nexus 服务器是内部的，您可能需要在 settings.xml 中将 nexus 服务器添加为 nonProxyHost，例如

```
<proxies>
  <proxy>
    ...
    <nonProxyHosts>myserver</nonProxyHosts>
  </proxy>
</proxies> 
```

我意识到我需要这样做，因为`"mvn deploy:deploy-file"`我正在运行的命令似乎根本没有到达 nexus repo。例如，我可以在我的 settings.xml 的服务器部分更改 repo id、用户名或密码，但仍然得到完全相同的错误。我还可以将部署命令中的 url 更改为乱码（例如更改为`-Durl=notexist`），甚至完全关闭我的 nexus 存储库，但仍然会收到相同的错误。

2) 确保您的 3rd 方存储库设置为 Release，而不是 Snapshot。为此，请转到 Web GUI，选择 3rd 方存储库的配置选项卡，并确保将存储库策略设置为发布。

我通过查看 catalina.out 日志（我在 Tomcat 中将 nexus 作为战争运行）并看到以下内容发现了这一点：

```
ERROR org.sonatype.nexus.rest.ContentPlexusResource - Got exception during processing request "PUT http://myserver:888/nexus/content/repositories/thirdparty/acme/acme/1.0/acme-1.0.pom": Storing of item thirdparty:/acme/acme/1.0/acme-1.0.pom is forbidden by Maven Repository policy. Because thirdparty is a SNAPSHOT repository 
```

有了这两个修复程序，“mvn deploy:deploy-file”命令和通过 Web GUI 中的“上传工件”选项上传都可以工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-26T05:44:21.680

登录到 nexus Web 控制台并检查 Public Repository 配置并查看第 3 方是否在 Ordered Group Repositories 列表中。

# jquery - 待办事项列表应用程序 - 表：jQuery append() / after() /.parent().parent().remove() 无法正常工作或无法识别

> ID：16219053
> 
> 赞同：0
> 
> 时间：2013-04-25T15:38:08.723
> 
> 标签：jquery

我正在关注这个，制作一个待办事项列表便笺[http://www.paulund.co.uk/create-sticky-notes-to-do-list-in-css-and-jquery](http://www.paulund.co.uk/create-sticky-notes-to-do-list-in-css-and-jquery)

我需要帮助。我的 jquery 代码不起作用/浏览器无法识别。我要做的是在用户单击“添加新”按钮时插入新行。

我粘贴在 jsFiddle 上：** [http://jsfiddle.net/RJjRt/](http://jsfiddle.net/RJjRt/) **

**我的 jQuery 代码：**

```
$(document).ready(function(){
  // Add button click event
  $("#addNew").click(function(){
    addNewRow();
  });
});

// Add a new row when Add Task button is clicked
function addNewRow(){
 var numRows = $('#taskTable tr').length;
 $('#taskTable').append('
  <tr>
   <td><input type="text" id="title-'+numRows+'" placeholder="Your Task Name"/></td>
   <td><input type="text" id="description-'+numRows+'" placeholder="Task Description"/></td>
   <td><input type="button" class="deleteButton" id="delete-'+numRows+'" title="Delete Task" value="Delete" /></td>
  </tr>
 ');
} 
```

**我也试过**

```
$('#taskTable tr:last').after(... 
```

但它也没有奏效。

**我的 HTML 代码：**

```
<div class="around-table">
<table id="taskTable">
  <tr>
    <th>Task</th>
    <th>Description</th>
    <th></th>
  </tr>
  <tr>
    <td><input type="text" id="title-1" placeholder="Your Task Name"/></td>
    <td><input type="text" id="description-1" placeholder="Task Description"/></td>
    <td><input type="button" class="deleteButton" id="delete-1" title="Delete Task" value="Delete" /></td>
  </tr>
  <tr>
    <td><input type="text" id="title-2" placeholder="Your Task Name"/></td>
    <td><input type="text" id="description-2" placeholder="Task Description"/></td>
    <td><input type="button" class="deleteButton" id="delete-2" title="Delete Task" value="Delete" /></td>
  </tr>
</table>

<input type="button" id="addNew" value="Add Task" />

</div> 
```

谢谢你的帮助。

---- 修复后 ---- 现在添加新行函数有效，但删除行函数不适用于新添加的行...

```
// Function that runs on page load
$(document).ready(function(){
  // Add button click event
  $("#addNew").click(function(){
    addNewRow();
  });
  // Delete button click event
  $('.deleteButton').click(function(){
    deleteRow($(this));
  });
});

// Add a new row when Add Task button is clicked
function addNewRow(){
  var numRows = $('#taskTable tr').length;
  $('#taskTable tr:last').after('\
    <tr>\
      <td><input type="text" id="title-'+numRows+'" placeholder="Your Task Name"/></td>\
      <td><input type="text" id="description-'+numRows+'" placeholder="Task Description"/></td>\
      <td><input type="button" class="deleteButton" id="delete-'+numRows+'" title="Delete Task" value="Delete" /></td>\
   </tr>\
  ');
}

// Delete the grandparent of the delete button
// which is the entire row of the table (tr > td > a)
function deleteRow(button){
 button.parent().parent().remove();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T15:45:15.527

你不能在 JavaScript 中使用多行字符串而不需要一点技巧，所以你的代码将在行上失败

```
$('#taskTable').append(' 
```

什么都不会执行。但是，如果您使用反斜杠转义换行符，则可以使用多行字符串：

```
$('#taskTable').append(' \ 
```

只需确保反斜杠确实是该行的最后一个字符。

但是，在这种情况下，您可以改为在 jQuery 中构建 html：

```
$('#taskTable').append(
    $('<tr>').append($('<input>')
        .attr('type','text')
        .attr('id','title-'+numRows)
        .attr('placeholder','Your Task Name')
    ).append($('<input>')
        .attr('type','text')
        .attr('id','description-'+numRows)
        .attr('placeholder','Task Description')
    ).append($('<input>')
        .attr('type','button')
        .attr('id', 'delete-'+numRows)
        .attr('title', 'Delete Task')
        .val('Delete')
        .addClass('deleteButton)
    ))
); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T15:41:25.477

您尝试在 js 中附加多行字符串，就像这样

```
"foo \
bar" 
```

或者

```
 "foo"+
    "bar" 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-25T15:43:40.243

您的代码抛出 SyntaxError: `unterminated string literal`，您应该转义换行符。

```
function addNewRow() {
    var numRows = $('#taskTable tr').length;
    $('#taskTable').append('<tr>\
           <td><input type="text" id="title-' + numRows + '" placeholder="Your Task Name"/></td>\
           <td><input type="text" id="description-' + numRows + '" placeholder="Task Description"/></td>\
           <td><input type="button" class="deleteButton" id="delete-' + numRows + '" title="Delete Task" value="Delete" /></td>\
           </tr>\
   ');
} 
```

# java - 使用 lwjgl 制作可执行 jar 时遇到问题

> ID：16219056
> 
> 赞同：0
> 
> 时间：2013-04-25T15:38:13.703
> 
> 标签：java, netbeans, jar, lwjgl

当我尝试在 NetBeans 中创建可执行 jar 时，出现此错误：

`C:\lwjgl\lwjgl-2.8.5\res is a directory or can't be read. Not copying the libraries.`

res 文件夹包含程序依赖于运行的 jpgs 和 wavs 等文件。我正在使用 lwjgl，这会是问题的一部分吗？这可能是什么原因造成的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T16:28:38.420

如果您尝试从 .jar 文件运行并且它给您这个问题但不是从 IDE 运行，您应该能够使用 winrar 或其他类似程序打开 jar 文件，然后将整个 res 目录复制/粘贴到jar 文件。

然后，您可以使用以下代码在程序中检索您的文件（而不是从“C:\lwjgl\lwjgl-2.8.5\res”中检索的位置：

```
ResourceLoader.getResource(stringLocationToResource); 
```

这将返回您尝试获取的资源。

该文件必须在您的 src 文件旁边，而不是在其中。

# actionscript-3 - ActionScript 3 中的数组拼接问题

> ID：16219059
> 
> 赞同：2
> 
> 时间：2013-04-25T15:38:20.927
> 
> 标签：actionscript-3

```
for each(var e:Enemy in enemies)
{
    if(e.getHealth() == 0)
    {
        enemies.splice(e,1);
    }
} 
```

只要`enemies[0]`首先被杀死，此代码就可以正常工作。如果`enemies[1]`先被杀死，则将两者拼接起来。我怎样才能改变这一点，以便只有生命值为 0 的特定敌人被拼接？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-25T15:51:04.950

最好的方法是在向后遍历时进行拼接。Brent 有一个好主意，但是如果需要将两个相邻的敌人从数组中拼接出来，它可能会失败，因为那些向前的敌人的索引向左移动，因此，当计数器增加时，一个紧邻错过了拼接。

```
for (var i:int=enemies.length-1; i >=0 ; i--)
{
    if(enemies[i].getHealth() == 0)
    {
        enemies.splice(i,1);
    }
} 
```

`for each`也有可能，尽管行为可能会有所不同。

```
for each(var e:Enemy in enemies)
{
    if(e.getHealth() == 0)
    {
        enemies.splice(enemies.indexOf(e),1); // splice() wants an index
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T15:43:05.890

在您正在修改的数组上循环总是很危险的。我认为最简单的方法是：

```
var aliveEnemies:Array = [];
for each(var e:Enemy in enemies)
{
    if(e.getHealth() > 0)
    {
        aliveEnemies.push(e);
    }
}
enemies = aliveEnemies; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-25T15:45:02.357

这将查看并删除任何死去的敌人。请注意使用 i 变量的 for 循环，这是我假设您开始的地方。我不确定如何从 AS3 中的 foreach 循环中获取索引。

```
for (var i:int=0; i < enemies.length; i++)
{
    if(enemies[i] && enemies[i].getHealth() == 0)
    {
        enemies.splice(i,1);
        i--;//index is re-stacked, next element is current element.
    }
} 
```

# xml - 使用 xpath 获取 $variable 值时数组到字符串的转换通知

> ID：16219060
> 
> 赞同：1
> 
> 时间：2013-04-25T15:38:21.783
> 
> 标签：xml, xpath, simplexml, php

我试图使用 xpath 在以下提要中获取类型元素的名称属性。

```
<response request="getHierarchyByMarketType" code="001" 
          message="success" debug="">    
<jonny>    
  <class id="5" name="Formula 1" maxRepDate="2012-12-19" maxRepTime="15:03:34">    
    <type id="4558" name="F1 Championship" lastUpdateDate="2012-11-26"
          lastUpdateTime="16:17:33"> 
```

为此，我正在使用

```
$market_name = $wh_xml->xpath('/response/jonny/class/type/@name'); 
```

然后使用

```
<h2>
  <?= $market_name ?>
</h2> 
```

在我看来，但它并没有返回我预期的*“F1冠军”* ，而是得到了：

> 数组到字符串的转换

注意，但我不确定为什么，我认为 xpath 会将值`@name`作为字符串返回？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T15:45:04.533

编辑：使用 list() 只获取一个值而不是数组：

```
list($market_name) = $wh_xml->xpath('//type/@name');
echo $market_name; 
```

看到它工作：http: [//3v4l.org/rNdMo](http://3v4l.org/rNdMo)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-26T11:17:13.113

在*simeplexml*中，该`xpath()`方法总是返回一个`array`. 因此，它不会返回字符串，并且您会看到警告，因为您将数组用作字符串（输出它）。当您在 PHP 中将数组转换为字符串时，您会收到通知，字符串为*"Array"*。

您会发现`xpath()`在 PHP 手册中记录为 s 方法返回类型：http: [//php.net/simplexmlelement.xpath](http://php.net/simplexmlelement.xpath)以及[关于字符串的 PHP 手册（向下滚动/搜索以下内容）](http://php.net/language.types.string)：

> 数组总是转换为字符串“Array”；正因为如此，`echo`并`print`不能单独显示数组的内容。要查看单个元素，请使用`echo $arr['foo']`. [...]

该规则的唯一例外是如果您的 xpath 查询包含错误，则返回值将是`FALSE`.

因此，如果您正在寻找第一个元素，您可以使用[`list`语言构造](http://php.net/list)（如果您的 xpath-query 没有任何语法错误并且返回至少一个节点）：

```
list($market_name) = $wh_xml->xpath('/response/jonny/class/type/@name');
^^^^^^^^^^^^^^^^^^ 
```

如果您使用的是 PHP 5.4，您还可以直接访问第一个数组值：

```
$market_name = $wh_xml->xpath('/response/jonny/class/type/@name')[0];
                                                                 ^^^ 
```

# javascript - jQuery 函数作为对象的属性值

> ID：16219063
> 
> 赞同：-1
> 
> 时间：2013-04-25T15:38:25.570
> 
> 标签：javascript, jquery, function, object

我在一个对象中有一个对象，该对象包含一个值为 jQuery 函数的属性：

```
var fields = {
    id: {},
    timeStarted: {},
    duration: {},
    status: {},
    name: {
        field: $("#companyName"),
        changeEvent: $("#companyName").on("click", function(){
            alert("bazinga!");
        })
    }
}; 
```

我还有另一个函数，它遍历在其中找到的所有值`fields`并尝试注册更改事件：

```
function registerChangeEvents(){
    $.each(fields, function(field, v){
        $.each(v, function(prop, vv){
            // check which property the loop is on: if changeEvent
            if (prop == "changeEvent"){
                vv();
            }
        });
    });
} 
```

但是，当我运行`registerChangeEvents()`时，控制台返回`Uncaught TypeError: object is not a function`. `changeEvent`我可以用 a包装它的值，`function(){...}`这将使它成为一个可以正常运行的函数。不过，出于某种原因，这似乎不是正确的方法。

如果您有任何想法，请告诉我。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T15:41:20.393

当你有这个：

```
changeEvent: $("#companyName").on("click", function(){
    alert("bazinga!");
}) 
```

代码立即执行，结果`.on()`是原始选定的对象......这只是`$("#companyName")`. 所以`changeEvent`设置为一个 jQuery 对象，包含带有`id`“companyName”的元素。

我会将其更改`name`为：

```
name: {
    field: "#companyName",
    changeEvent: function(){
        alert("bazinga!");
    }
} 
```

然后将您的功能更改为：

```
function registerChangeEvents(){
    $.each(fields, function(prop, v){
        var field, changeEvent;
        $.each(v, function(propp, vv){
            if (propp === "field") field = vv;
            if (propp === "changeEvent") changeEvent = vv;
        });
        if (field && changeEvent) $(field).on("change", changeEvent);
    });
} 
```

我对一件事感到困惑-您将其称为“changeEvent”，但`event`您的原始代码中的“click”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T15:50:27.720

如果您希望注册更改事件，则需要包装点击处理程序附件：

```
name: {
    field: $("#companyName"),
    changeEvent: function() {
        this.field.on("click", function(){
            alert("bazinga!");
        });
    }
} 
```

然后像这样调用它：

```
$.each(fields, function(field, v) {
    if ($.isFunction(v.changeEvent)) {
        v.changeEvent();
    }
} 
```

# visual-studio-2012 - VS 2012 错误？- 驱动程序包项目并不总是使用输出目录

> ID：16219066
> 
> 赞同：1
> 
> 时间：2013-04-25T15:38:32.667
> 
> 标签：visual-studio-2012, driver, wdk, vspackage

在将我的驱动程序项目移动到 WDK8 和 Visual Studio 2012 的过程中，我遇到了一个关于驱动程序包输出目录配置的小问题。幸运的是，使用标准项目模板和以下步骤很容易重现：

1.  打开 VS 2012 并从开始页面选择 New Project
2.  在“新建项目”对话框中，选择已安装 | 模板 | 视觉C++ | Windows 驱动程序 | 网络 | 过滤器驱动程序：NDIS。将位置更改为 C:\Projects，选择“为解决方案创建目录”，然后单击“确定”。
3.  在标准工具栏中，在解决方案平台下拉列表中选择 x64。
4.  在解决方案资源管理器中，选择两个项目，右键单击并从快捷菜单中选择属性。
5.  在配置下拉菜单中选择“所有配置”，设置配置属性 | 一般 | Output Directory to "$(SolutionDir)bin\$(Platform)\$(ConfigurationName)\" 将所有输出放在解决方案目录的 bin 子目录中，然后单击 OK。此时，`dir \Projects\ndislsf1`返回：

    ```
         C:\Projects\ndislwf1 目录

    ```
    04/25/2013  09:42 AM    <DIR>          .
    04/25/2013  09:42 AM    <DIR>          ..
    04/25/2013  09:42 AM    <DIR>          ndislwf1
    04/25/2013  09:42 AM    <DIR>          ndislwf1 Package
    04/25/2013  09:46 AM        14,811,136 ndislwf1.sdf
    04/25/2013  09:42 AM             7,627 ndislwf1.sln
                   2 File(s)     14,818,763 bytes
                   4 Dir(s)   6,701,723,648 bytes free 
    ```

    ```

6.  现在，按 F6 构建解决方案

    到目前为止一切都很好，dir \Projects\ndislsf1 显示我们的 bin 目录已创建，进一步检查显示所有输出文件都正确放置在那里：

    ```
         C:\Projects\ndislwf1 目录

    ```
    04/25/2013  09:47 AM    <DIR>          .
    04/25/2013  09:47 AM    <DIR>          ..
    04/25/2013  09:47 AM    <DIR>          bin
    04/25/2013  09:47 AM    <DIR>          ndislwf1
    04/25/2013  09:47 AM    <DIR>          ndislwf1 Package
    04/25/2013  09:46 AM        14,811,136 ndislwf1.sdf
    04/25/2013  09:42 AM             7,627 ndislwf1.sln
                   2 File(s)     14,818,763 bytes
                   5 Dir(s)   6,695,829,504 bytes free 
    ```

    ```

7.  在标准工具栏中，在解决方案配置下拉列表中选择“Vista 发布”，然后再次按 F6 以构建解决方案

    ```
    C:\Projects\ndislwf1 目录

    2013 年 4 月 25 日上午 9 点 51 分。
    2013 年 4 月 25 日上午 9:51 ..
    2013 年 4 月 25 日上午 9:47
    2013 年 4 月 25 日上午 9:47
    2013 年 4 月 25 日上午 9:47 ndislwf1 包
    2013 年 4 月 25 日上午 9:46 14,811,136 ndislwf1.sdf
    2013 年 4 月 25 日上午 9:42 7,627 ndislwf1.sln
    2013 年 4 月 25 日上午 09:51 x64
                   2 个文件 14,818,763 字节
                   6 Dir(s) 6,689,509,376 字节空闲

    ```

不幸的是，Vista Release 输出被写入 x64 而不是 bin 子目录。事实上，所有其他项目的输出'也忽略了 bin 子目录并以 x64 写入。

有没有其他人遇到过这个问题，如果有，是否有任何已知的解决方法或修复？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-05-05T22:16:02.713

我在大多数但不是全部的构建配置上都遇到了相同的问题（Vista Debug Win32 出于某种原因正确出现）。这是我解决它/解决它的方法：

*   在另一个编辑器中打开 nnn_package.vcxproj 文件。

*   请注意，上述构建配置 (vista|debug|win32) 的条目是自己定位的，通过“PropertyGroup”条目与所有其他配置条目分开，其中设置“PackageDir”$(OutDir)nnn_package“ /包目录"

（将“替换为小于/大于）

*   将此部分移至所有构建配置条目并保存。

*   在 VS2012 中重新打开解决方案，现在所有包都输出到正确的文件夹，无论配置名称和平台如何。

希望这可以帮助。

# ajax - 如何将 @ConversationScoped 与 Ajax 请求一起使用？

> ID：16219067
> 
> 赞同：3
> 
> 时间：2013-04-25T15:38:32.987
> 
> 标签：ajax, jsf-2, primefaces, cdi, conversation-scope

我正在使用 JSF2 和 PrimeFaces，每次我发出 Ajax 请求并检查电流`conversation`是否是瞬态的，它不是并且开始新的对话。

当我禁用 Ajax 请求时，表单会自动传递`cid`并恢复对话，但当是 Ajax 请求时，`cid`不会自动传递。

`cid`使用 Ajax 请求时如何正确传递`@ConversationScoped`？为什么这个参数没有自动传递？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-26T04:00:11.200

我不太清楚您的用例是什么；但理论上，您可以使用`<f:attribute/>`任何给定组件上的标签传递参数。

1.  将`<f:attribute/>`标签添加到启动 AJAX 调用的组件中

    ```
    <p:commandLink id="aComponent" value="#{bean.val}" action="#{bean.doSomething}">
       <f:attribute name="conversationId" value="#{param['cid']}"/>           
    </p:commandLink> 
    ```

2.  您可以从支持 bean 中的组件参数映射中提取参数：

    ```
    FacesContext context = FacesContext.getCurrentInstance();
    UIViewRoot theView = context.getViewRoot();
    UIComponent component = theView.findComponent("aComponent");
    Integer theConversationId =(Integer) component.getAttributes().get("cid"); 
    ```

这里的关键点是该参数在`#{param}`地图中可用（与任何其他`GET`参数一样）。之所以不通过ajax自动传输的原因仅仅是：GET参数需要传输完整的HTTP请求。AJAX 的全部意义在于您可以选择发送到服务器的内容。

# linux - 使用内部逻辑定义的查找参数从 bash 脚本调用查找

> ID：16219071
> 
> 赞同：0
> 
> 时间：2013-04-25T15:38:45.363
> 
> 标签：linux, bash, find

我有一个在内部调用 find 的脚本，并且 id 喜欢做这样的事情：

```
FIND_CRITERIA="-name \"*.[ch]\" -o -name \"*.cpp\" -o -name \"*.hpp\""
if [ "$1" != "" ]; then
  FIND_CRITERIA=$1
fi

echo "Find command: find / ${FIND_CRITERIA} > /tmp/output.txt"
find / ${FIND_CRITERIA} > /tmp/output.txt 
```

它准确地打印出我想要执行的 find 命令。但是它没有正确执行它。

有谁知道为什么？

非常感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-25T15:52:22.773

简短回答：请参阅[BashFAQ #50：我正在尝试将命令放入变量中，但复杂的情况总是失败！](http://mywiki.wooledge.org/BashFAQ/050).

长答案：当 shell 解析类似的命令时`find / ${CRITERIA}`，它首先解析引号、转义等；然后它`${CRITERIA}`用它们的值替换变量，但不会返回通过它们来查找引号等——它已经完成了。结果，将引号、转义符等放在变量中并没有任何用处。

在 bash 中做这种事情的最好方法是将参数存储在一个数组中：

```
#!/bin/bash
CRITERIA=(-name "*.[ch]" -o -name "*.cpp" -o -name "*.hpp")

echo "Find command: find / ${CRITERIA} > /tmp/output.txt"
find / "${CRITERIA[@]}" > /tmp/output.txt 
```

...但这不适用于您将 $1 视为一组可选标准的方式。脚本是否需要任何其他参数？如果没有，我建议将搜索条件作为单独的参数而不是单个参数（即`./findscript -name "*.c"`代替`./findscript "-name \"*.c\""`），如下所示：

```
#!/bin/bash
if [ $# -gt 0 ]; then
    CRITERIA=("$@")
else
    CRITERIA=(-name "*.[ch]" -o -name "*.cpp" -o -name "*.hpp")
fi

echo "Find command: find / ${CRITERIA} > /tmp/output.txt"
find / "${CRITERIA[@]}" > /tmp/output.txt 
```

编辑：根据您关于需要允许脚本其他选项/参数的评论，我看到三个选项：

1.  用于`eval`将 getopt 参数解析为数组：

    ```
    case "$opt" in
        f) eval "CRITERIA=($OPTARG)" ;; 
    ```

    这具有与 相关的所有常见问题`eval`，主要与以奇怪（并且可能是危险的）方式失败有关，具体取决于作为 OPTARG 传递的内容。伊克。

2.  如果脚本不需要采用任何“常规”（非选项）参数，则将条件作为常规参数 ( `./script -a -b -c -d -- -name ".cpp" -o -name ".hpp"`) 传递。~~这样做的问题是 IIRC`getopts`并不`--`作为选项和常规参数之间的分隔符，因此您必须至少“手动”进行一些解析。~~更正：至少在 bash 版本 3.2.48 中，自动`getopts`处理`--`。

3.  如果您需要传递的唯一标准是-name，您可以使用多个`-f`选项来指定名称模式来构建标准，例如`./script -a -b -c -d -f "*.cpp" -f "*.hpp"`

    ```
    CRITERIA=()
    ...
    case "$opt" in
        f) if [[ ${#CRITERIA[@]} -eq 0 ]]; then
                CRITERIA=(-name "$OPTARG")
            else
                CRITERIA+=(-o -name "$OPTARG")
            fi ;;
    ...

    if [[ ${#CRITERIA[@]} -eq 0 ]]; then
        CRITERIA=(-name "*.[ch]" -o -name "*.cpp" -o -name "*.hpp")
    fi 
    ```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T15:54:13.263

您正在调用`$CRITERIA`，而变量名称是`$FIND_CRITERIA`. 我认为这是一个错字。

试试这个：

```
 #!/bin/bash

 FIND_CRITERIA="-name \"*.\[ch\]\" -o -name \"*.cpp\" -o -name \"*.hpp\""
 if [ "$1" != "" ]; then
   FIND_CRITERIA=$1
 fi

 echo "Find command: find / ${FIND_CRITERIA} > /tmp/output.txt"
 echo "${FIND_CRITERIA}" | xargs find / > /tmp/output.txt 
```

# python - 避免读出 blob

> ID：16219073
> 
> 赞同：0
> 
> 时间：2013-04-25T15:38:49.180
> 
> 标签：python, google-app-engine, blob

我目前正在尝试使用来自 blob 的数据来处理这些数据，然后通过电子邮件发送。到目前为止，我收到以下错误 - 我的猜测是它与我读入内存的 blob 的大小有关，因为它只发生在更大的 blob 上：

```
Traceback (most recent call last):

File "/python27_runtime/python27_lib/versions/third_party/webapp2-2.5.2/webapp2.py", line 1535, in __call__
rv = self.handle_exception(request, response, e)

File "/python27_runtime/python27_lib/versions/third_party/webapp2-2.5.2/webapp2.py", line 1529, in __call__
rv = self.router.dispatch(request, response)

File "/python27_runtime/python27_lib/versions/third_party/webapp2-2.5.2/webapp2.py", line 1278, in default_dispatcher
  return route.handler_adapter(request, response)

File "/python27_runtime/python27_lib/versions/third_party/webapp2-2.5.2/webapp2.py", line 1102, in __call__
return handler.dispatch()

File "/python27_runtime/python27_lib/versions/third_party/webapp2-2.5.2/webapp2.py", line 572, in dispatch
return self.handle_exception(e, self.app.debug)

File "/python27_runtime/python27_lib/versions/third_party/webapp2-2.5.2/webapp2.py", line 570, in dispatch
return method(*args, **kwargs)

File "/base/data/home/apps/xxxx/main.py", line 154, in post
db.run_in_transaction(filtering)

File "/python27_runtime/python27_lib/versions/1/google/appengine/api/datastore.py", line 2461, in RunInTransaction
return RunInTransactionOptions(None, function, *args, **kwargs)

File "/python27_runtime/python27_lib/versions/1/google/appengine/api/datastore.py", line 2599, in RunInTransactionOptions
ok, result = _DoOneTry(new_connection, function, args, kwargs)

File "/python27_runtime/python27_lib/versions/1/google/appengine/api/datastore.py", line 2621, in _DoOneTry
result = function(*args, **kwargs)

File "/base/data/home/apps/xxxx/main.py", line 128, in filtering
for k in liwkws:

File "/python27_runtime/python27_lib/versions/1/google/appengine/ext/db/__init__.py", line 2326, in next
return self.__model_class.from_entity(self.__iterator.next())

File "/python27_runtime/python27_lib/versions/1/google/appengine/datastore/datastore_query.py", line 2892, in next
next_batch = self.__batcher.next()

File "/python27_runtime/python27_lib/versions/1/google/appengine/datastore/datastore_query.py", line 2754, in next
return self.next_batch(self.AT_LEAST_ONE)

File "/python27_runtime/python27_lib/versions/1/google/appengine/datastore/datastore_query.py", line 2791, in next_batch
batch = self.__next_batch.get_result()

File "/python27_runtime/python27_lib/versions/1/google/appengine/api/apiproxy_stub_map.py", line 604, in get_result
return self.__get_result_hook(self)

File "/python27_runtime/python27_lib/versions/1/google/appengine/datastore/datastore_query.py", line 2528, in __query_result_hook
self._batch_shared.conn.check_rpc_success(rpc)

File "/python27_runtime/python27_lib/versions/1/google/appengine/datastore/datastore_rpc.py", line 1224, in check_rpc_success
raise _ToDatastoreError(err)
BadRequestError: invalid handle: 16023202376614806719 
```

这是代码：

```
 #Reads in all the variables from former process

    filter_name = self.request.get('filter_name')
    user = self.request.get('user')
    lowkey = self.request.get('lowkey')

    def filtering():

            # This is where I read the Blob into memory

        low = blobstore.BlobReader(lowkey).read()
        liwkws = db.GqlQuery("SELECT * FROM FilterList WHERE ANCESTOR IS :1", filter_key(filter_name))

            # Preparing the data for processing

            low = unicode(low, 'utf8').encode('utf-8').replace('\r', '').split('\n')

        for j in range(len(low)):
            for k in liwkws:
                if k.newkey.encode('utf-8').lower() in low[j].lower(): 
                    low[j] = 'delete'

        cuent = low.count('delete')

        for i in range(cuent):
            low.remove('delete')

        output_buffer = StringIO.StringIO()
        csv_output = csv.writer(output_buffer, delimiter=",")
        for i in low:
            csv_output.writerow([i])
        result = output_buffer.getvalue() 
```

有任何想法吗？在这种情况下，blob 的大小不是那么大（3MB），即使我不直接读取它，我也必须保存一个相同大小的列表。

# php - Zend Framework auth 突然停止工作

> ID：16219076
> 
> 赞同：0
> 
> 时间：2013-04-25T15:39:13.283
> 
> 标签：php, apache, zend-framework, centos

我昨天将一个大型站点迁移到了一台新机器上。新机器在zend 上运行centos 6.3 和php 5.3。

一切都运行得很好，没有问题。今天早上我的手机因用户无法登录的问题而炸毁。查看错误后，由于此错误，他们似乎无法登录：

```
#0 /usr/share/php/Zend/Auth/Adapter/DbTable.php(286): Zend_Auth_Adapter_DbTable->_authenticateQuerySelect(Object(Zend_Db_Select))
#1 /usr/share/php/Zend/Auth.php(117): Zend_Auth_Adapter_DbTable->authenticate()
#2 /home/localsbest/public_html/application/default/models/Authent.php(50): Zend_Auth->authenticate(Object(Zend_Auth_Adapter_DbTable))
#3 /home/localsbest/public_html/application/default/controllers/AuthentController.php(232): Authent->__construct('john@gocrr.com', 'freedom7')
#4 /usr/share/php/Zend/Controller/Action.php(503): AuthentController->indexAction()
#5 /usr/share/php/Zend/Controller/Dispatcher/Standard.php(285): Zend_Controller_Action->dispatch('indexAction')
#6 /usr/share/php/Zend/Controller/Front.php(934): Zend_Controller_Dispatcher_Standard->dispatch(Object(Zend_Controller_Request_Http), Object(Zend_Controller_Response_Http))
#7 /home/localsbest/public_html/public/index.php(46): Zend_Controller_Front->dispatch()
#8 {main} 
```

我以前从未见过这个错误。更糟糕的是，我想不出我能做些什么来导致这个问题。我那时在睡觉！有谁知道我可以从哪里开始解决这个问题？

*   编辑 *

也看到这个错误：

```
The supplied parameters to Zend_Auth_Adapter_DbTable failed to produce a valid sql statement, please check table and column names for validity. 
```

*   编辑

如果它也有帮助，该应用程序在 PHP 5.2.4 上运行，现在它在 5.3 上运行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T16:06:39.167

根据我的评论，我最好的猜测是 MySQL 表损坏。你可以跑`CHECK TABLE xxx`看看是不是这个问题，如果是的`REPAIR TABLE xxx`话。如果你启用了 MySQL 错误日志，你可能会在那里看到一些东西。但是复制一个新的转储也可以解决它。

不幸的是，Zend Auth 适配器类似乎捕获了任何异常并显示“提供的参数...”错误，因为这掩盖了问题的真正原因。

# google-api-dotnet-client - 您要更新对 Newtonsoft.Json.Net35.dll 的引用吗？

> ID：16219079
> 
> 赞同：1
> 
> 时间：2013-04-25T15:39:20.300
> 
> 标签：google-api-dotnet-client

我在 DFA 报告中使用 Google API 示例，发现客户端 API DLL 使用 Newtonsoft.Json.Net35.dll。你们打算更新参考吗？

我通过删除对旧 DLL 的引用然后重新编译 Google.Apis 源来解决这个问题。但如果二进制文件带有来自 Google 存储库的正确版本，我会更喜欢。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T21:38:25.813

在下一个版本中，我们将更新此参考。我们还计划升级库以支持 PCL 4.0。谢谢

# linux - 别名也许不应该是别名？

> ID：16219081
> 
> 赞同：1
> 
> 时间：2013-04-25T15:39:28.323
> 
> 标签：linux, unix

我对在 bash 中创建别名和函数非常陌生，所以我想要一些非常简单的东西

```
alias edit='emacs 'argv[0]'&' 
```

所以我可以编辑 junk.txt

在后台编辑它，但不确定我是否真的需要为这样的东西创建一个函数。对于 Unix 人来说，这可能太明显了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T15:41:49.607

使用函数，而不是别名：

```
edit() {
    emacs "$@" &
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T15:42:01.437

只需将此别名用作：

```
alias edit='emacs ' 
```

**请注意引号前的空格**，它可以让您将参数直接传递给 emacs 命令，然后您可以将此别名称为：

```
edit junk.txt 
```

或者

```
edit foo.sh 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-25T17:11:20.203

你不能用别名做你想做的事情，至少不能在 bash 中。

引用[bash 文档](http://www.gnu.org/software/bash/manual/html_node/Aliases.html)：

> 没有在替换文本中使用参数的机制，如在 csh 中。如果需要参数，则应使用外壳函数（请参阅外壳函数）。

别名只能用作简单命令的第一个字。没有办法扩展`edit foo.txt`到`emacs foo.txt &`.

（csh（和 tcsh）别名更强大，但 csh 缺少功能——而且你还是在使用 bash。）

请注意，`argv`您在问题中尝试使用的名称在 bash 中并不意味着任何特别的含义。参数（脚本或函数）被称为`$1`,`$2`等；完整的参数列表是`$*`or `$@`。但这不适用于别名。bash 文档解释了这一切。

[glglgl 的回答](https://stackoverflow.com/a/16219137/827263)是正确的：使用函数。

# c - int a=1, b=a++; 调用未定义的行为？

> ID：16219082
> 
> 赞同：18
> 
> 时间：2013-04-25T15:39:32.713
> 
> 标签：c, language-lawyer, undefined-behavior, sequence-points

是否`int a=1, b=a++;`调用未定义的行为？`a`的初始化及其在初始化程序中的访问和修改之间没有序列点干预`b`，但据我所知，初始化不是对象的“修改”；指定一个初始化器来给出对象的“初始值”。根据 6.7.8 初始化，第 8 段：

> 初始化器指定存储在对象中的初始值。

并且在对对象的任何访问之前将“初始”作为排序似乎是合理的。以前是否考虑过这个问题，是否有公认的解释？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-04-25T15:56:29.857

它不会调用未定义的行为。在 6.7.6 (3) 中规定

> 完整的声明器是不属于另一个声明器的声明器。完整声明符的结尾是一个序列点。

一个完整的声明符的结尾是一个序列点。

```
int a = 1, b = a++;
     //  ^ end of full declarator 
```

# c# - 请求被中止：无法创建 SSL/TLS 安全通道异常

> ID：16219083
> 
> 赞同：0
> 
> 时间：2013-04-25T15:39:34.270
> 
> 标签：c#, exception, iis, service, web

让我解释一下我的情况。

我创建了一个自签名证书并将其安装在 MMC的**受信任的根证书颁发机构部分。**

然后我使用自签名证书创建了两个证书：

1.  具有主题名称“localhost”的证书
2.  主题名称为“test.com”的证书

然后我将这两个证书都安装到了MMC 的**个人**证书部分。

然后，我在 IIS 中将 Web 服务部署为 HTTPS（带有接受客户端证书的 SSL）。用于部署 Web 服务的证书是主题名称为“localhost”的证书。

现在，我有一个想要连接到 Web 服务的客户。我成功地添加了对该服务的 Web 引用。这是代码：

```
 ClientServices web_service = new ClientServices();
            X509Store store = new X509Store(StoreName.My, StoreLocation.LocalMachine);
            store.Open(OpenFlags.ReadOnly);
            X509Certificate2Collection col = store.Certificates.Find(X509FindType.FindBySubjectName, "test.com", true);

            if (col.Count == 1)
            {
                ServicePointManager.Expect100Continue = true;
                ServicePointManager.SecurityProtocol = SecurityProtocolType.Ssl3 | SecurityProtocolType.Tls;
                web_service.ClientCertificates.Add(col[0]);

                try
                {
                    string hello = web_service.HelloWorld();
                    int add = web_service.add(4, 31);
                    int sub = web_service.subtract(30, 10);

                    Console.WriteLine(hello);
                    Console.WriteLine(add);
                    Console.WriteLine(sub);
                }
                catch (WebException e)
                {
                    Console.WriteLine(e.Message.ToString());
                }
            }

            else
            {
                Console.WriteLine("The certificate was not found!");
            }
            Console.ReadKey(); 
```

如您所见，我将“test.com”证书与 Web 服务请求一起发送。不幸的是，我得到了这个例外：

```
The request was aborted: Could not create SSL/TLS secure channel 
```

我怎么解决这个问题？我已经在这个问题上浪费了 3 个小时。请帮我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T18:25:50.470

```
private void Somewhere() {
    ServicePointManager.ServerCertificateValidationCallback += new RemoteCertificateValidationCallback(AllwaysGoodCertificate);
}

private static bool AllwaysGoodCertificate(object sender, X509Certificate certificate, X509Chain chain, SslPolicyErrors policyErrors) {
   return true;
} 
```

来源： [请求被中止：无法创建 SSL/TLS 安全通道](https://stackoverflow.com/questions/2859790/the-request-was-aborted-could-not-create-ssl-tls-secure-channel)

# php - PHP日期到strtotime并返回日期？

> ID：16219093
> 
> 赞同：1
> 
> 时间：2013-04-25T15:39:53.270
> 
> 标签：php, timezone, strtotime

我想要做的是用 strtotime 转换一个时间字符串，然后用它以前的时区返回日期。

我正在使用以下代码，但我得到的时间是 UTC：

```
$timeStart = "2013-04-25 18:14:00+03";
$datetimeStart = strtotime($timeStart);
$datetimeNext = strtotime('+8 hours',$datetimeStart);
$time = gmdate('Y-m-d\\TH:i:s\\Z', $datetimeNext); 
```

有任何想法吗？谢谢..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T20:59:29.567

我认为您的意思是您想要与原来相同的*偏移量。*[阅读TimeZone 标签 wiki](https://stackoverflow.com/tags/timezone/info)中的“TimeZone != Offset” 。

您的请求的主要问题是`strtotime`（根据[docs ）返回一个整数，表示从](http://php.net/manual/en/function.strtotime.php)*UTC*纪元开始的秒数。因此，您提供的任何偏移量都将被考虑在内，但随后被遗忘。

抱歉，我不太了解 PHP，无法提供代码示例，但您可能可以从原始字符串中提取偏移量，然后在最后重新应用它。也有可能有一种不同的方法来解析字符串，这将产生一个保持偏移量的对象。同样，我对 PHP 的了解还不够，无法在这里为您提供帮助。在 .Net 中，同样的问题可以通过解析为 a`DateTimeOffset`而不是 a来解决`DateTime`。

另外-从逻辑上讲，您开始使用的偏移量不一定是添加时间后要使用的正确偏移量。您可能已经过了夏令时转换，这将使新的正确偏移量比原始偏移量少一个小时或多一个小时。您可能关心也可能不关心，这取决于您的担忧。编辑后纠正偏移的唯一方法是还知道原始值所在的时区。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T15:41:42.077

你应该使用`date`而不是`gmdate`

```
$time = date('Y-m-d\\TH:i:s\\Z', $datetimeNext); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-25T15:44:05.360

在进行 strtotime 转换之前，尝试使用 putenv 设置您的时区。

[http://php.net/manual/en/function.putenv.php](http://php.net/manual/en/function.putenv.php)

```
putenv("TZ=US/Central");
$today = date('F j, Y, g:i a');
$newdate = strtotime ($today) ;
$newdate = date ( 'F j, Y' , $newdate ); 
```

# java - Jsoup选择标签后的文本

> ID：16219094
> 
> 赞同：12
> 
> 时间：2013-04-25T15:39:58.753
> 
> 标签：java, jsoup

我想使用 jsoup 在每个标签之后提取一个文本。有什么方法可以直接选择它还是我必须对整个事情执行 .substring ？

```
<div>
<a href="#"> I don't want this text </a> 
**I want to retrieve this text**
</div> 
```

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2013-04-25T16:04:44.190

```
public static void main(String... args) throws IOException {

    Document document = Jsoup.parse("<div>"
            + "<a href=\"#\"> I don't want this text </a>"
            + "**I want to retrieve this text**" + "</div>");

    Element a = document.select("a").first();

    Node node = a.nextSibling();
    System.out.println(node.toString());
} 
```

输出

```
**I want to retrieve this text** 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T16:05:02.160

是的你可以。

1.  首先获取 html `<div>`，然后使用选择它的 html`.html()`
2.  获取`<a>`元素，并获取它的 html
3.  获取`<a>`元素 html的长度
4.  排除第一部分。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-09-26T09:10:40.317

尽管提供了解决方向，但我认为上述答案缺乏普遍性。

`nextSibling()`在 html 结构更改时无法使用。

当我参考 Jsoup api 时，我发现了一个名为 的方法`textNodes()`，它可以从这个元素中获取文本节点的列表。

```
public static String getTextAfterTag(Element ele) {
  String text = "";
  for(TextNode node: ele.textNodes()) {
    text += node.text();
  }
  return text;
} 
```

希望有所帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-08-09T10:45:45.223

```
 Document doc = Jsoup.parse("<div>"
            + "<a href=\"#\"> I don't want this text </a>"
            + "**I want to retrieve this text**" + "</div>"); 

   Elements tags = doc.getElementsByTag("a");

   for(Element tag : tags) {
      System.out.println(tag.text());
   } 
```

# perl - Perl 需要明确的包名

> ID：16219095
> 
> 赞同：6
> 
> 时间：2013-04-25T15:39:59.293
> 
> 标签：perl

```
#!/usr/bin/perl
# countlines2.pl by Bill Weinman <http://bw.org/contact/>
# Copyright (c) 2010 The BearHeart Group, LLC

use strict;
use warnings;

sub main {
my @values = (43,123,5,89,1,76);
my @values1 = sort(@values);

  foreach $value(@values1){
    print "$value\n";
  }
}

Errors - 
"Global symbol "$value" requires explicit package name at task2.txt line 12
"Global symbol "$value" requires explicit package name at task2.txt line 13 
```

我是 perl 的初学者，所以我遇到了上述错误。另外请告诉我 perl 默认如何对数字进行排序（例如 sort(@values) 会产生什么结果？）。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-04-25T15:43:06.383

`use diagnostics;`您可能会发现添加它会为您提供以下附加信息很有帮助：

> (F) 你说过“use strict”或“use strict vars”，这表示所有变量必须要么是词法范围的（使用“my”或“state”），要么事先使用“our”声明，或者明确限定为说出全局变量在哪个包中（使用“::”）。

`foreach $value(@values1){`应该`foreach my $value(@values1){`

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-04-25T15:41:57.503

错误是因为您没有声明`$value`：

```
foreach my $value(@values1){
    print "$value\n";
  } 
```

排序文档可以在这里找到：http: [//perldoc.perl.org/functions/sort.html](http://perldoc.perl.org/functions/sort.html)。

# symfony - 依赖注入 Symfony 对象创建参数

> ID：16219099
> 
> 赞同：0
> 
> 时间：2013-04-25T15:40:05.297
> 
> 标签：symfony, dependency-injection, ioc-container

我一直在查找 symfony 是如何进行[依赖注入](http://svn.symfony-project.com/components/dependency_injection/trunk/lib/)的。但我不明白它的直接目的。

它似乎将一切都称为服务。服务是类似于配置的路由器的东西。这些服务中的大多数都有启动所需的设置变量的基线。但是有一种方法叫做“isShared”。

我假设在使用该方法时，它会创建一个新对象，而不是已经创建的对象。

但是当要创建的对象需要一个完全不同的变量时会发生什么？

```
class foobarClass
{
    public function __construct($config.foo)
    {
        //
    }
}

$container = new sfContainerBuilder(array('config.foo' => 'bar'));

$container->register('foobar','foobarClass')
          ->addArgument('%config.foo%')
          ->isShared(false); 
```

什么是 config.foo 不应该是 bar 而是 foo？我是否需要为基本上所有可能的配置创建另一个定义（看起来很奇怪并且违背了 DIC 的目的）？

另外，依赖注入和反向控制之间的主要区别是什么？什么时候什么地方习惯什么？

提前致谢！

**编辑：**

关于参数问题的另一个例子：

```
class Files
{
    protected $_path;

    public function __construct($path)
    {
        $this->_path = $path;
    }
}

$container = new sfContainerBuilder(array('path.to.something' => '/some/path/file.abc'));

$container->register('files','files')
          ->addArgument('path.to.something')
          ->isShared(false); 
```

如果需要，我应该如何提供新路径？定义已经有了 path.to.something。但是如果我需要一个带有 path.sto.somethingElse 的对象怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T21:52:12.823

在 Symfony2 中，服务是一个普通的类，不需要类继承。
目的是您**不需要关心启动**对象。
对于非常小的应用程序，这似乎没有必要，但是当您在某些对象之间存在依赖关系时，它可能会成为一个问题。例如：您有 4 个具有这种关系的对象：
B -needs-> A, C -needs-> A, D -needs-> B & C

这时候配置启动不是在每个类的内部是非常有用的，而是将它（在这种情况下）写入 services.xml / services.yml

在这种情况下有时会使用控制反转，它更通用。但是在这种情况下，控制反转（依赖注入）也完成了，因为您处理对象外部的启动。

**对于你的另一个问题：**

> 什么是 config.foo 不应该是 bar 而是 foo？

您可以在构造函数中传递参数，您可以在另一个函数中传递它们。当您确实需要多次参数但又想要灵活的另一种解决方案时，您也可以在[父服务的双方（DI 和类）文档中使用继承](http://symfony.com/doc/current/components/dependency_injection/parentservices.html)

但首先，我建议你阅读这个`mailer`例子，这真的很简单：[http](http://symfony.com/doc/current/components/dependency_injection/introduction.html) ://symfony.com/doc/current/components/dependency_injection/introduction.html 然后你可以继续下一页关于不同类型的注入， ETC。

# asp.net-mvc - 如何创建具有多个模型 mvc 4 的视图？

> ID：16219103
> 
> 赞同：3
> 
> 时间：2013-04-25T15:40:12.630
> 
> 标签：asp.net-mvc, entity-framework, razor, asp.net-mvc-4

所以我在asp.net mvc 4项目中工作，我的观点有问题，我想要的是创建一个具有2种不同类型模型的视图，第一个视图（索引）采用IEnumerable（Models.myModel）第二个（订阅者详细信息) 取 Models.myModel，**这是我的模型代码：**

```
public class SubscribersModel
{

    [Required]
    [DataType(DataType.Text)]
    public string name { get; set; }

    [Required]
    [DataType(DataType.Text)]
    [StringLength(maximumLength: 10, MinimumLength = 7)]
    public string cin { get; set; }

    [Required]
    [DataType(DataType.Date)]
    public DateTime birthday { get; set; }

    [DataType(DataType.Text)]
    public string birthplace { get; set; }
  } 
```

**我的控制器代码：**

```
 public class SubscribersController : Controller
{
    private AgencyDbEntities dbcontext = new AgencyDbEntities();
    private Subscribe sb = new Subscribe();

    public ActionResult Index()
    {
        var subscribers = from sb in dbcontext.Subscribes select new SubscribersModel {      cin = sb.cin, name = sb.name, birthday = (DateTime)sb.birthDay, birthplace = sb.birthPlace   };

        return View(subscribers);
    }

    public ActionResult Details(string id,string cin,string name)
    {
        var subscriber = new SubscribersModel();
        IEnumerable<Subscribe> list = from s in dbcontext.Subscribes select s;
        foreach (var sb in list)
        {
            if (sb.cin == id)
            {
                subscriber.cin = sb.cin;
                subscriber.name = sb.name;
                subscriber.birthday = (DateTime)sb.birthDay;
                subscriber.birthplace = sb.birthPlace;
            }
        }
        return View(subscriber);
    }
 } 
```

**我的索引视图：**

```
 @model IEnumerable<_3SDWebProject.Models.SubscribersModel>

@{
    ViewBag.Title = "Subscribers";
}
    <div class="sidebar">
      //here i want to show my details view
     </div>
 <div class="content" style="width: 700px; margin-left: 250px; height: 545px;margin-  top: -30px;">
  <h2>Subscribers</h2>
<p>
     @Html.ActionLink("Create New", "Create")
</p>

 @Styles.Render("~/Content/css")
 <script src="@Url.Content("~/Scripts/Table.js")" type="text/javascript"></script>
 <table class="altrowstable" id="alternatecolor">
 <tr>
    <th>
        CIN
    </th>
    <th>
        Name
    </th>
    <th>
        birthday
    </th>
    <th>
        birthplace
    </th>
     <th class="operations">
        Operations
    </th>
</tr>

 @foreach (var item in Model)
{
<tr>
    <td>
        @Html.DisplayFor(modelItem => item.cin)
    </td>
    <td>
        @Html.DisplayFor(modelItem => item.name)
    </td>
    <td>
        @Html.DisplayFor(modelItem => item.birthday)
    </td>
    <td>
        @Html.DisplayFor(modelItem => item.birthplace)
    </td>
    <td>
      @Html.ActionLink("Details", "Details", new { id = item.cin }, new { @class = "details-logo"})
     </td>
</tr>
}

</table>
</div> 
```

**我的详细信息视图：**

```
@model _3SDWebProject.Models.SubscribersModel

<fieldset>
<legend>SubscribersModel</legend>

<div class="display-label">
     @Html.DisplayNameFor(model => model.name)
</div>
<div class="display-field">
    @Html.DisplayFor(model => model.name)
</div>
<div class="display-label">
     @Html.DisplayNameFor(model => model.birthday)
</div>
<div class="display-field">
    @Html.DisplayFor(model => model.birthday)
</div>

<div class="display-label">
     @Html.DisplayNameFor(model => model.birthplace)
</div>
<div class="display-field">
    @Html.DisplayFor(model => model.birthplace)
</div>
</fieldset> 
```

所以如果有人有任何想法或解决方案，我将不胜感激：注意：这张图片描述了我想要的 ![在此处输入图像描述](https://i.stack.imgur.com/sR09b.png)

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-25T15:49:18.053

创建一个包含这两个视图模型的新复合视图模型。

```
public class CompoundViewModel
{
    public IEnumerable<SubscribersModel> AllSubscribers {get; set;} 
    public SubscribersModel SelectedSubscriber {get; set;}
} 
```

理想情况下，还将您的视图拆分为部分视图，并使用`DisplayFor<>`or将复合模型的这两个部分渲染到它们中`EditorFor<>`。这样，如果需要，您可以在应用程序的其他地方重用“订阅者模型”的视图。

您的控制器代码也可以通过使用依赖注入框架（例如 Autofac）来注入您当前正在更新的那些依赖项来改进。

另一种选择是，如果您对列表和详细信息视图使用相同的模型，则可以使用 Javascript 来处理这个客户端，或者手动使用 jQuery，或者使用允许客户端模型绑定（如 Knockout）的较新框架之一.js 或 Angular.js。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T15:44:01.327

您只需要创建一个名为的第二个视图`Details`，它是强类型的`SubscribersModel`

```
@model _3SDWebProject.Models.SubscribersModel 
```

右键单击代码中的任意位置以执行您的`Details()`操作
选择添加视图...
为视图名称保留“详细信息”
检查“创建强类型视图”从模型类下拉列表中
选择您的 脚手架模板：详细信息 单击“添加” `SubscribersModel`

# java - 启用nimbus时无法在JDK7中透明和未装饰的JFrame

> ID：16219111
> 
> 赞同：8
> 
> 时间：2013-04-25T15:40:30.400
> 
> 标签：java, swing, java-7, nimbus, translucency

看这张图片 ： ![透明 JFrame  ](https://i.stack.imgur.com/39t12.png)

这是透明框架的代码：

```
GraphicsEnvironment ge = 
        GraphicsEnvironment.getLocalGraphicsEnvironment();
        GraphicsDevice gd = ge.getDefaultScreenDevice();

        if (!gd.isWindowTranslucencySupported(TRANSLUCENT)) {
            System.err.println(
                "Translucency is not supported");
                System.exit(0);
        }

        JFrame.setDefaultLookAndFeelDecorated(true); 
```

这很好用，但是当尝试通过添加来启用 LookAndFeel

```
 try {
    for (javax.swing.UIManager.LookAndFeelInfo info : javax.swing.UIManager.getInstalledLookAndFeels()) {
         if ("Nimbus".equals(info.getName())) {
            javax.swing.UIManager.setLookAndFeel(info.getClassName());
            break;
          }
    }
}catch(.......) 
```

它给了我这个错误

> 线程“AWT-EventQueue-0”java.awt.IllegalComponentStateException 中的异常：框架已装饰

这是什么错误？以及如何解决？

感谢您的回答和建议。

编辑

提出的问题/交叉发布

*   [OTN](https://forums.oracle.com/forums/thread.jspa?threadID=2533181&tstart=0)

*   [丹尼网](http://www.daniweb.com/software-development/java/threads/454088/undecorated-translucent-and-shaped-window-in-java7#)

*   [代码牧场](http://www.coderanch.com/t/611044/GUI/java/Undecorated-Translucent-Shaped-Window-Java)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-25T16:27:29.767

> 在@Sri Harsha Chilakapati 创建 ui 之前更改 main 方法中的 laf
> 
> 和@Sri Harsha Chilakapati 我很抱歉，但我没有得到你，如果你用@Azad Omer 描述更多，我将不胜感激

*   更多在 Oracle 教程[修改外观](http://docs.oracle.com/javase/tutorial/uiswing/lookandfeel/index.html)，

*   问题是由代码行引起的`JFrame.setDefaultLookAndFeelDecorated(true);`，需要禁用/注释此代码行`//JFrame.setDefau...`

*   默认情况下，使用 Nimbus L&F 创建半透明 JFrame 没有问题

![在此处输入图像描述](https://i.stack.imgur.com/rdAzW.jpg)

从代码

```
import java.awt.*;
import javax.swing.*;

public class TranslucentWindow extends JFrame {

    private static final long serialVersionUID = 1L;

    public TranslucentWindow() {
        super("Test translucent window");
        setLayout(new FlowLayout());
        add(new JButton("test"));
        add(new JCheckBox("test"));
        add(new JRadioButton("test"));
        add(new JProgressBar(0, 100));
        JPanel panel = new JPanel() {

            @Override
            public Dimension getPreferredSize() {
                return new Dimension(400, 300);
            }
            private static final long serialVersionUID = 1L;

            @Override
            protected void paintComponent(Graphics g) {
                super.paintComponent(g);
                g.setColor(Color.red);
                g.fillRect(0, 0, getWidth(), getHeight());
            }
        };
        panel.add(new JLabel("Very long textxxxxxxxxxxxxxxxxxxxxx "));
        add(panel);
        pack();
        setLocationRelativeTo(null);
        setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    }

    public static void main(String[] args) {
        try {
            for (UIManager.LookAndFeelInfo info : UIManager.getInstalledLookAndFeels()) {
                if ("Nimbus".equals(info.getName())) {
                    UIManager.setLookAndFeel(info.getClassName());
                    break;
                }
            }
        } catch (Exception e) {
            e.printStackTrace();
        }
        //JFrame.setDefaultLookAndFeelDecorated(true);
        SwingUtilities.invokeLater(new Runnable() {

            @Override
            public void run() {
                Window w = new TranslucentWindow();
                w.setVisible(true);
                com.sun.awt.AWTUtilities.setWindowOpacity(w, 0.7f);
            }
        });
    }
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-05-07T09:43:22.823

*   [@JamesCherrill 在 Daniweb 上](http://www.daniweb.com/software-development/java/threads/454088/undecorated-translucent-and-shaped-window-in-java7)接受的回答，

*   第一个。在 InitialThread 上创建的顶级容器必须经过修饰和 isDisplayable()，然后可以使用其余的

*   Swing Timer 可能需要短暂的延迟

.

```
import java.awt.BorderLayout;
import java.awt.Color;
import java.awt.Font;
import java.awt.Shape;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.awt.geom.Ellipse2D;
import java.util.logging.Level;
import java.util.logging.Logger;
import javax.swing.JButton;
import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.SwingUtilities;
import javax.swing.Timer;
import javax.swing.UIManager;
import javax.swing.UnsupportedLookAndFeelException;

public class DemoWindows implements ActionListener {

    public static void main(String[] args) {
        // create a new demo, and update it every 50 mSec
        new Timer(30, new DemoWindows()).start();
    }
    int phase = 0; // demo runs a number of consecutive phases
    int count = 0; // each of which takes a number of timesteps
    JFrame window1 = new JFrame("Java windows demo");
    JLabel text1 = new JLabel("<HTML><H1>Hello" + "<BR>Everyone");
    // "<HTML><H1>This is a demo of some of the effects"
    // + "<BR>that can be achieved with the new Java"
    // + "<BR>transparent window methods</H1>"
    // + "<BR>(requires latest version of Java)");
    JFrame window2 = new JFrame("Java windows demo");
    JLabel text2 = new JLabel("<HTML><center>Java<BR>rocks");
    JButton button = new JButton("Whatever");
    int w, h, r, x, y; // parameters of iris circle

    DemoWindows() {
        // build and diplay the windows
        window1.add(text1);
        window1.pack();
        window1.setLocationRelativeTo(null);
        window1.setVisible(true);
        window2.setUndecorated(true);
        window2.setBackground(new Color(0, 0, 0, 0)); // alpha <1 = transparent
        window2.setOpacity(0.0f);
        text2.setFont(new Font("Arial", 1, 60));
        text2.setForeground(Color.red);
        window2.add(text2);
        window2.add(button, BorderLayout.SOUTH);
        window2.pack();
        window2.setLocationRelativeTo(null);
        window2.setVisible(true);
        // parameters of the smallest circle that encloses window2
        // this is the starting pouint for the "iris out" effect
        w = window2.getWidth();
        h = window2.getHeight();
        r = (int) Math.sqrt(w * w + h * h) / 2; // radius
        x = w / 2 - r; // top left coordinates of circle
        y = h / 2 - r;
    }

    @Override
    public void actionPerformed(ActionEvent e) {
        try {// L&F changed on Runtime, repeatly fired from Swing Timer 
            UIManager.setLookAndFeel("com.sun.java.swing.plaf.nimbus.NimbusLookAndFeel");
        } catch (ClassNotFoundException ex) {
            Logger.getLogger(DemoWindows.class.getName()).log(Level.SEVERE, null, ex);
        } catch (InstantiationException ex) {
            Logger.getLogger(DemoWindows.class.getName()).log(Level.SEVERE, null, ex);
        } catch (IllegalAccessException ex) {
            Logger.getLogger(DemoWindows.class.getName()).log(Level.SEVERE, null, ex);
        } catch (UnsupportedLookAndFeelException ex) {
            Logger.getLogger(DemoWindows.class.getName()).log(Level.SEVERE, null, ex);
        }
        SwingUtilities.updateComponentTreeUI(window2);
        // called by timer 20 times per sec
        // goes thru a number of phases, each a few seconds long
        switch (phase) {
            case 0: { // initial pause               
                if (++count > 50) {
                    phase = 1; // go to next phase
                    count = 0;
                }
                break;
            }
            case 1: { // fade in               
                if (++count < 100) {
                    window2.setOpacity(0.01f * count);
                } else {
                    phase = 2; // go to next phase
                    count = 0;
                }
                break;
            }
            case 2: { // move               
                if (++count < 160) {
                    if (count < 28 || count > 80) {// pause for best effect
                        window2.setLocation(window2.getX() + 1, window2.getY() + 1);
                    }
                } else {
                    phase = 3; // go to next phase
                    count = 0;
                }
                break;
            }
            case 3: {// iris out                
                if (++count < r) {
                    Shape shape = new Ellipse2D.Double(
                            x + count, y + count, 2 * (r - count), 2 * (r - count));
                    window2.setShape(shape);
                } else {
                    phase = 99; // go to final (exit) phase
                }
                break;
            }
            case 99:
                System.exit(0);
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-05-06T21:59:41.240

经过一番研究，我发现问题在`JDK7`and之间`com.sun.awt.AWTUtilities`，我认为我们最好不要使用 `com.sun`包，除非作为最后的手段，因为它们可能会导致升级 JDK 版本出现问题（它们不是 JDK API 的一部分）。

[在此处](https://stackoverflow.com/questions/1416869/how-to-distribute-awtutilities/1416901#1416901)阅读有关此问题的更多信息

**[来自甲骨文](https://blogs.oracle.com/henrik/entry/nimbus_look-and-feel_in_jdk_7)**

> Swing 的 Nimbus 外观是在 JDK 6u10 中引入的，以替代旧的 Metal LoF。在 JDK 7 中，Nimbus 将从 Oracle 专有扩展 (com.sun.java.swing) 转移到标准 API (javax.swing)，从而成为真正的一流 Swing 公民。

它似乎可以`com.sun.awt.AWTUtilities`正常工作，`JDK6`但 Nimbus LAF 在 JDK7 中。我找到了第一个问题的答案（这是什么错误），第二个问题（如何解决）我必须等到新版本`com.sun`发布。

我感谢[mKorbel](https://stackoverflow.com/users/714968/mkorbel)的努力，谢谢。

# javascript - 使用 jQuery ID 选择和 css 更改输入元素

> ID：16219113
> 
> 赞同：1
> 
> 时间：2013-04-25T15:40:34.860
> 
> 标签：javascript, jquery, css, background-color

我正在尝试使用 jQuery.css 语法从函数中更改输入元素的背景颜色。在一个在`ready`事件中调用的函数中，我执行：

```
$("#inputID_1").css("background-color", "red"); 
```

但颜色不会变红。

我可以用：

```
<input type='text' id=' inputID_1 ' style="background-color:blue" /> 
```

在 html 中更改颜色。或者：

```
$("input").css("background-color", "gray"); 
```

在 JavaScript 中。但是使用 jQuery-ID 选择的能力似乎不起作用！

[你可以在这里](http://jsfiddle.net/mjs1138/fFhCJ/59/)找到一个 JSFiddle 。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-25T15:42:42.803

您的 HTML 元素 ID 中的空白确实会产生影响 - 将它们删除，它会按照您的意愿工作。

所以，改变：

```
<input type='text' id=' inputID_1 ' style="background-color:blue" />
<input type='text' id=' inputID_2 ' /> 
```

至

```
<input type='text' id='inputID_1' style="background-color:blue" />
<input type='text' id='inputID_2' /> 
```

这是一个工作的[**jsFiddle。**](http://jsfiddle.net/fFhCJ/62/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T15:44:16.743

问题是您的 ID 值前后的空格。删除它们，它将起作用。

# jquery - 部分 jQuery 脚本不能在 Drupal 6.28 中运行

> ID：16219115
> 
> 赞同：0
> 
> 时间：2013-04-25T15:40:47.177
> 
> 标签：jquery, drupal-6

我编写了一个在 Drupal 站点中运行的小型 jQuery 脚本。该站点正在运行 jQuery 1.7.1。在 jsFiddle 中一切正常，但是当我在 Drupal 中运行它时，部分脚本不起作用。不确定这是 Drupal 的问题还是我的代码有问题？

这是在教育网站上进行的自测。内容排列在页面上的幻灯片切换中。一些滑动开关内部是这些自测。他们不写入数据库，他们只是为了用户。

此处的目标是在滑动切换关闭时重置自检。这是jQuery：

```
$("h2.titleTrigger").click(function(e){
e.preventDefault();

//TOGGLE OPEN/CLOSE THE DRAWER
$(this).toggleClass("active").next().slideToggle("fast");

//UNDO THE SELF TEST
$('.selfTestWrong').removeClass('answerShown');
$('input:radio').prop('checked', false);
$('.selfTestAnswer').slideUp(300);

return false;
});

//self test

$('input:radio').bind('change',function(e){
 e.preventDefault();
var parentId = $(this).parents('.selfTest').attr('id');
$('#'+parentId+' .selfTestWrong').addClass('answerShown');
$('#'+parentId+' .selfTestAnswer').slideDown(300);
}); 
```

你可以在这里看到它正常工作：http: [//jsfiddle.net/bRFXb/](http://jsfiddle.net/bRFXb/)

问题是当我在 Drupal 中运行它时，除了重置自检的部分外，一切正常。当我关闭并打开滑动开关时，没有任何重置。Chrome 的开发者工具中没有显示错误。编辑：脚本在标签之前的页面底部加载。有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T15:44:30.477

尝试在 drupal 中加载页面后使用此代码。我认为这会像魅力一样起作用

# mysql - 我的sql查询存储过程中的一些错误

> ID：16219116
> 
> 赞同：-1
> 
> 时间：2013-04-25T15:40:48.130
> 
> 标签：mysql

```
DELIMITER $$

DROP PROCEDURE IF EXISTS `dinv`.`sp_InsertCustomer`$$

CREATE DEFINER=`root`@`localhost` PROCEDURE `sp_InsertCustomer`(
 IN vCustId varchar(120),
 IN vName Varchar(16),
 IN vMobileNumber Varchar(120),
 IN vEmail Varchar(500),
 IN vCountry varchar(120),
 IN vCity VarChar(80),
 IN vZipCode Date,
 IN vAddress VarChar(80),
 IN vRemarks Date,
 IN vCreatedBy Varchar(80),
 IN vParam Varchar(50)
 )
BEGIN
SET @type = vParam;
IF @type="Save"  THEN
 Insert into customer(CustID,Name,MobileNumber,EmailId,Country,City,ZipCode,Address,Remarks,CreatedBy,CreatedDate)
values(vCustId,vName,vMobileNumber,vEmail,vCountry,vCity,vZipCode,vAddress,vRemarks,vCreatedBy,GetDate());
ELSE
 Update  customer Set Name=vName,MobileNumber=vMobileNumber,EmailId=vEmail,Country=vCountry,City=vCity,ZipCode=vZipCode,Address=vAddress,
Remarks=vRemarks,ModifiedBy=vCreatedBy,ModifiedDate=GetDate() where CustID=vCustId;
END IF;
DELIMITER ; 
```

错误代码：1064 您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以获取在第 23 行的 '' 附近使用的正确语法

嗨，我是 mysql 新手，正在尝试使用 if else 条件编写程序，但出现错误，所以请帮忙..谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T15:43:28.667

您没有`END`声明来终止该`BEGIN`块。

基本上你有这个结构

```
DELIMITER $$
-- DROP STATEMENT
CREATE PROCEDURE sp_InsertCustomer(..parameter list..)
BEGIN
    SET @type = vParam;
    IF @type = "Save"  THEN   -- mysql accepts double quotes and single quotes
        -- INSERT STATEMENT
    ELSE
        -- UPDATE STATEMEMT
    END IF;
END $$       -- <<== lacking part
DELIMITER ; 
```

# sql-server - 将 XSD 存储在表中与 XML SCHEMA COLLECTION

> ID：16219120
> 
> 赞同：1
> 
> 时间：2013-04-25T15:41:13.980
> 
> 标签：sql-server, xml, xsd

我正在对将其 XML 数据存储在 SQL Server 中的应用程序进行一些维护工作。目前，应用程序使用另一个表来存储关联的 XSD。我的问题：由于当前所有 XSD 验证都在 ASP.NET 中执行，将 XSD 存储在 XML SCHEMA COLLECTION 中是否有任何优势？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T20:11:25.783

这是一个公平的问题......我仍然会将它放在 XML 模式集合中。这会强制在尽可能低的级别验证数据。

如果可以将不良数据放入列中，它就会发生。只需要另一个开发你的应用程序的开发人员不像你那么小心，或者另一个内部应用程序碰到同一张桌子，或者任何其他情况。

这就像将 INT 值存储在 VARCHAR 类型的列中。你可以做到……也许你的应用程序正在验证进入那里的数据确实是 INT 类型。但不知何故，值“10N”*最终*会进入该列。然后呢？关系数据库的一大优点是它强制执行一定程度的数据有效性，因此您应该使用您可以使用的所有工具，包括架构集合、IMO。

# ruby-on-rails - rails缓存：另一个名称空间中的expire_action json格式

> ID：16219121
> 
> 赞同：0
> 
> 时间：2013-04-25T15:41:17.410
> 
> 标签：ruby-on-rails, caching

我有一个 json api，我在其中执行动作缓存：

```
class Api::V2::TagsController < Api::V2::BaseController

  before_filter :set_cache_headers, :only => [:categories, :tribes]
  caches_action :categories, :tribes, :expires_in => 1.hour 
```

我发现使此缓存过期的唯一方法是使用：

```
Rails.cache.delete api_v2_categories_url(:locale => nil)+'.json?' 
```

**这太丑了**

请问谁能帮我改进这个可怕的黑客？

* * *

更多信息：

缓存效果很好，我在日志中看到缓存写入：

> `Cache write: http://localhost:3000/api/v2/categories.json?`

在管理名称空间中，我需要使缓存过期，我尝试过：

expire_action(:controller => '/api/v2/tags', :action => 'categories', :format => :json)

失败并输出：

> 过期片段视图/localhost:3000/mu-8c54ade2-cbb77ba0-4f0c28d3-607169d0.json?action=categories&controller=api/v2/tags&locale=fr

PS：我试过这个答案没有成功：[rails caching: expire_action in another namespace](https://stackoverflow.com/questions/5082181/rails-caching-expire-action-in-another-namespace)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T15:52:05.347

您可以在您的 api 中创建一个名为 clear_categories 的新路由，并在其中调用

```
expire_action :action => :categories 
```

然后在您的管理员中，只需点击该路线即可。您还可以通过将重定向 url 传递给 clear_categories 或类似的东西来重定向回调用管理页面。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-28T19:35:20.513

我有一个类似的问题并使用类似下面的方法修复它，

```
expire_fragment(ActionCachePath.new(self, {
    :controller => '/api/v2/tags',
    :action => 'categories'
}, true).path) 
```

# r - 更改 R 中变量的参考水平

> ID：16219127
> 
> 赞同：4
> 
> 时间：2013-04-25T15:41:28.190
> 
> 标签：r, levels

我有一个带有变量颜色的数据集（称为数据）。COLOR 的模式是数字，类别是因子。首先，我对“数字”有点困惑——当打印出来时，COLOR 的数据不是数字——它们都是字符值，如白色、蓝色或黑色等。对此的任何澄清表示赞赏。

此外，我需要编写R代码来返回COLOR变量的级别，然后确定该变量的当前参考水平，最后将该变量的参考水平设置为白色。我尝试使用因子，但完全不成功。

感谢您花时间提供帮助。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-25T15:51:09.520

`mode(DATA$COLOR)`是`"numeric"`因为 R 在内部将因子存储为数字代码（以节省空间），加上与代码值相对应的相关标签向量。当您打印因子时，R 会自动为每个代码替换相应的标签。

```
f <- factor(c("orange","banana","apple"))
## [1] orange banana apple 
## Levels: apple banana orange
str(f)
##  Factor w/ 3 levels "apple","banana",..: 3 2 1
c(f)    ## strip attributes to get a numeric vector
## [1] 3 2 1 
attributes(f)
## $levels
## [1] "apple"  "banana" "orange"
## $class
## [1] "factor" 
```

...我需要编写 R 代码来返回 COLOR 变量的级别...

```
levels(DATA$COLOR) 
```

...然后确定该变量的当前参考水平，

```
levels(DATA$COLOR)[1] 
```

...最后将此变量的参考级别设置为白色。

```
DATA$COLOR <- relevel(DATA$COLOR,"White") 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-25T15:48:19.497

这是 R 如何[存储因子](http://www.stat.berkeley.edu/classes/s133/factors.html)的结果。您在控制台中看到的值看起来像字符，但在内部存储为数字（原因可能超出了这里的范围）。

如果要恢复级别，可以键入`levels(DATA$COLOR)`. 在控制台中查看和查看更多信息`?factor`。`?levels`如果您想*重新调整*一个因素，请尝试添加一个[可重现的示例](https://stackoverflow.com/a/5963610/1188479)，以便我可以浏览代码。

# c# - 如果绑定不匹配，则将项目添加到 itemssource

> ID：16219128
> 
> 赞同：2
> 
> 时间：2013-04-25T15:41:28.403
> 
> 标签：c#, wpf, datagrid, combobox, fallbackvalue

所以，这是我的场景：我有一个`ComboBox`where`itemssource`是`Dictionary<int, string>`各种标题及其 ID 的地方。这些标题将来可能会被禁用，因此不应再显示`ComboBox`。但是，在查看旧项目时，除了当前活动的标题外，我仍然需要能够显示这个旧值。我将尝试在下面更好地可视化。

**今天：**

ComboBox 项目包括

*   1、标题1
*   2、标题2
*   3、标题3

选择 Title3 并存储 ID (3)。

**明天：**

Title3 被禁用并添加 Title4，因此项目现在包括

*   1、标题1
*   2、标题2
*   4、标题4

但是，如果我们昨天的值是我们绑定的值（ID 3），则没有匹配项。理想情况下，我想将我们的旧项目附加到末尾，如下所示：

*   1，标题1，
*   2、标题2
*   4、标题4
*   3、标题3

启用和禁用标题显然会有单独的列表，并且任何未正确绑定的项目都可以引用禁用标题变量。

我进行了调查`fallbackValues`，甚至`PriorityBindings`似乎无法找到一种方法让它们适合我正在尝试做的事情。也许某种与 a 一起使用的转换器`fallbackValue`？我感谢帮助和反馈。

另外，作为参考，这是我目前正在使用的代码（我希望在数据网格中执行此操作）。

**WPF：**

```
<DataGridTemplateColumn x:Name="tkTitle" Header="Title" Width="150">
    <DataGridTemplateColumn.CellTemplate>
        <DataTemplate>
            <ComboBox ItemsSource="{Binding DataContext.TaskTitles, RelativeSource={RelativeSource Mode=FindAncestor, AncestorType={x:Type DataGrid}}}" SelectedValue="{Binding Path=tkttID, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" SelectedValuePath="Key" DisplayMemberPath="Value" Width="Auto" />
        </DataTemplate>
    </DataGridTemplateColumn.CellTemplate>
</DataGridTemplateColumn> 
```

**ViewModel 中的相关代码：**

```
public Dictionary<int, string> TaskTitles
{
    get
    {
        return BestClass.taskTitles;
    }
} 
```

**编辑 - 工作代码** 这是我用来让一切正常工作的代码。ItemsSource 已更新为带有转换器的 MultiBinding。MultiBinding 包含活动任务标题、所有任务标题和 ID。这些都被传递给转换器，因此在活动列表中检查 ID，如果它不活动则添加。感谢大家的帮助！

**WPF**

```
<DataGridTemplateColumn x:Name="tkTitle" Header="Title" Width="150">
    <DataGridTemplateColumn.CellTemplate>
        <DataTemplate>
            <ComboBox SelectedValue="{Binding Path=tkttID, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" SelectedValuePath="Key" DisplayMemberPath="Value" Width="Auto">
                <ComboBox.ItemsSource>
                    <MultiBinding Converter="{StaticResource CheckDisabledTaskTitle}" Mode="OneWay">
                        <MultiBinding.Bindings>
                            <Binding Path="DataContext.TaskTitles" RelativeSource="{RelativeSource Mode=FindAncestor, AncestorType={x:Type DataGrid}}" />
                            <Binding Path="DataContext.AllTaskTitles" RelativeSource="{RelativeSource Mode=FindAncestor, AncestorType={x:Type DataGrid}}" />
                            <Binding Path="tkttID" />
                        </MultiBinding.Bindings>
                    </MultiBinding>
                </ComboBox.ItemsSource>
            </ComboBox>
        </DataTemplate>
    </DataGridTemplateColumn.CellTemplate>
</DataGridTemplateColumn> 
```

**转换器的代码隐藏**

```
class CheckDisabledTaskTitle : IMultiValueConverter
{
    //values[0] - Active values
    //values[1] - All values (including disabled)
    //values[2] - Current ID
    public object Convert(object[] values, Type targetType, object parameter, System.Globalization.CultureInfo culture)
    {
        //Check to see if the active values contain our current ID
        if (((Dictionary<int, string>)values[0]).ContainsKey((int)values[2]))
        {
            //They do, so return just the active values
            return values[0];
        }
        else
        {
            //They don't, so we'll add only our disabled value to the active list
            ((Dictionary<int, string>)values[0]).Add((int)values[2], ((Dictionary<int, string>)values[1])[((int)values[2])]);
            //Then give that back
            return values[0];
        }
    }

    public object[] ConvertBack(object value, Type[] targetTypes, object parameter, System.Globalization.CultureInfo culture)
    {
        throw new NotImplementedException();
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T16:43:40.547

如果我明白你在这里的目的...

1）**我相信您应该修改视图模型中的内容**- 如果结果为空或为空，则提供 a `default`（您需要实现 INotifyPropertyChanged 以通知那里的更改等）。

2）**另一个选项是某种转换器**- 它获取您的列表属性并使用`MultiBinding`.

> 有关详细信息，请参阅我的这篇文章（主要是那里的代码） - [在 INotifyPropertyChanged 上刷新值转换器](https://stackoverflow.com/questions/15868582/refreshing-value-converter-on-inotifypropertychanged/15868643#15868643)

基本上，您绑定了正确的属性列表 - 和“默认列表” - 在转换器内部，您可以决定要做什么。

例如：

```
<ComboBox  ...>
    <ComboBox.ItemsSource>
        <MultiBinding Converter="{StaticResource ImageConverter}" Mode="OneWay">
            <MultiBinding.Bindings>
                <Binding Path="TaskTitles" />
                <Binding Path="FallbackTitles" />
                <!--Binding Path="" /-->
            </MultiBinding.Bindings>
        </MultiBinding>
    </ComboBox.ItemsSource>
</ComboBox> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T16:02:07.357

我认为您需要在 ViewModel 中修改您的集合，以便您...

1.  加载允许的值 (TaskTitles)
2.  检查允许值中的选定值 (tkttID)。如果它不存在，则添加它。

为此，您应该为 TaskTitles 提供一个带有 setter 的自动属性，以便您可以在其他地方管理其内容。

例如..（以下未经测试，因为我没有 VS atm）。我还使用了下面的 Linq，我认为它是 .NET 3 及更高版本。

```
public Dictionary<int, string> TaskTitles {get;set;}

public void Initialise()
{
TaskTitles = new Dictionary<int, string>();

foreach(var taskTitle in BestClass.taskTitles)
    TaskTitles.Add(taskTitle);

if(!TaskTitles.Any(t => t.Value == tkttid.Value))
    TaskTitles.Add(tkttid);

} 
```

请注意，您没有添加到 BestClass.taskTitles，因此该集合不会受到影响。您正在创建一个新集合并添加相同的值，加上（可能）另一个值。

# php - jQuery AJAX .post 从一个 php 中提取多个变量

> ID：16219129
> 
> 赞同：0
> 
> 时间：2013-04-25T15:41:30.840
> 
> 标签：php, jquery

我试图找到使用 AJAX 帖子从 PHP 中提取多个变量的最佳方法。现在，我正在使用 .substr 将回显变量从 PHP 本身中分离出来。

这是我的 AJAX 帖子（使用 jQuery）

```
$.post("scripts/enter/register.php", {username : username, email : email, password : password}, function(data) {
    var callback = data.substr(0,1);
    var user_session = data.substr(1);
    if(callback === "1"){
        //Do a registration script
    } else {
        //Give an error
    }
}); 
```

和我的 PHP

```
if (strlen($hash) >= 20) {
    if($user_name){
        //Perform SQL queries
        echo "1";
        echo $cookie;
    } else {
        echo "0";
    }
} else {
    echo "0";
} 
```

如您所见，在我的 php 中，当一切顺利时，我会回显两个变量。当出现错误时，我只回显一个变量。这个脚本工作得很好，但我觉得它很笨重，而且显然不安全。在旁注中，我开始明白回声是不安全的，尽管没有人告诉我要做什么。

我有另一个处理登录的脚本（最后一个脚本是注册），但我使用了不同的 PHP 脚本。以下是问题：

1.  我可以将注册和登录（以及任何其他 PHP 脚本）合并到一个脚本中吗？
2.  有没有更好的方法将 PHP 变量转换为 javascript 变量以便能够在 jQuery 中使用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T15:45:33.607

您的代码中有 if(callback === "1"){ 。

这应该是 if(callback == "1"){ 假设这可能是一个数字以及一个字符串

这可能会解决您的部分问题

# cocos2d-iphone - Cocos2d：UIImageView 不会从 glView 中删除自己

> ID：16219131
> 
> 赞同：0
> 
> 时间：2013-04-25T15:41:35.357
> 
> 标签：cocos2d-iphone, uiimageview

在我的应用程序中，我正在推送一个包含 2 个 UIImageViews 的新场景。在新场景的 init 方法中，UIImageViews 被分配，然后使用以下方法添加到视图中：

```
[[[CCDirector sharedDirector] view] addSubview: _someUIImageView]; 
```

在 dealloc 方法中，我将删除图层作为 touchDispatcher 的委托，并删除 UIImageviews，例如：

```
[_someUIImageView removeFromSuperview]; _someUIImageView = nil; 
```

但是，当我弹出场景时，我确实返回了我想要的场景，但我仍然能够与之前场景中的 UIImageviews 进行交互。我已经尝试替换场景而不是仅仅弹出它，但它们仍然在那里。如果这有什么不同，我正在使用 Cocos2d 2.0。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-26T04:38:07.740

@Kreiri 没关系，也许当你删除场景时没有调用 dealloc 方法，

查看保留对象，也许有人没有被释放，导致 dealloc 方法没有被调用。

# iphone - 在 PhoneGap IOS 上缓存图像的最佳方法

> ID：16219133
> 
> 赞同：4
> 
> 时间：2013-04-25T15:41:39.030
> 
> 标签：iphone, ios, cordova

我正在构建一个 PhoneGap ios 应用程序，该应用程序用于使用 JSON 从服务器导入数据，该数据包含图像 URL，我已经习惯将数据缓存在本地存储中，以便在应用程序断开 Internet 连接时使用它但是我有一个问题是缓存图像的最佳方式是什么。

我正在考虑将图像转换为 data-uri 并将其保存到 IOS 数据库。

请告知此解决方案是否可行或是否有其他最佳解决方案？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-07-18T17:23:16.717

这篇博文应该让您走上正确的轨道[https://www.raymondcamden.com/2012/01/19/Downloading-files-to-a-PhoneGap-application-Part-1/](https://www.raymondcamden.com/2012/01/19/Downloading-files-to-a-PhoneGap-application-Part-1/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-26T11:42:49.247

Phonegap API 有一个文件系统，您可以使用它来存储从远程服务器下载的图像，这可能是您的最佳选择吗？

这些文件将存储在应用程序的 Documents 文件夹中，因此您需要找到该路径（每次安装到下一次安装都不同），然后将文件保存在本地并将路径保存在 localstorage 中。

这是一个代码片段 - 首先它制作并保存一个 dummy.html 文件以锻炼本地路径 - 然后它下载文件 -

```
function downloadFile(webURL,webFilename){
    window.requestFileSystem(
                             LocalFileSystem.PERSISTENT, 0,
                             function onFileSystemSuccess(fileSystem) {
                             fileSystem.root.getFile(
                                                     "dummy.html", {create: true, exclusive: false},
                                                     function gotFileEntry(fileEntry){
                                                     var sPath = fileEntry.fullPath.replace("dummy.html","");
                                                     var fileTransfer = new FileTransfer();
                                                     fileEntry.remove();

                                                     fileTransfer.onprogress = function(result){
                                                     var percent =  result.loaded / result.total * 100;
                                                     percent = Math.round(percent);
                                                     console.log('Downloaded:  ' + percent + '%');
                                                     };

                                                     fileTransfer.download(
                                                                           webURL,
                                                                           sPath + webFilename,
                                                                           function(theFile) {
                                                                           console.log("download complete: " + theFile.toURL());
                                                                           showLink(theFile.toURL());
                                                                           },
                                                                           function(error) {
                                                                           console.log("download error source " + error.source);
                                                                           console.log("download error target " + error.target);
                                                                           console.log("upload error code: " + error.code);
                                                                           navigator.notification.alert('Seems to be an error downloading this background. Try again later.', null, 'Error', 'OK');
                                                                           }
                                                                           );
                                                     },
                                                     fail);
                             },
                             fail);

}

function showLink(localurl){
    console.log(localurl);
} 
```

# php - 将具有相同元素值的数组组合在一起并将它们保持在一起

> ID：16219140
> 
> 赞同：1
> 
> 时间：2013-04-25T15:42:03.443
> 
> 标签：php, arrays, merge

我有这个数组：

```
[0] => Array
    (
        [userid] => 208
        [username] => sara
        [email] => sara@sara.com
    )

[1] => Array
    (
        [userid] => 4
        [username] => jack
        [email] => jack@jack.com
    )

[2] => Array
    (
        [userid] => 303
        [username] => michael
        [email] => michael@michael.com
    )

[3] => Array
    (
        [userid] => 208
        [username] => joe
        [email] => joe@joe.com
    )

[4] => Array
    (
        [userid] => 208
        [username] => david
        [email] => david@david.com
    ) 
```

我想要这个结果：

```
[0] => Array
(
    [userid] => 208
    [username1] => sara
    [username2] => joe 
    [username3] => david
    [email1] => sara@sara.com
    [email2] => joe@joe.com
    [email3] => david@david.com
)

[1] => Array
(
    [userid] => 4
    [username1] => jack
    [email1] => jack@jack.com
)

[2] => Array
(
    [userid] => 303
    [username1] => michael
    [email1] => michael@michael.com
) 
```

我正在尝试将 array_combine、array_merge 甚至 array_unique 与几个 foreach 加 $n++; 循环没有成功。更准确地说，我成功了，但改变了数组的整个结构。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T15:53:06.387

你可以这样做：

```
/* $myArray is the array you are trying to change */
$result = array(); //Your minimized array
foreach($myArray as $value){
    $userid = $value['userid'];
    if(isset($result[$userid]))
        $index = ((count($result[$userid]) - 1) / 2) + 1;
    else
        $index = 1;

    $result[$userid]['userid'] = $userid;
    $result[$userid]['username' . $index] = $value['username'];
    $result[$userid]['email' . $index] = $value['email'];        
}
$result = array_values($result); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T15:50:03.833

我必须循环通过数组来构建所需的结构：

```
$result = array();
foreach($data as $item) {
   $result[$item['userid']]['userid'] = $item['userid'];
   $i = 1;
   while (true) {
       if (!isset($result[$item['userid']]['username' . $i])) {
           $result[$item['userid']]['username' . $i] = $item['username'];
           $result[$item['userid']]['email' . $i] = $item['email'];
           break;
       }
       $i++;
   }
}
var_dump($result); 
```

# python - 创建一个游戏覆盖 - pygame

> ID：16219141
> 
> 赞同：1
> 
> 时间：2013-04-25T15:42:06.780
> 
> 标签：python, opengl, overlay, pygame

有没有办法在程序输出之上添加东西？我正在为 Dune2000 编写扩展程序，您可以在其中预订部队。

我已经编写了核心——我可以预购部队，但我无法显示还剩多少，或者模块的任何其他状态。

在子进程窗口顶部绘制/将子进程窗口输出到新表面并blit它的最佳方法是什么？

# sql-server - IDENTITY 列用完后怎么办

> ID：16219148
> 
> 赞同：-1
> 
> 时间：2013-04-25T15:42:20.000
> 
> 标签：sql-server

当您有现有数据时，如何在 SQL 中重新设置标识列？是否有一种简单的方法来执行此操作，以便所有数据都获得更新的身份（也反映在关联外键上）？

编辑：如果您达到身份列的限制，会发生什么？在那种情况下你会怎么做？这就是我问这个问题的原因。我只是想了解如何解决此类问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T15:51:12.073

无法自动执行此操作。您可以编写自己的一组脚本来完成这项工作，但我不知道任何会“压缩”现有身份范围的商业（MS 或其他）解决方案。但是，正如 Aaron 所说，您为什么首先要这样做？

SQL Server 的标识值不能保证没有间隙甚至单调增长。有关更多详细信息，请查看[http://sqlity.net/en/792/the-gap-in-the-identity-value-sequence/](http://sqlity.net/en/792/the-gap-in-the-identity-value-sequence/)

如果您需要您的价值单调增长或连续，您可能必须开发自己的“价值提供者服务”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T17:14:31.433

这是一个可能的 HACK 解决方案。

您是否使用原始 IDENTITY 定义从“0”开始。

你有一个完整的 -MAX 到 -1 供你使用。

```
DBCC CHECKIDENT ('MyTableName', RESEED, -2147483648); 
```

但是，您可以使用应用程序代码（例如：DotNet）来检查诸如“if myKey>0”之类的事情，这会导致崩溃。

如果你这样做了，我会添加一个额外的 CHECK 约束，一旦表达到 -1，它就会失败。

再说一次，我真的不建议这样做。但提供它作为一种可能性。

我使用 IDENTITY 的几次（从“旧时代”开始），实际上是从 -MAX 值开始播种。

一个例子。一个在其下没有 FK 的日志记录表。只是一个表格，用于抛出一些每周刷新的审计数据，所以这实际上并不重要。IDENTITY 只是给了它一些命令。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-25T15:50:25.963

通过使用[DBCC CHECKIDENT](http://msdn.microsoft.com/en-us/library/ms176057.aspx)，您可以提供`RESEED`参数和 a `new_reseed_value`，如下例所示（来自 MSDN 链接）：

```
USE AdventureWorks2012;
GO
DBCC CHECKIDENT ("Person.AddressType", RESEED, 10);
GO 
```

结合 UPDATE 和[IDENTITY_INSERT](http://msdn.microsoft.com/en-us/library/ms188059.aspx)修改现有数据。

# php - 如何从 RSS 提要中获取正确的标题？

> ID：16219159
> 
> 赞同：0
> 
> 时间：2013-04-25T15:43:00.523
> 
> 标签：php, rss

我有一个提要：[https ://www.facebook.com/feeds/page.php?format=rss20&id=172360026392](https://www.facebook.com/feeds/page.php?format=rss20&id=172360026392)

以标题为例：

> 不，不怕！Maraton Warszawski & #x2013; 气

& 和 # 之间的空格是有意的，在 rss 中没有空格。如何将字符串转换为纯 UTF-8 以便 & #x2013; 会变成“-”字吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T15:51:54.027

使用 html_entity_decode 函数：[http ://www.php.net/manual/en/function.html-entity-decode.php](http://www.php.net/manual/en/function.html-entity-decode.php)

# ios - 子类化 UIToolbar 并覆盖 drawRect: - UIBarButtonItems 不显示

> ID：16219160
> 
> 赞同：0
> 
> 时间：2013-04-25T15:43:02.440
> 
> 标签：ios, uinavigationcontroller, uibarbuttonitem, uitoolbar, drawrect

**语境**

我正在使用“initWithNavigationBarClass”方法使用自定义工具栏初始化 UINavigationController，这是我分配初始化 UINavigationController 的行

```
navigationController = [[UINavigationController alloc] initWithNavigationBarClass:nil toolbarClass:[QuestionToolbar class]]; 
```

是类，“QuestionToolbar”，我继承 UIToolbar 并覆盖 drawrect，这里是 drawRect 方法：

```
 - (void)drawRect:(CGRect)rect
    {
      [super drawRect:rect];
      UIImage *backgroundImage = [UIImage imageNamed:@"44px_background_red.png"];
      [backgroundImage drawInRect:CGRectMake(0, 0, self.frame.size.width, self.frame.size.height)];
    } 
```

这是 viewController 中的相关代码，我尝试在其中添加 UIBarButtonItems

```
UIBarButtonItem *spacer = [[UIBarButtonItem alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemFlexibleSpace target:nil action:nil];
UIBarButtonItem *beginItem = [[UIBarButtonItem alloc] initWithTitle:@"Begin Quiz" style:UIBarButtonItemStylePlain target:self action:@selector(beginAction:)];

[beginItem setTitleTextAttributes:[NSDictionary dictionaryWithObjectsAndKeys: [UIColor whiteColor], UITextAttributeTextColor,nil] forState:UIControlStateNormal];

NSArray *items = [NSArray arrayWithObjects:spacer, beginItem, spacer, nil];
[self.navigationController.toolbar setItems:items];

[self.navigationController setToolbarHidden:NO]; 
```

**问题**

我如何将 UIBarButtonItems 添加到此工具栏，因为当我尝试添加它们时它们不显示？

我认为这与我最重要的 drawRect 有关

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T17:31:58.080

我尝试使用自定义 UIToolbar，但问题不在于`-(void)drawRect:(CGCrect)rect`.

我不知道您是否尝试在 UIToolbar 上添加按钮，但您应该尝试在`-(void)viewDidAppear`UIViewController 类的方法中添加它们。通过这种方式，它对我有用。

# c - 将 rand() 的输出放入数组

> ID：16219164
> 
> 赞同：0
> 
> 时间：2013-04-25T15:43:04.847
> 
> 标签：c, arrays, random

我写了一个小骰子滚动程序，无论输入多少骰子，它都会打印出结果。我想计算每个数字出现了多少，所以我想我会将 rand() 函数的输出放入一个数组中，然后在数组中搜索不同的值。我不知道如何将数字放入未手动输入的数组中。

```
 #include <stdio.H>
    #include <stdlib.h>
    #include <time.h>

    int main(void)
    {
        int count; 
        int roll;  

        srand(time(NULL));

       printf("How many dice are being rolled?\n");
       scanf("%d", &count);

       printf("\nDice Rolls\n");
       for (roll = 0; roll < count; roll++)
       {
         printf("%d\n", rand() % 6 + 1);
       }
       return 0;
      } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T15:47:10.757

```
 #include <stdio.H>
    #include <stdlib.h>
    #include <time.h>

    int main(void)
    {
        int  count; 
        int  roll;  
        int* history;

        srand(time(NULL));

        printf("How many dice are being rolled?\n");
        scanf("%d", &count);

        history = malloc( sizeof(int) * count );

        if( !history )
        {
            printf( "cannot handle that many dice!\n" );
            exit( -1 );
        }

        printf("\nDice Rolls\n");
        for (roll = 0; roll < count; roll++)
        {
          history[roll] = rand() % 6 + 1;
          printf("%d\n", history[roll]);
        }

        // do something interesting with the history here

        free( history );
        return 0;
      } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T15:47:13.140

just put it into the array

```
for (roll = 0; roll < count; roll++)
{
    myArray[roll] = rand() % 6 + 1;
    printf("%d\n", myArray[roll] );
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-25T15:59:36.357

如果您想跟踪每个结果的出现次数，您甚至不需要保存每个掷骰子。

```
int result[6] = {} ; // Initialize array of 6 int elements
int current = 0; // holds current random number
for (roll = 0; roll < count
{
     current = rand() % 6;
     result[current]++; // adds one to result[n] of the current random number
     printf("%d\n", current+1);
} 
```

之后，您将有一个 0-5 数组（结果），每个元素包含每次出现的次数（您需要添加元素编号 + 1 才能获得实际滚动）。IE。result[0] 是“1”的出现次数。

# events - 构建后项目不可见或事件不起作用

> ID：16219167
> 
> 赞同：0
> 
> 时间：2013-04-25T15:43:06.757
> 
> 标签：events, build, sencha-touch, sencha-touch-2

我有一个非常简单的应用程序：[http](http://www.senchafiddle.com/#AREBJ) ://www.senchafiddle.com/#AREBJ 。它由一个显示一些链接的视图组成。单击它们中的每一个后，会出现一个带有目标值的弹出窗口。在构建应用程序之前一切正常，但在构建后链接根本不显示。为了显示链接，我使用了 DataView 组件。以前我尝试过使用 Ext.Component 来解决它，但不知道为什么在点击任何项目时没有触发事件（以及“绘制”事件）。这是我更喜欢使用的 IconsScreen 视图的第二个版本，但没有事件它是无用的：

```
Ext.define('SF.view.IconsScreen', {
    extend: 'Ext.Component',
    xtype: 'icons-screen',
    require: [
        'SF.store.MainMenu'
    ],
    config: {
        tpl: new Ext.XTemplate('<ul class="menu-icons-list">',
            '<tpl for=".">',
                '<li class="icon">',
                    '<a target="{url}" style="background: url({icon})">',
                    '</a>',
                    '<span class="icon-text">{name}</span>',
                '</li>',
            '</tpl>',
        '</ul>'
        ),
        store : Ext.create('SF.store.MainMenu'),
        data : [],
        listeners : {
            painted : function(){
                this.onIconTap();
            }
        }
    },

    initialize : function() {
        var storeData = this.getStore().getRange(),
            tplData   = [];

        Ext.Array.each(storeData, function(item){
            tplData.push(item.getData());
        });

        this.setData(tplData);

        this.element.on({
            scope    : this,
            delegate : 'a',
            tap      : 'onIconTap'
        });

        this.callParent();
    },

    onIconTap : function(e, t) {
        this.fireEvent('icontap', e, t);
    }
}); 
```

我还附上了一个可构建的版本：[https ://mega.co.nz/#!kEZiCTQT!ckFxSQz0qMScpIX1UvfZGxa0qeQfM9MVy8hynjdPHQ8](https://mega.co.nz/#!kEZiCTQT!ckFxSQz0qMScpIX1UvfZGxa0qeQfM9MVy8hynjdPHQ8)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T16:05:32.657

首先，我认为您`this.element`在实际呈现列表之前是未定义的。所以你不能在构造函数中分配这样的事件。您需要等待绘制/渲染事件，然后在那里分配额外的处理程序。

至于跟踪构建代码中的问题，我建议构建`testing`版本。它没有被缩小，但它在所有其他方面都等于生产。

# mysql - 如何使用变量在mysql中使用diffdate函数

> ID：16219168
> 
> 赞同：0
> 
> 时间：2013-04-25T15:43:12.043
> 
> 标签：mysql, variables

```
CREATE DEFINER=`root`@`localhost` PROCEDURE `bill`(subid int(10), uprice float, sd date, ed date)
BEGIN
declare numberofdays int;
declare totalprice float;

set numberofdays = datediff(ed,sd);
set totalprice= numberofdays*uprice;

insert into invoice (subscriptionid,price_perunit,numberofdays,totalprice) 
values (subid, uprice,numberofdays,totalprice); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T16:07:22.487

您的代码（语法）是正确的。您可能对变量和字段名称有疑问，请尝试使用不同的名称，例如 -

```
CREATE DEFINER = root@localhost PROCEDURE bill (subid int(10), uprice float, sd date, ed date)
BEGIN
  DECLARE var_numberofdays int;
  DECLARE var_totalprice float;

  SET var_numberofdays = DATEDIFF(ed, sd);
  SET var_totalprice = var_numberofdays * uprice;

  INSERT INTO invoice (subscriptionid, price_perunit, numberofdays, totalprice)
    VALUES (subid, uprice, var_numberofdays, var_totalprice);

  ...
END; 
```

# html - IE和firefox、google chrome等之间的img位置差异

> ID：16219174
> 
> 赞同：1
> 
> 时间：2013-04-25T15:43:23.947
> 
> 标签：html, image, position

我正在尝试嵌入一个 youtube 视频，但让它看起来像它在电视图像上。它在 IE 中看起来像我想要的那样，但在 Firefox 和 Google Chrome 上却没有。

```
#youtubeBG img {
    display:block;
    text-align:center;
    width:100%;
    margin:0 auto;
    position:relative;

}
<div id="youtubeBG" style="width:1000px; height:700px; text-align:center;"><img       src="images/4.png"/>
<span class='embed-youtube' style='text-align: left; display: block; position: absolute; top: 305px; left: 382px; width: 786px; height: 514px;'>    <iframe class='youtube-player' type='text/html' width='750' height='528.3' src='' frameborder='0'></iframe>
</span></div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T16:07:36.723

您正在添加许多不必要的样式来实现您想要的。通常 width:100% 不是一个好主意，因为每个浏览器似乎都以自己的方式计算和呈现它。

这是我的建议： http: [//fiddle.jshell.net/iGanja/PJwD2/](http://fiddle.jshell.net/iGanja/PJwD2/)

您会注意到我添加了边框以供视觉参考，因为我没有您的图像可用。您基本上需要调整 -20px 以匹配您的背景图像。

希望这可以帮助。

```
#youtubeBG img {
    display:block;
    margin:0 auto;
}

<div id="youtubeBG" style="border: 1px solid black; width:1000px; height:550px; text-align:center;">
    <img src="images/4.png"/>
    <div class='embed-youtube' style='border: 1px solid red; width: 786px; height: 514px; margin:-20px auto;'>
        <iframe class='youtube-player' type='text/html' width='750' height='528.3' src='' frameborder='0'></iframe>
    </div>
</div> 
```

# java - 是否可以从网络浏览器运行 selenium 脚本？

> ID：16219178
> 
> 赞同：0
> 
> 时间：2013-04-25T15:43:32.027
> 
> 标签：java, python, selenium

我有一个脚本（使用 Python）提交到 www.example.com/form/info.php 上的表单

目前我的脚本将： - 打开 Firefox - 输入姓名、年龄、地址 - 按提交

我想要做的是在 LAMP 上有一个网络表单（带有姓名、年龄、地址），当用户按下提交时，它会将这些选项添加到 selenium 脚本中（放入 www.example.coom/form/info.php ) 并直接在浏览器中提交。这可能吗？

**更新：** 我知道使用 mechanize 可以做到这一点，因为我已经对其进行了测试，但是对于 javascript 来说效果并不好，这就是我使用 selenium 的原因。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T16:13:51.497

该脚本必须首先运行并创建浏览器会话。目前 AFAIK 没有办法对已经打开的浏览器进行 webdriver 控制。

# php - 解析错误：语法错误，意外的 T_CONSTANT_ENCAPSED_STRING？

> ID：16219182
> 
> 赞同：-1
> 
> 时间：2013-04-25T15:43:46.560
> 
> 标签：php, forms, error-handling

我很难弄清楚这个错误，我只是让表单本身工作得很好。客户给了我一个新的邮政编码列表，以放入更新版本。我把那些新的邮政编码放进去，我一直收到这个错误：第8行/home/pftech/public_html/wp-content/themes/pureflo/formhandler.php中的解析错误：语法错误，意外的T_CONSTANT_ENCAPSED_STRING，期待')'

我很困惑为什么现在会发生这种情况。我可以在这方面获得一些帮助吗？我觉得这很容易。代码如下。谢谢

```
FORM HANDLER :
<?php
/**
 * Template Name: Form Handler
 */
?>  
 <?php
    if(isset($_GET['zip'])){
$sandiego = array(‘91901’, ‘91902’, ‘91903’, ‘91908’, ‘91909’, ‘91910’, ‘91911’, ‘91912’, ‘91913’, ‘91914’, ‘91915’, ‘91916’, ‘91921’, ‘91932’, ‘91933’, ‘91935’, ‘91941’, ‘91942’, ‘91943’, ‘91944’, ‘91945’, ‘91946’, ‘91947’, ‘91948’, ‘91950’, ‘91951’, ‘91962’, ‘91976’, ‘91977’, ‘91978’, ‘91979’, ‘91990’, ‘92003’, ‘92007’, ‘92008’, ‘92009’, ‘92010’, ‘92011’, ‘92013’, ‘92014’, ‘92018’, ‘92019’, ‘92020’, ‘92021’, ‘92022’, ‘92023’, ‘92024’, ‘92025’, ‘92026’, ‘92027’, ‘92028’, ‘92029’, ’92030’, ‘92033’, ‘92037’, ‘92038’, ‘92039’, ‘92040’, ‘92046’, ‘92049’, ‘92051’, ‘92052’, ‘92054’, ‘92055’, ‘92056’, ‘92057’, ‘92059’, ‘92060’, ‘92061’, ‘92064’, ‘92065’, ‘92067’, ‘92068’, ‘92069’, ‘92070’, ‘92071’, ‘92072’, ‘92074’, ‘92075', ‘92078’, ‘92079’, ‘92081’, ‘92082’, ‘92083’, ‘92084’, ‘92085’, ‘92088’, ‘92090’, ‘92091’, ‘92092’, ‘92093’, ‘92096’, ‘92101’, ‘92102’, ‘92103’, ‘92104’, ‘92105’, ‘92106’, ‘92107’, ‘92108’, ‘92109’, ‘92110’, ‘92111’, '92112’, ‘92113’, ‘92114’, ‘92115’, ‘92116’, ‘92117’, ‘92118’, ‘92119’, ‘92120’, ‘92121’, ‘92122’, ‘92123’, ‘92124’, ‘92126’, ‘92127’, ‘92128’, ‘92129’, ‘92130’, ‘92131’, ‘92132’, ‘92133’, ‘92134’, ‘92135', ‘92136’, ‘92137’, ‘92138’, ‘92139’, ‘92140’, ‘92142’, ‘92143’, ‘92145’, ‘92147’, ‘92149’, ‘92150', ‘92152’, ‘92153’, ‘92154’, ‘92155’, ‘92158’, ‘92159’, ‘92160’, ‘92161’, ‘92162’, ‘92163’, ‘92164', '92165’, ‘92166’, ‘92167’, ‘92168’, ‘92169’, ‘92170’, ‘92171’, ‘92172’, ‘92173’, ‘92174’, ‘92175', '92176’, ‘92177’, ‘92178’, ‘92179', ‘92182’, ‘92184’, ‘92186’, ‘92187’, ‘92190’, ‘92191’, ‘92192’, ‘92193’, ‘92194’, ‘92195’, ‘92196’, ‘92197’, ‘92198’, ‘92199’, ‘92592’, ‘92590’, ‘92562’, ‘92563’, ‘92591’, '91911', '91914', '91915', '91932', '91942', '91945', '91950', '92014', '92025', '92027', '92029', '92037', '92064', '92065', '92067', '92071', '92075', '92101', '92102', '92103', '92104', '92105', '92106', '92107', '92108', '92109', '92110', '92111', '92113', '92114', '92115', '92116', '92117', '92118', '92119', '92120', '92121', '92122', '92123', '92124', '92126', '92127', '92128', '92129', '92130', '92131', '92132', '92134', '92135', '92139', '92140', '92145', '92147', '92154', '92173', '92562', '92563', '92590', '92591', '92592', '92596');
      if (in_array($_GET['zip'], $sandiego)){
          $urls = array();
            if($_GET["home"] == "homeradio") { 
                $urls[] = "http://50.22.79.62/~pftech/water-delivery-service/";
                $urls[] = "http://50.22.79.62/~pftech/coffee-delivery/";
                $urls[] = "http://50.22.79.62/~pftech/water-filtration-systems/";

            } elseif($_GET["home"] == "officeradio") {
                $urls[] = "http://50.22.79.62/~pftech/office-delivery/";
                $urls[] = "http://50.22.79.62/~pftech/office-delivery/";
                $urls[] = "http://50.22.79.62/~pftech/office-delivery/";
            }
            if($_GET['selection'] < 3 && $_GET['selection'] >= 0) {
                $URL = $urls[$_GET['selection']];
                header("Location: $URL?zip=$_GET[zip]");
            } else header("Location: http://50.22.79.62/~pftech/nationwide/"); 
        } else {
            header("Location: http://50.22.79.62/~pftech/nationwide/");
        }
    }
    exit;
?>

FORM: 
<div class="home-form">

<form method='get' id='gform_1'  action='http://50.22.79.62/~pftech/form-handler/'>

<div class="serviceinput"

<label for="services">Services: </label>

<select id="selection" name="selection">

<option value="-1">Select Service</option>

<option value="0">Water Delivery</option>

<option value="1">Coffee Services</option>

<option value="2">Water Filtration</option>

</select>

</div>

&nbsp;

<div class="zipcode">

<label for="zip">Zip Code: </label>

<input name="zip" type="text" maxlength="5" id="zip" /></div>

<div class="frontradio">

   <input name="home" type="radio" value="homeradio" />

   <div class="homelabel"> 

   <label for="homeradio">Home</label></div>

    <input name="home" type="radio" value="officeradio" />

    <label for="officeradio">Office</label></div>

<div class="homebutton">

<input type='submit' id="submithome" name="did_submit" value="Get Started!">

</div>

</div>

</form> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T15:46:08.420

Your $sandiego array is wrong you cannot use ` delimiter use single quotes.

# php - 将目录忽略添加到 PHPStorm

> ID：16219186
> 
> 赞同：5
> 
> 时间：2013-04-25T15:43:59.353
> 
> 标签：php, svn, phpstorm

如何将文件夹添加到忽略列表？在 PHPStorm 中，我右键单击文件夹->Subversion->set property 我选择 Property name of:svn:ignore 并将属性设置为 folder1/folder2/* 希望该文件夹中的所有文件都将被忽略但是当我想要签入我在该文件夹中更改的文件在要签入的列表中。如何从签入中排除整个文件夹？我正在使用 Windows7 机器（如果这很重要）

我正在使用 PHPStorm 6.0.1

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-02-15T16:22:50.127

右键单击目录 -> 将目录标记为 -> 排除

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T15:53:04.737

尝试右键单击该文件夹，然后 Subversion->Ignore。

# web - 使用 copyAllUsers=false 的 Visual Studio 2012 Web 部署

> ID：16219188
> 
> 赞同：0
> 
> 时间：2013-04-25T15:44:00.980
> 
> 标签：web, visual-studio-2012, web-deployment

我正忙于使用 Visual Studio 2012 试用新的 Web Deploy 3。顺便说一句，这很棒，但我只想知道如何从数据库更新设置中排除用户 Create/Drop。如果有人可以提供帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-28T17:36:44.693

在 VS2012 中，dbdacfx 数据库提供程序用于同步 SQL 数据库，并且没有跳过用户的选项。要跳过用户，您可以直接使用 msdeploy。这必须安装在 C:\program files\iis\Microsoft web deploy V3" 下。从命令行使用 msdeloy.exe 并使用 dbdacfx 提供程序，如下所示

```
msdeploy -verb:sync -source:dbfullsql="<connectionstring>" 
-dest:dbfullsql="<destinationconnectionstring>",copyallusers=false 
```

# php - PHP 在日期之间搜索 SQL DB

> ID：16219190
> 
> 赞同：0
> 
> 时间：2013-04-25T15:44:02.547
> 
> 标签：php, mysql, sql

我有一个 SQL DB，我根据日期和时间存储信息。

SQL 存储的格式是 2013-04-25 15:13:37

列名是 date_time 并且是 Var

我的搜索PHP如下：

```
<form action="control_lbsresult.php" method="get">
                <input type="hidden" name="member_msisdn" value="<?=$query?>" 
/>
                <input type="text" name="query" />
                <br />
                <label for="dates"></label>
                <input type="date" name="dates" id="dates" />
                 Start Date<br />
                <label for="datee"></label>
                <input type="date" name="datee" id="datee" />
                 End Date<br />
                <input type="submit" value="Search" />
            </form> 
```

这是它在 URL 中给出的字符串

```
/control_lbsresult.php?member_msisdn=&query=0827910119&dates=2013-04-01&datee=2013-04-
25 
```

这就是我在结果页面中的内容：

```
<?php
$host="localhost"; // Host name 
$username="***"; // Mysql username 
$password="****"; // Mysql password 
$db_name="****"; // Database name 
$tbl_name="lbs_"; // Table name

// Connect to server and select database.
mysql_connect("$host", "$username", "$password")or die("cannot connect"); 
mysql_select_db("$db_name")or die("cannot select DB");

// get value of id that sent from address bar
$id=$_GET['id'];

// Retrieve data from database 
$sql="SELECT * FROM $tbl_name WHERE date between  '" . $dates . "' AND '" . $datee . "'    
msisdn='$msisdn'"; 
```

它没有在我的日期之间进行过滤，而是为我提供了 MSISDN 的所有结果

我认为问题出在 WHERE 字符串中，请协助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T15:45:16.087

与日期一起使用`BETWEEN`可以获得意想不到的结果。试试这个：

```
SELECT * 
FROM $tbl_name 
WHERE date >=  '" . $dates . "' 
AND date <= '" . $datee . "' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T15:59:01.697

使用`BETWEEN`or `>= & <=`，两者都应该工作。

您需要确保字段类型为`DATE`.

另外，我建议使用mysqli。

以下是为您提供的示例代码：

```
$stmt = $db->prepare("SELECT * FROM tbl_name WHERE date_field between ? AND ?");

$stmt->bind_param("ss",$start_date,$end_date);

$stmt->execute(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-25T15:48:19.093

1.  Change the type of your column.

    `ALTER TABLE tbl MODIFY COLUMN` date `datetime;`

2.  Use `BETWEEN`.

# asp.net-mvc-4 - Mvc：创建方法以从类填充下拉列表并从控制器调用

> ID：16219194
> 
> 赞同：0
> 
> 时间：2013-04-25T15:44:08.170
> 
> 标签：asp.net-mvc-4

下面的代码在我的索引控制器操作中运行良好，该操作使用数据库数据填充下拉框。

我不想直接在我的控制器中使用它，因为我将在页面的多个位置使用下拉菜单。

```
var db = new StoreManagerEntities();
        var query = db.Categories.Select(c => new
        {
            CategoryId = c.CategoryID,
            Categoryname = c.CategoryName,
            IsSelected = c.CategoryID.Equals(0)
        });

        var model = new SelectViewModel
        {
            List = query.ToList()
                        .Select(c => new SelectListItem
                        {
                            Value = c.CategoryId.ToString(),
                            Text = c.Categoryname,
                            Selected = c.IsSelected,
                        })
        };

        return View(model); 
```

我希望能够将代码放在一个方法中并从我的控制器调用此方法 这是另一个我希望该方法使用的类。

```
public class NorthwindDataContext
{

    StoreManagerEntities myDb = new StoreManagerEntities();

    //retrieve all category objects
    public List<Category> GetCategories()
    {
        return myDb.Categories.ToList();
    }

    //populate dropdownbox
        public void PopulateDropdown()
        {
              var query = db.Categories.Select(c => new
        {
            CategoryId = c.CategoryID,
            Categoryname = c.CategoryName,
            IsSelected = c.CategoryID.Equals(0)
        });

        var model = new SelectViewModel
        {
            List = query.ToList()
                        .Select(c => new SelectListItem
                        {
                            Value = c.CategoryId.ToString(),
                            Text = c.Categoryname,
                            Selected = c.IsSelected,
                        })
        };

        }

}

  Can you please show me how I can write the method here and have it 
  return the data I need back to the controller. It will be nice if you 
  can show me how to call this from the controller as well. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-26T03:39:35.347

你改变你的`NorthwindDataContext`班级怎么样

```
public class NorthwindDataContext
    {
        StoreManagerEntities myDb = new StoreManagerEntities();    
        //retrieve all category objects
        public List<Category> GetCategories()
        {
            return myDb.Categories.ToList();
        }    
        //populate dropdownbox
        public SelectViewModel PopulateDropdown()
        {
            var query = db.Categories.Select(c => new
                {
                    CategoryId = c.CategoryID,
                    Categoryname = c.CategoryName,
                    IsSelected = c.CategoryID.Equals(0)
                });

            var model = new SelectViewModel
            {
                List = query.ToList()
                            .Select(c => new SelectListItem
                            {
                                Value = c.CategoryId.ToString(),
                                Text = c.Categoryname,
                                Selected = c.IsSelected,
                            })
            };
            return model;

        }    

    } 
```

`PopulateDropdown()`注意和的返回类型的变化`return model;`

并在控制器中使用它，例如：

```
var db = new NorthwindDataContext();
var model = db.PopulateDropdown();

return View(model); 
```

# javascript - 如何用 onclick 替换特殊字符？

> ID：16219199
> 
> 赞同：0
> 
> 时间：2013-04-25T15:44:33.263
> 
> 标签：javascript, html, replace, onclick, special-characters

我找到了一个用于可折叠文本的 Js 函数。

```
 function toggle(id) {
      var e = document.getElementById(id);

      if (e.style.display == '')
        e.style.display = 'none';
      else
        e.style.display = '';
    }

    </script> 
```

这是html：

► Title01 Text01, Text01, Text01, Text01, Text01, Text01, Text01, Text01, Text01,

我想要的是当我点击这个特殊字符时：`&#9658;`它会改变这个：`&#9650;`，有什么线索吗？

提前致谢 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T15:53:42.950

`&#9658;`用标签包装特殊的 html 字符`<span>`：

```
<a onClick="toggle(this, 'node1')"><span>&#9658;</span> Title01 </a> 
```

然后您可以`&#9650;`在显示隐藏元素后将其更改为隐藏`&#9658;`时：

```
function toggle(elm, id) {
  var e = document.getElementById(id),
      a = elm.getElementsByTagName('span')[0];

  if (e.style.display == 'none')
  {
    e.style.display = '';
    a.innerHTML = '&#9650;';
  }
  else
  {
    e.style.display = 'none';
    a.innerHTML = '&#9658;';
  }
} 
```

[演示](http://jsfiddle.net/arcm111/X5W6S/)

# ruby-on-rails - 类似于 hash_include 的数组参数上的 rspec 匹配器

> ID：16219202
> 
> 赞同：4
> 
> 时间：2013-04-25T15:44:35.667
> 
> 标签：ruby-on-rails, ruby, rspec

在 rspec 中，您可以测试对方法的调用是否接收到一个散列参数并包含某些键或键值对。那是：

```
my_object.should_receive(:my_method).with(hash_including(:a => 'alpha')) 
```

有什么东西可以用数组完成类似的匹配吗？看起来像什么？

```
my_object.should_receive(:my_method).with(array_including('alpha')) 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-26T01:48:56.237

这个怎么样：

```
my_obj.should_receive(:my_method) do |arg|
  arg.should be_an_instance_of(Array)
  arg.should include('alpha')
end 
```

# c# - 覆盖 C# 类数组的默认新运算符

> ID：16219221
> 
> 赞同：0
> 
> 时间：2013-04-25T15:45:30.677
> 
> 标签：c#, arrays, pinvoke, new-operator

我正在使用 pinvokes 调用本机代码。

如果我想创建一个原生对象数组，我目前执行以下操作

```
public class MyClass() {
    // allocate a single myClass;
    public MyClass() {
        _myClass = myclass_create();
        _length = 1;
    }
    public MyClass(int numArgs) {
        //pInvoke call to create an array of myclass;
        _myClass = myclass_array_create(UIntPtr);
        _length = numArgs;
     }

     //access the indexed element of myclass
     public MyClass this[int index] {
         get {
             MyClass ret = new MyClass();
             ret._myClass = myclass_array_element(this._myClass, (UIntPtr)index);
             return ret;
         }
     }

     public int Length {
         get {
             return _length;
         }
     }

     public void foo(){
         //lots of other code
     }

     [DllImport(DLL_IMPORT_TARGET)]
     private static extern IntPtr myclass_create();
     [DllImport(DLL_IMPORT_TARGET)]
     private static extern IntPtr myclass_array_create(UIntPtr numArgs);
     [DllImport(DLL_IMPORT_TARGET)]
     private static extern IntPtr myclass_array_element(IntPtr args, UIntPtr index);
     // ... more dllimports here ...

     //pointer to native object
     IntPtr _myClass;
     int _length;
} 
```

现在使用如下：

```
// Create an array of 15 MyClass objects
MyClass myClass = new MyClass(15);
for( int i = 0; i < myClass.Length; ++i) {
    //run foo on each object in the array
    myClass[i].foo()
} 
```

我有这个工作只是发现但是它有点不寻常，因为它是一个数组而不是做一个新的数组。

有没有办法可以覆盖这个类的 new 运算符，以便可以使用 new 运算符的典型用法？

我希望代码看起来像这样

```
// Create an array of 15 MyClass objects
MyClass[] myClass = new MyClass[15];
for( int i = 0; i < myClass.Length; ++i) {
    //run foo on each object in the array
    myClass[i].foo()
} 
```

有没有办法用我的代码做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T15:52:34.523

不，您不能以任何方式覆盖数组初始化的行为。您需要：

1.  如您在问题中所示，使用包装数组的不同类型。

2.  在创建数组后调用一个方法来添加额外的初始化（即为每个索引分配一堆值）。

3.  创建一个新方法，该方法在调用时将创建并初始化数组。

# javascript - 添加了一个不起作用的暂停功能。有人知道解决方案吗？

> ID：16219222
> 
> 赞同：-3
> 
> 时间：2013-04-25T15:45:31.497
> 
> 标签：javascript, canvas

我在我的游戏中添加了这个暂停功能：

```
function pauseGame() {
    if (!gamePaused) {
        game = clearTimeout(game);
        gamePaused = true;
    } else if (gamePaused) {
        game = setTimeout(drawGame, speed - (level * 50));
        gamePaused = false;
    }
}; 
```

但由于某种原因，它不会暂停游戏。谁能弄清楚为什么它不起作用？游戏就[在这里](http://users.aber.ac.uk/cew10/iwp-project/snake.js)。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T16:09:31.113

您需要设置`game`第一次调用`setTimeout()`。否则，当 you 时`clearTimeout(game)`，它会引发错误（并且不会设置`gamePaused`为`true`）。

# c++ - C++ stringstream string to function(test, char *test2)

> ID：16219223
> 
> 赞同：0
> 
> 时间：2013-04-25T15:45:31.807
> 
> 标签：c++, string, parameters, char

有一个 MySQL 查询函数，需要一个字符串参数。看起来像这样：

```
cin >> user_string;
stringstream ss;
ss << "select * from " << user_string; 
```

函数如下所示：

```
mysql_perform_query(MYSQL *connection, char *sql_query) 
```

试图转换为 ss.c_str(); 或 ss.str().c_str(); 不工作。

这样做的正确方法是什么？跳过 Stingstream 并构建 char？C ++字符串让我感到困惑......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T15:49:31.760

`ss.str().c_str()`不是必需`const char *`的`char *`。我会复制`ss.str().c_str()`到 a`char *`然后将其传递给函数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T15:49:39.430

`ss.str().c_str()`如果只有你的功能是正确的

```
mysql_perform_query(MYSQL *connection, const char *sql_query); 
```

这是因为`c_str()`返回`const char *`.

如果您能够将`mysql_perform_query`功能更改为，`const char *`那么我会这样做。否则你可以考虑做一个 const_cast, `const_cast<char*>(ss.str().c_str())`。

万一 mysql_perform_query 确实修改了传递给它的 C 字符串，那么您将不得不将您的字符串复制到一个向量并传递一个指向该向量的指针。

```
string str = ss.str();
vector<char> tmp(str.begin(), str.end());
tmp.push_back('\0');
mysql_perform_query(connection, &tmp[0]); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-25T15:49:52.913

不`mysql_perform_query`想要`const char *`.

如果那是您的代码，请将其更改为接受 a`const char *`并且您的方法将起作用。

```
mysql_perform_query( connection, user_string.str().c_str() ); 
```

如果您无法更改该函数签名，这将起作用*。

```
mysql_perform_query( connection, &user_string.str()[0] ); 
```

**保证在 C++11 中工作，虽然在 C++03 中不保证，但在所有常见实现中都工作*

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-25T15:51:59.570

SQL 接口可能需要一个`char const*`. `ss.str()` 会给你一个字符串，并`ss.str().c_str()`会`char const*`从那个字符串给你一个。

然而，要指出的是（比任何东西都更有风格）：

*   除非您实际上需要 的双向容量 `stringstream`，否则最好使用更简单的 `ostringstream`（仅输出），并且

*   如果您所做的只是串联，则根本没有使用流的意义，只需`+`在字符串上使用运算符即可。（您也可以`+`用来连接字符串和字符串文字。）流确实用于格式化和解析，并且对于简单的连接来说是多余的（不必要的增加的复杂性）。

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2013-04-25T15:50:42.577

stringstream 有一个返回 std::string 的 str 方法；std::string 有一个 c_str() 方法，它返回一个指向 char 的指针。

```
mysql_perform_query(connection, ss.str().c_str()); 
```

您在发布问题之前确实进行了适当的搜索，不是吗？

# r - Is it possible, in R parallel::mcparallel, to limit the number of cores used at any one time?

> ID：16219228
> 
> 赞同：4
> 
> 时间：2013-04-25T15:45:48.683
> 
> 标签：r, parallel-processing

In R, the `mcparallel()` function in the `parallel` package forks off a new task to a worker each time it is called. If my machine has N (physical) cores, and I fork off 2N tasks, for example, then each core starts off running two tasks, which is not desirable. I would rather like to be able to start running N tasks on N workers, and then, as each tasks finishes, submit the next task to the now-available core. Is there an easy way to do this?

My tasks take different amounts of time, so it is not an option to fork off the tasks serial in batches of N. There might be some workarounds, such as checking the number of active cores and then submitting new tasks when they become free, but does anyone know of a simple solution?

I have tried setting `cl <- makeForkCluster(nnodes=N)`, which does indeed set N cores going, but these are not then used by `mcparallel()`. Indeed, there appears to be no way to feed `cl` into `mcparallel()`. The latter has an option `mc.affinity`, but it's unclear how to use this and it doesn't seem to do what I want anyway (and according to the documentation its functionality is machine dependent).

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-05-01T11:43:41.797

你至少有两种可能性：

1.  如上所述，您可以使用 mcparallel 的参数“mc.cores”或“mc.affinity”。在 AMD 平台上，“mc.affinity”是首选，因为两个内核共享相同的时钟。例如，FX-8350 有 8 个内核，但内核 0 与内核 1 具有相同的时钟。如果您只为 2 个内核启动任务，最好将其分配给内核 0 和 1 而不是 0 和 2。“mc.affinity “做到这一点。代价是失去负载平衡。

    “mc.affinity”出现在该软件包的最新版本中。查看更新日志以了解何时引入。

2.  您也可以使用操作系统的工具来设置亲和力，例如“taskset”：

    /usr/bin/taskset -c 0-1 /usr/bin/R ...

    在这里，您使脚本仅在核心 0 和 1 上运行。

请记住，Linux 的内核编号从“0”开始。并行包符合 R 的索引，第一个核心是核心编号 1。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-15T18:38:13.930

我建议并行利用包含此功能的高级函数，而不是试图强制低级函数执行您想要的操作。

在这种情况下，请尝试将您的任务编写为单个函数的不同参数。然后，您可以使用 mclapply()，并将 mc.preschedule 参数设置为 TRUE，并将 mc.cores 参数设置为一次要使用的线程数。每次任务完成并且线程关闭时，都会创建一个新线程，对下一个可用任务进行操作。

即使每个任务使用完全不同的代码，您也可以创建一个函数列表并将其传递给包装函数。例如，以下代码一次执行两个函数。

```
f1 <- function(x) {x^2}
f2 <- function(x) {2*x}
f3 <- function(x) {3*x}
f4 <- function(x) {x*3}
params <- list(f1,f2,f3,f4)
wrapper <- function(f,inx){f(inx)}
output <- mclapply(params,FUN=calling,mc.preschedule=TRUE,mc.cores=2,inx=5) 
```

如果需要，您可以将 params 设为一个列表列表，其中包括要传递给每个函数的各种参数以及函数定义。我经常将这种方法用于不同长度的各种任务，并且效果很好。

当然，也有可能你的各种任务只是对同一个函数的不同调用，这种情况下你可以直接使用 mclapply 而无需编写包装函数。

# c# - 要列出的 Json 格式化字符串

> ID：16219229
> 
> 赞同：3
> 
> 时间：2013-04-25T15:45:50.223
> 
> 标签：c#, json, string, list

我有一个这样的字符串：

```
{"label":{"en":"Africa","de":"Afrika"},"description":{"en":"continent","de":"irdischer Kontinent"}} 
```

可以转换为列表，如：

```
"label" - "en":"Africa","de":"Afrika"
"description" - "en":"continent","de":"irdischer Kontinent" 
```

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-25T15:50:41.780

正如其他人所建议的那样，您似乎正在尝试处理 JSON 文档。我为此推荐[Json.NET 。](http://james.newtonking.com/projects/json-net.aspx)

但是，如果转换非常简单并且您不希望输入有太大变化，您*可以自行操作字符串。*一种简单的方法是执行以下操作：

```
var result = input.Replace(":{", " - ")
                  .Replace("},", Environment.NewLine)
                  .Replace("{", string.Empty)
                  .Replace("}", string.Empty); 
```

# javascript - 自定义 onclick 函数作为 Knockout SimpleGrid 中的属性

> ID：16219231
> 
> 赞同：1
> 
> 时间：2013-04-25T15:46:04.880
> 
> 标签：javascript, templates, knockout.js, template-engine

我想在数据中显示一个值作为链接，并将自定义函数传递给它的点击事件（最终将显示一个带有状态历史记录的模式）。

我有属性“isLink”（布尔值）和“onClick”（函数），如下所示：

```
 { headerText: "ColumnName"
      , rowText: function (item) { return item.Product.ProductID.toString(); }
      , isLink: true
      , onClick: function (item) { alert(item.Product.ProductID.toString()); }
    } 
```

在“ko_simpleGrid_grid”模板中，我有以下内容：

```
 ...
    <a data-bind=\"attr: { href: 'javascript:void()' }, click: $data.onClick, text: rowText($parent) \" />
    ... 
```

单击时，警报为“未定义”。如果我放：

```
 ...
    , onClick: function () { alert("test"); }
    ... 
```

然后警报显示“测试”。

所以我想我的问题是，如何从该函数访问数据？

**编辑/更新**

我能够让它工作。绑定文档的链接有所帮助。这是工作代码：

```
 ...
    , onClick: function() { alert(this.Product.ProductID.toString()); }
    ... 
```

在 simpleGrid 插件中：

```
 ...
    <a data-bind=\"click: $data.onClick.bind($parent), text: rowText($parent) \" />
    ... 
```

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T16:51:41.763

您必须使用 a[`bind`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Function/bind)有效地将您想要的任何参数附加到函数调用。

在您的示例中，它应该按以下方式工作：

```
<a data-bind=\"click: $data.onClick.bind($data, param1), text: rowText($parent) \" /> 
```

绑定函数的第一个参数是“ `onClick`”函数中的上下文。我选择了“data”，这意味着在“onClick”中，$data 的所有属性都可用。

您可以根据需要添加任意数量的参数。

最后一点：我建议删除该`href`属性，它不是必需的，也不会在这里完成任何事情。

# performance - 在MATLAB中获取给定索引矩阵的元素的最快方法

> ID：16219233
> 
> 赞同：3
> 
> 时间：2013-04-25T15:46:12.010
> 
> 标签：performance, matlab, vectorization

我有一个 N x 2 矩阵 A，其中包含我想从 2D 矩阵 B 中获取的元素索引，A 的每一行都是我想要获取的 B 元素的行和列索引。我想将所有这些元素堆叠为 N x 1 向量。

B是方阵，所以我目前正在使用

```
N = size(B,1);
indices = arrayfun(@(i) A(i,1) + N*(A(i,2)-1), 1:size(A,1));
result = B(indices); 
```

但是，虽然它有效，但它正在成为一个**巨大**的瓶颈，我需要加快代码速度以使其有用。

我可以达到相同结果的最快方法是什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-25T15:47:26.033

怎么样

```
indices = [1 N] * (A'-1) + 1; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T15:57:22.453

我永远不记得是否`B(A(:,1), A(:,2))`按您想要的方式工作，但我会尝试避免中间变量。如果这不起作用，请尝试`subs2ind`.

此外，您可以首先查看您`A`的生成方式。例如，如果`A`来自 find 的输出，则使用逻辑索引会更快。即如果

```
B( B == 2 ) 
```

比找到满足该条件的行、列索引然后索引到`B`.

# android - 如何使用ant与android构建

> ID：16219238
> 
> 赞同：8
> 
> 时间：2013-04-25T15:46:24.787
> 
> 标签：android, ant

我想为我的项目设置一个 ant 构建。我发现一个教程说我需要编写以下命令才能为 ant build 做准备：

```
android update project -p 
```

然后我得到结果

```
Updated local.properties
Updated file ./proguard-project.txt
It seems that there are sub-projects. If you want to update them
please use the --subprojects parameter. 
```

所以如果我尝试

```
android update project -p . --subprojects 
```

然后我得到：

```
Updated local.properties
Updated file ./proguard-project.txt
Error: The project either has no target set or the target is invalid.
Please provide a --target to the 'android update' command. 
```

如果我尝试

```
ant release 
```

我明白了

```
sdk.dir is missing. Make sure to generate local.properties using 'android update project' or to inject it through an env var 
```

有人可以帮我用蚂蚁建立项目吗？谢谢

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2014-07-22T08:02:39.083

我也有同样的问题。
我的问题问题已通过以下命令解决。

```
android update project --path . --subprojects --target android-19 
```

ANT 会自动将您的**sdk.dir**设置为正确的。
不要在**local.properties 中放置任何内容。**

```
# This file is automatically generated by Android Tools.
# Do not modify this file -- YOUR CHANGES WILL BE ERASED!
#
# This file must *NOT* be checked into Version Control Systems,
# as it contains information specific to your local configuration.

# location of the SDK. This is only used by Ant
# For customization when using a Version Control System, please read the
# header note. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T16:43:13.307

确保在您的项目中设置了目标（主项目和库也是如此）。

在 Eclipse 上：右键单击项目 -> 属性 -> Android 并选择您的目标 SDK。这意味着您要定位的 Android SDK 版本。如果您查看 manifest.xml，您应该会在开头看到它：

```
<uses-sdk
    android:minSdkVersion="9"
    android:targetSdkVersion="17" /> 
```

这是您项目的目标版本，通常建议尽可能高（最新）。

之后，请确保该文件`project.properties`具有与此类似的一行：

```
target=Google Inc.:Google APIs:17 
```

ANT 将读取该文件以了解您项目的目标。您可以手动添加该行。实际上，如果您在运行之前为 Eclipse 中的项目设置目标（如上所述），我很确定它会自动包含在内`android update project -p . --subprojects`

关于这个错误：

```
sdk.dir is missing. Make sure to generate local.properties using 'android update project' or to inject it through an env var 
```

这意味着您没有定义 sdk.dir 属性，该属性应指向文件系统中的 android sdk 根目录。运行后，`android update project -p . --subprojects`它应该为您的所有项目自动生成。这可能不是由于先前的错误造成的。因此，请检查您的所有项目中是否有名为的文件`local.properties`，并确保其中包含类似于以下的行：

```
sdk.dir=/home/path/to/android/sdk/android-sdk-linux 
```

# algorithm - Simple Encryption Algorithm

> ID：16219239
> 
> 赞同：7
> 
> 时间：2013-04-25T15:46:28.440
> 
> 标签：algorithm, encryption

I'm working on an elevator project just for fun, it's actually hardware. But I think this is more of a software question. I don't need to have this feature, in fact it is completely redundant, but I was curious so I'm adding it anyway so I can learn :P

I have an 8 bit address, 8 bit data bus, and an 8 bit encryption code. I have a master and many slave devices. The master knows the address of the slaves and knows the encryption code. The slaves know their address and the encryption code as well.

I want a really simple algorithm such that:

The master sends "y" where, y = function(data,encryption code) The slave receives "y" and can extract data by data = function2(y,encryption code)

I tried playing around with AND, XOR, OR, etc... and combinations of them, but couldn't figure it out.

Again I'm looking for simple algorithms. If you don't mind you could do me a bigger favour and explain some theory on how I can come to such a solution/functions.

Thanks so much!

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-04-25T15:54:26.830

您可以使用[XOR 密码](http://en.wikipedia.org/wiki/XOR_cipher)，它非常简单：

```
E(x,key)=> y= x XOR key
D(y,key)=> x= y XOR key 
```

很简单！

您可以升级加密并使其成为**密码块链接**，这意味着例如您有一个数据 D，您需要将其划分为块，比如说大小为 B 的块。对于您执行的第一个块：

```
E(b0,key)=> y0= b0 XOR key 
```

结果将成为下一个块加密的关键：

```
E(b1,y0)=> y1= b0 XOR y0 .... E(bn,yn-1)=> yn= bn XOR yn-1 
```

![在此处输入图像描述](https://i.stack.imgur.com/lftgs.png)

原始数据`D={b0,b1.....bn}`和加密数据现在`E={y0,y1....yn}` 要解密加密数据，您需要以相反的方式进行操作！就这样！

# python - 如何删除嵌套列表的第 n 个索引？

> ID：16219245
> 
> 赞同：0
> 
> 时间：2013-04-25T15:46:47.850
> 
> 标签：python

一直在挠头。

我有一个嵌套列表，格式如下：

```
( (value1, value2, value3), (value1, value2, value3), ... (value1, value2, value3)) 
```

现在我试图把它归结为：

```
( (value1, value2), (value1, value2), ... (value1, value2)) 
```

简而言之，尝试删除每个嵌套列表的第三个元素。

这在 Python 中是否可以直接实现？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-25T15:48:36.997

您可以通过列表理解简单地做到这一点：

```
>>> x = [(1, 2, 3), (1, 2, 3), (1, 2, 3)]
>>> x = [(a, b) for (a, b, c) in x]
[(1, 2), (1, 2), (1, 2)] 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-04-25T15:48:45.047

使用列表推导：

```
outerlist = [sublist[:-1] for sublist in outerlist] 
```

这使用切片来删除每个包含的子列表的最后一个元素。

上面创建了一个`list()`，而不是一个`tuple()`；以下将再次创建一个元组：

```
outertuple = tuple(sublist[:-1] for sublist in outertuple) 
```

与解包和重新打包元组相比，对子列表进行切片所需的操作码更少，从而更快地为您提供结果。

使用元组的演示：

```
>>> outertuple = ((1, 2, 3), (4, 5, 6), (7, 8, 9))
>>> tuple(sublist[:-1] for sublist in outertuple)
((1, 2), (4, 5), (7, 8)) 
```

使用列表演示：

```
>>> outerlist = [[1, 2, 3], [4, 5, 6], [7, 8, 9]]
>>> [sublist[:-1] for sublist in outerlist]
[[1, 2], [4, 5], [7, 8]] 
```

最后但并非最不重要的一点是，列表推导的内部循环的字节码反汇编表明切片使用的操作码少于解包和重新打包：

```
>>> import dis
>>> def foo(x): return [sublist[:-1] for sublist in x]
... 
>>> def bar(x): return [(a, b) for (a, b, c) in x]
... 
>>> dis.dis(foo)
  1           0 BUILD_LIST               0
              3 LOAD_FAST                0 (x)
              6 GET_ITER            
        >>    7 FOR_ITER                16 (to 26)
             10 STORE_FAST               1 (sublist)
             13 LOAD_FAST                1 (sublist)
             16 LOAD_CONST               1 (-1)
             19 SLICE+2             
             20 LIST_APPEND              2
             23 JUMP_ABSOLUTE            7
        >>   26 RETURN_VALUE        
>>> dis.dis(bar)
  1           0 BUILD_LIST               0
              3 LOAD_FAST                0 (x)
              6 GET_ITER            
        >>    7 FOR_ITER                27 (to 37)
             10 UNPACK_SEQUENCE          3
             13 STORE_FAST               1 (a)
             16 STORE_FAST               2 (b)
             19 STORE_FAST               3 (c)
             22 LOAD_FAST                1 (a)
             25 LOAD_FAST                2 (b)
             28 BUILD_TUPLE              2
             31 LIST_APPEND              2
             34 JUMP_ABSOLUTE            7
        >>   37 RETURN_VALUE 
```

11 对 14 操作码。那是一个额外的`UNPACK_SEQUENCE`和两个额外`STORE_FAST`的操作码，以及一个`BUILD_TUPLE`操作码与`SLICE+2`.

这些差异使得拆包和打包要慢一些：

```
>>> import timeit
>>> test = [(42, 69, 180) for _ in xrange(1000)]
>>> timeit.timeit('f(x)', 'from __main__ import test as x, foo as f', number=10000)
1.1722910404205322
>>> timeit.timeit('f(x)', 'from __main__ import test as x, bar as f', number=10000)
1.6375460624694824 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-25T15:50:32.133

```
>>> a = ((1,2,3), (4,5,6), (7,8,9))
>>> a = tuple([(x1, x2) for (x1, x2, x3) in a])
>>> a
((1, 2), (4, 5), (7, 8)) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-25T15:49:31.203

```
nested_list= [[1,2,3],[4,5,6]]

for regular_list in nested_list:
    del regular_list[2] 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-25T15:54:03.860

试试这个：

```
[a[ :-1] for a in b] 
```

或这个：

```
[a[:n]+a[n+1:] for a in b] 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-25T15:53:03.823

使用地图：

```
l = [[0,1,2], [1,2,3]]
print map(lambda l : l[:-1], l)
# Outputs [[0, 1], [1, 2]] 
```

鉴于所有子列表的长度为 3。

如果你想要这个元组：

```
l = ((0,1,2), (1,2,3))
print tuple(map(lambda l : l[:-1], l))
# Outputs ((0, 1), (1, 2)) 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-04-26T08:38:18.290

```
x = [(1, 2, 3), (1, 2, 3), (1, 2, 3)]
>>> [i[:2] for i in x ] 
```

[(1, 2), (1, 2), (1, 2)]

# jquery - 单击取消按钮时如何抑制 Jquery Validation submitHandler？

> ID：16219247
> 
> 赞同：0
> 
> 时间：2013-04-25T15:46:50.770
> 
> 标签：jquery, struts2, jquery-validate, submit

在这里，我遇到了 Jquery Validation 插件和 Struts2 的问题。

我的表单中有 3 个如下所示的按钮。

```
<td><s:submit type="button" value="Save" theme="simple" cssClass="valid" /></td>
<td><s:submit type="button" value="Cancel" theme="simple" action="cancel" cssClass="cancel"/></td>
<td><s:submit type="button" value="Submit" theme="simple" cssClass="valid"/></td> 
```

提交表单后，将使用 jquery 验证完成验证。表单提交成功后，我想要用户确认提交表单吗？

所以我使用了 Jquery Validate 函数的 submitHandler 。但是当我点击取消时，这个 submitHandler 也被执行了。我不希望单击取消按钮时发生任何事情。这是 JavaScript 部分。

```
$(document).ready(function() {

    $("#MyForm").validate({
    //Some validation rules
        submitHandler: function(form) {
        //this runs when the form validated successfully
        //My code after submitting the form 
            alert("Hello");
        } //End of Submit Handler
    });

}); 
```

我知道这将是一个简单的答案。尽管请帮我找到它的人

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T16:38:30.423

根本问题是您`form`包含三个`submit`按钮。即使每个都有不同`value`的 ，插件也会在每个上触发相同的。

1) 将取消按钮更改为`type="reset"`. 该插件将忽略这种类型的输入（但是，HTML 将清除表单数据）。

[http://jsfiddle.net/hnyd2/](http://jsfiddle.net/hnyd2/)

或者

2 )将取消按钮*移到*. `form`布局会有所不同，但您可以使用 CSS 更精确地放置按钮。

[http://jsfiddle.net/hnyd2/1/](http://jsfiddle.net/hnyd2/1/)

或者

3) 将其保留在 中，但使用 jQuery`form`阻止按钮的默认行为。您必须在按钮上放置一个，以便正确定位它。`submit``preventDefault()``id`

```
$('#cancel').click(function(e) {
    e.preventDefault();
    // anything else to do on click
}); 
```

[http://jsfiddle.net/hnyd2/3/](http://jsfiddle.net/hnyd2/3/)

# android - 正在进行的通知打开现有活动

> ID：16219250
> 
> 赞同：1
> 
> 时间：2013-04-25T15:47:07.367
> 
> 标签：android, android-activity, notifications

我想在计时器运行时显示通知，当用户单击通知时，它会打开计时器活动。

```
 mNotificationManager = (NotificationManager) getSystemService(Context.NOTIFICATION_SERVICE);

        Intent intent = new Intent(this, Activity.class).addFlags(Intent.FLAG_ACTIVITY_REORDER_TO_FRONT);

        PendingIntent pendingIntent = PendingIntent.getActivity(this, 0, intent, PendingIntent.FLAG_UPDATE_CURRENT); 
```

现在的问题是，当我启动计时器并按主页然后单击通知时，它会打开带有正在运行的计时器的活动。

但是当我启动计时器，然后打开另一个活动（通过`ActionBar.NAVIGATION_MODE_LIST`），然后按主页并单击通知它会打开一个新活动（空）。

我认为`addFlags(Intent.FLAG_ACTIVITY_REORDER_TO_FRONT);`会有所帮助（这就是我用来在活动之间导航的内容）

我正在使用`android:launchMode="singleTop"`和`android:configChanges="orientation|screenSize"`

对于每个活动。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T19:06:21.447

我不会依赖你的活动持续存在，这是不必要的

将计时器开始时间存储到 sharedpreferences 中，然后在重新创建活动时简单地加载开始时间。

如果某件事是要在某个时间后发生的，比如倒计时时间，那么你需要设置一个警报并以这种方式处理它。

请记住，活动只是 UI。当用户不看它时，不要相信活动正在做任何事情。

# crystal-reports - 0 条记录时未使用子报表参数

> ID：16219258
> 
> 赞同：1
> 
> 时间：2013-04-25T15:47:34.930
> 
> 标签：crystal-reports, subreports

我在水晶报表中有一个子报表，但返回了 0 条记录，但子报表坚持要提取曾经输入的每个订单备注，但仍显示 0 条备注。

这很奇怪，它说“读取记录 0 of 150000”并不断增加。

子报表唯一的选择标准是公司代码、客户代码和订单号。他们都通过了“{?PM-...”的事情。

我打开了一个空白子报表的预览，SQL 甚至没有提到选择标准。自己运行的查询确实会显示每一条评论。

关于如何发生这种情况的任何想法？

子报表公式：

```
({E_ORD_H.COMP_CODE} = {?Pm-E_ORD_H.COMP_CODE})
and
({E_ORD_H.CUST_CODE} = {?Pm-E_ORD_H.CUST_CODE})
and
({E_ORD_H.ORD_NUM} = {?Pm-E_ORD_H.ORD_NUM}) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T16:55:04.357

当水晶报表出现这样的行为时，意味着有一些逻辑无法在数据库服务器上完成，因此必须在本地完成。这通常是由于在记录选择公式中使用了未翻译成数据库语言的 CR 函数造成的。

在这种情况下，我认为是参数为 null 导致它（例如，该语句`{E_ORD_H.COMP_CODE}=<null>` *并不意味着*CR 将能够预测这种情况并`{E_ORD_H.COMP_CODE} is null`在子报表的查询中替换它。相反，您需要显式检查那些空值参数：

```
not(isnull({?Pm-E_ORD_H.COMP_CODE})) 
and {E_ORD_H.COMP_CODE} = {?Pm-E_ORD_H.COMP_CODE}
and not(isnull({?Pm-E_ORD_H.CUST_CODE})) 
and {E_ORD_H.CUST_CODE} = {?Pm-E_ORD_H.CUST_CODE}
and not(isnull({?Pm-E_ORD_H.ORD_NUM}))
and {E_ORD_H.ORD_NUM} = {?Pm-E_ORD_H.ORD_NUM} 
```

# python - 将 GSL ODE 求解器转换为 Python

> ID：16219259
> 
> 赞同：0
> 
> 时间：2013-04-25T15:47:37.137
> 
> 标签：python, cython, gsl, pygsl

我求解了一组对 ODE，我使用与此[示例](http://www.gnu.org/software/gsl/manual/html_node/ODE-Example-programs.html)类似的 GSL ODE 求解器求解。目前这是通过在python中编写文件来自动化的，例如

```
text = """
#include <stdio.h>
#include <gsl/gsl_errno.h>

...

""" 
```

然后用相关单词替换字符串`text`并写入文件`script.c`。然后我用`os.system`它来运行它，例如

```
os.system("gcc -Wall -I/usr/local/include -c script.c")
os.system("gcc -static script.o -lgsl -lgslcblas -lm")
os.system("./a.out >  %s" % (file_name) ) 
```

所有这些都非常不雅，所以我一直在阅读有关替代品的文章，并且到目前为止偶然发现了 PyGSL、CythonGSL。这些似乎缺乏适当的文档，我还不够聪明，无法弄清楚它们是如何工作的！

任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-05-03T19:50:50.767

PyGSL 可能是一个合理的选择。（CythonGSL 也是，但我没试过。）

我正在运行 Ubuntu 12.04（64 位），对于这个安装，我使用的是 Anaconda python 发行版。（它可能适用于 Ubuntu 中的默认 Python，但我没有尝试。）

我从源代码安装了 GSL 1.15，并且我只是按照自述文件中的说明从源代码安装了 PyGSL 0.9.5。也就是说，我跑了

```
$ python setup.py build
$ python setup.py install 
```

在提取的 tar 文件的顶层目录中。像许多构建 C 库的 python 包一样，在构建步骤期间会打印*很多*警告，但它完成时没有错误。

下面是一些演示在 PyGSL 中使用 ODE 求解器的代码：

```
#
# pendulum_demo.py
#
# Use PyGSL to solve the differential equations for a pendulum with
# friction.  Plot the solution using matplotlib.
#

import numpy as np
import matplotlib.pyplot as plt
from pygsl import odeiv

def pendsys(t, y, args):
    """
    The right-hand side of the first order system of differential equations.
    """
    theta, v = y
    g, b, L, m = args

    f = np.zeros((2,))
    f[0] = v
    f[1] = -b * v / (m * L ** 2) - np.sin(theta) * g / L

    return f

def pendjac(t, y, args):
    """
    The Jacobian of the system.
    """
    theta, v = y
    g, b, L, m = args

    jac = np.zeros((2, 2))
    jac[0, 1] = 1.0
    jac[1, 0] = -g / L * np.cos(theta)
    jac[1, 1] = -b / (m * L ** 2)

    dfdt = np.zeros((2,))

    return jac, dfdt

# Pendulum parameter values
#
# Gravitational constant
g = 9.81
# Friction coefficient
b = 0.5
# Pendulum length
L = 1.0
# Pendulum bob mass
m = 2.0

# Initial conditions
theta0 = np.pi - 0.01
v0 = 0.0
y = [theta0, v0]
t = 0

# Solver control parameters.
abserr = 1e-11
relerr = 1e-9

stoptime = 12.0

# Create the GSL ODE solver
N = 2
step    = odeiv.step_rk8pd(N, pendsys, pendjac, args=(g, b, L, m))
control = odeiv.control_y_new(step, abserr, relerr)
evolve  = odeiv.evolve(step, control, N)

# h is the initial step size.
h = stoptime / 500.0

# The time values and points in the solution are saved in the lists
# tsol and ysol, respectively.  The lists are initialized with
# the initial conditions.
tsol = [t]
ysol = [y]

# Call evolve.apply(...) until the solution reaches stoptime
while t < stoptime:
    t, h, y = evolve.apply(t, stoptime, h, y)
    tsol.append(t)
    ysol.append(y)

tsol = np.array(tsol)
ysol = np.array(ysol)

plt.plot(tsol, ysol[:, 0], label=r'$\theta$')
plt.plot(tsol, ysol[:, 1], label='v')
plt.xlabel('t')
plt.grid(True)
plt.legend()
plt.title('Pendulum with Friction')
plt.show() 
```

结果图：

![pygsl 生成的解图](https://i.stack.imgur.com/uL8Ne.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-27T16:16:06.177

If you can write a C library which takes parameters instead of using string substitution of C code from your Python code, then you can compile the C library seperately and call functions in it from your Python code using [CFFI](https://cffi.readthedocs.org/).

How complicated/dynamic are these substitutions?

# aop - Google guice inject a instance created by Spring and method intercept

> ID：16219265
> 
> 赞同：0
> 
> 时间：2013-04-25T15:47:57.350
> 
> 标签：aop, guice, code-injection

I use Gucie 3.0 to intercept any methods that have my defined annotation @LogRequired. However for my application, some beans are initialized by Spring with injected fields values. After calling giuce injector.injectMembers(this), the beans gets proxied by guice but all original fields values are gone. Looks like Guice re-constucts the beans and throw away all old values. Is this expected behavior or how can I solve this issue?

Create a class extends AbstractModule

```
public class InterceptorModule extends AbstractModule{ public void configure() 
```

{ LogInterceptor tracing = new LogInterceptor(); requestInjection(tracing); bindInterceptor(Matchers.any(), Matchers.annotatedWith(LogRequired.class), tracing); } }

Define the interceptor business logic

```
public class LogInterceptor implements MethodInterceptor { //business logic here } 
```

Create LogService class

```
Public class LogService { Injector injector = Guice.createInjector(new InterceptorModule()); } 
```

I have one of the bean example below with the getName method wants to be intercepted:

```
public class UserImplTwo implements IUser {

private String name;

    @LogRequired
public String getName() {
    return this.name;
}

public void setName(String name) {
    this.name = name;
}
} 
```

which is initialized by Spring context:

Finally I have a consumer to consume the bean:

```
public class Consumer
{
        @Inject
        private UserImplTwo instance;

        public void setInstance(UserImplTwo instance)
        {
            this.instance = instance;
        }

      public void init()
        {
           // the value of name is printed out as 'hello world'
             System.out.println(  this.instance.getName());

             LogService.injector.injectMembers(this);

            // the value of name is printed out as null, should be 'hello world'
             System.out.println(  this.instance.getName());

        }
} 
```

Then use Spring to initialized the bean:

```
 <bean id="consumer" class="com.demo.Consumer" init-method="init">
    <property name="instance" ref="userTwo"></property>
</bean> 
```

Please let me know if this the the right approach or if I did something wrong, because I have to use Spring to initialize some beans.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-26T21:07:22.417

如果您使用 Spring Framework，则“正确的方法”可能是保持简单并使用 Spring 的 DI，而不是尝试与 Guice 混合搭配 :-)

话虽如此，似乎没有技术上的原因为什么它们不能在某种程度上混合和匹配在一起。

我认为你会用另一种方法取得更大的成功。我之前使用过的一种是使用 Spring MVC 基于 Java 的配置。这是基本方法。

创建一个扩展 WebMvcConfigurationSupport 的类：

```
@Configuration
@Import(BeansConfig.class)
public class Config extends WebMvcConfigurationSupport {
} 
```

分离出你的 bean 配置（可能它可以与上面的内容合并，但我想这是相当枯燥的代码，你通常不想看到它）。在将它们提供给 Spring 之前，使用它使用 Guice 注入器创建 bean。

```
@Configuration
public class BeansConfig {
    @Bean
    public Consumer getConsumer() {
        return SomeGuiceInjectorFactory.newInstance(Consumer.class);
    }
} 
```

将其包含在您的 spring.xml 中（或者如果您的 servlet 容器比我的更新，则以其他方式引导）

```
<context:annotation-config/>
<bean id="extendedWebMvcConfig" class="Config"/> 
```

构造函数注入和大多数/全部？其他 Guice 的优点也应该适用于这种情况。

此外，您不需要在 xml 中配置您的 bean。

# ios - Joystick can't hardly communicate UILabel (strong, retain, weak, etc...)

> ID：16219272
> 
> 赞同：0
> 
> 时间：2013-04-25T15:48:27.743
> 
> 标签：ios, xcode, delegates, protocols

I'm using CPJoystick which can be found here. [https://github.com/Wense/CPJoystick](https://github.com/Wense/CPJoystick)

I'm using Xcode 4.6 and the breakpoint stops over there.

```
@property (nonatomic, weak,   readwrite) id<CPJoystickDelegate> delegate; 
```

So I made little changes. I have download hundreds of delegate and even try this one: [Custom delegate not working](https://stackoverflow.com/questions/7205064/custom-delegate-not-working)

I've tried many:

```
@property (nonatomic, strong, readwrite) id<CPJoystickDelegate> delegate;
@property (nonatomic, strong) id<CPJoystickDelegate> delegate;
@property (nonatomic, retain) id<CPJoystickDelegate> delegate;
@property(nonatomic,assign)id delegate; 
```

I don't understand what I doing. I'm stuck and confused about five weeks.

**CPJoystick.h**

```
@protocol CPJoystickDelegate <NSObject>
@required
- (void) ShowthisNumbers:(NSString*)text;
@optional
// - (void) ShowthisNumbers:(NSString*)text;
-(void)cpJoystick:(CPJoystick *)aJoystick didUpdate:(CGPoint)movement;
@end 
```

**CPJoystick.m**

```
-(void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event
{
     ...
     [delegate ControlPosition:@"Touched"];

} 
```

I can't even make this thing communicate UILabel on UIViewController < CPJoystickDelegate > The joystick seems to work fine but the UILabel isn't working.

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view from its nib.
    CPJoystick *joystick = [[CPJoystick alloc] initWithFrame:CGRectMake(0, 0, 100, 100)];
    [joystick setThumbImage:[UIImage imageNamed:@"handleImage.png"] andBGImage:[UIImage imageNamed:@"bgImage.png"]];

    [joystick setMovementUpdateInterval:1.0/30];
    [self.iSneaky addSubview:joystick];
    [joystick setMoveViscosity:4 andSmallestValue:0.09]; //defaults are 7 and 0.09

}
-(void)ControlPosition:(NSString*)text;
{

    amountLabel.text = text;
}

-(void)cpJoystick:(CPJoystick *)aJoystick didUpdate:(CGPoint)movement                                
{
NSLog(@"x = %f",movement.x);
NSLog(@"y = %f",movement.y);                                                                                                    
    character.center = CGPointMake(character.center.x + movement.x, character.center.y +     movement.y);
} 
```

Can anyone help me.... I need to some fresh air.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T15:53:20.220

您似乎没有在您的方法中*设置委托。*`viewDidLoad`

```
CPJoystick *joystick = [[CPJoystick alloc] initWithFrame:CGRectMake(0, 0, 100, 100)];
[joystick setThumbImage:[UIImage imageNamed:@"handleImage.png"] andBGImage:[UIImage imageNamed:@"bgImage.png"]];

[joystick setMovementUpdateInterval:1.0/30];
[self.iSneaky addSubview:joystick];
[joystick setMoveViscosity:4 andSmallestValue:0.09]; //defaults are 7 and 0.09
joystick.delegate = self; 
```

# java - 首选项菜单中的操作栏 sherlock

> ID：16219277
> 
> 赞同：0
> 
> 时间：2013-04-25T15:48:45.047
> 
> 标签：java, android, android-layout, actionbarsherlock

我有一个首选项菜单，我希望它与应用程序一致，因此顶部必须有一个操作栏，就像其他活动一样。

我试过这样

```
public class Preferencemenu extends PreferenceActivity implements
    OnSharedPreferenceChangeListener {
 .......

 class menuinflater extends BaseActivity {
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
         actionbar = getSupportActionBar();
          inflater = getSupportMenuInflater();

    }
}

public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    dbHelper = new DataBaseHelper(getApplicationContext());

    Context ctx = getApplicationContext();
    TrainApplication ta = (TrainApplication) getApplication();

    actionbar.setDisplayHomeAsUpEnabled(true);
    actionbar.setHomeButtonEnabled(true);
    menuinflater menu = new menuinflater();
 ..... 
```

但这当然行不通。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T15:50:06.640

您需要从`SherlockPreferenceActivity`.

# hadoop - 使用 amazon s3 作为输入、输出并将中间结果存储在 EMR map reduce 作业中

> ID：16219278
> 
> 赞同：0
> 
> 时间：2013-04-25T15:48:47.893
> 
> 标签：hadoop, amazon-web-services, amazon-s3, mapreduce, amazon-emr

我正在尝试将 Amazon s3 存储与 EMR 一起使用。但是，当我当前运行我的代码时，我会遇到多个错误，例如

```
java.lang.IllegalArgumentException: This file system object (hdfs://10.254.37.109:9000)    does not support access to the request path 's3n://energydata/input/centers_200_10k_norm.csv' You possibly called FileSystem.get(conf) when you should have called FileSystem.get(uri, conf) to obtain a file system supporting your path.
at org.apache.hadoop.fs.FileSystem.checkPath(FileSystem.java:384)
at org.apache.hadoop.hdfs.DistributedFileSystem.getPathName(DistributedFileSystem.java:129)
at org.apache.hadoop.hdfs.DistributedFileSystem.open(DistributedFileSystem.java:154)
at org.apache.hadoop.fs.FileSystem.open(FileSystem.java:429)
at edu.stanford.cs246.hw2.KMeans$CentroidMapper.setup(KMeans.java:112)
at org.apache.hadoop.mapreduce.Mapper.run(Mapper.java:142)
at org.apache.hadoop.mapred.MapTask.runNewMapper(MapTask.java:771)
at org.apache.hadoop.mapred.MapTask.run(MapTask.java:375)
at org.apache.hadoop.mapred.Child$4.run(Child.java:255)
at java.security.AccessController.doPrivileged(Native Method)
at javax.security.auth.Subject.doAs(Subject.java:396)
at org.apache.hadoop.security.UserGroupInformation.doAs(UserGroupInformation.java:1132)
at org.apache.hadoop.mapred.Child.main(Child.java:249) 
```

在 main 中，我像这样设置输入和输出路径，并将 s3n://energydata/input/centers_200_10k_norm.csv 放在配置 CFILE 中，并在映射器和减速器中检索：

```
FileSystem fs = FileSystem.get(conf);
conf.set(CFILE, inPath); //inPath in this case is s3n://energydata/input/centers_200_10k_norm.csv
FileInputFormat.addInputPath(job, new Path(inputDir));
FileOutputFormat.setOutputPath(job, new Path(outputDir)); 
```

在我尝试访问 CFILE (s3n://energydata/input/centers_200_10k_norm.csv) 的映射器和减速器中发生上述错误的具体示例。这就是我尝试获取路径的方式：

```
FileSystem fs = FileSystem.get(context.getConfiguration());
Path cFile = new Path(context.getConfiguration().get(CFILE));
DataInputStream d = new DataInputStream(fs.open(cFile));  ---->Error 
```

s3n://energydata/input/centers_200_10k_norm.csv 是程序的输入参数之一，当我启动 EMR 作业时，我将输入和输出目录指定为 s3n://energydata/input 和 s3n://energydata/输出

我尝试[按照 hdfs 文件路径中的](https://stackoverflow.com/questions/13577767/file-path-in-hdfs)建议进行操作，但仍然出现错误。任何帮助，将不胜感激。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-29T11:55:41.583

改为尝试：

```
Path cFile = new Path(context.getConfiguration().get(CFILE));
FileSystem fs = cFile.getFileSystem(context.getConfiguration());
DataInputStream d = new DataInputStream(fs.open(cFile)); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-29T16:40:10.667

谢谢。我实际上使用以下代码修复了它：

```
String uriStr =  "s3n://energydata/centroid/";
URI uri = URI.create(uriStr);
FileSystem fs = FileSystem.get(uri, context.getConfiguration());    
Path cFile = new Path(context.getConfiguration().get(CFILE));  
DataInputStream d = new DataInputStream(fs.open(cFile)); 
```

# python - 散点图矩阵的标签

> ID：16219281
> 
> 赞同：1
> 
> 时间：2013-04-25T15:48:53.513
> 
> 标签：python, matplotlib, scatter-plot, axis-labels

我一直在尝试使用Joe Kington 给出的很好的[例子来绘制一个散点图矩阵：](https://stackoverflow.com/questions/7941207/is-there-a-function-to-make-scatterplot-matrices-in-matplotlib)

但是，我想在显示刻度的子图上添加 xlabels 和 ylabels。当您更改刻度的位置时，关联的 x/ylabel 不会跟随。我找不到更改标签位置的选项；我希望找到类似的东西，`ax.set_xlabel('XLabel',position='top')`但它不存在。

这是我最终得到的，

![在此处输入图像描述](https://i.stack.imgur.com/DK9Ij.png) 例如，我希望 X 轴 4 高于刻度。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T17:30:11.740

如果要从下到上更改 x-label，或从左到右更改 y-label，您可以（假设调用了特定的 suplot `ax`）通过调用：

```
ax.xaxis.set_label_position('top')
ax.yaxis.set_label_position('right') 
```

例如，如果您希望标签“X 标签 2”保持原位但不与其他子图重叠，您可以尝试添加一个

```
fig.tight_layout() 
```

就在`fig.show()`.

# c# - Oracle out 参数强制转换 - c#

> ID：16219282
> 
> 赞同：0
> 
> 时间：2013-04-25T15:48:56.377
> 
> 标签：c#, oracle, casting, odp.net

我支持的旧应用程序有问题。数据访问是 CSLA .Net 并且有一行使用 out 参数中的值更新新创建的实体 id。这在数据库中定义为 NUMERIC(10,0)。代码如下所示：

```
OracleParameter opID = new OracleParameter("P_ID", OracleDbType.Int64);
//... do some stuff and save the new entity to the db
_id = (long)opID.Value; 
```

这在带有 ODP .Net 版本 9.x 的 Windows XP 上曾经很好。在最新版本的 Windows 7 机器上，强制转换失败并且参数的返回数据类型是 Decimal，尽管被明确声明为 Int64。在我看来，这就像新版本 ODP .Net 中的错误/奇怪行为。是否有解决方法或我可以做些什么来解决这个问题，最好不要更改我的代码？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-30T14:53:23.320

这个问题在 Oracle 论坛上有更详细的说明：[https](https://forums.oracle.com/forums/thread.jspa?threadID=406872) ://forums.oracle.com/forums/thread.jspa?threadID=406872 ；

似乎有一个细微的变化会影响 Oracle 数据类型的处理方式。快速修复是执行双重转换 (long)((OracleDecimal)opId.Value)。

# seo - 有什么方法可以更改由谷歌索引结果创建的片段？

> ID：16219287
> 
> 赞同：1
> 
> 时间：2013-04-25T15:49:18.137
> 
> 标签：seo, google-index

有什么方法可以让我更改由谷歌索引创建的片段，以便它驱动更多流量，使其更相关，我可以向用户展示

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-25T15:54:52.337

Google 将从以下位置（不一定按此顺序）中[选择您的搜索结果片段：](http://www.google.com/support/webmasters/bin/answer.py?answer=35624#3)

1.  页面的元描述标签
2.  该页面的开放目录项目 (ODP) 列表
3.  与搜索查询相关的页面内容

如果您*不*希望 Google 使用 ODP 列表的描述，那么您可以使用以下 Meta 标签告诉他们不要这样做：

```
<meta name="robots" content="NOODP"> 
```

如果您想鼓励 Google 使用您的元描述标签，请确保它对每个页面都是唯一的。还要确保它包含对页面内容的准确描述。

在没有 ODP 描述和元描述标记的情况下，Google 将使用页面文本的一部分作为描述。此文本将包含与搜索查询最接近的匹配项。我没有看到任何官方限制这可以多长时间，但有几句话似乎是正确的。

在相关说明中，如果您不希望在特定页面中显示片段，则可以使用以下 Meta 标记来防止显示片段：

```
<meta name="robots" content="nosnippet"> 
```

有关使用元描述标签的 Google 提示，请参阅[此博客文章](http://googlewebmastercentral.blogspot.com/2007/09/improve-snippets-with-meta-description.html)。

根据[这个网站](http://www.canonicalseo.com/optimizing-meta-description-tags/)，“元描述的长度通常最多应为*145 到 150 个字符*，因为这些字符通常*分别在 Yahoo! 和 Google*上显示的最大字符数。”

# android - 没有源的ImageView不尊重布局，添加源不修复布局

> ID：16219288
> 
> 赞同：0
> 
> 时间：2013-04-25T15:49:18.183
> 
> 标签：android, imageview

我的基础布局是LinearLayouts的ListView，网格中的每一项都是下面的FrameLayout。我正在将图像下载到 ImageView。在加载图像之前，没有内容并且布局缩小到小 ProgressBar 的高度（第一个问题），当我预计它是 240dp 或 120dp 时。图像放入视图后，布局没有调整（第二个问题），高度仍然是一个小进度条的缩小尺寸。

加载图像代码：

```
@Override
public View getView(View convertView) {
    // ...
    // set up holder
    // ...
    new GetPhotoTask().execute(holder.my_tile_image, holder.my_loading, my_media_url);
    holder.my_tile_image.setVisibility(View.INVISIBLE);
    holder.my_loading.setVisibility(View.VISIBLE);
    holder.my_tile_label.setText(activityObject1.track.name);
    // ...
}

private final class GetPhotoTask extends AsyncTask<Object, Void, Drawable> {

    ImageView iv;
    ProgressBar pb;

    @Override
    protected Drawable doInBackground(Object... params) {
        iv = (ImageView) params[0];
        pb = (ProgressBar) params[1];
        return new BitmapDrawable(getResources(), loadAsset(params[2]).media_url, true));
    }

    @Override
    protected void onPostExecute(Drawable result) {
        super.onPostExecute(result);
        pb.setVisibility(View.GONE);
        iv.setImageDrawable(result);
        iv.setVisibility(View.VISIBLE);
    }
} 
```

主要的xml：

```
<ListView
        android:id="@+id/my_list"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:padding="2dp" /> 
```

每行的xml：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
        android:id="@+id/my_row_type_3"
        android:orientation="horizontal"
        android:layout_width="match_parent"
        android:layout_height="240dp"
        android:weightSum="3" >
    <include layout="@layout/my_tile_layout"
        android:id="@+id/my_tile_1"
        android:layout_width="0dp"
        android:layout_height="match_parent"
        android:layout_weight="2" />
    <LinearLayout
        android:id="@+id/my_row_type_2"
        android:orientation="vertical"
        android:layout_width="0dp"
        android:layout_height="match_parent"
        android:layout_weight="1"
        android:weightSum="2" >
        <include layout="@layout/my_tile_layout"
            android:id="@+id/my_tile_2"
            android:layout_width="match_parent"
            android:layout_height="0dp"
            android:layout_weight="1" />
        <include layout="@layout/my_tile_layout"
            android:id="@+id/my_tile_3"
            android:layout_width="match_parent"
            android:layout_height="0dp"
            android:layout_weight="1" />
    </LinearLayout>
</LinearLayout> 
```

行内容的 xml：

```
<FrameLayout xmlns:android="http://schemas.android.com/apk/res/android"
        android:id="@+id/my_tile_layout"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:padding="2dp" >
    <ImageView
        android:id="@+id/my_image"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:scaleType="centerCrop"
        android:contentDescription="@string/foo" />
    <ProgressBar
        android:id="@+id/my_loading"
        style="?android:attr/progressBarStyleSmall"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:layout_gravity="center" />
    <TextView
        android:id="@+id/my_tile_label"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="@string/my_title"
        android:layout_gravity="left|bottom" />
</FrameLayout> 
```

为什么即使我为每行硬编码 240dp，初始布局也会缩小到进度条的高度？为什么在 ImageView 内容中设置位图也不会导致它在此时调整大小？第一个问题最重要，因为我相信它会使第二个问题无效。提前致谢。

**解决方案**

为了获得我想要的结构，我将 RelativeLayout 用于图块（用于分层能力），并且对于每一行，我将覆盖 LinearLayout 以强制为每一行设置我想要的大小。由于每个图块的内容都可能大于或小于视图，这破坏了我依赖 centerCrop 或 fitCenter 的能力。所以在我的自定义布局中，我将高度设置为与每行的宽度成正比，并将 MeasureSpec 的模式设置为 EXACTLY。

```
public final class MyRow3 extends LinearLayout { 
// ... 
@Override protected void onMeasure(int widthMeasureSpec, int heightMeasureSpec) {
    super.onMeasure(widthMeasureSpec, makeMeasureSpec(getSize(widthMeasureSpec) * 2 / 3, MeasureSpec.EXACTLY));
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T15:56:07.447

我不确定为什么它不尊重它，但为什么不这样做：

在 ImageView 中设置绝对高度以保证一些空间。

```
<ImageView
    android:layout_height="###dp"
/> 
```

然后在加载图像之前将布局更改回自动调整状态：

```
iv.setLayoutParams( new LinearLayout.LayoutParams( LinearLayout.LayoutParams.MATCH_PARENT, LinearLayout.LayoutParams.MATCH_PARENT ) ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-15T23:13:15.567

为了获得我想要的结构，我将 RelativeLayout 用于图块（用于分层能力），并且对于每一行，我将覆盖 LinearLayout 以强制为每一行设置我想要的大小。由于每个图块的内容都可能大于或小于视图，这破坏了我依赖 centerCrop 或 fitCenter 的能力。所以在我的自定义布局中，我将高度设置为与每行的宽度成正比，并将 MeasureSpec 的模式设置为 EXACTLY。

```
public final class MyRow3 extends LinearLayout { 
// ... 
@Override protected void onMeasure(int widthMeasureSpec, int heightMeasureSpec) {
    super.onMeasure(widthMeasureSpec, makeMeasureSpec(getSize(widthMeasureSpec) * 2 / 3, MeasureSpec.EXACTLY));
} 
```

# python - 使用 for 循环选择项目并将它们放入列表中

> ID：16219294
> 
> 赞同：0
> 
> 时间：2013-04-25T15:49:34.700
> 
> 标签：python, sqlite

所以我正在查询一个名为 golfDB 的数据库，它由一个名为 player 的表组成，其中包含 5 个字段：

*   姓名（玩家姓名）
*   totalGross（每轮总分的总和）
*   totalRounds（已玩的回合数）
*   pars（制作的 pars 总数）
*   小鸟（小鸟总数）

在下面的这个函数中，我试图找到拥有最多标准杆的球员。事实证明有两个玩家，所以我试图找出一种方法来更好地打印出来，因为目前它正在打印两次打印语句，但最后是不同的玩家。我希望能够将我指定为玩家的内容作为两个玩家的列表，然后以某种方式在打印声明中更连贯地打印玩家。有任何想法吗？

```
def queryDBpars(cursor):
    """find out which player had the most pars"""
    cursor.execute('select name, pars from players where pars = (select max(pars) from players)')
    playerPars= cursor.fetchall()
    for items in playerPars:
        players= (items[0])
        print('The player(s) with the most pars is/are', players) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-25T15:51:32.260

您可以使用[`str.join()`](http://docs.python.org/3/library/stdtypes.html#str.join)组合名称：

```
playerPars = cursor.fetchall()
print('The player(s) with the most pars is/are',
      ', '.join(p[0] for p in playerPars)) 
```

这将名称与它们之间的逗号连接起来。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T15:51:55.917

您可以将玩家存储在列表中，并在打印语句中使用[join来显示组合列表。](http://docs.python.org/2/library/stdtypes.html#str.join)

```
players = list()
for items in playerPars:
    players.append(items[0])
print('The player(s) with the most pars is/are', ', '.join(players)) 
```

如果你想让它更优雅，你可以使用[list comprehension](http://www.secnetix.de/olli/Python/list_comprehensions.hawk)。

```
players = [player[0] for player in playerPars] 
```

它会输出：`The player(s) with the most pars is/are player1, player2`

如果您想检查玩家数量以便正确格式化文本，您可以执行以下操作。

```
if len(players) > 1:
    print('The player(s) with the most pars are', ', '.join(players))
elif len(players) == 1:
    print('The player with the most pars is %s' % players[0]) 
```

# javascript - 为什么 JavaScript 中的其余参数都这样称呼？

> ID：16219299
> 
> 赞同：9
> 
> 时间：2013-04-25T15:50:00.310
> 
> 标签：javascript, rest-parameters

为什么 JavaScript 中的[rest 参数](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/rest_parameters#Browser_compatibility)是这样称呼的？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-25T15:53:31.723

它们被称为`rest`参数，因为它们在调用函数时捕获*其余*参数。

```
function multiply(multiplier, ...theArgs) {
  return theArgs.map(function (element) {
    return multiplier * element;
  });
} 
```

[来自https://developer.mozilla.org/en-US/docs/JavaScript/Reference/rest_parameters#Browser_compatibility](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/rest_parameters#Browser_compatibility)的示例

`...theArgs`捕获参数 2+。换句话说，`multiplier`是第一个参数，`theArgs`是**其余**的。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-04-25T15:52:02.690

此处使用“rest”一词来表示*其余*参数值的容器，其中可能有任意数量。

它的历史用法可能从[Lisp Machine Lisp](http://en.wikipedia.org/wiki/Lisp_Machine_Lisp)开始，在 1981 年第三版的 Lisp Machine Manual 中明确记录。在 1974 年，Maclisp 或 Interlisp 中都没有这种行为或那个名称的“休息参数”。目前 Common Lisp 中的休息参数与 Lisp 机器手册中的语法相同。 [http://www.lispworks.com/documentation/HyperSpec/Body/03_dac.htm](http://www.lispworks.com/documentation/HyperSpec/Body/03_dac.htm)

[在2012-07-12 ECMAScript 6 草案](http://wiki.ecmascript.org/doku.php?id=harmony%3aspecification_drafts)中首次引入了与 ECMAScript 相关的短语“rest parameters” 。很明显，那里的短语应该被理解为 Lisp 先前建立的常用用语。如果这真的很重要，我想我们可以问问 ECMA 技术委员会 39 的秘书 Istvan Sebestyen 博士，他的地址是他在 ecma-international.org 上的名字，是否有人愿意用这么多的话说出来。

# drupal-7 - Drupal 所见即所得菜单未显示

> ID：16219303
> 
> 赞同：0
> 
> 时间：2013-04-25T15:50:12.303
> 
> 标签：drupal-7

Drupal 7，安装了 ckeditor 库的所见即所得模块。文本格式已配置。我已经多次使用和设置这个模块/编辑器配置没有问题，所以我很困惑。

在这种情况下，内容创建页面中根本没有显示编辑器，只有默认文本框。

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-08-13T18:51:28.493

参加聚会有点晚了，但我刚刚遇到了这个问题并设法解决了。

我所做的是：1）转到/admin/config/content/wysiwyg 2）对于“文本格式”下的每个条目，我单击编辑。3）展开“显示按钮和插件”并检查所有这些 4）​​点击保存

为我工作...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-12-12T16:23:03.967

万一其他人遇到这个问题 - 我只是通过允许他们查看管理主题来设法解决这个问题

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-04-17T13:59:43.950

我遇到了类似的问题，但是这里所见即所得的菜单不仅针对我的一种内容类型显示。我安装了 de JQuery Update 模块。当我转到 /admin/config/development/jquery_update 并将管理页面的默认 JQuery 版本从 1.7 更改为 1.10 时，问题得到了解决。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-03-16T20:17:10.050

我有一个类似的问题。我之前找到的所有答案都对我没有帮助。

我的解决方案如下：禁用“聚合 JavaScript 文件”。选项！

您可以在以下位置找到此选项：配置 -> 开发 -> 性能

我希望它有帮助

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-26T08:43:24.780

它对我来说工作得很好。让我描述一下工作示例。

1）下载drupal 7[所见即所得](http://drupal.org/project/wysiwyg)模块

2）去[CKEditor下载](http://ckeditor.com/download) 或者[v3.5.3](http://ckeditor.com/release/ckeditor-353) 。请只下载3.5.3版本，因为其他版本可能会出现问题。[（从这里](http://drupal.org/node/1161738)阅读更多）

3) 下载编辑器库后，放入sites\all\libraries\ckeditor。

4）转到->管理->配置->所见即所得配置文件

如果您将库正确放入“sites\all\libraries\ckeditor”，那么您可以看到编辑选项。

根据您的需要设置选项。

5) 进入内容创作区，在这里您可以根据您的设置找到您的结果。

即，如果您为Full html 文本格式启用它，则仅当您将文本格式设置为Full Html 时它才可用。

![在此处输入图像描述](https://i.stack.imgur.com/7kTZH.png)

请查看附图以获得更多帮助。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-07-03T12:30:57.683

如果选中此选项，您是否可以尝试禁用在节点编辑中创建的菜单，在没有此选项的情况下保存您的节点并查看它是否有效

# iphone - 旋转后视图重新加载不正确

> ID：16219304
> 
> 赞同：0
> 
> 时间：2013-04-25T15:50:16.360
> 
> 标签：iphone, ios, objective-c, landscape-portrait, screen-rotation

我在表格单元格内重新加载自定义`UIView`( ) 时遇到问题。`SBBarChart`我不使用自动布局，因为它很难调整单元格的所有组件（可能存在或不存在）。我每次都手动计算矩形并且有效。

关于旋转，我尝试在表格视图控制器中实现内部`willRotateToInterfaceOrientation`方法`[self.tableView reloadData]`。这会在旋转后再次生成单元格。美好的。

在单元格类内部，我调用`[self.barChart setNeedsDisplay]`以确保重新加载图表的子视图，这很有效。

现在的问题。最初，纵向视图打开并正确加载。当我旋转到横向时，它也可以。当我旋转回纵向时，条的长度计算正确，但仍显示为横向。因此，条形的新矩形具有正确的度量，但条形显示太长并且部分位于屏幕之外。

具有相同尺寸的框架标签正确显示（并居中），因此应该是条形视图重新加载的问题。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T15:54:12.037

尝试检查`[[UIApplication sharedApplication] statusBarOrientation]`

重新加载您的表格视图时，然后进行相应调整。这将给出当前的旋转状态。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-26T08:31:20.957

我刚刚解决了我的问题。我在我的代码中发现了三个主要错误。

1）我在`dequeueReusableCellWithIdentifier`从单元格中删除控件后使用。这导致缺少控件和奇怪的行为。现在我每次从笔尖生成一个新单元格。

2）我正在使用从单元格中删除的控件的值`x`。`y`我只是把数值代替。

3）我使用`frame`来确定屏幕的宽度。但是，框架不会改变。为了解决这个问题，我使用了以下线程：[如何获得与方向相关的屏幕高度和宽度？](https://stackoverflow.com/questions/7905432/how-to-get-orientation-dependent-height-and-width-of-the-screen)

现在，我什至不需要这条线`[self.barChart setNeedsDisplay]`，我可以随心所欲地旋转设备，控件不再移动。:)

我仍然不确定是否必须调用`reloadData`来调整布局，但我还没有找到更好的解决方案。

所以，终于成功了！非常感谢您的帮助，我希望这篇文章对其他人有所帮助。:)

# lync - UCMA 录制电话交谈

> ID：16219306
> 
> 赞同：1
> 
> 时间：2013-04-25T15:50:20.203
> 
> 标签：lync, ucma

我的经理要求我进行一些研究，看看是否可以使用 UCMA 4.0 SDK 编写一个能够记录我们网络上的电话对话的应用程序。

我一直在查看 SDK 提供的示例，并设法编写了一个控制台应用程序，它位于我的机器上等待来电，一旦有来电，它就会将录音保存到本地文件夹。

这一切都很好，但是我需要一些可以放在服务器上并接听所有用户（或特定用户，真的）的所有呼叫的东西。

那么我的问题是，这样的事情可能吗？如果是这样，谁能指出我正确的方向？

我们在 Windows server 2012 机器上运行 Lync Server 2013。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-28T12:16:54.163

您可以使用 MSPL 脚本将传入呼叫重新路由到您的 UCMA 应用程序：

[使用 MSPL 将请求重新路由到 UCMA 应用程序](http://blog.greenl.ee/2011/09/04/rerouting-requests-ucma-application-mspl/)

# php - 将多维数组分离为单独的数组

> ID：16219313
> 
> 赞同：1
> 
> 时间：2013-04-25T15:50:31.283
> 
> 标签：php, arrays

我试图让我的头脑围绕数组。

数组应如下所示：

```
$questions[$a] => array( [0] => No, comment1
                         [1] => Yes, comment2
                         [2] => No, comment3 )

$answer[$a] => array( [0] => No
                      [1] => Yes
                      [3] => No )

$comment[$a] => array( [0] => comment1
                       [1] => comment2
                       [3] => comment3 ) 
```

**==================================================== ========================**

**第二次编辑：**需要在循环中执行此操作以创建第三个数组 -

```
if($answer[$a] == "Yes") { $display[$a] = "style='display:none'"; 
} else { $display[$a] = "style='display:block'"; } 
```

**这就是我所拥有的：（minitech 第 28 位）**

```
while ($a > $count)
{
if($count > 11) {
foreach($questions as $q) {
    list($answer, $comments[]) = explode(',', $q);
    if($answer === "Yes") { 
    $display[$a] = "style='display:none'"; 
    } else { 
    $display[$a] = "style='display:block'"; 
    }

$answers[] = $answer;
    }
  }
$a++;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-27T19:56:30.553

如果它们实际上是字符串，则[`explode`](http://php.net/explode)有效：

```
$answers = array();
$comments = array();
$display = array();

foreach(array_slice($questions, 11) as $question) {
    list($answer, $comments[]) = explode(',', $question);
    $display[] = $answer === 'Yes' ? 'style="display: none"' : 'style="display: block"';
    $answers[] = $answer;
} 
```

[这是一个演示！](http://codepad.viper-7.com/v9ZSv3)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T15:53:14.783

将您的 while 循环更改为此

```
while ...
{
$parts = explode(',', $questions[$a]);
$answer[$a][] = trim($parts[0]);
$comment[$a][] = trim($parts[1]);
} 
```

在您的原始代码中，您每次都覆盖 $answer[$a] 和 $comment[$a]，而不是附加到数组的末尾

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-25T15:54:30.203

```
$questions[$a] = array('Q1?' => 'A1', 'Q2?' => 'A2', 'Q3?' => 'A3');

foreach($questions[$a] as $key => $value)
{
    $comment[$a][] = $key;
    $answer[$a][] = $value;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-25T15:56:26.227

这应该有效。

```
foreach ($questions[$a] as $key=>$value){
  $temp = explode(',',$value);
  $answer[$key] = $temp[0];
  $comment[$key] = $temp[1];
} 
```

$key 将分别有 0,1,2。$value 将具有每个 $question[$a](No,Comment1 ....) 的值

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-25T15:57:54.347

想不出一个时髦的单线，但应该这样做：

```
foreach ($questions as $a => $entries) {
    foreach ($entries as $k => $entry) {
        $parts = array_map('trim', explode(',', $entry));
        $answer[$a][$k] = $parts[0];
        $comment[$a][$k] = $parts[1];
    }
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-25T15:58:02.077

这里是正确答案

```
foreach($questions as $key => $question){
  foreach($question as $q => $data){
   $data= explode(',',$data);
   $comments[$key][$q] = $data[0];
   $answer[$key][$q] = $data[1];
  }
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-04-25T15:58:21.623

如果中的值`$questions`是逗号分隔的字符串，您可以使用一个`array_walk`函数来填充您的`$answer`和`$comment`数组

```
$question = array(...); //array storing values as described
$answer = array();
$comment = array();

array_walk($question, function ($value, $key) use ($answer,$comment) {
    $value_array = explode(',', $value);
    $answer[$key] = $value_array[0];
    $comment[$key] = $value_array[1];
}); 
```

请注意，这是使用需要 PHP >= 5.3.0 的匿名函数（闭包）显示的。如果您有较低版本的 PHP，则需要声明一个命名函数，并将 $answer 和 $comment 声明为函数中的全局变量。我认为这是一种 hacky 方法（使用这样的全局变量），所以如果我使用 PHP < 5.3，我可能会像其他问题的答案一样使用 foreach 循环。

像`array_walk`,`array_filter`和使用回调的类似函数通常是利用匿名函数提供的灵活性的好地方。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-04-25T16:00:14.770

```
$questions = array( 0 => 'No,comment1',1 => 'Yes,comment2',2 => 'No,comment3' );

foreach($questions as $question)
{
    $parts = explode(",",$question);
    $answer[] = $parts[0];
    $comment[] = $parts[1]; 
}

echo "<pre>";
print_r($answer);
print_r($comment); 
```

# ios - UINavigationController addSubview

> ID：16219322
> 
> 赞同：1
> 
> 时间：2013-04-25T15:50:46.223
> 
> 标签：ios, objective-c

我有一个 UINavigationController 类，我想使用 addSubview 方法添加一个按钮，但它不起作用

```
- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    if (self) {
        // Custom initialization
        UIButton *testbtn = [[UIButton alloc] initWithFrame:CGRectMake(20, 90,28,20)];
        [self.view addSubview:testbtn];
    }
    return self;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T16:12:54.210

我假设因为您试图在导航控制器上执行此操作，所以您需要工具栏上的条形按钮项。您需要在 UIViewController 中执行此操作，而不是 UINavigationController：

```
UIBarButtonItem * doneButton = [[UIBarButtonItem alloc] initWithTitle:@"Done"
                                                           style:UIBarButtonSystemItemDone
                                                          target:self
                                                          action:@selector(buttonPressed:)];
[self.navigationItem setRightBarButtonItem:doneButton]; 
```

此外，您应该喝杯咖啡并通读[UINavigationController 类参考](http://developer.apple.com/library/ios/#documentation/uikit/reference/UINavigationController_Class/Reference/Reference.html)的“概述”部分。大约需要 10 分钟，你会很高兴你做到了。

如果我错了，并且您确实想要一个 UIButton（而不是 UIBarButtonItem），那么您还需要在 UIViewController 子类中执行此操作。此外，您应该使用它的工厂方法，而不是典型的 alloc/init：

```
UIButton *btn = [UIButton buttonWithType:UIButtonTypeRoundedRect];
btn.frame = CGRectMake(20, 90,28,20) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T15:59:50.560

我不相信您可以向 a 添加按钮`UINavigationController`- 它实际上并没有自己的视图。更多的`UINavigationController`是一个幕后组织者，用于举行和展示其他`UIViewController`s。

您需要将您`[self.view addSubview:testbtn]`的代码放入 a 的代码中`UIViewController`，而不是放入`UINavigationViewController`. 正如大卫多伊尔在他的回答中指出的那样，将类似的东西放在`viewDidLoad`而不是放在`initWithNibName`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-25T15:53:31.593

如果要修改 View Controller 的视图，在 init 方法中这样做不是一个好主意。提取创建 View Controller 视图的资源的 nib 文件需要很短的时间才能完成。

您最好通过覆盖方法 -[UIViewController viewDidLoad] 来修改 View Controller 的视图，如下所示：

```
- (void)viewDidLoad
{
  UIButton *testbtn = [[UIButton alloc] initWithFrame:CGRectMake(20, 90,28,20)];
  [self.view addSubview:testbtn];
} 
```

# oracle10g - Oracle 为重新创建的对象保留 Grant

> ID：16219325
> 
> 赞同：0
> 
> 时间：2013-04-25T15:50:48.017
> 
> 标签：oracle10g, oracle11g

我有一个表 T 的赠款，我希望在以下情况下获得此赠款：

```
drop table T;
create table T(...); 
```

可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T16:03:04.757

来自[Oracle 数据库 SQL 语言参考](http://docs.oracle.com/cd/E11882_01/server.112/e26088/statements_9003.htm#i2061306)（重点是我的）：

> 删除表会使依赖对象无效**并删除表上的对象权限**。如果要重新创建表，则必须重新授予对表的对象权限，重新创建表的索引、完整性约束和触发器，并重新指定其存储参数。截断和替换没有这些影响。因此，使用 TRUNCATE 语句删除行可能比删除和重新创建表更有效。

因此，您需要在`grant`语句之后将语句显式添加到脚本中`create table`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-25T16:05:00.093

不会。在您删除对象的那一刻，对该对象的任何授权都将被删除。当您创建一个新对象时，即使该对象恰好与旧对象同名，您也需要重新授予新对象上所需的任何权限。这就是删除和重新创建对象很少是一个好主意的原因之一 - 为什么需要删除并重新创建表？

当然，您可以在删除对象之前识别所有授权，然后在创建新对象后重新创建这些授权。您可以通过查询各种数据字典表（如`dba_tab_privs`) 或使用该[`dbms_metadata.get_dependent_ddl`函数](http://docs.oracle.com/cd/B19306_01/appdev.102/b14258/d_metada.htm#BABFBDDG)获取授权的 DDL 来做到这一点。

# asp.net-mvc-4 - 如何在 MVC4 中向可扩展控制器的构造函数添加注入

> ID：16219326
> 
> 赞同：0
> 
> 时间：2013-04-25T15:50:53.987
> 
> 标签：asp.net-mvc-4, unity-container, mef

将 Unity 与 MVC4 结合使用，我可以很好地定位扩展控制器。而且我还能够注入本地控制器的构造函数，同时仍然拥有所有可扩展的控制器。我似乎无法找到一种方法来注入可扩展控制器的构造函数。我也尝试过 MEF，但成功率更低。

我正在寻找执行此操作的示例代码的链接，欢迎提出任何建议。我有用于测试的模型代码，如果需要可以发布。

# r - 使用箭头函数将存储在数据框中的置信限添加到条形图

> ID：16219327
> 
> 赞同：3
> 
> 时间：2013-04-25T15:50:55.703
> 
> 标签：r

我相信这对你们大多数人来说是一个简单的问题:) 我查看了 R 帮助页面和这里，我知道我需要什么功能（我认为是箭头）但我只是不明白如何用它。所以我的问题是：

我有一个带有实验结果的数据框（数据），我已将其简化为：

```
treatment   y   lower_limit_CI  upper_limit_CI
1   0.13284413  0.1224  0.1438
2   0.263072558 0.2458  0.2809
3   0.234218546 0.217   0.2521
4   0.394980185 0.3702  0.4201
5   0.474533107 0.4457  0.5035
6   0.583333333 0.5526  0.6136 
```

我已经像这样绘制了数据的条形图：

```
plot <- barplot(data$y) 
```

而且我知道我现在需要函数箭头（是吗？）将也存储在我的数据框中的置信限添加到图中。

有人可以告诉我如何使用箭头来获取正确的信息。从我的数据框中？我根据某人的建议尝试了这个：

```
arrows(plot, data$y - data$lower_limit_CI,
   plot, data$y + data$upper_limit_CI,
   code=3, angle=90, length =0.1) 
```

这给出了明显不正确的巨型条。任何人都可以帮忙吗？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-25T21:32:24.753

我建议您使用更灵活、更强大的[ggplot2](http://ggplot2.org/)包来代替`barplot`and函数。以下是如何使用和函数创建具有置信区间的条形图：`arrows``ggplot``geom_bar``geom_errorbar`

```
ggplot(data, aes(treatment, y, fill=1:6)) + geom_bar(position=position_dodge(), stat="identity") + geom_errorbar(aes(ymin=data$lower_limit_CI, ymax=data$upper_limit_CI), width=.2, position=position_dodge(.9)) 
```

输出如下所示：

![在此处输入图像描述](https://i.stack.imgur.com/NyYIQ.png)

# highcharts - HighCharts 图例位置

> ID：16219329
> 
> 赞同：4
> 
> 时间：2013-04-25T15:51:01.727
> 
> 标签：highcharts

我正在使用 HighCharts（水平）条形图。这个图表在我的页面上很长，这很好，所以我希望图例显示在图表的顶部和底部。这可能吗？我在 API 中找不到如何执行此操作。

感谢您的任何提示。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-26T11:44:13.407

您可以通过 CSS / html 样式添加额外的图例。

[http://jsfiddle.net/Ecrww/109/](http://jsfiddle.net/Ecrww/109/)

```
 $(chart.series).each(function(i, serie){
    $('<li style="color: '+serie.color+'">'+serie.name+'</li>').click(function(){
        serie.visible ? serie.hide() : serie.show();
    }).appendTo('#legend')
}) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T16:12:09.503

尝试删除以下代码

```
legend:
 {
  layout: 'vertical',
  align: 'right',
  verticalAlign: 'top'
  ......
  ......
 } 
```

这使图例成为默认位置

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-31T08:50:04.503

我也得到它并找到了解决它的方法

尝试在选项中添加这些代码：

```
 chart: {
            marginTop:-10//for top position
           }, 
```

希望对你有帮助

# c# - 实体框架多列

> ID：16219333
> 
> 赞同：2
> 
> 时间：2013-04-25T15:51:15.103
> 
> 标签：c#, entity-framework

在 sqlcommand 我有这个：

```
SELECT * 
FROM cliente c
    LEFT JOIN abono a on
        c.idcliente = a.idcliente
        and (a.estatus = 1 or a.estatus = null)
    LEFT JOIN usuario u on
        a.creadopor = u.idusuario
WHERE c.estatus = 1 
```

我们知道这与此不同：

```
SELECT * 
FROM cliente c
     LEFT JOIN abono a on
         c.idcliente = a.idcliente
     LEFT JOIN usuario u on
         a.creadopor = u.idusuario
WHERE c.estatus=1
      and (a.estatus = 1 or a.estatus = null) 
```

如何在实体框架中进行第一次查询？

实体框架中的第二个查询是

```
from c in Conexion.conexion.conect.cliente
join a in Conexion.conexion.conect.abono
on c.idcliente equals a.idcliente into alj
from a in alj.DefaultIfEmpty()
join u in Conexion.conexion.conect.usuario
on a.creadopor equals u.idusuario into ulj
from u in ulj.DefaultIfEmpty()
where c.estatus == 1
&& (a.estatus == 1 || a.estatus == null) 
```

但我无法获得第一个查询

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T17:11:09.753

这可以解决问题：

```
from c in Conexion.conexion.conect.cliente
join a in Conexion.conexion.conect.abono.Where(x.estatus == 1 || x.estatus == null)
on c.idcliente equals a.idcliente into alj
from a in alj.DefaultIfEmpty()
join u in Conexion.conexion.conect.usuario
on a.creadopor equals u.idusuario into ulj
from u in ulj.DefaultIfEmpty()
where c.estatus == 1 
```

# azure - 从外面看天蓝色的桌子存储

> ID：16219339
> 
> 赞同：0
> 
> 时间：2013-04-25T15:51:48.970
> 
> 标签：azure, azure-table-storage

从云外的应用程序使用 Azure 表存储时，事务的速度会降低多少？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T15:57:25.570

是的，由于网络延迟。多少取决于发出呼叫的机器离 Azure 数据中心有多远。

# sql - SQL 数据库日期范围

> ID：16219340
> 
> 赞同：0
> 
> 时间：2013-04-25T15:51:52.707
> 
> 标签：sql, sql-server-2008, sql-date-functions

我有一个包含状态更新的平面表。

这些更新以下列格式存储：

> 协议ID | 状态ID | 状态日期

源数据：

```
AgreementID StatusID    StatusDate
109         1           14/01/2013 15:00:33
109         2           14/01/2013 15:01:28
109         2           14/01/2013 15:01:28
109         2           14/01/2013 15:02:42
109         2           26/02/2013 16:27:38
109         2           26/02/2013 16:27:45
109         8           19/02/2013 13:57:33
109         8           04/03/2013 16:46:29
109         8           18/03/2013 14:08:12
109         8           18/03/2013 14:47:00
109         8           18/03/2013 14:48:46
109         9           26/03/2013 15:41:51 
```

我需要的是在日期范围内映射协议状态，一个协议可以有同一个 StatusID 的多个状态更新，但是一旦协议进入下一个 StatusID，它就不能退回到以前的状态 ID。

对于最后一个状态，日期范围应为 StatusDate To Date。

我有以下一段代码，但结果并没有给我想要的东西......

```
SELECT     
    AgreementID, 
    CONVERT(datetime, CONVERT(varchar(10), StatusDate, 103), 103) AS StatusDate, 
    CONVERT(datetime, CONVERT(varchar(10), StatusDate, 103), 103) AS DateFrom, 
    CASE WHEN DateTo IS NULL THEN CONVERT(datetime, CONVERT(varchar(10), GETDATE(), 103), 103) ELSE CONVERT(datetime, CONVERT(varchar(10), DateTo, 103), 103) END AS DateTo, 
    StatusID
FROM         
    (
     SELECT     
        AgreementID, 
        StatusID, 
        StatusDate, 
        (SELECT TOP (1) StatusDate FROM TblStatusUpdates AS SU WHERE SU.AgreementID = U.AgreementID AND SU.StatusDate > U.StatusDate ORDER BY StatusID, StatusDate ASC) DateTo, 
        RN = ROW_NUMBER() OVER (Partition BY AgreementID ORDER BY StatusDate)
     FROM         
        (
         SELECT     
            AgreementID, 
            StatusID, 
            MIN(StatusDate) AS StatusDate
         FROM          
            TblStatusUpdates
         GROUP BY 
            AgreementID, StatusID
        ) AS U
    ) AS A 
```

以下是此查询的示例结果：

```
AgreementID StatusDate  DateFrom    DateTo      StatusID
109         14/01/2013  14/01/2013  14/01/2013  1
109         14/01/2013  14/01/2013  14/01/2013  2
109         19/02/2013  19/02/2013  26/02/2013  8
109         26/03/2013  26/03/2013  25/04/2013  9 
```

如您所见，Date To Value 不正确，它应该始终运行到下一个状态 ID 的前一天。

所以在这个例子中，状态 2 应该从 19/02/2013 到 18/02/13

任何建议都会很棒。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-26T09:39:36.780

对此进行快速更新，我试图过于复杂而无法获得所需的答案。

这是我现在得到的代码：

```
SELECT
     AgreementID, 
     StatusID,
     DateFrom,
     CASE WHEN DateTo IS NOT NULL THEN DATEADD(S, -1, DateTo) ELSE GETDATE() END AS DateTo
FROM
    (
     SELECT 
        AgreementID, 
        StatusID, 
        MIN(CONVERT(datetime,StatusDate,103)) as DateFrom, 
        (SELECT TOP(1) StatusDate FROM TblStatusUpdates AS B WHERE B.StatusID > A.StatusID ORDER BY StatusID ASC, StatusDate ASC) AS DateTo
     FROM 
        TblStatusUpdates AS A
     GROUP BY 
        AgreementID, 
        StatusID
    ) AS C 
```

这给了我以下结果：

```
AgreementID StatusID    DateFrom                  DateTo
109         1           2013-01-14 15:00:33.360   2013-01-14 15:01:27.393
109         2           2013-01-14 15:01:28.393   2013-02-19 13:57:32.437
109         8           2013-02-19 13:57:33.437   2013-03-26 15:41:49.843
109         9           2013-03-26 15:41:50.843   2013-04-26 10:34:13.860 
```

谢谢大家的建议。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T16:12:43.827

如果您使用的是 SQL Server 2012，则可以执行以下操作：

```
with agst as
     (select AgreementID, 
             CONVERT(datetime, CONVERT(varchar(10), min(StatusDate), 103), 103) AS StatusDate, 
             CONVERT(datetime, CONVERT(varchar(10), min(StatusDate), 103), 103) AS DateFrom, 
             StatusID
      from TblStatusUpdates
      group by AgreementID, StatusID
     )
select agst.*,
       lead(datefrom) over (partition by AgreementId, statusId order by DateFrom) - 1 as DateTo
from agst 
```

`agst`我想我只使用聚合（即公共表表达式）简化了 StatusDate/MinDate 的计算。该`lead()`函数只是将下一个值拉入行中。

您可以对相关子查询执行类似操作。这是那个版本：

```
with agst as
     (select AgreementID, 
             CONVERT(datetime, CONVERT(varchar(10), min(StatusDate), 103), 103) AS StatusDate, 
             CONVERT(datetime, CONVERT(varchar(10), max(StatusDate), 103), 103) AS DateFrom, 
             StatusID
      from TblStatusUpdates
      group by AgreementID, StatusID
     )
select agst.*,
       (select top 1 DateFrom
        from agst agst2
        where agst2.agreementId = agst.agreementid and
              agst2.StatusID = agst.StatusID and
              agst2.DateFrom > agst.DateFrom
        order by DateFrom desc
       ) - 1 as DateTo
from agst 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-25T18:02:15.547

Hopefully this is what you are looking for.

[SQL FIDDLE](http://www.sqlfiddle.com/#!6/feec8/6)

# ruby - 使用 nokogiri builder (ruby) 设置标签属性并添加纯文本内容到标签

> ID：16219343
> 
> 赞同：17
> 
> 时间：2013-04-25T15:51:58.120
> 
> 标签：ruby, xml, nokogiri

我正在尝试使用 Nokogiri 构建 XML，其中一些标签在标签内具有属性和纯文本。所以我试图做到这一点：

```
<?xml version="1.0"?>
<Transaction requestName="OrderRequest">
  <Option b="hive">hello</Option>
</Transaction> 
```

使用生成器我有这个：

```
builder = Nokogiri::XML::Builder.new { |xml|
  xml.Transaction("requestName" => "OrderRequest") do
    xml.Option("b" => "hive").text("hello")
  end
} 
```

呈现为：

```
<Transaction requestName="OrderRequest">
  <Option b="hive" class="text">hello</Option>
</Transaction> 
```

所以它会产生 `<Option b="hive" class="text">hello</Option>` 我想要的地方 `<Option b="hive">hello</Option>`

我不知道该怎么做。如果我尝试通过仅向 Nokogiri 对象提供我想要的 XML 来获取它，它会准确地呈现我需要的内容，其中内部文本位于`<Option>`设置为的标签内`children=[#<Nokogiri::XML::Text:0x80b9e3dc "hello">]`，我不知道如何从构建器中设置它。

如果有人在 Nokogiri 文档中有参考，我将不胜感激。

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2013-04-25T16:57:43.677

您可以使用两种方法。

**使用`.text`**

您可以调用该`.text`方法来设置节点的文本：

```
builder = Nokogiri::XML::Builder.new { |xml|
  xml.Transaction("requestName" => "OrderRequest") do
    xml.Option("b" => "hive"){ xml.text("hello") }
  end
} 
```

产生：

```
<?xml version="1.0"?>
<Transaction requestName="OrderRequest">
  <Option b="hive">hello</Option>
</Transaction> 
```

**使用文本参数的解决方案**

或者，您可以将文本作为参数传入。文本应该在属性值之前传入。换句话说，标签以如下形式添加：

```
tag "text", :attribute => 'value' 
```

在这种情况下，所需的构建器将是：

```
builder = Nokogiri::XML::Builder.new { |xml|
  xml.Transaction("requestName" => "OrderRequest") do
    xml.Option("hello", "b" => "hive")
  end
} 
```

生成相同的 XML：

```
<?xml version="1.0"?>
<Transaction requestName="OrderRequest">
  <Option b="hive">hello</Option>
</Transaction> 
```

# jquery - 如何链接多个jquery动画函数？

> ID：16219345
> 
> 赞同：0
> 
> 时间：2013-04-25T15:52:00.207
> 
> 标签：jquery, animation, jquery-animate

嗨，我遇到了一些 jquery 问题！

我有几个按钮，都需要在点击时启动独特的动画效果。每个按钮都有不同的动画！

我有一个我正在使用的代码块，效果很好。我只是想多次复制这段代码，在这里和那里更改一些元素和值，但我无法让它工作！请帮忙！！？？

代码看起来像这样......

```
 $('#animation2').click(function(){
setTimeout("animation()",2000); 
});

function animation(){
    float_boat();
    sail_away();
}

function float_boat(){
    $(".boat").animate({top:"-=80px"},800).animate({top:"+=100px"}, 1200);
    setTimeout("float_boat()",2000);
}

function sail_away(){
    $(".sailboat").animate({left:"80%",marginLeft:"0px"}, 3500).fadeTo(600, 0);
}

$('#animation3').click(function(){
setTimeout("animation()",2000); 
});

function animation(){
    bounce_bike();
    ride_away();
}

function bounce_bike(){
    $(".motorbike").animate({top:"-=80px"},800).animate({top:"+=100px"}, 1200);
    setTimeout("bounce_bike()",2000);
}

function ride_away(){
    $(".motorcycle").animate({left:"80%",marginLeft:"0px"}, 3500).fadeTo(600, 0);
}

$('#animation4').click(function(){
setTimeout("animation()",2000); 
});

function animation(){
    float_balloon();
    float_away();
}

function float_balloon(){
    $(".balloon").animate({top:"-=80px"},800).animate({top:"+=100px"}, 1200);
    setTimeout("float_balloon()",2000);
}

function float_away(){
    $(".airballoon").animate({left:"80%",marginLeft:"0px"}, 3500).fadeTo(600, 0);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T16:20:10.917

1.  永远不要使用 eval，因为[eval 是 evil](https://www.google.com/search?q=javascript+eval+evil&aq=f&oq=javascript+eval+evil&aqs=chrome.0.57j0l2.3284j0&sourceid=chrome&ie=UTF-8)。只需使用匿名函数作为回调`setTimeout`：

    ```
    setTimeout(function() {
        /* do some stuff here, e.g. call animation() function */
    }, 2000); 
    ```

    它将更快、更安全、更易于阅读和维护。

2.  您正在重新定义`animation()`，这就是为什么无论您单击哪个按钮，最后定义的动画都会发生。

3.  您可以轻松地重构您的代码：

    ```
    <button class="animate" data-animation="boat">Animate boat</button>
    <button class="animate" data-animation="bike">Animate bike</button>

    ---

    var animate = {
        boat: function() { /* do boat animation here */ };
        bike: function() { /* do bike animation here */ };
    };

    $("button.animate").on("click", function() {
        var animation $(this).data("animation");

        setTimeout(function() {
            // call appropriate animation, e.g. animate.boat(), or animate.bike()
            animate[animation]();
        }, 2000);
    }); 
    ```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-03T07:52:03.240

可以使用 Promise 独立执行所有动画，然后在它们全部完成后做一些事情：

```
$.fn.deferredAnimate = function(options, duration, easing, callback) {
  var deferred = $.Deferred();

  $(this).animate(options, duration, easing, function() {
    callback && callback();
    deferred.resolve();
  });

  return deferred.promise();
}; 
```

即，这是一个轮播演示，它同时对两个不同的列表（以不同的速度）进行动画处理：

```
var PAUSE_DURATION = 1500;
var ANIMATE_DURATION1 = 1000;
var ANIMATE_DURATION2 = 2000;

var textList = $('#list1');
var imageList = $('#list2');

setTimeout(slideItem, PAUSE_DURATION);

function slideItem() {
    var currentTextLi = $('li', textList).first();
    var currentImageLi = $('li', imageList).first();

    var textPromise = currentTextLi.deferredAnimate({
        'margin-left': -375
    }, ANIMATE_DURATION1, 'easeInOutExpo', function() {
        var c = currentTextLi.remove();
        textList.append(c);
        c.css('margin-left', 0);
    });

    var imagePromise = currentImageLi.deferredAnimate({
        'margin-left': -660
    }, ANIMATE_DURATION2, 'easeInOutExpo', function() {
        var c = currentImageLi.remove();
        imageList.append(c);
        c.css('margin-left', 0);
    });

    $.when(textPromise, imagePromise).then(function() {
        //repeat the animations
        window.setTimeout(slideItem, PAUSE_DURATION);
    });
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-25T15:56:14.360

你用`function animation()`了四次。改用`function animation1()`,`function animation2()`等等。

不要忘记也进行更改`setTimeout("animation()",2000);`（`setTimeout("animation1()",2000);`等等）

# wpf - CallMethodAction：可以在 WPF 中使用吗？

> ID：16219347
> 
> 赞同：4
> 
> 时间：2013-04-25T15:52:03.017
> 
> 标签：wpf

当我`CallMethodAction`在 MVVM-WPF 中使用时，出现此错误：

> 命名空间“http://schemas.microsoft.com/expression/2010/interactions”中不存在“CallMethodAction”。

知道我在我的 xaml 中包含以下命名空间：

```
xmlns:i="http://schemas.microsoft.com/expression/2010/interactivity"
xmlns:ei="http://schemas.microsoft.com/expression/2010/interactions" 
```

如果它仅用于 SL，那么 WPF 中的等价物是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2017-03-08T15:29:03.563

`CallMethodAction`位于`http://schemas.microsoft.com/expression/2010/interactions`命名空间中。

您需要`Microsoft.Expression.Interactions.dll`在项目中添加对的引用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T17:24:38.420

我用这是 wpf 来表达惰性

```
xmlns:i="clr-namespace:System.Windows.Interactivity;assembly=System.Windows.Interactivity" 
```

确保添加对您项目的引用

然后我将它添加到一个组合框中：

```
 <i:Interaction.Triggers>
                        <i:EventTrigger EventName="SelectionChanged">
                            your binding here
                        </i:EventTrigger>
                    </i:Interaction.Triggers> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-07-18T05:10:34.723

这可能是由于链接 .dll 中存在冲突的库。从项目中删除不必要的链接。我有这些指向 Microsoft.Office.Interop 的链接。

# iphone - 如何复制 CNN iOS 应用程序下拉菜单

> ID：16219351
> 
> 赞同：3
> 
> 时间：2013-04-25T15:52:10.357
> 
> 标签：iphone, ios, objective-c

有人知道 CNN 是如何做他们的顶部下拉菜单的吗？

它看起来像一个通过触摸拖动事件调用但不确定的 UITableView。谷歌搜索了各种关键字，但无法找到任何东西。只是寻找一些关于如何复制这种行为的指导。

![在此处输入图像描述](https://i.stack.imgur.com/MwGrz.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-25T16:04:49.193

我不知道它实际上是如何完成的，但我知道我会怎么做：任何视图都可以完全或部分位于屏幕外，并由用户以通常的方式（例如滑动或平移手势识别器）拖动到屏幕上。这没什么特别的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-25T16:12:20.460

我猜他们正在做类似[https://github.com/mikefrederick/MFSideMenu的事情](https://github.com/mikefrederick/MFSideMenu)

不过，您必须进行`"MFSideMenu"`很多自定义。如果您不想在每个视图上显示此菜单，则需要`UIGestureRecognizerDelegate`在该视图上禁用。

还有类似[https://www.cocoacontrols.com/controls/pullableview](https://www.cocoacontrols.com/controls/pullableview)但您可能需要添加`UIGestureRecognizer`到此类。

# asp.net-mvc - 硬编码用户名和密码的替代方法

> ID：16219354
> 
> 赞同：1
> 
> 时间：2013-04-25T15:52:20.210
> 
> 标签：asp.net-mvc, html, security, razor

我正在使用 C# Razor 和所有很棒的东西编写一个 MVC4 应用程序。它具有完整的登录名和密码以及额外的 2 个问题，用户才能登录。

在几个月前我启用登录功能之前，这是一个梦想，我只是在我感兴趣的页面上启动应用程序，它会加载让我立即看到我的结果。

有时我会从错误的页面开始，上帝保佑我可能需要额外点击一两次才能到达正确的页面。我认为这已经够糟糕了。

现在我已经启用了登录，并且对代码进行了几次修改，它已经通过了测试部门，并进入了大坏世界。我不允许再次禁用它。

我的替代方法是对测试用户名和密码进行硬编码，并使用所需的其他默认值进行固定，然后在发布时将其删除。感谢上帝的测试......我实际上把它们硬编码了一次。这足以教会我永远不要再这样做了。

然而，我从字面上毫不夸张地开始我的应用程序，每天可能数百次（尽管感觉就像数千次），而且每次我都必须填写这个可怕的登录表单。这是非常低效的，真的占用了我很多时间。它积极鼓励我养成不良的编程习惯，即一次更改几件事然后进行测试。一条我不想开始的路。

我的问题：是否有替代这种硬编码实践的方法可以让我恢复工作效率？

请不要建议让浏览器记住细节。我试过了，问题是我的应用程序必须跨浏览器和平台兼容，这意味着它不仅必须在 Windows 浏览器（本身有足够的变化）中运行，而且还必须在平板电脑、手机甚至 lunix 和 mac 上运行。因此，依靠浏览器记住细节根本不是一种选择。

有什么建议么。

根据下面的建议，我决定探索 web/user.config 路线，这是我迄今为止的尝试，但没有奏效。

模型：

```
public class LogOnModel
{
    [Required]
    [Display(Name = "User name")]
    [StringLength(255, ErrorMessage = "The {0} must be at least {2} characters long.", MinimumLength = 8)]
    public string UserName { get; set; }

    [Required]
    [DataType(DataType.Password)]
    [Display(Name = "Password")]
    [StringLength(255, ErrorMessage = "The {0} must be at least {2} characters long.", MinimumLength = 6)]
    public string Password { get; set; }
} 
```

控制器：

```
 public ActionResult Login()
    {
        LogOnModel model = new LogOnModel(); 
        model.UserName = ConfigurationManager.AppSettings["UserName"];
        model.Password = ConfigurationManager.AppSettings["Password"];

        return View("Login");
    }

    [HttpPost]
    public ActionResult Login(LogOnModel model, string returnUrl)
    {
        model.UserName = ConfigurationManager.AppSettings["UserName"];
        model.Password = ConfigurationManager.AppSettings["Password"];
        //I am aware that this will presently overwrite the incoming model if it exists.
        //I am just trying to get something work here and I will surround it with an if afterward.

        if (ModelState.IsValid)
        {
          ... Other code here
        }
          ... Other code here (there are a variety of returns this is a long method with lots of checks
    } 
```

看法：

@model YeatsClinical.PatientPortal.Web.Models.LogOnModel

```
...Lots of other code...
@Html.TextBoxFor(x=>x.UserName,  new { @class = "m-wrap placeholder-no-fix", @placeholder="Username"})
...Lots of other code...
I didn't bother trying the password yet, I just wanted to get one thing working first. 
```

网络配置：

```
<appSettings file="user.config"> 
```

用户配置

```
<appSettings>
    <add key="UserName" value ="someone@somewhere.com"/>
    <add key="Password" value ="password"/>
</appSettings> 
```

不再有任何 web/user.config 错误或任何构建错误。它只是像以前一样加载带有占位符文本的格式良好的文本框。那么我哪里错了。再次感谢大家。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-25T15:56:12.000

将您的登录详细信息放在本地 web.config 文件中。您的代码将查找配置值，如果存在，将自动为您填写它们。您可以在部署时保留此代码 - 因为这些值不在生产中的配置文件中，所以您不必担心它在那里运行。

或者您可以将它们放在一个单独的配置文件中，例如`user.config`，并在您的主配置中引用它。您的`user.config`文件将永远不会被发布。只要确保您的部署实践没有引入此文件即可。

网络配置：

```
<configuration>
  <appSettings file="user.config">
    <!-- put your normal config values here -->
  </appSettings>
</configuration> 
```

user.config（仅限您的本地计算机 - 不在源代码管理中，也不在服务器上）

```
<appSettings>
  <add key="defaultUser" value ="someUser"/>
  <add key="defaultPassword" value ="somePassword"/>
</appSettings> 
```

另一种选择可能是使用条件编译，假设您在本地处于调试模式并以发布模式发布。

```
#if DEBUG
    PopulateTheUserCredentials();
#endif 
```

# .htaccess - 阻止访问 .htaccess 中的文件会导致服务器请求任何页面时出错？

> ID：16219355
> 
> 赞同：0
> 
> 时间：2013-04-25T15:52:21.150
> 
> 标签：.htaccess

我有一个日志文件夹，我在其中记录事件，我想将它包含在管理面板中或能够在其中搜索，但我不希望它可以在本地主机之外访问。

所以我尝试了

```
<Files /var/chroot/home/content/59/10667659/html/mylogs/log.html>
    Order Deny,Allow
    Deny from all
    Allow from 127.0.0.1
</Files> 
```

但这会导致我所有页面上出现 500 错误？

```
/var/chroot/home/content/59/10667659/html 
```

是

```
$_SERVER['DOCUMENT_ROOT']; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T19:49:47.567

`<Files>`容器不能那样工作。来自[Apache 核心文档](http://httpd.apache.org/docs/2.2/mod/core.html#files)：

> 该指令通过**filename**限制封闭指令的范围。它可与 and 指令相媲美。它应该与指令匹配。本节中给出的指令将应用于具有与指定文件名匹配的**基本名称（文件名的最后一个组成部分）的任何对象。**

所以你可以说：

```
<Files "log.html">
    Order Deny,Allow
    Deny from all
    Allow from 127.0.0.1
</Files> 
```

或者，如果您希望它仅应用于特定目录，例如 in `/mylogs/`，则在其中创建 htaccess 文件并添加上述`<Files>`容器。

# python - Python unittest 调用混淆

> ID：16219358
> 
> 赞同：3
> 
> 时间：2013-04-25T15:52:22.663
> 
> 标签：python, unit-testing

我已经编写了我的程序 MachineSettings_test.py 的单元测试，其形式如下：

```
import unittest
import MachineSettings as MS

class TestMachineSettings(unittest.TestCase):
    def setUp(self):
        [...]

    def testStringRepresentation(self):
        [...]

    def testCasDict(self):
        [...]

if __name__=="__main__":
    unittest.main() 
```

我对以下事实有点困惑：如果我跑

```
python -m unittest -v MachineSettings_test 
```

我得到输出

```
----------------------------------------------------------------------
Ran 0 tests in 0.000s

OK 
```

即 Python 无法识别单元测试模块中的测试。

但如果我只是跑

```
python MachineSettings_test.py 
```

一切正常，我得到输出

```
..
----------------------------------------------------------------------
Ran 2 tests in 0.000s

OK 
```

这让我很困惑，我在这里找不到任何类似的问题，所以我发布了它。

我（被迫）使用的 Python 版本是 2.6，但我在文档中找不到任何使这种情况变得特别的东西。

任何人的想法？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-25T15:54:57.000

从[文档](http://docs.python.org/2/library/unittest.html#command-line-interface)中：

> 在 2.7 版中更改：在早期版本中，只能运行单个测试方法，而不能运行模块或类。

您正在尝试使用 python 2.6 对整个模块进行测试。

显然，您甚至无法使用`-m unittest`python 2.6 中的单个测试方法运行。有关详细信息，请参阅此[问题](https://stackoverflow.com/questions/5136159/basic-python-unittest-testsuite-question)。

你可能想试试[鼻子](http://nose.readthedocs.org/en/latest/index.html)或[鼻子2](https://nose2.readthedocs.org/en/latest/)。

# excel - 如何删除 excel 列中的特殊“”空格？

> ID：16219362
> 
> 赞同：1
> 
> 时间：2013-04-25T15:52:32.587
> 
> 标签：excel, excel-formula, excel-2003

我在 windows XP Pro 下使用 Office 2003

我每天将 ms access 2003 数据库中的大型列表复制并粘贴到 excel 中，这样我就可以对列表执行各种功能。我现在遇到的一个问题是弄清楚如何删除数字或文本之后的空间（我认为它被称为空白，但似乎不是这样）。

```
example:

[1234     ]
[1234     ]
[1234     ]
[1234     ]
[34     ]
[12ABC     ] 
```

（请注意，如果您复制/粘贴，上面的示例将起作用。我只是在视觉上给出示例。）

在 excel 中，`=trim()`不会删除它们。此外，（搜索/替换“”并留空）不会删除它们。我还尝试了在其他情况下使用的技巧，复制/粘贴到记事本中，然后搜索/替换，但没有删除它们。这就是为什么我称这个词为特殊的。但可能有一个实际的术语——我不介意知道它的正式名称。

**我不是在 excel 中寻找自定义 =function() 来运行**。

这在每天的复制/粘贴中使用是不切实际的，因为这些直接进入其他人的 Excel 报告。我正在向其中添加我的信息，它会被不精通 excel 的其他人进一步处理。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T18:35:48.333

您是否尝试过 =clean() 函数？它删除了许多不寻常的字符。

如果您知道哪些特定的 ascii 字符很顽皮，您也可以使用 =substitute() 函数。正如评论中所建议的，它们可能是#160。

```
=SUBSTITUTE(A1,char(160),"") 
```

将适用于该实例。

希望有帮助

# ruby - 更改 ruby 中浅拷贝字符串数组的内容

> ID：16219365
> 
> 赞同：1
> 
> 时间：2013-04-25T15:52:37.883
> 
> 标签：ruby, arrays, string, shallow-copy

假设我在 ruby​​ 中创建了以下数组：

```
a = ["apple", "cherry"]
b = a.dup 
```

这里，b 是 a 的浅拷贝。所以如果我这样做：

```
a.each{|fruit| fruit << " pie"} 
```

我得到的 a 和 b 都等于 ["apple pie", "cherry pie"]。那里没问题。但是假设我改变了 b 的一个元素：

```
b[1] = "blueberry" 
```

并发出相同的“每个”命令。现在 b 是 ["apple pie", "blueberry"]，因为 a[0] 和 b[0] 是相同的字符串，但 a[1] 和 b[1] 是不同的字符串。我可以在 a 和 b 上运行命令，但是 b 是 ["apple pie pie", "blueberry pie"]，因为我已经对同一个字符串运行了两次附加操作。

有没有办法在不重复的情况下修改*a*和 b 的所有字符串。在这个简单的示例中，我可以测试子字符串“pie”，但这不适用于其他类型的更改（例如删除第一个字符）。

我尝试创建一个包含所有字符串的集合，以便每个字符串都是唯一的；但似乎集合创建复制了字符串，因此无法就地修改它们。有没有办法测试两个字符串在内存中是否相同？我已经用谷歌搜索了，但什么也没找到。

它的应用是我有很大的字符串数组，我“复制”它们来创建它们的历史。现在我想对整个历史应用更改，而不是双重应用（或三重等）更改。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T16:12:50.747

我不明白你的用例；我怀疑你让事情变得比他们需要的更复杂。

*有没有办法测试两个字符串在内存中是否相同？*

`Object#object_id`就是你要找的。

*有没有办法在不重复的情况下修改 a 和 b 的所有字符串？*

您可以保留一组并非所有的`object_id`s，类似于您已经尝试过的。您可以使用 检索字符串`ObjectSpace#_id2ref`。像这样的东西：

```
require 'set'

set = Set.new
a = ["apple", "cherry"]
b = a.dup
b[1] = "blueberry"

# Collect unique string objects
a.each{|s| set << s.object_id}
b.each{|s| set << s.object_id}

# Make pie with each unique string object
set.each{|id| ObjectSpace._id2ref(id) << " pie"}

a
# => ["apple pie", "cherry pie"]
b
# => ["apple pie", "blueberry pie"] 
```

不过，这对我来说似乎有点疯狂。同样，我认为可能有更好的方法来做你想做的事情，但根据提供的信息很难判断。

# c++ - 显式调用模板化重载运算符

> ID：16219367
> 
> 赞同：2
> 
> 时间：2013-04-25T15:52:46.863
> 
> 标签：c++, templates, casting, operator-overloading

我有一个带有重叠运算符的类。

```
class sout {
public:
  template<typename T>
  friend inline sout& operator&(sout&, T&);

  friend inline sout& operator&(sout&, std::string&);
}; 
```

现在，如果我在 sting.operator& 中使用模板化的 operator& 我会得到一个错误：

代码：

```
sout& operator&(sout& s, std::string& str) {
  uint16_t ts = static_cast<uint16_t>(str.size());  // this is ok
  s & ts; // is also ok

  s & static_cast<uint16_t>(str.size());  // but this is wrong

  // ...
  return s;
} 
```

错误：

```
Error:C2679: binary '&' : no operator found which takes a right-hand operand of type 'uint16_t' (or there is no acceptable conversion)
could be 'sout &operator &<uint16_t>(sout &,T &)'
with
[
    T=uint16_t
]
or       'sout &operator &(sout &,std::string &)'
while trying to match the argument list '(sout, uint16_t)' 
```

比我尝试通过以下方式使用显式运算符和模板类型：

```
operator&<uint16_t>(s, ts);  // this also ig ok 
```

但如果我把它结合起来，我又会出错：

```
operator&<uint16_t>(s, static_cast<uint16_t>(str.size()) 
```

错误：

```
'operator &' : cannot convert parameter 2 from 'uint16_t' to 'uint16_t &' 
```

我也试过 reinterpret_cast。

我知道 operator& 期望引用 uint16_t 并且 size() 函数返回 size_t (int) 而不是引用。有可能在一行中做到这一点吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-25T15:55:38.403

问题是返回的值`size()`是临时的，而临时的是右值；但是，您的函数接受*左值*引用。下面的代码片段澄清了这个问题：

```
int foo() { return 42; }
void bar(int& i) { i++; } // Parameter is an lvalue reference to non-const

int main()
{
    bar(foo()); // ERROR! Passing an rvalue to bar()
    bar(1729); // ERROR! Passing an rvalue to bar()

    int i = 42;
    bar(i); // OK! Passing an lvalue to bar()
} 
```

左值引用不能绑定到右值，除非它们是对`const`.

```
template<typename T>
friend inline sout& operator&(sout&, T const&);
//                                     ^^^^^ 
```

如果您`operator&`应该修改右手参数，以便引用不能是对 的引用`const`，则在 C++11 中您可以使用右值引用（由于 C++11 的引用折叠规则，这也将允许绑定到左值):

```
template<typename T>
friend inline sout& operator&(sout&, T&&);
//                                   ^^^ 
```

# java - 从 java 应用程序中获取用户名（windows）

> ID：16219375
> 
> 赞同：1
> 
> 时间：2013-04-25T15:53:11.573
> 
> 标签：java, windows, networking, windows-xp, user-management

**问题：**

我正在使用以下凭据登录到虚拟机 (RDC)：

用户是名为 teldept 的域组的一部分

> 用户：147852 密码：helloworld

当我尝试从 java 应用程序获取用户详细信息时，它给了我：147852

但是当我点击顶部的开始菜单时，我可以看到我的名字显示。

这是怎么做到的？我想从 java 应用程序访问这个名称

我使用以下代码段：

> System.getProperty("user.name");

**上面的片段给我的任何东西都是正确的，因为它是甲骨文文档。我正在使用 ID 登录：147852 和上面的代码片段给了我 14852 但是在 Windows 中这个 ID：147852 是如何映射到我的名字的，所以只有在 XP 的开始菜单中我才会显示我的名字而不是 147852。我们需要知道如何在 ID 和 Name 之间完成此映射。我猜它与域或一些我不擅长的网络逻辑有关。**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-25T15:57:53.263

XP 开始菜单上显示的名称不是登录名。它是与登录名相对应的全名。不确定您的登录名是本地登录名还是域登录名。如果是本地登录，请转到管理工具 -> 计算机管理 -> 用户和组 -> 在此处针对您的用户名 (147852)，您将找到一个全名。如果您的登录名是域登录名，您可以类似地在 Active Directory 中查找您的姓名 - 或在其他地方搜索它。

这是非常特定于操作系统的，Java 找不到。您将需要使用 JNI 和 Windows API - 调用`GetUserNameEx`或`NetUserGetInfo`取决于用户类型来执行此操作。

如果您只想获取您的登录名 (147852)，调用`com.sun.security.auth.module.NTSystem().getName`是比使用更好的方法`System.getProperty("user.name")`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-25T15:55:17.013

从[这个 SO question](https://stackoverflow.com/questions/473446/java-current-machine-name-and-logged-in-user)中，您可以使用：

```
System.getProperty("user.name"); 
```

返回当前登录的用户。这将返回用户名字符串。我相信这是您要的，但是您的问题还不清楚。

# grails - 使用 grails spring security 插件登录时传递额外的参数

> ID：16219378
> 
> 赞同：4
> 
> 时间：2013-04-25T15:53:25.130
> 
> 标签：grails, spring-security

我正在为带有 grails 的移动应用程序编写 Web 服务。我使用 spring security core 登录我调用**/** j_spring_security_check ，并发送**j_username**，**j_password**

然后在登录控制器的 Ajax Success 方法中，我返回 sessionId

```
springSecurityService.authentication.details.sessionId 
```

登录时如何传递额外的参数

# php - preg_match 只返回“数组”？

> ID：16219379
> 
> 赞同：1
> 
> 时间：2013-04-25T15:53:25.510
> 
> 标签：php

当使用此代码从[http://www.ea.com/uk/football/profile/Calfreezy/360](http://www.ea.com/uk/football/profile/Calfreezy/360)获取数据时，代码只是回显“数组”一词

这是我目前使用的代码：

```
<?php

$content = file_get_contents("http://www.ea.com/uk/football/profile/Calfreezy/360");

preg_match('#<div class="stat">Titles Won<span>([0-9\.]*)<span class="sprite13 goalImage cup"></span></span>#', $content, $titleswon);

echo 'Titles Won: '.$titleswon.'';

?> 
```

这是我试图从 url 中提取的 HTML：

```
<div class="stat">
                Titles Won                <span>0<span class="sprite13 goalImage cup"></span></span>
            </div> 
```

这只是返回 Titles won: Array

如果工作它应该返回 Titles won: 0

我做错了什么，谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T15:55:46.013

您正在打印整个匹配数组，而不是从中选择所需的索引并打印它们。

请参阅[文档](http://php.net/preg_match)

> 如果提供了匹配项，则将其填充为搜索结果。`$matches[0]`将包含与完整模式匹配的`$matches[1]`文本，将具有与第一个捕获的带括号的子模式匹配的文本，依此类推。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-25T15:55:53.553

preg_match() 产生一个匹配数组。如果你在字符串上下文中打印出一个数组，你会得到`Array`文本。例如

```
$arr = array('foo' => 'bar');

echo $arr; // prints "Array"
echo $arr['foo']; // prints "bar" 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-25T15:56:12.083

[`preg_match`](http://php.net/manual/en/function.preg-match.php)[从文档](http://php.net/manual/en/function.preg-match.php)中可以看出，返回一个数组。

如果您想查看数组的所有内容，请使用

```
var_dump( $titleswon ); 
```

如果您只需要匹配的，则必须解决该特定部分。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-25T15:56:05.647

第三个参数 preg_match 通过引用传递，并将包含一个数组，每个捕获组中都有匹配项。您正在使用两个“组”。整场比赛，`([0-9\.]*)`这将是第二场。所以我希望你需要这个：

```
echo 'Titles Won: '.$titleswon[1].''; // note the array is indexed by 0 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-25T15:54:31.603

最好的方法是：

```
if (preg_match('#<div class="stat">Titles Won<span>([0-9\.]*)<span class="sprite13 goalImage cup"></span></span>#', $content, $titleswon)) {
   echo 'Titles Won: '.$titleswon[1].'';
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-25T15:56:49.130

如果您查看 preg_match 文档： http: [//php.net/manual/en/function.preg-match.php](http://php.net/manual/en/function.preg-match.php)

可以看到，$match 参数中实际上是一个数组，$match[0] 包含整个匹配项，而连续的数组元素包含子查询。

如果您这样做，`var_dump($titleswon)`或者`print_r($titleswon)`您将看到全部信息，那么您可以访问所需的信息，在您的情况下，它将是`$titleswon[1]`

# css - 将动画回退到位置

> ID：16219380
> 
> 赞同：2
> 
> 时间：2013-04-25T15:53:26.147
> 
> 标签：css, css-transitions

目前我正在使用带有`position: absolute`for 转换的元素，但我应该使用它`translate`。`translate`不可用时如何实现回退？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T20:22:01.207

在没有任何其他信息的情况下，我假设您想`translate`在可用时使用，而`position: absolute`在不可用时使用。我找到了一篇优秀的文章，列出了优缺点，可能会解决你的一些问题。

[http://paulirish.com/2012/why-moving-elements-with-translate-is-better-than-posabs-topleft/](http://paulirish.com/2012/why-moving-elements-with-translate-is-better-than-posabs-topleft/)

展望未来，您可能需要研究 modernizr 库，因为它提供了很棒的工具，可以让您的尖端功能在旧版浏览器上运行良好。我在下面发布了指向 CSS 文档的链接。

[http://modernizr.com/docs/#features-css](http://modernizr.com/docs/#features-css)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-26T17:33:50.647

最后，我正在做的是检查 JS 是否支持 CSS3 功能。如果没有，我已经`.fallback`在正文中附加了一个类，这样我就可以制定单独的规则作为后备。我添加了如下内容：

```
#animdiv{
    transform: translate(0,100px);
}
.fallback #animdiv{
    top: 100px;
} 
```

# c# - 使用 VS blend 使图像从屏幕底部飞起来的动画

> ID：16219383
> 
> 赞同：1
> 
> 时间：2013-04-25T15:53:33.663
> 
> 标签：c#, animation, visual-studio-2012, storyboard, blend

我正在创建一个应用程序，允许用户单击图像，然后它们将转换为其他内容，执行此操作的代码如下：

```
 private void Image_Tapped(object sender, TappedRoutedEventArgs e)
        {
            BitmapImage bitmap = new BitmapImage(new Uri("ms-appx:///Assets/smallImage.png")); 
            imageHolder.Source = bitmap;
            e.Handled = true;
        } 
```

现在困难的部分是我必须让这些预先转换的图像飞到屏幕上，这样用户就可以在它们掉下来之前急于点击它们。我想我需要创建故事板并添加这些效果，如果这是正确的词，但我将如何在混合中进行呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-17T12:58:38.820

因此，为了从另一个图像中飞出，我为每个图像创建了单独的故事板，并记录了它们在我想要的任何方向上飞来飞去，只要我需要。所以每次3秒，依此类推。一旦我掌握了窍门，真的很容易，但希望为开发人员提供有关混合的新教程！

# wordpress - Wordpress 获取帖子范围

> ID：16219388
> 
> 赞同：0
> 
> 时间：2013-04-25T15:53:50.110
> 
> 标签：wordpress, pagination

使用 wp_query，我如何获得一系列帖子？当我选择一个类别时，我希望获得第 6 个帖子，然后在同一页面上获得第 7 个帖子，直到第 13 个帖子。

如果我可以使用普通查询来做到这一点，那将很容易。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-25T16:10:38.790

好的，我找到了答案。我一直在寻找“wp_query range”但没有找到任何东西，但后来我开始查看“offset”并找到了很多信息。没想到这么早。

对于其他寻找[范围](https://codex.wordpress.org/Class_Reference/WP_Query#Pagination_Parameters)的人：

```
$termId = $wp_query->get_queried_object_id();

$args = array(
  'cat' => $termId,
  'order' => 'DESC',
  'posts_per_page' => 6,
  'offset' => 6
);

$category_posts = new WP_Query($args);
if($category_posts->have_posts()) :  while($category_posts->have_posts()) :  $category_posts->the_post(); 
```

# python - 并行下载多个文件？（Linux/Python？）

> ID：16219389
> 
> 赞同：0
> 
> 时间：2013-04-25T15:53:52.023
> 
> 标签：python, parallel-processing, download

我有一个很大的远程文件位置和本地路径列表，我希望它们结束。每个文件都很小，但数量很多。我在 Python 中生成这个列表。

我想在解压缩和处理它们之前尽快（并行）下载所有这些文件。什么是最适合我使用的库或 linux 命令行实用程序？我尝试使用 multiprocessing.pool 来实现这一点，但这不适用于 FTP 库。

我查看了 pycurl，这似乎是我想要的，但我无法让它在 Windows 7 x64 上运行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T15:55:44.757

试试[wget](http://www.gnu.org/software/wget/)，一个安装在大多数 Linux 发行版上的命令行实用程序，也可以通过Windows上的[Cygwin获得。](http://www.cygwin.com/)

你也可以看看[Scrapy](http://scrapy.org/)，它是一个用 Python 编写的库/框架。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T15:59:32.587

我通常`pscp`用来做这样的事情，然后使用`subprocess.Popen`

例如：

```
pscp_command = '''"c:\program files\putty\pscp.exe" -pw <pwd> -p -scp -unsafe <file location on my   linux machine including machine name and login, can use wildcards here> <where you want the files to go on a windows machine>'''
p = subprocess.Popen( pscp_command, stdout=subprocess.PIPE, stderr=subprocess.PIPE )
stdout, stderr = p.communicate()
p.wait() 
```

当然我假设 linux --> windows

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-25T17:46:25.603

如果您使用模块中的`Pool`对象，则应处理 FTP。[`multiprocessing`](http://docs.python.org/2/library/multiprocessing.html)`urllib2`

```
results = {}
def get_url(url):
    try:
        res = urllib2.urlopen(url)
        # url should start with 'ftp:'
        results[url] = res.read()
    except Exception:
        # add more meaningful exception handling if you need it. Eg, retry once etc. 
        results[url] = None
pool = Pool(processes=num_processes)
result = pool.map_async(get_url, url_list)
pool.close()
pool.join() 
```

当然，生成进程会产生一些严重的开销。[如果您可以使用像twisted](http://twistedmatrix.com/)这样的第 3 部分模块，非阻塞请求几乎肯定会更快

开销是否是一个严重的问题将取决于每个文件的下载时间和网络延迟的相对大小。

您可以尝试使用 python 线程而不是进程来实现它，但它会变得有点棘手。[请参阅此问题](https://stackoverflow.com/questions/5825151/are-urllib2-and-httplib-thread-safe)的答案以安全地将 urllib2 与线程一起使用。您还需要使用`multiprocessing.pool.ThreadPool`而不是常规`Pool`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-11-18T00:29:36.200

知道这是一篇旧文章，但有一个完美的 linux 实用程序。如果您要从远程主机传输文件，那就`lftp`太好了！我主要使用它来快速将内容推送到我的 ftp 服务器，但它也适用于使用`mirror`命令拉取内容。它还可以选择按照您的需要并行复制用户定义的文件数量。如果您想将一些文件从远程路径复制到本地路径，您的命令行将如下所示；

```
lftp
open ftp://user:password@ftp.site.com
cd some/remote/path
lcd some/local/path
mirror --reverse --parallel=2 
```

但是要非常小心这个命令，就像其他镜像命令一样，如果你搞砸了，你会删除文件。

有关`lftp`我访问过此站点的更多选项或文档[http://lftp.yar.ru/lftp-man.html](http://lftp.yar.ru/lftp-man.html)

# html - CSS下拉菜单有问题

> ID：16219390
> 
> 赞同：0
> 
> 时间：2013-04-25T15:53:53.570
> 
> 标签：html, css, drop-down-menu, menu

在尝试解决此问题时遇到了很大的麻烦，我正在尝试创建一个下拉菜单，但它没有正确显示它不仅列出项目的位置关闭（它们以某种方式显示在“联系人”部分下而不是投资组合），我在悬停时只从菜单中看到一个项目（最后一个项目：网站设计）。这是我到目前为止编写的代码，我不确定要修复什么（尝试了很多次但失败了）。所以请看一下，如果我错过了什么或在某些方面犯了错误，请告诉我。

提前致谢！

HTML 代码：

```
 <div class="nav2">
<ul class="special">
    <li><a href="#">Home</a>
    </li>
    <li><a href="#">About</a>
    </li>
    <li><a href="#">Portfolio</a>

        <ul class="special">
            <li><a href="#">Cinematography</a>
            </li>
            <li><a href="#">Sound Design</a>
            </li>
            <li><a href="#">Photoshop Design</a>
            </li>
            <li><a href="#">Website Design</a>
            </li>
        </ul>
    </li>
    <li><a href="#">Services</a>
    </li>
    <li><a href="#">Contact</a>
    </li>
</ul> 
```

CSS 代码：

```
 .nav2 {
    height: 30px;
    background-color: #333333;
    color: #DBDBDB;
    font-family: Arial, Helvetica, sans-serif;
    text-align: center;
    padding-top: 5px;
    font-size: 14px;
    padding-bottom: 5px;
    list-style: none;
}
ul.special {
    font-family: Arial, Verdana;
    font-size: 14px;
    margin: 0;
    padding: 0px 0px 0px 300px;
    list-style: none;
}
ul.special li {
    display: block;
    position: inherit;
    float: left;
}
li ul.special {
    display: none;
}
ul.special li a {
    display: block;
    text-decoration: none;
    color: #ffffff;
    border-top: 1px solid #ffffff;
    padding: 5px 15px 5px 15px;
    background: #333333;
    margin-left: 1px;
    white-space: nowrap;
}
ul.special li a:hover {
    background: #333333;
}
li:hover ul.special {
    display: block;
    position: fixed;
}
li:hover li {
    float: none;
    font-size: 11px;
}
li:hover a {
    background: #3b3b3b;
}
li:hover li a:hover {
    background: #1e7c9a;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T16:33:40.697

你可以用最少的`CSS`

尝试这个 ：

```
<div class="nav">
    <ul>
        <li><a href="#">Home</a></li>  
        <li><a href="#">About</a></li>  
        <li><a href="#">Portfolio</a>
            <ul>
                <li><a href="#">Cinematography</a></li>
                <li><a href="#">Sound Design</a></li>
                <li><a href="#">Photoshop Design</a></li> 
                <li><a href="#">Website Design</a></li> 
            </ul>
        </li>
        <li><a href="#">Services</a></li>  
        <li><a href="#">Contact</a></li>
    </ul>
</div> 
```

**CSS：**

```
.nav {
   background: #333333;
   text-align: center;    
}

.nav ul ul {
    display: none;
}

.nav ul li:hover > ul {
    display: block;
}

.nav ul {
    padding: 0 20px;
    list-style: none;
    position: relative;
    display: inline-table;
    font-family: Arial, Verdana;
    font-size: 14px;
}

.nav ul li {
    float: left;
    margin: 0 3px 0 0;
}

.nav ul li a {
    display: block; 
    padding: 5px 20px;
    color: #fff; 
    text-decoration: none;
    border-top: 1px solid #ffffff;
    padding: 5px 15px 5px 15px;
    background: #333333;
}

.nav ul ul {
    padding: 0;
    position: absolute; 
    top: 100%;
}

.nav ul ul li {
    float: none; 
    position: relative;
}

 li:hover li a:hover {
     background: #1e7c9a;
 } 
```

我从`ul`主 div 中删除了该类并添加了一个类。

这是工作[小提琴](http://jsfiddle.net/Cgay8/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T16:05:43.207

这是修复： [演示](http://jsfiddle.net/eRUeS/)

```
 .nav2 {
     height: 30px;
     background-color: #333333;
     color: #DBDBDB;
     font-family: Arial, Helvetica, sans-serif;
     text-align: center;
     padding-top: 5px;
     font-size: 14px;
     padding-bottom: 5px;
     list-style: none;
 }
 ul.special {
     font-family: Arial, Verdana;
     font-size: 14px;
     margin: 0;
     padding:0;
     list-style: none;
    text-align:center;
 }
 ul.special > li ul {
     position: absolute;
    text-align:left;
 }
ul.special > li ul li{
    display:block;
}
 ul.special li {
     display: block;
     position: relative;
     display:inline-block;
 }
 li ul.special {
     display: none;
 }
 ul.special li a {
     display: block;
     text-decoration: none;
     color: #ffffff;
     border-top: 1px solid #ffffff;
     padding: 5px 15px 5px 15px;
     background: #333333;
     margin-left: 1px;
     white-space: nowrap;
 }
 ul.special li a:hover {
     background: #333333;
 }
 li:hover ul.special {
     display: block;
 }
 li:hover li {
     float: none;
     font-size: 11px;
 }
 li:hover a {
     background: #3b3b3b;
 }
 li:hover li a:hover {
     background: #1e7c9a;
 } 
```

变化：

编辑：

```
 ul.special {
    text-align:center;
 } 
```

添加：

```
 ul.special > li ul {
     position: absolute;
    text-align:left;
 }
ul.special > li ul li{
    display:block;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-25T16:12:22.460

只需在 css 中添加两行：

```
 li:hover ul.special {
           display: block;
           position: fixed;
           padding: 0px;  /* first one */
 }
 li:hover li{
           float: none;
           font-size: 11px;
           position:relative; /* second */
 } 
```

# visual-studio-2010 - 如何使用 Visual Studio 2012 使用 XSLT 分析器获取性能数字

> ID：16219391
> 
> 赞同：0
> 
> 时间：2013-04-25T15:53:55.187
> 
> 标签：visual-studio-2010, visual-studio, visual-studio-2012

我打算在带有 xslt-Profiler 的 Visual Studio-2012 中使用 xslt 2.0 来获取性能数字。但是我得到`System.Xml.Xsl.XslTransformException: 'result-document' is not a recognized extension element`.

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T16:35:49.003

Microsoft`XslCompiledTransform`是 XSLT 1.0 处理器。有关第三方的 XSLT 2.0 处理器，请参阅[https://stackoverflow.com/tags/xslt-2.0/info 。](https://stackoverflow.com/tags/xslt-2.0/info)

# ffmpeg - RGB24图像序列的数学无损编码和解码

> ID：16219392
> 
> 赞同：0
> 
> 时间：2013-04-25T15:54:02.407
> 
> 标签：ffmpeg, video-processing, codec, video-encoding

我正在尝试将 RGB24 图像序列编码为数学（**不仅仅是视觉上**）无损视频。在许多在线论坛上都建议使用 huffyuv，所以我尝试了以下方法。

```
ffmpeg -i frames\%06d.png  -vcodec huffyuv test.avi 
```

然后使用 ffmpeg 再次将生成的视频解码为帧

```
ffmpeg -i test.avi outframes\%06d.png 
```

[但是，输入和输出帧并不像这里](http://en.wikipedia.org/wiki/Huffyuv)的 huffyuv 所承诺的那样逐位相同。知道我怎么能做到这一点吗？我的最终目标是使用[OpenCV](http://opencv.willowgarage.com/wiki/)读取视频文件，但一旦获得无损编码的视频文件，我愿意稍后跨过那座桥。

[这个 SO question](https://stackoverflow.com/questions/6701805/h264-lossless-coding)提到了获得无损 h264 avi 的尝试，并且响应摘要似乎表明 h264 无法完全完成无损编码。

再次强调，**我对逐位相同的编码感兴趣，而不仅仅是视觉上的相似**。大文件大小是可以接受的，因为大的压缩/解压缩时间也是可以接受的。

# design-patterns - 调解员作为单身人士

> ID：16219394
> 
> 赞同：2
> 
> 时间：2013-04-25T15:54:04.183
> 
> 标签：design-patterns, singleton, mediator

我正在做一个关于 GRAPS 和设计模式的学校项目。它基本上是一个带有网格的游戏，对象和玩家都可以在上面移动。我正在考虑使用调解器来确定物体应该降落的确切位置。

每个同事（在这种情况下是每个项目和网格）都应该知道它的 Mediator 对象。(Design Patterns, Gamma et al.) 正因为如此，我想知道让这个中介器成为单例是否会被认为是一个好的设计选择。中介者是完全无状态的，并且对于每个对象都是相同的，从而满足单例模式规定的适用性要求。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-20T08:47:11.923

我知道已经晚了，但请检查以下调解器实施......

```
public sealed class Mediator
{
    private static Mediator instance = null;
    private volatile object locker = new object();
    private MultiDictionary<ViewModelMessages, Action<Object>> internalList =
        new MultiDictionary<ViewModelMessages, Action<object>>();

    #region Constructors.
    /// <summary>
    /// Internal constructor.
    /// </summary>
    private Mediator() { }

    /// <summary>
    /// Static constructor.
    /// </summary>
    static Mediator() { }
    #endregion

    #region Properties.
    /// <summary>
    /// Instantiate the singleton.
    /// </summary>
    public static Mediator Instance
    {
        get
        {
            if (instance == null)
                instance = new Mediator();
            return instance;
        }
    }
    #endregion

    #region Public Methods.
    /// <summary>
    /// Registers a Colleague to a specific message.
    /// </summary>
    /// <param name="callback">The callback to use 
    /// when the message it seen.</param>
    /// <param name="message">The message to 
    /// register to.</param>
    public void Register(Action<Object> callback, ViewModelMessages message)
    {
        internalList.AddValue(message, callback);
    }

    /// <summary>
    /// Notify all colleagues that are registed to the 
    /// specific message.
    /// </summary>
    /// <param name="message">The message for the notify by.</param>
    /// <param name="args">The arguments for the message.</param>
    public void NotifyColleagues(ViewModelMessages message, object args)
    {
        if (internalList.ContainsKey(message))
        {
            // forward the message to all listeners.
            foreach (Action<object> callback in internalList[message])
                callback(args);
        }
    }
    #endregion
} 
```

此类使用 a`Dictionary<[enum], Action<T>>`进行调解。这门课是我修改的，但最初是从[这里](http://www.codeproject.com/Articles/35277/MVVM-Mediator-Pattern?msg=4661709#xx4661709xx)取来的。它说 MVVM，但没有理由不能在其他实现中工作。

这是一个单例调解器，可以如链接文章中所示使用。

我希望这会有所帮助，并对迟到的回复感到抱歉。

# linux - 在linux的两个不同文件中做数学

> ID：16219395
> 
> 赞同：0
> 
> 时间：2013-04-25T15:54:05.350
> 
> 标签：linux, awk

我有两个数据文件，每个文件都有 3 列。我如何将这两个文件中第三列中的相应元素分开，并将其写入linux或awk中的另一个文件中。

```
Experiment Replica Mean
General0 0 408.5
General0 1 461.162
General0 2 428.23
General0 3 373.771
General0 4 396.243

Experiment Replica Mean
General0 0 124.674
General0 1 142.017
General0 2 145.206
General0 3 118.493
General0 4 126.985

Experiment Replica Mean
General0 0 124.674 / 408.5
General0 1 
General0 2 
General0 3 
General0 4 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-25T16:07:34.327

```
awk 'FNR==NR{a[$1,$2]=$3;next}FNR==1{print;next}{print $1,$2,$3/a[$1,$2]}' f1 f2
Experiment Replica Mean
General0 0 0.3052
General0 1 0.307955
General0 2 0.339084
General0 3 0.31702
General0 4 0.320473 
```

提示：`column -t`是将输出格式化为表格的好工具：

```
awk .... | column -t
Experiment  Replica  Mean
General0    0        0.3052
General0    1        0.307955
General0    2        0.339084
General0    3        0.31702
General0    4        0.320473 
```

**解释：**

```
FNR==NR {            # FNR==NR is only true in the first file 
    a[$1,$2]=$3      # Build array, keys are field 1 and 2, value is field 3
    next             # Skip to the next line in the file
}
FNR==1 {             # If we are on the first line in the second file
    print            # Print the line
    next             # Go grab the next line
}
{
    x=$3/a[$1,$2]    # Do the math (the value of a[$1,$2] is $3 from file1)
    print $1,$2,x    # print the output
} 
```

要以这种形式运行脚本，请将其保存到文件`script.awk`并执行`awk -f script.awk f1 f2`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T16:14:55.437

假设相应的记录出现在两个文件中的相同位置，则可以将文件粘贴在一起

```
paste file1.txt file2.txt | 
awk '/Mean/{print($1, $2, $3)} ! /Mean/ {print($1, $2, $6/$3)}'

Experiment Replica Mean
General0 0 0.3052
General0 1 0.307955
General0 2 0.339084
General0 3 0.31702
General0 4 0.320473 
```

这是 sudo_O 的上述经典版本：

```
paste file1.txt file2.txt | awk '{print $1,$2,/Mean/?$3:$6/$3}' 
```

# iis-6 - Global.asax 在安装 aspnet_regbrowsers.exe 实用程序后停止执行

> ID：16219400
> 
> 赞同：0
> 
> 时间：2013-04-25T15:54:13.533
> 
> 标签：iis-6, global-asax

运行“aspnet_regbrowsers.exe -i”实用程序后，当站点部署在 IIS 6 上时，我的 Global.asax 文件停止工作（在开发环境中一切正常）。Application_Start 和 Aplication_End 事件未触发。这是一个与相同问题有关的问题：[Global.asax 事件未在 IIS 6 中触发](https://stackoverflow.com/questions/15503057/global-asax-events-not-firing-in-iis-6) 我使用 aspnet_regbrowsers 实用程序使 ASP.NET 2.0 能够识别现代浏览器，例如 Chrome。是否可以同时安装： Global.asax 执行和 aspnet_regborwsers 安装？如何？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-11T03:09:00.580

我通过从机器级浏览器定义移动到位于 App_Browsers 文件夹中的应用程序级浏览器定义解决了这个问题。我必须从 .net 4.0 ( [http://aspnet.codeplex.com/releases/view/41420](http://aspnet.codeplex.com/releases/view/41420) ) 修改一些 *.browser 文件，以便它们在放入 App_Browsers 文件夹后编译。

# perl - 如何通过方法返回的引用将哈希元素插入到字符串中？

> ID：16219401
> 
> 赞同：5
> 
> 时间：2013-04-25T15:54:16.140
> 
> 标签：perl, hash, reference

我想插入对字符串的哈希引用，但这种方法不起作用。如何插值`$self->Test->{text}`？

```
# $self->Test->{text} contains "test 123 ok"
print "Value is: $self->Test->{text} \n";   # but not working 
```

输出：

```
Test=HASH(0x2948498)->Test->{text} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-25T15:59:03.010

方法调用不会在双引号内插入，因此您最终会得到字符串化引用，后跟`->Test->{text}`.

`print`简单的方法是利用参数列表这一事实：

```
print "Value is: ", $self->Test->{text}, "\n"; 
```

您还可以使用串联：

```
print "Value is: " . $self->Test->{text} . "\n"; 
```

你也可以使用久经考验的`printf`

```
printf "Value is %s\n", $self->Test->{text}; 
```

或者你可以使用这个愚蠢的技巧：

```
print "Value is: @{ [ $self->Test->{text} ] }\n"; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2019-05-09T06:16:42.930

请参阅[https://perldoc.perl.org/perlfaq4.html#How-do-I-expand-function-calls-in-a-string%3F](https://perldoc.perl.org/perlfaq4.html#How-do-I-expand-function-calls-in-a-string%3F)

对于您的示例，我认为最佳匹配形式是：

```
print "Value is: ${ \$self->Test->{text} } \n"; 
```

问题是插值的附加值？它应该比连接更快，但基于[http://perl.apache.org/docs/1.0/guide/performance.html#Interpolation__Concatenation_or_List](http://perl.apache.org/docs/1.0/guide/performance.html#Interpolation__Concatenation_or_List)差异非常小，在这个特定的打印上下文中，最快的方法是：

```
print "Value is: ", $self->Test->{text}, " \n"; 
```

# image - 检测两个图像的重叠行的算法

> ID：16219402
> 
> 赞同：5
> 
> 时间：2013-04-25T15:54:16.790
> 
> 标签：image, algorithm, image-processing

假设我有 2 个图像 A 和 B，如下所示。

![在此处输入图像描述](https://i.stack.imgur.com/A0sYH.jpg)

请注意，对于像素行，A 的底部与 B 的顶部重叠`n`，由两个红色矩形表示。A 和 B 具有相同的列数，但*可能*具有不同的行数。

两个问题：

*   给定A和B，如何`n`有效地确定？
*   如果 B 以某种方式发生更改，使其 30%-50% 的像素被完全替换（例如，想象显示投票/答案/视图数的左上角区域被广告横幅替换）。如何确定`n`？

如果有人可以指出一种算法或更好的任何语言（首选 C/C++、C#、Java 和 JavaScript）的实现，我们将不胜感激。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-26T04:49:44.217

如果我理解正确，您可能想查看两幅图像灰度版本的[标准化互相关](http://en.wikipedia.org/wiki/Cross_correlation)。如果您有大图像或大重叠区域，则使用图像（或重叠区域）的 FFT 在频域中最有效地完成此操作，称为[相位相关](http://en.wikipedia.org/wiki/Phase_correlation)。

在您的情况下，我将采取的基本步骤如下：

1.  提取第一张图像的下半部分和第二张图像的上半部分。
2.  将两个图像块都转换为灰度。
3.  对每个图像块执行 FFT（这里有一些与窗口和填充有关的细节）。
4.  计算两个 FFT 的复共轭（与空间域中的相关性相同）。
5.  对结果进行逆 FFT。
6.  找到上面的峰值以获得最佳对齐两个图像的 XY 偏移。

找到顶部和底部图像块之间的相对偏移后，您可以根据需要轻松计算*n*。

如果您想进行实验而不必从头开始编写上述代码，OpenCV 有许多模板匹配功能，您可以轻松尝试。[有关详细信息，请参见此处。](http://docs.opencv.org/doc/tutorials/imgproc/histograms/template_matching/template_matching.html)

如果任一图像的一部分已被更改 - 例如通过横幅广告 - 上述过程仍然给出最佳匹配，并且您在步骤 6 中找到的峰值幅度表明匹配“置信度” - 因此您可以获得大致了解这两个领域的相似程度。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-12-07T13:04:10.863

我在 ImageMagick 上做了一些小游戏。这是我所做的动画，解释和代码如下。

![在此处输入图像描述](https://i.stack.imgur.com/Vd4Mz.gif)

首先，我抓取了几个 StackOverflow 页面，使用`webkit2png`、调用它们`a.png`和`b.png`.

然后我从左上角裁剪了一个矩形`b.png`和一个宽度相同的列，但全高`a.png`

这给了我这个：

![在此处输入图像描述](https://i.stack.imgur.com/8JGsK.png)

还有这个

![在此处输入图像描述](https://i.stack.imgur.com/yQSit.png)

我现在将第二页的较小矩形覆盖到第一页的条带底部。然后我通过从另一个减去一个来计算两个图像之间的差异，并注意当差异为零时，图片必须相同，并且输出图像将是黑色的，所以我找到了它们重叠的点。

这是代码：

```
#!/bin/bash
# Grab page 2 as "A" and page 3 as "B"
# webkit2png -F -o A http://stackoverflow.com/questions?page=2&sort=newest
# webkit2png -F -o B http://stackoverflow.com/questions?page=3&sort=newest

BLOBH=256  # blob height
BLOBW=256  # blob width

# Get height of x.png
XHEIGHT=$(identify -format "%h" x.png)

# Crop a column 256 pixels out of a.png that doesn't contain adverts or junk, into x.png
convert a.png -crop ${BLOBW}x+0+0 x.png

# Crop a rectangle 256x256 pixels out of top left corner of b.png, into y.png
convert b.png -crop ${BLOBW}x${BLOBH}+0+0 y.png

# Now slide y.png up across x.png, starting at the bottom of x.png
# ... differencing the two images as we go
# ... stop when the difference is nothing, i.e. they are the same and difference is black image
lines=0
while :; do
   OFFSET=$((XHEIGHT-BLOBH-1-lines))
   if [ $OFFSET -lt 0 ]; then exit; fi
   FN=$(printf "out-%04d.png" $lines)
   diff=$(convert x.png -crop ${BLOBW}x${BLOBH}+0+${OFFSET} +repage \
           y.png \
           -fuzz 5% -compose difference -composite +write $FN \
           \( +clone -evaluate set 0 \) -metric AE -compare -format "%[distortion]" info:)
   echo $diff:$lines
   ((lines++))
done
n=$((BLOBH+lines)) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-26T06:05:00.523

FFT 解决方案可能比您希望的要复杂。对于一般问题，这可能是唯一可靠的方法。

对于一个简单的解决方案，您需要开始做出假设。例如，你能保证图像的列是对齐的（除非注意到的变化）？这使您可以沿着@nm 建议的路径前进

你能把图像切成垂直条，如果有足够比例的条匹配，则考虑一行匹配？

[如果我们需要对此保持稳健，可以重做一些具有不同列偏移的通道。]

这给出了类似的东西：

```
class Image
{
public:
    virtual ~Image() {}
    typedef int Pixel;
    virtual Pixel* getRow(int rowId) const = 0;
    virtual int getWidth() const = 0;
    virtual int getHeight() const = 0;
};

class Analyser
{
    Analyser(const Image& a, const Image& b)
        : a_(a), b_(b) {}
    typedef Image::Pixel* Section;
    static const int numStrips = 16;
    struct StripId
    {
        StripId(int r = 0, int c = 0)
            : row_(r), strip_(c)
        {}
        int row_;
        int strip_;
    };
    typedef std::unordered_map<unsigned, StripId> StripTable;
    int numberOfOverlappingRows()
    {
        int commonWidth = std::min(a_.getWidth(), b_.getWidth());
        int stripWidth = commonWidth/numStrips;
        StripTable aHash;
        createStripTable(aHash, a_, stripWidth);
        StripTable bHash;
        createStripTable(bHash, b_, stripWidth);
        // This is the position that the bottom row of A appears in B.
        int bottomOfA = 0;
        bool canFindBottomOfAInB = canFindLine(a_.getRow(a_.getHeight() - 1), bHash, stripWidth,  bottomOfA);
        int topOfB= 0;
        bool canFindTopOfBInA =  canFindLine(b_.getRow(0), aHash, stripWidth, topOfB);
        int topOFBfromBottomOfA = a_.getHeight() - topOfB;
        // Expect topOFBfromBottomOfA == bottomOfA
        return bottomOfA;
    }
    bool canFindLine(Image::Pixel* source, StripTable& target, int stripWidth, int& matchingRow)
    {
        Image::Pixel* strip = source;
        std::map<int, int> matchedRows;
        for(int index = 0; index < stripWidth; ++index)
        {
            Image::Pixel hashValue = getHashOfStrip(strip,stripWidth);      
            bool match =  target.count(hashValue) > 0;
            if (match)
            {
                ++matchedRows[target[hashValue].row_];
            }
            strip += stripWidth;
        }
        // Can set a threshold requiring more matches than 0
        if (matchedRows.size() == 0)
            return false;
        // FIXME return the most matched row.
        matchingRow = matchedRows.begin()->first;
        return true; 
    }
    Image::Pixel* getStrip(const Image& im, int row, int stripId, int stripWidth)
    {
        return im.getRow(row) + stripId * stripWidth;
    }
    static Image::Pixel getHashOfStrip(Image::Pixel* strip, unsigned width)
    {
        Image::Pixel hashValue = 0;
        for(unsigned col = 0; col < width; ++col)
        {
            hashValue |= *(strip + col);
        }
    }
    void createStripTable(StripTable& hash, const Image& image, int stripWidth)
    {
        for(int row = 0; row < image.getHeight(); ++row)
        {
            for(int index = 0; index < stripWidth; ++index)
            {
                // Warning: Not this simple!
                // If images are sourced from lossy intermediate and hence pixels not _exactly_ the same, need some kind of fuzzy equality here.
                // Details are going to depend on the image format etc, but this is the gist.
                Image::Pixel* strip = getStrip(image, row, index, stripWidth);
                Image::Pixel hashValue = getHashOfStrip(strip,stripWidth);      
                hash[hashValue] = StripId(row, index);
            }
        }
    }

    const Image& a_;
    const Image& b_;

}; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-25T18:23:09.107

如果行完全匹配，则对两个图像中的行进行排序并合并。你的副本就在那里。然后转到原始图像，找到 A 中最长的连续重复条纹，使得 B 中的相应行也是连续的。或者只是查看相应图像的顶部和底部附近。

如果有横幅广告，首先想到的是将图像分成几个垂直条，然后分别对每对条进行处理。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-26T04:28:34.400

这样的事情可能会有所帮助：

首先，从下向上遍历图像A，搜索其中有重要信息的一行。例如，可以通过计算跨行的总颜色偏移来计算“信息”。比如说，两个相邻像素的颜色为 #ffffff 和 #ff0000 - 将 2.0 添加到总数中。准备好一系列阈值，并锁定达到该阈值的第一行。该系列可以是“10.0, 0.1*row length, 0.15*row length, ...”到一个合理的限制。然后，从发现的最上层向下遍历这个数组，取对应的行并从倒过来在 B 中搜索它的匹配项。如果找到，并且阈值足够大，则取数组中的下一个并计算其匹配的位置，并进行比较。如果成功，您已经锁定了 B 相对于 A 的正确偏移量，它等于`height_of_A - first_row_index + first_row_match_index`. 如果失败继续搜索下一行。如果所有匹配都失败，则从 B 的第一行开始搜索 A 的最后一行，直到从 A 底部找到的第一行的偏移量。如果再次失败，则答案为 0。当然，如果使用JPEG 图像使用阈值匹配，因为 A 和 B 中的像素可能不精确，可能对不匹配的像素也有容差。

# sqlite - NHibernate - 使用内存 SQLite 数据库进行业务层测试。如何更改数据库配置？

> ID：16219405
> 
> 赞同：0
> 
> 时间：2013-04-25T15:54:30.257
> 
> 标签：sqlite, fluent-nhibernate, integration-testing, in-memory-database

我使用 Fluent NHibernate 代码创建 MySQL 数据库 SessionFactory。没有配置文件（配置中的连接字符串只有一个值 - 配置文件的 connectionStrings 部分）。

SessionFactory 创建代码包含在数据层类中：SessionFactoryManager，它实现了一个单例内部 SessionFactory，数据层和业务层使用它通过 SessionFactoryManager.OpenSession() 获取所有会话。

我的一些业务层方法在内部调用 SessionFactoryManager.OpenSession() 以对表示层透明的方式创建会话。因此，当调用此方法时，没有涉及会话的参数或返回值（在使用这些业务层方法时保持表示层“与会话无关”）。

当我为业务层编写集成测试时，我的问题出现了：我想让它们在 SQLite 内存数据库上运行。我创建了一个使用 Fluent 配置来配置 SQLite 数据库的 SessionFactoryManager。

但是在测试那些在内部创建会话的方法时，我不能告诉他们使用我的测试 SessionFactory（配置为使用 SQLite）。所以调用了“真正的”SessionFactory，所以使用的是 MySql 数据库，而不是 SQLite。

我正在考虑几种可能的解决方案，但似乎没有一个是正确的。

我可以将数据层中的 NHibernate 配置迁移到配置文件，并为开发/生产和测试环境制作不同的 NHibernate 配置文件，但我真的更愿意继续使用 Fluent 代码。

我还可以修改我的数据层以使用单个配置值、databaseMode 或类似值，以设置要使用的数据库：测试内存或真实数据库。并编写一些 switch(databaseMode) 语句，例如“case inMemory: { ... fluent code for in-memory SQLite ... } case standard: { ... fluent code for standard database ... }”。我根本不喜欢这种方法，我不想仅仅为了测试目的而修改我的数据层代码功能。

请注意，我不是在测试数据层，而是在测试业务层。对测试 NHibernate 映射、Dao 或类似功能不感兴趣。我已经对此进行了单元测试，可以使用 SQLite 数据库运行。

此外，更改数据库不是我的应用程序的要求，因此我对实现允许我动态更改 DBMS 的重大更改不太感兴趣，我只是为了编写测试才来这个需要。

重要的一点：当使用内存 SQLite 时，所有新会话的数据库连接必须相同，否则数据库对象对新会话不可用。因此，当使用 SessionFactory.OpenSession() 创建新会话时，必须提供参数“连接”。但此参数不应与非内存数据库一起使用。所以 switch(databaseMode) 应该用于任何单个会话的创建！另一个我完全不喜欢的数据层代码更改。

我正在认真考虑放弃并使用真实数据库运行我的测试，或者至少在一个空数据库上运行我的测试，并为任何测试执行创建和删除它的对象。但是有了这个，测试执行肯定会变慢。有任何想法吗？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-11T17:40:24.493

最后我的解决方案是控制反转：我改变了我的数据层，所以我可以注入一个自定义的 SessionFactoryBuilder 类，使 Fluently.Configure(...) 变得神奇。

在我的数据层中，我使用“真正的”MySqlSessionFactoryBuilder，在我的测试项目中，我编写 TestMySqlFactoryBuilder 或 TestSQLiteSessionFactoryBuilder 类，或者我需要的任何东西。

我仍然有 SQLite 功能的问题，它要求所有会话都使用相同的连接，并且必须在每个 ISession.Open() 调用中作为参数传递。到目前为止，我还没有修改我的数据层来添加该功能，但我想在将来这样做。可能通过向我的 SessionFactory 单例添加一个静态私有成员来存储用于创建 SchemaExport 的连接，以及一个静态私有布尔成员（如 PreserveConnection）来声明此连接必须存储在该私有成员中并在每个 ISession.Open() 中使用。并且还要包装 ISession.Open() 并确保没有直接打开任何会话。

# rabbitmq - 由于 RabbitMQ，chef-server-ctl 重新配置失败

> ID：16219409
> 
> 赞同：2
> 
> 时间：2013-04-25T15:54:35.193
> 
> 标签：rabbitmq, chef-infra

根据[Opscode 上的安装页面](http://docs.opscode.com/install_server.html)，Chef Server 11 的安装过程应该相当简单。然而，在我的公司，我和我的一个同事在尝试安装 Chef 时都遇到了同样的问题：运行

```
$ sudo chef-server-ctl reconfigure 
```

会抛出错误并停止：

```
"Error when reading /var/opt/chef-server/rabbitmq/.erlang.cookie: eacces" 
```

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T15:54:35.193

检查拥有错误消息中指示的 erlang.cookie 文件的用户/组。该文件应该由用户**chef_server**拥有，所以这样做

```
 $ chown chef_server:chef_server erlang.cookie 
```

在那个目录中。

# django - PostgreSQL & Heroku - 无法连接到数据库

> ID：16219415
> 
> 赞同：0
> 
> 时间：2013-04-25T15:55:01.813
> 
> 标签：django, postgresql, django-south

我正在尝试通过我的带有 South 的 Django 应用程序向表中添加一列，但在运行`python manage.py migrate <app name>`命令时不断收到以下错误：

```
conn = _connect(dsn, connection_factory=connection_factory, async=async)
psycopg2.OperationalError: could not translate host name "ec2-107-21-99-105.comp
ute-1.amazonaws.com" to address: Temporary failure in name resolution 
```

有人知道为什么会这样吗？我是 South 和 PostgreSQL 数据库管理系统（Heroku 使用）的新手，所以我有点困惑。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T17:54:13.120

确保您已`settings.py`像这样定义默认数据库：

```
DATABASES = {
    'default': dj_database_url.config(default=os.environ.get('DATABASE_URL'))
} 
```

# java - 为什么要保留接口作为参考？

> ID：16219416
> 
> 赞同：-1
> 
> 时间：2013-04-25T15:55:07.767
> 
> 标签：java

我在 Java 编程语言中观察到，我们的代码如下：

`List mylist = new ArrayList();`

为什么我们不应该使用以下而不是上面的？

```
ArrayList mylist = new ArrayList(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T15:57:43.433

虽然第二种选择是可行的，但在大多数情况下第一种更可取。通常，您希望对接口进行编码，以使您的代码更少耦合且更具凝聚力。这是一种数据抽象，mylist 的用户（我建议使用 myList）并不关心它的实际实现，只关心它是一个列表。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T15:57:50.370

我们可能希望在某个时候更改底层数据结构，并且通过保留引用，我们只需要更改声明。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-25T15:58:12.387

`Abstract Data Type`与的分离是[**面向对象编程**](http://en.wikipedia.org/wiki/Object-oriented_programming)`specific implementation`的关键方面之一。[](http://en.wikipedia.org/wiki/Object-oriented_programming)

 **请参阅[接口实例化](http://mindprod.com/jgloss/interface.html#INSTANTIATING)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-25T15:57:48.267

如果您使用 ArrayList，您是说它必须是 ArrayList，而不是任何其他类型的 List，并且要替换它，您必须更改对该类型的每个引用。如果您使用`List`，则表明列表没有什么特别之处，它被用作普通列表。只需更改一行即可将其更改为另一个列表。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-25T16:02:56.390

只是为了避免*紧耦合*。从理论上讲，您不应该将自己束缚在实现细节上，因为它们可能会发生变化，这与应该是稳定的接口契约相反。此外，它确实简化了测试。

**您可以将接口视为所有实现类必须遵守**的整体契约。相反，特定于实现的细节可能会有所不同，例如数据在内部的表示方式、访问方式等 - 您永远不想依赖的信息。**

# c# - 打开 XML - Word：创建带有前导点的选项卡 (.NET 3.5 - C#)

> ID：16219421
> 
> 赞同：1
> 
> 时间：2013-04-25T15:55:19.127
> 
> 标签：c#, asp.net, ms-word, openxml, openxml-sdk

我想在 OpenXML for Word 中创建带有前导点的选项卡。

![在此处输入图像描述](https://i.stack.imgur.com/zoabF.png)

你知道怎么做吗？
这就是我发现的：
[http://officeopenxml.com/WPtab.php](http://officeopenxml.com/WPtab.php) [http://msdn.microsoft.com/en-us/library/documentformat.openxml.wordprocessing.tabchar.aspx](http://msdn.microsoft.com/en-us/library/documentformat.openxml.wordprocessing.tabchar.aspx)
但我不知道如何翻译成 C# 代码。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T17:05:01.300

所以我创建了这个 ParagraphProperties：

```
ParagraphProperties pProperties = new ParagraphProperties( 
     new Tabs(
             new TabStop() { Val = TabStopValues.Right, Position = 4320, Leader = TabStopLeaderCharValues.Dot }
     )
); 
```

并添加到`Paragraph`它的工作原理。

# python - 美丽的汤和搜索结果

> ID：16219436
> 
> 赞同：1
> 
> 时间：2013-04-25T15:55:49.427
> 
> 标签：python, search, beautifulsoup

这些是我使用 python 的第一步，请多多包涵。

基本上我想用 Beautiful Soup 从单个 Dokuwiki 页面解析目录。目录如下所示：

```
<div id="dw__toc">
<h3 class="toggle">Table of Contents</h3>
<div>

<ul class="toc">
<li class="level1"><div class="li"><a href="#section">#</a></div>
<ul class="toc">
<li class="level2"><div class="li"><a href="#link1">One</a></div></li>
<li class="level2"><div class="li"><a href="#link2">Two</a></div></li>
<li class="level2"><div class="li"><a href="#link3">Three</a></div></li> 
```

我希望能够搜索 a-tags 的内容，如果找到结果，则返回其内容并返回 href-link。所以如果我搜索“一个”，结果应该是

```
One
#link1 
```

到目前为止我做了什么：

```
#!/usr/bin/python2

from BeautifulSoup import BeautifulSoup
import urllib2

#Grab and open URL, create BeatifulSoup object
url = "http://www.somewiki.at/wiki/doku.php"
page = urllib2.urlopen(url)
soup = BeautifulSoup(page.read())
#Grab Table of Contents
grab_toc = soup.find('div', {"id":"dw__toc"})

#Look for all divs with class: li
ftext = grab_toc.findAll('div', {"class":"li"})
#Look for links
links = grab_toc.findAll('a',href=True)

#Iterate
for everytext in ftext:
    text = ''.join(everytext.findAll(text=True))
    data = text.strip()
    print data

for everylink in links:
    print everylink['href'] 
```

这会打印出我想要的数据，但我有点迷失了重写它以便能够在结果中搜索并且只返回搜索项。尝试过类似的东西

```
if data == 'searchtearm':
        print data
        break
else:
        print 'Nothing found' 
```

但这是一种弱搜索。有没有更好的方法来做到这一点？在我的示例中，Beatiful Soup 结果集已更改为列表。首先在结果集中搜索是否更好，如果是这样，那么如何做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T16:05:13.953

不用逐个搜索链接，而是让 BeautifulSoup 使用正则表达式为您搜索：

```
import re

matching_link = grab_toc.find('a', text=re.compile('one', re.IGNORECASE)) 
```

这将在目录中找到第*一个* `a`链接，其中包含`one`文本中的 3 个字符。然后只需打印链接和文本：

```
print matching_link.string
print matching_link['href'] 
```

基于您的示例的简短演示：

```
>>> from bs4 import BeautifulSoup
>>> import re
>>> soup = BeautifulSoup('''\
... <div id="dw__toc">
... <h3 class="toggle">Table of Contents</h3>
... <div>
... 
... <ul class="toc">
... <li class="level1"><div class="li"><a href="#section">#</a></div>
... <ul class="toc">
... <li class="level2"><div class="li"><a href="#link1">One</a></div></li>
... <li class="level2"><div class="li"><a href="#link2">Two</a></div></li>
... <li class="level2"><div class="li"><a href="#link3">Three</a></div></li>
... </ul></ul>''')
>>> matching_link = soup.find('a', text=re.compile('one', re.IGNORECASE))
>>> print matching_link.string
One
>>> print matching_link['href']
#link1 
```

在 BeautifulSoup 版本 3 中，上述`.find()`调用改为返回包含的`NavigableString`对象。要返回父`a`元素，请使用`.parent`属性：

```
matching_link = grab_toc.find('a', text=re.compile('one', re.IGNORECASE)).parent
print matching_link.string
print matching_link['href'] 
```

# javascript - 如何将 setDate 修改为 getFullYear 少 1 天？

> ID：16219442
> 
> 赞同：0
> 
> 时间：2013-04-25T15:56:05.257
> 
> 标签：javascript, ajax

我没有找到修改方法，因此保修的结束日期每天少一年。如果有人可以帮助或将我指向正确的帖子以获得答案，这是代码？这是我现在拥有的功能。

```
function setStdWarrEndDate(date) {
            var stdDate = $.datepicker.parseDate('mm/dd/yy', date);
            stdDate.setFullYear(stdDate.getFullYear() + 1);
            $('#StdWarrantyEndDate').val($.datepicker.formatDate('mm/dd/yy', stdDate ));
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T16:00:58.770

利用：

```
stdDate.setFullYear(stdDate.getFullYear() + 1);
stdDate.setDate(stdDate.getDate() - 1); 
```

# pdo - 我应该如何将 pdo qoute 转移到查询中？

> ID：16219446
> 
> 赞同：0
> 
> 时间：2013-04-25T15:56:09.040
> 
> 标签：pdo

不确定 pdo->quote 的正确语法是什么。php.net 仅显示“echo $stmt->quote($var)”。但我不需要“回显”这个变量。我应该如何保存结果并将其传输到请求？

在第一个字符串 $stmt 未注释的情况下，我收到 bool(false)。没有它，一切都很好。

```
//$var1 = $this->_db->quote($var1);
$stmt = $this->_db->query("SELECT activation FROM users WHERE email = '$var1' LIMIT 1"); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T16:42:18.910

quote() 添加它自己的引号，所以从查询中删除它们。

```
$var1 = $this->_db->quote($var1);
$stmt = $this->_db->query("SELECT activation FROM users WHERE email = $var1 LIMIT 1"); 
```

您是否考虑过使用准备好的语句？[http://www.php.net/manual/en/pdo.prepare.php](http://www.php.net/manual/en/pdo.prepare.php)

# logging - 错误 TF26212 的附加信息：Team Foundation Server 无法保存您的更改

> ID：16219450
> 
> 赞同：1
> 
> 时间：2013-04-25T15:56:24.963
> 
> 标签：logging, error-handling

TFS 中是否有任何日志记录，可以更详细地解释发生了什么？

```
Microsoft.TeamFoundation.WorkItemTracking.Client.ServerRejectedChangesException: TF26212: Team Foundation Server could not save your changes. There may be problems with the work item type definition, or a conflicting work item type definition change may require a refresh on your client. Restart your client applicationand try again, or contact your Team Foundation Server administrator. ---> System.Web.Services.Protocols.SoapException: TF237165: Team Foundation could not update the work item because of a validation error on the server. This may happen because the work item type has been modified or destroyed, or you do not have permission to update the work item.
   at Microsoft.TeamFoundation.WorkItemTracking.Proxy.RetryHandler.HandleSoapException(SoapException se)
   at Microsoft.TeamFoundation.WorkItemTracking.Proxy.WorkItemServer.Update(String requestId, XmlElement package, XmlElement& result, MetadataTableHaveEntry[] metadataHave, String& dbStamp, IMetadataRowSets& metadata)   at Microsoft.TeamFoundation.WorkItemTracking.Client.WorkItemStore.SendUpdatePackage(XmlElement package, XmlElement& result, Boolean bulk)
   --- End of inner exception stack trace ---
   at Microsoft.TeamFoundation.WorkItemTracking.Client.WorkItemStore.SendUpdatePackage(XmlElement package, XmlElement& result, Boolean bulk)
   at Microsoft.TeamFoundation.WorkItemTracking.Client.WorkItemStore.SaveWorkItems(WorkItem[] workitems, Boolean bulk, SaveFlags saveFlags)
   at Microsoft.TeamFoundation.WorkItemTracking.Client.WorkItem.Save(SaveFlags saveFlags)
   at Microsoft.TeamFoundation.WorkItemTracking.Client.WorkItem.Save()
   at ... 
```

当我保存 WorkItem 的更改时，我会收到此错误（仅有时），并绕过服务帐户下的规则。

更改验证成功。是否可以在服务器端获取有关验证的详细信息？

# bandwidth - 如何根据每分钟流量 (fpm) 计算带宽需求？

> ID：16219454
> 
> 赞同：0
> 
> 时间：2013-04-25T15:56:27.817
> 
> 标签：bandwidth, netflow

我想知道如何根据流量计算带宽需求，反之亦然。

这意味着如果我必须达到总共 50,000 个网络流，那么产生这个数字的带宽要求是多少？有没有这个公式。我正在使用它来确定流量分析仪设备的大小。如果它的许可证说支持 50,000 个流，这意味着什么。如果我增加多少带宽，我会失去许可证覆盖范围？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T18:03:07.403

大多数应用程序和设备都会列出每秒流量，因此您要问每秒传输 50k 网络流更新的带宽要求是多少：

对于 NetFlow v5，每条记录为 48 字节，每个数据包携带 20 条左右的记录，每个数据包有 24 字节的开销。这意味着您将使用大约 20Mbps 来传输流数据包。如果您使用 NetFlow v9，它使用基于模板的格式，它可能会更多或更少，具体取决于模板中包含的内容。

但是，如果您问每秒 50k 网络流更新可以监控多少带宽，答案会变得更加复杂。根据我们监控常规用户网络（使用 google、facebook 等）的经验，平均流量更新包含大约 25 KB 的传输数据。这意味着每秒 50,000 次流量更新相当于监控 10Gbps 的流量。请记住，这些都是非常粗略的估计。

但是，如果您在数据中心监视以服务器为中心的网络，则此答案可能会有所不同，其中每个流可能会大得多或小得多，具体取决于所服务的内容。每个单独的流量会话越大，您可以监控的带宽就越高，每秒 50,000 次流量更新。

最后，如果您在 NetFlow 导出器中启用采样，您将能够监控更多带宽。采样将仅在每 N 个数据包中使用 1 个，因此会跳过许多流。这降低了监控大容量网络所需的每秒流量更新总数。

# asp.net - 向 DataBind 上的 CheckBoxList 添加其他属性

> ID：16219460
> 
> 赞同：0
> 
> 时间：2013-04-25T15:56:39.773
> 
> 标签：asp.net, checkboxlist

我有一个绑定到数据库值的复选框列表，如下所示

```
chkTopLanguages.DataSource = dsSiteLanguages;
chkTopLanguages.DataTextField = "Language";
chkTopLanguages.DataValueField = "LanguageID";
chkTopLanguages.DataBind(); 
```

但是，我还需要向自定义属性添加另一个值 (AltLanguage)，以便在某些情况下可以访问该值。如何向数据绑定上的复选框项目添加附加值属性？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T16:00:17.183

您可能不会喜欢这个，但是当我在纯 .NET 中看到这样做之前遇到这个问题的唯一方法是执行以下操作：

```
// Create this field on your data source objects
public LanguageField {
   get {
       return LanguageID + "_" + AltLanguage;
   }
}

chkTopLanguages.DataSource = dsSiteLanguages;
chkTopLanguages.DataTextField = "Language";
chkTopLanguages.DataValueField = "LanguageField";
chkTopLanguages.DataBind(); 
```

然后，当您获得值时，将值除以“_”，然后您就可以获取这两个值。

# design-patterns - 我需要询问对象类，但这是一种不好的做法。这种情况的替代方案？

> ID：16219461
> 
> 赞同：7
> 
> 时间：2013-04-25T15:56:44.323
> 
> 标签：design-patterns, uml, visitor-pattern, double-dispatch

我在扩展应用程序时遇到问题。这是一个考勤记录系统。目前，每个员工都通过一张带有二维码的卡记录考勤。现在他们想加入指纹识别，直到他们要求两种形式的识别必须在系统中共存时才出现问题。因此，系统必须能够感知员工的二维码，以及他的指纹。

![我有以下课程：](https://i.stack.imgur.com/46Xru.jpg)

通过 .equalsTo(id) 方法在 QrIdStrategy 中修复它的方法是：

```
equalsTo(id){
  if (id == isKindOf (QrIdStrategy))
    if (this.getEmployeeId () == id.getEmployeeId ())
      return true;

  return false;
} 
```

但是我知道询问对象的类是一种不好的做法，并且不想这样做。我该如何解决？

我想到了访问者模式，但是我仍然有比较两个不同类型的类的问题（因为系统可以扫描这两种类型中的任何一种）

![在此处输入图像描述](https://i.stack.imgur.com/MpCdD.jpg)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-10T09:52:52.997

也许第一张图已经显示了我要说的内容，但这归结为多态性。

创建一个抽象类（例如`IdentificationStrategy`，使用类似的方法`equlasTo()`）。派生两个类：`QRStrategy`以及`FingerPrintStrategy`从每个类中的`IdentificationStrategy`和实现`equlasTo()`方法。

现在，代码中有一个地方可以让您知道是否要创建`QRStrategy`or的实例`FingerPrintStrategy`。只需将该对象的实例分配给`IdentificationStrategy`类型变量（例如，我们将其命名为 'foo' ）。当您`equlasTo()`在“foo”上调用该方法时，您不再关心对象类型。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-07T14:19:17.897

**关于你的第一个灵魂**

问题是 QrId 和 FingerprintId 没有任何共同之处。IdentificationStrategy 显示您想比较它们，但您不能。解决方案可能是`getUniversalID() : string`向 IdentificationStrategy 添加类似的东西并在派生类中实现它们。然后你可以有：

```
matchWithLocation(IdentificationStrategy identificationStrategy)
{
    return this.identificationStrategy.getUniversalId()
        == identificationStrategy.getUniversalID();
} 
```

但是，您可能会发现 getUniversalId 的实现（确保不同类型的 ID 不会冲突）有问题。

**关于您的第二个解决方案**

在这种情况下，对访问者的一个很好的改编是添加方法`getQr() : QrIdStrategy`和`getFingerprint() : FingerprintStrategy`员工（因为员工使用这两种识别方法，正如你提到的），更改`equalsTo(id: IdentificationStrategy)`为`check(employee: Employee)`. 那么`QrStrategy.check`将是：

```
 return this.getEmployeeId() == employee.getQr().getEmployeeId() 
```

并且`FingerprintStrategy.check`将是：

```
 return this.getMatchingViaFramework() == employee.getFingerprint().getMatchingViaFramework() 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-10T15:28:15.453

如果我理解您对模型原样的疑虑，它是*功能性*的，但它要求您对`IdentificationStrategy`-- 的实例执行运行时类型检查，并且您希望避免这种情况。（不管这是否真的*是*不好的做法。）因此，鉴于每个员工都需要两者，我建议将它们视为单个`Credentials`对象的单独组件。

您可以通过以下两种方式之一来实现。

**我认为，更通用**、或许更具前瞻性的方式是假设用户可以拥有 N 种身份识别方式，并且他们需要任意两种方式进行授权。因此，对于进入的每个`IdentificationStrategy`对象，您将其添加到一组`Credentials`：

```
public class Credentials {

  public const int NumberOfDistinctIdsRequired = 2;
  private List<IdentificationStrategy> ids = new List<IdentificationStrategy>();

  public void AddIdentification(IdentificationStrategy id) {
    if (ids.Count < NumberOfDistinctIdsRequired) {

      // this .Contains() check should compare id's based on the raw, internal ID
      // or hash -- NOT by the underlying user/employee.
      if (!ids.Contains(id)) {
        ids.Add(id);
      }      
    }
  }

  public Employee AuthenticatedEmployee() {
    // if we have the required number of authentication pieces,
    // see whether they belong to the same employee
    if (ids.Count == NumberOfDistinctIdsRequired) {
      Employee rv;
      for (int i = 0; i < NumberOfDistinctIdsRequired; i++) {
        if (rv == null) {
          rv = ids[i].getEmployee();
        } else if (!rv.Equals(ids[i].getEmployee())) {
          return null;
        }
      }
      return rv;
    } else {
      return null;
    }
  }

} 
```

**或者，将一个视为 ID，将另一个视为密码。**我认为，如果 ID 始终以相同的顺序呈现，则使用第一个呈现的 ID 作为实际`ID`的 ID，使用第二个呈现的“ID”作为`Password`. 在此模型中，您的`Fingerprint`和`QRCode`不再是`IdentificationStrategy`. 并且无论哪个被视为`Password`不需要能够返回一个`Employee`，而是获取并根据`Employee`返回的标识符进行验证。标识符甚至不需要立即出现在`Employee`（但可能是）上。

假设 QRCode 是 ID 和指纹“密码”。所以......做这样的*事情*：

```
public class QRCode : Identifier {
  public Employee GetEmployee() {
    // return the employee stored under the GUID, Int, String, or whatever
  }
}

public class Fingerprint : Password {
  public bool Equals(Fingerprint p) {
    // compare hashes or whatever.
  }  
}

public class Employee {
  public Identifier Id;
  private Password password;
  public Boolean IsAuthenticated = false;

  public Boolean Authenticate(Password p) {
    if (password.Equals(p)) {
      IsAuthenticated = true;
    }
    return IsAuthenticated;
  }
} 
```

或者将更多的工作卸载到`Employee`课堂上。或者引入一个`Credentials`将一个视为 an`ID`而另一个视为 a 的类`Password`。关键是，如果两者都始终存在，则不需要将它们都视为身份识别形式。一个可用作标识符，另一个可用作身份验证器。

# jquery - jQuery 验证 - 在 3 个选择框之间仅选择一个选项

> ID：16219462
> 
> 赞同：0
> 
> 时间：2013-04-25T15:56:45.967
> 
> 标签：jquery

再会

我有 3 个选择框。现在我想做的是允许用户只在其中一个框中选择一个值，但不能超过一个框。这些盒子可能都是空的。

因此，您可以选择以下之一以使提交成功：

无 (---) 或 1/2 /3 或蓝色/绿色/紫色或大/中/小

```
<select>
      <option>---</option>
      <option>1</option>
      <option>2</option>
      <option>3</option>
    </select>
    <br /><br />
    <select>
      <option>---</option>
      <option>Blue</option>
      <option>Green</option>
      <option>Purple</option>
    </select>
    <br /><br />
    <select>
      <option>---</option>
      <option>Big</option>
      <option>Medium</option>
      <option>Small</option>
    </select>
    <br /><br />
    <input type="submit" /> 
```

jQuery

```
$('input[type="submit"]').click(function(){

$('select').each(function() {
     var i = 0;
     if($(this).attr('option','selected').val() != "---"){
        i++;
     };
  });

if(i > 1){
        $('input[type="submit"]').prop('disabled', true);
        alert('You can only choose one option!');
}
else {
        alert('Form Submitted successfully');
}

}); 
```

但这根本不起作用。

**见我的[JSFiddle](http://jsfiddle.net/2DzUV/16/)**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T16:01:25.460

定义您的`i`before`each`函数以使其在您的`click`函数内具有全局范围并在`if`条件下可访问：

```
var i = 0;
$('select').each(function() { 
```

**[更新小提琴](http://jsfiddle.net/2DzUV/20/)**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T16:02:27.463

你的意思是：

[http://jsfiddle.net/2DzUV/18/](http://jsfiddle.net/2DzUV/18/)

```
 $('select').on('change', function () {
        $('select').not(this).val("");
    }); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-25T16:03:11.360

`i`那是因为在遍历`<select>`元素列表时正在重置变量的范围。将第 4`var i = 0;`行移至第 2 行，即在嵌套循环之外。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-25T16:03:18.173

您需要将变量 i 的创建移到每个函数之外，如下所示：

```
$('input[type="submit"]').click(function(){

var i = 0; // <-- this was moved to here
$('select').each(function() {
     if($(this).attr('option','selected').val() != "---"){
        i++;
     };
  });

if(i > 1){
        $('input[type="submit"]').prop('disabled', true);
        alert('You can only choose one option!');
}
else {
        alert('Form Submitted successfully');
}

}); 
```

由于它是在每个函数内部创建的，因此在该函数退出后它会被销毁，并且当您测试它是否大于一时该值不再存在。

# ms-access - Access 数据库被其他人打开时如何读取它

> ID：16219463
> 
> 赞同：0
> 
> 时间：2013-04-25T15:56:46.707
> 
> 标签：ms-access

我正在开发一个从 Access db 读取数据的网站应用程序。它工作正常，直到有人打开数据库来处理它（例如，写新记录......）。发生这种情况时，连接会中断，并会出现“正在使用数据库”之类的消息。

我知道 Access 有一个扩展名的安全文件，`.ldb`该文件在打开时会自动创建`.mdb`，因此我正在寻找一种能够为多个用户打开数据库的方法。这样，我可以检查应用程序中的数据，同时记录新数据。

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-26T13:50:01.983

网站应用程序不保持与数据库的持续连接，因此您描述的症状可能是由以下原因之一引起的：

*   当“有人打开数据库来处理它”时，他们以独占模式打开它，这可以防止其他用户/进程同时打开它。

*   当“有人打开数据库来处理它”时，他们对文件所在的***文件夹***没有“创建文件”权限。`.mdb`这会阻止他们创建`.ldb`锁定文件，并可能导致其他用户被迫进入只读模式或阻止他们完全访问数据库。（有关多用户访问的文件/文件夹权限的更多详细信息，请参阅我的其他答案[。](https://stackoverflow.com/questions/15239970/how-to-enable-1-user-to-update-the-database-while-allowing-others-to-only-read-i/15735367#15735367)）

# batch-file - 修改批量查找替换和使用选项卡

> ID：16219470
> 
> 赞同：0
> 
> 时间：2013-04-25T15:57:04.000
> 
> 标签：batch-file

我试图改变一些东西。

我在这里找到并替换：http: [//www.dostips.com/?t=Batch.FindAndReplace](http://www.dostips.com/?t=Batch.FindAndReplace)

我想用制表符替换逗号。但是我替换 %1 %2 %3 是错误的。

```
@echo off
SETLOCAL ENABLEEXTENSIONS
SETLOCAL DISABLEDELAYEDEXPANSION

@echo off set OldStr=,
@echo off set NewStr=\t
@echo off set FilePath=%UserProfile%\Desktop\information.csv

if "%OldStr%"=="" findstr "^::" "%~f0"&GOTO:EOF
for /f "tokens=1,* delims=]" %%A in ('"type %FilePath%|find /n /v """') do (
    set "line=%%B"
    if defined line (
        call set "line=echo.%%line:%OldStr%=%NewStr%"
        for /f "delims=" %%X in ('"echo."%%line%%""') do %%~X
    ) ELSE echo.
) 
```

我不确定 \t 是否有效。

我尝试更改命令，因为我需要 1 个批处理文件来完成我想要的所有操作。

* * *

原来的

```
@echo off
REM -- Prepare the Command Processor --
SETLOCAL ENABLEEXTENSIONS
SETLOCAL DISABLEDELAYEDEXPANSION

::BatchSubstitude - parses a File line by line and replaces a substring"
::syntax: BatchSubstitude.bat OldStr NewStr File
::          OldStr [in] - string to be replaced
::          NewStr [in] - string to replace with
::          File   [in] - file to be parsed
:$changed 20100115
:$source http://www.dostips.com
if "%~1"=="" findstr "^::" "%~f0"&GOTO:EOF
for /f "tokens=1,* delims=]" %%A in ('"type %3|find /n /v """') do (
    set "line=%%B"
    if defined line (
        call set "line=echo.%%line:%~1=%~2%%"
        for /f "delims=" %%X in ('"echo."%%line%%""') do %%~X
    ) ELSE echo.
) 
```

我想在我自己的批处理文件上使用这个脚本。所以我需要通过一个var来改变参数。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T18:06:43.217

改变 , 在 \t

```
@echo off

REM -- Prepare the Command Processor --
SETLOCAL ENABLEEXTENSIONS
SETLOCAL DISABLEDELAYEDEXPANSION

if /I "%~1"=="/h" goto:help
if "%UserProfile%\Desktop\%ComputerName%.csv"=="" goto:help

if ","=="" findstr "^::" "%~f0"&goto:help
for /f "tokens=1,* delims=]" %%A in ('"type %UserProfile%\Desktop\%ComputerName%.csv|find /n /v """') do (
    set "line=%%B"
    if defined line (
        call set "line=echo.%%line:,=   %%"
        for /f "delims=" %%X in ('"echo."%%line%%""')  do %%~X >> %UserProfile%\Desktop\%ComputerName%.csv_new
    ) ELSE echo.
)
move /Y %UserProfile%\Desktop\%ComputerName%.csv_new %UserProfile%\Desktop\%ComputerName%.csv >nul 
```

# php - 阻止机器人注册每次点击付费？

> ID：16219475
> 
> 赞同：1
> 
> 时间：2013-04-25T15:57:24.020
> 
> 标签：php, pay-per-click

我正在我的网站上编写按点击付费功能。在按钮上添加链接相当容易：

```
 http://www.mysite.com/advertLink?id=123 
```

我可以拿起 ID 并相应地重定向。但是如何阻止谷歌和其他机器人“点击”这个链接呢？我不希望点击链接的用户为机器人生成的点击付费？

另外，我应该考虑阻止其他类型的流量吗？例如，我正在考虑阻止我所在国家/地区以外的所有流量被注册为点击，因为该网站仅针对我的国家/地区？

**更新**

nofollow 和 htaccess 规则是一个好的开始。但我希望可能有更万无一失的方法。例如，我在这个网站上看到：www.pricecheck.co.za，如果您单击添加，它会将您带到一个精美的转发页面。我很好奇该页面上的逻辑是什么。看起来可能以某种方式使用了javascript。看看我在这里的意思：

```
http://www.pricecheck.co.za/offers/19453458/Apple+iPad+2+Black+64GB+9.7%22+Tablet+With+WiFi+&+3G/ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T16:00:42.583

将您的按钮更改为`a`链接并放置`rel="nofollow"`应该告诉搜索引擎不要关注该链接。或者，您可以使用 javascript 显示链接，搜索引擎通常不会跟随它：

```
<script type="text/javascript">
    document.write('<a href="http://www.mysite.com/advertLink?id=123" rel="nofollow">link</a>');
</script> 
```

就像 hakan 所说，添加规则以在您的 robots.txt 中禁止它。

您还可以检查脚本中的引荐来源网址，以确保从您的页面点击它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T16:05:22.670

好的机器人会阅读并尊重您的[robots.txt](http://www.robotstxt.org/robotstxt.html)。你可以写类似

```
User-agent: *
Disallow: /advertLink 
```

# java - 无法从 github 或 google 下载 - 通过 Eclipse Juno

> ID：16219476
> 
> 赞同：0
> 
> 时间：2013-04-25T15:57:24.820
> 
> 标签：java, android, eclipse, github

在 Eclipse Juno 中单击“Spring 模板项目”时出现以下错误

```
Error while downloading or parsing descriptors file 'https://raw.github.com/SpringSource/spring-integration-templates/master/si-sts-templates/builds/descriptor.xml':

org.eclipse.core.runtime.CoreException: Error while retrieving https://raw.github.com/SpringSource/spring-integration-templates/master/si-sts-templates/builds/descriptor.xml 
```

这是日志：

> [!ENTRY org.eclipse.equinox.p2.metadata.repository 4 1000 2013-04-25 08:39:20.295 !MESSAGE 在http://geronimo.apache.org/devtools/](http://geronimo.apache.org/devtools/)上找不到存储库 。!会话 2013-04-25 08:42:08.969 -------------------------------------------------- --------- eclipse.buildId=M20130204-1200 java.version=1.7.0_21 java.vendor=Oracle Corporation BootLoader 常量：OS=win32, ARCH=x86_64, WS=win32, NL=en_US 框架参数： -产品
> org.eclipse.epp.package.jee.product-Dorg.eclipse.ecf.provider.filetransfer.excludeContributors=org.eclipse.ecf.provider.filetransfer.httpclient -Dhttp.proxyPort=80 -Dhttp.proxyHost=XXXXXXXXX -Dhttp。 proxyUser=XXXXXXXXXXXX -Dhttp.proxyPassword=XXXXXXXXXXXX -Dhttp.nonProxyHosts=localhost|127.0.0.1 -Dorg.eclipse.ecf.provider.filetransfer.excludeContributors=org.eclipse.ecf.provider.filetransfer.httpclient 命令行参数：-os win32 -ws win32 -arch x86_64 -product org.eclipse.epp.package.jee.product -Dorg.eclipse.ecf.provider.filetransfer.excludeContributors=org.eclipse.ecf.provider.filetransfer.httpclient -Dhttp.proxyPort=80 -Dhttp.proxyHost=XXXXXXXXXX -Dhttp.proxyUser=XXXXXXXXXXXX -Dhttp.proxyPassword=XXXXXXXXXXXX -Dhttp.nonProxyHosts=localhost|127.0.0.1 -Dorg.eclipse.ecf.provider.filetransfer.excludeContributors=org.eclipse.ecf。provider.filetransfer.httpclient
> 
> !ENTRY org.eclipse.egit.ui 2 0 2013-04-25 08:42:18.304 !MESSAGE 警告：EGit 无法检测到本机 Git 的安装路径“gitPrefix”。因此 EGit 不能尊重系统级别的 Git 设置，这些设置可能在本机 Git 安装目录下的 ${gitPrefix}/etc/gitconfig 中配置。这些设置中最重要的是 core.autocrlf。默认情况下，Windows 版 Git 在此系统级别配置中将此参数设置为 true。Git 安装位置可以在团队 > Git > 配置首选项页面的“系统设置”选项卡上进行配置。可以在 Team > Git > Confirmations and Warnings 首选项页面上关闭此警告。
> 
> !ENTRY org.eclipse.wst.common.project.facet.core 4 0 2013-04-25 08:42:19.654 !MESSAGE 项目 facet grails.app 尚未定义。它用于插件 com.vmware.vfabric.ide.eclipse.tcserver.core。
> 
> !ENTRY org.eclipse.osgi 2 1 2013-04-25 08:42:23.523 !MESSAGE NLS 未使用消息：CacheManager_CannotLoadNonUrlLocation 在：org.eclipse.equinox.internal.p2.repository.messages

Sooo，我的问题是：我无法从 github 下载，而且我还从 google (for android) 获得以下内容：

> 无法在 [https://dl-ssl.google.com/android/eclipse/content.xml](https://dl-ssl.google.com/android/eclipse/content.xml)读取存储库。java.util.NoSuchElementException

我认为这个问题是相关的，但......不确定。我已调整 eclipse.ini 文件以包含代理设置（我在工作 - 该设置已在日志中替换为 XXXXXXXXXX）。任何建议将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-01T10:22:29.407

URL 方案是 HTTPS，而您的代理设置仅是 HTTP。

您还应该尝试设置 HTTPS 设置：

```
 -Dhttps.proxyPort=80 -Dhttps.proxyHost=XXXXXXXXXX -Dhttps.proxyUser=XXXXXXXXXXXX -Dhttps.proxyPassword=XXXXXXXXXXXX -Dhttps.nonProxyHosts=localhost|127.0.0.1 
```

此外，您可能应该使用首选项菜单（窗口 > 首选项 > 常规 > 网络连接）来配置它。

# javascript - 如何通过单击弹出窗口中的按钮将打开弹出窗口的窗口重定向到新页面？

> ID：16219480
> 
> 赞同：0
> 
> 时间：2013-04-25T15:57:30.477
> 
> 标签：javascript, popup, window

我有一个打开弹出窗口的页面，在弹出窗口中，我有一个链接，该链接应该将打开当前窗口的窗口重定向到名为privacy.html 的页面。

我知道我应该使用 window.opener 来引用该窗口，并且我发现另一个问题的解决方案是使用 setInterval。这可能对此有用。

[如何使用 window.open() 关注先前打开的窗口](https://stackoverflow.com/questions/8675320/how-to-focus-on-a-previously-opened-window-using-window-open)

无论如何，这是我的代码，它无法重定向打开器窗口，但你可以看到我正在尝试做的事情。

```
<script type="text/javascript">

function validateEmail() {
    var emailRule =  /^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;

    if (emailRule.test(document.forms[0].email.value)) {
         document.getElementById("body").innerHTML = "Thank you for signing up for our newsletter! You will recieve a confirmation email shortly.";
         setTimeout("window.close()", 3000);
    }
    else {
         document.getElementById("message").innerHTML = "Please enter a valid email address";
    }
}

function privacyWindow() {
     window.opener("privacy.html");
}
</script>

</head>
<body id="body">
<p>If you sign up for our newsletter you will be entered into a drawing to win free clothes every month!</p>
<p id="message"><br></p>
<form action="" onsubmit="validateEmail();">
<p>Email: <input type="text" name="email"/>
<input type="button" value="Sign up" onclick="validateEmail();"/></p>
<br>
<input type="button" value="No thanks" onclick="window.close()"/>
<br>
</form>
<p><a href="" onclick="privacyWindow();">Privacy Policy</a></p>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T15:59:05.937

改变：

```
window.opener("privacy.html"); 
```

至：

```
window.opener.location.href = "privacy.html"; 
```

# java - 安卓游戏 3 用户试用

> ID：16219481
> 
> 赞同：0
> 
> 时间：2013-04-25T15:57:32.323
> 
> 标签：java, android

你好，这是我第一次开发安卓彩色游戏。但是，我想在每个问题中进行 3 次试验。我有点困惑如何或在哪里将我的 while 循环放在我的代码中。请看一下我到目前为止所做的尝试：

```
 int trial = 0;

  private void getCorrectObject() {

    List<Integer> objects = new ArrayList<Integer>();
    objects.add(1);
    objects.add(2);
    objects.add(3);
    objects.add(4);
    objects.add(5);
    objects.add(6);
    objects.add(7);
    objects.add(8);
    objects.add(9);

    Collections.shuffle(objects);
    int correctObject =  objects.get(0);
    Log.d("test", String.valueOf(correctObject));

    while(trial <=3){
        trial++;

    switch(correctObject)
    {
    case 1:
        bObjectCorrect.setImageResource(R.drawable.stage1_1_object1);
        bObjectCorrect.setOnClickListener(new View.OnClickListener() {

            public void onClick(View view) {
                Intent i = new Intent(getApplicationContext(), Stage1_2.class);
                startActivity(i);
                new Thread(){
                    public void run(){
                        MediaPlayer mp = MediaPlayer.create(Stage1_2.this, R.raw.brown);
                        mp.start();
                    }
                }.start();
                finish();
            }
        });
        break;
    case 2:
        bObject1.setImageResource(R.drawable.stage1_1_object1);
        bObject1.setOnClickListener(new View.OnClickListener() {

            public void onClick(View view) {
                Intent i = new Intent(getApplicationContext(), Stage1_2.class);
                startActivity(i);
                new Thread(){
                    public void run(){
                        MediaPlayer mp = MediaPlayer.create(Stage1_2.this, R.raw.brown);
                        mp.start();
                    }
                }.start();
                finish();
            }
        });
        break;
    case 3:
        bObject2.setImageResource(R.drawable.stage1_1_object1);
        bObject2.setOnClickListener(new View.OnClickListener() {

            public void onClick(View view) {
                Intent i = new Intent(getApplicationContext(), Stage1_2.class);
                startActivity(i);
                new Thread(){
                    public void run(){
                        MediaPlayer mp = MediaPlayer.create(Stage1_2.this, R.raw.brown);
                        mp.start();
                    }
                }.start();
                finish();
            }
        });
        break;
    case 4:
        bObject3.setImageResource(R.drawable.stage1_1_object1);
        bObject3.setOnClickListener(new View.OnClickListener() {

            public void onClick(View view) {
                Intent i = new Intent(getApplicationContext(), Stage1_2.class);
                startActivity(i);
                new Thread(){
                    public void run(){
                        MediaPlayer mp = MediaPlayer.create(Stage1_2.this, R.raw.brown);
                        mp.start();
                    }
                }.start();
                finish();
            }
        });
        break;
    case 5:
        bObject4.setImageResource(R.drawable.stage1_1_object1);
        bObject4.setOnClickListener(new View.OnClickListener() {

            public void onClick(View view) {
                Intent i = new Intent(getApplicationContext(), Stage1_2.class);
                startActivity(i);
                new Thread(){
                    public void run(){
                        MediaPlayer mp = MediaPlayer.create(Stage1_2.this, R.raw.brown);
                        mp.start();
                    }
                }.start();
                finish();
            }
        });
        break;
    case 6:
        bObject5.setImageResource(R.drawable.stage1_1_object1);
        bObject5.setOnClickListener(new View.OnClickListener() {

            public void onClick(View view) {
                Intent i = new Intent(getApplicationContext(), Stage1_2.class);
                startActivity(i);
                new Thread(){
                    public void run(){
                        MediaPlayer mp = MediaPlayer.create(Stage1_2.this, R.raw.brown);
                        mp.start();
                    }
                }.start();
                finish();
            }
        });
        break;
    case 7:
        bObject6.setImageResource(R.drawable.stage1_1_object1);
        bObject6.setOnClickListener(new View.OnClickListener() {

            public void onClick(View view) {
                Intent i = new Intent(getApplicationContext(), Stage1_2.class);
                startActivity(i);
                new Thread(){
                    public void run(){
                        MediaPlayer mp = MediaPlayer.create(Stage1_2.this, R.raw.brown);
                        mp.start();
                    }
                }.start();
                finish();
            }
        });
        break;
    case 8:
        bObject7.setImageResource(R.drawable.stage1_1_object1);
        bObject7.setOnClickListener(new View.OnClickListener() {

            public void onClick(View view) {
                Intent i = new Intent(getApplicationContext(), Stage1_2.class);
                startActivity(i);
                new Thread(){
                    public void run(){
                        MediaPlayer mp = MediaPlayer.create(Stage1_2.this, R.raw.brown);
                        mp.start();
                    }
                }.start();
                finish();
            }
        });
        break;
    case 9:
        bObject8.setImageResource(R.drawable.stage1_1_object1);
        bObject8.setOnClickListener(new View.OnClickListener() {

            public void onClick(View view) {
                Intent i = new Intent(getApplicationContext(), Stage1_2.class);
                startActivity(i);
                new Thread(){
                    public void run(){
                        MediaPlayer mp = MediaPlayer.create(Stage1_2.this, R.raw.brown);
                        mp.start();
                    }
                }.start();
                finish();
            }
        });
        break;
    } // Last of switch statement

    if(trial == 3){
        new AlertDialog.Builder(this)
        .setTitle("Game Over")
        .setMessage("Sorry you reached your 3rd trial")
        .setPositiveButton("Try Again?", new DialogInterface.OnClickListener() {
            public void onClick(DialogInterface dialog, int which) { 
                Intent i = new Intent(Stage1_2.this, Stage1_1.class);
                startActivity(i);
            }
         })
        .setNegativeButton("Back to Menu", new DialogInterface.OnClickListener() {
            public void onClick(DialogInterface dialog, int which) { 
                Intent i = new Intent(Stage1_2.this, ShapingColors.class);
                startActivity(i);
            }
         })
         .show();
    }

    } // end of while loop 
```

我真的很想完成这件事，这样我就可以继续比赛了。任何帮助都非常感谢。提前致谢。

我添加了一个名为**guessedWrong()的新方法**

```
 private void guessedWrong(){
    trial++;

    if(trial == 3){
        new AlertDialog.Builder(this)
        .setTitle("Game Over")
        .setMessage("Sorry you reached your 3rd trial")
        .setPositiveButton("Try Again?", new DialogInterface.OnClickListener() {
            public void onClick(DialogInterface dialog, int which) { 
                Intent i = new Intent(Stage1_1.this, Stage1_1.class);
                startActivity(i);
            }
         })
        .setNegativeButton("Back to Menu", new DialogInterface.OnClickListener() {
            public void onClick(DialogInterface dialog, int which) { 
                Intent i = new Intent(Stage1_1.this, ShapingColors.class);
                startActivity(i);
            }
         })
         .show();
    }

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-25T16:11:11.963

您感到困惑的原因是您不能为此任务使用循环。使用 Java Android 框架时，您的每个回调函数（例如，`onClick`侦听器或您`Activity`的 's `onResume`）都必须在应用程序的一帧内运行和完成。只有在函数返回后，您的应用才会更新屏幕。这意味着，如果您正在执行诸如响应一系列点击之类的操作，则不能循环执行该操作。您必须在对回调的单独调用中处理每次单击。如果你想迭代一个项目列表来决定现在应该发生什么（例如，如果你正在向 a 添加项目），那么循环是合适*的*，`for`但是你不能迭代在不同时间发生的事情（比如正如用户的猜测）。`while`*`ListView`*

 *你必须把你`Activity`想成一个状态机。创建`trial`的成员变量（字段）`Activity`，它从 开始`0`。您可能有一个`guessedWrong()`递增 的函数，`trial`如果它大于 2，则进入“游戏结束”屏幕。`onClick`错误答案的侦听器将调用此函数。转到新问题时，重置`trial`为`0`。

如果重新启动，您还需要确保保留试验次数（您所处的状态）`Activity`。Google 提供的[Android Developers' Training中的](https://developer.android.com/training/index.html)[Recreating an Activity](https://developer.android.com/training/basics/activity-lifecycle/recreating.html)课程向您展示了如何执行此操作。*

# algorithm - 只计算一个平面上两点之间的距离

> ID：16219482
> 
> 赞同：0
> 
> 时间：2013-04-25T15:57:34.673
> 
> 标签：algorithm, distance, formula, pythagorean

![在此处输入图像描述](https://i.stack.imgur.com/MSQPz.png)

如上图所示，如何找到两点之间的距离。

我知道我可以使用毕达哥拉斯找到两点之间的“实际”距离，但我只想找到它们之间的 X 距离。

此外，显然我知道我可以从点 B 的 x 坐标中减去点 A 的 x 坐标，但这无济于事，因为它们可能相反（即 B 可能在左侧，A 在右侧）。

如果有人能建议*最简单*的方法来发现这个距离，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T16:00:53.327

你已经有了答案，你从一个点减去另一个点的 x 坐标。您只需要取其绝对值，然后哪个更大并不重要。

```
absoluteValue(Ax - Bx) = absoluteValue(Bx - Ax) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T16:01:24.157

您可以使用绝对值，即 abs(a - b)

# java - 对需要频繁更新的应用使用 JSP 热部署

> ID：16219494
> 
> 赞同：0
> 
> 时间：2013-04-25T15:58:11.183
> 
> 标签：java, jsp, tomcat, hotdeploy

使用 JSP 热部署是发布新内容或更新内容以避免重新启动 Java EE 服务器（无法热部署 jar）的解决方案吗？我不应该使用 JSP 来编写很多 java 代码，但是我还有其他解决方案吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T19:24:22.087

使用 Tomcat，您可以使用**并行部署**方法。您将能够部署新版本并让旧版本与每个有会话的用户一起运行。

使用 WAR 文件非常简单，例如，我推荐一个简单的脚本在几天后删除旧版本，只保留几个正在运行的版本。

您可以在这里获得更多信息：http: [//tomcat.apache.org/tomcat-7.0-doc/config/context.html#Parallel_deployment](http://tomcat.apache.org/tomcat-7.0-doc/config/context.html#Parallel_deployment)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T21:53:30.427

你看过[JRebel](http://zeroturnaround.com/software/jrebel/)了吗？

# mysql - 我的 SQL 查找跨行的日期范围

> ID：16219501
> 
> 赞同：4
> 
> 时间：2013-04-25T15:58:34.670
> 
> 标签：mysql

我正在寻找一些帮助，甚至知道从哪里开始。本质上，我们为客户提供了一个表格，其中包含就业开始日期和结束日期。对于年度报告，我们必须计算“持续就业”，即最早开始日期到最后结束日期，只要一个结束日期和下一个开始日期之间不超过 21 天。这是一个例子

```
employee | Start Date | End Date
1        | 2012-10-1  | 2012-11-05
1        | 2012-11-08 | 2013-1-25
2        | 2012-10-1  | 2012-11-05
2        | 2012-11-30 | 2013-1-02 
```

在上面，我希望员工 1 从 2012 年 10 月 1 日到 2013 年 1 月 25 日连续受雇，但员工 2 将有 2 个单独的就业线，显示从 2012 年 10 月 1 日到 2012 年 11 月 5 日连续受雇和 012-11-30 到 2013-1-02 不同

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-25T16:29:42.730

该理论类似于[@mellamokb 的答案](https://stackoverflow.com/a/16219920)，但更简洁：

```
SELECT employee, MIN(start) start, end
FROM (
  SELECT   @end:=IF(employee<=>@emp AND @stt<=end+INTERVAL 21 DAY,@end,end) end,
           @stt:=start start,
           @emp:=employee AS employee
  FROM     my_table, (SELECT @emp:=NULL, @stt:=0, @end:=0) init
  ORDER BY employee, start DESC
) t
GROUP BY employee, end 
```

在[sqlfiddle](http://sqlfiddle.com/#!2/8aebd/2/0)上查看。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-25T16:20:29.007

在一组记录中找到“连续组”的一种方法是使用变量来跟踪每行之间的差异并开发将连续范围组合在一起的分组。在下面的示例中，我使用三个变量来跟踪用于生成组的足够信息：

*   @curEmployee - 从上一条记录中跟踪当前员工，并与当前记录上的员工进行比较，以了解我们何时切换到不同的员工，该员工自动成为另一个分组
*   @curEndDate - 跟踪上一条记录的最后结束日期，因此可以将其与当前记录的开始日期进行比较，以查看当前记录是否与上一条记录属于同一“组” - 也就是说，它是具有先前记录的连续就业的一部分
*   @curGroup - 这是将行分隔为代表连续就业的单独“组”的关键变量。逻辑是，当且仅当以下两个条件为真时，应该认为一行与上一行是连续的：两行具有相同的员工编号，并且上一行的结束日期距离上一行不到 21 天。当前行。
*   **注意**：您可能想要验证边缘条件，即，是否恰好相隔 20/21/22 天将被视为连续就业，并调整以下逻辑。

这是计算这些组的示例查询。`select`有几点需要注意：变量赋值的顺序很重要，因为它们在列表中是从上到下分配的。我们需要先进行赋值`@curGroup`，以便它仍然具有上一条记录的值`@curEmployee`以*供*`@curEndDate`使用。其次，该子句非常重要，以确保我们在比较先前记录和当前记录时，它们是彼此最接近的两条记录。如果我们以随机顺序查看记录，它们很可能最终都成为单独的组。*`order by`*

 *```
select
  e.employee, e.`start date`, e.`end date`
  ,@curGroup :=
    case when employee = @curEmployee
      and @curEndDate + INTERVAL 21 DAY >= e.`start date`
        then @curGroup
        else @curGroup + 1
    end as curGroup
  ,@curEmployee := employee as curEmployee
  ,@curEndDate := e.`end date` as curEndDate
from
  employment e
JOIN (SELECT @curEmployee := 0, @curEndDate := NULL, @curGroup := 0) r
order by e.employee, e.`start date` 
```

示例结果 ( [**DEMO**](http://www.sqlfiddle.com/#!2/fcfda/24) ) - 注意前两行是如何`CURGROUP`保持不变的`1`，因为它们彼此相隔 21 天并代表连续就业，而最后两行被标识为单独的组号：

```
| EMPLOYEE |                      START DATE |                        END DATE | CURGROUP | CUREMPLOYEE |          CURENDDATE |
-------------------------------------------------------------------------------------------------------------------------------
|        1 |  October, 01 2012 00:00:00+0000 | November, 05 2012 00:00:00+0000 |        1 |           1 | 2012-11-05 00:00:00 |
|        1 | November, 08 2012 00:00:00+0000 |  January, 25 2013 00:00:00+0000 |        1 |           1 | 2013-01-25 00:00:00 |
|        2 |  October, 01 2012 00:00:00+0000 | November, 05 2012 00:00:00+0000 |        2 |           2 | 2012-11-05 00:00:00 |
|        2 | November, 30 2012 00:00:00+0000 |  January, 02 2013 00:00:00+0000 |        3 |           2 | 2013-01-02 00:00:00 | 
```

现在我们已经建立了作为连续就业一部分的记录组，我们只需要按这些组编号进行分组，并找到输出的最小和最大日期范围：

```
select
  employee,
  min(`start date`) as `start date`,
  max(`end date`) as `end date`
from (
    select
      e.employee, e.`start date`, e.`end date`
      ,@curGroup :=
        case when employee = @curEmployee
          and @curEndDate + INTERVAL 21 DAY >= e.`start date`
            then @curGroup
            else @curGroup + 1
        end as curGroup
      ,@curEmployee := employee as curEmployee
      ,@curEndDate := e.`end date` as curEndDate
    from
      employment e
    JOIN (SELECT @curEmployee := 0, @curEndDate := NULL, @curGroup := 0) r
    order by e.employee, e.`start date`
) as T
group by curGroup 
```

示例结果（[**演示**](http://www.sqlfiddle.com/#!2/fcfda/23)）：

```
| EMPLOYEE |                      START DATE |                        END DATE |
--------------------------------------------------------------------------------
|        1 |  October, 01 2012 00:00:00+0000 |  January, 25 2013 00:00:00+0000 |
|        2 |  October, 01 2012 00:00:00+0000 | November, 05 2012 00:00:00+0000 |
|        2 | November, 30 2012 00:00:00+0000 |  January, 02 2013 00:00:00+0000 | 
```*

# c# - MonoTouch - 创建一个在单个标签中同时包含粗体和纯文本的 UILabel

> ID：16219504
> 
> 赞同：2
> 
> 时间：2013-04-25T15:58:38.560
> 
> 标签：c#, xamarin.ios, uilabel, nsattributedstring

谁能给我一个简单的例子，展示一个 UILabel 在单个标签中同时具有粗体和纯文本的创建？

我四处搜索并设法拼凑出一些可以显着修改 UILabel 外观的东西，但我不知道如何只更改标签的一部分......

肯定不会这么难吧？我想我需要创建一个 UILabel，使用 NSAttributedString 文本，并指定一个 NSRange 来说明我想要加粗的部分？

澄清一下，我正在使用 MonoTouch。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T16:13:26.707

像这样的东西，尽管您需要为 NSAttributedString 使用一组更复杂的属性

```
label.AttributedText = new NSAttributedString (
    "Label", 
    underlineStyle: NSUnderlineStyle.Single); 
```

# c# - 如何在 dll 项目中的 C++ 中创建命名空间和构造函数？

> ID：16219508
> 
> 赞同：1
> 
> 时间：2013-04-25T15:59:04.557
> 
> 标签：c#, c++, c

我在我的 Visual Studio 2012 Pro 上创建了一个新的 dll 项目，主 .cpp 文件是空的，除了这一行：

```
#include "stdafx.h" 
```

在这个 dll 项目中，我添加了一个新的 c 语言项（模块），其中包含一些功能。

事实上，我想在我的主 .cpp 文件中创建一些函数，这些函数将从 c 项（模块）调用该函数。

例如，在 .cpp 文件中，我会有这样的内容：

```
void start()

{

   encoder.start();

} 
```

然后在 .cpp 我需要添加一个构造函数，以便我可以在那里调用 start()

我应该怎么做？

这是我的解决方案中的一个示例，我有两个项目一个控制台应用程序一个 dll。这是控制台应用程序项目中主 cpp 文件的内容：

```
#include "stdafx.h"
#include "targetver.h"

extern "C" {
    void  video_encode_example(const char *filename);
}

int _tmain(int argc, _TCHAR* argv[])
{

    video_encode_example("adi.avi");
    return 0;
} 
```

vide_encode_example 是我在控制台应用程序项目中创建的这个 c 项（文件/模块）中的一个函数。我有一个名为 example.c 的文件，video_encode_example 在 example.c

现在我在解决方案中添加了一个新的 dll 项目，并且 main.cpp 文件为空，除了以下行：#include "stdafx.h"

我想在 main.cpp 的这个 dll 项目中做两件事：

1.  例如创建一些功能

    无效 thisstart() { }

然后我想在这个启动函数中调用我在 dll 项目中创建的 ac 文件/模块中的 start() 函数。

所以它应该看起来像：

```
void thisstart()
  {
    start();
  } 
```

哪里开始（）；来自 c 模块/文件

然后我将在 c# 中使用这个 dll，在 c# 中我希望能够使用 thisstart() 函数。

**编辑**

这是 main.h 的内容：

```
namespace dllproj{

    extern "C" void start();
    void thisstart();
} 
```

我现在在 dllproj 上遇到两个错误：

1.  错误 2 错误 C2054: 预期 '(' 跟随 'namespace'
2.  4 IntelliSense：需要一个标识符

然后这是现在的cpp文件内容：

```
#define dllproj;

#include "stdafx.h"
#include "targetver.h"
#include "main.h"

void thisstart()
 {
     dllproj;::start();
 } 
```

我收到两个错误：

1.  在定义行上：错误 1 ​​错误 C2008：';' : 宏定义中的意外
2.  在 dllproj;::start(); 错误 3 错误 C2143：语法错误：缺少 ';' 前 '：'

请向我展示完整的解决方案并向我解释稍后我将在 CSHARP 中使用哪个变量来为它创建一个实例并在 cpp 中调用此函数？

例如，在 csharp 中，当我添加 dll 时： test = new something(); 然后 test.thisstart();

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T16:45:52.147

来自评论**“start（）在（我创建test.c的c语言文件）的dll项目中”**

1）创建一个头文件，例如main.h并添加以下内容

```
namespace dllproj{

    extern "c" 
    {
       extern void start();
    }
    void thisstart();
} 
```

2）将 main.h 添加到 main.cpp 并定义`thisstart()`

```
 void dllproj::thisstart()
 {
     dllproj::start();
 } 
```

确保`__declspec(dllexport)`在 dll 中声明了 start()。

# javascript - iOS点击正在激活下拉菜单的父锚

> ID：16219511
> 
> 赞同：0
> 
> 时间：2013-04-25T15:59:09.513
> 
> 标签：javascript, jquery, ios, css

对于这个问题，我已经没有我能想到或找到的解决方案了。我正在处理一个固定在页面顶部的问题。左侧有一个锚点，可将您带到页面顶部，如果将鼠标悬停在它上面将显示其他外部链接。右侧是带有锚点的页面部分列表，您可以滚动到它们。

这一切在桌面上都可以正常工作，因为悬停和单击是单独的事件，但在 ipad 上它们是相同的。在 iPad 上，您应该能够触摸“产品列表”列表项并显示下拉菜单。如果再次触摸，它将带您回到顶部。现在，当您触摸它时，它将带您回到顶部并显示悬停。

这是一个重新创建代码和问题的jsfiddle。[http://jsfiddle.net/hyaTV/5/](http://jsfiddle.net/hyaTV/5/)

HTML

```
<ul class="one">
<li><a class="intrapage" href="#stage">Product Title</a>
    <ul>
        <li><a href="other product">other product</a></li> <!-- link that goes to different page -->
        <li><a href="other product">other product</a></li> <!-- link that goes to different page -->
    </ul>
</li>
</ul>
<ul class="two">
    <li><a class="intrapage" href="#section_one">birds</a></li> <!-- goes to Birds section -->
    <li><a class="intrapage" href="#section_two">bees</a></li> <!-- goes to bees section -->
</ul> 
```

CSS

```
ul.one{float:left;list-style:none;}
ul.one ul{display:none;}
ul.one > li:hover ul{display:block;}

/* styling for right side nav */
ul.two{float:right;list-style:none;}
ul.two li{display:inline-block;} 
```

JS

```
// scrolls window to element id with easing
$(".intrapage").click(function(event) {
    event.preventDefault();
$('html,body').animate({scrollTop:$(this.hash).offset().top}, 850);
return false;
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-26T16:21:17.187

我想出了一个似乎可行的解决方案。它将要求您的页面包含 Modernizr JS 以检查是否支持触摸。

JS

```
if (document.addEventListener) {
document.addEventListener("touchstart", function(){}, true);
}

if($('html').hasClass('touch')){

    $('.one > li').click(function(e){
        if($(this).hasClass('hover')){
    //      $(this).removeClass('hover');
        } else {
            $(this).toggleClass('hover');
        }
    });

    $('html').bind('touchstart', function(){
        if($('.one > li').is(':hover')){
                    // do nothing
        } else {
            $('.one > li.hover').removeClass('hover');
        }
    });

    $('.one a.intrapage').click(function(event){
        if($('.one > li').hasClass('hover')){
            event.preventDefault();
            $('html,body').animate({scrollTop:$(this.hash).offset().top}, 850);
            return false;               
        } else {
            event.preventDefault();
        }
    });

    $(".two .intrapage").click(function(event) {
        event.preventDefault();
        $('html,body').animate({scrollTop:$(this.hash).offset().top}, 850);
        return false;
    }); 

} else {
    $(".intrapage").click(function(event) {
        event.preventDefault();
        $('html,body').animate({scrollTop:$(this.hash).offset().top - 50}, 850);
        return false;
    }); 
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T16:38:34.047

您可以使用[iOS :hover 问题](http://www.nczonline.net/blog/2012/07/05/ios-has-a-hover-problem/)来发挥您的优势。我相信通过将您的 CSS 更改为

```
ul.one > li ul { display: none; }
ul.one > li:hover ul { display: block; } 
```

也就是说，上述*问题*在其他移动操作系统上不存在。没有办法在 iOS上*鼠标移出。*

最好[检测用户是否在移动设备上](https://stackoverflow.com/questions/4817029/whats-the-best-way-to-detect-a-touch-screen-device-using-javascript)并添加`.mobile`javascript，然后在*点击*事件`<body>`上切换子菜单。

 *CSS

`ul.one > li:hover ul, ul.one > li.hover ul { display: block; }`

JS

```
$('body.mobile ul.one > li').click(function(e) {
  $(this).toggleClass('hover');
}); 
```*

# rabbitmq - RabbitMQ 队列偷看

> ID：16219513
> 
> 赞同：9
> 
> 时间：2013-04-25T15:59:15.310
> 
> 标签：rabbitmq

我是 RabbitMQ 的新手，我对管理插件中的获取消息选项有疑问。它说“单击'获取消息'将使用队列中的消息。如果设置了重新排队，则消息将重新添加到队列中，但不会保留顺序并且将设置'重新传递'。”

[这篇文章](http://comments.gmane.org/gmane.comp.networking.rabbitmq.general/12034)说

> 在下一个版本的 rabbit（v2.6.1 之后）中，重新排队消息时订单不会被破坏。消息将重新排队到队列的前面，这意味着您可以“窥视”队列的头部。您可以使用管理界面或使用 AMQP 客户端来执行此操作。

那么为什么管理插件说订单不会被保留呢？我只是想了解哪个是正确的？

谢谢

* * *

我收到了 RabbitMQ 团队的回复。这就是他们所说的......

25/04/13 01:05，Prazzy 写道：

> 那么为什么管理插件说订单不会被保留呢？我只是想了解哪个是正确的？

管理插件似乎没有更新。我会解决的。感谢您指出。

干杯，西蒙

-- Simon MacMullen RabbitMQ，VMware

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-11-29T06:01:40.113

**管理插件错误。**

正如RabbitMQ团队的回复所说，您的问题的答案是管理插件错误。该行为在 2.6.1 中进行了更改，以将消息重新排队以尽可能接近原始顺序 - 在这种情况下几乎肯定会位于队列的头部。

**当心副作用。**

然而，正如[这个答案](https://stackoverflow.com/questions/21363302/rabbitmq-message-order-of-delivery/21363518#21363518)所指出的那样，“偷看”对于实际发生的事情来说是一个听起来相当温和的术语：一条消息（无论多么短暂）从队列中删除，然后放回。在这段短暂的时间内，可能会有另一条消息被传递给消费者，在这种情况下，您的“偷看”消息仍将返回到头部，但消息可能会被无序处理。

# android - 当应用程序进入后台时停止服务，使用通用的基本活动

> ID：16219515
> 
> 赞同：2
> 
> 时间：2013-04-25T15:59:25.053
> 
> 标签：android, android-activity, android-service

我有一个基本活动类来实现所有活动的共同行为。它们都扩展了这个 BaseActivity。

我在 BaseActivity 的 onStart 方法中绑定到一个服务，并在 onStop 方法中*有条件*地解除绑定。有条件地，我的意思是根据用户选择的某些选项，当应用程序进入后台时，服务应该或不应该继续在后台运行。

问题是，有时服务会在不应该运行的时候继续运行（也就是说，当启用了终止它的选项，并且有效地调用了 unbindService() 时）。

我在想，在每次 Activity 更改时，服务都未绑定并再次绑定。由于绑定的服务是引用计数的，也许我的服务被绑定的次数比未绑定的次数多，所以这就是为什么它最终会继续运行，即使我调用 unbindService() 也是如此。

此外，[文档](http://developer.android.com/guide/components/bound-services.html#Binding)中对此进行了说明：

> 您通常应该在客户端生命周期的匹配启动和拆卸时刻配对绑定和取消绑定。例如：
> 
> 如果您只需要在活动可见时与服务交互，则应在 onStart() 期间绑定并在 onStop() 期间取消绑定。
> 
> 如果您希望您的活动即使在后台停止时也能收到响应，那么您可以在 onCreate() 期间绑定并在 onDestroy() 期间取消绑定。请注意，这意味着您的活动需要在其运行的整个过程中（甚至在后台）都使用该服务，因此如果该服务在另一个进程中，那么您会增加该进程的权重，并且系统更有可能会杀了它。

由于我正在尝试实施这两个选项，因此实施此选项的最佳方法应该是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-29T07:32:28.563

最后我改变了我的方法，决定只`startService()`使用本地广播接收器并与服务通信。

我在 Base Activity`onCreate()`的方法中启动服务并停止它。`onDestroy()`然后，要从服务向活动发送消息，我使用以下命令：

```
private void sendBroadcastMessage(String msg) {
    Log.d(LOG_TAG, "send broadcast message: " + msg);
    Intent intent = new Intent(MyService.class.getSimpleName());
    // Add data
    intent.putExtra("message", msg);
    LocalBroadcastManager.getInstance(this).sendBroadcast(intent);
} 
```

然后，在活动中得到通知：

```
// handler for the events launched by the service
private BroadcastReceiver mMyServiceReceiver = new BroadcastReceiver() {
    @Override
    public void onReceive(Context context, Intent intent) {
        // Extract data included in the Intent
        String message = intent.getStringExtra("message");
        Log.d(LOG_TAG, "Got message: " + message);
        // Do stuff...
    }
}; 
```

并在活动中注册接收者：

```
@Override
public void onResume() {
    super.onResume();

    LocalBroadcastManager.getInstance(this).registerReceiver(mMonitorReceiver,
          new IntentFilter(MyService.class.getSimpleName()));
} 
```

# java - 如何将 JFrame 保持在特定的宽度和高度？

> ID：16219516
> 
> 赞同：1
> 
> 时间：2013-04-25T15:59:26.670
> 
> 标签：java, swing, jframe

我制作了一个 840 x 400 的框架并添加了一个文本字段。默认情况下，java 应用程序只缩小到文本字段的大小。我希望它固定到相应的大小。

我试过了`setResizable(false)`，没有用。`setExtendedState()``setBounds()`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-25T16:14:52.403

最好使用 JPanel 作为您的 contentPane 或将其添加到 contentPane，并`getPreferredSize() method and then use`在 JFrame 上覆盖其 pack()`。例如：

```
import java.awt.Dimension;
import javax.swing.*;

@SuppressWarnings("serial")
public class MyPanel extends JPanel {
   private static final int PREF_W = 400;
   private static final int PREF_H = 300;

   public MyPanel() {
      //...
   }

   @Override
   public Dimension getPreferredSize() {
      return new Dimension(PREF_W, PREF_H);
   }

   private static void createAndShowGui() {
      MyPanel myPanel = new MyPanel();
      JFrame frame = new JFrame("My GUI");
      frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
      frame.getContentPane().add(myPanel);
      frame.setResizable(false);
      frame.pack();
      frame.setLocationRelativeTo(null);
      frame.setVisible(true);
   }

   public static void main(String[] args) {
      SwingUtilities.invokeLater(new Runnable() {
         public void run() {
            createAndShowGui();
         }
      });
   }
} 
```

这样做的一个优点是其他类不能通过`setSize(...)`或更改 MyPanel 的大小`setPreferredSize(...)`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-25T16:02:19.510

尝试

```
 setPreferredSize(new Dimension(840,400)); 
```

如果你命名你的框架，你可以做

```
 name.setPreferredSize(new Dimension(840,400)); 
```

# c# - 具有多个 AND 条件的 DataTable 选择实现

> ID：16219521
> 
> 赞同：4
> 
> 时间：2013-04-25T15:59:38.783
> 
> 标签：c#, performance, select, datatable

我有一个包含大约 50,000 行的 DataTable，用于`DataTable.Select`从中检索行。`Select`需要多个条件，`AND`包括通配符匹配。我玩过，发现通过`Select`多步执行相同的操作，可以大大减少执行时间，但更改`AND`语句的顺序并不会影响它。

```
//This takes ~ 750 ms
DataRow[] results = myDataTable.Select("Field1 LIKE '*" + term1 + "*'" +
"AND Field2 = '" + term2 + "'" +
"AND Field3 = '" + term3 + "'");

//This also takes ~750 ms
DataRow[] results2 = myDataTable.Select("Field3 = '" + term3 + "'" +
"AND Field2 = '" + term2 + "'" +
"AND Field1 LIKE '*" + term1 + "*'");  

//This takes 0.415 ms
DataTable table1 = myDataTable.Select("Field3 = '" + term3+ "'").CopyToDataTable();
DataTable table2 = table1.Select("Field2 = '" + term2 + "'").CopyToDataTable();
DataRow [] results3 = table2.Select("Field1 LIKE '*" + term1 + "*'"); 
```

我的问题是，有没有办法总是让操作以从左到右的顺序`SELECT`评估条件，以便在步骤之间减少搜索的记录数？`AND`看起来这可能是一个很好的节省时间的方法。谢谢你的想法。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-25T16:06:27.973

您可以使用`Linq`（请注意，最慢的条件是最后一个）：

```
IEnumerable<DataRow> rows = myDataTable.AsEnumerable()
    .Where(r => r.Field<string>("Field2") == term2
            &&  r.Field<string>("Field3") == term3
            &&  r.Field<string>("Field1").Contains(term1)); 
```

如果`CopyToDataTable`您想从结果中创建一个新的 DataTable，请使用它`ToArray`来创建`DataRow[]`或保留它并用于`foreach`枚举结果而不创建新集合。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T16:06:03.147

不..数据表逐行进行选择。

你可以把你的代码写得更短一点：

```
DataRow [] results = myDataTable
     .Select("Field3 = '" + term3+ "'").CopyToDataTable()
     .Select("Field2 = '" + term2 + "'").CopyToDataTable()
     .Select("Field1 LIKE '*" + term1 + "*'"); 
```

或者......如果你做一个额外的扩展方法，像这样：

static public DataRow[] Select(this IEnumerable rows, string filter) { return rows.CopyToDataTable().Select(filter); }

使用这个扩展可以让你的代码更短：

```
DataRow [] results = myDataTable
     .Select("Field3 = '" + term3+ "'")
     .Select("Field2 = '" + term2 + "'")
     .Select("Field1 LIKE '*" + term1 + "*'"); 
```

或者：

```
static public DataRow[] Select(this DataTable dt, string firstFilter, params string[] filters)
{
    DataRow[] result = dt.Select(firstFilter);
    foreach(string filter in filters)
        result = result.CopyToDataTable().Select(filter);
    return result;
} 
```

开辟道路：

```
DataRow [] results = myDataTable.Select(
    "Field3 = '" + term3+ "'", 
    "Field2 = '" + term2 + "'",
    "Field1 LIKE '*" + term1 + "*'"); 
```

# java - Android展开视图ontouch of button

> ID：16219525
> 
> 赞同：1
> 
> 时间：2013-04-25T15:59:53.863
> 
> 标签：java, android, touch-event

我想像 exapnd 和 collapse 那样动态更改视图高度，并且按钮的位置（y）也应该改变..它就像移动按钮并根据那个扩展视图..
我的代码是......

```
button.setOnTouchListener(new OnTouchListener() {
@Override
        public boolean onTouch(View v, MotionEvent event) {
            if (event.getAction() == MotionEvent.ACTION_MOVE) {
                 int height = (int) event.getY();
                 android.widget.RelativeLayout.LayoutParams lpview =
                 (android.widget.RelativeLayout.LayoutParams) view
                 .getLayoutParams();
                 android.widget.RelativeLayout.LayoutParams lpbutton =
                 (android.widget.RelativeLayout.LayoutParams) button
                 .getLayoutParams();
                 lpbutton.topMargin = height;
                 button.setLayoutParams(lpbutton);
                 lpview.height = height;
                 view.setLayoutParams(lpview);

            } 
            return true;
        }
    }); 
```

但我的问题是在扩展时它不能顺利扩展......有什么建议吗？？？？

# regex - ANTLR3 字符串文字和不允许嵌套注释

> ID：16219532
> 
> 赞同：0
> 
> 时间：2013-04-25T16:00:03.130
> 
> 标签：regex, antlr, token, antlr3, antlrv3ide

我最近的任务是为一种虚构语言编写 ANTLR3 语法。其他一切似乎都很好，但我有几个小问题可以通过一些帮助来解决：

1) 注释在`'/*'`和之间`'*/'`，不能嵌套。我知道如何自己实现注释（`'/*' .* '*/'`），但是我将如何禁止它们的嵌套呢？

2) 字符串字面量定义为一对双引号之间的任何字符序列（双引号和换行符除外）。它们只能在输出语句中使用。我试图这样定义：

```
output : OUTPUT (STRINGLIT | IDENT) ;
STRINGLIT : '"' ~('\r' | '\n' | '"')* '"' ; 
```

然而，由于某种原因，解析器接受

```
OUTPUT "Hello,
World!" 
```

并将其标记为`"Hello, \nWorld`. `"`我不知道感叹号或结束在哪里。也许与空白有关？

```
WHITESPACE : ( '\t' | ' ' | '\n' | '\r' | '\f' )+ { $channel = HIDDEN; } ; 
```

任何建议将不胜感激 - 感谢您的宝贵时间！:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T16:12:40.270

1.  您编写的表单已经不允许嵌套注释。`*/`即使`/*`评论中出现了多个序列，令牌也会在 的第一个实例处停止。要*允许*嵌套注释，您必须编写一个词法分析器规则来专门处理嵌套。

2.  这里的问题是`STRINGLIT`不允许将字符串拆分为多行。在没有看到其他词法分析器规则的情况下，我无法告诉您将如何对其进行标记，但是从`STRINGLIT`您给出的规则中可以清楚地看出，示例输入不是有效的字符串。

注意：您在原始问题中给出的输入不清楚，因此我重新格式化它以显示您使用的确切输入。你能验证我的编辑是否正确地代表了输入吗？

# jquery - 靠近窗口顶部时滚动到元素顶部

> ID：16219535
> 
> 赞同：0
> 
> 时间：2013-04-25T16:00:15.650
> 
> 标签：jquery, scroll

我正在努力实现以下目标：

我有一个 div，当它几乎位于页面顶部时，我想自动滚动到该 div 的顶部。

这是我到目前为止的脚本。如您所见（我希望）。当#plus 距离页面顶部 250 到 20 px 时，我想运行将 #editions 定位在页面顶部的动画。然而，动画被执行了很多次，并且一直在继续。我认为它会为 250 到 20 之间的每个值触发，所以基本上是 230 次。我不确定我是否以正确的方式解决这个问题。

```
// Scroll to Editions //
function scrollEditions(){
    $('html, body').animate({
    scrollTop: $("#plus").offset().top
}, 1200, 'easeOutQuint').delay(200).animate({
    scrollTop: $("#editions").offset().
    }, 800, 'easeOutQuint');
};

// Scrolling check //
function showHideTitles(){
    // Distance of elements frop top //
    var Ptop2 = Math.round($('#plus').offset().top - $(window).scrollTop());        // PLUS from top

    // Auto scrolling //
    if (Ptop2 <= 240 && Ptop2 >= 20){
        scrollEditions();
    }
};

$(window).scroll(function(){
    showHideTitles()
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T16:10:10.967

如果您正在滚动自己的实现，您将需要使用 debounce 函数在给定的时间间隔内触发一次您的操作。

[http://underscorejs.org/#debounce](http://underscorejs.org/#debounce)

[http://jsfiddle.net/puleos/j67eG/40/](http://jsfiddle.net/puleos/j67eG/40/)

```
 var fn = _.debounce(showHideTitles, 300);

 $(window).scroll(fn); 
```

如果你想要一个 jquery 库来处理滚动事件航点是非常好的。
[http://imakewebthings.com/jquery-waypoints/](http://imakewebthings.com/jquery-waypoints/)

# oracle - 模式中所有表的行数

> ID：16219537
> 
> 赞同：0
> 
> 时间：2013-04-25T16:00:17.850
> 
> 标签：oracle, plsql

```
DECLARE 
    v_owner varchar2(40); 
    v_table_name varchar2(40); 
    cursor get_tables is 
        select distinct table_name
             , user 
          from user_tables 
         where lower(user) = 'schema_name'
    ; 

BEGIN 
    OPEN get_tables; 
    LOOP
        FETCH get_tables
         INTO v_table_name
            , v_owner
            ; 
        EXIT WHEN get_tables%NOTFOUND;
        EXECUTE IMMEDIATE 
             'INSERT
                INTO STATS_TABLE
                   ( TABLE_NAME
                   , SCHEMA_NAME
                   , RECORD_COUNT
                   , CREATED
                   ) 
                     SELECT ''' 
                                || v_table_name 
                   || ''' , ''' || v_owner 
                   || ''' ,        COUNT(*)
                          ,        TO_DATE(SYSDATE,''DD-MON-YY'')
                       FROM '   || v_table_name
        ; 
    END LOOP; 
    CLOSE get_tables; 
END; 
```

我正在使用它来获取模式中所有表的行数。我从 stackoverflow 得到了这个查询。

我将其作为成功编译的程序运行，但我无法查看结果，是这样吗？

我是 pl/sql 的新手，谁能解释一下 select 语句在执行立即查询后做了什么我无法理解背后的逻辑。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2019-10-31T06:59:48.080

您可以通过以下方式简单地获取表的行数：

```
select owner, table_name, nvl(num_rows,-1) 
from all_tables 
order by nvl(num_rows,-1) desc 
```

[https://livesql.oracle.com/apex/livesql/file/content_EPJLBHYMPOPAGL9PQAV7XH14Q.html](https://livesql.oracle.com/apex/livesql/file/content_EPJLBHYMPOPAGL9PQAV7XH14Q.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-11-20T16:44:19.350

尝试这个：

```
select TABLE_NAME, NUM_ROWS from dba_tables where owner = 'xxxxx' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-26T13:56:28.687

此过程运行成功

```
DECLARE
  v_owner      varchar2(40);
  v_table_name varchar2(40);
  cursor get_tables is
    select distinct table_name, user
      from user_tables
     where lower(user) = 'coreown'  ;

BEGIN
  OPEN get_tables;
  LOOP
    FETCH get_tables
      INTO v_table_name, v_owner;
    EXIT WHEN get_tables%NOTFOUND;
    EXECUTE IMMEDIATE 'INSERT
                INTO STATS_TABLE
                   ( TABLE_NAME
                   , SCHEMA_NAME
                   , RECORD_COUNT
                   , CREATED
                   ) 
                     SELECT ''' || v_table_name ||
                      ''' , ''' || v_owner || ''' ,        COUNT(*)
                          ,        TO_DATE(SYSDATE,''DD-MON-YY'')
                       FROM ' || v_table_name;
  END LOOP;
  CLOSE get_tables;
END;
/ 
```

我试过了。

执行 USE 后`COMMIT`，它将保存更改为 DB。然后再次检查。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-25T16:02:05.323

行计数被插入到表名`STATS_TABLE`中。你需要运行一个

```
select *
from stats_table 
```

运行程序后

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-25T19:33:48.393

好吧，user_tables 没有用户列，因此该查询无效。始终单独测试查询——您可能想要`all_tables`或`dba_tables`. 另外，您认为您需要`DISTINCT`对该查询进行查询吗？

尽可能使用隐式游标而不是显式游标——更少的代码、更少的编码错误和更快的速度。

不要将日期存储为字符类型——您只需插入`sysdate`，而不是将其表示为字符串。

不要用“v_”作为变量名的前缀——只需用过程或块名称命名它们。

`Execute Immediate`构造一个执行 stats_table 的 SQL 语句（`insert into`为什么它的名称中有“table”这个词？这肯定是多余的吗？）

查询将被构造为：

```
INSERT INTO STATS_TABLE
     (   TABLE_NAME
       , SCHEMA_NAME
       , RECORD_COUNT
       , CREATED
     ) 
SELECT 'MY_TABLE_NAME' , 'MY_USERNAME' , COUNT(*) , SYSDATE
FROM MY_TABLE_NAME; 
```

# c++ - 为 API 使用内联函数

> ID：16219539
> 
> 赞同：0
> 
> 时间：2013-04-25T16:00:35.037
> 
> 标签：c++, optimization, inline, multiplatform

我想创建一个 API，它在调用函数时`getCPUusage()`重定向到`getCPUusage()`Windows 或 Linux 的函数。所以我使用胶水文件`api.h`：

```
getCPUusage() {
    #ifdef WIN32
        getCPUusage_windows();
    #endif
    #ifdef __gnu_linux__
       getCPUusage_linux();
    #endif
} 
```

所以我想知道 using`inline`是否会是一个更好的解决方案，因为有了我所拥有的，电话会更大。

我的问题如下：在这种情况下，每次调用都使用内联函数更好吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T16:05:54.370

这取决于您的程序的用例。如果 consumer 仍然是 c++ - 那么 inline 就有意义了。但只是假设您想在 C、Pascal、Java 中重用它......在这种情况下，内联不是一种情况。调用者必须通过 lib 以某种方式导出稳定的名称，但不能从头文件中导出。Lib for linux 是相当透明的，而在 Windows 上你需要 apply`__dllexport`关键字——这不适用于`inline`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T16:06:58.043

答案是：是的，它确实更高效，但可能不值得：

如果您将这些函数放在一个类中，则不需要在您的情况下写下“inline”关键字，因为您只有一个头文件（您没有任何 cpp 文件 - 根据您的描述）。**在类定义中（在头文件中）实现的函数将被编译器自动视为内联函数。**但是请注意，这只是对编译器的“提示”。如果发现（编译器）更有效，编译器仍可能决定使您的函数非内联。对于像你这样的小函数，它很可能会产生实际的内联函数。

如果您没有将这些函数放在一个类中，我认为您也不应该费心添加内联，因为（如上所述）它只是一个“提示”，即使没有这些“提示”，现代编译器也会弄清楚什么无论如何要内联的功能。无论如何，人类比编译器更容易在这些事情上出错。

# google-cloud-datastore - 持久化集合 在 GAE 上使用 Objectify4

> ID：16219541
> 
> 赞同：0
> 
> 时间：2013-04-25T16:00:47.080
> 
> 标签：google-cloud-datastore, objectify

我一直在使用 Objectify4 在 Google 数据存储上保存通用集合时遇到问题。例如

```
@Entity
class AnimalInfo
{
  @Id
  String id;
  Collection<Animal> animals;
}

@EntitySubClass
class Cat extends Animal
{
  String name;
}

@EntitySubClass
class Dog extends Animal
{
  String name;
}

@Entity
class Animal
{
  @Id
  String id;
} 
```

如何持久保存 AnimalInfo 类并再次检索它。我已经尝试过： `objectify.save().entities(animalInfo).now();`但是在再次取回它时：`objectify.load().type(AnimalInfo.class).id(animalInfo.id).get();`没有`name`与扩展类 Cat 或 Dog 对应的字段。

这也可能是合乎逻辑的，因为 Animal 类没有字段`name`。但是我怎样才能让它工作呢？通用接口 IAnimal（代替 Animal 类）在设计方面是更好的解决方案，但这不适用于 Objectify，因为它需要具体类型。

以上问题有什么解决办法？？

* * *

提前致谢。

肖恩

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T19:02:09.793

To summarize, it looks like you want a collection of references to polymorphic entities. Do this:

```
@Entity
class AnimalInfo {
  @Id String id;
  Collection<Ref<Animal>> animals = new ArrayList<Ref<Animal>>();
} 
```

You need Refs to create the reference to the other entities. You could use Key too, but it will be less convenient. You may also want to look into the `@Load` annotation.

# scala - Scala：具有多个源和异构类型的交叉（笛卡尔）产品

> ID：16219545
> 
> 赞同：6
> 
> 时间：2013-04-25T16:00:59.930
> 
> 标签：scala, reflection, type-erasure, cartesian-product, cross-product

我正在尝试构建不同（但每个同质）类型的可遍历的多个交叉产品。所需的返回类型是元组的可遍历，其类型与输入可遍历中的类型匹配。例如：

```
List(1, 2, 3) cross Seq("a", "b") cross Set(0.5, 7.3) 
```

这应该给出`Traversable[(Int, String, Double)]`来自三个来源的所有可能组合。仅结合两个来源的情况在[这里得到了很好的回答](https://stackoverflow.com/a/14740340/1804173)。给定的想法是：

```
implicit class Crossable[X](xs: Traversable[X]) {
  def cross[A](ys: Traversable[A]) = for { x <- xs; y <- ys } yield (x, y)
} 
```

那里的评论简要提到了更多来源的问题，但我正在寻找一个不依赖于 shapeless 或 scalaz 的解决方案（另一方面，我不介意有一些样板文件可以扩展到`Tuple22`）。我想做的是如下所示：

```
implicit class Crossable[X](xs: Traversable[X]) {
  def cross[A](ys: Traversable[A]) = for { x <- xs; y <- ys } yield (x, y)
  def cross[A,B](ys: Traversable[(A,B)]) = // ... extend all Tuple2's in ys with x in xs to Tuple3's
  def cross[A,B,C](ys: Traversable[(A,B,C)]) = // ...
  // ...
} 
```

由于类型擦除，这显然不起作用（不幸的是，可能需要在上面的示例中使用括号，因为`cross`它是右关联的）。

我的问题是：是否有可能利用 Scala 2.10 的反射特性来解决问题？一般来说，匹配`A`各种`X`元组类型（及其类型参数，这似乎具有挑战性）并将它们合并到更大的元组应该提供满足关联法则的解决方案，对吧？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-25T18:05:37.167

我试了一下，想出了这个：

```
trait Crosser[A,B,C] {
  def cross( as: Traversable[A], bs: Traversable[B] ): Traversable[C]
}

trait LowPriorityCrosserImplicits {
  private type T[X] = Traversable[X]

  implicit def crosser2[A,B] = new Crosser[A,B,(A,B)] {
    def cross( as: T[A], bs: T[B] ): T[(A,B)] = for { a <- as; b <- bs } yield (a, b)
  }
}

object Crosser extends LowPriorityCrosserImplicits {
  private type T[X] = Traversable[X]

  implicit def crosser3[A,B,C] = new Crosser[(A,B),C,(A,B,C)] {
    def cross( abs: T[(A,B)], cs: T[C] ): T[(A,B,C)] = for { (a,b) <- abs; c <- cs } yield (a, b, c)
  }

  implicit def crosser4[A,B,C,D] = new Crosser[(A,B,C),D,(A,B,C,D)] {
    def cross( abcs: T[(A,B,C)], ds: T[D] ): T[(A,B,C,D)] = for { (a,b,c) <- abcs; d <- ds } yield (a, b, c, d)
  }

  // and so on ...
}

implicit class Crossable[A](xs: Traversable[A]) {
  def cross[B,C](ys: Traversable[B])(implicit crosser: Crosser[A,B,C]): Traversable[C] = crosser.cross( xs, ys )
} 
```

`Crosser`主要思想是将工作`Traversable`推迟到一个类型类（REPL 中的一些测试：

```
scala> List(1, 2, 3) cross Seq("a", "b") cross Set(0.5, 7.3)
res10: Traversable[(Int, String, Double)] = List((1,a,0.5), (1,a,7.3), (1,b,0.5), (1,b,7.3), (2,a,0.5), (2,a,7.3), (2,b,0.5), (2,b,7.3), (3,a,0.5), (3,a,7.3), (3,b,0.5), (3,b,7.3)) 
```

# android - 源和目标之间的最佳路径 - android

> ID：16219547
> 
> 赞同：0
> 
> 时间：2013-04-25T16:01:09.513
> 
> 标签：android, google-maps-android-api-2, dijkstra

我是 android 开发的新手，我已经完成了一些涉及 Google 地图的应用程序。我现在正在尝试开发的是一个最佳路径查找器应用程序。我知道已经有很多应用程序可用于此目的，但我打算自己做。我打算为此使用 Dijkstra 算法。初始输入是源和目的地，输出必须是在谷歌地图上绘制的源和目的地之间的最佳路径。我对执行此应用程序所需的步骤有所了解。

第 1 步：提取源和目标之间的中间位置。
第 2 步：将这些节点添加到图形数据结构中。
第 3 步：应用 Dijkstra 算法并找到路径。
第 4 步：在 Google 地图上绘制路径。

我的想法是否正确？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-30T09:25:59.257

是的，你的想法是正确的:)！还可以考虑将数据源的openstreetmaps 和mapsforge 作为离线地图切片提供者。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-27T19:15:37.940

尝试这个：

1.放入`ruledijkstra.html`文件夹资产

2.使用此代码加载：

```
private void getLocation(){
    WebSettings webSettings = mWebView.getSettings();

    mWebView.loadUrl("file:///android_asset/maps.html");
    String path="javascript:loadAtStart(-6.184505,106.797685,11)";
    mWebView.loadUrl(path);
} 
```

3.资产代码： `ruledijkstra.html`或者你可以google:etc [http://www.zlink.com.br/optimap/index.php?&loc0=-7.1209077392192785,-34.9075984954834&loc1=-7.121418750873643,-34.903221130371094&loc852=-7.12,-885 34.93025779724121](http://www.zlink.com.br/optimap/index.php?&loc0=-7.1209077392192785,-34.9075984954834&loc1=-7.121418750873643,-34.903221130371094&loc2=-7.128828355854018,-34.93025779724121)

# html - 使用 display: inline-block 时出现奇怪的线条；内部标签

> ID：16219550
> 
> 赞同：0
> 
> 时间：2013-04-25T16:01:13.457
> 
> 标签：html, css

 每当我在标签内创建`div`with`display: inline-block;`样式`a`时，我都会在底部看到这些奇怪的线条，这些线条毫无明显原因地显示出来。问题似乎只有在我将标签`div`放在`a`标签内部时才会重现，而不是反之亦然，但我在`a`div 周围有标签的原因是用它们制作按钮。

这有点难以解释，但我做了一个小提琴来重现这个问题，所以我可以把它展示给你。 

[http://jsfiddle.net/bcnobel/6L92C/2/](http://jsfiddle.net/bcnobel/6L92C/2/)
注意 div 之间的黑线。

有没有人以前也有过这种情况？
有人知道一个简单（但优雅）的解决方法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-25T16:04:29.803

它们是链接，默认情况下具有`text-decoration:underline;`. 设置标签，你会没事的`text-decoration:none;`。`a`

[更新了 jsFiddle](http://jsfiddle.net/6L92C/5/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T16:05:52.020

在风格上使用这个

```
 <a href="r#" style="text-decoration: none"> 
```

# ios - 将 UIBarButton 更改为红色

> ID：16219558
> 
> 赞同：-3
> 
> 时间：2013-04-25T16:01:55.807
> 
> 标签：ios, objective-c, uibarbuttonitem

我想以红色显示 EDIT 按钮而不是 SAVE 按钮，如下所示

```
UIBarButtonItem *barBtn = [[UIBarButtonItem alloc] initWithTitle:(_isEdit)? 
@"Save" : @"Edit" style:UIBarButtonItemStyleBordered
target:self action:@selector(togleEdit)];

[UIBarButtonItem appearance] setTintColor:[UIColor redColor]]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T16:10:04.670

您可以使用以下消息更改 UIBarButton 的背景图像：

```
setBackgroundImage:forState:style:barMetrics: 
```

[您可以在会议视频中的https://developer.apple.com/videos/wwdc/2012/](https://developer.apple.com/videos/wwdc/2012/)上找到有关该主题的更多信息 ：iOS 上的高级外观定制。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T16:26:25.097

```
UIBarButtonItem *barBtn = 
    [[UIBarButtonItem alloc] initWithTitle: (_isEdit) ? @"Save" : @"Edit" 
                                     style: UIBarButtonItemStyleBordered
                                    target: self 
                                    action: @selector(togleEdit)];
if (!_isEdit)
    [barBtn setTintColor:[UIColor redColor]]; 
```

# ios - 在 MonkeyTalk 测试中无法点击任何 UIVIew

> ID：16219559
> 
> 赞同：2
> 
> 时间：2013-04-25T16:02:01.183
> 
> 标签：ios, uiview, monkeytalk

我们无法成功点击任何具有 UITapGestureRecognizers 的子类 UIView。我们知道 UIViews 上有正确的 AccessibilityLabels，因为当我们运行测试时，测试不会无法识别 Views，我们会看到在 View 区域上发生的点击，并且我们能够手动记录我们的操作并它就像我们输入测试一样填写它。可悲的是，我们的 View 上实际上没有任何水龙头注册，我们的测试最终什么也没做。

按钮、ButtonSelects 等都可以正常工作。

我们在这里缺少什么吗？任何帮助将不胜感激。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-02-20T15:29:51.637

通过分析 MonkeyTalk 源代码，我发现带有手势识别器的自定义视图必须是第一个接收触摸的视图。这意味着它的所有子视图都必须将 userInteractionEnabled 设置为 NO。在我进行此更改后，它对我有用。

# machine-learning - 有没有办法使用 SVM 来构建包含预定义百分比的训练数据的模型？

> ID：16219563
> 
> 赞同：0
> 
> 时间：2013-04-25T16:02:06.197
> 
> 标签：machine-learning, classification, svm, libsvm

比如说，我希望使用 LIBSVM 来构建一个包含 70% 训练数据的模型。那可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-05T01:47:46.617

没有任何技术可以让您提前准确指定模型将包含多少个支持向量。一个可能的例外是最小二乘 SVM 的固定大小公式，它允许您提前指定内核的大小（对于 LS-SVM，每个训练实例都是一个 SV）。

请注意，在大多数情况下，对于典型的支持向量机来说，70% 的支持向量非常高，所以我看不出你想要这个的直接原因。

但是，您可以使用 Schölkopf 等人的 nu-SVM 等公式指定支持向量的最小比例：

B. Schölkopf、A. Smola、RC Williamson 和 PL Bartlett。新的支持向量算法。神经计算，12：1207-1245，2000。

在这个公式中，您将至少有分数 nu 支持向量（0 < nu <= 1）。例如，nu-SVM 在 LIBSVM 中实现（`-s 1`用于 nu-SVC 或`-s 4`nu-SVR）。有关更多信息，您可以参考[此 pdf（第 4 页）](http://www.csie.ntu.edu.tw/~cjlin/papers/libsvm.pdf "这个pdf")或 google nu-SVM 以查找有关它的各种论文。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-16T15:18:47.913

如果你查看 libsvm 的工具文件夹，你会发现一个名为 subset.py 的 Python 脚本。您可以使用它来随机选择数据的子集进行训练。

# c++ - SDL 中的 Fill_Rect

> ID：16219578
> 
> 赞同：0
> 
> 时间：2013-04-25T16:02:44.857
> 
> 标签：c++, c, linux, unix, sdl

我有一些关于 SDL_FillRect 的问题。

通常函数是这样工作的： SDL_FillRect(screen, &screen->clip_rect, color);

我的问题是，我可以用包含不同红色、蓝色和绿色像素通道的多种颜色填充我的 Rect，而不是传递一种颜色？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T16:04:29.783

您将如何确定颜色模式？我认为你会得到最接近的是 with `SDL_BlitSurface`。图案化一个表面，然后将其粘贴到另一个表面上。

[http://www.libsdl.org/docs/html/sdlblitsurface.html](http://www.libsdl.org/docs/html/sdlblitsurface.html)

# java - 将类编组到 XSD:Anytype xml

> ID：16219579
> 
> 赞同：2
> 
> 时间：2013-04-25T16:02:48.040
> 
> 标签：java, xsd, jax-ws, marshalling

我的问题是我有一个 MessageList 类型的类，其中包含 Message 项，定义如下：

```
<xsd:complexType name="MessageType">
    <xsd:sequence>
        <xsd:any/>
    </xsd:sequence>
</xsd:complexType>
<xsd:element name="Message" type="tns:MessageType"/>
<xsd:complexType name="MessageListType">
    <xsd:sequence>
        <xsd:element name="Message" maxOccurs="unbounded"/>
    </xsd:sequence>
</xsd:complexType>
<xsd:element name="MessageList" type="tns:MessageListType"/> 
```

我的消息类看起来像（我在这里遗漏了 getter 和 setter）

```
public class Message
{
private String referenceId;
private String messageType;
private Timestamp createdTime;
private String transactionIdForeignKey;
private String xmlDetail;
} 
```

当我尝试在我的 servlet 中编组这个类时：

```
 List<Message> retrievedMessages = new ArrayList<Message>();
         retrievedMessages.add(new Message);
         retrievedMessages.add(new Message);

         MessageListType messageListType = new MessageListType();
         for(Message message: retrievedMessages){
             messageListType.getMessage().add(message);
         } 
```

我收到以下错误：

```
[#|2013-04-25T16:43:40.434+0100|WARNING|sun-appserver2.1|javax.enterprise.system.stream.err|_ThreadID=188;_ThreadName=p: thread-pool-1; w: 76;_RequestID=40c6fe10-c12f-4d0b-8912-c960381910d7;|
javax.xml.ws.WebServiceException: javax.xml.bind.MarshalException
 - with linked exception:
[javax.xml.bind.JAXBException: class uk.co.test.test.audit.model.Message nor any of its super class is known to this context.]
    at com.sun.xml.ws.message.jaxb.JAXBMessage.writePayloadTo(JAXBMessage.java:322)
    at com.sun.enterprise.jbi.serviceengine.comm.WrappedMessage.writePayloadTo(WrappedMessage.java:419)
    at com.sun.enterprise.jbi.serviceengine.comm.WrappedMessage$DocumentStyleWrapper.wrap(WrappedMessage.java:215)
    at com.sun.enterprise.jbi.serviceengine.comm.WrappedMessage.wrap(WrappedMessage.java:170)
    at com.sun.enterprise.jbi.serviceengine.comm.ProviderInOut.send(ProviderInOut.java:143)
    at com.sun.enterprise.jbi.serviceengine.bridge.transport.NMRServerConnection.sendResponse(NMRServerConnection.java:81)
    at com.sun.enterprise.jbi.serviceengine.bridge.transport.JBIAdapter$WSToolkit.handle(JBIAdapter.java:127)
    at com.sun.enterprise.jbi.serviceengine.bridge.transport.JBIAdapter.handle(JBIAdapter.java:86)
    at com.sun.enterprise.jbi.serviceengine.bridge.JAXWSMessageProcessor.doWork(JAXWSMessageProcessor.java:93)
    at com.sun.corba.ee.impl.orbutil.threadpool.ThreadPoolImpl$WorkerThread.run(ThreadPoolImpl.java:555)
Caused by: javax.xml.bind.MarshalException
 - with linked exception:
[javax.xml.bind.JAXBException: class uk.co.test.test.audit.model.Message nor any of its super class is known to this context.]
    at com.sun.xml.bind.v2.runtime.MarshallerImpl.write(MarshallerImpl.java:282)
    at com.sun.xml.bind.v2.runtime.BridgeImpl.marshal(BridgeImpl.java:100)
    at com.sun.xml.bind.api.Bridge.marshal(Bridge.java:141)
    at com.sun.xml.ws.message.jaxb.JAXBMessage.writePayloadTo(JAXBMessage.java:315) 
```

有谁知道为什么会这样？我猜正在做编组的 servlet 需要知道要查看哪个类，但我不知道该怎么做？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-25T16:35:40.723

如果您想在课堂上做到这一点，那么您需要在您的模式中更加精确。

JAXB 依赖于定义结构的模式，该结构与您希望 JAXB 解组到的结构相同。

为了说明，让我们编译您的模式`xjc`- 这将创建 JAXB 可以自动编组并对其进行注释的类。

这是课程：

```
@XmlAccessorType(XmlAccessType.FIELD)
@XmlType(name = "MessageType", propOrder = {
    "any"
})
public class MessageType {

    @XmlAnyElement(lax = true)
    protected Object any;

    public Object getAny() {
        return any;
    }

    public void setAny(Object value) {
        this.any = value;
    }

} 
```

您可以看到 JAXB 可以从您的模式中看出您有一个`MessageType`包含未知数量的东西的类 -`<xsd:any/>`例如，JAXB 无法确定您有一个需要设置的`String`调用。`referenceId`

如果您可以更改架构，则更新为

```
<xsd:complexType name="MessageType">
    <xsd:attribute name="referenceId" type="xsd:string"/>
    <xsd:attribute name="messageType" type="xsd:string"/>
    <xsd:attribute name="transactionIdForeignKey" type="xsd:string"/>
    <xsd:attribute name="xmlDetail" type="xsd:string"/>        
    <xsd:attribute name="createdTime" type="xsd:integer"/>        
</xsd:complexType> 
```

告诉 JAXB 构建类所需的信息（在这种情况下`TimeStamp`是 a `long`- 解组为 a`TimeStamp`您需要一些[自定义逻辑](https://stackoverflow.com/questions/2519432/jaxb-unmarshal-timestamp)）。

生成的类现在类似于您自己的类：

```
@XmlAccessorType(XmlAccessType.FIELD)
@XmlType(name = "MessageType")
public class MessageType {

    @XmlAttribute(name = "referenceId")
    protected String referenceId;
    @XmlAttribute(name = "messageType")
    protected String messageType;
    @XmlAttribute(name = "transactionIdForeignKey")
    protected String transactionIdForeignKey;
    @XmlAttribute(name = "xmlDetail")
    protected String xmlDetail;
    @XmlAttribute(name = "createdTime")
    protected BigInteger createdTime;

    public String getReferenceId() {
        return referenceId;
    }

    public void setReferenceId(String value) {
        this.referenceId = value;
    }

    public String getMessageType() {
        return messageType;
    }

    public void setMessageType(String value) {
        this.messageType = value;
    }

    public String getTransactionIdForeignKey() {
        return transactionIdForeignKey;
    }

    public void setTransactionIdForeignKey(String value) {
        this.transactionIdForeignKey = value;
    }

    public String getXmlDetail() {
        return xmlDetail;
    }

    public void setXmlDetail(String value) {
        this.xmlDetail = value;
    }

    public BigInteger getCreatedTime() {
        return createdTime;
    }

    public void setCreatedTime(BigInteger value) {
        this.createdTime = value;
    }

} 
```

可以看到xml中的属性直接映射到类中的字段。您还可以看到 JAXB 使用的注释，这些[不是必需](http://blog.bdoughan.com/2012/07/jaxb-no-annotations-required.html)的，但有助于告诉它映射到哪里。

如果您无法更改架构，那么您将需要实现自定义逻辑来搜索`<xsd:any/>`相关属性并手动映射。[如果您沿着这条路线走，这](https://stackoverflow.com/questions/12079801/jaxb-unmarshalling-custom-entities-without-annotation)应该可以帮助您入门。

# matlab - 在 MATLAB 中使用隐马尔可夫模型工具箱估计两个矩阵

> ID：16219583
> 
> 赞同：0
> 
> 时间：2013-04-25T16:03:03.280
> 
> 标签：matlab

我正在尝试应用隐马尔可夫模型来提高我的检测准确性。

在我的程序中，有两种状态，1 和 0。我使用贝叶斯检测器生成每个实例属于 1 类和 0 类的概率。例如，我有一个序列实际状态：1 1 1 1 1 0 0 0 0 0 类别 1 的概率：0.5 0.6 0.7 0.8 0.9 0.2 0.3 0.4 0.5 0.5 类别 0 的概率：0.5 0.4 0.3 0.2 0.1 0.8 0.7 0.6 0.5 0.5

我试图在函数 hmmestimate ([estimateTR,estimateE] = hmmestimate(seq,states);) 中“使用类 1 中的概率”作为“seq”和“实际状态”作为“状态”

但似乎“seq”必须是整数，我不明白输入参数的要求是什么。

提前致谢！

# windows - 为 Windows 上的文件缓存或基于内存的文件系统最大化内存？

> ID：16219585
> 
> 赞同：0
> 
> 时间：2013-04-25T16:03:05.143
> 
> 标签：windows, file, caching, io

我有一个应用程序需要以最高性能创建许多小文件（以后可能会读取不到 1% 的文件），并且我想避免使用异步文件 API 来保持代码的简单性。写入的总文件的大小无法预先确定，因此我认为要实现最大性能，我需要：

1.Windows 将所有未使用的 RAM 用于缓存（尤其是文件写入），不考虑可靠性或其他问题。如果我有超过 1GB 的未使用 RAM 并且我创建了一百万个 1KB 的文件，我希望 Windows 会立即报告“DONE”，即使它还没有向磁盘写入任何内容。

或者

2.基于内存的文件系统，由真实的磁盘文件系统支持。每当我写文件时，它应该首先只在内存中写入所有内容，然后在后台更新磁盘文件系统。除非没有足够的可用内存，否则同步调用不会延迟。请注意，它与 Windows 上的 tmpfs 或 RAM 磁盘实现不同，因为它们需要固定数量的内存并在没有足够 RAM 时使用页面文件。

对于选项 1，我测试了 VHD 文件 - 虽然它在某些配置下确实提供了高达 50% 的总性能提升，但它仍然会刷新到磁盘并导致写入不必要地等待。看来我无法禁用日记功能或进一步调整写入缓存行为.....

对于选项 2，我还没有找到类似的东西.....这样的东西存在吗？

# delphi - TBitmap 到 TPngImage 和内存使用情况

> ID：16219586
> 
> 赞同：3
> 
> 时间：2013-04-25T16:03:07.130
> 
> 标签：delphi, memory, tbitmap

我有一个包含 11 个白色 TBitmap（32 位 512x512 像素 = 1 MB）的数组，我想将它们分配给 TPngImage 数组以减少内存使用量，我希望 1 mb 白色位图变为 1.76 KB png，内存使用量急剧下降我用任务管理器监控它，差异只有 0.824 MB，为什么会这样？在内存中无损压缩 TBitmap 的最佳/快速方法是什么？

```
 for I := 0 to 10 do
begin
  Bitmaps[I] := TBitmap.Create;
  Bitmaps[I].PixelFormat := pf32bit;
  Bitmaps[I].Canvas.Pen.Color := clWhite;
  Bitmaps[I].SetSize(512,512);
  Bitmaps[I].Canvas.Rectangle(0,0,512,512);
end;

for I := 0 to 10 do
begin
  Pngs[I] :=  TPngImage.Create;
  Pngs[I].Assign(Bitmaps[I]);
  Bitmaps[I].Free;
end; 
```

* * *

更新

Form @bummi research 我认为最好的办法是将 pngs 保存在内存流数组中，这样可以产生 9.7 MB 的差异。

```
 for I := 0 to 10 do
begin
  Png :=  TPngImage.Create;
  Png.Assign(Bitmaps[I]);
  Streams[I] := TMemoryStream.Create;
  Png.SaveToStream(Streams[I]);
  Bitmaps[I].Free;
  Png.Free;
end; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T16:36:46.600

当您发布 TBitmap 时，您发布了两件事：

*   内存到 FastMM4 Delphi 堆管理器
*   HBITMAP Windows GDI 句柄

有时，如果您最小化所有程序的窗口然后将它们恢复回来，Windows 会缩小工作集，但这是不被允许的。由于今天相对较小的 10MB 差异而重新安排进程内存不会白白放慢速度。

[从https://stackoverflow.com/a/14380287/976391](https://stackoverflow.com/a/14380287/976391)的答案开始阅读更多内容

[http://fastmm.sourceforge.net/](http://fastmm.sourceforge.net/)附带自述文件和演示如何测量进程内的内存使用情况，如果它让你感到好奇。

但是，如果您真的想减少 RAM 使用量，请不要分配它。只需制作一个 TBitmap 并从中分配所有 PNG。不过，您的寡妇们再次明确表示，10MB 不是要关心的数字。

* * *

此外，正如 user539848 所发现的，您有 11 个位图，而不是 10 个。为了避免一个错误，您最好不要使用神奇的常量，而是使用可靠的编译器构造。

```
for I := Low(Bitmaps) to High(Bitmaps) do
begin
  Bitmaps[I] :=... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-10-29T17:03:52.227

TPngImage 使所有像素都准备好并解压，以便能够快速处理它们。TPngImage 占用的内存量与 TBitmap 大致相同。

因此，简单地将位图分配给 TPngImage 将只是复制数据。因此，在释放位图后，您的程序最终将使用相同数量的内存。

如果您希望内存使用量降至 1.76 KB png，则必须将 PNG 压缩到内存流并释放 TPngImage，就像更新中的代码一样。

# python - Django 和时区：如何在模板中将感知的日期时间呈现为一个幼稚的（使用 pytz）

> ID：16219587
> 
> 赞同：0
> 
> 时间：2013-04-25T16:03:08.000
> 
> 标签：python, django, timezone, pytz

我有这些模型：

```
class TimeZone(models.Model):
    name = models.CharField(max_length = 40, unique = True, editable = False)
    def tz(self):
        return pytz.timezone(str(self.name))

class Place(models.Model):
    name = models.CharField(max_length=200)
    timezone = models.ForeignKey(TimeZone)

class PlaceAction(models.Model):
    action_time = models.DateTimeField(blank=True, null=True)
    place = models.ForeignKey(Place, related_name='Stop place')

    def save(self, *args, **kwargs):
        place_tz = self.place.timezone.tz()
        if self.action_time:
            self.action_time = place_tz.localize(self.action_time)
        return super(PlaceAction, self).save(*args, **kwargs) 
```

我的用户在表单中输入了一个地点和一个简单的日期时间。我已经在数据库中拥有该地点的时区，因此我不需要用户提供时区。我将此日期时间转换并保存为数据库中的可识别日期时间（我使用 Postgres）。数据以正确的偏移量正确保存。

当我想渲染数据时（例如以更新形式），Django 将其转换回一个简单的日期时间，但使用 settings.py 的默认时区（TIME_ZONE = 'UTC'）。我想知道使用正确的时区（Place 对象之一）将感知日期时间转换回幼稚日期时间的最佳方法。我宁愿在模型级别而不是模板级别进行转换（我使用 JQueryUI 进行日期时间选择，由于第一次转换是在那里完成的，我宁愿在同一个地方进行反向转换）。

我的一些想法： 在模型中 PlaceAction **init** ()? 使用自定义管理器？

我在文档中找不到将反向转换为与默认时区不同的最佳实践。有吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-26T21:48:59.723

天真的日期时间是不知道时区的日期时间。要将时区感知的日期时间呈现为幼稚，您只需不显示时区。

> “我想知道使用正确的时区将有意识的日期时间转换回天真的日期时间的最佳方法”

这句话简直没有任何意义。使用天真的日期时间，没有正确的时区。我怀疑你想要的是将日期转换为特定时区，从数据库给你的 UTC 日期时间。

正确的做法是在视图中。始终在内部保持 UTC，并且仅转换为显示。这就是最简单的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T16:18:54.717

您可以添加一个`PlaceAction`转换为天真的方法，然后在您的模板中使用它。

```
class PlaceAction(models.Model):
    action_time = models.DateTimeField(blank=True, null=True)
    place = models.ForeignKey(Place, related_name='Stop place')

    def naive_action_time (self):
        """action_time but without the timezone :-)

        """
        # Updated from Renaud Milon's comment
        return self.action_time.astimezone(place_tz).replace(tzinfo=None) 
```

.

```
{% place_action.naive_action_time %} 
```

# spring - 如何测试 Spring 集成

> ID：16219589
> 
> 赞同：8
> 
> 时间：2013-04-25T16:03:17.810
> 
> 标签：spring, spring-integration

我是 Spring 集成的新手。我有 ActiveMQ 说一个'responseQ'。因此，当消息到达'responseQ' -> painResponseChannel -> 转换器 -> processResponseChannel -> beanProcessing 时。我有以下设置：

```
 <jms:message-driven-channel-adapter  extract-payload="true"
                                     channel="painResponseChannel"
                                     connection-factory="connectionFactory"
                                     destination-name="responseQ"/>

    <integration:channel id="painResponseChannel" />

    <integration-xml:unmarshalling-transformer
        id="defaultUnmarshaller"
        input-channel="painResponseChannel"
        output-channel="processResponseChannel"
        unmarshaller="marshaller"/>

    <integration:channel id="processResponseChannel" />

    <integration:service-activator
        input-channel="processResponseChannel"
        ref="processResponseActivator"/>

    <bean id="processResponseActivator" class="com.messaging.processor.PainResponseProcessor"/>

    <bean id="marshaller" class="org.springframework.oxm.jaxb.Jaxb2Marshaller">
      <property name="classesToBeBound">
        <list>
            <value>com.domain.pain.Document</value>
        </list>
      </property>
    </bean> 
```

所以我的问题是我怎样才能端到端地测试这个？如何断言变压器的输出或断言通道上的内容？我试过但失败了......希望有人能帮忙。

提前致谢。通用汽车

我是这样测试的：在我的测试上下文中创建了一个出站通道适配器，它启动使用 testJmsQueue 通道在 activeMQ 上放置消息。并且还为 processResponseChannel -> testChannel 创建了一个 BRIDGE。我期待 receive() 方法能给我一些回报。但我认为问题在于它太快了，当它到达 receive() 方法时，管道已经结束。

测试上下文如下所示：

```
<integration:bridge input-channel="processResponseChannel" output-channel="testChannel"/>

<jms:outbound-channel-adapter id="jmsOut" destination-name="responseQ" channel="testJmsQueue"/>

<integration:channel id="testJmsQueue"/>

<integration:channel id="testChannel">
    <integration:queue/>
</integration:channel> 
```

然后在单元测试中我有这个：

```
@ContextConfiguration(locations = "classpath*:PainResponseTest-context.xml")
@RunWith(SpringJUnit4ClassRunner.class)
public class PainResponseTest {

private String painResponseXML;

@Autowired
MessageChannel testJmsQueue;
@Autowired
QueueChannel testChannel;

@Before
public void setup() throws Exception {

    ClassPathResource cpr = new ClassPathResource("painResponse.xml");
    InputStream is = cpr.getInputStream();
    StringWriter writer = new StringWriter();
    IOUtils.copy(is, writer, "UTF-8");
    painResponseXML = writer.toString();
}

@Test
@SuppressWarnings("unchecked")
public void shouldDoSomething() throws InterruptedException {

    testJmsQueue.send(MessageBuilder.withPayload(painResponseXML).build());

    Message<String> reply = (Message<String>) testChannel.receive(0);
    Assert.assertNotNull("reply should not be null", reply);
    String out = reply.getPayload();
    System.out.println(out);
}
}

==================== TEST OUTPUT =====================
java.lang.AssertionError: reply should not be null 
```

得到回复为空。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T16:26:11.580

对于端到端测试，您可以执行以下操作；

*   在嵌入式配置中使用 activemq 发送 JMS 消息
*   在 processResponseChannel 上注入一个 channelinterceptor
*   启用`DEBUG`级别 - Spring Integration 提供了非常好的和有用的日志跟踪进出通道和服务激活器的消息

# c# - 如何从 SQL 查询中创建超链接字段

> ID：16219592
> 
> 赞同：4
> 
> 时间：2013-04-25T16:03:34.197
> 
> 标签：c#, gridview, webforms

关于我的这个问题，

[GridView 表 1 相关表 2](https://stackoverflow.com/questions/16217674/gridview-table-1-related-to-table-2/16218281?noredirect=1#comment23195878_16218281)

我有一个现在看起来像这样的gridview，

![在此处输入图像描述](https://i.stack.imgur.com/Fn1vi.png)

这是SQL[小提琴](http://www.sqlfiddle.com/#!3/96a49/3)

**问题：**

如何使用 FruitTitle 创建 HyperLinkField 并链接到水果网站？

这是我`Types_of_Fruits_in_Crate`目前用于显示的代码，并且运行良好，

```
 BoundField theField = new BoundField();
            theField.DataField = "Types_of_Fruits_in_Crate";
            gv.Columns.Add(theField); 
```

放什么

```
 HyperLinkField theField = new HyperLinkField();
            theField.DataTextField = 'Types_of_Fruits_in_Crate';
            theField.DataNavigateUrlFields = // not sure .... 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T16:37:02.617

使用文字控件而不是超链接，然后尝试使用以下查询：

```
SELECT CrateTitle,CrateDescription,CrateID,
stuff(
(
  SELECT '<a href=''' + [FruitWebsite] + ''' target=''_blank''>'+ [FruitTitle] +'</a>'
  FROM fruits WHERE CrateID = t.CrateID FOR XML path('')
),1,1,' ') Types_of_Fruits_in_Crate
FROM (SELECT DISTINCT CrateTitle,CrateDescription,CrateID FROM fruits )t 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-25T16:48:41.370

试试下面的方法，它会帮助你...

**SQL FIDDLE：** [http ://www.sqlfiddle.com/#!3/96a49/18](http://www.sqlfiddle.com/#!3/96a49/18)

**SQL：**

```
SELECT CrateTitle,CrateDescription,CrateID,
stuff(
(
    SELECT ',<a href=''' + [FruitWebsite] + ''' target=''_blank''>'+ [FruitTitle] +'</a>' FROM fruits WHERE CrateID = t.CrateID FOR XML path('')
),1,1,' ') Types_of_Fruits_in_Crate
FROM (SELECT DISTINCT CrateTitle,CrateDescription,CrateID FROM fruits )t 
```

此外，在您的代码中添加**HTML ENCODE = FALSE**然后只有 HTML 功能反映在您的网格视图中

**C＃ ：**

```
 BoundField theField = new BoundField();
    theField.DataField = "Types_of_Fruits_in_Crate";
    theField.HtmlEncode = false;
    gv.Columns.Add(theField); 
```

# php - HTTP 请求标头

> ID：16219593
> 
> 赞同：1
> 
> 时间：2013-04-25T16:03:35.023
> 
> 标签：php, simplexml

我熟悉使用 PHP 显示来自和 XML 提要的项目，但是我刚刚开始研究的 API 要求我包含 HTTP 请求标头...

```
 Feed-Auth => myPassword 
```

如何包含 HTTP 请求标头？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T16:04:59.007

```
header("Feed-Auth:".$myPassword); 
```

如果您使用类似`curl`or的方式访问 API `soap`，它们有自己的设置标头的机制。

卷曲：

```
curl_setopt($ch, CURLOPT_HTTPHEADER, array('Feed-Auth:'.$myPassword)); 
```

肥皂

```
 $header = array('Feed-Auth'=>$myPassword);
  $soapHeader = new SoapHeader('NAMESPACE','Header',$header,false);
  $client->__setSoapHeaders($oapHeader); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T16:06:34.420

您必须以另一种方式加载文档并使用`simplexml_load_string()`：

```
$body = file_get_contents($url, false, stream_context_create(array(
    'http' => array(
        'header' => 'Feed-Auth: myPassword',
    ),
)));

$doc = simplexml_load_string($body); 
```

# jquery - 如何在 jquery ajax 中处理 204 响应？

> ID：16219595
> 
> 赞同：19
> 
> 时间：2013-04-25T16:03:37.670
> 
> 标签：jquery

由于我已经声明了成功和错误 ajax 选项，其中响应为 204，因此 ajax 方法转到选项成功，这会导致错误。

根据我们可以使用的文档，StatusCode 或 Complete 方法，但这里的缺点是必须声明所有状态代码，如 2?? 系列，3?? 系列，4?? 系列！由于这些响应是动态的，我不确定 http 状态代码。

那么，在 jquery ajax 中处理 http 状态码的更好方法是什么？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-04-25T16:30:05.033

从 jQuery 1.5 开始，由 $.ajax() 返回的 jqXHR 对象实现了 Promise 接口。done 函数中的第三个参数是一个 jqXHR 对象。此对象具有结果的 http 状态代码的属性。

> jqXHR.done(函数(数据, textStatus, jqXHR) {}); 成功回调选项的替代构造，.done() 方法替换了已弃用的 jqXHR.success() 方法。有关实现细节，请参阅 deferred.done()。 [关联](http://api.jquery.com/jQuery.ajax/)

```
 $.ajax({
      url: "http://fiddle.jshell.net/favicon.png",
      beforeSend: function ( xhr ) {
          xhr.overrideMimeType("text/plain; charset=x-user-defined"); 
      }
    }).done(function ( data, textStatus, jqXHR) {
       console.log(jqXHR.status); //handle your 204 or other status codes here
    }); 
```

小提琴[http://jsfiddle.net/puleos/fVa7X/](http://jsfiddle.net/puleos/fVa7X/)

假设您想将所有非 200 状态代码视为错误，您可以执行以下操作：

```
var p = $.ajax({
          url: "http://fiddle.jshell.net/favicon.png",
          beforeSend: function ( xhr ) {
             xhr.overrideMimeType("text/plain; charset=x-user-defined"); 
          }
        });

p.done(function(data, textStatus, jqXHR) {
  if(jqXHR.status !== 200) {
     handleError(jqXHR.status);
     return;
  }
  // Normal processing here
});

p.fail(function(jqXHR, textStatus) {
   handleError(jqXHR.status); 
}); 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2014-05-30T21:43:24.047

上面的解决方案是一个很好的解决方案，但是对于已经在许多组件上定义“成功”和“错误”的人来说，这涉及到大量的代码更改。

阅读文档后，也很容易获得成功的状态代码：

```
jQuery.ajax({
..
'success' : function(data,textStatus,jqXHR) {
    if (jqXHR.status == "204") {

    }
},
error : function(jqXHR, exception) {
        // Manage error 
    }, 
```

[http://api.jquery.com/jquery.ajax/](http://api.jquery.com/jquery.ajax/) => statusCode

然后检查状态码，一个**jqXHR.status**就可以了

# javascript - JavaScript 转义？

> ID：16219597
> 
> 赞同：0
> 
> 时间：2013-04-25T16:03:47.963
> 
> 标签：javascript, regex, url

在解析为这样的对象之前，我正在转义 & 和 =：

```
var obb = parseJSON('{"' + text.replace(/&/g, "\",\"").replace(/=/g,"\":\"") + '"}'); 
```

创建对象时，我得到：

```
obb.name
obb.date
obb.text 
```

在 obb.text 里面我想恢复上面完成的转义..

我试过了：

```
text.replace(/\&/g, "&").replace(/\=/g, "=") 
```

当我在 obb.text 上运行以下命令时

```
obb.text = decodeURIComponent(escape(obb.text)); 
```

我得到解析错误

但似乎不起作用

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T16:38:20.480

与其担心输出数据不包含任何会导致 JSON 解析器出错的内容，不如考虑基于 HTTP RFC 参数解析的这种方法。RFC RFC (2616) 规定了以下规则：

*   所有字段由 & 分隔
*   所有字段名都在=之前，=之后的值，值是可选的
*   [] 表示“作为数组的另一个元素”，

他们还试探性地建议了以下规则，我将为您提供一个选择： - 如果提交，没有 [] 的参数将覆盖其以前的版本（并非所有网络服务器都遵循这一规则，并且是 HTTP 碎片/污染攻击的问题，由方法）

我们将按照这个确切的结构进行解析，假设这些东西已经正确地进行了字符编码。代码的开头应如下所示：

```
var myObj = {};
var k = myPostbackContent.split("&");
for (var i = 0; i < k.length; i++) {
  var kinfo = k[i].split("=");
  var key = kinfo[0];
  if (kinfo[1] !== undefined) {
     var value = kinfo[1];
  };
  if (key.substr(-2) == "[]") {
     key = key.substr(0,key.length-2);
     if (myObj[key] === undefined) myObj[key] = [];
     if (myObj[key] instanceof Array) myObj[key].push(value);
  }
  else { 
```

以下部分取决于您的假设：

*   如果您希望您的元素相互覆盖，请`else`输入以下版本：

    ```
     myObj[key] = value; 
    ```

*   相反，如果您希望元素的第一个实例具有优先权，请输入以下内容：

    ```
     if (myObj[key] === undefined) myObj[key] = value; 
    ```

*   如果像 IIS 一样，您希望将元素自动附加到以 分隔的字符串`,`，请使用以下命令：

    ```
     if (myObj[key].length) myObj[key] += ",";
     myObj[key] += value; 
    ```

我已经构建了一个小的**[TinkerIO](http://tinker.io/87b2a)**脚本来向您展示这三个脚本是如何工作的。如果这不是您想要的，请告诉我。顺便说一句，默认行为是“覆盖”。

**顺便说一下，这个方法可以反向应用，从一个对象到一个 URI 编码的字符串。只需遍历对象的属性并按 key=value 进行，用 & 连接所有元素。**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T16:43:02.613

只要您的文本参数始终位于字符串的末尾，您就可以执行以下操作：

```
var obb = {};
obb.name = text.match(/name=([^&]+)/)[1];
obb.date = text.match(/date=([^&]+)/)[1];
obb.text = text.match(/text=(.+)/)[1]; 
```

[**演示**](http://jsfiddle.net/AVKSZ/)

# android - 如何让 Google Now 在 Android 的后台持续运行

> ID：16219601
> 
> 赞同：16
> 
> 时间：2013-04-25T16:04:01.673
> 
> 标签：android, google-now

我有一个应用程序的想法，但我还没有弄清楚其中的一部分。在 Android 上的 Google Now 中，它为您提供以下搜索选项：

1.  输入搜索
2.  点击麦克风说出您的搜索
3.  或者只需说“Google”即可开始语音搜索。

我想知道他们是如何让#3 工作的。我需要有一个关键字，当说它时，它会启动语音搜索。

我想他们有某种类型的后台运行服务，不断监听语音操作。有谁知道这是如何实现的？

这是 Google Now 应用的图片：

![在此处输入图像描述](https://i.stack.imgur.com/tX7Oe.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-25T17:12:32.113

您可以编写一个服务，然后`createSpeechRecognizer`在该服务中使用。有关完整的服务代码，您可以在[Android Speech Recognition as a service on Android 4.1 & 4.2中找到答案](https://stackoverflow.com/questions/14940657/android-speech-recognition-as-a-service-on-android-4-1-4-2/14950616#14950616)

# asynchronous - 如何在 Xenomai 中读取 GPIO 时钟信号？

> ID：16219607
> 
> 赞同：1
> 
> 时间：2013-04-25T16:04:21.033
> 
> 标签：asynchronous, real-time, rtos, gpio, xenomai

我在 ARM PC（Xenomai 2.5.6 - Linux Kernel 2.6.35.9）中安装了 Xenomai，我需要读取 10 kHz 时钟信号。该信号与我的一个 GPIO 电连接，该 GPIO 映射到系统文件。如果我在用户空间创建一个任务并在测量时间时打开-读取-关闭文件，我会得到 650 µs 的平均延迟（即，这是一个完整的打开-读取-关闭周期的时间）。这产生了约 1.5 kHz 的采样率。

```
while(1) // Task's infinite loop
{
    t1 = rt_timer_read();
    if((fd = open("test_file",O_RDONLY)) > 0)
    {
        read(fd,&buff,1);
        close(fd);
    }else{
        errors++;
    }
    t2 = rt_timer_read();
    t += t2-t1;

    rt_task_wait_period(NULL);
} 
```

输出：

```
[RT:]   Start reading files:   05:19:05.804.754
[RT:]   End reading files:     05:19:13.338.078
[RT:]   Average time (10000 open-read-close cycles): 00000671.901 (microseconds)
[RT:]   Errors found: 0
[RT:]   (sig_handler) Signal received! (signo = 2) 
```

我在 Internet 上的某个地方读到，强制我的任务在内核空间而不是用户空间中运行可以使其执行速度更快，但我不确定这是否足够，也不知道我正在尝试什么在这里做是完全正确的。

我来自电子工程背景，我一直被告知不要异步处理同步信号（如时钟信号），并使用可能会根据 CPU/系统引入抖动的周期性任务读取文件（即我的同步信号）加载，看起来不是一个好方法。有更好的方法吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-20T07:16:11.527

以下是我对可能解决方案的想法。你是对的，你不应该异步处理同步信号。因此，您应该避免在用户空间中打开 fd 以从 GPIO 读取信号电平。

相反，您应该在更合适的内核空间中处理它。进入内核空间后，您可以将 GPIO 设置为 irq，以在上升/下降沿触发并通过 Xenomai 实时处理。延迟不会消失，但对于 10 KHz 时钟速度应该没问题。

不幸的是，您没有指定您正在使用时钟信号做什么。我猜你正试图充当某些设备的从驱动器？

无论如何，我希望我有所帮助。

# jakarta-ee - Java EE 以编程方式停止应用程序

> ID：16219615
> 
> 赞同：2
> 
> 时间：2013-04-25T16:04:36.680
> 
> 标签：jakarta-ee

我参与了一个在 EE 中重写 SE 应用程序的项目。我们目前使用 JBoss 7.1.3 作为我们支持的应用程序服务器，但显然为了可移植性而尽量减少特定于 AS 的代码。

关于我们的应用程序的一些背景知识......它接受来自系统（MDB/Webservice）的处理请求，并通过与许多其他系统的接口来满足请求。系统处理审计是数据库驱动的。

现有应用程序中的当前功能是应用程序在数据库连接丢失的情况下自行关闭，以防止未经审计的处理。因此，我一直在四处寻找是否有任何标准方法可以以可移植的方式重新创建此功能。我想我想知道是否有任何标准方法可以从应用程序本身以编程方式停止应用程序，或者您是否对提供类似功能有任何想法。

到目前为止，我已经看到可能有一些方法可以通过 JMX 连接到 JBoss 并取消部署应用程序或可能停止 MDB 交付……但我担心可移植性，因为它都是特定于 AS 的。我不仅关心跨 AS 的可移植性，甚至关心跨不同版本的 AS 的可移植性……因为这些操作的过程似乎在不同的 JBoss 版本上发生了变化。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-26T00:37:23.200

我相信如果存在这样的功能，它确实是一个漏洞，因为一个 AS 旨在运行多个应用程序。如果在一个这样的共享服务器中，一个应用程序失控，这将导致其他应用程序中断。

不过，您可以通过执行 shell 脚本、获取运行时来做到这一点，只是它并不是真正的可移植代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-26T01:02:24.370

当您说停止应用程序时，您的意思是 System.exit(0) ？您也可以在 Jboss/EE 代码中执行此操作，只要正在运行的应用程序只是您的（不是共享的 jboss）

如果它是共享的（由您公司中的其他应用程序或共享提供商）

1.  向您服务的客户发送错误响应
2.  写入日志文件，如果成功则继续服务（日志可以传输到数据库 - 如果数据库必须始终是最新的，这将不起作用）
3.  使用连接池来维护数据库连接 - >只是一个保持它更好的建议。如果 main 无法访问，也可以使用备用数据库。再次，这取决于业务/您的具体情况
4.  便携且响应迅速 - 以 null/空集响应。还有一个状态屏幕 - > 告诉客户/支持应用程序和/或事件的状态的方式（如 db 或其他资源有时不可用）。实现：每个 API 函数都可以先有一个 AOP 相交，以便以通用方式处理此问题。

如果你想取消部署，可以有一个抽象类的基本设计，然后为每个应用服务器/应用服务器变体提供一个版本。一旦您在应用程序服务器上几乎不认为您会经常更改或添加更多内容。也许你可以向 oracle 建议这个未来的 JSR / web / ejb 应用程序的特性

# javascript - jqPlot - 将日期 (yyyy-mm-dd) 插入 (dd/mm/yyyy)

> ID：16219618
> 
> 赞同：0
> 
> 时间：2013-04-25T16:04:40.240
> 
> 标签：javascript, date, format, jqplot

示例 (jqPlot) 代码中的输入是 yyyy-mm-dd。

```
var line1=[['2008-08-12',4], ['2008-08-13',6.5], ['2008-08-14',5.7], ['2008-08-15',9], ['2008-08-16',8.2], ['2008-08-17',7.2], ['2008-08-18',3.2]]; 
```

但我们在这里使用 dd/mm/yyyy hh:mm 格式。我应该更好地将输入转换为 yyyy/mm/dd 还是很容易更改？

谢谢你的时间。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-26T05:40:47.297

输入日期格式如下：

```
var line2=[['30/09/2008 4:00PM',4],['30/10/2008 4:00PM',6.5], ['30/11/2008 4:00PM',5.7], ['30/12/2008 4:00PM',9], ['30/01/2009 4:00PM',8.2]]; 
```

jqplot 可以理解。因此，您可以使用`dd/mm/yyyy hh:mm`格式。

[请参阅此处](http://jsfiddle.net/AnthonyLeGovic/WSdU4/)的工作示例，其中我添加了一个新变量：`var line2`以 dd/mm/yyyy 格式显示日期。

请注意，您可以使用指定日期刻度渲染

```
axes:{xaxis:{
  renderer:$.jqplot.DateAxisRenderer,
  tickOptions: {
    formatString: '%d/%m/%Y %H:%M'
  },
}}, 
```

[在此处](http://www.jqplot.com/docs/files/plugins/jqplot-dateAxisRenderer-js.html)查看更多关于`DateAxisRenderer`jqPlot 文档的信息。

# ruby-on-rails - Redis 和 Rails 计数器缓存列

> ID：16219629
> 
> 赞同：2
> 
> 时间：2013-04-25T16:05:11.497
> 
> 标签：ruby-on-rails, redis

我目前在 Rails 中使用计数器缓存列，但我开始对关联（评级）执行更复杂的查询。出于性能原因，我将数据移动到 Redis。

我的问题是，在 Redis 中存储所有数据时，计数器缓存列是否仍然相关，或者 Redis 会使这种方法过时（并且只对 Redis 存储执行计数）？

我想这归结为：

```
post.ratings_count # cache_column, table in sql database
$redis.scard("post:123:ratings") 
```

当然，这`post.ratings_count`将只是获取一个属性，而不是执行查询（因为帖子已经被加载）。我唯一担心的是它`$redis.scard`会在 Redis 存储上执行某种“查询”。可以忽略不计吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-26T08:20:05.763

您不必担心 SCARD 命令的性能。

redis SCARD 命令的时间复杂度为 O(1)，这意味着 redis 执行此操作几乎没有成本。

如果您有能力将完整集存储在 redis 中，那么缓存计数就不再有用了。

不幸的是，您并不总是有足够的空间将所有内容存储在 redis 中（redis 存储必须适合您的 ram），因此在这种情况下，缓存计数列仍然有意义。

# validation - 在 Angular JS 中使用标准验证消息气泡的自定义消息

> ID：16219632
> 
> 赞同：1
> 
> 时间：2013-04-25T16:05:20.410
> 
> 标签：validation, angularjs

我想创建一个自定义验证器。我见过的所有执行此操作的示例都涉及通过打开跨度标记来显示错误消息。

我想知道如何使用标准错误消息工具提示来显示来自自定义验证器的自定义验证消息。

这是标准错误消息工具提示的示例（按下按钮！）....

```
<form>
<input type="email" name="email" placeholder="Email" required="" />
<button>SAVE</button>
</form> 
```

[http://jsfiddle.net/IanIan123/Nnrrf/](http://jsfiddle.net/IanIan123/Nnrrf/)

我想创建验证器来确认两个密码输入框是否相同，如果它们不同，则在工具提示中显示适当的消息。

# windows-phone - 我可以在 WP 设备上调试多少个应用程序？

> ID：16219634
> 
> 赞同：0
> 
> 时间：2013-04-25T16:05:29.977
> 
> 标签：windows-phone

我是 WP 开发的新手。

我为 WP7 和 WP8 制作了 2 个应用程序，并且在模拟器上运行良好，但我想在我的 HTC 8S 上尝试一下

我的问题是基本的，我知道学生开发者解锁到我的设备后，我可以在 3 个不同的 Windows Phone 设备中加载 3 个应用程序。

但是在任何地方我都可以找到 3 个侧载是否等于在调试模式下尝试 3 个应用程序，未签名和完成的应用程序，只是在我的设备上调试。

我想知道因为我只有 1 台 Windows Phone 设备，但如果调试数量不受限制，我可以在发送到市场之前在该模式下尝试我的应用程序。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-26T22:45:08.960

学生帐户目前与个人帐户相同，限制为 10 个应用程序/设备。当然，您可以卸载一个应用程序来部署另一个应用程序。

> 您最多可以在注册设备上部署十个应用程序。此限制不适用于您从应用商店安装的应用程序。

来源： http: [//msdn.microsoft.com/en-us/library/windowsphone/develop/ff402565 (v=vs.105).aspx](http://msdn.microsoft.com/en-us/library/windowsphone/develop/ff402565(v=vs.105).aspx)

此外，如果您发送支持票证说明您需要增加限制的原因，Microsoft 可能会为您增加限制。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-26T05:58:38.793

您可以在任何时间点在任何设备单个设备上部署 3 个应用程序 [处于调试模式]。即 3 个应用程序/设备。

# extjs - 带有新记录的 Store.sync() 不会导入服务器生成的字段作为响应

> ID：16219638
> 
> 赞同：2
> 
> 时间：2013-04-25T16:05:45.870
> 
> 标签：extjs, extjs4, extjs4.1

我有一个启用了行编辑的网格。当我添加一行并调用 store.sync() 时，服务器会在该记录上生成某些字段，并在响应中返回完整的记录信息。然而，ExtJS 似乎并没有更新它的记录副本，除了 id。有没有办法让它做到这一点，还是我需要编写自定义代码？

这是网格控制器的摘录：

```
doneEdit: function (editor, e, eOpts) {

    var me = this;

    //
    // Set up loading mask on grid during update (if record changed and is valid)
    //
    if (e.record.dirty && e.record.isValid()) {
        e.grid.showUpdatingMask();

        e.store.sync({
            success: me.onSaveSuccess,
            failure: me.onSaveFailure,
            scope: me
        });
    }
    else {
        me.cancelEdit(editor, e, eOpts);
    }
},

//
// onSaveSuccess() is only used for row editor grids
//
onSaveSuccess: function (batch, options) {

    var me = this,
        grid = me.getGrid();

    grid.getStore().filter([]); // re-run whatever filters already exist, and sort.

    grid.hideMask();

    // update read-only active store if specified by sub-class
    if(me.activeStore) {
        // $TODO: handle load failure
        me.activeStore.load();
    }
}, 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-22T21:54:18.773

我有同样的问题（Ext 4.2.1）。原因是我忘记在阅读器上设置 idProperty 默认是“id”，我的是“_id”。Ext 默默地未能更新记录，因为它无法识别匹配的 id。现在它就像一个魅力。

因此，请确保响应采用读者期望的正确格式（root、idProperty、模型定义……）

# jquery-ui - 在某些情况下，Select 元素上的数据绑定不刷新

> ID：16219639
> 
> 赞同：0
> 
> 时间：2013-04-25T16:05:46.877
> 
> 标签：jquery-ui, knockout.js

我有一个使用 jQueryUI 创建的 Select 元素，然后使用敲除绑定。我还有一个用于过滤的文本输入元素（创建方式与选择相同）。在大多数情况下，过滤工作正常，但有时如果文本框中有一个值，我用鼠标选择它，然后按 Delete 键，我的事件会触发，数据会更改但 UI 不会刷新。

这是我的 Computed 属性的代码：

```
self.filteredItems = ko.computed(function () {
    if (self.valueToFilter() === "") {
        return self.items();
        //when the value is cleared this line gets
        //ran properly but the UI doesn't update
    } else {
        return jQuery.grep(self.items(), function (i) {
            return (i.indexOf(self.valueToFilter()) === 0);
        });
    }
}); 
```

任何帮助，将不胜感激。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-27T21:22:07.823

这应该使您的代码在 IE10 上工作：

```
<input type="text" id="in" data-bind="value: valueToFilter, valueUpdate: 'afterkeydown', event: { mouseup: function () {  valueToFilter(''); }}"/> 
```

另请参阅：[使用清除图标清除 IE10 上的文本输入时触发的事件](https://stackoverflow.com/questions/14498396/event-fired-when-clearing-text-input-on-ie10-with-clear-icon)

# drupal - Drupal 6 块主题

> ID：16219641
> 
> 赞同：0
> 
> 时间：2013-04-25T16:05:50.290
> 
> 标签：drupal, drupal-6, drupal-views, drupal-theming

我可能会叫错树，但是...

我有一个网站的一部分内容，它是几篇博客文章的列表，但要实现的设计显示前 5 行有图像、标题和预告片，接下来的 10 个项目只显示一个标题。

这似乎不是一个不常见的设计，对我来说，这应该是 15 个项目的单个块视图，并在适当的 .tpl.php 文件中使用条件语句来确定每个项目应如何显示。

我已经尝试了一些覆盖样式输出（块）和行样式输出（字段）的变体，但我无法弄清楚如何做到这一点？

有谁知道如何做到这一点，或者可以指出我不同的方向来解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-26T06:30:57.807

视图应该添加诸如*views-row-1*、*views-row-2之类的类*之类的类，这样您就可以通过 css 更改样式。

如果这还不够，如果您正在使用字段，您可能希望查看覆盖 Row 样式输出 - 默认文件是 views-view-fields.tpl.php，您可以将其更改为类似 views-view-fields --VIEWID.tpl.php

（您可能需要检查视图 UI 基本设置 > 主题以找到正确的视图，这有点麻烦。）

如果您查看 preprocess 函数，它遍历行并创建 html 输出，您可以在此处添加一些自定义逻辑，并在 tpl 中添加您认为合适的字段。

# python - 错误的python二进制virtualenv

> ID：16219647
> 
> 赞同：0
> 
> 时间：2013-04-25T16:06:11.510
> 
> 标签：python, virtualenv, virtualenvwrapper

我最近在我的 Mac 上安装了 virtualenv 和 virtualenvwrapper 来处理 Django 项目。

我的问题是，当我在我的 virtualenv 中并输入 python manage.py runserver 时，由于某种原因，使用的 python 二进制文件不是我的 virtualenv 中的那个。我有一台装有 OS 10.8.3 的 mac book air

当我输入 name_of_virtualenv/bin/python manage.py runserver 时，一切正常。

当我运行 which python 我得到：/Library/Frameworks/Python.framework/Versions/2.7/bin/python

我怎样才能改变它，以便默认的 python 是好的？

我没有在我的 requirements.txt 中指定任何 python 版本。

谢谢你的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-26T06:48:00.910

你可能还没有激活环境。您可以通过以下方式做到这一点：

```
source ./bin/activate 
```

或使用 virtualenvwrapper：

```
workon <theenvname> 
```

请注意，您不需要执行任何此操作。运行 Django

```
./bin/python manage.py runserver 
```

工作得很好。您不必实际激活 virtualenv **。**就我个人而言，我从不这样做。

# eclipse-gef - gef ：将子约束更改为新父项

> ID：16219648
> 
> 赞同：0
> 
> 时间：2013-04-25T16:06:13.227
> 
> 标签：eclipse-gef, draw2d

我有一些流程元素，可以无限地包含其他流程元素。

我直接从调色板管理将新进程添加到其他进程中，它工作正常但是当我拖动一个已经绘制的进程以将其集成为另一个已经绘制的进程的新子进程时，编辑器不让我这样做，我有一个白色十字光标。

在我的模型中，Process 类正在扩展 ContainerElement 类，它处理子元素的添加和删除以及通知内容。

我在想，由于该过程将有一个新的父进程，我必须在更改 ConstraintCommand 中添加它

这是我的代码片段

```
 public class ProcessFigure extends Figure {
    public ProcessFigure() {
    setLayoutManager(new XYLayout());

    ellipse = new Ellipse();
    ellipse.setFill(false);
    add(ellipse);
    label = new Label();
    add(label);
    ellipse.setLayoutManager(new XYLayout());
   }

    public IFigure getContentPane() {
    return ellipse;
   }
    ...
}

 ------------------------------
 public class ProcessEditPart extends ContainerElementEditPart {
 ...
    public IFigure getContentPane() {
    return ((ProcessFigure)getFigure()).getContentPane();
    }

    @Override
    protected void createEditPolicies() {
    installEditPolicy(EditPolicy.LAYOUT_ROLE, new ContainerElementXYLayoutEditPolicy(
            (XYLayout) getContentPane().getLayoutManager()));
    }
...
}
------------------------

public class ContainerElementXYLayoutEditPolicy extends XYLayoutEditPolicy {
    ...
    public ContainerElementXYLayoutEditPolicy(XYLayout layoutManager) {
    super();
    setXyLayout(layoutManager);
    }

    private Command getProcessCreateCommand(CreateRequest request) {
    ProcessCreateCommand result = new ProcessCreateCommand();
    Rectangle constraint = (Rectangle) getConstraintFor(request);
    result.setLocation(constraint.getLocation());
    result.setProcess((Process)request.getNewObject());
    result.setParent((ContainerElement)getHost().getModel());
    return result;
    }

    protected Command createChangeConstraintCommand (ChangeBoundsRequest request,EditPart child , Object constraint) {
    ProcessChangeConstraintCommand changeConstraintCommand = new ProcessChangeConstraintCommand (); 
    changeConstraintCommand.setProcess((Process)child.getModel());
    changeConstraintCommand.setNewConstraint((Rectangle)constraint);
    return changeConstraintCommand;

    }    
...

} 
```

我认为问题在于 gef 无法确定合适的布局管理器，我尝试了一些更改，但每次都出现强制转换或 stackoverflow 异常，请帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-26T13:40:59.037

当您将元素拖到编辑部件的图形之外时，`GEF`会触发一个`REQ_ORPHAN`请求，该请求必须由从中取出元素的编辑部件处理。如果不这样做，我认为您不能将元素放在编辑部分的图形之外。您可以通过覆盖类`getOrphanChildrenCommand`中的来处理此要求`LayoutEditPolicy`。

我从未使用过此功能，但这是[GEF 程序员指南的](http://help.eclipse.org/helios/index.jsp?topic=/org.eclipse.gef.doc.isv/guide/guide.html)**移动和调整大小**中所写的内容

# c# - 捕获本地 http post 流量

> ID：16219652
> 
> 赞同：1
> 
> 时间：2013-04-25T16:06:17.080
> 
> 标签：c#, httpwebrequest, fiddler, wireshark

我在同一台窗口机器上有两个 C# winform 应用程序。

*   第一个应用程序在 localhost 和端口 4567 上运行一个 http 侦听器（不是通过 IIS）
*   第二个应用程序向端口 4567 发出一个 http 帖子 (httpWebRequest)。

我试图像在 Fiddler2 中查看 http 流量时一样查看 post/request 流量。到目前为止，我在尝试使用 fiddler2、Charles 和 Wireshark 捕获此流量时运气不佳。

有谁知道如何捕获这种流量？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T16:30:55.707

要使用 fiddler 查看对 localhost 应用程序的请求，请在调用应用程序中设置 URL，如下所示

[http://localhost.fiddler:4567/](http://localhost.fiddler:4567/)

以下帖子应该可以帮助您

[监控从 IE 或 .NET 到 localhost 的流量](http://fiddler2.com/documentation/Configure-Fiddler/Tasks/MonitorLocalTraffic)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T16:17:26.880

Fiddler 无法拦截 localhost 流量，因为 fiddler 是代理服务器，.NET Framework 不会通过代理服务器发送本地请求。

要解决此问题，您可以更新应用程序以将数据发送到`localhost.fiddler`而不是`localhost`

# php - 在 web.config 中更改“magic_quotes_gpc = On”

> ID：16219653
> 
> 赞同：0
> 
> 时间：2013-04-25T16:06:26.450
> 
> 标签：php, iis, joomla, web-config, magic-quotes-gpc

如何在 web.config 文件中`magic_quotes_gpc = On`更改属性？`magic_quotes_gpc = Off`这是一个带有 IIS 的服务器，我无法编辑 PHP.ini。

我尝试将以下内容添加到 htaccess.txt 文件中，但它不起作用。

```
php_flag magic_quotes_gpc Off
php_value magic_quotes_gpc Off 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-25T16:15:48.253

这也将起作用（在 PHP 中）

```
ini_set('magic_quotes_gpc', 'Off'); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-25T16:08:52.710

不要相信magic_quotes_gpc，引入了magic quotes 选项来帮助保护开发人员免受SQL 注入攻击。它对通过 GET、POST 或 COOKIE 接收到的所有信息有效地执行 addlashes()。不幸的是，这种保护并不完美：还有一系列其他字符被数据库解释为此功能未涵盖的特殊字符。此外，未直接发送到数据库的数据必须未转义才能使用。

# javascript - 加载html时找不到html标签

> ID：16219659
> 
> 赞同：0
> 
> 时间：2013-04-25T16:06:37.527
> 
> 标签：javascript, html, load

我能够加载一个简单的 html 文件，但是当我尝试在加载的 html 中查找元素时，javascript 无法找到该元素。在 IE10 中显示了加载的 html，但标签没有改变。在 Chrome 中，加载不起作用。我是否加载不正确，有没有办法获得对元素的引用？

progress.html 只是在其中包含一个标签，其 id 为“”， `"progressLabel"`innerText 为“ `Loading...`”，仅此而已。

我正在创建一个模式对话框，然后加载，然后尝试获取进度标签：

```
$("#progressbarDiv").dialog({
    resizable: false,
    height: 240,
    width: 500,
    modal: true,
    closeOnEscape: false,
    //disabled: true,
    open: function (event, ui) {
        // Hide close button 
        $(this).parent().children().children(".ui-dialog-titlebar-close").hide();
    },
    buttons: {
        "Ok": {
            text: "OK",
            id: "myOKButton",
            click: function () {
                $(this).dialog("close");
            }
        } 
    }
});
$('#progressbarDiv').load('progress.html');
var testThis = $('#progressLabel');
testThis.text = "...Synchronizing data, please wait..."; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-25T16:09:33.727

要访问 AJAX 加载元素中的 HTML，您需要在回调函数中执行 Javascript。

```
$('#progressbarDiv').load('progress.html',function(){
    // Your script was setting $.text = , but it's a function.
    $('#progressLabel').text("...Synchronizing data, please wait...");
}); 
```

`$.load(url, callback)`是异步的，因此`$.load`返回时不会加载内容。`callback`你怎么知道它已经完成了它的`$.load`处理

您可以`$('#progressLabel').text("...Synchronizing data, please wait...");`在脚本中的任何位置使用。如果是一个足够小的项目，那没关系。如果您关心维护，您应该构建您的代码，以便它不需要从任何地方全局访问该 div。至少创建一个可以调用的函数，也许它可以按需加载？

```
/**
 * A simple but slightly better way to set the text from anywhere. 
 * Lazily fetches the progress HTML.
 */
function setProgressString(str) {
    function setText() {
        $('#progressLabel').text(str);
    }

    if ($('#progressLabel').length === 0) {
        $('#progressbarDiv').load('progress.html', setText);
    } else {
        setText();
    }    
}

// Use anytime
setProgressString('...Synchronizing data, please wait...')'; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T16:07:39.573

等到整个页面加载完毕后再尝试访问该元素。

# windows - 创建每天运行一次的 ac# 应用程序/Windows 服务

> ID：16219663
> 
> 赞同：1
> 
> 时间：2013-04-25T16:06:47.807
> 
> 标签：windows, service, alwayson

嗨，我需要创建一个每天运行一次的应用程序。该应用程序可以在用户一天内首次登录后的任何时间运行。

我的问题是，最好的方法是什么。我应该创建一个 Windows 服务或 Windows 应用程序来执行此操作吗？

另一个要求是应用程序必须每天运行一次，除非它已被卸载。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T16:08:06.083

您可以使用 Windows 任务计划程序。

# scripting - 使用 PHP 或 ASP 等内联参数调用 HTA 应用程序

> ID：16219664
> 
> 赞同：1
> 
> 时间：2013-04-25T16:06:48.937
> 
> 标签：scripting, parameters, arguments, intranet, hta

是否可以调用托管在内部网站（内联网）上的 .HTA 应用程序并使用标准的“?var=value”和“&var=value”语法传入参数/参数？我知道可以使用类似 WScript 的语法（例如“app.hta arg1 arg2 ...”）来启动它们。但即使解析为 %20 等，我似乎也无法让空间正常工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-04T19:00:31.023

您可以通过指定路径将命令行参数传递给 HTA，例如`C:\helloworld.hta "arg1"`. 下面是一个示例，将其保存到目录并使用此语法运行它`C:\helloworld.hta "admin" "user"`确保用引号将 arg 括起来，此脚本中的代码使用`Split Function`引号将命令行拆分。

```
<html>
<head>
<title>Hello World with Args</title>
<HTA:APPLICATION
  APPLICATIONNAME="Hello World with Args"
  ID="HelloWorldwithArgs"
  VERSION="1.0"/>
</head>

<script language="VBScript">
    Sub Window_OnLoad
        Window.resizeTo 400, 300

        args = Split(HelloWorldwithArgs.commandLine, Chr(34))
        For i = 3 To (UBound(args) - 1) Step 2
            Select Case LCase(args(i))
                Case "admin"
                    strAdmin = "Hello World!!" & vbCrLf & "You passed the admin arg."
                Case "user"
                    strUser =  "Hello World!!" & vbCrLf & "You passed the user arg."
            End Select
        Next

        DataArea.innerHTML = strAdmin & vbCrLf & strUser

    End Sub
</script>

<body bgcolor="white">
    <h1 align="center">Hello World</h1>
    <textarea align="center" name="DataArea" id="DataArea" rows="5" cols="40"></textarea><br /><br />
    <input type="button" style="width:100px;" name="btnExit" id="btnExit" value="Exit" onclick="self.close()">
</body>
</html> 
```

# xml - Sitecore：无法获取多列表项中的所有值

> ID：16219665
> 
> 赞同：0
> 
> 时间：2013-04-25T16:06:52.227
> 
> 标签：xml, xslt, sitecore, xslt-2.0, sitecore6

例如，我可以访问在 Sitecore 中创建的配置文件，并且可以获取它的名称。

(Sitecore) 设置 > 个人资料 > 用户类型 > 娱乐主管 > AR 主管

```
<xsl:variable name="ARExec" select="$UserTypes/item[3]/item[1]"/> 
```

上面的代码会打印出**AR Executive**

现在在**AR Executive**内部，我有一个**名为 Related Genre Types**的多列表，其中包括：

*   音乐
*   喜剧
*   电视

我一直在尝试在这里遵循这个例子：http: [//sdn.sitecore.net/Articles/XSL/Accessing%20Field%20Values/Multilist.aspx](http://sdn.sitecore.net/Articles/XSL/Accessing%20Field%20Values/Multilist.aspx)

但是我无法重现结果，我希望能够获取并列出所有 3 个名称，但它只能让我抓取第一项音乐。我试图弄清楚如何遍历 Multilist 中的项目并将它们全部显示出来。

```
<xsl:template match="*" mode="main">
....    

<xsl:variable name="ARExec" select="$UserTypes/item[3]/item[1]"/>

<lable><xsl:value-of select="sc:fld('Related Genre Types', $ARExec)"/></lable>

<xsl:variable name="ids" select="concat(sc:fld('Related Genre Types',$ARExec),'|')"/>

<xsl:call-template name="PrintTitles">
    <xsl:with-param name="ids" select="$ids"/>
</xsl:call-template>

</xsl:template>

<xsl:template name="PrintTitles">
  <xsl:param name="ids"/>
  <xsl:if test="$ids">
    <xsl:variable name="itm_id" select="substring-before($ids, '|')"/>
    <xsl:if test="$itm_id">
      <xsl:variable name="itm" select="sc:item($itm_id,.)"/>

        <xsl:value-of select="sc:fld('Title', $itm)"/> &amp; 

    </xsl:if>

    <xsl:call-template name="PrintTitles">
      <xsl:with-param name="ids" select="substring-after($ids, '|')"/>
    </xsl:call-template>
  </xsl:if>
</xsl:template> 
```

^ 打印出 {id number...}Music &

![Sitecore 编辑器](https://i.stack.imgur.com/r6MEi.png)

**如何循环遍历我的 Multilist 以获取并打印出所有 3 个项目？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T16:46:19.227

从我的脑海中，您将需要以下内容：

```
<xsl:variable name="item" select="$usertypes/item[3]/item[1]" />

<xsl:for-each select="sc:Split('related genre types', $item)>
    <xsl:variable name="fielditem" select="sc:item(.,.)"/>
    <sc:text field="title" select="$fielditem]/>
</xsl:for-each> 
```

我很抱歉格式化，我在我的手机上。

**[编辑]**
在 Split 函数中，我们不需要调用 sc:fld()。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T21:15:44.070

我必须以不同的方式定位 Multilist 项目的所有者，我必须使用 @key 来定位它，然后[示例代码](http://sdn.sitecore.net/Articles/XSL/Accessing%20Field%20Values/Multilist.aspx)才起作用：

```
<xsl:variable name="ExecUser" select="$UserTypes/item[@key='entertainment executive']" /> 
```

# php - sqlsrv fetch 数组仅返回 1 个结果（最新），我知道特定代码有 5 个以上

> ID：16219670
> 
> 赞同：0
> 
> 时间：2013-04-25T16:07:11.887
> 
> 标签：php, sql

这是我的查询，它只提取最近添加的 HOLDCODE。Armcode 是患者 ID，Holdcode 是两位数代码。

```
$test = sql::query("select ARMCODE, HOLDCODE from ARE.AAS.ME where ARMCODE = 'ADSMANZS01'", $row['HOLDCODE']);
if($test){
  $data = sqlsrv_fetch_array($test);
  echo $data['HOLDCODE'];
} 
```

我是否需要对结果进行 foreach 或 for 循环以使它们全部回显或 print_r？

像往常一样，任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T16:11:29.047

使用 while 循环来迭代这样的结果

```
 while ($data = sqlsrv_fetch_array($test);) {
      //perform your task
  } 
```

# django - 将命名 URL 的值分配给 Django 模板中的变量

> ID：16219674
> 
> 赞同：19
> 
> 时间：2013-04-25T16:07:24.407
> 
> 标签：django

在我的 Django 模板中，我需要将名称 url 的值分配给 with 块内的变量，以便我可以在多个地方使用它。

我需要实现这样的目标：

```
{% for tag in post.tags.all %}
    {% with tagabs={%url showtag tag%} %}
          <li><a href="{{tagabs}}">#{{tag}}</a></li>
    {% endwith %}
{% endfor %} 
```

但显然这不起作用，最终会出现解析错误。上面的例子是一个简单的场景，我可以只使用 {%url showtag tag%} 而不是 {{tagabs}} 并删除 with 块。但在我的场景中，我需要在多个地方和 if 语句中使用 tagabs 值进行比较。

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：51
> 
> 时间：2013-04-25T17:35:55.633

如果功能在核心中，为什么要创建新的模板标签/过滤器？

查看示例：[https ://docs.djangoproject.com/en/dev/ref/templates/builtins/#url](https://docs.djangoproject.com/en/dev/ref/templates/builtins/#url)

```
{% url 'path.to.view' arg arg2 as the_url %}

<a href="{{ the_url }}">I'm linking to {{ the_url }}</a> 
```

和

```
{% url 'path.to.view' as the_url %}
{% if the_url %}
  <a href="{{ the_url }}">Link to optional stuff</a>
{% endif %} 
```

* * *

## 回答 #2

> 赞同：-4
> 
> 时间：2013-04-25T16:28:22.177

我认为您必须创建自己的[模板标记](https://docs.djangoproject.com/en/dev/howto/custom-template-tags/)来管理此问题，或者在视图中创建必要的数据并将其传递给模板。

取决于您正在尝试做什么，可能[包括](https://docs.djangoproject.com/en/dev/ref/templates/builtins/#include)另一个模板并发送您定义的变量可以做到这一点，但我对此表示怀疑。

Django 模板系统背后的想法是使其模板中没有太多逻辑。因此，它又回到了准备在视图中输出所需的数据或制作模板标签。

# mysql - 全文搜索有问题

> ID：16219685
> 
> 赞同：1
> 
> 时间：2013-04-25T16:07:46.990
> 
> 标签：mysql

我是新来的`MySQL FULLTEXTSEARCH`。这是我尝试过的，

```
SELECT * 
FROM example_myisam
WHERE MATCH(data, data2) AGAINST ('+*ar' IN BOOLEAN MODE); 
```

但它给了我零结果。我正在寻找的是将此`LIKE`语句转换为`FULLTEXT`

```
SELECT *
FROM example_myisam 
WHERE data LIKE '%ar' OR
      data2 LIKE '%ar'; 
```

如果有帮助，这里有一个演示：[http ://www.sqlfiddle.com/#!2/d3fdd/12](http://www.sqlfiddle.com/#!2/d3fdd/12)

这也是我的 DDL 声明：

```
CREATE TABLE example_myisam
(
    id     INT,
    data   VARCHAR(50),
    data2  VARCHAR(50)
) ENGINE = MYISAM;

ALTER TABLE example_myisam ADD FULLTEXT alltext (data, data2); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T16:27:59.333

您可能需要结合`MATCH()...AGAINST()`和`LIKE`来获得您想要的结果。`*`用于查找带有前缀的单词。所以，它必须像`Vict*`.

# c# - 为什么单击网格行时会得到错误的值？

> ID：16219686
> 
> 赞同：0
> 
> 时间：2013-04-25T16:07:47.500
> 
> 标签：c#, asp.net, gridview

我正在尝试选择一个 GridView 行，并将其 id 保存到一个变量中，然后在超链接中使用这个 id 来删除该行。

问题是 id=9 一直，即使没有点击任何行。

这是代码：

```
 string id;

  protected void GridView1_RowDataBound(object sender, GridViewRowEventArgs e)
  {
     if (e.Row.RowType == DataControlRowType.DataRow)
     {
         e.Row.Attributes.Add(
             "onmouseover",
             "this.style.cursor='Pointer';this.style.backgroundColor='Yellow'");
         e.Row.RowIndex.ToString())); 

         id = DataBinder.Eval(e.Row.DataItem, "ProductionOrderId").ToString();
     }
  } 
```

这是超链接代码

```
<a href='<%=ResolveUrl("~/Producter/Delete?id=" + id) %>' ID="HyperLink1">Delete</a> 
```

这是删除功能应该是

```
namespace MvcApplication3.Controllers
{
public class TEstController : Controller
{
    //
    // GET: /TEst/

    public ActionResult Index()
    {
        var db = new DataClasses1DataContext();
        var list = from d in db.Orders
                   select d;
        ViewData["list"] = list;
        return View();
    }

    public ActionResult Delete(Object id)
    { 

    // TODO
        // Delete thr user which its id = obj.id ; 

        return View();
    }

} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T16:53:07.890

如果您只需要获取 id，您应该像这样获取它：

```
id = e.Row.DataItem["ProductionOrderId"].ToString(); 
```

小心测试`e.Row.DataItem["ProductionOrderId"]`值，因为在空对象上调用`ToString()`方法会引发异常。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T16:37:05.440

好的，试试这个，摆脱事件，你不需要做任何特别的事情，因为在这种情况下你想要的只是访问 ID 值。

在您使用 ID 的模板代码中：

```
<a href='<%=ResolveUrl("~/Producter/Delete?id=" + id) %>' ID="HyperLink1">Delete</a> 
```

改为这样做：

```
<a href='<%=ResolveUrl("~/Producter/Delete?id=" + Eval("ProductionOrderId")) %>'>Delete</a> 
```

# c++ - 如何使用signal_set终止boost asio io_service run

> ID：16219687
> 
> 赞同：1
> 
> 时间：2013-04-25T16:07:54.770
> 
> 标签：c++, boost, boost-asio

我正在尝试将 ^C 处理程序添加到 boost io_service。在添加之前，服务将在 I/O 用完时退出（所有关联的套接字都已关闭）。添加 signal_set 后，它不会退出，直到它得到一个 SIGINT。例如：

```
#include <boost/asio.hpp>
int main() {
  boost::asio::io_service io_service;
  boost::asio::signal_set exit_signal_set{io_service, SIGINT};
  exit_signal_set.async_wait
    ([&](boost::system::error_code const&, int) {
      std::cerr << "exiting, sigint" << std::endl;
      io_service.stop();
    });
  io_service.run();
  return 0;
} 
```

我希望立即退出，而不是等待信号，因为没有 I/O 要做。同义词：

```
#include <poll.h>
#include <signal.h>
#include <stdio.h>

bool do_exit{false};

static void handle_int(int) {
  do_exit = true;
}

int main() {
  signal(SIGINT, handle_int);
  nfds_t nfds{0};
  struct pollfd pollfds[nfds];
  while (true) {
    poll(pollfds, nfds, 0);
    if (do_exit) {
      fprintf(stderr, "exiting, sigint\n");
      break;
    }
    if (nfds == 0) {
      // What I would like to happen.
      fprintf(stderr, "exiting, nothing left to do\n");
      break;
    }
  }
  return 0;
} 
```

# html - 绝对定位标签隐藏在移动视图中

> ID：16219689
> 
> 赞同：0
> 
> 时间：2013-04-25T16:08:03.613
> 
> 标签：html, css, mobile, responsive-design

这可能是一个非常简单的问题，但我似乎无法让它工作。我的标题中有一个绝对定位的标签，它隐藏在移动视图中。如何让它显示出来？网址是[http://tinyurl.com/a8o5ge2](http://tinyurl.com/a8o5ge2)链接是顶部登录链接（专业帐户）。

非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T16:14:01.007

我注意到右上角的链接溢出了 .top-bar

```
.top-bar {
overflow: visible;
} 
```

不幸的是，这会暴露您的菜单。尝试将您的亲登录移出导航。

# domain-driven-design - 领域驱动设计中的领域事件是否隐藏了意图？

> ID：16219693
> 
> 赞同：1
> 
> 时间：2013-04-25T16:08:14.567
> 
> 标签：domain-driven-design

使用领域事件是 DDD 应用程序广泛认可的实践，但有些场景对我来说很棘手。

我最近正在开发一个应用程序，其中业务逻辑要求在创建新用户时，该用户也在三个独立的子系统中创建。所以基本上如果你使用事务脚本方法，它看起来像：

```
public void CreateUser()
{
    CreateUserInSystemA();
    CreateUserInSystemB();
    CreateUserInSystemC();
} 
```

我正在研究的方法是使用域事件，所以入口点看起来像：

```
public void CreateUser()
{
    CreateUserInSystemA();
} 
```

然后`CreateUserInSystemA`会在创建用户时引发域事件。然后该事件的处理程序将在系统 B 中创建用户，引发另一个域事件，然后另一个处理程序将运行，该处理程序将在系统 C 中创建用户。所有这些都是在注册 DI 容器期间设置的，因此这几乎是硬连线的。

所以问题是：

1）这种方法是否有效地隐藏了域逻辑？通过查看 CreateUser 方法来了解我们真正在做什么并不容易。

2）如果（就像我们的例子中发生的那样），您将有一个新的工作流程，您只需要在系统 A 和 B 中创建用户 - 因此`CreateUserInSystemC`不应该调用？如果我们使用现有的`CreateUserInSystemB`实现，它将引发域事件，并且硬连线`CreateUserInSystemC`将无论如何运行。

以正确的 DDD 方式处理这种情况的最佳方法是什么？我们是否应该使用应用程序服务层并简单地为两个工作流公开两个单独的方法，而不是基于领域事件的流程？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T16:35:43.750

对我来说，Domain 本身就是一个子系统。在您的情况下，您有多个互连的系统。在这种情况下，您的事件是系统间事件，而不是域事件。

因此，根据子系统之间的关系触发事件。从每个领域（子系统）的角度来看，其他子系统都是集成层，内部可能有自己的领域模型。

因此，您的问题的答案是：

1) 不，因为该方法与系统集成完全相关。

2) 流程变化需要集成行为的变化，而不是子系统的变化。

还有一点：我所说的子系统与服务类似。每个域都有与之交互的服务。服务通常与交互相关联（具有多个服务的 SOA 系统就是一个实现示例）。另外，每个域也可以是一个服务，可能通过服务层公开。

# c# - MVC4 SimpleMembership 角色/将字段添加到 pages_Roles

> ID：16219694
> 
> 赞同：1
> 
> 时间：2013-04-25T16:08:14.897
> 
> 标签：c#, asp.net-mvc-4

我想为角色添加更多属性（例如长描述）。

我还希望能够将角色与我的数据库中的给定“资源”相关联（例如*“体育部分的作家*”）。这类似于此人询问的内容：[具有自定义属性的 MVC 角色](https://stackoverflow.com/questions/14991274/mvc-roles-with-custom-properties)。

我可以使用[它](http://blog.spontaneouspublicity.com/including-asp-net-simple-membership-tables-as-part-of-your-entity-framework-model)并将 pages_Roles 表映射到 EF，并向其中添加更多字段，甚至与其他实体的关系。这在允许每个租户定义自己的角色并让每个角色指向它有权访问的资源的多租户应用程序中特别有用。

我想知道这是否是解决该问题的一种受支持的方法，或者它是否可能会破坏 SimpleMembership（我将尝试自己，但我更想知道从长远来看这是否是一种可行的方法以及是否有类似的经验- 也许是关于扩展角色的教程）。

具体问题：

1.  这可能吗？
2.  您是否知道完成此操作的教程或其他网络参考？

# spring - Spring-mvc-jpa 与 Maven 错误创建 bean

> ID：16219695
> 
> 赞同：0
> 
> 时间：2013-04-25T16:08:16.763
> 
> 标签：spring, jpa, spring-mvc, persistence-unit

这是我的第一个问题。我是 Spring-MVC 和 Jpa 的新手，我遇到了这个问题，我自己也搞不清楚。我尝试在 Google 上搜索，但没有找到与此错误相关的内容：我已将所有配置文件存储在src/main/resources/META-INF 我正在使用 Maven 和 STS。

```
 Apr 25, 2013 9:15:55 PM org.apache.catalina.core.ApplicationContext log
    INFO: Initializing Spring FrameworkServlet 'appServlet'
    Apr 25, 2013 9:15:56 PM org.apache.catalina.core.ApplicationContext log
    SEVERE: StandardWrapper.Throwable
    org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'org.springframework.web.servlet.mvc.annotation.DefaultAnnotationHandlerMapping#0': Initialization of bean failed; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'adminController': Injection of autowired dependencies failed; nested exception is org.springframework.beans.factory.BeanCreationException: Could not autowire field: private com.zensoftech.service.DefaultAdminService com.zensoftech.controller.AdminController.das; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'defaultAdminServiceImpl': Injection of autowired dependencies failed; nested exception is org.springframework.beans.factory.BeanCreationException: Could not autowire field: private com.zensoftech.dao.CustomerDao com.zensoftech.service.impl.DefaultAdminServiceImpl.custDao; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'customerDaoImpl': Injection of persistence dependencies failed; nested exception is org.springframework.beans.factory.NoSuchBeanDefinitionException: No bean named 'appserverPU' is defined
        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:527)
        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:456)
        at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:293)
        at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:222)
        at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:290)
        at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:192)
        at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:585)
        at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:895)
        at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:425)
        at org.springframework.web.servlet.FrameworkServlet.createWebApplicationContext(FrameworkServlet.java:467)
        at org.springframework.web.servlet.FrameworkServlet.createWebApplicationContext(FrameworkServlet.java:483)
        at org.springframework.web.servlet.FrameworkServlet.initWebApplicationContext(FrameworkServlet.java:358)
        at org.springframework.web.servlet.FrameworkServlet.initServletBean(FrameworkServlet.java:325)
        at org.springframework.web.servlet.HttpServletBean.init(HttpServletBean.java:127)
        at javax.servlet.GenericServlet.init(GenericServlet.java:160)
        at org.apache.catalina.core.StandardWrapper.initServlet(StandardWrapper.java:1228)
        at org.apache.catalina.core.StandardWrapper.loadServlet(StandardWrapper.java:1147)
        at org.apache.catalina.core.StandardWrapper.load(StandardWrapper.java:1043)
        at org.apache.catalina.core.StandardContext.loadOnStartup(StandardContext.java:4957)
        at org.apache.catalina.core.StandardContext$3.call(StandardContext.java:5284)
        at org.apache.catalina.core.StandardContext$3.call(StandardContext.java:5279)
        at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:334)
        at java.util.concurrent.FutureTask.run(FutureTask.java:166)
        at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
        at java.lang.Thread.run(Thread.java:722)
    Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'adminController': Injection of autowired dependencies failed; nested exception is org.springframework.beans.factory.BeanCreationException: Could not autowire field: private com.zensoftech.service.DefaultAdminService com.zensoftech.controller.AdminController.das; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'defaultAdminServiceImpl': Injection of autowired dependencies failed; nested exception is org.springframework.beans.factory.BeanCreationException: Could not autowire field: private com.zensoftech.dao.CustomerDao com.zensoftech.service.impl.DefaultAdminServiceImpl.custDao; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'customerDaoImpl': Injection of persistence dependencies failed; nested exception is org.springframework.beans.factory.NoSuchBeanDefinitionException: No bean named 'appserverPU' is defined
        at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.postProcessPropertyValues(AutowiredAnnotationBeanPostProcessor.java:288)
        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1074)
        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:517)
        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:456)
        at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:293)
        at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:222)
        at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:290)
        at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:192)
        at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1075)
        at org.springframework.web.servlet.handler.AbstractUrlHandlerMapping.registerHandler(AbstractUrlHandlerMapping.java:383)
        at org.springframework.web.servlet.handler.AbstractUrlHandlerMapping.registerHandler(AbstractUrlHandlerMapping.java:362)
        at org.springframework.web.servlet.handler.AbstractDetectingUrlHandlerMapping.detectHandlers(AbstractDetectingUrlHandlerMapping.java:82)
        at org.springframework.web.servlet.handler.AbstractDetectingUrlHandlerMapping.initApplicationContext(AbstractDetectingUrlHandlerMapping.java:58)
        at org.springframework.context.support.ApplicationObjectSupport.initApplicationContext(ApplicationObjectSupport.java:119)
        at org.springframework.web.context.support.WebApplicationObjectSupport.initApplicationContext(WebApplicationObjectSupport.java:72)
        at org.springframework.context.support.ApplicationObjectSupport.setApplicationContext(ApplicationObjectSupport.java:73)
        at org.springframework.context.support.ApplicationContextAwareProcessor.invokeAwareInterfaces(ApplicationContextAwareProcessor.java:109)
        at org.springframework.context.support.ApplicationContextAwareProcessor.postProcessBeforeInitialization(ApplicationContextAwareProcessor.java:88)
        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.applyBeanPostProcessorsBeforeInitialization(AbstractAutowireCapableBeanFactory.java:394)
        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1413)
        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:519)
        ... 25 more
    Caused by: org.springframework.beans.factory.BeanCreationException: Could not autowire field: private com.zensoftech.service.DefaultAdminService com.zensoftech.controller.AdminController.das; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'defaultAdminServiceImpl': Injection of autowired dependencies failed; nested exception is org.springframework.beans.factory.BeanCreationException: Could not autowire field: private com.zensoftech.dao.CustomerDao com.zensoftech.service.impl.DefaultAdminServiceImpl.custDao; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'customerDaoImpl': Injection of persistence dependencies failed; nested exception is org.springframework.beans.factory.NoSuchBeanDefinitionException: No bean named 'appserverPU' is defined
        at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.inject(AutowiredAnnotationBeanPostProcessor.java:508)
        at org.springframework.beans.factory.annotation.InjectionMetadata.inject(InjectionMetadata.java:84)
        at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.postProcessPropertyValues(AutowiredAnnotationBeanPostProcessor.java:285)
        ... 45 more
    Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'defaultAdminServiceImpl': Injection of autowired dependencies failed; nested exception is org.springframework.beans.factory.BeanCreationException: Could not autowire field: private com.zensoftech.dao.CustomerDao com.zensoftech.service.impl.DefaultAdminServiceImpl.custDao; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'customerDaoImpl': Injection of persistence dependencies failed; nested exception is org.springframework.beans.factory.NoSuchBeanDefinitionException: No bean named 'appserverPU' is defined
        at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.postProcessPropertyValues(AutowiredAnnotationBeanPostProcessor.java:288)
        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1074)
        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:517)
        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:456)
        at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:293)
        at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:222)
        at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:290)
        at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:192)
        at org.springframework.beans.factory.support.DefaultListableBeanFactory.findAutowireCandidates(DefaultListableBeanFactory.java:848)
        at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:790)
        at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:707)
        at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.inject(AutowiredAnnotationBeanPostProcessor.java:480)
        ... 47 more
    Caused by: org.springframework.beans.factory.BeanCreationException: Could not autowire field: private com.zensoftech.dao.CustomerDao com.zensoftech.service.impl.DefaultAdminServiceImpl.custDao; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'customerDaoImpl': Injection of persistence dependencies failed; nested exception is org.springframework.beans.factory.NoSuchBeanDefinitionException: No bean named 'appserverPU' is defined
        at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.inject(AutowiredAnnotationBeanPostProcessor.java:508)
        at org.springframework.beans.factory.annotation.InjectionMetadata.inject(InjectionMetadata.java:84)
        at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.postProcessPropertyValues(AutowiredAnnotationBeanPostProcessor.java:285)
        ... 58 more
    Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'customerDaoImpl': Injection of persistence dependencies failed; nested exception is org.springframework.beans.factory.NoSuchBeanDefinitionException: No bean named 'appserverPU' is defined
        at org.springframework.orm.jpa.support.PersistenceAnnotationBeanPostProcessor.postProcessPropertyValues(PersistenceAnnotationBeanPostProcessor.java:341)
        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1074)
        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:517)
        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:456)
        at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:293)
        at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:222)
        at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:290)
        at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:192)
        at org.springframework.beans.factory.support.DefaultListableBeanFactory.findAutowireCandidates(DefaultListableBeanFactory.java:848)
        at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:790)
        at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:707)
        at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.inject(AutowiredAnnotationBeanPostProcessor.java:480)
        ... 60 more
    Caused by: org.springframework.beans.factory.NoSuchBeanDefinitionException: No bean named 'appserverPU' is defined
        at org.springframework.beans.factory.support.DefaultListableBeanFactory.getBeanDefinition(DefaultListableBeanFactory.java:529)
        at org.springframework.beans.factory.support.AbstractBeanFactory.getMergedLocalBeanDefinition(AbstractBeanFactory.java:1094)
        at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:276)
        at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:196)
        at org.springframework.orm.jpa.EntityManagerFactoryUtils.findEntityManagerFactory(EntityManagerFactoryUtils.java:107)
        at org.springframework.orm.jpa.support.PersistenceAnnotationBeanPostProcessor.findNamedEntityManagerFactory(PersistenceAnnotationBeanPostProcessor.java:510)
        at org.springframework.orm.jpa.support.PersistenceAnnotationBeanPostProcessor.findEntityManagerFactory(PersistenceAnnotationBeanPostProcessor.java:492)
        at org.springframework.orm.jpa.support.PersistenceAnnotationBeanPostProcessor$PersistenceElement.resolveEntityManager(PersistenceAnnotationBeanPostProcessor.java:656)
        at org.springframework.orm.jpa.support.PersistenceAnnotationBeanPostProcessor$PersistenceElement.getResourceToInject(PersistenceAnnotationBeanPostProcessor.java:629)
        at org.springframework.beans.factory.annotation.InjectionMetadata$InjectedElement.inject(InjectionMetadata.java:147)
        at org.springframework.beans.factory.annotation.InjectionMetadata.inject(InjectionMetadata.java:84)
        at org.springframework.orm.jpa.support.PersistenceAnnotationBeanPostProcessor.postProcessPropertyValues(PersistenceAnnotationBeanPostProcessor.java:338)
        ... 71 more

    Apr 25, 2013 9:15:56 PM org.apache.catalina.core.StandardContext loadOnStartup
    SEVERE: Servlet /appserver threw load() exception
    org.springframework.beans.factory.NoSuchBeanDefinitionException: No bean named 'appserverPU' is defined
        at org.springframework.beans.factory.support.DefaultListableBeanFactory.getBeanDefinition(DefaultListableBeanFactory.java:529)
        at org.springframework.beans.factory.support.AbstractBeanFactory.getMergedLocalBeanDefinition(AbstractBeanFactory.java:1094)
        at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:276)
        at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:196)
        at org.springframework.orm.jpa.EntityManagerFactoryUtils.findEntityManagerFactory(EntityManagerFactoryUtils.java:107)
        at org.springframework.orm.jpa.support.PersistenceAnnotationBeanPostProcessor.findNamedEntityManagerFactory(PersistenceAnnotationBeanPostProcessor.java:510)
        at org.springframework.orm.jpa.support.PersistenceAnnotationBeanPostProcessor.findEntityManagerFactory(PersistenceAnnotationBeanPostProcessor.java:492)
        at org.springframework.orm.jpa.support.PersistenceAnnotationBeanPostProcessor$PersistenceElement.resolveEntityManager(PersistenceAnnotationBeanPostProcessor.java:656)
        at org.springframework.orm.jpa.support.PersistenceAnnotationBeanPostProcessor$PersistenceElement.getResourceToInject(PersistenceAnnotationBeanPostProcessor.java:629)
        at org.springframework.beans.factory.annotation.InjectionMetadata$InjectedElement.inject(InjectionMetadata.java:147)
        at org.springframework.beans.factory.annotation.InjectionMetadata.inject(InjectionMetadata.java:84)
        at org.springframework.orm.jpa.support.PersistenceAnnotationBeanPostProcessor.postProcessPropertyValues(PersistenceAnnotationBeanPostProcessor.java:338)
        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1074)
        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:517)
        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:456)
        at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:293)
        at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:222)
        at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:290)
        at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:192)
        at org.springframework.beans.factory.support.DefaultListableBeanFactory.findAutowireCandidates(DefaultListableBeanFactory.java:848)
        at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:790)
        at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:707)
        at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.inject(AutowiredAnnotationBeanPostProcessor.java:480)
        at org.springframework.beans.factory.annotation.InjectionMetadata.inject(InjectionMetadata.java:84)
        at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.postProcessPropertyValues(AutowiredAnnotationBeanPostProcessor.java:285)
        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1074)
        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:517)
        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:456)
        at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:293)
        at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:222)
        at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:290)
        at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:192)
        at org.springframework.beans.factory.support.DefaultListableBeanFactory.findAutowireCandidates(DefaultListableBeanFactory.java:848)
        at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:790)
        at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:707)
        at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.inject(AutowiredAnnotationBeanPostProcessor.java:480)
        at org.springframework.beans.factory.annotation.InjectionMetadata.inject(InjectionMetadata.java:84)
        at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.postProcessPropertyValues(AutowiredAnnotationBeanPostProcessor.java:285)
        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1074)
        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:517)
        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:456)
        at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:293)
        at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:222)
        at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:290)
        at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:192)
        at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1075)
        at org.springframework.web.servlet.handler.AbstractUrlHandlerMapping.registerHandler(AbstractUrlHandlerMapping.java:383)
        at org.springframework.web.servlet.handler.AbstractUrlHandlerMapping.registerHandler(AbstractUrlHandlerMapping.java:362)
        at org.springframework.web.servlet.handler.AbstractDetectingUrlHandlerMapping.detectHandlers(AbstractDetectingUrlHandlerMapping.java:82)
        at org.springframework.web.servlet.handler.AbstractDetectingUrlHandlerMapping.initApplicationContext(AbstractDetectingUrlHandlerMapping.java:58)
        at org.springframework.context.support.ApplicationObjectSupport.initApplicationContext(ApplicationObjectSupport.java:119)
        at org.springframework.web.context.support.WebApplicationObjectSupport.initApplicationContext(WebApplicationObjectSupport.java:72)
        at org.springframework.context.support.ApplicationObjectSupport.setApplicationContext(ApplicationObjectSupport.java:73)
        at org.springframework.context.support.ApplicationContextAwareProcessor.invokeAwareInterfaces(ApplicationContextAwareProcessor.java:109)
        at org.springframework.context.support.ApplicationContextAwareProcessor.postProcessBeforeInitialization(ApplicationContextAwareProcessor.java:88)
        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.applyBeanPostProcessorsBeforeInitialization(AbstractAutowireCapableBeanFactory.java:394)
        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1413)
        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:519)
        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:456)
        at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:293)
        at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:222)
        at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:290)
        at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:192)
        at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:585)
        at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:895)
        at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:425)
        at org.springframework.web.servlet.FrameworkServlet.createWebApplicationContext(FrameworkServlet.java:467)
        at org.springframework.web.servlet.FrameworkServlet.createWebApplicationContext(FrameworkServlet.java:483)
        at org.springframework.web.servlet.FrameworkServlet.initWebApplicationContext(FrameworkServlet.java:358)
        at org.springframework.web.servlet.FrameworkServlet.initServletBean(FrameworkServlet.java:325)
        at org.springframework.web.servlet.HttpServletBean.init(HttpServletBean.java:127)
        at javax.servlet.GenericServlet.init(GenericServlet.java:160)
        at org.apache.catalina.core.StandardWrapper.initServlet(StandardWrapper.java:1228)
        at org.apache.catalina.core.StandardWrapper.loadServlet(StandardWrapper.java:1147)
        at org.apache.catalina.core.StandardWrapper.load(StandardWrapper.java:1043)
        at org.apache.catalina.core.StandardContext.loadOnStartup(StandardContext.java:4957)
        at org.apache.catalina.core.StandardContext$3.call(StandardContext.java:5284)
        at org.apache.catalina.core.StandardContext$3.call(StandardContext.java:5279)
        at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:334)
        at java.util.concurrent.FutureTask.run(FutureTask.java:166)
        at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
        at java.lang.Thread.run(Thread.java:722)

persistence.xml

    <?xml version="1.0" encoding="UTF-8"?>
    <persistence 
        xmlns="http://java.sun.com/xml/ns/persistence"
        xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" version="2.0"
        xsi:schemaLocation="http://java.sun.com/xml/ns/persistence http://java.sun.com/xml/ns/persistence/persistence_2_0.xsd">

        <persistence-unit name="appserverPU" transaction-type="RESOURCE_LOCAL">
        <provider>org.hibernate.ejb.HibernatePersistence</provider>

            <class>com.zensoftech.jpamodel.impl.JpaService</class>
            <class>com.zensoftech.jpamodel.impl.JpaCustomer</class>
            <class>com.zensoftech.jpamodel.impl.JpaIpGroup</class>
            <class>com.zensoftech.jpamodel.impl.JpaServer</class>   
            <class>com.zensoftech.jpamodel.impl.JpaProfile</class>
            <class>com.zensoftech.jpamodel.impl.JpaCharges</class>
            <class>com.zensoftech.jpamodel.impl.JpaSubscription</class>
            <class>com.zensoftech.jpamodel.impl.JpaBaseLine</class>
            <class>com.zensoftech.jpamodel.impl.JpaExceptionReport</class>
            <class>com.zensoftech.jpamodel.impl.JpaScanResult</class>
            <class>com.zensoftech.jpamodel.impl.JpaIp</class>
            <class>com.zensoftech.jpamodel.impl.JpaLoginChecker</class>
            <exclude-unlisted-classes></exclude-unlisted-classes>
        </persistence-unit>

    </persistence> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-25T16:31:50.813

我认为您的内部配置失败`customerDaoImpl`

我猜你已经`appserverPU`用`@Autowire`or注释了这个字段`@Inject`。

但是如果它是一个实体管理器，你需要用它来注释它`@PersistenceContext`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-26T12:36:28.087

解决了.....我将我的application-context.xml 包含到我的servlet-context.xml 中。我的 application-context.xml 包含因此我找不到持久性单元的错误被消除，另一个问题是 mysql 驱动程序。最初我没有在我的 pom.xml 中添加驱动程序，这是我后来添加的。这解决了我的问题。如果您仔细看一下，它是说没有声明作为持久性单元的“appserverPU”，所以我只是猜测它以某种方式无法访问该persistence.xml 文件。这只是一个猜测，但有效。:D :D :D :D :D :D

# java - 以参数化类型作为参数返回不同类型对象列表的方法

> ID：16219696
> 
> 赞同：1
> 
> 时间：2013-04-25T16:08:19.487
> 
> 标签：java, generics

我正在尝试创建一个可以返回不同类型数据列表的方法。type参数是标识需要处理的数据类型，返回getListedData(Class type)。我还编写了一个私有方法 createList(Class type, List list, String flag)，所有类型数据都可以使用它来创建列表。

代码符合我的预期，但作为泛型的新手，我不相信这是最好的编写方式。谁能给我一些建议？特别是在使用带有 LIst 的泛型和反射构造函数来创建对象实例时。（我使用它的原因是使该方法可重用于所有类型）。我对演员阵容感到恼火:(

这些不同类型的类具有相同的结构。

```
 public class TypeA {
        private String propOne;
        public TypeA(String propOne) {
            super();
            this.propOne = propOne;
        }
        public String getPropOne() {
            return propOne;
        }
        public void setPropOne(String propOne) {
            this.propOne = propOne;
        }           
    }

    public class TypeB {
        private String propOne;
        public TypeB(String propOne) {
            super();
            this.propOne = propOne;
        }
        public String getPropOne() {
            return propOne;
        }
        public void setPropOne(String propOne) {
            this.propOne = propOne;
        }
    } 
```

将加载相同的结构化数据类型。

```
 public class Test {
        @SuppressWarnings("unchecked")
        public static void main(String arg[]) throws SecurityException, IllegalArgumentException, NoSuchMethodException, InstantiationException, IllegalAccessException, InvocationTargetException{
            Test test = new Test();
            List<TypeB> b = (List<TypeB>) test.getListedData(TypeB.class);
            List<TypeA> a = (List<TypeA>) test.getListedData(TypeA.class);
                            //similar repeate.....
        }

        public <T> List<T> getListedData(Class<T> type) throws SecurityException, NoSuchMethodException, IllegalArgumentException, InstantiationException, IllegalAccessException, InvocationTargetException{
            List<T> list = new ArrayList<T>();
            String flag = "";
            if(type.equals(TypeA.class)){
                flag = "A";
                createList(type, list, flag);
            }else{
                flag = "B";
                createList(type, list, flag);
            }
            return list;
        }

        private <T> void createList(Class<T> type, List<T> list, String flag)
                throws NoSuchMethodException, InstantiationException,
                IllegalAccessException, InvocationTargetException {
            for(int i=0; i<2; i++){
                Constructor<?> ctor = type.getConstructor(String.class);
                Object object = ctor.newInstance(new Object[] {String.valueOf(i)});
                list.add((T) object);
                //do something with flag... 
            }
        }
    } 
```

任何建议，将不胜感激。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T16:18:05.450

最好避免案件。您可以执行以下操作，也可以通过反射使用该类的静态成员。

```
public <T> List<T> getListedData(Class<T> type) throws SecurityException, 
        NoSuchMethodException, IllegalArgumentException, InstantiationException,
        IllegalAccessException, InvocationTargetException {
    List<T> list = new ArrayList<>();
    String flag = type.getSimpleName();
    createList(type, list, flag);
    return list;
}

private <T> void createList(Class<T> type, List<T> list, String flag)
        throws NoSuchMethodException, InstantiationException,
        IllegalAccessException, InvocationTargetException {
    for (int i = 0; i < 2; i++) {
        Constructor<?> ctor = type.getConstructor(String.class);
        Object object = ctor.newInstance(new Object[]{String.valueOf(i)});
        list.add((T) object);
        //do something with flag... 
    }
} 
```

# sox - 在静音时分割音频时将时间戳附加到文件名

> ID：16219697
> 
> 赞同：3
> 
> 时间：2013-04-25T16:08:31.610
> 
> 标签：sox

在静音时分割音频文件时，例如

```
sox input.wav output.wav silence 1 0.5 1% 1 3.0 1% : newfile : restart 
```

多个输出文件的文件名如 output001.wav、output002.wav、...</p>

是否可以在输入文件中附加段的开始时间？即，如果一个文件有一个从 1200ms 开始的非静默期，另一个从 5000ms 开始，则输出文件名可能类似于 output1200.wav、output5000.wav。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-01T20:47:15.600

不幸的是，不修改 SoX 是不可能的。静音效果不会以任何方式报告它从修剪切换到复制或反之亦然的点。

# cassandra - Nutch 2.1 cassandra 后端生成错误

> ID：16219699
> 
> 赞同：0
> 
> 时间：2013-04-25T16:08:40.913
> 
> 标签：cassandra, nutch, gora

我选择了 cassandra 作为后端并开始使用 nutch。

DMOZ url 的一小部分（~50k），所有（注入、生成、获取）运行良好。

然而，在我注入整个 DMOZ url 集 (~3.5M) 并尝试生成一个 fetchlist 后，我​​得到了以下错误，该错误在另一个系统上可以重现：

```
~/software/nutch_dmoz/local$ ./bin/nutch generate -topN 1000
GeneratorJob: Selecting best-scoring urls due for fetch.
GeneratorJob: starting
GeneratorJob: filtering: true
GeneratorJob: topN: 1000
GeneratorJob: java.lang.RuntimeException: job failed: name=generate: 1366905487-307733671, jobid=job_local_0001
    at org.apache.nutch.util.NutchJob.waitForCompletion(NutchJob.java:54)
    at org.apache.nutch.crawl.GeneratorJob.run(GeneratorJob.java:191)
    at org.apache.nutch.crawl.GeneratorJob.generate(GeneratorJob.java:213)
    at org.apache.nutch.crawl.GeneratorJob.run(GeneratorJob.java:241)
    at org.apache.hadoop.util.ToolRunner.run(ToolRunner.java:65)
    at org.apache.nutch.crawl.GeneratorJob.main(GeneratorJob.java:249) 
```

日志/hadoop.log：

```
2013-04-25 17:58:07,986 INFO  crawl.GeneratorJob - GeneratorJob: Selecting best-scoring urls due for fetch.
2013-04-25 17:58:08,007 INFO  crawl.GeneratorJob - GeneratorJob: starting
2013-04-25 17:58:08,007 INFO  crawl.GeneratorJob - GeneratorJob: filtering: true
2013-04-25 17:58:08,007 INFO  crawl.GeneratorJob - GeneratorJob: topN: 1000
2013-04-25 17:58:08,570 INFO  connection.CassandraHostRetryService - Downed Host Retry service started with queue size -1 and retry delay 10
s
2013-04-25 17:58:08,660 INFO  service.JmxMonitor - Registering JMX me.prettyprint.cassandra.service_Test Cluster:ServiceType=hector,MonitorT
ype=hector
2013-04-25 17:58:09,029 WARN  util.NativeCodeLoader - Unable to load native-hadoop library for your platform... using builtin-java classes w
here applicable
2013-04-25 17:58:09,403 INFO  mapreduce.GoraRecordReader - gora.buffer.read.limit = 10000
2013-04-25 17:58:09,435 INFO  plugin.PluginRepository - Plugins: looking in: /home/sethunder/software/nutch_dmoz/local/plugins
2013-04-25 17:58:09,560 INFO  plugin.PluginRepository - Plugin Auto-activation mode: [true]
2013-04-25 17:58:09,560 INFO  plugin.PluginRepository - Registered Plugins:
2013-04-25 17:58:09,560 INFO  plugin.PluginRepository -         the nutch core extension points (nutch-extensionpoints)
2013-04-25 17:58:09,560 INFO  plugin.PluginRepository -         Regex URL Normalizer (urlnormalizer-regex)
2013-04-25 17:58:09,560 INFO  plugin.PluginRepository -         CyberNeko HTML Parser (lib-nekohtml)
2013-04-25 17:58:09,560 INFO  plugin.PluginRepository -         OPIC Scoring Plug-in (scoring-opic)
2013-04-25 17:58:09,560 INFO  plugin.PluginRepository -         Basic URL Normalizer (urlnormalizer-basic)
2013-04-25 17:58:09,560 INFO  plugin.PluginRepository -         Tika Parser Plug-in (parse-tika)
2013-04-25 17:58:09,560 INFO  plugin.PluginRepository -         Html Parse Plug-in (parse-html)
2013-04-25 17:58:09,560 INFO  plugin.PluginRepository -         Basic Indexing Filter (index-basic)
2013-04-25 17:58:09,560 INFO  plugin.PluginRepository -         Anchor Indexing Filter (index-anchor)
2013-04-25 17:58:09,560 INFO  plugin.PluginRepository -         HTTP Framework (lib-http)
2013-04-25 17:58:09,561 INFO  plugin.PluginRepository -         Regex URL Filter (urlfilter-regex)
2013-04-25 17:58:09,561 INFO  plugin.PluginRepository -         Regex URL Filter Framework (lib-regex-filter)
2013-04-25 17:58:09,561 INFO  plugin.PluginRepository -         Pass-through URL Normalizer (urlnormalizer-pass)
2013-04-25 17:58:09,561 INFO  plugin.PluginRepository -         Http Protocol Plug-in (protocol-http)
2013-04-25 17:58:09,561 INFO  plugin.PluginRepository - Registered Extension-Points:
2013-04-25 17:58:09,561 INFO  plugin.PluginRepository -         Nutch URL Normalizer (org.apache.nutch.net.URLNormalizer)
2013-04-25 17:58:09,561 INFO  plugin.PluginRepository -         Nutch Protocol (org.apache.nutch.protocol.Protocol)
2013-04-25 17:58:09,561 INFO  plugin.PluginRepository -         Parse Filter (org.apache.nutch.parse.ParseFilter)
2013-04-25 17:58:09,561 INFO  plugin.PluginRepository -         Nutch URL Filter (org.apache.nutch.net.URLFilter)
2013-04-25 17:58:09,561 INFO  plugin.PluginRepository -         Nutch Indexing Filter (org.apache.nutch.indexer.IndexingFilter)
2013-04-25 17:58:09,561 INFO  plugin.PluginRepository -         Nutch Content Parser (org.apache.nutch.parse.Parser)
2013-04-25 17:58:09,561 INFO  plugin.PluginRepository -         Nutch Scoring (org.apache.nutch.scoring.ScoringFilter)
2013-04-25 17:58:09,582 INFO  crawl.FetchScheduleFactory - Using FetchSchedule impl: org.apache.nutch.crawl.DefaultFetchSchedule
2013-04-25 17:58:09,582 INFO  crawl.AbstractFetchSchedule - defaultInterval=2592000
2013-04-25 17:58:09,582 INFO  crawl.AbstractFetchSchedule - maxInterval=7776000
2013-04-25 17:58:11,046 INFO  regex.RegexURLNormalizer - can't find rules for scope 'generate_host_count', using default
2013-04-25 18:01:02,936 WARN  mapred.FileOutputCommitter - Output path is null in cleanup
2013-04-25 18:01:02,936 WARN  mapred.LocalJobRunner - job_local_0001
java.lang.ArrayIndexOutOfBoundsException
2013-04-25 18:01:03,412 ERROR crawl.GeneratorJob - GeneratorJob: java.lang.RuntimeException: job failed: name=generate: 1366905487-307733671, jobid=job_local_0001
        at org.apache.nutch.util.NutchJob.waitForCompletion(NutchJob.java:54) 
```

据我所知，我没有用完磁盘空间。/tmp 分区有 250G 可用空间，运行 cassandra 的分区有 2.5T 可用空间。有没有可能增加详细程度？另外，我想知道 ArrayOutOfBoundsException 并没有告诉它试图访问的边界，什么也没有。密钥空间网页已存在，我可以使用 cassandra-cli 访问它。这是 readdb -stats 的输出：

```
~/software/nutch_dmoz/local$ ./bin/nutch readdb -stats
WebTable statistics start
Statistics for WebTable: 
min score:  55.0
retry 0:    3576393
jobs:   {db_stats-job_local_0001={jobID=job_local_0001, jobName=db_stats, counters={File Input Format Counters ={BYTES_READ=0}, Map-Reduce Framework={MAP_OUTPUT_MATERIALIZED_BYTES=1609, MAP_INPUT_RECORDS=3576393, REDUCE_SHUFFLE_BYTES=0, SPILLED_RECORDS=858, MAP_OUTPUT_BYTES=189548829, COMMITTED_HEAP_BYTES=1521614848, CPU_MILLISECONDS=0, SPLIT_RAW_BYTES=1010, COMBINE_INPUT_RECORDS=14305902, REDUCE_INPUT_RECORDS=114, REDUCE_INPUT_GROUPS=114, COMBINE_OUTPUT_RECORDS=444, PHYSICAL_MEMORY_BYTES=0, REDUCE_OUTPUT_RECORDS=114, VIRTUAL_MEMORY_BYTES=0, MAP_OUTPUT_RECORDS=14305572}, FileSystemCounters={FILE_BYTES_READ=910481, FILE_BYTES_WRITTEN=1028473}, File Output Format Counters ={BYTES_WRITTEN=2421}}}}
max score:  1.0
TOTAL urls: 3576393
status 0 (null):    3576393
avg score:  1.0
WebTable statistics: done
min score:  55.0
retry 0:    3576393
jobs:   {db_stats-job_local_0001={jobID=job_local_0001, jobName=db_stats, counters={File Input Format Counters ={BYTES_READ=0}, Map-Reduce Framework={MAP_OUTPUT_MATERIALIZED_BYTES=1609, MAP_INPUT_RECORDS=3576393, REDUCE_SHUFFLE_BYTES=0, SPILLED_RECORDS=858, MAP_OUTPUT_BYTES=189548829, COMMITTED_HEAP_BYTES=1521614848, CPU_MILLISECONDS=0, SPLIT_RAW_BYTES=1010, COMBINE_INPUT_RECORDS=14305902, REDUCE_INPUT_RECORDS=114, REDUCE_INPUT_GROUPS=114, COMBINE_OUTPUT_RECORDS=444, PHYSICAL_MEMORY_BYTES=0, REDUCE_OUTPUT_RECORDS=114, VIRTUAL_MEMORY_BYTES=0, MAP_OUTPUT_RECORDS=14305572}, FileSystemCounters={FILE_BYTES_READ=910481, FILE_BYTES_WRITTEN=1028473}, File Output Format Counters ={BYTES_WRITTEN=2421}}}}
max score:  1.0
TOTAL urls: 3576393
status 0 (null):    3576393
avg score:  1.0 
```

# wordpress - 总缓存插件对我的 wp-content 文件夹的写入权限？

> ID：16219703
> 
> 赞同：1
> 
> 时间：2013-04-25T16:08:51.767
> 
> 标签：wordpress

这是我第一次使用 wordpress，我对这个要求有点困惑。插件的一个奇怪的要求确实要求我：

> 无法自动创建文件和目录来完成安装。请在下方输入 FTP 详细信息以完成设置。也试试 chmod 777 /var/www/my-project/wp-content

好吧，我不确定将权限 777 授予我的 wp-content 文件夹是否安全。真的需要吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-25T16:10:56.013

不用担心 ！！！！它不是永久询问。您必须在安装时授予此权限，因为它必须在您的 wp-content 中写入内容。安装后它会告诉您将其恢复为默认的 755。可能按摩师会看起来像在你的情况下。

```
/var/www/my-project/wp-content is write-able. When finished installing the plugin, change the permissions back to the default: chmod 755 /var/www/my-project/wp-content. Permissions are currently 777 
```

于是开始安装。而且要快乐 ：-）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-25T16:11:25.783

我的想法是在安装时在 wp-content 目录上设置 777 权限，然后恢复权限。

# wix - 我可以使用 WixBundleDirectoryLayout 或 /layout 示例片段吗？

> ID：16219706
> 
> 赞同：1
> 
> 时间：2013-04-25T16:08:59.603
> 
> 标签：wix, burn

有一个 Burn 内置变量 - WixBundleDirectoryLayout。如何为该变量赋值以更改捆绑包提取到的位置？

我也试过跑步...

setup.exe /布局 c:\temp

...从命令行，它只是将 setup.exe 文件复制到 c:\temp，而不是实际提取捆绑内容。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-25T17:10:06.413

该`/layout`开关不会提取 Bundle 的内容。它下载所有内容并创建一个映像，然后您可以将其刻录到 DVD 或放在网络共享或其他任何地方。这样 Bundle 以后就不会去下载内容了。如果您没有未压缩的包，则`/layout`交换机最终会将 Bundle 可执行文件复制到您指定的位置（如果您没有指定其他文件夹，则为无操作）。

# performance - 矢量化操作的速度取决于 data.frame 的列数

> ID：16219708
> 
> 赞同：4
> 
> 时间：2013-04-25T16:09:03.010
> 
> 标签：performance, r, dataframe, vectorization

为什么对具有相同数量元素但在矢量化操作中排列在更多列中的 data.frame 进行比较需要更长的时间？举这个简单的例子，我们从每个元素中减去 0.5，然后比较它是否 < 0（[与这个问题有关](https://stackoverflow.com/q/16218586/1478381)）：

```
f.df <- function( df , x = 0.5 ){
  df <- df - x
  df[ df < 0 ] <- 0
  return( df )
}

df1 <- data.frame( matrix( runif(1e5) , nrow = 1e2 ) )
df2 <- data.frame( matrix( runif(1e5) , nrow = 1e3 ) )
df3 <- data.frame( matrix( runif(1e5) , nrow = 1e4 ) )

require( microbenchmark )
microbenchmark( f.df( df1 ) , f.df( df2 ) , f.df( df3 ) , times = 10L )

#Unit: milliseconds
#     expr        min         lq     median         uq        max neval
# f.df(df1) 1562.66827 1568.21097 1595.07005 1674.91726 1680.90092    10
# f.df(df2)   95.77452   98.12557  101.31215  190.46906  198.23927    10
# f.df(df3)   16.25295   16.42373   16.74989   17.95621   18.69218    10 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-26T04:05:35.840

一些分析表明，您的大部分时间都花在`[<-.data.frame`.

因此，缩放问题来自如何`Ops.data.frame`和`[<-.dataframe`工作以及如何 `[<-.data.frame`复制，以及`[[<-`命名列表的复制。

中的相关代码 `Ops.data.frame`（带有我的评论）

```
 # cn is the names of your data.frame 
 for (j in seq_along(cn)) {
         left <- if (!lscalar) 
             e1[[j]]
         else e1
         right <- if (!rscalar) 
             e2[[j]]
         else e2
         value[[j]] <- eval(f)
     }
    # sometimes return a data.frame
     if (.Generic %in% c("+", "-", "*", "/", "%%", "%/%")) {
         names(value) <- cn
         data.frame(value, row.names = rn, check.names = FALSE, 
             check.rows = FALSE)
     } # sometimes return a matrix
     else matrix(unlist(value, recursive = FALSE, use.names = FALSE), 
         nrow = nr, dimnames = list(rn, cn)) 
```

当您使用`Ops.data.frame`它时，它将在 for 循环中循环使用您的列，`[[<-`每次都使用替换。这意味着随着列数的增加，所需的时间将会增加（因为它是一个 data.frame 被命名为 list 会有一些保护性的内部复制） - 因此它将随着列数线性缩放

```
# for example  only this part will scale with the number of columns
f.df.1 <- function( df , x = 0.5 ){
     df <- df - x

     return( df )
 }
microbenchmark(f.df.1(df1),f.df.1(df2),f.df.1(df3), times = 10L)
# Unit: milliseconds
#        expr       min        lq   median         uq        max neval
# f.df.1(df1) 96.739646 97.143298 98.36253 172.937100 175.539239    10
# f.df.1(df2) 11.697373 11.955173 12.12206  12.304543 281.055865    10
# f.df.1(df3)  3.114089  3.149682  3.41174   3.575835   3.640467    10 
```

`[<-.data.frame`当`i`是一个相同维度的逻辑矩阵`x`

```
 if(is.logical(i) && is.matrix(i) && all(dim(i) == dim(x))) {
            nreplace <- sum(i, na.rm=TRUE)
            if(!nreplace) return(x) # nothing to replace
            ## allow replication of length(value) > 1 in 1.8.0
            N <- length(value)
            if(N > 1L && N < nreplace && (nreplace %% N) == 0L)
                value <- rep(value, length.out = nreplace)
            if(N > 1L && (length(value) != nreplace))
                stop("'value' is the wrong length")
            n <- 0L
            nv <- nrow(x)
            for(v in seq_len(dim(i)[2L])) {
                thisvar <- i[, v, drop = TRUE]
                nv <- sum(thisvar, na.rm = TRUE)
                if(nv) {
                    if(is.matrix(x[[v]]))
                        x[[v]][thisvar, ] <- if(N > 1L) value[n+seq_len(nv)] else value
                    else
                        x[[v]][thisvar] <- if(N > 1L) value[n+seq_len(nv)] else value
                }
                n <- n+nv
            }
            return(x)

f.df.2 <- function( df , x = 0.5 ){
     df[df < 0 ] <- 0

     return( df )
 }
 microbenchmark(f.df.2(df1), f.df.2(df2), f.df.2(df3), times = 10L)
# Unit: milliseconds
#        expr       min        lq    median        uq       max neval
# f.df.2(df1) 20.500873 20.575801 20.699469 20.993723 84.825607    10
# f.df.2(df2)  3.143228  3.149111  3.173265  3.353779  3.409068    10
# f.df.2(df3)  1.581727  1.634463  1.707337  1.876240  1.887746    10 
```

* * *

`[<-`data.frame （和`<-`）也将复制

* * *

怎么提高。您可以使用`lapply`或`set`从`data.table`包中

```
library(data.table)
sdf <- function(df, x = 0.5){
   # explicit copy so there are no changes to original
   dd <- copy(df)
  for(j in names(df)){
    set(dd, j= j, value = dd[[j]] - 0.5)
    # this is slow when (necessarily) done repeatedly perhaps this 
    # could come out of the loop and into a `lapply` or `vapply` statment
    whi <- which(dd[[j]] < 0 )
    if(length(whi)){
     set(dd, j= j, i = whi, value = 0.0)
    }
  }
  return(dd)
}

 microbenchmark(sdf(df1), sdf(df2), sdf(df3), times = 10L)
# Unit: milliseconds
# expr       min        lq    median        uq        max neval
# sdf(df1) 87.471560 88.323686 89.880685 92.659141 153.218536    10
# sdf(df2)  6.235951  6.531192  6.630981  6.786801   7.230825    10
# sdf(df3)  2.631641  2.729612  2.775762  2.884807   2.970556    10

# a base R approach using lapply
ldf <- function(df, x = 0.5){

  as.data.frame(lapply(df, function(xx,x){ xxx <- xx-x;replace(xxx, xxx<0,0)}, x=x))

}

# pretty good. Does well with large data.frames
microbenchmark(ldf(df1), ldf(df2), ldf(df3), times = 10L)
# Unit: milliseconds
# expr       min        lq    median         uq        max neval
# ldf(df1) 84.380144 84.659572 85.987488 159.928249 161.720599    10
# ldf(df2) 11.507918 11.793418 11.948194  12.175975  86.186517    10
# ldf(df3)  4.237206  4.368717  4.449018   4.627336   5.081222    10

# they all produce the same
dd <- sdf(df1)
ddf1 <- f.df(df1)
ldf1 <- ldf(df1)
identical(dd,ddf1)
## [1] TRUE
identical(ddf1, ldf1)
## [1] TRUE

# sdf and ldf comparable with lots of columns
# see benchmarking below.
microbenchmark(sdf(df1), ldf(df1), f.df(df1),  times = 10L)
# Unit: milliseconds
# expr        min         lq     median         uq       max neval
# sdf(df1)   85.75355   86.47659   86.76647   87.88829  172.0589    10
# ldf(df1)   84.73023   85.27622   85.61528  172.02897  356.4318    10
# f.df(df1) 3689.83135 3730.20084 3768.44067 3905.69565 3949.3532    10
# sdf ~ twice as fast with smaller data.frames
 microbenchmark(sdf(df2), ldf(df2), f.df(df2),  times = 10L)
# Unit: milliseconds
# expr       min         lq     median         uq        max neval
# sdf(df2)   6.46860   6.557955   6.603772   6.927785   7.019567    10
# ldf(df2)  12.26376  12.551905  12.576802  12.667775  12.982594    10
# f.df(df2) 268.42042 273.800762 278.435929 346.112355 503.551387    10
microbenchmark(sdf(df3), ldf(df3), f.df(df3),  times = 10L)
# Unit: milliseconds
# expr       min        lq    median        uq       max neval
# sdf(df3)  2.538830  2.911310  3.020998  3.120961 74.980466    10
# ldf(df3)  4.698771  5.202121  5.272721  5.407351  5.424124    10
# f.df(df3) 17.819254 18.039089 18.158069 19.692038 90.620645    10

# copying of larger objects is slower, repeated calls to which are slow.

microbenchmark(copy(df1), copy(df2), copy(df3), times = 10L)
# Unit: microseconds
# expr     min      lq   median      uq     max neval
# copy(df1) 369.926 407.218 480.5710 527.229 618.698    10
# copy(df2) 165.402 224.626 279.5445 296.215 519.773    10
# copy(df3) 150.148 180.625 214.9140 276.035 467.972    10 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-04-26T02:38:49.170

data.frames 是列表：每一列可以保存不同类的数据。正如您想象的那样，当您运行代码时，R 必须分别处理每一列。结果，“矢量化”仅在列基础上发生。对于 data.frame 中相同数量的元素，您拥有的列越多，处理它们所需的时间就越长。

这与只保存一类数据的矩阵（更普遍地是数组）不同，因此向量化可以自始至终发生。这里，对于相同数量的元素，无论列数如何，计算时间都是相同的。如你看到的：

```
df1 <- matrix( runif(1e5) , nrow = 1e2 ) 
df2 <- matrix( runif(1e5) , nrow = 1e3 ) 
df3 <- matrix( runif(1e5) , nrow = 1e4 ) 

require( microbenchmark )
microbenchmark( f.df( df1 ) , f.df( df2 ) , f.df( df3 ) , times = 10L )

# Unit: milliseconds
#       expr      min       lq   median       uq      max neval
#  f.df(df1) 4.837330 5.218258 5.350093 5.587897 7.081086    10
#  f.df(df2) 5.158825 5.313685 5.510549 5.731780 5.880861    10
#  f.df(df3) 5.237361 5.344613 5.399209 5.481276 5.940132    10 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-25T16:33:11.600

当与`df1`to比较`df2`时`df3`：通过更改行数但保持元素总数不变，因此您正在更改列数。

a 中的每一列`data.frame`都是一个列表。您的示例中的每个 data.frame 都有一个数量级的列，因此也有更多的操作，因此也有更多的时间。

# android - 多 TCP 套接字连接在 4.0.4 Android 上不起作用

> ID：16219710
> 
> 赞同：-1
> 
> 时间：2013-04-25T16:09:11.737
> 
> 标签：android, sockets, tcp

我正在处理一次需要两个或多个套接字连接的项目。我注意到，在 android 4.x 之前，我的应用程序正常工作，而在 android 4.0.4 上，它在第二次连接时什么也不做。我做了一个简单的项目来确保它是这样的，在早期版本中，两个连接是好的，在 4.0.4 它什么都不做，没有错误，没有异常，没有日志消息....

如何在 android 4.0.4 中一次连接两个套接字

**我的测试服务器**

```
import java.io.BufferedReader;
import java.io.IOException;
import java.io.InputStreamReader;
import java.net.ServerSocket;

public class Main {

public static void main(String[] args) throws IOException {
    ServerSocket socket1 = new ServerSocket(9045);
    ServerSocket socket2 = new ServerSocket(9046);

    BufferedReader br = new BufferedReader(new InputStreamReader(System.in));

    Listener th1 = new Listener(socket1, "||");
    Listener th2 = new Listener(socket2, "==");

    System.out.println("Starting....");

    new Thread(th1).start();
    new Thread(th2).start();
    while (true){
        if (br.readLine().endsWith("exit"))
            break;
    }
    th1.stop();
    th2.stop();

    socket1.close();
    socket2.close();
}

}

class Listener implements Runnable{

int i = 1;
boolean isRunning = true;
ServerSocket socket;
String tag;

public Listener(ServerSocket socket1, String tag) {
    socket = socket1;
    this.tag = tag;
}

@Override
public void run() {
    System.out.println(tag + " started");
    while (isRunning){
        try {
            socket.accept();
            System.out.println(tag + " accepted " + i++);
        } catch (IOException e) {
            e.printStackTrace();
        }
    }
}

public void stop() {
    isRunning = false;
}

} 
```

**安卓项目**

activity_main.xml

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
        xmlns:tools="http://schemas.android.com/tools"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:paddingBottom="@dimen/activity_vertical_margin"
        android:paddingLeft="@dimen/activity_horizontal_margin"
        android:paddingRight="@dimen/activity_horizontal_margin"
        android:paddingTop="@dimen/activity_vertical_margin"
        tools:context=".MainActivity" >

        <TextView
            android:id="@+id/textView1"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="@string/hello_world" />

        <Button
            android:id="@+id/button1"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentRight="true"
            android:layout_below="@+id/textView1"
            android:text="Start 1"
            android:onClick="clickStart1" />

        <Button
            android:id="@+id/button2"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignRight="@+id/button1"
            android:layout_below="@+id/button1"
            android:text="Start 2"
            android:onClick="clickStart2" />

    </RelativeLayout> 
```

MainActivity.java

```
package com.example.twosocketsapk;

    import com.example.twosocketsapk.SocketClientTask.SocketListener;

    import android.app.Activity;
    import android.os.AsyncTask;
    import android.os.Bundle;
    import android.view.View;

    public class MainActivity extends Activity implements SocketListener{

        SocketClientTask task1;
        SocketClientTask task2;

        @Override
        protected void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);
            setContentView(R.layout.activity_main);

            task1 = new SocketClientTask(this, "192.168.0.21", 9045);
            task2 = new SocketClientTask(this, "192.168.0.21", 9046);

        }

        public void clickStart1(View v) {
            if (task1.getStatus() != AsyncTask.Status.RUNNING)
                task1.execute();
        }

        public void clickStart2(View v) {
            if (task2.getStatus() != AsyncTask.Status.RUNNING)
                task2.execute();
        }

        @Override
        public void onConnect(String message) {

        }

        @Override
        public void onGetMessage(String message) {

        }

    } 
```

SocketClientTask.java

```
package com.example.twosocketsapk;

    import java.io.BufferedReader;
    import java.io.IOException;
    import java.io.InputStreamReader;
    import java.io.PrintWriter;
    import java.net.Socket;
    import java.net.UnknownHostException;

    import android.os.AsyncTask;
    import android.util.Log;

    public class SocketClientTask extends AsyncTask<String, String, String> {
        private static final String TAG = SocketClientTask.class.getSimpleName();
        private SocketListener messageHandler;

        private Socket socket = null;
        private PrintWriter socketOut = null;
        private BufferedReader socketIn = null;

        private Boolean isConnected = false;

        String  ip;
        int     port;

        private boolean isRunning = true;

        public SocketClientTask(SocketListener messageHandler, String ip, int port) {
            this.messageHandler = messageHandler;
            this.ip = ip;
            this.port = port;
        }

        public Boolean isConnected() {
            return isConnected;
        }

        public void runReading() throws UnknownHostException, IOException{
            socket = new Socket(ip, port);
            socketOut = new PrintWriter(socket.getOutputStream(), true);
            socketIn = new BufferedReader(new InputStreamReader(socket.getInputStream()));
            isConnected = true;
            while (isRunning) {
                publishProgress(socketIn.readLine());
            }
            socketOut.close();
            socketIn.close();
            socket.close();
        }

        public boolean sendMessage(String line) {
            if (socketOut != null && !socketOut.checkError()) {
                socketOut.println(line);
                socketOut.flush();
                return true;
            } else {
                Log.w(TAG, "message: " + line + "; wasn't sent");
                return false;
            }
        }

        @Override
        protected String doInBackground(String... params) {
            try {
                runReading();
            } catch (UnknownHostException e) {
                isConnected = false;
                Log.e(TAG, "Socket Client ERROR", e);
            } catch (IOException e) {
                isConnected = false;
                Log.e(TAG, "Socket Client ERROR", e);
            }
            return null;
        }

        @Override
        protected void onProgressUpdate(String... values) {
            super.onProgressUpdate(values);
            messageHandler.onGetMessage(values[0]);
        }

        public void stop() {
            isRunning = false;
        }

        // --

        public interface SocketListener {
            void onConnect(String message);
            void onGetMessage(String message);
        }

    } 
```

AndroidManifest.xml

```
<?xml version="1.0" encoding="utf-8"?>
    <manifest xmlns:android="http://schemas.android.com/apk/res/android"
        package="com.example.twosocketsapk"
        android:versionCode="1"
        android:versionName="1.0" >

        <uses-sdk
            android:minSdkVersion="8"
            android:targetSdkVersion="17" />
        <uses-permission android:name="android.permission.INTERNET"/>

        <application
            android:allowBackup="true"
            android:icon="@drawable/ic_launcher"
            android:label="@string/app_name"
            android:theme="@style/AppTheme" >
            <activity
                android:name="com.example.twosocketsapk.MainActivity"
                android:label="@string/app_name" >
                <intent-filter>
                    <action android:name="android.intent.action.MAIN" />

                    <category android:name="android.intent.category.LAUNCHER" />
                </intent-filter>
            </activity>
        </application>

    </manifest> 
```

PS对不起我的英语，这不是我的母语

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-26T10:02:02.020

如果确实没有例外，您正在阅读线路，但您没有发送线路。

readLine() 可以返回 null，您不检查它。

# c++ - constexpr 函数的未定义符号

> ID：16219711
> 
> 赞同：17
> 
> 时间：2013-04-25T16:09:14.490
> 
> 标签：c++, c++11, linker-errors, constexpr

当我尝试编译以下代码时，出现链接器错误：`Undefined symbols for architecture x86_64: "Foo()", referenced from: _main in main.o`使用 LLVM 4.2。

此行为仅在函数被标记时发生`constexpr`。当函数被标记时，程序编译和链接正确`const`。为什么声明函数`constexpr`会导致链接器错误？

（我意识到以这种方式编写函数并没有带来编译时计算的好处；此时我很好奇为什么函数无法链接。）

**主文件**

```
#include <iostream>
#include "test.hpp"

int main()
{
    int bar = Foo();
    std::cout << bar << std::endl;

    return 0;
} 
```

**测试.hpp**

```
constexpr int Foo(); 
```

**测试.cpp**

```
#include "test.hpp"

constexpr int Foo()
{
    return 42;
} 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-04-25T16:12:21.663

> 为什么声明函数`constexpr`会导致链接器错误？

那是因为`constexpr`函数是隐式的`inline`。根据 C++11 标准的第 7.1.5/2 段：

> `constexpr`在非构造函数的函数声明中使用的说明符将该函数声明为函数`constexpr`。类似地，`constexpr`构造函数声明中使用的说明符将该构造函数声明为`constexpr`构造函数。**`constexpr`函数和`constexpr`构造函数是隐式的 `inline`（7.1.2）。**

根据第 7.1.2/4 段，然后：

> 内联函数应在使用它的每个翻译单元中定义，并且在每种情况下都应具有完全相同的定义（3.2）。[...]

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-04-25T16:26:22.713

函数的主体`constexpr`必须在使用它的每个点都可见。在您的情况下，您必须将`move Foo()`代码转换为`test.hpp`.

例如，考虑以下代码`main.cpp`：

```
constexpr int Foo(); 

int main() {
  static_assert(Foo() == 42, "Ops");
} 
```

其中在`Foo()`中定义`test.cpp`。如果编译器看不到返回，则应该如何`static_assert`在处理时检查条件。这不可能。函数的全部意义在于编译器可以在编译时“调用”它们，为此它必须查看代码。`main.cpp``Foo()``42``constexpr`

因此，这编译得很好：

```
constexpr int Foo() { return 42; }

int main() {
  static_assert(Foo() == 42, "Ops");
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-25T16:24:14.337

It's an interesting question. As Andy Prowl, `constexpr` makes the function `inline`, which means that there must be a definition of it in every translation unit which uses it; I would have expected an error from the compiler. (Actually, if I read §3.2/5 correctly, a diagnostic is required if you use the function and there is no definition.)

As to why `const` has different behavior: you can't mark a non-menber function `const`. If you write `const int Foo();`, it is not the function which is `const`, but the type it returns (except that if the return type is not a class type, cv-qualifiers are ignored, so this is really the same as `int Foo();`).

# 64-bit - 在 windows xp 64 位机器上安装使用 Inno 生成的 .exe 文件时出现问题

> ID：16219713
> 
> 赞同：1
> 
> 时间：2013-04-25T16:09:29.730
> 
> 标签：64-bit, inno-setup

我使用 Inno 5.5.3 为 64 位机器生成了一个安装程序（.exe）。当我尝试在我的 Windows XP 64 位机器上运行 .exe 文件时，我收到以下错误消息

**“此程序不支持您的计算机运行的 Windows 版本。”**

但是，当我在我的 Windows 7 64 位机器上运行相同的 .exe 时，它​​运行良好并安装了应用程序。[我在这里](https://stackoverflow.com/questions/14817932/getting-error-in-installing-setup-with-inno-setup-with-windows-xp-version)看到了类似的帖子，但没有得到答复，我无法回复该问题（< 50 声望）。请指导我哪里出错了。如果您需要更多说明，请告诉我。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-26T13:57:10.390

安装可以以两种模式之一运行：32 位或 64 位。

如果用户正在运行 64 位版本的 Windows，并且系统的处理器架构包含在**ArchitecturesInstallIn64BitMode** [Setup] 部分指令的值中，则选择 64 位模式。否则，使用 32 位模式。

还有 [Setup] 指令**ArchitecturesAllowed**

有效值：以下一项或多项，以空格分隔： *x86 x64 ia64*

它指定允许在哪个处理器架构上运行安装程序。如果此指令未指定或为空，则允许安装程序在所有能够执行其 32 位代码（包括它无法识别的代码）的处理器架构上运行。否则，如果用户的处理器架构不是该指令中指定的架构之一，安装程序将显示错误消息并退出。

一切都基于您的脚本（可能还有其他一些指令），所以请与我们分享您的脚本（至少 [Setup] 部分），以便我们检查它的有效性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-26T08:57:55.243

Inno Setup 不会生成 64 位可执行文件。如果是 64 位操作系统，则需要确保目标机器安装并启用了 32 位 WoW 子系统。

# android - Android从数据库错误中选择一行

> ID：16219715
> 
> 赞同：0
> 
> 时间：2013-04-25T16:09:31.463
> 
> 标签：android

我是 Android 新手，并试图从这样的数据库中选择一行：

```
public Cursor getEntry(int id){
    SQLiteDatabase db = this.getReadableDatabase();

    Cursor entry = db.query(TABLE_NAME, new String[]{
            "id", "title", "description", "image_path"
    }, "id" + "=?", new String[]{ String.valueOf(id) }, null, null, null, null);

    return entry;
} 
```

并尝试像这样输出它：

```
 DatabaseHelper db = new DatabaseHelper(this);
    TextView tv = new TextView(this);
    if (db.getEntry(1) != null){
        while (db.getEntry(1).moveToFirst()){
            tv.setText("" + db.getEntry(1).getString(1));
        }
    }
    setContentView(tv); 
```

和错误：

```
ERROR/AndroidRuntime(1850): FATAL EXCEPTION: main
    java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.untitled1/com.example.untitled1.DisplayMessageActivity}: android.database.CursorIndexOutOfBoundsException: Index -1 requested, with a size of 1
    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2180)
    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2230)
    at android.app.ActivityThread.access$600(ActivityThread.java:141)
    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1234)
    at android.os.Handler.dispatchMessage(Handler.java:99)
    at android.os.Looper.loop(Looper.java:137)
    at android.app.ActivityThread.main(ActivityThread.java:5039)
    at java.lang.reflect.Method.invokeNative(Native Method)
    at java.lang.reflect.Method.invoke(Method.java:511)
    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
    at dalvik.system.NativeStart.main(Native Method)
    Caused by: android.database.CursorIndexOutOfBoundsException: Index -1 requested, with a size of 1
    at android.database.AbstractCursor.checkPosition(AbstractCursor.java:424)
    at android.database.AbstractWindowedCursor.checkPosition(AbstractWindowedCursor.java:136)
    at android.database.AbstractWindowedCursor.getString(AbstractWindowedCursor.java:50)
    at com.example.untitled1.DisplayMessageActivity.onCreate(DisplayMessageActivity.java:28)
    at android.app.Activity.performCreate(Activity.java:5104)
    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1080)
    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2144)
    ... 11 more 
```

问题是什么？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T16:14:10.833

```
while (db.getEntry(1).moveToFirst()){
    tv.setText("" + db.getEntry(1).getString(1)); 
```

您正在执行两次查询，每次执行`db.getEntry(1)`. 所以第二次，你调用`getString(1)`了一个没有正确设置的不同的光标`moveToFirst()`。

只需调用一次，然后将生成的 Cursor 存储在局部变量中。另外，完成后不要忘记安全地关闭光标。

```
Cursor c = db.getEntry(1);
try {
    if (c.moveToFirst()) 
        tv.setText(c.getString(1));
} finally {
    c.close();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T16:16:42.857

你只需要查询一次，为什么要打`getEntry()`几次电话？并且`while(cursor.moveToFirst())`没有意义，如果`Cursor`有结果，这是一个无限循环。

```
Cursor cursor = getEntry(1);
try {
    if (cursor.moveToNext()){
       tv.setText(cursor.getString(1));
    }
} finally {
    cursor.close(); // Close the Cursor when you're finished with it, or use a Loader.
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-25T16:15:34.837

尝试这个

`moveToFirst()`db.getEntry(1) 调用两次将返回另一个游标，因此当您调用第一个游标并访问第二个游标时，它不会移动到 firstRow

```
Cursor cursor=db.getEntry(1);

if(cursor.moveToFirst())
{
 tv.setText("" + cursor.getString(1));
} 
```

注意：查询方法永远不会将 Cursor 返回为 Null。所以无需检查 Null。

# html - CSS 固定标题 - 放大时无法访问选项卡

> ID：16219717
> 
> 赞同：3
> 
> 时间：2013-04-25T16:09:34.897
> 
> 标签：html, css

我使用该`position`值`fixed`是为了让标题在用户向下滚动时保持原位。

![在此处输入图像描述](https://i.stack.imgur.com/oI6pM.jpg)

问题是，如果我放大我看不到或访问我的一些标签，例如：

![在此处输入图像描述](https://i.stack.imgur.com/GG11B.jpg)

有没有办法放大并仍然能够查看和访问我的标签？

**我的代码：**

[JSFIDDLE 代码](http://jsfiddle.net/rTmm7/)

**HTML：**

```
<div id="top">
    <header>
        <hgroup>
            <h1>LOGO</h1>
        </hgroup>
        <nav>
            <ul>
                <li class="tabs"><a href="#">First</a></li>
                <li class="tabs"><a href="#">Second</a></li>
                <li class="tabs"><a href="#">Third</a></li>
                <li class="tabs"><a href="#">Fourth</a></li>
            </ul>
       </nav>
    </header> 
```

**CSS：**

```
#top {
    background-color: #1b1b1b;
    box-shadow: 0px 0px 9px rgba(0,0,0,0.15);
    padding: 20px 100px;
    width: 100%;
    height: 70px;
    z-index: 99999;
    position: fixed;
    top: 0;
    left: 0;
}
header {
    position: relative;
    width: 440px;
    height: 70px;
    margin: 0 auto;
}
header hgroup {
    position: absolute;
    display: block;
    top: 5px;
    left: -50px;
}
header hgroup h1 {
    font-size: 50px;
    color: #fff;
    display: block;
    height: 100px;
    width: 610px;
}
nav {
    float: right;
}
nav ul li:hover > ul {
    display: block;
}
nav ul {
    margin-top: 10px;
    padding: 0 20px;  
    list-style: none;
    position: relative;
    display: inline-table;
    margin-right: -80px;
}
nav ul:after {
    content: ""; 
    clear: both; 
    display: block;
}
nav ul li {
    float: left;
}
nav ul li:hover {
    color: #fff;
}
.tabs:hover {
    border-bottom: 5px solid #fff;
}
nav ul li a:hover {
    color: #fff;
}
nav ul li a {
    display: block; 
    padding: 15px 15px;     
    font-family: 'PT Sans', sans-serif;
    color: #fff; 
    text-decoration: none;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-25T16:41:53.873

不要为您的 使用固定宽度，而是`header`使用`100%`：

```
#top {
    background-color: #1b1b1b;
    box-shadow: 0px 0px 9px rgba(0,0,0,0.15);

    width: 100%;
    height: 70px;
    z-index: 99999;
    position: fixed;
    top: 0;
    left: 0;
}
header {
    position: relative;
    width: 100%;
    height: 70px;
    margin: 0 auto;
} 
```

**[更新小提琴](http://jsfiddle.net/uu4kL/1/)**

# java - 如何使用apache poi在同一个文件中写入多张工作表

> ID：16219719
> 
> 赞同：0
> 
> 时间：2013-04-25T16:09:45.057
> 
> 标签：java, apache-poi

我有 2 个要写在同一个 excel 文件中的工作簿，以下是我的代码

```
public void csvWriteToFile(HSSFWorkbook workbook1,HSSFWorkbook workbook2,String fileName){
   try {
          FileOutputStream out = new FileOutputStream(new File(fileName));
      workbook1.write(out);
      workbook2.write(out);
      out.close();
      System.out.println("Excel written successfully..");            
         } catch (FileNotFoundException e) {
     e.printStackTrace();
     } catch (IOException e) {
       e.printStackTrace();
     }
    } 
```

这只会在 excel 文件中创建一张表..我在这里做错了什么..？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T16:23:11.673

您正在将两个文档的二进制代码连接到一个新文件中。相反，您应该使用 POI API 将第一个文档的表单复制到另一个文档，然后您可以以这种方式保存生成的文档。

# javascript - jquery在数组中存储按钮按下值以与正确答案进行比较

> ID：16219722
> 
> 赞同：0
> 
> 时间：2013-04-25T16:09:57.980
> 
> 标签：javascript, jquery, button, storage

参考[带有按钮值的编辑文本，然后存储在数组中以比较答案](https://stackoverflow.com/questions/16199081/editing-text-with-button-value-then-storing-in-array-to-compare-answers)

@user1333371 将我的小提琴更新为：http: [//jsfiddle.net/jKvvU/5/](http://jsfiddle.net/jKvvU/5/)它在更改右侧的空白方块以显示按下按钮的字母方面非常有效。

我无法正确获取这些值并存储这些值，然后将它们与正确答案进行比较。

我的数组看起来像这样

```
var letters = new Array();
            letters = [
                { seq:  1, correct: 'C', display:"C", response:" "},
                { seq:  2, correct: 'X',  display:"X", response:" "}

            ]; 
```

所以我正在考虑做类似的事情

```
 if (letters.response == letters.correct) 
```

但我不知道如何最初甚至存储数据......

如果所有答案都是正确的，那么会发生什么，所以所有两个都被正确按下，然后在点击进入屏幕时，div，无论显示什么你做对了，然后打印用户的答案。但如果只有一个不正确，那么屏幕也会打印出这些答案。

或者也许还有另一种方法可以在没有响应的情况下做到这一点：“”部分？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T18:02:30.073

I've update the Fiddle to reflect what you're trying to do. [http://jsfiddle.net/Udubg/4/](http://jsfiddle.net/Udubg/4/)

Once again this probably isn't the perfect solution, but it will give you an idea about how to structure what you're trying to make.

```
 $(document).ready(function() {

           var correct  = [ 'C', 'X' ]
           ,   response = [];

$(".btnControlLeft").on( "click", function() {

    var letterbox = 1;
    while (letterbox < 7 && $("#" + letterbox).html() != "&nbsp;") {
        letterbox++;
    }

    if (letterbox < 7) {

        console.log("update " + letterbox);

       var letter = $( this ).attr( "id" );

        $("#" + letterbox ).html( letter );

        response.push( letter );

    }

});

$( '.btnControlEnter' ).on( 'click', function( e ){

    e.preventDefault();

    $.each( correct, function( index , value ){ 

          if( value === response[ index ] ) {

              console.log( 'Correct!',  response[ index ]  );

            } else{

             console.log( 'Wrong', response[ index ] );

            }   
    });
});
}); 
```

# gql - GQL 中有 concat 函数吗？

> ID：16219727
> 
> 赞同：0
> 
> 时间：2013-04-25T16:10:17.650
> 
> 标签：gql

Google Query Language 中是否有 concat 函数？

给定表 X

```
FName   |LName
--------|------
Bob     |Smith
Larry   |Potts 
```

问询：

```
Select Concat(FName, LName) from X 
```

我想：

```
BobSmith
LarryPotts 
```

关于如何实现这一目标的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-13T15:14:50.820

之后手动连接它们：

```
query = GqlQuery(...)
for result in query:
    fullname = result.FName+result.LName
    # Do something with fullname 
```

# javascript - 如果我的班级以外的班级在场

> ID：16219730
> 
> 赞同：1
> 
> 时间：2013-04-25T16:10:34.627
> 
> 标签：javascript, jquery, css-selectors

我有一个看起来像这样的动态列表

```
<li>item 1</li>
<ii>item 2</li>
<ii class="route2">item 2</li>
<ii>item 3</li>
<ii>item 4</li> 
```

和两个按钮

```
<button>Route one</button>
<button>Route two</button> 
```

仅当所有列表项都具有 route2 类时，我才无法显示路由 2 按钮。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-25T16:13:03.917

一种可能的方式：

```
$("button:eq(1)").toggle( !$("li:not(.route2)").length ); 
```

**演示：http:** [//jsfiddle.net/CNP7Z/](http://jsfiddle.net/CNP7Z/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T16:12:32.010

这应该有效：

```
if ( $('li').not('.route2').length ){
    $('button').hide();
} 
```

# linux-kernel - 为什么当我有 .ko 文件可用时 modprobe 或 insmod 不能工作？

> ID：16219731
> 
> 赞同：1
> 
> 时间：2013-04-25T16:10:34.893
> 
> 标签：linux-kernel, debian, kernel-module

我下载了蝙蝠侠高级 MANET 的内核模块源代码，然后`make`在源代码目录中调用并让它完成它的工作。

完成后，batman- adv.ko`make`文件在位于 /home/batman-adv-2013.2.0 的文件夹中可用。当我`modprobe batman-adv`在目录中调用时，出现错误：

```
FATAL: Module batman_adv not found. 
```

当我打电话时`insmod batman-adv.ko`：

```
 insmod: error inserting '/home/batman-adv-2013.2.0/batman-adv.ko': -1 Unknown symbol in module 
```

我使用的操作系统是 Debian GNU/Linux 6.0.7 (squeeze)

我是否错过了我应该做的不同的事情，或者模块文件可能需要放在其他地方？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T21:01:41.857

“未知符号”通常意味着该模块依赖于另一个模块。您可以使用 验证哪个符号`dmesg`，它将告诉您遇到了哪些未知符号。通常，符号的前缀（例如 fat_xxxxx）暗示需要哪个内核模块。`modprobe`仅适用于 modules.dep 文件中列出的模块。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-26T11:01:34.640

添加到 Technologeeks 答案：

`modprobe`只会在标准路径中搜索模块`/lib/modules/$(uname -r)`。由于您的`.ko`文件不在该目录中，`modprobe`因此找不到它。

使用模块的正确方法是：

```
make install
depmod -a
modprobe batman-adv 
```

*   第一行应该将模块安装到所有其他工具都可以使用的正确位置。

*   第二行尝试找出使用模块所需的所有依赖项，并将该信息放入某个持久位置（`lib/modules/$(uname -r)/modules.dep`）

*   第三行使用依赖信息并加载所有依赖和你的模块。

# android - 刷新 ArrayAdapter onResume [notifyDataSetChanged() 不起作用]

> ID：16219732
> 
> 赞同：9
> 
> 时间：2013-04-25T16:10:35.447
> 
> 标签：android, refresh, fragment, android-arrayadapter

我正在使用片段创建一个联系人列表应用程序，其中一个片段是联系人列表中的姓名列表，另一个是其余详细信息。

这是显示名称列表的类

```
public class MyListFragment extends ListFragment {

private ContactStorage contactStorage = new ContactStorage();

public final static String TAG = "FRAGMENTS";
private MainActivity parent;
ArrayAdapter<String> adapter;

ArrayList<String> entries = new ArrayList<String>();

String array[];

public View onCreateView(LayoutInflater inflater, ViewGroup container,
        Bundle savedInstanceState) {

    View v = inflater.inflate(R.layout.list_layout, null);
    parent = (MainActivity) getActivity();
    entries = contactStorage.getContactListNames();

    adapter = new ArrayAdapter<String>(getActivity().getApplicationContext(), 
            android.R.layout.simple_list_item_1, entries);

    setListAdapter(adapter);
    Log.d(TAG, "Adapter created");
    array = contactStorage.getContactDetails();
    return v;

}

@Override
public void onResume() {

    super.onResume();
    entries = contactStorage.getContactListNames();
    adapter.notifyDataSetChanged();
    Log.d(TAG, "List Frag Resumed");

}
} 
```

我遇到的问题是 ArrayAdapter 不会在恢复时刷新。

当屏幕旋转时，它可以再次运行 onCreateView()，但我需要它来刷新 onResume。我查看了这个站点的加载，除了“使用 notifyDataSetChanged()”之外什么也没发现，这不起作用。

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2013-04-25T16:21:14.117

您遇到的问题是您正在覆盖条目引用并且它没有在适配器上更改。这是解决此问题的方法

```
@Override
public void onResume() {

    super.onResume();
    entries.clear();
    entries.addAll(contactStorage.getContactListNames());
    adapter.notifyDataSetChanged();
    Log.d(TAG, "List Frag Resumed");

} 
```

这是一个常见的错误，这是因为当您第一次创建一个列表（在内存中）并且您的`entries`字段指向该列表时，然后您告诉在`adapter`创建它时查看该内存位置，但是`onResume`您在内存（当您再次获得联系人列表名称时）并且您告诉条目指向内存中的新列表，您需要做的是用新列表中的条目替换原始列表中的条目，这样`adapter`仍然会引用相同的列表。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-12-09T19:22:08.560

**notifyDataSetChanged()**对您不起作用。原因

***您的适配器丢失了对您列表的引用。当您第一次初始化 Adapter 时，它会引用您的 arrayList 并传递给它的超类。但是，如果您重新初始化现有的arrayList，它会丢失引用，因此会丢失与适配器的通信通道:(。***

始终创建新列表并将其添加到适配器。这样做：

1.  在全局声明时初始化 arrayList。
2.  直接将 List 添加到适配器，而不检查 null 和空条件。直接将适配器设置到列表中（不检查任何条件）。Adapter 保证无论您在哪里更改 arrayList 的数据，它都会小心处理，但绝不会丢失引用。
3.  每次将数据添加到arrayList（如果您的数据是全新的，则在实际将数据添加到列表之前可以调用adapter.clear（）和arrayList.clear（））但不要设置适配器，即如果新数据是填充在 arrayList 中，而不仅仅是 adapter.notifyDataSetChanged()

***保持对文档的信任***

# r - R中公式参数的语法是什么？

> ID：16219740
> 
> 赞同：1
> 
> 时间：2013-04-25T16:11:09.780
> 
> 标签：r, formula

在 package`nnet`中，给出了以下示例：

```
# or
ird <- data.frame(rbind(iris3[,,1], iris3[,,2], iris3[,,3]),
        species = factor(c(rep("s",50), rep("c", 50), rep("v", 50))))
ir.nn2 <- nnet(species ~ ., data = ird, subset = samp, size = 2, rang = 0.1,
               decay = 5e-4, maxit = 200)
table(ird$species[-samp], predict(ir.nn2, ird[-samp,], type = "class")) 
```

我不明白这部分是如何工作的：`species ~ .`，我知道它是作为参数传递的某种公式，但我不知道在哪里可以搜索有关公式语法和`.`将代表什么的更多信息。

如果它是重复的，请关闭这个问题，我找不到相同的问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T16:40:39.253

`.`表示除结果（写在 的 RHS 上`~`）之外的所有特征/列。更多信息可以在这里找到`?formula`

基本上，对于`iris3`数据集，公式

```
species ~ . 
```

相当于

```
species ~ Sepal L. + Sepal W. + Petal L. + Petal W. 
```

# xml - XSLT - 如何修剪 xsl:value-of 表达式中的所有值

> ID：16219743
> 
> 赞同：2
> 
> 时间：2013-04-25T16:11:19.643
> 
> 标签：xml, xslt

我有许多*xsl:value-of*调用的 XSLT 代码。我需要修剪所有值中的空格。
每次调用都非常繁琐地编写 normalize-space() 。
我使用模板：

```
<xsl:template match="text()">
    <xsl:value-of select="normalize-space(.)"/>
</xsl:template> 
```

但它没有效果。
谢谢！
对不起我的英语不好。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T16:13:36.010

更新：我认为@Michael Kay 的答案很可能是您正在寻找的。

*   `strip-space elements="*"`仅删除带有空白文本的节点
*   如果您只想获取没有空格的值，则无需构建中间节点集。
*   `<xsl:if test=`如果您必须测试 ( ) 物品战利品并且希望避免`normalize-space`处于测试状态，那么使用下面的“中间节点集”解决方案可能只有一个理由。

**原答案如下**

```
 <xsl:strip-space elements="*" /> 
```

应该有帮助。（就在您的 xlst 的顶层。）

更新（下一次尝试；-））您可以使用 exsl:node-set 构建一个没有空格的中间节点集。

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
            xmlns:exsl="http://exslt.org/common"
            extension-element-prefixes="exsl">

    <xsl:output method="xml" indent="yes" omit-xml-declaration="yes"/>
    <xsl:strip-space elements="*" />

    <xsl:template match="/">
        <xsl:variable name="intermediate">
            <xsl:apply-templates mode="ws_remove"/>
        </xsl:variable>
        <xsl:apply-templates select="exsl:node-set($intermediate)/*"/>

    </xsl:template>

    <xsl:template match="@*|node()" mode="ws_remove">
        <xsl:copy>
            <xsl:apply-templates select="@*|node()" mode="ws_remove"/>
        </xsl:copy>

    </xsl:template>
        <xsl:template match="text()" mode="ws_remove" >
            <xsl:value-of select="normalize-space(.)"/>
        </xsl:template>

    <xsl:template match ="root">
        <test>
            <xsl:value-of select="test"/>
        </test>
    </xsl:template>
</xsl:stylesheet> 
```

有了这个输入

```
<root>
    <test> adfd   das    </test>
</root> 
```

生成此输出：

```
 <test>adfd das</test> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-25T18:03:46.690

将 normalize-space() 调用放在文本节点的模板规则中不起作用，因为 xsl:value-of 不应用模板规则。如果您更改`<xsl:value-of select="."/>`为`<xsl:apply-templates/>`（无处不在），那么它将起作用。

# rest - Intuit PARTY name must be unique error during UPDATE with NO name changes

> ID：16219745
> 
> 赞同：0
> 
> 时间：2013-04-25T16:11:24.983
> 
> 标签：rest, intuit-partner-platform

在不更改名称的情况下更新客户时遇到此错误。到目前为止完全没有看到任何解释。派对参考 ID 可能是问题所在？名字没问题，因为记录已经创建，只是发布更新。有人有想法吗？

请求正文：

```
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<Mod Draft="false" FullResponse="true" RequestId="2b32f09b926d47209aceffdc3d20eb9f" xmlns:ns2="http://www.intuit.com/sb/cdm/junk" xmlns="http://www.intuit.com/sb/cdm/v2" xmlns:ns3="http://platform.intuit.com/api/v1">
  <Customer>
    <Id idDomain="QB">11</Id>
    <SyncToken>1</SyncToken>
    <MetaData>
      <CreatedBy>app</CreatedBy>
      <CreateTime>2013-04-10T16:28:19Z</CreateTime>
      <LastModifiedBy>app</LastModifiedBy>
      <LastUpdatedTime>2013-04-10T17:57:50Z</LastUpdatedTime>
    </MetaData>
    <ExternalKey idDomain="QB">11</ExternalKey>
    <Synchronized>true</Synchronized>
    <PartyReferenceId idDomain="QB">11</PartyReferenceId>
    <TypeOf>Organization</TypeOf>
    <Name>Demo 001</Name>
    <Address>
      <Line1>123 Street</Line1>
      <Line2>Demo Bond</Line2>
      <City>San Francisco</City>
      <CountrySubDivisionCode>CA</CountrySubDivisionCode>
      <PostalCode>94108</PostalCode>
      <Tag>Billing</Tag>
    </Address>
    <Phone>
      <Id idDomain="QB">00000000000001Vj</Id>
      <DeviceType>LandLine</DeviceType>
      <FreeFormNumber>222-222-2222</FreeFormNumber>
      <Default>true</Default>
      <Tag>Business</Tag>
    </Phone>
    <Email>
      <Address>demo@test.test</Address>
      <Default>true</Default>
      <Tag>Business</Tag>
    </Email>
    <GivenName>Demo</GivenName>
    <FamilyName>Bond</FamilyName>
    <DBAName>Demo 001</DBAName>
    <Active>true</Active>
    <ShowAs>Demo 001</ShowAs>
    <SalesTermId idDomain="QB">6</SalesTermId>
    <SalesTermName>Net 30</SalesTermName>
    <OpenBalance>
      <CurrencyCode>USD</CurrencyCode>
      <Amount>43</Amount>
    </OpenBalance>
    <OpenBalanceDate>2013-04-10</OpenBalanceDate>
    <JobInfo>
      <Status>None</Status>
    </JobInfo>
  </Customer>
</Mod> 
```

回复：

```
HTTP/1.1 200 OK
Date: Wed, 24 Apr 2013 17:24:48 GMT
Server: Apache/2.2.22 (Unix)
Response-Routing-Time: 564
Content-Length: 367
Connection: close 
Content-Type: text/xml

<?xml version="1.0"?>
<RestResponse xmlns="http://www.intuit.com/sb/cdm/v2">
<Error RequestId="2b32f09b926d47209aceffdc3d20eb9f">
    <RequestName>ErrorRequest</RequestName>
    <ProcessedTime>2013-04-24T17:24:49.092Z</ProcessedTime>
    <ErrorCode>-3002</ErrorCode>
    <ErrorDesc>PARTY name must be unique ERI=629577300</ErrorDesc>
    <DBErrorCode>20377</DBErrorCode>
</Error>
</RestResponse> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-29T18:54:14.170

该错误意味着已经存在与您尝试在上述请求中添加的客户同名的客户、供应商或员工。

使用第一个 + 最后一个组合查询现有记录

问候，
杰瑞德

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-17T00:29:38.857

我们的团队在发出包含供应商名称的 AddVendor 请求时发现了这个问题，但我们的请求中的名称包含尾随空格。看来 Quickbooks 正在剥离尾随空间。去除尾随空格解决了这个问题。

# vb.net - 对 Excel 文件的数据库查询

> ID：16219750
> 
> 赞同：0
> 
> 时间：2013-04-25T16:11:42.933
> 
> 标签：vb.net, excel, ms-access-2007

我这里有一个代码`VB.NET`。该代码使程序能够查询`MS ACCESS database`并将其保存到`Excel File(.xls)`并提示用户是否要打开文件。代码运行良好，但打开文件时出现问题。这些列不会自动适应其内容，这使得文件如此混乱，我还想让用户可以选择打印文件。有什么办法可以解决我的问题吗？如果您有任何澄清，请随时询问。

```
If (Not Directory.Exists("C:\Sales Monitoring Report")) Then
   Directory.CreateDirectory("C:\Sales Monitoring Report")
End If
System.IO.File.Delete("C:\Sales Monitoring Report\Transaction.xls")
Dim createExcelFile = "SELECT ORNumber, UserID, TransactionID, Vatable, Tax, Amount, TransactionDate, Status INTO [Excel 12.0;HDR=YES;DATABASE=C:\Sales Monitoring Report\Transaction.xls].[Sheet1] FROM tbl_transaction"
ExecNonQuery(createExcelFile)

If MessageBox.Show("Do you want to open the file?", "Open File", MessageBoxButtons.YesNo) = Windows.Forms.DialogResult.Yes Then
    Dim excelFile As New Excel.Application
    Dim excelWorkBook As Excel.Workbook
    excelWorkBook = excelFile.Workbooks.Open("C:\Sales Monitoring Report\Transaction.xls")
    excelFile.Visible = True
    excelWorkBook.Activate()
 End If 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-27T18:07:08.933

EZ方式：

1.  使用列作为目标字段制作 .xls 文件，设置列宽和公式 ..
2.  使用上面的 .xls 作为您将在运行时复制的模板
3.  使用 .xls 的副本来存储 ACCESS DB 中的记录

像这样的东西：

'在按钮事件中..

```
Private Sub btnXLS_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles btnXLS.Click

    'copy .xls template to .xls target --> full path
    'consider TemplateA.xls as ".xls template" and sFN as ".xls target" (full path)

    Try
        My.Computer.FileSystem.CopyFile("TemplateA.xls", sFN, _
                            FileIO.UIOption.AllDialogs, FileIO.UICancelOption.DoNothing)
        Dim cnXLS As Data.OleDb.OleDbConnection
        Dim cnAccess As Data.OleDb.OleDbConnection
        Dim cmdXLS As New Data.OleDb.OleDbDataAdapter
        Dim cmdAccess As New Data.OleDb.OleDbDataAdapter
        Dim dsXls As New DataSet
        Dim dsAccess As New DataSet

        'opening cnAccess connection codes here .. dsAccess as source dataset .. and source table

        cmdAccess = New Data.OleDb.OleDbDataAdapter("SELECT * FROM .... , cnAccess)
        cmdXLS.Fill(dsXls, "xls")

        cnXLS = New System.Data.OleDb.OleDbConnection("provider=Microsoft.Jet.OLEDB.4.0;" & _
                "data source=" & sFN & ";Extended Properties=Excel 8.0;")
        cnXLS.Open()

        'Daftar --> as table name or sheet name in excel
        cmdXLS = New System.Data.OleDb.OleDbDataAdapter("select * from [Daftar$]", cnXLS)

        cmdXLS.Fill(dsXls, "xls")

        For n = 0 To dsAccess.table(source_table).Rows.Count - 1

            'some codes here

            cmdXLS.InsertCommand = New OleDb.OleDbCommand( .. ,cnXls)
            cmdXLS.InsertCommand.ExecuteNonQuery()
        Next
        cnXLS.Close()

        MsgBox("Transfer finished ! -- " & sFN, MsgBoxStyle.OkOnly, "Info")
        Exit Sub

    Catch ex As Exception
        MsgBox(ex.Message, MsgBoxStyle.OkOnly, "Error)
    End Try
End Sub 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T20:22:39.497

要在第一个工作表中自动调整列，请在工作簿激活后插入以下行：

```
excelWorkBook.Worksheets(1).Columns.AutoFit()
excelWorkBook.Worksheets(1).Rows.AutoFit() 
```

要打印活动工作簿，请使用 PrintOut 方法：

```
excelWorkBook.PrintOut() 
```

# php - Onclick, MySQL, PHP, 关于交换图像

> ID：16219751
> 
> 赞同：0
> 
> 时间：2013-04-25T16:11:51.033
> 
> 标签：php, javascript, mysql, onclick

我正在构建一个 SEO 脚本，现在将此事推迟了 2 周，但没有得到答复。我在这里看到了几十个答案，但没有一个令人满意（或者至少我没有发现它们有用）。

我有一个包含多个字段的 MySQL 表，数据库将关键字字段作为主要字段，其他字段是相关关键字的 SEO 变量。好的，没问题，我将 MySQL 的值放在表中，当 php 请求时，它们会被吐出到一个漂亮的表中……</p>

我在每一行的开头都有一个圆形按钮，指示关键字是容易优化、中等优化还是难以优化。分别是绿色按钮、橙色按钮和红色按钮。每行只有一个节目。

颜色由页面排名（表格中的一列，从 0-10（<2 - 绿色，2-4 橙色，超过 4 个红色））确定。

所以我的问题很简单……</p>

我想单击这些按钮、图像或您想要调用它们的名称并选择它们，它们将变为蓝色（用蓝色图像替换图像），然后它们可以包含在 .CSV 文件中以进行导出。

所以，我会向您展示我拥有的代码，但我已经更改了很多次，我认为它没有任何好处并且不重要，但我可以回答任何问题。

基本上它是在 ONCLICK 的基础上用 mysql 和 php 来回更改 2 个图像。

一半是葡萄牙语，所以我会翻译...

```
$query = "SELECT `CÔR`(COLOR), `keyword`, `Adds`, `PRMédio`, `PRDomínioMédio`, `Searches`, `CPC`, `.com`, `.org`, `.net`, `All in URL`, `All in Title`, `All in Desc.` FROM keywords";

if ($query_run = mysql_query($query)) {
    while ($query_row = mysql_fetch_assoc($query_run)) {
        (COLOR)$côr = $query_row['CÔR'];
            $keyword = $query_row['keyword'];
            $Adds = $query_row['Adds'];

            $PRMédio = $query_row['PRMédio'];
            $PRDomínioMédio = $query_row['PRDomínioMédio'];
            $Searches = $query_row['Searches'];
            $CPC = $query_row['CPC'];
            $com = $query_row['.com'];
            $org = $query_row['.org'];
            $net = $query_row['.net'];
            $All_in_URL = $query_row['All in URL'];
            $All_in_Title = $query_row['All in Title'];
            $All_in_Desc = $query_row['All in Desc.'];

            echo "
            <tr>

            <th>";
            if ($PRMédio < 2) {
                echo "(GREEN BUTTON)$botao_verde";
            } else if ((2 <= $PRMédio) && ($PRMédio < 4)) {
                echo "(ORANGE BUTTON)$botao_laranja";
            } else if (4 < $PRMédio) {
                echo "(RED BUTTON)$botao_vermelho";
            }

            // this is the part where i do not know what I'm doing

            echo "<form>
                <input type='submit' name='submit' class='image'
                value=(BUTTON)'botão' onClick='UPDATE keywords SET CÔR = ~CÔR'>";
            echo "</form>
            </th>
            <td>$keyword</td>
            <td>$Adds</td>
            <td> 
```

它继续与表的其余列...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T17:34:43.257

你可以试试这个-

[演示在这里](http://jsfiddle.net/Sann/pNVp3/)

```
function main() {
    "use strict";
    var toggles = document.querySelectorAll('img.toggle'), i;
    for (i=0; i < toggles.length; i++) {
        toggles[i].addEventListener('click', toggle);
    }
}
function toggle() {
    "use strict";
    this.src = (this.src == "blue.jpg") ? "red.jpg" ? "blue.jpg";
}
window.addEventListener('load', main); 
```

## 更新

您将服务器端代码与客户端代码混合在一起。这个 -

```
<input type='submit' name='submit' class='image' value=(BUTTON)'botão' 
onClick='UPDATE keywords SET CÔR = ~CÔR'> 
```

永远不会（**永远**）去上班。您不能从 JavaScript 执行数据库查询。您需要在服务器和客户端之间架起一座桥梁。简而言之，您需要[AJAX](https://en.wikipedia.org/wiki/Ajax_%28programming%29)，而[Mozilla Developers Network](https://developer.mozilla.org/en-US/docs/AJAX/Getting_Started)有一套很好的教程可以帮助您入门。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T17:07:55.817

这应该让您开始 - 您需要做的就是为您的行生成适当的 HTML，如下所示

### Javascript

```
var PathToImages = "/Images/";

// Let's store the initial colours in in array so we know what to toggle back to...
var Colors = ["Red", "Blue"];

// And set up somewhere to record which ones have been clicked...
var Toggled = [];

//Using jQuery this might look more elegant but I'll keep it simple

function Toggle(RowNumber) { //RowNumber is 0-indexed
    var NewImageSource;
    if(Toggled.indexOf(RowNumber) < 0) {
        //Toggle on
        Toggled.push(RowNumber);
        NewImageSource = PathToImages + "Blue.png";
    } else {
        //Toggle off
        Toggled.splice(Toggled.indexOf(RowNumber), 1); //Remove the Row number from the toggled array
        NewImageSource = PathToImages + Colors[RowNumber] + ".png";
    }
    document.getElementById("Image" + RowNumber).src = NewImageSource;
} 
```

### html

```
<img src="/Images/Red.png" id="Image0" onclick="toggle(0);"/>
<img src="/Images/Green.png" id="Image1" onclick="toggle(1);"/> 
```

# sql - MS Access SQL - 计算字段是否匹配两个条件之一

> ID：16219753
> 
> 赞同：1
> 
> 时间：2013-04-25T16:12:04.753
> 
> 标签：sql, ms-access, count, criteria

我有一个包含员工出勤详细信息的表格。对于此示例，我们假设只有三种不同的出勤类型：“假日”/“银行假日”/“病假”。

我可以毫无困难地找到每个员工的总数，但是我需要结合“假日”和“银行假日”的结果。

* * *

例如，如果表格包含以下数据：

约翰 - '假期'</p>

约翰 - '银行假期'</p>

约翰 - “疾病”</p>

珍妮——“假期”</p>

* * *

结果应该是

名称 - Days Sick - Days Holiday

约翰 – 1 – 2

珍妮 - 0 - 1

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T16:24:24.847

You can use `IIF` inside a SUM Statement to count certain conditions:

```
SELECT  [YourTable].[Name],
        SUM(IIF([YourTable].[Attendance] = 'Sickness', 1, 0)) AS [Days Sick],
        SUM(IIF([YourTable].[Attendance] IN ('Holiday' , 'Bank-Holiday'), 1, 0)) AS [Days Holiday]
FROM    [YourTable]
GROUP BY [YourTable].[Name]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T17:10:30.413

我的两分钱价值：

而不是将这种类型的分类硬编码到查询中，您*实际上*应该创建一个 [AbsenceCategories] 表，其值如下......

```
AbsenceType     AbsenceCategory
-----------     ---------------
Sickness        Sick
Holiday         Holiday
Bank-Holiday    Holiday 
```

...因此，当“最高管理层”向您发送备忘录，通知您必须单独跟踪“计划外缺勤”并将其归类为“假期”时，您只需将其添加到您的表中，您就不必更改所有查询等。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-25T16:25:20.210

You want a conditional aggregation, something like:

```
select name,
       sum(iif(which = 'Sickness', 1, 0)) as SickDays,
       sum(iif(which = 'Holiday' or which = 'Bank Holiday', 1, 0)) as Holiday
from t
group by name 
```

# firefox - 接收 org.openqa.selenium.WebDriverException：在 Selenium IDE 中使用 Webdriver 播放的 PATH 运行测试中找不到 firefox 二进制文件

> ID：16219754
> 
> 赞同：5
> 
> 时间：2013-04-25T16:12:05.133
> 
> 标签：firefox, selenium-webdriver, selenium-ide

当我尝试在 Selenium IDE 中使用 Webdriver 回放运行测试时，我不断收到以下错误。

```
Caused by: org.openqa.selenium.WebDriverException: Cannot find firefox binary in PATH. Make sure firefox is installed. OS appears to be: VISTA
Build info: version: ’2.32.0′, revision: ’6c40c18′, time: ’2013-04-09 17:22:56′
System info: os.name: ‘Windows 7′, os.arch: ‘amd64′, os.version: ’6.1′, java.version: ’1.6.0_39′
Driver info: driver.version: FirefoxDriver
at org.openqa.selenium.firefox.internal.Executable.(Executable.java:72)
at org.openqa.selenium.firefox.FirefoxBinary.(FirefoxBinary.java:59)
at org.openqa.selenium.firefox.FirefoxBinary.(FirefoxBinary.java:55)
at org.openqa.selenium.firefox.FirefoxDriver.getBinary(FirefoxDriver.java:175)
at org.openqa.selenium.firefox.FirefoxDriver.(FirefoxDriver.java:100)
… 14 more 
```

该错误提到在 PATH 中找不到 firefox 二进制文件。我更新了路径中的 Firefox 二进制文件，但仍然收到相同的错误消息。测试用例中使用的函数是一个自定义用例和 waitforelementpresent。

这是我在路径 C:\Program Files (x86)\Firefox ESR 17 中的变量值

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-07-30T17:58:24.677

我更新了环境变量路径，但它对我不起作用。不要在最后添加 firefox.exe 例如 E:\installed\Firefox Mozilla。并重新启动日食。它对我有用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-05-24T13:46:18.617

我也遇到了同样的问题。最后我通过在功能中设置二进制值来解决它，如下所示。在运行时它使用这个值，所以它必须设置。

```
DesiredCapabilities capability = DesiredCapabilities.firefox();
capability.setCapability("platform", Platform.ANY);
capability.setCapability("binary", "/ms/dist/fsf/PROJ/firefox/16.0.0/bin/firefox"); //for linux

//capability.setCapability("binary", "C:\\Program Files\\Mozilla  Firefox\\msfirefox.exe"); //for windows                
WebDriver    currentDriver = new RemoteWebDriver(new URL("http://localhost:4444/wd/hub"), capability); 
```

你完成了！快乐编码:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-25T16:25:17.277

Add the whole path including name of the exe file as shown below to the path.

```
C:\Program Files (x86)\Firefox ESR 17\firefox.exe 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-04-11T06:35:42.910

在 selenium 中，如果您使用的是 chrome 驱动程序，那么 org. 打开qa。硒。WebDriverException 主要显示 chrome 何时发布新的 chrome 驱动程序。所以尝试使用最新的chrome驱动，看看问题是否解决。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-11-26T11:11:18.070

我也有同样的问题，但不知何故我已经**解决了这个问题**，

1.  更新我的 JAR 文件： **selenium-java-2.43.0.jar**到**selenium-java-2.48.2.jar**和 **selenium-server-standalone-2.43.1.jar**到**selenium-server-standalone-2.48.2.jar**
2.  向 lib 添加了一个新的 JAR 文件 selenium-java-2.48.2-srcs.jar

这些更改使我的代码在我的情况下完美无缺

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-05-05T03:08:24.437

只需通过以下方式指定路径：

```
System.setProperty("webdriver.firefox.bin", "C:\\Program Files\\Mozilla Firefox\\firefox.exe"); 
```

这将解决问题。

# php - 使用 Imagick PHP 从 Amazon S3 读取经过身份验证的私有图像

> ID：16219758
> 
> 赞同：0
> 
> 时间：2013-04-25T16:12:18.170
> 
> 标签：php, amazon-s3, acl, imagick

我对 Amazon S3 和 Imagick PHP 库都很陌生，但到目前为止，我已经能够用它完成我想要的（即：上传文件和生成一系列缩略图）。目前，我正在确定 Imagick 是否可以从 S3 读取经过身份验证的图像。我希望能够这样做，以便读回原始图像进行编辑。

当我的文件的权限设置为被授权者时，以下内容有效：所有人（公共读取），但不是其他方式。（我已经为我的存储桶设置了总体策略，以限制对某些域的访问，包括我现在正在测试的本地主机）：

```
$sourcePath = "https://s3.amazonaws.com/myBucket/folder/exampleFile-9203914980.43.jpg";
$image = new Imagick($sourcePath); 
```

上面的代码执行失败。S3 或 Imagick 中是否有任何设置可以读取图像？在此先感谢您的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-06-28T12:37:04.323

我设法避免在使用 S3 Stream Wrapper 创建 Imagick 对象之前保存图像：

[https://docs.aws.amazon.com/sdk-for-php/v3/developer-guide/s3-stream-wrapper.html](https://docs.aws.amazon.com/sdk-for-php/v3/developer-guide/s3-stream-wrapper.html)

```
$client->registerStreamWrapper();
$data = file_get_contents('s3://bucket/key');
$im = new Imagick();
$im->readImageBlob($data); 
```

$client 与 Jeremy Lindblom 的答案中的 $s3 相同 - 您需要首先创建一个 S3 客户端，如图所示。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-29T17:40:26.703

您可能应该先在本地下载图像，然后再尝试在 Imagick 中使用它。您可以使用[适用于 PHP 的 AWS 开发工具包](https://github.com/aws/aws-sdk-php)通过如下代码执行此操作：

```
$s3 = Aws\S3\S3Client::factory(array(
    'key'    => '<your-aws-access-key-id>',
    'secret' => '<your-aws-secret-key>'
));

$bucket = 'myBucket';
$key = 'folder/exampleFile-9203914980.43.jpg';
$tempImage = '/tmp/' . $bucket . '/' . $key;

$s3->getObject(array(
    'Bucket' => $bucket,
    'Key'    => $key,
    'SaveAs' => $tempImage
));

$image = new Imagick($tempImage);

// do stuff
// ...

unlink($tempImage); 
```

[您可以在 SDK 的S3 用户指南中](http://docs.aws.amazon.com/aws-sdk-php-2/guide/latest/service-s3.html)了解有关如何使用 S3 客户端的更多信息。

# uml - 表示插入已创建的对象

> ID：16219762
> 
> 赞同：0
> 
> 时间：2013-04-25T16:12:25.203
> 
> 标签：uml, enterprise-architect, sequence-diagram

我正在从这样的代码建模序列图：

```
void MyObject::createADevice{
   Device* someDevice = new Device();
   devices[i] = someDevice;
   Screen* scr = new Screen();
   someDevice->addScreen(scr);
   ...
} 
```

这是我有疑问的代码。在调用`someDevice->addScreen()`. 我已经为 Device 和 Screen 对象创建了一个带有对象创建的自我消息。但我没有代表最后一行。我怎样才能做到这一点？

PS：我正在使用 Enterprise Architect

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T20:29:08.813

Device 和 Screen 对象需要它们自己的生命线。新操作员可以表示为设备和屏幕的消息。然后 addScreen 是给设备的消息。

# c++ - 奇怪的逗号运算符行为

> ID：16219767
> 
> 赞同：0
> 
> 时间：2013-04-25T16:12:43.287
> 
> 标签：c++, operators

```
void foo() {
   int a[5], c = 2;
   for (int i = 0; i < 5; i++)
      a[i] = 0;
   int res = (c--, a[c]++, c++) + (c++, a[c]--, c--);
   for (int i = 0; i < 5; i++)
      cout << i << ": " << a[i] << endl;
} 
```

上面的代码将打印：

```
0 : 0
1 : 1
2 : -1
3 : 0
4 : 0 
```

代替：

```
0 : 0
1 : 1
2 : 0
3 : -1
4 : 0 
```

之所以如此，是因为生成的代码中的操作顺序如下：

```
// first parentheses
c--;
a[c]++;
// second parentheses
c++;
a[c]--;
// and only then the last operation
res = c++ + c--; 
```

问题是：为什么操作没有按预期运行（即一个括号中的所有三个操作，然后另一个括号中的所有三个操作）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T16:19:28.197

序列点之间不保证操作顺序。序列点通常位于分号处。

不会`a[c-1]++;`比其他更好`(c--, a[c]++, c++)`吗？`c`当您不为其他计算保留该值时，为什么要向主 RAM 写入 4 次新值？

# c# - 修改 Response.Cookies 集合是否也会更改 .Net 中的 Request.Cookies？

> ID：16219775
> 
> 赞同：1
> 
> 时间：2013-04-25T16:13:01.767
> 
> 标签：c#, asp.net, .net, asp.net-mvc, cookies

只是想检查我所看到的，修改 Response.Cookies 集合也会更改 Request.Cookies？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-25T16:53:54.317

是的，它确实。尝试在代码隐藏中使用以下内容创建一个新页面：

```
protected void Page_Load(object sender, EventArgs e)
{
    if (Request.Cookies["newCookie"] == null)
    {
        Response.Cookies["newCookie"].Value = "Hello, world!";
        var myValue = Request.Cookies["newCookie"].Value;
    }
} 
```

清除 cookie 并在条件的右大括号上放置一个断点。您会看到它在第*一个*请求中`myValue`具有价值。`"Hello, world!"`

 ** * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T16:29:08.447

据我了解，没有。如果您更改响应 cookie，它不应更改请求 cookie，除非您专门将它们设置为彼此相等或类似的东西。*

# javascript - Javascript：为什么我们的网站在终端服务会话中非常慢？

> ID：16219776
> 
> 赞同：4
> 
> 时间：2013-04-25T16:13:02.790
> 
> 标签：javascript, internet-explorer-9, windows-server-2008-r2, doctype, terminal-services

我们创建了一个严重依赖 Javascript 并且拥有大量 DOM 元素的网站。

在所有浏览器中，即使是 IE7 和 IE8，都可以正常工作。在 IE9、Chrome 和 Firefox 中用户体验更快、响应更快，但即使是我们使用 IE7 的客户也不会抱怨。

但是...使用远程桌面的客户抱怨我们的网站太慢了，即使在 Windows 2008 Server（64 位）上使用 IE9 也是如此*。*一些通常只需 1 秒即可加载的页面，现在最多需要 30 秒！原因不是互联网连接速度慢，其他网站加载速度很快，只有我们的网站没有。当这些客户端使用 Chrome 时速度非常快，所以问题出在远程桌面和 IE 的组合上。

现在奇怪的部分来了：当在IE9中点击“兼容模式”按钮时，我们的网站又快了！

什么可能导致这些极端的速度差异？

我们认为`<!DOCTYPE html>`在 IE9 中使用是最佳实践，但似乎在远程桌面会话中我们应该以某种方式使用 quirks-mode 或强制兼容模式？

对这个主题有什么想法吗？

***更新***

我们找到了解决方案：禁用 IE9 的 CSS 圆角！
（见接受的答案）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-26T16:52:42.180

我们终于找到了延误的原因！

我们使用带有许多*圆角*的主题的 Jquery UI （使用 CSS）。

圆角使 IE9 在终端服务会话中停止！！（IE10似乎没有同样的问题）。

不幸的是，没有办法检测是否有人在使用终端服务，因为微软愚蠢到在 Windows 7 和 Windows 2008 Server (!) 上使用相同的浏览器版本号，所以我们决定在我们的网站上为所有用户*禁用*圆角IE9。

# ruby - 红宝石捆绑安装前缀

> ID：16219778
> 
> 赞同：0
> 
> 时间：2013-04-25T16:13:05.187
> 
> 标签：ruby, installation, rvm, bundle

我正在尝试安装一个捆绑包并指定我的 rvm 的路径：

`bundle install --path /home/abc/.rvm/gems/ruby-1.9.3-p392@mygemset/`

但是安装时的包总是添加一个前缀，所以我安装的文件最终是：

`/home/abc/.rvm/gems/ruby-1.9.3-p392@mygemset/ruby/1.9.1/*`

我找不到这`ruby/1.9.1`是从哪里来的……请给我一个提示。

```
$rvm --version
rvm 1.19.1 (stable)

$ ruby --version
ruby 1.9.3p392 (2013-02-22 revision 39386) [x86_64-linux]

$ bundle --version
Bundler version 1.3.5

$ which ruby
/home/abc/.rvm/rubies/ruby-1.9.3-p392/bin/ruby

which bundle
/home/danghvu/.rvm/gems/ruby-1.9.3-p392@mygemset/bin/bundle

$ rvm gemset list

gemsets for ruby-1.9.3-p392 (found in /home/abc/.rvm/gems/ruby-1.9.3-p392)
   (default)
=> mygemset 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-26T00:17:12.587

发现了问题，因为在不知道当前 ruby​​ 的情况下将 bundle 安装到文件夹中，所以它假设基于 bundle 内 gem 的要求。

解决方法：使用 bundle install --path 无法解决，使用`gem build`then`gem install`

# xml - 使用 JDOM 解析 XML 命名空间

> ID：16219782
> 
> 赞同：0
> 
> 时间：2013-04-25T16:13:12.900
> 
> 标签：xml, jdom

我正在尝试使用 JDOM 读取以下 XML 字符串响应，但不知道如何解析？你能帮我么？我正在尝试以下代码来解析：

```
org.jdom.Element rootNode =  document.getRootElement();

List<?> list =  rootNode.getChildren("QuotationResponse");
for(int i = 1 ; i <= list.size() ; i++) {
   Element node = (Element) list.get(i);
   String documentDate = node.getAttribute("documentDate");
   String transactionType = node.getAttribute("transactionType");
} 
```

XML:

```
<?xml version="1.0" encoding="UTF-8"?>

<S:Envelope xmlns:S="http://schemas.xmlsoap.org/soap/envelope/"><S:Body><VtEnvelope 

xmlns="un:vtinc:o-series:tps:6:0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">

<Login><UserName>user</UserName>
<Password>abcd</Password>
</Login>
<QuotationResponse documentDate="2011-03-24" transactionType="SALE"><Customer><Destination taxAreaId="1230000"><City>Dallas</City>
<MainDivision>TX</MainDivision>
<SubDivision>Chester</SubDivision>
<PostalCode>75038</PostalCode>
<Country>USA</Country>
</Destination>
</Customer>
<SubTotal>1000.0</SubTotal>
<Total>1060.0</Total>
<TotalTax>60.0</TotalTax>
<LineItem lineItemId="1" lineItemNumber="1" taxDate="2013-04-25"><Product productClass="product class attribute value">product code value</Product>
<Quantity>1.0</Quantity>
<FairMarketValue>1000.0</FairMarketValue>
<UnitPrice>1000.0</UnitPrice>
<ExtendedPrice>1000.0</ExtendedPrice>
<Taxes taxResult="TAXABLE" taxType="SALES" situs="DESTINATION" taxCollectedFromParty="BUYER"><Jurisdiction jurisdictionLevel="STATE" jurisdictionId="3051">Texas</Jurisdiction>
<CalculatedTax>60.0</CalculatedTax>
<EffectiveRate>0.06</EffectiveRate>
<Taxable>1000.0</Taxable>
<Imposition impositionType="General Sales and Use Tax">Sales and Use Tax</Imposition>
<TaxRuleId>121</TaxRuleId>
</Taxes>
<TotalTax>60.0</TotalTax>
</LineItem>
</QuotationResponse>
</VtEnvelope></S:Body></S:Envelope> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T17:13:12.773

您需要使用特定于命名空间的 getChildren() 方法。您想要的命名空间是“un:vtinc:o-series:tps:6:0”

```
Namespace ns = Namespace.getNamespace("un:vtinc:o-series:tps:6:0");
List<?> list = rootNode.getChildren("QuotationResponse", ns); 
```

如果您使用的是 JDOM 2.x，则第二行可能是：

```
Namespace ns = Namespace.getNamespace("un:vtinc:o-series:tps:6:0");
List<Element> list = rootNode.getChildren("QuotationResponse", ns); 
```

你的整个事情可能是：

```
Namespace ns = Namespace.getNamespace("un:vtinc:o-series:tps:6:0");
for(Element node : rootNode.getChildren("QuotationResponse", ns)) {
  String documentDate = node.getAttribute("documentDate");
  String transactionType = node.getAttribute("transactionType");
} 
```

编辑：好的，你仍然有问题。我现在看到很多事情是错误的。

您应该使用 JDOM 2.0.4。它将有助于类型转换。您以某种方式将属性对象放入字符串中。那应该是不可能编译的！

```
String documentDate = node.getAttributeValue("documentđate") 
```

最后，QuotationResponse*不是*根元素的子元素，而是 S:Body.... 和 VtEncelope 的子元素。您将需要使用正确的命名空间来访问这些。您需要正确设置文档结构。

# android - SharedPreferences 未正确存储

> ID：16219784
> 
> 赞同：0
> 
> 时间：2013-04-25T16:13:15.187
> 
> 标签：android, sharedpreferences

我有一个问题，我多次计算，每次都有结果，一旦完成最终计算，我想将答案存储在共享偏好中，问题是我一直为零。

这是我的循环代码，计算和共享偏好

**活动一**

```
for (i = 0; i < happyRating.size()-1; i++) {
    int test = happyRating.get(i);

        if (happyRating.get(i) < happyRating.size()) {
            Log.d("TestTrain", "CALLED");
            int x, x1, x2, y, y1, y2;
            double learningRate = -0.00002;
            //double learningRate = -0.00092;

            x1 = happyRating.get(i);
            x2 = happyRating.get(i + 1);
            y1 = iteration[i];
            y2 = iteration[i + 1];

            x = x2 - x1;
            y = y2 - y1;

            if (x == 0) {
                slope = 0;
            } else {
                slope = (y2 - y1) / (x2 - x1);
            }

            double weightAdj = happyRating.get(i) * slope * learningRate;

            weighting = (weighting + weightAdj);
            dynA =  distArray[i] * weighting;

            Log.d("TestInt", "HappyRating (i): " + Integer.toString(test));
            Log.d("WEIGHTING", Double.toString(weighting)); 

            String PREFS1 = "siclPrefs1";
            SharedPreferences siclPrefs1 = getSharedPreferences(PREFS1,0);
            Editor editor = siclPrefs1.edit();
            editor.putFloat("Weight7", (float) weighting);
            editor.commit();

            if (dynA > 1)
            {
                break;
            }

        } else {
            break;
        }

    } 
```

我正在使用 sharedpreferences 来存储一个布尔值，当我在下一个活动中检查它时，这很好。如果有任何冲突，这里是代码

```
TrainingDone = true;

    String PREFS = "siclPrefs";
    SharedPreferences siclPrefs = getSharedPreferences(PREFS,0);
    Editor editor = siclPrefs.edit();
    editor.putBoolean("Train7", TrainingDone);
    editor.commit(); 
```

**活动二**

对其他活动的提取如下完成

```
 String PREFS = "siclPrefs";
    SharedPreferences siclPrefs = getSharedPreferences(PREFS, 0);

    String PREFS1 = "siclPrefs1";
    SharedPreferences siclPrefs1 = getSharedPreferences(PREFS1, 0);

            double weight = (double) siclPrefs1.getFloat("Weight7", 0);
            Boolean train = siclPrefs.getBoolean("Train7", false); 
```

布尔值提取得很好，但是权重显示为零，我知道这是因为它不存在并且默认为零。我可以重复使用编辑器还是那是我跌倒的地方？

问候，加里

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T16:23:50.237

You can use this PublicSharePreferences class.

```
public class PublicSharedPreferences {

    public static void setDefaults(String key, String value, Context context) {
      SharedPreferences prefs = PreferenceManager.getDefaultSharedPreferences(context);
      SharedPreferences.Editor editor = prefs.edit();
      editor.putString(key, value);
      editor.commit();
    }

    public static String getDefaults(String key, Context context) {
      SharedPreferences preferences=PreferenceManager.getDefaultSharedPreferences(context);
      return preferences.getString(key, null);
    }

} 
```

Hope this helps.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T16:25:53.313

要获得偏好，请使用以下命令：

```
SharedPreferences prefs = this.getSharedPreferences(
                  "Package_Name", Context.MODE_PRIVATE); 
```

要将数据保存到该首选项，请执行以下操作：

```
prefs.edit().putString("Key", "Value").commit(); 
```

要从该偏好中获得价值，请执行以下操作：

```
prefs.getString("Key", null) 
```

# eclipse - 让 Subclipse 忽略更改

> ID：16219785
> 
> 赞同：0
> 
> 时间：2013-04-25T16:13:25.410
> 
> 标签：eclipse, svn, subclipse

有没有办法告诉 Subclipse 忽略对特定文件所做的更改？

我有一个存在于 SVN 中的配置 XML 文件，但我需要在本地为我的机器进行调整。但是多亏了那个文件，整个包都标有一个小`*`图标，告诉我我在那个项目中有更改，这很麻烦。有没有办法告诉 Subclipse 某个版本的“是的，该文件应该与存储库不同步，不用担心”？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T20:49:55.017

一旦文件被版本化，它就不能被忽略。很多人做的是使用模板文件，例如名为 foo.xml.in 或 foo.tmpl 的文件。然后您对该文件进行版本控制并使用一些过程从模板创建 foo.xml 文件。然后忽略 foo.xml 文件，因此您可以随意更改它。

# sql - 如何将两个和的结果相加？

> ID：16219792
> 
> 赞同：2
> 
> 时间：2013-04-25T16:13:49.177
> 
> 标签：sql, sum

是否可以**添加****两个 Sum()**函数的结果？

桌子：

```
 DROP TABLE MATCH;
  CREATE TABLE MATCH 
   (M_ID VARCHAR2 (4) NOT NULL,
    HT_ID VARCHAR2 (4),
    AT_ID VARCHAR2 (4),
    P_F NUMBER (3),
  P_A NUMBER (3));

   INSERT INTO MATCH VALUES
   ('M01','T1', 'T2',  2, 0);

  INSERT INTO MATCH VALUES
  ('M02','T1', 'T2',  1, 1);

  INSERT INTO MATCH VALUES
  ('M03','T1', 'T2',  0, 2);

  INSERT INTO MATCH VALUES
  ('M04','T1', 'T2', 0, 2);

  INSERT INTO MATCH VALUES
  ('M05','T2', 'T1', 2, 0);

  INSERT INTO MATCH VALUES
  ('M06','T2', 'T1',  0, 2);

  INSERT INTO MATCH VALUES
  ('M07','T2', 'T1',  1, 2);

  INSERT INTO MATCH VALUES
  ('M08','T2', 'T1',  0, 2); 
```

我想要获得的是主队“T1”的积分（（P_F）和反对（P_A）的积分）。

为了让它更清楚一点，我做了以下操作，总共产生**9**。

```
 select sum(P_F)
 from match
 where HT_ID='T1';

 select sum(P_A)
 from match
 where AT_ID='T1'; 
```

我尝试了以下方法，但它为该特定团队添加了两列，**结果为 17**：

```
 select sum(P_F+P_A)
 from match
 where ht_id='T1' or at_id='T1'; 
```

如何在一个查询中**添加****两个总和？**提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-25T16:16:58.623

```
select
sum(case when HT='T1' then P_F else 0 end), 
sum(case when AT='T1' then P_A else 0 end)
from match 
```

添加：

```
select
sum(case when HT='T1' then P_F else 0 end) +
sum(case when AT='T1' then P_A else 0 end)
from match 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-25T16:17:25.817

您可以在总和中使用 CASE：

```
SELECT  SUM(CASE WHEN ht_ID = 'T1' THEN P_F ELSE 0 END + CASE WHEN AT_ID = 'T1' THEN P_A ELSE 0 END)
FROM    Match
WHERE   ht_id='T1' 
OR      at_id='T1'; 
```

**[SQL Fiddle 示例](http://sqlfiddle.com/#!4/81dc3/2)**

# php - 工厂方法 - 抛出什么异常

> ID：16219796
> 
> 赞同：1
> 
> 时间：2013-04-25T16:13:59.553
> 
> 标签：php, design-patterns, factory, factory-pattern

我有一个非常简单的工厂方法，它根据传递给它的配置的一些值和条件创建模型实例。

我不确定的是，如果工厂无法根据收到的配置创建模型实例，该怎么办。

第一个问题是，它应该返回 false 还是 null？还是应该抛出异常？

如果它应该抛出异常，这应该是什么异常。我在这里使用 PHP（php 异常列表[http://php.net/manual/en/spl.exceptions.php](http://php.net/manual/en/spl.exceptions.php)）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T16:17:36.830

你是唯一能回答这个问题的人。应该发生的事情在任何地方都没有定义。

如果你问我，我宁愿抛出一个异常，`YourFactory_ClassNotFoundException`如果你想调用它。这将使调用代码看起来更直接，因为它不需要测试返回值。

* * *

据我所知，AFAIK 在 PHP 核心函数和类中对此有以下共同共识：

*   `false`应该由遇到错误且不抛出异常的方法返回。（并且没有类似的布尔返回值`is_file()`）。这些方法预计会设置`errno`并`errmsg`让用户有机会获取错误消息。

*   在这种情况下，一些较新的 PHP 类会抛出异常。我更喜欢库代码的异常。

*   `null`如果它是没有 return 语句的 void 方法，则返回。这可以是有条件的

# php - Paypal 定期计费通过沙盒帐户

> ID：16219798
> 
> 赞同：2
> 
> 时间：2013-04-25T16:14:01.133
> 
> 标签：php, paypal

我已经成功设置了一个帐户，我可以使用该帐户创建一个企业帐户和个人帐户，但现在我想在我的网站中集成贝宝的定期计费，我认为贝宝将 sanbox 和真实帐户合二为一，所以我有点困惑经常性计费。如果任何机构有经常性计费程序/教程，请告诉我。

非常感谢您快速而温和的回应。

# ios - 在 ios6 上阻止短信

> ID：16219799
> 
> 赞同：3
> 
> 时间：2013-04-25T16:14:01.380
> 
> 标签：ios, ios6, jailbreak

我正在为越狱设备构建，我想阻止传入的消息。我正在尝试挂钩 _ingestIncomingCTMessage，但它没有结果（它似乎不适用于 ios6）。我还能如何在 ios6 中阻止短信？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-09-20T11:21:32.537

Found much better and simpler way. Just as I thought `com.apple.imagent` daemon is very important and it's him who is handling `kCTMessageReceivedNotification`. This is why we get empty message object when handling `kCTMessageReceivedNotification` yourself - `com.apple.imagent` is removing it from `CTMessageCenter`.

We need to hook just two methods but finding and hooking them is quite tricky. Both methods are hooked in `com.apple.imagent` daemon.

First, `SMSServiceSession -(void)_processReceivedMessage:(CTMessage*)msg`. This is where incoming message is being initially processed, saved to the SMS database and passed to all other iOS components. Problem is there is no information about this API anywhere. `com.apple.imagent` appears to be not using it if you disassemble it. It's because it's being loaded manually at runtime.

When `com.apple.imagent` is started he's loading several plugins. The one that we need is located in `/System/Library/Messages/PlugIns/SMS.imservice/` - this is where `SMSServiceSession` is implemented. You will not find binary in there because just like all the frameworks it's compiled into `/System/Library/Caches/com.apple.dyld/dyld_shared_cache_armv7`. IDA recognizes this file and let's you choose which binary inside of it you want to disassemble.

To delete incoming message and prevent any notifications about it you need to call `[[CTMessageCenter sharedMessageCenter] acknowledgeIncomingMessageWithId:[msg messageId]]` and return from `_processReceivedMessage:` without calling original implementation. Calling `CTMessageCenter` method is important because it queues incoming messages.

Now we need to find a way to know when`SMS.imservice` plugin is being actually loaded. Initially imagent only creates `NSBundle` objects without loading any code. So you can't hook any methods because classes are not yet loaded from the plugins. To solve this we can hook `IMDService -(void)loadServiceBundle` method from private `IMDaemonCore.framework`. Call original implementation and you can hook methods inside the plugin. To determine which plugin is being loaded you can check bundle identifier in `IMDService -(NSBundle*)bundle`.

This method works only with SMS and MMS messages. iMessages are processed in similar way but with different plugin - `/System/Library/Messages/PlugIns/iMessage.imservice`. Hooking `MessageServiceSession -(void)_handler:(id) incomingMessage:(id) encryptionType:(id) messageID:(id) fromIdentifier:(id) fromToken:(id) timeStamp:(id) storageContext:(id) allowRetry:(char) completionBlock:(id)` should do the trick.

**UPDATE**

Works on iOS 7

**UPDATE 2**

On iOS 8 everything works the same way except you need to hook different `SMSServiceSession` method - `-(void)_processReceivedDictionary:(NSDictionary*)msg`. Dictionary will contain all SMS message contents.

If you don't want to rewrite everything for iOS 8 you can reuse your old code. Incoming SMS notification is handled by hidden non-exported C callback function - you can't hook it. First, it calls `SMSServiceSession -(id)_convertCTMessageToDictionary:(CTMessage*)msg requiresUpload:(BOOL*)upload` to convert SMS message object to dictionary. Then it calls `SMSServiceSession -(void)_processReceivedDictionary:(NSDictionary*)msg` to process message. Finally, it calls `SMSServiceSession -(BOOL)relayDictionaryToPeers:(NSDictionary*)msg requiresUpload:(BOOL)upload` to notify all other iOS components about incoming message.

To block SMS you need to hook `_convertCTMessageToDictionary` where you can use the same code you used on previous iOS versions. You also need to hook both `_processReceivedDictionary` and `relayDictionaryToPeers` to actually block incoming message. Just return from them without calling original implementation. You can set some global variable in `_convertCTMessageToDictionary` and check and reset it in other methods. It's perfectly safe to do it that way - these methods are called one after another synchronously. That C callback function is the only places where these methods are called.

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-05-08T21:59:19.843

这是相当棘手的。苹果在这方面做出了重大改变。在 iOS 5 上这很容易，但在 iOS 6 上我还没有找到简单的方法来做到这一点。首先，您需要使用 CTTelephonyCenter 观察 __kIMChatItemsDidChangeNotification 通知。我是在 SpringBoard 中注入的 dylib 中进行的。不确定，但这可能很重要。

```
CTTelephonyCenterAddObserver(CTTelephonyCenterGetDefault(), NULL, Callback, NULL, NULL, CFNotificationSuspensionBehaviourHold);

void Callback(CFNotificationCenterRef, void*, NSString* notification, const void*, NSDictionary* userInfo)
{
    if (![notification isEqualToString:@"__kIMChatItemsDidChangeNotification"])
    {
        return;
    }

    for (IMChatItem* chatItem in userInfo[@"__kIMChatItemsKey"])
    {
        IMMessage* msg = [chatItem message];//Incoming message object
        NSString* text = [[msg text] string];//message text
        NSString* sender = [[msg sender] ID];//message sender

        [[IMDMessageStore sharedInstance] performBlock:^{
            IMDChatRecordDeleteChatForGUID([NSString stringWithFormat:@"SMS;-;%@", sender]);
        }];
    }
} 
```

最后一点非常重要。您不能只删除消息。您需要在特定的内部线程上执行此操作，否则会出现错误。这就是我使用`IMDMessageStore`. 它的`performBlock:`方法在这个特殊线程上执行块。 `IMDChatRecordDeleteChatForGUID`函数可以在 IMDPersistence.framework 中找到。它会删除具有特定 GUID 的整个消息树（聊天/对话）。我找不到检索此 GUID 的方法，因此我使用 SMS sqlite 数据库中的 GUID 作为示例手动构建它。

要仅删除一条消息，您可以使用`IMDMessageRecordDeleteMessagesForGUIDs([NSArray arrayWithObject:[msg guid]]);`

`IMChatItem`并且`IMMessage`可以在`IMCore.framework`. `IMDMessageStore`在`IMDaemonCore.framework`.

这是容易的部分。现在，当您收到消息并以这种方式阻止它时，您会看到它仍然显示在 MobileSMS 应用程序中，您仍然可能会收到公告通知，您仍然会收到徽章告诉您有未读消息。但是如果您打开 SMS sqlite 数据库，您会看到该消息确实已被删除。阻止这些并不是那么容易。

1.  公告。在 SpringBoard 中，您需要挂钩`BBServer`方法`publishBulletin:destinations:alwaysOnLockScreen:`。第一个参数是 BBBulletin 对象。如果它是传入的消息公告，它的`section`属性等于`com.apple.MobileSMS`。要阻止公告，只需从此方法返回，不要调用原始实现。
2.  MobileSMS 应用程序徽章。当有传入的 SMS 时，SpringBoard 中会加载 ChatKit.serviceBundle。您需要在`MessagesBadgeController`-`_madridChatRegistered:`和`_madridUnreadCountChanged:`. 他们的第一个参数是`NSNotification`具有包含对象的`object`属性的`IMChat`对象。同样，只需从这些方法返回以防止徽章更改。
3.  手机短信应用。为了阻止它显示已删除的消息，我使用了很多方法。我只会给你一个清单： `SMSApplication _receivedMessage:`, `CKTranscriptController _messageReceived:`, `CKConversationList _handleRegistryDidRegisterChatNotification:, _handleRegistryDidLoadChatNotification:, hasActiveConversations, unreadCount`. `CKConversationController _chatParticipantsChangedNotification:, updateConversationList`,`CKMessagesController showConversation:animate:forceToTranscript:`

关于 ChatKit.serviceBundle。要挂钩它的类，您需要等待 SpringBoard 实际加载它。这是在`SBPluginManager loadPluginBundle:`. 捆绑标识符应等于`com.apple.SMSPlugin`. 只有这样你才能挂钩方法。

而已。相当多的工作，但它工作完美 - 没有收到消息的迹象，即使消息到达时您在 MobileSMS 应用程序中也是如此。

我确信有更简单的方法可以做到这一点。有 com.apple.imagent 守护进程向各种 iOS 组件发送通知。它在 iOS 6 消息系统中非常重要。开始的好地方。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-07-04T10:47:59.097

我有更好的解决方案来阻止所有 SMS 消息

```
%hook CKConversationListController

- (void)viewDidLoad
{
    %orig;

    CKConversationList *list = MSHookIvar<CKConversationList *>(self, "_conversationList");

    if ([list count]) {
        [deleteAll release];
    }
}

%new
- (void)deleteAll:(id)sender {

    CKConversationList *list = MSHookIvar<CKConversationList *>(self, "_conversationList");
    UITableView *messages = MSHookIvar<UITableView *>(self, "_table");

    for (unsigned int i = 0; i < [[list conversations] count]; i++) {
        [list deleteConversationAtIndex:i];
    }

    [messages reloadData];
}
%end 
```

# filepicker.io - Filepicker convert 显示完全不同的图像

> ID：16219800
> 
> 赞同：1
> 
> 时间：2013-04-25T16:14:08.467
> 
> 标签：filepicker.io

在某些情况下，在 url 中不使用[convert](https://developers.filepicker.io/docs/web/v0/#fpurl-images)有时会显示为*完全*不同的图像。
以下共享相同的 base-url：

[https://www.filepicker.io/api/file/8d3kyEaTOKD2NzgqeInQ/convert?fit=clip&h=150&w=150](https://www.filepicker.io/api/file/8d3kyEaTOKD2NzgqeInQ/convert?fit=clip&h=150&w=150)

![一只小猫的图片](https://www.filepicker.io/api/file/8d3kyEaTOKD2NzgqeInQ/convert?fit=clip&h=150&w=150)

[https://www.filepicker.io/api/file/8d3kyEaTOKD2NzgqeInQ](https://www.filepicker.io/api/file/8d3kyEaTOKD2NzgqeInQ)

![一张完全不同的小猫图片](https://i.stack.imgur.com/9ATbZ.jpg)

### 如您所见，这些图像完全不同。

为什么会发生这种情况，是否有解决方案来控制这种情况（我应该一直使用转换）？

*（我怀疑这与最初从[placekittens](http://placekitten.com/)获取图像的元数据有关......但这表明其他上传的图像可能有同样的问题。）*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-03T01:48:02.767

老实说，这是我见过的最奇怪的问题之一 - filepicker.io url 由 url 客户端支持，基本图像是[http://placekitten.com/150/150](http://placekitten.com/150/150)。不知何故，该 url 返回不同的图像，可能基于用户代理、请求 IP、缓存层或许多其他参数。

一种建议是使用 filepicker.pickAndStore() 命令来确保您使用的是数据的快照，而不是指向原始文件本身的指针。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T20:27:33.510

`format=jpg`一个（不是很令人满意的）解决方案是在显示全尺寸图像时始终转换为：

[https://www.filepicker.io/api/file/8d3kyEaTOKD2NzgqeInQ/convert?format=jpg](https://www.filepicker.io/api/file/8d3kyEaTOKD2NzgqeInQ/convert?format=jpg)

![https://www.filepicker.io/api/file/8d3kyEaTOKD2NzgqeInQ/convert?format=jpg](https://i.stack.imgur.com/kzIlf.jpg)

# asp.net - 使用 HTTPClient 从 ASP.NET Web API 接受和下载流内容

> ID：16219802
> 
> 赞同：1
> 
> 时间：2013-04-25T16:14:16.137
> 
> 标签：asp.net, asp.net-web-api, webforms, dotnet-httpclient

我有一个 ASP.NET Web API 操作，它创建一个文件并返回一个流内容：

```
public HttpResponseMessage Get(string filePath)
{
    // create file
    var file = FileConverter.GenerateExcelFile(filePath);

    var stream = new FileStream(filePath, FileMode.Open);

    HttpResponseMessage result = new HttpResponseMessage(HttpStatusCode.OK);
    result.Content = new StreamContent(stream);
    result.Content.Headers.ContentDisposition = new ContentDispositionHeaderValue("attachment");
    result.Content.Headers.ContentDisposition.FileName = Path.GetFileName(filePath);
    result.Content.Headers.ContentType = new MediaTypeHeaderValue("application/octet-stream");
    return result;
} 
```

我想使用 HttpClient 下载返回的文件。这是我现在拥有的：

```
 client.GetAsync(address).ContinueWith(
        (requestTask) =>
        {
             HttpResponseMessage response = requestTask.Result;

            // response.EnsureSuccessStatusCode();

            response.Content.ReadAsStreamAsync().ContinueWith(
                        (readTask) =>
                        { 
                            var stream = readTask.Result; 
                        });
        }); 
```

得到结果后如何强制实际下载？

编辑：我正在使用 ASP.NET 4.0 WebForms。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-25T17:07:40.963

你有没有想过只是打电话：

```
client.GetByteArrayAsync(address) 
```

而是获取字节数组结果，然后将其保存到内存流中？

编辑：：

尝试这样的事情：

```
var contentBytes = await client.GetByteArrayAsync(address);
Stream stream = new MemoryStream(contentBytes); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-26T14:32:28.303

为什么你认为下载没有发生？

默认情况下，当您使用`GetAsync`HTTP 客户端创建 MemoryStream 作为结果缓冲区时。ReadAsStreamAsync 只是返回缓冲的 StreamContent。

编辑：你可以像这样创建一个文件，

```
 using (FileStream fs = new FileStream("file.txt", FileMode.Create)) {
           stream.CopyTo(fs);
        }
    } 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2014-03-22T17:17:01.287

HttpClient 在服务器端而不是在 Web 浏览器中运行，因此您在此处尝试实现的目标确实令人困惑。如果您确实需要使用 HttpClient ，您可以将结果流保存到文件流中，您可以在评论中阅读。

如果您希望在 Web 浏览器中下载文件，您不需要也不能使用 HttpClient。正如您在评论中所写的那样，它已经有效，只需创建一个用户可以点击的链接。或者搜索ajax下载文件。

# clojure - 如何在 Clojure 中过滤多个值或通配符？

> ID：16219803
> 
> 赞同：1
> 
> 时间：2013-04-25T16:14:18.617
> 
> 标签：clojure, filter

我正在尝试过滤各种字符串上的键。我可以像这样过滤一个固定的字符串：

```
(filter #(= (:TEST_KEY %) "TEST: 1")records) 
```

虽然这有效，但我还需要能够包含 "`TEST: 2"`和`"TEST: ABC"`。我怎样才能让过滤器对多个值起作用？有没有办法像`"TEST: *"`我不知道的那样过滤通配符？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-25T18:12:42.633

Michiel Borkent 的回答涵盖了通配符的情况。如果有一组枚举选项，clojure 允许使用文字集作为测试成员资格的函数。这可以习惯性地使用`filter`（因为除了 nil 或 clojure 中的 false 之外的所有值都是真实的）。

```
user> (#{"A" "B"} "A")
;;=> "A"
user> (#{"A" "B"} "C")
;;=> nil 
```

我`comp`用来创建一个函数，它首先在记录中查找键，然后用一组测试它：

```
(filter (comp #{"TEST: 1" "TEST: 2" "TEST: ABC"} :TEST_KEY) records) 
```

请注意，上面的语法是一个集合文字，与匿名函数语法`#{}`无关。`#()`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-25T17:06:37.753

```
(filter #(.startsWith (:TEST_KEY % "") "TEST: ")      
        [{:TEST_KEY "TEST: 1"} {:TEST_KEY "TEST: 2"} {:NONSENSE "foo"}])

;; or equivalently

(filter #(re-find #"TEST: .*"        ;; use regular expression to match
                  (:TEST_KEY % ""))  ;; get value of :TEST_KEY, 
                                     ;; use empty string as default 
        [{:TEST_KEY "TEST: 1"} {:TEST_KEY "TEST: 2"} {:NONSENSE "foo"}])
;;=> ({:TEST_KEY "TEST: 1"} {:TEST_KEY "TEST: 2"}) 
```

# java - 在 groovy 中动态加载 jar

> ID：16219805
> 
> 赞同：6
> 
> 时间：2013-04-25T16:14:21.060
> 
> 标签：java, groovy, classpath

我有一个 groovy 脚本 createWidget.groovy：

```
 import com.example.widget

 Widget w = new Widget() 
```

当我像这样运行它时，这个脚本运行得很好：

```
$ groovy -cp /path/to/widget.jar createWidget.groovy 
```

但是，我想在脚本中硬编码类路径，这样用户就不需要知道它在哪里，所以我修改了 createWidget.groovy 如下（这是在 groovy 中修改类路径的方法之一）：

```
this.getClass().classLoader.rootLoader.addURL(new File("/path/to/widget.jar").toURL())

import com.example.widget

Widget w = new Widget() 
```

但这总是失败并在导入时出现运行时错误：`unable to resolve class com.example.widget`.

这看起来确实不正统，我认为您不能在导入之前弄乱 rootLoader 还是其他什么？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2014-06-23T22:21:21.810

```
// Use the groovy script's classLoader to add the jar file at runtime.
this.class.classLoader.rootLoader.addURL(new URL("/path/to/widget.jar"));

// Note: if widget.jar file is located in your local machine, use following:
// def localFile = new File("/path/tolocal/widget.jar");
// this.class.classLoader.rootLoader.addURL(localFile.toURI().toURL());

// Then, use Class.forName to load the class.
def cls = Class.forName("com.example.widget").newInstance(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-26T06:08:47.930

如果我理解这个问题，那么您要求的是一个可以交付给用户的独立单元。

这可以在 JVM 上使用“jar”的基础知识。

例如，[这个项目](https://github.com/peidevs/WarO_Groovy)玩一个名为 War-O 的简单游戏。用户可以使用以下命令运行它：

```
java -jar warO.jar [args] 
```

该技术包括：(a) 将 Groovy 编译为类文件和 (b) 在 jar 中包含所有必要的 jar（包括 groovy-all）。此外，jar 必须具有清单中指定的“主要”入口点（这将是脚本的修改版本）。

War-O 项目使用 Gradle（请参阅[此处的构建文件](https://github.com/peidevs/WarO_Groovy/blob/master/build.gradle)），但即使使用 Ant、Maven 等，原则也适用。以 Gradle 为例：

```
jar.archiveName 'warO.jar'
jar.manifest {
    attributes 'Main-Class' : 'net.codetojoy.waro.Main'
    attributes 'Class-Path' : 'jars/groovy-all-1.6.4.jar jars/guava-collections-r03.jar jars/guava-base-r03.jar'
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-08-23T10:40:11.010

另一种方法可以是只写下 java 代码以从 jar 文件加载类，并按照常规修改该代码。

```
import java.net.URL;
import java.net.URLClassLoader;
import java.lang.reflect.Method;
public class JarFileLoader 
{
    public static void main (def args)
    {
        try
        {
            URLClassLoader cl = new URLClassLoader (new URL("jar:file:///path/to/widget.jar!/"));

            System.out.println ("Attempting...");

            Class beanClass = cl.loadClass ("com.example.widget.WidgetClass");
            Object dog = beanClass.newInstance();

            Method method = beanClass.getDeclaredMethod ("setBean", String.class);
            method.invoke (dog, "Who let the dog out");

            method = beanClass.getDeclaredMethod("getBean", null);            
            Object retObj = method.invoke (dog, null);

            String retVal = (String)retObj;

            System.out.println(retVal);
            System.out.println("Success!");
        }
        catch (Exception ex)
        {
            System.out.println ("Failed.");
            ex.printStackTrace ();
        }
    }
} 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-04-26T00:14:37.810

Groovy 是一种编译语言，类名在编译时必须是可解析的。因此，在运行时添加 Jar 是不够的。

（import 语句也是错误的，你必须追加`.*`or `.Widget`。但这并不能解决更深层次的问题。）

# sugarcrm - SugarCRM how to hide edit button from listview

> ID：16219806
> 
> 赞同：3
> 
> 时间：2013-04-25T16:14:22.340
> 
> 标签：sugarcrm

I need to hide **edit button** from lists in SugarCRM - the small pencil icon in the left part of each item on the list.

The reason I need to hide it, because it opens the popup edit form, which has some bugs, and doesn't run some dependencies. Replacing this popup edit view with the normal edit view through JavaScript could be an option too.

It should be done in upgrade safe way.

Using SugarCRM Pro 6.5.11

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-25T18:27:30.833

您也可以通过代码执行此操作，并通过 custom/modules/Accounts/views/view.list.php 中的新文件创建自定义列表视图，代码如下：

```
<?php
if(!defined('sugarEntry') || !sugarEntry) die('Not A Valid Entry Point');

require_once 'include/MVC/View/views/view.list.php';

class CustomAccountsViewList extends ViewList
{
    public function preDisplay()
    {
        parent::preDisplay();

        # Hide Quick Edit Pencil
        $this->lv->quickViewLinks = false;
    }
} 
```

通过这种方式，您还可以隐藏一些额外的“选项”，例如导出按钮、批量更新表单等。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-25T16:56:14.137

对此的替代方法是为弹出编辑视图有问题的模块禁用 AjaxUI。您可以在系统设置下配置哪些模块不应使用 AjaxUI（此处“配置 Ajax 用户界面”下的更多信息：http: [//support.sugarcrm.com/02_Documentation/01_Sugar_Editions/05_Sugar_Community_Edition/Sugar_Community_Edition_6.5/Sugar_Community_Edition_Administration_Guide_6.5.0/05_System](http://support.sugarcrm.com/02_Documentation/01_Sugar_Editions/05_Sugar_Community_Edition/Sugar_Community_Edition_6.5/Sugar_Community_Edition_Administration_Guide_6.5.0/05_System) )

代码方面，删除编辑图标需要的不仅仅是编辑 listviewdefs.php 文件。

# facebook - 限制在 Facebook 页面上发布链接

> ID：16219807
> 
> 赞同：1
> 
> 时间：2013-04-25T16:14:22.670
> 
> 标签：facebook, facebook-graph-api, hyperlink, fan-page

我已经使用 php 和 JavaScript sdk 创建了一年的 Facebook 应用程序，它是我的博客和页面的自动发布器，我目前有大约 50 个页面处于活动状态，并且每个站点对应的 Facebook 页面也一样多。

这些页面由不同的人和出版商维护，我们总共有大约 40 人在工作。

每次您在博客或网络上发布新帖子时，该应用程序都会自动在 Facebook 页面上发布指向网络 URL 的链接。

到目前为止，一切都很完美，但是有一天阻止了用户授权应用程序发布......我一直在查看出版物数据库，发现它在到达出版物或帖子 51 时就停止了。

我感觉 Facebook 已在您的页面总数中为每个用户链接设置了 50 个出版物的最大限制，如果您保留少量页面，这很正常，但如果您保留例如 60 个页面并想要发布帖子每一个都是一个荒谬的限制......

任何人都知道这一切，我担心我们几个月的所有工作都被打破了......

# android - SVG 无法在 Android 4.x 本机浏览器上正确显示

> ID：16219812
> 
> 赞同：0
> 
> 时间：2013-04-25T16:14:49.730
> 
> 标签：android, svg, css-mask

这应该是 SVG 的样子

![在此处输入图像描述](https://i.stack.imgur.com/Ckd1Q.png)

这就是 SVG 在 Samsum Galaxy S3 上的 Android 4 本机浏览器上的样子

![在此处输入图像描述](https://i.stack.imgur.com/AKblp.png)

这就是它们嵌入页面的方式

```
.petal  {

  -webkit-mask-image:url(../images/petal.svg);
  -webkit-mask-size: 100%;
  background-color:#fff;

  -webkit-transform-origin:50% 130%;
  -webkit-animation:petal-pulse .95s infinite linear;

} 
```

知道如何解决吗？

**更新：SVG**

```
<svg xmlns="http://www.w3.org/2000/svg" width="116.448" height="200"><style type="text/css"><![CDATA[path{fill:none}.outline{stroke:#00568F;stroke-width:3.5;stroke-miterlimit:10}.fat{stroke-width:7}]]></style><path d="M43.25 18.923c4.441-6.302 9.258-9.885 14.321-9.885 5.025-.004 9.816 3.534 14.229 9.76 3.45-3.915 6.936-6.533 10.395-7.61-7.285-4.019-15.658-6.319-24.575-6.319-8.965 0-17.388 2.335-24.708 6.4 3.443 1.123 6.908 3.736 10.338 7.654z"/><path class="outline" d="M71.799 18.798c-4.413-6.226-9.204-9.765-14.229-9.76-5.062 0-9.879 3.583-14.321 9.885 4.909 5.612 9.712 13.898 14.23 24.331 4.538-10.516 9.377-18.844 14.32-24.456z"/><path class="outline" d="M71.799 18.798c4.335 6.104 8.281 14.895 11.704 25.829 4.728-8.408 9.503-15.25 14.182-20.234-4.219-5.369-9.469-9.882-15.491-13.205-3.459 1.078-6.944 3.696-10.395 7.61z"/><path class="outline" d="M68.816 76.342c4.705-12.085 9.654-22.765 14.688-31.714-3.423-10.934-7.369-19.726-11.704-25.829-4.943 5.612-9.782 13.939-14.32 24.456 4.085 9.422 7.905 20.569 11.336 33.087z"/><path class="outline" d="M43.25 18.923c-3.429-3.918-6.894-6.532-10.339-7.654-6.044 3.356-11.308 7.922-15.525 13.35 4.678 5.006 9.447 11.859 14.18 20.267 3.415-10.973 7.355-19.817 11.684-25.963z"/><path class="outline" d="M46.179 76.376c3.416-12.531 7.229-23.689 11.301-33.123-4.518-10.433-9.321-18.719-14.23-24.331-4.329 6.146-8.268 14.99-11.685 25.962 4.999 8.901 9.928 19.505 14.614 31.492z"/><path class="outline" d="M31.565 44.886c-4.733-8.407-9.502-15.26-14.18-20.267-5.626 7.237-9.37 16.007-10.423 25.603 5.606 8.07 11.294 17.646 16.892 28.49 2.071-12.692 4.678-24.083 7.711-33.826z"/><path class="outline" d="M19.783 113.863c.921-12.49 2.294-24.276 4.071-35.151-5.598-10.844-11.286-20.419-16.892-28.49-.202 1.852-.327 3.727-.327 5.63 0 15.453 2.105 30.24 5.347 44.071"/><path class="outline" d="M46.179 76.376c-4.686-11.988-9.614-22.592-14.614-31.491-3.033 9.743-5.64 21.134-7.71 33.826 5.027 9.726 9.949 20.43 14.662 31.938 2.203-12.229 4.782-23.717 7.662-34.273z"/><path class="outline" d="M33.888 142.3c1.247-10.959 2.802-21.542 4.629-31.65-4.713-11.508-9.635-22.212-14.662-31.938-1.777 10.875-3.15 22.661-4.071 35.151"/><path class="outline" d="M68.816 76.342c-3.431-12.518-7.251-23.665-11.336-33.088-4.072 9.433-7.885 20.592-11.301 33.123 4.008 10.269 7.821 21.514 11.335 33.547 3.5-12.044 7.298-23.303 11.302-33.582z"/><path class="outline" d="M49.664 140.655c2.37-10.674 5.006-20.943 7.85-30.731-3.514-12.033-7.327-23.278-11.335-33.548-2.879 10.555-5.459 22.044-7.662 34.273 3.897 9.51 7.633 19.548 11.147 30.006z"/><path class="outline" d="M44.505 167.272c1.2-7.216 2.531-14.535 4.113-22.01.329-1.561.705-3.06 1.046-4.607-3.514-10.458-7.25-20.496-11.147-30.006-1.827 10.108-3.382 20.691-4.629 31.65"/><path class="outline" d="M11.982 99.923c1.994 8.53 4.42 16.659 7.132 24.321.181-3.515.412-6.958.669-10.381"/><path class="outline" d="M19.783 113.863c-.257 3.423-.488 6.866-.669 10.381 4.127 11.685 8.812 22.211 13.441 31.315.244-2.836.467-5.653.768-8.532.167-1.598.384-3.137.565-4.728"/><path class="outline" d="M33.888 142.3c-.181 1.591-.398 3.13-.565 4.728-.3 2.879-.523 5.696-.768 8.532 3.765 7.405 7.467 13.944 10.73 19.242.369-2.48.794-5.005 1.22-7.529"/><path class="outline" d="M91.305 78.702c5.619-10.897 11.329-20.515 16.955-28.608-1.088-9.641-4.873-18.455-10.575-25.701-4.679 4.985-9.454 11.827-14.182 20.234 3.069 9.795 5.704 21.278 7.802 34.075z"/><path class="outline" d="M76.568 110.871c4.732-11.593 9.684-22.377 14.737-32.169-2.099-12.797-4.733-24.28-7.802-34.075-5.033 8.949-9.982 19.629-14.688 31.714 2.914 10.629 5.52 22.205 7.753 34.53z"/><path class="outline" d="M100.829 103.752c4.665-15.272 7.78-31.505 7.78-47.9 0-1.949-.133-3.866-.349-5.758-5.626 8.094-11.336 17.711-16.955 28.608 1.77 10.802 3.145 22.507 4.072 34.903"/><path class="outline" d="M95.377 113.605c-.928-12.396-2.303-24.101-4.072-34.903-5.054 9.792-10.005 20.576-14.737 32.169 1.812 10.04 3.374 20.54 4.622 31.408"/><path class="outline" d="M95.377 113.605c.124 1.673.25 3.331.362 5.026 1.848-4.825 3.54-9.802 5.089-14.88"/><path class="outline" d="M81.19 142.279c.181 1.583.397 3.116.563 4.713l.168 1.792c4.825-9.085 9.628-19.256 13.818-30.152-.112-1.695-.238-3.354-.362-5.026"/><path class="outline" d="M68.816 76.342c-4.004 10.279-7.802 21.539-11.302 33.582 2.879 9.858 5.542 20.204 7.934 30.961 3.499-10.465 7.23-20.49 11.12-30.014-2.233-12.325-4.839-23.901-7.752-34.529z"/><path class="outline" d="M81.19 142.279c-1.248-10.868-2.811-21.368-4.622-31.408-3.89 9.523-7.621 19.549-11.12 30.014.328 1.472.689 2.9 1.004 4.386 1.595 7.474 2.935 14.794 4.147 22.002"/><path class="outline" d="M49.664 140.655c.502 1.506 1.032 2.956 1.527 4.476 2.363 7.265 4.455 14.41 6.414 21.466 1.944-7.056 4.043-14.201 6.401-21.466.467-1.437.968-2.816 1.442-4.246-2.392-10.757-5.055-21.103-7.934-30.961-2.844 9.788-5.48 20.057-7.85 30.731z"/><path class="outline" d="M52.167 188.104c1.583-6.994 3.41-14.182 5.438-21.508-1.959-7.056-4.05-14.201-6.414-21.466-.495-1.52-1.025-2.97-1.527-4.476-.341 1.548-.718 3.047-1.046 4.607-1.582 7.475-2.913 14.794-4.113 22.01"/><path class="outline" d="M66.452 145.271c-.314-1.485-.676-2.914-1.004-4.386-.475 1.43-.976 2.81-1.442 4.246-2.357 7.265-4.457 14.41-6.401 21.466 1.429 5.172 2.762 10.276 3.975 15.288 2.285-3.235 4.976-7.222 7.946-11.893.348-.899.718-1.812 1.073-2.72-1.213-7.208-2.553-14.528-4.147-22.001z"/><path class="outline fat" d="M57.619 4.869c-28.158 0-50.983 22.832-50.983 50.983 0 74.868 47.895 135.542 47.895 135.542s54.079-66.634 54.079-135.542c-.001-28.151-22.833-50.983-50.991-50.983z"/></svg> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-14T10:54:29.413

虽然 android 从 3.0+ ( [http://caniuse.com/svg](http://caniuse.com/svg) ) 版本开始支持 svg，但它支持

> SVG Basic 1.1 的子集

根据*SVG parsing and rendering for Android tutorial*，（实际上讲的是android SVG库）。

如果您跳到[如何准备矢量图像](http://code.google.com/p/svg-android/wiki/Tutorial#How_to_Prepare_Your_Vector_Images)部分，您将看到 SVG Basic 不支持的功能列表，例如动画，以及保存到 SVG Basic 1.1 配置文件的建议。

SVG 配置文件或可能使用不受支持的功能可能是导致问题的原因。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-11-19T16:33:41.663

如果您在一年半后仍在与此作斗争（或者如果其他人在这里追逐类似的错误）：

我最近遇到了一个问题，三星 Galaxy S3 上的本机浏览器无法正确处理 .svg 图像。（在我的情况下，它拒绝调整背景图像的大小；所讨论的背景图像是一个精灵表，所以这是一个问题。）我的解决方案是将 .svg 转换为 .png 并改用它。如果可能，我绝对会建议任何在 S3 上追逐类似问题的人不要使用 .svg 图像。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-19T18:12:57.500

我建议尝试几件事：

尝试简化 CSS。

*   删除 CDATA 标签
*   在规则之间添加一些空格或换行符

一些 SVG 解析器在密集路径定义方面存在问题。因此，请尝试简化它们：

*   负坐标前的空格：“c4.441-6.302”->“c4.441 -6.302”
*   分数前的零：“19.242.369-2.48.794-5.005”->“19.242 0.369 -2.48 0.794 -5.005”

# flash - 使用图像后备嵌入 Adob e Flash 动画 Internet Explorer 10 Windows 7

> ID：16219813
> 
> 赞同：3
> 
> 时间：2013-04-25T16:14:52.193
> 
> 标签：flash, windows-7, internet-explorer-10

我制作的网站主页上几乎没有 Flash 动画。如果用户没有闪光灯，我希望它优雅地退回到静态图像。这一直工作得很好。

然后我得到了适用于 Windows 7 的 Internet Explorer 10 更新。现在我什么也没得到，甚至没有图像回退。如果在开发人员工具中，我将文档模式更改为 IE 9 标准，它就可以正常工作。但是“标准（页面默认）”标准，我猜这意味着 IE 10 标准，什么也没显示。除 IE10 外，所有其他浏览器都能正常运行……为什么？

```
<object classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000" width="300" height="236"
    id="movie_name" align="middle">
    <param name="movie" value="MyMovie.swf" />
    <!--[if !IE]>-->
    <object type="application/x-shockwave-flash" data="MyMovie.swf" width="300" height="236">
        <param name="movie" value="movie_name.swf" />
        <!--<![endif]-->
        <img src="Images/MyPlaceholder.jpg" alt="This is a placeholder" />
        <!--[if !IE]>-->
    </object>
    <!--<![endif]-->
</object> 
```

# c# - Foreach 循环（包含 LINQ）性能提升

> ID：16219818
> 
> 赞同：0
> 
> 时间：2013-04-25T16:14:59.133
> 
> 标签：c#, windows-phone-7, loops

我希望简化以下包含 foreach 循环的代码，以最小化迭代和/或提高性能，因为每次迭代都会创建 LINQ 和集合：

```
foreach (Contact contact in Contacts) // phone contacts, around 500-1000
{
    IEnumerable<ContactEmailAddress> emails = contact.EmailAddresses; // each has multiple emails

    foreach (Friend parseUser in parseUsers) // could be many thousands
    {
        if (emails.Where(e => e.EmailAddress == parseUser.Email).ToList().Count > 0)
        {                        
            parseUser.AddContact(contact); // function call

            verifiedUsers.Add(parseUser); // add to my new aggregated list
        }
    }
} 
```

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-25T16:21:23.870

您可以使用可以更有效地搜索的集合，而不是对`emails`集合中的每个项目进行线性搜索，例如：`parseUsers``HashSet`

```
foreach (Contact contact in Contacts) // phone contacts, around 500-1000
{
    HashSet<string> emails = new HashSet<string>(
        contact.EmailAddresses.Select(e => e.EmailAddress));

    foreach (Friend parseUser in parseUsers) // could be many thousands
    {
        if(emails.Contains(parseUser.Email))
        {
            parseUser.AddContact(contact); // function call

            verifiedUsers.Add(parseUser); // add to my new aggregated list
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T16:48:25.803

没有提高很多性能，但提高了可读性：

```
foreach (Friend parseUser in parseUsers) // could be many thousands
{
    var filterContacts = Contacts.Where(contact =>
                              contact.EmailAddresses.Contains(parseUser.Email));
    if (filterContact.Any())
    {
        parseUser.AddContacts(filterContacts);
        verifiedUsers.Add(parseUser);
    }
} 
```

# ios - Replicate groups screen split iOS (when you open an apps folder)

> ID：16219819
> 
> 赞同：-2
> 
> 时间：2013-04-25T16:15:01.627
> 
> 标签：ios

When you press on a group on the iPhone, the screen splits, and opens up a black background to show contents. How is this done (structurally, animations, multiple images???)

I figured it is some sort of animation moving the image up or down, but that foesn't account for cutting the image in two.

Thanks for the help, just getting started with animations

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T16:32:09.340

你可能正在寻找这样的东西：

[https://github.com/jwilling/JWFolders](https://github.com/jwilling/JWFolders)

# jquery - Does jQuery .on("click") always run before href fires?

> ID：16219822
> 
> 赞同：22
> 
> 时间：2013-04-25T16:15:14.797
> 
> 标签：jquery

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-04-25T16:19:06.773

是的，您的处理程序将始终首先运行。例如，这就是允许您在必要时取消默认行为（导航到 href url）的原因

```
$("a").on("click", function (e) {
   e.preventDefault(); // --> if this handle didn't run first, this wouldn't work
   doSomething();
}); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-25T16:19:17.437

是的，它确实。如果您不希望触发 href，您可以调用`e.preventDefault();`并且浏览器不会跟随该链接。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-03-04T15:24:49.877

是的，但只有在第一个之前运行的部分`await`：

```
$("a").on("click", async function(e) {
  example(); // this will always run

  await Promise.resolve();

  example3(); // this may not run, as it is after the first `await`, and it is after nagivation
  e.preventDefault(); // this does not work, as it is after the first `await`
}); 
```

# magento - How to get the tax amount in the thank you page in magento

> ID：16219824
> 
> 赞同：4
> 
> 时间：2013-04-25T16:15:18.883
> 
> 标签：magento, checkout, subtotal

I am trying to get the tax amount to deduct from the total amount or just get the bare subtotal amount so i can put it in an affiliate link but I am not being able to get the tax amount or bare subtotal in the last thank you page after the customer clicks the place order button. I tried:

```
 <?php echo $_product->getData('tax_amount'); ?> 
```

and

```
 $totalItemsInCart = Mage::helper('checkout/cart')->getItemsCount(); //total items in cart
$totals = Mage::getSingleton('checkout/session')->getQuote()->getTotals(); //Total object
$subtotal = round($totals["subtotal"]->getValue()); //Subtotal value
$grandtotal = round($totals["grand_total"]->getValue()); //Grandtotal value

if(isset($totals['tax']) && $totals['tax']->getValue()) {
    $tax = round($totals['tax']->getValue()); //Tax value if present
} else {
    $tax = '';
}

echo $tax; 
```

but with no luck; I could not get the tax amount I could just get the subtotal with the tax amount.

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-04-25T19:33:48.223

```
Mage::helper('checkout')->getQuote()->getShippingAddress()->getData('tax_amount') 
```

在这里你会得到你的税额

# asp.net - Captcha Image 在本地主机上工作，但在网络服务器上不工作

> ID：16219825
> 
> 赞同：0
> 
> 时间：2013-04-25T16:15:19.973
> 
> 标签：asp.net, vb.net, visual-studio-2010, captcha

我正在尝试在 UpdatePanel 中使用自定义文本验证码。它在本地主机上运行良好，但是当我将它部署到网络服务器时它没有显示。我正在使用 VS 2010 - vb.net 代码和 asp.net 4.0 和 IIS 6.0 在网络服务器上。这是我的代码：

```
 Private Function GenerateRandomCode() As String 

  'Generate a random number for the CAPTCHA image 
    Dim s As String = "" 
    For i As Integer = 0 To 5 
        s = s + Me.rand.Next(10).ToString() 
    Next 
    Return s 

End Function 

Public Sub SetCaptcha() 
    'Create a new captcha image 
    Me.Session("CaptchaImageText") = GenerateRandomCode() 
    'append current date to image url to assure loading of new image 
    Me.lblResult.ImageUrl = "GetImage.aspx?" + DateTime.Now.ToString() 
End Sub 

Partial Class GetImage 
Inherits System.Web.UI.Page 
Private Sub Page_Load(ByVal sender As Object, ByVal e As System.EventArgs) Handles MyBase.Load 

    Response.Cache.SetCacheability(HttpCacheability.NoCache) 
    'Create a CAPTCHA image using the text stored in the Session object. 
    Dim ci As New CaptchaImage.CaptchaImage(Me.Session("CaptchaImageText"), 200, 50, "Century Schoolbook") 

    Me.Response.Clear() 
    Me.Response.ContentType = "image/png" 

    ci.Image.Save(Me.Response.OutputStream, System.Drawing.Imaging.ImageFormat.Jpeg) 

    ci.Dispose() 
End Sub 

End Class

enter code here 
```

# python - 将特定xml标记的值插入python元组

> ID：16219826
> 
> 赞同：0
> 
> 时间：2013-04-25T16:15:21.127
> 
> 标签：python, xml

## 下面是 xml 文件：Results.xml

```
<?xml version="1.0" ?>
<Combinations>
    <Mode>PC</Mode>
    <Category>ADULT</Category>
    <Combination>
        <Parameter>
            <PEEP>1.0</PEEP>
            <Result>true</Result>
        </Parameter>
        <Parameter>
            <CMV_FREQ>4.0</CMV_FREQ>
            <Result>false</Result>
        </Parameter>
    </Combination>
</Combination> 
```

## Python代码：

```
import xml.etree.ElementTree as ET

tree = ET.parse('Results.xml')    
root = tree.getroot()

mode = root.find('Mode').text
category = root.find('Category').text
print mode, category

for combin in root.findall('Combination'):
    peep = rr = []
    for param in combin.getiterator('Parameter'):
    peep.append(((param.get('PEEP'), param.find('PEEP').text), param.find('Result').text))
    rr.append(((param.get('CMV_FREQ'), param.find('CMV_FREQ').text), param.find('Result').text))
    print peep, rr 
```

## 错误：

```
Traceback (most recent call last):
  File "/home/AlAhAb65/workspace/python_code/prac1.py", line 59, in <module>
    rr.append(((param.get('CMV_FREQ'), param.find('CMV_FREQ').text), param.find('Result').text))
AttributeError: 'NoneType' object has no attribute 'text' 
```

基本上我想从 xml 标签中获取值到变量内部，如下所示：

```
peep = ((PEEP, 1.0), true)        # I want to check the tag before enter value and corresponding true will be insert into variable
rr   = ((CMV_FREQ, 4.0), false) 
```

请在这方面帮助我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T17:05:37.520

您遇到的问题是在第一个标签内您没有 CMV_FREQ 所以当您尝试使用它时它会失败：

```
>>> for combin in root.findall('Combination'):
...    for param in  combin.getiterator('Parameter'):
...        param.get('CMV_FREQ').text
... 
Traceback (most recent call last):
  File "<stdin>", line 3, in <module>
AttributeError: 'NoneType' object has no attribute 'text' 
```

如果你想拥有上面的东西，你需要做：

```
 for combin in root.findall('Combination'):
    peep = []
    rr = []
    print 1
    for param in combin.getiterator('Parameter'):
      if param.find('PEEP') is not None: ##This will check if PEEP tag exists
         peep.append(((param.get('PEEP'), param.find('PEEP').text), param.find('Result').text))
      elif  param.find('CMV_FREQ') is not None:##This will check if CMV_FREQ tag exists
         rr.append(((param.get('CMV_FREQ'), param.find('CMV_FREQ').text), param.find('Result').text))
    print peep, rr 
```

另一个问题 peep = rr = [] 使 peep == rr 因此当您更改 rr 时，如果您保留代码，则 peep 也会更新，因为结果应该是

```
[((None, '1.0'), 'true'), ((None, '4.0'), 'false')] [((None, '1.0'), 'true'), ((None, '4.0'), 'false')] 
```

代替：

```
[((None, '1.0'), 'true')] [((None, '4.0'), 'false')] 
```

# cobol - Call function in COBOL more than once

> ID：16219828
> 
> 赞同：1
> 
> 时间：2013-04-25T16:15:31.540
> 
> 标签：cobol, gnucobol, cobol85

I have my main calling two functions. The second function called (Decrypt) calls the first function (Encrypt) inside of it. So here Encrypt is being called twice. Once in the main, and then once inside of Decrypt.

The issue is that it refuses to work this way. Once Encrypt gets used in the main, I can't use Encrypt again anywhere~ in the program. Its like the variables are still in use and I can't pass it new ones.

For example, if I remove Encrypt from the main function and ONLY call Decrypt - it works fine. I can't figure out why.

```
IDENTIFICATION DIVISION.
PROGRAM-ID. CAESER-1-CIPHER.
DATA DIVISION.
PROCEDURE DIVISION
CALL 'ENCRYPT' USING BY CONTENT INPUTE CIPHERE.
CALL 'DECRYPT' USING BY CONTENT INPUTD CIPHERD.
STOP RUN.

IDENTIFICATION DIVISION.
PROGRAM-ID. ENCRYPT.
DATA DIVISION.
PROCEDURE DIVISION BLAH BLAH
BLAH BLAH COMPUTE
END PROGRAM ENCRYPT.

IDENTIFICATION DIVISION.
PROGRAM-ID. DECRYPT.
DATA DIVISION.
PROCEDURE DIVISION BLAH BLAH
CALL 'ENCRYPT' USING BY CONTENT BLAH BLAH
EXIT PROGRAM.
END PROGRAM DECRYPT. 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T20:41:25.443

如果您的编译器支持它，请查看 LOCAL-STORAGE SECTION。

每次调用子程序时，这将“自动”将所有值设置为初始状态。

它们是子程序，而不是函数。

NealB 的 IS INITIAL 建议会起作用。LOCAL-STORAGE 的优势在于当您拥有“混合”事物时：您希望在 CALL 之间保留其价值，您使用 WORKING-STORAGE，以及您特别希望重置为初始状态的其他人，这您在 LOCAL-STORAGE 中使用 VALUE 子句定义。

IS INITIAL 所做的处理等同于对 LOCAL-STORAGE 的处理。每次调用程序名时，WORKING-STORAGE 中具有 VALUE 子句的所有内容都设置为该值。没有 VALUE 子句的字段具有“未定义”的内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T20:41:10.897

我不确定我是否完全遵循您的问题，我会期待更多的问题`DECRYPT`。这就是为什么...

Program`SER-1-CIPHER`包含两个嵌套的程序：`ENCRYPT`和`DECRYPT`. 在您声明`ENCRYPT`和`DECRYPT`作为`COMMON`程序之前，它们不能“看到”彼此，因为只有更高嵌套级别的程序（例如`SER-1-CIPHER`）才能“看到”嵌套在其中的程序。这在嵌套程序的 Open Cobol Programmers Guide 中有解释。

尝试将嵌套程序声明为：

```
 PROGRAM-ID. ENCRYPT IS COMMON.
 PROGRAM-ID. DECRYPT IS COMMON. 
```

这样程序 DECRYPT 将能够 CALL ENCRYPT。

接下来，我鼓励您`GOBACK`在将控制`STOP RUN`权`EXIT PROGRAM`返回给操作系统或调用程序时使用。OpenCobol Programmers Guide 也提出了这个建议。

最后，每个子程序都应包含作为其最后一条语句的 a `GOBACK`。`ENCRYPT`如果没有某种明确的 return 语句，我不确定行为是什么。您的实际程序可能有这个，但您问题中的代码示例没有。

Open Cobol 似乎对嵌套程序之间的递归没有任何限制，但某些版本的 COBOL 不允许这样做（例如 IBM Enterprise COBOL）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-25T20:11:53.483

在 encrypt 函数中实例化的数据仍然存在。它们需要重新设置。因此，Encrypt 中的任何数量的 PIC 都需要在函数开始时设置为 0，否则它们仍然会存储数据。

例子：

```
COMPUTE MYNUM1 = 0
COMPUTE MYNUM2 = 0
COMPUTE MYNUM3 = 0
MOVE '' TO MYVARSTRING 
```

# c# - Attitude.RotationMatrix 与 Matrix.CreateFromYawPitchRoll()

> ID：16219829
> 
> 赞同：1
> 
> 时间：2013-04-25T16:15:33.010
> 
> 标签：c#, windows-phone-7, xna, windows-phone-8, windows-phone

运动传感器返回的 RotationMatrix 不应该等于使用来自同一运动读数的 Yaw、Pitch 和 Roll 值创建的矩阵吗？

具有以下代码：

```
MotionReading mr = motion.CurrentValue;
Matrix m1 = mr.Attitude.RotationMatrix;
var yaw = mr.Attitude.Yaw;
var pitch = mr.Attitude.Pitch;
var roll = mr.Attitude.Roll;
Matrix m2 = Matrix.CreateFromYawPitchRoll(yaw, pitch, roll); 
```

m1和m2不应该相等吗？我在那里想念什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-20T14:05:45.543

你的怎么`RotationMatrix`计算的？
如果您在多个轴上旋转模型，有时可能会出现第一次旋转实际上旋转另一个 2 轴的问题，也许这就是为什么`CreateFromYawPitchRoll`给您一个`Matrix`不同于您的`RotationMatrix`.
我建议你使用`CreateFormYawPitchRoll`，或者你可以尝试使用`Quaternions`。

# java - JDBC如何在自增字段中插入记录

> ID：16219832
> 
> 赞同：2
> 
> 时间：2013-04-25T16:15:36.217
> 
> 标签：java, jdbc

我正在使用 Postgresql 和 Mysql 的自动增量等效 SERIAL。我的表结构如下：

```
id | name | description 
```

如何插入使用结果集的新记录（实际上是 CachedRowSet，但它是相似的）？我试过这个：

```
rs.moveToInsertRow();
rs.updateString("name", "x");
rs.updateString("description", "xxx");
rs.insertRow();
rs.moveToCurrentRow(); 
```

但它不起作用。我得到一个例外。这是因为我没有指定 id 列值。但是我该如何指定呢？没有任何选项可以让 JDBC 自动插入它吗？或者在插入记录之前检索生成的键的某种方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T16:19:29.373

要创建可更新的结果集，您必须在选择列表中指定主键：

```
 // Create a statement that will return updatable result sets
    Statement stmt = connection.createStatement(
                ResultSet.TYPE_SCROLL_SENSITIVE, 
                ResultSet.CONCUR_UPDATABLE);

    //Primary key / auto-increment 'id' must be specified 
    //so that the result set is updatable
    ResultSet rs = stmt.executeQuery(
                "SELECT id, name, description FROM yourtable"); 
```

# java - 互联网服务提供商定位器

> ID：16219833
> 
> 赞同：0
> 
> 时间：2013-04-25T16:15:36.503
> 
> 标签：java, android, function

有没有什么功能可以获取您的互联网服务提供商信息？

换句话说，当你在任何地方连接到 Wi-Fi 甚至是 3G 时；你能通过一个函数获得你所连接的网络的 ISP（例如 IDM、terranet、cyberia 等）吗（我使用了 NETWORK_PROVIDER，但它可以做到这一点）。

我的 B 计划是追踪我所在国家/地区的每个供应商并分析结果；但是如果有一个可以获取此类信息的功能会有所帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T16:31:37.477

`TelephonyManager`为此请参阅课程。此类提供对有关设备上的电话服务的信息的访问。应用程序可以使用此类中的方法来确定电话服务和状态，以及访问某些类型的用户信息。应用程序还可以注册一个侦听器以接收电话状态更改的通知。

[开发者 Android 网站](http://developer.android.com/reference/android/telephony/TelephonyManager.html)

这些方法对你有用

```
public String getNetworkOperatorName ()
public String getSimOperatorName () 
```

# java - 在 Java 中使用 + 连接字符串

> ID：16219837
> 
> 赞同：14
> 
> 时间：2013-04-25T16:15:48.737
> 
> 标签：java, string, concatenation

我有一个巨大的字符串如下：

```
String str = "aaaaaaa" 
        + "bbbbbbbb" 
        + "cccccccc" 
    .... 

        + "zzzzzzzz";  // about 200 lines long 
```

是不是很浪费内存？将它放在一条线上或使用它会更好`StringBuilder`吗？这样做是为了创建一个长 sql。

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-04-25T16:19:05.373

不。如果您的所有字符串都是常量（因为它们在您的问题中） ，编译器将*在编译时*执行连接。所以最终的表现比版本*更好。*`StringBuilder`

否则它将使用`StringBuilder`(或`StringBuffer`) 来执行任何*非常量*部分的连接。

所以编译后的版本：

```
String x = "a" + "b"; 
```

应该与以下*内容完全相同*：

```
String x = "ab"; 
```

请注意，“非常量”部分可能意味着您有时可以明智地使用括号获得（非常小的）额外效率。例如：

```
int value = ...;
String x = "a" + value + "b" + "c"; 
```

...效率低于：

```
int value = ...;
String x = "a" + value + ("b" + "c"); 
```

...作为第一个附加`"b"`并且`"c"`分开。高效版本等价于O：

```
int value = ...;
String x = "a" + value + "bc"; 
```

我不记得*曾经*将其用作合法的微优化，但这至少是一个兴趣点。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-25T16:18:50.670

在当前版本的 Java 中，每个`+`（连接）操作都会自动编译为一个操作。但是，如果它在一个循环内，它将为每次迭代创建一个新的，否定它的效果 - 所以你会更好地管理显式。[`StringBuilder`](http://docs.oracle.com/javase/7/docs/api/java/lang/StringBuilder.html) `append()``StringBuilder``StringBuilder`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-25T16:17:14.997

不，编译器会为你优化成`StringBuilder`.

编辑：正如 Louis Wasserman 指出的那样，它还会为您组合字符串文字，因此上面的语句在编译时只是一个字符串。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-25T16:25:27.853

AFAIK JVM 内部有一个字符串池，您创建的每个字符串都存储在那里，丢弃最旧/最少使用的字符串（我不确定它如何选择哪些字符串）。如果你明确地调用 String.intern() 你是在告诉 JVM 将字符串放入池中。

当您使用 + 连接两个字符串时，您最终会在池中得到三个字符串。如果你连接 a + b + c，你最终会得到 5 个字符串 (a, b, ab, c, abc)

至少那是我对旧 JVM 版本的回忆，但 Luiggi 很可能是对的，在较新的版本上它的内部优化

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-25T16:33:16.890

编码：

```
String str = "aaaaaaa" + "bbbbbbbb" + "cccccccc"; 
```

在编译时转换为：

```
String str = (new StringBuilder()).append("aaaaaaa").append("bbbbbbbb").append("cccccccc").toString(); 
```

因此，使用 StringBuilder 似乎没有任何区别。

有一篇非常好的文章将 concat (+) 与 StringBuilder 和 StringBuffer 的性能进行了密切比较，并附有折线图：

[StringBuilder vs StringBuffer vs String.concat - 做对了](http://kaioa.com/node/59)。

# python - 查询 sqlite3 数据库

> ID：16219838
> 
> 赞同：0
> 
> 时间：2013-04-25T16:15:49.397
> 
> 标签：python, sqlite

所以我正在查询一个名为 golfDB 的数据库，它由一个名为 player 的表组成，其中包含 5 个字段：

*   姓名（玩家姓名）
*   totalGross（每轮总分的总和）
*   totalRounds（已玩的回合数）
*   pars（制作的 pars 总数）
*   小鸟（小鸟总数）

我正在处理的功能应该根据他们的平均得分（totalGross/totalRounds）按降序列出玩家。

我不完全确定如何执行此操作，我的代码目前正在将所有组件（玩家、总得分和总回合数）分离到它们自己的列表中。我当时在想，我可以将每个总总分列表项目除以总轮数列表中的每个项目，但我不确定如何将这些分数链接回相应的玩家，以便可以订购它们。

我不知道是否甚至可以这样做，所以有人有任何建议或想法吗？

```
def queryDBplayers(cursor):
    """lists the players in order of their total gross score"""
    cursor.execute('select name, totalGross, totalRounds from players')
    answer= cursor.fetchall()
    players = list()
    for items in answer:
        players.append(items[0])
    totalGrossScore = list()
    for items in answer:
        totalGrossScore.append(items[1])
    totalRoundsScore = list()
    for items in answer:
        totalRoundsScore.append(items[2]) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-25T16:25:47.320

你让这*比*它需要的复杂得多。

首先，我不明白您为什么要使用单独的列表。如果您有一个玩家列表，您可以使用一个关键功能非常简单地对它们进行排序：

```
players.sort(key=lambda p: float(p[1]) / float(p[2])) 
```

但是，你真的不应该在 Python 中这样做。进行排序的最佳位置是在数据库中：

```
SELECT name, totalGross, totalRounds ORDER BY totalGross/totalRounds 
```

与您之前的问题一样，您似乎会从学习一些基本 SQL 中受益。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T16:23:50.810

```
cursor.execute('select name, totalGross, totalRounds from players')
answer= cursor.fetchall()

print sorted(answer,key=lambda x:float(x[1])/float(x[2])) 
```

我认为会起作用......我不知道，但您可能可以制作查询来为您排序

在旁注中，更容易将列分开，就像`col1,col2,col3 = zip(*big_list)`你的情况一样，这将是

```
players,grosses,rounds = zip(*answer) 
```

# android - android上的流媒体错误

> ID：16219840
> 
> 赞同：1
> 
> 时间：2013-04-25T16:15:56.360
> 
> 标签：android

我有这个在互联网上播放广播流的代码，这个代码像：-

```
package com.example.kam;

import java.io.IOException;

import android.os.Bundle;
import android.app.Activity;
import android.view.Menu;

import android.media.AudioManager;
import android.media.MediaPlayer;

public class MainActivity extends Activity {
    public MediaPlayer mp;
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

    }
    protected void onResume (){
        super.onResume();

        mp = new MediaPlayer();
        try {
            mp.setDataSource("http://radio.arabhosters.com:8015/");
        } catch (IllegalArgumentException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (SecurityException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (IllegalStateException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
        mp.setAudioStreamType(AudioManager.STREAM_MUSIC);
        try {
            mp.prepare();
        } catch (IllegalStateException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } //also consider mp.prepareAsync().
        mp.start();
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.main, menu);

        return true;
    }

} 
```

当我运行这段代码时，我看到了这个异常：-

```
04-25 14:11:16.448: E/MediaPlayer(533): Unable to to create media player
04-25 14:11:16.458: W/System.err(533): java.io.IOException: setDataSource failed.: status=0x80000000
04-25 14:11:16.458: W/System.err(533):  at android.media.MediaPlayer.setDataSource(Native Method)
04-25 14:11:16.458: W/System.err(533):  at com.example.kam.MainActivity.onResume(MainActivity.java:26)
04-25 14:11:16.468: W/System.err(533):  at android.app.Instrumentation.callActivityOnResume(Instrumentation.java:1154)
04-25 14:11:16.468: W/System.err(533):  at android.app.Activity.performResume(Activity.java:4539)
04-25 14:11:16.468: W/System.err(533):  at android.app.ActivityThread.performResumeActivity(ActivityThread.java:2433)
04-25 14:11:16.468: W/System.err(533):  at android.app.ActivityThread.handleResumeActivity(ActivityThread.java:2471)
04-25 14:11:16.468: W/System.err(533):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1985)
04-25 14:11:16.478: W/System.err(533):  at android.app.ActivityThread.access$600(ActivityThread.java:122)
04-25 14:11:16.478: W/System.err(533):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1146)
04-25 14:11:16.478: W/System.err(533):  at android.os.Handler.dispatchMessage(Handler.java:99)
04-25 14:11:16.478: W/System.err(533):  at android.os.Looper.loop(Looper.java:137)
04-25 14:11:16.478: W/System.err(533):  at android.app.ActivityThread.main(ActivityThread.java:4340)
04-25 14:11:16.478: W/System.err(533):  at java.lang.reflect.Method.invokeNative(Native Method)
04-25 14:11:16.489: W/System.err(533):  at java.lang.reflect.Method.invoke(Method.java:511)
04-25 14:11:16.489: W/System.err(533):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
04-25 14:11:16.489: W/System.err(533):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
04-25 14:11:16.489: W/System.err(533):  at dalvik.system.NativeStart.main(Native Method)
04-25 14:11:16.489: E/MediaPlayer(533): prepareAsync called in state 1
04-25 14:11:16.489: W/System.err(533): java.lang.IllegalStateException
04-25 14:11:16.499: W/System.err(533):  at android.media.MediaPlayer.prepare(Native Method)
04-25 14:11:16.499: W/System.err(533):  at com.example.kam.MainActivity.onResume(MainActivity.java:42)
04-25 14:11:16.499: W/System.err(533):  at android.app.Instrumentation.callActivityOnResume(Instrumentation.java:1154)
04-25 14:11:16.499: W/System.err(533):  at android.app.Activity.performResume(Activity.java:4539)
04-25 14:11:16.499: W/System.err(533):  at android.app.ActivityThread.performResumeActivity(ActivityThread.java:2433)
04-25 14:11:16.499: W/System.err(533):  at android.app.ActivityThread.handleResumeActivity(ActivityThread.java:2471)
04-25 14:11:16.509: W/System.err(533):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1985)
04-25 14:11:16.509: W/System.err(533):  at android.app.ActivityThread.access$600(ActivityThread.java:122)
04-25 14:11:16.509: W/System.err(533):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1146)
04-25 14:11:16.509: W/System.err(533):  at android.os.Handler.dispatchMessage(Handler.java:99)
04-25 14:11:16.509: W/System.err(533):  at android.os.Looper.loop(Looper.java:137)
04-25 14:11:16.509: W/System.err(533):  at android.app.ActivityThread.main(ActivityThread.java:4340)
04-25 14:11:16.509: W/System.err(533):  at java.lang.reflect.Method.invokeNative(Native Method)
04-25 14:11:16.509: W/System.err(533):  at java.lang.reflect.Method.invoke(Method.java:511)
04-25 14:11:16.519: W/System.err(533):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
04-25 14:11:16.519: W/System.err(533):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
04-25 14:11:16.519: W/System.err(533):  at dalvik.system.NativeStart.main(Native Method)
04-25 14:11:16.519: E/MediaPlayer(533): start called in state 1
04-25 14:11:16.519: E/MediaPlayer(533): error (-38, 0)
04-25 14:11:16.669: D/gralloc_goldfish(533): Emulator without GPU emulation detected. 
```

但是我将此代码导入另一台PC，它会毫无问题地播放。

我的错误在哪里

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T16:48:51.563

我的猜测是你永远不会调用`release()`你的`MediaPlayer`. `logcat`解决您的问题的一种简单方法（至少如果我阅读正确的话）是`reset()`在您的实例化之前拨打电话。像这样：

```
mp.reset();
mp.setDataSource("http://radio.arabhosters.com:8015/"); 
```

不过有一件事：您应该阅读整个[MediaPlayer 状态图](http://developer.android.com/reference/android/media/MediaPlayer.html#StateDiagram)以真正了解您应该做什么。

# matlab - Error building MEX-files (MATLAB 2012a) on Kubuntu '/usr/bin/ld: cannot find -lstdc++'

> ID：16219841
> 
> 赞同：2
> 
> 时间：2013-04-25T16:15:57.660
> 
> 标签：matlab, 64-bit, mex, kubuntu

I'm trying to build a C program on Matlab 2012a, through the command:

> mex mat_trans2.c

And I'm getting this error:

```
/usr/bin/ld: cannot find -lstdc++
collect2: ld returned 1 exit status

    mex: link of ' "mat_trans2.mexa64"' failed.

Error using mex (line 206)
Unable to complete successfully. 
```

Some time ago I was able to build .c files, I don't know what is happening now! Maybe something has changed after a system upgrade on my Kubuntu 12.04 64 bit.

Is there someone who know how to solve this?

Thank you!!!!

Edit: I edit the message to reply at Shai. Running:

> mex -v mat_trans2.c

I get:

```
**************************************************************************
  Warning: Neither -compatibleArrayDims nor -largeArrayDims is selected. 
           Using -compatibleArrayDims. In the future, MATLAB will require
           the use of -largeArrayDims and remove the -compatibleArrayDims
           option. For more information, see:
           http://www.mathworks.com/help/techdoc/matlab_external/bsflnue-1.html
**************************************************************************

/home/mafalda/MATLAB/bin/mex: 1: /home/mafalda/MATLAB/bin/util/oscheck.sh: /lib64/libc.so.6: not found
/home/mafalda/MATLAB/bin/mex: 1: /home/mafalda/MATLAB/bin/util/oscheck.sh: /lib64/libc.so.6: not found
-> mexopts.sh sourced from directory (DIR = $PREF_DIR)
   FILE = /home/mafalda/.matlab/R2012a/mexopts.sh
----------------------------------------------------------------
->    MATLAB                = /home/mafalda/MATLAB
->    CC                    = gcc-4.4
->    CC flags:
         CFLAGS             = -ansi -D_GNU_SOURCE  -fexceptions -fPIC -fno-omit-frame-pointer -pthread
         CDEBUGFLAGS        = -g
         COPTIMFLAGS        = -O -DNDEBUG
         CLIBS              = -Wl,-rpath-link,/home/mafalda/MATLAB/bin/glnxa64 -L/home/mafalda/MATLAB/bin/glnxa64 -lmx -lmex -lmat -lm -lstdc++
         arguments          =  -DMX_COMPAT_32
->    CXX                   = g++-4.4
->    CXX flags:
         CXXFLAGS           = -ansi -D_GNU_SOURCE -fPIC -fno-omit-frame-pointer -pthread
         CXXDEBUGFLAGS      = -g
         CXXOPTIMFLAGS      = -O -DNDEBUG
         CXXLIBS            = -Wl,-rpath-link,/home/mafalda/MATLAB/bin/glnxa64 -L/home/mafalda/MATLAB/bin/glnxa64 -lmx -lmex -lmat -lm
         arguments          =  -DMX_COMPAT_32
->    FC                    = gfortran-4.4
->    FC flags:
         FFLAGS             = -fexceptions -fbackslash -fPIC -fno-omit-frame-pointer
         FDEBUGFLAGS        = -g
         FOPTIMFLAGS        = -O
         FLIBS              = -Wl,-rpath-link,/home/mafalda/MATLAB/bin/glnxa64 -L/home/mafalda/MATLAB/bin/glnxa64 -lmx -lmex -lmat -lm
         arguments          =  -DMX_COMPAT_32
->    LD                    = gcc-4.4
->    Link flags:
         LDFLAGS            = -pthread -shared -Wl,--version-script,/home/mafalda/MATLAB/extern/lib/glnxa64/mexFunction.map -Wl,--no-undefined
         LDDEBUGFLAGS       = -g
         LDOPTIMFLAGS       = -O
         LDEXTENSION        = .mexa64
         arguments          = 
->    LDCXX                 = 
->    Link flags:
         LDCXXFLAGS         = 
         LDCXXDEBUGFLAGS    = 
         LDCXXOPTIMFLAGS    = 
         LDCXXEXTENSION     = 
         arguments          = 
----------------------------------------------------------------

-> gcc-4.4 -c  -I/home/mafalda/MATLAB/extern/include -I/home/mafalda/MATLAB/simulink/include -DMATLAB_MEX_FILE -ansi -D_GNU_SOURCE  -fexceptions -fPIC -fno-omit-frame-pointer -pthread  -DMX_COMPAT_32 -O -DNDEBUG  "mat_trans2.c"

-> gcc-4.4 -O -pthread -shared -Wl,--version-script,/home/mafalda/MATLAB/extern/lib/glnxa64/mexFunction.map -Wl,--no-undefined -o  "mat_trans2.mexa64"  mat_trans2.o  -Wl,-rpath-link,/home/mafalda/MATLAB/bin/glnxa64 -L/home/mafalda/MATLAB/bin/glnxa64 -lmx -lmex -lmat -lm -lstdc++

/usr/bin/ld: cannot find -lstdc++
collect2: ld returned 1 exit status

    mex: link of ' "mat_trans2.mexa64"' failed.

Error using mex (line 206)
Unable to complete successfully. 
```

I would say the problem is that /lib64/libc.so.6: cannot be found

Plus:

```
locate libstdc++.so.6
/home/mafalda/MATLAB/bin/glnxa64/libstdc++.so.6
/home/mafalda/MATLAB/bin/glnxa64/libstdc++.so.6.0.13
/home/mafalda/MATLAB/sys/os/glnxa64/libstdc++.so.6
/home/mafalda/MATLAB/sys/os/glnxa64/libstdc++.so.6.0.16
/home/mafalda/MATLAB/toolbox/edalink/foundation/hdllink/scripts/linux32/libstdc++.so.6
/home/mafalda/MATLAB/toolbox/edalink/foundation/hdllink/scripts/linux32/libstdc++.so.6.0.13
/home/mafalda/MATLAB/toolbox/sldv/sldv/polyspace-dvo/lib/x86-linux/libstdc++.so.6
/usr/lib/i386-linux-gnu/libstdc++.so.6
/usr/lib/i386-linux-gnu/libstdc++.so.6.0.16
/usr/lib/x86_64-linux-gnu/libstdc++.so.6
/usr/lib/x86_64-linux-gnu/libstdc++.so.6.0.16
/usr/lib32/libstdc++.so.6
/usr/lib32/libstdc++.so.6.0.16 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T16:54:55.863

尝试使用以下命令启动 MATLAB：

```
$ LD_PRELOAD=/usr/lib/libstdc++.so.6 matlab 
```

（或系统上的实际位置）。

您还可以创建一个`/lib64/libc.so.6`指向它的符号链接

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-29T16:06:01.053

简单的解决方案，我没有检查最明显的事情：

> $ sudo apt-get install libstdc++6-4.4-dev

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-11-04T00:34:44.220

我遇到了同样的错误，经过数小时尝试不同的解决方案后，看起来我发现了如何在我的情况下解决它。`libstdc++.so.6`解决方案是简单地从to创建一个符号链接`libstdc++.so`。所以： cd 到`/usr/lib/x86_64-linux-gnu/`并运行`sudo ln -s libstdc++.so.6 libstdc++.so`. 我希望它也适用于您的情况。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-07-27T14:24:12.000

尝试安装软件包：

sudo yum install libstdc++-static

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-06-06T14:49:49.333

由于我没有评论的声誉，我想说@mafalda 的回答对我有用。我只需要在他的回答中将 4.4 替换为 4.7，因为我使用的是 gcc-4.7 编译器。即使是最新版本的 MATLAB（截至目前的 R2016a）也仅支持 gcc-4.7.x（而不是 4.8.x（目前是最新版本）），我想指出如果有人使用这个答案，只需将 4.4 替换为 4 .x 其中 x 取决于您的 gcc 编译器版本。

# joomla - Joomla 将文件夹限制为用户组以供下载 - 自定义

> ID：16219842
> 
> 赞同：-1
> 
> 时间：2013-04-25T16:16:00.713
> 
> 标签：joomla, permissions, download

我对此非常满意。我有一个会员网站，其中包含 Akeeba 订阅。一旦用户登录，他就可以通过下载链接访问文章的其余部分。问题是下载链接只是一个公共网址，没有任何限制。

要下载的文件位于根目录中。

我尝试了很多插件和组件，但没有人可以限制文件夹，只有组件。正在考虑使用 htacces 文件来访问用户组，但似乎不可能。具有restrictewd 访问权限的脚本可以工作，但我的问题是可下载的文件有数千个，所以我只是通过一个ftp 帐户填充目录，然后我通过一个XLS 文件与我尝试设置的fileuplader 相关联一个媒体文件夹，用于限制对用户组的访问……但这也是一场噩梦……我在 joomla 论坛中只发现了未解决的主题。希望这不是我的情况。

它看起来没有那么复杂......但我认为我很遥远。

请各位。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-26T01:28:35.660

如果您已经在使用 Akeeba 订阅，为什么不也使用[Akeeba 发布系统](http://extensions.joomla.org/extensions/directory-a-documentation/downloads/16825)- 虽然它最初是为软件分发而设计的，但从那时起它已经发展了很多，并且是我们用于访问受控文件的首选产品。

正如您在 Akeeba（[产品信息](https://www.akeebabackup.com/products/akeeba-release-system.html)、[文档](https://www.akeebabackup.com/documentation/arsdocumentation.html)）网站上看到的那样，您可以将文件限制在用户组（例如，当用户订阅时您将其放入的组）。该软件还具有与 Akeeba Subscriptions 和 Akeeba Release System 配合使用的插件，允许您控制对文件或文章部分的访问。

ARS 与 AkSubs 一样是开源和免费的。

# mysql - 在 Mysql 查询中使用 IF

> ID：16219844
> 
> 赞同：1
> 
> 时间：2013-04-25T16:16:19.030
> 
> 标签：mysql, conditional-operator

我有两个包含数百万条记录的表，我需要将它们加入以显示不同语言的结果。我希望使用带有 IF 条件的查询来创建视图，但我无法理解哪种方法是正确的。

我需要做的是：如果以下选择对单行有 NULL （换句话说，该行没有德文翻译）......

SELECT one, two FROM tableA A LEFT JOIN tableB B ON (A.id=B.id) WHERE language='de' order by xyz

...然后将英文版本用于同一行，然后选择：

SELECT one, two FROM tableA A LEFT JOIN tableB B ON (A.id=B.id) WHERE language='en' order by xyz

谢谢！卢卡

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T16:39:09.153

您的查询很难理解，因为您没有别名。我假设它的结构是这样的：

```
select a.one. b.two
from tableA a left join
     tableb b
     on a.id = b.id
where b.language = 'de'
order by xyz 
```

以下提供了应该在 MySQL 中工作的逻辑：

```
SELECT a.one, 
       (case when (select COUNT(*) from b where b.id = a.id and b.language = 'de' and b.two is null) = 0
             then bde.two
             else bend.two
        end) as two
FROM tableA A LEFT JOIN
     tableB Bde
     ON (A.id=B.id) and
        bde.language='de' left join
     tableB ben
     on ben.language = 'en'
order by xyz 
```

这是假设`NULL`值存储在 B 表中。如果它通过连接丢失，那么它会有点困难，例如：

```
SELECT a.one, 
       (case when (select COUNT(*) from a a2 join b b2 on a2.id = b2.id and b2.language = 'de' and b2.two is null) = 0
             then bde.two
             else bend.two
        end) as two
FROM tableA A LEFT JOIN
     tableB Bde
     ON (A.id=B.id) and
        bde.language='de' left join
     tableB ben
     on ben.language = 'en'
order by xyz 
```

# c# - How to bind repeater ItemDataBound, to update on dropdownlist SelectedIndexChanged

> ID：16219846
> 
> 赞同：5
> 
> 时间：2013-04-25T16:16:29.453
> 
> 标签：c#, asp.net, drop-down-menu, repeater, itemdatabound

Im a rookie on ASP.Net and been stuck for this for a while.

Everytime the index of my dropdown changes i want to fill my repeater with objects.

This works fine, but when im selecting a value in my dropdown that dosent contain any objects the old objects from the last call is still there, i want them to disappear.

I've tried to clear the items from the repeater using Datasource=null and then do a Databind again, but that dosent work.

I think it has with the ItemDataBound event on my repeater. The ItemDatabound is not called when i select a value in the dropsdownlist that dosent contain any objects.

**ItemDataBound CODE:**

```
protected void rptStudentQuestion_ItemDataBound(object sender, RepeaterItemEventArgs e)
{
    if (e.Item.ItemType == ListItemType.Item || e.Item.ItemType == ListItemType.AlternatingItem)
    {
        Label lblAnswer = e.Item.FindControl("lblAnswer") as Label;
        TextBox tbxAnswer = e.Item.FindControl("tbxAnswer") as TextBox;
        Button btnSend = e.Item.FindControl("btnSend") as Button;
        if (lblAnswer.Text == "" || lblAnswer == null)
        {
            lblAnswer.Visible = false;
            lblAnswer.Enabled = false;
            tbxAnswer.Visible = true;
            tbxAnswer.Enabled = true;
            btnSend.Enabled = true;
            btnSend.Visible = true;
        }
        else
        {
            lblAnswer.Visible = true;
            lblAnswer.Enabled = true;
            tbxAnswer.Visible = false;
            tbxAnswer.Enabled = false;
            btnSend.Enabled = false;
            btnSend.Visible = false;

        }
    }
} 
```

**OnSelectedIndexChanged CODE:**

```
protected void DrpdwnLectureName_SelectedIndexChanged(object sender, EventArgs e)
{
    string SelectedLecture = DrpdwnLectureName.SelectedValue;
    string user = Server.HtmlEncode(Context.User.Identity.Name).ToString();
    using (var client = new WCFReference.SRSServiceClient())
    {
        var LectureList = client.GetTeacherLecture(user);
        foreach (var item in LectureList)
        {
            if (item.LectureName == DrpdwnLectureName.SelectedValue)
            {
                var list = client.GetStudentQuestions(item.LectureID, user);
                rptStudentQuestion.DataSource = list;
                rptStudentQuestion.DataBind();
            }
        }               

    }

} 
```

**Markup CODE:**

```
<asp:UpdatePanel ID="UpdatePanel1" runat="server">
        <ContentTemplate>
            <asp:DropDownList ID="DrpdwnLectureName" AutoPostBack="True" runat="server" OnSelectedIndexChanged="DrpdwnLectureName_SelectedIndexChanged"></asp:DropDownList>
            <asp:Panel ID="PrintPanel" runat="server">
                <asp:Label ID="Label1" runat="server" Text="Gör en .pdf på besvarade frågor"></asp:Label>
                <asp:Button ID="btnDoPdf" runat="server" Text="Button" OnClick="btnDoPdf_Click" />
            </asp:Panel>
            <asp:Repeater ID="rptStudentQuestion" runat="server" OnItemCommand="rptStudentQuestion_ItemCommand" OnItemDataBound="rptStudentQuestion_ItemDataBound">
                <ItemTemplate>
                    <asp:Label ID="lblQuestion" runat="server" Text='<%# Eval("StudentQuestionQuestion") %>'></asp:Label>
                    <br />
                    <asp:TextBox ID="tbxAnswer" runat="server" Visible="false"></asp:TextBox>
                    <asp:Button ID="btnSend" CommandName="SendAnswer" runat="server" Text="Skicka svar" CommandArgument='<%# Eval("StudentQuestionID") %>' />
                    <br />
                    <asp:Label ID="lblAnswer" runat="server" Text='<%# Eval("StudentQuestionAnswer") %>' Visible="false"></asp:Label>
                    <br />
                </ItemTemplate>
            </asp:Repeater>
        </ContentTemplate>
    </asp:UpdatePanel> 
```

Updated Code as Requested(Snippet from DrpdwnLectureName_SelectedIndexChanged)

```
if (item.LectureName == DrpdwnLectureName.SelectedValue)
{
    var list = client.GetStudentQuestions(item.LectureID, user);
    if (list.Count() > 0)
    {
        rptStudentQuestion.Visible = true;
        rptStudentQuestion.DataSource = list;
        rptStudentQuestion.DataBind();
    }
    else
    {
        rptStudentQuestion.Visible = false; // In debug it preforms this, but nothing happens.                            
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-09-23T19:02:34.790

这不是解决方案，但可以解决您的更新面板更新问题。您可以通过以下方式手动控制 updatepanel 更新：

```
<asp:UpdatePanel ID="UpdatePanel1" runat="server" UpdateMode="Conditional" ChildrenAsTriggers="false">
        <ContentTemplate>
            <asp:DropDownList ID="DrpdwnLectureName" AutoPostBack="True" runat="server" OnSelectedIndexChanged="DrpdwnLectureName_SelectedIndexChanged"></asp:DropDownList>
            <asp:Panel ID="PrintPanel" runat="server">
                <asp:Label ID="Label1" runat="server" Text="Gör en .pdf på besvarade frågor"></asp:Label>
                <asp:Button ID="btnDoPdf" runat="server" Text="Button" OnClick="btnDoPdf_Click" />
            </asp:Panel>
            <asp:Repeater ID="rptStudentQuestion" runat="server" OnItemCommand="rptStudentQuestion_ItemCommand" OnItemDataBound="rptStudentQuestion_ItemDataBound">
                <ItemTemplate>
                    <asp:Label ID="lblQuestion" runat="server" Text='<%# Eval("StudentQuestionQuestion") %>'></asp:Label>
                    <br />
                    <asp:TextBox ID="tbxAnswer" runat="server" Visible="false"></asp:TextBox>
                    <asp:Button ID="btnSend" CommandName="SendAnswer" runat="server" Text="Skicka svar" CommandArgument='<%# Eval("StudentQuestionID") %>' />
                    <br />
                    <asp:Label ID="lblAnswer" runat="server" Text='<%# Eval("StudentQuestionAnswer") %>' Visible="false"></asp:Label>
                    <br />
                </ItemTemplate>
            </asp:Repeater>
        </ContentTemplate>
        <Triggers>
            <asp:AsyncPostBackTrigger ControlID="DrpdwnLectureName" />
        </Triggers>
    </asp:UpdatePanel> 
```

当你想在代码中更新面板时，你调用：“UpdatePanel1.Update()”

```
if (item.LectureName == DrpdwnLectureName.SelectedValue)
{
    var list = client.GetStudentQuestions(item.LectureID, user);
    if (list.Count() > 0)
    {
        rptStudentQuestion.Visible = true;
        rptStudentQuestion.DataSource = list;
        rptStudentQuestion.DataBind();
    }
    else
    {
        rptStudentQuestion.Visible = false; // In debug it preforms this, but nothing happens.     
        UpdatePanel1.Update() //This 'force' updatepanel updating        
    }
} 
```

# asp.net-mvc-3 - 我的路线和行动有什么问题？

> ID：16219847
> 
> 赞同：-1
> 
> 时间：2013-04-25T16:16:33.337
> 
> 标签：asp.net-mvc-3, entity-framework, razor, entity

我最近问了一个问题，基于如何基于包含以下内容的内容表创建页面：**标题**和**内容**。据我了解，我在[给出的答案中](https://stackoverflow.com/questions/16217901/generate-pages-based-on-title-and-content-in-asp-net-mvc3/16218201?noredirect=1#comment23194601_16218201)遵循了这些步骤。

我创建了一条这样的路线：

```
 public static void RegisterRoutes(RouteCollection routes)
    {
        routes.IgnoreRoute("{resource}.axd/{*pathInfo}");

        routes.MapRoute(
            "Default", // Route name
            "{controller}/{action}/{id}", // URL with parameters
            new { controller = "Home", action = "Index", id = UrlParameter.Optional } // Parameter defaults
        );

        routes.MapRoute(
            "ContentManagement",
            "{title}",
            new { controller = "ContentManagement", action = "Index", title = "{title}" }
        );

    } 
```

我假设我可以做这样的路线？在哪里可以设置多条路线？我还假设我可以像我所做的那样将标题传递给控制器​​操作？

然后我创建了模型：

```
namespace LocApp.Models
{
    public class ContentManagement
    {
        public int id { get; set; }
        [Required]
        public string title { get; set; }
        public string content { get; set; }
    }
} 
```

从那我创建了一个带有索引操作的控制器，看起来像这样：

```
 public ViewResult Index(string title)
    {
        using (var db = new LocAppContext())
        {
            var content = (from c in db.Contents
                           where c.title == title
                           select c).ToList();

            return View(content);

        }
    } 
```

所以我创建了一些**标题**为“bla”的内容，所以当我访问 site.com/bla 时，我收到一个错误，它找不到“bla/”

有人可以告诉我我做错了什么吗？如果您熟悉带有顶部选项卡的 asp.net mvc 项目的默认布局，我也会根据数据库中的标题创建一组通向页面的选项卡

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T16:26:44.130

主要问题是，当您使用标题时，路由引擎会将其与第一个路由匹配，并尝试通过该标题查找控制器。我们已经实现了类似的东西，并发现通过明确定义哪些控制器对默认路由有效，然后它会适当地处理请求。我在下面给出了一个我们允许适合我们默认路由的控制器示例（Home、Help 和 Error）。

您可能还希望阻止人们为内容提供与您的根级别控制器相同的**TITLE**，因为这会很好地解决这个问题。

```
 public static void RegisterRoutes(RouteCollection routes)
        {
            routes.IgnoreRoute("{resource}.axd/{*pathInfo}");
routes.MapRoute(
                "Default",
                "{controller}/{action}/{id}",
                new {controller = "Home", action = "Index", id = UrlParameter.Optional},
                new {controller = "Home|Error|Help"},
                new[] {"UI_WWW.Controllers"});

            routes.MapRoute(
                "ContentManagement",
                "{title}",
                new {controller = "ContentManagement", action = "Index"});    

            }
} 
```

# ajax - Pinterest Ajax 获取 Pins 无效标签

> ID：16219850
> 
> 赞同：0
> 
> 时间：2013-04-25T16:16:45.240
> 
> 标签：ajax, json, api, get, pinterest

```
var url = "http://pinterestapi.co.uk/" + pinterestUsername + "/pins";

$.ajax({
    dataType: "jsonp",
    url: url,
    success: function (data) {
        alert(data)
    }
}); 
```

firebug“无效字符”错误显示

数据类型：“json”不起作用

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T16:20:46.167

~~试试 .getJSON()。~~

 ~~```
var url = "http://pinterestapi.co.uk/"+pinterestUsername+"/pins";

$.getJSON(url, function(data) {
    alert(data);
}); 
```~~  ~~好吧，让我们尝试一些不同的东西......

假设您是用户“jwmoz”。

```
 var user = "jwmoz";
   var url = "http://pinterestapi.co.uk/"+user+"/pins";

   $.get(url,
       function(data) {
       alert(data)
   }, "jsonp"); 
```

看看这个页面[jQuery AJAX cross domain](https://stackoverflow.com/questions/3506208/jquery-ajax-cross-domain)，这应该会给你一个粗略的想法和几个有用的链接来解决你的问题。

Ps-很抱歉第一次误解你的问题！祝你好运！！

多姆~~

# jline - 参考 JLine 示例

> ID：16219860
> 
> 赞同：1
> 
> 时间：2013-04-25T16:17:20.773
> 
> 标签：jline

我一直在尝试编写一个可以作用于箭头键的 Java 控制台程序。我遇到了声称能够做到这一点的 JLine 库。

我已经尝试过几次使用 JLine 库来实现我的目标，但都没有成功。

`ConsoleReader reader = new ConsoleReader(System.in, new PrintWriter(System.out));` 尽管使用了 ConsoleReader.readVirtualKey()，它仍然等待输入按键。

我也尝试过使用

```
UnixTerminal terminal = (UnixTerminal) Terminal.setupTerminal();
terminal.readVirtualKey(System.in); 
```

但这也不起作用。它总是等待 Enter 键并且不显示我在按下 Enter 键之前按下的箭头键。

有人可以帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-17T12:01:45.120

也许有点晚了，但我正在用 jline 试验自己。

这对我有用：

```
ConsoleReader cr = new ConsoleReader();
String line = cr.readLine("type something: ") 
```

但是，如果您在 IDE 中运行该程序，它可能无法正常工作，例如它在 IntelliJ 中对我来说不起作用。

# ruby-on-rails - 令人惊讶的复杂 ActiveRecord 关系

> ID：16219861
> 
> 赞同：5
> 
> 时间：2013-04-25T16:17:21.303
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, activerecord

我有一个`User`模型。一个用户有很多`EmailAddresses`，他们选择其中一个作为他们的`primary_email_address`，这是我发送电子邮件的那个。用户必须始终拥有至少一个电子邮件地址，并且必须设置一个主电子邮件地址。主电子邮件地址可能会被销毁，但必须为用户分配一个新的主电子邮件地址。

事实证明，这是一个非常难以处理的情况，而且我尝试过的每个解决方案都有一些不令人满意的元素。这似乎是一类非常常见的问题（A 有很多 B，其中一个 B 很特殊）所以我很想知道如何干净利落地解决它。

### 解决方案 1 - EmailAddress 上的布尔列说明它是否是主要的

就像是：

```
class User < ActiveRecord::Base
  has_many :email_addresses, inverse_of: :user

  validates :has_exactly_one_primary_email_address

  def primary_email_address
    email_addresses.where(is_primary:true).first
  end

  def has_exactly_one_primary_email_address
    # ...
  end
end

class EmailAddress < ActiveRecord::Base
  belongs_to :user, inverse_of: :email_addresses

  before_destroy :check_not_users_only_email_address
  after_destroy :reassign_user_primary_email_address_if_necessary

  # the logic for both these methods should live on the user but you get the idea
  def reassign_user_primary_email_address_if_necessary
    # ...
  end

  def check_not_users_only_email_address
    # ...
  end
end 
```

这在概念上很尴尬，因为用户只有一个主电子邮件地址非常重要，并且必须跨多个电子邮件地址记录验证这一点似乎很糟糕。虽然我知道 ActiveRecord 事务应该意味着用户不会因为没有主电子邮件地址而陷入困境，但这似乎是灾难的根源。主电子邮件地址本质上是属于用户的东西，将这个逻辑放到 EmailAddress 模型中是不理想的。

### 解决方案 2 -除了EmailAddress 上的列`primary_email_adress_id`之外，用户上的列`user_id`

就像是：

```
class User < ActiveRecord::Base
  has_many :email_addresses, inverse_of: :user
  belongs_to :primary_email_address

  validates_presence_of :primary_email_address
end

class EmailAddress < ActiveRecord::Base
  belongs_to :user, inverse_of: :email_addresses

  before_destroy :check_not_users_only_email_address
  after_destroy :reassign_user_primary_email_address_if_necessary

  # the logic for both these methods should live on the user but you get the idea
  def reassign_user_primary_email_address_if_necessary
    # ...
  end

  def check_not_users_only_email_address
    # ...
  end
end 
```

这更好，因为验证只有 1 个主电子邮件地址的用户更容易，并且与用户模型的耦合更紧密。然而，现在围绕逆存在令人讨厌的问题。`user.primary_email_address`不会将同一实例引用为`user.email_addresses`数组中的同一记录，并且需要大量重新加载以确保您的内存实例具有正确的数据。

```
> u = User.last
> u.email_addresses.map(&:email)
=> ["monkey@hotmail.com", "gorilla@gmail.com"]
> u.primary_email_address.destroy
=> true
> u.email_addresses.map(&:email)
=> ["monkey@hotmail.com", "gorilla@gmail.com"]
> u.reload
> u.email_addresses.map(&:email)
=> ["monkey@hotmail.com"] 
```

`after_destroy`这在钩子和其他情况下会导致很多问题。这似乎是由`belongs_to :primary_email_address`User 模型中略显尴尬的行引起的。`has_many :email_addresses/belongs_to :user`EmailAddresses 和 Users 被这两个不同的 ActiveRecord 关系（和）关联起来有点奇怪`belongs_to :primary_email_address`。

两种在技术上都有效的解决方案（我们目前正在使用第二种解决方案），但都存在不直观且耗时的缺陷。我很想听听一些关于如何正确解决这个问题的好主意。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T16:30:29.197

一般来说，最好让你们的关系只向一个方向流动。反向链接创建了难以解决的循环依赖关系。

在第一个示例中，您在其中一个电子邮件地址上有一个标志，表明它是“主要”地址。如果一个地址没有被明确标记为主要地址，那么您可以通过默认第一个地址来使其更加健壮，并且如果有多个主要地址，只需选择其中的第一个。没有什么事情是完美的，所以让你的应用程序能够处理一些不确定性而不是抛出异常并不一定是一件坏事。

请记住，在指定主要地址之前无法保存您的用户记录，并且您不太可能在最初保存电子邮件地址之前将其与用户地址相关联。这是很难解决的循环依赖关系之一，除非您小心地以正确的顺序保存内容。

如果您将主地址的概念保持松散，除非明确定义您有一个合理的默认值，否则您必须做的工作量要少得多。

您发现的一件事是关系通常由 ActiveRecord 缓存，因此拥有两个具有重叠数据的独立关系可能会很麻烦。没有真正的方法可以避免这种情况，但是如果您担心过时的缓存数据，您始终可以强制重新加载关系：`user.email_addresses(true)`将始终从数据库中获取记录。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T16:38:16.260

我建议使用第一种方法，尽管略有不同。实际上没有任何方法可以避免在电子邮件地址上设置触发回调，因为这是进行修改的地方。但是，您不需要像以前那样复杂。

由于需要对用户的整个 EmailAddresses 集合进行检查，因此应使用数据库内容来确定状态是否有效 - 使用`after_save`并且`after_destroy`是一种简单的方法来执行此操作：

```
class EmailAdress < AR::Base
  belongs_to :user, :inverse_of :email_addresses

  scope :primary, where(:primary => true)

  after_save :ensure_single_primary_email
  after_destroy :ensure_primary_email_exists

  def ensure_single_primary_email
    user.verify_primary_email(self) if new_record? || primary_changed?
  end

  def ensure_primary_email_exists
    user.ensure_primary_email
  end
end

class User < AR::Base
  has_many :email_addresses, :inverse_of => :user, :dependent => :destroy
  attr_accessible :primary_email_address

  validates_presence_of :primary_email_address

  def primary_email_address
    if association(:email_addresses).loaded? 
      email_addresses.detect(&:primary?)
    else
      email_addresses.primary.first
    end
  end

  def primary_email_address=(email)
    email.primary = true
    email_addresses << email
  end

  def verify_primary_email(email)
    if email.primary? && email_addresses.primary.count > 1
      raise "Only one primary email can exist for a user"
    elsif !email.primary? && !email_addresses.primary.exists?
      raise "A user must have one primary email"
    end
  end

  def ensure_primary_email
    return if email_addresses.primary.exists?
    raise 'Missing primary email' if !email_addresses.exists?
    email_addresses.first.update_attribute(:primary, true)
  end
end 
```

# scala - 基于 IndexedSeq 的 Stream 等价物？

> ID：16219864
> 
> 赞同：4
> 
> 时间：2013-04-25T16:17:27.397
> 
> 标签：scala

我有一个延迟计算的对象序列，其中延迟计算仅取决于索引（而不是前面的项目）和一些常量参数（`p:Bar`如下）。我目前正在使用[Stream](http://www.scala-lang.org/api/current/index.html#scala.collection.immutable.Stream)，但是计算`stream.init`通常是浪费的。

但是，我真的很喜欢 using`Stream[Foo] = ...`让我摆脱了缓存的实现，并且声明语法非常简单，同时仍然提供所有糖（如`stream(n)`获取元素`n`）。再说一次，我可能只是使用了错误的声明：

```
class FooSrcCache(p:Bar) {
  val src : Stream[FooSrc] = {
    def error() : FooSrc = FooSrc(0,p)
    def loop(i: Int): Stream[FooSrc] = {
      FooSrc(i,p) #:: loop(i + 1)
    }
    error() #:: loop(1)
  }
  def apply(max: Int) = src(max)
} 
```

是否有一个可比较的`Stream`Scala 基类，它是索引的而不是线性的？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-25T17:37:19.623

`PagedSeq`应该为您完成这项工作：

```
class FooSrcCache(p:Bar) {
    private def fill(buf: Array[FooSrc], start: Int, end: Int) = {
      for (i <- start until end) {
        buf(i) = FooSrc(i,p)
      }
      end - start
    }

    val src = new PagedSeq[FooSrc](fill _)

    def apply(max: Int) = src(max)
} 
```

请注意，这可能会`FooSrc`使用比您要求的更高的索引进行计算。

# pdf - Monotouch 和 Monodroid 的 Pdf 库

> ID：16219865
> 
> 赞同：1
> 
> 时间：2013-04-25T16:17:32.437
> 
> 标签：pdf, xamarin.ios, xamarin.android, pdf-reader

我正在寻找构建一个应用程序，用于显示适用于 Windows Phone、Android 和 iOS 的 pdf。是否有任何适用于 monodroid 和 monotouch 并提供 GUI 小部件的库。

我已经对一些不同的 pdf 库进行了一些研究，看起来有很多代码天真地完成了以保持 pdf 的高渲染速度。我认为这使得很难拥有/找到一个适用于所有设备的共享库。我想确认是这种情况。

提前致谢。

# ios - iOS 6.1.3 Mobile Safari / UIWebView 发送错误的区域设置区域代码

> ID：16219866
> 
> 赞同：0
> 
> 时间：2013-04-25T16:17:34.443
> 
> 标签：ios, uiwebview, safari, locale

我对上一个 iOS 版本中不同的行为感到非常困惑（我对此进行了测试并且它有效）。

您在“常规 > 国际 > 区域格式”中所做的更改不会对 UIWebView 或移动 Safari 发送的接受语言产生任何影响。例如，当我选择“英国”作为区域格式时，我期望的接受语言是

```
en-GB 
```

但现在看起来它只发送：

```
en-US 
```

现在有人对此有更多的了解吗？它是一个错误吗？还是一个特点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-02T16:05:01.480

根据我自己的工作（我目前有同样的问题），看起来 Safari 根本不会报告正确的语言环境。在线检查确认所有 Safari 报告“正确”都是语言设置：

[https://www.quora.com/Mobile-Safari/Is-there-a-way-for-a-web-site-to-detect-an-iOS-users-Region-Format](https://www.quora.com/Mobile-Safari/Is-there-a-way-for-a-web-site-to-detect-an-iOS-users-Region-Format)

似乎这是一个功能，但 IMO 这确实是一个错误。在我目前正在进行的一个项目中，我希望能够在客户第一次访问我的网站时对他们喜欢的正确语言和位置进行智能猜测，但由于 Safari 无法报告正确的语言环境，我不得不求助于使用域名（例如 .com 与 .ca）和其他不太优雅的选项来解决这个问题。[根据 W3C 的说法，](http://www.w3.org/International/questions/qa-accept-lang-locales)只要客户没有“束缚”于这个预先选择的选择，这将是对报告的区域设置的有效使用。

请复制我针对此问题向 Apple 提出的功能请求 ( [rdar://13792294](https://openradar.appspot.com/radar?id=3005401) )，希望他们会在新版本中对此有所作为。

# ruby-on-rails - 模型/ActiveRecord 不保存新数据

> ID：16219867
> 
> 赞同：5
> 
> 时间：2013-04-25T16:17:34.637
> 
> 标签：ruby-on-rails, ruby-on-rails-3, devise, ruby-on-rails-3.2

我已经确认这种方法有效。基本上它从控制器获取电子邮件并更改特定用户的电子邮件。

但是，它从未真正保存数据。我传递了错误的电子邮件格式，如果我传递了正确的电子邮件方法返回 true，则它返回 false，这意味着它分配了一个新电子邮件并称为安全。

```
# Allows user to change email address
def change_email(newmail)  
  address = EmailVeracity::Address.new(newmail)

  if address.valid?
    self.email = newmail
    self.save
    return true
  else
    return false
  end

end 
```

我首先检查了日志是否有任何提示，但我得到的只是：

```
Started POST "/members/editmail" for 127.0.0.1 at 2013-04-25 17:33:44 +0200
Processing by MembersController#editmail as HTML
  Parameters: {"authenticity_token"=>"*****=", "mail"=>"*****@gmail.com"}
  ←[1m←[35mUser Load (1.0ms)←[0m  SELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1
  ←[1m←[36mCharacter Load (0.0ms)←[0m  ←[1mSELECT `characters`.* FROM `characters` WHERE `characters`.`user_id` = 1←[0m
  ←[1m←[35m (0.0ms)←[0m  BEGIN
  ←[1m←[36mUser Exists (0.0ms)←[0m  ←[1mSELECT 1 FROM `users` WHERE (`users`.`email` = BINARY '*****@gmail.com' AND `users`.`id` != 1) LIMIT 1←[0m
  ←[1m←[35mUser Exists (0.0ms)←[0m  SELECT 1 FROM `users` WHERE (`users`.`username` = BINARY '******' AND `users`.`id` != 1) LIMIT 1
  ←[1m←[36m (0.0ms)←[0m  ←[1mROLLBACK←[0m
Redirected to http://localhost:3000/members/1
Completed 302 Found in 10ms (ActiveRecord: 1.0ms) 
```

有一种方法来更改此属性也很有意义。由于我使用 Devise gem 进行身份验证，我可以使用`current_user`变量来检索当前登录用户的用户对象，然后只需调用`current_user.email = newmail; current_user.save`控制器。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T16:21:36.263

`self.save!`不保存时会抛出异常。

此外，这可能不正确：

```
self.save
return true 
```

self.save 根据是否成功保存返回 true 或 false。所以你可能想要摆脱`return true`并让返回值成为返回的值`self.save`

`self`在这种情况下不需要关键字，也不需要`return`关键字。所以这相当于你的代码：

```
# Allows user to change email address
def change_email(newmail)  
  address = EmailVeracity::Address.new(newmail)

  if address.valid?
    self.email = newmail
    save
    true
  else
    false
  end
end 
```

这相当于

```
# Allows user to change email address
def change_email(newmail)  
  address = EmailVeracity::Address.new(newmail)

  if address.valid?
    self.email = newmail
    save
  end
  address.valid?
end 
```

这也不应该是你想要的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T16:26:13.120

似乎更好的方法是将您的自定义验证添加到您的用户模型中的电子邮件字段，设置您的表单以提交用户参数（使用新电子邮件，这是执行此操作的 Rails 文档[http://guides.rubyonrails.org/ form_helpers.html#binding-a-form-to-an-object](http://guides.rubyonrails.org/form_helpers.html#binding-a-form-to-an-object)）并运行类似

```
if @user.update_attributes(params[:user], :as => :admin)
  redirect_to @user, :notice => "User updated."
else
  render :action => 'edit', :alert => "Unable to update user."
end 
```

在你提交动作。

# r - 在 *_ply 函数中更改 data.frame

> ID：16219869
> 
> 赞同：1
> 
> 时间：2013-04-25T16:17:38.183
> 
> 标签：r, plyr

假设我有

```
a <- data.frame( z = rep( c("A", "B", "C"), 2 ), p = 1:6, stringsAsFactors=FALSE )
b <- data.frame( z = c( rep( "A", 5), rep( "B", 5 ) ), q = 1:10, stringsAsFactors=FALSE  ) 
```

并希望在使用函数`a`迭代时进行操作，例如`b``plyr`

```
library(plyr)
d_ply( b, "z", function( x ){
  a[ a$z == x[1, "z"], "p" ] <<- a[ a$z == x[1, "z"], "p" ] + sum(x$q)
}) 
```

在这种情况下，我必须使用`<<-`分配才能`a`在`d_ply`. 如果我只使用`<-` `a`不会改变。我绝对要避免的是迭代，`a`因为`b$z`它只包含`a$z`.

所以我的问题是：

1.  是否有一个简单而高效`plyr`的解决方案可以避免`<<-`？
2.  是否有另一个方便的解决方案（也许除了`for( i in unique(b$z) ){ ... }`）？
3.  如果我坚持我的解决方案，以这种方式使用是否有任何影响`<<-`？我可以确定在任何情况下都只会操纵最接近`a`（就环境而言）呼叫的人吗？`d_ply`特别是因为这都是 ReferenceClass 方法的一部分。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T16:28:03.760

这是一个使用`data.table`代替的选项`plyr`

```
library(data.table)
a <- data.table(a, key="z")
b <- data.table(b, key="z")

a[b[, sum(q),  by=z], p := p + V1]

   z  p
1: A 16
2: A 19
3: B 42
4: B 45
5: C  3
6: C  6 
```

### 编辑：

关于您的第三个问题和使用`<<-`，我建议您不要这样做。如果您想分配到不同的环境，请使用`assign(., envir=.)`允许您指定分配到哪个环境的功能。

# primefaces - Primefaces分组问题

> ID：16219871
> 
> 赞同：0
> 
> 时间：2013-04-25T16:17:49.013
> 
> 标签：primefaces

我在尝试使用 primefaces subtale 组件对数据进行分组时遇到问题。我的列已分组，但第一个结果仍然是同一行，如下面的屏幕截图所示：

![在此处输入图像描述](https://i.stack.imgur.com/gHxy2.jpg)

Normaly 我应该有其他除了 AIR。但这是我得到的结果。有人可以帮助我了解发生了什么。我遵循 PrimeFaces 展示案例并开发类来生成这个子表：

这是托管 bean：

```
package tg.moov.imereport.mbean;

import java.util.ArrayList;
import java.util.List;
import javax.ejb.EJB;
import javax.ejb.Stateless;
import javax.inject.Named;
import tg.moov.imereport.service.DownStream;
import tg.moov.imereport.service.DownStreamTotal;

@Named
@Stateless
public class GroupedDataMBean {

    @EJB private DownStreamMBean ds;
    @EJB private DownStreamTotalMBean dst;
    private Period period = new Period();
    private List<GroupedDownStream> downStreams;

    /**
     * @return the period
     */
    public Period getPeriod() {
        return period;
    }

    /**
     * @param period the period to set
     */
    public void setPeriod(Period period) {
        this.period = period;
    }        

    public GroupedDataMBean() {

    }

    /**
     * 
     */
    public void populateDownStreams() {
        downStreams = new ArrayList<GroupedDownStream>();
        for (DownStream d : ds.getDownStreamsService()) {
            GroupedDownStream gds = new GroupedDownStream();
            gds.setDownStream(d.getIDDownStream());
            dst.setPeriod(period);
            for(DownStreamTotal dt : dst.displayGroupedDataByDownStream(d)) {
                gds.getDownStreamsDetails().add(dt);
            }
            downStreams.add(gds);
        }
    }

    /**
     * 
     * @return a List of GroupedDownStream
     */
    public List<GroupedDownStream> getGroupedDownStreams() {
        return downStreams;
    }

} 
```

这是大师班：

```
package tg.moov.imereport.mbean;

import java.io.Serializable;
import java.util.ArrayList;
import java.util.List;
import tg.moov.imereport.service.DownStreamTotal;

public class GroupedDownStream implements Serializable {
    private String downStream;
    private List<DownStreamTotal> downStreamsDetails;

    /**
     * @return the downStream
     */
    public String getDownStream() {
        return downStream;
    }

    /**
     * @param downStream the downStream to set
     */
    public void setDownStream(String downStream) {
        this.downStream = downStream;
    }        

    /**
     * @return the downStreamsDetails
     */
    public List<DownStreamTotal> getDownStreamsDetails() {
        return downStreamsDetails;
    }

    /**
     * @param downStreamsDetails the downStreamsDetails to set
     */
    public void setDownStreamsDetails(List<DownStreamTotal> downStreamsDetails) {
        this.downStreamsDetails = downStreamsDetails;
    }

    public GroupedDownStream() {
        downStreamsDetails = new ArrayList<DownStreamTotal>();
    }
} 
```

要显示的详细信息：

```
package tg.moov.imereport.dao;

import java.io.Serializable;
import java.util.Date;
import javax.persistence.Basic;
import javax.persistence.Column;
import javax.persistence.Entity;
import javax.persistence.Id;
import javax.persistence.NamedQueries;
import javax.persistence.NamedQuery;
import javax.persistence.Table;
import javax.persistence.Temporal;
import javax.persistence.TemporalType;
import javax.validation.constraints.NotNull;
import javax.validation.constraints.Size;
import javax.xml.bind.annotation.XmlRootElement;

@Entity
@Table(name = "DownStreamTotal")
@XmlRootElement
@NamedQueries({
    @NamedQuery(name = "DownStreamTotal.findAll", query = "SELECT d FROM DownStreamTotal d"),
    @NamedQuery(name = "DownStreamTotal.findByDownStream", query = "SELECT d FROM DownStreamTotal d WHERE d.downStream = :downStream"),
    @NamedQuery(name = "DownStreamTotal.findByNode", query = "SELECT d FROM DownStreamTotal d WHERE d.node = :node"),
    @NamedQuery(name = "DownStreamTotal.findByTotalFiles", query = "SELECT d FROM DownStreamTotal d WHERE d.totalFiles = :totalFiles"),
    @NamedQuery(name = "DownStreamTotal.findByMinDate", query = "SELECT d FROM DownStreamTotal d WHERE d.minDate = :minDate"),
    @NamedQuery(name = "DownStreamTotal.findByMaxDate", query = "SELECT d FROM DownStreamTotal d WHERE d.maxDate = :maxDate")})
public class DownStreamTotal implements Serializable {
    private static final long serialVersionUID = 1L;
    @Id
    @Basic(optional = false)
    @NotNull
    @Size(min = 1, max = 10)
    @Column(name = "DownStream")
    private String downStream;
    @Size(max = 15)
    @Column(name = "Node")
    private String node;
    @Column(name = "TotalFiles")
    private Integer totalFiles;
    @Column(name = "MinDate")
    @Temporal(TemporalType.DATE)
    private Date minDate;
    @Column(name = "MaxDate")
    @Temporal(TemporalType.DATE)
    private Date maxDate;

    public DownStreamTotal() {
    }

    public DownStreamTotal(String downStream) {
        this.downStream = downStream;
    }

    public String getDownStream() {
        return downStream;
    }

    public void setDownStream(String downStream) {
        this.downStream = downStream;
    }

    public String getNode() {
        return node;
    }

    public void setNode(String node) {
        this.node = node;
    }

    public Integer getTotalFiles() {
        return totalFiles;
    }

    public void setTotalFiles(Integer totalFiles) {
        this.totalFiles = totalFiles;
    }

    public Date getMinDate() {
        return minDate;
    }

    public void setMinDate(Date minDate) {
        this.minDate = minDate;
    }

    public Date getMaxDate() {
        return maxDate;
    }

    public void setMaxDate(Date maxDate) {
        this.maxDate = maxDate;
    }

    @Override
    public int hashCode() {
        int hash = 0;
        hash += (downStream != null ? downStream.hashCode() : 0);
        return hash;
    }

    @Override
    public boolean equals(Object object) {
        // TODO: Warning - this method won't work in the case the id fields are not set
        if (!(object instanceof DownStreamTotal)) {
            return false;
        }
        DownStreamTotal other = (DownStreamTotal) object;
        if ((this.downStream == null && other.downStream != null) || (this.downStream != null && !this.downStream.equals(other.downStream))) {
            return false;
        }
        return true;
    }

    @Override
    public String toString() {
        return "tg.moov.imereport.dao.DownStreamTotal[ downStream=" + downStream + " ]";
    }

} 
```

primefaces代码：

```
<p:commandButton action="#{groupedDataMBean.populateDownStreams}" value="search" ajax="false" update="downStreamTable" />
                        <p:dataTable id="downStreamTable" var="dwnStr" value="#{groupedDataMBean.groupedDownStreams}">

                            <f:facet name="header">
                                ImE Distribution Report
                            </f:facet>

                            <p:columnGroup type="header">  
                                <p:row>  
                                    <p:column headerText="DownStream" />
                                    <p:column headerText="#Files" />  
                                    <p:column headerText="MinDate" />  
                                    <p:column headerText="MaxDate" />
                                </p:row>                                     
                            </p:columnGroup>

                            <p:subTable var="details" value="#{dwnStr.downStreamsDetails}">
                                <f:facet name="header">
                                    #{dwnStr.downStream} 
                                </f:facet>

                                <p:column>
                                    #{details.node}
                                </p:column>

                                <p:column>
                                    #{details.totalFiles}
                                </p:column>

                                <p:column>
                                    #{details.minDate}
                                </p:column>

                                <p:column>
                                    #{details.maxDate}
                                </p:column>   
                                <p:columnGroup type="footer">                                      
                                </p:columnGroup>  
                            </p:subTable>
                        </p:dataTable> 
```

先感谢您！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-26T09:52:04.677

我发现，[这里](http://forum.primefaces.org/viewtopic.php?f=3&t=22438)有一些关于它的东西。这是一个 Primefaces 错误。他们建议改用嵌套数据表。

# mysql - 在从源安装 mysql 期间未声明“ED_UNASSIGNED”

> ID：16219875
> 
> 赞同：1
> 
> 时间：2013-04-25T16:17:52.097
> 
> 标签：mysql, linux

从源代码安装 mysq 时出现错误

```
 [  0%] Building C object cmd-line-utils/libedit/CMakeFiles/edit.dir/chared.c.o
/root/mysql/mysql-5.5.31/cmd-line-utils/libedit/chared.c: In function 'ch_init':
/root/mysql/mysql-5.5.31/cmd-line-utils/libedit/chared.c:421: error: 'ED_UNASSIGNED' undeclared (first use in this function)
/root/mysql/mysql-5.5.31/cmd-line-utils/libedit/chared.c:421: error: (Each undeclared identifier is reported only once
/root/mysql/mysql-5.5.31/cmd-line-utils/libedit/chared.c:421: error: for each function it appears in.)
/root/mysql/mysql-5.5.31/cmd-line-utils/libedit/chared.c: In function 'ch_reset':
/root/mysql/mysql-5.5.31/cmd-line-utils/libedit/chared.c:476: error: 'ED_UNASSIGNED' undeclared (first use in this function)
/root/mysql/mysql-5.5.31/cmd-line-utils/libedit/chared.c: In function 'ch_end':
/root/mysql/mysql-5.5.31/cmd-line-utils/libedit/chared.c:597: error: 'ED_UNASSIGNED' undeclared (first use in this function)
make[2]: *** [cmd-line-utils/libedit/CMakeFiles/edit.dir/chared.c.o] Error 1
make[1]: *** [cmd-line-utils/libedit/CMakeFiles/edit.dir/all] Error 2
make: *** [all] Error 2 
```

如何解决这个错误？我检查了 mysql 源，确实没有 ED_UNASSIGNED 变量。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-20T09:10:56.673

我有类似的错误。我使用不同的文件夹来抛出 CMAKE 构建文件。从我以前运行“make”的地方。

“mysql-5.6.15”源文件夹“MySQL Build”文件夹，我确实在其中抛出了 make 文件并打算构建二进制文件。

我在该文件夹名称中有一个空格。删除空间就可以了。虽然我看到你的路径中没有空格，但仍然确保你没有使用带有“空格”的文件夹。当您尝试在 Windows 上从源代码构建 MySQL 时，构建文件夹中的空间也会产生错误。

# dns - 阻止在 2008 AD 环境中创建 DNS 记录

> ID：16219879
> 
> 赞同：-1
> 
> 时间：2013-04-25T16:18:14.963
> 
> 标签：dns, active-directory, vmware, windows-server-2008-r2, dhcp

我们构建了一套在整个公司使用的虚拟设备。VM 上的网络设置为 NAT 以防止创建外部 DNS 记录，不幸的是，每月至少有一次有人将其切换到桥接，以便其他人可以连接。

问题是它们都有相同的主机名，一旦创建外部 DNS 记录，每个人都会被路由到这个新地址，导致问题，直到我们找到罪魁祸首并将其改回 NAT 或更改主机名。

2008 R2 AD 环境中是否有将主​​机名列入黑名单并防止创建 DNS 记录的方法？DNS 已配置，因此任何拥有网络设备的人都可以创建记录，这使得记录变得混乱。添加指向 127.0.0.1 的 A 记录将不起作用，因为人们从外部与客户端一起使用 VM。

这是一个多域环境，并且根域具有 DNS 限制，如果有一种方法可以强制 VM 请求该空间中可以工作的 DNS 记录。

编辑：澄清一下，DNS 记录是通过 DHCP 创建的

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T17:16:51.960

为那些需要创建静态主机记录，然后将权限设置为拒绝写入。这应该会阻止它们被更新。

# google-app-engine - 是否可以只为某些实体提供 ComputedProperty？

> ID：16219881
> 
> 赞同：1
> 
> 时间：2013-04-25T16:18:21.393
> 
> 标签：google-app-engine, properties, app-engine-ndb

在我的应用程序中，我有一个这样的模型：

```
class MyModel(ndb.Model):
    entity_key_list = ndb.KeyProperty('k', repeated=True, indexed=False)
    entity_key_num = ndb.ComputedProperty('n', lambda self: len(self.entity_key_list))
    verified = ndb.BooleanProperty('v') 
```

验证为假时是否可以拥有 entity_key_num 属性？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T17:09:28.820

`None`如果不是`verified`这样，您可以返回：

```
entity_key_num = ndb.ComputedProperty('n', lambda self: len(self.entity_key_list) if not self.verified else None) 
```

如果您根本不想拥有该值`None`并动态删除或创建此属性，那么您将不得不使用[`ndb.Expando`](https://developers.google.com/appengine/docs/python/datastore/expandoclass#Introduction)可以做所有这些花哨的东西的类。请注意，您将无法删除 ，`ComputedProperty`因此您必须自己跟踪该值。

# jquery - 删除显示后jquery函数不起作用：无；

> ID：16219882
> 
> 赞同：0
> 
> 时间：2013-04-25T16:18:30.137
> 
> 标签：jquery

```
 $('.smileys img').click(function () {
            alert("hello");

        });

<div class="smileys">
<img src="images/smileys/mad.gif"/>
</div> 
```

.smileys css 是 display:none;

一个按钮使用这个来显示笑脸： $(".smileys").css('display', 'block');

现在，在使 .smileys 可见后，第一个功能不起作用。但是，当表情符号默认可见时，它确实有效。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-25T16:21:06.523

您可能需要事件委托 -

```
$(document).on('click','.smileys img',function () {
            alert("hello");
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T16:20:55.177

你应该使用`.on('click', function() {....`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-25T16:24:03.020

Try using the `.on()` method:

```
$('.smileys img').on("click", function () {
  // code 
}); 
```

Or the `.delegate()` method:

```
$("body").delegate(".smileys img", "click", function() {
  // code
}); 
```

Also, for revealing the smileys you can use the `.show()` method.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-25T16:33:09.217

您需要将事件处理程序绑定到绑定时存在于 DOM 中的元素。

如果您将脚本称为：

```
<script>
    $('.smileys img').click(function () {
        alert("hello");
    });
</script>
<div class="smileys">
    <img src="images/smileys/mad.gif"/>
</div> 
```

然后，您需要将事件委托给存在的事物，例如`window`、`document`或`body`：

```
$('body').on('click', '.smileys img', function () {...}); 
```

或者，您可以等到文档准备好后再绑定事件：

```
<script>
    jQuery(function ($) { //aliasing shortcut for $(document).ready...
        $('.smileys img').click(function () {
            alert("hello");
        });
    });
</script>
<div class="smileys">
    <img src="images/smileys/mad.gif"/>
</div> 
```

Document.ready 导致该函数在页面的所有内容构建完成后，但在图像和其他外部内容完成加载之前执行。

或者，您可以简单地在 DOM 中创建元素`<script>` *之后放置：*

```
<div class="smileys">
    <img src="images/smileys/mad.gif"/>
</div>
<script>
    $('.smileys img').click(function () {
        alert("hello");
    });
</script> 
```

# java - 使用 java 代码将 X.509 证书存储到密钥库中

> ID：16219887
> 
> 赞同：1
> 
> 时间：2013-04-25T16:18:37.997
> 
> 标签：java, keystore, keytool

我有一个使用 bouncycastle 库创建的 X.509 证书。如何将其存储到 java Keystore 中？

我试过这段代码

```
KeyStore ks = KeyStore.getInstance(KeyStore.getDefaultType());

// get user password and file input stream
char[] password = getPassword();
java.io.FileInputStream fis =
    new java.io.FileInputStream("keyStoreName");
ks.load(fis, password);
fis.close(); 
```

[我在这里](http://docs.oracle.com/javase/1.5.0/docs/api/java/security/KeyStore.html)找到了这段代码，但是使用这种方式创建的密钥库不适用于 keytool，它告诉我密钥库已损坏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T16:21:45.807

使用`KeyStore.setCertificateEntry(alias, cert)`并给它一个您选择的别名。然后，用于`KeyStore.store(...)`保存密钥库（通常使用`FileOutputStream`）。

# php - PHP中的参数签名是什么？

> ID：16219888
> 
> 赞同：6
> 
> 时间：2013-04-25T16:18:39.863
> 
> 标签：php, parameters, signature

PHP官方文档在解释类和对象部分下的**扩展**时，它说：

```
"When overriding methods, the parameter signature should remain the same or PHP
will generate an E_STRICT level error. This does not apply to the constructor
which allows overriding with different parameters." 
```

所以我想知道，什么是参数签名？

文档中的**示例**如下：

```
<?php
class ExtendClass extends SimpleClass
{
    // Redefine the parent method
    function displayVar()
    {
        echo "Extending class\n";
        parent::displayVar();
    }
}

$extended = new ExtendClass();
$extended->displayVar();
?> 
```

官方在线[链接](http://php.net/manual/en/language.oop5.basic.php)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-25T16:24:18.597

The parameter signature is simply the definition of parameters in the definition (signature) of a method. What is meant with the quoted text is, to use the same number (and type, which is not applicable in PHP) of parameter when overriding a method of a parent class.
A signature of a function/method is also referred to as a *head*. It contains the name and the parameters. The actual code of the function is called *body*.

```
function foo($arg1, $arg2) // signature
{
    // body
} 
```

So for example if you have a method `foo($arg1, $arg2)` in a parent class, you can't override it in a extended class by defining a method `foo($arg)`.

# php - SQL Buddy，加载数据本地输入文件的 mySQL 错误

> ID：16219889
> 
> 赞同：0
> 
> 时间：2013-04-25T16:18:44.763
> 
> 标签：php, mysql, sqlbuddy

我正在尝试将 CSV 文件导入 mysql 数据库。但查询给出错误。查询是：

```
LOAD DATA LOCAL INFILE ‘/last.csv’ INTO TABLE punjab FIELDS TERMINATED BY ‘,’ ENCLOSED BY ‘”‘ LINES TERMINATED BY ‘\r\n’ (newpoll, blockcode, halqa, pollnumber, pollstation, sex, area); 
```

错误是

```
You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '‘/last.csv’ INTO TABLE punjab FIELDS TERMINATED BY ‘,’ ENCLOSED BY ‘�' at line 1 
```

有任何想法吗 ？？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-30T09:45:15.530

您可以使用[http://www.whereismyballot.com](http://www.whereismyballot.com) ;) 顺便说一下，您不应该引用字段名称

# ios - 使用 iOS 自动布局调整 UITableViewCell 内的 UITextView 大小

> ID：16219891
> 
> 赞同：4
> 
> 时间：2013-04-25T16:18:47.663
> 
> 标签：ios, uitableview, uitextview, constraints, autolayout

## 我的目标

我正在创建一个自定义 UITableViewCell (MessageCell)，并且我希望在单元格更改其大小时让我的 UITextView 在宽度和高度上调整大小，同时保持一些基本约束，例如边缘的边距。

*注意：我还`heightForRowAtIndexPath`根据将放置到 UITextView 中的内容更改方法中单元格的高度。*

## 我试过的

以下是当前应用的所有约束和单元格： ![在此处输入图像描述](https://i.stack.imgur.com/XQPOl.png)

我试过了 ：

*   带一个`UILabel`.
*   `Vertical Space`要从底部修复 a ，认为它会改变高度以适应所有约束。
*   `Height`用用户约束（我的初始高度）覆盖，但每当我这样做时，都会重新创建`Height >= 43`紫色自动。`Height`
*   首先在 SO 上找到解决方案，但没有找到类似的情况（即使 UITextView 的高度通过自动布局调整大小似乎是一个常见问题）。
*   各种和随机约束的大量组合，直到我的手指流血。

## 现在如何渲染

![在此处输入图像描述](https://i.stack.imgur.com/HVRU6.png)

## 所以...

如果有人有任何线索或指导来实现我的目标，我将不胜感激！

*我可以补充一下，我对自动布局和约束完全陌生。我的参考：[Ray Wenderlich 的出色表现](http://www.raywenderlich.com/20897/beginning-auto-layout-part-2-of-2)*

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-25T16:22:57.000

您需要摆脱文本视图所具有的高度约束。确保您对文本视图上方和下方的某些内容（通常是单元格的顶部和底部）有约束，然后您应该能够删除该高度约束。

# xcode - 试图理解自动布局

> ID：16219894
> 
> 赞同：2
> 
> 时间：2013-04-25T16:18:54.043
> 
> 标签：xcode, ios6, autolayout

我正在尝试了解如何使用自动布局，但我无法理解如何使用它来完成这样的事情。我有一个带有两个子视图视图的 iPad ViewController。我希望布局可以像这种表示形式一样工作，但我不清楚要设置哪些值。特别是两个子视图之间的关系：

![自动布局帮助](https://i.stack.imgur.com/XBHXU.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T16:22:54.780

左视图应固定到超级视图的顶部、左侧和底部边缘（使用您的填充）它的右边缘应固定到右视图的左边缘。

右视图应固定到超级视图的顶部、右侧和底部边缘（使用您的填充）。它应该有一个具有恒定值的宽度约束，您可以在旋转时将其设置为适当的数字。

在 IB 中，您将为宽度约束创建一个出口。在代码中，只需在创建它时将其分配给一个属性。

# javascript - SyntaxHighlighter.highlight() 不会在 pre 中的修改内容上引起语法高亮

> ID：16219903
> 
> 赞同：2
> 
> 时间：2013-04-25T16:19:26.930
> 
> 标签：javascript, syntaxhighlighter

这是我的情况，我有一个 pre 标签，我用要突出显示的内容填充，当我用页面加载的内容填充 pre 标签时，它可以工作，突出显示等等。但是，如果在页面加载后我更新了 pre 标记中的内容并尝试再次突出显示内容，则没有任何反应。我已经尝试了其他有关此主题的 stackoverflow 答案中的所有建议，但没有任何效果。我已经倾注了源代码，对其进行了调试（没有太大进展），但我很难做到这一点。

Javascript：

```
var src = "\/*\n\tsome source\n\ttesting SyntaxHighlighter\n*\/\n\nfunction arrr()\n{\n\tvar ru = \"apirate?\";\n\treturn \"sure\";\n}\n\nvar calculatron = function(_a, _b)\n{\n\treturn (_a + _b);\n}\n\/\/ ...";
var $ = function (_id) { return document.getElementById(_id); }
function add_content()
{
    // re-adding the pre tags when updating content fixes a known issue.
    $('code').innerHTML = "<pre>" + src + "</pre>";

    <!-- does not work when updating content -->
    SyntaxHighlighter.highlight();
} 
```

HTML：

```
<pre id="code" class="brush: js;"></pre>

<input type="submit" value=" submit " onclick="add_content()" />

<!-- works for onload -->
<script type="text/javascript">
SyntaxHighlighter.all();
</script> 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T17:29:57.080

呃，我终于意识到我的问题是什么了。为什么总是这样；就在我出去寻求帮助之后，一个小时后我想通了？

无论如何，我在下一行中的“pre”元素修复是我的问题；

```
// re-adding the pre tags when updating content fixes a known issue.
$('code').innerHTML = "<pre>" + src + "</pre>"; 
```

它缺少一个关键组件。

更正：

```
// re-adding the pre tags when updating content fixes a known issue.
$('code').innerHTML = "<pre class=\"brush: js;\">" + src + "</pre>"; 
```

# javascript - 在highchart中单击bar时如何触发另一个图表的显示？

> ID：16219904
> 
> 赞同：1
> 
> 时间：2013-04-25T16:19:27.833
> 
> 标签：javascript, jquery, highcharts

我正在使用[Highcharts](http://www.highcharts.com/)库。我有一个条形图，想知道如何触发另一个图表的显示。这是我的条形图的代码：

```
$('#container').highcharts({
    chart: {
        type: 'bar'
    },
    title: {
        text: 'Stacked bar chart'
    },
    xAxis: {
        categories: [ "Meat", "Fruit", "Veg" ]
    },
    yAxis: {
        min: 0,
        title: {
            text: 'Total'
        }
    },
    legend: {
        backgroundColor: '#FFFFFF',
        reversed: true
    },
    plotOptions: {
        series: {
            stacking: 'normal'
        }
    },
        series: [{
        name: 'Yes',
        data: [
            42, 17, 34]
    }, {
        name: 'No',
        data: [
        10,16,38 ]
    }]
}); 
```

例如，当用户单击“肉类”栏时，在此[页面](http://jsfiddle.net/X65dh/1/)上的图表中，我想在页面的*其他*位置加载一个饼图，显示“肉类”数据的细分，同样适用于“水果”和“蔬菜棒。

Highcharts 的向下钻取功能是我发现的最接近我需要的功能，需要注意的是细分图表的显示取代了原始图表。

# entity-framework - Entity Framework 5 Code First - 如何“重新开始”？

> ID：16219905
> 
> 赞同：6
> 
> 时间：2013-04-25T16:19:28.343
> 
> 标签：entity-framework, ef-code-first, entity-framework-5, entity-framework-migrations

我一直在我的应用程序中成功使用 EF 5 Code First。我有大约 40 张桌子。但是，我遇到了一个问题，我似乎可以让 Migrations 正确处理。所以，我想做的就是以某种方式告诉 EF 将数据库的当前模式作为一个新的起点，并从这一点开始管理它。这样，我可以手动进行必要的架构更改，然后告诉 EF 基本上从这一点开始。

有没有办法我可以做到这一点？我想我将不得不删除 __MigrationHistory 表，或者删除它的内容。但我不确定如何最好地继续这样做。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-25T17:09:48.200

您应该能够执行以下操作：

*   手动更改数据库以反映模型中不会由迁移处理的更改。现在一切正常，但数据库和迁移系统不同步。

*   运行`Add-Migration ManuallyUpdatedDatabase -IgnoreChanges`。这会创建一个完全空的迁移，因此它不会对数据库进行任何更改，但会确保系统知道已进行的手动更改。这样，手动更改将不会包含在您创建的下一个迁移中。

*   运行`Update-Database`以应用空迁移。

从这里开始，一切都应该照常工作。您的迁移中只有一个“缺失的链接”，因为您已经手动处理了一些更改。

# ruby - 从 RUBY 中的 if 循环中打印编辑过的单词

> ID：16219910
> 
> 赞同：0
> 
> 时间：2013-04-25T16:19:36.710
> 
> 标签：ruby, if-statement, printing

我正在通过 codecademy 中的练习，并且被困在我的代码没有做我需要做的事情的地方。我需要做的就是打印单词，但如果单词被编辑，我需要它打印“REDACTED”。据我所见，这就是我的代码正在做的事情，但我必须在错误的地方有一个符号，否则缺少某些东西。所以，如果有人能看到我哪里出错了，我肯定会很感激朝着正确的方向轻推！谢谢你！这是我的代码：

```
puts "Whats your input brah?"
text = gets.chomp
puts "Whatchu are you hiding bro?"
redact = gets.chomp
words = text.split(" ")
words.each {|x| if x == redact print "REDACTED"+" " else print x+" "} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T18:22:06.710

我找到了答案。总之谢谢大家！

```
puts "Whats your input brah?"
text = gets.chomp
puts "Whatchu are you hiding bro?"
redact = gets.chomp
words = text.split(" ")
words.each {|x| if x == redact then print "REDACTED"+" " else print "#{x}"+" " end} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T16:39:28.597

`words`是一个数组，并且`redact`是一个字符串。所以你不能用`==`. 您要做的是查看是否`redact`存在于`words`. 您可以使用以下方法执行此操作[`include?`](http://ruby-doc.org/core-2.0/Array.html#method-i-include-3F)：

```
if words.include?(redact) ... 
```

实现这一点的更好方法是在原始输入字符串上使用[正则表达式：](http://ruby-doc.org/core-2.0/Regexp.html)

```
print text.gsub(/\b#{redact}\b/, 'REDACTED') 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-01-27T11:05:37.460

使用`$end`而不是`end`for

```
words.each 
{
 |x| 
 if x == redact 
   print "REDACTED"+" " 
 else 
   print x+" "
} 
```

# c - 如何避免管道破裂？

> ID：16219912
> 
> 赞同：4
> 
> 时间：2013-04-25T16:19:46.177
> 
> 标签：c, sockets

我尝试用 c 开发一个聊天应用程序。我使用套接字和`select()`. 但是如果我在客户端之前关闭服务器，客户端会收到一条消息“Broken Pipe”。我使用了 select()，但我不知道如何避免它？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-25T16:23:55.953

You can disable the signal:

```
signal(SIGPIPE, SIG_IGN); 
```

Though the chosen answer was to ignore signal process wide, there are other alternatives:

Using send function with MSG_NOSIGNAL:

```
 send(con, buff_enviar+enviado, length-enviado, MSG_NOSIGNAL); 
```

Disabling SIGPIPE on socket level (not available on all kernels):

```
int flag = 1;
setsockopt(con, SOL_SOCKET, SO_NOSIGPIPE, &flag, sizeof(flag)); 
```

Disabling SIGPIPE for caller thread (you can restore it after):

```
sigset_t set;
sigemptyset (&set);
sigaddset (&set, SIGPIPE);
pthread_sigmask(SIG_BLOCK, &set, NULL); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T16:22:34.950

为 PIPE 信号注册一个处理程序（并且可能忽略该信号）。

# jquery - JQuery AJAX POST 调用需要很长时间

> ID：16219914
> 
> 赞同：6
> 
> 时间：2013-04-25T16:19:47.943
> 
> 标签：jquery, ajax, post

我用大量数据发出请求 POST，但请求的发送需要很长时间。我说只发送因为我有这个代码：

```
 console.time('post load');
var req= new Array;
                req = { 
                     'data' :   $('input[name="data"]', $('#id_contain')) .serialize()
                };

var request = $.ajax({
                                    url : '/url',
                                    type : "POST",
                                     data : req,
                                    cache : false,
                timeout: 10000,
                                    dataType : 'json',
                                    async:   false,
                                    success : function(response){
                               alert('yes');
                }, 
                                    error : function(jqXHR, textStatus,
                                            errorThrown) {
                                    //  if (debug_js) {
                                            console.log(jqXHR);
                                //      }
                                    }
                                });
               console.timeEnd('post load');
  console.log('data'); 
```

所以根据这段代码，我的请求（加载后）大约需要 25 秒，而我的 onajax 请求超时 10 秒。所以我认为这只是 jquery 发出请求需要时间吗？但是，如果我用一个简单的字符串更改数据巨大的数据，它需要大约 0.01 秒......所以这真的是由于我的巨大数据吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2014-09-09T08:11:53.310

有完全相同的问题。在一个用例中，我必须发送 3 个 JSON 对象，总共约 20MB；虽然只发送到 localhost 大约需要 20 秒或浏览器超时（Firefox、Chrome）。

经过大量尝试和错误（也尝试注释掉所有服务器逻辑，但没有加快进程），我终于找到了解决方案：

1.  字符串化你的 JSON 数据： JSON.stringify(req);
2.  将 contentType: 'application/json' 添加到您的 ajax 请求
3.  在服务器端添加逻辑以从 http-post 中读取 json 内容

3\. 步骤取决于您运行的服务器类型。对我来说，它是一个带有用于 json-content 的 body-parser 模块的 node express 服务器。

在这些更改之后，jquery 的 http-post 创建时间从 20 秒下降到不到 1 秒。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T18:13:54.187

正如 Niels 提到的，这可能是后端（服务器端）问题。我建议您先尝试注释掉服务器端的任何处理逻辑，然后立即返回您的成功条件。如果请求仍然需要很长时间，那么罪魁祸首肯定是庞大的数据，您可能必须考虑某种客户端数据压缩。[此处](http://problemsolverblog.blogspot.com/2011/10/javascript-compression-libraries.html)对执行此操作的各种选项进行了一些分析。

# c# - 用于 win 8 手机应用程序开发的 Web 服务

> ID：16219915
> 
> 赞同：0
> 
> 时间：2013-04-25T16:19:48.363
> 
> 标签：c#, windows-8, windows-phone-8, odata

我正在寻找用于 odata 服务的库。甚至有这样的事情吗？

就像我想为 craigslist 开发一个应用程序，并且我想知道那里有哪些可用的服务，以检查是否有标准的图书馆服务，我可以在其中检查可用的服务

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-26T12:00:53.667

我认为您必须从 www.odata.org 开始。这个非常适合从 odata 开始。

在这里查看 odata.org 网站下的生态系统会发现很多示例和应用程序。

[http://www.odata.org/ecosystem/](http://www.odata.org/ecosystem/)

# request - 指代 sharepoint 2013 上的点赞数的变量是什么？

> ID：16219918
> 
> 赞同：0
> 
> 时间：2013-04-25T16:20:17.387
> 
> 标签：request, sharepoint-2013

我想在搜索结果请求 webpart 上写一个请求。我的请求应该使我能够检索所有喜欢最多的文档。在编写请求时，下拉列表中提出的点赞数没有变量，这就是为什么我决定设置一个 refinableInt00 变量并为其赋值： LikesCount 但它不起作用？这意味着 LikesCount 不作为 sharepoint 上的变量存在，那么 sharepoint 上的变量是什么，可以让我获得喜欢的数量？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-20T12:33:38.880

您可以使用 listitem 属性“Number of Likes”获取喜欢的数量这是来自示例控制台应用程序的代码

```
using (SPSite site=new SPSite("your site URL"))
{
    using (SPWeb web=site.OpenWeb())
    {
        SPList list = web.Lists["Your List Name"];
        foreach (SPListItem item in list.Items)
        {
            //Print the number of likes
            Console.WriteLine(item["Number of Likes"].ToString());
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-22T18:24:33.113

我知道这很旧，但我有同样的问题。问题是 LikesCount 属性不默认为 Sortable。要解决这个问题：

- 开放中央管理

-转到搜索服务应用程序

-单击搜索架构

- 找到“LikesCount”属性并单击编辑

-向下滚动到可排序并更改为是

- 在您的内容源上运行完整的爬网

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-11-08T11:18:30.817

必须启用列表的评级。列表 -> 列表设置 -> 评级设置 ->

**允许对此列表中的项目进行评级吗？是的 ？不**

和

**您希望为此列表启用哪种投票/评分体验？
喜欢？星级**

之后，您可以通过“赞数”字段名称“赞数”访问赞。“评分数”字段名称“RatingCount”

# jquery-mobile - 输入文本上的 Jquery Mobile 粘贴事件

> ID：16219926
> 
> 赞同：2
> 
> 时间：2013-04-25T16:20:58.303
> 
> 标签：jquery-mobile, onpaste

我正在使用 Jquery Mobile 开发适用于 Android 和 iPhone 的网络应用程序。当用户在输入文本字段中更改其值时，我想处理该事件。

最初，我使用`.on("keyup change")`，一切似乎都正常。但是，当用户在文本字段上粘贴一些文本时（通过按住并点击“粘贴”），我的事件处理程序不会被调用。

如果您知道如何解决此问题，请帮助我。

谢谢你们。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-25T18:20:09.263

**适用于所有浏览器，但不适用于 FireFox。**

> **[演示](http://jsfiddle.net/Palestinian/spMcF/)**

```
$('input').on('paste', function (e) {
 if (e.originalEvent.clipboardData) {
  var text = e.originalEvent.clipboardData.getData("text/plain");
  $('p').empty();
  $('p').append(text);
 }
}); 
```

> 归功于：[jQuery Detect Paste Event Anywhere on Page 并将其“重定向”到 Textarea](https://stackoverflow.com/questions/14131617/jquery-detect-paste-event-anywhere-on-page-and-redirect-it-to-textarea)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-08-21T19:48:11.363

1.  对于 Android 添加超时，因为它是在这个例子[http://ajax911.com/numbers-numeric-field-jquery/](http://ajax911.com/numbers-numeric-field-jquery/)

2.  对于 iPad 添加事件“更改”和粘贴，在 iphone 上工作

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-02-16T20:54:57.440

这是在移动 Safari 和 Chrome 上对我有用的方法。

```
if (document.getElementById('search_input')) {
    document.querySelector('#search_input').addEventListener('paste', (e) => {

        let pasteData = (e.clipboardData || window.clipboardData).getData('text');
        pasteData = pasteData.replace(/[^\x20-\xFF]/gi, '');
        window.setTimeout(() => {
            //do stuff
        });
    });
} 
```

# java - 合并对象的 Arraylist 并根据字段值删除重复项

> ID：16219928
> 
> 赞同：0
> 
> 时间：2013-04-25T16:21:00.867
> 
> 标签：java

我正在寻找满足以下要求的最佳解决方案。

我有一个类似于`ClassA`下面的课程

```
public class ClassA {
    protected List<ClassA.PlanA> planA;

    public List<ClassA.PlanA> getPricePlan() {
        if (planA == null)
            planA = new ArrayList<ClassA.PlanA>();
        return this.planA;
    }

    public static class PlanA {
        protected String code;
        protected XMLGregorianCalendar startDate;
        protected XMLGregorianCalendar endDate;

        // Getters and setters for the above fields
    }   
} 
```

我有两个对象`(obj1, ojb2)`。`ClassA`要求是合并两个对象并删除重复项。

例子：

```
ClassA obj1=[PlanA =[code=AAA, startDate=2010/12/10, endDate=2011/12/10], PlanA =[code=BBB, startDate=2010/12/10 endDate=<null>]] 

ClassA obj2=[PlanA=[code=AAA, startDate=2011/12/10], PlanA= [code=CC, startDate=2011/12/10 endDate=<null>], PlanA= [code=BBB, startDate=2010/12/10 endDate=2011/12/10]] 
```

合并后的结果应该是这样的：

```
ClassA obj3=[PlanA[code=AAA, startDate=2011/12/10], PlanA= [code=CC, startDate=2011/12/10 endDate=<null>],PlanA= [code=BBB, startDate=2010/12/10 endDate=<null>]} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T16:40:12.720

实施`equals`和：`hashcode`_`PlanA`

```
public static class PlanA {

    protected String code;
    protected XMLGregorianCalendar startDate;
    protected XMLGregorianCalendar endDate;

    @Override
    public boolean equals(Object obj) {
        return obj instanceof PlanA && obj.hashCode() == hashCode();
    }

    @Override
    public int hashCode() {
        return Arrays.hashCode(new Object[] { code, startDate, endDate });
    }

} 
```

然后使用`Set`：

```
Set<ClassA.PlanA> merged = new HashSet<ClassA.PlanA>();
merged.addAll(obj1.getPricePlan());
merged.addAll(obj2.getPricePlan()); 
```

A`Set`自动删除重复项。

# jquery - 一次调用加载所有小部件资产？

> ID：16219932
> 
> 赞同：0
> 
> 时间：2013-04-25T16:21:15.430
> 
> 标签：jquery, css, loading

我想知道是否有可能（本机或通过插件）对 URL 进行一次调用并让它返回单个小部件的 CSS 和 JS 文件。这是假设我可以控制请求和此类请求的响应。

这是可能的（如果是的话，如何）还是我只是过于乐观了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T16:25:31.490

你不需要请求？您可以动态添加样式表/JS 文件。

```
// The JS
$.getScript("http://www.domain.com/script.js", function(){
    alert("SCRIPT LOADED");
});

// The CSS
var url = "http://www.domain.com/style.css";
$('head').append( '<link rel="stylesheet" type="text/css" href="' + url + '" />' ); 
```

其他方法：

1.  执行 ajax 调用并将 JS 添加到头部，就像上面完成的 CSS 一样。

# css - 填充的无效属性值

> ID：16219935
> 
> 赞同：3
> 
> 时间：2013-04-25T16:21:19.123
> 
> 标签：css, ruby, html

我得到无效的填充属性值，我不知道为什么。这段代码是用 ruby​​ 编写的。当我使用浏览器检查时，它具有正确的像素值，但是它被划掉了 wa 线并且它没有读取该属性。提前致谢。

```
<% mywaldo = Mapping::MYWALDOS.sample %>
<!doctype html>
<html>
  <head>
    <title>Sinatra Single-Serve</title>
    <link href="css/bootstrap.css" rel="stylesheet" type="text/css"/>
    <style>
      div {
        width: 1024px;
        height: 768px;
        background-image: url("img/waldos/<%= mywaldo[0]%>") ;
      }
      #waldo {
        position:absolute;
        top: <%= mywaldo[2]%>;
        left: <%= mywaldo[1]%>;
        padding: <%= mywaldo[3]%>, <%= mywaldo[4]%>;
      }
    </style>
  </head>
  <body>
    <div>
      <a id="waldo" href="">AA</a>
    </div>
    <%= yield %> 
  </body>
</html> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-25T16:26:12.933

您的值之间不应有逗号：

```
 padding: <%= mywaldo[3]%> <%= mywaldo[4]%>; 
```

# java - List之间有什么优势吗 和 HashMap

> ID：16219936
> 
> 赞同：4
> 
> 时间：2013-04-25T16:21:19.430
> 
> 标签：java, list, hashmap

我正在尝试实现一个解决方案（在 Java 1.6 中），我需要存储一些值（用于一组属性）并考虑以下三个选项来考虑三个选项（当然，任何其他想法都是受欢迎的！）

**选项1**

创建一个`Property`可以存储不同类型对象（String、int、boolean...）的类（调用它），并将属性集作为 `List<Property>`

就像是：

```
private String type; //Store the type of Object
private String name; //Store the name of the property
private String valueStr; //Store the String value
private int valueInt; //Store the int value
private boolean valueBool; //Store the boolean value 
```

我真的不喜欢拥有许多属性并只使用其中一个的想法。（每个属性只会设置一个值）

**选项 2**

`HashMap<String, Object>`在每种情况下使用和解析类型。

有个好东西，你可以得到`Property`名字

**选项 3**

使用`HashMap<String, Property>`Where String 是属性的名称，可以通过名称获取值，无需解析。

问题是：你认为哪一个是最好的？或者如果它们都不好，我想听听其他想法

List 和 HashMap 之间还有性能差异吗？

在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-25T16:27:33.570

我认为最好有一个这样的自定义 Value 类：

```
public class MyValue {
    enum Type {
       INT, STRING, BOOL;
    }
    private Type type; //Store the type of Object in Type Enum
    private Object value; //Store the value in Object

    public void setValue(int val) {
       type = Type.INT;
       value = new Integer(val);
    }
    public void setValue(String val) {
       type = Type.STRING;
       value = val;
    }
    public void setValue(boolean val) {
       type = Type.BOOL;
       value = new Boolean(val);
    }

    public String stringVal() {
        // check type to be STRING first
        return (String) value;
    }
    public int intVal() {
        // check type to be INT first
        return ((Integer) value.intValue());
    }
    public boolean booleanVal() {
        // check type to be BOOL first
        return ((Boolean) value.booleanValue());
    }
} 
```

您需要根据`enum Type`您的 getter 从 Object 转换为特定类型。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T16:27:40.883

另一种选择是这样的，使用继承而不是保留大量未使用的字段。

```
public interface Property {
    String getType();
    String getName();
    Object getValue();
}

public abstract class AbstractProperty implements Property {
    private final String name;

    protected AbstractProperty(String name) {
        this.name = name;
    }
}

public class StringProperty extends AbstractProperty {
    private final String value;

    public StringProperty(String name, String value) {
        super(name);
        this.value = value;
    }

    @Override
    public String getType() {
        return String.class.getName();
    }

    @Override
    public String getValue() {
        return value;
    }
}

public class IntegerProperty extends AbstractProperty {
    private final Integer value;

    public IntegerProperty(String name, Integer value) {
        super(name);
        this.value = value;
    }

    @Override
    public String getType() {
        return Integer.TYPE.getName();
    }

    @Override
    public Integer getValue() {
        return value;
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-25T16:28:12.003

我认为选项 2 最适合您。考虑到您正在存储属性，我希望您会经常查询此列表，该列表再次指向 HashMap 的方向，因为这将使您的查找非常有效。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-25T16:28:14.713

我建议改用一个`enum`。枚举有利于保存值列表，并且在检索方面很有效。

```
public enum Property {
    TYPE,
    NAME,
    VALUEINT; //...

    private String sProp = "";
    private int iProp = 0;
    private boolean bProp = false;

    public String getStringProp() {return sProp;}
    public int getIntProp() {return iProp;}
    public boolean getBoolProp() {return bProp;}

    public void setStringProp(String str) {this.sProp = str;}
    public void setIntProp(int i) {this.iProp = i;}
    public void setBoolProp(boolean b) {this.bProp = b;}
} 
```

然后可以使用`Property.TYPE`,`Property.VALUEINT`等访问它。您可以使用 设置属性`Property.TYPE.setStringProp()`，并使用 获取它们`Property.TYPE.getStringProp()`。

[您可以从Oracle 的网站](http://docs.oracle.com/javase/tutorial/java/javaOO/enum.html)阅读更多关于枚举的信息。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-25T16:30:14.093

我不确定是否有一种“最佳”方式。这实际上取决于存储在数据结构中后如何使用数据。

如果我只需要累积属性并对它们中的每一个做一些事情，我有时会使用一个列表，甚至是一个数组。

如果您可能必须通过名称获取特定属性，那么 HashMap 可能会有所帮助。

同样，如果您想使用本机对象类型或 Property 的实例，则取决于您拥有的数据类型。

哪个性能更好取决于您拥有的对象数量、访问它们以供使用的方式、插入的频率以及其他几个因素。

# android - 为什么自定义控件在 activity_main.xml 中不可见

> ID：16219938
> 
> 赞同：1
> 
> 时间：2013-04-25T16:21:25.133
> 
> 标签：android, android-layout

这是新代码，它不会抛出异常，但我看不到我的自定义控件“第二”。这是新代码：

活动主.xml：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/layoutRoot"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

    <LinearLayout
        android:id="@+id/L1"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_gravity="center_vertical" >

        <Button
            android:id="@+id/addButton"
            android:layout_width="74dp"
            android:layout_height="wrap_content"
            android:text="Add" />

        <EditText
            android:id="@+id/newEditText"
            android:layout_width="174dp"
            android:layout_height="wrap_content"
            android:layout_weight="3.24"
            android:ems="10"
            android:inputType="text" />
    </LinearLayout>

    <LinearLayout
        android:id="@+id/List"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:orientation="vertical" >
    </LinearLayout>    
</LinearLayout> 
```

这是自定义控件：second.xml：

```
<?xml version="1.0" encoding="utf-8"?>
    <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
        android:id="@+id/secodView"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:orientation="vertical" >

        <LinearLayout
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:orientation="horizontal" >

            <Button
                android:id="@+id/expandButton"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_weight="0.44" 
                android:text = "Expand"/>

            <TextView
                android:id="@+id/txtView"
                android:layout_width="253dp"
                android:layout_height="wrap_content"
                android:layout_weight="0.56"
                android:ems="10" 
                android:text = "LOL"/>  
        </LinearLayout>

        <RadioGroup
            android:id="@+id/ratingRadioGroup"
            android:layout_width="321dp"
            android:layout_height="wrap_content"
            android:orientation="horizontal" >

            <RadioButton
                android:id="@+id/likeButton"
                android:layout_width="145dp"
                android:layout_height="wrap_content"
                android:checked="true"
                android:text="Like" />

            <RadioButton
                android:id="@+id/dislikeButton"
                android:layout_width="147dp"
                android:layout_height="wrap_content"
                android:text="Dislike" />
        </RadioGroup>
</LinearLayout> 
```

第二个.java类：

```
public class Second extends ViewGroup
{
    private Button mExpandButton;
    private RadioButton mLikeButton;
    private RadioButton mDislikeButton;
    private TextView mText;
    private RadioGroup mLikeGroup;
    private ViewGroup vGroup;

    OnClickListener myClickListener = new OnClickListener()
    {
        @Override
        public void onClick(View v)
        {
            String s= mExpandButton.getText().toString();

            if (s.equals("One Click"))
                mExpandButton.setText("Other Click");
            else
                mExpandButton.setText("One Click");
        }
    };

    OnCheckedChangeListener myCkeckListener = new OnCheckedChangeListener()
    {
        @Override
        public void onCheckedChanged(RadioGroup group, int checkedId)
        {
            if (mLikeButton.isChecked())
                mText.setText("I Like it");

            if (mDislikeButton.isChecked())
                mText.setText("I Don't Like it");
        }
    };

    public Second(Context context) 
    {
        super(context);
        LayoutInflater inflater = (LayoutInflater)context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        View view = LayoutInflater.from(context).inflate(R.layout.second, this, true);

        mText = (TextView)this.findViewById(R.id.txtView);
        mExpandButton = (Button) this.findViewById(R.id.expandButton);
        mLikeGroup = (RadioGroup)this.findViewById(R.id.ratingRadioGroup);
        mExpandButton.setOnClickListener(myClickListener);
        mLikeGroup.setOnCheckedChangeListener(myCkeckListener);

        //inflater.inflate(R.layout.second, null);
    }

    @Override
    protected void onLayout(boolean arg0, int arg1, int arg2, int arg3, int arg4) 
    {
        // TODO Auto-generated method stub      
    }
} 
```

ActivityMain.java 类，活动开始的地方：

```
public class MainActivity extends Activity 
{
    protected LinearLayout mList;
    protected EditText mEditText;   
    protected Button mButton;
    Second[] sec;
    boolean unavez; 

    OnClickListener myClickListener = new OnClickListener()
    {
        @Override
        public void onClick(View v)
        {           
        }
    };

    @Override
    protected void onCreate(Bundle savedInstanceState) 
    {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        mList = (LinearLayout)findViewById(R.id.List);
        mEditText = (EditText)findViewById(R.id.newEditText);
        mButton = (Button)findViewById(R.id.addButton); 

        sec = new Second[4];
        unavez = true;

        for (int i=0; i<4; i++)     
            sec[i]= new Second(this);       
    }

    @Override 
    protected void onStart() 
    {
        super.onStart();
    }

    @Override protected void onResume() 
    {
        super.onResume();

        if (!unavez)
            return;

        for (int i=0; i<4; i++)
        {
            mList.addView(sec[i]);
            //setContentView(sec[i]);
        }

        unavez = false;
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) 
    {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.main, menu);
        return true;
    }
} 
```

运行时，在activity_main.xml中可以看到Button和EditText，但是在second.xml中看不到我的自定义控件。如果我在 onResume() 中使用 setContentView(sec[i]) 而不是 mList.addView(sec[i]) 行，情况会变得更糟：activity_main.xml 中的 EditText 和 Button 不可见，我得到一个空白布局。

如何将自定义控件添加到 activity_main.xml 并使其对用户可见？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T16:41:21.040

您选择`Second`直接继承自`ViewGroup`. 既然你这样做了，`Second`就必须是**一个真实的`ViewGroup`**，具有真正的`onLayout()`实现以及与成为`ViewGroup`. 不要只是随机覆盖具有无操作实现的方法，然后在无操作实现什么都不做时抱怨。

创建“自定义控件”是 Android 中一个比较高级的话题。Android 新手应该专注于其他解决方案，以解决他们认为“自定义控件”能够以某种方式解决的任何问题。

# c++ - C++ Qt：找不到动态库的方法

> ID：16219940
> 
> 赞同：0
> 
> 时间：2013-04-25T16:21:35.163
> 
> 标签：c++, qt, plugins

我正在开发一个必须是可插入的 Qt 应用程序。我环顾四周，突然发现了一个 Qt 插件示例：http: [//doc.qt.digia.com/4.6/tools-echoplugin.html](http://doc.qt.digia.com/4.6/tools-echoplugin.html)

我已经改变了一些关于类的东西。我添加了一个随机数生成器：

随机发生器.h：

```
#ifndef RANDOMNUMBER_H
#define RANDOMNUMBER_H

class RandomNumber
{
public:
    ~RandomNumber();
    RandomNumber();
    int getNumber();
};

#endif // RANDOMNUMBER_H 
```

随机发生器.cpp：

```
#include "randomnumber.h"
#include <stdio.h>
#include <stdlib.h>
#include <time.h>

RandomNumber::RandomNumber()
{
    srand(time(NULL));
}

int RandomNumber::getNumber(){
    return rand() % 20;
} 
```

然后我在插件中做了一个小调整：

回声插件.cpp：

```
#include <QtGui>
#include "randomnumber.h"
#include "echoplugin.h"

QString EchoPlugin::echo(const QString &message)
{
    RandomNumber* rn = new RandomNumber();
    QString a;
    a.setNum(rn->getNumber());
    return a;
}

Q_EXPORT_PLUGIN2(echoplugin, EchoPlugin); 
```

这是我正在开发的程序的一个非常简化的版本。给定链接上示例的其他类和方法未更改。当我尝试执行这个程序时，我得到了与我自己的程序相同的错误：

```
/home/user/qt/v1/echoplugin/echoplugin: symbol lookup error: /home/user/qt/v1/echoplugin/plugins/libechoplugin.so: undefined symbol: _ZN12RandomNumberC1Ev 
```

我通过 c++filt 运行它，它说问题出在

```
RandomNumber::RandomNumber() 
```

但我找不到有关该方法的任何错误。

提前致谢！

* * *

编辑：此时，我已经自己解决了这个问题，现在将为遇到同样问题的程序员提供解释。

这实际上是一个非常简单的解决方案：如果您想使用不在界面头文件中的头文件和源文件的代码，您所要做的就是在您的 .pro 文件中包含相对路径，并且包括源代码-文件和头文件。因此，如果我想使用 RandomNumber 类，我必须将其添加到插件的 .pro 文件中：

```
HEADERS += ../randomnumber.h
SOURCES += ../randomnumber.cpp 
```

# jquery - jqGrid在分组时对列进行排序考虑分组标题

> ID：16219944
> 
> 赞同：5
> 
> 时间：2013-04-25T16:21:49.273
> 
> 标签：jquery, jqgrid, jqgrid-asp.net

我有jqgrid。我根据列值对几行进行了分组。工作演示可在 定义 jqGrid 的代码的[链接部分获得](http://jsfiddle.net/xx7Jg/12/)

```
 var preclosingtable = $('#preclosing');
    preclosingtable.jqGrid({
        datatype: 'local',
        data: data.DOCS,
        colNames: ['', 'Documents Received', 'Comments', 'NA', 'DocGroup'],
        colModel: [
        { name: 'Documents', index: 'Documents', align: 'left', sortable: false, editable: false, width: 20 },
        { name: 'DocsReceived', index: 'DocsReceived', align: 'center', sortable: false, editable: true, edittype: 'checkbox', editoptions: { value: "True:False" }, formatter: "checkbox", width: 140 },
        { name: 'Comments', index: 'Comments', align: 'center', sortable: false, editable: true, edittype: "textarea", editoptions: { rows: "3", cols: "16" }, width: 180 },
        { name: 'NA', index: 'NA', editable: true, formatter: 'dynamicText', width: 150, edittype: 'custom', editoptions: { custom_element: radioelem, custom_value: radiovalue} },
            { name: 'DocGroup', index: 'DocGroup', editable: false, width: 1 }
        ],
        rowNum: data.DOCS.length,
        //rowList: [10, 20, 30],
        pager: '#preclosingpagerdiv',
        viewrecords: true,
        sortorder: "asc",
        sortname: 'Documents',
        grouping: true,
        groupingView: {
            groupField: ['DocGroup'],
            groupColumnShow: [false],
            groupDataSorted: true,
            groupOrder : 'asc'
        },
        localReader: {
            id: 'ConfigId'
        },
        shrinkToFit: false,
        height: 'auto',
        loadComplete: function () {
            HideGroupHeaders(this);
        },
        onSelectRow: function (id) {
            preclosingtable.jqGrid('saveRow', previouslyselectedRow, false, 'clientArray');
            previouslyselectedRow = SetJQGridRowEdit(id, previouslyselectedRow, preclosingtable);
        }
    }); 
```

以下是我的网格的样子 ![分组后的jqGrid](https://i.stack.imgur.com/DgbPx.png)

问题：是否可以对此网格中的行进行排序，以便最终网格具有以下顺序的行

*   阿拉巴马州
*   D
*   缅因州
*   新泽西州
*   问
*   弗吉尼亚

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-25T17:56:20.627

如果我正确理解您的问题，您可以通过在您进行分组的列上添加自定义排序功能（参见[此处](https://stackoverflow.com/a/8001822/315935)、[此处](https://stackoverflow.com/a/5296935/315935)和[此处）来解决您的问题：](https://stackoverflow.com/a/3329852/315935)`DocGroup`

```
sorttype: function (cellvalue, rowObject) {
    return cellvalue? cellvalue : rowObject.Documents;
} 
```

结果，具有空的输入数据`DocGroup`将被排序并按 分组`Documents`。[您将在Fiddle](http://jsfiddle.net/xx7Jg/14/)上看到结果

![在此处输入图像描述](https://i.stack.imgur.com/n95W4.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T17:36:16.887

我想到了两件事，您可以在网格中创建另一行进行排序。不将任何数据放入服务器端的该列，然后在 jqGrid 上的 beforeProcessing 函数中将数据添加到该列。

在 beforeProcessing 函数中，您可以测试分组数据并使用第一个字符填充此列，然后如果值为空白（对于上面的 D、Q 示例），您将使用这些值。

这是 beforeProcessing 函数，您可以将其用作填充此列的基础，然后对其进行排序：

```
 beforeProcessing: function (data, status, xhr) {
            for (var x = 0, length = data.rows.length; x < length; x++) {
                var valueToPutInSortColumn = ....
                data.rows[x].cell.splice(sortColumnIndex, 0, valueToPutInSortColumn );
            }
        .... 
```

# mysql - 如何编写传递给其他 sql 查询的游标？

> ID：16219946
> 
> 赞同：-1
> 
> 时间：2013-04-25T16:21:56.660
> 
> 标签：mysql, sql, sql-server

我有一个`select`声明，它给了我以下结果

```
MasterID   Date
123        2012-10-15 00:00:00.000
124        2012-12-03 00:00:00.000
453        2012-01-07 00:00:00.000 
```

`(output is having 1999 rows)`

现在我需要将此输出传递给一个标量值函数，它给出了参数，例如

```
MyCalculationFunction (@masterID,@date,@previousdate) 
```

我想将上述值传递给，`MyCalculationFunction`以便我只能选择函数并查看每个函数的所有值`masterID`

我还需要在`previousdate`那里提供参数。

所以请帮助我创建任何我可以使用的光标。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T16:31:13.173

在 SQL Server 2012 中：

```
SELECT  myCalculationFunction
                (
                masterId,
                [date],
                LAG([date]) OVER (ORDER BY [date])
                )
FROM    mytable m
ORDER BY
        [date] 
```

在早期版本中：

```
SELECT  myCalculationFunction
                (
                masterId,
                [date],
                (
                SELECT  TOP 1
                        [date]
                FROM    mytable mi
                WHERE   mi.[date] < m.[date]
                ORDER BY
                        mi.[date] DESC
                )
                )
FROM    mytable m
ORDER BY
        [date] 
```

# magento - IE 8 错误 - 原因是什么？

> ID：16219947
> 
> 赞同：0
> 
> 时间：2013-04-25T16:21:56.720
> 
> 标签：magento

我有两个过去在除 IE 7 之外的所有主要浏览器上都能完美运行的 magento 电子商店。在我的计算机上安装 WINDOWS XP 并使用 IE 8 访问我的电子商店后，我几乎心痛地发现它们不能正常工作. 在安装 Windows XP 之前，我运行的是 Windows 7，网站在 IE 8 上看起来不错。现在，相同的 IE 版本，但在不同的操作系统上，让我头疼！

现在，有人可以解释一下如何“调试”ie 8 解析引擎以查看错误并尝试修改模板吗？

谢谢。

# windows-phone-7 - WP - 市场缺少所需的元数据

> ID：16219952
> 
> 赞同：0
> 
> 时间：2013-04-25T16:22:27.923
> 
> 标签：windows-phone-7, windows-phone-8, windows-store-apps, marketplace, windows-store

我试图在市场上发布我的 windows phone 应用程序，但我遇到了这个错误，我不知道如何修复它：

```
Submission errors
    MyAppWinPhone.xap 

        Czech 
            Missing required metadata: Tile icon 
            Missing required metadata: Screenshot WVGA 

        English (International) 
            Missing required metadata: Tile icon 
            Missing required metadata: Screenshot WVGA 
```

应用基于 SDK 7.1

我怎样才能重复这个验证错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T16:59:07.193

应用商店在提交时需要 Tile 图标和至少一张应用程序的屏幕截图，否则将无法完整提交并可能显示错误。探索选项并检查您的错误，将会有一个选项，例如**Show my Errors**。解决这个问题。

# php - 在两个 MySQL 表中存储值

> ID：16219953
> 
> 赞同：1
> 
> 时间：2013-04-25T16:22:33.253
> 
> 标签：php, mysql

我有一个场景，我不确定该怎么做。

我有一个网站，用户可以在其中更新他们的状态。我允许使用哈希标签，因此可能的用户帖子可能如下所示：

今天去远足了！！＃远足

现在，我打算将帖子存储在一个适当命名为“POSTS”的表中，其结构如下：

```
post_id | user_id | text | date 
```

现在，当用户提交包含帖子文本的表单时，我运行一个脚本来创建一个数组以获取用户使用的所有哈希标签术语，然后将它们存储在一个数组中。因此，我可以遍历该数组并将标签插入恰当命名的“TAGS”表中。现在这个表的结构是这样的：

```
tag_id | post_id | user_id | tag 
```

唯一的问题是，直到我将数据插入“POSTS”表（post_id 是主键并且是自动递增）之后，我才知道帖子的 post_id。现在，我在想我可以从“POSTS”表中为该用户选择最后一行数据（在我插入帖子之后），然后将返回的 post_id 用于我的查询，将标签数据插入“标签”表。这似乎不是最好的方法？我的问题是：

这是最好的解决方案还是有更好的方法来解决这种情况？

我是 Stack Overflow 的新手，所以请不要投票给我。评论并告诉我我做错了什么，我会学习并提出更好的问题。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T16:26:26.970

您可以非常简单地获取最后插入的 ID：如果您不使用 PDO，则为 mysql_insert_id()；如果您使用，则使用函数 lastInsertId()。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T16:27:58.643

在两个表中都有一个新列 - unique_id - 它包含您在查询数据库之前在代码中生成的字符串。这样你就有一个 id 在提交之前将帖子和标签绑定在一起。我一直将这种方法用于类似的应用程序。

唯一的问题是唯一性，但有多种方法可以生成唯一 ID（我通常混合使用时间戳和散列）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-25T16:37:46.120

这种类型取决于您使用的 mysql 版本以及您希望如何组织代码。

选项 1\. 完全按照你所说的去做。PHP 将包含管理数据库以及如何将数据存储到数据库中的代码。我在您概述的内容中看到的唯一缺点是，如果处理主题标签存在问题，那么您可能会将帖子插入数据库，但哈希部分未成功完成。对于某些应用程序（如银行帐户），这可能是不可接受的，这就是数据库事务的用途。

选项 2。另一种处理方法是编写一个 mysql 存储过程，它同时执行插入和处理哈希标记。存储过程还可以将整个事物包装在事务中，以使您的数据库保持一致。请注意，这需要支持存储过程的 mysql 版本。这样做的不好的一面是你必须用 mysql 编写，这与 PHP 不同。

mysql 和 PHP 都可以处理这个应用程序逻辑/数据存储逻辑。这是您希望如何组织代码的问题。我宁愿保持层次不同。即使您要在 PHP 中执行此操作，也至少有一个单独的类来处理数据库而不做任何其他事情。当您的代码变得更大时，拥有一个单独的类或模块或命名空间来管理这些类型的代码确实使它们更容易更改和测试。

# javascript - Python 和 Django。从html中删除所有js

> ID：16219955
> 
> 赞同：1
> 
> 时间：2013-04-25T16:22:41.203
> 
> 标签：javascript, python, html, django, wysiwyg

我想显示用户键入的 html（来自 WYSIWYG）。

但是我在从 html 中删除 js 时遇到了一些问题。

这是我的看法：

```
def bad_view(request):
    # in real project we got it from user
    bad_html = '<p onclick="alert(0)">:((</p><script>alert(0);</script>'
    return render(request, 'template.html', {'bad_html': bad_html}) 
```

我的模板中的代码如下：

```
{{ bad_html|safe }} 
```

bad_html 应该是这样的`<p onclick="">:((</p>`

从此 html 中删除所有 js的**最佳**方法是什么？

对于删除`<script>`，我可以使用正则表达式，但是 onclick 处理程序（和其他 js 处理程序）呢？

感谢您的建议！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T17:27:27.260

我推荐使用bleach python库，它旨在处理各种特殊情况，并为您的问题提供完整的解决方案

[http://bleach.readthedocs.org/en/latest/index.html](http://bleach.readthedocs.org/en/latest/index.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T16:45:21.897

我可以为 django [https://www.djangopackages.com/grids/g/forms/](https://www.djangopackages.com/grids/g/forms/)建议一个预构建的解决方案吗？ 大多数都包含某种形式的过滤器示例。我实际上正在研究 TinyMCE。

更多信息在这里[在 Django 中为富文本字段使用安全过滤器](https://stackoverflow.com/questions/1414986/using-safe-filter-in-django-for-rich-text-fields)

# c# - 从存储过程返回匿名类型

> ID：16219960
> 
> 赞同：-1
> 
> 时间：2013-04-25T16:23:02.310
> 
> 标签：c#, types, procedure, anonymous

这个问题只是这个问题的重复： [Returning anonymous types from stored procedure with LINQ2SQL](https://stackoverflow.com/q/603967/906449)

但它已经 4 年了，没有人回答它，所以我希望我能喜欢..撞上它。我真的需要这个答案，一直在努力解决同样的问题。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T18:13:52.640

您可以在存储过程中生成类似 xml 的字符串，然后在运行时使用 XmlSerializer 将其反序列化为更复杂的对象。在您的 xml 中使用属性，以便您可以区分返回值实际引用的不同类型的对象。

编辑：另一种解决方法可能是从您的存储过程中返回一个 varbinary 对象，该对象将包括实例化所需对象所需的二进制数据。当然，通过使用这种方法，您的代码将很难维护。

# jquery - 如何在 Flot 的时间序列图中放置文本？

> ID：16219962
> 
> 赞同：0
> 
> 时间：2013-04-25T16:23:04.683
> 
> 标签：jquery, flot

[我有一个](http://www.jqueryflottutorial.com/how-to-make-jquery-flot-ajax-update-chart.html)与这个非常相似的实时更新时间序列图表。如何从某个时间开始向图表添加一些文本并随图表一起移动？我将图表中的时间范围指定为属于某个条件，并为此使用文本。有可以使用的 Flot 插件吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T16:55:43.917

我认为这个答案应该对您有所帮助，我将这个小提琴放在一起，我认为它可以回答您的问题。

[jQuery/Flot：如何获取数据点的坐标？](https://stackoverflow.com/questions/2964798/jquery-flot-how-do-you-get-the-coordinates-of-a-datapoint)

```
for(var k = 0; k < points.length; k++){
      for(var m = 0; m < points[k].data.length; m++){
        showTooltip(graphx + points[k].xaxis.p2c(points[k].data[m][0]), graphy + points[k].yaxis.p2c(points[k].data[m][1]),points[k].data[m][1])
        }
  } 
```

小提琴 - [http://jsfiddle.net/g3dzp/1/](http://jsfiddle.net/g3dzp/1/)

# xml - 是否可以使用 XSD 来定义增量指定的树结构？

> ID：16219965
> 
> 赞同：0
> 
> 时间：2013-04-25T16:23:17.113
> 
> 标签：xml, validation, graph, tree, xsd

假设我们有一个元素，它要么是叶子（包含一些值），要么是复合（通常的复合模式）。我想对预计将由其他实例细化的树实例进行建模，例如通过用新元素填充复合节点。我希望能够通过其结构来确定一个树实例是否符合另一个实例。是否可以将实例建模为 XSD 并将一致性实现为符合其他 XSD 的 XSD？请注意，不仅仅是两个级别 - 每个结构都可以用作元结构。

附录：为了更好地了解意图，这里有一些可能的规则。

*   “这种复合材料不可扩展（已修复）。”
*   “您可以在此合成的末尾添加元素。”
*   “这个组合包含一个可选的叶子 1 和一个强制性的叶子 2。”
*   “这个复合材料包含该复合材料的任意数量的出现。”

例子：

```
Structure 1:
composite
    0..1 "abc"
    1..n "def"
    0..n extensible composite "c1"
        1..1 "ghi"
    0..1 composite "c2"
        1..1 "jkl"

Structure 2:
composite
    1..1 "def"
    1..1 "def"
    1..1 "def"
    1..1 extensible composite "c1"
        1..1 "ghi"
        1..n "extension"
    1..n extensible composite "c1"
        1..1 "ghi"

Structure 3:
composite
    0..n "abc" //too many "abc"s
    //"def" needed
    0..1 composite "c2"
        1..1 "jkl"
        1..1 "mno" //forbidden extension 
```

第二个结构符合第一个，第三个不符合。我想也许这可以用模式验证来表达。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-26T17:16:17.230

如果您正在发现 XSD，从制作一堆 XML 文件开始总是有帮助的，这些文件代表您想要实现的目标，同时将它们**全部提供**给可以生成一个（或多个）XSD 的工具文件（取决于您是否使用多个命名空间）。一旦你在 XSD 中有一个合理的基础，你就可以手动解决这个问题。

这是我根据您的说明尝试过的。

Sample1.xml

```
<composite>
    <abc/>
    <def/>
    <c1>
        <ghi/>
    </c1>
    <c1>
        <ghi/>
    </c1>
    <c2>
        <jkl/>
    </c2>
</composite> 
```

Sample2.xml

```
<composite>
    <def/>
    <def/>
    <c1>
        <ghi/>
        <extension/>
    </c1>
    <c1>
        <ghi/>
    </c1>   
</composite> 
```

基于以上，原始生成的XSD为：

```
<?xml version="1.0" encoding="utf-8"?>
<!--XML Schema generated by QTAssistant/XML Schema Refactoring (XSR) Module (http://www.paschidev.com)-->
<xs:schema attributeFormDefault="unqualified" elementFormDefault="qualified" xmlns:xs="http://www.w3.org/2001/XMLSchema">
  <xs:element name="composite">
    <xs:complexType>
      <xs:sequence>
        <xs:element minOccurs="0" name="abc" type="xs:anyType" />
        <xs:element maxOccurs="unbounded" name="def" type="xs:anyType" />
        <xs:element maxOccurs="unbounded" name="c1">
          <xs:complexType>
            <xs:sequence>
              <xs:element name="ghi" type="xs:anyType" />
              <xs:element minOccurs="0" name="extension" type="xs:anyType" />
            </xs:sequence>
          </xs:complexType>
        </xs:element>
        <xs:element minOccurs="0" name="c2">
          <xs:complexType>
            <xs:sequence>
              <xs:element name="jkl" type="xs:anyType" />
            </xs:sequence>
          </xs:complexType>
        </xs:element>
      </xs:sequence>
    </xs:complexType>
  </xs:element>
</xs:schema> 
```

它需要一些调整，因为您描述的所有基数场景都没有被 XML 捕获。下面是更新后的图表，以便更轻松地与原始标记进行协调。

![在此处输入图像描述](https://i.stack.imgur.com/QOBA4.png)

应该更容易看到 XSD 似乎与您所询问的内容相匹配（未显示基数，假设 (1..1) - 这是 XSD 中粒子的默认值）。

如何进一步定义扩展，可能通过使用诸如通配符元素之类的其他机制，或限制为基于基本类型，是基于进一步需求完成的活动。如果您要进入更复杂的场景，例如基于其他元素存在或值（共同约束）强制存在，那么 XSD 1.0 可能无法工作......

这应该让您至少开始为您的问题提供更多详细信息......

# javascript - 在javascript中加载动态css

> ID：16219967
> 
> 赞同：0
> 
> 时间：2013-04-25T16:23:22.737
> 
> 标签：javascript, css, ruby-on-rails, ruby

我有一个其他人在他们的网站上使用的 javascript 文件。它创建一个按钮并加载一个托管在我们服务器上的 css 文件：

```
style.setAttribute('href', 'http://mysite.com/assets/some.css');

```

用户可以像这样在他们的站点中调用它：

```
<script type="text/javascript" src="http://mysite.com/global.js"></script> 
```

我想让用户能够在我的网络应用程序上上传他们自己的 CSS 文件，该文件将替换我在`global.js`.

目前，我`custom_css:binary`在表格中添加了一个`Users`包含 CSS 文件的列，但这需要用户在网站上保持登录状态。我不确定这是否是解决此问题的正确方法，或者是否有更好的方法。此外，这种方法有哪些安全风险？

我正在使用 RoR 作为后端。

任何帮助都会很棒！

**更新 1**

我能够存储上传的 JS 文件并加载自定义 CSS，但它目前正在检查`current_user`- 这意味着不会为用户呈现样式表。我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-30T15:58:45.653

我能够自己找到解决方案。

有几种方法可以解决这个问题：

1.  向 JS src 添加查询字符串
2.  为您的脚本生成的某个元素抓取页面

我选择了选项 1。当我检测到动态生成的查询字符串时，我将其发送到`params`散列中的控制器并相应地加载 css 文件。

# c# - 验证值的确切长度

> ID：16219972
> 
> 赞同：-2
> 
> 时间：2013-04-25T16:23:43.007
> 
> 标签：c#, validation

我正在使用 Microsoft Visual Developer C#。我正在尝试验证一个文本框，以便输入的图书代码（int）正好是 4 个字符长。我使用 Range Validator 控件来执行此操作。对于 Range Validator 的 MaximumValue 和 MinimumValue 属性，我使它们都等于 4。但这似乎不起作用。我做错了吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T16:31:19.703

这很简单，您可能应该在发布之前更多地考虑您的问题。但是，我会同情一个初学者并给出几个解决方案。

选项 1 - 转换为字符串并检查其长度；

```
 string myVar = BookCode.ToString()
 if (myVar.Length < 5)
     // it's good!
 else
    // ERROR 
```

选项 2 - 小于一万的最大值是 9999，一个四位数的值。

```
 if (BookCode < 10000)
     // it's good
  else
    // it's bad 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T16:32:16.990

如果您只是让用户在文本框中输入文本，并且一旦他们按下某种类型的提交按钮，您想确认文本长度为 4 个字符，那么您可以使用`inputControl.Text.Length == 4`

从那里你可以显示一个消息框，如果它不等于 4 则返回，如果是则继续。

# xcode - Expected identifier image

> ID：16219976
> 
> 赞同：0
> 
> 时间：2013-04-25T16:24:00.347
> 
> 标签：xcode

Hi i am new here and also a noob with Xcode please help. I am trying to make Imagepickercontroller but i am having trouble with one error and don't know how to solve it.

Viewcontroller.h

```
@interface ViewController : UIViewController<UIImagePickerControllerDelegate> {
IBOutlet UIButton *button;
IBOutlet UIImageView *image;
UIImagePickerController *imagepicker;

   }
    - (IBAction)change:(id)sender;

@end 
```

Viewcontroller.m

```
 @interface ViewController ()

@end

@implementation ViewController

-(void)touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event {
    UITouch *mytouch = [[event allTouches] anyObject];
    button.center = [mytouch locationInView:self.view];
}

- (void)viewDidLoad
{
    [super viewDidLoad];
    imagepicker = [[UIImagePickerController alloc] init];
    [imagepicker setSourceType:UIImagePickerControllerSourceTypePhotoLibrary];
    [imagepicker setAllowsEditing:YES];

}

- (IBAction)change:(id)sender
{
    [self presentViewController:imagepicker animated:YES completion:NO];

}

- (void)imagePickerController:(UIImagePickerController *)picker didFinishPickingMediaWithInfo:(NSDictionary *)info
{

    [UIImage(setimage:)image];
    [self dismissViewControllerAnimated:YES completion:NO];
}

@end 
```

Expected identifier `[UIImage(setimage:)image];`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T16:47:20.690

[UIImage(setimage:)image] 需要是 [someImageView setImage:image] 其中 someImageView 是 UIImageView 的一个实例

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T16:48:11.063

请注意，这`UIImage`是一个类，而不是一个对象。您应该给出一个`UIImage`不带任何括号的类方法。另外，`setImage:`不是**的**类方法`UIImage`。我想，你的意思是一个对象实例，而不是类对象。

# ruby - Ruby 对象初始化：参数、哈希、香草？

> ID：16219980
> 
> 赞同：0
> 
> 时间：2013-04-25T16:24:05.890
> 
> 标签：ruby, hash, hashmap, params

在初始化具有哈希类型结构的方法时，我对何时/为什么或者是否只是偏好问题感到有些困惑。

```
class Person1
    attr_reader :name, :age
    def initialize(params)
        @name = params[:name]
        @age  = params[:age]
    end
end
    me = Person1.new(name: 'John Doe', age: 27)
    puts me.name
    puts me.age
#----------------------------------------------
class Person2
   attr_reader :name, :age
   def initialize(name, age)
        @name = name
        @age = age
   end
end
    me = Person2.new('John Doe',  27)
    puts me.name
    puts me.age
#----------------------------------------------
class Person3
   attr_reader :person
   def initialize(name, age)
       @person = { name: name,
                    age: age }
   end
end
    me = Person3.new('John Doe',  27)
    puts me.person[:name]
    puts me.person[:age] 
```

如果这是一个偏好问题，我喜欢只传递哈希，但如果您需要不同的 attr 读取器，哈希本身内的写入器，我可以看到这是一个问题。有经验法则吗？我看到很多使用 params 的 rails 文章。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T16:29:05.323

您的第三种方式很可能永远不会出现在野外 - 您已经在构建一个 person 对象，为什么它有一个访问器`person`？属性应该在类本身上。1 和 2 之间的区别主要是偏好，但当您经常只想设置特定属性时，第二个可能会更有优势。

关于 rails 对 params 的使用：params 是包含您正在处理的特定请求的请求参数的哈希值。当您在 Rails 中处理大量请求时，它会出现在每个控制器中，也可能出现在某些视图中。

# php - 仅在 Javascript 中选择一些复选框

> ID：16219981
> 
> 赞同：1
> 
> 时间：2013-04-25T16:24:06.940
> 
> 标签：php, javascript, html, forms

我已经有了这个代码：

```
function chkcontrol(j) {
    var total=0;
    for(var i=0; i < document.contactForm.qualities.length; i++) {
        if(document.contactForm.qualities[i].checked) {
            total =total +1;}
            if(total > 2) {
                alert("Please Select only 2")
                document.contactForm.qualities[j].checked = false ;
                return false;
             }
        }
    }
} 
```

它工作正常，但是当我把`name="qualities[]"`括号放在它不再工作时。尝试将 [] 添加到： `for(var i=0; i < document.contactForm.qualities.length; i++){`

返回错误。

在这里编辑是我的相关 HTML：

```
<form name="contactForm" method="post" action="{$contact_action}" id="newform">
<table width="100%" cellpadding="0" cellspacing="0" id="cfCSF">
    <label><input type="checkbox" name="qualities[]" value="value" onclick="chkcontrol(0)"/> value</label><br />
    <label><input type="checkbox" name="qualities[]" value="value" onclick="chkcontrol(1)"/>value</label><br />
    <label><input type="checkbox" name="qualities[]" value="value" onclick="chkcontrol(2)"/> value</label><br />
    <label><input type="checkbox" name="qualities[]" value="value" onclick="chkcontrol(3)"/> value</label><br />
    <label><input type="checkbox" name="qualities[]" value="value" onclick="chkcontrol(4)"/> value</label><br /><br /> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T16:28:57.920

一个选项是使用这个：

```
function chkcontrol(j) {
    var total = 0;
    var chk = document.getElementById("newform").querySelectorAll('input[name="qualities[]"]');
    for (var i = 0; i < chk.length; i++) {
        var cur = chk[i];
        if (cur.checked) {
            total++;
            if (total > 2) {
                alert("Too many checked");
                chk[j].checked = false;
                break;
            }
        }
    }
} 
```

**演示：http:** [//jsfiddle.net/zz395/](http://jsfiddle.net/zz395/)

另一种选择是更好地组织所有内容并保持 Javascript 不显眼，是使用以下内容：

```
window.onload = function () {
    var chk = document.getElementById("newform").querySelectorAll('input[name="qualities[]"]');
    for (var i = 0; i < chk.length; i++) {
        var cur = chk[i];
        addEvent(cur, "click", clickHandler);
    }
};

function clickHandler(e) {
    var total = 0;
    var chk = document.getElementById("newform").querySelectorAll('input[name="qualities[]"]');
    for (var i = 0; i < chk.length; i++) {
        var cur = chk[i];
        if (cur.checked) {
            total++;
            if (total > 2) {
                alert("Too many checked");
                preventDefault(e);
                break;
            }
        }
    }
}

function preventDefault(e) {
    e = e || window.event;
    if (e.preventDefault) {
        e.preventDefault();
    } else {
        e.returnValue = false;
    }
}

function addEvent(element, eventName, callback) {
    if (element.addEventListener) {
        element.addEventListener(eventName, callback, false);
    } else if (element.attachEvent) {
        element.attachEvent("on" + eventName, callback);
    } else {
        element["on" + eventName] = callback;
    }
} 
```

**演示：http:** [//jsfiddle.net/zz395/2/](http://jsfiddle.net/zz395/2/)

（其中 HTML 没有`onclick`为复选框定义任何内容）

我更喜欢这种设置，因为您不需要对复选框的索引进行硬编码，这`event`是被阻止的（而不是手动取消选中复选框，我认为无论如何都可以正常工作）。

参考：

*   [https://developer.mozilla.org/en-US/docs/DOM/Element.querySelectorAll](https://developer.mozilla.org/en-US/docs/DOM/Element.querySelectorAll)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T16:32:59.983

您需要方括号表示法来使用带有无效标识符字符的对象键。

```
for(var i=0; i < document.contactForm["qualities[]"].length; i++){ 
```

这允许将任何有效字符串用作键，而标识符语法将限制您使用字母、数字`_`和`$`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-25T16:30:30.293

您可以使用`document.contactForm['qualities[]']`选择表单元素列表`name="qualities[]"`

# ado.net - oledb32.dll cannot improt ado.net while creating setup file

> ID：16219982
> 
> 赞同：0
> 
> 时间：2013-04-25T16:24:07.660
> 
> 标签：ado.net

iam creating setup file in ado.net but whenever i build my project it is give me 'oledb32.dll' should be excluded because its source file 'C:\Program Files\Common Files\System\Ole DB\oledb32.dll' is under Windows System File Protection error so that's why i download in net and try to import that dll in my project but this file cannot import detected dependencies folder ..oledb32.dll file is important for show patient details in excel format so can you all expert give me any suggestion or advice

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-05T22:03:13.467

我也遇到了这个问题，直到现在才找到具体的答案。

我正在使用开发框，通过 SVN 签入代码，并运行 CruiseControl.NET 来执行 devenv.exe 以自动构建项目（我不使用 MSBuild，因为微软尚未实现构建安装项目的解决方案，我认为这也是您正在使用的）。安装项目可以在开发盒上正常构建，但在构建服务器上它不断出现同样的错误。

MSDN 的解释可以在[这里](http://msdn.microsoft.com/en-us/library/x97ae5d9%28v=vs.80%29.aspx)找到，描述性不是很强，但这基本上是需要做的。更具体的答案可以在[这里](http://social.msdn.microsoft.com/Forums/en-US/dee631b2-c716-46d8-a693-b31ac8263397/subject-error-building-a-setup-project-using-tfs-build-2008?forum=tfsbuild)找到。基本上你必须**在你的构建服务器上打开 VS 并进入并排除**oledb32.dll （和任何其他问题文件），瞧，它最终构建并创建了 MSI 文件！希望这对您有所帮助。

# php - Cant track error cause in PHP page updating a MS SQL database

> ID：16219985
> 
> 赞同：0
> 
> 时间：2013-04-25T16:24:12.487
> 
> 标签：php, sql-server-2008, odbc

Simple PHP page (I'm no PHP expert, just learning) to update a MS SQL database. The following code generates an error that I dont know how to solve.

```
 include '/connections/SFU.php';
$query = "UPDATE Person SET PhotoURL = '".$file["name"]."' WHERE USERID='".$_REQUEST['user_id']."';";
if ($result =  odbc_exec($dbconnect, $query)) {
    echo "// Success!";
}
else {
    echo "// Failure!";
}
odbc_close($dbconnect);
//End Update 
```

This fails every time in the "if ($result ..." section

However, if I run virtually the same code

```
 include '/connections/SFU.php';
$query = "UPDATE Person SET PhotoURL = '89990.jpg' WHERE USERID='80'";
if ($result =  odbc_exec($dbconnect, $query)) {
// Success!
}
else {
// Failure!
} 
odbc_close($dbconnect);
//End Update 
```

It works just fine. I have echoed the $query string to the screen and the string is the same for both. I can't figure out why it fails in one and not the other?

Also weird is when I use a parameterized query such as

```
include '/connections/SFU.php';
$query = "UPDATE dbo.Person SET PhotoURL=? WHERE USERID=?";
if ($res = odbc_prepare($dbconnect,$query)) {
    echo "Prepare Success";
} else {
    echo "Prepare Failed".odbc_errormsg();
}
$uid = $_REQUEST['user_id'];
$fn = $file["name"];
echo "query=".$query." userid=".$uid." filename=".$fn;  
if ($result =  odbc_exec($res, array($fn, $uid))) {     
    echo "// Success!";
}
else {
    echo odbc_errormsg();
    echo "// Failure!";
}
odbc_close($dbconnect); 
```

The query fails in the prepare section above, but fails in the odbc_exec section below:

```
include '/connections/SFU.php';
$query = "UPDATE Person SET PhotoURL=? WHERE USERID=?";
if ($res = odbc_prepare($dbconnect,$query)) {
    echo "Prepare Success";
} else {
    echo "Prepare Failed".odbc_errormsg();
}
$uid = "80";
$fn = "samplefile.jpg";
echo "query=".$query." userid=".$uid." filename=".$fn;  
if ($result =  odbc_exec($res, array($fn, $uid))) {     
    echo "// Success!";
}
else {
    echo odbc_errormsg();
    echo "// Failure!";
}
odbc_close($dbconnect); 
```

In all cases I do not get any odbc_errormsg ().

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T16:27:57.020

`;`从您的查询中删除多余的内容。

```
$query = "UPDATE Person SET PhotoURL = '".$file["name"]."' WHERE
          USERID='".$_REQUEST['user_id']."';";
                                           ^ 
```

所以你的查询应该是，

```
$query = "UPDATE Person SET PhotoURL = '".$file["name"]."' WHERE
          USERID='".$_REQUEST['user_id']; 
```

还可以练习使用`odbc_errormsg()`，以便更好地了解查询失败的原因。

**警告：**您的代码容易受到[**sql 注入攻击**](http://php.net/manual/en/security.database.sql-injection.php)！

# physics - When to start braking when heading for a position?

> ID：16219986
> 
> 赞同：0
> 
> 时间：2013-04-25T16:24:12.227
> 
> 标签：physics, game-engine, game-physics, game-ai

With only 1 dimension, you want to get to position X and stop there. you have a maximum acceleration A you can apply yourself; each frame you choose what direction to accelerate.

So if you have a velocity V, and want to stop at position X as fast as possible, how much of your maximum acceleration A do you apply yourself?

(If you are far away, you apply your maximum acceleration, but when you are close, you start braking. So based on your velocity and remaing distance, you need to decide when you begin to brake.)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T17:01:26.353

控制方程是 x = vt + 0.5 at^2，其中 x 是距离，v 是速度，t 是时间，a 是兼容单位的加速度。

在没有其他限制的情况下，为了尽量减少您的旅行时间，您将始终应用最大加速度：向目标方向加速直到到达一半，然后向原点方向加速直到停止。

如果您有最大速度，请加速直到达到最大速度，这将发生在距离原点 X 一定距离处。当你离目标距离 X 时，加速回到原点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-02-20T11:32:43.447

只是加入我最近解决的这个问题的更高级版本的答案。您在 x_0 处有 v_0，并且想要到达位置 X，并且到达那里时的速度为 V。每个小时间步都应用加速度，例如每秒 60 次。

因此，使用运动方程 x = vt + 0.5 at ^2，在施加正/负加速度的情况下求解 t，以查看无论最终速度如何，都能以多快的速度到达 x。

还可以通过应用正加速度或负加速度来计算达到 V 所需的时间。无论 t 最高，是应用的正加速度或负加速度。

这会导致对象平滑地遵循诸如 sin(x) 之类的路径，如果它们被扔掉，它们会优雅地滑回其中。

# javascript - 我如何在 twitter bootstraps popover 中显示链接等？

> ID：16219991
> 
> 赞同：2
> 
> 时间：2013-04-25T16:24:41.637
> 
> 标签：javascript, jquery, html, twitter-bootstrap

假设您有一个只有图标的无序列表（这里只有一个）：

```
<ul>
     <li class="in-row"><a href="#" id="meddelanden" data-content="Content here..." 
          data-title="Meddelanden" data-toggle="clickover" data-placement="left">
          <i class="icon-globe"></i></a>
     </li>
</ul> 
```

将这些包含的文件添加到您的 html 文档中：

```
 <script type="text/javascript" src="../js/jquery.js"></script>
    <script type="text/javascript" src="../js/bootstrap.js"></script>
    <script>
         $('#meddelanden').popover('animate');
    </script> 
```

它确实看起来不错，并且当我按下图标时会显示内容，但我想在那个弹出框容器中有一些链接和中断和东西。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-25T16:51:10.997

你不需要为此使用javascript。您可以使用`data-html`and`data-content`来实现这一点。

尝试设置`data-html="true"`并将转义的 html 插入到您的`data-content`属性中。像这样：

```
<ul>
     <li class="in-row"><a href="#" id="meddelanden" data-content="&lt;hr&gt;Sample html&lt;br&gt;" 
          data-title="Meddelanden" data-toggle="clickover" data-placement="left" data-html="true">
          <i class="icon-globe"></i></a>
     </li>
</ul> 
```

一些文本编辑器提供内置的 HTML Escape 工具。如果您的编辑器没有，您可以使用这样的在线工具：http: [//www.htmlescape.net/htmlescape_tool.html](http://www.htmlescape.net/htmlescape_tool.html)

* * *

***更新：*** 另一种方法是将标记添加到 html 文档本身（作为隐藏容器）并使用 javascript 创建工具提示：

**HTML**

```
<div id="tooltip-content" style="display: none;">
  <p>Tooltip content goes here</p>
</div> 
```

**Javascript**

```
$('#element').tooltip({
  html: true,
  title: $('#tooltip-content').html()
}); 
```

这是一种更好的方法（在我看来）。更易于阅读和维护 - 在您的 javascript 或属性内没有 HTML `data-content`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-25T16:40:09.367

是的你可以。尝试使用弹出框`content`和`html`属性... `[See Doc](http://twitter.github.io/bootstrap/javascript.html#popovers)`

[http://jsfiddle.net/4jhzg/](http://jsfiddle.net/4jhzg/)

**html**

```
<ul>
     <li class="in-row"><a href="#" id="meddelanden"  
          data-title="Meddelanden" data-toggle="clickover" data-placement="right">
         <i class="icon-globe"></i></a>
     </li>
</ul> 
```

**脚本**

```
var elem = '<div><a href="google.com">google</a></div>';
$('#meddelanden').popover({animation:true, content:elem, html:true}); 
```

# algorithm - modify binary search to find the next bigger item than the key

> ID：16219998
> 
> 赞同：4
> 
> 时间：2013-04-25T16:25:04.350
> 
> 标签：algorithm, binary-search

I want to modify the famous [binary search](https://en.wikipedia.org/wiki/Binary_search_algorithm) algorithm to return the index of the next bigger item instead of the key being searched.

So we have 4 cases:

1.  the key is smaller than all items, return 0.
2.  the key is bigger than all items, return items.length.
3.  the key is found at index x, return x+1.
4.  the key isn't found, return the index of the next bigger one.

e.g:

```
data = { 1, 3, 5, 7, 9, 11 }; 
```

*   search for 0 returns 0.
*   search for 11 or 12 returns 6.
*   search for 5 or 6 returns 3.

    ```
    while (low <= high) {
        mid = (low + high) / 2;
        if (data[mid] < val)
            low = mid + 1;
        else if (data[mid] > val)
            high = mid - 1;
        else {
            break;
        }
    } 
    ```

Currently got it working by examining low and high values. Is there any interesting code to do so!

EDIT !!!

here is how I get it working:

```
 if (low <= high)
        found = (low + high) / 2 + 1;
    else if (low >= data.length)
        found = data.length ;
    else if (high < 0)
        found = -1;
    else
        found = low; 
```

I am looking for a more elegant way!

EDIT II !!!

this code works if no duplicates. to handle the case of duplicates we need to modify the first if condition:

```
if (low <= high)
    found = (low + high) / 2 + 1; 
```

to iterate until it finds a bigger element.

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2015-02-03T21:59:04.567

以下是一些符合 OP 搜索要求的 C 代码：

*   值 < 第一项：返回 0
*   值包含在数组中：返回找到的索引+1
*   值不在数组中但<第一项和<最后一项：返回下一个最大值的索引
*   值 >= 最后一项：返回数组大小

它还演示了 4 种不同类型的二进制搜索：

*   标准二分搜索
*   小于等于二分搜索
*   LessThanEqual 或 Last Binary Search
*   下一个最大的二分搜索

（假设没有重复`data`）

```
#include <stdio.h>

int BinarySearch( int key, int data[], const int len )
{
    int low  = 0;
    int high = len-1;

    while( high >= low )
    {
        int mid = low + ((high - low) / 2);

        /**/ if (data[mid] < key) low  = mid + 1;
        else if (data[mid] > key) high = mid - 1;
        else return                      mid    ;
    }
    return -1; // KEY_NOT_FOUND
}

int LessThanEqualBinSearch( int key, int data[], const int len )
{
    int min = 0;
    int max = len-1;
    // var max = data.length - 1; // Javascript, Java conversion

    while( min <= max)
    {
        int mid = min + ((max - min) / 2);

        /**/ if (data[mid] < key)  min  = mid + 1;
        else if (data[mid] > key)  max  = mid - 1;
        else   /*data[mid] = key)*/return mid    ;
    }

    if( max < 0 )
        return 0;  // key < data[0]
    else
    if( min > (len-1))
        return -1; // key >= data[len-1] // KEY_NOT_FOUND
    else
        return (min < max)
            ? min  
            : max + 1;
}

int LessThanEqualOrLastBinSearch( int key, int data[], const int len )
{
    int min = 0;
    int max = len-1;
    // var max = data.length - 1; // Javascript, Java conversion

    while( min <= max)
    {
        int mid = min + ((max - min) / 2);

        /**/ if (data[mid] < key)  min  = mid + 1;
        else if (data[mid] > key)  max  = mid - 1;
        else   /*data[mid] = key)*/return mid    ;
    }

    if( max < 0 )
        return 0;     // key < data[0]
    else
    if( min > (len-1))
        return len-1; // key >= data[len-1]
    else
        return (min < max)
            ? min  
            : max + 1;
}

int NextLargestBinSearch( int key, int data[], const int len )
{
    int low  = 0;
    int high = len-1;

    while( low <= high)
    {
        // To convert to Javascript:
        // var mid = low + ((high - low) / 2) | 0;
        int mid = low + ((high - low) / 2);

        /**/ if (data[mid] < key) low  = mid + 1;
        else if (data[mid] > key) high = mid - 1;
        else return                      mid + 1;
    }

    if( high < 0 )
        return 0;   // key < data[0]
    else
    if( low > (len-1))
        return len; // key >= data[len-1]
    else
        return (low < high)
            ? low  + 1
            : high + 1;
}

int main()
{
    int items[] = { 1, 3, 5, 7, 9, 11 };
    int LENGTH  = sizeof(items) / sizeof(items[0]);

    for( int i = -1; i < 14; ++i )
        printf( "[%2d]: == %2d   <= %2d   <| %d   > %d\n", i
        , BinarySearch                ( i, items, LENGTH )
        , LessThanEqualBinSearch      ( i, items, LENGTH )
        , LessThanEqualOrLastBinSearch( i, items, LENGTH )
        , NextLargestBinSearch        ( i, items, LENGTH )
    );   

    return 0;
} 
```

输出：

```
[-1]: == -1   <=  0   <| 0   > 0
[ 0]: == -1   <=  0   <| 0   > 0
[ 1]: ==  0   <=  0   <| 0   > 1
[ 2]: == -1   <=  1   <| 1   > 1
[ 3]: ==  1   <=  1   <| 1   > 2
[ 4]: == -1   <=  2   <| 2   > 2
[ 5]: ==  2   <=  2   <| 2   > 3
[ 6]: == -1   <=  3   <| 3   > 3
[ 7]: ==  3   <=  3   <| 3   > 4
[ 8]: == -1   <=  4   <| 4   > 4
[ 9]: ==  4   <=  4   <| 4   > 5
[10]: == -1   <=  5   <| 5   > 5
[11]: ==  5   <=  5   <| 5   > 6
[12]: == -1   <= -1   <| 5   > 6
[13]: == -1   <= -1   <| 5   > 6 
```

*   该`1st`列是标准的二分查找
*   该`2nd`列是小于二分搜索
*   该`3rd`列是小于或最后二进制搜索
*   该`4th`列是下一个最大的二进制搜索

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-06-29T06:24:00.240

1.  项目清单

这是一个代码：

*   **如果元素存在，则**返回要搜索的元素的 **索引**
***   如果数组中不存在搜索的元素，则返回下一个更大元素的索引*   如果搜索到的元素大于数组的最大元素，则返回 -1**

 **```
 public static int ceilSearch(int arr[], int low, int high, int x) {
    int mid;
    if (x <= arr[low])
      return low;
    if (x > arr[high])
      return -1;

    mid = (low + high) / 2; /* low + (high - low)/2 */

    if (arr[mid] == x)
      return mid;

    else if (arr[mid] < x) {
      if (mid + 1 <= high && x <= arr[mid + 1])
        return mid + 1;
      else
        return ceilSearch(arr, mid + 1, high, x);
    } else {
      if (mid - 1 >= low && x > arr[mid - 1])
        return mid;
      else
        return ceilSearch(arr, low, mid - 1, x);
    }
  } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-25T16:33:43.793

这就是你想要的。它返回下一个更大的元素。

```
public int binarySearch(int[] arr, int key) {
    int lo = 0;
    int hi = arr.length - 1;int mid = 0;
    while (lo <= hi) {
        mid = (lo + hi) / 2;
        if      (key < arr[mid]) hi = mid - 1;
        else if (key > arr[mid]) lo = mid + 1;
        else return mid;
    }
    return -Math.min(lo, hi)-2;
}

public int myBinarySearch(int[] arr, int key){
     int x = binarySearch(arr, key);
     if(x >= arr.length-1 || -x > arr.length){
         //whatever you want to return
         return Integer.MAX_VALUE;
     }
     else if(x >= 0)
          return arr[x+1] ;
     else
          return arr[-x-1];
}
public static void main(String args[]) {
    Triall tr = new Triall();
    int arr[] = { 1, 3, 5, 7, 9, 11 }; 
    for( int i = 0; i < 13; i++ ) { 
        int n = tr.myBinarySearch( arr,i ); 
        System.out.println(i + " " + n ); 
    }
} 
```**