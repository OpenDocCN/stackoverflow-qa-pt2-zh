# StackOverflow 问答 14451000-14451999

# java - 是时候读取一个 xml 文件了

> ID：14451000
> 
> 赞同：0
> 
> 时间：2013-01-22T03:16:05.180
> 
> 标签：java, xml, sax, saxparser

我想知道解析 XML 文件所花费的时间。我正在使用 SAX 解析器。我不想知道花了多长时间（解析完成后），因此我不能使用 System.nanoTime() 或 System.currentTimeMillis()

如何提前估计解析所需的时间？（可能基于文件的大小）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-22T03:29:36.057

这是一个棘手的问题。简短的回答是：您无法提前确切知道需要多长时间。

您最好的选择可能是通过运行一些基准来估计需要多长时间，例如解析一个 1K 文件、一个 10K 文件、一个 100K 文件和一个 1MB 文件并在它们之间进行插值。（假设 1MB 是一个合理的上限）

但是，此估计仅在您的计算机上适用于您的特定硬件/软件配置。您无法以有意义的方式对其进行概括。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T04:00:33.863

您可以做的是，获取一个 1 MB 的样本文件并对其进行解析。记录时间如下：

```
int testcases = 10; // Configure it to find the average
for(int i=0;i<testcases;i++)
{
long startTime = System.currentTimeMillis();
// Call a method that performs parsing of the XML.
// Method Returns once parsing is done.

long endTime = System.currentTimeMillis();

long delta = endTime - startTime;
System.out.println("Average Time taken: " + delta);
} 
```

通过以上，可以得出平均所用时间。

# math - 计算旋转期间覆盖画布的最小矩形大小

> ID：14451003
> 
> 赞同：1
> 
> 时间：2013-01-22T03:16:31.327
> 
> 标签：math, rotation, trigonometry, angle

我想知道如何计算显示层的最小尺寸，以便无论旋转如何，它都会始终覆盖它的画布。

下图描绘了一个尺寸为**1280 宽度 x 800 高度**的画布（黑色矩形） 。

居中对齐和居中对齐，使画布在 0 度（图 1）和 90 度（图 2）处完全覆盖，渐变显示层已按比例调整大小，从**1280 宽度 x 800 高度**（与画布大小相同） ) 到**2048 宽度 x 1280 高度**，以便原始最小长度与画布的最大长度匹配。但是，如图 3 所示，使用这种基本的按比例调整大小逻辑，某些角度不会完全覆盖画布。

如何确定渐变显示层的最小尺寸（不超过），以便当它居中对齐和居中对齐时，无论角度如何，它都会始终覆盖画布？

![在此处输入图像描述](../Images/d3173cb918ce234cf448913c8f629018.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-22T03:52:58.423

假设您使用圆形而不是矩形渐变层进行此操作。显然，如果圆圈是覆盖画布的最小尺寸，它可以任意旋转，仍然覆盖画布。

该圆的直径是画布的对角线。您寻找的矩形是可以包含该圆的最小矩形：一个正方形，其边是圆的直径。

这为您提供了*任何*“画布”形状的答案：您只需找到其中心位于包含整个画布的所需旋转点的最小圆。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T03:46:36.187

重新发布作为答案：

它不会只是一个正方形，其边等于黑色矩形的对角线吗？（或 sqrt(1280^2 + 800^2)）

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-22T03:27:20.270

屏幕的宽度必须至少大于画布的对角线，高度必须至少大于画布的宽度和高度的最大值：

```
Width = sqrt(x^2 + y^2) = sqrt(1280^2 + 800^2) = 1509.4
Height = max(x,y) = 1280 
```

其中 x 是画布的宽度，y 是高度

# mysql - MySQL 使用 NOT IN 作为临时表

> ID：14451007
> 
> 赞同：1
> 
> 时间：2013-01-22T03:16:56.983
> 
> 标签：mysql, sql, select

我希望能够在 Category 表中找到条件为`visible = 0`not 在下面的查询结果中的行：

```
SELECT c.id as cat_id, j.id
FROM category c
LEFT JOIN portfolio_job_category pjc
ON pjc.category_id = c.id
LEFT JOIN job j
ON j.id = pjc.job_id
WHERE c.visible = 0
AND j.end_date > CURRENT_DATE
GROUP BY c.id 
```

有没有办法用来`NOT IN`找到这个？

我在下面尝试过，但这会永远循环并崩溃 mysqld

```
SELECT c.id
FROM category c
WHERE c.id NOT IN
(SELECT c.id as cat_id, j.id
FROM category c
LEFT JOIN portfolio_job_category pjc
ON pjc.category_id = c.id
LEFT JOIN job j
ON j.id = pjc.job_id
WHERE c.visible = 0
AND j.end_date > CURRENT_DATE
GROUP BY c.id)
AND visible = 0 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T03:21:03.157

你不尝试使用什么`LEFT JOIN`

```
SELECT  a.ID
FROM    category a
        LEFT JOIN
        (
            SELECT  c.id as cat_id
            FROM    category c
                    LEFT JOIN portfolio_job_category pjc
                        ON pjc.category_id = c.id
                    LEFT JOIN job j
                        ON j.id = pjc.job_id
            WHERE   c.visible = 0 AND 
                    j.end_date > CURRENT_DATE
        ) b ON a.ID = b.ID
WHERE   b.ID IS NULL AND
        a.visible = 0 
```

# jquery - 使用 jquery 将 rel 添加到 youtube 链接：contains

> ID：14451009
> 
> 赞同：0
> 
> 时间：2013-01-22T03:17:00.510
> 
> 标签：jquery, youtube, contains, attr, prettyphoto

我想为所有包含 youtube 链接的链接添加一个 rel。这就是我正在使用的 - 但它不起作用。有任何想法吗？

```
$('a[href:contains("youtube.com")]').attr('rel', 'prettyPhoto');
```

我发现了其他几个问题，但与我的要求不完全一样。这是最接近的[Select <a> 其中 href 以一些字符串结尾](https://stackoverflow.com/questions/303956/jquery-select-a-which-href-contains-some-string) 并将我的问题发布在那里 - 但不确定是否有人会看到它，因为它被发布为“答案”而不是问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-22T03:19:45.367

`:contains`选择包含指定文本的所有元素，您应该改用[`Attribute Contains`](http://api.jquery.com/attribute-contains-selector/)选择器。

```
$('a[href*="youtube.com"]').attr('rel', 'prettyPhoto'); 
```

# php - Mime 类型 PDF php 上传

> ID：14451011
> 
> 赞同：3
> 
> 时间：2013-01-22T03:17:20.980
> 
> 标签：php, file-upload, mime-types

我有这个片段

```
if ($_FILES['tax']['error'] !== UPLOAD_ERR_OK) {
    die("Upload failed with error " . $_FILES['tax']['error']);
}
    $finfo = finfo_open(FILEINFO_MIME_TYPE);
    $mime = finfo_file($finfo, $_FILES['tax']['tmp_name']);
    $ok = false;
    switch ($mime) {
        case 'image/gif':
        case 'application/pdf':
        case 'image/png':
        $ok = true;
        default:
    die("Unknown/not permitted file type");
    }
    move_uploaded_file($_FILES["tax"]["tmp_name"],"pints/" . $_FILES["tax"]["name"]); 
```

当我尝试上传图像时，它指出它不是允许的文件类型，当文件是 PDF 文档时，`application/pdf`mime 类型是否正确？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-22T03:27:00.160

你忘了在默认情况之前打破:)

顺便说一句，为了回答您的直接问题，我发现自己一遍又一遍地引用此线程：[PDF 文件的正确 MIME 媒体类型](https://stackoverflow.com/questions/312230/proper-mime-type-for-pdf-files)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-22T03:29:29.807

试试这个

```
 if ($_FILES['tax']['error'] !== UPLOAD_ERR_OK)
        die("Upload failed with error " . $_FILES['tax']['error']);

    $finfo = finfo_open(FILEINFO_MIME_TYPE);
    $mime = finfo_file($finfo, $_FILES['tax']['tmp_name']);
    $ok = false;
    switch ($mime) {
        case 'image/gif':
        break;
        case 'application/pdf':
        break;
        case 'image/png':
            $ok = true;
        break;
        default:
            die("Unknown/not permitted file type");
        break;
    }
    move_uploaded_file($_FILES["tax"]["tmp_name"],"pints/" . $_FILES["tax"]["name"]); 
```

如果不能解决您的问题，请告诉我们如何做`finfo_open`和`finfo_file`功能是什么样的。

# ios - 找不到 webLink 时，UIWebView 不会去 didFailLoadWithError 吗？

> ID：14451012
> 
> 赞同：12
> 
> 时间：2013-01-22T03:17:34.630
> 
> 标签：ios, objective-c, uiwebview, uiwebviewdelegate

我用来`UIWebView`从 a 加载 web`webLink`并`UIWebViewDelegate`控制错误状态：

```
[webView loadRequest:[NSURLRequest requestWithURL:[NSURL URLWithString:webLink]]];

- (void)webViewDidStartLoad:(UIWebView *)webView{
    NSLog(@"START LOAD");

}

- (void)webViewDidFinishLoad:(UIWebView *)webView{
    NSLog(@"FINISH LOAD");
}

- (void)webView:(UIWebView *)webView didFailLoadWithError:(NSError *)error{
    NSLog(@"ERROR : %@",error);
} 
```

但是当`webLink`没有找到时，它不会转到`didFailLoadWithError`，它会转到`startLoad`and `didFinishLoad`。`webLink`找不到的情况下怎么走？请帮忙！

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-01-22T03:52:02.587

不幸的是，404（或类似代码）不被视为错误`UIWebView`，因为收到了 HTML 响应。更糟糕的是，`UIWebView`它不会为我们捕获响应代码，因此您必须手动通过`NSURLConnection`. 这是处理它的一种方法：

```
@interface ViewController () <UIWebViewDelegate, NSURLConnectionDataDelegate>

@property (nonatomic) BOOL validatedRequest;
@property (nonatomic, strong) NSURL *originalUrl;

@end

@implementation ViewController

- (void)viewDidLoad
{
    [super viewDidLoad];

    // since `shouldStartLoadWithRequest` only validates when a user clicks on a link, we'll bypass that
    // here and go right to the `NSURLConnection`, which will validate the request, and if good, it will
    // load the web view for us.

    self.originalUrl = [NSURL URLWithString:@"http://www.stackoverflow.com"];
    NSURLRequest *request = [NSURLRequest requestWithURL:self.originalUrl];
    [NSURLConnection connectionWithRequest:request delegate:self];
}

#pragma mark - UIWebViewDelegate

// you will see this called for 404 errors

- (void)webViewDidFinishLoad:(UIWebView *)webView
{
    self.validatedRequest = NO; // reset this for the next link the user clicks on
}

// you will not see this called for 404 errors

- (void)webView:(UIWebView *)webView didFailLoadWithError:(NSError *)error
{
    NSLog(@"%s error=%@", __FUNCTION__, error);
}

// this is where you could, intercept HTML requests and route them through
// NSURLConnection, to see if the server responds successfully.

- (BOOL)webView:(UIWebView *)webView shouldStartLoadWithRequest:(NSURLRequest *)request navigationType:(UIWebViewNavigationType)navigationType
{
    // we're only validating links we click on; if we validated that successfully, though, let's just go open it
    // nb: we're only validating links we click on because some sites initiate additional html requests of
    // their own, and don't want to get involved in mediating each and every server request; we're only
    // going to concern ourselves with those links the user clicks on.

    if (self.validatedRequest || navigationType != UIWebViewNavigationTypeLinkClicked)
        return YES;

    // if user clicked on a link and we haven't validated it yet, let's do so

    self.originalUrl = request.URL;

    [NSURLConnection connectionWithRequest:request delegate:self];

    // and if we're validating, don't bother to have the web view load it yet ...
    // the `didReceiveResponse` will do that for us once the connection has been validated

    return NO;
}

#pragma mark - NSURLConnectionDataDelegate method

// This code inspired by http://www.ardalahmet.com/2011/08/18/how-to-detect-and-handle-http-status-codes-in-uiwebviews/
// Given that some ISPs do redirects that one might otherwise prefer to see handled as errors, I'm also checking
// to see if the original URL's host matches the response's URL. This logic may be too restrictive (some valid redirects
// will be rejected, such as www.adobephotoshop.com which redirects you to www.adobe.com), but does capture the ISP
// redirect problem I am concerned about.

- (void)connection:(NSURLConnection *)connection didReceiveResponse:(NSURLResponse *)response
{     
    NSString *originalUrlHostName = self.originalUrl.host;
    NSString *responseUrlHostName = response.URL.host;

    NSRange originalInResponse = [responseUrlHostName rangeOfString:originalUrlHostName]; // handle where we went to "apple.com" and got redirected to "www.apple.com"
    NSRange responseInOriginal = [originalUrlHostName rangeOfString:responseUrlHostName]; // handle where we went to "www.stackoverflow.com" and got redirected to "stackoverflow.com"

    if (originalInResponse.location == NSNotFound && responseInOriginal.location == NSNotFound) {
        NSLog(@"%s you were redirected from %@ to %@", __FUNCTION__, self.originalUrl.absoluteString, response.URL.absoluteString);
    }

    if ([response isKindOfClass:[NSHTTPURLResponse class]]) {
        NSInteger statusCode = [(NSHTTPURLResponse *)response statusCode];

        if (statusCode < 200 || statusCode >= 300) {
            NSLog(@"%s request to %@ failed with statusCode=%d", __FUNCTION__, response.URL.absoluteString, statusCode);
        } else {
            self.validatedRequest = YES;

            [self.webView loadRequest:connection.originalRequest];
        }
    }

    [connection cancel];
}

@end 
```

请注意，在我的实现中，我不仅要检查状态代码，还要检查重定向（您可能想做也可能不想做）。我这样做是因为一些 ISP 拦截了 HTTP 请求，如果找不到目标站点，则将您重定向到他们自己的搜索网页（知道我的 ISP 正在检查我搜索的每个网站，我认为这有点令人毛骨悚然）。如果你正在处理通过 wifi 连接的 iPhone，你必须处理这些变幻莫测的问题。

因此，例如，我上面的代码正在搜索“ [http://www.applecom/pages](http://www.applecom/pages) ”（其中我故意省略了“.com”的句点，这*应该*会导致 DNS 查找失败），但是我的 ISP， Verizon，拦截了请求并通过 HTTP 连接重定向到他们自己的搜索页面，因此，我的应用程序报告：

> 2013-01-21 23:14:21.896 webtest[24198:c07] -[ViewController 连接：didReceiveResponse:] 你从[http://www.applecom/pages](http://www.applecom/pages)重定向到[http://search.dnsassist.verizon.net/协助.php?url=www.applecom](http://search.dnsassist.verizon.net/assist.php?url=www.applecom)

您可能需要考虑哪些类型的重定向是可接受的（例如，如果您转到“www.adobephotoshop.com”，它会将您重定向到“www.adobe.com”）以及哪些类型不是（例如，如果我转到“www.applecom”，它会将我重定向到“search.dnsassist.verizon.net”。我可能担心一个相当狭窄的问题（由于我的 ISP 而影响到我），但这是值得考虑的事情。

# f# - 无法访问 F# 类中的 Dispose 方法

> ID：14451019
> 
> 赞同：7
> 
> 时间：2013-01-22T03:18:19.160
> 
> 标签：f#, dispose

我在 F# 中创建了一个实现 IDisposable 接口的类。该类已正确清理，并且 use 关键字能够访问 Dispose 方法。我有第二个用例，我需要显式调用 Dispose 方法，但无法在下面的示例中调用。似乎 Dipose 方法在类中不可用。

```
open System

type Foo() = class
    do
        ()

    interface IDisposable with
        member x.Dispose() =
            printfn "Disposing"

end

let test() =
    // This usage is ok, and correctly runs Dispose()
    use f = new Foo()

    let f2 = new Foo()
    // The Dispose method isn't available and this code is not valid
    // "The field , constructor or member Dispose is not defined."
    f2.Dispose()

test() 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-22T03:23:31.173

在 F# 类中实现接口更类似于 C# 中的*显式接口实现*，这意味着接口的方法不会成为方法的公共类。要调用它们，您需要将类强制转换为接口（不会失败）。

这意味着，要调用`Dispose`您需要编写：

```
(f2 :> IDisposable).Dispose() 
```

实际上，这并不经常需要，因为`use`关键字确保`Dispose`在值超出范围时自动调用它，所以我会写：

```
let test() =
  use f2 = new Foo()
  f2.DoSomething() 
```

在这里，`f2`当`test`函数返回时被释放。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-08T17:05:17.020

托马斯说得对。仅供参考，您可以在您的类型上实现 Dispose() 函数以便于使用：

```
member x.Dispose() = (x :> IDisposable).Dispose() 
```

那是*在*`IDisposable`. 然后你就可以写了`f2.Dispose()`。

# objective-c - 为 NSMutableArray 添加范围

> ID：14451021
> 
> 赞同：0
> 
> 时间：2013-01-22T03:18:37.613
> 
> 标签：objective-c

我有一个里面有 32 个对象的数组。我目前正试图找出一种方法，在我的页面上只显示数组中的某些对象。例如，我只想显示索引 10-18 内的对象。我尝试对数组进行切片以添加范围并且它可以工作，但问题是，我不能让任何对象在同一页面上重复。因此，如果要显示的对象只有 10-18 个，则每个对象应该只显示一次并且以随机顺序显示，所以我尝试的代码如下所示：

```
NSArray *slice;
slice = [arrayList subarrayWithRange:NSMakeRange(5,7)];
int i = arc4random() % [slice count];
int k = arc4random() % [slice count];
int j = arc4random() % [slice count]
[self.btnRand1 setTitle:[slice objectAtIndex: i] forState:UIControlStateNormal];
[arrayList removeObjectAtIndex:i];
[self.btnRand2 setTitle:[slice objectAtIndex: j] forState:UIControlStateNormal];
[arrayList removeObjectAtIndex:j];
[self.btnRand3 setTitle:[slice objectAtIndex: k] forState:UIControlStateNormal];
[arrayList removeObjectAtIndex:k]; 
```

我需要 removeObjectAtIndex 来删除数组中已使用的对象，但鉴于我使用切片仅选择特定对象中的对象，它不起作用并且某些对象将在该范围内重复。正如我所读到的，你根本不能将它用于 NSArrays。

如何为此添加一个不会重复所选范围内的任何对象的范围？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T03:31:02.097

您需要将 slice 设置为可变数组。您获得第一个随机索引，然后从数组中删除该条目。根据需要重复多次，直到切片中的项目数。

# .htaccess - 表达式引擎内置重定向？

> ID：14451024
> 
> 赞同：1
> 
> 时间：2013-01-22T03:18:52.397
> 
> 标签：.htaccess, redirect, expressionengine

我刚刚在 Expression Engine 中重建了我们的一个网站，一切都很顺利！我需要创建一堆重定向，希望能修复上一个站点的一些旧 URL。

例子：

旧站点创建的 URL 类似于：index.php?id=30

例如，这个需要重定向到：[http ://www.example.com/contact](http://www.example.com/contact)

所以在我的 .htaccess 中，我创建了：

重定向 /index.php?id=30 [http://www.example.com/contact](http://www.example.com/contact)

我为所有不同的 ID 做了大约 50 次。但是，当我访问这些链接时，他们只是将我放在主页上并保持 URL 不变。（www.example.com/index.php?id=30）。

然后我注意到它对任何不存在的 URL 执行此操作。所以我可以输入：

www.example.com/asdasdjasdbjhasdbjhasdbjhasdbjhasdbjhasd

它只是让我在主页上。

这是我的 .htaccess 文件中的其他内容以及一些重定向示例。这第一位只是从 URL 中删除 /index.php。

重写引擎开启

```
 # Removes index.php from ExpressionEngine URLs
    RewriteCond $1 !\.(gif|jpe?g|png)$ [NC]
    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteCond %{REQUEST_FILENAME} !-d
    RewriteRule ^(.*)$ /index.php/$1 [L] 
```

```
Redirect /index.php?id=30 http://www.example.com/contact

Redirect /index.php?id=26 http://example.com/careers

Redirect /index.php?id=28 http://example.com/about 
```

那么这里发生了什么，Expression Engine 是否内置了破坏我的重定向的重定向？

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T05:59:16.460

您无法匹配`Redirect`语句中的查询字符串，您需要使用 a`RewriteCond`并匹配`%{QUERY_STRING}`变量。确保在表达式引擎规则**之前添加这些规则：**

```
RewriteCond %{QUERY_STRING} ^id=30
RewriteRule ^/?index.php$ http://www.example.com/contact [L,R]
RewriteCond %{QUERY_STRING} ^id=26
RewriteRule ^/?index.php$ http://www.example.com/careers [L,R]
RewriteCond %{QUERY_STRING} ^id=28
RewriteRule ^/?index.php$ http://www.example.com/about [L,R] 
```

等等

# c# - 不可达函数和方法对 C# 性能的影响有多大

> ID：14451028
> 
> 赞同：4
> 
> 时间：2013-01-22T03:19:40.747
> 
> 标签：c#, .net, performance, optimization

> **可能重复：**
> [未使用的方法和属性对库或可执行文件的影响](https://stackoverflow.com/questions/2120112/effect-of-unused-methods-and-properties-on-library-or-executable)

我正在开发一个项目，在该项目中我使用现有的应用程序进行开发，并根据项目要求进行定制。在定制的时候，我发现了很多在当前项目中没有用的函数和方法。我正在考虑保持该代码原样并仅在所需代码中进行自定义，但我不太确定这些无法访问的代码将在多大程度上影响我的应用程序的性能。我应该保持原样还是删除它们？

编辑：在我的应用程序中，DataInteraction 程序集包含 20 个方法，其中 2 个正在使用，其余的没有，但据我所知，如果调用程序集的任何方法，则将整个程序集加载到内存中，如果是，则比我感觉会影响性能。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-22T03:21:56.483

它只是增加了可执行文件的大小。如果不调用这些方法，它们就不是 JIT 的。

..你绝对应该考虑清理它们。它们的用途是什么？他们使代码膨胀并使代码库的使用变得更糟。

我也同意约翰的评论。

编辑：

回应关于未调用方法的评论：

![ILSpy 中未使用的方法](../Images/cef86ebb6a7f554cfc1ad26a82349029.png)

答案是否定的，事实并非如此（为 Release 编译）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T03:56:28.030

当 Microsoft 发布 Visual Studio 2012 时，它们包含可以分析代码以帮助优化它的功能。一些重要的规则：

***CA1804：删除未使用的本地变量。***未使用的局部变量和不必要的赋值会增加程序集的大小并降低性能。

***CA1809：避免过多的本地人。***一种常见的性能优化是将值存储在处理器寄存器而不是内存中，这称为“注册值”。要增加注册所有局部变量的机会，请将局部变量的数量限制为 64。

优化您的代码（包括删除未使用的代码）是一件好事，但在您这样做之前总是有一个备份副本。一些未使用的代码将来可能会再次使用。看看你还能做些什么来优化你的代码以获得更好的性能。访问以下链接

[http://msdn.microsoft.com/en-us/library/ms182260.aspx](http://msdn.microsoft.com/en-us/library/ms182260.aspx)

[http://msdn.microsoft.com/en-us/library/dd380629.aspx](http://msdn.microsoft.com/en-us/library/dd380629.aspx)

[http://msdn.microsoft.com/en-us/library/ms182125.aspx](http://msdn.microsoft.com/en-us/library/ms182125.aspx)

[http://msdn.microsoft.com/en-us/library/ms182324.aspx](http://msdn.microsoft.com/en-us/library/ms182324.aspx)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-22T03:26:12.773

未使用的代码对性能的影响很小。然而，对可维护性的影响是另一个话题。应首先管理代码的可维护性、可读性和可理解性。如果代码没有被使用并且不太可能被使用，那么将其删除，因为它会减少所有这三个措施。

在您知道存在问题的时间和地点解决性能问题，因为您可以衡量它们。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-22T03:25:36.843

[这篇文章](https://stackoverflow.com/questions/4163320/unused-using-statements)应该回答你的问题。编译器应该忽略任何未使用的 using 语句。即使您正在使用命名空间的一部分，因此它在编译期间使用它只会将其复制进去，并且只会影响您的 lib/exe 的大小而不是性能。

# python - 我如何在 python 中获取匹配的正则表达式模式

> ID：14451034
> 
> 赞同：0
> 
> 时间：2013-01-22T03:20:12.677
> 
> 标签：python, regex

我有这个代码，但它不工作

```
import re
mystring = "This is my test the string to match the stuff"    
p = re.compile(" the ") 
```

现在我希望能够将找到的第一场比赛`var1`和第二场比赛`var2`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-22T03:22:16.697

你的意思是这样的？

```
In [3]: import re

In [4]: strs= "This is my test the string to match the stuff"

In [5]: p = re.compile(" the ")

In [6]: re.findall(p,strs)
Out[6]: [' the ', ' the ']

In [7]: var1,var2=re.findall(p,strs)

In [8]: var1,var2
Out[8]: (' the ', ' the ') 
```

如果返回的匹配数超过 2，那么您首先对列表进行切片。

```
var1,var2=[' the ', ' the ',' the '][:2] 
```

在 python 3.x 上，您可以利用`*`来获取列表中的其余元素：

```
In [2]: var1,var2,*extras=[' the ', ' the ','foo','bar']

In [3]: var1
Out[3]: ' the '

In [4]: var2
Out[4]: ' the '

In [5]: extras             #rest of the elements are stored in extras
Out[5]: ['foo', 'bar'] 
```

# scheme - 在球拍中写负数

> ID：14451042
> 
> 赞同：3
> 
> 时间：2013-01-22T03:21:19.320
> 
> 标签：scheme, racket

2 – (-12/x) = -4

负数 12 让我感到困惑。我在哪里放负号？

```
(define (math x)
( = ( - ( / 12 x) 2) 4)) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-22T03:27:41.913

负号是数字本身的一部分，您可以像使用任何其他语言一样编写它：

```
(define (math x)
( = ( - ( / -12 x) 2) 4)) 
```

输出：

```
> (math 2)  ; 2-(-12/2) = -4 -> 2-(-6) = -4 -> 2 + 6 = -4 -> 8 = -4 (FALSE)
#f
> (math -2) ; 2-(-12/-2) = -4 -> 2-(6) = -4 -> -4 = -4 (TRUE)
#t 
```

# ruby-on-rails - 将参数传递给控制器 导轨

> ID：14451046
> 
> 赞同：0
> 
> 时间：2013-01-22T03:21:59.733
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我有几个链接：

```
<%= link_to "", '../captures#photos' %>
<%= link_to "", '../captures#videos' %>
<%= link_to "", '../captures#audios' %> 
```

它们传递给 captures_controller.rb

如何解析参数（照片/视频/音频）以防止在控制器中编制索引？

目前在控制器中我有：

```
def photos
  logger.debug 'photos'
end
def videos
  logger.debug 'videos'
end
def audios
  logger.debug 'audios'
end

def index
  logger.debug 'index'
end 
```

但是以下所有网址都记录“索引”？

*   .../捕获
*   .../捕获#照片
*   .../捕捉#视频
*   .../捕获#audios

路线.rb：

```
# these were when I was trying the links without the hashes
match 'captures/photos' => 'captures#photos'
match 'captures/videos' => 'captures#videos'
match 'captures/audios' => 'captures#audios'

resources :captures
resources :photos
resources :audios
resources :videos 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-07-16T15:56:48.127

在 rails 4.0 中，您可以通过控制器中的 GET 请求附加和传递属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T03:44:18.420

您不`controller#action`使用`link_to`. 您必须给它一个路径，比如`/captures/photos`或明确指定一些参数。尝试这个：

```
<%= link_to "", :controller => "captures", :action => "photos" %> 
```

我也会在 routes.rb 中这样做以简化事情：

```
resources :captures
  get :photos
  get :photo_booths
  get :videos
  get :audios
end 
```

这将让你这样做：

```
<%= link_to "", photos_captures_path %> 
```

最后，纯粹基于您向我们展示的有限代码，实际上听起来您应该拥有名为,等的*资源*，每个资源都有自己的控制器，方法是使用“捕获”作为命名空间并为每种类型制作单独的控制器：`photos``audios`

```
namespace :captures do
  resources :photos
  resources :photo_booths
  #etc
end 
```

然后每个人都有一个`index`动作来服务于控制器中每个方法的当前功能。然后你的链接看起来像：

```
<%= link_to "", captures_photos_path %> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-22T03:26:55.347

这将在很大程度上取决于您在`routes.rb`文件中定义的路由，但无论如何您都不能使用哈希部分（在 之后的任何内容`#`）作为路由的一部分。事实上，浏览器甚至不会将它发送到服务器。您很可能希望您的 URL 看起来像：

```
../captures
../captures/photos
../captures/videos
../captures/audios 
```

通常最好不要`link_to`像这样在函数中指定 URL。你想使用你的路由辅助函数来提供它们，以防你的路由发生变化。

我建议阅读[Ruby on Rails Guide to Routes](http://guides.rubyonrails.org/routing.html)。这将提供很多关于如何使用 Rails 中内置的功能来充分利用您的路线的见解。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-22T03:27:03.587

在**routes.rb 中**：

```
get "/captures/:format" 
```

无论您在哪个**capture_controller.rb**方法中都需要它：

```
@format = params[:format] 
```

然后，您相关视图中的任何位置都`@format`将输出`photos`、`videos`或`audios`。

# c# - 临时 AppDomain 和文件锁定

> ID：14451047
> 
> 赞同：1
> 
> 时间：2013-01-22T03:22:07.767
> 
> 标签：c#, .net, reflection, appdomain

我已经成功创建了一个继承自 MarshallByRefObject 的类。

上面的类还实现了一个接口，并从主 AppDomain 远程调用。还创建了 DTO 来传递信息。

我已经从调试器中验证了远程类和调用域上远程加载的程序集没有被加载到主 AppDomain 中。同样，远程类型/程序集没有渗入主 AppDomain，通过 Debug Watch 验证到`AppDomain.CurrentDomain.GetAssemblies()`.

```
AppDomain.CurrentDomain.GetAssemblies().Count() //From inside the remote object
121
AppDomain.CurrentDomain.GetAssemblies().Count() //At the client, after RPC call.
13 
```

然后远程/临时域被卸载。

但是，我仍然无法删除在远程域中读取的任何 dll，我错过了什么？

我还尝试了以下变化：

```
AppDomain.CurrentDomain.Load(File.ReadAllBytes(_.FullName)) 
```

和

```
Assembly.LoadFrom(_.FullName) 
```

无论我使用哪一个，文件仍然被锁定，尽管据我所知，程序集是远程加载和卸载的。

# c - C：联合内结构字段的位置

> ID：14451048
> 
> 赞同：4
> 
> 时间：2013-01-22T03:22:09.520
> 
> 标签：c, struct, unions, specifications

我有以下类型：

```
union {
  struct {
    uint32_t c0;
    uint32_t k0[4];
    uint32_t c1;
    uint32_t v[2];
    uint32_t i[2];
    uint32_t c2;
    uint32_t k1[4];
    uint32_t c3;
  } named;
  uint32_t array[16];
} state; 
```

因为“named”中的每个字段在初始化时都有含义，但之后我将主要将其用作单词数组。C 是否保证 that与, is等`state.array[0]`相同？`state.named.c0``state.array[1]``state.named.k0[0]`

如果没有，它有多大可能起作用？如果我依赖它，是否有任何编译器/平台会破坏我的代码？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-22T03:56:43.940

*要回答您最令人担忧的问题，“..它有多大可能起作用”，除非它是确定*的事情，否则不要赌可能性。在这种情况下不是。

标准（§6.7.2.1，p15）规定结构的*第一个*成员或联合的*所有*成员的地址与结构或联合本身的地址相同。对您来说，这仅意味着 和 的地址相同，`array[16]`并且`named`两者都等同于 的地址`state`。但是，如果没有实现相关的打包，则无法保证*结构*将精确覆盖，因为标准的同一部分指出结构间打包是可能的。

例如，无论出于何种原因，使用打包方案以始终在 64 位边界上启动成员的编译器可能会将您的布局`name`如下：

```
struct {
    uint32_t c0;
    **padding 4 bytes**
    uint32_t k0[4];
    uint32_t c1;
    **padding 4 bytes**
    uint32_t v[2];
    uint32_t i[2];
    uint32_t c2;
    **padding 4 bytes**
    uint32_t k1[4];
    uint32_t c3;
    **padding 4 bytes**
} name; 
```

简而言之，您可以保证的是，`name` *整体*占用的内存和工会中其他成员`array[16]`占用的内存应该占用相同的内存，从每个内存的开头可寻址位置开始。`name`该内存在's 打包下的外观取决于实现以及您希望提供的任何打包提示。

标准的一些相关部分：

> **C99-§6.7.2.1,p6** 如 6.2.5 所述，结构是由成员序列组成的类型，其存储按有序序列分配，联合是由成员序列组成的类型，其存储重叠。
> 
> **C99-§6.7.2.1,p15** 在结构对象中，非位域成员和位域所在的单元的地址按声明顺序递增。一个指向结构对象的指针，经过适当的转换，指向它的初始成员（或者如果该成员是位域，则指向它所在的单元），反之亦然。结构对象中可能有未命名的填充，但不是在其开头。
> 
> **C99-§6.7.2.1,p16** 联合体的大小足以容纳其最大的成员。任何时候最多可以将其中一个成员的值存储在联合对象中。一个指向联合对象的指针，经过适当的转换，指向它的每个成员（或者如果一个成员是位域，则指向它所在的单元），反之亦然。
> 
> **C99-§6.7.2.1,p17** 在结构或联合的末尾可能有未命名的填充。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-22T03:57:10.410

来自 C 标准：

> **6.7.2.1/15**
> 在结构对象中，非位域成员和位域所在的单元的地址按声明顺序递增。**一个指向结构对象的指针，经过适当的转换，指向它的初始成员**（或者如果该成员是位域，则指向它所在的单元），反之亦然。结构对象中可能有未命名的填充，但不是在其开头。
> 
> **6.7.2.1/16 联合体**
> 的规模足以容纳其最大的成员。任何时候最多可以将其中一个成员的值存储在联合对象中。**一个指向联合对象的指针，经过适当的转换，指向它的每个成员**（或者如果一个成员是一个位域，则指向它所在的单元），反之亦然。

强调我的。这基本上转化为`state.named`,`state.named.c0`和`state.array`具有相同的地址。但是，这里有个问题，不能保证`named`'s 的其余成员所在的位置（指定了内存中的*顺序*，但没有指定*位置*）。从技术上讲，可以在每个`named`'s 成员之间进行填充（甚至在结尾处`named`）。所以答案是**否定的，这不能保证。**可以在成员之间添加填充。

关键是第一句的最后一句话：

> **结构对象中可能存在未命名的填充**

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2013-01-22T03:57:08.237

是`state.array[0]`的 与 相同`state.named.c0`。C 保证 'array[16]' 和命名的结构将占用相同的内存区域。

只要数据类型匹配，这是真的。例如，如果您存储 2 个排序然后读取一个整数，则结果取决于机器。

# twitter-bootstrap - 在 Twitter Bootstrap 中，如何从关闭模式对话框中取消绑定事件？

> ID：14451052
> 
> 赞同：22
> 
> 时间：2013-01-22T03:22:28.980
> 
> 标签：twitter-bootstrap

我有一个绑定到隐藏模式对话框的功能的功能。

我正在使用类似于[这个](https://stackoverflow.com/questions/8363802/bind-a-function-to-twitter-bootstrap-modal-close?rq=1)问题的公认答案的代码。

```
$('#myModal').on('hidden', function () {
    // do something…
}) 
```

但是，此对话框可能会重新打开以进行编辑，并且在发生这种情况时，我不一定要运行此代码。有没有办法“取消绑定”该功能，以便在对话框关闭时不再运行？[我在文档](http://twitter.github.com/bootstrap/javascript.html#modals)中没有找到任何东西。

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2013-01-22T03:32:04.153

您可以执行类似解除绑定到模式元素的所有事件的操作：

**取消绑定模态中的所有事件：**

```
/* First option */
$('#myModal').on('hidden', function (e) {
    $(e.currentTarget).unbind(); // or $(this)        
});

/* Second option is to call it directly when needed */
$('#myModal').unbind(); 
```

**Bootrap 模式也有与之关联的特定事件**，因此您还可以指定要取消绑定的事件。

```
/* Events are 'hidden', 'hide', 'show', 'shown' */
$('#myModal').unbind(/* specific event here */); 
```

如果您希望删除与模式内容相关的事件，您只需清空其中的元素`$('#myModal').empty()`并适当地取消绑定这些元素。

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2017-01-20T10:19:37.060

采用：

```
$('#myModal').off('hidden'); 
```

为什么不解绑？

> 从 jQuery 3.0 开始，.unbind() 已被弃用。自 jQuery 1.7 起，它被 .off() 方法所取代，因此已经不鼓励使用它。

来源：[jQuery API](http://api.jquery.com/unbind/)。

# angularjs - AngularJS 应用程序有“堆栈”吗？

> ID：14451053
> 
> 赞同：0
> 
> 时间：2013-01-22T03:22:42.047
> 
> 标签：angularjs

我正在创建一个 AngularJS 应用程序。这个应用程序有一个“屏幕”，人们可以在其中选择一系列选项。这些选项之一加载客户列表。在该客户列表中，我可以选择创建客户：

```
[Main Menu] (/) 
    -> [Options Select] (/options)
    -> [Customer Picker] (/options/customer)
    -> [Customer Create] (/options/customer/add) 
```

所以基本上`Customer Create`就是这个“状态”？该应用程序可以在其中。如果我要使用 UI 导航，然后重新加载页面并从该页面重新开始，那没有什么不同，因为 Angular 应用程序本身并不认为我是如何到达该页面的堆栈”的项目。没有一些我已经弹出的视图控制器，只有一堆独立的可路由目的地。

我习惯于认为我可以实例化一个客户选择器控制器并将其扔到堆栈上并过渡到它......但这在这里不起作用，不是吗？

如果，比如说，我希望客户应用选择器“更智能”，那么我必须想办法让客户选择器知道我对它的期望，使用某种通过路由器传递给它的选项，或者根据我想要的每个特定用例创建一个细微的变化。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T13:02:42.167

因此，默认情况下，Angular 没有太多类似的东西，但是通过使用`$localtionProvider`或其他库，您可以通过多种不同的方式来处理它。

*   您可以使用`$locationProvider.path()`提供主题标签或 HTML5（真实）路径
*   您可以使用`$locationProvider.search()`在 URL 中传递一个对象以保持状态
*   您可以使用[Lawnchair 之](http://brian.io/lawnchair "Lawnchair：简单的 JSON 存储")类的东西在客户端上保存更复杂的状态，使用该客户端可用的任何方法

如果您还使用`$routeProvider`和切换控制器/视图，那么您可以使用不同视图之间的简单链接，这可能是您使用更简单的代码完成所需任务的一种方式。

具体到您想要做什么（如果我理解正确的话），您可以使用该`$locationProvider.search()`方法来存储您的堆栈信息。像这样的东西：

```
$scope.go = function (where) {
    var currentSearch = $location.search();
    currentSearch.viewStack.push(where);
    $location.search(currentSearch);
    $location.path(where);
} 
```

使用时的一个重要警告`$locationProvider.search()`是它不会存储超过一层的对象，这意味着您传递给该函数的对象不应包含除简单类型和数组之外的任何内容。

使用这种方法，您必须向顶级控制器添加一些内容，以解释`viewStack`您要放入搜索中的数组。这里一种流行的模式似乎是在应用程序的根目录中放置一个长期存在的控制器，然后在其下放置其他临时控制器。您也可以将顶级控制器用于其范围，但这会进入您可能想要避免的有点模糊的“全局”范围。

Angular 的伟大之处在于它允许您限制您使用的 JS 的数量。任何时候你可以使用更少的自定义编写的 JS 并更多地依赖 angular 的工作方式，从长远来看，它似乎会让你变得更好。

# asp.net - 在 iis7 asp.net 注册时为帐户创建子域

> ID：14451055
> 
> 赞同：2
> 
> 时间：2013-01-22T03:23:04.793
> 
> 标签：asp.net, iis-7, web-config, subdomain, wildcard-subdomain

我在 Stackoverflow 和谷歌上挖掘了 3 天。我没有得到任何确切的步骤，如何完成它......我在 stackoverflow 上阅读了所有这些问题，许多人问了同样的问题，但没有得到执行此任务的确切步骤。

[ASP.NET 中的子域重写？](https://stackoverflow.com/questions/1322151/subdomain-rewriting-in-asp-net#)

[https://serverfault.com/questions/58050/generating-content-based-on-subdomain](https://serverfault.com/questions/58050/generating-content-based-on-subdomain)

[即时创建子域](https://stackoverflow.com/questions/2190309/creating-subdomains-on-the-fly)

[通过重写的 ASP.NET 虚拟子域](https://stackoverflow.com/questions/13126438/asp-net-virtual-subdomain-via-rewrite?rq=1)

[如何将子域添加到 asp.net 网站？](https://stackoverflow.com/questions/4943581/how-to-add-a-subdomain-to-an-asp-net-website?lq=1)

[如何允许用户在我的 MVC 网站上创建自己的子域？](https://stackoverflow.com/questions/12994128/how-to-allow-users-to-create-their-own-subdomains-on-my-mvc-website?answertab=votes#tab-top)

[子目录到子域重定向的 web.config 规则](https://stackoverflow.com/questions/9044880/web-config-rule-for-sub-directory-to-sub-domain-redirection)

[使用 Web.Config 将目录重定向到子域](https://stackoverflow.com/questions/4202045/use-web-config-to-redirect-a-directory-to-a-subdomain)

[ASP.Net 中子域的 URL 重写](https://stackoverflow.com/questions/11661605/url-rewrite-for-subdomains-in-asp-net?rq=1)

**现在这是我正在尝试做的事情：当用户在我的网站上注册时，那个时候使用这样的用户名创建一个子域**

<用户名>.domain.com 比如 abc.domain.com, xyz.domain.com

并且它必须指向 domain.com/Users/<用户名>/index.asp

这是一个很好的例子[http://ytmnd.com/](http://ytmnd.com/)

**我正在使用带有 IIS7 的 Windows 主机，并且正在使用 asp.net。**

我在 DNS 中设置了通配符条目，当用户点击 <anyname>.domain.com 然后它指向服务器的默认 Plesk 网页；

我不知道它应该像那样工作，或者它应该指向我的主要 domain.com

请为我提供完成此任务的步骤谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-22T03:26:55.283

为什么您不能使用您自己的链接中提供的答案？

[如何允许用户在我的 MVC 网站上创建自己的子域？](https://stackoverflow.com/questions/12994128/how-to-allow-users-to-create-their-own-subdomains-on-my-mvc-website?answertab=votes#tab-top)

> 绑定 DNS 服务器和 Microsoft DNS 服务器都允许设置与域中任何不存在的条目匹配的通配符条目：
> 
> *.example.com。3600 在 CNAME 主机 1.example.com 中。然后在 IIS 中设置 URL 重写规则，将[http://subdomain.yourdomain.com/](http://subdomain.yourdomain.com/)形式的 URL转换为[http://yourdomain.com/?root=subdomain](http://yourdomain.com/?root=subdomain)
> 
> 这将允许您使用数据库管理这些克隆的站点。
> 
> 唯一的缺点是 DNS 系统不允许您设置 www.*.yourdomain.tld 形式的通配符条目

# java - 使用 google-http-java-client 库 api 解析 json 时的一件奇怪的事情

> ID：14451056
> 
> 赞同：1
> 
> 时间：2013-01-22T03:23:24.980
> 
> 标签：java, exception, try-catch

在 Android 上，我使用 google-http-java-client 库从 google place api 解析 json。我按照这些网站[google-http-java-client-json](http://code.google.com/p/google-http-java-client/wiki/JSON#Pluggable_Streaming_Library) 和[Android 使用 Google Places and Maps 教程的说明进行操作](http://www.androidhive.info/2012/08/android-working-with-google-places-and-maps-tutorial/)

我从 google place detail search api 获取 json 内容：

```
{
   "html_attributions" : [],
   "result" : {
      "address_components" : [
         {
            "long_name" : "10号",
            "short_name" : "10号",
            "types" : [ "street_number" ]
         },
         {
            "long_name" : "East Chang'an Avenue",
            "short_name" : "East Chang'an Avenue",
            "types" : [ "route" ]
         },
         {
            "long_name" : "Dongcheng",
            "short_name" : "Dongcheng",
            "types" : [ "sublocality", "political" ]
         },
         {
            "long_name" : "Beijing",
            "short_name" : "Beijing",
            "types" : [ "locality", "political" ]
         },
         {
            "long_name" : "Beijing",
            "short_name" : "Beijing",
            "types" : [ "administrative_area_level_1", "political" ]
         },
         {
            "long_name" : "CN",
            "short_name" : "CN",
            "types" : [ "country", "political" ]
         }
      ],
      "formatted_address" : "10号 East Chang'an Avenue, Dongcheng, Beijing, China",
      "formatted_phone_number" : "010 6528 8888",
      "geometry" : {
         "location" : {
            "lat" : 39.9074880,
            "lng" : 116.4090440
         }
      },
      "icon" : "http://maps.gstatic.com/mapfiles/place_api/icons/generic_business-71.png",
      "id" : "33c009586d7d2ac1a8d8392c02f03db6c316710a",
      "international_phone_number" : "+86 10 6528 8888",
      "name" : "Shanggong Law Firm",
      "reference" : "CnRvAAAA25ct_IRN2tU_bHsLhfuwQmvrfRR_WEPvFv30GtadCc6Axe6hK3OkL0B1UrLNu7J2scVzn5qylFTf_YOzhf14ba2GcrkCnGkXeobKxJ-DDUCTJOIqVzuvj1BZ5Vb-OxboQeztU3VI9zBgAFGwe8sg3xIQTxsKMMP88wqEtgmQ3ykp7xoUfXj-wTk2kM9v3aQ65wS3bsn5CI8",
      "types" : [ "lawyer", "establishment" ],
      "url" : "https://plus.google.com/113831070987505202557/about?hl=en-US",
      "utc_offset" : 480,
      "vicinity" : "10号 East Chang'an Avenue, Dongcheng, Beijing",
      "website" : "http://www.splf.com.cn/"
   },
   "status" : "OK"
} 
```

这个 json 的 pojo 映射是

```
public class PoiDetail extends GenericJson implements Serializable{

@Key
public String status;

@Key
public PoiDetailPlace result;

}

public class PoiDetailPlace implements Serializable{

@Key
public String id;

@Key
public String name;

@Key
public String reference;

@Key
public String icon;

@Key
public String vicinity;

@Key
public String formatted_address;
@Key
public String formatted_phone_number;

@Key
public String international_phone_number;

@Key
public String website;
@Key
public Geometry geometry;

public static class Geometry implements Serializable{

    @Key
    public Location location;
}

public static class Location implements Serializable{

    @Key
    public double lat;
    @Key
    public double lng;
} 
```

}

当我编写解析器方法时发生了奇怪的事情。如果我这样写我的代码，没关系。我可以获得详细信息：

```
public PoiDetail getPoiDetail(String reference) throws IOException{

    try {
        HttpRequestFactory httpRequestFactory = createRequestFactory(HTTP_TRANSPORT);
        HttpRequest request = httpRequestFactory
                .buildGetRequest(new GenericUrl(DETAILS_SEARCH_URL));
        request.getUrl().put("key", API_KEY);
        request.getUrl().put("reference", reference);
        request.getUrl().put("sensor", "false");
        PoiDetail detail = request.execute().parseAs(PoiDetail.class);
        return detail;
    } catch (HttpResponseException e) {
        // TODO Auto-generated catch block
        Log.e("Error in Perform Details", e.getMessage());
        throw e;
    }

} 
```

如果我这样写代码是不行的了解异常是什么：

```
public PoiDetail getPoiDetail(String reference){

    try {
        HttpRequestFactory httpRequestFactory = createRequestFactory(HTTP_TRANSPORT);
        HttpRequest request = httpRequestFactory
                .buildGetRequest(new GenericUrl(DETAILS_SEARCH_URL));
        request.getUrl().put("key", API_KEY);
        request.getUrl().put("reference", reference);
        request.getUrl().put("sensor", "false");
        PoiDetail detail = request.execute().parseAs(PoiDetail.class);
        return detail;
    } catch (HttpResponseException e) {
        e.printStackTrace();
        return null;
    }catch (IOException e) {
        e.printStackTrace();
        return null;
    }

} 
```

我想知道

**是什么导致这两种方法产生不同的结果？**

**为什么我不应该抓住 IOException ？**

**这背后的理论是什么？**

# seo - SEO中“随机页面”链接的最佳实践

> ID：14451063
> 
> 赞同：1
> 
> 时间：2013-01-22T03:24:25.673
> 
> 标签：seo, standards, forwarding

我有一个纯内容页面的网站，一种导航方式是通过指向 example.com/random 的链接。页面 /random 选择一个随机页面并将用户转发到该页面。

最好的方法是什么？到目前为止我有

*   PHP的`header("Location: http://example.com/123");`
*   javascript重定向

除非您能想到任何其他巨大的好处或问题，否则将“最佳”判断为对 SEO 更好的一种

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T11:32:31.453

如果我是你，我会使用HTTP Header 的[301 重定向](http://support.google.com/webmasters/bin/answer.py?hl=en&answer=93633)将访问者重定向到你的随机页面。搜索引擎机器人可以理解这种重定向。

这是执行 301 重定向的 PHP 代码：

```
header("Status: 301 Moved Permanently", false, 301);
header("Location: http://www.example.com/nouvelle-page.htm");
exit(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T18:07:23.757

“随机”页面是否被编入索引？如果你 301 重定向到一个 URL，你会迷惑机器人，因为你告诉它“这个页面永久移动到 x URL”并且“x” URL 是随机的，所以我认为在这种情况下我会 302重定向。

# c# - 如何将格式化的字符串传递给 javascript var？请参阅 c# 示例我的意思

> ID：14451064
> 
> 赞同：0
> 
> 时间：2013-01-22T03:24:34.943
> 
> 标签：c#, javascript, jquery, .net

尝试在 c# 中生成 html 代码时，使用它非常有用。

```
 var someString = @"
            <html>
                <body>
                    Some html
                </body>
            </html>"; 
```

我知道 Html 库以对象的形式添加元素，但我不使用它。问题是如何在 javascript 中做同样的事情？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-22T03:27:34.677

你不能这样做，但你可以这样做......

```
<script type="text/html" id="somestring">
  your string blah blah blah
  blah blah blah
</script>
<script>
  var mystring = document.getElementById('somestring').innerHTML;
</script> 
```

# wcf - WCF 发现代理 asmx 兼容性

> ID：14451065
> 
> 赞同：1
> 
> 时间：2013-01-22T03:24:46.827
> 
> 标签：wcf, web-services, asmx

我开发了一些应该与.NET 2.0 向后兼容的 WCF Web 服务。我希望在我的 Web 服务前面有一个 WCF 发现代理，以将客户端重定向到正确的服务，但我的客户端是基于 .NET 2.0 的。他们将访问旧的 .asmx Web 服务，而不是 WCF 服务。那可能吗？

# c# - Ninject Factory Extension 将多个具体类型绑定到一个接口

> ID：14451066
> 
> 赞同：11
> 
> 时间：2013-01-22T03:24:52.750
> 
> 标签：c#, .net, inversion-of-control, ninject, factory

## **介绍：**

我正在使用[Ninject Factory Extension](https://github.com/ninject/ninject.extensions.factory/wiki)将简单的对象工厂注入到我的服务类中。

这是我的接口和实现它的两个类：

```
public interface ICar
{
    void Drive();
    void Stop();
}

public class Mercedes : ICar
{
    public void Drive()
    {
      Do mercedes drive stuff...
    }

    public void Stop()
    {
      Do mercedes stop stuff...  
    }

}

public class Ferrari : ICar
{
    public void Drive()
    {
      Do ferrari drive stuff...
    }

    public void Stop()
    {
      Do ferrari stop stuff...  
    }
} 
```

这是我在运行时动态创建汽车的对象工厂：

```
public interface ICarFactory
{
   ICar CreateCar(string carType);
}

public class CarFactory : ICarFactory 
{
   public ICar CreateCar(string carType)
   {
       ICar car;

       switch (type)
       {
           case "mercedes":
                car = new Mercedes();
           break;

           case "ferrari":
               car = new Ferrari();
           break;
       }

       return car;
    }
 } 
```

然后使用ninject工厂扩展“ToFactory”方法绑定我的汽车工厂接口：

```
public class CarModule : Ninject.Modules.NinjectModule
{
      public override void Load()
      {
           Bind<ICarFactory>().ToFactory();
      }
} 
```

## 问题：

我的工厂按预期注入到我的服务类中，可用于创建汽车对象，但是 ninject 在这里爆炸，因为它无法正确地将 ICar 解析为具体类型，即。`Mercedes`或`Ferrari`由工厂`CreateCar()`方法返回。

```
public CarService(string carType, ICarFactory carFactory)
{
   var car = carFactory.CreateCar(carType);
} 
```

## 问题：

假设我在这里使用的工厂模式与 ninject 工厂扩展的工作方式兼容，我如何设置 ICar -> Ferrari、ICar -> Mercedes 等的绑定，以便它们可以在运行时动态解析这种方法？

谢谢！

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-01-22T10:22:08.543

[wiki](https://stackoverflow.com/questions/9983226/ninject-factory-custom-instance-provider)上有一个自定义工厂的例子[`ninject.extension.factory`](https://stackoverflow.com/questions/9983226/ninject-factory-custom-instance-provider)

首先，创建自定义实现`StandardInstanceProvider`以覆盖默认工厂行为

```
public class UseFirstArgumentAsNameInstanceProvider : StandardInstanceProvider
{
    protected override string GetName(System.Reflection.MethodInfo methodInfo, object[] arguments)
    {
        return (string)arguments[0];
    }

    protected override ConstructorArgument[] GetConstructorArguments(MethodInfo methodInfo, object[] arguments)
    {
        return base.GetConstructorArguments(methodInfo, arguments).Skip(1).ToArray();
    }
} 
```

在为工厂`CarModule`指定`UseFirstArgumentAsNameInstanceProvider`（自定义实例提供程序）和为依赖项指定名称时`ICarFactory`

```
public class CarModule : NinjectModule
{
    public override void Load()
    {
        Bind<ICarFactory>()
            .ToFactory(() => new UseFirstArgumentAsNameInstanceProvider());

        Bind<ICar>()
            .To<Mercedes>()
            .Named("Mercedes");

        Bind<ICar>()
            .To<Ferrari>()
            .Named("Ferrari");
    }
} 
```

解析工厂和依赖项

```
var factory = kernel.Get<ICarFactory>();

var mercedes = factory.CreateCar("Mercedes");
var ferrari = factory.CreateCar("Ferrari"); 
```

**ps**：这里是[完整的例子](https://gist.github.com/4593576)

# css - 垂直媒体查询不起作用

> ID：14451070
> 
> 赞同：1
> 
> 时间：2013-01-22T03:25:32.087
> 
> 标签：css, responsive-design, media-queries

我的屏幕分辨率为 1240x768，但在我的浏览器中检测到的唯一媒体查询是当我将最小高度设置为 300 像素时，如果我将其设置为大于 300 像素的任何内容，查询似乎无效。这是没有意义的，因为我的浏览器窗口的高度是 768px。

```
@media only screen and (min-height:300px)  {
  .wanderfest #map-1-container {
    height: 768px;
    overflow: hidden !important;
    position: relative;
    width : 1560px;
}

.map-viewport {
    border: 1px solid black;
    /*height: 1170px;*/
    margin: 0 0 20px;
    overflow: hidden;
    position: relative;
    /*width: 1350px;*/
    height : 768px;
    width : 1560px;
}

/*map size*/
#map-1 {
    cursor: move;
    width: 2146px;
  height: 1170px;   
    position: absolute;
    left: -275px;
    /*top: -33px;*/
}
  } 
```

您可以在此处查看该站点[http://www.wanderfest.com](http://www.wanderfest.com)媒体查询位于最底部

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-22T06:45:19.120

我敢肯定你不想听到这个，但你肯定需要清理`<head>`一下。那里有太多的 CSS 和 Javascript 链接。

不过，我将把它归结为开发环境，我们将快速前进，尽管当有 28 个样式表可供选择时，很难找到媒体查询。

这是一个示例，希望您能理解垂直媒体查询：[http ://codepen.io/justincavery/live/qLJjt](http://codepen.io/justincavery/live/qLJjt)

我正在做的是通过`:after`伪元素打印媒体查询的值。

```
.container {
  width: 600px;
  height: 300px;
  margin: 5em auto;
  background: #cc4e46;
  padding: 3em;
  color: #333;
}

.container:after {
        font-size: 2em;

}
@media (max-height:300px) {

  .container:after {
    content: "max-height:300px";

  }

}

@media (min-height:300px) {

  .container:after {
    content: "min-height:300px" ;
  }

}

@media (min-height:400px) and (max-height:600px){

  .container:after {
    content: "(min-height:400px) and (max-height:600px)" 
  }

}

@media (min-height:600px){

  .container:after {
    content: "(min-height:600px)" 
  }

} 
```

您可以调整浏览器的高度以查看正在触发的媒体查询。当浏览器的高度超过 300 像素时，您的媒体查询应该被触发。很抱歉，我无法提供更多帮助，但也许如果您链接应该发生的页面和包含查询的 CSS 文件，我可以进一步查看它（我检查了这些 CSS 声明的来源，但无法找到任何提到的元素）。

# .htaccess - 使用其他规则剥离特定的查询字符串

> ID：14451072
> 
> 赞同：1
> 
> 时间：2013-01-22T03:25:34.363
> 
> 标签：.htaccess, mod-rewrite, url-rewriting

我似乎无法应用我找到的用于剥离查询字符串的任何示例。

我们在 www.example.com/blog/ 安装了 WordPress，出于某种原因，即使我们的类别设置为漂亮的 slug（即 www.example.com/categories/cat-name/ ），即使我可以从未在报告的引荐来源网页上找到任何链接，Google 网站管理员工具不断尝试索引 www.example.com/blog/?cat=3、?cat=25、?cat=37 等。事实上，对现在它显示了超过 50 个此类 URL，直到类别 #81，但我们只有 11 个类别。

正确的类别 URL 已编入索引，我只想删除所有这些查询字符串，然后重定向到 www.example.com/blog/，但这些示例似乎都不起作用……这是我最近的尝试（在网络空间根...在 /blog/.htaccess 中的尝试也没有结果）：

```
RewriteEngine On

RewriteCond %{HTTP_HOST} ^example\.com [OR]
RewriteCond %{REQUEST_URI} /index\.html$
RewriteRule (.*?)(index\.html)?$ http://www.example.com/$1 [NE,R=301,L]

RewriteCond %{REQUEST_URI} \.jpg.+$
RewriteRule ^(.*\.jpg).*$ http://www.example.com/$1 [NE,R=301,L]

RewriteCond %{QUERY_STRING} ^cat=([0-9]*)$
RewriteRule ^(.*)$ http://www.example.com/blog/ [R=301,L] 
```

提前致谢。请注意，第一组规则强制执行“www.”，没有“index.html”，第二组删除“.jpg”之后的所有内容，因为我们遇到了一个奇怪的问题，Google 试图索引以奇怪方式结尾的 url，像“.jpg%20>”，好像它以某种方式错过了锚源的结束引号，但我从来没有在网站中找到这样的错误......引荐来源总是一个 300 错误页面。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T17:32:11.673

如果要完全删除查询字符串，请以`?`.

来自[Apache 重写文档](http://httpd.apache.org/docs/2.2/mod/mod_rewrite.html#rewriterule)：

> 默认情况下，查询字符串会原封不动地传递。但是，您可以在包含查询字符串部分的替换字符串中创建 URL。只需在替换字符串中使用问号来指示应将以下文本重新注入到查询字符串中。当您想删除现有的查询字符串时，只用问号结束替换字符串。要组合新旧查询字符串，请使用 [QSA] 标志。

# javascript - 如何向函数添加方法？

> ID：14451073
> 
> 赞同：1
> 
> 时间：2013-01-22T03:25:35.303
> 
> 标签：javascript, oop, function, methods

在 JavaScript 中有很多方法可以调用函数，但这对我不起作用。有人可以告诉我我做错了什么吗？

我尝试了原型设计（例如`gameObject.prototype = {};`），但由于某种原因没有奏效。现在我只是试图直接在函数中分配方法，这甚至不起作用。

这张照片有什么问题？

```
function gameObject() {
    this.o = {};

    this.setimage = function(i) {
        this.o.img = i;
    };

    this.setDimensions = function(w, h) {
        this.o.width = w;
        this.o.height = h;
    };

    this.setPosition = function(x, y) {
        this.o.x=x;
        this.o.y=y;
    };

    this.create = function() {
        var el = document.createElement("div");
        el.className = "object " + this.o.cname;
        el.style.width = width * this.o.w;
        el.style.height = height * this.o.h;
        el.style.position = "absolute";
        el.style.top = height * this.o.y;
        el.style.left = width * this.o.x;
        map.appendChild(el);
    };

    this.setClass = function(c) {
        this.o.cname = c;
    };

    return this.o;
} 
```

我想要的是这样的：

```
var d = new gameObject();
d.setClass("class");
d.setDimensions(0.8, 0.15); 
```

我对面向对象编程还很陌生，所以我什至不知道我的词汇是否正确。我正在尝试做什么以及正确的方法是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-22T03:28:14.960

您不应从此构造函数返回任何内容。

删除这个：

```
return this.o; 
```

[演示在这里](http://jsfiddle.net/arunpjohny/cSv6K/)。

如果从构造函数返回值，则创建的对象将具有返回值的类型。

[演示在这里](http://jsfiddle.net/arunpjohny/cSv6K/2/)。如果您看到这个演示，`d.a`returns`4`意味着`new gameObject`返回`this.o`值而`this`不是`gameObject()`.

如果你想使用`prototype`：

```
function gameObject() {
    this.o = {};
}

gameObject.prototype = {
    setimage:function(i) {
        this.o.img = i;
    },
    setDimensions:function(w, h) {
        this.o.width = w;
        this.o.height = h;
    },
    setPosition:function(x, y) {
        this.o.x = x;
        this.o.y = y;
    },
    create:function() {
        var el = document.createElement("div");
        el.className = "object " + this.o.cname;
        el.style.width = width * this.o.w;
        el.style.height = height * this.o.h;
        el.style.position = "absolute";
        el.style.top = height * this.o.y;
        el.style.left = width * this.o.x;
        map.appendChild(el);
    },
    setClass:function(c) {
        this.o.cname = c;
    }
} 
```

[演示在这里](http://jsfiddle.net/arunpjohny/cSv6K/1/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T03:31:01.750

在 javascript 中，创建实例方法的最佳方式是使用原型。此代码应该可以工作：

```
function gameObject(){
    this.o={};
};
gameObject.prototype = {
    setimage: function(i){
        this.o.img=i;
    },
    setDimensions: function(w,h){
        this.o.width=w;
        this.o.height=h;
    },
    setPosition: function(x,y){
        this.o.x=x;
        this.o.y=y;
    },
    create: function(){
        var el=document.createElement("div");
        el.className="object "+this.o.cname;
        el.style.width=width*this.o.w;
        e.style.height=height*this.o.h;
        el.style.position="absolute";
        el.style.top=height*this.o.y;
        el.style.left=width*this.o.x;
        map.appendChild(el);
    },
    setClass: function(c){
        this.o.cname=c;
    }
}; 
```

你之前如何做的问题是返回一些东西 - 你不需要这样做。

# javascript - 使 id 链接可见 - 单击锚点时阻止默认事件。

> ID：14451082
> 
> 赞同：1
> 
> 时间：2013-01-22T03:26:41.883
> 
> 标签：javascript, jquery, html, css

一个非常简单的问题，但我想不出在谷歌上搜索的“正确”词。我的问题是我想让链接“历史”在我点击后仍然可见。我不希望页面下降到 div，而只是更改内容。我知道我需要 jquery 来隐藏/切换内容，但我被困在链接部分。

```
#goals{
display             : none;
}

#history{
display             : block;
} 
```

* * *

```
<p ><a id="History" href="#history"> <b>History</b> </a></p>
<p ><a id="Goals" href="#goals"> <b>Goals</b> </a></p>

<div id="history">
<p> blah blah blah </p>
</div>

<div id="goals">
<p> blah blah blah </p>
</div> 
```

* * *

```
$("#Goals").click(function(){
        $("#history).hide();
        $("#goals").show();
}) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T04:24:53.187

您需要在`preventDefault()`传递给您的处理程序的事件参数上调用该方法。例如：

```
<a id="historyLink" href="#">History</a> 
```

...和...

```
$('#historyLink').click(function(e){
   e.preventDefault(); // block the default action
   // do something
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T04:08:29.567

你不需要 CSS，你可以用 jQuery 来做这一切：

HTML

```
<p ><a id="History" href="#history"> <b>History</b> </a></p>
<p ><a id="Goals" href="#goals"> <b>Goals</b> </a></p>

<div id="history">
<p> history blah blah blah </p>
</div>

<div id="goals">
<p> goals blah blah blah </p>
</div> 
```

jQuery

```
$("#goals").hide();

$("#Goals").click(function(){
    $("#history").hide();
    $("#goals").show();
});

$("#History").click(function(){
    $("#goals").hide();
    $("#history").show();
}); 
```

这是一个将所有内容联系在一起的[jsFiddle 。](http://jsfiddle.net/9vzNN/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-22T04:54:58.113

您页面移动的原因是因为这是锚点上单击事件的默认操作。您需要做的是确保不会发生默认操作（这是导致您页面上的“移动”的原因。我建议以下内容：

```
<!-- you don't need to link it to the actual id, since you are toggling the visibility using jQuery -->
<a id="historyLink" href="#">History</a> 
```

然后，就 jQuery 而言：

```
$('#historyLink').click(function(event){
    //prevent the page from scrolling
    event.preventDefault();
    //possibly hide the other div if it is visible
    $('#theotherdiv').hide();
    //show the div
    $('#historyLink').show();
}); 
```

# c - 我在哪里可以获得 gcc/clang 等中的 C 标准函数的源代码？

> ID：14451087
> 
> 赞同：1
> 
> 时间：2013-01-22T03:26:55.497
> 
> 标签：c, gcc, clang, header-files

我想看看函数的“真实”C 源代码——它在 gcc 和 clang 编译器中的真实实现。我的意思是“真实的”，因为我查看了头文件，但我只看到了一个原型和一些看起来像扩展的东西。

例如，假设我想要标准 C`tmpnam()`函数的代码。它在 stdio.h 头文件中定义（按照标准——我知道只有它的原型必须在那里定义；代码本身可以来自*任何*（由编译器编写者更好地选择）头文件）。但我能看到的只有

```
/* Generate a temporary filename.  */
extern char *tmpnam (char *__s) __THROW __wur;
__END_NAMESPACE_STD 
```

使它工作的函数的代码在哪里？这就是我要找的。同样，我在 clang 编译器中找不到它。如果可能的话，有人可以解释为什么编译器作者选择这个模型吗？它不会在相应的头文件中显式地留下代码吗？执行某种类型的优化是否有一些“技巧”或类似的东西？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-22T03:28:34.283

您可以尝试获取[源代码`glibc`](http://www.gnu.org/software/libc/download.html)或任何类似的 C 库实现。那应该有您正在寻找的代码。也可以[在线浏览](http://sourceware.org/git/?p=glibc.git;a=tree)[源代码`glibc`](http://sourceware.org/git/?p=glibc.git;a=tree)。

至于推理，它的基本“你看不到你不需要看的东西”的推理。无需查看实现，只需查看库的接口即可。

# kineticjs - 动力学文本不出现

> ID：14451092
> 
> 赞同：1
> 
> 时间：2013-01-22T03:27:06.080
> 
> 标签：kineticjs

我正在尝试将动态文本添加到我的页面，但它不起作用。这一定是我正在做的一些小事，这是不对的。

这是我的代码：

```
 var text = new Kinetic.Text({
    x: 200,
    y: 200,
    text: 'text',
    fontSize: 44,
    fontFamily: 'Calibri',
    textFill: 'black'
  });
  layer.add(text); 
```

这是一个小提琴：

[http://jsfiddle.net/T8m64/90/](http://jsfiddle.net/T8m64/90/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T15:05:58.887

是的，kineticjs 将“textFill”更改为“fill”。工作：http: [//jsfiddle.net/T8m64/91/](http://jsfiddle.net/T8m64/91/)

```
var text = new Kinetic.Text({
  x: 200,
  y: 200,
  text: 'text',
  fontSize: 44,
  fontFamily: 'Calibri',
  fill: 'black'
}); 
```

这是因为他们删除了背景矩形，所以只显示文本。 [http://www.html5canvastutorials.com/kineticjs/html5-canvas-kineticjs-text-tutorial/](http://www.html5canvastutorials.com/kineticjs/html5-canvas-kineticjs-text-tutorial/)

# java - 尝试从 PNG 图像中提取字节

> ID：14451096
> 
> 赞同：1
> 
> 时间：2013-01-22T03:27:34.783
> 
> 标签：java, image, png, bytearray, bufferedimage

我正在尝试从 PNG 中提取字节并得到一些看起来很奇怪的结果。

这是我的提取字节方法：

```
public static byte[] extractBytes (String ImageName) throws IOException {
     // open image
     File imgPath = new File(ImageName);
     BufferedImage bufferedImage = ImageIO.read(imgPath);

     // get DataBufferBytes from Raster
     WritableRaster raster = bufferedImage.getRaster();
     DataBufferByte data   = (DataBufferByte) raster.getDataBuffer();

     return ( data.getData() );
} 
```

这里是我调用函数并遍历生成的 byte[] 的地方：

```
byte[] bytes = extractBytes("colorstrip.png");

for (int x : bytes) {
    System.out.println(x);
} 
```

我一直在一个 4x1 图像上测试此代码，该图像按顺序包含一个红色像素、一个蓝色像素、一个绿色像素和一个紫色像素。这是输出：

```
-1
0
0
-1
-1
0
-1
0
-1
-1
0
0
-1
-1
0
-1 
```

这个输出对我来说看起来不正确。我相信输出应该是这样的（我将 alpha 通道留空）：

```
255
0
0

0
255
0

0
0
255

255
0
255 
```

知道问题是什么吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-22T03:30:16.400

Java 字节是有符号的，所以当您期望 255 在 0-255 范围内时，java 使用 -128 到 127 范围，因此将无符号 255 打印为有符号 -1。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-22T03:51:19.047

BufferedImage 的类型是什么？我怀疑它是 TYPE_4BYTE_ABGR。由于值 255 的字节在 Java 中将变为 -1，因此输出似乎是正确的。-1、0、0、-1 = alpha：255，蓝色：0，绿色：0，红色 255。

# ios - 从 Obj-C 中的其他类访问实例方法

> ID：14451099
> 
> 赞同：0
> 
> 时间：2013-01-22T03:28:08.213
> 
> 标签：ios, objective-c, xcode, methods, levelhelper

首先，我使用的是游戏引擎`LevelHelper`。

有谁知道`LevelHelper`从另一个类访问实例化助手类的正确方法？

**例如：** 我有我的主`gameLayer`班和一个`hudLayer`班。该类`hudLayer`正在被导入并在`gameLayer`该类中实例化。但是我需要能够访问和操作在类`sprites`中加载的类。`hudLayer``gameLayer`

我被推荐使用`LevelHelper`辅助实例方法。所以我在我的 hudLayer 类中创建了实例方法，然后在我的`init`方法中调用它来加载精灵。我尝试将此方法用作实例方法，但出现错误提示无法识别的选择器

```
+[hudLayer hudLoader]; 
```

如果我尝试将该方法用作类方法，则会出现`EXC_BAD_ACCESS`错误。

我似乎找不到解决方案。

**我的代码：**

**hudLayer.h：**

```
+(LevelHelperLoader*)hudLoader; 
```

**hudLayer.mm ：**

```
 +(LevelHelperLoader*)hudLoader
    {
       LevelHelperLoader* lh;
       finishScreen = [lh spriteWithUniqueName:@"finishScreen"];
        return lh;
    } 
```

**游戏层.h：**

```
 LHSprite* finishScreen; 
```

**游戏层.mm：**

```
#import hudLayer.h

  -(id) init {
       [self retrieveRequiredObjects];

    }

  -(void) retrieveRequiredObjects {
        finishScreen = [[hudLayer  hudLoader] spriteWithUniqueName:@"finishScreen"];
        NSAssert(finishScreen!=nil, @"Couldn't find the menu!");
    } 
```

**注意：**这段代码只是为了确保我的逻辑和实现是正确的。

任何帮助表示赞赏，谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T03:55:11.880

您是否尝试过在调试器中单步执行您的代码以准确找出导致崩溃的行？

对我来说，它看起来好像在这里：

```
 LevelHelperLoader* lh;
   finishScreen = [lh spriteWithUniqueName:@"finishScreen"]; 
```

您已*声明*1h，但尚未*创建*它。因此，您正在向不存在的对象发送消息。

至少，像

```
 LevelHelperLoader* lh = [[LevelHelperLoader alloc] init]; 
```

有助于。

粗略浏览一下[文档](http://www.gamedevhelper.com/documentation/documentation.html)会增加更多细节：

```
 LevelHelperLoader* loader = [[LevelHelperLoader alloc] initWithContentOfFile:@"level1"]; 
```

在文档中，这是一个实例变量——这表明 hudLoader 应该是一个实例方法，而不是一个类方法：

```
- (LevelHelperLoader*) hudLoader; 
```

你应该在你的 hudLoader 初始化器中创建你的 LevelHelperLoader* 实例。

**更新**

你在评论中说：

*在我调用的 hudLayer.mm 的 init 方法中*

```
 lh = [[LevelHelperLoader alloc] initWithContentOfFile:@"level1"]; 
```

*并且在 .hi 中有*

```
 LevelHelperLoader* lh; 
```

我不确定这是否是阅读我的答案后的修改。然而，这里还有一些想法。

首先，您能否理清您的命名约定。课程应以大写字母开头。

**HudLayer.h**

让我们将此`lh`实例变量声明为 @interface 中的属性并改进它的名称：

```
@property (strong) LevelHelperLoader* levelHelper 
```

**HudLayer.mm**

允许它在您的@implementation 中自动合成或合成：

```
@synthesize levelHelper = _levelHelper; 
```

然后在你的 init 方法中

```
 _levelHelper = [[LevelHelperLoader alloc] initWithContentOfFile:@"level1"]; 
```

并`hudLoader`成为

```
 -(LevelHelperLoader*)hudLoader
   {
       finishScreen = [self.levelHelper spriteWithUniqueName:@"finishScreen"];
        return self.levelHelper;
    } 
```

但然后问问自己，`-hudLoader`实际上*在做什么*？分配给的行`finishscreen`？是`finishscreen`iVar 吗？你需要它吗？也许不是。除此之外，`-hudLoader`所做的一切就是返回您已经创建的 LevelHelperLoader 实例。现在您的 iVar 是一个属性，您可以使用点符号属性语法从 gameLayer 访问它，并`hudLoader`完全删除：

**游戏层.h**

```
@interface  
@property (strong) Hudlayer* hudLayer;  
@end 
```

**游戏层.m**

```
-(id) init {
       _hudLayer = [[Hudlayer alloc] init];
       [self retrieveRequiredObjects];
    }

 -(void) retrieveRequiredObjects {
        finishScreen = [self.hudLayer.levelHelper spriteWithUniqueName:@"finishScreen"];
        NSAssert(finishScreen!=nil, @"Couldn't find the menu!");
    } 
```

这让我想知道你是否需要一个 hudLayer 类（也许它正在做其他有用的工作）......看起来你可以直接从 gameLayer 获得你的 levelHelper。

**游戏层.h**

```
@interface  
@property (strong) LevelHelperLoader* levelHelper;
@end 
```

**游戏层.m**

```
-(id) init {
        _levelHelper = [[LevelHelperLoader alloc] initWithContentOfFile:@"level1"]; 
       [self retrieveRequiredObjects];
    }

 -(void) retrieveRequiredObjects {
        finishScreen = [self.levelHelper spriteWithUniqueName:@"finishScreen"];
        NSAssert(finishScreen!=nil, @"Couldn't find the menu!");
    } 
```

最后，我不建议您逐行遵循此代码，因为我不知道您项目的更广泛背景。但是您*确实*需要理清类和实例、分配、实例化、本地变量与实例变量之间的混淆。请注意命名约定，以便您知道何时向类或该类的实例发送消息，并且知道何时直接或通过@property（例如self.property）寻址iVar。始终如一。想想一堂课实际上为你*做*了什么。

# c - 使用 AVR Studio 6 编译 Procyon 库时出错

> ID：14451101
> 
> 赞同：1
> 
> 时间：2013-01-22T03:28:15.903
> 
> 标签：c, avr, avr-gcc

我在使用 AVR Studio 6 编译 Procyon 库时遇到了一些麻烦。我使用的代码完全适用于 AVR Studio 4。

以下行无法在此公共库中编译：

```
//! prints a string stored in program rom
/// \note This function does not actually store your string in
/// program rom, but merely reads it assuming you stored it properly.
void rprintfProgStr(const prog_char str[]); 
```

导致错误：

```
Error   1   unknown type name 'prog_char' D:\AVRTests\ProcyonLibTest\ProcyonLibTest\rprintf.h   85  1   ProcyonLibTest 
```

此功能的减速还有另一个错误。下一个是：

```
// use this to store hex conversion in RAM
//static char HexChars[] = "0123456789ABCDEF";
// use this to store hex conversion in program memory
//static prog_char HexChars[] = "0123456789ABCDEF";
static char __attribute__ ((progmem)) HexChars[] = "0123456789ABCDEF"; 
```

导致错误：

```
Error   2   variable 'HexChars' must be const in order to be put into read-only section by means of '__attribute__((progmem))'  D:\AVRTests\ProcyonLibTest\ProcyonLibTest\rprintf.c 45  39  ProcyonLibTest 
```

这是一个标准库，从研究中每个人似乎都在工作。关于为什么会发生这种情况的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T07:55:51.787

错误 1 ​​似乎与不包括有关`<avr/pgmspace.h>`。或者版本不兼容。您可能必须制作自己的 typedef 才能使其正常工作。

错误 2 看起来像是由更新的编译器版本引起的错误。您可以修改文件以使变量为 const。

如果您不想调整这些文件，那么您需要获得所有内容的兼容版本。

# php - 用负数对浮点数数组进行排序

> ID：14451104
> 
> 赞同：0
> 
> 时间：2013-01-22T03:28:44.230
> 
> 标签：php, arrays, sorting, floating-point, negative-number

我不知道为什么会发生这种情况，也无法在谷歌上找到解决方案。

这是我的浮点数数组`asort`by `SORT_NUMERIC`：

```
Array ( [0] => -5.092368092812E-9 [6] => -7.0826220389192E-13 [1] => 1.878703363826E-13
[2] => 1.8795587624424E-13 [3] => 2.3346288902754E-13 [4] => 3.0942295197372E-13 [5] =>
7.9098357204299E-13 [7] => 1.1684494919952E-12 [8] => 1.1685043272518E-12 [9] =>
1.1686030371986E-12 [11] => 8.0451267461732E-12 [12] => 3.7644522809587E-10 [13] =>
3.7763249406879E-10 [14] => 3.7955309374295E-10 [15] => 8.7712602092571E-10 [16] =>
2.8469968623087E-9 [17] => 2.8531226087777E-9 [10] => 6.2070895038159E-9 [18] =>
1.0725026970778E-8 [20] => 1.4052528456163E-8 [21] => 1.4087656025218E-8 [19] =>
2.0018554451113E-8 [22] => 1.130570524972E-7 [23] => 2.186127734393E-5 [25] =>
0.0045965175663413 [24] => 0.51061752595249 ) 
```

如何正确排序？

提前谢谢了！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T04:54:45.093

`natsort`会为你工作。

```
<?php  
// do stuf
$array  = Array ( -5.092368092812E-9 , -7.0826220389192E-13 , 1.878703363826E-13
, 1.8795587624424E-13 , 2.3346288902754E-13 , 3.0942295197372E-13 ,
7.9098357204299E-13 , 1.1684494919952E-12 , 1.1685043272518E-12 ,
1.1686030371986E-12 , 8.0451267461732E-12 , 3.7644522809587E-10 ,
3.7763249406879E-10 , 3.7955309374295E-10 , 8.7712602092571E-10 ,
2.8469968623087E-9 , 2.8531226087777E-9 , 6.2070895038159E-9 ,
1.0725026970778E-8 , 1.4052528456163E-8 , 1.4087656025218E-8 ,
2.0018554451113E-8 , 1.130570524972E-7 , 2.186127734393E-5 ,
0.0045965175663413 , 0.51061752595249 );

$res = natsort($array);

echo "<pre>";
print_r($array);

?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T03:34:22.560

这很尴尬。

`asort`维护索引关联。 `sort`才不是。使用`sort`.

[http://php.net/manual/en/array.sorting.php](http://php.net/manual/en/array.sorting.php)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-22T03:33:09.630

试试这个功能：

```
function masort(&$data, $sortby)
{
   static $sort_funcs = array();

   if (empty($sort_funcs[$sortby])) {
       $code = "\$c=0;";
       foreach (split(',', $sortby) as $key) {
         $array = array_pop($data);
         array_push($data, $array);
         if(is_numeric($array[$key]))
           $code .= "if ( \$c = ((\$a['$key'] == \$b['$key']) ? 0:((\$a['$key'] < \$b['$key']) ? -1 : 1 )) );";
         else
           $code .= "if ( (\$c = strcasecmp(\$a['$key'],\$b['$key'])) != 0 ) return \$c;\n";
       }
       $code .= 'return $c;';
       $sort_func = $sort_funcs[$sortby] = create_function('$a, $b', $code);
   } else {
       $sort_func = $sort_funcs[$sortby];
   }
   $sort_func = $sort_funcs[$sortby];
   uasort($data, $sort_func);
} 
```

我有它，它就像通用分拣机。

# macos - 无法在 Mac OS X 上构建 rapidjson 测试

> ID：14451107
> 
> 赞同：0
> 
> 时间：2013-01-22T03:29:00.490
> 
> 标签：macos, build, compilation

我正在尝试在 Mac OS X 上为 rapidjson 0.11 ( [http://code.google.com/p/rapidjson/ ) 构建测试。](http://code.google.com/p/rapidjson/)它包括三个项目：gtest（构建良好）、unittest（构建失败）和 perftest（构建失败），并且在构建时会出现错误 1 ​​和错误 2。

编译器输出显示导致 make 失败的 unittest 和 perftest 的以下错误：

```
../../include/rapidjson/reader.h: In function ‘const char* rapidjson::SkipWhitespace_SIMD(const char*)’:
../../include/rapidjson/reader.h:116: error: ‘_SIDD_UBYTE_OPS’ was not declared in this scope
../../include/rapidjson/reader.h:116: error: ‘_SIDD_CMP_EQUAL_ANY’ was not declared in this scope
../../include/rapidjson/reader.h:116: error: ‘_SIDD_BIT_MASK’ was not declared in this scope
../../include/rapidjson/reader.h:116: error: ‘_SIDD_NEGATIVE_POLARITY’ was not declared in this scope 
```

这些预处理器常量与 SSE4 指令相关。rapidjson 可以使用 SSE2 或 SSE4.2 来加速，构建时默认使用 SSE4.2。

makefile 包含 -msse4.2 编译器开关以启用 SSE4.2 支持，并且查看头文件显示在 OS X 上，需要为*SIDD* ... 常量定义**SSE4_1**和**SSE4_2**预处理器常量。定义。出于某种原因，这些*SIDD* ... 常量没有被定义。

 **进一步的研究表明 -msse4 开关支持 SSE4.1 和 SSE4.2，所以我尝试将开关更改为 -msse4，但仍然出错。

不确定 -msse4.2 开关是否自动定义**SSE4_2**，但我尝试手动定义它，但还是没有运气。

注意：如果你想尝试在 Mac 上自己构建它，你需要下载一个不同的 premake 脚本文件，因为包含的文件不起作用。[您可以在此处https://code.google.com/p/rapidjson/issues/detail?id=54](https://code.google.com/p/rapidjson/issues/detail?id=54)从第二篇文章的附件中下载更正后的脚本

关于如何在 OS X 上成功构建它的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T02:03:45.787

简短的回答 - 我有一个旧版本的 gcc (4.2)，它不支持 -msse4.2 标志（它是在 gcc 4.3 中引入的）。

升级到最新版本的gcc后，上面的问题就消失了：

1.  通过打开终端并运行来检查哪个版本的 gcc 处于活动状态`gcc -v`
2.  [从http://www.macports.org/install.php](http://www.macports.org/install.php)下载适用于您的 OS X 版本的 MacProst 安装程序并运行安装程序（升级 GCC 版本的简单方法）
3.  打开新的终端窗口（必须是新的，因为 MacPorts 安装后更新了 PATH 环境变量）
4.  检查您已经安装了哪些版本的 gcc `port select --list gcc`（注意：您可能不会安装一些更高版本。请参阅下一步）
5.  安装最新版本的 gcc（目前是 gcc47）`sudo port install gcc47`（这需要一段时间才能下载）
6.  再次运行`port select --list gcc`，您应该会在列表中看到新版本（例如。`mp-gcc47`）
7.  选择这个最新版本作为活动 gcc 版本`sudo port select gcc mp-gcc47`
8.  再次运行`gcc -v`以检查最新版本是否处于活动状态

对编译器进行排序后，第一次尝试为 release32 构建 rapidjson 时，由于没有为 32 位构建定义 __int128 ，因此出现了有关限制头文件的错误。Gnu 的官方立场是你需要自己滚动。有关更多信息，请参阅以下链接中的答案：

[编译 32 位二进制文​​件：在 '__int128' 之前预期的 unqualified-id](https://stackoverflow.com/questions/13148463/compiling-32bit-binary-expected-unqualified-id-before-int128)

为 release64 或 debug64 构建解决了这个问题，但由于一些关于在`test/unittest/readertest.cpp:187:4`. 由于 make 文件包含编译器标志`-Werror=cast-qual`，因此这些警告被视为错误。在 unittest 和 perftest makefile 中删除这个标志解决了这个问题（不是理想的解决方案，但我只是想让它构建）。

由于 /usr/lib64 文件夹不存在，并且生成文件包含 flag ，因此仍然存在链接器警告`-L/usr/lib64`，但构建仍然成功。

成功 - unittest_release_x64_gmake 和 perftest_release_x64_gmake 都运行没有问题！

注意：rapidjson 构建说明包含在 ZIP 存档的自述文件中。**

# java - 如何在图像文件中查找隐藏文件 (Jpg/Gif/Png)

> ID：14451109
> 
> 赞同：7
> 
> 时间：2013-01-22T03:29:14.940
> 
> 标签：java, python, image-processing, hidden-files, jmagick

我遇到了一个链接，该链接显示了如何隐藏图像文件中的文件数量：http: [//lifehacker.com/282119/hide-files-inside-of-jpeg-images](http://lifehacker.com/282119/hide-files-inside-of-jpeg-images)更多关于检测的讨论：[http://ask .metafilter.com/119943/How-to-detect-RARsEXEs-hidden-in-JPGs](http://ask.metafilter.com/119943/How-to-detect-RARsEXEs-hidden-in-JPGs)

我正在尝试找出以编程方式检测图像文件中是否隐藏其他文件的好方法？我应该尝试解压缩文件以查看是否有其他文件出来吗？

我没有以编程方式绑定，但在 JVM 上运行良好的东西会很棒。

**更新**

一种方法：

会不会有这样的工作（由 metafilter 上的某个人建议）

```
$ cat orig.jpg test.zip > stacked.jpg
$ file stacked.jpg 
stacked.jpg: JPEG image data, JFIF standard 1.01
$ convert stacked.jpg stripped.jpg  # this is an ImageMagick command
$ ls -l
 11483 orig.jpg
322399 stacked.jpg
 11484 stripped.jpg
310916 test.zip 
```

对于这种方法，我可以使用 JMagick。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T04:11:31.090

好问题！

如果您只想检查附加到图像文件末尾的 RAR 或 ZIP 文件，那么通过`unrar`or`unzip`命令运行它是最简单的方法。

如果您想要更快但不太准确的检查，您可以检查一些指示某些文件类型的特殊文件格式签名。识别文件格式的常用 UNIX 工具是[`file`](http://www.darwinsys.com/file/). 它使用[二进制文件签名](http://www.opensource.apple.com/source/file/file-44/file/magic/Magdir/archive)数据库，其格式在[magic(5)](http://linux.die.net/man/5/magic)手册页中定义。它不会在 JPEG 的末尾为您找到 RAR 文件，因为它只查看文件的开头以尝试快速识别它们，但您可以修改其源代码以执行您想要的操作。您还可以重用其文件签名数据库。如果您在 Rar 文件部分查看[其数据库的存档文件部分](http://www.opensource.apple.com/source/file/file-44/file/magic/Magdir/archive)，它会显示：

```
# RAR archiver (Greg Roelofs, newt@uchicago.edu)
0   string      Rar!        RAR archive data, 
```

这表明您的 JPEG 文件是否包含`Rar!`可疑的四个字节。但是您必须详细检查[Rar 文件格式规范](http://ams.cern.ch/AMS/amsexch/arch/rar/technote.txt)，以检查是否存在更多 Rar 文件结构以避免误报——该网页也包含四个字节 `Rar!`，但没有附加隐藏文件：P

但是，如果有人知道您的自动检查的详细信息，他们可以轻松解决它们。最简单的解决方法是在将文件附加到 JPEG 之前反转文件的所有字节。然后，您的任何签名都不会捕获文件的反转版本。

* * *

如果有人真的想在图像中隐藏文件，那么有各种方法可以做到这一点，您将无法轻易检测到。对此的通用术语是“隐写术”。例如，维基[百科页面](http://en.wikipedia.org/wiki/Steganography)显示了一张树木图片，其中隐藏了一张猫的图片。对于更简单的隐写方法，有统计测试可以表明对图片做了一些有趣的事情，但如果有人花很多时间想出自己的方法来隐藏图像中的其他文件，你将无法检测它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T03:56:21.423

要查看文件中是否附加了任何元数据或其他信息，您可以对图像进行解码并重新编码以查看大小是否显着减小。对于 JPEG 文件，您可能需要进行无损旋转，以保留原始 DCT 数据，否则文件大小可能会仅通过编码差异而改变。

较小的结果不能证明隐藏数据，但它表明您需要仔细查看。

你从来没有分享过你提出这个问题的动机，但我猜它是关于将图像下载到公共站点。在这种情况下，您真的不应该关心提交的图像是否包含无关数据，您应该只清理输入。解码/重新编码过程将是完美的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-22T04:14:17.307

您可以搜索文件签名。 [http://en.wikipedia.org/wiki/List_of_file_signatures](http://en.wikipedia.org/wiki/List_of_file_signatures) 例如，对于 7z 文件，签名是 37 7A BC AF 27 1C，对于 rar 文件，它是 52 61 72 21 1A 07 00，对于 zip，它是 50 4B 03 04 看看十六进制编辑器中的压缩文件，例如 HxD

# javascript - angularjs ui在Firefox中更新缓慢

> ID：14451110
> 
> 赞同：0
> 
> 时间：2013-01-22T03:29:18.863
> 
> 标签：javascript, angularjs

这是演示[http://jsbin.com/ogiyej/9/edit](http://jsbin.com/ogiyej/9/edit)

当我选择'a'的第一个选项时，

然后选择'a1'的第二个选项

第三个选项将更改为“a11 a12 a13”等几个选项。

但是当我将第一个选项更改为“b”时

然后选择'b1'的第二个选项

在**Firefox中，第三个选项非常*****缓慢地***更改为“b1”的区域；

**铬**运作良好。

两种浏览器均已更新至最新版本。

（在Firefox中，如果我多次单击第二个选项，ui将很快更新）

# jquery - jQuery 上的链接单击以启用加载图形

> ID：14451112
> 
> 赞同：0
> 
> 时间：2013-01-22T03:29:34.780
> 
> 标签：jquery, css, html, page-loading-message

所以我有这个脚本，用于在页面加载时显示这个 loding 图形。

```
 $(window).load(function() { // makes sure the whole site is loaded
        $("#status").fadeOut(); // will first fade out the loading animation
        $("#preloader").delay(100).fadeOut("fast"); // will fade out the white DIV that covers the website.
    }) 
```

这会在页面加载时立即显示。知道如何在页面退出时进行此显示吗？那么对于用户来说，从点击到加载是一致的吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T03:35:38.963

使用`unload`.

```
$(window).unload(function() {
        $("#status").fadeOut(); 
        $("#preloader").delay(100).fadeOut("fast"); 
}); 
```

# python - 如何总计一个while循环？

> ID：14451115
> 
> 赞同：1
> 
> 时间：2013-01-22T03:29:44.247
> 
> 标签：python, while-loop

目的是放入差异年龄，如果输入 -1 则程序停止，我的总计语句是错误的。有人请帮我解决它。

```
Totalage = 0

age = 0

print "Enter you Family member's ages!"

age = raw_input ("Enter an age ")

while age != -1:
    age = input("Enter an age ")
    Totalage = Totalage + age

print Totalage 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-22T03:39:49.423

你的代码有两个问题

1.  您正在跳过您的第一个输入，并且您没有将其添加到您的总数中
2.  您正在将最后一个终止符输入添加`-1`到您的总计中。

只需更改 while 循环中语句的顺序

```
age = int(raw_input ("Enter an age "))
while age != -1:    
    Totalage = Totalage + age
    age = int(input("Enter an age ")) 
```

另请注意，`raw_input`, 通常返回一个字符串，需要先将其转换为 int ，然后才能对其进行计算。

* * *

Itertools 提供了一些很棒的工具，为了好玩，我尝试用`itertools.takewhile`

```
>>> from itertools import count, takewhile
>>> sum(takewhile(lambda x: x != -1,
          (int(raw_input("Enter an age ")) for e in count())))
Enter an age 20
Enter an age 30
Enter an age 40
Enter an age 50
Enter an age -1
140 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T03:39:34.713

问题是您的`while`条件正常工作，但直到您下一次运行时才触发它。因此，如果您的输入为 -1，则：

```
age = input("Enter an age ")
Totalage = Totalage + age 
```

将年龄递减 -1 并在下一个循环中退出循环。为了调整，你可以做这样的事情。请注意，其中一项调整正在更改`input`为`raw_input`（通常在 Python 2.x 中是一种更好的做法，而 Python 3.x 会更改 的行为`input`以匹配它）：

```
Totalage = 0  
print "Enter you Family member's ages!"
while True:
    age = int(raw_input("Enter an age "))
    if age == -1:
      break
    Totalage += age

print Totalage 
```

`while True`让你进入一个连续的循环，只要`-1`输入值，你就会跳出它。此外，`int`您需要执行以下操作才能将数字转换为整数。如果有人输入了不正确的值（例如“十”），这将失败，所以如果这是一个问题，您将不得不添加一些额外的错误处理。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-22T03:39:54.980

问题是您在检查循环条件之前`-1`添加。`Totalage`您可以改写这样的循环：

```
print "Enter you Family member's ages!"
Totalage = 0
while True:
    age = input("Enter an age ")
    if age == -1:
        break
    Totalage +=  age
print Totalage 
```

# objective-c - Objective C - 随机字符生成器

> ID：14451116
> 
> 赞同：1
> 
> 时间：2013-01-22T03:29:54.770
> 
> 标签：objective-c, random, generator

我正在寻找随机字符生成器的一些帮助。目前我知道如何使用 switch 和 char 创建生成器，但我希望代码通过 awnsers 是，否，也许，然后无限期地显示其中一个。

任何帮助，将不胜感激 ：）

PS 我在 Xcode 上使用目标 C

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T03:34:55.320

数字 60-95 转换为 ASCII 映射中的字母 AZ。只需在该范围内生成一个随机数，将其转换为 a `char`，就完成了。例如：

```
#include <time.h>
#include <stdlib.h>
#include <stdio.h>

srand(time(NULL));
int r = rand() % 35 + 60;
char c = (char) r;

fprintf(stdout, "%c", c);
NSLog(@"%c", c); 
/* etc. */ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T03:35:53.337

如果我理解您的问题，您只想随机抓取三个字符之一。只需使用`int r = arc4random() % 2;`生成 0 到 2 之间的随机整数。然后使用 switch case 来评估三种可能性。

# c - 将未知的十六进制数字转换为经度和纬度

> ID：14451117
> 
> 赞同：3
> 
> 时间：2013-01-22T03:30:03.723
> 
> 标签：c, binary, hex, coordinates, latitude-longitude

```
F3 c8 42 14 - latitude //05.13637° should be nearby this coordinate
5d a4 40 b2  - longitude //100.47629° should be nearby this coordinate 
```

这是我从 GPS 设备获得的十六进制数据，如何转换为可读坐标？我没有任何手动文档。请帮助。谢谢

```
 22 00 08 00 c3 80 00 20 00 dc f3 c8 42 14 5d a4 40 b2 74 5d 34 4e 52 30 39
47 30 35 31 36 34 00 00 00 
```

这是我收到的完整字节，但工程师告诉我 F3 c8 42 14 是纬度，5d a4 40 b2 是经度

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-22T06:24:44.920

我曾经使用过摩托罗拉 GPS 模块，文档说这两个十六进制表示 int 类型。

在您的情况下，您可能还想查看文档。如果你知道型号，你可以谷歌它。这是我使用的摩托罗拉 GPS 的文档链接。

[摩托罗拉 GPS 模块](http://www.google.com/url?sa=t&rct=j&q=&esrc=s&source=web&cd=3&ved=0CEAQFjAC&url=http%3A%2F%2Fwww.wa5rrn.com%2FGPS%2520Other%2FMotorola%2520M12%2Fgpsusersguidev5chap3.pdf&ei=xC3-UNiyOozy9gTYg4GoCw&usg=AFQjCNErqt-X5c-1TUHiEh5up6DmXQ_FNA&sig2=qu51qOx7jp8yMKP1tqp4mw&bvm=bv.41248874,d.eWU)

我也冒昧地为你做了一些计算。如果你的纬度确实是

```
0x1442c8f3 
```

（字节序在这里确实有所作为）。整数等价物是

```
339921139 
```

在十进制系统中。如果你将它除以 3600000 毫秒（其中 1 度 = 60 分钟 = 60 * 60 秒 = 60*60*1000 毫秒），你会得到

```
94.4225386 
```

deg，接近您的预期。没有足够的数据来验证它，但我相信大多数 GPS 模块都会返回纬度和经度的毫秒数。）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-22T05:36:26.603

假设十六进制代码表示未加密的 32 位浮点数（它们可能不这样做），您可以尝试将它们读入 C 程序并使用`printf("%f")`.

不要忘记单词可以同时具有字节顺序，即第一个可以是`F3 C8 42 14`或`14 42 C8 F3`（字节反转）。

尝试这两种方式，看看你是否得到任何有用的东西。

我无法从这里的[这个在线浮点计算器](http://babbage.cs.qc.cuny.edu/IEEE-754/index.xhtml)快速得到任何东西。

* * *

**编辑：**

基于 Khanal 的回答，这个指向[纬度/经度](http://en.wikipedia.org/wiki/ISO_6709#Latitude)的链接表明这些数字确实是固定点并解释了符号约定。

也许对计算更有用的是[HexIt](http://www.wfwsoftware.com/hexit.html)，它允许从各种 C 数据类型中进行选择，包括整数和浮点数，以及在小端和大端表示之间来回切换。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-24T05:54:50.423

我认为这些值是 32 位浮点数。但是，您显示的流中的字节略有偏移。首先取经度：32 位浮点中的 100.47629 是 42C8F3DC 这些是流中的字节 10 到 13（最低有效字节在前）。对于 32 位浮点中的纬度 5.13637 是 40A45D24，这些是字节 14 到 17，但它在字节流中是 40A45D14，所以它在最低有效十进制数字中稍微偏离了一点（同样，它是最低有效字节）。

# java - 使用 jdbc 连接到 sql server

> ID：14451121
> 
> 赞同：0
> 
> 时间：2013-01-22T03:30:53.737
> 
> 标签：java, sql-server-2008, jdbc

我正在尝试使用 JDBC 连接到 SQL Server 2008。我的 SQL Server 2008 上有 Windows 身份验证。

我的代码是

```
public class T1 {

/**
 * @param args
 */
private static void Connect(){
    try
    {
        Class.forName("com.microsoft.sqlserver.jdbc.SQLServerDriver");
        String connectionUrl =        "jdbc:sqlserver://servername;databaseName=employee;user=username;password=''/*since it is windows authentication*/;";
        java.sql.Connection con = DriverManager.getConnection(connectionUrl);
    }
    catch(ClassNotFoundException e)
    {
        e.printStackTrace();
    }
    catch(SQLException e2)
    {
        e2.printStackTrace();
    }
}

public static void main(String[] args) {
    // TODO Auto-generated method stub

    T1.Connect();

} 
```

我最终得到一个 ClassNotFoundException 。

堆栈跟踪是`java.lang.ClassNotFoundException: com.microsoft.sqlserver.jdbc.SQLServerDriver at java.net.URLClassLoader$1.run(Unknown Source) at java.security.AccessController.doPrivileged(Native Method) at java.net.URLClassLoader.findClass(Unknown Source) at java.lang.ClassLoader.loadClass(Unknown Source) at sun.misc.Launcher$AppClassLoader.loadClass(Unknown Source) at java.lang.ClassLoader.loadClass(Unknown Source) at java.lang.Class.forName0(Native Method) at java.lang.Class.forName(Unknown Source)`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-22T03:55:11.123

如果您使用 Eclipse 作为开发环境，请执行以下操作：

1.  在 Eclipse 中右键单击您的项目。
2.  单击“构建路径”->“配置构建路径”
3.  默认情况下，您将位于“库”选项卡中。现在，单击“Add External Jars”并为 MSSQL Server 添加 JDBC Driver Jar。（如果您没有，请从[JDBC Driver for MSSQL Server 2008下载](http://www.microsoft.com/en-in/download/details.aspx?id=11774)
4.  单击确定并尝试再次运行您的程序。

如果您仍然遇到问题，请回复。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T03:34:15.243

ClassNotFoundException 可能意味着您的类路径中没有可用的 SQL*Server 驱动程序

# javascript - 如何正确选择仍使用承诺加载的项目？

> ID：14451127
> 
> 赞同：0
> 
> 时间：2013-01-22T03:31:31.157
> 
> 标签：javascript, promise

我在页面加载时有项目 ID 列表：

```
var itemIds = [1, 5, 10, 11]; 
```

ID 被呈现到列表中并显示给用户。我有加载项目详细信息的函数，它返回 Promise/A。

```
function loadInfo(id) { ... } 
```

在页面加载时启动所有项目的信息加载：

```
val infos = {};
$.each(itemIds, function(i, id) { infos[id] = loadInfo(id); } 
```

现在问题本身。

当用户点击项目 ID 时：

*   如果加载了项目信息，则必须显示信息
*   如果项目信息尚未加载，则必须在加载时显示

看起来很简单：

```
$('li').click(function() {
    var id = $(this).data('item-id');
    infos[id].then(function(info) { $('#info').text(info); });
}); 
```

但是，如果用户在加载当前项目之前单击了另一个项目，那么我必须取消当前项目承诺的处理程序并安排新项目。

如何正确地做到这一点？

我有几个可行的解决方案（比如维护 currentItemId 变量并在 Promise 处理程序中检查它），但它们很难看。我应该改用反应式编程库吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T02:57:34.597

克里曼特，

我想您可以通过多种方式对此进行编码。这是一个：

```
var INFOS = (function(){
    var infoCache = {},
        promises = {},
        fetching = null;

    var load = function(id) {
        if(!promises[id]) {
            promises[id] = $ajax({
                //ajax options here
            }).done(function(info){
                infoCache[id] = info;
                delete promises[id];
            });
        }
        return promises[id];
    }

    var display = function(id, $container) {
        if(fetching) {
            //cancel display (but not loading) of anything latent.
            fetching.reject();
        }
        if(infoCache[id]) {
            //info is already cached, so simply display it.
            $container.text(infoCache[id]);
        }
        else {
            fetching = $.Deferred().done(function() {
                $container.text(infoCache[id]);
            });
            load(id).done(fetching.resolve);
        }
    }
    return {
        load: load,
        display: display
    };
})(); 
```

正如您将看到的，所有复杂性都捆绑在 namespace`INFOS`中，它公开了两种方法；`load`和`display`。

以下是调用方法的方法：

```
$(function() {
    itemIds = ["p7", "p8", "p9"];

    //preload
    $.each(itemIds, function(i, id) { INFOS.load(id); });

    //load into cache on first click, then display from cache.
    $('li').on('click', function() {
        var id = $(this).data('item-id');
        INFOS.display(id, $('#info'));
    });
}); 
```

**[DEMO](http://jsfiddle.net/dEXUr/1/)**（带模拟 ajax）

这里的技巧是：

*   缓存由 id 索引的信息
*   缓存活动的 jqXHR 承诺，由 id 索引
*   如果以前加载过，则显示缓存中的信息...
*   ...否则，每次请求信息时，创建一个与信息显示关联的延迟，可以独立于相应的 jqXHR 解决/拒绝。

# objective-c - Xcode - 如何获取位置准确性数据？

> ID：14451138
> 
> 赞同：2
> 
> 时间：2013-01-22T03:32:52.583
> 
> 标签：objective-c, xcode, geolocation, location, core-location

我正在构建一个 iOS 应用程序，它现在能够获取当前用户位置并向其用户显示（使用 CLLocationManager）。有没有办法也显示位置精度？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-22T03:51:59.453

在你的`CLLocationManagerDelegate`：

```
- (void)locationManager:(CLLocationManager *)manager
    didUpdateToLocation:(CLLocation *)newLocation
           fromLocation:(CLLocation *)oldLocation
{
   CLLocationAccuracy accuracy = newLocation.horizontalAccuracy;
} 
```

# algorithm - 寻找 n 位字符串的对抗论点

> ID：14451140
> 
> 赞同：3
> 
> 时间：2013-01-22T03:32:59.483
> 
> 标签：algorithm, string-algorithm

给定：
*S*，一组*奇数个*n 位字符串
A，一个特定的 n 位字符串

表明任何决定 A 是否在 S 中的算法都必须在最坏的情况下检查 A 的所有 n 位。

通常，我们当然希望必须查看字符串的所有部分才能进行匹配，但是 S 有一些特殊的东西，它有一个奇怪的大小，这让我无法理解。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-22T06:19:33.750

假设我们有一个算法 A 可以正确地决定 S 中的成员资格，并说对于任何输入的 n 位字符串，该字符串是否在 S 中。

假设对于给定的输入 n 位字符串 s1，算法 A 从不查看 s1 的位 i 并继续说“s1 在（不在）S 中”。然后一个字符串 s2 等于 s1 除了位 i 翻转也位于（不在）S 中！也就是说，对于我们输入 A 的任何字符串，如果 A 没有查看特定位，那么在 S 中（或不在）S 中还有第二个字符串，该位被翻转。

那么奇数集合 S 有什么特别之处呢？我们不能均匀地配对 S 中的字符串。也就是说，必须有一个字符串 s3，A 查看并确定它在 S 中，对于它没有一个位可以翻转以形成 S 中的另一个字符串。所以 A 必须查看 s3 的*所有*位（否则我们*可以*这样一个字符串，就像我们之前做的那样）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T06:43:27.430

我猜奇数线索是找到你的集合或数组的结尾`memory`。

假设您使用的是`32`位系统，也许编译器会将内存中程序的数据结构对齐在八字节边界上。你的数据段中有一大堆字符串指针。如果有奇数个字符串，下一个需要八字节对齐的东西前面有四个字节的填充。如果有偶数个字符串，则没有填充。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-22T03:41:00.327

如果我理解正确，那么 S 的字符串数是奇数还是偶数都无关紧要。对于 S 中的任何特定字符串，要检查它是否与任意字符串 A 匹配，您必须检查每个字符串中的每个字符。如果其中一个字符串比另一个字符串短或您正在检查的字符不匹配，您可以提前停止。

# android - 带有 Keep-Alive 的 Android DefaultHTTPConnection 不重用 TCP 连接

> ID：14451141
> 
> 赞同：4
> 
> 时间：2013-01-22T03:33:00.410
> 
> 标签：android, http, post, connection, keep-alive

我正在尝试通过 Keep Alive 重用 HTTP 连接。服务器支持 Keep Alive，我发送 Connection: Keep-Alive HTTP 标头，并且在收到响应后连接仍然是 FIN（由 Android 客户端启动）。一些帮助将不胜感激。

这里有一些代码：

```
DefaultHttpClient client = new DefaultHttpClient(); 
client.setKeepAliveStrategy(new DefaultConnectionKeepAliveStrategy());
client.setReuseStrategy(new DefaultConnectionReuseStrategy());
HttpParams params = client.getParams();

ClientConnectionManager mgr = client.getConnectionManager();
client = new DefaultHttpClient(new ThreadSafeClientConnManager(params, mgr.getSchemeRegistry()), params);

HttpPost post = new HttpPost(URL);
post.setHeader("Connection","Keep-Alive");
ByteArrayEntity entity = new ByteArrayEntity(requestBundle.postString().getBytes());
entity.setContentType("application/xml");
post.setEntity(entity);
HttpResponse response = client.execute(post); 
```

当我检查 HTTP 请求标头时，我看到了这些：

```
Connection: Keep-Alive\r\n
Content-Length: 459\r\n
Content-Type: application/xml\r\n
Host: xxx.yyy.com\r\n
User-Agent: Apache-HttpClient/UNAVAILABLE (java 1.4)\r\n 
```

在 HTTP 响应标头中，我看到了这些：

```
HTTP/1.1 200 OK\r\n
Content-Type: application/xml\r\n
Content-Length: 8049\r\n
Date: Tue, 22 Jan 2013 03:14:40 GMT\r\n
Server: lighttpd/1.4.31\r\n 
```

查看通过线路的响应和其他 TCP 数据包，很明显 Android 客户端基于一些我不知道的 HTTP 客户端设置发起 FIN，这些设置不是由服务器上的 Keep-Alive 设置引起的（ HTTP 响应不包含标头“连接：关闭”）。

请赐教！

干杯，安德烈

# javascript - jQuery 等价于 mootools $$

> ID：14451143
> 
> 赞同：0
> 
> 时间：2013-01-22T03:33:18.683
> 
> 标签：javascript, jquery, mootools, dollar-sign

我正在将我的代码从 mootools 迁移到 jQuery。有一行代码使用 mootools '$$' 来获取具有给定选择器的元素数组

```
var myMenu =  $$('#outerDiv .menu'); 
```

我试过`jQuery('#outerDiv .menu')`了，但它没有返回一个数组。

有没有办法`'.find()'`在整个文档上使用 jQuery？（因为我没有父元素使它像 parent.find()。）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T03:35:02.450

[与Mootools'`$$`](http://mootools.net/docs/core/Element/Element#Window%3adollars)最接近的 jQuery将调用`.get()`jQuery 对象：

```
var myMenu = jQuery('#outerDiv .menu').get(); 
```

来自[`jQuery.fn.get`文档](http://api.jquery.com/get/)：

> 如果没有参数，`.get()`则返回所有元素 [...]
> 此调用返回所有匹配的 DOM 节点，包含在标准数组中。

但是，当使用 jQuery 时，您通常不会经常这样做，因为返回的元素数组不支持任何 jQuery 方法。请记住，jQuery 处理 DOM 集合的迭代以及开箱即用的链接方法。

# sharepoint - MS 与 Sharepoint 2010 是否正式支持 IE9 标准模式？

> ID：14451146
> 
> 赞同：1
> 
> 时间：2013-01-22T03:33:34.590
> 
> 标签：sharepoint, sharepoint-2010, internet-explorer-9

这里的链接说 IE9 是“支持的” [http://technet.microsoft.com/en-us/library/cc263526(v=office.14).aspx](http://technet.microsoft.com/en-us/library/cc263526(v=office.14).aspx)

现在，这意味着标准模式还是 IE8 模式？

背景：我们希望部署 IE9 以获得画布支持，同时不破坏 Sharepoint 中的任何内容。快速的谷歌搜索带来了许多问题，例如在编辑模式下拖放 webparts 和人员选择器。有修复，但它们似乎不受 MS 支持。我想知道是否有人直接联系他们的支持以获得他们的官方立场。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-04T15:21:59.657

根据经验，我可以说不。在尝试使用特别是日历控件时，我们遇到了重大问题。它们在 IE9 标准模式下无法正确呈现，但在 IE8 标准模式下完美呈现。

微软与微软不兼容！（可以预见的）多么奇怪。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-06T10:49:39.427

我为我的母版页（Sharepoint 2010）使用了 DOCTYPE (HTML5)，我发现标准模式下的 IE8、IE9 和 IE10 可能会出现一些不良行为，其中一些功能不再像甘特视图那样工作，或者在编辑表单时有一个“多行文本”字段和其他内容。

我花了几天时间做逆向工程，从微软写的 JavaScript 中找出问题。

我在我的博客上分享了结果：[http](http://blog.kodono.info/wordpress/2013/03/20/sharepoint-2010-and-ie-in-standard-mode-issues-with-ie9ie10/) ://blog.kodono.info/wordpress/2013/03/20/sharepoint-2010-and-ie-in-standard-mode-issues-with-ie9ie10/和[http:// /blog.kodono.info/wordpress/2012/11/08/webpart-doesnt-work-with-ie8-in-standard-mode-under-sharepoint-2010/](http://blog.kodono.info/wordpress/2012/11/08/webpart-doesnt-work-with-ie8-in-standard-mode-under-sharepoint-2010/)

我们使用 Sharepoint 2010 仅 1 个月，所以我很确定我会发现一些其他功能在未来无法使用......

# php - php的fgetcsv函数读取csv文件时如何延长时间？

> ID：14451147
> 
> 赞同：0
> 
> 时间：2013-01-22T03:33:38.007
> 
> 标签：php

我在这里遇到问题，我使用 fgetcsv 函数读取了一个 csv 文件，然后循环它，并将其写入一个 xml 文件......当我在不太大的数据中使用脚本时，一切正常并写入 xml 文件.. ..但是当我在一个巨大的 csv 中使用它时，xml 无法完成写入并最终成为一个未封闭的令牌

```
 if (($handle = fopen("C:\\xampp\htdocs\yii\branch\seo_tagsdev.csv", "r")) !== FALSE) {
            while (($data = fgetcsv($handle, 10000000, ",")) !== FALSE) {
                $num = count($data);

                // echo "<p> $num fields in line $row: <br /></p>\n";

                $row++;
                for ($c=0; $c < $num; $c++) 
                {
                    $url = $doc->createElement('url');
                    $root->appendChild($url);

                    $loc = $doc->createElement('loc',htmlentities($data[$c]));
                    $url->appendChild($loc);

                    $lastmod = $doc->createElement('lastmod',date('Y-m-d'));
                    $url->appendChild($lastmod);

                    $freq = $doc->createElement('changefreq','daily');
                    $url->appendChild($freq);

                    $priority = $doc->createElement('priority',0.9);
                    $url->appendChild($priority);
//                  echo $data[$c] . "<br />\n";

                }
                 $doc->save("C:\\xampp\htdocs\yii\branch\seo_tagsdev.xml");
            } 
```

我什至调整了 fgetcsv 的长度参数，但它根本不起作用

# scala - 一般处理枚举的 Scala 类

> ID：14451152
> 
> 赞同：2
> 
> 时间：2013-01-22T03:33:52.693
> 
> 标签：scala, generics, types, parameters, enums

我想创建一个通用类来保存枚举的值，并且还允许访问枚举的可能值。以属性编辑器为例——您需要知道该属性的当前值，并且您还需要能够知道该属性还有哪些其他值是合法的。并且不应该事先知道枚举的类型，您应该能够使用任何类型的枚举。

我的第一个想法是这样的：

```
class EnumerationProperty[T <: Enumeration](value:T) 
```

但是，这不起作用，因为对于枚举 T 不是类型，它是一个对象。我尝试过的其他变体是：

```
class EnumerationProperty[T <: Enumeration](value:T.Value)
class EnumerationProperty[T <: Enumeration.Value](value:T) 
```

（我不会详细说明为什么这些不起作用，因为我怀疑原因并不有趣。）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-22T05:37:44.067

对于你问题的第一部分。您可以像这样为通用枚举值定义持有者：

```
case class EnumerationProperty[T <: Enumeration#Value](value:T) 
```

但我不知道如何在不显式传递 Enumeration 对象的情况下获取所有枚举值。枚举具有`values()`获取所有值的方法。并且 Enumeration#Value 具有指向 Enumeration 的链接，但具有私有访问权限

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-22T09:26:56.063

在您的用例（属性编辑器）中，我认为最好的解决方案是依赖 scala 2.10 中可用的 scala 反射。给定一个类的`TypeTag`，您可以获得其所有成员的完整类型（无需擦除）以及它们的值，并从中填充您的属性编辑器。对于枚举，使用`TypeTag`以下方法获取它们的值： [使用 Scala 2.10 反射如何列出枚举的值？](https://stackoverflow.com/questions/12129172/using-scala-2-10-reflection-how-can-i-list-the-values-of-enumeration)

* * *

现在，也许你不想或不能使用 scala 反射，从现在开始我会假设是这种情况。如果这是真的，那么您将打开一整罐蠕虫 :) **TL;DR：**这是不可能使用标准的`Enumeration`，因此您可能必须明确包装枚举值，如 Ptharien 的 Flame 的答案所示（或滚动您自己的的叉子`Enumeration`）。下面我详细介绍我的所有尝试，请多多包涵。

不幸的是，出于某种未知的原因（尽管我怀疑它与序列化问题有关），`Enumeration.Value`没有指向其`Enumeration`实例的字段。鉴于如何`Enumeration`实现，这将是微不足道的实现，但我们当然没有发言权，除了分叉枚举和修改我们的版本（这实际上是我为此目的所做的，加上对序列化和反射的适当支持 - 但是我离题了）。

如果我们不能修改`Enumeration`，也许我们可以扩展它？再次查看实现，这样的事情似乎可行：

```
class EnumerationEx extends Enumeration {
  protected class ValEx(i: Int, name: String) extends Val(i, name) {
    @transient val enum: Enumeration = EnumerationEx.this
  }
  override protected def Value(i: Int, name: String): Value = new ValEx(i, name)  
}

object Colors extends EnumerationEx {
  val Red, Green, Blue = Value
} 
```

缺点是它仅适用于显式扩展`EnumerationEx`而不是 的枚举`Enumeration`，但总比没有好。

不幸的是，这不能编译，因为`def Value ...`它被声明为 final，`Enumeration`所以没有办法覆盖它。（再次注意，分叉`Enumeration`可以规避这一点。实际上，为什么不这样做，因为我们已经走上了使用自定义枚举的道路。我会让你判断）。

所以这是另一种看法：

```
class EnumerationEx extends Enumeration {
  class ValueWithEnum( inner: Value ) {
    @transient val enum: Enumeration = EnumerationEx.this
  }
  implicit def valueToValue( value: Value ): ValueWithEnum = new ValueWithEnum( value )
} 
```

确实**它**按预期工作。或者看起来是这样。

```
scala> object Colors extends EnumerationEx {
     |   val Red, Green, Blue = Value
     | }
defined module Colors

scala> val red = Colors.Red
red: Colors.Value = Red

scala> red.enum.values
res58: Enumeration#ValueSet = Colors.ValueSet(Red, Green, Blue) 
```

万岁？不，因为从`Value`to的转换`ValueWithEnum`仅在访问时完成`red.enum`，而不是在`Colors`枚举实例化时完成。换句话说，在调用`enum`编译器时需要知道枚举的确切静态类型（编译器必须静态知道 red 的类型是`Colors.Value`，而不仅仅是`Enumeration# Value`）。而在你提到的用例（属性编辑器）中，你只能依靠java反射（我已经假设你不会使用scala反射）来获取枚举值的类型，而java反射只会给你`Enumeration#Val`（ extends `Enumeration#Value`) 作为 的类型`Colors.Red`。所以基本上你被困在这里。你最好的选择肯定是首先使用 scala 反射。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-22T06:10:47.703

```
class EnumProps[E <: Enumeration](val e: E)(init: e.Value) {...} 
```

然后你可以使用`e`and`e.Value`来实现这个类。

# java - 摆脱弹簧休息中的默认值

> ID：14451157
> 
> 赞同：0
> 
> 时间：2013-01-22T03:34:30.220
> 
> 标签：java, json, spring, rest

我正在使用带有以下代码库的 Spring 休息：

当我通过在请求正文中传递字符串值来调用 /info 时，如果我的后端数据库中不存在此值，我期待以下响应。

```
{"output":-10} 
```

但相反，它返回以下响应：

```
{"id": 0, "output":-10} 
```

谁能告诉我如何摆脱这个 id 默认值？如果 JSON 映射器中有一个布尔变量，那么它也将返回为

```
{"id": 0, "booleanVar": false, "output":-10} 
```

谁能告诉我如何摆脱这个默认值？

控制器.java

```
@RequestMapping(value = "heartbeat", method = RequestMethod.GET, consumes="application/json")
public ResponseEntity<String> getHeartBeat() throws Exception {
    String curr_time = myService.getCurrentTime();      
    return MyServiceUtil.getResponse(curr_time, HttpStatus.OK);
}

@RequestMapping(value = "info", method = RequestMethod.POST, consumes="application/json")
public ResponseEntity<String> getData(@RequestBody String body) throws Exception {
    ....
    myInfo = myService.getMyInfo(myServiceJson);
    return MyServiceUtil.getResponse(myInfo, responseHeader, HttpStatus.OK);
} 
```

我的服务.java

```
@Override
public String getCurrentTime() throws Exception {
    String currentDateTime = null;
    MyServiceJson json = new MyServiceJson();
    ObjectMapper mapper = new ObjectMapper().configure(SerializationConfig.Feature.DEFAULT_VIEW_INCLUSION, false);

    try {           
        Date currDate = new Date(System.currentTimeMillis());
        currentDateTime = new SimpleDateFormat("yyyy-MM-dd'T'HH:mm:ss").format(currDate);           
        json.setCurrentDateTime(currentDateTime);

        ObjectWriter writer = mapper.writerWithView(Views.HeartBeatAPI.class);
        return writer.writeValueAsString(json);

    } catch (Exception e) {
        throw new Exception("Excpetion in getCurrentTime: ", HttpStatus.BAD_REQUEST);           
    }
}

@Override
public String getMyInfo(MyServiceJson myServiceJson) throws Exception {             
    MyServiceJson json = new MyServiceJson();
    json.setFirstName("hhh");
    json.setLastName("abc");

    ObjectMapper mapper = new ObjectMapper();
    return mapper.writeValueAsString(json);
} 
```

视图.java

```
public class Views {
    public static class HeartBeatAPI {  }
} 
```

MyServiceJson.java

```
@JsonSerialize(include = Inclusion.NON_NULL)
public class MyServiceJson {
    private int id;
    private String firstName;   
    private String lastName;

    @JsonView(Views.HeartBeatAPI.class) 
    private String currentDateTime;

    // Getter/Setter for the above variables here
    .....

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T04:04:54.613

使用 Integer 类而不是 int 原始类型。原始类型始终保存默认值，其中类类型默认为 null。

# html - 做一个 标签自动导致表格单元格内的中心对齐？

> ID：14451162
> 
> 赞同：1
> 
> 时间：2013-01-22T03:34:55.240
> 
> 标签：html, css

这有点奇怪，但在我的表格单元格中，我有一个项目符号点，由于某种奇怪的原因，它会导致文本在单元格的中心对齐，即使我没有包含文本对齐中心或任何类似的东西。老实说，顺便说一下，所有其他表格列不包括项目符号点，但对于包含项目符号点的列，它会导致文本对齐中心，我不知道这是为什么.

我的问题是`<ul>`标签是否会导致文本默认在表格单元格中对齐中心，或者是否有一些与标签相矛盾的东西，`<ul>`因此它将文本与中心对齐？

下表（缩减代码）：

```
 <table id="tableqanda" cellpadding="0" cellspacing="0">
    <thead>
    <tr>
        <th width="11%" class="image">Image</th>
    </tr>
    </thead>
    </table>
    <div id="tableqanda_onthefly_container">
    <table id="tableqanda_onthefly" cellpadding="0" cellspacing="0">
    <tbody>
        <?php
          foreach ($arrQuestionId as $key=>$question) {
        echo '<tr class="tableqandarow">'.PHP_EOL;
        echo '<td width="11%" class="imagetd">'. ( ( empty ($arrImageFile[$key]) ) ? "&nbsp;" : '<ul class="qandaul"><li>'.htmlspecialchars( is_array( $arrImageFile[$key] ) ? implode(",", $arrImageFile[$key]) : $arrImageFile[$key] ) ). '</li></ul></td>' . PHP_EOL;

        echo '</tr>'.PHP_EOL;
        }
?>
    </tbody>
    </table> 
```

以下是包含表格的 css 的 css：

```
.imagetd{
    font-size:75%;  
}

.qandaul{
    list-style-type:square;
}

#tableqanda_onthefly_container
{
    width:100%;
    overflow-y: auto;
    overflow-x: hidden;
    max-height:500px;
}

#tableqanda_onthefly
{
    width:100%;
    overflow:auto;
    clear:both;
}

#tableqanda_onthefly td
{
    border:1px black solid;
    border-collapse:collapse;
}

#tableqanda, #tableqanda_onthefly{
    border:1px black solid;
    border-collapse:collapse;
    table-layout:fixed;
    word-wrap:break-word;
}       

#tableqanda{
    width:100%;
    margin-left:0;
    float:left;
}

#tableqanda td { 
    vertical-align: middle;
    border:1px black solid;
    border-collapse:collapse;
}

#tableqanda th{
    border:1px black solid;
    border-collapse:collapse;
    text-align:center;
}

.tableqandarow{
    border:1px black solid;
    border-collapse:collapse;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T03:44:36.177

> 标签是否`<ul>`会导致文本在表格单元格中默认居中对齐？

不，UL 标签添加了左边距，这可能会导致列表项显示在中心。

> 是否有一些与标签相矛盾的东西，`<ul>`因此它将文本与中心对齐？

可能是这种情况。`<ul>`使用 html/css 检查器检查应用到的样式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T03:48:07.000

```
The <ul> tag adds left margin, in the table cell. 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-22T03:56:46.950

ul 标签会自动添加 40px 的左内边距。将填充设置为 0 应该可以解决您的问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-22T09:00:15.323

由于浏览器中的常见默认值，`ul`元素通常显示为缩进。这可能取决于不同浏览器中的不同 CSS 属性，因此您可能需要多个 CSS 声明来删除缩进。例如，由于默认的左填充或默认的左边距，可能会发生缩进。以下是一种相当安全的方法（假设您也希望删除元素周围的默认垂直间距）：

```
ul, ul li { margin: 0; padding: 0; }
ul { margin-left: 1.3em; } 
```

第二条规则是为列表项目符号保留空间。项目符号出现在`li`项目内容的左侧，因此需要一些空间。的值`1.3em`倾向于给出平衡的外观，子弹的左右间距大致相等。

# javascript - 如何从日历中获取日期、月份、年份值 javascript - HTML5

> ID：14451167
> 
> 赞同：0
> 
> 时间：2013-01-22T03:35:22.933
> 
> 标签：javascript, html

我有一个日历，当我选择一个日期时，我想从 javascript 中检查一些我选择告诉我的值是否正确。

这是我的代码：

```
<!DOCTYPE html>
<html lang="en">
<meta charset="UTF-8">
<head>
<title>SOMETHING</title>
    <script>
function check(){ 
                 if (document.getElementById("cinema").value == "1"){
                        var d = new date();
                        var x = document.getElementById("date");
                        x.innerHTML=d.getMonth();
                        if (x == "1"){
                        document.write("ok");
                        }
                        }
                        else {
                        alert('null');
                        }
                        }

</script>
</head>
<body>
<header>
        <h1>SOMETHING</h1>
    </header>
<br />
<div>
    <form>
    <fieldset>
                <label for="date">CHECK DATE</label>
                <input type="date" id="date" name="date" required="required"/>
        <br />
                <label for="time">CHECK TIME</label>
                <input type="time" id="time" name="time" required="required" />
    </fieldset>
</form>
</div>
<br />
<button onclick='check()'>Check</button>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T15:12:14.323

您需要先为日期对象分配一个值，然后从中派生日、月、年。

```
var d = new date(document.getElementById("date"));
alert(d.getMonth()) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T15:36:28.323

以下是应该让您走上正轨的事情：

```
 function check()
    {
        var Temp= document.getElementById("date");

        var myDate = new Date(Temp.value);

        document.write(myDate);
        document.write("<br />");
        document.write(myDate.getMonth()); 
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-22T16:39:24.913

而已 ！

```
function check() {
  var a = document.getElementById("thedate").value;
  var check = "2013-01-20";
  if (a == check) {
    alert("YES");
  } else {
    alert("STOP");
  }
}
```

```
<meta charset="UTF-8">

<body>
  <input type="date" id="thedate">
  <button onclick="check()">Try it</button>
</body>
```

# solr - Solr 仅在显式使用 fq 约束时提升文档

> ID：14451170
> 
> 赞同：0
> 
> 时间：2013-01-22T03:35:45.957
> 
> 标签：solr, elevation

solr elevate 组件仅适用于关键字查询。在我的项目中，我想使用提升组件来提升满足查询中自定义参数的文档。例如，q=foo&fq:type=car。在这种情况下，有没有人知道当查询是 foo 时如何提升带有 fq 类型 car 的文档？需要注意的是，当查询只是 q=foo 时，我不想提升文档。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T04:23:03.227

检查例如[Boost Score](http://wiki.apache.org/solr/SolrRelevancyFAQ#How_can_I_boost_the_score_of_newer_documents)或如果您使用 Dismax 解析器检查参数[Boost Query](http://wiki.apache.org/solr/DisMaxQParserPlugin#bq_.28Boost_Query.29)

根据你的情况你可以试试`bq=type:car^2.0`

# java - 如何直接从 bash 启动 java 主管

> ID：14451174
> 
> 赞同：0
> 
> 时间：2013-01-22T03:35:59.983
> 
> 标签：java, bash

如果我想`java --jar sample.jar`从命令行启动一个 java 可执行文件，我该如何编写 bash 脚本？以下不起作用

```
#!/usr/bin/java 
--jar $HOME/tools/sample.jar 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-22T03:36:33.320

```
#!/bin/sh
java --jar $HOME/tools/sample.jar 
```

Java 不是解释器，只能在 shebang( `#!`)中使用脚本解释器

* * *

为了完整起见，无论如何您都不能以这种方式将参数传递给解释器。

“正确”但仍然错误的方式本来是

```
#!/usr/bin/java --jar 
$HOME/tools/sample.jar 
```

* * *

我不完全清楚，但[维基百科](http://en.wikipedia.org/wiki/Shebang_%28Unix%29)暗示第二种方法可能只是工作..

> 但是，由解释器决定是否忽略 shebang 行；因此，由以下两行组成的脚本在运行时简单地将这两行回显到标准输出：

```
#!/bin/cat
Hello world! 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-16T02:42:46.977

```
#!/bin/bash

exec java -jar /path/to/jar/the-file.jar "$@" 
```

使用**$@**将**bash 参数**传递给 jar 文件

# actionscript-3 - 使用 ExpressJS 的游戏 + Web 服务器

> ID：14451176
> 
> 赞同：0
> 
> 时间：2013-01-22T03:36:13.170
> 
> 标签：actionscript-3, node.js, sockets, express

我目前正在尝试开发一个与 node.js 服务器对话的简单 Flash 游戏。

我的问题是：我该如何制作一个服务器来区分网络请求和游戏请求？

以下是我所做的详细信息：

以前，我使用`net`和`static`模块分别处理来自游戏客户端和浏览器的请求。

TwoServers.js

```
// Web server
var file = new staticModule.Server('./public');
http.createServer(function(req, res){
    req.addListener('end', function(){
        file.serve(req, res, function(err, result){
                     // do something
        });
    });
}).listen(port1, "127.0.0.1");

// Game Server
var server = net.createServer(function(socket)
{
    // handle messages to/from Flash client
    socket.setEncoding('utf8');
    socket.write('foo');
    socket.on('data', onMessageReceived);
});
server.listen(port2, "127.0.0.1"); 
```

我想只用一个在单个端口上侦听的[Express](http://expressjs.com/)服务器来执行上述操作，但我不确定如何去做。

这是我认为它可能看起来的样子（实际上不起作用）：

OneServer.js

```
var app = express();
app.configure(function()
{
    // ...
    app.use('/',express.static(path.join(__dirname, 'public')));  // The static server
});

app.get('/', function(req, res)    // This is incorrect (expects http requests)
{
    // Handle messages to/from Flash client
    var socket = req.connection;
    socket.setEncoding('utf8');
    socket.write('foo');
    socket.on('data', onMessageReceived);
});
app.listen(app.get('port'));   // Listen in on a single port 
```

但我希望能够区分网页请求和游戏请求。

*注意*：Actionscript 的[XMLSocket](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/net/XMLSocket.html)发出 TCP 请求，因此使用 app.get('/') 是不正确的，原因有两个：

1.  当 Flash 写入套接字时，它不使用 http 协议，因此当游戏尝试连接时不会触发 app.get('/')。

2.  由于我无权更正[net.Socket](http://nodejs.org/api/net.html#net_class_net_socket)对象，因此我不能期望从/向正确的套接字读取或写入。相反，我将读取/写入与网页请求关联的套接字。

对此的任何帮助将不胜感激（特别是如果我以错误的方式推理）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T05:21:14.723

当 TCP 连接打开到给定端口时，服务器（Node + Express）无法告诉谁建立了该连接（无论是浏览器还是您的自定义客户端）。

因此，如果您的自定义客户端希望与位于端口 80 上的 Express 服务器通信，则它**必须**使用 HTTP。否则，您通过新打开的套接字（在您的自定义协议中）发送的数据对 Express 来说就像垃圾一样，而且它会关闭连接。

但是，这并不意味着您不能让 TCP 流使用自定义协议——您只需先使用 HTTP*并*要求切换协议。HTTP 提供了一种机制来实现这一点（`Upgrade`标头），实际上这就是 WebSockets 的实现方式。

当您的 Flash 客户端第一次打开到您的服务器的 TCP 连接时，它应该发送：（注意换行符必须作为`CRLF`字符发送，也就是`\r\n`）

```
GET /gamesocket HTTP/1.1
Upgrade: x-my-custom-protocol/1.0
Host: example.com
Cache-Control: no-cache
​ 
```

的值`Upgrade`是您的选择，`Host`必须为所有 HTTP 请求发送，并且`Cache-Control`标头确保没有中间代理服务此请求。注意空行，表示请求已完成。

服务器响应：

```
HTTP/1.1 101 Switching Protocols
Upgrade: x-my-custom-protocol/1.0
Connection: Upgrade
​ 
```

同样，空行表示标头已完成，并且在 final 之后`CRLF`，您现在可以自由地通过 TCP 连接以任何格式发送任何您喜欢的数据。

要实现这个的服务器端：

```
app.get('/gamesocket', function(req, res) {
    if (req.get('Upgrade') == 'x-my-custom-protocol/1.0') {
         res.writeHead(101, { Upgrade: req.get('Upgrade'), Connection: 'Upgrade' });

         // `req.connection` is the raw net.Socket object
         req.connection.removeAllListeners(); // make sure Express doesn't listen to the data anymore... we've got it from here!

         // now you can do whatever with the socket
         req.connection.setEncoding('utf8');             
         req.connection.write('foo');
         req.connection.on('data', onMessageReceived);
    } else res.send(400); // bad request
}); 
```

当然，请记住 TCP**不是**基于消息的协议，它只提供一个*流*，因此`data`a 的事件`Socket`可以将单个逻辑消息分割成多个事件，甚至可以在单个事件中包含多个逻辑消息。准备手动缓冲数据。

您在这里的另一个选择是使用[socket.io](http://socket.io)，它在 WebSockets 协议之上实现了一个 WebSockets 服务器以及它自己的协议。WebSockets 协议**是**基于消息的。它主要像我在这里概述的那样工作，然后在 HTTP 协商之后在 TCP 连接之上添加一个消息框架层，这样应用程序就不必担心数据流。（如果需要，使用 WebSockets 还可以从 HTML 页面连接到您的服务器。）

有一个[Flash socket.io 客户端](https://github.com/simb/FlashSocket.IO)可用。

# r - 如何从装有来自 R 中 nlme 包的 gls 的模型计算伪 R 平方

> ID：14451182
> 
> 赞同：3
> 
> 时间：2013-01-22T03:36:42.450
> 
> 标签：r

我使用来自 nlme 的 gls 来适应这个模型：

```
require(nlme)

set.seed(101)
mp <-data.frame(year=1990:2010)
N <- nrow(mp)

mp <- within(mp,
     {
         wav <- rnorm(N)*cos(2*pi*year)+rnorm(N)*sin(2*pi*year)+5
         wow <- rnorm(N)*wav+rnorm(N)*wav^3
     })

m01 <- gls(wow~poly(wav,3), data=mp, correlation = corARMA(p=1)) 
```

我想计算任何拟合优度的度量，例如伪 R 平方：可以推荐哪一个？以及如何计算？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-22T04:09:07.800

您需要有某种基线进行比较：

```
> summary(m01)
Generalized least squares fit by REML
  Model: wow ~ poly(wav, 3) 
  Data: mp 
       AIC      BIC    logLik
  226.5434 231.5427 -107.2717

 m01 <- gls(wow~1, data=mp, correlation = corARMA(p=1))
> summary(m01)
Generalized least squares fit by REML
  Model: wow ~ 1 
  Data: mp 
       AIC     BIC    logLik
  256.5048 259.492 -125.2524 
```

非线性拟合的问题在于平均值不再是“基线”，而这正是 R 平方测量所假设的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-22T20:57:57.420

这里有一些伪 R 平方

```
R2 <- cor(mp$wow,predict(m01))^2

R2

R2.1 <- 1 - with(mp, (sum((wow-predict(m01))^2)/sum((wow-mean(wow))^2)))

R2.1 
```

麦克法登伪 R2

```
m00 <- gls(wow~1, data=mp, correlation = corARMA(p=1))

R2.n <- 1-(as.numeric(logLik(m01)/logLik(m00)))

R2.n 
```

但我不知道哪个更适合评估这种模型的拟合优度。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2019-11-12T13:36:40.727

`rcompanion::nagelkerke ()`计算三个不同的伪 R² 值。该函数接受通过 拟合的模型`nlme::gls`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-22T03:45:42.913

`summary(m01)`假设我正确理解你的问题，应该给你你正在寻找的东西？`??fit`将为您提供进一步的建议。

# sql - Firebird SQL挑战 - 返回一排，该行选择返回两个行时具有数据

> ID：14451183
> 
> 赞同：2
> 
> 时间：2013-01-22T03:36:43.913
> 
> 标签：sql, firebird

我有一个非常独特的需要让 select 总是返回一行

我的 SQL：

```
select * from table1 Where (table1.pk = :p1) or (table1.fk1 = :p1) 
```

上面的 SQL 总是有两种返回的情况：

1-我的选择返回两条记录：唯一不同的是一条记录有数据，而另一条记录只有填充数据的ID，而其余字段为空。**在这种情况下，我只**需要返回在其他字段中有数据的那个。

2-我的选择返回一条记录在这种情况下，返回的记录只有ID字段填充了数据，而其余字段为空，但这是我想要的，不需要任何进一步的处理。

请告知是否可以在一个普通的 Select SQL 中做到这一点。我不能使用存储过程。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-22T04:08:27.633

您可以使用语句的`first`子句`select`仅获取 1 行。

*鉴于您的特定条件，您可以按其余字段*降序排列结果集，以确保仅在没有数据行的情况下选择空行（null 在 firebird 2.5 中首先出现，但 AFAIK 这在最后一个版本中发生了变化，因此在应用此之前请检查您的特定版本）。

您的最终查询将如下所示：

```
select first 1 * 
  from table1 
 where (table1.pk = :p1) 
    or (table1.fk1 = :p1)
 order by somecolumn; 
```

`somecolumn`是可以包含空值的*其他字段*中最相关的。

您可以使用以下语句对此进行测试：

```
--two rows, one with ID and values and the other with ID and null
with q1 as (
      select 1 id, 'data' othercolumn
        from rdb$database
      union
      select 2 id, null othercolumn
        from rdb$database
     ) 
select first 1 *
  from q1
 order by othercolumn nulls last;

--versus:

--onw row with ID and null
with q1 as (
      select 2 id, null othercolumn
        from rdb$database
     ) 
select first 1 *
  from q1
 order by othercolumn nulls last; 
```

# python - pandas 中更好的分箱

> ID：14451185
> 
> 赞同：19
> 
> 时间：2013-01-22T03:37:04.203
> 
> 标签：python, pandas, binning

我有一个数据框，想按一系列值过滤或分箱，然后获取每个箱中值的计数。

目前，我正在这样做：

```
x = 5
y = 17
z = 33
filter_values = [x, y, z]
filtered_a = df[df.filtercol <= x]
a_count = filtered_a.filtercol.count()

filtered_b = df[df.filtercol > x]
filtered_b = filtered_b[filtered_b <= y]
b_count = filtered_b.filtercol.count()

filtered_c = df[df.filtercol > y]
c_count = filtered_c.filtercol.count() 
```

但是有没有更简洁的方法来完成同样的事情？

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2013-01-22T03:46:12.397

也许您正在寻找[pandas.cut](http://pandas-docs.github.io/pandas-docs-travis/generated/pandas.cut.html)：

```
import pandas as pd
import numpy as np

df = pd.DataFrame(np.arange(50), columns=['filtercol'])
filter_values = [0, 5, 17, 33]   
out = pd.cut(df.filtercol, bins=filter_values)
counts = pd.value_counts(out)
# counts is a Series
print(counts) 
```

产量

```
(17, 33]    16
(5, 17]     12
(0, 5]       5 
```

* * *

要重新排序结果以使 bin 范围按顺序显示，您可以使用

```
counts.sort_index() 
```

产生

```
(0, 5]       5
(5, 17]     12
(17, 33]    16 
```

感谢[nivniv](https://stackoverflow.com/questions/14451185/better-binning-in-pandas/14451264#comment51709235_14451264)和[InLaw](https://stackoverflow.com/users/7084278/inlaw)的改进。

* * *

另请参见[离散化和量化](http://pandas.pydata.org/pandas-docs/stable/basics.html#discretization-and-quantiling)。

# javascript - 确定表中输入的行和列索引

> ID：14451187
> 
> 赞同：1
> 
> 时间：2013-01-22T03:37:18.327
> 
> 标签：javascript, jquery

我正在创建一个基于 javascript 的电子表格应用程序。现在我可以动态地将电子表格创建为一个表格，其中包含提供的行数和列数以及每个单元格中的文本输入，如图[所示](http://imgur.com/4uQUPps)。

我希望有一个通用事件与表中的所有输入相关联，我可以在其中确定触发事件的输入的行索引和列索引。像这样的东西：

```
$('.spreadsheet-cell').click(function () {
     var rowIndex = $(this).attr('rowIndex');
     var columnIndex = $(this).attr('columnIndex');
}); 
```

我最初尝试通过在创建 html 输入元素时动态添加行和列索引属性来实现它，但是当我在创建原始电子表格后添加行或列时，试图改变这些属性的值会变得混乱。我想如果归根结底我可以使该方法起作用，但它看起来很乱，当我认为可能有某种方法使用 jQuery 来确定父母`<td>`和`<tr>`.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-22T03:40:02.390

使用 jQuery [`.index`](http://api.jquery.com/index/)。在您的功能内：

```
var rowIndex = $("#table tr").index($(this).closest('tr'));
var colIndex = $("#table td").index(this); 
```

# opencv - 如何在 OpenCV 中获得最相似的 Eigenfaces 或 Fisherfaces？

> ID：14451188
> 
> 赞同：2
> 
> 时间：2013-01-22T03:37:27.503
> 
> 标签：opencv, similarity, face-recognition

我正在尝试找到两张面孔相似度的度量。我使用 OpenCV。为此，我用 1000 个不同人的 1000 张照片训练 Eigenfaces / Fisherfaces（所以每个人 1 张照片）。所以我在训练集中也有 1000 个标签。

现在我可以使用预测方法来获得最相似的人脸。

我想输入 2 个未知的人脸图像，以查找它们是否都与训练集中的相同人脸向量相似。

这是返回最相似标签（距离最短）的 openCV 代码。

```
for(size_t sampleIdx = 0; sampleIdx < _projections.size(); sampleIdx++) {
    double dist = norm(_projections[sampleIdx], q, NORM_L2);
    if((dist < minDist) && (dist < _threshold)) {
        minDist = dist;
        minClass = _labels.at<int>((int)sampleIdx);
    } 
```

问题：

1.  谁能告诉我如何重写它以输出前 10 个面孔而不仅仅是前 1 个？我正在考虑将它们推入优先队列，但也许有更简单的方法？！

2.  在训练中：我应该把所有的脸都放在同一个标​​签上还是放在不同的标签上？那么我应该有 1 个标签还是 1000 个？

干杯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T07:32:18.380

这就是我所做的。注意我非常擅长 perl，非常擅长 C++（事实上，这是我的第一个 c++ 项目！）所以我向命令行输出了很多内容并用 perl 解析它。

我像你一样去了 facerec.cpp，我将 for 循环的内容更改为：

```
for(size_t sampleIdx = 0; sampleIdx < _projections.size(); sampleIdx++) {
    double dist = norm(_projections[sampleIdx], q, NORM_L2);
    int labelClass = _labels.at<int>((int)sampleIdx);
    cout << dist << " " << labelClass << endl;
    if((dist < minDist) && (dist < _threshold)) {
        minDist = dist;
        minClass = _labels.at<int>((int)sampleIdx);
    }
} 
```

现在输出每个人脸的距离和标签。由于 predict 函数似乎所做的只是拍摄距离最短（数字最小）的图片并将其作为答案返回，因此您现在可以获取结果列表，对其进行排序，然后获取前 10 个结果。或者你可以取前十个标签或其他什么。这只是让您可以访问所有数据，而不是第一个 X 结果。

我还添加了

```
#include <iostream>

using namespace std; 
```

到文件的顶部，这样我就可以使用 cout.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T12:21:07.570

Q1:: 由于 OpenCV 不提供默认功能，您必须通过创建具有距离和标签的向量来创建自己的功能。您可以如下编写自己的函数，并将距离和标签存储在向量中。这里需要重建opencv。

```
virtual void predict(InputArray src, int &label, double &confidence,  Vector <variable>) const = 0; 
```

# apache - Apache 重写所有以

> ID：14451189
> 
> 赞同：1
> 
> 时间：2013-01-22T03:37:43.717
> 
> 标签：apache, redirect, rewrite

有几个问题回答了如何重写`urls`以某个单词或组合开头的问题

`EXCLUDE`我的问题是如何以`urls`一个词开头。

就我而言 `www.domain.com/knowledgebase.php`

不应重定向所有以此开头的网址。这是因为例如下面有不同的会话 ID

```
?osCsid=mrm6flfmrcl9gjohiv4947lgs5?article=7 
```

**我把它放在所有其他重定向之前：**

```
RewriteRule ^knowledgebase/^[^/]+/([0-9]+)$ - [L] 
```

**或像这样：**

```
RewriteRule ^knowledgebase\.php$ - [L] 
```

**或者**

```
RewriteRule /knowledgebase\.php$ - [L] 
```

但我没有成功。

任何人都可以指出我正确的方向吗？

# java-native-interface - 加载jni时jre崩溃

> ID：14451194
> 
> 赞同：0
> 
> 时间：2013-01-22T03:38:30.720
> 
> 标签：java-native-interface

我已经编译了一个用于 jni 的测试 dll。除了#include<jni.h> 之外，它实际上是完全空的。它编译得很好。我评论了其他所有内容以尝试使其正常工作。我使用了 gcc cygwin 版本和 -shared 和 eclipse。

这是加载库的类：

```
static
{
    final File f= new File(new File("res"), "mandc.dll");
    System.out.println(f.exists());
    System.load(f.getAbsolutePath());
    System.out.println("Loaded!");
}

//  public static native long mand(final double cx, final double cy,
//          final double jx, final double jy, long iter);

public static native void mand(); 
```

true 是最后打印的东西，证明错误在 true 和加载之间！如果我从 Eclipse 中运行，则会打印两条错误消息，但互联网不知道它们是什么。

消息：

```
2 [main] javaw <random number here> exception::handle: Exception: STATUS_STACK_OVERFLOW
667 [main] javaw <random number here> open_stackdumpfile: Dumping stack trace to javaw.exe.stackdump 
```

堆栈转储没有提供信息。

```
Exception: STATUS_STACK_OVERFLOW at eip=61157C62
eax=0001C038 ebx=49E0834C ecx=49DE2ABC edx=49E27DB4 esi=49E07B2C edi=49E27B34
ebp=49E07ACC esp=49E07AB4 program=C:\Program Files\Java\jre7\bin\javaw.exe, pid 2688, thread main
cs=001B ds=0023 es=0023 fs=003B gs=0000 ss=0023
Stack trace:
Frame     Function  Args
49E07ACC  61157C62  (49E2D000, 49E27B3A, 49E27DB4, 00000008)
49E07AFC  6106C0B5  (49E27B3A, 49E27D78, 00000008, 49E27B2C)
49E27B4C  6106C6D1  (49E27B70, 00000C90, 00000000, 49E27DB4)
49E27DEC  6100584E  (49E27EBC, 611FBAF0, 611FBAEC, 49E27E2C)
49E27E3C  61005D28  (49E27FC3, 611FBAF0, 611FBAEC, 00000001)
49E2801C  61006F07  (00000000, 49E28058, 61006990, 49E2B268)
End of stack trace 
```

当我从维基百科页面运行示例时，实验也失败了。它以同样的方式失败。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T19:32:00.697

问题已解决。我将工具链从 cygwin gcc 切换到 mingw gcc。为了支持这一点，我不得不从 cygwin 安装程序中安装额外的 mingw 包。

我猜cygwin与java不兼容。一个更好的错误信息将不胜感激。

# time-complexity - 算法的运行时间计算/复杂性

> ID：14451196
> 
> 赞同：1
> 
> 时间：2013-01-22T03:38:47.590
> 
> 标签：time-complexity, big-o

我必须逐行计算算法的时间复杂度或理论运行时间（给定伪代码）作为 T(n)。我已经尝试过了，但有几件事让我感到困惑。例如，“if”语句的时间复杂度是多少？以及如何处理嵌套循环？下面的代码以及我的尝试进行了评论。

长度[A] = n

```
 for i = 0 to length[A] - 1    // n - 1 
      k = i + 1                   // n - 2
      for j = 1 + 2 to length[A]  // (n - 1)(n - 3)
        if A[k] > A[j]            // 1(n - 1)(n - 3)
          k = j                   // 1(n - 1)(n - 3)
      if k != i + 1               // 1(n - 1)
        temp = A[i + 1]           // 1(n - 1)
        A[i + 1] = A[k]           // 1(n - 1)
        A[k] = temp               // 1(n - 1) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T12:12:17.460

Blender 是对的，结果是 O(n^2)：两个嵌套循环，每个循环的迭代次数取决于`n`.

更长的解释：

在这种情况下，if 并不重要：由于 O 表示法仅查看算法的最坏情况执行时间，因此您只需选择对整体执行时间更差的执行路径。由于在您的示例中，两个执行路径（`k != i+ 1`是 true 或 false）对运行时没有进一步的影响，因此您可以忽略它。如果有第三个嵌套循环，也运行到`n`，在 内`if`，你最终会得到 O(n^3)。

逐行概述：

```
for i = 0 to length[A] - 1    // n + 1 [1]
  k = i + 1                   // n
  for j = 1 + 2 to length[A]  // (n)(n - 3 + 1) [1]
    if A[k] > A[j]            // (n)(n - 3)
      k = j                   // (n)(n - 3)*x [2]
  if k != i + 1               // n
    temp = A[i + 1]           // n*y [2]
    A[i + 1] = A[k]           // n*y
    A[k] = temp               // n*y 
```

[1]`for`循环语句将被执行 n+1 次，其值为`i`：`0`(true, continue loop), `1`(true, continue loop), ..., `length[A] - 1`(true, continue loop), `length[A]`(false, break loop)

[2] 在不知道数据的情况下，您必须猜测`if`' 条件为真的频率。这个猜测可以通过引入一个变量 0 <= `x`<= 1 在数学上完成。这与我之前所说的一致：`x`独立于`n`并因此仅作为一个常数因素影响整体运行时复杂性：你需要看看执行路径。

# eclipse-plugin - 如何在 Eclipse RCP 中使用 draw2d 在编辑器上绘制一些图形？

> ID：14451197
> 
> 赞同：1
> 
> 时间：2013-01-22T03:38:55.343
> 
> 标签：eclipse-plugin, eclipse-rcp, eclipse-gef, draw2d

我的意思是绘制一些简单的形状，如圆形、矩形图和折线连接。似乎必须在 Shell 等画布上构建 LightweightSystem。在 RCP 应用程序中，当我添加编辑器的扩展时，编辑器会扩展 org。 eclipse.ui.part.EditorPart 默认情况下。它有一个名为**createPartControl**的方法。这个方法有一个参数（复合父级）。

所以我写了下面的代码，它给了我一个**未处理的事件循环异常**

```
public void createPartControl(Composite parent) {
    Shell shell = parent.getShell();
    shell.open();
    Display display = shell.getDisplay();
    LightweightSystem lws = new LightweightSystem(shell);
    IFigure panel = new Figure();
    lws.setContents(panel);
    RectangleFigure node1 = new RectangleFigure();
    RectangleFigure node2 = new RectangleFigure();
    node1.setBackgroundColor(ColorConstants.red);
    node1.setBounds(new Rectangle(30, 30, 64, 36));
    node2.setBackgroundColor(ColorConstants.blue);
    node2.setBounds(new Rectangle(100, 100, 64, 36));
    PolylineConnection conn = new PolylineConnection();
    conn.setSourceAnchor(new ChopboxAnchor(node1));
    conn.setTargetAnchor(new ChopboxAnchor(node2));
    conn.setTargetDecoration(new PolygonDecoration());
    Label label = new Label("Midpoint");
    label.setOpaque(true);
    label.setBackgroundColor(ColorConstants.buttonLightest);
    label.setBorder(new LineBorder());
    conn.add(label, new MidpointLocator(conn, 0));
    panel.add(node1);
    panel.add(node2);
    panel.add(conn);
    while (!shell.isDisposed ()) { 
        if (!display.readAndDispatch ()) 
           display.sleep (); 
    }
} 
```

那么如何解决这个问题以及如何在编辑器上绘制这些数字呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T05:11:22.133

当您想在编辑器中绘图时，您不需要像在独立的 SWT 应用程序中那样创建新的 Shell 或从事件队列分派事件；只需创建一个 Canvas 并在其中绘制。这应该可以帮助您：

```
public void createPartControl(Composite parent) {
    Canvas canvas = new Canvas(parent, SWT.NONE);
    LightweightSystem lws = new LightweightSystem(canvas);
    IFigure panel = new Figure();
    lws.setContents(panel);
    [...]
    panel.add(node1);
    panel.add(node2);
    panel.add(conn);
} 
```

# javascript - 如何更改 HTML 表单中某些元素的颜色

> ID：14451211
> 
> 赞同：0
> 
> 时间：2013-01-22T03:40:12.713
> 
> 标签：javascript, html, css

基于对单选按钮的选择，我需要启用或禁用整个复选框选项列表。When the selection calls for a disable I'm using this:

```
function radioSelectDNC() {
    for (i = 3; i < document.addPNtoDNC.elements.length - 1; i++) {
        document.addPNtoDNC[i].disabled=true;      // this is working
        document.addPNtoDNC[i].style.color="blue"; //this line is not working
    } 
```

禁用有效，但复选框选项文本的颜色无效。这是一个很长的表格，但以防万一，这是我列出复选框选项的方式：

```
 <label><input type="checkbox" name="Campaign" value="Value1">Value1<br></label>
            <label><input type="checkbox" name="Campaign" value="Value2">Value2<br></label>
            <label><input type="checkbox" name="Campaign" value="Value3">Value3<br></label> 
```

我使用了正确的属性吗？我在哪里可以找到房产列表？

哦，为了以防万一，请不要给我 jQuery。我才刚刚开始，每次我搜索并找到 jQuery 答案时，我都开始头晕目眩。这些日子中的一天。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T03:50:00.043

您似乎正在尝试修改 的颜色属性，而`<input>`不是`<label>`您想要的标签之一。您必须更改`document.addPNtoDNC[i]`零件以改为引用标签（不确切知道您在这里做什么）。`document.addPNtoDNC[i].parentNode`应该可以工作，因为输入标签在标签一内。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T04:13:30.110

我认为你让自己变得比必要的更难。您应该做的是为 a 创建一个 CSS 选择器`class`，然后在通过简单的 javascript 检查复选框时应用该类。同样，您也可以在未选中复选框时简单地删除该类。我知道您要求使用非 JQuery 解决方案，因此请看一下：

[使用 JavaScript 更改元素的类](https://stackoverflow.com/questions/195951/change-an-elements-css-class-with-javascript)

这就是您通过纯 Javascript 添加和删除类的方式。看起来还不错，但简单地做这件事肯定看起来很麻烦，对吧？

那是因为它是，这正是 JQuery 如此出色的原因。我不会给你一个 JQuery 答案，因为你拒绝了，但我仍然会推荐它。您可以随心所欲地远离 JQuery，但如果您花一个小时的时间来学习 JQuery 或 Prototype 或其他任何东西，您会发现您不必做太多工作。JQuery 有一个不错的[toggleClass()](http://api.jquery.com/toggleClass/)函数，它让你的生活更轻松。希望这可以帮助。如果您需要帮助，请不要害怕询问。这包括学习 JQuery。

# bash - 发送文件到远程主机，执行远程脚本，返回结果

> ID：14451212
> 
> 赞同：0
> 
> 时间：2013-01-22T03:40:13.140
> 
> 标签：bash, remote-access

我想知道是否有任何方法可以创建一个接受 1 个参数（即文件）的 bash 脚本，然后它将执行以下操作

1.  使用 sftp 自动登录远程主机（密码、用户名在某处硬连线）
2.  发送本地文件
3.  使用 ssh 退出并登录到远程主机
4.  执行一些脚本
5.  从远程标准输出中取回结果。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T10:35:36.520

使用 Perl 和[Net::OpenSSH](https://metacpan.org/module/Net%3a%3aOpenSSH)：

```
use Net::OpenSSH;

my $ssh = Net::OpenSSH->new($host, user => $user, password => $password);
my $sftp = $ssh->sftp;
$sftp->put("/local/path/to/script", "bin/my_script"); # => ~/bin/my_script
$sftp->chmod("bin/my_script", 0755);
$ssh->system({stdout_file => '/tmp/script.out'}, "bin/my_script"); 
```

# css - CSS转换从左到右工作，从右到左不工作

> ID：14451214
> 
> 赞同：-1
> 
> 时间：2013-01-22T03:40:20.870
> 
> 标签：css, css-transitions, transitions

如果您访问我的网站：[http](http://warringah-plastics.com.au/wplastics) : //warringah-plastics.com.au/wplastics，当您将鼠标悬停在主导航中的菜单项上时，您会看到一个指示箭头显示在其顶部。然后，当您在菜单上从左到右移动鼠标时，CSS 过渡非常平滑。但是，当您从右向左移动时，过渡类型会跳过菜单项并且看起来不太好。目前我正在将此 CSS 应用于 nav li 元素：

transition: all 0.5s ease-in-out 0s !important;

我尝试过使用悬停 CSS，但没有运气。提前致谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-22T04:37:58.440

编辑：

我建议只使用 css 方法，有很多方法可以做到这一点。至少对我来说看起来很流畅。JSFIDDLE： http: [//jsfiddle.net/Victornpb/u85as/226/](http://jsfiddle.net/Victornpb/u85as/226/)和[http://jsfiddle.net/Victornpb/u85as/236](http://jsfiddle.net/Victornpb/u85as/236)

```
ul{
    width: 100%;
    margin: 0;
}
li{
    display: inline-block;
    border: 1px solid red;

    width: 100px;
    -webkit-box-sizing: border-box;
    -moz-box-sizing: border-box;
    box-sizing: border-box; 
}

li:nth-child(1):hover ~ #arrow{
    margin-left: 0;
}
li:nth-child(2):hover ~ #arrow{
    margin-left: 100px;
}
li:nth-child(3):hover ~ #arrow{
    margin-left: 200px;
}
li:nth-child(4):hover ~ #arrow{
    margin-left: 300px;
}
li:nth-child(5):hover ~ #arrow{
    margin-left: 400px;
}

li:hover ~ #arrow{
    opacity: 1;
}

#arrow{
    margin-left: -50px;
    border:0px solid red;
    position:relative;
    width:100px;
    text-align:center;
    opacity: 0;

    transition:All 1s ease;
    -webkit-transition:All 1s ease;
    -moz-transition:All 1s ease;
    -o-transition:All 1s ease;
}
#arrow:before{
    content:"";
    display:block;
    width:0;
    border:10px solid red;
    border-color:red  transparent transparent transparent;
    position:absolute;
    top:100%;
    left:50%;
    margin-left:-10px;
} 
```

标记：

```
<ul>
    <li>Menu 1</li>
    <li>Menu 2</li>
    <li>Menu 3</li>
    <li>Menu 4</li>
    <li>Menu 5</li>

    <div id="arrow"></div>

</ul> 
```

* * *

笔记

我看不到任何过渡。

![在此处输入图像描述](../Images/60de9390a79f8fbb81200cdbc7c0f39e.png)

但是您在某处严重泄漏，首先该页面花了将近一分钟来加载所有内容。请求栏（蓝色），在 44.5 秒内停止加载。

在那之前，页面就像一百万个事件一样触发，认真看看滚动条的大小。和huuuge黄色条。

![在此处输入图像描述](../Images/c93b97c6ab1cc9b47dd8fbf4d073f404.png)

# ruby-on-rails-3 - 如何禁用 Rails 3 上资源的某些路由？

> ID：14451215
> 
> 赞同：1
> 
> 时间：2013-01-22T03:40:25.750
> 
> 标签：ruby-on-rails-3, rest, routes

我想将模型定义为获取所有 REST URL 的资源。

但是，我想禁用一些生成的路由（例如，DELETE）。是否有一个简单的 API，或者我只需要单独声明所有路由？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T03:51:34.303

在**routes.rb**中是这样的：

```
resources :photos, :only => [:index, :show] 
```

[在这里](http://guides.rubyonrails.org/routing.html)查看更多。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-22T04:01:57.433

你有两种方法可以做到这一点

在 config/routes.rb

1）作为@emm，建议只定义你想要的路线

2) 使用 except 关键字`exclude`路由

```
Ex: Excluding destroy action 

resources :books, :except => [:destroy] 
```

[在这里阅读更多](http://archives.ryandaigle.com/articles/2008/11/13/what-s-new-in-edge-rails-except-and-only-routing-options)

高温高压

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-22T03:53:35.667

您还可以排除以下特定操作： `resources :articles, except: :destroy`

# android - 如果Paypal购物车作为网页打开，是否算作应用内支付？

> ID：14451216
> 
> 赞同：1
> 
> 时间：2013-01-22T03:40:32.777
> 
> 标签：android, paypal, in-app-purchase, in-app-billing

我在通过 Google Play 分发的我的 Android 应用程序（4.0+）上提供的支付选项上苦苦挣扎。如果我在应用程序中添加 Paypal 作为选项，并选择它会将用户重定向到要在第三方浏览器上打开的 Paypal 购物车，这是否会被视为一种应用内支付方式？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T04:31:19.617

虽然这并不能完全回答这个问题，但我想指出一个相当重要的观点。

如果您打算使用集成 PayPal*的应用内购买*，则不能通过 Google Play 分发您的应用程序。如果你通过其他渠道分发它，那是完全不同的事情。

查看[Google Play 开发者计划政策](http://play.google.com/about/developer-content-policy.html)。

而这个，[http://www.insidemobileapps.com/2012/07/31/google-drops-the-hammer-on-third-party-android-billing-services-apps-must-use-googles-billing-system /](http://www.insidemobileapps.com/2012/07/31/google-drops-the-hammer-on-third-party-android-billing-services-apps-must-use-googles-billing-system/)

当然，正如*BenjiWiebe*已经指出的那样，从纯粹的技术角度来看，***不应***将其视为应用内支付。风险在于用户在 Google Play 上标记应用程序。

所以，如果回报值得冒险......

# sql - SQL 与其他表相交，如何忽略？

> ID：14451221
> 
> 赞同：0
> 
> 时间：2013-01-22T03:41:03.810
> 
> 标签：sql, sql-server, tsql

我正在尝试运行给定三个表的查询。

```
DECLARE @TABLE1 TABLE (ID CHAR(2))
DECLARE @TABLE2 TABLE (ID CHAR(2))
DECLARE @TABLE3 TABLE (ID CHAR(2))

INSERT INTO @TABLE1 VALUES('1')
INSERT INTO @TABLE1 VALUES('2')
INSERT INTO @TABLE2 VALUES('1')

--NOTHING in TABLE3 
```

我只需要获取存在的值并忽略空表。这不起作用，因为 TABLE3 没有值。

```
SELECT ID 
  FROM @TABLE1 
INTERSECT 
SELECT ID 
  FROM @TABLE2 
INTERSECT  
SELECT ID 
 FROM @TABLE3

 **Result should be 1** 
```

如果它为空，我如何忽略任何表但保留其他值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T03:52:34.313

为什么不从每个表中选择不同的并集，然后按 ID 分组并选择 count(*)，并仅选择结果中 count(*) 等于 count(*) 最大值的行？

不幸的是，此时子查询有点混乱，但你应该明白逻辑:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T06:07:15.460

Intersect 对您不起作用，因为您无法为其添加条件。

据我了解，您希望选择 ID 出现在至少 2 个表中的所有记录。我假设每个表的 ID 都是唯一的。

以下适用于 MS SQL Server：

```
DECLARE @TABLE1 TABLE (ID CHAR(2))
DECLARE @TABLE2 TABLE (ID CHAR(2))
DECLARE @TABLE3 TABLE (ID CHAR(2))

INSERT INTO @TABLE1 VALUES('1')
INSERT INTO @TABLE1 VALUES('2')
INSERT INTO @TABLE2 VALUES('1')

--NOTHING in TABLE3
;WITH AllValues AS
(
    SELECT ID 
    FROM @TABLE1 
    UNION ALL
    SELECT ID 
    FROM @TABLE2 
    UNION ALL
    SELECT ID 
    FROM @TABLE3
)
SELECT  ID
FROM    AllValues
GROUP BY ID
HAVING  COUNT(*) > 1 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-22T04:18:33.437

也许……但是系统的设计非常陌生；一个真实世界的例子将有助于理解你想要做什么。

```
Select count(*), ID FROM (
Select ID from @table1
UNION
Select ID from @table2
UNION
Select ID from @table3) Derived
Where RowNum =1   
GROUP BY ID
ORder by count(*) DESC 
```

更新了 where 子句在错误的地方

# zooming - 有没有办法使用传单放大矩形图像？

> ID：14451224
> 
> 赞同：1
> 
> 时间：2013-01-22T03:41:35.223
> 
> 标签：zooming, leaflet

我使用传单放大我制作的 webapps 中的图像（请参阅[http://rihannadecoded.com](http://rihannadecoded.com)以获取示例站点）。为了使图像正常工作，我需要确保它们是一个可以分解为 256x256 像素块的正方形。

现在，我想为 5000x2000 像素（或任何其他非方形分辨率）的图像创建一个类似的站点。有什么方法可以使用传单来做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T13:18:02.853

如果图像是方形的并且可以将 ub 拆分为 256x256 块，则无关紧要。

例如，对于 5000x2000 的图像，您可以使用 250x250 - 图块（使用 tileSize 选项来定义图块的大小）。

当图像无法分割成方形块时，您仍然可以选择使用您选择的背景颜色来完成右侧/底部的部分图块。

# android - 加载新页面后，Android AsyncTask 布尔值更改为 false

> ID：14451228
> 
> 赞同：0
> 
> 时间：2013-01-22T03:42:09.827
> 
> 标签：android, android-asynctask

我不完全确定如何解释这一点，但我是 AsyncTask 的新手，我想做的是向我的服务器发送一个 UDP 数据包，如果我得到回复，如果不是离线，它就会将其设置为在线。现在它在第一次打开应用程序时可以正常工作，但是一旦加载了新页面，它就会说服务器处于离线状态，即使它仍然在线。我不确定它有什么问题。我是在错误地执行 AsyncTask 还是到了那种程度？这是我唯一能想到的。

检查状态.java

```
import java.io.IOException;
import java.net.*;

public class CheckStatus {
//Check if the server is online

    public static boolean check() {

        try {
            byte[] receiveData = new byte[1024];
            InetAddress address = InetAddress.getByName("11.11.11.11");
            //create socket
            DatagramSocket clientSocket = new DatagramSocket();
            //set timeout
            clientSocket.setSoTimeout(1000);
            //send packet
            DatagramPacket p = new DatagramPacket(Integer.toBinaryString(0x0006000000).getBytes(), 5, address, 44462);
                .send(p);
            //try to receive packet from server
            DatagramPacket receivePacket = new DatagramPacket(receiveData, receiveData.length);
            clientSocket.receive(receivePacket);
            clientSocket.close();
            return true;
        } catch (Exception e) {
            //if nothing is received set the the server status offline
            return false;
        }
    }   
} 
```

CheckStatusTask.java

```
import android.os.AsyncTask;

class CheckStatusTask extends AsyncTask<Object, Object, Boolean> { 

    private static boolean online;

    protected Boolean doInBackground(Object... arg0) {
        boolean flag = CheckStatus.check();
        return flag;
    }

    protected void onPostExecute(Boolean flag) {
        online = flag;
    }

    public static boolean getOnline(){
        return online;
    }
} 
```

main.java

```
import android.os.Bundle;
import android.view.View;

import com.swgproject.projectswg.ActionBar;

public class Main extends ActionBar {

//Include res/layout/main.xml
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    View background = findViewById(R.id.status);
    View status = findViewById(R.id.image);
    new CheckStatusTask().execute();
    if(CheckStatusTask.getOnline()){
        background.setBackgroundResource(R.layout.offline);
        status.setBackgroundResource(R.drawable.offline);
    }
}

} 
```

非常感谢任何帮助谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T04:00:21.737

现在你的问题是你没有正确访问结果。您要求任务执行，然后在不知道任务完成与否的情况下立即访问结果。我建议让您的异步任务成为这样的内部类，以便它可以访问以下变量`Main`：

**主.java**

```
public class Main extends ActionBar {
    private View background;
    private View status;

        @Override
        protected void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);
            setContentView(R.layout.main);
            background = findViewById(R.id.status);
            status = findViewById(R.id.image);
            new CheckStatusTask().execute();
        }

        class CheckStatusTask extends AsyncTask<Object, Object, Boolean> { 

            protected Boolean doInBackground(Object... arg0) {
                return CheckStatus.check();
            }

            protected void onPostExecute(Boolean flag) {
                if(flag){
                        background.setBackgroundResource(R.layout.offline);
                        status.setBackgroundResource(R.drawable.offline);
                }
            }

        }

} 
```

# c - 用 C 读入、逐行操作和写出的最佳方法是什么？

> ID：14451229
> 
> 赞同：2
> 
> 时间：2013-01-22T03:42:10.947
> 
> 标签：c

假设我有两个文本文件`in.txt`和`out.txt`.

`in.txt`：

```
abc      one    2    3    4
         two    3    4    two    twenty
         three  3    20   8
adbc     two    4    28   3      thirty 
```

如何逐行阅读并在需要时进行操作？因此，在任何一行上，我都可以检查第一列中是否有一些文本（本例中为“abc”和“adbc”），第二列、第三列等中的内容是什么，直到该行结束？然后，基于这些操作写入`out.txt`?

例如，如果任何一行有第 6 列（如果它有第 6 列）并且显示“20”，则打印为`out.txt`“Hello”。

或者

如果第二列是“三”，则添加以下三个数字...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T09:36:18.467

我认为 strtok 仍然可以完成工作。只需根据以空格开头的行遵循两条不同的路径。

伪代码：

```
while (line = readline()) {
    if (line[0] == ' ') { // you can check for multiple spaces if necessary.
        // If line begins with empty first column
        tokenize_handle_normal(line);
    } else {
        // If line begins with string in the first column
        tokenize_handle_special(line); // Call tokenize_handle_normal(line) after parsing the first column
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T03:45:23.787

我不知道最好的方法，但这是一种方法：

读入文件并使用 strtok 将其解析为分隔符。（然后你可以再次使用 strtok 来读取它被空格分割的内容）

[http://www.cplusplus.com/reference/cstring/strtok/](http://www.cplusplus.com/reference/cstring/strtok/)

# c++ - DirectX11 ClearRenderTargetView

> ID：14451237
> 
> 赞同：1
> 
> 时间：2013-01-22T03:43:05.540
> 
> 标签：c++, directx-11

这在 ClearRenderTargetView 调用上失败。我不确定我的错误在哪里 - 我正在按照教程进行操作，但我不知道什么是不正确的。希望得到一些帮助，谢谢大家！

// DX6.cpp : 定义应用程序的入口点。//

```
#include "stdafx.h"
#include "DX6.h"
#include <d3d11.h>
#include <d3dx11.h>
#include <d3d10.h>
#include <d3dx9core.h>

// include the Direct3D Library file
#pragma comment (lib, "d3d11.lib")
#pragma comment (lib, "d3dx11.lib")
#pragma comment (lib, "d3dx10.lib")

//forward declares
LRESULT CALLBACK    WndProc(HWND, UINT, WPARAM, LPARAM);
void InitD3D(HWND hWnd);     // sets up and initializes Direct3D
void RenderFrame(void);
void CleanD3D(void);         // closes Direct3D and releases memory

// Global Variables:
HWND hWnd;
HINSTANCE hInst;
IDXGISwapChain *swapchain;             // the pointer to the swap chain interface
ID3D11Device *dev;                     // the pointer to our Direct3D device interface
ID3D11DeviceContext *devcon;           // the pointer to our Direct3D device context
ID3D11RenderTargetView *backbuffer;    // global declaration

int APIENTRY _tWinMain(HINSTANCE hInstance,HINSTANCE hPrevInstance,LPTSTR lpCmdLine,int nCmdShow)
{
    WNDCLASSEX wc;
    ZeroMemory(&wc,sizeof(WNDCLASSEX));
    wc.cbSize = sizeof(WNDCLASSEX);
    wc.style = CS_HREDRAW | CS_VREDRAW;
    wc.lpfnWndProc = WndProc;
    wc.hInstance = hInstance;
    wc.hCursor = LoadCursor(NULL, IDC_ARROW);
    wc.hbrBackground = (HBRUSH)COLOR_WINDOW;
    wc.lpszClassName = L"WindowClass1";
    RegisterClassEx(&wc);

    // TODO: Place code here.
    MSG msg={0};

   hInst = hInstance; // Store instance handle in our global variable

   hWnd = CreateWindow(L"WindowClass1", L"Test Title", WS_OVERLAPPEDWINDOW,
      CW_USEDEFAULT, 0, CW_USEDEFAULT, 0, NULL, NULL, hInstance, NULL);

   if (!hWnd)
   {
      return 1;
   }

   ShowWindow(hWnd, nCmdShow);

    // Main message loop:
    while (true)
    {
        if(PeekMessage(&msg, NULL, 0, 0, PM_REMOVE))
        {
            // translate keystroke messages into the right format
            TranslateMessage(&msg);

            // send the message to the WindowProc function
            DispatchMessage(&msg);

            // check to see if it's time to quit
            if(msg.message == WM_QUIT)
                break;
        }
        else{
            RenderFrame();
        }
    }

    return (int) msg.wParam;
}
LRESULT CALLBACK WndProc(HWND hWnd, UINT message, WPARAM wParam, LPARAM lParam)
{
    int wmId, wmEvent;
    PAINTSTRUCT ps;
    HDC hdc;

    switch (message)
    {
    case WM_COMMAND:
        wmId    = LOWORD(wParam);
        wmEvent = HIWORD(wParam);
        // Parse the menu selections:
        switch (wmId)
        {
        case IDM_EXIT:
            DestroyWindow(hWnd);
            break;
        default:
            return DefWindowProc(hWnd, message, wParam, lParam);
        }
        break;
    case WM_PAINT:
        hdc = BeginPaint(hWnd, &ps);
        // TODO: Add any drawing code here...
        EndPaint(hWnd, &ps);
        break;
    case WM_DESTROY:
        PostQuitMessage(0);
        break;
    default:
        return DefWindowProc(hWnd, message, wParam, lParam);
    }
    return 0;
}

//D3D
void InitD3D(HWND hWnd){
    DXGI_SWAP_CHAIN_DESC scd;
    ZeroMemory(&scd,sizeof(DXGI_SWAP_CHAIN_DESC));

    scd.BufferCount=1;
    scd.BufferDesc.Format = DXGI_FORMAT_R8G8B8A8_UNORM;     // use 32-bit color
    scd.BufferUsage = DXGI_USAGE_RENDER_TARGET_OUTPUT;      // how swap chain is to be used
    scd.OutputWindow = hWnd;                                // the window to be used
    scd.SampleDesc.Count = 4;                               // how many multisamples
    scd.Windowed = TRUE;  
    D3D11CreateDeviceAndSwapChain(NULL,D3D_DRIVER_TYPE_HARDWARE,NULL,NULL,NULL,NULL,D3D11_SDK_VERSION,&scd,&swapchain,&dev,NULL,&devcon);

    ID3D11Texture2D *pBackBuffer;
    swapchain->GetBuffer(0, __uuidof(ID3D11Texture2D), (LPVOID*)&pBackBuffer);

    // use the back buffer address to create the render target
    dev->CreateRenderTargetView(pBackBuffer, NULL, &backbuffer);
    pBackBuffer->Release();

    // set the render target as the back buffer
    devcon->OMSetRenderTargets(1, &backbuffer, NULL);

    //create viewport
    D3D11_VIEWPORT viewport;
    ZeroMemory(&viewport,sizeof(D3D11_VIEWPORT));
    viewport.TopLeftX=0;
    viewport.TopLeftY=0;
    viewport.Width=800;
    viewport.Height=800;

    //set viewport
    devcon->RSSetViewports(1,&viewport);

}
void RenderFrame(void){
    //FAILS HERE!!!
   //Unhandled exception at 0x002e1a9f in DX6.exe: 0xC0000005: Access violation       //reading location 0x00000000.
    devcon->ClearRenderTargetView(backbuffer,D3DXCOLOR(0.0f,0.2f,0.4f,1.0f));

    //switch back & front buffer
    swapchain->Present(0,0);
}

void CleanD3D()
{
    // close and release all existing COM objects
    swapchain->Release();
    dev->Release();
    devcon->Release();
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T03:50:15.767

您从不调用`InitD3D`，因此尚未设置`CreateRenderTargetView`调用`RenderFrame`的时间。`backbuffer`

# java - 安卓网络服务 mysql

> ID：14451239
> 
> 赞同：0
> 
> 时间：2013-01-22T03:43:20.560
> 
> 标签：java, android, mysql, web-services, tomcat

我从第二级的 android 编程开始，我想获得一些关于第一步的建议和答案来做我的应用程序。

我的应用程序需要从终端将一些信息放入数据库（mysql）中，任何其他终端都可以通过咨询数据库来获取这些信息......所以我知道我需要一个 BD（mysql）和一个网络服务来提供插入和获取数据的过程来自 BD。

我已经编写了 android 程序，现在我只需要将信息上传到 BD。

有一些经验的人有我的问题，也许可以给我建议。

1.  我需要一个像mysql这样的BD（没关系？？）
2.  测试我安装了tomcat 7.0（没关系？？）
3.  我还需要做什么？我想用java做，所以我需要一些库？其他程序？我真的迷路了

我知道我要求很多东西......但如果有人知道一些我可以学习的教程，我很感激

非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T04:42:18.580

在java中你可以找到很多可以提供解决方案的库。我也尝试过使用库“Ksop”和“json”你可以[在这里](http://javatutorialspoint.blogspot.in/2012/02/android-web-service-access-using-ksoap2.html)和[这里](http://android-devblog.blogspot.in/2010/06/soap-on-android.html)查看。认为这会对你有所帮助。

# forms - 鼠标悬停在表单上时的虚假 HTML URL 地址

> ID：14451240
> 
> 赞同：0
> 
> 时间：2013-01-22T03:43:24.190
> 
> 标签：forms, if-statement, header, href

假设我有以下形式：

```
<form method="post" action="" autocomplete="off"><input name="checking2" type="submit" value="Name" class="ssd"></form> 
```

当用户提交表单时，会发生此 PHP 代码：

```
if(isset($_POST['checking2'])){
$xmla = new SimpleXMLElement('passwords/' . views . '.xml', 0, true);
$plus = $xmla->goodx;
$result = $plus + 1;
$xmla->goodx = $result;
$xmla->asXML('passwords/' . views . '.xml');
header( 'Location: http://google.com' ) ;
} 
```

以及下面的 CSS 来设计表单： 代码：

```
.ssd {
border: none;
background-color: transparent;
padding: 0;
cursor: pointer;
font-size:89%;
display:inline;
text-decoration: underline; 
color: #00c;  
} 
```

现在，每次用户点击表单时，他都会被重定向到谷歌。每次有人提交表单时，PHP 代码都应该为 xml 文件的值添加 +1（它有效）。我的问题是，每当有人将鼠标放在表单的值上时，他看到的 URL 是他当前所在页面的 URL 地址，而不是他将实际重定向到的 URL - Google。我试图伪造 URL 地址，所以他不会看到当前页面的 URL 地址（即 action=""），而是会看到 google 的 URL 地址。不，不建议只将 google 的 URL 地址放在“action=”中，因为每当我这样做时，由于某种原因，PHP 数据不会正确更新。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T04:00:55.143

万一我说对了，您想更改表单操作属性，不是吗？

如果是这样，请使用这个小 javascript 代码：

```
 <script>
function fake_action(){
    document.forms["myform"].action="http://example.com";
    document.forms["myform"].submit();
}
</script>
<form id="myform" action="http://google.com">
    <input type="text" placeholder="placehold.it"/>
    <input type="button" value="send" onclick="fake_action();"/>
</form> 
```

只是一个快速的解释：我用标准按钮替换了提交按钮并指定了 fake_action(); 用作它的 onclick 事件处理程序。fake_action 函数只是改变表单的动作并在之后提交。所以你可以毫无问题地做你的事情。

（您应该在页面加载时检查 GET / POST 参数，并在您在第一个页面收到它们后最终将它们发送到第二个页面；））

# javascript - Javascript expandme 图片点击

> ID：14451241
> 
> 赞同：0
> 
> 时间：2013-01-22T03:43:31.677
> 
> 标签：javascript, jquery, html, css

我正在为我的页面使用[https://github.com/nigma/jquery-expandme](https://github.com/nigma/jquery-expandme)插件，这是[示例](http://en.ig.ma/projects)

每次单击底部灰色区域时，背景图像会扩大到完整，再次单击灰色区域，它会折叠到图像的顶部。

这就是我想要实现的目标：

我想保持向上和向下箭头功能不变，并使点击也发生在图像本身上，以便人们使用。

1）当它是图像的顶部时，向下箭头仍应显示在底部，因此您可以单击图像本身或向下箭头展开。

2) 展开为全图后，向上箭头应显示在底部。因此，您可以单击图像或向上箭头将其折叠到顶部图像。

我已经尝试了一段时间，但没有成功。有人可以指出我正确的方向吗？

谢谢你，S:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T04:19:31.627

编辑：我想我第一次弄错了..

编辑：请点击下面的链接。

[https://github.com/codeiz/jquery-expandme](https://github.com/codeiz/jquery-expandme)

我已经更新了插件，现在它允许多个控制器，但现在您必须将数组作为参数传递，请查看文档

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T04:26:58.853

我认为您可以将此 expandToggleClass 更改为 "exmandme" ：

// 添加到扩展元素的类 expandToggleClass: 'expand-toggle', // 触发的锚元素的类

# regex - Scala：如何公开绑定在 case 语句中的正则表达式变量

> ID：14451243
> 
> 赞同：1
> 
> 时间：2013-01-22T03:43:43.930
> 
> 标签：regex, scala, case

Scala 正则表达式在以下两种情况下都可以很好地工作：
无条件执行的代码：例如

```
val lineregx = """([\w]+)\t([/\w.+-]+)\t([/\w+=\-!%# ]+)""".r
val anotherregx = """([\w]+)\t([/\w+=\-!%# ]+)""".r
val lineregx(category, aaUrl, title) 
```

或者如果在 case 语句中我们使用表达式（并且不再需要它们..）

```
val lineregx = """([\w]+)\t([/\w.+-]+)\t([/\w+=\-!%# ]+)""".r
line match {

case lineregx(category, aaUrl, title) => // do something with category, aaUrl and title in here!
case anotherRegx(category, aaUrl) => // do something different with category, aaUrl and title in here!
case _ => { println("did not match line %s".format(line)); return 0 }

} 
```

但是，如果我需要将匹配项“显示”到 case 语句之外的变量呢？特别是下面显示的var，

```
val lineregx = """([\w]+)\t([/\w.+-]+)\t([/\w+=\-!%# ]+)""".r
var category = "" ; var aaUrl = "";var title = ""
line match {
case lineregx(category, aaUrl, title) => val lineregx(category, aaUrl, title) = line
case anotherRegx(category, aaUrl) => val lineregx(category, aaUrl) = line
case _ => { println("did not match line %s".format(line)); return 0 }
}
// Do something with category, aaUrl, title HERE after the case statement. 
```

问题是，应用 lineregx/anotherregex 的语法使这些变量仅对 case 语句是局部的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-22T04:15:06.123

大致，

```
val lineregx = """([\w]+)\t([/\w.+-]+)\t([/\w+=\-!%# ]+)""".r
val (category, aaUrl, title) = line match {
  case lineregx(category, aaUrl, title) => (category, aaUrl, title)
  case anotherRegx(category, aaUrl) => (category, aaUrl, ???)
  case _ => { println("did not match line %s".format(line)); return 0 }
}
// Do something with category, aaUrl, title HERE after the case statement. 
```

但是该代码非常杂乱无章。一方面，存在`title`第二种情况的价值问题。另一方面，还有早期的回报。相反，代码可能最好像这样组织：

```
// method declaration
// ...
  val lineregx = """([\w]+)\t([/\w.+-]+)\t([/\w+=\-!%# ]+)""".r
  line match {
    case lineregx(category, aaUrl, title) => f(category, aaUrl, title)
    case anotherRegx(category, aaUrl)     => f(category, aaUrl, ???)
    case _ => 
      println("did not match line %s".format(line))
      0
  }
}  // end of method

def f(category: String, aaUrl: String, title: String): Int = {
  // Do something with category, aaUrl, title HERE
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-22T05:17:45.727

你可以使用`Option`：

```
val lineregx = """([\w]+)\t([/\w.+-]+)\t([/\w+=\-!%# ]+)""".r

val (maybeCat, maybeUrl, maybeTitle) = 
line match {
  case lineregx(category, aaUrl, title) => (Some(category), Some(aaUrl), Some(title))
  case anotherRegx(category, aaUrl)     => (Some(category), Some(aaUrl), None)
  case _ => 
    println("did not match line %s".format(line))
    (None, None, None)
}

var category = maybeCat getOrElse ""
var aaUrl =    maybeURL getOrElse ""
var title =    maybeTitle getOrElse  "" 
```

稍微冗长一些，但是这样你可以在相同的范围内获取变量。

# python - IntegrityError：列 user_id 在 django tastepie 测试单元中不是唯一的

> ID：14451245
> 
> 赞同：1
> 
> 时间：2013-01-22T03:43:50.637
> 
> 标签：python, django, unit-testing, tastypie

我在tastepie 中测试资源模型时遇到了一个奇怪的错误。

我有这个测试

```
class LocationResourceTest(ResourceTestCase):
    # Use ``fixtures`` & ``urls`` as normal. See Django's ``TestCase``
    # documentation for the gory details.
    fixtures = ['admin_user.json']

    def runTest(self):
        super(LocationResourceTest, self).runTest()

    def setUp(self):
        super(LocationResourceTest, self).setUp()

        # Create a user.
        self.user = User.objects.create_user(username='johndoe',email='johndoe@example.com',password='password')
        # Create an API key for the user:
        ApiKey.objects.create(user=self.user)

    def get_credentials(self):
        return self.create_apikey(username=self.user.username, api_key=self.user.api_key.key)

    def test_create_apikey(self):
        # Try api key authentication using ResourceTestCase.create_apikey().
        credentials = self.get_credentials()
        resp = self.api_client.get('/api/v1/location/',authentication=credentials,format='json')
        self.assertHttpOK(resp)

    def test_get_list_unauthorzied(self):
        pass 
```

当我执行测试时，出现以下错误

```
======================================================================
ERROR: test_get_list_unauthorzied (geolocation.tests.api.LocationResourceTest)
----------------------------------------------------------------------
Traceback (most recent call last):
  File "/Users/phantomis/Memoria/smartaxi_server/geolocation/tests/api.py", line 24, in setUp
    ApiKey.objects.create(user=self.user)
  File "/Users/phantomis/Virtualenvs/django-memoria/lib/python2.7/site-packages/django/db/models/manager.py", line 137, in create
    return self.get_query_set().create(**kwargs)
  File "/Users/phantomis/Virtualenvs/django-memoria/lib/python2.7/site-packages/django/db/models/query.py", line 377, in create
    obj.save(force_insert=True, using=self.db)
  File "/Users/phantomis/Virtualenvs/django-memoria/lib/python2.7/site-packages/django_tastypie-0.9.12_alpha-py2.7.egg/tastypie/models.py", line 47, in save
    return super(ApiKey, self).save(*args, **kwargs)
  File "/Users/phantomis/Virtualenvs/django-memoria/lib/python2.7/site-packages/django/db/models/base.py", line 463, in save
    self.save_base(using=using, force_insert=force_insert, force_update=force_update)
  File "/Users/phantomis/Virtualenvs/django-memoria/lib/python2.7/site-packages/django/db/models/base.py", line 551, in save_base
    result = manager._insert([self], fields=fields, return_id=update_pk, using=using, raw=raw)
  File "/Users/phantomis/Virtualenvs/django-memoria/lib/python2.7/site-packages/django/db/models/manager.py", line 203, in _insert
    return insert_query(self.model, objs, fields, **kwargs)
  File "/Users/phantomis/Virtualenvs/django-memoria/lib/python2.7/site-packages/django/db/models/query.py", line 1593, in insert_query
    return query.get_compiler(using=using).execute_sql(return_id)
  File "/Users/phantomis/Virtualenvs/django-memoria/lib/python2.7/site-packages/django/db/models/sql/compiler.py", line 912, in execute_sql
    cursor.execute(sql, params)
  File "/Users/phantomis/Virtualenvs/django-memoria/lib/python2.7/site-packages/django/db/backends/sqlite3/base.py", line 344, in execute
    return Database.Cursor.execute(self, query, params)
IntegrityError: column user_id is not unique 
```

错误出现在方法 "test_get_list_unauthorzied" 中，这很奇怪，因为如果我评论该方法，我的测试通过（该方法完全为空）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T05:29:39.243

`setUp``test_*`为您拥有的每个方法运行。当您注释掉空的测试用例时，`setUp`只运行一次。`test_*`没有注释掉另一种方法，`setUp`运行两次，这就是违反唯一性约束的方式。

我将创建一个`tearDown`方法来删除您在另一个测试用例中创建的用户和 api 密钥。

# c++ - QTKit 没有找到任何附加的视频输入设备

> ID：14451246
> 
> 赞同：3
> 
> 时间：2013-01-22T03:44:14.750
> 
> 标签：c++, c, opencv, camera, quicktime

每当我尝试运行一个简单的应用程序从Macbook Pro 13"（内置 iSight）[的相机中抓取帧时，都会出现以下错误：](https://stackoverflow.com/a/8408961/176769)

```
QTKit didn't find any attached Video Input Devices!
Warning, camera failed to properly initialize!
Cleaned up camera. 
```

我尝试将 -1、0 和作为参数传递`cvCreateCameraCapture()`给`cv::VideoCapture`对象，但没有一个起作用。重要的是，我在这台机器上使用了 OpenCV 2.3.1 很长一段时间，并且通过 -1 作为参数运行良好。

Mac OS X 10.7.5 上的 OpenCV v2.4.2 和 v2.4.3 似乎会出现此问题。

有任何想法吗？

**编辑：**

经过一番研究，我发现[QTKit 是 QuickTime 工具包，与](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/QTKitApplicationProgrammingGuide/Introduction/Introduction.html)[Qt](http://qt-project.org/)无关。因此，下一个合乎逻辑的事情是从 OpenCV 构建中禁用*QTKit*，而这样做的方法是通过 flag `-DWITH_QUICKTIME=YES`，这会强制 OpenCV 使用 QuickTime for Video I/O 而不是*QTKit 构建*。

不幸的是，这个解决方案也不起作用，因为它导致了几个我不想处理的编译错误：

```
[ 32%] Building CXX object modules/highgui/CMakeFiles/opencv_highgui.dir/src/cap_qt.cpp.o
/OpenCV-2.4.3/modules/highgui/src/cap_qt.cpp:75: error: ‘Movie’ does not name a type
/OpenCV-2.4.3/modules/highgui/src/cap_qt.cpp: In function ‘CvCapture_QT_Movie* icvCaptureFromFile_QT(const char*)’:
/OpenCV-2.4.3/modules/highgui/src/cap_qt.cpp:100: warning: declaration of ‘did_enter_movies’ shadows a global declaration [-Wshadow]
/OpenCV-2.4.3/modules/highgui/src/cap_qt.cpp:67: warning: shadowed declaration is here [-Wshadow]
/OpenCV-2.4.3/modules/highgui/src/cap_qt.cpp:103: error: ‘EnterMovies’ was not declared in this scope
/OpenCV-2.4.3/modules/highgui/src/cap_qt.cpp: In function ‘int icvOpenFile_QT_Movie(CvCapture_QT_Movie*, const char*)’:
/OpenCV-2.4.3/modules/highgui/src/cap_qt.cpp:142: error: ‘ClearMoviesStickyError’ was not declared in this scope
/OpenCV-2.4.3/modules/highgui/src/cap_qt.cpp:145: error: ‘struct CvCapture_QT_Movie’ has no member named ‘myMovie’
/OpenCV-2.4.3/modules/highgui/src/cap_qt.cpp:161: error: ‘kQTPOSIXPathStyle’ was not declared in this scope
/OpenCV-2.4.3/modules/highgui/src/cap_qt.cpp:161: error: ‘QTNewDataReferenceFromFullPathCFString’ was not declared in this scope
/OpenCV-2.4.3/modules/highgui/src/cap_qt.cpp:169: error: ‘struct CvCapture_QT_Movie’ has no member named ‘myMovie’
/OpenCV-2.4.3/modules/highgui/src/cap_qt.cpp:169: error: ‘newMovieActive’ was not declared in this scope
/OpenCV-2.4.3/modules/highgui/src/cap_qt.cpp:169: error: ‘newMovieAsyncOK’ was not declared in this scope
/OpenCV-2.4.3/modules/highgui/src/cap_qt.cpp:170: error: ‘NewMovieFromDataRef’ was not declared in this scope
/OpenCV-2.4.3/modules/highgui/src/cap_qt.cpp:190: error: ‘struct CvCapture_QT_Movie’ has no member named ‘myMovie’
/OpenCV-2.4.3/modules/highgui/src/cap_qt.cpp:190: error: ‘nextTimeMediaSample’ was not declared in this scope
/OpenCV-2.4.3/modules/highgui/src/cap_qt.cpp:190: error: ‘nextTimeEdgeOK’ was not declared in this scope
/OpenCV-2.4.3/modules/highgui/src/cap_qt.cpp:191: error: ‘GetMovieNextInterestingTime’ was not declared in this scope
/OpenCV-2.4.3/modules/highgui/src/cap_qt.cpp:205: error: ‘struct CvCapture_QT_Movie’ has no member named ‘myMovie’
/OpenCV-2.4.3/modules/highgui/src/cap_qt.cpp:212: error: ‘GetMoviesError’ was not declared in this scope
/OpenCV-2.4.3/modules/highgui/src/cap_qt.cpp:213: error: ‘struct CvCapture_QT_Movie’ has no member named ‘myMovie’
/OpenCV-2.4.3/modules/highgui/src/cap_qt.cpp:213: error: ‘GetMovieBox’ was not declared in this scope
/OpenCV-2.4.3/modules/highgui/src/cap_qt.cpp:218: error: ‘QTNewGWorld’ was not declared in this scope
/OpenCV-2.4.3/modules/highgui/src/cap_qt.cpp:220: error: ‘struct CvCapture_QT_Movie’ has no member named ‘myMovie’
/OpenCV-2.4.3/modules/highgui/src/cap_qt.cpp:220: error: ‘SetMovieGWorld’ was not declared in this scope
/OpenCV-2.4.3/modules/highgui/src/cap_qt.cpp: In function ‘int icvClose_QT_Movie(CvCapture_QT_Movie*)’:
/OpenCV-2.4.3/modules/highgui/src/cap_qt.cpp:243: error: ‘struct CvCapture_QT_Movie’ has no member named ‘myMovie’
/OpenCV-2.4.3/modules/highgui/src/cap_qt.cpp:247: error: ‘DisposeGWorld’ was not declared in this scope
/OpenCV-2.4.3/modules/highgui/src/cap_qt.cpp:248: error: ‘struct CvCapture_QT_Movie’ has no member named ‘myMovie’
/OpenCV-2.4.3/modules/highgui/src/cap_qt.cpp:248: error: ‘DisposeMovie’ was not declared in this scope
/OpenCV-2.4.3/modules/highgui/src/cap_qt.cpp: In function ‘double icvGetProperty_QT_Movie(CvCapture_QT_Movie*, int)’:
/OpenCV-2.4.3/modules/highgui/src/cap_qt.cpp:264: error: ‘struct CvCapture_QT_Movie’ has no member named ‘myMovie’
/OpenCV-2.4.3/modules/highgui/src/cap_qt.cpp:281: error: ‘struct CvCapture_QT_Movie’ has no member named ‘myMovie’
/OpenCV-2.4.3/modules/highgui/src/cap_qt.cpp:281: error: ‘GetMovieTimeScale’ was not declared in this scope
/OpenCV-2.4.3/modules/highgui/src/cap_qt.cpp:286: error: ‘struct CvCapture_QT_Movie’ has no member named ‘myMovie’
/OpenCV-2.4.3/modules/highgui/src/cap_qt.cpp:286: error: ‘GetMovieDuration’ was not declared in this scope
/OpenCV-2.4.3/modules/highgui/src/cap_qt.cpp:300: error: ‘struct CvCapture_QT_Movie’ has no member named ‘myMovie’
/OpenCV-2.4.3/modules/highgui/src/cap_qt.cpp:300: error: ‘GetMovieDuration’ was not declared in this scope
/OpenCV-2.4.3/modules/highgui/src/cap_qt.cpp:301: error: ‘struct CvCapture_QT_Movie’ has no member named ‘myMovie’
/OpenCV-2.4.3/modules/highgui/src/cap_qt.cpp:301: error: ‘GetMovieTimeScale’ was not declared in this scope
/OpenCV-2.4.3/modules/highgui/src/cap_qt.cpp: In function ‘int icvSetProperty_QT_Movie(CvCapture_QT_Movie*, int, double)’:
/OpenCV-2.4.3/modules/highgui/src/cap_qt.cpp:331: error: ‘struct CvCapture_QT_Movie’ has no member named ‘myMovie’
/OpenCV-2.4.3/modules/highgui/src/cap_qt.cpp:351: error: ‘struct CvCapture_QT_Movie’ has no member named ‘myMovie’
/OpenCV-2.4.3/modules/highgui/src/cap_qt.cpp:351: error: ‘GetMovieTimeScale’ was not declared in this scope
/OpenCV-2.4.3/modules/highgui/src/cap_qt.cpp:356: error: ‘struct CvCapture_QT_Movie’ has no member named ‘myMovie’
/OpenCV-2.4.3/modules/highgui/src/cap_qt.cpp:356: error: ‘GetMovieDuration’ was not declared in this scope
/OpenCV-2.4.3/modules/highgui/src/cap_qt.cpp:370: error: ‘struct CvCapture_QT_Movie’ has no member named ‘myMovie’
/OpenCV-2.4.3/modules/highgui/src/cap_qt.cpp:370: error: ‘nextTimeStep’ was not declared in this scope
/OpenCV-2.4.3/modules/highgui/src/cap_qt.cpp:371: error: ‘GetMovieNextInterestingTime’ was not declared in this scope
/OpenCV-2.4.3/modules/highgui/src/cap_qt.cpp:372: error: ‘GetMoviesError’ was not declared in this scope
/OpenCV-2.4.3/modules/highgui/src/cap_qt.cpp:385: error: ‘struct CvCapture_QT_Movie’ has no member named ‘myMovie’
/OpenCV-2.4.3/modules/highgui/src/cap_qt.cpp:385: error: ‘nextTimeStep’ was not declared in this scope
/OpenCV-2.4.3/modules/highgui/src/cap_qt.cpp:386: error: ‘GetMovieNextInterestingTime’ was not declared in this scope
/OpenCV-2.4.3/modules/highgui/src/cap_qt.cpp:387: error: ‘GetMoviesError’ was not declared in this scope
/OpenCV-2.4.3/modules/highgui/src/cap_qt.cpp:408: error: ‘struct CvCapture_QT_Movie’ has no member named ‘myMovie’
/OpenCV-2.4.3/modules/highgui/src/cap_qt.cpp:408: error: ‘nextTimeStep’ was not declared in this scope
/OpenCV-2.4.3/modules/highgui/src/cap_qt.cpp:409: error: ‘GetMovieNextInterestingTime’ was not declared in this scope
/OpenCV-2.4.3/modules/highgui/src/cap_qt.cpp:410: error: ‘GetMoviesError’ was not declared in this scope
/OpenCV-2.4.3/modules/highgui/src/cap_qt.cpp: In function ‘int icvGrabFrame_QT_Movie(CvCapture_QT_Movie*)’:
/OpenCV-2.4.3/modules/highgui/src/cap_qt.cpp:441: error: ‘struct CvCapture_QT_Movie’ has no member named ‘myMovie’
/OpenCV-2.4.3/modules/highgui/src/cap_qt.cpp:449: error: ‘struct CvCapture_QT_Movie’ has no member named ‘myMovie’
/OpenCV-2.4.3/modules/highgui/src/cap_qt.cpp:449: error: ‘SetMovieTimeValue’ was not declared in this scope
/OpenCV-2.4.3/modules/highgui/src/cap_qt.cpp:450: error: ‘GetMoviesError’ was not declared in this scope
/OpenCV-2.4.3/modules/highgui/src/cap_qt.cpp:458: error: ‘struct CvCapture_QT_Movie’ has no member named ‘myMovie’
/OpenCV-2.4.3/modules/highgui/src/cap_qt.cpp:458: error: ‘GetMovieTime’ was not declared in this scope
/OpenCV-2.4.3/modules/highgui/src/cap_qt.cpp:462: error: ‘struct CvCapture_QT_Movie’ has no member named ‘myMovie’
/OpenCV-2.4.3/modules/highgui/src/cap_qt.cpp:462: error: ‘nextTimeStep’ was not declared in this scope
/OpenCV-2.4.3/modules/highgui/src/cap_qt.cpp:462: error: ‘GetMovieNextInterestingTime’ was not declared in this scope
/OpenCV-2.4.3/modules/highgui/src/cap_qt.cpp: In function ‘const void* icvRetrieveFrame_QT_Movie(CvCapture_QT_Movie*, int)’:
/OpenCV-2.4.3/modules/highgui/src/cap_qt.cpp:484: error: ‘struct CvCapture_QT_Movie’ has no member named ‘myMovie’
/OpenCV-2.4.3/modules/highgui/src/cap_qt.cpp:494: error: ‘struct CvCapture_QT_Movie’ has no member named ‘myMovie’
/OpenCV-2.4.3/modules/highgui/src/cap_qt.cpp:494: error: ‘UpdateMovie’ was not declared in this scope
/OpenCV-2.4.3/modules/highgui/src/cap_qt.cpp:495: error: ‘GetMoviesError’ was not declared in this scope
/OpenCV-2.4.3/modules/highgui/src/cap_qt.cpp:503: error: ‘struct CvCapture_QT_Movie’ has no member named ‘myMovie’
/OpenCV-2.4.3/modules/highgui/src/cap_qt.cpp:503: error: ‘MoviesTask’ was not declared in this scope
/OpenCV-2.4.3/modules/highgui/src/cap_qt.cpp:515: error: ‘GetGWorldPixMap’ was not declared in this scope
/OpenCV-2.4.3/modules/highgui/src/cap_qt.cpp:516: error: ‘LockPixels’ was not declared in this scope
/OpenCV-2.4.3/modules/highgui/src/cap_qt.cpp:517: error: ‘GetPixBaseAddr’ was not declared in this scope
/OpenCV-2.4.3/modules/highgui/src/cap_qt.cpp:517: error: ‘GetPixRowBytes’ was not declared in this scope
/OpenCV-2.4.3/modules/highgui/src/cap_qt.cpp:523: error: ‘UnlockPixels’ was not declared in this scope
/OpenCV-2.4.3/modules/highgui/src/cap_qt.cpp: At global scope:
/OpenCV-2.4.3/modules/highgui/src/cap_qt.cpp:556: error: ‘SeqGrabComponent’ does not name a type
/OpenCV-2.4.3/modules/highgui/src/cap_qt.cpp:557: error: ‘SGChannel’ does not name a type
/OpenCV-2.4.3/modules/highgui/src/cap_qt.cpp:560: error: ‘ImageSequence’ does not name a type
/OpenCV-2.4.3/modules/highgui/src/cap_qt.cpp: In function ‘CvCapture_QT_Cam* icvCaptureFromCam_QT(int)’:
/OpenCV-2.4.3/modules/highgui/src/cap_qt.cpp:590: error: ‘EnterMovies’ was not declared in this scope
/OpenCV-2.4.3/modules/highgui/src/cap_qt.cpp: At global scope:
/OpenCV-2.4.3/modules/highgui/src/cap_qt.cpp:609: warning: unused parameter ‘capture’ [-Wunused-parameter]
/OpenCV-2.4.3/modules/highgui/src/cap_qt.cpp:609: warning: unused parameter ‘property_id’ [-Wunused-parameter]
/OpenCV-2.4.3/modules/highgui/src/cap_qt.cpp:616: warning: unused parameter ‘capture’ [-Wunused-parameter]
/OpenCV-2.4.3/modules/highgui/src/cap_qt.cpp:616: warning: unused parameter ‘property_id’ [-Wunused-parameter]
/OpenCV-2.4.3/modules/highgui/src/cap_qt.cpp:616: warning: unused parameter ‘value’ [-Wunused-parameter]
/OpenCV-2.4.3/modules/highgui/src/cap_qt.cpp:853: error: ‘SGChannel’ was not declared in this scope
/OpenCV-2.4.3/modules/highgui/src/cap_qt.cpp:853: error: expected primary-expression before ‘raw_data’
/OpenCV-2.4.3/modules/highgui/src/cap_qt.cpp:853: error: expected primary-expression before ‘long’
/OpenCV-2.4.3/modules/highgui/src/cap_qt.cpp:853: error: expected primary-expression before ‘long’
/OpenCV-2.4.3/modules/highgui/src/cap_qt.cpp:853: error: expected primary-expression before ‘long’
/OpenCV-2.4.3/modules/highgui/src/cap_qt.cpp:853: error: expected primary-expression before ‘,’ token
/OpenCV-2.4.3/modules/highgui/src/cap_qt.cpp:853: error: expected primary-expression before ‘short’
/OpenCV-2.4.3/modules/highgui/src/cap_qt.cpp:853: error: expected primary-expression before ‘long’
/OpenCV-2.4.3/modules/highgui/src/cap_qt.cpp:853: error: initializer expression list treated as compound expression
/OpenCV-2.4.3/modules/highgui/src/cap_qt.cpp:854: error: expected ‘,’ or ‘;’ before ‘{’ token
/OpenCV-2.4.3/modules/highgui/src/cap_qt.cpp:238: warning: ‘int icvClose_QT_Movie(CvCapture_QT_Movie*)’ defined but not used
/OpenCV-2.4.3/modules/highgui/src/cap_qt.cpp:261: warning: ‘double icvGetProperty_QT_Movie(CvCapture_QT_Movie*, int)’ defined but not used
/OpenCV-2.4.3/modules/highgui/src/cap_qt.cpp:328: warning: ‘int icvSetProperty_QT_Movie(CvCapture_QT_Movie*, int, double)’ defined but not used
/OpenCV-2.4.3/modules/highgui/src/cap_qt.cpp:438: warning: ‘int icvGrabFrame_QT_Movie(CvCapture_QT_Movie*)’ defined but not used
/OpenCV-2.4.3/modules/highgui/src/cap_qt.cpp:481: warning: ‘const void* icvRetrieveFrame_QT_Movie(CvCapture_QT_Movie*, int)’ defined but not used
/OpenCV-2.4.3/modules/highgui/src/cap_qt.cpp:98: warning: ‘CvCapture_QT_Movie* icvCaptureFromFile_QT(const char*)’ defined but not used
/OpenCV-2.4.3/modules/highgui/src/cap_qt.cpp:572: warning: ‘int icvOpenCamera_QT(CvCapture_QT_Cam*, int)’ declared ‘static’ but never defined
/OpenCV-2.4.3/modules/highgui/src/cap_qt.cpp:573: warning: ‘int icvClose_QT_Cam(CvCapture_QT_Cam*)’ declared ‘static’ but never defined
/OpenCV-2.4.3/modules/highgui/src/cap_qt.cpp:609: warning: ‘double icvGetProperty_QT_Cam(CvCapture_QT_Cam*, int)’ defined but not used
/OpenCV-2.4.3/modules/highgui/src/cap_qt.cpp:616: warning: ‘int icvSetProperty_QT_Cam(CvCapture_QT_Cam*, int, double)’ defined but not used
/OpenCV-2.4.3/modules/highgui/src/cap_qt.cpp:576: warning: ‘int icvGrabFrame_QT_Cam(CvCapture_QT_Cam*)’ declared ‘static’ but never defined
/OpenCV-2.4.3/modules/highgui/src/cap_qt.cpp:577: warning: ‘const void* icvRetrieveFrame_QT_Cam(CvCapture_QT_Cam*, int)’ declared ‘static’ but never defined
/OpenCV-2.4.3/modules/highgui/src/cap_qt.cpp:586: warning: ‘CvCapture_QT_Cam* icvCaptureFromCam_QT(int)’ defined but not used
/OpenCV-2.4.3/modules/highgui/src/cap_qt.cpp:853: warning: ‘icvDataProc_QT_Cam’ defined but not used
make[2]: *** [modules/highgui/CMakeFiles/opencv_highgui.dir/src/cap_qt.cpp.o] Error 1
make[1]: *** [modules/highgui/CMakeFiles/opencv_highgui.dir/all] Error 2
make: *** [all] Error 2 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-05T23:02:08.973

[我报告了这个问题](http://code.opencv.org/issues/2726)，但现在我认为它可能特定于我的系统，我将尝试执行更多测试以清除它。

无论如何，这是我必须解决的问题：

编辑**modules/highgui/src/cap_qtkit.mm**并跳转到第 313 行查看实现：

```
int CvCaptureCAM::startCaptureDevice(int cameraNum) { 
```

我们将对此方法进行更改，因此请找到以下块：

```
if (cameraNum >= 0) { 
    int nCameras = [devices count];
    if( cameraNum < 0 || cameraNum >= nCameras )   
        return 0;
    device = [devices objectAtIndex:cameraNum] ;
} else {
    device = [QTCaptureDevice defaultInputDeviceWithMediaType:QTMediaTypeVideo]  ;
} 
```

并将其**替换**为：

```
if (cameraNum >= 0) { 
    int nCameras = [devices count];
    if( cameraNum > nCameras )
        return 0;
    cameraNum--;
    device = [devices objectAtIndex:cameraNum] ;
} else {
    device = [QTCaptureDevice defaultInputDeviceWithMediaType:QTMediaTypeVideo]  ;
} 
```

重新编译 OpenCV，别忘了在你的系统上再次安装它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-02-07T20:14:48.103

只需重新启动相机即可解决问题。 `sudo killall VDCAssistant`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-10-23T04:03:15.863

我有同样的问题，我没有找到任何解决方案。通过反复试验，我发现我的`OpenCV`版本已损坏。结果，我删除了它并安装了一个新的。您可以使用以下两个选项之一： **1\. 终端** 运行`brew uninstall opencv3`卸载`opencv` 然后使用`sudo apt-get install libopencv-dev python-opencv`命令安装它。

**2\. Anaconda** 其实我是用这个方法来解决我自己的问题的。

1.  打开蟒蛇
2.  转到环境部分并按如下方式选择您的环境： [![在此处输入图像描述](../Images/69c903349ea8b8f1e00cd30c51af0315.png)](https://i.stack.imgur.com/kksbX.png) 然后单击已安装并搜索`opencv`： [![在此处输入图像描述](../Images/109580ee1ee162d667e664647de64e25.png)](https://i.stack.imgur.com/NAVhf.png) 选择`opencv`包并卸载它。`opencv`然后尝试通过选择未安装并搜索来重新安装`opencv`。小心安装正确的版本。 [![在此处输入图像描述](../Images/cc82798c5765db30b0f32d1bde6fb552.png)](https://i.stack.imgur.com/qlyED.png)

# linux - 网络/url 日志记录 Linux

> ID：14451247
> 
> 赞同：0
> 
> 时间：2013-01-22T03:44:15.537
> 
> 标签：linux, networking

在互联网上进行了一些研究后，我找不到适合我任务的工具。我正在寻找一个基于 linux 的网络工具，例如 iptraf，但能够查看确切请求的 url（进出）。

先感谢您！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T06:23:43.700

在 linux 上，您可以使用该`tcpdump`命令将流量（包括所有数据）捕获到文件中。

# jquery - 具有视差、最大宽度技巧的流体图像未按预期工作

> ID：14451249
> 
> 赞同：0
> 
> 时间：2013-01-22T03:44:29.050
> 
> 标签：jquery, css, parallax

我正在使用本教程中的说明构建视差站点：http: [//f6design.com/journal/2011/08/06/build-a-parallax-scrolling-website-interface-with-jquery-and-css/](http://f6design.com/journal/2011/08/06/build-a-parallax-scrolling-website-interface-with-jquery-and-css/)

教程的演示版在这里：http: [//f6design.com/projects/parallax-scrolling/](http://f6design.com/projects/parallax-scrolling/)

我认为不需要包含我自己的代码，因为我认为我只是错过了“**流体图像**”的一个大概念......据我所知，只需`max-width:100%`在所有内容中添加一个“”，就可以将图像变成液体页面上的图像。所以`img {max-width:100%}`。现在理论上这应该可以工作，只要宽度不超过其容器的**宽度......**

回到以下示例： http: [//f6design.com/projects/parallax-scrolling/](http://f6design.com/projects/parallax-scrolling/) ...为什么`max-width:100%`向图像添加“”不会产生流畅的图像？

我在这里错过了一个基本概念吗？

您可以在此处查看我正在构建的示例站点：http: [//alvarenga.co/liquid/index.html](http://alvarenga.co/liquid/index.html)

本质上，当你缩小页面时——蛇和视差背景元素也会按比例缩小……因此需要流畅的图像。

先谢谢了...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T04:22:20.573

这比仅使用`max-width`. 要使用视口（浏览器窗口）调整视差图像的大小，而不超出其自然大小，请尝试以下操作：

```
#parallax-bg3 {
    position: fixed;
    top: 0;
    width: 100%;
    z-index: 3;
}
#bg3-1 {
    margin: 0 auto;
    max-width: 1920px;
    position: relative;
    top: -111px;
    width: 100%;
} 
```

上面的 CSS 专门用于您的示例代码 (HTML)。基本上，这就是正在发生的事情：

*   `#parallex-bg3`您有一个具有流体宽度的容器 div `100%`。
*   您`#bg3-1`在容器`div`中有一个图像，其流体宽度为`100%`且`max-width`等于图像的自然宽度。此外，您必须`margin: 0 auto`将图像居中*（一旦图像达到其最大宽度，否则它将在容器 div 中左对齐）*。

当视口调整大小时，div 调整大小以 100% 填充窗口，然后图像也将调整大小以填充 div 100%。div 和 image 永远不会超过`1920px`，因此您的图像不会变得太大。真的，你不需要`max-width`在图像上设置，只需要在容器上设置`div`。我添加它是为了很好的衡量。但是如果容器 div 永远不会大于 1920px，那么图像也不会（因为它的宽度是 100%）。

# vb.net - 调用嵌入字体到标签中

> ID：14451251
> 
> 赞同：1
> 
> 时间：2013-01-22T03:44:32.313
> 
> 标签：vb.net, visual-studio-2010, fonts

嘿，我正试图将我的嵌入式字体**AbrahamLincoln**调用到我的标签中，尽管当我运行程序时它永远不会改变字体......

```
Private Sub slackerR_Load(sender As System.Object, e As System.EventArgs) Handles MyBase.Load
    Dim sMyFonts As String() = {"AbrahamLincoln.ttf"}
    Dim fEmbedded As New Font(GetFont(sMyFonts).Families(0), 10)
    Label1.Font = fEmbedded
End Sub

Public Function GetFont(ByVal FontResource() As String) As Drawing.Text.PrivateFontCollection
    'Get the namespace of the application    
    Dim NameSpc As String = Reflection.Assembly.GetExecutingAssembly().GetName().Name.ToString()
    Dim FntStrm As IO.Stream
    Dim FntFC As New Drawing.Text.PrivateFontCollection()
    Dim i As Integer
    For i = 0 To FontResource.GetUpperBound(0)
        'Get the resource stream area where the font is located
        FntStrm = Reflection.Assembly.GetExecutingAssembly().GetManifestResourceStream(NameSpc + "." + FontResource(i))
        'Load the font off the stream into a byte array 
        Dim ByteStrm(CType(FntStrm.Length, Integer)) As Byte
        FntStrm.Read(ByteStrm, 0, Int(CType(FntStrm.Length, Integer)))
        'Allocate some memory on the global heap
        Dim FntPtr As IntPtr = Runtime.InteropServices.Marshal.AllocHGlobal(Runtime.InteropServices.Marshal.SizeOf(GetType(Byte)) * ByteStrm.Length)
        'Copy the byte array holding the font into the allocated memory.
        Runtime.InteropServices.Marshal.Copy(ByteStrm, 0, FntPtr, ByteStrm.Length)
        'Add the font to the PrivateFontCollection
        FntFC.AddMemoryFont(FntPtr, ByteStrm.Length)
        'Free the memory
        Runtime.InteropServices.Marshal.FreeHGlobal(FntPtr)
    Next
    Return FntFC
End Function 
```

我已经尝试过**{"AbrahamLincoln.ttf"}**和**{"AbrahamLincoln"}**并且都不起作用。

使用 VB.net 2010。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-02-03T06:30:12.270

这对你来说可能是一种更简单的方法......

将字体放入您的资源中。

添加这样的模块：（更改“My.Resources.[your resource name]”下方的资源名称）

```
Module agencyFontNormal
Private _pfc As PrivateFontCollection = Nothing
Public ReadOnly Property GetInstance(ByVal Size As Single, ByVal style As FontStyle) As Font
    Get
        If _pfc Is Nothing Then LoadFont()
        Return New Font(_pfc.Families(0), Size, style)
    End Get
End Property
Private Sub LoadFont()
    Try
        _pfc = New PrivateFontCollection
        Dim fontMemPointer As IntPtr = Marshal.AllocCoTaskMem(My.Resources.AGENCYNORMAL.Length)
        Marshal.Copy(My.Resources.AGENCYNORMAL, 0, fontMemPointer, My.Resources.AGENCYNORMAL.Length)
        _pfc.AddMemoryFont(fontMemPointer, My.Resources.AGENCYNORMAL.Length)
        Marshal.FreeCoTaskMem(fontMemPointer)
    Catch ex As Exception
    End Try
End Sub
End Module 
```

通过以下方式致电：

```
Dim ff As Font = agencyFontNormal.GetInstance(12, FontStyle.Regular) 
```

# php - 从 php.net 获取范围解析运算符示例以在 PHP 5.2.17 上运行

> ID：14451267
> 
> 赞同：0
> 
> 时间：2013-01-22T03:46:40.313
> 
> 标签：php

我只是第一次在 PHP 中发现**范围解析运算符**，所以我试图了解它们是如何工作的。[我在 php.net 页面上查看了示例 #1](http://php.net/manual/en/language.oop5.paamayim-nekudotayim.php)，并确保我使用的是 PHP5.2+，**但是当我运行代码时：**

```
<?php
class MyClass {
    const CONST_VALUE = 'A constant value';
}

$classname = 'MyClass';
echo $classname::CONST_VALUE; // As of PHP 5.3.0

echo MyClass::CONST_VALUE;
?> 
```

**但是，我收到以下错误：**

> 解析错误：语法错误，意外的 T_PAAMAYIM_NEKUDOTAYIM，期待 ',' 或 ';' 在第 7 行的 /var/www/temp/scope.php 中

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T04:06:37.137

没有意识到代码只适用于 PHP5.3+，我升级了，一切正常。

# php - PHP 从目录中插入文件

> ID：14451270
> 
> 赞同：0
> 
> 时间：2013-01-22T03:47:07.740
> 
> 标签：php, file, insert

我已经通过 FTP 在目录中上传文件，现在我尝试将该文件保存到数据库中并删除 FTP 目录中的文件...这是我的代码

```
$myimage = "C:\upload\satu.xml";;
$image = file_get_contents($myimage);
$content=addslashes($image);

$conn = oci_connect('ARTERI','password','192.168.1.1/Mutual');
$stid = oci_parse($conn, "INSERT INTO MMSHOSPITAL.HASIL_PEMERIKSAAN (ID, ID_REGISTRASSI, ID_UNIT_LAYANAN, CONTENT)".
                         "VALUES('1', '172', 'ACT', '".$content."') ");
oci_execute($stid);
oci_close($conn); 
```

请帮助我...该代码无法将文件保存在我的数据库表中..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T03:51:36.327

```
$myimage = "C:\upload\satu.xml";
$image = is_file($myimage);//this return true of false
$content=file_get_contents($myimage);//this reads the content of file as string 
```

# oauth-2.0 - Force.com Apex 代码生成 Google API oAuth 2.0 JWT

> ID：14451274
> 
> 赞同：1
> 
> 时间：2013-01-22T03:47:27.860
> 
> 标签：oauth-2.0, apex-code, jwt

我正在尝试在 Force.com 上的 Apex 中生成 JWT，但不断收到 400“错误”：“invalid_grant”。我尝试了许多变体，但无法得到有效的响应。我的clientEmailAddress 是正确的（例如##@developer.gserviceaccount.com）。我使用 openSSL 提取了我的私钥的值。我根据板上的其他帖子编写了一个 base64URL 编码的方法。任何帮助将不胜感激。

```
public static String base64URLencode(Blob input){
    String output = encodingUtil.base64Encode(input);
    output = output.replace('+', '-');
    output = output.replace('/', '_');
    while ( output.endsWith('=')){
        output = output.subString(0,output.length()-1);
    }
    return output;
}

public static void generateJWT(){
    Long rightNow = (dateTime.now().getTime()/1000)+1;

    JSONGenerator gen = JSON.createGenerator(false);
    gen.writeStartObject();
    gen.writeStringField('iss',clientEmailAddress);
    gen.writeStringField('scope','https:\\/\\/www.googleapis.com\\/auth\\/prediction');
    gen.writeStringField('aud','https:\\/\\/accounts.google.com\\/o\\/oauth2\\/token');
    gen.writeNumberField('exp',rightNow+300);       
    gen.writeNumberField('iat',rightNow);
    String claimSet = gen.getAsString().trim();

    String header = '{"alg":"RS256","typ":"JWT"}';
    String signatureInput = base64URLencode(blob.valueOf(header))+'.'+base64URLencode(blob.valueOf(claimSet));

    Blob signature = crypto.sign('RSA', blob.valueOf(signatureInput), encodingUtil.base64decode(privatekey));

    String jwt = signatureInput+'.'+base64URLencode(signature);

    http h = new http();
    httpRequest req = new httpRequest();
    req.setHeader('Content-Type','application/x-www-form-urlencoded');
    req.setMethod('POST'); 
    req.setBody('grant_type='+encodingUtil.urlEncode('urn:ietf:params:oauth:grant-type:jwt-bearer','UTF-8')+'&assertion='+encodingUtil.urlEncode(jwt,'UTF-8'));
    req.setEndpoint('https://accounts.google.com/o/oauth2/token');
    httpResponse res = h.send(req);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-12-17T14:46:02.313

我认为方法名称是 Base64encode 但不是 base64urlencode

# etl - 表输入从步骤中插入数据

> ID：14451276
> 
> 赞同：2
> 
> 时间：2013-01-22T03:47:42.153
> 
> 标签：etl, pentaho

当我使用表输入并从步骤中插入数据来替换时？在 sql 中。

例如，

`select * from a where b in (?)`.

从mysql日志，sql是`select * from a where b in ('0,1,2,3')`

没有'如何使它执行？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T20:33:33.413

我看到了三种可能的方法。我猜你最喜欢选项“C”。

A）如果您知道您的 IN 子句始终只有 4 个值，您可以通过将 4 个值存储在 Job 变量中并使用 Get Variables 步骤将它们读入单行，然后将该行流入数据库查找来做到这一点步骤，其 SQL 如下所示：

`select * from a where b in (?, ?, ?, ?)`

并替换单个传入行中的值。

B）如果您有可变数量的值，我会考虑将值列表规范化为行，也许使用“将字段拆分为行”步骤，使用“添加常量”将“找到”值添加到每一行，然后将它们流入流查找。然后在 Stream Lookup 之后，将所有“找到”值为空的行流到 Dummy 步骤。

C) 在 Job 中构建您的值列表并将其作为变量传递。在您的表输入步骤中，使用如下语句：

```
select * from a where b in (${varname}) 
```

并检查“替换变量脚本”。该变量将在执行之前扩展为 SQL。

# oracle - 用于解析列值连接的 Oracle 查询

> ID：14451279
> 
> 赞同：0
> 
> 时间：2013-01-22T03:48:18.687
> 
> 标签：oracle, oracle10g, oracle11g

我在一个表中有三列

```
Column names with datatypes
First_week - Number 
Days       - Number
Second_week- Number

Column Values
8
6
11 
```

我想连接这些值，使得结果返回 8/6/11 如果任何列值为空，则连接必须为 8/-/11 如果全部为空，则结果必须为 -/-/- 这怎么可能在oracle查询中实现？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T04:05:49.663

为此，您可以使用`decode`,`nvl`函数或`case`表达式。下面是一个使用示例`decode`：

```
with your_table(First_week, Days, Second_week) as(
  select 8, 6, 11      from dual union all
  select 5, null, 12   from dual union all
  select null, 7, null from dual union all
  select null, null, null from dual
  )
select decode(to_char(First_week), null, '-', to_char(First_week)) || '/' ||
       decode(to_char(Days), null, '-', to_char(Days))             || '/' ||
       decode(to_char(Second_week), null, '-', to_char(Second_week)) as result
  from your_table

RESULT
---------
8/6/11
5/-/12
-/7/-
-/-/- 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T03:56:55.107

[http://www.techonthenet.com/oracle/functions/coalesce.php](http://www.techonthenet.com/oracle/functions/coalesce.php)

“在 Oracle/PLSQL 中，coalesce 函数返回列表中的第一个非 null 表达式。如果所有表达式的计算结果为 null，则 coalesce 函数将返回 null。”

[http://docs.oracle.com/cd/B19306_01/server.102/b14200/operators003.htm#i997789](http://docs.oracle.com/cd/B19306_01/server.102/b14200/operators003.htm#i997789)

"|| 连接字符串和 CLOB 数据。"

现在我们有了所有的构建块来编写类似的东西：

COALESCE(First_week, '-') || '/' || 合并（天，'-'）|| '/' || COALESCE(Second_week, '-')

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-22T07:39:13.730

那这个呢

```
SELECT    NVL (TO_CHAR (FIRST_WEEK), '-')
       || '/'
       || NVL (TO_CHAR (DAYS), '-')
       || '/'
       || NVL (TO_CHAR (SECOND_WEEK), '-')
  FROM YOUR_TABLE 
```

# ios - iOS 运行时异常

> ID：14451285
> 
> 赞同：1
> 
> 时间：2013-01-22T03:49:03.137
> 
> 标签：ios, uiviewcontroller, crash, storyboard

我正在创建一个带有故事板和 ARC 的 iOS 6 应用程序。然而我收到了这个运行时异常：

```
Terminating app due to uncaught exception 'NSUnknownKeyException', reason: '[<ViewController 0x71b4c00> setValue:forUndefinedKey:]: this class is not key value coding-compliant for the key switchButton.'
*** First throw call stack:
(0x1c8e012 0x10cbe7e 0x1d16fb1 0xb78711 0xaf9ec8 0xaf99b7 0xb24428 0x2300cc 0x10df663 0x1c8945a 0x22ebcf 0xf3e37 0xf4418 0xf4648 0xf4882 0x43a25 0x43dbf 0x43f55 0x4cf67 0x10fcc 0x11fab 0x23315 0x2424b 0x15cf8 0x1be9df9 0x1be9ad0 0x1c03bf5 0x1c03962 0x1c34bb6 0x1c33f44 0x1c33e1b 0x117da 0x1365c 0x25dd 0x2505)
libc++abi.dylib: terminate called throwing an exception
(lldb) 
```

在出现“switchButton”之前，但我已将其从 GUI 中删除，但它仍指向它。我也对项目进行了清理。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T03:59:38.933

已通过从 Outlets 面板中移除 switchButton 来修复。

# php - isset 不修正使用未定义的常量

> ID：14451286
> 
> 赞同：0
> 
> 时间：2013-01-22T03:49:17.063
> 
> 标签：php

> **可能重复：**
> [PHP 错误消息“注意：使用未定义的常量”是什么意思？](https://stackoverflow.com/questions/2941169/what-does-the-php-error-message-notice-use-of-undefined-constant-mean)

加载此函数时收到“使用未定义常量”消息：

```
function awp_get_options($i){
  $i[selects][] =  'special_effects';
  $i[radios][] =  array('js_library','sack');                   
  $i[selects][] = 'effects';
  $i[checkboxes][] = 'no_load_library';

 return $i;
} 
```

我将其更改为：

```
function awp_get_options($i){
 if(isset( $i[selects] )){
    $i[selects][] = 'special_effects';
    $i[selects][] = 'effects';
 }
 if(isset( $i[radios] ))
   $i[radios][] =  array('js_library','sack');

 if(isset( $i[radios] )) 
   $i[checkboxes][] = 'no_load_library';

 return $i;
} 
```

它仍然说使用未定义的常量。如何更正此代码？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T03:52:01.073

```
function awp_get_options($i){
  $i['selects'][] =  'special_effects';
  $i['radios'][] =  array('js_library','sack');                   
  $i['selects'][] = 'effects';
  $i['checkboxes'][] = 'no_load_library';

 return $i;
} 
```

剩下的取决于`$i`函数的类型。现在其他是正确的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T03:50:32.443

为您的数组键添加引号，例如：

```
$i[selects] 
```

到

```
$i["selects"] 
//or 
$i['selects'] 
```

# cocos2d-iphone - cocos2d如何加载加载场景背景而不出现空白？

> ID：14451291
> 
> 赞同：0
> 
> 时间：2013-01-22T03:49:42.410
> 
> 标签：cocos2d-iphone, sprite-sheet

我有一个`cocos2d`游戏，它有一个加载场景，我们加载了一堆资产。游戏以启动画面开始，然后启动加载场景。加载场景从加载背景开始，因此用户在加载资产时会看到加载场景背景。

`CCSprite::spriteWithFile:`我通过调用并传递文件路径来加载加载场景背景：`loadingbackground.pvr.ccz`

它似乎在不同设备上的工作方式不同：

1.  在 iphone (3gs) 模拟器上，我看到了预期的加载场景。
2.  在 iphone 视网膜模拟器上，我看不到加载场景（还没有很多资产，所以可能很快就会发生），它直接进入主菜单场景。
3.  在ipad 3设备上，闪屏出现，然后黑屏半秒，然后出现主菜单场景。

我想看看我能做些什么来避免 iPad 3 上出现黑屏。我怀疑这是因为加载加载背景所花费的时间。

我尝试了以下优化（主要基于@Steffen[关于内存优化的博客文章](http://www.learn-cocos2d.com/2012/11/optimize-memory-usage-bundle-size-cocos2d-app/)）：

1.  将加载背景（最初为 2.3 MB RGB8 png 文件）单独移动到 pvr.ccz spritesheet 中，将其大小减小到 1.8 MB。
2.  使用后不久从纹理中删除了图像。

我仍然在 iPad 3 上看到黑屏。有什么建议吗？

更新：发现问题 - 我有一些代码在其中覆盖`OnEnter`并调用`[[CCDirector sharedDirector]replaceScene]`它，并且还从后台线程调用相同的代码。删除了 OnEnter 重载，它工作时没有闪烁。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T09:14:39.917

忽略模拟器中发生的任何事情。这无关紧要，专注于设备。

当加载场景初始化并添加加载场景的背景时，请确保您安排更新并在更新方法中加载资产。否则，如果您在 init 中加载资产，则不会绘制背景，因为您在 cocos2d 重绘屏幕之前加载了所有资产。

如果这仍然失败，只需将访问消息发送到背景精灵，然后是 [[CCDirector sharedDirector] drawScene]。这会强制重绘场景。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T10:38:24.043

这是 cocos2d-iphone 还是 cocos2d-x ？确保标签正确:)

我认为您指的是启动闪烁，有几种方法可以避免这种情况。首先，您需要确保正确处理 iOS 6 和 iOS 5 及更低版本的 rootViewController，每个版本都有一些小的变化。

你可以在这里找到一点参考：http: [//www.cocos2d-iphone.org/forum/topic/34471](http://www.cocos2d-iphone.org/forum/topic/34471)

第二件事你需要知道模拟器的行为是不稳定的，你应该总是依赖真实的设备进行测试，但很可能你仍然会遇到闪烁问题。

抱歉，我没有提供示例代码，但您没有提供足够的信息来了解这里的真正问题。

# php - 如何在codeigniter中进行否定形式验证？

> ID：14451297
> 
> 赞同：6
> 
> 时间：2013-01-22T03:50:54.657
> 
> 标签：php, forms, codeigniter, validation

`is_unique`是不允许值存在于数据库中的表单验证。但是，我可以做相反的事情吗？例如，我想需要数据库中存在的值，所以，我制定这样的规则：

```
$this->form_validation->set_rules('email', 'Email', 'required|max_length[32]|valid_email|(!(is_unique[users.email]))'); 
```

但它似乎没有像我预期的那样成功，有什么建议吗？谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-22T04:54:25.190

`MY_Form_validation.php`通过在您的文件夹中添加一个类来扩展 Form_validation 库`/application/core`（假设您的子类前缀是`MY`，它具有默认设置。这是一个简单的示例，它只是`is_unique`通过将最后一行从`return $query->num_rows() === 0;`.

```
class MY_Form_validation extends Form_validation
{
    /**
     * Match one field to others
     *
     * @access  public
     * @param   string
     * @param   field
     * @return  bool
     */
    public function is_not_unique($str, $field)
    {
        list($table, $field)=explode('.', $field);
        $query = $this->CI->db->limit(1)->get_where($table, array($field => $str));

        return $query->num_rows() > 0;
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-22T06:12:52.407

你可以这样做

```
$this->form_validation->set_rules('email', 'Email', 'required|max_length[32]|valid_email|callback_email_available'); 
```

控制器方法

```
public function email_available($str)
{
    // You can access $_POST variable
    $this->load->model('mymodel');
    $result =   $this->mymodel->emailAvailability($_POST['email']);
    if ($result)
    {
        $this->form_validation->set_message('email_available', 'The %s already exists');
        return FALSE;
    }else{
        return TRUE;
    }
} 
```

模型 mymodel.php

```
public function emailAvailability($email)
{
    $this->db->where('email',$email);
    $query  =   $this->db->get('tablename');
    return $query->row();
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-22T06:06:57.027

试试你自己的回调函数

```
$this->form_validation->set_rules('email', 'Email', 'required|max_length[32]|valid_email|callback_email_check'); 
```

功能将是这样的

```
public function email_check($str)
    {
        if ($str == 'test@test.com')
        {
            $this->form_validation->set_message('email_check', 'The %s field can not be the word "test@test.com"');
            return FALSE;
        }
        else
        {
            return TRUE;
        }
    } 
```

# .net - WPF xaml 中的树视图标题

> ID：14451313
> 
> 赞同：0
> 
> 时间：2013-01-22T03:53:19.787
> 
> 标签：.net, wpf, xaml, treeview

我的 wpf 应用程序中有一个树视图，它动态绑定来自我的视图模型的数据。

```
<TreeView Grid.Column="0"
          Grid.Row="0"
          ItemsSource="{Binding Main}"
          HorizontalAlignment="Stretch"
          Name="treeView1"
          VerticalAlignment="Stretch"
          Height="auto"
          Width="auto"
          SelectedItemChanged="treeView1_SelectedItemChanged"
          HorizontalContentAlignment="Stretch"
          VerticalContentAlignment="Top"
          Margin="0,0,5,5">
  <TreeView.ItemContainerStyle>
    <Style TargetType="{x:Type TreeViewItem}">
      <Setter Property="IsExpanded"
              Value="{Binding IsExpanded, Mode=TwoWay}" />
      <Setter Property="IsSelected"
              Value="{Binding IsSelected, Mode=TwoWay}" />
      <Setter Property="FontWeight"
              Value="Normal" />
      <Style.Triggers>
        <Trigger Property="IsSelected"
                 Value="True">
          <Setter Property="FontWeight"
                  Value="Bold" />
        </Trigger>
      </Style.Triggers>
    </Style>
  </TreeView.ItemContainerStyle>
  <TreeView.Resources>
    <HierarchicalDataTemplate DataType="{x:Type local:MViewModel}"
                              ItemsSource="{Binding Children}">
      <StackPanel Orientation="Horizontal">
        <TextBlock Text="{Binding Mname}" />
      </StackPanel>
    </HierarchicalDataTemplate>
    <HierarchicalDataTemplate DataType="{x:Type local:FViewModel}"
                              ItemsSource="{Binding Children}">
      <StackPanel Orientation="Horizontal">
        <TextBlock Text="{Binding FName}" />
      </StackPanel>
    </HierarchicalDataTemplate>
    <HierarchicalDataTemplate DataType="{x:Type local:CViewModel}"
                              ItemsSource="{Binding Children}">
      <StackPanel Orientation="Horizontal">
        <TextBlock Text="{Binding Com}" />
      </StackPanel>
    </HierarchicalDataTemplate>
    <DataTemplate DataType="{x:Type local:LViewModel}">
      <StackPanel Orientation="Horizontal">
        <TextBlock Text="{Binding Lo}" />
      </StackPanel>
    </DataTemplate>
  </TreeView.Resources>
</TreeView> 
```

我需要将标题添加到整个树视图中，说“家庭”，其子项是上述树视图元素。如何将标题添加到整个 treeview.so 当我单击该标题时，它应该显示所有 Mname 等等。请帮我解决这个问题。

编辑：

我用过

```
 <HierarchicalDataTemplate  DataType="{x:Type TextBlock}" ItemsSource="{Binding Children}">
                        <StackPanel Orientation="Horizontal">
                            <TextBlock Text="Family" />
                        </StackPanel>
  </HierarchicalDataTemplate> 
```

在我的 TreeviewResource 中。但我仍然无法为树分配父级。

编辑2：

```
<TreeView>
   <TreeViewItem ItemsSource="{Binding Main}" Header="Family">
      <TreeViewItemContainerStyle>
      //..
      </TreeViewItemContainerStyle>
      <TreeView.Resources>
      //..
      </TreeView.Resources>
   </TreeViewItem>
</TreeView> 
```

它的显示错误。

但是当我喜欢下面的时候，

```
<TreeView>
       <TreeViewItemContainerStyle>
      //..
      </TreeViewItemContainerStyle>
      <TreeView.Resources>
      //..
      </TreeView.Resources>
   <TreeViewItem ItemsSource="{Binding Main}" Header="Family"/>
</TreeView> 
```

根项目已设置。但只显示第一组孩子。子元素的子元素不显示。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T04:25:00.477

您可以使用**Expander**元素包装**TreeView ：**

 **```
<Expander Header="Family">
    <TreeView>
        ...
    <TreeView>
</Expander> 
```

但是从您的问题中不清楚您想将哪个元素用作`Header`.

**编辑：**

因此，如果您需要树的根元素，可以在**xaml**中显式添加它：

```
<TreeView> <!--ItemsSource you should set on a TreeViewItem-->
    <TreeViewItem ItemsSource="{Binding Main}" Header="Family">
        <TreeViewItem.ItemContainerStyle>
            ...
        </TreeViewItem.ItemContainerStyle>
        <TreeViewItem.Resources>
            ...
        </TreeViewItem.Resources>         
    </TreeViewItem>
<TreeView> 
```**

# ios - 应该使用哪些滚动视图和图像视图设置在 iOS 中显示可缩放图片？

> ID：14451315
> 
> 赞同：0
> 
> 时间：2013-01-22T03:53:33.940
> 
> 标签：ios, uiscrollview, uiimageview, zooming

尝试在滚动视图内放大图像视图中的 png 时，我遇到了一些奇怪的行为。我认为我在实用程序窗格中设置了错误的约束或设置。如果我想先看到整个图片然后放大，它们应该是什么？

图像渲染，但是当我尝试捏放大和缩小时，只有图片的高度变大或变小，宽度停留在 iPhone 屏幕宽度。但是，如果我玩够了，我可以进一步放大，但一切都会扭曲和旋转。任何想法我做错了什么？

这是我现在在 View Controller 实现文件中的代码：

```
@interface ZooViewController ()
@property (weak, nonatomic) IBOutlet UIImageView *imageView;
@property (weak, nonatomic) IBOutlet UIScrollView *scrollView;
@end

@implementation ZooViewController
@synthesize imageView;
@synthesize scrollView;

-(void)viewDidLoad
{
    [super viewDidLoad];

    [self.imageView setContentMode:UIViewContentModeScaleAspectFit];

    self.scrollView.contentSize = self.imageView.image.size;
    self.imageView.frame = CGRectMake(0, 0, self.imageView.image.size.width,     self.imageView.image.size.height);

}

-(UIView *) viewForZoomingInScrollView:(UIScrollView *)scrollView{

    return self.imageView;
}

-(void)didReceiveMemoryWarning
{

    [super didReceiveMemoryWarning];

}

-(void)viewDidUnload{

    [self setImageView:nil];
    [self setScrollView:nil];
    [super viewDidUnload];
}

@end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T04:17:14.210

首先将图像内容模式设置为 UIViewContentModeScaleAspectFit

```
[self.imageView setContentMode:UIViewContentModeScaleAspectFit]; 
```

之后设置滚动视图内容大小

```
self.scrollView.contentSize = self.areaImageView.frame.size; 
```

不要忘记设置滚动视图代表

```
 // For supporting zoom,
 scrollView.minimumZoomScale = 0.5;
 scrollView.maximumZoomScale = 2.0;

 ...

 // Implement a single scroll view delegate method
 - (UIView*)viewForZoomingInScrollView:(UIScrollView *)aScrollView {
   return imageView;
  } 
```

# bash - 通过 Makefile 为我的脚本创建别名

> ID：14451317
> 
> 赞同：0
> 
> 时间：2013-01-22T03:53:48.797
> 
> 标签：bash, shell, makefile, command-line-interface, alias

`~/.bash_aliases`我想知道是否有任何方法可以通过 Makefile在用户上设置别名。

假设我有一个名为的 bash 脚本`foo.sh`，它会打印您传递给它的内容。例如：

**输入**
`sh foo.sh bar`

**输出**
`bar`

现在，在我的 Makefile 上，我想要一个类似的东西：

```
install:
    @echo "alias foo=sh foo.sh $@" << ~/.bash_aliases 
```

因此，每次用户执行此操作时，`make install`它都会自动获得`foo`可用的别名。然后，我们不做最后一个输入，而是有类似的东西：

**输入**
`foo bar`

**输出**
`bar`

有谁知道是否可以做这样的事情？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T08:59:04.717

您确定要在用户`~/.bash_aliases`每次运行您的 Makefile 时添加同一行吗？

那些不使用 bash 而是使用另一个 shell 的用户呢，比如`zsh`？

那么其他用户呢？如果管理员键入`make install`，他们通常希望系统的每个用户都可以使用“安装”，而不仅仅是他们自己。

如果您只关心使您的脚本`foo.sh`可用`foo`，那么您可能应该安装一个名为`foo`.

```
install:
    $(INSTALL) foo.sh $(bindir)/foo 
```

顺便说一句，[Debian 政策](http://www.debian.org/doc/debian-policy/ch-files.html#s-scripts)要求在没有 .sh 扩展名的情况下安装脚本。我认为这是一个提示，通常不应该使用脚本后缀安装。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T04:09:45.120

关于什么：

```
install:
    @echo "alias foo=foo.sh" >> ~/.bash_aliases 
```

# function - 如何让OCaml函数返回一个包含字符串和函数的元组？

> ID：14451320
> 
> 赞同：1
> 
> 时间：2013-01-22T03:54:13.030
> 
> 标签：function, ocaml, return-value

最终我想要的是 x 代表什么： `let x = (something, (myfunc1 para1));;` 这样调用时`x`，我得到一个元组，但调用时`(snd x) para`，我会得到一个返回值`myfunc1 para`。

我正在尝试的是这样的：

```
let myfunc2 para1 para2 = 
  let myfunc1 para2 = ... in
  ( (fst para1), (myfunc1 para2) );; 
```

我想这样打电话`myfunc2`： `let x = myfunc2 para1`得到我上面描述的。但是，我得到的只是一个函数，当使用 para1 调用时将返回一个常规元组，而不是一个`(something, function)`元组

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-22T07:43:40.450

您的定义中有一个无用的`para2`参数。正确的方法是：

```
let myfunc2 para1 = 
  let x = ... in
  let myfunc1 para2 = ... in
  ( x, myfunc1 );; 
```

但如果我们能谈谈一个具体的例子，那将会有所帮助。你误解了一些明显的东西，但我不知道是什么。

这是一个具体的例子。假设我们想要一个函数`f`，它接受一个数字`n`并返回一个对`(m, g)`，其中`m`是的平方`n`和`g`是一个添加`n`到其参数的函数：

```
let f n =
  let m = n * n in
  let g k = n + k in
    (m, g) 
```

或更短：

```
let f n = (n * n, fun k => n + k) 
```

现在要使用它，我们可以这样做：

```
let x = f 10 ;;
fst x ;; (* gives 100 *)
snd x ;; (* gives <fun> *)
snd x 5 ;; (* gives 15, and is the same thing as (snd x) 5 *) 
```

现在让我们考虑以下*错误*的解决方案，其中我们犯了您所犯的错误：

```
let f_bad n k =
  let m = n * n in
  let g k = n + k in
    (m, g k) 
```

现在`f_bad`想要两个论点。如果我们只给它一个，我们将不会得到一对，而是一个期待另一个参数的函数。当我们给它这个参数时，它会返回一对两个整数，因为这`(m, g k)`意味着“制作一对，其第一个分量是整数`m`，第二个分量`g` **应用于`k`**，所以它也是一个整数。”

另一点值得说明的是，您通过调用两个不同的事物来混淆自己`para2`。在我们的定义中，`f_bad`我们还通过调用两个不同的事物来混淆自己`k`。的`k`定义中出现的`g`和其他的不一样`k`。最好将两者`k`的不同事物称为：

```
let f_bad n k1 =
  let m = n * n in
  let g k2 = n + k2 in
    (m, g k1) 
```

现在，这有助于消除混乱吗？

# java - 如何为 java 发布 wsdl

> ID：14451322
> 
> 赞同：1
> 
> 时间：2013-01-22T03:54:43.877
> 
> 标签：java, web-services

我有以下 java 类并为它发布了一个 wsdl，我的问题是无论如何都有不同的 web 服务类并发布一个 wsdl？我的意思是另一个带有许多方法的单独类，或者我必须有一个 webservice 类作为应用程序的主类来保留所有 webmethod 方法并从中生成 wsdl？

```
package com.Services;

import javax.jws.WebService;
import javax.jws.WebMethod;

@WebService(name = "Hellos", targetNamespace = "http://localhost:8081/Mywebservice2/services/Hellos")
public class Hellos {

    @WebMethod
    public Customer[] mycustomers() {
    .....

    }

    @WebMethod
    public String Receiver(String name){
        ....
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T04:18:50.967

确切地说，这应该是您设计应用程序的方式。您应该有一个合并的 java 文件并且应该公开。应该给客户多个端点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T04:42:54.760

**WSDL**对应于您的服务，实际上每个公共方法对应于一个服务。您可以编写许多类和方法，但如果方法是私有的，它们将不会成为您的 wsdl 的一部分。

如果您使用任何 IDE 插件，那么它会在服务创建期间询问您希望向外部世界公开哪些公共方法。因此，在一个 java 项目中，您可以拥有任意数量的类或方法。最后，当您将项目转换为 Web 服务时，您可以决定哪些方法可以用作端点/服务，然后这些方法将成为您的**WSDL**的一部分。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-22T04:50:42.673

[`wsgen`](http://docs.oracle.com/javase/7/docs/technotes/tools/share/wsgen.html)从 JDK 1.6 开始，用于生成 de WSDL 文件的工具只需要**一个** *Service Endpoint Interface*或*SEI*。

```
wsgen [options] <SEI> 
```

你可以读到：

> wsgen 工具生成在 JAX-WS Web 服务中使用的 JAX-WS 可移植工件。该工具读取 Web 服务端点实现类 (SEI) 并生成 Web 服务部署和调用所需的所有工件

和：

> 请注意，您不必在开发时生成 WSDL，因为 JAXWS 运行时会在您部署服务时自动为您生成 WSDL。

另一方面，[WSDL 1.1](http://www.w3.org/TR/2002/WD-wsdl12-20020709/)支持在单个 WSDL 文件中包含多个服务，但这些服务共享类型。在这种情况下，最好将所有内容放在一项服务中。

# c# - 我应该将所有方法标记为虚拟吗？

> ID：14451325
> 
> 赞同：74
> 
> 时间：2013-01-22T03:54:56.427
> 
> 标签：c#, java, methods, virtual-functions

在 Java 中，您可以将方法标记为 final 以使其*无法*覆盖。

在 C# 中，您必须将方法标记为虚拟方法*才能*覆盖。

这是否意味着在 C# 中您应该将所有方法标记为虚拟（除了一些您不想被覆盖的方法），因为您很可能不知道您的类可以以何种方式被继承？

* * *

## 回答 #1

> 赞同：144
> 
> 时间：2013-01-22T04:07:51.887

> 在 C# 中，您必须将方法标记为虚拟方法才能覆盖。这是否意味着在 C# 中您应该将所有方法标记为虚拟（除了一些您不想被覆盖的方法），因为您很可能不知道您的类可以以何种方式被继承？

不，如果语言设计者认为 virtual 应该是默认值，那么**它就是默认值**。

可覆盖性是一种*特性*，并且与所有特性一样，它也有*成本*。可覆盖方法的成本相当高：设计、实现和测试成本很高，特别是如果对类有任何“敏感性”；虚拟方法是将未经测试的第三方代码引入系统并具有安全影响的方法。

如果你不知道你打算如何继承你的类，那么*不要发布你的类*，因为*你还没有完成设计它。*您的可扩展性模型绝对是您应该提前知道的；它应该深刻地影响您的设计和测试策略。

我主张所有类都是*密封*的，所有方法都是*非虚拟的*，直到你有一个以客户为中心的真实理由来解封或使方法成为虚拟。

基本上你的问题是“我不知道我的客户打算如何消费我的课程；因此我应该让它任意扩展吗？” 不; 你应该*变得知识渊博*！你不会问“我不知道我的客户将如何使用我的类，所以我应该让我的所有属性都可以读写吗？我应该让我的所有方法都可以读写委托类型的属性，以便我的用户可以用自己的实现替换任何方法吗？” *不，在您有证据*表明用户确实需要该功能之前，不要做任何这些事情！花宝贵的时间设计、测试和实现用户真正想要和需要的功能，并从知识的角度来做。

* * *

## 回答 #2

> 赞同：31
> 
> 时间：2013-01-29T00:10:51.620

在我看来，目前接受的[答案](https://stackoverflow.com/a/14451437/10779)是不必要的教条主义。

事实是，当您不将方法标记为 时`virtual`，其他人无法覆盖其行为，并且当您将类标记为`sealed`其他人无法从该类继承时。这可能会导致严重的疼痛。我不知道有多少次我诅咒一个用于标记类`sealed`或不标记方法的 API，`virtual`只是因为它们没有预料到我的用例。

从理论上讲，仅允许重写方法和继承本应被重写和继承的类可能是正确的方法，但实际上不可能预见到所有可能的情况，而且确实没有充分的理由如此封闭。

1.  如果您没有很好的理由，请不要将课程标记为 `sealed`.
2.  如果您的库打算被其他人使用，那么至少尝试将包含该*行为*的类的主要方法标记为`virtual`.

进行调用的一种方法是查看方法或属性的名称。List 上的*GetLength()*方法完全符合其名称的含义，并且不允许进行太多*解释*。更改其实现可能不是很透明，因此`virtual`可能没有必要将其标记为。将方法标记`Add`为虚拟更有用，因为有人可以创建一个特殊的列表，它只通过 Add 方法等接受一些对象。另一个例子是自定义控件。您可能希望创建主要绘图方法`virtual`，以便其他人可以使用大部分行为并更改外观，但您可能不会覆盖 X 和 Y 属性。

最后，您通常不必立即做出决定。在一个内部项目中，无论如何您都可以轻松更改代码，我不会担心这些事情。如果一个方法需要被覆盖，你可以在发生这种情况时将其设为虚拟。相反，如果项目是一个被其他人使用并且更新缓慢的 API 或库，那么考虑哪些类和方法可能有用肯定是值得的。在这种情况下，我认为最好是开放而不是严格封闭。

* * *

## 回答 #3

> 赞同：22
> 
> 时间：2013-01-22T03:56:19.537

不！因为您不知道您的类将如何被继承，所以您应该*只*标记一个方法，就`virtual`好像您*知道*您希望它被覆盖一样。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2013-01-22T04:01:49.067

不。只有您希望派生类指定的方法应该是虚拟的。

虚拟与最终无关。

为了防止在 c# 中覆盖虚拟方法，您可以使用`sealed`

```
public class MyClass
{
    public sealed override void MyFinalMethod() {...}
} 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2013-01-22T16:56:32.640

我们可以想出支持/再次支持任一阵营的理由，但这完全没用。

在 Java 中有数以百万计的非最终公共方法，但我们听到的恐怖故事很少。

在 C# 中，有数百万个密封的公共方法，我们听到的恐怖故事很少。

所以这没什么大不了的 - 覆盖公共方法的需要很少见，所以无论哪种方式都没有实际意义。

* * *

这让我想起了另一个论点——一个局部变量是否应该是默认的。这是个好主意，但我们不能夸大它的价值。有数十亿个局部变量可能是但不是最终的，但它已被证明是一个实际问题。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2020-03-27T11:57:31.777

Yes you should. I wish to answer a different answer than most other answers. This is a flaw in C#. A defect. A mistake in its design. You can see that when comparing to Java where all methods are "virtual" unless, specified otherwise ("final"). Of course that if there is a class "Rectangle" with a method of "Area", and you wish to have your own class that represents a "Rectangle" with margins. You wish to take advantage of the existing class with all of its properties and methods and you just want to add a property of "margin" that adds some value to the regular rectangle area, and if the area method in Rectangle is not marked virtual, you are doomed. Image please a method that takes an array of Rectangles and returns the sum of the area of all rectangles. Some can be regular rectangles and some with margin. Now read back the answer that is marked "correct" the describe "secuirty issue" or "testing". Those are meaningless compared to the disability to override.

I am not surprised that others answered "no". I am surprised that the authors of C# couldn't see that while basing their language on Java.

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-06-05T19:19:15.893

使方法虚拟化通常会减慢任何需要调用它的代码。这种减速将是微不足道的，但在某些情况下可能会相当大（除其他外，因为非虚拟方法调用可能是内联的，这反过来可能允许优化器消除不必要的操作）。预测虚拟调用可能影响执行速度的程度并不总是可能的，并且通常应该避免做会使代码变慢的事情，除非这样做有明显的好处。

在许多情况下，使方法成为非虚拟方法的性能优势可能足以证明默认情况下方法是非虚拟的，但是当类被设计为被继承时，大多数方法应该是虚拟的并且是非密封的；非虚拟或密封方法的主要用途应该是作为其他（可能受保护的）虚拟方法的包装器（想要更改底层行为的代码应该覆盖适当的虚拟而不是包装器）。

`sealed`将类标记为或限制对程序集中其他类的继承通常有与性能无关的原因。除此之外，如果一个类是可外部继承的，那么所有具有作用域的成员都会有效地添加到它的公共 API 中，并且*在基类*`protected`中对其行为的任何更改都可能会破坏任何依赖该行为的派生类。另一方面，如果一个类是可继承的，那么创建它的方法并不会真正增加它的曝光率。如果有的话，它可以减少派生类对基类内部的依赖，方法是允许派生类完全“隐藏”派生类中不再相关的基类实现的方面[例如，如果*`virtual``List<T>`是虚拟的，一个覆盖它们的派生类可以使用数组数组来保存东西（避免大对象堆问题），并且不必尝试保持使用的私有数组`List<T>`与数组一致数组。*

 ** * *

## 回答 #8

> 赞同：0
> 
> 时间：2018-11-15T20:55:37.637

不，您不应该将所有方法都标记为虚拟方法。您应该考虑如何继承您的类。如果该类不应该被继承，那么将其标记为密封的，显然成员不应该是虚拟的。如果你的类很可能被继承，你真的应该最大化覆盖行为的能力。因此，除非您有理由不这样做，否则请在此类课程中到处使用 virtual。*

# c++ - 在 C++ 中调用线程两次时变量重叠

> ID：14451328
> 
> 赞同：0
> 
> 时间：2013-01-22T03:55:46.543
> 
> 标签：c++, multithreading

我在多次调用线程时遇到问题，并且变量搞砸了。我是线程新手，所以我确定我错过了一些简单的东西。

```
struct PARAMS
{
    time_t secondsAtStart;
};

DWORD WINAPI ProcessChange(void* parameter) {
    PARAMS* params = (PARAMS*)parameter;
    Sleep(3000);
    _tprintf(TEXT("Seconds: (%d)\n"), params->secondsAtStart);
    return 0;
}

void FileChanged(CString filename, CString action) {
    struct PARAMS *params = NULL;
    params = (struct PARAMS *)malloc(sizeof(PARAMS)+1);
    params->secondsAtStart = time(null);
    // I've also tried it this way.    
    //PARAMS params;
    //params.secondsAtStart = time(NULL);
    HANDLE hThread = CreateThread(NULL, 0, ProcessChange, &params, 0, NULL);
    // If I uncomment this, it works, but just one thread runs at a time.
    //WaitForSingleObject(hThread, INFINITE);
} 
```

如果我不取消注释 WaitForSingleObject，那么 secondsAtStart 变量就会损坏。我需要的最终结果是，如果 FileChanged 一个接一个地被调用 3 次，我将让前两次运行什么都不做，最后一次运行。

谢谢，本

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T04:05:29.420

如果线程的寿命比函数长，则将函数的局部变量（即自动存储的变量）的地址（或引用）传递给线程会导致未定义的行为。

在您的代码中，`params`指向一个动态存储的对象，但指针本身是一个局部变量。您将*其地址* `&params`传递给线程。这仅在等待线程完成时才有效，您可以保证指针的寿命比线程长。否则，它会导致未定义的行为，这很自然地会在打印的无意义值中表现出来。

通过`params`而不是`&params`应该解决问题。（另请注意，编写的代码会导致内存泄漏；您需要确保在线程完成*后*`free`实际分配的空间。）

# php - 数组php中的索引，日期格式

> ID：14451329
> 
> 赞同：1
> 
> 时间：2013-01-22T03:55:46.710
> 
> 标签：php, arrays, date, format

对不起我的英语，我不知道我的问题是否正确。

我有一个数组：

```
Array
(
    [0] => Array
    (

        [date] => 2013-01-22
        [id] => 1
        [views] => 33286

    )

   [1] => Array
    (

        [date] => 2013-01-23
        [id] => 1
        [views] => 33223

    )

[2] => Array
    (

        [date] => 2013-01-22
        [id] => 2
        [views] => 33223

    )

 [3] => Array
    (

        [date] => 2013-01-23
        [id] => 2
        [views] => 33223

    )
) 
```

如您所见，id 1 & 2 在 2 天内有浏览量：22-01-2013 和 23-01-2013，所以我的问题是如何打印它们：

```
id     22-01-2013    23-01-2013
1        33286         33223
2        33223         33223 
```

谢谢你的帮助 ！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T04:14:04.907

我怀疑你的最终目标是写出一张价值表。但如果是这样，这里有一些代码可以做到这一点。

```
<?php

$a = array(
    array('date'=>'2013-01-22', 'id'=>1, 'views'=>33286),
    array('date'=>'2013-01-23', 'id'=>1, 'views'=>33223),
    array('date'=>'2013-01-22', 'id'=>2, 'views'=>33223),
    array('date'=>'2013-01-23', 'id'=>2, 'views'=>33223),
);

$table = array();
$cols = array();
foreach ($a as $item)
{
   $date = date('d-m-Y', strtotime($item['date']));
   $table[$item['id']][$date] = $item['views'];
   $cols[$date] = 1;
}
$cols = array_keys($cols);

header('Content-type: text/plain');
echo("id\t" . implode("\t", $cols) . "\r");
foreach ($table as $rowName=>$row)
{
   echo("$rowName\t");
   foreach ($cols as $colName)
   {
      echo(@$row[$colName] . "\t");
   }
   echo("\r");
} 
```

PS 请注意，Stack Overflow 并不是我们为您编写代码的地方。我只是有心情写代码:-)

PPS 对于这里真正的 PHP 专家，我很想知道应该对这段代码进行哪些优化 :-)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T04:03:59.607

请参阅有关格式化日期 [的手册。](http://php.net/manual/en/function.date.php)

```
foreach ($yourarray as $key => $value){
    $yourarray[$key]['date'] = date("d-m-Y",strtotime($value['date']));
} 
```

我假设您不介意覆盖其他格式。

# ios - 从 ios 库中的视频获取持续时间和创建日期

> ID：14451333
> 
> 赞同：0
> 
> 时间：2013-01-22T03:55:59.657
> 
> 标签：ios, objective-c, cocoa-touch, video

我正在尝试从照片库中选择/压缩视频，但是当我获取持续时间和创建日期时，它们都返回 null（持续时间默认为 0.0 秒）。我不确定我是否在这里做错了什么。

```
- (void)imagePickerController:(UIImagePickerController *)uploadPick didFinishPickingMediaWithInfo:(NSDictionary *)info {
NSString *mediaType = [info objectForKey:UIImagePickerControllerMediaType];

 if (CFStringCompare (( CFStringRef) mediaType, kUTTypeMovie, 0) == kCFCompareEqualTo)
 {
    NSURL *videoURL = [info objectForKey:UIImagePickerControllerMediaURL];

    //Video Duration:
            MPMoviePlayerController *mp = [[MPMoviePlayerController alloc]
                                   initWithContentURL:videoURL];

    VideoTime.text = [NSString stringWithFormat:@"Time: %.2f", mp.duration];

    //Video Creation Date
    NSDictionary *metadataDictionary = (NSDictionary *)[info valueForKey:UIImagePickerControllerMediaMetadata];
    NSDateFormatter *dateFormatter = [[NSDateFormatter alloc] init];
    [dateFormatter setDateStyle:NSDateFormatterMediumStyle];
    NSString *stringDate = [dateFormatter stringFromDate:metadataDictionary.fileCreationDate];
    [dateFormatter release];
    VideoDateTaken.text = [NSString stringWithFormat:@"Date Taken: %@", stringDate];

 }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-22T08:39:43.283

根据[文档](http://developer.apple.com/library/ios/#documentation/UIKit/Reference/UIImagePickerControllerDelegate_Protocol/UIImagePickerControllerDelegate/UIImagePickerControllerDelegate.html#//apple_ref/doc/c_ref/UIImagePickerControllerMediaMetadata)，`UIImagePickerControllerMediaMetadata`仅对静止图像有效：

> 此键仅在使用源类型设置为 UIImagePickerControllerSourceTypeCamera 的图像选择器时有效，并且仅适用于静止图像。

为了得到你想要的元数据，使用`ALAsset`和[metadata](http://developer.apple.com/library/ios/#documentation/AssetsLibrary/Reference/ALAssetRepresentation_Class/Reference/Reference.html#//apple_ref/occ/instm/ALAssetRepresentation/metadata)方法。

# android - 屏幕尺寸计算不正确

> ID：14451334
> 
> 赞同：4
> 
> 时间：2013-01-22T03:56:19.317
> 
> 标签：android, android-layout, surfaceview

我最近一直在尝试使用与臭名昭著的 LunarLander 类似的方法来实现我的第一个 Android 游戏。我在没有游戏引擎帮助的情况下自己渲染图形，这似乎是迄今为止最复杂的部分。

## 问题

我正在确定屏幕的宽度，并将该信息转发到一个算法中，该算法确定在给定宽度和一些其他边距值的情况下可以水平渲染的图像的最大数量（见`calculateMaxBeadsInWidth()`下文）。但是，数学似乎与算法计算的值不匹配。基本上，它决定了只能`X`显示一定数量的图像，而实际上`X + 2`图像可以很容易地显示在屏幕上。

## 计算

我已经解析了许多调试输出，显示屏幕的实际宽度是`800 pixels`，而图像宽度是`44 pixels`。所以，鉴于边距是`100 pixels`（`50 pixels`在最左边和`50 pixels`最右边），剩下的就`700 pixels`可以使用了。现在，`floor(700 / 44) = 15`，所以只显示了 15 张图像。但显然还有更多空间（见图片）！

## 编码

我的算法：

```
private int calculateMaxBeadsInWidth() {

    float eff_width = screenWidth - (BOARD_MARGIN_HORIZONTAL * 2);

    return (int) (eff_width / bead_width);
} 
```

请注意， 的`BOARD_MARGIN_HORIZONTAL`值为`50.0f`。

## 一些图片

这是我的算法产生的：

![在此处输入图像描述](../Images/14eb7b847001d853c86fcd3408695a14.png)

但是，正如您所看到的，很明显，您可以*轻松地*在线条末端（右侧）再安装至少 2 个珠子。例如，这张图片显示了当我将一行中的珠子数量硬编码为比算法产生的多两个时会发生什么：

![在此处输入图像描述](../Images/5ded71b10e8ed517a5117c539a3c6c75.png)

这是边缘用红线详细说明的图像。如您所见，仍然有足够的空间：

![在此处输入图像描述](../Images/0cf4bebc6541a4d9793b9c1575857a49.png)

## 补充信息

我正在 Google Nexus 7 上测试这个应用程序。

我`getResources().getDisplayMetrics().widthPixels;`用来获取屏幕的宽度。也许问题就在这里？

## 我的问题

是否有一些我没有考虑到的影响结果的分辨率值？为什么这个计算如此不准确？

如果您需要更多信息，我将很乐意提供，任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T04:55:04.737

您的边距是错误的值。您上传了全尺寸图像，但如果您绘制 50px 和 750px 的垂直线，它们会与绘图区域相交。因此，您要么在计算中使用了错误的值，要么在其他地方绘制了本应为边距的值。

![在此处输入图像描述](../Images/1d0742ac4cd21777fe92cd07b68a2a5e.png)

# java - 当用户尝试使用浏览器的导航按钮进行导航时，如何强制用户退出？

> ID：14451344
> 
> 赞同：4
> 
> 时间：2013-01-22T03:56:52.120
> 
> 标签：java, jsp

### 项目背景

客户要求网站的用户（当登录并能够查看他们的个人信息时）如果他们尝试使用浏览器的导航按钮进行导航，则必须强制退出。

### 我的研究

在 SO 上搜索似乎表明人们遇到的大多数问题是“阻止”人们在注销时点击浏览器的后退按钮，例如[this](https://stackoverflow.com/questions/5949801/how-to-disable-browser-back-button-after-logout-in-jsp)和[this](https://stackoverflow.com/questions/4194207/prevent-user-from-going-back-to-the-previous-secured-page-after-logout)。不同之处在于我需要“阻止”用户在历史中向后导航（甚至向前导航，尽管我不知道如果用户一开始就无法返回，他们如何在历史中前进）即使他们已登录，也必须强制他们使用提供的导航。

### 我想到的解决方案

我正在考虑在用户点击后退按钮并将其注销时捕获浏览器的事件。但是，正如[这里](https://stackoverflow.com/questions/8077657/how-to-capture-browsers-event-by-javascript)所讨论的，您似乎只能使用 Javascript 而不能使用服务器端代码来“做”。我对这种方法的疑虑是，用户只需在浏览器上禁用 Javascript 即可绕过它。

### 我的问题

所以我的问题是 - 有没有办法可以在服务器端捕获浏览器事件并将它们记录下来？如果没有，实现我的目标的替代方法是什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-28T11:33:40.610

我会说您最好的选择是跟踪会话。

您让客户端向您发送服务器处理请求时的时间戳，或者更简单：依赖于用户的计数器（您每次发送给客户端），服务器端跟踪发送的最后时间戳/计数器.

如果用户单击后退按钮，他将向您发送一个旧的时间戳/计数器，而不是最后一个当前的，然后您可以将他从服务器端注销。

这应该可以解决问题。

为了确保技巧完成并使其独立于javascript，我会说您可以将此值放在隐藏参数中，或者作为隐藏字段表单，因此用户看不到它，但它总是被发送到你的服务器。

我希望这有帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T08:54:35.647

我所做的是创建一个页面，1 个 html 文档，然后使用 AJAX 浏览整个站点。当用户点击后退按钮时，它会将您带到索引页面，即登录页面。要登录，我使用 AJAX，我只在服务器端进行重定向。唯一的问题是当用户点击前进按钮时，好在没有 JS 没有导航。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-30T11:48:19.837

如果要求捕获浏览器导航按钮并将它们注销 - 更简单的选择是从不首先显示这些导航按钮。如果用户不能使用或单击后退和前进有什么用。

从您的 webapp打开一个没有工具栏、菜单栏的[新浏览器。](http://www.w3schools.com/jsref/met_win_open.asp)当用户关闭窗口时，捕获事件并注销会话。这样 - 解决方案将保持简单。

我的2c

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-25T14:46:30.980

依赖 javascript 不是一个好习惯，因为它在客户端，并且客户端总是可以绕过在客户端运行的内容。

您应该改用会话超时。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-25T15:49:18.257

抱歉，无法自行获取按钮。

由于这是一个安全问题，因此解决方案（没有 javascript）将是：

*   使用在导航出或进入未编码页面时发出警告的编码页面。即使是相互身份验证也可能满足您的需求。

![验证](../Images/2352c9efbc57fe4367b8ed2b63252753.png)

![离开](../Images/7620b3f3e9febf3e5b4c2ce20d01e9cc.png)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-28T23:50:05.227

如果我正确理解您的问题：

您无法避免用户向您的服务器发送请求，除非您想为 Intranet 工作人员（来自开源浏览器项目）提供自定义更改版本，否则用户可以完全控制他/她的浏览器。

如果没有 javascript，您唯一能做的就是在单击所需的导航按钮时通过 GET 发送特定参数。如果该参数存在，则您允许查看下一页/上一页，否则用户将被注销。

显然，用户可以通过使用浏览器开发工具绕过它。但是您无法在此级别完全控制用户 UI 行为。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-01-30T10:50:00.697

如果我是对的，那么您说的是浏览器中的 NO-Cache。您可以设置所有这些，如下所示：

```
 response.setHeader("pragma", "no-cache");
    response.setHeader("Cache-Control", "no-cache");
    response.setHeader("Cache-Control", "no-store");
    response.addDateHeader("Expires", -1);
    response.setDateHeader("max-age", 0);
    response.setIntHeader ("Expires", -1);
    prevents caching at the proxy server
    response.addHeader("cache-Control", "private"); 
```

然后您可以定义一个过滤器来检查每个页面上的会话。当用户登录时，在会话中设置一个属性，并在注销时将其删除。

# eclipse - GWT Deploying to Google 遇到错误

> ID：14451345
> 
> 赞同：4
> 
> 时间：2013-01-22T03:56:52.160
> 
> 标签：eclipse, google-app-engine, eclipse-plugin

出现我无法修复的错误。看起来像一个内存问题，但堆栈跟踪是一种循环，就好像编译中的无限循环一样？

运行 Eclipse Juno 使用 Google App 引擎。

当我尝试将一个应用程序部署到 GAE 时出现错误，但另一个 Google App Engine 应用程序可以工作。

我看到的错误：GWT 编译失败

从更新站点下载的 site.xml 文件不包含任何 id 为“com.google.appengine.eclipse.sdkbundle.e42.feature”的元素。无法确定是否有可用更新。

```
eclipse.buildId=M20120914-1800
java.version=1.7.0_01
java.vendor=Oracle Corporation
BootLoader constants: OS=win32, ARCH=x86_64, WS=win32, NL=en_US
Framework arguments:  -product org.eclipse.epp.package.jee.product -product org.eclipse.epp.package.jee.product
Command-line arguments:  -os win32 -ws win32 -arch x86_64 -product org.eclipse.epp.package.jee.product -data C:\Users\myuser\workspacejuno -product org.eclipse.epp.package.jee.product

[ERROR] Failure in unit cache map load. 
```

以及完整的堆栈转储/跟踪：

```
[ERROR] Failure in unit cache map load.
java.util.concurrent.ExecutionException: java.lang.StackOverflowError
    at java.util.concurrent.FutureTask$Sync.innerGet(Unknown Source)
    at java.util.concurrent.FutureTask.get(Unknown Source)
    at com.google.gwt.dev.javac.PersistentUnitCache.awaitUnitCacheMapLoad(PersistentUnitCache.java:466)
    at com.google.gwt.dev.javac.PersistentUnitCache.find(PersistentUnitCache.java:391)
    at com.google.gwt.dev.javac.CompilationStateBuilder.addArchive(CompilationStateBuilder.java:365)
    at com.google.gwt.dev.ArchivePreloader.preloadArchives(ArchivePreloader.java:65)
    at com.google.gwt.dev.Precompile.precompile(Precompile.java:243)
    at com.google.gwt.dev.Precompile.precompile(Precompile.java:229)
    at com.google.gwt.dev.Precompile.precompile(Precompile.java:141)
    at com.google.gwt.dev.Compiler.run(Compiler.java:232)
    at com.google.gwt.dev.Compiler.run(Compiler.java:198)
    at com.google.gwt.dev.Compiler$1.run(Compiler.java:170)
    at com.google.gwt.dev.CompileTaskRunner.doRun(CompileTaskRunner.java:88)
    at com.google.gwt.dev.CompileTaskRunner.runWithAppropriateLogger(CompileTaskRunner.java:82)
    at com.google.gwt.dev.Compiler.main(Compiler.java:177)
Caused by: java.lang.StackOverflowError
    at java.io.ObjectInputStream$PeekInputStream.peek(Unknown Source)
    at java.io.ObjectInputStream$BlockDataInputStream.readBlockHeader(Unknown Source)
    at java.io.ObjectInputStream$BlockDataInputStream.refill(Unknown Source)
    at java.io.ObjectInputStream$BlockDataInputStream.read(Unknown Source)
    at java.io.ObjectInputStream.read(Unknown Source)
    at java.io.InputStream.read(Unknown Source)
    at com.google.gwt.dev.util.DiskCache.transferFromStream(DiskCache.java:159)
    at com.google.gwt.dev.util.DiskCacheToken.readObject(DiskCacheToken.java:87)
    at sun.reflect.GeneratedMethodAccessor17.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    com.google.gwt.dev.javac.CachedCompilationUnit.readObject(CachedCompilationUnit.java:204)

[loops this a few time, sorry could not post it all, its too long.

    at sun.reflect.GeneratedMethodAccessor19.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
    at java.io.ObjectStreamClass.invokeReadObject(Unknown Source)
    at java.io.ObjectInputStream.readSerialData(Unknown Source)
    at java.io.ObjectInputStream.readOrdinaryObject(Unknown Source)
    at java.io.ObjectInputStream.readObject0(Unknown Source)
    at java.io.ObjectInputStream.skipCustomData(Unknown Source)
    at java.io.ObjectInputStream.readSerialData(Unknown Source)
    at java.io.ObjectInputStream.readOrdinaryObject(Unknown Source)
    at java.io.ObjectInputStream.readObject0(Unknown Source)
    at java.io.ObjectInputStream.defaultReadFields(Unknown Source)
    at java.io.ObjectInputStream.defaultReadObject(Unknown Source)
    at com.google.gwt.dev.javac.CachedCompilationUnit.readObject(CachedCompilationUnit.java:204)
    at sun.reflect.GeneratedMethodAccessor19.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
    at java.io.ObjectStreamClass.invokeReadObject(Unknown Source)
    at java.io.ObjectInputStream.readSerialData(Unknown Source)
    at java.io.ObjectInputStream.readOrdinaryObject(Unknown Source)
    at java.io.ObjectInputStream.readObject0(Unknown Source)
    at java.io.ObjectInputStream.skipCustomData(Unknown Source)
    at java.io.ObjectInputStream.readSerialData(Unknown Source)
    at java.io.ObjectInputStream.readOrdinaryObject(Unknown Source)
    at java.io.ObjectInputStream.readObject0(Unknown Source)
    at java.io.ObjectInputStream.defaultReadFields(Unknown Source)
    at java.io.ObjectInputStream.defaultReadObject(Unknown Source)
    at com.google.gwt.dev.javac.CachedCompilationUnit.readObject(CachedCompilationUnit.java:204)
    at sun.reflect.GeneratedMethodAccessor19.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
    at java.io.ObjectStreamClass.invokeReadObject(Unknown Source)
    at java.io.ObjectInputStream.readSerialData(Unknown Source)
    at java.io.ObjectInputStream.readOrdinaryObject(Unknown Source)
    at java.io.ObjectInputStream.readObject0(Unknown Source)
    at java.io.ObjectInputStream.skipCustomData(Unknown Source)
    at java.io.ObjectInputStream.readSerialData(Unknown Source)
    at java.io.ObjectInputStream.readOrdinaryObject(Unknown Source)
    at java.io.ObjectInputStream.readObject0(Unknown Source)
    at java.io.ObjectInputStream.defaultReadFields(Unknown Source)
    at java.io.ObjectInputStream.defaultReadObject(Unknown Source)
    at com.google.gwt.dev.javac.CachedCompilationUnit.readObject(CachedCompilationUnit.java:204)
    at sun.reflect.GeneratedMethodAccessor19.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
    at java.io.ObjectStreamClass.invokeReadObject(Unknown Source)
    at java.io.ObjectInputStream.readSerialData(Unknown Source)
    at java.io.ObjectInputStream.readOrdinaryObject(Unknown Source)
    at java.io.ObjectInputStream.readObject0(Unknown Source)
    at java.io.ObjectInputStream.skipCustomData(Unknown Source)
    at java.io.ObjectInputStream.readSerialData(Unknown Source)
    at java.io.ObjectInputStream.readOrdinaryObject(Unknown Source)
    at java.io.ObjectInputStream.readObject0(Unknown Source)
    at java.io.ObjectInputStream.defaultReadFields(Unknown Source)
    at java.io.ObjectInputStream.defaultReadObject(Unknown Source)
    at com.google.gwt.dev.javac.CachedCompilationUnit.readObject(CachedCompilationUnit.java:204)
    at sun.reflect.GeneratedMethodAccessor19.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
    at java.io.ObjectStreamClass.invokeReadObject(Unknown Source)
    at java.io.ObjectInputStream.readSerialData(Unknown Source)
    at java.io.ObjectInputStream.readOrdinaryObject(Unknown Source)
    at java.io.ObjectInputStream.readObject0(Unknown Source)
    at java.io.ObjectInputStream.skipCustomData(Unknown Source)
    at java.io.ObjectInputStream.readSerialData(Unknown Source)
    at java.io.ObjectInputStream.readOrdinaryObject(Unknown Source)
    at java.io.ObjectInputStream.readObject0(Unknown Source)
    at java.io.ObjectInputStream.defaultReadFields(Unknown Source)
    at java.io.ObjectInputStream.defaultReadObject(Unknown Source)
    at com.google.gwt.dev.javac.CachedCompilationUnit.readObject(CachedCompilationUnit.java:204)
    at sun.reflect.GeneratedMethodAccessor19.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
    at java.io.ObjectStreamClass.invokeReadObject(Unknown Source)
    at java.io.ObjectInputStream.readSerialData(Unknown Source)
    at java.io.ObjectInputStream.readOrdinaryObject(Unknown Source)
    at java.io.ObjectInputStream.readObject0(Unknown Source)
    at java.io.ObjectInputStream.skipCustomData(Unknown Source)
    at java.io.ObjectInputStream.readSerialData(Unknown Source)
    at java.io.ObjectInputStream.readOrdinaryObject(Unknown Source)
    at java.io.ObjectInputStream.readObject0(Unknown Source)
    at java.io.ObjectInputStream.defaultReadFields(Unknown Source)
    at java.io.ObjectInputStream.defaultReadObject(Unknown Source)
    at com.google.gwt.dev.javac.CachedCompilationUnit.readObject(CachedCompilationUnit.java:204)
    at sun.reflect.GeneratedMethodAccessor19.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
    at java.io.ObjectStreamClass.invokeReadObject(Unknown Source)
    at java.io.ObjectInputStream.readSerialData(Unknown Source)
    at java.io.ObjectInputStream.readOrdinaryObject(Unknown Source)
    at java.io.ObjectInputStream.readObject0(Unknown Source)
    at java.io.ObjectInputStream.skipCustomData(Unknown Source)
    at java.io.ObjectInputStream.readSerialData(Unknown Source)
    at java.io.ObjectInputStream.readOrdinaryObject(Unknown Source)
    at java.io.ObjectInputStream.readObject0(Unknown Source)
    at java.io.ObjectInputStream.defaultReadFields(Unknown Source)
    at java.io.ObjectInputStream.defaultReadObject(Unknown Source)
    at com.google.gwt.dev.javac.CachedCompilationUnit.readObject(CachedCompilationUnit.java:204)
    at sun.reflect.GeneratedMethodAccessor19.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
    at java.io.ObjectStreamClass.invokeReadObject(Unknown Source)
    at java.io.ObjectInputStream.readSerialData(Unknown Source)
    at java.io.ObjectInputStream.readOrdinaryObject(Unknown Source)
    at java.io.ObjectInputStream.readObject0(Unknown Source)
    at java.io.ObjectInputStream.skipCustomData(Unknown Source)
    at java.io.ObjectInputStream.readSerialData(Unknown Source)
    at java.io.ObjectInputStream.readOrdinaryObject(Unknown Source)
    at java.io.ObjectInputStream.readObject0(Unknown Source)
    at java.io.ObjectInputStream.defaultReadFields(Unknown Source)
    at java.io.ObjectInputStream.defaultReadObject(Unknown Source)
    at com.google.gwt.dev.javac.CachedCompilationUnit.readObject(CachedCompilationUnit.java:204)
    at sun.reflect.GeneratedMethodAccessor19.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
    at java.io.ObjectStreamClass.invokeReadObject(Unknown Source)
onStateBuilder.java:466)
    at com.google.gwt.dev.javac.CompilationStateBuilder.buildFrom(CompilationStateBuilder.java:388)
    at com.google.gwt.dev.cfg.ModuleDef.getCompilationState(ModuleDef.java:373)
    at com.google.gwt.dev.Precompile.precompile(Precompile.java:246)
    at com.google.gwt.dev.Precompile.precompile(Precompile.java:229)
    at com.google.gwt.dev.Precompile.precompile(Precompile.java:141)
    at com.google.gwt.dev.Compiler.run(Compiler.java:232)
    at com.google.gwt.dev.Compiler.run(Compiler.java:198)
    at com.google.gwt.dev.Compiler$1.run(Compiler.java:170)
    at com.google.gwt.dev.CompileTaskRunner.doRun(CompileTaskRunner.java:88)
    at com.google.gwt.dev.CompileTaskRunner.runWithAppropriateLogger(CompileTaskRunner.java:82)
    at com.google.gwt.dev.Compiler.main(Compiler.java:177) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-07-01T08:56:17.847

它可能与损坏的缓存有关。删除您的 gwt-UnitCache 文件夹。如果这不起作用，请删除您的 AppData\Local\Temp 文件（如果在 Windows 下），因为那里有许多 gwt 生成的文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T23:00:00.793

如果它太明显或超出主题，请原谅，但您是否尝试设置或修改编译器指令： jvmarg -Xss ？

您的build.xml`<jvmarg value="-Xss16M"/>`文件中的内容可能会有所帮助。

# jquery - 在某个断点处删除 Twitter Bootstrap 下拉切换方法

> ID：14451349
> 
> 赞同：1
> 
> 时间：2013-01-22T03:56:58.963
> 
> 标签：jquery, twitter-bootstrap, expressionengine

希望有人可以帮助解决这个问题。

我正在使用 twitter bootstrap 为响应式站点创建下拉/下拉菜单。我的网站底部有一个下拉菜单项，其中包含一个大的链接列表，如果屏幕尺寸大于 50em ，则通过 ajax 插入（使用[灯丝组 AJAX 模式）。](https://github.com/filamentgroup/Ajax-Include-Pattern)如果它是 < 50em 我希望`<a>`正常运行并将用户带到站点地图页面。

在我的 JS 文件中，我有这个可以拉入链接列表。*下拉菜单没有什么特别之处，因为它由 bootstrap.js 处理*

```
$("[data-append],[data-replace],[data-after],[data-before]").ajaxInclude(); 
```

在 HTML

```
<nav class="dropup sitemap pull-left" id="sitemap">
<div class="dropdown" data-append="/includes/footer-sitemap" data-media="(min-width: 50em)">
    <a href="{path=sitemap}" class="dropdown-toggle" data-toggle="dropdown" id="menu-sitmap">Sitemap <b class="caret"></b></a>
    <div class="dropdown-menu">
        <ul>
            <!-- List of links -->
        </ul>
    </div>
</div>
</nav> 
```

我的问题是如何扭转阻止站点地图链接被跟踪的功能，但前提是窗口小于 50em？

# java - 如何从单击项目打开列表视图？

> ID：14451354
> 
> 赞同：0
> 
> 时间：2013-01-22T03:57:21.837
> 
> 标签：java, android, eclipse, list, view

再会，

感谢这里的一些用户，我能够想出代码来通过单击项目打开上下文菜单。现在，我希望我的六个项目之一打开一个列表视图。如何实现列表视图？我使用了来自此来源的自定义代码：

[http://www.codeproject.com/script/Articles/ViewDownloads.aspx?aid=146145](http://www.codeproject.com/script/Articles/ViewDownloads.aspx?aid=146145)

或者

[http://code.google.com/p/android-carousel-demo/source/browse/#svn%2FCarouselDemo%253Fstate%253Dclose](http://code.google.com/p/android-carousel-demo/source/browse/#svn%2FCarouselDemo%253Fstate%253Dclosed)

我发布了两个链接，以防您更喜欢其中一个。我希望轮播中的一个项目打开一个列表视图。你能帮我解决这个问题吗？这是我目前正在使用的代码。先感谢您。

```
package com.carouseldemo.main;

import android.app.Activity;
import android.os.Bundle;
import android.view.ContextMenu;
import android.view.ContextMenu.ContextMenuInfo;
import android.view.View;
import android.widget.TextView;
import android.widget.Toast;

import com.carouseldemo.controls.Carousel;
import com.carouseldemo.controls.CarouselAdapter;
import com.carouseldemo.controls.CarouselAdapter.AdapterContextMenuInfo;
import com.carouseldemo.controls.CarouselAdapter.OnItemClickListener;
import com.carouseldemo.controls.CarouselAdapter.OnItemSelectedListener;
import com.carouseldemo.controls.CarouselItem;

public class MainActivity extends Activity {
@Override
public void onCreateContextMenu(ContextMenu menu, View v, ContextMenuInfo menuInfo) {
    // Just prepare ourself for unexpected arguments...
    if (menuInfo == null) {
        return;
    }
    if (!(menuInfo instanceof AdapterContextMenuInfo)) {
        return;
    }
    AdapterContextMenuInfo mi = (AdapterContextMenuInfo)menuInfo;
    switch (mi.position) {
    case 0:
        menu.add("cat menu");
        break;
    case 1:
        menu.add("hippopotamus menu");
        break;
    case 2:
        menu.add("monkey menu");
        break;
    case 3:
        menu.add("mouse menu");
        break;
    case 4:
        menu.add("panda menu");
        break;
    case 5:
        menu.add("rabbit menu");
        break;
    default:
        break;
    }
    super.onCreateContextMenu(menu, v, menuInfo);
}

/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    final Carousel carousel = (Carousel)findViewById(R.id.carousel);
    carousel.setOnItemClickListener(new OnItemClickListener(){

                    public void onItemClick(CarouselAdapter<?> parent, View view,
                                    int position, long id) {
                        CarouselItem item = (CarouselItem)parent.getChildAt(position);

                        // HERE: Force context menu
                        carousel.showContextMenuForChild(item);

                            Toast.makeText(MainActivity.this,
                                            String.format("%s has been clicked",
                                            item.getName()),
                                            Toast.LENGTH_SHORT).show();

                    }

    });

    carousel.setOnItemSelectedListener(new OnItemSelectedListener(){

                    public void onItemSelected(CarouselAdapter<?> parent, View view,
                                    int position, long id) {

                    final TextView txt = (TextView)(findViewById(R.id.selected_item));

                            switch(position){
                            case 0:
                                    txt.setText("The cat (Felis catus), also known as the domestic cat or housecat to distinguish it from other felids and felines, is a small, usually furry, domesticated, carnivorous mammal that is valued by humans for its companionship and for its ability to hunt vermin and household pests. Cats have been associated with humans for at least 9,500 years, and are currently the most popular pet in the world. Owing to their close association with humans, cats are now found almost everywhere in the world.");
                                    break;
                            case 1:
                                    txt.setText("The hippopotamus (Hippopotamus amphibius), or hippo, from the ancient Greek for \"river horse\" (ἱπποπόταμος), is a large, mostly herbivorous mammal in sub-Saharan Africa, and one of only two extant species in the family Hippopotamidae (the other is the Pygmy Hippopotamus.) After the elephant, the hippopotamus is the third largest land mammal and the heaviest extant artiodactyl.");
                                    break;
                            case 2:
                                    txt.setText("A monkey is a primate, either an Old World monkey or a New World monkey. There are about 260 known living species of monkey. Many are arboreal, although there are species that live primarily on the ground, such as baboons. Monkeys are generally considered to be intelligent. Unlike apes, monkeys usually have tails. Tailless monkeys may be called \"apes\", incorrectly according to modern usage; thus the tailless Barbary macaque is called the \"Barbary ape\".");
                                    break;
                            case 3:
                                    txt.setText("A mouse (plural: mice) is a small mammal belonging to the order of rodents. The best known mouse species is the common house mouse (Mus musculus). It is also a popular pet. In some places, certain kinds of field mice are also common. This rodent is eaten by large birds such as hawks and eagles. They are known to invade homes for food and occasionally shelter.");
                                    break;
                            case 4:
                                    txt.setText("The giant panda, or panda (Ailuropoda melanoleuca, literally meaning \"black and white cat-foot\") is a bear native to central-western and south western China.[4] It is easily recognized by its large, distinctive black patches around the eyes, over the ears, and across its round body. Though it belongs to the order Carnivora, the panda's diet is 99% bamboo.");
                                    break;
                            case 5:
                                    txt.setText("Rabbits (or, colloquially, bunnies) are small mammals in the family Leporidae of the order Lagomorpha, found in several parts of the world. There are eight different genera in the family classified as rabbits, including the European rabbit (Oryctolagus cuniculus), cottontail rabbits (genus Sylvilagus; 13 species), and the Amami rabbit (Pentalagus furnessi, an endangered species on Amami Ōshima, Japan)");
                                    break;
                            }

                    }

                    public void onNothingSelected(CarouselAdapter<?> parent) {
                    }

    }
    );

    registerForContextMenu(carousel);
}

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T04:21:59.623

我认为它将使用此代码

```
@Override  
public void onCreate(Bundle savedInstanceState) {  
 super.onCreate(savedInstanceState);  
 setContentView(R.layout.main);  

 listGames = (ListView) findViewById(R.id.listViewGame);  
 gamelistArray = getResources().getStringArray(R.array.gameslist);  
 gameDetailsListArray = getResources().getStringArray(  
 R.array.gamesDetails);  

 adapter = new ArrayAdapter<String>(this,  
  android.R.layout.simple_list_item_1, android.R.id.text1,  
 gamelistArray);  

 listGames.setAdapter(adapter);  

 listGames.setOnItemClickListener(new OnItemClickListener() {  

  @Override  
  public void onItemClick(AdapterView<?> parent, View view,  
 int position, long id) {  

// Get the item that was clicked  
Object itemName = listGames.getItemAtPosition(position);  
String keyword = itemName.toString();  
String info = gameDetailsListArray[position];  
Toast.makeText(getApplicationContext(),  
"You have selected:  " + keyword, Toast.LENGTH_SHORT)  
  .show();  
Intent i = new Intent(getBaseContext(),  
  ActivityGameDetails.class);  
i.putExtra("info", info);  
i.putExtra("name", keyword);  
startActivity(i);  

}  
});  
}  
} 
```

也检查这个

[Android 中的 ListView（高级）](http://www.rdcworld-android.blogspot.in/2012/07/listview-in-android-advance.html)

ListView：ListView 是一个显示可滚动项列表的视图组。

[Android中的ListView（基本）](http://www.rdcworld-android.blogspot.in/2011/08/list-view-in-android-basic.html)

# api - 开发自己的 RESTful API

> ID：14451355
> 
> 赞同：0
> 
> 时间：2013-01-22T03:57:28.993
> 
> 标签：api, rest

在开发自己的 RESTful API 时。是否需要使用四种不同的http方法？获取发布和删除？

我正在检查[Twitter REST API](https://dev.twitter.com/docs/api/1.1)，发现它们只是使用常用方法（GET 和 POST）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-22T04:18:43.877

简短的回答：**没有**

长答案：REST 并不特定于任何一种协议，而是一种编程风格。记住这一点很有帮助，因为应该将 RESTful 端点视为具有特定目标。您的工作是以尽可能最 RESTful 的方式公开 Web 服务。当您制作 RESTful API 时，您不需要使用任何特定的 HTTP 方法。相反，REST 可以体现在这个指导原则中：您必须公开可单独识别的资源；这些资源必须以暴露的形式进行操作。哦，使用自我描述的信息。

我敢肯定这是一个泄漏的解释。不过，试着看看，当您牢记关键思想时，REST 会变得更加清晰。RESTful 实践以一种允许我们以理智的方式处理状态的方式公开资源。阅读以下内容可以了解如何实现 RESTful API 的技术细节： [http](http://en.wikipedia.org/wiki/Representational_state_transfer) ://en.wikipedia.org/wiki/Representational_state_transfer 之后，阅读特定于您的语言的内容。快速通道：找到一些用您的语言编写的 RESTful API 并克隆它/使用它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T04:00:44.730

您应该使用适合您公开的操作的任何 HTTP 方法。

例如，您应该只接受用于删除事物的操作的 HTTP DELETE 请求。

如果您的 API 不允许调用者删除事物（例如，交通或天气 API），您不应接受 DELETE 动词。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-22T04:01:16.587

仅当您要支持这些逻辑操作时：

GET - 获取资源

PUT - 更新（或创建）资源

DELETE - 删除资源

POST - 几种用途：在集合中创建一个新资源，执行一些将改变某个资源的操作（而不是 PUT 一个全新版本的资源）

大多数 API 都希望提供这些操作，并将使用所有这些方法。并且不要忘记 HEAD - 获取有关资源的信息（但不是资源本身）。

# javascript - 如何使用 document.getElementById 在 iframe 中选择元素

> ID：14451358
> 
> 赞同：82
> 
> 时间：2013-01-22T03:58:18.607
> 
> 标签：javascript, html, iframe, getelementbyid, frameset

我有一个`iframe`这样的

```
<iframe name="myframe1" id="myframe1" width="100%" height="100%" src="a.html">
<html>
    <head></head>
    <frameset name="myframe2" cols="0%, 100%" border="0" frameBorder="0" frameSpacing="0">
        <frame name="page1" src="c.html" scrolling="no"></frame>
        <frame name="page2" src="d.html" >
            <html>
                <head></head>
                <body id="top">
                    <div id="div1">
                        <div id="div2">
                            <div id="div3">
                                <ul id="x">
                                    <li>a</li>
                                    <li>b</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </body>
            </html>

        </frame>

    </frameset>
</html>
</iframe> 
```

我想引用元素“x”。我尝试了几种方法，但找不到解决方案。

* * *

## 回答 #1

> 赞同：189
> 
> 时间：2013-01-22T04:08:04.597

```
document.getElementById('myframe1').contentWindow.document.getElementById('x') 
```

[**小提琴**](http://jsfiddle.net/qfRYQ/)

[`contentWindow`](http://help.dottoro.com/ljctglqj.php)所有浏览器都支持，包括旧版本的 IE。

请注意，如果`iframe`'s来自另一个域，由于[Same Origin Policy](http://en.wikipedia.org/wiki/Same_origin_policy)`src`，您将无法访问其内容。

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2013-01-22T04:10:13.513

用来[`contentDocument`](http://www.w3schools.com/jsref/prop_frame_contentdocument.asp)实现这个

```
var iframe = document.getElementById('iframeId');
var innerDoc = (iframe.contentDocument) 
               ? iframe.contentDocument 
               : iframe.contentWindow.document;

var ulObj = innerDoc.getElementById("ID_TO_SEARCH"); 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2019-06-24T15:43:08.070

（这是添加到所选答案中）

确保`iframe`在您之前加载

```
contentWindow.document 
```

否则，您`getElementById`将是`null`.

PS：无法发表评论，评论的声誉仍然很低，但这是对所选答案的跟进，因为我花了一些很好的调试时间试图弄清楚我应该`iframe`在选择内部 iframe 元素之前强制加载。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-06-30T13:29:14.270

您需要确保框架已完全加载，最好的方法是使用 onload：

```
<iframe id="nesgt" src="" onload="custom()"></iframe>

function custom(){
    document.getElementById("nesgt").contentWindow.document;
    } 
```

此功能将在 iframe 完全加载时自动运行。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-06-26T08:05:34.500

就我而言，我试图抓取**pdfTron**工具栏，但不幸的是，每次刷新页面时它的**ID都会发生变化。**

所以，我最终通过这样做抓住了它。

```
const pdfToolbar = document.getElementsByTagName('iframe')[0].contentWindow.document.getElementById('HeaderItems'); 
```

正如在 tagName 写入的数组中一样，您的应用程序中将始终拥有 iFrame 的固定索引。

# php - 用于动态显示来自 mysql 的 10 条记录的 PHP 代码

> ID：14451364
> 
> 赞同：3
> 
> 时间：2013-01-22T03:59:19.820
> 
> 标签：php, mysql

嗨，我有 25 行的 MySql 表，我想使用 PHP 在页面中显示前 10 行。当我单击下一步按钮时，它会显示表中的另外 10 行，依此类推...帮助我。谢谢..

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-22T04:02:46.503

非常广泛的问题，但基本可以使用“LIMIT” MySQL 命令解决。基本上，您的 PHP 代码会检测是否有人转到另一个页面，然后当它进行查询时，会调整“LIMIT”。所以对于第 1 页，这个 MySQL 伪代码中的“LIMIT”将是：

```
SELECT * FROM {my table} WHERE {criteria is this} LIMIT 0,10 
```

对于第 2 页，“限制”将是这样的：

```
SELECT * FROM {my table} WHERE {criteria is this} LIMIT 11,20 
```

至于 PHP 分页，你必须想出一些逻辑。也许——也是最传统的——通过 POST 传递 URL 变量，例如：

```
http://localhost/index.php?pn=2 
```

然后你的 PHP 逻辑会做一些数学运算来确定范围的开始和结束。所以在这个例子中可能会做类似的事情：

```
$pn = $GET['pn'];
$per_page = 10;
$bottom_limit = (($pn*$per_page)-$per_page)+1);
$top_limit = ($pn*$per_page); 
```

然后在 PHP 中，LIMIT 将按照以下方式放置：

```
$limit = " LIMIT " . $bottom_limit . ", " . $top_limit; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T04:01:59.443

在查询中使用 LIMIT 语句.. 您需要使用 Php 进行分页..

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-22T04:03:03.707

示例分页代码如下。

尝试一下。

```
<?php

    include('config.php');  // include your code to connect to DB.
    $tbl_name="";       //your table name
    $adjacents = 3;

    $query = "SELECT COUNT(*) as num FROM $tbl_name";
    $total_pages = mysqli_fetch_array(mysqli_query($query));
    $total_pages = $total_pages[num];

    $targetpage = "filename.php";   //your file name  (the name of this file)
    $limit = 10;                                //how many items to show per page
    $page = $_GET['page'];
    if($page) 
        $start = ($page - 1) * $limit;          //first item to display on this page
    else
        $start = 0;                             //if no page var is given, set start to 0

    /* Get data. */
    $sql = "SELECT column_name FROM $tbl_name LIMIT $start, $limit";
    $result = mysqli_query($sql);

    /* Setup page vars for display. */
    if ($page == 0) $page = 1;                  //if no page var is given, default to 1.
    $prev = $page - 1;                          //previous page is page - 1
    $next = $page + 1;                          //next page is page + 1
    $lastpage = ceil($total_pages/$limit);      //lastpage is = total pages / items per page, rounded up.
    $lpm1 = $lastpage - 1;                      //last page minus 1

    /* 
        Now we apply our rules and draw the pagination object. 
        We're actually saving the code to a variable in case we want to draw it more than once.
    */
    $pagination = "";
    if($lastpage > 1)
    {   
        $pagination .= "<div class=\"pagination\">";
        //previous button
        if ($page > 1) 
            $pagination.= "<a href=\"$targetpage?page=$prev\">? previous</a>";
        else
            $pagination.= "<span class=\"disabled\">? previous</span>"; 

        //pages 
        if ($lastpage < 7 + ($adjacents * 2))    //not enough pages to bother breaking it up
        {   
            for ($counter = 1; $counter <= $lastpage; $counter++)
            {
                if ($counter == $page)
                    $pagination.= "<span class=\"current\">$counter</span>";
                else
                    $pagination.= "<a href=\"$targetpage?page=$counter\">$counter</a>";                 
            }
        }
        elseif($lastpage > 5 + ($adjacents * 2)) //enough pages to hide some
        {
            //close to beginning; only hide later pages
            if($page < 1 + ($adjacents * 2))     
            {
                for ($counter = 1; $counter < 4 + ($adjacents * 2); $counter++)
                {
                    if ($counter == $page)
                        $pagination.= "<span class=\"current\">$counter</span>";
                    else
                        $pagination.= "<a href=\"$targetpage?page=$counter\">$counter</a>";                 
                }
                $pagination.= "...";
                $pagination.= "<a href=\"$targetpage?page=$lpm1\">$lpm1</a>";
                $pagination.= "<a href=\"$targetpage?page=$lastpage\">$lastpage</a>";       
            }
            //in middle; hide some front and some back
            elseif($lastpage - ($adjacents * 2) > $page && $page > ($adjacents * 2))
            {
                $pagination.= "<a href=\"$targetpage?page=1\">1</a>";
                $pagination.= "<a href=\"$targetpage?page=2\">2</a>";
                $pagination.= "...";
                for ($counter = $page - $adjacents; $counter <= $page + $adjacents; $counter++)
                {
                    if ($counter == $page)
                        $pagination.= "<span class=\"current\">$counter</span>";
                    else
                        $pagination.= "<a href=\"$targetpage?page=$counter\">$counter</a>";                 
                }
                $pagination.= "...";
                $pagination.= "<a href=\"$targetpage?page=$lpm1\">$lpm1</a>";
                $pagination.= "<a href=\"$targetpage?page=$lastpage\">$lastpage</a>";       
            }
            //close to end; only hide early pages
            else
            {
                $pagination.= "<a href=\"$targetpage?page=1\">1</a>";
                $pagination.= "<a href=\"$targetpage?page=2\">2</a>";
                $pagination.= "...";
                for ($counter = $lastpage - (2 + ($adjacents * 2)); $counter <= $lastpage; $counter++)
                {
                    if ($counter == $page)
                        $pagination.= "<span class=\"current\">$counter</span>";
                    else
                        $pagination.= "<a href=\"$targetpage?page=$counter\">$counter</a>";                 
                }
            }
        }

        //next button
        if ($page < $counter - 1) 
            $pagination.= "<a href=\"$targetpage?page=$next\">next ?</a>";
        else
            $pagination.= "<span class=\"disabled\">next ?</span>";
        $pagination.= "</div>\n";     
    }
?>

    <?php
        while($row = mysqli_fetch_array($result))
        {

        // Your while loop here

        }
    ?>

<?=$pagination?>
```

# c - 如果哈希表是用二维数组实现的，但数组的第二维永远不会被访问，效率会损失多少？

> ID：14451369
> 
> 赞同：0
> 
> 时间：2013-01-22T03:59:48.117
> 
> 标签：c, hash

我需要制作一个最终可用于编写完整汇编程序的哈希表。

基本上我会有类似的东西：foo 100，

我需要对 foo 进行哈希处理，然后存储 100（命令的地址）。我在想我应该只使用二维数组。只有在记录地址（只是一个 int）或返回地址时，才会访问数组的第二维。在第二维中不会进行搜索。

如果我这样实现哈希表，会不会效率低下？如果效率很低，那么实现表格的更好方法是什么？

编辑：我还没有写任何代码。事实上，我什至不知道我要使用什么语言。我想用 C 编写它，所以这将是一个更大的挑战，但如果我觉得时间紧迫，我可能会用 Java 编写它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T04:26:55.417

由于无法查看任何代码，因此没有理由认为这将是低效的。唯一可能的原因是，如果您预先分配了一堆最终没有使用的内存，但是如果没有看到您想到的算法，就无法判断。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T05:01:33.797

如果数组中的所有其他 int 都未使用，那么除了内存浪费之外，您将无法很好地使用缓存，因为缓存行将未被充分利用。

但通常我在编写汇编程序时不会担心这些事情，因为它对性能的要求并不高，比如图形或繁重的计算。至少，我不会过早地急于优化。

然而，重要的是要记住，一旦您开始组装自动生成的大量代码（大约 100,000 行汇编）（例如，由编译器从 C/C++ 代码生成），性能将变得越来越重要，因为用户体验（等待时间）下降。届时将有许多优化候选者：I/O、解析、符号查找、生成尽可能短的跳转指令（如果它们可以有多种编码来实现更短和更长的跳转）。表达式和宏也会有所贡献。您甚至可以首先考虑最小化输入汇编代码中的空白和注释。

# ios - 如何使用 GPS 通知出租车或出租车运营商

> ID：14451371
> 
> 赞同：2
> 
> 时间：2013-01-22T04:00:00.223
> 
> 标签：ios, gps, location

使用 GPS，如果我想被接走，如何通知该地区的出租车司机？我见过很多关于寻找出租车并在任何地方接你的应用程序，例如[http://www.taxifinder.com/](http://www.taxifinder.com/)。

我想知道它背后的想法是什么？出租车运营商是否需要有一个服务器让我可以访问它并告诉他们我需要一辆出租车？我真的不知道该怎么做，谁能赐教。应该如何完成的步骤/列表。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T04:09:56.700

我不知道它的可扩展性，但这里是一个尝试：

1.  可以处理来自前端的请求并对其进行处理的网络服务器。一个简单的情况是它接收请求者的信息，包括 GPS 坐标。然后它将检查附近注册到网络服务器的驱动程序并将推送通知发送给他们。

2.  一个推送通知系统，用于将通知推送给出租车司机。查看[Google Cloud Messaging](http://developer.android.com/google/gcm/index.html)虽然我相信在这种情况下没有过滤用户的选项。

3.  与服务器通信的 Web/本机应用程序。

附言。出租车司机必须为其设备注册推送通知。再想一想，需要出租车司机的位置访问权限以及过滤将接收调度请求的司机。然后可能会添加一个功能，如果一个驱动程序“接受”调度，则通知用户并且其他驱动程序不能再接受它。

# actionscript-3 - 如何在 Flex 3 中上传照片？

> ID：14451372
> 
> 赞同：1
> 
> 时间：2013-01-22T04:00:04.440
> 
> 标签：actionscript-3, apache-flex, flex4, flex3

在 Flex 3 中如何通过浏览和上传选项上传照片？

在 Flex 4 中有一个选项，例如：

```
<net:FileReference id="fileReference"
                       select="fileReference_select(event);"
                       complete="fileReference_complete(event);" /> 
```

但是在 Flex 3 中没有`<net>`标签。

**编辑：**

这是我的按钮单击处理程序代码

```
protected function uploadProfileImage(event:MouseEvent):void
        {

            var fileRef:FileReference= new FileReference();
            browseButton.addEventListener(MouseEvent.CLICK, onButtonClick);

            function onButtonClick(e:MouseEvent):void {
                fileRef.browse([new FileFilter("Images", "*.jpg;*.gif;*.png")]);
                fileRef.addEventListener(Event.SELECT, onFileSelected);
                Alert.show("0")
            }

            function onFileSelected(e:Event):void {
                fileRef.addEventListener(Event.COMPLETE, onFileLoaded);
                //fileRef.load();
                Alert.show("1");
            }

            function onFileLoaded(e:Event):void {
                var loader:Loader = new Loader();
                loader.loadBytes(e.target.data);
                //addChild(loader);
                profileImage.data = loader.content;
                profileImage.width = loader.width;
                profileImage.height = loader.height;
                this.height = profileImage.height;
                this.width = profileImage.width;
                this.visible = true;
                Alert.show("2");

            } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T04:49:15.100

Flex 4 中也没有`<net>`标签。中的`net`部分`<net:FileReference...`是一个 xml 命名空间。在应用程序的 MXML 文件顶部定义了一堆。以下是基于 Flash 的 Flex 4 应用程序的示例：

```
<s:Application xmlns:fx="http://ns.adobe.com/mxml/2009" 
           xmlns:s="library://ns.adobe.com/flex/spark" 
           xmlns:mx="library://ns.adobe.com/flex/mx" minWidth="955" minHeight="600"> 
```

这`xmlns:s="library://ns.adobe.com/flex/spark"`只是将所有 Spark 组件映射到`s`命名空间，它允许您在 MXML 中引用 Spark 组件，如 Button，如下所示：

```
<s:Button label="My Button"/> 
```

对于 Spark，Adobe 提供了一个清单文件，该文件将完全限定的 Spark 包映射到熟悉的 MXML 名称（[这个](https://stackoverflow.com/questions/6453919/how-can-i-make-flashbuilder-use-a-custom-namespace-prefix)问题有一个此类文件的示例）。您还可以将 AS3 包名称映射到 xml 命名空间。

[FileReference](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/net/FileReference.html)在`flash.net`包中。`net`您可以通过将以下内容添加到 MXML 文件中的根标记来将该包绑定到命名空间：

```
xmlns:net="flash.net.*" 
```

完成此操作后，您可以`flash.net`通过在 MXML 中为包中的类添加前缀“net”ala 来引用它们`<net:FileReference...`。

当然，`FileReference`不会继承`UIComponent`，因此您将无法将其直接添加到您的应用程序中。所以这可能不是你的情况。

没有看到比您发布的更多内容，我怀疑`FileReference`您的问题是一个自定义组件，它的包绑定到`net`xmlns。

`<net:FileReference...`您可以发布包含标签的完整 MXML 文档吗？

## 编辑

使用您添加的代码，在您的脚本块中有这个：

```
var fileRef:FileReference = new FileReference();

function onButtonClick(e:MouseEvent):void {
    fileRef.browse([new FileFilter("Images", "*.jpg;*.gif;*.png")]);
    fileRef.addEventListener(Event.SELECT, onFileSelected);
    fileRef.addEventListener(Event.CANCEL, onFileCanceled);
}

function onFileSelected(e:Event):void {
    fileRef.removeEventListener(Event.SELECT, onFileSelected);
    fileRef.removeEventListener(Event.CANCEL, onFileCanceled);

    fileRef.addEventListener(Event.COMPLETE, onFileLoaded);
    fileRef.load();
}

function onFileCanceled(e:Event):void {
    fileRef.removeEventListener(Event.SELECT, onFileSelected);
    fileRef.removeEventListener(Event.CANCEL, onFileCanceled);
}

function onFileLoaded(e:Event):void {
    fileRef.removeEventListener(Event.COMPLETE, onFileLoaded);
    var loader:Loader = new Loader();
    loader.loadBytes(e.target.data);
    profileImage.data = loader.content;
    profileImage.width = loader.width;
    profileImage.height = loader.height;
    profileImage.visible = true;
} 
```

然后在你的 MXML 中有类似的东西：

```
<mx:Button
    label="Click to Load Profile Image"
    click="onButtonClick(event)"/>

<mx:Image
    id="profileImage"
    visible="false"/> 
```

## 编辑 2

`load()`如果您在调用时遇到问题，`FileReference`请确保您的目标是正确的 Flash Player。[这个答案](https://stackoverflow.com/questions/8839259/flash-builder-4-6-not-compiling-for-flash-player-10-2/8841549#8841549)解释了如何在 Flash Builder 中做到这一点。IIRC，Flex 3 项目默认以 Flash Player 9 为目标。

# apache - 使用 Apache 将动态 URL 重写为根域

> ID：14451375
> 
> 赞同：0
> 
> 时间：2013-01-22T04:00:11.130
> 
> 标签：apache, url, dns, rewrite, root

使用 Apache 的 RewriteRule，我怎样才能让它服务：

mydomain.com/webpage.php?name=home_page

简单地说：

mydomain.com/

实际上没有物理 index.html 文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T04:14:31.847

在澄清评论中的问题后，发布者希望“http://mydomain.com”在内部重定向到“http://mydomain.com/webpage.php?name=home_page”（不更改浏览器地址中的 URL酒吧）。将以下内容添加到 .htaccess 应该可以解决问题：

```
RewriteEngine on
RewriteRule ^$ webpage.php?name=home_page [L] 
```

# objective-c - Mapview 不显示来自引脚注释的标题或副标题

> ID：14451392
> 
> 赞同：0
> 
> 时间：2013-01-22T04:02:10.570
> 
> 标签：objective-c, xcode, ios6, mapkit, mkpinannotationview

单击注释引脚时，应用程序返回错误。但是它不会崩溃。它只是不显示标题或副标题。

错误是 (lldb) 然后列出一串数字，如 0x3516b5a0。

**plist 示例：**

```
<dict>
        <key>cellName</key>
        <string>Abingdon Lodge No. 48</string>
        <key>cellSubtitle</key>
        <string>Abingdon, VA</string>
        <key>address</key>
        <string>325 W Main Street Abingdon, Virginia 24210</string>
        <key>latitude</key>
        <real>36.708649</real>
        <key>longitude</key>
        <real>-81.981184</real>
        <key>webSite</key>
        <string>http://www.grandlodgeofvirginia.org/lodges/48/</string>
        <key>statedCom</key>
        <string>Abingdon Lodge No. 48 holds it&apos;s stated communication on the 2nd Monday of the month at 7:30 PM. If there are any exceptions to the regular meeting day or time, they are posted on the Lodge website.</string>
        <key>history</key>
        <string>According to the earliest records the Abingdon Lodge had its origin “At a meeting held at the house of James White in the town.</string>
    </dict> 
```

**地图视图控制器.M**

```
- (void)viewDidLoad
{

    // Do any additional setup after loading the view, typiclly from a nib.
    //Create the region
    MKCoordinateRegion myRegion;

    //Center
    CLLocationCoordinate2D center;
    center.latitude = VA_LATITUDE;
    center.longitude = VA_LONGITUDE;

    //Span
    MKCoordinateSpan span;
    span.latitudeDelta = THE_SPAN;
    span.longitudeDelta = THE_SPAN;

    myRegion.center = center;
    myRegion.span = span;

    //Set our mapView
    [myMapView setRegion:myRegion animated:YES];

    NSString *path = [[NSBundle mainBundle] pathForResource:@"lodges" ofType:@"plist"];
    NSMutableArray* lodgelist = [[NSMutableArray alloc] initWithContentsOfFile:path];

    for(int i = 0; i < [lodgelist count]; i++) {
        float realLatitude = [[[lodgelist objectAtIndex:i] objectForKey:@"latitude"] floatValue];
        float realLongitude = [[[lodgelist objectAtIndex:i] objectForKey:@"longitude"] floatValue];

        CLLocationCoordinate2D mypoint;
        mypoint.latitude = realLatitude;
        mypoint.longitude = realLongitude;
        Annotation *lodgepoint =[Annotation alloc];
        lodgepoint.coordinate = mypoint;
        lodgepoint.title = [[lodgelist objectAtIndex:i] objectForKey:@"cellName"];
        lodgepoint.subtitle = [[lodgelist objectAtIndex:i] objectForKey:@"cellSubtitle"];
        [self.myMapView addAnnotation:lodgepoint];

    }

}

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
    // Dispose of any resources that can be recreated.
}

@end 
```

**MapViewController.h**

```
#import <UIKit/UIKit.h>
#import <MapKit/MapKit.h>

@interface AWCMapViewController : UIViewController

@property (strong, nonatomic) IBOutlet MKMapView *myMapView;

-(IBAction)findmylocation:(id)sender;
-(IBAction)setmaptype:(id)sender;

@property (strong, nonatomic) NSArray *tabledata;

@end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T05:42:05.583

在你的

```
-(MKAnnotationView *)mapView:(MKMapView *)mapView viewForAnnotation:(id<MKAnnotation>)annotation 
```

在您的下方添加以下内容`MKAnnottionView`

```
customPinView.canShowCallout=YES; 
```

问候

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T11:55:26.680

```
@interface Annotation : NSObject <MKAnnotation>

@property(nonatomic, assign) CLLocationCoordinate2D coordinate;
@property(nonatomic, copy) NSString *title;
@property(nonatomic, copy) NSString *subtitle; 
```

我不得不将标题从分配更改为复制。:P

# ruby-on-rails - Ruby on Rails - 什么是模型上的 make 方法？

> ID：14451397
> 
> 赞同：1
> 
> 时间：2013-01-22T04:03:04.833
> 
> 标签：ruby-on-rails, rails-activerecord

在我的 lib/tasks/data.rake 中，我有 User.make(attributes)。make 方法似乎创建了一条新记录，但我找不到任何关于此的文档。make 方法不是由我的用户模型定义的，并且我的用户模型继承了 ActiveRecord::Base。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T04:17:47.760

我“叫朋友”，原来是[https://github.com/notahat/machinist](https://github.com/notahat/machinist) gem

# javascript - 未捕获的类型错误：对象# 没有方法“打开”

> ID：14451400
> 
> 赞同：3
> 
> 时间：2013-01-22T04:03:21.410
> 
> 标签：javascript, google-maps

这个问题我已经有一段时间了。我不断收到此错误：

> 未捕获的类型错误：对象 # 没有“打开”方法

这篇文章中的解决方案也没有真正的帮助。[Uncaught TypeError: Object [object Object] has no method 'open'](https://stackoverflow.com/questions/13763711/uncaught-typeerror-object-object-object-has-no-method-open)。

```
<script type="text/javascript" src="https://maps.googleapis.com/maps/api/js?key=xxxxxx&sensor=false&callback=initializeMap"></script>

<script type="text/javascript" src="/js/infobox_packed.js"></script>

<script type="text/javascript">

var marker1;

function initializeMap() {
    var latlng = new google.maps.LatLng(22.3113315, 114.188804);
    var myMapOptions = {
        zoom: 11,
        center: latlng,
        mapTypeId: google.maps.MapTypeId.ROADMAP
    };

    var map = new google.maps.Map(document.getElementById("map_canvas"), myMapOptions);

    marker1 = new google.maps.Marker({
        map: map,
        draggable: false,
        position: new google.maps.LatLng(22.283378, 114.183826),
        visible: true
    });

    var boxText = document.createElement("div");
    boxText.style.cssText = "border: 1px solid black; margin-top: 8px; background: white; padding: 5px;";
    boxText.innerHTML = "Need help on moving home.<br>Wan Chai<br>Hong Kong";

    var myOptions = {
        content: boxText,
        disableAutoPan: false,
        maxWidth: 0,
        pixelOffset: new google.maps.Size(-140, 0),
        zIndex: null,
        boxStyle: { 
            background: "url('tipbox.gif') no-repeat",
            opacity: 0.75,
            width: "280px"
        },
        closeBoxMargin: "10px 2px 2px 2px",
        closeBoxURL: "http://www.google.com/intl/en_us/mapfiles/close.gif",
        infoBoxClearance: new google.maps.Size(1, 1),
        isHidden: false,
        pane: "floatPane",
        enableEventPropagation: false
    };

    google.maps.event.addListener(marker1, "click", function (e) {
        ib.open(map, this);
    });

    var ib = new InfoBox(myOptions);
    ib.open(map, marker1);
}
</script> 
```

如果有人知道如何有任何想法，请指教。提前致谢

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-01-22T23:49:01.177

这很简单。您正在从某个不支持它的对象调用“open()”。

您在代码中只有两个地方调用了“open()”，第一个地方是使用未初始化的变量 ib。

话虽如此，如果您使用 Chrome 的调试工具，这应该很容易追踪。

# php - 如何使用 cURL 在 PHP 中发出 PATCH 请求？

> ID：14451401
> 
> 赞同：74
> 
> 时间：2013-01-22T04:03:26.613
> 
> 标签：php, curl, patch

我必须使用 PhP cURL 发出 PATCH 请求。我找不到任何文档，所以我尝试了以下方法，但它不起作用。

```
$data = "{'field_name': 'field_value'}";
$url = "http://webservice.url";
$headers = array('X-HTTP-Method-Override: PATCH');
$curl = curl_init();
curl_setopt($curl, CURLOPT_URL, $url);
curl_setopt($curl, CURLOPT_RETURNTRANSFER, 1);
curl_setopt($curl, CURLOPT_POST, 1);
curl_setopt($curl, CURLOPT_POSTFIELDS, $data);
curl_setopt($curl, CURLOPT_HTTPHEADER, $headers);
$response = curl_exec($curl);
curl_close($curl); 
```

知道为什么这不起作用吗？我该如何解决？

**编辑：** 我正在连接到 RESTful Web 服务。它为成功的请求返回 HTTP/1.1 200。不成功的请求返回 HTTP/1.1 403。我不断收到 403。

我尝试将 $data 更改为：

```
$data = "data={'field_name': 'field_value'}"; 
```

它没有改变结果。

**Edit2：** 最终的工作代码。

```
$data = "{'field_name': 'field_value'}";
$url = "http://webservice.url";
$headers = array('Content-Type: application/json');
$curl = curl_init();
curl_setopt($curl, CURLOPT_URL, $url);
curl_setopt($curl, CURLOPT_RETURNTRANSFER, 1);
curl_setopt($curl, CURLOPT_CUSTOMREQUEST, 'PATCH');
curl_setopt($curl, CURLOPT_POSTFIELDS, $data);
curl_setopt($curl, CURLOPT_HTTPHEADER, $headers);
$response = curl_exec($curl);
curl_close($curl); 
```

* * *

## 回答 #1

> 赞同：124
> 
> 时间：2013-01-22T05:57:21.560

`curl_setopt($curl, CURLOPT_CUSTOMREQUEST, 'PATCH');`应该这样做。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-31T15:34:45.263

JSON PATCH 对于数据格式会更好，因为这种格式是为 HTTP PATCH 请求设计的。有关规范，请参阅[https://www.rfc-editor.org/rfc/rfc6902](https://www.rfc-editor.org/rfc/rfc6902)。Rails 4 的教程展示了这个例子（[http://edgeguides.rubyonrails.org/upgrading_ruby_on_rails.html#http-patch](http://edgeguides.rubyonrails.org/upgrading_ruby_on_rails.html#http-patch)）。

```
// https://www.rfc-editor.org/rfc/rfc6902#section-4
$data = '{ "op": "add", "path": "/a/b/c", "value": "foo" }';
$headers = array('Content-Type: application/json-patch+json'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-22T05:57:46.703

尝试使用普通数组

//$data = "{'field_name': 'field_value'}";

$data = array('field_name' => 'field_value' );

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2020-04-13T11:29:59.083

您可以在一个 curl 函数中定义方法并使用所有内容。希望这对您有所帮助。

```
define('GI_HTTP_METHOD_GET', 'GET');
define('GI_HTTP_METHOD_POST', 'POST');
define('GI_HTTP_METHOD_PUT', 'PUT');
define('GI_HTTP_METHOD_PATCH', 'PATCH');

curl_setopt($ch, CURLOPT_POST, true);
if ($method === GI_HTTP_METHOD_PUT) {
    curl_setopt($ch, CURLOPT_CUSTOMREQUEST, GI_HTTP_METHOD_PUT);
}
if ($method === GI_HTTP_METHOD_PATCH) {
    curl_setopt($ch, CURLOPT_CUSTOMREQUEST, GI_HTTP_METHOD_PATCH);
} 
```

# objective-c - 在圆形边框内移动 UIButton？

> ID：14451404
> 
> 赞同：1
> 
> 时间：2013-01-22T04:04:10.900
> 
> 标签：objective-c, uiviewanimation

在我的应用程序中，我需要在圆形边框内移动一个*uibutton*，我尝试了以下代码，但它似乎没有工作 -

```
- (IBAction) imageMoved:(id) sender withEvent:(UIEvent *) event{

    UIControl *control = sender;
    UITouch *t = [[event allTouches] anyObject];
    CGPoint pPrev = [t previousLocationInView:control];
    CGPoint p = [t locationInView:control];

    if (control.center.x>40&&control.center.x<300) {
        CGPoint center = control.center;
        center.x += p.x - pPrev.x;
        center.y += p.y - pPrev.y;
        control.center = center;
    }else if (control.center.y>40&&control.center.y<320){
        CGPoint center = control.center;
        center.x += p.x - pPrev.x;
        center.y += p.y - pPrev.y;
        control.center = center;
    }else{

    }
} 
```

有谁知道如何做到这一点？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T07:04:11.493

要`UIButton`使用触摸移动，您不能使用任何触摸方法，例如`touchBegin`“touchMoved”。

您必须为不同的操作创建 IBAction，例如

```
UIControlEventTouchDragOutside
UIControlEventTouchDragInside
UIControlEventTouchDragExit
UIControlEventTouchDragEnter 
```

通过使用这些方法，您可以移动按钮...

并且要继续在圆形边框中移动，您的逻辑看起来不错....

# android - 调用 getSystemService(Context.LOCATION_SERVICE) 并且未调用 onLocationChanged 时出现 NullpointerException

> ID：14451407
> 
> 赞同：5
> 
> 时间：2013-01-22T04:04:32.770
> 
> 标签：android, android-maps, android-location

我正在尝试创建一个更新当前 gps 位置的后台服务。我正在`NullPointerException`排队`LocationManager lm = (LocationManager) getSystemService(Context.LOCATION_SERVICE);`

HomeActivity 启动服务

```
startService(new Intent(getApplicationContext(), ForHire.class)); 
```

Service (ForHire) 创建一个 TimerTask 更新

```
public class ForHire extends Service {

...
private Timer getUpdatesNow = new Timer();
private Updates updates = new Updates(getUpdatesNow);

@Override
public void onCreate() {
    ...
    getUpdatesNow.schedule(updates, God.KM20TIME);
    Log.v("Taxeeta", "Notification created");
}

    private class Updates extends TimerTask implements LocationListener {
    private Timer getUpdatesNow;

    public Updates(Timer newGetUpdatesNow) {
        super();
        getUpdatesNow = newGetUpdatesNow;
        LocationManager lm = (LocationManager) getSystemService(Context.LOCATION_SERVICE);
        lm.requestLocationUpdates(LocationManager.GPS_PROVIDER,
                God.KM20TIME, God.KM20DISTANCE, (LocationListener) this);
    }
    public void run() {
        ...
        //do some cleanup
    }
            @Override
    public void onLocationChanged(Location location) {
        Log.v("Taxeeta", "Location changed");
        // do a update of the current location.
    } 
```

第一个问题是我得到了 NullPointerException。第二个问题是，如果我注释掉`LocationManager lm = (LocationManager) getSystemService(Context.LOCATION_SERVICE); lm.requestLocationUpdates(LocationManager.GPS_PROVIDER, God.KM20TIME, God.KM20DISTANCE, (LocationListener) this);`这两行，则永远不会调用 onLocationChanged。

我的清单

```
<uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" />
<uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION" />
<uses-permission android:name="android.permission.INTERNET" />
<uses-permission android:name="android.permission.READ_PHONE_STATE" />
<uses-permission android:name="android.permission.ACCESS_WIFI_STATE" />
<uses-permission android:name="android.permission.CALL_PHONE" />
<application ...>
   ...
   <uses-library android:name="com.google.android.maps" />
</application> 
```

我在这里想念什么？

编辑：`Values of KM20TIME = 5000`（5 秒）和`KM20DISTANCE = 1`（1 米）。除了下面的修复之外，我走出家门，启用 GPS，然后从阳台的一个角落走到另一个角落。我注意到我每 5 秒从一个角落走到另一个角落时，我的 gps (LSB) 会发生变化。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-22T04:07:43.767

您最早可以调用`new Updates(getUpdatesNow);`的是在您的服务`onCreate()`方法中。原因很简单，`getSystemService()`需要一个有效的 Context 在进入之前不存在`onCreate()`。

尝试：

```
private Timer getUpdatesNow;
private Updates updates;

@Override
public void onCreate() {
    ...
    getUpdatesNow = new Timer();
    updates = new Updates(getUpdatesNow); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-22T04:22:25.377

```
// Acquire a reference to the system Location Manager
LocationManager locationManager = (LocationManager) getSystemService(Context.LOCATION_SERVICE);

// Define a listener that responds to location updates
Location location = locationManager.getLastKnownLocation(LocationManager.NETWORK_PROVIDER);

if (location != null) {
    Toast.makeText(getBaseContext(),
                            "Last Location is found..",
                            Toast.LENGTH_LONG).show();  
} else {

    Toast.makeText(getBaseContext(),
                            "Last Location is not found..",
                            Toast.LENGTH_LONG).show();
}
LocationListener locationListener = new LocationListener() {
public void onStatusChanged(String provider,
    int status, Bundle extras) {
}
public void onProviderEnabled(String provider) {
    Toast.makeText(getApplicationContext(),
        "Gps Enabled", Toast.LENGTH_SHORT).show();
}
public void onProviderDisabled(String provider) {
    Toast.makeText(getApplicationContext(),
        "Gps Disabled", Toast.LENGTH_SHORT).show();
}

@Override
public void onLocationChanged(Location location) {
    Log.i("geolocation",
        "lat is : " + location.getLatitude()
        + " and " + location.getLongitude()
        + "");
    Toast.makeText(getBaseContext(),
    "Location is Changed..", Toast.LENGTH_LONG)
        .show();
}
};
// Register the listener with the Location Manager to receive location updates
locationManager.requestLocationUpdates(
LocationManager.GPS_PROVIDER, 0, 0,
locationListener); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-22T04:12:51.033

```
@Override
public void onCreate() {
     new Updates(getUpdatesNow);
    ...
    getUpdatesNow.schedule(updates, God.KM20TIME);
    Log.v("Taxeeta", "Notification created");
} 
```

# c# - 使用 WinForms 的实体框架 UI 验证

> ID：14451413
> 
> 赞同：19
> 
> 时间：2013-01-22T04:05:30.703
> 
> 标签：c#, winforms, entity-framework, validation

我有兴趣使用 WinForms 应用程序和 Entity Framework 5 设置客户端验证。我知道我可以实现 IValidatableObject 接口来执行每个实体可能需要的自定义验证。

但是，由于我使用的是 WinForms，因此我想在用户填写表单时出现验证错误时使用 ErrorProvider 向用户显示一个很好的通知。是否可以使用 IValidatableObject 接口来实现此功能，或者我是否需要在我的实体上实现 IDataErrorInfo 接口才能使 ErrorProvider 正常工作？

如果您对更好的替代方案有任何其他建议，请告诉我，我也很乐意对此进行调查。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-12-04T16:56:21.617

假设您有一个名为的实体`Car`，并且此类包含一个需要**验证**的属性。

```
public class Car
{
  [Key, DatabaseGenerated(DatabaseGeneratedOption.Identity)]
  public int Id { get; set; }

  // Accepted values have to be between 1 and 5.
  public int NeedToBeValidatedRange { get; set; }
} 
```

在我将称为实体的示例中，您必须为所有实体创建一个基类。

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.ComponentModel.DataAnnotations;
using System.Linq;

/// This is the base class for all entities and it provide a change notfication.
public abstract class Entity : INotifyPropertyChanged
{
  // Event fired when the property is changed!
  public event PropertyChangedEventHandler PropertyChanged;

  /// Called when int property in the inherited class is changed for ther others properties like (double, long, or other entities etc,) You have to do it.
  protected void HandlePropertyChange(ref int value, int newValue, string propertyName)
  {
    if (value != newValue)
    {
      value = newValue;
      this.Validate(propertyName);
      this.PropertyChanged(this, new PropertyChangedEventArgs(propertyName));
    }
  }

  /// Validate the property 
  /// <returns>
  /// The list of validation errors
  /// </returns>
  private ICollection<ValidationResult> PropertyValidator(string propertyName)
  {
    var validationResults = new Collection<ValidationResult>();
    PropertyDescriptor property = TypeDescriptor.GetProperties(this)[propertyName];

    Validator.TryValidateProperty(
      property.GetValue(this),
      new ValidationContext(this, null, null) { MemberName = propertyName },
      validationResults);

    return validationResults;
  }

  /// Validates the given property and return all found validation errors.
  private void Validate(string propName)
  {
    var validationResults = this.PropertyValidator(propName);
    if (validationResults.Count > 0)
    {
      var validationExceptions = validationResults.Select(validationResult => new ValidationException(validationResult.ErrorMessage));
      var aggregateException = new AggregateException(validationExceptions);
      throw aggregateException;
    }
  }
} 
```

现在你应该修改 Car 类，它应该是这样的：

```
public class Car : Entity
{
  private int id;
  private int needToBeValidatedRange;

  [Key, DatabaseGenerated(DatabaseGeneratedOption.Identity)]
  public int Id
  {
    get
    {
      return this.id;
    }
    set
    {
      this.HandlePropertyChange(ref this.id, value, "Id");
    }
  }

  [Range(1, 5)]
  public int NeedToBeValidatedRange
  {
    get
    {
      return this.needToBeValidatedRange;
    }
    set
    {
      this.HandlePropertyChange(ref this.needToBeValidatedRange, value, "NeedToBeValidatedRange ");
    }
  }
} 
```

在用户界面的某个地方，您正在创建汽车实体：

```
Car car1 = new Car();
car1.NeedToBeValidatedRange = 3;  // This will work!

Car car2 = new Car();
car2.NeedToBeValidatedRange = 6;  // This will throw ValidationException 
```

*   WPF 支持非常好的ValidationException。
*   Winforms 部分支持 ValidationException 但现在您可以自由地处理它了。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-12-01T21:44:08.647

有两种选择：

*   使用 IValidateObject 和 IdataErrorInfo 扩展您的 poco 类，并在验证方法中引发 ui 错误。
*   在调用 save changes 时捕获验证错误，并根据哪个实体字段生成验证错误直接调用 ErrorProvider。

有关使用 IValidateObject 扩展 poco 类并在调用保存更改时处理验证错误的示例，请参见以下内容。

**[http://msdn.microsoft.com/en-us/data/gg193959.aspx](http://msdn.microsoft.com/en-us/data/gg193959.aspx)**

# c - 什么更有效，从文件中逐字读取或一次读取一行并使用 C 拆分字符串？

> ID：14451416
> 
> 赞同：6
> 
> 时间：2013-01-22T04:05:49.790
> 
> 标签：c, file, processing-efficiency

我想用 C 语言开发一个应用程序，我需要从磁盘上的文件中逐字检查。有人告诉我，从文件中读取一行然后将其拆分为单词会更有效，因为需要更少的文件访问。这是真的吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-22T04:08:03.370

如果您知道您将需要整个文件，那么您可能会尽可能大块地读取它（在极端情况下，您将一次性将整个文件内存映射到内存中）。你是对的，这是因为需要更少的文件访问。

但是，如果您的程序不慢，那么请以使其开发速度最快且最无错误的方式编写它。早期优化是一种严重的罪过。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-22T04:11:30.520

不是真的，假设您将要使用`scanf()`并且您对“单词”的定义与被`scanf()`视为单词的内容相匹配。

标准 I/O 库将缓冲实际的磁盘读取，并且读取一行或一个单词在磁盘访问方面具有基本相同的 I/O 成本。如果您要使用 读取文件的大块`fread()`，您可能会获得一些好处 - 以复杂性为代价。

但是对于阅读单词，很可能`scanf()`还有一个保护性的字符串格式说明符，例如`%99s`您的数组是否`char word[100];`可以正常工作并且可能更易于编码。

如果您对 word 的定义比 支持的定义更复杂`scanf()`，那么阅读行和拆分可能会更容易。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-22T04:12:36.083

就拆分而言，在性能方面没有区别。您在一种情况下使用空格进行拆分，在另一种情况下使用换行符。

但是，它会以您需要分配缓冲区 M 次的方式影响 word，而对于行，它将是 N 次，其中 M>N。因此，如果您采用分词方法，请先尝试计算总内存需求，分配那么多块（这样您就不会得到碎片化的 M 个块），然后从该块中获取 M 个缓冲区。请注意，相同的方法可以应用于行拆分，但差异将不太明显。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-22T04:16:00.463

这是正确的，您应该将它们读入缓冲区，然后拆分为您定义为“单词”的任何内容。唯一不正确的情况是，如果您能够`fscanf()`正确地抓住您认为是单词的内容（值得怀疑）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-22T09:23:54.683

实际上并没有回答您的确切问题（单词与行），但如果您需要同时在内存中的所有单词，那么最有效的方法是：

1.  确定文件大小
2.  为整个文件分配缓冲区*加上一个字节*
3.  将整个文件读取到缓冲区，并放入`'\0'`额外的字节。
4.  跳过它并计算它有多少单词
5.  分配`char*`（指向单词的指针）或`int`（指向缓冲区的索引）索引数组，大小与字数匹配
6.  对缓冲区进行第二次传递，并将单词首字母的地址或索引存储到索引数组中，并用`'\0'`（字符串结束标记）覆盖缓冲区中的其他字节。

如果您有足够的内存，那么假设单词数的最坏情况可能会稍微快一些：（`(filesize+1) / 2`一个字母单词之间有一个空格，文件中有奇数个字节）。还采用带有索引数组的 Java ArrayList 或 Qt QVector 方法，并`realloc()`在字数超过当前容量时使用使其大小加倍，将非常有效（由于加倍=指数增长，重新分配不会发生多次）。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-22T07:42:50.123

主要的性能瓶颈可能是：

*   对 stdio 文件 I/O 函数的任何调用。调用越少，开销就越少。
*   动态内存分配。应该尽量少做。最终，对 malloc 的大量调用会导致堆分段。

所以它归结为一个经典的编程考虑：你可以获得快速的执行时间，或者你可以获得低内存使用率。你不能两者兼得，但你可以找到一些在执行时间和内存消耗方面都最有效的合适的中间立场。

一种极端情况是，通过将整个文件作为一个大块读取并将其上传到动态内存，可以获得最快的执行速度。或者另一个极端，您可以逐字节读取它并在读取时对其进行评估，这可能会使程序变慢但根本不会使用动态内存。

您需要具备各种特定于 CPU 和特定于操作系统的功能的基本知识，才能最有效地优化代码。对齐、缓存内存布局、底层 API 函数调用的有效性等问题都很重要。

为什么不尝试几种不同的方法并对其进行基准测试呢？

# cuda - 不同内核的线程如何访问同一个全局内存地址？

> ID：14451417
> 
> 赞同：3
> 
> 时间：2013-01-22T04:05:50.433
> 
> 标签：cuda

如果一个warp中的许多线程想要读取全局内存中的一个地址，这个数据就会被广播，对吗？

如果一个 warp 中的许多线程要写入全局内存中的一个地址，则有一个序列化，但无法预测顺序，对吗？

但是，第一个问题：如果不同线程中不同块中的许多线程想要写入全局内存中的地址？GPU会做什么？序列化所有对该地址的访问？是否有数据一致性的保证？

使用 Hyper-Q 可以启动大量包含内核的流。如果我在内存中有一个位置，并且不同内核中的多个线程想要写入或读取这个地址，那么 GPU 会做什么？序列化来自不同内核的所有线程的访问，还是 GPU 什么都不做而会发生一些不一致？当多个内核读取/写入同一地址时，是否有任何数据一致性保证？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-22T04:50:06.383

最好每个问题问一个问题。

> > 如果一个warp中的许多线程想读取全局内存中的一个地址，这个数据就会被广播，对吗？

是的，这适用于 Fermi (CC2.0) 及更高版本。

> > 如果一个warp中的许多线程要写入全局内存中的一个地址，有一个序列化，但无法预测顺序，对吗？

正确的。订单未定义。

> > 如果不同线程中不同块中的许多线程想要写入全局内存中的地址？GPU会做什么？序列化所有对该地址的访问？

如果访问是同时进行的，则将它们序列化。同样，订单是未定义的。

> > 是否有数据一致性的保证？

不知道你所说的数据一致性是什么意思。无论如何，除了序列化同时写入之外，GPU 还能做什么？我很惊讶这是一个如此困难的概念，因为在我看来没有明显的选择。

> > 如果我在内存中有一个位置，并且不同内核中的多个线程想要写入或读取这个地址，那么 GPU 会做什么？序列化来自不同内核的所有线程的访问，或者 GPU 什么都不做，并且会发生一些不一致？当多个内核读取/写入同一地址时，是否有任何数据一致性保证？

对全局内存的同时写入的起源是什么并不重要，无论是来自相同的warp，还是不同的warp，在不同的块中，在不同的内核中。同时写入以未定义的顺序序列化。同样，对于“数据一致性”，我想知道您的意思。同时读取*和*写入也会产生未定义的行为。读取可能会返回一个值，包括内存位置的初始值或写入的任何值。

同时写入任何 GPU 内存位置的最终结果是未定义的。如果所有同时写入都在写入相同的值，那么该位置的最终值将反映这一点。否则，最终值将反映写入的值之一。哪个值未定义。除此之外，您的大多数问题和陈述对我来说都没有意义。（你所说的数据一致性是什么意思？）你不应该期望这种编程行为有任何合理性。GPU 应该被编程为分布式独立工作机器，而不是全局同步机器。请注意，“未定义”还意味着即使输入数据相同，结果也可能从内核的一次运行到下一次运行有所不同。

Simultaneous or nearly simultaneous reading and writing of global memory from different blocks (whether from the same or different kernels) is especially hazardous on Fermi (cc2.x) devices due to the independent non-coherent L1 caches that are interposed between the SMs (where the threadblocks execute) and the L2 cache (which is device-wide, and therefore coherent). Attempting to create synchronized behavior between threadblocks using global memory as a vehicle is difficult at best, and discouraged. It is suggested to consider ways to recast your algorithm to structure the work independently.

# c# - 如何在 IQueryable 中使用 Linq

> ID：14451425
> 
> 赞同：0
> 
> 时间：2013-01-22T04:06:48.177
> 
> 标签：c#, linq, entity-framework-4, iqueryable

我想在 IQueryable 中加入两个实体

这就是我所做的：

```
IQueryable<EmployeeSchedule> employeeScheduleResult = 
    from empSched in ctx.EmployeeSchedules.ToList() 
    join emp in ctx.Employees.ToList() on empSched.EmployeeId equals emp.EmployeeId 
    select new {
        empSched.ScheduleId,
        empSched.ScheduleDt,
        empSched.Branch,
        empSched.StartTime,
        empSched.EndTime,
        empSched.LunchTime,
        empSched.LunchBreak,
        empSched.LunchBreak_NS,
        Employee = emp.LastName + emp.FirstName + emp.MiddleName
    }; 
```

这是我收到的错误：

> 无法将类型“System.Collections.Generic.IEnumerable”隐式转换为“System.Linq.IQueryable”。存在显式转换（您是否缺少演员表？）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T04:17:03.887

该错误与 Join 子句无关。你得到这个是因为你要求你的查询返回一个集合，`EmployeeSchedule`但是在选择中你创建了一个匿名类型。更改您的选择以返回新的`EmployeeSchedules`：

```
select new EmployeeSchedule
{
    ScheduleId = empSched.ScheduleId,
    ScheduleDt = empSched.ScheduleDt,
    [...and so on..]
}; 
```

# c++ - 作为模板参数的函数指针和作为模板参数的函数签名之间的区别

> ID：14451429
> 
> 赞同：3
> 
> 时间：2013-01-22T04:07:06.970
> 
> 标签：c++, templates, function-signature

以下语法有什么区别：

```
template<typename T>
struct A { ... };

A<void (*)()> o1; // <--- ok
A<void()> o2;  // <----- ?? 
```

我想知道除了库之外的第二种语法的实际用途（我检查过我们不能声明`void()`inside的对象`A`）。我已经提到了这个[问题](https://stackoverflow.com/questions/4642079/function-signature-like-expressions-as-c-template-arguments)，但这无济于事。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T04:14:39.083

`void()`是不带参数且不返回任何内容的函数的类型。

`void(*)()`是指向不带参数且不返回任何内容的函数的指针的类型。

作为 where`void()`使用和有用的示例，请看`std::function`- 它使用的语法比必须传入函数指针签名要好得多。当您的意思是“我想告诉这个模板类调用的签名”时，您可以使用完全相同的语法。

主要是，这只是语法糖。但糖是生活的调味品。

# android - Android：启动服务以播放广播频道

> ID：14451432
> 
> 赞同：0
> 
> 时间：2013-01-22T04:07:41.840
> 
> 标签：android, service

我正在尝试制作一个在后台播放的服务，它是无界的。我已经浏览了互联网上的一些示例代码，但是当我调用服务类时，我无法让我的应用程序播放收音机。

请查看代码并告诉我哪里出错了...当我从 ArmanFMRadio onClick 调用 MyService 类时，它会显示“我的服务已创建”和“我的服务已启动”，但无法播放无线电流的音频关联。我已经检查过了，链接看起来很好，所以问题出在我理解的代码中：

```
package com.etc.etcc;

public class ArmanFMRadio extends Activity implements OnClickListener {

private ProgressBar playSeekBar;
private Button buttonPlay;
private Button buttonStopPlay;
private MediaPlayer player;

/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.armanfm);
    initializeUIElements();
    //initializeMediaPlayer();

}

private void initializeUIElements() {

    playSeekBar = (ProgressBar) findViewById(R.id.progressBar1);
    playSeekBar.setMax(100);
    playSeekBar.setVisibility(View.INVISIBLE);

    buttonPlay = (Button) findViewById(R.id.buttonPlay);
    buttonPlay.setOnClickListener(this);

    buttonStopPlay = (Button) findViewById(R.id.buttonStopPlay);
    buttonStopPlay.setEnabled(false);
    buttonStopPlay.setOnClickListener(this);

}

private void initializeMediaPlayer() {
    player = new MediaPlayer();

        try {
            player.setDataSource("http://50.117.26.26:3953/Live");
        } catch (IllegalArgumentException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (SecurityException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (IllegalStateException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }

    player.setOnBufferingUpdateListener(new OnBufferingUpdateListener() {

        public void onBufferingUpdate(MediaPlayer mp, int percent) {
            playSeekBar.setVisibility(View.VISIBLE);
            playSeekBar.setSecondaryProgress(percent);
            Log.i("Buffering", "" + percent);

        }
    });
}

public void onClick(View v) {
    switch(v.getId()){
    case R.id.buttonPlay:

        playSeekBar.setVisibility(View.VISIBLE);
        buttonStopPlay.setEnabled(true);
        buttonPlay.setEnabled(false);
        startService(new Intent(this, MyService.class));

        //startPlaying();
        break;
    case R.id.buttonStopPlay:
        stopPlaying();
        break;
    } 

}

private void startPlaying() {
    buttonStopPlay.setEnabled(true);
    buttonPlay.setEnabled(false);

    playSeekBar.setVisibility(View.VISIBLE);

    player.prepareAsync();
    player.setOnPreparedListener(new OnPreparedListener() {

        public void onPrepared(MediaPlayer mp) {

        player.start();

        }
    });

    setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_PORTRAIT);

}

private void stopPlaying() {
    if (player.isPlaying()) {
        player.stop();
        player.release();
        initializeMediaPlayer();
    }

    buttonPlay.setEnabled(true);
    buttonStopPlay.setEnabled(false);
    playSeekBar.setVisibility(View.INVISIBLE);
}

@Override
protected void onPause() {
    super.onPause();
    if (player.isPlaying()) {
        player.stop();
    }
}
} 
```

只需查看上面代码的 onClick，因为这个类对我的想法很好。

我的服务类：

```
package com.etc.etcc;

public class MyService extends Service {
private static final String TAG = "MyService";
private MediaPlayer player;

@Override
public IBinder onBind(Intent intent) {
    return null;
}

@Override
public void onCreate() {
    Toast.makeText(this, "My Service Created", Toast.LENGTH_LONG).show();
    Log.d(TAG, "onCreate");

}

@Override
public void onDestroy() {
    Toast.makeText(this, "My Service Stopped", Toast.LENGTH_LONG).show();
    Log.d(TAG, "onDestroy");
    player.stop();
}

@Override
public void onStart(Intent intent, int startid) {
    Toast.makeText(this, "My Service Started", Toast.LENGTH_LONG).show();
    Log.d(TAG, "onStart");

    player = new MediaPlayer();
    try {
        player.setDataSource("http://50.117.26.26:3953/Live");
    } catch (IllegalArgumentException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (SecurityException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (IllegalStateException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
    player.prepareAsync();
    player.setOnPreparedListener(new OnPreparedListener() {

        public void onPrepared(MediaPlayer mp) {

        player.start();

        }
    });
 }
 } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T05:01:35.920

1.  `onStart`是不推荐使用的方法。你应该使用`onStartCommand`方法。
2.  调试您的代码并检查天气是否有任何异常或其他东西
3.  此外，您正在使用该服务，因此您的服务可能会调用两次，在这种情况下，您的`onStartCommand`方法将被调用两次，因此您必须检查您将作为参数获得的 startId。**如果 startId > 1 这意味着您的服务之前已启动**，因此您可以停止媒体播放器并再次启动具有最新源的媒体播放器，或者您可以忽略第二个请求。
4.  如果您对服务没有信心，您可以将您的代码放入活动中并检查您的代码是否正常工作，然后您可以在服务中替换此代码。

# python - 如何从覆盖率报告中排除（目录或文件）

> ID：14451442
> 
> 赞同：2
> 
> 时间：2013-01-22T04:08:12.613
> 
> 标签：python, django, jenkins, django-jenkins

我正在使用 django-jenkins 并试图让 jenkins 在覆盖率报告中忽略我的应用程序中的文件夹。

我从[https://github.com/kmmbvnr/django-jenkins/blob/master/django_jenkins/tasks/with_coverage.py](https://github.com/kmmbvnr/django-jenkins/blob/master/django_jenkins/tasks/with_coverage.py)找到了选项 --coverage-exclude ，但似乎无法让它工作。

到目前为止，我已经尝试过：

```
python [project]/manage.py jenkins [app] --coverage-exclude=COVERAGE_EXCLUDES_FOLDERS 
```

和

```
COVERAGE_EXCLUDES_FOLDERS = (
    '[app]/[dir to be excluded]/*'
) 
```

以及各种路径名组合

并且

```
python [project]/manage.py jenkins [app] --coverage-exclude='[path to dir]' 
```

谁能告诉我如何使用它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T22:15:40.060

我在覆盖率报告期间遇到了忽略迁移的问题，并发现以下工作

```
COVERAGE_EXCLUDES_FOLDERS = ['people/migrations/*'] 
```

而不是

```
COVERAGE_EXCLUDES_FOLDERS = ('people/migrations/*') 
```

# ipad - MVC 多层移动应用

> ID：14451444
> 
> 赞同：0
> 
> 时间：2013-01-22T04:08:15.847
> 
> 标签：ipad, model-view-controller, mobile, 3-tier

我对使用 MVC 模式有点困惑。我们有一个 3 层架构：数据、中间件、前端。我们正在为 iPad 开发一个应用程序，它基本上执行以下操作：

*   使用 JSON 服务
*   以某种 UI 形式显示结果
*   用户交互（点击图标）/修改（编辑某些输入）
*   重复...

一个业务流程在前一个流程的 n 次迭代后完成，即我们消费一个服务并更新屏幕，用户做了一些事情，我们使用前一个服务的响应数据加上一些其他用户输入作为参数到一个第二个请求，然后将第二个的结果提供给第三个，依此类推，直到该过程完成。

我的问题是我真的不明白 MVC 模式如何适合这个。我只在前端层工作（只是用 Cocoa Touch 开发 iPad），我应该在 iPad 应用程序中拥有 MVC 的三个组件吗？还是只是视图和控制器？

我的困惑来自这样一个事实，据我所知，模型是数据层，控制器是中间件，视图是 iPad 应用程序，但我觉得我必须在前端有某种模型表示层。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-13T11:50:58.977

在使用 MVC 模式进行了更多工作并阅读了许多参考资料之后，其中大部分来自 SO 中的问题，我想我可以给出这样的答案：

MVC 模式是应用程序组件之间关注点的逻辑分离。三层架构实现了数据、应用程序处理和表示之间的关注点分离，但它也意味着物理分离，因为它本质上是一个服务器-客户端架构。

这两种技术可以同时使用，因为它们可以被视为互补。

由于 MVC 模式是一种逻辑分离，因此模型的不同部分很可能位于不同的物理位置。控制器也是如此，您可以在移动设备和服务器中拥有不同的控制器部分。您的所有视图都在设备中。

以下是如何将这两种技术应用于开发服务器-客户端移动应用程序的摘要

**模型**

**模型**是您的数据和修改它的规则，这意味着您的模型的一部分位于**应用程序处理**层中。数据可以是本地的，即存储在设备中，这意味着它位于**表示**层中，也可以是远程的，例如在数据库中，以及表示**数据**层中的所有中间对象。

**看法**

**视图**位于表示**层**。这是设备上的实际用户界面。

**控制器**

**控制器**也可以物理分布在客户端和服务器中。这是从模型接收通知并更新视图或处理来自视图的事件并相应地使用模型的所有代码。这将其置于**应用程序处理**层。

# iphone - 如何在 iPhone 上通过 JSON 使用 XML Web 服务

> ID：14451447
> 
> 赞同：0
> 
> 时间：2013-01-22T04:08:46.523
> 
> 标签：iphone, xml, json, web-services

我想从 iphone 中的特定 URL 进行简单的 XML 调用，但是在调用时我每次都没有得到更新的结果，我已经检查了 URL，但仍然没有得到实际结果，

听到的是 .m 控制器代码

```
//This is SOAP calling
NSString *postString = @"<?xml version=\"1.0\" encoding=\"utf-8\"?>\n"
    "<soap:Envelope xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xmlns:xsd=\"http://www.w3.org/2001/XMLSchema\" xmlns:soap=\"http://schemas.xmlsoap.org/soap/envelope/\">\n"
    "<soap:Body>\n"
    "<GetCountries xmlns=\"http://www.webserviceX.NET\"/>\n"
    "</soap:Body>\n"
    "</soap:Envelope>";

//this is calling from URL wia above SOAP    
    dataWebService = [[NSMutableData data] retain];

    NSURL *tempURL = [NSURL URLWithString:[NSString stringWithFormat:@"http://www.webservicex.net/country.asmx"]];
    NSMutableURLRequest *request = [[NSMutableURLRequest requestWithURL:tempURL] retain];
    NSString *postLength =  [NSString stringWithFormat:@"%d", [postString length]];
    [request addValue:@"text/xml; charset=utf-8" forHTTPHeaderField:@"Content-Type"];
    [request addValue:@"http://www.webserviceX.NET/GetCountries" forHTTPHeaderField:@"SOAPAction"];
    [request addValue:postLength forHTTPHeaderField:@"Content-Length"];
    [request setHTTPMethod:@"POST"];
    [request setHTTPBody:[postString dataUsingEncoding:NSUTF8StringEncoding]];
    NSURLConnection * myConnection = [NSURLConnection connectionWithRequest:request delegate:self];
    [myConnection start];
    NSLog(@"%@Testing ",myConnection);
    [request release]; 
```

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T04:44:25.833

任何 PHP 脚本都可以从`NSURLConnection`. 这是一个如何做到这一点的示例：

PHP

```
<?php

    print json_encode(array('MyKey' => 'value123'));
?> 
```

Objective-C

```
NSData *myReceivedData = [NSURLConnection sendSynchronousRequest:[NSURLRequest requestWithURL:[NSURL URLWithString:@"http://myurl/path/to/api"]]];
NSError *jsonParseError = nil;
NSDictionary *jsonObj = [NSJSONSerialization JSONObjectWithData:myReceivedData options:0 error:&jsonParseError];

if (jsonParseError == nil) {
    NSLog(@"Value of MyKey: %@", [jsonObj objectForKey:@"MyKey"]);
}
else {
    NSLog(@"JSON Parse error: %@", jsonParseError);
} 
```

随意将同步请求更改为使用委托进行异步调用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T05:07:35.517

解决方案取决于您的方便。那就是您的 Web 服务是 JSON 格式或 XML 格式，取决于您可以解析并使用响应。

# java - JSpinner 给出旧值

> ID：14451449
> 
> 赞同：1
> 
> 时间：2013-01-22T04:09:06.730
> 
> 标签：java, swing, event-listener, jspinner, changelistener

我在我的项目中使用了几个显示小时和分钟的 JSpinner。当 JSpinner 递增或递减时，我必须将值保存到数据库中。但问题是 JSpinners 给了我旧的价值观。例如-如果显示的时间是`09:30`并且我将时间增加到`10:30`，我将 09:30 作为返回值。我正在使用以下代码

更新的 SSCCE

```
package spinnerupdation;

import java.awt.Container;
import java.awt.FlowLayout;
import java.text.SimpleDateFormat;
import java.util.Calendar;
import javax.swing.JFormattedTextField;
import javax.swing.JFrame;
import javax.swing.JPanel;
import javax.swing.JSpinner;
import javax.swing.SpinnerDateModel;
import javax.swing.event.ChangeEvent;
import javax.swing.event.ChangeListener;
import javax.swing.text.DateFormatter;
import javax.swing.text.DefaultFormatterFactory;

/**
 *
 * @author Rohan Kandwal
 */
public class SpinnerUpdation extends JFrame{
 public JSpinner spinner;
    SpinnerUpdation(){
        Container pane=this.getContentPane();
        JPanel panel=new JPanel();
        panel.setLayout(new FlowLayout());
        SpinnerDateModel model=new SpinnerDateModel();
        model.setCalendarField(Calendar.HOUR);
        spinner=new JSpinner();
        spinner.setModel(model);
        spinner.setEditor(new JSpinner.DateEditor(spinner,"hh:mm"));
        panel.add(spinner);
        pane.add(panel);
        spinner.addChangeListener(new ChangeListener() {

            @Override
            public void stateChanged(ChangeEvent e) {
                        JFormattedTextField tf = ((JSpinner.DefaultEditor) spinner.getEditor()).getTextField();
                        DefaultFormatterFactory factory = (DefaultFormatterFactory) tf.getFormatterFactory();
                        DateFormatter formatter = (DateFormatter) factory.getDefaultFormatter();

                        // Change the date format to only show the hours
                        formatter.setFormat(new SimpleDateFormat("hh:mm"));
                        //formatter.setCommitsOnValidEdit(true);

                System.out.println(spinner.getValue());
                //System.out.println(tf.getText());
            }
        });

            }
    public static void main(String[] args) {
        SpinnerUpdation ss=new SpinnerUpdation();

        ss.setDefaultCloseOperation(ss.EXIT_ON_CLOSE);
        ss.setSize(574, 445);
     //ss.pack();

     ss.setLocationRelativeTo(null);
     ss.setResizable(false);
     ss.setVisible(true);
    }
} 
```

如果我正在使用，`tf.getText()`我将获得两次旧值，但如果我正在使用`spinner.getValue`，我将获得新值，但它是长格式

```
Thu Jan 01 10:18:00 IST 1970
Thu Jan 01 11:18:00 IST 1970 
```

我应该如何格式化微调器只给`11:18`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-22T09:17:32.767

您可以维护一个“主日期”，您可以将时间值重新合并到每个`stateChanged`事件中。

```
public class Main {

    public static void main(String[] args) {
        new Main();
    }

    public Main() {
        EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                try {
                    UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
                } catch (ClassNotFoundException | InstantiationException | IllegalAccessException | UnsupportedLookAndFeelException ex) {
                }

                JFrame frame = new JFrame("Test");
                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                frame.setLayout(new BorderLayout());
                frame.add(new TestPane());
                frame.pack();
                frame.setLocationRelativeTo(null);
                frame.setVisible(true);
            }

        });
    }

    public class TestPane extends JPanel {

        public TestPane() {
            setLayout(new GridBagLayout());
            add(new DateSpinner(new Date()));
        }

    }

    public class DateSpinner extends JSpinner {

        private Date masterDate;

        public DateSpinner(Date date) {
            super(new SpinnerDateModel());
            this.masterDate = date;
            SpinnerDateModel model = (SpinnerDateModel) getModel();
            model.setCalendarField(Calendar.HOUR);
            setEditor(new JSpinner.DateEditor(this, "hh:mm"));
            JFormattedTextField tf = ((JSpinner.DefaultEditor) getEditor()).getTextField();
            DefaultFormatterFactory factory = (DefaultFormatterFactory) tf.getFormatterFactory();
            DateFormatter formatter = (DateFormatter) factory.getDefaultFormatter();

            formatter.setFormat(new SimpleDateFormat("hh:mm"));

            setValue(date);

            addChangeListener(new ChangeListener() {
                @Override
                public void stateChanged(ChangeEvent e) {

                    Calendar cal = Calendar.getInstance();
                    cal.setTime(masterDate);

                    Calendar time = Calendar.getInstance();
                    time.setTime((Date) getValue());

                    cal.set(Calendar.HOUR_OF_DAY, time.get(Calendar.HOUR_OF_DAY));
                    cal.set(Calendar.MINUTE, time.get(Calendar.MINUTE));

                    masterDate = cal.getTime();

                    System.out.println(masterDate);

                }

            });
        }

        public String getTime() {
            return new SimpleDateFormat("hh:mm").format((Date)getValue());
        }

    }

} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-22T06:54:20.443

Java swing 使用的是 MVC 模式，所以在 JSpinner 中也是如此。如果你查看JSpinner源码，你会发现getValue()方法实际上是调用getModel().getValue()，所以它调用的是模型的getValue。并且您使用的模型是 SpinnerDateModel，它的值将是 Date Object，当您打印 Date 对象时，它将显示默认格式，如“Thu Jan 01 11:18:00 IST 1970”，如果你想得到像“11:18”，你需要自己格式化。like

```
 SimpleDateFormat sdf = new SimpleDateFormat("hh:mm");
 System.out.println(sdf.format(spinner.getValue()) ); 
```

您可能想知道为什么 tf.getText() 只获取旧值，因为在 spinner 上的 ChangeEvent 发生后，tf 上的 PropertyChangeEvent 将发生，并将为其设置新值。当然，你可以像 tf.addPropertyChangeListener 一样监听 tf。但我会建议使用上面的解决方案。

# java - 数据流捕获异常

> ID：14451455
> 
> 赞同：0
> 
> 时间：2013-01-22T04:10:10.907
> 
> 标签：java, data-stream

我根据我在网上找到的一些关于数据流的示例编写了这个类，并且在每次运行结束时我都会收到一个 EOFException。当我查看它时，它说意外到达了溪流的尽头。它似乎在控制台上工作（至少它吐出正确的数字序列）。虽然当我在运行后检查内容时，文本文件只是乱码。

```
public class DataStreamExample {

    public static void main(String args[]) {
        int choice = 0;
        int[] numbers = { 25, 4, 19, 70, 12, 28, 39, 30 };

        System.out.println("This program will provide an example on how the Data Stream works.");
        System.out.println("Note: Data Streams only work with primative data types.");
        System.out.println();
        System.out.println();

        try {
            System.out.println("1\. For write Data operation");
            System.out.println("2\. For read Data operation");  
            System.out.println("Enter the number for the operation of your choice: ");

            BufferedReader buffRead = new BufferedReader(new InputStreamReader(System.in));
            choice = Integer.parseInt(buffRead.readLine());
            switch(choice){
                case 1:  
                    FileOutputStream fileOut = new FileOutputStream("Example.txt");
                    BufferedOutputStream buffOut = new BufferedOutputStream(fileOut);
                    DataOutputStream dOutput =new DataOutputStream (buffOut);
                    for (int i = 0; i < numbers.length; i ++) {
                        dOutput.writeInt(numbers[i]);
                    }
                    System.out.print("writing data ");  
                    dOutput.close();

                case 2:
                    FileInputStream fileIn = new FileInputStream("Example.txt");
                    BufferedInputStream buffIn = new BufferedInputStream(fileIn);
                    DataInputStream dInput = new DataInputStream (buffIn);
                    while (true){
                        System.out.print(dInput.readInt());
                    }

                default:
                    System.out.println("Invalid choice");  
            }
        } 
        catch (Exception e) {
            System.err.println("Error in read/write data to a file: " + e);
        }

    }
} 
```

有没有人有任何建议或观察可以帮助清理这个问题，所以我不会在文件中出现乱码，所以它不会捕获异常？我应该如何结束操作并关闭流？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T04:42:14.183

对于您的输入操作，您将永远阅读`while(true)`，因此循环完成的唯一方法是抛出`EOFException`. 如果您不希望操作以这种方式完成，则必须在开始之前知道您正在读取多少个整数（并使用它来限制循环）。

文件看起来像乱码的原因是因为您将值写入二进制。如果要读取文件中的整数，则必须将它们写为文本。

此外，您应该`break;`在每个案例的末尾添加语句。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T04:40:12.220

一些事情：

1.  当您输入**1**以“写入数据操作”时，您`break;`的 case 语句中没有，因此当您尝试写入数据时，整数被写入文件，然后执行第二种情况并尝试读取从中。不确定这是否是您的意图。但是您可以添加一个`break`以防止这种情况发生：

    ```
     case 1:  
                FileOutputStream fileOut = new FileOutputStream("Example.txt");
                BufferedOutputStream buffOut = new BufferedOutputStream(fileOut);
                DataOutputStream dOutput =new DataOutputStream (buffOut);
                for (int i = 0; i < numbers.length; i ++) {
                    dOutput.writeInt(numbers[i]);
                }
                System.out.print("writing data ");  
                dOutput.close();
                break; 
    ```

2.  当您尝试从数据文件中读取数据时，您会无限循环：

    ```
     while (true){
                    System.out.print(dInput.readInt());
                } 
    ```

    这意味着它将继续尝试读取序列化整数*，直到到达文件末尾*。当到达文件末尾时，流会抛出 EOFException`。您可以尝试将循环更改为此以防止异常：

    ```
     while (dInput.available()>0){
                   System.out.print(dInput.readInt());
                }
                break; 
    ```

3.  当您打印整数时，它们将全部混乱。

4.  文本文件是乱码，因为它不是文本。当您使用`DataOutputStream`写入流中的对象（或原语）时，将得到处理，以便数据可移植。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-22T04:41:11.093

好吧，而不是使用

```
while (true){
    System.out.print(dInput.readInt());
 } 
```

你应该使用

```
while(dInput.available()>0){
    System.out.print(dInput.readInt());
} 
```

因为当你使用 while(true) 时，它总是从 Stream 中读取，包括当流到达 EOF (End Of File)
毕竟，你应该使用 close() 方法关闭所有流

# javascript - 我的网页如何判断用户是否放大了他们的视图？

> ID：14451458
> 
> 赞同：1
> 
> 时间：2013-01-22T04:10:32.573
> 
> 标签：javascript, web, accessibility, sizing

我正在尝试检测 Web 应用程序的用户是否已经点击`command +`（比如他们是否在 Mac 上）或以其他方式指示他们的浏览器放大浏览器中的视图。

有没有标准的方法来用 JavaScript 做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T04:35:07.110

好的，查看了各种选项后，似乎通过结合使用浏览器的 onResize() 事件和[Tom Bigelajzen 的 Yonathan Randolph 的“检测缩放”脚本的分支可以满足](https://github.com/tombigel/detect-zoom)我的需要。

# facebook - Facebook 使用 api 登录

> ID：14451460
> 
> 赞同：-5
> 
> 时间：2013-01-22T04:11:25.240
> 
> 标签：facebook

我有一个网站，我正在努力实现以下目标，请帮助我，我想从我的网站登录 facebook。我知道用户的用户名和密码，我可以使用该用户的 facebook api 登录服务器，并在查看我网站的人上使用该会话。我的网站有一个 facebook 按钮，当用户点击它时，我必须在该用户登录的情况下在不同的浏览器选项卡上打开 facebook 页面。请建议

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T04:13:24.820

这是使用 Facebook API 的起点

[http://developers.facebook.com/](http://developers.facebook.com/)

[http://developers.facebook.com/docs/reference/apis/](http://developers.facebook.com/docs/reference/apis/)

[http://www.developer.nokia.com/Community/Wiki/Facebook_authentication_in_Windows_Phone_application](http://www.developer.nokia.com/Community/Wiki/Facebook_authentication_in_Windows_Phone_application)

**更新：**登录实现

[ASP.NET 实现](http://www.aspdotnet-suresh.com/2012/04/aspnet-integrate-facebook-login.html)

[ASP.NET MVC4 实现](http://blog.ntotten.com/2012/12/19/facebook-authentication-with-the-facebook-c-sdk-and-asp-net-mvc-4/)

# python - 如何在子标签显示其文本所需的大小下调整 PythonGtk.Window 的大小？

> ID：14451463
> 
> 赞同：0
> 
> 时间：2013-01-22T04:11:32.610
> 
> 标签：python, gtk, pygobject

我有一个顶级 Gtk.Window，其中唯一的孩子是 Gtk.Label。
如果标签显示其文本所需的宽度是 XXX 像素，我无法调整低于 XXX 像素的顶级窗口的大小。如果我将标签的 size_request 也设置为 5,5，就会发生这种情况。
我希望能够在隐藏部分标签文本的 XXX 像素下调整窗口宽度。

这是测试代码： from gi.repository import Gtk

```
class Window(Gtk.Window):

    def __init__(self):
        super(Window,self).__init__()

        self.label = Gtk.Label("long text label bla bla bla bla bla bla")
        self.label.set_size_request(5,5)
        self.add(self.label)

        self.connect("delete-event",Gtk.main_quit)
        self.show_all()

if __name__ == "__main__":

    app = Window()
    Gtk.main() 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T09:28:37.153

尝试使用 gtk_set_ellipsize_status 更改标签的 ellipsize[状态](http://developer.gnome.org/gtk3/stable/GtkLabel.html#gtk-label-set-ellipsize)。然后，最小请求大小将是省略号“...”之一。选择合适的[Pango 椭圆模式](http://developer.gnome.org/pygtk/2.24/pango-constants.html#pango-ellipsize-mode-constants)。遗憾的是我找不到任何 PyGObject 在线文档，所以我不得不链接到 C 和 pyGTK 的文档，但你可以从中找到 PyGObject 的等价物。

# objective-c - 在 Cocoa 中更改图像背景颜色的最佳方法

> ID：14451464
> 
> 赞同：0
> 
> 时间：2013-01-22T04:11:38.347
> 
> 标签：objective-c, cocoa, image-processing

小描述：
我使用 Capture Core Framework 从扫描仪获取图像，背景颜色为灰色。所以我想做白色背景。

我正在寻找去除这种颜色的最佳方法。我查看了图像核心过滤器。据我了解，我应该使用那些，但我找不到此任务的包含/准备好的过滤器。所以，我必须自己写吗？
这意味着要删除颜色我应该编写自己的过滤器并将其应用于我的图像？对？谢谢你。

UPD：我为 Mac 操作系统开发

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T13:37:19.920

过滤器不是这里工作的正确工具。过滤器对图像中的所有像素逐个像素地应用颜色偏移算法。

如果您想要变成白色的像素有一些完全独特的东西，这将适合您的情况。例如，如果您希望消除的背景在图像的任何其他部分都没有出现的非常窄的颜色范围内。这是在绿屏/蓝屏拍摄中使用的技术，仅当您想要保留的图像区域中没有出现绿色或蓝色时才有效。

但是-正如您在其中一条评论中所说-您不能这样做，因为您想要摆脱的灰度不会是背景所独有的，因此您应用的任何过滤器都会挑选出这些像素也可能会影响像素中的像素扫描的主题。

您真正需要的是一种选择*感兴趣区域*并将过滤器单独应用于该区域的方法。您可以为此使用[openCV 。](http://www.openCV.org)其实它有一个功能可以一次性达到你的效果：

[http://docs.opencv.org/modules/imgproc/doc/miscellaneous_transformations.html?highlight=floodfill#int](http://docs.opencv.org/modules/imgproc/doc/miscellaneous_transformations.html?highlight=floodfill#int)

```
floodFill(InputOutputArray image, //image to process
          Point seedPoint,        //starting pixel
          Scalar newVal,          //New value of the repainted domain pixels
          Rect* rect,             //optional output param (you won't need it)
          Scalar loDiff,          //max lower brightness/colour diff to select
          Scalar upDiff,          //max upper brightness/colour diff to select
          int flags)              //you want FLOODFILL_FIXED_RANGE 
```

此函数从种子点开始，它应该是您可以保证将成为您要消除的背景灰色一部分的任何像素。(0,0) 可能对您有用。然后它询问相邻像素，如果它们足够相似，则将它们包括在 ROI 阵列中。结果数组是一个连接区域。如果您的背景灰色均匀地落在 loDiff 和 upDiff 之间 - 并且您的对象扫描具有不属于此范围的定义边缘，您将获得结果 - 选择所有背景像素并将其重新映射到 newVal（白色）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T14:08:16.910

为什么不简单地[改变](http://docs.opencv.org/doc/tutorials/core/basic_linear_transform/basic_linear_transform.html)图像的亮度？如果这个灰色背景颜色值是固定的，那么作为预处理步骤，您可以稍微增加亮度，直到您满意为止。

# php - SQL 语法有问题？MAX 不工作

> ID：14451469
> 
> 赞同：1
> 
> 时间：2013-01-22T04:12:46.663
> 
> 标签：php, sql, max

```
$query="SELECT title, max(postid) FROM post"; 
```

postid 是一个递增的数值`(1,2,3...)`。目前，最高值为`49`，但它拉高了 1。它似乎忽略了 MAX 语句。

否则其他一切都很好。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-22T04:15:45.113

这不是有效的语法，哪个引擎正在运行它？

您要么需要：

```
 SELECT title, max(postid) FROM post GROUP BY title; 
```

获取多条记录，每个标题一个，显示每个标题的最大 postid，或

```
SELECT max(postid) FROM post 
```

从表中获取单个最大 postid。

如果你想要最高的 postid 和随之而来的标题，你需要

```
 SELECT TOP 1 title, postid FROM post ORDER BY postid DESC 
```

或者

```
 SELECT title, postid FROM post ORDER BY postid DESC LIMIT 1 
```

取决于您的 SQL 引擎。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-03-28T08:10:30.853

重要的一点是**MAX**函数中使用的字段应该是*INT 类型*

然后它会给出准确的结果：

```
SELECT title, max(postid) FROM post GROUP BY title 
```

> **Postid 应该是一个整数。**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-22T04:22:34.750

你有没有尝试过：

```
SELECT title, max(postid) FROM post GROUP BY title 
```

我本来希望您使用的任何 sql 引擎都会在您的语句中没有 group by 子句的情况下以错误响应。但是，如果 GROUP BY 以某种方式隐含在代码中的其他地方，则应从 select 子句中删除“title”（因为我希望“title”无论如何都只与一篇文章相关联）。在这种情况下，如果您只是期望 post 表中的最大 postid 您的语句应为：

```
SELECT max(postid) FROM post 
```

# mongodb - 安装 mongo DB 的问题

> ID：14451471
> 
> 赞同：0
> 
> 时间：2013-01-22T04:13:05.820
> 
> 标签：mongodb, nosql

我在我的 UBUNTU-12.04 系统上停止了 mongo DB，但是当我在终端中给出以下命令时

```
apt-key adv --keyserver keyserver.ubuntu.com --recv 7F0CEB10 
```

它给了我以下错误

```
gpg: requesting key 7F0CEB10 from hkp server keyserver.ubuntu.com
gpg: keyserver timed out
gpg: keyserver receive failed: keyserver error 
```

有没有其他安装 mongo db 的方法或者可以做些什么来避免上述情况

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T16:05:05.440

这看起来是一个临时的 Ubuntu 密钥服务器问题，因为

```
sudo apt-key adv --keyserver keyserver.ubuntu.com --recv 7F0CEB10 
```

为我工作。

# mysql - 如何从其他表返回满足条件的所有唯一条目？

> ID：14451474
> 
> 赞同：0
> 
> 时间：2013-01-22T04:13:38.470
> 
> 标签：mysql, select

我会编造数据来说明我的问题：我有 2 张表，一张叫`clients`，一张叫`shippingProfiles`。

```
 clients                           shippingProfiles
    *************************************   *********************************
    * clientId username   emailAddress  *   * clientId  street     town     *
    * * * * * * * * * * * * * * * * * * *   * * * * * * * * * * * * * * * * *
    * 1        james      jdoer@aol.org *   * 1         mole       north    *
    * 2        zac        zmit@aol.org  *   * 1         maple      pleasant *
    * 3        cris       cm@yahoo.org  *   * 3         oak        brook    *
    * 4        john       jg@yahoo.org  *   * 3         taylor     glen     *
    *************************************   ********************************* 
```

`clients.clientId`是唯一的主键。有些客户有多个运输资料，有些则没有。

我想在数据库中搜索用户名、电子邮件地址、街道或城镇中包含字母“m”的任何客户。我希望每个唯一的客户都作为一个条目（并且只有一个条目）返回，显示他们的 ID、用户名、电子邮件地址、街道和城镇。如果他们没有街道和城镇，它可以显示`null`（或类似的东西），如果他们有多个街道和城镇，它可以显示其中任何一个。

这应该是结果：

```
 *********************************************************
    * clientId  username  emailAddress    street  town      *
    * * * * * * * * * * * * * * * * * * * * * * * * * * * * * 
    * 1         james     jdoer@aol.org   mole    north     *
    * 2         zac       zmit@aol.org    null    null      *
    * 3         cris      cm@yahoo.org    oak     brook     *
    ********************************************************* 
```

这些表最终可能每个都包含 50,000 个条目，因此我需要数据库在尽可能少的扫描中执行此操作。

我听说 mysql 实际上非常强大，所以我假设这可以通过一个命令来完成。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T04:19:02.303

我认为你想要一个左外连接 - 这将尝试将该行连接到所有其他行，但如果它没有进行任何连接，它仍然会打印所有字段，只需将 null 放入来自另一个表的字段中。

select * from clients LEFT OUTER JOIN shippingProfiles ON clients.clientId = shippingProfiles.ID

WHERE clients.username LIKE '%m%' OR --insert other conditions here

# c# - EnterpriseLibrary Logger 错误：从未同步的代码块调用了对象同步方法

> ID：14451483
> 
> 赞同：3
> 
> 时间：2013-01-22T04:14:20.493
> 
> 标签：c#, logging, asynchronous, unity-container, enterprise-library

使用 MS Enterprise Library Logger 进行记录时，我开始收到此错误。

日志记录机制使我对日志条目进行排队，然后使用计时器每 10 秒刷新一次条目。

它工作了一段时间，但今天开始出现此错误：

代码行：

```
Logger.Write(list[i]); 
```

错误信息：

```
Object synchronization method was called from an unsynchronized block of code. 
```

堆栈跟踪：

```
at Microsoft.Practices.Unity.SynchronizedLifetimeManager.TryExit() 
```

整个计时器 elsapsed 事件处理程序：

```
private void TimerElapsed(object sender, ElapsedEventArgs e)
{
            // Lock and free free the queue quickly - write to an intermediate list.
            var list = new List<LogEntry>();
            lock (LogEntryQueueLock)
            {
                while (true)
                {
                    if (_logEntryQueue.Count <= 0)
                        break;

                    //dequeue the LogEntry that will be written to the log
                    list.Add(_logEntryQueue.Dequeue());
                }
            }

            // Flush the list in to the log
            for (int i = 0; i < list.Count; i++)
            {
                ProcessEntry(list[i]);  // Strip commas from the string
                Logger.Write(list[i]);  //  <<<== ERRORS HERE
            }

} 
```

非常感谢您的任何建议！

[编辑]：我尝试直接调用 Logger.Write，没有计时器经过事件 - 同样的问题......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-22T05:32:24.110

这似乎是一个现有问题：[http](http://unity.codeplex.com/workitem/7206) ://unity.codeplex.com/workitem/7206 。

好消息是，这应该使用 2.1.505.2 版本解决，您可以在以下网址获得：http: [//nuget.org/packages/Unity/2.1.505.2](http://nuget.org/packages/Unity/2.1.505.2)。

# jquery - jQuery - 显示/隐藏具有相同 id 的多个 div

> ID：14451491
> 
> 赞同：0
> 
> 时间：2013-01-22T04:15:18.440
> 
> 标签：jquery

我最近在 stackoverflow 上找到了我的一个问题的答案，其中涉及根据下拉列表的值显示和隐藏 div，这里是演示 - [http://jsfiddle.net/pXdS6/16/](http://jsfiddle.net/pXdS6/16/)

我的新问题是，如果我想根据值显示具有相同 id 的多个 div 怎么办？

像这样的html：

```
<div id="divarea1" class="box">DIV Area 1</div>
<div id="divarea2" class="box">DIV Area 2</div>
<div id="divarea3" class="box">DIV Area 3</div>
<div id="divarea3" class="box">DIV Area 3</div> 
```

如果我从下拉列表中选择“DIV 区域 3”，我希望显示带有 #divarea3 的两个 div

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T04:19:00.173

您不能也不应该有多个具有相同 id 的 DOM 元素。使用类。如果必须，使用数百个类（不是真的）对它们进行分组。一旦你的课程开始工作，

```
<div id="divarea1" class="box set1">DIV Area 1</div>
<div id="divarea2" class="box set1">DIV Area 2</div>
<div id="divarea3" class="box set2">DIV Area 3</div>
<div id="divarea4" class="box set2">DIV Area 3</div>

$('.set2').show(); 
```

这应该可以实现您想要实现的目标。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T04:16:50.900

ID 属性在页面上应该是唯一的。如果您对显示“divarea3”项目感兴趣，您可以为每个元素添加另一个类，然后根据该类显示它们。

# c++ - 需要优化 - 算法实现占用太多内存

> ID：14451492
> 
> 赞同：0
> 
> 时间：2013-01-22T04:15:34.973
> 
> 标签：c++, memory, memory-management, recursion, destructor

好的，伙计们：内存优化绝对不是我的事，因为我目前正在从事一个大型、cpu 和内存密集型项目，我想我需要你的帮助。

该项目是一个国际象棋引擎，实际问题（我猜）在于以下两种方法之一（上面的代码不是100％准确，但或多或​​少）：

* * *

**树搜索 ( [MiniMax](http://en.wikipedia.org/wiki/Minimax) )** *- 实际代码是带有不同添加的 Alpha-Beta，但这个非常基本的示例更具说明性：*

```
int Board::miniMax_(int ply)
{
    if (ply == this->searchDepth) return this->eval();

    int best = MINUS_INF;

    vector<Move*> moves = this->possibleMoves();

    FOREACH(Move*, move, moves)
    {
        HASHMAKE((*move),this);
        int val = -this->miniMax_(ply+1);
        UNHASHMAKE((*move),this);

        if (val>best) { 
            if (ply==0) this->bestMove = (*move);
            best = val; 
        }

    }
    return best;
} 
```

**移动生成** *（如果您从未玩过国际象棋编程和位板，以下内容可能看起来几乎毫无意义；但您仍然会在内存处理方面有所了解 - 嗯，希望......）*：

```
vector<Move*> Board::possibleMoves()
{
    U64 ownPieces = this->piecesForColor(this->playing);
    U64 occupied = ~(this->pieces[empty]);

    vector<Move*> moves;

    //-----------------------------------------
    // "Normal" Piece Moves
    //-----------------------------------------

    const int from = (1+(this->playing))*3;
    const int to = (1+(this->playing))*3+6;

    for (int pieceType=from; pieceType<to; pieceType++)
    {
        U64 piece = this->pieces[pieceType];

        for (; piece != 0; piece &= (piece - 1))
        {
            UINT pos = log2(piece & ~(piece-1));

            U64 move;
            switch (pieceType)
            {
                case bPawns:    move = BPAWN_(pos,ownPieces,occupied); break;
                case wPawns:    move = WPAWN_(pos,ownPieces,occupied); break;
                case bRooks:
                case wRooks:    move = ROOK_(pos,ownPieces,occupied); break;
                case bKnights:
                case wKnights:  move = KNIGHT_(pos,ownPieces,occupied); break;
                case bBishops:
                case wBishops:  move = BISHOP_(pos,ownPieces,occupied); break;
                case bQueen:
                case wQueen:    move = QUEEN_(pos,ownPieces,occupied); break;
                case bKing:
                case wKing:     move = KING_(pos,ownPieces,occupied); break;
                default:break;
            }

            for (; move !=0; move &= (move-1))
            {
                moves += new Move(pos, log2(move&~(move-1)),this);
            }
        }
    }

    return moves;
} 
```

**移动类**

```
//=======================================================
// Prototype
//=======================================================

class Move
{
    public:
        Move (string m, Board* b) : from(ALG2FROM(m)), to(ALG2TO(m)), pieceFrom(b->atPosition[from]), pieceTo(b->atPosition[to]) {}
        Move (int f, int t, Board* b) : from(f), to(t), pieceFrom(b->atPosition[from]), pieceTo(b->atPosition[to]) {}
        Move (int val) : value(val) {}

        inline string notation();
        inline string out();
        //----------------------
        int from, to;
        int pieceFrom, pieceTo;
        int value;
};

//=======================================================
// Inline Functions
//=======================================================

inline string Move::notation()
{
    return SSTR(SPOS(this->from) << SPOS(this->to));
}

inline string Move::out()
{
    return SSTR(this->notation() << " :: " << this->value);
} 
```

* * *

显然，第一个函数被递归并调用了数百万次，有一些预期的负载。问题是一旦搜索到第 4 层、第 5 层或其他东西，该应用程序已经占用了 2GB 空间。问题是，一旦完成（搜索），内存仍未*释放*- 所以我想*这*表明存在问题。

那么，有什么想法吗？

* * *

请让我知道，以防您需要了解有关实施的任何其他信息。

* * *

**提示：**

*   `FOREACH`只是向量迭代器的宏
*   for 向量附加来自`+=`Boost
*   粗体中的所有内容都是一个宏，但就内存开销而言，它们都没有做任何密集的事情（所以我决定省略它们）
*   没有实现任何析构函数

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-22T04:25:06.310

这里：

```
vector<Move*> moves = this->possibleMoves(); 
```

指针向量不会为您释放指针。你可以尝试一个向量来`std::unique_ptr<Move>`代替。

如果您不进行单独的移动分配，您将获得更好的性能。使用内存池。在这方面，您可能根本不需要向量。

除非`Move`是多态类，我建议你根本不要分配它。相反，创建一堆`Set`函数`Move`并像这样声明你的`possibleMoves`函数：

```
void Board::possibleMoves( vector<Move> & moves ) 
```

显然这样称呼它：

```
vector<Move> moves;
possibleMoves( moves ); 
```

因此，这意味着当您添加移动时`new`，您可以执行以下操作，而不是执行 a ：

```
 moves.push_back( Move(pos, log2(move&~(move-1)),this) ); 
```

这会调用复制构造函数。如果您想避免额外的副本，请为`Move`上述“setter”函数创建一个空构造函数：

```
 moves.resize( moves.size()+1 );
    Move & m = moves.back();
    m.Set( pos, log2(move&~(move-1)),this ); 
```

我不能 100% 确定这是否会更快。无论如何，另一件事......如果您期望一个典型的棋盘几乎总是有少于 50 个可能的移动，您可以通过在开头执行此操作来提高性能`possibleMoves`：

```
moves.reserve(50) 
```

这意味着向量几乎不需要调整大小，从而使`push_back`操作更快。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-22T04:44:09.783

在这种情况下，我不确定 std::vector 是不是最好的容器。

可能的移动次数是有限的，应该可以计算出来。我不会猜测您将如何做到这一点，但假设您可以做到（或仅使用 const 大数字）......那么可能值得使用数组来代替：

```
Move *moves = new Move[maxMoves];
FillPossibleMoves(moves, maxMoves)
// do stuff
delete [] moves; 
```

然后，您可以将可能的移动功能更新为：

```
int Board::FillPossibleMoves(Move *moves, int maxMoves)
{
    int i = 0;
    ...
    moves[i].Something = Whatever;
    i++;
    ...
    return i;
} 
```

这样，您将只分配一次内存，并在完成后清理它。

* * *

如果您同意：[在 C++ 中使用数组或 std::vectors，性能差距是什么？](https://stackoverflow.com/questions/381621/using-arrays-or-stdvectors-in-c-whats-the-performance-gap)它说要避免动态数组，然后：

```
std::vector<Move> moves(maxMoves);
// if you use a const, then you can keep declaration above as a member
// and call moves.clear() here instead
int movesAdded = board->FillPossibleMoves(moves);
// do stuff

int Board::FillPossibleMoves(std::vector<Move> &moves)
{
    int i = 0;
    ...
    moves[i].Something = Whatever;
    i++;
    ...
    return i;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-22T04:24:26.950

> 没有实现任何析构函数

为什么你认为应该释放内存。您正在调用 new 很多次，但您永远不会删除`Move`您创建的 s 。

另外，向我们展示`Move`类的定义

# php - query_post 分页

> ID：14451496
> 
> 赞同：0
> 
> 时间：2013-01-22T04:16:17.917
> 
> 标签：php, wordpress

我在尝试在主页上显示分页时遇到了麻烦。我正在调用两个 query_posts，它们在循环结束时都重置。我有这样的 home.php 设置。

```
 <div id="featured">

                <!-- Start Featured Loop -->
                <?php query_posts("posts_per_page=2&tag=featured"); ?>
        <?php if(have_posts()) : while(have_posts()) : the_post(); ?>

                    //some loop stuff                        

    <?php endwhile; endif; ?><!-- End Featured Loop -->

            <?php wp_reset_query(); ?>
      </div> <!-- End Featured -->

      <div id="home-grid">

    <?php 
            if ( get_query_var('paged') ) { $paged = get_query_var('paged'); }
            elseif ( get_query_var('page') ) { $paged = get_query_var('page'); }
            else { $paged = 1; }

            query_posts('posts_per_page=3&paged=' . $paged); 
            ?>
         <?php if ( have_posts() ) : ?>

             <?php while(have_posts()); ?>

        // some loop stuff

               <?php endwhile; else: ?>
               <p>Sorry, no posts matched your criteria.</p>
               <?php endif; ?>

            <div class="home-pagi">
        <?php next_posts_link(); ?>
                <?php previous_posts_link(); ?>
            </div>

               <?php wp_reset_query(); ?> 
```

我可以显示“下一页”链接，但单击时出现 404 错误。我已经尝试了 codex 中的所有修复，但似乎无法使其正常工作。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T04:40:40.303

您在底部的循环似乎缺少使其成为循环的`while`和部分。`endwhile`

请尝试在`endwhile`.

这是[Codex 分页页面的链接](http://codex.wordpress.org/Pagination#Adding_the_.22paged.22_parameter_to_a_query)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-16T11:39:03.270

将您的查询更改为：

```
global $wp_query;
query_posts(
    array_merge(
        array(
        'category__not_in' => 69,
        'tag' => 'featured'
         ),
        $wp_query->query
    )
); 
```

# regex - R gregexpr 上的正则表达式匹配

> ID：14451498
> 
> 赞同：5
> 
> 时间：2013-01-22T04:16:45.587
> 
> 标签：regex, string, r

我正在尝试计算 3 个连续“a”事件的实例，`"aaa"`.

该字符串将包含较低的字母，例如`"abaaaababaaa"`

我尝试了以下代码。但这种行为并不是我想要的。

```
x<-"abaaaababaaa";
gregexpr("aaa",x); 
```

我希望匹配返回 3 个“aaa”实例，而不是 2 个。

假设索引从 1 开始

*   “aaa”的第一次出现在索引 3 处。
*   “aaa”的第二次出现在索引 4 处。（这未被 gregexpr 捕获）
*   “aaa”第三次出现在索引 10 处。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-22T04:26:07.810

要捕获重叠匹配，您可以使用如下所示的前瞻：

```
gregexpr("a(?=aa)", x, perl=TRUE) 
```

但是，您的匹配现在只是一个“a”，因此可能会使这些匹配的进一步处理复杂化，特别是如果您并不总是寻找固定长度的模式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T04:55:28.793

我知道我迟到了，但我想分享这个解决方案，

```
your.string <- "abaaaababaaa"
nc1 <- nchar(your.string)-1
x <- unlist(strsplit(your.string, NULL))
x2 <- c()
for (i in 1:nc1)
x2 <- c(x2, paste(x[i], x[i+1], x[i+2], sep="")) 
cat("ocurrences of <aaa> in <your.string> is,", 
    length(grep("aaa", x2)), "and they are at index", grep("aaa", x2))
> ocurrences of <aaa> in <your.string> is, 3 and they are at index 3 4 10 
```

受到Fran 的 R-help 的[这个回答](https://stat.ethz.ch/pipermail/r-help/2003-March/031538.html)的极大启发。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-22T06:11:27.510

这是一种使用 提取所有不同长度的重叠匹配的方法`gregexpr`。

```
x<-"abaaaababaaa"
# nest in lookahead + capture group
# to get all instances of the pattern "(ab)|b"
matches<-gregexpr('(?=((ab)|b))', x, perl=TRUE)
# regmatches will reference the match.length attr. to extract the strings
# so move match length data from 'capture.length' to 'match.length' attr
attr(matches[[1]], 'match.length') <- as.vector(attr(matches[[1]], 'capture.length')[,1])
# extract substrings
regmatches(x, matches)
# [[1]]
# [1] "ab" "b"  "ab" "b"  "ab" "b" 
```

诀窍是将模式包围在一个捕获组中，并将该捕获组包围在一个前瞻断言中。`gregexpr`将返回一个列表，其中包含带有属性的起始位置`capture.length`，一个矩阵，其中第一列是第一个捕获组的匹配长度。如果将其转换为向量并将其移动到`match.length`属性中（全为零，因为整个模式都在前瞻断言中），则可以将其传递给以`regmatches`提取字符串。

正如最终结果的类型所暗示的那样，通过一些修改，这可以被向量化，对于`x`字符串列表的情况。

```
x<-list(s1="abaaaababaaa", s2="ab")
matches<-gregexpr('(?=((ab)|b))', x, perl=TRUE)
# make a function that replaces match.length attr with capture.length
set.match.length<-
function(x) structure(x, match.length=as.vector(attr(x, 'capture.length')[,1]))
# set match.length to capture.length for each match object
matches<-lapply(matches, set.match.length)
# extract substrings
mapply(regmatches, x, lapply(matches, list))
# $s1
# [1] "ab" "b"  "ab" "b"  "ab" "b" 
# 
# $s2
# [1] "ab" "b" 
```

# xcode - XCode NSIntegerv 分析后返回内存泄漏

> ID：14451503
> 
> 赞同：0
> 
> 时间：2013-01-22T04:17:14.767
> 
> 标签：xcode, uitableview, nsinteger

我有这个代码，它创建`UITableView`并让单元格的颜色交替显示白色和灰色。![捕获](../Images/f59ce89f2cc379f9a774207a6725b3aa.png)

如何在没有内存泄漏的情况下纠正这个问题？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T08:16:28.790

你的代码是：

```
cell.backgroundView = [[UIImageView alloc] initWithImage:[UIImage imageNamed:@"bg_white.png"]]; 
```

这泄漏了`UIImageView`. 你分配了它，但之后你没有释放它。

修理：

```
UIImageView* imageView = [[UIImageView alloc] initWithImage:[UIImage imageNamed:@"bg_white.png"]]; 
cell.backgroundView = imageView;
[imageView release]; 
```

分析器警告中的箭头有点误导——它们试图通过代码显示执行流程，进入导致泄漏的方法，然后退出。文字信息是重要的部分。

（另外，我怀疑你想要`tbl_RowIndex1 % 2`，而不是`tbl_RowIndex1 %= 2`。）

# android - 在android上执行pm的分段错误

> ID：14451504
> 
> 赞同：2
> 
> 时间：2013-01-22T04:17:16.813
> 
> 标签：android, segmentation-fault, root, package-managers

我可以`pm`很好地从 adb shell 执行，但是如果我尝试从终端执行它，则会出现分段错误。我已经阅读[了这个线程](https://stackoverflow.com/questions/12344482/why-do-i-get-a-segmentation-fault-error-when-i-exec-pm-on-an-android-device)，它提出了一个类似的问题，但他们的解决方案似乎不起作用。

堆栈跟踪如下：

```
01-22 04:04:39.356: D/AndroidRuntime(5059): >>>>>> AndroidRuntime START com.android.internal.os.RuntimeInit <<<<<<
01-22 04:04:39.356: D/AndroidRuntime(5059): CheckJNI is OFF
01-22 04:04:39.366: I/dalvikvm(5059): DexOpt: Some deps went away
01-22 04:04:39.366: E/dalvikvm(5059): /system/framework/ext.jar odex has stale dependencies
01-22 04:04:39.366: I/dalvikvm(5059): Zip is good, but no classes.dex inside, and no valid .odex file in the same directory
01-22 04:04:39.366: D/dalvikvm(5059): Unable to process classpath element '/system/framework/ext.jar'
01-22 04:04:39.366: I/dalvikvm(5059): DexOpt: Some deps went away
01-22 04:04:39.366: E/dalvikvm(5059): /system/framework/framework.jar odex has stale dependencies
01-22 04:04:39.366: I/dalvikvm(5059): Zip is good, but no classes.dex inside, and no valid .odex file in the same directory
01-22 04:04:39.366: D/dalvikvm(5059): Unable to process classpath element '/system/framework/framework.jar'
01-22 04:04:39.366: I/dalvikvm(5059): DexOpt: Some deps went away
01-22 04:04:39.366: E/dalvikvm(5059): /system/framework/android.policy.jar odex has stale dependencies
01-22 04:04:39.366: I/dalvikvm(5059): Zip is good, but no classes.dex inside, and no valid .odex file in the same directory
01-22 04:04:39.366: D/dalvikvm(5059): Unable to process classpath element '/system/framework/android.policy.jar'
01-22 04:04:39.366: I/dalvikvm(5059): DexOpt: Some deps went away
01-22 04:04:39.366: E/dalvikvm(5059): /system/framework/services.jar odex has stale dependencies
01-22 04:04:39.366: I/dalvikvm(5059): Zip is good, but no classes.dex inside, and no valid .odex file in the same directory
01-22 04:04:39.366: D/dalvikvm(5059): Unable to process classpath element '/system/framework/services.jar'
01-22 04:04:39.366: D/dalvikvm(5059): Trying to load lib libjavacore.so 0x0
01-22 04:04:39.376: D/dalvikvm(5059): Added shared lib libjavacore.so 0x0
01-22 04:04:39.376: D/dalvikvm(5059): Trying to load lib libnativehelper.so 0x0
01-22 04:04:39.376: D/dalvikvm(5059): Added shared lib libnativehelper.so 0x0
01-22 04:04:39.406: I/dalvikvm(5059): DexOpt: Some deps went away
01-22 04:04:39.406: E/dalvikvm(5059): /system/framework/pm.jar odex has stale dependencies
01-22 04:04:39.406: I/dalvikvm(5059): Zip is good, but no classes.dex inside, and no valid .odex file in the same directory
01-22 04:04:39.406: E/appproc(5059): ERROR: could not find class 'com.android.commands.pm.Pm'
01-22 04:04:39.406: E/JNIHelp(5059): Native registration unable to find class 'android/debug/JNITest', aborting
01-22 04:04:39.406: A/libc(5059): Fatal signal 11 (SIGSEGV) at 0xdeadbaad (code=1), thread 5059 (app_process) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-01T02:50:41.233

1.  检查 init.rc 的 BOOTCLASSPATH。BOOTCLASSPATH 必须包含 /system/framework/ext.jar 和 /system/framework/framework.jar 等。

2.  检查 build/core/dex_preopt.mk 的 DEXPREOPT_BOOT_JARS。DEXPREOPT_BOOT_JARS 必须包含 ext 和 framework 等。

3.  BOOTCLASSPATH 上所有项目的顺序必须等于 DEXPREOPT_BOOT_JARS 上所有项目的顺序。

# erlang - 预处理器，ifdef

> ID：14451506
> 
> 赞同：2
> 
> 时间：2013-01-22T04:17:27.303
> 
> 标签：erlang

调试 gen_server 模块时，我想记录更多详细信息状态。

```
init()->
    put(?COMPLETED_COMMANDS,[]),
-ifdef(DEBUG).
    put(?DETAIL_STATUS,[]),
-endif.
    ok. 
```

编译器给出以下错误。

```
src/benvolio_command_cache.erl:34: syntax error before: ','
src/benvolio_command_cache.erl:36: syntax error before: '.'
src/benvolio_command_cache.erl:33: variable 'DEBUG' is unbound
src/benvolio_command_cache.erl:33: function ifdef/1 undefined 
```

如何在`*.erl`文件的函数中添加调试代码行？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-22T07:25:29.400

宏指令不能在函数内部使用。请参阅[8.5 宏中的流控制](http://www.erlang.org/doc/reference_manual/macros.html#id80919)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-09-28T14:40:22.747

根据[Erlang 参考手册用户指南（11.1 版）](https://erlang.org/doc/reference_manual/users_guide.html)（2020 年 9 月 22 日）中的[9\. Preprocessor](https://erlang.org/doc/reference_manual/macros.html)章节，

*   **不能在函数中*定义***宏**；尽管在[9.2 定义和使用宏](https://erlang.org/doc/reference_manual/macros.html#defining-and-using-macros)中间接说明了这一点：**

     **> 宏定义可以放在模块的属性和函数声明中的任何位置，但定义必须在宏的任何使用之前。** 
***   **宏指令**不能在函数内部*使用*（参见[9.5 宏中的流控制](https://erlang.org/doc/reference_manual/macros.html#flow-control-in-macros)）** 

 *** * *

至于您要实现的目标，[9.5 Flow Control in Macros](https://erlang.org/doc/reference_manual/macros.html#flow-control-in-macros)中有一个示例可以回答您的问题：

> **例子：**
> 
> ```
> -module(m).
> ...
> 
> -ifdef(debug).
> -define(LOG(X), io:format("{~p,~p}: ~p~n", [?MODULE,?LINE,X])).
> -else.
> -define(LOG(X), true).
> -endif.
> 
> ... 
> ```
> 
> 当需要跟踪输出时，要在编译`debug`模块时定义 ：`m`
> 
> ```
> % erlc -Ddebug m.erl 
> ```
> 
> 或者
> 
> ```
> 1> c(m, {d, debug}).
> {ok,m} 
> ```
> 
> `?LOG(Arg)`然后扩展为调用`io:format/2`并为用户提供一些简单的跟踪输出。

更重要的是，当模块在没有`debug`宏的情况下编译时，`?LOG(Arg)`将扩展为`true`.

* * *

请参阅、 和的[编译选项](https://erlang.org/doc/man/compile.html#type-option)以及.[`compile:file/2`](https://erlang.org/doc/man/compile.html#file-2)[`c/\[2,3\]`](https://erlang.org/doc/man/c.html)[`erlc`](https://erlang.org/doc/man/erlc.html)**

# java - 具有多个变量的类的多维数组访问

> ID：14451510
> 
> 赞同：0
> 
> 时间：2013-01-22T04:18:01.193
> 
> 标签：java

好的，所以这是在黑暗中拍摄，但是......有没有办法重载多维数组访问的参数以接受自定义参数？

```
//normal array access
myArray[1][2];

//I have a class with two ints and do this
myArray[int2Var.x][int2Var.y];

//is there any way to overload the array arguments so I can do this to access a two dimensional array?
myArray[int2Var]; 
```

我目前正在使用 Java，但我也想知道这是否可能。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T04:20:02.903

不，Java 不像 C++ 那样支持运算符重载。

如果您有兴趣，这是一个 Java 版本：

```
public class Test {

    public static class Index
    {
        int x;
        int y;
    }
    public static <T> T get(T[][] array, Index i)
    {
        return array[i.x][i.y];
    }
    public static void main(String[] args)
    {
        Index ix = new Index();
        ix.x = 1;
        ix.y = 2;

        Integer[][] arr = new Integer[3][3];
        for (int i=0; i<3; i++)
            for (int j=0; j<3; j++)
                arr[i][j] = 3*i + j;

        System.out.println(get(arr,ix));
    }
} 
```

方法`get(...)`接受任何引用类型的数组和索引对象并返回选定的对象。对于基元，您需要`get`每个基元类型一个专门的方法。

另请注意，java 中的数组语法不是`[a,b]`but `[a][b]`。

# apache - 使用 Apache Flume 管道 Apache 服务器日志

> ID：14451512
> 
> 赞同：1
> 
> 时间：2013-01-22T04:18:24.250
> 
> 标签：apache, apache2, flume

我正在使用 Apache Flume 1.3 版并参考[Apache Flume User guide](http://flume.apache.org/FlumeUserGuide.html)。

我的目标是将[Apache 服务器日志](http://httpd.apache.org/docs/2.2/logs.html#piped)直接通过管道传输到 Apache Flume Agent 的通道中。如果我的理解是正确的，Apache 服务器将不会创建本地文件，即。server.log、error.log 而是直接将对应的输出写入agent的channel；即使它写入日志，代理也不会从这些文件中读取。但至少 Apache 服务器的文档没有提供相同的示例。

我的查询是：

1.  我提到[了这个](http://archive.cloudera.com/cdh/3/flume/Cookbook/index.html#_using_piped_logs)链接，它与 Cloudera Flume 而不是 Apache Flume 相关。我尝试了这个，但正如预期的那样，Apache 服务器给出了一个错误：

    ```
    /bin/sh: flume: not found
    piped log program 'flume node_nowatch -1 -s -n apache -c \\'apache:console|agentBESink("collector");\\'' failed unexpectedly
    piped log program 'flume node_nowatch -1 -s -n apache -c \\'apache:console|agentDFOSink("collector");\\'' failed unexpectedly 
    ```

我怀疑 Apache Flume 和 Cloudera Flume 是否同步。

1.  根据 Apache 服务器的文档： **Apache httpd 能够通过管道写入错误并访问日志文件到另一个进程，而不是直接写入文件。** 如何为正在运行的 Apache Flume 代理实现这一点，即 Apache conf 中的条目必须是什么

自定义日志“|？” 常见的

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-08-26T14:02:18.520

* * *

我正在尝试类似的用例。您的问题是水槽命令不存在（不再存在）。较新版本的水槽使用命令**flume-ng**。

我在 /etc/httpd/conf/httpd.conf 中做了什么：

```
# Default behaviour, but daily-rollover logging (|| does not spawn a new shell) 
CustomLog "||/usr/sbin/rotatelogs /var/log/httpd/access_log.%Y-%m-%d 86400" combined
# Send logging to local flume-agent
CustomLog "||/usr/bin/flume-ng avro-client -H localhost -p 10000" combined 
```

flume-agent 配置在 localhost 上有一个 avro 源绑定，并在端口 10000 上侦听。还有一个文件通道，在我们的例子中是一个 HDFS 接收器。

请注意，当 Flume-agent 崩溃或您重新启动 Flume 时，您将丢失一些日志记录事件。如果您想要一个更持久的解决方案，您需要拾取（旧的/旋转的）日志文件并在处理时移动/删除。

# java - java.util.Timer 与 EJB TimerBean

> ID：14451521
> 
> 赞同：4
> 
> 时间：2013-01-22T04:19:42.540
> 
> 标签：java, timer, ejb

我必须为以下场景实现一个简单的 Timer 任务 -

```
method1(){  
.....  
   if(success){  
      trigger method2 for next 30 min every 15 sec  
   }  
} 
```

我已经使用 java.util.Timer 和 java.util.TimerTask 实现了这段代码，并且工作正常。但是，我的代码最终将部署为 glassfish 服务器中的 Web 服务。所以我想知道它是否会由于 glassfish 容器而产生任何问题，因为我通过 Timer 间接使用线程。

我也不确定是否应该使用 EJB Timer Bean。有人可以请教这两种方法的优缺点吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-22T04:48:26.680

EJB 规范警告用户编码（或第三方编码）线程。

*企业 bean 不得尝试管理线程。企业 bean 不得尝试启动、停止、挂起或恢复线程，或者更改线程的优先级或名称。企业 bean 不得尝试管理线程组。*（**21.2.2 编程限制**，EJB 3.1 规范）

首选 EJB Timer Bean。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-22T05:11:23.763

与大多数 EJB 一样，这两种技术之间的最大区别是事务。Timer EJB 就是 EJB，所以每次调用都是一个唯一的事务，容器将为您管理所有这些细节。

线程，尤其是从 EJB 中创建的线程，将具有未确定的事务状态。大多数容器将很多上下文与当前正在执行的线程相关联，尤其是事务状态，这是（其中之一）自制线程在 EJB 容器中是一个坏主意的原因之一——容器上下文信息可能会丢失或损坏。

对于 EJB 计时器，您可以轻松地创建一个每 15 秒触发一次的计时器，但您需要跟踪并在 30 分钟后手动取消它。您可以使用 ScheduleExpression 来表达“每 15s 30m”规则，但您仍然需要在最后取消计时器（坦率地说，正确创建该表达式会做更多的工作）。在 Timers Info 中添加一个开始时间会更容易，告诉它何时开始，然后它可以在最后一次运行时自行终止。

在 Java EE 6 之前的日子里，定时器是持久的，并且在容器重新启动时仍然存在（尽管不是应用程序重新部署）。现在，持久性是可选的，因此您需要注意该细节。

如果这个方法是从 Web 层（而不是 EJB 层）触发的，那么线程限制就会放宽，或者您可以使用 Quartz Timer。

但是 EJB 计时器非常好，并且更适合 Java EE 6。*我*会使用 EJB 计时器，但我对它们很满意，并且已经使用了一段时间以来更难使用的 Java EE 6 之前的计时器。如果您在整个过程的 EJB 层中，我当然会使用它们。

# sql - 具有多个字段的 Lucenet.net 查询

> ID：14451526
> 
> 赞同：0
> 
> 时间：2013-01-22T04:20:37.457
> 
> 标签：sql, sql-server-2008, lucene.net

我的 SQL Server 存储过程中有以下查询。

```
(Venue like '%arizona%' or keyword like '%arizona%' or location like '%arizona%') 
and (location like 'tempe') and (author like '%autorr%') 
```

我想使用 lucene.net 产生相同的结果。请向我提供示例查询以产生此结果。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T11:11:35.770

这很简单。我使用以下方式编写 lucene.net 查询

```
(Venue:arizona OR keyword:arizona OR location:arizona) 
AND (location:tempe) AND (author:autorr) 
```

我将此字符串传递给解析器对象并检索期望结果。

# java - 在网络上传输 Java 对象的快速方法

> ID：14451528
> 
> 赞同：0
> 
> 时间：2013-01-22T04:20:47.827
> 
> 标签：java, deserialization, network-protocols

我有一个节俭的服务器，它为客户端提供 Java 对象，这些 Java 对象存储在 Membase 中。而服务客户端的大部分时间都在进行对象的序列化和反序列化。在 membase 中，我们保存一个字节流。我想问我是否可以以任何方式跳过对象的反序列化？将对象按原样提供给也在 Java 中的客户端。

还有其他方法可以在线传输对象吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T04:24:40.503

您可以编写自己的编组/编组机制或使用现有机制之一作为序列化/反序列化的替代方案。

**两种方法（编组**和**序列化**）各有利弊。

在不确切知道您需要什么的情况下，很难说出您的情况首选什么。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T04:56:06.797

您的客户端程序和服务器程序运行在不同的 javaw.exe 中，即使用不同的 JVM。因此，要在不同的 java 程序之间使用两个进程进行数据通信，您需要进行序列化和反序列化。您无法逃避它。

# ruby-on-rails-3 - Rails 与会话登录和 user_id 的关联

> ID：14451529
> 
> 赞同：0
> 
> 时间：2013-01-22T04:21:02.373
> 
> 标签：ruby-on-rails-3, authentication, associations

我已经建立了与用户和事件的关联。我正确设置了关联，并在我的 Rails 控制台中对其进行了测试，使用 user = User.find(1) user.events 会显示我的关联事件。我的问题与身份验证有关。我有一个登录名，当它登录时直接进入主页并显示所有打开的事件（如管理页面）：

会话控制器：

```
 def create
    if user = User.authenticate(params[:name], params[:password])
        session[:user_id] = user.id
        redirect_to events_url
    else
        redirect_to login_url, :alert => "Invalid user/password combination"
    end
  end 
```

我希望能够创建一个登录名并将其与该人的所有事件相关联。例如，员工使用姓名首字母 JM 登录，我希望所有以该人姓名首字母打开的事件都显示在他们的队列中。以下是我认为可能适用的其他一些应用程序。

```
 class EventsController < ApplicationController
  # GET /events
  # GET /events.json
  def index
    @events = Event.order("events.initials ASC")
    @archived = CompleteEvent.order("complete_events.created_at ASC")

    respond_to do |format|
      format.html # index.html.erb
      format.json { render json: @events }
    end
  end

  # GET /events/1
  # GET /events/1.json
  def show
    @event = Event.find(params[:id])

    respond_to do |format|
      format.html # show.html.erb
      format.json { render json: @event }
    end
  end

  # GET /events/new
  # GET /events/new.json
  def new
    @event = Event.new

    respond_to do |format|
      format.html # new.html.erb
      format.json { render json: @event }
    end
  end

  # GET /events/1/edit
  def edit
    @event = Event.find(params[:id])
  end

  # POST /events
  # POST /events.json
  def create
    @event = Event.new(params[:event])

    respond_to do |format|
      if @event.save
        format.html { redirect_to @event, notice: 'Event was successfully created.' }
        format.json { render json: @event, status: :created, location: @event }
      else
        format.html { render action: "new" }
        format.json { render json: @event.errors, status: :unprocessable_entity }
      end
    end
  end

  # PUT /events/1
  # PUT /events/1.json
  def update
    @event = Event.find(params[:id])
      @complete = CompleteEvent.new(:initials => @event.initials, :name => @event.name, :event_name => @event.event_name, :complete => @event.complete, :event_description => @event.event_description, :comment => @event.comment)

    respond_to do |format|
      if @event.update_attributes(params[:event])
        if @event.complete == true
              @complete
              @complete.save
              @event.destroy
          format.html { redirect_to :controller => :events, :action => :index}
          format.json { head :no_content }
            elsif @event.complete == false          
          format.html { redirect_to :controller => :events, :action => :index}
          format.json { head :no_content }
            end
      end
    end
  end

  # DELETE /events/1
  # DELETE /events/1.json
  def destroy
    @event = Event.find(params[:id])
    @event.destroy

    respond_to do |format|
      format.html { redirect_to events_url }
      format.json { head :no_content }
    end
  end

end 
```

# python - 覆盖冻结的可执行文件

> ID：14451530
> 
> 赞同：7
> 
> 时间：2013-01-22T04:21:24.307
> 
> 标签：python, windows, pyinstaller, coverage.py

有没有办法对使用 pyinstaller 构建的可执行文件进行覆盖？我试着像运行它一样运行它，它是一个 python 脚本，它不喜欢可执行文件作为输入（我真的没想到它会工作），我怀疑答案是否定的，没有简单的方法可以针对构建的可执行文件运行覆盖....（这是在 Windows .exe 上）

我使用的覆盖包只是您从 nedbatchelder.com ( [http://nedbatchelder.com/code/coverage/](http://nedbatchelder.com/code/coverage/) )获得的“easy_install coverage”的普通覆盖包

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-25T22:59:03.540

这不是一个完整的答案，而是我迄今为止发现的。

根据我对 pyinstaller 工作原理的理解，二进制文件是由一个嵌入 python 解释器并引导加载脚本的小型 C 程序构建的。PyInstaller 构建的 EXE 在包含 Python 代码资源的实际二进制文件结束后包含一个存档。这在这里解释[http://www.pyinstaller.org/export/develop/project/doc/Manual.html#pyinstaller-archives](http://www.pyinstaller.org/export/develop/project/doc/Manual.html#pyinstaller-archives)。

Pyinstaller/loader/iu.py [Docs](http://www.pyinstaller.org/export/develop/project/doc/Manual.html#iu-py-an-imputil-replacement)中有 iu.py。您应该能够创建一个导入挂钩以从二进制文件中导入。谷歌搜索 pyinstaller 反汇编程序发现[https://bitbucket.org/Trundle/exetractor/src/00df9ce00e1a/exetractor/pyinstaller.py](https://bitbucket.org/Trundle/exetractor/src/00df9ce00e1a/exetractor/pyinstaller.py)看起来它可能会提取必要的部分。

另一部分是二进制存档中的所有资源都将编译为 python 代码。最有可能的是，coverage.py 会给你无用的输出，就像在正常条件下运行时点击任何其他编译模块时一样。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-07-25T21:59:40.513

**突出**用途`cover_pylib=True`

我知道这是在你问这个问题很久之后，但我只是想知道答案。:)

使用当前的 bitbucket 源，`coverage.py`我能够成功地从`PyInstaller`生成的 EXE 文件中收集覆盖率数据。

在我的应用程序的主要来源中，我有条件地告诉覆盖率开始收集覆盖率，如下所示：

```
if os.environ.has_key('COVERAGE') and len(os.environ['COVERAGE']) > 0:
   usingCoverage = True
   import coverage
   import time
   cov = coverage.coverage(data_file='.coverage.' + version.GetFullString(), data_suffix=time.strftime(".%Y_%m_%d_%H_%M.%S", time.localtime()), cover_pylib=True)
   cov.start() 
```

这仅在我需要时才开始覆盖收集。使用 data_suffix 可以让我更容易地`cov.combine()`在以后合并覆盖文件。 `version.GetFullString()`只是我的应用程序版本号。

`cover_pylib`之所以设置为`True`此处，是因为所有标准 Python 库模块`__file__`属性看起来`...\_MEIXXXXX\random.pyc`都像这样，因此与包内不存在的其他代码无法区分（基于路径）。

当应用程序准备退出时，我有这个小片段：

```
if usingCoverage:
   cov.stop()
   cov.save() 
```

一旦我的应用程序运行，coverage.py 仍然不会自动为我生成它的 HTML 报告。需要清理覆盖数据，以便将`...\_MEIXXXX\...`文件引用转换为真实源代码的绝对文件路径。

我通过运行这段代码来做到这一点：

```
import sys
import os.path

from coverage.data import CoverageData
from coverage import coverage

from glob import glob

def cleanupLines(data):
    """
    The coverage data collected via PyInstaller coverage needs the data fixed up
    so that coverage.py's report generation code can analyze the source code.
    PyInstaller __file__ attributes on code objecters are all in subdirectories of the     _MEIXXXX 
    temporary subdirectory. We need to replace the _MEIXXXX temp directory prefix with     the correct 
    prefix for each source file. 
    """
    prefix = None
    for file, lines in data.lines.iteritems():
        origFile = file
        if prefix is None:
            index = file.find('_MEI')
            if index >= 0:
                pathSepIndex = file.find('\\', index)
                if pathSepIndex >= 0:
                    prefix = file[:pathSepIndex + 1]
        if prefix is not None and file.find(prefix) >= 0:
            file = file.replace(prefix, "", 1)
            for path in sys.path:
                if os.path.exists(path) and os.path.isdir(path):
                    fileName = os.path.join(path, file)
                    if os.path.exists(fileName) and os.path.isfile(fileName):
                        file = fileName
            if origFile != file:
                del data.lines[origFile]
                data.lines[file] = lines

for file in glob('.coverage.' + version.GetFullString() + '*'):
    print "Cleaning up: ", file
    data = CoverageData(file)
    data.read()
    cleanupLines(data)
    data.write() 
```

这里的 for 循环只是为了确保所有将被合并的覆盖文件都被清理干净。

注意：默认情况下，此代码不会清除的唯一覆盖数据是相关文件，它们的属性中`PyInstaller`不包含`_MEIXXX`数据。`__file__`

您现在可以`coverage.py`正常方式成功生成 HTML 或 XML（或其他）报告。

就我而言，它看起来像这样：

```
cov = coverage(data_file='.coverage.' + version.GetFullString(), data_suffix='.combined')
cov.load()
cov.combine()
cov.save()
cov.load()
cov.html_report(ignore_errors=True,omit=[r'c:\python27\*', r'..\3rdParty\PythonPackages\*']) 
```

在构造函数中使用 data_file 是为了确保加载/组合能够正确识别我所有清理过的覆盖文件。

该`html_report`调用告诉`coverage.py`忽略标准 Python 库（以及检查到我的版本控制树中的 Python 库）并只关注我的应用程序代码。

我希望这有帮助。

# java - Apache POI 中的图像转换

> ID：14451533
> 
> 赞同：0
> 
> 时间：2013-01-22T04:21:32.660
> 
> 标签：java, spring, apache-poi

我需要在浏览器上显示从 Word 文档获取的图像。我正在使用 Apache POI 提取图像，但无法在浏览器中打开它。我正在使用下面的代码来保存图像。

```
 picTable = doc.getPicturesTable();
 List pictures = picTable.getAllPictures();
 if(pictures){
      println("pictures::"+pictures.size())
      Picture pic = (Picture)pictures.get(0);
      file = new File("test.gif")
      FileOutputStream out = new FileOutputStream(file)
      out.write(pic.getContent())
      out.close()
 } 
```

我见过下面的接口方法：

在 POI api 中，`PicturesManager 接口方法 savePicture..which

> 存储图像（可能在磁盘上）。请注意，不同的输出格式支持不同的文件类型，因此可能需要进行图像转换。例如，HTML 浏览器通常支持 PictureType.GIF、PictureType.JPEG、PictureType.PNG、PictureType.TIFF，但很少支持 PictureType.EMF 或 PictureType.WMF。FO (Apache FOP) 至少支持 PNG 和 SVG 类型。

任何人都已经实现了这个或任何想法来在浏览器中显示这个图像。非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-20T02:43:33.337

我有 xls 文档的示例，我的代码：

```
HSSFPatriarch patriarch = sheet.getDrawingPatriarch();
if (patriarch != null) {
// Loop through the objects
for (HSSFShape shape : patriarch.getChildren()) {
    if (shape instanceof HSSFPicture) {
        HSSFPicture picture = (HSSFPicture) shape;
        if (picture.getShapeType() == HSSFSimpleShape.OBJECT_TYPE_PICTURE) {
            if (picture.getImageDimension() != null) {

                    HSSFPictureData pictureData = picture.getPictureData();
                    byte[] data = pictureData.getData();
                    String fileName = PATH + picture.getFileName() + "." + pictureData.suggestFileExtension();
                    File file = new File(fileName);
                    try (FileOutputStream fop = new FileOutputStream(file)) {

                        if (!file.exists()) {
                            file.createNewFile();
                        }

                        fop.write(data);
                        fop.flush();
                        fop.close();

                    } catch (IOException e) {
                        e.printStackTrace();
                    }

                }
            }
        }
    }
} 
```

}

在此示例中，PATH 是服务器上文件夹的变量，例如 win 的“c:/temp/img/”或 nix 的“/www/images/”。

如果需要，您可以检查 pictureData.suggestFileExtension() 是否等于 'png'、'jpg' 等。

运行这样的代码后，您可以直接在 html 页面中使用 fileName ，或者如果您使用代理，您需要执行一些额外的操作来获取保存图片的链接。

# mysql - 创建多个小的小表或创建一个非常大的表，在mysql中推荐使用哪种方式

> ID：14451537
> 
> 赞同：1
> 
> 时间：2013-01-22T04:22:08.233
> 
> 标签：mysql, performance

我对 MySQL 的性能有疑问，即

我有超过 60 列的 mysql 表，现在我需要向该表添加更多列。我总是为性能而烦恼。所以你能告诉我哪种方式是最好的方式吗？那要么是创建大表，要么是创建许多小的小表。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T04:59:19.530

小表性能最好，数据恢复容易。所以我建议您可以使用小表并在它们之间创建关系，例如主键和外键，或者根据您的要求删除或更新级联。始终在表中添加多个列会影响您的数据库性能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T04:26:53.940

切勿使用长平桌。把它分成单独的表。你需要学习如何设计数据库。只需搜索谷歌“数据规范化”

# shell - bash 函数中本地数组的大小不正确

> ID：14451539
> 
> 赞同：0
> 
> 时间：2013-01-22T04:22:21.807
> 
> 标签：shell

```
foo()
{
    local arr=(-l largs\
               -m margs\
               -n nargs
              )
    echo "size of arr: ${#arr[@]}"
}
foo   # prints 1 
```

上面的代码打印出来`1`了，但显然`arr`应该是大小`6`。我将代码更改为：

```
foo()
{
    arr=(-l largs\
         -m margs\
         -n nargs
        )
    echo "size of arr: ${#arr[@]}"
}
foo   # prints 6 
```

后一个版本删除`local`，并打印正确答案。所以为什么？本地重要吗？

PS：GNU bash，版本 3.00.15(1)-release (x86_64-redhat-linux-gnu)。

# mercurial - 摆脱 Mercurials Multiple HEADS

> ID：14451544
> 
> 赞同：0
> 
> 时间：2013-01-22T04:22:54.687
> 
> 标签：mercurial, mercurialeclipse

我刚开始使用 hg Mercurial 存储库并陷入了多个 HEADS 的情况。我过去也将我的代码推送到存储库，但它也从当前代码中丢失。在我看来，每次其他人推送他的代码时，我的默认人数都会增加，但我在其他任何机器上都看不到这种行为。任何人都可以帮助它，我怎样才能摆脱这些头并且不失去我的推动力？

注意：我正在使用带有 eclipse mercurial 插件的 MAC OSX。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-22T05:27:02.250

据我现在了解您的问题，您正在推送到存储库，并且还有其他人使用相同的存储库。正确的？

对我来说，您似乎没有处理最新的提交，因此在您当前的分支上创建了多个头。此外请注意：Mercurial 中的头部和分支之间存在一些差异。

我可以想象这样的事情会发生在你身上（假设我们只在一个分支上工作）：

您的工作副本：

```
1-2-3-4-5-6 (where number is revision) 
```

所以你正在提交`r6`，例如两次提交`7'`和`8'`.
现在您的工作副本如下所示：

```
1-2-3-4-5-6-7'-8' 
```

但与此同时，您都推入/拉出的共享存储库看起来像这样：

```
1-2-3-4-5-6-7-8-9-10 (so r10 is the 'latest' commit published) 
```

现在，如果您要推送到共享存储库，则会发生这种情况：

```
 7'-8'
           /
1-2-3-4-5-6-7-8-9-10 
```

瞧，现在有两个不同的头，称为`8'`和`10`。

将来，首先从共享存储库中提取并更新最新提交将防止您出现此问题。

现在，由于您的问题是如何解决多个头，因此有不同的选项，对您来说最容易的是进​​行简单的合并。

```
hg help merge 
```

*   [合并@hg home](http://mercurial.selenic.com/wiki/Merge)
*   [合并@mercurial.red-bean.com](http://hgbook.red-bean.com/read/a-tour-of-mercurial-merging-work.html)

根据头是否仅在本地（查看您的头/提交的[阶段](http://mercurial.selenic.com/wiki/Phases)），您有更多（也许更优雅）选项，例如[rebase](http://mercurial.selenic.com/wiki/RebaseExtension)。

一般来说，[这](http://hgbook.red-bean.com/)是一个很好的开始/深入使用 Mercurial 的资源。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-24T18:12:51.813

已经提供了一些很好的一般信息，但我将提供一些 MercurialEclipse 特定信息。

*   理解 Mercurial 的关键是历史图表。（在导航器视图中右键单击并选择 Team -> Show History）。注意左列是图表。将提交后的图表与提交前的图表进行比较。还要比较拉之前的图表和拉之后的图表。
*   在 Mercurial 中，提交变更集并不意味着对其他人可见。只有推送的变更集对其他人可见
*   一般来说，要解决这种情况，您应该合并所有头（团队 -> 合并），然后推送新的单个头。
*   一旦你回到一个单一的头脑，一个人的工作流程应该
    *   在同步之前提交您的更改
    *   右键单击项目 -> 团队 -> 同步
    *   在同步视图中，右键单击传入节点并选择 Pull and Update。然后，这将提示您与传入的更改合并
    *   当您准备好推送您的更改时（您应该只有一个头并且没有任何传入），您可以通过右键单击传出节点在同步视图中执行此操作。推送变更集会推送所有祖先。

# mysql - MySQL 使用 LEFT JOIN 和 GROUP BY 更新作业

> ID：14451550
> 
> 赞同：0
> 
> 时间：2013-01-22T04:23:18.093
> 
> 标签：mysql

有没有办法根据左连接和分组依据的结果更新值？

我希望能够将当前工作的类别更新为可见，我在下面尝试过，但它不起作用

```
UPDATE category c 
            LEFT JOIN portfolio_job_category pjc
            ON pjc.category_id = c.id
            LEFT JOIN job j
            ON j.id = pjc.job_id
            SET c.visible = 0
            WHERE (c.visible = 0 
            OR c.visible IS NULL)
            AND j.end_date > CURRENT_DATE
            GROUP BY cat_id 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T04:31:02.693

`GROUP BY`不是`UPDATE`语句语法的一部分（[链接](http://dev.mysql.com/doc/refman/5.5/en/update.html)）。`GROUP BY`作为更新的一部分没有多大意义，因为不涉及聚合函数。如果您的目标只是更新与尚未结束的工作相关的所有类别，您应该能够仅使用您拥有的联接来完成此操作。

此外，从句`c.visible = 0`中的析取部分`WHERE`似乎是多余的。如果它已经为 0，则无需将可见设置为 0。

# javascript - JavaScript 中的动态服务定位器？

> ID：14451551
> 
> 赞同：3
> 
> 时间：2013-01-22T04:23:37.457
> 
> 标签：javascript, node.js, service-locator, proxies, ecmascript-harmony

我正在尝试使用 Harmony Proxies (Node.js) 用 Ja​​vaScript 编写动态服务定位器。基本上你会创建一个新容器：

```
 var container = new Container(); 
```

然后，您将能够像传统的服务定位器一样设置和获取值：

```
 container.set('FM', {});
 container.get('FM');
 container.get('FM', function(FM) {

 }); 
```

你甚至可以拥有像子对象一样的命名空间：

```
 container.set('FM.Object', {}); 
```

问题在于动态别名。

```
 var App = container.alias('App'); 
```

创建别名时，它会创建一个新的代理对象，您可以在其中像传统对象一样操作它，但它是`get()`和`set()`方法的别名。

代替：

```
 container.get('App.Hello'); 
```

使用别名，您将使用：

```
 App.Hello 
```

问题在于深层命名空间。假设您正在尝试访问`App.Hello.World.Controller`，因为它一次通过代理一个名称空间，而不是一次全部（就像那个完整的名称空间）。我如何知道用户是否正在调用`App.Hello`以检索存储在服务定位器中的值，或者用户是否想继续访问更深的命名空间？你不能（根据我的尝试）。

**你还有什么其他方法可以做到这一点？**

`App.Hello.World`如果要访问更深的名称空间，则具有将返回代理或存储在服务定位器中的值的语法。

```
 var App = container.alias('App');
  App.Controller.Home.Method.Index
  // It would go through:
  App -> Proxy
  App.Controller -> Proxy or Value?
  App.Controller.Home -> Proxy or Value?
  App.Controller.Home.Method -> Proxy or Value?
  App.Controller.Home.Method.Index -> Proxy or Value? 
```

现在，我已经制定了处理这两个选项的约定。您将使用单数名称来检索值和复数来返回代理。这只是一个快速的“破解”，因为它不是很有效。

（如果您需要澄清或更多信息，请告诉我）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-23T15:15:00.327

### 问题概述

让我看看我是否理解正确。听起来您希望将“一起”访问的属性视为`controller.get`. 举个例子：

```
controller.set('App.Foo.Bar', { Zap: 1 });
controller.set('App.Foo.Bar.Zap', 2);

var App = controller.alias('App');

var Bar = App.Foo.Bar;
var Zap = Bar.Zap;

var Zap2 = App.Foo.Bar.Zap;

console.log(Zap, Zap2);
// should log: 1, 2 
```

如果上述行为是您想要的，那么这是不可能的（使用该语法）。JavaScript 只是不区分`App.Foo.Bar.Zap`和`var Bar = App.Foo.Bar; Bar.Zap`。语言中没有任何内容可以让您区分“一起”访问的属性 ( `var Bar = App.Foo.Bar`) 和“单独”访问的属性 ( `Bar.Zap`)。

* * *

### 提议

但是，您可以通过修改语法来接近。我考虑了几种不同的可能性，这是我能想到的最好的：

```
controller.set('App.Foo.Bar', { Zap: 1 });
controller.set('App.Foo.Bar.Zap', 2);

var App = controller.alias('App');

// Use parens to note that we are ending the key name
// and want it to retrieve a value.
var Bar = App.Foo.Bar();
var Zap = Bar.Zap;

var Zap2 = App.Foo.Bar.Zap();

console.log(Zap, Zap2);
// should log: 1, 2 
```

如果您在属性检索后添加括号，如上所述，那么您可以使用此语法作为代理的区别说明，这意味着从控制器中检索值。

* * *

### 执行

这是使这成为可能的代码：

```
var Container = (function() {

    return function Container() {

        var map = { };

        this.get = function get(key) {
            return map[key];
        };

        this.set = function set(key, value) {
            map[key] = value;
        };

        this.alias = function alias(name) {
            return createAlias(this, name);
        };

    };

    function createAlias(container, aliasName) {
        return new Proxy(
            function() {
                return container.get(aliasName);
            },
            {
                get: function(target, name) {
                    return createAlias(container, aliasName + '.' + name);
                },
                set: function(target, name, value) {
                    container.set(aliasName + '.' + name, value);
                }
            }
        );
    }

})(); 
```

您可以设置`=`和检索`()`：

```
var container = new Container();
container.set('App.Controller.Home.Method.Index', 5);

var App = container.alias('App');

App.Controller.Home.Method = 7;

console.log(
    App.Controller.Home.Method(),      // => 7
    App.Controller.Home.Method.Index() // => 5
); 
```

* * *

### 最后说明

我相信你知道代理是实验性的，但我只想强调 ES6 的这个特殊特性仍然在不断变化。可能是当前的直接代理提案最终被包含在语言中，但也很有可能 ES 中的代理在明年会发生重大变化。（在过去的一个月里，ECMAScript 邮件列表上就代理提案进行了激烈的讨论。）至少对于 Node，如果代理发生巨大变化（当您致力于更新旧实现时），您可以继续使用旧版本的 Node。

希望这可以帮助！

# hadoop - Hbase org.apache.hadoop.hbase.PleaseHoldException

> ID：14451554
> 
> 赞同：6
> 
> 时间：2013-01-22T04:23:41.400
> 
> 标签：hadoop, hbase, apache-zookeeper

我想尝试 HBase-0.94 独立模式，并按照[Quick Start](http://hbase.apache.org/book/quickstart.html)中的说明进行操作。

我启动 hbase`start-hbase.sh`并启动`hbase shell`

似乎我的主人无法初始化，因为我的创建表命令总是失败，如下所示：

```
hbase(main):001:0> create 't1', 'cf'

ERROR: org.apache.hadoop.hbase.PleaseHoldException:    
org.apache.hadoop.hbase.PleaseHoldException: Master is initializing 
```

这是我的`conf/hbase-site.xml`文件：

```
<configuration>
<property>
    <name>hbase.rootdir</name>
    <value>/home/manuzhang/hbase</value>
</property>
<property>
    <name>hbase.zookeeper.property.dataDir</name>
    <value>/home/manuzhang/zookeeper</value>
</property>
</configuration> 
```

和我的`/etc/hosts`文件：

```
127.0.0.1   localhost
127.0.0.1       jmx_host
127.0.1.1   manuzhang-U24E

# The following lines are desirable for IPv6 capable hosts
::1     ip6-localhost ip6-loopback
fe00::0 ip6-localnet
ff00::0 ip6-mcastprefix
ff02::1 ip6-allnodes
ff02::2 ip6-allrouters

74.125.237.1 dl-ssl.google.com 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-22T06:13:09.617

您必须编辑 /etc/hosts 文件，因为 HBase 可能无法使用 127.0.0.1 连接到 localhost

您应该替换该行：

```
127.0.0.1       jmx_host 
```

和

```
127.0.0.1   manuzhang-U24E 
```

之后重新启动 HBase 并希望能修复它。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-08-06T21:04:06.993

HBase 和 /etc/hosts 的关系实际上是一个非常流行的谜团。尽管更改 127.0.1.1 或 127.0.0.1 行可能有效，但该过程实际上相当复杂。

当 HBase 设置 RPC 服务器时，它会监听“hbase.regionserver.dns.interface”中定义的接口的 IP。（嗯，不完全是，实际上，HBase 会找到这个接口的 IP，会查找它的主机名，并且将使用与这个网络接口关联的第一个 IP 的第一个主机名）。

如果你什么都不提供怎么办？假设您的主机名与最合理的接口相关联，它将让您恢复您的主机名。

[参考](http://blog.devving.com/why-does-hbase-care-about-etchosts/)（美丽的帖子。我强烈建议阅读一次）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-24T07:34:25.277

请将该行中的地址 127.0.1.1 更改为 127.0.0.1

```
127.0.1.1  manuzhang-U24E 
```

重新启动 hbase，它应该可以工作。这是因为 hbase 无法找到主控主机。

# android - 我可以使用 Phonegap/cordova 框架复制目录吗？

> ID：14451555
> 
> 赞同：2
> 
> 时间：2013-01-22T04:23:48.997
> 
> 标签：android, ios, cordova, blackberry, cordova-2.0.0

我想将一个目录从一个位置复制到另一个位置。我对此进行了研究，发现了**copyTo** Api。在该文档中，我从以下文档中找到了快速示例

```
function win(entry) {
    console.log("New Path: " + entry.fullPath);
}

function fail(error) {
    alert(error.code);
}

function copyDir(entry) {
    var parent = document.getElementById('parent').value,
        newName = document.getElementById('newName').value,
        parentEntry = new DirectoryEntry({fullPath: parent});

    // copy the directory to a new directory and rename it
    entry.copyTo(parentEntry, newName, success, fail);
} 
```

现在我如何混淆源路径变量和目标路径变量在哪里？谁能给我一个很好的例子

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-22T23:15:09.420

我希望以下内容有助于您的理解：

```
var root;
window.requestFileSystem(LocalFileSystem.PERSISTENT, 0,
    function(fileSystem) {
        root = fileSystem.root;
        // get the directory we want to get within the root directory
        var srcDir = 'srcDir'; 
        root.getDirectory(srcDir, {create: false}, getDirectoryWin, getDirectoryFail);
});

// the directory param should be a DirectoryEntry object that points to the srcDir    
function getDirectoryWin(directory){
    console.log('got the directory');

    // path to the parent directory that holds the dir that we want to copy to
    // we'll set it as the root, but otherwise you'll
    // need parentDir be a DirectoryEntry object
    var parentDir = root;

    // name of the destination directory within the parentDir
    var dstDir = 'dstDir'; 

    // use copyWin/copyFail to launch callbacks when it works/fails
    directory.copyTo(root, dstDir, copyWin, copyFail);
}

function getDirectoryFail(){
    console.log("I failed at getting a directory");
}

function copyWin(){
    console.log('Copying worked!');
}

function copyFail(){
    console.log('I failed copying');
} 
```

# javascript - 拖动 jquery ui 滑块时防止 mouseenter/mouseleave 事件

> ID：14451558
> 
> 赞同：2
> 
> 时间：2013-01-22T04:23:56.270
> 
> 标签：javascript, jquery, jquery-ui

我有一个包含一些 jQuery UI 滑块的页面。该页面还包含一些带有`mouseenter`/`mouseleave`处理程序的 div 元素，用于显示工具提示。正如预期的那样，在 div 上拖动文本或图像不会触发工具提示。但是，在拖动滑块手柄的同时将鼠标移到 div 元素上会触发工具提示。

jsFiddle 展示了这个问题：http: [//jsfiddle.net/JCKYs/4/](http://jsfiddle.net/JCKYs/4/)

拖动 jQuery UI 滑块时是否可以阻止所有`mouseenter`/事件？`mouseleave`

我想出的一个解决方案是创建一个全局标志，指示是否正在拖动滑块。该标志在页面上所有滑块对象的`start`/处理程序中更新。`stop`然后，我可以在所有处理程序中检查此标志的状态，`mouseenter`以防止显示工具提示。

是否有更通用的解决方案不涉及更新我的所有事件处理程序代码？由于文本/图像拖动已经存在这种行为，我认为可能有更好的解决方案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-22T04:45:21.443

这很容易通过在滑动开始时在鼠标后面添加一个浮动 div 来实现。

演示：http: [//jsfiddle.net/JCKYs/5/](http://jsfiddle.net/JCKYs/5/)

更改`var debug = true;`第一行以`var debug = false;`使其透明。

# asp.net-mvc-4 - ASP.net Web API - 将数组名称添加到输出

> ID：14451559
> 
> 赞同：5
> 
> 时间：2013-01-22T04:24:16.067
> 
> 标签：asp.net-mvc-4, asp.net-web-api

我正在尝试更改 Web API 的 json 输出。假设我有一个像 People 这样的对象，当前输出如下：

```
[{name:"John", sex:"M"},{name:"Simon", sex:"M"}] 
```

但是我希望输出如下：

```
{"people":[{name:"John", sex:"M"},{name:"Simon", sex:"M"}]} 
```

关于如何做到这一点的任何想法？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-01-22T04:40:01.143

**选项 1 - 创建新模型**

而不是返回

```
public IEnumerable<Person> Get() 
```

返回

```
public People Get() 
```

在哪里

```
public class People {
    public IEnumerable<Person> People {get; set;}
} 
```

**选项 2 - 返回动态**

而不是返回

```
public IEnumerable<Person> Get() 
```

返回

```
public dynamic Get() {
    IEnumerable<Person> p = //initialize to something;
    return new {people = p};
} 
```

**选项 3 - 修改 JsonMediaTypeFormatter**

你仍然可以返回

```
public IEnumerable<Person> Get() 
```

但添加以下类：

```
public class PeopleAwareJsonMediaTypeFormatter : JsonMediaTypeFormatter
{
    public override System.Threading.Tasks.Task WriteToStreamAsync(Type type, object value, System.IO.Stream writeStream, HttpContent content, TransportContext transportContext)
    {
        if ((typeof (IEnumerable<People>).IsAssignableFrom(type)))
        {
            value = new {people = value};
        }
        return base.WriteToStreamAsync(type, value, writeStream, content, transportContext);
    }
} 
```

现在在 WebApiConfig 中只需注册新的格式化程序而不是旧的 JSON 格式：

```
config.Formatters.RemoveAt(0);
config.Formatters.Insert(0, new PeopleAwareMediaTypeFormatter()); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-10-05T01:13:24.323

让我们假设列表对象的变量名是`PersonList`哪个返回

```
[{name:"John", sex:"M"},{name:"Simon", sex:"M"}] 
```

您可以简单地按以下方式返回而不会感到痛苦

```
 return new
        {
            people = PersonList
        }; 
```

那么你会有

```
{"people":[{name:"John", sex:"M"},{name:"Simon", sex:"M"}]} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-22T04:41:04.697

你一定有一个`DTO`为此`JSON`。所以，你所要做的就是为你的数组准备一个容器。

```
public class ReturnedJson
{
   public IList<People> People {get;set;}
}

 public class People
{
   public string name {get;set;}
   public string sex{get;set;}
} 
```

这是我的假设，你有这个 json 的 DTO，因为你没有显示任何代码。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-01-26T22:45:53.643

基于 Filip W 的第二个选项，这很好地从数据库中提取，因为 List 实现了 IEnumerable：

> 公共动态获取（）{
> 
> ```
> List<Person> personList = new List<Person>();
> 
> using (DataTable dt = db.ExecuteDataTable("PeopleSelect")) {
>     foreach (DataRow dr in dt.Rows) {
>         personList.Add(new Person { name = (string)dr["name"], ...});
>     }
> }
> 
> return new { people = personList }; 
> ```
> 
> }

# php - 提交到 PHP 时出现 AJAX 错误

> ID：14451561
> 
> 赞同：0
> 
> 时间：2013-01-22T04:24:28.537
> 
> 标签：php, jquery, ajax

我有一个基本表单，我在其中提交 facebook 朋友的 ID，php 返回我的名字、我的 FB 照片、我朋友的名字和我朋友的 fb 照片。这是我的相关代码

**HTML**

```
<form name="input">
<input type="text" name="name" id="name"/>
<input id="submit" type="submit" class="btn btn-info" value="Submit"/>
</form>

<div class="row" id="graphArea"></div> 
```

**JAVASCRIPT**

```
$('#submit').click(function(e){
    e.preventDefault();
    var formData = $('form').serialize();
    submitForm(formData);
});

function submitForm(formData){
$.ajax({    
    type: 'POST',
    url: 'graph.php',        
    data: formData,
    dataType: 'json',
    cache: false,
    timeout: 7000,
    success: function(data) { 
        $("#graphArea").load("graph.php");
        $(window).scrollTop($("#graphArea").offset().top);
        $("#graphArea").fadeIn(500);
    },
    error: function(XMLHttpRequest, textStatus, errorThrown) {
        alert("There was an error");          
    },              
    complete: function(XMLHttpRequest, status) {            

        $('form')[0].reset();
    }
}); 
```

**图.php**

```
<?php
    require 'resources/plugin/facebook-php-sdk/src/facebook.php';
    //..some facebook authentication stuff
    $friend = $_POST['name'];
    $basicInfo = $fb->api('me?fields=friends.uid(' . $friend . ').fields(first_name,name),first_name,name');
 ?>
<hr>
<br />
<div class="span2 offset2"><h3>
<?php
    echo $basicInfo['name'] . "</h3></div><div class=\"span2\">";
    echo "<img src='https://graph.facebook.com/" . $user . "/picture?type=large'>";
    echo "</div><div class=\"span2\">";
    echo "<img src='https://graph.facebook.com/" . $friend . "/picture?type=large'></div>";
    echo "<div class=\"span2\"><h3>" . $basicInfo['friends']['data'][0]['name'];
?>
</h3>
</div> 
```

每次我提交表单时，我都会收到错误部分，它会提示“出现错误”。但是通过 Google Chrome Javascript 控制台查看并单击网络，然后单击预览，我看到了我想要的结果！这是我第一次处理 PHP 和 AJAX，我会很感激我能得到的所有帮助。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T04:34:53.770

在您给出的 javascript ajax 调用中`dataType: 'json',`，`php`您返回的`html`this 将引发错误。如果您希望响应为 html 格式，请将数据类型更改为`html`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T04:34:22.543

`graph.php`您对includes的 ajax 调用`dataType: 'json'`，但`graph.php`似乎输出了一个 HTML 片段。此外，您的 AJAX 成功处理程序会再次调用`graph.php`-- 这是不必要的，因为您刚刚调用了`graph.php`提交表单。你应该取而代之的是把返回的 HTML 注入到 DOM 中：

```
$.ajax({    
    type: 'POST',
    url: 'graph.php',        
    data: formData,
    // REMOVED dataType
    cache: false,
    timeout: 7000,
    success: function(data) { 
        $("#graphArea").html(data);   // CHANGED
        $(window).scrollTop($("#graphArea").offset().top);
        $("#graphArea").fadeIn(500);
    },
    error: function(XMLHttpRequest, textStatus, errorThrown) {
        alert("There was an error");          
    },              
    complete: function(XMLHttpRequest, status) {            

        $('form')[0].reset();
    }
}); 
```

# jquery - 替换字符串以标记 JQUERY

> ID：14451564
> 
> 赞同：1
> 
> 时间：2013-01-22T04:24:47.163
> 
> 标签：jquery

我有一个这样的字符串：`var a="hello :D".`
所以，我想将`:`char 替换为`<img>`使用 jQuery。

我是这样做的：
`var message = a.replace(':', '<img src=\'emoticon/01.gif\' />');`

但是在运行我的应用程序时它不起作用！请帮助我，非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T04:25:36.910

使用反斜杠转义`:`

**[现场演示](http://jsfiddle.net/rajaadil/TgWzs/1/)**

```
var result = a.replace(':', '<img src=\'emoticon/01.gif\' />'); 
```

# javascript - 使用 Javascript 确定文本样式

> ID：14451570
> 
> 赞同：1
> 
> 时间：2013-01-22T04:25:01.890
> 
> 标签：javascript, html, macos, cocoa

我目前正在使用可编辑的 WebView，并提供控件以将所选文本更改为`<H1>`~ `<H6>`。默认`normal`样式文本只是`<div>`
我想知道的，我如何使用 javascript 来检查文本对应的样式类型（H1~H6 或 DIV）...

我目前正在使用以下代码将所选文本的文本样式修改为`<H1>`

```
[webView stringByEvaluatingJavaScriptFromString:
                @"document.execCommand(\"FormatBlock\", false, \"<H1>\")"]; 
```

有没有办法检查所选文本的样式（无论是通过拖动，还是仅通过光标的位置）正在使用 javascript？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T05:55:40.897

HTML 内容中的选择可能跨越多个元素。它也可能只包含开始和结束元素内的部分文本。这使得很难为您的问题提供准确的答案，因为在一般情况下，没有一个元素名称或 CSS 样式应用于选择。但是，希望下面提到的构建块将允许您构建与您的意图相匹配的行为。

由于您正在使用 WebKit 的 Objective-C API，我将描述它是如何在 Objective-C API 和 JavaScript 中工作的。由于您使用 JavaScript 无法获得的编译器反馈，因此使用 Objective-C API 会更愉快。

* * *

WebView 中的选择表示为`DOMRange`并且可以使用 检索`-[WebView selectedDOMRange]`。选择从节点文本的`-startContainer`偏移量返回的元素开始。`-startOffset`选择继续按 DOM 顺序遍历所有节点，`-endOffset`直到`-endContainer`.

插入点表示为`DOMRange`折叠的 a，如`collapsed`属性所示。在这种情况下`-startContainer`， and`-endContainer`应该返回相同的值，指示插入符号所在的节点，`-startOffset`并且`-endOffset`将相等并表示插入符号所在的文本内容的偏移量。

一旦您确定了所涉及的节点，您就可以使用常规 DOM API 来确定标签名称 ( `-[DOMNode tagName]`) 和 CSS 对象模型 API 来检索样式信息 ( `-[DOMDocument getComputedStyle:pseudoElement:]`)。

* * *

从 JavaScript 方面来看，这些概念是相似的，但是`Selection`在您到达`Range`s.

您用于`window.getSelection()`检索`Selection`对象。该对象将包含零个或多个范围，每个范围代表一个选定区域。零范围意味着有一个插入点而不是真正的选择。由于某些平台支持不连续的选择，因此允许多个范围。

如上所述，该`Selection`对象将具有一个`rangeCount`为零的值和一个`isCollapsed`真值，以指示选择只是一个插入点。

当`rangeCount`非零时，您可以`Selection`通过重复调用来迭代 内的范围`getRangeAt`。从那时起，您将返回使用与上述 Objective-C 案例中描述的对象`Range`具有相同接口的对象，包括 、和属性。`DOMRange``startContainer``endContainer``startOffset``endOffset`

# jquery - Rails 3 Ajax 为什么将参数添加到获取请求会导致重定向到操作的路径

> ID：14451573
> 
> 赞同：1
> 
> 时间：2013-01-22T04:25:28.870
> 
> 标签：jquery, ruby-on-rails, ajax, params

在我的 routes.rb 文件中，我`match ':controller/:action'`在底部。

我有一个控制器调用`scheduler`一个名为`seed`.

当我根据以下 haml 向服务器发送 GET 请求时，没有重定向，我可以使用 jQuery 事件侦听器处理返回的数据`ajax:success`，因为 rails 不会将我重定向到`scheduler/seed`（请求从 发送`/scheduler`）。

```
%a#seeder.btn.btn-primary{:href => 'scheduler/seed', :data => { :remote => 'true', :type => 'html', :method => 'GET'}} Add Timeslots to Selected Day 
```

但是，一旦我添加`data-params`到请求中，无论是通过`data-params`html 上的锚标记字段还是使用以下 javascript，rails 都会`/scheduler/seed`在收到请求时将我重定向到。

js：

```
$('#seeder').on('ajax:before', function() {
      $(this).data('params', { date: $('#input_date').value() });
}); 
```

这是一个问题，因为我想继续`/scheduler/`根据返回的 json/xml/etc 更新页面。

# c++ - 如何在不可见模式下运行 qt c++ 控制台应用程序？

> ID：14451575
> 
> 赞同：1
> 
> 时间：2013-01-22T04:25:38.410
> 
> 标签：c++, qt, qt4

我在 Q creator 中制作了简单的 qt c++ 应用程序。它工作正常。如果控制台窗口关闭，程序将终止。即使控制台窗口关闭，我也想运行这个应用程序。我怎样才能做到这一点？如何在不可见模式下运行 qt c++ 控制台应用程序？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-22T04:31:19.943

在 Gedit 或 nano 等文本编辑器中打开您的 .pro 文件。

然后找到这一行：CONFIG += CONSOLE

删除这一行，保存，重新编译

# web - 如何计算访问特定域的次数？

> ID：14451576
> 
> 赞同：0
> 
> 时间：2013-01-22T04:25:43.617
> 
> 标签：web, usage-statistics

我有兴趣编写一个程序（或可能使用其他方式）以在每次我从任何浏览器访问特定域时更新计数器，例如“wikipedia.org”或“twitter.com”。据我所知，不存在这样的程序。问题是我不知道从哪里开始：我不知道外部程序如何能够判断浏览器何时从给定域请求页面。

理想情况下，我想将此值存储在一个简单的文本文件中，例如：

```
twitter.com   = 123
wikipedia.org = 456 
```

该程序将在后台运行并在每次访问其中一个域时更新文件。

我对其他解决方案持开放态度——也许可以在浏览器中完成，或者这些数据已经存储在某个地方，我只需要处理它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T10:46:43.177

您可以编写一个浏览器插件来允许您执行此操作。下面的链接是针对 Firefox 的，对于 IE、Chrome 等也可以这样做。所需的数据应该在浏览器历史记录中可用。 [火狐扩展](http://blog.mozilla.org/addons/2009/01/28/how-to-develop-a-firefox-extension/)

# php - 变量不离开 If 语句

> ID：14451579
> 
> 赞同：0
> 
> 时间：2013-01-22T04:25:59.370
> 
> 标签：php, wordpress

我正在尝试在 Wordpress 中为画廊显示当前选择的特色图片 - 如果没有选择特色图片，我希望它选择画廊中的第一张图片并使用该图片。我写了以下内容，它只返回 else 语句中的图像。换句话说，如果我选择了特色图像，则不会显示任何图像。如果我告诉 php 在 if 语句中回显 $image_img_tag 的内容，它会返回图像。但由于某种原因，它不会在 if/else 语句之外显示该图像。我假设 $image_img_tag 的值不是从 if/else 语句中得出的，但不知道为什么。有什么想法吗？

```
<?php
    if ( has_post_thumbnail() ) :
        $featuredID = get_post_thumbnail_id();
        $image_img_tag = wp_get_attachment_image( $featuredID, 'featured-image');
    else :
        $images = get_children( array( 'post_parent' => $post->ID, 'post_type' => 'attachment', 'post_mime_type' => 'image', 'orderby' => 'menu_order', 'order' => 'ASC', 'numberposts' => 999 ) );
        if ( $images ) :
            $total_images = count( $images );
            $image = array_shift( $images );
            $image_img_tag = wp_get_attachment_image( $image->ID, 'featured-image');
    endif;
?>

<figure class="alignright gallery-thumb">
    <a href="<?php the_permalink(); ?>"><?php echo $image_img_tag; ?></a>
</figure><!-- .alignright .gallery-thumb --> 
```

这是该区域的完整代码，包括所有 ifs/endifs。这可能有助于解释问题。

```
<?php if ( is_search() ) : // Only display Excerpts for search pages ?>
<div class="entry-summary">
    <?php the_excerpt(); ?>
</div><!-- .entry-summary -->
<?php else : ?>
<div class="entry-content">
    <?php if ( post_password_required() ) : ?>
        <?php the_content( __( 'Continue reading <span class="meta-nav">&rarr;</span>', 'matthewbarker' ) ); ?>

    <?php else : ?>
        <?php
            if ( has_post_thumbnail() ) :
                //the_post_thumbnail('featured-image',array('class'=>'alignright'));
                $featuredID = get_post_thumbnail_id();
                $image_img_tag = wp_get_attachment_image( $featuredID, 'featured-image');
            else :
                $images = get_children( array( 'post_parent' => $post->ID, 'post_type' => 'attachment', 'post_mime_type' => 'image', 'orderby' => 'menu_order', 'order' => 'ASC', 'numberposts' => 999 ) );
                if ( $images ) :
                    $total_images = count( $images );
                    $image = array_shift( $images );
                    $image_img_tag = wp_get_attachment_image( $image->ID, 'featured-image');
            endif;
            ?>

        <figure class="alignright gallery-thumb">
            <a href="<?php the_permalink(); ?>"><?php echo $image_img_tag; ?></a>
        </figure><!-- .alignright .gallery-thumb -->

        <p><em><?php printf( _n( 'This gallery contains <a %1$s>%2$s photo</a>.', 'This gallery contains <a %1$s>%2$s photos</a>.', $total_images, 'matthewbarker' ),
                'href="' . esc_url( get_permalink() ) . '" title="' . sprintf( esc_attr__( 'Permalink to %s', 'matthewbarker' ), the_title_attribute( 'echo=0' ) ) . '" rel="bookmark"',
                number_format_i18n( $total_images )
            ); ?></em></p>
    <?php endif; ?>
    <?php the_excerpt(); ?>
<?php endif; ?>
<?php wp_link_pages( array( 'before' => '<div class="page-link"><span>' . __( 'Pages:', 'matthewbarker' ) . '</span>', 'after' => '</div>' ) ); ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T04:34:15.887

您可能错过了一个`endif`：

```
if ( has_post_thumbnail() ) :
    $featuredID = get_post_thumbnail_id();
    $image_img_tag = wp_get_attachment_image( $featuredID, 'featured-image');
else :
    $images = get_children( array( 'post_parent' => $post->ID, 'post_type' => 'attachment', 'post_mime_type' => 'image', 'orderby' => 'menu_order', 'order' => 'ASC', 'numberposts' => 999 ) );
    if ( $images ) :
        $total_images = count( $images );
        $image = array_shift( $images );
        $image_img_tag = wp_get_attachment_image( $image->ID, 'featured-image');
    endif; #MISSING? 
endif; 
```

# android - android logcat不显示时间、PID等

> ID：14451582
> 
> 赞同：1
> 
> 时间：2013-01-22T04:26:29.040
> 
> 标签：android, logcat

![截屏](../Images/9d6f8969fe8f86041285383858b6bafe.png)任何人都可以帮助修复 logcat 的奇怪显示吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T04:42:20.810

关闭您的 logcat，然后再次使用 show view 添加它或使用已弃用的 logcat ..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T05:01:38.610

更新 Eclipse 和 Android SDK 可能会解决问题。

![在此处输入图像描述](../Images/8e42ee7983d2e9224e38036e86463a14.png)

有关更多信息，请参阅此[链接](https://stackoverflow.com/questions/11439821/debugging-issues-android-eclipse)。

# java - 如何检索 COUNT() SUM() AVG() MIN() MAX() 语句的结果集？

> ID：14451584
> 
> 赞同：1
> 
> 时间：2013-01-22T04:26:40.403
> 
> 标签：java, mysql, sql, database, resultset

我的系统在检索数据库中的某些值时遇到问题。我想获得特定字段中值的摘要。这是我检索值的代码：

```
public void insertToClientSummary(){
    sql = "SELECT COUNT(genClientID), SUM(principal), SUM(interest), SUM(totalPayment), SUM(totalBal) FROM client_info";
    try {
        stmt = conn.prepareStatement(sql);
        rs = stmt.executeQuery();
        String titles[] = new String [4];
        titles[0] = "Total Clients";
        titles[1] = "Total Loan Book";
        titles[2] = "Total Interests";
        titles[3] = "Total Payment";
        titles[4] = "Total Balance";
        rs.next();
        for (int ctr=0;ctr<=5;ctr++){
            String sql2 = "INSERT INTO client_summary (title, sumValues) VALUES ('"+titles[ctr]+"','')";
            PreparedStatement stmt2 = conn.prepareStatement(sql2);
            stmt2.executeUpdate();
            ctr++;
            sql = "UPDATE client_summary SET sumValues = '"+String.valueOf(rs.getDouble(ctr))+"'";
            stmt = conn.prepareStatement(sql);
            stmt.executeUpdate();
            ctr--;
        }
    }
    catch(Exception e){
        JOptionPane.showMessageDialog(null, "Client Summary Query Exception");
    }
} 
```

顺便说一句，我还包括了用于在所述`client_summary`表中插入新值的代码。但我认为我在第一次查询时遇到了异常。对正确检索数据有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-22T04:29:42.160

您可以使用`as name`(alias) 来获取它们。例子

```
SELECT COUNT(genClientID) as cnt, ......... 
```

然后

```
 rs.getString("cnt"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T05:18:56.380

如果您只想在汇总表中插入聚合值，则可以使用 insert select。这样你就不需要结果集迭代。例如

```
INSERT INTO summary(id,total,max) SELECT count(id),sum(principal),sum(interest) FROM client_info 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-12T20:59:46.880

这个解决方案对我不起作用。我不知道我在 SQL 查询中是否有问题，但如果我在数据库上运行它，它会返回正确的值。

```
SELECT ((SUM(Y1) * 20) / 60) as heat FROM logger.AcondData where (time > '2013-10-12 0:0:0' and time < '2013-10-12 23:59:59') and Y1 = 1 and Y8 = 0; 
```

这里是从 ResultSet 中获取的。

```
java.sql.PreparedStatement preparedStatement = mConnection.prepareStatement(query);
ResultSet resultSet = preparedStatement.executeQuery();

while (resultSet.next())
{
    printWriter.println("<h1>Heating time: " + resultSet.getString("heat") + " minut");
} 
```

Edit1：如果我删除最后两个条件，它会起作用。

```
SELECT ((SUM(Y1) * 20) / 60) as heat FROM logger.AcondData where (time > '2013-10-12 0:0:0' and time < '2013-10-12 23:59:59'); 
```

Y1 和 Y8 是 TINYINT(1)

Edit2：现在它的工作，看起来问题出在数据库数据中。从远程数据库导入数据后就OK了。

# ruby-on-rails - Ruby 的 Paypal 自适应支付

> ID：14451587
> 
> 赞同：1
> 
> 时间：2013-01-22T04:26:55.187
> 
> 标签：ruby-on-rails, ruby, paypal, paypal-adaptive-payments

我已经看到了关于如何进行付费电话的两个不同版本，我想知道我做错了什么，因为这两个版本都不起作用。

```
@result = HTTParty.post('https://svcs.sandbox.paypal.com/AdaptivePayments/Pay',
  :body =>
    {:actionType => "PAY",
     :currencyCode => "USD",
     :receiverList => {
       :receiver => [
         {:amount => "1.00",
          :email => "rec1_1312486368_biz@gmail.com"}]
     },
     :returnUrl => "www.yahoo.com",
     :cancelUrl => "google.com",
     :requestEnvelope => {
       :errorLanguage => "en_US",
       :detailLevel => "ReturnAll"}
     },
     :headers => {
       "X-PAYPAL-SECURITY-USERID" => "caller_13124862354_api1.gmail.com",
       "X-PAYPAL-SECURITY-PASSWORD" => "1234567890",
       "X-PAYPAL-SECURITY-SIGNATURE" => "AbtI7HV1xB428VygBUcIhARzxch4AL78.T19CTeylixNNxDZUu0iO87e",
       "X-PAYPAL-APPLICATION-ID" => "APP-81W284485P518643T",
       "X-PAYPAL-REQUEST-DATA-FORMAT" => "JSON",
       "X-PAYPAL-RESPONSE-DATA-FORMAT" => "JSON"
     }
 ) 
```

和

```
@result = HTTParty.post('https://svcs.sandbox.paypal.com/AdaptivePayments/Pay',
  :body => {
    :actionType => "PAY",
    :currencyCode => "USD",
    "receiverList.receiver(0).email".to_sym => "rec1_1312486368_biz@gmail.com",
    "receiverList.receiver(0).amount".to_sym => "1.00",
    :returnUrl => "www.yahoo.com",
    :cancelUrl => "gizmodo.com",
    :requestEnvelope => {
      :errorLanguage => "en_US",
      :detailLevel => "ReturnAll"}
  },
  :headers => {
    "X-PAYPAL-SECURITY-USERID" => "caller_13124862354_api1.gmail.com",
    "X-PAYPAL-SECURITY-PASSWORD" => "1234567890",
    "X-PAYPAL-SECURITY-SIGNATURE" => "AbtI7HV1xB428VygBUcIhARzxch5AL65.T18CTeylixNNxDZUu0iO87e",
    "X-PAYPAL-APPLICATION-ID" => "APP-81W284485P518643T",
    "X-PAYPAL-REQUEST-DATA-FORMAT" => "JSON",
    "X-PAYPAL-RESPONSE-DATA-FORMAT" => "JSON"
   }
) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T04:49:32.363

PayPal 有官方的 Ruby SDK（[paypal-sdk-adaptivepayments](https://github.com/paypal/adaptivepayments-sdk-ruby)）

示例可在[http://paypal-sdk-samples.herokuapp.com/adaptive_payments/pay](http://paypal-sdk-samples.herokuapp.com/adaptive_payments/pay)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-22T10:32:43.760

我推荐使用这个 gem，[http://rubygems.org/gems/active_paypal_adaptive_payment](http://rubygems.org/gems/active_paypal_adaptive_payment)，你可以进行付款、**预批付款、取消付款**等。

您需要使用下一个代码进行付款。

```
def checkout #this method is for checking, you must add this code to your method on your controller
  recipients = [{:email => 'email1',
                 :amount => some_amount,
                 :primary => true},
                {:email => 'email2',
                 :amount => recipient_amount,
                 :primary => false}
                 ]
  response = gateway.setup_purchase(
    :return_url => url_for(:action => 'action', :only_path => false),
    :cancel_url => url_for(:action => 'action', :only_path => false),
    :ipn_notification_url => url_for(:action => 'notify_action', :only_path => false),
    :receiver_list => recipients
  )

  # For redirecting the customer to the actual paypal site to finish the payment.
  redirect_to (gateway.redirect_url_for(response["payKey"]))
end 
```

`return_url`和`cancel_url`值，必须是您自己网站上的相对 url ！

问候！

# android - 使用 Apache HttpClient 自动重定向

> ID：14451592
> 
> 赞同：3
> 
> 时间：2013-01-22T04:27:08.453
> 
> 标签：android, httpclient

我在我的 Android 4.2 应用程序中使用 apache HttpClient。我需要支持请求的自动重定向。我在请求上设置了自动重定向标志，如下所示：

```
HttpClientParams.setRedirecting(this.request.getParams(), isAutoRedirectEnabled); 
```

只要请求是简单的 GET，请求就可以很好地重定向。当我发送带有特定负载的 POST 请求时，第一个请求作为 POST 发送，但是当该请求被重定向时，自动重定向逻辑会向重定向的 URL 发送一个 GET 请求。

我尝试将 HttpRedirectHandler 设置为 DefaultHttpClient 并手动处理重定向，但这是一种非常老套的方法，我已经发现了其中的问题。还有其他方法吗？

# iphone - 每当从 Rails 服务器发布新值时，我如何通知 iPhone 应用程序？

> ID：14451594
> 
> 赞同：0
> 
> 时间：2013-01-22T04:27:28.210
> 
> 标签：iphone, ruby-on-rails, ruby-on-rails-3

我有一个服务于 iphone 应用程序的 Rails 应用程序。考虑如果用户发布了一个值，它保存在服务器中，我想通知其他用户发布了新值。我想这样做是因为用户必须经常发送请求以检查是否发布了任何新值，这会导致更多请求。因此，我希望服务器本身在推送新值时通知。

我怎样才能做到这一点？请帮我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T04:53:47.143

推送通知很好，但不能保证像 aroth 提到的那样 100% 的可靠性。您可以尝试使用 XMPP，您可以轻松找到适用于 iOS 的 XMPP 客户端以及 Ruby/PHP 所需的服务器端代码。检查以下链接...

[XMPP 客户端](http://xmpp.org/xmpp-software/clients/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T04:33:25.977

一般来说，您可以通过 iOS 客户端使用[推送通知](http://developer.apple.com/library/mac/#documentation/NetworkingInternet/Conceptual/RemoteNotificationsPG/ApplePushService/ApplePushService.html)来完成此操作。

但是请注意，这种方法有许多注意事项（用户可以选择不接收推送通知，即使用户选择了也不能保证推送通知的传递等），因此如果出现以下情况，这不是一个合适的解决方案您需要 100% 的可靠性。

# sql - 为每个组选择具有最多非关键信息的行

> ID：14451596
> 
> 赞同：1
> 
> 时间：2013-01-22T04:27:58.277
> 
> 标签：sql, select, sql-server-2012

好的，我有一个包含一些垃圾数据且没有唯一标识符列的表。让我举一个我正在使用的表的例子：

```
 A    |   B   |  C   |        D         |   E  |
  --------------------------------------------------
1\.  Fiona | Smith | NULL | 2152 Cherry Lane | CA   |
2\.  Fiona | Smith | NULL | NULL             | NULL |
3\.  Bill  | NULL  | ACME | 2903 Center Road | WA   |
4\.  Bill  | NULL  | ACME | NULL             | NULL |
5\.  NULL  | NULL  | ABC  | 2300 Water St    | PA   |
6\.  NULL  | NULL  | ABC  | 2300 Water St    | PA   |
7\.  NULL  | NULL  | NULL | 3455 B Street    | CO   | 
```

我需要编写一个只抓取不同行的 SELECT 语句。例如，以第 1 行和第 2 行为例。它们显然都指的是同一个人，但它们只是部分重复。在这两个中，我希望我的 SELECT 语句中包含第 1 行，因为它在每列中包含最多的数据。第 3 行和第 4 行也是如此。第 3 行是我想要包含的行。对于第 5 行和第 6 行，选择哪一个并不重要，因为它们都是完全重复的。第 7 行将默认包括在内，因为它是不同的（意味着 A、B 和 C，而不仅仅是 A 和 B）。

这是我尝试过的：

```
SELECT A, B, C = MAX(D), MAX(E), 
FROM dbo.Data
GROUP BY A, B, C; 
```

这似乎抓住了我想要的唯一行，但数据以某种方式放置到错误的列中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T04:33:01.530

```
WITH recordsList
AS
(
    SELECT  A, B, C, D, E,
            ROW_NUMBER() OVER (PARTITION BY A,B,C
                               ORDER BY 
                                 CASE WHEN D IS NULL 
                                      THEN 0
                                      ELSE 1 END DESC) x
   FROM table1
)
SELECT A,B,C,D,E
FROM recordsList
WHERE x = 1 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!6/9cc71/4)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-22T04:43:35.803

这种方法将 D 和 E 视为相等：

```
DECLARE @x TABLE
(
  A VARCHAR(32), 
  B VARCHAR(32), 
  C VARCHAR(32), 
  D VARCHAR(32), 
  E VARCHAR(32)
);

INSERT @x VALUES
('Fiona', 'Smith', NULL,   '2152 Cherry Lane',  'CA'),
('Fiona', 'Smith', NULL,   NULL,                NULL),
('Bill',  NULL,    'ACME', '2903 Center Road',  'WA'),
('Bill',  NULL,    'ACME', NULL,                NULL),
(NULL  ,  NULL,    'ABC',  '2300 Water St',     'PA'),
(NULL  ,  NULL,    'ABC',  '2300 Water St',     'PA'),
(NULL  ,  NULL,    NULL,   '3455 B Street',     'CO'),
('Bob',   'Barker',NULL,   NULL,                NULL),
('Bob',   'Barker',NULL,   NULL,                'NY');

;WITH x AS
(
  SELECT A,B,C,D,E, rn = ROW_NUMBER() OVER 
  (
    PARTITION BY A,B,C
    ORDER BY COALESCE(LEN(LEFT(D,1)),0) + COALESCE(LEN(LEFT(E,1)),0) DESC
  )
  FROM @x
)
SELECT A,B,C,D,E
FROM x WHERE rn = 1; 
```

# python - 如何将 tshark 统计信息保存在变量中

> ID：14451599
> 
> 赞同：2
> 
> 时间：2013-01-22T04:28:41.587
> 
> 标签：python, wireshark, tshark

我想将`tshark`命令的输出保存在变量中。

例如，如果我运行：

```
tshark -r capture.pcap -qz io,stat,0 
```

我会得到 ：

```
Time            |frames|  bytes

00.000-060.000     742     51660 
```

我想将总帧数保存在脚本中的变量中以供进一步计算。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T05:34:36.617

在我的系统上`tshark`，输出格式与您在问题中显示的格式不同。为了使解析更加健壮，我更改了命令行：

```
#!/usr/bin/env python
import shlex
from itertools import dropwhile
from subprocess import check_output as qx

# get tshark output
command = "tshark -r capture.pcap -qz 'io,stat,0,COUNT(frame)frame'"
lines = qx(shlex.split(command)).splitlines()

# parse output
lines = dropwhile(lambda line: not line.rstrip().endswith("COUNT"), lines)
next(lines) # skip header
frames_count = int(next(lines).split()[1])
print(frames_count) 
```

您无需调用`tshark`即可从 pcap 文件中获取统计信息。您可以使用可以解析 pcap 文件的 Python 库，例如，使用[`scapy`](http://www.secdev.org/projects/scapy/doc/usage.html#reading-pcap-files)：

```
#!/usr/bin/env python
from scapy.all import rdpcap

a = rdpcap('capture.pcap')
frames_count = len(a)
print(frames_count) 
```

要`tshark -r capture.pcap -qz 'io,stat,0,ip.src==192.168.230.146'`使用以下命令获取计数`scapy`：

```
#!/usr/bin/env python
from scapy.all import IP, sniff

a = sniff(offline='capture.pcap',
          lfilter=lambda p: IP in p and p[IP].src == '192.168.230.146')
count = len(a)
print(count) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T04:38:24.297

首先将输出保存到文件：

通过在 shell 中运行此命令：

`tshark -r capture.pcap -qz io,stat,0 > abc.txt`：

或使用`subprocess.Popen()`：

```
from subprocess import Popen

with open("abc.txt","w") as f:
    Popen(["tshark" ,"-r","capture.pcap","-qz", "io,stat,0"],stdout=f) 
```

现在打开文件并计算总帧数：

```
with open("abc.txt") as f:
    next(f)  #skip header
    tot_frames=sum(int(line.split()[1]) for line in f if line.strip()) 
    print (tot_frames)         #prints 742 
```

# bash - bash 包装器将标准错误着色为红色

> ID：14451603
> 
> 赞同：3
> 
> 时间：2013-01-22T04:30:22.753
> 
> 标签：bash, colors

Bash 支持颜色，即`\033[31m`切换到红色并`\033[0m`切换回无色。

我想制作一个小的 bash 包装器，它可以可靠地将 stderr 显示为红色，即它应该放在来自 stderr 的所有内容`\033[31m`之前和之后。`\033[0m`

我不确定这是否可行，因为当两个并行进程（甚至一个进程）同时写入 stdout 和 stderr 时，必须有一种方法可以逐个字符地区分两者。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T05:46:40.697

着色文本很简单：阅读每一行并在开头和结尾使用适当的转义序列回显它。但是着色*标准错误*变得棘手，因为标准错误不会传递给管道。

这是一种通过交换标准错误和标准输出，然后过滤标准输出来工作的方法。

这是我们的测试命令：

```
#!/bin/bash

echo hi
echo 'Error!' 1>&2 
```

和`wrapper`脚本：

```
#!/bin/bash
(# swap stderr and stdout
 exec 3>&1 # copy stdout to fd 3
 exec 1>&2 # copy stderr to fd 1
 exec 2>&3- # move saved stdout on fd 3 over to 2
 "${@}") | while read line; do
                echo -e "\033[31m${line}\033[0m"
           done 
```

然后：

```
$ ./wrapper ./test-command
hi
Error! # <- shows up red 
```

不幸的是， wrapper 命令的所有输出都来自`stderr`, not `stdout`，因此您无法将输出通过管道传输到任何其他脚本中。您可能可以通过[创建一个临时 fifo](http://www.gnu.org/software/coreutils/manual/html_node/mkfifo-invocation.html)来解决这个问题……但希望这个小包装脚本足以满足您的需求。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-07-09T18:54:57.187

基于 andrewdotn 的包装器

变化：

*   将 stderr 输出放回 stderr
*   避免`echo -e`处理行中的内容

包装

```
#!/bin/bash

"${@}" 2> >(
while read line; do
    echo -ne "\033[31m" 1>&2
    echo -n "${line}" 1>&2
    echo -e "\033[0m" 1>&2
done
) 
```

问题：输出行最终分组，而不是混合 stdout/stderr

测试脚本：

```
#!/bin/bash

echo Hi
echo "\033[32mStuff"
echo message
echo error 1>&2
echo message
echo error 1>&2
echo message
echo error 1>&2 
```

输出：

```
Hi
\033[32mStuff
message
message
message
error # <- shows up red
error # <- shows up red
error # <- shows up red 
```

# android - ShapeRenderer 不在 NetBeans Android 模拟器中呈现

> ID：14451606
> 
> 赞同：0
> 
> 时间：2013-01-22T04:30:36.543
> 
> 标签：android, libgdx

我正在开发一个 Android 小项目，并使用适用于 NetBeans 7.0 的 Android 插件测试进度。问题是我正在使用 ShapeRenderer 绘制实心圆。当我在 android 模拟器中运行时，我无法看到归档的圆圈。但是当我运行与桌面相同的应用程序时，我可以看到实心圆圈。

```
 private void drawFilledCircle(){
   shapeRenderer.setProjectionMatrix(camera.combined);
   shapeRenderer.begin(ShapeType.FilledCircle);
   shapeRenderer.setColor(new Color(0, 1, 0, 1));
   shapeRenderer.filledCircle(470, 45, 10);
   shapeRenderer.end();
} 
```

有没有人遇到过这个问题，或者如果我错过了什么，请告诉我？我使用的框架是LibGDX，Android版本是2.3.3

谢谢大家

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T04:38:13.560

我现在也可以在 android 模拟器中看到输出。看起来它没有正确编译应用程序。谢谢

# css - 媒体查询问题。横向和纵向

> ID：14451608
> 
> 赞同：1
> 
> 时间：2013-01-22T04:30:45.060
> 
> 标签：css, responsive-design, media-queries

我已经围绕 stackoverflow 进行了一些搜索，但似乎都没有解决我的问题，因此我在这里发布。

我有一张桌子。它有六排。我已经完成了媒体查询（@media only screen and (max-device-width: 480px)），以便在手机上查看时表格不会扭曲页面。媒体查询本身本质上只是在做 display: none; 在 tr 类上。

然而，我遇到的问题是 max-device-width 设置为 480px。所以很自然地，人们会认为当超过这个值时，这些字段会返回。我的手机（诺基亚 Lumia 800）的分辨率为 480x800，所以在纵向它应该隐藏 tr。但是在横向中，它们应该重新出现，因为那将是 800x480 的分辨率。这本质上是我的问题。尽管进行了视口测试并且它说它是，但它们并没有重新出现。

有谁知道为什么会发生这种情况？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T19:11:10.870

本质上，您的代码中发生的事情是当用户低于 480 像素时，您告诉 css 隐藏元素并且状态保存在运行时。当用户超过 480 像素时，您没有规则可以将此元素带出 (display:none) 状态。

CSS 以级联方式工作，因此给它的最后一条规则将是浏览器默认的规则。

如果您有一个查询声明低于 480 像素显示：隐藏，则需要另一个查询来声明高于 480 像素显示：块。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-06-13T07:47:54.093

尝试这个

**对于 >480 像素的设备**

```
@media(min-width:481px){
 tr{
    display:table-row ; /* to show table row*/
  }
} 
```

**对于小于 480 像素的设备**

```
@media(max-width:480px){
 tr{
    display:none;  /* to hide table row*/
  }
} 
```

# php - 使用 php 的 Paypal 集成不会从沙箱中的买家虚假账户中扣除钱

> ID：14451610
> 
> 赞同：0
> 
> 时间：2013-01-22T04:30:57.433
> 
> 标签：php, paypal, paypal-sandbox

我在payapal沙箱中创建了卖家账户和买家账户。然后尝试使用php集成paypal。我使用paypal的DoDirectPayment Api使用php进行交易。我使用买家虚拟信用卡号进行交易，交易成功。卖家收到了他的钱，即钱存入了他的账户，但钱没有从买家账户中扣除。为什么会这样？谢谢 问候， AlenLee MJ

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T04:33:41.310

不要使用买家信用卡，而是使用买家贝宝帐户详细信息并尝试。它应该工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T05:09:31.150

DoDirectPayment API 不允许您从 paypal 帐户中扣除付款，它只接受信用卡，因此付款只会从信用卡中扣除，而不是从 paypal 帐户中扣除从 paypal 帐户中的付款，您应该使用 Paypal 的 ExpressCheckout API 它允许扣除从贝宝账户付款。

# javascript - 通过 html 图像更改 javascript 变量

> ID：14451612
> 
> 赞同：0
> 
> 时间：2013-01-22T04:31:07.517
> 
> 标签：javascript, html

我有以下html代码：

```
<div align="center">
  <img src="blue.png"/>     
  <img src="cyan.png"/>
  <img src="green.png"/>
  <img src="purple.png"/>
  <img src="red.png"/>
  <img src="yellow.png"/>
<div\> 
```

我需要根据单击的变量来更改 javascript 变量。

如果点击红色，我需要`var color`等于“红色”，如果点击蓝色，我需要等于“蓝色”等等......有什么简单的方法可以做到这一点吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T04:41:11.470

假设每个图像的 src 都是带有扩展名的颜色，您可以这样做。

```
var images = document.getElementsByTagName('img');

for(var i = 0; i < images.length; i++) {
    images[i].onclick = onImageClick;
}

function onImageClick(e) {
    var image = e.event.target || window.event.target;

    var color = image.src.split('.')[0];

    alert(color);
} 
```

这不是很动态，所以你应该只使用这样的数据属性。

```
<img src="blue.png" data-color="blue" /> 
```

并且`onImageClick()`看起来像这样。

```
function onImageClick(e) {
    var image = e.event.target || window.event.target;

    var color = image.getAttribute('data-color');

    alert(color);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T04:36:57.193

您可以使用图像标签保留颜色属性

```
<img src='my_image' my_color='blue' class='' onclick='myFunc(this)'> 
```

然后你可以通过附加一个onclick函数（）在js中访问它：

```
function myFunc(obj)
{
    var color = obj.getAttribute('my_color');
} 
```

希望有帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-22T04:43:19.437

使用 jQuery

```
<div align="center">
  <img src="blue.png"   data-color="blue"   />     
  <img src="cyan.png"   data-color="cyan"   />
  <img src="green.png"  data-color="green"  />
  <img src="purple.png" data-color="purple" />
  <img src="red.png"    data-color="red"    />
  <img src="yellow.png" data-color="yellow" />
</div>

<script>
    $('.color').click(function () {
        var current_color = $(this).data('color');
    });
</script> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-22T05:23:07.503

```
$('img').click(function(){
   var color = $(this).attr('src').split('.')[0];
   alert(color);
}); 
```

上面的代码是在jQuery中使用img的src来获取var颜色

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-01-22T04:42:49.363

你学过 jQuery 吗？
您需要在 Head 标签 [http://ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js之间链接主 html 文件中的 jQuery 库](http://ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js)

jQuery 允许您选择类选择器并对其应用您想要的操作。

您要求结合 2 个动作。1) 抓取一个元素 2) 对该元素应用点击动作。

jQuery 让这一切变得简单。

jQuery的格式是：$('element').effect();

所以回答你的问题： $('.over').click();

注意：最好重命名您的类以将颜色与该 .png 图像相关联，这样稍后您就会知道您指的是哪个。您为多个 .png 图像重复了类名“over”。因此，jQuery 将选择每个具有“over”类的元素并将该操作应用于它。

您现在还可以将任何功能应用于该点击事件。

例如：

```
 var color = $('.blue').click(function(){
        if(color === blue){
            return blue;
    } 
```

# ruby-on-rails - ActiveRecord 关系验证尝试使用“计数”时出错

> ID：14451617
> 
> 赞同：0
> 
> 时间：2013-01-22T04:31:21.213
> 
> 标签：ruby-on-rails, ruby, validation, rails-activerecord

我有一个 Order 类和一个 Pack 类，它们都使用 ActiveRecord。订单包含包装。在我对订单的验证中，我正在测试是否存在与一个或多个包的关系。请参阅以下代码：

```
class Order < ActiveRecord::Base
  belongs_to :user
  has_many :order_packs
  has_many :packs, :through => :order_packs
  validate :my_custom_validation

  def my_custom_validation
    errors.add(:packs, "Your order was empty.") if packs.count < 1
  end
end 
```

看起来很简单，但它不起作用；`packs.count`始终为零。所以我将验证更改为以下代码：

```
def my_custom_validation
  errors.add(:packs, "packs is: #{packs}")
  errors.add(:packs, "packs.count is: #{packs.count}")
  errors.add(:packs, "packs.any? is: #{packs.any?}")
end 
```

只是想看看交易是什么，并得到了这个有趣的输出：

![在此处输入图像描述](../Images/51c00deae3b327ef8650de43f1138695.png)

谁能告诉我为什么`count`是零？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T04:34:13.343

尝试使用`.length`而不是`.count`.

当您使用时，`count`您实际上是在执行数据库查询。而且因为您是在验证时进行的，所以在将任何内容保存到数据库之前，您总是得到零。`length`另一方面，在对象级别上工作，根本不访问数据库。所以它应该适合你。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T04:45:20.723

length 和 size 都一样，count 执行 SQL COUNT 查询，

您应该阅读[计数 vs 长度 vs 大小](http://web.archive.org/web/20100210204319/http://blog.hasmanythrough.com/2008/2/27/count-length-size)

# asp.net - 使用 MySQL、ASP.NET 和 Entityframework 实现原子计数器

> ID：14451619
> 
> 赞同：1
> 
> 时间：2013-01-22T04:31:30.443
> 
> 标签：asp.net, mysql, entity-framework, atomic

我正在使用 MySQL 和实体框架在 ASP.NET / C# 中开发一个 webapp。我想使用一些计数器列，它们会通过增加它们的值 +1 来经常更新。我有一个计数器列所在的产品表。我有两个问题：

1) 我应该为柜台使用第二张桌子吗？- 主产品表会被频繁读取，如果我非常频繁地更新行会损害性能，因为每次更新计数器时行都会被锁定（我使用 InnoDB）

2) 使用 MySQL 和 Entity Framework 对一行进行 +1 增量的最佳方法是什么。我不介意计数器 100% 准确，所以如果有一些更新冲突，我可以捕捉到它们，但我可以在没有更新的情况下通过。我认为大多数更新将很快完成并包含在更新中。

我正在添加一些我用来通过利用静态变量来防止频繁写入数据库的代码来实现这一点。

代码：

```
if (Global.DataCounters != null)
    {
        if (Global.DataCounters.ContainsKey(id))
        {
            int new_value = ++Global.DataCounters[id];
            Global.DataCounters.Remove(id);
            Global.DataCounters.Add(id, new_value);

            // check datatime

            if ((DateTime.Now - Global.LastFlushed).Minutes > 10)
            {
                // update counter in db and reset data

                Global.LastFlushed = DateTime.Now;
            }
        }
        else
        {
            // first time view of a device, set to zero views
            Global.DataCounters.Add(id, 1);
        }

    }
    else
    {
        Global.DataCounters = new Dictionary<int, int>();
    } 
```

全球.asax：

```
public static Dictionary<int, int> DataCounters = new Dictionary<int,int>();
public static DateTime LastFlushed;

void Application_Start(object sender, EventArgs e)
{
    LastFlushed = DateTime.Now;
    RegisterRoutes(System.Web.Routing.RouteTable.Routes);
} 
```

你认为这是一个很好的实现吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T06:15:34.960

仅当重要的产品表读取（例如 > 50%）不需要计数器信息时，计数器的第二个表才会有帮助。否则，您总是会加入两个表，从而使您的读取变得昂贵。

基于[MySQL doc](https://dev.mysql.com/doc/refman/5.5/en/innodb-record-level-locks.html)：对于更新计数器，如果您的 WHERE 条件使用唯一索引来搜索唯一行（要更新），那么只会采用行级锁（并且不会采用间隙锁）。对于您的情况，这将是最好的方案（假设产品 ID 可以用作唯一索引）。我会建议使用 Entity SQL 来触发 Update 语句（或调用会执行相同操作的 SP）。

如果您只想使用实体术语（没有 EntitySQL 或 SP），那么不要对这个特定操作使用事务范围 - 这样，用于获取产品实体的选择不会锁定，并且`SaveChanges`将是单个更新语句递增计数器。当然，在事务之外使用两个语句意味着更新可能会失败（假设您有一些可用于乐观并发检查的时间戳列），但您已表明它是可以接受的。

最后，如果在递增计数器时事务是不可避免的，则尝试使它们更短，并尝试使用较低的隔离级别，例如`Read Committed`.

# php - 一对多关系在产品和所有者之间创建动态链接

> ID：14451621
> 
> 赞同：0
> 
> 时间：2013-01-22T04:31:57.183
> 
> 标签：php, mysql, foreign-keys

所以基本上我正在尝试使用表中的外键查看上传我当前正在查看的产品的人的配置文件。配置文件存在并且产品表中的外键与管理表的主键匹配，我我对 SQL 很陌生，无法弄清楚我需要分配给变量以插入到 href 链接中的查询。下面是两张表：

行政：

*   餐饮服务商 ID
*   用户名
*   密码
*   last_log_date
*   传
*   国家
*   状态

产品：

*   product_id
*   产品名称
*   价格
*   类别
*   细节
*   添加日期
*   餐饮服务商 ID

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T04:36:54.463

使用左连接

```
SELECT * FROM products LEFT JOIN admin ON admin.caterer_id = products.caterer_id 
```

您将从两个表中获取数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T04:37:08.777

我建议使用 ORM，例如[DataMapper](http://datamapper.wanwizard.eu/)。但是，如果您真的想自己写出所有 SQL，则需要使用[join](http://dev.mysql.com/doc/refman/5.0/en/join.html)。

联接有一个方向（`LEFT OUTER JOIN`、`LEFT INNER JOIN`、`RIGHT OUTER JOIN`、`RIGHT INNER JOIN`），因此您需要决定从哪里开始和在哪里结束。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-22T04:40:37.130

```
select * from admin a left join products p  on a.caterer_id = p.caterer_id 
```

在这里查看 jsfiddle：[http ://sqlfiddle.com/#!2/68b69/2/0](http://sqlfiddle.com/#!2/68b69/2/0)

# sqlite - 如果数据库大小大于 2 GB，SQLite 性能会下降吗？

> ID：14451624
> 
> 赞同：66
> 
> 时间：2013-01-22T04:32:43.973
> 
> 标签：sqlite, android-sqlite

去年，当我在他们的网站上查看 SQLite 时，推荐的 SQLite 数据库大小为 2 GB。但是现在，我再也找不到那个建议了。

那么有没有人尝试过使用最新版本的大于 2 GB 的 SQLite 数据库？SQLite 的表现如何？

PS：我想制作一个需要在本地工作的大型数据库（例如存储维基百科文章）的移动应用程序。

* * *

## 回答 #1

> 赞同：89
> 
> 时间：2013-01-22T08:45:14.670

没有 2 GB 的限制。

SQLite 数据库文件的最大大小约为 140 TB。

在手机上，存储大小（几 GB）将限制您的数据库文件大小，而内存大小将限制您可以从查询中检索多少数据。此外，Android 游标的结果限制为 1 MB。

* * *

数据库大小本身不会影响您的性能。只要查询不访问超出数据库[页面缓存](https://www.sqlite.org/pragma.html#pragma_cache_size)（默认为 2 MB）的数据，您的查询就会很快。

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2013-01-23T08:31:03.180

通常，数据库越大，您拥有的数据就越多。您拥有的数据越多，搜索所需的时间就越长。他们不必这样做，这取决于搜索。

至于插入，如果表上有很多索引，它们可能需要更长的时间。重建索引可能需要一些时间，因此预计插入速度会随着数据量的增加而下降。

更新也可能更慢 - 必须首先找到合适的行（搜索），然后必须更改值（可能会触发索引重建）。

我是根据经验告诉您的：如果您希望数据库中有大量数据，请考虑将其拆分为多个数据库。如果您每天收集数据并且您可以为每天创建一个数据库，则此方法有效。可能会使您的搜索代码更复杂，但会加快有限搜索的速度/

# android - 我可以使用哪些开放/可用的端口号和 IP 地址？

> ID：14451631
> 
> 赞同：0
> 
> 时间：2013-01-22T04:33:58.097
> 
> 标签：android, sockets, ip, port

我正在使用套接字编程在两台 Android 平板电脑上设置客户端和服务器软件。一台 Android 平板电脑是客户端，另一台是服务器。

在示例代码中，作者制作了如下所示的 IP 地址和端口号。我有哪些端口和 IP 地址选项？如果我选择不同的端口，我可以使用的端口范围是多少，我可以使用的 IP 地址范围是多少？也就是说，如果我不想使用 10.0.2.15 作为 IP 并且还使用与 8080 不同的端口作为端口。

```
 // default ip
 public static String SERVERIP = "10.0.2.15";

 // designate a port
 public static final int SERVERPORT = 8080; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T04:41:44.907

两个安卓平板电脑都在同一个网络吗？因为 IP 将由您使用的网络分配。例如，如果您在 wifi 路由器后面，那么它一定为您分配了 IP。对于端口，有 65534 个不同且可用的端口号

您还需要找到手机的 IP 地址，您可以参考[如何从代码中获取设备的 IP 地址？](https://stackoverflow.com/questions/6064510/how-to-get-ip-address-of-the-device)用于以编程方式查找设备的 IP。

或参考[http://www.techpaparazzi.com/how-to-find-ip-address-of-android-smartphone/](http://www.techpaparazzi.com/how-to-find-ip-address-of-android-smartphone/)来查找您设备的 IP。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T04:39:14.587

您无需在服务器中指定 IP 地址。只需使用 INADDR_ANY。对于可用的端口号，您需要在 IANA 注册处研究分配的端口号并使用未分配的端口号。

# ravendb - 在 TransformResults 中访问字典失败

> ID：14451633
> 
> 赞同：1
> 
> 时间：2013-01-22T04:34:06.340
> 
> 标签：ravendb

给定这个文档类：

```
 public class Product
    {
        public string Id { get; set; }
        public string Name { get; set; }
        public SpecialType? DefaultOffer { get; set; }
        public Dictionary<SpecialType, string> Specials { get; set; }
    }

    public enum SpecialType
    {
        Something1,
        Something2
    } 
```

我希望从上述文档中投影的这个视图模型：

```
 public class ProductSummary
    {
        public string Id { get; set; }
        public string Name { get; set; }
        public string SpecialOffer { get; set; }
    } 
```

我创建了以下索引：

```
 public class ProductSummaries : AbstractIndexCreationTask<Product>
    {
        public ProductSummaries()
        {
            Map = products => from p in products
                              select new { p.Id, p.Name, p.DefaultOffer, p.Specials };

            TransformResults = (db, products) =>
                                from p in products
                                select new
                                {
                                    Id = p.Id,
                                    Name = p.Name,
                                    SpecialOffer = p.Specials[p.DefaultOffer.Value]
                                };
        }
    } 
```

简单来说，我希望视图模型使用`Specials`字典中由当前值指示的任何字符串`DefaultOffer`。

以下单元测试失败：

```
 [TestMethod]
    public void CanIndexIntoDictionary()
    {
        using (var documentStore = this.GetDocumentStore())
        {
            documentStore.ExecuteIndex(new ProductSummaries());

            // Store some documents
            using (var session = documentStore.OpenSession())
            {
                session.Store(new Product 
                { 
                    Id = "products/2", 
                    Name = "B", 
                    Specials = new Dictionary<SpecialType, string> 
                    { 
                        { SpecialType.Something1, "B1" }, 
                        { SpecialType.Something2, "B2" } 
                    }, 
                    DefaultOffer = SpecialType.Something2 
                 });
                 session.SaveChanges();
            }

            // Make sure it got persisted correctly
            using (var session = documentStore.OpenSession())
            {
                var b = session.Load<Product>("products/2");
                Assert.AreEqual("B2", b.Specials[b.DefaultOffer.Value]); // PASSES
            }

            // Now query and transform
            using (var session = documentStore.OpenSession())
            {
                var result = session.Query<Product, ProductSummaries>()
                    .Customize(x => x.WaitForNonStaleResults())
                    .AsProjection<ProductSummary>()
                    .ToList();

                Assert.AreEqual(1, result.Count);
                Assert.AreEqual("B2", result.First().SpecialOffer); // FAILS - actual is NULL
            }
        }
    } 
```

我需要做什么才能通过此测试？

*** 更新 ***

通过使用马特的建议（在下面的评论中）有一个代表 NONE 的 Enum 值，我们可以修改他的答案并摆脱可为空的枚举。整个模型和索引看起来干净多了。

```
 public enum SpecialType
    {
        None = 0,
        Something1,
        Something2
    }

    public class Product
    {
        public string Id { get; set; }
        public string Name { get; set; }
        public SpecialType DefaultOffer { get; set; }
        public Dictionary<SpecialType, string> Specials { get; set; }
    }

    public class ProductSummaries : AbstractIndexCreationTask<Product,ProductSummary>
    {
        public ProductSummaries()
        {
            Map = products => from p in products
                              select new { p.Name, SpecialOffer = p.Specials[p.DefaultOffer] };

            Store(x => x.SpecialOffer, FieldStorage.Yes);
        }
    } 
```

有趣的是，这个索引消除了对空值检查等的需要，因为当不是字典中包含的键时，RavenDB 简单地设置`SpecialOffer`为空值。（仅当 p.Name 包含在 Map 中时才适用。）`p.DefaultOffer``Specials`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T16:46:09.527

您不需要`TransformResults`索引中的部分。事实上，你正在映射很多你不需要的东西。

*   `Id`总是隐式映射。它`__document_id`在索引中，并且 raven 将其适当地连接起来。
*   `Name`仅当您要过滤或排序时才需要映射，而您在测试中没有这样做。如果您在现实世界中需要它，您可以将其放回原处。
*   与 类似`Name`，您只需要映射`DefaultOffer`以及`Specials`是否要将它们用于其他目的。为了演示和通过您的单元测试，我删除了它们。

这里唯一需要的技巧是由于可以为空的枚举。因此，Raven 很难从 c# 翻译您的查询。您可以通过一些创造性的空检查和使用该`AsDocument`方法来解决它：

```
public class ProductSummaries : AbstractIndexCreationTask<Product, ProductSummary>
{
    public ProductSummaries()
    {
        Map = products => from p in products
                          let defaultOffer = AsDocument(p).Value<string>("DefaultOffer")
                          select new
                          {
                              SpecialOffer = defaultOffer == null ? null : AsDocument(p.Specials)[defaultOffer]
                          };

        Store(x => x.SpecialOffer, FieldStorage.Yes);
    }
} 
```

另请注意，您之前在特价字段上获得 null 的原因是因为您试图从索引中投影它，但它不是存储字段。为该字段打开字段存储将解决该部分问题。

您不需要存储任何其他字段，因为它们已经存在于文档中 - 这也是投影数据的来源。

顺便说一句 - 感谢单元测试。它使调试和快速响应变得更加容易。:)

# ember.js - Emberjs - 无法使用 appendTo 和 {{render}} 帮助器呈现嵌套视图

> ID：14451634
> 
> 赞同：2
> 
> 时间：2013-01-22T04:34:09.703
> 
> 标签：ember.js

我正在通过使用 appendTo 方法和`{{render}}`助手在嵌套视图场景中尝试一个简单的事件处理机制，并且在加载时抛出“无法调用 null 的方法查找”错误

相同的 JSFiddle -[简单的嵌套视图事件处理](http://jsfiddle.net/anshulguleria/vQpe6/)

`{{render 'parent'}}`再观察一下，如果我在应用程序模板中编写并从 java 脚本中删除父级的创建，这一切都很好，有什么想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-22T05:15:50.993

怎么修：

您的视图或模板似乎没有任何问题。如果您使用 Ember 路由器来管理您的视图，而不是通过 appendTo 手动创建它们，它们将起作用。所以而不是：

```
var view = App.ParentView.create({ controller: App.ParentController.create() });
view.appendTo('#dvViewRender'); 
```

使用路由器：

```
App.Router.map(function() {
  this.route("parent", { path: "/" });
}); 
```

并定义一个应用程序模板：

```
<script type="text/x-handlebars">{{outlet}}</script> 
```

> 证明给我看！

在这里工作小提琴：http: [//jsfiddle.net/mgrassotti/vQpe6/1/](http://jsfiddle.net/mgrassotti/vQpe6/1/)

> 为什么这行得通？

`render`帮助器被设计为在 Ember.Router 托管视图的上下文中使用。当您调用`{{render "child"}}`ember 时，会尝试为子模板找到合适的控制器类。

> 如果我真的想使用 appendTo 方法怎么办？

好的，但不能使用`render`助手。其他选项：

*   `{{partial 'child'}}`将插入子模板但不会将其连接到 ChildView 或 ChildController

*   使用视图助手，它将插入 App.ChildView 并在 ParentController 的上下文中呈现它的模板

*   使用插座，然后使用 App.ChildController 的实例手动将其连接到 App.ChildView

***更新（基于评论）***

> 由于这种动态和独立的性质，我无法将整个页面布局和小部件嵌入到一个应用程序模板中。那么对于在这种情况下使用 Ember 有什么建议吗？

每个小部件都可以是一个单独的 ember 应用程序。每个仍然有一个路由器来管理它的状态，但是通过设置`history: none`该路由器将不会连接到浏览器的 url。例如：

```
var Widget2App = Ember.Application.create({
  rootElement: '#widget2',
  history: 'none',
  ApplicationView: Ember.View.extend({
    templateName: 'widget2',
  }),
  ParentView: Ember.View.extend({
    templateName: 'parent2', 
```

更新的示例在一页中显示 2 个 ember 应用程序：http: [//jsfiddle.net/mgrassotti/L6aVB/](http://jsfiddle.net/mgrassotti/L6aVB/)

# ssas - 每 1 小时自动处理立方体？

> ID：14451640
> 
> 赞同：3
> 
> 时间：2013-01-22T04:34:34.133
> 
> 标签：ssas

我正在使用 Microsoft SQL 2008。在 Microsoft Visual Studio 中，我创建了一个多维数据集。我想每 1 小时安排一次处理这个多维数据集。有人可以告诉我如何实现这一目标吗？

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-29T13:27:11.817

在与您的 SSAS 项目相同的解决方案上创建一个新的 SSIS 项目

*   在 SSIS 包下，打开 dtsx 文件
*   转到控制流并从 SSIS 工具箱中选择 Analysis Services 处理任务
*   将任务添加到控制流
*   在连接管理器上添加一个新的 Analysis Services 连接并将其指向您的数据库多维数据集。
*   编辑 SSAS 处理任务并转到处理设置
*   添加要处理的对象

我通常会放置两个 Analysis Services Prossecing Tasks——一个用于所有维度，另一个用于整个多维数据集——

现在连接到 MSSQL 管理工作室上的集成服务并将您的项目添加到包中。

按照此[链接](http://msdn.microsoft.com/en-us/library/gg471507.aspx)查看如何通过 MsSQL 代理计划 SSIS 包。

你完成了！

# core-data - iOS Storyboard 介绍视图，后跟带有核心数据的表格视图

> ID：14451642
> 
> 赞同：0
> 
> 时间：2013-01-22T04:34:54.867
> 
> 标签：core-data, storyboard

我正在使用带有初始介绍视图控制器的情节提要，我想将其与具有核心数据的表视图控制器相结合。我知道初始控制器是根控制器，但由于连接到核心数据，我需要第二个控制器作为根控制器。当我在我的应用程序委托中执行以下操作时，我收到此错误：

```
-[IntroViewController setViewControllers:]：无法识别的选择器发送到实例 0x7465b70
2013-01-21 22:29:15.331 PManager [35522:c07] *** 由于未捕获的异常“NSInvalidArgumentException”而终止应用程序，原因：“-[IntroViewController setViewControllers:]：无法识别的选择器发送到实例 0x7465b70”

```

我的第一个视图在情节提要中称为“introController”。

我的第二个视图是与情节提要中称为“listController”的核心数据挂钩的表视图。

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)options
{

    // Get a reference to the navigation controller first
    UINavigationController *navigationController = (UINavigationController *) self.window.rootViewController;

    IntroViewController *introController = [navigationController.storyboard instantiateViewControllerWithIdentifier:@"introController"];
    RootViewController *listController = [navigationController.storyboard instantiateViewControllerWithIdentifier:@"listController"];

    // First item in array is bottom of stack, last item is top.
    navigationController.viewControllers = [NSArray arrayWithObjects:listController, introController, nil];

    // THEN get the root view controller (RootViewController)
    RootViewController *rootViewController = (RootViewController *)[[navigationController viewControllers] objectAtIndex:0];

    // And now pass the context
    rootViewController.managedObjectContext = managedObjectContext;

    [self.window makeKeyAndVisible];

    return YES;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T02:31:11.233

更改应用程序的组织方式可能会更好。与其依赖应用程序委托类来管理`managedObjectContext`，不如创建另一个类作为单例，以全局管理对托管对象上下文的访问。直接从您的表视图控制器类和任何其他类中引用该类。像这样：[在视图之间传递数据的最有效方式](https://stackoverflow.com/questions/14350915/most-efficient-way-of-passing-data-between-views/14351026#14351026)

# sql-server - 获取每个经理的行数

> ID：14451651
> 
> 赞同：0
> 
> 时间：2013-01-22T04:36:06.530
> 
> 标签：sql-server

这几天我一直在纠结这个。我有经理表、分配给他们的站点以及分配给这些站点的种植者。我需要知道经理有多少种植者。经理被分配到站点而不是种植者，所以我必须通过这个练习来找出特定经理有多少种植者，具体取决于分配给他拥有的每个单独站点的种植者。一个站点只有一个种植者。我可以很容易地获得特定经理的种植者数量，但我想返回一个包含每个经理的种植者数量的表格，我很难过。

我有以下代码：

```
DECLARE @ManagerID     INT
DECLARE @getManagerID  CURSOR 
SET @getManagerID =  CURSOR FOR
SELECT ID
FROM   Managers

     OPEN @getManagerID
     FETCH NEXT
     FROM @getManagerID INTO @ManagerID
WHILE @@FETCH_STATUS = 0
BEGIN
    SELECT COUNT(Grower) AS NumGrowers
    FROM   Growers
    WHERE  Growers.ID IN 
    (
       SELECT sitesg.Grower
       FROM   SitesG
       WHERE  SitesG.id IN 
       (
          SELECT SITE
          FROM   ManagerSites
          WHERE  ManagerSites.Manager IN 
          (
             SELECT ID
             FROM Managers
             WHERE ID = @ManagerID
          )
       )
    )

    FETCH NEXT
    FROM @getManagerID INTO @ManagerID
END
     CLOSE @getManagerID
     DEALLOCATE @getManagerID 
```

这给了我一堆结果，我可能可以将它们存储在临时表中，但必须有更好的方法。有任何想法吗？

-乔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T04:49:18.093

是的，请放弃游标和所有嵌套的子查询。这正是连接的用途......

```
SELECT ManagerID = m.ID, NumGrowers = COUNT(DISTINCT g.ID)
  FROM dbo.Managers AS m
  INNER JOIN dbo.ManagerSites AS s
  ON s.Manager = m.ID
  INNER JOIN dbo.SitesG AS sg
  ON s.SITE = sg.id
  INNER JOIN dbo.Growers AS g
  ON sg.Grower = g.ID
  GROUP BY m.ID; 
```

事实上，如果你只关心`ManagerID`你可以简化这个：

```
SELECT ManagerID = s.Manager, NumGrowers = COUNT(DISTINCT g.ID)
  FROM dbo.ManagerSites AS s
  INNER JOIN dbo.SitesG AS sg
  ON s.SITE = sg.id
  INNER JOIN dbo.Growers AS g
  ON sg.Grower = g.ID
  GROUP BY s.Manager; 
```

`s.Manager = m.ID`顺便说一句，加入和之类的东西非常令人困惑`sg.Grower = g.ID`。为什么不在模型中出现的任何地方都将事物`ManagerID`等`GrowerID`称为相同的事物？这肯定会使这些连接更加直观。

# javascript - if/else 逻辑都按顺序执行而不添加 return false？

> ID：14451652
> 
> 赞同：-1
> 
> 时间：2013-01-22T04:36:21.653
> 
> 标签：javascript

if/else 逻辑都按顺序执行而没有添加 return false 但是当添加 return false 时，它​​可以正常工作，无论是 if 还是 else 被执行但它下面的代码没有执行，这是一个问题..

```
 var TL = {
             displayInfo: function(sectionType, fileName)
                          {
                              if(sectionType == "sectionA")
                              {
                                   sectionType = "ListA";
                                   return false; // works as normal with this line
                              }else
                              {
                                   sectionType = "ListB";
                                    return false; // works as normal with this line
                              }     
                             // additional below that is not being executed when I add the return false in the if/else logic
                          }
            }; 
```

当我删除每个 if/else 中的 return false 语句时，两个 if/else 都会执行。在我想要执行的 if/else 逻辑下方，我在此方法中有其他代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T04:39:24.907

该`return`语句将执行到函数的末尾，并且在 return 之后不执行任何代码语句。如果您在两者中都返回 false ，`if`然后`else`将 return 语句取出 if `if-else`。

```
var TL = {
         displayInfo: function(sectionType, fileName)
                      {

                          if(sectionType == "sectionA")
                          {
                               sectionType = "ListA";
                               //return false; // works as normal with this line
                          }else
                          {
                               sectionType = "ListB";
                                //return false; // works as normal with this line
                          }     
                         // additional below that is not being executed when I add the return false in the if/else logic
                      }

                      //Your code
                     return false;
        }; 
```

如果您必须从条件 if-else 中返回 false 和 true，那么您可以使用变量来分配返回值。我做了一个demo供大家理解和练习，[在这里](http://jsfiddle.net/rajaadil/uhXt3/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T04:51:42.903

我执行下面的代码，它按预期工作：

```
var TL = {
    displayInfo: function (sectionType, fileName) {
        if (sectionType == "sectionA") {
            console.info("inside if");
            sectionType = "ListA";
        } else {
            console.info("inside else");
            sectionType = "ListB";
        }
        console.info(sectionType);
    }
};

TL.displayInfo("sectionA"); 
```

代码进入 if 块，最后一个控制台日志按预期打印“ListA”。我不确定这个问题。JSFiddle 在：http: [//jsfiddle.net/poonia/eq9u3/1/](http://jsfiddle.net/poonia/eq9u3/1/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-22T05:00:18.197

该错误可能在您的代码中的其他地方，我猜您创建了 displayInfo 的实例。

如果您使用的是 IE，您可以按 F12，开始调试并获得 console.log 日志消息，证明 if 和 else 不会同时执行，除非您使用不同的参数多次调用它。

任何其他浏览器都应该支持 console.log 并且您通常可以通过按 F12 来查看控制台

```
var TL = {
             displayInfo: function(sectionType, fileName)
console.log("displayInfo called");
                          {
                              if(sectionType == "sectionA")
                              {
console.log("sectionType = sectionA");
                                   sectionType = "ListA";
                                   return false; // works as normal with this line
                              }else
                              {
console.log("sectionType = listB");
                                   sectionType = "ListB";
                                    return false; // works as normal with this line
                              }     
                             // additional below that is not being executed when I add the return false in the if/else logic
                          }
            }; 
```

# java - 如果一个日期小于另一个日期，如何比较两个日期

> ID：14451659
> 
> 赞同：2
> 
> 时间：2013-01-22T04:37:02.217
> 
> 标签：java

我有两个约会

```
Date dateOfEnq = sdf.parse(ea.getDateOfEnquiry());
Date validDate = DateUtil.getAfterMonth(dateOfEnq, range); 
```

现在我在做

```
if (dateOfEnq <= validDate) {
    ount++;
} 
```

但这给了我错误

```
The operator <= is undefined for the argument type(s) java.util.Date, java.util.Date. 
```

我如何比较这两个日期？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-22T04:38:40.297

`dateOfEnq.before(anotherDate);` （或）`dateOfEnq.after(anotherDate);`等，比较两个日期。

阅读[javadoc 了解更多信息。](http://docs.oracle.com/javase/6/docs/api/java/util/Date.html)

注意：当你想使用日期时，最好使用最新的 API，比如[Joda 。](http://joda-time.sourceforge.net/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-22T05:42:15.670

java.util.Date 实现了 Comparable 接口。这意味着它具有可用于比较 2 个日期的 compareTo 方法

```
 int res = date1.compareTo(date2); 
```

*   如果 date1 等于 date2，则 res = 0；
*   res < 0 如果 date1 在 date2 之前；
*   res > 0 如果 date1 在 date2 之后

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-22T04:38:54.353

用途`after`和`before`方法比较。

# macos - 如何复制目录并递归地忽略某些目录？

> ID：14451660
> 
> 赞同：1
> 
> 时间：2013-01-22T04:37:02.943
> 
> 标签：macos, shell, cp

苹果系统。我想复制一个名为“bundleDir”的目录，它有一些像“.svn”这样的子目录。同样在目录 bundleDir 中还有其他目录具有“.svn”这样的树

```
bundleDir
    ----.svn
    ----dirM
          ----.svn
          ----a.txt
    ----b.txt 
```

我想以递归方式将 bundleDir 复制到另一个目录排除 .svn 。我怎样才能做到这一点 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T06:31:41.337

`IFS=$'\n'; for f in $(find bundleDir -depth | grep -v '/\.svn[/$]'); do d=~/target/"${f%/*}"; mkdir -p "$d"; cp -n "$f" "$d"; done`

`cp -R bundleDir ~/target; find ~/target -type d -name .svn -delete`

# .htaccess - 如何使用 .htaccess 使用 2 个或更多变量进行重定向

> ID：14451663
> 
> 赞同：1
> 
> 时间：2013-01-22T04:37:32.587
> 
> 标签：.htaccess, variables, redirect

我正在尝试从 2 个不同的 URL 重定向，只需要 2 个或更多参数。我这样做了几次，但我的记忆力真的很差，我不记得怎么做（我认为是年龄问题）。

例子：

```
from http://www.abc.net/forum/index.php/board,(\d+).0.html
to http://www.abc.com/forum?view=category&catid=%1

from http://www.abc.net/forum/index.php/board,(\d+).(\d+).html
to http://www.abc.com/forum?view=category&catid=%1&other=%2 
```

可能更多，但我会在一些帮助下解决它：

我的坏例子：

```
Options +FollowSymLinks

## Mod_rewrite in use.

RewriteEngine On
RewriteBase /

RewriteCond %{QUERY_STRING} ^board,(\d+).0.html$
RewriteRule ^/forum/index.php$ http://www.abc.com/forum?view=category&catid=%1 [L,R] 
```

谢谢你的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T05:51:20.140

这些`board,(\d+).0.html`东西不在查询字符串中。您想像匹配 URI 的任何部分一样匹配它们：

```
RewriteRule ^/?forum/index\.php/board,([0-9]+)\.0\.html$ /forum?view=category&catid=$1 [L,R]
RewriteRule ^/?forum/index\.php/board,([0-9]+)\.([0-9]+)\.html$ /forum?view=category&catid=$1&other=$2 [L,R] 
```

# macos - 无法在 OSX 终端中打开 .profile

> ID：14451672
> 
> 赞同：0
> 
> 时间：2013-01-22T04:38:05.113
> 
> 标签：macos

刚买了一台全新的 Mac 并试图为学校准备一些东西。我需要从终端运行“open .profile”命令，但是我收到以下消息：

```
The file /Users/user/.profile does not exist 
```

我在网上阅读了另一个选项，如果发生这种情况，我应该运行命令“vi.profile”来创建文件。但是，这会返回以下错误消息：

```
-bash: vi.profile: command not found 
```

我对 Mac/Linux 完全陌生，如果有人有任何帮助/建议，将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-22T04:44:50.947

如果你想在 /Users/user 中创建一个 .profile，首先`touch /Users/user/.profile`（创建文件），然后你可以`vi /Users/user/.profile`编辑它。您可能想使用 osx 的默认文本编辑器打开文件 - vim 的学习曲线非常陡峭。`vi.profile`顺便说一句，您的命令不起作用的原因是因为您在`vi`（您正在调用的程序）和`.profile`（您正在传递给该程序的参数）之间缺少一个空格。

# asp.net-mvc - UserName 字段是否必须是唯一的才能与 ASP.NET MVC 的 SimpleMembership 一起正常工作？

> ID：14451677
> 
> 赞同：2
> 
> 时间：2013-01-22T04:38:42.940
> 
> 标签：asp.net-mvc, asp.net-mvc-4, asp.net-membership, simplemembership

我正在使用 ASP.NET MVC 4 和带有 Code First 迁移的实体框架制作应用程序。
在名为 的类`InitializeSimpleMembership`中，有以下代码行：

```
WebSecurity.InitializeDatabaseConnection("DefaultConnection", "UserProfile", 
    "UserId",   "UserName", autoCreateTables: true); 
```

其中`"UserName"`是指包含用户用户名的列。这些用户名必须是唯一的吗？我仅在此应用程序中通过 Facebook 使用 OAuth 身份验证。因此，在 UserName 字段中，我存储了用户的 Facebook 名称（例如“George Smith”）。显然，可能有很多 George Smiths 使用我的应用程序，这会导致任何冲突吗？

我注意到`WebSecurity`该类的许多方法，例如`WebSecurity.GetUserId`采用以下参数：`string userName`. 如果用户名*不是*唯一的，那么我不确定这将如何工作。此外，OAuth 的默认 FacebookClient 会返回一个 ExtraData 字典，其中包含例如`ExtraData["username"] = george.smith@gmail.com`. 似乎他们想将电子邮件存储在 UserName 下（以便 UserNames 是唯一的）。

我对 SimpleMembership 的了解不是很透彻。有人可以为我澄清一下存储在 UserName 下的值是否应该是唯一的，以便一切顺利运行？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-18T09:45:38.733

据我查看他的代码发现，用户名必须是唯一的。最后还是很合理的：考虑一个允许非唯一用户名的登录系统，系统将如何区分用户？您不能依赖不同的密码，因为当用户名相同时，这将是唯一的区别。如果您想在页面上显示另一个名称而不是“真实”（唯一）用户名，例如某种额外的昵称或屏幕名称，您应该创建一个 CustomMembershipProvider 并使用您自己的用户表。这样您就可以自定义所有内容以满足您的要求。这将允许数百个“Bob”每个都有一个唯一的用户名。

# c# - 如何动态添加源到音频

> ID：14451679
> 
> 赞同：0
> 
> 时间：2013-01-22T04:38:58.760
> 
> 标签：c#, jquery, ajax, asp.net-mvc, jquery-ui

我想使用 jquery 动态添加音频文件。我写过这样的代码：

```
<audio id="audioPlayer" style="width:400px;height:30px;" controls="controls">
<source id="oggSource"  type="audio/ogg" />
<source id="mp3Source" src="~/Kalimba.mp3" type="audio/mp3" />
</audio> 
```

mp3 的来源是我的应用程序根文件夹。这是工作。我想在本地文件夹中添加文件，例如

```
<audio id="audioPlayer" style="width:400px;height:30px;" controls="controls">
<source id="oggSource"  type="audio/ogg" />
<source id="mp3Source" src="D:\Kalimba.mp3" type="audio/mp3" />
</audio> 
```

它不是在玩。我想在本地计算机上播放文件。

我想动态添加文件。我有一个浏览按钮。在那我将选择音频文件，我想使用 jquery 动态添加文件并播放它。我怎么能想到这样做。我添加了如下来源：

```
 $('#mp3Source').attr('src', 'D:\Kalimba.mp3').detach().appendTo($("#audioPlayer")); 
```

我犯了什么错误。

# java - 将多个文件附加器添加到单个应用程序

> ID：14451680
> 
> 赞同：0
> 
> 时间：2013-01-22T04:39:08.910
> 
> 标签：java, logging, log4j, slf4j

如何使用 log4j 或 slf4j 将多个文件附加程序或滚动文件附加程序添加到 java 中的单个应用程序。

这样与订单相关的日志记录在一个文件中，而与应用程序相关的日志记录在另一个文件中。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T04:51:28.463

```
log4j.rootLogger=DEBUG

log4j.logger.tradelog=DEBUG,tradelog
log4j.appender.tradelog = org.apache.log4j.RollingFileAppender
log4j.appender.tradelog.file=log/TradeLogger.log
log4j.appender.tradelog.append=true
log4j.appender.tradelog.Threshold =ON
log4j.appender.tradelog.MaxFileSize=2MB
log4j.appender.tradelog.MaxBackupIndex=10
log4j.appender.tradelog.layout = org.apache.log4j.PatternLayout
log4j.appender.tradelog.layout.ConversionPattern = %-5p %d [%t] %c: %m%n

log4j.logger.orderslog=DEBUG,orderslog
log4j.appender.orderslog = org.apache.log4j.RollingFileAppender
log4j.appender.orderslog.file=log/OrdersLogger.log
log4j.appender.orderslog.append=true
log4j.appender.orderslog.Threshold =ON
log4j.appender.orderslog.MaxFileSize=2MB
log4j.appender.orderslog.MaxBackupIndex=10
log4j.appender.orderslog.layout = org.apache.log4j.PatternLayout
log4j.appender.orderslog.layout.ConversionPattern = %-5p %d [%t] %c: %m%n

log4j.appender.tradelog.Threshold=WARN
log4j.appender.orderslog.Threshold=WARN` 
```

# java - Java 堆栈与队列性能

> ID：14451683
> 
> 赞同：1
> 
> 时间：2013-01-22T04:39:27.510
> 
> 标签：java, performance, data-structures, stack, queue

所以我有一个可以在堆栈或队列中的列表。两者之间有性能差异吗？

我还注意到 java.utils 实现扩展了 Vector。自己实现会更快，还是直接使用 Vector？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-22T04:45:57.590

java.util.Stack 类已弃用。改用[双端队列](http://docs.oracle.com/javase/6/docs/api/java/util/Deque.html)。

就性能而言，这取决于实施，

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-22T05:16:26.970

Stack 和 Vector 都是同步的。将 java.util.ArrayDeque 同时用作 Stack 和 Queue，请参阅 API：

> 这个类在作为栈使用时可能比 Stack 快，作为队列使用时比 LinkedList 快。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-22T04:53:35.387

这取决于使用模式和具体实现。

一般来说：

*   如果要按接收顺序（先进先出或 FIFO）处理传入项目流，请使用**队列。**适合工作清单和处理请求。
*   如果您只想从堆栈顶部推送和弹出（后进先出或 LIFO），**请**使用堆栈。适用于递归算法。

**PS**我不建议使用任何扩展或利用的旧实现 `java.util.Vector`。现在有许多更好的实现可用，具体取决于您的确切用例。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-22T04:47:06.797

性能取决于您要使用的数据结构（arraylist、linkedlist 等）以及您将执行的所有操作。

因此，根据这一点，您可以决定您的数据结构。建议您通过 Java API 了解不同 API 的优缺点。

# jquery - jquery日期范围：如果未选择日期，则输入文本框值更改为null

> ID：14451684
> 
> 赞同：0
> 
> 时间：2013-01-22T04:39:31.587
> 
> 标签：jquery, asp.net, jquery-ui, c#-4.0, jquery-ui-datepicker

我在两个输入框中启用了 jquery 日期范围选择器来选择开始日期和结束日期，默认值为 startDateInput=Start Date 和 endDateInput=End Date。但是当单击开始输入框并选择开始日期时，写入 endDateInput 的值等于结束日期变为空。我正在使用的脚本如下：

startDate(开始日期选择输入框名称) endDate(结束日期选择输入框名称)

```
$(function () {
    $("#startDate").datepicker({
        defaultDate: "+1w",
        changeMonth: true,
        numberOfMonths: 1,
        minDate: new Date(2012, 11 - 1, 27),
        maxDate: -1,
        onClose: function (selectedDate) {
            $("#endDate").datepicker("option", "minDate", selectedDate);
        }
    });
    $("#endDate").datepicker({
        defaultDate: "+1w",
        changeMonth: true,
        numberOfMonths: 1,
        minDate: new Date(2012, 11 - 1, 28),
        maxDate: -1,
        onClose: function (selectedDate) {
            $("#startDate").datepicker("option", "maxDate", selectedDate);
        }
    });
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T05:08:23.337

在函数中赋值之前转换`selectedDate`成对象。`Date``datepicker``onClose`

如下修改您的代码。

```
$(function () {
    $("#startDate").datepicker({
        defaultDate: "+1w",
        changeMonth: true,
        numberOfMonths: 1,
        minDate: new Date(2012, 11 - 1, 27),
        maxDate: -1,
        onClose: function (selectedDate) {
            $("#endDate").datepicker("option", "minDate",new Date(selectedDate));
        }
    });
    $("#endDate").datepicker({
        defaultDate: "+1w",
        changeMonth: true,
        numberOfMonths: 1,
        minDate: new Date(2012, 11 - 1, 28),
        maxDate: -1,
        onClose: function (selectedDate) {
            $("#startDate").datepicker("option", "maxDate", new Date(selectedDate));
        }
    });
}); 
```

参考：检查[演示](http://jsfiddle.net/BEEbv/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T05:21:47.203

如果你在谈论水印，那么你可以试试这个：

```
$(function () {
        $("#startDate").datepicker({
            defaultDate: "+1w",
            changeMonth: true,
            numberOfMonths: 1,
            minDate: new Date(2012, 11 - 1, 27),
            maxDate: -1,
            onClose: function (selectedDate) {
                if ($("#endDate").val() != 'End Date') {
                    $("#endDate").datepicker("setDate", selectedDate);
                }
            }
        });
        $("#endDate").datepicker({
            defaultDate: "+1w",
            changeMonth: true,
            numberOfMonths: 1,
            minDate: new Date(2012, 11 - 1, 28),
            maxDate: -1,
            onClose: function (selectedDate) {
                if ($("startDate").val() != 'Start Date') {
                    $("#startDate").datepicker("setDate", selectedDate);
                }
            }
        });
    }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-22T05:15:55.953

设置日期的方式不正确。

代替：

```
$("#endDate").datepicker("option", "minDate", selectedDate); 
```

和：

```
 $("#endDate").datepicker("setDate", selectedDate); 
```

并替换：

```
$("#startDate").datepicker("option", "maxDate", selectedDate); 
```

和：

```
$("#startDate").datepicker("setDate", selectedDate); 
```

我希望它会有所帮助。

# python - 如何让线程同时等待管道输入和 Python 中的事件？

> ID：14451685
> 
> 赞同：0
> 
> 时间：2013-01-22T04:39:38.263
> 
> 标签：python, multithreading, popen, python-multithreading

在我正在开发的应用程序中，我有一个线程，在初始化时通过 Popen 重定向`stdout`来启动一个 suprocess `PIPE`。在`run()`我需要在管道和事件上等待。
管道的输出必须在文本视图上输出。
设置事件后，线程必须停止从`run()`.

我的解决方案是

*   通过超时的 select.select 在管道上等待
*   那么如果选择返回管道是可读的
    *   从管道中读取一个字节，所以我确信这个读取不会阻塞
    *   将字节存储在字节数组中，直到我收到换行符
        *   将字节数组输出到 textviev
*   测试事件

这可行，但每次读取 1 个字节确实效率低下
，我想知道是否存在更有效的解决方案。

这是我的代码片段：

```
class ProcessEcho(threading.Thread):

    def __init__(self,environ,command_line,textbuffer,on_process_exited_cb):
        super(ProcessEcho,self).__init__()

        self.textbuffer = textbuffer
        self.on_process_exited_cb = on_process_exited_cb

        self.popen = subprocess.Popen(command_line,stdout = subprocess.PIPE, stderr = subprocess.STDOUT,bufsize=0,env=environ)

        self.exit_event = threading.Event()

        self.daemon = True
        self.start()

    def get_pid(self):
        return self.popen.pid

    def stop(self):
        self.exit_event.set()

    def update_textbuffer(self,string):
        self.textbuffer.insert(self.textbuffer.get_end_iter(),string)

    def run(self):
        buffer = bytearray()
        while True:
            rl,wl,xl = select.select([self.popen.stdout], [], [], 1)

            if len(rl):
                r = self.popen.stdout.read(1)
                if r=='':
                    self.popen.communicate()
                    GObject.idle_add(self.on_process_exited_cb)
                    return
                else:
                    buffer.append(r)

                    if r == "\n":
                        GObject.idle_add(self.update_textbuffer,str(buffer))
                        buffer = bytearray()
            if self.exit_event.is_set():
                self.popen.communicate()
                GObject.idle_add(self.on_process_exited_cb)
                return 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T04:44:27.677

要在不阻塞的情况下读取流，请使用 Queue.get_nowait()

# cocos2d-iphone - 使用 cocos2d-iphone 版本 2.0 时，Box2D 绘图会减少 2 倍

> ID：14451686
> 
> 赞同：0
> 
> 时间：2013-01-22T04:39:56.973
> 
> 标签：cocos2d-iphone, box2d

升级到 cocos2d-iphone 2.0 版后，我在绘制对象的坐标时遇到了问题。据我所知，我已经正确升级了所有模板，但仍然存在问题。例如，在“Learning Cocos2D”一书中（第 10 章 box2D）中，我已经实现了几个简单的方法来首先 createGround 和 createBoxAtLocation。第一个方法是从init调用的，如下：

```
- (void)createGround {
    CGSize winSize = [[CCDirector sharedDirector] winSize];     

    // Set up the Box2D coordinates that correspond to the four corners of the ground boundary
    float32 margin = 10.0f;
    b2Vec2 lowerLeft = b2Vec2(margin/PTM_RATIO, margin/PTM_RATIO);
    b2Vec2 lowerRight = b2Vec2((winSize.width-margin)/PTM_RATIO, margin/PTM_RATIO);
    b2Vec2 upperRight = b2Vec2((winSize.width-margin)/PTM_RATIO,
                           (winSize.height-margin)/PTM_RATIO);
    b2Vec2 upperLeft = b2Vec2(margin/PTM_RATIO,
                          (winSize.height-margin)/PTM_RATIO);
    // Define the static container body, which will provide the collisions at screen borders.
    b2BodyDef screenBorderDef;
    screenBorderDef.position.Set(0, 0);
    b2Body* screenBorderBody = world->CreateBody(&screenBorderDef);
    b2EdgeShape screenBorderShape;

    // Create fixtures for the four borders (the border shape is re-used)
    screenBorderShape.Set(lowerLeft, lowerRight);
    screenBorderBody->CreateFixture(&screenBorderShape, 0);
    screenBorderShape.Set(lowerRight, upperRight);
    screenBorderBody->CreateFixture(&screenBorderShape, 0);
    screenBorderShape.Set(upperRight, upperLeft);
    screenBorderBody->CreateFixture(&screenBorderShape, 0);
    screenBorderShape.Set(upperLeft, lowerLeft);
    screenBorderBody->CreateFixture(&screenBorderShape, 0);
} 
```

这应该在屏幕边缘周围绘制一个绿色边界，边距为 10 点。但是，我只能看到底部和左侧边缘的绿色边界。上边缘和右边缘分别以屏幕高度和宽度的 2 倍绘制。

在同一个 Box2D 示例中，将在用户触摸屏幕的点绘制一个框。当用户触摸屏幕时，方法 createBoxAtLocation 会调用触摸的位置。触摸位置坐标在 cocos2d 点坐标中，并且在您期望的范围内。下面是 createBoxAtLocation 方法：

```
- (void)createBoxAtLocation:(CGPoint)location
               withSize:(CGSize)size
{

    // First create a body
    b2BodyDef bodyDef;
    bodyDef.type = b2_dynamicBody;                      // This box is a dynamic body (movement handled by box2d)
    bodyDef.position = b2Vec2(location.x/PTM_RATIO,     // convert the point location to meters location
                          location.y/PTM_RATIO);
    bodyDef.allowSleep = false;
    b2Body *body = world->CreateBody(&bodyDef);

    // Now create one or more fixtures to add to the body.
    // To do this, you must first create a shape. In this case, we are creating a square box
    b2PolygonShape shape;
    shape.SetAsBox(size.width/2/PTM_RATIO, size.height/2/PTM_RATIO);    // SetAsBox takes half dimensions as parameters

    b2FixtureDef fixtureDef;
    fixtureDef.shape = &shape;
    fixtureDef.density = 1.0;           // set density. The higher the number, the heavier it is

    body->CreateFixture(&fixtureDef);
} 
```

例如，如果触摸位置是点坐标 193、190.5（在 iphone 视网膜显示器上），则 createBoxAtLocation 方法将在点坐标 386、381 处绘制一个框，即使 location.x = 193 和 location.y = 190.5。请注意，bodyDef.position 的 box2d 坐标为 3.86、3.81，因为 PTM_RATIO 为 50。

我也可以说，当我运行模拟器并选择 iphone（非视网膜）作为硬件时，框会在正确的位置创建，并且 createGround 在屏幕空间内生成正确的边界。我也可以说代码可以识别所有设备的正确尺寸屏幕（例如 cocos2d 打印出 cocos2d：表面尺寸：iPhone 的 480x320 和 cocos2d：表面尺寸：iPhone 3.5 视网膜的 960x640）。最后，我运行了调试器并深入研究了绘图程序。据我所知和理解，绘图程序知道正确的 box2d 坐标。但是该框只是显示在一个 2X 的坐标上，它应该是视网膜显示器的坐标。

我怀疑 createGround 的问题和 createBoxAtLocation 的问题是相同的。我确信有一个简单的解决方案，但我无法弄清楚。有什么建议么？

# asp.net - 将 PDF 附加到邮件并使用 C# 在用户计算机中使用默认邮件客户端打开

> ID：14451696
> 
> 赞同：0
> 
> 时间：2013-01-22T04:40:43.293
> 
> 标签：asp.net, sendmail, email-attachments

我的要求是将 PDF 文件附加到电子邮件并使用 C# 代码使用默认邮件客户端（如 Outlook 或 Windows Live Mail）打开。

这应该使用用户配置为默认的默认电子邮件客户端来完成。

我为此检查了 MAPI。但是我仍然找不到合适的代码来执行此操作

这是我使用的代码

```
 MailMessage message = new MailMessage();
        Attachment data = new Attachment(file, MediaTypeNames.Application.Octet);
        ContentDisposition disposition = data.ContentDisposition;
        disposition.CreationDate = System.IO.File.GetCreationTime(file);
        disposition.ModificationDate = System.IO.File.GetLastWriteTime(file);
        disposition.ReadDate = System.IO.File.GetLastWriteTime(file);
        message.Attachments.Add(data); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T04:54:12.620

试试下面的代码：

```
List<System.Net.Mail.Attachment> lstAttachment = new List<System.Net.Mail.Attachment>(); 
if (File.Exists(AttachmentFilePath))//AttachmentFilePath is path of attachment   
{
   PDF = new System.Net.Mail.Attachment(AttachmentFilePath);
   PDF.Name = "DEMO_PDF.pdf";
   lstAttachment.Add(PDF);
   objMailer.Attachments = lstAttachment;//objMailer is mail client object.
} 
```

# php - php调用matlab

> ID：14451699
> 
> 赞同：3
> 
> 时间：2013-01-22T04:41:07.583
> 
> 标签：php, matlab

我正在使用 php 构建一个可以计算一些凸编程的网站。但是，当我尝试连接 php 和 matlab 时，我可以执行 matlab 及其一些命令，但我无法运行任何 matlab 函数。

我正在使用 SSH、Windows 7、Matlab R2012a。以下是我的一些观察：

1.  我无法通过 php 执行任何 matlab 函数（.m 文件中的函数），但我可以通过我们的 php 代码通过 matlab 运行简单的命令，例如 cd、3*3。我还尝试使用 SSH 在 UNIX 中运行 matlab。我可以成功运行 matlab 函数和命令。另一件事是，当我在 php 中调用 matlab 时，它显示一个目录 (/misc/uac_std/fyp/y13/fyp_dt/public_html/)，该目录与普通目录 (/uac/std/fyp/y13/fyp_dt) 不同/public_html)

2.  在 php 中，每次运行 matlab 时，我都会收到此警告消息 - 检查目录权限。警告：无法创建首选项目录 /root/.matlab/R2012a。我已经在谷歌搜索它并尝试手动创建目录以在主目录（cd~）中创建 .matlab/R2012a，但它没有帮助。

3.  在 SSH 和 php 中运行 matlab 时，我发现我们运行不同版本的 matlab。当我在 SSH 中运行它时，版本是 R2009a。php时，版本为R2012a。我不知道这是否与我们的问题有关，但这很奇怪。而且，我在大学使用的matlab是R2011b ...

这是我的php代码：

```
if(isset($_POST['filepath'])) {

$filename  = $_POST['filepath'];
    $command="/usr/local/bin/matlab -nodisplay -nosplash -r \"test()\"";
    $output=shell_exec($command); 
    print "$output\n";  
} 
```

有人能帮我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T05:17:18.020

您可以为 Matlab 创建一个输入文件。[基本上与http://www.danpearce.co.uk/php_and_matlab](http://www.danpearce.co.uk/php_and_matlab)相同的技术，但使用 PHP 编写输入文件，然后解析来自 Matlab 的输出文件。

# extjs - Extjs 4.1 分页栏（Ext.toolbar.Paging）溢出问题

> ID：14451706
> 
> 赞同：2
> 
> 时间：2013-01-22T04:41:54.337
> 
> 标签：extjs, overflow, paging, toolbar, extjs4.1

我将**Ext.toolbar.Paging**用于网格面板。**调整**面板大小时，**溢出**菜单会出现在分页栏上。但**总计数**未正确显示。请检查我的分页栏。

**pageSizingCombo**是一个使用组合框更改分页大小的已定义对象：

```
 Ext.create('Ext.toolbar.Paging',{
                store:store,
                dock : 'bottom',
                itemId:'paging-bar-view-panel',
                displayMsg: '{0} - {1} of {2}',
                items:{
                    xtype : 'pageSizingCombo',
                    pageSizes : [10,20,25,50,75,100],
                    width : 50
                },
                displayInfo: true,
                enableOverflow: true
            }) 
```

**没有溢出菜单的分页栏。**

![在此处输入图像描述](../Images/d5fab0efc2b45b4bdd1339ecbae5b757.png)

**带有溢出菜单的分页栏**

![当溢出的总计数不正确时，它显示为](../Images/f899e5bc1972e65fb8b58a1d5084b055.png)

它显示“**未找到记录**”。有没有解决这个问题的办法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T12:09:37.680

据我所知，问题在于添加到此处找到的分页工具栏的 tbtext 组件：http: [//docs.sencha.com/ext-js/4-1/source/Paging.html#Ext-toolbar-Paging -方法初始化组件](http://docs.sencha.com/ext-js/4-1/source/Paging.html#Ext-toolbar-Paging-method-initComponent)。要解决此问题，您可以通过以下方式关闭 displayInfo 设置为 false：

```
displayInfo: false 
```

然后将您的项目配置调整为：

```
items:[{ 
         xtype : 'pageSizingCombo',
         pageSizes : [10,20,25,50,75,100],
         width : 50
       },
       '->',
       {
         xtype: 'text', 
         itemId: 'displayItem'
      }] 
```

请注意，如果您更改文本组件的 itemId 的值，这将不起作用。换句话说，它总是必须是“displayItem”。

# vb.net - 如何检查是否有任何单选按钮被选中以更改他的前景色

> ID：14451707
> 
> 赞同：0
> 
> 时间：2013-01-22T04:41:56.257
> 
> 标签：vb.net

我在表单上的 10 多个单选按钮上使用“For”语句时遇到问题。

一个单选按钮的示例：

```
If Form2.RadioButton1.Checked = True Then
Form2.RadioButton1.ForeColor = Color.Red
Else
Form2.RadioButton1.ForeColor = Color.Yellow
End If 
```

但是，如果我想在表单上的任何单选按钮上使用它，我将使用如下内容：

```
 Dim i As Integer
    For i = 1 To 10
        If Form2.RadioButton(i).Checked = True Then
            Form2.RadioButton(i).ForeColor = Color.Red
        Else
            Form2.RadioButton(i).ForeColor = Color.Yellow
        End If
    Next 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T04:49:01.440

.net 没有控制数组。遍历表单的 .controls 集合并检查控件类型。

```
For Each tControl as Control in Me.Controls
  If tControl.GetType Is GetType(RadioButton)
    If DirectCast(tControl, RadioButton).Checked
      ' Change the control's color.
    Else
      ' Change the control's color.
    End If
  End If
Next 
```

# plugins - 如何在声纳中使用 build-stability-plugin

> ID：14451708
> 
> 赞同：2
> 
> 时间：2013-01-22T04:41:58.007
> 
> 标签：plugins, hudson, sonarqube

我下载了 build-stability-plugin 并将其放在我的插件文件夹中并重新启动了声纳服务器。
我在与 build-stability-plugin 相关的项目仪表板中看不到任何内容。
在项目的 pom.xml 文件中我还有什么要做的吗？我没有任何想法让这个工作。我必须做什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T08:14:47.957

如果您查看[文档](http://docs.codehaus.org/display/SONAR/Build+Stability+Plugin)，您会看到该插件提供了一个小部件。这意味着如果您想在 Sonar 中查看某些内容，您必须编辑现有仪表板（或创建新仪表板）以添加此小部件。

此外，如文档中所述，如果需要用户和密码，请不要忘记配置插件（在设置中）。

# wcf - WCF 服务初始化部分的最佳实践

> ID：14451710
> 
> 赞同：0
> 
> 时间：2013-01-22T04:42:15.540
> 
> 标签：wcf

我有一个具有已定义工作流的 WCF 服务。我公司的所有开发都遵循了一个流程，其中包括：

1.  拥有应用程序的配置文件
2.  初始化日志文件路径

我读过服务类中的静态构造函数会这样做，但它是正确的做事方式吗？

该服务托管在 Windows 服务中，服务类的配置如下：

```
[ServiceBehavior(InstanceContextMode = InstanceContextMode.Single, ConcurrencyMode = ConcurrencyMode.Single)] 
```

...在 app.config 中，节流设置如下：

```
<serviceThrottling maxConcurrentCalls="1" maxConcurrentSessions="5" maxConcurrentInstances="5" /> 
```

如何编写初始化，以便它仅在启动时执行，这将适用于中的每个选项`InstanceContextMode`？

对 WCF 服务执行 1 和 2 的最佳做法是什么？

读取配置文件和初始化日志文件应该发生一次；除非重新启动服务，否则不应为每个请求执行该代码。

# css - 如何使用 CSS 设计与此类似的垂直弹出菜单？

> ID：14451719
> 
> 赞同：1
> 
> 时间：2013-01-22T04:43:25.480
> 
> 标签：css, user-interface, menu

![在此处输入图像描述](../Images/b2ba1e243afd5fd1649c50b7b9db1fd1.png)

当鼠标悬停在左侧边栏中的图标上时，应该会打开一个弹出菜单/面板。如何在css中做到这一点？

**更新：**我自己创建的。需要稍微打磨一下就可以用了。这是代码：

> jsfiddle.net/anujkk/fhb36/103/

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-10-29T23:18:11.657

我注意到您使用 jQuery 来制作全高菜单。事实上，通过添加这些代码，您将不需要 jQuery：

```
#menuwrapper{position:fixed;left:0;top:0;bottom:0;}
#sidemenu{
    height:100%;
} 
```

看这里。 [http://jsfiddle.net/MenuSo/8drsjhm7/1/](http://jsfiddle.net/MenuSo/8drsjhm7/1/)

`position: absolute;`也可以。

# menu - opencart 在菜单中包含第三个子类别

> ID：14451722
> 
> 赞同：1
> 
> 时间：2013-01-22T04:43:37.600
> 
> 标签：menu, add, categories, opencart

我在 opencart 管理面板中添加了 4 个类别作为 4 个级别，

```
Home
Home -> Furniture
Home -> Furniture -> Wooden (Getting menus up to this level)
Home -> Furniture -> wooden -> Lightweight (Need to display this level) 
```

最初我在菜单中显示第三级类别时遇到问题。[我使用这篇文章](http://forum.opencart.com/viewtopic.php?t=42503#p369429)启用了第三级菜单

像这样如何启用第 4 级类别。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-11-02T10:42:31.840

**标头控制器**

```
$data['categories'] = array();

    $categories = $this->model_catalog_category->getCategories(0);

    foreach ($categories as $category) {

        if ($category['top']) {
            // Level 2
            $children_data = array();

            $children = $this->model_catalog_category->getCategories($category['category_id']);

            foreach ($children as $child) {

                // Level 3 sultan
                $children_data_3 = array();

                $children_3 = $this->model_catalog_category->getCategories($child['category_id']);

                foreach ($children_3 as $child_3) {

                    $filter_data_3 = array(
                        'filter_category_id'  => $child_3['category_id'],
                        'filter_sub_category' => true
                    );

                    $children_data_3[] = array(
                        'name'  => $child_3['name'] . ($this->config->get('config_product_count') ? ' (' . $this->model_catalog_product->getTotalProducts($filter_data_3) . ')' : ''),
                        'href'  => $this->url->link('product/category', 'path=' . $child['category_id'] . '_' . $child_3['category_id'])
                    );
                }
                //end of level 3

                $filter_data = array(
                    'filter_category_id'  => $child['category_id'],
                    'filter_sub_category' => true
                );

                $children_data[] = array(
                    'name'  => $child['name'] . ($this->config->get('config_product_count') ? ' (' . $this->model_catalog_product->getTotalProducts($filter_data) . ')' : ''),
                    'href'  => $this->url->link('product/category', 'path=' . $category['category_id'] . '_' . $child['category_id']),
                    'grand_childs' => $children_data_3

                );
            }

            // Level 1
            $data['categories'][] = array(
                'name'     => $category['name'],
                'children' => $children_data,
                'column'   => $category['column'] ? $category['column'] : 1,
                'href'     => $this->url->link('product/category', 'path=' . $category['category_id'])
            );
        }

    } 
```

**tpl代码**

```
 <ul class="nav navbar-nav">

    <?php foreach ($categories as $category) { ?>
    <?php if ($category['children']) { ?>

    <li class="dropdown">
     <a href="<?php echo $category['href']; ?>" class="dropdown-toggle" data-toggle="dropdown"><?php echo $category['name']; ?></a>

      <div class="dropdown-menu">
        <div class="dropdown-inner">
          <?php foreach (array_chunk($category['children'], ceil(count($category['children']) / $category['column'])) as $children) { ?>
          <ul class="nav">
            <?php foreach ($children as $child) { ?>

              <li class="dropdown-submenu" >
              <a href="<?php echo $child['href']; ?>" class="dropdown-toggle" data-toggle="dropdown"><?php echo $child['name']; ?></a>

               <?php if($child['grand_childs']){
                echo '<ul class="dropdown-menu sub-menu">';
              foreach($child['grand_childs'] as $grand_child){ ?>
                        <li>
                          <a href="<?php echo $grand_child['href']; ?>" ><?php echo $grand_child['name']; ?></a>
                        </li>
            <?php }
                echo '</ul>';
            }
            ?>
            </li>

            <?php } ?>

          </ul>
          <?php } ?>

        </div>
        <a href="<?php echo $category['href']; ?>" class="see-all"><?php echo $text_all; ?> <?php echo $category['name']; ?></a> </div>
    </li>
    <?php } else { ?>
    <li><a href="<?php echo $category['href']; ?>"><?php echo $category['name']; ?></a></li>
    <?php } ?>
    <?php } ?>

  </ul> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-12-16T09:46:05.877

用于在主菜单中显示子类别。请进行以下更改。

编辑 header.php 控制器文件

```
 $sec_children_data = array();
                $sec_children = $this->model_catalog_category->getCategories($child['category_id']);

                foreach ($sec_children as $sec_child) {
                    $sec_children_data[] = array(
                        'name'  => $sec_child['name'] . ($this->config->get('config_product_count') ? '' : ''),
                        'href'  => $this->url->link('product/category', 'path=' . $child['category_id'] . '_' . $sec_child['category_id'])
                    );

                } 
```

编辑 header.tpl

```
?php if (isset($category['children'][$i]['level3'])) {  
          $level3menus = $category['children'][$i]['level3'];
          ?>
          <ul class="level3">
          <?php
                foreach( $level3menus as $level3menu) {
          ?>
                <li><a href="<?php echo $level3menu['href']; ?>" class=""><?php echo $level3menu['name'];?></a></li>
          <?php } ?> 
```

请参考我的教程一步一步的解释和演示。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-02-11T04:09:48.673

首先从[这里](https://code.google.com/archive/p/vqmod/downloads)下载 vqmod然后解压它。现在 vqmod 文件夹保存在您的站点根目录中。然后去浏览器写你的站点 url 然后“/vqmod/install”然后按回车然后你会收到一条消息，你可以在你的站点中成功安装 vqmod。[现在你在这里](http://www.opencart.com/index.php?route=extension/extension/info&extension_id=21351)下载一个扩展表格并解压它。并在您的站点中保留提取文件，表明 folder exm：menu3rdlevel-opencart-2_2\vqmod\xml/Menu3rdLevel.xml 文件在您的站点中，例如：vqmod\xml/Menu3rdLevel.xml 它们是带有“menu3rdlevel”文件夹的其他文件。从扩展文件夹“javascript”到站点文件夹“javescript”，扩展文件夹“image”到站点文件夹“image”扩展文件夹“stylsheet”到站点文件夹“stylsheet”。

注意：仅传输 xml 文件和带有“menu3rdlevel”文件夹的其他文件。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-01-22T12:01:48.070

我自己做的，

将 header.tpl 文件更改为

```
<?php if (isset($_SERVER['HTTP_USER_AGENT']) && !strpos($_SERVER['HTTP_USER_AGENT'], 'MSIE 6')) echo '<?xml version="1.0" encoding="UTF-8"?>'. "\n"; ?>
<!DOCTYPE html>
<html>
<head>
<title><?php echo $title; ?></title>
<base href="<?php echo $base; ?>" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
<?php if ($description) { ?>
<meta name="description" content="<?php echo $description; ?>" />
<?php } ?>
<?php if ($keywords) { ?>
<meta name="keywords" content="<?php echo $keywords; ?>" />
<?php } ?>
<?php if ($icon) { ?>
<link href="<?php echo $icon; ?>" rel="icon" />
<?php } ?>
<?php foreach ($links as $link) { ?>
<link href="<?php echo $link['href']; ?>" rel="<?php echo $link['rel']; ?>" />
<?php } ?>
<link rel="stylesheet" type="text/css" href="catalog/view/theme/fashioncart/stylesheet/stylesheet.css" />
<?php foreach ($styles as $style) { ?>
<link rel="<?php echo $style['rel']; ?>" type="text/css" href="<?php echo $style['href']; ?>" media="<?php echo $style['media']; ?>" />
<?php } ?>
<script type="text/javascript" src="catalog/view/javascript/jquery/jquery-1.7.1.min.js"></script>
<script type="text/javascript" src="catalog/view/javascript/jquery/ui/jquery-ui-1.8.16.custom.min.js"></script>
<link rel="stylesheet" type="text/css" href="catalog/view/javascript/jquery/ui/themes/ui-lightness/jquery-ui-1.8.16.custom.css" />
<script type="text/javascript" src="catalog/view/javascript/jquery/ui/external/jquery.cookie.js"></script>
<script type="text/javascript" src="catalog/view/javascript/jquery/colorbox/jquery.colorbox.js"></script>
<link rel="stylesheet" type="text/css" href="catalog/view/javascript/jquery/colorbox/colorbox.css" media="screen" />
<script type="text/javascript" src="catalog/view/javascript/jquery/tabs.js"></script>
<script type="text/javascript" src="catalog/view/javascript/common.js"></script>
<script type="text/javascript" src="catalog/view/theme/fashioncart/javascript/fashioncart_custom.js"></script>
<script type="text/javascript" src="catalog/view/theme/fashioncart/javascript/cloud_zoom.js"></script>

<link href='http://fonts.googleapis.com/css?family=Open+Sans:400,300,600' rel='stylesheet' type='text/css'>

<?php foreach ($scripts as $script) { ?>
<script type="text/javascript" src="<?php echo $script; ?>"></script>
<?php } ?>
<!--[if lt IE 9]>
<link rel="stylesheet" type="text/css" href="catalog/view/theme/fashioncart/stylesheet/ie8.css" />
<![endif]-->
<!--[if IE 7]>
<link rel="stylesheet" type="text/css" href="catalog/view/theme/fashioncart/stylesheet/ie7.css" />
<![endif]-->
<!--[if lt IE 7]>
<link rel="stylesheet" type="text/css" href="catalog/view/theme/default/stylesheet/ie6.css" />
<script type="text/javascript" src="catalog/view/javascript/DD_belatedPNG_0.0.8a-min.js"></script>
<script type="text/javascript">
DD_belatedPNG.fix('#logo img');
</script>
<![endif]-->
<?php echo $google_analytics; ?>
</head>
<body>

<div id="container">

<div id="header">
  <?php if ($logo) { ?>
  <div id="logo"><a href="<?php echo $home; ?>"><img src="<?php echo $logo; ?>" title="<?php echo $name; ?>" alt="<?php echo $name; ?>" /></a></div>
  <?php } ?>

      <div id="welcome">
        <?php if (!$logged) { ?>
        <?php echo $text_welcome; ?>
        <?php } else { ?>
        <?php echo $text_logged; ?>
        <?php } ?>
      </div>

     <div class="sign_up_pd">
        <a href="<?php echo $wishlist; ?>" id="wishlist-total"><?php echo $text_wishlist; ?></a> <a href="<?php echo $account; ?>"><?php echo $text_account; ?></a><a href="<?php echo $shopping_cart; ?>"><?php echo $text_shopping_cart; ?></a><a href="<?php echo $checkout; ?>"><?php echo $text_checkout; ?></a>
        <a href="<?php echo $publisher_sign; ?> " title="Publisher" > Publisher </a>
        <a href="<?php echo $developer_sign; ?> " title="Developer" > Developer </a>
     </div>
     <div class="clear_both"></div>

      <?php echo $cart; ?>

  <div id='header_btm'>
  <span class="span_lable">Search: </span>
    <select name="search_categories" id="search_categories" >
    <option value="0" >All Category</option>
      <?php foreach ($categories_search as $category) { ?>
            <?php if($category['category_id'] == $filter_category_id): ?>
            <option selected="selected" value="<?php echo $category['category_id'];?>" ><?php echo $category['name'];?></option>
            <?php else: ?>
            <option value="<?php echo $category['category_id'];?>" ><?php echo $category['name'];?></option>
            <?php endif; ?>

            <?php foreach ($category['children'] as $subcategory) { ?>
            <?php if($subcategory['category_id'] == $filter_category_id): ?>
            <option selected="selected" value="<?php echo $subcategory['category_id'];?>" >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<?php echo $subcategory['name'];?></option>
            <?php else: ?>
            <option value="<?php echo $subcategory['category_id'];?>" >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<?php echo $subcategory['name'];?></option>
            <?php endif; ?>
            <?php } ?>

     <?php } ?>
    </select>

    <div id="search">
        <div class="search_inside">
            <?php if ($filter_name) { ?>
            <input type="text" name="filter_name" value="<?php echo $filter_name; ?>" />
            <?php } else { ?>
            <input type="text" name="filter_name" value="<?php echo $text_search; ?>" onclick="this.value = '';" onkeydown="this.style.color = '#444444';" />
            <?php } ?>

            <div class="button-search"></div>
        </div>
      </div>
    <?php echo $language; ?>
    <?php echo $currency; ?>
  </div>

</div>

<?php if ($categories) { ?>
<div id="menu">
  <ul>
    <li><a href="<?php echo $home; ?>"><span class='home_icon'></span></a>
    <?php foreach ($categories as $category) { ?>
    <li><a href="<?php echo $category['href']; ?>"><?php echo $category['name']; ?></a>
      <?php if ($category['children']) { ?>
      <div>
        <?php for ($i = 0; $i < count($category['children']);) { ?>
        <ul>
          <?php $j = $i + ceil(count($category['children']) / $category['column']); ?>
          <?php for (; $i < $j; $i++) { ?>
          <?php if (isset($category['children'][$i])) { ?>               
            <!-- Begin Part 1 of the extension Header menu add level 3 sub categories extension (line to be replaced: number 84 of the header.tpl file) -->      
            <li>
            <?php
            if(count($category['children'][$i]['children_level2'])>0){
            ?>
                  <a href="<?php echo $category['children'][$i]['href']; ?>"  onmouseover='JavaScript:openSubMenu("<?php echo $category['children'][$i]['id']; ?>")'><?php echo $category['children'][$i]['name']; ?></a>
            <?php

                  //echo "<img src='catalog/view/theme/default/image/arrow-right.png' style='right:10px;margin-top:3px;position:absolute;'/></a>";
                  //echo "<span style='right:5px;margin-top:-6px;position:absolute;color:white;font-weight:bold;font-size:18px;'>&#187;</span></a>";

            }
            else
            {
            ?>
            <a href="<?php echo $category['children'][$i]['href']; ?>" onmouseover='JavaScript:closeSubMenu()' ><?php echo $category['children'][$i]['name']; ?></a>
            <?php
            }
            ?>

            <?php if ($category['children'][$i]['children_level2']) { ?>
                 <div class="submenu" style="display:none;" id="id_menu_<?php echo $category['children'][$i]['id']; ?>">
                  <ul>
                  <?php for ($wi = 0; $wi < count($category['children'][$i]['children_level2']); $wi++) { ?>
                    <li>
                        <!-- Begin 4th level -->
<?php
            if(count($category['children'][$i]['children_level2'][$wi]['children_level3'])>0){
            ?>
                  <a href="<?php echo $category['children'][$i]['children_level2'][$wi]['href']; ?>"  ><?php echo $category['children'][$i]['children_level2'][$wi]['name']; ?></a>
            <?php

                  //echo "<img src='catalog/view/theme/default/image/arrow-right.png' style='right:10px;margin-top:3px;position:absolute;'/></a>";
                  //echo "<span style='right:5px;margin-top:-6px;position:absolute;color:white;font-weight:bold;font-size:18px;'>&#187;</span></a>";

            }
            else
            {
            ?>
            <a href="<?php echo $category['children'][$i]['children_level2'][$wi]['href']; ?>"  ><?php echo $category['children'][$i]['children_level2'][$wi]['name']; ?></a>
            <?php
            }
            ?>

            <?php if ($category['children'][$i]['children_level2'][$wi]['children_level3']) { ?>
                 <div class="submenu"  syule="display:none;" id="id_menu_<?php echo $category['children'][$i]['children_level2'][$wi]['id']; ?>">
                  <ul>
                  <?php for ($wid = 0; $wid < count($category['children'][$i]['children_level2'][$wi]['children_level3']); $wid++) { ?>
                    <li>
                        <a href="<?php echo $category['children'][$i]['children_level2'][$wid]['children_level3']['href']; ?>"  ><?php echo $category['children'][$i]['children_level2'][$wi]['children_level3'][$wid]['name']; ?>
                        </a>
                    </li>
              <?php } ?>
            </ul>
           </div>
<?php } ?>   

<!-- End 4th Level -->
                    </li>
              <?php } ?>
            </ul>
           </div>
           <?php } ?>        
         </li>
         <!-- END Part 1 of the extension Header menu add level 3 sub categories extension -->
          <?php } ?>
          <?php } ?>
        </ul>
        <?php } ?>
      </div>
      <?php } ?>
    </li>
    <?php } ?>
  </ul>
</div>
<?php } ?>
<div id="notification"></div>
<!-- Begin Part 2 of the extension Header menu add level 3 sub categories extension-->
<script type="text/javascript">
function openSubMenu(id){
        //
        $('.submenu').hide();
        document.getElementById("id_menu_"+id).style.display="block";
}
function closeSubMenu(){
      $('.submenu').hide();
}
</script>
<style>
.submenu{
    background: url('catalog/view/theme/default/image/menu.png') repeat scroll 0 0 transparent;
        border: 1px solid #000000;
    border-radius: 0px 5px 5px 0px;
    margin-top:-23px;
    left:140px;
    position:absolute;
    min-width:140px;
    display:none;
}
@media screen and (-webkit-min-device-pixel-ratio:0) {
 .submenu {left: 160px;}

    }
</style>

<!-- PHONE::Start -->

<?php if ($categories) { ?>
<div id="menu-phone" class="shown-phone" style="display: none;">
  <div id="menu-phone-button">Menu</div>
  <select id="menu-phone-select" onchange="location = this.value">
    <option value=""></option>
    <?php foreach ($categories as $category) { ?>
    <option value="<?php echo $category['href']; ?>"><?php echo $category['name']; ?></option>
    <?php } ?>
  </select>
</div>

<script type="text/javascript">
    // Bind the Phone menu dropdown
    $('#menu-phone-button').bind('click', function() {
        $("#menu-phone-select").css({'opacity':'1'});
    });
</script>
<?php } ?>

<!-- PHONE::End -->

<div id="notification"></div> 
```

并将您的 header.php 文件更改为

```
<?php   
class ControllerCommonHeader extends Controller {
   protected function index() {
      $this->data['title'] = $this->document->getTitle();

      if (isset($this->request->server['HTTPS']) && (($this->request->server['HTTPS'] == 'on') || ($this->request->server['HTTPS'] == '1'))) {
         $this->data['base'] = $this->config->get('config_ssl');
      } else {
         $this->data['base'] = $this->config->get('config_url');
      }

      $this->data['description'] = $this->document->getDescription();
      $this->data['keywords'] = $this->document->getKeywords();
      $this->data['links'] = $this->document->getLinks();    
      $this->data['styles'] = $this->document->getStyles();
      $this->data['scripts'] = $this->document->getScripts();
      $this->data['lang'] = $this->language->get('code');
      $this->data['direction'] = $this->language->get('direction');
      $this->data['google_analytics'] = html_entity_decode($this->config->get('config_google_analytics'), ENT_QUOTES, 'UTF-8');

      // Whos Online
      if ($this->config->get('config_customer_online')) {
         $this->load->model('tool/online');

         if (isset($this->request->server['REMOTE_ADDR'])) {
            $ip = $this->request->server['REMOTE_ADDR'];   
         } else {
            $ip = ''; 
         }

         if (isset($this->request->server['HTTP_HOST']) && isset($this->request->server['REQUEST_URI'])) {
            $url = 'http://' . $this->request->server['HTTP_HOST'] . $this->request->server['REQUEST_URI'];   
         } else {
            $url = '';
         }

         if (isset($this->request->server['HTTP_REFERER'])) {
            $referer = $this->request->server['HTTP_REFERER'];   
         } else {
            $referer = '';
         }

         $this->model_tool_online->whosonline($ip, $this->customer->getId(), $url, $referer);
      }

      $this->language->load('common/header');

      if (isset($this->request->server['HTTPS']) && (($this->request->server['HTTPS'] == 'on') || ($this->request->server['HTTPS'] == '1'))) {
         $server = HTTPS_IMAGE;
      } else {
         $server = HTTP_IMAGE;
      }   

      if ($this->config->get('config_icon') && file_exists(DIR_IMAGE . $this->config->get('config_icon'))) {
         $this->data['icon'] = $server . $this->config->get('config_icon');
      } else {
         $this->data['icon'] = '';
      }

      $this->data['name'] = $this->config->get('config_name');

      if ($this->config->get('config_logo') && file_exists(DIR_IMAGE . $this->config->get('config_logo'))) {
         $this->data['logo'] = $server . $this->config->get('config_logo');
      } else {
         $this->data['logo'] = '';
      }

      $this->data['text_home'] = $this->language->get('text_home');
      $this->data['text_wishlist'] = sprintf($this->language->get('text_wishlist'), (isset($this->session->data['wishlist']) ? count($this->session->data['wishlist']) : 0));
      $this->data['text_shopping_cart'] = $this->language->get('text_shopping_cart');
       $this->data['text_search'] = $this->language->get('text_search');
      $this->data['text_welcome'] = sprintf($this->language->get('text_welcome'), $this->url->link('account/login', '', 'SSL'), $this->url->link('account/register', '', 'SSL'));
      $this->data['text_logged'] = sprintf($this->language->get('text_logged'), $this->url->link('account/account', '', 'SSL'), $this->customer->getFirstName(), $this->url->link('account/logout', '', 'SSL'));
      $this->data['text_account'] = $this->language->get('text_account');
       $this->data['text_checkout'] = $this->language->get('text_checkout');

      $this->data['publisher_sign'] = $this->url->link('account/publisher_signup', '', 'SSL');

      $this->data['developer_sign'] = $this->url->link('account/developer_signup', '', 'SSL');

      $this->data['home'] = $this->url->link('common/home');
      $this->data['wishlist'] = $this->url->link('account/wishlist', '', 'SSL');
      $this->data['logged'] = $this->customer->isLogged();
      $this->data['account'] = $this->url->link('account/account', '', 'SSL');
      $this->data['shopping_cart'] = $this->url->link('checkout/cart');
      $this->data['checkout'] = $this->url->link('checkout/checkout', '', 'SSL');

      if (isset($this->request->get['filter_name'])) {
         $this->data['filter_name'] = $this->request->get['filter_name'];
      } else {
         $this->data['filter_name'] = '';
      }

      // Menu
      $this->load->model('catalog/category');

      $this->load->model('catalog/product');

      $this->data['categories'] = array();

      $categories = $this->model_catalog_category->getCategories(0);

      foreach ($categories as $category) {
         if ($category['top']) {
            $children_data = array();

            $children = $this->model_catalog_category->getCategories($category['category_id']);

            foreach ($children as $child) {
               $data = array(
                  'filter_category_id'  => $child['category_id'],
                  'filter_sub_category' => true
               );               
               /*Begin of the extension Header menu add level 3 sub categories extension code  to be replaced:
               $product_total = $this->model_catalog_product->getTotalProducts($data); 

               $children_data[] = array(
                  'name'  => $child['name'] . ($this->config->get('config_product_count') ? ' (' . $product_total . ')' : ''),
                  'href'  => $this->url->link('product/category', 'path=' . $category['category_id'] . '_' . $child['category_id'])   
               );   
               */             
               // Level 2
               $children_level2 = $this->model_catalog_category->getCategories($child['category_id']);
               $children_data_level2 = array();
               foreach ($children_level2 as $child_level2) {
                     $data_level2 = array(
                           'filter_category_id'  => $child_level2['category_id'],
                           'filter_sub_category' => true
                     );

                     //level3 starts here

                     $children_level3 = $this->model_catalog_category->getCategories($child_level2['category_id']);
                     $children_data_level3 = array();
                     foreach ($children_level3 as $child_level3) 
                        {
                           $data_level3 = array(
                                 'filter_category_id'  => $child_level3['category_id'],
                                 'filter_sub_category' => true
                           );
                           $product_total_level3 = '';
                           if ($this->config->get('config_product_count')) {
                                 $product_total_level3 = ' (' . $this->model_catalog_product->getTotalProducts($data_level3) . ')';
                           }

                           $children_data_level3[] = array(
                                 'name'  =>  $child_level3['name'] . $product_total_level3,
                                 'href'  => $this->url->link('product/category', 'path=' . $child['category_id'] . '_' . $child_level3['category_id']),
                                 'id' => $category['category_id']. '_' . $child['category_id']. '_' . $child_level3['category_id']
                           );
                        }
                     //level 3 ends here
                     $product_total_level2 = '';
                     if ($this->config->get('config_product_count')) {
                           $product_total_level2 = ' (' . $this->model_catalog_product->getTotalProducts($data_level2) . ')';
                     }

                     $children_data_level2[] = array(
                           'name'  =>  $child_level2['name'] . $product_total_level2,
                           'href'  => $this->url->link('product/category', 'path=' . $child['category_id'] . '_' . $child_level2['category_id']),
                           'id' => $category['category_id']. '_' . $child['category_id']. '_' . $child_level2['category_id'],
                           'children_level3' => $children_data_level3,
                     );
               }
               $children_data[] = array(
                     'name'  => $child['name'],
                     'href'  => $this->url->link('product/category', 'path=' . $category['category_id'] . '_' . $child['category_id']),
                     'id' => $category['category_id']. '_' . $child['category_id'],
                     'children_level2' => $children_data_level2,
               );
               //END of the extension Header menu add level 3 sub categories extension         
            }

            // Level 1
            $this->data['categories'][] = array(
               'name'     => $category['name'],
               'children' => $children_data,
               'column'   => $category['column'] ? $category['column'] : 1,
               'href'     => $this->url->link('product/category', 'path=' . $category['category_id'])
            );

         }
      }

      if (isset($this->request->get['filter_category_id'])) {

         $filter_category_id = $this->request->get['filter_category_id'];

      } else {

         $filter_category_id = 0;

      }

      $this->data['filter_category_id'] = $filter_category_id;

      foreach ($categories as $category) {

            $children_data = array();

            $children = $this->model_catalog_category->getCategories($category['category_id']);

            foreach ($children as $child) {

               $data = array(

                     'filter_category_id'  => $child['category_id'],

                     'filter_sub_category' => true

               );

               $product_total = $this->model_catalog_product->getTotalProducts($data);

               $children_data[] = array(

                     'name'  => $child['name'] . ($this->config->get('config_product_count') ? ' (' . $product_total . ')' : ''),

                     'category_id' => $child['category_id']

               );

            }

            // Level 1

            $this->data['categories_search'][] = array(

                  'name'     => $category['name'],

                  'category_id' => $category['category_id'],

                  'children' => $children_data,

            );

      }

      $this->children = array(
         'module/language',
         'module/currency',
         'module/cart'
      );

      if (file_exists(DIR_TEMPLATE . $this->config->get('config_template') . '/template/common/header.tpl')) {
         $this->template = $this->config->get('config_template') . '/template/common/header.tpl';
      } else {
         $this->template = 'default/template/common/header.tpl';
      }

       $this->render();
   }    
}
?> 
```

# html - 为字体创建基线

> ID：14451723
> 
> 赞同：0
> 
> 时间：2013-01-22T04:44:02.500
> 
> 标签：html, css, typography

我正在尝试为我正在使用的字体创建基线。字体是萨比奥。

下面的具体样式是Sabio Perpendicular。

我试图用这种字体创建一个基线，正如你在下面看到的，我已经取得了一些成功。

下图显示了我使用的字体，每 12 个像素显示一次“基线”。

我的问题是，为什么第二组标题（在文章中）开始偏离基线？我尝试将它们从文章标签中删除，但仍然得到相同的结果。

我真的不知道发生了什么，但我认为这会奏效。

对于一些帮助我将像素转换为 rems 的 mixin，我使用 less。

这是我正在使用的较少代码

```
html
{
     font-size : 10px;
}

h1
{
    .font-size( 3.2 ); /* 3.2rem or 32px */
    .line-height( 4.8 ); /* 4.8rem or 48px */
    .margin-top( 1.2 ); /* etc etc etc */
}

h2
{
    .font-size( 2.4 );
    .line-height( 3.6 );
    .margin-top( 0.9 );
}

h3
{
    .font-size( 1.9 );
    .line-height( 2.4 );
    .margin-top( 1.9 );
}

h4
{
    .font-size( 1.6 );
    .line-height( 2.4 );
    .margin-top( 1.3 );
}

h5
{
    .font-size( 1.4 );
    .line-height( 2.4 );
    .margin-top( 1.3 );
}

h6
{
    .font-size( 1.1 );
    .line-height( 2.4 );
    .margin-top( 1.3 );
} 
```

![字体基线](../Images/06aa6b4aea6be9cdfd3dccce82f8cfac.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T06:19:04.990

很可能从容器继承了一些额外的级联边距或填充。

调试此问题的最佳方法是使用 Firebug 或 Chrome 开发工具，它们将向您展示元素的有效 CSS 和可视框模型。

# java - 在 SQLite for Java 中比较包含重音符号的字符串不起作用

> ID：14451725
> 
> 赞同：1
> 
> 时间：2013-01-22T04:44:19.907
> 
> 标签：java, string, encoding, sqlite

我在一个文件中读取一些保龄球运动员的名字，然后我需要在 SQLite 数据库中找到这些名字来计算他们的平均值。

除了包含重音符号的名称（例如“É”）之外，一切都运行良好。

我`PRAGMA Encoding`在 SQLite Manager 中使用过，数据库以 UTF-8 编码。我还通过输出确保我的 Java 使用 UTF-8 进行编码`Charset.defaultCharset();`

此外，如果我在 SQLite 管理器中运行查询，一切正常，这实际上让我非常确定我需要对 JDBC SQLite 驱动程序做一些事情。我还没有找到一种方法来查看或更改它使用的编码。我什至不确定这是否是问题所在。

这是我正在使用的代码：

```
public double getPlayerAverage(String name, String leagueName){
    PreparedStatement ps = null;
    ResultSet rs = null;
    double average = 0.0;

    try{
        connect();

        ps = conn.prepareStatement("SELECT AVG(Score)Average FROM Scores " +
                " JOIN Players p1 USING (PlayerID) " +
                " WHERE UPPER(Name) = ? AND UPPER(LeagueName) = ? AND Season = '2012-2013' AND Score > -1" +
                " GROUP BY Season, LeagueName, PlayerID; ");

        ps.setString(1, name);
        ps.setString(2, leagueName);

        rs = ps.executeQuery();

        if(rs.next())
        {
            average = rs.getDouble("Average");
        }
        else
        {
            System.out.println(name + " --- " + leagueName);
        }
    }
    catch(SQLException sqle){
        sqle.printStackTrace();
    }
    finally{
        closer(rs, ps);
    }

    return average;
} 
```

"else" 输出没有相关平均数的名字，这意味着在数据库中没有找到这些球员。以这种方式输出的所有名称都包含重音，并且没有成功解析包含重音的名称。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-22T08:37:58.227

[UPPER](http://www.sqlite.org/lang_corefunc.html#upper)只处理 ASCII 字符。

您应该确保在搜索玩家姓名时使用一致的大小写。（您的代码已经假定拼写、姓名顺序、首字母缩写等是一致的。）

（当两个玩家同名时会发生什么？）

# android - 无法从 Eclipse 运行 android 2.2 模拟器

> ID：14451726
> 
> 赞同：1
> 
> 时间：2013-01-22T04:44:21.430
> 
> 标签：android

嗨，我基本上刚刚开始为 android 构建应用程序，我一直在学习一些教程只是为了开始，但我的应用程序不会在 4.2 中运行。我收到消息“Unfrotunatley，您的应用程序已关闭...”。所以我创建了一个 android 2.2 模拟器，并且运行良好，但在 Eclipse 中，它只在 2.2 模拟器旁边显示“x”，但 4.2 模拟器显示完美。

我如何让 2.2 模拟器在 eclipse 上工作，我有 SDK 和所有这些，它只是不给我运行它的选项。不从 Eclipse 启动时它工作正常。

另外，我知道这可以归类为另一个问题，但我的程序有 0 个错误，并且与我一直在关注的教程几乎相同。我试图调试它，它说“跳过了 42 帧。也许你的程序正在运行很多进程”，所以我通过了这个程序，实际上什么都没有发生，除非我按下按钮。

日志错误：

```
01-22 04:55:12.697: E/ActivityThread(740): Service com.android.exchange.ExchangeService has leaked ServiceConnection com.android.emailcommon.service.ServiceProxy$ProxyConnection@40cf1f08 that was originally bound here
01-22 04:55:12.697: E/ActivityThread(740): android.app.ServiceConnectionLeaked: Service  com.android.exchange.ExchangeService has leaked ServiceConnection com.android.emailcommon.service.ServiceProxy$ProxyConnection@40cf1f08 that was originally bound here
01-22 04:55:12.697: E/ActivityThread(740):  at android.app.LoadedApk$ServiceDispatcher.<init>(LoadedApk.java:969)
01-22 04:55:12.697: E/ActivityThread(740):  at android.app.LoadedApk.getServiceDispatcher(LoadedApk.java:863)
01-22 04:55:12.697: E/ActivityThread(740):  at android.app.ContextImpl.bindService(ContextImpl.java:1418)
01-22 04:55:12.697: E/ActivityThread(740):  at android.app.ContextImpl.bindService(ContextImpl.java:1407)
01-22 04:55:12.697: E/ActivityThread(740):  at android.content.ContextWrapper.bindService(ContextWrapper.java:473)
01-22 04:55:12.697: E/ActivityThread(740):  at com.android.emailcommon.service.ServiceProxy.setTask(ServiceProxy.java:157)
01-22 04:55:12.697: E/ActivityThread(740):  at com.android.emailcommon.service.ServiceProxy.setTask(ServiceProxy.java:145)
01-22 04:55:12.697: E/ActivityThread(740):  at com.android.emailcommon.service.AccountServiceProxy.getDeviceId(AccountServiceProxy.java:116)
01-22 04:55:12.697: E/ActivityThread(740):  at com.android.exchange.ExchangeService.getDeviceId(ExchangeService.java:1249)
01-22 04:55:12.697: E/ActivityThread(740):  at com.android.exchange.ExchangeService$7.run(ExchangeService.java:1856)
01-22 04:55:12.697: E/ActivityThread(740):  at com.android.emailcommon.utility.Utility$2.doInBackground(Utility.java:551)
01-22 04:55:12.697: E/ActivityThread(740):  at com.android.emailcommon.utility.Utility$2.doInBackground(Utility.java:549)
01-22 04:55:12.697: E/ActivityThread(740):  at android.os.AsyncTask$2.call(AsyncTask.java:287)
01-22 04:55:12.697: E/ActivityThread(740):  at java.util.concurrent.FutureTask.run(FutureTask.java:234)
01-22 04:55:12.697: E/ActivityThread(740):  at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1080)
01-22 04:55:12.697: E/ActivityThread(740):  at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:573)
01-22 04:55:12.697: E/ActivityThread(740):  at java.lang.Thread.run(Thread.java:856) 
```

我也经常得到这个：

```
01-22 05:00:10.832: W/Trace(740): Unexpected value from nativeGetEnabledTags: 0 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T05:08:23.957

```
Im also getting this frequently:

01-22 05:00:10.832: W/Trace(740): Unexpected value from nativeGetEnabledTags: 0 
```

为避免这种情况，您可以通过以下方式将其过滤掉。

转到 DDMS--> 从**已保存的过滤器**中选择您的包名称并双击它-->在内部写入**日志消息**`^(?!.*(nativeGetEnabledTags)).*$`--> 单击确定。

这就是所有你不会`Unexpected value from nativeGetEnabledTags: 0`经常得到这条线。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T05:17:47.120

Android SDK API 17 中存在一个错误，该错误会向 LogCat 发出警告消息，例如：

来自 nativeGetEnabledTags 的意外值：0

这使得很难看到真实的消息。较旧的 API 版本不会出现该消息。在修复错误之前，可以使用此过滤器抑制消息：

```
^(?!.*(nativeGetEnabledTags)).*$ 
```

这是工具的最新版本中引入的一个错误……谷歌正在努力修复下一个版本。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-22T04:47:41.607

请尝试将此添加到您的清单文件中

```
 <uses-sdk
    android:minSdkVersion="8"
    android:targetSdkVersion="17" /> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-22T04:58:05.667

试试这个方法

选择您选择的项目，转到顶部的“运行”菜单。打开“运行配置”并选择您的目标虚拟设备 android2.2 avd。单击应用，然后运行该项目。

按照步骤

1.  开始日食
2.  转到 Windows-> AVD 管理器-> 选择虚拟设备-> 单击开始
3.  右键项目->选择运行方式->运行配置和同一个虚拟设备

    ```
     Your application should load now 
    ```

    检查这个链接

[来自 nativeGetEnabledTags 的意外值：0](https://stackoverflow.com/questions/13416142/unexpected-value-from-nativegetenabledtags-0)

# linux - awk ignore case

> ID：14451732
> 
> 赞同：0
> 
> 时间：2013-01-22T04:45:07.977
> 
> 标签：linux, bash, awk

```
file.txt

file format  = cust:hdb

file data =   ted Ref:4rm 
```

> read -p "Cust:" cust

User key in: ted ref

```
grep -i -q "$cust" "file" 
```

System able to ignore case and read the input

```
read -p "NewCust:" cust2 
```

User key in: Ted Ref

> awk -F : -v OFS=: -v cust="$cust" -v cust="$cust2" -v hdb="$hdb" '$1==cust && $2==hdb {$1=cust2;}1' file

How do i set this so that the awk can ignore the case and update to file?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-22T04:51:56.597

In addition to `IGNORECASE`, you can convert the item you are matching to lowercase in `GNU awk` with `tolower()`.

```
awk -F : -v OFS=: -v cust="$cust" -v cust="$cust2" -v hdb="$hdb" 'tolower($1)==cust && tolower($2)==hdb {$1=cust2;}1' 
```

The GNU awk documentation offers [this page](http://www.gnu.org/software/gawk/manual/html_node/Case_002dsensitivity.html#Case_002dsensitivity) on case sensitivity.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T04:47:57.600

One way:

```
IGNORECASE=1 awk -F : -v OFS=: -v cust="$cust" -v cust="$cust2" -v hdb="$hdb" '$1==cust && $2==hdb {$1=cust2;}1' file 
```

# c# - 实体框架一张表中有两个外键

> ID：14451735
> 
> 赞同：0
> 
> 时间：2013-01-22T04:45:23.637
> 
> 标签：c#, entity-framework, foreign-keys, one-to-one

我有两个实体：

```
public class Person {
    [Key]
    public string Name {get;set;}

    public virtual Phone homePhone {get;set;} 
    public virtual Phone cellPhone {get;set;}
}

public class Phone {
    [Key]
    public int PhoneNumber {get;set;}

    public virtual Person {get;set;} 
} 
```

一个人可以拥有零个或一部家庭电话和零个或一部手机。（我认为这是一对一或零关系）。

如何使用 CodeFirst API 使用实体框架对此进行建模。我可以通过将 Person 设置为 Phone 的主键和外键来模拟 Person 和 Phone 之间的一对零/一关系，但是 homePhone 和 cellPhone 怎么能具有相同的 person 实体？反过来，我可以说电话和人之间存在一对零/一的关系，其中每个人都有两个电话外键？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-30T01:20:02.783

您可以添加另一个用于创建电话类型的表，然后每部电话必须至少具有一种电话类型：

```
public class Person
{
    [key]
    public string name {get;set;}

    public virtual ICollection<Phone> Phones {get;set;}
}

public class Phone
{
    [key]
    public int PhoneNumber {get;set;}

    public int PhoneTypeId {get;set;}
    public virtual PhoneType PhoneType {get;set;}
}

public class PhoneType
{
    [key]
    public int PhoneTypeId {get;set;}
    public string PhoneTypeDescription {get;set}
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T05:33:51.487

你应该考虑这样的事情：

```
public class Person {
    [Key]
    public string Name {get;set;}

    Public PersonPhone HomePhone{get; set;}

    Public PersonPhone CellPhone{get; set;}        
}   

public class Phone {
    [Key]
    public int PhoneNumber {get;set;}
}

public class PersonPhone {
    [Key]
    public virtual Phone Phone {get;set;}

    [Key]
    public PhoneType PhoneType {get;set;}
}

public enum PhoneType {
    HomePhone,
    CellPhone 
} 
```

# javascript - 调整大小时没有延迟的砌体效果

> ID：14451736
> 
> 赞同：3
> 
> 时间：2013-01-22T04:45:35.613
> 
> 标签：javascript, jquery, css, css-float, jquery-masonry

**TL; DR：**看[这个小提琴](http://jsfiddle.net/UTB5C/)——我要找的几乎都是一个JavaScript doohickey，它可以修复诸如这些浮动元素之间的间隙，而不会在调整现有库的大小时出现延迟。

**加长版：**据我所知，有两个主要的库用于创建紧密结合的元素墙；[砌体](http://masonry.desandro.com/)和[同位素](http://isotope.metafizzy.co/)。

然而，除了可疑的相似网站之外，这两个库在使用流体/响应元素调整视口大小时都有相同的奇怪之处。每个砌体元素首先单独调整大小（创建更大的排水沟），然后在一个节拍之后重新排列为新形式。[在此处](http://masonry.desandro.com/demos/fluid.html)或[此处](http://isotope.metafizzy.co/demos/fluid-responsive.html)查看。

看来我是唯一一个认为这很丑陋的人。

考虑到以百分比设置的元素宽度和排水沟，如何实现相同的砌体效果，但具有更多“原生”外观调整大小（即没有延迟）？

这是我现在拥有的 CSS：

```
#wrapper {
    width: 100%;
    overflow: hidden;
}

#wrapper > div {
    width: 46%;
    margin: 0 2% 15px;
    float: left;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T09:23:31.460

## [http://jsfiddle.net/UTB5C/3/](http://jsfiddle.net/UTB5C/3/)

调整窗口大小后砌体选定元素的结果有点有趣，所以我在窗口上添加了一个调整大小事件，以便在调整窗口大小时重新加载

```
$(function () {

    $('#wrapper').masonry({
        itemSelector: 'div',
        isResizable: true,
        gutterWidth: 5
    });
    $(window).on("resize", function () {
            $('#wrapper').masonry('reload')
    });

}); 
```

# windows-8 - Windows 8 纯动态磁贴应用可能吗？

> ID：14451743
> 
> 赞同：1
> 
> 时间：2013-01-22T04:46:19.927
> 
> 标签：windows-8, microsoft-metro

是否可以在 Windows 8 中制作纯动态磁贴应用程序？也就是app的唯一目的就是在磁贴上显示信息，点击的时候什么都不做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T05:32:56.823

不，**只有**动态磁贴的应用程序是不可能的。当用户点击/点击动态磁贴时，将启动相关的 Windows 应用商店应用程序。

# .net - 禁用“应用程序已停止工作”窗口

> ID：14451755
> 
> 赞同：5
> 
> 时间：2013-01-22T04:47:54.480
> 
> 标签：.net, windows, wcf, windows-server-2008, crash-reports

我们有一个 .NET WCF 服务，理想情况下应该是 100% 正常运行时间。但有时我们的应用程序中会出现由 3rd 方数据库连接组件引起的内存泄漏问题。我们将 nnCron 配置为监视进程是否存在，并且当该服务的进程退出时，它应该再次启动它。

但是当应用程序崩溃时，窗口会弹出一个嘈杂的窗口，通知该应用程序已经崩溃。

这里是：

![在此处输入图像描述](../Images/77bbffde0c013e9f43f93e4224d2871b.png)

只有当我们单击愚蠢的“关闭程序”按钮时，该过程才真正从系统中消失。并且只有在 nnCron 重新启动服务之后。我们不想监视此窗口的出现，只是想摆脱它以使 nnCron 成功工作。

那么我们如何禁用这些窗口呢？

操作系统是 Windows server 2008 r2 Standard。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-09-19T15:27:44.850

我知道这是一个老问题，但我遇到了同样的问题并找到了解决方案。

在应用程序开始时调用以下命令：

```
SetErrorMode( SEM_FAILCRITICALERRORS | SEM_NOGPFAULTERRORBOX ); 
```

我已经用一个非常简单的测试应用程序尝试了它，它试图取消引用一个空指针。如果没有上述行，我的测试应用程序将显示“...已停止工作对话框”。有了上面的代码，应用程序就安静地死掉了。

参考：

*   [对话框过滤器 Windows Embedded Standard 7](http://social.msdn.microsoft.com/Forums/en-US/7d74bb75-29de-4153-8a2e-0a2b5905808d/dialog-filter-windows-embedded-standard-7)
*   [MSDN：SetErrorMode 函数](http://msdn.microsoft.com/en-us/library/windows/desktop/ms680621%28v=vs.85%29.aspx)
*   [pinvoke.net：设置错误模式](http://www.pinvoke.net/default.aspx/kernel32.seterrormode)

编辑：这是在不修改代码的情况下在系统范围内禁用该对话框的选项。创建以下注册表值作为 REG_DWORD 并将值设置为 1：

```
HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Windows\Windows Error Reporting\DontShowUI 
```

参考：[WER 设置](http://msdn.microsoft.com/en-us/library/bb513638%28VS.85%29.aspx)

# java - 语法错误 setOnClickListener

> ID：14451760
> 
> 赞同：-5
> 
> 时间：2013-01-22T04:48:36.503
> 
> 标签：java, android, eclipse

我正在阅读一本 java 练习书，并陷入了这个语法错误。我已经搜索了 onSetClickListener 语法错误并且不认为我在重复问题。Eclipse 说“令牌“setOnClickListener”上的语法错误，此令牌后应有标识符”。谢谢你的帮助！

```
package fifth.example.eventhandling;

import android.os.Bundle;
import android.app.Activity;
import android.view.Menu;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.TextView;

public class MainActivity extends Activity implements OnClickListener{
    Button button = (Button)findViewById(R.id.button1);
    button.setOnClickListener(this);  <<ERROR HERE

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.activity_main, menu);
        return true;
    }

    @Override
    public void onClick(View arg0) {
        TextView text = (TextView)findViewById(R.id.textmessage);
        text.setText("BUTTON HAS BEEN CLICKED. EVENT PROCESSED.");

    }

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-22T04:49:57.040

一个问题是：您在代码中的按钮相关代码应该在里面`onCreate()`和之后`setContentView...`

```
 Button button = (Button)findViewById(R.id.button1);
    button.setOnClickListener(this);  <<ERROR HERE

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
    } 
```

应该：

public class MainActivity extends Activity implements OnClickListener{ Button button;//声明按钮听

```
 @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        Button button = (Button)findViewById(R.id.button1);
       button.setOnClickListener(this);  <<ERROR HERE

    } 
```

}

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-22T04:53:12.003

目前，您正在尝试在为 Activity 设置布局之前初始化按钮。在 as之后在 Activity 的 onCreate 中移动按钮初始化 `setContentView` ：

```
public class MainActivity extends Activity implements OnClickListener{
    Button button ; //<<< declare  button here

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

       button = (Button)findViewById(R.id.button1);  //<<< initilze here
       button.setOnClickListener(this);   
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-22T04:55:42.610

你的代码应该是这样的。

```
public class MainActivity extends Activity implements OnClickListener{

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

Button button = (Button)findViewById(R.id.button1);
button.setOnClickListener(this);  <<ERROR HERE
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    // Inflate the menu; this adds items to the action bar if it is present.
    getMenuInflater().inflate(R.menu.activity_main, menu);
    return true;
}

@Override
public void onClick(View arg0) {
    TextView text = (TextView)findViewById(R.id.textmessage);
    text.setText("BUTTON HAS BEEN CLICKED. EVENT PROCESSED.");

} 
```

# mysql - Mysql加入多个表排除一些记录

> ID：14451764
> 
> 赞同：3
> 
> 时间：2013-01-22T04:49:01.143
> 
> 标签：mysql, join, multiple-tables, records

我在 MySQL 方面不是很好，所以需要一些帮助。我有三个表作者 (author_id, name), book (book_id, name), publisher(id, author_id, book_id)

我只想获取那些仅在 rdbms 上撰写/出版书籍的作者。

我试过：

```
SELECT a.author_id, a.name, b.name as bookname
FROM author a
LEFT JOIN publisher p ON p.author_id = a.author_id
INNER JOIN book b ON b.book_id = p.book_id ANd b.name='rdbms' 
```

这给了我所有写过关于 rdbms 的书的作者以及其他写过一些其他主题的书的作者，所以我想排除他们。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T04:50:48.037

试试这个

```
SELECT a.author_id, a.name, b.name as bookname
FROM author a
LEFT JOIN publisher p ON p.author_id = a.author_id
INNER JOIN book b ON b.book_id = p.book_id
group by a.author_id
HAVING count(p.book_id) = 1 AND bookname='rdbms' 
```

# java - java文件可以变成可执行文件吗？

> ID：14451765
> 
> 赞同：-2
> 
> 时间：2013-01-22T04:49:03.260
> 
> 标签：java, xml, exe

我被要求创建一个 java 文件、一个 build.xml 文件并将其保存在同一个文件夹中。当我尝试使用 Gmail 发送文件夹时，它显示您正在尝试发送可执行文件！为什么java和xml文件放在一起就被认为是可执行的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T04:53:58.903

这似乎是[围绕](http://productforums.google.com/forum/#!searchin/gmail/not%2420executable%2420file%2420executable/gmail/l-4ndhm9N74/PQXfR_CN9hQJ)(3) [Gmail 帮助论坛的](http://productforums.google.com/forum/#!topic/gmail/lhSDrXHO5aU)[常见](http://productforums.google.com/forum/#!category-topic/gmail/composing-and-sending-messages/i2s1fo80VaU)(1)[错误](http://productforums.google.com/forum/#!searchin/gmail/not%2420executable%2420file%2420executable/gmail/AfhXTIMWoww/915lXQlOUMYJ)(2) 。(4) 尝试将文件移动到不同的目录，然后再次附加。

# flash - 如何在 NPAPI 插件中停止媒体缓冲

> ID：14451769
> 
> 赞同：0
> 
> 时间：2013-01-22T04:49:27.630
> 
> 标签：flash, npapi

我想停止在我的 NPAPI 插件中缓冲媒体数据。我的插件是在 Adob​​e flash NPAPI 插件之上编写的包装器。我将调用 Adob​​e NPAPI 插件，以便它停止缓冲媒体内容。

提前谢谢了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T18:56:07.477

除非您了解 Adob​​e flash 的内部实现细节或您通常可以从 javascript 调用的某些 flash API 来执行此操作，否则您不能。这不是 NPAPI 控制的。

如果您使用自己的特殊 npapi 接口自己加载 flash，那么*可能*会干扰它正在执行的系统 api 调用，或者他们可能正在使用 NPN_GetUrl 和相关方法进行内容加载，但无论如何这将是脆弱的并且未来可能会破裂。

# grails - 未找到模块：org.grails.plugins#cloud-support;[1.0.7,)

> ID：14451770
> 
> 赞同：0
> 
> 时间：2013-01-22T04:49:41.893
> 
> 标签：grails, plugins, dependencies

我正在尝试恢复一个旧的 Grails 项目（我离开时是 2.0.4），但由于以下依赖问题，我无法开始任何工作。任何人都可以提供帮助吗？

```
 Downloading: grails-cloud-support-1.0.8.zip.sha1
 :: problems summary ::
 :::: WARNINGS
    module not found: org.grails.plugins#cloud-support;[1.0.7,) 
```

也许更多信息：

```
 | Downloading: grails-test-2.1.1.jar
 :: problems summary ::
 :::: WARNINGS
    module not found: org.grails.plugins#cloud-support;[1.0.7,)
==== grailsPlugins: tried
  -- artifact org.grails.plugins#cloud-support;[1.0.7,)!cloud-support.zip: 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T17:33:16.057

我最终只是重新创建了项目并添加了新插件。我有足够的旧东西需要被淘汰，这是一个可行的选择。

我相信上述评论会有所帮助，但我无法选择它作为答案。

# .htaccess - htaccess 重定向 GET 变量而不接触 css 链接

> ID：14451771
> 
> 赞同：0
> 
> 时间：2013-01-22T04:49:49.380
> 
> 标签：.htaccess, mod-rewrite, redirect, get

好吧，我已经在 stackoverflow 上阅读了 htaccess 指南和问题的页面和更多页面，但我*仍然*没有找到这个问题的答案。

我希望将 URL www.domain.com/profile/1 重定向到 www.domain.com/profile.php?id=1，并将指向 www.domain.com/profile/ranisalt 的 sabe 重定向到 www。 domain.com/profile.php?seo=ranisalt

**我正在使用这个重写规则，它在重定向**方面一直很好：

```
Options +FollowSymlinks
RewriteEngine on
RewriteRule ^profile/([0-9]+)/ profile.php?id=$1 [NC,QSA,L]
(there is more, but not relevant) 
```

问题是，CSS 在文件夹 css/ 中，如果我通过 profile.php?id=1 直接访问它会正确加载（www.domain.com/css/style.css），但是当我访问掩码时，它尝试在 www.domain.com/profile/1/css/style.css 中查找 css，但未找到。

我一直在使用它作为临时修复

```
RewriteRule ^(.*)/(css|js)/(.*).(css|js)$ css/$3.$4 [L]
RewriteRule ^(.*)/img/(.*).(jpg|png)$ img/$2.$3 [L] 
```

但它看起来并不整洁和漂亮:(

我怎样才能让它很好地正确加载 CSS？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T05:48:58.430

您的相对 URI 基础已更改，因此当浏览器加载类似 的 URL 时`www.domain.com/profile/ranisalt`，指向 css 等内容的相对链接将`/profile/`附加到 URI 的前面（因此转为`www.domain.com/profile/css/some.css`）。在由 生成的 HTML 中`profile.php`，您需要通过将此标记添加到页面标题来添加 URI 基：

```
<base href="/"> 
```

# android - 根据倾斜角度旋转opencv中的图像......！

> ID：14451774
> 
> 赞同：5
> 
> 时间：2013-01-22T04:50:14.100
> 
> 标签：android, opencv

需要帮助..考虑以下两个链接
[1=> 寻找倾斜角](http://felix.abecassis.me/2011/09/opencv-detect-skew-angle/)

[2=>根据倾斜角度旋转图像](http://felix.abecassis.me/2011/10/opencv-rotation-deskewing/)

我也想做同样的事情，并且此链接上给出的代码效果很好。但问题是，请参阅这些图像中显示的文本，此代码仅适用于***对齐良好的文本***（如给定链接上的图像中显示的那样），***但当您的文本分散形式时，它会失败***。请告诉我如何处理包含分散形式文本的图像..？提前致谢..！！[这里的主要挑战是找到正确的倾斜角度..]

# html - 如何将图像图案和颜色渐变设置为背景

> ID：14451779
> 
> 赞同：1
> 
> 时间：2013-01-22T04:50:53.513
> 
> 标签：html, css, background, background-image

我看到现代网站将颜色渐变+图案作为页面背景。[您可以在此处查看](http://twitter.github.com/bootstrap/index.html)twitter 引导站点的“jumbotron”类 。

```
.jumbotron {
    position: relative;
    padding: 40px 0;
    color: #fff;
    text-align: center;
    text-shadow: 0 1px 3px rgba(0,0,0,.4), 0 0 30px rgba(0,0,0,.075);
    background: #020031;
    background: -moz-linear-gradient(45deg, #020031 0%, #6d3353 100%);
    background: -webkit-gradient(linear, left bottom, right top, color-stop(0%,#020031), color-stop(100%,#6d3353));
    background: -webkit-linear-gradient(45deg, #020031 0%,#6d3353 100%);
    background: -o-linear-gradient(45deg, #020031 0%,#6d3353 100%);
    background: -ms-linear-gradient(45deg, #020031 0%,#6d3353 100%);
    background: linear-gradient(45deg, #020031 0%,#6d3353 100%);
    filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#020031', endColorstr='#6d3353',GradientType=1 );
    -webkit-box-shadow: inset 0 3px 7px rgba(0,0,0,.2), inset 0 -3px 7px rgba(0,0,0,.2);
    -moz-box-shadow: inset 0 3px 7px rgba(0,0,0,.2), inset 0 -3px 7px rgba(0,0,0,.2);
    box-shadow: inset 0 3px 7px rgba(0,0,0,.2), inset 0 -3px 7px rgba(0,0,0,.2);
}

.jumbotron::after {
    content: '';
    display: block;
    position: relative; /* changed by me */
    top: 0;
    right: 0;
    bottom: 0;
    left: 0;
    background: url(../img/bs-docs-masthead-pattern.png) repeat center center;
    opacity: .4;
} 
```

我需要的是创建，比如上面的 10 个类，每个类都指向不同的图像模式。我应该能够使用这些 CSS 类为画廊中的每个缩略图提供 10 种不同的模式。

当我将 jumbotron 类设置为任何缩略图时，它会拉伸整个页面。

这可能吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-22T05:03:29.617

您只需要设置 a`width`和 a `height`：

```
.jumbotron {
    width: 100px;
    height: 100px;
    /* the rest of your CSS properties */
} 
```

另外，不要忘记`padding`根据需要进行调整。

# asp.net - asp.net中的kerberos

> ID：14451780
> 
> 赞同：0
> 
> 时间：2013-01-22T04:51:06.220
> 
> 标签：asp.net, iis, kerberos

谁能让我知道 kerberos 如何与 IIS 一起工作，我可以看到在 IIS 中启用“使用 Kerberos”的选项，但不确定它是如何工作的。如何验证连接是否使用 kerberos，有什么工具吗？

基本上我需要在 asp.net 中使用 kerberos 身份验证对用户进行身份验证。阅读一些文章我可以看到windows域控制器本身使用kerberos身份验证，所以如果我在IIS中启用kerberos，它真的使用kerberos吗？

请指导我。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-22T04:58:39.077

一个很好的开始是使用 IIS 团队几年前提供的名为 DelegConfig [http://blogs.iis.net/bretb/archive/2008/03/27/How-to-Use-DelegConfig.aspx](http://blogs.iis.net/bretb/archive/2008/03/27/How-to-Use-DelegConfig.aspx)的工具，这将引导您完成将 Kerberos 与 IIS 结合使用的所有必要步骤。

Kerberos 通过对某些“SPN”（服务主体名称）使用约束委派来帮助您管理网络跃点 - [http://technet.microsoft.com/en-us/library/cc961723.aspx](http://technet.microsoft.com/en-us/library/cc961723.aspx)

我发现了解该工具以及 SPN 和约束委派是了解 Kerberos 如何与 IIS 一起工作的最有用的东西。在我看来，边做边学是巩固知识的最有效方法。

# r - 如何在R中绘制线性回归？

> ID：14451782
> 
> 赞同：9
> 
> 时间：2013-01-22T04:51:29.387
> 
> 标签：r, linear-regression

我想在 R 中做以下线性回归的例子

```
year<-rep(2008:2010,each=4)
quarter<-rep(1:4,3)
cpi<-c(162.2,164.6,166.5,166.0,166.4,167.0,168.6,169.5,170.0,172.0,173.3,174.0)
plot(cpi,xaxt="n",ylab="CPI",xlab="")
axis(1,labels=paste(year,quarter,sep="C"),at=1:12,las=3)
fit<-lm(cpi~year+quarter) 
```

我想绘制显示我处理的数据的线性回归的线。我尝试过：

```
abline(fit)
abline(fit$coefficients[[1]],c(fit$coefficients[[2]],fit$coefficients[[3]])) 
```

问题是我的公式是这样的：

```
y=a+b*year+c*quarter 
```

而不是更简单的东西，比如：

```
y=a+b*year 
```

那么我如何绘制显示线性回归的线呢？

可以用 abline 画线吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-22T05:27:39.970

您在寻找`predict`功能吗？

例如：使用`lines(predict(fit))`将给出：

![在此处输入图像描述](../Images/e7529c5dc560d6d09fe07c9303dfb836.png)

您还可以使用它来预测与计算系数对齐的未来数据。例如

```
# plot the existing data with space for the predicted line
plot(c(cpi,rep(NA,12)),xaxt="n",ylab="CPI",xlab="",ylim=c(162,190))

# plot the future predictions as a line using the next 3 year periods
lines(13:24,
      predict(
        fit,
        newdata=data.frame(year=rep(c(2011,2012,2013),each=4),quarter=rep(1:4,3))
             )
     )

year<-rep(2008:2013,each=4)
axis(1,labels=paste(year,quarter,sep="C"),at=1:24,las=3) 
```

![在此处输入图像描述](../Images/ae766c18067edab6d682682a419261eb.png)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-22T05:05:36.123

```
cpi<-c(162.2,164.6,166.5,166.0,166.4,167.0,168.6,169.5,170.0,172.0,173.3,174.0)
cpits <- ts(cpi, start=2008, frequency=4)
plot(decompose(cpits)) 
```

![在此处输入图像描述](../Images/2e7d49dfd17b051d19ca8ba14c8a98c2.png)

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-01-22T05:47:14.110

骗子。这些都是合理的解决方案，但它们并没有按照您的要求进行。现在你所要求的稍微凉快一点，完全不切实际，但可以使用`rgl`.

```
f <- function(x, y, coefs){
  z <- coefs[1] + coefs[2] * x + coefs[3] * y
  z
}

x <- seq(from=min(year), to=max(year), length.out=100)
y <- seq(from=min(quarter), to=max(quarter), length.out=100)

z <- outer(x, y, f, coefs=coef(fit)) 
```

现在魔法发生在哪里`rgl`：

```
library(rgl)

persp3d(x, y, z, col="lightblue") 
```

![在此处输入图像描述](../Images/e21456a1e10f5360281940a68dba70a7.png)

这里不公平，但它很漂亮，你可以移动它。

什么鬼，让我们添加你的原始点

```
points3d(year, quarter, cpi, size=5, col="red") 
```

![在此处输入图像描述](../Images/391b43bcc3776bb60deb2353aabd04ca.png)

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-01-22T05:58:09.373

错误在于您的数据格式。这是另一种选择：

```
year<-seq(from=2008,to=2010.75,by=.25)
cpi<-c(162.2,164.6,166.5,166.0,166.4,167.0,168.6,169.5,170.0,172.0,173.3,174.0)
df <- data.frame(year,cpi)
plot(df)+abline(lm(df$cpi~df$year)) 
```

![在此处输入图像描述](../Images/c5609e35f073596b609b2411f1757a50.png)

然后，您可以根据需要重新格式化轴标签。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-22T22:15:19.790

TeachingDemos 包中的`Predict.Plot`和`TkPredict`函数将绘制预测变量之一与以其他预测变量的值为条件的响应变量之间的关系。 `Predict.Plot`使查看来自不同条件的多条线变得相当简单，同时`TkPredict`允许您以交互方式更改所依据的值（并将生成`Predict.Plot`重新创建当前绘图的代码）。

这些函数对于多个预测变量的回归模型是通用的，但不如分解时间序列。

# php - PHP MySQL 两个查询 - Foreach

> ID：14451783
> 
> 赞同：0
> 
> 时间：2013-01-22T04:51:32.680
> 
> 标签：php, mysql, foreach

我有两张表，一张包含一天中所有可用的工作时间，另一张表包含有人说他们可用的时间。当我创建我的`<select>`表单字段时，我想自动选择该日期和时间的数据库中已经存在的`tutor_id`时间`tutor_ availability`。

```
 hours_list                                tutor_availability
----------------------               --------------------------------------       
  24hour   |   12hour                tutor_id | day | start_time | end_time
----------------------               --------------------------------------
  1000     |   10:00am                 27     | mon |   1000     |   1100
----------------------               --------------------------------------
  1030     |   10:30am
----------------------
  1100     |   11:00am
----------------------
  1130     |   11:30am
----------------------
//the list goes on 
```

我用`Left Join`'s 尝试了几个查询，但收效甚微。我在想我可以做两个单独的查询，但后来我遇到了如何在迭代结果时选择正确的选项字段的问题`hours_list`：

```
$hours = Select * FROM hours_list;
//next query
$available = Select day, start_time, end_time 
FROM tutor_availability WHERE tutorid = '27';

foreach ($hours as $option) { 
echo '<option value="' . $option['24hour'] . '"';
if ($available['start_time'] == $option['24hours'] && $available['day'] == 'mon') {   
echo 'selected'; }
//rest here 
```

但是，我不知道如何同时迭代两个 sql 结果以获得正确的结果。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T05:41:49.357

```
$hours  = array();
$avail  = array();
$query  = mysql_query("Select * FROM hours_list");

while($result = mysql_fetch_assoc($query)){
   $hours[]   = $result['24hour'] 
}

$available = mysql_query("Select day, start_time, end_time 
FROM tutor_availability WHERE tutorid = '27'");

while($res  = mysql_fetch_assoc($available)){
    $avail[] = $res['start_time'];
}

foreach($hours as $hour){
echo '<option value="' . $hour . '"';
if (in_array($hour, $avail)) {   
echo 'selected >'.$hour.' </option>';
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T06:14:05.887

如果您仅在这么小的范围内使用数据库，我认为无需触发 JOIN 查询。**但始终使用 mysqli_* 函数，因为 mysql_* 自 PHP 5.5.0 起已弃用。**（参考[这里](http://php.net/manual/en/function.mysql-query.php)）下面是所需的代码。

```
 //Connect to db
    $link =mysqli_connect("localhost", "root", "", "test");

    // Get all hours record as all are needed in dropdown
    $hours = mysqli_query($link, "SELECT * FROM hours_list");

    // Get desired tutor record as it is to be shown as selected
    $tut=mysqli_query($link, "SELECT * FROM tutor_availability WHERE tut_id=27");
    $tut1= mysqli_fetch_assoc($tut);

    //echo dropdown script
    echo "<select name='testSelect'>";
    while($row=mysqli_fetch_assoc($hours)){

        echo '<option value="' . $row['twentyFourHour']. '" ';
        if ($tut1['start_time'] == $row['twentyFourHour'] && $tut1['day'] == 'mon') {
            //show this option as selected.
            echo ' selected ';
        }
        echo ">".$row['twelveHour']."</option>";
    }
    echo "</select>"; 
```

# ruby-on-rails - Rails 中的简单路由

> ID：14451785
> 
> 赞同：0
> 
> 时间：2013-01-22T04:51:50.733
> 
> 标签：ruby-on-rails, routing, link-to

我正在尝试从用户显示视图中销毁链接。

所以从`/users/1`,

我想访问控制器中的`destroy`操作。`teacher_student_links`

第一次尝试：

```
<%= link_to 'destroy', :controller => "teacher_student_links", :action => "destroy", :id => @user.id %> 
```

这失败了，因为它路由到指定控制器中的“显示”操作。**所以第一个问题：为什么它指向“展示”动作而不是“破坏”？**我试图用括号将上述内容括起来，但也得到了一个毫无意义的错误。

第二次尝试：

在*config/routes.rb*

```
match '/bye_teacher' => 'teacher_student_links#destroy' 
```

*看法*

```
<%= link_to 'destroy', '/bye_teacher', :user_id => @user.id %> 
```

也试过，

```
<%= link_to 'destroy', '/bye_teacher', :user_id => @user %> 
```

这两行都正确地指向了指定的控制器和动作，但是参数没有传入。（找不到用户没有ID错误）

第二个问题：**在这种情况下，我是否以错误的方式传递变量？**

问这两个问题有点尴尬，但我想知道这些问题背后的原因。

更新：

```
<%= link_to 'destroy', teacher_student_links_path(:user_id => @user), :method => :delete %> 
```

给

没有路线匹配 [DELETE] "/teacher_student_links"

```
<%= link_to 'destroy', teacher_student_links_path(@user), :method => :delete %> 
```

给

```
No route matches [DELETE] "/teacher_student_links.1" 
```

......所以我跑了

`rake routes`我得到了

`DELETE /teacher_student_links/:id(.:format) teacher_student_links#destroy`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T04:57:52.913

```
match "/bye_teacher/:id" => "teacher_student_links#destroy"

<%= link_to 'destroy', teacher_student_links_path(:id), 
:confirm => 'Are you sure you want to destroy this teacher?', :method => :delete %> 
```

这也应该在视图中起作用：

```
<%= link_to 'Destroy', :action => 'destroy', :id => @user.id, :method => :delete %> 
```

[从外到内的 Rails 路由](http://guides.rubyonrails.org/routing.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T11:16:55.820

你给出了错误的路径

```
<%= link_to 'destroy', teacher_student_links_path(@user), :method => :delete %> 
```

应该是这样的：

```
<%= link_to 'destroy', teacher_student_link_path(@user), :method => :delete %> 
```

当您运行“rake routes”时，第一列会告诉您路径

# cakephp - 在 cakephp 中使用脚手架是好的做法吗？

> ID：14451786
> 
> 赞同：4
> 
> 时间：2013-01-22T04:51:55.457
> 
> 标签：cakephp

我正在使用 CakePHP。我在里面了解了脚手架的概念，这似乎是一个很好的概念。但我的问题是，**使用脚手架进行生产级应用程序开发是否是一种好习惯，**因为官方 CakePHP 文档说它*并不意味着完全灵活，它只是一种临时起床的方式。*.

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-22T05:03:50.043

文档说它不够灵活。但是它仍然有效，当调试级别为 0 时也是如此。

脚手架是自动 CRUD 创建。cakephp 在烘焙时生成 CRUD。

Scaffold 的优势在于它适用于早期开发阶段。

更多阅读

[http://www.indywebshop.com/bestpractices/2007/06/13/early-impressions-of-cakephp/](http://www.indywebshop.com/bestpractices/2007/06/13/early-impressions-of-cakephp/)

但我建议不要使用它，因为在任何阶段您都需要编写自己的代码。但是对于不经常更改的应用程序，它确实很有帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-10-26T09:41:29.900

我想说如果你想快速破解一个网络应用程序，它对 MVP 很有用。

但是，如果您想要生产级最终产品，请拒绝

# windows-phone-8 - 在 LongListSelector 中绑定 Item 的背景颜色

> ID：14451788
> 
> 赞同：1
> 
> 时间：2013-01-22T04:51:56.390
> 
> 标签：windows-phone-8, longlistselector

在我的**Windows Phone 8**应用程序中，我使用**LongListSelector**来显示分组数据。我想使用值转换器将 ItemTemplate 中**项目的背景颜色绑定到****SelectedItem 。**

但是，我无法弄清楚如何访问值转换器中的选定项目以返回正确的背景颜色。在 LongListSelector 中设置所选项目的颜色的正确方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T09:57:32.200

我更喜欢在代码端转换值，将转换后的值传递给 XAML。

您可以通过 yourLongListSelector.SelectedItem.DataContext 访问选定的项目数据对象

# prolog - 如何在prolog中检查两个顶点是否连接？

> ID：14451794
> 
> 赞同：3
> 
> 时间：2013-01-22T04:53:30.803
> 
> 标签：prolog, graph-theory

这里我的问题是我想检查两个节点是否连接。

我的知识库是，

```
edge(a,b):-!.
edge(b,a):-!.
edge(a,e):-!.
edge(e,a):-!.
edge(b,c):-!.
edge(c,b):-!.
edge(b,d):-!.
edge(d,b):-!.
edge(c,e):-!.
edge(e,c):-!.
edge(d,e):-!.
edge(e,d):-!.
edge(a,f):-!.
edge(f,a):-!.

isConnected(X,X):-!.
isConnected(X,Y):-edge(X,Y),!.
isConnected(X,Z):-not(edge(X,Y)),edge(X,Y),isConnected(Y,Z),!.
isConnected(X,Z):not(edge(X,Y)),edge(X,Z),not(isConnected(Y,Z)),isConnected(Z,Y),!. 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T16:36:28.600

哇那里。这是很多削减。剪切有时在 Prolog 中有助于修剪不必要的答案，但是当你有这样的事实时：

```
edge(a, b). 
```

把它写成这样绝对没有任何收获：

```
edge(a, b) :- !. 
```

毕竟，那里没有选择点，因为那里没有变量，也没有替代解决方案。所以首先，让我们通过删除所有这些削减来修正你的事实。

接下来让我们看看 isConnected 是怎么说的。让我们用英语大声朗读它，看看它是否有意义。

1.  X 连接到 X。
2.  如果从 X 到 Y 有一条边，则 X 连接到 Y。
3.  如果从 X 到 Y 没有边，则 X 连接到 Z，但是从 X 到 Y 有边并且 Y 连接到 Z。 (???)
4.  如果从 X 到 Y 没有边，则 X 连接到 Z，但从 X 到 Z 有边，并且 Y 不连接到 Z 但 Z 连接到 Y。（？？？）

前两个似乎很合理。第三个似乎马上就自相矛盾了。怎么可能`not(edge(X, Y))`同时为真`edge(X, Y)`？请记住，Prolog 中的逗号表示*and*，而不仅仅是*then*。该子句的其余部分没有意义，因为这两个条件不可能同时为真。可能你的意思是这样的：如果从 X 到 Y 有一条边并且 Y 连接到 Z，则 X 连接到 Z。在 Prolog 中看起来像这样：

```
isConnected(X, Z) :- edge(X, Y), isConnected(Y, Z). 
```

从逻辑上讲，这当然是正确的，但是对于任何类型的复杂图来说，计算起来都会非常昂贵，因为检查 X 是否连接到 Z 可能意味着检查所有相同节点的 Y 是否连接到 Z。

您的第四个子句有一个错字，`:`应该是`:-`. 更重要的是，您似乎正试图在此处补偿边缘的方向性。一个更好的地方是在第 2 步附近，提供两种情况：

```
isConnected(X, Y) :- edge(X, Y) ; edge(Y, X). 
```

根据您的事实数据库，我不确定您是否真的是这个意思；您已经复制了所有事实以说明两个方向。如果事实数据库表示有向图，这可能是必要的，并且规则不应尝试反转节点。如果它代表一个无向图，那么您的谓词应该只使用这样的规则来考虑它，检查双方，并且您应该只列出每条边一次。两种方式都这样做，你是在告诉 Prolog 做一堆不必要的工作，因为它首先检查`edge(a, b)`，然后规则将其反转为`edge(b, a)`，然后移动到下一个事实`edge(b, a)`，然后规则将其反转为`edge(a, b)`，实际上检查了所有内容两次.

房间里的大象是，即使你成功地把它变成了问题的合乎逻辑的解决方案，它的效率也会低得可怕。有一些算法可以确定两件事情是否相关，这些算法可以跟踪已经看到的和没有看到的，我认为你最好实现其中之一。

# android - 滚动时Listview突出显示移动

> ID：14451798
> 
> 赞同：1
> 
> 时间：2013-01-22T04:53:44.053
> 
> 标签：android, listview

这是活动

```
public void onListItemClick(ListView parent, View v,int position, long id) {
        String str;

        if (nRowSelected>=0) {
            View row=parent.getChildAt(nRowSelected);
            if (row!=null) {
                row.setBackgroundColor(0xFFFFFFFF);
            }
        }
        nRowSelected=position;

        v.setBackgroundColor(Color.GRAY);
    }//onListItemClick 
```

这是我的列表视图

```
 <ListView
            android:id="@android:id/list"
            android:layout_width="match_parent"
            android:layout_height="425dp" 
            >
        </ListView> 
```

我需要突出显示单选。我选择/关注第 1 行。但是当我滚动时，焦点不止一个。第 8 行的行焦点也是

这是捕获

![图 1](../Images/2b83413d1dba71ae29d1d262a83920aa.png)

和

![图片2](../Images/aa6627824b299c88422f977396a54b8f.png)

如何解决？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T04:55:55.243

您正在与适配器回收行布局的方式作斗争...您需要扩展当前的适配器并覆盖`getView()`以突出显示正确的行（并且只有正确的行）。

在最基本的层面上，它看起来像：

```
public View getView(...) {
    View view = super.getView(...);

    if(position == mRowSelected) {
        view.setBackgroundColor(Color.GRAY);
    }
    else { // You must use a default case to "un-highlight" the reused layout
        view.setBackgroundColor(0xFFFFFFFF);
    }
    return view;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-22T05:00:07.407

将此添加到 xml：

```
android:cacheColorHint="#00000000" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-22T05:06:05.690

用以下代码替换您的`xml`代码::

```
<ListView
   android:id="@android:id/list"
   android:layout_width="match_parent"
   android:layout_height="425dp" 
   android:cacheColorHint="#00000000">
</ListView> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-22T05:52:01.777

嗨，请参阅下面的代码可能会有所帮助，它是单选选择示例，请按照此操作很好。

```
public class List17 extends ListActivity {

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    // Use the built-in layout for showing a list item with a single
    // line of text whose background is changes when activated.
    setListAdapter(new ArrayAdapter<String>(this,
            android.R.layout.simple_list_item_activated_1, mStrings));
    getListView().setTextFilterEnabled(true);

    // Tell the list view to show one checked/activated item at a time.
    getListView().setChoiceMode(ListView.CHOICE_MODE_SINGLE);

    // Start with first item activated.
    // Make the newly clicked item the currently selected one.
    getListView().setItemChecked(0, true);
}

@Override
protected void onListItemClick(ListView l, View v, int position, long id) {
    // Make the newly clicked item the currently selected one.
    getListView().setItemChecked(position, true);
}

private String[] mStrings = Cheeses.sCheeseStrings; 
```

}

这是列表活动，您有列表视图或列表活动并不重要。

# ruby-on-rails - 为什么我会收到“未知验证器：'MessageValidator'”？

> ID：14451800
> 
> 赞同：30
> 
> 时间：2013-01-22T04:53:55.930
> 
> 标签：ruby-on-rails, ruby-on-rails-3, validation

我收到这个错误

> 未知验证器：'MessageValidator'

我不知道为什么我会得到那个。
我的代码有什么问题？

```
validates :title,   
    :presence => true,   
    :uniqueness => true,   
    :length => { :maximum => 100 },
    :message => "Must be input and has to be less than 100 characters, and unique." 
```

* * *

## 回答 #1

> 赞同：61
> 
> 时间：2013-01-22T05:52:12.140

尝试：

```
validates :title, 
          :presence => {:message => "Title can't be blank." },
          :uniqueness => {:message => "Title already exists."},
          :length => { :maximum => 100, :message => "Must be less than 100 characters"} 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-01-22T04:59:43.330

我假设您希望消息在长度验证失败时出现。您应该在该哈希中包含消息，例如：

```
validates :title,   
    :presence => true,   
    :uniqueness => true,   
    :length => { :maximum => 100, :message => "Must be less than 100 characters"} 
```

# php - PHP值=数组键+数组键+数组键

> ID：14451804
> 
> 赞同：-8
> 
> 时间：2013-01-22T04:54:39.553
> 
> 标签：php, arrays, loops, for-loop, multidimensional-array

我有 3 个数组

阵列 1：

```
 Array ( [0] => 0 [1] => 256 [2] => 512 [3] => 768 [4] => 1024 [5] => 1280 [6] => 1536 [7] => 1792 [8] => 2048 [9] => 2304 [10] => 2560 [11] => 2816 [12] => 3072 [13] => 3328 [14] => 3584 [15] => 3840 [16] => 4096 [17] => 4352 [18] => 4608 [19] => 4864 [20] => 5120 [21] => 5376 [22] => 5632 [23] => 5888 ) 
```

阵列 2：

```
Array ( [0] => 0 [1] => 65536 [2] => 131072 [3] => 196608 [4] => 262144 [5] => 327680 [6] => 393216 [7] => 458752 [8] => 524288 [9] => 589824 [10] => 655360 [11] => 720896 [12] => 786432 [13] => 851968 [14] => 917504 [15] => 983040 [16] => 1048576 [17] => 1114112 [18] => 1179648 [19] => 1245184 [20] => 1310720 [21] => 1376256 [22] => 1441792 [23] => 1507328 [24] => 1572864 [25] => 1638400 [26] => 1703936 [27] => 1769472 [28] => 1835008 [29] => 1900544 [30] => 1966080 [31] => 2031616 ) 
```

阵列 3：

```
Array ( [0] => 0 [1] => 1 [2] => 2 [3] => 3 [4] => 4 [5] => 5 [6] => 6 [7] => 7 [8] => 8 [9] => 9 [10] => 10 [11] => 11 [12] => 12 [13] => 13 [14] => 14 [15] => 15 [16] => 16 [17] => 17 [18] => 18 [19] => 19 [20] => 20 [21] => 21 [22] => 22 [23] => 23 [24] => 24 [25] => 25 [26] => 26 [27] => 27 [28] => 28 [29] => 29 [30] => 30 [31] => 31 ) 
```

给定一个我知道的数字 X 是`a1[i] + a2[j] + a3[k]`如何计算的`i`，`j`并且`k`？

例子：

1.  X = 458752 => `i=0`, `j=7`,`k=0`即 458752 = 0 + 458752 + 0
2.  X = 131586 => `i=2`, `j=2`,`k=2`即 131586 = 256 + 131072 + 2
3.  X = 65793 => `i=1`, `j=1`,`k=1`即 65793 = 256 + 65536 + 1

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T04:57:37.450

这

```
$value = $array1[0]+$array1[7]+$array1[0] 
```

应该管用。

数组索引从 0 开始，从`$array[1]`技术上讲，数组中的第二个元素也是如此。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T11:23:50.053

怎么样：

```
foreach(array(458752, 131586, 65793) as $x) {
    $j = intval($x / 65536);
    $x = $x % 65536;
    $i = intval($x / 256);
    $k = $x % 256;
    echo "x=$x, i=$i, j=$j, k=$k\n";
} 
```

**输出：**

```
x=0, i=0, j=7, k=0
x=514, i=2, j=2, k=2
x=257, i=1, j=1, k=1 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-22T05:05:59.890

首先，您尝试清楚地发布您的问题。

您的第一个数组计数与其他两个数组不匹配。因此，如果 3 个数组的数量必须相等，那么您可以轻松获得这些值。如果您需要自定义加法值，请对数组值进行硬编码并尝试加法。

方法 1：所有 3 个数组计数相同。

```
<?php
$first = Array (0 => 0, 1 => 256, 2 => 512, 3 => 768, 4 => 1024, 5 => 1280, 6 => 1536, 7 => 1792, 8 => 2048, 9 => 2304, 10 => 2560, 11 => 2816, 12 => 3072, 13 => 3328, 14 => 3584, 15 => 3840, 16 => 4096, 17 => 4352, 18 => 4608, 19 => 4864, 20 => 5120, 21 => 5376, 22 => 5632, 23 => 5888 );

$second =  Array (0 => 0, 1 => 65536, 2 => 131072, 3 => 196608, 4 => 262144, 5 => 327680, 6 => 393216, 7 => 458752, 8 => 524288, 9 => 589824, 10 => 655360, 11 => 720896, 12 => 786432, 13 => 851968, 14 => 917504, 15 => 983040, 16 => 1048576, 17 => 1114112, 18 => 1179648, 19 => 1245184, 20 => 1310720, 21 => 1376256, 22 => 1441792, 23 => 1507328);

$third = Array (0 => 0, 1 => 1, 2 => 2, 3 => 3, 4 => 4, 5 => 5, 6 => 6, 7 => 7, 8 => 8, 9 => 9, 10 => 10, 11 => 11, 12 => 12, 13 => 13, 14 => 14, 15 => 15, 16 => 16, 17 => 17, 18 => 18, 19 => 19, 20 => 20, 21 => 21, 22 => 22, 23 => 23);

$result = array();
foreach($first as $key => $values){
        echo '<br>'.$values.'+'.$second[$key].'+'.$third[$key];
    $result[] = $values+$second[$key]+$third[$key];
}

print_r($result);
?> 
```

方法二：（请避免使用此方法）

```
$first_result = $first[0]+$second[7]+$third[0];
$second_result = $first[2]+$second[2]+$third[2];
$third_result = $first[1]+$second[1]+$third[1]; 
```

# ruby-on-rails - 用户如何通过 rails 应用在 Twitter 上发帖？

> ID：14451807
> 
> 赞同：4
> 
> 时间：2013-01-22T04:54:47.093
> 
> 标签：ruby-on-rails, ruby-on-rails-3

**我想要什么**- rails 应用程序的用户可以通过该应用程序在他们的 Twitter 帐户上发帖

**到目前为止我所做的**- 我正在使用 Devise 和 Twitter gems，并在 /initializers/twitter.rb 文件中填写了所有 Twitter 详细信息

```
Twitter.configure do |config|
  config.consumer_key = ""
  config.consumer_secret = ""
  config.oauth_token = ""
  config.oauth_token_secret = ""
end 
```

现在我可以创建一个带有索引操作和视图的控制器“post_twitter”，但我不确定，如何与这个控制器/视图和 twitter 集成？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-22T05:10:44.067

在您的控制器中，您可以使用`Twitter`该类，这就是我所做的

```
def create
    @post = Post.new(params[:post])
    Twitter.update("I'm tweeting with @gem!")
    #code
end 
```

确保为 Twitter 应用启用 POST 权限，如果 Twitter 更新失败，它应该会给你一个错误消息。

# php - 仅使用 PHP 从数组中获取选定的列

> ID：14451811
> 
> 赞同：0
> 
> 时间：2013-01-22T04:55:02.227
> 
> 标签：php

我正在尝试使用 PHP 从 csv 中仅选择某些列。目前我正在使用：

```
$theData = array(
    array( 'col1', 'col2', 'col3', 'col4', 'col5' ),
    array( 'col1', 'col2', 'col3', 'col4', 'col5' ),
    array( 'col1', 'col2', 'col3', 'col4', 'col5' )
    );
$picked = '1, 3, 5';

$totalColumns = count( $theData[0] );
$columns = explode( ',', $picked );
foreach( $theData as $k => &$thisData ) {
    for( $x = 1; $x < $totalColumns + 1; $x++ ) {
        if( ! in_array( $x, $columns ) ) {
            unset( $thisData[$x - 1] );
        }
    }
} 
```

任何人都可以提出更好的解决方案吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-22T06:08:27.563

```
$picked  = array(1, 3, 5);
$theData = array();
if (($handle = fopen("test.csv", "r")) !== FALSE) {
    while (($data = fgetcsv($handle, 1000, ",")) !== FALSE) {
        $numCols = count($data);
        $row     = array();
        for($c=0; $c < $numCols; $c++)
            if(in_array($c, $picked))
                $row[] = $data[$c];
        $theData[] = $row;
    }
    fclose($handle);
} 
```

**编辑，根据 OP 请求**

在这里，我们将第一行的列名映射为用于选择这些列的整数，而不需要列的数字标识符。未经测试，但我想它已经接近了。

```
$names      = array('Heading 1', 'Heading 2', 'Heading 3');
$picked     = array();
$theData    = array();
$isFirstRow = true;
if (($handle = fopen("test.csv", "r")) !== FALSE) {
    while (($data = fgetcsv($handle, 1000, ",")) !== FALSE) {
        $numCols = count($data);
        $row     = array();

        // process the first row to select columns for extraction
        if($isFirstRow) {
            for($c=0; $c<$numCols; $c++)
                if(!in_array($data[$c], $names)
                    continue;
                else
                    $picked[] = $c;
            $isFirstRow = false;
        }

        // process remaining rows
        else {
            for($c=0; $c < $numCols; $c++)
                if(in_array($c, $picked))
                    $row[] = $data[$c];
            $theData[] = $row;
        }
    }
    fclose($handle);
} 
```

# java - 如何为 KeyValueTextInputFormat 使用整数输入键

> ID：14451814
> 
> 赞同：0
> 
> 时间：2013-01-22T04:55:25.607
> 
> 标签：java, hadoop, mapreduce

我正在尝试读取具有以下格式的行的文件。

100,1:2:3 200,10:20:30

假设输入总是数字，我试图通过将输入键和值分别设置为`IntWritable`和来读取文件`Text`。但是当我运行它时，我收到以下错误：

`java.lang.ClassCastException: org.apache.hadoop.io.Text cannot be cast to org.apache.hadoop.io.IntWritable`

现在，虽然我明白这意味着什么，但我无法弄清楚如何将密钥读取为整数。如果我也读取密钥，代码运行`Text`良好。如果我错过了配置，我已经检查了代码中的任何地方，但这对我来说似乎很好。

```
conf.set("mapred.textoutputformat.separator", "|");

conf.setInputFormatClass(KeyValueTextInputFormat.class);
conf.setOutputFormatClass(TextOutputFormat.class);

conf.setOutputKeyClass(IntWritable.class);
conf.setOutputValueClass(Text.class); 
```

我还检查了映射器类和方法（没有减速器）。是否`KeyValueTextInputFormat`可以将密钥仅作为文本读取？我无法理解我做错了什么。任何帮助将不胜感激。

谢谢，
EG

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T05:35:58.050

看[源头](http://svn.apache.org/viewvc/hadoop/common/trunk/hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-core/src/main/java/org/apache/hadoop/mapreduce/lib/input/CombineFileInputFormat.java?view=markup)，`KeyValueTextInputFormat`它延伸自`FileInputFormat<Text, Text>`。这意味着您输入的 key 和 value 都应该是`Text`.

您可以修复实现您自己的问题，您可以按照[此处](http://svn.apache.org/viewvc/hadoop/common/trunk/hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-core/src/main/java/org/apache/hadoop/mapreduce/lib/input/KeyValueLineRecordReader.java?view=markup)描述的`RecordReader`方式进行建模，但可以扩展并相应地修改代码。`KeyValueLineRecordReder``RecordReader<IntWritable, Text>`

当你有了你的`RecordReader`，你可以创建你自己的`InputFormat`并使用你的新的`RecordReader`，然后在你的主代码中你只需要`InputFormat`像这样设置你的新的：

```
conf.setInputFormatClass(KeyValueMyInputFormat.class); 
```

如果您真的担心性能，我会推荐的另一种方法是您可以使用`SequenceFileInputFormat`. 这涉及将您的输入存储为 SequenceFiles，这意味着它将直接采用二进制格式。这避免了在您的情况下需要解析每一行的开销。您可以像这样使用这种格式：

```
conf.setInputFormatClass(SequenceFileInputFormat.class); 
```

# php - 如何在 Perl 中缓存和清除输出缓冲区？

> ID：14451820
> 
> 赞同：2
> 
> 时间：2013-01-22T04:55:58.600
> 
> 标签：php, perl, syntax, porting, output-buffering

我有以下 PHP 代码打开输出缓冲区，包含一个文件，将其存储在一个变量中，并清除缓冲区：

```
ob_start(); 
include('test.html');
$input=ob_get_clean(); 
```

在 Perl 中等效的外观如何？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-22T05:19:28.447

`$| = 1;`将为当前选定的句柄打开禁用缓冲（`STDOUT`默认情况下）。换句话说，

```
$| = 1; 
```

在功能上等同于

```
use IO::Handle qw( );   # Not needed since 5.14.
select()->autoflush(1); 
```

这通常意味着

```
use IO::Handle qw( );   # Not needed since 5.14.
STDOUT->autoflush(1); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-22T05:00:14.393

特殊变量`$|`。当设置为非零时，每次写入或打印后是否刷新缓冲区

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-07-09T18:52:45.077

所以等价的将是：

```
# open a file handle try to get test.html
open(my $fh, "<", "test.html") ||
   die 'Could not open test.html: '.$!;
# return the currently selected filehandle
select($fh);
#clear the output buffer
select()->autoflush(1); 
```

**参考**

*   [perldoc：打开](http://perldoc.perl.org/functions/open.html)

*   [perldoc：关键字](http://learn.perl.org/docs/keywords.html)

*   [IO::文件](http://perldoc.perl.org/IO/File.html)

*   [如何刷新/取消缓冲输出文件句柄？为什么我必须这样做？](http://www.perlmonks.org/?node=How%20do%20I%20flush%2Funbuffer%20an%20output%20filehandle%3F%20Why%20must%20I%20do%20this%3F)

*   [冲洗输出](http://docstore.mik.ua/orelly/perl/cookbook/ch07_13.htm)

# c# - 您如何强制在项目中编译特定版本的水晶报表？

> ID：14451822
> 
> 赞同：1
> 
> 时间：2013-01-22T04:56:09.597
> 
> 标签：c#, crystal-reports

在开发机器上，我安装了两个版本的水晶报表，11.5 和 13.0

在我们的开发服务器上，我安装了 11.5 水晶运行时，并且以前的项目加载正常（它生成水晶报告并将其下载到用户电脑）

我正在处理的当前项目是一个 c# web 表单应用程序（它很旧）。当我在本地开发机器上加载网站时，它加载得很好。

当我将网站发布到开发服务器时，我收到以下错误消息：

> *无法加载文件或程序集“CrystalDecisions.Web，版本=13.0.2000.0，Culture=neutral，PublicKeyToken=692fbea5521e1304”或其依赖项之一。该系统找不到指定的文件*

看起来使用水晶的项目中的引用设置正确，因为当我在记事本中打开 csproj 文件时，我得到以下信息

```
<Reference Include="CrystalDecisions.CrystalReports.Engine, Version=11.5.3700.0, Culture=neutral, PublicKeyToken=692fbea5521e1304, processorArchitecture=MSIL" />
<Reference Include="CrystalDecisions.ReportSource, Version=11.5.3700.0, Culture=neutral, PublicKeyToken=692fbea5521e1304, processorArchitecture=MSIL" />
<Reference Include="CrystalDecisions.Shared, Version=11.5.3700.0, Culture=neutral, PublicKeyToken=692fbea5521e1304, processorArchitecture=MSIL" />
<Reference Include="CrystalDecisions.Web, Version=11.5.3700.0, Culture=neutral, PublicKeyToken=692fbea5521e1304, processorArchitecture=MSIL" /> 
```

当我检查水晶引用的属性窗格时，它指向 GAC，但是当我遵循 GAC 引用时，它看起来就像那里只有 11.5 水晶 dll。

我在项目引用中有 11.5 的事实，项目在哪里知道甚至可以选择 13.0 版本的水晶，以及如何让它与 11.5 一起编译？

如果必须，我会卸载 13.0，但肯定有办法做到这一点吗？

# php - PHP的带宽浪费算法

> ID：14451825
> 
> 赞同：-4
> 
> 时间：2013-01-22T04:57:05.207
> 
> 标签：php, bandwidth

我正在尝试用 PHP 创建一个可以连续运行并继续浪费带宽的软件。

任何人都可以提出任何解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T05:16:03.093

制作一个大文件并使其可公开访问，然后只需制作一个加载图像然后调用自身的页面。

（请注意，这是一个无限循环，因此您可能应该放入一些能够阻止它的东西，例如时间限制或计数器）

像这样的想法可能会做：

```
<?php
//waster.php
header('Connection: close');
header('Content-Length: 0');
file_get_contents('http://www.example.com/hugeimage.jpg');
file_get_contents('http://www.example.com/waster.php'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T05:00:52.960

为了浪费带宽，您不需要连续运行的 php 脚本。它将浪费处理而不是带宽。只需编写一个 PHP 脚本来显示一个大的图像文件，然后在本地机器上编写一个实用程序或脚本 (unix) 以不断调用该 url 并下载图像并可能将其删除。

无论如何，似乎会发生一些邪恶的事情:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-22T16:29:47.340

根据您要执行的操作，您可以使用[Fiddler](http://www.fiddler2.com/fiddler2/)之类的工具来[模拟网络延迟](http://helephant.com/2012/07/11/simulating-network-latency-with-fiddler/) 或[慢速连接速度](http://www.developertipoftheday.com/2010/12/simulate-slow-internet-connection-in.html)。

# c++ - 如何在没有全局变量的情况下共享此数据

> ID：14451828
> 
> 赞同：0
> 
> 时间：2013-01-22T04:57:43.723
> 
> 标签：c++

我试图找出最合乎逻辑、最安全、最有效的方法来实现这一点，而不使用全局变量。

假设我有一堂课：

```
class SomeClass{
 public: someFunction(){...}
}; 
```

另一个类实例`SomeClass`化为数据成员：

```
class AnotherClass{
  SomeClass theTest;
  void anotherFunction(){...}
  int myDataInt;
 }; 
```

现在，我希望`someFunction`in`SomeClass`能够轻松访问`myDataInt`in `AnotherClass`。一种方法是向传入的参数添加一个参数`int`。也许这是唯一合适的方法。但我希望在和之间进行更“自动”的访问。另一种选择是简单地设置数据等于它自己的。但是我有两个类存储相同的数据，这似乎是多余的。`someFunction``AnotherClass``someFunction``myDataInt``AnotherClass``SomeClass``myDataInt`

还有其他建议吗？非常感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-22T05:00:49.593

添加指向包含`AnotherClass`in的指针`SomeClass`：

```
class SomeClass{
  AnotherClass* enclosing;
 public:
  someFunction(){
    int x=enclosing->myDataInt;
    ...
  }
}; 
```

编辑：另外，正如上面 iammilind 所述，您将希望`SomeClass`成为.`AnotherClass``myDataInt`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T05:25:05.550

一个类应该对自己的状态负责，因此您希望每个类成员都是私有的并提供接口（成员方法）来访问它们。

`friend`如果 AnotherClass 和 SomeClass 之间只共享几个字段，我不会那么容易介绍。更好的设计总是试图将数据隐藏在外部。

我对您的问题的解决方案是 SomeClass 持有指向 AnotherClass 的指针，然后在需要时访问它的成员方法：

```
class AnotherClass;

class SomeClass
{
public: 
  SomeClass(AnotherClass* p) : context_ptr_(p) {}
  void someFunction(); 
  { 
      context_ptr_->setDataInt(3);
  }

private:
  AnotherClass *context_ptr_;
};

class AnotherClass
{
public:
  AnotherClass() :theTest(this)
  {         
  }
  void anotherFunction(){ }
  void setDataInt(int i) { myDataInt = i; }
private:
  SomeClass theTest;
  int myDataInt;
}; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-22T05:03:26.120

你可以这样做：

```
class SomeClass{
 public:
    SomeClass( int & refInt )
        : sharedInt(refInt)
    {}

    int & sharedInt;
}; 
```

并在`AnotherClass`：

```
class AnotherClass {
  public:
    AnotherClass()
        : theTest(myDataInt)
    {}

  private:
    SomeClass theTest;
    int myDataInt;
 }; 
```

# xcode - xcode 4.5中库图标的含义是什么？

> ID：14451830
> 
> 赞同：0
> 
> 时间：2013-01-22T04:57:54.453
> 
> 标签：xcode

我对 xcode 4.5 中显示的库图标感到困惑。我不知道这些图标之间有什么不同，因为这些图标出现在同一个库中。抱歉，如果这是一个非常基本的问题，但我找不到任何文件告诉我这些图标有什么区别。我还发布了这些图标的图像。感谢您的任何解释。

![lib 的图标看起来像一个新文档](../Images/fe5d3801e37d585ff1ec1d36bdb7c05f.png)

![lib的图标看起来像一座房子](../Images/f9edd25af67701a5a0995b8f56a84292.png)

![lib的图标看起来像一个正方形](../Images/819d0a1bcab98191fd228d5984c3e4dd.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T05:14:14.193

在第一个中，Xcode 似乎可以找到该文件，但不将其识别为静态库。第二个表示它是一个静态库。（它应该是一个图书馆的图标，您可以在其中查看书籍。）第三个意味着 Xcode 无法在磁盘上找到该文件。例如，它可能指向错误的路径。

# javascript - 如何允许用户通过电子邮件批准任务？

> ID：14451831
> 
> 赞同：0
> 
> 时间：2013-01-22T04:57:54.023
> 
> 标签：javascript, asp.net, email

在我们的项目中，经理们会收到包含他们任务的电子邮件。新要求是允许经理通过电子邮件批准他们的任务。每个任务附近都有一个“批准”按钮，应添加该按钮以允许在不访问公司站点的情况下批准任务。

我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T08:30:27.297

至于我，那是不可能的。大多数电子邮件客户端永远不会运行 javascript，因此您不能使用 ajax 来调用您的服务器。

另一种选择 - 带有表单的 iframe 以在其中设置批准。根据[这个](http://www.campaignmonitor.com/blog/post/3219/do-iframes-work-in-email/)在一些电子邮件客户端中它会起作用。在其他人 - 没有。

对我来说，最现实的方法是放一个简单的链接。单击它会打开浏览器，当然，但您可以在一切完成后使该页面自行关闭。

我看到的最后一个选项是向某个特定地址发送电子邮件，例如approve_task@company.com，主题包含任务的ID，并建立侦听器，该侦听器将检查approve_task@company.com 收到的电子邮件并将任务标记为已批准。发送邮件没问题：电子邮件正文中的链接。但是您不能自动发送任何电子邮件。经理需要单击它并手动发送电子邮件。所以我认为这不是一个很好的解决方案。

# sql-server - 为什么更改 CommandTimeout 不起作用

> ID：14451832
> 
> 赞同：1
> 
> 时间：2013-01-22T04:57:55.460
> 
> 标签：sql-server, ado.net

我有使用 Entity Framework 和 ADO.net 的 MVC2 应用程序。在 ADO.net SqlCommand 连接中，它得到，

“/”应用程序中的服务器错误。超时已过。在操作完成之前超时时间已过或服务器没有响应。

代码是，

```
using (SqlCommand command = conn.CreateCommand())
{
    var commandText = "exec 'stored producedure name'";
    command.CommandTimeout = 240;

    SqlDataAdapter da = new SqlDataAdapter(commandText, conn);
    DataSet ds = new DataSet();
    da.Fill(ds, "Table");
} 
```

存储过程大约需要 3 分钟才能完成。所以我将 CommandTimeout 从默认的 30 秒更改为 240 秒（4 分钟）。然而，它在运行大约 30 秒后仍然出现“超时”错误。看起来 CommandTimeout 不起作用。代码在VS 2010中运行。如何更改命令超时？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T07:43:56.490

您在此处设置的超时是您使用的驱动程序的超时。也许您的 SQL 服务器本身有一个超时设置。打开 SQL 管理工作室，连接到 SQL 服务器并右键单击属性以检查选项下是否设置了另一个超时。在那里将其设置为您喜欢的值。

# html - Safari 是否实现了最新的网络套接字协议？

> ID：14451835
> 
> 赞同：0
> 
> 时间：2013-01-22T04:58:13.913
> 
> 标签：html, websocket

直接从 HTML5 Rocks 教程的第一行开始，它就不起作用了。

```
var connection = new WebSocket('ws://html5rocks.websocket.org/echo', ['soap', 'xmpp']);
connection.onopen = function () { alert("open"); };
connection.onerror = function () { alert("error"); }; 
```

它适用于chrome，opera，ie。它在 Safari 中不起作用。难道我做错了什么？

[http://jsfiddle.net/xSNpM/2/](http://jsfiddle.net/xSNpM/2/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T14:46:13.420

苹果停止在 Windows 上更新 Safari。这适用于最新版本的 safari。

# c# - 在 WP8 中将 jpg 读入 BMP

> ID：14451836
> 
> 赞同：0
> 
> 时间：2013-01-22T04:58:35.093
> 
> 标签：c#, windows-phone-8

当我尝试在 windows phone 8 应用程序中将 jpg 读入 BitmapImage 时，我收到以下错误：

```
System.UnauthorizedAccessException 
```

我正在阅读它，它告诉我需要检查应用程序清单文件中的照片功能，我做了。我仍然得到错误。

我要读的代码是：

```
System.Windows.Media.Imaging.BitmapImage b = 
    new System.Windows.Media.Imaging.BitmapImage(new Uri(@"cat.jpg",         
    UriKind.RelativeOrAbsolute)); 
```

这个错误还有其他原因吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T05:33:16.080

`BitmapImage`对象只能在 UI 线程上构造。您可以这样做`Dispatcher.BeginInvoke`：

```
Deployment.Current.Dispatcher.BeginInvoke(() =>
{
    System.Windows.Media.Imaging.BitmapImage b = 
        new System.Windows.Media.Imaging.BitmapImage(new Uri(@"cat.jpg",         
        UriKind.RelativeOrAbsolute));

}); 
```

但请记住，它是异步的，因此您需要在传递给 BeginInvoke 的 lambda 中继续执行

# memory - 清理子进程地址空间的方法，即使它还活着

> ID：14451837
> 
> 赞同：0
> 
> 时间：2013-01-22T04:58:36.690
> 
> 标签：memory, process, virtual, parent

在我的过程中，我创建了 10 个线程并将使用这些线程，直到我的应用程序处于活动状态。每个线程每次都会执行一些文件输入和输出操作。所以问题是每次线程开始执行时，我的进程虚拟内存都会增加。我的分析是，当一个文件输入输出任务被允许给线程时，当线程开始复制文件时，文件将被加载到线程地址空间，复制完成后，线程地址空间不会被清除，因为仍然是线程没有退出。因此，如果我再次将另一个任务分配给线程，那么新文件将被加载到线程地址空间。

因此主进程的虚拟内存地址空间将会增加。所以如果我错了，请纠正我，如果进程运行日志时间，也有助于知道这有一些问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T05:02:10.880

这里有几件事。

1）线程没有自己的内存地址空间。流程可以。（但是，线程确实有自己的线程本地存储。）

2) 在托管语言中，在垃圾收集器运行之前，不会清理对象并压缩堆。垃圾收集器在需要时才会运行（例如，程序即将耗尽内存）。只要对象没有对其的强引用（没有任何运行可以到达它），那么当程序需要清理对象时，对象就会被清理，您不需要做任何其他事情。但是，如果您希望垃圾收集器尽早运行，请告诉它。

顺便说一句，如果在许多不同的线程中通常需要资源，您可以考虑为它们设置某种全局缓存。然而，早期优化是一种严重的罪过，所以在确定它解决了真正的问题之前，不要全力以赴。

# php - 如何解压缩txt.gz文件并使用php存储到数据库中

> ID：14451844
> 
> 赞同：3
> 
> 时间：2013-01-22T04:59:39.563
> 
> 标签：php, mysql, gzip, unzip, datafeed

我的 zip 文件名为 Product_Catalog.txt.gz。这个 zip 文件包含一个 txt 文件。

我如何提取并存储到我的数据库中

我已经在 zip 文件中解压缩并存储到我的数据库中。但我无法理解 .gz 格式。所以请指教

我的 zip 文件代码在这里

```
if (realpath($destinationname."/".$filename)){
    if ($zip = zip_open(realpath($directory."/".$filename)))
        {
            while (($zip_entry = zip_read($zip))){
            $zipfilename=zip_entry_name($zip_entry  );
            $zipfilename."<br>";
            $tmpfname = tempnam("/tmp", "");
            $handle = fopen($tmpfname, "w+");
            while($data = zip_entry_read($zip_entry,50000000000)){
            fwrite($handle,$data);
            }// end while $data
            fseek($handle,0);
            if ($separatetables);
            $table=strtok($zipfilename,"-");
            $sql="CREATE TABLE IF NOT EXISTS `$table` LIKE `cjfeeds`";
             mysql_query($sql); 
```

如何将此代码转换为 txt.gz

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T06:42:17.737

[gzip](//en.wikipedia.org/wiki/Gzip)通常用于单个文件，与[ZIP](//en.wikipedia.org/wiki/Zip_%28file_format%29)的文件格式不同。尽管两种格式都使用相同的压缩算法 ( [DEFLATE](//en.wikipedia.org/wiki/DEFLATE) )，但标题完全不同，因此 PHP 的 Zip 函数将无法识别您的文件。

相反，您可以使用`compress.zlib://` [包装器](http://php.net/manual/en/wrappers.compression.php)打开 gzip 压缩文件。然后，您可以使用正常的流函数来读取文件。

```
$handle = fopen("compress.zlib://$filename", 'r'); 
```

但是，有一些限制；例如，无法以读写模式打开 gzip 压缩文件，搜索可能会很慢。如有必要，您可以通过制作临时未压缩副本来解决这些问题：

```
copy("compress.zlib://$filename", $tmpfname); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T06:42:42.310

你一直称它为 zip 文件。它不是一个 zip 文件 ( `.zip`)。这是一个 gzip 文件 ( `.gz`)。不同的格式。

您可以使用[`gzdecode()`](http://php.net/manual/en/function.gzdecode.php)解压缩 gzip 文件。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-07T13:50:09.550

尝试这个....

```
if(isset($_FILES['zipfile'])) 
{

    $filename = $_FILES['zipfile']['name'];
    $source = $_FILES['zipfile']['tmp_name'];
    $type = $_FILES['zipfile']['type'];

    /*$name = explode('.zip', $filename); # $name[0] returns the name of the file. $name[1] returns the extension (zip)

    ; */ # Where the file will be saved. I.E. 'extracted/myFile-02151985/'
    $target = PHYSICAL_PATH."upload/";
    // Ensures that the correct file type was chosen.
    $accepted_types = array('application/zip', 'application/x-zip-compressed', 'multipart/x-zip', 'application/x-compressed');
    foreach($accepted_types as $mime_type)
    {
        if($mime_type == $type)
        {
            $okay = true;
            break;
        } 
    }

    $okay = strtolower($name[1]) == 'zip' ? true : false;

    if(!$okay) 
    {
        $msg="Please choose a zip file, dummy!";
    }
    $saved_file_location = $target.$filename;
    if(move_uploaded_file($source, $target . $filename))
    {
        global $target;
        global $unique_folder;
        $zip = new ZipArchive();
            $x = $zip->open($saved_file_location);
            if ($x === true) 
            {
                $folder=$zip->extractTo($target);
                for ( $i=0; $i < $zip->numFiles; $i++ ) 
                { 
                    echo $entry = $zip->getNameIndex($i); 
                    $filename=explode('/',$entry);
                    print_r($filename);
                    if($filename[1] != '')
                    { 
                        $filename_folder=$filename[0];
                        $filename = $filename[1]; //

                        $name = explode('.zip', $filename_folder); # $name[0] returns the name of the file. $name[1] returns the extension (zip)
                        //echo 'sfkdf'.$name[0];
                        $target = PHYSICAL_PATH."upload/";

                        $sql = "select `id` from `tracks` order by `id` desc";
                            $list = mysql_query($sql);
                            $list_num = mysql_num_rows($list);
                            if($list_num > 0)
                            {

                            $res = mysql_fetch_array($list);
                            $new_id=$res['id'];
                            } else {
                            $new_id=1;
                            }
                        $check_for_jpg = strpos($filename, '.mp3');

                        if ($check_for_jpg === false ){
                            echo 'Check file format.';
                            $source=$target . $name[0].'/'.$filename;
                            unlink($source);
                        } else {
                            $srch = array(' ','--','&quot;','!','@','#','$','%','^','&','*','(',')','_','+','{','}','|',':','"','<','>','?','[',']','\\',';',"'",',','/','*','+','~','`','=');
                            $rep = array('_','_','_','_','_','_','_','_','_','_','_','_','_','_','_','_','_','_','_','_','_','_','_','_','_');
                            $name_song[$i]= str_replace($srch,$rep,$filename);
                            $title_name=explode('.',$filename);

                            $new_id=$new_id+1;
                            $new_filename=$new_id.'-'.$name_song[$i];
                            mysql_query("insert into `tracks` set track='".addslashes(stripslashes($new_filename))."',title='".addslashes(stripslashes($title_name[0]))."',tape_id='".$id_last."',addDate=NOW(),status=1 ");
                            $source=$target . $name[0].'/'.$filename; $target_move=$target.$new_filename;
                            if(rename($source,$target_move)) { unlink($source); } else { echo 'not';}
                            echo 'folder zip';
                            echo '<li>' . $new_filename . '</li>';
                        }
                        rmdir($target . $name[0]);
                    }
                    else { echo $target = PHYSICAL_PATH."upload/";
                        $sql = "select `id` from `test_table` order by `id` desc";

                        $list = mysql_query($sql);
                        $list_num = mysql_num_rows($list);
                        if($list_num > 0) {
                        //and, instead of using "while":
                        $res = mysql_fetch_array($list); // will return the highest "id" number
                        echo $new_id=$res['id'];
                        } else {
                        $new_id=1;
                        }

                        $check_for_jpg = strpos($entry, '.mp3');

                        if ($check_for_jpg === false ){
                            echo 'Check file format.';
                            $source=$target .$entry;
                            unlink($source);
                        } else {
                            $srch = array(' ','--','&quot;','!','@','#','$','%','^','&','*','(',')','_','+','{','}','|',':','"','<','>','?','[',']','\\',';',"'",',','/','*','+','~','`','=');
                            $rep = array('_','_','_','_','_','_','_','_','_','_','_','_','_','_','_','_','_','_','_','_','_','_','_','_','_');
                            $name_song[$i]= str_replace($srch,$rep,$entry);
                            $title_name=explode('.',$entry);
                            $new_id=$new_id+1;
                            $new_filename=$new_id.'-'.$name_song[$i];
                            mysql_query("insert into `tracks` set track='".addslashes(stripslashes($new_filename))."',title='".addslashes(stripslashes($title_name[0]))."',tape_id='".$id_last."',status=1 ");
                            $source=$target .$entry; $target_move=$target.$new_filename;
                            if(rename($source,$target_move)) { unlink($source); } else { echo 'not';}
                            echo 'only zip';
                            echo '<li>' . $new_filename . '</li>';
                        }

                    }
                }
                $zip->close();
                unlink($saved_file_location); #deletes the zip file. We no longer need it.
            } else {
                die("There was a problem. Please try again!");
            }

    } else {
        $msg="There was a problem";
    }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-01T15:41:46.800

你不提取。

```
if ($rrpath){
     if ($zip = gzopen($rrpath, "rb"))
        {   
            $filenamen = $_SESSION['files_list'][$i];       
            $zipfilename = str_replace('.gz', '', $_SESSION['files_list'][$i]); 
            $tmpfname = tempnam("/home/demoosiz/tmp", "");      
            $handle = fopen($tmpfname, "w+");
            ini_set("max_execution_time",3000000000000);
            while($data = gzread($zip, 4096)){
            fwrite($handle,$data);
            }// end while $data
            fseek($handle,0);
            if ($separatetables);
            $table=strtok($zipfilename,"-");                   
           // $sqly = "TRUNCATE TABLE `cjfeeds`";
            //mysql_query($sqly);                           
             // I'm not too sure if this is windows specific
            $tmpfile=addslashes($tmpfname);
            //if the script times out uncomment the next line 
             ini_set("max_execution_time",3000000000000);
            $sql22 ="LOAD DATA LOCAL INFILE '$tmpfile' REPLACE  INTO TABLE `cjfeeds` FIELDS TERMINATED BY '$fieldseparator' IGNORE 1 LINES;"; 
```

您可以使用此代码。这段代码对你很有帮助。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-22T05:32:40.807

您可以通过[模块](http://www.php.net/manual/en/book.zlib.php)`.gz`的功能与文件进行交互。[`zlib`](http://www.php.net/manual/en/book.zlib.php)

* * *

回复您的评论：

您不需要这样做，`while($zip_entry = zip_read($zip))`因为`gz`文件中不包含多个文件。文件`.gz`只是已压缩的单个文件。不幸的是，这也意味着`zip_entry_name`两者都没有等价物，因为只有一个文件。

如果您正在尝试读取 tarball（已连接在一起并经过 gzip 压缩形成`.tar.gz`文件的文件的存档），`Zlib`则不适合您，因为它不是为处理该问题而设计的。你会想要类似的东西`PharData`：

```
$phar = new PharData($filename);
foreach ($phar as $phar_stream) {
  $file_data = file_get_contents($phar_stream);
  // process $file_data how you like
} 
```

如果这些只是单文件`gz`文件，那么您可以使用常用文件系统函数的 gz 版本读取文件。

您可以使用`gzread`当前使用的方式处理文件块`zip_entry_read`，或者您可以使用 将所有行读入数组中`gzfile`。有一个`readgzfile`函数可以抓取整个文件，但不幸的是，它似乎只是将输出直接转储到客户端，而不是做一个文件。您可以使用输出缓冲来捕获该输出，但考虑到您的其他选项，这似乎太麻烦了。

# git - 尽管我可以 ssh 进入 github，但 git clone 给出的权限被拒绝

> ID：14451847
> 
> 赞同：1
> 
> 时间：2013-01-22T05:00:06.147
> 
> 标签：git, github, ssh, composer-php

我们想从 Github 获取一些私有存储库到我们的开发服务器中。这有效：

```
ssh -vT git@github.com 
```

然而

```
git clone 'ssh://github.com/company/repo -v' '/var/www/api/shared/vendor/' 
```

不起作用。它给出了一个`Permission denied (publickey)`错误。

我正在使用 Composer 下载存储库。

关于为什么它不起作用的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T05:21:03.900

您可以 ssh-keygen ，将您的 ~/.ssh/id_rsa.pub 内容复制到 github 部署密钥

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T05:47:55.647

您没有`git`在命令中指定用户`git clone`，而在 ssh 命令中指定了用户。

```
git clone git@github.com/company/repo 
```

如果您仍然遇到问题，那么您可以设置`GIT_TRACE=1`并重新运行该命令以查看它在做什么。更有可能的是，您会希望找到一个失败的 ssh 命令并使用`-v`选项运行它以查看身份验证失败的原因（错误的密钥等）。确保在完全相同的环境中运行这两个命令。

[Github](https://help.github.com/articles/error-permission-denied-publickey)上提供了更多帮助。

# ios - iPhone SDK 蓝牙功能及其局限性

> ID：14451848
> 
> 赞同：1
> 
> 时间：2013-01-22T05:00:06.483
> 
> 标签：ios, objective-c, macos, cocoa, bluetooth

当我将 iPhone 连接到 mac 电脑时，我可以通过蓝牙发送的内容有哪些限制？

我的目标是通过蓝牙自由地将数据从 iPhone 传输到 OSX 机器。有没有办法包装你自己的通信类，以便它发送它想要的任何类型的数据？有什么限制？

我可以将任何我喜欢的数据发送到 mac OS 吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T02:44:23.533

您是否考虑过使用蓝牙低功耗版本 4.0（CoreBluetooth 框架）？根据您的应用，它可能是最适合您的。它支持所有最新的 iOS 和 Mac 设备。

如果您想使用经典蓝牙（版本 3.0、2.1 或 1.2），不幸的是目前还不能直接（轻松）使用经典蓝牙。理想情况下，您需要 SPP 配置文件（串行端口配置文件），但 iOS 目前不支持 SPP。iPhone 可以仅使用其支持的标准配置文件与 Mac（或任何其他设备）通信，并且您的应用程序无法直接访问 iOS 设备上的标准配置文件数据。

# html - 如何让整个句子的一部分在调整大小时向下移动

> ID：14451850
> 
> 赞同：0
> 
> 时间：2013-01-22T05:00:12.643
> 
> 标签：html, resize, sass

我在 h1 标签中有一个句子。在调整大小时，我希望最后三个词一起跳下来，而不是一次一个，因为最后三个词是标语，如果它们分开就没有意义。[这里](http://update.mrskitson.ca)是现场直播。

这是HTML：

```
<header class="header" role="banner">
    <div id="inner-header" class="wrap clearfix">
       <div id="title">
       <!-- to use a image just replace the bloginfo('name') with your img src and remove the surrounding <p> -->
        <h1 id="logo" class="h1">
                <a href="<?php echo home_url(); ?>" rel="nofollow">
                    <?php bloginfo('name'); ?><span class="subtitle">
                    <?php bloginfo('description'); ?></span>
                </a>
            </h1>
       </div>
    <nav role="navigation">
       <?php bones_main_nav(); ?>
    </nav>
</div> <!-- end #inner-header --> 
```

和scss：

```
.header {
    #title {
        @include span-columns(23 ,24); 
        position: absolute; 
        top: 30px;
        text-align: center;
    }
    .subtitle {
        font-size: 0.3em; 
        margin-left: 1em;
    }
    .nav { 
        @include span-columns(24 omega ,24); 
        margin-top: 289px;
    }
    #logo {
        a { 
           color: #fff; 
           font-family: 'Pacifico', cursive; /*font-size: 2.5em;*/ 
           text-shadow: 0px 0px 0 #B6CEBF,
                        0.707px 0.707px 0 #B6CEBF,
                        1.414px 1.414px 0 #B6CEBF, 
                        2.121px 2.121px 0 #B6CEBF, 
                        2.828px 2.828px 0 #B6CEBF, 
                        3.536px 3.536px 0 #B6CEBF, 
                        4.243px 4.243px 0 #B6CEBF, 
                        4.95px 4.95px 0 #B6CEBF, 
                        5.657px 5.657px 0 #B6CEBF, 
                        6.364px 6.364px 0 #B6CEBF, 
                        7.071px 7.071px 0 #B6CEBF;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T05:14:37.677

试试这个：

```
.subtitle {
    display: inline-block;
    font-size: 0.3em; 
    margin-left: 1em;
} 
```

设置`display`to`inline-block`将使元素的内容保持在一起（元素的行为`block`），但仍保持与其他文本内联。

您还应该考虑进行一些其他调整，以便标题可以是 100% 宽度，并且导航仍然可以正确定位：

```
#logo {
    margin: 80px 0 0;
}
.header #title {
    height: 289px;
    overflow: hidden;
    position: relative;
    text-align: center;
    width: 100%;
}
.header .nav {
    display: inline;
    float: right;
    width: 100%;
}
.header .nav ul {
    /* Add the .clearfix class to this ul */
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T07:16:19.170

我们在这里讨论的是响应`@media`式查询。有几种方法可以做到这一点，但这是最快的：

将此规则添加到您的 scss：

```
@media only screen and (max-width: 768px) {
    .subtitle{
        display: block;
    }
} 
```

### 在旁边

Bones 附带其他 scss 文件，可编辑`_base.scss`一般样式，但对于调整大小编辑文件（如 ）的自定义样式`_768up.scss`，还请阅读`style.scss`文件内的信息以获取有关媒体查询的更多信息。Bones 附带了一个很棒的文档。

### 进一步阅读

*   [关于来自 CSS 技巧的媒体查询的好教程](http://css-tricks.com/css-media-queries/)
*   [W3C 的媒体查询规范](http://www.w3.org/TR/css3-mediaqueries/)
*   [MDN 上的 CSS 媒体查询](https://developer.mozilla.org/en-US/docs/CSS/Media_queries)

# c - 变量加法函数 C

> ID：14451854
> 
> 赞同：0
> 
> 时间：2013-01-22T05:00:30.397
> 
> 标签：c, variadic-functions

我正在编写一个简单的可变参数函数，它将一系列整数相加并返回总和。我在理解它的工作原理时遇到了一些麻烦，尽管我觉得我的代码方向正确，但我的代码似乎不起作用。（贴在下面）这个函数的规范是它至少需要一个参数，最后一个参数总是为零（如在 main 中调用的那样）。我还被告知，根据我的机器，我不一定会得到我正在寻找的输出，正如你所想象的那样，这会使我的情况进一步复杂化。非常感谢您对纠正我的 Sum() 函数的帮助。

编辑：这应该在不使用 stdarg.h 标头的情况下完成，因此没有 va_arg 函数。

```
int Sum(int a, ... ) {
   int sum = 0, *addy = &a;

   while (*addy) {
      sum += *addy;
      addy += sizeof(a);
   }

   return sum;
}

int main() {
   printf("%d %d %d %d\n", Sum(0), Sum(3, 5, 6, 7, 0),
   Sum(7, 2, 42, 3, 5, -4, 0), Sum(-1, 9, 12, 123, -213, 42, 7, 2, 0));
}
//Expected output: 0 21 55 -19
//My output: 0 32770 32770 32776 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-22T05:04:01.627

当您将数字添加到 int 指针（如 中`addy += sizeof(a)`）时，您添加的数字会自动乘以指针声明为的任何类型的大小（在本例中`int`）。要解决此问题，只需使用

```
addy += 1; 
```

反而。但是，我建议使用可变参数宏而不是这种方法，它们更清晰且不易出错。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T05:04:45.173

对于可变参数，你必须使用`va_start`和`va_end`函数，希望有用..

[http://www.gnu.org/software/libc/manual/html_node/Variadic-Example.html#Variadic-Example](http://www.gnu.org/software/libc/manual/html_node/Variadic-Example.html#Variadic-Example)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-22T05:08:43.440

你能检查一下吗

```
int Sum(int a, ... ) {
 int sum = 0, *addy = &a;

while (*addy) {
  sum += *addy;
  addy ++;
}

return sum;
}

int main() {
   printf("%d %d %d %d\n", Sum(0), Sum(3, 5, 6, 7, 0),
  Sum(7, 2, 42, 3, 5, -4, 0), Sum(-1, 9, 12, 123, -213, 42, 7, 2, 0));
} 
```

要记住的是指针操作：您添加到指针的数字将乘以指针指向的类型的大小。所以增加指针 addy 就足以获取下一个元素。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-08-07T15:17:18.943

```
 #include <stdarg.h>
 #include <stdio.h>

 int
 add_em_up (int count,...)
 {
   va_list ap;
   int i, sum;

   va_start (ap, count);         /* Initialize the argument list. */

   sum = 0;
   for (i = 0; i < count; i++)
     sum += va_arg (ap, int);    /* Get the next argument value. */

   va_end (ap);                  /* Clean up. */
   return sum;
 }

 int
 main (void)
 {
   /* This call prints 16\. */
   printf ("%d\n", add_em_up (3, 5, 5, 6));

   /* This call prints 55\. */
   printf ("%d\n", add_em_up (10, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10));

   return 0;
 } 
```

# android - 如何区分 SCREEN_ON 和 PHONE_STATE 广播接收器

> ID：14451856
> 
> 赞同：1
> 
> 时间：2013-01-22T05:00:52.277
> 
> 标签：android, broadcastreceiver, lockscreen, phone-state-listener

我有两个广播。

一是屏幕开/关，二是手机状态。如果屏幕打开，我想向用户显示我的活动，但如果是电话，则不显示。

如何管理这个任何帮助将不胜感激..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T05:08:17.840

您需要使用 if/else 条件将广播操作标识为：

```
public static final String Screen_on = "android.intent.action.SCREEN_ON";
@Override
public void onReceive(Context context, Intent intent) {
if (intent.getAction().equals(Screen_on)) {
   // do your job here if screen is on /off
}
else{
        // send new intent to your Activity here 
         Intent intent = new Intent(context,Activity1.class);
     intent.putExtra("status","CALL_STATE");
     context.startActivity(intent);

        Bundle extras = intent.getExtras();
       if (extras != null) {
        String state = extras.getString(TelephonyManager.EXTRA_STATE);
        if (state.equals(TelephonyManager.EXTRA_STATE_RINGING) {
           // do your job here if PHONE STATE CHNAGED
        }
      }

} 
```

`AndroidManifest.xml`并在as中声明您的 Activity`android:launchMode="singleTask"` 并在 Activity 运行时覆盖 onNewIntent 以接收意图：

```
@Override
protected void onNewIntent(Intent intent) {
    super.onNewIntent(intent);
    setIntent(intent);
    finishactivity();
}
private void finishactivity(){
    Intent intent = getIntent();
    Bundle extras=intent.getExtras();
    if(extras!=null){
          if(extras.getString("status").equals("CALL_STATE"))
         // finish your Activity here
    } 
} 
```

# extjs - ExtJS 4 轮播小部件

> ID：14451861
> 
> 赞同：1
> 
> 时间：2013-01-22T05:01:13.617
> 
> 标签：extjs, widget, extjs4, carousel

Carousel 是 Sencha Touch 的一部分，但是：

我正在寻找一个轮播/滚动类型小部件的示例，它允许我水平滑动浏览我可以操作的项目集合。ExtJS 是否提供这样的小部件，或者构建一个小部件的组件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T12:07:12.927

[`Ext.carousel.Carousel`](http://docs.sencha.com/touch/2-1/#!/api/Ext.carousel.Carousel-cfg-direction)当您将`direction`配置设置为“水平”（默认）时，您可以水平滑动 a 。

* * *

**编辑：**
您可以`Carousel.js`从 sencha touch build 复制并在 ExtJs4 中创建您自己的 Carousel。

重命名和重构一些配置，你就可以开始了。

重构示例：

```
Ext.define('Ext.carousel.Carousel', {
    extend: 'Ext.Container', 
```

一定是

```
extend: 'Ext.container.Container' , 
```

[[来源]](http://www.sencha.com/forum/showthread.php?145146-ExtJS-4-and-Ext-Core-Carousel) 我希望这对你有用.. 我很确定它会，但如果它不让我知道。

# bash - 拆分字符串并在bash中处理foreach-match它

> ID：14451862
> 
> 赞同：1
> 
> 时间：2013-01-22T05:01:13.800
> 
> 标签：bash, shell

我有 bash 变量

`USE_DOTNET="a b c"`

我需要去为每种模式`foreach` `USE_DOTNET`设置一些`case`（开关）。

一样

```
foreach x in USE_DOTNET
switch(x)
case a -> do something
case b -> ... 
```

在伪代码中，但我不知道如何在 bash 中实现它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T05:06:39.513

```
#!/bin/bash

USE_DOTNET="a b c"

for x in ${USE_DOTNET} ; do
   case ${x} in 
      a) echo "found x="$x ;;
      b) echo "found b"
      c) echo "FOUND c"
      * ) echo "unexpected value found for x=$x" 1>&2
   esac
done 
```

或者，根据@jordanm 的评论，您可以尝试

```
USE_DOTNET=(a b c)
for x in "${USE_DOTNET[@]}" ;do ... 
```

IHTH

（FWIW，您的 pcode 看起来接近 csh 语法）

# java - javac：需要不兼容的类型：类名 找到：类名

> ID：14451863
> 
> 赞同：1
> 
> 时间：2013-01-22T05:01:21.193
> 
> 标签：java, generics, javac, java-7

以下代码在JDK6中编译。在 JDK7 中失败并出现编译错误。

```
java: incompatible types
  required: com.jdk7.IExporter<O>
  found:    com.jdk7.IExporter<java.lang.Object> 
```

编译器是 1.7.0_10，来自 Oracle。

```
$ javac -version
javac 1.7.0_10 
```

代码

```
package com.jdk7;

public class GenericIn7 {

    public <O> IExporter<O> getExporter(Class<O> objType) {
        final IExporter<O> localExporter = 
                determineExporter(getPersistentInterface(objType));
        return null;
    }

    private <O> IExporter<O> determineExporter(Class<O> persistentInterface) {
        return null;
    }

    protected <O, I extends O> Class<O> getPersistentInterface(Class<I> clazz) {

        return null;
    }
}

class IExporter<T> {
} 
```

[为了完整起见，将通用替换为 IExporter 和其他更改使其可以编译。]

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-22T05:09:44.457

看起来类型推断并没有像您在这一行所期望的那样工作：

```
final IExporter<O> localExporter = 
            determineExporter(getPersistentInterface(objType)); 
```

我认为问题是`O`正在解决的问题`getPersistentInterface()`。它被调用就好像你调用了`this.<Object, O>getPersistentInterface(...)`。如果你是明确的：

```
final IExporter<O> localExporter = 
            determineExporter(this.<O, O>getPersistentInterface(objType)); 
```

它工作正常。

# forms - 没有图像或 jquery 的 phonegap 表单提交

> ID：14451867
> 
> 赞同：0
> 
> 时间：2013-01-22T05:01:39.123
> 
> 标签：forms, cordova

这就是我下面的内容，我提交表单的唯一方法是浏览图片。
有人可以告诉我如何用按钮提交这个，最好不用jQuery。
我只想提交一个带有文本的表单，没有图像。谢谢！

```
function browse()
{
    navigator.camera.getPicture(uploadPhoto,
        function(message) { alert('get picture failed'); },
        { 
            quality: 50,
            destinationType: navigator.camera.DestinationType.FILE_URI,
            sourceType: navigator.camera.PictureSourceType.PHOTOLIBRARY
        }
    );
}

function uploadPhoto(imageURI)
{
    var options = new FileUploadOptions();
    options.fileKey="file";
    options.fileName=imageURI.substr(imageURI.lastIndexOf('/')+1);
    options.mimeType="image/jpeg";

    var params = {};
    params.value1 = "test";
    params.value2 = document.getElementById('file_name').value + "";
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T05:49:00.240

我认为您要问的是如何将图像从相机提交到服务器，而无需文件输入表单元素，用户必须在其中浏览文件等。

最简单的答案就是不要将图像存储为文件，而是将其保存为 base64 字符串。为此，请将您的目的地类型更改为

```
destinationType: Camera.DestinationType.DATA_URL 
```

您的成功函数的参数现在将是一个 base64 字符串，您可以像任何其他字符串一样将其发送到您的服务器。然后，您需要在服务器端对其进行 base64_decode，然后将其写入磁盘。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T05:55:34.617

尝试一个普通的 HTML 表单：

```
<form action="/post" method="post">
  Input: <input type="text" value="input something"/>
  Submit: <input type="submit" value="Submit"/>
</form> 
```

# java - Calendar.Month 给出错误的输出

> ID：14451872
> 
> 赞同：3
> 
> 时间：2013-01-22T05:02:12.520
> 
> 标签：java, calendar

我一直在使用`java.util`所有日期和日历表示。但我在这里面临一个奇怪的问题。`Calendar.MONTH`, `Calendar.DAY_OF_MONTH`, 等都给出错误的输出。但是当我使用时`Calendar.getTime()`，我得到了正确的输出。可能是什么问题？

```
public class TestClass {

    public static void main(String[] args) {
        Calendar rightNow = Calendar.getInstance();
        System.out.println(rightNow.MONTH);
        System.out.println(rightNow.DAY_OF_MONTH);
        System.out.println(rightNow.YEAR);
        System.out.println(rightNow.getTime());
    }
} 
```

同样的输出是：

```
2
5
1
Tue Jan 22 10:31:44 GMT+05:30 2013 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-22T05:06:14.763

```
 System.out.println(rightNow.MONTH);
    System.out.println(rightNow.DAY_OF_MONTH);
    System.out.println(rightNow.YEAR);
    System.out.println(rightNow.getTime()); 
```

您正在打印日历常量值。

如果你想要价值观，你需要做`get....`

例子：

```
 System.out.println(rightNow.get(Calendar.MONTH)); 
```

阅读[日历 javadoc](http://docs.oracle.com/javase/6/docs/api/java/util/Calendar.html#get%28int%29)了解更多信息。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-22T05:08:53.207

Calendar.MONTH 不返回当前月份。它是一个常数，其值为 2。

从来源：

```
public final static int MONTH = 2; 
```

它用作 Calendar 的 get 方法中的参数

```
public int get(int field) {...} 
```

Calendar 的设计源自 Java 的早期，当时的许多约定是不同的、不存在的或正在发展的。Oracle（以及更早的 Sun）永远不会让像 java.util.Calendar API 这样的 API 成为当今标准 API 的一部分。

而且，为了完整起见，请使用[Joda Time](http://joda-time.sourceforge.net/)而不是 Java 的 Date 和 Calendar API。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2019-02-15T19:15:21.957

## java.time

```
 ZonedDateTime rightNow = ZonedDateTime.now(ZoneId.of("Africa/Cairo"));
    System.out.println(rightNow.getMonth());
    System.out.println(rightNow.getMonthValue());
    System.out.println(rightNow.getDayOfMonth());
    System.out.println(rightNow.getYear());
    System.out.println(rightNow); 
```

刚才运行时的输出是：

> ```
> FEBRUARY
> 2
> 15
> 2019
> 2019-02-15T21:15:06.313809+02:00[Africa/Cairo] 
> ```

## 不要使用日历

该`Calendar`课程令人困惑并且设计不佳，因此难怪您想知道。幸运的是，在您提出这个问题的第二年，它被`ZonedDateTime`现代 Java 日期和时间 API java.time 中的其他类取代。所以现在再也不要使用`Calendar`了。

该类`Calendar`试图非常通用，因此`getMonth`它没有方法等，而是具有可以读取和设置的*字段的概念。*因为它早在 Java 有`enum`s 之前就设计好了，所以每个字段都有一个数字和一个用于该数字的命名常量。所以`YEAR`（时代）是 1，`MONTH`是 2，等等。要获取对象字段的值，`Calendar`您应该调用`get`传递适当命名常量的方法，例如`rightNow.get(Calendar.MONTH)`. 使用just`rightNow.MONTH`是一个经常重复的错误。它只是为您提供常量 2 的值。

## 关联

[Oracle 教程：日期时间](https://docs.oracle.com/javase/tutorial/datetime/)解释如何使用 java.time。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-08-15T14:42:46.010

```
 Calendar now = Calendar.getInstance();
    out.println("month now= " + (now.get(Calendar.MONTH)+1)); 
```

或使用公历：

```
 GregorianCalendar nu  = new GregorianCalendar();
    int day = nu.get(Calendar.DAY_OF_MONTH);
    int month = (nu.get(Calendar.MONTH)+1);  //month +1 because january`==0
    int year= nu.get(Calendar.YEAR);
    int hour= nu.get(Calendar.HOUR_OF_DAY);
    int minutes= nu.get(Calendar.MINUTE); 
```

这里

# django - 将表单数据从纯 html 保存到数据存储区

> ID：14451874
> 
> 赞同：0
> 
> 时间：2013-01-22T05:02:31.167
> 
> 标签：django, google-app-engine

我有一个简单的表格

```
<form name="input" action="" method="get">
Username: <input type="text" name="user" id = "xxx">
<input type="submit" value="Submit">
</form> 
```

在 view.py 上，我想编写一个函数来获取用户输入的值

```
def add(request):
if request.method =="POST":
       abc=request.args.get('xxx')

return render_to_response('myapp/addtour.html') 
```

但它不起作用。请告诉我如何在 Google App Engine 或 Django 中执行此操作

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-22T05:39:10.183

1：当您的表单使用 GET 时，您正在检查 POST —— if 块永远不会触发。

2：`xxx`是一个 HTML ID - 它与 GET/POST 无关。name 参数可以。所以`request.GET.get('user')`- 不是`'xxx'`

# php - php 标头（“位置：test.php”）不起作用。但是java脚本重定向工作

> ID：14451879
> 
> 赞同：1
> 
> 时间：2013-01-22T05:03:03.533
> 
> 标签：php, javascript

```
php header("location: test.php") 
```

不工作。但是java脚本重定向工作。

我试过`header()`不重定向？

```
header("location: test.php"); 
```

但我尝试使用java脚本它的工作

```
window.location ="http://www.test.com/test.php" 
```

问题是什么。请给出一些解决方案

在调用标头之前没有回显（输出命令）

没有错误/警告消息

我的确切代码：

```
if($contlogin >0 && $LoginID!="")
{      
    $_SESSION['LoginID'] = $LoginID;
    if($_SESSION['currentUrl']) {
        header("location: http://".$_SESSION['currentUrl']);
    }
    else {
        if($LoginID==1) {
            header("location:admin/index.php");
        }
        else {
            header("location:dashboard.php");
        }
    }
}
else {   
    header("location:index.php?err=1");
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-22T05:19:11.237

放置一个`exit()`之后 `header("location: test.php");`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-22T05:04:44.703

检查您的 php 标签前是否有空格`<?php`

检查您的 error_reporting 是打开还是关闭，如果它关闭，请打开

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-22T05:11:06.853

听起来您的 PHP 中可能有错误，可能是语法错误。您可以从命令行运行 PHP 的 lint 检查器来查找错误：

```
php -l scriptname.php 
```

或者，在 php.ini 中或在脚本运行时启用[error_reporting可能会帮助您弄清楚发生了什么。](http://us2.php.net/manual/en/errorfunc.configuration.php#ini.error-reporting)

如果您还没有检查过，您的网络服务器的错误日志也可能会提供有关正在发生的事情的线索。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-22T05:05:48.973

抱歉，在我得到我的代表之前我不能发表评论，所以我必须发布这个但是你的 php 开始标签之前可能只有一个空格，这导致标题不起作用......所以`<?php`它之前可能有一个空格或其他东西.. .

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-22T05:22:14.057

不应该**l** in`location:`应该是**L**。

```
header("Location:test.php"); 
```

还要在 header() 之后使用 exit() 以避免任何问题并按照另一张海报的建议停止脚本的执行。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-06-06T04:45:56.830

header() 不工作的一些原因；1\. 如果 php 标签之前有空格，它将不起作用 2\. 在 header() 之前的 echo 语句如果你发现了这个在 header() 之后添加 exit() 或 die()

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-04-13T12:24:08.490

**您需要添加 ob_start(); 功能在 php 页面的顶部，然后重定向功能将正常工作。**

***链接： http: [//php.net/manual/en/function.ob-start.php](http://php.net/manual/en/function.ob-start.php)***

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2015-04-13T11:30:56.573

您的 PHP 代码必须在页眉开始之前向页面发送一些信息。在我的例子中，我在正文部分有一些 JavaScript 代码。这会导致一些数据（尽管不是立即可见）导致该位置无法工作。

请检查您的日志以获取一些条目，例如：

```
[Mon Apr 13 13:53:29 2015] [error] [client 192.168.109.109] PHP Warning:  Cannot modify header information - headers already sent by (output started at /var/www/html/xxx.php:208) in /var/www/html/xxx.php on line 565, referer: https://www.acme.com/xxx.php
```

# ios - iOS 记录广场视频

> ID：14451882
> 
> 赞同：5
> 
> 时间：2013-01-22T05:03:21.443
> 
> 标签：ios, objective-c, video

我正在寻找一种仅以方形纵横比录制视频的方法。

这与 Instagram 或 Path 只允许您拍摄“方形照片”的方式非常相似，但我正在寻找一种通过视频录制的方式来做到这一点？

任何帮助都会很棒，谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-17T07:32:05.620

请参阅[https://stackoverflow.com/a/9411826/1799647](https://stackoverflow.com/a/9411826/1799647)。这个对我有用。但是，如果您在情节提要中使用自动布局，则需要添加`[previewView layoutIfNeeded]`-`(void)viewDidLoad`您的相机视图控制器。否则相机视图边界的高度和宽度将为零并且会发生错误。

# python - Django：是否可以在 urls 中为视图指定接受方法

> ID：14451887
> 
> 赞同：1
> 
> 时间：2013-01-22T05:04:07.027
> 
> 标签：python, django, url, url-routing

我很好奇`accept_method`在定义 url 时直接设置 url

```
url(r'some-pattern', 'view_name', name='url_name', accept_method='GET|POST') 
```

我知道有视图装饰器之类`require_GET`的，`require_POST`等等。

有没有 Django 的解决方案或任何扩展来做到这一点？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T05:14:29.280

是的，它可以使用 django 中间件来完成。

使用[Process Request](https://docs.djangoproject.com/en/dev/topics/http/middleware/#process-request)拦截请求。

> 它应该返回 None 或 HttpResponse 对象。如果它返回 None，Django 将继续处理这个请求，执行任何其他 process_request() 中间件，然后是 process_view() 中间件，最后是适当的视图。如果它返回一个 HttpResponse 对象，Django 不会费心调用任何其他请求、视图或异常中间件或适当的视图；它将响应中间件应用于该 HttpResponse，并返回结果。

`HttpRequest`有一个`path`包含 url 的属性。使用该 url 查找`urlconf`并检查`urlconf`参数`accept-method`并返回或相应地返回`None`或相同`HttpResponse`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T08:28:55.607

@Pratik Mandrekar 感谢您提供明确的信息和文档。

我创建了一个小型应用程序来完成这种工作[https://github.com/imanhodjaev/django-besmart-common](https://github.com/imanhodjaev/django-besmart-common)

# api - 从 symfony 网站上传视频到用户 youtube 帐户

> ID：14451888
> 
> 赞同：1
> 
> 时间：2013-01-22T05:04:22.763
> 
> 标签：api, youtube

我们希望将 YouTube API 集成到我们的网站中。

我们有从亚马逊 s3 存储中获取照片和视频的网站。

我们想添加允许用户从我们的网站上传视频到他的 YouTube 帐户的功能。

我花了一整天的时间寻找它，但一无所获。

任何建议或帮助高度赞赏。

提前致谢

维奈·库尔卡尼

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T05:07:47.070

作为以前没有尝试过的人，我将从这里开始：

[https://developers.google.com/youtube/2.0/developers_guide_protocol](https://developers.google.com/youtube/2.0/developers_guide_protocol)

“此外，API 允许您的应用程序将视频上​​传到 YouTube 或更新现有视频。”

# html - 在 jsp 中包含大的静态 html 优点和缺点

> ID：14451889
> 
> 赞同：0
> 
> 时间：2013-01-22T05:04:24.453
> 
> 标签：html, jsp, jspinclude

我想知道当 JSP 中包含一个大的静态 html 文件时服务器上是否有任何问题或负载。

服务器是否在启动时加载包含文件。我知道服务器在启动时只转换和编译一次jsp。每当用户点击页面时，页面就会直接呈现为 servlet。

我和我的经理就这个问题进行了辩论。你能不能给我一些这方面的信息。我需要这样做的优点和缺点（服务器负载/客户端负载/任何相关）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T06:16:43.173

java将jsp内容翻译成一个类，基本上是这样的：

具有以下内容的 JSP 文件：

```
<div>this is regular html</div>
<%
System.out.println("this is code");
%> 
```

被翻译成：

```
out.println("<div>this is regular html</div>");
System.out.println("this is code"); 
```

其中 out 是响应输出流。

所以你所有的静态内容都将被翻译成这样的响应输出函数调用，从技术上讲，这可能比仅仅将整个文件发送回一大块要慢一些。

当使用静态内容时，也有可能在客户端进行缓存，而当您在其中嵌入动态数据时，您无法做到这一点。您也可以从 CDN 网络提供服务，而不是直接从您的应用服务器提供服务。

最后，如果这是您的系统设置方式，您可以从 Web 服务器提供所有静态数据，并从应用服务器提供动态数据，这可能是有道理的。

# mysql - 为什么 MySQL 和 SQL Server 中的“模式”不同？

> ID：14451890
> 
> 赞同：8
> 
> 时间：2013-01-22T05:04:35.810
> 
> 标签：mysql, sql-server, sql-server-2008, schema

我是数据库新手。我想知道为什么当我创建一个模式时，在 MySQL 中它是一个数据库，而在 SQL Server 中它是一个数据库内部的模式。谁能给我解释一下？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-22T05:13:29.943

**在 SQL 服务器中**

数据库模式是一种对对象进行逻辑分组的方法，例如表、视图、存储过程等。将模式视为对象的容器。您可以将用户登录权限分配给单个架构，以便用户只能访问他们有权访问的对象。可以在数据库中创建和更改模式，并且可以授予用户访问模式的权限。架构可以由任何用户拥有，并且架构所有权是可转让的。

更多详情请访问著名的 sql 权威博客 [http://blog.sqlauthority.com/2009/09/07/sql-server-importance-of-database-schemas-in-sql-server/](http://blog.sqlauthority.com/2009/09/07/sql-server-importance-of-database-schemas-in-sql-server/)

**在 MySQL 中**

创建 Schema 类似于创建数据库。 [http://dev.mysql.com/doc/refman/5.0/en/create-database.html](http://dev.mysql.com/doc/refman/5.0/en/create-database.html)

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-01-22T05:09:18.910

因为不同的供应商有不同的方式来描述、分离和描绘事物，甚至可以不同地使用相同的词。无论出于何种原因（我认为它与 Oracle 更一致），MySQL 都将模式和数据库称为同一件事，而 SQL Server 有一个可以包含多个模式的数据库。我不知道您是否可以声明它们中的任何一个“更正确”，这只是了解差异的问题，即使它们不直观。可以检查一下我认为的 ANSI 标准，看看哪个更符合标准机构的意图。

我不知道你是否真的有机会为这个问题找到一个合法的答案，让它保持话题，除非你能说服 MySQL 和 SQL Server 团队进来并说明他们为什么选择他们这样做的方式（请记住，那些在很久以前做出这些选择的人不太可能仍然在各自的团队中）。

# css - 如何固定 Div 位置始终低于另一个上 div？

> ID：14451894
> 
> 赞同：0
> 
> 时间：2013-01-22T05:05:02.350
> 
> 标签：css, html, iframe, vertical-alignment

我有一个 div，并且在该 div 的下方显示一个带有 iframe 的 div，该 iframe 将 html 页面动态加载到同一页面中。但是发生的情况是带有 iframe 的 div 覆盖了上部分，因为 iframe 包含 html haev 长高度。 .所以任何人都可以告诉我如何将包含 iframe 的 div 放在上面的 div 标签下方，而不管 iframe 中加载了哪些内容。而且我想让它在 chrome 和 mozila 中看起来一样。

以下是我的结构...

```
<div class="row-fluid">
    <div class="span3" id="media_select">
            <label
                style="float: left; padding-top: 5px; padding-bottom: 10px; padding-right: 10px; padding-left: 22px">  Media  
            </label><select style="width:125px" name="mediatype" id="mediatype"
                data-placeholder="- Select Ad Type -" class="chzn-select"
                tabindex="4">
                <option value="0">Select All</option>
                <%
                    List<mediatype> media_typelist = mediatypeLocalServiceUtil
                            .getAllMediaType();
                    for (mediatype media_typelistitem : media_typelist) {
                %>
                <option value=<%=media_typelistitem.getPrimaryKey()%>><%=media_typelistitem.getMedianame()%></option>
                <%
                    }
                %>
            </select>

        </div>
        <div class="span3">

        </div> 
```

//这是我要在上分区下方固定的div

```
<div class="bordercolor" id="mydiv" style="display: none; text-align: center">

    <IFRAME SRC="" id="reportpreview"  style="text-align: center;"
        marginheight="0" frameborder="0" onLoad="sizeFrame();"></iframe>

</div> 
```

在以下脚本中动态分配的 iframe 的高度：-

```
function sizeFrame() {
    var F = document.getElementById('reportpreview');
    if(F.contentDocument) {
    F.height = F.contentDocument.documentElement.scrollHeight+30; //FF 3.0.11, Opera 9.63, and Chrome
    } else {

    F.height = F.contentWindow.document.body.scrollHeight+30; //IE6, IE7 and Chrome

    }

    } 
```

///报告预览ID的css //一个Iframe

```
 #reportpreview {
        float:center;
        margin-top:10%;
        margin-bottom:10%;
        zoom: 1.2;
        -moz-transform: scale(1.2);
        -moz-transform-origin: 2 0;
        -webkit-transform: scale(1.2);
        -webkit-transform-origin: 2 0;
        width: 720px;
        min-height: 37px;

    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T05:22:06.600

```
 #reportpreview {
    clear:left;
    float:center;
    margin-top:10%;
    margin-bottom:10%;
    zoom: 1.2;
    -moz-transform: scale(1.2);
    -moz-transform-origin: 2 0;
    -webkit-transform: scale(1.2);
    -webkit-transform-origin: 2 0;
    width: 720px;
    min-height: 37px;
    } 
```

添加`clear:left`到 iframe div

# hadoop - WARN driver.MahoutDriver：无法添加类：org.apache.mahout.classifier.bayes.PrepareTwentyNewsgroups

> ID：14451898
> 
> 赞同：0
> 
> 时间：2013-01-22T05:05:38.443
> 
> 标签：hadoop, mahout

我是 Hadoop 和 Mahout 的新手。首先，我运行了 Mahout 提供的贝叶斯分类器的简单示例。我想获得贝叶斯训练输入数据集，所以我运行了以下命令：

```
mahout org.apache.mahout.classifier.bayes.PrepareTwentyNewsgroups

-p /Examples/20news-bydate-train

-o /示例/贝叶斯训练输入

-a org.apache.mahout.vectorizer.DefaultAnalyzer

-c UTF-8

```

但结果是

> ![在此处输入图像描述](../Images/ff3556abb6814d7dabd4553e49ed6ea2.png)

我怎么解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-02-02T13:10:41.020

从 Mahout 0.6 版开始，PrepareTwentyNewsgroups、trainclassifier、testclassifier 等 CLI API 已弃用，您可以从 examples/bin 目录运行一些 shell 脚本示例，例如运行 examples/bin/classify-20newsgroups.sh。

此问题的一种可能解决方案是退回到版本 0.6。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T09:33:18.577

如其所写：

```
 MAHOUT_LOCAL is not set 
```

因此无法找到`PrepareTwentyNewsGroups`课程。根据您的系统，设置环境变量 MAHOUT_LOCAL，例如：

```
 MAHOUT_LOCAL=/usr/local/lib/mahout
  export MAHOUT_LOCAL 
```

（将这些行放入您的 .bash_profile 文件中，或者只是放入您的 shell 中以尝试它是否正常工作）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-23T13:23:01.420

实际上，根据[http://svn.apache.org/repos/asf/mahout/trunk/bin/mahout](http://svn.apache.org/repos/asf/mahout/trunk/bin/mahout)：

> MAHOUT_LOCAL ：设置为空字符串以外的任何内容以强制 mahout 在本地运行，即使设置了 HADOOP_CONF_DIR 和 HADOOP_HOME

如果你想在本地运行 mahout，你只需要设置 MAHOUT_LOCAL。如果要在 hadoop 集群上运行它，只需设置 HADOOP_HOME 和 HADOOP_CONF_DIR。

# c++ - 模板参数本身可以模板化吗？

> ID：14451905
> 
> 赞同：4
> 
> 时间：2013-01-22T05:05:58.053
> 
> 标签：c++, templates

假设我有以下代码：

```
#include <iostream>
#include <functional>

template <int func(int)>
struct S : std::unary_function<int, int>
{
    int operator()(int x) const
    {
        return func(x);
    }
};

int foo(int x)
{
    return x;
}

int main()
{
    S<foo> s;

    std::cout << s(42) << std::endl;
} 
```

这可以作为将函数包装在函子内的一种方式，这意味着它可以在其他模板化函数中使用（例如`sort`，例如（假设函子具有正确的签名））。我不想为每种可能的返回/参数类型创建一个仿函数结构（实际上我不能），所以我尝试了以下方法：

```
template <template <typename R, // Make the return type and argument type template parameters!
                    typename A> R func(A)>
struct S : std::unary_function<R, A>
{
    R operator()(A arg) const
    {
        return func(arg);
    }
}; 
```

那没有用；[它给了我编译错误](http://ideone.com/sRddD6)。所以我尝试了：

```
template <typename R, typename A, R func(A)>
struct S : std::unary_function<R, A>
{
    R operator()(A arg) const
    {
        return func(arg);
    }
}; 
```

哪个起作用*了*。不幸的是，我不得不将实例更改`S`为 be`S<int, int, foo> s;`而不是 nicer `S<foo> s;`。

**是否有可能将作为模板参数传递的函数模板化，这样我就可以做到`S<foo> s;`而不是硬编码函数的返回类型和参数类型`S`？**

我的 google-foo 无法找到具体的答案。

*编辑*：现在我想知道这是否不可能。我只是想到“如果`foo`是重载函数怎么办？” 据我所知，没有一种方法可以知道在说时使用*哪种方法，* *因此*需要明确说明返回/参数类型。这是正确的想法吗？这是否意味着我的第一个问题的答案是“不，这不可能”？`foo``S<foo> s;`

 ** * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-22T13:07:14.913

不幸的是，我认为这是防止传递函数进行必要转换的唯一方法。但是您可以**添加函数模板来帮助您推断**(1) 函数 args (2) 函数返回的类型，如下面的代码：

```
template < typename R, typename A >
R result_of( R(A) );

template < typename R, typename A >
A arg0_of( R(A) ); 
```

然后您可以使用它们来构造想要的函数对象并让编译器进行**可能的优化**：

```
#define get_call( f ) call_t< decltype(result_of(f)), \
                              decltype(arg0_of(f)), f >()

// same as the class 'S'
template < typename R, typename A,
           R unary( A ) >
struct call_t : std::unary_function<A,R> {
    R operator()( A arg ) const {
        return unary( arg );
    }
}; 
```

使用实用程序：

```
int neg( int arg ) {
    return -arg;
}

auto s = get_call( neg );
cout << s( 1 ) << endl;  // outputs: -1 
```

它也适用于功能模板。当然，您必须将参数传递给模板：

```
template < typename T >
T square( T arg ) {
    return arg * arg;
}

template <>
int square( int arg ) {
   cout << "square<int>()" << endl;
   return arg * arg;
}

auto sq = get_call( square<int> );
cout << sq( 12 ) << endl; // outputs: square<int>()
                          //          144 
```

*编辑*：对于重载函数，您可以**进行转换**以告诉编译器您要调用哪个版本：

```
int cube( int arg ) {
    return arg * arg * arg;
}

float cube( float arg ) {
    return arg * arg * arg;
}

typedef float (*chosen)( float );
auto cu = get_call( (chosen)cube );
cout << showpoint << cu( 4 ) << endl; // outputs: 64.0000 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-22T05:30:38.090

您似乎想要一个非类型模板模板参数。但是，模板模板参数的唯一合法语法是`template < template-parameters > class`. （“模板模板参数的模板参数应是类模板或别名模板的名称，表示为 id-expression。”§ 14.3.3）

您可以创建一个模板类，其构造函数参数是函数指针，但我猜您担心会创建间接函数调用。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-22T05:49:21.207

这是不可能的。原则上与以下问题相同：您希望仅`A<100>`将 where`A`定义为：

```
template<T N>
struct A {}; 
```

给定`N`的是`100`，`T`原来是`int`。美好的。这可以由人脑推断，但编译器不能推断，即使它们 100% 符合 C++11 标准。我在这里有完全相同的问题：

*   [漂亮的打印类型和类模板及其所有模板参数](https://stackoverflow.com/questions/14092058/pretty-print-types-and-class-template-along-with-all-its-template-arguments)

--

所以我认为的替代解决方案是：

```
template <typename R, typename A>
struct S : std::unary_function<R, A>
{
    typedef R (*Fun)(A);
    Fun func;
    S(Fun f) : func(f) {}
    R operator()(A arg) const
    {
        return func(arg);
    }
}; 
```

然后将`MakeS`函数定义为：

```
template<typename R, typename A>
S<R,A> MakeS(R (*fun)(A)) 
{  
    return S<R,A>(fun); 
} 
```

您可以将其用作：

```
auto s = MakeS(foo); 
```

或者，简单地说：

```
S<int,int> s(foo); 
```

这种替代方案的缺点是该函数`foo`现在没有任何内联的机会。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-22T06:29:58.323

这对你有用吗？

它可能不如`S<foo>`但在实例化时将参数保持为 1。

```
int f(int) { return 0; }

template<class R, class A> struct S
{
    typedef R(*FTYPE)(A);
    typedef R RET;
    typedef A ARG;
};

template<class R, class A> S<R, A> FW(R(f)(A));

template<class T> struct F  : std::unary_function<typename T::RET, typename T::ARG>
{

};

int main()
{
    F<decltype(FW(f))> o;
} 
```*

# c - 给出长度为 48 或更高的字符串时出现段错误

> ID：14451908
> 
> 赞同：1
> 
> 时间：2013-01-22T05:06:07.603
> 
> 标签：c

我写了一个函数，它接受一个字符串并简单地以这种格式对字符串进行编码（如果你愿意的话，压缩）：input = aassda，output = 2a2s1d1a。我的问题是，如果我输入一个 47 个字符或更长的字符串，我会出现段错误。我附上了下面的功能。我大约一周前开始使用 C，所以请多多包涵 =/

编辑：任何改进建议也会很好。我知道我可以使代码更高效，但是我来自 python 的小背景，我决定以最直接的方式来做。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T05:19:03.460

`string`只是一个垃圾指针。它永远不会被设置，它永远不会与任何内存相关联。您要么需要`malloc()`一些内存`string`（完成后不要忘记`free()`它！），要么需要将其设为数组。也就是说，您的两个选择是：

使用`malloc()`/ `free()`：

```
int main()
{
    char* string = malloc(51); // Room for 51 chars (50 letters and 1 null terminating character)

    printf("Please input a string of at most 50 chars: ");
    scanf("%s", string);
    lame_function(string);

    free(string);
} 
```

使用数组：

```
int main()
{
    char string[51]; // Room for 51 chars (50 letters and 1 null terminating character)

    printf("Please input a string of at most 50 chars: ");
    scanf("%s", string);
    lame_function(string);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T07:07:34.143

**缓冲区溢出仍然存在。**

请看以下两个代码片段。

```
char* string = malloc(51);
char string[51]; 
```

这两个语句都足以为 50 个字符分配空间。scanf() 呢？

```
scanf("%s", string); 
```

这会确保用户最多只能提供 50 个字符吗？没有永不。如果用户输入超过 50 个字符会怎样？. 所以你应该使用一些方法来防止溢出。为此，您可以在循环中使用**getc()函数。****下面使用fgets()**描述另一种简单的方法。

```
fgets(str, 50, stdin);
i = strlen(str)-1;
  if( str[ i ] == '\n') 
      str[i] = '\0'; 
```

fgets() 将读取最多 50 个字符或当用户按下回车按钮时，从键盘的标准输入。如果最后一个字符是 '\n'，则使用 '\0' 将其作为字符串的结尾。现在溢出问题已经完全解决了。

# mysql - 获取表中每一行的时差

> ID：14451912
> 
> 赞同：0
> 
> 时间：2013-01-22T05:06:34.560
> 
> 标签：mysql

我正在开发一个在线考勤卡系统，但遇到了障碍。我需要做的是在每一行中计算员工可能每天多次进出的日期和日期`timeIn`。`timeOut`我有一个工作查询来查找一整天的总数，但不是每一行。我已经包含了数据库表的结构以及我希望看到的一些示例。

```
+----+------------+----------+---------+------------------------------+-------------+------------+-----------+----------+
| id | employeeID | date     | timeIn  | jobDescription               | equipType   | unitNumber | unitHours | timeOut  |
+----+------------+----------+---------+------------------------------+-------------+------------+-----------+----------+
|  8 |          1 | 01/15/13 | 7:00 AM | Loaded sand in Jefferson     | Excavator   | 345        |      NULL | 9:30 PM  |
|  9 |          1 | 01/15/13 | 10:00 AM | Loaded sand in Jefferson     | Excavator   | 345        |      NULL | 12:00 PM |
| 10 |          1 | 01/16/13 | 7:00 AM | Loaded sand in Jefferson     | Excavator   | 345        |      NULL | 5:30 PM  |
| 11 |          1 | 01/17/13 | 7:00 AM | Loaded sand in Jefferson     | Excavator   | 345        |      NULL | 5:30 PM  |
| 12 |          1 | 01/18/13 | 8:00 AM | Backfill in Whispering Creek | Skid Loader | 297        |      NULL | 5:30 PM  |
| 13 |          1 | 01/19/13 | 8:00 AM | Backfill in Whispering Creek | Skid Loader | 297        |      NULL | 3:30 PM  |
|  1 |          1 | 01/20/13 | 6:00    |                              | Excavator   | 01E        |      7238 | 17:00    |
|  2 |          1 | 01/21/13 | 6:00    | Worked in Jefferson          | Excavator   | 01E        |      7238 | 17:00    |
|  3 |          1 | 01/22/13 | 6:00    | Worked in Jefferson          | Excavator   | 02E        |      7238 | 17:30    |
|  4 |          1 | 01/23/13 | 6:00    | Worked in Whispering Creek   | Skid Loader | 32SL       |      2338 | 18:30    |
|  5 |          1 | 01/24/13 | 8:00    | Worked in Hubbard            | Scraper     | 54C        |      9638 | 11:30    |
|  6 |          1 | 01/25/13 | 8:00    | Worked in Jefferson          | Dozer       | 4D         |       941 | 19:30    |
|  7 |          1 | 01/26/13 | 8:00    | Pushed Snow                  | Loader      | 950H       |       342 | 20:30    |
+----+------------+----------+---------+------------------------------+-------------+------------+-----------+----------+ 
```

好的，所以我想看到的是，例如，日期以不同的值`01/15/13`出现两次，我想得到一个值，说在 id 8 的行中有 2:30 小时，然后得到另一个值，说在 id 为 9 的行中有 2:00 小时。如果可能的话，我想用一个查询来完成这个。`timeIn``timeOut`

这是我获取一整天时间的查询：

```
SELECT `employeeID`, SEC_TO_TIME(SUM(TIME_TO_SEC(TIMEDIFF(`timeOut`, `timeIn`))))   AS `totalTime` FROM `timeRecords` WHERE   `date` = "01/15/13"  AND `employeeID` = 1 GROUP BY `employeeID`; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T05:18:37.900

如果我理解正确，你需要这个吗？

```
SELECT `employeeID`, TIMEDIFF(`timeOut`, `timeIn`)  AS `totalTime` FROM `timeRecords`; 
```

您可以使用`PDO query`查询返回结果集作为关联数组数组的数据库。为了获得更好的性能，您可以使用`PDO prepare/execute`.

```
<?php
function getTimeByRow($connection) {
    $sql = "SELECT `employeeID`, TIMEDIFF(`timeOut`, `timeIn`)  AS `totalTime` FROM `timeRecords`";
    foreach ($connection->query($sql) as $row) {
        print $row['employeeID'] . "\t";
        print $row['totalTime'] . "\n";
    }
}
?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T05:19:37.767

所以你想做这样的事情：

从 timeRecords 中选择 employeeID、date、TIMEDIFF(timeout, timein)，其中 date = x 和 employeeID = y

# php - PHP_SELF 调用同一个文件

> ID：14451914
> 
> 赞同：3
> 
> 时间：2013-01-22T05:06:43.873
> 
> 标签：php

```
<?php
if(isset($_POST['submit'])) 
{ 
    $name = $_POST['name'];
    echo "User Has submitted the form and entered this name : <b> $name </b>";

}
?>
<form method="post" action="<?php echo $_SERVER['PHP_SELF']; ?>">
   <input type="text" name="name"><br>
   <input type="submit" name="submit" value="Submit Form"><br>
</form> 
```

我只希望在提交后运行部分并在单击提交表单按钮后不应该看到显示表单

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-22T05:09:09.533

在 else 部分中编写您的 html 表单代码。

```
<?php
if(isset($_POST['submit'])) 
{ 
    $name = $_POST['name'];
    echo "User Has submitted the form and entered this name : <b> $name </b>";

} else {
?>
<form method="post" action="<?php echo $_SERVER['PHP_SELF']; ?>">
   <input type="text" name="name"><br>
   <input type="submit" name="submit" value="Submit Form"><br>
</form>

<?php } ?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T05:09:18.823

使用[退出](http://php.net/manual/en/function.exit.php)。

```
if(isset($_POST['submit']) {
    $name = $_POST['name'];

    echo "User has submitted the form and entered this name : <b> $name </b>";

    exit;
} 
```

# php - 如何验证 PayPal 退货数据？

> ID：14451917
> 
> 赞同：2
> 
> 时间：2013-01-22T05:07:11.030
> 
> 标签：php, validation, paypal, payment-gateway, paypal-sandbox

我正在整合贝宝，我已经正确地完成了。我已经设置了返回 URL，所以它在 url 中给了我下面的结果集`$_GET`。

```
Array ( [tx] => 7XV08083GT683520Y [st] => Completed [amt] => 22.16 [cc] => USD [cm] => [item_number] => item_number ) 
```

我担心的是无法验证从 Paypal 返回的数据。我体验过其他支付网关。其他支付网关允许您这样做`hashMatch`，以确保表单提交的数据未被编辑。

我的表格如下。

```
<form method="post" action="https://www.sandbox.paypal.com/cgi-bin/webscr">
<!-- Identify your business so that you can collect the payments. -->
<input type="hidden" value="dasun_1358759028_biz@archmage.lk" name="business">
<!-- Specify a Buy Now button. -->
<input type="hidden" value="_xclick" name="cmd">
<!-- Specify details about the item that buyers will purchase. -->
<input type="hidden" value="AM Test Item" name="item_name">
<input type="hidden" value="22.16" name="amount">
<input type="hidden" name="currency_code" value="USD">
<input type="hidden" value="item_number" name="item_number">
<!-- Display the payment button. -->
<input type="image" name="submit" border="0" src="https://www.paypalobjects.com/en_US/i/btn/btn_buynow_LG.gif" alt="PayPal - The safer, easier way to pay online">
<img alt="" border="0" width="1" height="1" src="https://www.paypalobjects.com/en_US/i/scr/pixel.gif" >
</form> 
```

我的php代码输出

```
 <input type="hidden" value="50.16" name="amount"> 
```

但是我使用了萤火虫并将其编辑到下面并付款。

```
<input type="hidden" value="22.16" name="amount"> 
```

我仍然得到结果，因为它是`Completed`付款，但它不应该是因为我手动进行了更改。任何有知识的人都可以编辑它们。我如何确保这是一笔有效的付款？如何确保不会像我一样编辑表单数据？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T18:28:39.620

任何重要且需要数据库交互的东西都应该使用 Paypals IPN 来处理必须验证的数据。本质上，Paypal 将在您的网站上发布带有数据的 URL，而您的脚本必须将确切的数据发布回来，并加上一个命令来验证数据是否确实正确。在 Paypal 给出“已验证”响应后，您将更新您的数据。

另一种选择是使用 Paypal 的快速结帐，基本上你得到一个“ok”来向客户收取“x”金额，一旦客户同意支付金额，你将数据发布到 Paypal 与客户的“协议”，你会如果交易完成与否，得到响应。

[https://www.paypal.com/ipn](https://www.paypal.com/ipn)

[https://www.x.com/developers/paypal/documentation-tools/express-checkout/integration-guide/ECGettingStarted](https://www.x.com/developers/paypal/documentation-tools/express-checkout/integration-guide/ECGettingStarted)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T00:25:55.137

您可以尝试其中一些：

1) 在 PayPal 网站上创建一个加密按钮

2) 使用加密网站支付 (EWP) 动态加密按钮

可在： http: [//www.paypalobjects.com/en_US/ebook/PP_WebsitePaymentsStandard_IntegrationGuide/encryptedwebpayments.html](http://www.paypalobjects.com/en_US/ebook/PP_WebsitePaymentsStandard_IntegrationGuide/encryptedwebpayments.html)

此外，这个 SO 链接有一些细节： [Dynamic PayPal button generation - 是不是很不安全？](https://stackoverflow.com/questions/6322247/dynamic-paypal-button-generation-isnt-it-very-unsecure)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-22T05:13:35.293

在重定向到贝宝之前，将您的数据存储在数据库中（product_id、金额、数量等）

从 payapl 返回后，使用您的数据库检查返回值。

这是正确的做法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-23T06:45:58.867

如果您想通知您是否从贝宝返回，您应该使用贝宝 API 而不是“立即购买”按钮 API 提供更多的灵活性和权力来控制您的支付过程

# c - switch 语句的效率

> ID：14451919
> 
> 赞同：0
> 
> 时间：2013-01-22T05:07:35.960
> 
> 标签：c, switch-statement, performance

我目前正在编写快速排序算法的实现，并且我有一个效率问题，特别是关于对数组进行分区。我在排序之前对数组进行分区的方式涉及选择枢轴或分区元素作为数组中的第一个元素（我知道。这不是最有效的方法），然后设置两个变量 - “高”和“低” - 分别是数组的最后一个索引和第一个索引。我有一个 while 循环设置，它通过切换某些元素并递增和递减低和高直到它们相等来对数组进行分区。

我的问题是我正在使用 switch 语句来控制要移动的索引，而不是设置两个单独的 while 循环来执行此操作。在这种情况下使用 switch 语句是否更有效？

以下是相关代码：

```
 //used to determine which side of the array to move the element to
    #define RIGHT 1
    #define LEFT 0

    void partition( int nums[], int size )
    {
         int pivot = nums[0], low = 0, high = size - 1, turn = LEFT;

         while ( low != high )
         {

             switch (turn)
             {
                case RIGHT:
                     if ( nums[low] >= pivot )
                     {
                         nums[high] = nums[low];
                         high--;
                         turn = LEFT;
                     }
                     else
                         low++;
                     break;

                case LEFT:
                     if ( nums[high] <= pivot )
                     {
                         nums[low] = nums[high];
                         low++;
                         turn = RIGHT;
                     }
                     else
                         high--;
                     break;
            }
        }

        nums[low] = pivot;
     } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T05:12:56.163

如果不进行实际测试，您将无法知道。编译器有时可以做一些令人惊奇的事情（无论好坏都令人惊讶）。一般来说，我希望它更快地转移到两个循环，因为状态保存在程序计数器中，但编译器可能会这样做或更好。它也会随着编译时的优化设置而变化。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T05:21:54.863

### 我的猜测是两个循环，但测量

通常最好将不变表达式从循环中向外移动。这种优化称为[*代码提升。*](http://en.wikipedia.org/wiki/Loop-invariant_code_motion)或*循环不变的代码运动。* 它获胜的原因很明显。现在，在您的情况下，编译器不清楚什么是不变的，但您知道*turn*变量的变体比*low*和*high**少*。

 **所以，我的猜测是两个循环更好，但唯一确定的方法是测量它。**

# macos - 如何查找没有扩展名的图像文件（在 macOS 10.8 上）

> ID：14451922
> 
> 赞同：0
> 
> 时间：2013-01-22T05:07:58.237
> 
> 标签：macos, grep

我有一个决定死掉的应用程序，它有一个图像库，它存储在我的硬盘驱动器上的一系列类似 guid 的文件夹中。文件本身没有文件扩展名，必须有一个内部数据库（不可恢复/损坏）将文件本身与其名称/扩展名/mime相关联。因此，为了找回我的东西，我希望能够搜索磁盘以至少识别哪些文件是图像（jpeg 和 png 文件）。我知道 jpeg 和 png 在文件的前几个字节中都有特定的字节序列。是否有一个 grep 命令可以匹配我拥有的大规模嵌套文件系统结构中每个文件的前几个字节中的这些已知字节序列（例如，文件夹 0 到 f，每个文件夹包含文件夹 0 到 f，嵌套几级深，与带有 uid 文件名的文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T05:18:43.977

从当前目录开始`.`：

```
find . -type f -print0 | xargs -J fname -0 -P 4 identify -ping fname 2>|/dev/null 
```

这将打印 ImageMagick 可以识别的文件，主要是图像，但也有例外（如 txt 文件）。ImageMagick 对于这项任务也不是特别快，因此根据您可用的内容，可能会有更快的替代方案。例如，`PIL`Python 的包将使其更快，因为它支持较少数量的图像格式，但这可能足以满足您的任务。

# c# - 在每个选中的列表框上显示选择的列表框

> ID：14451923
> 
> 赞同：0
> 
> 时间：2013-01-22T05:08:01.243
> 
> 标签：c#, javascript, jquery, asp.net, checkbox

我有一个`asp:CheckBoxList`从数据库加载项目。

我想写一个显示没有的脚本。每张支票上的选中复选框。
我的 aspx 页面如下：

```
<div id="rfd-demo-zone2" class="placeholderContent accordionEmpGroup-child-subGroup-container">
   <asp:CheckBoxList  ID="ckbList2DesignationUc" runat="Server" RepeatLayout="Flow" RepeatDirection="Horizontal" Width="100%" ></asp:CheckBoxList>          
</div> 
```

**脚本 ：**

```
<script type="text/javascript">
    $('#ckbList2DesignationUc input:checked').each(function () {
        alert('hi');
    });
</script> 
```

在上面的脚本中，我试图得到一个警报，但它没有显示

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T05:27:45.060

可能的解决方案：

```
<div id="rfd-demo-zone2" class="placeholderContent accordionEmpGroup-child-subGroup-container">
      <asp:CheckBoxList  ID="ckbList2DesignationUc" runat="Server" RepeatLayout="Flow" RepeatDirection="Horizontal" Width="100%" >
      </asp:CheckBoxList>          
 </div> 
```

并访问它：

```
 $("#<%=ckbList2DesignationUc.ClientID %> input[type=checkbox]:checked").each(function() {  
      alert('checked');
  }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T09:37:18.660

这可能会对您有所帮助：您可以在文件后面的代码以及脚本标签内使用它`enable AutoPostBack property of checkboxlist to true`

```
protected void CheckBoxList1_SelectedIndexChanged(object sender, EventArgs e)
{
    int i=0;            
    foreach (ListItem li in CheckBoxList1.Items)
    {
        if (li.Selected)
            i++;
    }
    Response.Write(i);           
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-22T05:50:55.933

**客户端：**

```
 $('.CheckBoxList').each(function () {
           var items = new Array();
               $(this).find("input:checkbox").each(function () {
                   if ($(this).attr("checked") == true) {
                        items[items.length] = $(this).next().html();
                     }
                   });
                   $(this).parent().find('.txtList').val(items.toString());
             }); 
```

**html标记：**

```
<asp:TextBox runat="server" ID="txtabc" CssClass="txtList txtformatcss" Width="160px" ViewStateMode="Disabled"></asp:TextBox>
    <asp:CheckBoxList ID="chkabc" runat="server"                                      
         RepeatLayout="Flow" CssClass="CheckBoxList">
 </asp:CheckBoxList> 
```

这 `CheckBoxList`是在复选框列表控件中给出的类名

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-22T05:10:07.950

将脚本放入[document.ready](http://api.jquery.com/ready/)以确保 html 元素对脚本的可用性，并使用[属性 contains 选择器](http://api.jquery.com/attribute-contains-selector/)来查找复选框列表的复选框。

```
<script type="text/javascript">
     $(document).ready(function(){
        $('[id*=ckbList2DesignationUc]:checked').each(function () {
            alert('hi');
        });
     });
</script> 
```

在复选框更改时触发事件

```
<script type="text/javascript">
     $(document).ready(function(){
        $('[id*=ckbList2DesignationUc]').change(function () {
            alert(this.id);
        });
     });
</script> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-22T05:37:26.797

试试下面的代码：

**解决方案-1** 每当您选中复选框时，警报都会显示复选框中选中项目的值。

Javascript代码：

<脚本类型="文本/javascript">

```
 function itemClick(radioButton) {
             var Control;
             var selectedItems;
             selectedItems = '';
             Control = document.getElementById("<%=ckbList2DesignationUc.ClientID %>").getElementsByTagName("input");
             for (var i = 0; i < Control.length; i++) {
                 if (Control[i].checked == true)
                     selectedItems += i.toString()+',';
             }
             alert(selectedItems);
         }

</script> 
```

ASPX 代码：

```
protected void Page_Load(object sender, EventArgs e)
    {
        for (int index = 0; index < 10; index++)
        {
            ckbList2DesignationUc.Items.Add(new ListItem("Item" + index, index.ToString()));
        }
        foreach (ListItem Li in ckbList2DesignationUc.Items)
        {
            Li.Attributes.Add("onclick", "return itemClick()");
        }

    } 
```

使用 Jquery 所需的解决方案：

**解决方案-2**

```
< script type="text/javascript">

    $(document).ready(function () {
        var selectedCheckBoxes = '';
        $('#ckbList2DesignationUc').each(function () {
            var items = new Array();
            $(this).find("input:checkbox").each(function () {
                $(this).click(function () {
                    selectedCheckBoxes += $(this).val() + ",";
                    alert(selectedCheckBoxes);
                });
            });
        });

    });
< /script>

< asp:CheckBoxList  ID="ckbList2DesignationUc" runat="Server" RepeatLayout="Flow" RepeatDirection="Horizontal" Width="100%">
                < /asp:CheckBoxList> 
```

# jquery - 更改 jQuery 对话框窗口位置

> ID：14451925
> 
> 赞同：2
> 
> 时间：2013-01-22T05:08:12.097
> 
> 标签：jquery, html, css, user-interface, dialog

我正在使用 jQuery 中的对话框，[http://jqueryui.com/dialog/#modal-message](http://jqueryui.com/dialog/#modal-message) 它工作得非常好，我似乎无法移动对话框窗口的位置。

我如何实现这一目标？我尝试在它的 CSS 中查找代码，尝试检查元素和所有内容，它就是不让步。

我究竟做错了什么？我在哪里实际修改它？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-22T05:14:40.957

您可以通过设置`Position`

作为

见**[演示](http://jsfiddle.net/dreadwarrior/3d7QC/12/)**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T06:31:15.673

如果要拖动此弹出窗口，只需定义

`draggable: true,`

如果想改变弹出窗口的位置，只需定义垂直和水平位置

`position: ['center', 'top']`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-22T05:16:10.543

您可以在构建时设置“位置”设置：

[http://api.jqueryui.com/dialog/#option-position](http://api.jqueryui.com/dialog/#option-position)

# entity-framework - 我可以修复实体框架代码优先迁移吗？

> ID：14451932
> 
> 赞同：1
> 
> 时间：2013-01-22T05:08:56.847
> 
> 标签：entity-framework, ef-code-first, entity-framework-migrations

背景：

我正在使用 Entity Framework Code First 开发一个应用程序，并且一直在使用我的 POCO 模型尽可能多地描述数据库模式。但是，在少数情况下，只有迁移 API 支持您想要的（例如添加索引）。直到稍后我才开始添加迁移，此时重新创建数据库要快得多，但这似乎是唯一的选择。

所以我想我会看看我是否可以看看迁移是否可行。我计划最终使用它们，我希望我能够调整初始迁移或在我去的时候重新生成它，直到是时候进行真正的迁移了。但是，我对这种方法也没有真正的运气。实体框架的代码迁移似乎存在根本缺陷，因为它们强制将模式存储（序列化）作为迁移的一部分。

对我来说，这意味着无法调整迁移，因为我无法更新`Target`属性（本质上是我模型的序列化版本）。我也无法重新生成迁移，因为无法单独表达索引。部分问题是迁移的工作方式迫使它们以串行方式进行，当我想更新过去的迁移或有多个开发人员时，这很糟糕。

因此，我选择只使用`context.Database.ExecuteSqlCommand`添加索引，但是我想弄清楚这种迁移限制是否会在未来发生变化，或者我是否可以解决它。

问题：

**有没有办法更新`IMigrationMetadata`现有迁移，有没有办法进行不需要在`Target`现场找到的元数据的迁移？**

# c - 奇怪的记忆问题？

> ID：14451934
> 
> 赞同：4
> 
> 时间：2013-01-22T05:09:08.400
> 
> 标签：c, linux, memory, gcc

我遇到了一个有趣的问题，我希望这完全是我的错。

我有从队列中读取的代码，如：

```
 do {
    evt       = &newevts[ evt_head++ ];
    evt_head &=  MAX_EVENTS;

    if (evt->index <= 0 || evt->index > MAX_INDEX) {
         printf("RX EVENT BAD NDX: ndx=%d h=%d\n",evt->index, evt_head);
         continue;
    }

    //... etc ...

 } while(evt_head != evt_tail) ; 
```

奇怪的问题是 if 语句可以评估为 evt->index 是一个坏值，但是当 printf 显示它显示一个完全有效的值！例子：

```
RX EVENT BAD NDX: ndx=1 h=64 
```

if 语句清楚地表明条件必须是 <= 0 OR > 1024（最大索引）。更糟糕的是，这种情况只会偶尔发生一次。我正在使用 GCC，Centos 6.3。除此线程外，没有线程接触 evt_head。（我已经将它重命名了几次并重新编译以确保它。）

尾部由一个函数处理，该函数以与头部删除它们相同的方式将项目添加到队列中（递增然后 AND）。我还在事件结构本身内添加了一个计数器来记录头/尾值，因为事件被放入队列中，并且没有发现丢失或跳过的值。从字面上看，我好像读到了一些糟糕的记忆。但这太荒谬了——如果是这样的话，我希望系统崩溃或至少程序崩溃。

关于这在世界上如何偶尔发生的任何想法？（频率约为 100 次读取中的 1 次）我感谢任何输入！

```
typedef struct {
    int    index;
    int    event;
} EVENT;

#define  MAX_EVENTS  0x01ff
#define  MAX_INDEX   1024 
```

没有线程或其他代码触及 evt_head。只有这个循环。队列永远不会接近满员。我也碰巧在进入添加到队列的例程时有一个“SPIN LOCK”（以准备稍后被其他线程访问），并在退出时有一个 UNLOCK。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T06:09:45.990

我的猜测是，将事件添加到尾部的函数会`evt_tail`在写入`index`字段之前发生变化。这允许您的读者访问仍在编写过程中的事件。

# wget - wget为什么不能下载文件？

> ID：14451942
> 
> 赞同：3
> 
> 时间：2013-01-22T05:09:31.197
> 
> 标签：wget

有一个网址：

```
http://118.26.57.16/1Q2W3E4R5T6Y7U8I9O0P1Z2X3C4V5B/218.11.178.160/edge.v.iask.com/95687694.hlv?KID=sina,viask&Expires=1358956800&ssig=WHgIi1wQOW&wsiphost=ipdbm 
```

你可以用chrome或firefox下载它，为什么我不能下载它：

```
wget -c http://118.26.57.16/1Q2W3E4R5T6Y7U8I9O0P1Z2X3C4V5B/218.11.178.160/edge.v.iask.com/95687694.hlv?KID=sina,viask&Expires=1358956800&ssig=WHgIi1wQOW&wsiphost=ipdbm 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-22T05:15:33.033

由于 URL 中的特殊字符 ('&')，您需要将 URL 放在引号中：

```
wget -c "http://118.26.57.16/1Q2W3E4R5T6Y7U8I9O0P1Z2X3C4V5B/218.11.178.160/edge.v.iask.com/95687694.hlv?KID=sina,viask&Expires=1358956800&ssig=WHgIi1wQOW&wsiphost=ipdbm" 
```

您也可以转义特殊字符，但将 URL 括在引号中可能是最简单的。

# android - 图像视图中的Android图像未显示

> ID：14451943
> 
> 赞同：0
> 
> 时间：2013-01-22T05:09:31.020
> 
> 标签：android, android-imageview

我正在尝试使用相机意图拍照，将图像保存在 sdcard 中，将文件路径保存在按钮单击方法的共享首选项中，并在另一个活动中显示相同的图像，但图像不显示。

这是我的代码

**拍照布局：**

```
<RelativeLayout
    android:id="@+id/relativeLayout2"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content" >

    <ImageView
        android:id="@+id/image1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:src="@drawable/ic_launcher" />

    <LinearLayout
        android:id="@+id/linearLayout1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentRight="true"
        android:orientation="vertical" >

        <Button
            android:id="@+id/remove1"
            style="@style/SmallButtonText"
            android:background="@drawable/loginbutton"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:text="@string/btn_remove" />

        <Button
            android:id="@+id/take1"
            style="@style/SmallButtonText"
            android:background="@drawable/loginbutton"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="@string/btn_take" />
    </LinearLayout>
</RelativeLayout> 
```

**拍图片代码：**

```
Intent intent1 = new Intent(MediaStore.ACTION_IMAGE_CAPTURE);
imageName1 = "image"+String.valueOf(System.currentTimeMillis()) + ".jpg"; 
File file = new File(Environment.getExternalStorageDirectory(),"/new/images/"+     imageName1);
intent1.putExtra(MediaStore.EXTRA_OUTPUT, imageUri1);
imageUri1 = Uri.fromFile(file)       
startActivityForResult(intent1, IMAGE_CAPTURE);

protected void onActivityResult(int requestCode, int resultCode, Intent data) 
{
    super.onActivityResult(requestCode, resultCode, data);
    if (resultCode == RESULT_OK) {
        if(requestCode == IMAGE_CAPTURE)
        {
            Bundle b = data.getExtras(); 
            Bitmap pic = (Bitmap)b.get("data");
            if (pic != null) {
                pictureHolder1.setImageBitmap(pic);
            }
        }
    }
}

onbtnclick()
{
    SharedPreferences image1Pref = getSharedPreferences("images",MODE_PRIVATE);
    Editor et=image1Pref.edit();
    et.putString("image1",imageName1);
    et.commit();
} 
```

**另一个活动布局：**

```
<ImageView
 android:id="@+id/pic1"
 android:layout_width="match_parent"
 android:layout_height="wrap_content"
 android:src="@drawable/ic_launcher" /> 
```

**活动代码：**

```
SharedPreferences image1Pref = getSharedPreferences("images",MODE_PRIVATE);
String picName=image1Pref.getString("image1","");
File piFile1 =new File(Environment.getExternalStorageDirectory(),"/new/images/"+picName);

if(piFile1!=null)
{
    Bitmap bitmap1 = BitmapFactory.decodeFile(piFile1.getAbsolutePath());
    pic1.setImageBitmap(bitmap1);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T05:24:05.690

只需将图像设置如下：

> ```
>  if(piFile1!=null)
>   {
>       Bitmap bitmap1 = BitmapFactory.decodeFile(piFile1.getPath()); <<<Change this line.
>       pic1.setImageBitmap(bitmap1);
>   } 
> ```

# memory-management - 确定程序的内存访问模式

> ID：14451949
> 
> 赞同：2
> 
> 时间：2013-01-22T05:10:39.660
> 
> 标签：memory-management, system-calls

我想提取程序访问的所有虚拟内存地址以及访问这些内存地址的顺序。Windows（首选）或 Linux 上是否有一些工具/系统调用可以让我这样做？

假设有一个程序 P 访问内存地址 m1、m2、m3 等。我想记录访问了哪些地址以及访问这些地址的顺序。我也想知道内存地址是属于栈还是堆。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-14T18:45:29.840

您需要的是一种用于动态二进制检测的工具。我目前正在使用的一个著名的是[Intel Pin](http://pintool.org/)。请注意，您必须大量阅读和审查示例才能产生功能性的东西。

# android - getResponse() 上的错误

> ID：14451955
> 
> 赞同：1
> 
> 时间：2013-01-22T05:11:22.203
> 
> 标签：android, android-ksoap2

我是 android 新手，我正在尝试 Web 服务的一个示例。我用过 ksoap2 库。我关注了一个视频并输入了以下代码：

```
package example.web;

import android.R.anim;
import android.app.Activity;
import android.os.Bundle;
import org.ksoap2.*;
import org.ksoap2.serialization.*;
import org.ksoap2.transport.*;
import android.widget.TextView;

public class First extends Activity {
/** Called when the activity is first created. */
    TextView tv;
    private static final String                SOAP_ACTION="http://tempuri.org/CelsiusToFahrenheit";
    private static final String METHOD_NAME="CelsiusToFahrenheit";
    private static final String NAMESPACE="http://tempuri.org/";
    private static final String URL="http://www.w3schools.com/webservices/tempconvert.asmx";

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        tv = (TextView) findViewById(R.id.textView1);

        // creating the soap request and all its paramaters
        SoapObject request= new SoapObject(NAMESPACE, METHOD_NAME);
        request.addProperty("Celsius","32");// hardcoding some random value
        //we can also take in a value in a var and pass it there

        //set soap envelope,set to dotnet and set output
        SoapSerializationEnvelope soapEnvelope = new SoapSerializationEnvelope(SoapEnvelope.VER11);
        soapEnvelope.dotNet=true;
        soapEnvelope.setOutputSoapObject(request);

        HttpTransportSE obj = new HttpTransportSE(URL);
        //to make call to server
        try {
            obj.call(SOAP_ACTION,soapEnvelope);// in out parameter
        SoapPrimitive resultString=(SoapPrimitive)SoapEnvelope.getResponse();
        tv.setText("Status : " + resultString);
        }
        catch(Exception e) {
        e.printStackTrace();
        }
    }
}

SoapPrimitive resultString=(SoapPrimitive)SoapEnvelope.getResponse(); 
```

在上面的行中，我遇到了`getResponse();` 请有人帮助我的错误。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-01-22T06:24:12.073

**尝试将您的更改** `SoapEnvelope` **为** `soapEnvelope` **并在内部获取结果，** `SoapObject`**而不是** `SoapPrimitive`

```
try
{
    obj.call(SOAP_ACTION,soapEnvelope);// in out parameter
    SoapObject resultString = (SoapObject) soapEnvelope.getResponse();
    tv.setText("Status : " + resultString);
}
catch (Exception e) 
{
    SoapObject resultString = (SoapObject)soapEnvelope.bodyIn; 
} 
```

希望对你有所帮助！！

# mysql - 我的 Joomla 网站因此错误 SQL 代码而崩溃

> ID：14451959
> 
> 赞同：-3
> 
> 时间：2013-01-22T05:12:04.760
> 
> 标签：mysql, joomla, database-connection, joomla2.5

所以我的joomla网站崩溃给我这个错误，奇怪的是另一个人同时在我的网站上在另一个州仍然让我的网站为他工作...当我尝试保存信息以发布时它崩溃了数据库..以下是错误，我将不胜感激并永远感激任何解决此问题的提示！谢谢 ！！顺便说一句，我在星巴克浏览它，每个人都在使用 wifi ......

```
Error loading module MySQL server has gone away SQL=SELECT m.id, m.title, m.module, m.position, m.content, m.showtitle, m.params, mm.menuid FROM pwo3d_modules AS m LEFT JOIN pwo3d_modules_menu AS mm ON mm.moduleid = m.id LEFT JOIN pwo3d_extensions AS e ON e.element = m.module AND e.client_id = m.client_id WHERE m.published = 1 AND e.enabled = 1 AND (m.publish_up = '0000-00-00 00:00:00' OR m.publish_up <= '2013-01-22 04:58:42') AND (m.publish_down = '0000-00-00 00:00:00' OR m.publish_down >= '2013-01-22 04:58:42') AND m.access IN (1,1,2,3) AND m.client_id = 0 AND (mm.menuid = 207 OR mm.menuid <= 0) ORDER BY m.position, m.ordering

Warning: Invalid argument supplied for foreach() in /home/content/72/9959172/html/libraries/joomla/database/database/mysql.php on line 383

Warning: Invalid argument supplied for foreach() in /home/content/72/9959172/html/libraries/joomla/database/database/mysql.php on line 383

Warning: Invalid argument supplied for foreach() in /home/content/72/9959172/html/libraries/joomla/database/table.php on line 406
An error has occurred.
The requested page cannot be found.
Home Page

If difficulties persist, please contact the System Administrator of this site and report the error below. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T05:34:43.237

```
Warning: Invalid argument supplied for foreach() 
```

`foreach`您应该使用**[is_array](http://php.net/manual/en/function.is-array.php)**函数检查您传递给的是一个数组

如果您不确定它是否是一个数组，您可以随时使用以下 PHP 示例代码进行检查：

```
if (is_array($variable)) {

  foreach ($variable as $item) {
   //do something
  }
} 
```

这意味着您的 SQL 也有错误，因为据我所知，它不会向 foreach 返回任何数据。确保您的 SQL 是正确的。

# php - 在产品页面 Magento 上自动选择可下载的产品链接

> ID：14451960
> 
> 赞同：0
> 
> 时间：2013-01-22T05:12:11.050
> 
> 标签：php, magento

嗨，我的网站上有可下载的产品，产品页面上有一个必填字段（复选框）。客户每次都必须选中复选框才能添加到购物车。我想勾选自动选中，这样客户就不必手动检查了。

关于如何做到这一点的任何建议？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T09:07:55.540

您可以将“链接可以单独购买”设置为否以删除该复选框：

![magento 后端](../Images/617273a156a58c6f10f24ec1a84abe8a.png)

你会得到这个：

![magento 前端](../Images/71f00daedbbe7fc277a29d86faccb33a.png)

如果您只是在寻找一种方法来设置默认值而不是强制它，这可能是不可取的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T09:03:55.067

我假设复选框来自产品选项？Magento 不支持它们的默认值，但有一个扩展：[Magento Configurable Product Default Options Extension](http://icebergcommerce.com/software/magento-configurable-product-default-options-extension.html)

它不是免费的，但与您在网络上找到的其他解决方案相比，它无需对核心进行任何修改即可工作。

# sql - 从多个供应商（供应商）订购多个项目（零件）的最佳选择

> ID：14451965
> 
> 赞同：1
> 
> 时间：2013-01-22T05:13:03.140
> 
> 标签：sql, sql-server, combinations, combinatorics, purchase-order

这里的任务是定义从供应商处订购物品（零件）的最佳（如下详述）方式。

表模式的相关部分（带有一些示例数据）是

**项目**

```
ID  NUMBER
1   Item0001
2   Item0002
3   Item0003 
```

**供应商**

```
ID  NAME         DELIVERY DISCOUNT
1   Supplier0001 0        0
2   Supplier0002 0        0.025
3   Supplier0003 20       0 
```

`DELIVERY`是该供应商对每次交货征收的运费（以美元计）。是供应商准时付款所允许`DISCOUNT`的结算折扣（百分比，即上述的 2.5% ）。`ID=2`

**供应商物品**

```
SUPPLIER_ID ITEM_ID PRICE
1           2       21.67
1           5       45.54
1           7       32.97 
```

这是供应商和项目之间的多对多连接，供应商为该项目收取的价格（以美元为单位）。每个项目至少有 1 个供应商，但有些有多个。供应商可能没有项目。

**零件请求**

```
ID ITEM_ID QUANTITY LOCATION_ID ORDER_ID
1  59      4        2           (null)
2  89      5        2           (null)
3  42      4        2           (null) 
```

此表是来自现场站点的请求，要求供应商订购和交付到该站点的零件。将任意数量的物品运送到站点会产生运送费用。订购零件时，会将其`ORDER_ID`插入表中，因此我们只关心那些`ORDER_ID IS NULL`

问题是，为每个“位置”订购这些部件的最佳方式是什么，其中需要向用户提供 3 个最佳解决方案以供选择。

1.  供应商数量最少的订单组合
2.  总成本最低的订单组合，即`QUANTITY*PRICE`每个项目的总和加上`DELIVERY`每个订单的总和，忽略所有订单`DISCOUNT`
3.  作为第 2 项，但考虑到`DISCOUNT`

显然，我需要确定可用的订单组合，然后确定最佳的订单组合变得微不足道，但我有点停留在处理构建组合的有效方法上。

我在 SQL Server 2008 中使用随机数据构建了一些 SQL 小提琴。[这个](http://sqlfiddle.com/#!3/a8209/5)有 100 个项目，10 个供应商和 100 个请求。[这个](http://sqlfiddle.com/#!3/f7c72/1)有 1000 个项目，50 个供应商和 250 个请求。表架构是相同的。

**更新**

我推断该解决方案必须是递归的，并且我构建了一个很好的表值函数来获取，但我遇到了 SQL Server 中递归的 32 个硬限制。无论如何，我对它感到不舒服，因为它暗示了比 RDMS 更多的程序语言解决方案。

所以我现在正在玩 CTE 递归。

根查询是：

```
SELECT DISTINCT
       '' SOLUTION_ID
      ,LOCATION_ID
      ,SUPPLIER_ID
      ,(subquery I haven't quite worked out) SOLE_SUPPLIER
FROM PartsRequests pr
     INNER JOIN
     SupplierItems si ON pr.ITEM_ID=si.ITEM_ID
WHERE pr.ORDER_ID IS NULL 
```

这获得了所有可以提供所需物品的供应商，并且肯定是一种解决方案，可能不是最佳的。如果供应商是该位置所需任何产品的唯一供应商，则子查询设置一个标志；如果是这样，它们必须是任何解决方案的一部分。

递归部分是通过 CTE.SUPPLIER_ID<>CTE.SUPPLIER_ID 的方式将供应商一一移除，如果仍然覆盖所有项目，则添加它们。SOLUTION_ID 将是已删除供应商的 CSV 列表，部分用于唯一标识每个解决方案，部分用于检查，因此我得到组合而不是排列。

仍在研究细节，此更新的目的是让社区说“是的，看起来那会起作用”，或者“你这个白痴，那不会起作用，因为......”

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-28T16:08:23.003

这是一个更一般的答案（如，而不是 sql），因为我认为解决这个问题需要更强大的东西。您的第一个方案是选择最少数量的供应商。当您试图通过供应商满足每个站点的所有需求时，可以将此问题视为[集合覆盖问题。](http://en.wikipedia.org/wiki/Set_cover_problem)这个问题已经是NP完全的。

您的第三种情况似乎与第二种情况基本相同。假设您按时支付每笔订单，您只需在价格中考虑折扣。

第二种情况至少是 NP 难的，因为我看到与[设施位置问题](http://en.wikipedia.org/wiki/Facility_location)有很多相似之处。您正在尝试根据价格和交付成本（开放成本）来决定使用（开放）哪些供应商（设施）来满足您的订单（需求）。

列举你可能的解决方案似乎是不可行的，因为有 10 个供应商，你有 2^10 种使用它们的可能性，内部需求分布进一步复杂化。

我建议进行一些动态编程来首先选择您必须使用的供应商（=他们是唯一交付特定物品的供应商），消除一些可能性（如果供应商 A 的成本 + 交付成本 A < 供应商 B 的成本）然后尝试扩展您的一组可能的解决方案。线性规划也是一种有效的思路。

# mysql - 关于mysql_query之类的一个思考

> ID：14451967
> 
> 赞同：2
> 
> 时间：2013-01-22T05:13:10.420
> 
> 标签：mysql

好的，所以在一年左右的`mysql_query`时间里将在较新版本的 PHP 中消失。话虽如此，`mysql_query`在网站上使用过的那些将停止对那些更新的人起作用。

这也会影响诸如此类`mysql_num_rows`的功能吗？我的意思是，有什么替代方案`mysql_query`？我知道有，`mysqli`但它与 的有什么不同`mysql`？

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T05:21:52.563

是的。整个（原始）mysql 扩展正在消失，而不仅仅是`mysql_query`功能。所涉及的功能列表可以在以下位置查看：

[http://php.net/manual/en/ref.mysql.php](http://php.net/manual/en/ref.mysql.php)

# ruby - 创建红宝石宝石

> ID：14451970
> 
> 赞同：2
> 
> 时间：2013-01-22T05:13:23.263
> 
> 标签：ruby

我正在学习 ruby​​，我想测试如何创建 gem 文件。我的机器上安装了以下内容。ruby 1.9.3p362（2012-12-25 修订版 38607）[x86_64-linux] Bundler 版本 1.2.3 rake，版本 10.0.3

我使用`bundle gem hello_gem`. 我添加了以下示例代码 `hello_gem.rb`

```
module HelloGem
  class Base
    def self.hello
      puts "Hello Ruby Gem #{HelloGem::VERSION}"
    end
  end
end 
```

我的文件夹结构如下。

```
├── Gemfile
├── Gemfile.lock
├── hello_gem.gemspec
├── lib
│   ├── hello_gem
│   │   └── version.rb
│   └── hello_gem.rb
├── LICENSE.txt
├── Rakefile
├── README.md 
```

然后我使用`rake install`. 然后我开始了`irb`，我可以执行以下操作。

```
1.9.3-p362 :001 > require 'hello_gem'
 => true 
1.9.3-p362 :002 > HelloGem::Base.hello
Hello Ruby Gem 0.0.1
 => nil 
1.9.3-p362 :003 > 
```

当我想将代码移动到 lib 文件夹时，问题就来了。我在`lib/hello_gem/base.rb`那里创建并添加了上面的代码。而在`hello_gem.rb`我刚刚使用的`require "hello_gem/base"`. 现在我的项目如下所示。

```
├── Gemfile
├── Gemfile.lock
├── hello_gem.gemspec
├── lib
│   ├── hello_gem
│   │   ├── base.rb
│   │   └── version.rb
│   └── hello_gem.rb
├── LICENSE.txt
├── Rakefile
├── README.md 
```

`rake install`当我使用和用于测试构建 gem 时，`irb`发生了以下错误。

```
1.9.3-p362 :001 > require 'hello_gem'
LoadError: cannot load such file -- hello_gem/base
from /home/sandarenu/.rvm/rubies/ruby-1.9.3-p362/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:36:in `require'
from /home/sandarenu/.rvm/rubies/ruby-1.9.3-p362/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:36:in `require'
from /home/sandarenu/.rvm/gems/ruby-1.9.3-p362/gems/hello_gem-0.0.1/lib/hello_gem.rb:2:in `<top (required)>'
from /home/sandarenu/.rvm/rubies/ruby-1.9.3-p362/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:60:in `require'
from /home/sandarenu/.rvm/rubies/ruby-1.9.3-p362/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:60:in `rescue in require'
from /home/sandarenu/.rvm/rubies/ruby-1.9.3-p362/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:35:in `require'
from (irb):1
from /home/sandarenu/.rvm/rubies/ruby-1.9.3-p362/bin/irb:16:in `<main>'
1.9.3-p362 :002 > 
```

我找不到解决此问题的方法。如果有人能告诉我我在这里做错了什么，那将是一个很大的帮助。

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-22T05:57:11.453

`.gemspec`created by`bundle gem`使用[Git](http://git-scm.com/)来确定要包含在 gem 中的文件；它包含以下行：

```
gem.files         = `git ls-files`.split($/) 
```

为了让它添加你`hello_gem/base.rb`，你需要将它添加到 Git 存储库中。由于原始设置适用于您，我假设您已经安装了 Git，所以您只需要运行：

```
git add lib/hello_gem/base.rb 
```

您实际上不需要提交文件来`git ls-files`获取它并将其添加到 gem 中，所以这应该足以让它工作。

# ruby-on-rails - Rails 从模型生成迁移

> ID：14451972
> 
> 赞同：4
> 
> 时间：2013-01-22T05:13:34.277
> 
> 标签：ruby-on-rails, ruby

我一直在阅读[Rails Migrations](http://guides.rubyonrails.org/migrations.html)以帮助我开始构建 Rails 项目。

我对 db/migrate 中文件的生成有点困惑。

我一直在设计我的应用程序的方式是从模型开始......尽我所能概述我将在系统中拥有的所有对象。我想使用 rails 迁移生成器自动从这些模型生成迁移文件。

是的，我知道“手动创建迁移很容易”。而且我知道我可以手动完成，但我不明白为什么该工具与预先创建的模型分开。

根据我对 SO 的文章和其他迁移问题的理解，我可以生成如下迁移：

```
rails generate migration SomeObj field:string some_other_field:integer 
```

我不明白的是，当我的模型已经存在于 SomeObj 时，为什么我需要传入字段？Rails 不能从 some_obj.rb 中检测到它并从那里创建迁移吗？

此外，当我有一个更复杂的模型时，具有 has_many、belongs_to 和 has_to_and_belongs_to_many 关系，如果它自动创建具有正确名称的 JOIN 表和字段（例如 foreign_obj_id、foreign_obj_ids），那就太好了

在以前的项目中，我不必处理迁移，因为我使用了 Mongo+Mongoid - 并且由于 Mongo 工作方式的性质而自动生成集合（不存在的集合在插入或更新时自动创建）。现在有了这个 Rails 应用程序，我正在使用 Postgres（但我确信 MySQL 或任何其他关系数据库也会发生同样的事情）。

反正这种事情就没有帮手吗？我必须手动创建所有这些迁移吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-01-22T05:25:00.807

你把这个弄反了。您需要先构建迁移，然后再构建模型。迁移会提升数据库的状态。您的模型反映了数据库的*当前*状态。模型与迁移之间没有一对一的映射。

> 我想使用 rails 迁移生成器自动从这些模型生成迁移文件。

做不到。

您用于`rails generate migration`生成迁移，这几乎是一个副作用，会生成一个存根模型文件。您不能使用现有模型文件来生成模型的迁移，因为模型不包含有关构成模型的实际列的任何信息。Rails 必须从您的关联/验证中提取并暗示所有必要的信息，即使那样它也会使*大多数*列出错。

> 此外，当我有一个更复杂的模型时，......如果它自动创建具有正确名称的 JOIN 表和字段，那就太好了

再说一次，你不能。你负责定义你的数据库模式，你这样做的方式是构建迁移。您可以手动执行此操作，也可以通过 执行此操作，`rails generate`但您应该遵循的过程是*首先*构建迁移，然后构建模型。

举例来说，这是一个**完整**的模型，可用于生产：

```
class MyModel < ActiveRecord::Base
end 
```

该模型定义可能包含一个包含 10 列或 1000 列的表；根据模型定义，您（和 Rails）绝对无法知道。

这是另一个模型，它至少包含一列，但同样，您*无法知道*是哪种列：

```
class MyModel < ActiveRecord::Base
  validates :code, presence: true, uniqueness: true
end 
```

是`code`字符串还是数字？列上应该有索引吗？绝对没有办法知道。

# java - 如何在java中对字符串格式的日期进行排序？

> ID：14451976
> 
> 赞同：40
> 
> 时间：2013-01-22T05:13:51.097
> 
> 标签：java, sorting, datetime

我有一个`arraylist`字符串值，比如

```
ArrayList<String> datestring=new ArrayList<String>();
datestring.add("01/21/2013 @03:13 PM");
datestring.add("01/21/2013 @04:37 PM");
datestring.add("01/21/2013 @10:41 AM");
datestring.add("01/21/2013 @10:48 AM");
datestring.add("01/22/2013 @06:16 AM");
datestring.add("01/22/2013 @06:19 AM");
datestring.add("01/21/2013 @05:19 PM");
datestring.add("01/21/2013 @05:19 PM"); 
```

任何机构都可以帮助我对上述列表进行排序吗？以便根据 AM 和 PM 格式对值进行排序。
排序后的预期输出应该是

```
for (String s : datestring)
{
    System.out.println(s);
} 
```

.

```
01/21/2013 @10:41 AM;
01/21/2013 @10:48 AM;
01/21/2013 @03:13 PM;
01/21/2013 @04:37 PM;
01/21/2013 @05:16 PM;
01/21/2013 @05:19 PM;
01/22/2013 @06:16 AM;
01/22/2013 @06:19 AM; 
```

* * *

## 回答 #1

> 赞同：97
> 
> 时间：2013-01-22T05:33:57.700

试试这个

```
 Collections.sort(datestring, new Comparator<String>() {
        DateFormat f = new SimpleDateFormat("MM/dd/yyyy '@'hh:mm a");
        @Override
        public int compare(String o1, String o2) {
            try {
                return f.parse(o1).compareTo(f.parse(o2));
            } catch (ParseException e) {
                throw new IllegalArgumentException(e);
            }
        }
    }); 
```

或使用 Java 8

```
 DateTimeFormatter formatter = DateTimeFormatter.ofPattern("MM/dd/yyyy '@'hh:mm a");
    Collections.sort(datestring, (s1, s2) -> LocalDateTime.parse(s1, formatter).
            compareTo(LocalDateTime.parse(s2, formatter))); 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2018-01-15T08:47:43.440

可以使用下面给出的 compareTo 以字符串格式比较日期列表。

```
ArrayList<String> datestring=new ArrayList<String>();
datestring.add("01/21/2013 @03:13 PM");
datestring.add("01/21/2013 @04:37 PM");
datestring.add("01/21/2013 @10:41 AM");
datestring.add("01/21/2013 @10:48 AM");
datestring.add("01/22/2013 @06:16 AM");
datestring.add("01/22/2013 @06:19 AM");
datestring.add("01/21/2013 @05:19 PM");
datestring.add("01/21/2013 @05:19 PM");

Collections.sort(datestring, new Comparator<String>() {
                @Override
                public int compare(String object1, String object2) {
                    return object1.compareTo(object2);
                }
            }); 
```

通过使用它，您甚至不必将字符串解析为日期

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2017-05-15T16:47:03.640

一种选择是将日期添加到 TreeMap，将未格式化的日期作为键，将格式化的日期作为值。使用 TreeMap 将自动对值进行排序。

```
private ArrayList<String> sortDates(ArrayList<String> dates) throws ParseException {
    SimpleDateFormat f = new SimpleDateFormat("dd MMM yyyy");
    Map <Date, String> dateFormatMap = new TreeMap<>();
    for (String date: dates)
        dateFormatMap.put(f.parse(date), date);
    return new ArrayList<>(dateFormatMap.values());
} 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2018-10-12T09:55:21.003

# *java.time*

首先，正如鲍莫尔[已经说过](https://stackoverflow.com/a/14452493/5772882)的那样，您不应该在列表中保留字符串。相反，使用*java.time*类的实例。

保留`LocalDateTime`对象。或者`ZonedDateTime`，如果您知道时间在哪个时区。字符串有利于向用户展示，而不是用于在您的程序中进行操作，例如排序。

以下代码将您的列表转换为`List<LocalDateTime>`：

```
 DateTimeFormatter formatter 
            = DateTimeFormatter.ofPattern("MM/dd/uuuu '@'hh:mm a", Locale.ENGLISH);

    List<LocalDateTime> dateTimeList = datestring.stream()
            .map(ds -> LocalDateTime.parse(ds, formatter))
            .collect(Collectors.toCollection(ArrayList::new)); 
```

现在排序很简单：

```
dateTimeList.sort(Comparator.naturalOrder()); 
```

`LocalDateTime`自从它们实现以来就具有自然顺序`Comparable`，因此`Comparator.naturalOrder()`可以进行排序。获得相同排序的另一种方法是：

```
dateTimeList.sort(LocalDateTime::compareTo); 
```

为了将排序后的数据呈现给用户，我们当然希望将日期时间格式化为字符串：

```
dateTimeList.forEach(ldt -> System.out.println(ldt.format(formatter))); 
```

输出是：

```
01/21/2013 @10:41 AM
01/21/2013 @10:48 AM
01/21/2013 @03:13 PM
01/21/2013 @04:37 PM
01/21/2013 @05:19 PM
01/21/2013 @05:19 PM
01/22/2013 @06:16 AM
01/22/2013 @06:19 AM 
```

除了分号和一个简单的错字，我相信这正是您所要求的。

**链接：** [Oracle 教程：日期时间](https://docs.oracle.com/javase/tutorial/datetime/)解释如何使用`java.time`，现代 Java 日期和时间 API，包括`LocalDateTime`和`DateTimeFormatter`。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2013-01-22T06:03:14.877

虽然有一种技术方法可以解决您的问题，但基本错误是将`Date`s 表示为`String`s，这是“原始痴迷”的一种形式。如果您有文本输入，请将其转换为[`java.util.Date`](http://docs.oracle.com/javase/7/docs/api/java/util/Date.html)或适当的 joda 类（[`LocalDateTime`](http://joda-time.sourceforge.net/apidocs/org/joda/time/LocalDateTime.html)此处似乎合适）。这些类`Comparable`是开箱即用的，对它们进行排序很容易。但是它们还具有您在处理日期/时间实例时可能需要的所有其他逻辑，而字符串则没有。

***更新***

从 java 8 开始，我强烈推荐使用它的[LocalDateTime](https://docs.oracle.com/javase/8/docs/api/java/time/LocalDateTime.html)类。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-22T05:30:57.640

ArrayList 默认不支持排序。您可以使用

`public static <T> void sort(List<T> list, Comparator<? super T> c)`从`java.util.Collections`课堂上。将比较器的实现传递给对日期进行排序，例如

[http://www.coderanch.com/t/392338/java/java/compare-Dates-String-Format](http://www.coderanch.com/t/392338/java/java/compare-Dates-String-Format)

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2013-01-22T05:37:58.680

可能您可以编写一个自定义比较器来根据要求比较日期字符串和顺序。然后，您将能够使用实现的比较器对集合进行排序。

# xml - Quickbooks 如何创建客户然后创建客户工作

> ID：14451980
> 
> 赞同：4
> 
> 时间：2013-01-22T05:14:37.220
> 
> 标签：xml, api, quickbooks

所以我们有创建客户的代码，然后是客户工作。客户作业因莫名其妙的原因而失败。

这是初始请求：

```
<?xml version="1.0" encoding="US-ASCII"?><?qbxml version="8.0"?>
<QBXML>
    <QBXMLMsgsRq newMessageSetID="c80f653c176ed1e5975e" onError="stopOnError">
        <CustomerAddRq>
            <CustomerAdd>
                <Name>xxxx. (20615)</Name>
                <CompanyName>xxxx</CompanyName>
                <Salutation/>
                <FirstName/>
                <MiddleName/>
                <LastName/>
                <BillAddress>
                    <Addr1>xxxx</Addr1>
                    <Addr2>xxx</Addr2>
                    <Addr3/>
                    <Addr4/>
                    <City>xxx</City>
                    <State>xx</State>
                    <PostalCode>xxxxx</PostalCode>
                    <Country>USA</Country>
                    <Note/>
                </BillAddress>
                <Phone>000000</Phone>
                <Fax>000000</Fax>
                <Email/>
                <Contact/>
                <TermsRef>
                    <FullName>Net 30</FullName>
                </TermsRef>
            </CustomerAdd>
        </CustomerAddRq>
    </QBXMLMsgsRq>
</QBXML> 
```

以及响应的相关部分：

```
<?xml version="1.0" ?>
<QBXML>
    <QBXMLMsgsRs newMessageSetID="3368552138367687637">
        <CustomerAddRs statusCode="0" statusSeverity="Info" statusMessage="Status OK">
            <CustomerRet>
                <ListID>80000118-1272906278</ListID>
                <TimeCreated>2010-05-03T13:04:38-05:00</TimeCreated>
                <TimeModified>2010-05-03T13:04:38-05:00</TimeModified>
                <EditSequence>1272906278</EditSequence>
                <TermsRef>
                    <ListID>80000006-1244039697</ListID>
                    <FullName>Net 30</FullName>
                </TermsRef>
                <Balance>0.00</Balance>
                <TotalBalance>0.00</TotalBalance>
                <JobStatus>None</JobStatus>
            </CustomerRet>
        </CustomerAddRs>
    </QBXMLMsgsRs>
</QBXML> 
```

我们回到 Quickbooks：

```
<?xml version="1.0" encoding="US-ASCII"?><?qbxml version="8.0"?>
<QBXML>
    <QBXMLMsgsRq newMessageSetID="0da30b5086cd3938febe" onError="stopOnError">
        <CustomerAddRq>
            <CustomerAdd>
                <Name>xxxxxxx</Name>
                <ParentRef>
                    <ListID>80000118-1272906278</ListID>
                </ParentRef>
                <CompanyName>xxxxxxx</CompanyName>
                <Salutation/>
                <FirstName/>
                <MiddleName/>
                <LastName/>
                <BillAddress>
                    <Addr1>xxxxx</Addr1>
                    <Addr2>xxxxx</Addr2>
                    <Addr3/>
                    <Addr4/>
                    <City>xxxx</City>
                    <State>xxx</State>
                    <PostalCode>xxxx</PostalCode>
                    <Country>USA</Country>
                    <Note/>
                </BillAddress>
                <Phone>00000000</Phone>
                <Fax>0000000</Fax>
                <Email/>
                <Contact/>
                <TermsRef>
                    <FullName>Net 30</FullName>
                </TermsRef>
            </CustomerAdd>
        </CustomerAddRq>
    </QBXMLMsgsRq>
</QBXML> 
```

然后 Quickbooks 用这个来响应第二个请求：

```
<?xml version="1.0" ?>
<QBXML>
    <QBXMLMsgsRs newMessageSetID="0da30b5086cd3938febe">
        <CustomerAddRs statusCode="3240" statusSeverity="Error"
                       statusMessage="Object &quot;80000118-1272906278&quot; specified in the request cannot be found. "/>
    </QBXMLMsgsRs>
</QBXML> 
```

第一个响应是 2013-01-21 10:34:22.353，第二个响应是 2013-01-21 10:35:21.080（服务器时间）。

为什么会失败？请注意，它通常有效。仅在这个请求序列中，它就使用相同的命令创建了另外两个没有问题的请求序列。

有时为了更好的衡量，它会用这个来响应：

```
<?xml version="1.0" ?>
<QBXML>
    <QBXMLMsgsRs newMessageSetID="215932fd6e1fffdd574c">
        <CustomerAddRs statusCode="3120" statusSeverity="Error"
                       statusMessage="Object &quot;11A0001-1289401726&quot; specified in the request cannot be found.  QuickBooks error message: Invalid argument.  The specified record does not exist in the list."/>
    </QBXMLMsgsRs>
</QBXML> 
```

您如何确保刚刚创建的客户在下一个命令中要引用的列表中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T14:04:59.013

您是否尝试过指定 <FullName> 并使用它而不是 <ListID>？SDK 指南的第 15 章中有一个奇怪的部分，称为“关于 ListIDs 的注意事项”，它表明当您尝试添加作业时可能会更改 ListID。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T07:47:10.480

当您创建客户时，您是否尝试过将客户设置为您的**活跃客户？**`<CustomerAddRq>`

```
 <CustomerAddRq>
        <CustomerAdd>
            <Name>xxxx. (20615)</Name>
            <IsActive>1</IsActive>
            <!-- rest of the details... -->
        </CustomerAdd>
    </CustomerAddRq> 
```

# python - 从python中的嵌套dict查找返回默认值

> ID：14451985
> 
> 赞同：0
> 
> 时间：2013-01-22T05:14:47.827
> 
> 标签：python, dictionary

我正在尝试在字典中执行多个查找，其中一些可能是对子字典 ( `d['a'], d['b']['c']['d']['e']`) 的查找。我想`KeyError`在查找过程中的任何时候返回一个默认值，无论是在第一个字典还是第 n 个字典上。最终目标是将返回值放入一个新的扁平字典中。

有没有比我目前更简单的方法：

```
e = {}
try:
    e['a'] = d['a']
except KeyError:
    e['a'] = 0
try:
    e['d'] = d['b']['c']['d']
except KeyError:
    e['d'] = 0

...and so on 
```

我已经考虑了一些问题并考虑使用`.get()`或使用`defaultdict()`或使用某种递归，但无法提出任何解决方案。在此先感谢您的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T05:19:30.813

把它分解成一个函数：

```
def try_get(dic, default, *keys):
    for key in keys:
        try:
            dic = dic[key]
        except KeyError:
            return default
    return dic

e['a'] = try_get(d, 0, 'a')
e['d'] = try_get(d, 0, 'b', 'c', 'd') 
```

# android - 如何在 Android 中从网站解析 Html 标签

> ID：14451986
> 
> 赞同：1
> 
> 时间：2013-01-22T05:14:53.000
> 
> 标签：android, html-parsing

我正在尝试从 URL 获取以下标签中的文本：`http://www.mcpss.com/?PN='News2'&SubP='DNewsStory'&gn=&NewsID=47318&ShowNav=&StoryGroup=Current`

```
<td class="header">

OPEN HOUSE SCHEDULED AT CLARK-SHAW

</td>

<p><span style="font-size: 12pt;">January 16, 2013 - Due to the relocation of Murphy High School to the Clark-Shaw campus and the necessary construction that is still ongoing, Clark-Shaw school did not participate in the magnet school &ldquo;See and Sign&rdquo; January 11 and 12<sup>th</sup>. We would like to resume giving school tours and meeting interested parents. Therefore, we are planning an &ldquo;Open House&rdquo; on Friday, January 25 from 9:00 a.m.- 12:00 p.m. to coincide with our school&rsquo;s Science Fair Open House that is scheduled for that day.</span></p>
<p><span style="font-size: 12pt;">&nbsp;</span></p>
<p><span style="font-size: 12pt;">Please share this information with your friends and neighbors.&nbsp;&nbsp; Magnet School applications are available now online.</span></p>
<p>&nbsp;</p> 
```

我想在 android 应用程序中表示文本，如下所示：

*在 CLARK-SHAW 安排开放日

2013 年 1 月 16 日 - 由于墨菲高中搬迁至 Clark-Shaw 校区以及仍在进行中的必要建设，Clark-Shaw 学校没有参加 1 月 11 日至 12 日的磁铁学校“See and Sign”。我们想恢复学校参观和会见感兴趣的家长。因此，我们计划在 1 月 25 日星期五上午 9:00 至下午 12:00 举行“开放日”，以配合当天安排的学校科学博览会开放日。

请与您的朋友和邻居分享此信息。Magnet School 应用程序现已在线提供。*

我怎样才能在android中实现它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-22T05:32:40.943

使用 jsoup [http://jsoup.org/](http://jsoup.org/)你可以得到这个

下载 jsoup.jar 文件然后将其添加到您的 libs 文件夹然后转到 android 依赖项右键单击 >> 构建路径 >> 配置构建路径 >> 添加 JARS >> 库 >> 然后选择您下载的 jsoup.jar 文件

```
 try {
      String website="http://www.mcpss.com/?PN='News2'&SubP='DNewsStory'&gn=&NewsID=47318&ShowNav=&StoryGroup=Current";
      Document doc = Jsoup.connect(website).get();
      Elements el=doc.getElementsByClass("header");
      String text=el.text();
    } catch (Exception e) {
        Log.wtf("name of activity","error message to show in log", e);
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T06:05:01.117

由于这是 Html 文档，请尝试将 Html.fromHtml(string) 用于 TextView 或尝试使用 webview 取决于标签。

对于 TextView 你可以这样使用

```
TextView txt=new TextView(getApplicationContext());
        String str="<td class=\"header\">"+
        "OPEN HOUSE SCHEDULED AT CLARK-SHAW"+
        "</td>"+
        "<p><span style=\"font-size: 12pt;\">January 16, 2013 - Due to the relocation of Murphy High School to the Clark-Shaw campus and the necessary construction that is still ongoing, Clark-Shaw school did not participate in the magnet school &ldquo;See and Sign&rdquo; January 11 and 12<sup>th</sup>. We would like to resume giving school tours and meeting interested parents. Therefore, we are planning an &ldquo;Open House&rdquo; on Friday, January 25 from 9:00 a.m.- 12:00 p.m. to coincide with our school&rsquo;s Science Fair Open House that is scheduled for that day.</span></p>"+
        "<p><span style=\"font-size: 12pt;\">&nbsp;</span></p>"+
        "<p><span style=\"font-size: 12pt;\">Please share this information with your friends and neighbors.&nbsp;&nbsp; Magnet School applications are available now online.</span></p>"+
        "<p>&nbsp;</p>";

        txt.setText(Html.fromHtml(str)); 
```

对于 WebView 尝试使用 webview.loadData();

# asynchronous - 做后台异步任务

> ID：14451987
> 
> 赞同：2
> 
> 时间：2013-01-22T05:14:54.077
> 
> 标签：asynchronous, exception-handling, media-player, runtime-error

我正在尝试为 Mediaplayer 加载动态 URL。如何处理各种异常，如文件未找到和超时执行过程中出现的异常。

```
public class MediaAsynchTask extends AsyncTask<String, Void, Object> {
protected void onPreExecute() {
super.onPreExecute();
progress = new ProgressDialog(AudioView.this);
progress.setMessage("LOADING........");
progress.setProgressStyle(ProgressDialog.STYLE_SPINNER);
progress.setCancelable(true);
progress.show();
}
protected void onPostExecute(Object result) {
super.onPostExecute(result);
if(result!=null){
progress.dismiss();
}else{
Audio.this.finish();
}
}
Protected Object doInBackground(String... params) {
try {
if (!true) 
{
MediaPlayer m = MediaPlayer.create(Audio.this,Uri.parse("audiourl.mp3"));
myProgressBar.setMax(mMediaPlayer.getDuration());
}return mMediaPlayer;
}catch (Exception e) {
runOnUiThread(new Runnable() {
public void run() {
Toast.makeText(getApplicationContext(),"Check Your NetWork and Data Connection",Toast.LENGTH_LONG).show();
}
});
} 
return mMediaPlayer;
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T05:40:14.760

它非常简单，您可以这样做：

```
try{
 **//your code goes here**
}catch(FileNotFoundException exception){
//handle exception
}//**handle other possible exceptions**
catch(JsonParseException exception){
    exception.printStackTrace();
}catch(JsonProcessingException exception){
    exception.printStackTrace();
} 
```

# ruby-on-rails - 启动 Rails 控制台时出错

> ID：14451990
> 
> 赞同：1
> 
> 时间：2013-01-22T05:15:37.910
> 
> 标签：ruby-on-rails, ruby

当我尝试启动即时 Rails 控制台时出现以下错误它以前工作正常，现在我收到此错误：

```
C:\InstantRails\rails_apps\shovell>ruby script/console
Loading development environment (Rails 2.0.2)
C:/InstantRails/ruby/lib/ruby/site_ruby/1.8/rubygems/custom_require.rb:27:in `gem_original_require': no such file to load -- application (MissingSourceFile)
    from C:/InstantRails/ruby/lib/ruby/site_ruby/1.8/rubygems/custom_require.rb:27:in `require'
    from C:/InstantRails/ruby/lib/ruby/gems/1.8/gems/activesupport-2.0.2/lib/active_support/dependencies.rb:496:in `require'
    from C:/InstantRails/ruby/lib/ruby/gems/1.8/gems/activesupport-2.0.2/lib/active_support/dependencies.rb:342:in `new_constants_in'
    from C:/InstantRails/ruby/lib/ruby/gems/1.8/gems/activesupport-2.0.2/lib/active_support/dependencies.rb:496:in `require'
    from C:/InstantRails/ruby/lib/ruby/gems/1.8/gems/rails-2.0.2/lib/console_with_helpers.rb:19
    from C:/InstantRails/ruby/lib/ruby/site_ruby/1.8/rubygems/custom_require.rb:27:in `gem_original_require'
    from C:/InstantRails/ruby/lib/ruby/site_ruby/1.8/rubygems/custom_require.rb:27:in `require'
    from C:/InstantRails/ruby/lib/ruby/gems/1.8/gems/activesupport-2.0.2/lib/active_support/dependencies.rb:496:in `require'
    from C:/InstantRails/ruby/lib/ruby/gems/1.8/gems/activesupport-2.0.2/lib/active_support/dependencies.rb:342:in `new_constants_in'
    from C:/InstantRails/ruby/lib/ruby/gems/1.8/gems/activesupport-2.0.2/lib/active_support/dependencies.rb:496:in `require'
    from C:/InstantRails/ruby/lib/ruby/1.8/irb/init.rb:252:in `load_modules'
    from C:/InstantRails/ruby/lib/ruby/1.8/irb/init.rb:250:in `each'
    from C:/InstantRails/ruby/lib/ruby/1.8/irb/init.rb:250:in `load_modules'
    from C:/InstantRails/ruby/lib/ruby/1.8/irb/init.rb:21:in `setup'
    from C:/InstantRails/ruby/lib/ruby/1.8/irb.rb:54:in `start'
    from C:/InstantRails/ruby/bin/irb:13 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-03-21T10:53:30.590

这是捆绑器的问题。

我所做的只是再次安装 Bundle，它现在与我完美配合。

# joomla2.5 - 500 - Joomla 2.5 发生错误

> ID：14451999
> 
> 赞同：-1
> 
> 时间：2013-01-22T05:16:11.793
> 
> 标签：joomla2.5

```
500 - An error has occurred.
Layout g not found 
```

`Login`能够正常工作，当我来更新时`menu items`，它开始显示这种`error`？任何帮助。它是什么意思，为什么它进来`com_menus`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T06:22:08.447

它唯一的`Chrome`浏览器问题，一旦你检查不同`browsers`的，它工作正常。谢谢

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-10T18:36:06.763

清除您的浏览器 cookie :)