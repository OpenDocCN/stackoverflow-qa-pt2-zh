# StackOverflow 问答 13210000-13210999

# svg - 如何在 SVG 中使用“stdDeviation”创建高斯模糊效果？

> ID：13210004
> 
> 赞同：1
> 
> 时间：2012-11-03T14:19:57.047
> 
> 标签：svg, svg-filters

我正在尝试对 Firefox 中的 png 图像应用高斯模糊。对于 WebKit 浏览器，我使用 CSS3 过滤器属性。在 CSS 中，我使用 2px 模糊，但如何在 SVG 中使用“stdDeviation”创建相同的效果？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-03T19:38:17.293

只需使用 filter 属性将 feGaussianBlur 过滤器应用于 SVG`<image>`元素。

```
<defs>
<filter id="Gaussian_Blur">
<feGaussianBlur in="SourceGraphic" stdDeviation="5"/>
</filter>
</defs> 
```

# django - 如何使用 django-mssql 连接到 SQL Server 2008 R2？

> ID：13210013
> 
> 赞同：3
> 
> 时间：2012-11-03T14:20:36.190
> 
> 标签：django, sql-server-2008, django-mssql, django-pyodbc

我无法弄清楚为什么我无法让 django 连接到 sql server 2008 r2。我在我们的服务器和 sql server 上拥有管理权限。我用 windows server 2008 sp2 构建了一个虚拟 windows 框，因为我认为我可能对 django-mssql 有一些运气。我已经在 windows 盒子上尝试了 django-pyodbc 和 django-mssql 但还没有成功。这是我的数据库设置：

```
DATABASES = {
    'default': {
        'ENGINE': 'sqlserver_ado',  # Have also tried sql_server.pyodbc
        'NAME': 'TMSEPLAY',                      
        'USER': '***', # Omitted for post
        'PASSWORD': '*******', # Omitted for post
        'HOST': '172.16.1.14',                      
        'PORT': '1434',                   
        'OPTIONS': {
            'provider': 'SQLCLI10', # Have also tried 'SQLCLI11' and 'SQLOLEDB'
            'extra_params': 'DataTypeCompatibility=80'
            }
    }
} 
```

我得到的错误：

```
C:\Python27\CourseData\mysite>manage.py syncdb
Traceback (most recent call last):
  File "C:\Python27\CourseData\mysite\manage.py", line 10, in <module>
    execute_from_command_line(sys.argv)
  File "C:\Python27\lib\site-packages\django\core\management\__init__.py", line
443, in execute_from_command_line
    utility.execute()
  File "C:\Python27\lib\site-packages\django\core\management\__init__.py", line
382, in execute
    self.fetch_command(subcommand).run_from_argv(self.argv)
  File "C:\Python27\lib\site-packages\django\core\management\base.py", line 196,
 in run_from_argv
    self.execute(*args, **options.__dict__)
  File "C:\Python27\lib\site-packages\django\core\management\base.py", line 232,
 in execute
    output = self.handle(*args, **options)
  File "C:\Python27\lib\site-packages\django\core\management\base.py", line 371,
 in handle
    return self.handle_noargs(**options)
  File "C:\Python27\lib\site-packages\django\core\management\commands\syncdb.py"
, line 57, in handle_noargs
    cursor = connection.cursor()
  File "C:\Python27\lib\site-packages\django\db\backends\__init__.py", line 306,
 in cursor
    cursor = self.make_debug_cursor(self._cursor())
  File "C:\Python27\lib\site-packages\sqlserver_ado\base.py", line 193, in _curs
or
    self.__connect()
  File "C:\Python27\lib\site-packages\sqlserver_ado\base.py", line 168, in __con
nect
    use_transactions=self.use_transactions,
  File "C:\Python27\lib\site-packages\sqlserver_ado\dbapi.py", line 151, in conn
ect
    raise OperationalError(e, "Error opening connection: " + connection_string)
sqlserver_ado.dbapi.OperationalError: (com_error(-2147352567, 'Exception occurre
d.', (0, u'ADODB.Connection', u'Provider cannot be found. It may not be properly
 installed.', u'C:\\Windows\\HELP\\ADO270.CHM', 1240655, -2146824582), None), 'E
rror opening connection: DATA SOURCE=172.16.1.14,1434;Network Library=DBMSSOCN;I
nitial Catalog=TMSEPLAY;UID=***;PWD=********;PROVIDER=SQLCLI10;MARS Connection=Tr
ue;DataTypeCompatibility=80;MARS Connection=True') 
```

我会很感激任何见解。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-03T14:26:12.340

我可以在该日志中看到一条错误消息：

$打开连接时出错：DATA SOURCE=172.16.1.14 port:1434

所以我会看看所有实例是否都在运行，并且可以通过端口 1434 在该机器上访问。

此外，以下可能会有所帮助： [设置 django-mssql 问题](https://stackoverflow.com/questions/9944204/setting-up-django-mssql-issues?rq=1)

# sql-server - 在 SQL Server 查询中执行循环操作

> ID：13210014
> 
> 赞同：0
> 
> 时间：2012-11-03T14:20:53.677
> 
> 标签：sql-server

我在 C# SQL Server 中编写了一个搜索功能，我的用户可以选择多个作业组，并且此功能应该检查我的作业表中所有选定的组 ID，我如何在 SQL Server 中执行循环操作？这是我的表一般架构：

```
id int, jobname varchar, jobgroup int..... 
```

我使用以下查询来选择我的工作（基于工作组）：

```
select * from tblJobs where jobgroup='"+userGroups+"' 
```

仅当 userGroups 包含一个值时才适用，但我的用户可以选择多个组 id，例如我的 userGroups 可以是这样的：5,7,10,20（userGroups 可以包含更多值）

我应该如何在我的查询中执行循环操作，以便我可以拥有所有匹配的作业？我应该连接几个查询的返回值，每个查询都选择一个组 ID？我认为有更好的方法

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T14:25:16.500

不要在 SQL 中使用循环 - 循环往往会降低 SQL 数据库的性能。

在这种情况下，我相信该[`IN`](http://msdn.microsoft.com/en-us/library/ms177682.aspx)条款可以做到：

```
SELECT col1, col2 
FROM tblJobs 
WHERE jobgroup IN ('"+userGroups+"', '"+userGroup2+"') 
```

# mysql - 如何忽略“无法添加或更新子行”错误

> ID：13210016
> 
> 赞同：1
> 
> 时间：2012-11-03T14:21:07.147
> 
> 标签：mysql, sql, database, foreign-keys

我的备份文件中有一个 sql 查询，它有大量的插入语句。

> 插入`tns_spo_hotel`( `id_spo`, `id_hotel`) 值 (523,149),(523,195), ...

我在两列上都有一个外键。

当我运行此查询时，它返回

```
#1452 - Cannot add or update a child row: a foreign key constraint fails (`tsakhkad_tour_new`.`tns_spo_hotel`, CONSTRAINT `tns_spo_hotel_22` FOREIGN KEY (`id_hotel`) REFERENCES `tns_hotel` (`id`) ON DELETE CASCADE ON UPDATE CASCADE) 
```

因为有一些行，缺少值。

是否可以忽略该错误消息并继续执行 sql ？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-03T14:35:17.840

> 是否可以忽略该错误消息并继续执行 sql ？

简短的回答是否**。**

您不能忽略错误并继续使用这些无效值。因为这就是外键约束的作用。这就是为什么他们称之为约束。它们确保数据的一致性。如果您可以忽略这些违反外键引用的值，您的数据就会变得不一致。

唯一可能的方法是删除外键约束。但是您不应该这样做，而是修复您的数据输入。

# jquery - 下拉框 - 需要使用 jQuery.tools.validator 进行验证

> ID：13210017
> 
> 赞同：1
> 
> 时间：2012-11-03T14:21:12.360
> 
> 标签：jquery, asp.net-mvc-4, jquery-tools, requiredfieldvalidator

我在 ASP.net MVC4 中为我的 Web 应用程序使用[jQuery 工具验证器。](http://jquerytools.org)我正在尝试使用验证器验证下拉框但没有成功。

我已经解决了[这个](https://stackoverflow.com/questions/4669106/dropdown-box-radio-button-validation)问题，但它并没有解决我的问题。

我的代码如下。

```
$.tools.validator.fn("select[required=required]", function(input, value) {
            // If the first item in the list is selected return FALSE
            alert("Inside required of dropdown");
            if(input[0].options[0].selected)
            {
                alert("returning false");
                en: "Please select value from this drop down"
            }
            else
            {
                alert("returning true");   
                return true;
            }
        }); 
```

它确实会提醒所有警报，但不会在错误时显示错误消息，而是在选择元素时会触发所选项目的值作为验证消息。

任何帮助都会得到帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T08:40:41.703

问题出在我的 html 代码上，实际上我分配了 required="required" 但是当我对 tools.validator.js 做了一些了解时，我发现处理 required 的函数如下

***注意：我已经从带有验证器的[jQuery 工具](http://jquerytools.org/download/)中下载了自定义 jquery.tools.min.js 。***

```
g.fn("[required]", "Please complete this mandatory field.", function (a, b) {
if (a.is(":checkbox")) return a.is(":checked");
return b 
```

***上述函数位于自定义 jquery.tools.min.js 中的第 140 行。***

***更容易理解的版本可以从*** [***这里下载。***](https://raw.github.com/jquerytools/jquerytools/87b61b1b618731213bcc74651deb03f8e881df4e/src/validator/validator.js)

因此，当我分配 required="required" 时，“required”作为值传递给参数 b 中的函数，并返回导致问题的相同值。

所以解决方案是传递 required="true" 或 required="false"，因此“true”/“false”将在参数 b 中传递给函数，并且 b 返回相同。

# android - 如何在 mac osx 中将 .dex 转换为 .jar

> ID：13210019
> 
> 赞同：5
> 
> 时间：2012-11-03T14:21:35.123
> 
> 标签：android

我正在使用 Mac OSX(10.7) 并尝试从 android apk 中提取 java 文件。所以我下载了 apk，然后从 [http://code.google.com/p/dex2jar/复制了 dex2jar 文件](http://code.google.com/p/dex2jar/)

从apk（classes.dex）中提取dex文件后，我解压缩了dex2jar并打开termial更改目录路径为dex2jar并执行如下

```
my-MacBook-Pro:dex2jar-0.0.9.11 my$ **dex2jar.sh classes.dex** 
```

但它说*** *-bash: dex2jar.sh: command not found* ***

我签入了目录并且 dex2jar.sh 存在。我在做什么错

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-11-03T14:43:21.740

试试 ./dex2jar.sh 。我的猜测是这个目录不在你的 $PATH 中，所以你的系统不知道在哪里可以找到它。./ 将告诉它在当前目录中查找。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2014-11-15T07:28:58.630

对我有用的是为我的`.bash_profile`.

我重命名并将`dex2jar-*`文件夹移动到我的`/usr/local/bin/dex2jar`目录。

然后我将以下行添加到我的`.bash_profile`文件中：

```
alias dex2jar='sh /usr/local/bin/dex2jar/d2j-dex2jar.sh' 
```

请记住运行以下命令来更新环境变量：

```
$ source ~/.bash_profile 
```

完成所有设置后，我可以简单地转换文件：

```
$ dex2jar file 
```

希望这对某人有帮助！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-12-24T15:23:10.267

你可以让它像这样工作：

> "C:\Users...\dex\Dex2jar.java" classes.dex

只需从命令行编写完整的 PATH ，如果 uri 路径周围有空格，则带有“”

# android - android保留活动或保存其状态

> ID：13210022
> 
> 赞同：1
> 
> 时间：2012-11-03T14:21:50.077
> 
> 标签：android, android-activity, state, oncreate, destroy

我已经将 unity3d 和 vuforia 应用程序移植到 Eclipse。我有一个启动活动和一个扩展活动，它确实扩展了 vuforia 活动并在清单中设置为主要活动。

我有一些应用程序初始化活动，例如 GA 跟踪会话打开并通过请求我自己的服务器来检查新应用程序的版本。

我的问题是我无法在应用程序生命周期中只运行一次这些初始化内容。

当应用程序启动时，它首先加载扩展活动，该活动加载 vuforia 和统一场景，同时显示启动画面，然后当它准备好时，它会进入启动活动，向用户显示一些信息。用户阅读它，然后通过点击再次进入统一活动以获得 3d 场景。我可以将此初始化放在扩展活动中或启动活动中。从功能的角度来看，两者都是有效的。但是，当用户在启动活动和统一活动之间导航时，我会做什么，以前的活动被破坏，下次返回时会调用 onCreate。它发生在它们两个中，所以如果我将我的初始化放在这两个的任何 onCreate 上，它会在用户导航到它们时被多次调用。

到目前为止我已经尝试过： - 以 startActivity 和 startActivityForResult 开始意图，两者的行为相同。- 检查清单以声明不保留历史，正如我在其他一些 smilar 问题上看到的那样 - 在清单中，我将 android:configChanges 用于所有可能的值，以确保由于某些配置更改而不会重新启动活动，但没有帮助 - 尝试使用onSaveInstanceState() 并设置一些简单的布尔值，初始化已经完成。但是当活动再次启动时不会调用 onRestoreInstanceState() 并且也没有将包传递给 onCreate 方法。保存实例确实发生了，我在那里有日志。

此外，当我通过按主页按钮或以编程方式将其置于后台或离开去玩市场并通过按返回按钮从那里返回应用程序时，我的应用程序活动仍然正确加载。因此，只有当我通过调用 startActivity 或 startactivityForResult 从我的一个活动内部转到另一个活动时，它才会被销毁。

我可以想象统一活动需要大量内存，之前可以说销毁以释放，但在这种情况下，我的包应该被保存并传递给 onCreate() 但事实并非如此。

我很困惑，我一直试图弄清楚如何解决这个问题好几个小时。我非常感谢任何帮助。多谢你们。

# cryptography - 三角函数在密码学中真的有用吗？

> ID：13210026
> 
> 赞同：0
> 
> 时间：2012-11-03T14:22:38.353
> 
> 标签：cryptography, trigonometry, encryption

所以我正在阅读这本书关于密码学的介绍，有一个关于从纸上阅读信息的练习，你必须使用余弦函数来找出每条纸应该有多少个字母（一旦你撕掉它，所以你可以解码消息）。

我是说真的吗？会有类似的场景吗？什么用途？或者三角学在密码学中还有其他应用吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T14:57:22.503

任何实现[扩散和混淆](http://en.wikipedia.org/wiki/Confusion_and_diffusion)特性的函数/方法（cit. Shannon）都有资格用于加密目的

然而，扩散和混淆与算法将在其中运行的系统的计算能力有关。对于具有纸和铅笔三角函数的普通人来说就足够了，对于现代 CPU，应该使用更复杂的数学（大数分解、离散对数求逆、椭圆曲线数学等）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-03T14:43:28.613

简而言之，密码学中使用的函数背后的想法是，它们应该产生尽可能复杂的结果，而在运行时不会占用太多资源。三角函数产生的结果很难反转到其原始来源，因此它们是用于密码学目的的函数示例。

它们是否用于任何实际的加密算法我不能肯定地说，除了我的直接想法：“可能”。他们工作，那么为什么人们会避免它呢？这几乎取决于制作算法的人。

# ruby-on-rails - Rails 命令不存在

> ID：13210034
> 
> 赞同：0
> 
> 时间：2012-11-03T14:23:17.153
> 
> 标签：ruby-on-rails

在 Ubuntu 12.04 中，`gem install rails`成功，但是当我尝试时，`rails -v`我收到一条错误消息：

> 当前未安装程序 rails。您可以通过...安装它

我怎样才能让`rails`命令工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-03T15:36:14.173

您应该将以下内容放在您的`~/.profile`or`~/.bashrc`中，因为在您的解决方案中，您需要`source ...`在每次重新启动后编写您的：

```
# This loads RVM into a shell session.
[[ -s "$HOME/.rvm/scripts/rvm" ]] && . "$HOME/.rvm/scripts/rvm" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-03T14:44:01.697

我从来没有遇到过这个问题，但是要找到 rails，rails 二进制文件必须在路径上。也就是说，在 PATH 环境变量中列出的目录中。

查看 PATH 环境变量的值。

```
echo $PATH
env | grep PATH 
```

您可以尝试卸载 rails，然后重新安装。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-03T15:05:07.110

问题解决了！！！

我只需输入`source .rvm/scripts/rvm`我的 HOME 路径，它就可以工作了！！！

# gradle - 如何使用带有 Gradle 的 Sonatype Nexus 来代理存储库？

> ID：13210037
> 
> 赞同：14
> 
> 时间：2012-11-03T14:23:36.890
> 
> 标签：gradle

假设我在内部服务器上运行 Sonatype Nexus，我想用它来代理 repo1.maven.org 和其他存储库。在 Maven 中，我只需将`<mirror>`配置添加到`settings.xml`. 我怎样才能用 Gradle 做到这一点？

**更新：**我想这样做，而不必将我的 Nexus 实例的 URL 硬编码到我拥有的每个项目中。所以我正在寻找 Maven`<mirror>`设置的精确副本。

我现在能想到的最好的方法是做这样的事情：

```
repositories {
    maven {
        url "$nexusUrl/content/groups/public"
    }
} 
```

然后`~/.gradle/gradle.properties`在每个开发人员的计算机上执行此操作：

```
nexusUrl = https://nexus.company.com 
```

然而，这看起来被黑了，我仍然需要在每个项目中添加 5 行。有没有更优雅的方法来做到这一点？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-11-04T23:58:17.787

初始化脚本可能是最好的方法。查看[用户指南](http://gradle.org/docs/current/userguide/init_scripts.html)中的这一章。

它们为您提供了一种将逻辑注入所有项目的方法。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-11-03T15:16:17.377

如[文档](http://www.gradle.org/docs/current/userguide/userguide_single.html#mavenIvyRepositoriesNoAuth)和[关于初始化脚本](https://docs.gradle.org/current/userguide/init_scripts.html)中所述：

创建一个以`.gradle`eg:结尾的文件夹和文件`~/.gradle/init.d/mirror.gradle`。有内容：

```
initscript {
  repositories {
     maven {
        url "http://repo.mycompany.com/maven2"
    }
  }
} 
```

# android - 通过 id 从 android 日历中检索数据

> ID：13210042
> 
> 赞同：3
> 
> 时间：2012-11-03T14:24:25.373
> 
> 标签：android, android-calendar

我有**`ID`**一个事件。现在我想检索该事件的其他详细信息。如何获取活动详情？

```
public static long getNewEventId(ContentResolver cr, Uri cal_uri)
{
    Uri local_uri = cal_uri;
    if (cal_uri == null)
    {
        // local_uri = Uri.parse("content://calendar/calendars/" +
        // "events");
        local_uri = Uri.parse("content://com.android.calendar/events");
    }
    Cursor cursor = cr.query(local_uri,
            new String[] { "MAX(_id) as max_id" }, null, null, "_id");
    cursor.moveToFirst();
    long max_val = cursor.getLong(cursor.getColumnIndex("max_id"));
    return max_val;
} 
```

使用它，我获得了添加的最后一个事件的 ID。现在我想要使用此 ID 的此事件的所有详细信息。

# java - JTree 未更新（需要说明）

> ID：13210043
> 
> 赞同：1
> 
> 时间：2012-11-03T14:24:29.180
> 
> 标签：java, swing, jtree, treemodel

这是问题所在：

我有一个主面板，它有 3 个子面板，其中包含一个状态更新区域、一个 projectlistTree 面板和一个分析面板。

项目列表树面板需要两个类：

1.  一个包含用户界面组件的面板类。
2.  为 jtree 提供树模型的树列表模型类。

我试过的：

创建并保存新项目后，树应该会更新，它应该出现在 projectlisttree 面板上。

基于 SO 上的许多答案，我创建了一个方法集并获取树模型，并且在保存项目时，再次设置模型。基本上 jtree 树模型是使用我创建的 getmodel 方法设置的。

模型应该如何设置和调用？

这是 set 和 get treemodel 方法：

以下 set 和 get 方法在类 common.java 中

```
 public FileSystemModel getFsModel() {
return fsModel;
}

public void setFsModel(FileSystemModel fsModel) {
    this.fsModel = fsModel;
} 
```

这是树模型类

```
 import java.io.File;
    import java.util.Iterator;
    import java.util.Vector;
import javax.swing.event.TreeModelEvent;
import javax.swing.event.TreeModelListener;
import javax.swing.tree.TreeModel;
import javax.swing.tree.TreePath;

class FileSystemModel implements TreeModel {

  private File root;
  private Vector listeners = new Vector();

  public FileSystemModel(File rootDirectory) {
    root = rootDirectory;
  }

  public Object getRoot() {
    return root;
  }

  public Object getChild(Object parent, int index) {
    File directory = (File) parent;
    String[] children = directory.list();
    return new TreeFile(directory, children[index]);
  }

  public int getChildCount(Object parent) {
    File file = (File) parent;
    if (file.isDirectory()) {
      String[] fileList = file.list();
      if (fileList != null)
    return file.list().length;
    }
    return 0;
  }

  public boolean isLeaf(Object node) {
    File file = (File) node;
    return file.isFile();
  }

  public int getIndexOfChild(Object parent, Object child) {
    File directory = (File) parent;
    File file = (File) child;
    String[] children = directory.list();
    for (int i = 0; i < children.length; i++) {
      if (file.getName().equals(children[i])) {
    return i;
      }
    }
    return -1;

  }

  public void valueForPathChanged(TreePath path, Object value) {
    File oldFile = (File) path.getLastPathComponent();
    String fileParentPath = oldFile.getParent();
    String newFileName = (String) value;
    File targetFile = new File(fileParentPath, newFileName);
    oldFile.renameTo(targetFile);
    File parent = new File(fileParentPath);
    int[] changedChildrenIndices = { getIndexOfChild(parent, targetFile) };
    Object[] changedChildren = { targetFile };
    fireTreeNodesChanged(path.getParentPath(), changedChildrenIndices, changedChildren);

  }

  private void fireTreeNodesChanged(TreePath parentPath, int[] indices, Object[] children) {
    TreeModelEvent event = new TreeModelEvent(this, parentPath, indices, children);
    Iterator iterator = listeners.iterator();
    TreeModelListener listener = null;
    while (iterator.hasNext()) {
      listener = (TreeModelListener) iterator.next();
      listener.treeNodesChanged(event);
    }
  }

  public void addTreeModelListener(TreeModelListener listener) {
    listeners.add(listener);
  }

  public void removeTreeModelListener(TreeModelListener listener) {
    listeners.remove(listener);
  }

  private class TreeFile extends File {
    public TreeFile(File parent, String child) {
      super(parent, child);
    }

    public String toString() {
       return getName();
          }
      }
      } 
```

Jtree 面板：

```
/*
 * To change this template, choose Tools | Templates
 * and open the template in the editor.
 */
package analysisui;

import java.awt.BorderLayout;
import java.io.File;
import javax.swing.JPanel;
import javax.swing.JTree;

public class ShowProjectTree extends JPanel {

    private FileSystemModel fileSystemModel;
    Common commonCls;

    /**
     * Creates new form ShowProjectTree
     */
    public ShowProjectTree(Common cmnClas) {
    commonCls = cmnClas;
    initComponents();
    }

    /**
     * This method is called from within the constructor to initialize the form.
     * WARNING: Do NOT modify this code. The content of this method is always
     * regenerated by the Form Editor.
     */
    @SuppressWarnings("unchecked")
    // <editor-fold defaultstate="collapsed" desc="Generated Code">
    private void initComponents() {

    jScrollPane1 = new javax.swing.JScrollPane();
    fileSystemModel = commonCls.getFsModel();
    proListTree = new javax.swing.JTree(fileSystemModel);

    revalidate();
    jScrollPane1.setViewportView(proListTree);

    javax.swing.GroupLayout layout = new javax.swing.GroupLayout(this);
    this.setLayout(layout);
    layout.setHorizontalGroup(
        layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
        .addComponent(jScrollPane1, javax.swing.GroupLayout.DEFAULT_SIZE, 295, Short.MAX_VALUE)
    );
    layout.setVerticalGroup(
        layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
        .addComponent(jScrollPane1, javax.swing.GroupLayout.Alignment.TRAILING, javax.swing.GroupLayout.DEFAULT_SIZE, 434, Short.MAX_VALUE)
    );
    }// </editor-fold>

    // Variables declaration - do not modify
    private javax.swing.JScrollPane jScrollPane1;
    private javax.swing.JTree proListTree;
    // End of variables declaration
} 
```

因此，一旦我将一个新项目保存到项目文件夹中，就会调用 set model 方法。

```
 commonCls.setAppendMessage("\n>>"+projectName + " created \n");
       revalidate(); 
```

# android - 带有 ContentProvider 的存在（）方法 sqlite

> ID：13210044
> 
> 赞同：1
> 
> 时间：2012-11-03T14:24:29.923
> 
> 标签：android, sqlite, android-contentprovider

我想为“存在元组”创建一个方法？

我使用经典 StartManagingCursor 方式的旧方法是：

```
public boolean exist(long uid){
     boolean ex = false;

     Cursor c= db.rawQuery("SELECT COUNT(*) FROM " + Person.PERSON_TABLE + " WHERE uid = "+ "'" + uid + "'", null);
            c.moveToFirst();
  int jcount = c.getInt(0);

  if (jcount >0){
            ex=true;                        
    }
     return ex; 
```

}

现在我想用 ContentProvider 为我的 sqlite db 做到这一点。我如何使用我的 contentprovider 类的查询方法来做到这一点？

# android - android Dialog：关闭活动后如何返回Dialog？

> ID：13210046
> 
> 赞同：1
> 
> 时间：2012-11-03T14:24:35.873
> 
> 标签：android, listview, android-dialog

我有一个自定义对话框。在这个 Dialog 中，有一个 Button 和一个 TextView。当我单击按钮时，我打开了一个新活动。这个活动是我自己写的一种文件浏览器。我使用 ListView 来显示文件名。当我单击 ListView 的项目并返回对话框时，我想关闭此活动。我还想将项目的标题写入对话框中的 TextView。

现在我只是不知道如何返回对话框？我只知道如何返回一个新的活动。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-03T14:31:09.270

打开[startActivityForResult](http://developer.android.com/reference/android/app/Activity.html#startActivityForResult%28android.content.Intent,%20int%29)以启动文件管理器活动。用户选择文件后，使用[setResult](http://developer.android.com/reference/android/app/Activity.html#setResult%28int,%20android.content.Intent%29)设置结果。这允许您填充返回到启动文件管理器的活动的数据包。现在[完成](http://developer.android.com/reference/android/app/Activity.html#finish%28%29)文件管理器活动。

创建对话框的活动将在[onActivityResult](http://developer.android.com/reference/android/app/Activity.html#onActivityResult%28int,%20int,%20android.content.Intent%29)中获取数据包。

# javascript - 为 document.getElementById 和 document.createElement 使用变量

> ID：13210047
> 
> 赞同：3
> 
> 时间：2012-11-03T14:24:44.577
> 
> 标签：javascript, variables

> **可能重复：**
> [为什么我不能直接引用 document.createElement？](https://stackoverflow.com/questions/3910171/why-cant-i-have-a-direct-reference-to-document-createelement)

我对 Js 很陌生，并且一直在玩它。由于`document.getElementById`&`doucment.createElement`很长，我决定把它放在一个变量中；例如`var d = document.createElement;`

1.  但是，当我将其称为`var someElement = d("p");`“TypeError：非法调用”时，我不确定这意味着什么。

2.  如果我分离`document`对象，`var d = document;`然后给它一个像这样的属性：`d.e = d.createElement;`然后用它来创建一个`someElement = d.e("p")`它可以工作的元素。

有人可以解释是什么原因导致 1\. 失败以及为什么 2\. 有效吗？先感谢您。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-03T14:30:22.623

在 JavaScript 中使用此表示法时：

```
objectName.methodName(arguments) 
```

该方法被告知（通过特殊值`this`）您正在调用它的对象。因此，当您将一个方法从一个对象复制到另一个对象时，它实际上变成了新对象的一个​​方法。

如果你把一个方法当作一个普通的函数，把它复制到一个局部变量中，然后正常调用它：

```
localVariableNameHoldingMethod(arguments) 
```

那么它`this`就是全局对象（`window`）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-03T14:29:53.227

您需要将它们包装在一个函数中，以便您可以从`document`对象中调用它们。

```
var d = function(name) {
    return document.createElement(name);
}; 
```

这只是`createElement`方法实现的要求。它需要知道`document`它应该从什么创建元素。

当您从对象分离方法时，该方法没有原始对象的内存。

这就是为什么它有效：

```
d.e("p"); 
```

由于`e`是对该`createElement`方法的引用，并且它是从 调用的`d`，这是对 的引用，因此`document`您实际上是在执行以下操作：

```
document.createElement("p"); 
```

# javascript - Chrome扩展程序不加载jquery

> ID：13210048
> 
> 赞同：0
> 
> 时间：2012-11-03T14:24:53.523
> 
> 标签：javascript, google-chrome-extension

我尝试将 jQuery 导入我的 Chrome 扩展程序，但是当我尝试

```
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.0/jquery.min.js" type="text/javascript"></script> 
```

它说它是`Refused to load the script 'http://ajax.googleapis.com/ajax/libs/jquery/1.8.0/jquery.min.js' because it violates the following Content Security Policy directive: "script-src 'self' chrome-extension-resource:".`什么意思，更重要的是，我将如何处理？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-12-17T08:48:39.823

要克服这个问题，您必须[覆盖默认 CSP](https://developer.chrome.com/extensions/contentSecurityPolicy#relaxing-remote-script)，或者您必须从本地资源导入 JS 文件。有时覆盖 CSP 可能不起作用（不允许使用 HTTP）。所以我建议你总是从本地导入 JS 文件。Chrome 扩展有一些不使用外部 JS 的安全指南。

只需将 jQuery 插件保存到您的本地并尝试在您的 html 页面中导入。例如，假设您已在本地将 jQuery 插件保存为“jquery_local_file.js”。

```
<html>
<head>
    <script src="jquery_local_file.js"></script>
</head>
<body>
    //body code here
</body>
</html> 
```

（或者）

## 清单.json

`"content_security_polciy:"srcipt-src 'self' https://ajax.googleapis.com, object-src 'self'";`

它绝对有效。:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-06T09:31:39.673

当我通过 manifest.json 加载 jQuery 时为我工作：

```
{
...
  "background": {
    "scripts": ["jquery.min.js", "background.js"]
  },
...
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-03T14:28:55.173

安全原因——扩展比普通的沙盒网页做得更多。出于这个原因，您可能必须使用与扩展一起打包的 jQuery 版本，而不是通过 Internet 加载的版本，尤其是通过 HTTP（与 HTTPS）加载的版本。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-03T14:29:07.430

出于安全原因，您不能在 Google Chrome 扩展程序中引用外部 JavaScript 文件。为了解决您的问题，您必须将 jQuery 库嵌入到您的扩展中，然后在您的 background.html 页面中引用它。就像是 ：

```
<html>
  <head>
    <script src='jquery.min.js'></script>
    <!-- ... -->
  </head>
  <body>
    <!-- ... -->
  </body>
</html> 
```

# android - 提取与新闻文章关联的缩略图

> ID：13210060
> 
> 赞同：4
> 
> 时间：2012-11-03T14:26:15.037
> 
> 标签：android

我不确定我是否正确地标记了这个问题，但我知道很多新闻应用程序，如 Pulse、Google Currents 等，都会提取新闻文章的缩略图。我的问题是，我假设他们正在从新闻网站本身中提取内容，无论是屏幕抓取还是消费某种形式的提要。他们怎么知道从网站上提取哪个图像？

我用“android”标签来标记它，因为我已经构建了一个新闻阅读器应用程序，我想拉入一个缩略图图像。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T14:40:44.163

我前段时间使用这种方法自己构建了这样的东西：

1.  使用 Readability 框架处理文章（对于 Java，Google 发现[了 jReadability](https://github.com/ifesdjeen/jReadability)、[Snacktory](http://karussell.wordpress.com/2011/07/12/snacktory-yet-another-readability-clone-this-time-in-java/)和[Java-](https://github.com/basis-technology-corp/Java-readability) readability - 可能还有更多，其中一个也应该在 Android 上运行）。
2.  在处理后的文章中，使用一些 DOM 框架抓取第一个图像以导航到第一个 img 标签。由于文章是“干净的”，这通常是一个可用的命中。

我建议在服务器上进行文章处理，而不是在电话上。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-03T14:49:24.267

在[本文中](http://www.zemanta.com/blog/whats-the-best-thumbnail-for-this-page/)，讨论了不同的技术。

缩略图提取的一个很好的例子是在[reddit](http://reddit.com)上进行的。有关 reddit 如何识别和裁剪缩略图的详细信息，请参见[此处](http://blog.reddit.com/2010/04/now-this-is-how-you-pitch-your-product.html)和[此处](http://www.reddit.com/r/pics/comments/e9y6d/how_is_thumbbnail_formed/c16hwe0)。

# ruby-on-rails - 允许用户在使用 Twitter (OmniAuth) 登录时输入他们的电子邮件

> ID：13210062
> 
> 赞同：0
> 
> 时间：2012-11-03T14:26:29.643
> 
> 标签：ruby-on-rails, omniauth

我正在使用[omniauth-twitter](https://github.com/arunagw/omniauth-twitter)，我已经完成了所有设置：

**用户.rb：**

```
 def self.create_with_omniauth(auth)
    create! do |user|
      user.provider = auth["provider"]
      user.uid = auth["uid"]
      user.name = auth["info"]["name"]
      user.email = auth["info"]["email"]
      # To pass password validation
      user.password = user.password_confirmation = SecureRandom.urlsafe_base64(n=6) 
    end
  end 
```

**session_controller.rb：**

```
 def create
    user = User.find_by_email(params[:session][:email].downcase)
    if user && user.authenticate(params[:session][:password])
      sign_in user
      redirect_back_or user
    else
      flash.now[:error] = 'Invalid email/password combination'
      render 'new'
    end
  end 
```

问题是您无法从 Twitter 检索电子邮件地址，因此由于我的验证规则，登录失败：

**用户.rb：**

```
 before_save { |user| user.email = email.downcase }
  before_save :create_remember_token

  validates :name, presence: true, length: { maximum: 50 }
  VALID_EMAIL_REGEX = /\A[\w+\-.]+@[a-z\d\-.]+\.[a-z]+\z/i
  validates :email, presence:   true,
                    format:     { with: VALID_EMAIL_REGEX },
                    uniqueness: { case_sensitive: false }
  validates :password, presence: true, length: { minimum: 6 }
  validates :password_confirmation, presence: true 
```

我想让用户输入电子邮件，这样他们就可以登录而不会验证失败（仅限 Twitter，因为我也有 Facebook 和 Google 登录）。

有人有什么建议吗？

**编辑：**

**users_controller.rb：**

```
 def create
    @user = User.new(params[:user])
    if @user.save
      sign_in @user
      flash[:success] = "Welcome to the Sample App!"
      redirect_to @user
    else
      if params[:form_name] == "enter_email"
        render 'enter_email'
      else
        render 'new'
      end
    end
  end 
```

**用户/enter_email.html.erb：**

```
<% provide(:title, 'Enter your email') %>
<h1>Enter your email</h1>

    <div class="row">
      <div class="span6 offset3">
        <%= form_for(@user) do |f| %>
          <%= render 'shared/error_messages', object: f.object %>

          <%= f.label :email %>
          <%= f.text_field :email %>

          <%= f.hidden_field :provider, value: params[:oprovider] %>
          <%= f.hidden_field :provider, value: params[:oprovider] %>
          <%= f.hidden_field :uid, value: params[:ouid] %>
          <%= f.hidden_field :name, value: params[:oname] %>
          <%= f.hidden_field :password , value: params[:opassword] %>
          <%= f.hidden_field :password_confirmation, value: params[:opassword_confirmation] %>

          <% # To know to which form to redirect in case of validation error %>
          <%= hidden_field_tag 'form_name', 'enter_email' %>

          <%= f.submit "Create my account", class: "btn btn-large btn-primary" %>
        <% end %>
      </div>
    </div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T02:34:04.393

创建用户后，它将无效，因为它将缺少所需的电子邮件。因此，当用户保存失败时，您应该将您从 Twitter 检索到的信息放入会话中，并将用户重定向到一个注册页面，他可以在其中输入他的电子邮件。基本上，这是：

```
# SessionsController
def create

  if user.save
    sign_in user
    redirect_to ...
  else
    session[:omniauth] = request.env['omniauth.auth'].except('extra')
    redirect_to new_registration_path
  end

end 
```

您会注意到我们正在丢弃`extra`散列，因为它通常包含很多我们不需要的信息。如果您确实需要它，请小心，因为会话有一定的大小限制，有时您无法将所有内容都放入其中。

现在您需要创建一个注册控制器，其中包含`new`操作（显示用户输入电子邮件的页面）和`create`操作（您将使用 Twitter 信息进一步自定义新用户的位置）。

```
# RegistrationsController
def create
  if session[:omniauth]
    user = User.create_with_email_and_omniauth(params[:user], session[:omniauth])
  end
  session[:omniauth] = nil unless user.new_record?
end 
```

最后，如果用户是有效的并被保存，那么我们可以安全地从会话中销毁 Twitter 信息。

# c++ - 如何在没有项目的情况下在 Visual Studio 2012 中只编译一个文件（C++）？

> ID：13210064
> 
> 赞同：4
> 
> 时间：2012-11-03T14:26:43.417
> 
> 标签：c++, compilation, visual-studio-2012

我有很多文件 - C++ 中的示例代码。我打开每个文件，我必须将代码从示例文件复制到某个项目中的 main.cpp 文件。Visual Studio 可以在没有项目的情况下在 .cpp 中编译一个打开的文件吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-03T14:31:25.397

在这种情况下，从命令行编译可能是最简单的。

启动命令提示符窗口并运行批处理文件以适当地设置环境变量（`%PATH%`等）。在我的电脑上这是

```
"C:\Program Files\Microsoft Visual Studio 9.0\vc\vcvarsall.bat" 
```

然后编译`foo.cpp`成`foo.exe`，只需使用

```
cl /EHsc foo.cpp 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-03T14:30:21.027

Visual Studio 包括一个可以从命令行运行的编译器和链接器。[这](https://stackoverflow.com/questions/1125537/visual-studio-command-prompt-vs-a-regular-command-prompt)可能会给你一些指示。我认为您会发现创建项目更容易。你不能只创建一个项目并重用它吗？

# string - 搜索每个字符的字符串表

> ID：13210069
> 
> 赞同：0
> 
> 时间：2012-11-03T14:27:53.413
> 
> 标签：string, macos, sqlite, data-structures

我遇到了字符串问题。我有很多（可以说是 100 多个）带有字符串的二维数组。我将需要通过它们搜索匹配字符串的出现（通过搜索栏输入）。如果出现任何情况，则必须在表格视图中显示包含匹配字符串的行。对于搜索栏中输入的每个字符，必须对结果进行细化并在表格视图中显示。

必须保存所有字符串数据，并且必须打开以供以后使用。有人可以就以下事项提出建议吗？

1.  将所有二维字符串数组保存在数据库中是否可以。（SQLite）？还是 xml 文件中的每个数组？或任何其他更好的主意？

2.  如何有效地搜索所有字符串？我正在考虑创建一个 trie 数据结构以便更好地搜索。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-03T15:36:19.847

鉴于您有多达 20,000,000 个字符串，我不建议您使用 XML 作为文件格式。它会在磁盘空间和解析时间上增加很多开销。对我来说，数据库绝对是一种更好的方式。如果字符串都是最大长度，那么仅字符串就有 5GB 的数据，因此您甚至可能希望以某种方式压缩它们，具体取决于最终用户的机器。

Trie 听起来也是搜索它们的数据结构的不错选择。虽然，它会很大。它可能不需要是整个 5GB 的内存，但是有了实现它所需的各种指针和东西，它可能仍然很大。多大可能取决于字符串前缀之间的重叠量。如果数据证明太大，您可以使用[紧凑的前缀树。](http://en.wikipedia.org/wiki/Compact_prefix_tree)

另一种选择是将它们全部排序并在用户键入时进行二进制搜索。但是，动态对它们进行排序可能效率不高，因此您可能希望保存字符串的预排序索引。（不确定您是否可以这样做，或者在运行应用程序时数据是否发生变化。）

# smalltalk - 在 Smalltalk (Pharo) 中调整图像文件 (JPEG) 的大小

> ID：13210071
> 
> 赞同：3
> 
> 时间：2012-11-03T14:28:10.423
> 
> 标签：smalltalk, pharo, squeak

我正在尝试使用 pharo 调整硬盘驱动器上的图像文件的大小。这是我目前的做法：

```
img := ImageReadWriter formFromFileNamed: 'picture.jpg'.
scaledimage := img scaledIntoFormOfSize: 100.
scaledimage writeJPEGfileNamed: 'scaledPicture.jpg'. 
```

这是一个好方法吗？还有一种方法可以指定此图像的 jpeg 压缩质量吗？

谢谢！

亨内

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-04T08:06:47.673

好的，我找到了执行此操作的方法并想分享我的解决方案。这是代码：

```
img := ImageReadWriter formFromFileNamed: 'pic.jpg'.
scaledimage := img magnifyBy: 0.8.
PluginBasedJPEGReadWriter
  putForm: scaledimage
  quality: 95
  progressiveJPEG: false
  onFileNamed: 'scaledPicture95.jpg'.
scaledimage writeJPEGfileNamed: 'scaledPictureDfl.jpg'. 
```

这样，您可以按一个因子缩放图像，在本例中为 0.8。大于 1 的因子也有效。此外，您可以指定 JPEG 质量。在这个例子中我选择了 95。渐进式 JPEG 标志可以创建一个图像，该图像在加载时以预览质量显示在浏览器中，并且传输的数据越多越好。但并非所有浏览器都支持！最后一行是可选的，只是保存第二个带有默认设置的 JPEG 作为比较。我希望这可以帮助一些人在未来寻找这个。

亨内

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-04T11:55:44.540

我不知道`PluginBasedJPEGReadWriter`。

有[Smagick](http://lists.squeakfoundation.org/pipermail/announcements/2007-August/000086.html)。它需要 ImageMagick 和 OSProcess 才能使其工作。

如果您需要一个完整的图像处理库，它会很有用。

# python - 当我在 Django 中创建测试方法时，“self”到底指的是什么？

> ID：13210072
> 
> 赞同：4
> 
> 时间：2012-11-03T14:28:27.150
> 
> 标签：python, django, unit-testing, self

我对“自我”的理解是，它的意思是“包含此方法的类的实例”。因此，当默认 django 测试读取时：

```
class SimpleTest(TestCase):
    def test_basic_addition(self): 
```

在某种意义上，我们向 test_basic_addition 传递了一个 SimpleTest 实例，在某些时候 setUp 方法中定义的动作（如果有的话）已应用到该实例。大概`manage.py test`以某种方式创建了这个实例，但我真的不明白它是什么！这里到底发生了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-03T14:31:08.670

`SimpleTest`实际上，测试运行器确实为您创建的每个测试方法创建了您的测试类 ( ) 的一个实例。`self`指那个实例。

从[`unittest`文档](http://docs.python.org/2/library/unittest.html#unittest.TestCase)中：

> 每个实例都`TestCase`将运行一个测试方法：名为`methodName`.

这意味着您可以在测试类上使用额外的“帮助”方法，并使用`self.name_of_helper_method()`.

您通常不必担心`unittest`框架如何加载和运行您的测试，但[`unittest`文档](http://docs.python.org/2/library/unittest.html)可以更详细地解释这一点。

# jquery - jQuery 脚本似乎没有动画

> ID：13210082
> 
> 赞同：2
> 
> 时间：2012-11-03T14:29:48.363
> 
> 标签：jquery, animation

首先对不起我的英语，因为它不是我的第一语言。我正在为一个学校项目建立一个时间线网站，它进展顺利，但有一件事一直困扰着我。

我有这些球，当点击它们时，它们会在它们后面打开一个 div 并关闭所有其他球并设置一些类，这样我就知道它们已打开。

如果您尝试打开一个不同的，然后打开一个已经打开的，效果很好。

现在，如果我打开一个并再次单击它以将其关闭，这就是问题所在，我会深入到代码中：

```
if($('.balkln, .balgrt').hasClass("open")){
      console.log("Clicked and there is a open class active!"); 
```

但它永远不会触发下一个设置的动画，即使它具有类 infoopen

```
$(".infoopen").stop().animate({ 
```

网站链接：http: [//kloek.skippy.nu](http://kloek.skippy.nu)

有人有想法吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-03T14:43:03.037

问题是您正在尝试查看其中是否`.balkln`有`.balgrt`一个带有类**的****元素`open`**。您的代码自己检查是否`.balkln`或`.balgrt` **拥有该类**。

尝试将您的代码更改为：

```
if($('.balkln, .balgrt').find(".infoopen")){ // this will look for open divs within balls
  console.log("Clicked and there is a open class active!"); 
```

这个条件应该是`true`，这就是你想要的。此外，我感觉到您的代码存在结构错误，因为您寻找**一个打开的球**，然后您寻找**一个要关闭的信息 div**。你想要的是寻找一个打开并关闭**它包含的信息 div****的球**。您的代码现在可以工作，但是当您允许多个球同时打开时，您会遇到麻烦，因为关闭一个会导致关闭所有球。

# android - 如何在android中使用.NET webservice

> ID：13210098
> 
> 赞同：2
> 
> 时间：2012-11-03T14:31:30.953
> 
> 标签：android, web-services, exception, soap

当我在服务器中发送请求时。它抛出一个异常，如：

```
"SoapFault - faultcode: 'soap:Server' faultstring: 'Server was unable to process request. 
---> There is no row at position 0.' faultactor: 'null' 
detail: org.kxml2.kdom.Node@40776970". 
```

这是 Android 端还是 WebService 端的异常？

任何人请帮助我..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-03T15:09:09.717

我认为问题出在您的要求中。检查您的肥皂请求。请求参数中的某些值似乎是`null`.

# angularjs - AngularJS - 选中复选框时，我想打印我检查过的内容

> ID：13210099
> 
> 赞同：1
> 
> 时间：2012-11-03T14:31:33.183
> 
> 标签：angularjs

我需要帮助：AngularJS - 当复选框被选中时，我想打印我检查过的内容。

这是预览。当我点击每个价格时，我想总结这些价格。

```
Check the jsfiddle 
```

[http://jsfiddle.net/HDbBJ/](http://jsfiddle.net/HDbBJ/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T19:06:41.030

[这个](http://plnkr.co/edit/3hUUko?p=preview)怎么样

主要思想是使用 ng-click 来捕捉检查了哪一个并在 mainctrl $scope 中总结

```
app.controller('MainCtrl', function($scope) {
  $scope.sum = 0;
  $scope.Selected = function (val,smartphone){
    if(val){      
      $scope.sum += parseInt(smartphone.price,10);
    }else{
      $scope.sum -= parseInt(smartphone.price,10);
    }

  };
}); 
```

# java - 如何使用 JPA 从单列映射到多个表

> ID：13210101
> 
> 赞同：1
> 
> 时间：2012-11-03T14:31:54.833
> 
> 标签：java, jpa, entity-relationship

我有 5 个表 MainReg、Person、PersonInfo、Company、CompanyInfo

```
CREATE TABLE [MainReg] (
[IdMainReg] [uniqueidentifier] NOT NULL,
[PersonalObjectId] [int] NULL,
[OwnerId] [nvarchar](36) NULL,
...)

CREATE TABLE [Person] (
[IdPerson] [uniqueidentifier] NOT NULL,
[PersonInfoId] [nvarchar](36) NULL,
...)

CREATE TABLE [PersonInfo] (
[IdPersonInfo] [uniqueidentifier] NOT NULL,
...)

CREATE TABLE [Company] (
[IdCompany] [uniqueidentifier] NOT NULL,
[CompanyInfoId] [nvarchar] NULL,)
...)

CREATE TABLE [CompanyInfo] (
[IdCompanyInfo] [uniqueidentifier] NOT NULL,
...) 
```

如果 [MainReg.PersonalObjectId] = 1，[MainReg.OwnerId] 列引用表 [Company] 中的行，如果 [MainReg.PersonalObjectId] = 2，则引用表 [Person] 中的行。

我的问题是，如何使用 JPA 映射这些表？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T15:04:35.370

您将无法在纯 JPA 中映射它。它需要不同的外键才能在 JPA 中映射：一个引用 Company，另一个引用 Person。

使用 Hibernate，您将能够使用[Any](http://docs.jboss.org/hibernate/core/3.6/javadocs/org/hibernate/annotations/Any.html)注释对其进行映射。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T15:12:52.423

在 EclipseLink 中，您可以使用 @VariableOneToOne 关系来映射它。

否则，您可以使用 TABLE_PER_CLASS 继承，或更改您的数据模型。

# android - 运行 Android 的问题（初学者！）

> ID：13210104
> 
> 赞同：1
> 
> 时间：2012-11-03T14:32:19.330
> 
> 标签：android

我目前只是在关注创建 android 应用程序的教程（http://developer.android.com/training/basics/firstapp/building-ui.html）。我认为我遵循了所有说明，但似乎无法按照他们的说明运行提供的示例应用程序。这是eclipse提供的响应：

```
[2012-11-03 14:18:06 - My First App] ------------------------------
[2012-11-03 14:18:06 - My First App] Android Launch!
[2012-11-03 14:18:06 - My First App] adb is running normally.
[2012-11-03 14:18:06 - My First App] Performing com.example.my.first.app.MainActivity activity launch
[2012-11-03 14:18:06 - My First App] Automatic Target Mode: using existing emulator 'emulator-5554' running compatible AVD 'TestDevice1'
[2012-11-03 14:18:06 - My First App] Uploading My First App.apk onto device 'emulator-5554'
[2012-11-03 14:18:07 - My First App] Installing My First App.apk...
[2012-11-03 14:20:22 - My First App] Failed to install My First App.apk on device 'emulator-5554!
[2012-11-03 14:20:22 - My First App] (null)
[2012-11-03 14:20:22 - My First App] Launch canceled!
[2012-11-03 14:23:00 - My First App] ------------------------------
[2012-11-03 14:23:00 - My First App] Android Launch!
[2012-11-03 14:23:00 - My First App] adb is running normally.
[2012-11-03 14:23:00 - My First App] Performing com.example.my.first.app.MainActivity activity launch
[2012-11-03 14:23:00 - My First App] Automatic Target Mode: using existing emulator 
'emulator-5554' running compatible AVD 'TestDevice1'
[2012-11-03 14:23:00 - My First App] Uploading My First App.apk onto device 'emulator-5554'
[2012-11-03 14:23:01 - My First App] Installing My First App.apk...
[2012-11-03 14:25:24 - My First App] Failed to install My First App.apk on device 'emulator-5554!
[2012-11-03 14:25:24 - My First App] (null)
[2012-11-03 14:25:25 - My First App] Launch canceled! 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-03T14:46:31.617

你在使用 Eclipse 吗？

您以前是否能够运行该程序？

如果您可以重新启动您的模拟器/计算机（请先尝试重新启动您的模拟器）。我曾经在一个蓝月亮中遇到过这个错误，只有重新启动用于解决它的计算机。

我还没弄清楚为什么会这样。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-02T04:19:57.730

在我的情况下，它通过重新启动 Eclipse 并重新启动 Emulator 来工作！

试一试。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-08-10T19:48:41.373

将项目的属性：Properties/Android/Project Build Target 更改为 Android 4.4.2 API 19，应用程序应该可以运行。

# java - 在 Java IOException Premature EOF 中读取网页

> ID：13210108
> 
> 赞同：11
> 
> 时间：2012-11-03T14:32:48.830
> 
> 标签：java, io, eof, urlconnection

阅读网页时，我经常收到“过早的 EOF”异常。

以下是 StackTrace

```
java.io.IOException: Premature EOF
    at sun.net.www.http.ChunkedInputStream.readAheadBlocking(ChunkedInputStream.java:556)
    at sun.net.www.http.ChunkedInputStream.readAhead(ChunkedInputStream.java:600)
    at sun.net.www.http.ChunkedInputStream.read(ChunkedInputStream.java:687)
    at java.io.FilterInputStream.read(FilterInputStream.java:133)
    at sun.net.www.protocol.http.HttpURLConnection$HttpInputStream.read(HttpURLConnection.java:2968)
    at sun.nio.cs.StreamDecoder.readBytes(StreamDecoder.java:283)
    at sun.nio.cs.StreamDecoder.implRead(StreamDecoder.java:325)
    at sun.nio.cs.StreamDecoder.read(StreamDecoder.java:177)
    at java.io.InputStreamReader.read(InputStreamReader.java:184)
    at java.io.BufferedReader.fill(BufferedReader.java:154)
    at java.io.BufferedReader.readLine(BufferedReader.java:317)
    at java.io.BufferedReader.readLine(BufferedReader.java:382)
    at Utilities.getPage(Utilities.java:24)  while ((line = rd.readLine()) != null) {
    at TalkPage.<init>(TalkPage.java:15)
    at Updater.run(Updater.java:65) 
```

以下是 getPage() 方法

```
public static String getPage(String urlString) throws Exception {
    URL url = new URL(urlString);
    URLConnection conn = url.openConnection();
    BufferedReader rd = new BufferedReader(new InputStreamReader(conn.getInputStream()));
    StringBuffer sb = new StringBuffer();
    String line;
    while ((line = rd.readLine()) != null) {  // LINE 24
        sb.append(line);
    }
    return sb.toString();
} 
```

什么是 permature EOFException，为什么会在这种特殊情况下发生，如何避免？

其他一些信息：正在读取的页面大小约为 20 KB，我在我的程序中读取了许多这样的页面（大约 20 000）

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-03T14:44:00.607

这可能是因为您正在逐行读取内容，并且对于最后一行，文件可能缺少返回，以表示行尾。用这个替换你的while：

```
int BUFFER_SIZE=1024;
char[] buffer = new char[BUFFER_SIZE]; // or some other size, 
int charsRead = 0;
while ( (charsRead  = rd.read(buffer, 0, BUFFER_SIZE)) != -1) {
  sb.append(buffer, 0, charsRead);
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-05-23T21:00:10.707

这可能是因为服务器正在关闭连接。*当我有一段代码打开连接，进行了一些其他处理，然后*才尝试下载输入流的内容时，我遇到了完全相同的问题- 在花费几秒钟后将其下载到流中其他处理，服务器显然已经关闭了连接，导致IOException: Premature EOF。解决方案是要小心始终立即处理流的内容 - 否则，您将打开 HTTP 连接并处于空闲状态，最终线路另一端的服务器将挂断您。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-03T15:14:03.053

您可以使用 APACHE`commons io FileUtils.copyURLToFile`方法

[http://commons.apache.org/io/api-release/org/apache/commons/io/FileUtils.html#copyURLToFile%28java.net.URL,%20java.io.File,%20int,%20int%29](http://commons.apache.org/io/api-release/org/apache/commons/io/FileUtils.html#copyURLToFile%28java.net.URL,%20java.io.File,%20int,%20int%29)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-03-06T16:54:54.280

您也可以尝试将缓冲区大小设置为 1。这有点帮助，如果您围绕它实现一个 try 逻辑，那么它应该可以解决问题。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-03-29T13:53:55.667

```
 StringBuilder sb = new StringBuilder();

        try{                
            URL url = new URL(address);

            InputStream is = url.openStream();

            InputStreamReader isr = new InputStreamReader(is);

            BufferedReader in = new BufferedReader(isr);

            String str;

            while((str = in.readLine()) != null){

                sb.append(str);

                sb.append("\n");
            }

            in.close();
            isr.close();
            is.close();

            return sb.toString();

         }catch(Exception e){

             //OMG....
         } 
```

# asp.net - 在 MS Managment Studio 中存储过程返回数据。使用 C# 调用时不返回任何数据

> ID：13210110
> 
> 赞同：1
> 
> 时间：2012-11-03T14:33:12.183
> 
> 标签：asp.net, sql-server-2008, c#-4.0, stored-procedures, dataset

===========================存储程序====================== =========

```
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO

ALTER PROC [dbo].[SerachTickets]
    @StoreID varchar(70),
    @StatusID varchar(70),
     @CustomerName varchar(400),
         @TicketNo varchar(70),
         @StratDate varchar(100),
         @ESTDate varchar(100),
         @StaffID varchar(100),
         @ServiceItemID varchar(100)
AS 
    SET NOCOUNT ON 
    SET XACT_ABORT ON  
    declare @sql nvarchar(MAX)

    Set @sql='SELECT   Ticket.TicketID,Ticket.StaffID,ServiceItemInfo.ServiceItemID,
    ISNULL(TicketWorkLog.WorkLogDesc,'''') WorkLogDesc,
     Ticket.SerialNo, Convert(varchar(50),Ticket.CreationDate,101) CreationDate,
Admin_ServiceItem.ServiceItem,Convert(varchar(50),Ticket.CompletionDate,101) CompletionDate, Ticket.IsPickedUp, 
Ticket.IsPaid, Ticket.IsVoid, Ticket.IsReadyForPayment, ISNULL(Ticket.TicketDetail,'''') TicketDetail,
Admin_Staff.StaffFirstName + '' ''+ Admin_Staff.StaffLastName As StaffFullName
FROM   Ticket 
LEFT JOIN   Admin_Staff ON Ticket.StaffID = Admin_Staff.StaffID 
LEFT JOIN   TicketWorkLog ON Ticket.TicketID = TicketWorkLog.TicketID
LEFT JOIN   ServiceItemInfo On Ticket.TicketID = ServiceItemInfo.TicketID
LEFT JOIN   Admin_ServiceItem On ServiceItemInfo.ServiceItemID = Admin_ServiceItem.ServiceItemID  
LEFT JOIN   Customer On Ticket.CustomerID = Customer.CustomerID
       WHERE Ticket.StoreID='+@StoreID

       if @StatusID <> '' 
        BEGIN
        Set @sql =@sql + ' AND TicketWorkLog.StoreWorkLogID = '+@StatusID
        END 

       if @CustomerName <> ''
        BEGIN
        Set @sql =@sql + ' AND (Customer.FirstName Like(''%'+@CustomerName+'%'')'
        END

        if @CustomerName <> ''
        BEGIN
        Set @sql =@sql + ' OR Customer.LastName Like(''%'+@CustomerName+'%''))'
        END

       if @TicketNo <> ''
        BEGIN
        Set @sql =@sql + ' AND Ticket.SerialNo Like(''%'+@TicketNo+'%'')'       
        END

       if @StratDate <> '1900-01-01 00:00:00'
        BEGIN
        Set @sql =@sql + ' AND Ticket.CreationDate Between ''' +Convert(varchar(100),Convert(DateTime,@StratDate),101)+ ''' AND '''+Convert(varchar(100),Convert(DateTime,@StratDate),101)+''''     
        END

       if @ESTDate <> '1900-01-01 00:00:00'
        BEGIN
        Set @sql =@sql + ' AND Ticket.CompletionDate Between ''' +Convert(varchar(100),Convert(DateTime,@ESTDate),101)+ ''' AND '''+Convert(varchar(100),Convert(DateTime,@ESTDate),101)+''''       
        END
       if @StaffID <> '0'
        BEGIN
        Set @sql =@sql + ' AND Ticket.StaffID ='+@StaffID       
        END

       if @ServiceItemID <> ''
       BEGIN
        Set @sql =@sql + ' AND ServiceItemInfo.ServiceItemID ='+@ServiceItemID      
        END

--print @sql;
--exec SerachTickets 1,'','','','1900-01-01 00:00:00','1900-01-01 00:00:00',0,''  
Exec (@sql) 
```

===============================C# 代码================== =================

```
try
            {
                using (SqlConnection sqlCon = new SqlConnection(ConfigurationManager.ConnectionStrings["SqlServer"].ToString()))
                {
                    DateTime? dtStart = Convert.ToDateTime("01/01/1900");
                    DateTime? dtEst = Convert.ToDateTime("01/01/1900");
                    int intAssign = 0;

                    if (!string.IsNullOrEmpty(Request.QueryString["sdate"]))
                    {
                        dtStart = Convert.ToDateTime(Request.QueryString["sdate"]);
                    }

                    if (!string.IsNullOrEmpty(Request.QueryString["estdate"]))
                    {
                        dtEst = Convert.ToDateTime(Request.QueryString["estdate"]);
                    }

                    if (!string.IsNullOrEmpty(Request.QueryString["assign"]))
                    {
                        intAssign = Convert.ToInt32(Request.QueryString["assign"]);
                    }

                    using (SqlCommand cmd =sqlCon.CreateCommand())
                    {
                        DataSet dataset = new DataSet();

                        sqlCon.Open();

                        cmd.CommandType = CommandType.StoredProcedure;
                        cmd.CommandText = "SerachTickets";

                        cmd.Parameters.AddWithValue("@StoreID", Session["StoreID"]);
                        cmd.Parameters.AddWithValue("@StatusID", Request.QueryString["sid"]);
                        cmd.Parameters.AddWithValue("@CustomerName", Request.QueryString["cname"]);
                        cmd.Parameters.AddWithValue("@TicketNo", Request.QueryString["tno"]);
                        cmd.Parameters.AddWithValue("@StratDate", dtStart);
                        cmd.Parameters.AddWithValue("@ESTDate", dtEst);
                        cmd.Parameters.AddWithValue("@StaffID", intAssign);
                        cmd.Parameters.AddWithValue("@ServiceItemID", Request.QueryString["itemid"]);
                        using (SqlDataAdapter da = new SqlDataAdapter(cmd))
                        {

                            da.Fill(dataset);
                            cmd.Connection.Close();
                            grdTickets.DataSource = dataset.Tables[0];
                            grdTickets.DataBind();

                        }
                    }
                }

            }
            catch (Exception ee)
            {
            } 
```

==================================================== ==============================

我已经使用 SQL PROILER 检查了 C# 发送到 SQL Server 的值。

exec SerachTickets @StoreID=1,@StatusID=N'',@CustomerName=N'',@TicketNo=N'',@StratDate='1900-01-01 00:00:00',@ESTDate='1900- 01-01 00:00:00'，@StaffID=0，@ServiceItemID=N''

在 MS Managment Studio 中运行此查询时，它返回所需的结果，但在 C# No Dara 中返回..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T14:29:51.297

我不知道代码出了什么问题，但我做了一些更改，但它没有工作。我现在更改了命令文本，而不是使用过程我正在使用这个查询，当我在 SQL Management Studio 中运行时返回记录.

现在它运作良好。

字符串 strCommand = "exec SerachTickets @StoreID=" + Session["StoreID"] + ",@StatusID=N'" + Request.QueryString["sid"] + "',@CustomerName=N'" + Request.QueryString[ "cname"] + "',@TicketNo=N'" + Request.QueryString["tno"] + "',@StratDate='" + dtStart + "',@ESTDate='" + dtEst + "',@ StaffID=" + intAssign + ",@ServiceItemID=N'" + Request.QueryString["itemid"] + "'";

cmd.CommandText = strCommand;

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T06:10:51.357

`SqlCommand cmd =new SqlCommand(sqlCon)`代替`SqlCommand cmd =sqlCon.CreateCommand()`. _

并在调试期间检查适配器是否填充数据集。

# jquery - 如何仅在元素 id 组上使用 Fancybox

> ID：13210113
> 
> 赞同：1
> 
> 时间：2012-11-03T14:33:54.480
> 
> 标签：jquery, fancybox

我试图让 Fancybox 只查看特定元素 ID 内的图像。我有一个页面，其中包含 div，每个页面都有一个唯一的 id，如下所示：

```
<div id="p23152" class="post bg2"> 
```

当我在页面上触发fancybox时的问题，它会从页面上的每张图片中抓取一个缩略图，可能是数百张。

所以我真正想做的是，如果有人点击属于具有唯一 id 的 div 的图片，我希望 fancybox 只包含该 div id 中的那些图片，而不是像现在这样的所有其他 div。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-03T14:47:38.187

您可以使用适当的选择器来限制它：

```
$("div#p23152 a").fancybox(); 
```

查看 Fancybox[提示和技巧](http://fancybox.net/blog)页面了解更多详情。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-03T21:24:14.943

@dkinzer 解决方案看起来不错，但是如果您有十个或更多`<div>`，那么您需要为它们中的每一个设置一个不同的 fancybox 自定义脚本。

假设所有`<div>`共享一个公共类（`class="post"`例如在您的示例中），那么您可以这样做以`<div>`在单个脚本中将每个画廊分开，例如：

```
$(document).ready(function() {
 $(".post").each(function(){
  $(this).find("a").attr("rel", this.id).fancybox();
 });
}); // ready 
```

[看演示](http://jsfiddle.net/BwuaT/3/)

# python - 在 CentOS 5.8 上打开的 Python 文件中的 UnicodeEncodeError

> ID：13210118
> 
> 赞同：0
> 
> 时间：2012-11-03T14:34:55.913
> 
> 标签：python, unicode

我在 32 位 CentOS 5.8 上的 Python 中的文件 open() 有问题。在文件名中使用 ascii 之外的字符时，出现以下错误：

```
UnicodeEncodeError: 'ascii' codec can't encode character u'\xe7' in position 88: ordinal not in range(128) 
```

违规行是

```
file = open(full_path, 'w') 
```

该代码在 64 位 Ubuntu 12.10 和 64 位 CentOS 6.3 上运行良好。

来自发生错误的服务器的一些信息：

```
$ python --version
Python 2.7.3
$ cat /etc/redhat-release 
CentOS release 5.8 (Final)
$ locale
LANG=en_US.UTF-8
LC_CTYPE="en_US.UTF-8"
LC_NUMERIC="en_US.UTF-8"
LC_TIME="en_US.UTF-8"
LC_COLLATE="en_US.UTF-8"
LC_MONETARY="en_US.UTF-8"
LC_MESSAGES="en_US.UTF-8"
LC_PAPER="en_US.UTF-8"
LC_NAME="en_US.UTF-8"
LC_ADDRESS="en_US.UTF-8"
LC_TELEPHONE="en_US.UTF-8"
LC_MEASUREMENT="en_US.UTF-8"
LC_IDENTIFICATION="en_US.UTF-8"
LC_ALL= 
```

我检查了 Ubuntu 机器上的“full_path”变量的类型是“unicode”。“full_path”变量的一部分来自 UTF-8 格式的配置文件。其余部分来自 UTF-8 格式的网页。

我还没有在 CentOS 5.8 机器上进行任何测试，因为它是生产服务器，我宁愿不对其进行随机测试。任何可能导致此错误的原因的提示都表示赞赏。

**更新**

如果忘记提及以下工作：

```
$ python
Python 2.7.3 (default, Jun 11 2012, 22:26:11) 
[GCC 4.1.2 20080704 (Red Hat 4.1.2-52)] on linux2
Type "help", "copyright", "credits" or "license" for more information.
>>> file = open(u'ø.txt', 'w')
>>> 
```

在我看来，这应该与实际程序相同，但显然不是。

**更新 2**

现在它出于某种原因工作。该程序是一个 Turbogears Web 应用程序，我刚刚启动并停止了服务器守护程序以查看一些调试打印的结果，并且不再发生错误。

我仍然不知道为什么会发生这种情况，但至少问题暂时解决了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-03T14:50:23.363

我不确定这是否可以作为解决方案，但我遇到了这样的错误。我解决了，但我现在有一些副作用（查看我的个人资料）。尝试：

```
import sys
reload(sys)
sys.setdefaultencoding('utf-8') 
```

# asp.net - ASP MVC - 反转 foreach

> ID：13210121
> 
> 赞同：4
> 
> 时间：2012-11-03T14:35:16.117
> 
> 标签：asp.net, asp.net-mvc

我有以下代码输出导航栏的一系列链接：

```
 <% foreach (var item in (Dictionary<string, string>)ViewData["navItems"])
        {
        Response.Write(Html.ActionLink(item.Key, item.Value));
        }
    %> 
```

无论如何要更改此代码，以便以相反的顺序输出链接列表？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-03T14:37:25.610

您可以使用`Enumerable.Reverse`方法（[此处的](http://msdn.microsoft.com/en-us/library/bb358497.aspx)文档）：

```
var dic = (Dictionary<string, string>)ViewData["navItems"];

foreach (var item in dic.Reverse())
{
   Response.Write(Html.ActionLink(item.Key, item.Value));
} 
```

或老派解决方案：将您的 foreach 循环更改为从最后一项开始的循环，递减索引..

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-03T14:45:33.357

您应该在这里注意的重要一点是 Dictionary 中项目的顺序是[不确定的](http://msdn.microsoft.com/en-us/library/xfhwa508.aspx)。虽然您现在看到的是特定订单，但不能保证 Hashtables（其中 Dictionary 是其中的一个）。因此，即使您使用一种方法来反转顺序，您也无法保证将来会使用该顺序，并且您可能会在解决方案中遇到计划外的结果。

> 出于枚举的目的，字典中的每个项目都被视为表示值及其键的 KeyValuePair 结构。返回项目的顺序未定义。

我的建议是不要直接枚举 Dictionary ，而是以保证顺序的形式获取您想要的值，例如 List<> 并在那时对它们进行排序，然后在您的列表中枚举应用。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-03T14:57:15.190

我不确定您是否要对其进行排序。如果你这样做，你可以使用以下内容。如果你只是想要它反转 Reverse() 就是你想要的。

这为您提供了键上相反顺序的列表。如果您想按值的顺序遍历列表，可以将 c.Key 更改为 c.Value。

```
var dict = new Dictionary<string, string>() {{"a", "1"}, {"b", "2"}, {"c", "3"}};

foreach (var keyValuePair in dict.OrderByDescending(c => c.Key))
{
    Console.WriteLine(keyValuePair.Value);
} 
```

# jquery - 使用 Jquery 动画预加载器预加载一个 div 的内容

> ID：13210124
> 
> 赞同：0
> 
> 时间：2012-11-03T14:35:27.793
> 
> 标签：jquery, html, preloader, image-preloader

我有一个投资组合网站，所有图像都在一个容器 div 中。我目前在网站上有一个运行良好的 JQuery 预加载器，它显示一个加载栏，当它达到 100% 时网站淡入。我想知道我是否可以在包含我所有图像的一个 div 中获取这个预加载器和我是如何做到的。

我正在使用的插件是 QueryLoader，它使用以下代码调用：

```
<script>
$(document).ready(function () {
$("body").queryLoader2({
    barColor: "#099",
    backgroundColor: "#fff",
    percentage: true,
    barHeight: 1,
    completeAnimation: "fade"
});
});
</script> 
```

提前感谢您的想法。网站在这里：[www.samskirrowdesign.com](http://www.samskirrowdesign.com)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-03T19:57:00.180

我没有使用预加载器，但我会试一试。我假设预加载器的 html 必须在图像 div 和图像中。

```
<script>
  $("#divId").load(function(){
        $(this).queryLoader2({
            barColor: "#099",
            backgroundColor: "#fff",
            percentage: true,
            barHeight: 1,
            completeAnimation: "fade"
        });
  });
</script> 
```

# opengl - 通过在 OpenGL 中单击来旋转多边形

> ID：13210125
> 
> 赞同：0
> 
> 时间：2012-11-03T14:35:41.883
> 
> 标签：opengl, rotation, click, mouse, polygon

我有 2 个六边形

![在此处输入图像描述](../Images/ef8bff0e42e90efdffa1cbeea7aabcc8.png)

我想点击一个六边形的中心，点击的六边形将旋转 30 度，而另一个将保持静止。我试图做的是：

```
void myMouse( int button, int state, int x, int y ){

int selected=0;

if (x<=102 && x>=95 && y<=452 && y>=446)
    selected=1;

    if((selected == 1) &&( button == GLUT_LEFT_BUTTON ))
        {

        glTranslatef(-12, 6, 0);
        glRotatef(30,0,0,1.0);
        glTranslatef(12, -6, 0)

        }

} 
```

但是当我点击六边形的中心时，它会这样做

![在此处输入图像描述](../Images/1196c3ca74893dd23926bcfe2bf0c5f9.png)

它旋转了我的整个图片，我只想旋转六边形，我该怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T19:02:44.613

OpenGL 不是场景图。这是一个基于状态的绘图 API。调用 glRotate、glTranslate 等不会影响“对象”，而是会影响应用于绘图的原始变换矩阵。

作为基本规则，根本不应该将任何 OpenGL 调用放在输入事件处理程序中，*它们不属于那里！*

在您的情况下，您所做的是更改在绘制您想要影响的场景部分时使用的某些变量的值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-03T20:06:44.793

Give this a shot:

```
#include <GL/glut.h>
#include <iostream>
#include <vector>

using namespace std;

struct Target
{
    Target() : x(0), y(0), radius(0), angle(0) {}

    bool Colliding( float tx, float ty )
    {
        float dx = ( tx - x );
        float dy = ( ty - y );
        float distSq = ( dx * dx + dy * dy );
        return distSq < ( radius * radius );
    }

    void Draw() 
    {
        const unsigned int sides = 6;

        const float PI = 3.14159;
        const float step = ( 2 * PI ) / static_cast< float >( sides );

        glPushMatrix();
        glTranslatef( x, y, 0 );
        glRotatef( angle, 0, 0, 1 );
        glScalef( radius, radius, 0 );

        glBegin( GL_TRIANGLE_FAN );
        glVertex2f( 0, 0 );
        for( unsigned int i = 0; i <= sides; ++i )
        {
            if( i == 0 )
                glColor3ub( 0, 0, 255 );
            else
                glColor3ub( 255, 0, 0 );

            glVertex2f( cos( i * step ), sin( i * step ) );
        }
        glEnd();

        glPopMatrix();
    }

    float x;
    float y;
    float radius;
    float angle;
};

vector< Target > targets;
void init()
{
    targets.resize( 2 );
    targets[0].radius = 100;
    targets[1].radius = 100;
}

void reshape( int w, int h )
{
    glViewport( 0, 0, w, h );
    targets[0].x = w * (1/4.0);
    targets[0].y = h * (1/2.0);
    targets[1].x = w * (3/4.0);
    targets[1].y = h * (1/2.0);
}

void mouse( int button, int state, int x, int y )
{
    if( button == GLUT_LEFT_BUTTON && state == GLUT_DOWN )
    {
        bool hit = false;
        for( size_t i = 0; i < targets.size(); ++i )
        {
            if( targets[i].Colliding( x, y ) )
            {
                targets[i].angle += 30;
                hit = true;
            }
        }

        if( hit )
            glutPostRedisplay();
    }
}

void display()
{
    glClear( GL_COLOR_BUFFER_BIT );

    glMatrixMode( GL_PROJECTION );
    glLoadIdentity();
    double w = glutGet( GLUT_WINDOW_WIDTH );
    double h = glutGet( GLUT_WINDOW_HEIGHT );
    glOrtho( 0, w, 0, h, -1, 1);

    glMatrixMode( GL_MODELVIEW );
    glLoadIdentity();

    for( size_t i = 0; i < targets.size(); ++i )
    {
        targets[i].Draw();
    }

    glutSwapBuffers();
}

int main( int argc, char **argv )
{
    glutInit( &argc, argv );
    glutInitDisplayMode( GLUT_RGBA | GLUT_DOUBLE );
    glutInitWindowSize( 640, 480 );
    glutCreateWindow( "Hex" );

    init();

    glutDisplayFunc( display );
    glutMouseFunc( mouse );
    glutReshapeFunc( reshape );
    glutMainLoop();
    return 0;
} 
```

It's using `gl{Push|Pop}Matrix()` to preserve the model-view matrix in `Target::Draw()`.

# php - 从两个表中选择，单循环

> ID：13210128
> 
> 赞同：-2
> 
> 时间：2012-11-03T14:36:15.023
> 
> 标签：php, loops, join

如何使这段代码成为单循环？从两张桌子中选择一张！

```
<?

$items = Array();
$kate=mysql_query("select category_id from movies_cat where movie_id='$ids'");

while($cat=mysql_fetch_array($kate))
{
  $kate2=mysql_query("select name_cat from categories where id='$cat[category_id]'");

  while($cat2=mysql_fetch_array($kate2))
  {
    $items[] = $cat2['name_cat'];
  }
}

echo implode(",", $items);

?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-03T14:43:03.153

查询应该`SELECT category_id, name_cat from movies_cat m join categories c where m.category_id = c.id and movie_id='$ids'";`试试这个。

# iphone - 创建可重用的 iOS 控件

> ID：13210131
> 
> 赞同：1
> 
> 时间：2012-11-03T14:37:14.697
> 
> 标签：iphone, ios, ipad, ios4, code-reuse

我是iOS新手，

我正在尝试寻找在 iOS4+ 中创建可重用控件的最佳方法。例如，如果我创建了一个可以在多个其他视图中使用的视图，那么最好的方法是什么？

我创建了名为： HomeViewController.h HomeViewController.m HomeViewController.xib 的视图

在我的**HomeViewController文件中，我以编程方式创建了 5 个按钮和 5 个标签，** **.xib**文件中没有任何内容

现在我想做的是，我想重用我在**HomeViewController中创建的所有组件，我想在我的****nextViewController**中使用这个控件

 **我不想在我的新视图中再次编写代码我将在新视图中使用我的旧代码，简而言之我不想在我的新视图中再次创建相同的变量。

**有没有办法做到这一点？**

**任何帮助都会得到帮助。**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-03T14:43:11.053

想到了两种可能：

*   创建一个新对象，该对象仅包含您要重用的代码，并让您的两个视图控制器各自使用该对象的一个​​实例来执行常用功能，或者

*   创建一个抽象超类，你的两个视图控制器都继承自它，并将公共代码放入其中。**

# php - 在mysql更新查询中使用变量

> ID：13210132
> 
> 赞同：-1
> 
> 时间：2012-11-03T14:37:14.650
> 
> 标签：php, mysql, xhtml

这就是我想要做的，我在一页中有一个表格：

```
<form action="update.php" method="post" value="">
<textarea name="update">
<?php $page_name = "home"; $tablename = "pages"; $columnname = "content"; $redirect="formulier_home.php"; ?>
<?php $result = mysql_query("SELECT $columnname FROM $tablename WHERE page_name = '$page_name'"); ?>
<?php include("../includes/content_in_textarea.php"); ?>
</textarea>
<input type="submit" value="Publiceer" >        
</form> 
```

我在另一个页面更新：

```
<?php require_once("../includes/connection.php"); ?>
<?php $opvangen = $_POST['update'];?>
<?php $content = nl2br($opvangen); ?>
<?php mysql_query("UPDATE $tablename SET $columnname='$content' WHERE page_name='$page_name'") or die (mysql_error());
header("Location:$redirect"); ?> 
```

如果我不在这样的查询中使用变量，它工作正常：

```
<?php mysql_query("UPDATE $tablename SET $columnname='$content' WHERE page_name='$page_name'")or die (mysql_error());
header("Location:$redirect"); ?> 
```

但是我对如何将变量传输到更新页面有点困惑，我想将更新页面用于我想要调整的所有列和页面。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T14:57:34.483

如果您想将变量从一个站点推送到另一个站点，您需要使用 @SomeKittens 所写的 $_SESSION 或使用隐藏的表单字段。$_SESSION 更好，因为用户不能覆盖它。

把它放在你的表单容器文件的第一行：

```
<?php session_start(); ?> 
```

表格：

```
<form action="update.php" method="post">
<textarea name="update">
<?php
  $_SESSION['page_name'] = "home";
  $_SESSION['tablename'] = "pages";
  $_SESSION['columnname'] = "content";
  $_SESSION['redirect'] ="formulier_home.php";
  $result = mysql_query("SELECT {$_SESSION['columnname']} FROM {$_SESSION['tablename']} WHERE page_name = '{$_SESSION['$page_name']}'");
  include("../includes/content_in_textarea.php");
?>
</textarea>
<input type="submit" value="Publiceer" >        
</form> 
```

你的upload.php：

```
<?php
session_start(); // You need to put this in first line all the time when you use the $_SESSION global variable!
require_once("../includes/connection.php");
if (isset($_POST['update'])) {
 $opvangen = mysql_real_escape_string($_POST['update']);
 $content = nl2br($opvangen);
 $result = mysql_query("UPDATE {$_SESSION['tablename']} SET {$_SESSION['columnname']}='$content' WHERE page_name='{$_SESSION['page_name']}'") or die (mysql_error());
 header("Location:{$_SESSION['redirect']}");
}
?> 
```

这就是你所需要的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-03T14:41:49.123

如果你想将变量从一个页面“转移”到另一个页面，你应该使用[`$_SESSION`](http://php.net/manual/en/reserved.variables.session.php)超全局变量。

作为旁注，[**请不要`mysql_*`在新代码中使用函数**](https://stackoverflow.com/q/12859942/)。它们不再被维护，并且已经开始[弃用过程。](http://news.php.net/php.internals/53799)看到[**红框**](https://www.php.net/manual/en/function.mysql-connect.php)了吗？改为了解[*准备好的语句*](https://en.wikipedia.org/wiki/Prepared_statement)，并使用[PDO](http://php.net/pdo)或[MySQLi](http://php.net/mysqli) -[本文](https://php.net/manual/en/mysqlinfo.api.choosing.php)将帮助您决定使用哪个。如果您选择 PDO，[这里有一个很好的教程](http://wiki.hashphp.org/PDO_Tutorial_for_MySQL_Developers)。

# python - 输入到列表中的单个项目

> ID：13210134
> 
> 赞同：1
> 
> 时间：2012-11-03T14:37:31.233
> 
> 标签：python, string, list, input, binary

我目前正在用 Python 编写二进制翻译器。一切正常（从数字到二进制，从二进制到数字） - 只有一个问题。使用二进制到一个数字，我接受一个输入，但必须使用一个列表：

```
newBinary = []
Code = int(input()) #will receive something like 1001010 
```

使用来自 Code 的信息，newBinary 必须看起来像这样：

```
[1, 0, 0, 1, 0, 1, 0] 
```

我曾尝试找到一种将输入字符串转换为列表中单个字符的方法，但到目前为止还没有成功。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-03T14:43:21.477

`int`采用基数，[Python 2.6 及更高](https://stackoverflow.com/questions/1476/how-do-you-express-binary-literals-in-python)版本有一个`bin`函数将返回数字的二进制表示：

```
>>> int("111", 2)
7
>>> bin(7)
'0b111' 
```

*注意*：如果您使用的是 Python 2.N，请使用`raw_input`-`input`实际上是`eval`它给出的内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-03T14:45:36.430

我不确定我是否理解这个问题，或者我的解决方案是最好的，但请尝试这样的事情：

```
newBinary=[]
Code=input()
for n in range(len(Code)):
    newBinary.append(int(Code[n])) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-03T23:56:04.733

非常感谢大家！我最终使用了 MadsY 的 anwser 的修改版本：

```
Code=input("Give your Binary code:  ")

Length = len(Code)
Count = 0

while Count < Length:
    Bin[(-1 - len(Code) + Count + 1)] = Code[Count]
    Count = Count + 1 
```

我没有意识到 String 对象也有 [n] 属性-我曾经将字符放在列表中=）

该程序现在终于完成了=）（是的，这是一个练习；））

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-03T14:43:07.793

不要`int()`在输入上使用，尝试这样的事情：

**Python 2.x：**

```
>>> strs=raw_input()
1001010
>>> map(int,strs)
[1, 0, 0, 1, 0, 1, 0] 
```

**Python 3.x：**

```
>>> strs=input()
1001010
>>> list(map(int,strs))
[1, 0, 0, 1, 0, 1, 0] 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-03T16:55:20.730

正如其他人所提到的，如果你只是想从二进制转换为十进制，那么在现实生活中你应该这样做

```
>>> int('101', 2)
5 
```

但我猜这是一个练习，而不是一个现实世界的问题，并且仅仅通过使用内置函数来绕过这个问题并不是你在询问时想到的解决方案。

您要求一种将字符串转换为字符列表的方法。答案很简单：

```
>>> list('1010101')
['1', '0', '1', '0', '1', '0', '1'] 
```

列表推导式也可以帮助你在这里简洁明了地做你想做的事情。例如，要从二进制字符串获取 1 和 0 作为 int 对象的列表：

```
>>> [int(char) for char in '10101']
[1, 0, 1, 0, 1] 
```

# android - Android中的自定义微调器侦听器？

> ID：13210135
> 
> 赞同：2
> 
> 时间：2012-11-03T14:38:03.240
> 
> 标签：android, spinner, android-spinner

当我正在努力获取自定义微调器并在 toast 中显示值时。这些值正确设置为微调器，但我无法在吐司中显示它们。我的代码是

主.java

```
public class Main extends Activity {
ArrayList<String> ast = new ArrayList<String>();
Spinner customspinner;
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    customspinner = (Spinner)findViewById(R.id.spinner1);

    ast.add("111111");
    ast.add("222222");
    ast.add("333333");
    ast.add("444444");

    MyAdapter adp = new MyAdapter();
    customspinner.setAdapter(adp);
    System.out.println(ast);
    customspinner.setOnItemSelectedListener(new OnItemSelectedListener() {

        @Override
        public void onItemSelected(AdapterView<?> adapter, View v,
                int position, long val) {
            // TODO Auto-generated method stub
    //here when spinner was selected I need to save those two custom textviews in two string and need to display them in toast....
            //String getspineer = customspinner.getSelectedItem().toString();
            //Toast.makeText(getApplicationContext(), "spinner  --- " + getspineer , Toast.LENGTH_SHORT).show();
        }

        @Override
        public void onNothingSelected(AdapterView<?> arg0) {
            // TODO Auto-generated method stub  
        }
    });
}

public class MyAdapter extends BaseAdapter{

    @Override
    public int getCount() {
        // TODO Auto-generated method stub
        return ast.size();
    }

    @Override
    public Object getItem(int position) {
        // TODO Auto-generated method stub
        return position;
    }

    @Override
    public long getItemId(int position) {
        // TODO Auto-generated method stub
        return position;
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {
        // TODO Auto-generated method stub

        View v = null;
        LayoutInflater inflater = getLayoutInflater();
        v = inflater.inflate(R.layout.customspinner, null);
        TextView tv = (TextView)v.findViewById(R.id.textView1);
        TextView tv1 = (TextView)v.findViewById(R.id.textView2);
        String arlstdate[] = ast.get(position).split("~");
        for (int i = 0; i < arlstdate.length; i++) {
            tv.setText(arlstdate[i]);
            tv1.setText(arlstdate[i]);
        }
        return v;
    }
} 
```

}

我在这里寻找的是，当我选择微调器时，我需要将以下两个 textview 值保存在两个字符串中，并且需要分别在 Toast 混乱中显示它们。

谁能帮我这个。经过大量搜索后，我找到了此代码，但无法保存到字符串和显示中的文本值..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-03T14:51:29.710

抱歉，我并没有完全理解您的意思，但是作为指针，微调器上该位置的视图内容与您用于填充适配器的 ArrayList 上相同位置的字符串相同。

因此，您可以从 ArrayList 中获取值，而不是从 Spinner 视图中获取值。

```
 @Override
    public void onItemSelected(AdapterView<?> adapter, View v, int position, long val) {
        String getspineer = ast.get(position);
        Toast.makeText(getApplicationContext(), "spinner  --- " + getspineer , Toast.LENGTH_SHORT).show();
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-03T16:31:21.053

为了显示 Toast 消息：

```
Toast.makeText(getApplicationContext(), "put strings here", Toast.LENGTH_SHORT).show(); 
```

从 TextView 获取文本：

```
String text = tv.getText(); 
```

但是，如果您只想在 Toast 中显示消息，则不需要 TextView，只需使用字符串数组即可。

抱歉，如果我没有正确理解您的问题。

# google-maps - Display at most one infobox (google maps v3) at a time

> ID：13210138
> 
> 赞同：-2
> 
> 时间：2012-11-03T14:38:28.017
> 
> 标签：google-maps

There are many issues opend for the google maps v3 infobox.js, but almost all of them are without answeres or with few answeres that are not working in everybody cases.

I personally opend all the suggested questions and none of them was helpfull for me.

1.  Question 1

I am using infobox insted of default infowindow and i want when one infobox is opend (when i mouseover a marker) all the others should disapear. Also when i mouseout of the marker that infobox should disapear to. So its an application with lots of markers and when i mouse over one a infobox should apear and when i mouseover other marker, the previous infobox should disapear and the new one apears that corespund to the last marker.

Its obvious that i would like something very optimized since i will have more than 1000 markers on the map. (i guess a single infobox that will just change its content and its location)

1.  Quesiton 2

I want when the infobox apeares, all the markers on the map to be under it, and just that marker that i am mouseover it to be upon the infobox. I tryed with set Zindex and all that i could but nothing. I also change the mapPane and floatPane, but its or under all of them or uppon all of them, but in any case its uppon others and under the current marker.

I will apreacite very much if somebody will come with an answere. Thx (i stay near)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-03T15:01:17.910

If you want to see just one infobox, declare it as global variable

**PSEUDOCODE**

```
var globalib;

function setIb (){
   if (globalib && typeof globalib is INFOBOX) {
      globalib.close();
   }
   globalib = new Infobox...
...
} 
```

# php - 如何从需要 cookie 登录的网站中抓取 PHP 中的网站内容？

> ID：13210140
> 
> 赞同：5
> 
> 时间：2012-11-03T14:38:43.987
> 
> 标签：php, cookies, scraper, snoopy, goutte

我的问题是它不仅需要一个基本的cookie，而是要求一个会话cookie，以及随机生成的ID。我认为这意味着我需要使用带有 cookie jar 的网络浏览器模拟器？

我曾尝试使用 Snoopy、Goutte 和其他一些网络浏览器模拟器，但到目前为止我还没有找到有关如何接收 cookie 的教程。我有点绝望了！

谁能给我一个如何在 Snoopy 或 Goutte 中接受 cookie 的示例？

提前致谢！

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-11-03T14:45:18.543

您可以在 cURL 中执行此操作，而无需外部“模拟器”。

下面的代码将页面检索到要解析的 PHP 变量中。

# 设想

有一个打开会话的页面（我们称之为 HOME）。服务器端，如果它在 PHP 中，是第一次调用的（实际上是*任何*`session_start()`一个） 。在其他语言中，您需要一个特定页面来完成所有会话设置。从客户端来看，它是**提供**会话 ID cookie 的页面。在 PHP 中，所有会话页面都可以；在其他语言中，登录页面会执行此操作，所有其他人将检查 cookie 是否存在，如果不存在，则不会创建会话，而是将您带到 HOME。

有一个页面 (LOGIN) 生成登录表单并向会话添加关键信息 - “此用户已登录”。在下面的代码中，这是*请求*会话 ID 的页面。

最后，有 N 个页面存放了要刮的好东西。

所以我们要依次点击 HOME，然后 LOGIN，然后是 GOODIES。在 PHP（实际上是其他语言）中，HOME 和 LOGIN 很可能是同一个页面。或者所有页面可能共享相同的*地址*，例如在单页应用程序中。

# 编码

```
 $url            = "the url generating the session ID";
    $next_url       = "the url asking for session";

    $ch             = curl_init();
    curl_setopt($ch, CURLOPT_URL,    $url);
    // We do not authenticate, only access page to get a session going.
    // Change to False if it is not enough (you'll see that cookiefile
    // remains empty).
    curl_setopt($ch, CURLOPT_NOBODY, True);

    // You may want to change User-Agent here, too
    curl_setopt($ch, CURLOPT_COOKIEFILE, "cookiefile");
    curl_setopt($ch, CURLOPT_COOKIEJAR,  "cookiefile");

    // Just in case
    curl_setopt($ch, CURLOPT_FOLLOWLOCATION, true);

    $ret    = curl_exec($ch);

    // This page we retrieve, and scrape, with GET method
    foreach(array(
            CURLOPT_POST            => False,       // We GET...
            CURLOPT_NOBODY          => False,       // ...the body...
            CURLOPT_URL             => $next_url,   // ...of $next_url...
            CURLOPT_BINARYTRANSFER  => True,        // ...as binary...
            CURLOPT_RETURNTRANSFER  => True,        // ...into $ret...
            CURLOPT_FOLLOWLOCATION  => True,        // ...following redirections...
            CURLOPT_MAXREDIRS       => 5,           // ...reasonably...
            CURLOPT_REFERER         => $url,        // ...as if we came from $url...
            //CURLOPT_COOKIEFILE      => 'cookiefile', // Save these cookies
            //CURLOPT_COOKIEJAR       => 'cookiefile', // (already set above)
            CURLOPT_CONNECTTIMEOUT  => 30,          // Seconds
            CURLOPT_TIMEOUT         => 300,         // Seconds
            CURLOPT_LOW_SPEED_LIMIT => 16384,       // 16 Kb/s
            CURLOPT_LOW_SPEED_TIME  => 15,          // 
            ) as $option => $value)
            if (!curl_setopt($ch, $option, $value))
                    die("could not set $option to " . serialize($value));

    $ret = curl_exec($ch);
    // Done; cleanup.
    curl_close($ch); 
```

## 执行

首先我们要获取登录页面。

我们使用一个特殊的 User-Agent 来介绍我们自己，这样既可以被识别（我们*不想*激怒网站管理员），也可以欺骗服务器向我们发送为浏览器定制的特定版本的网站。理想情况下，我们使用与我们将用于调试页面的任何浏览器相同的 User-Agent，加上一个后缀，以使检查它是他们正在查看的自动化工具的人清楚（*参见 Halfer 的评论*） .

```
 $ua = 'Mozilla/5.0 (Windows NT 5.1; rv:16.0) Gecko/20100101 Firefox/16.0 (ROBOT)';
    $cookiefile = "cookiefile";
    $url1 = "the login url generating the session ID";

    $ch             = curl_init();

    curl_setopt($ch, CURLOPT_URL,            $url1);
    curl_setopt($ch, CURLOPT_USERAGENT,      $ua);
    curl_setopt($ch, CURLOPT_COOKIEFILE,     $cookiefile);
    curl_setopt($ch, CURLOPT_COOKIEJAR,      $cookiefile);
    curl_setopt($ch, CURLOPT_FOLLOWLOCATION, True);
    curl_setopt($ch, CURLOPT_NOBODY,         False);
    curl_setopt($ch, CURLOPT_RETURNTRANSFER, True);
    curl_setopt($ch, CURLOPT_BINARYTRANSFER, True);
    $ret    = curl_exec($ch); 
```

这将检索要求用户/密码的页面。通过检查页面，我们找到所需的字段（包括隐藏的字段）并可以填充它们。该`FORM`标签告诉我们是否需要继续使用 POST 或 GET。

我们可能想检查表单代码以调整以下操作，因此我们要求 cURL 将页面内容按原样返回到`$ret`中，并*返回*页面正文。有时，`CURLOPT_NOBODY`设置`True`为仍然足以触发会话创建和 cookie 提交，如果是这样，它会更快。但是`CURLOPT_NOBODY`("no body") 通过发出`HEAD`请求而不是`GET`; 有时`HEAD`请求不起作用，因为服务器只会对完整的`GET`.

除了以这种方式检索正文之外，还可以使用*真正的*Firefox 登录并嗅探使用 Firebug（或带有 Chrome 工具的 Chrome）发布的表单内容；一些网站会尝试使用 Javascript 填充/修改隐藏字段，以便提交的表单**不会**是您在 HTML 代码中看到的表单。

*希望自己的网站* **不被** *抓取的网站管理员可能会发送一个带有时间戳的隐藏字段。一个人（没有借助过于聪明的浏览器 - 有办法告诉浏览器不要聪明；最坏的情况是，每次更改用户名并传递字段时）至少需要三秒钟才能填写表格。cURL 脚本取零。当然，可以模拟延迟。都是太极拳...*

我们可能还想留意表格的*外观*。例如，网站管理员可以构建一个询问姓名、电子邮件和密码的表单；然后，通过使用 CSS，将“电子邮件”字段移动到您希望找到名称的位置，反之亦然。因此，提交的*真实*表单在名为 的字段中将有一个“@”，而在名为`username`的字段中则没有`email`。期望这一点的服务器只是再次反转这两个字段。手工构建的“刮板”（或垃圾邮件机器人）会做看起来很自然的事情，并在`email`现场发送电子邮件。通过这样做，它背叛了自己。通过使用真正的 CSS 和 JS 感知浏览器处理表单一次，发送有意义的数据，并嗅探实际发送的内容，我们*可能*能够克服这个特殊的障碍。*可能*，因为有一些使生活变得困难的方法。正如我所说，*太极拳*。

回到手头的案例，在这种情况下，表单包含三个字段并且没有 Javascript 覆盖。我们有`cPASS`, `cUSR`, 和`checkLOGIN`'Check login' 的值。

因此，我们准备了具有适当字段的表单。请注意，表单将作为 发送`application/x-www-form-urlencoded`，这在 PHP cURL 中意味着**两**件事：

*   我们要使用`CURLOPT_POST`
*   选项 CURLOPT_POSTFIELDS 必须是一个**字符串**（一个数组会发出 cURL 以作为 提交的信号`multipart/form-data`，这*可能*有效......也可能无效）。

正如它所说，表单字段是urlencoded；有一个功能。

我们阅读`action`表格的字段；这是我们用来提交身份验证的 URL（我们必须拥有）。

于是一切准备就绪……

```
 $fields = array(
        'checkLOGIN' => 'Check Login',
        'cUSR'       => 'jb007',
        'cPASS'      => 'astonmartin',
    );
    $coded = array();
    foreach($fields as $field => $value)
        $coded[] = $field . '=' . urlencode($value);
    $string = implode('&', $coded);

    curl_setopt($ch, CURLOPT_URL,         $url1); //same URL as before, the login url generating the session ID
    curl_setopt($ch, CURLOPT_POST,        True);
    curl_setopt($ch, CURLOPT_POSTFIELDS,  $string);
    $ret    = curl_exec($ch); 
```

我们现在期待“你好，詹姆斯 - 来一场精彩的国际象棋比赛怎么样？” 页。但更重要的是，我们期望与保存在 cookie 中的 cookie 关联的会话`$cookiefile`已经提供了关键信息—— *“用户已通过身份验证”*。

因此，使用同一个 cookie jar 发出的所有后续页面请求都`$ch`将被授予访问权限，使我们能够非常轻松地“抓取”页面 - 只需记住将请求模式设置回`GET`：

```
 curl_setopt($ch, CURLOPT_POST,        False);

    // Start spidering
    foreach($urls as $url)
    {
        curl_setopt($ch, CURLOPT_URL, $url);
        $HTML = curl_exec($ch);
        if (False === $HTML)
        {
            // Something went wrong, check curl_error() and curl_errno().
        }
    }
    curl_close($ch); 
```

在循环中，您可以访问`$HTML`每个页面的 HTML 代码。

使用正则表达式的诱惑很大。你必须抵制它。为了更好地应对不断变化的 HTML，以及确保在布局保持不变*但内容发生变化*时不会出现误报或漏报（例如，您发现您有尼斯、Tourrette-Levens 的天气预报， Castagniers，但从来没有 Asprémont 或 Gattières，这不是很奇怪吗？），最好的选择是使用 DOM：

[获取 A 元素的 href 属性](https://stackoverflow.com/questions/3820666/grabbing-the-href-attribute-of-an-a-element/3820783#3820783)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-12-15T07:53:57.547

# 面向对象的答案

我们在一个应该提供正常导航功能的类中尽可能多地实现[前面的答案。](https://stackoverflow.com/a/13210186/1428679)`Browser`

然后，我们应该能够以非常简单的形式将特定于站点的代码放入一个新的派生类中，我们称之为，`FooBrowser`执行站点抓取`Foo`。

派生浏览器的类必须提供一些特定于站点的功能，例如`path()`允许存储特定于站点的信息的功能，例如

```
function path($basename) {
    return '/var/tmp/www.foo.bar/' . $basename;
}

abstract class Browser
{
    private $options = [];
    private $state   = [];
    protected $cookies;

    abstract protected function path($basename);

    public function __construct($site, $options = []) {
        $this->cookies   = $this->path('cookies');
        $this->options  = array_merge(
            [
                'site'      => $site,
                'userAgent' => 'Mozilla/5.0 (Windows NT 5.1; rv:16.0) Gecko/20100101 Firefox/16.0 - LeoScraper',
                'waitTime'  => 250000,
            ],
            $options
        );
        $this->state = [
            'referer' => '/',
            'url'     => '',
            'curl'    => '',
        ];
        $this->__wakeup();
    }

    /**
     * Reactivates after sleep (e.g. in session) or creation
     */
    public function __wakeup() {
        $this->state['curl'] = curl_init();
        $this->config([
            CURLOPT_USERAGENT       => $this->options['userAgent'],
            CURLOPT_ENCODING        => '',
            CURLOPT_NOBODY          => false,
            // ...retrieving the body...
            CURLOPT_BINARYTRANSFER  => true,
            // ...as binary...
            CURLOPT_RETURNTRANSFER  => true,
            // ...into $ret...
            CURLOPT_FOLLOWLOCATION  => true,
            // ...following redirections...
            CURLOPT_MAXREDIRS       => 5,
            // ...reasonably...
            CURLOPT_COOKIEFILE      => $this->cookies,
            // Save these cookies
            CURLOPT_COOKIEJAR       => $this->cookies,
            // (already set above)
            CURLOPT_CONNECTTIMEOUT  => 30,
            // Seconds
            CURLOPT_TIMEOUT         => 300,
            // Seconds
            CURLOPT_LOW_SPEED_LIMIT => 16384,
            // 16 Kb/s
            CURLOPT_LOW_SPEED_TIME  => 15,
        ]);
    }

    /**
     * Imports an options array.
     *
     * @param array $opts
     * @throws DetailedError
     */
    private function config(array $opts = []) {
        foreach ($opts as $key => $value) {
            if (true !== curl_setopt($this->state['curl'], $key, $value)) {
                throw new \Exception('Could not set cURL option');
            }
        }
    }

    private function perform($url) {
        $this->state['referer'] = $this->state['url'];
        $this->state['url'] = $url;
        $this->config([
            CURLOPT_URL     => $this->options['site'] . $this->state['url'],
            CURLOPT_REFERER => $this->options['site'] . $this->state['referer'],
        ]);
        $response = curl_exec($this->state['curl']);
        // Should we ever want to randomize waitTime, do so here.
        usleep($this->options['waitTime']);

        return $response;
    }

    /**
     * Returns a configuration option.
     * @param string $key       configuration key name
     * @param string $value     value to set
     * @return mixed
     */
    protected function option($key, $value = '__DEFAULT__') {
        $curr   = $this->options[$key];
        if ('__DEFAULT__' !== $value) {
            $this->options[$key]    = $value;
        }
        return $curr;
    }

    /**
     * Performs a POST.
     *
     * @param $url
     * @param $fields
     * @return mixed
     */
    public function post($url, array $fields) {
        $this->config([
            CURLOPT_POST       => true,
            CURLOPT_POSTFIELDS => http_build_query($fields),
        ]);
        return $this->perform($url);
    }

    /**
     * Performs a GET.
     *
     * @param       $url
     * @param array $fields
     * @return mixed
     */
    public function get($url, array $fields = []) {
        $this->config([ CURLOPT_POST => false ]);
        if (empty($fields)) {
            $query = '';
        } else {
            $query = '?' . http_build_query($fields);
        }
        return $this->perform($url . $query);
    }
} 
```

现在抓取 FooSite：

```
/* WWW_FOO_COM requires username and password to construct */

class WWW_FOO_COM_Browser extends Browser
{
    private $loggedIn   = false;

    public function __construct($username, $password) {
        parent::__construct('http://www.foo.bar.baz', [
            'username'  => $username,
            'password'  => $password,
            'waitTime'  => 250000,
            'userAgent' => 'FooScraper',
            'cache'     => true
        ]);
        // Open the session
        $this->get('/');
        // Navigate to the login page
        $this->get('/login.do');
    }

    /**
     * Perform login.
     */
    public function login() {
        $response = $this->post(
            '/ajax/loginPerform',
            [
                'j_un'    => $this->option('username'),
                'j_pw'    => $this->option('password'),
            ]
        );
        // TODO: verify that response is OK.
        // if (!strstr($response, "Welcome " . $this->option('username'))
        //     throw new \Exception("Bad username or password")
        $this->loggedIn = true;
        return true;
    }

    public function scrape($entry) {
        // We could implement caching to avoid scraping the same entry
        // too often. Save $data into path("entry-" . md5($entry))
        // and verify the filemtime of said file, is it newer than time()
        // minus, say, 86400 seconds? If yes, return file_get_content and
        // leave remote site alone.
        $data = $this->get(
            '/foobars/baz.do',
            [
                'ticker' => $entry
            ]
        );
        return $data;
    } 
```

现在实际的抓取代码将是：

```
 $scraper = new WWW_FOO_COM_Browser('lserni', 'mypassword');
    if (!$scraper->login()) {
        throw new \Exception("bad user or pass");
    }
    // www.foo.com is a ticker site, we need little info for each
    // Other examples might be much more complex.
    $entries = [
        'APPL', 'MSFT', 'XKCD'
    ];
    foreach ($entries as $entry) {
        $html = $scraper->scrape($entry);
        // Parse HTML
    } 
```

强制注意事项：[使用合适的解析器从原始 HTML 中获取数据](https://stackoverflow.com/a/1732454/1428679)。

# ios - 通过点击键盘上的搜索来触发 segue

> ID：13210141
> 
> 赞同：1
> 
> 时间：2012-11-03T14:38:46.093
> 
> 标签：ios, keyboard, uistoryboard, segue

我有一个应用程序，我希望用户在其中点击文本字段，输入他们的搜索查询，然后点击键盘的 Return（或此处，搜索）按钮。这样做应该会触发一个 segue，并将`prepareForSegue`方法中的一些数据发送到下一个控制器。

此方法当前由 UIButton 触发，并且工作正常，但我希望在键盘上点击 Search 时发生完全相同的事情，因此我可以删除按钮并简化流程。

我试过调用（委托`[self prepareForSegue]`的`textFieldShouldReturn`）方法，但没有奏效。

```
- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender
{
    if ([[segue identifier] isEqualToString: @"DisplaySearchResults"]) {
        SearchResultsViewController *searchResultsViewController = [segue destinationViewController];
        searchResultsViewController.searchQuery = _searchQuery;
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-03T14:47:52.350

你应该打电话

```
[self performSegueWithIdentifier:@"DisplaySearchResults" sender:self]; 
```

在 textFieldShouldReturn 中。

prepareForSegue 将在 performSegueWithIdentifier 之后自动调用。

# c# - 如何确定 C# 应用程序中的空闲时间？

> ID：13210142
> 
> 赞同：3
> 
> 时间：2012-11-03T14:39:20.137
> 
> 标签：c#, .net

我想从我的应用程序中获取 Windows 空闲时间。我正在使用这个代码：

[http://dataerror.blogspot.de/2005/02/detect-windows-idle-time.html](http://dataerror.blogspot.de/2005/02/detect-windows-idle-time.html)

我在 Windows 7 上对此进行了测试，它工作正常，但在 Windows 8 上我只得到零。

任何想法如何解决这一问题？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-03T15:17:55.967

我对您的方法采取了稍微不同的方法......这决定了您的应用程序的空闲时间，而不是使用系统范围的空闲时间。我不确定这是否满足您的需求，但它可能会帮助您走得更远。它还具有纯 .NET 而不是使用`DllImport`.

```
public partial class MyForm : Form, IMessageFilter {

    private Timer _timer;

    // we only need one of these methods...
    private DateTime _wentIdle;
    private int _idleTicks;

    public MyForm() {

        // watch for idle events and any message that might break idle
        Application.Idle += new EventHandler(Application_OnIdle);
        Application.AddMessageFilter(this);

        // use a simple timer to watch for the idle state
        _timer = new Timer();
        _timer.Tick += new EventHandler(Timer_Exipred);
        _timer.Interval = 1000;
        _timer.Start();

        InitializeComponent();
    }

    private void Timer_Exipred(object sender, EventArgs e) {
        TimeSpan diff = DateTime.Now - _wentIdle;

        // see if we have been idle longer than our configured value
        if (diff.TotalSeconds >= Settings.Default.IdleTimeout_Sec) {
            _statusLbl.Text = "We Are IDLE! - " + _wentIdle;
        }

        /**  OR  **/

        // see if we have gone idle based on our configured value
        if (++_idleTicks >= Settings.Default.IdleTimeout_Sec) {
            _statusLbl.Text = "We Are IDLE! - " + _idleTicks;
        }
    }

    private void Application_OnIdle(object sender, EventArgs e) {
        // keep track of the last time we went idle
        _wentIdle = DateTime.Now;
    }

    public bool PreFilterMessage(ref Message m) {
        // reset our last idle time if the message was user input
        if (isUserInput(m)) {
            _wentIdle = DateTime.MaxValue;
            _idleTicks = 0;

            _statusLbl.Text = "We Are NOT idle!";
        }

        return false;
    }

    private bool isUserInput(Message m) {
        // look for any message that was the result of user input
        if (m.Msg == 0x200) { return true; } // WM_MOUSEMOVE
        if (m.Msg == 0x020A) { return true; } // WM_MOUSEWHEEL
        if (m.Msg == 0x100) { return true; } // WM_KEYDOWN
        if (m.Msg == 0x101) { return true; } // WM_KEYUP

        // ... etc

        return false;
    }
} 
```

我在这里确实有两种确定空闲的方法……一种使用`DateTime`对象，一种使用简单的计数器。您可能会发现其中一种更适合您的需求。

有关您可能要考虑作为用户输入的消息列表，请访问[此处](http://msdn.microsoft.com/en-us/library/windows/desktop/ms644927%28v=vs.85%29.aspx#system_defined)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-01-06T21:23:52.130

```
 protected override void OnLoad(EventArgs e)
    {
    /* Check if we are in idle mode - No mouse movement for 2 minutes */
    System.Windows.Forms.Timer CheckIdleTimer = new                    System.Windows.Forms.Timer();
    CheckIdleTimer.Interval = 120000;
    CheckIdleTimer.Tick += new EventHandler(CheckIdleTimer_Tick);
    CheckIdleTimer.Start();
    }
    private void CheckIdleTimer_Tick(object sender, EventArgs e)
    {
    uint x = IdleTimeFinder.GetIdleTime();
    if (x > 120000) {
         //...do something
    }
    }

    public class IdleTimeFinder
    {
    [DllImport("User32.dll")]
    private static extern bool GetLastInputInfo(ref LASTINPUTINFO plii);

    [DllImport("Kernel32.dll")]
    private static extern uint GetLastError();

    public static uint GetIdleTime()
    {
    LASTINPUTINFO lastInPut = new LASTINPUTINFO();
    lastInPut.cbSize     (uint)System.Runtime.InteropServices.Marshal.SizeOf(lastInPut);
    GetLastInputInfo(ref lastInPut);
    return ((uint)Environment.TickCount - lastInPut.dwTime);
    }

   public static long GetLastInputTime()
   {
    LASTINPUTINFO lastInPut = new LASTINPUTINFO();
    lastInPut.cbSize                (uint)System.Runtime.InteropServices.Marshal.SizeOf(lastInPut);
    if (!GetLastInputInfo(ref lastInPut))
    {
    throw new Exception(GetLastError().ToString());
    }
    return lastInPut.dwTime;
    }
    }

 internal struct LASTINPUTINFO
{
    public uint cbSize;

    public uint dwTime;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-06-25T05:47:17.583

以下是如何检测Windows 中的*空闲时间的示例代码。*这里的空闲时间定义是指**没有用户与Windows交互**的时间，例如没有键盘和鼠标输入。

检测空闲时间用于 MSN Messenger 等应用程序中，以便在用户在预定义的时间内未与 Windows 交互后将状态更改为“离开”。

```
using System;
using System.Drawing;
using System.Collections;
using System.ComponentModel;
using System.Windows.Forms;
using System.Runtime.InteropServices;

namespace GetLastInput_Demo
{
    /// <summary>
    /// Summary description for Form1.
    /// </summary>
    public class Form1 : System.Windows.Forms.Form
    {
        [DllImport("user32.dll")]
        static extern bool GetLastInputInfo(out LASTINPUTINFO plii);

        [StructLayout( LayoutKind.Sequential )]
        struct LASTINPUTINFO
        {
            public static readonly int SizeOf =
                   Marshal.SizeOf(typeof(LASTINPUTINFO));

            [MarshalAs(UnmanagedType.U4)]
            public int cbSize;   
            [MarshalAs(UnmanagedType.U4)]
            public int dwTime;
        }

        private System.Windows.Forms.Button button1;
        private System.Windows.Forms.Label label1;
        private System.Windows.Forms.Timer timer1;
        private System.ComponentModel.IContainer components;

        public Form1()
        {
            //
            // Required for Windows Form Designer support
            //
            InitializeComponent();

        }

        /// <summary>
        /// Clean up any resources being used.
        /// </summary>
        protected override void Dispose( bool disposing )
        {
            if( disposing )
            {
                if (components != null)
                {
                    components.Dispose();
                }
            }
            base.Dispose( disposing );
        }
        #region Windows Form Designer generated code
        private void InitializeComponent()
        {
            // Code is omitted here.
        }
        #endregion

        /// <summary>
        /// The main entry point for the application.
        /// </summary>
        [STAThread]
        static void Main()
        {
            Application.Run(new Form1());
        }

        private void button1_Click(object sender, System.EventArgs e)
        {
            timer1.Enabled = !timer1.Enabled;
        }

        private void timer1_Tick(object sender, System.EventArgs e)
        {
            int idleTime = 0;
            LASTINPUTINFO lastInputInfo = new LASTINPUTINFO();
            lastInputInfo.cbSize = Marshal.SizeOf( lastInputInfo );
            lastInputInfo.dwTime = 0;

            int envTicks = Environment.TickCount;

            if( GetLastInputInfo( out lastInputInfo ) )
            {
                int lastInputTick = lastInputInfo.dwTime;
                idleTime = envTicks - lastInputTick;
            }

            int a;

            if(idleTime > 0)
               a = idleTime / 1000;
            else
               a = idleTime;

            label1.Text = a.ToString();
        }
    }
} 
```

# ruby-on-rails - 显示另一个表中的作者姓名

> ID：13210143
> 
> 赞同：1
> 
> 时间：2012-11-03T14:39:47.543
> 
> 标签：ruby-on-rails, relationship

我想在我的发布脚手架上显示作者的名字。我有一个帖子和用户表。

posts 表有一个 author_id 行，它链接到 users 表中的 ID。

我的帖子模型：

```
belongs_to :user 
```

和用户模型：

```
 has_many :posts, dependent: :destroy 
```

如何在帖子中显示用户表中的作者姓名？

```
**Users format**
ID          integer
name    string

**Posts format**
ID          integer
title   string
content text
author_id   integer 
```

这适用于显示视图：

```
 def show
@post = Post.find(params[:id])
@author = User.where(:id => @post.author_id).first 
```

结尾

这对于索引视图：

```
 def index
@posts = Post.all
@posts.each do |post|
  @author = User.where(:id => @post.author_id).first 
end 
```

结尾

但是索引视图不起作用！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-03T14:43:04.223

```
Post.where(....).each do |post|
  post.author
end 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2014-06-06T09:07:12.527

对于索引视图：

```
@articles.each do |article|
   @author = Author.where(:id => article.author_id).first
end 
```

# java - 如何重命名传感器的安卓设备名称？

> ID：13210144
> 
> 赞同：1
> 
> 时间：2012-11-03T14:39:56.903
> 
> 标签：java, android, sensors

我想以编程方式更改[传感器](http://developer.android.com/reference/android/hardware/Sensor.html)名称，更具体地说，我想重命名它。

是否可以更改它的名称，如果可以，我该怎么做？

因为我可以通过在“system”文件夹中的文件“build.prop”中重命名“ro.product.name”来更改值“Android.os.Build.Product”。那么有没有类似的方法来重命名传感器？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T14:50:41.817

我个人看不出更改传感器名称有何用处，但无论如何，这是不可能的。android的[Sensors](http://developer.android.com/guide/topics/sensors/sensors_overview.html)框架只能用于以下任务：

*   确定设备上可用的传感器。
*   确定单个传感器的能力，例如其最大范围、制造商、电源要求和分辨率。
*   获取原始传感器数据并定义获取传感器数据的最小速率。
*   注册和注销监控传感器变化的传感器事件监听器。

您还可以参考[Sensor](http://developer.android.com/reference/android/hardware/Sensor.html) api 文档并查看使用该名称的唯一方法是只读的：`getName()`因此，您根本无法更改 Sensor 名称。

# python - Python 2.7：reload(sys) 禁用错误消息并在 Windows 中打印

> ID：13210146
> 
> 赞同：7
> 
> 时间：2012-11-03T14:40:05.920
> 
> 标签：python, printing, utf-8, sys

我正在制作一个脚本，要求我将编码格式更改为“UTF-8”。我在 Stachoverflow 上找到了一个主题说我可以使用：

```
import sys
reload(sys)
sys.setdefaultencoding('utf-8') 
```

它在 OSX 10.8（也可能是早期版本）中运行良好，但在 Windows XP 和 Windows 7（也可能是 Vista 和 8）中，它会禁用解释器中的所有反馈。该脚本仍在运行，但我无法打印任何内容或查看是否有任何问题。

有没有办法修补当前代码，或者是否有另一种方法来更改编码？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-05-24T16:30:40.663

可能发生在你身上的事情与空闲有关，因为空闲用它自己的对象替换默认的 sys.stdin、sys.stdout、sys.stderr。reload(sys)后，与sys关联的三个文件对象会恢复为默认的，所以空闲时看不到。

您可以通过在 reload(sys) 后将它们改回来来解决它：

```
import sys
stdin, stdout, stderr = sys.stdin, sys.stdout, sys.stderr
reload(sys)
sys.stdin, sys.stdout, sys.stderr = stdin, stdout, stderr 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-14T05:56:15.983

坦率地说，我不知道为什么您可能想要更改 Python 的默认编码只是为了读取和解析单个文件（或者甚至是大量文件）。Python 可以很容易地解析和处理 UTF-8，而无需采取如此严厉的措施。此外，在这个网站上，有一些很棒的方法可以做到这一点。此问题接近重复：[Unicode (UTF-8) reading and writing to files in Python](https://stackoverflow.com/questions/491921/unicode-utf8-reading-and-writing-to-files-in-python)

在那条线上，最好的答案是：[https](https://stackoverflow.com/a/844443/678533) ://stackoverflow.com/a/844443/678533 ，它基本上依赖于 Python [Codecs](http://docs.python.org/2/library/codecs.html#codecs.open)模块。

使用这种方法，您可以执行以下操作：

```
import codecs
with codecs.open("SomeFile", "rb", "utf-8") as inFile: 
    text = inFile.read()
# Do something with 'text' here
with codecs.open("DifferentFile", "wb", "utf-8") as outFile:
    outFile.write(text) 
```

这成功地读取了一个 UTF-8 格式的文件，然后将其写回为 UTF-8。变量 'text' 将是 Python 中的 unicode 字符串。您始终可以将其写回为 UTF-8 或 UTF-16 或任何兼容的输出格式。

# javascript - 为什么下载 URL 在浏览器地址栏中粘贴/输入时有效，但在标签中无效？

> ID：13210148
> 
> 赞同：-3
> 
> 时间：2012-11-03T14:40:22.640
> 
> 标签：javascript, jquery, asp.net, html

我想从另一台服务器下载 Rar 文件。

如果我使用标签，我将无法下载文件并从父服务器重定向。

例如，如果我将此[下载链接](http://s1.mihandownload.com/2012/Feisal/October/Tipard_Total_Media_Converter_v6.1.38_www.MihanDownload.com.rar "下载链接”；")url 粘贴到地址栏中并按输入下载开始，但如果我将其添加到标签并单击它，则下载不会开始。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-03T14:47:23.370

当您单击将您引导至其他网站的链接时，您的浏览器会向该网站发送有关您单击该链接的站点的信息。这称为[referer](http://en.wikipedia.org/wiki/HTTP_referer)，这是您对服务器的请求中的一个字段。

服务器可以检查引用者并将行为更改为他们的响应。这是用于禁用盗链图像的方法之一。您可能已经看到，如果您尝试从另一个网站链接和图像，有时您无法让图像出现在您想要的页面上，并且经常被替换。

当您将其粘贴到地址栏中时它起作用的原因是，当您以这种方式导航到 URL 时，没有发送引用信息，因此服务器可能会做出不同的响应。在您的情况下，这似乎意味着他们会让您访问该文件！

我希望这会有所帮助！

# r - 在 R 中绘制分组条形图

> ID：13210152
> 
> 赞同：9
> 
> 时间：2012-11-03T14:40:59.113
> 
> 标签：r, plot, bar-chart

我正在尝试在 R 中绘制这些数据-

```
column1  column2  column3
1-2       abc       10
1-2       def       15
1-2       ghi       20
2-3       abc       80
2-3       def       95
2-3       ghi       10
3-4       abc       30
3-4       def       55
3-4       ghi       80 
```

x 轴将是 column1（因此 1-2、2-3 和 3-4 将作为 x 轴出现），并且在 y 轴上，应为每个 column2 元素绘制 column3 中的值。所以这本质上是一个“分组”的条形图。

我无法使用 R 绘制此分组条形图。我使用的代码片段如下：

```
dataset <- fetch(rs,n=-1)
plot_var <- table(dataset$percentage, dataset$age)
barplot(plot_var, names.arg,
        main="Title of Graph",
        xlab="Column1", col=c("darkblue","red"),
        legend = rownames(plot_var), beside=TRUE) 
```

如何让这个分组条形图显示？谢谢！

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-11-03T22:37:46.483

Your problem seem to come down to wrong data formatting. You need to make a matrix with the right row names structure to create plot that you want with base graphics. Here is your solution:

```
#your data...
d <- data.frame(row.names=c("1-2","2-3","3-4"), abc = c(10,80, 30), 
                def = c(15, 95, 55), ghi = c(20, 10, 80))
#but you make a matrix out of it to create bar chart
d <- do.call(rbind, d)
#...and you are sorted
barplot(d, beside = TRUE, ylim=c(0,100), legend.text = rownames(d), 
        args.legend = list(x = "topleft", bty="n")) 
```

![enter image description here](../Images/42ee60d3d5d67a5b28549a11e16aa3d8.png)

However, I sometimes like to use `lattice` for this kind of task. This time you don't even have to make matrix, you just keep your `data.frame` in original format:

```
d <- data.frame(column1=rep(c("1-2","2-3","3-4"), each=3), 
                column2=rep(c("abc", "def", "ghi"), 3), 
                column3=c(10, 15, 20, 80, 95, 10, 30, 55, 80))
require(lattice)
barchart(column3 ~ column1, groups=column2, d, auto.key = list(columns = 3)) 
```

![enter image description here](../Images/8e51928446b65080584f80d75d080d32.png)

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-11-03T20:12:35.560

I like to use `ggplot2` for this kind of task.

```
#Make the data reproducible:
column1 <- c(rep("1-2", 3), rep("2-3", 3), rep("3-4", 3))
column2 <- gl(3, 1, 9, labels=c("abc", "def", "ghi"))
column3 <- c(10, 15, 20, 80, 95, 10, 30, 55, 80)

d <- data.frame(column1=column1, column2=column2, column3=column3)

require(ggplot2)
ggplot(d, aes(x=column1, y=column3, fill=column2)) + geom_bar(position=position_dodge()) 
```

The reason I find this intuitive (after a bit of a learning period) is that you clearly stated what you want on the x and y axes, and we simply tell ggplot that (as well as which variable defines the 'fill' color, and which kind of plot - here, `geom_bar` - to use.

![enter image description here](../Images/409a1c0f55dae4929bb71ed643c7d97e.png)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-01-19T11:46:55.477

我从 Drew Steen 的回答中找到了帮助，但上面的代码对我不起作用，如上所示。我添加了 stat="identity" 并且它有效。

```
require(ggplot2)
ggplot(d, aes(x=column1, y=column3, fill=column2)) + geom_bar(stat="identity", position=position_dodge()) 
```

谢谢德鲁的回答。

# php - 创建 REST API 客户端和服务器

> ID：13210154
> 
> 赞同：4
> 
> 时间：2012-11-03T14:41:13.083
> 
> 标签：php, javascript, api, rest

我有兴趣创建一个提供 API 服务的应用程序。与 Facebook 类似，最终开发人员将能够注册应用程序并接收个性化数据，以便通过第三方应用程序访问所提供的 API。目前，我想提供一个 PHP 和 JavaScript SDK，它允许开发人员通过安全方法（私钥-公钥）访问 API。

我想我或多或少地掌握了如何解决这个问题的整体理解：

*   处理请求的内置 REST 服务器，
*   一个内置的 API 服务器，充当请求和 REST 服务器之间的屏障（验证密钥、权限等）
*   一个内置的 JavaScript 库，相当于 Facebook 的“all.js”，异步到页面中，可以动态执行 API 调用，并对 API 服务器进行验证。

此外，我希望在内部使用 API，即通过网站本身的内部 JavaScript 文件发出 PUT/GET/POST/etc 请求。

我希望使用 CodeIgniter 作为启动应用程序的基础，所以如果对库、技术和方法有任何建议来解决这个问题，那就太好了。

具体来说，任何提及：

*   有关应用程序、范围请求、基于角色的权限、会话、日志等的 SQL 表结构。
*   如何创建与 Facebook 的“all.js”相同的理想 JavaScript 库/模板
*   可以做公私钥授权的库

会非常有帮助。我似乎找不到任何东西。

我知道以下几点：

[https://github.com/philsturgeon/codeigniter-restserver](https://github.com/philsturgeon/codeigniter-restserver)

但是，它可以作为开发 API 的一个很好的模板，但它没有经过数据库身份验证。

任何帮助是极大的赞赏！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-03T14:54:16.607

Drupal8 建立在 Symfony2 之上，以帮助框架的 RESTful 组件。

所以我肯定会看看那个框架。

[Symfony2 的 REST API：正确的方法](http://williamdurand.fr/2012/08/02/rest-apis-with-symfony2-the-right-way/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-28T04:37:11.127

最好的方法是使用您的框架创建常规的 WEB 应用程序 - 它就像具有最大灵活性的管理面板，无需实现任何额外的 REST 调用。然后将 REST API 作为模块（或插件）创建到您的应用程序，只需调用必要的 API。如果您打算将 REST API 用于客户端和内部用途，那么有一天您会发现自己被困在自己的 API 中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-12-14T16:02:15.677

通常不需要两个级别的 API，出于架构和安全原因，您可以将代码分离为外观和核心逻辑。至于客户端，我建议基于一些自动生成的 API 描述符自动生成客户端，这将使您能够通过单击更新客户端库。在 Kaltura 中，我们为使用服务器代码反射生成的所有 API 服务器生成 XML 描述符，请参见示例：[http](http://www.kaltura.com/api_v3/api_schema.php) ://www.kaltura.com/api_v3/api_schema.php 从该描述符中，我们自动生成许多不同的客户端库编码语言，请参见生成器：[https](https://github.com/kaltura/clients-generator) ://github.com/kaltura/clients-generator ，您可以按原样使用它。

有关更多 REST API 服务器指南，请参阅我的博客：[http ://restafar.com/create-new-rest-server/](http://restafar.com/create-new-rest-server/)

# html - 奇怪的 css 问题 - 是什么导致它在列表中具有顶部填充

> ID：13210159
> 
> 赞同：-1
> 
> 时间：2012-11-03T14:41:31.223
> 
> 标签：html, css

这是我的代码：http: [//jsfiddle.net/fuWjR/](http://jsfiddle.net/fuWjR/)

CSS是这样的：

```
#pagination li { font-size:11px; }
#pagination li, #pagination-clean a { border:solid 1px #DEDEDE; margin-right:2px; }
#pagination .previous-off,
#pagination .next-off { color:#888888; display:block; float:left; font-weight:bold; padding:0px; }
#pagination .next a,
#pagination .previous a { font-weight:bold; border:solid 1px #FFFFFF; } 
#pagination .active { color:#00000 font-weight:bold; display:block; float:left; padding:0px; }
#pagination a:link,
#pagination a:visited { color:#0033CC; display:block; float:left; padding:0px; }​ 
```

从示例中可以看出，每个数字的分页都会递减。我希望它们都出现在同一行。我在示例中看不到任何顶部填充，那么为什么要这样做呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T14:42:50.620

添加：

```
display: block;
float: left; 
```

到样式表中的 li 项目，并确保您有：

```
overflow: hidden; // or auto 
```

对于父 ul

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-03T14:45:21.273

您应该将此添加到您的“#pagination li”中，这是最好的选择。

```
display: inline;
float: left; 
```

# php - 使用 html5 和 php 将多个文件上传到文件夹“uploads”

> ID：13210170
> 
> 赞同：1
> 
> 时间：2012-11-03T14:43:07.973
> 
> 标签：php, image, html, upload

我有一个上传图片的上传脚本。

我的目录如下所示： ![目录](../Images/af84a9e2e6c2db36beb7eaa7b5a1786a.png)

我的 index.php 看起来像这样：

```
<html>

    <head>

        <!-- Link naar de stylesheet -->
        <link rel="stylesheet" type="text/css" href="style/default.css" />

    </head>
    <body>
        <center>

            <div id="title">
                <h1>Het "Vergeet-mij-nietje"</h1>
                <sup>Image Upload Script</sup>
            </div>

            <!-- Content -->
            <div id="content1">

                <?php

                    // Check if a post exist
                    if( !isset( $_POST['p'] ) ) { $_POST['p']= 0; }

                    // Include files
                    if( $_POST['p'] == 1 ){
                        include( "includes/uploadimage.php" );
                    }else{
                        include( "includes/uploadform.php" );
                    }

                ?>
            </div>
    </body>
</html> 
```

在我的包含文件夹中，我有以下文件：uploadform.php uploadimage.php

我的 uploadform.php 看起来像这样：

```
<form method="post" enctype="multipart/form-data">

    Kies hier meerdere bestanden om te uploaden
    <br /> <br />
    <input type="hidden" name="p" value="1" />

    <input type="file" name="image" multiple />

    <br /> <br />

    <input type="submit" value="Upload"/>

</form> 
```

注意多功能。

我的 uploadimage.php 看起来像这样：

```
<?php

    // variabelen.
    $name=          $_FILES['image']['name'];
    $temp=          $_FILES['image']['tmp_name'];
    $type=          $_FILES['image']['type'];
    $size=          $_FILES['image']['size'];
    $path=          'uploads/ ' . md5( rand( 0, 1000 ) .rand( 0, 1000 ) .rand( 0, 1000 ) .rand( 0, 1000 ) ) . '.jpg';
    $size2=         getimagesize( $temp );
    $width=         $size2[0];
    $height=        $size2[1];

    // Benodigdheden
    $maxwidth=      1281;
    $maxheight=     1081;
    $allowed=       array( 'image/jpeg', 'image/png', 'image/gif' );

    // Echo data.
    echo '
        '. $name .' <br />
        '. $temp .' <br />
        '. $type .' <br />
        '. $size .' <br />
        '. $path .' <br /><br />
        '. $width .' x
        '. $height .' <br />
    ';

    if( in_array( $type, $allowed   ) ){

        if( $width < $maxwidth && $height < $maxheight ){

            if( $size < 5242880 ){

            /*
                // Vorm van de foto. Dit is nodig bij het Resizen.
                if( $width == $height ){ $case=1;}
                if( $width >  $height ){ $case=2;}
                if( $width <  $height ){ $case=3;}

                switch( $case ){

                    // Vierkant
                    case 1;

                        $newwidth=      100;
                        $newheight=     100;

                    break;

                    // Liggende Rechthoek
                    case 2;

                        $newheight=     100;
                        $ratio=         $newheight / $height;
                        $newwidth=      round( $width * $ratio );

                        echo $newwidth.'x'.$newheight;

                    break;

                    // Staande Rechthoek
                    case 3;

                        $newwidth=      100;
                        $ratio=         $newwidth / $width;
                        $newheight=     round( $height * $ratio );

                }

            */

            }else{
                echo '<p><b>De foto die u zojuist heeft geupload is te groot. Upload een foto, kleiner dan 5mb.</b></p>';
            }

        }else{
            echo '<p><b>De foto die u zojuist heeft geupload heeft een te grote resolutie. Upload een kleinere foto.</b></p>';
        }

    }else{
        echo '<p><b>De foto die u zojuist heeft geupload is geen .jpg, .png of .gif. Deze extensie is niet toegestaan.</b></p>';
    }

    // Upload files.
    move_uploaded_file( $temp, $path );

    // Terug stuur link
    echo '<a href="index.php">Ga Terug</a>';

?> 
```

请注意，我没有使用宽度和高度函数

* * *

我的问题：

我的问题是uploadimage.php 不能上传多张图片。它当时只能上传1张图片。

如何更改 uploadimage.php 中的代码，以便一次上传多个文件。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T15:07:11.293

我想您在发送帖子时应该有一个数组

尝试替换：

```
<input type="file" name="image" multiple /> 
```

和：

```
<input type="file" name="image[]" multiple /> 
```

在*uploadimage.php 中*使用新的数组： $_FILES['image'][i]['name'] 其中'i' 是您想要拥有的图像的编号。

使用循环来获取所有这些。

看看：PHP 文档 [http://php.net/manual/en/features.file-upload.multiple.php](http://php.net/manual/en/features.file-upload.multiple.php)

# iphone - 拨号旋转 - 伪代码

> ID：13210172
> 
> 赞同：0
> 
> 时间：2012-11-03T14:43:17.943
> 
> 标签：iphone, objective-c, ios

我有一个表盘，当用户触摸它时，我希望它旋转并跟随用户的手指旋转。

我现在只是将其放入粗略的代码中，并想知道在我继续实施之前这是否是正确的方法？

```
//on touch
angleOffset = atan2(touchY - centerPointOfDial, touchX - centerPointOfDial);

//on touch move
angle = atan2(touchY - centerPointOfDial, touchX - centerPointOfDial);
dialRotation = (angle - angleOffset)
myDial.rotation = dialRotation; 
```

谢谢

# android - 如何测试 string.xml 的完整性

> ID：13210182
> 
> 赞同：5
> 
> 时间：2012-11-03T14:44:32.400
> 
> 标签：android, localization, android-resources

是否有工具可以让我检查本地化`string.xml`文件是否完整。例如，`values-de/strings.xml` 或`values-jp/string.xml`包含所有包含的条目`values/strings.xml`。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-03T14:50:27.377

在 ADT 20 中，您有一个 Lint 标记，它会告诉您是否有一些不完整的字符串文件。要查看 Lint 警告，您必须转到 Window -> show View -> Other -> Android -> Lint warnings。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-03T14:59:31.510

使用[Android Lint](http://tools.android.com/tips/lint)工具。

如果您使用 Eclipse，它可以从菜单栏获得（屏幕截图上的右键）。

![在此处输入图像描述](../Images/240815d0246da65075214fffb0b109b9.png)

# php - PHP重定向Firefox问题

> ID：13210183
> 
> 赞同：1
> 
> 时间：2012-11-03T14:44:34.920
> 
> 标签：php, firefox, social, bookmarks

我最近推出了[http://www.listacker.com](http://www.listacker.com) - 社交书签！我收到报告说，当用户使用 Firefox 提交链接时，它主要重定向到随机页面 - 主要是我的错误页面和 robots.txt。我也在 Firefox 中对此进行了测试，并且自己确实看到了这个问题，但现在无法复制它。我想知道它是否是显而易见的，或者是否有某种类型的 Firefox 用户也会为我测试它。

一旦处理完成，唯一的重定向代码就在这里：（其中 BASE_URL 是 listacker.com）

```
$_SESSION['success'] = $result;
header("Location: ".rtrim(BASE_URL, '/').$session->referrer);
exit(); 
```

在 session_start 我们存储以下内容：（将用户返回到他们的当前页面）

```
/* Set referrer page */
if(isset($_SESSION['url'])){
    $this->referrer = $_SESSION['url'];
} else {
    $this->referrer = "/";
}
/* Set current url */
$this->url = $_SESSION['url'] = $_SERVER['REQUEST_URI']; 
```

真的没有太多，但这样一个奇怪的问题！欢迎任何想法

# json - 替换成双引号？

> ID：13210184
> 
> 赞同：0
> 
> 时间：2012-11-03T14:44:52.423
> 
> 标签：json, bash, curl, escaping

如何将事物替换为双引号：

```
curl -u "bk322:$passw" https://api.github.com/user/repos -d "{'name':"$title"}" 
```

我做不到

```
"{'name':\"$title\"}" 
```

因为这种方式 JSON 解析器不明白我的意思。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T15:21:05.733

我有一种感觉，这是您的 JSON 解析器不喜欢的单引号。

尝试：

```
curl -u "bk322:$passw" https://api.github.com/user/repos -d "{\"name\":\"$title\"}" 
```

# javascript - 如何在 javascript 或 jQuery 中查找文件大小

> ID：13210191
> 
> 赞同：0
> 
> 时间：2012-11-03T14:46:08.607
> 
> 标签：javascript, asp.net

我有一个文件上传控件，我想在单击完成按钮之前验证文件的大小为 50kb。

我在互联网上做了一些研究并得到了这个代码

```
<script>
   function A() {
      var oas = new ActiveXObject("Scripting.FileSystemObject");
      var d = document.a.b.value;
      var e = oas.getFile(d);
      var f = e.size;
      alert(f + " bytes");
   }
</script> 
```

我正在使用 IE9，但这段代码对我不起作用。我在线上遇到错误

```
var oas = new ActiveXObject("Scripting.FileSystemObject"); 
```

如何解决这个错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-03T14:59:41.627

试试这种方法，我认为它对用户更友好。它还可以防止您遇到许多与浏览器/ActiveX 相关的问题。

[http://codes.codedigest.com/CodeDigest/65-File-Size-Validation-in-FileUpload-control-in-ASP-Net.aspx](http://codes.codedigest.com/CodeDigest/65-File-Size-Validation-in-FileUpload-control-in-ASP-Net.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-03T15:05:38.940

ActiveX 需要在您的浏览器安全设置中启用，您检查了吗？

# html - 当左 div 不足以填充左列时，堆栈右浮动正确

> ID：13210192
> 
> 赞同：2
> 
> 时间：2012-11-03T14:46:14.890
> 
> 标签：html, css, layout, css-float

我一直在玩花车，我似乎无法弄清楚如何做这种布局。

```
A   B
    C
    D 
```

当`div=A`没有填满整个左列时，最后一个右 div ( `div=D`) 移动到下方`div=A`。视觉在这里[http://jsfiddle.net/pedenski/rGhY3/](http://jsfiddle.net/pedenski/rGhY3/)

当 A 的内容不足以填满整个左列时，最后一个右边会`div`疯狂。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T14:54:36.553

你可以这样做......我所做的是制作了两个单独的容器，第一个向左浮动，第二个向右浮动，然后将所有三个容器都放在第二个容器中

[**演示**](http://jsfiddle.net/rGhY3/1/)

或者，如果您希望高度为 100%，您可以这样[**做**](http://jsfiddle.net/rGhY3/2/)

CSS

```
#container {
    width: 400px;
    margin:auto;   
    background:#ccc;
      overflow: hidden;

}
#head {
    width: 100%;
    height:30px;
    background:purple;

}
#content {
    width: 190px;
    background:pink;
    float:left;
    margin: 0 0 0 5px;
}

#content2 {
float: right;
}
#side1 {
    width:190px;
    background:red;
    margin:0 5px 10px 0;

}#side2 {
    width:190px;
    background:red;
    margin:0 5px 10px 0;

}
#side3 {
    width:190px;
    background:red;
    margin:0 5px 10px 0;
} 
```

HTML

```
<div id="container">
   <div id="head">
    header
    </div>

        <div id="content">
            the quick brown fox
            the quick brown fox
            the quick brown fox
            the quick brown fox
            the quick brown fox
        </div>

       <div id="content2">
            <div id="side1">
            sidesidesideside
            sidesidesideside
            sidesidesideside
        </div>

    <div id="side2">
            sidesidesideside
            sidesidesideside
            sidesidesideside
        </div>

    <div id="side3">
            sidesidesideside
            sidesidesideside
            sidesidesideside
       </div>
    </div>
</div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-03T14:50:15.683

如果 div B、C 和 D 的高度已知，则将 div A 的高度设置为总和。如果它们的高度未知，您仍然可以使用 javascript 动态设置它（没有 javascript，它看起来很难看，但仍然可以使用）。

# javascript - 仅匹配 unicode 字母

> ID：13210194
> 
> 赞同：17
> 
> 时间：2012-11-03T14:46:25.023
> 
> 标签：javascript, regex

我有以下只允许字母的正则表达式：

```
 /[a-zA-Z]+/

     a = "abcDF"
     if (a.match(/[a-zA-Z]+/) == a){
        //Match
     }else{
        //No Match
     } 
```

我如何使用 p{L} 来做到这一点（通用 - 任何语言，如德语、英语等。）

我尝试了什么：

```
 a.match(/[p{l}]+/)
  a.match(/[\p{l}]+/)
  a.match(/p{l}/)
  a.match(/\p{l}/) 
```

但所有字母 a = "aB" 都返回 null

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-11-03T14:57:42.283

从 ECMAScript 2018 开始，JavaScript 终于原生支持[Unicode 属性转义](https://github.com/tc39/proposal-regexp-unicode-property-escapes)。

对于旧版本，您要么需要自己定义所有相关的 Unicode 范围。或者您可以将 Steven Levithan 的[`XRegExp`包与 Unicode 插件一起](http://xregexp.com/plugins/)使用，并利用其 Unicode 属性快捷方式：

```
var regex = new XRegExp("^\\p{L}*$")
var a = "abcäöüéèê"
if (regex.test(a)) {
    // Match
} else {
    // No Match
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2015-05-08T18:30:22.220

如果你愿意使用[Babel](http://babeljs.io)来构建你的 javascript，那么我发布了一个 babel-plugin，它可以将正则表达式`/^\p{L}+$/`转换`/\p{^White_Space}/`为浏览器可以理解的正则表达式。

这是项目页面：[https ://github.com/danielberndt/babel-plugin-utf-8-regex](https://github.com/danielberndt/babel-plugin-utf-8-regex)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2020-08-18T13:31:01.280

# php - 数据表示/存储，xml/json 或任何其他方式

> ID：13210196
> 
> 赞同：0
> 
> 时间：2012-11-03T14:46:45.283
> 
> 标签：php, json, xml

我必须存储一些实体（亚马逊节点），它们具有`id`和`name`属性一个节点可能有也可能没有子节点。子节点也包含 id 和 name。

嵌套没有限制。一个子节点可以有子节点，并且该子节点可以有它自己的子节点。

我选择将它保存在 json 中（我很乐意使用 json ）

例如，一个`History`节点有子节点`architecture`和`landmarks`。

这是我将其存储在 json 中的方式。

```
[
    {
            "id"   : "14278871",
            "name" : "History"
            "sub" : [
                {
                    "id"   : "173508",
                    "name" : "Architecture"

                },
                {
                    "id"   : "1000",
                    "name" : "Landmarks"
                }
            ]

        }
] 
```

但这似乎是太多的数据。有人可以为我提供更好的方法吗？

在xml中，我想出了这个，

```
<history id="14278871">
    <architecture id="173508"></architecture>
    <landmarks id="1000"></landmarks>
</history> 
```

我正在寻找更好的方法来存储这些数据。

最终，我需要在 php.ini 中使用这些数据。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T15:49:41.740

您的两种格式之间的区别实际上并不是数据结构，而是您已将`name`字段从数据切换为键。与您的 XML 类似的 JSON 将是：

```
{ "history" :
   { "id": "14289981",
     "sub": {
        "architecture" : { "id" : "173508" },
        "landmarks" : { "id" : "1000" }
     }
   }
} 
```

# image - Delphi 中的假的、动画的类似 web 2.0 的工具提示

> ID：13210197
> 
> 赞同：3
> 
> 时间：2012-11-03T14:46:46.237
> 
> 标签：image, delphi, graphics, delphi-2010

## 初步解释

我需要强调我的 delphi 应用程序中的某些关键区域。我决定标准工具提示不会削减它，而且对话框太烦人了，没有帮助。

Web 2.0 工具提示（比如[这个 Coda 风格的气泡示例](http://jqueryfordesigners.com/demo/coda-bubble.html)）不那么具有侵入性，并且更适合我的特定需求。

## 我尝试解决问题

最初，我自定义设计了一个工具提示图像，将它与标签一起放入 DevExpress 的 TdxImage 组件（基本上是一个支持透明 PNG 的 TImage），并将它们用作自定义工具提示，但是......

**我的问题是**如何像普通/网络工具提示一样制作动画？我试过 AnimateWindow()。它有效，但**根本没有出现**文本（没有绘制文本，只显示图像）

```
// Prepare tooltip text
cxTooltipLabel.Caption := 'Translated or dynamic tooltip text';
cxTooltipLabel.Visible := True;
cxTooltipLabel.BringToFront;

// Load custom tooltip image
cxImage.Picture.LoadFromFile(ExePath + 'data\tooltip.png');

// Show tooltip!
AnimateWindowProc(cxImage.Handle, 250, AW_CENTER OR AW_ACTIVATE); 
```

需要注意的是，**[图像](http://uhleeka.com/demo/bubbletip/)****是****透明**的**PNG**

有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-04T15:42:55.653

这是另一种非常便宜的方法，您可以使用 AnimateWindowProc。代码中没有魔法，也许它满足了你的需求。 [coda_src](http://www.bummisoft.de/download/coda_src.zip)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-03T15:31:13.433

我有一个片段，与您真正搜索的内容相去甚远，但该技术是我推荐的技术。任何称为 EXGDIxxx 的东西都来自[http://www.progdigy.com/?page_id=7](http://www.progdigy.com/?page_id=7)（免费），只是重命名和改编。

```
unit Unit_Outline;

interface

uses
  Windows, Messages, SysUtils, Variants, Classes, Graphics, Controls, Forms,
   ExtCtrls,EXGDIPAPI,EXGDIPOBJ, StdCtrls;

type
  TForm2 = class(TForm)
    Timer1: TTimer;
    procedure FormPaint(Sender: TObject);
    procedure FormShow(Sender: TObject);
    procedure FormMouseDown(Sender: TObject; Button: TMouseButton; Shift: TShiftState; X, Y: Integer);
    procedure FormMouseMove(Sender: TObject; Shift: TShiftState; X, Y: Integer);
    procedure FormDblClick(Sender: TObject);
    procedure Timer1Timer(Sender: TObject);
  private
    { Private-Deklarationen }
   FDown:Boolean;
   FStartx,FstartY ,FendX,FEndY:Integer;
  public
    { Public-Deklarationen }

  end;

var
  Form2: TForm2;

implementation

{$R *.dfm}
 Function ColorToTGPColor (c : Tcolor; trans : Byte = 255):TGPColor;
Type
 TBarry=Array[0..3] of Byte;
Var
 Barry:TBarry;
 R:Byte;
begin
  move(C,Barry,4);
  R:=Barry[2];
  Barry[2]:=Barry[0];
  Barry[0]:=R;
  Barry[3]:=trans;
  move(Barry,Result,4);
end;

procedure TForm2.FormDblClick(Sender: TObject);
begin
  Close;
end;

procedure TForm2.FormMouseDown(Sender: TObject; Button: TMouseButton; Shift: TShiftState; X, Y: Integer);
begin
   FStartx := X;
   FstartY := Y;
   FDown := true;
end;

procedure TForm2.FormMouseMove(Sender: TObject; Shift: TShiftState; X, Y: Integer);
begin
  if ssleft in shift then
    begin
     FEndx := X;
     FEndY := Y;
     Paint;
    end;
end;

procedure TForm2.FormPaint(Sender: TObject);
const
   C_Alpha=0;
var
   DestPoint, srcPoint:TPoint;
   winSize:TSize;
   DC         : HDC;
   blendfunc  : BLENDFUNCTION;
   Owner : HWnd;
   curWinStyle:Integer;
   exStyle:Dword;
   BackImage:TBitMap;
   Graphics :  TGPGraphics;
   Brush:TGPSolidBrush;
   FontFamily : TGPFontFamily;
   fmt:TGPStringFormat;
   aFont : TGPFont;
   Pen:TGPPen;
   xx,yy:Integer;
   path : TGPGraphicsPath;
begin

  DC := GetDC(0);
  BackImage:=TBitMap.Create;
  BackImage.PixelFormat := pf32Bit;
  BackImage.Width := Width;
  BackImage.Height := Height;
  BackImage.Canvas.Brush.Color := clBlack;
  BackImage.Canvas.FillRect(Rect(0,0,Width,Height));

  Graphics :=  TGPGraphics.Create(BackImage.Canvas.Handle);
  graphics.SetSmoothingMode(SmoothingModeHighQuality);
  graphics.SetTextRenderingHint(TextRenderingHintAntiAlias);
  Brush:=TGPSolidBrush.Create(ColorToTGPColor(clRed,200));
  FontFamily := TGPFontFamily.Create('Arial narrow');
  aFont := TGPFont.Create(FontFamily,80);
  Pen:=TGPPen.Create(ColorToTGPColor(clRed,200));
  fmt:=TGPStringFormat.Create;
  try
  path := TGPGraphicsPath.Create;
  path.AddString('Test',-1,FontFamily,1,150,MakePoint(100,100),fmt);
  Graphics.DrawPath(pen,path);
  // Graphics.FillPath(brush,path);
  path.Free;
  FontFamily.Free;
  FontFamily := TGPFontFamily.Create('Times New Roman');

  path := TGPGraphicsPath.Create;
  path.AddString(FormatDateTime('hh:nn:ss',now),-1,FontFamily,FontStyleBold or FontStyleItalic,200,MakePoint(200,200),fmt);
  pen.SetWidth(2);
  pen.SetColor(ColorToTGPColor(clNavy,230));
  Graphics.DrawPath(pen,path);
  // Graphics.FillPath(brush,path);
  path.Free;
  pen.Free;

//  Graphics.DrawString(FormatDateTime('hh:nn:ss',now),-1,aFont,MakePoint(0.0,0),Brush);
   winSize.cx := width;
   winSize.cy := Height;
   srcPoint.x := 0;
   srcPoint.y := 0;

   DestPoint := BoundsRect.TopLeft;
   exStyle := GetWindowLongA(handle, GWL_EXSTYLE);
   if (exStyle and WS_EX_LAYERED = 0) then SetWindowLong(handle, GWL_EXSTYLE, (exStyle or WS_EX_LAYERED or WS_EX_TRANSPARENT) );

   With blendFunc do
   begin
     AlphaFormat := 1;
     BlendFlags := 0;
     BlendOp := AC_SRC_OVER;
     SourceConstantAlpha := 255 - C_Alpha;
   end;

   UpdateLayeredWindow(Handle, DC, @DestPoint, @winSize, BackImage.Canvas.Handle,  @srcPoint,clBlack, @blendFunc, 2);

   finally
   ReleaseDC(0, DC);
   BackImage.Free;
   Graphics.Free;
   Brush.Free;
   FontFamily.free;
   aFont.Free;
   fmt.Free;
   end;

end;

procedure TForm2.FormShow(Sender: TObject);
begin
   SetWindowPos(Handle, HWND_TOP, 0, 0, 0, 0, SWP_NOMOVE or SWP_NOSIZE );
   DoubleBuffered := true;

end;

procedure TForm2.Timer1Timer(Sender: TObject);
begin
  FormPaint(self);
end;

end. 
```

# entity-framework - 如果表格中没有附加最新文件，如何保存最旧的照片？

> ID：13210202
> 
> 赞同：1
> 
> 时间：2012-11-03T14:47:42.293
> 
> 标签：entity-framework, asp.net-mvc-4

我的控制器中有操作方法。如果照片附在表格中，我的方法可以正常工作。如果照片没有从编辑操作中的表单上传，我的方法是从数据库中删除最旧的照片。如果表格中没有附加最新文件，如何保存最旧的照片？

模型：

```
[DisplayColumn("LastName")]
public class Driver
{
    [Key]
    public int Id { get; set; }

    [Display(Name="Full Name")]
    [DataType(DataType.Text)]
    public string FullName
    {
        get { return string.Concat(FirstName.Substring(0, 1), ".", LastName);}
    }

    [Required]
    [Display(Name = "First Name")]
    [DataType(DataType.Text)]
    public string FirstName { get; set; }

    [Display(Name = "Middle Name")]
    [DataType(DataType.Text)]
    public string MiddleName { get; set; }

    [Required]
    [Display(Name = "Last Name")]
    [DataType(DataType.Text)]
    public string LastName { get; set; }

    public byte[] DriverPhoto { get; set; }

} 
```

控制器：

```
 [HttpPost]
    public ActionResult Edit(Driver driver, HttpPostedFileBase fileUpload)
    {
        if(fileUpload != null)
        {
            var binaryReader = new BinaryReader(fileUpload.InputStream);
            driver.DriverPhoto = binaryReader.ReadBytes(fileUpload.ContentLength);
        }

        if (ModelState.IsValid)
        {

            db.Entry(driver).State = EntityState.Modified;

            db.SaveChanges();
            return RedirectToAction("Index");
        }

        return View(driver);
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T02:25:44.043

我修改了我的控制器代码：

```
 [HttpPost]
    public ActionResult Edit(Driver driver, HttpPostedFileBase fileUpload)
    {
        if (fileUpload != null)
        {
            if (fileUpload.ContentType.ToLower() == "image/jpeg")
            {
                var binaryReader = new BinaryReader(fileUpload.InputStream);
                driver.DriverPhoto = binaryReader.ReadBytes(fileUpload.ContentLength);
            }
            else
            {
                ModelState.AddModelError("DriverPhoto","Illustrations should be uploaded in JPEG format.");
            }
    }

        if (ModelState.IsValid)
        {
            var entry = _db.Entry(driver);

            entry.State = EntityState.Modified;

            if (fileUpload == null)
            {
                entry.Property(t => t.DriverPhoto).IsModified = false;
            }

            _db.SaveChanges();
            return RedirectToAction("Index");
        }

        return View(driver);
    } 
```

现在我的控制器按我想要的方式工作，但我不确定解决方案的正确性。

谢谢你帮助我。

# jquery - jQuery .get 并刷新成功

> ID：13210205
> 
> 赞同：0
> 
> 时间：2012-11-03T14:47:44.093
> 
> 标签：jquery, ajax

我有这个代码：

```
 $.get("lupdate.php", {
                data: forPost, 
                success: function() {
                    window.location.reload(true);
                }
            }
            ); 
```

在 Opera 中完美运行，在 IE 中不适合我，在 Chrome 中适用于我，但不适用于我的客户。如果我删除重新加载标签，它可以在任何地方工作。

这真的是一个节省时间的问题，而不仅仅是使用 jQuery 进行实时更新。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-03T14:49:56.307

你应该使用：

```
window.location = './'; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-03T14:51:03.753

你为什么不尝试而不是

```
window.location.reload(true) 
```

使用

```
windows.location.href ="/yourpage" 
```

# php - 通过另一个 php 文件编辑 php 文件

> ID：13210216
> 
> 赞同：0
> 
> 时间：2012-11-03T14:49:28.050
> 
> 标签：php, database

我现在正在一个项目中工作，这是一个非常简单的数据库应用程序。有一些用户应该上传的 php 文件。然后他调用一个特定的文件 - let it be `install.html`，他应该在其中输入他的 root 和密码以访问服务器。然后将创建一个数据库和一些表。现在，还有其他文件，也需要这些信息。我考虑过包括一个`connect.php`. 但问题是：是否可以`connect.php`通过另一个 php 文件在其中编辑 root 和密码？如果没有，您是否知道任何其他用户友好的方式来避免此问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T15:04:09.170

你当然可以这样做。一般的想法是您有一个带有占位符的字符串（例如“{{username}}”和“{{password}}”），您将其替换为正确的值，`str_replace`然后将内容写入文件`file_put_contents`。

带有占位符的字符串可以在脚本中声明为字符串，也可以从带有`file_get_contents`. 所以你可以有：

```
$replacements = array(
    '{{username}}' => 'root',
    '{{password}}' => '123456',
);
$config = file_get_contents('config.php');
$config = str_replace(array_keys($replacements),
                      array_values($replacements),
                      $config);
file_put_contents('config.php', $config); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-03T15:19:41.930

PHP 文件只是一个文本文件。就像您可以使用 PHP 更改文本文件一样，您也可以使用 PHP 更改 PHP 文件。这只是标准文件 io，请参阅[Filesystem ^(*Docs*)](http://php.net/filesystem)。

确保您可以访问该文件并且它是可读的。还要考虑在用户使用您的安装脚本后教育他们如何加强他们的设置。出于安全原因，PHP 文件在托管环境中应该是只读的。

# java - 没有 \n 的 Java 扫描仪分隔符

> ID：13210217
> 
> 赞同：0
> 
> 时间：2012-11-03T14:49:29.640
> 
> 标签：java, java.util.scanner, delimiter

我有一个让我心烦意乱的问题。我有一个 .txt 文件，看起来像

```
fiat,regata,15*renault,seiscientos,25* 
```

在我的代码中，我有这个

```
 Scanner sc=new Scanner(new File("coches.txt");
        sc.useDelimiter("[,*]");
        while(sc.hasNext()){   
            marca=new StringBuffer(sc.next());
            modelo=new StringBuffer(sc.next());
            marca.setLength(10);
            modelo.setLength(10);
            edad=sc.nextInt();

            coche=new Coche(marca.toString(),modelo.toString(),edad);
            coches.add(coche);
        } 
```

这里的问题是 While 循环工作了三次，所以第三次 marca=\n 并且它以 a 停止`java.util.NoSuchElementException`。那么，如何使用我的分隔符在最后一个 * 中停止 de 循环并避免它进入那个额外/有问题的时间？

我已经尝试过类似的东西

```
while(sc.next!="\n") 
```

我也试过这个，但不起作用

sc.useDelimiter("[,\*\n]");

解决了！！！

我终于找到了解决方案，部分归功于 user1542723 的建议。解决方案
是：

```
String linea;
String [] registros,campos;    
File f=new File("coches.txt");
FileReader fr=new FileReader(f);
BufferedReader br=new BufferedReader(fr);//ALL this need Try Catch that I'm not posting

while((linea=br.readLine())!=null){
        registros=linea.split("\\*");
    }
    for (int i = 0; i < registros.length; i++) {
        campos=registros[i].split(",");
        marca=campos[0];
        modelo=campos[1];
        edad=Integer.parseInt(campos[2]);//that's an Int, edad means Age

        coche=new Coche(marca.toString(),modelo.toString(),edad);
        coches.add(coche);
    }
} 
```

感谢所有帮助过我的人。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T14:54:35.060

您可能想在您的正则表达式中转义明星：

`sc.useDelimiter("[,\\*]");`

因为

`"[,*]"`表示`,`零次或多次，`"[,\\*]"`表示 `,`或`*`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-03T15:33:03.717

您可以`String.split("\\*")`首先在 * 处使用拆分，然后每个记录都有 1 个数组条目，然后再次使用`split(",")`来获取您现在拥有的所有值。

**例子：**

```
String input = "fiat,regata,15*renault,seiscientos,25*";
String[] lines = input.split("\\*");
for(String subline : lines) {
    String[] data = subline.split(",");
    // Do something with data here
    System.out.println(Arrays.toString(subline));
} 
```

# coldfusion - 替换不在 html 代码中的函数

> ID：13210222
> 
> 赞同：1
> 
> 时间：2012-11-03T14:50:10.853
> 
> 标签：coldfusion

我试图了解如何替换还包含 html 代码的字符串（在 ColdFusion 中）。

**该函数不得查找（或替换）内部 html 标记。**

谢谢你。

让我更具体一点：不应该在*img**和*标签内搜索

 ** * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-03T15:14:47.880

ColdFusion 只处理字符串，它对“HTML”一无所知，它只看到“字符串数据”。所以你在 ColdFusion 中没有什么可以帮助你的。

我还没有尝试过，但是您也许可以使用[jsoup](http://jsoup.org/)将字符串转换为可用的 DOM 文档，然后您将能够区分标签和文本。*

# ios - 归档 ios 应用程序时出错：- 命令 /Developer/Platforms/iPhoneOS.platform/Developer/usr/bin/llvm-g++-4.2 失败，退出代码为 1

> ID：13210225
> 
> 赞同：2
> 
> 时间：2012-11-03T14:50:23.440
> 
> 标签：ios, mailcore

我正在使用 Mail Core 一个 ios 应用程序。当我编译它时......它给出了以下错误。

> ld：警告：目录 '/Users/deepikajain/Desktop/RCS-oct30/RCS/binaries/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS5.0.sdk/Distribution/lib' 未找到 -L
> 
> ld：警告：目录'/Users/deepikajain/Desktop/RCS-oct30/RCS/../mailcore/libetpan/binaries/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS5.0.sdk/Distribution/lib'未找到以下 -L
> 
> ld：警告：目录'/Users/deepikajain/Desktop/RCS-oct30/RCS/../mailcore/libetpan/binaries/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS5.0.sdk/Distribution/lib'未找到以下 -L
> 
> ld：警告：目录'/Users/deepikajain/Desktop/RCS-oct30/RCS/../mailcore/libetpan/binaries/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS5.0.sdk/Release/lib'未找到以下 -L
> 
> ld：找不到 -letpan_ios 的库
> 
> 命令 /Developer/Platforms/iPhoneOS.platform/Developer/usr/bin/llvm-g++-4.2 失败，退出代码为 1

谁能告诉我...我该如何解决？

感谢迪皮卡

# mysql - MySQL中的空IN子句参数列表

> ID：13210233
> 
> 赞同：99
> 
> 时间：2012-11-03T14:51:04.737
> 
> 标签：mysql, sql, in-clause

当您在`IN`子句为空的情况下执行 SQL 查询时会发生什么？

例如：

```
SELECT user WHERE id IN (); 
```

MySQL 会按预期处理这种情况（即总是错误），如果不是，我的应用程序在`IN`动态构建子句时如何处理这种情况？

* * *

## 回答 #1

> 赞同：66
> 
> 时间：2012-11-03T15:30:46.430

如果我有一个`IN`动态构建列表的应用程序，并且它可能最终为空，那么我有时会使用不可能的值初始化列表并添加到该列表中。例如，如果它是一个用户名列表，我将从一个空字符串开始，因为这不是一个可能的用户名。如果它是 auto_increment ID，我将使用 -1，因为实际值始终为正。

如果由于没有不可能的值而这不可行，则必须使用条件来决定是否在子句中包含`AND column IN ($values)`表达式。`WHERE`

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2016-05-24T17:11:16.577

这也给了我 0 个结果：

```
SELECT id FROM User
WHERE id IN (NULL); 
```

在 MYSQL 5.6 上试过

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2012-11-03T14:58:46.787

使用有效语法的最接近此查询的近似值是：

```
SELECT user FROM tbl1 WHERE id IN (SELECT id FROM tbl1 WHERE FALSE); 
```

它无条件地返回一个空的结果集。括号中的子查询总是返回一个空集，并且在一个空集中找不到任何值，因为一个空集不包含任何值。

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2017-09-24T14:36:02.223

使用总是错误的陈述

在创建 SQL 之前，请检查数组大小。如果大小为 0，则生成 where 语句为`1 = 2`，如：

```
SELECT * FROM USERS WHERE name in () 
```

变成

```
SELECT * FROM USERS WHERE 1 = 2 
```

对于空数组上的“不在”，生成一个始终为真的语句，如下所示：

```
SELECT * FROM USERS WHERE name not in () 
```

变成

```
SELECT * FROM USERS WHERE 1 = 1 
```

这应该适用于更复杂的查询：

```
SELECT * FROM USERS WHERE (name in () OR name = 'Alice') 
```

变成

```
SELECT * FROM USERS WHERE (1 = 2 OR name = 'Alice') 
```

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2020-05-21T15:08:02.290

您不能将 IN 运算符留空，`NULL`例如，您必须在其中输入一些内容。但即使在这种情况下，它也不会按预期工作，因为与`NULL`总是返回`NULL`（空）比较。一种可能的解决方案是添加子选择。

例子：

```
SELECT user_id FROM users;

+-----------+
| user_id   |
+-----------+
|      1000 |
|      1001 |
|      1002 |
|      1003 |
|      1004 |
|      1005 |
|      1006 |
|      1007 |
|      1008 |
|      1009 |
|      1010 |
+-----------+

SELECT user_id FROM users WHERE user_id NOT IN ();
ERROR: 1064: You have an error in your SQL syntax; check the manual that 
corresponds to your MySQL server version for the right syntax to use near ')' at line 1

SELECT user_id FROM users WHERE user_id NOT IN (NULL);
Empty set (0.0003 sec)    

SELECT user_id FROM users WHERE user_id IN (1001, 1002, 1003) 
AND user_id NOT IN (SELECT user_id FROM users WHERE user_id IN (NULL));
+---------+
| user_id |
+---------+
|    1001 |
|    1002 |
|    1003 |
+---------+
3 rows in set (0.0004 sec) 
```

您可以稍微修改（缩短）查询，但我认为，它们也会慢一点。

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2017-11-05T15:28:40.713

如果您对 id (1,2,3, ..) 使用 AUTO_INCREMENT 并且如果数组为空，则可以添加一项 [0]。所以会是

```
if (empty($arr)) {
   $arr[] = 0;
}

SELECT user WHERE id IN (0); 
```

并且不会出现mysql解析错误。这种情况在子查询中非常有用 - 当您的主查询不依赖于子查询结果时。

* * *

更好的方法 - 如果数组为空，则不要调用查询。

```
$data = null;
if (!empty($arr)) {
    $data = ... call query
} 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2019-09-24T10:40:58.867

这是针对空列表的 always false 语句的另一种变体，它保留了查询中的逻辑和实际列的概念。

不正确`id in ()`的可以改写为：

```
where id <> id; 
```

同样不正确的否定条件`id not in ()`可以通过自定义查询构建代码转换为：

```
where id = id; 
```

这种方法比[`id not in (NULL)`](https://stackoverflow.com/a/37419910/603516)它不评估为 NULL 更安全。

但请注意，这会从结果中过滤掉 where 的行`id is null`。在某些情况下，这可能被视为一项功能。

特别适用于复杂的堆叠查询构建逻辑，其中嵌套构建器不知道如何在上面使用生成的子查询。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2016-05-10T12:02:48.320

我假设您仍然需要在您`IN`为空时运行查询；例如与`LEFT JOIN ... ON ... AND IN ()`.

由于您已经`IN`在应用程序层中动态构建，我将在那里处理空案例。

这是 PHP 中的一个基本示例

```
$condition = 'FALSE' // Could feasibly want TRUE under different circumstances
if($values){
   $inParams = **dynamically generated IN parameters from $values**;
   $condition = 'IN (' . $inParams . ')';
}

$sql = 'SELECT * FROM `user` WHERE '.$condition; 
```

如果您不需要使用空运行查询`IN`，则不要；为自己节省一趟数据库！

**注意**如果您还没有，我会构建/使用一个可以长期使用并`IN`正确绑定参数的函数，而不是仅仅将它们原始连接到 SQL 中。如果将 SQL 注入用于原始数据，这将为您提供一些保护。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2021-12-07T17:29:07.800

处理此问题的一种方法：

`SELECT user WHERE id in (SELECT 1 WHERE 1!=1)`

如@JamesHoux 的评论中所述，可能需要将 1 替换为适当数据类型的值。
这里的一个假设是用户的 id 是一个 int。

* * *

## 回答 #10

> 赞同：-1
> 
> 时间：2019-10-14T10:03:55.050

如果您在应用程序中使用该查询，并且动态地将对象列表传递给查询，我不应该调用数据库来执行具有不可能值的选择，我应该返回一个空列表而不调用数据库查询，直接地。

因为在调用它之前执行一个你知道它是空的查询是没有意义的。

# php - 带有自定义链接的 PHP 动态页面

> ID：13210235
> 
> 赞同：0
> 
> 时间：2012-11-03T14:51:21.103
> 
> 标签：php, dynamic-pages

下面的代码是这样工作的：

*`http://www.website.com/?page=home`*将从中提取内容*`http://www.website.com/home.php`*

- 或者 -

*`http://www.website.com/?page=About`*将从中提取内容*`http://www.website.com/About.php`*

代码：

```
// Set the default name 
$action = 'home'; 

// Specify some disallowed paths 
$disallowed_paths = array('admin'); 

if (!empty($_GET['page'])) { 
    $tmp_action = basename($_GET['page']); 
    // If it's not a disallowed path, and if the file exists, update $action 
    if (!in_array($tmp_action, $disallowed_paths) && file_exists("{$tmp_action}.php")) 
        $action = $tmp_action; 
} 
// Include $action 
include("$action.php"); 
?> 
```

上面的代码适用于我的所有页面，但现在我有一个**自定义链接**，我需要添加它*`http://www.website.com/?page=Search`*来从中提取内容，*`http://www.website.com/search/search.php`*而不是*`http://www.website.com/Search.php`*

我怎样才能做到这一点？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-03T14:57:55.780

有 2 个选项，您可以*随时*在子文件夹中查找文件，或者您可以有一个特殊的页面列表，其中包含自己的路径，就像使用 disallowed_pa​​ths 一样。

```
$special_paths = array(
    "search" => "search/search.php",
);

if(in_array($_GET['page'], $special_paths)) {
    $action = $special_paths[$_GET['page']]; 
```

这意味着如果将来存在另一个具有不同路径的特殊页面，您可以简单地将其添加到数组中。

完整的代码将是：

```
<?php
    // Set the default name
    $action = 'home.php';

    // Specify some disallowed paths
    $disallowed_paths = array('admin');

    // special paths
    $special_paths = array(
            "search" => "search/search.php",
            "special_b" => "a/different/lengthier/path/file.php",
    );

    if (!empty($_GET['page'])) {
            $tmp_action = basename($_GET['page']);

            // If it's not a disallowed path, and if the file exists, update $action
            if (!in_array($tmp_action, $disallowed_paths) && file_exists("{$tmp_action}.php")) {
                    $action = $tmp_action.".php";
            } elseif(isset($special_paths[$tmp_action])) {
                    $action = $special_paths[$tmp_action];
            }
    }

    // Include $action
    include("$action"); 
```

# css - 在显示内联中将元素放在彼此的顶部？

> ID：13210237
> 
> 赞同：0
> 
> 时间：2012-11-03T14:51:33.253
> 
> 标签：css

我正在尝试创建一个可编辑的选择菜单，我通过将文本字段定位到选择菜单上来做到这一点，我已经对其进行了测试并且它可以工作，但是我在将文本字段定位在选择菜单顶部时遇到问题，`<span>`文本字段去任何地方，但到选择。

```
<div class="SwitchCol"><span>Editable Select:</span><span><select onchange="$('input#text4').val($(this).val());"> <option>option1</option><option>option2</option><option>option3</option><option>option4</option><option>option5</option></select><input id="text4"/></span></div> 
```

Css

```
.SwitchCol{
padding:2px 2px 2px 2px;
height:20px;
max-width:100%;
}

.SwitchCol span{
width:140px;
display: inline-block;
}

input{

margin-left: -170px;
width: 140px;
height: 1.2em;

}

select{
width: 175px;
} 
```

[jsFiddle在这里](http://jsfiddle.net/RUb38/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-03T14:59:12.030

您将需要使用绝对定位来实现这一点，请参阅[此更新的 jsFiddle](http://jsfiddle.net/RUb38/1/)

CSS：

```
.SwitchCol {
    padding:2px 2px 2px 2px;
    height:20px; max-width:100%; }  

.SwitchCol span {
    width:140px;
    display: inline;
}  

input {  
    margin-left: -170px;
    width: 140px; height: 1.2em;
    position: absolute;

}  

select {
    width: 175px;
} 
```

您可以使用`left`和`top`属性进一步定位它。在那个小提琴中，使用它[看起来绝对完美](http://jsfiddle.net/RUb38/5/)

```
input {  
    margin-left: -170px;
    width: 155px; height: 1.4em;
    position: absolute;
    left: 276px;
    top: 2px;
} 
```

但是，用户选择的选项是不可见的。我不知道如何真正解决这个问题。一个真正可编辑的选择会很棒，您可以在这个 SO 问题上找到如何做到这一点：

[如何在 HTML 中创建可编辑的下拉列表？](https://stackoverflow.com/q/264640/1313143)

# ruby-on-rails - 对象关系并将对象 ID 传递给多个控制器？

> ID：13210238
> 
> 赞同：0
> 
> 时间：2012-11-03T14:51:42.893
> 
> 标签：ruby-on-rails, activerecord, table-relationships

我对做某事的最佳方式感到困惑，并希望得到一些建议。

我有以下型号：

```
class Plan < ActiveRecord::Base
  attr_accessible :description, :name, :user_id

  validates :name, :presence => true
end

class Planplace < ActiveRecord::Base
  attr_accessible :plan_id, :planplace

  validates :planplace, :presence => true
end

class Plandate < ActiveRecord::Base
  attr_accessible :plan_id, :plandate

  validates :plandate, :presence => true
end 
```

一个计划可以有许多计划日期和计划地点。我对这些中的每一个都有一个控制器，可以进行非常基本的创建。

```
class PlansController < ApplicationController

def create
    @plan = Plan.new(params[:plan])
    if @plan.save
        flash[:success] = "Created ..."
    else
        flash[:alert] = "placeplace save error ..."
    end
end   
end

class PlanplacesController < ApplicationController

    def create
        @planplace = Planplace.new(params[:planplace])
        if @planplace.save
            flash[:success] = "Created ..."
        else
            flash[:alert] = "placeplace save error ..."
        end
    end
end

class PlandatesController < ApplicationController

    def create
        @plandate = Plandate.new(params[:plandate])
        if @plandate.save
            flash[:success] = "Created ..."
        else
            flash[:alert] = "plandate save error ..."
        end
    end
end 
```

我需要做的是有一个单一的视图来创建一个计划，并允许使用该 plan.plan_id 保存多个计划日期和多个计划地点。

在基本层面上实现这一目标的最佳方法是什么（我的目标是在不重新加载的情况下进行 ajax 调用以进行保存，但我离这个还很远，我仍在努力学习）。

我是否将其放置在单个“新”平面图中？我玩过一个表单，它使用 fields_for 在同一个表单中更新多个模型，但我想大致了解在此之前采取的最佳方法。

我知道我需要在模型中使用 has_many 和 belongs_to 但我不确定进行完整保存的最佳方式，因此关系是正确的。

希望我已经很好地解释了这一点。任何关于最佳方法的建议都非常感谢。

（请客气，我现在才学习 Rails 一个月）

---编辑---我在这里制定了模型以及如何传递我需要的对象。我不认为我问这个问题是正确的，因为我有点困惑。感谢所有看过它的人。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T16:36:58.383

查看[嵌套模型表单](http://railscasts.com/episodes/196-nested-model-form-part-1?view=asciicast)。

在你的情况下，一个计划`has_many :plandates`和`has_many :planplaces`. Plandate 和 Planplace `belongs_to :plan`。然后，Plandates 和 Planplaces 需要一列用于`plan_id:integer`.

# c - C 编译器可以在结构中的第一个元素之前添加填充吗？

> ID：13210239
> 
> 赞同：4
> 
> 时间：2012-11-03T14:51:52.987
> 
> 标签：c

具体来说，我想知道我是否可以做这样的事情：

```
typedef struct {
    char *s; /* still a cstr, with '0' bit at end */
    size_t len;
} str;
str *newstr(char *s) {/*...*/};
void freestr(str *s) {/*...*/}; 
```

并做这样的事情（将其视为具有`stdlib/string`功能的 cstr）：

```
int main() {
    str *s = newstr("hello");
    printf("The first character of '%s' is '%c'", *s, (*s)[0]);
    freestr(s);
} 
```

如果不是，这没什么大不了的——当然，我并不真正担心浪费一个字节。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-03T14:53:26.653

不，这是标准明确禁止放置任何填充的地方。结构的第一个成员的地址和结构的地址必须相同。

C2011 标准的 n1570 草案中的第 6.7.2.1 (15) 节规定：

> 在结构对象中，非位域成员和位域所在的单元的地址按声明顺序递增。**一个指向结构对象的指针，经过适当的转换，指向它的初始成员（或者如果该成员是位域，则指向它所在的单元），反之亦然。**结构对象中可能有未命名的填充，但不是在其开头。

（强调我的）

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-11-03T14:53:47.883

不可以。C 标准要求结构中的第一个元素之前没有填充。但这是它唯一能保证的。其他字段之间可能存在（未记录大小的）填充。

来自[ISO C99 标准](http://www.open-std.org/jtc1/sc22/wg14/www/docs/n1256.pdf)：（6.7.2.13）：

> 13 在结构对象中，非位域成员和位域所在的单元的地址按声明顺序递增。一个指向结构对象的指针，经过适当的转换，指向它的初始成员（或者如果该成员是位域，则指向它所在的单元），反之亦然。结构对象中可能有未命名的填充，但不是在其开头。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-11-03T14:54:49.627

不。

> （C99，6.7.2.1p13）“结构对象中可能有未命名的填充，但不是在其开头。”

在任何结构成员（包括最后一个）之后可以有填充，但在第一个结构成员之前不能有填充。

# ruby-on-rails - Ruby on Rails 授权未保存

> ID：13210240
> 
> 赞同：1
> 
> 时间：2012-11-03T14:52:16.810
> 
> 标签：ruby-on-rails, ruby, authentication, authorization, omniauth

我正在关注这个：[教程](http://net.tutsplus.com/tutorials/ruby/how-to-use-omniauth-to-authenticate-your-users/)

```
user = User.new :name => auth_hash["user_info"]["name"], :email => auth_hash["user_info"]["email"]
user.authorizations.build :provider => auth_hash["provider"], :uid => auth_hash["uid"]
user.save
render :text => "Hi #{user.name}! You've signed up." 
```

我正在浏览数据库并检查表`authorization`，发现表是空的。
这是为什么？

**编辑：** 我收到此错误：

> 糟糕，出了点问题：[“授权无效”]

这是用户.rb：

```
class User < ActiveRecord::Base
  has_many :topics
  has_many :authorizations

  attr_accessible :email, :name
  validates :name, :email, :presence => true
end 
```

这是授权.rb：

```
class Authorization < ActiveRecord::Base

  belongs_to :user
  validates :provider, :uid, :presence => true

  attr_accessible :provider, :uid
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T15:04:36.800

始终检查返回值：

```
...
if user.save
  render :text => "Hi #{user.name}! You've signed up."
else 
  # do something with the errors, e.g.:
  render :text => "Oops, something went wrong: #{user.errors.full_messages}"
end 
```

# cakephp - 使用 XAMPP 配置 CakePHP

> ID：13210247
> 
> 赞同：1
> 
> 时间：2012-11-03T14:53:40.520
> 
> 标签：cakephp

我一直在工作中使用 CakePHP，现在我正在尝试在家里进行设置。我在 htdocs 中有一个项目文件夹，在该文件夹中我有我的 cakeProject .../htdocs/Projects/CakeProject/app...。当我将 url 指向 localhost/Projects/cakeProject/ 时，我收到此错误。

缺少控制器

错误：找不到 ProjectsController....

它继续解释如何制作控制器。显然，这不是真正的问题。谁能立即看到我在俯瞰什么？

这是堆栈跟踪：堆栈跟踪

```
APP\webroot\index.php line 92 → Dispatcher->dispatch(CakeRequest, CakeResponse)
App::uses('Dispatcher', 'Routing');

$Dispatcher = new Dispatcher();

$Dispatcher->dispatch(new CakeRequest(), new CakeResponse(array('charset' => Configure::read('App.encoding'))));

object(CakeRequest) {
    params => array(
        [maximum depth reached]
    )
    data => array([maximum depth reached])
    query => array([maximum depth reached])
    url => 'projects/cakeProject/'
    base => '/projects/cakeProject/app/webroot/index.php'
    webroot => '/projects/cakeProject/app/webroot/'
    here => '/projects/cakeProject/app/webroot/index.php/projects/cakeProject/'
}
object(CakeResponse) {

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T16:17:31.087

I am not sure what the problem was. I must have set something up wrong during installation. I deleted the Project from the Projects folder. Recloned it and it is working properly now.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-03T15:29:25.590

你的 webroot 文件夹在哪里？在执行任何操作之前，您必须配置 webroot。

我不知道您使用的是哪个操作系统，但 google 上关于此主题的第三个结果是windows 中 xamp的详细[指南。](http://mushfiqrazib.wordpress.com/2011/05/22/configure-cakephp-with-xampp/)也许它可以帮助你

# c++ - CppUnit 创建一个简单的测试

> ID：13210248
> 
> 赞同：1
> 
> 时间：2012-11-03T14:53:41.377
> 
> 标签：c++, unit-testing, cppunit

首先，如果我想设置一个测试，我使用什么类：

```
class MyClassTests 
    setup()
    teardown()
    testDoingSomething()
    testDoingA() 
```

似乎要使用的类是TestSuite？

* * *

所以现在我创建了一个非常简单的类：

```
# ParserUnitTests.h
#include <cppunit\TestFixture.h>;
#include <cppunit\extensions\HelperMacros.h>

class ParserUnitTests : public CppUnit::TestFixture {

public:
    void testCanDoUnitTest();
}; 
```

及其对应的cpp：

```
#include "ParserUnitTests.h"

CPPUNIT_TEST_SUITE(ParserUnitTests);

void ParserUnitTests::testCanDoUnitTest() {
    CPPUNIT_ASSERT_EQUAL(1, 2, "Expected failure");
}

CPPUNIT_TEST(ParserUnitTests::testCanDoUnitTest); 
```

我收到类似“*预期声明*”之类的错误`CPPUNIT_TEST_SUITE`...似乎与我来自的地方非常不同...更现代的语言...如 JS/Python ...似乎在这里更明确？我必须告诉 CppUnit 运行哪些类/测试用例？好的，但是是什么导致了错误？

CppUnit 食谱中的代码主要是snipplets，很难弄清楚需要什么进口以及应该去哪里......也许有人可以指导我？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-03T21:39:11.053

With some small changes your code should work.

```
// ParserUnitTests.h
#include <cppunit\TestFixture.h>;
#include <cppunit\extensions\HelperMacros.h>

class ParserUnitTests : public CppUnit::TestFixture {

    CPPUNIT_TEST_SUITE(ParserUnitTest);
    CPPUNIT_TEST(testCanDoUnitTest);
    CPPUNIT_TEST_SUITE_END();

public:
    void testCanDoUnitTest();
};

CPPUNIT_TEST_SUITE_REGISTRATION( ParserUnitTest ); 
```

and

```
// ParserUnitTests.cpp
#include "ParserUnitTests.h"

void ParserUnitTests::testCanDoUnitTest() {
    CPPUNIT_ASSERT_EQUAL(1, 2, "Expected failure");
} 
```

then you only need a main (which I copied just from the Cppunit cookbook)

```
// main.cpp
#include <cppunit/extensions/TestFactoryRegistry.h>
#include <cppunit/ui/text/TestRunner.h>

int main()
{
    CppUnit::TextUi::TestRunner runner;
    CppUnit::TestFactoryRegistry &registry = CppUnit::TestFactoryRegistry::getRegistry();
    runner.addTest( registry.makeTest() );
    bool wasSuccessful = runner.run();
    return !wasSuccessful;
} 
```

So the only change is that you need to declare the test suite in the header file inside the TestFixture declaration.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-03T16:19:48.683

这就是我使用 CppUnit 的方式：

```
#include "MyClass.hpp"

struct callable
{
  void operator()()
  {
  }
};

class MyClassTest : public CppUnit::TestCase
{
public:
  void testEquality()
  {
    CPPUNIT_ASSERT(1 == 1);
  }

  void testCreation()
  {
    MyClass<callable>* tp = new MyClass<callable>(1);
    CPPUNIT_ASSERT(tp->done() == true);
    delete tp;
  }

  static CppUnit::Test* suite()
  {
    CppUnit::TestSuite* suiteOfTests = new CppUnit::TestSuite("MyClassTest");
    suiteOfTests->addTest(new CppUnit::TestCaller<MyClassTest>("testEquality",
                                              &ThreadPoolTest::testEquality));
    return suiteOfTests;
  }
}; 
```

和 ：

```
#include <cstdlib>
#include <iostream>
#include <limits>
#include <cppunit/ui/text/TestRunner.h>
#include <cppunit/XmlOutputter.h>
#include <cppunit/TextOutputter.h>
#include <cppunit/TestResult.h>
#include <cppunit/TestResultCollector.h>

#include "MyClass.hpp"

int main(int argc, char** argv)
{
  CppUnit::TextUi::TestRunner   runner;

  runner.addTest(MyClass::suite());

  runner.run();

  return (EXIT_SUCCESS);
} 
```

Some code is missing in the main but I simplified it so you could see the important bits. Hope this helps.

# unit-testing - Scala 中的反射代码不会深入到 Vector

> ID：13210251
> 
> 赞同：0
> 
> 时间：2012-11-03T14:53:49.303
> 
> 标签：unit-testing, scala, reflection, pattern-matching, case-class

我的应用程序的这一部分从 JSON 解析到我的对象。我创建了一个单元测试，它创建了一个“PurchaseOrder”，将其转换为 JSON 并将其转换回相同类型的对象，并使用反射来检查原始的 PurchaseOrder 和最终的 PurchaseOrder 是否相同：

```
val purchaseOrderJson = PurchaseOrderJson.toJson(purchaseOrder)
val clientPurchaseOrder = PurchaseOrderJson.fromJson(purchaseOrderJson)

val reflectionCheck = classOf[PurchaseOrder].getMethods.forall {
 (method: Method) =>
    if (!method.invoke(purchaseOrder).equals(method.invoke(clientPurchaseOrder))) {
      println("%s unequal: %s vs %s".format(method.getName, method.invoke(purchaseOrder), method.invoke(clientPurchaseOrder)))
      false
    } else {
      true
    }
} 
```

这是 JSON：

```
"purchaseOrders": [{
    "id": "522423",
    "lineItems": [{
        "notes": "Important item",
        "origin": "Spain"
      },{
        "notes":null,
        "origin": "Italy"
    }]
}] 
```

我将对象定义为特征：

```
trait PurchaseOrder {
  def id: String
  def lineItems: Vector[LineItem]
}

trait LineItem {
  def notes: Option[String]
  def origin: String
} 
```

并且实现如下：

```
class PurchaseOrderJson(
    @(JsonProperty @field) override val id: String,
    @(JsonProperty @field) override val lineItems: Vector[LineItemImpl]
) extends PurchaseOrder {
    def this() = this("",Vector.empty[LineItemImpl])
}

case class LineItemImpl(notes: Option[String]) extends LineItem 
```

现在:) 我的问题是我必须向 LineItem 添加很多字段，编译器抱怨我在一个案例类中不能有超过 22 个参数。所以我所做的就是将 LineItemImpl 重写为如下所示：

```
class LineItemImpl(
    @(JsonProperty @field) override val notes: Option[String] = None
) extends LineItem {
    def this() = this(None)
} 
```

但现在我的反射单元测试出现错误：

```
lineItems unequal: Vector(com.giltgroupe.purchaseorder.core.json.LineItemImpl@5b6ca395) vs Vector(com.giltgroupe.purchaseorder.core.json.LineItemImpl@3967ba17) 
```

这意味着被比较的两个对象中的两个向量在内部元素上有所不同。我理解这是因为当我将案例类更改为标准类时，它会丢失一些模式匹配属性，所以现在它比较的是对象地址而不是内容。

有没有办法解决这个问题，向 LineItemImpl 添加更多属性或注释？或者我唯一能做的就是修改我的反射检查以深入了解向量？理想情况下，我不想修改单元测试。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T18:40:53.960

我发现我缺少一个为案例类自动创建的方法，等于

```
 override final def equals (other:Any):Boolean = {} 
```

在这种情况下，我还需要定义 hashCode 方法，这不是我的代码运行所必需的，但如果不包括在内，它可能会在未来产生奇怪的行为：

```
override final def hashCode(): Int = ScalaRunTime.this._hashCode(LineItemJson.this) 
```

# many-to-many - 多对多 Propel 与属性的关系

> ID：13210255
> 
> 赞同：2
> 
> 时间：2012-11-03T14:54:23.480
> 
> 标签：many-to-many, propel

我正在尝试设置由以下内容组成的架构（仅显示相关部分）：

```
<table name="song" phpName="Song">
    <column name="id" type="integer" required="true" primaryKey="true" autoIncrement="true"/>
    <column name="title" type="varchar" size="255" required="true"/>
</table>
<table name="artist" phpName="Artist">
    <column name="id" type="integer" required="true" primaryKey="true" autoIncrement="true"/>
    <column name="name" type="varchar" size="255" required="true" />
    <column name="surname" type="varchar" size="255" required="true" />
    <column name="information" type="varchar" size="255"/>
</table>
<table name="song_artist" isCrossRef="true">
    <column name="song_id" type="integer" required="true" primaryKey="true"/>
    <column name="artist_id" type="integer" required="true" primaryKey="true"/>
    <foreign-key foreignTable="song">
      <reference local="song_id" foreign="id"/>
    </foreign-key>
    <foreign-key foreignTable="artist">
      <reference local="artist_id" foreign="id"/>
    </foreign-key>
</table> 
```

以上功能正常，但我还想在交叉引用表中添加一个属性，以便我可以按类别过滤结果。

每首歌曲可以有许多艺术家（作曲家、作词家和歌手）。此外，一个艺术家可以有很多歌曲，但可以创作很多歌曲（作为作曲家），可以为很多歌曲写歌词（作为作词人），可以演唱很多歌曲（作为歌手）。

通过查询：

```
$song->getArtists() 
```

我检索了这首歌的所有艺术家，但没有任何关于谁是`composers/lyricists/singers`.

我尝试在架构中添加一个额外的字段，`song_artist`以便我可以通过以下方式过滤结果：

```
$song->getArtists()->filterByCategory('composer') 
```

表架构如下：

```
<table name="song_artist" isCrossRef="true">
    <column name="song_id" type="integer" required="true" primaryKey="true"/>
    <column name="artist_id" type="integer" required="true" primaryKey="true"/>
    <column name="category" type="enum" valueSet="composer, lyricist, singer" required="true"/>
    <foreign-key foreignTable="song">
      <reference local="song_id" foreign="id"/>
    </foreign-key>
    <foreign-key foreignTable="artist">
      <reference local="artist_id" foreign="id"/>
    </foreign-key>
</table> 
```

当我使用它时，Propel 发生故障，当我尝试将其添加为第三个主键（作为带有外键的 category_id 指向“类别”表）时，它也会发生故障。

据我估计，Propel 不接受交叉引用表的任何其他字段来处理多对多关系。是否有解决此问题的方法，或者我是否必须为作曲家、作词家和歌手设置三个不同的表格（以及所有其他必要的调整）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-11T10:43:00.510

使用您提供的最后一个模式，您应该能够使用像这样的小“技巧”​​按类别过滤结果：

```
$criteria = ArtistQuery::create()
  ->useSongArtistQuery()
    ->filterByCategory('composer')
  ->endUse();
$song->getArtists($criteria) 
```

# jquery - 加载时隐藏，单击时添加一个类，然后再单击另一个类切换

> ID：13210262
> 
> 赞同：1
> 
> 时间：2012-11-03T14:54:51.650
> 
> 标签：jquery, addclass, removeclass, toggleclass

我有一个导航，我想在加载时隐藏它。

然后，我想在单击带有 class="nav-btn" 的导航时向该导航添加一个“bounceIn”类

初始点击后，我希望它在“bounceIn”和“bounceOut”类之间切换

目前我刚刚完成了这项工作，它会在点击时反弹并删除bounceIn并添加bounceOut（忽略动画类）。

```
$(document).ready(function() {

  $('nav').addClass('animated bounceIn');

  $("nav").click(function () {
      $(this).removeClass('bounceIn');
      $(this).addClass('bounceOut');
  });

}); 
```

如何轻松实现我的需求？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T14:58:01.363

你可以使用`toggleClass`方法。

```
$('.nav-btn').click(function () {
    $('nav').toggleClass('bounceIn bounceOut');
}); 
```

# android - 后退按钮不返回上一个活动

> ID：13210263
> 
> 赞同：0
> 
> 时间：2012-11-03T14:54:52.473
> 
> 标签：android, back, start-activity

我的小型测试应用程序是一个 ListActivity，它显示所有联系人。当用户单击一个时，它会打开“人”ACTION_EDIT 活动。这工作正常。当用户单击“返回”或以其他方式完成编辑时，主“人员”列表活动开始，而不是返回到我的活动。

为什么会这样？

这是我的代码：

```
public class ReadContact extends ListActivity implements OnItemClickListener
{
  @Override
  public void onCreate(Bundle savedInstanceState) 
  {
      super.onCreate(savedInstanceState);
      ...
  }

  @Override
  public void onItemClick (AdapterView<?> parent, View view, int position, long id) 
  {
    Cursor cur = ((SimpleCursorAdapter)parent.getAdapter()).getCursor();
    cur.moveToPosition (position);
    String key = cur.getString (2);
    System.out.println ("clicked " + key);

    // make intent to edit contact
    Intent intent = new Intent (Intent.ACTION_EDIT);
    intent.setData (Uri.parse (ContactsContract.Contacts.CONTENT_LOOKUP_URI + "/" + key));
    startActivityForResult (intent, 2);
  }

  @Override
  protected void onActivityResult (int requestCode, int resultCode, Intent data)
  {
    System.out.println ("request " + requestCode + ", result " + resultCode);
  }
} 
```

请注意，永远不会调用 onActivityResult。另请注意，我无法控制联系人编辑代码——这是 android 提供的“人”应用程序的一部分。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T21:29:06.280

我为此向android提交了一个错误。有人看着它并回答说有一个未记录的解决方法。从错误报告中：

> 未记录的解决方法是调用 putExtra("finishActivityOnSaveCompleted", true); 在 ACTION_EDIT 意图上。
> 但是，由于这是无证的，我不知道哪个 Android 版本会使用它。

我试过了，它适用于我正在使用的 Android 版本：4.1.2。有关详细信息，请参阅[问题 39262](http://code.google.com/p/android/issues/detail?id=39262)。

# python - 使 sql 转储可下载

> ID：13210265
> 
> 赞同：1
> 
> 时间：2012-11-03T14:55:06.073
> 
> 标签：python, mysql, flask

我正在 python/flask 中制作投票应用程序，我需要制作一个按钮，允许用户下载 mysql 转储。

执行转储的 mysql 代码是这样的 - `select * into outfile "votes.csv" fields terminated by ',' from vote;`

我有 2 个问题

*   保存此转储以便可以下载它的路径应该是什么？
*   我正在使用 sqlalchemy。如何从烧瓶应用程序执行此代码并提供指向生成的文件的链接？

非常感谢！

对于流媒体？

```
 @app.route('/foo')
 def foo():
     def generate():
         yield 'first part'
         yield 'second part'
     return Response(generate(), direct_passthrough=True) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-03T14:59:59.890

好的，让我们看看问题所在。

您想将您的选票转储到一个 csv 文件中，其中的字段以“，”从投票表中终止？

您可能可以直接遍历 sqlalchemy 表 :) 像这样的东西。

```
",".join(vote for vote in Vote) 
```

显然它可能略有不同，但仍然是重点。在 Python 中构建 csv，而不是让 mysql 将其转储出去。

现在至于保存在哪里，您有两个选择，将其写入硬盘或存储在内存中（取决于约束）

如果将其写入硬盘驱动器，只需确保将其保存在`/static`应用程序的目录中，如果它在内存中，则可以直接将其流式传输到请求中。

另一种方法可能是动态生成文件，只需将其写入请求者即可。

# c++ - 将 int 转换为 char* 以打印

> ID：13210271
> 
> 赞同：2
> 
> 时间：2012-11-03T14:55:35.257
> 
> 标签：c++, char, int, typeconverter

我想要一个 int 值作为字符串显示在屏幕上。这是我在opengl中做的一个游戏。我有这样的事情：

```
char *string = "0"; // to declare

sprintf (label,"%d" ,string); // This prints 0 
```

这非常适合在屏幕上打印 0，但是正如您可能理解的那样，我希望 0 发生变化。我尝试将 int 转换为 string 并尝试将其分配给 char *string，但我认为这是不可能的。我是 C++ 的新手，所以我不太了解，非常感谢您的帮助。我想要实现的是：

```
char *string = "0"; // to declare
int number = 90; // declare int to be converted;

sprintf (label,"%d" ,string); // This prints 90 
```

我发现将 int 方法转换为 char 方法，但是没有解决我的问题。感谢您提前提供的所有帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-03T15:00:38.413

如果您只想在屏幕上打印一个数字，那么您可以流式传输到`std::cout`：

```
#include <iostream>

int nubmer = ....;

std::cout << number; 
```

否则，您可以将数字流式传输到 中`std::ostringstream`，并获取底层`const char*`：

```
std::strimgstream o;
o << number;
const char* string_ = o.str().c_str(); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-03T15:06:34.587

用这个：

```
std::stringstream val;

val << number;

val.str();         // Gets you a C++ std::string
val.str().c_str(); // Gets you a C-String 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-03T14:59:18.660

```
 char label[100] = {"0"};
   printf("%s\n",label);
   int number = 90;
   sprintf(label,"%d",number);
   printf("%s\n",label);
   sprintf(label,"%d",number + 1);
   printf("%s\n",label); 
```

输出：

```
0
90
91 
```

# ios - 使用 iCloud 作为“半”多用户版本？

> ID：13210273
> 
> 赞同：0
> 
> 时间：2012-11-03T14:55:57.980
> 
> 标签：ios, core-data, icloud

我们即将发布一款新的儿童学习游戏。我们大量使用核心数据来跟踪用户进度。

Beta 测试人员重复请求多用户界面。我们将来会做一个，但我们想知道——

如果我们将核心数据数据库同步到 iCloud，有没有办法从 iCloud 获取当前用户数据并在其他用户使用该应用程序时将其切换回来？全部基于 iCloud 用户？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T15:07:32.117

不会。iCloud 专门设计用于将数据隔离给单个用户。

如果您正在寻求构建多用户数据共享，那么您根本不想走这条路。坚持构建一个宁静的网络接口。这是一条更短、更可靠的道路。

# php - 将xml数据解析为php变量如何

> ID：13210274
> 
> 赞同：0
> 
> 时间：2012-11-03T14:56:01.237
> 
> 标签：php, xml

任何人都可以通过示例给我提示如何执行以下方法

```
 $XMLAttendee= "<attendee_list>
    <attendee>
    <attendee_id>1028</attendee_id>
    <screen_name>shahid</screen_name>
    <language_culture_name>es-ES</language_culture_name>
    </attendee>
    </attendee_list>";

   $requestParameters["attendee_list"]=$XMLAttendee; 
```

这就是我必须将 xml 数据解析为 API 的方式，所以我想知道的是，，，，，我如何创建 xml 文件并解析 $xmlattendee 变量...

任何人都可以用例子来解释我...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-03T15:00:13.000

```
$XMLAttendee= "<attendee_list>
    <attendee>
    <attendee_id>1028</attendee_id>
    <screen_name>shahid</screen_name>
    <language_culture_name>es-ES</language_culture_name>
    </attendee>
    </attendee_list>";    

$xmlarray= new SimpleXMLElement($XMLAttendee);

var_dump($xmlarray); //teach a man to fish and he will eat forever 
```

这是一个很好的例子：[http ://www.phpro.org/tutorials/Introduction-To-SimpleXML-With-PHP.html](http://www.phpro.org/tutorials/Introduction-To-SimpleXML-With-PHP.html)

# javascript - Knockoutjs 计算传递参数

> ID：13210275
> 
> 赞同：46
> 
> 时间：2012-11-03T14:56:09.643
> 
> 标签：javascript, binding, knockout.js, observable

我想知道在绑定时是否可以使用 knockoutjs 传递参数。

我正在绑定一个复选框列表，并希望绑定到我的视图模型中的单个计算的 observable。在我的视图模型中（基于传递给读取函数的参数）我想根据某些条件返回真/假。

```
var myViewModel=function(){
    this.myprop=ko.computed({read: function(){
    //would like to receive an argument here to do my logic and return based on argument.
}
});
};

<input type="checkbox" data-bind="checked: myprop(someval1)" />
<input type="checkbox" data-bind="checked: myprop(someval2)" />
<input type="checkbox" data-bind="checked: myprop(someval3)" /> 
```

有什么建议么？

* * *

## 回答 #1

> 赞同：89
> 
> 时间：2012-11-04T06:29:22.150

创建一个函数，其唯一目的是返回一个计算的 observable。它可以根据需要接受参数。如果您希望它是双向绑定，它必须是一个单独的计算 observable。

然后在您的绑定中，使用适当的参数调用该函数。它返回的计算出的 observable 将绑定到您的视图中，并将照常更新。

这是我使用这种技术创建事件处理程序[的小提琴。](http://jsfiddle.net/jeff1203/WGKBA/)你可以在这里做类似的事情。

您可以通过使函数成为可观察对象上的方法来保持它的清洁。通过添加到`ko.observable.fn`原型或直接将其添加到可观察实例。

```
ko.observable.fn.bit = function (bit) {
    return ko.computed({
        read: function () {
            return !!(this() & bit);
        },
        write: function (checked) {
            if (checked)
                this(this() | bit);
            else
                this(this() & ~bit);
        }
    }, this);
};
// or
function ViewModel() {
    this.flags = ko.observable(0);

    this.flags.bit = function (bit) {
        return ko.computed({
            read: function () {
                return !!(this() & bit);
            },
            write: function (checked) {
                if (checked)
                    this(this() | bit);
                else
                    this(this() & ~bit);
            }
        }, this);
    }.bind(this.flags);
} 
```

然后应用于您的视图

```
<input type="checkbox" data-bind="checked: flags.bit(0x1)"/>
<input type="checkbox" data-bind="checked: flags.bit(0x2)"/>
<input type="checkbox" data-bind="checked: flags.bit(0x4)"/>
<input type="checkbox" data-bind="checked: flags.bit(0x8)"/> 
```

[演示](http://jsfiddle.net/jeff1203/M4sKG/29/)

* * *

但是，如果您只是尝试将所有这些复选框绑定到视图模型中的单个值，则不需要这样做。`checked`在视图模型中的数组上使用绑定并为您的复选框指定一个值。每个检查的值都将添加到数组中。这将是一种双向绑定。

```
<input type="checkbox" data-bind="checked: checkedValues, value: 1"/>
<input type="checkbox" data-bind="checked: checkedValues, value: 2"/>
<input type="checkbox" data-bind="checked: checkedValues, value: 3"/>
<input type="checkbox" data-bind="checked: checkedValues, value: 4"/> 
```

```
var viewModel = {
    checkedValues: ko.observableArray([])
}; 
```

[演示](http://jsfiddle.net/jeff1203/M4sKG/)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-02-27T16:57:06.923

接受的答案是不错的，但是如果您有一个为每个复选框生成 ko.computed 的函数，那么您将使用多个匿名计算的 observables 添加不必要的开销，当您的复选框列表超过 4-5 个选项时，这些开销会迅速增加。

这是按位场景的更简单实现，但计算函数可以是任何需要的函数。

```
<input type="checkbox" data-bind="checked: checkedList, value: 1" />
<label>Value 1</label>
<input type="checkbox" data-bind="checked: checkedList, value: 2" />
<label>Value 2</label>
<input type="checkbox" data-bind="checked: checkedList, value: 4" />
<label>Value 4</label>
<input type="checkbox" data-bind="checked: checkedList, value: 8" />
<label>Value 8</label> 
```

脚本：

```
var vm = function() {
    var vm = this;

    this.checkedList = ko.observableArray();
    this.bitwiseValue = ko.computed({
        read: function () {
            return vm.checkedList().reduce(function (prev, curr) {
                return prev | curr;
            }, 0);
        },
        write: function (myVal) {
            vm.checkedList.removeAll();
            var placeValue = 1;

            while(myVal > 0) {
                if((myVal % 2) == 1) {
                    alert(placeValue);
                    vm.checkedList.push(placeValue.toString());
                }

                myVal = myVal >>> 1;                    
                placeValue = placeValue * 2;
            }
        }
    }, this);
}

ko.applyBindings(vm); 
```

此处的小提琴示例：http: [//jsfiddle.net/i_vargas3/RYQgg/](http://jsfiddle.net/i_vargas3/RYQgg/)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-03T16:44:35.473

没有理由使用`computed`值。只需在您的视图模型中定义一个函数并将其绑定`checked`到它。

下面是一个非常简单的例子。

--

HTML

```
<input type="checkbox" data-bind="checked: isEven(1)" />
<input type="checkbox" data-bind="checked: isEven(2)" />
<input type="checkbox" data-bind="checked: isEven(3)" />​ 
```

JS

```
var MyViewModel=function(){
    this.isEven = function(num) {
        return (num % 2) == 0;
    };
};
ko.applyBindings(new MyViewModel()); 
```

​--

话虽如此，尝试将尽可能多的逻辑推送到您的视图模型中是一个好主意。建议创建一个将您的复选框建模为对象的视图模型，然后可以将有关是否应选中复选框的逻辑封装在其中。

--

编辑：根据进行双向绑定的要求，我编写了一个扩展器来管理一个可观察的。

[http://jsfiddle.net/jearles/j6zLW/5/](http://jsfiddle.net/jearles/j6zLW/5/)

```
ko.extenders.bitwise = function(target, bitCount) { 
    target.bits = [];    
    target.checked = ko.observableArray();

    // Create bit array based on requested number of bits
    for (i=bitCount-1; i>=0; i--) {
        target.bits.push(''+Math.pow(2, i));
    }        

    // Define a function to create bits
    function makeBits(newValue) {
       var num = !isNaN(newValue) ? parseInt(newValue) : 0;
       var arr = [];
       for (i=0; i<target.bits.length; i++) {
          var bitValue = parseInt(target.bits[i]);
          if ((num & bitValue) == bitValue) arr.push(target.bits[i]);
       }
       target.checked(arr);
    }

    // Define a function to combine bits
    function makeBitwise(newBits) {
       var num = 0;
       for (i=0; i<target.bits.length; i++) {
         if (newBits.indexOf(target.bits[i]) > -1) num += parseInt(target.bits[i]);
       }
       target(num);
    }

    // Create initial bits
    makeBits(target());

    // Make bits whenever the value changes
    target.subscribe(makeBits);

    // Make number whenever the bits change
    target.checked.subscribe(makeBitwise);

    // Return the original observable
    return target;
};

var MyViewModel=function(){
    var self = this;
    this.number = ko.observable(2).extend({ bitwise: 8});

};
ko.applyBindings(new MyViewModel());​ 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-03T16:32:11.553

在不了解细节的情况下，您似乎应该做的是定义一个 ko.observableArray 或计算数组值

HTML：

```
myprop: <input data-bind="value: myprop">
<div data-bind="foreach: selections">
  <label>
    <span data-bind="text: value"></span>
    <input type="checkbox" data-bind="checked: selected"/>
  </label>
</div> 
```

JS：

```
 $(function() {
    function Model() {
        this.self = this
        self.myprop = ko.observable(14)
        self.bits = [1, 2, 4, 8, 16, 32, 64, 128]
        self.selections = ko.computed(function() {
            return self.bits.map(function(bit) {
                console.log(myprop() & bit)
                return {
                    value: bit,
                    selected: (myprop() & bit) == bit
                }
            })
        })
    }

    ko.applyBindings(new Model())
}) 
```

并且不从标记中传递值来定义模型状态

# matlab - shogun 工具箱错误：Makefile：527：使用 Cygwin 的目标“libshogun-12.0.dll”的配方失败

> ID：13210280
> 
> 赞同：0
> 
> 时间：2012-11-03T14:56:26.757
> 
> 标签：matlab, compilation, machine-learning, cygwin, shogun

我正在尝试为 SVM 安装 shogun 库，并且我在具有 swig 2.0.8 的 windows vista 上使用最新版本的 Cygwin，通常“./configure --interfaces=matlab_static”命令运行顺利，每当我输入“ make” 我收到错误消息 Makefile:527: recipe for target `libshogun-12.0.dll' failed using Cygwin，因此我没有得到应该在我的 make 命令之后生成的“sg.dll” '将用于在 shogun 上运行 matlab 界面。

非常感谢任何建议或帮助谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T19:08:23.907

我的猜测是幕府将军的开发人员不太关心支持 Windows，所以我建议你在 linux（虚拟）机器上试试这个。

不过，您绝对应该将这个问题发送到 shogun 邮件列表，以获得明确的答案。有关如何注册该列表的详细信息，请参见[他们的联系页面](http://shogun-toolbox.org/page/contact/contacts)。

# ios - IOS Dev Stanford Homework #1 计算器，无法启动

> ID：13210282
> 
> 赞同：1
> 
> 时间：2012-11-03T14:56:38.350
> 
> 标签：ios

```
#import <UIKit/UIKit.h><br>

#import "AppDelegate.h"<br>

int main(int argc, char *argv[])<br>
{
    @autoreleasepool {
    => Thread1: signal SIABRT
        return UIApplicationMain(argc, argv, nil, NSStringFromClass([AppDelegate class]));
    }
} 
```

> 错误信息：
> 
> 2012-11-03 10:32:08.611 计算器 [9644:907] *** 由于未捕获的异常“NSUnknownKeyException”而终止应用程序，原因：“[setValue:forUndefinedKey:]：此类不符合键值编码的键测试。
> ***第一掷调用堆栈：（0x342f92a3 0x33acb97f 0x342f8f99 0x392559d1 0x39251723 0x3427f61b 0x36fce245 0x36fcdac3 0x36ec6025 0x36e5046d 0x36e90d79 0x36e8caed 0x36ece1d1 0x36e9183f 0x36e8984b 0x36e31c41 0x36e316d5 0x36e31123 0x34fa95a3 0x34fa91d3 0x342ce173 0x342ce117 0x342ccf99 0x3423febd 0x3423fd49 0x36e88485 0x36e85301 0x77c1 0x38ec4b20）的libc ++ abi.dylib：终止叫做抛出异常（ lldb)

我不知道如何在 GDB 环境中调试......有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-03T15:03:25.007

通常该错误意味着您定义了一个 IBOutlet，然后将其连接到 IB 中，然后删除了该 ivar。检查所有 IBOutlets 是否在类中综合和定义。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-03T15:13:01.843

确保您的所有 IBActions 和 IBOutlets 都正确连接。要调试或添加断点，请单击代码旁边的左列...会出现一个蓝色箭头...表示您已包含断点...

关于如何使用调试器的一个很好的视频是：[http](http://www.youtube.com/watch?v=Jz1DPud2xyw&feature=BFa&list=UUxlA2SyrGc8vv8wAPknLB7w) ://www.youtube.com/watch?v=Jz1DPud2xyw&feature=BFa&list=UUxlA2SyrGc8vv8wAPknLB7w 。观看它...非常有用...

# php - Laravel 奇怪的 Eloquent 错误

> ID：13210283
> 
> 赞同：2
> 
> 时间：2012-11-03T14:56:44.090
> 
> 标签：php, laravel, eloquent

我在这段代码中找不到问题。

```
public function dovoljenjaZaposlenega($id)
     {  
        echo Dovoljenja::find($id)->naziv;
     } 
```

当我这样做时，我收到以下**错误**：

```
Trying to get property of non-object 
```

但是当我只是回显**$id**时，它正在工作

```
public function dovoljenjaZaposlenega($id)
          { 
           echo $id;
          } 
```

但更奇怪的是，如果我用实际数字替换 $id 它又可以工作了..

```
public function dovoljenjaZaposlenega($id)
     {  
        echo Dovoljenja::find(2)->naziv; // Some number..
     } 
```

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-03T15:13:15.410

没有错..你只需要基本上检查错误。如果存在`Dovoljenja::find($id);`，只会返回一个对象`$id`

尝试使用 id`2`和`4`

```
function dovoljenjaZaposlenega($id) {
    $find = Dovoljenja::find($id);
    $find = is_object($find) ? $find->naziv : "Am empty";
    echo $find;
} 
```

# algorithm - 在整数中找到不同方程数的最快方法是什么？

> ID：13210284
> 
> 赞同：4
> 
> 时间：2012-11-03T14:56:53.173
> 
> 标签：algorithm

方程看起来像这样：

**x1 + x2 + x3 + x4 + ... + xk = n**

和 ( **0 <= n <= 1000, 0 < k <=1000** )

例子：

```
n=3 and k=2

3+0=3 2+1=3
0+3=3 1+2=3

output: 4 // count of equations 
```

我想不出任何东西，即使是最糟糕的 100 循环方式来做到这一点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-03T19:51:57.933

这听起来像[第二个星条定理](http://en.wikipedia.org/wiki/Stars_and_bars_%28combinatorics%29)。

> 对于任何一对自然数*k*和*n ，其和为**n*的非负整数的不同*k*元组的数量由二项式系数 ( ^(k + n - 1) [n] ) 给出...

 *（我已经从维基百科的描述中交换了*n*和*k*以匹配您的问题。）

因此，在您给出的 n=3 和 k=2 的示例中，答案是[( ^(2 + 3 - 1) [3] ) = ( ⁴ [3] ) = 4！/ ((4 - 3)! × 3!) = 4](http://www.wolframalpha.com/input/?i=4%20choose%203)。

因此，如果您预先缓存阶乘值，您应该能够对*k*和*n*的任何值快速进行计算。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-03T15:02:01.873

```
n = 0 -> 1
k = 1 -> 1
k = 2 -> n + 1
k > 2 -> func(n, k - 1) + func(n - 1, k - 1) + .... + func(0, k - 1)
      // 0 + ...          1 + ...                     n + 0 + ... + 0 
```

因此，递归地做......

```
int func(int n, int k) {
    assert (n >= 0);
    assert (k > 0);
    if (n == 0 || k == 1) {
        return 1;
    }
    else if (k == 2) {
        return n + 1;
    }
    else {
        int sum = 0;
        for (int i = 0; i <= n; i++) {
            sum += func(i, k - 1);
        }
        return sum;
    }
} 
```

消除冗余计算

```
int result[NMAX + 1][KMAX + 1] = {0};
int func(int n, int k) {
    assert (n >= 0);
    assert (k > 0);
    if (n == 0 || k == 1) {
        return 1;
    }
    else if (k == 2) {
        return n + 1;
    }
    else if (result[n][k] != 0) {
        return result[n][k];
    }
    else {
        int sum = 0;
        for (int i = 0; i <= n; i++) {
            sum += func(i, k - 1);
        }
        result[n][k] = sum;
        return sum;
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-05T07:04:41.943

这更像是一道数学题。
假设您有 k-1 |s 和 n 个 Os。|s 将这些 Os 分成 k 个分区。例如，如果 k = 3 和 n = 8，它可能会像这样拆分

```
O O O | O | O O O O 
```

第一个分区x1有3个O，第二个分区x2有1个O，x3有4个O，即3 + 1 + 4 = 8。所以方程的个数就是|s和O的组合数，或者C(k + n - 1, n)。*

# android - 在android上启用和控制鼠标光标

> ID：13210286
> 
> 赞同：5
> 
> 时间：2012-11-03T14:57:01.410
> 
> 标签：android, android-input-method

我正在寻找一种在 android 上启用鼠标光标并通过代码控制移动的方法。与通过 USB-OTG 插入鼠标时相同 - 但无需这样做。是否有任何 API 或其他方法可以做到这一点？

# ruby - Ruby DSL 的块状参数

> ID：13210291
> 
> 赞同：1
> 
> 时间：2012-11-03T14:57:26.000
> 
> 标签：ruby, dsl

我有一个红宝石代码，目前看起来像这样：

```
grades.sum{|g| g.grade * g.weight} 
```

对于用户维护的 DSL，我想实现这样的东西：

```
grades.sum('grade' * 'weight') 
```

这可能吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-03T15:28:04.453

不，这是不可能的，除非您对类进行猴子补丁`String`以添加您的应用程序逻辑（请不要这样做）。但是，如果您稍微玩一下，这 - 甚至看起来更好 - 是可能的`instance_eval`：

```
grades.sum { grade * weight } 
```

例如，假设`grades`是一个数组：

```
module Enumerable
  def sum(&block)
    inject(0) { |acc, x| acc + x.instance_eval(&block) }
  end
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-03T15:28:42.153

严格来说，不，因为 Ruby 解释器会尝试将字符串“grade”和“weight”相乘，然后将它们作为参数传递给“sum”。您可以通过monkeypatching String 来覆盖您想要允许的所有操作来实现它，但这是一个糟糕的想法，将成为维护的噩梦。

现在，也就是说，您有几种方法可以实现这一目标。如果您需要一个完整的字符串作为参数：

```
grades.sum('grade * weight') 
```

然后，您可以在传递给的值的上下文中使用`instance_eval`该`eval`代码`#sum`。实现看起来像：

```
class Grade
  def weight
    0.5
  end

  def grade
    75
  end
end

class Array
  def sum(code = nil)
    if block_given?
      inject(0) {|s, v| s + yield(v) }
    else
      sum {|v| v.instance_eval code }
    end
  end
end

grades = Array.new(5, Grade.new)
puts grades.sum("weight * grade")

# Expected output: 5 * 75 * 0.5 = 187.5
#
# Actual output:
# % ruby grades.rb
# 187.5 
```

这也保留了您的原始块形式：

```
puts grades.sum {|g| g.weight * g.grade } # => 187.5 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-03T18:13:55.327

您可能想看看[这个 SO question](https://stackoverflow.com/questions/10058996)和[Niklas B 的这段代码](https://github.com/niklasb/ruby-dynamic-binding)。

# php - Yii 从 Yii::app->user 访问关系数据

> ID：13210292
> 
> 赞同：2
> 
> 时间：2012-11-03T14:57:29.470
> 
> 标签：php, yii

**我想知道这是否可能，或者是否有更简单的方法来做到这一点。**

在我想使用关系数据的许多页面上，现在我使用它的每个页面我都放置以下代码：

```
<?php
    if(!Yii::app()->user->isGuest){
        $user = User::model()->findByPk(Yii::app()->user->id);
    }
?> 
```

所以我可以在视图中使用以下内容：

```
$user->account->name 
```

显示当前用户相关帐户的名称

如果我能做到以下几点就好了：

```
Yii::app->user->account->name 
```

设置状态不是我要寻找的，因为它不仅是我要使用的帐户名称，而且我不想为我可能要使用的所有关系数据添加状态。

```
 Solution

 |
 |
 |
 V 
```

**解决方案**

我结合了两个答案的优点来创建以下内容：

```
class WebUser extends CWebUser {
private $_user;

public function getAccount(){
    if(!$this->isGuest && (!isset($this->_user) || Yii::app()->user->id != $this->_user->id)){
        $this->_user = User::model()->findByPk(Yii::app()->user->id);
    }
    if(!empty($this->_user)){
        return $this->_user->account;
    } else {
        return false;
    }

  }
} 
```

所以现在我可以使用以下内容：

```
Yii::app()->user->account->name 
```

如果用户已登录并且没有存储数据或用户具有不同的 id，则上述方法会检索数据。

将它放在组件中，并确保将 Afnan 谈到的部分添加到配置 (main.php)

*我接受阿夫南的回答，因为它对我帮助最大（我需要知道的部分）*

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-03T19:53:43.610

好吧，我不知道这是否是最好的解决方案，但我通常通过扩展来做这样的事情`CWebUser`

我要做的是在扩展的组件文件夹中创建文件`CWebUser`

```
class CWebUserExtend extends CWebUser
{
    /**
     *
     * @return the type of user based on forien key of UserType
     */
    public function getUserAccname()
    {
        $user = User::model()->findByPk(yii::app()->user->id);
        if ($user === null)
            return 'error';            
        else
            return $user->account->name;            
    }
} 
```

并在 main.php 文件中以下列方式修改“用户”索引

```
'user'=>array(
            // enable cookie-based authentication
            'allowAutoLogin'=>true,
                        'class'=>'CWebUserExtend',//class that extends CWebUser
        ), 
```

这将允许您做某事

```
Yii::app()->user->getUserAccname(); 
```

希望能帮助到你

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-03T23:58:45.980

类似于 Afnan 的答案，但只是我的 2 美分。我像 Afnan 建议的那样扩展了 webuser 类，但也有一个`account`用于数据库访问和模型规则的模型。我通过在我的`ExWebUser`班级上有一个函数来访问它：

```
public function getAccount(){
    return Account::model()->findByPk($this->id);
} 
```

如果您有很多事情要做，这使我可以使用它来访问它，`Yii::app()->user->account->name`这比每个操作都有一个方法要干净得多。

*PS*
这显然可以通过将结果缓存在扩展类的私有变量中并可能在`init()`方法上预加载来大大改善。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-27T15:21:29.647

谢谢您的帮助 ！我刚刚注意到我必须将您的代码更改为：

```
class WebUser extends CWebUser {
private $_user;

public function getAccount(){
    if(!$this->isGuest && (!isset($this->_user) || Yii::app()->user->id != $this->_user->id)){
        $this->_user = User::model()->findByPk(Yii::app()->user->id);
    }
    if(!empty($this->_user)){
        return $this->_user;
    } else {
        return false;
    }

  }
} 
```

我只返回`$this->_user`访问我的用户属性，例如`Yii::app()->user->account->name`

# java - 如何检测字节数组中的特殊字符，如 ^A

> ID：13210293
> 
> 赞同：0
> 
> 时间：2012-11-03T14:57:30.100
> 
> 标签：java, bytearray, special-characters

由 ^A 等特殊字符组成的文件存储在字节数组中。如何检测这些特殊字符并删除它们？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-03T15:02:01.717

如果您不使用花哨的编码，所有大写字母的值都在 65 到 90 之间，所有小写字母的值都在 97 到 122 之间。（参见[ASCII 编码](http://www.asciitable.com/)）。所有具有其他值的字节都不是字母表中的字母。

# php - 用于识别文件名中的空格的正则表达式

> ID：13210297
> 
> 赞同：0
> 
> 时间：2012-11-03T14:57:44.767
> 
> 标签：php

我想使用正则表达式来识别 .pdf 文件名中的空格

到目前为止，我已经能够识别到文件的 src 链接，但它无法识别文件名中的空格。

```
 <?php
   echo "<h1>Reading content from ITM website!</h1>";
   $ch = curl_init("http://domain.edu/index.php?option=com_content&view=article&id=58&Itemid=375&alias=lms");
   $fp = fopen("example_homepage.txt", "w");

   curl_setopt($ch, CURLOPT_FILE, $fp);
   curl_setopt($ch, CURLOPT_HEADER, 0);

   curl_exec($ch);
   curl_close($ch);
   $my_file="example_homepage.txt";
   $handle = fopen($my_file, 'rb');
   $data = fread($handle,filesize($my_file));

   $contents = strstr(file_get_contents('example_homepage.txt'), 'More quick links');
   $new_content = str_replace('<a href="', '<a href="http://www.domain.edu', $contents);
   $regex = '@((https?://)?([-\w]+\.[-\w\.]+)+\w(:\d+)?(/([-\w/_\.\,]*(\?\S+)?)?)*)@';
   $text = preg_replace($regex, '<a href="$1">$1</a>', $new_content);
   //echo $new_content;
   echo $text;
   fclose($fp);
   ?> 
```

电流输出：

```
http://www.domain.edu/academiccalendar/Notice for final practical.pdf" target="_blank">Title 
```

在此“最终实用.pdf 的通知”中，不显示为 URL，而仅显示为文本。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-03T15:18:49.010

真的，您不应该使用正则表达式进行屏幕抓取。它很慢，最终会破裂。相反，使用 DOM 解析器或简单的[DOMDocument](http://php.net/manual/en/class.domdocument.php)

```
<?php 
//curl bit
$curl = curl_init();
curl_setopt($curl, CURLOPT_URL, "http://itmindia.edu/index.php?option=com_content&view=article&id=58&Itemid=375&alias=lms");
curl_setopt($curl, CURLOPT_HEADER, 0);
curl_setopt($curl, CURLOPT_RETURNTRANSFER, true);
curl_setopt($curl, CURLOPT_FOLLOWLOCATION, true);
curl_setopt($curl, CURLOPT_TIMEOUT, 30);
$site = curl_exec($curl);
curl_close($curl);

$dom = new DOMDocument();
@$dom->loadHTML($site);

$ret=array();
foreach($dom->getElementsByTagName('a') as $links) {
    //Is pdf
    if(substr($links->getAttribute('href'),-3) == 'pdf'){
        //Assign
        $url   = $links->getAttribute('href');
        $title = trim($links->nodeValue);
        $ret[]=array('url'=>'http://itmindia.edu'.$url,
                     'title'=>(empty($title)?basename($url):$title));
    }
}

print_r($ret);
/* Result
Array
(
    [0] => Array
        (
            [url] => http://itmindia.edu/images/ITM/pdf/ITMU bro june.pdf
            [title] => ITMU Brochure
        )

    [1] => Array
        (
            [url] => http://itmindia.edu/images/ITM/pdf/Report_2012_LR.pdf
            [title] => Annual Report to UGC July 2012
        )

    [2] => Array
        (
            [url] => http://itmindia.edu/admission2012/PhDwinter/Ph. D. application form 2012-13 for dec 2012 admission.pdf
            [title] => Application Form
        )

    [3] => Array
        (
            [url] => http://itmindia.edu/admission2012/PhDwinter/UF_Application_Form.pdf
            [title] => University Fellowship Form
        )
        ...
        ...
*/

//Then to output
foreach($ret as $v){
    echo '<a href="'.$v['url'].'" target="_blank">'.$v['title'].'</a>';
}
?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-03T15:37:36.053

所有你需要的是

```
echo "<h1>Reading content from ITM website!</h1>";
$ch = curl_init("http://itmindia.edu/index.php?option=com_content&view=article&id=58&Itemid=375&alias=lms");
curl_setopt($ch, CURLOPT_HEADER, 0);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
$result = curl_exec($ch);
curl_close($ch);

libxml_use_internal_errors(true);
$dom = new DOMDocument();
$dom->loadHTML($result);
foreach ( $dom->getElementsByTagName('a') as $links ) {
    if (pathinfo($links->getAttribute('href'), PATHINFO_EXTENSION) == "pdf") {
        printf("<a href=\"http://itmindia.edu/%s\">%s</a><br />", $links->getAttribute('href'), $links->nodeValue);
    }
} 
```

# css - 当我点击链接时，Css 没有正确加载

> ID：13210298
> 
> 赞同：3
> 
> 时间：2012-11-03T14:57:50.753
> 
> 标签：css, html

我的 CSS 有问题。

在主页上它加载正常，但是当我转到我网站上的链接时，css 无法正确加载。所以基本上下面的代码在 index.html 上可以正常工作，但是当我转到下面指示的任何链接时，它就会出错。

所有链接都有完全相同的代码，所以我不明白为什么它不起作用。

这是我的源代码：

```
<!--
To change this template, choose Tools | Templates
and open the template in the editor.
-->
<!DOCTYPE html>
<html>
    <head>
        <title></title>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <LINK href="styles.css" rel="stylesheet" type="text/css">
    </head>
    <body>
            <div id ="leftcol">
                <a href="content/practice.html"><div class ="left-column-item">Practice!</div></a>
                <a href="content/AboutUs.html"><div class ="left-column-item">About Us!</div></a>
                <a href="content/contactUs.html"><div class ="left-column-item">Contact Us!</div></a>
            </div>
        <div id="left-placeholder"></div>
        <div id ="left-pusher"></div>
        <div id ="content">Math Practice Site <br> hello</div>
    </body>
</html>

//the css file:

/* 
    Document   : styles
    Created on : Nov 2, 2012, 11:50:48 PM
    Author     : me
    Description:
        Purpose of the stylesheet follows.
*/

root { 
    display: block;
}
#leftcol a{text-decoration: none;}
#leftcol{   
    left: 10%;
    width: 200px;
    height: 100%;
    margin-top: 0px;
    position: absolute;
    opacity:0.6;
    color: white;
    font-size: 2em;
}
#left-placeholder{
    height: 100%;
    width: 10%;
    float: left;
}
#left-pusher{
    height: 100%;
    width: 200px;
    float: left;
}
.left-column-item{
    background: url('images/bgnav.jpg');
    height: 33.334%;
    background-size: 100%;
    opacity:0.6;
    color: white;
}
.left-column-item:hover{
    background: url('images/bgnav.jpg');
    height: 33.334%;
    background-size: 100%;
    opacity: 1;
}
#content{
    text-align: center;
    color: white;
    font-size: 5em;
    height: 100%;
    width: 70%;
    float:left;
}

body{
    background: url('images/background.jpg');
    background-size: 100%;
    margin: 0;
    min-height: 100%;
    width: 100%}
html, body
{
    height: 100%;
} 
```

这是我的练习页面：

```
<!DOCTYPE html>
<html>
    <head>
        <title></title>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <LINK href="../styles.css" rel="stylesheet" type="text/css">
        <script type ="text/javascript">

        </script>
    </head>
    <body>
            <div id ="leftcol">
                <a href="practice.html"><div class ="left-column-item">Practice!</div></a>
                <a href="aboutUs.html"><div class ="left-column-item">About Us!</div></a>
                <a href="contactUs.html"><div class ="left-column-item">Contact Us!</div></a>
            </div>
        <div id="left-placeholder"></div>
        <div id ="left-pusher"></div>
        <div id ="content">Practice!</div>
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T15:05:34.647

您的 css 文件未使用绝对路径。如果您的链接在您网站的子文件夹中，则 css 路径不再正确。

因此，假设您的 css 文件位于站点的根目录，将 HTML 更改为以下内容：

```
<LINK href="/styles.css" rel="stylesheet" type="text/css"> 
```

那应该可以解决问题。

**编辑** 我知道你说一切都很好，但是你正在使用你的 CSS 的相对路径，所以你很可能有 2 个版本的 css 文件 - 一个是正确的，另一个不完全相同，这可以解释对于“错误加载”css文件。您可以通过使用基于根路径的正确 css 文件位置来完全消除这种可能性。如果有的话，我*至少*会从那里开始控制局势。如果**仍然**存在问题，那么您至少可以知道您已经消除了这种可能性 - 并且考虑到这里的大多数答案*都*指向同一个问题，我不得不说这是最有可能的罪魁祸首。

此外，您的练习页面使用

```
<LINK href="../styles.css" rel="stylesheet" type="text/css"> 
```

因此，除非您的练习页面位于帖子第一页的子文件夹中，否则这两个页面不会使用相同的 css 文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-03T15:36:08.083

最可能的原因是您没有在 HTML`<link>`标记中使用相对路径。

因此，当您的 HTML 代码被调用以响应单击您的链接时，我希望它会将您带到另一个目录并且它不再能够找到您的 css。

使用 ../ 表示法指定相对路径。这意味着浏览器从您现在所在的位置向下查看一个目录级别，以找到在 ../ 之后指定的文件和目录组合

例如考虑以下结构：

```
root
  _public
     _admin
         myTest.html
     _css
         myTestStyles.css 
```

myTest.html 中的链接语句将是

```
<link href="../_css/myTestStyles.css" rel="stylesheet" type="text/css"/> 
```

笔记

../../ 表示开始往下看 2 个级别等。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-03T15:06:36.443

你的路径是错误的。因为`index.html`它在根目录中查找 css。当您转到 时`content/`，它会在`content/`.

使用绝对路径，或`../styles.css`用于第一级子目录中的那些文件。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-03T15:09:40.177

这是一个简单的错误。当您单击链接时，它基本上会进入“内容”文件夹并打开其中一个 html 文件，但您的 css 文件位于根文件夹中。因此，在内容文件夹中，您需要更改每个文件的 css 路径。

所以，去内容文件夹

*代替*

```
 styles.css 
```

*和*

```
 ../styles.css 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-03T15:11:48.887

css 未加载的原因是浏览器无法从`content/`您的 html 所在的文件夹中找到它。

您可以在子文件夹中的 html 文件中使用相对路径，如下所示

```
<LINK href="../styles.css" rel="stylesheet" type="text/css"> 
```

您还可以定义`base href`所有链接引用的位置。这可能会导致其他链接的行为有所不同，因此如果需要，请修复它们

```
<head>
<base href="http://www.myawesomesite.com/">
</head>
<LINK href="styles.css" rel="stylesheet" type="text/css"> 
```

设置基本 href 后，无论您的 html 文件在哪里，浏览器都会始终将该链接指向 www.myawesomesite.com/styles.css。

# ios - 是否允许继承 TWTweetComposeViewController？我在 ios 6.0 上崩溃了

> ID：13210303
> 
> 赞同：0
> 
> 时间：2012-11-03T14:58:26.450
> 
> 标签：ios, twitter, crash, selector

我的应用程序可以在 5.1 (ipad) 的设备上运行。但它在 6.0 模拟器上崩溃了。请查看错误。

```
@interface TwitterViewController : TWTweetComposeViewController

@property (weak, nonatomic) id<TwitterVCDelegate> delegateTwitter;

@end 
```

//在 QuotesVC 中我调用

```
TwitterViewController *tweetVC = [[TwitterViewController alloc] init];
tweetVC.delegateTwitter = self;
[tweetVC postWithQuote:[quotesArray objectAtIndex:currentIndex]]; 
```

// 我的应用程序崩溃了

```
-[SLTwitterComposeViewController setDelegateTwitter:]: unrecognized selector sent to instance 0xa8d1bb0
 *** Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '-[SLTwitterComposeViewController setDelegateTwitter:]: unrecognized selector sent to instance 0xa8d1bb0'
 libc++abi.dylib: terminate called throwing an exception 
```

**编辑**如果我不继承 TWTweetComposeViewController，一切都很好。

```
 TWTweetComposeViewController *tweetSheet =
    [[TWTweetComposeViewController alloc] init];
    [tweetSheet setInitialText:@"Initial Tweet Text!"];
    [self presentModalViewController:tweetSheet animated:YES]; 
```

我在 ipad 设备 5.1 和 ios 模拟器 6.0 上测试了这段代码。它运作良好。

***是否允许继承 TWTweetComposeViewController？***

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T06:17:51.290

在我看来，iOS 6 隐式转换`TWTweetComposeViewController`为`SLTwitterComposeViewController`. `SLTwitterComposeViewController`没有任何`setDelegateTwitter:`方法。这就是发生错误的原因。

恕我直言

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-03T15:41:57.980

您的代码将在 iOS 5 版本中运行。因为你已经包含了**twitter.framework**并且它将被替换为**social.framework**。**所以你需要检查设备是 iOS 6 还是 5**。这是一个为 iOS 5 和 iOS 6 版本集成 twitter 的链接。

[iOS 6 社交框架](http://www.techotopia.com/index.php/Integrating_Twitter_and_Facebook_into_iPhone_iOS_6_Applications)

[iOS 5 推特框架](http://www.raywenderlich.com/5519/beginning-twitter-in-ios-5)

# xcode - 更新关于第一个选择的第二个表视图

> ID：13210305
> 
> 赞同：1
> 
> 时间：2012-11-03T14:58:30.973
> 
> 标签：xcode, uitableview

我希望为 ios 创建一个基本程序，该程序在一个视图中使用数据数组和 2 个 UITableView。我希望第二个 UITableView 由一个数组填充，该数组基于第一个表中所做的选择。我有第二个表的数组数组。当我单击 table1 的第一个单元格时，所需的数据将显示在 table2 中。但是当我单击 table1 的第二个单元格时，我得到了错误。“索引 1 越界”

```
-(void)viewWillAppear:(BOOL)animated{
 [super viewWillAppear:animated];
 NSString *jsonString = [NSString stringWithContentsOfURL:[NSURL URLWithString:@"http:/url.com/technology"] encoding:NSStringEncodingConversionAllowLossy error:nil];
NSString *jsonString1 = [NSString stringWithContentsOfURL:[NSURL  URLWithString:@"http://url.com/experience1"] encoding:NSStringEncodingConversionAllowLossy error:nil];
NSString *jsonString2 = [NSString stringWithContentsOfURL:[NSURL URLWithString:@"http:url.com/experirnce2"] encoding:NSStringEncodingConversionAllowLossy error:nil];

SBJSON *parser = [[SBJSON alloc]init];
SBJSON *parser1 = [[SBJSON alloc]init];
SBJSON *parser2 = [[SBJSON alloc]init];

 NSDictionary *results = [parser objectWithString:jsonString error:nil];
[parser release], parser = nil;
    NSDictionary *results1 = [parser1 objectWithString:jsonString1 error:nil];
    NSDictionary *results2 = [parser2 objectWithString:jsonString2 error:nil];
[parser release], parser = nil;
[parser1 release], parser1 = nil;
[parser2 release], parser2 = nil;

self.technologyArray = [results objectForKey:@"response"];
self.technologyData = [technologyArray valueForKey:@"technologyname"];
self.experienceArray1 = [results1 objectForKey:@"response"];
self.experienceData1 = [experienceArray1 valueForKey:@"experiencename"];
self.experienceArray2 = [results2 objectForKey:@"response"];
self.experienceData2 = [experienceArray2 valueForKey:@"experiencename"];
experience = [[NSMutableArray alloc]initWithObjects:experienceData1, experienceData2, nil];

}

-(NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
if (tableView == technologyTable)
return [technologyData count];

else {
return [experience count];
}

 }

 -(UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
static NSString *CellIdentifier = @"Cell";

UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
if (cell == nil) {
// Change UITableViewCellStyle
cell = [[[UITableViewCell alloc] 
     initWithStyle:UITableViewCellStyleSubtitle 
     reuseIdentifier:CellIdentifier] autorelease];
 }

if (tableView == technologyTable)
{

cell.textLabel.text=[technologyData objectAtIndex:indexPath.row];

} 

if (tableView == experienceTable)
{
 cell.textLabel.text = [[experience  objectAtIndex:indexPath.row]objectAtIndex:indexPath.row];
[experienceTable reloadData];

}
return cell ;

}

- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
 if (tableView == technologyTable)
{

experienceTable = [[experience objectAtIndex:indexPath.row] objectAtIndex:indexPath.row];

 selectTechnology.text = [technologyData objectAtIndex:indexPath.row];

 self.technologyList.hidden = YES;

}
 if(tableView == experienceTable)
 {
 self.experienceList.hidden = YES;
 selectExperience.text = [[experience objectAtIndex:1] objectAtIndex:indexPath.row];
 }
 [experience release ];

  } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-03T15:06:40.323

我将为 2 个表使用 2 个不同的委托和数据源。在第一个表中选择后，其代表将发送第二个表的代表将监听的通知。当第二个表的代理收到通知时，它会设置自己显示适当的数据（经验数组和数据 1 或 2），然后调用`[table2 reloadData]`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-03T15:08:32.623

`cellForRowAtIndexPath`您需要确定在第一个 tableview 中选择了哪一行（您可以将选择保存在 ivar 中），然后在第二个 tableview 中显示相应数组中的值。在用户从第一个表中选择一个值后，您需要调用 [experienceTable reloadData]。

像这样的东西：

```
- (void)tableView:(UITableView*)tableView didSelectRowAtIndexPath:(NSIndexPath*)indexPath
{
    if (tableView == technologyTable)
    {
        selectedTechnology = indexPath.row;
        [experienceTable reloadData];
    }
} 
```

接着：

```
-(UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    ...

    if (tableView == experienceTable)
    {
        cell.textLabel.text = experience[selectedTechnology][indexPath.row];
    }
} 
```

# android - 使文件扩展名可下载

> ID：13210308
> 
> 赞同：1
> 
> 时间：2012-11-03T14:58:57.540
> 
> 标签：android, android-intent

我正在编写一个`.xyz`将从 Internet 导入文件的应用程序。我知道通过添加到 AndroidManifest.xml 类似：

```
 <intent-filter>
            <action android:name="android.intent.action.VIEW" />
            <category android:name="android.intent.category.BROWSABLE" />
            <category android:name="android.intent.category.DEFAULT" />
            <data android:scheme="http" />
            <data android:scheme="https" />
            <data android:host="*" />
            <data android:pathPattern=".*\\.xyz" />
            <data android:pathPattern=".*\\..*\\.xyz" />
            <data android:pathPattern=".*\\..*\\..*\\.xyz" />
            <data android:pathPattern=".*\\..*\\..*\\..*\\.xyz" />
            <data android:pathPattern=".*\\..*\\..*\\..*\\..*\\.xyz" />
            <data android:pathPattern=".*\\..*\\..*\\..*\\..*\\..*\\.xyz" />
          </intent-filter> 
```

我可以为用户提供一个选择，无论他是想`.xyz`通过我的应用程序还是在浏览器中打开文件，只要他单击此类文件的链接。

使用：

```
 <intent-filter>
            <action android:name="android.intent.action.VIEW" />
            <category android:name="android.intent.category.DEFAULT" />
            <category android:name="android.intent.category.ALTERNATIVE"/>
            <data android:scheme="file" />
            <data android:host="*" />
            <data android:mimeType="*/*" />
            <data android:pathPattern=".*\\.xyz" />
            <data android:pathPattern=".*\\..*\\.xyz" />
            <data android:pathPattern=".*\\..*\\..*\\.xyz" />
            <data android:pathPattern=".*\\..*\\..*\\..*\\.xyz" />
            <data android:pathPattern=".*\\..*\\..*\\..*\\..*\\.xyz" />
            <data android:pathPattern=".*\\..*\\..*\\..*\\..*\\..*\\.xyz" />
          </intent-filter> 
```

我可以让用户在浏览他的本地文件时有类似的选择。

我希望 Android（不是我的应用程序）从网络上下载任何此类文件，并且只让用户选择从他的文件资源管理器中打开本地文件。但是，当我省略第一个代码块而只使用第二个代码块时，我的下载会失败，因为 Android 认为没有可以处理`.xyz`文件的应用程序。任何指针？

# delphi - TPanel 透明

> ID：13210310
> 
> 赞同：8
> 
> 时间：2012-11-03T14:59:16.027
> 
> 标签：delphi, delphi-xe2

我需要在我的表单中使用透明的 tpanel。谁能给我推荐一个好的组件，可能是免费的？如果不是很长，可以发布代码或一些关于它的链接吗？非常感谢。马塞洛。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-03T21:57:44.253

您可以尝试下载 Jedi 组件库，并查看 TjvTransparentPanel 组件，安装该组件库后，您可以在“Jv Additional”选项卡下找到它。

[http://www.delphipages.com/forum/showthread.php?t=187137](http://www.delphipages.com/forum/showthread.php?t=187137)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-10-26T00:51:33.407

创建一个组件并覆盖 Paint 方法和其他一些东西：没有边框或标题，但它是一个功能面板。内部的任何组件也需要透明。祝你好运。

```
unit PanelTransparent;

interface

uses
  Windows, Messages, SysUtils, Classes, Graphics, Controls, Forms, Dialogs,
  ExtCtrls;

type
  TPanelTransparent = class (TPanel)
  private
    procedure CnCtlColorStatic (var Msg: TWMCtlColorStatic); message CN_CTLCOLORSTATIC;
    procedure WmEraseBkgnd (var Msg: TWMEraseBkgnd); message WM_ERASEBKGND;
    procedure Paint; override;
  protected
    procedure CreateParams (var Params: TCreateParams); override;
  end;

procedure Register;

implementation

procedure Register;
  begin
    RegisterComponents ('AppMic', [TPanelTransparent]);
  end;

procedure TPanelTransparent.CreateParams (var Params: TCreateParams);
  begin
    inherited CreateParams(Params);
    Params.ExStyle := Params.ExStyle or WS_EX_TRANSPARENT;
  end;

procedure TPanelTransparent.WmEraseBkgnd(var Msg: TWMEraseBkgnd);
  begin
    Msg.Result := 1;
  end;

procedure TPanelTransparent.CnCtlColorStatic(var Msg: TWMCtlColorStatic);
  begin
    SetBKMode (Msg.ChildDC, TRANSPARENT);
    Msg.Result := GetStockObject (NULL_BRUSH);
  end;

procedure TPanelTransparent.Paint;
  begin
    SetBKMode (Handle, TRANSPARENT);
    //inherited;
  end;

end. 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-03-11T19:41:50.730

为什么不使用 TBevel，并将形状设置为 bsSpacer、bsBox 或其中一条线？如果边界的性质不是问题，您可能会发现这已经解决了您的问题。

# jquery - jQuery body 调整大小监听器

> ID：13210313
> 
> 赞同：0
> 
> 时间：2012-11-03T14:59:35.240
> 
> 标签：jquery, resize, listener

我正在寻找一个听众来调整身体大小。我需要与身体类似的东西`$(window).resize()`。

为什么我的身体需要它？我使用 ajax 添加内容，它可能会改变正文大小（取决于用户的分辨率）。

我怎样才能让身体调整大小的听众/我在哪里可以找到一个？

**编辑：**
除了 ajax，我有手风琴。
每个项目都有不同的高度，因此会导致身体调整大小......

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-04T15:17:11.793

没有可靠的方法来收听身体调整大小，但是您可以收听手风琴中发生的动画。有两种方法可以做到这一点，但其中一种更酷。

在您的手风琴脚本的某个地方，您有一个 jQuery`.animate`语句。如果您不使用并且正在使用类似`.show(200)`or的快捷方式`.fadeIn`，则需要将其转换为`.animate`语句。`.animate`无论如何，所有这些命令实际上只是快捷方式。如果您正在使用`slideUp`和`slideDown`。初始化滑块以供以后使用时，您必须保存元素的高度（顺便说一句，这是 jQuery 在幕后所做的）。

接下来，您将要使用 .animate 的 step 属性来监听滚动条的存在：

```
 $(accordionSlideToShow).animate({
        height : 200
        step : function(){
            //scrollbar checking and css control script here
        }
  }, 2000); 
```

但是如果你想要更酷，你可以在你的小部件中添加自定义事件。通过这种方式，未来的开发可以作为免费功能与这些事件联系起来。

```
 $(accordionSlideToShow).trigger('ron-accordion-slideWillShow').animate({
        height : 200
        step : function(){
             $(accordionParentElement).trigger('ron-accordion-animationOccurring');
        }
  }, 2000, function(){
      $(this).trigger('ron-accordion-slideDidShow');
  }); 
```

现在您可以绑定到您的小部件的新事件模型并监听动画和滚动条，如下所示：

```
 $(accordionInstance).on('ron-accordion-animationOccurring', function(){
       //test for scroll bars and add css if needed
  }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-03T16:50:04.037

当 body 元素改变大小时不会触发这样`resize`的事件 - 您可以分配一个`resize`事件处理程序，但这只会在窗口调整大小时触发。有几种方法可以逼近元素调整大小事件，但正如 Fresheyeball 所说，尝试从不同的角度解决问题可能会更好。话虽如此，您可以：

1.  创建一个经常调用的函数，该函数`setInterval`将密切关注主体的`width`/`height`或`scrollWitdth`/ `scrollHeight`，并在发生变化时触发一个方法。

2.  在支持此功能的浏览器中，您可以查看使用`DOMAttrModified`事件或可能使用`MutationObserver`. 但话又说回来，这些只得到一小部分用户代理的支持。

    *   [https://developer.mozilla.org/en-US/docs/DOM/Mutation_events](https://developer.mozilla.org/en-US/docs/DOM/Mutation_events)
    *   [https://developer.mozilla.org/en-US/docs/DOM/MutationObserver](https://developer.mozilla.org/en-US/docs/DOM/MutationObserver)

# flash - flash播放器到底是什么？

> ID：13210314
> 
> 赞同：2
> 
> 时间：2012-11-03T14:59:36.667
> 
> 标签：flash

我对闪存技术有点困惑。

要观看 Flash 视频，您需要在浏览器中安装从[get.adobe.com/flashplayer/获取的 Flash 播放器](http://get.adobe.com/flashplayer/)

要在您的网站上显示 Flash 视频，您需要一个用于网络的 Flash 播放器，例如 Flowplayer 或 JW Player。

为什么您的浏览器和网站都需要它？

换句话说，浏览器的 Flash 播放器是做什么的，而 Web 的 Flash 播放器是做什么的？

浏览器的 Flash 播放器是什么样的？（我假设它是一个插件，但它究竟是什么，浏览器的指令代码还是还有更多？）

网络的 Flash 播放器是什么样的？（它只是一个 swf 文件吗？这个文件里面有什么？）

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-03T21:19:51.880

Adobe Flash Player 的名称可能有点令人困惑，因为它并不是真正的播放器（不是像 VLC 或 Winamp 这样的媒体播放器），而是像 JVM（Java 虚拟机）或 CLR（公共语言运行时）这样的运行时。它带有一些能够播放视频的库，但这些库对于最终用户来说太低级了，无法观看视频。

从历史上看，对于那些从内部不熟悉该技术的人来说，Flash 一直与 You-Tube 相关联，因此流式传输视频，然而，它在一般技术中处于边缘地位。Flash 通常用于在网络上做许多其他事情，比如游戏或只是有用的互动事情，比如网上商店的更衣室或协作软件等。

用 Flash 编写视频播放器的方式与用 Java 或 C# 编写视频播放器的方式相同：您可以使用一些现成的组件或从头开始设计一个。

现在，已经有人尝试制作另一种（开源）Flash 播放器，较旧的是 Gnash，较新的是 Lightspark。目前，他们俩都做不了什么。也许，如果 Flash 技术能够度过危机，Lightspark 似乎是一个很有前途的项目。走着瞧...

ActionScript 是 Fl​​ash 编程的主要语言，就像 Java 对于 JVM 一样。但也有 Haxe，它可以编译成 Flash。还有一个称为 Alchemy 的交叉编译器项目，它可以编译任何可以编译为 LLVM 汇编器的语言，但实际上，主要是 C/C++。还有 OpenLazlo ......但我真的不知道它使用的是什么语言。

Flash 运行时可以以不同的方式分发。它可以是 NPAPI (Netscape Plugin API) 兼容插件（在 Mozilla 浏览器中运行的插件）、PPAPI 兼容插件（Pepper Plugin API，在 Google Chrome 中运行的插件）、ActiveX (Internet Explorer)。它可以是 Windows 或 OSX 的独立程序。Linux 存在独立版本，但最近已停产。Adobe 还停止了对 Linux 版本的 NPAPI 插件的支持。也有移动浏览器的播放器，但它们都在不同的时间停产。然而，独立版本已经发展成 AIR——这就是现代 Flash 在移动设备上的工作方式。AIR 也是适用于大多数台式机的版本（无 Linux，一年多前就停产了）。

Flash 播放器还有其他一些鲜为人知的用途。例如 Scaleform 是一个使用 Flash 播放器在 PC 游戏中渲染图形界面的项目。SWFStudio 和 MDM Zinc 是两家可以创建 OSX 和 Windows 程序的公司，它们嵌入了 Flash 播放器，并且可以与底层的原生应用程序互操作。.NET Framework 包含一个可用于开发 Windows.Forms 应用程序的 ActiveX（也可能是 WPF，但我从未尝试过）。从技术上讲，还应该可以通过绑定到它拥有的 WebKit 浏览器将 Flash 播放器（作为单独的安装）嵌入到基于 Qt 的应用程序中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-03T15:02:49.343

您提到的“浏览器播放器”是指下载链接提供的 Adob​​e Flash Player 插件。您的浏览器需要它来显示 SWF 文件。

您提到的“网络播放器”是指用 ActionScript 为 Flash Player 编写的特定视频播放器组件。此视频播放器需要浏览器的 Flash Player 插件才能运行和显示某种格式的视频，例如 FLV。如果您在另一个站点上观看视频，它将有自己的视频播放器来显示视频。一些著名的网络播放器示例是 YouTube 的 Flash 视频播放器和 FLV 播放器组件。

通常，术语“Flash Player”将指代插件，但有时也可能用于指代使用 Flash 制作的视频播放器组件。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-03T15:02:35.610

Flash 播放器是一个程序。可执行文件，如 Windows 上的 dll (exe)。指示浏览器使用此程序来呈现 SWF 文件。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-03T15:12:24.800

Adobe Flash Player 是用于在计算机 Web 浏览器或受支持的移动设备上查看多媒体、富 Internet 应用程序以及流式视频和音频的软件。Flash Player 运行可由 Adob​​e Flash 创作工具创建的 SWF 文件。

Flash Player 作为插件免费提供，适用于选定平台上最新版本的 Web 浏览器（例如 Internet Explorer、Mozilla Firefox、Opera 和 Safari）。Google Chrome 将播放器集成到发行版中。每个版本的插件都是向后兼容的。

# c - 可以在数组的索引之间交换内存地址吗？

> ID：13210317
> 
> 赞同：2
> 
> 时间：2012-11-03T14:59:52.187
> 
> 标签：c, algorithm, pointers, sorting

我没有太多管理指针和其他高级功能的经验，但我在想是否有可能制定一种算法来使用指针在数组的两个元素之间交换内存地址，而不是每次都复制和移动值（排序时的示例）。让我解释：

想象一下这个数组它有 10 个未排序的元素，我假装使用冒泡排序对其进行排序（以任何顺序），典型的方法是使用辅助变量来复制元素并在每次找到较小的元素时将其用作旁路或更大的数字（取决于降序或递增排序）。

```
 *----*----*----*----*----*----*----*----*----*----*
array[10] = | 45 | 21 | 32 | 48 | 32 | 22 | 47 | 10 | 11 | 12 |
            *----*----*----*----*----*----*----*----*----*----*
            ^----- Imagine this is 10000 
```

程序意识到数组[1]小于数组[0]，因此冒泡排序将使用辅助变量作为旁路交换它们的值（这是典型的方式）。

```
 *--------------* 
                   |              ^
                   |              |
            *--------------*--------------*----*----*----*----*----*----*
array[10] = |      45      |      21      | 32 | 22 | 47 | 10 | 11 | 12 |
            *--------------*--------------*----*----*----*----*----*----*
                   |              ^
                   |   *------*   |
                   *-->|BYPASS|---*
                       *------* 
```

所以不能说交换 &array[0] 和 &array[1] 地址之类的东西吗？所以我避免了次要变量？在这种情况下 &array[1] = 10000; 和 &array[0] = 10004。

感谢您的关注，所有的建议都是允许的！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T15:05:33.387

你可以这样做

```
 array[0] += array[1];
 array[1] = array[0] - array[1];
 array[0] -= array[1]; 
```

并且不使用第三个变量。

数组是一个连续的连续内存空间。您无法取消它的订购。它不是 LinkedList，您只需像这样交换指针。

# java - 使用 ThreadLocals 的 Akka 和 Java 库

> ID：13210318
> 
> 赞同：13
> 
> 时间：2012-11-03T14:59:59.163
> 
> 标签：java, message-queue, akka, thread-local, thread-local-storage

使我无法定期使用 Akka（在 Java 中）的原因是我对使用 ThreadLocals 的库感到担忧。

那就是我*认为*一些 Akka Dispatchers 可能会导致 ThreadLocal 变量被抛在后面，或者一起丢失。因此，显而易见的解决方案是避免使用**ThreadLocals**，但是有很多库使用它们：Spring、Wro4j、Log4j 等...

ThreadLocals 通常在 Servlet 容器中工作正常。那是因为即使容器有线程池，请求主要是一个同步生命周期，因此通常在请求结束时，像 Spring 和 Wro4J 之类的东西会清理那里的 threadlocals。像 Tomcat 这样的一些容器甚至可以监控线程本地泄漏。

据我了解，Akka 并非如此。

**人们如何绕过这个问题？**

现在我只是避免使用 Akka 并使用消息队列（如 RabbitMQ 或 ActiveMQ），但我想使用 Akka，因为它涵盖了更广泛的异步问题/解决方案。

我也认为 Netty 有类似的问题，但我相信 Netty 提供了某种 Channel Context 对象，您可以使用它来代替 ThreadLocal，并且理论上一些库可能知道使用它而不是 ThreadLocal。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-04T16:04:14.307

解决它的最简单方法是划定 ThreadLocals 的使用，因此您可以这样创建一个方法：

```
def withSecurityContext[T](thunk: => T)(implicit secCtx: SecurityContextFetcher): T = {
  val old = threadLocalSecurityContext.get
  threadLocalSecurityContext.set(secCtx.fetch)
  try thunk finally threadLocalSecurityContext.set(old)
} 
```

然后在你的演员或其他内部：

```
class MyActor extends Actor {
    def receive = {
      case "foo" => withSecurityContext { beAwesome() }
    }
} 
```

不过总的来说，我会避免使用 ThreadLocals，因为它们并没有真正融入分布式系统。它们只在明确划分的部分工作。

# android - 如何在蓝牙 API 中使用 isConnected？

> ID：13210320
> 
> 赞同：1
> 
> 时间：2012-11-03T15:00:03.027
> 
> 标签：android, bluetooth

蓝牙 API 状态有方法调用“isConnected()”，但是当我使用它时，它显示错误，表示此方法未定义用于蓝牙套接字。有专家可以指出应该如何使用“isConnected”吗？

这是代码：

```
do
{
    count++;
    if (m_btSck.isConnected())
        break;
} while ((Connect(m_nRoboDev)!=0) && (count <15)); 
```

# jsf - 屏幕分辨率参数设置、会话 bean 和 JSF Phase Listener

> ID：13210323
> 
> 赞同：1
> 
> 时间：2012-11-03T15:00:20.560
> 
> 标签：jsf, session, servlets, javabeans, phase

我目前面临以下问题，如果有人可以帮助我，我将不胜感激。我对JSF很陌生...

我有一个具有以下体系结构的 JSF 应用程序： 主 index.html 站点包含一个 Javascript，它使用用户屏幕分辨率参数打开一个 XMLHttpRequest 到一个 servlet。servlet 接收请求，提取屏幕分辨率参数并将其发送到会话 bean 对象：

```
String wth = request.getParameter("width");
String hgt = request.getParameter("heigh");
HttpSession session = request.getSession(true);
Object o = session.getAttribute("mainSessionBean");
MainSessionBean mainSessionBean = (MainSessionBean) o;
mainSessionBean.setScreenWidth(wth);
mainSessionBean.setScreenHeight(hgt); 
```

现在它以自己的方式工作，问题是在第一页 (index.html) 会话 bean 对象没有参数，但如果我们导航到另一个站点会话 bean 确实有参数。我相信这意味着 index.html 在会话 bean 对象被创建之前被渲染/创建。如果我们导航到另一个站点，会话 bean 对象确实具有必要的屏幕大小值。因此，我现在可以根据用户的屏幕分辨率动态设置 JSF 元素，但只能从第二个访问页面开始。

我想要实现的是 Javascript 向 servlet 发起其 XMLHttpRequest，然后 servlet 调用会话 bean，传递必要的屏幕尺寸分辨率，当创建第一页时，必要的参数已经到位。

我不完全确定我是否以正确的方式这样做，但任何建议，链接到正确的资源将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-03T15:12:59.910

过程：

1.  您的浏览器向您的服务器发送 HTTP 请求

2.  您的服务器初始化会话并回复 index.html 页面

3.  您的 javascript 发回屏幕尺寸

您希望如何在第 2 点提供屏幕尺寸？您可以做的最好的事情是，在第 3 点之后，自动重新加载 index.html 页面（检查一下，如果是会话中的第一个请求，则发送 JS 和重定向，如果不是发送实际的登录 html）

# mercurial - 可以在 TortoiseHg 中使用 cygwin ssh.exe 吗？

> ID：13210329
> 
> 赞同：1
> 
> 时间：2012-11-03T15:00:48.080
> 
> 标签：mercurial, ssh, cygwin, tortoisehg

我使用 cygwins ssh 创建了公钥和私钥，并将公钥粘贴到 bitbucket 帐户中。

```
ssh -T hg@bitbucket.org 
```

说ssh连接工作正常！（所以它应该工作！！！）

然后我发帖

```
[ui]
ssh = C:\cygwin\bin\ssh.exe 
```

进入 TortoiseHg 中的 mercurial.ini

我发布

```
[paths]
default = ssh://hg@bitbucket.org/myusername/personal 
```

进入 hgrc 文件。

但是当我想推 TortoiseHg 时对我说：

```
remote: Permission denied (publickey).
no suitable response from remote hg 
```

在我看来，这里缺少一些东西，但究竟是什么？

编辑：我不想使用 TortoisePlink，因为它是 SUPER SUPER SUPER SLOW！而https只是在上传几兆字节后取消连接。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-24T05:35:10.903

您可能需要指定用户名和/或端口号。我的 mercurial.ini 工作正常，它看起来像这样：

```
[ui]
ssh="C:\cygwin64\bin\ssh.exe" -p 22 -l john 
```

其中 john 是远程机器上的用户名，22 是 ssh 端口号。

# javascript - 当我用 F5 刷新网页时禁用按钮

> ID：13210332
> 
> 赞同：0
> 
> 时间：2012-11-03T15:00:53.903
> 
> 标签：javascript, jsf, jsf-2

我有这个 JSF 按钮：

```
<h:commandButton style="position:absolute; bottom:12px; right:12%;" styleClass="lbimage" onclick="this.disabled=true" value=" Edit Account " rendered="#{not AccountProfileTabGeneralController.editable}" action="#{bean.editAccount(true)}" >
    <f:ajax render="@form" execute="@form"></f:ajax>
</h:commandButton>&nbsp; 
```

我添加了这个 JS 是为了防止在执行代码时双击：

```
onclick="this.disabled=true" 
```

但是当我用 F5 刷新网页时，该按钮在页面加载时被禁用。我怎样才能防止这种情况？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-03T15:14:19.807

`onclick="this.disabled=true"`并且还使用`oncomplete="this.disabled=false"`

# ruby - 在 ruby 的 case / when 语句中等价于“break”？

> ID：13210333
> 
> 赞同：4
> 
> 时间：2012-11-03T15:01:04.553
> 
> 标签：ruby

我正在寻找一个跳过`when`块执行的语句，类似于`break`for 循环。这可能吗？

我要避免的是这样的结构：

```
case n
  when 1
    if valid
      foo.bar
    end
  when 2
    if valid
      foo.foo
  end 
```

更理想的代码块如下所示：

```
case n
  when 1
    break unless valid
    foo.bar
  when 2
    break unless valid
    foo.foo
  end 
```

显然，`break`行不通。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-03T15:07:46.380

等效但更简洁：

```
case n
  when 1
    foo.bar if valid
  when 2
    foo.foo if valid
  end
end 
```

如果条件真的适用于所有情况，您可以事先检查：

```
if valid
  case n
    when 1
      foo.bar
    when 2
      foo.foo
    end
  end
end 
```

`break`如果两者都不适合你，那么简短的回答：不，在 ruby​​ 的 case 语句中没有等价物。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-03T23:14:01.323

我一直喜欢在 ruby​​ 语句的末尾添加条件。它使代码更容易和更易读。这就是红宝石的著名之处。我对您的问题的回答如下所示：

```
case n
when 1
    foo.bar
when 2
    bar.foo
end unless !valid 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-12-01T12:59:22.580

What I did in one case, which might be applicable to your case is encapsulating in a loop;

```
loop do
  case variable
  when conditionalA
    block1
    next if anotherconditional
    blockX
  when conditionalB
    block2
    next if anotherconditional
    blockY
  end
end 
```

Though not sure if this is "fine art".

# web - Debian Nginx PHP-FPM session_start()

> ID：13210337
> 
> 赞同：0
> 
> 时间：2012-11-03T15:01:26.207
> 
> 标签：web, nginx, debian, php

今天我在我的小 debian 上安装了 Nginx（最新版本）、mysql 5.5 和 PHP-FPM 一切正常，除了....

当我尝试使用时：`session_start()`我得到了：

> “致命错误：调用未定义的函数 start_session()”。

我想我需要为 PHP-FPM 安装 SESSION 支持？安装它的选项是什么？

**注意：**一切都是用源代码安装的（我不想为 nginx、mysql 或 php-fpm 使用 apt-get）

**注意2：**已经在 SO 或 Google 上搜索过，但我找不到要为 PHP-FPM 上的会话安装的选项/标志或库。

有任何想法吗？

泰

编辑：mybad 函数是 session_start() 而不是 start_session() :D

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-03T15:05:05.457

正如@air4x 在评论中所说。正确使用的函数是[session_start()](http://www.php.net/manual/en/function.session-start.php)

默认情况下，[会话](http://php.net/manual/en/session.installation.php)支持在 PHP 中启用，因此除非您使用`--disable-session`已安装的指令编译 php。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-03T15:07:24.917

正确使用的函数是：

```
session_start(); 
```

更多关于这里的会议：

[http://www.php.net/manual/en/function.session-start.php](http://www.php.net/manual/en/function.session-start.php)

# objective-c - NSString 到 NSDate 然后改变格式

> ID：13210339
> 
> 赞同：3
> 
> 时间：2012-11-03T15:01:43.103
> 
> 标签：objective-c, nsstring, nsdate

我以为我已经完成了“困难”部分，但似乎并非如此。我从 RSS 提要中检索日期，我想将其转换为 NSDate，然后将其更改为简单格式 (MM/DD/YYYY)。日期在 RSS 提要中采用以下格式：

2012 年 11 月 1 日星期四 17:41:56 CST

我已成功将其转换为 NSDate。

```
NSDateFormatter *df = [[NSDateFormatter alloc] init];
[df setDateFormat:@"E, d MMM yyyy HH:mm:ss zzz"];
NSDate *date = [[NSDate alloc] init];
//[df setDateStyle:NSDateFormatterMediumStyle]; Using these seems to change what it expects from the string I guess?
//[df setTimeStyle:NSDateFormatterMediumStyle];
date = [df dateFromString:string];
[self.tempItem setPubDate:[df dateFromString:string]];
NSLog(@"%@", [df dateFromString:string]); 
```

所以我的约会很好，但就像我之前说的，我只想把它转换成一个简单的约会。当我使用 setDateStyle 我最终得到空值。当我不使用它时，我会得到正确的日期，只是不是我希望它最终成为的格式。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-03T15:06:05.100

> 只是不是我希望它最终成为的格式。

因为`NSLog()`不知道格式 - 它会怎么样？`NSDate`没有任何内置的“格式”。`NSDateFormatter`您必须再次使用从日期对象中获取字符串。基本上，您必须使用的工作流程大致是：

*   从 RSS 提要中检索 NSString
*   创建日期格式化程序
*   根据字符串的格式设置其格式
*   `NSDate`从日期格式化程序中获取一个对象
*   将 的格式重新设置为`NSDateFormatter`您想要的格式
*   `NSString`使用日期和日期格式化程序对象获得正确格式化。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-03T15:08:57.880

只需创建另一个 NSDateFormatter 将 NSDate 转换为 NSString

> NSDateFormatter *dfSimple = [[NSDateFormatter alloc] init];
> 
> [dfSimple setTimeStyle:NSDateFormatterNoStyle];
> 
> [dfSimple setDateStyle:NSDateFormatterMediumStyle];
> 
> NSLog(@"%@", [dfSimple stringFromDate: date]);

在这种情况下，最好创建 2 个 NSDateFormatter 对象

# android - 已弃用的 Canvas.getMatrix() 的替代方案是什么？

> ID：13210340
> 
> 赞同：26
> 
> 时间：2012-11-03T15:01:45.457
> 
> 标签：android, android-4.2-jelly-bean

我有以下代码片段，它使用画布的当前转换矩阵转换一组边界。

```
 final RectF bounds = renderer.computeBounds
    activeCanvas.getMatrix().mapRect(result, bounds);
    return bounds; 
```

但是，对于最新的 API 级别 (16)，我收到一条警告说明

`The method getMatrix() from the type Canvas is deprecated`

正如[API 16 Diff Specification](http://developer.android.com/sdk/api_diff/16/changes/android.graphics.Canvas.html)所确认的那样。

这很好，但是[Canvas.getMatrix()](http://developer.android.com/reference/android/graphics/Canvas.html#getMatrix%28%29)上的当前文档没有提到弃用，也没有提供替代方案。作为一种解决方法，我现在只是取消了这个警告，但我真的很想知道*新的和改进的（tm）*方法是什么样的。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-09T12:43:15.077

我认为由于[启用 hardwareAcceleration 时 getMatrix 的问题](http://code.google.com/p/android/issues/detail?id=24517)，他们弃用了它，正如 kouray 所说，现在矩阵由视图处理。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-11-06T01:02:50.627

矩阵现在由视图而不是画布处理。不幸的是，我无法向您解释 Google 对此的决定，但您应该能够通过 2 种方式重现完全相同的内容。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2015-04-13T17:20:09.673

如果您无权访问视图：

> 要解决此问题，在大多数情况下，您可以使用 canvas.scale()、canvas.translate() 等应用任何转换，而不是检索矩阵、修改它然后再次设置矩阵。

根据Sandeep 所引用的，当启用 hardwareAcceleration 时，来自 Google [的 getMatrix 问题。](https://code.google.com/p/android/issues/detail?id=24517)

# java - 随机化java中的元素集

> ID：13210346
> 
> 赞同：0
> 
> 时间：2012-11-03T15:02:48.300
> 
> 标签：java, database

我正在尝试在 java 应用程序中的数据库中填充大约 10000 行。我可以选择随机的名字、姓氏等。我设置了 60 个 {Departmentid, Managerid} 组合。我必须将这组随机分配给那 10,000 名员工。每个员工都应该有一个合法的 Departmentid 和 Managerid 组合。

我应该如何处理这个？任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-03T15:07:18.670

如果您的 departmentId 或 managerids 存储在数组中，您可以使用 java.util.Random `departmentid[new Random().nextInt(60)]`其中 nextInt(int upperbound) 将帮助随机化条目。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-03T15:05:54.757

散列是最简单的方法。创建名字和姓氏组合的哈希。现在取一个随机散列并找到该散列的员工并分配你想要的任何东西

# iphone - iPhone 有没有办法从 NSDateComponents 获取 nsdate

> ID：13210348
> 
> 赞同：0
> 
> 时间：2012-11-03T15:02:57.623
> 
> 标签：iphone, ios, nsdate, nsdatecomponents

我试图弄清楚如何创建一个`NSDate`设置为今年年底的。即 2013 年，我找到了一种方法，您可以通过添加秒数来获取自 1970 年以来的时间。我认为这行不通，因为在闰年需要计算秒数。

我发现以下代码将 a 设置`NSDateComponents`为年底。

```
 NSDateComponents *comps = [[NSDateComponents alloc] init];
    [comps setYear:2012];
    [comps setMonth:12];
    [comps setDay:11];

    [comps setHour:0];
    [comps setMinute:0];
    [comps setSecond:0]; 
```

有没有办法从中得到一个`NSDate`？我想要做的是通过使用获得到年底的时间量

```
NSDateComponents *timeDifference = [[NSCalendar currentCalendar] 
                                        components:  NSMonthCalendarUnit| NSDayCalendarUnit|NSHourCalendarUnit|NSMinuteCalendarUnit|NSSecondCalendarUnit  fromDate:[NSDate date] toDate:comps options:0]; 
```

这需要一个`NSDate`结束日期。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-03T15:05:23.853

就在这里。

利用

```
NSCalendar *calendar = [[NSCalendar alloc] initWithCalendarIdentifier:NSGregorianCalendar];
NSDate *newDate = [calendar dateFromComponents:comps]; 
```

您可以根据需要更改日历标识符。

详情请参阅此[链接](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/DatesAndTimes/Articles/dtCalendars.html#//apple_ref/doc/uid/TP40003470)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-08-27T03:24:06.883

这里有一些代码可能会为您指明正确的方向。

```
NSDateComponents *comps = [[NSDateComponents alloc] init];
[comps setYear:2012];
[comps setMonth:12];
[comps setDay:11];

[comps setHour:0];
[comps setMinute:0];
[comps setSecond:0];

NSDate *myDate = [[NSCalendar currentCalendar] dateFromComponents:comps]; 
```

# c - 无法理解这段 C 代码片段

> ID：13210349
> 
> 赞同：2
> 
> 时间：2012-11-03T15:03:10.187
> 
> 标签：c, for-loop, int, printf, short

我的代码是：

```
#include<stdio.h>

main() {

short int i=0;

for(i<=5 && i>=-1; ++i; i>0)
    printf("%d, ",i);

return 0;
} 
```

输出：-

我不知道它从哪里开始但按顺序结束

```
..., -4, -3, -2, -1 
```

你能帮我理解这个代码片段的工作原理吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-03T15:30:13.567

```
for(i<=5 && i>=-1; ++i; i>0) 
```

相当于：

```
for(; ++i;) 
```

因为`i<=5 && i>=-1`and`i > 0`表达式没有副作用。

现在控制表达式是`++i`，这意味着循环被执行，直到`++i`被评估为`0`。

`i`是一个`short`对象，所以`++i`等价于`i = (int) i + 1`.

当`(int) i + 1`转换为`short`object`i`并且值在 a 中不可表示时`short`，转换是实现定义的（参见 C99，6.3.1.3p3）。

在您的实现中，行为是当值在 a 中不可表示时`short`，它只是环绕并变成一个巨大的负值 ( `SHRT_MIN`)。循环重复执行，直到`++i`控制表达式为`0`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-03T15:07:32.273

这是一个格式错误的句子，在语法上是正确的。它没有有意义的初始化（例如 i=0），而是有一个评估为真的语句。作为比较，它只增加变量 i 并在 i 达到零时结束。每次成功迭代后要执行的 end 语句什么也不做。

该语句的工作部分等价于 while (++i) printf("%d",i); 和（由于 2 的补数的性质，它从 1,2,3,4,..., 32766,32767 循环，并换行为负数 -32768, -32767, ..., -3,-2 ,-1\. （并在 i == 0 的下一次迭代中停止）

编辑：循环可能永远持续下去，直到满足条件 i==0 。计算机中的整数计算通常以模 2^16 或模 2^32、模 2^64 等计算。恰好将 16 位数字中可用的 65536 个不同值的范围映射到 2 个范围非常方便：0 ...32767 和 32768...65535，其中后半部分可以*解释*为正整数 [无符号] 或值为 (x-65536) 的负整数。c 语言关键字*signed*要求计算机这样做。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-03T15:16:14.040

在

```
for(i<=5 && i>=-1; ++i; i>0) 
```

这个

```
i<=5 && i>=-1 
```

意味着真实，因为`0 <= 5 and 0 >= -1`

为什么你得到-2，-1？这是缓冲区溢出。当您将 1 添加到 MAX_INT 时，您将得到负数

```
01111 
```

加 1

```
10000 
```

第一位是负位（1 - 数字为负，0 - 为正）

看看这个[http://en.wikipedia.org/wiki/Two%27s_complement](http://en.wikipedia.org/wiki/Two%27s_complement)

您也可以尝试修改`int`为`unsigned int`

* * *

输出是

```
1, 2, 3, 4, 5,
....
-5, -4, -3, -2, -1 
```

您可以通过以下方式检查

```
 program.exe > out.txt 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-03T15:25:07.010

您将`for`循环中的子句混淆了，这导致您一直计数到最大短整数值。当你把它加 1 时，它会循环到最小的短整数值，一个负数，然后继续计数直到它达到 0，此时循环最终停止。它循环的原因是整数通常存储在[二进制补码](http://en.wikipedia.org/wiki/Two%27s_complement)中，并且大多数 CPU 和编译器在溢出时不会做任何特殊的事情。他们只是继续添加，即使结果没有意义。在二进制补码中，最大整数值表示为`0111...`; 当你加 1 时，你得到`1000...`，这是最小的负整数。

在 C for 循环中，表达式是.`for(*initializer*; *condition*; *update*) *body*`

*初始化程序*在开始时运行一次，以初始化任何变量。由于您只是在进行一些比较，因此它在您的循环中基本上什么都不做。

该*条件*在每次迭代之前运行一次，在运行该迭代之前，以测试循环是否应该继续。你的*条件*是`++i`。这会增加`i`（加一）并返回结果。因此，在第一次通过时，`i`从 开始`0`，将其递增到`1`，`for`循环使用该值来决定循环是否应该继续。除此以外的任何数字`0`在 C 中都被认为是“真”，因此循环继续；它会一直运行，直到你到达`i`is的点`-1`，所以增加它会给你留下`0`，这是一个错误的值。

*更新*表达式在每次迭代后运行一次，在正文之后，以更新您可能需要继续迭代的任何变量。您只是在这里进行比较，它不使用该值，因此您基本上什么都不做。

最后，您的 for 循环与以下内容基本相同：

```
for (;++i;)
    printf("%d, ",i); 
```

这也与以下内容相同：

```
while (++i)
    printf("%d, ",i); 
```

您可能的意思是：

```
for (i = 0; i <= 5; ++i)
    printf("%d, ",i); 
```

# wpf - WPF 用户控件资源

> ID：13210352
> 
> 赞同：1
> 
> 时间：2012-11-03T15:03:43.580
> 
> 标签：wpf, xaml, resourcedictionary

我在 WPF 用户控件程序集中创建了一个**ResourceDictionary**。我希望能够在这个**UserControl**中使用它，并在这个单独的文件中拥有所有样式。

资源字典：

```
<ResourceDictionary xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
                    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml">    
    <Style x:Key="c1BtnX1">
        <Setter Property="Background" Value="Bisque"></Setter>
    </Style>    
</ResourceDictionary> 
```

它的地址是 The User Control Assembly Resources/mainResX.xaml 和 View 在同一个 assembly/Views/view.xaml

我认为的用法可能是：

```
<Border Style="{StaticResource ResourceKey=c1BtnX1}" 
        BorderBrush="Black"  
        Width="20" 
        Height="20">
               <TextBlock Text="X" />
</Border> 
```

此外，我在 UserControl 中尝试了以下代码来定义每个控件资源，但这种方式似乎也找不到资源。

```
 <UserControl ... >
    <UserControl.Resources>
        <ResourceDictionary Source="../Resources/mainResX.xaml" />            
    </UserControl.Resources> 
```

我应该在哪里以及如何放置/定义它？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-03T15:42:47.527

我无法从提供的信息中判断您的文件结构是什么。

如果 resource.xaml 和 control.xaml 位于同一个程序集的同一个文件夹中，您只需先引用 mainResX.xaml 而不使用“/Resources”；否则你需要以某种方式考虑文件结构。

他们在同一个程序集中吗？您可以根据需要将尽可能多的“../”字符串“遍历”到该位置，并使用文件夹（即“../Resources/mainResX.xaml”）

如果它们在不同的程序集中，则需要指定一个包 uri。您实际上总是可以这样做，尽管在不必要的时候有点麻烦。这是一个例子

```
<ResourceDictionary Source="pack://application:,,,/MyAssembly.Wpf;component/Resources/mainResX.xaml" /> 
```

HTH，
绿柱石

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-03T15:48:33.487

就我个人而言，我喜欢使用我的 App.xaml 来指定 XAML 文件的“MergedDirectory”，其中包含我在我的应用程序中全局使用的样式。我通常有一个“DefaultStyles.xaml”来设置任何全局样式（例如，当您希望应用程序中的所有文本框看起来相同而不指定样式时）。然后我有一个“Styles.xaml”来设置特定的样式，或者如果你真的有一堆，你甚至可以为每个控件类型设置一个 xaml...

您将它们放在 app.xaml 下的事实使它们对您的应用程序是全局的，并且不需要您不断地重新指定路径和字典。当然，这可能不适合所有编码情况，但对我来说这是一个节省时间的方法。

# checksum - 为什么帧校验序列位于以太网帧的末尾而不是其他位置

> ID：13210355
> 
> 赞同：4
> 
> 时间：2012-11-03T15:04:13.047
> 
> 标签：checksum, ethernet, crc, data-link-layer

以太网帧校验序列始终附加到数据链路层中帧的末尾。为什么它被附加到帧的末尾而不是其他地方？

我考虑了一下，认为它可能与如何计算例如CRC校验和有关，如果帧的结构是header+payload+crc而不是header+crc+payload，那么硬件更容易执行。

CRC 执行（数据+填充）/除数形式的异或除法，对于最后一帧，填充被余数替换。然后接收器计算（数据+余数）/除数，如果结果为 0，则接受该帧。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-03T15:27:58.570

你是对的：将 CRC 放在帧的末尾可以减少数据包延迟并减少硬件缓冲要求。在发送端，硬件可以立即读取和发送帧的字节。发送器在数据通过时即时计算 CRC，然后简单地将 CRC 附加到帧的尾部。

考虑 CRC 出现在以太网报头某处的替代方案。硬件必须读取并存储整个帧才能计算 CRC。这相当于一个大的前瞻操作，并显着增加了传输延迟和硬件成本。对于接收方来说，情况也变得更加复杂。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-11-03T15:42:38.950

事实上，这个位置与 CRC 的含义有很大关系：多项式除法。如果将 CRC 余数移动到有效负载比特流的前面，您将使某些 CRC 属性无效，例如突发错误检测。

理解这一点的关键是这样一个事实，即 CRC 始终在位流上运行，而不是字节或有效负载块。有时您会发现错误的 CRC 实现，其中位以小端方式传输，但实际上 CRC 是按大端方式计算的（根据单个字节内的位顺序）。

# javascript - 子窗口中的 Chrome 调用功能不起作用

> ID：13210356
> 
> 赞同：2
> 
> 时间：2012-11-03T15:04:33.017
> 
> 标签：javascript, google-chrome

我在 Chrome 中打开一个窗口/标签：

```
childWin = window.open('child.html'); 
```

然后我尝试在孩子中调用一个函数：

```
childWin.objReceiver( {foo: 'blah', zoo: 'bing'} ); 
```

但我在 Chrome 父级中收到以下 2 个错误（Firefox 工作正常）：

```
Unsafe JavaScript attempt to access frame with URL file:///C:/Users/Slava/Documents/AMP/app_poc/test/child.html from frame with URL file:///C:/Users/Slava/Documents/AMP/app_poc/test/index.html#. Domains, protocols and ports must match.
Uncaught TypeError: Property 'objReceiver' of object [object Window] is not a function 
```

请指教。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-03T15:07:24.597

在测试这种东西时，您希望从一个真实的 Web 服务器进程中提供文档（所以 URL 是`http://...`）。应用于*本地*资源（您的`file:///...`URL）的安全策略浏览器可能比 Web 资源的同源策略更具限制性。（特别是：某些浏览器将本地文件视为不匹配*任何*来源，甚至同一目录中的另一个本地文件。）

只需在您的机器上安装一个简单的 Web 服务器（或复杂的，如果您愿意 :-) ）。

另一件需要注意的是，您可能无法**立即**在子窗口上调用函数，因为该窗口可能尚未加载。所以你可以观察`objReceiver`孩子身上的表现，就像这样：

```
jQuery(function($) {

  $("#target").click(function() {
    // Open the window
    var wnd = window.open("http://jsbin.com/ofigis/1");

    // Give it a 10th of a second to appear
    display("Window open, waiting for it to appear...");
    setTimeout(watchForWindow, 100);

    // Our function watching for it        
    function watchForWindow() {
      // Is it there?
      if (wnd.objReceiver) {
        // Good, we're done waiting -- send the message
        wnd.objReceiver({
          foo: "blah"
        });

        display("Message sent");
      }
      else {
        // Not there yet, keep waiting...
        setTimeout(watchForWindow, 0);
      }
    }
  });

  function display(msg) {
    $("<p>").html(String(msg)).appendTo(document.body);
  }

}); 
```

[实例](http://jsbin.com/umoyiw/1)| [资源](http://jsbin.com/umoyiw/1/edit)

*（我在这里使用 jQuery 只是为了方便，没有任何基本位依赖它）*

# javascript - 如何将这样的字符串“EEE dd MMM yyyy HH:mm:ss.SSS z”转换为 js Date 对象（使用 dojo）

> ID：13210372
> 
> 赞同：0
> 
> 时间：2012-11-03T15:05:42.417
> 
> 标签：javascript, string, date, design-patterns, dojo

我正在尝试将 java 日期对象转换为 js 日期对象，字符串如下：

> EEE dd MMM yyyy HH:mm:ss.SSS z

我正在使用 Dojo。

以下将在 FF 和 IE 中返回无效值，但在 Chrome 中返回有效 Date 对象：

```
var s = "Fri 21 Sep 2012 11:29:34:258 UTC", 
d = new Date(s), dojo.date.locale.format(d);
while new Date("Fri 21 Sep 2012 11:29:34:258 UTC") 
```

然后我尝试使用`dojo.date.locale.parse`，但它仍然不起作用：

```
dojo.date.locale.parse("Fri 21 Sep 2012 11:29:34:258 UTC", 
{datePattern:"EEE dd MMM yyyy", timePattern:"HH:mm:ss:SSS Z"}) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-04T13:25:40.177

您使用的示例`dojo/date/locale`实际上似乎在 Dojo 1.8 中工作，并且正确解析了日期：http: [//jsfiddle.net/dJ6ms/](http://jsfiddle.net/dJ6ms/)

# jsf - 更改某些 selectItem 的样式 在我的 xhtml 页面中，我使用了一个<h:selectonemenu>组件。为了填充数据，我在<s:selectitems>组件内部使用了一个组件。我需要的是有条件地改变某个selectItem. 有可能还是有其他方法？ 例如，如果选项的标签是“铅 问问题 问问题 2012-11-03T15:06:05.337 3045 次 This question shows research effort; it is useful and clear 0 This question does not show any research effort; it is unclear or not useful Bookmark this question. Show activity on this post. 在我的 xhtml 页面中，我使用了一个<h:selectonemenu>组件。为了填充数据，我在<s:selectitems>组件内部使用了一个组件。我需要的是有条件地改变某个selectItem. 有可能还是有其他方法？ 例如，如果选项的标签是“铅笔”，我需要更改选项的颜色。 我正在使用jboss-seam并且命名空间 ' '指的是缝标签库。 我找到了另一种方法javascript。我的js代码是这样的。然而，这只是一个显示概念的简化代码。  jsfseam 4 1 回答 1 This answer is useful 0 我找到了另一种方法javascript。我的js代码是这样的。然而，这只是一个显示概念的简化代码。  于 2013-01-07T09:04:49.653 回答 Related 1 ruby-on-rails - 让 imgkit + 回形针 + s3 工作。回形针无法识别“快照” 1 css - 带有 TransformOrigin 的 GWT setProperty 3 javascript - textarea 是必填字段吗？ 2 haskell - 密码函数 :: [(Int,Char)] -> [String] 1 javascript - JqPlot 图太宽 2 php - 在表单提交时生成过期 URL 5 scala - Scala控制台不起作用，IntelliJ 1 shell - “expect”匹配“send”字符串，为什么？ 3 python - 大数据多处理 1 mysql - 如何使表中的字段引用 MySQL/MariaDB 中的另一个表？ Reference php × 1429865 c/c++ × 756500 nginx × 49975 mongodb × 159057 mybatis × 3233 anaconda × 13410 pycharm × 14671 python × 1902243 vscode × 56040 docker × 110988 github × 49000 flask × 49129 ffmpeg × 24037 jmeter × 16910 matplotlib × 63493 bootstrap × 54641</s:selectitems></h:selectonemenu></s:selectitems></h:selectonemenu>

> ID：13210377
> 
> 赞同：0
> 
> 时间：
> 
> 标签：jsf, seam

在我的 xhtml 页面中，我使用了一个`<h:selectOneMenu>`组件。为了填充数据，我在`<s:selectItems>`组件内部使用了一个组件。我需要的是有条件地改变某个`selectItem`. 有可能还是有其他方法？
例如，如果选项的标签是“***铅笔***”，我需要更改选项的颜色。
我正在使用**jboss-seam**并且命名空间 ' **'**指的是缝标签库。

```
<h:selectOneMenu value="#{bean.selectedItem}" id="myCombo">
   <f:selectItem itemLabel="-Please select-" itemValue=""/>
   <s:selectItems value="#{bean.items}" var="item" label="#{item.name}" itemValue="#{item}"/>
</h:selectOneMenu> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T09:04:49.653

我找到了另一种方法`javascript`。我的`js`代码是这样的。然而，这只是一个显示概念的简化代码。

```
<script>      
  window.onload = function() {
    var options = document.getElementById("myForm:myCombo").options;
    for(var i = 0; i &lt; options.length; i++) {
      if(options[i].innerHTML == 'pencil') {
        options[i].style.color = 'red';
      }
    }
  }
</script> 
```

# html - Jquery Mobile & Data 角色：使用数据属性是不好的做法

> ID：13210387
> 
> 赞同：0
> 
> 时间：2012-11-03T15:07:04.753
> 
> 标签：html, jquery-mobile, web, markup

在 jQuery Mobile 中，您必须将数据属性应用到 HTML 以便 jQuery Mobile 知道如何处理它。例如，如果您希望链接具有幻灯片过渡，您可以执行以下操作：

```
<a href="#" data-transition="slide"> </a> 
```

这似乎是一种不好的做法，因为您正在为内容（a 标签）分配样式（在幻灯片的情况下）。通常，HTML 应该只包含具有语义属性的内容，而 jQuery 和 CSS 之类的东西应该将样式应用于这些语义属性。

它还会使您的代码重复。例如，如果您有 20 个链接，则必须对所有链接应用 data-transition="slide"，如果您决定将来要使用不同的过渡，这将需要大量维护。

因此，以这种方式使用数据属性是不好的做法吗？

我四处寻找解释如何使用 jQuery Mobile 的另一种方法的文章，但似乎这是唯一的方法。所以我想我会问一下，以确保我的理解没有错！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T09:32:49.797

我认为使用数据属性并不是一个坏习惯。无论如何，您总是可以为 jQueryMobile 设置一些默认配置并尽量减少它们的使用。检查文档的[这一部分](http://jquerymobile.com/demos/1.2.0/docs/api/globalconfig.html)。

例如，`data-transition`您可以指定以下内容，而不是向所有链接添加属性：

```
$(document).bind("mobileinit", function(){
  $.mobile.defaultPageTransition = "slide";
}); 
```

还有其他可用的配置选项。我建议您查看上一个链接。

# c#-4.0 - 如何使用 iTextsharp 重新调整 pdf 内容的大小

> ID：13210402
> 
> 赞同：0
> 
> 时间：2012-11-03T15:08:26.643
> 
> 标签：c#-4.0, pdf, itextsharp

我只需要在 pdf 文件中调整页面内容的大小，它与减小文件大小无关我只需要减少每个页面内容，这是一个图像，以便能够以横向模式将其打印为小册子。所以我需要减少每个页面内容的高度和宽度。

我正在使用 iTextSharp 和 c#

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T21:08:09.373

最简单的方法可能是更改相关页面的默认用户空间单元的大小。

**可以使用页面字典条目/UserUnit**以每页为基础配置默认用户空间单元，参见。PDF 规范[ISO 32000-1:2008](http://www.adobe.com/content/dam/Adobe/en/devnet/acrobat/pdfs/PDF32000_2008.pdf)中的表 30 ：

> **UserUnit** number *（可选；PDF 1.6）*一个正数，应给出默认用户空间单位的大小，以 1⁄72 英寸的倍数表示。支持值的范围应取决于实现。
> 
> 默认值：1.0（用户空间单位为 1⁄72 英寸）。

因此，您所要做的就是为您的 PDF 文件创建一个 PdfReader 的 PdfStamper，遍历页面字典，读取它们当前的**/UserUnit**值（默认值：1.0），根据需要减少它，写回它，标记页面字典如已更改，并写入 PdfStamper 的结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T21:13:40.667

尝试将您的内容添加到文档并使用 SetPageSize 属性将文档页面设置为横向。
以下是将页面设置为横向的代码：
Document document = new Document();
**document.SetPageSize(iTextSharp.text.PageSize.A4.Rotate());**
//添加一些内容
PdfPTable table = new PdfPTable(1);
PdfPCell cell = new PdfPCell(new Phrase("Some test text"));
cell.Horizo​​ntalAlignment = 1; //0=左，1=中心，2=右
table.AddCell(cell);

# forms - 自定义播放 Scala 表单不显示验证错误

> ID：13210403
> 
> 赞同：2
> 
> 时间：2012-11-03T15:08:27.997
> 
> 标签：forms, scala, playframework, playframework-2.0

这是模板文件的片段：

```
 @helper.form(routes.Signup.signupCont) {
           @helper.inputText(signupForm("teamname"))
                  <div class="row">
                      <div class="span2"><label class="label_form_email_signup">Team name</label></div>
                      <div class="span4"><input id="Signup_teamname" type="text" class="span4 input" maxlength="24" name="teamname"></div>
                  </div>
} 
```

表格定义：

```
def signupForm = Form(
    mapping(
      "teamname" -> text(minLength = 4, maxLength = 30).verifying(
        "Name already in use.", teamname => Team.findByNameStrict(teamname).isEmpty),
      "email" -> email.verifying(
        "Email already in use.", email => Team.findByEmail(email).isEmpty).verifying(
        "University email required", email => email.matches(""".*\.ac\.uk""")),
      "password" -> tuple(
        "main" -> text(minLength = 6),
        "confirm" -> text).verifying(
          "Passwords do not match.", password => password._1 == password._2))((teamname, email, password) =>
        (teamname, email, password._1))(data => Some(data._1, data._2, ("","")))) 
```

例如，当使用错误的电子邮件并提交表单时，页面重新加载，但表单字段为空（因此解构器失败）并且电子邮件框旁边没有错误消息。如何实现这种行为？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T01:44:28.847

确保在呈现时将带有错误的表单传递给视图。例如：

```
signUpForm.bindFromRequest.fold (
  errors => {
    /// assuming the page is signUp
    BadRequest(views.html.signUp(errors))
  },
  info => {
    // all ok, process the form 
  }
 ) 
```

# mysql - 按 max(date) 加入 2 个具有已知变量排序的表

> ID：13210405
> 
> 赞同：3
> 
> 时间：2012-11-03T15:08:51.340
> 
> 标签：mysql, join

我有 2 个表转移和设备，其中每件设备可能有多个转移。我希望将这 2 个表与 a 连接起来，*`project id`*并返回特定项目的每件设备的最新传输。

```
transfers table:
tid, pid, eid, date

equipment table:
eid, ename 
```

在我的函数中，我发送变量`$pid`以仅对特定项目 ID 的设备转移进行排序，该项目 ID 与转移表中的设备 ID 一起存储。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T15:14:14.783

你想要[分组最大值](http://dev.mysql.com/doc/en/example-maximum-column-group-row.html)：

```
SELECT *
FROM   transfers NATURAL JOIN (
  SELECT   pid, eid, MAX(date) date
  FROM     transfers
  WHERE    pid = ?
  GROUP BY eid
) t JOIN equipment USING (eid) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-03T16:26:48.420

我认为您的要求对我来说可能仍然有点不清楚，但要仅返回特定 PID 的最新“传输”和“设备”行，请执行以下操作：

```
SELECT t.tid, t.pid, t.eid, e.ename, t.date
  FROM transfers t
  JOIN equipment e ON t.eid = e.eid
 WHERE t.pid = ?
   AND t.date = (SELECT MAX(t2.date) FROM transfers t2 WHERE t2.pid = ? ) 
```

让我知道这是否符合您的期望。如果没有，请给我更多关于每个表中的行的信息。

希望这可以帮助，

约翰...

# python - key_name 的不区分大小写的查询

> ID：13210408
> 
> 赞同：0
> 
> 时间：2012-11-03T15:09:23.630
> 
> 标签：python, google-app-engine, key, case-insensitive

> **可能重复：**
> [如何使用 Google App Engine 进行不区分大小写的过滤器查询？](https://stackoverflow.com/questions/3289781/how-to-make-case-insensitive-filter-queries-with-google-app-engine)

可以不区分大小写地查询 GAE 数据存储以获取 key_name 吗？也许查询不是正确的术语。我真的很想做，`get_by_key_name()`所以用户不必有正确的大小写，但确实有正确的文本字符。

# python - 将函数映射到 Scipy/numpy 矩阵的所有列

> ID：13210413
> 
> 赞同：3
> 
> 时间：2012-11-03T15:10:24.420
> 
> 标签：python, numpy, scipy

我有一个 40*4 矩阵`M`和一个`A`包含 40 个元素的向量。我想计算`A`M 中每个列向量之间的余弦距离。

我真的需要这样写吗？

```
 print [cosine(M[:,i],A) for i in range(A.shape[1])] 
```

还是有另一种更好的方法来做到这一点？

余弦的文档可以在这里查看：http: [//docs.scipy.org/doc/scipy/reference/generated/scipy.spatial.distance.cosine.html#scipy.spatial.distance.cosine](http://docs.scipy.org/doc/scipy/reference/generated/scipy.spatial.distance.cosine.html#scipy.spatial.distance.cosine)

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-03T17:28:27.657

根据[这个问题](https://stackoverflow.com/questions/5515181/how-to-iterate-over-columns-of-a-matrix)，Numpy 似乎有一种 Pythonic 方式来迭代矩阵的列。这样，您可以编写：

```
print [cosine(column,A) for column in M.transpose()] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-03T17:39:22.690

它似乎`scipy.spatial.distance.cosine`真的只适用于向量。要使用矢量化表达式有效地计算余弦距离，请执行

```
normM = np.sqrt((M ** 2).sum(axis=0))
normA = np.sqrt((A ** 2).sum())
cossim = np.dot(M.T, A) / (normM * normA)
dist = 1\. - cossim 
```

假设`M.shape == (40,4)`,`A.shape == (4,)`和两者都不是`np.matrix`。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-03T17:50:45.720

也许更实用的方法是使用[`functools.partial`](http://docs.python.org/2/library/functools.html#functools.partial)绑定 to 的第二个参数，`cosine`然后`A`使用`map`将此绑定函数应用于`M`

```
map(partial(cosine,v=A), M.transpose()) 
```

# android - 如何在每个 android 设备 2.2+ 中获取短信列表作为对话

> ID：13210420
> 
> 赞同：6
> 
> 时间：2012-11-03T15:11:43.053
> 
> 标签：android, list, sms

我需要获取短信列表并像在股票应用程序或 Go sms pro 中一样显示它们。我正在使用以下代码：

```
uriSms = Uri.parse("content://mms-sms/conversations");  
Cursor cursor = getContentResolver().query(uriSms, new String[] {"*"}, null, null, "date DESC");   
cursor.moveToFirst();  
do{    
    try{
        String address = cursor.getString(32);  
        if(address == null){
            address = "";   //phone number
        }else{
            address = getContactName(address);  
        }
        String body = cursor.getString(2);  
        System.out.println("======> Mobile number => "+address);  
        System.out.println("=====> SMS Text => "+body);  
    }catch (Exception e) {
        e.printStackTrace();  
    }
}while(cursor.moveToNext()); 
```

它适用于我的 Galaxy 选项卡（android 2.2），但在我的 s3（ICS）应用程序启动时崩溃。我不想解析彩信，所以我尝试使用

```
uriSms = Uri.parse("content://sms/conversations"); 
```

但它不适用于两种设备。我搜索了很多以找到解决方案，但一无所获。我只发现访问短信对话取决于安卓操作系统和设备。我的目的是制作支持每个 android 设备 2.2+ 的应用程序。在股票应用程序中，他们使用 Thread.CONTENT_URI 来获取短信列表作为对话，例如。

```
Threads.CONTENT_URI.buildUpon().appendQueryParameter("simple", "true").build(); 
```

但是类 Thread 没有提供源代码，我在互联网上找不到它。我该怎么做才能让我的应用程序在每个 android 设备 (2.2+) 上运行，就像 Handcent Sms 或 GO sms pro 一样。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T10:51:00.280

您的代码正在崩溃，因为您假设查询的表包含名为 的列`address`，并非所有 android 版本都将地址存储在对话中。要检查表的结构，您可以通过以下代码显示其列名和内容：

```
ArrayList<String> conversation = new ArrayList<>();

Uri    uri    = Uri.parse( "content://sms/conversations/" );
Cursor cursor = getContentResolver().query( uri, null, null ,null, null );

startManagingCursor( cursor );
if( cursor.getCount() > 0 ) {
    String count = Integer.toString( cursor.getCount() );

    while( cursor.moveToNext() ) {
        String result = "";

        for( int i = 0; i < cursor.getColumnCount(); i++ ) {
            result = result + "\nindex " + i + "\n column is "
                + cursor.getColumnName( i ) + "\nvalue is " + cursor.getString( i );
        }

        result = result + "\n new conversation";
        conversation.add( result );
    }
}

cursor.close(); 
```

一种可能的解决方法是使用`thread_id`作为参数来搜索地址，如下所示：

```
ArrayList<String> conversation = new ArrayList<>();
// We may use sms/sent or sms/inbox
Uri    uri    = Uri.parse( "content://sms" );
Cursor cursor = getContentResolver().query( uri, null, "thread_id" + " = " + threadId ,null, null );

startManagingCursor( cursor );
if( cursor.getCount() > 0 ) {
    String count = Integer.toString( cursor.getCount() );

    while( cursor.moveToNext() ){
        String result = "";

        for( int i = 0; i < cursor.getColumnCount(); i++ ) {
            result = result + "\nindex " + i + "\n column is "
                + cursor.getColumnName( i ) + "\nvalue is " + cursor.getString( i );
        }

        result = result + "\n new conversation";
        conversation.add( result );
    }
}

cursor.close(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-08-15T11:40:23.037

```
final StringBuilder msgString = new StringBuilder();
// ************** SMS ********************* 
List<SMSData> smsList = new ArrayList<SMSData>();

Uri uri = Uri.parse("content://sms/");
Cursor c= getContentResolver().query(uri, null, null ,null,null);
//startManagingCursor(c);

// Read the sms data and store it in the list
if(c.moveToFirst()) {
    for(int i=0; i < c.getCount(); i++) {

        SMSData sms = new SMSData();
        sms.setBody(c.getString(c.getColumnIndexOrThrow("body")).toString());
        sms.setDate(c.getString(c.getColumnIndexOrThrow("date")).toString());
        sms.setNumber(c.getString(c.getColumnIndexOrThrow("address")).toString());
        smsList.add(sms);

        String address  = c.getString(c.getColumnIndexOrThrow("address")).toString();
        String mbody    = c.getString(c.getColumnIndexOrThrow("body")).toString();
        String mdate    = c.getString(c.getColumnIndexOrThrow("date")).toString();
        Date dt = new Date(Long.valueOf(mdate));

        msgString.append(address + "<-||->");
        msgString.append(mbody  + "<-||->");
        msgString.append(dt  + "<-||->");
        msgString.append(mdate + "<--!-->");

        c.moveToNext();
    }       
}

c.close(); 
```

# ios - iOS：安装 Xcode 4.5.2，在 iOS 5.1 和 6.0 上部署

> ID：13210423
> 
> 赞同：2
> 
> 时间：2012-11-03T15:12:14.533
> 
> 标签：ios, xcode

我目前运行 Xcode 4.3.3 并开发当前部署到 iOS > 5.0 的应用程序。Xcode 4.3.3 无法安装到 iOS 6.0，我想升级。我想了解您的经验以及升级到新的 Xcode 4.5.2 和 iOS 6 时出现的问题。由于我不想升级手机，此升级是否会中断或导致安装到 iOS 5.1 时出现任何问题到iOS 6了吗？

两个版本的 Xcode 是否可以同时存在，所以万一出现问题，我可以回到上一个可以工作的版本吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-03T15:44:22.447

如果我没记错的话：

*   XCode 会将部署目标更改为 6.0，您需要将其更改回 5.0。
*   XCode 会将有效架构更改为 armv7 armv7s，您需要确保所有二进制库都包含 7s 切片，否则您需要升级它们或删除 armv7s 条目。
*   XCode 将添加一个黑色图像作为 -568@2x 默认值。您将需要提供自己的图像并调整您的程序以适应两种屏幕尺寸或将其删除。

好处：

```
// new dictionary literals:
NSDictionary *dict = @{
    key1 : val1,
    key2 : val2,
    ...
};
// new dictionary accessors, assignment on mutables only
id var = dict[key];
mutableDict[key] = val;

//new array literals and accessors
NSArray *arr = @[a, b, c];
id var = arr[i];
mutableArr[i] = j;

// NSNumber boxing
NSNumber x = @1;
NSNumber y = @(EnumName);
NSNumber z = @YES;
NSNumber w = @(localIntOrDouble);

// Boxing makes dicts even more convenient:
id var  = dictionary[@(EnumName)]; //vs:
id var2 = [dictionary objectForKey:[NSNumber numberWithInt:EnumName]]; 
```

并且有一个重构工具可以为您转换。

# c++ - C++、向量、指针和对象混淆

> ID：13210424
> 
> 赞同：4
> 
> 时间：2012-11-03T15:12:16.173
> 
> 标签：c++

我正在做一个项目，作为我大学系统编程课程的家庭作业。我对指针、向量、堆栈和堆的问题感到非常困惑。

使用 C++。我必须得到一个对象向量，这些对象是课程，这些课程对象有几个不同的字段。我所做的是这样的：

```
vector<CoursesObject> coursevector; 
```

然后我创建了我的课程对象类，其中包含课程中剩余的空间和课程字段的名称。现在我想添加一门新课程，我这样做：

```
CoursesObject *theCourse = new CoursesObject(name, space); 
```

现在我想将它添加到处理程序向量中：

```
coursevector.push_back(*theCourse); 
```

据我所知，我在堆栈上创建了 Courses 对象的向量，并为堆上的新课程创建了一个新指针，并将指向堆中课程对象的指针 theCourse 添加到处理程序向量中。我说的对吗？

当我尝试删除这些课程对象时，我会：

```
for(int i=0; i<coursevector.size(); i++)
    delete coursevector.at(i); 
```

这给了我一个错误，它不是指针。但是我不是在 coursevector 中添加了指向 course 对象的 POINTER 吗？

请有人解释一下，我必须正确处理内存，但似乎我做得不对。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-03T15:15:12.087

这

```
vector<CoursesObject> coursevector; 
```

是 的向量`CourseObjects`，因此它不能保存`CourseObject`指针。当你这样做时：

```
coursevector.push_back(*theCourse); 
```

您将获得存储在向量中的`CoursesObject`指向的副本。`theCourse`您不需要从向量中删除任何条目。事实上，你不能，因为它不保存指针。

如果您只是避免动态分配，您的程序会简单得多：

```
coursevector.push_back(CoursesObject(name, space)); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-03T15:19:59.540

您根本不需要使用 new 。

```
//This vector stores CoursesObject objects,
//not pointers to CoursesObjects.
vector<CoursesObject> coursevector;
//Construct theCourse with automatic storage
//duration.
CoursesObject theCourse(name, space);
//Copy theCourse into coursevector
coursevector.push_back(theCourse);
//theCourse will be automatically destroyed.
//coursevector (and all the objects that it contains)
//will be automatically destroyed. 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-03T15:18:19.730

您的所有对象都不是动态分配的，因此您不能在程序期间随时删除它们。请记住，您只能在动态分配对象后删除对象：

```
int Var1 = 0;  //cannot be deleted, scope and life will exist for the life of program
int * Var2 = new int; //CAN be deleted, dynamically allocated.

delete Var2; //free memory 
```

但是，您可以删除最后一个对象，它是一个指针。我会抓住向量的最后一个元素并在其上调用 delete（这应该是指向类的指针）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-03T15:25:06.577

当你这样做时：

```
coursevector.push_back(*theCourse); 
```

实际上，您正在取消引用指针 theCourse，因此您正在添加对象的副本。您需要声明一个 CourseObject 指针向量：

```
vector<CoursesObject *> coursevector; 
```

然后添加一个对象：

```
coursevector.push_back(theCourse); 
```

现在您删除对象的代码应该可以工作了：

```
for(int i=0; i<coursevector.size(); i++)
    delete coursevector.at(i); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-03T15:25:41.720

`coursevector`只能保存`CoursesObject`s 而不是指向`CoursesObject`s 的指针，因此您无需使用`new`运算符（查看@Mankarse 的答案）。但是，如果你仍然想持有指针，那么将 coursevector 的定义更改为

```
vector<CoursesObject*> coursevector; 
```

并 push_back 指针的值原样：

```
coursevector.push_back(theCourse); 
```

# php - php同时从两列和两个喜欢中拉取

> ID：13210427
> 
> 赞同：0
> 
> 时间：2012-11-03T15:12:35.137
> 
> 标签：php, mysql

我不确定问这个问题的最佳方法，如果我粘贴了任何不正确或不正确的内容，我很抱歉。我不是故意要让人痛苦，只是我在此之前收到了管理员的投诉。请原谅我的英语。

我想做的任何人都是从两列中拉出，并让它同时处理两个喜欢，我可以弄清楚如何将其放入格式中。

当我在下面使用此代码时，我得到一个错误..我如何把它放在一行中？

```
Put this into one line  - 
```

> WHERE productnumber LIKE %colname%
> WHERE option1 LIKE %colname2%

我希望它看起来像这样

> WHERE productnumber AND option1 LIKE %colname%, %colname2%

换句话说

productnumber 仅等于 - colname

option1 仅等于 - colname2

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-03T15:21:24.843

```
WHERE productnumber LIKE '%colname%' AND option1 LIKE '%colname2%' 
```

假设`colname`和`colname2`是字符串/用户输入。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-03T15:22:48.743

最基础的回答：

```
WHERE productnumber LIKE '%colname%' AND option1 LIKE '%colname2%' 
```

我们不知道 'colname' 和 'colname2' 到底是什么，所以很难说清楚。如果您不使用通配符，那么您可以只使用固定匹配：

```
SELECT something FROM tablename 
WHERE tablename.productnumber = 'colname' 
AND tablename.option1 = 'colname2' 
```

很难确切地说，除非你发布代码。

希望这可以帮助。

# c# - 有时使用单个尝试捕获而不是大量的 TryParsing 和其他错误处理不是更好吗？

> ID：13210428
> 
> 赞同：3
> 
> 时间：2012-11-03T15:12:40.540
> 
> 标签：c#, exception-handling, error-handling, refactoring

我知道人们说将异常用于流控制并仅在异常情况下使用异常是不好的，但有时将整个块包装在一个中不是更干净、更优雅`try-catch`吗？

例如，假设我有一个对话框窗口，`TextBox`用户可以在其中键入输入以以键值方式进行解析。

这种情况并不像你想象的那么做作，因为我继承了必须处理这种确切情况的代码（尽管不是农场动物）。

考虑一下这堵代码墙：

```
class Animals
{
    public int catA, catB;
    public float dogA, dogB;
    public int mouseA, mouseB, mouseC;
    public double cow;
}

class Program
{
    static void Main(string[] args)
    {
        string input = "Sets all the farm animals CAT 3 5 DOG 21.3 5.23 MOUSE 1 0 1 COW 12.25";

        string[] splitInput = input.Split(' ');

        string[] animals = { "CAT", "DOG", "MOUSE", "COW", "CHICKEN", "GOOSE", "HEN", "BUNNY" };

        Animals animal = new Animals();

        for (int i = 0; i < splitInput.Length; i++)
        {
            string token = splitInput[i];

            if (animals.Contains(token))
            {
                switch (token)
                {
                    case "CAT":
                        animal.catA = int.Parse(splitInput[i + 1]);
                        animal.catB = int.Parse(splitInput[i + 2]);
                        break;
                    case "DOG":
                        animal.dogA = float.Parse(splitInput[i + 1]);
                        animal.dogB = float.Parse(splitInput[i + 2]);
                        break;
                    case "MOUSE":
                        animal.mouseA = int.Parse(splitInput[i + 1]);
                        animal.mouseB = int.Parse(splitInput[i + 2]);
                        animal.mouseC = int.Parse(splitInput[i + 3]);
                        break;
                    case "COW":
                        animal.cow = double.Parse(splitInput[i + 1]);
                        break;
                }
            }
        }
    }
} 
```

实际上有更多的农场动物和更多的处理。虽然很多事情都可能出错。用户可能输入错误数量的参数。用户可以以不正确的格式输入输入。用户可以指定数据类型无法处理的太大或太小的数字。

所有这些不同的错误都可以通过使用无例外地处理`TryParse`，检查用户尝试为特定动物使用多少参数，检查参数对于数据类型来说是太大还是太小（因为 TryParse 只返回 0），但每个人都应该产生同样的结果：

A`MessageBox`出现告诉用户输入的数据无效并修复它。我的老板不希望针对不同的错误使用不同的消息框。因此，与其做所有这些，为什么不将块包装在 a`try-catch`中并在 catch 语句中只显示该错误消息框并让用户再试一次？

也许这不是最好的例子，但想想任何其他情况，否则会有大量错误处理可以代替单个 try-catch。这不是更好的解决方案吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-03T15:22:44.577

使用 Try-Catch-Finalize 与使用 TryParse 不同。TryParse 不会停止代码的执行，它不会抛出异常，而是简单地跳过错误并使变量保持未初始化状态。

编写安全代码比错误处理和“很多可能出错”要多得多，这就是限制派上用场的时候。为了正确执行和良好结果，我们限制用户的自由，下一步是错误处理。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-03T16:57:17.220

只是为了好玩，我为您的案例拼凑了一个类似解析器组合器的快速示例。在解析半复杂语法时，解析器组合器非常强大。此外，解析器组合库可以扩展为支持解析器失败的人类可读错误。

也许它可以为您提供处理任务的不同方法的想法。

使用一些解析器原语解析“猫”看起来像这样：

```
static IParseResult<Cat> ParseCat(this ParserState ps)
{
    var value = new Cat();
    var result = 
            ps.AttemptTo (() => ps.ParseToken("CAT"))
        &&  ps.AttemptTo (ps.ParseDouble, out value.A)
        &&  ps.AttemptTo (ps.ParseDouble, out value.B)
        ;

    return ps.Result(result, value);
} 
```

狗、牛和老鼠类似。解析动物是所有这些的组合：

```
 static IParseResult<Animal> ParseAnimal(this ParserState ps)
    {
        Animal value = null;
        var result =
                ps.AttemptTo(ps.ParseCat    , out value)
            ||  ps.AttemptTo(ps.ParseDog    , out value)
            ||  ps.AttemptTo(ps.ParseMouse  , out value)
            ||  ps.AttemptTo(ps.ParseCow    , out value)
            ||  ps.AttemptTo(ps.ParseUnknown, out value)
            ;

        return ps.Result(result, value);
    } 
```

最后，我们喜欢将输入解析为尽可能多的动物：

```
 public static IParseResult<Animal[]> ParseAnimals(this ParserState ps)
    {
        Animal[] value;
        var result = ps.AttemptMany(ps.ParseAnimal, out value);
        return ps.Result(result, value);
    } 
```

完整样本：

```
namespace ParseTest
{
    using System;
    using System.Collections.Generic;
    using System.Globalization;
    using System.Threading;
    using System.Linq;

    static class Program
    {

        static void Main(string[] args)
        {
            Thread.CurrentThread.CurrentCulture = CultureInfo.InvariantCulture;

            var input = "Sets all the farm animals CAT 3 5 DOG 21.3 5.23 MOUSE 1 0 1 COW 12.25";

            Console.WriteLine(input);

            var ps = new ParserState(input.Split(' '));

            var result = ps.ParseAnimals();

            if (result.Success)
            {
                foreach (var animal in result.Value.Where(v => !(v is Unknown)))
                {
                    Console.WriteLine(animal);
                }
            }
            else
            {
                Console.WriteLine("Parse failure");
            }

        }
    }

    // ParserState tracks where we are in the input
    class ParserState
    {
        public readonly string[] Tokens;
        public int CurrentPosition;

        public ParserState(string[] tokens) 
        {
            Tokens = tokens ?? new string[0];
        }

        public string Peek
        {
            get
            {
                if (CurrentPosition < 0)
                {
                    return "";
                }

                if (CurrentPosition >= Tokens.Length)
                {
                    return "";
                }

                return Tokens[CurrentPosition];
            }
        }

        public string PeekAndAdvance ()
        {
            var result = Peek;

            ++CurrentPosition;

            return result;
        }

        public bool EndOfStream
        {
            get { return CurrentPosition >= Tokens.Length; }
        }

    }
    struct Empty
    {

    }

    // ParseResult are the result of parsers, it might be a succcess or failure
    interface IParseResult<out T>
    {
        ParserState State { get; }
        bool Success { get; }
        T Value { get; }
    }

    class ParseResult<T> : IParseResult<T>
    {
        readonly ParserState m_state;
        readonly bool m_success;
        readonly T m_value;

        public ParseResult(ParserState state, bool success, T value)
        {
            m_state = state;
            m_success = success;
            m_value = value;
        }

        public ParserState State
        {
            get { return m_state; }
        }

        public bool Success
        {
            get { return m_success; }
        }

        public T Value 
        {
            get { return m_value; }
        }
    }

    static class ParserExtensions
    {
        public static IParseResult<T> Result<T>(this ParserState ps, bool success, T value)
        {
            return new ParseResult<T>(ps, success, value);
        }

        public static IParseResult<T> Success<T>(this ParserState ps, T value)
        {
            return ps.Result(true, value);
        }

        public static IParseResult<T> Failure<T>(this ParserState ps)
        {
            return ps.Result(true, default(T));
        }

        public static bool AttemptTo<T>(this ParserState ps, Func<IParseResult<T>> action)
        {
            T value;
            return ps.AttemptTo(action, out value);
        }

        // Attempts to run a parser, 
        // if the parser fails the parser state is returned to its previous state
        public static bool AttemptTo<T>(this ParserState ps, Func<IParseResult<T>> action, out T value)
        {
            value = default(T);
            if (ps.EndOfStream)
            {
                return false;
            }

            var currentPos = ps.CurrentPosition;

            var result = action();

            if (result.Success)
            {
                value = result.Value;
            }
            else
            {
                ps.CurrentPosition = currentPos;
            }

            return result.Success;
        }

        // Attempts to run a parser many times and build an array of values, 
        // if the parser fails the parser state is returned to its previous state
        // and the result is returned
        public static bool AttemptMany<T>(this ParserState ps, Func<IParseResult<T>> action, out T[] values)
        {
            values = new T[0];
            if (ps.EndOfStream)
            {
                return true;
            }

            var parsedValues = new List<T>();

            var currentPos = ps.CurrentPosition;

            IParseResult<T> result;

            while ((result = action ()).Success)
            {
                currentPos = ps.CurrentPosition;
                parsedValues.Add(result.Value);
            }

            ps.CurrentPosition = currentPos;

            values = parsedValues.ToArray();

            return true;
        }

        static IParseResult<Empty> ParseToken(this ParserState ps, string token)
        {
            var value = new Empty();
            var result = ps.PeekAndAdvance().Equals(token, StringComparison.OrdinalIgnoreCase);
            return ps.Result(result, value);
        }

        static IParseResult<double> ParseDouble(this ParserState ps)
        {
            double value;
            var result = double.TryParse(ps.PeekAndAdvance(), out value);
            return ps.Result(result, value);
        }

        static IParseResult<Cat> ParseCat(this ParserState ps)
        {
            var value = new Cat();
            var result = 
                    ps.AttemptTo (() => ps.ParseToken("CAT"))
                &&  ps.AttemptTo (ps.ParseDouble, out value.A)
                &&  ps.AttemptTo (ps.ParseDouble, out value.B)
                ;

            return ps.Result(result, value);
        }

        static IParseResult<Dog> ParseDog(this ParserState ps)
        {
            var value = new Dog();
            var result =
                    ps.AttemptTo(() => ps.ParseToken("DOG"))
                &&  ps.AttemptTo(ps.ParseDouble, out value.A)
                &&  ps.AttemptTo(ps.ParseDouble, out value.B)
                ;

            return ps.Result(result, value);
        }

        static IParseResult<Mouse> ParseMouse(this ParserState ps)
        {
            var value = new Mouse();
            var result =
                    ps.AttemptTo(() => ps.ParseToken("MOUSE"))
                &&  ps.AttemptTo(ps.ParseDouble, out value.A)
                &&  ps.AttemptTo(ps.ParseDouble, out value.B)
                &&  ps.AttemptTo(ps.ParseDouble, out value.C)
                ;

            return ps.Result(result, value);
        }

        static IParseResult<Cow> ParseCow(this ParserState ps)
        {
            var value = new Cow();
            var result =
                    ps.AttemptTo(() => ps.ParseToken("COW"))
                &&  ps.AttemptTo(ps.ParseDouble, out value.A)
                ;

            return ps.Result(result, value);
        }

        static IParseResult<Unknown> ParseUnknown(this ParserState ps)
        {
            ps.PeekAndAdvance();
            return ps.Success(new Unknown());
        }

        static IParseResult<Animal> ParseAnimal(this ParserState ps)
        {
            Animal value = null;
            var result =
                    ps.AttemptTo(ps.ParseCat    , out value)
                ||  ps.AttemptTo(ps.ParseDog    , out value)
                ||  ps.AttemptTo(ps.ParseMouse  , out value)
                ||  ps.AttemptTo(ps.ParseCow    , out value)
                ||  ps.AttemptTo(ps.ParseUnknown, out value)
                ;

            return ps.Result(result, value);
        }

        public static IParseResult<Animal[]> ParseAnimals(this ParserState ps)
        {
            Animal[] value;
            var result = ps.AttemptMany(ps.ParseAnimal, out value);
            return ps.Result(result, value);
        }
    }

    class Animal
    {

    }

    class Cat : Animal
    {
        public double A;
        public double B;

        public override string ToString()
        {
            return new {Type = "CAT", A, B}.ToString();
        }
    }

    class Dog : Animal
    {
        public double A;
        public double B;

        public override string ToString()
        {
            return new { Type = "DOG", A, B }.ToString();
        }
    }

    class Mouse : Animal
    {
        public double A;
        public double B;
        public double C;

        public override string ToString()
        {
            return new { Type = "MOUSE", A, B, C }.ToString();
        }
    }

    class Cow : Animal
    {
        public double A;

        public override string ToString()
        {
            return new { Type = "COW", A}.ToString();
        }
    }

    class Unknown : Animal
    {
        public override string ToString()
        {
            return new { Type = "UNKNOWN"}.ToString();
        }
    }

} 
```

PS。FParsec 是我最后一次检查 .NET 的最佳解析器组合库：[http ://www.quanttec.com/fparsec/tutorial.html](http://www.quanttec.com/fparsec/tutorial.html)

PS。MicroParser 是 FParsec 的 C# 变体，但旨在更小，同时牺牲解析巨型字符串的能力：http: [//microparser.codeplex.com/](http://microparser.codeplex.com/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-03T15:26:18.867

这取决于您需要对错误消息进行多少控制。使用“包罗万象”的方法，您将能够告诉用户的只是“出了点问题，再试一次”。

使用一个大的 try-catch 块并捕获`Exception`您将隐藏代码中的其他错误，与 int 解析不完全相关。您至少应该尝试缩小预期异常的类型。

还要考虑到这`TryParse`将使您继续进行其余的解析，这意味着您可以跟踪并记录所有问题，然后以详细的方式将它们通知给用户。这取决于您要完成的工作。

# php - phpMyAdmin 重复表

> ID：13210429
> 
> 赞同：59
> 
> 时间：2012-11-03T15:12:48.053
> 
> 标签：php, database, phpmyadmin

有没有办法让 phpMyAdmin 吐出在另一个数据库中复制表所需的 SQL？

我最初制作桌子时保存了它，但从那以后我已经改变了很多。这是一张很大的桌子，这真的很有帮助。

* * *

## 回答 #1

> 赞同：98
> 
> 时间：2012-11-03T15:25:17.447

是的，您可以导航到所需的表，然后转到 (tab) *Operations* > *Copy table to (database.table):*，这是右侧的一个框。在那里，您可以定义要复制表的数据库和名称。完成后，您会得到 SQL “吐出”。

由于我不完全确定您的问题，如果您想将表放在转储文件中，您也可以单击选项卡*Export*，您也可以在其中获取 SQL，或者立即下载转储文件。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-03T15:33:27.707

您可以使用“导出”选项卡来选择要导出的表。在下图中，

*   指定专辑表
*   检查结构
*   数据未选中 - 不使用导出生成数据
*   选中 SQL 单选按钮
*   ...
*   单击底部的 Go 按钮以生成生成的 SQL

![在此处输入图像描述](../Images/b20f52598ad8954b9cd3d7f8682de82f.png)

# android - 如果 SurfaceView 尺寸大于设备屏幕，如何添加 SurfaceView 滚动功能？

> ID：13210431
> 
> 赞同：2
> 
> 时间：2012-11-03T15:12:48.903
> 
> 标签：android, surfaceview

我将`SurfaceView`RelativeLayouts 定义为*root* `RelativeLayout`的子级：

![在此处输入图像描述](../Images/461eb79a8bee0128d01c6097acb0ee2f.png)

我的主应用程序包含 2 个 RelativeLayouts（顶部和底部带有按钮）和带有 10 个蓝色球的 SurfaceView。它看起来像：

![在此处输入图像描述](../Images/e310743485494e7cfed040019d917436.png)

我的目标是能够滚动 SurfaceView 以获取其他球视图，而不仅仅是上图所示的 1st 4。就像是：

![在此处输入图像描述](../Images/76a7433d84bd86fb74f9f5c069dfc38f.png)

重点是水平滚动条。人们说我不能在`SurfaceView`下面添加`ScrollView`。

任何想法我该如何实施？

所有建议将不胜感激。

# ruby-on-rails - 了解 API

> ID：13210433
> 
> 赞同：0
> 
> 时间：2012-11-03T15:13:00.977
> 
> 标签：ruby-on-rails, json, rabl

我正在阅读 RABL git [https://github.com/nesquena/rabl](https://github.com/nesquena/rabl)，我很快就遇到了这一行。有人可以快速解释他所说的“生成 API”是什么意思吗？

*   当使用 ActiveRecord 'to_json' 方法时，我很快就会发现自己想要一个更有表现力和功能强大的解决方案来生成 API。

据我了解，API 是一组类/方法，可用于与 API 创建者材料的内容进行交互。有了这个定义，我相信他是在说他希望能够更轻松地与 API 交互，因此他构建了 RABL，允许将内容从他的应用程序转换为，在这种情况下，Rails eaiser？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-03T15:22:02.450

在这种情况下，API 被应用到整个系统中。因此，您的整个网站可能有一个 API，您的客户将使用该 API 将数据拉取/发送到您的系统。

大多数情况下，这些是接受和返回数据的 JSON/XML 端点。Rabl（和其他类似的序列化程序）帮助您制作自定义 JSON 响应。

# python - 获取完整的回溯

> ID：13210436
> 
> 赞同：30
> 
> 时间：2012-11-03T15:13:28.183
> 
> 标签：python, traceback

在以下情况下，我如何获得完整的回溯，包括`func2`和`func`函数的调用？

```
import traceback

def func():
    try:
        raise Exception('Dummy')
    except:
        traceback.print_exc()

def func2():
    func()

func2() 
```

当我运行它时，我得到：

```
Traceback (most recent call last):
  File "test.py", line 5, in func
    raise Exception('Dummy')
Exception: Dummy 
```

`traceback.format_stack()`不是我想要的，因为需要`traceback`将对象传递给第三方模块。

我对这个案例特别感兴趣：

```
import logging

def func():
    try:
        raise Exception('Dummy')
    except:
        logging.exception("Something awful happened!")

def func2():
    func()

func2() 
```

在这种情况下，我得到：

```
ERROR:root:Something awful happened!
Traceback (most recent call last):
  File "test.py", line 9, in func
    raise Exception('Dummy')
Exception: Dummy 
```

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2012-11-03T15:22:53.723

`try`正如 mechmind 所回答的，堆栈跟踪仅包含引发异常的站点和块的站点之间的帧。如果您需要完整的堆栈跟踪，显然您不走运。

除了显然可以将堆栈条目从顶层提取到当前帧之外——<code>traceback.extract_stack 可以很好地管理它。问题是通过`traceback.extract_stack`直接检查栈帧得到的信息没有在任何时候创建回溯对象，并且`logging`API需要回溯对象来影响回溯输出。

幸运的是，`logging`它不需要一个*实际*的回溯对象，它需要一个可以传递给`traceback`模块格式化例程的对象。`traceback`也不关心——它只使用回溯的两个属性，帧和行号。因此，应该可以创建一个鸭子类型的虚假回溯对象的链表并将其作为回溯传递。

```
import sys

class FauxTb(object):
    def __init__(self, tb_frame, tb_lineno, tb_next):
        self.tb_frame = tb_frame
        self.tb_lineno = tb_lineno
        self.tb_next = tb_next

def current_stack(skip=0):
    try: 1/0
    except ZeroDivisionError:
        f = sys.exc_info()[2].tb_frame
    for i in xrange(skip + 2):
        f = f.f_back
    lst = []
    while f is not None:
        lst.append((f, f.f_lineno))
        f = f.f_back
    return lst

def extend_traceback(tb, stack):
    """Extend traceback with stack info."""
    head = tb
    for tb_frame, tb_lineno in stack:
        head = FauxTb(tb_frame, tb_lineno, head)
    return head

def full_exc_info():
    """Like sys.exc_info, but includes the full traceback."""
    t, v, tb = sys.exc_info()
    full_tb = extend_traceback(tb, current_stack(1))
    return t, v, full_tb 
```

有了这些功能，您的代码只需要进行微不足道的修改：

```
import logging

def func():
    try:
        raise Exception('Dummy')
    except:
        logging.error("Something awful happened!", exc_info=full_exc_info())

def func2():
    func()

func2() 
```

...给出预期的输出：

```
ERROR:root:Something awful happened!
Traceback (most recent call last):
  File "a.py", line 52, in <module>
    func2()
  File "a.py", line 49, in func2
    func()
  File "a.py", line 43, in func
    raise Exception('Dummy')
Exception: Dummy 
```

请注意，虚假回溯对象完全可用于自省——显示局部变量或作为参数——`pdb.post_mortem()`因为它们包含对真实堆栈帧的引用。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-03T15:24:30.273

当异常冒出时收集堆栈跟踪。因此，您应该在所需堆栈的顶部打印回溯：

```
import traceback

def func():
    raise Exception('Dummy')

def func2():
    func()

try:
    func2()
except:
    traceback.print_exc() 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2019-09-25T20:03:17.697

这是基于 user4815162342 的回答，但更简约一点：

```
import sys
import collections

FauxTb = collections.namedtuple("FauxTb", ["tb_frame", "tb_lineno", "tb_next"])

def full_exc_info():
    """Like sys.exc_info, but includes the full traceback."""
    t, v, tb = sys.exc_info()
    f = sys._getframe(2)
    while f is not None:
        tb = FauxTb(f, f.f_lineno, tb)
        f = f.f_back
    return t, v, tb 
```

它避免抛出虚拟异常，代价是需要使用`sys._getframe()`. 它假定在`except`​​捕获异常的子句中使用，因为它上升了两个堆栈帧（`full_exc_info`以及调用的函数`full_exc_info`——这将是调用引发代码的函数，因此已经包含在原始回溯中）。

这给出了与 user4815162342 答案中的代码相同的输出。

如果您不介意格式的细微差别，您也可以使用

```
import logging

def func():
    try:
        raise Exception('Dummy')
    except:
        logging.exception("Something awful happened!", stack_info=True)

def func2():
    func()

func2() 
```

这导致

```
ERROR:root:Something awful happened!
Traceback (most recent call last):
  File "test.py", line 5, in func
    raise Exception('Dummy')
Exception: Dummy
Stack (most recent call last):
  File "test.py", line 12, in <module>
    func2()
  File "test.py", line 10, in func2
    func()
  File "test.py", line 7, in func
    logging.exception("Something awful happened!", stack_info=True) 
```

在这种情况下，您将获得从尝试到异常的跟踪，以及从根调用到日志调用位置的第二次跟踪。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-02-24T18:59:42.717

我写了一个模块，它写了一个更完整的回溯

模块在[这里](https://raw.githubusercontent.com/MoserMichael/cstuff/master/python/pd.py)文档是[文档](http://mosermichael.github.io/cstuff/docs/html/python/pd.html)

（您也可以从 pypi 获取模块

```
sudo pip install pd 
```

)

要捕获和触发异常，请执行以下操作：

```
import pd

try:
    <python code>
except BaseException:       
    pd.print_exception_ex( follow_objects = 1 ) 
```

堆栈跟踪在这里看起来像这样：

```
Exception: got it

#1  def kuku2(self = {'a': 42, 'b': [1, 2, 3, 4]}, depth = 1) at      t  test_pd.py:29
Calls next frame at:
    raise Exception('got it') at: test_pd.py:29

#2  def kuku2(self = {'a': 42, 'b': [1, 2, 3, 4]}, depth = 2) at test_pd.py:28
Calls next frame at:
    self.kuku2( depth - 1 ) at: test_pd.py:28

#3  def kuku2(self = {'a': 42, 'b': [1, 2, 3, 4]}, depth = 3) at test_pd.py:28
Calls next frame at:
    self.kuku2( depth - 1 ) at: test_pd.py:28

#4  def kuku2(self = {'a': 42, 'b': [1, 2, 3, 4]}, depth = 4) at test_pd.py:28
Calls next frame at:
    self.kuku2( depth - 1 ) at: test_pd.py:28

#5  def kuku2(self = {'a': 42, 'b': [1, 2, 3, 4]}, depth = 5) at     test_pd.py:28
 Calls next frame at:
    self.kuku2( depth - 1 ) at: test_pd.py:28

#6  def kuku2(self = {'a': 42, 'b': [1, 2, 3, 4]}, depth = 6) at test_pd.py:28
Calls next frame at:
    self.kuku2( depth - 1 ) at: test_pd.py:28

#7  def main() at test_pd.py:44
Local variables:
n = {'a': 42, 'b': [1, 2, 3, 4]}
Calls next frame at:
    pd.print_exception_ex( follow_objects = 1 ) at: test_pd.py:44 
```

follow_objects = 0 不会打印出对象内容（使用复杂的数据结构 follow_objects 可能需要很多时间）。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-06-09T15:15:22.860

可以从回溯中提取更多信息，有时我更喜欢更整洁、更“合乎逻辑”的信息，而不是回溯提供的带有文件、行号和代码片段的多行 blob。最好一行应该说明所有要点。

为此，我使用以下功能：

```
def raising_code_info():
    code_info = ''
    try:    
        frames = inspect.trace()
        if(len(frames)):
            full_method_name = frames[0][4][0].rstrip('\n\r').strip()
            line_number      = frames[1][2]
            module_name      = frames[0][0].f_globals['__name__']
            if(module_name == '__main__'):
                module_name = os.path.basename(sys.argv[0]).replace('.py','')
            class_name = ''
            obj_name_dot_method = full_method_name.split('.', 1)
            if len(obj_name_dot_method) > 1:
                obj_name, full_method_name = obj_name_dot_method
                try:
                    class_name = frames[0][0].f_locals[obj_name].__class__.__name__
                except:
                    pass
            method_name = module_name + '.'
            if len(class_name) > 0:
                method_name += class_name + '.'
            method_name += full_method_name
            code_info = '%s, line %d' % (method_name, line_number)
    finally:
        del frames
        sys.exc_clear()
    return code_info 
```

它给 。和行号，例如：

（示例模块名称：test.py）：

```
(line 73:)
def function1():
    print 1/0

class AClass(object):    
    def method2(self):
        a = []
        a[3] = 1

def try_it_out():
    # try it with a function
    try:
        function1()
    except Exception, what:
        print '%s: \"%s\"' % (raising_code_info(), what)

    # try it with a method
    try:
        my_obj_name = AClass()
        my_obj_name.method2()       
    except Exception, what:
        print '%s: \"%s\"' % (raising_code_info(), what)

if __name__ == '__main__':
     try_it_out()

test.function1(), line 75: "integer division or modulo by zero"
test.AClass.method2(), line 80: "list assignment index out of range" 
```

在某些用例中可能会稍微整洁一些。

# django - 如何将报告部分添加到 Django 管理员？

> ID：13210437
> 
> 赞同：17
> 
> 时间：2012-11-03T15:13:49.457
> 
> 标签：django, django-admin

我想在 Django admin 中实现一个报告部分。这意味着在管理主页中添加一个自定义部分，而不是模型列表，我会看到报告列表。如果可能的话，我想将 Django 的管理表与过滤器、排序以及一切一起使用。

实现这一目标的“最佳”方式是什么？我意识到这是一个“大”问题，所以我不一定要求提供代码片段，所需操作的摘要就可以了 :)

PS报告我的意思是通过自定义查询（查询集或如何调用）“组成”模型。

PS2 也许这个问题应该是这样的：如何在自己的管理视图中使用 Django 管理表功能？

PS3 或者也许有一种方法可以向现有的管理界面提供我自己的数据。这样我就不用做任何其他事情了。我只想说不是模型，而是获取这些数据并将其显示在一个漂亮的表格中，我可以对其进行排序、过滤等。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-11-03T15:35:50.247

因此，您正在尝试将新页面添加到 django 管理员中。

本节向您准确解释如何做到这一点 - [https://docs.djangoproject.com/en/dev/ref/contrib/admin/#adding-views-to-admin-sites](https://docs.djangoproject.com/en/dev/ref/contrib/admin/#adding-views-to-admin-sites)

基本想法是添加您想要的新网址，`urls.py`就好像您正在为“前端”页面添加网址一样。主要区别在于您添加的这些新 url 应该以`^admin/`并且看起来像这样`^admin/my_special_link_in_admin`，并且这个 url 将指向您自己的自定义视图函数，位于您喜欢的位置。

例如

```
(r'^admin/my_special_link_in_admin/$', 'my_custom_admin_app.views.special_admin_page'), 
```

所以这是完全定制的方式。我在这里参考了一个非常好的教程-http: [//brandonkonkle.com/blog/2010/oct/4/django-admin-customization-examples/](http://brandonkonkle.com/blog/2010/oct/4/django-admin-customization-examples/)

另外，如果不想做太多工作，可以考虑使用 Django Admin Plus - [https://github.com/jsocol/django-adminplus](https://github.com/jsocol/django-adminplus)

或 django-admin-views - [https://github.com/frankwiles/django-admin-views](https://github.com/frankwiles/django-admin-views)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2017-03-09T09:39:35.560

此外，还有这个不错的应用程序：

[django-admin-reports](https://github.com/simplyopen-it/django-admin-reports)

> “admin_reports”是一个 Django 应用程序，可以轻松创建数据聚合报告以显示在 Django admin 中。
> 
> Django 管理员非常关注模型，它提供了一种快速简单的方法来为 CRUD 界面创建 GUI，但通常需要以聚合形式显示数据，这就是 admin_reports 派上用场的地方。
> 
> 这个想法是有一个类似于`ModelAdmin`(from `django.contrib.admin`) 的类，它允许显示集中于实现聚合过程的派生数据。

# php - 我如何从 *sql 映射到 php 到 javascript 并返回？

> ID：13210439
> 
> 赞同：0
> 
> 时间：2012-11-03T15:14:09.150
> 
> 标签：php, javascript, mysql, datamapper

我写了很多 *sql / php 应用程序，我发现自己不得不一直重写 javascript 来一遍又一遍地做同样的事情。通常，当我必须使用的 API 非常简单时，编写一次性 ajax 方法来与 PHP 交互并不是什么大不了的事，它通过 PDO 更新 sql 表。

但是，当涉及到从 php 发送到 javascript 的大数据对象需要解析、编辑、更新、发送回 PHP，然后由应用程序层更新时，我整天都在编写 javascript 来处理这些“大对象”和每一个。小的。事物。可以在其中更新。

一定有更好的方法。它是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-03T15:51:31.550

导致您重写大量前端 js 代码的更改的性质是什么？是您需要在前端显示的新数据，还是对数据结构的更改？

如果它是新数据，并且您不想专注于更新前端代码来处理它，您可能需要实现一些东西，让 javascript 以更动态的方式构建您的前端。我可以将其视为一种服务，它作为结构化 UI 映射以某种数据格式传回，您的前端 js 可以解析（您必须包含您需要的所有数据以及可能有关该数据格式的一些信息，即、字符串、文本、日期等）。

这对于某些表单数据可能没问题，这基本上就是表单对象在诸如 CakePHP 甚至 Drupal 等 MVC 框架中的工作方式。事实上，如果这是您的目标，仅提供一些面向用户的内容条目，您甚至可以在其中一个框架中检查实现此代码。

如果问题是您正在对结构数据进行更改，但总的来说您正在呈现相同的数据字段，那么您可能只需要前端数据模型和后端数据模型的抽象。您可以提出您的 javascript 对象定义，定义您传回的结构化数据的外观，定义后端模型的外观，然后定义两者之间的映射层。如果后端的数据结构发生变化，你的javascript对象定义和映射层之间的契约就不需要改变了，你可以只改变映射层和你的后端数据模型层之间的契约。

# android - Android 在 Activity 中捏合和缩放图像

> ID：13210443
> 
> 赞同：6
> 
> 时间：2012-11-03T15:14:28.667
> 
> 标签：android, android-listview, android-imageview, pinchzoom

我有一个带有一组图像的 ListView。单击其中任何一个时，单击的图像将出现在新活动上，并且位于 ImageView 活动的中心，它也是可缩放的。问题是当我缩放图像时，它会缩放，但也会像拖放一样移动。我应该消除图像的移动，并且只能从活动的中心缩放。

**ZoomInZoomOutActivity.java**

```
public class ZoomInZoomOutActivity extends Activity implements OnTouchListener 
{
    private static final String TAG = "Touch";
    @SuppressWarnings("unused")
    private static final float MIN_ZOOM = 1f,MAX_ZOOM = 1f;

    Matrix matrix = new Matrix();
    Matrix savedMatrix = new Matrix();
    static final int NONE = 0;
    static final int DRAG = 1;
    static final int ZOOM = 2;
    int mode = NONE;
    PointF start = new PointF();
    PointF mid = new PointF();
    float oldDist = 1f;
    @Override
    public void onCreate(Bundle savedInstanceState) 
    {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.imagedisp);

        Bundle extras = getIntent().getExtras();

        long id =extras.getLong("ID");
        String s=String.valueOf(id);
        ImageView view;
        view = (ImageView) findViewById(R.id.imageView1);
        view.setOnTouchListener(this);

        if (s.equals("0")) 
        {
            view.setImageResource(R.drawable.img1);
        }
        else if (s.equals("1"))
        {
            view.setImageResource(R.drawable.img2);
        }
        else if (s.equals("2"))
        {
            view.setImageResource(R.drawable.img3);
        } 
        else 
        {
            view.setImageResource(R.drawable.img4);
        }

    }

    public boolean onTouch(View v, MotionEvent event) 
    {
        ImageView view = (ImageView) v;
        view.setScaleType(ImageView.ScaleType.MATRIX);
        float scale;

        switch (event.getAction() & MotionEvent.ACTION_MASK) 
        {
            /*case MotionEvent.ACTION_DOWN:   
                                                savedMatrix.set(matrix);
                                                start.set(event.getX(), event.getY());
                                                Log.d(TAG, "mode=DRAG"); 
                                                mode = DRAG;
                                                break; */
            case MotionEvent.ACTION_UP:

            case MotionEvent.ACTION_POINTER_UP:

                                                mode = NONE;
                                                Log.d(TAG, "mode=NONE");
                                                break;

            case MotionEvent.ACTION_POINTER_DOWN: 

                                                oldDist = spacing(event);
                                                Log.d(TAG, "oldDist=" + oldDist);
                                                if (oldDist > 5f) {
                                                    savedMatrix.set(matrix);
                                                    midPoint(mid, event);
                                                    mode = ZOOM;
                                                    Log.d(TAG, "mode=ZOOM");
                                                }
                                                break;

            case MotionEvent.ACTION_MOVE:

                                                if (mode == DRAG) 
                                                { 
                                                    matrix.set(savedMatrix);
                                                    matrix.postTranslate(event.getX() - start.x, event.getY() - start.y); 
                                                } 
                                                else if (mode == ZOOM) 
                                                { 

                                                    float newDist = spacing(event);
                                                    Log.d(TAG, "newDist=" + newDist);
                                                    if (newDist > 5f) 
                                                    {
                                                        matrix.set(savedMatrix);
                                                        scale = newDist / oldDist; 
                                                        matrix.postScale(scale, scale, mid.x, mid.y);
                                                    }
                                                }
                                                break;
        }

        view.setImageMatrix(matrix); 
        return true; 
    }

    private float spacing(MotionEvent event) 
    {
        float x = event.getX(0) - event.getX(1);
        float y = event.getY(0) - event.getY(1);
        return FloatMath.sqrt(x * x + y * y);
    }

    private void midPoint(PointF point, MotionEvent event) 
    {
        float x = event.getX(0) + event.getX(1);
        float y = event.getY(0) + event.getY(1);
        point.set(x / 2, y / 2);
    }

} 
```

**imagedisp.xml**

```
<?xml version="1.0" encoding="utf-8"?>

<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:orientation="vertical" 
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" 
    android:gravity="center">

    <ImageView android:layout_width="fill_parent" 
        android:id="@+id/imageView1"
        android:src="@drawable/img1" 
        android:layout_height="fill_parent"
        android:scaleType="centerInside">

    </ImageView>

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-06T20:33:00.347

试试这个代码：

```
import android.content.Context;
import android.graphics.Bitmap;
import android.graphics.Matrix;
import android.graphics.PointF;
import android.util.AttributeSet;
import android.view.MotionEvent;
import android.view.ScaleGestureDetector;
import android.view.View;
import android.widget.ImageView;

/**
 * Extends Android ImageView to include pinch zooming and panning.
 */
public class TouchImageView extends ImageView
{
    Matrix matrix = new Matrix();

    // We can be in one of these 3 states
    static final int NONE = 0;
    static final int DRAG = 1;
    static final int ZOOM = 2;
    int mode = NONE;

    // Remember some things for zooming
    PointF last = new PointF();
    PointF start = new PointF();
    float minScale = 1f;
    float maxScale = 3f;
    float[] m;

    float redundantXSpace, redundantYSpace;

    float width, height;
    static final int CLICK = 3;
    float saveScale = 1f;
    float right, bottom, origWidth, origHeight, bmWidth, bmHeight;

    ScaleGestureDetector mScaleDetector;

    Context context;

    public TouchImageView(Context context)
    {
        super(context);
        sharedConstructing(context);
    }

    public TouchImageView(Context context, AttributeSet attrs)
    {
        super(context, attrs);
        sharedConstructing(context);
    }

    private void sharedConstructing(Context context)
    {
        super.setClickable(true);
        this.context = context;
        mScaleDetector = new ScaleGestureDetector(context, new ScaleListener());
        matrix.setTranslate(1f, 1f);
        m = new float[9];
        setImageMatrix(matrix);
        setScaleType(ScaleType.MATRIX);

        setOnTouchListener(new OnTouchListener()
        {
            @Override
            public boolean onTouch(View v, MotionEvent event)
            {
                mScaleDetector.onTouchEvent(event);

                matrix.getValues(m);
                float x = m[Matrix.MTRANS_X];
                float y = m[Matrix.MTRANS_Y];
                PointF curr = new PointF(event.getX(), event.getY());

                switch (event.getAction())
                {
                    case MotionEvent.ACTION_DOWN:
                        last.set(event.getX(), event.getY());
                        start.set(last);
                        mode = DRAG;
                        break;
                    case MotionEvent.ACTION_MOVE:
                        if (mode == DRAG)
                        {
                            float deltaX = curr.x - last.x;
                            float deltaY = curr.y - last.y;
                            float scaleWidth = Math.round(origWidth * saveScale);
                            float scaleHeight = Math.round(origHeight * saveScale);
                            if (scaleWidth < width)
                            {
                                deltaX = 0;
                                if (y + deltaY > 0)
                                    deltaY = -y;
                                else if (y + deltaY < -bottom)
                                    deltaY = -(y + bottom);
                            }
                            else if (scaleHeight < height)
                            {
                                deltaY = 0;
                                if (x + deltaX > 0)
                                    deltaX = -x;
                                else if (x + deltaX < -right)
                                    deltaX = -(x + right);
                            }
                            else
                            {
                                if (x + deltaX > 0)
                                    deltaX = -x;
                                else if (x + deltaX < -right)
                                    deltaX = -(x + right);

                                if (y + deltaY > 0)
                                    deltaY = -y;
                                else if (y + deltaY < -bottom)
                                    deltaY = -(y + bottom);
                            }
                            matrix.postTranslate(deltaX, deltaY);
                            last.set(curr.x, curr.y);
                        }
                        break;

                    case MotionEvent.ACTION_UP:
                        mode = NONE;
                        int xDiff = (int) Math.abs(curr.x - start.x);
                        int yDiff = (int) Math.abs(curr.y - start.y);
                        if (xDiff < CLICK && yDiff < CLICK)
                            performClick();
                        break;

                    case MotionEvent.ACTION_POINTER_UP:
                        mode = NONE;
                        break;
                }
                setImageMatrix(matrix);
                invalidate();
                return true; // indicate event was handled
            }
        });
    }

    @Override
    public void setImageBitmap(Bitmap bm)
    {
        super.setImageBitmap(bm);
        if (bm != null)
        {
            bmWidth = bm.getWidth();
            bmHeight = bm.getHeight();
        }
    }

    public void setMaxZoom(float x)
    {
        maxScale = x;
    }

    private class ScaleListener extends
            ScaleGestureDetector.SimpleOnScaleGestureListener
    {
        @Override
        public boolean onScaleBegin(ScaleGestureDetector detector)
        {
            mode = ZOOM;
            return true;
        }

        @Override
        public boolean onScale(ScaleGestureDetector detector)
        {
            float mScaleFactor = (float) Math.min(
                    Math.max(.95f, detector.getScaleFactor()), 1.05);
            float origScale = saveScale;
            saveScale *= mScaleFactor;
            if (saveScale > maxScale)
            {
                saveScale = maxScale;
                mScaleFactor = maxScale / origScale;
            }
            else if (saveScale < minScale)
            {
                saveScale = minScale;
                mScaleFactor = minScale / origScale;
            }
            right = width * saveScale - width - (2 * redundantXSpace * saveScale);
            bottom = height * saveScale - height
                    - (2 * redundantYSpace * saveScale);
            if (origWidth * saveScale <= width || origHeight * saveScale <= height)
            {
                matrix.postScale(mScaleFactor, mScaleFactor, width / 2, height / 2);
                if (mScaleFactor < 1)
                {
                    matrix.getValues(m);
                    float x = m[Matrix.MTRANS_X];
                    float y = m[Matrix.MTRANS_Y];
                    if (mScaleFactor < 1)
                    {
                        if (Math.round(origWidth * saveScale) < width)
                        {
                            if (y < -bottom)
                                matrix.postTranslate(0, -(y + bottom));
                            else if (y > 0)
                                matrix.postTranslate(0, -y);
                        }
                        else
                        {
                            if (x < -right)
                                matrix.postTranslate(-(x + right), 0);
                            else if (x > 0)
                                matrix.postTranslate(-x, 0);
                        }
                    }
                }
            }
            else
            {
                matrix.postScale(mScaleFactor, mScaleFactor, detector.getFocusX(),
                        detector.getFocusY());
                matrix.getValues(m);
                float x = m[Matrix.MTRANS_X];
                float y = m[Matrix.MTRANS_Y];
                if (mScaleFactor < 1)
                {
                    if (x < -right)
                        matrix.postTranslate(-(x + right), 0);
                    else if (x > 0)
                        matrix.postTranslate(-x, 0);
                    if (y < -bottom)
                        matrix.postTranslate(0, -(y + bottom));
                    else if (y > 0)
                        matrix.postTranslate(0, -y);
                }
            }
            return true;
        }
    }

    @Override
    protected void onMeasure(int widthMeasureSpec, int heightMeasureSpec)
    {
        super.onMeasure(widthMeasureSpec, heightMeasureSpec);
        width = MeasureSpec.getSize(widthMeasureSpec);
        height = MeasureSpec.getSize(heightMeasureSpec);
        // Fit to screen.
        float scale;
        float scaleX = (float) width / (float) bmWidth;
        float scaleY = (float) height / (float) bmHeight;
        scale = Math.min(scaleX, scaleY);
        matrix.setScale(scale, scale);
        setImageMatrix(matrix);
        saveScale = 1f;

        // Center the image
        redundantYSpace = (float) height - (scale * (float) bmHeight);
        redundantXSpace = (float) width - (scale * (float) bmWidth);
        redundantYSpace /= (float) 2;
        redundantXSpace /= (float) 2;

        matrix.postTranslate(redundantXSpace, redundantYSpace);

        origWidth = width - 2 * redundantXSpace;
        origHeight = height - 2 * redundantYSpace;
        right = width * saveScale - width - (2 * redundantXSpace * saveScale);
        bottom = height * saveScale - height - (2 * redundantYSpace * saveScale);
        setImageMatrix(matrix);
    }
} 
```

# mysql - 使用 GROUP_CONCAT() 的 Mysql 查询

> ID：13210444
> 
> 赞同：2
> 
> 时间：2012-11-03T15:14:33.283
> 
> 标签：mysql, group-concat

使用以下 mysql 查询：

```
SELECT DATE_FORMAT(time, '%Y-%m-%d') AS time,report,count(ip) AS countip FROM asn_data WHERE DATE_FORMAT(time, '%Y-%m-%d') > '2012-10-31' GROUP BY DATE_FORMAT(time,'%Y-%m-%d'),report; 
```

我得到以下输出：

```
+------------+---------------+---------+
| time       | report        | countip |
+------------+---------------+---------+
| 2012-11-01 | bots          |      76 |
| 2012-11-01 | openresolvers |      97 |
| 2012-11-01 | proxy         |      24 |
| 2012-11-01 | scanners      |       4 |
| 2012-11-01 | spam          |     881 |
| 2012-11-02 | bots          |     142 |
| 2012-11-02 | proxy         |      22 |
| 2012-11-02 | spam          |     667 |
| 2012-11-03 | proxy         |       1 |
+------------+---------------+---------+ 
```

获得以下输出的查询将是什么：

```
+------------+-------------+---------------+-------+----------+------+
| time       | bots        | openresolvers | Proxy | scanners | spam |
+------------+-------------+---------------+-------+----------+------+
| 2012-11-01 | 76          | 97            | 24    | 4        | 881  |
| 2012-11-02 | 142         | 0             | 22    | 0        | 667  |
| 2012-11-03 | 0           | 0             | 1     | 0        | 0    |
+------------+-------------+---------------+-------+----------+------+ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-03T15:21:17.717

您在这里不需要组 concat，您需要旋转结果集，请尝试以下方式：

```
SELECT DATE_FORMAT(time, '%Y-%m-%d') AS time,
SUM(CASE WHEN report = 'bots' THEN ipc ELSE 0 END) AS bots,
SUM(CASE WHEN report = 'openresolvers' THEN ipc ELSE 0 END) AS openresolvers,
SUM(CASE WHEN report = 'Proxy' THEN ipc ELSE 0 END) AS Proxy,
SUM(CASE WHEN report = 'scanners' THEN ipc ELSE 0 END) AS scanners,
SUM(CASE WHEN report = 'spam' THEN ipc ELSE 0 END) AS spam
FROM (
SELECT count(ip) AS ipc, report, DATE(time) as time 
FROM  asn_data 
GROUP BY report, DATE(time)) i
WHERE DATE_FORMAT(time, '%Y-%m-%d') > '2012-10-31'
GROUP BY time; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-03T15:27:09.287

```
SELECT   DATE(time)                  AS time,
         SUM(report='bots'         ) AS bots,
         SUM(report='openresolvers') AS openresolvers,
         SUM(report='proxy'        ) AS Proxy,
         SUM(report='scanners'     ) AS scanners,
         SUM(report='spam'         ) AS spam
FROM     asn_data
WHERE    time > '2012-10-31'
GROUP BY DATE(time) 
```

在[sqlfiddle](http://sqlfiddle.com/#!2/522f1/6/0)上查看。

如果您希望排除 where 的记录`ip IS NULL`，请添加`AND ip IS NOT NULL`到每个`SUM()`函数中。

# c - 为什么我在 C 中得到参数是初始化错误？

> ID：13210445
> 
> 赞同：1
> 
> 时间：2012-11-03T15:14:35.680
> 
> 标签：c, parameters, initialization

```
struct subscriber

{

  char phonenumber[20];

  char name[50];

  float amount;

}s;

void modifyrecords()

  FILE *f;

  char phonenumber[20];

  long int size=sizeof(s);

  if((f=fopen("c:/file.ojs","rb+"))==NULL)

    exit(0);

  system("cls");

  printf("Enter phone number of the subscriber to modify:");

  scanf("%[^\n]",phonenumber);

  fflush(stdin);

  while(fread(&s,sizeof(s),1,f)==1)

  {

    if(strcmp(s.phonenumber,phonenumber)==0)

    {

      system("cls");

      printf("\n Enter phone number:");

      scanf("%s",&s.phonenumber);

      printf("\n Enter name: ");

      fflush(stdin);

      scanf("%[^\n]",&s.name);

      printf("\n Enter amount: ");

      scanf("%f",&s.amount);

      fseek(f,-size,SEEK_CUR);

      fwrite(&s,sizeof(s),1,f);

      break;

    }

  }

  fclose(f);

} 
```

C:\Users***\Desktop\ac|394|错误：参数“大小”已初始化| 我在此代码中收到参数“大小”已初始化错误。谷歌搜索后，我发现我可能必须通过某些参数来抑制这类错误。这是唯一的解决方案吗？实际上我正在使用 Code::Blocks 所以如果是我如何在其中传递命令行参数的唯一方法？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-03T15:32:01.097

您在这里有一个简单的语法错误：

```
void modifyrecords() 
```

应该：

```
void modifyrecords() { 
```

另外，这个：

```
scanf("%s",&s.phonenumber); 
```

应该

```
scanf("%s",s.phonenumber); 
```

这也适用于`s.name`。

# android - Android Fragments导航和backstack

> ID：13210446
> 
> 赞同：8
> 
> 时间：2012-11-03T15:14:37.407
> 
> 标签：android, navigation, android-fragments, back-stack

我有一个标题栏（有点像菜单）和 4 个片段（MAIN、A、B、C），其中 MAIN 应该是 backstack 的“主/根”片段。

我遇到的问题是，当用户通过菜单进入例如 MAIN > A > B > C 时。如果我只是使用 backstack，它将以我不想要的相反顺序进行。无论用户如何导航到这 3 个之一，我都需要返回按钮才能返回 MAIN。

![在此处输入图像描述](../Images/27fc013de364c13ac243bcf95a2a9c8b.png)

我当前的代码（这是错误的，它在不在 MAIN 中时退出应用程序并且当前片段从其他非 MAIN 片段切换）如下所示：

```
private void SwitchFragment(Fragment pFragment)
{
    FragmentTransaction ft = getSupportFragmentManager().beginTransaction();
    ft.replace(R.id.main_fl_fragmentcontainer, pFragment);
    if (_CurrentFragment == _Frag_Main)
        ft.addToBackStack(null);
    ft.commit();

    _CurrentFragment = pFragment;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-29T17:25:56.653

您的堆栈必须最多包含 2 个片段

Main 是可见的 Main 是 onBackstack / AorBorC 是可见的。用户单击后退 ==> Main 可见。用户点击返回 ==> 应用程序结束

我想 A / B / C 显示在同一个视图中，所以在这种情况下，

当用户单击您的菜单时，您必须检查当前是否显示 A/B/C 并将其替换为用户选择的菜单。

```
private void displayFragment(Fragment pFragment) {
    Fragment fr = getSupportFragmentManager()
            .findFragmentById(R.id.main_fl_fragmentcontainer);        
    FragmentTransaction ft = getSupportFragmentManager().beginTransaction();
    ft.replace(R.id.main_fl_fragmentcontainer, pFragment);
    if (_CurrentFragment == _Frag_Main) {
        ft.addToBackStack(null);
    }
    ft.commit();    
    _CurrentFragment = pFragment;
} 
```

可以覆盖`OnBackPressed`您的活动的方法。

# php - 正则表达式/PHP 替换任何重复（但灵活）的词组

> ID：13210447
> 
> 赞同：0
> 
> 时间：2012-11-03T15:14:39.497
> 
> 标签：php, regex

如何匹配重复为“ANY GROUP”或“ANYGROUP”的“Any Group”

```
$string = "Foo Bar (Any Group - ANY GROUP Baz)
           Foo Bar (Any Group - ANYGROUP Baz)"; 
```

所以他们以“Foo Bar (Any Group - Baz)”的形式返回

分隔符总是`-`

这篇文章扩展了[Regex/PHP 替换任何重复的词组](https://stackoverflow.com/questions/10709787/regex-php-replace-any-repeating-word-group/10709974)

这匹配“Any Group - ANY GROUP”，但没有空格重复时不匹配。

```
$result = preg_replace(
    '%
    (                 # Match and capture
     (?:              # the following:...
      [\w/()]{1,30}   # 1-30 "word" characters
      [^\w/()]+       # 1 or more non-word characters
     ){1,4}           # 1 to 4 times
    )                 # End of capturing group 1
    ([ -]*)           # Match any number of intervening characters (space/dash)
    \1                # Match the same as the first group
    %ix',             # Case-insensitive, verbose regex
    '\1\2', $subject); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T15:25:18.183

这很难看（正如我所说的那样），但它应该可以工作：

```
$result = preg_replace(
    '/((\b\w+)\s+)               # One repeated word
    \s*-\s*
    \2
    |
    ((\b\w+)\s+(\w+)\s+)         # Two repeated words
    \s*-\s*
    \4\s*\5
    |
    ((\b\w+)\s+(\w+)\s+(\w+)\s+) # Three
    \s*-\s*
    \7\s*\8\s*\9
    |
    ((\b\w+)\s+(\w+)\s+(\w+)\s+(\w+)\s+)  # Four
    \s*-\s*
    \11\s*\12\s*\13\s*\14\b/ix', 
    '\1\3\6\10-', $subject); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-03T16:00:24.767

最多 6 个单词的解决方案是：

```
$result = preg_replace(
    '/
     (\(\s*)
     (([^\s-]+)
      \s*?([^\s-]*)
      \s*?([^\s-]*)
      \s*?([^\s-]*)
      \s*?([^\s-]*)
      \s*?([^\s-]*))
     (\s*\-\s*)
     \3\s*\4\s*\5\s*\6\s*\7\s*\8\s*
     /ix',
     '\1\2\9',
     $string); 
```

检查**[这个演示](http://ideone.com/mR11VB)**。

# emacs - 在emacs中搜索时复制单词

> ID：13210450
> 
> 赞同：1
> 
> 时间：2012-11-03T15:14:55.483
> 
> 标签：emacs

有什么棘手的方法可以做到这一点：在我的文本文件中，我有一个单词列表，一行一个单词。我想用 搜索`new-word`列表中的单词`C-s`。为了搜索它，我需要在 中键入单词`minibuffer`，如果`new-word`列表中不存在，我想将它插入到列表中。看来我必须重新输入中的单词`normal buffer`，有什么方法可以记住我刚刚输入的单词`minibuffer`并将其复制到中`normal buffer`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-03T18:38:50.650

`RET`之后立即按下`C-s`允许您使用支持编辑和过去搜索历史的普通 minibuffer 提示输入字符串。在该模式下，您可以使用常规缓冲区命令，例如`C-SPC`、`M-w`和`C-y`，从搜索微型缓冲区复制内容并将其粘贴到常规缓冲区中，反之亦然。

# sql - sql cte if 语句

> ID：13210454
> 
> 赞同：2
> 
> 时间：2012-11-03T15:15:40.763
> 
> 标签：sql, sql-server, sql-server-2008

这可能是一个坏主意，但只是想知道？

```
;with Products
AS
(
/* can you have an if statement in here? */
select * from products

/* or */

select * from products 
where condition

) 
```

我在想的是，如果有时你有一个搜索字符串或没有。您如何在 cte 中考虑到这一点？

或者，在一个程序中使用 2 个 cte 可能是一个更好的主意？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-03T15:26:01.317

如果您将搜索字符串作为参数传递，您可以在一个语句中检查它是否为空或不是全部。例如：

```
select *
from MyTable
where MyColumn = @SearchString
    or @SearchString is null; 
```

这将在参数不为空时返回匹配的记录，并在为空时返回所有记录。

作为另一种选择，您始终可以将`case`语句放在 where 子句中。

除此之外，如果您确实需要不同的查询，您当然可以使用`if`BUT 进行分支，但您的查询必须是声明 CTE 后的下一条语句。因此，您必须在 if 语句的每个分支中都有一份副本或您的 CTE 和查询。

如果您正在考虑传递整个 where 子句并将其全部作为动态 SQL 运行（编辑：意思是非参数化的连接字符串，而不是 ORM 类型的 sp_executesql），我会尝试重构以首先使用上述任何方法，如动态 SQL存在[固有问题](http://www.sommarskog.se/dynamic_sql.html)。动态 SQL 一开始通常看起来很聪明和优雅，但更多时候应该将其视为最后的手段，只有当其他选项以某种方式变得更糟时。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-04-10T12:30:48.833

表变量也可能对您有所帮助。检查它是否有帮助..

DECLARE @tbl TABLE(id int,name varchar(500), .... )

if <@booleanexpression = 1> INSERT INTO @tbl select * from products else INSERT INTO @tbl select * from products where condition..

使用 cte 作为（从 @tbl 中选择 *）

从 cte 中选择 *

# ruby-on-rails - Ruby on Rails routes.rb

> ID：13210457
> 
> 赞同：1
> 
> 时间：2012-11-03T15:15:46.520
> 
> 标签：ruby-on-rails

我被困在试图配置 Rails 路线的[Rails 教程中。](http://ruby.railstutorial.org/chapters/filling-in-the-layout#code-static_page_routes)

这是我的路线.rb：

```
SampleApp::Application.routes.draw do
  match '/', :to  => 'static_pages#home', :via => :get
  match '/help',:to => 'static_pages#help', :via => :get
  match '/about', :to => 'static_pages#about', :via => :get
  match '/contact', :to => 'static_pages#contact', :via => :get 
```

当我尝试访问“localhost”时，我得到：

> 没有路由匹配 [GET] "/static_pages/help" 尝试运行 rake 路由以获取有关可用路由的更多信息。

我也试过：

```
match '/', :to  => 'static_pages#home'
  match '/help',:to => 'static_pages#help'
  match '/about', :to => 'static_pages#about'
  match '/contact', :to => 'static_pages#contact' 
```

但这给出了同样的错误。它仅在我使用时有效：

```
get 'static_pages/about' 
```

我怎样才能让 localhost 工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-03T15:22:26.053

尝试将以下内容放在 routes.rb 的末尾

```
match ':action' => 'static#:action' 
```

`/help`然后将呈现一个请求`app/views/static/help.html.erb`。不要忘记创建`static`控制器，即使它是空的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-03T15:42:33.597

试试这个：

```
match '/help', to: 'static_pages#help'
match '/about', to: 'static_pages#about'
match '/contact', to: 'static_pages#contact' 
```

# xml - 意外的 XML 声明。不允许空格

> ID：13210458
> 
> 赞同：0
> 
> 时间：2012-11-03T15:15:51.370
> 
> 标签：xml, c#-4.0

我在 C#.Net 中工作。我正在生成 XML 并将其绑定到树视图。这是我的代码部分..

```
sb.Append("<?xml version='1.0' encoding='utf-8'?>");
sb.Append("<astreeview xmlns:xsi='http://www.w3.org/2001/XMLSchema-instance'>");
sb.Append("<astreeview-nodes>");
........................... 
```

在我的本地机器上它工作正常，而且我已经部署在 2 个不同的服务器上。在一台服务器中，我正确获取了树视图。但是在另一台服务器上，我收到了类似的错误。

> 意外的 XML 声明。XML 声明必须是文档中的第一个节点，并且它之前不允许出现空白字符。第 1 行，位置 12285。

两台服务器都使用相同的代码。这里可能是什么问题...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-03T15:42:42.200

该字符串中似乎有一些空格或其他字符

去掉它..

清除字符串生成器，然后 appendLine 它

```
sb.Clear();
sb.AppendLine("<?xml version='1.0' encoding='utf-8'?>"); 
```

# intellij-idea - 无法在 intellij 中设置断点

> ID：13210461
> 
> 赞同：37
> 
> 时间：2012-11-03T15:16:15.910
> 
> 标签：intellij-idea, breakpoints

我正在尝试设置断点，我最近使用“mvn install”编译的几个类没有任何反应。我可以为其他人已经构建的类设置断点。如果有人知道如何解决它，请告诉我。

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2015-12-12T01:23:16.970

使用 IDEA CE 15 时遇到同样的问题：删除 Python CE 插件 5.0.143.103 解决了问题...但没有 Python 解析！:(

* * *

## 回答 #2

> 赞同：38
> 
> 时间：2012-11-03T16:29:14.703

File -> Invalidate Caches and Restart 帮助解决了这个问题。感谢 Tomasz Nurkiewicz 的指导

* * *

## 回答 #3

> 赞同：25
> 
> 时间：2015-12-03T16:15:06.247

就我而言，问题是由 PHP 插件（[https://plugins.jetbrains.com/plugin/?id=6610](https://plugins.jetbrains.com/plugin/?id=6610)）引起的。即使在“使缓存无效并重新启动”之后，问题仍然存在。

卸载那个PHP插件，解决了我的问题。

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2012-11-03T15:25:18.227

*什么都没有发生*，你的意思是断点没有被命中？仔细看看[断点图标](https://www.jetbrains.com/help/idea/breakpoints-icons-and-statuses.html)。[![有效的](../Images/09c9d7814100fed054364631a7c84f2c.png)](https://i.stack.imgur.com/uKXuE.gif) 特别是看到和[![无效的](../Images/c892aa3ab7476681b2f07073fd2219f5.png)](https://i.stack.imgur.com/Hu14t.gif) 图标之间的区别。后者表示您在调试时运行的代码在该行上没有任何有意义的指令。

这种行为的原因之一是当您运行的代码不是您看到的代码时。当应用程序服务器仍在运行旧的 JAR 或类似的东西时，可能会发生这种情况。这似乎是这种情况，因为您说断点在旧代码中工作。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-02-20T14:22:56.813

修复断点的**解决方案**是通过以下步骤将通配符文件扩展名“*.py”添加到 Python 中的 Python 文件类型（它必须具有通配符符号前缀，而不仅仅是“.py”）：

*   去：

    > IntelliJ IDE > 首选项 (CMD+,) > 编辑器 > 文件类型 > 识别的文件类型

*   在“可识别的文件类型”标题下：

    > 向下滚动；选择“Python”（关联的注册模式将在下面显示）

*   在“注册模式”标题下：

    > 点击“+”图标；输入“*.py”，点击确定（做任何必要的事情来实现这一点，包括在必要时删除/重命名不带通配符的其他人）

*   通过以下方式添加断点：

    > 选择代码行（不是空行或注释）；转到：运行>切换行断点（CMD + F8）

*   通过以下步骤配置带断点的调试：

    > 运行 > 编辑配置...；点击“+”；选择“Python”；为“名称”属性添加一个值；选择要调试的“.py”文件的位置（在“脚本”属性中）；点击确定

*   通过以下步骤使用断点进行调试：

    > 运行 > 调试... (Fn+CMD+F9); 等到它在断点处停止；通过将鼠标悬停在变量上来检查文件本身中显示的变量值；单击变量并在“调试”窗口中查看框架和变量详细信息，方法是：查看 > 工具窗口 > 调试 (CMD+5)

**重要说明：**最初我尝试执行以下操作，但在每次执行之后我仍然**无法**使用断点：

*   删除并重新安装 Python 插件：

    > 输入 CMD+,; 在对话框窗口中转到 Plugins > Install Jetbrains Plugin.. > "Python" > Install

*   更新 IntelliJ Ultimate 版到最新版本 v2016.3.4

*   即将：

    > 文件 > 使缓存无效并重新启动

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-11-30T12:12:47.757

右键单击装订线（通常单击以设置断点）选择“配置装订线图标...”，然后启用顶部显示“显示装订线图标”的复选框

那为我修好了

# java - 正则表达式 Java 合并模式

> ID：13210463
> 
> 赞同：0
> 
> 时间：2012-11-03T15:16:19.500
> 
> 标签：java, regex

我有这三个正则表达式。它们单独工作，但我想将它们合并为一个模式。

```
regex1 = [0-9]{16}
regex2 = [0-9]{4}[-][0-9]{4}[-][0-9]{4}[-][0-9]{4}
regex3 = [0-9]{4}[ ][0-9]{4}[ ][0-9]{4}[ ][0-9]{4} 
```

我使用这种方法：

```
Pattern.compile(regex); 
```

哪个是合并它们的正则表达式字符串？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-03T15:37:36.367

您可以使用[反向引用](http://docs.oracle.com/javase/tutorial/essential/regex/groups.html#backref)：

```
[0-9]{4}([ -]|)([0-9]{4}\1){2}[0-9]{4} 
```

仅当分隔符全部为

*   空间
*   连字符
*   空白的

`\1`意思是“这完全匹配第一个[捕获组](http://docs.oracle.com/javase/tutorial/essential/regex/groups.html)- 括号中的表达式 - 匹配”。

由于`([ -]|)`是该组，因此其他两个分隔符都需要相同才能匹配模式。

您可以[将其进一步简化](http://docs.oracle.com/javase/tutorial/essential/regex/pre_char_classes.html)为：

```
\d{4}([ -]|)(\d{4}\1){2}\d{4} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-03T15:21:15.550

以下应该匹配三个模式匹配的任何内容：

```
regex = [0-9]{4}[- ]?[0-9]{4}[- ]?[0-9]{4}[- ]?[0-9]{4} 
```

也就是说，我假设您对数字之间的连字符、空格**或**什么都没有感到满意？

*注意：这也将匹配您拥有三者任意组合的情况，例如*

```
0000-0000 00000000 
```

*这可能不是我们想要的？*

* * *

或者，如果您需要匹配三个单独的模式中的任何一个，则只需将它们与 连接`|`，如下所示：

```
([0-9]{16})|([0-9]{4}-[0-9]{4}-[0-9]{4}-[0-9]{4})|([0-9]{4} [0-9]{4} [0-9]{4} [0-9]{4}) 
```

（您的原始示例似乎在空格和连字符周围有不必要的方括号）

# javascript - jQuery / Javascript - 将日期时间转换为用户的时区日期时间

> ID：13210464
> 
> 赞同：0
> 
> 时间：2012-11-03T15:16:23.363
> 
> 标签：javascript, jquery, datetime, timezone, data-conversion

我更新了这个问题

我想将日期时间转换为用户所在国家/地区（时区）中的等效日期时间。

我有这种格式的日期时间，即 UTC/GMT：

```
Oct 31, 2012 08:10:02 
```

现在，根据用户的客户端时区，我想使用当前浏览器/客户端用户的时区转换该日期时间

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T15:29:50.457

如果我理解正确，您希望能够以 UTC 时间设置倒计时的结束日期，而不是浏览器的本地时间。您*无需*修改​​插件即可执行此操作。您只需要对象`setUTC...`中的方法`Date`。看看这里：[http](http://www.w3schools.com/jsref/jsref_obj_date.asp) ://www.w3schools.com/jsref/jsref_obj_date.asp 。

例如：

```
var endofworld = new Date(0);
endofworld.setUTCFullYear(2012);
endofworld.setUTCMonth(11);
endofworld.setUTCDate(21);

$('.countdown').countdown({ date: endofworld }); 
```

# ios - iOS 为视图设置模糊动画

> ID：13210466
> 
> 赞同：2
> 
> 时间：2012-11-03T15:17:09.077
> 
> 标签：ios, animation, uiview, blur, core-image

我想快速为 UIView 上的模糊设置动画，以用作我的应用程序中的过渡。我不知道从哪里开始。我相信核心形象是完成这项工作的合适工具。谁能指出我如何模糊 UIView 的示例？我假设我需要将视图转换为单个 UIImage，但我不知道从那里开始。

提前致谢！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-30T16:56:36.760

拍摄视图的快照并使用 Brad Larson 的 GPUImage（GPUImageGaussianBlurFilter）让我得到了一些不错的结果。

为了使视图动画化，我创建了一个带有模糊图像的 ImageView 并将 alpha 通道从 0 设置为 1 以使模糊逐渐出现。

或者，我认为可以增加每帧的模糊大小。

```
#import "GPUImage.h"
...
[view.layer renderInContext:UIGraphicsGetCurrentContext()];
...
UIImage *image = UIGraphicsGetImageFromCurrentImageContext();
...
GPUImageGaussianBlurFilter * filter = [[GPUImageGaussianBlurFilter alloc] init];
filter.blurSize = 0.5;
UIImage * blurred = [filter imageByFilteringImage:image]; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-03T15:51:59.233

一个uiview层的rasterizeScale是你所需要的，这里是为UIVIew添加模糊效果的代码：

```
CALayer *layer = [self.blurView layer];
[layer setRasterizationScale:0.3];
[layer setShouldRasterize:YES]; 
```

有关详细信息，请参阅[CALayer 的 Apple 文档](https://developer.apple.com/library/mac/#documentation/graphicsimaging/reference/CALayer_class/Introduction/Introduction.html)，本[教程](http://www.dimzzy.com/blog/2010/11/blur-effect-for-uiview/)也可能对您有所帮助，希望对您有所帮助

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-14T20:06:38.260

我最近做了一些测试，在不同的模糊设置下模糊了一系列图像，并简单地使用 UIImageView 为它们设置动画。你可能想看看：

[动画高斯模糊](https://github.com/kenshin03/AnimatedGaussianBlur)

# upgrade - 用于 rtem 安装的 gnu fileutils 升级

> ID：13210467
> 
> 赞同：1
> 
> 时间：2012-11-03T15:17:13.290
> 
> 标签：upgrade, gnu, fileutils, rtems

要安装 RTEMS 和所有要求，我需要安装箱才能正常工作，但似乎并非如此。

事实上，当我尝试“install -c -d tmp/foo/bar”时，它并没有按应有的方式创建目录。

在 RTEMS 文档中，他们说我需要升级 GNU fileutils，但我应该怎么做呢？我已经搜索了互联网，但什么也没找到...

[您可以在此处](http://rtems.org/onlinedocs/doc-current/share/rtems/html/started/started_15.html#Distribution-Independent-Potential-GNU_002fLinux-Issues)查看相关的 RTEMS 入门页面。

我正在运行一个centos 6.3 虚拟机。

谢谢，纪尧姆

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-08-18T17:54:00.280

对于原始问题，您需要安装更新的[GNU coreutils](http://www.gnu.org/software/coreutils/)。现在，您应该使用[RTEMS Source Builder (RSB)](http://www.rtems.org/wiki/index.php/RSB)来开始使用 RTEMS，因为 RSB 将以独立于主机的方式构建您需要的所有依赖项。

# php - php 内的 javascript 错误 ReferenceError: img is not defined

> ID：13210468
> 
> 赞同：-1
> 
> 时间：2012-11-03T15:17:14.627
> 
> 标签：php, javascript

photos[] 是一组照片名称，

```
foreach($photos as $key=>$value)
{
    @$blocks .= '<div><img src="'.$value.'" onload="img=this"><img src="remove.png" onclick=remove_image(img)></div>';
} 
```

因此，当单击第一张照片的删除图标时，它工作得很好，但其他人显示此错误：

`ReferenceError: img is not defined`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-03T15:22:03.393

该`img`变量被全局存储，这意味着每次加载新图像时它都会被覆盖。相反，您应该为图像分配唯一 ID，并让它们的删除按钮按 ID 删除图像。例如：

```
foreach($photos as $key=>$value)
{
    @$blocks .= '<div><img src="'.$value.'" id="img'.$key.'"><img src="remove.png" onclick=remove_image(document.getElementById("img'.$key.'"))></div>';
} 
```

（我对 PHP 不是很熟悉，如果我在某处犯了语法错误，很抱歉）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-03T16:16:22.353

谢谢LukeGT，你的回答是对的，不过我发现还是用jquery处理比较好，

```
onclick="remove_image($(this).prev())" 
```

或者

```
onclick="remove_image($(this).parent())" 
```

删除整个 div。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-03T15:21:56.683

单击删除按钮时，您应该刷新页面。

# google-apps-script - 是否可以从另一个脚本读取 Google Apps 脚本的内容

> ID：13210469
> 
> 赞同：6
> 
> 时间：2012-11-03T15:17:28.810
> 
> 标签：google-apps-script, mime, google-drive-api

我正在寻找一种在独立 Google Apps 脚本中读取 script.gs 文件内容的方法。我在不会失败的 Docslist.File 服务中找不到合适的 getAs() Mime 格式。这样做的背景是我想使用 html 服务/内容服务能够将公共 GAS 源示例嵌入 Google 站点和其他地方。（与嵌入 Gist 样本的方式非常相似）。有任何想法吗？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-11-04T16:25:05.857

事实上，这是可能的。这得到 Code.gs：

```
function myFunction() {
  throw ScriptApp.getResource("Code").getDataAsString();
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-03T17:55:31.917

无法以编程方式检索“.gs”文件的内容。您只能请求带有“.html”扩展名的文件，并且可能您可以在项目中返回它。

此请求是在允许本地开发或 Git 集成以提供 API 方式来获取/设置文件中的脚本源的上下文中提出的。请将您的评论放在此问题跟踪请求中，如果有意义，请记录新的。

[http://code.google.com/p/google-apps-script-issues/issues/detail?id=1108](http://code.google.com/p/google-apps-script-issues/issues/detail?id=1108)

# drupal-7 - 如何在 drupal 7 中创建多个用户帐户类型

> ID：13210470
> 
> 赞同：1
> 
> 时间：2012-11-03T15:17:34.290
> 
> 标签：drupal-7

我想为我的网站创建多个用户帐户类型，例如 Paypal 或类似的。用户可以选择自己的账户类型进行注册。这是示例图片： ![在此处输入图像描述](../Images/f00f63f5dcf39b95d6556aa95e28cea4.png)

但在 drupal 我只看到 2 种帐户类型，匿名和身份验证。我怎样才能添加更多？并且每种帐户类型都有不同的字段来输入信息。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T15:53:45.473

您可以在 中为用户添加角色`People > Permissions > Roles`。根据用户的角色，有很多方法可以添加输入字段。

# python - 测试函数中的 Python NameError

> ID：13210473
> 
> 赞同：-3
> 
> 时间：2012-11-03T15:17:51.723
> 
> 标签：python, nameerror

我多次遇到这个问题，不知道如何处理。我的许多测试函数（例如`test_add`）返回 a `NameError`，尽管测试的函数在那里。例如：

```
def test_add():
   '''Testfunction for add'''
   assert add(1)==[1]
   assert add(2)==[1, 2]
   assert add(3)==[1, 2, 3]
def add(n):
   pass 
```

可能是什么问题呢？

好的，这是实际的代码：

```
def test_add():
'''Testfunction for add'''
assert add(1)==li+[1]
assert add(2)==li+[1, 2]
assert add(3)==li+[1, 2, 3]

def add(n):
'''Adds a new element to the list of scores.
    n is an integer number between 1 and 100.
    Returns the new list'''
global li
li.append(n)
return li 
```

它是一个更长的程序的一部分，所以我不能全部发布。当我运行测试函数时，它给了我一个名称错误，说“添加”没有定义。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-03T15:21:50.037

您发布的代码不会抛出`NameError`. 无论您在*实际*代码中做什么都是不同的。您可能应该发布您*实际的、可运行*的代码（您自己按照发布的方式运行并看到错误）。

# ruby-on-rails - 购物车中的数量 模型基本逻辑 Ruby on Rails

> ID：13210476
> 
> 赞同：1
> 
> 时间：2012-11-03T15:18:12.567
> 
> 标签：ruby-on-rails, ruby-on-rails-3, if-statement, model, logic

我正在尝试将一些非常基本的逻辑应用于我的观点，但到目前为止还失败了。

如果有以下条件，我想做的是返回 item.discount_price：

1.  item.product_id 等于 1
2.  Cart.item.quantity 计数等于或大于 2。

目前我有以下内容：

物品型号

```
class Item < ActiveRecord::Base
belongs_to :product
belongs_to :cart

def price_check

    if  Item.product_id = 1 && Item.quantity.count >= 2 
        return Item.discount_price
    else
        return Item.unit_price
    end 

end 
```

结尾

看法

```
<% for item in @cart.items %>
<tr class="<%= cycle :odd, :even %>">
  ...
  <td class="price"><%= gbp(item.price_check) %></td>
  ...
</tr> 
```

关联如下：

```
Cart - has_many :items
Items - Belongs_to :cart and :products
Products - has_ many :items 
```

我不断收到的错误：

```
 NoMethodError in Carts#show

Showing C:/Sites/checkout/app/views/carts/show.html.erb where line #12 raised:

undefined method `quantity' for #<Class:0x50c3058>

Extracted source (around line #12):

9:        <tr class="<%= cycle :odd, :even %>">
10:       <td><%=h item.product.name %></td>
11:       <td class="qty"><%= item.quantity %></td>
12:       <td class="price"><%= gbp(item.price_check) %></td>
13:       <td class="price"><%= gbp(item.full_price) %></td>
14:       <td><%= button_to 'Remove', item, :method => :delete %></td>
15:       </tr>

app/models/item.rb:12:in `price_check'
app/views/carts/show.html.erb:12:in `block in _app_views_carts_show_html_erb___389237738_48997308'
app/views/carts/show.html.erb:8:in `_app_views_carts_show_html_erb___389237738_48997308' 
```

人们可以提供解决此问题的任何帮助将不胜感激！谢谢 E

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T16:01:49.520

RadBrad 有正确的想法，但执行错误

```
def price_check
  # Product Discount for Lavender Heart (Product code 001, greater than 2 in cart)        
  # Thought: Shouldn't you check to see if the name of the item is "Lavender Heart"?
  #          Checking if the product_id is 1 makes this test brittle
  if product_id == 1 && cart.items.quantity.count >= 2 
    discount_price
  else
    unit_price
  end 
end 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-03T15:40:31.993

第一个明显的问题是：

```
if  Item.product_id = 1 && Item.quantity.count >= 2 
```

您要求调用 CLASS 方法 product_id。你想要实例方法，即

```
if @item.product_id == 1 && @item.quantity >= 2 
```

通常这会在前面加上：

```
@item = Item.find(params[:id]) 
```

# wpf - .Net Framework 3.5 不显示来自 webbrowser 导航的图像

> ID：13210484
> 
> 赞同：1
> 
> 时间：2012-11-03T15:18:47.953
> 
> 标签：wpf, vb.net, .net-4.0, .net-3.5, vb.net-2010

经过几个小时的搜索，我被这个问题难住了，所以我希望有人能帮助我吗？所以我的程序是一个非常简单的概念。这是一个用 vb.net 编写的 WPF，它使用一个框架来调用一个页面，该页面显示来自网络浏览器的网页图像。现在最重要的是 .xaml 后面有代码，如果单击链接并在 10 秒后隐藏框架，则该代码会指示 Web 浏览器打开新浏览器。我从这里用 C# 获取代码并在 vb 中翻译。

所以这个程序运行良好，并且是用 .Net Framework 4.0 编写的。但是，我有另一个程序，我想将此代码集成到其中，它是用 .Net Framework 3.5 编写的，它不会显示与用 .Net Framework 4.0 编写的程序相同的输出。沮丧我写了这个程序的两个例子，压缩它们并上传它们，这样你就可以下载它们以帮助我。

[http://simpletechss.com/1stAidApp4.zip](http://simpletechss.com/1stAidApp4.zip)（显示来自网页的 007 图像，然后在 10 秒后隐藏。）

[http://simpletechss.com/1stAidApp35.zip](http://simpletechss.com/1stAidApp35.zip)（不显示来自网页的 007 图像，然后在 10 秒后隐藏。）vb 所以我再次想知道为什么我不能使用 .Net 3.5 在 WPF 中显示来自网页的 007 图像但是可以在.Net 4.0 中吗？两个程序中的代码相同并且它们没有语法错误。

提前致谢！

# android - 我无法跟踪 google play 的 referrer_install

> ID：13210487
> 
> 赞同：2
> 
> 时间：2012-11-03T15:19:34.733
> 
> 标签：android, installation, referrer, flurry

我正在尝试将安装事件报告为乱七八糟。

我已经实现了在安装应用程序时调用的 ReferralReceiver。我在地图中有所有参数。我正在使用我的 Flurry 代码调用 Flurry：

```
FlurryAgent.onStartSession(context, FlurryCode);
FlurryAgent.logEvent("Referral", referralParams);
FlurryAgent.onEndSession(context); 
```

数据被存储到 SharedPreferences 但它没有被发送到flurry。

有没有人遇到过这个问题。

```
@Override
public void onReceive(Context context, Intent intent)
{
     LogManager.Info("ReferralReceiver intent.action=" + intent.getAction());
     LogManager.Info("ReferralReceiver intent.DataString=" + intent.getDataString());
     LogManager.Info("ReferralReceiver intent.intent=" + intent.toString());

    // Workaround for Android security issue: http://code.google.com/p/android/issues/detail?id=16006
    try
    {
        final Bundle extras = intent.getExtras();
        if (extras != null) {
            extras.containsKey(null);
        }
    }
    catch (final Exception e) {
        return;
    }

    Map<String, String> referralParams = new HashMap<String, String>();

    // Return if this is not the right intent.
    if (! intent.getAction().equals("com.android.vending.INSTALL_REFERRER")) { //$NON-NLS-1$
        return;
    }

    String referrer = intent.getStringExtra("referrer"); //$NON-NLS-1$
    if( referrer == null || referrer.length() == 0) {
        return;
    }

    try 
    {
        referrer = URLDecoder.decode(referrer, "UTF-8");
    } 
    catch (UnsupportedEncodingException e1) {
        // TODO Auto-generated catch block
        e1.printStackTrace();
    }

    LogManager.Info("ReferralReceiver intent.referrer=" + intent.getStringExtra("referrer"));

    SharedPreferences storage = context.getSharedPreferences(ReferralReceiver.PREFS_FILE_NAME, Context.MODE_PRIVATE);
    SharedPreferences.Editor editor = storage.edit();
    editor.putString("referrer", referrer);
    editor.commit();

    try {
        if (intent.hasExtra("referrer")) {
            String referrers[] = referrer.split("&");
            for (String referrerValue : referrers) 
            {
                String keyValue[] = referrerValue.split("=");
                if (keyValue.length==2)
                {
                    referralParams.put(keyValue[0], keyValue[1]);
                }
            }
        }
    } 
    catch (Exception e) 
    {
        LogManager.Error(e);
        return;
    }

    ReferralReceiver.storeReferralParams(context, referralParams);

    String FlurryCode = SaverrUtils.GetFlurryCode();
    FlurryAgent.onStartSession(context, FlurryCode);
    FlurryAgent.logEvent("Referral", referralParams);
    FlurryAgent.onEndSession(context);
    LogManager.Info("New_Install");
}

public final static String PREFS_FILE_NAME = "ReferralParamsFile";

 /*
 * Stores the referral parameters in the app's sharedPreferences.
 * Rewrite this function and retrieveReferralParams() if a
 * different storage mechanism is preferred.
 */
public static void storeReferralParams(Context context, Map<String, String> params)
{
    SharedPreferences storage = context.getSharedPreferences(ReferralReceiver.PREFS_FILE_NAME, Context.MODE_PRIVATE);
    SharedPreferences.Editor editor = storage.edit();

    for(String key : SaverrUtils.EXPECTED_REFERRER_PARAMETERS)
    {
        String value = params.get(key);
        if(value != null)
        {
            editor.putString(key, value);
        }
    }

    editor.commit();
}

// Referral Parameters
public final static String[] EXPECTED_REFERRER_PARAMETERS = {
    "utm_source",
    "utm_medium",
    "utm_term",
    "utm_content",
    "utm_campaign",
    "referrer"
}; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-26T15:37:03.453

我认为flurry在开始/结束会话之间有最少的秒数才能实际计算。您可以将所有数据保存到共享首选项或文件中，然后当用户开始您的活动时，检查它是否已被快速处理。如果它是新的，请执行 FlurryAgent.logEvent(...)。

# asp.net - 迁移到 Win 2008 后 w3wp 中的堆栈溢出

> ID：13210489
> 
> 赞同：1
> 
> 时间：2012-11-03T15:19:56.027
> 
> 标签：asp.net, iis, stack-overflow, production-environment, w3wp

我们已将 ASP.NET 4 应用程序迁移到新服务器 (2008 R2) 并受到令人讨厌的生产问题的困扰 - ASP.NET 工作进程中偶尔出现堆栈溢出。

这些记录在事件日志中：

```
Faulting application name: w3wp.exe, version: 7.5.7601.17514, timestamp: 0x4ce7afa2
Faulting module name: clr.dll, version: 4.0.30319.269, time stamp: 0x4ee9d6e1 
Exception code: 0xc00000fd 
Fault offset: 0x0000000000003fbc 
Faulting process id: 0x17ec 
Faulting application start time: 0x01cdb8e2663f86bc 
Faulting application path: c:\windows\system32\inetsrv\w3wp.exe 
Faulting module path: C:\Windows\Microsoft.NET\Framework64\v4.0.30319\clr.dll 
Report Id: 45eb70a1-24da-11e2-a0b9-005056ba357d 
```

有时故障模块是 MSVCR100_CLR0400.dll，它来自 VC++ 可再发行组件 - 但我认为 C++ 没有在项目中的任何地方使用过

Windows 已经很好地记录了在 Visual Studio 中打开的转储。它抱怨“没有为 w3wp.exe 加载符号”，所以我只有在尝试调试时才设法进行反汇编，而调用堆栈只是一个条目：

> clr.dll!000007fef9afd01b()

这是在故障模块是 clr.dll 的情况下。另一种异常情况，当模块为MSVCR100_CLR0400.dll时：

> MSVCR100_CLR0400.dll!000007fef9a3c9fa()
> [Frames below may be incorrect and/or missing, no symbols loaded for MSVCR100_CLR0400.dll] MSVCR100_CLR0400.dll!000007fef9a57fcb()
> MSVCR100_CLR0400.dll!000007fef9a33ee4()
> MSVCR100_CLR0400.dll!000007fef9a33f5d()
> clr.dll !000007fef9b05a08()

看起来相当有说服力的是，错误不是来自我的代码，而是来自 CLR / ASP.NET 内部——我整理了一个测试应用程序，通过无限递归强制堆栈溢出。我得到了转储，在 VS 中分析它，当我调试时，我点击了递归调用的确切行。

另一方面，故障出现在应用程序中的特定行，因此不是随机效应——但也不是每次，只是偶尔，并且从未在生产环境之外重现。

这也不是并发问题——它只记录了 1 个在线用户。

不用说，我已经尝试了基本的故障排除技术 - 到处尝试捕捉，在每一行之后记录，Application_Error - 什么都没有。执行只是在某个时候停止，我在 Windows 日志中收到错误条目

应用程序池处于集成模式，在为此目的创建的服务帐户下运行。

# java - 数学轮java

> ID：13210491
> 
> 赞同：9
> 
> 时间：2012-11-03T15:20:07.123
> 
> 标签：java, math, rounding

我的项目确实从厘米转换为英寸。我做到了：我怎样才能用 Math.round 对我的数字进行四舍五入？

```
import java.util.Scanner;  

public class Centimer_Inch
{

public static void main (String[] args)
{
        // 2.54cm is 1 inch
       Scanner cm = new Scanner(System.in); //Get INPUT from pc-Keyboard
       System.out.println("Enter the CM:"); // Write input
       //double
       double centimeters = cm.nextDouble();
       double inches = centimeters/2.54;
       System.out.println(inches + " Inch Is " + centimeters + " centimeters");

    }
} 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-03T15:26:11.583

你可以这样做：

```
Double.valueOf(new DecimalFormat("#.##").format(
                                           centimeters)));  // 2 decimal-places 
```

如果你真的想要[`Math.round`](http://docs.oracle.com/javase/6/docs/api/java/lang/Math.html#round(double))：

```
(double)Math.round(centimeters * 100) / 100  // 2 decimal-places 
```

您可以使用 3 位小数，使用`1000`4位`10000`等。我个人更喜欢第一个选项。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-11-03T15:24:51.570

为了使用该`Math.round`方法，您只需更改代码中的一行：

```
double inches = Math.round(centimeters / 2.54); 
```

如果你想保留 2 位小数，你可以使用这个：

```
double inches = Math.round( (centimeters / 2.54) * 100.0 ) / 100.0; 
```

顺便说一句，我建议你用一种更好的方法来处理这些问题，而不用四舍五入。

你的问题只是关于显示，所以你不需要改变数据的模型，你可以改变它的显示。要以您需要的格式打印数字，您可以让您的所有逻辑代码像这样，并按以下方式打印结果：

1.  在代码开头添加此导入：

    ```
    import java.text.DecimalFormat; 
    ```

2.  以这种方式打印输出：

    ```
    DecimalFormat df = new DecimalFormat("#.##");
    System.out.println(df.format(inches) + " Inch Is " +
                       df.format(centimeters) + " centimeters"); 
    ```

该字符串`"#.##"`是您的号码的显示方式（在此示例中为 2 个十进制数字）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-03T17:08:37.360

您可以使用以下命令打印到小数点后两位。

```
 System.out.printf("%.2f inch is %.2f centimeters%n", inches, centimeters); 
```

# web-applications - Yii 确定相关模型的存在

> ID：13210492
> 
> 赞同：1
> 
> 时间：2012-11-03T15:20:22.290
> 
> 标签：web-applications, activerecord, yii, findall

我想运行一个 findAll 查询，它只返回不存在相关记录的记录。

谁能告诉我这是如何在 Yii 中完成的？

只是一点点上下文，以防万一它有帮助 -

我正在开发一个调查应用程序，我正在使用的对象是-

问题调查回答问题

调查问题 HAS_MANY 已回答问题

因此，我想返回不存在相关 AnsweredQuestion 的 QuestionSurvey 模型。

提前致谢，

缺口

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-03T15:23:28.060

如果你`SurveyQuestion::model()->with('AnsweredQuestion')->findAll()`这将自动发生。因为它会将所有记录拉下来，并由一个连接在一起`INNER JOIN`（除非你另有说明），因此如果没有答案，它不会拉下任何问题。

...我认为。

**从您的评论中更新**
确定，我把它缠在了我的头上。您实际上想查看所有不存在的地方`SurveyQuestions`。在这种情况下，如果行不存在`AnsweredQuestions`，您希望 Yii 执行一个将为连接表拉出 NULL 记录的操作。`LEFT JOIN`然后，您需要向关系中添加一个条件，说明位置`AnsweredQuestion.id is NULL`（或者无论您的主键是什么，实际上可以是任何字段，但主键是很好的做法）。

如果这是一个单一实例类型的事情而不是更永久的关系，那么你可以这样做：

```
SurveyQuestion::model()->with(array(
    'AnsweredQuestion'=>array(
        'joinType'=>'LEFT JOIN', 
        'condition'=>'`AnsweredQuestion`.`id` is NULL')
    )->findAll(); 
```

# sql - 在带有行值的sql select语句中附加行号

> ID：13210493
> 
> 赞同：3
> 
> 时间：2012-11-03T15:20:26.190
> 
> 标签：sql, oracle

我正在尝试将 select 语句结果连接成一行。
例如：对于这个选择语句输出：

```
Name  
ABC  
DEF  
GHI 
```

我需要以下输出：
名称

```
1 ABC, 2 DEF, 3 GHI 
```

（意味着行号应该附加在每行的前面）
我正在使用 wm_concat() 函数，但它给了我以下 o/p ：`ABC,DEF,GHI`
有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-03T15:28:56.540

听起来你想要类似的东西。该`listagg()`功能在 Oracle 11g+ 中可用：

```
select listagg(cast(rownum as varchar2(20))||' '|| name, ', ') 
        within group (order by name) name
from yourtable 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!4/c93ef/1)

结果：

```
|                NAME |
-----------------------
| 1 ABC, 2 DEF, 3 GHI | 
```

如果您没有 Oracle 11g，那么您可以使用`wm_concat()`：

```
select wm_concat(cast(rownum as varchar2(20))||' '|| name) name
from yourtable 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-03T16:00:08.773

另外，您可以使用 WITH 子句：

```
WITH tmp AS 
(
   :your_select_statement 
)
SELECT 
  LISTAGG(rownum || ' ' || :your_column, ', ') 
  WITHIN GROUP (ORDER BY :your_column) tmp
FROM tmp; 
```

然后 rownum 来自 tmp 临时表，其结果为 :your_select_statement 而不是来自主表。

# java - 静态实例变量的存储

> ID：13210494
> 
> 赞同：3
> 
> 时间：2012-11-03T15:20:33.427
> 
> 标签：java

> **可能重复：**
> [静态变量的实际内存位置是什么？](https://stackoverflow.com/questions/6569557/what-is-the-actual-memory-place-for-static-variables)

类中定义的静态实例变量存储在哪里 - 在堆中还是在永久代中？

JLS（pre java SE 7 和 Java SE 7）说：

```
17.4.1   Shared Variables
Memory that can be shared between threads is called shared memory or heap
memory.
All instance fields, static fields and array elements are stored in heap memory. 
```

但是[这篇](http://openjdk.java.net/jeps/122)文章说：

```
Success Metrics
...
Class metadata, interned Strings and class static variables will be moved from the permanent generation to either the Java heap or native memory.
...

Description
...
Class metadata and statics are allocated in the permanent generation when a class is loaded and are garbage collected from the permanent generation when the class is unloaded. Interned Strings are also garbage collected when the permanent generation is GC’ed.
... 
```

根据上面的帖子静态是在永久代区域。

哪个是对的？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T16:03:19.393

在文章中

> Java 堆的一部分称为永久代

所以永久代*在*堆中。

# ruby-on-rails-3 - Rails 3 在一个分支中出现路由错误，但在另一个分支中没有

> ID：13210495
> 
> 赞同：0
> 
> 时间：2012-11-03T15:20:34.517
> 
> 标签：ruby-on-rails-3, routes, passenger

我正在使用：Rails 3.1.3、HAML 和乘客

我在暂存分支中遇到路由问题，但在合并到暂存的另一个分支中，我完全没有问题。我试过比较我的路由文件和这两个分支中的表单文件，`git diff`但是这两个文件在分支中是相同的。

一个奇怪的事情是呈现的错误页面。这是屏幕截图的链接

[错误信息](http://i.stack.imgur.com/DYNSZ.png)

还有乘客的错误：

```
Rendered time_entries/_form_fields.haml (173.2ms)
Rendered time_entries/_form.haml (194.7ms)
Rendered time_entries/edit.haml within layouts/application (196.6ms)
Completed 500 Internal Server Error in 448ms

ActionView::Template::Error (No route matches {:controller=>"time_entries"}):
    5:     .field
    6:       = form.submit "Save"
    7:       |
    8:       = link_to "Cancel", project_time_entries_path(@project)
  app/views/time_entries/_form.haml:8:in `block in     _app_views_time_entries__form_haml__894171410_105032920'
  app/views/time_entries/_form.haml:3:in   `_app_views_time_entries__form_haml__894171410_105032920'
  app/views/time_entries/edit.haml:2:in `_app_views_time_entries_edit_haml__805073897_105087770' 
```

我附上我的路线和表格中的代码

表单.haml

```
.app-form
  = error_messages_for :time_entry
  = form_for [@project, @time_entry] do |form|
    = render :partial => 'form_fields', :locals => {:form => form}
    .field
      = form.submit "Save"
      |
      = link_to "Cancel", project_time_entries_path(@project) 
```

路线.rb

```
Titi::Application.routes.draw do

  root :to => 'time_entries#index'
  match 'home' => 'home#index', :as => :home

  match '/api/*other' => TitiAPI

  resources :projects do
    member do
      get 'archive'
      get 'unarchive'
    end

    resources :viewers
    resources :labels

    resources :time_entries do
      collection do
        get 'start'
      end
      member do
        get 'new_note'
        put 'add_note'
      end
    end

  end

  resources :bookings

  resources :technical_orientations, except: [:delete]

  match 'merge_labels/:projects_id' => 'labels#merge_labels', :as => :merge_labels
  match 'move_labels/:projects_id' => 'labels#move_labels', :as => :move_labels

  resources :time_entries do
    collection do
      get 'start'
    end

    member do
      get 'new_note'
      put 'add_note'
    end
  end

  resources :users do
    member do
      get 'time_entries'
      get 'edit_password'
      put 'update_password'
      get 'suspend'
      get 'unsuspend'
    end

    new do
      get 'invite_form'
      post 'invite'
    end

    collection do
      get 'all'
    end
  end

  resources :user_sessions

  match 'reports/timesheet' => 'reports#timesheet', :as => :timesheet
  match 'reports/:week/timesheet' => 'reports#timesheet', :as => :timesheet_week
  match 'reports/timesheet_detail' => 'reports#timesheet_detail', :as =>     :timesheet_detail
  match 'reports/dashboard' => 'reports#dashboard', :as => :dashboard_report
  match 'reports/timeentries_irregulars' =>    'time_entries_irregulars#timeentries_irregulars', :as => :timeentries_irregulars
  match 'reports/:week/timeirregulars' => 'time_entries_irregulars#timeentries_irregulars', :as => :timeirregulars_week

  match 'reports/timesheet/admin' => 'reports#timesheet_admin', :as => :timesheet_admin
  match 'reports/:week/timesheet/admin' => 'reports#timesheet_admin', :as => :timesheet_admin_week

  match 'reports/time_entries' => 'time_entries_reports#landing_report'
  match 'reports/time_entries/make' => 'time_entries_reports#index'
  match 'reports/time_entries/csv' => 'time_entries_reports#make_csv'

  match 'reports/:token' => 'reports#index', :as => :reports

  match 'login' => 'user_sessions#new', :as => :login
  match 'logout' => 'user_sessions#destroy', :as => :logout
  match 'register' => 'users#register', :as => :register

  resources :companies do
    collection do
      get 'settings'      
      get "remove_photo"
    end
  end  

  match 'labels/for_project_id/:id' => 'labels#for_project_id', :as => :for_project_id

  match 'holidays_for_company/:token' => 'holidays#public', :as => :public_holiday_for_company
  match 'holidays_by_year' => 'holidays#by_year', :as => :holidays_by_year

  resources :holidays 
  resources :clients

  resources :invoices do
    member do
      get 'pdf_invoice'
      get 'cancel'
    end
    resources :invoice_lines do
      collection do
        get 'add'
      end
    end
    resources :payments
  end

  resources :tweets do
    resource :tweet_likes, :path => 'likes' do
      collection do
        get 'names'
      end
    end
  end

  match 'select_invoices' => 'invoices#select_invoices', :as => :select_invoices

  match 'pusher/auth' => 'pusher#auth'

  resources :requests, :only=>[:create]
  match  '*request', :controller => 'requests', :action => 'options', :constraints => {:method => 'OPTIONS', :format => 'json'}
end 
```

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-03T15:53:40.070

在 app/views/time_entries/_form.haml:8 上，@project 是否存在？也许您的暂存分支使用不同的数据库，因此您认为没有 @project？

此外，运行 rake routes 并验证 project_time_entries 是否在输出中。也许您需要 :as 在您的一条路线上。

# iphone - UITableView 应用程序在滚动时崩溃

> ID：13210496
> 
> 赞同：1
> 
> 时间：2012-11-03T15:21:00.363
> 
> 标签：iphone, ios, sqlite, uitableview, nsmutablearray

首先，请原谅我的英语。

我正在学习 iPhone SDK、Obj-C 并尝试制作 UITableView 应用程序。但是滚动表格时我的应用程序崩溃了。我已经搜索但无法解决我的问题，所以我在这里发布我的问题并寻求您的帮助。

TMTMemberListTableViewController.h

```
@interface TMTMemberListTableViewController : UITableViewController
{
    NSMutableArray *familyMembers;
    sqlite3 *database;
}

@property (nonatomic, retain) NSMutableArray *familyMembers;

- (void) configureCell:(TMTFamilyMemberCell *)cell withFamilyMember:(TMTFamily *)member;

@end 
```

TMTMemberListTableViewController.m

```
@interface TMTMemberListTableViewController (Private)
    - (void) loadMemberListFromDatabase;
@end

@implementation TMTMemberListTableViewController

@synthesize familyMembers;

- (void) loadMemberListFromDatabase
{
    familyMembers = [[NSMutableArray alloc] init];

    NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
    NSString *documentsDirectory = [paths objectAtIndex:0];
    NSString *path = [documentsDirectory stringByAppendingPathComponent:@"easycook.sqlite"];
    if (sqlite3_open([path UTF8String], &database) == SQLITE_OK)
    {
        const char *sql = "SELECT member_id from family";
        sqlite3_stmt *statement;
        if (sqlite3_prepare_v2(database, sql, -1, &statement, NULL) == SQLITE_OK)
        {
            while (sqlite3_step(statement) == SQLITE_ROW)
            {
                NSString *memberID = [NSString stringWithUTF8String:(char *) sqlite3_column_text(statement, 0)];
                TMTFamily *member = [[TMTFamily alloc] initWithMemberID:memberID database:database];
                [familyMembers addObject:member];
                [member release];
            }
        }
        sqlite3_finalize(statement);
    }
    else
    {
        sqlite3_close(database);
        NSAssert1(0, @"Failed to open database with message '%s'.", sqlite3_errmsg(database));
    }
}

- (void)viewDidLoad
{
    [super viewDidLoad];

    self.clearsSelectionOnViewWillAppear = NO;

    self.navigationItem.rightBarButtonItem = self.editButtonItem;
    [self loadMemberListFromDatabase];
}

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
    // Dispose of any resources that can be recreated.
}

- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{
    // Return the number of sections.
    return 1;
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    // Return the number of rows in the section.
    return [familyMembers count];
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    //static NSString *MyIdentifier = @"MyIdentifier";

    TMTFamilyMemberCell *cell = (TMTFamilyMemberCell *)[tableView dequeueReusableCellWithIdentifier:nil];
    if (cell == nil)
    {
        cell = [[[TMTFamilyMemberCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:nil] autorelease];
        cell.accessoryType = UITableViewCellAccessoryDisclosureIndicator;
    }
    TMTFamily *member = [familyMembers objectAtIndex:indexPath.row];
    // Set up the cell
    [self configureCell:cell withFamilyMember:member];
    [member release];
    return cell;
}

- (void) configureCell:(TMTFamilyMemberCell *)cell withFamilyMember:(TMTFamily *)member
{
    cell.familyMember = member;
    cell.memberNameLabel.text = member.description;
}
- (void)dealloc
{
    NSLog(@"Dealloc");
    [familyMembers release];
    [super dealloc];
} 
```

滚动表时，我的应用程序在 EXC_BAD_ACCESS 处崩溃

```
[self configureCell:cell withFamilyMember:member]; 
```

和

```
cell.memberNameLabel.text = member.description; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T17:22:32.970

This line is not incrementing retain counter: `TMTFamily *member = [familyMembers objectAtIndex:indexPath.row]`

So the following line is your problem `[member release];`

You cannot release object if you down't own it. Either retain it like that: `TMTFamily *member = [[familyMembers objectAtIndex:indexPath.row] retain];`

or

`TMTFamily *member = [[familyMembers objectAtIndex:indexPath.row] copy];`

or remove mentioned `release` completelly.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-03T17:26:14.143

首先，欢迎来到 Stack Overflow，欢迎来到 iOS 开发的世界。

您的代码有很多问题，如果您有 Apple 开发人员帐户，我强烈建议您前往 2012 WWDC 会议视频并查看有关 Modern Objective C 会议的讨论。 [https://developer.apple.com/videos/wwdc/2012/](https://developer.apple.com/videos/wwdc/2012/)

查看代码，您的错误访问可能是已发布的对象或空单元格。要确定原因，您需要启用 NSZombies。为此，请单击工具栏中的项目名称，如下所示：

![在此处输入图像描述](../Images/7a6ecb21d083407a901261db2c6d87ff.png)

在这个例子中，它被称为 PartialTransparentcy（拼写该死）。当您单击该按钮时，单击编辑方案按钮，您将看到一个选项列表。您需要单击启用僵尸对象。如果您没有看到它，请按“诊断”选项卡。

![在此处输入图像描述](../Images/56f70778fec404e15df40bca66dbf9a6.png)

然后运行你的代码，它会记录让你悲伤的对象。请记住，僵尸对象非常昂贵。如果您提交启用它们的应用程序，您将被自动拒绝。

当我查看您的单元初始化代码时，我首先注意到的是：

```
TMTFamilyMemberCell *cell = (TMTFamilyMemberCell *)[tableView dequeueReusableCellWithIdentifier:nil]; 
```

您正在发送一个 nil 标识符，它否定了整个重用单元格的点。相反，您正在为每一行创建一个新单元格，而不是重用旧单元格。

所以取消注释这一行：

```
static NSString *MyIdentifier = @"MyIdentifier"; 
```

并将 dequeue 方法更改为如下所示：

```
TMTFamilyMemberCell *cell = (TMTFamilyMemberCell *)[tableView dequeueReusableCellWithIdentifier:MyIdentifier]; 
```

如果您在界面构建器中构建单元格，您还需要为单元格指定一个标识符。这可能是坠机的原因。

接下来...您的 sqllite 代码应该封装在另一个对象中。视图控制器没有理由知道它。此外，您应该真正调查核心数据。它默认为 sqllite 后备存储。这也是一项非常棒的技术。

最后，看看 ARC。让编译器处理繁琐的内存管理工作，这样您就可以专注于应用程序的用户体验。

希望有帮助，祝你好运！

# magento - magento 谷歌 analitycs 多商店

> ID：13210502
> 
> 赞同：1
> 
> 时间：2012-11-03T15:21:33.157
> 
> 标签：magento, magento-1.5, magento-1.7

我有一个带有 3 个网站的 magento 安装，每个网站都有 3 个商店视图。一切正常，部分谷歌分析。我希望有一个与每个网站关联的不同帐户以获得单独的统计信息。主站点运行良好，但其他 2 没有。我没有看到任何交通，没有盗版访问。感谢您的支持，再见恩里科

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-03T15:54:20.550

转到管理员 -> 配置 -> Google Api

然后更改其他 2 个网站的“当前配置范围”并输入每个 GA 帐号。

查看每个域的源代码以检查 GA 代码是否存在且正确。

您可能还想看看 [@GA Tracking Multiple Domains](https://developers.google.com/analytics/devguides/collection/gajs/gaTrackingSite)

# java - 如何检查两个数字是否在不超过 10% 的范围内（JAVA）

> ID：13210506
> 
> 赞同：1
> 
> 时间：2012-11-03T15:21:49.947
> 
> 标签：java, numbers, range

大家好，我有类似这样的两个整数，例如：

```
int priceSell = 10;
int priceBuy = 5; 
```

如何检查这些数字之间的范围是否不超过 10%？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-03T15:35:49.270

```
int priceSell = 10;
int priceBuy = 5;
if (Math.abs(priceSell-priceBuy)>(priceSell/10))
    System.out.println("the price isn't within 10%");
else
    System.out.println("the price is within 10%"); 
```

- 不除以 0

顺便说一句，这个答案确保买入价在卖出价的 10% 以内。另一个答案是确保卖出价在买入价的 10% 以内。是的，这很重要。90 在 100 的 10% 以内，但 100 不在 90 的 10% 以内。（100 的 10% 范围是 90-110。90 的 10% 范围是 81-99）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-03T15:27:10.813

我假设 priceSell 总是大于 priceBuy。根据您的需要更改它。

```
if(priceSell!=0){
if(priceBuy/priceSell>=0.9){
 return true;
} else 
return false
}
throw new exception("Dividing by 0"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-03T17:04:29.467

如果您可以假设卖出价高于买入价，您可以这样做。

```
return priceSell < priceBuy * 1.1; 
```

# mysql - 在表格中间拖动一些行

> ID：13210510
> 
> 赞同：1
> 
> 时间：2012-11-03T15:22:06.840
> 
> 标签：mysql, sql

所以正如我所说，是否可以复制每一行并将其放在下面的行中，或者将相同的字段行移动到下面的字段中？（当然有和索引自动增量）。结果应该是第 41 行中的旧第 40 行内容（字段），依此类推。

```
REPLACE table SET column1 = previuos(column1), column2= previous(column2), column3=(previous(column3)  where id > 20 and id < 300 
```

它们不是最后插入的，它们位于表格的中间并且想要将其向下移动，以便让我在所选行的开头有一些空行（带有索引）

```
 INSERT INTO table (
  SELECT column1,column2,column3 
  FROM  table  WHERE id > 20 AND id < 200
  ) WHERE id = 30 
```

从 21 到 199 选择行，然后插入 30 和前面

谢谢你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T15:28:03.767

你的问题有点难以理解，但如果你想复制最后插入的行，你可以这样做：

```
INSERT INTO your_table (
  SELECT NULL, column_1, column_2, column_etc 
  FROM your_table ORDER BY your_id DESC LIMIT 1
); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-03T23:11:30.790

请记住，数据库表不是电子表格。

然而，这会做你想要的：

```
UPDATE mytable 
SET id = id + 9 
WHERE id BETWEEN 21 AND 199; 
```

# java - 如何在 Java 中关闭单个框架？

> ID：13210511
> 
> 赞同：1
> 
> 时间：2012-11-03T15:22:10.073
> 
> 标签：java, awt, frame

所以，我有一个带有按钮的框架（awt），如果你点击“同步”，它会弹出一个窗口。现在，我只是想要它，以便您可以单击该弹出窗口上的 X，然后弹出窗口将消失。我有一条评论显示我希望它消失的地方。

```
import java.awt.*;
import java.awt.event.*;
public class Main
{
    public static void main(String[] args)
    {
        ActionListener listen=new MyActionListener();
        Frame frame= new Frame("frame");//make the frame
        Button exit=new Button("Exit");
        exit.setActionCommand("Exit");
        exit.addActionListener(listen);
        Button Sync=new Button("Sync");
        Sync.setActionCommand("Sync");
        Sync.addActionListener(listen);//create Exit and Sync buttons.
        frame.add(exit);
        frame.add(Sync);
        frame.setLayout(new GridLayout(2, 1));
        frame.setSize(100,80);
        frame.setVisible(true);
        frame.addWindowListener(new WindowAdapter()
        {
            public void windowClosing(WindowEvent e)
            {
                System.exit(0);
            }
        });
    }
    public void MyActionListener(ActionEvent e)
    {
        System.exit(0);
    }
}
class MyActionListener implements ActionListener{
    public void actionPerformed(ActionEvent ae) {
        String s = ae.getActionCommand();
        if (s.equals("Exit")) {
            System.exit(0);
        }//note that the exit button DOES work, so this system is working.
        if (s.equals("Sync")) {
            Frame frame2= new Frame("Popup!");
            frame2.setVisible(true);
            frame2.addWindowListener(new WindowAdapter()
            {
                public void windowClosing(WindowEvent e)
                {
                    //Remove frame2 here.
                }
            });
        }
    }
} 
```

我之前看到过一个非常相似（如果不相同）的问题，“答案”是使用 dispose。("frame2.dispose();") 我试过了，我得到了以下错误报告：

```
Exception in thread "AWT-EventQueue-0" java.lang.RuntimeException: Uncompilable source code - local variable frame2 is accessed from within inner class; needs to be declared final
    at vexscouting.MyActionListener$1.windowClosing(Main.java:76)
    at java.awt.Window.processWindowEvent(Window.java:1865)
    at java.awt.Window.processEvent(Window.java:1823)
    at java.awt.Component.dispatchEventImpl(Component.java:4630)
    at java.awt.Container.dispatchEventImpl(Container.java:2099)
    at java.awt.Window.dispatchEventImpl(Window.java:2478)
    at java.awt.Component.dispatchEvent(Component.java:4460)
    at java.awt.EventQueue.dispatchEvent(EventQueue.java:599)
    at java.awt.EventDispatchThread.pumpOneEventForFilters(EventDispatchThread.java:269)
    at java.awt.EventDispatchThread.pumpEventsForFilter(EventDispatchThread.java:184)
    at java.awt.EventDispatchThread.pumpEventsForHierarchy(EventDispatchThread.java:174)
    at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:169)
    at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:161)
    at java.awt.EventDispatchThread.run(EventDispatchThread.java:122) 
```

注意：我使用的是 NetBeans

# python - 从文件中读取数字并放入二维列表

> ID：13210512
> 
> 赞同：1
> 
> 时间：2012-11-03T15:22:16.813
> 
> 标签：python, python-3.x

我是 Python 新手。我的文件包含这些数字：

```
2,3
4,5
7,8
-4,3 
```

如何读取此文件并将其转换为二维列表以便计算面积？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-03T15:24:53.640

像这样的东西：

```
>>> with open("data1.txt") as f:
...    lis=[list(map(int,x.split(","))) for x in f]
...    print lis
... 
[[2, 3], [4, 5], [7, 8], [-4, 3]] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-03T15:46:57.423

您也可以使用该[`csv`](http://docs.python.org/2/library/csv.html)模块来执行此操作，而不是手动解析文件。一个小例子：

```
import csv
with open('data1.txt', 'rb') as csvfile:
  spamreader = csv.reader(csvfile, delimiter=',')

twod_list = [row for row in spamreader] 
```

此外，如果您想开始使用[`numpy`](http://numpy.scipy.org/)（如果您想进行认真的计算，则需要），请查看[这个 SO question](https://stackoverflow.com/questions/3518778/how-to-read-csv-into-record-array-in-numpy)，了解如何将数据读入`numpy`数组。我从链接的问题中复制了以下代码：

```
from numpy import genfromtxt
my_data = genfromtxt('data1.txt', delimiter = ',') 
```

# mysql - mysql中有解析函数来解决这个问题吗？

> ID：13210521
> 
> 赞同：5
> 
> 时间：2012-11-03T15:23:27.123
> 
> 标签：mysql

我有一个如下的mysql表

```
id   trader price
111   abc    5
222   xyz    5.20
333   abc    5.70
444   xyz    5
555   abc    5.20 
```

我想要一个结果来找到每个交易者增加或减少价格的次数，如下所示

```
id   trader price  lagged_price   flag
111   abc    5
222   xyz    5.20   5        
333   abc    5.70   5.20        increased 
444   xyz    5      5.70        increased  
555   abc    5.20   5           reduced
                    5.20        increased 
```

lagged_price 是滞后于原始列价格的列。我需要有一个标志，说明在上述情况下交易者在特定时间增加或减少价格，最终结果是

贸易商 abc 两次提高价格 贸易商 xyz 提高价格和降低价格

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T05:16:42.580

我看到您在帖子中提出了不同的问题：[Compare rows in same table in mysql](https://stackoverflow.com/questions/13244136/compare-rows-in-same-table-in-mysql/13244385#13244385)

不过，这里有一个解决方案：（假设您的表称为“选项卡”，并且 ID 实际上减少了，因此“滞后”意味着“之前”，就像在您的示例数据中一样）

```
SELECT a.id, a.trader, a.price, b.price as lagged_price
     , case when a.price > b.price then 'increased'
            when a.price < b.price then 'decreased'
            else 'same'
       end as flag
  FROM tab a
  JOIN tab b 
    ON a.trader = b.trader AND a.id > b.id
  LEFT OUTER JOIN tab c 
    ON a.trader = c.trader AND a.id > c.id AND b.id < c.id
 WHERE c.id IS NULL 
```

您可以在我对您的其他问题的回答中查看为什么这样做的详细信息。

希望这可以帮助！

约翰...

# android - Android蓝牙应用程序进程被杀死

> ID：13210525
> 
> 赞同：3
> 
> 时间：2012-11-03T15:24:26.167
> 
> 标签：android, bluetooth, connection

我对android编程很陌生。我有两个类：main 和 btmanager。当我尝试在手机上测试我的应用程序时，我得到的只是进程被杀死的信息。我究竟做错了什么 ？

代码实现：

主要课程：

```
public class MainActivity extends Activity {

BluetoothAdapter bluetooth = BluetoothAdapter.getDefaultAdapter();

Btmanager manager;

@Override
    public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    if (bluetooth == null)
    {
        Toast.makeText(this, "Bluetooth is not enabled on this device", Toast.LENGTH_LONG).show();
        System.exit(0);
    }

}

@Override
public void onStart()
{
    super.onStart();

    if (!bluetooth.isEnabled()) {
        Intent enableBtIntent = new Intent(BluetoothAdapter.ACTION_REQUEST_ENABLE);
        startActivityForResult(enableBtIntent, 2);
    }

    manager.run();

}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    getMenuInflater().inflate(R.menu.activity_main, menu);
    return true;
}

public void closeApp (View view)
{
    System.exit(0);
}
} 
```

Btmanager 类：

```
public class Btmanager extends Thread {

private final BluetoothSocket mmSocket;
private final BluetoothDevice mmDevice;
public static final UUID myUUID = UUID.fromString("0x1101");
BluetoothAdapter bluetooth = BluetoothAdapter.getDefaultAdapter();

public Btmanager(BluetoothDevice device) {
    // Use a temporary object that is later assigned to mmSocket,
    // because mmSocket is final
    BluetoothSocket tmp = null;
    mmDevice = device;

    // Get a BluetoothSocket to connect with the given BluetoothDevice
    try {
        // MY_UUID is the app's UUID string, also used by the server code
        tmp = device.createRfcommSocketToServiceRecord(myUUID);
    } catch (IOException e) { }
    mmSocket = tmp;
}

public void run() {
    // Cancel discovery because it will slow down the connection
    bluetooth.cancelDiscovery();

    try {
        // Connect the device through the socket. This will block
        // until it succeeds or throws an exception
        mmSocket.connect();
    } catch (IOException connectException) {
        // Unable to connect; close the socket and get out
        try {
            mmSocket.close();
        } catch (IOException closeException) { }
        return;
    }

}

/** Will cancel an in-progress connection, and close the socket */
public void cancel() {
    try {
        mmSocket.close();
    } catch (IOException e) { }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-03T15:58:25.763

我在您的代码中看到的 2 个问题：

1.  您不实例化`Btmanager`对象，它仍然是`null`当您调用`run`. （将导致`NullPointerException`- 你的应用程序将崩溃）。
2.  您调用`run`方法而`start`不是`Btmanager`. 如果您希望`run`方法中的代码在新线程中运行，您必须调用`start`. 调用`run`将导致它在**同一个**线程中运行。这会阻塞您的 UI 线程，如果阻塞时间过长，可能会导致您的应用程序崩溃。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-04T10:30:27.477

出于测试目的，我不使用 BTmanager 类 - 在 onStart() 方法中，我添加了具有连接实现的新线程，但仍然没有任何结果 - 应用程序崩溃。

```
public void onStart()
{
    super.onStart();

    if (!bluetooth.isEnabled()) {
        Intent enableBtIntent = new Intent(BluetoothAdapter.ACTION_REQUEST_ENABLE);
        startActivityForResult(enableBtIntent, 2);
    }

    new Thread(new Runnable() 
    {
        public void run() 
        {
            try {
                //Create a Socket connection: need the server's UUID number of registered
                socket = device.createRfcommSocketToServiceRecord(myUUID);

                socket.connect();
                Log.d("EF-BTBee", "Connectted");
            }
            catch (IOException e)
            {
                Log.e("EF-BTBee", "Error : ", e);
            }
        }
    }).start();

} 
```

# linux - ARM linux phys_to_virt/virt_to_phys 运行时补丁的限制

> ID：13210541
> 
> 赞同：0
> 
> 时间：2012-11-03T15:25:34.843
> 
> 标签：linux, embedded, kernel, arm

我了解 ARM linux 支持 phys_to_virt 和 virt_to_phys 的运行时补丁。 [http://lists.infradead.org/pipermail/linux-arm-kernel/2011-January/037089.html](http://lists.infradead.org/pipermail/linux-arm-kernel/2011-January/037089.html "ARM linux P2V 功能")

这使内核映像能够支持不同的物理基地址，而无需重新编译。

我有一块 2GB 板，物理内存从 0x8000_0000 到 0xFFFF_FFFF。使用该板时，我看到以下结果：

内核加载物理地址：0xC0008000 - OK（内核启动）

内核加载物理地址：0xC8008000 - OK（内核启动）

内核加载物理地址：0xD0008000 - 不正常（挂起启动内核）

内核加载物理地址：0xE0008000 - 不正常（挂起启动内核）

我的 linux 内核 cmd 行 bootargs mem=512M。

我想了解内核有效加载地址的限制。这记录在： [www.arm.linux.org.uk/developer/memory.txt](http://www.arm.linux.org.uk/developer/memory.txt "ARM linux内存")

由于格式混乱，我无法在此处复制粘贴。

文档中提到不遵循限制将导致内核无法启动，这是我所面临的，但我无法理解对内核起始地址的限制。

我不使用highmem。

是否限制 Linux 起始地址 + lowmem_size 应该 <= ff000000 - VMALLOC_SIZE。

# java - 在 JSF 应用程序中加载文件

> ID：13210542
> 
> 赞同：0
> 
> 时间：2012-11-03T15:25:38.120
> 
> 标签：java, file, loading

我的逻辑需要加载一个嵌入在应用程序.war 中的文件。该文件位于应用程序的根目录。它在我的机器上运行良好，因为路径是硬编码的： File hmmFile = new File("/home/kirill/projetos/biosearchrefinement/pos-en-bio-medpost.HiddenMarkovModel"); 但是当我将它部署到服务器时它不会工作，因为绝对路径不同。

我尝试使用 ClassLoader 但得到一个空引用并尝试使用 FacesContext 但也没有成功。我正在使用 glassfish 3 和 Mojarra 2.1.6

我的项目树如下所示： ![项目树](../Images/f9c5df52b020febe6459deb3d41110ff.png)

在我的代码中，我引用了这样的文件：

```
File hmmFile = new File("/home/kirill/projetos/biosearchrefinement/pos-en-bio-medpost.HiddenMarkovModel"); 
```

但这仅在我在本地运行应用程序时才有效，如果我将其部署到远程服务器显然它将停止加载该文件。我想将此文件相对于项目的根文件夹加载。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-04T16:57:06.440

使用 ExternalContext 中的 getRealPath() 解决了该问题。

```
ExternalContext ext = FacesContext.getCurrentInstance().getExternalContext();
String resourcesPath = ext.getRealPath("/WEB-INF/resources");
File hmmFile = new File(resourcesPath + "/pos-en-bio-medpost.HiddenMarkovModel"); 
```

工作得很好！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-03T15:29:10.770

从您模糊的描述来看，您需要的是使用该`Class.getResourceAsStream()`方法。

# javascript - jquery append 和 appendTo

> ID：13210543
> 
> 赞同：2
> 
> 时间：2012-11-03T15:25:39.353
> 
> 标签：javascript, jquery

我只想知道这两种方法之间是否有任何区别（尤其是在性能方面）：

1)

```
$('.container').append('<div class="divChild">test div</div>'); 
$('.container .divChild').click(function() { alert('test'); }); 
```

2)

```
var $childDiv = $('<div class="divChild">test div</div>');
$childDiv.appendTo($('.container')).click(function() { alert('test'); }); 
```

所以基本上第二种方法似乎要快得多，因为我真的不必搜索 divChild div 两次，但我需要向 div 添加点击事件。是这样吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-03T15:32:46.230

这里要说明的第一点是：除非您经常这样做（在***很***短的时间内数千次），否则这不太重要。

但我怀疑最有效的做法是记住结果`$('.container')`然后使用`children`它：

```
var c = $('.container');
c.append('<div class="divChild">test div</div>'); 
c.children('.divChild').click(function() { alert('test'); }); 
```

或者实际上，从技术上讲，您不需要变量：

```
$('.container')
    .append('<div class="divChild">test div</div>')
    .children('.divChild')
      .click(function() { alert('test'); }); 
```

但我发现像这样的长链难以阅读、难以维护和调试。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-03T15:32:50.567

另一种选择是：

```
$('<div/>', {
    'class': 'divChild',
    'text': 'test div',
    'click': function(){
       alert('test');
    }
}).appendTo('.container'); 
```

[http://jsfiddle.net/SANMW/](http://jsfiddle.net/SANMW/)

# php - 有没有好的学说文档？

> ID：13210546
> 
> 赞同：0
> 
> 时间：2012-11-03T15:25:49.490
> 
> 标签：php, doctrine

有没有好的学说文档？我可以编写常规的 SQL 建筑物。看官方例子：

[http://docs.doctrine-project.org/en/latest/reference/query-builder.html](http://docs.doctrine-project.org/en/latest/reference/query-builder.html)

```
$qb->select('u')
   ->from('User', 'u')
   ->where('u.id = ?1')
   ->orderBy('u.name', 'ASC'); 
```

和

```
$qb->select('u')
   ->from('User u')
   ->where('u.id = ?1')
   ->orderBy('u.name ASC');
   ->setParameter(1, 100); 
```

这个有两个错误。与`from()`自身不兼容，它接受 2 个参数...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-03T16:01:43.967

您可以在 Doctrine 中编写常规 SQL，但由于它使用 ORM，您应该尽量不要使用它。

Doctine 中的 SQL 文档： [Native SQL](http://docs.doctrine-project.org/en/latest/reference/native-sql.html)

使用 Doctrine 您将查询对象，为此您可以使用与 SQL 类似的 DQL，除了查询对象而不是行。

DQL 的文档可以在这里找到： [DQL](http://docs.doctrine-project.org/en/2.1/reference/dql-doctrine-query-language.html)

关于 queryBuilder：

那是您将要找到的最好的文档，但是他们犯了一个错误，如果它给您错误，只需将其更改`from('User u')`为`from('User','u')`

# joomla - Joomla 在某些组件中添加了一个空白区域

> ID：13210549
> 
> 赞同：0
> 
> 时间：2012-11-03T15:26:15.093
> 
> 标签：joomla, components, space, quotation-marks

我有一个问题，我不久前注意到我正在构建的网站。

我已经使用 Joomla 有一段时间了，我从来没有遇到过这样的问题。

在某些组件上，例如精选内容、搜索、hwdvideoshare 等，似乎在主要内容区域的最顶部添加了引号。这会导致额外的空白空间将内容向下推。

这不是真的可以接受，因为我正在设计一个必须非常精确的布局。

![这是一个小演示](../Images/fd3cadbb0bf9f52b909b94ada9a499e9.png)

希望你们能帮助我，我已经尝试了一切。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T22:52:14.597

用notepad++打开模板中的“index.php”文件。然后从编码中选择“Convert to UTF8 without BOM”，保存并重新加载。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T19:38:32.230

问题是带有 BOM 的 UTF8。但是，它不在模板文件中。我开始寻找所有添加空白区域的网站的共同点。这是分页。将分页文件转换为没有 BOM 的 UTF8，现在可以完美运行。

# ios5 - iOS 5 检查互联网连接

> ID：13210550
> 
> 赞同：1
> 
> 时间：2012-11-03T15:26:17.773
> 
> 标签：ios5, networking

我正在开发一个 iOS 5.1 应用程序，我需要检查互联网连接以及它是哪种类型的连接。

进行这种简单检查的最有效方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T15:29:41.177

苹果的可达性可能会有所帮助，它对我很有效：

[http://developer.apple.com/library/ios/#samplecode/Reachability/Introduction/Intro.html](http://developer.apple.com/library/ios/#samplecode/Reachability/Introduction/Intro.html)

# php - 如何使用 span 设置 PHP 回显输出样式

> ID：13210552
> 
> 赞同：1
> 
> 时间：2012-11-03T15:26:52.287
> 
> 标签：php, sql, css, html

我正在尝试设置每个回声的输出样式。

理想情况下，我想`<span class=""> </span>`为每个回声使用，但我不太确定如何实现这一点。

```
$result = mysql_query("SELECT * FROM Blog");
while($row = mysql_fetch_array($result))
{
    echo $row['Date'];
    echo $row['Title'];
    echo $row['Message'];
    echo "<img src='".$row['Image']."'/>";
}

mysql_close($con); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-03T15:29:37.130

```
$result = mysql_query("SELECT * FROM Blog");
while($row = mysql_fetch_array($result))
    {
    echo "<span class=\"myclass\">$row['Date']</span>";
    echo "<span class=\"myclass\">$row['Title']</span>";
    echo "<span class=\"myclass\">$row['Message']</span>";
    echo "<img src='".$row['Image']."'/>";
    }

mysql_close($con); 
```

或者，更好的是，在表格中：

```
$result = mysql_query("SELECT * FROM Blog");
echo "<table>"
while($row = mysql_fetch_array($result))  {
    echo "<tr>"
    echo "<td>$row['Date']</td>";
    echo "<td>$row['Title']</td>";
    echo "<td>$row['Message']</td>";
    echo "<td><img src='".$row['Image']."'/></td>";
    echo "</tr>"
}
echo "</table>"

mysql_close($con); 
```

然后，您可以使用类设置每一行和每一列的样式。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-03T15:29:13.937

试试这个：

```
$prepend = "<span class=''>";
$append  = "</span>";

$result = mysql_query("SELECT * FROM Blog");
while($row = mysql_fetch_array($result))
    {
    echo $prepend.$row['Date'].$append;
    echo $prepend.$row['Title'].$append;
    echo $prepend. $row['Message'].$append;
    echo $prepend."<img src='".$row['Image']."'/>".$append;
    }

mysql_close($con); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-03T15:32:09.413

我将创建一个执行此操作的函数：

```
function decorated_echo($text) {
    echo '<span class="myclass">' . $text . '</span>';
} 
```

这样，您不必每次想要此行为时都重复此操作。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-03T15:34:10.423

您猜对了，只需在 echo 中添加所需的 html：

```
echo '<span class="yourclass"><img src="'.$row['Image'].'" /></span>'; 
```

或者，如果没有加载 css 文件，您可以只放置内联样式：

```
echo '<span style="color:red;"><img src="'.$row['Image'].'" /></span>'; 
```

# c# - 总行 Mysql C#

> ID：13210555
> 
> 赞同：-6
> 
> 时间：2012-11-03T15:27:06.327
> 
> 标签：c#, mysql

我有一个名为的数据库表`nama`：

```
id | tomi | asep | andre |
--------------------------
1  | 123  | 321  | 545   | 
```

当我使用以下 SQL 查询时：

```
select * from nama; 
```

我得到这个输出：

```
1 123 321 545 
```

总共是 4 列。

如何使用 MySQL 获取 C# 中的总列数？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-03T15:33:29.990

一个简单的例子可以是：

```
MySqlCommand command = new MySqlCommand();
command.CommandText = "select * from nama;";

MySqlDataReader reader = command.ExecuteReader();
DataTable tblNama = new DataTable();
tblNama.Load(reader);

int numR = tblNama.Rows.Count; //Number of Rows ...
int numC = tblNama.Columns.Count; //Number of Columns ... 
```

# windows - 如何将图标分配给自定义文件类型？

> ID：13210560
> 
> 赞同：2
> 
> 时间：2012-11-03T15:27:27.950
> 
> 标签：windows, icons, file-type

有没有办法在 C 或 C++ 中这样做（我知道它可以在 C# 中完成，所以如果你知道怎么做，它也会有所帮助！）？

我想要的是一种通过我自己的应用程序自动将自定义文件扩展名与自定义图标相关联的方法。例如，可以使所有当前和后续的 .foo 文件都有自己的图像，而不是默认的平淡无奇的白皮书。就像 Java 对 .jar 文件和 Dev-C++ 对 .c 和 .cpp 的安装一样。

通过我的研究，我发现了很多关于一个叫做壳牌的东西的相关信息。我在[这个页面上](http://msdn.microsoft.com/en-us/library/windows/desktop/hh127427%28v=vs.85%29.aspx)结束了自己，并且它所说的似乎可行，我根本不知道如何实现它，也不知道它到底是什么。对不起，如果我听起来很笨拙！

操作系统是 Windows。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-03T15:52:01.103

首先你需要知道如何在 C++ 中修改注册表，这里有一篇文章解释了这一点：

[注册表和 C++](https://stackoverflow.com/questions/863991/using-c-to-edit-the-registry)

在您提供的链接中，您有需要更新的密钥

HKEY_CLASSES_ROOT/[你的扩展名]

只需要在修改图标后告诉资源管理器刷新即可调用 SHChangeNotify。

# javascript - 如何使用 JavaScript 将文本区域中的文本复制到 Chrome 中的剪贴板？

> ID：13210567
> 
> 赞同：1
> 
> 时间：2012-11-03T15:28:05.280
> 
> 标签：javascript, google-chrome-extension

我有一个 textarea 标签和一个按钮。我想要的是当我单击按钮时，该文本区域中的文本将被复制到我的剪贴板中。

我在 Chrome 扩展程序中使用它。

感谢您提供任何帮助！

* * *

## 回答 #1

> 赞同：-3
> 
> 时间：2012-11-03T15:46:58.593

要[复制文本](https://stackoverflow.com/questions/7218061/javascript-copy-text-to-clipboard)...

```
function CopyToClipboard(text) {
    Copied = text.createTextRange();
    Copied.execCommand("Copy");
} 
```

要[获取文本](http://www.w3schools.com/jsref/prop_textarea_value.asp)...

```
textareaObject.value="text" 
```

# jquery - 关于滑动div的jQuery帮助

> ID：13210573
> 
> 赞同：0
> 
> 时间：2012-11-03T15:29:02.267
> 
> 标签：jquery

这是HTML

```
<div id="projectheader">
Project 1
<span id="plus">+</span></div>
<div class="projectdrop">
<div id="orderheader"><span id="plus">+</span></div>
<div class="orderdrop"></div>
</div>

<div id="projectheader" style="margin-top: 20px;">
Project2
<span id="plus">+</span></div>
<div class="projectdrop">
<div id="orderheader"><span id="plus">+</span></div>
<div class="orderdrop"></div>

</div> 
```

我在一个站点上工作，该站点在后端动态创建项目，并将信息插入到前端的项目标头中。因此，同一页面上可能有许多带有 projectheader ID 的 div。我要做的是单击 + div 并向下滑动 projectdrop。这不是页面上只有一个项目的问题，但当页面上有多个项目标头时无法使其正常工作。我希望能够仅向下滑动我单击的特定项目标题。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-03T15:33:26.413

首先，我强烈建议您纠正重复 ID 问题，因为这不仅是不好的做法，而且会产生这样的问题。看起来`projectheader`（以及您的大多数其他“ID”）最好用作类，而不是 ID。

但是，如果您只想要一个可行的解决方案，我相信这会成功：

```
$('.plus').click(function(){
    $(this).parent().next('.projectdrop').slideDown();
} 
```

只需将这些跨度更改为具有 class plus 而不是 id plus。您*不能*使用一个 ID 选择多个事物。

另请注意，必须使用 DOM 元素的顺序来形成它们之间的关系可能被认为是不好的做法。最好将相关元素包装在一个`div`或其他适当的元素中，这些元素又附加了一个 ID 或其他标识属性。例如：

```
<div class="project" id="project1">
    <header>
        Project 1
        <span class="plus">+</span>
    </header>
    <div class="drop">
        <div class="order">
            <header>
                <span class="plus">+</span>
            </header>
            <div class="drop">
            </div>
        </div>
    </div>
</div> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-03T16:45:57.447

弄清楚了。

```
$(document).ready (function() {
$('.plus').on('click', function() {
 $(this).parent().next('.projectdrop').slideToggle('slow'); 
```

另一个问题。当 projectdrop 打开时，我如何将 + div 替换为 - ？

谢谢

# mysql - 为什么这个 MySQL SELECT 不包括正确的日期？

> ID：13210581
> 
> 赞同：0
> 
> 时间：2012-11-03T15:29:44.247
> 
> 标签：mysql, date, datetime, select, conditional-statements

主要问题是，我存储在数据库中*datetime*，而不是日期（我需要的）。好吧，那算了。

我每天存储数以千计的报告。

我需要在 10 点之前离开我的 datetime_view（以缩短时间），一切都很好。除了这个。我试图弄清楚为什么我必须在未来的一天加上条件？否则它不会搜索我想要的。

```
SELECT 
    LEFT(datetime_view,10),
    count(type) 
        FROM reports 
            WHERE 
        type IN (1,2,5) 
            AND 
        datetime_view>='2012-10-28' 
            AND
        datetime_view<='2012-11-04' 
            group by LEFT(datetime_view,10); 
```

你可以看到我必须从未来寻找。为什么？？

它给了我从 28.10 到 3.11 的输出 ....

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T15:33:10.017

不要对日期/时间值使用字符串操作。MySQL 有[大量](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html)用于日期/时间操作的函数。尝试

```
GROUP BY DATE(datetime_view) 
```

相反，它将仅提取日期时间字段的日期部分。您的字符串操作不符合 y10k 标准。使用 date() 函数是。

至于你的`plus one day`，考虑比较是如何完成的：一个普通的日期值，当用于日期/时间比较时，有一个隐含的`00:00:00`时间值，例如所有日期都有一个“午夜”的时间。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-03T15:33:28.363

我认为最好在 where 条件下使用`DATE(datetime_view)`to cut time 而不是`LEFT(datetime_view,10)`：

```
DATE(datetime_view) <= '2012-11-03' 
```

# php - 如何使用“相对”网址？

> ID：13210582
> 
> 赞同：1
> 
> 时间：2012-11-03T15:29:43.657
> 
> 标签：php, html

我有一个疑问，在一个 HTML 文件中，我有以下结构：

```
 MAIN -> index.php
         -> IMAGES -> image.jpg 
```

在“img”标签中我应该使用这个：

```
 <img src="IMAGES/image.jpg"> 
```

或这个？

```
 <img src="/IMAGES/image.jpg"> 
```

请注意，在第二个示例中，我在 IMAGES 之前添加了斜杠。这是我的问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-03T15:34:45.990

在这种情况下两者都有效，但我建议使用您的第一个选项（相对路径），因此如果将来您将整个项目移动到新的根目录下，您的所有站点都将继续工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-03T15:34:32.153

两者都可以，但如果您不希望移动您的 IMAGES 目录，请使用`/IMAGES/image.jpg`. 这将是可取的，因为您将能够在标记中的任何位置使用相同的 uri（例如，如果您添加`MAIN/SCRIPTS/newscript.php`, then`/IMAGES..`将起作用，`IMAGES/image.jpg`但不会）。但是，如果您始终打算将 IMAGES 存储为与 index.php 处于同一级别的目录，但最终可能会将 index.php 移动到其他位置，那么您可能会考虑使用`IMAGES/image.jpg`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-03T15:36:07.943

在这种情况下，它们完全相同，但请考虑这个更新的示例：

```
 MAIN -> index.php
         -> ABOUT -> index.php
         -> IMAGES -> image.jpg 
```

现在，在 ABOUT/index.php 里面有*一个*区别，因为

```
<img src="IMAGES/image.jpg"> # => /ABOUT/IMAGES/image.jpg

<img src="/IMAGES/image.jpg"> # => /IMAGES/image.jpg 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-03T15:42:41.733

使用相对 URL 的“安全性”取决于您是否将在 URL 中使用子目录。

假设您的文件结构，

如果您在[http://example.com/index.php](http://example.com/index.php)，那么该 url`IMAGES/image01.jpg`将起作用。

如果您在[http://example.com/somedir/index.php](http://example.com/somedir/index.php)，则`"IMAGES/image01.jpg`不会加载（它将寻找`http://example.com/somedir/IMAGES/image01.jpg`而不是您的预期`http://example.com/IMAGES/image01.jpg`）

这意味着在以下情况下使用相对 URL 是“危险的”：

1）将您的 index.php 文件移动或复制到子目录中 2）使用 url 重写从您的 URL 中删除 index.php（因此像 example.com/some/location 这样的 URL 重写为`example.com/index.php?l=some/location`）

**您最安全的选择是使用变量来获取您的基本 URL：**

```
define('BASE_URL', 'http://example.com'); 
```

然后在您的 HTML 中：

```
<img src="<?php echo BASE_URL; ?>/IMAGES/image01.jpg" alt="" /> 
```

如果您将来移动您的站点，您可以更改 BASE_URL 常量。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-11-03T15:32:34.543

两者都应该工作，但我建议使用斜线。当您事先添加斜杠时，这意味着在最顶层的目录中查找。没有它意味着相对于当前文件。

如果您事先使用带有斜线的方法，它允许您移动文件，或将 html 复制到其他文件，并且它们在哪里都没有关系。

附带说明一下，不带斜线的称为相对路径，带斜线的称为绝对路径。

# .net - 无法将“System.__ComObject”类型的 COM 对象转换为接口类型“mshtml.HTMLElementCollection”

> ID：13210584
> 
> 赞同：1
> 
> 时间：2012-11-03T15:29:59.563
> 
> 标签：.net, vb.net, winforms, mshtml

我正在尝试使用 mshtml 通过 webbrowser 控件在 vb.net 上填写表格，

```
Dim doc As MSH.IHTMLDocument2 = DirectCast(wbMain.Document.DomDocument, MSH.IHTMLDocument2)
Dim buttons As MSH.HTMLElementCollection = doc.getElementsByTagName("button")
Dim Inputs As MSH.HTMLElementCollection = doc.getElementsByTagName("input") 
```

但我收到以下错误

> 无法将“System.__ComObject”类型的 COM 对象转换为接口类型“mshtml.HTMLElementCollection”。此操作失败，因为 IID 为“{3050F56B-98B5-11CF-BB82-00AA00BDCE0B}”的接口的 COM 组件上的 QueryInterface 调用因以下错误而失败：不支持此类接口（来自 HRESULT 的异常：0x80004002 (E_NOINTERFACE)） .

任何人都可以帮助我解决可能的解决方案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T15:56:08.477

> 暗淡按钮作为 MSH.HTMLElementCollection

类型错误。那应该是一个 IHTMLElementCollection 。注意前面的 I。MSDN 页面[在这里](http://msdn.microsoft.com/en-us/library/aa703989%28v=VS.85%29.aspx)。

缺少 I 的类型是 coclass，而不是接口。当脚本客户端想要创建自己的集合对象时使用。

# excel - 在Excel VBA中将整数与货币相乘

> ID：13210585
> 
> 赞同：3
> 
> 时间：2012-11-03T15:30:05.467
> 
> 标签：excel, visual-studio-macros, vba

在我的 excel 表中，我有一行（第 5 行）作为项目数量，另一行（第 6 行）作为项目的价格。例如，我想将 200 乘以 56.50 美元，但我遇到了这个脚本的问题。任何人都可以请帮忙。

```
Sub calcprice()
    Dim i As Integer
    Dim iRowNumber As Integer   ' Integer to store result in
    Dim val As Double

    iRowNumber = InputBox(Prompt:="Number of Rows", _
          Title:="Rows: ", Default:="# of Rows")
    For i = 1 To iRowNumber
        If Cells(i, 5).Value >= 0 And Cells(i, 6).Value >= 0 And IsEmpty(Cells(i, 5)) = False And IsEmpty(Cells(i, 5)) = False Then
            val = FormatCurrency(Cells(i, 5).Value) * Cells(i, 6).Value
            Cells(i, 7).Value = val
        End If
    Next i
End Sub 
```

它说运行时错误 13
类型不匹配这里是图像： ![它说货币](../Images/0db7a705cced5deb66df9bf47455359d.png)

这是链接：[https](https://www.dropbox.com/s/lla2cuz8hqu5qyp/test.xlsm)
://www.dropbox.com/s/lla2cuz8hqu5qyp/test.xlsm我也不能使用 =a*bi 必须使用宏！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-04T00:59:34.943

你不需要循环

您可以在 G 列中使用单次射击范围

*   将 G5 中的公式添加到输入的用户`iRowNumber`，以测试每行中是否出现 > 0 的结果（或添加`""`0 结果）
*   用值覆盖公式

    ```
    Sub calcprice()
        Dim iRowNumber As Long   ' Integer to store result in        
    iRowNumber = InputBox(Prompt:="Number of Rows", _
          Title:="Rows: ", Default:="# of Rows")

    With Range(Cells(5, 7), Cells(iRowNumber, 7))
    .FormulaR1C1 = "=IF(N(RC[-1]*RC[-2]),RC[-1]*RC[-2],"""")"
    .Value = .Value
    End With
    End Sub 
    ```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-03T15:58:42.827

试试这个。记得将第 5 个单元格和第 6 个单元格格式化为您喜欢的货币！

```
 Sub calcprice()

    Dim iRowNumber As Integer
    Dim val As Double

    iRowNumber = InputBox(Prompt:="Number of Rows", _
          Title:="Rows: ", Default:="# of Rows")

    For i = 1 To iRowNumber
        If Cells(i, 5).Value >= 0 And Cells(i, 6) >= 0 Then
            If Cells(i, 6).Value > 0 Then
                val = Cells(i, 5).Value * FormatCurrency(Cells(i, 6).Value)
                Cells(i, 7).Value = val
            End If

        End If
    Next i
End Sub 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-05T08:02:49.630

你有`For i = 1 to iRowNumber`

图像显示数据从第 5 行开始。前面的行包含文本。

因此，尝试`For i = 5 to iRowNumber`

# url - 将 URL 中的“/”更改为“%2f”不起作用

> ID：13210589
> 
> 赞同：19
> 
> 时间：2012-11-03T15:30:44.063
> 
> 标签：url, percent-encoding

我有一个果园站点并且有以下问题：

如果我使用网址：[http](http://asiahotelct.com/tours/ct---chau-%C4%91oc---ha-tien-3n2%C4%91) ://asiahotelct.com/tours/ct---chau-%C4%91oc---ha-tien-3n2%C4%91 ，没关系。但是当我将 url 更改`/`为`%2f`（如：[http](http://asiahotelct.com/tours/ct---chau-%C4%91oc---ha-tien-3n2%C4%91) ://asiahotelct.com/tours%2fct---chau-%C4%91oc---ha-tien-3n2%C4%91 ）时，它不再起作用。

为什么`/`不能代替`%2f`？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-11-03T15:58:45.853

任何**url**都是网络中某些资源（文件）的一种完整地址。但是根据*它实际上必须如何*（按您期望的那样*工作*）的规则，它期望一些字符必须具有某种特定的含义；就像在这种情况下：“/”表示分隔地址（url）的各个*元素的分隔符。*

但是，如果您需要将此类特定字符作为地址（url）的任何此类*元素*的一部分，我们必须对其进行编码。[代码列表](http://www.degraeve.com/reference/urlencoding.php)

> URL 编码将字符转换为可以通过 Internet 传输的格式。- w3学校

所以，**“/”**实际上是一个分隔符，但是**“%2f”**变成了一个普通的字符，它只是代表你的url元素中的“/”字符。

# opengl - 尝试编译opengl项目时出现c ++未定义的引用错误

> ID：13210593
> 
> 赞同：0
> 
> 时间：2012-11-03T15:31:24.673
> 
> 标签：opengl, g++, linker-errors, glew

我尝试使用 g++ 命令编译我的 c++/opengl-project。（我需要这个，因为我想在每个目标系统上使用第二个自写程序重新编译它。）

但是当我执行时：

```
g++ -Iinclude -Isrc $(pkg-config --cflags freetype2) -L/usr/X11R6/lib -L/usr/lib $(pkg-config --libs glew) -lglut $(pkg-config --libs glu) $(pkg-config --libs freetype2) main.cpp  (some more source files) src/Vec4.cpp 
```

我为 gl/glu/glut/glew-functions 得到了很多“未定义的引用”，所以我猜这些库会失败：

```
/tmp/ccUm2dEl.o: In function `Box::render()':
Box.cpp:(.text+0x6e8): undefined reference to `glEnable'
Box.cpp:(.text+0x72c): undefined reference to `glBindTexture'
Box.cpp:(.text+0x736): undefined reference to `glBegin'
...
TextureManager.cpp:(.text+0x23b): undefined reference to `glTexParameteri'
TextureManager.cpp:(.text+0x295): undefined reference to `glTexImage2D'
collect2: ld gab 1 als Ende-Status zurück 
```

我做了一些研究，但根据我发现上面的命令应该是正确的。我也检查了 pkg-config-calls，它们似乎工作。在我尝试 g++ 命令之前，我使用 Codeblocks IDE 编译它并且它工作。这是我的设置：

**在**编译器设置|其他选项中：

```
`pkg-config --cflags freetype2` 
```

**在**链接器设置|链接库中：

```
glut 
```

**在**链接器设置|其他链接器选项中：

```
`pkg-config --libs glu`
`pkg-config --libs glew`
`pkg-config --libs freetype2` 
```

**在**搜索目录|编译器中：

```
include
src 
```

我的系统（Ubuntu Precise）：

```
$ uname -a
Linux andromeda 3.2.0-32-generic #51-Ubuntu SMP Wed Sep 26 21:33:09 UTC 2012 x86_64 x86_64 x86_64 GNU/Linux

$ g++ -dumpversion
4.6

glxinfo
GLX version: 1.4
OpenGL version string: 4.2.0 NVIDIA 304.43

Codeblocks-version: 10.04 
```

谢谢指教

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T15:36:22.507

问题很可能是您以错误的顺序链接。GNU 链接器希望它的库以相反的顺序排列，所以如果你将链接器库放在命令行的*最后*，它应该会更好。

# python - 如何让 Flask 应用程序中的 Python 函数停止运行？

> ID：13210596
> 
> 赞同：0
> 
> 时间：2012-11-03T15:31:58.150
> 
> 标签：python, sockets, smtp, flask

我设置了一个函数，该函数旨在每分钟调用一次以发送电子邮件。我使用以下命令每分钟调用一次：

```
import smtplib
def messages_emailed():
    fromaddr = FROMADDRESS
    toaddrs = TOADDRESS
    msg = "this is a test message."

    username = USER
    password = PASSWORD

    server = smtplib.SMTP('smtp.gmail.com:587')
    server.starttls()
    server.login(username,password)
    server.sendmail(fromaddr, toaddrs, msg)
    server.quit()
         threading.Timer(60, messages_emailed).start() #runs func every min
    messages_emailed() 
```

`control–C`尽管我在终端中停止了应用程序，但我仍然每分钟都在继续接收邮件，并且刷新了我的应用程序在浏览器中运行的页面，尽管我在终端中停止了应用程序，但效果很好，`127.0.0.1:5000`继续显示我的应用程序。我可以编辑我的脚本来添加一个取消语句，但是点击保存没有做任何更改，并且尝试在终端中重新加载我的应用程序返回了一个错误

```
>  * Running on ``http://127.0.0.1:5000/ ``Traceback (most recent call
> last):   File "bit.py", line 79, in <module>
>     app.run()    File "/Library/Python/2.7/site-packages/Flask-0.9-py2.7.egg/flask/app.py",
> line 739, in run
>     run_simple(host, port, self, **options)   File "/Library/Python/2.7/site-packages/Werkzeug-0.8.3-py2.7.egg/werkzeug/serving.py",
> line 613, in run_simple
>     test_socket.bind((hostname, port))   File "/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/socket.py",
> line 224, in meth socket.error: [Errno 48] Address already in use 
```

目前，我已经通过删除用于发送消息的邮件帐户来阻止电子邮件的涌入。但是，我想知道长期解决方案会是什么样子，理想情况下我可以从终端停止或在程序执行时停止执行。研究建议使用，`sys.exit(0)`尽管我不知道在我的程序中将其放置在何处或何时退出该功能。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-03T15:51:00.667

首先，您必须检查格式。

如果你想使用线程，你必须编写你的线程管理器，它将封装你的线程`start()`的`stop()`方法。

`thread1 = threading.Timer(60, sender()).start()`

停止只是打电话`thread1.stop()`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-03T15:48:44.600

您的脚本似乎已经启动了一个新进程来定期重新运行电子邮件发送功能。您可以通过运行来检查活动进程`ps aux | grep python`。

# c++ - 最低的双正值 - cout 可以改变它的值吗？

> ID：13210601
> 
> 赞同：3
> 
> 时间：2012-11-03T15:32:30.847
> 
> 标签：c++, double, precision, cout, ieee

考虑以下两段代码 - 它们之间的唯一区别是单个 cout 打印值 eps：http:
[//ideone.com/0bEeHz](http://ideone.com/0bEeHz) - 这里程序进入无限循环，因为 cout eps 将值更改为 0

```
#include <iostream>

int main()
{
    double tmp = 1.;
    double eps;
    while(tmp != 0) {
        eps = tmp;
        tmp /= 2.;
    }
    if(eps == 0) {
        std::cout << "(1)eps is zero!\n";
    }
    std::cout << "eps before: " << eps;
    if(eps == 0) {
        std::cout << "(2)eps is zero!\n";
    }

    while(eps < 1.) {
        tmp = eps;
        eps *= 2.;
        if(tmp == eps) {
            printf("wtf?\n");
        }
    }

    std::cout << "eps after: " << eps;
} 
```

[http://ideone.com/pI4d30](http://ideone.com/pI4d30) - 在这里我已经注释掉了 cout。

```
#include <iostream>

int main()
{
    double tmp = 1.;
    double eps;
    while(tmp != 0) {
        eps = tmp;
        tmp /= 2.;
    }
    if(eps == 0) {
        std::cout << "(1)eps is zero!\n";
    }
    //std::cout << "eps before: " << eps;
    if(eps == 0) {
        std::cout << "(2)eps is zero!\n";
    }

    while(eps < 1.) {
        tmp = eps;
        eps *= 2.;
        if(tmp == eps) {
            printf("wtf?\n");
        }
    }

    std::cout << "eps after: " << eps;
} 
```

因此，一个单一的 cout 极大地改变了程序逻辑，非常令人惊讶。这是为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-03T16:06:59.503

我认为这是第 5 节（表达式）第 11 段的情况

> 浮动操作数的值和浮动表达式的结果**可以用比类型要求更高的精度和范围来表示**；类型不会因此而改变。

在工作中，参见 原始代码的[这种变体。](http://ideone.com/HM472Q)

```
while(tmp != 0) {
    eps = tmp;
    tmp /= 2.;
} 
```

以扩展精度执行计算和比较。循环运行直到`eps`最小的正扩展值（可能是 80 位 x87 扩展类型）。

```
if(eps == 0) {
    std::cout << "(1)eps is zero!\n";
} 
```

仍然在扩展精度，`eps != 0`

```
std::cout << "eps before: " << eps; 
```

对于转换为要打印的字符串，`eps`存储并转换为`double`精度，结果为 0。

```
if(eps == 0) {
    std::cout << "(2)eps is zero!\n";
} 
```

是的，现在是。

# javascript - 如何使用 JSDoc 告诉 jQuery 被包含？

> ID：13210604
> 
> 赞同：2
> 
> 时间：2012-11-03T15:32:39.303
> 
> 标签：javascript, phpstorm, jsdoc

我刚刚完成了我的 JS 代码。现在我把它移到了它自己的文件中，现在 PHPStorm 告诉我没有名为 $ 的变量。我该如何解决？（JSDoc能解决吗？）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-03T16:07:09.593

可能 PHPStorm`$`在您的 JS 文件中没有看到任何变量声明。检查您是否正确复制了代码。

如果`$`是全局变量（jQuery 之类的），您可以在 JS 文件的顶部添加这样一行`/*global $: false */`。

据我所知，JSDoc 与此无关。其他内置 PHPStorm 的工具，如 JSHint 或 JSLint，检查 JavaScript 代码的正确性。

# php - Fuelphp orm 如果 id 不存在

> ID：13210612
> 
> 赞同：0
> 
> 时间：2012-11-03T15:33:21.797
> 
> 标签：php, orm, fuelphp

我遇到了一个我无法真正解决的小问题。

我用 orm 为燃料 php 中的视频创建了一个删除功能，也许它有点愚蠢，但我真的不知道如何重新定向用户，如果和 id 不存在。

这是我的代码

```
public function action_delete($id)
    {

        $deletevideo = Model_Video::find($id);

        if($deletevideo->user_id != Session::get('sentry_user')):
            Session::set_flash('fail', 'The video you want to remove is not yours, we logged this activity');
            Response::redirect(Uri::base() . "myvideos");
        else:
            unlink(realpath("users/video/" . $deletevideo->video_preview));
            unlink(realpath("users/video/" . $deletevideo->video_file));
            $deletevideo->delete();
            Response::redirect(Uri::base() . "myvideos");
        endif;
    } 
```

html

```
<a href="<?php echo Uri::base(); ?>video/delete/<?php echo $myvid->id; ?>" onclick = "if (! confirm('Are your sure you want to delete this video? <?php echo $myvid->video_title; ?>')) return false;" class="btn btn-danger">Delete</a> 
```

我在一个论坛上看到人们谈论`DB::expr`实现这一目标，但可以找到任何关于它的例子。

请有人给我一个提示吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T23:41:27.587

这里有一些代码可以帮助你：

```
$video = Model_Video::find($id);

if ( ! $video instanceof Model_Video)
{
    Session::set_flash('fail', 'The video ID is not valid!');
    Response::redirect('go/somewhere/else');
} 
```

在使用结果之前，您应该始终检查结果是否实际上是有效的 Model_Video。

# common-lisp - 照应宏符号具有来自不同包的前缀，我该如何摆脱它？

> ID：13210615
> 
> 赞同：3
> 
> 时间：2012-11-03T15:33:26.573
> 
> 标签：common-lisp

我正在尝试编写我的第一个照应宏并且遇到了问题。我正在使用 sblc 和粘液。

当照应宏在另一个包中展开时，它的符号以它在其中定义的包为前缀（即它们变成`tjb-utilities::value`而不是只是`value`。发生了什么？

```
PE> (macroexpand-1 '(act-if-key :pcram (get-node) (print value)))
(IF (HAS-KEY? :PCRAM (GET-NODE))
    (LET ((TJB-UTILITIES::KEY :PCRAM)
          (TJB-UTILITIES::VALUE (GETHASH :PCRAM (GET-NODE))))
      (PRINT VALUE))) 
```

这是宏定义：

```
(defmacro act-if-key (key hashtable &body body)
  `(if (has-key? ,key ,hashtable) 
       (let ((key ,key) (value (gethash ,key ,hashtable)))
     ,@body))) 
```

如果我为该值添加前缀，它确实可以正常工作：

```
(act-if-key :pcram (get-node) (print tjb-utilities::value))
; in: ACT-IF-KEY :PCRAM
;     (LET ((TJB-UTILITIES::KEY :PCRAM)
;           (TJB-UTILITIES::VALUE
;            (GETHASH :PCRAM (PHILOSOPHY-EXPERIENCE::GET-NODE))))
;       (PRINT TJB-UTILITIES::VALUE))
; 
; caught STYLE-WARNING:
;   The variable TJB-UTILITIES::KEY is defined but never used.
; 
; compilation unit finished
;   caught 1 STYLE-WARNING condition

"hello" 
"hello" 
```

包定义如下：

```
(defpackage #:tjb-utilities
  (:nicknames :tjb)
  (:use #:cl)
  (:export "HAS-KEY?" "KEY-VALUE-PAIRS" "ACT-IF-KEY" "TJB-MAKE-HASH-TABLE"))

(defpackage #:my-package
  (:nicknames :pe)
  (:use #:cl #:clsql #:tjb-utilities)) 
```

更新：将 lambda 列表中的键更改为 key_in 无效

```
(defmacro act-if-key (key_in hashtable &body body)
  `(if (has-key? ,key_in ,hashtable) 
       (let ((key ,key_in) (value (gethash ,key_in,hashtable)))
     ,@body))) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-04T05:41:54.857

您可以只导出 'key 和 'value 符号。[Anaphora](http://common-lisp.net/project/anaphora/)就是这样做的：

```
(defpackage :anaphora
7     (:use :cl)
8     (:export
9      #:it
10     #:alet
11     #:slet
12     #:aif
13     #:aand
14     #:sor
15     #:awhen
16     #:aprog1
17     #:acase
18     #:aecase
...etc. 
```

注意'它导出。

照应宏的要点是有意捕获宏主体中未由宏调用者明确定义的某些符号（我理解这是对定义的极端立场）。因此，任何使用照应宏的人都需要知道将哪些符号引入该宏的环境（主体）中。这意味着当这些符号名称添加到环境中时，他们不应该感到惊讶。所以我认为出口照应没有问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-03T16:43:27.170

```
CL-USER> (in-package #:tjb)
#<PACKAGE "TJB-UTILITIES">
TJB> (defmacro act-if-key (key hashtable &body body)
       (let ((value (intern "VALUE")))
         `(if (has-key? ,key ,hashtable) 
              (let ((key ,key) (,value (gethash ,key ,hashtable)))
                ,@body))))
ACT-IF-KEY
TJB> (macroexpand-1 '(tjb:act-if-key :pcram (get-node) (print value)))
(IF (HAS-KEY? :PCRAM (GET-NODE))
    (LET ((KEY :PCRAM) (VALUE (GETHASH :PCRAM (GET-NODE))))
      (PRINT VALUE)))
T
TJB> (in-package #:cl-user)
#<PACKAGE "COMMON-LISP-USER">
CL-USER> (macroexpand-1 '(tjb:act-if-key :pcram (get-node) (print value)))
(IF (TJB-UTILITIES::HAS-KEY? :PCRAM (GET-NODE))
    (LET ((TJB-UTILITIES::KEY :PCRAM) (VALUE (GETHASH :PCRAM (GET-NODE))))
      (PRINT VALUE)))
T
CL-USER> 
```

不确定我是否复制了您需要的所有内容，而且我对您打算如何使用“密钥”有点模糊，所以我这样做只是为了`value`在包中创建它的方式，其中宏用来。无论您是否需要相同的东西，您都会自己弄清楚`key`。

`value`以上将当前包中的符号绑定到`gethash`将返回的任何内容。在您的原始版本中，您`key`由宏的用户提供，所以我决定您不希望`key`宏内有符号，只是它的值。

但是等一下，也许会有更好的答案，也许你可以只是`make-symbol`它而不是实习，然后以某种方式绑定它。我不知道。

# java - 项目在工作集中出现两次 - eclipse

> ID：13210620
> 
> 赞同：5
> 
> 时间：2012-11-03T15:33:50.550
> 
> 标签：java, eclipse

过去一天我一直在尝试修复损坏的 Eclipse 工作区。我在 Dropbox 上同步了它，它已经运行了很长时间，但最近 .metadata 文件夹中的一些冲突文件出现了问题，它搞砸了一切，我的项目刚刚停止在我的项目资源管理器中显示。

我最终将项目重新导入工作区，它们在项目视图中显示良好，但是当我尝试将它们放入工作集中时，每个项目出现两次。如果我删除其中一个重复项，另一个也会被删除。有谁知道如何解决这个问题？我宁愿不删除 .metadata ，因为这会删除我所有的设置和偏好。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-03T15:51:51.820

如果我是你，我会开始一个新的工作空间。使用[首选项导出/导入](http://help.eclipse.org/galileo/index.jsp?topic=/org.eclipse.platform.doc.user/tasks/timpandexp.htm)功能确保您在工作区之间保留所有您喜欢的设置。

我从未设法保存损坏的工作区。有时你不得不让他们走，就像[疯狗](http://en.wikipedia.org/wiki/Old_Yeller_%281957_film%29)一样。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-11-03T15:15:17.060

检查它们是否是显示两次的相同文件。如果是这种情况，那么解决方案很简单 - 转到“项目资源管理器”窗口，展开向下箭头以获取菜单，然后选择“项目演示”->“分层”。

# php - 从另一个 HTML 文件打开一个 fancybox 库

> ID：13210625
> 
> 赞同：-1
> 
> 时间：2012-11-03T15:34:24.117
> 
> 标签：php, javascript, html, fancybox

我有两个文件，当我有不同的相册链接时，一个带有 HTML 代码，例如：

```
<a href="albumprueba.php"><img class="fancyboxi"
 src="Libro Fez/Libro Fez - 001.jpg" alt="image19"
 width="91%" height="56" /></a> 
```

还有另一个文件（是 php）我有一个例程扫描文件夹中的所有照片，并显示照片：

```
 <a  class="fancyboxi" data-fancybox-group="gallery" title="Laurea"
 href="Libro Fez/<?php echo $archivos[$imagen_a_empezar]?>"><img  
 src="Libro Fez/<?php echo $archivos[$imagen_a_empezar]?>" alt=""   width="19%"/></a> 
```

我想打开相册中的 HTML 文件并打开一个包含所有照片的花式框，这些照片在 PHP 文件中显示了例程。

我试图在 HTML 文件中这样做，但不起作用：

```
<a href="albumprueba.php?Libro Fez/Libro Fez - 001.jpg"><img src="Libro Fez/Libro Fez - 001.jpg" alt="image19" width="91%" height="56" /></a> 
```

任何想法？感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-03T16:44:41.427

您的 href 肯定格式不正确。

> albumprueba.php?Libro Fez/Libro Fez - 001.jpg

这不是地址，因为 URL 不能有空格（手动转到它并检查浏览器导航栏中的地址是什么）。此外，它只是在 jpeg 上着陆 - 您确定要此链接指向单个图像吗？

除此之外，锚*应该可以*工作。点击链接后是否收到 404 错误？如果您希望其他 html 文件可以从父页面永久查看，您应该考虑使用 iframe。

# matlab - 如何在 MATLAB 中对感兴趣区域进行自动裁剪？

> ID：13210629
> 
> 赞同：1
> 
> 时间：2012-11-03T15:34:43.233
> 
> 标签：matlab

我是使用 MATLAB 进行图像处理的初学者，我必须做一些任务，我想像使用 imcrop 一样裁剪或剪切特定区域，但想让它自动（我无法上传图片，因为我是新用户，我使用的图片是植物的横截面）我真的不知道如何检测和只切除那个区域。如果有人可以帮助我解决这个问题，我将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-03T15:38:09.347

您需要向我们提供更多信息。如果要自动检测图像的一部分以对其进行裁剪，则需要进行一些图像处理。哪种类型取决于图像的特征和要裁剪的部分。

您可以使用例如[http://www.postimage.org/发布图像](http://www.postimage.org/)

# google-app-engine - GAE Java-尝试检索对象时出现空指针异常

> ID：13210632
> 
> 赞同：1
> 
> 时间：2012-11-03T15:34:56.397
> 
> 标签：google-app-engine, google-cloud-datastore, jpa-2.0, gae-eclipse-plugin

我是 GAE 开发的新手。对我来说，使用 jpa 插入数据存储区工作正常，但没有进行检索。

下面是一种在用户尝试登录时对用户进行身份验证的方法。

```
public boolean loginUser(User user) {

    EntityManagerFactory emf = Persistence
            .createEntityManagerFactory("SOAApp");
    EntityManager mgr = emf.createEntityManager();
    boolean login=false;
    Query query=mgr.createQuery("select u from User u where u.userName=:uid and u.password=:pwd");

    query.setParameter("uid", user.getUserName());
    query.setParameter("pwd",user.getPassword());
    query.setMaxResults(1);

    try {
        user=(User) query.getSingleResult();
        System.out.println("user : "+user.getName());
        if(user!=null)  {
            System.out.println("logged in...");
            login=true;
        }
    }
    catch(Exception e) {
        e.printStackTrace();
    }
    finally {
        mgr.close();
    }
    return login;
} 
```

但是在尝试通过传递具有有效用户名和密码的用户对象来执行该方法时出现以下错误。

```
java.lang.NullPointerException
at com.google.appengine.datanucleus.query.QueryEntityPKFetchFieldManager.fetchIntField(QueryEntityPKFetchFieldManager.java:70)
at org.datanucleus.identity.IdentityUtils.getApplicationIdentityForResultSetRow(IdentityUtils.java:93)
at com.google.appengine.datanucleus.EntityUtils.entityToPojo(EntityUtils.java:1009)
at com.google.appengine.datanucleus.query.DatastoreQuery$2.apply(DatastoreQuery.java:228)
at com.google.appengine.datanucleus.query.DatastoreQuery$2.apply(DatastoreQuery.java:225)
at com.google.appengine.datanucleus.query.LazyResult.resolveNext(LazyResult.java:96)
at com.google.appengine.datanucleus.query.LazyResult.resolveAll(LazyResult.java:121)
at com.google.appengine.datanucleus.query.LazyResult.size(LazyResult.java:115)
at com.google.appengine.datanucleus.query.StreamingQueryResult.size(StreamingQueryResult.java:151)
at org.datanucleus.store.query.Query.executeQuery(Query.java:1808)
at org.datanucleus.store.query.Query.executeWithMap(Query.java:1693)
at org.datanucleus.api.jpa.JPAQuery.getSingleResult(JPAQuery.java:231)
at com.soa.managers.UserManager.loginUser(UserManager.java:63)
at com.soa.servlets.LoginServlet.doPost(LoginServlet.java:48)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:637)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
at org.mortbay.jetty.servlet.ServletHolder.handle(ServletHolder.java:511)
at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1166)
at com.google.appengine.api.socket.dev.DevSocketFilter.doFilter(DevSocketFilter.java:74)
at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
at com.google.appengine.tools.development.ResponseRewriterFilter.doFilter(ResponseRewriterFilter.java:123)
at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
at com.google.appengine.tools.development.HeaderVerificationFilter.doFilter(HeaderVerificationFilter.java:34)
at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
at com.google.appengine.api.blobstore.dev.ServeBlobFilter.doFilter(ServeBlobFilter.java:61)
at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
at com.google.apphosting.utils.servlet.TransactionCleanupFilter.doFilter(TransactionCleanupFilter.java:43)
at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
at com.google.appengine.tools.development.StaticFileFilter.doFilter(StaticFileFilter.java:125)
at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
at com.google.appengine.tools.development.BackendServersFilter.doFilter(BackendServersFilter.java:97)
at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
at org.mortbay.jetty.servlet.ServletHandler.handle(ServletHandler.java:388)
at org.mortbay.jetty.security.SecurityHandler.handle(SecurityHandler.java:216)
at org.mortbay.jetty.servlet.SessionHandler.handle(SessionHandler.java:182)
at org.mortbay.jetty.handler.ContextHandler.handle(ContextHandler.java:765)
at org.mortbay.jetty.webapp.WebAppContext.handle(WebAppContext.java:418)
at com.google.appengine.tools.development.DevAppEngineWebAppContext.handle(DevAppEngineWebAppContext.java:94)
at org.mortbay.jetty.handler.HandlerWrapper.handle(HandlerWrapper.java:152)
at com.google.appengine.tools.development.JettyContainerService$ApiProxyHandler.handle(JettyContainerService.java:383)
at org.mortbay.jetty.handler.HandlerWrapper.handle(HandlerWrapper.java:152)
at org.mortbay.jetty.Server.handle(Server.java:326)
at org.mortbay.jetty.HttpConnection.handleRequest(HttpConnection.java:542)
at org.mortbay.jetty.HttpConnection$RequestHandler.content(HttpConnection.java:938)
at org.mortbay.jetty.HttpParser.parseNext(HttpParser.java:755)
at org.mortbay.jetty.HttpParser.parseAvailable(HttpParser.java:218)
at org.mortbay.jetty.HttpConnection.handle(HttpConnection.java:404)
at org.mortbay.io.nio.SelectChannelEndPoint.run(SelectChannelEndPoint.java:409)
at org.mortbay.thread.QueuedThreadPool$PoolThread.run(QueuedThreadPool.java:582) 
```

2012 年 11 月 3 日下午 3:25:02 com.google.appengine.tools.development.LocalResourceFileServlet doGet

> 第 63 行 [在 com.soa.managers.UserManager.loginUser(UserManager.java:63)] 是“user=(User) query.getSingleResult();”

请帮我

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T21:01:03.817

仍在搜索中？

我遇到了同样的问题，我的实体 User 有一个名为 userId 的主键，其类型为“int”。现在我将其更改为“长”，我所有的问题和警告都消失了！也许这可以帮助你！

我期待着您的回音！

问候，斯蒂芬

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-23T18:59:17.200

确保您的实体的密钥是此处详述的有效类型： [https ://developers.google.com/appengine/docs/java/datastore/jdo/creatinggettinganddeletingdata#Keys](https://developers.google.com/appengine/docs/java/datastore/jdo/creatinggettinganddeletingdata#Keys)

您遇到的异常很可能与关键问题有关。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-03T18:27:03.610

你得到nullpointerexception的原因是getSingleResult方法返回null。因为你使用了 (User)query.getSingleResult()，所以 null 值的类型转换会引发异常。

我认为数据存储区中没有相关用户，因此您遇到了异常。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-04T07:45:40.037

```
<?xml version="1.0" encoding="UTF-8"?>
<datastore-indexes  autoGenerate="true">
    <datastore-index kind="HABERLER" ancestor="false" source="manual">
        <property name="__key__" direction="desc"/>
    </datastore-index> 
```

HABERLER 是表名。写下你的表名而不是 HABERLER。然后在 WEB-INF 目录中创建一个 datastore-indexes.xml 文件。然后将上面的代码复制到这个文件中。

# c# - 在 jQuery 中使用 DataSet 值

> ID：13210634
> 
> 赞同：0
> 
> 时间：2012-11-03T15:35:18.643
> 
> 标签：c#, jquery, json

我有一个`select element`将用它的选项值动态填充。这些值将从 Sql sp（我的 C# 代码中的 WebMethod）中获取，页面准备就绪后由 jQuery.ajax 调用，该 SQL 查询的结果是`DataSet`.

我会填充`select`使用类似的东西`$('<option>').val('DataSetValue1').text('DataSetValue1Text').appendTo('#selectID');`

我的问题是，我如何将所有`DataSet`内容转移到这些 jQuery 变量中。我会序列化`DataSet`into `JSON`，但是然后呢？我不精通服务器-客户端交互。

DataSet 已经完成，但我不确定如何继续。希望你能为我照亮道路。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T16:15:41.497

Dataset 是 Datatable dataset(i) 的集合，将为您提供第 i 个表

表只不过是一个多维矩阵。所以这将是你的 javascript

1.  接收数据集作为对象说`dsObj`。

2.  通过 获取第 n 个数据表`dtObj = dsObj[n];`。

3.  现在你把它当作一个 mulyi 维对象`dtObj[i][j]`。

希望这有效

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-03T15:44:16.127

**下面的警告是伪代码不是真正的 javascript 代码**

1.  检查 jquery $.ajax 方法以查看您将如何与服务器/客户端交互
2.  将 JSON 发送到客户端（类似于 out.print/out.write）
3.  做类似的事情

> ```
> for (var _opt in JSON) {
>   //do the appending
>   $('<option>' + JSON[_opt] + '</option>').appendTo('#selectID');
> } 
> ```

//我永远不会在循环中追加。我会创建选项数组并做单个 // //append !!!

# mono - MonoDevelop - 突出显示类型名称

> ID：13210635
> 
> 赞同：0
> 
> 时间：2012-11-03T15:35:23.583
> 
> 标签：mono, monodevelop

有没有办法像 VS 一样配置 MonoDevelop 以突出显示类型名称？

我在 Fedora-17 上使用 MonoDevelop 2.8.8.4。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-04T19:18:41.417

看起来 MonoDevelop[语义突出显示又回到了 3.0](http://monodevelop.com/Download/What%27s_new_in_MonoDevelop_3.0#Semantic_Highlighting) 我已经让 MD 在 Ubuntu 上工作——尽管我通过从 github 拉取源代码并（在完成所有必要的构建步骤之后）调用 make run 来运行它——以防你想给试一试；我强烈建议迁移到 3.0 ..（如果可能的话），它还有一些其他的重构功能让它值得！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-04T22:47:14.940

为了获得语义突出显示，您需要升级到 MonoDevelop 3.0.x

# python - 区分 nginx、haproxy、varnish 和 uWSGI/Gunicorn

> ID：13210636
> 
> 赞同：29
> 
> 时间：2012-11-03T15:35:27.337
> 
> 标签：python, http, nginx, wsgi, haproxy

我对系统管理员的东西真的很陌生，并且只配置了一个带有 nginx（提供静态文件）和 gunicorn 作为 Web 服务器的 VPS。

我最近一直在阅读其他不同的东西。我开始了解其他工具：

[nginx](http://wiki.nginx.org/Main) : 高性能 HTTP 服务器和反向代理，以及 IMAP/POP3 代理服务器

[haproxy](http://haproxy.1wt.eu/)：高性能负载均衡器

[varnish](https://www.varnish-cache.org/) : 缓存 HTTP 反向代理

[gunicorn](http://gunicorn.org/)：python WSGI http 服务器

[uwsgi](http://projects.unbit.it/uwsgi/) : 另一个 python WSGI 服务器

我一直在阅读上述所有 5 种工具，但我对哪一种用于什么目的感到困惑？有人可以用通俗的话向我解释一下每种工具的用途，一起使用时以及它们解决了哪些具体问题？

* * *

## 回答 #1

> 赞同：83
> 
> 时间：2012-11-03T17:25:18.840

假设您计划在您的新 VPS 上托管一些网站。让我们看看每个站点可能需要的工具。

## HTTP 服务器

网站“Alpha”仅由一些纯 HTML、CSS 和 Javascript 组成。内容是静态的。

当有人访问网站 Alpha 时，他们的浏览器会发出一个 HTTP 请求。您已配置（通过 DNS 和名称服务器配置）该请求被定向到您的 VPS 的 IP 地址。现在您需要您的 VPS 能够接受该 HTTP 请求，决定如何处理它，并发出访问者的浏览器可以理解的响应。您需要一个 HTTP 服务器，例如**Apache httpd**或**NGINX**，假设您进行了一些研究并最终决定使用 NGINX。

## 应用服务器

**网站“Beta”是动态的，使用Django** Web 框架编写。

[WSGI 是一种协议](http://en.wikipedia.org/wiki/Web_Server_Gateway_Interface)，描述了 Python 应用程序（django 应用程序）和应用程序服务器之间的接口。所以你现在需要的是一个 WSGI 应用服务器，它能够理解 Web 请求，对应用程序的各种对象进行适当的“调用”，并返回结果。你有很多选择，包括**gunicorn**和**uWSGI**。假设您进行了一些研究并最终决定使用 uWSGI。

uWSGI 也可以接受和处理静态内容的 HTTPS 请求，因此如果您愿意，您可以让网站 Alpha 完全由 NGINX 提供服务，而网站 Beta 则完全由 uWSGI 提供服务。就是这样。

## 反向代理服务器

但是 uWSGI 在处理静态内容方面的性能很差，所以你宁愿使用 NGINX 来处理像图像这样的静态内容，即使是在网站 Beta 上也是如此。但是随后必须区分请求并将它们发送到正确的位置。那可能吗？

事实证明 NGINX 不仅仅是一个 HTTP 服务器，也是一个[反向代理](http://en.wikipedia.org/wiki/Reverse_proxy)服务器：它能够将传入的请求重定向到另一个地方，比如你的 uWSGI 应用程序服务器，或者许多其他地方，收集响应并将它们发送回原始请求者。惊人的！因此，您将所有传入请求配置为转到 NGINX，它将提供静态内容，或者在需要时将其重定向到应用服务器。

## 使用多个 Web 服务器进行负载平衡

您还托管了网站 Gamma，这是一个在国际上很受欢迎并获得大量流量的博客。

对于 Gamma，您决定设置多个 Web 服务器。所有传入的请求都将通过 NGINX 发送到您的原始 VPS，并且您将 NGINX 配置为以循环方式将请求重定向到其他几个 Web 服务器之一，并将响应返回给原始请求者。

**HAProxy**是专门为高流量站点平衡负载的 Web 服务器。在这种情况下，您可以使用 NGINX 来处理站点 Gamma 的流量。在其他情况下，可以选择设置高可用性集群：例如，将所有请求发送到像 HAProxy 这样的服务器，它会智能地将流量重定向到类似于您原始 VPS 的 nginx 服务器集群。

## 缓存服务器

由于流量庞大，网站 Gamma 超出了您的 VPS 的容量。假设您改为托管网站 Delta，而您的 Web 服务器无法处理 Delta 的原因是由于一个流行的功能非常内容繁重。

缓存服务器能够了解哪些媒体内容被频繁请求并以不同的方式存储该内容，从而可以更快地提供服务。这是通过减少磁盘 IO 操作来实现的；流行的内容可以存储在内存或虚拟内存中。您可能决定将现有的 NGINX 堆栈与**Varnish**或**Memchached**等技术结合起来，以更有效地实现此类优化和服务器网站 Gamma。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-03T16:16:23.443

我将为每个人提供一个非常简洁（非常非正式）的描述，按照您从网络浏览器发出请求时它们被点击的顺序：

*   **HAProxy**会平衡您的流量负载，因此如果您的网页每秒接收 5000 次点击，您无法仅使用一台网络服务器来处理，因此 HAProxy 将平衡您背后的网络服务器之间的点击。

*   **Varnish**是一个缓存服务器，它位于你的网络服务器前面和 HAProxy 后面，所以如果一个资源已经被 Varnish 缓存了，他会自己处理请求，而不是将请求传递给后面的网络服务器。

*   **ngingx**、**gunicorn**、**uwsgi**是 Web 服务器，它们位于 varnish 后面，将获取 varnish 允许通过的请求。这些 Web 服务器使用优化设计来处理高负载（每秒请求数）。

 *** * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-11-03T16:39:48.227

First gunicorn 和 uwsgi 都是应用服务器。换句话说，他们负责以稳定和高性能的方式运行您的 python 代码。通常作为常规网络服务器的后端。

网络服务器将是 nginx，它擅长提供静态资产并将动态内容的请求传递给应用服务器。

如果上面没有提供足够的性能，你在 nginx 和客户端之间添加清漆，它应该加快对同一事物的重复请求。

haproxy 是一个负载均衡器，如果您有多个服务器用于相同的内容，该软件将尝试在它们之间以最佳方式分配请求。

所以基本上：

1.  您的 python 代码位于应用服务器（uwsgi 或 gunicorn）中
2.  您的静态网络资产位于 nginx 中
3.  haproxy 和 varnish 是可以让您更好地处理大量请求的软件**

# python - 用转义 ASCII 编写的 Unicode 字符串

> ID：13210637
> 
> 赞同：-1
> 
> 时间：2012-11-03T15:35:29.440
> 
> 标签：python, unicode, ascii

我将 PHP/webservice 与 Python 一起使用，但它给我带来了麻烦：
我想拥有的地方`u'Syst\xe8me'`，我就有`u'Syst\xc3\xa8me'`。

而且我不知道如何从 B 到 A。

PS：我已经尝试`encoding='ascii'`在我的`xmlrpclib.Server`.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-03T15:39:18.067

Latin-1（又名 ISO 8859-1）编码可用于将小于 256 的字符转换为字节。

```
>>> u'Syst\xc3\xa8me'.encode('latin-1').decode('utf-8')
u'Syst\xe8me' 
```

# java - 休眠删除查询

> ID：13210638
> 
> 赞同：40
> 
> 时间：2012-11-03T15:35:37.570
> 
> 标签：java, hibernate

当我尝试从数据库中删除条目时，使用

```
session.delete(object) 
```

那么我可以执行以下操作：

1) 如果该行存在于 DB 中，则执行两个 SQL 查询：一个选择，然后一个删除

2）如果数据库中不存在该行，则仅执行选择查询

但这又不是更新的情况。无论数据库行是否存在，都只会执行更新查询。

请让我知道为什么删除操作会出现这种行为。这不是一个性能问题，因为有两个查询而不是一个查询？

**编辑：**

我正在使用休眠 3.2.5

**示例代码：**

```
SessionFactory sessionFactory = new Configuration().configure("student.cfg.xml").buildSessionFactory();
    Session session = sessionFactory.openSession();
    Student student = new Student();
    student.setFirstName("AAA");
    student.setLastName("BBB");
    student.setCity("CCC");
    student.setState("DDD");
    student.setCountry("EEE");
    student.setId("FFF");
    session.delete(student);
    session.flush();
            session.close(); 
```

**cfg.xml**

```
<property name="hibernate.connection.username">system</property>
    <property name="hibernate.connection.password">XXX</property>
    <property name="hibernate.connection.driver_class">oracle.jdbc.OracleDriver</property>
    <property name="hibernate.connection.url">jdbc:oracle:thin:@localhost:1521/orcl</property>      
    <property name="hibernate.jdbc.batch_size">30</property>
    <property name="hibernate.dialect">org.hibernate.dialect.OracleDialect</property>
    <property name="hibernate.cache.use_query_cache">false</property>
    <property name="hibernate.cache.use_second_level_cache">false</property>
    <property name="hibernate.connection.release_mode">after_transaction</property>
    <property name="hibernate.connection.autocommit">true</property>
    <property name="hibernate.connection.pool_size">0</property>
    <property name="hibernate.current_session_context_class">thread</property>    
    <property name="hibernate.show_sql">true</property>
    <property name="hibernate.hbm2ddl.auto">update</property> 
```

**hbm.xml**

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE hibernate-mapping PUBLIC "-//Hibernate/Hibernate Mapping DTD 3.0//EN" "http://hibernate.sourceforge.net/hibernate-mapping-3.0.dtd">
<hibernate-mapping>
<class name="com.infy.model.Student" table="STUDENT">
    <id name="id" column="ID">
        <generator class="assigned"></generator>
    </id>
    <property name="firstName" type="string" column="FIRSTNAME"></property>
    <property name="lastName" type="string" column="LASTNAME"></property>
    <property name="city" type="string" column="CITY"></property>
    <property name="state" type="string" column="STATE"></property>
    <property name="country" type="string" column="COUNTRY"></property>        
</class> 
```

* * *

## 回答 #1

> 赞同：83
> 
> 时间：2012-11-05T21:50:34.577

原因是为了删除一个对象，Hibernate 要求该对象处于持久状态。因此，Hibernate 首先获取对象（SELECT），然后将其删除（DELETE）。

为什么 Hibernate 需要先获取对象？原因是可能启用了 Hibernate 拦截器（[http://docs.jboss.org/hibernate/orm/3.3/reference/en/html/events.html](http://docs.jboss.org/hibernate/orm/3.3/reference/en/html/events.html)），并且对象必须通过这些拦截器才能完成其生命周期. 如果直接在数据库中删除行，则拦截器将不会运行。

另一方面，可以使用批量操作在单个 SQL DELETE 语句中删除实体：

```
Query q = session.createQuery("delete Entity where id = X");
q.executeUpdate(); 
```

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2012-11-06T13:31:56.920

要理解hibernate的这种特殊行为，理解一些hibernate概念很重要——

**休眠对象状态**

> Transient - 如果一个对象已经被实例化并且仍然没有与 Hibernate 会话相关联，则它处于瞬态状态。
> 
> 持久性 - 持久性实例在数据库中具有表示形式和标识符值。它可能刚刚被保存或加载，但是，根据定义，它在 Session 的范围内。
> 
> Detached - 一个分离的实例是一个已经被持久化的对象，但是它的 Session 已经被关闭了。

[http://docs.jboss.org/hibernate/orm/3.3/reference/en/html/objectstate.html#objectstate-overview](http://docs.jboss.org/hibernate/orm/3.3/reference/en/html/objectstate.html#objectstate-overview)

**事务后写**

接下来要了解的是“事务写入落后”。当附加到休眠会话的对象被修改时，它们不会立即传播到数据库。Hibernate 这样做至少有两个不同的原因。

> *   执行批量插入和更新。
> *   仅传播最后一次更改。如果一个对象被多次更新，它仍然只触发一个更新语句。

[http://learningviacode.blogspot.com/2012/02/write-behind-technique-in-hibernate.html](http://learningviacode.blogspot.com/2012/02/write-behind-technique-in-hibernate.html)

**一级缓存**

Hibernate 有一个叫做“一级缓存”的东西。每当您将对象传递给`save()`、`update()`或时，以及每当您使用、、或`saveOrUpdate()`检索对象时，该对象都会添加到 Session 的内部缓存中。这是它跟踪各种对象的变化的地方。`load()``get()``list()``iterate()``scroll()`

**Hibernate 拦截器和对象生命周期监听器 -**

从会话到应用程序的拦截器接口和侦听器回调，允许应用程序在保存、更新、删除或加载持久对象之前检查和/或操作持久对象的属性。 [http://docs.jboss.org/hibernate/orm/4.0/hem/en-US/html/listeners.html#d0e3069](http://docs.jboss.org/hibernate/orm/4.0/hem/en-US/html/listeners.html#d0e3069)

* * *

**本节已更新**

**级联**

Hibernate 允许应用程序定义关联之间的级联关系。例如，`'cascade-delete'`从父节点到子节点的关联将导致在删除父节点时删除所有子节点。

**那么，为什么这些很重要。**

为了能够进行事务后写，能够跟踪对对象（对象图）的多个更改并能够执行生命周期回调，hibernate 需要知道对象是否存在`transient/detached`并且它需要将对象放在它的第一级在对底层对象和关联关系进行任何更改之前进行缓存。

这就是为什么hibernate **（有时）会**发出一条`'SELECT'`语句，在对对象进行更改之前将对象（如果尚未加载）加载到它的一级缓存中。

**为什么 hibernate 有时只发出 'SELECT' 语句？**

Hibernate 发出一个`'SELECT'`语句来确定对象处于什么状态。如果 select 语句返回一个对象，则该对象处于`detached`状态，如果它没有返回一个对象，则该对象处于`transient`状态。

**来到你的场景**-

**Delete** - 'Delete' 发出 SELECT 语句，因为 hibernate 需要知道对象是否存在于数据库中。如果对象存在于数据库中，hibernate 将其视为`detached`，然后将其重新附加到会话并处理删除生命周期。

**更新**- 由于您是显式调用`'Update'`而不是`'SaveOrUpdate'`，因此休眠会盲目地假定对象处于`detached`状态，将给定对象重新附加到会话一级缓存并处理更新生命周期。如果与hibernate的假设相反，该对象在数据库中不存在，则在会话刷新时抛出异常。

**SaveOrUpdate** - 如果调用`'SaveOrUpdate'`，hibernate 必须确定对象的状态，因此它使用 SELECT 语句来确定对象是否处于`Transient/Detached`状态。如果对象处于`transient`状态，则处理`'insert'`生命周期；如果对象处于`detached`状态，则处理`'Update'`生命周期。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-04T13:15:24.473

我不确定，但是：

*   如果您使用非瞬态对象调用 delete 方法，这意味着首先从数据库中获取对象。所以看到select语句是正常的。也许最后你看到2选择+1删除？

*   如果您使用瞬态对象调用 delete 方法，那么您可能有一个`cascade="delete"`或类似的东西需要首先检索对象，以便在需要时可以执行“嵌套操作”。

* * *

**编辑：** 使用瞬态实例调用 delete() 意味着执行以下操作：

```
MyEntity entity = new MyEntity();
entity.setId(1234);
session.delete(entity); 
```

这将删除 id 为 1234 的行，即使该对象是一个简单的 pojo，它没有被 Hibernate 检索到，不存在于其会话缓存中，也完全不受 Hibernate 管理。

如果你有一个实体关联，Hibernate 可能必须获取完整的实体，以便它知道删除是否应该级联到关联的实体。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-09T09:28:44.210

而不是使用

> session.delete（对象）

采用

```
getHibernateTemplate().delete(object) 
```

既可`select` 查询又可`delete`使用`getHibernateTemplate()`

在`select`查询中，您必须使用`DetachedCriteria`或`Criteria`

选择查询示例

```
List<foo> fooList = new ArrayList<foo>();
DetachedCriteria queryCriteria = DetachedCriteria.forClass(foo.class);
queryCriteria.add(Restrictions.eq("Column_name",restriction));
fooList = getHibernateTemplate().findByCriteria(queryCriteria); 
```

在休眠中避免使用会话，这里我不确定但问题只是因为会话使用而发生

# jquery - 将谷歌分析数据拉到我自己的管理面板

> ID：13210639
> 
> 赞同：1
> 
> 时间：2012-11-03T15:35:42.937
> 
> 标签：jquery, google-analytics

我正在制作自己的自定义管理面板（python），我想在其中显示我的 Google 分析数据，而不必单独登录我的 Google 分析页面来查看它。

有没有办法做到这一点？我只能找到 2010 年的帖子说这是不可能的，但我希望在两年内有所改变。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-03T15:42:15.757

只需谷歌 - “谷歌分析 API”。我很快找到了这个有趣的库：

[http://analytics-api-samples.googlecode.com/svn/trunk/src/reporting/javascript/ez-ga-dash/docs/user-documentation.html](http://analytics-api-samples.googlecode.com/svn/trunk/src/reporting/javascript/ez-ga-dash/docs/user-documentation.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-03T15:42:46.647

有可能的。在此处查看 Google 的文档： [https ://developers.google.com/analytics/](https://developers.google.com/analytics/)

以我的经验，获得像他们的界面一样强大和完整的东西是完全不可能的。但是，如果您只想要一些快速的统计数据，那就没问题了。

# iphone - 如何在 UITableView 的单个单元格中插入多条数据

> ID：13210647
> 
> 赞同：0
> 
> 时间：2012-11-03T15:36:09.147
> 
> 标签：iphone, ios, uitableview

我很想知道如何将一条以上的数据添加到 UITableView 的一个单元格中的一行数据中。

例如，在 Iphone 的 Clock App 的 StopWatch 中，它们可以拥有多个数据。

```
Lap  Time     Total
1    00.01.5  00.01.5 
```

有兴趣知道如何一次将三个值添加到一个单元格中......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T15:40:27.693

您需要创建自己的单元格，该单元格继承自 UITableViewCell。 [这是一个](http://highoncoding.com/Articles/823_Creating_a_Custom_UITableViewCell.aspx)如何创建自定义 UITableViewCell 的示例。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-03T15:46:11.073

您必须为本[教程](http://www.highoncoding.com/Videos/823_Creating_a_Custom_UITableViewCell.aspx)的结帐创建一个自定义的 uitableviewcell或参考[Apple 文档](http://developer.apple.com/library/ios/#documentation/userexperience/conceptual/tableview_iphone/TableViewCells/TableViewCells.html)了解更多详细信息

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-03T15:59:43.220

您可以继承 UITableViewCell，也可以选择单元格上 IB 上的“自定义”属性，然后将标签、按钮和任何您想要的内容拖放到 UITableViewCell 中。在您创建的每个 IBOutlet 上设置标签。然后你可以这样做`tableView:cellForRowAtIndexPath`

```
UILabel *yourLabel = (UILabel *)[cell viewWithTag:tag]; // Set your own tag and outlet. 
```

从那里您可以根据需要自定义它，而无需对其进行子类化。

话虽如此，通常的方法是继承 UITableViewCell。这样，您可以让每个单元格存储信息，并将 IBOutlets 作为属性添加到`CustomTableViewCell`正常状态。然后您可以将信息添加到 中`CustomTableViewCell`，并让单元格处理其余部分。

# java - 翻译整个挥杆

> ID：13210653
> 
> 赞同：1
> 
> 时间：2012-11-03T15:37:00.663
> 
> 标签：java, swing, localization

所以，我有一个程序，我想翻译成克罗地亚语......

但是我了解到，swing 有时可能会创建我没有预料到的对话框和窗口（例如，当试图将文件重命名为 JfolderChooser 中的现有名称时）。

因此，我没有试图期待意外，而是决定将整个挥杆翻译成克罗地亚语并将我的翻译提交给 Oracle（或我应该提交的任何人）（如果可能的话，我听说这是鼓励的）。然后我可以使用本地化类来选择我的语言，就是这样（至少有一天）......

但是，我真的不知道该怎么做，也不知道要查看 src 文件夹的哪些文件，所以我需要你的帮助。

我要查看哪些（java）文件，将 Swing 翻译成新语言的标准化程序是什么？

除了处理语言（如货币等）外，我还有其他事情要做吗？

最后，我如何将它提交给 Oracle？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T15:58:09.067

您可以这样做，但它们不太可能包含您的翻译。那是因为一旦你包含给定语言的翻译，你就需要支持它。尽管这些翻译不会经常更改，但它仍然是相当认真的努力，而且就我个人而言，我不会冒险包含可能很快就会过时的内容。
这个故事还有第二面：有人必须审查你的翻译。信不信由你，它并不便宜。因此，除非 Oracle 决定为 JDK 众包他们的翻译，否则恐怕你不走运。

另一方面，大多数用户界面（实际上除了硬编码字符串之外的所有用户界面......）都可以通过将适当[的 UIManager 的](http://docs.oracle.com/javase/6/docs/api/javax/swing/UIManager.html)键分配给翻译后的值来翻译......这是一项相当大的努力，但可以做到。
这里的问题是，你不知道哪些键是有效的（或适当的），所以如果你想真正翻译整个事情，你需要对它们的控件进行逆向工程（使用 JDK 发行版附带的源代码）。

令人惊讶的是，我们没有容易获得具有外部化消息的子类控件......这是一个常见问题......我为我的学习做了这样的事情，但恐怕我不知道在哪里做本地化的 JFileChooser 是……对此我感到非常抱歉。

# android - 使用 RecognizerIntent 传递额外的附加信息

> ID：13210662
> 
> 赞同：1
> 
> 时间：2012-11-03T15:37:56.307
> 
> 标签：android, android-pendingintent, recognizer-intent

我正在尝试从我的应用程序中调用 RecognizerIntent，并获取与特定 ID 关联的结果。我正在努力弄清楚如何传递我的 id 以便在结果的附加部分中返回它。

最初，我尝试过这样的事情：

```
Intent intent = new Intent(RecognizerIntent.ACTION_RECOGNIZE_SPEECH);
intent.putExtra(RecognizerIntent.EXTRA_LANGUAGE_MODEL, "en-US");
intent.putExtra(TasksDbAdapter.KEY_ROWID,taskId);
intent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
startActivityForResult(intent, RESULT_SPEECH); 
```

不幸的是，传递给 onActivityResult 的包中不包含附加在此意图上的内容

查看文档，有一个字段 EXTRA_RESULTS_PENDINGINTENT_BUNDLE 似乎可以让你做我想做的事。但我一直无法弄清楚如何正确实施它。

这是我最近的尝试：

```
Intent pending = new Intent(v.getContext(),Main.class);
pending.putExtra(TasksDbAdapter.KEY_ROWID, itId);
PendingIntent pIntent = PendingIntent.getActivity(v.getContext(),RESULT_SPEECH,pending,0);

Intent intent = new Intent(RecognizerIntent.ACTION_RECOGNIZE_SPEECH);
intent.putExtra(RecognizerIntent.EXTRA_LANGUAGE_MODEL, "en-US");
intent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
intent.putExtra(RecognizerIntent.EXTRA_RESULTS_PENDINGINTENT,pIntent);
intent.putExtra(RecognizerIntent.EXTRA_RESULTS_PENDINGINTENT_BUNDLE,pending.getExtras());
startActivityForResult(intent, RESULT_SPEECH); 
```

不幸的是，这不起作用。目前，OnActivityResult 总是收到 0 的 resultCode，而不是 -1（即 RESULT_OK）

任何人都可以指出一个示例的方向或帮助我理解我需要在这里做什么来实现设置 id 并将其与语音结果一起接收到文本的目标吗？

# javascript - 如何订购淘汰赛绑定？

> ID：13210663
> 
> 赞同：7
> 
> 时间：2012-11-03T15:38:02.563
> 
> 标签：javascript, jquery, knockout.js

我正在使用 knockout.js。我陷入了一个有点奇怪的境地（这很难解释，但我正在努力，如果我不清楚，对不起）。我在单个选择列表上使用自定义绑定和选项绑定：

```
 <select data-bind="options : arrayOfOptions, optionsText: 'Name', 
           optionsValue: 'Name', chosen: { }">
  </select>

ko.bindingHandlers.chosen = {
    init: function (element, valueAccessor, allBindingAccessor, 
                    viewModel, bindigContext) {
        var options = ko.utils.unwrapObservable(valueAccessor() || {});
        $(element).chosen(options);
    }
}; 
```

这里在运行时选择列表将填充`arrayOfOptions`数组中的所有可用选项，并且`chosen`是一个自定义绑定，我在选择列表上应用选择[插件](http://harvesthq.github.com/chosen/)。

现在我在这里面临的问题是，在自定义绑定中，当我在选择列表上应用选择插件时，选择列表没有填充`arrayOfOptions`数组中的选项。简单来说`custom binding`就是在执行之前`options binding`。谁能给我一个解决方案，以便在选项绑定后应用自定义绑定？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2014-09-03T16:25:36.217

使用此绑定所依赖的 bindingHandler 名称数组创建一个 after 属性。

`ko.bindingHandlers.chosen = { init: function (element, valueAccessor, allBindingAccessor, viewModel, bindigContext) { var options = ko.utils.unwrapObservable(valueAccessor() || {}); $(element).chosen(options); }, after:['options'] };`

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-03T16:22:29.680

将您的呼叫移至`chosen`更新。

[http://jsfiddle.net/jearles/avSfa/28/](http://jsfiddle.net/jearles/avSfa/28/)

--

```
ko.bindingHandlers.chosen = {
    init: function(element, valueAccessor, allBindingsAccessor, viewModel) {
        var allBindings = allBindingsAccessor();

        var options = {default: 'Select one...'};
        $.extend(options, allBindings.chosen)

        $(element).attr('data-placeholder', options.default);                
    },
    update: function(element, valueAccessor, allBindingsAccessor, viewModel) {
        $(element).chosen();
    }
}; 
```

--

或者，您可以使用`setTimeout`将调用移动到`chosen`执行队列的底部。这将使 Knockout 选项绑定有时间在`chosen`尝试对其进行转换之前完成其工作。

```
ko.bindingHandlers.chosen = {
    init: function (element, valueAccessor, allBindingAccessor, 
                    viewModel, bindingContext) {
        var options = ko.utils.unwrapObservable(valueAccessor() || {});
        setTimeout(function() { $(element).chosen(options); }, 0);
    }
}; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-02-18T09:21:01.070

```
ko.bindingHandlers.chosen = {
init: function (element, valueAccessor, allBindingsAccessor, viewModel) {
    var options = allBindingsAccessor().options;

    options.subscribe(function (newValue) {
        $(element).chosen();
        $(element).trigger("chosen:updated");
    });

    var value = allBindingsAccessor().value;
    value.subscribe(function (newValue) {
        $(element).trigger("chosen:updated");
    });
},
update: function (element, valueAccessor, allBindingsAccessor, viewModel) {
    if (element.options.length > 0) {
        $(element).chosen();
        $(element).trigger("chosen:updated");
    }
} 
```

};

这对我有用 KO JS 3.0

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-07-08T17:41:48.940

虽然上面的答案可能会解决所提出的问题，但它们似乎无法自定义您选择的下拉菜单，例如通过传递 {'disable_search':true} 来禁用搜索。

我建议进行以下修改，以允许在绑定中传递选择的自定义。

```
<select data-bind="options : arrayOfOptions, optionsText: 'Name', 
    optionsValue: 'Name', chosen: { 'disable_search': true }">
</select>

ko.bindingHandlers.chosen = {
    init: function (element, valueAccessor, allBindingsAccessor, viewModel) {
        var options = allBindingsAccessor().options;
        var chosenOptions = allBindingsAccessor().chosen;

        options.subscribe(function (newValue) {
            $(element).chosen(chosenOptions);
            $(element).trigger("chosen:updated");
        });

        var value = allBindingsAccessor().value;
        value.subscribe(function (newValue) {
            $(element).trigger("chosen:updated");
        });
    },
    update: function (element, valueAccessor, allBindingsAccessor, viewModel) {
        if (element.options.length > 0) {
            var chosenOptions = allBindingsAccessor().chosen;
            $(element).chosen(chosenOptions);
            $(element).trigger("chosen:updated");
        }
    }
}; 
```

# c# - WinForm 中的 Shockwave 对象仅加载一次

> ID：13210665
> 
> 赞同：0
> 
> 时间：2012-11-03T15:38:08.053
> 
> 标签：c#, axshockwaveflash

我正在为使用服务器打开套接字的 Flash 应用程序构建 C# 包装器。令我困扰的是，当我第一次在 axshockwaveflash 对象中加载 swf 应用程序时一切正常，但它从第二次开始就停止工作，无论我从同一会话中打开第二帧，还是重新启动应用程序。

我必须做的是让它再次工作 1 次，就是删除 Internet Explorer 中的所有临时文件。我不知道发生了什么以及这种行为的原因。有没有其他人经历过，有没有解决办法？

PS：如果在浏览器中加载 Flash 应用程序，则不会发生这种情况，即使我刚刚设置了相同的参数和变量

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T23:24:47.923

这听起来像是您尝试使用 Adob​​e Flash 作为您的界面；然后将某些变量传回 C#。

一个例子是这样的：

在闪存中；创建一个按钮... Actionscript：

```
 on (press) {
    fscommand("Yo","dude");
} 
```

然后 Visual Studio 你只需要添加 COM 对象引用：**Shockwave Flash Object**

然后将嵌入设置为true；

然后在 Visual Studio 中，您应该能够转到属性；找到 fs 命令。fs 命令将允许您物理连接 Flash 电影中的值。

```
AxShockwaveFlashObjects._IShockwaveFlashEvents_FSCommandEvent 
```

收集；然后只需使用**e.command**和**e.arg**例如让收集的项目做一些事情。

然后将其添加到 EventHandler；

```
lbl_Result.Text="The "+e.args.ToString()+" "+e.command.ToString()+" was clicked"; 
```

并且繁荣它正在将其数据从 Flash 传输到 Visual Studio。不需要任何疯狂的困难插座。

附带说明；如果你在 Visual Studio 中有 Flash，关键是要确保它的**“嵌入设置为真”。**这将保存 Flash 对象中的所有路径引用；以避免任何错误的路径。

我不确定这是否是您寻求的答案；或回答您的问题。但是没有关于你的目标/错误的更多细节。我帮不了你。

希望这可以帮助。

# objective-c - 通过触摸检测视图内的更近点

> ID：13210670
> 
> 赞同：2
> 
> 时间：2012-11-03T15:38:59.113
> 
> 标签：objective-c, ios

有一种方法，当用户在视图外触摸时，应用程序会检测到该视图内更近的点？我想像下图一样检测。

![例子](../Images/15eec6bbb58853340eaf1d89a058e360.png)

编辑：

```
CGPoint touchPoint = [[touches anyObject] locationInView:self.view];

if (CGRectContainsPoint([_grayView frame], touchPoint)) {
    // The touch was inside the gray view
} else {
    // The touch was outside the view. Detects where's the closer CGPoint inside the gray view.
    // The detection must be related to the whole view (In the image example, the CGPoint returned would be related to the whole screen)
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-03T16:02:08.133

你只需要一点数学：

1.  `locationInView:`以所讨论的观点作为论据，要求触摸它。
2.  比较该点`x`与视图的`bounds`，钳制到该 的极值`CGRect`。
3.  没有第三步，上面的结果就是你要找的点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-03T16:15:09.263

```
static float bound(float pt, float min, float max)
{
    if(pt < min) return min;
    if(pt > max) return max;
    return pt;
}

static CGPoint boundPoint(CGPoint touch, CGRect bounds)
{
    touch.x = bound(touch.x, bounds.origin.x, bounds.origin.x + bounds.size.width;
    touch.y = bound(touch.y, bounds.origin.y, bounds.origin.y + bounds.size.height;
    return touch;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-03T16:19:12.107

试试这个代码！

```
CGPoint pt = [touches locationInView:childView];
if(pt.x >= 0 && pt.x <= childView.frame.size.width 
&& pt.y >= 0 && pt.y <= childView.frame.size.height) {
   NSLog(@"Touch inside rect");
   return;
}
pt.x = MIN(childView.frame.size.width, MAX(0, pt.x));
pt.y = MIN(childView.frame.size.height, MAX(0, pt.y));
// and here is the point
NSLog(@"The closest point is %f, %f", pt.x, pt.y); 
```

# mongodb - 简单的学说查询不起作用

> ID：13210671
> 
> 赞同：1
> 
> 时间：2012-11-03T15:39:02.603
> 
> 标签：mongodb, doctrine-orm, mongodb-php

我的文件：

```
{
   "_id": ObjectId("50935e14253b4a2f18000000"),
   "discussion_id"▼: ObjectId("50831606253b4ac409000002"),
   "author": {
     "userId": NumberInt(1),
     "name": "jini" 
  },
   "text": "50831606253b4ac409000002",
   "createdAt": ISODate("2012-11-02T05: 45: 56.0Z") 
} 
```

我的PHP代码：

```
 //DOES NOT GET ANY RESULTS
$discussionId = "50831606253b4ac409000002";
$dm = $this->get('doctrine.odm.mongodb.document_manager');
$query = $dm->createQueryBuilder('MainClassifiedBundle:Discussion')
->field('discussion_id')->equals($discussionId); 
```

但这会得到很好的结果：

```
$discussionId = "50935e14253b4a2f18000000";
$dm = $this->get('doctrine.odm.mongodb.document_manager');
$query = $dm->createQueryBuilder('MainClassifiedBundle:Discussion')
->field('id')->equals($discussionId); 
```

我没有得到结果。但是当我查询 id 时，我得到了结果。怎么来的？

# r - 动态列表创建

> ID：13210672
> 
> 赞同：3
> 
> 时间：2012-11-03T15:39:11.407
> 
> 标签：r

我对 R 动态创建列表的方式感到恼火，我希望有人能帮助我了解正在发生的事情以及如何修复我的代码。我的问题是，对于长度为 1 的向量的分配，分配了一个命名向量，但分配了长度大于 1 的向量，则分配了一个列表。我想要的结果是，无论我分配的向量的长度如何，都会分配一个列表。我怎样才能达到这样的结果？

例如，

```
types <- c("a", "b")
lst <- vector("list", length(types))
names(lst) <- types
str(lst)
List of 2
 $ a: NULL
 $ b: NULL
lst$a[["foo"]] <- "hi"
lst$b[["foo"]] <- c("hi", "SO")
str(lst)
List of 2
 $ a: Named chr "hi"
  ..- attr(*, "names")= chr "foo"
 $ b:List of 1
  ..$ foo: chr [1:2] "hi" "SO"
str(lst$a)
 Named chr "hi"
 - attr(*, "names")= chr "foo"
str(lst$b)
List of 1
 $ foo: chr [1:2] "hi" "SO" 
```

我想要的结果是一个看起来像这样的数据结构。

```
List of 2
 $ a:List of 1
  ..$ foo: chr [1] "hi"
 $ b:List of 1
  ..$ foo: chr [1:2] "hi" "SO" 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-03T16:22:32.477

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-03T15:42:43.193

我认为您只需要创建所需的类型并分配它们：

```
R> qq <- list( a=list(foo="Hi"),  b=list(foo=c("Hi", "SO")))
R> qq
$a
$a$foo
[1] "Hi"

$b
$b$foo
[1] "Hi" "SO"

R> 
```

满足您的所有要求的地方：

```
R> class(qq)
[1] "list"
R> names(qq)
[1] "a" "b"
R> sapply(qq, names)
    a     b 
"foo" "foo" 
R> 
```

# c - c中“（void）（{CODE}）”的目的是什么？

> ID：13210673
> 
> 赞同：7
> 
> 时间：2012-11-03T15:39:12.107
> 
> 标签：c

在生成的一段 c 代码中，我发现了这样的内容（已编辑）：

```
#include <stdio.h>

int main() {

  (void) (
    {
      int i = 1;
      int y = 2;

      printf("%d %d\n", i,y);
    }
  );

  return 0;
} 
```

我相信我以前从未见过这个构造`(void) ( { CODE } )`，也无法弄清楚其目的可能是什么。

那么，这个结构有什么作用呢？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-11-03T15:40:38.657

`({ })`是一个`gcc`称为*语句表达式*的扩展。

[http://gcc.gnu.org/onlinedocs/gcc/Statement-Exprs.html](http://gcc.gnu.org/onlinedocs/gcc/Statement-Exprs.html)

语句表达式产生一个值，并且`(void)`强制类型转换可能在此处删除编译器警告或明确声明未使用语句表达式的值。

now`(void) ({ })`与简单的复合语句相同，`{}`没有使用它的意义。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-03T16:06:44.153

一种*应用*是`({ })`用代码块替换表达式的能力。通过这种方式，可以将非常复杂的宏嵌入到表达式中。

```
#define myfunc() {   }    // can be a typical way to automatize coding. e.g.

myfunc(x,y,z);
myfunc(y,x,z);
myfunc(x,z,y);  // would work to eg. unroll a loop
int a = myfunc()*123;  // but this wouldn't work 
```

反而

```
#define myfunc(a,b,c) ({printf(a#b#c);})
int a= myfunc(a,b,c) * 3; // would be legal 
```

# linux - ./fibonacci.sh：第 11 行：意外标记“do”附近的语法错误

> ID：13210676
> 
> 赞同：2
> 
> 时间：2012-11-03T15:39:23.497
> 
> 标签：linux, shell, fibonacci

你知道我的斐波那契脚本有什么问题吗，我总是收到错误消息：./fibonacci.sh: line 11: syntax error near unexpected token `do'

```
#!/bin/bash
#fibonacci
echo "Geben Sie die n-te Fibonacci-Zahl ein:"
read n

if [$n -lt 2]; then
    echo $n
else
    array[0] = 0
    array[1] = 1
    for[k=2; $k -le $n; k++]; do
        x = $array[0] + $array[1]
        $array[0] = $array[1]
        $array[1] = $x
    done
    echo $array[1]
fi 
```

请帮忙！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-03T15:52:15.143

你里面有一些错误。一是数组使用不当。如果使用花括号，请使用它们。见[这里](http://tldp.org/LDP/abs/html/arrays.html)。其次，我用`while`循环重新设计了你的代码——它更容易理解。第三，bash 不喜欢赋值中的空格。

```
#!/bin/bash
#fibonacci
echo "Geben Sie die n-te Fibonacci-Zahl ein:"
read n

if [ $n -lt 2 ]; then
    echo $n
else
    array[0]=0
    array[1]=1
    k=2
    while [ $k -le $n ]
    do
        let x=${array[0]}+${array[1]}
        array[0]=${array[1]}
        array[1]=$x
        let k=$k+1
    done
    echo ${array[1]}
fi 
```

例子：

```
$ ./test.sh 
Geben Sie die n-te Fibonacci-Zahl ein:
6
8 
```

# objective-c - 如何在 bool 标志更改后立即调用方法？

> ID：13210680
> 
> 赞同：0
> 
> 时间：2012-11-03T15:39:43.370
> 
> 标签：objective-c, cocoa

我想尽快执行`[document doSomething]`是`[document isBusy]`错误的。最好的方法是什么？我尝试了一个while循环，但这会延迟下面的代码，这不是我想要的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-03T15:41:16.117

如果`isBusy`有关联的 setter 方法，则可以调用`doSomething`该 setter。更好的选择是使用[Key Value Observing](http://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/KeyValueObserving/)来观察它的值`isBusy`并在它发生变化时采取行动。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-03T18:05:03.490

**如果操作是文档模型的语义**

从您的问题来看，两者`isBusy`都是`doSomething`您的文档的功能，以及`doSomething`何时`isBusy`变为 false 的操作似乎是*您的文档模型的语义，*因此应该*由您的文档模型*实现，例如：

```
- (void) setIsBusy:(BOOL)flag
{
   if(flag != _isBusy) // check if this is a change
   {
      _isBusy = flag;
      if(flag)
      {
         // doSomething, or schedule doSomething if it is a long operation etc., e.g.
         [self doSomething];
      }
   }
} 
```

*使用 KVO在*单个对象中实现语义可能不常见，但在某些情况下它很有用。在这种情况下，它将用间接操作代替直接操作——KVO 将`doSomething`在与上述示例代码完全相同的点执行，只有一些中间系统方法介于两者之间`setIsBusy`，`doSomething`再加上设置 KVO 的相关开销。

**如果操作是文档客户端的语义**

当然，如果这两者之间的联系独立于您的文档模型，即您的文档*的客户端的语义*，那么 KVO 是合适的并且将*在您的客户端中实现*。您的客户将注册为您的文档的观察者，例如：

```
[document addObserver:self
           forKeyPath:@"isBusy"
              options:(NSKeyValueObservingOptionNew | NSKeyValueObservingOptionOld)
              context:NULL]; 
```

在客户端的方法中。然后在收到更改通知时在您的客户端中采取适当的操作：

```
- (void)observeValueForKeyPath:(NSString *)keyPath
                      ofObject:(id)object
                        change:(NSDictionary *)change
                       context:(void *)context
{
   if ([keyPath isEqual:@"isBusy"] && object == document)
      [document doSomething;
   else
      [super observeValueForKeyPath:keyPath
                           ofObject:object
                             change:change
                            context:context];
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-03T15:45:48.097

使用 KVC/KVO（键值编码和键值观察）。Apple 文档中很好地涵盖了该主题。KVO 和 KVC 是一种基本的编程技术，可为您的问题提供可能的解决方案。

# objective-c - 使用 AVAssetReader 和 timeRange 实时读取样本

> ID：13210684
> 
> 赞同：3
> 
> 时间：2012-11-03T15:40:10.127
> 
> 标签：objective-c, ios, core-audio

以前，我[使用](https://github.com/abbood/audioSamplingToAudioQueue)`CMSampleBufferGetAudioBufferListWithRetainedBlockBuffer`. 现在我想使用范围做同样的事情（即我及时指定范围..按时间读取一小段音频，然后返回并再次读取）。我想使用时间范围的原因是 b/c 我想控制每次读取的大小（以适应具有最大大小的数据包）。

出于某种原因，每次读取之间总会有一个颠簸。在我的代码中，您会注意到我每次设置时间范围时都会启动 AVAssetReader 并结束它，这就是 b/c 在阅读器启动后我无法动态调整时间范围（有关更多详细信息，请参见[此处](https://stackoverflow.com/questions/5508619/how-to-seek-within-an-audio-track-using-avassetreader)）。

是不是开始和结束阅读器的成本太高而无法产生连续的实时体验？还是有其他我不知道的方法？

另请注意，这种抖动或滞后发生在我将时间间隔设置为的任何时间点。这让我相信以我的方式开始和结束阅读器对于实时音频播放来说太昂贵了。

```
- (void) setupReader 
{
    NSURL *assetURL = [NSURL URLWithString:@"ipod-library://item/item.m4a?id=1053020204400037178"];   
    songAsset = [AVURLAsset URLAssetWithURL:assetURL options:nil];

    track = [songAsset.tracks objectAtIndex:0];     
    nativeTrackASBD = [self getTrackNativeSettings:track];

    // set CM time parameters
    assetCMTime = songAsset.duration;
    CMTimeReadDurationInSeconds = CMTimeMakeWithSeconds(1, assetCMTime.timescale);
    currentCMTime = CMTimeMake(0,assetCMTime.timescale); 
}

-(void)readVBRPackets
{
    // make sure assetCMTime is greater than currentCMTime
    while (CMTimeCompare(assetCMTime,currentCMTime) == 1 )
    {
        NSError * error = nil;
        reader = [[AVAssetReader alloc] initWithAsset:songAsset error:&error];
        readerOutput = [AVAssetReaderTrackOutput assetReaderTrackOutputWithTrack:track
                                                                  outputSettings:nil];

        [reader addOutput:readerOutput];
        reader.timeRange = CMTimeRangeMake(currentCMTime, CMTimeReadDurationInSeconds);

        [reader startReading];

        while ((sample = [readerOutput copyNextSampleBuffer])) {
            CMItemCount numSamples = CMSampleBufferGetNumSamples(sample);
            if (numSamples == 0) {
                continue;
            }

            NSLog(@"reading sample");               

            CMBlockBufferRef CMBuffer = CMSampleBufferGetDataBuffer( sample );                                                         
            AudioBufferList audioBufferList;  

            OSStatus err = CMSampleBufferGetAudioBufferListWithRetainedBlockBuffer(
                                                                               sample,
                                                                               NULL,
                                                                               &audioBufferList,
                                                                               sizeof(audioBufferList),
                                                                               NULL,
                                                                               NULL,
                                                                               kCMSampleBufferFlag_AudioBufferList_Assure16ByteAlignment,
                                                                               &CMBuffer
                                                                                   );

            const AudioStreamPacketDescription   * inPacketDescriptions;
            size_t                               packetDescriptionsSizeOut;
            size_t inNumberPackets;

            CheckError(CMSampleBufferGetAudioStreamPacketDescriptionsPtr(sample, 
                                                                         &inPacketDescriptions,
                                                                         &packetDescriptionsSizeOut),
                       "could not read sample packet descriptions");

            inNumberPackets = packetDescriptionsSizeOut/sizeof(AudioStreamPacketDescription);

            AudioBuffer audioBuffer = audioBufferList.mBuffers[0];

            for (int i = 0; i < inNumberPackets; ++i)
            {

                SInt64 dataOffset = inPacketDescriptions[i].mStartOffset;
                UInt32 packetSize   = inPacketDescriptions[i].mDataByteSize;            

                size_t packetSpaceRemaining;
                packetSpaceRemaining = bufferByteSize - bytesFilled;

                // if the space remaining in the buffer is not 
                // enough for the data contained in this packet
                // then just write it
                if (packetSpaceRemaining < packetSize)
                {
                    [self enqueueBuffer];           
                }

                // copy data to the audio queue buffer
                AudioQueueBufferRef fillBuf = audioQueueBuffers[fillBufferIndex];
                memcpy((char*)fillBuf->mAudioData + bytesFilled, 
                       (const char*)(audioBuffer.mData + dataOffset), packetSize);                                                                

                // fill out packet description
                packetDescs[packetsFilled] = inPacketDescriptions[i];
                packetDescs[packetsFilled].mStartOffset = bytesFilled;

                bytesFilled += packetSize;
                packetsFilled += 1;

                // if this is the last packet, then ship it
                size_t packetsDescsRemaining = kAQMaxPacketDescs - packetsFilled;
                if (packetsDescsRemaining == 0) {          
                    [self enqueueBuffer];              
                }                  
            }

            CFRelease(CMBuffer);
            CMSampleBufferInvalidate(sample);
            CFRelease(sample);
        }

        [reader cancelReading];
        reader = NULL;
        readerOutput = NULL;

        currentCMTime = CMTimeAdd(currentCMTime, CMTimeReadDurationInSeconds);
    }

} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-07T23:51:29.010

我知道会发生什么 :-D 我花了将近一整天的时间才弄明白。

事实上，AVAssetReader 将前 1024 个样本（可能更多）淡入其中。这就是您听到抖动效果的原因。

我通过在我真正想要读取的位置之前读取 1024 个样本来修复它，然后跳过这 1024 个样本。

我希望它也对你有用。

# html - 我不明白为什么我的代码会用空格分隔标题和内容

> ID：13210687
> 
> 赞同：-1
> 
> 时间：2012-11-03T15:40:30.403
> 
> 标签：html, jsp

我不明白为什么我的代码会用空格分隔标题和内容。另外，我希望边栏的黄色背景延伸到页面底部，而不是在我完成链接之后。我该如何解决这些问题？！

这是它的样子：

![http://imgur.com/Jk35O](../Images/45d80f3a45e437f2ebb45f384cf9cda6.png)

这是我的 HTML 代码：

```
<!DOCTYPE html>
<html>
<head>
<title>DownloadThis</title>
<link href="myStyle.css" rel="stylesheet" type="text/css">
</head>

<body>

<div class="container">
    <div class="header">
      <h1>DownloadThis<FONT COLOR="#FFFFFF"> Music Store</FONT><img src="../images/logo.png" alt="Even unicorns love our music"></h1>
    <!-- end .header --></div>
<div class="sidebar">
  <ul>
    <li><a href="adminlist.jsp">Home</a></li>
    <li><a href="search.jsp">Search</a></li>
    <li><a href="cart.jsp">Shopping Cart</a></li>
    <li><a href="logout.jsp">Logout</a></li>
  </ul>
<!-- end .sidebar --></div>

<div class="content">
<!-- end .content --></div> 
```

还有我的 CSS：

```
.container {
    width: 80%;
    height:100%;
    max-width: 1260px;
    min-width: 780px;
    background-color: #FFF;
    margin: 0 auto;
}

.header {
    background-color: rgba(255,130,255,.8);
    height:100%;
    margin: 0 auto;
}

.sidebar {
    float: left;
    width: 20%;
    height:100%;
    background-color: #FFFF99;
}

.content {
    width: 80%;
    height: 100%;
    background-color: rgba(238,233,233,.8);
    text-align: left;
    padding: 10px 0;
    float: left;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T17:19:12.933

The space between header and content is because of `h1`'s margins

```
.header h1 {
    margin: 0;
} 
```

You can find similar bugs in future using Firebug or Opera Dragonfly or other similar tool.

`height: 100%` can't solve the problem, because it just means "100% of parent element". So with that you just can't get stretching and flexible height of the whole document.

I'd change your code this way:

```
<!--div class="container"--> <!-- deleted -->
  <div class="header">
    <h1 colspan="2">DownloadThis<FONT COLOR="#FFFFFF"> Music Store</FONT><img src="../images/logo.png" alt="Even unicorns love our music"></h1>
  </div>

  <div class="container"> <!-- moved here -->
    <div class="sidebar">
      <ul>
        <li><a href="adminlist.jsp">Home</a></li>
        <li><a href="search.jsp">Search</a></li>
        <li><a href="cart.jsp">Shopping Cart</a></li>
        <li><a href="logout.jsp">Logout</a></li>
      </ul>
    </div>

    <div class="content">
      <br>  <br>  <br>  <br>  <br>  <br>  <br>  <br>  <br>  <br>  <br>  <br>  <br>
    <br>  <br>  <br>  <br>  <br>  <br>  <br>  <br>  <br>  <br>  <br>  <br>  <br>
    <br>  <br>  <br>  <br>  <br>  <br>  <br>  <br>  <br>  <br>  <br>  <br>  <br>
    </div>
  </div>
<!--/div--><!-- missed in the original code --> 
```

CSS (deleted properties marked by hyphens):

```
.container {
    width: 80%;
    -height:100%;
    max-width: 1260px;
    min-width: 780px;
    background-color: #FFF;
    margin: 0 auto;
}
.header {
    background-color: rgba(255,130,255,.8);
    -height:100%;
    margin: 0 auto;
}
.sidebar {
    -float: left;
    width: 20%;
    -height:100%;
    background-color: #FFFF99;
}
.content {
    width: 80%;
    -height: 100%;
    background-color: rgba(238,233,233,.8);
    text-align: left;
    padding: 10px 0;
    -float: left;
}

/* to be added */
.header{
    width: 80%;
    max-width: 1260px;
    min-width: 780px;
}
.container {
    display: table;
}
.sidebar, .content{
    display: table-cell;
} 
```

BTW, `floats` are evil. Don't put them everywhere. They should be used only if really needed.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-03T15:49:28.750

这是我将如何处理您的布局：

[http://jsfiddle.net/xfaTA/](http://jsfiddle.net/xfaTA/)

HTML

```
<div class="container">
    <div class="header">
      <h1>
          DownloadThis
          <span>Music Store</span>
          <img src="../images/logo.png" alt="Even unicorns love our music">
      </h1>
    </div>

    <div class="sidebar-content-container">
        <div class="sidebar">
            <ul>
                <li><a href="adminlist.jsp">Home</a></li>
                <li><a href="search.jsp">Search</a></li>
                <li><a href="cart.jsp">Shopping Cart</a></li>
                <li><a href="logout.jsp">Logout</a></li>
            </ul>
        </div>

        <div class="content">
            content
        </div>
    </div>
</div> 
```

CSS

```
.container {
    width: 80%;
    height:100%;
    max-width: 1260px;
    min-width: 780px;
    background-color: #FFF;
    margin: 0 auto;
}

.header {
    background-color: rgba(255,130,255,.8);
    height:100%;
    margin: 0 auto;
}

.header h1 span {color:#fff;}

.sidebar-content-container { overflow:hidden; }

.sidebar {
    float: left;
    width: 20%;
    height:100%;
    background-color: #FFFF99;
}

.content {
    width: 80%;
    height: 100%;
    background-color: rgba(238,233,233,.8);
    text-align: left;
    padding: 10px 0;
    float: left;
}​ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-03T15:43:34.367

尝试将您的内容和侧边栏边距设置为

```
margin-top:0; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-03T15:56:56.920

添加`position: absolute;`到 .sidebar。至于空白，它似乎与标题上的图像有关。

[演示](http://jsfiddle.net/qsCPT/1/)

# php - 通过 href 链接将变量从 PHP 循环传递到 JQuery 的模式

> ID：13210691
> 
> 赞同：0
> 
> 时间：2012-11-03T15:40:42.217
> 
> 标签：php, jquery, loops, parameter-passing

现在已经尝试了几个小时来更新我给出的代码，但没有运气。我已经从这个页面尝试了一堆例子但无济于事......

我有一个打印出一些数据的 php 循环，然后在单击“查看”链接时，会弹出一个模式框，显示给定人员的更多信息。为了显示该模式框的内容，我使用了外部 php 文件，因此我认为传递一个值并简单地根据传递的 ID 从 DB 中选择并显示所有信息会很容易。我错了……

这是我现在拥有的：

PHP：

```
<tr>
  <td>' . sel_db('*', 'guests', $row['guestID'], '3') . '</td>
  <td>' . find_lounge($row['departureID']) . '</td>
  <td>' . $row['flight_no'] . '</td>
  <td>' . $row['arrival_time'] . '</td>
  <td><a class="modalInput" rel="#details_view">View</a></td>
  <td class="cent">' . $thisBooking . '</td>
</tr> 
```

还有这个小jquery：

```
<script type="text/javascript" />
  var triggers = $(".modalInput").overlay({

  // some mask tweaks suitable for modal dialogs
  mask: {
    color: '#ebecff',
    loadSpeed: 200,
    opacity: 0.9
  },

  closeOnClick: true
 });
 $('#details_view').load('popup.php?ID=???');

 </script> 
```

加上纯 HTML 页面中的 div （与 php 代码相同）：

```
 <!-- Details popup -->
    <div class="modal" id="details_view">
      { here is loaded external php file }
  </div> 
```

弹出窗口打开得很好，但我无法显示任何动态的内容，因为我无法从 php 循环中获取该 ID。

有人可以在这里帮忙吗？任何输入将非常非常感谢。

干杯，格雷格·比亚洛瓦斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T15:52:42.457

假设您想符合现代 Web 标准，您可以将信息作为 HTML5 数据属性存储在 DOM 中。`data-`基本上，您可以添加任何以存储有关 DOM 元素的任意信息时开头的属性。您的链接看起来像

```
<a class="modalInput" rel="#details_view" data-id="???">View</a> 
```

然后您可以在需要加载弹出窗口时从 Javascript 中读取此信息

```
$('[rel="#details_view"]').attr('data-id'); // Returns the ID 
```

另请注意，我认为您犯了一个错误，`rel="#details_view"`对我来说没有多大意义，如果这是您想要的，`$('#details_view')`则不会选择它。上面的选择器会。

# hook - Liferay 中文档和 Web 内容中的自定义元数据字段

> ID：13210693
> 
> 赞同：2
> 
> 时间：2012-11-03T15:40:51.540
> 
> 标签：hook, metadata, liferay

我想要一个元数据字段从数据库记录中获取值。此元数据字段应添加到文档中。

任何人都可以为我的要求提供解决方案。？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T08:13:25.047

我假设您使用的是 Liferay 6.1。

## 网页内容结构

至于 Web 内容，您可以通过编程方式创建一个`JournalStructure`（请参阅`JournalStuctureLocalServiceUtil`参考资料）并使用来自数据库的值填充结构字段的可能值列表。您可以将此“导入代码”放在批处理作业中，因此您的结构字段和外部数据库中的值始终保持同步。

## 文档元数据

如何使用**元数据集**可能更有趣，因为不仅动态数据列表和文档和媒体在 Liferay 6.1 中使用它；从 6.2 开始，Web 内容结构将使用相同的元数据 API，以支持旧的 Journal API。

为此，请查看表格的`xsd`列`DDMStructure`。它与 a 的 XML 具有或多或少相同的格式`JournalStructure`，但是有更多可用选项。用于`DDMStructureLocalServiceUtil#addStructure`添加这样的新结构。再次，在批处理中运行它，以便您始终拥有最新的外部数据库值。

# linux - cscope 不能使用 .vimrc 文件中的快捷方式

> ID：13210696
> 
> 赞同：2
> 
> 时间：2012-11-03T15:41:29.777
> 
> 标签：linux, vim, tcsh, cscope

我正在尝试通过在 .vimrc 文件中添加以下语句来添加 cscope 使用的快捷方式。

```
" cscope mappings
if has("cscope")
nmap <C-\>s :scs find s <C-R>=expand("<cword>")<CR><CR>
endif 
```

我`:so ~/.vimrc`在 vim 应用程序中使用了该文件。

但是，当我单击`Ctrl+\`并且`s`我的终端挂起时。请帮忙。我的外壳是`/usr/local/bin/tcsh`

谢谢

奇丹巴拉姆

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-06-14T09:43:51.293

它挂起的原因可能是因为您没有正确按下映射。按 ctrl+\ 然后 s 。但是您可能正在按 ctrl+s 导致挂起。要确定是否是 ctrl+s 是罪魁祸首，请尝试 ctrl+q 查看终端是否恢复，然后您可以继续。

# python - SyntaxError: 非 ASCII 字符 '\xd1'

> ID：13210697
> 
> 赞同：3
> 
> 时间：2012-11-03T15:41:39.407
> 
> 标签：python, sql, ms-access, encoding, character-encoding

我写了以下代码

```
conAcc = pyodbc.connect('DRIVER={Microsoft Access Driver (*.mdb, *.accdb)};DBQ=D:\ThirdTask\Northwind.accdb')
SqlAccess=conAcc.cursor();
SqlAccess.execute(sql.sql_count_record_clients);
CountOfRecords=SqlAccess.fetchone();
conAcc.close(); 
```

模块 sql.py 中有一行

```
sql_count_records_clients='''SELECT COUNT(*) FROM "Список клиентов"''' 
```

结果 sql.py 中的这一行给出了一个错误

```
Traceback (most recent call last):
  File "D:\ThirdTask\connect.py", line 5, in <module>
    import json,sqlite3,sql
  File "D:\ThirdTask\sql.py", line 48
SyntaxError: Non-ASCII character '\xd1' in file D:\ThirdTask\sql.py on line 48, but no encoding declared; see http://www.python.org/peps/pep-0263.html for details 
```

应该怎么做才能使错误消失？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2016-01-24T15:03:18.460

需要添加第一行代码：

```
# -*- coding: utf-8 -*- 
enter code here 
```

然后问题解决

# java - Spring Data 的 Pageable 是否采用页码或查询偏移量？

> ID：13210698
> 
> 赞同：3
> 
> 时间：2012-11-03T15:41:40.853
> 
> 标签：java, spring, jakarta-ee, spring-data

我`spring-data jpa 1.1.0.M1`现在使用的是更高版本，`spring-data-mongodb`但由于`spring-data-commons`. 因此，我们在服务中使用了实体管理器来处理某些查询，包括使用`offset`和的查询`limit`。

既然我们已经降级并且一切似乎都很好，我们希望在涉及到`data access`服务中的业务逻辑并在业务逻辑上做很多事情时，将所有内容都保持在存储库级别。

从这个[文档](http://static.springsource.org/spring-data/data-jpa/docs/1.1.2.RELEASE/reference/html/#repositories.special-parameters)我明白这`pageable interface`就是我需要的。但是实现类[PageRequest](http://static.springsource.org/spring-data/data-commons/docs/1.1.0.M1/api/)需要`page`参数。这是否意味着我`offset`的成为以下？

```
offset = page* limit; => page = offset/limit; 
```

我做对了吗？感谢您阅读本文。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-11-03T19:12:23.207

PageRequest 对象有一个获取页面和大小的构造函数。其他构造函数允许您指定其他详细信息，例如排序方向。

```
new PageRequest(int page, int size) 
```

**请参阅：** [Spring PageRequest API 文档](http://static.springsource.org/spring-data/data-commons/docs/1.0.0.M2/api/org/springframework/data/domain/PageRequest.html)

将`PageRequest`作为参数传递给您的存储库查找方法之一。在以下示例中，我将获得博客的前五个条目。

```
@RequestMapping("/")
public String blog(Model model) {
    Sort sort = new Sort(Direction.DESC, "postId");
    model.addAttribute("posts",
            postViewRepository.findAll(new PageRequest(0, 5, sort))
                    .getContent());
    model.addAttribute("tease", true);
    return "blog/blog";
} 
```

在此示例中，对 repositories`findAll(PageRequest)`方法的调用返回一个`org.springframework.data.domain.Page`对象。该`Page`对象包含几个方便的方法，这些方法允许检索有关底层 ResultSet 的信息，例如大小和页数。

**请参阅：** [Spring Page API 文档](http://static.springsource.org/spring-data/data-commons/docs/1.0.0.M2/api/org/springframework/data/domain/Page.html)

鉴于这些方便的功能，我不确定您是否需要关心管理偏移量或当前页面，因为 Spring Data 正在为您执行这项工作。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2016-01-10T14:05:48.637

Spring 使用范围从 1 到 n 的页码。

要获得前五个结果，请使用。

```
new PageRequest(1, 5); 
```

要获得接下来的五个结果，请使用。

```
new PageRequest(2, 5); 
```

页面索引不应与先前结果的偏移量相混淆。

# iphone - iOS SystemSoundID 不适用于 iPod 4，但适用于 iPhone 4

> ID：13210699
> 
> 赞同：1
> 
> 时间：2012-11-03T15:41:54.010
> 
> 标签：iphone, ios, ipod-touch

为什么 SystemSoundID 在 iPhone 上工作而不在 iPod 上工作？

我已经搜索了 Apple 文档。并用谷歌搜索但一无所获。我的应用程序在 iPhone gen 4 (iOS 5.1) 上使用 SystemSoundID 播放 .m4a 声音文件，但不能在 iPod gen 4 (iOS 5.1) 或 iPod gen 2 (iOS 4.2) 上播放。声音不播放，完成回调失败。

AVAudioPlayer 在所有设备上都可以正常工作，我用它来连续播放背景音乐，但我需要 SystemSoundID AudioServicesAddSystemSoundCompletion 才能连续排列声音。

我会使用 AVAudioPlayer 播放背靠背的声音文件，但我找不到它的完成回调函数。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-21T01:10:28.123

Settings->Sounds->Ringer&Alerts 打开它，并设置为最大音量。我只是忘记打开它，所以 SoundID 无法播放。

# iphone - 添加子视图和设置框架导致代码滞后

> ID：13210702
> 
> 赞同：-1
> 
> 时间：2012-11-03T15:42:01.557
> 
> 标签：iphone, objective-c, ios, ipad

我有以下代码：

![在此处输入图像描述](../Images/181679d6cffd55889f04460ffa2e45f3.png)

![在此处输入图像描述](../Images/fdc397a41a5a78761b29b38e7eb9f962.png)

我正在尝试优化代码，出于某种原因`initWithRootViewController, [self.view addSubview:fullStory.view];,` ，将框架设置为视图的超框架是最大的性能障碍。知道为什么以及如何解决这个问题吗？

对于高分辨率图片[here](https://i.imgur.com/qv39n.png)和[here](https://i.imgur.com/8JfFh.png)。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T16:00:41.257

`view`很难说到底发生了什么，但是当您访问视图控制器的属性时，看起来会发生一些“滞后” 。

由于这是一个延迟加载的属性，它调用`loadView`然后`viewDidLoad`. 也许这些方法中有些东西需要一段时间。

此外，我们无法判断`displayStory`执行是否正常，因为我们不知道它的作用。

# wordpress - 在 Wordpress 中禁用 WYSISYG 编辑器

> ID：13210703
> 
> 赞同：0
> 
> 时间：2012-11-03T15:42:05.787
> 
> 标签：wordpress

我正在尝试编写一个插件来为所有用户禁用 WordPress WSYIWYG 编辑器。

我写了一些代码来删除 tinymce 目录，但这会破坏编辑器——你不能写任何东西或使用 HTML 选项卡。

```
$dirName = ABSPATH . '/wp-includes/js/tinymce';
if (is_dir($dirName)) {
    rename("$dirName", $dirName."_DISABLED");
} 
```

我试图模拟当您在用户设置选项卡中选择“写入时禁用可视化编辑器”复选框时会发生什么，但始终适用于所有用户。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T15:53:51.883

如果您想采用非常正面的解决方案，您可以通过直接在数据库中更新几行来模拟它，如下所示：

```
UPDATE wp_usermeta SET meta_value = 'false' WHERE meta_key = 'rich_editing'; 
```

或者，如果你想使用 Wordpress 函数，你可以使用 update_user_meta。这是文档：[http ://codex.wordpress.org/Function_Reference/update_user_meta](http://codex.wordpress.org/Function_Reference/update_user_meta)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-03T16:48:33.417

Jean 指出了方向，但想分享完整的工作代码：

**在我的插件中：**

```
// Only do this if we're in admin section:
if(is_admin()) {
    // Add the action on the init hook, when user stuff is already initialized:
    add_action('init', 'disable_rich_editing');
}
function disable_rich_editing(){
    $current_user = wp_get_current_user();
    $isRichEditing = $current_user->get('rich_editing');
    if ($isRichEditing) {
        update_user_meta( $current_user->ID, 'rich_editing', 'false' );
    }
} 
```

**它能做什么：**

通常禁用所见即所得的唯一方法是在每个用户的设置页面上选择“编写时禁用可视化编辑器”。这将强制所有用户始终检查该选项，即使他们试图取消选中它。

# git - GITHUB 冲突解决

> ID：13210706
> 
> 赞同：16
> 
> 时间：2012-11-03T15:42:18.550
> 
> 标签：git, github-for-windows

我是 github 的新手，开始使用**GITHUB for WINDOWS**选择私有存储库并与我的同事共享。

现在我们遇到一个问题，不知道如何解决。我们尝试了谷歌，但没有用。

**我和一位同事同时处理同一个文件，他在我之前承诺**。我想知道他所做的更改，我想将他的更改与我的本地文件合并，最后想提交我的版本。GITHUB 是否可以在 Windows 上使用 GITHUB？我以前用 Tortoise SVN 做过同样的事情

我打开 shell 命令提示符并尝试了类似的东西

```
 $ git diff 
```

但它只显示差异，不建议我将本地版本与分阶段版本合并..

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-11-03T15:51:42.070

如果您按下`sync`按钮，您将拉取您的朋友所做的更改并在线推送。如果更改没有完全合并，则会提示您发生了冲突。这会将冲突行添加到您必须去解决它们的文件中。之后，您只需要提交更改。

冲突的行应该出现在 Github for Windows 界面中（虽然我不是 100% 确定，但我实际上更喜欢通过命令行解决冲突）。

通过命令行，您必须像这样输入命令：

```
git pull
# If merge conflict, you'll be prompt to resolve them, git will list conflicted files
# Open those files in you editor and resolve conflicts. Line will be marked in the files.
# When all is resolved :
git add -A
git commit
# No need to enter a message, git will automatically fill the message with
# merge conflict specific information
git push 
```

在您的文件中，冲突标记将如下所示：

```
<<<<<<<<<<< [sha-1 of the commit]
function() {
==================
function( hey ) {
HEAD>>>>>>>>>>>>> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-07-14T22:02:24.877

就我而言，事实证明我在尝试同步下一个提交之前忽略了同步上一个提交。

无需解决冲突。

我还发现有趣的是所有差异块

```
<<<<<<<<<<<<<<<<<...
...
======================
...
HEAD>>>>>>>>>>>>>> 
```

实际上被放入您的源代码中。只需在文本编辑器中打开冲突文件并保留/删除所需的分支。

# django - Django Gunicorn 调试

> ID：13210715
> 
> 赞同：10
> 
> 时间：2012-11-03T15:42:44.953
> 
> 标签：django, debugging, wsgi, gunicorn, pdb

最初，我有一个包含测试服务器的 Django 应用程序。要调试此设置，我可以`import pdb; pdb.set_trace()`在代码中的任何位置添加一个断点，并在终端（在命令行上）中将我放入交互式调试器中。

最近我转向 gunicorn 以获得一些性能优势。使用此 Gunicorn 设置时如何获得类似的行为。我已经尝试通过设置 gunicorn 设置，`debug=True`但`daemon=False`它不起作用。

有人对此有解决方案吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-06-19T12:21:34.497

要在调试器/调试模式下以反向代理配置（在 nginx 下）运行绿色独角兽，请在[PyCharm](http://www.jetbrains.com/pycharm/)的 Run / Django / Edit 配置中输入以下设置：

当然，使用`7777`您已将 nginx 配置为代理的任何端口（而不是 ）。

![截屏](../Images/e84a5e31e6ea22fb4c636c72c6fbbafd.png)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-04-16T10:32:44.013

好的，我最近偶然发现了类似的问题。我无法应用@dudklein 解决方案（调试器尝试获取输入时出现 I/O 错误 - ipdb、pdb 等）

我使用了远程 python debbuger- [winpdb](http://winpdb.org)，它是[嵌入式调试](http://winpdb.org/docs/embedded-debugging/)。

1.  在您的 virtualenv 中安装 winpdb

    ```
    pip install winpdb 
    ```

2.  在您的代码中导入并运行嵌入式调试器：

    ```
    import rpdb2
    rpdb2.start_embedded_debugger('pass') 
    ```

3.  使用 --timeout 参数运行 gunicorn

    ```
    gunicorn -t 3600 env:application 
    ```

4.  使用浏览器运行正确的视图，例如。`http://127.0.0.1:8000/your-view/`

5.  使用 winpdb 连接到嵌入式调试器：

    ```
    winpdb -a /path/to/django/app/views.py 
    ```

    它会提示您输入密码（使用您在代码中设置的密码，在我的示例中为“pass”）并使用调试器运行漂亮的 GUI。

6.  如果你需要教程`winpdb`-[你在这里](https://code.google.com/p/winpdb/wiki/DebuggingTutorial)。

![在此处输入图像描述](../Images/731704b317fc4aacd6a98397deafc247.png)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-03T16:07:08.377

如果您能够启动 gunicorn 指向一个`application`实例，该实例是库中`DebuggedApplication`类的实例，您将能够在浏览器中`werkzeug`使用 werkzeug 调试器设置断点。`import ipdb; ipdb.set_trace()`

```
import django.core.handlers.wsgi
from werkzeug.debug import DebuggedApplication

application = django.core.handlers.wsgi.WSGIHandler()
application = DebuggedApplication(application, evalex=True) 
```

当然，请确保安装 werkzeug 库和 ipdb。(`pip install werkzeug`和`pip install ipdb`)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-12-14T09:57:50.607

我现在设法将 gunicron 与 djnago 和 ipdb 一起使用。

跑`python -m ipdb manage.py run_gunicorn --debug -t 3600`

我正在使用 Django 1.4 和 gunicorn 0.16.1。那么你就可以正常`import ipdb; ipdb.set_trace()`在代码中使用了。不需要`werkzeug`图书馆。

我正在尝试调试 facebook 应用程序，因此我无法使用内置开发服务器，因为 facebook 尝试使用 SSL，而开发服务器无法正确响应

在寻找解决方案时，我发现了一篇[pdb: Using the Python debugger in Django](https://mike.tig.as/blog/2010/09/14/pdb/)，它建议一直运行`python -m pdb manage.py runserver`。虽然这对于 django 的开发服务器不是必需的，但我决定尝试使用 gunicordn 和 ipdb 并且它有效。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-14T03:22:47.830

我最终做的是`python manage.py runserver <your_external_IP>:8000`在我想使用时运行`pdb`.

因此，您需要在同一台机器上拥有 2 个不同的存储库，一个是 LIVE 生产版本（一个正在运行`gunicorn`），另一个是 TEST 版本，我需要在我使用的地方进行调试`pdb`。当 TEST 构建上的事情看起来稳定时，我将`TEST branch`与`LIVE branch`. `LIVE branch`避免合并冲突的方式不会发生任何开发或更改。

希望这可以帮助其他上瘾的人`pdb`；）

# php - mysql like %asd% 等效 solr 查询

> ID：13210720
> 
> 赞同：0
> 
> 时间：2012-11-03T15:43:19.080
> 
> 标签：php, mysql, solr

我有一个我正在尝试处理的查询，我搜索了它但找不到任何答案，我做错了，我想要搜索的是，%asd%，但我得到的是 asd% 结果而不是它，

我的字段类型是这个，

```
<fieldType name="text_general_edge_ngram" class="solr.TextField" positionIncrementGap="100">
        <analyzer type="index">
            <tokenizer class="solr.LowerCaseTokenizerFactory"/>
            <filter class="solr.EdgeNGramFilterFactory" minGramSize="2" maxGramSize="15" side="front"/>
        </analyzer>
        <analyzer type="query">
            <tokenizer class="solr.LowerCaseTokenizerFactory"/>
        </analyzer>
    </fieldType> 
```

我的查询是名称：asd，是我的查询还是字段类型？谢谢你 ：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T00:16:27.483

如果您想进行类似的搜索`%asd%`，则不需要 ngram 过滤器...基本上 solr在其搜索中`~`用于单个字符和多个字符...`*`

eg `name:asd~`will match`asda asdb asdc`等等 while `name:asd*`will match`asdasadad asdfgkhjfgkl`等等 所以你可以使用`name: ~asd~`to match `basdf`or`easdk`和`name:*asd*`for `aldkaasdsdfsd`or`oippopasdoppm`

据我所知，您不需要 ngrams 进行这种搜索

# c++ - 在特定内存地址创建堆以进行动态内存分配

> ID：13210723
> 
> 赞同：2
> 
> 时间：2012-11-03T15:43:53.323
> 
> 标签：c++, c, embedded, heap-memory, dynamic-memory-allocation

有没有办法在特定的内存位置（与系统堆分开）创建一个可用于动态内存分配的堆，但使用 C 库中内置的动态内存分配器。

我正在寻找功能上与此等效的东西：

```
UserHeap heap(startAddress, size);

void* allocatedMemory1 = heap.Allocate(100);  //Allocate 100 bytes.
void* allocatedMemory2 = heap.Allocate(200);  //Allocate 200 bytes.

/* ... Do seomthing useful with the memory ... */

heap.Free(allocatedMemory1);
heap.Free(allocatedMemory2); 
```

这个[uheap.h](http://publib.boulder.ibm.com/infocenter/zvm/v6r2/index.jsp?topic=/com.ibm.zvm.v620.edclv/huheap.htm)似乎有我要找的东西，但这似乎在 newlib 中不存在。我想知道 GCC 或 newlib 是否可能有一些东西。如果不是，我想我最终可能会移植[ptmalloc](http://www.malloc.de/en/)。但是，据我了解，这段代码已经在 C 库中，我不想浪费内存来复制它。

我正在使用带有 newlib（C 库）的 Sourcery Codebench Lite（GCC）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T22:41:04.753

推出你自己的分配器并不是那么难，而且在很多方面都非常有指导意义。首先，您需要弄清楚要在该堆中支持哪种分配/解除分配模式。对于一般用途，类似于 dlmalloc (Doug Lea's) 的分配器非常好。具体用途还有很多：基于堆栈（其中一个空闲始终是最后分配的未释放内存块的地址）、基于固定大小（将内存按固定大小划分并返回）、基于队列、小块， ETC。

其中大多数也可以有一个内部分配器，例如假设你有一个固定大小的分配器，你可以告诉它分配 X 字节块（来自第二个分配器或系统），然后分成 Y 块字节。返回指向大小为 Y 字节的块的指针，但当没有空闲块时，您分配一个大小为 X 的新块并将其划分。

为方便起见，您还可以全局或在某些类上实现 new/delete 运算符，以将它们的分配重定向到您的自定义分配器。在你的堆上放置新的也很方便，见下文。

我个人更喜欢使用宏，因为它可以很容易地添加额外的调试信息（函数/行/等）。IE：

```
#define CUSTOM_NEW(Heap) new(Heap, __FUNCTION__, __LINE__)
int* ptr = CUSTOM_NEW(someHeap) int[32]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-17T01:45:33.243

我终于看到了 Eli Bendersky 的博客，它准确地说明了我在寻找什么。 [memmgr – 固定池内存分配器](http://eli.thegreenplace.net/2008/10/17/memmgr-a-fixed-pool-memory-allocator/)

# x3d - 我需要在 x3d 中设置内联对象的大小

> ID：13210724
> 
> 赞同：1
> 
> 时间：2012-11-03T15:44:12.293
> 
> 标签：x3d, x3dom

我需要在 x3d 中设置内联对象的大小。谁能帮我这个？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-04T23:15:31.060

您可以**将 Inline 包装在 Transform**中，然后您可以通过更改 Transform 的比例来更改 Inline 的大小。

例如：http: [//jsfiddle.net/wildpeaks/ZZfb2/2/](http://jsfiddle.net/wildpeaks/ZZfb2/2/)

* * *

```
<X3D width="400px" height="300px" showStat="true">
    <Scene>
        <Transform id="redBox">
            <Inline url="http://x3dom.org/x3dom/example/scene/redBox.x3d" />
        </Transform>
    </Scene>
</X3D>

<button onclick="change_size()">Click to change the size</button> 
```

* * *

```
function change_size() {
    document.getElementById('redBox').setAttribute('scale', '3 0.5 1');
}​ 
```

# c++ - C++'括号'运算符

> ID：13210728
> 
> 赞同：0
> 
> 时间：2012-11-03T15:44:57.873
> 
> 标签：c++, class, if-statement, operators

在 c++ 中，如果您使用这些类型的花括号：

```
if (x == y)
{ <---
} <--- 
```

是否可以创建一个使用这些的类？与此类似的地方：

```
class x
{
    operator {} foo(int something)
    {
        do something...
    }
}; 
```

PS。我不知道这些括号叫什么，大括号？

谢谢你

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-03T15:52:44.813

花括号实际上用于许多不同的事情：

*   复合语句
*   初始化器
*   结构/枚举/类/联合/命名空间说明符

（可能还有更多！）

这些都不是运算符，也不能重载。

您可能感兴趣的是 C++11 的大括号初始化语法，如果您需要某种语法，您可以使用它：

```
class x
{
    x(int something)
    {
        do something...
    }
};

x foo{5}; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-03T15:46:53.337

不，因为大括号不是运算符，并且您不能创建新的运算符 - 您只能重载现有的运算符。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-03T15:47:08.360

是的，它们被称为花括号或花括号或花括号。它们表示一个块或一组初始值设定项。你无法重新定义它们的含义。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-03T15:47:18.853

（就我而言，它们被称为花括号或花括号。）

**他们不是运营商。**

在`if ()`您提供的示例中，它们定义了范围的边界。或者当涉及到 OO 时，他们定义了一个命名空间。或者一堂课。

而且我相信你不能让它们超载（这没有任何意义，真的。）

# html - 使用自定义字体而不是 javascript 使空格/制表符/换行符可见

> ID：13210729
> 
> 赞同：5
> 
> 时间：2012-11-03T15:45:09.000
> 
> 标签：html, fonts

在网页 textarea 或 div 中，我想让空白可见，即，将空格显示为小点 ∙，将制表符显示为“⇥”，以及带有另一个字符的换行符。以便：

```
These are spaces
These   are tabs 
```

将显示为：

```
These∙are∙spaces↵
These⇥are⇥tabs↵ 
```

这可以通过将“”字符替换为“∙”等的 javascript 来完成，尽管这有点混乱，您必须处理捕获用户键入空格或粘贴的问题。此外，如果用户对文本“这些是”进行查找（ctrl-f），她将找不到文本，因为空格实际上是 ∙ 字符。

相反，我发现似乎是一个更清洁的解决方案：创建一个自定义字体，其中空格只是一个可见字符。它适用于空间 - 不需要凌乱的 JavaScript！但是，我无法确定是否可以使用我发现的非常糟糕的免费字体编辑软件来编辑字体中的制表符或换行符。

有谁知道是否可以编辑字体中的制表符和/或换行符，如果可以，你能推荐一个对我来说最容易做到的字体编辑器程序吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T15:53:28.760

我认为您不能为特殊字符（例如“制表符”等）创建带有字符的字体。

我不会用 javascript 替换这些字符，而是使用 javascript 来更改选项卡的样式。

```
These   are tabs 
```

会成为

```
These<span class="tabs">   </span>are tabs 
```

并且选项卡 css 类可以具有例如红色背景。

```
.tabs{
background-color: red;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-03T17:23:07.090

直觉上，我希望用一些字形替换空格是可行的，但通常需要注意的是（可下载字体并非绝对普遍适用），但制表符和换行符是一个不同的问题。它们不会被渲染，以便从字体中提取字形并显示。相反，它们会导致格式化操作，例如离开水平空间并移动到下一行的开头。

一个快速的实验支持这种分析。使用 FontForge，我将字体中的空格字形替换为图形字形，然后显示它而不是空格。但是对 tab 做同样的事情并不会改变任何东西。制表符只是导致间距，这取决于它在一行中的位置，如 HTML 规范中所定义。

# pymongo - 如何让 pymongo 的 find() 返回一个列表？

> ID：13210730
> 
> 赞同：61
> 
> 时间：2012-11-03T15:45:20.513
> 
> 标签：pymongo

Pymongo 用它返回一个游标，我可以遍历结果并将它们的文档附加到列表中。有没有办法直接在列表中获取结果文档？谢谢

* * *

## 回答 #1

> 赞同：118
> 
> 时间：2012-11-04T02:11:54.723

以下代码会将整个结果集 ( `Cursor`) 转换为`list`:

```
myresults = list(mydb.mycollection.find()) 
```

这对于相对较小的结果集来说很好，因为您将所有内容都拉入内存。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2021-02-03T13:11:50.657

添加到上面的答案中，创建一个特定字段的所有结果列表的快速方法是：

```
myResults = list(mydb.mycollection.find({},{"FieldName":1,"-id":False})) 
```

# java - 入队/出队或提议/投票

> ID：13210731
> 
> 赞同：1
> 
> 时间：2012-11-03T15:45:27.160
> 
> 标签：java, queue

这似乎是一个非常基本的问题，但我已经被困了几个小时。

我们什么时候使用 enqueue/dequeue 方法以及什么时候使用 offer/poll？！

我想用`void enqueue(int x, int p)`and`int dequeue()`方法创建一个整数的 PQ，如何声明这样的队列？

谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-03T16:09:23.887

我假设“PQ”的意思是“优先队列”。我从来没有使用过这样的队列（我对队列的印象是严格的 FIFO 结构），但是在阅读文档之后，我认为您可以这样做：

首先，您需要创建要存储在队列中的对象的类。假设`int`内容和`int`优先级：

```
public class MyClass implements Comparable<MyClass> {
    private int x, p;

    /*
     * x: Contents
     * p: Priority
     */
    public MyClass(int x, int p) {
        this.x = x;
        this.p = p;
    }

    @override
    public int compareTo(MyClass o) {
        return this.p - o.p;
    }

    public int getX() {
        return x;
    }
} 
```

现在，创建您的优先队列。如果我正确理解了类文档，它将使用该`compareTo` 方法对您的对象进行排序：

```
....
PriorityQueue<MyClass> pq = new PriorityQueue<MyClass>();
....
pq.add(new MyClass(x, p));
.... 
```

检查：[http ://docs.oracle.com/javase/7/docs/api/java/util/PriorityQueue.html](http://docs.oracle.com/javase/7/docs/api/java/util/PriorityQueue.html)

Java队列没有`enqueue`and`dequeue`方法；这些操作是使用以下方法完成的：

*   排队：
    *   `add(e)`: 插入对象失败抛出异常
    *   `offer(e)`:`false`如果插入对象失败则返回
*   出队：
    *   `remove()`: 如果队列为空则抛出异常
    *   `poll()`:`null`如果队列为空则返回
*   看看队列中的第一个对象：
    *   `element()`: 如果队列为空则抛出异常
    *   `peek()`:`null`如果队列为空则返回

现在，最后：何时使用`offer`and `add`？

关于`offer`和`add`：嗯，这取决于你想如何处理插入失败的队列：

> *Queue从**Collection*继承的*add*方法插入一个元素，除非它违反队列的容量限制，在这种情况下它会抛出*IllegalStateException*。*offer*方法**仅用于有界队列**，与*add* only的不同之处在于它通过返回*false*来指示插入元素失败。

 *****（参见：[http](http://docs.oracle.com/javase/tutorial/collections/interfaces/queue.html) ://docs.oracle.com/javase/tutorial/collections/interfaces/queue.html ）

希望这可以帮助你*****

# ios - 在 Xcode 中生成 AdHoc Phonegap iOS Testflight 时下载失败

> ID：13210733
> 
> 赞同：0
> 
> 时间：2012-11-03T15:45:48.033
> 
> 标签：ios, xcode, cordova, provisioning, testflight

Phonegap 2.0* 似乎在通过 ad hoc 和 testflightapp.com 发布时存在问题我已经创建了我的 ad hoc 证书和移动配置文件，并且已经完成了使用适当的捆绑标识符进行归档和分发的所有必要步骤。

我通过创建一个空白 phonegap app create /path build.identifier appname 对此进行了测试

打开 xcode 项目文件并仅更改发布代码签名配置文件，

我生成 IPA 并通过 testflightapp.com 上传，在安装栏大约 90% 处，应用程序显示“无法下载应用程序”此时无法下载。

我在 xcode 中创建了一个空白的单视图项目，并使用应用程序通过 testflight 成功上传和安装的相同包标识符/发布配置文件。

如果我将我的应用程序上传到 build.phonegap.com 并使用它们生成 IPA，它会成功下载和安装，但是我无法通过此方法自定义图标/启动画面和其他设置。

有没有人通过 xcode 生成的 testflight 成功生成和分发 IOS/Phonegap 应用程序？我在这里缺少什么步骤。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T05:06:47.833

科尔多瓦版本，科尔多瓦框架的版本 2.X 支持 iOS6....

# python - 只获取新的电子邮件 imaplib 和 python

> ID：13210737
> 
> 赞同：29
> 
> 时间：2012-11-03T15:46:12.413
> 
> 标签：python, imaplib

这是一个更大项目的一小部分。我只需要获取未读电子邮件并解析它们的标题。如何修改以下脚本以仅获取未读电子邮件？

```
conn = imaplib.IMAP4_SSL(imap_server)
conn.login(imap_user, imap_password)

status, messages = conn.select('INBOX')    

if status != "OK":
    print "Incorrect mail box"
    exit()

print messages 
```

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2012-11-03T15:53:01.440

像这样的东西可以解决问题。

```
conn = imaplib.IMAP4_SSL(imap_server)

try:
    (retcode, capabilities) = conn.login(imap_user, imap_password)
except:
    print sys.exc_info()[1]
    sys.exit(1)

conn.select(readonly=1) # Select inbox or default namespace
(retcode, messages) = conn.search(None, '(UNSEEN)')
if retcode == 'OK':
    for num in messages[0].split(' '):
        print 'Processing :', message
        typ, data = conn.fetch(num,'(RFC822)')
        msg = email.message_from_string(data[0][1])
        typ, data = conn.store(num,'-FLAGS','\\Seen')
        if ret == 'OK':
            print data,'\n',30*'-'
            print msg

conn.close() 
```

这里还有一个重复的问题 - [Find new messages added to an imap mailbox since I last check with python imaplib2?](https://stackoverflow.com/questions/2047067/find-new-messages-added-to-an-imap-mailbox-since-i-last-checked-with-python-imap)

两个有用的函数可以让您检索检测到的新邮件的正文和附件（参考：[How to fetch an email body using imaplib in python?](https://stackoverflow.com/questions/2230037/how-to-fetch-an-email-body-using-imaplib-in-python)）-

```
def getMsgs(servername="myimapserverfqdn"):
  usernm = getpass.getuser()
  passwd = getpass.getpass()
  subject = 'Your SSL Certificate'
  conn = imaplib.IMAP4_SSL(servername)
  conn.login(usernm,passwd)
  conn.select('Inbox')
  typ, data = conn.search(None,'(UNSEEN SUBJECT "%s")' % subject)
  for num in data[0].split():
    typ, data = conn.fetch(num,'(RFC822)')
    msg = email.message_from_string(data[0][1])
    typ, data = conn.store(num,'-FLAGS','\\Seen')
    yield msg

def getAttachment(msg,check):
  for part in msg.walk():
    if part.get_content_type() == 'application/octet-stream':
      if check(part.get_filename()):
        return part.get_payload(decode=1) 
```

PS：如果在python 2.7死后2020年路过：替换 `email.message_from_string(data[0][1])`为 `email.message_from_bytes(data[0][1])`

* * *

## 回答 #2

> 赞同：30
> 
> 时间：2015-04-14T14:15:30.213

上面的答案实际上不再起作用，或者可能从未起作用，但我对其进行了修改，因此它只返回看不见的消息，它曾经给出：错误无法解析 fetch 命令或类似的东西，这是一个工作代码：

```
mail = imaplib.IMAP4_SSL('imap.gmail.com')
(retcode, capabilities) = mail.login('email','pass')
mail.list()
mail.select('inbox')

n=0
(retcode, messages) = mail.search(None, '(UNSEEN)')
if retcode == 'OK':

   for num in messages[0].split() :
      print 'Processing '
      n=n+1
      typ, data = mail.fetch(num,'(RFC822)')
      for response_part in data:
         if isinstance(response_part, tuple):
             original = email.message_from_string(response_part[1])

             print original['From']
             print original['Subject']
             typ, data = mail.store(num,'+FLAGS','\\Seen')

print n 
```

我认为错误来自于，`messages[0].split(' ')`但上面的代码应该可以正常工作。

另外，请注意`+FLAGS`而不是`-FLAGS`将消息标记为已读。

编辑 2020：如果您在 python 2.7 死亡后于 2020 年路过：替换 `email.message_from_string(data[0][1])`为 `email.message_from_bytes(data[0][1])`

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2019-10-09T17:57:09.360

您可以使用 imap_tools 包： [https ://pypi.org/project/imap-tools/](https://pypi.org/project/imap-tools/)

```
from imap_tools import MailBox, AND
with MailBox('imap.mail.com').login('test@mail.com', 'password', 'INBOX') as mailbox:
    # get unseen emails from INBOX folder
    for msg in mailbox.fetch(AND(seen=False)):
        print(msg.date, len(msg.html or msg.text)) 
```

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2015-08-28T17:09:22.257

```
original = email.message_from_string(response_part[1]) 
```

需要更改为：

```
original = email.message_from_bytes(response_part[1]) 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2016-08-03T12:48:04.423

我已经设法使用 Gmail 让它工作：

```
import datetime
import email
import imaplib
import mailbox

EMAIL_ACCOUNT = "your@gmail.com"
PASSWORD = "your password"

mail = imaplib.IMAP4_SSL('imap.gmail.com')
mail.login(EMAIL_ACCOUNT, PASSWORD)
mail.list()
mail.select('inbox')
result, data = mail.uid('search', None, "UNSEEN") # (ALL/UNSEEN)
i = len(data[0].split())

for x in range(i):
    latest_email_uid = data[0].split()[x]
    result, email_data = mail.uid('fetch', latest_email_uid, '(RFC822)')
    # result, email_data = conn.store(num,'-FLAGS','\\Seen') 
    # this might work to set flag to seen, if it doesn't already
    raw_email = email_data[0][1]
    raw_email_string = raw_email.decode('utf-8')
    email_message = email.message_from_string(raw_email_string)

    # Header Details
    date_tuple = email.utils.parsedate_tz(email_message['Date'])
    if date_tuple:
        local_date = datetime.datetime.fromtimestamp(email.utils.mktime_tz(date_tuple))
        local_message_date = "%s" %(str(local_date.strftime("%a, %d %b %Y %H:%M:%S")))
    email_from = str(email.header.make_header(email.header.decode_header(email_message['From'])))
    email_to = str(email.header.make_header(email.header.decode_header(email_message['To'])))
    subject = str(email.header.make_header(email.header.decode_header(email_message['Subject'])))

    # Body details
    for part in email_message.walk():
        if part.get_content_type() == "text/plain":
            body = part.get_payload(decode=True)
            file_name = "email_" + str(x) + ".txt"
            output_file = open(file_name, 'w')
            output_file.write("From: %s\nTo: %s\nDate: %s\nSubject: %s\n\nBody: \n\n%s" %(email_from, email_to,local_message_date, subject, body.decode('utf-8')))
            output_file.close()
        else:
            continue 
```

# entity-framework - EF5，寡妇表格，将基德实体从项目数据源拖入 GridView 仅创建 2 列

> ID：13210738
> 
> 赞同：0
> 
> 时间：2012-11-03T15:46:18.203
> 
> 标签：entity-framework, entity-framework-5

移至 EF5 后，创建了一个图表，其中包含通过 FKey（如 Order/Order Details）链接的 2 个表，然后使用 Order 对象创建一个新的项目数据源，将一列拖入文本框中成功创建绑定源，但随后拖动子项实体 OrderDetails 到 gridview 中仅创建 2 列 Count 和 IsReadOnly 。

VS2010 或 2012 ，相同的 .NET 4.0 或 4.5 ，同样的问题

返回EF4，问题解决

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-15T15:53:34.713

该解决方案已在[此处的 EF codelex 站点上发布](https://entityframework.codeplex.com/workitem/639)

# c - 将结构转换为指向其第一个元素的指针类型

> ID：13210741
> 
> 赞同：3
> 
> 时间：2012-11-03T15:46:26.313
> 
> 标签：c, pointers, casting, struct

在看的时候：

[C 编译器可以在结构中的第一个元素之前添加填充吗？](https://stackoverflow.com/questions/13210239/can-a-c-compiler-add-padding-before-the-first-element-in-a-structure)

我想出了以下代码：（
忽略此示例中未释放内存的事实。）

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>

typedef struct {
    char *cstr;
    size_t len;
} str_t;

void setStr(str_t* dest, const char* src)
{
    size_t len = strlen(src);
    dest->cstr = malloc(len + 1);
    dest->len = len;
    memcpy(dest->cstr, src, len + 1);
}

int main(void)
{
    str_t str;
    setStr(&str, "woot!");
    printf("%s\n", str);
    return 0;
} 
```

令人惊讶的是，这确实有效。这个电话：

```
printf("%s\n", str); 
```

似乎相当于这个：

```
printf("%s\n", str.cstr); 
```

所以有人会认为以下也是可能的：

```
char* plainstr = malloc(str.len + 1);
strcpy(plainstr, str); 
```

但是不行。相反，`printf`,`strcpy`不是可变参数，所以有类型检查。编译器理所当然地抱怨：

```
passing 'str_t' to parameter of incompatible type 'const char *' 
```

但是试图通过强制转换来告诉编译器“我是认真的”：

```
strcpy(plainstr, (const char*)str); 
```

也不行：

```
operand of type 'str_t' where arithmetic or pointer type is required 
```

请注意，以下内容不起作用：

```
strcpy(plainstr, (const char*)&str); 
```

由于`str.cstr != &str`. 例如，这个的输出：

```
printf("%p %p\n", str.cstr, &str); 
```

是否如下：

```
0xbdb010 0x7fff788f6ab8 
```

事实上，垃圾数据正在被复制到`plainstr`.

所以问题是：

1.  为什么不允许将结构转换为指针类型？
2.  `printf`如果不允许投射，怎么能正确处理这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-03T15:58:03.810

> 为什么不允许将结构转换为指针类型？

因为没有意义。您如何将一大堆可能不相关的不同类型的信息重新解释为简洁的内存地址？但是，在您提出的上一个问题中，所有回答的人都[引用了 C 标准](https://stackoverflow.com/questions/13210239/can-a-c-compiler-add-padding-before-the-first-element-in-a-structure/13210249#13210249)，并且标准中的一个特定声明指出

> 结构的地址是它的第一个元素的地址

所以（正如@Mat 已经指出的那样），你确实**可以**写

```
strcpy(destination, *(const char **)&str); 
```

由于我刚才列举的原因，这“会起作用”。

> 如果不允许强制转换，printf 如何正确处理这个问题？

因为在 C 语言中，类型转换通常只是为了愚弄编译器（除非不是这样）。通过传递结构，结构将被复制，您的堆栈将类似于（为了简单起见，我有意省略结构中的任何填充）：

```
> top of the stack: pointer to the format string
> address of the copied struct *and*  address of the copy of the char pointer
> address of the length of the string (size_t)
> every other stuff 
```

所以，现在`printf()`要做的是：

*   从堆栈中弹出第一个值。它将是格式字符串。
*   现在当它在格式字符串中遇到`%s`格式说明符时，它会弹出另一个 char 指针——实际上，它是指向结构的指针，也是指向第一个元素的指针，也就是要打印的字符串。
*   所以它会愉快地打印字符串并返回。

此外，这*仍然是未定义的行为，*尽管它有效 - 如果您没有指定格式字符串，`printf()`它实际上对应于您作为其可变参数传入的类型，那么这不符合要求，您可以期待任何事情发生。

# android - Android中的水平滚动？

> ID：13210742
> 
> 赞同：0
> 
> 时间：2012-11-03T15:46:39.620
> 
> 标签：android, user-interface, scroll, horizontal-scrolling

Pro Informant -app 具有这种左右滚动功能。你怎么能在Android中做到这一点？

![在此处输入图像描述](../Images/43cdec26fd28fe31de21e697a4178853.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T15:51:54.347

[Horizo​​ntalScrollView](http://developer.android.com/reference/android/widget/HorizontalScrollView.html)可能是您正在寻找的。

# ruby-on-rails - Rails 在 S3 上为 Paperclip 图像设置代理？

> ID：13210744
> 
> 赞同：2
> 
> 时间：2012-11-03T15:46:53.197
> 
> 标签：ruby-on-rails, amazon-s3, paperclip

我有一个 Rails 3 应用程序，其图像托管在 AWS S3 上并由 Paperclip gem 管理。

我正在尝试对其进行设置，以便用户可以使用 js 库在浏览器中编辑这些图像（现在我正在使用 Pixastic，但我愿意尝试 Caman）但遇到了 js 图像的问题操作库失败是因为浏览器的 CSRF 保护拒绝 S3 图像来自不同的域。

有没有办法代理图像，使它们看起来来自同一个域，或者以其他方式解决这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-01T08:34:05.847

我刚刚和一个合作伙伴一起用 CamanJS 解决了这个问题。

在不知道您如何构建您的视图（并且根本不了解 Pixastic）的情况下，我会尽力回答。

假设您要链接到 html 中的原始图像，请添加`crossorigin='anonymous'`到图像标记中：

`<img class='image' crossorigin='anonymous' data-camanheight='450' src=<%= @photo.url%>>`

这将设置浏览器的期望，即图像不会来自您网站的 url。

我们发现这适用于初始图像，但是当 CamanJS 的 revert() 函数重建图像（在将其转换回画布元素之前）时，它遗漏了让浏览器知道它可以交叉的标题信息-来源数据。因此，每次我们还原图像时，都会再次遇到 CORS 问题。我简要浏览了 Pixastic 的文档，但无法就您是否会遇到类似问题提供建议。

注意：超级流畅的体验是我们的首要任务，我们不想设置代理，所以我们的解决方法是将手头上的图像标签的克隆保留在 Javascript 变量中，并编写我们自己的方法来恢复画布，重新克隆图像标签，将克隆的标签之一推入 DOM，然后将其转换为新的画布元素并摆脱旧的元素。它遇到了一些 CamanJS 特定的行为，使其有点“hacky”。

我的项目合作伙伴已向 CamanJS 提交了保留标头信息的拉取请求，因此可能很快就会解决此问题，从而使 CamanJS 成为跨源资源共享的更好解决方案。

希望这可以帮助。

# javascript - 存储在对象中时删除谷歌地图标记

> ID：13210753
> 
> 赞同：0
> 
> 时间：2012-11-03T15:47:49.947
> 
> 标签：javascript, google-maps, google-maps-api-3, google-maps-markers

我想用存储在数据库中的位置的标记填充谷歌地图，然后允许用户通过双击要删除的标记来删除任何标记。使用下面的代码填充地图，但是当双击任何标记时，最后一个标记被删除。

我认为这种情况正在发生，因为每次都将双击事件侦听器重新分配给当前标记，但我不知道如何阻止这种情况发生。

我在这里设置了一个 jsFiddle [http://jsfiddle.net/simonbarker/TA4HP/](http://jsfiddle.net/simonbarker/TA4HP/)

```
var markers = {"locations": [{"name" : "UK 1", "date" : "Nov 1", "lat" : 51, "lng" : 0.164},
                               {"name" : "France 1", "date" : "Nov 2", "lat" : 50, "lng" : 0.164},
                               {"name" : "France 2", "date" : "Nov 2", "lat" : 49, "lng" : 0.164}]
                };

  var map;
  var center = new google.maps.LatLng(markers.locations[1].lat,markers.locations[1].lng);

  var mapOptions = {
    zoom: 8,
    center: center,
    mapTypeId: google.maps.MapTypeId.ROADMAP
  }

  map = new google.maps.Map(document.getElementById("map_canvas"), mapOptions);

  createMarkers();

  //create markers by traversing throught the markers object
  function createMarkers(){

    var i = 0;
    while(markers.locations[i]){

      var marker = new google.maps.Marker({
          position: new google.maps.LatLng(markers.locations[i].lat, markers.locations[i].lng),
          animation: google.maps.Animation.DROP,
          map: map
      });

      //store marker in the locations object
      markers.locations[i].marker = marker;

      //add delete handler
      google.maps.event.addListener(marker, 'dblclick', function(event) {
        marker.setMap(null);
        delete markers.locations[i];
      });

      i++;

    }
  }​ 
```

任何帮助都会很棒

**更新：**

我通过将删除处理函数更改为

```
//add delete handler
          google.maps.event.addListener(marker, 'dblclick', function(event) {
            this.setMap(null);
            delete markers.locations[this.id];
          }); 
```

并在创建标记时向标记添加 id

```
var marker = new google.maps.Marker({
              id: i, 
              position: new google.maps.LatLng(markers.locations[i].lat, markers.locations[i].lng),
              animation: google.maps.Animation.DROP,
              map: map
          }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T15:57:32.517

您需要在单独的函数中创建标记以获得关闭

[**与此**](https://stackoverflow.com/questions/12355249/how-to-create-infowindows-for-multiple-markers-in-a-for-loop/12355458#12355458)相同的答案[](https://stackoverflow.com/questions/12355249/how-to-create-infowindows-for-multiple-markers-in-a-for-loop/12355458#12355458)

 **[**解释在这里。**](http://econym.org.uk/gmap/closure.htm)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-03T15:50:31.433

将对象存储在数组或字典中，以便您稍后可以使用[此行](https://stackoverflow.com/questions/2453297/how-to-delete-a-marker-on-google-maps)引用它们以删除它们...

```
map.removeOverlay(marker); 
```**

# jquery - jQuery 切换/单击无法按我想要的方式工作

> ID：13210755
> 
> 赞同：0
> 
> 时间：2012-11-03T15:48:21.887
> 
> 标签：jquery, search, toggle

[在http://codepen.io/KyleMorgan49/full/ELqur](http://codepen.io/KyleMorgan49/full/ELqur)查看我的项目

当我单击按钮时，它会展开。但是由于某些奇怪的原因关闭它，我必须单击框的底部。我认为 div#search-icon 正在向下移动或缩小，但我没有任何代码可以做到这一点。我很困惑。你能花点时间玩这个吗？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T15:56:59.583

发生这种情况是因为您`#searchy-stuff`覆盖了图标的中间（您也可以单击顶部，而不仅仅是底部来查看它）

要修复它，使其`#searchy-stuff`与输入字段的宽度相同

[**演示**](http://codepen.io/anon/pen/LHpow)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-03T15:57:26.937

searchy-stuff 与您的搜索图标重叠，因此不会触发点击事件。

添加这个CSS：

```
#searchy-stuff{pointer-events:none} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-03T15:54:25.207

```
<p id="searchy-stuff" style="display: block;">
    <input type="text" id="search-input">
</p> 
```

在第一个动画完成后，此部分与图标重叠...更改您的 css 它将起作用。实际上没有第二次点击图标。

# c++ - 如何在模板中调用类型的析构函数？

> ID：13210757
> 
> 赞同：4
> 
> 时间：2012-11-03T15:48:42.690
> 
> 标签：c++, templates, constructor, destructor, template-function

例如，我们有一个这样的函数：

```
template <typename TYPE>
void construct_and_destruct(TYPE & object)
{
    //...
} 
```

我们**不能**`object.Type()`像and一样调用构造函数和析构函数`object.~Type()`（现在不是真的）（为什么？**=C**）

要调用我们可以喜欢的构造函数`new(&object) TYPE()`。而且我不知道如何调用析构函数（不存在放置`delete`）。这个怎么做？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-03T15:50:40.823

您可以将析构函数称为：

```
object.~TYPE(); 
```

但这可能不是您想要的，并且可能会被双重删除。

构造函数很简单：

```
object = TYPE(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-03T15:50:52.913

`object.~TYPE()``object.~TYPE::TYPE()`我认为都是正确的。听起来有点可疑，但是，您要实现什么目标？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2021-01-14T20:57:09.220

我遇到了一个稍微不同的问题，但也适用于放置新/删除，解决方案应该是相似的。

给定一个依赖类型名称，放置新：

```
new (&foo) typename AT::T(arg, arg, arg); 
```

相关的删除很棘手：

```
foo.~ typename AT::T();  // Doesn't work, nor do variations of syntax 
```

现代解决方案似乎是，`std::destroy_at(&foo)`但我的编译器没有完整的 C++17。但是，滚动您自己的基本版本并不困难：

```
template <typename T>
constexpr void destroy_at(T* p)
{
  p->~T();
} 
```

看起来不错。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-01-14T16:20:33.280

试试这个[带有 decltype 和\或 std::remove_reference 的调用析构函数](https://stackoverflow.com/questions/17328454/calling-destructor-with-decltype-and-or-stdremove-reference)，它对我来说可以调用非限定类型的析构函数（模板参数中未指定的内部类）......

# apache-pig - 编译的猪将输出移动到输入

> ID：13210760
> 
> 赞同：0
> 
> 时间：2012-11-03T15:48:54.800
> 
> 标签：apache-pig

我正在尝试运行一个嵌入式 Pig 脚本（嵌入在 Python 中），我需要在其中获取脚本的输出/结果并将其作为输入反馈到脚本中。我确信有一种简单的方法可以做到这一点，但所有示例似乎都过于简单化并且使用的是单列示例。

我的输入如下所示：networkMap.csv：

```
NodeH,4,-0.4
NodeH,5,0.2
NodeO,6,0.1
Link,W_1_4,0.2,1,4
Link,W_1_5,-0.3,1,5
Link,W_2_4,0.4,2,4
Link,W_2_5,0.1,2,5
Link,W_3_4,-0.5,3,4
Link,W_3_5,-0.2,3,5
Link,W_4_6,-0.3,4,6
Link,W_5_6,-0.2,5,6
LR,LR,0.9
Target,Target,1 
```

让我们举一个超级简单的例子来说明我想要做什么，去掉所有的应用程序逻辑，只关注输入/输出问题：

```
#!/usr/bin/python

from org.apache.pig.scripting import *

P = Pig.compile("""
A = LOAD '$input' using PigStorage(',') AS (type:chararray, name:chararray, val:double,iName:chararray,jName:chararray);

STORE A INTO '$outFile' USING PigStorage (',');
""")
params = { 'input': 'networkMap.csv'}
for i in range(2):
    outDir = "out_" + str(i + 1)
    inputString = ""
    params["outFile"] = "out_" + str(i + 1)
    bound = P.bind(params)
    stats = bound.runSingle()
    if not stats.isSuccessful():
        raise 'failed'
    params["input"] = stats.result("Output1") 
```

我希望我可以说输入=输出，但这不起作用。我也试过：

```
input = "";
iter = stats.result("A").iterator() 
while iter.hasNext():
    tuple = iter.next()
    input = input + "(" +tuple.toDelimitedString(",") + ")"
params["input"] = input 
```

这确实将输出推回输入，但是 LOAD 函数无法读取它。因为它看起来像一个大记录-

```
A = LOAD '(NodeI,1,1.0,,)(NodeI,2,0.0,,)(NodeI,3,1.0,,)(NodeH,4,-0.4,,)(NodeH,5,0.2,,)(NodeO,6,0.1,,)(Link,W_1_4,0.2,1,4)(Link,W_1_5,-0.3,1,5)(Link,W_2_4,0.4,2,4)(Link,W_2_5,0.1,2,5)(Link,W_3_4,-0.5,3,4)(Link,W_3_5,-0.2,3,5)(Link,W_4_6,-0.3,4,6)(Link,W_5_6,-0.2,5,6)(LR,LR,0.9,,)(Target,Target,1.0,,)' using PigStorage(',') AS (type:chararray, name:chararray, val:double,iName:chararray,jName:chararray); 
```

我确定我错过了一些简单的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T20:50:33.230

快速回答：改变

```
params["input"] = stats.result("Output1") 
```

至

```
params["input"] = params["outFile"] 
```

说明：请记住，您的 params 数组用于在 Pig 脚本中进行参数替换。这就是为什么您的下一个 LOAD 语句看起来是这样的原因。您获取了上一次运行的输出并说“获取这些结果，将它们放入一个字符串，然后将此字符串解释为输入数据的文件名”。

你快到了。您的 params 字典中有两个元素：input 和 outFile。您的脚本从输入加载并存储到 outFile。所以在你运行脚本之后，设置 input = outFile. 然后你的下一次迭代将从 outFile 加载。请务必指定一个新的 outFile，否则您将无法 STORE，因为该目录已经存在。

# c# - 为什么编译器抱怨这个变量已经定义

> ID：13210763
> 
> 赞同：1
> 
> 时间：2012-11-03T15:49:27.347
> 
> 标签：c#

> **可能重复：**
> [C# 变量范围](https://stackoverflow.com/questions/2049330/c-sharp-variable-scoping)

考虑这段代码：

```
void f()
{
  if (condition) 
  {
     B b = createB();
  }
  ...
  B b = getB();
} 
```

我收到一个错误，抱怨已在子范围中定义的变量 b。为什么是这样？第一个定义发生在外部范围不可见的嵌套范围内。我什至无法访问外部范围内先前声明的变量。那么在这种情况下编译器在做什么呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-03T15:55:38.013

它解释了它被创建两次的可能性。在第一行初始化变量，然后在您现在创建它的位置设置值。这意味着它只会被创建一次，但如果它有效，它将携带相同的值。

编辑：请参阅 FSX 对代码的回答......这只是对它发生原因的解释。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-03T15:53:54.357

试试这段代码，编译器不会抱怨：

```
void f()
{
  B b = null;
  if (condition) 
  {
     b = createB();
  }
  ...
  b = getB();
} 
```

# node.js - 带有请求范围的咖啡脚本

> ID：13210765
> 
> 赞同：1
> 
> 时间：2012-11-03T15:49:33.330
> 
> 标签：node.js, coffeescript

```
request = require('request')

auth =
url: ''
method: 'POST'
json:
  credentials:
  username: ""
  key: ""

exports = exports ? this

request auth, (err, res, body) ->
  exports.inside = body

console.log(exports.inside) 
```

然后上面是带有 Node.js 请求模块的 Coffeescript。我无法弄清楚如何获取请求函数中的数据。这一直是我申请的主要障碍。

谢谢！

** 编辑**

Vadim Baryshev 的代码更新做到了！非常感谢 ：） ！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T16:37:25.887

您正在尝试在函数回调`exports.inside`中分配之前输出。`request`因为`request`函数是异步的。您可以通过回调或事件获取此函数的结果。

**更新**：

```
request = require('request')

exports = exports ? this

getAuth = (callback) ->
  auth =
  url: ''
  method: 'POST'
  json:
    credentials:
      username: ""
      key: ""

  request auth, (err, res, body) ->
    exports.inside = body
    callback err, body

getAuth (err, body) ->
  # here is exports.inside ready
  console.log exports.inside
  # also you can access body and request error arguments here
  # body === exports.inside here
  # err is request error (is null/undifined if request is successful) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-03T16:39:16.463

一旦请求函数完成，它会触发一个回调，这是唯一可以可靠访问“body”值的地方。

您遇到的问题是，当 console.log 函数运行时，由于请求未完成，回调尚未触发。

有关异步编程环境中程序流的更中肯的描述，请参阅[Nodejs 中使用 fs.stat 的问题。](https://stackoverflow.com/questions/13128037/problems-with-use-fs-stat-in-nodejs/13128608#13128608)

---编辑---例如：

考虑一下：

```
1: path='/tmp/file.txt'
2: result=''
3: fs.readFile path, (err,data) ->
4:    throw err if err
5:    result=data
6: console.log result 
```

如果我们要跟踪这个操作，我们会发现执行顺序是 1,2,3,6,...4,5，其中，由于磁盘 i/o 的性质，省略号表示一些未知数量的时间。

因为读取操作需要一些时间才能完成，而不是等待它的结果，所以我们提供了一个回调函数，该函数将在未来某个不可预知的时刻被调用，当文件的内容被读取时，可以分配给'结果'。

当程序流程到达第6行时，由于文件读取操作尚未完成，因此尚未调用回调，因此尚未设置结果。

这是异步编程的本质，我们可以将浪费的时间用于其他目的，而不是等待操作完成后再继续。

---第二次编辑---好的，根据您的要求，这是您修改的示例，以便它可以工作。

```
request = require('request')

auth =
  url: ''
  method: 'POST'
  json:
    credentials:
    username: ""
    key: ""

exports = exports ? this

request auth, (err, res, body) ->
  exports.inside = body
  console.log(exports.inside) 
```

请注意，正如现在已经多次描述的那样，您无法在回调之外访问请求的结果，因为您无法知道请求何时完成。

# android - Android：如何从光标适配器返回字符串

> ID：13210766
> 
> 赞同：0
> 
> 时间：2012-11-03T15:49:33.817
> 
> 标签：android, string, cursor

我的应用程序的目标是显示从 SQLite 数据库中提取的模块列表。如果用户点击一个特定模块，一个新的活动就会开始，它会提供存储在数据库中与该特定模块相关的更多信息。

我希望做的是获取行 ID 并将其发送到意图但是，我不确定如何将行 ID 从光标适配器获取到 onClickListItem？任何建议将不胜感激。

光标适配器

```
public class TestCursorAdapter extends CursorAdapter {

    private LayoutInflater viewInflater;
    public TestCursorAdapter(Context context, Cursor c, int flags) {
        super(context, c, flags);
        // TODO Auto-generated constructor stub
        viewInflater = (LayoutInflater) context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
    }

    @Override
    public void bindView(View v, Context context, Cursor c) 
    {
        TextView text_modulecode = (TextView)v.findViewById(R.id.labelModuleCode);
        TextView text_modulename = (TextView)v.findViewById(R.id.labelModuleName);

        text_modulecode.setText(c.getString(c.getColumnIndex(database.KEY_MODULECODE)));
        text_modulename.setText(c.getString(c.getColumnIndex(database.KEY_MODULENAME)));

        String moduleId = c.getString(c.getColumnIndex(database.KEY_ROWID));
    }

    @Override
    public View newView(Context context, Cursor c, ViewGroup parent) {
        View v = viewInflater.inflate(R.layout.listcourses, parent, false);
        return v;
    }
} 
```

从主要活动

```
public void onListItemClick(ListView l, View v, int position, long id)
      {
          super.onListItemClick(l, v, position, id);
            Intent intent = new Intent(this,ViewCourse.class);

            //--->             <--
            intent.putExtra(TEST,moduleId);
            startActivity(intent);
      } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-03T15:54:43.517

看看 onListItemClick 的参数

```
public void onListItemClick(ListView l, View v, int position, long id) 
```

ID 在那里.. 游标适配器会自动填充行 ID..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-03T15:57:26.997

```
intent.putExtra(TEST, String.valueOf(id)); 
```

# java - HIbernate 中的事务

> ID：13210767
> 
> 赞同：0
> 
> 时间：2012-11-03T15:49:38.983
> 
> 标签：java, hibernate

在下面的代码中：

```
SessionFactory sessionFactory = new Configuration().configure("student.cfg.xml").buildSessionFactory();
    Session session = sessionFactory.openSession();
    //Transaction tran = session.beginTransaction();
    session.save(student);
    //tran.commit();
    session.flush();
    session.close(); 
```

无论我是否评论/取消评论事务，它们都可以正常工作，即没有事务也可以成功执行保存操作。但是当我检查文档时，他们总是在插入更新删除之前使用事务。有相同的具体原因吗？我错过了什么吗？

请让我知道这件事。我很困惑:(

问候，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T16:35:02.660

阅读[这篇](https://community.jboss.org/wiki/Non-transactionalDataAccessAndTheAuto-commitMode?_sscc=t) 文章来自JBOSS

我相信一件事，如果你不使用事务（在某些时候你可能需要它，如果不需要原子操作）那么任何与数据库相关的操作都会命中数据库。它使系统变得疯狂缓慢。如果你做事务，那么休眠会在同一个事务中完成所有操作，一次点击 db 。在某个时候，我以前在某个地方读过。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-03T16:05:57.130

当您总是使用自动提交时，它可能会损害您的数据库。假设您想一次提交大量工作。在这种情况下，您需要在完成所有工作后创建事务并提交所有工作。例如，您需要为您的原子工作执行大量数据库访问。在这种情况下，您需要完成事务中的所有工作并提交所有工作。

```
Session session = factory.openSession();
Transaction tx = session.beginTransaction();

// do some work
tx.commit(); 
```

当然还有你的 catch 块。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-04T06:16:55.680

我认为休眠中的非选择查询正在执行多个查询（或使用多个操作），这就是我们需要事务来执行它们的原因。

# xamarin.ios - 来自 MDTool 的 .IPA 文件

> ID：13210769
> 
> 赞同：5
> 
> 时间：2012-11-03T15:49:58.763
> 
> 标签：xamarin.ios, monodevelop, mdtool

如何让 MDTool 为我的 MonoTouch 项目创建 .IPA 文件？

当我从 MonoDevelop GUI 应用程序中构建时，会创建 .IPA 文件。

但`mdtool build --configuration:AppStore|iPhone --project:MyProject`只是创建 .APP 文件和其他东西。

还是因为运行 MDTool 的用户在他们的钥匙串中没有证书等，所以它不会创建签名的 IPA？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-04T12:20:58.737

**`mdtool build`如果在项目设置中启用了此项，则会自动生成 IPA 文件，因此您无需执行任何特殊操作即可实现。**

在这种情况下，问题是运行以生成 IPA 文件的`codesign`步骤`mdtool`失败，并显示错误消息“不允许用户交互”（从`mdtool`输出中看不出这是一个错误）。

这反过来又是因为该`codesign`工具无法访问包含分发证书和配置文件的钥匙串。

要解决此问题，您需要运行`security unlock-keychain /Users/user/Library/Keychains/login.keychain`- 或任何包含密钥的钥匙串。

之后，mdtool build 会自动生成 IPA 文件。

# android - 获取 Drawable 对象的 xy 坐标

> ID：13210772
> 
> 赞同：1
> 
> 时间：2012-11-03T15:50:33.257
> 
> 标签：android, bitmap, coordinates, drawable

我有一个`Drawable`对象，我想在屏幕上找到绝对坐标。我发现的所有函数都与相对坐标有关，而不是绝对坐标。

这是代码：

```
public class MainActivity extends Activity {

AnimationDrawable rocketAnimation;
int counter = 0;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    ImageView rocketImage = (ImageView) findViewById(R.id.ball_laugh);
    rocketImage.setBackgroundResource(R.drawable.frames);
    rocketAnimation = (AnimationDrawable) rocketImage.getBackground();
    rocketAnimation.start()
}

public boolean onTouchEvent(MotionEvent event) {
      if (event.getAction() == MotionEvent.ACTION_DOWN) {

         // Get the frame of the animation
         Drawable currentFrame;
         currentFrame = rocketAnimation.getCurrent();

         // Now I want to get the x,y coordinates of currentFrame..   

        return true;
      }
      return super.onTouchEvent(event);
    }
} 
```

# android - Android小部件，如何在Android API <11中使用notifyAppWidgetViewDataChanged

> ID：13210777
> 
> 赞同：1
> 
> 时间：2012-11-03T15:51:08.200
> 
> 标签：android, android-widget, android-appwidget, appwidgetprovider

我想更新我的小部件以兼容 Android 2.3.3 (API 10)。

我的代码有一些问题。

minsdkversion = 10 时无法识别以下方法。

如何在我的 APPwidgetProvider 类中替换它们，以便将我的小部件与 Android 2.3.3、3.0 .... 4.0 一起使用？

```
rv.setRemoteAdapter(appWidgetIds[i], R.id.stack_view, intent);
rv.setEmptyView(R.id.stack_view, R.id.empty_view);
rv.setPendingIntentTemplate(R.id.stack_view, toastPendingIntent);
appWidgetManager.notifyAppWidgetViewDataChanged(i, R.id.stack_view); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-11T06:32:44.860

集合视图是从 API 11 引入的，因此您不能使用堆栈视图。

[http://developer.android.com/guide/topics/appwidgets/index.html#collections](http://developer.android.com/guide/topics/appwidgets/index.html#collections)

# java - JSF：以编程方式显示/调用对话框

> ID：13210778
> 
> 赞同：2
> 
> 时间：2012-11-03T15:51:15.757
> 
> 标签：java, jsf, primefaces

如何以编程方式显示/调用对话框并将其添加到舞台（实际浏览器窗口）？

我想每 2 小时触发一次数据库更新。我已经用`TimerTask`. 这对我来说很好，计时器任务从数据库中获取我想要的所有数据。在触发此计时器任务之前，我想将屏幕“锁定”几秒钟，以使用户（会话范围）无法访问数据库（我也知道这将如何工作）。我的问题是我不知道/找不到以编程方式调用对话框的方法。

* * *

**更新**我想设置这个 primefaces 对话框：

```
Dialog dialog = new Dialog(); 
dialog.setAppendToBody(true);
dialog.setModal(true);
dialog.setVisible(true);
dialog.setWidgetVar("generatedDialog");
dialog.setId("fancyDialog");
dialog.setClosable(false);
dialog.setHeader("Getting latest information from the database");
dialog.setDynamic(true);
dialog.setResizable(false);
dialog.setDraggable(false); 
```

如何将其显示到我的浏览器？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T16:57:55.487

您不需要以编程方式创建对话框。您需要的是[Push Technlogogy](http://en.wikipedia.org/wiki/Push_technology)，即服务器发起与客户端的交互。PrimeFaces 已经拥有这项技术，可以随时为您使用。

满足您需求的基本案例是[PrimePush - FacesMessage](http://www.primefaces.org/showcase-labs/push/facesmessage.jsf)：

*   用户编写通知。
*   服务器收到通知。
*   通知被发送到channel下的PushContext `/notifications`。
*   对于包含该`/notifications`通道的每个客户端，将执行一个操作。在这种情况下，频道仅在同一页面中，并且操作将显示通知。

您可以通过在两个不同的导航器中打开同一页面并发送通知来测试此行为。所有页面都将显示通知（并且看起来像您想要的那样）。

有了这个例子，你唯一需要做的就是：

1.  在每个页面（这确实是一项繁琐的工作，但这是您想要/需要的）或母版页（如果您使用模板系统）上设置一个频道。
2.  您的计时器必须在某种程度上调用服务器请求来启动通知。[这里](https://stackoverflow.com/a/8625286/1065197)有一个关于如何以编程方式上传文件的示例，但您只需启动请求¹，无需发送任何参数。
3.  Timer 调用的请求将向通道添加通知。
4.  该频道将自动触发该操作并可以执行您想要/需要的操作。在提供的示例中，它显示了咆哮声，但您可以修改它以显示`<p:dialog>`.

* * *

¹为了防止用户为你调用这个请求，最好设置一个[过滤器](https://stackoverflow.com/tags/servlet-filters/info)，阻止除你的计时器之外的任何人执行请求。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-03T16:27:19.273

有一个简单的解决方案：

1.  首先向母版页添加一个对话框。此对话框的渲染属性应首先设置为 false。

2.  其次刷新当前页面以下代码

    ```
    protected void refreshPage() { 
        FacesContext fc = FacesContext.getCurrentInstance(); 
        String refreshpage = fc.getViewRoot().getViewId();

        ViewHandler ViewH = fc.getApplication().getViewHandler(); 
        UIViewRoot UIV = ViewH.createView(fc,refreshpage);
        UIV.setViewId(refreshpage); 
        fc.setViewRoot(UIV); 
    } 
    ```

3.  第三次使用 TimerTask 类相关方法调用上述方法，并在此 TimerTask 类的相关方法中将对话框呈现属性设置为 true。

就这样 ：）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-03T21:17:14.273

根据@Luiggi Mendoza 的想法，我有点卡住了......

我在我的 jsf 中添加了以下内容：

```
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:p="http://primefaces.org/ui"
    xmlns:f="http://java.sun.com/jsf/core"
    template="/templates/layoutUser.xhtml">

    <ui:define name="content">

        <p:growl widgetVar="growl" showDetail="true" />

        <h:form>
        Fanciest Page ever          
        </h:form>

        <p:socket onMessage="handleMessage" channel="/notifications" />

        <script type="text/javascript">
            function handleMessage(facesmessage) {
                facesmessage.severity = 'info';

                growl.show([ facesmessage ]);
            }
        </script>

    </ui:define>
</ui:composition> 
```

我在会话范围的 bean 中调用 TimerTask：

```
@PostConstruct
    public void initLazyModel() {
        getTimerMB().startTimer(this);
        System.out.println("Timer started");

    } 
```

我的计时器看起来像这样：

```
@ManagedBean(name = "timerMB")
@SessionScoped
public class TimerManagedBean extends TimerTask {

    private int counter;
    private Timer timer;
    private ArtikelManagedBean artikelMB;

    public void startTimer(ArtikelManagedBean artikelMB){
        this.artikelMB = artikelMB;
        this.timer = new Timer(); 
        Calendar date = Calendar.getInstance();  
        date.set(2012, 3, 28, 21, 28);
        //execute every 10 seconds  
        timer.schedule(this, date.getTime(), 10000);
    }

    @PreDestroy
    public void cancelTimer(){
        this.timer.cancel();
        System.out.println("UpdateTimer cancelled!");
    }

    @Override
    public void run() {
        counter++;
        System.out.println("Upadatetimer started: "+ new Date()+" ("+counter+")");
            PushContext pushContext = PushContextFactory.getDefault()
            .getPushContext();

    pushContext.push("/notifications", new FacesMessage("Simple",
            "Test"));
    }
} 
```

嗯......什么都没有发生，但应该发生什么，不是吗？它应该给我一个“简单”和“测试”的通知，我猜......

**更新：**

谢谢路易吉·门多萨！以一种非常简单的方式管理它以显示我的对话框（称为服务器端）。我将以下 Servlet 添加到我的 web.xml 中。

```
<servlet>
    <servlet-name>Push Servlet</servlet-name>
    <servlet-class>org.primefaces.push.PushServlet</servlet-class>

    <init-param>
    <param-name>org.atmosphere.useBlocking</param-name>
    <param-value>true</param-value>
</init-param>

    <init-param>
        <param-name>org.atmosphere.cpr.sessionSupport</param-name>
        <param-value>true</param-value>
    </init-param>
    <load-on-startup>1</load-on-startup>
</servlet>

<servlet-mapping>
    <servlet-name>Push Servlet</servlet-name>
    <url-pattern>/primepush/*</url-pattern>
</servlet-mapping> 
```

# codeigniter - 从数据库生成 XML 文件 - Codeigniter

> ID：13210781
> 
> 赞同：0
> 
> 时间：2012-11-03T15:51:21.137
> 
> 标签：codeigniter

谁能解释我如何使用codeigniter从数据库创建xml文件。

我喜欢动态创建简单的xml文件...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T16:21:51.993

看看[Databse utils 类](http://ellislab.com/codeigniter/user-guide/database/utilities.html#xml)，它有一个`xml_from_result`方法会尝试从任何数据库结果对象生成 xml。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-03T16:23:52.117

检查这个 CI 数据库实用程序类将帮助您生成 xml

[数据库实用程序类](http://codeigniter.com/user_guide/database/utilities.html#xml)

# sql-server - SQL Server 2008 R2：一段时间后拒绝连接

> ID：13210783
> 
> 赞同：5
> 
> 时间：2012-11-03T15:51:32.537
> 
> 标签：sql-server

首先，我想告诉您，我正在使用的程序已经编译，我无法查看源代码。

所以，这是我的问题：

应用程序成功打开了大约 31 个与特定数据库的连接。当它尝试打开第 32 个连接时，所有连接都开始关闭，包括之前的 31 个连接。

老实说，我不知道为什么这个应用程序需要对同一个 2-3 个表打开这么多连接，但是在所有连接关闭之后，应用程序也会关闭。

> 17:41:38 004db680 驱动程序={SQL Server}；服务器=192.168.1.8:1433；UID=用户；密码=密码；数据库=数据库
> 
> 17:41:38 004db680 08001 0000000e [Microsoft][ODBC SQL Server Driver][DBNETLIB]无效连接。0x00000000 17:41:38 004db680 01000 0000000e [Microsoft][ODBC SQL Server 驱动程序][DBNETLIB]ConnectionOpen (ParseConnectParams())。0x00000000

那是该应用程序的日志输出。

一些附加信息：

*   禁用 SYN 攻击保护的同样问题
*   数据库最大连接数为 30k+

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T04:46:39.963

在您的数据库上运行此语句以查看您是否超过了最大连接数：

`SELECT @@MAX_CONNECTIONS`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T06:07:42.290

有几件事浮现在脑海

1.  在应用程序执行之前和期间运行 SQL Profiler。你看到什么输出？也许发生了死锁？

2.  这以前是否有效并且最近停止工作？如果是这样，您是否对 SQL 应用了服务包或其他修复程序？

3.  如果您的应用程序是多线程的，并且每个线程执行 X 次连接，则可以尝试将应用程序限制为在单个内核而不是多个内核上运行。这是一个肮脏的黑客，但它可能会有所帮助。

4.  如果您打开 32 个命令提示符窗口，然后使用 osql 或 sqlcmd 实用程序打开 32 个到 SQL 的连接会怎样？听起来很傻，但如果以上没有结果，至少你可以看看它是否仅仅是连接的数量，或者是否还有其他事情正在进行中。其他东西可能是

    *   数据相关（见#1）；或者
    *   驱动程序相关（在应用程序内）。鉴于它使用的是 ODBC，而且它可能很旧（您没有说正在运行什么 Windows 版本、SQL 版本等），您可以尝试更新 MDAC（MIcrosoft 数据访问组件）吗？

# python - 使用 python with-statement 进行柯里化？

> ID：13210785
> 
> 赞同：3
> 
> 时间：2012-11-03T15:51:35.903
> 
> 标签：python, currying, with-statement

我不确定这是否是“良好的 python 实践”，但是否有可能，例如，定义一个可以执行以下操作的自定义文件对象：

```
myfile = myopen('myfile.txt')
with myfile:
    write('Hello World!') #notice we don't put "myfile.write(..)" here! 
```

即，文件上下文创建了一个*函数*“write()”，这样我们就不必键入 myfile.write(..) 等。它可以节省键入并在某些情况下使目的更清晰。例如：

```
myboard = ChessBoard()
with ChessBoard():
    make_move("e4")
    make_move("e5")
    give_up() 
```

与

```
myboard = ChessBoard()
with ChessBoard():
    make_move("e4",board=myboard)
    make_move("e5",board=myboard)
    give_up(board=myboard) 
```

问题是：我应该这样做吗？我该怎么做？我猜我必须以某种方式修改 globals()-dict，但这似乎是个坏主意..

编辑：好的，谢谢！我得到了多个好的答案，建议我不要这样做。所以我不会这样做:o)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-03T16:08:45.213

这不是上下文管理器的用途，正如已经指出的那样，我击败了“显式优于隐式”原则。使它工作的唯一方法是必须围绕 Python 的组合语义工作，这是它的强项之一。如果只有一个方法需要多次调用，你可以做些什么来节省打字：

```
move = ChessBoard().make_move
move("e4")
move("e5") 
```

或者使用多种这样的方法：

```
board = ChessBoard()
move = board.make_move
give_up = board.give_up
# call methods 
```

（在 FP 术语中，这实际上是部分应用，而不是柯里化。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-03T15:55:21.627

你会认为你需要修改`globals()`. 但是，如果您在与使用它的模块不同的模块中定义了上下文管理器，那么您将使用定义它的模块的全局变量。不是使用它的模块。因此，您需要在`__builtin__`命名空间（内置函数所在的位置）中定义方法。这当然可以做到，但它让我觉得这是一个更糟糕的主意，*特别是*如果你想将它与任意对象一起使用。*也许*如果您以某种方式破坏了名称（例如，添加前导下划线）。但即便如此，如果你嵌套了`with`语句怎么办？

您正在寻找 Python 的`with`语句类似于 Pascal 或 Visual Basic 的语句，但它根本不是一回事。也就是说，一个与 Pascal/VB`with`语句等效的 Python 将是一件很可爱的事情。它只是不能被调用`with`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-03T15:57:28.637

*首先，这根本*不是一个好主意。显式胜于隐式——通过明确提及板，读者（可能是几周后的你！）可以立即知道正在操作哪个板。此外，没有必要。您可以通过其他方式获得更方便的语法：例如，将函数设置为单个对象的方法。并删除无意义的上下文管理器（它应该做什么？您已经事先创建了一个对象！）。

为此，您需要全局状态，但不是`globals`特别需要。比如说，一个全局（确切地说是模块级）对象堆栈，上下文管理器推送和弹出对象，各个函数查看该堆栈的顶部。如果您知道自己的东西，实际上实施起来并不难，但正如我之前所说，没有理由这样做。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-03T16:21:12.443

一种（至少半疯狂的）方法是这样的：

```
@contextmanager
def export(obj, *atts):
    yield [getattr(obj, a) for a in atts] 
```

进而：

```
class X:
   def foo...
   def bar...

with export(some_x, 'foo', 'bar') as (foo, bar):
      foo() <-- some_x.foo
      bar() <-- some_x.bar 
```

当然，就像任何其他类似的解决方案一样，这在现实生活中是零意义的。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-03T16:27:19.357

正如其他人所提到的，这可能是一个非常糟糕的主意，但我确实看到了一些可能可行的有限案例（可能是临时 DSL）。

```
class ChessBoard(object):
    def __init__(self, filename):
        self.filename = filename
    def __enter__(self):
        self.handle = open(self.filename, 'w')
        globals()['move'] = self.move
        globals()['give_up'] = self.give_up
    def __exit__(self, type, value, traceback):
        self.handle.close()
    def move(self, move):
        self.handle.write(move + '\n')
    def give_up(self):
        self.handle.write('resign' + '\n')

with ChessBoard('chess.txt'):
    move('e4')
    move('e5')
    give_up() 
```

# linux - 腻子连接速度快，Ubuntu（linux）终端不行

> ID：13210791
> 
> 赞同：1
> 
> 时间：2012-11-03T15:52:03.973
> 
> 标签：linux, ubuntu, ssh, putty

当我通过 Windows 使用 PUTTY 在我的云中连接时，最多在大约 3 秒内建立连接。

当我通过 Ubuntu 连接时，它是“加载、加载、加载”……大约 10 秒后要求输入密码，然后再等待 2 秒，它就会连接。

这是为什么？

**[编辑]**
**[调试] -v**

```
debug1: ssh_rsa_verify: signature correct
debug1: SSH2_MSG_NEWKEYS sent
debug1: expecting SSH2_MSG_NEWKEYS
debug1: SSH2_MSG_NEWKEYS received
debug1: Roaming not allowed by server
debug1: SSH2_MSG_SERVICE_REQUEST sent
debug1: SSH2_MSG_SERVICE_ACCEPT received
debug1: Authentications that can continue: publickey,gssapi-keyex,gssapi-with-mic,password
debug1: Next authentication method: gssapi-keyex
debug1: No valid Key exchange context
debug1: Next authentication method: gssapi-with-mic
debug1: Unspecified GSS failure.  Minor code may provide more information
Cannot determine realm for numeric host address

debug1: Unspecified GSS failure.  Minor code may provide more information
Cannot determine realm for numeric host address

debug1: Unspecified GSS failure.  Minor code may provide more information

debug1: Unspecified GSS failure.  Minor code may provide more information
Cannot determine realm for numeric host address

debug1: Next authentication method: publickey
debug1: Offering RSA public key: /home/patrick/.ssh/id_rsa
debug1: Authentications that can continue: publickey,gssapi-keyex,gssapi-with-mic,password
debug1: Trying private key: /home/patrick/.ssh/id_dsa
debug1: Trying private key: /home/patrick/.ssh/id_ecdsa
debug1: Next authentication method: password 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-03T16:21:14.677

尝试通过 ip 而不是主机名连接。当名称解析时间过长时，有时会出现延迟。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-04T14:59:17.083

问题解决了！

```
GSSAPIAuthentication no 
```

# html - SVG 标签占用了额外的空间

> ID：13210793
> 
> 赞同：5
> 
> 时间：2012-11-03T15:52:09.480
> 
> 标签：html, node.js, svg, mustache

所以我对 HTML5 中的 SVG 元素有一个奇怪的大小问题。它占用的空间比我想象的要多得多。图像中的每个小矩形都是一个矩形元素，宽度和高度为“20”。

SVG 元素的高度和宽度应为 20*10 = 200，但尺寸应为 680x508。

您可以在此处查看已检查的 svg 元素 -> [http://i.stack.imgur.com/xrofn.png](http://i.stack.imgur.com/xrofn.png)

HTML 看起来像这样：

```
 <svg>
    <rect x='0' y='0' height='20' width='20' stroke='black' stroke-width=''/>
    <rect x='0' y='20' height='20' width='20' stroke='black' stroke-width=''/>
    <rect x='0' y='40' height='20' width='20' stroke='black' stroke-width=''/>
    ...
    </svg> 
```

需要注意的是，我运行的是 node.js 和 mustache.js。

编辑：显然SVG在不确定宽度/高度时会做一些事情。手动设置可以解决问题。

```
 <svg height="200" width="200"> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-03T16:11:56.850

SVG 视口似乎是由父元素决定的。

[http://www.w3.org/TR/SVG/coords.html](http://www.w3.org/TR/SVG/coords.html)指出

> SVG 用户代理与其父用户代理协商以确定 SVG 用户代理可以呈现文档的视口。

您可以使用宽度和高度指定 SVG 视口的大小

```
<svg xmlns="http://www.w3.org/2000/svg" version="1.1" width="200" height="200">
    <rect x='0' y='0' height='20' width='20' stroke='black' stroke-width=''/>
    <rect x='0' y='20' height='20' width='20' stroke='black' stroke-width=''/>
    <rect x='0' y='40' height='20' width='20' stroke='black' stroke-width=''/>
    ...
</svg> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T09:36:37.840

<svg> 元素的 width 和 height 属性的默认值为 100%，这意味着 SVG 视口取决于它所在的容器。通常这是由 CSS 确定的。

如果需要，您可以设置宽度和高度属性，但也可以仅使用 CSS，如[本例所示](http://xn--dahlstrm-t4a.net/svg/html/inline-transition-size.html)。

# mysql - 处理您的 settings.json 文件时出错：未定义进程

> ID：13210795
> 
> 赞同：0
> 
> 时间：2012-11-03T15:52:24.020
> 
> 标签：mysql, node.js, etherpad, vmc

当我推送我的etherpad代码时，它说

[31m[2012-11-03 15:14:00.102] [ERROR] 控制台 - [39mThere was an error processing your settings.json file: process is not defined

这个关键代码在下面

```
/*
  This file must be valid JSON. But comments are allowed

  Please edit settings.json, not settings.json.template
*/
{
  //Ip and port which etherpad should bind at
  "ip": process.env.VCAP_APP_HOST,
  "port" : process.env.VCAP_APP_POR,

  //The Type of the database. You can choose between dirty, postgres, sqlite and mysql
  //You shouldn't use "dirty" for for anything else than testing or development
  /*"dbType" : "dirty",*/
  //the database specific settings
  /*"dbSettings" : {
                   "filename" : "var/dirty.db"
                 },*/

  /* An Example of MySQL Configuration */
   "dbType" : "mysql",
   "dbSettings" : {
                    "user"    : process.env.VCAP_SERVICES["etherpadDB"][0]["credentials"]["user"], 
                    "host"    : process.env.VCAP_SERVICES["etherpadDB"][0]["host"], 
                    "password": process.env.VCAP_SERVICES["etherpadDB"][0]["password"], 
                    "database": process.env.VCAP_SERVICES["etherpadDB"][0]["name"]
                  },

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-03T16:28:22.163

这肯定是因为您的文件不是有效的 JSON。JSON 没有“进程”的值类型。如果您使用实际值而不是引用重写文件，它应该可以工作。

所以而不是：

```
"ip": process.env.VCAP_APP_HOST 
```

使用引用变量的值，如：

```
"ip": "10.0.0.1" 
```

有关如何编写 JSON，请参阅[http://www.json.org/ 。](http://www.json.org/)

**编辑**

由于您需要从 Cloud Foundry 保留在流程环境中的变量更新 JSON 配置文件的内容，因此`settings.json`每次启动 EtherPad Lite 时都需要修改 EtherPad Lite 安装以重建文件。

请参见：

[https://github.com/raisch/sandbox/blob/master/EtherPadLite-CloudFoundry/buildConfigFile.js](https://github.com/raisch/sandbox/blob/master/EtherPadLite-CloudFoundry/buildConfigFile.js)

有关如何更新 EtherPad Lite 的说明。

请注意，由于我在 Cloud Foundry 没有帐户，因此我无法就地进行测试。但是，假设流程环境包含您在示例中引用的值，这将在您`settings.json`每次启动 EtherPad Lite 实例时创建一个有效文件。

# assembly - 谁能推荐一本质量好的汇编语言基础教材？

> ID：13210805
> 
> 赞同：1
> 
> 时间：2012-11-03T15:53:27.323
> 
> 标签：assembly

谁能推荐一本质量好的汇编语言基础教材？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-03T15:56:49.433

[汇编语言编程的艺术](http://cs.smith.edu/~thiebaut/ArtOfAssembly/artofasm.html)

[汇编语言循序渐进：使用 DOS 和 Linux 进行编程](https://rads.stackoverflow.com/amzn/click/com/0471375233)

[精通 Turbo 汇编器](https://rads.stackoverflow.com/amzn/click/com/0672484358)

已经得到答案： [https ://stackoverflow.com/questions/199679/good-beginners-books-for-assembly-languages](https://stackoverflow.com/questions/199679/good-beginners-books-for-assembly-languages)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-03T15:58:58.460

假设你真的做了练习，我发现的最好的是 Knuth “计算机编程的艺术”，第一卷。1、《基本算法》。

# objective-c - iOS – 每次在模拟器中运行应用程序时如何运行 OCUnit 测试

> ID：13210813
> 
> 赞同：0
> 
> 时间：2012-11-03T15:54:09.247
> 
> 标签：objective-c, ios, cocoa-touch, ocunit

每次我选择在 Xcode 中的模拟器上运行我的应用程序时，如何配置以便运行 OCUnit 测试？(Xcode 4.5.1)

如果我通过`Cmd`+ `U``，我的应用程序可以正常运行测试，但当我选择运行我的应用程序时不会。然后我得到这个警告：

> /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/Tools/Tools/RunPlatformUnitTests:81：警告：跳过测试；iPhoneSimulator 平台目前不支持应用程序托管测试（TEST_HOST 集）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-03T16:13:09.327

看看这个[答案](https://stackoverflow.com/a/7231882/563795)；它描述了如何在模拟器中每次运行应用程序时配置 Xcode 来构建测试目标。

# python - Sublime Text 在 python 中对正则表达式的语法高亮泄漏到周围的代码中

> ID：13210816
> 
> 赞同：5
> 
> 时间：2012-11-03T15:54:24.373
> 
> 标签：python, sublimetext2, color-scheme

我对通常应该是所有编辑器的崇高文本有疑问。当我有这样的正则表达式时。

```
listRegex = re.findall(r'[*][[][[].*', testString) 
```

正则表达式之后的所有文本都将错误地突出显示，因为`[[]`, 特别是`[`没有右括号。虽然这个正则表达式的意图是正确的，但编辑器并不知道这一点。

这只是我不知道如何处理的烦恼。有人知道怎么修这个东西吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-03T16:39:26.727

虽然它并不能真正回答您的问题，但您可以使用不同的正则表达式：

```
listRegex = re.findall(r'\*\[\[.*', testString) 
```

或者您可以防止任何正则表达式高亮：

```
listRegex = re.findall(R'[*][[][[].*', testString) 
```

* * *

### 适当的解决方案

在第 266 行添加以下内容`.../Packages/Python/Regular Expressions (Python).tmLanguage`（第一个和第三个块是上下文）：

```
<key>name</key>
<string>constant.other.character-class.set.regexp</string>
<key>patterns</key>
<array> 
```

```
 <dict>
        <key>match</key>
        <string>\[</string>
    </dict> 
```

```
 <dict>
        <key>include</key>
        <string>#character-class</string>
    </dict> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-03T16:40:07.647

这是 Sublime Text 的 Python Syntax Highlighter 的一个已知错误，它只影响原始字符串。

顺便说一句，在正则表达式中，您可以通过两种方式匹配特殊字符：

1.  将其括在方括号中：`[[]`

2.  用反斜杠转义它：`\[`

第二个是首选，因此您可以将代码更改为：

```
listRegex = re.findall(r'\*\[\[.*', testString) 
```

# c# - 从标签 Linq 获取属性值到 XML

> ID：13210817
> 
> 赞同：0
> 
> 时间：2012-11-03T15:54:24.890
> 
> 标签：c#, xml, linq

我正在使用 Linq 获取一些 xml 值，但是这次我想从标签中获取“href”属性的内容，如下所示：

```
<link rel="alternate" type="text/html" href="Value I want to retrieve"/>
<link rel="alternate" type="text/html" href="Another Value want to retrieve"/> 
```

任何线索如何做到这一点？

我能够获取标签的值

```
<title>1st title</title>
<title>2nd title</title> 
```

这边走：

```
IEnumerable<XElement> item = document.Descendants(xmlns + "title");
// to print use: item.ElementAt<XElement>(0).Value; 
```

但我未能从`href`属性中检索到值，感谢任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T15:57:40.660

这个怎么样：

```
IEnumerable<string> links = document.Descendants("link")
    .Select(element => element.Attribute("href").Value); 
```

... 要不就：

```
var links = document.Descendants("link")
    .Attributes("href")
    .Select(element => element.Value); 
```

# android - 从首选项以编程方式更改 ActionBar 背景颜色

> ID：13210819
> 
> 赞同：1
> 
> 时间：2012-11-03T15:54:32.053
> 
> 标签：android, android-actionbar, color-picker

我在我的应用程序的设置中添加了一个颜色选择器首选项，以便用户可以选择`ActionBar`（我正在使用`ActionBarSherlock`）的背景颜色。理想情况下，我想在不让用户重新启动应用程序的情况下更改颜色，我假设这意味着添加代码以更改`onResume`每个`Activity`and中的颜色`Fragment`。但是，当我第一次点击一个活动时，颜色变化会起作用，但如果我回到它，无论是使用设备上的后退按钮还是`ActionBar`本身，颜色似乎都没有设置并且是透明的。

这是我用来设置背景颜色的代码。我尝试将其添加`onCreate`到`onResume`：

```
public class MyActivity extends SherlockActivity {

   @Override
    public void onCreate(final Bundle icicle) 
    {
        super.onCreate(icicle);

        getSupportActionBar().setDisplayHomeAsUpEnabled(true);        
        getSupportActionBar().setBackgroundDrawable(new ColorDrawable(PreferenceManager.getDefaultSharedPreferences(this).getInt("app_color", getResources().getColor(R.color.app_color))));
    }

    @Override
    public void onResume()
    { 
        super.onResume();

        getSupportActionBar().setBackgroundDrawable(new ColorDrawable(PreferenceManager.getDefaultSharedPreferences(this).getInt("app_color", getResources().getColor(R.color.app_color))));
    }
} 
```

`app_color`是颜色选择器首选项的名称，还有一个默认颜色，存储在`colors`值文件中。我也有一个`TextView`没有相同问题并保留颜色的页脚。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T16:18:53.113

我有同样的问题，我想出的可能不是最好的解决方案，但至少暂时对我有用。如果主题已更改（在您的应用程序中，您将检查背景颜色是否已更改），我会使用以下方法检查 onRestart，如果是，我将按照以下代码片段启动活动。在我的应用程序中，我将此方法放在应用程序类中，因为我在每个活动中都使用它。

```
public static void restartOnThemeSwitch(Activity act) {

    String currentTheme = getThemeName(act.getTheme());

    String prefTheme = (prefs.getString(THEME, "dark"));

    if (currentTheme.equalsIgnoreCase(prefTheme) == false) {

        Intent it = act.getIntent();
        it.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);

        act.startActivity(it);

    }

} 
```

# c - 我的退出（状态）与 setjmp 和 longjmp

> ID：13210821
> 
> 赞同：2
> 
> 时间：2012-11-03T15:54:50.103
> 
> 标签：c, exit, setjmp

问题是 - 我必须使用 setjmp 和 longjmp 实现我自己的退出（状态）。也许有人可以指点一下？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-03T16:25:15.537

我现在想到的唯一解决方案是提前调用`setjmp`in `main`，然后创建一个`MyExit`函数，该函数`longjmp`对`setjmp`in`main`执行 a 并执行 a`return`一些值（从`longjmp`调用中提供）。

# python - 如何在 wxPython 中将 StatusBar 中的文本向右对齐？

> ID：13210822
> 
> 赞同：5
> 
> 时间：2012-11-03T15:54:54.643
> 
> 标签：python, wxpython

我想实现一个有 2 个字段的状态栏。第一个左对齐，第二个右对齐。我想要的插图：

```
| |
| |
==================================================== ================================
| 一些状态文本。诉 1.0.32 |

```

我当前的代码：

```
self.CreateStatusBar(2)
self.SetStatusWidths([-1, -1]) 
```

但是右边的字段是左对齐的，所以它看起来像这样：

```
| |
| |
==================================================== ================================
| 一些状态文本。诉 1.0.32 |

```

有没有办法让正确字段中的文本与右侧对齐？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-03T20:24:14.773

好的，我已经解决了这个问题（尽管它感觉像是一个 hack。）我创建了一个自定义工具栏，它定义了两个字段。左侧字段可以像正常一样进行控制，右侧字段包含一个`StaticText`控件，其中包含版本号，可以手动定位。定位文本的代码是特定于平台的，因为它在 Windows 上看起来有点不同。以下是一些截图：

Windows 7的：

![Windows 7的](../Images/44b6323a3331f3f8410dd8aed07e06d8.png)

OSX 10.8.1 山狮：

![操作系统](../Images/d6cad1c5229a0ded4f373c6991c41770.png)

下面是自定义状态栏的代码：

```
class CustomStatusBar(wx.StatusBar):
    """A custom status bar for displaying the application version in the bottom
    right corner."""
    def __init__(self, parent):
        wx.StatusBar.__init__(self, parent, -1)

        self.SetFieldsCount(2)
        self.SetStatusWidths([-1, -1])

        # Set up the version label.
        self.version_label = wx.StaticText(self, -1, 'Version: ' + VERSION)
        self.reposition_version_label()

        # Listen to the resize event.
        self.Bind(wx.EVT_SIZE, self.on_resize)

    def on_resize(self, event):
        self.reposition_version_label()

    def reposition_version_label(self):
        # Get the rect of the second field.
        field_rect = self.GetFieldRect(1)
        label_rect = self.version_label.GetRect()

        # Reduce the width of the field rect to the width of the label rect and
        # increase it's x value by the same about. This will result in it being
        # right aligned.
        width_diff = field_rect.width - label_rect.width

        field_rect.width = label_rect.width
        field_rect.x += width_diff

        # On windows, the text is a little too high up, so increase the Y value
        # a little.
        if sys.platform == 'win32':
            field_rect.y += 3

        # Set the resulting rect to the label.
        self.version_label.SetRect(field_rect) 
```

此代码在 my`Frame`的构造函数中创建和放置状态栏：

```
self.statusbar = CustomStatusBar(self)
self.SetStatusBar(self.statusbar) 
```

我将此功能添加到我的框架中以便于状态更新：

```
def set_status_text(text):
    self.statusbar.SetStatusText(text, 0) 
```

我希望这可以帮助其他人。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-03T18:17:41.247

您可以尝试使用制表符：

```
self.SetStatusText(0,"\tCentered")
self.SetStatusText(1,"\t\tRight Aligned") 
```

这适用于 Windows，但我不确定它是否在其他 wxWidgets 发行版中实现。您需要创建 wx.StatusBar`style=0`以禁用右下角的夹点。文本对齐不考虑夹点，它将被切断。如果这不起作用，您可以通过将右侧面板设置为静态大小来模拟正确的文本对齐方式：

```
self.SetStatusWidths([-1, 100]) 
```

但上面的文字将保持左对齐。要使其上的文本看起来正确对齐，您必须用空格填充文本。请记住，不同的系统和用户可能使用不同的字体，因此间距可能不准确。

**附录：**对齐文本`\t`实际上是本机 Windows 状态栏控件的一项功能。为了让它在其他操作系统上工作，它们的本机控件或 wxWidgets 必须实现该行为。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-07-02T07:00:03.593

hacky 版本并不完全适合我正在寻找的东西。我发现根据字符串的像素大小设置静态宽度大小对我来说非常有用。很好地适应环境并且可以动态改变。这是用 Python 3 和 wxPython Phoenix 完成的，所以这个方法可能以前不可用。

这是一个简单的版本。

```
import wx

class MainWindow(wx.Frame):
    def __init__(self, parent):
        wx.Frame.__init__(self, parent)

        version = "v. 1.0.32 (2012-11-03)"
        # Returns a Size object of the pixel dimensions of a string
        version_size = wx.Window.GetTextExtent(self, version)

        # Create a status bar with two sections
        self.CreateStatusBar(2)
        # Set the left side to a negative number indicating it's fluid width
        # The right side will be the exact size of the version string
        self.SetStatusWidths([-1, version_size.width])
        # Set the left side of the status bar to some text. 0 is first section
        self.SetStatusText("left status bar text", 0)
        # Set right side to version number.  1 is second section
        self.SetStatusText(version, 1)

        self.Show()

app = wx.App()
frame = MainWindow(None)
app.MainLoop() 
```

为了展示它是如何动态更新的，这里有一个更复杂的版本，带有线程随机更新。

```
import wx
import time
import random
import threading

class MainWindow(wx.Frame):
    def __init__(self, parent):
        wx.Frame.__init__(self, parent)

        version = "v. 1.0.32 (2012-11-03)"
        # Returns a Size object of the pixel dimensions of a string
        version_size = wx.Window.GetTextExtent(self, version)

        # Create a status bar with two section
        self.CreateStatusBar(2)
        # Set the left side to a negative number indicating it's fluid width
        # The right side will be the exact size of the version string
        self.SetStatusWidths([-1, version_size.width])
        # Set the left side of the status bar to some text. 0 is first section
        self.SetStatusText("left status bar text", 0)
        # Set right side to version number.  1 is second section
        self.SetStatusText(version, 1)

        self.Show()

        # Thread to update status bar with causing the GUI to hang
        run_version_updates = threading.Thread(target=self.thread_version_updating)
        run_version_updates.start()

    def thread_version_updating(self):
        for i in range(10):
            time.sleep(1)
            # Create a random string of 1-20 characters containing only "ABC123"
            random_string = "".join(random.choice("ABC123") for _ in range(random.randrange(1,20)))
            self.update_version(random_string)

    def update_version(self, version):
        # Get width of string, set status bar width, then update the text
        size = wx.Window.GetTextExtent(self, version)
        self.SetStatusWidths([-1, size.width])
        self.SetStatusText(version, 1)

app = wx.App()
frame = MainWindow(None)
app.MainLoop() 
```

我只有一个操作系统，但这是不同 Windows 7 主题的样子。

赢得 7 航空
![在此处输入图像描述](../Images/43ee65ad8c852ca5c4657e2bb2d12456.png)

赢 7 经典
![在此处输入图像描述](../Images/abdda4cb57c5c6adced57d339c29c212.png)

# ruby-on-rails - ruby on rails 页面上的多个联系表单出错

> ID：13210825
> 
> 赞同：0
> 
> 时间：2012-11-03T15:55:17.950
> 
> 标签：ruby-on-rails, heroku

我有这个[投资组合网站](http://salty-temple-9504.herokuapp.com/pages/contact)，第一个标签的联系表格不起作用，而第二个标签的表格起作用。我怀疑这可能是路由问题。这是我的路由文件中的内容：

```
Inspired::Application.routes.draw do
  get "pages/home"
  get "pages/about_us"
  get "pages/web_design"
  get "pages/portfolio"
  get "pages/contact"
  get "pages/new"

  match 'contact'    => 'pages#new',       :as => 'contact',    :via => :get
  match 'contact'    => 'pages#create',    :as => 'contact',    :via => :post
  match 'contactrfp' => 'pages#createrfp', :as => 'contactrfp', :via => :post

  root :to => 'pages#home' 
```

这是控制器的外观：

```
def contact
  @message    = Message.new
  @messagerfp = Messagerfp.new
end

def create
  @message = Message.new(params[:message])
  if @message.valid?
    NotificationsMailer.new_message(@message).deliver
    redirect_to(root_path, :notice => "Message was successfully sent.")
  else
    #flash.now.alert = "Please fill all fields."
    #render :new
  end
end

def createrfp
  @messagerfp = Messagerfp.new(params[:messagerfp])
  if @messagerfp.valid?
    NotificationsMailer.new_messagerfp(@messagerfp).deliver
    redirect_to(root_path, :notice => "Message was successfully sent.")
  else
    #flash.now.alert = "Please fill all fields."
    #render :new
  end
end 
```

让我知道您是否需要更多信息。我正在客户端进行所有验证，包括使用 jQuery 的实际提交提前谢谢！

这是视图：

```
 <script type="text/javascript">
                  $(document).ready(function() {
                  $('#navhorisontell ul li a:eq(4)').addClass('selected');

                  /* START TAB STUFF */

                    $(".tab_content").hide(); //Hide all content
                    $("ul.tabs li:first").addClass("active").show(); //Activate first tab
                    $(".tab_content:first").show(); //Show first tab content

                    //On Click Event
                    $("ul.tabs li").click(function() {

                        $("ul.tabs li").removeClass("active"); //Remove any "active" class
                        $(this).addClass("active"); //Add "active" class to selected tab
                        $(".tab_content").hide(); //Hide all tab content

                        var activeTab = $(this).find("a").attr("href"); //Find the href attribute value to identify the active tab + content
                        $(activeTab).fadeIn(); //Fade in the active ID content
                        return false;
                    });

                    /*END TAB STUFF */

                    var name = $("#contactname").val();
                var email = $("#email").val();
                var message = $("#subject").val();
                var age = $("#message").val();
                   var datastr = 'name=' + name + 'email=' + email + '&subject=' + message;

                    allclear = null;

                  $('#submit24').click(function(){

                  allclear = true;
                  $('.errors').html('');
                  if($('#name').val() == ''){
                    $('.errors').append('<p style="color:#cc0000; font-weight:bold;"><span class="sup">*</span>Please fill in your name.</p>');
                    allclear = false;
                  }

                    if($('#email').val() == ''){
                    $('.errors').append('<p style="color:#cc0000; font-weight:bold;"><span class="sup">*</span>Please fill in your email address.</p>');
                    allclear = false;
                  }

                    if($('#location').val() == ''){
                    $('.errors').append('<p style="color:#cc0000; font-weight:bold;"><span class="sup">*</span>Please fill in your location.</p>');
                    allclear = false;
                  }

                    if($('#howfound').val() == ''){
                    $('.errors').append('<p style="color:#cc0000; font-weight:bold;"><span class="sup">*</span>Please fill in how you found us.</p>');
                    allclear = false;
                  }

                    if(allclear == false){
                        window.location.href = '#col1';
                    }

                  if(allclear == true){

                  $('.clear').html('<br /><img src="/assets/ajax-loader.gif"/>');
                  $('.rfp').submit();

                  function allcomplete(){
                scroll(0,0);
                $('.errors').html('');
                $("#tab1").html("<p>Thanks for your inquiry. We'll contact you in 24-48 hours regarding your request! </p>");
                }
                setTimeout(allcomplete,1000);
                     //alert('hi');

                }

                /*
                function sendemail(){
                $.ajax({
                type: "POST",
                url: "/assets/mail.php",
                //data: ({email : $("#email").val(), message: 'Name: ' + $("#name").val() + '\r' + 'email: ' + $('#email').val() + '\r' + 'phone: ' + $('#phone').val() + '\r' + 'Location: ' + $('#location').val() + '\r' + 'Business Name: ' + $('#bizname').val() + '\r' + 'Business Description: ' + $('#bizdesc').val() + '\r' + 'phone: ' + $('#phone').val()}),
                data: ({email : $("#email").val(), message: 'Name: ' + $("#name").val() + '\r' + 'email: ' + $('#email').val() + '\r' + 'phone: ' + $('#phone').val() + '\r' + 'Location: ' + $('#location').val() + '\r' + 'Business Name: ' + $('#bizname').val() + '\r' + 'Business Description: ' + $('#bizdesc').val() + '\r' + 'Have website: ' + $('#website').val() + '\r' + 'Services interested in: ' + $('#services').val() + '\r' + 'Additional details: ' + $('#adddetails').val() + '\r' + 'Budget: ' + $('#budget').val() + '\r' + 'How did you find us: ' + $('#howfound').val()}),
                cache: false,
                 error: function () {

                             //alert('did not go thru');
                                $('.errors').append('<p style="color:#cc0000; font-weight:bold;"><span class="sup"></span>Oops, there seems to be a problem sending in your request. Please try again later or contact us at 312.612.0696</p>');
                            },
                success: function(html){
                //$("#response").fadeIn("slow");
                scroll(0,0);
                $('.errors').html('');
                $("#tab1").html("<p>Thanks for your inquiry. We'll contact you in 24-48 hours regarding your request! </p>");
                //setTimeout('$("#response").fadeOut("slow")',2000);
                //alert('mail sent');
                }
                });
                }
                */
                    });

                    //FORM 2
                    //FORM 2
                    //FORM 2
                    //FORM 2
                    //FORM 2
                    //FORM 2
                    //FORM 2
                    //FORM 2
                    //FORM 2
                    //FORM 2
                    //FORM 2
                    //FORM 2
                    //FORM 2

                      $('#submit2').click(function(){

                  allclear2 = true;
                  $('.errors2').html('');

                  if($('#name2').val() == ''){
                    $('.errors2').append('<p style="color:#cc0000; font-weight:bold;"><span class="sup">*</span>Please fill in your name.</p>');
                    allclear2 = false;
                  }

                    if($('#email2').val() == ''){
                    $('.errors2').append('<p style="color:#cc0000; font-weight:bold;"><span class="sup">*</span>Please fill in your email address.</p>');
                    allclear2 = false;
                  }

                    if($('#bizdesc2').val() == ''){
                    $('.errors2').append('<p style="color:#cc0000; font-weight:bold;"><span class="sup">*</span>Please fill in a message.</p>');
                    allclear2 = false;
                  }

                    if(allclear2 == false){
                        window.location.href = '#col2';
                    }

                  if(allclear2 == true){
                  //alert('hi');
                  $('.clear2').html('<br /><img src="/assets/ajax-loader.gif"/>');
                  $('.rfp2').submit();

                  function allcomplete2(){
                  scroll(0,0);
                $('.errors2').html('');
                $("#tab2").html("<p>Successfully sent. Thanks for your inquiry! </p>");
                }
                setTimeout(allcomplete2,1000);

                }

                    });

                  });
                </script>

                <!--START CONTENT -->

                <div id="col1">

                <!-- CONTACT FORM -->

                <p> <span class="opening">Get in Touch!</span></p>

                <ul class="tabs">
                    <li><a href="#tab1">Request for Proposal</a></li>
                    <li><a href="#tab2">Other Inquiries</a></li>
                    <li><a href="#tab3">Refer a Friend</a></li>
                    <li><a href="#tab4">Contact Info</a></li>
                </ul>

                <div class="tab_container">
                    <div id="tab1" class="tab_content">

                        <div class="form">

                            <%= form_for @messagerfp, :html => { :class => "rfp"}, :remote => true, :url => contactrfp_path do |form| %>

                      <p>Your Name<span class="sup">*</span></p>
                      <%= form.text_field :name, :id => "name" %>

                      <br /><br />
                    <p>Your Email<span class="sup">*</span></p>
                      <%= form.text_field :email, :id => "email" %>

                <br /><br />
                    <p>Your Location<span class="sup">*</span></p>
                    <%= form.text_field :location, :id => "location" %>

                    <br /><br />
                    <p>How did you find us?<span class="sup">*</span></p>
                    <%= form.text_field :howfound, :id => "howfound" %>

                <div class="clear" style="margin-bottom:20px; cursor:pointer;"><br />
                    <!--<span class="button" id="submit2"><span>Submit</span></span>-->
                         <%= form.submit "Send", :class => "button", :id => "submit24" %>

                    </div>
                <% end %>

                    <!--<form class="rfp">
                    <p>Your Name<span class="sup">*</span></p>
                    <input type="name" tabindex="1" class="medium" value="" id="name" name="input_1">
                    <br /><br />
                    <p>Your Email<span class="sup">*</span></p>
                    <input type="mail" tabindex="1" class="medium" value="" id="email" name="input_1">
                    <br /><br />
                    <p>Phone and/or Skype ID (optional)</p>
                    <input type="subject" tabindex="1" class="medium" value="" id="phone" name="input_1">
                    <br /><br />
                    <p>Your Location<span class="sup">*</span></p>
                    <input type="text" tabindex="1" class="medium" value="" id="location" name="input_1">
                    <br /><br />
                    <p><span class="bold larger">Your Business</span></p>
                    <br />
                    <p>Business name and industry</p>
                    <input type="text" tabindex="1" class="medium" value="" id="bizname" name="input_1">
                    <br /><br />
                    <p>Brief description of your business or organization</p>
                    <textarea type="text" tabindex="1" class="medium" value="" id="bizdesc" name="input_1" rows="10" cols="29"></textarea>
                    <br /><br />

                        <p>Do you currently have a website?</p>
                    <input type="text" tabindex="1" class="medium" value="" id="website" name="input_1">
                    <br /><br />
                    <p><span class="bold larger">Your Project</span></p>
                    <br />
                    <p>Briefly list the services that you're interested in?</p>
                    <textarea type="text" tabindex="1" class="medium" value="" id="services" name="input_1" rows="10" ></textarea>
                    <br /><br />
                    <p>Additional details about your project</p>
                    <textarea type="text" tabindex="1" class="medium" value="" id="adddetails" name="input_1" rows="10" ></textarea>
                    <br /><br />

                    <p>Project Budget (USD)</p>

                    <select tabindex="11" class="medium gfield_select" id="budget" name="input_17"><option selected="selected" value="$1,000 - $5,000">$1,000 - $5,000</option><option value="$5,000 - $10,000">$5,000 - $10,000</option><option value="$10,000 - $15,000">$10,000 - $15,000</option><option value="&gt; $15,000">&gt; $15,000</option></select>
                    <br /><br />
                    <p><span class="bold larger">Get in Touch</span></p>
                    <br />
                    <p>How did you find us?<span class="sup">*</span></p>
                    <input type="text" tabindex="1" class="medium" value="" id="howfound" name="input_1">
                    <br /><br />
                    <div class="clear" style="margin-bottom:20px; width:100px; float:right; cursor:pointer;">
                    <span class="button" id="submit"><span>Submit</span></span>
                    </div>
                    </form>-->
                    </div>
                    <br />

                    <div class="errors">

                    </div>

                    </div>
                    <div id="tab2" class="tab_content">

                      <div class="form">
                    <!--<form class="rfp2">
                    <p>Your Name<span class="sup">*</span></p>
                    <input type="name" tabindex="1" class="medium" value="" id="name2" name="input_1">
                    <br /><br />
                    <p>Your Email<span class="sup">*</span></p>
                    <input type="mail" tabindex="1" class="medium" value="" id="email2" name="input_1">
                    <br /><br />
                    <p>Message<span class="sup">*</span></p>
                    <textarea type="text" tabindex="1" class="medium" value="" id="bizdesc2" name="input_1" rows="10" cols="29"></textarea>
                    <br /><br />

                    <div class="clear2" style="margin-bottom:20px; width:100px; float:right; cursor:pointer;">
                    <span class="button" id="submit2"><span>Submit</span></span>
                    </div>
                    </form>-->

                    <%= form_for @message, :html => { :class => "rfp2"}, :remote => true, :url => contact_path do |form| %>

                      <p>Your Name<span class="sup">*</span></p>
                      <%= form.text_field :name, :id => "name2" %>

                      <br /><br />
                    <p>Your Email<span class="sup">*</span></p>
                      <%= form.text_field :email, :id => "email2" %>

                <br /><br />
                    <p>Message<span class="sup">*</span></p>
                    <%= form.text_area :body, :style => "resize:none;", :id => "bizdesc2" %>

                <div class="clear2" style="margin-bottom:20px; cursor:pointer;"><br />
                    <!--<span class="button" id="submit2"><span>Submit</span></span>-->
                         <%= form.submit "Send", :class => "button", :id => "submit2" %>

                    </div>
                <% end %>

                        <br />

                    <div class="errors2">

                    </div>

                    </div>
                    </div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-04T10:14:47.747

查看您网站上的代码，这两个表单当前都提交给“/contact”。这不是你想要的。您的路线设置不正确。

第一个表单失败，因为您要发布`params[:messagerfp]`到 PagesController#create，它希望`params[:message]`构建一个`Message`对象。结果，`@message`无效，因此不会发送电子邮件。

# android - 屏幕旋转后活动和意图服务通信中断

> ID：13210827
> 
> 赞同：1
> 
> 时间：2012-11-03T15:55:23.110
> 
> 标签：android, android-service

我有一个活动和一个意图服务相互通信。Service 生成 100 个随机浮点数，并通过 Messenger 将它们发送到 Activity，延迟时间为 1 秒。它还使用进度百分比更新通知。

在手机旋转之前，这工作得很好。当手机旋转时，UI 不再更新（不显示最新的随机浮动）。我已经调试过，发现仍然在生成随机浮点数并发送到 Activity。Activity 甚至调用 tv.setText("New random number: " + random); 但是没有显示新的随机数。

有任何想法吗？

我的服务

```
package ie.cathalcoffey.android.test;

import java.util.Random;

import com.jakewharton.notificationcompat2.NotificationCompat2;

import android.app.IntentService;
import android.app.Notification;
import android.app.NotificationManager;
import android.app.PendingIntent;
import android.app.Service;
import android.content.Intent;
import android.graphics.Bitmap;
import android.os.Bundle;
import android.os.Handler;
import android.os.IBinder;
import android.os.Message;
import android.os.Messenger;
import android.support.v4.app.NotificationCompat;
import android.widget.Toast;

public class MyService extends IntentService 
{   
    boolean stop = false;

    // Used to receive messages from the Activity
    final Messenger inMessenger = new Messenger(new IncomingHandler());

    // Use to send message to the Activity
    private Messenger outMessenger;

    class IncomingHandler extends Handler 
    {
        @Override
        public void handleMessage(Message msg) 
        {
            Bundle data = msg.getData();
            stop = data.getBoolean("stop", true);
        }
     }

    public MyService () 
    {
          super("MyServerOrWhatever");
    }

    public MyService(String name) 
    {
        super(name);
    }

    NotificationManager mNotificationManager;
    Notification notification;
    Random r;

    @Override
    public IBinder onBind(Intent intent) 
    {
        Bundle extras = intent.getExtras();

        if (extras != null) 
        {
            outMessenger = (Messenger) extras.get("messenger");
        }

        return inMessenger.getBinder();
    }

    @Override
    public void onCreate() 
    {
        super.onCreate();

        Toast.makeText(this, "My Service Created", Toast.LENGTH_LONG).show();
        r = new Random();

        mNotificationManager = (NotificationManager) getSystemService(getApplicationContext().NOTIFICATION_SERVICE);

        NotificationCompat2.Builder mBuilder =
            new NotificationCompat2.Builder(this)
            .setSmallIcon(R.drawable.ic_launcher)
            .setContentTitle("My notification")
            .setContentText("Hello World!")
            .setProgress(100, 0, false)
            .setContentIntent(PendingIntent.getActivity(getApplicationContext(), 0, new Intent(getApplicationContext(), TestServiceActivity.class), PendingIntent.FLAG_ONE_SHOT));

        notification = mBuilder.build();

        startForeground( 42, notification );
    }

    @Override
    public void onDestroy() 
    {
        super.onDestroy();

        Toast.makeText(this, "My Service Stopped", Toast.LENGTH_LONG).show();
    }

    @Override
    public void onStart(Intent intent, int startid) 
    {
        super.onStart(intent, startid);

        stop = false;

        Toast.makeText(this, "My Service Started", Toast.LENGTH_LONG).show();
    }

    @Override
    protected void onHandleIntent(Intent intent) 
    {
        for(int i = 1; i < 100; i++)
        {   
            if(stop)
            {
                break;
            }

            notification.contentView.setProgressBar(android.R.id.progress, 100, i, false);
            mNotificationManager.notify(42, notification);

            try 
            {
                Message backMsg = Message.obtain();
                Bundle bundle = new Bundle();
                bundle.putFloat("randomFloat", r.nextFloat());
                backMsg.setData(bundle);

                outMessenger.send(backMsg);
                Thread.sleep(1000);
            } 

            catch (Exception e) 
            {

            }
        }
    }
} 
```

我的活动

```
package ie.cathalcoffey.android.test;

import android.app.Activity;
import android.content.BroadcastReceiver;
import android.content.ComponentName;
import android.content.Context;
import android.content.Intent;
import android.content.IntentFilter;
import android.content.ServiceConnection;
import android.os.Bundle;
import android.os.Handler;
import android.os.IBinder;
import android.os.Message;
import android.os.Messenger;
import android.os.RemoteException;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.TextView;

public class TestServiceActivity extends Activity implements OnClickListener
{
      Messenger messenger = null;

      private Handler handler = new Handler() 
      {
        public void handleMessage(Message message) 
        {
            Bundle data = message.getData();
            float random = data.getFloat("randomFloat");

            TextView tv = (TextView)findViewById(R.id.textView1);
            tv.setText("New random number: " + random);
        }
      };

      private ServiceConnection conn = new ServiceConnection() {

            public void onServiceConnected(ComponentName className, IBinder binder) {
              messenger = new Messenger(binder);

            }

            public void onServiceDisconnected(ComponentName className) {
              messenger = null;
            }
          };

      private static final String TAG = "ServicesDemo";
      Button buttonStart, buttonStop;

      @Override
      protected void onResume() 
      {
            // TODO Auto-generated method stub
            super.onResume();

            Intent intent = null;
            intent = new Intent(this, MyService.class);
            // Create a new Messenger for the communication back
            // From the Service to the Activity
            Messenger messenger = new Messenger(handler);
            intent.putExtra("messenger", messenger);

            bindService(intent, conn, Context.BIND_AUTO_CREATE);
      }

      @Override
      protected void onPause() 
      {
            super.onPause();

            unbindService(conn);
      }

      @Override
      public void onCreate(Bundle savedInstanceState) 
      {
            super.onCreate(savedInstanceState);
            setContentView(R.layout.main);

            buttonStart = (Button) findViewById(R.id.buttonStart);
            buttonStop = (Button) findViewById(R.id.buttonStop);

            buttonStart.setOnClickListener(this);
            buttonStop.setOnClickListener(this);
      }

      @Override
      public void onClick(View src) 
      {
            switch (src.getId()) 
            {
                case R.id.buttonStart:

                  startService(new Intent(this, MyService.class));
                  break;

                case R.id.buttonStop:
                  stopService(new Intent(this, MyService.class));
                  Message msg = Message.obtain();

                  try 
                  {
                    Bundle bundle = new Bundle();
                    bundle.putBoolean("stop", true);
                    msg.setData(bundle);
                    messenger.send(msg);
                  } 

                  catch (RemoteException e) {
                    e.printStackTrace();
                  }
                  break;
            }
      }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T06:52:13.633

您的 IntentService 类不需要 Handler 类...它继承了自己的处理程序方法，称为

```
protected void onHandleIntent(Intent arg0) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T22:59:01.327

当屏幕旋转时，启动 IntentService 的原始 Activity 会被杀死/重新创建。因此，该服务正忙于向旧的僵尸 Activity 发送浮点数，而不是在屏幕上旋转的新实例。这也是僵尸的内存泄漏。

IntentService 没有一个简单的方法来解决这个问题——我可能会建议转移到绑定或普通启动服务，并在其 onCreate/onDestroy 调用中将 Activity 绑定/取消绑定到服务。

如果不需要 Gingerbread 支持，即使周围的 Activity 被杀死/重新创建，Fragment 也允许您调用 setRetainInstance 以保持自身活动。这似乎是一个更容易的改变，只需要进行一些 GUI 重构。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T02:05:42.743

好的，所以这很有启发性。

事实证明，只要该 Service 存在，它的 onBind 方法就不会被第二次调用，即使您解除绑定并重新绑定也是如此。相反，如果您从 unbind 返回 true，则调用 rebind。

请注意，如果您等到服务停止随机发送，旋转它，然后启动它，它就可以正常工作。那是因为 onBind 在 onDestroy/onCreate 之后被调用。

我已经走得够远了，以至于我看到了发生了什么：我实际上并没有解决问题。不过，我认为，如果您实施 onRebind，您可能会使其工作。

顺便说一句，我会在这段代码中改变一些其他的东西：如果可能的话，我会让那些 Handlers 成为静态的。如果是我，我也会将 Activity 设为 ServiceConnection。

祝你好运！

**编辑添加：**

我受不了了。我检查了。唉，在 onRebind 中传递的意图**不是**在第二次调用 bindService 时发送的意图。我不知道如何使这项工作。

**编辑添加**

这仍然是一个 hack，但我认为它符合原始代码的意图：

[https://github.com/bmeike/WeirdServer.git](https://github.com/bmeike/WeirdServer.git)

# gmail - Google Apps 脚本 — GmailApp.sendMessage 高级选项“名称”不起作用

> ID：13210828
> 
> 赞同：1
> 
> 时间：2012-11-03T15:55:28.223
> 
> 标签：gmail, google-apps-script

根据[https://developers.google.com/apps-script/class_gmailapp#sendEmail](https://developers.google.com/apps-script/class_gmailapp#sendEmail)，该功能

```
function myFunction() {
  GmailApp.sendEmail("address@domain.com", "Foo", "Hello World!", {name:"Fred Freddington"});
} 
```

应该发送一封`address@domain.com`带有主题`Foo`、邮件正文的电子邮件`Hello World!`，并且应该看起来是 from `Fred Freddington`。确实，这是过去发生的事情，但现在它只是说它来自与脚本关联的 Gmail 帐户。有谁知道如何解决这个问题和/或为什么谷歌改变了这一点但没有更新他们的文档？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T16:01:35.227

这是由于[问题 2004](http://code.google.com/p/google-apps-script-issues/issues/detail?id=2004)。请在问题上加注星标，以便在问题更新时收到通知

# php - 使用 php 抓取数据的 json 服务

> ID：13210837
> 
> 赞同：0
> 
> 时间：2012-11-03T15:56:34.263
> 
> 标签：php, ios, json, simple-html-dom, nsjsonserialization

我想弄清楚什么是完成这项工作的最佳方法，我是 php 新手。使用在我的本地服务器上测试的以下脚本，我能够使我的脚本工作以查找我的 htm 文件中的特定数据。

```
<?php

include ('simple_html_dom.php');

//create DOM from URL or local file
$html = file_get_html ('Lotto Texas.htm');

//find td class name currLotWinnum and store in variable winNumbers
foreach($html ->find('td.currLotWinnum') as $winNumbers)

    //print winNumbers
    echo "<b>The winning numbers are</b><br>";
    echo $winNumbers -> innertext . '<br>';

?> 
```

这里需要一些亮点，最终我想创建一个 Web 服务来返回 json 格式并使用 NSJSONSerialization 类从我的 iOS 应用程序访问该数据。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-03T16:58:51.800

您不需要将结果作为普通文本回显给用户，而是需要将其放入数据结构（本例中为数组）中，然后用于`json_encode`序列化它。

```
$results = array();
foreach ($html->find('td.curLotWinnum' as $winNumbers) {
  $results[] = $winNumbers->innertext;
}
echo json_encode($results); 
```

# javascript - 在数组元素上随机放置对象

> ID：13210838
> 
> 赞同：0
> 
> 时间：2012-11-03T15:56:36.827
> 
> 标签：javascript, node.js, random, socket.io

我正在使用画布元素制作一种“从头到尾”的游戏。问题是，我现在已经停下来思考让游戏识别获胜状态的最佳方法。

我有一个数组 os 9 画布元素，我希望能够随机选择其中的 3 个来放置背景图像（这只是“珍贵”元素的 3 个必需参数的视觉表示）。

所以，假设我希望能够从数组中选择 3 个画布元素并在每个元素中放置一个背景图像。由于我使用的是 Node.JS/Socket.io 并且“控制器”应该是移动设备（手机或平板电脑），我如何确保一切都同步，以便“客户端”上随机选择的元素“在“控制器”上是否相同？我将如何使用真正随机的状态？

希望这个描述就足够了，但如果需要，我可以发布一些代码。

我认为看看你的意见会很有趣。

最好的问候， 塞尔索桑托斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T16:05:50.893

您需要将所选索引从服务器传送到客户端。我不确定 javascript 的最佳随机化器是什么，但这应该很容易弄清楚。

然后只需在 node.js 中选择服务器上的 3 个索引并将它们传递给客户端。然后，客户端确实在正确的画布中显示正确的图像，而所有数据都保留在服务器上。

对于这些类型的游戏，您需要在服务器端做出所有重要决定。这样，用户就不能干预他们这边的数据，因为服务器会检查完整性。

# protocols - 加入网状网络

> ID：13210844
> 
> 赞同：0
> 
> 时间：2012-11-03T15:57:00.627
> 
> 标签：protocols, distributed-computing

我有一个设计问题。我需要创建一个允许节点加入网状网络的协议，因此自然每个节点都需要同意该节点是网络的一部分才能继续运行。我试图找到解释这种协议的论文，但我仍然卡住了。我能想到的最好的办法是新节点向网络中的每个节点发送一条消息，每个节点都转发该消息。当一个节点收到来自所有人的消息时，它包括最新的节点。

有没有办法以更少的消息发送相同的结果？任何想法或论文链接将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T06:57:28.080

我认为您的问题是组成员身份问题的直接示例。我不完全记得任何具体的协议，我相信你可以通过搜索找到很多这样的论文。Flaviu Cristian 的“在同步分布式系统中就处理器组成员资格达成一致”可能是这方面最古老的论文。

就增加成员的决定达成共识，是一种可以采取的简单方法。因此，在具有崩溃故障的同步系统中，我相信您可以做得更好，因为对于 f 容错协议，共识只需要 O(f+1) 轮。

# php - mysql_connect() 问题

> ID：13210855
> 
> 赞同：0
> 
> 时间：2012-11-03T15:58:17.903
> 
> 标签：php, mysql

我正在尝试使用以下 PHP 代码连接到 Mysql 数据库。但我收到 2 条错误消息。

**Mysql 连接代码：**

```
<?php
define("HOST", "localhost" );
define("USER", "root");
define("PASS", "");
define("DB", "classified");

mysql_connect("HOST", "USER") or die("Cannot connect to database");;
mysql_select_db("DB") or die("Cannot connect to select db");
?> 
```

**错误信息：**

```
Warning: mysql_connect(): php_network_getaddresses: getaddrinfo failed: No such host   
is known. in D:\Software\Installed\xampp\htdocs\Classified-website\toplevel\content
\database\databd.php on line 7

Warning: mysql_connect(): php_network_getaddresses: getaddrinfo failed: No such host 
is known. in D:\Software\Installed\xampp\htdocs\Classified-website\toplevel\content
\database\databd.php on line 7

Cannot connect to database. 
```

为什么我收到这 2 个错误消息。如果我在没有定义功能的情况下使用，那么它就可以工作。但..

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-03T15:59:14.327

删除引号 `mysql_connect("HOST", "USER")`

到 `mysql_connect(HOST, USER)`

因为它们是定义的常量 - 如果您使用引号，它将 HOST 和 USER 作为字符串文字。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-03T16:01:54.167

您不应该在主机名和数据库名称周围使用引号。

尝试：`mysql_connect(HOST, USER)`而不是`mysql_connect("HOST", "USER")`. 为数据库名称尝试相同的操作。

编码快乐！！

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-03T16:20:20.133

您不要用双引号将 CONSTANTS 括起来：

**代替：**

```
 mysql_connect("HOST","DB"); 
```

**采用：**

```
 mysql_connect(HOST,DB); 
```

同样的事情适用于所有常量。
**另外：** 放弃使用 mysql 函数，因为它们不够安全。而是使用**MySQLI 或 PDO**。我更喜欢**PDO。**

# python - 如何旋转字符串中的字符以加密消息

> ID：13210860
> 
> 赞同：3
> 
> 时间：2012-11-03T15:58:55.827
> 
> 标签：python, cryptography

我想和我的一个朋友玩得开心，我们是特工，但是如果没有绝密的消息代码来相互交流，我们怎么能成为特工呢？

```
# txt = the secret message to convert!
# n = number of times to jump from original position of letter in ASCII code

def spy_code(txt,n):
    result = ''
    for i in txt:
        c = ord(i)+n
        if ord(i) != c:
            b = chr(c)
            result += b
    print result

spy_code('abord mission, dont atk teacher!',5) 
```

在将消息转换为秘密消息后，我们得到一行文本......

```
fgtwi%rnxxnts1%itsy%fyp%yjfhmjw& 
```

问题是，我们想达到这样的结果：

```
fgtwi rnxxnts, itsy fyp yjfhmjw! 
```

只考虑字母。

仅使用间谍代码转换字母，不要转换空格或特殊符号。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-03T16:22:37.013

一个简单的方法，使用 GP89 ​​给你的提示。

只需检查您当前的字符是否在字母列表中；否则就按原样返回

```
import string

vals = string.letters
def spy_code(txt,n):
    result = ''
    for i in txt:
        if i in vals:
            c = ord(i)+n
            if ord(i) != c:
                b = chr(c)
                result += b
        else:
            result += i
    print result

spy_code('abord mission, dont atk teacher!',5) 
```

返回

```
fgtwi rnxxnts, itsy fyp yjfhmjw! 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-09-22T03:34:24.613

我知道这是旧的，但你可以使用[`str.isalpha()`](https://docs.python.org/2/library/stdtypes.html?highlight=str%20isspace#str.isalpha)：

```
s = 'Impending doom approaches!'
n = 6
result = ''

for c in s:
    result += chr(ord(c) + n) if c.isalpha() else c

print(result)
>>> Osvktjotm juus gvvxuginky! 
```

# asp.net - 一些防止 DDos/Dos 攻击 AWS 上的 Web 服务的方法

> ID：13210863
> 
> 赞同：-1
> 
> 时间：2012-11-03T15:59:03.003
> 
> 标签：asp.net, amazon-web-services, ddos

我想在 AWS 上使用 EC2 部署我的 ASP.NET Web 服务。有什么办法可以防止 DDos 攻击？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-04T14:57:29.667

那里有几个专门的 DDOS 预防服务。我将从[CloudFlare](http://www.cloudflare.com) + [Dome9](http://www.dome9.com/)组合开始 - 这两种服务都有免费套餐。

Cloudflare 将充当公共端点/ DDOS 缓解前端，而 Dome9 将确保没有人绕过 Cloudflare 访问您的 80/443 端口，并保持您的私有管理端口 (RDP) 隐身。

# ef-code-first - 非静态方法需要一个目标。实体框架 5 代码优先

> ID：13210867
> 
> 赞同：53
> 
> 时间：2012-11-03T15:59:38.370
> 
> 标签：ef-code-first, .net-4.5, entity-framework-5

我收到错误“非静态方法需要一个目标”。当我运行以下查询时：

```
var allPartners = DbContext.User
                           .Include(u => u.Businesses)
                           .Where(u => u.Businesses.Any(x => x.Id == currentBusinessId))
                           .ToList(); 
```

我的实体是这样定义的：

```
public class User : Entity
{
    public virtual List<Business> Businesses { get; set; }
}

public class Business : Entity
{
    public virtual List<User> Users { get; set; }
}

public class Entity
{
    [Key]
    [DatabaseGenerated(DatabaseGeneratedOption.Identity)]
    public Guid Id { get; set; }
} 
```

我的上下文是这样配置的；

```
public class Context : DbContext, IDatabaseSession
{
    public DbSet<Business> Business { get; set; }
    public DbSet<User> User { get; set; }

    public Context()
        : base("DefaultConnection")
    {

    }

    protected override void OnModelCreating(DbModelBuilder modelBuilder)
    {
        base.OnModelCreating(modelBuilder);

        modelBuilder.Conventions.Remove
            <System.Data.Entity.ModelConfiguration.Conventions.PluralizingTableNameConvention>();

        Database.SetInitializer(new MigrateDatabaseToLatestVersion<Context, Configuration>());

        modelBuilder.Entity<User>()
            .HasMany(u => u.Businesses)
            .WithMany(b => b.Users);
    }
} 
```

我做错了什么？

* * *

## 回答 #1

> 赞同：122
> 
> 时间：2012-11-08T19:02:01.460

问题归结为查询。我原来的问题有这个查询：

```
var allPartners = DbContext.User
                       .Include(u => u.Businesses)
                       .Where(u => u.Businesses.Any(x => x.Id == currentBusinessId))
                       .ToList(); 
```

这不是很准确，实际上我已经删除了错误，试图简洁地提出我的问题。查询实际上是：

```
var currentBusiness = GetBusiness();
var allPartners = DbContext.User
                       .Include(u => u.Businesses)
                       .Where(u => u.Businesses.Any(x => x.Id == currentBusiness.Id))
                       .ToList(); 
```

当`GetBusiness`方法返回时`null`，错误被抛出。只需确保我没有将`null`对象传递到表达式中，错误就会停止。

# javascript - 干净利落的增加！当用户单击链接到图像标签时模型上的属性

> ID：13210870
> 
> 赞同：1
> 
> 时间：2012-11-03T15:59:43.750
> 
> 标签：javascript, ruby-on-rails, ruby-on-rails-3.2

我有一个基本上有图像、标题和网址的**广告模型。**我使用 CarrierWave 作为图像。一切正常，但我想计算**印象**数和**点击**数。

* * *

**到目前为止，我添加了两个整数列：**展示次数、点击次数

我有一个**页面**控制器并设置了一个**@advert**变量，该变量会根据页面而变化。阅读此[问题](https://stackoverflow.com/questions/8681355/adding-button-click-counter-in-rails-3)后，我可以增加印象：

```
 def index  
   @advert = Advert.sample  
   @advert.increment! :impressions  
 end 
```

* * *

**我无法增加点击次数**| 下面是我需要修改的代码，以便当用户点击 image_tag 时，他们会像往常一样被带到 URL，但 @advert 会增加**clicks**列。这是我当前的代码（我使用 HAML，这是代码在文件中：_advert.html.haml）：

```
 = link_to image_tag("#{advert.foto_url.to_s}",:alt => "an image ad linking to #{advert.url}", :title => advert.title), advert.url, :target => "blank" 
```

* * *

什么是成功增量的最简单、最干净的方法！当有人点击上面的链接时，广告上的**点击属性？**

### 更新：

我正在使用下面 Aaron 的建议，但它导致了两个新问题：

*   当用户将鼠标悬停在图像上时，他们将看到与最终到达的链接不同的链接。我希望他们看到他们点击后最终到达的最终 URL，而不是简单地重定向来计算他们的点击次数。

*   如果有人直接拉出广告网址（例如：/adverts/1），计数器会增加！无需点击。

我实际上没有 Advert 的显示视图，但添加它以完成此操作。**所以说清楚**这是可行的，但感觉它违反了最佳实践。**不过谢谢亚伦。**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-03T16:31:00.243

我认为最简单的方法是将广告图像链接到广告显示操作，这可以增加计数器然后重定向到广告 url。

在您的链接中，更改`advert.url`为`advert_path(advert)`（并设置必要的路线），然后在`adverts_controller`：

```
def show
  @advert = Advert.find(params[:id])
  @advert.increment! :clicks
  redirect_to @advert.url
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-04T03:35:27.393

想到的第一件事是添加 JavaScript，以便在单击该链接时，它会异步向您的服务器发送请求，然后允许该链接按设计通过。

# javascript - Three.js 飞机的 3D 旋转

> ID：13210873
> 
> 赞同：3
> 
> 时间：2012-11-03T16:00:22.000
> 
> 标签：javascript, math, rotation, three.js

我正在尝试制作一个简单的飞机飞行游戏。我希望用户使用箭头键围绕 360 度区域旋转平面，其中上下是相对于飞机水平位置的 Y 轴。左右箭头应该只是围绕它的 z 轴旋转平面，并允许它有一个新的 Y 轴位置。我的问题是 - 如何在相对于新水平位置的 Y 轴上旋转飞机？

我有一个名为飞机的小组，并完成了诸如飞机.rotation.z（左右）和飞机.rotation.x（上下）之类的工作-但x轴不在新的水平面上。我还尝试使用 plane.children[1].matrix.rotation.x 访问组内的模型/网格，看看这是否可以改变相对 Y 轴......但这会导致同样的问题。如何找到与其当前水平位置的相对 Y 轴？

我的代码可以在[这里的 jsfiddle上看到](http://bitly.com/SlqdTF)

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-04T18:35:24.857

坦率地说，我很难理解您的问题，但我认为您的问题是：“如何使用箭头键围绕其内部 z 轴或 x 轴旋转对象？”

像这样的例程会这样做：

```
var _q1 = new THREE.Quaternion();

function rotateOnAxis( object, axis, angle ) {

    _q1.setFromAxisAngle( axis, angle );
    object.quaternion.multiplySelf( _q1 );

} 
```

该例程使用四元数来实现。这真的没什么大不了的——你只需要设置：

```
object.useQuaternion = true; 
```

这是一个更新的小提琴：http: [//jsfiddle.net/Lc8gH/20/](http://jsfiddle.net/Lc8gH/20/)。

* * *

编辑：您现在可以使用`Object3D.rotateOnAxis( axis, angle );`

三.js r.58

# maven - Hive + maven：如何覆盖 pom？

> ID：13210875
> 
> 赞同：1
> 
> 时间：2012-11-03T16:00:39.447
> 
> 标签：maven, hive, pom.xml

我正在尝试在 Maven 项目中使用 apache hive。我想使用 Hive 0.9.0 和 Hadoop 1.0.4（它们应该根据[http://hive.apache.org/releases.html](http://hive.apache.org/releases.html)一起工作）

不幸的是，maven repos 中 hive-common-0.9.0 的 pom 依赖于硬编码的 0.20.1 版 hadoop-core。有没有办法配置我的项目以忽略 pom 的那个片段？（hadoop 的 0.20.1 版本非常传统，在 ​​maven repos 中不可用）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T16:40:06.930

好的，我找到了。Maven 允许您为依赖项定义排除项。就我而言，它应该如下所示：

```
<dependency>
    <groupId>org.apache.hive</groupId>
    <artifactId>hive-jdbc</artifactId>
    <version>0.9.0</version>
  <exclusions>
    <exclusion>  
      <groupId>org.apache.hadoop</groupId>
      <artifactId>hadoop-core</artifactId>
    </exclusion>
  </exclusions>         
</dependency> 
```

# objective-c - OSX - 无法启动...未能获得进程任务

> ID：13210878
> 
> 赞同：0
> 
> 时间：2012-11-03T16:01:15.510
> 
> 标签：objective-c, xcode, macos, xcode4.5

我收到以下错误：

> 错误：无法启动“/Users/alex/Library/Developer/Xcode/DerivedData/HeadCount-djmphvycpqkpfcdcdkaiokdhadhw/Build/Products/Debug/HeadCount.app/Contents/MacOS/HeadCount”——未能获得进程 86433 的任务

调试日志中没有其他条目，构建日志只显示“构建成功”。当然，进程 ID 也会发生变化。

我花了大约一个小时在这里和谷歌上寻找答案，这不是一个 iOS 应用程序，它是一个标准的 Mac 应用程序。我确实工作得很好，我对一个方法做了一个小改动，然后尝试调试，现在收到这个错误。

*   这不是代码签名错误，因为我没有对应用程序进行代码签名并且未选中“代码签名”复选框，这些设置自我第一次构建以来没有更改。
*   这不是规定/临时分发错误-我没有将其分发到电话。
*   该方案设置为调试（我也尝试将其设置为发布，结果相同）。
*   如果我手动浏览到应用程序包并运行它，我可以正常运行它。
*   如果我删除我的 DerivedData 文件夹，则会发生同样的错误。
*   我没有entitlements.plist（我的应用程序曾经有一个，但我几天前删除了它并在构建设置中禁用了它，在我这样做之后它就可以工作了）。
*   我的构建目标是 OSX 10.8，我的环境是 10.8。
*   我的应用程序尚未运行 - 我仔细检查了 Force Quit UI 以确保。

我已经尝试了所有其他与此类似的主题中可以看到的所有内容，但我很难过。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-03T16:19:14.333

来自评论：重新启动是修复混淆软件的“大锤”方法。:-)

（我假设 Xcode 和应用程序之间的通信机制中的某些东西搞砸了。运气好的话，我们永远不需要知道确切的原因。）

# c++ - 将伪随机数修改为介于 2 个值之间；

> ID：13210879
> 
> 赞同：1
> 
> 时间：2012-11-03T16:01:20.143
> 
> 标签：c++, random

> **可能重复：**
> [C++ | 生成10-20之间的真正随机数](https://stackoverflow.com/questions/4413170/c-generating-a-truly-random-number-between-10-20)
> [如何生成范围内的随机数（-x，x）](https://stackoverflow.com/questions/5129093/how-to-generate-random-number-within-range-x-x)

所以我使用 MT 来生成我的伪随机数，我希望能够将这些数字修改为一个数字范围内的值。

这些是我现在拥有的功能，前两个是int，后两个是float，但它们似乎不能正常工作。

```
static inline int randomi(int min, int max)
{
    return Random() % (max-min)+min;
}

static inline unsigned long randomi(int max)
{
    return Random() % max;
}

static inline float randomf(float min, float max)
{
    return (Random() / ULONG_MAX) * (max-min)+min;
}

static inline float randomf(float max)
{
    return (Random() / ULONG_MAX) * max;
} 
```

我怎样才能使这些工作，以便它们可以返回可以介于两者之间的范围，包括负范围或 0 两侧的范围；

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-03T16:09:25.113

当您需要一个负数作为限制时，只需将整个选择向下移动...

前任：

```
* you need a random between -10 and +10:
* generate a random from 0 to 20 the do -10. 
```

为您实现..

# bash - 将一个子字符串替换为 shell 脚本中的另一个字符串

> ID：13210880
> 
> 赞同：1129
> 
> 时间：2012-11-03T16:01:23.283
> 
> 标签：bash, shell

我有“我爱 Suzi 和 Marry”，我想把“Suzi”改成“Sara”。

```
#!/bin/bash
firstString="I love Suzi and Marry"
secondString="Sara"
# do something... 
```

结果必须是这样的：

```
firstString="I love Sara and Marry" 
```

* * *

## 回答 #1

> 赞同：1905
> 
> 时间：2012-11-03T16:05:06.823

要用给定的字符串替换第*一次*出现的模式，请使用：`${*parameter*/*pattern*/*string*}`

```
#!/bin/bash
firstString="I love Suzi and Marry"
secondString="Sara"
echo "${firstString/Suzi/"$secondString"}"    
# prints 'I love Sara and Marry' 
```

要替换*所有*匹配项，请使用：`${*parameter*//*pattern*/*string*}`

```
message='The secret code is 12345'
echo "${message//[0-9]/X}"           
# prints 'The secret code is XXXXX' 
```

（这记录在[Bash*参考手册*§3.5.3 “Shell Parameter Expansion”](https://www.gnu.org/software/bash/manual/bash.html#Shell-Parameter-Expansion)中。）

请注意，POSIX 并未指定此功能（它是 Bash 扩展），因此并非所有 Unix shell 都实现它。有关相关 POSIX 文档，请参阅[*The Open Group Technical Standard Base Specifications, Issue 7*，*Shell & Utilities*卷，第 2.6.2 节“参数扩展”](http://pubs.opengroup.org/onlinepubs/9699919799/utilities/V3_chap02.html#tag_18_06_02)。

* * *

## 回答 #2

> 赞同：281
> 
> 时间：2012-11-03T16:05:35.710

这可以完全通过 bash 字符串操作来完成：

```
first="I love Suzy and Mary"
second="Sara"
first=${first/Suzy/$second} 
```

这将只替换第一次出现；要全部替换它们，请将第一个斜线加倍：

```
first="Suzy, Suzy, Suzy"
second="Sara"
first=${first//Suzy/$second}
# first is now "Sara, Sara, Sara" 
```

* * *

## 回答 #3

> 赞同：171
> 
> 时间：2014-04-09T08:56:20.060

对于 Dash，以前的所有帖子都不起作用

POSIX`sh`兼容的解决方案是：

```
result=$(echo "$firstString" | sed "s/Suzi/$secondString/") 
```

这将替换每行输入的第一次出现。添加一个`/g`标志来替换所有匹配项：

```
result=$(echo "$firstString" | sed "s/Suzi/$secondString/g") 
```

* * *

## 回答 #4

> 赞同：76
> 
> 时间：2012-11-03T16:04:21.233

试试这个：

```
 sed "s/Suzi/$secondString/g" <<<"$firstString" 
```

* * *

## 回答 #5

> 赞同：55
> 
> 时间：2014-06-22T03:43:53.667

使用 Bash 比使用`sed`正则表达式字符更好。

```
echo ${first_string/Suzi/$second_string} 
```

它可以移植到 Windows，并且至少可以与 Bash 3.1 一样旧。

为了表明你不需要太担心逃跑，让我们把这个变成：

```
/home/name/foo/bar 
```

进入这个：

```
~/foo/bar 
```

但只有`/home/name`在开始时。我们不需要`sed`！

鉴于 Bash 为我们提供了魔法变量`$PWD`和`$HOME`，我们可以：

```
echo "${PWD/#$HOME/\~}" 
```

* * *

感谢 Mark Haferkamp 在评论中对引用/转义的注释`~`。*

请注意变量如何`$HOME`包含斜杠，但这并没有破坏任何东西。

进一步阅读：[高级 Bash 脚本指南](http://tldp.org/LDP/abs/html/string-manipulation.html#SUBSTRREPL00)。
如果 using`sed`是必须的，请务必[转义每个字符](http://backreference.org/2009/12/09/using-shell-variables-in-sed/)。

* * *

## 回答 #6

> 赞同：25
> 
> 时间：2017-07-11T02:39:54.983

如果明天你决定不爱 Marry，她也可以被替换：

```
today=$(</tmp/lovers.txt)
tomorrow="${today//Suzi/Sara}"
echo "${tomorrow//Marry/Jesica}" > /tmp/lovers.txt 
```

[离开你的爱人](https://en.wikipedia.org/wiki/50_Ways_to_Leave_Your_Lover)一定有50种方法。

* * *

## 回答 #7

> 赞同：18
> 
> 时间：2020-05-09T18:09:19.350

```
echo [string] | sed "s/[original]/[target]/g" 
```

*   “s”的意思是“替代”
*   “g”表示“全局，所有匹配的事件”

* * *

## 回答 #8

> 赞同：16
> 
> 时间：2019-03-12T21:50:22.430

因为我不能添加评论。@ruaka 为了使示例更具可读性，请像这样编写

```
full_string="I love Suzy and Mary"
search_string="Suzy"
replace_string="Sara"
my_string=${full_string/$search_string/$replace_string}
or
my_string=${full_string/Suzy/Sarah} 
```

* * *

## 回答 #9

> 赞同：9
> 
> 时间：2019-09-18T22:40:21.450

使用[AWK](https://en.wikipedia.org/wiki/AWK)：

```
firstString="I love Suzi and Marry"
echo $firstString | awk '{gsub("Suzi","Sara"); print}' 
```

* * *

## 回答 #10

> 赞同：8
> 
> 时间：2019-04-27T06:24:41.963

纯*POSIX* shell 方法，与[*Roman Kazanovskyi*的`sed`基于答案](https://stackoverflow.com/a/22957485/6136214)不同，它不需要外部工具，只需要 shell 自己的本机[参数扩展](https://www.ibm.com/support/knowledgecenter/en/ssw_aix_71/com.ibm.aix.osdevice/korn_shell_parmsub1.htm)。请注意，长文件名已最小化，因此代码更适合一行：

```
f="I love Suzi and Marry"
s=Sara
t=Suzi
[ "${f%$t*}" != "$f" ] && f="${f%$t*}$s${f#*$t}"
echo "$f" 
```

输出：

```
I love Sara and Marry 
```

* * *

这个怎么运作：

*   删除最小后缀模式。 如果后缀“ ”在“ ”中，则`"${f%$t*}"`返回“ ”。 *`I love`*`$t`*`Suzi*`*`$f`*`I love`* ***`Suzi and Marry`***

*   但是如果`t=Zelda`, 那么`"${f%$t*}"`什么都不删除，并返回整个字符串“ *`I love Suzi and Marry`*”。

*   这用于测试 if `$t`is in `$f`with which如果字符串包含 " "`[ "${f%$t*}" != "$f" ]`则评估为*true ，否则为**false*。`$f`*`Suzi*`*

**   如果测试返回*true ，则使用**Remove Smallest Suffix Pattern* `${f%$t*}` " *`I love`*" 和*Remove Smallest Prefix Pattern* `${f#*$t}` " "构造所需的字符串*`and Marry`*，*第二个*字符串`$s`" *`Sara`*" 介于两者之间。*

# sql-server - 获取在 Sql Server 中为带有触发器的表更新的行的 Id

> ID：13210881
> 
> 赞同：0
> 
> 时间：2012-11-03T16:01:26.867
> 
> 标签：sql-server

这里有一个很好的答案：[https](https://stackoverflow.com/a/1610530/630169) ://stackoverflow.com/a/1610530/630169 但是，如果更新的表有一个触发器不起作用，因为 SQL Server 会产生错误：DML 语句的目标表“my_table”不能启用任何如果语句包含没有 INTO 子句的 OUTPUT 子句，则触发。如果表有触发器怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-03T16:29:45.637

找到答案，需要使用文档中提到的 INTO 选项：http: [//msdn.microsoft.com/en-us/library/ms177564.aspx](http://msdn.microsoft.com/en-us/library/ms177564.aspx)，例如：

```
DECLARE @MyTableVar TABLE
(
    id INT
);
UPDATE my_table 
SET column = value
OUTPUT INSERTED.primaryId INTO @MyTableVar
WHERE idColumn = idValue;
SELECT * FROM @MyTableVar 
```

# python - GAE/P：联合登录是否总是包含用户的电子邮件地址？

> ID：13210882
> 
> 赞同：1
> 
> 时间：2012-11-03T16:01:27.917
> 
> 标签：python, google-app-engine, openid, federated-identity

我想将我的应用程序从 google 帐户登录迁移到联合登录。我的应用程序需要用户的电子邮件地址才能正常运行。

如果用户使用主要的身份提供商（Google、Facebook、Yahoo 等），用户是否可以登录但不允许我的应用访问他或她的电子邮件地址？

我可以要求用户提供一个电子邮件地址，但我需要向该地址发送一封电子邮件以确认，让用户点击一个链接等。我宁愿避免这个过程。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-04T10:18:14.133

通常[OpenID 属性交换](http://openid.net/specs/openid-attribute-exchange-1_0.html)可用于请求特殊用户属性，如电子邮件。

Appengine 在内部使用 AE 来请求用户电子邮件，但不使用其他参数（姓名等）。此外，GAE 也不给您请求其他参数的选项。

因此，您*应该*通过联合登录获取用户电子邮件，但这取决于 OpenID 提供商，并且他们不能保证始终提供它。

所以有多种解决方案：

1.  仅允许某些提供用户电子邮件的 OpenID 提供商。

2.  如果提供商提供电子邮件，请使用它，否则要求用户提供电子邮件。

或者，您可以改用 OAuth 2.0 并请求用户配置文件。这会在大多数情况下（Google、Facebook）为您提供用户详细信息，包括电子邮件，但并非总是如此（Twitter）。因此，除了登录之外，您还需要执行 1\. 或 2.。好处是你会支持非常广泛的 Facebook。

# regex - 仅 7 位和 9 位的正则表达式

> ID：13210890
> 
> 赞同：12
> 
> 时间：2012-11-03T16:02:11.467
> 
> 标签：regex

我正在搜索仅 7 位数字和另一个仅 9 位数字的正则表达式，我发现的只是 [0-7] 和 [0-9]，而不是确切的 7 位和 9 位数字 - 不再更短 -

我怎样才能找到那些？

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2012-11-03T16:03:58.257

匹配七位数：

```
^\d{7}$ 
```

匹配九位数字：

```
^\d{9}$ 
```

如果要匹配七位或九位数字，请使用以下命令：

```
^(\d{7}|\d{9})$ 
```

或者只是这个：

```
^\d{7}(\d{2})?$ 
```

**量词**：花括号中的数字就是我们所说的*量词*，它决定了匹配前面模式（括号中的字符或组）的重复次数。

**字符串（或行）的开头**和**结尾**分别用插入符号`^`和美元符号表示`$`。

**竖线字符** `|`用于提供两种替代模式。重要的是要知道，它的优先级*最低*（感谢raina 提醒我），即它将匹配左侧或右侧的*所有内容，除非用括号限制。*

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-01-18T10:35:01.137

对于 7 位数字：`/^\d{7}$/`

对于 9 位数字：`/^\d{9}$/`

Stackoverflow 宕机了，我不得不“学习”正则表达式。

在这里找到它： [javascript中的正则表达式](http://james.padolsey.com/javascript/regular-expressions-in-javascript/)

学习更好:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-03T16:06:17.883

我不认为你想从你的帖子中得到什么。您在寻找 7 位或 9 位的字符串吗？类似于： (\d{9}|\d{14})

# jquery - jQuery移动滑块更改事件未触发

> ID：13210891
> 
> 赞同：0
> 
> 时间：2012-11-03T16:02:11.327
> 
> 标签：jquery, jquery-mobile

我正在通过 ajax 调用加载一些 html。

此 html 还包含`<script>`标签中的 javascript。

这些脚本标签运行，但我尝试将事件处理程序附加到`<input slider>`（JQM 库的一部分）的更改事件。

如果我使用 'deprecated' 这将有效`.live()`。问题是这个 html 被加载了几次，并且每次都重新添加每个事件处理程序。

如果我改为使用`.on()`DOCS 建议，则在更改输入值时不会触发事件。

```
"input type="range" name="betInput" id="Size-@sel.UniqueId" min="0" max="@sel.AvailableToBet"/"

// Using .live() here works but keeps adding
$('#Size-@sel.UniqueId').on('change', function () {

                    console.debug('Should print when slider-value is changed but is not');
                });

                // This next line will however trigger the event above.
                $('#Size-@sel.UniqueId').trigger('change'); 
```

使用 JQuery 1.8.2 和 JQM 1.2.0

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-03T17:16:10.647

You need to add a selector to make the `on` act like `live`:

```
// Using .live() here works but keeps adding
$('#Size-@sel.UniqueId').on('change', function () { 
```

Should be something like:

```
$('parentSelector').on('change', ,'#Size-@sel.UniqueId', function () { 
```

Read more in the [docs](http://api.jquery.com/on/):

> If selector is omitted or is null, the event handler is referred to as direct or directly-bound. The handler is called every time an event occurs on the selected elements, whether it occurs directly on the element or bubbles from a descendant (inner) element.
> 
> When a selector is provided, the event handler is referred to as delegated. The handler is not called when the event occurs directly on the bound element, but only for descendants (inner elements) that match the selector. jQuery bubbles the event from the event target up to the element where the handler is attached (i.e., innermost to outermost element) and runs the handler for any elements along that path matching the selector.
> 
> Event handlers are bound only to the currently selected elements; they must exist on the page at the time your code makes the call to .on(). To ensure the elements are present and can be selected, perform event binding inside a document ready handler for elements that are in the HTML markup on the page. If new HTML is being injected into the page, select the elements and attach event handlers after the new HTML is placed into the page. Or, use delegated events to attach an event handler, as described next.
> 
> Delegated events have the advantage that they can process events from descendant elements that are added to the document at a later time. By picking an element that is guaranteed to be present at the time the delegated event handler is attached, you can use delegated events to avoid the need to frequently attach and remove event handlers. This element could be the container element of a view in a Model-View-Controller design, for example, or document if the event handler wants to monitor all bubbling events in the document. The document element is available in the head of the document before loading any other HTML, so it is safe to attach events there without waiting for the document to be ready.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-10-11T19:30:10.103

尝试将您的活动从“更改”更改为“幻灯片停止”，如下所示：

```
$('#Size-@sel.UniqueId').on('slidestop', function () { 
```

这个答案帮助了我：[jQueryMobile 滑块更改事件](https://stackoverflow.com/questions/16799382/jquerymobile-slider-change-event)

# java - 如何解释音频字节？

> ID：13210894
> 
> 赞同：1
> 
> 时间：2012-11-03T16:02:32.277
> 
> 标签：java, audio-analysis

我想写一个语音压力分析工具。我正在打开音频流以供阅读：

```
TargetDataLine line;
AudioFormat format = new AudioFormat((float) 44100, 16, 1, true, false);
DataLine.Info info = new DataLine.Info(TargetDataLine.class, format);
line = (TargetDataLine) AudioSystem.getLine(info);
line.open(format);
// Begin audio capture.
line.start(); 
```

然后循环：

```
// Read the next chunk of data from the TargetDataLine.
numBytesRead = line.read(externalData, 0, externalData.length); 
```

我得到一个带有字节的数组，因为 externalData 定义如下：

```
public static byte[] externalData = new byte[1024]; 
```

我想知道的是如何解释这些数据？我试图按字节值绘制它，但我想这是错误的。![绘制的字节](../Images/3d254b526c52d75d833133d187bc6a0c.png)

X 轴是时间，Y 轴是字节值。

PS：我在哪里可以找到有关 McQuiston-Ford 算法的更多信息？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-03T16:49:05.430

您需要将字节转换为幅度并绘制它们。看到这个关于如何打点的问题：[Obtain wave pattern of a audio file in Java](https://stackoverflow.com/questions/13024683/obtain-wave-pattern-of-a-audio-file-in-java/13024779#13024779)

至于算法，维基百科说它的伪科学，我怀疑在公共领域会有很多关于它的内容。

# javascript - 在javascript中动态命名变量

> ID：13210895
> 
> 赞同：-2
> 
> 时间：2012-11-03T16:02:43.480
> 
> 标签：javascript, jquery

我怎样才能将它压缩成一个循环并动态命名变量？

这行得通

```
var aMainNav = ['b1', 'b2', 'b3'];
aMainNav[0] = $('.mainNav li:nth-child(1)');
aMainNav[1] = $('.mainNav li:nth-child(2)');
aMainNav[2] = $('.mainNav li:nth-child(3)'); 
```

这不是

```
var aMainNav = ['b1', 'b2', 'b3'];
var i = 0;
while(i < aMainNav.length){
    var j = i++;
    eval(aMainNav[i] = $('.mainNav li:nth-child('+j+')'));
    i++;
} 
```

按钮点击

```
aMainNav[0].click(function(){
    myLocation=='abc'?top.location.href='https://mydomain.com?var=1':window.location.href='./';
    return false;
});
aMainNav[1].click(function(){
    myLocation=='abc'?top.location.href='https://mydomain.com?var=2':window.location.href='./';
    return false;
});
aMainNav[2].click(function(){
    myLocation=='abc'?top.location.href='https://mydomain.com?var=3':window.location.href='./';
    return false;
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-03T16:04:50.373

尝试`var j = ++i;`，并删除第二个`i++`。你甚至不需要评估。

```
while(i < aMainNav.length){
    var j = ++i;
    aMainNav[i] = $('.mainNav li:nth-child('+j+')');
} 
```

~~如果从不使用 eval，但~~ ~~如果~~假设您要使用 eval（交叉自我），请记住，它的参数是要评估的 Javascript 字符串，而不是 jQuery 对象。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-03T16:06:30.317

我会使用`for`循环，也避免使用`eval`.

```
for (var i = 0; i < aMainNav.length; i++){
    aMainNav[i] = $('.mainNav li:nth-child('+ (i+1) +')');
} 
```

对于点击处理程序

```
for (var i = 0; i < aMainNav.length; i++){
    aMainNav[i] = '.mainNav li:nth-child('+ (i+1) +')';
}

$(aMainNav.join()).click(function(){
    myLocation = 'abc'?top.location.href='https://mydomain.com?var=' + $(this).index() + ' ':window.location.href='./';
    return false;
}); 
```

1.  修改了数组以保存字符串而不是 jQuery 对象
2.  更改`myLocation ==`为`myLocation =`
3.  用户`aMainNav.join()`将选择所有`mainNav li`子元素。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-03T16:08:10.597

从这个问题很难说，但我想知道这是否是你要找的：

```
var aMainNav = {};
var n;
for (n = 1; n <= 3; ++n) {
    aMainNav['b' + n] = $('.mainNav li:nth-child(' n + ')');
} 
```

上面的最终结果将是一个对象，`aMainNav`该对象具有属性`b1`，`b2`，并且`b3`是相关`nth-child`的 s。例如

```
aMainNav.b2.css("color", green"); 
```

...会变成`.mainNav li:nth-child(2)`绿色。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-03T16:08:20.847

尝试这样的事情。它只是附加到列表而不是直接说明索引点。如果您需要指定索引点，这就是字典的用途，因此您应该使用它而不是数组。

```
var aMainNav = ['b1', 'b2', 'b3'];
var i = 0;
while(i < aMainNav.length){
    var j = ++i;
    var item = $('.mainNav li:nth-child('+j+')'));
    aMainNav.push(item);
    i++;
} 
```

# mysql - 如果 Select 不返回任何内容，则 Sql 插入默认值

> ID：13210900
> 
> 赞同：0
> 
> 时间：2012-11-03T16:04:06.557
> 
> 标签：mysql, sql, select, insert

我有以下 SQL 查询，它使用各种电话的详细信息填充表。

```
INSERT tblCalls (callerID, destinationNum)
SELECT tblCallerID.callerID, tblSkyNums.skyID
FROM tblCallerID, tblSkyNums
WHERE tblCallerID.callerNumber = '".$caller_id."'
AND tblSkyNums.skyNum = '".$dest_no."' 
```

该查询从两个单独的表中获取 callerID 和 skyID 并将它们插入到第三个表中；tblCalls。

我的问题有时是输入的号码不存在skyID，当这种情况发生时，tblCalls 中没有输入任何内容。这意味着没有记录此呼叫的数据。

我一直在尝试做的是，如果不存在这样的 skyID，只需在该特定呼叫的 skyID 字段中输入“n/a”即可。

我已经在这里待了两天多了，似乎找不到让它工作的方法。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T16:12:12.263

Coalesce 只能让你走到一半。问题是 FROM 子句中的 ',' 执行一个 INNER JOIN，因此如果在 tblSkyNums 中没有选择任何行，那么 SELECT 查询将不会返回任何行。

要解决此问题，您需要一个 OUTER JOIN：

```
INSERT INTO tblCalls (callerID, destinationNum)
SELECT DISTINCT tblCallerID.callerID, COALESCE(tblSkyNums.skyID, 'N/A')  AS skyID
  FROM tblCallerID
  LEFT OUTER JOIN tblSkyNums
    ON tblSkyNums.skyNum = '".$dest_no."'
 WHERE tblCallerID.callerNumber = '".$caller_id."' 
```

希望这可以帮助！

约翰...

# arrays - 在 MIPS32 程序集中复制数组

> ID：13210903
> 
> 赞同：0
> 
> 时间：2012-11-03T16:04:37.770
> 
> 标签：arrays, assembly, mips, mips32

我有一段 C++ 代码需要使用直接翻译转换为 mips。我已经完成了大部分工作，它是一个 do while 循环。我只是不明白 MIPS 中的这一行。

```
x[i] = y[i]; 
```

我不明白如何将其转换为 mips，我一直在网上无休止地搜索。我能得到任何帮助吗？

编辑

这是我所拥有的，但被告知这是不正确的：

```
la $6, y
Li $7, $1
Add $7, $7, $7
Add $7, $7, $7
Add $8, $6, $7
Lw $6, 0($8)
La $7, x
Li $8, $1
Add $8, $8, $8
Add $8, $8, $8
Add $7, $7, $8
Sw $6, 0($7) 
```

我使用这个在线网站作为参考：

[http://www.cs.pitt.edu/~xujie/cs447/AccessingArray.htm](http://www.cs.pitt.edu/~xujie/cs447/AccessingArray.htm)

第二次编辑

C++ 编码

```
i=0;
do {
    x[i]=y[i];
    i++;
}
while (i!=j); 
```

MIPS 直译

```
Addi $1, $1, 0
Loop:   la $6, y
    Li $7, $1
    Add $7, $7, $7
    Add $7, $7, $7
    Add $8, $6, $7
    Lw $6, 0($8)
    La $7, x
    Li $8, $1
    Add $8, $8, $8
    Add $8, $8, $8
    Add $7, $7, $8
    Sw $6, 0($7)
    Addi $1, $1, 1
    Bne $1, $2, loop 
```

以下是我可以用来避免混淆的所有寄存器：

```
Variables   i   j   x   y   4 (constant)    Free
Registers   $1  $2   $3   $4    $5               $6, $7, $8 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-03T17:54:13.587

这应该让你进入正确的方向。由于这是一个家庭作业问题，我不会给你一个完整的解决方案。

快速参考（MIPS 指令、调用约定等）：

[http://www.mips.com/media/files/MD00565-2B-MIPS32-QRC-01.01.pdf](http://www.mips.com/media/files/MD00565-2B-MIPS32-QRC-01.01.pdf)

在 little-Endian 环境中计算 32 位和 16 位向量的点积的示例汇编函数：

[http://code.google.com/p/mips32-asm/source/browse/dot32x16.S](http://code.google.com/p/mips32-asm/source/browse/dot32x16.S)

在这里您可以看到如何访问数组的元素。

请注意，“.set reorder”使汇编程序重新排序指令和/或包含 NOP 以处理所谓的延迟槽。如果您的教授希望看到您理解延迟槽问题，您应该自己正确订购指令和/或在分支/跳转后编写自己的 NOP。

# php - 比较字符串并比较它们的匹配程度

> ID：13210911
> 
> 赞同：0
> 
> 时间：2012-11-03T16:05:27.383
> 
> 标签：php, match, levenshtein-distance

我从日志中提取异常，这里是一个例子：

异常：System.InvalidOperationException：集合已修改；枚举操作可能无法执行。在 System.Collections.Generic.List`1.Enumerator.MoveNextRare() 在 test.Modules.UI.Table.<>c_DisplayClass2.b *_0* () 在 System.Win

有时日志使用不同的语言，所以它看起来像这样：

例外：System.InvalidOperationException：La colección fue modificada，la opecion de enumeración no puede ejecutar。在 System.Collections.Generic.List`1.Enumerator.MoveNextRare() 在 Test.Modules.UI.Table.<>c_ *DisplayClass2.b* _0() 在 System.Win

正如您所看到的，只有异常部分不同，因为它使用不同的语言，但之后的部分将是相同的。我将所有这些异常都存储在数据库中，长度都修剪为 300 个字符，因为它们通常更长，但 300 个字符足以判断是否相同

所以我想可能会跳过异常并比较接下来的 300 个字符，但是要知道异常在哪里结束非常困难，没有任何具体的内容可以显示异常的开始和结束。

有什么想法我可以克服这个吗？也许我只是使用 Levenshtein 来突出显示紧密匹配的位置，然后我可以过滤它们，并可能设置一个界面，一旦我手动识别出用不同语言编写的相同异常，我就可以链接异常？

我的最终目标是查看数以千计的这些日志，看看有多少异常是相同的，大多数日志是英文的，但可能有 25% 不是英文的，所以通常我可以在例外，因为例外部分的语言不同，它可能只有 60-70% 的匹配。在极少数情况下，异常之后的部分与不同的异常非常接近，但这种情况很少见，因此不必太担心

我需要在 PHP 中执行此操作

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-03T16:51:40.790

不是 100% 稳健，但您可以根据第二个分号之前的文本和单词后面的文本进行匹配`at`。我敢打赌这个词`at`后面跟着一个新行，所以这个词+新行不太可能出现在异常消息本身中（使它成为一个不错的选择作为分隔符）。

我认为您设计的任何方案都希望完全忽略异常消息。您不会在语言之间找到共同的结构，因此允许文本消息成为匹配排名的一部分只会削弱您匹配的信心。

# powershell - 带有 TroubleshootingPack 的 ParameterBindingException

> ID：13210913
> 
> 赞同：0
> 
> 时间：2012-11-03T16:05:37.130
> 
> 标签：powershell

如果我尝试运行以下代码行，则会出现以下异常：

## 错误

```
Get-TroubleshootingPack : Es wurde kein Positionsparameter gefunden, der das Argument "Invoke-TroubleshootingPack" akzeptiert.
In Zeile:4 Zeichen:16
+ $PrinterPack = Get-TroubleshootingPack @TroubleshootingPack Invoke-Troubleshooti ...
+ ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
+ CategoryInfo          : InvalidArgument: (:) [Get-TroubleshootingPack], ParameterBindingException
+ FullyQualifiedErrorId : PositionalParameterNotFound,Microsoft.Windows.Diagnosis.Commands.GetTroubleshootingPack 
```

## 代码

```
$TroubleshootingPack = @{
Path = "$env:windir\diagnostics\system\printer"
}
$PrinterPack = Get-TroubleshootingPack @TroubleshootingPack Invoke-TroubleshootingPack -Pack $PrinterPack 
```

我不明白这个问题，因为我的代码看起来像是从帮助中修改代码：

```
get-troubleshootingpack -path C:\Windows\Diagnostics\System\Aero | invoke-troubleshootingpack 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-03T16:34:54.137

试试这个

```
Get-TroubleshootingPack @TroubleshootingPack | Invoke-TroubleshootingPack 
```

或这个

```
$PrinterPack = Get-TroubleshootingPack @TroubleshootingPack
Invoke-TroubleshootingPack -Pack $PrinterPack 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T19:29:47.730

唯一的问题是缺少换行符

```
$TroubleshootingPack = @{
Path = "$env:windir\diagnostics\system\printer"
}
$PrinterPack = Get-TroubleshootingPack @TroubleshootingPack
Invoke-TroubleshootingPack -Pack $PrinterPack 
```

上面的代码现在可以正常工作了

# ruby-on-rails - 为 Rails 中的业务属性/便利设施建模

> ID：13210914
> 
> 赞同：1
> 
> 时间：2012-11-03T16:05:38.820
> 
> 标签：ruby-on-rails

我的应用程序中有一个`Business`模型，它将存储有关

*   餐厅
*   酒吧
*   专卖店
*   美发沙龙
*   ETC

一些企业共享属性/设施：

*   无线上网
*   空调
*   可访问性
*   ETC..

但有些特定于单一类型的企业，例如餐馆：

*   取出
*   送货
*   着装规范
*   户外座位

我想知道在数据库中对这些信息进行建模的最佳方法是什么？

我目前的想法：

使用单个表来`Business`保存所有信息和属性。大多数属性都是布尔值，因此只要一个属性不适用于业务类型，它就只是`false`.

但是，我不确定是否有更好的方法来做到这一点。也不确定如何在视图级别处理这些差异。例如，在创建业务时，我想要显示/设置适用于业务类型的那些属性的选项。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T16:21:05.987

我就是这样做的。您应该有一个名为的属性`business_type`，可以让您选择要显示的属性。例如在显示视图中：

```
<% if @business.business_type == "restaurant" %>
  Provides take out: <%= @business.take_out %>
<% end %> 
```

您可以使用 jQuery 根据餐厅类型更改新表单上可用的字段：

```
<%= f.select :business_type, [["Restaurant", "restaurant"], ["Store", "store"]] %>
<script>
  $('#business_business_type').change(function(){
    // hide or show fields here based on this.value
  });
</script> 
```

如果您想避免有一堆数据库列，您可以使用 rails 3.2 中的键值存储（[本页](http://railscasts.com/episodes/318-upgrading-to-rails-3-2?view=asciicast)下方的 3/4 ）：创建一个名为`amenities`. 然后在`business.rb`：

```
store :amenities, accessors: [:wifi, :ac, :accessibility, ...] 
```

# sql-server - 转换错误的动态排序

> ID：13210915
> 
> 赞同：1
> 
> 时间：2012-11-03T16:05:48.303
> 
> 标签：sql-server, sql-server-2008, tsql

我正在尝试通过 pubs 数据库进行动态订单，并在尝试使用时收到以下错误`@sort_order = 2`

消息 245，级别 16，状态 1，第 6 行将 nvarchar 值“Pavlova”转换为数据类型 int 时转换失败。

[这是文章](http://www.sqlteam.com/article/dynamic-order-by)

```
SELECT * FROM Paging
WHERE seq > (@page_nbr - 1) * @page_size
  AND seq <= @page_nbr * @page_size
ORDER BY CASE
    WHEN @sort_order = 1 THEN ProductID
    WHEN @sort_order = 2 THEN ProductName
    ELSE CategoryID
END 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-03T16:16:18.640

`ProductID`, `ProductName`, 和`CategoryID`是不同的类型。CASE 的所有案例都需要评估为相同的类型。

查看此线程以获取其他替代方案：[https ://stackoverflow.com/a/751659/1373170](https://stackoverflow.com/a/751659/1373170)

接受的答案（多案例陈述）和`ROW_NUMBER()`方法似乎都是有效的。

# spring - Spring依赖注入未及时完成

> ID：13210919
> 
> 赞同：0
> 
> 时间：2012-11-03T16:06:15.090
> 
> 标签：spring, grails, dependency-injection, inversion-of-control

全部，

我正在使用依赖注入等设置 Spring IOC 容器。我遇到了一个非常奇怪的行为，其中似乎集合中的某些 bean 在使用前完全初始化，而其他 bean 则没有。奇怪的是，所有这些 bean 共享相同的超类，并且失败的依赖注入发生在超类依赖项之一中。这是示例：

```
@Component
class Bar {
  void doSomething() {
  // do something
  }
}

class Foo {
  @Autowired Bar bar
}

@Component
class FooSubclass1 extends Foo {
}

@Component
class FooSubclass2 extends Foo {
}

@Component
class FooManager implements InitializingBean {
  @Autowried Collection<Foo> myFoos

  void afterPropertiesSet() {
    for (Foo foo : myFoo) {
      foo.bar.doSomething()
    }
  }
} 
```

在启动过程中，上面的代码在迭代 FooSubclass1 的实例时会成功“doSomething”，但是当尝试访问 bar.doSomething() 时，当 bar 为 null 时，在迭代 FooSubclass2 的实例时会抛出一个空点。

值得注意的是，如果我不使用 InitializingBean 作为启动标记，我不会遇到这个问题。如果我只是等待应用程序加载然后遍历 Foos 的集合，一切都很好。因此，时间似乎存在某种问题—— FooSubclass2 的实例已创建 bean 并将其添加到上下文中，但没有完全注入 bean。

我对 spring 的理解是，给定对象应该在添加到上下文之前完全创建/注入，并且 AfterPropertiesSet 应该只在满足所有依赖项后运行。因此，我不确定从哪里开始调试此问题。

一些注意事项：我在 Groovy+Grails 设置上运行它，但我认为这与问题无关。封面下的所有核心弹簧，这显然是在弹簧级别发生的事情。此外，上面的示例与我的真实示例相比有些笨拙。我将几十个 DAO 类型对象的集合注入到 Autowired 集合中。注入成功地通过了几个 DAO，但总是在同一个 DAO 上失败。如果我从列表中删除该 DAO，它将在列表中的下一个上失败。

# javascript - 如何创建像 facebook 相册一样的多图像翻转效果

> ID：13210921
> 
> 赞同：-1
> 
> 时间：2012-11-03T16:06:17.023
> 
> 标签：javascript, css

当我将鼠标悬停在facebook相册上时，多个图像会发生变化，通过使用翻转效果我只能更改一个图像，当鼠标悬停在一个图像上时如何更改多个图像，>？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-03T16:53:20.467

您可以使用 javascript 或 CSS - 两者在翻转方面基本上是相互的，并且都有积极和消极的问题（如果浏览器没有脚本，用户将无法看到 javascript 翻转，如果浏览器是 IE ，它可能对 CSS 翻转的支持有限）。

[参见这里的 CSS](http://www.w3schools.com/cssref/sel_hover.asp) [和这里的 Javascript](http://www.dhtmlgoodies.com/tutorials/javascript-rollovers/)。

但我建议不要试图完全模仿任何特定的网站。特别是像 Facebook 这样的复杂软件，其中大部分代码都被混淆了。

# maven - 使用 Maven 安装 Whirr 时出错

> ID：13210923
> 
> 赞同：0
> 
> 时间：2012-11-03T16:06:37.133
> 
> 标签：maven, hadoop, apache-whirr

使用此命令安装 Whirr 时：

mvn 干净安装

发生此错误：

无法在项目 whirr-core 上执行目标：无法解析项目 org.apache.whirr:whirr-core:jar:0.1.0+23 的依赖项：无法解析以下工件：com.google.code.guice： guice:jar:2.1-r1201, javax.inject:inject:jar:1.0: 在[http://jclouds.googlecode.com/svn/repo](http://jclouds.googlecode.com/svn/repo)中找不到 com.google.code.guice:guice:jar:2.1-r1201已缓存在本地存储库中，直到 jclouds 的更新间隔已过或强制更新后才会重新尝试解析 -> [帮助 1]

如何解决此错误？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-03T16:48:26.193

尝试使用`-U`标志进行更新以强制更新。您可能遇到了暂时的网络问题：

`mvn -U clean install`

如果这不起作用，我想知道您是否在 POM 或`settings.xml`文件中指定了正确的存储库。也许谷歌看看哪些存储库拥有 Maven 找不到的工件？

# string - 在 perl 中创建一个多行字符串而不显式连接并且没有 \n

> ID：13210925
> 
> 赞同：0
> 
> 时间：2012-11-03T16:06:44.337
> 
> 标签：string, perl

我需要在 perl 中写下一个复杂的 MySQL 查询。我想将它构造成多行。

不幸的是，当使用 EOF 表示法时，perl 将 \n 插入到我的字符串中。有没有办法在多行中写下一个字符串，这样 perl 就不会在其中插入 \n ？我也不想用 + 明确地连接每一行。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-03T16:09:06.383

不，但您可以在事后轻松删除这些行。例如，这个：

```
(my $query = <<'EOF') =~ s/\n */ /g;
    SELECT col1,
           MIN(col2)
      FROM t
     WHERE col3 > 17
     GROUP
        BY col1
EOF

print "$query\n"; 
```

将打印：

```
 SELECT col1, MIN(col2) FROM table t WHERE col3 > 17 GROUP BY col1 
```

* * *

**编辑添加：**

关于上面的几点需要注意：

*   可以`my`用括号括起来 - 表达式；该变量的范围仍为封闭块。
*   -`my`表达式的计算结果是它声明的变量，您可以继续修改该变量。例如：

    ```
    (my $three) = 3;                        # same as:  my $three = 3;
    (my $four = 2) += 2;                    # same as:  my $four = 4;
    (my $five = 'twenty-five') =~ s/.*-//;  # same as:  my $five = 'five'; 
    ```

*   heredoc 表示法*在下*`<<`一行开始 heredoc（多行字符串）。例如：

     *```
    my $abc = <<'EOF' . 'xyz';    # same as:  my $abc = "abc\nxyz";
    abc
    EOF 
    ```

    事实上，这其实很常见；在行`<<EOF`的最后*一*件事有点不寻常，因为如果没有别的，通常在它后面有一个分号来表示语句的结束。

    如果您在同一行上有多个 heredocs，则每一个都从前一个结束后的行开始：

    ```
    my $abc = <<'EOF1' . <<'EOF2';    # same as:  my $abc = "abc\nxyz\n";
    abc
    EOF1
    xyz
    EOF2 
    ```*

# sql - 如何选择属性可以有两个值的行

> ID：13210930
> 
> 赞同：0
> 
> 时间：2012-11-03T16:07:06.210
> 
> 标签：sql

我有一个名为 site_attributes 的表，它看起来类似于：

```
siteId     attributeId     tier
-------------------------------
site1id    attribute1id    1
site1id    attribute2id    1
site1id    attribute3id    1 
```

如何从表中选择attributeId 等于attribute1id 且attributeId 等于attribute3id 的唯一站点ID？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-03T16:39:40.857

```
SELECT siteId, count(*) ct
FROM TableName
WHERE attributeId IN ('attribute1id', 'attribute3id')
GROUP BY siteId
HAVING ct = 2 
```

或者

```
SELECT t1.siteId
FROM TableName t1
JOIN TableName t2 USING (siteId)
WHERE t1.attributeId = 'attribute1id'
AND t2.attributeId = 'attribute3id' 
```

# php - php邮件功能出现问题

> ID：13210935
> 
> 赞同：2
> 
> 时间：2012-11-03T16:07:22.433
> 
> 标签：php, sendmail

我的 php.ini 看起来像这样：

```
 ; For Win32 only.
    ; http://php.net/smtp
    SMTP = localhost
    ; http://php.net/smtp-port
    smtp_port = 25

    ; For Win32 only.
    ; http://php.net/sendmail-from
    sendmail_from = you@yourdomain

    ; For Unix only.  You may supply arguments as well (default: "sendmail -t -i").
    ; http://php.net/sendmail-path
    sendmail_path = "/usr/sbin/sendmail -t -i -f akeel_mn@yahoo.com" 
```

我的 php 代码如下所示：

```
 <?php
    if(isset($_REQUEST['mail']))
    {
$success = mail("akeel26@gmail.com","hello","Welcome to our site!");
if($success)
{
    echo 'mail send';
}
else
{
    echo 'error';
}
    }
    ?> 
```

当我运行程序时，它显示为邮件发送，但邮件没有发送到预期的收件人..有人知道出了什么问题吗？除了 php.ini 之外，还有其他配置吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T16:28:01.570

您是否托管在支持电子邮件或在家托管的网站上？很多时候，家庭 ISP 提供商会阻止所有传出端口 25 流量。所以它将坐在队列中并显示为超时。

我也注意到你丢失的标题。不知道这是否有所作为。

```
$to = "whoever@wherever.com;
$subject = "About mail";
$message = "something to say"
$headers = "From: noreply@wherever.com";
mail($to,$subject,$message,$headers); 
```

# windows-phone-8 - 安装 Windows 8 后，必应地图在 WP7 上消失了吗？

> ID：13210936
> 
> 赞同：0
> 
> 时间：2012-11-03T16:07:25.943
> 
> 标签：windows-phone-8, bing-maps

我最近刚刚将我的操作系统更新到 Windows 8 并且还安装了 Visual Studio 2012（Windows Phone 8 SDK）。

我正在使用新界面并尝试查看安装的新功能，然后我的旧项目（内置于 Windows Phone 的 Visual Studio 2010 Express）是否会加载，我注意到一个大问题：

Bing 地图都没有加载。嗯，这很奇怪，我心想。我知道对于 Windows Phone 8，微软已经过渡到诺基亚映射，所以我认为它必须与新 SDK 中的映射有关。

所以我尝试打开 Visual Studio 2010 Express for Windows Phone SDK 并加载较旧的项目（在那个 SDK 中构建的），同样的事情发生了......地图都不会加载！！！我想也许它与服务器/api有关？？？但这看起来令人怀疑。

我是一名高中老师，我们实际上将在下周开始使用 MS VS 2010 Express for Windows Phone 开发手机应用程序，前几周的所有课程都是围绕地图构建的（使用 Bing 地图）。

如果我找不到加载这些地图的解决方案，我将陷入痛苦的世界。任何帮助将不胜感激！！！

编辑..................................这里有几张图片向您展示设计的外观以及如何模拟器显示相同的数据。（不确定这是否已连接，但在模拟器运行时我无法截屏 [PrntScr]） ![这是设计/ XAML](../Images/47d678de09fe6142e4cadbd2d0427b1b.png)

![这里是模拟器。 对不起这张可怕的照片](../Images/dcdb50e7fe1f451d7c225e677610b403.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-03T19:21:31.783

WP8 SDK 中还有 Bing 地图，你可以在这个文件夹中找到它们：

> C:\Program Files (x86)\Microsoft SDKs\Windows Phone\v8.0\Libraries

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T06:19:03.270

扩展 Martin Suchan 的正确答案。

在 WP8 中，必应地图控件已被弃用，但仍可供出于遗留原因希望使用它的开发人员使用。建议为 WP8 开发的应用程序过渡到 ROM 中内置的新诺基亚地图控件。但是必应地图控件仍然可以在 WP8 上运行（即使它的用户体验对于 WP8 消费者来说确实不合适）。

无需添加 WP8 项目的引用即可使用新的 Map 控件，因为它是所有 WP8 项目使用的引用的一部分。

# cappuccino - Objective-J CPView, CALayer, CPImageView 绘图

> ID：13210937
> 
> 赞同：1
> 
> 时间：2012-11-03T16:07:44.367
> 
> 标签：cappuccino

我正在学习 Cappuccino Objective J，在绘图方面有点难以理解 CPView、CALayer、CPImageView 之间的区别。

我对 JavaScript 有很好的了解，但没有使用 Objective C 和 cocoa 的经验。

我正在为我的 uni 项目构建一个小应用程序，该应用程序需要拖放图像、绘制线条和其他形状来链接它们。做这样的事情的应用程序是[gomockingbird](https://gomockingbird.com/mockingbird/#)。

我的问题是我应该使用上面提到的哪一个来放弃和借鉴。我查看了 cappucino.org 网站上的[FloorPlan](http://cappuccino.org/learn/demos/FloorPlan/index-deploy.html)示例，它使用 CPImageView 对象来拖放项目。由于我从教程中读到 CALayer 已针对此类操作进行了优化，因此我很难知道该使用哪一个。

欢迎任何指向示例或教程的链接。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T16:45:22.663

一般来说，CALayers 是旧的，不应该使用。

CPViews 是屏幕上最基本的 UI 元素。几乎所有东西都由视图（窗口、图像视图、按钮等）支持。视图可以有任意数量的子视图和一个超级视图。

如果您想在视图中自定义绘图（即 CoreGraphics 或类似 API 的画布），您需要继承 UIView 或 UIView 的继承者。然后，您将覆盖

```
- (void)drawRect:(CGRect)aRect; 
```

UIImageView 是 UIView 的子类。它的唯一目的是在屏幕上显示图像。

对于您的项目，我想我会执行以下操作：创建一个“画布视图”，这是用户将与之交互的内容。根据需要将 UIImageViews 拖放到画布上。然后对于线条绘制，让画布视图本身从每个图像中绘制线条。

重要的是要记住，进行自定义绘图的大视图往往会变慢。如果您在用户绘图时注意到一些缓慢，那么在所有图像下插入一个临时绘图视图可能是有意义的。然后，当用户放下绘图线时，“画布视图”会自行更新，临时绘图视图会从视图层次结构中删除。

希望那有所帮助！

# c# - “任意”分隔符之间的正则表达式替换

> ID：13210939
> 
> 赞同：2
> 
> 时间：2012-11-03T16:08:01.440
> 
> 标签：c#, .net, regex, delimiter, replace

我在替换“任意”分隔符之间的部分文本文件时遇到了一些问题。

这是我想要做的：我有如下标记：

```
//   [ADX START] ANYTHING //   [ADX END] 

<!--    [ADX START] --> ANYTHING <!-- [ADX END]  -->

/*   
 [ADX START] */  ANYTHING /*  [ADX END]        */ 
```

所以，这些是不同的评论风格，我想抓住开头的 [ADX START]（包括周围的评论），然后是中间的文本，最后是最后的 [ADX END]。

因此，我给它一个像这样的文本文件：

```
test.php:
<?php
BEFORE    
// [ADX START]
REMOVEME
// [ADX END]
AFTER

test.css:
BEFORE    
/* [ADX START]*/
REMOVEME
/*[ADX END] */
AFTER 
```

变成：

```
test.php:
<?php
BEFORE    
AFTER

test.css:
BEFORE    
AFTER 
```

等等。如您所见，注释样式和分隔符之间可以有任意数量的空格（或没有空格）。

所以，到目前为止，我想出的是以下内容：

```
string newFileContent = Regex.Matches(fileContent, "(\\[ADX START\\].*\\[ADX END\\])", RegexOptions.IgnoreCase); 
```

但是，这无济于事。我认为让我绊倒的是括号等；此外，我希望能够简单地插入不同的注释样式，例如 #、//、/**/ 等；

任何指向正确方向的指针都将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T16:28:10.180

像这样使用单行选项和正则表达式

```
string strRegex =@"(\/\/|\/\*).*?\[ADX START\].*?\[ADX END\]\s*(\*\/)?";
                         ^                      ^                 ^
                         |                      |                 |->match */ 0 or 1 time
                         |                      |
                         |                      |->match lazily till the first ADX END
                         |->match // or /*
string s=Regex.Replace(fileContent,strRegex,"",RegexOptions.Singleline);//replace it 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-03T16:24:25.170

`.*`通常不会跨换行符匹配；你需要`RegexOptions.Singleline`让它做到这一点。但是，那么您应该使用`.*?`来获得非贪婪匹配。此外，您的正则表达式不会尝试捕获之前`[ADX START]`或之后的部分行`[ADX END]`。最后，您使用的是`Regex.Matches`, not `Regex.Replace`，因此它实际上并没有修改任何内容。

试试这个：

```
Regex commentRegex = new Regex(@"^.*?\[ADX START\].*?\[ADX END\].?$", RegexOptions.IgnoreCase | RegexOptions.Singleline);
string newFileContent = commentRegex.Replace(fileContent); 
```

# python - 从 List 创建一个字符串并添加一个换行符

> ID：13210945
> 
> 赞同：2
> 
> 时间：2012-11-03T16:08:31.643
> 
> 标签：python, string, newline

我正在创建一个从函数返回的字符串。我需要字符串来列出一些值。

我创建了一个列表，该列表在末尾加入以构成完整的字符串。我试图在列表附加到的while循环中的每次迭代上添加一个新行。

```
while shiftAmount < 25: #Iterates through all 26 combinations producing a processed value each time.
    shiftAndStore(shiftAmount)
    shiftAmount = shiftAmount + 1
    stringshift = str(shiftAmount)
    outputCipherText.append("The Encoded / Decoded text on shift " + str((shiftAmount - 1)) + " is ")
    outputCipherText.append(str(''.join(completePlainText)) + " \n")
    completePlainText = []
output = [''.join(outputCipherText)] 
```

谁能告诉我为什么这不起作用？查看输出它显示了 \n 但不执行它并换行。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-03T17:04:16.577

问题是您不是在打印字符串，而是在打印字符串列表。线

```
output = [''.join(outputCipherText)] 
```

正在将单个字符串添加到列表中。这对我来说看起来没用，你可以简单地改变它：

```
output = ''.join(outputCipherText) 
```

获取一个字符串，而不是只包含一个字符串的列表。更改后，您可以使用`print output`并且所有特殊字符都将被*执行*，因此这些`\n`字符将显示为换行符。

如果您不想更改代码，则必须打印字符串而不是字符串列表：

```
print output[0] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-03T16:20:14.860

如果我错了，请纠正我，但我认为你不必包括这个`outputCipherText.append(str(''.join(completePlainText)) + " \n")`和`completePlainText = []`. 您可以在循环后使用换行符直接输出 outputCipherText`output = '\n'.join(outputCipherText)`并调用`print(output)`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-03T16:51:34.617

放：

```
 output.append(''.join(outputCipherText)) 
```

在 while 循环结束时删除`output = [''.join(outputCipherText)]`它。

# jquery - FullCalendar 1.5.4 - EventResized 不会在周视图或日视图中触发

> ID：13210950
> 
> 赞同：0
> 
> 时间：2012-11-03T16:08:48.693
> 
> 标签：jquery, jquery-ui, resize, fullcalendar

我尝试升级到 FullCalendar 1.5.4，但是当我在周视图或日视图中调整事件大小时， eventResized 事件永远不会被调用。我使用与演示完全相同的脚本：

```
jquery v 1.8.1
jquery-ui v1.8.23
fullcalendar v1.5.4 
```

我尝试使用最新版本的 jquery 和 jquery-ui 框架，但也没有帮助。

如果我降级到 FullCalendar 1.5.3，eventResized 会被触发，但我在周视图或日视图中看不到调整大小的动画。并不是说调整大小在月视图中应该完美。

有人见过这个问题吗？

# java - 当 Thread.sleep 抛出 InterruptedException 时？

> ID：13210952
> 
> 赞同：1
> 
> 时间：2012-11-03T16:08:54.553
> 
> 标签：java

thread.sleep 什么时候产生 InterruptedException？我正在使用这个但没有发生异常。请帮助使用线程。关于将信息传递给线程并从线程返回信息。公共类 myThread 扩展 Thread{

```
@Override
public void run(){

    try{

    while(true) {
        Thread.sleep(200);   
        System.out.println("Thread is running");

    }
   }
   catch(InterruptedException ex){
   System.out.println("Exception Occur");
   }
} 
```

200 毫秒后不会发生异常。为什么？？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-03T16:11:02.410

据我所知，当您尝试杀死/中断正在休眠的线程时，会生成 InterruptedException。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-03T16:16:17.437

`InterruptedException`响应在管理您调用的线程的实例`Thread.interrupt`上被调用而引发. 您可以通过自己调用该方法轻松地对其进行测试，即使在您调用. 只是在那个电话之前，看看会发生什么。`Thread``sleep``sleep``Thread.currentThread().interrupt()`

# r - 在 R 中生成新的子时间序列

> ID：13210962
> 
> 赞同：0
> 
> 时间：2012-11-03T16:09:27.753
> 
> 标签：r

我想根据主时间序列的列索引生成时间序列列表 ( `m`)

```
head(cols)
          [,1] [,2] [,3] [,4] [,5] [,6] [,7] [,8] [,9] [,10] [,11] [,12] [,13] [,14] [,15] [,16] [,17] [,18]
    [1,]    1    1    1    1    1    1    1    1    1     1     1     1     1     1     1     1     1     1
    [2,]    2    2    2    2    2    2    2    2    2     2     2     2     2     2     2     2     2     2
    [3,]    3    3    3    3    3    3    3    3    4     4     4     4     4     4     4     5     5     5
    [4,]    4    5    6    7    8    9   10   11    5     6     7     8     9    10    11     6     7     8 
```

因此，例如，列表中的第一个 data.frame 将由`m[,1], m[,2], m[,3]`并且`m[,4]`看起来像

```
 1            2             3            4   
2012-01-01 -0.0248361511  0.0127908458 -0.011976191  0.009987137
2012-01-02 -0.0005351887  0.0290350115  0.004208001  0.007078312
2012-01-03 -0.0016072867  0.0042660695  0.008660648 -0.018255748
2012-01-04  0.0016072867 -0.0001303243  0.001782532 -0.004775416
2012-01-05  0.0026730837 -0.0038740336 -0.007149271  0.015511091 
```

14 号会是这样的

```
 1            2             4            10
2012-01-01 -0.0248361511  0.0127908458  0.009987137  0.0051973431
2012-01-02 -0.0005351887  0.0290350115  0.007078312  0.0081517268
2012-01-03 -0.0016072867  0.0042660695 -0.018255748 -0.0008121889
2012-01-04  0.0016072867 -0.0001303243 -0.004775416  0.0071366761
2012-01-05  0.0026730837 -0.0038740336  0.015511091  0.0186782999 
```

有没有我可以在表单中编写或使用的功能

```
apply(cols,2, function(x)  DOSOMETHINGLIKE"a <- merge(a,m[x])"HERE) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-03T16:27:50.973

1.  一些样本数据：

    ```
    set.seed(1)
    setRmetricsOptions(myFinCenter = "GMT")
    charvec = timeCalendar()
    TS <- as.timeSeries(matrix(rnorm(60), ncol = 5), charvec)
    head(TS)
    # GMT
    #                  TS.1        TS.2        TS.3       TS.4       TS.5
    # 2012-01-01 -0.6264538 -0.62124058  0.61982575 -0.3942900 -0.1123462
    # 2012-02-01  0.1836433 -2.21469989 -0.05612874 -0.0593134  0.8811077
    # 2012-03-01 -0.8356286  1.12493092 -0.15579551  1.1000254  0.3981059
    # 2012-04-01  1.5952808 -0.04493361 -1.47075238  0.7631757 -0.6120264
    # 2012-05-01  0.3295078 -0.01619026 -0.47815006 -0.1645236  0.3411197
    # 2012-06-01 -0.8204684  0.94383621  0.41794156 -0.2533617 -1.1293631 
    ```

2.  验证`class`数据以查看它是否不是标准`data.frame`：

    ```
    class(TS)
    # [1] "timeSeries"
    # attr(,"package")
    # [1] "timeSeries" 
    ```

3.  制作一个示例矩阵，我们将从上面创建的 TS 对象中选择列：

    ```
    GetMe <- replicate(3, sample(5, 3))
    GetMe
    #      [,1] [,2] [,3]
    # [1,]    5    1    3
    # [2,]    2    4    1
    # [3,]    4    2    4 
    ```

4.  用于`lapply`根据上述矩阵的列值进行子集化：

    ```
    myList <- lapply(1:ncol(GetMe), function(x) TS[, GetMe[, x]])
    myList[[1]] # View one of the resulting subsetted data
    # GMT
    #                  TS.5        TS.2       TS.4
    # 2012-01-01 -0.1123462 -0.62124058 -0.3942900
    # 2012-02-01  0.8811077 -2.21469989 -0.0593134
    # 2012-03-01  0.3981059  1.12493092  1.1000254
    # 2012-04-01 -0.6120264 -0.04493361  0.7631757
    # 2012-05-01  0.3411197 -0.01619026 -0.1645236
    # 2012-06-01 -1.1293631  0.94383621 -0.2533617
    # 2012-07-01  1.4330237  0.82122120  0.6969634
    # 2012-08-01  1.9803999  0.59390132  0.5566632
    # 2012-09-01 -0.3672215  0.91897737 -0.6887557
    # 2012-10-01 -1.0441346  0.78213630 -0.7074952
    # 2012-11-01  0.5697196  0.07456498  0.3645820
    # 2012-12-01 -0.1350546 -1.98935170  0.7685329 
    ```

5.  验证`class`此列表中对象的 es：

    ```
    lapply(myList, class)
    # [[1]]
    # [1] "timeSeries"
    # attr(,"package")
    # [1] "timeSeries"
    # 
    # [[2]]
    # [1] "timeSeries"
    # attr(,"package")
    # [1] "timeSeries"
    # 
    # [[3]]
    # [1] "timeSeries"
    # attr(,"package")
    # [1] "timeSeries" 
    ```

6.  **将来** *请提供一个可重复的示例，并在您的问题中具体说明您实际使用的内容（例如，您用于创建数据的包、当前加载的内容等）。您的问题清楚地表明您正在使用`data.frame`s，但您对我的原始答案的评论表明您实际上正在使用包中的一个`timeSeries`对象，该对象`timeSeries`需要（稍微）不同的方法。*

# algorithm - 查找给定节点和坐标列表的最近节点

> ID：13210966
> 
> 赞同：2
> 
> 时间：2012-11-03T16:10:40.080
> 
> 标签：algorithm, graph-algorithm

假设我有一系列位置及其 X、Y 坐标：

L1(X1, Y1) L2(X2, Y2) L3(X3, Y3) ... L10000(X10000, Y10000)

我有一个函数可以返回两个位置之间的距离：距离（L1，L2）= 5 英里

对于给定位置，我如何找到 100 英里内的所有位置？或者如果更简单，50 个最近的位置

我们的设置是位置及其邮政编码的 SQL Server 表。该函数采用 2 个邮政编码，查找每个邮政编码的纬度/经度并返回距离。我们可以缓存结果，因为它们不会经常更改。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T21:40:05.057

如果您可以将所有位置存储在内存中（lat/lon/id），请使用 Kd-tree。请参阅我对[另一个问题](https://stackoverflow.com/questions/13197045/find-the-closest-point-from-list-to-one-referent-list/13205602#13205602)的回答 Kd-trees 允许有效的最近邻搜索和 k-最近邻搜索。平均时间复杂度为 O(log n)。如果您无法将所有位置存储在内存中，请检查您的数据库是否支持空间索引。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-03T16:20:46.810

您将不得不遍历它们并简单地丢弃所有距离 100 英里远的位置，这将是 O(N)

```
SELECT Location FROM Table WHERE (POWER(Location.X-Selected.X,2) + POWER(Location.Y-Selected.Y,2)) < POWER(Distance,2) 
```

位置将是位置条目。Selected 将是您选择的城市，只需将其 X 和 Y 替换为相应的位置。

我的 SQL 有点生疏了，如果有错误请大喊大叫，我会修复它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-03T16:22:06.357

你并没有真正给我们很多关于表结构的信息，所以很难给你一个准确的答案。但是，假设目标邮政编码作为参数 P1 提供给查询。进一步假设表 T 具有 id、name 和 zip 字段。要查找 100 英里内的所有位置，我们可以使用

```
select id, name, zip, distance(zip,P1) as distance
from T
where distance(zip,P1) <= 100 
```

对于前 50 个查询

```
select top 50 id, name, zip, distance(zip,P1) as distance
from T
order by distance(zip,P1) 
```

更好的解决方案是计算每个位置的纬度和经度并将其存储在数据库中。您可以考虑跳过函数中的纬度/经度查找并显着提高速度。我假设您已经获得了计算现有函数中大圆距离的代码。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-03T16:23:22.617

一种解决方案是编写一个如下所示的通用函数，并允许切割：

```
Location[] findLocationsWithinDist(Location L1, Integer dist, LocationsList locations){
    LocationList results;
    foreach(location : locations){
        if(dist(L1, location) <= dist)
            results.add(location);
    }
    return results;
} 
```

您可以拥有一个数据结构，将每个位置与特定范围内的位置列表一起存储。然后，每次添加新位置时都需要更新此数据结构。不过，这似乎是一个单独的问题。

# lua - 访问库 Corona SDK 中图片的所有文件名

> ID：13210967
> 
> 赞同：0
> 
> 时间：2012-11-03T16:10:48.083
> 
> 标签：lua, coronasdk

有没有办法在 Corona SDK 中获取所有图库图像？我知道`media`“类”和它的`show()`功能，但在找到访问这些图像文件的方法后，我打算添加自己的功能。我只想在只读上下文中使用它们，我不想修改或删除它们。我只需要一个功能，它将启用此功能：

```
local galleryFiles = SOME_MAGIC_FUNCTION_HERE();

for i=1, #galleryFiles do
    local fileName = galleryFiles[i];
    local image = display.newImage(fileName);
end 
```

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T14:59:07.343

Corona 根本无法与画廊合作。

您需要等待支持（我认为这甚至不在路线图上）或购买企业许可证，这允许您沿着 Corona 编写本机代码（但不能访问 Corona 源代码）。

我听说的企业许可证大约是 1500 美元一个席位……太贵了（特别是当你看不到源的时候）。

# asp.net-mvc - WebApi 控制器在 Entity Framework 5 和 MVC 4 项目中返回值

> ID：13210975
> 
> 赞同：0
> 
> 时间：2012-11-03T16:12:24.853
> 
> 标签：asp.net-mvc, asp.net-mvc-3, asp.net-web-api

我正在 MVC 4 项目中处理 webapi、EF5、Windsor Castle，我有一个问题......我应该在 Get 方法中返回实体（或 DTO）还是应该返回 HttpResponseMessage？更好的方法和更标准的方法是什么？

那么，是这个吗？

```
[System.Web.Http.HttpGet]
public HttpResponseMessage GetById(long id)
{
    var branch = Uow.Branches.GetById(id);
    if (branch != null)
    {
        Request.CreateResponse(HttpStatusCode.OK, branch);
    }

    throw new HttpResponseException(new HttpResponseMessage(HttpStatusCode.NotFound));
} 
```

或这个？

```
[System.Web.Http.HttpGet]
public Branch GetById(long id)
{
    var branch = Uow.Branches.GetById(id);
    if (branch != null) return branch ;
    throw new HttpResponseException(new HttpResponseMessage(HttpStatusCode.NotFound));
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-04T13:46:32.163

我将返回包装在 HttpResponseMessage 中的 DTO，如下所示：

```
return this.Request.CreateResponse(HttpStatusCode.OK, branch); 
```

DTO/ViewModel 将允许仅发送所需的属性。

HttpResponseMessage 允许发送额外的状态码，例如在输入无效的情况下，我们可以发送 statusCode 前置条件失败。

```
if (model.EventDate == null)
            {
                var responseMessage = new HttpResponseMessage();
                responseMessage.StatusCode = HttpStatusCode.PreconditionFailed;
                responseMessage.ReasonPhrase = "Please enter valid EventDate input";
                return responseMessage;

            } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-03T17:20:56.043

依靠。但是，在您的示例中，由于 Get 操作的两个版本产生相同的响应，因此我将返回实体分支而不是 HttpResponseMessage。这是因为该框架将帮助抽象出 HttpResponseMessage 的实际创建，因此该操作更侧重于业务逻辑。

如果您需要对响应消息进行更多控制（即设置不同的状态代码），那么我将改为返回 HttpResponseMessage。

希望这可以帮助。

# javascript - 命名空间的自动加载 i18next

> ID：13210978
> 
> 赞同：5
> 
> 时间：2012-11-03T16:12:45.800
> 
> 标签：javascript, internationalization, i18next

我使用 I18Next 作为基于 Javascript 的翻译解决方案，这就是需要发生的事情：

1.  加载默认命名空间“Core”。它包含我想要的大多数键，但不是全部。
2.  没有固定的命名空间列表：因此我不能只告诉我想要`i18n.init`的s。`ns.namespace`
3.  在页面加载期间，可选的一些“模块”被加载到应用程序中，它们也需要被翻译。他们应该在某处报告他们的 i18n 命名空间名称，然后 i18n shuold 使该命名空间的键可用。

基本上，i18next 有没有办法在调用命名空间时自动加载它们？保证被调用的命名空间`t("[SomeNamespace]Key.Key2");`是有效的并且肯定存在。问题很简单，i18next 不能“自动加载”，我无法找到一种方法让 i18n在调用 i18n.init**后“手动”加载资源文件。**

这是我当前的代码。

```
 $.i18n.init(
        {
            lng: "en",
            fallbackLng: "en",
            useCookie: false,
            resGetPath: "System/i18n/__ns__/__lng__.json",
            ns: "Core"
        },
        function(t) {
            System.I18N = t;

            alert(System.I18N("LoginUI:Messages.Name"));
        }
    ); 
```

正如预期的那样，它只是显示我`LoginUI:Messages.Name`而不是翻译`System/i18n/LoginUI/en.json`：

```
{
    "Messages": {
        "Name": "Logon Interface"
    }
} 
```

（在这种情况下，Core/en.json 无关紧要。我目前需要的是自动加载“LoginUI/en.json”，或者我可以强制手动加载。）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-04T10:48:16.800

i18next 现在带有一个在初始化后加载其他命名空间的功能：[https ://www.i18next.com/principles/namespaces#sample](https://www.i18next.com/principles/namespaces#sample)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-04T01:46:47.293

在深入研究了源代码之后，我创建了一个可行的解决方案，但从长远来看肯定需要改进。

在`i18n.addjQueryFunct()`的定义中，添加这个以访问 resStore（翻译存储变量）：

```
$.i18n._getResStore = _getResStore;
$.i18n._writeResStore = _writeResStore;

function _getResStore() {
    return resStore;
}

function _writeResStore(r) {
    resStore = r;
} 
```

当您想加载额外的命名空间时，只需执行以下操作：

```
// define options, run $.i18n.init, etc...
// suppose ns = "namespace_foobar_new"
options.ns.namespaces.push(ns);
$.i18n.sync._fetchOne(lang, ns, $.extend({}, $.i18n.options, options),
    function(err, data) {
    store = {};
        store[lang] = {}; store[lang][ns] = data;

            newResStore = $.extend(true, {}, $.i18n._getResStore(), store);
            $.i18n._writeResStore(newResStore);
    }); 
```

呸。

# assembly - 如何在 asm(x87) 中查看并放入数组

> ID：13210982
> 
> 赞同：0
> 
> 时间：2012-11-03T16:12:50.840
> 
> 标签：assembly, x87

我有一个任务 - 计算函数的 6 个结果 (Y = (20 * x) /(5 * x2 – 8,5)) x - 从 1 开始，每次计算必须增加 4 (1, 5, 9 .. ）。

我写了一些代码，但我不明白如何制作循环并将数据放入数组。所有操作都必须在 asm 上 - 循环并放入数组，1 次迭代 - 数组中的 1 个元素

有我的代码：

```
int main()
{
float REZ[6];
int x = 1;
int A =5;
int B=20;
float C = 8.5;
int D =2000;
int increment = 4;
float part;
float val;

_asm{
finit   
fild x
fimul x
fimul A
fsub C
fstp part
fild D
fimul x
fdiv part
fstp val
} 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T16:39:07.010

我的组装时间早已一去不复返了，但我会努力的。汇编中的循环是通过定义一个标签并跳转到该标签来完成的。根据循环，它是一个条件跳转（经过一些比较）：

**伪汇编**：

```
label1:
    ...
    cmp x, 6
    jlt label1 
```

有关详细信息，请查看[X86 组装/控制流程](http://en.wikibooks.org/wiki/X86_Assembly/Control_Flow)。

或无条件跳转：

```
label1:
    ...
    jmp label1 
```

了解汇编的另一种方法是查看编译器输出。参见例如：

```
int x, y;
for (x = 0; x < 6; ++x)
    y = (20 * x) / (5 * x2 – 8,5); 
```

告诉 gcc 在程序集输出处停止：

> gcc -S 循环.c

并寻找结果`loop.s`

# html - 如何在 CSS/HTML 中获得粘性页脚？

> ID：13210990
> 
> 赞同：2
> 
> 时间：2012-11-03T16:14:26.330
> 
> 标签：html, css

我用过这个人指南。

[http://matthewjamestaylor.com/blog/keeping-footers-at-the-bottom-of-the-page](http://matthewjamestaylor.com/blog/keeping-footers-at-the-bottom-of-the-page)

但是我的页脚只是位于页面的中间，而不是整个页面的宽度。

有人可以帮忙吗。

这是CSS。

```
body {
background: url(images/topbg.png) repeat-x;
font-family: Arial, Helvetica, sans-serif;
font-size: 17px;
color:#000;
margin:0;
padding:0;
height:100%;
}

h1 {
font-size:100px;
color:#FFF; 
line-height: 10%;
font-family: 'Exo', sans-serif;
}

h2 {
font-size:100px;
color: #18942f; 
line-height: 80%;
font-family: 'Exo', sans-serif;
}

h3 {
font-size: 20px;    
}

.page-container {

width: 960px;
margin-bottom: auto; 
margin-left: auto; 
margin-right: auto;
min-height:100%;
position:relative;

}

.top-nav ul {
margin: 0;
list-style: none;
line-height: normal;
}

.top-nav li {
margin-left: 220px;
}

.top-nav a {
display: block;
float: left;
height: 38px;
margin-right: 1px;
padding: 4px 30px 0 30px;
text-decoration: none;
font-size: 34px;
font-weight: bold;
font-family: 'Exo', sans-serif;
color: #FFF;
}

.top-nav a:hover {
background:  #272727;
color: #18942f;
}

.top-nav .current_page_item a {
background:  #252525;
color: #FFF;
}

#name {
float: left;
margin-top: 70px;
}

#badge {
float:right;
margin-right: 100px;
margin-top: 10px;

}
.info {
clear: both;
padding-bottom:60px;
}

#about {
height: 250px;
width: 300px;
float:left;
}

#about2 {
width: 860px;   
}

#skills {
height: 250px;
width: 300px;
float: left;
text-align: center; 
}

#contact {
height: 250px;
width: 300px;
float: left;
text-align: right;
}

.about3 {
float:left;
width: 500px;   
}
.picture1 {
margin-left: 560px;
padding-top: 25px;
}
.about4 {
width:450px;

}

.footer {

background: url(images/footer.png)repeat-x;
position:absolute;
bottom:0;
width:100%;
height:60px;
}

.footer-links {
font-family:'Exo', sans-serif;
color: #FFF;
font-size:26px;
padding-top: 50px;
text-align:center   
} 
```

这是HTML

```
<div class="page-container">
<div class="top-nav"> 
  <ul> 
    <li class="current_page_item"><a href="#">Home</a></li> 
    <li><a href="aboutme.html" class="links">About Me</a></li> 
    <li><a href="skills.html" class="links">Skills</a></li> 
    <li><a href="contact.php" class="links">Contact</a></li> 
  </ul> 
</div>
<div id="name"><h1>My</h1>
  <h2>Name</h2></div>
  <div id="badge"><img src="images/webbadge.png" alt="" width="310" height="310" /></div>
  <div class="info">
  <div id = "about"> </div>
   <div id = "skills"> </div>
  <div id = "contact"></div> 
```

```
<div class ="footer">
<div class ="footer-links">

<a href="#" style="color:#FFF">Home </a> -

<a href="#" style="color:#FFF">About</a> -

<a href="#" style="color:#FFF">#</a> -

<a href="#" style="color:#FFF">#</a>
</div>
</div>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T16:21:54.843

```
<style>
 .footer
{
   position:fixed;
   bottom:0px;
   z-index:2;
   width:100%;
   padding:5px;
}
</style> 
```

就这么简单？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-03T16:25:07.777

这个效果很好，并且已经在多个浏览器上进行了测试。提供基本的 CSS/HTML 以帮助您入门，以及一本不错的手册

[http://www.cssstickyfooter.com/](http://www.cssstickyfooter.com/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-03T16:27:43.297

这应该是：

```
.footer {
background: url(images/footer.png)repeat-x;
width:100%;
height:60px;
} 
```

或者：

```
.footer {
background: url(images/footer.png)repeat-x;
position:absolute;
top:{TOP}px;
width:100%;
height:60px;
} 
```

使用 {TOP} 将页脚固定在您想要的位置。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-03T16:38:13.047

我对您的代码进行了一些清理，这就是我解决问题的方法：

[http://jsfiddle.net/hPWVk/](http://jsfiddle.net/hPWVk/)

HTML

```
 <div class="page-container">

        <div class="top-nav"> 
            <ul> 
                <li class="current_page_item"><a href="#">Home</a></li> 
                <li><a href="aboutme.html" class="links">About Me</a></li> 
                <li><a href="skills.html" class="links">Skills</a></li> 
                <li><a href="contact.php" class="links">Contact</a></li> 
            </ul> 
        </div>

        <div class="content">

            <div id="name">
                <h1>My</h1>
                <h2>Name</h2>
            </div>

            <div id="badge"><img src="images/webbadge.png" alt="" /></div>

            <div class="info">
                <div id = "about"></div>
                <div id = "skills"></div>
                <div id = "contact"></div>

            </div>

        </div>

        <div class ="footer">
            <div class ="footer-links">
                <a href="#" style="color:#FFF">Home </a> -
                <a href="#" style="color:#FFF">About</a> -
                <a href="#" style="color:#FFF">#</a> -
                <a href="#" style="color:#FFF">#</a>
            </div>
        </div>

    </div>

</body> 
```

CSS

```
body {
background:orange url(images/topbg.png) repeat-x;
font-family: Arial, Helvetica, sans-serif;
font-size: 17px;
color:#000;
margin:0;
padding:0;
height:100%;
}

h1 {
font-size:100px;
color:#FFF; 
line-height: 10%;
font-family: 'Exo', sans-serif;
}

h2 {
font-size:100px;
color: #18942f; 
line-height: 80%;
font-family: 'Exo', sans-serif;
}

h3 {
font-size: 20px;    
}

.page-container {

width: 960px;
margin-bottom: auto; 
margin-left: auto; 
margin-right: auto;
min-height:100%;
position:relative;

}

.top-nav
{
   overflow:hidden; 
}

.top-nav ul {
margin: 0;
list-style: none;
line-height: normal;
}

.top-nav li {
margin-left: 220px;
}

.top-nav a {
display: block;
float: left;
height: 38px;
margin-right: 1px;
padding: 4px 30px 0 30px;
text-decoration: none;
font-size: 34px;
font-weight: bold;
font-family: 'Exo', sans-serif;
color: #FFF;
}

.top-nav a:hover {
background:  #272727;
color: #18942f;
}

.top-nav .current_page_item a {
background:  #252525;
color: #FFF;
}

.content { overflow:hidden; }

#name {
float: left;
margin-top: 70px;
}

#badge {
float:right;
margin-right: 100px;
margin-top: 10px;

}

#badge img { width:50pxl height:50px; }

.info {
overflow:hidden;
padding-bottom:60px;
}

#about {
height: 250px;
width: 300px;
float:left;
}

#about2 {
width: 860px;   
}

#skills {
height: 250px;
width: 300px;
float: left;
text-align: center; 
}

#contact {
height: 250px;
width: 300px;
float: left;
text-align: right;
}

.about3 {
float:left;
width: 500px;   
}
.picture1 {
margin-left: 560px;
padding-top: 25px;
}
.about4 {
width:450px;

}

.footer {

background: url(images/footer.png)repeat-x;
position:fixed;
bottom:60px;
width:100%;
height:60px;
}

.footer-links {
font-family:'Exo', sans-serif;
color: #FFF;
font-size:26px;
padding-top: 50px;
text-align:center   
}​ 
```

# c1-cms - 从 Composite C1 中删除全局内容语言声明

> ID：13210991
> 
> 赞同：2
> 
> 时间：2012-11-03T16:14:29.283
> 
> 标签：c1-cms

我有一个客户希望他的网站根据[http://validator.w3.org/](http://validator.w3.org/)上的标记验证服务完全有效的 HTML 5 标记我认为他可以忍受的只有一个小错误，但我想要尽可能清理。有谁知道如何`<meta http-equiv="Content-Language" content="en" />`从 Composite C1 中的标题标记中删除设置全局语言的元元素？我一直没有成功找到它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T09:07:38.243

Content-Language 元标记是从 Composite.Web.Html.Template.CommonMetaTags 函数发出的，并且确实不是 html5。

您可以通过删除函数调用（`<f:function name="Composite.Web.Html.Template.CommonMetaTags" />`从您的布局模板中）来解决此问题。这也将删除其他元标记，您可以根据需要插入它们。

其他元标记如下：

```
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="Generator" content="Composite C1 CMS - Free Open Source from http://composite.net/" /> 
```

感谢您在此处的帖子，这已被注册为 Composite C1 的错误，应该在下一个版本中修复。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T02:58:09.670

问题出在 Composite.Web.Html.Template.CommonMetaTags 函数上。我仍然不知道如何更改函数本身，但作为一种解决方法，我只是将它挤出的标签减去内容语言和

# php - 为 HTML 编码 mySQL 文本？

> ID：13210992
> 
> 赞同：0
> 
> 时间：2012-11-03T16:14:29.450
> 
> 标签：php, html, mysql

我目前正在开发一个数据库类型的网站，其中包含的一些文本是纯文本，例如撇号、版权、保留符号等。

该数据库包含 2000 多个条目。我试图想出一种快速安全的方法来用编码的 Ex:`&copy;`类型字符替换未编码的纯文本符号和字符，以确保文本在网站上正确呈现。

我在想类似的东西：

```
while($row = mysql_fetch_array($results)){
  if (strstr($row['description'], '©'){ 
       //replace with &copy;
  }
  if(strstr($row['description'], '\''){
            //replace with &#39;
  }
   ....etc...
  //once correct string is created, use mySQL to 
  // update $row['description'] for this row...
 } 
```

我想知道这种方法是否可以解决我的问题？如果有人可以帮助指导我以安全的方式完成此任务？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-03T16:20:10.823

() 方法是执行此`htmlentities`操作的适当方法。

[请参阅有关htmlentities](http://php.net/manual/en/function.htmlentities.php)的PHP 手册。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-03T16:24:21.087

您可以使用`htmlentities()`但不要忘记`html_entity_decode()`在回显您的文本时使用..

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-03T16:43:30.230

对于那些有类似问题的人，我发现这是我的问题的解决方案：

我的内容类型设置为 UTF-8，而不是下面的：

```
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1"> 
```

将上面的代码添加到我的 html 头标记中会自动修复呈现问题。

# java - 扫描仪给出相同的值 2x 而不是 1

> ID：13210994
> 
> 赞同：0
> 
> 时间：2012-11-03T16:14:37.020
> 
> 标签：java, variables, input, scope

所以我有这个功能：

当我使用下面的代码时，我将球体半径传递给扫描仪，他会识别双精度并应将它们传递给 toRound 函数。

```
 String outputDoubles = " double one: 190.234567 and double two: 370.03245 "; 

    Scanner doubles = new Scanner(outputDoubles);
    doubles.useDelimiter("[^\\p{Alnum},\\.-]");
    while(true) {
        double takeDouble;

        if (doubles.hasNextDouble()) {
            takeDouble = doubles.nextDouble(); // takedouble
            System.out.println(toRound(takeDouble));

        }

        if (doubles.hasNext()) {
            doubles.next();

        }
        else {
            break;
        }

    } 
```

toRound 在下面：

```
static String toRound (double number) {
    double x = number; // nog fixen
    System.out.println(" \n");
    double y = number; 
    return "" + x + y;
} 
```

问题是它不返回： 190.234567 但它返回： 190.234567190.234567190 所以它在彼此之后返回 2 次。

有没有办法解决这个问题，我已经尝试了几个小时不同的东西，但无法让它工作。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-03T16:20:50.527

`return "" + x + y;`将“x”转换为字符串，然后附加它，将“y”转换为字符串，然后附加，因此输出加倍。

您需要重写此表达式`"" + (x + y)`，以便在将其转换为字符串之前评估您的表达式。

# php - 使用 CakePHP 构建带有子域的 Web 应用程序

> ID：13210996
> 
> 赞同：0
> 
> 时间：2012-11-03T16:14:50.057
> 
> 标签：php, cakephp

我正在使用 CakePHP 构建一个 Web 应用程序，它允许用户为他们的公司/组织创建子域。例如`company-name.domain.com`

为此，我有一个用户表和一个子站点表，如下所示：

用户：id、用户名、电子邮件、密码、subsite_id 子站点：id、名称、域

如您所见，用户链接到子站点，子站点可以通过这种关系拥有多个用户，但用户只能属于一个子站点。

我在 AppController 中使用以下内容检查子域是否有效：

```
function checkSubdomain()
{
    if ($_SERVER['HTTP_HOST'] != 'domain.com')
    {
        $domain_parts = explode('.',$_SERVER['HTTP_HOST']);

        if (count($domain_parts) != 3) exit('Invalid url');

        $subdomain = $domain_parts[0];

        $this->loadModel('Subsite');

        $subsites = $this->Subsite->find('all', array('conditions'=>array('domain'=>$subdomain)));

        if(empty($subsites))
        {
            exit('Subsite not found');
        }
    }
}

function beforeFilter()
{
    $this->checkSubdomain();
} 
```

这基本上表示如果未找到子域，则会出错，这很好用！我遇到的问题是，出于明显的原因，我希望子域无法访问某些页面，例如主页、关于、定价和注册表单。

这样做的最佳方法是什么？无需检查我的所有控制器是否是子域？

我注意到 getballpark.com 等其他应用程序在注册过程中使用子域。它们是允许某些子域拥有某些页面的特殊方式吗？

谢谢

**如果正在使用子域，则基于以下答案的附加要求会阻止对某些控制器的访问：**

另一个问题是，如果用户登录，我使用 HomeController 来显示启动促销页面或应用程序的仪表板。问题是我怎么说你必须只登录该方法，如果你通过访问一个子域。或者他们是实现 sam 功能的完全更好的解决方案。

在保护注册（在我的 UsersController 中）时，我还会阻止登录并忘记密码方法。我如何在不打破 Cake 约定并将方法移动到单个控制器的情况下解决这个问题？干杯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T16:52:24.463

我建议制作一个禁止控制器列表，然后在应用控制器`beforeFilter`处理程序中检查它，以防当前请求来自子域：

```
protected $_forbiddenSubdomainControllers = array
(
    'about',
    'home',
    'pricing',
    'signup'
);

public function beforeFilter()
{
    parent::beforeFilter();

    if($this->checkSubdomain() &&
       in_array($this->request->params['controller'], $this->_forbiddenSubdomainControllers))
    {
        throw new ForbiddenException('This URL is inaccessible');
    }

}

public function checkSubdomain()
{
    if ($_SERVER['HTTP_HOST'] != 'domain.com')
    {
        $domain_parts = explode('.',$_SERVER['HTTP_HOST']);

        if (count($domain_parts) != 3) exit('Invalid url');

        $subdomain = $domain_parts[0];

        $this->loadModel('Subsite');

        $subsites = $this->Subsite->find('all', array('conditions'=>array('domain'=>$subdomain)));

        if(empty($subsites))
        {
            throw new NotFoundException('Subsite not found');
        }

        return true;
    }

    return false;
} 
```

请注意，我已经更改了您的`checkSubdomain`方法，以便它返回`true`或`false`取决于请求是否来自（有效）子域，并且我还更改了您的`exit`调用以引发错误，这是 CakePHP 处理此类情况的首选方式.

如果您想允许某些子域使用其中一些“特殊”控制器，那么我建议将允许的控制器存储在数据库中并将它们与`Subsite`模型相关联，然后您可以在检查中包含这些名称。

* * *

**编辑 (05.11.2012)**

仅在从子域请求时才要求对特定控件进行身份验证，例如可以通过使用[`AuthComponent::allow`](http://book.cakephp.org/2.0/en/core-libraries/components/authentication.html#AuthComponent%3a%3aallow). 在`Home`控制器`beforeFilter`回调中，您可以检查子域，然后适当地允许/拒绝未经身份验证的访问。例如，如果请求不是来自子域，则允许所有操作：

```
public function beforeFilter()
{
    parent::beforeFilter();

    if(!$this->checkSubdomain())
    {
        $this->Auth->allow('*');
    }
} 
```

考虑到您限制对特定操作的访问的新要求，我想说，根据您的应用程序的复杂性，限制/授予访问权限可能是[ACL](http://book.cakephp.org/2.0/en/core-libraries/components/access-control-lists.html)的一项工作。

相反，“手动”执行此操作，我的第一个示例可以通过操作进行扩展，例如：

```
protected $_denyAccessMap = array
(
    'about',
    'home',
    'pricing',
    'users' => array
    (
        'signup'
    )
);

public function beforeFilter()
{
    parent::beforeFilter();

    if($this->checkSubdomain())
    {
        $controller = $this->request->params['controller'];
        $action = $this->request->params['action'];

        if(in_array($controller, $this->_denyAccessMap) ||
          (array_key_exists($controller, $this->_denyAccessMap) && in_array($action, $this->_denyAccessMap[$controller])))
        {
            throw new ForbiddenException('This URL is inaccessible');
        }
    }
} 
```

这将拒绝对控制器`about`、`home`和`pricing`、和`users`控制器`signup`操作的访问。

如前所述，这也可以使用 ACL 来完成，并且由于您说您需要授予某些子域更多的访问权限，这可能是更好的选择，它可以让您动态控制访问限制。看看[Simple Acl 控制的应用程序教程](http://book.cakephp.org/2.0/en/tutorials-and-examples/simple-acl-controlled-application/simple-acl-controlled-application.html)，你可以很容易地使用它，你只需要用`Group`你的模型替换`Subsite`模型。

这样，您可以授予特定子站点以及与该子站点关联的用户对特定操作`Subsite`的访问权限，例如允许`id` `1`访问除`Users`控制器`subscribe`方法之外的所有控制器：

```
$this->Subsite->id = 1;

$this->Acl->allow($this->Subsite, 'controllers');
$this->Acl->deny($this->Subsite, 'controllers/User/subscribe'); 
```

或者相反，阻止对`Users`控制器的访问，期望特定`login`和`passwordRecovery`操作：

```
$this->Acl->allow($this->Subsite, 'controllers');
$this->Acl->deny($this->Subsite, 'controllers/User');
$this->Acl->allow($this->Subsite, 'controllers/User/login');
$this->Acl->allow($this->Subsite, 'controllers/User/passwordRecovery'); 
```

例如，检查是否允许访问可以在应用程序控制器`beforeFilter`回调中完成：

```
public function beforeFilter()
{
    parent::beforeFilter();

    $subsite = $this->checkSubdomain();
    if(!empty($subsite))
    {
        $aco = 'controllers/' . $this->name . '/' . $this->request->params['action'];
        if($this->Acl->check($subsite, $aco))
        {
            throw new ForbiddenException('This URL is inaccessible');
        }
    }
}

public function checkSubdomain()
{
    if ($_SERVER['HTTP_HOST'] != 'domain.com')
    {
        $domain_parts = explode('.',$_SERVER['HTTP_HOST']);

        if (count($domain_parts) != 3) exit('Invalid url');

        $subdomain = $domain_parts[0];

        $this->loadModel('Subsite');

        $subsite = $this->Subsite->find('first', array('conditions'=>array('domain'=>$subdomain)));

        if(empty($subsite))
        {
            throw new NotFoundException('Subsite not found');
        }

        return $subsite;
    }

    return false;
} 
```

请注意，我已经更改了`checkSubdomain`方法，以便它返回`find`结果，或者`false`可以轻松地将其用于 ACL 检查。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-26T22:24:34.373

除了主要的问题和答案之外，我还会考虑开发环境......因为几天前我遇到了类似的问题，我一直在研究它，这就是我所做的：

在 AppController 内部：

```
function checkAccess() {
    if (count($domain_parts) != 3 &&
       (count($domain_parts) == 2 && $domain_parts[1] != 'localhost:8080')) {
        throw new NotFoundException();
    }
} 
```

内部 checkSubdomain() 方法：

```
checkSubdomain() {

    [...]

    $this->checkAccess();

    [...]

} 
```

由于我在 localhost 上测试子域功能，我可以使用 xxx.localhost 和 yyy.localhost 并在部署之前检查一切是否正常。

# opengl - OpenGL 颜色插值

> ID：13210998
> 
> 赞同：10
> 
> 时间：2012-11-03T16:14:55.160
> 
> 标签：opengl, interpolation

我目前正在使用 C++ 和 OpenGL 开发一个小项目，并尝试实现类似于 Photoshop 中的颜色选择工具，如下所示。

![在此处输入图像描述](../Images/550a351b2d5f64131dd91bc0c9c6ad59.png)

但是我在插值大正方形时遇到了麻烦。在我的 8800 GTS 台式电脑上工作，结果是相似的，但混合不那么流畅。

这是我正在使用的代码：

```
GLfloat swatch[] = { 0,0,0, 1,1,1, mR,mG,mB, 0,0,0 };
GLint swatchVert[] = { 400,700, 400,500, 600,500, 600,700 };

glVertexPointer(2, GL_INT, 0, swatchVert);
glColorPointer(3, GL_FLOAT, 0, swatch);
glDrawArrays(GL_QUADS, 0, 4); 
```

转移到我的带有 Intel Graphics HD 3000 的笔记本电脑上，在代码没有变化的情况下，这个结果甚至更糟。

![http://i.imgur.com/wSJI2.png](../Images/9ccdd0695dba56826ad520eeab9a819e.png)

我认为是 OpenGL 将四边形分成两个三角形，所以我尝试使用三角形进行渲染并自己在正方形中间插入颜色，但它仍然与我希望的结果不太匹配。

![在此处输入图像描述](../Images/215f4538b36ac38de88a2f284e7f1a8c.png)

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-11-03T16:59:25.597

OpenGL 对从顶点着色器发射到片段着色器的每个片段输入值的值使用重心插值。正如您已经猜对的那样，您所看到的是将四边形分成三角形的效果。

现在看一下：右上角的三角形里面有红色，因此很好地向下插值，里面有一个红色的量。然后是左下角的三角形，里面只有灰色。当然，右上角三角形的红色不会影响左下角的灰色。

问题是，插值发生在 RGB 空间中，但是对于您想要的结果，必须将其放置在 HSV 或 HSL 空间中，其中 H（色调）将保持不变。

然而，这不仅仅是插值的问题。同样阻碍您的是，颜色不会线性插值。大多数显示器都应用了非线性函数，也称为“伽马”（实际上，伽马是应用于输入值的功率的指数）。

您的 OpenGL 上下文可能在经过颜色校正的颜色空间中，也可能不在。您需要对此进行测试。然后知道帧缓冲区驻留在哪个颜色空间中，您必须使用片段着色器将重心坐标的每个片段变换（使用顶点着色器评估）应用到每个片段值。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-11-03T16:58:21.730

我很快制作了一个成功插入颜色的顶点/片段着色器：

```
#ifdef GL_ES
precision highp float;
#endif

uniform vec2 resolution;

void main(void)
{
    vec2 p = gl_FragCoord.xy / resolution.xy;
    float gray = 1.0 - p.x;
    float red = p.y;
    gl_FragColor = vec4(red, gray*red, gray*red, 1.0);
} 
```

结果如下： ![在此处输入图像描述](../Images/06ee64a67c00910f8b0dfbca71e03eec.png)

现在将其应用于四边形会产生正确的结果，因为插值实际上是在整个曲面上使用`x`和`y`坐标完成的。请参阅@datenwolf 的详细解释，了解为什么会这样。

**编辑 1**为了在功能性颜色选择器中获得全范围的颜色，可以交互地修改色调（参见[https://stackoverflow.com/a/9234854/570738](https://stackoverflow.com/a/9234854/570738)）。

现场在线演示：http: [//goo.gl/Ivirl](http://goo.gl/Ivirl)

```
#ifdef GL_ES
precision highp float;
#endif

uniform float time;
uniform vec2 resolution;

const vec4  kRGBToYPrime = vec4 (0.299, 0.587, 0.114, 0.0);
const vec4  kRGBToI     = vec4 (0.596, -0.275, -0.321, 0.0);
const vec4  kRGBToQ     = vec4 (0.212, -0.523, 0.311, 0.0);

const vec4  kYIQToR   = vec4 (1.0, 0.956, 0.621, 0.0);
const vec4  kYIQToG   = vec4 (1.0, -0.272, -0.647, 0.0);
const vec4  kYIQToB   = vec4 (1.0, -1.107, 1.704, 0.0);

const float PI = 3.14159265358979323846264;

void adjustHue(inout vec4 color, float hueAdjust) {
    // Convert to YIQ
    float   YPrime  = dot (color, kRGBToYPrime);
    float   I      = dot (color, kRGBToI);
    float   Q      = dot (color, kRGBToQ);

    // Calculate the hue and chroma
    float   hue     = atan (Q, I);
    float   chroma  = sqrt (I * I + Q * Q);

    // Make the user's adjustments
    hue += hueAdjust;

    // Convert back to YIQ
    Q = chroma * sin (hue);
    I = chroma * cos (hue);

    // Convert back to RGB
    vec4 yIQ   = vec4 (YPrime, I, Q, 0.0);
    color.r = dot (yIQ, kYIQToR);
    color.g = dot (yIQ, kYIQToG);
    color.b = dot (yIQ, kYIQToB);
}

void main(void)
{
    vec2 p = gl_FragCoord.xy / resolution.xy;
    float gray = 1.0 - p.x;
    float red = p.y;
    vec4 color = vec4(red, gray*red, gray*red, 1.0);
    adjustHue(color, mod(time, 2.0*PI));
    gl_FragColor = color;
} 
```

**编辑 2**：如果需要，用于纹理坐标的着色器（应用于纹理坐标从 0 到 1 的四边形）应该看起来像这样。**未经测试。**

片段着色器：

```
void main(void)
{
    vec2 p = gl_TexCoord[0].st;
    float gray = 1.0 - p.x;
    float red = p.y;
    gl_FragColor = vec4(red, gray*red, gray*red, 1.0);
} 
```

一个直通顶点着色器：

```
void main()
{
    gl_TexCoord[0]=gl_MultiTexCoord0; 
    gl_Position = gl_ModelViewProjectionMatrix * gl_Vertex;
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-04-18T13:02:45.583

我不喜欢投票最多的答案，因为它是如此字面意思，并且在简单的答案中只真正关注红色，所以我想提出一个基于顶点颜色的简单替代方案：

```
#version 330 core

smooth in vec4 color;
smooth in vec2 uv;

out vec4 colorResult;

void main(){
    float uvX = 1.0 - uv.st.x;
    float uvY = uv.st.y;

    vec4 white = vec4(1, 1, 1, 1);
    vec4 black = vec4(0, 0, 0, 1);

    colorResult = mix(mix(color, white, uvX), black, uvY);
} 
```

这很容易解释和推理。mix 是线性插值，或 glsl 中的 lerp。所以我在逆x轴上混合了顶点颜色和白色，这给了我左上角的白色和右上角的纯色。结果，我沿 y 轴混合成黑色，在底部给我黑色。

希望这会有所帮助，我遇到了这个答案，发现除了硬烤的红色、绿色或蓝色调色板之外，它对获得任何东西都没有太大帮助，而且 adjustHue 位根本不是我想要的。

基本上要让它工作，您需要将所有顶点颜色设置为您想要的颜色，并确保设置您的 UV 坐标：

```
TL: UV(0, 0), COLOR(YOUR DESIRED COLOR)
BL: UV(0, 1), COLOR(YOUR DESIRED COLOR)
BR: UV(1, 1), COLOR(YOUR DESIRED COLOR)
TR: UV(1, 0), COLOR(YOUR DESIRED COLOR) 
```