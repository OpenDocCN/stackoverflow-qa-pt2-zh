# StackOverflow 问答 16206000-16206999

# python - SQLAlchemy / Python / Pyramid 写入数据库问题

> ID：16206000
> 
> 赞同：0
> 
> 时间：2013-04-25T03:41:35.877
> 
> 标签：python, database, sqlalchemy, pyramid

问题：

我正在编写一些旨在在链接表中创建新记录的代码。链接表的主键是自动编号，其他两个字段是长度为 10 的 VARCHAR。

我遇到的问题是我似乎无法将 partID 放入表中。如果您查看 sql 输出，您可以清楚地看到它在表中写入了 None 和 u'1'（orderID）。所以这告诉我它接收到 orderID 就好了。您还可以看到，在将变量传递给新对象之前，我进行了打印以找出变量内部的内容。它有 3 个，这是正确的 partId。在创建新对象和写入表之间的某个地方，它传递了一个空值。

我尝试过强制转换，尝试过从数据库中提取 partID 的不同方法，等等，但我终其一生都无法弄清楚出了什么问题。

编码：

```
def updateOrderParts_view(request):
    part = None
    partToOrder = None
    idnum = None

    part = DBSession.execute(\
    "SELECT partID "+\
    "FROM tblParts "+\
    "WHERE partName = " + "'" +request.POST['partName'] +"'").fetchone()

    print "<---DEBUG--->"
    print part['partID']

    partToOrder = PartsByOrder(part['partID'], request.POST['orderID'])

    DBSession.add(partToOrder)
    return{} 
```

终端输出：

```
<---DEBUG--->
3
2013-04-24 08:14:47,985 INFO  [sqlalchemy.engine.base.Engine][Dummy-2] INSERT INTO "tblPartsByOrder" ("partID", "orderID") VALUES (?, ?)
2013-04-24 08:14:47,985 INFO  [sqlalchemy.engine.base.Engine][Dummy-2] (None, u'1')
2013-04-24 08:14:47,986 INFO  [sqlalchemy.engine.base.Engine][Dummy-2] COMMIT 
```

我将不胜感激有关此问题的任何想法或意见

谢谢你的时间

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-26T17:11:01.640

首先，如果可以的话，我会考虑做一些不同的 SQL 查找。（我想这取决于，你有一个基于“tblParts”的模型吗？我将使用一个假设有一个模型对象“Part”的例子）：

```
part = DBSession.query(Part.partID).filter(Part.partName == request.POST['partName']).first() 
```

从那里，我对确切的语法生疏了，但我认为你可以做类似的事情

```
print "<---DEBUG--->"
print part

partToOrder = PartsByOrder(part, request.POST['orderID'])

DBSession.add(partToOrder)

return{} 
```

`str(part)`如果是转换问题，您可能需要将“part”转换为字符串 ( )。

祝你好运，

# c - 循环中的可变变化

> ID：16206003
> 
> 赞同：0
> 
> 时间：2013-04-25T03:42:18.190
> 
> 标签：c, variables, loops

所以这更像是一个理论问题，但这里有。假设我有以下 C 代码：

```
for(parameter) {
    //do something
    if(condition) {
        variable = Value; 
    }
} 
```

假设循环运行了几次，并说第一次循环时满足条件。但是第二次循环条件不满足。变量是否仍然等于它在第一个循环中分配的值？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T03:45:08.843

是的，除非您明确更改了值，否则它将是第一次迭代中分配的值。

请注意，这仅在控件位于 for 循环内时。一旦控制超出了函数， in 的值`variable`将取决于它的存储类，即：它是如何声明的。如果它是本地/自动变量，则它不存在于函数的范围之外`{ }`，而如果它是`static`，它在整个程序生命周期内保持活动状态并保持状态。

* * *

> 我的意思是这更像是一个为什么的问题

因为作为一项规则，C 和 C++ 中的变量在它们处于**活动**状态时会保留它们的值。

自动/局部变量`{ }`在其定义的范围内是活动的。因此它将保留分配给它的值（*除非明确更改*），直到控制保持在范围内。

`static`并且`global`变量在整个程序生命周期中都是活动的。所以他们保留分配给他们的值（*除非明确改变*）直到程序结束。

# jsf - 从 RichFaces 3.x 迁移到 RichFaces 4.x 导致解析 a4j.taglib.xml 时出错

> ID：16206005
> 
> 赞同：0
> 
> 时间：2013-04-25T03:42:43.247
> 
> 标签：jsf, richfaces, facelets

我已下载`richfaces-components-ui-4.3.1.Final.jar`并将其粘贴到`/WEB-INF/lib`文件夹以及 RichFaces 4 所需的其他 JAR 中。尽管如此，我在部署过程中遇到了以下提到的错误：

```
java.io.IOException: Error parsing jar:file:/C:/new_jboss-portal-2.7.2/jboss-portal-2.7.2/server/default/temp/deploy/tmp1275818846018948934BMS-exp.war
/WEB-INF/lib/richfaces-components-ui-4.3.1.Final.jar!/META-INF/a4j.taglib.xml 
```

这是如何引起的，我该如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T05:25:10.607

There are two different RichFaces versions in classpath: Richfaces 3.x and 4.x so the problem is most probably due to version conflict. Try removing Richfaces 3.x and check.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T11:19:08.700

> 解析 jar 时出错：... a4j.taglib.xml

这可以识别为 Facelets 解析错误。它无法解析 RichFaces4 的`a4j.taglib.xml`. RichFaces4 是一个 JSF 2.0 兼容的组件库。JSF 2.0 捆绑了 Facelets 2.0。此解析错误表明您的类路径中仍然存在 Facelets 1.x，它无法识别与 Facelets 2.0 兼容的 taglib 文件。

摆脱所有与 Facelets 1.x 相关的 JAR 文件 ( `jsf-facelets.jar`) 和所有 Facelets 1.x 特定配置，尤其`FaceletViewHandler`是`faces-config.xml`. 这就是抑制 Facelets 2.0 的运行。一旦您摆脱了所有 Facelets 1.x 工件，Facelets 2.0 将运行并成功解析 taglib 文件。

### 也可以看看：

*   [从 JSF 1.2 迁移到 JSF 2.0](https://stackoverflow.com/questions/4441713/migrating-from-jsf-1-2-to-jsf-2-0/4532870#4532870)

# c - 32 位 g++ 和 64 位 g++ 中的 printf() 处理参数的方式不同？

> ID：16206006
> 
> 赞同：-1
> 
> 时间：2013-04-25T03:42:53.177
> 
> 标签：c, 64-bit, printf, argument-passing

```
#include<stdio.h>

int main()
{
    long long a=1,b=2,c=3;
    long long d=0x123456789ABC;
    long long e=0x000000000000;
    printf("%d,%d,%d\n",a,b,c);
    printf("%d,%d\n",d,e);
    return 1;
} 
```

在 32 位 UBUNTU 系统中，由 32 位 g++ 编译，上面的程序将打印：

```
1,0,2
0,305419896 
```

我猜这是因为 printf() 根据“%d”以 32 位的步长从堆栈中读取参数。所以它首先打印出 d 的低 32 位（即 0），然后打印出 d 的高 32 位（即 305419896）。

但是当用 64bit g++ 编译时，它会打印：

```
1,2,3
0,0 
```

首先是 d 的低 32 位（即 0），然后是 e 的低 32 位（即 305419896）。为什么有区别？32 位 g++ 和 64 位 g++ 中的 printf() 处理参数的方式不同吗？

* * *

我只是想出了一个可能的解释。在 64 位系统中，一个 32 位大小的整数实际上占用 64 位内存，高 32 位用 0 填充。所以 printf() 为下一个参数跳转 64 位，即使它是由 "%d" 指定的

××××××××××××××××××××××××Qualds解决了问题~~我只是试图在32bit System上运行以下程序

```
long long d=0x004300420041;
long long e=0x000000000044;
printf("%c, %c\n",d,e);
printf("%d, %d\n",d,e); 
```

输出为 AC 4325441 67

"%c" 和 "%d" 都会导致 32 位的跳转，这意味着 int 和 char 类型在 32 位系统中占用 32 位内存，在 64 位系统中占用 64 位内存。我认为我上面假设的解释是经过认证的:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-25T04:11:06.733

由于您的变量是`long long`，打印它们的唯一正确`printf`格式是`%lld`. 使用其他任何东西都是自找麻烦，是不确定的行为。

这适用于任何系统和任何编译器（[IdeOne 演示](http://ideone.com/rwwh8w)）：

```
#include <stdio.h>

int main()
{
    long long a=1,b=2,c=3;
    long long d=0x123456789ABC;
    long long e=0x000000000000;
    printf("%lld,%lld,%lld\n",a,b,c);
    printf("%lld,%lld\n",d,e);
    return 1;
} 
```

# ruby - 尝试使用 SecureRandom.random_number ruby 2.0.0 的包含范围

> ID：16206010
> 
> 赞同：4
> 
> 时间：2013-04-25T03:44:13.230
> 
> 标签：ruby, random, range

我正在使用`securerandom`，问题是它包含 digit `"0"`，如`0..56`, 而`0..46`不是`1..56`, and `1..46`（彩票不包括 0 数字）。0 可以在下面的第二个兆数输出中看到。我以为我找到了一种`0`用 ( `char1`, `char2`) 排除下面 s 的方法，但我失败了。

当我使用`rand(1..56)`包含范围时，它工作得很好（但有几篇文章建议远离`rand()`）。但是，当我尝试使用包含范围`char1`和`char2`以下范围时，`securerandom`它不起作用。

```
错误：
[nil@nil 彩票]$ ./mega_millions.rb
/dev/null/.rvm/rubies/ruby-2.0.0-p0/lib/ruby/2.0.0/securerandom.rb:216:in `<'：Fixnum 与数组的比较失败（ArgumentError）
        来自 /dev/null/.rvm/rubies/ruby-2.0.0-p0/lib/ruby/2.0.0/securerandom.rb:216:in `random_number'
        来自 ./mega_millions.rb:42:in `<main>'

```

我将不胜感激任何反馈并朝着正确的方向推动。

谢谢！

```
#!/usr/bin/env ruby
require 'rainbow.rb'
require 'securerandom'

quick_pick = 56
char1  = ('1'..'56').to_a 

mega_num = 46
char2  = ('1'..'46').to_a 

first  = SecureRandom.random_number(quick_pick)
second = SecureRandom.random_number(quick_pick)
third  = SecureRandom.random_number(quick_pick)
fourth = SecureRandom.random_number(quick_pick)
fifth  = SecureRandom.random_number(quick_pick)
mega   = SecureRandom.random_number(mega_num)

puts "#{first}, #{second}, #{third}, #{fourth}, #{fifth}, #{mega}"

[nil@nil lottery]$ ./mega_millions.rb 
34, 38, 17, 24, 55, 14
[nil@nil lottery]$ ./mega_millions.rb 
30, 26, 7, 4, 32, 0 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T13:26:00.177

对于真正的单线：

```
puts 6.times.collect{ SecureRandom.random_number(55) + 1 }.join(', ') 
```

除非您在打印后出于某种原因需要保留这些数字。

稍作修改以产生百万美元：

```
puts 5.times.collect{SecureRandom.random_number(55) + 1}.push(SecureRandom.random_number(45) + 1).join(', ') 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T03:54:32.917

您可以简单地将 1 添加到您的随机数，如下所示：

```
quick_pick = 55 # 56 - 1 to account for the offset in your range of numbers
SecureRandom.random_number(quick_pick) + 1 
```

顺便说一句，更习惯地说，您可以像这样多次运行它：

```
numbers = 6.times.collect { SecureRandom.random_number(quick_pick) + 1 } 
```

然后用

```
puts numbers.join(', ') 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-25T03:55:47.023

[SecureRandom](http://www.ruby-doc.org/stdlib-1.9.3/libdoc/securerandom/rdoc/SecureRandom.html#method-c-random_number)的文档指出：

> 如果一个正整数作为 n 给出， ::random_number 返回一个整数：0 <= ::random_number < n。

因此，这应该可以解决问题：

```
first  = SecureRandom.random_number(quick_pick) + 1
# And so forth... 
```

这将导致 range 中的随机数`1..quickpick`，包括在内。

如果不添加`1`，您最终会在范围内`0..(quickpick-1)`，包括在内。

# javascript - 添加输入框后获取值

> ID：16206016
> 
> 赞同：0
> 
> 时间：2013-04-25T03:44:33.840
> 
> 标签：javascript, jquery-ui

我使用 javascript 在我的表格中添加一个输入框，如下所示：

```
var inputtopik = "topik" + 1;
$("#titleinput tbody").append("<tr><td> Topik " + topikno +
                              " : </td><td><input type='text' id='" +
                              inputtopik +"' style='WIDTH:498px;' ></td></tr>"); 
```

然后尝试通过这个来获取价值

```
var topik = document.getElementById('inputtopik').value; 
```

但出现错误状态

```
Uncaught TypeError: Cannot read property 'value' of null 
```

我想知道为什么？也许它找不到我刚刚添加的输入框？怎么修？帮助 ：（

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-25T03:48:08.117

inputtopik 的值为“topik1”。所以你应该做

```
var topik = document.getElementByID(inputtopik).value; 
```

没有单引号。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T04:01:38.430

如果您使用的是 jQuery……另一种获取输入文本值的方法是：

```
var topik = $('#topik1').val(); 
```

# linux - 管理本地用户帐户

> ID：16206019
> 
> 赞同：0
> 
> 时间：2013-04-25T03:44:51.967
> 
> 标签：linux, windows, macos, node.js, user-accounts

假设节点以 root 身份运行，我该如何：

*   添加新的本地 (OS) 用户帐户并获取其 uid？
*   按名称删除帐户？

这些帐户将用于守护进程，因此它们不必是成熟的用户帐户。

在 Linux 上执行此操作是第一要务，在 OS X 上执行此操作会很好，并且支持 Windows 的超级奖励。

在 Linux 上，我想你可以 spawn `useradd`，但你将如何确定新用户的 uid？`/etc/passwd`直接修改加好友会更好（或更糟）吗？

在 Windows 上，它看起来[`NetUserAdd`](http://msdn.microsoft.com/en-us/library/windows/desktop/aa370649(v=vs.85).aspx)是正确的地方；有人已经写了一个插件来调用它吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-29T14:46:39.517

对于 Linux，一旦您创建了帐户`useradd`，您就可以调用`getent passwd <username>`以查看所有主要的相关帐户详细信息，包括第三个字段中的 uid。

例子：

`# useradd -c "Jamie Carter" jamiec`

`# getent passwd jamiec`

产量：

jamiec:x:2722:500:Jamie Carter:/home/jamiec:/bin/false

要在单行中获取 uid，您可以结合 cut 命令来获取第三个字段，同时将`:`其视为分隔符：

`$ getent passwd jamiec | cut -d: -f 3`

2722

一般来说，不直接操作 /etc/passwd 和朋友会更安全、更容易。您需要做的大部分事情可能已经在某处的系统命令中。例如，`userdel <username>`将按名称从 /etc/passwd 中删除一个帐户，但还负责从 /etc/groups 中删除用户，这样您就不会留下孤立的信息。（如果您编写自己的用户删除器，则必须自己处理。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T03:59:46.710

这是一个大而广泛的问题（MacOS、Windows、Linux 一起），但[在 Macintosh 上从命令行创建新用户并非易事](http://hints.macworld.com/article.php?story=20030603190314390)，[需要您以 root / admin 身份进行身份验证](https://stackoverflow.com/questions/7546451/programmatically-creating-a-new-user-on-mac-os-using-objective-c-or-any-cocoa-ap)。

# android - Facebook：将用户墙帖导入原生 Android 应用

> ID：16206021
> 
> 赞同：0
> 
> 时间：2013-04-25T03:45:05.403
> 
> 标签：android, facebook, mobile, native

是否有一种现有的方法可以将某个 facebook 用户的墙贴导入原生 Android 应用程序？

我想将献血活动的时间表从献血 facebook 页面提取给我的献血通知应用程序的所有用户。

希望得到一些建议，是否有可能在不违反任何规定的情况下做到这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T05:30:14.413

最简洁的答案是不。不，你不能编写一个 100% 的本地应用程序来从 Facebook 检索帖子。

无论如何，你可以创建一个应用程序来做你想做的事，但同样，不是原生的。为了登录和从 Facebook 检索帖子，您需要 Facebook SDK 并使用该 SDK 开发应用程序，Android SDK 没有任何类来处理 Facebook 请求（也没有任何其他社交网络）。

我建议你去 developer.facebook.com。

# recursion - 这会被认为是分形吗？

> ID：16206026
> 
> 赞同：-2
> 
> 时间：2013-04-25T03:45:57.893
> 
> 标签：recursion, fractals

![在此处输入图像描述](https://i.stack.imgur.com/ROm6o.png)

我想知道这是否会被视为分形或只是递归形状。对我来说似乎是这样，但我们的实验室说：“但是，形状由一些递归过程生成是不够的，因为有些形状可以递归生成，它们不是分形的，”但它也解释了更多。对我来说，似乎是这样，但我只是想确定一下。

非常感谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-25T03:58:09.490

不，它不是分形，因为它没有表现出自相似性。见： http: [//mathworld.wolfram.com/Fractal.html](http://mathworld.wolfram.com/Fractal.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-25T04:03:52.963

# android - 通用图像加载器 displayImage 不会显示来自 SD 卡的图像，但适用于 URL

> ID：16206027
> 
> 赞同：3
> 
> 时间：2013-04-25T03:46:03.603
> 
> 标签：android, android-imageview, universal-image-loader

我正在尝试将我的 Android 应用程序中的 Universal Image Loader 从 1.5.5 更新到 1.8.4（最新版本）。但是，无法加载 SD 卡中的 1.8.4 图像。URL 仍然可以正常工作。

我的代码（适用于 1.5.5）：

```
imageLoader = ImageLoader.getInstance();
ImageLoaderConfiguration config = ImageLoaderConfiguration.createDefault(WallpaperDownload.this);
imageLoader.init(config);

DisplayImageOptions options1 = new     DisplayImageOptions.Builder().showStubImage(R.drawable.placeholder_large)
            .showImageForEmptyUri(R.drawable.placeholder_failed).cacheInMemory().cacheOnDisc().build();

String imageUri = "file:///mnt/sdcard/mm18/Wallpapers/Speedometer.jpg";
imageLoader.displayImage(imageUri,wallpaperImgView, options1); 
```

此代码正在加载的图像大约为 800x600px，所以我想知道这是否会导致 UIL 出现问题？LogCat 显示没有问题。

我会很感激任何帮助，我是 Java 新手，所以对其他人来说可能很明显！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-10-19T11:47:26.327

使用链接

```
file:///sdcard/yourfolder 
```

它为我工作

# java - 雄猫。在 Eclipse 中工作，但在部署时不起作用

> ID：16206034
> 
> 赞同：0
> 
> 时间：2013-04-25T03:46:32.553
> 
> 标签：java, eclipse, jsp, servlets

我有一个关于tomcat的项目，当我通过Eclipse“在服务器上”运行它时效果很好。但是，当我导出 WAR 文件并部署它时，servlet 不起作用。只有我的 JSP 页面有效。这是 Web XML 的一部分：

```
<display-name>CandC3</display-name> 
```

然后是`<welcome-file-list>`部分，然后是 servlet 和映射。这是一个：

```
 <servlet>
    <description></description>
    <display-name>LoginServlet</display-name>
    <servlet-name>LoginServlet</servlet-name>
    <servlet-class>candc3.LoginServlet</servlet-class>
  </servlet>
  <servlet-mapping>
    <servlet-name>LoginServlet</servlet-name>
    <url-pattern>/LoginServlet</url-pattern>
  </servlet-mapping> 
```

现在，当我尝试以 someserver:8080/CandC3/LoginServlet?param1=val1 身份访问此 servlet 时，我收到错误 404: Servlet LoginServlet is not available

有任何想法吗？我错过了一些明显的东西吗？eclipse 的导出不应该在服务器中无缝工作；）

更多信息：catalina.out

```
INFO: Deploying web application archive CandC3.war
Apr 24, 2013 11:10:34 PM org.apache.catalina.startup.HostConfig deployWAR 
```

此外，在我重新启动 tomcat 后，我​​第一次尝试使用我得到的 Servlet：

```
javax.servlet.ServletException: Wrapper cannot find servlet class candc3.LoginServlet or a class it depends on 
```

并作为根本原因：

```
java.lang.ClassNotFoundException: candc3.LoginServlet 
```

之后，在随后的尝试中，我得到`error 404: Servlet LoginServlet is not available`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T04:22:25.843

您的 tomcat/webapps 目录下是否有一个名为 CandC3 的 Web 应用程序？它下面是否有一个名为 WEB-INF 的目录，下面有一个“类”目录或类似目录？否则，您能否在 CandC3 目录下的任何位置物理定位您的 servlet 类 candc3.LoginServlet？

# angularjs - 如何在页面中制作子角度控制器取决于页面的主控制器

> ID：16206042
> 
> 赞同：0
> 
> 时间：2013-04-25T03:46:54.237
> 
> 标签：angularjs, angularjs-controller

在我的网页中，有一个主控制器需要使用服务通过使用 $http 或 getJSON 从服务器调用数据来完成一些初始化。一旦主控制器完成数据加载，页面中还有其他子控制器不应被调用。如何在控制器中注入 DI？

Edit1 ex：类似于[从脚本 onload 调用 Angular 控制器的](https://stackoverflow.com/questions/16182678/call-angular-controller-from-script-onload/16195102#16195102)东西， 其中服务调用服务器以获取一些数据，并在完成后通知其他人。这可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T07:16:52.057

看起来您应该查看 $scope.$emit、$scope.$broadcast 和 $scope.$on 方法来处理 angularjs 中的事件。

看看[角度范围指南](http://docs.angularjs.org/api/ng.%24rootScope.Scope)。

基本思想可能如下所示：

```
$http.get("/api/stuff", function(data)
    .then(function(data){
      $scope.$broadcast("apiLoad", data);
    }, function(err){
      //do something with err
    }) 
```

然后子控制器可以使用：

```
$scope.$on("apiLoad", function( event, data){
  //do something now that apiLoad is done.
}) 
```

# linux - /proc/stat 不同平台上的列号

> ID：16206047
> 
> 赞同：2
> 
> 时间：2013-04-25T03:47:18.587
> 
> 标签：linux

/proc/stat 的列号在不同的平台上是不同的。第 i 列的含义会改变吗？

例如，手册页[http://man7.org/linux/man-pages/man5/proc.5.html](http://man7.org/linux/man-pages/man5/proc.5.html)给出了十个值列，但在我的 linux 上只显示了八列。

```
[root@localhost ~]# cat /proc/stat
cpu  148894509 5214 64962656 4534478045 18407228 6482288 24487520 0
cpu0 71026365 2633 34928452 2246110103 18371398 6482288 21933024 0
cpu1 77868143 2580 30034204 2288367942 35829 0 2554495 0 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-25T04:00:00.530

该链接清楚地说明了开始实现这些列的内核版本：

> 窃取（自 Linux 2.6.11 起）
> 
> 来宾（自 Linux 2.6.24 起）
> 
> guest_nice（自 Linux 2.6.33 起）

如果您的内核版本低于 2.6.24，那么您将看到 8 列。但列的顺序和含义保持不变。

# php - PDO是实现mysqli还是mysql

> ID：16206048
> 
> 赞同：2
> 
> 时间：2013-04-25T03:47:21.367
> 
> 标签：php, mysql

我正在使用 PDO 并收到此消息，但据我发现，我认为 PDO 实际上实现了 mysqli。

> 您正在使用 PHP 已弃用的 'mysql' 扩展，它不能处理多个查询。**某些存储例程的执行可能会失败！**请使用改进的“mysqli”扩展名以避免任何问题。

那我为什么会收到这条消息？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T03:51:04.447

这几乎就像问和之间有什么区别或`DOMDocument`和之间`SimpleXML`有什么区别。它们是不同的库，尽管它们都用于连接 MySQL 数据库服务器。`php``python`

PHP[在分类差异方面做得非常好](http://us3.php.net/manual/en/mysqlinfo.api.choosing.php)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T03:50:14.957

**Mysql**不支持一次运行多个查询。**Mysql**也不支持prepared statement。因此，您必须使用**Mysqli**，它支持两者。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-25T04:00:27.000

以前有很多关于这个话题的讨论。您最好在 Internet 上搜索（即使仅在 Stackoverflow 中）。

喜欢：

[mysql，mysqli和pdo有什么区别？](https://stackoverflow.com/questions/2190737/what-is-difference-between-mysql-mysqli-and-pdo)

[mysqli和mysql的区别？](https://stackoverflow.com/questions/5641752/difference-between-mysqli-and-mysql)

你需要做更多的研究人。批判性地思考并成为一名程序员。;)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-25T16:18:45.177

> 我以为PDO实际上实现了mysqli。

很好的问题，但错误。PDO 实现了该接口，以便您可以使用所有数据库系统。因此，它只是无法实现某些功能，`mysqli`因为它们需要一些尚未为 SQLite 模拟的特殊功能！当你比较 PDO 和`pgsql_`API 时，你会发现类似的问题。

# css - 右侧渲染问题（歌剧和野生动物园）中的空白

> ID：16206056
> 
> 赞同：0
> 
> 时间：2013-04-25T03:48:09.840
> 
> 标签：css, html

嗨，当我在宽度中使用百分比时，有人可以知道为什么`opera`并`safari`有额外的空白。`right`下面是我的代码：

`safari 5.1`和`opera 11.11`

[**小提琴**](http://jsfiddle.net/YP8N9/1/)

html:

```
 <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
   "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">

<head>
  <title>sample</title>

  <link rel="stylesheet" type="text/css" href="style.css" />

</head>

<body>

    <div class="wrap">
    <div></div>
    <div></div>
    <div></div>
    <div></div>
</div>

</body>
</html> 
```

CSS：

```
 html, body, div, h1, h2, h3, h4, h5, h6, ul, ol, dl, li, dt, dd, p, blockquote, pre, form, fieldset, table, th, td, img  {
  margin: 0; padding: 0
}

/* remember to define focus styles! */
:focus {
    outline: 0;
}

body {
  font-family: arial, sans-serif;
  font-size:13px;
  color:#fff;
  background-color:#000;

}

a {color:#444; text-decoration:none;}

ul li {list-style-type:none;}

p {padding:0 0 1.5em 0; line-height:1.7em; float:left;}

img {border:none}

.wrap {
    float:left;
    width:100%;
}
.wrap div{
    float:left;
    width:25%;
    height:100px;
    background-color:#222;
} 
```

![在此处输入图像描述](https://i.stack.imgur.com/PRt7o.jpg)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T04:49:00.580

凉爽的！似乎 Safari 的计算非常错误。如果您调整框架的大小，您有时会看到它适合。不知道发生了什么。但是，可能的解决方法是`display: table`：

```
.wrap {
    width:100%;
    display: table;
}

.wrap div{
    width:25%;
    height:100px;
    background-color:#222;
    display: table-cell;
} 
```

[这是一个演示。](http://jsfiddle.net/YP8N9/3/)

在你的情况下这可能是不可能的，不知道。但它解决了错误的计算问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T04:05:42.620

尝试添加这个 CSS：

```
body {
   margin: 0px;
   padding: 0px;
} 
```

# python - requests.get() 404 响应后未捕获 requests.HTTPError

> ID：16206062
> 
> 赞同：2
> 
> 时间：2013-04-25T03:48:41.280
> 
> 标签：python, error-handling, try-catch, python-requests

我对请求库有一个小问题。

例如，我在 Python 中有这样的语句：

```
try:
   request = requests.get('google.com/admin') #Should return 404

except requests.HTTPError, e:
   print 'HTTP ERROR %s occured' % e.code 
```

由于某种原因，异常没有被捕获。我已经检查了请求的 API 文档，但它有点苗条。有没有人对图书馆有更多经验可以帮助我？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-25T04:13:13.963

口译员是你的朋友：

```
import requests
requests.get('google.com/admin')
# MissingSchema: Invalid URL u'google.com/admin': No schema supplied 
```

此外，`requests`例外情况：

```
import requests.exceptions
dir(requests.exceptions) 
```

另请注意，`requests`如果状态不是，默认情况下不会引发异常`200`：

```
In [9]: requests.get('https://google.com/admin')
Out[9]: <Response [503]> 
```

有[raise_for_status()](http://www.python-requests.org/en/latest/user/quickstart/#response-status-codes)方法可以做到这一点：

```
In [10]: resp = requests.get('https://google.com/admin')

In [11]: resp
Out[11]: <Response [503]>

In [12]: resp.raise_for_status()
  ...
HTTPError: 503 Server Error: Service Unavailable 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-08-02T04:08:13.900

在 python 2.7.5 中运行您的代码：

```
import requests

try:
  response = requests.get('google.com/admin') #Should return 404
except requests.HTTPError, e:
  print 'HTTP ERROR %s occured' % e.code
  print e 
```

结果是：

`File "C:\Python27\lib\site-packages\requests\models.py", line 291, in prepare_url raise MissingSchema("Invalid URL %r: No schema supplied" % url) requests.exceptions.MissingSchema: Invalid URL u'google.com/admin': No schema supplied`

要让您的代码获取此异常，您需要添加：

```
 except (requests.exceptions.MissingSchema) as e:
    print 'Missing schema occured. status'
    print e 
```

另请注意，它不是缺少的模式，而是缺少的方案。

# java - 添加到我的 arrayList 中的对象被添加的最后一个对象覆盖？为什么是这样？

> ID：16206065
> 
> 赞同：1
> 
> 时间：2013-04-25T03:49:04.043
> 
> 标签：java, arraylist

好的，这是一个与作业相关的问题，大家都知道。

问题：为什么我的 arrayList 中的对象有不同的课程名称（就像它们应该的那样），但所有字母成绩都与 arrayList 中最后添加的课程相同（它们应该是 addCourse 方法时作为参数传递的任何成绩被称为）？

你们可以提供的任何帮助都会非常有帮助，如果您对我为什么以我的方式写东西有任何其他问题，请随时提出。这个地方就像智慧的源泉，我来这里是为了学习我能学到的一切。

我知道有些方法没有完成，但直到我弄清楚如何解决这个 arrayList 问题我才能真正完成:)

我的输出如下所示：

```
Student ID: 11234
Student Name: Cody

[
Course: COP2013
Letter Grade: A
GPA in course: 3.67, 
Course: COP2014
Letter Grade: A
GPA in course: 3.67, 
Course: COP2015
Letter Grade: A
GPA in course: 3.67, 
Course: COP2016
Letter Grade: A
GPA in course: 3.67, 
Course: COP2017
Letter Grade: A
GPA in course: 3.67] 
```

课程.java：

```
 import java.lang.String.*;

public class Course {

//global variables
private String courseID;
private static String letterGrade;
private static Double numberGrade;

//CONSTRUCTORS
//param
public Course(String id, String letter){
courseID = id;
letterGrade=letter;
compute(letter);
}
//default
public Course(){
    courseID = "COP2053";
    numberGrade = 4.0;
    letterGrade = "A";
    compute(getLetterGrade());
}

//COMPUTING GRADES AND UPDATING
private static Double compute(String letter){
    Double a = 0.0;

    if(letter == "A+"){a = 4.0;}
    else if(letter == "A"){a = 3.67;}
    else if(letter == "A-"){a = 3.33;}
    else if(letter == "B+"){a = 3.00;}
    else if(letter == "B"){a = 2.67;}
    else if(letter == "B-"){a = 2.33;}
    else if(letter == "C+"){a = 2.00;}
    else if(letter == "C"){a = 1.67;}
    else if(letter == "C-"){a = 1.33;}
    else if(letter == "D+"){a = 1.0;}
    else if(letter == "D"){a = .67;}
    else if(letter == "D-"){a = .33;}
    else if(letter == "F"){a = 0.0;}

    return a;

}

public static void updateGrade(String newGrade){
    letterGrade=newGrade;
    numberGrade=compute(newGrade);
}

@Override
public String toString(){
    String a = "\nCourse: "+getCourseID()+"\nLetter Grade: "+getLetterGrade()
            +"\nGPA in course: "+compute(getLetterGrade());
    return a;
}

//GETTERS
public String getCourseID(){
    return courseID;
}

public String getLetterGrade(){
    return letterGrade;
}

public Double getNumberGrade(){
    return numberGrade;
}

} 
```

成绩单.java：

```
import java.util.ArrayList;

public class Transcript {

private ArrayList<Course> classesTaken = new ArrayList<Course>();

public Transcript(String studentID, String studentName){
 System.out.println("\nStudent ID: "+studentID+"\nStudent Name: "+studentName);
}

public void addCourse(String courseID, String letterGrade){
    Course myCourse = new Course(courseID,letterGrade);
    classesTaken.add(myCourse);
}

public void updateCourse(String courseID, String newLetterGrade){

    for(int i=0; i<classesTaken.size(); i++){

        if(classesTaken.contains(courseID)){
        Course.updateGrade(newLetterGrade);
        }
    }
}

public void getGPA(){
calculateGPA();
}

private Double calculateGPA(){
    for(int i=0; i<classesTaken.size(); i++){
    }

    return 0.0;
}

public void printArray(){
    System.out.println("\n"+classesTaken);
}

} 
```

成绩单Tester.java：

```
public class TranscriptTester {

public static void main(String[] args){
    Transcript test = new Transcript("11234", "Cody");
    test.addCourse("COP2013","A+");
    test.addCourse("COP2014","B+");
    test.addCourse("COP2015","B+");
    test.addCourse("COP2016","D+");
    test.addCourse("COP2017","A");
    test.updateCourse("COP2013", "B-");
    test.updateCourse("COP2014", "A+");
    test.getGPA();
    test.printArray();
}
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-25T03:54:37.147

您现在正在了解为什么我们建议您避免过度使用静态字段，因为这会导致您的问题。解决方案：不要使用静态字段来保存对象的状态。

将静态字段视为类的所有对象共享的字段。如果您更改它一旦它为所有对象更改（实际上它甚至不属于对象，而是属于类本身）。

```
public class Course {

  //global variables
  private String courseID;

  // the fields below are shared by all the instances of Course.
  private static String letterGrade;
  private static Double numberGrade; 
```

您的代码中还有其他一些问题，包括调用`compute(...)`和忽略返回的答案，但我想这是另一个问题的讨论。

# java - 在二叉树的广度搜索中找到第一个空值

> ID：16206066
> 
> 赞同：0
> 
> 时间：2013-04-25T03:49:16.393
> 
> 标签：java, binary-tree, breadth-first-search, binary-heap

我正在尝试编写一个在二叉树上实现的二叉堆，但我无法找到一种将新节点添加到堆“底部”的方法，即树上的第一个空空间宽度-第一次遍历。我已经有了一个可用的 heapify 函数，但我不知道如何在 heapifying 之前添加一个新节点。

我似乎想不出一个一致的算法可以找到我可以添加节点的空空间，每次我想我想出什么东西时，它都行不通。我该怎么办？

# javascript - 具有动态过滤器防止添加记录的依赖剑道网格

> ID：16206069
> 
> 赞同：0
> 
> 时间：2013-04-25T03:50:01.123
> 
> 标签：javascript, kendo-ui, kendo-grid

好的，所以我有两个可观察的数据源。一个使用名为 TestRequest 的模型，我可以有多个模型。另一个使用 TestResult 模型，每个 TestRequest 可以存在多个。我有一个 requestId 数据项，我正在过滤它以填充我的依赖网格。使用声明性数据和声明性过滤器，一切正常。如果我动态设置过滤器，我不能再向过滤的数据源添加新记录。我怎样才能解决这个问题？我打算在数据源的更改事件的处理程序中设置“外部”ID（这就是我维护客户端主键的方式）。我可以从我的处理程序中得知“添加”操作正在触发，但是编辑器弹出窗口（我在两个网格上都使用弹出窗口编辑）没有显示？我还需要启用其他魔法吗？

如果我需要发布代码，请告诉我，我会将我的 html 和 js 放在服务器上，供大家查看和批评:)

提前致谢。

相关的 JavaScript：

```
var TestRequest = kendo.data.Model.define({
    id: "Id",
    fields: {
        "accessionNumber": { type: "string" },
        "specimenCollectionDate": { type: "date" },
        "specimenReceivedDate": { type: "date" },
        "resultReportDate": { type: "date" },
        "testDescription": { type: "string" },
        "relevantClincalInfo": { type: "string" },
        "specimenSource": { type: "string" },
        "resultStatus": { type: "string" },
        "reasonForTest": { type: "string" },
        "comments": { type: "string" }
    }
});

var testRequestDataSource = new kendo.data.DataSource({
    schema: {
        model: TestRequest
    }
});

testRequestDataSource.bind("change", function(e) {
    if (e.action === "add") {
        e.items[0].dirty = true;
        kendo.data.ObservableObject.fn.set.call(e.items[0], "Id", viewModel.testsResults.nextRequestId);
        viewModel.testsResults.nextRequestId++;
    }
});

var TestResult = kendo.data.Model.define({
    id: "Id",
    fields: {
        "requestId": {
            type: "number",
            editable: false
        },
        "foo": {
            type: "string"
        }
    }
});

var testResultDataSource = new kendo.data.DataSource({
    data: [
        {
            Id: 1,
            requestId: 1,
            foo: "bar"
        },
        {
            Id: 2,
            requestId: 1,
            foo: "baz"
        },
        {
            Id: 3,
            requestId: 2,
            foo: "beep"
        }
    ],
    schema: {
        model: TestResult
    },
    filter: {
        "field": "requestId",
        "operator": "eq",
        "value": 0
    }
});

testResultDataSource.bind("change", function(e){
    if (e.action === "add") {
        e.items[0].dirty = true;
        kendo.data.ObservableObject.fn.set.call(e.items[0], "Id", viewModel.testsResults.nextResulttId);
        viewModel.testsResults.nextResultId++;
    }
});

var viewModel = kendo.observable({
    ...
    testsResults: {
        nextRequestId: 1,
        nextResultId: 4,
        testRequests: testRequestDataSource,
        testResults: testResultDataSource,
        testRequestChange: function() {
            var selectedItems =testRequestGrid.select();
            var selectedRow = $(selectedItems[0]);
            var selectedUid = selectedRow.data("uid");
            var selectedData = testRequestGrid.dataSource.getByUid(selectedUid);
            var requestId = selectedData.id;
            this.testsResults.testResults.filter({
                "field":"requestId",
                "operator":"eq",
                "value": requestId
            });
        },
        testRequestEdited: function(e) {
            var uid = e.model.uid;
            // TODO: fix below code to use callback or better event
            setTimeout(function() {
                testRequestGrid.select(testRequestGrid.tbody.find(">tr[data-uid='"+uid+"']"));
            }, 100);
        },
        ....

.... 
```

的HTML：

```
<div id="testsResults">
    <h2>Tests/Results</h2>
    <fieldset>
        <legend>Test Requests</legend>
        <div id="testRequests">
            <div data-role="grid"
                 data-bind="source: testsResults.testRequests, events: { change: testsResults.testRequestChange, save: testsResults.testRequestEdited }"
                 data-editable="popup"
                 data-selectable="true"
                 data-toolbar='["create"]'
                 data-columns='[{"field":"accessionNumber","title":"Accession #"},
                                {"field":"specimenCollectionDate", "title":"Specimen Collection Date", "hidden":"true"},
                                {"field":"specimenReceivedDate", "title":"Specimen Received Date", "hidden":"true"},
                                {"field":"resultReportDate", "title":"Result Report Date", "hidden":"true"},
                                {"field":"testDescription","title":"Test Description"},
                                {"field":"relevantClinicalInfo", "title":"Relevant Clinical Information", "hidden":"true"},
                                {"field":"specimenSource","title":"Specimen Source", "hidden":"true"},
                                {"field":"resultStatus","title":"Result Status","hidden":"true"},
                                {"field":"reasonForTest","title":"Reason For Test", "hidden":"true"},
                                {"field":"comments","title":"Comments","hidden":"true"},
                                {"command":["edit","destroy"], "title":" ", "width":"170px"}]'>
            </div>
        </div>
    </fieldset>
    <fieldset>
        <legend>Test Results</legend>
        <div id="testResults">
            <div data-role="grid"
                 data-bind="source: testsResults.testResults"
                 data-editable="popup"
                 data-selectable="true"
                 data-toolbar='["create"]'
                 data-columns='[{"field":"requestId","title": "Test Request ID", "hidden":"true"},
                                {"field":"foo", "title":"Foo"},
                                {"command":["edit","destroy"], "title":" ", "width":"170px"}]'>
            </div>
        </div>
    </fieldset>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T21:48:30.410

耶！我要回答我自己的问题。问题是新记录与过滤器不匹配，因此无法显示编辑弹出窗口。我在数据源的更改事件处理程序中添加了缺失的部分，一切正常：

```
testResultDataSource.bind("change", function(e){
    if (e.action === "add") {
        e.items[0].dirty = true;
        kendo.data.ObservableObject.fn.set.call(e.items[0], "Id", viewModel.testsResults.nextResulttId);
        var filters = this.filter().filters;
        var requestId = filters[0].value;
        kendo.data.ObservableObject.fn.set.call(e.items[0], "requestId", requestId);
        viewModel.testsResults.nextResultId++;
} 
```

});

# php - zend framework1中的一些代码问题

> ID：16206078
> 
> 赞同：0
> 
> 时间：2013-04-25T03:51:12.070
> 
> 标签：php, zend-framework

我正在关注本教程：Zend Framework 1.11 入门

> [http://akrabat.com/wp-content/uploads/Getting-Started-with-Zend-Framework.pdf](http://akrabat.com/wp-content/uploads/Getting-Started-with-Zend-Framework.pdf)

，第 12 页，“列出专辑”

1.  `D:\program files (x86)\Zend\Apache2\htdocs\zf-tutorial\application\models\DbTable\Albums.php`

    ```
    <?php

    class Application_Model_DbTable_Albums extends Zend_Db_Table_Abstract {

        protected $_name = 'albums';

        public function getAlbum($id)
        {
            ...
        }
        public function addAlbum($artist, $title)
        {
        ...
        }

        public function updateAlbum($id, $artist, $title)
        {
            ...
        }
        public function deleteAlbum($id)
        {
            ...
        }

    } 
    ```

* * *

2.  `D:\program files (x86)\Zend\Apache2\htdocs\zf-tutorial\application\controllers\IndexController.php`

    ```
    <?php

    class IndexController extends Zend_Controller_Action  
    {
        public function indexAction() 
        $albums = new Application_Model_DbTable_Albums();
             $this->view->albums = $albums->fetchAll();
        }    
    } 
    ```

* * *

3.  `D:\program files (x86)\Zend\Apache2\htdocs\zf-tutorial\application\views\scripts\index\index.phtml`

    ```
     <?php
     $this->title = "My Albums";
     $this->headTitle($this->title);
     ?>
     <p><a href="<?php echo $this->url(array('controller'=>'index',
     'action'=>'add'));?>">Add new album</a></p>
     <table>
     <tr>
     <th>Title</th>
     <th>Artist</th>
     <th>&nbsp;</th>
     </tr>
     <?php foreach($this->albums as $album) : ?>
     <tr>
     <td><?php echo $this->escape($album->title);?></td>
     <td><?php echo $this->escape($album->artist);?></td>
     <td>
     <a href="<?php echo $this->url(array('controller'=>'index',
     'action'=>'edit', 'id'=>$album->id));?>">Edit</a>
     <a href="<?php echo $this->url(array('controller'=>'index',
     'action'=>'delete', 'id'=>$album->id));?>">Delete</a>
     </td>
     </tr>
     <?php endforeach; ?>
     </table> 
    ```

* * *

**问题：**

1.  Albums.php，为什么我们需要这个：`protected $_name = 'albums';`？

2.  索引控制器.php

    一个。 `$albums = new Application_Model_DbTable_Albums();`我们没有使用 include/require "Albums.php"，我们怎么能使用这个类：`Application_Model_DbTable_Albums`？

    湾。`$this->view->albums = $albums->fetchAll();`这是什么意思：`$this->view->albums`？为什么不使用`$this->albums`？

3.  索引.phtml

    一个。`$this->url(array('controller'=>'index','action'=>'add'))`，我在哪里可以检查这个方法：`$this->url()`？

    湾。为什么我们`foreach($this->albums as $album)`在这里使用？不像`$this->view->albums`在 IndexController.php 中那样？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-26T09:45:38.810

> Albums.php，为什么我们需要这个：protected $_name = 'albums';？

在 Zend Framework ( `Application_Model_DbTable_Albums`) 中使用 DbTable 模型时，受保护的成员`$_name`必须是与模型关联的数据库表的名称。DbTable 模型实际上将成为该表的数据库适配器。

> $albums = new Application_Model_DbTable_Albums(); 我们没有使用 include/require "Albums.php"，我们怎么能使用这个类：Application_Model_DbTable_Albums？

[Zend_Loader](http://framework.zend.com/manual/1.12/en/zend.loader.html)自动加载符合预期命名约定并属于预定义资源的类和文件。类`Application_Model_DbTable_Albums`和文件`Application/Model/DbTable/Albums.php`都符合命名约定，属于预定义的资源。

> $this->view->albums = $albums->fetchAll(); 这是什么意思：$this->view->albums？为什么不使用 $this->albums？

`$this->view->albums = $ablums->fetchAll();`是将获得的值分配给 Zend_View 对象以在视图脚本中显示的一种`$albums->fetchAll()`简写[方式](http://framework.zend.com/manual/1.12/en/zend.view.html)。这些值可以在视图脚本中回显，`echo $this->albums`或者更有可能它们可以用 foreach 循环然后显示。

> $this->url(array('controller'=>'index','action'=>'add'))，我在哪里可以检查这个方法：$this->url()？

这实际上有点难以确定，您会在[Zend_View 帮助器参考](http://framework.zend.com/manual/1.12/en/zend.view.helpers.html#zend.view.helpers.initial)中找到基本定义，只需向下滚动直到看到它。[在Zend_Controller 参考路由器部分](http://framework.zend.com/manual/1.12/en/zend.controller.router.html)可以找到一个更好的例子。本质上，`url()`帮助程序是在视图脚本中创建链接的首选方法，它不是唯一的方法，有时也不是最好的方法。

> 为什么我们在这里使用 foreach($this->albums as $album) ？不像 IndexController.php 中的 $this->view->albums？

在控制器中，我们将数据分配给`$this->view->data = $data`视图脚本（index.phtml）中的视图对象，我们在视图对象中，所以我们只需要访问提供的数据`<?php echo $this->data ?>`。在数据的情况下`$this->albums`，可以使用 foreach 循环迭代行集对象（Zend_Db_Row 对象的数组）。大多数有效数据类型都可以使用此方法分配给视图。

这是对这些概念的非常简单的概述，希望对您有所帮助。

# mysql - 在底部安排mysql查询最新帖子并应用分页

> ID：16206080
> 
> 赞同：0
> 
> 时间：2013-04-25T03:51:23.113
> 
> 标签：mysql

我很难找到一种根据我的需要对数据库查询结果进行排序的方法。这是一个数据库布局。

ID -- acc_id -- 日期等等...

1 12345 unix 时间...

2 12345 unix 时间...

3 12345 unix 时间...

就这样继续下去......

54 12345 unix 时间...

55 12345 unix 时间...

我要做的是获取最新的 10 个帖子并按 desc 顺序（按 ID 或日期）对其进行排序，以便最新的帖子位于底部，最旧的位于顶部。这样接下来的 10 个帖子将以类似的方式通过 ajax 获取。

46 12345 日期

47 12345 日期

这边走...

54 12345 日期

55 12345 日期

我不知道如何对查询进行排序。谁能告诉我这样做的方法。我会很感激你的帮助:-)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T04:11:29.767

如果你想在底部找到最新的数据，你应该`ORDER BY ID ASC`，而不是`DESC`。

# javascript - 对象 foo 没有方法“toLowercase”

> ID：16206083
> 
> 赞同：0
> 
> 时间：2013-04-25T03:52:16.963
> 
> 标签：javascript, string, object, tolower

我正在尝试获取所述对象中每个键的小写值。

```
for (each in {'foo':'bar','bar':'foo'}) {
    console.log(typeof each, each.toLowercase());
} 
```

我得到的错误是`Object foo has no method 'toLowercase'`，但`typeof each`返回`'string'`

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-25T03:53:04.400

它[`toLowerCase()`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/String/toLowerCase)带有一个大写的“C”。

# java - 从存储为字符串的 RSA 公钥初始化 PublicKey 时出现异常（适用于笔记本电脑，不适用于服务器）

> ID：16206084
> 
> 赞同：0
> 
> 时间：2013-04-25T03:52:21.300
> 
> 标签：java, rsa, public-key

我有一个正在处理的应用程序处理证书，我遇到了一个问题，当我在笔记本电脑上通过 JUnit 测试本地运行时，我的代码可以正常工作，但是当我实际将代码部署到我的服务器时，我得到了一个例外。从存储在字符串中的 RSA 公钥创建 PublicKey 时发生异常。我希望有人能给我指出一个方向，看看为什么它在服务器上失败但在 Junit 中工作。

我的 RSA 公钥：

```
-----BEGIN PUBLIC KEY-----
MIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEAvNEz3+TStAAndHTc1qwT
NGvZYyB7DD1FshQf+mbQUGJ9HccOXNn5oHB7fWQjODjlDrYyCs7FclSMTLxA3lHX
98QWeWHL2O8t8qrJQQEUWZITmr/ddiNJOOvMeYF0K5if4m84vjgx/pTwwAVyU0Yo
MMXPnRozO8o7zSyRsH4jixALDugrsveEjLQI/cIEFvNjqlhyfumHyJKywNkMH1oJ
4e/f89FkpeDV694lsLs1jguuLLnvroXYJ5Uzeos+F0Pj1zFDUvhWrjVwxsUfAxS8
5uFGTUm6EEl9XiKwi+mgg8ODrY5dh3uE2yKB2T1Qj8BfK55zB8cYbORSsm6/f6Bi
BwIDAQAB
-----END PUBLIC KEY----- 
```

我的 Junit 代码：<- 适用于笔记本电脑

```
@Test
public void testkey() throws Exception {
    String pem = "-----BEGIN PUBLIC KEY-----"+
                "MIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEAvNEz3+TStAAndHTc1qwT"+
                "NGvZYyB7DD1FshQf+mbQUGJ9HccOXNn5oHB7fWQjODjlDrYyCs7FclSMTLxA3lHX"+
                "98QWeWHL2O8t8qrJQQEUWZITmr/ddiNJOOvMeYF0K5if4m84vjgx/pTwwAVyU0Yo"+
        "MMXPnRozO8o7zSyRsH4jixALDugrsveEjLQI/cIEFvNjqlhyfumHyJKywNkMH1oJ"+
        "4e/f89FkpeDV694lsLs1jguuLLnvroXYJ5Uzeos+F0Pj1zFDUvhWrjVwxsUfAxS8"+
        "5uFGTUm6EEl9XiKwi+mgg8ODrY5dh3uE2yKB2T1Qj8BfK55zB8cYbORSsm6/f6Bi"+
        "BwIDAQAB"+
        "-----END PUBLIC KEY-----";
    PublicKey willNotWork = decodeKey(pem); 
} 
```

我的实际代码：<- 在服务器上运行时引发异常

```
@Override
public PublicKey getKey() {
    PublicKey pk = null;
     try {
        String crt =  "-----BEGIN PUBLIC KEY-----"+
                "MIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEAvNEz3+TStAAndHTc1qwT"+
                "NGvZYyB7DD1FshQf+mbQUGJ9HccOXNn5oHB7fWQjODjlDrYyCs7FclSMTLxA3lHX"+
                "98QWeWHL2O8t8qrJQQEUWZITmr/ddiNJOOvMeYF0K5if4m84vjgx/pTwwAVyU0Yo"+
                "MMXPnRozO8o7zSyRsH4jixALDugrsveEjLQI/cIEFvNjqlhyfumHyJKywNkMH1oJ"+
        "4e/f89FkpeDV694lsLs1jguuLLnvroXYJ5Uzeos+F0Pj1zFDUvhWrjVwxsUfAxS8"+
        "5uFGTUm6EEl9XiKwi+mgg8ODrY5dh3uE2yKB2T1Qj8BfK55zB8cYbORSsm6/f6Bi"+
        "BwIDAQAB"+
        "-----END PUBLIC KEY-----";
        System.out.append("crt == " + crt);
        pk = decodeKey(crt);
    }  catch(Exception ex){
        System.out.println("getKey caught: " + ex.getMessage()); 
    }  
    return pk;
} 
```

解码密钥代码：

```
public PublicKey decodeKey(String text) throws CryptographyException {
    String content = text;
    if( text.contains("-----BEGIN PUBLIC KEY-----") ) {
      content = text.replace("-----BEGIN PUBLIC KEY-----", "").replace("-----END PUBLIC KEY-----", "");
    }
    if( text.contains("-----BEGIN RSA PUBLIC KEY-----") ) {
      content = text.replace("-----BEGIN RSA PUBLIC KEY-----", "").replace("-----END RSA PUBLIC KEY-----", "");
    }
    byte[] der = Base64.decodeBase64(content);
    return decodeDerKey(der);
}

public PublicKey decodeDerKey(byte[] publicKeyBytes) throws CryptographyException {
   try {
      KeyFactory factory = KeyFactory.getInstance("RSA"); 
      PublicKey publicKey  = factory.generatePublic(
                                 new X509EncodedKeySpec(publicKeyBytes)); 
      return publicKey;
    }
    catch(Exception e) {
        throw new CryptographyException(e);
    }
} 
```

这是我在服务器上运行代码时引发的异常：

```
Could not parse certificate: java.io.IOException: DerInputStream.getLength():
lengthTag=111, too big` 
```

所以我猜我的笔记本电脑和服务器之间必须存在某种差异。我已经验证两者都运行基本相同版本的 Java（“1.7.0_17”）。我还检查了的提供者，`KeyFactory`它们也是一样的。那么我从这里看哪里呢？

# assembly - 嗨，需要一点帮助来了解摩托罗拉的汇编程序

> ID：16206085
> 
> 赞同：0
> 
> 时间：2013-04-25T03:52:24.583
> 
> 标签：assembly, motorola, 68000

如果我有：

```
0000 3304    alpha:    dc.w    5,16,4,-2 
```

我的指示是：`sub.w alpha+2,D0`

我的阿尔法是在`0000 33004`还是在`00 05 00 01 00 04 FE`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-25T05:43:52.530

**dc.w** a = 定义常量字，其中 a 是要定义的值

**sb.w** a,b = 减字，其中 a 是源，b 是目标

操作说明

```
0000 3304    alpha:    dc.w    5,16,4,-2 
```

相当于：

```
0000 3304    alpha:    dc.w   05
             alpha:    dc.w   16
             alpha:    dc.w   04
             alpha:    dc.w  -02 
```

再细分一下，第一条指令是从地址**0000 3304**开始，定义值**5**然后定义值**16**，然后定义值**4**等等。由于这些值中的每一个都被指示为一个字，因此每当定义一个新值时，您必须将该值的地址增加十六进制 2 以获得两个字节/一个字的长度。

常量全部定义后，以下值将存在于以下地址

```
0000 3304 ->  0x05
0000 3306 ->  0x10       
0000 3308 ->  0x04
0000 330A ->  0xFE 
```

指令`sub.w alpha+2,D0`的意思是从 alpha （地址`0000 3304`）开始移动 2 个字节，然后从数据寄存器中的值中减去该地址处的值`D0`。

所以，

`alpha+2`= 地址`0000 33006`

其值为`0x10`。

无论数据寄存器中的值是什么，都要从中`D0`减去。`0x10`

# mysql - 使用 MySQL 加速多表连接

> ID：16206086
> 
> 赞同：0
> 
> 时间：2013-04-25T03:52:35.340
> 
> 标签：mysql, sql, database, innodb, myisam

我有 3 个表，我试图在其中执行连接，并将结果数据插入到另一个表中。根据数据集，查询需要 15-30 分钟。我从中选择和加入的表每个至少有 25k 条记录，但很快就会增长到 500k+。

我尝试在字段上添加索引，但仍然没有太大帮助。还有其他我可以尝试的事情吗，或者这种规模的加入需要这么长时间吗？

这是我要执行的查询：

```
INSERT INTO audience.topitem
(runs_id, total_training_count, item, standard_index_value, significance, seed_count, nonseed_count, prod, model_type, level_1, level_2, level_3, level_4, level_5)
SELECT 5, seed_count + nonseed_count AS total_training_count,
ii.item, standard_index_value, NULL, seed_count, nonseed_count,
standard_index_value * seed_count AS prod, 'site', topic_L1, topic_L2, topic_L3, topic_L4, topic_L5
FROM audience.item_indexes ii
LEFT JOIN audience.usercounts uc ON ii.item = uc.item AND ii.runs_id = uc.runs_id 
LEFT JOIN categorization.categorization at on ii.item = at.url
WHERE ii.runs_id = 5 
```

表：audience.item_indexes

```
CREATE TABLE `item_indexes` (
`item` varchar(1024) DEFAULT NULL,
`standard_index_value` float DEFAULT NULL,
`runs_id` int(11) DEFAULT NULL,
`model_type` enum('site','term','combo') DEFAULT NULL,
KEY `item_idx` (`item`(333))
) ENGINE=MyISAM DEFAULT CHARSET=utf8; 
```

表：audience.usercounts

```
CREATE TABLE `usercounts` (
`item` varchar(1024) DEFAULT NULL,
`seed_count` int(11) DEFAULT NULL,
`nonseed_count` int(11) DEFAULT NULL,
`significance` float(19,6) DEFAULT NULL,
`runs_id` int(11) DEFAULT NULL,
`model_type` enum('site','term','combo') DEFAULT NULL,
KEY `item_idx` (`item`(333))
) ENGINE=MyISAM DEFAULT CHARSET=utf8; 
```

表：audience.topitem

```
CREATE TABLE `topitem` (
`id` int(11) NOT NULL AUTO_INCREMENT,
`total_training_count` int(11) DEFAULT NULL,
`item` varchar(1024) DEFAULT NULL,
`standard_index_value` float(19,6) DEFAULT NULL,
`significance` float(19,6) DEFAULT NULL,
`seed_count` int(11) DEFAULT NULL,
`nonseed_count` int(11) DEFAULT NULL,
`prod` float(19,6) DEFAULT NULL,
`cat_type` varchar(32) DEFAULT NULL,
`cat_level` int(11) DEFAULT NULL,
`conf` decimal(19,9) DEFAULT NULL,
`level_1` varchar(64) DEFAULT NULL,
`level_2` varchar(64) DEFAULT NULL,
`level_3` varchar(64) DEFAULT NULL,
`level_4` varchar(64) DEFAULT NULL,
`level_5` varchar(64) DEFAULT NULL,
`runs_id` int(11) DEFAULT NULL,
`model_type` enum('site','term','combo') DEFAULT NULL,
PRIMARY KEY (`id`)
) ENGINE=MyISAM AUTO_INCREMENT=825 DEFAULT CHARSET=utf8; 
```

表：categorization.categorization

```
CREATE TABLE `AT_categorization` (
`url` varchar(760) NOT NULL ,
`language` varchar(10) DEFAULT NULL,
`category` text,
`entity` text,
`source` varchar(255) DEFAULT NULL,
`topic_L1` varchar(45) NOT NULL DEFAULT '',
`topic_L2` varchar(45) NOT NULL DEFAULT '',
`topic_L3` varchar(45) NOT NULL DEFAULT '',
`topic_L4` varchar(45) NOT NULL DEFAULT '',
`topic_L5` varchar(45) NOT NULL DEFAULT '',
`last_refreshed` datetime DEFAULT NULL,
PRIMARY KEY (`url`,`topic_L1`,`topic_L2`,`topic_L3`,`topic_L4`,`topic_L5`),
UNIQUE KEY `inx_url` (`url`)
) ENGINE=MyISAM DEFAULT CHARSET=latin1; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T05:10:01.920

如果添加以下索引，您的查询将运行得更快：

```
CREATE INDEX runs_idx ON audience.item_indexes (runs_id);

ALTER TABLE audience.usercounts
DROP INDEX item_idx,
ADD INDEX item_idx (runs_id, item(333)); 
```

此外，`item_indexes`is `utf8`，但 AT_categorization is `latin1`，这会阻止使用任何索引。要解决此问题，请更改`AT_categorization`为`utf8`：

```
ALTER TABLE AT_categorization CHARSET=utf8; 
```

最后，对于`AT_categorization`表，两个索引

```
PRIMARY KEY (`url`,`topic_L1`,`topic_L2`,`topic_L3`,`topic_L4`,`topic_L5`),
UNIQUE KEY `inx_url` (`url`) 
```

是多余的。因此，您可以`DROP`使用这些，并且只需将该`url`字段作为主键：

```
ALTER TABLE AT_categorization 
DROP PRIMARY KEY,
DROP KEY `inx_url`,
ADD PRIMARY KEY (url); 
```

# jquery - 使用 css 和滚动动画创建伪对角线蒙版

> ID：16206089
> 
> 赞同：0
> 
> 时间：2013-04-25T03:52:53.960
> 
> 标签：jquery, css, mask, diagonal

我正在努力创造一种效果，当滚动完成时，会出现一条对角线并显示其中的内容，但给出内容正常流动的想法......

在下图中，我认为您可以更好地理解：

![](https://i.stack.imgur.com/pnTn9.png)

CSS代码：

```
#diagonal{
    background: url("/img/bg-dark.jpg") #000;
    transform: skew(45deg);
    -ms-transform: skew(45deg);
    -webkit-transform: skew(45deg);
    -webkit-backface-visibility: hidden;
    outline: 1px solid transparent;
    -o-transform: skew(45deg);
    -moz-transform: skew(45deg);
    position: fixed;
    overflow: hidden;
    z-index:0;
    width: 300%;
    height: 300%;
    right: -600%;
    top: 0%;
}
body{
    background: #fff url("/img/bg.jpg");
    font-family: "Lato",sans-serif;
    font-size: 13px;
    overflow: hidden;
    height: 100%;
    width: 100%;
    position: relative;
} 
```

**问题1：**写成“lorem ipsum ...”的div的内容必须只在黑暗中出现，好像在这个对角线上并且溢出：隐藏。

**问题2：**它对角线是一个位置固定的div，然后为了让它覆盖整个屏幕我用滚动来改变他的属性。如果我将内容放入对角线，我将不得不在内容 div 中补偿对角线的移动（以给人一种他总是在屏幕中央的印象）。

**问题3：**对角线是用属性倾斜做的；将内容放置在其中，必须补偿偏斜以及将内容保持在中心的对角线需要左侧的值根据其中的内容“位置”而变化（因为距顶部大于底部）。

**可能的解决方案：** 我对它做了很多测试，我更接近的是，在对角线上创建一个 div Square（直线）并将内容放入其中。所以左属性不需要因为是一条直线而变化。在这方面我无法解决的问题是在对角线滑动到侧面（从右到左）时将内容保持在屏幕中央的精确计算。

有人见过这样的事情或知道如何帮助我吗？

谢谢你

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T04:23:57.070

您可以利用`position: relative;`并使用`z-index`使这些元素脱颖而出：

```
.cover {
    z-index: 2;
}

.above {
    position: relative;
    z-index: 3;
} 
```

这是一个演示：http: [//jsfiddle.net/83Wyy/931/](http://jsfiddle.net/83Wyy/931/)

# c - 线程在带有 SIGILL 信号的 pthread_mutex_lock 中死亡

> ID：16206091
> 
> 赞同：1
> 
> 时间：2013-04-25T03:53:10.197
> 
> 标签：c, pthreads, mips, uclinux

我正在嵌入式 linux 操作系统（uclinux，mips CPU）上开发一个项目，它偶尔会崩溃。当我尝试使用 gdb 检查 coredump 时，我可以看到它收到了 SIGILL 信号。

有时我可以看到回溯，这表明它在 pthread_mutex_lock 中死亡。但大多数时候，回溯是无效的。

有效的回溯

```
(gdb) bt
#0  <signal handler called>
#1  0x2ab87fd8 in sigsuspend () from /lib/libc.so.0
#2  0x2aade80c in __pthread_wait_for_restart_signal () from /lib/libpthread.so.0
#3  0x2aadc7ac in __pthread_alt_lock () from /lib/libpthread.so.0
#4  0x2aad81a4 in pthread_mutex_lock () from /lib/libpthread.so.0
#5  0x0042fde8 in aos_mutex_lock (mutex=0x66bea8) at ../../source/ssp/os/sys/linux/aos_lock_linux.c:184 
```

无效回溯

```
(gdb) bt
#0  0x00690430 in ?? ()
#1  0x00690430 in ?? () 
```

我使用 pthread_attr_setstackaddr 为每个线程初始化一个堆栈，这样我就可以通过检查它的堆栈来看到它的调用帧。另外，我发现它死在 pthread_mutex_lock 中。

我使用包装器进行锁定和解锁，例如

```
struct aos_mutex_t
{
    pthread_mutex_t     mutex;
    S8                  obj_name[AOS_MAX_OBJ_NAME];
    S32                 lFlag;
};
S32 aos_mutex_lock(AOS_MUTEX_T *mutex)
{
    S32 status;

    AOS_ASSERT_RETURN(mutex, AOS_EINVAL);

    mutex->lFlag++;
    status = pthread_mutex_lock( &mutex->mutex );

    if (status == 0)
    {
        return AOS_SUCC;
    }
    else
    {
        return AOS_RETURN_OS_ERROR(status);
    }
}

/*
 * aos_mutex_unlock()
 */
S32 aos_mutex_unlock(AOS_MUTEX_T *mutex)
{
    S32 status;

    AOS_ASSERT_RETURN(mutex, AOS_EINVAL);

    status = pthread_mutex_unlock( &mutex->mutex );
    mutex->lFlag--;
    if (status == 0)
        return AOS_SUCC;
    else
    {
        return AOS_RETURN_OS_ERROR(status);
    }

} 
```

所有这些互斥锁都是在使用它们之前启动的。

我试过 gdb 运行程序，它没有死。

我写了一个简单的程序，11个线程什么都不做，只是在死循环中锁定和解锁。它没有死。

有什么建议吗？

# mysql - MySQL 事务隔离是如何工作的？

> ID：16206096
> 
> 赞同：0
> 
> 时间：2013-04-25T03:53:45.897
> 
> 标签：mysql, sql, mysqli, innodb

正如我从[这里](http://msdn.microsoft.com/en-us/library/ms173763.aspx)和[这里](http://blogs.msdn.com/b/craigfr/archive/2007/05/09/repeatable-read-isolation-level.aspx)读到的，如果事务级别是 REPEATABLE-READ，则没有其他事务可以读取该事务正在访问的数据。但是我在测试时发现了这一点。*（MySQL 服务器版本：5.0.21-community-nt /innodb 引擎）*。

**交易A：**

```
mysql> SELECT @@tx_isolation;
+-----------------+
| @@tx_isolation  |
+-----------------+
| REPEATABLE-READ | 
+-----------------+
1 row in set (0.00 sec)

mysql> SET autocommit = 0;
Query OK, 0 rows affected (0.00 sec)

mysql> UPDATE manufacturer
    -> SET lead_time = 22
    -> WHERE mcode = 'ACL';
Query OK, 1 rows affected (0.00 sec)
Rows matched: 1  Changed: 1  Warnings: 0 
```

**交易 B**

```
mysql> set autocommit=0;
Query OK, 0 rows affected (0.00 sec)

mysql> SELECT * FROM Manufacturer ;
+-------+------------+-----------+
| mcode | mname      | lead_time |
+-------+------------+-----------+
| ACL   | ACL Cables |         2 | 
| HAY   | Haycarb    |         4 | 
| HYL   | Hayleys    |         5 | 
+-------+------------+-----------+
3 rows in set (0.00 sec) 
```

事情是我希望事务 B 等到事务 A 提交但它没有发生。有人可以告诉我如何应用它以及它是如何工作的* *（我可能做错了）* *。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T04:53:59.873

由于交易 A 显示：

```
... Changed: 0 ... 
```

记录已经`lead_time`设置为`2`，所以`UPDATE`没有改变任何东西，事务 B 只看到原始值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T05:27:07.193

可重复读取适用于单个事务。它表示您可以在交易中尽可能多地读取值，并且您将得到相同的答案。也没有办法知道哪个事务首先开始，A 还是 B。此外，一个事务可以随时中断，另一个事务运行或继续。您的示例没有反映现实，因为您首先运行（在命令行上）A 到完成，然后 B 到完成。这是序列化。

# ios - ios - 如何将 javascript 加载到 UIWebview 中？

> ID：16206097
> 
> 赞同：-2
> 
> 时间：2013-04-25T03:53:52.677
> 
> 标签：ios, objective-c

我正在尝试将 javascript 加载到 UIWebview 中，这是 javascript 代码

```
<script type=\"text/javascript\">
window.external =
{
    'Notify': function(s) { document.location = 'acs://settoken?token=' + s; },
    'notify': function(s) { document.location = 'acs://settoken?token=' + s; }
};
</script>

- (void) webViewDidFinishLoad:(UIWebView *)webView
{
   //Here how to call the above javascript
  [webView stringByEvaluatingJavaScriptFromString:@"";
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-25T04:19:20.300

关闭 webview 语句。你的代码应该是这样的：

```
[webView stringByEvaluatingJavaScriptFromString:@"window.external =\
{\
'Notify': function(s) { document.location = 'acs://settoken?token=' + s; },\
'notify': function(s) { document.location = 'acs://settoken?token=' + s; }\
}"]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-25T04:13:19.383

您可以使用此方法调用`javascript`from `html`to`iOS` `webview`

```
 [self.webView stringByEvaluatingJavaScriptFromString:@"my_html_function();"]; 
```

这可能会对您有所帮助。

# spring - Spring security LDAP 身份验证，无需在配置文件中指定身份验证详细信息

> ID：16206107
> 
> 赞同：1
> 
> 时间：2013-04-25T03:55:08.857
> 
> 标签：spring, spring-security, spring-ldap

我们在我们的应用程序中使用 Spring 安全 LDAP 身份验证来进行身份验证。对于 ldap 身份验证，我们在 applicationContext-security.xml 中配置用户 ID 和密码。我想知道是否有一种方法可以通过 LDAP 进行身份验证，而无需在 configuration(applicationContext-security.xml) 文件中指定用于访问 LDAP 服务器的用户参数。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T04:24:31.400

[Jasypt](http://www.jasypt.org/encrypting-configuration.html)支持对 `.properties`文件进行加密，并在 Spring 访问时透明解密。

因此，您可以尝试在文件中指定身份验证详细信息`.properties` ，然后使用 Jasypt 对该`.properties` 文件进行加密。用于将文件`<context:property-placeholder>`中的身份验证详细信息注入`.properties`到`applicationContext-security.xml`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T10:01:13.770

`userDn`如果您的 LDAP 允许匿名访问，您可能不会`password`在`contextSource`. 在这种情况下，Spring Security 将使用匿名进行读写操作。

# android - 限制用户在日期选择器中选择未来日期

> ID：16206108
> 
> 赞同：1
> 
> 时间：2013-04-25T03:55:17.383
> 
> 标签：android

我曾经`DatePicker`根据用户输入的生日日期来计算年龄。现在我想限制用户选择未来的日期......这是我在`mainActivity.java`

```
@SuppressLint("NewApi")

public static class DatePickerFragment extends DialogFragment                            
    implements DatePickerDialog.OnDateSetListener
{    
    @Override   
    public Dialog onCreateDialog(Bundle savedInstanceState) 
    {       
        // Use the current date as the default date in the picker        
        final Calendar c = Calendar.getInstance();        
        int mBirthYear = c.get(Calendar.YEAR);        
        int mMonthOfYear = c.get(Calendar.MONTH);        
        int mDayOfMonth= c.get(Calendar.DAY_OF_MONTH);        
        // Create a new instance of DatePickerDialog and return it       
return new DatePickerDialog(getActivity(), this, mBirthYear,mMonthOfYear ,mDayOfMonth  );

}           

public void onDateSet(DatePicker view, int mBirthYear, int mMonthOfYear, int mDayOfMonth) 
{
  int mAge;  
  mAge = Year-mBirthYear;
  if ((mMonthOfYear == Month && Day < mDayOfMonth) || ( Month < mMonthOfYear) )  
         {
                    mAge--;
          }                

                 String years = String.valueOf(mAge);
                  MainActivity.textView6.setText(years); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T04:07:59.567

这是反向操作。限制选择过期日期。

我不知道有什么特殊的方法

但我这样解决了，这可能不是标准的，但对我有用

```
 public void onDateSet(DatePicker view, int selectedYear,
            int selectedMonth, int selectedDay) {
        final Calendar cf = Calendar.getInstance();
        year = cf.get(Calendar.YEAR);
        month = cf.get(Calendar.MONTH);
        day = cf.get(Calendar.DAY_OF_MONTH);

        // Log.e("year", selectedYear + "year " + year);
        if (selectedYear < year) {
            Toast.makeText(getApplicationContext(),
                    "Please choose future date", 1).show();
        }
        if (selectedMonth < month) {
            if (selectedYear <= year) {
                Toast.makeText(getApplicationContext(),
                        "Please choose future date", 1).show();
            } else {
                year = selectedYear;
                month = selectedMonth;
                day = selectedDay;

                // set selected date into textview
                shipdate.setText(new StringBuilder().append(month + 1)
                        .append("-").append(day).append("-").append(year)
                        .append(" "));
            }
        }
        if (selectedDay < day) {
            if (selectedMonth <= month) {
                if (selectedYear <= year) {
                    Toast.makeText(getApplicationContext(),
                            "Please choose future date", 1).show();

                } else {
                    year = selectedYear;
                    month = selectedMonth;
                    day = selectedDay;

                    // set selected date into textview
                    shipdate.setText(new StringBuilder().append(month + 1)
                            .append("-").append(day).append("-")
                            .append(year).append(" "));
                }

            } else {
                year = selectedYear;
                month = selectedMonth;
                day = selectedDay;

                // set selected date into textview
                shipdate.setText(new StringBuilder().append(month + 1)
                        .append("-").append(day).append("-").append(year)
                        .append(" "));
            }

        } else {
            year = selectedYear;
            month = selectedMonth;
            day = selectedDay;

            // set selected date into textview
            shipdate.setText(new StringBuilder().append(month + 1)
                    .append("-").append(day).append("-").append(year)
                    .append(" "));
        }

    }
}; 
```

# java - 从 apache lucene 索引中搜索并计算结果组

> ID：16206110
> 
> 赞同：0
> 
> 时间：2013-04-25T03:56:06.453
> 
> 标签：java, search, lucene

我正在尝试从 lucene 索引中搜索，但我想过滤此搜索。有两个字段内容和类别。假设我想搜索具有“体育”的文件，并且我还想计算 a 和 b 类别中有多少文件。我正在尝试使用以下代码来实现这一点。但问题是，如果有数百万条记录，那么由于循环执行，它会变慢，建议我用另一种方法来完成任务。

尝试 { File indexDir= new File("文件路径")

```
 Directory directory = FSDirectory.open(indexDir);

                IndexSearcher searcher = new IndexSearcher(directory, true);
                int maxhits=1000000;
                QueryParser parser1 = new QueryParser(Version.LUCENE_36, "contents",

                  new StandardAnalyzer(Version.LUCENE_36));

          Query qu=parser1.parse("sport");

                TopDocs topDocs = searcher.search(, maxhits);
                ScoreDoc[] hits = topDocs.scoreDocs;

          len = hits.length;

       JOptionPane.showMessageDialog(null,"found times"+len);

                 int docId = 0;
                Document d;

 String category="";

int ctr=0,ctr1=0;

for ( i = 0; i<len; i++) {
docId = hits[i].doc;
d = searcher.doc(docId);
category= d.get(("category"));
if(category.equals("a"))
ctr++;
if(category.equals("b"))
ctr1++;

}

  JOptionPane.showMessageDialog("wprd found in category a times"+ctr);
   JOptionPane.showMessageDialog("wprd found in category b times"+ctr1);
  }

 catch(Exception ex)

 {

  ex.printStackTrace();
 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T08:31:29.597

您可以只查询您要查找的每个类别并获取`totalHits`. 更好的是使用[TotalHitCountCollector](http://lucene.apache.org/core/4_0_0/core/org/apache/lucene/search/TotalHitCountCollector.html)，而不是获取`TopDocs`实例：

```
Query query = parser1.parser("+sport +category:a")
TotalHitCountCollector collector = new TotalHitCountCollector();
search.search(query, collector); 
ctr = collector.getTotalHits();
query = parser1.parser("+sport +category:b")
collector = new TotalHitCountCollector();
search.search(query, collector); 
ctr1 = collector.getTotalHits(); 
```

# sql-server - Web 服务启动时加载数据

> ID：16206112
> 
> 赞同：0
> 
> 时间：2013-04-25T03:56:27.447
> 
> 标签：sql-server, web-services, dotnetnuke

我有一个场景，当我开始运行 Web 服务时，我必须从 SQL Server 加载数据。后来我必须将这些数据用于我的应用程序，而不是每次都从数据库中访问它。除此之外，这些数据应该每隔一小时刷新一次，而不影响后端的网站运行。如果你们中有人遇到过这种情况，请告诉我解决方案。顺便说一句，我正在为我的前端使用 asp.net Web 服务、SQL 服务器数据库和 DNN。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T06:14:30.030

在 Global Asax,Application start 事件中，您可以加载数据集中的所有数据。并且通过使用Sql Cache依赖，你可以每小时刷新一次数据。但是不建议加载整个数据。这样你的内存会被填满。会有性能下降。

[http://www.codeproject.com/Articles/14976/ASP-NET-Caching-Dependencies](http://www.codeproject.com/Articles/14976/ASP-NET-Caching-Dependencies)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T08:53:46.180

预加载所有数据并不是一个好的做法，因为这样数据库就失去了它的用途。对于一些很少更新但经常需要的数据可能没问题，但绝对不是数据库中的所有数据。

至于数据的加载，您可以使用其他人已经建议的应用程序启动事件。

关于缓存 - 使用 Application 对象使此数据可用于应用程序的所有部分，并为其添加一个属性，以保持上次更新的时间。然后只需创建单独的服务，该服务将每 X 分钟检查一次最后更新时间，并在时间到来时刷新数据。

# c++ - 最大回文 3 位数 C++

> ID：16206113
> 
> 赞同：0
> 
> 时间：2013-04-25T03:56:33.630
> 
> 标签：c++, algorithm, c++11, palindrome

我无法弄清楚为什么这段代码不起作用。它甚至似乎没有通过我的 for 循环和嵌套循环。我对编程很陌生。我一直在尝试回答欧拉问题以供练习。对不起，如果我的代码很糟糕。

```
 #include <iostream>
    #include <string>
    using namespace std;

    bool isPalindrome(int x) {
        string str = to_string(x);

        for(string::reverse_iterator rit=str.rbegin(); rit!=str.rend(); ++rit) {
            string pal = to_string(*rit);
            if(pal == str) {
                return true;
            }else {
                return false;
            }
        }
    }

    int main() {
        int max[] = {0, 0};

        for(int i=999; i>99; i--) {
            for( int j =999; j>99; j--) {
            int pal = i*j;
                if(isPalindrome(pal) == true) {
                max[1] = pal;
                if(max[1] > max[0]){
                    max[0] = pal;
                    }
                }
            }
        }
        cout << max[0];
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T04:17:11.580

`isPalindrome`我认为您需要在比较完整的字符串后返回 true 。即`return true;`应该在`for`循环之外

为了检查最大的 3 位回文，你为什么要通过`int pal = i*j;`ie 进行第一次迭代`999*999`。检查这个

```
bool isPalindrome(int x) {
string str = to_string(x);
string pal = str;
std::reverse(pal.begin(),pal.end()); 

  if(pal == str) {
      return true;
  }else {
      return false;
  }
} 
```

# c - 从二进制文件中重复 fread() 16 位

> ID：16206119
> 
> 赞同：1
> 
> 时间：2013-04-25T03:57:24.353
> 
> 标签：c, file, file-io, binary, hex

我正在读取一个二进制文件。前 16 位代表一个数组索引，接下来的 16 位代表即将列出的 16 位项目的数量，然后剩下的 16 的倍数代表所有这些 16 位项目。例如，文件“程序”的以下十六进制转储：

```
 30 00 00 02 10 00 F0 25 
```

表示索引 0x3000，后面有 0x0002 个元素，分别是 0x1000 和 0xF025。

```
 FILE *fp = fopen(program, "rb");
 char indexChar, nItemsChar;
 u_int16_t index, nItems;
 fread (&indexChar, 2, 1, fp);
 fread (&nItemsChar, 2, 1, fp);
 address = strtol(&indexChar, NULL, 16);
 nItems = strtol(&nItemsChar, NULL, 16);
 for (u_int16_t i = 0; i < nItems; ++i)
 {
     fread (state->mem + index + i, 2, 1, fp);
 } 
```

我什至不确定这种方法是否有效，因为我在尝试将 fRead() 放入 nItemsChar 时得到了 EXC_BAD_ACCESS。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T10:35:35.113

```
uint16_t index, *nItems;

fread (&index, sizeof(uint16_t), 1, fp);
nItems = (uint16_t*)calloc(index, sizeof(uint16_t));
fread (nItems, sizeof(uint16_t), index, fp); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T04:08:08.427

您混淆了 ascii（文本）文件 i/o 和二进制文件。

*   程序在 fread(&nItemsChar,2,1,fp) 处崩溃，因为您已将 2 个字节读入 1 个字节的内存空间（实际上它可能会弄乱先前的 fread）
*   然后您尝试使用 strtol 将 ascii 转换为 long int 但读取的值是二进制的

相反，只需使用

```
fread(&index, sizeof(index),1,fp);
fread(&nItems, sizeof(nItems),1,fp); 
```

然后是for循环。请注意，这假定该文件以与您的处理器/配置相同的字节顺序写入。

# jquery - mousedown 的默认行为是什么？

> ID：16206122
> 
> 赞同：1
> 
> 时间：2013-04-25T03:57:58.810
> 
> 标签：jquery

我遇到了一些明确阻止 mousedown 事件的默认行为的代码。我想知道鼠标按下的默认行为可能是什么，以及为什么要阻止它。

```
 .on('mousedown.minicolors', '.minicolors-grid', function (event) {
      var target = $(this); 
      event.preventDefault();
      $(document).data('minicolors-target', target);
      move(target, event, true);
   }) 
```

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T03:59:41.940

默认行为取决于对象是什么。

如果您显示代码附带的相关 HTML，也许还有更多代码，我们可以更具体地回答，这样我们就可以看到代码作用于哪些对象。

此外，`preventDefault()`即使没有默认行为，调用也不会造成任何伤害。

# google-chrome - Google Chrome 脚本与解析器

> ID：16206124
> 
> 赞同：0
> 
> 时间：2013-04-25T03:58:05.547
> 
> 标签：google-chrome

我对谷歌浏览器中的网络选项卡有这个问题，在 intitator 列下，脚本被标记为从脚本中获取，有些被标记为由解析器获取；

2个发起者有什么区别？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T04:01:50.180

从解析器获得的那些是通过解析 HTML 文档本身获得的（即它们是`<script>`标签/源的内容）。从 Script 中获取的，是通过运行脚本获取的。

# jsp - 文件上传路径在元素中不起作用

> ID：16206128
> 
> 赞同：0
> 
> 时间：2013-04-25T03:58:29.233
> 
> 标签：jsp, spring-mvc, file-upload, file-io, upload

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T04:10:49.997

假设该`fileupload`文件夹位于您的 Web 应用程序的根目录中（例如 www.yoursite.com/project/fileupload），为什么不使用静态 href 呢？

```
<a href="/project/fileupload/zingo.pdf" target="_blank">Click here to View the File</a> 
```

确保将文件上传到正确的目录：

```
String uploadDir = "/fileupload/"; // or "/~project/fileupload/"
String path = getServletContext().getRealPath(uploadDir); 
```

# android - 如何以循环方式滑动视图集合

> ID：16206129
> 
> 赞同：0
> 
> 时间：2013-04-25T03:58:50.587
> 
> 标签：android

我有四个表面视图，我想一次显示一个。如果我想看下一个，我需要从右向左滑动才能看到下一个表面视图。它就像电影胶片。可以使用什么android组件来实现这一点？任何方向将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T06:03:30.743

也许`InfiniteViewPager`可以帮助你：[https ://github.com/antonyt/InfiniteViewPager](https://github.com/antonyt/InfiniteViewPager)

在您的布局中，您可以使用：

```
<com.antonyt.infiniteviewpager.InfiniteViewPager 
       android:id="@+id/pager" 
       android:layout_width="match_parent" 
       android:layout_height="match_parent" /> 
```

在您的 Activity 中，将您的 PageAdapter 包装在`InfinitePagerAdapter`：

```
PagerAdapter adapter = new InfinitePagerAdapter( ... a PageAdapter ... ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T04:24:31.677

我认为你应该使用`TabSwipe`功能。

这将帮助您从一个视图滑到另一个视图**从右到左**和**从左到右**。

读：

1.  [标签和滑动视图](http://www.lucazanini.eu/2012/android/tabs-and-swipe-views/?lang=en)
2.  [使用 viewpager 滑动水平视图](http://android-developers.blogspot.in/2011/08/horizontal-view-swiping-with-viewpager.html)

# ruby - 为什么在 Ruby 中返回“self”

> ID：16206130
> 
> 赞同：2
> 
> 时间：2013-04-25T03:58:53.450
> 
> 标签：ruby

我在这里关注这个 Ruby 教程，它正在谈论堆栈和队列 [http://rubymonk.com/learning/books/4-ruby-primer-ascent/chapters/33-advanced-arrays/lessons/86-stacks-和队列#solution4117](http://rubymonk.com/learning/books/4-ruby-primer-ascent/chapters/33-advanced-arrays/lessons/86-stacks-and-queues#solution4117)

它为堆栈提供了以下代码

```
class Stack
  def initialize
    @store = Array.new
  end

  def pop
   @store.pop
  end

  def push(element)
    @store.push(element)
    self
  end

  def size
    @store.size
  end
end 
```

我的问题是：为什么必须在“push”方法中返回“self”，而在pop方法中我们不必返回self？这里有什么区别？

谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-25T04:04:59.360

[Array#push](http://ruby-doc.org/core-2.0/Array.html#method-i-push)和[Array#pop](http://ruby-doc.org/core-2.0/Array.html#method-i-pop)返回不同的东西。第一个返回修改后的数组，第二个返回弹出的元素。

您可能不想返回修改后的数组的原因是它破坏了封装并暴露了对象的内部状态。尽管如此，我们还是想链接我们的推送调用（即`Stack.new.push(2).push(5)`），所以我们返回 self（类型`Stack`）而不是 nil 或其他东西。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-25T05:22:22.763

这是由于用例的不同。

*   当您使用 时`push`，您将它与参数一起使用`element`，并且您进一步知道操作成功。从方法中取回的值`element`是没有用的。具有返回值`self`使其更方便，例如允许链接方法。
*   当您使用`pop`时，在有用的情况下，您不确定数组中是否有元素（否则它不成立），以及通过弹出来获得什么元素。而取回弹出的值是使用该方法的目的。

换句话说，`push`是“设置器/修改器”方法，`pop`而是（破坏性）“获取器”方法。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-25T04:01:55.053

Ruby 约定是在弹出时返回被弹出的东西，并在推送时返回数据结构本身。查看数组的行为方式。

# php - 我应该为 PHP 访客计数器使用文本文件还是数据库？

> ID：16206131
> 
> 赞同：1
> 
> 时间：2013-04-25T03:59:10.493
> 
> 标签：php, visitor-statistic

我需要为我的网站创建一个访问者计数器，我想知道是从位于我主机中某处的 txt 文件中存储和读取信息，还是直接从数据库中读取信息更好。

使用数据库意味着将为每个访问该站点的访问者创建一个 DB 条目，老实说，我认为这不会是好的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-25T04:00:27.443

文件计数器 - 当只是计数。数据库计数器 - 访问时跟踪、依赖、分析、聚合。

***当文件很小时***，读取文件确实更快。不过，当网站负载很重时，可能会产生[***竞争条件效应。***](http://en.wikipedia.org/wiki/Race_condition)如果需要，很难显示链接数据。对于这种需求，有一个很好的解决方案：*数据库管理系统*。

数据库（具有良好的设计）允许避免竞争条件。对于大量链接的数据结构，它也是一个更好的解决方案。更好的是，当您需要记录访问、推荐人等时......

**数据库建议：**您可以将计数器存储在表格的一行中`global_settings`并在每次页面访问时更新它，或者您可以通过在`visit`表格中注册每次访问来获取它（带有附加数据，如`IP`、`DateTime`、`UserID`等...）`SELECT COUNT(*) from visit;`。

***[这里](https://stackoverflow.com/questions/6853482/flat-file-vs-database-speed)***还有另一个相关的话题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T04:00:37.147

从文本文件中加载任何内容都是非常糟糕的做法。使用数据库是更好的解决方案。数据库旨在存储大量数据，因此完全可以接受。

# javascript - 在javascript的循环中获取对象的正确索引

> ID：16206132
> 
> 赞同：1
> 
> 时间：2013-04-25T03:59:12.960
> 
> 标签：javascript, raphael

我有一个节点列表，我将使用 raphael 对象绘制每个节点。我有以下循环：

```
for(var i=0; i<curNodes.length; i++){
    var node = curNodes[i];
    var obj = paper.rect(node.getX(), node.getY(), node.width, node.getHeight())
   .attr({fill:nodes[i].getColor(), "fill-opacity": 0.6})
   .click(function(e){ onMouseClicked(i,e); });
} 
```

单击时，我想调用一个函数，该函数可以查看与 curNodes 数组的“i”个元素关联的一些数据。但是，始终将最后一个“i”传递给此函数。我的功能是：

```
var onMouseClicked = function(i, event){
switch (event.which) {
    case 1:
        this.attr({title: curNodes[i].name});
        break;
    }
} 
```

调用函数时应该如何访问正确的索引？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-25T04:03:01.577

试试这个：

```
.click((function (i) {
    return function (e) {
        onMouseClicked(i,e);
    };
})(i)); 
```

就像您注意到的那样，`i`（或函数中的参数）的值是`for`循环中的最后一个索引。这是因为`click`事件不会立即发生 - 绑定会发生，但`i`不会捕获 的值。到`click`处理程序实际执行时（`click`以任何方式触发事件时），`for`循环已经完成（很久以前），并且值`i`是循环的最终值。`i`您可以使用像上面这样的闭包来捕获 的值。

虽然我知道另一种处理方式，但我认为更清洁的是使用：

```
.click(clickHandler(i));

function clickHandler(index) {
    return function (e) {
        onMouseClicked(i, e);
    };
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-25T04:03:07.310

这是因为[闭包](https://developer.mozilla.org/en-US/docs/JavaScript/Guide/Closures)变量`i`。

```
for (var i = 0; i < curNodes.length; i++) {
    (function(i) {
        var node = curNodes[i];
        var obj = paper.rect(node.getX(), node.getY(), node.width,
                node.getHeight()).attr({
                    fill : nodes[i].getColor(),
                    "fill-opacity" : 0.6
                }).click(function(e) {
                    onMouseClicked(i, e);
                });
    })(i);
} 
```

# java - 根据命令 JAVA 向客户端发送字符串

> ID：16206133
> 
> 赞同：0
> 
> 时间：2013-04-25T03:59:17.853
> 
> 标签：java, android, sockets, networking

所以我试图让服务器坐下来听等待来自客户端的连接。客户端发送一些字符串，服务器根据收到的内容执行一些操作。现在我想要发生的是客户端通过一些命令发送请求返回数据并让服务器获取它需要的内容并将字符串发送回来。

没什么大不了的吧？好吧，由于某种原因我无法让它工作，我最好的猜测是它没有正确关闭套接字。我无法弄清楚为什么它不会或我做错了什么。

客户

```
String data = "";

    DataOutputStream outToServer = null;
    BufferedReader input;

    try {
        outToServer = new DataOutputStream(clientSocket.getOutputStream());         
        outToServer.writeBytes("GETDATA");
        outToServer.flush();

      input = new BufferedReader(new InputStreamReader(clientSocket.getInputStream()));
      data = input.readLine();
      Log.d("ANSWER: ",  data);
      input.close();

    } catch (IOException e) {
        Log.d("Error: ", e.toString());

    } 
```

服务器

```
ServerSocket listeningSocket = new ServerSocket(9008);
        BufferedReader fromClient ;
        PrintStream os;

        while(true) {
            Socket clientSocket = listeningSocket.accept();
            ServerConnection clientConnection = new ServerConnection(clientSocket);
            os = new PrintStream(clientSocket.getOutputStream());
            fromClient= new BufferedReader(new InputStreamReader(clientSocket.getInputStream()));
            if(fromClient.readLine().equals("GETDATA")){
                os.println("DATA");
                os.flush();
                clientSocket.wait();
                clientSocket.close();
            }
            else{
            clientConnection.run();
            }
        } 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T04:19:00.473

这是你的错误

```
 outToServer.writeBytes("GETDATA"); 
```

正确的代码是

```
 outToServer.writeBytes("GETDATA\n"); 
```

当您使用 readline 时，您应该发送带有换行符的完整行

# wpf - 未引发 SelectionChanged 事件

> ID：16206134
> 
> 赞同：1
> 
> 时间：2013-04-25T03:59:40.487
> 
> 标签：wpf, events, selecteditem, selectionchanged

有没有办法修复选择更改事件的已知错误，如果再次点击相同的项目，选择将不起作用。

为了提供更多背景信息，我的场景是我的数据透视页面中有四个项目，当我单击其中一个项目时，我将被导航到另一个页面。现在我的困境是，当我再次选择相同的项目时，导航不起作用或什么也没有发生。

请让我知道您建议的修复方法，非常感谢。

```
 <ListBox x:Name="lbviewlist" ItemsSource="{Binding items}">
                <i:Interaction.Triggers>
                    <i:EventTrigger EventName="selectionchanged">
                        <Command:EventToCommand Command ="{Binding ItemListCommand }" PassEventArgsToCommand="True"  />
                    </i:EventTrigger>
                </i:Interaction.Triggers>
                <ListBox.ItemTemplate>
                    <DataTemplate>
                        <StackPanel>
                            <TextBlock TextWrapping="Wrap" Text="{Binding itemName}"   FontSize="30"  Margin="10,0,0,0" Style="{StaticResource PhoneTextTitle2Style}" Foreground="CadetBlue"/>
                            <TextBlock TextWrapping="Wrap" Text="{Binding itemDescription}"   FontSize="20"  Margin="15,5,0,10"/>
                          </StackPanel>
                    </DataTemplate>
                </ListBox.ItemTemplate> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T05:14:07.010

一个很好的替代方法是将每个项目中的所有内容包含在一个按钮内，该按钮被设计为不可见，因此您永远看不到它，但它覆盖了它封装的项目的表面。如果您使用 MVVM，您可以将相同的命令属性绑定到每个“按钮”，并将按钮（您的数据项）的 DataContext 绑定到命令参数。然后，每当您单击一个项目时，您每次都会触发该命令。您可能希望将项目控件更改为简单的东西，以便选择更改的事件不会妨碍您。

# java - 返回的对象是否被复制？

> ID：16206141
> 
> 赞同：3
> 
> 时间：2013-04-25T04:00:07.263
> 
> 标签：java, performance, reference

假设我有以下代码：

```
Frame process(Frame input) {
 if (rareEvent) {
  input = new Frame();
 }
 input.bytes[0] = 255;
 return input;
}

//Elsewhere...
Frame example = new Frame();
example.bytes[0] = 127;
example = process(example); 
```

显然，在`input`重新创建 Frame 对象的极少数情况下，它不会是完全相同的对象。但是，最终目标是，在正常情况下（`rareEvent`寄存器为 false），Frame 的`bytes`属性永远不会被完全复制。这是因为，在实际场景中，它将是数百万字节长，在一个非常时间敏感的操作中。

在这种特殊情况下，我不太关心对象的其余部分是否真的相同，只关心它的属性。但是，为了完整起见，我不妨同时询问一下：如果作为参数传递的对象然后返回，它是否*完全相同*（==）对象？在我的特殊情况下，对象的属性会避免任何昂贵的复制吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-25T04:01:22.240

只返回一个对象的引用，即它不被复制。但是，原始值（int、double 等）会被复制。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-04-25T04:21:24.153

利用 `return this;`

所以：

```
 Frame process(Frame input) {
        if (rareEvent) {
            input = new Frame();
        }
        input.bytes[0] = 255;
        return this;
    } 
```

这将作为一个对象返回，因为：`this`

# asp.net - ASP.NET make image visible on Button Click

> ID：16206142
> 
> 赞同：0
> 
> 时间：2013-04-25T04:00:10.037
> 
> 标签：asp.net

I have a simple ASP.NET page with an image control and a button control. When someone clicks the button, I want the image to be shown, then the button can continue processing whatever it has to do, at the end of it's process it will hide the image again.

Is this possible? I've seen conflicting answers. I've tried using just the base code behind functionality and registering javascript functions on the fly (the javascript functions execute AFTER the button has completed all of its work, not before).

Thanks - Greg.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T04:05:36.430

In normal scenario in asp.net it is not possible.
But there are many other way

1.  User `Update Panel` and `Update Progress` from ajax tool kit and use those.
2.  Use jQuery to call server side function and show updating image while ajax is processing.

Update Progress tutorila:- [http://msdn.microsoft.com/en-us/library/bb386421%28v=vs.100%29.aspx](http://msdn.microsoft.com/en-us/library/bb386421%28v=vs.100%29.aspx)
jQuery Page Method call :- [http://weblogs.asp.net/craigshoemaker/archive/2008/11/07/using-jquery-to-call-asp-net-ajax-page-methods-by-example.aspx](http://weblogs.asp.net/craigshoemaker/archive/2008/11/07/using-jquery-to-call-asp-net-ajax-page-methods-by-example.aspx)
[Jquery Ajax Loading image](https://stackoverflow.com/questions/8761713/jquery-ajax-loading-image)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T04:05:23.337

Yes it is possible. You should use ajax call rather than code behind which will be more complicated. Very roughly, on click of the button in the javascript do something like this:

```
function handleClickEvent(e){ 
    $("#imgId").show(); 
    $.ajax{
           make ajax call here with right parameters; 
          success:function(){$("#imgId").hide(); 
   }} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-25T04:13:32.793

First , Use JavaScript function (OnclientClick , for button ) , to show the image. and then registering javascript functions to hide it from code behind.

# c# - 如何在最后一个 '.' 处拆分字符串 价值

> ID：16206149
> 
> 赞同：1
> 
> 时间：2013-04-25T04:00:38.977
> 
> 标签：c#, string, split

我有一个字符串

```
 string str = "123.1.1.QWE";
    string[] seqNum = textBox1.Text.Split('.'); 
```

我想在最后拆分字符串。value 并且必须拆分为两个字符串，例如

```
seqNum[0]="123.1.1";
seqNum[1]="QWE"; 
```

如何在最后一个索引处将其拆分为两个字符串。

提前致谢。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-25T04:17:26.447

```
string str = "123.1.1.QWE";    
int index = str.LastIndexOf(".");
string[] seqNum = new string[] {str.Substring(0, index), str.Substring(index + 1)}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T04:42:07.223

```
 string str = "123.1.1.QWE";
            string[] seqnum = new string[2];
            foreach (char ch in str)
            {
                if (char.IsNumber(ch) || ch == '.')
                {

                }
                else
                {
                    int indx = str.IndexOf(ch);
                    seqnum[0] =  str.Substring(0, indx).ToString();
                    seqnum[1] =  str.Substring(indx,str.Length-indx).ToString();
                    break;
                }
            }

         // output
        //  seqnum[0]=123.1.1.
        //  seqnum[1]=QWE 
```

# c# - 计时器委托呼叫说“无法读取内存”

> ID：16206152
> 
> 赞同：0
> 
> 时间：2013-04-25T04:01:20.473
> 
> 标签：c#, multithreading, timer

所以这就是我有一个函数和一个间隔为 10 毫秒的计时器。

```
void process()
{
    //some heavy processing logic here
} 
```

现在我正在做的是我已将此功能添加到 timer.tick 委托

```
timer1.tick += process; 
```

当我运行我的程序时，我收到异常提示

> 多个线程开始执行同一块并且“某个地址处的指令引用了另一个地址。无法读取内存”

但是当我将间隔时间增加到 500 毫秒时，会在一段时间后抛出此异常。我对c#有点陌生，有没有其他有效的方法可以做到这一点而不会遇到这样的错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-28T12:17:42.147

现在我意识到在这个函数中我有一些变量被程序用来正确运行，所以当这个函数被不同的线程同时访问很多次时，它发生了故障。所以我通过使用锁来防止这种情况

```
void process()
{
   lock(frameExtractor) // frame extractor is the variable where frames are stored
   //  then do some heavy processing 
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T04:38:34.130

计时器在间隔完成后触发。您的函数正在被多个破坏 Context 使用。只要您的 Process 方法的最大运行时间更改计时器间隔并更改为此（在启动功能中禁用计时器并在此之后启用）：

```
void process()
{
timer1.Enabled=false;
//some heavy processing
timer1.Enabled=true;
} 
```

否则你必须使用信号量。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-25T04:15:03.297

您开始处理每个计时器滴答声，所以一段时间后您的电脑会真的变慢。这是因为您不控制线程数。此外，我假设它们使用相同的资源，因为您没有传递任何参数。此资源可能不是线程安全的，这会导致异常

# jquery - JQM 预定义的表格边框样式

> ID：16206155
> 
> 赞同：0
> 
> 时间：2013-04-25T04:01:43.373
> 
> 标签：jquery, jquery-mobile

哪个标准（在 JQM CSS 中预定义）样式负责 JQM 表格边框？我需要在标准主题“b”（蓝色边框）中设置与背景相同的表格边框颜色。猜猜不需要发明我自己的风格并且需要覆盖（使用）现有的风格。但是哪一个？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T06:50:24.463

查看将`table-stroke`表格行的边框设置为的类：

```
 border-bottom: 1px solid #d6d6d6; /* non-RGBA fallback */
  border-bottom: 1px solid rgba(0, 0, 0, .1); 
```

这是来自 JQM [api 表的页面](http://api.jquerymobile.com/table/)

# c++ - 非类名 C++11 类型名是简单模板 ID？

> ID：16206164
> 
> 赞同：4
> 
> 时间：2013-04-25T04:02:16.450
> 
> 标签：c++, templates, c++11

在 C++11 标准中，它描述`type-name`并`class-name`使用以下语法：

```
type-name:
    class-name
    enum-name
    typedef-name
    simple-template-id        <--- HERE

class-name:
    identifier
    simple-template-id 
```

我的问题是`simple-template-id`关于`type-name`.

是否有可能拥有 a `simple-template-id`that is a`type-name`但不是 a `class-name`？

例如，如果`foo<bar>`命名一个类型，它可以是非类类型吗？

（如果答案是否定的，是否还有其他原因我错过了为什么`simple-template-id`在下面重复`type-name`？）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-25T04:19:59.873

这是可能的，例如：

```
template <typename T> using Ptr = T *;

Ptr<int> p = 0; 
```

# c# - 生成许多 文件不起作用

> ID：16206173
> 
> 赞同：0
> 
> 时间：2013-04-25T04:03:13.553
> 
> 标签：c#, .net

我试图生成几个文件，所以我写了这段代码，`value`得到**797**但我只创建了一个文件，为什么？不应该是797文件吗？我的代码有什么问题？：

```
 private void button3_Click(object sender, EventArgs e)
    {
        int value = bdCleanList.Count() / Int32.Parse(textBox7.Text);
        MessageBox.Show(value.ToString());
        string bases_generadas = 
            System.IO.Path.Combine(AppDomain.CurrentDomain.BaseDirectory,
                                   "bases_generadas");

        for (int i = 1; i < value; i++)
        {
            string newFileName = "bases_generadas_" + 
                                 DateTime.Now.ToString("dd-MM-yyyy-hh-mm-ss") + 
                                 ".txt";
            using (System.IO.FileStream fs = 
                      System.IO.File.Create(
                         System.IO.Path.Combine(bases_generadas, newFileName)))
            {
                for (byte j = 0; j < 10; j++)
                {
                    fs.WriteByte(j);
                }
            }
        }

    } 
```

**编辑**为@andrey-shchekin 建议我添加了一个`i`，`newFileName`所以现在代码是这个：

```
string newFileName = "bases_generadas_" + i + 
                     DateTime.Now.ToString("dd-MM-yyyy-hh-mm-ss") + ".txt"; 
```

但现在我再次运行代码并`value`获取**4**个文件，但只创建了 3 个文件：

```
bases_generadas_124-04-2013-11-45-08.txt
bases_generadas_224-04-2013-11-45-08.txt
bases_generadas_324-04-2013-11-45-08.txt 
```

为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T04:05:29.440

如果你的代码足够快，`DateTime.Now.ToString("dd-MM-yyyy-hh-mm-ss")` 将会产生完全相同的文件名 797 次。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-25T04:18:29.050

如前所述`Reynier`，您的代码可以在一秒钟内执行并最终创建一个文件。

避免你可以使用，`DateTime.Now.Ticks.ToString()`

```
string newFileName = "bases_generadas_" + DateTime.Now.Ticks.ToString() + ".txt"; 
```

或者，您可以简单地使用`i`for 循环中的唯一名称

```
string newFileName = "bases_generadas_" + 
                     DateTime.Now.ToString("dd-MM-yyyy-hh-mm-ss") + 
                     "-" + i.ToString() + ".txt"; 
```

# jsf-2 - 数据表 editMode primefaces

> ID：16206174
> 
> 赞同：1
> 
> 时间：2013-04-25T04:03:27.107
> 
> 标签：jsf-2, primefaces

我想将 p:datatable 与 cellEdit 模式一起使用[https://www.primefaces.org/showcase/ui/data/datatable/edit.xhtml](https://www.primefaces.org/showcase/ui/data/datatable/edit.xhtml)。

当我使用此代码时

```
public void onCellEdit(CellEditEvent event) {  
    Object oldValue = event.getOldValue();  
    Object newValue = event.getNewValue();  

 String id =   event.getComponent().getClientId();
} 
```

我得到的'id'是'event.getComponent().getClientId();' 是用于数据表而不是用于我刚刚修改的单元格？

如何获取编辑单元格的客户端 ID？

谢谢

# php - zend framework1 中 index.phtml 中的一些代码

> ID：16206179
> 
> 赞同：0
> 
> 时间：2013-04-25T04:04:10.627
> 
> 标签：php, zend-framework

在 index.phtml 中

```
...
<?php
$this->title = "My Albums";
$this->headTitle($this->title);
?>
... 
```

问题：

1.  `$this->title;`所有权是财产吗？我在哪里可以看到的声明`$title`？

2.  我在哪里可以看到这个方法的声明：`$this->headTitle()`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T04:34:16.283

基本上`$this->title`是正常的视图属性，您可以从控制器设置..像这样

**索引控制器**

```
$this->view->title = "Test Page"; 
```

你在视图 index.phtml 中使用它，就像这样

```
 $this->title; 
```

尽管

```
$this->headTitle($this->title); 
```

这是一个默认的视图辅助方法来设置 html 文档的标题。

像这样

```
<head>
      <title>Test Page</title>
</head> 
```

# insert - Squeryl：如果不存在则插入？

> ID：16206180
> 
> 赞同：0
> 
> 时间：2013-04-25T04:04:20.480
> 
> 标签：insert, squeryl

如果使用 Squeryl 的条目尚不存在，我该如何插入？

如果在已经存在的元组上执行插入语句，我试图捕获 PSQLException，但它不起作用（未捕获 PSQLException）。事实上，最好告诉 Squeryl 不要插入已经存在的元组。这就是我正在寻找的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T11:30:35.320

不幸的是，如果您使用 Postgres，如果发生异常，您将无法继续处理。这里有一个很好的讨论：[https ://groups.google.com/forum/?fromgroups=#!topic/squeryl/zaflXRra0qg](https://groups.google.com/forum/?fromgroups=#!topic/squeryl/zaflXRra0qg)

要执行您要查找的内容，您可能希望首先发出一个选择以查找`ids`已经存在的内容并将它们从您要插入的项目中删除。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T10:23:51.973

您根本不希望数据库中存在相同的元组，或者只有 squeryl 不会插入它们？

在第一种情况下，只需在该元组上添加一个唯一约束。例子：

```
on(myTable)(e => declare(
    columns(e.name, e.year) are (indexed("myIndex"), unique)
)) 
```

此代码将放置在表定义附近，例如`val myTable = table[MyTable]`. 我还在这个元组上添加了一个索引，如果你愿意，你可以删除这个代码。

# html - 如何使用 CSS 过渡更改元素的背景和文本颜色？

> ID：16206184
> 
> 赞同：2
> 
> 时间：2013-04-25T04:04:53.910
> 
> 标签：html, css, css-transitions

我想在下面更改背景颜色和文本颜色`div`：

### HTML

```
<div class="readmore">
  <a href="#">readmore</a>
</div> 
```

### CSS

```
.readmore{
    width: 200px;
    text-align: right;
    background-color: #FFCC66;
    color: #336699;
}

.readmore:hover{
    background-color: #336699;
    color: #FFCC66;

    transition: all 1s;
} 
```

当我聚焦`.readmore`时，背景颜色会发生变化，但“readmore”文本不会改变颜色......这是为什么呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-25T04:07:34.923

你的 A 标签有它自己的颜色属性。在 div 上更改它不会自动适用于 A 标签，但您必须继承必要的属性。

```
.readmore a
{
    background-color:inherit;
    color: inherit;
} 
```

# c - c stdin 二维数组文件输入

> ID：16206186
> 
> 赞同：-1
> 
> 时间：2013-04-25T04:05:04.740
> 
> 标签：c, stdin, multidimensional-array

我正在尝试获取一个设计为看起来像迷宫的文件并使用标准输入创建一个二维数组。我不确定我是如何开始的。我创建了二维数组，但我不确定函数调用。我想我会使用两个 for 循环来遍历文件，然后将元素存储到数组中。我现在没有任何代码可以提供，因为我对如何开始这个很迷茫。

```
T . . . . . . . . . . . . . . . . . . . . . T . .
. . . . . . . . . . . . . . . . . . . . . . T . .
. . . . . . . . . . . . . . . . . . . . . . T . .
. . . . . . . . . . . . . . . . . . . . . . T . .
. . . . T . . . . . . . . . . . . . . . . . . . .
. . . . . . . . . . . . . . . . . . . . . . . . .
. . . . . . . . . . . . . . . . . . . . . . . . .
. . . . . . . . . . . . . . . . . . . . . . . . .
. . . . . . . . . . . . . . . . . . . . . . . . .
. . . . . . . . . . . . T . . . . . . . . . . . .
T . . . . . . . . . . . . . . . . . . . . . . . .
. . . . . . . . . . . . . . . . . . . . . . . . .
. . . . . . . . . . . . . . . . . . . . . . . . .
. . . . . . . . . . . . . . . . . . . . . . . . .
. . . . T . . . . . . . . . . . . . . . T . . . .
. . . . . . . . . . . . . . . T . . . . T . . . .
. . . . . . . . . . . . . . . . . . . . T . . . .
. . . . . . . . . . . . . . . . . . . . . . . . .
. . . . . . . . . . . . . . . . . . . . . . . . .
F . . . . . . . . . . . . . . . . . . . . . . . . 
```

这是 maze.txt 的样子

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T04:31:56.753

```
arr[X][Y];
int fd = fopen("inputFile.name", "r");
for(i=0; i< X; i++)
{
 for(j=0; j< Y; j++)
 {
   fscanf(fd, "%d", &arr[i][j]);
 }
} 
```

使用 fscanf 从文件中读取，而您可以使用 fprintf 在文件中打印。

# vb.net - 15 使用处理程序检查拼图图像

> ID：16206188
> 
> 赞同：0
> 
> 时间：2013-04-25T04:05:09.337
> 
> 标签：vb.net, properties, handler, default, picturebox

我现在就说清楚这是家庭作业。我不希望得到完整的答案，但欢迎他们。

我被分配在 Visual Basic 中制作一个 15 字谜题。这是游戏外观的示例（这是我到目前为止所拥有的）：

![一个普通的 15 益智游戏。](https://i.stack.imgur.com/mVUua.png)

我需要帮助的是检查和移动图像。当我单击您在右下角看到的 PictureBox 1 时，它应该检查其下方、旁边和上方的图像，以查看该位置的图像是否为 My.Resources.NONE。（NONE 是我导入的 png 图像）。如果相邻单元格为 NONE，则两个图像将相互交换。每个 PictureBox 在地址处都有一个 Handler，所有的图像都在一个二维的 PictureBox 数组（4x4）中。

我已经为它设置了一个这样的子，但不知道在里面放什么。有什么建议么？

```
Private Sub mypic_Click(ByVal sender As Object, ByVal e As EventArgs)

End Sub 
```

更新：

我做了更多的研究并弄清楚了一些事情。这是我目前的做法：

```
 Private Sub mypic_Click(ByVal sender As Object, ByVal e As EventArgs)
    Dim x, y, w, z As Integer
    ClickedPicture = DirectCast(sender, PictureBox)
    x = ClickedPicture.Left
    y = ClickedPicture.Top
    If ClickedPicture(x + 1, y).Image = Nothing Then
        ClickedPicture(x + 1, y).Image = ClickedPicture(x, y).Image
        ClickedPicture(x, y).Image = My.Resources.NONE
    End If
End Sub 
```

我现在遇到的问题是它说 ClickedPicture 不能被索引，因为它没有默认属性。这到底是什么意思？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T15:01:57.423

我建议将您的显示与您的逻辑分开。不要移动图片框，只需更改它们显示的图像。使用整数 0 - 15 创建一个 4X4 数组。整数可以指示从图像数组中显示哪张图片。令索引 0 为空方格。然后，当您需要“移动”一个时，只需交换数组中的值。在表单的 OnPaint 方法中，循环遍历 4x4 数组并将 pictureBox Image 属性设置为正确的图像。

您可以在语言规范的第 9.7.3 节中找到有关 VB 的默认属性的信息：

```
9.7.3 Default Properties
A property that specifies the modifier Default is called a default property. Any type 
that allows properties may have a default property, including interfaces. The default 
property may be referenced without having to qualify the instance with the name of the 
property. 
```

我认为 ClickedPicture 是一个 PictureBox。您正在尝试使用数组表示法调用它：ClickedPicture(x + 1, y) 但由于它不是数组，因此它会尝试查看是否存在可以获取索引的 Default 属性并且没有。

# android - 由 TAG_DISCOVERED 启动的活动在最近的应用程序抽屉中显示不正确的名称和图标

> ID：16206189
> 
> 赞同：0
> 
> 时间：2013-04-25T04:05:14.373
> 
> 标签：android, nfc

我正在使用意图过滤器启动应用程序以捕获`TAG_DISCOVERED`操作。请参阅下面的意图：

```
<intent-filter>
    <action android:name="android.intent.action.MAIN" />
    <category android:name="android.intent.category.LAUNCHER" />
</intent-filter>
<intent-filter>
    <action android:name="android.nfc.action.TAG_DISCOVERED" />
    <category android:name="android.intent.category.DEFAULT" />
</intent-filter> 
```

应用程序正确启动，但在打开最近的应用程序抽屉时，我看到了蓝牙 / NFC 图标和应用程序名称`NFC Service`.

如果我从启动器手动启动我的应用程序，这些图标都可以正常工作 - 只有在操作启动时才会出现错误`TAG_DISCOVERED`。

有没有办法覆盖此操作设置的图标和名称？

![名称和图标不正确](https://i.stack.imgur.com/TngxI.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T05:18:12.493

在您的活动标签中指定 an`android:label`和 an 。`android:icon`

如果这不起作用，请将每个意图过滤器包装在它们自己的活动 xml 标记集中，并为每个活动指定相同`android:label`和相同的内容。`android:icon`

这是他们的[文档](http://developer.android.com/guide/topics/manifest/activity-element.html)。

# ios - 第三方库崩溃的 Xcode 打印堆栈跟踪

> ID：16206193
> 
> 赞同：2
> 
> 时间：2013-04-25T04:05:33.283
> 
> 标签：ios, objective-c, xcode, stack-trace, flurry

我正在为我的 iOS 项目使用 3rd 方库，并且其中发生了崩溃。我需要在控制台上获取完整的堆栈跟踪，以便为他们提供有关崩溃的信息。我想知道是否有一种方法可以将其打印在控制台上或更有意义的方式，而不是 Xcode 中的 debug-navigator 中显示的内容？

我尝试了一些我可以在以前的帖子中找到的东西，比如

*   [如何向 objc_exception_throw 添加断点？](https://stackoverflow.com/questions/1163981/how-to-add-a-breakpoint-to-objc-exception-throw)
*   [堆栈跟踪或有关 Xcode/iPhone 中未处理异常的更多信息](https://stackoverflow.com/questions/1093999/stack-trace-or-more-info-on-unhandled-exception-in-xcode-iphone)
*   [Xcode 堆栈跟踪未出现在控制台中](https://stackoverflow.com/questions/7960816/xcode-stack-trace-not-appearing-in-console)）
*   [Xcode 4.2/iOS 5 下控制台中没有异常堆栈跟踪？](https://stackoverflow.com/questions/8100054/no-exception-stack-trace-in-console-under-xcode-4-2-ios-5)

但似乎没有任何效果。我唯一能得到的是崩溃发生时调试导航器窗口的屏幕截图。它在下面给出。

*   ![](https://i.stack.imgur.com/xxPnj.png)

这是我获得的唯一控制台日志（全部从库代码打印）

*   ![](https://i.stack.imgur.com/4jJYb.png)

有没有更好的方法来提取更多信息以发送给图书馆开发人员？

`-[FlurryAdViewController removeWindow]` < 此类和方法来自库。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T04:12:14.363

您是否尝试过使用 NSLog() 来处理错误？尝试将错误放入 NSLog 中，它应该将其打印到控制台以供您查看。如果我误解了您的问题，请告诉我，因为我有点困惑。

# google-maps-api-3 - 如何更改 Google Maps API V3 中的图标颜色？

> ID：16206195
> 
> 赞同：4
> 
> 时间：2013-04-25T04:05:40.773
> 
> 标签：google-maps-api-3

我想将 COUNTY 图标更改为蓝色（除了红色之外的任何东西）。

有没有办法为特定点定义不同的图标颜色？

```
 <script type="text/javascript"> 
    //<![CDATA[
    var map = null;
function initialize() {
 var myOptions = {
  zoom: 8,
  center: new google.maps.LatLng(39.831125875,-112.15968925),
  mapTypeControl: true,
  mapTypeControlOptions: {style: google.maps.MapTypeControlStyle.DROPDOWN_MENU},
  navigationControl: true,
  mapTypeId: google.maps.MapTypeId.ROADMAP
 }
    map = new google.maps.Map(document.getElementById("map_canvas"),
                            myOptions);

   google.maps.event.addListener(map, 'click', function() {
    infowindow.close();
    });

  // Add markers to the map
  // Set up three markers with info windows 

   var point = new google.maps.LatLng(40.970826,-112.048187)
   var marker = createMarker(point,'Utah-Davis County');

   var point = new google.maps.LatLng(40.235509,-111.660576)
   var marker = createMarker(point,'Utah-Provo');

   var point = new google.maps.LatLng(40.766502,-111.897812)
   var marker = createMarker(point,'Utah-Salt Lake City');

  }

   var infowindow = new google.maps.InfoWindow(
   { 
     size: new google.maps.Size(150,50)
    });

 function createMarker(latlng, html) {
   var contentString = html;
   var marker = new google.maps.Marker({
    position: latlng,
    map: map,
    zIndex: Math.round(latlng.lat()*-100000)<<5
    });

   google.maps.event.addListener(marker, 'click', function() {
    infowindow.setContent(contentString); 
    infowindow.open(map,marker);
    });
   }

function animate(lati,long) {
    var latLng = new google.maps.LatLng(lati, long); //Makes a latlng
    map.panTo(latLng); //Make map global
}

//]]>
</script> 
```

有没有办法为特定点定义不同的图标颜色？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-04-25T04:15:55.833

我认为这会有所帮助。不过，您必须创建一个自定义标记。

[Google Maps API 3 - 默认（点）标记的自定义标记颜色](https://stackoverflow.com/questions/7095574/google-maps-api-3-custom-marker-color-for-default-dot-marker)

特别针对您的问题，您可以执行以下操作：

```
var pinColor = "2F76EE"; // a random blue color that i picked
var pinImage = new google.maps.MarkerImage("http://chart.apis.google.com/chart?chst=d_map_pin_letter&chld=%E2%80%A2|" + pinColor,
            new google.maps.Size(21, 34),
            new google.maps.Point(0,0),
            new google.maps.Point(10, 34));
var pinShadow = new google.maps.MarkerImage("http://chart.apis.google.com/chart?chst=d_map_pin_shadow",
            new google.maps.Size(40, 37),
            new google.maps.Point(0, 0),
            new google.maps.Point(12, 35)); 
```

然后

```
var marker = new google.maps.Marker({
            position: new google.maps.LatLng(0,0), 
            map: map,
            icon: pinImage,
            shadow: pinShadow
        }); 
```

归功于[马特·伯恩斯](https://stackoverflow.com/users/276093/matt-burns)

# spring - 从 Spring WebService 调用同一 Service 中的多个方法

> ID：16206201
> 
> 赞同：0
> 
> 时间：2013-04-25T04:06:10.337
> 
> 标签：spring, design-patterns

我正在开发一个 Spring 2.0 WebService，它需要根据 WebService 请求的属性之一调用遗留服务的多种方法中的一种。我不想在我的@endpoint 中编写 if/else 检查来实现这一点。我应该使用什么样的设计模式来使其更清晰和可维护，以便当必须支持新的订单类型（请参阅下面的示例代码）时，我不需要添加另一个 else 块。

```
@Endpoint
public class OrderServiceEndPoint {
    @Autowired
    private OrderLegacyService orderService;

    @PayloadRoot
    public @ResponsePayload OrderResponse processRequest(
                         @RequestPayload OrderRequest request) {
        if ("Create".equals(request.type)) {
             return orderService.createOrder(request);
        } else if ("Modify".equals(request.type)) {
             return orderService.modifyOrder(request);
        } else if ("Return".equals(request.type)) {
             return orderService.returnOrder(request);
        } else if ("Replace".equals(request.type)) {
             return orderService.replaceOrder(request);
        } else {
             throw new RequestNotSupportedException();
        }

    } 
```

我使用 org.springframework.beans.factory.config.ServiceLocatorFactoryBean 来实现工厂模式，以防我有多个相同服务的实现，例如 CreateOrderService、ModifyOrderService、ReplaceOrderService 等。但在这种情况下，我必须调用同一服务的多种方法。我目前无法更改旧服务接口，因为它已被另一个 Web 应用程序使用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T04:23:47.093

如果您使用的是 Java 7（可能不是这样），Java 7 支持打开字符串。所以你可以写：

```
switch(request.type) {
  case "Create": return orderService.createOrder(request);
  case "Modify": return orderService.modifyOrder(request);
  case "Return": return orderService.returnOrder(request);
  case "Replace": return orderService.replaceOrder(request);
  default: throw new RequestNotSupportedException();
} 
```

如果您使用的是 Java 6 或更早版本，请创建一个枚举类型：

```
public enum RequestType {
  CREATE,MODIFY,RETURN,REPLACE;
} 
```

您可以在代码中使用以下内容：

```
switch (RequestType.valueOf(requestType.toUpperCase())) {
  case CREATE: return orderService.createOrder(request);
  case MODIFY: return orderService.modifyOrder(request);
  case RETURN: return orderService.returnOrder(request);
  case REPLACE: return orderService.replaceOrder(request);
  default: throw new RequestNotSupportedException();
} 
```

# ruby-on-rails-3 - gmaps4rails 隐藏显示侧边栏

> ID：16206202
> 
> 赞同：0
> 
> 时间：2013-04-25T04:06:34.243
> 
> 标签：ruby-on-rails-3, gmaps4rails

因此，如果标记在地图上隐藏，它们的侧边栏项目将保持可见。我通读了整个 gem，但没有看到任何隐藏相应侧边栏元素的功能。有人知道这个吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T05:11:11.803

要自定义 gmap4rails，您需要学习并通过支持中提供的所有 api 或方法。您也可以使用以下给定方法的参数隐藏显示侧边栏

```
 def gmaps4rails_sidebar
    "#{self.name} #{self.gps}"
  end 
```

此处还提供了更多链接[https://github.com/apneadiving/Google-Maps-for-Rails/wiki](https://github.com/apneadiving/Google-Maps-for-Rails/wiki)。请参考。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-29T22:15:40.613

```
function hide(category) {
  var regEx = new RegExp("[" + category + "]")
  for (var i=0; i<Gmaps.map.markers.length; i++) {
    if (Gmaps.map.markers[i].cat) {
      if (Gmaps.map.markers[i].cat.match(regEx)) {
        Gmaps.map.hideMarker(Gmaps.map.markers[i]);
        $('a#' + Gmaps.map.markers[i].id).closest('li').hide();
        Gmaps.map.visibleInfoWindow.close();
      }
    }
  }
  // == clear the checkbox ==
  document.getElementById(category+"box").checked = false;
} 
```

做到了...使用相应的显示方法。效果很好！

# vba - 有没有办法在 VBA 中调用非标准形状；使用 application.caller 不起作用

> ID：16206204
> 
> 赞同：0
> 
> 时间：2013-04-25T04:07:30.767
> 
> 标签：vba, excel, hyperlink, shapes

我想为我的工作簿中的形状分配一个宏，其中宏将一个相对超链接分配给调用它的形状。我尝试使用 application.caller 来获取形状的名称以分配超链接，但它不适用于所有形状，例如流程图形状。关于如何让它适用于所有形状的任何建议？对于工作表中的所有流程图形状，我收到运行时错误，未找到指定名称的项目。此代码适用于矩形等标准形状；但我的文档中需要流程图形状。

```
'Hyperlink to tab "control point log" using text in shape and cell values

Sub Controlpointhyperlink()
Dim rowvar as integer

ActiveSheet.Shapes(Application.Caller).Select
Selection.ShapeRange.Item(1).Name = "thisshape"

rowvar = Application.WorksheetFunction _
     .Match(ActiveSheet.Range("C2").Value & _
     ActiveSheet.Shapes("thisshape").TextFrame2.TextRange.Text, _
     Sheets("Control Point Log").Range("A1:A700"), 0)

With ActiveSheet
     .Hyperlinks.Add Anchor:= .Shapes("thisshape"), _
     Address:=ActiveWorkbook.Name & "#" & "'Control Point Log'!$C$" & rowvar
End With

End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T07:57:30.850

问题出在您的代码中，您将每个形状的名称更改为“thisshape”，然后向其添加超链接。我试图更改您的代码，以便在宏的开头设置形状参考。然后宏正在使用这个引用。并且在 MATCH 函数调用之前添加了错误检查，因此如果该函数没有找到任何内容，则会显示消息框。我已经用包括流程图形状在内的不同形状对其进行了测试。希望这可以帮助。

```
Sub Controlpointhyperlink()

    Dim callerShapeName As String
    callerShapeName = Application.Caller

    With ActiveSheet
        Dim callerShape As Shape
        Set callerShape = .Shapes(callerShapeName)

        Dim findWhat As String
        findWhat = .Range("C2").Value & callerShape.TextFrame2.TextRange.Text

        Dim findWhere As Range
        Set findWhere = Sheets("Control Point Log").Range("A1:A700")

        Dim rowvar As Double

        Err.Number = 0
        On Error Resume Next

        rowvar = Application.WorksheetFunction.Match(findWhat, findWhere, 0)
        If (Err.Number = 1004) Then
            MsgBox "No match found for '" & findWhat & "' in range '" & findWhere.Address & "'."
            Exit Sub
        End If

        On Error GoTo 0

        Dim addressText As String
        addressText = ActiveWorkbook.Name & "#" & "'Control Point Log'!$C$" & rowvar
        .Hyperlinks.Add Anchor:=callerShape, Address:=addressText
    End With

End Sub 
```

# javascript - 如何再次检查数组结果以便（通过其中一个字段）将结果排列到 PHP 中的表中

> ID：16206206
> 
> 赞同：0
> 
> 时间：2013-04-25T04:07:40.717
> 
> 标签：javascript, php, jquery, html-table, resultset

我必须按位置、提供者或资产描述排序的“详细报告”，尽管我得到了正确的结果，但我想显示类似的结果

位置 1：

此处的表格，其中包含位于该位置的资产

位置 2：

包含位于此位置的资产的表...

与提供者和描述相同...

我的 PHP 和其他语言知识有限。所以，我想做一些类似的事情......

获取数组（完整数组而不仅仅是一行），然后检查位置`array[i]`是否等于`array[i+1]`然后打印`<td>`带有行数据的 a 否则结束该表，然后创建一个新的

地点：

最后是另一个包含与该位置匹配的行的表...

我怎么能在 PHP 中做到这一点？

例子：

[这](http://victorianoguera.icad.com.ve)是我目前拥有的

[这](http://victorianoguera.icad.com.ve/want.html)就是我想做的

这就是我在 PHP 中所做的

```
<?php

echo "<table>
        <thead>
            <tr>
                <th></th>
                <th>Ubicaci&oacute;n</th>
                <th>C&oacute;digo</th>
                <th>Descripci&oacute;n</th>
                <th>Costo Adquisici&oacute;n</th>
                <th>Saldo a Depreciar de Activos</th>
                <th></th>
            </tr>
        </thead>
        <tbody>
            <tr>";
while($row = odbc_fetch_array($result)){
    echo"<td></td>
        <td><b>".$row["Ubicacion_actual"]."</b></td>
        <td>".$row["Activo"]."</td>
        <td>".$row["Descripcion"]."</td>
        <td>".number_format($row["Costo_Adquisicion"],4)."</td>
        <td>".number_format($row["Saldo_sin_depreciar"],4)."</td>
        <td></td>

        </tr>"; 
}
echo "</tbody>

    </table>";
odbc_close($dbhandle);
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T06:39:37.363

首先你应该把所有的数据放到一个本地数组中，然后使用本地数组来处理它。

所以你可以有：

```
$theArray = array(); //Array to hold data
$headerIds = array(); //Array to hold unique id of the records
while($row = odbc_fetch_array($result)){
    array_push($theArray, $row);
    if(!in_array($row["Ubicacion_actual"], $headerIds))
    {
         array_push($headerIds, $row["Ubicacion_actual"]);
    }

}

odbc_close($dbhandle);

foreach($headerIds as $id)
{
    //Print the header info
    //...

    //Loop through each item in your data array until its id matches the header id
    foreach($theArray as $dataItem)
    {
        if($dataItem["Ubicacion_actual"] == $id) //This line item has the same id as the header
        {
            //Display the table row data
        }
    }
} 
```

# c++ - 在派生的 QObject 构造函数中连接 Qt 信号和槽

> ID：16206207
> 
> 赞同：1
> 
> 时间：2013-04-25T04:07:53.737
> 
> 标签：c++, qt, signals-slots

我正在编写一个简单的`EchoServer`类，继承自`QTcpServer`. 当我在构造函数中连接信号和槽时，它并不顺利。

```
class EchoServer : public QTcpServer {
  //Q_OBJECT
public:
  EchoServer(int listenling_port) {
    this->listen(QHostAddress(), listenling_port);
    connect(this, SIGNAL(newConnection()), this, SLOT(HandleIncomingConnection()));
  }
public slots:
  void HandleIncomingConnection() {
    auto echo_handler = EchoServerHandler(this->nextPendingConnection());
    echo_handler.Echo();
  }
private:
}; 
```

该应用程序确实侦听端口，并且可以远程登录。但是控制台显示

“ **QObject::connect: 没有这样的插槽 QTcpServer::HandleIncomingConnection()** ”，

似乎它被识别`this`为基类`QTcpServer`指针。

此外，如果我留`Q_OBJECT`在代码中，它不会编译，说

"**错误 LNK2001: 无法解析的外部符号 "public: virtual struct QMetaObject const * __thiscall EchoServer::metaObject(void)const " (?metaObject@EchoServer@@UBEPBUQMetaObject@@XZ)** ",

他们有关系吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T04:12:54.177

您需要保留`Q_OBJECT`您的代码，并且您需要一个析构函数来与您的课​​程一起使用。

您可能需要在代码上运行“清理项目”来修复该链接器错误。

还要检查[Q_OBJECT 链接器错误！](https://stackoverflow.com/questions/3264259/q-object-linker-error)

希望有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T06:45:40.853

链接[Q_OBJECT 链接器错误！](https://stackoverflow.com/questions/3264259/q-object-linker-error)在phyatt的回答中帮助我找到了问题。所以我会自己回答这个问题。

问题中的代码完全放在一个`main.cpp`文件中，这阻止了 Qt 的元处理。把类定义放到单独的`hpp`头文件中重新编译，问题就解决了。我正在使用 Visual Studio 2012 + Qt 5.0。

# json - json解析出现异常

> ID：16206212
> 
> 赞同：-1
> 
> 时间：2013-04-25T04:08:24.987
> 
> 标签：json, windows-phone-8

我正在尝试解析 json。我收到以下异常：

```
An exception of type 'System.ArgumentException' occurred in Newtonsoft.Json.Silverlight.DLL but was not handled in user code 
```

我的 C# 代码是

```
private void imgloginbtn_Tap_1(object sender, 
                               System.Windows.Input.GestureEventArgs e) {
  ///set flag in app.xaml for popup
  var obj = App.Current as App;
  obj.Popupflag = true;
  //WhatsupServices.WhatsUpServiceSoapClient ws = 
                    //new WhatsupServices.WhatsUpServiceSoapClient();
  WhatsupServices.WhatsUpServiceSoapClient ws = 
                  new WhatsupServices.WhatsUpServiceSoapClient();
  ws.ChangePasswrdJsonCompleted += ws_ChangePasswrdJsonCompleted;
  ws.ChangePasswrdJsonAsync("man", "man", "man");
}
void ws_ChangePasswrdJsonCompleted(object sender, 
                 WhatsupServices.ChangePasswrdJsonCompletedEventArgs e) {
  string s = e.Result;
  JObject obj = JObject.Parse(s);
  string ResultCode = (string) obj["ResultCode"];
  string ResponceMessage = (string) obj["ResponseMessage"];
} 
```

当我试图获取 Resultcode 时发生异常

帮助我如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-26T08:49:49.620

我得到了这个异常的解决方案。实际上我的 json 返回值是整数，我正在字符串中进行类型转换，所以它给出了错误。

我的解决方案是：

```
string s = e.Result;
  JObject obj = JObject.Parse(s);
  int ResultCode = (int) obj["ResultCode"];
  string ResponceMessage = (string) obj["ResponseMessage"]; 
```

# jquery - jQuery如何检查表中是否已经存在条目？

> ID：16206216
> 
> 赞同：0
> 
> 时间：2013-04-25T04:09:13.270
> 
> 标签：jquery, comparison

我正在使用 jquery 动态添加和删除表的行。像[这样](http://jsfiddle.net/yvonnezoe/MKfLU/1/)的东西。

我的问题是，我如何检查表中是否已经存在条目（BOTH `output type`AND ）？`output number`这样我就不会添加 2 个或更多类似条目，而是更新现有条目，或者只是忽略或发出警报...

我对检查部分一无所知。需要数据库吗？？

```
if (textInput== ??existing entry??)
alert ("you have entered that output number for that output type");
// quit the codes below or something? 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-25T04:29:15.293

```
 function isExist(newEntry){
     return Array.from($('tr[id*=output_newrow]'))
              .some(element => $('td:nth(2)', $(element)).html() === newEntry );
    } 
```

`newEntry`是要添加的输入文本的值 Then ：

```
$('.add').click(function () {

    textInput = "";
    $('.TextInput').empty();
    textInput =  $(this).prev('.TextInput').val();

    if(isExist(textInput)){
     alert("you have entered that output number for that output type")
    }else{

         //.....insert code
    }
}) 
```

## 演示：

[http://jsfiddle.net/abdennour/MKfLU/27/](http://jsfiddle.net/abdennour/MKfLU/27/)

“但它适用于不同的选择选项，但也适用于相同的输入数字......我可以做 isExist (textInput)AND(type) 吗？” 如果你想在测试中嵌入类型：

```
function isExistx(newEntry,outtype){

  return Array.from($('tr[id*=output_newrow]')).some( el => 
    ( $('td:nth(1)',$(el)).html() === outtype ) && ($('td:nth(2)',$(el)).html() === newEntry)
  ); 

} 
```

然后 ：

```
 if(isExistx(textInput,type)){
        alert('you have entered that output number for that output type')
    }else {

         $('#status_table tr:last').after(str);
    } 
```

## 演示

[http://jsfiddle.net/abdennour/MKfLU/29/](http://jsfiddle.net/abdennour/MKfLU/29/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-25T04:18:47.267

尝试

```
var flag = false;
$('#status_table tbody').find('tr').each(function(){
    var $this = $(this);
    if(textInput == $('td:eq(2)', $this).text() && type == $('td:eq(1)', $this).text()){
        flag = true;
        return false;
    }
});
if(flag){
    alert('exists');
    return;
} 
```

演示：[小提琴](http://jsfiddle.net/arunpjohny/nKAja/2/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-25T04:19:02.887

在添加 时`<td>`，您可以`data-unique-identifier`使用类型和数字的组合为其添加属性。

```
$td.data('unique-identifer', 'type: ' + type + 'number: ' + number); 
```

然后在添加另一行之前，您可以使用 jQuery 查看是否存在与相同唯一标识符匹配的任何行。

```
var uid = 'type: ' + type + 'number: ' + number;
if ($('[data-unique-identifer=' + uid + ']').length > 0) {
    // already exists
} 
```

或者，您可以将信息保留在 DOM 之外，只维护您添加的信息的 javascript 数组。

添加新行时：

```
myExistingRows.push({
    type: type,
    number: number
}); 
```

并在添加之前查看一行是否已经存在：

```
function doesRowExist(type, number) {
    for (var index = 0; index < myExistingRows.length; index++) {
        var row = myExistingRows[index];
        if (row.type === type && row.number === number) {
            return true;
        }
    }
    return false;
) 
```

演示：http: [//jsfiddle.net/mchail/MKfLU/6/](http://jsfiddle.net/mchail/MKfLU/6/)

# c++ - 如何使用 c/c++ 将用户输入放入 SQL 语句中的变量中

> ID：16206217
> 
> 赞同：0
> 
> 时间：2013-04-25T04:09:29.163
> 
> 标签：c++, c

我对所有这些编程都很陌生。但我想知道如何将变量值传递给 C/C++ 查询代码中的 SQL/MYSQL 语句。

例如，我想从数据库中选择： mysql_query(conn, "select * from ;"); 假设这是一个变量并接收用户的输入。我该怎么做？任何想法将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-25T09:09:59.130

你可以`std::string`像其他人说的那样使用，但你也可以使用[`sql::PreparedStatement`](http://dev.mysql.com/doc/refman/5.1/en/connector-cpp-examples-prepared-statements.html)更安全的：

```
sql::Connection *con;
sql::PreparedStatement *prep_stmt
const char* tableName = "foo";

prep_stmt = con->prepareStatement("SELECT * FROM ?");
prep_stmt->setString(1, tableName);
prep_stmt->execute(); 
```

当使用[准备好的语句时，DBMS 将按](http://en.wikipedia.org/wiki/Prepared_statement)*原样*解析和编译语句，并且仅在执行语句时绑定参数的值。这允许您使用不同的参数多次重用相同的语句，但也为您提供强大的[SQL 注入](http://en.wikipedia.org/wiki/Sql_injection)保护，因为您让 DBMS 处理参数。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-25T09:05:07.187

为了使milleniumbug 的警告更加明确：谷歌“SQL 注入”。解决方案是准备好的语句。

`std::string sql = "select * from ?;"`. 这是您可以准备然后执行的语句。准备时，MySQL 会找到`?`，而在执行时，您只需为`?`. 然后 MySQL 将为您插入表名。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-25T04:13:03.697

您可以使用它`std::string`来轻松构建 SQL 语句。

```
#include <string>

std::string CreateSelectStatement(const std::string& tableName)
{
    std::string  sql;

    sql = "select * from " + tableName + ";";

    return sql;
} 
```

然后，您可以使用该字符串来查询数据库。

```
std::string sql(CreateSelectStatement("sometable"));

mysql_query(conn, sql.c_str()); 
```

# netbeans - 如何使只读文件在 Netbeans 中可写

> ID：16206218
> 
> 赞同：5
> 
> 时间：2013-04-25T04:09:47.053
> 
> 标签：netbeans, netbeans-6.9, netbeans-plugins

我正在使用 Netbeans 6.9.1。

每当我打开`readonly`文件并想要编辑它时，我必须手动转到文件目录并`readonly`从属性中删除标志。

是否有任何插件或某种方式我们可以直接使其在netbeans编辑器本身中可写？

# javascript - Readystate=4 时的脚本错误

> ID：16206220
> 
> 赞同：1
> 
> 时间：2013-04-25T04:10:06.143
> 
> 标签：javascript

```
if (document.getElementById("crystal_iframe").ReadyState == 4) 
```

当调试器在 InternetExplorer9 中遇到此行时，脚本错误为“Permission Denied”，该行中的错误是什么，请帮助我找出答案。

# asp.net-mvc - 您可以将 ASP.Net MVC 4 Intranet 模板添加到现有的空项目吗

> ID：16206223
> 
> 赞同：0
> 
> 时间：2013-04-25T04:10:35.997
> 
> 标签：asp.net-mvc, visual-studio, asp.net-mvc-4, nuget-package

我通过创建一个 asp.net MVC 4 空项目来启动一个 Visual Studio 2012 项目。我想知道是否可以将与 asp.net mvc 4 Intranet 站点项目模板一起打包的身份验证成员资格提供程序、捆绑、css、javascript 添加到我现有的空项目中，而无需从头开始创建。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T04:18:18.277

创建一个新的。将 App_start 文件夹、global.asax 和 web.config 中的类复制到您的项目中

# python - 如何将 python 列表导出到 csv 并添加换行符

> ID：16206224
> 
> 赞同：0
> 
> 时间：2013-04-25T04:10:41.293
> 
> 标签：python, excel, csv

我有一个 python 列表，我想将它导出到一个 csv 文件，但我不想将所有列表存储在同一行中。我想在给定点对列表进行切片并开始新行。像这样的东西：

```
list = [x1,x2,x3,x4,y1,y2,y3,y4] 
```

我希望它以这种格式导出

```
 x1 x2 x3 x4
 y1 y2 y3 y4 
```

到目前为止，我有这个：

```
import csv
A = ["1", "2", "3", "4", "5", "6", "7", "8"]
result = open("newfile.csv",'wb')
writer = csv.writer(result, dialect = 'excel')
writer.writerow(A)
result.close 
```

输出看起来像这样：

```
1 2 3 4 5 6 7 8 
```

我希望输出是

```
1 2 3 4 
5 6 7 8 
```

有什么建议么？任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T04:16:24.677

对于`list`（调用它`seq`）和目标行长度（调用它`rowsize`），你会做这样的事情：

```
split_into_rows = [seq[i: i + rowsize] for i in range(0, len(seq), rowsize)] 
```

然后，您可以使用 writer 的`writerows`方法将元素写入文件：

```
writer.writerows(split_into_rows) 
```

对于惰性求值，请改用生成器表达式：

```
split_into_rows = (seq[i: i + rowsize] for i in range(0, len(seq), rowsize)) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T04:17:26.167

我建议使用临时数组 B。

1.  获取原始数组A的长度
2.  将第一个 A.length/2 复制到数组 B
3.  将换行符添加到数组 B。
4.  将数组 A 的其余部分附加到 B。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-25T04:18:24.407

以这种方式处理列表时，最好使用 numpy 模块：

```
import numpy as np
A = ["1", "2", "3", "4", "5", "6", "7", "8"]
#now to convert your list into a 2-Dimensional numpy array
A = np.array((A)).reshape((2,4))
result = open("newfile.csv",'wb')
writer = csv.writer(result, dialect = 'excel')
#you use writer.writerows() instead of .writerow because you have multiple rows rather than one
writer.writerows(row)
result.close 
```

numpy 提供了许多操作列表的方法。[在这里](http://docs.scipy.org/doc/numpy/reference/)查看一些文档

是的，有很多方法可以做你想做的事，但是你必须处理的列表不仅仅是简单地等同于`range(1,9)`numpy，你不仅可以简洁地做你想做的事，你可以在很多地方操作你的列表将其转换为 numpy 数组后的不同方式

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-25T05:51:48.757

```
>>> import csv
>>> A = ["1", "2", "3", "4", "5", "6", "7", "8"]
>>> with open("newfile.csv",'wb') as f:
        w = csv.writer(f)
        w.writerows(zip(*[iter(A)]*4)) 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-04-25T04:24:38.510

这个

```
import itertools
l = ['a1','a2','b1','b2']

def toCSV(fname,l):
    with open(fname+'.csv','w') as f:
        f.write('\n'.join([','.join(list(g)) for k,g in itertools.groupby(l,key=lambda k: k[0])]))

toCSV('mycsv',l) 
```

会产生

```
a1,a2
b1,b2 
```

它严重依赖于 itertool 的 groupby 函数。[Python Doc](http://docs.python.org/2/library/itertools.html#itertools.groupby)。本质上，它将根据键对元素进行分组。可以使用 lambda 表达式计算密钥，在这种情况下，它是数字之前的代数字母。

# linux - 如何从具有匹配文本的每个文件中删除行？

> ID：16206233
> 
> 赞同：0
> 
> 时间：2013-04-25T04:11:49.753
> 
> 标签：linux, unix, ubuntu, grep

```
$ grep "console.log" * -R
account/db.js:        console.log(err);
account/db.js:        console.log(info);
account/db.js:                console.log(err);
account/db.js:                    console.log(err2);
account/controller.js:    console.log(covers);
account/controller.js:    console.log(req.api_user);
account/controller.js:    console.log(code);
account/controller.js:        console.log(user);
account/helper.js:                console.log(err);
messages/db.js:        console.log("Error " + err);
messages/helper.js:                console.log('No email notify.');
messages/helper.js:                console.log(msg_body);
messages/helper.js:                        console.log(message.sid);
messages/helper.js:                        console.log(message.dateCreated);
messages/helper.js:                        console.log(error);
products/controller.js:            console.log(product);
products/controller.js:                console.log(product);
products/helper.js:        console.log(data)
products/helper.js:    console.log('removing index....');
profile/db.js:                console.log(err);
profile/db.js:                console.log(info);
profile/db.js:                console.log(err);
profile/controller.js:                            console.log("sending phone confirmation text...");
profile/helper.js:            console.log(message.sid);
profile/helper.js:            console.log(message.dateCreated);
profile/helper.js:            console.log(error);
receiver/controller.js:    console.log(from);
receiver/controller.js:    console.log(body);
receiver/controller.js:        console.log(from_email);
receiver/controller.js:        console.log(to_id_gen);
receiver/controller.js:        console.log(finalbody);
receiver/controller.js:                            console.log(result);
reviews/db.js:        console.log(err);
reviews/db.js:        console.log(results);
reviews/controller.js:            console.log(review);
reviews/controller.js:    console.log(review_id);
search/controller.js:        console.log(JSON.stringify(data.hits.hits, null, 4)); 
```

如您所见，当我编写代码时，我到处都在做 console.log。

现在，我想删除所有这些行。我不想手动进入每个文件来删除它们。相反，我想通过命令来做到这一点。

与 类似`grep "console.log" * -R`，我怎样才能做同样的事情，但递归地删除这些行？（从我当前目录一直向下查看每个文件）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T04:58:38.693

尝试`find`这样的事情。尝试`find . -type f -exec sed -i '/console\.log/d' {} \;`，但您可能有兴趣使用`-i.bak`而不是`-i`保留备份副本

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T04:27:57.537

试一试。

```
sed -i.bak '/console.log/d' */*.js 
```

`-i`参数编辑文件。原始文件将`.bak`附加到其名称中，因此如果出现问题或您改变主意，您可以恢复它。

这不是一个适当的递归解决方案；您可能需要修改文件名通配符，或从`find . -exec ...`包装器驱动命令以使其递归。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-25T04:28:04.523

在 Perl 中：

```
perl -i -n -e'print unless /console\.log/' $(find . -name '*.js') 
```

# ruby-on-rails - 在 Rails 3.2.9 中使用 Authlogic 时出现路由错误

> ID：16206234
> 
> 赞同：1
> 
> 时间：2013-04-25T04:11:55.627
> 
> 标签：ruby-on-rails, runtime-error, authlogic, rails-routing

[我已经通过参考https://github.com/jonathandean/authlogic_example](https://github.com/jonathandean/authlogic_example)为用户管理需求配置了 authlogic gem 。我已经正确配置了一切。我正在使用 Rails 3.2.9 和 ruby​​ 1.8.7。我收到以下错误`localhost:3000`

```
Routing Error

undefined method `filter_parameter_logging' for ApplicationController:Class

Try running rake routes for more information on available routes. 
```

请帮助解决这个问题。谢谢你的帮助 ：）-

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T04:27:36.067

# c# - 从 url 拆分文件

> ID：16206236
> 
> 赞同：2
> 
> 时间：2013-04-25T04:12:02.363
> 
> 标签：c#, c#-2.0

我有一些代码来拆分文件并加入，现在我正在尝试制作一个从 url 拆分文件并下载的程序，例如[http://tegos.ru/new/mp3_full/David_Guetta_feat_Ne-Yo_and_Akon_-_Play_Hard.mp3](http://tegos.ru/new/mp3_full/David_Guetta_feat_Ne-Yo_and_Akon_-_Play_Hard.mp3)拆分此文件分两片下载

我的拆分器代码 Byte[] byteSource = System.IO.File.ReadAllBytes(FileInputpath); FileInfo fiSource = new FileInfo(txtPath.Text);

```
 int partsize = (int)Math.Ceiling((double)(fiSource.Length / OutputFiles));

        int fileOffset = 0;
        string currPartPath;
        FileStream fsPart;

        int sizeReamining = (int)fiSource.Length;

        for (int i = 0; i < OutputFiles; i++)
        {
            currPartPath = FolderOutputPath + "\\" + fiSource.Name + "." + String.Format(@"{0:D4}", i) + ".gparts";
            if (!File.Exists(currPartPath))
            {

                fsPart = new FileStream(currPartPath, FileMode.CreateNew);
                sizeReamining = (int)fiSource.Length - (i * partsize);

                if (sizeReamining < partsize)
                {
                    partsize = sizeReamining;
                }
                fsPart.Write(byteSource, fileOffset, partsize);
                fsPart.Close();
                fileOffset += partsize;
            }
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T04:15:26.310

使用 HttpWebRequest 从指定的 url 获取流。当您拥有流时，您可以使用以前的代码。

[从 URL 下载/流式传输文件 - asp.net](https://stackoverflow.com/questions/5596747/download-stream-file-from-url-asp-net)

# sql - 从小数列中删除尾随零

> ID：16206238
> 
> 赞同：1
> 
> 时间：2013-04-25T04:12:16.213
> 
> 标签：sql, db2

如何使用 SQL 从下表中删除尾随零：

```
SKU     SIZE
ABC     35.000000
QWE     36.000000
RTY     37.000000
VGY     38.000000 
```

预期成绩：

```
SKU     SIZE
ABC     35
QWE     36
RTY     37
VGY     38 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T04:14:45.323

在 sql server 中，将包含十进制值的列转换为 Int

```
Select SKU,CAST (Size AS INT) 
From tablename 
```

对于 MySql 使用整数除法函数[DIV](http://dev.mysql.com/doc/refman/5.0/en/arithmetic-functions.html#operator_div)

```
SELECT SKU,Size DIV 1
From Tablename 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T11:02:40.103

我建议

```
SELECT sku, int(size)
FROM tablename 
```

打字少了。;-)

# java - JLine，如何在 Windows 中获取完整的文件名

> ID：16206239
> 
> 赞同：2
> 
> 时间：2013-04-25T04:12:17.663
> 
> 标签：java, parsing, console, terminal, jline

亲爱的所有 JLine 用户，

我最近正在开发一个使用 JLine 的控制台应用程序，以提供命令和文件名补全。

它与 FileNameCompleter 配合得很好，但是我无法正确获取完整的文件名。

我的代码如下：

```
 List<Completer> loadCompleter =
                Arrays.asList(
                    new StringsCompleter(commands),
                    new FileNameCompleter(),
                    new NullCompleter()
                );
        console.addCompleter(new ArgumentCompleter(loadCompleter));

        while ((line = console.readLine()) != null) {
            line = line.trim();
            // here I print out the line in char.
            char[] result = line.toCharArray();
            for (int i = 0; i < result.length; i ++) {
                System.out.println(result[i] + " : " + (int)result[i]);
            }
         } 
```

在我的代码的最后一部分，我打印出我从控制台得到的行，例如，我收到了

```
myCommand test\new\test.txt 
```

输出是 myCommand testnewtest.txt

由于某种原因，反斜杠消失了，我从来没有得到正确的文件路径。当我在类 Unix 系统中进行测试时，这不是问题，因为正斜杠似乎没问题。

谁能帮助我获取完整文件名的正确方法？非常感谢。

矽。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-09-12T19:38:51.850

JLine 使用反斜杠，因为它们用于转义特殊字符，例如`!`. 您可以通过在 ConsoleReader 初始化中添加以下内容来禁用特殊字符（以及反斜杠的丢失）：

```
console.setExpandEvents(false); 
```

或者，如果您确实想保留特殊字符，则需要将反斜杠加倍（因此而不是`foo\bar`, input `foo\\bar`）。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2015-09-04T10:19:01.757

它现在对我有用，我是 jline-2.11.jar。

见[https://github.com/Qatar-Computing-Research-Institute/NADEEF/blob/master/console/src/qa/qcri/nadeef/console/Console.java](https://github.com/Qatar-Computing-Research-Institute/NADEEF/blob/master/console/src/qa/qcri/nadeef/console/Console.java)

# iphone - 我可以通过 Adob e Flash Builder (Adobe AIR) 制作 iOS 静态库吗

> ID：16206241
> 
> 赞同：0
> 
> 时间：2013-04-25T04:12:32.427
> 
> 标签：iphone, ios, air

我想使用 Adob​​e Flash Builder 制作一个 iOS 静态库以在本机代码中使用。这是不可能的吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-04-30T16:45:54.647

我知道这是一个老话题，但是这方面有一些更新吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T08:15:41.800

据我所知，不可能。XCode 不能与 swc 一起使用。FlashBuilder 中也没有导出本机 objC 库的选项。

# java - 一旦到达流结束，是否应该明确关闭连接？

> ID：16206246
> 
> 赞同：4
> 
> 时间：2013-04-25T04:13:07.733
> 
> 标签：java, networking, nio

我正在 NIO 中编写一些网络代码。

```
ByteBuffer buf = ByteBuffer.allocate(Hub.getBufferSize());
int read = channel.read(buf);
if (read == -1) {
    client.disconnect();
    return;
} else if (read == 0) {
    return;
} 
```

我知道这是一个读取返回-1，这意味着已经到达连接流的末尾。但这是否意味着与该客户端的连接现已结束？此外，一旦到达流结束，服务器是否应该显式关闭通道，或者它是多余的？

谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-25T04:42:48.320

> 我知道这是一个读取返回-1，这意味着已经到达连接流的末尾。但这是否意味着与该客户端的连接现已结束？

这是同一件事。这些不是两个不同的概念，因此其中一个暗示另一个。这是同一件事。

> 此外，一旦到达流结束，服务器是否应显式关闭通道

是的。

如果不关闭，就是socket泄漏和内存泄漏。

> 还是多余的？

当然不是。看上面。此外，如果您不关闭它，您将继续`OP_READ`使用它并继续阅读`-1`它。只是浪费时间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T04:26:03.640

流关闭后，将无法重新打开它。明确关闭事物以避免可能的资源泄漏总是一个好主意。

# php - 认证后 CakePHP 访问受限文件

> ID：16206250
> 
> 赞同：2
> 
> 时间：2013-04-25T04:13:27.337
> 
> 标签：php, .htaccess, cakephp, file-upload, acl

我有一个 ACL 控制的应用程序，它使用[媒体插件](https://github.com/bmcclure/CakePHP-Media-Plugin)将文件上传到`/app/webroot/media`. 上传文件时，会将目录名、基本名和文件名写入数据库。

我正在寻找一种方法来限制对 的访问`/app/webroot/media`，允许用户在登录后仅查看与其用户 ID 关联的文件。目前，用户可以访问其他用户的文件，这并不理想。就 CakePHP 而言，是否有最佳实践？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-25T06:04:07.067

如果用户知道 url，则 webroot 下的任何文件都可以公开访问。将文件存储在 webroot 外部的文件夹中，然后使用[CakeResponse::file()](http://book.cakephp.org/2.0/en/controllers/request-response.html#cake-response-file)通过控制器操作呈现它们。这样，您可以根据需要控制对操作的访问。

# python - 在python中解析字符串而不知道在字符串中

> ID：16206251
> 
> 赞同：0
> 
> 时间：2013-04-25T04:13:27.743
> 
> 标签：python, string, parsing, quotes

我正在尝试解析一组引号之间的随机字符串。数据始终采用以下形式：

klheafoiehaiofa" **randomtextnamehere.ext** "fiojeaiof;jidoa;jfioda

我知道 .ext 是什么，我想要的是**randomtextnamehere.ext**，并且它总是用“”分隔。

目前我只能处理某些情况，但我希望能够处理任何情况，如果我可以从第一个“开始抓住”，然后在第二个“停止”，那就太好了。因为每行可能有不止一组 "。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-25T04:17:37.150

您可以使用以下[`str.split`](http://docs.python.org/2/library/stdtypes.html#str.split)方法：

```
Docstring:
S.split([sep [,maxsplit]]) -> list of strings

Return a list of the words in the string S, using sep as the
delimiter string.  If maxsplit is given, at most maxsplit
splits are done. If sep is not specified or is None, any
whitespace string is a separator and empty strings are removed
from the result. 
```

* * *

```
In [1]: s = 'klheafoiehaiofa"randomtextnamehere.ext"fiojeaiof;jidoa;jfioda'

In [2]: s.split('"', 2)[1]
Out[2]: 'randomtextnamehere.ext' 
```

# vim - 美元符号 `$` 不能从 iskeyword 中删除

> ID：16206253
> 
> 赞同：0
> 
> 时间：2013-04-25T04:13:39.787
> 
> 标签：vim

在我的 .vimrc 中，我都尝试了

```
autocmd BufRead,BufNewFile *.php set iskeyword-=$ 
```

和

```
autocmd BufRead,BufNewFile *.php set iskeyword-=\$ 
```

`iskeyword`但仍然无法正常工作，打开 php 文件时$ 仍在

# javascript - 分段上传的额外标头参数

> ID：16206254
> 
> 赞同：2
> 
> 时间：2013-04-25T04:13:54.967
> 
> 标签：javascript, multipart

在发出表单请求时，在多部分数据的每个部分之前，我会插入几个标题，如下所示：

```
------WebKitFormBoundary9GAg9hUgKAtE1jsV
Content-Disposition: form-data; name="file1"; filename="Awesome-1920x1080.png"
Content-Type: image/png 
```

有没有办法让我在实际文件数据之前添加额外的标题？有没有办法让我附加另一个变量`Content-Disposition`？

本质上，我需要能够告诉我的服务器多部分请求中的每个文件有多大。这可能吗？我目前正在使用 jQuery File Upload 插件，它在内部使用 FormData 来附加数据。

# javascript - Jquery 允许数字和文本（大写）

> ID：16206258
> 
> 赞同：-1
> 
> 时间：2013-04-25T04:14:21.043
> 
> 标签：javascript, jquery

我需要帮助如何让我的 JS 允许使用大写的文本？我的代码现在只允许数字。

到目前为止，这是我的代码：

```
$(document).ready(function() {
        $('#status, #accs, #pack_b, #de_no, #de_ser, #n_label, #ac_cord_u').autotab_magic().autotab_filter('numeric');
    }); 
```

感谢您的帮助。:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T04:19:15.413

根据`API docs`来自[Autotab](http://www.mathachew.com/sandbox/jquery-autotab/)使用以下代码作为大写和数字

```
$(document).ready(function() {
    $('#status, #accs, #pack_b, #de_no, #de_ser, #n_label, #ac_cord_u').autotab_magic().autotab_filter('alphanumeric');
}); 
```

# c - exit 命令在我自己的 shell 中无法正常工作

> ID：16206260
> 
> 赞同：0
> 
> 时间：2013-04-25T04:14:24.470
> 
> 标签：c, linux, shell, exit

我为分配编写了一个 shell，它可以正常工作，但是有一个小的运行时错误，我无法弄清楚。当用户通过外壳输入命令“退出”时，它应该来自新创建的外壳。但问题是我必须多次键入命令“退出”才能退出 shell。如果有人可以帮助我，我将非常高兴！谢谢大家！

```
#include <stdio.h>
#include <unistd.h>
#include <string.h>
#include <stdlib.h>

char* cmndtkn[256];
char buffer[256];
char* path=NULL;
char pwd[128];

int main(){

//setting path variable 
    char *env;
    env=getenv("PATH"); 
    putenv(env);

    system("clear");

printf("\t MY OWN SHELL !!!!!!!!!!\n ");
printf("_______________________________________\n\n");

while(1){

    fflush(stdin);
    getcwd(pwd,128);
    printf("[MOSH~%s]$",pwd);

    fgets(buffer,sizeof(buffer),stdin);
    buffer[sizeof(buffer)-1] = '\0';

    //tokenize the input command line   
    char* tkn = strtok(buffer," \t\n");
    int i=0;
    int indictr=0;

        // loop for every part of the command
        while(tkn!=NULL)
        {
            if(strcoll(tkn,"exit")==0 ){
                exit(0);                
            }

            else if(strcoll(buffer,"cd")==0){

            path = buffer;
            chdir(path+=3);}

            else if(strcoll(tkn,"|")==0){

            indictr=i;}
            cmndtkn[i++] = tkn;
            tkn = strtok(NULL," \t\n");

        }cmndtkn[i]='\0';

// execute when command has pipe. when | command is found indictr is greater than 0.
    if(indictr>0){

    char* leftcmnd[indictr+1];
    char* rightcmnd[i-indictr];
    int a,b;

        for(b=0;b<indictr;b++)
        leftcmnd[b]=cmndtkn[b];

        leftcmnd[indictr]=NULL;

        for(a=0;a<i-indictr-1;a++)
        rightcmnd[a]=cmndtkn[a+indictr+1];

        rightcmnd[i-indictr]=NULL;

    if(!fork())
    {   
        fflush(stdout);
        int pfds[2];
        pipe(pfds);

            if(!fork()){

                close(1);
                dup(pfds[1]);
                close(pfds[0]);
                execvp(leftcmnd[0],leftcmnd);
                }   
            else{

                close(0);
                dup(pfds[0]);
                close(pfds[1]);
                execvp(rightcmnd[0],rightcmnd);
            }

    }else wait(NULL);

//command not include pipe 

        }else{

        if(!fork()){
            fflush(stdout);
            execvp(cmndtkn[0],cmndtkn);

        }else wait(NULL);

        }

}

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T04:46:24.240

与`cd`命令一样，`exit`命令必须由 shell 解释为内置的；它必须退出循环或`exit()`直接调用该函数。然而，这似乎也应该发生。请注意，使用`strcoll()`有点不寻常；通常，`strcmp()`就足够了。

如果`execvp()`返回，您应该报告问题——并且您必须确保子 shell 退出，这样您就不会有多个 shell 进程同时读取输入。我想知道这个问题是否正在发生，这就是你必须`exit`多次输入的原因。

您还需要检查`fgets()`没有报告错误。它总是 null 终止它的输入；您的代码不会删除换行符（您需要`strlen(buffer)-1`而不是`sizeof(buffer)-1`）。

读取和设置的代码`PATH`是错误的。 `getenv("PATH")`返回指向该`PATH=`部分之后的第一个字符的指针；然后你用它来“设置”环境。对您来说幸运的是，PATH 的平均值不包含任何看起来像的内容`VAR=value`，因此它在功能上是无操作的（尽管信息可能会复制到环境中，在那里它会造成混乱而不会造成任何重大伤害）。

你的代码缩进方案充其量是洛可可式的——大多数情况下，它只是非常不一致。请保持一致！代码中的行间距也非常不稳定。当您在 SO 中添加代码时，不要使用制表符，每个缩进级别使用 4 个空格，突出显示左对齐的代码块并使用**`{}`**编辑框上方的按钮将其缩进为代码。这也意味着您不需要在代码中添加空行。

您没有关闭足够的文件描述符。当您使用`dup()`(或`dup2()`) 将管道复制到标准输入或标准输出时，您必须关闭由 . 返回的*两个*文件描述符`pipe()`。

在 Linux 上，使用`fflush(stdin)`是未定义的行为，AFAIK。它是在 Windows 上定义的，但不是在 POSIX 系统上定义的。

您没有检查您的`chdir()`系统调用是否有效。

* * *

尝试您的代码，我确实得到了一个失控的提示。不幸的是，我不记得或看到是什么引发了失控。下面的代码大部分都经过了清理，并且似乎可以正常运行。我已经注释了一些重要的变化——而不是其他的。为了您自己的利益，您应该做的一件事是包括像`dump_cmd()`函数一样的跟踪，这样您就可以看到您的程序在做什么。

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#include <sys/wait.h>
#include <unistd.h>

char *cmndtkn[256];
char  buffer[256];
char *path = NULL;
char  pwd[128];

static void dump_cmd(char **argv);

int main(void)
{
    /*
    //setting path variable
    char *env;
    env=getenv("PATH");
    putenv(env);
    system("clear");
    */

    printf("\t MY OWN SHELL !!!!!!!!!!\n ");
    printf("_______________________________________\n\n");

    while (1)
    {
        //fflush(stdin);
        getcwd(pwd, 128);
        printf("[MOSH~%s]$", pwd);

        if (fgets(buffer, sizeof(buffer), stdin) == 0)
        {
            putchar('\n');
            break;
        }
        //buffer[sizeof(buffer)-1] = '\0';
        buffer[strlen(buffer)-1] = '\0';

        //tokenize the input command line
        char *tkn = strtok(buffer, " \t\n");
        int i = 0;
        int indictr = 0;

        // loop for every part of the command
        while (tkn != NULL)
        {
            if (strcoll(tkn, "exit") == 0)
            {
                printf("Got: exit\n");
                fflush(stdout);
                exit(0);
            }
            else if (strcoll(tkn, "cd") == 0)   // Was buffer, not tkn
            {
                printf("Got: cd (%s)\n", buffer + 3);
                fflush(stdout);
                path = buffer;
                chdir(path += 3);
            }
            else if (strcoll(tkn, "|") == 0)
            {
                indictr = i;
            }
            cmndtkn[i++] = tkn;
            tkn = strtok(NULL, " \t\n");
        }
        cmndtkn[i] = 0;

        // execute when command has pipe. when | command is found indictr is greater than 0.
        if (indictr > 0)
        {
            char *leftcmnd[indictr+1];
            char *rightcmnd[i-indictr];
            int a, b;

            for (b = 0; b < indictr; b++)
                leftcmnd[b] = cmndtkn[b];

            leftcmnd[indictr] = NULL;

            for (a = 0; a < i-indictr-1; a++)
                rightcmnd[a] = cmndtkn[a+indictr+1];

            rightcmnd[i-indictr-1] = NULL;  // Did not include -1

            if (!fork())
            {
                fflush(stdout);
                int pfds[2];
                pipe(pfds);

                if (!fork())
                {
                    dump_cmd(leftcmnd);
                    close(1);
                    dup(pfds[1]);
                    close(pfds[0]);
                    close(pfds[1]);
                    execvp(leftcmnd[0], leftcmnd);
                    fprintf(stderr, "failed to execvp() %s\n", leftcmnd[0]);
                    exit(1);
                }
                else
                {
                    dump_cmd(rightcmnd);
                    close(0);
                    dup(pfds[0]);
                    close(pfds[0]);
                    close(pfds[1]);
                    execvp(rightcmnd[0], rightcmnd);
                    fprintf(stderr, "failed to execvp() %s\n", rightcmnd[0]);
                    exit(1);
                }
            }
            else
                wait(NULL);

        }
        else
        {
            //command does not include pipe
            if (!fork())
            {
                dump_cmd(cmndtkn);
                fflush(stdout);
                execvp(cmndtkn[0], cmndtkn);
                fprintf(stderr, "failed to execvp() %s\n", cmndtkn[0]);
                exit(1);
            }
            else
                wait(NULL);
        }
    }

    return 0;
}

static void dump_cmd(char **argv)
{
    int i = 0;
    fprintf(stderr, "%d: Command:\n", (int)getpid());
    while (*argv != 0)
        fprintf(stderr, "%d: %d: [[%s]]\n", (int)getpid(), i++, *argv++);
} 
```

我不热衷于代码，但它看起来确实很理智。

# delphi - Treeview Imageindex - 图像不断变化

> ID：16206261
> 
> 赞同：2
> 
> 时间：2013-04-25T04:14:37.467
> 
> 标签：delphi, treeview, delphi-xe2

选择节点时，如何防止 Treeview 恢复到图像列表中的第一个图像？创建组节点时，它们的 ImegeIndex 为 1

```
 Node := TreeView1.Items.Add(nil, 'Software');
  Node.ImageIndex:=1; 
```

但是，当我展开节点时，它会出现 ImageIndex 更改为 0 并显示不同的图像。知道如何解决这个问题。谢谢你。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-04-25T04:32:38.693

节点被选中时显示的图像由 SelectedIndex 属性决定，因此您必须将[`SelectedIndex`](http://docwiki.embarcadero.com/Libraries/XE3/en/Vcl.ComCtrls.TTreeNode.SelectedIndex)属性值设置为与`ImageIndex`.

```
Node.SelectedIndex:=Node.ImageIndex; 
```

# c# - 需要帮助解析文本块

> ID：16206263
> 
> 赞同：0
> 
> 时间：2013-04-25T04:14:49.957
> 
> 标签：c#, regex, file, parsing, block

我需要帮助解析此示例文本：

```
[item1]
2550 coins 995 200000 7    
2550 coins 995 200000 7    
2550 coins 995 200000 7
2550 coins 995 200000 7
2550 coins 995 200000 7   
[/item1]  
[item2]   
2550 coins 995 200000 7    
2550 coins 995 200000 7   
2550 coins 995 200000 7   
2550 coins 995 200000     
2550 coins 995 200000 7    
[/item2]    
[item3]    
2550 coins 995 200000 7    
2550 coins 995 200000 7    
2550 coins 995 200000 7    
2550 coins 995 200000 7    
2550 coins 995 200000 7    
[/item3] 
```

我不知道如何从每个项目中读取数据，同时保持项目标题（项目 1 等）与数据相关联。我很抱歉，但我不知道如何处理这个问题，到目前为止，这是我解析一个没有标题的项目所得到的。

```
private void button1_Click(object sender, EventArgs e)
    {
        //dataGridView1.Rows.Add("Ashes", "d", "a", "g");
        //dataGridView1.Rows[0].Cells[3].Style.BackColor = Color.Aqua;
        String fileName = "Drops.de";
        StreamReader streamReader = new StreamReader(fileName);
        int[] nums = new int[4];

        int npcID;
        int itemID;
        int itemAmount;
        int itemRarity;
        string itemName;

       // string currentLine = streamReader.ReadLine();

        while (!streamReader.EndOfStream)
        {
             string currentLine = streamReader.ReadLine();

            if (!currentLine.Contains('#') && currentLine != "" && !currentLine.Contains("["))
            {     
                String[] s = currentLine.Split(' ');
                npcID = int.Parse(s[0]);
                itemName = (s[1]);
                itemID = int.Parse(s[2]);
                itemAmount = int.Parse(s[3]);
                itemRarity = int.Parse(s[4]);
                dataGridView1.Rows.Add(itemName, itemID, itemAmount, itemRarity);
                dataGridView1.Refresh();
            }
            else
            {
                streamReader.ReadLine();
            }

        }

        streamReader.Close();

    } 
```

任何和所有的帮助将不胜感激:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T05:31:29.697

you already have a branch for reading lines with the [item] identifyer ... use it to read the desired info about the item ... store that info in a variable outside of your loop ... everytime you read a line without the [item] identifyer, you can still use that variable to know what item this line belongs to ...

```
 string headingItem="unknown Item";
    while (!streamReader.EndOfStream)
    {
         string currentLine = streamReader.ReadLine();

        if (!currentLine.Contains('#') && currentLine != "" && !currentLine.Contains("["))
        {     
            String[] s = currentLine.Split(' ');
            npcID = int.Parse(s[0]);
            itemName = (s[1]);
            itemID = int.Parse(s[2]);
            itemAmount = int.Parse(s[3]);
            itemRarity = int.Parse(s[4]);
            dataGridView1.Rows.Add(headingItem, itemName, itemID, itemAmount, itemRarity);
            dataGridView1.Refresh();
        }
        else
        {
            headingItem=currentLine;
        }

    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T05:20:48.723

这不需要你第二次阅读这里有问题

```
else
{
     streamReader.ReadLine();
} 
```

在 item2 ->> 第 4 条记录的情况下，您可能会在 itemRarity = int.Parse(s[4]); 处获得异常索引出界数组；

因为没有第五个元素

你能做的最好的就是在 if 条件下

```
if(Regex.match(currentline,@"^\d+\s\w+\s\d+\s\d+\s\d+\s*?$"))
{
    #now do your logic here
} 
```

这是完整的代码：

```
private void button1_Click(object sender, EventArgs e)
    {
        String fileName = "d:\\Drops.txt";
        StreamReader streamReader = new StreamReader(fileName);
        dataGridView1.Rows.Clear();
        dataGridView1.Columns.Clear(); 
        dataGridView1.Columns.Add("Head","Head");
        dataGridView1.Columns.Add("npcID", "npcID");
        dataGridView1.Columns.Add("itemName", "itemName");
        dataGridView1.Columns.Add("itemID", "itemID");
        dataGridView1.Columns.Add("itemAmount", "itemAmount");
        dataGridView1.Columns.Add("itemRarity", "itemRarity");

        string itemhead = "Not Found";
        while (!streamReader.EndOfStream)
        {
            string currentLine = streamReader.ReadLine();

            if (Regex.IsMatch(currentLine, @"^\d+\s\w+\s\d+\s\d+\s\d+?\s*?$"))
            {
                List<string> s = new List<string>();
                s.Add(itemhead);
                s.AddRange(currentLine.Split(' '));

                dataGridView1.Rows.Add(s.ToArray());
                dataGridView1.Refresh();
            }
            else if(Regex.IsMatch(currentLine,@"\[[^/]*\]"))
            {
                itemhead = Regex.Match(currentLine, @"\[([^/]*)\]").Groups[0].Value;
            }

        }

        streamReader.Close();
    } 
```

# c - Zoom MandelBrot Set

> ID：16206264
> 
> 赞同：2
> 
> 时间：2013-04-25T04:14:52.750
> 
> 标签：c, zooming, xlib, mandelbrot

My calculations seem to be moving the image around more than scaling it. Not quite sure where I'm going wrong. I thought I followed the other post on here correctly but it's not quite right.

```
int xPos = ev.xbutton.x;
int yPos = ev.xbutton.y;

double xCenter = (double) ((double) ((double) xPos / X_RESN) * (rmax - rmin)) + rmin;
double yCenter = (double) ((double) ((double) yPos / Y_RESN) * (imax - imin)) + imin;

double pixelFactors[4];

if(ev.xbutton.button == 1) //Left click, zoom in
{
    rmin = (double) xCenter + (rmin + 0.3);
    rmax = (double) xCenter + (rmax - 0.3);
    imin = (double) yCenter + (imin + 0.3);
    imax = (double) yCenter + (imax - 0.3);
}
else if(ev.xbutton.button == 3) //Right click, zoom out
{
    rmin = -2;
    rmax = 2;
    imin = -2;
    imax = 2;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T05:52:52.973

You wrote:

```
rmin = (double) xCenter + (rmin + 0.3);
rmax = (double) xCenter + (rmax - 0.3);
imin = (double) yCenter + (imin + 0.3);
imax = (double) yCenter + (imax - 0.3); 
```

Shouldn't there be some multiplication in there? Perhaps more like:

```
rmin = (double) xCenter + (rmin * 0.3);
rmax = (double) xCenter + (rmax * 0.3);
imin = (double) yCenter + (imin * 0.3);
imax = (double) yCenter + (imax * 0.3); 
```

If you just want the mins and maxes to be closer, with xCenter and yCenter defining the middle of the image in complex-plane coordinates (ie. *not* pixel coordinates), I think this might be closer to what you want.

```
double rspan = rmax - rmin;
double ispan = imax - imin;
rmin = xCenter - (rspan * 0.3);
rmax = xCenter + (rspan * 0.3);
imin = yCenter - (rspan * 0.3);
imax = yCenter + (rspan * 0.3); 
```

Note the casts are no longer necessary.

# java - 从 ArrayList 创建一个 int[]

> ID：16206265
> 
> 赞同：0
> 
> 时间：2013-04-25T04:14:54.000
> 
> 标签：java, arrays, casting, arraylist

有没有一种简单的方法可以从一个创建一个`int[]`或等价`Integer[]`的`ArrayList<Integer>`？

当我尝试`(Integer[])list.getArray()`时，我得到了这个堆栈跟踪：

> 线程“main”中的异常 java.lang.ClassCastException: [Ljava.lang.Object; 不能转换为 [Ljava.lang.Integer;

我能想到的唯一其他方法是：

```
int[] array = new int[list.size()];
for (int i = 0; i < array.size; i++){
    array[i] = list.get(i);
    //or I could do list.remove(0), is there any difference?
}
return array; 
```

但这种方式*似乎*非常缓慢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-25T04:16:10.227

```
yourIntList.toArray(new Integer[yourIntList.size()]); 
```

# php - DOMPDF 背景显示不正确的大小

> ID：16206267
> 
> 赞同：6
> 
> 时间：2013-04-25T04:14:58.783
> 
> 标签：php, dompdf

我正在为我 3 岁患有白血病的儿子整理一份小联系表。我想用它，这样人们就可以给他发鼓励信，我们可以把它们打印出来挂在他的房间里。我已经让表单工作并使用 DOMpdf 发布数据。我的问题是，我试图用作“固定”的背景图像拒绝扩大到 100%，并且无论我在图形软件中制作的尺寸如何，它都无法正常工作。对我所缺少的任何帮助表示赞赏。代码如下。例如，参见：[http ://bebrave.me/#contact](http://bebrave.me/#contact)

```
<head>
<style>
  body { background-image: url(http://www.bebrave.me/test.jpg); background-position: top left; background-repeat: no-repeat;
  background-size: 100%;
  margin-top:300px;
  width:612px;
  height:792px;
  }
</style>

</head>

<body>

<table width="500px"  border="0" align="center" cellpadding="0" cellspacing="0" id="Table">
<tr>
<td align="left">Dear Joshua,<br />
<?php echo $post->Message; ?></td>
</tr>
<tr>
<td align="right">Be Brave!<br />
-<?php echo $post->Name; ?></td></tr>
</table>

</body> 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-25T16:55:53.747

一些注意事项，如果您使用的是 dompdf 0.6.0 beta 3 或来自 github 的最新版本，则适用：

1.  dompdf 中尚不支持 background-size 属性
2.  您正在向正文添加边距，因此正文的内容（包括任何背景图像）将在应用边距后开始
3.  dompdf 应用 1.2 厘米的默认页边距
4.  更高版本的 dompdf 中的默认 DPI 为 96。如果将其降回 72 以使其符合 PDF 标准，则可能更容易掌握尺寸和位置。如果您使用任何其他 DPI，dompdf 将在渲染期间执行翻译。

在背景图像的应用方面，dompdf 似乎确实与现代浏览器有所不同。这可能是开发团队将来想要考虑的事情。但是，由于您的目标是 dompdf，因此您必须考虑到它的怪癖。

这是一个重新编写的文档，似乎可以满足您的要求。它针对[github](https://github.com/dompdf/dompdf)上可用的最新代码，考虑到它包含的许多改进，我建议您使用它。如果您需要针对不同的版本，请告诉我，我可以调整 HTML。

```
<html>
<head>
<link href='http://fonts.googleapis.com/css?family=Denk+One' rel='stylesheet' type='text/css'>
<style>
  @page { margin: 0in; }
  body {
    font-family: Denk One, sans-serif;
    background-image: url(http://www.bebrave.me/test.jpg);
    background-position: top left;
    background-repeat: no-repeat;
    background-size: 100%;
    padding: 300px 100px 10px 100px;
    width:100%;
    height:100%;
  }
  p {
    width: 400px;
    margin: auto;
  }
  .signature {
    margin-top: 4em;
    text-align: right;
  }
</style>

</head>

<body>

<p>
  Dear Joshua,<br />
  You may not understand all that's happening. Sometimes, you may not even care.
  Maybe you just want to do what you have to do to get better so you can
  go back to being a three-year-old ... growing, learning, playing, loving.
  It may be hard to understand, but you are a hero to your family and friends. You
  are a hero to them because you show strength in the face of something so 
  scary. Stay strong, be happy, and and get better.
</p>

<p class="signature">
  Be Brave!<br />
  -BrianS
</p>

</body>
</html> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-09-09T04:13:26.477

图像的分辨率应为每英寸 96 像素 (PPI)。

例如：

A4 格式：分辨率`96ppi and 210mm x 297mm or 297mm x 210mm`（分别为水平或垂直）

# jquery - 鼠标悬停暂停在 JCarousel 上不起作用

> ID：16206269
> 
> 赞同：-1
> 
> 时间：2013-04-25T04:15:01.793
> 
> 标签：jquery, hover, jcarousel

我去过很多答案，但没有一个回答了我的问题。我有这个 JCarousel，自动滚动。我希望它在悬停时停止，我需要在我的代码中添加什么？

```
<script type="text/javascript">

jQuery(document).ready(function() {
    jQuery('#mycarousel').jcarousel({
        auto: 1,
        wrap: 'circular',
        vertical: true,
        animation: 3500,
        pauseOnHover: true,
        scroll:1,
    });
});
</script> 
```

提前谢谢各位！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-11T10:36:11.650

以下是如何在 JCarousel 上使鼠标悬停时暂停的问题的步骤

步骤： 1 在我们的保险箱（file.js）的根目录中创建这个函数。

```
 function mycarousel_initCallback(carousel)
{
    carousel.clip.hover(function() {
        carousel.stopAuto();
    }, function() {
        carousel.startAuto();
    });
}; 
```

第2步：将此功能设为就绪功能

```
jQuery(document).ready(function() {

//exemple
 jQuery('#carosule ul').jcarousel({
     scroll:1,
     visible:4,
     wrap:"circular",
     animation:300,
     auto:1,
     hoverPause: true,
     width: 160,
     initCallback: mycarousel_initCallback

    });

}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-14T01:35:16.993

更新答案以保持最新状态。

正确答案见[https://github.com/jsor/jcarousel/issues/568 ：](https://github.com/jsor/jcarousel/issues/568)

```
$('.jcarousel').hover(function() {
    $(this).jcarouselAutoscroll('stop');
}, function() {
    $(this).jcarouselAutoscroll('start');
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-25T04:19:34.977

在您的初始化中添加此代码：`initCallback(carousel)`

```
carousel.clip.hover(function() {
    carousel.stopAuto();
}, function() {
    carousel.startAuto();
}); 
```

* * *

甚至在 jCarousel的一个[错误](http://drupal.org/node/677754)中也提到了这一点。

```
function mycarousel_initCallback(carousel)
{

    // Pause autoscrolling if the user moves with the cursor over the clip.
    carousel.clip.hover(function() {
        carousel.stopAuto();
    }, function() {
        carousel.startAuto();
    });
}; 
```

# jsf - 如何覆盖 h:outputText 中的标题属性 css

> ID：16206272
> 
> 赞同：0
> 
> 时间：2013-04-25T04:15:09.517
> 
> 标签：jsf, tooltip

我想将下面的 css 覆盖到 h:outputText 中的 title 属性。

```
 css:

    <style type="css/text">

    .title
    {
        border : 1px solid  #FF9933;
        font-family : verdana;
        font-size : 14px;
        font-weight:normal;
        color: #000000;
        background-color:#fae6b0;
        padding : 5px 5px 5px 5px";
    }
</style>

<h:outputText id="userName"
             value="#{userBean.userName}"
             title="#{userBean.userName}"/>

     <h:outputText id="userAddress"
             value="#{userBean.userAddress}"
             title="#{userBean.userAddress}"/> 
```

在以下链接的帮助下。我试图改变html中的title属性，它工作正常。

[如何更改锚标签内 Title 属性的样式？](https://stackoverflow.com/questions/2011142/how-to-change-the-style-of-title-attribute-inside-the-anchor-tag)

如何将相同的东西应用到richfaces中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T11:52:51.290

由 HTML 元素的`title`属性表示的工具提示不能由 CSS 设置样式。该样式完全由网络浏览器控制，通常以客户端操作系统平台默认工具提示样式表示。因此，例如，当客户端运行 Windows 7 时，工具提示将以 Windows 7 默认样式呈现。同样，您*无法控制*这一点。

您最好的选择是用一个在鼠标悬停/移出时出现/消失`title`的完整 HTML 替换该属性。`<div>`这允许通过通常的 CSS 方式完全控制样式。如您所知，RichFaces 有一个`<rich:tooltip>`组件可以做到这一点。如果由于某种原因它对您来说还不够，那么您可能需要考虑寻找另一个 JS/jQuery 插件，它会自动将所有`title`属性转换为可样式化的`<div>`元素。其中之一是[qTip](http://craigsworks.com/projects/qtip/)。那么你所需要的基本上是：

```
<h:outputScript name="scripts/jquery.qtip-1.0.0-rc3.min.js" target="head" />
<h:outputScript target="body">$("[title]").qtip();</h:outputScript> 
```

*（前提是您使用的是已经捆绑了 jQuery 的 RichFaces 版本，因此您不需要手动包含 jQuery）*

# java - 一个接口，所有方法都有多个实现类，每个实现类都实现接口中方法的子集

> ID：16206274
> 
> 赞同：1
> 
> 时间：2013-04-25T04:15:37.457
> 
> 标签：java, interface, implementation

我正在为一个需要为业务逻辑层开发人员提供所有数据库交互的单一接口的项目重构数据访问层。目前只有一个 DAOImpl 类实现了这个接口，但是这个类已经膨胀到 15000+ 行代码。现在我希望根据它们处理的对象类型将这些方法从这个类移动到多个类中。我想到的方法是-

1.  保持 DAOInterface 与所有方法原样
2.  实现一个 DAOImpl 类，该类实现 DAOInterface 但在任何方法中都没有任何逻辑
3.  实现对象特定的 DAOImpl 类，这些类扩展 DAOImpl 并实现 DAOInterface 并为所有对象特定的方法提供实际的 DAO 实现。
4.  更改当前的 DAOFactory 类以根据从业务逻辑层传递的某些标识符提供对象特定的 DAOImpl 实例。

我只是想在这个论坛上验证我的方法，看看我是否以正确的方式做事，或者是否有更好的解决方案/模式来解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T05:41:56.930

我建议将它采用外观风格。主 DAOImpl 引用了所有将调用委托给适当的 DAO 的子 DAO。

UPD：说明方法

```
interface DAO {
 void doSomethingUser();
 void doSomethingProject();
}

class DAOImpl {
  private UserDAOImpl;
  private ProjectDAOImpl;
  public void doSomethingUser() {
    UserDAOImpl.doSomethingUser();
  }
  public void doSomethingProject() {
    ProjectDAOImpl.doSomethingProject();
  }
} 
```

# jquery - jQueryUI 的 Draggable 和 Resizable with iframe 存在问题

> ID：16206283
> 
> 赞同：1
> 
> 时间：2013-04-25T04:16:23.610
> 
> 标签：jquery, jquery-ui, iframe, draggable, resizable

好的，所以我在这里有一个页面：http: //8wayrun.com/streams/multi?type=1&pos1=1.8wayrun.video&pos2= [1.8wayrun.chat](http://8wayrun.com/streams/multi?type=1&pos1=1.8wayrun.video&pos2=1.8wayrun.chat)

当您转到该页面时，您将看到一个视频块和一个聊天块。这两个块都是可拖动和调整大小的。

```
$('#position_'+position).resizable().draggable({
    handle: '.info',
    iframeFix: true,
    opacity: 0.50,
    snap: true,
    snapTolerance: 10,
    stack: { group: '.multiBlank', min: 1 },
    zIndex: 10000
}); 
```

视频块工作正常，因为它是一个简单的对象嵌入。但是，聊天块给我带来了问题，因为聊天是 iframe。draggable 中的 iframeFix 适用于可拖动元素在 iframe 上移动时，而不适用于可拖动元素本身包含 iframe 时。

我遇到的问题是，如果您拖动或调整块的大小，并且您的鼠标移动得太快，并且它越过 iframe 元素，您的鼠标就会从拖动/调整大小中分离出来，并且很难执行任何一项功能。有没有办法解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T04:24:10.090

仅在拖动时尝试在 iframe 上覆盖 div。当你完成拖动时，破坏覆盖 div。

# java - 将 Java 字符串形式的日期与 JDBC DATE 类型进行比较

> ID：16206285
> 
> 赞同：0
> 
> 时间：2013-04-25T04:16:26.530
> 
> 标签：java, date, jdbc, sqlmap

我需要在比较日期的 ibatis 中定义一个 SQL xml。比较的日期是一个 DATE jdbc 对象，从 java 对象接收到的日期是一个字符串。我应该如何将字符串转换为日期或者我应该如何比较两者？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T05:13:06.100

Java 日期和 SQL 日期的字符串格式可能不同，因此比较此字符串可能不是一个好主意。

```
 Date d = new Date();
        java.sql.Date sqlDate = new java.sql.Date(d.getTime());
        Date javaDate = d;
        // Either get both java date and sql date to same format String and
        // compare
        String javaDateStr = DateFormat.getDateTimeInstance().format(javaDate);
        String sqlDateStr = DateFormat.getDateTimeInstance().format(sqlDate);
        System.out.println(javaDateStr);
        System.out.println(sqlDateStr);
        /*
         * Sysout console 
         * Apr 25, 2013 10:39:46 AM 
         * Apr 25, 2013 10:39:46 AM
         */
        // Do String compare
        // OR getMillis and compare
        long javaDateMillis = javaDate.getTime();
        long sqlDateMillis = sqlDate.getTime();

        System.out.println(javaDateMillis);
        System.out.println(sqlDateMillis);
        /*
         * Sysout console 
         * 1366866586716 
         * 1366866586716
         */ 
```

# sql-server - 将 SQL Server 添加到 Visual Studio 2012 时出现错误消息

> ID：16206286
> 
> 赞同：3
> 
> 时间：2013-04-25T04:16:30.823
> 
> 标签：sql-server, visual-studio-2012

我一直在关注 Lynda.com 上的 David Gassner 的 ASP.NET 教程，并且进展顺利，直到他引导我在 Visual Studio 2012 的服务器资源管理器中添加 SQL 服务器。按照他的步骤，我收到以下信息错误：

> 无法添加数据连接。
> 
> 无法加载文件或程序集“Microsoft.SqlServer.Management.Sdk.Sfc，Version=11.0.0.0，Culture=neutral，PublicKeyToken=89845dcd8080cc91”或其依赖项之一。该系统找不到指定的文件。

我发现许多网站建议安装 3 个额外的程序/附加组件，例如[这个网站](http://jacksonpushpanathan.blogspot.com/2009/05/unable-to-add-data-connectioncould-not.html)。

我已经安装了所有推荐的 3 个（本机客户端、CLR 类型和管理对象）并重新启动程序和我的计算机，但似乎仍然没有任何效果。关于如何添加数据库的任何想法？

附加细节：当我在选择 OK 之前测试连接时，测试成功。我对 SQL/数据库的东西很陌生，所以请尽可能简单地解释一下，或者链接到可以帮助我解决这个问题的资源。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-03-26T01:23:23.567

@mattcoker 通过以下解决方案解决了他自己的问题

问题已通过切换到 Visual Studio 2010 得到解决，工作顺利。感谢您的快速回复。

# html - 为什么链接与文本重叠？

> ID：16206288
> 
> 赞同：2
> 
> 时间：2013-04-25T04:16:56.243
> 
> 标签：html, css

这是 HTML：

```
<div>
    <p>
        We bring you the latest in entertainment & information services, right on your phone. From the latest of Bollywood to the futuristic applications, get it all here!
        <a href="#">View All</a>
    </p>
</div> 
```

这是CSS....

```
div{width: 350px;}
a{
    padding: 30px;
    background: red;
    margin: 20px;
    border-radius: 12px;
    background: red;
    color: #fff;
    font: bold 12px Arial, Helvetica, sans-serif;
    text-decoration: none;
} 
```

我知道这可以通过使用`display: inline-block;`in来解决`.a`。但我想知道为什么这与文本重叠？它不应该超出文本吗？

**[演示1](http://jsfiddle.net/rHCNb/)**

**[DEMO2](http://jsfiddle.net/rHCNb/8/)**现在`a`在 p 的块级别内。

也看看这个**[DEMO](http://jsfiddle.net/rHCNb/5/)**。Img 也是一个内联元素。为什么这不重叠，这也应该重叠，对吧？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-25T05:20:33.900

`<a> tag`是内联级别，但同时`<img> tag`是内联和块级别，特别是内联块。`<a> tag`由于内联级别与文本相对应，因此重叠，但`<img> tag`不会重叠，因为它的行为是内联块。您可能知道它们之间的区别。

**参考：** [<img> 元素是块级还是内联级？](https://stackoverflow.com/questions/2402761/img-elements-block-level-element-or-inline-element)

内联元素无法设置其宽度和高度，甚至无法正常工作实际应该做的边距行为。边距仅应用于左侧或右侧。实际上这就是为什么这里的内联元素`<a> tag`不会设置其宽度和高度并保持在同一行并且在应用填充值时似乎重叠。

下图让你清楚了解 inline vs inline-block

![内联块与内联](https://i.stack.imgur.com/fPimv.jpg)

**[查看现场演示](http://jsfiddle.net/VvbFX/)**

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-25T04:20:39.977

它是重叠的，因为`<a>`标签的默认行为是适合文本。如果你想让它表现得像一个块，那么设置`display: block`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-25T04:28:52.590

填充不适用于内联元素。

参考：[内联元素和填充](http://www.maxdesign.com.au/articles/inline/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-25T04:22:08.727

`display`链接上属性的初始值为`display: inline`。这意味着它将尝试适应文本并接受水平边距和所有边的填充，这正是您的链接与文本重叠的原因。为了让它接受垂直边距（因此它不会重叠），您需要将其设置为，`display:block`或者`inline-block`如果您希望它仍然与文本对齐。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-25T04:25:53.187

**在a**中添加以下属性。

```
 position:relative;
  float:left; 
```

[工作演示](http://jsfiddle.net/rHCNb/2/)

**提示：**

1.  当您不关联任何其他属性时，请写`background-color`而不是简写。`background`
2.  如果你写`display:block`，那么块宽度将等于父宽度，所以总是`width`用`display`.

    ```
    a{
        padding: 30px;
        background-color: red;
        margin: 20px;
        border-radius: 12px;
        color: #fff;
        font: bold 12px Arial, Helvetica, sans-serif;
        text-decoration: none;
        display: block;
        width: 50px;
    } 
    ```

    [演示](http://jsfiddle.net/rHCNb/10/)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-25T04:34:48.927

这实际上在[W3C 规范](http://www.w3.org/TR/CSS2/visuren.html#inline-formatting)中进行了解释，尽管查找起来有点棘手。

> 这些框之间会考虑水平边距、边框和填充。

这默认意味着*不*尊重垂直边距/边框/填充。它接着说：

> 行框的高度由行高计算部分中给出的规则确定

如果您将 移动`<a>`到框中的内容中

```
We bring you the latest in entertainment <a href="#">View All</a> 
```

您可以看到这种效果： http: [//jsfiddle.net/rHCNb/7/](http://jsfiddle.net/rHCNb/7/) - 尊重水平填充，但不尊重垂直。它涵盖其他文本的事实与[z-indexing](http://www.w3.org/TR/CSS2/visuren.html#z-index)有关。

# objective-c - NSManagedObjectContext 的 mergeChangesFromContextDidSaveNotification: 是否发布 NSManagedObjectContextDidSaveNotification？

> ID：16206294
> 
> 赞同：1
> 
> 时间：2013-04-25T04:17:27.230
> 
> 标签：objective-c, core-data, nsmanagedobjectcontext

我有一堆 NSOperations 和他们自己的 NSManagedObjectContexts 对我的核心数据存储进行更改并保存并成功地将他们的更改放入主线程的 NSManagedObjectContext。我知道的就这么多。现在我希望在主上下文更新时通知前端 UIViewController。所以我...

```
- (void)viewDidAppear:(BOOL)animated
{
    [super viewDidAppear:animated];

    [[NSNotificationCenter defaultCenter] addObserver:self
                                             selector:@selector(refreshData:)
                                                 name:NSManagedObjectContextDidSaveNotification
                                               object:[NSManagedObject mainThreadManagedObjectContext]];
} 
```

但是，我认为在合并来自后台线程的更改后，主线程的 NSManagedObjectContext 不会发布它自己的任何通知。我试图在文档中找到 Apple 说我应该在告诉主线程合并更改或类似内容后发布自己的文档，但没有运气。对于我的 NSOperation 中的额外参考，我有...

```
+ (void)mergeChanges:(NSNotification *)notification
{
    NSManagedObjectContext *managedObjectContext = [self mainThreadManagedObjectContext];

    [managedObjectContext performSelectorOnMainThread:@selector(mergeChangesFromContextDidSaveNotification:)
                                           withObject:notification
                                        waitUntilDone:YES];
}

+ (NSManagedObjectContext *)adHocManagedObjectContext
{
    NSManagedObjectContext *adHocManagedObjectContext = [(AppDelegate *)[[UIApplication sharedApplication] delegate] adHocManagedObjectContext];

    [[NSNotificationCenter defaultCenter] addObserver:self
                                             selector:@selector(mergeChanges:)
                                                 name:NSManagedObjectContextDidSaveNotification
                                               object:adHocManagedObjectContext];

    return adHocManagedObjectContext;
} 
```

我应该期望从主线程的 NSManagedObjectContext 中听到有关它的保存信息，还是应该在 mergeChangesFromContextDidSaveNotification: 之后发布我自己的通知？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-25T04:31:35.083

`mergeChangesFromContextDidSaveNotification:` 不发布`NSManagedObjectContextDidSaveNotification`，因为`mergeChangesFromContextDidSaveNotification:`不告诉上下文保存。

也许你的前面`UIViewController`应该观察[`NSManagedObjectContextObjectsDidChangeNotification`](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/CoreDataFramework/Classes/NSManagedObjectContext_Class/NSManagedObjectContext.html#//apple_ref/doc/uid/TP30001182-BAJJHDFC)。

# ruby-on-rails - 如何让 Rails 提供对现有数据库的访问？

> ID：16206298
> 
> 赞同：0
> 
> 时间：2013-04-25T04:17:52.720
> 
> 标签：ruby-on-rails, database

我看过的所有 Rails 教程似乎都围绕着创建一个新数据库，然后使数据库的内容可以通过网页访问。输入以下命令后，您可以访问用户列表：

```
 rails generate scaffold User name:string email:string
    rake db:create:all
    rake db:migrate 
```

但是，如果您已经创建了包含数据的用户数据库怎么办？提供对用户数据库的访问的替代程序是什么？

更新 1：我正在使用 Postgres 数据库。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T04:37:25.850

**更新：**

要迁移所有数据，您必须使用外部工具，具体取决于您的数据库类型。

或者您可以将所有数据导出为 JSON，然后再导入，这可以相对容易地完成，因为 Ruby 可以轻松导入和导出 JSON。

您可以将当前数据直接导出为 JSON，方法是运行原生 SQL 查询，选择用户数据，然后将其转换为 JSON。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T06:08:32.340

你到底在找什么

如果你想使用你从 postgres 中选择的数据库，你需要在 database.yml 中指定它的适配器、数据库名、用户名和密码

如果您想将所有数据从一个数据库迁移到另一个数据库，您应该创建一个数据库转储并在另一个数据库中恢复该转储...

**现在转储步骤是**

这种转储方法背后的想法是使用 SQL 命令生成一个文本文件

> pg_dump 数据库名 > 输出文件

**恢复转储**

由 pg_dump 创建的文本文件旨在由 psql 程序读取。恢复转储的一般命令格式是

> psql 数据库名 < infile

你可以参考

[http://www.postgresql.org/docs/9.1/static/backup-dump.html](http://www.postgresql.org/docs/9.1/static/backup-dump.html)

[http://www.enterprisedb.com/resources-community/tutorials-quickstarts/all-platforms/how-dump-and-restore-postgres-plus-databases](http://www.enterprisedb.com/resources-community/tutorials-quickstarts/all-platforms/how-dump-and-restore-postgres-plus-databases)

# json - Json Serialized 绑定到剃刀视图模型类

> ID：16206299
> 
> 赞同：2
> 
> 时间：2013-04-25T04:17:57.220
> 
> 标签：json, asp.net-mvc-4, entity-framework-5, razor-2

嗨，我在一个名为 data 的变量中返回了以下 JSON。

```
{"tblMaster":{"intMasterID":14,"intMasterRegionID":1,"intMasterDistrictID":1,"intMasterEduLevelID":2,"txtMasterName":"Kureme","txtMasterPreciseLocation":"bulinga","txtMasterPostalAddress":"bulinga},"txtproperty1":"null"} 
```

我有一个使用 MasterBo 模型类生成的剃须刀页面。在那个 MasteBo 类中，我编写了以下代码

```
public class MasteBo 
{
    public tblMaster tblMaster { get; set; }
    public string  tproperty1 { get; set; }
} 
```

剃刀页面代码

```
<div id="tabs-1">
    <table>

        <tr>
            <td>Region:</td>
            <td style="width:255px">

                @Html.DropDownListFor(model => model.tblMaster.intMasterRegionID, (IEnumerable<SelectListItem>)ViewBag.intMasterRegionID, "--Select--", new { id = "tblMaster_intMasterRegionID",style="width:255px" })
        </td><td> @Html.ValidationMessageFor(model => model.tblMaster.intMasterRegionID)</td>
        </tr>
        <tr>
            <td>District:</td>
            <td style="width:255px">
                @Html.DropDownListFor(model => model.tblMaster.intMasterDistrictID, (IEnumerable<SelectListItem>)ViewBag.intMasterDistrictID, "--Select--")</td>
            <td>@Html.ValidationMessageFor(model => model.tblMaster.intMasterDistrictID)</td>
        </tr>

        <tr>
            <td>Education Level</td>
            <td style="width:255px">
                @Html.DropDownListFor(model => model.tblMaster.intMasterEduLevelID, (IEnumerable<SelectListItem>)ViewBag.MasterEducationalLevels, "--Select--")   </td>
            <td> @Html.ValidationMessageFor(model => model.tblMaster.intMasterEduLevelID)</td>
        </tr>
        <tr>
            <td>Master Name:</td>
            <td style="width:255px">
                    @Html.DropDownListFor(model => model.tblMaster.intMasterID, (IEnumerable<SelectListItem>)ViewBag.Masters, "--Select--")</td>
            <td> @Html.ValidationMessageFor(model => model.tblMaster.txtMasterName)</td>
        </tr>
        <tr>
            <td>Precise Location:</td>
            <td>
                @Html.EditorFor(model => model.tblMaster.txtMasterPreciseLocation)</td> 
            <td>@Html.ValidationMessageFor(model => model.tblMaster.txtMasterPreciseLocation)</td>
        </tr>
        <tr>
            <td>Postal Address:</td>
            <td>
                @Html.TextAreaFor(model => model.tblMaster.txtMasterPostalAddress) </td>
            <td>@Html.ValidationMessageFor(model => model.tblMaster.txtMasterPostalAddress)</td>

        </tr>

        <tr>
    </table>
</div> 
```

现在在完成 ajax 请求时，我需要如何将上述 Json 数据绑定到页面。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T06:17:39.997

您可以返回部分视图，而不是从控制器操作返回 JSON。因此，让我们将您显示的内容放在一个部分中：

`_MyPartial.cshtml`：

```
@model MasteBo
<table>
    <tr>
        <td>Region:</td>
        <td style="width:255px">
            @Html.DropDownListFor(model => model.tblMaster.intMasterRegionID, (IEnumerable<SelectListItem>)ViewBag.intMasterRegionID, "--Select--", new { id = "tblMaster_intMasterRegionID",style="width:255px" })
        </td>
        <td>@Html.ValidationMessageFor(model => model.tblMaster.intMasterRegionID)</td>
    </tr>
    <tr>
        <td>District:</td>
        <td style="width:255px">
            @Html.DropDownListFor(model => model.tblMaster.intMasterDistrictID, (IEnumerable<SelectListItem>)ViewBag.intMasterDistrictID, "--Select--")</td>
        <td>@Html.ValidationMessageFor(model => model.tblMaster.intMasterDistrictID)</td>
    </tr>
    <tr>
        <td>Education Level</td>
        <td style="width:255px">
            @Html.DropDownListFor(model => model.tblMaster.intMasterEduLevelID, (IEnumerable<SelectListItem>)ViewBag.MasterEducationalLevels, "--Select--")   </td>
        <td>@Html.ValidationMessageFor(model => model.tblMaster.intMasterEduLevelID)</td>
    </tr>
    <tr>
        <td>Master Name:</td>
        <td style="width:255px">
            @Html.DropDownListFor(model => model.tblMaster.intMasterID, (IEnumerable<SelectListItem>)ViewBag.Masters, "--Select--")</td>
        <td>@Html.ValidationMessageFor(model => model.tblMaster.txtMasterName)</td>
    </tr>
    <tr>
        <td>Precise Location:</td>
        <td>
            @Html.EditorFor(model => model.tblMaster.txtMasterPreciseLocation)</td> 
        <td>@Html.ValidationMessageFor(model => model.tblMaster.txtMasterPreciseLocation)</td>
    </tr>
    <tr>
        <td>Postal Address:</td>
        <td>
            @Html.TextAreaFor(model => model.tblMaster.txtMasterPostalAddress)</td>
        <td>@Html.ValidationMessageFor(model => model.tblMaster.txtMasterPostalAddress)</td>
    </tr>
</table> 
```

在您的主视图中，您将包括渲染这个部分：

```
<div id="tabs-1">
    @Html.Partial("_MyPartial")
</div> 
```

好的，现在您可以对某些控制器操作发出 AJAX 请求：

```
$.ajax({
    url: '/somecontroller/someaction',
    type: 'GET',
    cache: false,
    success: function(data) {
        $('#tabs-1').html(data);
    }
}); 
```

并且控制器操作将返回部分视图而不是 JSON 对象：

```
public ActionResult SomeAction()
{
    MasteBo model = ... fetch your model the same way you were doing in the action that was returning JSON
    return PartialView("_MyPartial", model);
} 
```

# php - 关于zend framework1中url方法的问题

> ID：16206309
> 
> 赞同：0
> 
> 时间：2013-04-25T04:19:10.523
> 
> 标签：php

```
class Zend_View_Helper_Url extends Zend_View_Helper_Abstract {
    /**
     * Generates an url given the name of a route.
     *
     * @access public
     *
     * @param  array $urlOptions Options passed to the assemble method of the Route object.
     * @param  mixed $name The name of a Route to use. If null it will use the current Route
     * @param  bool $reset Whether or not to reset the route defaults with those provided
     * @return string Url for the link href attribute.
     */
    public function url(array $urlOptions = array(), $name = null, $reset = false, $encode = true)
    {
        $router = Zend_Controller_Front::getInstance()->getRouter();
        return $router->assemble($urlOptions, $name, $reset, $encode);
    } } 
```

以上代码来自zend/view/helper/url.php。

问题：

在评论中，它是根据路由名称生成一个 url，zend 框架中的路由是什么？以下代码来自：index.phtml

```
<a href="<?php echo $this->url(array('controller'=>'index',
'action'=>'edit', 'id'=>$album->id));?>">Edit</a> 
```

那么你能解释一下 url() 方法在这里是如何工作的吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T04:53:21.690

Zend 有这样的 url 结构：

**主机名/控制器/动作/参数**

对于本地主机

本地主机/索引/索引/用户名/pramod

在哪里

```
Host- localhost
Controller - indexController
Action - index action in the indexcontroller
Parameter - username 
```

# types - 尝试将类型类和子类型视为集合和子集

> ID：16206310
> 
> 赞同：2
> 
> 时间：2013-04-25T04:19:14.933
> 
> 标签：types, typeclass, set, isabelle

这个问题与我之前关于 [type classes](https://stackoverflow.com/questions/15889860)的 SO question 有关。我问这个问题是为了建立一个关于语言环境的未来问题。我不认为类型类适用于我正在尝试做的事情，但是类型类的工作方式让我了解了我想要从语言环境中得到什么。

下面，当我使用大括号符号`{0,0}`时，它并不代表普通的 HOL 大括号，而是代表`0`空集。

## 一些文件，如果你想要的话

*   [A_i130424a.thy](http://github.com/gc44/arc/blob/master/1300/i130424a__cannot_use_typedef_for_semigroup/dist/A_i130424a.thy) - ASCII 友好的 THY。
*   [i130424a.thy](http://github.com/gc44/arc/blob/master/1300/i130424a__cannot_use_typedef_for_semigroup/dist/i130424a.thy) - 非 ASCII 友好的 THY。
*   [i130424a_DOC.pdf](http://gc44.github.io/viz/arc_1300/i130424a__cannot_use_typedef_for_semigroup/i130424a_DOC.pdf) - 显示行号的 PDF。
*   [MFZ_DOC.pdf](http://gc44.github.io/viz/arc_1300/i130424aMFZ/MFZ_DOC.pdf) - 与之相关的主要项目。
*   [此问题的](http://github.com/gc44/arc/tree/master/1300/i130424a__cannot_use_typedef_for_semigroup/dist)GitHub 文件夹和[MFZ GitHub](http://github.com/gc44/arc/tree/master/1300/i130424aMFZ/dist)文件夹。

## 题前谈话

我描述了我在 THY 中所做的事情（包括在底部），然后我基本上会问，“我可以在这里做些什么来解决这个问题，以便我可以使用类型类吗？”

与上面链接的 SO 问题一样，我试图与[Groups.thy](http://isabelle.in.tum.de/website-Isabelle2013/dist/library/HOL/Groups.html) `semigroup_add`联系起来。我所做的是使用创建我的类型的子类型`sT`，`typedef`然后尝试将一些基本函数常量和运算符提升到新类型中，例如我的联合运算符`geU`、我的空集`emS`、我的无序对集`paS`和我的成员资格谓词`inP`.

这不起作用，因为我试图将新类型视为子集。特别是，我的新类型应该表示 set `{ {0,0} }`，它旨在成为平凡半群的一部分，一个只有一个元素的半群。

问题是无序对公理声明如果集合`x`存在则集合`(paS x x)`存在，而联合公理声明如果集合`x`存在则集合`(geU x)`存在。因此，当我尝试将联合运算符提升到我的新类型中时，证明者神奇地知道我需要证明`(geU{0,0} = {0,0})`，这是不正确的，但`{0,0}`我的新类型中只有一个元素，所以它必须是那样的。

## 问题

我可以解决这个问题吗？在我看来，我将集合和子集与类型和子类型进行比较，我知道它们并不相同。调用我的主要类型`sT`和我的子类型`subT`。我需要的是所有使用 type 定义的运算符，`sT`例如，在被视为`sT => sT`type`subT`时为 type 工作。使用 type 定义的新运算符和常量，例如 type 的函数，它们会以某种方式工作，就像神奇地应该与这些东西一起工作。 `subT``sT``subT``subT => subT`

## 发表问题谈话

在这里，我通过 THY 中的行号指出发生了什么。行号将显示在 PDF 和 GitHub 站点上。

在第 21 到 71 行中有四个部分，我将相关的常量、符号和公理组合在一起。

1.  类型`sT`、隶属谓词`inP/PIn`和等式公理（21 到 33）。
2.  空集`emS/SEm`和空集公理（37 到 45）。
3.  无序对常数`paS/SPa`和无序对公理（49 到 58）。
4.  联合常数`geU/UGe`和联合公理（62 到 71）。

从第 75 行开始，我创建了一个新类型，`typedef`然后将其实例化为 type class `semigroup_add`。

在我尝试提升我的无序对函数`{.x,y.}`（第 108 行）和我的联合函数`(geU x)`（第 114 行）之前，没有任何问题。

在 Isar 命令下方，我显示的输出告诉我我需要证明某些集合等于`{0,0}`，这是无法证明的事实。

这是 ASCII 友好的源代码，我从上面链接的 THY 中删除了一些注释和行：

```
theory A_i130424a
imports Complex_Main 
begin  

--"AXIOM (sT type, inP predicate, and the equality axiom)"
typedecl sT ("sT")

consts PIn :: "sT => sT => bool"

notation
  PIn  ("in'_P") and
  PIn  (infix "inP" 51) and
  PIn  (infix "inP" 51)

axiomatization where
  Ax_x: "(! x. x inP r <-> x inP s) <-> (r = s)"
--"[END]"

--"AXIOM (emS and the empty set axiom)"
consts SEm :: "sT" ("emS")

notation (input)
  SEm ("emS")

axiomatization where
  Ax_em [simp]: "(x niP emS)"
--"[END]"

--"AXIOM (paS and the axiom of unordered pairs)"
consts SPa :: "sT => sT => sT"

notation
  SPa ("paS") and
  SPa ("({.(_),(_).})")

axiomatization  where
  Ax_pa [simp]: "(x inP {.r,s.}) <-> (x = r | x = s)"
--"[END]"

--"AXIOM (geU and the axiom of unions)"
consts UGe :: "sT => sT"

notation
  UGe ("geU") and
  UGe ("geU")

axiomatization where
  Ax_un: "x inP geU r = (? u. x inP u & u inP r)"
--"[END]"

--"EXAMPLE (A typedef type cannot be treated as a set of type sT)"
typedef tdLift = "{x::sT. x = {.emS,emS.}}"
  by(simp)

setup_lifting type_definition_tdLift

instantiation tdLift :: semigroup_add
begin
  lift_definition plus_tdLift:: "tdLift => tdLift => tdLift"
    is "% x y. {.emS,emS.}" by(simp)
  instance
  proof
    fix n m q :: tdLift
    show "(n + m) + q = n + (m + q)"
    by(transfer,simp)
  qed
end

theorem
  "((n::tdLift) + m) + q = n + (m + q)"
  by(transfer,simp)

class tdClass =
  fixes emSc :: "'a"                 ("emSk")
  fixes inPc :: "'a => 'a => bool"   (infix "∈k" 51)
  fixes paSc :: "'a => 'a => 'a"     ("({.(_),(_).}k)")
  fixes geUc :: "'a => 'a"           ("⋃k")

instantiation tdLift :: tdClass
begin
  lift_definition inPc_tdLift:: "tdLift => tdLift => bool"
    is "% x y. x inP y" 
    by(simp)
  lift_definition paSc_tdLift:: "tdLift => tdLift => tdLift"
    is "% x y. {.x,y.}"
    --"OUTPUT: 1\. (!! (sT1 sT2). ([|(sT1 = emS); (sT2 = emS)|] ==> ({.sT1,sT2.} = emS)))"
    apply(auto)
    --"OUTPUT: 1\. ({.emS.} = emS)"
    oops
  lift_definition geUc_tdLift:: "tdLift => tdLift"
    is "% x. geU x"
    --"OUTPUT: 1\. (!! sT. ((sT = {.emS,emS.}) ==> ((geU  sT) = {.emS,emS.})))"
    apply(auto)
    --"OUTPUT: 1\. ((geU  {.emS,emS.}) = {.emS,emS.})"
    oops  
  lift_definition emSc_tdLift:: "tdLift"
    is "emS" 
    --"OUTPUT: 
       exception THM 1 raised (line 333 of drule.ML):
       RSN: no unifiers
       (?t = ?t) [name HOL.refl]
       ((emS = {.emS,emS.}) ==> (Lifting.invariant (% x. (x = {.emS,emS.})) emS emS))"
    oops
  instance ..
end
--"[END]"

end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-26T07:13:34.097

我部分回答了我的问题，部分原因是当我询问有关 Isar 亚型的问题时参考这个。从表面上看，我在这里的问题和答案都与亚型有关。

至于我是否可以解决我描述的类型类的问题，我不知道。

（更新：我使用类型类的可能解决方案将是想法的组合，解决方案的一部分是类型强制，正如我的 SO 问题的答案中所解释的那样：[什么是 Isabelle/HOL 子类型？什么 Isar 命令产生子类型?](https://stackoverflow.com/questions/16231071)

如果在 Groups.thy 中使用语言环境是我的选择，那么这些语言环境的相应类型类可能也会起作用。我可以实例化一个类，例如`semigroup_add`，`lift_definition`用来定义`plus`运算符，甚至将返回 a 的运算符提升`bool`到类型中。无论如何，无法提升到新类型的运算符在新类型的上下文中有些荒谬，其中类型强制可以发挥作用以使它们对诸如集合并集之类的事情有意义。[魔鬼在细节中](http://en.wikipedia.org/wiki/The_Devil_is_in_the_details)。）

根据我所说的我想要的类型和子类型，我发现我确实得到了一种形式，`typedef`形式是函数`Rep`和`Abs`，我一直在使用它。

如[isar-ref.pdf pg 中所述。242](http://isabelle.in.tum.de/website-Isabelle2013/dist/Isabelle2013/doc/isar-ref.pdf) ,

> 对于 typedef t = A，新引入的类型 t 伴随着一对态射，以将其与旧类型上的表示集相关联。默认情况下，从 type 到 set 的注入称为 Rep t 及其逆 Abs t...

下面，我在一个小示例中使用`Rep`和`Abs`来演示我可以将我的主要类型 ,`sT`与我定义的新类型相关联`typedef`，即 type `tsA`。

我不认为类型类是最重要的。我正在探索的主要有两件事，

1.  我是否可以与 Groups.thy 的语言环境联系起来，
2.  更一般地说，这是关于使用类型来限制我的半组、组等的二元运算符的域和共域。

例如，在 Groups.thy 中，有

```
locale semigroup =
  fixes f :: "'a => 'a => 'a" (infixl "*" 70)
  assumes assoc [ac_simps]: "a * b * c = a * (b * c)" 
```

如果我不使用子类型，我想我将不得不做这样的事情，我的在哪里`inP`（`\<in>`我只是从语言环境开始）：

```
locale sgA =
  fixes G :: sT
  fixes f :: "sT => sT => sT" (infixl "*" 70)
  assumes closed:
    "(a inP G) & (b inP G) --> (a * b) inP G"
  assumes assoc:
    "(a inP G) & (b inP G) & (c inP G) --> (a * b) * c = a * (b * c)" 
```

能够使用的部分答案`Groups.semigroup`可能是使用`Rep`and `Abs`; 我在 type`tsA => tsA => tsA`上使用 type的运算符`tsA`，但是当 type 的元素`tsA`需要被视为 type 的元素时`sT`，我使用`Rep`它们将它们映射到 type `sT`。

我还没有考虑到所有这些，也没有进行足够的实验来知道什么是最好的，但我给出了这个部分答案，试图解释更多我的想法。可能还有其他人可以添加一些好的信息。

子类型方法可能并不完全有利，如下`theorem`示例代码中的最后两个命令所示。含义的左侧是必要的，因为我没有利用类型的力量，类似于`closed`和`assoc`上面的`locale sgA`. 然而，尽管如此，这对我的`simp`规则来说没有问题，而正在使用`Rep`和`Abs`需要`metis`证明的定理，它可能需要大量丑陋的开销才能让事情更顺利地工作。

下面我包含文件[A_iSemigroup_xp.thy](http://github.com/gc44/arc/tree/master/1300/i130424aMFZ/dist/A_iSemigroup_xp.thy)。这是[iSemigroup_xp.thy](http://github.com/gc44/arc/tree/master/1300/i130424aMFZ/dist/iSemigroup_xp.thy)的 ASCII 版本。这些需要导入[MFZ.thy](http://github.com/gc44/arc/tree/master/1300/i130424aMFZ/dist/MFZ.thy)，这 3 个文件位于此[GitHub 文件夹](http://github.com/gc44/arc/tree/master/1300/i130424aMFZ/dist)中。

```
theory A_iSemigroup_xp
imports MFZ
begin
--"[END]"

--"EXAMPLE (Possible subtype for a trivial semigroup)"
typedef tsA = "{x::sT. x = emS}"
  by(simp)

theorem "(Rep_tsA x) inP {.Rep_tsA x.}"
  by(metis 
    SSi_exists)

theorem "! x::tsA. x = (Abs_tsA emS)"
  by(metis (lifting, full_types) 
    Abs_tsA_cases 
    mem_Collect_eq)

theorem "! x. x inP {.emS.} --> x = emS"
  by(simp)

theorem "! x. x inP {.z inP {.emS.} ¦ z = emS.} --> x = emS"
  by(simp)
--"[END]"

--"ISAR (Theory end)"
end 
```

# jsp - 创建自定义标签时使用 JSTL 核心库失败

> ID：16206318
> 
> 赞同：2
> 
> 时间：2013-04-25T04:20:00.957
> 
> 标签：jsp, jstl, taglib

所以我试图导入两个标签库：

```
<%@ taglib uri="MyCustomTagLib" prefix="myLib" %>
<%@ taglib uri="http://java.sun.com/jsp/jstl/core" prefix="c" %> 
```

但是，我只能使用其中一个，否则会出现错误（我缩短了它，希望没关系）：

```
WARNING: ApplicationDispatcher[/CSE336_A5] PWC1231: Servlet.service() for servlet jsp threw exception
java.lang.NullPointerException
    at org.apache.jasper.compiler.TagLibraryInfoImpl.toString(TagLibraryInfoImpl.java:129)
    at java.lang.String.valueOf(String.java:2826)
    at java.lang.StringBuilder.append(StringBuilder.java:115)
    at java.util.AbstractMap.toString(AbstractMap.java:490)
    at org.apache.taglibs.standard.tag.common.core.OutSupport.out(OutSupport.java:211)
    at org.apache.taglibs.standard.tag.common.core.OutSupport.doStartTag(OutSupport.java:132)

WARNING: StandardWrapperValve[FormOutputController]: PWC1406: Servlet.service() for servlet FormOutputController threw exception
java.lang.NullPointerException
    at org.apache.jasper.compiler.TagLibraryInfoImpl.toString(TagLibraryInfoImpl.java:129)
    at java.lang.String.valueOf(String.java:2826)
    at java.lang.StringBuilder.append(StringBuilder.java:115)
    at java.util.AbstractMap.toString(AbstractMap.java:490)
    at org.apache.taglibs.standard.tag.common.core.OutSupport.out(OutSupport.java:211)
    at org.apache.taglibs.standard.tag.common.core.OutSupport.doStartTag(OutSupport.java:132)
    at org.apache.jsp.form_005fdebug_jsp._jspx_meth_c_out_1(form_005fdebug_jsp.java from :266)
    at org.apache.jsp.form_005fdebug_jsp._jspx_meth_c_forEach_0(form_005fdebug_jsp.java from :214)
    at org.apache.jsp.form_005fdebug_jsp._jspService(form_005fdebug_jsp.java from :99)
    at org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:111) 
```

**如果我只是将其中一个注释掉，我不会收到任何错误，并且该库可以正常工作。如果我同时使用两者，我会收到此错误。**

谢谢

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2015-10-07T06:37:42.437

将您的 taglib uri 更改为类似 uri="http://www.example.com/custom_tag_lib"

还更改您的自定义 tld 属性，如下所示

custom_tag_lib [http://www.example.com/custom_tag_lib](http://www.example.com/custom_tag_lib)

# wpf - 尝试获取类型实例时发生 Unity 激活错误

> ID：16206321
> 
> 赞同：1
> 
> 时间：2013-04-25T04:20:14.820
> 
> 标签：wpf, silverlight, prism, unity-container

我正在使用带有 Unity Extensions 和 MVVM 模式的 Prism 4。

```
public class Bootstrapper : UnityBootstrapper {
    protected override void InitializeShell() {
        Application.Current.RootVisual = (UIElement) Shell;
    }

    protected override DependencyObject CreateShell()
    {
        return ServiceLocator.Current.GetInstance<Shell>();
    }
} 
```

ServiceLocator.Current.GetInstance() 抛出以下异常：

> 尝试获取 Shell 类型的实例时发生激活错误，密钥“”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T10:20:32.303

您可能在 shell 构造函数中有错误。

例如，如果您在 Shell 构造函数中有参数，请不要忘记在Bootstrapper的[ConfigureContainer中声明：](http://msdn.microsoft.com/en-us/library/microsoft.practices.prism.unityextensions.unitybootstrapper.configurecontainer%28v=pandp.38%29.aspx)

**引导程序.cs**

```
...
protected override void ConfigureContainer()
{
  base.ConfigureContainer();
  this.Container.RegisterType<IMyService, MyService>(new ContainerControlledLifetimeManager());
} 
```

**壳牌.cs**

```
...
public Shell(IMyService container)
{
    ...
} 
```

您可以阅读此文档： http: [//msdn.microsoft.com/en-us/library/gg430868 (v=pandp.40).aspx](http://msdn.microsoft.com/en-us/library/gg430868(v=pandp.40).aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-03T13:47:27.333

我有两个单独的建议：

1)确保shell.xaml的name属性不为空

2）如果 1 不能像这样改变 InitializeShell：

```
 IShellView shell = new Shell();
 shell.ShowView();
 return shell as DependencyObject; 
```

我希望这些能有所帮助。

# javascript - 页面刷新后如何让JS变量保留值？

> ID：16206322
> 
> 赞同：140
> 
> 时间：2013-04-25T04:20:23.577
> 
> 标签：javascript, html

是否可以永久更改 javascript 变量？如，如果我设置变量 X 并使其等于 1。然后单击按钮将该变量更改为 2。如何使该变量在页面刷新时保持为 2？

* * *

## 回答 #1

> 赞同：289
> 
> 时间：2013-04-25T04:22:39.473

这可以通过`window.localStorage`or来实现`window.sessionStorage`。不同之处在于，`sessionStorage`只要浏览器保持打开状态，它就会持续存在，在浏览`localStorage`器重新启动之后仍然存在。持久性适用于*整个网站*，而不仅仅是其中的一个页面。

当您需要设置应在下一页中反映的变量时，请使用：

```
var someVarName = "value";
localStorage.setItem("someVarKey", someVarName); 
```

在任何页面中（比如页面加载时），得到它：

```
var someVarName = localStorage.getItem("someVarKey"); 
```

`.getItem()``null`如果没有存储值或存储的值将返回。

请注意，此存储中**只能存储字符串值**，但这可以通过使用`JSON.stringify`and来克服`JSON.parse`。从技术上讲，无论何时调用`.setItem()`，它都会调用`.toString()`该值并存储它。

`localStorage`MDN 的 DOM 存储指南（链接如下）有变通方法/polyfill，如果不可用，最终会退回到 cookie 之类的东西。

使用现有的或创建自己的迷你库并不是一个坏主意，它抽象了保存任何数据类型（如对象文字、数组等）的能力。

* * *

**参考：**

*   浏览器`Storage`- [https://developer.mozilla.org/en-US/docs/Web/Guide/API/DOM/Storage](https://developer.mozilla.org/en-US/docs/Web/Guide/API/DOM/Storage)
*   `localStorage`- [https://developer.mozilla.org/en-US/docs/DOM/Storage#localStorage](https://developer.mozilla.org/en-US/docs/DOM/Storage#localStorage)
*   `JSON`- [https://developer.mozilla.org/en-US/docs/JSON](https://developer.mozilla.org/en-US/docs/JSON)
*   浏览器存储兼容性 - [http://caniuse.com/namevalue-storage](http://caniuse.com/namevalue-storage)
*   存储对象 -[在 HTML5 localStorage 中存储对象](https://stackoverflow.com/questions/2010892/storing-objects-in-html5-localstorage)

* * *

## 回答 #2

> 赞同：31
> 
> 时间：2013-04-25T04:40:44.437

除了 cookie 和 之外`localStorage`，至少还有一个地方可以存储“半永久”客户端数据：`window.name`. 您分配给的任何字符串值都`window.name`将保留在那里，直到窗口关闭。

要测试它，只需打开控制台并输入`window.name = "foo"`，然后刷新页面并输入`window.name`；它应该以`foo`.

这有点小技巧，但是如果您不希望在每次请求时都将填充了不必要数据的 cookie 发送到服务器，并且如果您`localStorage`出于任何原因（旧客户端）都无法使用，则可以选择考虑。

`window.name`还有另一个有趣的特性：它对从其他域提供服务的窗口可见；它不像几乎所有其他财产一样受同源政策的约束`window`。因此，除了在用户导航或刷新页面时在其中存储“半持久”数据外，您还可以将其用于无 CORS 的跨域通信。

请注意，`window.name`它只能存储字符串，但由于 的广泛可用性`JSON`，即使对于复杂的数据，这也不是什么大问题。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2013-04-25T04:22:19.953

您将不得不使用 cookie 来存储页面刷新时的值。您可以使用许多基于 javascript 的 cookie 库中的任何一种来简化 cookie 访问，例如[这个](https://code.google.com/p/cookies/)

如果您只想支持 html5，那么您可以考虑像[localStorage](http://www.w3.org/TR/webstorage/#the-localstorage-attribute) / [sessionStorage这样的](http://www.w3.org/TR/webstorage/#the-sessionstorage-attribute)[Storage](http://www.w3.org/TR/webstorage/) api

例如：使用[localStorage](https://developer.mozilla.org/en-US/docs/DOM/Storage#localStorage)和[cookies 库](https://code.google.com/p/cookies/)

```
var mode = getStoredValue('myPageMode');

function buttonClick(mode) {
    mode = mode;
    storeValue('myPageMode', mode);
}

function storeValue(key, value) {
    if (localStorage) {
        localStorage.setItem(key, value);
    } else {
        $.cookies.set(key, value);
    }
}

function getStoredValue(key) {
    if (localStorage) {
        return localStorage.getItem(key);
    } else {
        return $.cookies.get(key);
    }
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-04-25T04:23:05.097

您可以通过在客户端存储 cookie 来做到这一点。

# xml - 带有 NodeJS 应用程序的 XML 或 JSON

> ID：16206323
> 
> 赞同：0
> 
> 时间：2013-04-25T04:20:33.617
> 
> 标签：xml, json, node.js

我正在使用 nodejs 创建一个中介类型的应用程序。它处理（转换、使用 xpath 搜索等）XML。应用程序中有多个处理单元，XML 消息将在这些单元之间传送数据。我想我有两个选择

*   使用 XML，因为它是它们在每个单元中的一个过程
*   将 XML 转换为 JSON 并传递 JSON 而不是 XML

我想知道第二个选项是否可行（可以执行与 xml 类似的任务），如果可以，那么哪个更适合（性能等）与 nodejs 应用程序一起使用。我是 nodejs 的新手，我希望这不是一个愚蠢的问题。

提前感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T06:20:26.133

这取决于 XML 的内容。

XML 和 Json 之间没有完整的映射（最明显的是元素属性和实体引用），因此如果您的 XML 中有任何东西不能移植到 Json，您将无法做到这一点（至少在没有一些修补的情况下不会）。

但是在大多数用例中，将 xml 转换为 json 非常容易，出现的问题是为什么要这样做？最明显的原因是 Json 在节点中更易于使用（您可以直接访问属性等...），因此如果您对对象进行大量工作，那么它可能是值得的。
如果对象很大，那么 xml 和 json 之间的转换可能不值得（而且还有 xml 的流式解析器，也就是说，您可以只使用 xml 对象的一部分而不解析所有对象，Json 没有非常支持此类）。

# ios - 寻找适用于 iPad 的开源 PDF 框架

> ID：16206325
> 
> 赞同：0
> 
> 时间：2013-04-25T04:20:47.687
> 
> 标签：ios, ipad, pdf, page-curl

我的客户想要一个具有卷页效果的 pdf 阅读器。此外，他还希望它可以缩放。我尝试使用，`UIPageViewController`但它不支持缩放（据我所知）。我也尝试使用两者`UIScrollViewController`并`UIPageViewController`在这两者之间切换，但它不是那么顺利。

有谁知道任何符合我要求的免费框架？
我不想要任何内容​​搜索、突出显示或任何内容，只需要阅读器和缩略图视图。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-25T04:28:46.683

看看这个：

[https://www.cocoacontrols.com/controls/pdf-reader-core](https://www.cocoacontrols.com/controls/pdf-reader-core)

[https://www.cocoacontrols.com/controls/pdfreportkit](https://www.cocoacontrols.com/controls/pdfreportkit)

希望这可以帮助...

# javascript - 将 JQuery 动画与循环内的计算同步

> ID：16206326
> 
> 赞同：0
> 
> 时间：2013-04-25T04:20:52.697
> 
> 标签：javascript, jquery, loops, animation

我正在尝试制作一个在运行程序时运行动画的脚本，并且我希望两者都同步。（在 JSFiddle 内部更清晰：http: [//jsfiddle.net/Vhutama/Y8zNQ/5/](http://jsfiddle.net/Vhutama/Y8zNQ/5/)）。我正在使用 JQuery 和 JQueryUI 库。

代码是：

**Javascript**

```
$(function() {
for (var i = 0; i < 5; i++) {
    console.log("log " + i);
    $("#textplaceholder").append(i + " ");
    $("#myDiv>div:eq(" + i + ")").delay( 1000 * i).effect("highlight", {color: 'lightblue'}, 1000);
}
}); 
```

**HTML**

```
 <body>
         <div id='myDiv'>
           <div class='ui-state-default'>Lorem</div>
           <div class='ui-state-default'>Ipsum</div>
           <div class='ui-state-default'>Dolor</div>
           <div class='ui-state-default'>Sit</div>
           <div class='ui-state-default'>Amet</div>
         </div>
         <div id='textplaceholder'>Looping for : </div>
       </body> 
```

我创建了一个循环来运行用于计算的代码——在这个例子中只有一个**console.log()**和一个**.append()** ——以及动画代码。问题是，我希望两者在每次迭代中都同步，例如，当我的动画位于第三个索引时，代码不应记录/附加超过 3 个。有什么建议吗？我在这里尝试了其他答案的递归解决方案，但不知何故它不适用于**.animate()**和**.effect**，尽管我是 JQuery 的初学者，所以也许我可能是错的。

在搜索时，我发现了[http://api.jquery.com/promise/](http://api.jquery.com/promise/)。这个功能能解决我的问题吗？如果是这样，任何人都可以提供一个快速的解释吗？

PS我不是以英语为母语的人，如果我的措辞错误或解释不好，请见谅。

谢谢你的时间！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T05:51:54.913

您应该使用 setTimeout 来同时执行所有操作，然后进行同步，而不是使用延迟。

[http://jsfiddle.net/FJWL4/](http://jsfiddle.net/FJWL4/)

```
$(function() {
    var j = 0;
    for (var i = 0; i < 5; i++) {
        setTimeout(function() {
            console.log("log " + j);
            $("#textplaceholder").append(j + " ");
            $("#myDiv>div:eq(" + j + ")").effect("highlight", {color: 'lightblue'}, 1000);
            j++;
        }, 1000 * i);
    }
}); 
```

# apache - SVN认证访问与webdav

> ID：16206328
> 
> 赞同：0
> 
> 时间：2013-04-25T04:21:13.417
> 
> 标签：apache, svn, authentication, authorization

我正在使用带有 mod dav svn 的 svn 服务器。现在我创建了对存储库中目录的 auth 用户访问权限。当我尝试限制对某些文件夹的访问时，我卡住了。例如：我在名为 Adhown 的存储库中有一个项目，在项目内部有三个文件夹，分别称为**stable**、**persistent**和**testing**。

我如何限制那些用户不能提交到文件夹**stable**但能够使用 AuthzSVNAccess 提交到另一个文件夹。

我已经设置了文件，但我不能这样设置。有人可以告诉我正确的配置吗？这是我的配置：

```
[groups]
developer = user1, user2, user3
guest = user4, user5, user6

[/]
* = r

[/path/to/my/folder]
developer = rw 
```

谢谢你的提前:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T07:38:58.053

[来自（已经建议的） SVN Book](http://svnbook.red-bean.com/nightly/en/svn.serverconfig.pathbasedauthz.html)的示例

> 这是一个简单的示例，展示了一个访问配置，它授予 Sally 读访问权限，以及对 Harry 的读/写访问权限，用于存储库 calc 中的路径 /branches/calc/bug-142（及其所有子项）：

```
[calc:/branches/calc/bug-142]
harry = rw
sally = r 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T09:58:36.400

问题已经解决了，我像这样更改 authz 文件：

```
[groups]
developer = user1, user2, user3
guest = user4, user5, user6

[/]
developer = r
guest = r

[/path/to/my/folder]
developer = rw 
```

当我使用通配符 (*) 时不起作用。

谢谢大家

# java - 从数组中计算单个 int 的更有效方法？

> ID：16206331
> 
> 赞同：0
> 
> 时间：2013-04-25T04:21:20.120
> 
> 标签：java, performance

我试图从我的 Java Othello 程序中挤出所有内容，并且有一点需要计算给定数字出现的实例数。例如 array[]{1,1,2,1,0,1} 将 count(1) 返回 4。下面是我通过计算所有数字来快速进行的尝试，但这比较慢：

```
public void count(int color) { 
    byte count[] = new byte[3];

    for (byte i = 0; i < 64; i++)
        ++count[state[i]];

    return count[color];
} 
```

到目前为止，这是我测试过的最有效的代码：

```
public void count(int color) {  
    byte count = 0;

    for (byte i = 0; i < 64; i++) 
        if (this.get(i) == color)
            count++;

    return count;
} 
```

有没有人认为他们可以从中挤出一些更快的速度？我只需要指定数量的计数，仅此而已。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T04:27:00.193

尝试进行计数`int`而不是`byte`某些体系结构在处理单个时遇到问题`bytes`，因此内存中的字节较小但进行计算时会出现问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-25T04:28:34.290

使用`int`，而不是`byte`- 在内部，Java 将字节转换为 int，然后将其递增，然后将其转换回字节；使用 int 消除了类型转换的需要。

您也可以尝试使用[AtomicInteger](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/atomic/AtomicInteger.html)，它的`getAndIncrement`方法可能比`++`运算符更快。

你也可以展开你的循环；这将减少`i < 64`评估的次数。尝试使用 AtomicInteger `i`，并使用`getAndIncrement`而不是`++`

```
for(int i = 0; i < 64;) {
    if(this.get(i++) == color) ...
    if(this.get(i++) == color) ...
    if(this.get(i++) == color) ...
    if(this.get(i++) == color) ...
} 
```

将 for 循环更改为 do-while 循环可能会稍微快一些 - for 循环有条件跳转和无条件跳转，但 do-while 循环只有条件跳转。

您可以并行执行此操作（thread1 计算元素 0-15，thread2 计算元素 16-31 等），但创建线程的成本可能不值得。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-25T04:53:19.467

1) 版本 2 中的 this.get(i) 似乎很可疑，如果我们正在处理数组，array[i] 应该更有效。

2）我会替换

```
byte count = 0;
for (byte i = 0; i < 64; i++) 
... 
```

和

```
int count = 0;
for (int i = 0; i < 64; i++) 
... 
```

否则 Java 需要将字节操作数提升为 int 以进行算术运算，然后将结果截断为字节。

3) 使用[http://code.google.com/p/caliper/](http://code.google.com/p/caliper/)获得良好的基准

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-25T04:43:46.730

您可以为此目的使用集合。但是您的数组应该是 Integer 类型，因为集合不支持原始类型。

```
public void count(int color) {  
   List<Integer> asList = Arrays.asList(your_Array);  
   return  Collections.frequency(asList,color);    
} 
```

# php - 如何将多个表单值发布到单个 mysql 数据库列

> ID：16206339
> 
> 赞同：0
> 
> 时间：2013-04-25T04:22:23.857
> 
> 标签：php, mysql, row, sql-insert

我需要将 street_num 和 street_name 中的文本框值发布到数据库中的一列和一行，并将城市、州、zip、zip4 值发布到数据库中的另一列但同一行。数据库名和表名是“mlsentries”。对此的任何帮助将不胜感激。

```
<table width="100%" border="0" cellpadding="0" cellspacing="0">
                      <tr>
                        <td width="50%" class="table-align-right">Street Number :</td>
                        <td width="50%"><input name="street_num" type="text" class="textbox" id="street_num" /></td>
                      </tr>
                      <tr>
                        <td width="50%" class="table-align-right">Street Name :</td>
                        <td width="50%"><input name="street_name" type="text" class="textbox" id="street_name" /></td>
                      </tr>
                      <tr>
                        <td width="50%" class="table-align-right">City :</td>
                        <td width="50%"><input name="city" type="text" class="textbox" id="city" /></td>
                      </tr>
                      <tr>
                        <td width="50%" class="table-align-right">State :</td>
                        <td width="50%"><input name="state" type="text" class="textbox" id="state" /></td>
                      </tr>
                      <tr>
                        <td width="50%" class="table-align-right">Zip :</td>
                        <td width="50%"><input name="zip" type="text" class="textbox" id="zip" />
                          + 4
                          <input name="zip4" type="text" class="textbox" id="zip4" size="10" maxlength="4" /></td>
                      </tr>
                      <tr>
                        <td width="50%" class="table-align-right">&nbsp;</td>
                        <td width="50%">&nbsp;</td>
                      </tr>
                    </table> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T05:28:28.057

使用 PDO，这将起作用：

```
$sql = 'INSERT INTO mlsentries SET field1 = ?, field2 = ?';
$fields = array(
$_POST['street_num'] . ' ' . $_POST['street_name'],
$_POST['city'] . ", " . $_POST['state'] . "  " . $_POST['zip'] . "-" . $_POST['zip4'],
);
$stmt = $pdo->prepare($sql);
$stmt->execute($fields); 
```

并消除了 SQL 注入和输入数据中的撇号问题。

# css - 如何在 xsl 文件中应用 URL 和 Quote 标签的 css 样式？

> ID：16206350
> 
> 赞同：0
> 
> 时间：2013-04-25T04:23:35.503
> 
> 标签：css, xml, xslt

```
<news><story><p>Located online at <url>www.guessthatgroove.com</url>, the service is
  entirely free. He explained that the business model is based upon
  commission fees from linked sites such as Amazon.com and iTunes, which
  offer game players an option to purchase CDs and individual music tracks
  that they encounter throughout the game. It's too early to tell whether
  he has hit on another social phenomonon along the lines of Tall
  Tales. Regarding the potential success of the online game, he
  replied, <quote>It was a lot of fun to create and I enjoy playing it
  myself, so in some ways I already consider it a success</quote>.</p> 
```

xsl:

```
#p
{
width:450px;
text-align:left;
margin-bottom:8px;
color:black;
font-family:Verdana, Arial;
font-size:10pt
}
url
{
font-weight:bold
}
quote
{
font-style:italic
}
</style>
</head>
<body>
    <div id="p">
        <xsl:value-of select="news/story/p" />
    </div> 
```

我的问题是如何在 xsl 文件中应用 URL 和 Quote 标签的 css 样式？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T05:56:59.537

而不是 <xsl:value-of select="news/story/p" /> 使用 <xsl:apply-templates/> 并为 URL 和引用创建模板。

# c# - 如何读取文本文件直到出现特殊字符星号

> ID：16206353
> 
> 赞同：-1
> 
> 时间：2013-04-25T04:24:06.617
> 
> 标签：c#, asp.net, filestream

我试图在 asp.net 中读取文件不是特定格式的文本文件，所以我只想读取该文件直到特殊字符（*）并跳过其余部分。

一般来说，它的格式是

```
 00000 AFCX      TY88YYY
 12366 FTTT      TY88YYY
 ** File Description
 // This is so and so Description
 ** End of Description
 12345 TYUI      TY88YYY
 45677 RERY      TY88YYY 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T04:35:21.137

```
 string file = "TextFile1.txt";
    List<string> lines = new List<string>();

    using (StreamReader r = new StreamReader(f))
    {
        string line;
        while ((line = r.ReadLine()) != null && !line.StartsWith("*"))
        {
            lines.Add(line);
        }
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T07:34:33.127

这将为您提供所有行的列表，但以 开头的行除外`*`：

```
string[] yourFileContents = File.ReadAllLines(filePath);
List<string> contentsWithoutAsterix = 
    yourFileContents.Where(line => line.First() != '*').ToList(); 
```

**PS（编辑）：**

如果您只想要行*直到第一次*出现`*`，请改为执行以下操作：

```
List<string> contentsWithoutAsterix =
         yourFileContents.TakeWhile(line => line.First() != '*').ToList(); 
```

# memory-management - 如何通过 request_mem_region 判断哪个模块请求了内存？

> ID：16206359
> 
> 赞同：1
> 
> 时间：2013-04-25T04:24:36.853
> 
> 标签：memory-management, linux-kernel, kernel-module

我正在编写一个需要访问内存映射 IO 的内核驱动程序。

我的调用`request_mem_region`失败，表明另一个模块（已加载或内置）已请求有问题的内存。

如何确定是哪个驱动程序执行了此操作？

看到将字符串标识符传递给`request_mem_region`函数，我认为这是可能的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T06:04:03.867

[`/proc/iomem`](http://www.centos.org/docs/5/html/5.1/Deployment_Guide/s2-proc-iomem.html)是一个文件，显示每个物理设备的系统内存的当前映射。

# ruby-on-rails - Rails -v 给出错误

> ID：16206363
> 
> 赞同：0
> 
> 时间：2013-04-25T04:25:05.733
> 
> 标签：ruby-on-rails

```
gem list 
```

说我有

导轨（2.3.5、2.3.2）

但是当我给

```
rails -v 
```

它吐出一个错误

```
/usr/local/lib/site_ruby/1.8/rubygems.rb:578:in `report_activate_error': Could not find RubyGem test-spec (>= 0) (Gem::LoadError)
    from /usr/local/lib/site_ruby/1.8/rubygems.rb:134:in `activate'
    from /usr/local/lib/site_ruby/1.8/rubygems.rb:158:in `activate'
    from /usr/local/lib/site_ruby/1.8/rubygems.rb:157:in `each'
    from /usr/local/lib/site_ruby/1.8/rubygems.rb:157:in `activate'
    from /usr/local/lib/site_ruby/1.8/rubygems.rb:158:in `activate'
    from /usr/local/lib/site_ruby/1.8/rubygems.rb:157:in `each'
    from /usr/local/lib/site_ruby/1.8/rubygems.rb:157:in `activate'
    from /usr/local/lib/site_ruby/1.8/rubygems.rb:158:in `activate'
    from /usr/local/lib/site_ruby/1.8/rubygems.rb:157:in `each'
    from /usr/local/lib/site_ruby/1.8/rubygems.rb:157:in `activate'
    from /usr/local/lib/site_ruby/1.8/rubygems.rb:49:in `gem'
    from /usr/bin/rails:18 
```

任何可能的解决方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T05:57:10.650

首先你应该告诉你安装 ruby​​ 和 rails 的步骤。

利用

> $ \curl -L [https://get.rvm.io](https://get.rvm.io) | bash -s stable --rails --autolibs=enabled # 或者，--ruby=1.9.3

检查是否存在 rvm 要求..

> rvm 要求

然后使用

> gem install rails -v 版本

你也可以参考

> [https://rvm.io/](https://rvm.io/)

# doctrine - 教义分页

> ID：16206365
> 
> 赞同：2
> 
> 时间：2013-04-25T04:25:19.203
> 
> 标签：doctrine, doctrine-1.2

我使用了学说的分页。我已经成功实现了它，但我的问题是当用户点击最后一页时。在最后一页锚标记之后的寻呼机中，有两个空锚标记，如果用户点击第一页，有是两个锚标签。我希望当用户点击最后一页时，最后一页锚标签之后应该没有锚标签，如果用户先点击，第一页锚标签之前应该没有锚标签。

示例：这是我的分页结构

```
 << , < , 1 , 2 , 3 , > , >>

    anchor tag no:   1    2   3   4   5   6   7 
```

如果用户点击 1 没有锚标签，那么应该没有第一个，前一个锚标签（锚标签号 1、2）。

如果用户点击 3 个无锚标签，则应该没有最后一个，下一个锚标签（锚标签号 6、7）。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-16T09:57:05.213

您应该手动检查用户是否到达最后一页/第一页，然后相应地更新您的锚标记（即禁用它们）。

# .net - 如何检查电子邮件是否有效？

> ID：16206367
> 
> 赞同：-1
> 
> 时间：2013-04-25T04:25:28.403
> 
> 标签：.net, validation, email

> 如何检查电子邮件是否有效？

***（例如：- abc@yahoo.com -> 好的
abc@yahoo.con -> 错误）***

**我想检查所有世界级电子邮件地址的验证。**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-25T04:32:09.947

您可以尝试使用反向电子邮件查找服务，但这些服务不是很可靠，而且许多电子邮件提供商拒绝反向查找请求。所以我认为你最好的办法是首先检查电子邮件地址的格式是否正确，然后检查主机域是否存在，然后发送一封验证电子邮件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T04:32:56.373

要检查字符串是否是有效的电子邮件，您可以使用 Regex，

前任 ：

```
bool isEmail = Regex.IsMatch(emailString, @"\A(?:[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+(?:[A-Z]{2}|asia|com|org|net|gov|mil|biz|info|mobi|name|aero|jobs|museum|travel)\b)\Z", RegexOptions.IgnoreCase); 
```

* * *

要验证邮箱是否存在，请遵循本文。

[验证电子邮件地址](http://www.labnol.org/software/verify-email-address/18220/)

> 当您向某人发送电子邮件时，该消息会发送到 SMTP 服务器，然后该服务器会查找电子邮件收件人所在域的 MX（邮件交换）记录。
> 
> 例如，当您向 hello@gmail.com 发送电子邮件时，邮件服务器将尝试查找 gmail.com 域的 MX 记录。如果记录存在，下一步将确定该电子邮件用户名（在我们的示例中为 hello）是否存在。
> 
> 使用类似的逻辑，我们可以验证来自计算机的电子邮件地址，而无需实际发送测试消息。

在.Net 中做同样的事情可能是一项乏味的任务。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-25T04:28:18.430

这是一个毫无意义的练习。进行此验证的唯一真正方法是向某人发送电子邮件并要求回复以验证该电子邮件是否正在使用中。我也不明白你的例子，abc@yahoo.com 无效但 :-abc@yahoo.com 是？什么？做一些简单的验证你的用户输入正确，就是这样。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-25T04:33:58.797

```
^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.(?:[A-Z]{2}|com|org|net|edu|gov|mil|biz|info|mobi|name|aero|asia|jobs|museum)$ 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-25T04:46:39.630

您还可以使用[MailAddress 类](http://msdn.microsoft.com/en-us/library/system.net.mail.mailaddress.aspx)来验证`string`并创建扩展。

```
public static bool IsValidEmailAddress(this string email)
{
    try
    {
        var addr = new MailAddress(email);
        return true;
    }
    catch
    {
        return false;
    }
} 
```

***用法：***

```
string email = "test@yahoo.com";
if (email.IsValidEmailAddress())
{
 //TODO: Is email
} 
```

# opencv - 在 OpenCV / 计算机视觉中合并检测窗口的常用方法是什么？

> ID：16206370
> 
> 赞同：3
> 
> 时间：2013-04-25T04:26:01.360
> 
> 标签：opencv, computer-vision, object-detection

所以基本上我已经创建了自己的行人检测算法（我需要它用于一些研究目的，因此决定不使用提供的 HoG 检测器）。

检测后，我会在检测到的对象/人周围有许多重叠的矩形。然后我会应用非最大值抑制来保留局部最大值。然而，在非极大值抑制算法的搜索范围之外的位置仍有重叠的矩形。

你将如何合并矩形？我尝试使用 grouprectangles，但不知何故我不知道它是如何得出结果的（例如 grouprectangles(rects, 1.0, 0.2)）

我应用了一个基本的合并算法，如果有矩形重叠一定百分比的区域，则合并，代码如下所示。

```
/**
 * Merge a set of rectangles if there's an overlap between each rectangle for more than 
 * specified overlap area
 * @param   boxes a set of rectangles to be merged
 * @param   overlap the minimum area of overlap before 2 rectangles are merged
 * @param   group_threshold only the rectangles that have more than the remaining group_threshold rectangles will be retained
 * @return  a set of merged rectangles
 **/
vector<Rect> Util::mergeRectangles( const vector<Rect>& boxes, float overlap, int group_threshold ) {
    vector<Rect> output;
    vector<Rect> intersected;
    vector< vector<Rect> > partitions;
    vector<Rect> rects( boxes.begin(), boxes.end() );

    while( rects.size() > 0 ) {
        Rect a      = rects[rects.size() - 1];
        int a_area  = a.area();
        rects.pop_back();

        if( partitions.empty() ) {
            vector<Rect> vec;
            vec.push_back( a );
            partitions.push_back( vec );
        }
        else {
            bool merge = false;
            for( int i = 0; i < partitions.size(); i++ ){

                for( int j = 0; j < partitions[i].size(); j++ ) {
                    Rect b = partitions[i][j];
                    int b_area = b.area();

                    Rect intersect = a & b;
                    int intersect_area = intersect.area();

                    if (( a_area == b_area ) && ( intersect_area >= overlap * a_area  ))
                        merge = true;
                    else if (( a_area < b_area ) && ( intersect_area >= overlap * a_area  ) )
                        merge = true;
                    else if (( b_area < a_area ) && ( intersect_area >= overlap * b_area  ) )
                        merge = true;

                    if( merge )
                        break;
                }

                if( merge ) {
                    partitions[i].push_back( a );
                    break;
                }
            }

            if( !merge ) {
                vector<Rect> vec;
                vec.push_back( a );
                partitions.push_back( vec );
            }
        }
    }

    for( int i = 0; i < partitions.size(); i++ ) {
        if( partitions[i].size() <= group_threshold )
            continue;

        Rect merged = partitions[i][0];
        for( int j = 1; j < partitions[i].size(); j++ ) {
            merged |= partitions[i][j];
        }

        output.push_back( merged );

    }

    return output;
} 
```

但是，如果这实际上是在计算机视觉中合并矩形的一种公认方法，我现在想做什么，尤其是当我想检查我的算法的精确召回率时。我的方法有时似乎过于简单，每个合并的矩形都变得越来越大，主要是因为**合并 |= partitions[i][j];** 它找到包围两个矩形的最小矩形。

如果这是合并检测窗口的可接受方式，那么合并重叠的常用值是多少（即如果重叠面积 >= 百分比）？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-25T07:44:53.640

我敢说，没有“公认”的方式来合并某些感兴趣的领域。甚至合并点的百分比也完全取决于您要执行的操作。

您可以尝试使用某种权重/投票机制，根据原始检测到的正方形的大小（也可以使用其他东西，与其他东西的重叠量或数量），为某些观察赋予更大的权重重叠）。

您还可以将找到的方块合并到某种掩码中。这将创建一个图像，其中所有的正方形都是白色像素，其他都是黑色的。通过在原始图像上使用该蒙版，您应该拥有一组非常精确的“合并”感兴趣区域，它们与您找到的正方形一样大。

# jsf - 无法让 CXF JAX-RS 和 JSF 一起工作

> ID：16206378
> 
> 赞同：1
> 
> 时间：2013-04-25T04:26:47.297
> 
> 标签：jsf, cxf, jax-rs, apache-tomee, facesservlet

我正在尝试设置一个`FooTest`使用 CXF JAX-RS 和 JSF 的小型示例应用程序。我从 CXF 部分开始，实现了一个简单的服务（工作）和一个名为 home.html 的小 html 页面（我可以在浏览器中访问它）。相关代码如下：

**web.xml**

```
<servlet>
    <servlet-name>RestServlet</servlet-name>
    <servlet-class>org.apache.cxf.jaxrs.servlet.CXFNonSpringJaxrsServlet</servlet-class>
    <init-param>
        <param-name>jaxrs.serviceClasses</param-name>
        <param-value>com.test.FooService</param-value>
    </init-param>
    <load-on-startup>1</load-on-startup>
</servlet>
<servlet-mapping>
    <servlet-name>RestServlet</servlet-name>
    <url-pattern>/rest/*</url-pattern>
</servlet-mapping> 
```

**FooService.java**

```
@Path("/rest")
public class FooService {    
    @Path("/foo")
    @GET
    @Produces("application/json; charset=UTF-8")
    public String getFoo() {
        // returns json
    }
} 
```

现在我可以调用`http://localhost:8080/FooTest/rest/foo`and `http://localhost:8080/FooTest/home.html`。但是，当我开始定义和映射`FacesServlet`to`*.html`并尝试访问时，`home.html`我得到一个`NullPointerException`.

**新的 web.xml**

```
<servlet>
    <servlet-name>Faces Servlet</servlet-name>
    <servlet-class>javax.faces.webapp.FacesServlet</servlet-class>
</servlet>
<servlet-mapping>
    <servlet-name>Faces Servlet</servlet-name>
    <url-pattern>*.html</url-pattern>
</servlet-mapping>
... CXF stuff ... 
```

**导致**

```
Apr 25, 2013 6:08:17 AM org.apache.catalina.core.ApplicationDispatcher invoke
SEVERE: Servlet.service() for servlet Faces Servlet threw exception
java.lang.NullPointerException
    at org.apache.myfaces.shared.context.flash.FlashImpl.isKeepMessages(FlashImpl.java:388)
    at org.apache.myfaces.shared.context.flash.FlashImpl._saveMessages(FlashImpl.java:665)
    at org.apache.myfaces.shared.context.flash.FlashImpl.doPostPhaseActions(FlashImpl.java:269)
    at org.apache.myfaces.lifecycle.LifecycleImpl.render(LifecycleImpl.java:254)
    at javax.faces.webapp.FacesServlet.service(FacesServlet.java:199)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.apache.catalina.core.ApplicationDispatcher.invoke(ApplicationDispatcher.java:749)
    at org.apache.catalina.core.ApplicationDispatcher.processRequest(ApplicationDispatcher.java:487)
    at org.apache.catalina.core.ApplicationDispatcher.doForward(ApplicationDispatcher.java:412)
    at org.apache.catalina.core.ApplicationDispatcher.forward(ApplicationDispatcher.java:339)
    at org.apache.myfaces.context.servlet.ServletExternalContextImpl.dispatch(ServletExternalContextImpl.java:369)
    at org.apache.myfaces.view.jsp.JspViewDeclarationLanguage.buildView(JspViewDeclarationLanguage.java:99)
    at org.apache.myfaces.lifecycle.RenderResponseExecutor.execute(RenderResponseExecutor.java:78)
    at org.apache.myfaces.lifecycle.LifecycleImpl.render(LifecycleImpl.java:241)
    at javax.faces.webapp.FacesServlet.service(FacesServlet.java:199)
    ... infinite loop from FacesServlet:199 on ... 
```

我怎样才能解决这个问题？

# 更新 - 更多配置信息

该应用程序在 TomEE 1.5.2 的 JAX-RS 版本上运行。

**src/main/webapp/WEB-INF/faces-config.xml**

```
<?xml version="1.0" encoding="UTF-8"?>
<faces-config xmlns="http://java.sun.com/xml/ns/javaee"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-facesconfig_2_1.xsd"
    version="2.1">

</faces-config> 
```

# 更新 - 解决方案

（感谢 David Blevins 的澄清并指出一个有用的例子）

去掉CXF配置部分，不是必须的。重命名`home.html`为`home.xhtml`，因为`.xhtml`是`javax.faces.DEFAULT_SUFFIX`用于 JSF 页面。`FacesServlet`如果您想使用扩展访问您的 JSF 页面，请保留该映射`.html`。这就足够了：

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app ... >
    <servlet>
        <servlet-name>Faces Servlet</servlet-name>
        <servlet-class>javax.faces.webapp.FacesServlet</servlet-class>
    </servlet>

    <servlet-mapping>
        <servlet-name>Faces Servlet</servlet-name>
        <url-pattern>*.html</url-pattern>
    </servlet-mapping>
</web-app> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T19:47:49.130

不确定这应该是评论还是答案，但您不应该设置`CXFNonSpringJaxrsServlet`并且`FacesServlet`在您的 web.xml 中，所有这些东西都在那里并准备就绪。TomEE 的目标是您可以跳过服务器构建并直接进行应用程序构建。

CXF 完全集成到 TomEE 中的 Tomcat 中，甚至 WS-Security 也可以在 Tomcat Realms 上工作。您只需通过添加`@ApplicationPath`带注释的组件或 EJB来开始使用它`@Path`，它们将被自动拾取和部署。

MyFaces 非常好用，并且与 CDI 完全集成，因此即使是`@ConversationScoped`开箱即用之类的东西也是如此。你只需要你的`faces-config.xml`或一些`@ManagedBean`课程。

# jquery - 复选框背景图像不会第二次更改

> ID：16206379
> 
> 赞同：1
> 
> 时间：2013-04-25T04:26:48.140
> 
> 标签：jquery

我正在使用复选框的图像。当通过 jquery 手动更改复选框的属性时，复选框的背景图像似乎没有改变。

在这种情况下，当您第二次单击按钮时，选中的图像不会出现。

JSFiddle：http: [//jsfiddle.net/aLAgV/1/](http://jsfiddle.net/aLAgV/1/)

代码

```
var $elm = $('#checkbox-1');
$('#butn').click(function(e) {
    e.preventDefault();

    if($elm.is(':checked'))
        $elm.removeAttr('checked');
    else
        $elm.attr('checked','checked');
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T04:29:14.823

看看这是否有帮助。[http://jsfiddle.net/DVuMB/](http://jsfiddle.net/DVuMB/)

`[Prop()](http://api.jquery.com/prop/)`

```
$(document).ready(function() {

    var $elm = $('#checkbox-1');
    $('#butn').click(function(e) {
    e.preventDefault();

    $elm.prop('checked',!$elm.is(':checked'));

}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T04:29:02.230

使用检查的真/假应该工作

```
$elm.attr('checked',true);
$elm.attr('checked',false); 
```

# python - Python/BeautifulSoup - 如何从元素中删除所有标签？

> ID：16206380
> 
> 赞同：89
> 
> 时间：2013-04-25T04:26:49.140
> 
> 标签：python, beautifulsoup

如何简单地从 BeautifulSoup 中找到的元素中删除所有标签？

* * *

## 回答 #1

> 赞同：127
> 
> 时间：2015-01-27T02:47:02.270

有了`BeautifulStoneSoup`进去`bs4`，在 Python3 中就更简单了

```
from bs4 import BeautifulSoup

soup = BeautifulSoup(html)
text = soup.get_text()
print(text) 
```

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2014-04-29T00:40:34.297

为什么我没有看到任何关于该`unwrap`方法的答案？或者，更简单的`get_text`方法

[http://www.crummy.com/software/BeautifulSoup/bs4/doc/#unwrap](http://www.crummy.com/software/BeautifulSoup/bs4/doc/#unwrap) [http://www.crummy.com/software/BeautifulSoup/bs4/doc/#get-text](http://www.crummy.com/software/BeautifulSoup/bs4/doc/#get-text)

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2015-07-20T16:37:08.803

使用[get_text()](http://www.crummy.com/software/BeautifulSoup/bs4/doc/#get-text)，它将文档中或标签下的所有文本作为单个 Unicode 字符串返回。

例如，从以下文本中删除所有不同的脚本标签：

```
<td><a href="http://www.irit.fr/SC">Signal et Communication</a>
<br/><a href="http://www.irit.fr/IRT">Ingénierie Réseaux et Télécommunications</a>
</td> 
```

预期结果是：

```
Signal et Communication
Ingénierie Réseaux et Télécommunications 
```

这是源代码：

```
#!/usr/bin/env python3
from bs4 import BeautifulSoup

text = '''
<td><a href="http://www.irit.fr/SC">Signal et Communication</a>
<br/><a href="http://www.irit.fr/IRT">Ingénierie Réseaux et Télécommunications</a>
</td>
'''
soup = BeautifulSoup(text)

print(soup.get_text()) 
```

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2013-10-17T22:37:41.220

可以使用 bs4 中的 decompose 方法：

```
soup = bs4.BeautifulSoup('<body><a href="http://example.com/">I linked to <i>example.com</i></a></body>')

for a in soup.find('a').children:
    if isinstance(a,bs4.element.Tag):
        a.decompose()

print soup

Out: <html><body><a href="http://example.com/">I linked to </a></body></html> 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2020-05-18T08:53:36.143

将内容简单地获取为文本而不是 html 的代码：

**'html_text'**参数是您将传递给此函数以获取文本的字符串

```
from bs4 import BeautifulSoup

soup = BeautifulSoup(html_text, 'lxml')
text = soup.get_text()
print(text) 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-04-25T04:46:12.747

看起来这是这样做的方法！就如此容易

通过这一行，您将当前元素中的所有文本部分连接在一起

```
''.join(htmlelement.find(text=True)) 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-03-10T15:08:30.560

这是源代码：您可以获取恰好在 URL 中的文本

```
URL = ''
page = requests.get(URL)
soup = bs4.BeautifulSoup(page.content,'html.parser').get_text()
print(soup) 
```

# c++ - 使用 std::shared_ptr 的 std::priority_queue 派生类的编译错误

> ID：16206386
> 
> 赞同：1
> 
> 时间：2013-04-25T04:27:30.130
> 
> 标签：c++, shared-ptr, priority-queue, derived-class

我从 std::priority_queue 派生了一些专门的方法。当我添加一个元素并且队列已满时，其中一种方法是某种固定队列，最小的元素将从队列中删除。

```
template<typename T,
     typename Sequence = std::vector<T>,
     typename Compare = std::less<typename Sequence::value_type> >
class fixed_priority_queue : public std::priority_queue<T, Sequence, Compare> {

    friend class BCQueue_; // to access maxSize_

public:

fixed_priority_queue(unsigned int maxSize) 
: maxSize_(maxSize) {}

void insertWithOverflow(const T& x) {
    if (this->size() == maxSize_) {
        auto beg = this->c.begin();
        auto end = this->c.end();
        auto min = std::min_element(beg, end);
        if(x > *min) {
            *min = x;
            std::make_heap(beg, end);
        }
    }
    else {
       this->push(x);
    }
}

// ...

private:
    fixed_priority_queue() {} 
    const unsigned int maxSize_;
}; 
```

这是我使用的比较器：

```
class ScoreLessThan : public std::binary_function<
    std::shared_ptr<CCandidate>, std::shared_ptr<CCandidate>, bool> {
public:

    bool operator()(
        const std::shared_ptr<CCandidate>& a, const std::shared_ptr<CCandidate>& b) const {
        return a->score > b->score;
    }
}; 
```

我包装了我派生的 fixed_priority_queue 类以保持功能有点分离，所以最后我有了这个：

```
class BCQueue_ : public fixed_priority_queue<
    std::shared_ptr<CCandidate>, std::vector<std::shared_ptr<CCandidate> >,      ScoreLessThan> {
public:
    BCQueue_(size_t maxSize)
    : fixed_priority_queue(maxSize) {}

    bool willInsert(float score) {
        return size() < maxSize_ || top()->score < score;
    }
}; 
```

我可以这样使用：

```
BCQueue_ queue(30); 
```

这`CCandidate`只是一些数据的持有者。一个属性是`score`我在上面的比较器中使用的字段。

当我将上面的类与 CCandidate 一起用作原始指针时，所有编译都有问题并且工作正常，现在我想用`std::shared_ptr`（就像我上面所做的那样）替换原始指针，我得到一个编译错误：

```
 ... 199:5: error: no match for ‘operator>’ in ‘x >min.__gnu_cxx::__normal_iterator::operator* [with _Iterator =  std::shared_ptr*, _Container = std::vector >, __gnu_cxx::__normal_iterator::reference = std::shared_ptr&]()’
...
... :199:5: note: candidates are:
... :199:5: note: operator>(int, int) 
... :199:5: note:   no known conversion for argument 2 from ‘std::shared_ptr’ to ‘int’ 
```

也许这是一个简单的问题。我不确定我是否正确定义了比较器，或者我是否需要更改比较`insertWithOverflow()` `x > *min`，实际上我不知道我应该在那里更改什么。

我应该提一下，我在 stackoverflow 上找到了 `insertWithOverflow' 的实现，它正好符合我的需要。见这里：[如何使 STL 的 priority_queue 固定大小](https://stackoverflow.com/questions/11590624/how-to-make-stls-priority-queue-fixed-size)

就像说的那样，使用原始指针，这一切都没有问题。有人可以帮我解决这个问题。提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T05:48:56.007

您需要在函数中的任何地方使用指定的比较函数：

```
using std::priority_queue<T, Sequence, Compare>::comp;

void insertWithOverflow(const T& x) {
    if (this->size() == maxSize_) {
        auto beg = this->c.begin();
        auto end = this->c.end();
        auto min = std::min_element(beg, end, comp);
        if(comp(*min, x)) {
            *min = x;
            std::make_heap(beg, end, comp);
        }
    }
    else {
       this->push(x);
    }
} 
```

# .net - 如何在提琴手中设置kerberos身份验证

> ID：16206389
> 
> 赞同：2
> 
> 时间：2013-04-25T04:27:55.913
> 
> 标签：.net, web-services, web, fiddler

是否可以在提琴手-作曲家中设置 kerberos 身份验证。我正在尝试向具有 kerberos 身份验证的服务发布请求。任何人都可以帮助我如何做到这一点......在 Fiddler 2 中。

里泰什

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-25T20:38:17.720

正如您在给我的私人邮件中所解释的那样，如果您勾选**选项**子选项卡上的身份验证框，Fiddler's Composer 将自动响应身份验证挑战（包括包装 Kerberos 的协商协议）。

如果您的系统使用协商 HTTP 身份验证以外的方式执行 Kerberos 身份*验证*，则需要使用有关如何请求身份验证的具体细节来更新您的问题。

# php - 如何在 PHP 中为 SQL 数据库将表名设置为相关名？

> ID：16206393
> 
> 赞同：0
> 
> 时间：2013-04-25T04:28:18.493
> 
> 标签：php, sql, sql-server

我正在尝试用 PHP 编写一行代码，这可能是一个愚蠢的问题，但我是编码新手。当我尝试运行我的 php 页面时出现此错误：

> “查询准备/执行出错。数组（[0] => 数组（[0] => 42000 [SQLSTATE] => 42000 [1] => 1013 [code] => 1013 [2] => [Microsoft][ SQL Server Native Client 11.0][SQL Server]FROM子句中的对象“ACTION”和“action”暴露的名字是一样的。用相关的名字来区分。[message] => [Microsoft][SQL Server Native Client 11.0 ][SQL Server]FROM子句中的对象“ACTION”和“action”的暴露名称相同。使用相关名称来区分它们。））”

我的问题只是如何为表名使用相关名称？我有一个名为“action”的表，我正在尝试编写一个包含内部连接的语句，所以数据库不喜欢我试图`INNER JOIN ACTION`在我的`action`表上执行 .. 去图！

我试图研究它，但我一直在寻找设置相关名称的复杂示例。任何帮助是极大的赞赏！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T04:32:22.277

您只需为使用该`action`表的每种情况使用唯一别名。您没有显示您的查询，但它会是这样的：

```
SELECT *
FROM   ACTION a1
INNER JOIN ACTION a2 ON ... 
```

这样，查询解析器就清楚了同一表的每个实例的预期用途。

# c - xterm 和 curses 中不同的关键代码行为

> ID：16206406
> 
> 赞同：0
> 
> 时间：2013-04-25T04:29:27.597
> 
> 标签：c, keyboard, ncurses

运行以下代码来确定`Ctrl`+ `Down`using curses 的正确键代码给了我两个不同的输出（两台服务器都运行 Debian 6）。

`ssh server1`（错误输出）：

```
Press a Key 27
Press a Key 91
Press a Key 66 
```

`ssh server2`（正确输出）：

```
Press a Key 519 
```

我是否遗漏了代码或终端中的某些内容？可能是什么问题呢？

```
#include <stdlib.h>
#include <ctype.h>
#include <curses.h>

int main(void)
{
 WINDOW *_window = initscr();
 int _rows;
 int _cols;

 cbreak();

 /* Accept all keys */
 keypad(_window, true);

 /* Don't echo things that are typed */
 noecho();

 /* Get the screen dimensions */
 getmaxyx(_window, _rows, _cols);

 /* Don't display cursor */
 curs_set(0);

 for (;;)
 {
   printw("Press a Key ");
   refresh();
   int key = wgetch(_window);
   printw("%d \n", key);
 }

 endwin();

 return 0;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T14:16:13.943

它不起作用，因为您正在使用该`screen`命令并且`TERM`变量设置为 screen-256color。

我想`screen -a`，它使用更多的 termcaps，可能有效，但它没有。

我发现的唯一方法是设置`TERM`为，`xterm`这样你就可以在你的 xterm 或像这样的程序中设置它。

```
 setenv("TERM","xterm",1); 
```

这不是一个理想的解决方案，它只适用于 xterm 之类的终端，但它是针对您的特定问题的解决方法。

# ios - 块和内存泄漏

> ID：16206410
> 
> 赞同：2
> 
> 时间：2013-04-25T04:29:54.993
> 
> 标签：ios, objective-c, memory-management, memory-leaks, objective-c-blocks

我正在使用以下代码异步下载图像并将其设置为图像视图。

```
dispatch_queue_t callerQueue = dispatch_get_current_queue();
dispatch_queue_t downloadQueue = dispatch_queue_create("com.myapp.processsmagequeue", NULL);
dispatch_async(downloadQueue, ^{
        NSData * imageData = [NSData dataWithContentsOfURL:url];

           dispatch_async(callerQueue, ^{

                self.imageView.image = [UIImage imageWithData:imageData];
                [self.imageActivityIndicatorView setHidden:YES];
                [self.imageView setHidden:NO];
            });
    });
dispatch_release(downloadQueue); 
```

我知道这些块会自动保留它们引用的所有值，然后释放它们。但是 self 可以在移动到 downloadQueue 然后转移回 callerQueue 之间释放吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-26T13:03:37.460

这应该没问题。

```
dispatch_async(downloadQueue, ^{ // --> downloadQueue will add a retain on self when it's created
           dispatch_async(callerQueue, ^{ // --> callerQueue will add a retain on self when it's created
                 ...
            }); // --> callerQueue will release it's retain when it gets dealloced just after returning from here
    // --> downloadQueue will release it's retain when it gets dealloced just after returning from here
    }); 
```

以下是它的执行方式：

1.  downloadQueue 在 self 上添加保留 // +1
2.  downloadQueue 开始执行块 // +1
3.  callerQueue 在 self 上添加保留 // +2
4.  downloadQueue 释放它的保留 // +1
5.  callerQueue 开始执行内部块 // +1
6.  callerQueue 释放它的保留。// +0

所以，在任何时候，self 都会有一个 retainCount。顺便说一句，您甚至可以随时检查保留计数`-[NSObject retainCount]`。

作为旁注，为什么不使用`dispatch_get_main_queue()`而不是保存 callerQueue。您*永远*不应该在任何其他线程上执行 UI 操作。如果您的函数是从任何其他线程调用的，这会更安全。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-27T13:16:05.830

首先会发生什么：内部块无法从方法中捕获自身，因为在创建内部块时该方法可能早已不复存在。因此，它从外部块捕获自我。这意味着“self”被用作外部块中的变量，这意味着外部块捕获它。如所写，执行内部块时， self 将在那里。

另一方面，您可能不希望这样。您可能不想让该视图保持活动状态，以便将下载的图像存储在那里。在这种情况下，你写

```
_weak WhatEverType* weakSelf = self; 
```

在你的方法中，和

```
WhatEverType* strongSelf = weakSelf;
if (strongSelf != nil)
{
} 
```

在内部块中。结果：那个内部块没有保留“自我”；self 不会仅仅因为它在块中使用而留下。如果它被释放，weakSelf 被设置为 nil，你检查一下。您无需存储图像，而是将其丢弃。但是一旦 strongSelf 被设置为一个非 nil 指针，你就知道它会一直停留在块的末尾。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-04-25T04:49:05.330

最好不要将 self 留在队列中或阻塞中。使用以下方法使“自我”成为非保留对象：

```
__unsafe_unretained ViewController *tempController = self; 
```

然后将每个对象称为 tempController.imageView.image 等等。

# python - Heroku导入错误的Flask和Gunicorn

> ID：16206413
> 
> 赞同：1
> 
> 时间：2013-04-25T04:29:58.583
> 
> 标签：python, heroku, flask, mongoengine

我有一个使用 MongoEngine 的小型 Flask 应用程序。

我的项目结构：

```
/myproject
  -application.py
  -config.py
  /my_app
    -models.py
    -views.py 
```

我的应用程序.py：

```
#!/usr/bin/env python
from flask.ext.mongoengine import MongoEngine
from config import app
import os
app.debug = True

# get config settings
if __name__ == '__main__':
    app.config.from_object('config')
else:
    app.config.from_object('heroku_config')

# wrap app in mongengine
db = MongoEngine(app)

if __name__ == '__main__':
    # Bind to PORT if defined, otherwise default to 5000.
    port = int(os.environ.get('PORT', 5000))
    app.run(host='0.0.0.0', port=port) 
```

我的模型.py：

```
from application import db
from flask import url_for

# declare model classes
... 
```

我正在部署heroku。如果我的 Procfile 读取：

```
 web: python application.py 
```

它工作正常。当我尝试切换到 Gunicorn 时：

```
 web: gunicorn application:app 
```

当我启动 gunicorn 时，它会通过导入错误来抱怨：

```
ImportError: cannot import name db 
```

为什么现在这是一个问题？我猜这是一个路径问题，但我不明白为什么会这样。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T16:16:50.897

我假设您在 application.py 中注册蓝图或类似的东西，这反过来会导入模型，对吗？
您没有提供视图文件或您如何使用视图文件，如果我的猜测不正确，我下面的答案也不会是。

如果我的猜测是正确的，那可能是因为循环导入。您可以创建一个包含这些行的 db.py 文件（从 application.py 移动）：

```
from flask.ext.mongoengine import MongoEngine
db = MongoEngine(app) 
```

然后将该文件导入您的模型 ( `from db import db`)。
这意味着流程看起来像这样：`db -> model -> view -> app`而不是`app (db) -> model -> view -> app`.

循环导入会产生各种烦人的问题，尽可能避免它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-07-27T01:27:58.667

如果您使用的是**初始化**风格的烧瓶模块，那么以下工作（源自托盘烧瓶教程 v Flask 2.0.1）。 [https://www.palletsprojects.com/p/flask/](https://www.palletsprojects.com/p/flask/)

```
web: env FLASK_APP=flaskr gunicorn -b '0.0.0.0':${PORT} 'flaskr:create_app()' 
```

**其中 create_app 是从 flaskr/ init** .py调用的“应用程序”

# scala - Scala - 在列表中查找特定元组

> ID：16206414
> 
> 赞同：15
> 
> 时间：2013-04-25T04:29:59.127
> 
> 标签：scala

假设我们有这个元组列表：

```
val data = List(('a', List(1, 0)), ('b', List(1, 1)), ('c', List(0))) 
```

该列表具有以下签名：

```
List[(Char, List[Int])] 
```

我的任务是从“data”中的一个元组中获取“List[Int]”元素，该元组的键是例如字母“b”。如果我实现像“findIntList(data, 'b')”这样的方法，那么我期望 List(1, 1) 作为结果。我尝试了以下方法：

1.  `data.foreach { elem => if (elem._1 == char) return elem._2 }`
2.  `data.find(x=> x._1 == ch)`
3.  `for (elem <- data) yield elem match {case (x, y: List[Bit]) => if (x == char) y}`
4.  `for (x <- data) yield if (x._1 == char) x._2`

使用所有方法（除了方法 1，我使用了明确的“返回”），我得到一个`List[Option]`或`List[Any]`我不知道如何从中提取“ `List[Int]`”。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-04-25T04:42:30.847

多种方式之一：

```
data.toMap.get('b').get 
```

`toMap`将 2 元组列表转换为`Map`从元组的第一个元素到第二个元素的 a。`get`为您提供给定键的值并返回一个`Option`，因此您需要另一个`get`来实际获取列表。

或者您可以使用：

```
data.find(_._1 == 'b').get._2 
```

**注意**`Option`：仅当您可以保证您将拥有 a`Some`而不是 a时才使用 get on `None`。请参阅[http://www.scala-lang.org/api/current/index.html#scala.Option](http://www.scala-lang.org/api/current/index.html#scala.Option)了解如何使用 Option 惯用语。

**更新：使用不同方法看到的结果类型的说明**

**方法 2**：find 返回一个 Option[List[Int]] 因为它不能保证找到匹配的元素。

**方法3**：在这里你基本上做了一个`map`，即你将一个函数应用于你的集合的每个元素。对于您要查找的元素，该函数返回您的 List[Int] 的所有其他元素，它包含的值`()`是该`Unit`值，大致相当于`void`Java 中的值，但它是一个实际类型。由于“List[Int]”和“Unit”的唯一常见超类型是“Any”，因此结果是“List[Any]”。

**方法4**与#3基本相同

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T05:14:05.383

另一种方法是

```
data.toMap.apply('b') 
```

或者通过一个中间步骤，这会更好：

```
val m = data.toMap
m('b') 
```

where`apply`被隐式使用，即最后一行等价于

```
m.apply('b') 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-25T05:52:16.327

有多种方法可以做到这一点。另一种方法：

```
scala> def listInt(ls:List[(Char, List[Int])],ch:Char) = ls filter (a => a._1 == ch) match {
 | case Nil => List[Int]()
 | case x ::xs => x._2
 | }
listInt: (ls: List[(Char, List[Int])], ch: Char)List[Int]
scala> listInt(data, 'b')
res66: List[Int] = List(1, 1) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-25T05:55:41.893

您可以通过添加类型信息来尝试类似（当您确定它存在时）。

```
val char = 'b'
data.collect{case (x,y:List[Int]) if x == char => y}.head 
```

或者`headOption`如果您不确定角色是否存在，请使用

```
data.collect{case (x,y:List[Int]) if x == char => y}.headOption 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-07-22T19:17:41.323

您也可以使用模式匹配来解决这个问题。请记住，您需要使其递归。解决方案应该是这样的；

```
def findTupleValue(tupleList: List[(Char, List[Int])], char: Char): List[Int] = tupleList match {
  case (k, list) :: _ if char == k => list
  case _ :: theRest => findTupleValue(theRest, char)
} 
```

这将做的是递归地遍历你的元组列表。检查 head 元素是否符合您的条件（您正在寻找的键），然后返回它。或继续列表的其余部分。

# php - CodeIgniter - 严重性：通知 - 消息：未定义的索引

> ID：16206415
> 
> 赞同：0
> 
> 时间：2013-04-25T04:30:01.127
> 
> 标签：php, sql-server, codeigniter

试图显示一个简单查询的结果。

**[编辑]**`activitati.denumire`我认为我的查询有问题， and之间似乎存在冲突`proiecte.denumire`，但我不知道如何解决这个问题。

**模型：**

```
public function getActivities() {
    $this->db->select('idA');
    $this->db->select('activitati.denumire');
    $this->db->select('tascuri');
    $this->db->select('activitati.bugetFolosit');
    $this->db->select('proiecte.denumire');
    $this->db->select('proiecte.bugetAlocat');
    $this->db->from('activitati');
    $this->db->from('proiecte');
    $this->db->where('activitati.aprobat = 0');
    $this->db->where('activitati.idProiect = proiecte.idProiect ');

    $result = $this->db->get();
    $data = $result->result_array();

    return $data;
} 
```

**控制器：**

```
<?php

class ApproveActivity extends CI_Controller{
    function __construct() {
        parent::__construct();
    }

    public function index () {
        $this->getData();
    }

    public function getData () {
        $this->load->model("db_Activities");
        $data['query'] = $this->db_Activities->getActivities();
        $this->loadView($data);
    }

    public function approve () {

    }

    public function loadView ($data) {
        $this->load->view("ViewActivityApproval",$data);
    }
}

?> 
```

**看法：**

```
<table border="1">
    <tr>
        <th>ID</th>
        <th>Denumire</th>
        <th>Tascuri</th>
        <th>Buget Folosit</th>
        <th>Proiect: Denumire</th>
        <th>Proiect: Buget Alocat</th>
    </tr>
    <?php
        var_dump($query);
        foreach ($query as $row): ?>

            <tr>
                <td><?php echo $row['idA'];?></td>
                <td><?php echo $row['activitati.denumire'];?></td>
                <td><?php echo $row['tascuri'];?></td>
                <td><?php echo $row['activitati.bugetFolosit'];?></td>
                <td><?php echo $row['proiecte.denumire'];?></td>
                <td><?php echo $row['proiecte.bugetAlocat'];?></td>
            </tr>
    <?php endforeach; ?>
</table> 
```

奇怪的是：`idA`工作`tascuri`得很好，其余的都没有。

我也做了一个`var_dump($query)`，我得到了一个二维数组：

```
array(2) { 
    [0]=> array(5) { 
        ["idA"]=> string(2) "12" 
        ["denumire"]=> string(6) "Test 1" 
        ["tascuri"]=> string(11) "bla bla bla" 
        ["bugetFolosit"]=> string(3) "200" 
        ["bugetAlocat"]=> string(4) "2500" } 
    [1]=> array(5) { 
        ["idA"]=> string(2) "13" 
        ["denumire"]=> string(6) "Test 2" 
        ["tascuri"]=> string(11) "CursStiinta" 
        ["bugetFolosit"]=> string(3) "200" 
        ["bugetAlocat"]=> string(3) "100" } 
} 
```

然而`idA`，`tascuri`即使我有一个`foreach`. 任何想法 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T04:51:32.257

除了和 之外，您要查找的任何内容都与`$row`数组中的索引不匹配。你在这里很清楚 - 每行都有元素, , , , 并且你正在寻找, 等等，它们不是数组中的 indeces，因此是错误的。`idA``tascuri``idA``denumire``tascuri``bugetFolosit``bugetAlocat``activitati.denumire``$row`

你应该这样做`echo $row['denumire'];`。你为什么要访问`$row['activitati.denumire']`？？

# python - 有子节点时如何获取XML节点的文本值

> ID：16206416
> 
> 赞同：2
> 
> 时间：2013-04-25T04:30:07.703
> 
> 标签：python, lxml

我有这样的场景：

```
<fetch>
   <xyz:match selector="ph-%"/>
   tools.build.compiler
</fetch> 
```

现在 XML 节点`<fetch>`既有子节点又有文本值。我想提取`<fetch>`节点的文本值。我正在使用 python 和 Lxml 来解析 XML。我使用了 LXML `element.text`，但我得到的文本值为`None`. 谁能告诉我在做什么错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T04:33:05.547

你需要`tail`孩子的成员。

```
def get_text(node):
    text = [node.text] + [child.tail for child in node]
    return ''.join(x for x in text if x is not None) 
```

您使用的架构有点奇怪。LXML 旨在使用更传统的方式将数据编码为 XML，尽管它支持通用 XML 解析，`.tail`除非您的模式简单明了，否则使用总是有点奇怪。

# java - 尝试用 JPanel 画线

> ID：16206417
> 
> 赞同：4
> 
> 时间：2013-04-25T04:30:08.083
> 
> 标签：java, swing, jpanel, java-2d, paintcomponent

我正在尝试使用画线`JPanel`，但我碰到了一些墙。我可以将两侧向下，但是一旦从 x 线中减去，一切都会出错。

![我想画的线条](https://i.stack.imgur.com/swZXA.png)

```
package GUIstuff;
import java.awt.Graphics;
import javax.swing.JPanel;

public class DrawPanel extends JPanel{

public void paintComponent (Graphics g){

    super.paintComponent(g);

    int width = getWidth();
    int height = getHeight();

    int drawCounter = 0; // counters for all the while statements 
    int drawCounter2 = 0;
    int drawCounter3 = 0;
    int drawCounter4 = 0;

    int x1 = 0; // cords change with the while statemetns
    int x2 = 0;
    int y1 = 0;
    int y2 = 0;     
    while (drawCounter <= 15){ // counter 
    y2 = 250;
    g.drawLine(x1, y1, x2, y2);
    x2 = x2 + 15;
    y1 = y1 + 15;
    drawCounter++;  } 

    int u1 = 0;
    int u2 = 0;
    int v1 = 0;
    int v2 = 0;
    while (drawCounter2 <= 15){
    u2 = 250;
    g.drawLine(u1, v1, u2, v2);
    u1 = u1 + 15;
    v2 = v2 + 15;
    drawCounter2++; 
    }

    int a1 = 0;
    int a2 = 0;
    int b1 = 0;
    int b2 = 0;

    while (drawCounter3 <= 15){
    a2 = 250;
    g.drawLine(a1, b1, a2, b2);
    b1 = b1 + 15;
    a2 = a2 - 15;
    drawCounter3++;

    }
 }
} 
```

这是我的跑步者课

```
package GUIstuff;
import javax.swing.JFrame;

public class DrawPanelTest {

public static void main (String args[]){

    DrawPanel panel = new DrawPanel();

    JFrame application = new JFrame();

    application.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

    application.add(panel);
    application.setSize (250, 250);
    application.setVisible(true);

}

} 
```

我在左下角和右上角有一条线，但是当我尝试从 x 中减去时，我只会得到一条穿过整个框的线。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-25T04:53:43.063

在进行自定义绘画时，您应该覆盖该`getPreferredSize()`方法，以便面板可以以其首选大小显示。

当你画线时，两个变量是相同的，两个变量是不同的。适当时使用宽度/高度变量，而不是对数字进行硬编码。在下面的示例中，我做了左侧和底部。底部显示如何减去。我会让你弄清楚另外两个方面的模式。

此外，我使面板更具动态性，因此可以轻松配置要绘制的线条数和线条之间的间隙。

```
import java.awt.*;
import javax.swing.*;

public class DrawSSCCE extends JPanel
{
    private int lines;
    private int lineGap;

    public DrawSSCCE(int lines, int lineGap)
    {
        this.lines = lines;
        this.lineGap = lineGap;
    }

    @Override
    public Dimension getPreferredSize()
    {
        int size = lines * lineGap;
        return new Dimension(size, size);
    }

    @Override
    public void paintComponent(Graphics g)
    {
        int width = getWidth();
        int height = getHeight();

        //  Draw lines starting from left to bottom

        int x = lineGap;
        int y = 0;

        for (int i = 0; i < lines; i++)
        {
            g.drawLine(0, y, x, height);
            x += lineGap;
            y += lineGap;
        }
        //  Draw lines starting from bottom to right

        x = 0;
        y = height - lineGap;

        for (int i = 0; i < lines; i++)
        {
            g.drawLine(x, height, width, y);
            x += lineGap;
            y -= lineGap;
        }

        //  Draw lines starting from right to top

        //  Draw lines starting from top to left

    }

    private static void createAndShowUI()
    {
        JFrame frame = new JFrame("DrawSSCCE");
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.add( new DrawSSCCE(15, 15) );
        frame.pack();
        frame.setLocationByPlatform( true );
        frame.setVisible( true );
    }

    public static void main(String[] args)
    {
        EventQueue.invokeLater(new Runnable()
        {
            public void run()
            {
                createAndShowUI();
            }
        });
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-04-27T17:20:54.293

绘制此类图形的一种方法是将绘图划分为象限。这是我想出的GUI。

[![曲线](https://i.stack.imgur.com/j7EUW.png)](https://i.stack.imgur.com/j7EUW.png)

此图是通过在矩形周围画线创建的。

我创建了一个`JFrame`和一个绘图`JPanel`。`JPanel`我通过将水平宽度和垂直高度划分为相同数量的增量来创建图形。由于宽度大于高度，所以宽度增量大于高度增量。

我将绘图分成几个季度，并分别为每个季度编写代码，使用更少和更大的增量。一旦我完成了所有四个季度的工作，我将增量数量翻了两番，并将宽度增量和高度增量除以四。

这是完整的可运行代码。

```
import java.awt.BorderLayout;
import java.awt.Color;
import java.awt.Dimension;
import java.awt.Graphics;

import javax.swing.JFrame;
import javax.swing.JPanel;
import javax.swing.SwingUtilities;

public class DrawOvalRectangle implements Runnable {

    public static void main(String[] args) {
        SwingUtilities.invokeLater(new DrawOvalRectangle());
    }

    @Override
    public void run() {
        JFrame frame = new JFrame("Curved Lines 2021");
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

        frame.add(new DrawingPanel(), BorderLayout.CENTER);

        frame.pack();
        frame.setLocationByPlatform(true);
        frame.setVisible(true);
    }

    public class DrawingPanel extends JPanel {

        private static final long serialVersionUID = 1L;

        private int width, height, margin, increments, xIncrement, yIncrement;

        public DrawingPanel() {
            this.margin = 10;
            this.increments = 80;
            this.xIncrement = 8;
            this.yIncrement = 6;
            this.width = increments * xIncrement;
            this.height = increments * yIncrement;
            this.setPreferredSize(new Dimension(
                    width + margin + margin, height + margin + margin));
        }

        @Override
        protected void paintComponent(Graphics g) {
            super.paintComponent(g);
            g.setColor(Color.BLACK);

            drawNorthwestQuadrant(g);
            drawNortheastQuadrant(g);
            drawSouthwestQuadrant(g);
            drawSoutheastQuadrant(g);
        }

        private void drawNorthwestQuadrant(Graphics g) {
            int x1 = margin;
            int y1 = height + margin;
            int x2 = margin;
            int y2 = margin;

            for (int index = 0; index < increments; index++) {
                g.drawLine(x1, y1, x2, y2);
                x2 += xIncrement;
                y1 -= yIncrement;
            }
        }

        private void drawNortheastQuadrant(Graphics g) {
            int x1 = margin;
            int y1 = margin;
            int x2 = width + margin;
            int y2 = margin;

            for (int index = 0; index < increments; index++) {
                g.drawLine(x1, y1, x2, y2);
                x1 += xIncrement;
                y2 += yIncrement;
            }
        }

        private void drawSouthwestQuadrant(Graphics g) {
            int x1 = margin;
            int y1 = height + margin;
            int x2 = margin;
            int y2 = margin;

            for (int index = 0; index < increments; index++) {
                g.drawLine(x1, y1, x2, y2);
                x1 += xIncrement;
                y2 += yIncrement;
            }
        }

        private void drawSoutheastQuadrant(Graphics g) {
            int x1 = margin;
            int y1 = height + margin;
            int x2 = width + margin;
            int y2 = height + margin;

            for (int index = 0; index < increments; index++) {
                g.drawLine(x1, y1, x2, y2);
                x1 += xIncrement;
                y2 -= yIncrement;
            }
        }

    }

} 
```

# package - 通过包中的链接标签导入组件的最佳方式是什么？

> ID：16206425
> 
> 赞同：4
> 
> 时间：2013-04-25T04:31:11.207
> 
> 标签：package, dart, packages, dart-webui, link-tag

目前我通过相对路径从包中导入组件：

```
<link rel="components" href="packages/packageA/components/login.html"> 
```

但是，当我开始嵌套包时，这不再正常工作。我设置了一个小例子，可以在这里找到：[https ://github.com/nikgraf/nesting-components](https://github.com/nikgraf/nesting-components)

当我尝试构建包应用程序时，我收到此错误消息：

```
error web/packages/packageA/components/login.html:6:5: exception while reading file         "web/packages/packageA/components/packages/packageB/components/button.html", original message:
 FileIOException: Cannot open file 'web/packages/packageA/components/packages/packageB/components/button.html' (OS      Error: No such file or directory, errno = 2)
    <link rel="components" href="packages/packageB/components/button.html">
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
warning web/packages/packageA/components/login.html:12:7: custom element with tag name button not found.
      <div is="button"></div>
      ^^^^^^^^^^^^^^^^^ 
```

当前结构：

应用程序 - 依赖项：PackageA

PackageA - 依赖项：PackageB

一些可能有帮助的背景信息：我的应用程序包含包 A 中的 x-login 组件，我们构建的几个 Dart 应用程序使用该组件。x-login 组件和一般包 A 包含我们应用程序的特定代码。x-login 应该能够使用包 B 中的 x-button 组件。包 B 是一个包含我们要发布的通用组件的包。

您对以不同方式构建我的应用程序或如何以更好的方式导入组件有任何建议吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-28T09:46:34.993

为您的实用程序组件和特定领域的组件提供单独的包似乎是个好主意。

您可以做的是在包含组件时使用“package:packageA”样式语法，而不必使用相对路径。

```
<link rel="import" href="package:packageA/components/login.html"> 
```

只要您的 pubspec 知道 packageA 在哪里，就可以了。这意味着当您将包依赖项的路径更改为 git 或 pub url 时，它仍然可以工作。

[发布包管理器依赖项文档。](http://pub.dartlang.org/doc/dependencies.html)

# javascript - 从 javascript 函数填充 DTO 类

> ID：16206426
> 
> 赞同：0
> 
> 时间：2013-04-25T04:31:23.407
> 
> 标签：javascript, ajax, struts, dao, dto

我正在研究一个 dao dto struts 架构 - 基本上我想在 javascript 中的每个更改函数上填充我的 dto。我正在尝试以下代码---

```
function onchangefunction() {
    var e = document.getElementById("userSelectList");
    strUser = e.options[e.selectedIndex].text;
    alert(strUser);
    strUser.toString();

    var x = document.getElementById("ToLB");
    var option = document.createElement("option");
    <%
        String strUser = request.getParameter("strUser");

        ArrayList < SkillSetDTO > skillsetlst = (ArrayList < SkillSetDTO > ) ConfigurationDAO.getInstance().getSkillSetList(strUser);
        SkillSetDTO skillsetDTO = new SkillSetDTO();
        for (int i = 0; i < skillsetlst.size(); i++) {
            skillsetDTO = (SkillSetDTO) skillsetlst.get(i);
            String skillSet = skillsetDTO.getSkillsets();
    %>
            option.text = "<%=skillSet%>";
            try {
                // for IE earlier than version 8
                x.add(option, x.options[null]);
            } catch (e) {
                x.add(option, null);
            }
    <%
        }
    %>
} 
```

直到 alert(strUser) 它的工作正常但不是在那之后，这里做错了什么？

更新 -

好的，我知道了，它不会工作。谁能告诉我如何通过使用 Ajax 请求来解决此代码，我以前从未使用过 ajax 请求... 1）在 ConfigurationDAO 中传递参数 strUser 和调用方法“getSkillSetList”，以便它填充 DTO 类和 2）取回一个从 SkillSetDTO 到 jsp 的数组列表。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T04:35:35.220

这行不通。您正在尝试在您的 javascript 中执行服务器端代码。服务器端代码将运行一次 - 在 JavaScript 运行之前（页面最初呈现时），但不会在 onchange 方法中重新运行。可以使用服务器端代码来帮助动态构建 javascript，但您不能通过 JavaScript 与之交互。如果您需要在 JavaScript 代码中与服务器交互，可以通过 Ajax 进行

# jquery - 使用 jquery 调整图像大小和拖动位置并将输出保存到 html

> ID：16206434
> 
> 赞同：0
> 
> 时间：2013-04-25T04:32:07.980
> 
> 标签：jquery, draggable, image-resizing, masking

我正在尝试构建一个小工具，使我能够拍摄图像，在其上放置 PNG 透明蒙版，然后缩放并拖动图像以使其在蒙版中完美定位/调整大小。

这是jquery。

```
$(window).load(function(){
var globalElement_width;
var globalElement_height;
$(document).ready(function(){
$img=$('.canvas img');
globalElement_width=$img.width();
globalElement_height=$img.height();

$( ".slider" ).slider({
    step: 1, 
    min: 0,
    max: 100,
    value: 0,
    slide: function( event, ui )
    {
        resize_img(ui.value);
    }
});

$('.canvas img').draggable();

});
function resize_img(val) {
var width=globalElement_width;
var zoom_percen=width * 0.5; // Maximum zoom 50%
var ASPECT = zoom_percen / 50;
var zoom_value = val / 2;
var size= width + ASPECT * zoom_value;

$img = $('.canvas img');
$img.stop(true).animate({
    width: size
}, 1);
}

}); 
```

我有 2 个问题（除了代码可能很笨拙）

1.  我希望图像最初以实际大小居中加载到遮罩后面，并让滑块允许缩放更小，而不是像我现在拥有的那样更大。我想确保图像永远不会超过其实际尺寸以避免失真。滑块应该向左滑动，表示尺寸减小，而不是向右滑动。

2.  一旦我得到正确的位置，我希望能够单击一个按钮，然后为新调整大小和定位的图形输出新的 HTML/CSS/JS。然后我可以把这段代码放到一个站点中并显示图像和蒙版，而无需任何 UX 来调整大小/位置/等。只是在我生成的确切状态下硬编码。

非常感谢任何帮助......这是我可以将各种代码拼凑在一起的情况。此外，鼓励有关清理我所拥有的建议。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T20:45:46.420

我有一个伙伴帮助我（感谢 Yadid！）。

```
/*
this function returns the HTML of an object (same as object.html() - but with the wrapping       element too)
*/
$.fn.outerHTML = function(){

// IE, Chrome & Safari will comply with the non-standard outerHTML, all others (FF) will have a fall-back for cloning
return (!this.length) ? this : (this[0].outerHTML || (
  function(el){
      var div = document.createElement('div');
      div.appendChild(el.cloneNode(true));
      var contents = div.innerHTML;
      div = null;
      return contents;
})(this[0]));

}

function saveEverything(){
var html = $('.canvas').outerHTML();
    alert(html);
    //Save "html" somewhere    
}

$(window).load(function () {
    var globalElement_width;
    var globalElement_height;
    $(document).ready(function () {
        /*
        the problem was that you were trying to get the size of the image before the image was actually loaded
        - which returns wrong dimensions (the image is not there yet, so javascript can't get the width/height of the photo)

    to solve it, we first need to initialize the image tag before we do anything -  
    we can do that by loading a blank image to it - "about:blank" (a 'blank' URL)                

    then bind to the img tag's "load" event - this event is fired after the photo is loaded and fully rendered
    - once you get this event, you can read the dimension of the image

    then,after we bind to the event, we can load the actual photo.
    we do that by changing the "src" attribute of the <img> tag to the URL of the image you want to load        
    */
    $img = $('.canvas img').bind("load",function(){
        globalElement_width = $img.width();
        globalElement_height = $img.height();
        $(".slider").slider({
            step: 0.01, /* Changed from 0 to 100, to 0 to 1, with 1% steps (ie 0.01) . this will make the calculations easier */
            min: 0,
            max: 1,
            value: 1,
            slide: function (event, ui) {
                resize_img(ui.value);
            }
        });

        //now that we have the right dimension, we can center the image 
        center_img();

        $('.canvas img').draggable();
    });
    $img.attr("src","http://media-cache-ec4.pinimg.com/736x/42/07/08/420708fc70c76f89c07bc93d13e6c479.jpg");
});

function center_img(){
    //get the size of the canvas, substract the size of the image then divide by 2 which center it
    var c = $('.canvas');
    var l = (c.width() - c.find('img').width())/2;
    var t = (c.height() - c.find('img').height())/2;            

    c.find('img').css({position:"absolute", top:t, left:l});    
}
// the val will be anywhere between 0 to 1, so we just need to multiply that number with the original size of the image
function resize_img(val) {

    // we get size of container so image wont be smaller than container
    var w = $('.canvas').width();

    // then use Math.min and Math.max, which return the minimum and maximum between 2 numbers
    $('.canvas img').stop(true).animate({
        width: Math.max(w, globalElement_width * Math.min(1,val))
    },1, function(){
        center_img();
    });
}

}); //]]> 
```

# python - 为什么这个属性会在一次迭代后更新，而不是其余的？

> ID：16206437
> 
> 赞同：0
> 
> 时间：2013-04-25T04:32:23.620
> 
> 标签：python, attributes

```
class TISP:

def __init__ (self, x, y, w, k, l, it):
#predict is a 2d list of observed values
    #actual is a 1d list corresponding to a 0-1 value normalized 
    #and descriptive of each observations outcome
    self.predicter = x
    self.actual = y
    self.normal_predicter = []
    self.normal_actual = []
    self.weights = w
    self.kap = k
    self.lam = l
    self.iterations = it
    return

def normalize_predicter (self):
    #create a listed array of predicter, with each value replaced with
    #z score from standardized collumn
    #also cuts off first column
    self.normal_predicter = []
    nppredict = numpy.array(self.predicter)
    nppredict_collumns = nppredict.T
    nppredict_collumns = numpy.delete(nppredict_collumns, 0, 0)
    for col in nppredict_collumns:
        self.normal_predicter.append(scipy.stats.mstats.zscore(col, axis=0))
    self.normal_predicter = numpy.array(self.normal_predicter).T
    return

def normalize_actual (self):
    self.normal_actual = []
    npactual = numpy.array(self.actual)
    self.normal_actual = scipy.stats.mstats.zscore(npactual)
    return

def predicter_matrix (self):
    #(I - 1/k^2 * X^t * X)
    identity_n = self.normal_predicter.shape[1]
    return numpy.identity(identity_n) - self.kap**-2 * numpy.dot(self.normal_predicter.T, self.normal_predicter)

def predicter_actual_matrix (self):
    #1/k^2 * X^t * Y
    return self.kap**-2 * numpy.dot(self.normal_predicter.T, self.normal_actual)

def pseudo_weights (self):
    #theta on slides
    return numpy.dot(self.predicter_matrix(), self.weights) + self.predicter_actual_matrix()

def adjust_lambda (self):
    return self.lam * self.kap**-2

def hard_threshhold (self, pseudo_weight):
    #put pseudo weights through hard threshhold
    adj_lam = self.adjust_lambda()
    if abs(pseudo_weight) < adj_lam:
        return adj_lam**2 - (abs(pseudo_weight) - adj_lam)**2
    else:
        return adj_lam**2

def update_weights (self):
    #update weights, call all
    weights = []
    for col, pw in enumerate(self.pseudo_weights()):
        weights.append(self.hard_threshhold(pw))
    self.weights = weights
    return

def run_all (self):
    self.normalize_all()
    for i in range(self.iterations):
        self.update_weights()
        print self.weights
    return 
```

我省略了规范化函数，但它们设置了属性并且似乎工作正常。

obs 0的前几列：

1,-0.0057548,-0.13457,0.027341,-0.23031,-0.25396,-0.084033,0.50101,-0.15747,-0.20175,0.027615,-0.24926,0.0090723,-0.0516621,6806.

我正在实现一个称为 tisp 的阈值算法。

从权重的零开始，我第一次更新到其他一些低权重：

[0.0004, 0.0004, 0.0004, 0.00020879693209322012, 0.0004, 0.00010554674122089871, 0.0002128103652660953, 0.00018560221711856617, 0.00020718718704488368, 0.00025472546603877807, 0.0004, 0.00032653814690485235, 0.00028773649339636052, 0.00014511605239718185, 0.00026039641181569817, 0.00032812782641074132, 0.00010513077856280048, 0.00020507079525590476, 0.0002843078256187282, 0.00018170990580009818]

但是，随着它的不断发展，它不会再改变（我正在运行 10 次迭代）。

这可能是什么原因造成的？

# php - 如何从标签和推特用户名中清除字符串

> ID：16206438
> 
> 赞同：0
> 
> 时间：2013-04-25T04:32:23.973
> 
> 标签：php, regex, twitter

如何清理一串类似以下情况的推文

> 2013 Porsche Cayman First Drive #car # news @ watchthis in Your City

我想清除标签（#car#news）和 twitter 用户名（在本例中为 @watchthis）

像这样 ：

> 2013 保时捷 Cayman 首次在您的城市驾驶

使用正则表达式 (PHP)

谢谢你

@bimoheryprabowo

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T04:36:21.153

试试这个代码：

```
echo preg_replace('/(?:#\s*[\w\d]+|@\s*[\w\d]+)/', '', $string); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T04:51:13.140

尝试这个

```
$text='2013 Porsche Cayman First Drive # car # news @ watchthis in Your City';
echo preg_replace('/(@\s([\\d\\w]+))|(#\s([\\d\\w]+))/', ' ', $text);

OR
echo preg_replace('/((@|#)\s)([\\d\\w]+)/', ' ', $text); 
```

[工作EG](http://codepad.viper-7.com/uCjB3F)

# android - MBTiles 性能

> ID：16206439
> 
> 赞同：1
> 
> 时间：2013-04-25T04:32:31.957
> 
> 标签：android, performance, sqlite, mapbox

我正在开发一个 Android 地图应用程序。
我正在使用 MBTiles 存储我的图块以供离线查看。一切都很好，但随着数据库大小的增加，性能会大大降低。切片的大小各不相同，但通常大小约为 6 kb，并以 blob 形式存储。我已经用索引和所有复制了 Mapbox 和其他人使用的架构。该数据库目前大小约为 40 mb，读取大约需要 5 秒。到目前为止，我已经做了很多研究，除了它应该可以工作之外什么也没发现。请参阅[此 SQLite 页面](http://www.sqlite.org/intern-v-extern-blob.html)。
我究竟做错了什么？这是Android限制吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T17:28:10.340

找到了！表索引从未得到应用。通过 execSql 发送的 CREATE SQL 包含两个用分号分隔的语句；一个创建表，另一个创建关联索引。显然，实际上只有第一个 (CREATE TABLE) 语句被执行，因此第二个 (CREATE INDEX) 语句从未被执行。我能够通过在 adb shell 中使用 sqlite3 util 找到这一点。运行 .indices map 没有返回任何内容。在更改 CREATE 脚本以实际创建索引之后，瞧！Super-Duper 快速查询！

# html - 使用 xslt 变量来定义表格填充

> ID：16206450
> 
> 赞同：1
> 
> 时间：2013-04-25T04:33:25.817
> 
> 标签：html, xml, xslt

我想在我的 xslt 文件中声明一个变量，用于设置我的 xml 样式。我打算使用该变量来填充表格视图单元格。取决于正在读取的数据将取决于填充距表格左侧的距离。

所以我想知道是否可以在 tablecell 上使用这个 padding1 var？这就是我目前尝试这个想法的方式，但没有太大成功，因为当我现在加载 xml 时，我得到一个空白屏幕。

无论如何，这是我的代码

```
<xsl:variable name="padding1" select="15"/>

<td style="padding-left: padding1;" colspan="2" bgcolor="#C0C0C0"> 
```

在上面的代码中，我声明了一个名为 padding1 的变量并将值 15 传递给它，然后我想在 padding-left 上使用它，就像使用`15px`类型值一样。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T04:48:27.597

您可以使用[AVT](https://www.w3.org/TR/xslt-10/#attribute-value-templates)来引用您的变量：

```
<td style="padding-left: {$padding1}px;" colspan="2" bgcolor="#C0C0C0">...</td> 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2020-08-17T12:50:09.310

您可能应该在变量中包含单位。您甚至可以在单元完好无损的情况下进行数学运算：

```
<xsl:variable name="content-width">180mm</xsl:variable>
...
<fo:table-column column-width="{$content-width}*0.5"/> 
```

# php - 在 mysql_fetch_array() 中倒退一步

> ID：16206460
> 
> 赞同：-1
> 
> 时间：2013-04-25T04:34:30.207
> 
> 标签：php, mysql

这是中的值`$result`

*   身份证名称
*   1个
*   2 乙
*   2℃
*   2天
*   3e

..

我正在使用 mysql_fetch_array() 创建一个循环函数

```
while($row = mysql_fetch_array($result)) {
    $temp_id = $row['id'];

    while($temp_id == $row['id']) {
         if($temp_id == $row['id']) {
              mysql_fetch_array($result);
         }
         $temp_id = $row['id'];
         echo $row['name'].",";

    }
    echo "<br/>";
} 
```

这可行，但问题是，mysql_fetch_array 在 id 的转换过程中会跳转到其中一个值。

我希望 this 的值是这样的

```
a
b,c,d
e 
```

我的问题是，是否有一个简单的倒带功能只会在行中步进一次？我已经搜索过，`mysql_data_seek()`但我认为这需要额外`$i`的控制变量，比如定位地址..

谢谢..任何建议和功能示例都会非常棒！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T04:47:49.310

使用`mysql_fetch_array`第一个循环来创建行数组。然后，遍历行本身。

根据对您问题的更新，您似乎希望`GROUP_CONCAT`在查询中使用，但您仍然可以在 PHP 中执行此操作：

```
$rows = array();
while($row = mysql_fetch_assoc($result)) {
    if (!isset($rows[$row['id']]) {
        $rows[$row['id'] = array();
    }
    $rows[$row['id']][] = $row['name'];
}
foreach ($rows as $row) {
    echo implode(',', $row) . "<br>";
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T05:02:27.247

试试这个代码

```
while($row = mysql_fetch_array($result)) {
    $temp[$row['id']][] = $row['name'];
}
foreach($temp as $row) {
    echo implode(',', $row) . '<br/>';
} 
```

# matlab - Matlab 中的“for”循环如何在每次迭代中改变其控制变量？

> ID：16206467
> 
> 赞同：-1
> 
> 时间：2013-04-25T04:35:41.737
> 
> 标签：matlab, for-loop

```
>> a = [1 1 2 3 5 8 13 21 13 37];
>> d = [1 2];
>> w = [0 0 0];
  for e = d
      g = 0;
      for f = a
          if mod (f, 2) == 0
              g = [g f];
          end
      end
w = [w;g];
end
>> w 
```

W的输出是矩阵

```
0     0     0
0     2     8
0     2     8 
```

我的问题是关于 for 循环。Matlab for 循环是否取值而不是逻辑条件？例如，当查看“for f = a”时，f 是否获取数组 A 的值，然后 for 循环按其列遍历 F？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-25T04:57:18.123

FOR 循环有一个变量，每次通过循环迭代器变量获取数组中的下一个值。迭代器变量接受列的值，一次一个。在 foror 循环中赋值语句的右侧不必是数字数组——例如，它可以是字符串的元胞数组，或者结构等。

换句话说，当你有

```
for f=a, ....., end 
```

这相当于写

```
for i=1:numel(a)/size(a,1); f=a(:,i); .... ; end 
```

您可以通过在代码中添加一些 disp 语句轻松地看到这一点：

```
for e = d
      disp(e)
      g = 0;
      for f = a
          disp(f)
          if mod (f, 2) == 0
              g = [g f];
          end
      end
w = [w;g];
end 
```

matlab 中的 WHILE 循环采用逻辑条件。

（编辑：如果 a 是多维的，我忘记了 f 采用 a 的列的值）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T04:55:22.810

是的，MATLAB 循环变量被分配给“数组”，在 MATLAB 中称为向量。循环变量的值在每次循环迭代时自动迭代向量的元素。一个常见的构造是

```
for i=1:10 %generates vector of 1,2,...,10
i %will print i=1, i=2, etc.
end 
```

在这种情况下，向量是动态生成的，并且是序列号。但是没有理由你不能传递任何任意向量来迭代，比如你的情况下的“a”。在每次迭代中，“f”取“a”中包含的序列中的下一个值。

# python - 在python中忽略get_row函数

> ID：16206469
> 
> 赞同：0
> 
> 时间：2013-04-25T04:36:07.430
> 
> 标签：python, function, csv, printing

我编写了一个函数来从 csv 文件中获取行数据，但失败了。所以我插入了这么多“打印”来看看出了什么问题。但令我惊讶的是，控制台一直是空的，这很奇怪。我重新缩进了我的代码这么多次我的代码被炸毁了：

```
# -*- coding: utf-8 -*-
import csv

def get_rows(csv_file):
    print '0'
    reader=csv.reader(open(csv_file))
    print '1'
    #get the colnum names,lowercased
    col_names=tuple(k.lower() for k in reader.next())
    print '2' 
    for row in reader:
        yield dict(zip(col_names,row))
    print col_names

def main():
    file_name='companylist.csv'

    try:
        get_rows(file_name)
    except:
        print 'OK'
if __name__=='__main__':
    main() 
```

* * *

而代码：

```
# -*- coding: utf-8 -*-
import csv

reader=csv.reader(open('companylist.csv'))
col_names=tuple(k.lower() for k in reader.next())
for row in reader:
    dict(zip(col_names,row))
print col_names 
```

完美地工作，导致：

```
('symbol', 'name', 'lastsale', 'marketcap', 'adr tso', 'ipoyear', 'sector', 'industry', 'summary quote', '') 
```

而代码：

```
# -*- coding: utf-8 -*-
import csv

def main():
    reader=csv.reader(open('companylist.csv'))
    col_names=tuple(k.lower() for k in reader.next())
    print '1'
    print col_names
    for row in reader:
        yield dict(zip(col_names,row))
    print col_names

if __name__=='__main__':
    main() 
```

## 结果一无所获

和代码：

```
# -*- coding: utf-8 -*-
import csv
def get_rows(csv_file):
    print '0'
    reader=csv.reader(open(csv_file))
    print '1'
    #get the colnum names,lowercased
    col_names=tuple(k.lower() for k in reader.next())
    print '2' 
    for row in reader:
        yield dict(zip(col_names,row))
    print col_names
def main():
    file_name='companylist.csv'

    try:
        if(get_rows(file_name)):
            print "OK"
    except Exception,ex:
        print Exception,":",ex
if __name__=='__main__':
    main() 
```

导致：`OK`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T05:31:51.757

As your `get_rows` is a [generator function](http://docs.python.org/2/reference/expressions.html#yield-expressions), it executes only when one of the generator methods is called (e.g., `for...in` expression internally calls `next()` method for an iterable object). So rewriting your `main` function should help:

```
def main():
    file_name='companylist.csv'

    try:
        for row in get_rows(file_name):
            print row
    except:
        print 'OK' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T05:33:58.687

您定义了一个生成器函数`get_rows`，它仅在您将其作为迭代器调用时才产生一个值。因此，除非您在函数中插入`print`语句，否则您只需在行中打印生成器函数（这很好，不会引发异常），它不会执行它！因此，没有执行许多语句。`main``get_rows(file_name)``print`

尝试循环`get_rows(file_name)`，看看会发生什么，即像这样

```
for element in get_rows(file_name):
    # do something with element 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-25T05:36:44.940

问题是“yield”会阻止函数作为函数运行。如果你把它改成返回，你会看到你的异常（我的 python 3 说 reader 没有 next() 函数）和你的打印。

我还没有找到任何关于生成器如何抑制打印语句的文档，但是对于简单的代码似乎确实如此，例如：

```
def mygen():
    print('1')
    yield 1 
```

关于异常，看看这个：

[在其消费者中处理生成器异常](https://stackoverflow.com/questions/11366892/handle-generator-exceptions-in-its-consumer)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-25T05:48:08.693

`.next`正如每个人已经指出的那样，您正在使用生成器，这就是为什么在您第一次调用生成器或`.__next__`（在 Python 3 上）之前它不会执行的原因。但是，我将建议一种`get_rows`使用小写列名制作函数的更好方法：

```
import csv

def get_rows(csv_file):
    with open(csv_file) as f:
        return csv.DictReader(f, next(f).lowercase().split(',')) 
```

# jquery - Jquery，获取字体系列并更改颜色

> ID：16206471
> 
> 赞同：1
> 
> 时间：2013-04-25T04:36:18.877
> 
> 标签：jquery

我正在尝试获取`h1`标签的字体系列并将颜色更改为`h2`to `#CCC`，但到目前为止它不起作用。我想我做错了。我是 jQuery 编码的新手，非常感谢您的帮助。

这是我的jQuery代码：

```
$(function() {
    $('.h1').click(function(){ 
        $(this).css('h2', '#CCC');
    }); 
}); 
```

请帮助我实现这一目标。提前致谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-25T04:43:56.640

顺便说一句，如果 h1 和 h2 是类名，那么使用`dot`前缀 else 就按原样给它们。我假设它们是您标记中的类名。

```
$(function() {
 $('.h1').click(function(){ 
    $('.h2').css('color', '#CCC');
   alert($(this).css('font-family')); //this will give you font-family
 }); 
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-25T04:43:39.617

设置颜色

```
$(function() {
  $('h1').click(function(){ 
     $('h2').css('color', '#CCC');
     alert($('h2').css('font-family')); //this will give you font-family
  }); 
}); 
```

[演示](http://jsfiddle.net/38Fzv/1/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-25T04:44:16.560

你以错误的方式做到了：

```
$(function() {
 $('.h1').click(function(){ 
$('.h2').css('color', '#CCC');
 }); 
}); 
```

试试这个代码。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-25T04:49:22.787

基于如下标记：

```
<h1 class="h1">I'm an H1</h1>
<h2 class="h2">I'm an H2</h2> 
```

这应该是你的代码

```
$(function() {
    $('.h1').click(function(){ 
        var fontFamily = $(this).css("font-family"); // only accessible in this scope
        $('.h2').css('background-color', '#CCC');
    }); 
}); 
```

[jsFiddle](http://jsfiddle.net/Cwalkdawg/FFkDJ/)

**注意：**如果您使用 'h1' 作为`h1`标签的类名，我建议您重新考虑。这是非常不具体的，可能会变得混乱。

# python - 如何在 python 2.7，窗口 7 中删除具有 unicode 名称的文件夹

> ID：16206474
> 
> 赞同：0
> 
> 时间：2013-04-25T04:36:40.630
> 
> 标签：python, python-2.7

在 python 中，我可以删除带有 Ascii 名称的文件夹。我使用： import shutil shutil.rmtree('folder_name') 但是当文件夹名称包含unicode字符时，例如“今年将不再”，我收到错误：系统找不到指定的路径。在这种情况下是否有删除文件夹的解决方案。感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T05:28:50.090

使用 Unicode 字符串。如果您在字符串中指定非 ASCII 字符，请确保指定源文件的编码并且您实际以该编码保存源文件：

```
# coding: utf-8
import os
os.remove(u'美国人.txt')
os.rmdir(u'马克') 
```

`os.listdir`如果您通过或之类的命令以编程方式读取文件目录`os.walk`，请使用 Unicode 指定目录，否则您将无法获得 Unicode 文件名：

```
>>> os.listdir('.')
['???.txt', '??'] 
```

对比

```
>>> os.listdir(u'.')
[u'\u7f8e\u56fd\u4eba.txt', u'\u9a6c\u514b'] # Unicode escapes are 美国人and 马克. 
```

# php - 使用数组简化在 If 语句中检查多个 PHP 页面

> ID：16206476
> 
> 赞同：0
> 
> 时间：2013-04-25T04:36:50.547
> 
> 标签：php, arrays, if-statement

**问题：**

优化 PHP 代码以在到达多个页面之一时打印代码。

**PHP代码：**

```
if (substr(strrchr($_SERVER['PHP_SELF'], '/'), 1) == "part-c.php" || substr(strrchr($_SERVER['PHP_SELF'], '/'), 1) == "part-g.php" || substr(strrchr($_SERVER['PHP_SELF'], '/'), 1) == "part-j.php" || substr(strrchr($_SERVER['PHP_SELF'], '/'), 1) == "part-n.php" || substr(strrchr($_SERVER['PHP_SELF'], '/'), 1) == "part-q.php")
{
    echo 'Hello';
} 
```

**建议：**

我正在考虑将所有页面放在一个数组中并检查您所在的页面是否存在于该数组中是否是一个好主意。其他建议如何解决？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T04:41:42.643

是的，您是对的，您可以通过将所有页面放入数组并使用[in_array](http://php.net/manual/en/function.in-array.php)检查来减少代码。

```
$checkString = substr(strrchr($_SERVER['PHP_SELF'], '/'), 1);
$pages = array("part-c.php","part-g.php","part-j.php","part-n.php","part-q.php");

if(in_array($checkString,$pages)){
   echo 'Hello';
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T05:22:39.927

You can also put your files in a txt file which is only read by the server setting it to CHMOD 0664, then list the files like so:

**vPages.txt**

```
part-c.php
part-g.php
part-j.php
part-n.php
part-q.php 
```

and then run some code like Rikesh suggested:

```
$page = substr( strrchr( $_SERVER['PHP_SELF'], '/' ), 1 );
$vPages = file( './vPages.txt' );

if ( in_array( $page, $vPages ) ) {
    // Seems legit...

} 
```

and you'll be able to easily edit a file to include more valid pages.

# php - 如何比较 WHERE 子句定义的同一表中的字段

> ID：16206477
> 
> 赞同：0
> 
> 时间：2013-04-25T04:36:56.073
> 
> 标签：php, mysql, compare, temp, database-table

我正在尝试比较 2 个不同制造商之间的产品表中的 product_models。我发现同一产品有 2 个不同的 product_model 编号。相似但仍然不同。例如，制造商 1 (ELD) 的 CNELD-1004 与制造商 2 (MC) 的 1004 是相同的产品。我试图展示来自制造商 2 的产品，它与来自制造商 1 的 product_model 不同

不使用php，有没有办法做到这个mysql？

```
select products_model  AS MCProducts from products where manufacturers_id = 2; 

select products_model  AS ELDProducts from products where manufacturers_id = 1; 

Select  MCProducts from products WHERE MCProducts  not LIKE  "%ELDProducts%" 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T04:42:33.397

> 选择 products_model, CASE
> 
> ```
>  WHEN manufacturers_id = 2 THEN 'MCProducts' 
>   WHEN manufacturers_id = 2 THEN 'ELDProducts'
>   END 
> from products where WHERE MCProducts  not LIKE  "%ELDProducts%" 
> ```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T04:45:01.577

我想这也会起作用。

```
select products_model  AS MCProducts from products where manufacturers_id = 2 and     products_model not in (select products_model  from products where manufacturers_id = 1); 
```

# c# - 使用局部视图的剑道选项卡中的剑道网格

> ID：16206479
> 
> 赞同：1
> 
> 时间：2013-04-25T04:37:14.570
> 
> 标签：c#, razor, entity-framework-4, kendo-ui

出于某种原因，尽管 GetAllProductList 返回记录，但我可以获得第二个选项卡（产品详细信息）来绑定网格中的记录。请指教，谢谢

**index.cshtml** 主页/Index.cshtml

```
@(Html.Kendo().TabStrip()
    .Name("tabstrip")
    .Items(items =>
    {
        items.Add().Text("Search")
            .LoadContentFrom("Index", "ProductDetails")
            .Selected(true);

        items.Add().Text("Product Details")
       .LoadContentFrom("_ProductData", "ProductDetails")

    })
) 
```

**ProductDetails/Index.cshtml**

@(Html.Kendo().Grid()

```
 .Name("BookGrid")
        .HtmlAttributes(new { @Style = "align:center; font-size:10px; width:950px" })
        .Columns(columns =>
        {

            columns.Bound(p => p.BookId).Width(95);
            columns.Bound(p => p.Name).Width(120);

        })

        .ToolBar(toolbar => toolbar.Create())
        .Sortable()
            //.Pageable()
        .Pageable(paging => paging
            .Input(false)
            .Numeric(true)

            .PreviousNext(true)
            .PageSizes(new int[] { 5, 10, 25, 50 })
            .Refresh(false)

        )
        .Selectable()
        .Scrollable()
        .ColumnMenu(c => c.Columns(false))
        .DataSource(dataSource => dataSource

            .Ajax()//bind with Ajax instead server bind
            .PageSize(10)
            .ServerOperation(true)
                .Model(model =>
                {
                    model.Id(p => p.BookId);

                })
                                     .Sort(sort => sort
                                  .Add(x => x.Name).Descending())

                        .Read(read => read.Action("GetBookData", "ProductDetails").Type(HttpVerbs.Get))

            )

    ) 
```

**ProductDetails/_ProductData.chtml（部分页面）**

```
@(Html.Kendo().Grid<HH.PrductModel>()

        .Name("ProductGrid")
        .HtmlAttributes(new { @Style = "align:center; font-size:10px; width:950px" })
        .Columns(columns =>
        {

            columns.Bound(p => p.ProductId).Width(95);
            columns.Bound(p => p.Name).Width(120);

        })

        .ToolBar(toolbar => toolbar.Create())
        .Sortable()
            //.Pageable()
        .Pageable(paging => paging
            .Input(false)
            .Numeric(true)

            .PreviousNext(true)
            .PageSizes(new int[] { 5, 10, 25, 50 })
            .Refresh(false)

        )
        .Selectable()
        .Scrollable()
        .ColumnMenu(c => c.Columns(false))
        .DataSource(dataSource => dataSource

            .Ajax()//bind with Ajax instead server bind
            .PageSize(10)
            .ServerOperation(true)
                .Model(model =>
                {
                    model.Id(p => p.ProductId);

                })
                                     .Sort(sort => sort
                                  .Add(x => x.Name).Descending())

                        .Read(read => read.Action("GetProductData", "ProductDetails").Type(HttpVerbs.Get))

            )

    )

**ProductDetailscontroller**

public ActionResult Index()

{ 
   return View();
} 

///Display for tab 1
public ActionResult GetBookData ([DataSourceRequest] DataSourceRequest request)
{
    Response.Cache.SetCacheability(HttpCacheability.NoCache);
            return Json(GetAllBookList().ToDataSourceResult(request), JsonRequestBehavior.AllowGet);
}

 private static IEnumerable<BookModel> GetAllBookList()
        {
            using (var dc = new HHEntities())
            {
                var result = (from a in dc.Books

                              select new BookModel
                              {
                                  BookId= a.BookId,
                                  Name= a.Name

                              });
                return result.Distinct().ToList();
            }

        }

///Display for tab 2

public ActionResult GetProductData([DataSourceRequest] DataSourceRequest request)
{
            Response.Cache.SetCacheability(HttpCacheability.NoCache);
            return Json(GetAllProductList().ToDataSourceResult(request), JsonRequestBehavior.AllowGet);
        } 
```

以下将返回记录，但由于某种原因，它会绑定到产品详细信息选项卡中的网格

```
 /// <summary>

        /// </summary>
        /// <returns></returns>
        private static IEnumerable<ProductModel> GetAllProductList()
        {
            using (var dc = new HHEntities())
            {
                var result = (from a in dc.Products

                              select new ProductModel
                              {
                                  ProductId= a.ProductId,
                                  Name= a.Name,
                                  Description= a.Description,
                                  ExpiryDate= a.ExpiryDate

                              });
                return result.Distinct().ToList();
            }

        }

    public ActionResult __ProductData()
  { return PartialView();} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T15:40:03.773

我怀疑问题是两个网格都使用相同的 HTML id 属性（通过`Name()`方法设置）呈现。你需要给你的网格唯一的名字。例如，您可以在`ViewData`呈现包含网格的局部视图的操作方法中放置一些索引。然后在局部视图本身中使用该索引来使网格名称唯一：

```
@(Html.Kendo().Grid<HH.PrductModel>()
      .Name("Product" + ViewData["index"]) 
```

# weka - 如何识别哪个簇属于哪个情绪

> ID：16206480
> 
> 赞同：1
> 
> 时间：2013-04-25T04:37:15.563
> 
> 标签：weka

我是 weka 的新手。我需要基于 Weka 工具聚类方法从博客文档中识别出一组情绪。对于情绪检测，我使用不同的特征集值（我的特征表示为属性）。例如，我的数据集将是：

```
@relation emotion

@attribute pos real ->total no of times each part-of-speech(noun,verb,adjective,adverb) occur in the document / Total no of words in the document
@attribute Positive_Words real ->Count of positive words occur in the document / Total no of words in the document
@attribute Negative_Words real ->Count of Negative words occur in the document / Total no of words in the document
@attribute Emotion_Words real ->Count of Emotion words occur in the document / Total no of words in the document
@attribute First_Sent_Weight real ->Weight given to first sentence in each blog / Total no of sentences in the document

@data
0.4, 0.24, 0.43, 0.32, 0.65
0.32, 0.5, 0.74, 0.8, 0.43 
```

我有 5000 个实例（通过为每 5000 个博客文档提供每个功能集，我创建了 5000 个实例）。将这些实例传入 Weka 工具中的 K-means 聚类算法，生成 6 个聚类。我的疑问是如何识别哪个集群属于哪种情绪。请提出任何想法。提前致谢。

# javascript - 用于显示纯 PDF 文件的 JavaScript 代码

> ID：16206483
> 
> 赞同：1
> 
> 时间：2013-04-25T04:37:35.080
> 
> 标签：javascript, pdf

是否有可用的 JavaScript 代码可以显示一个非常简单的 PDF 文件？我知道有[pdf.js](http://mozilla.github.io/pdf.js/)，但这是一个很大的源代码，具有很多功能。我只想能够看到纯文件，不需要像超链接这样的花哨的东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T04:50:10.990

如果您不想解决那些烦人的浏览器怪癖，我推荐[PDFObject 。](http://pdfobject.com/)它只有大约 1.8 KB，不依赖于任何其他 JS 框架。

# css - CSS 未应用于 div 标签

> ID：16206484
> 
> 赞同：3
> 
> 时间：2013-04-25T04:37:38.120
> 
> 标签：css, html

div 标签有一个小问题，因为它没有选择我为它准备的 CSS。

当我检查 Firefox 和 Chrome 中的元素时，我注意到了。我看到一个具有 div 标签的 html 元素，它正确地应用了 CSS。然后我再看另一个，虽然 html 代码几乎相同，但它没有应用 CSS。

这是一个有效的带有 div 标签的 html 代码：

```
<tr>
        <td class="style1">
            <label><div ID="Login">Login:</label>
        </td>
        <td>
            <input class="login" id="loginpassword" type="text" name="username"     
maxlength="75">
            </div>
        </td>
    </tr> 
```

这是登录密码 ID 的 CSS：

```
#loginpassword {width:150px;} 
```

这是我的第二个 html 代码片段（没有应用 CSS 的那个）：

```
<tr>
        <td class="style1">
            <label><div ID="Password">Password:</label>
        </td>
        <td>
            <input class="login" id="loginpassword2" type="password" name="password" 
maxlength="75">
            </div>
        </td>
    </tr> 
```

这是 loginpassword2 ID 的 CSS：

```
#loginpassword2 {width:150px;} 
```

所以它们几乎 100% 相同，但 loginpassword2 的 ID 没有应用 CSS，而 loginpassword 应用的是 CSS。奇怪的。我不明白为什么一个有效而另一个无效。

对此有任何线索吗？如果您需要更多信息，请告诉我。

提前感谢您的回复。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-25T04:43:01.393

对于初学者：

```
<td class="style1">
    <label><div ID="Login">Login:</label>
</td>
<td>
    <input class="login" id="loginpassword" type="text" name="username" maxlength="75">
    </div> 
```

那是非常糟糕的 HTML。您不能`<div>`在 a 中打开标签`<td>`并在另一个 中关闭它`<td>`。

考虑验证您的 HTML：http: [//validator.w3.org/#validate_by_input+with_options](http://validator.w3.org/#validate_by_input+with_options)

* * *

不仅如此，您还`login`为他们两个都使用了该类，那么为什么不利用它，因为您将它们的样式设置为相同呢？

```
.login {width:150px;} 
```

这将影响`login`该类的所有元素。

* * *

**延伸阅读：**

*CSS ID 和类*

*   查看 Jonathon Sampson 在他对[CSS ID vs Class](https://stackoverflow.com/questions/970730/css-id-vs-class)的回答中的示例。
*   [http://css-tricks.com/the-difference-between-id-and-class/](http://css-tricks.com/the-difference-between-id-and-class/)

*有效的 HTML*

*   [http://www.leemunroe.com/how-important-is-valid-html-web-standards/](http://www.leemunroe.com/how-important-is-valid-html-web-standards/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T04:54:48.107

您可以更改您的 html 布局，例如

**HTML**

```
<table>
<tr>
<td class="style1">
<label id="lbllogin" runat="server">Login:</label>
</td>
<td>
<input class="login" id="loginpassword" type="text" name="username"     
maxlength="75" />
</td>
</tr>
</table>
<br>
<table>
<tr>
<td class="style1">
<label id="lblpwd" runat="server">Password:</label>
</td>
<td>
<input class="login" id="loginpassword2" type="password" name="password" 
maxlength="75" />
</td>
</tr>
</table> 
```

**CSS**

> #loginpassword {宽度：150px;}
> 
> #loginpassword2 {宽度：150px;}

希望对你有效。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-25T04:44:06.480

将 css 应用于类级别而不是 id。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-04-25T04:42:15.323

做一件事。只需从两个输入标签中删除 class="login"

# cocos3d - Cocos3d：Web 应用开发支持

> ID：16206489
> 
> 赞同：0
> 
> 时间：2013-04-25T04:38:30.550
> 
> 标签：cocos3d

我想使用 Cocos3d 框架开发一个基于 Web 的 3D 应用程序。我认为这应该是可能的，因为它们支持 Java。为什么我想使用 Cocos 进行开发，因为我将使用这个基于 Web 的应用程序作为混合或 Web 应用程序解决方案在 iOS 和 Android 设备上启动。我不能使用基于three.js 或flash 的iOS 和Android 浏览器两者都不支持。有人可以告诉我我可以使用 Cocos3d 网络应用程序开发这个吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T08:47:56.077

你不能。Cocos3d 不是 cocos2d 跨平台开发框架的一部分/不被支持。它没有 Javascript 绑定，也没有 html5 版本的 cocos3d。

如果你想做 3D web 应用程序，我建议你看看 Unity 或其他引擎。

# selenium-webdriver - 限制 selenium 2 端口 - 仅限本地主机 - 无外部 IP 访问

> ID：16206491
> 
> 赞同：0
> 
> 时间：2013-04-25T04:38:37.380
> 
> 标签：selenium-webdriver, firewall

我在可以运行 selenium 服务器的 VPS 中有一个无头设置 - 没有 X 服务器。但是，可以通过 Internet 上的端口 444 访问 selenium 端口。

是否有可能只允许 localhost:4444 并且不允许外部访问？无论是 selenium 命令行选项还是防火墙/ip 表选项。

我通常在进行测试时让端口 4444 开放 2-3 个小时，我害怕在该端口上受到攻击。

我正在使用 selenium-server-standalone-2.32.0.jar 和 behat+mink。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-28T08:33:38.870

为什么不尝试使用 iptables 或等效方法关闭 WAN 接口上的端口？如果您和只有您需要使用互联网访问它，请考虑设置 VPN。

# android - 在android中应用RGB颜色过滤器后如何将图像保存在sdcard中

> ID：16206494
> 
> 赞同：3
> 
> 时间：2013-04-25T04:39:11.953
> 
> 标签：android, colors, colorfilter

目前我正在设计一个基于照片编辑的应用程序。在这样做时我遇到了一个问题，即

1.  [我已经通过这个链接](http://android-er.blogspot.in/2012/09/adjust-lightness-and-darkness-of.html)浏览了一个教程“如何为图像应用 RGB 滤色器”，这个教程非常有用而且很好。
2.  但问题是在对图像应用 RGB 滤色器后，我需要将更改后的图像保存在 sd 卡中。
3.  我为此搜索了很多，但没有找到确切的东西。
4.  他们中的许多人建议使用paint()，但我不知道如何使用它。
5.  所以我的问题是“在对图像应用 RBG 着色后，我需要将该图像保存在 SD 卡中，但我没有找到如何去做”？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-25T05:09:15.853

# 如何将 Android ImageView 保存到 SD 卡

您`ImageView`已经通过各种照明效果和滤色器进行了修改，现在您希望将结果作为 .jpg 或 .png 格式的图像保存到 SD 卡中。

**方法如下**：

1.  从加载`Bitmap`图像`View`。
2.  将图像保存`Bitmap`到 SD 卡。

**示例**：
*不要忘记测试异常并将必要的权限添加到您的清单中！*

```
ImageView imageView = <View to save to SD card>;
Bitmap bitmap = loadBitmapFromView(imageView);
final String pathTxt = Environment.getExternalStorageDirectory();
File storagePath = new File(pathTxt);
File file = new File(storagePath, "filename.jpg");
FileOutputStream out = new FileOutputStream(file);
bitmap.compress(Bitmap.CompressFormat.JPEG, 80, out);
out.flush();
out.close();

private Bitmap loadBitmapFromView(View v) {
    final int w = v.getWidth();
    final int h = v.getHeight();
    final Bitmap b = Bitmap.createBitmap(w, h, Bitmap.Config.ARGB_8888);
    final Canvas c = new  Canvas(b);
    //v.layout(0, 0, w, h);
    v.layout(v.getLeft(), v.getTop(), v.getRight(), v.getBottom());
    v.draw(c);
    return b;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-29T11:32:32.230

对此有两种方法...
1.在应用 RGB 值后，将这些值保存在变量中，并将这些值应用于所选图像。
2.应用 RGB 值后，从图像视图中获取图像并保存

# sql - 将数据从不同的 dbs 表插入到同一服务器中的另一个 db

> ID：16206496
> 
> 赞同：0
> 
> 时间：2013-04-25T04:39:20.600
> 
> 标签：sql, sql-server

我`table 1`在`db1`和`table 2`在`db2`. 我想插入所有三个表的结构中`table1`的`table2`数据是相同的，并且所有数据库都在同一台服务器上。`table3``db3`

任何人都可以帮助如何使用插入语句来做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T05:04:51.770

假设 MS SQL Server 和 db1、db2 和 db3 “结构”是不同的数据库：

```
USE db3
INSERT INTO table3
SELECT  CombinedTables.[Alias1], CombinedTables.[Alias2]
(
    SELECT col1 AS [Alias1], col2 AS [Alias2] FROM db1.[schema, <dbo>].table1
    UNION
    SELECT col1, col2 FROM db2.[schema, <dbo>].table2
) AS CombinedTables 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T06:22:27.320

```
Use db3
Go

INSERT INTO Table3
select * from 
(
select * from db1..Table1
union all
select * from db2..Table2
) a 
```

# sql - SQL SELECT 字符串大于使用 count()

> ID：16206498
> 
> 赞同：3
> 
> 时间：2013-04-25T04:39:24.400
> 
> 标签：sql, count

我正在尝试列出研究生成员多于本科生成员的群体。我觉得我的想法背后有这个概念，但是进行查询比简单的翻译要困难一些。下面是我的代码，我目前在 COUNT(student.career = 'GRD') 处出现缺少右括号的错误。谢谢。

```
SELECT studentgroup.name 
COUNT(student.career = 'GRD') - COUNT(student.career = 'UGRD') 
AS Gradnum FROM studentgroup 
INNER JOIN memberof ON studentgroup.GID = memberof.GroupID
INNER JOIN student ON memberof.StudentID = student.SID
WHERE Gradnum > 1; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T04:41:09.267

```
SELECT studentgroup.name 
SUM(CASE WHEN student.career = 'GRD' THEN 1 ELSE 0 END) - SUM(CASE WHEN student.career = 'UGRD' THEN 1 ELSE 0 END) 
AS Gradnum FROM studentgroup 
INNER JOIN memberof ON studentgroup.GID = memberof.GroupID
INNER JOIN student ON memberof.StudentID = student.SID
WHERE Gradnum > 1
GROUP BY studentgroup.name; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T06:24:00.030

```
SELECT studentgroup.GID, max(studentgroup.name)
FROM studentgroup 
INNER JOIN memberof ON studentgroup.GID = memberof.GroupID
INNER JOIN student ON memberof.StudentID = student.SID
GROUP BY studentgroup.GID
HAVING SUM(CASE WHEN student.career = 'GRD' THEN 1 
                WHEN student.career = 'UGRD'THEN -1
                ELSE 0
            END) >0 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-25T06:00:31.757

我使用了 WITH As 子句，大多数 DBMS 都支持，比如 SQL Server、PostGresSQL，除了 MySQL

```
With grpTbl As
(

SELECT studentgroup.name As StudentGroupName,
       SUM( CASE WHEN student.career = 'GRD' THEN 1 ELSE 0 END ) AS 'TotalGraduate',
       SUM( CASE WHEN student.career = 'UGRD' THEN 1 ELSE 0 END ) AS 'TotalUnderGraduate'

FROM studentgroup 
INNER JOIN memberof ON studentgroup.GID = memberof.GroupID
INNER JOIN student ON memberof.StudentID = student.SID

)

SELECT StudentGroupName
FROM grpTbl 
WHERE TotalGraduate > TotalUnderGraduate 
```

`WHERE`对于 MySQL，您可以使用临时表来存储 First 查询的结果集，并过滤掉在子句中的毕业生多于 UnderGraduate 的 GroupNames 。此方法适用于其他 DBMS，不同之处在于创建临时表的语法。

```
CREATE TEMPORARY TABLE grpTbl (
StudentGroupName varchar(255),
TotalGraduate INT,
TotalUnderGraduate INT
);

INSERT INTO grpTbl
SELECT studentgroup.name As StudentGroupName,
           SUM( CASE WHEN student.career = 'GRD' THEN 1 ELSE 0 END ) ,
           SUM( CASE WHEN student.career = 'UGRD' THEN 1 ELSE 0 END ) 

    FROM studentgroup 
    INNER JOIN memberof ON studentgroup.GID = memberof.GroupID
    INNER JOIN student ON memberof.StudentID = student.SID 

 SELECT StudentGroupName
    FROM grpTbl 
    WHERE TotalGraduate > TotalUnderGraduate

 DROP TABLE grpTbl 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-25T06:45:19.330

另一种选择

```
SELECT studentgroup.name
FROM studentgroup INNER JOIN memberof ON studentgroup.GID = memberof.GroupID
                  INNER JOIN student ON memberof.StudentID = student.SID
GROUP BY studentgroup.name
HAVING COUNT(CASE WHEN student.career = 'GRD' THEN student.career END) 
         > COUNT(CASE WHEN student.career = 'UGRD' THEN student.career END) 
```

# html - 如何在 Bootstrap 中制作 960 粘性页脚？

> ID：16206501
> 
> 赞同：0
> 
> 时间：2013-04-25T04:39:54.057
> 
> 标签：html, css, twitter-bootstrap, footer, sticky-footer

我还是 Bootstrap 的新手。如果我在 960 容器内进行设计，并且希望页脚正确地放入内部并粘在底部，我该如何编写代码？我发现的所有内容仅适用于在整个视图中运行页脚/导航。我已经尝试过 github 示例，甚至我的同学也不知道如何解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T13:49:29.487

在 bootstrap.css 参考下面添加这个 CSS：

```
 <!-- CSS -->
    <style type="text/css">

      /* Sticky footer styles
      -------------------------------------------------- */

      html,
      body {
        height: 100%;
        /* The html and body elements cannot have any padding or margin. */
      }

      /* Wrapper for page content to push down footer */
      #wrap {
        min-height: 100%;
        height: auto !important;
        height: 100%;
        /* Negative indent footer by it's height */
        margin: 0 auto -60px;
      }

      /* Set the fixed height of the footer here */
      #push,
      #footer {
        height: 60px;
      }
      #footer {
        background-color: #f5f5f5;
      }

      /* Lastly, apply responsive CSS fixes as necessary */
      @media (max-width: 767px) {
        #footer {
          margin-left: -20px;
          margin-right: -20px;
          padding-left: 20px;
          padding-right: 20px;
        }
      }

      /* Custom page CSS
      -------------------------------------------------- */
      /* Not required for template or sticky footer method. */

      .container {
        width: auto;
        max-width: 960px;

      }
      .container .credit {
        margin: 20px 0;
      }

    </style> 
```

然后您可以按如下方式渲染页脚：

```
<div id="footer">
      <div class="container">
        <p class="muted credit">Example </p>
      </div>
    </div> 
```

注意：如果您遇到问题，请尝试`max-width: 680px;`在`.container`CSS 代码中设置

# sql - 快速查询（秋季、春季）

> ID：16206503
> 
> 赞同：-3
> 
> 时间：2013-04-25T04:40:36.410
> 
> 标签：sql, record

如何获取具有 id 列 a 列、b 列值 = 'Fall' 或 b 列值 = 'Spring' 但不是两者都有的表的记录？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T04:44:01.800

试试这个查询

对于更新的问题，如果仅适用于 Fall 和 String 值

```
Select * from atablename where b in ('fall', 'spring') group by a having count(a) = 1 
```

对于任何值

```
Select * from atablename group by a having count(a) = 1 
```

对于老问题

```
Select * from atablename where (a = 'Fall' AND b != 'Spring') OR (a != 'Fall' AND b = 'Spring') 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T04:46:09.923

对于原始问题：

```
SELECT
    *
FROM your_table t
WHERE ((t.a = 'Fall' AND t.b != 'Spring') OR (t.a != 'Fall' AND t.b = 'Spring')) 
```

应该做的伎俩

对于新的，

```
SELECT
    t.a
    , t.b
FROM your_table t
WHERE ((t.b = 'Fall' AND NOT EXISTS (SELECT * FROM yourtable t1 WHERE t1.a = t.a AND t1.b = 'Spring'))
    OR (t.b = 'Spring' AND NOT EXISTS (SELECT * FROM yourtable t1 WHERE t1.a = t.a AND t1.b = 'Fall'))) 
```

应该管用

# shell - 在 MAC OSX 上跳过文件最后几行的 head 命令

> ID：16206507
> 
> 赞同：12
> 
> 时间：2013-04-25T04:40:55.233
> 
> 标签：shell, command-line, terminal, osx-lion

我想在终端上输出文件的所有行，但跳过最后 4 行。

根据 UNIX 手册页，以下可能是一个解决方案。

`head -n -4 main.m`

**手册页：**

> -n, --lines=[-]N 打印前 N 行而不是前 10 行；使用前导“-”，打印每个文件的最后 N 行以外的所有行

我在这里阅读了手册页。[http://unixhelp.ed.ac.uk/CGI/man-cgi?head](http://unixhelp.ed.ac.uk/CGI/man-cgi?head)

但在 MAC OSx 上，我收到以下错误。

> head: 非法行数 -- -4

还可以做些什么来实现这个目标？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2015-04-21T00:57:43.823

GNU 版本`head`支持负数。

```
brew install coreutils
ghead -n -4 main.m 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-25T06:01:41.770

Python单线：

```
$ cat foo
line 1
line 2
line 3
line 4
line 5
line 6
$ python -c "import sys; a=[]; [a.append(line) for line in sys.stdin]; [sys.stdout.write(l) for l in a[:-4]]" < foo
line 1
line 2 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-25T04:59:45.273

使用`awk`例如：

```
$ cat file
line 1
line 2
line 3
line 4
line 5
line 6
$ awk 'n>=4 { print a[n%4] } { a[n%4]=$0; n=n+1 }' file
line 1
line 2
$ 
```

它可以简化为，`awk 'n>=4 { print a[n%4] } { a[n++%4]=$0 }'`但我不确定是否所有 awk 实现都支持它。

# c# - 只读到日期时间选择器文本框

> ID：16206508
> 
> 赞同：2
> 
> 时间：2013-04-25T04:40:58.630
> 
> 标签：c#, asp.net, telerik, datetimepicker

我正在使用`Telerik DateTimePicker`.
这是我的代码，

```
<telerik:RadDatePicker runat="server" ID="datePicker" Width="150px" >
</telerik:RadDatePicker> 
```

![在此处输入图像描述](https://i.stack.imgur.com/GnEjz.jpg)

我想将`datePicker`'s设置`TextBox`为 ReadOnly 。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-25T04:52:38.343

设置[`EnableTyping`](http://www.telerik.com/help/aspnet-ajax/p_telerik_web_ui_raddatepicker_enabletyping.html)为假：

```
<telerik:RadDatePicker runat="server" 
                       ID="datePicker" 
                       Width="150px" 
                       EnableTyping="false">
</telerik:RadDatePicker> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T04:45:52.507

**尝试使用以下内容：**

```
<radCln:RadDatePicker ID="RadDatePicker1" runat="server">
        <DateInput ReadOnly="true"></DateInput>
</radCln:RadDatePicker> 
```

**参考：**

[http://www.telerik.com/community/forums/aspnet/calendar/readonly-datepicker-textbox.aspx](http://www.telerik.com/community/forums/aspnet/calendar/readonly-datepicker-textbox.aspx)

**演示：**

[http://demos.telerik.com/aspnet-ajax/calendar/examples/datepicker/shareddatepicker/defaultcs.aspx](http://demos.telerik.com/aspnet-ajax/calendar/examples/datepicker/shareddatepicker/defaultcs.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-25T04:46:21.087

RadDateTimePicker 不支持开箱即用的 ReadOnly 模式。但是您可以轻松实现 ReadOnly 行为。为此，处理并取消 ValueChanging 事件。请参考随附的示例项目。

有关更多详细信息，请访问以下链接

[http://www.telerik.com/community/forums/winforms/calendar-and-datetimepicker/datetimepicker-readonly-property.aspx](http://www.telerik.com/community/forums/winforms/calendar-and-datetimepicker/datetimepicker-readonly-property.aspx)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-10-13T07:14:01.853

以下是如何从后面的代码中启用 false 的方法：

```
RadDatePicker1.EnableTyping = false;
RadDatePicker1.DatePopupButton.Enabled = false; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-25T18:42:53.750

上述两种技术都为您提供只读行为。

您可以设置 EnableTyping="false" 如下所示：

```
<telerik:RadDatePicker runat="server" ID="rdp" EnableTyping="false" /> 
```

或者

您可以将 DateInput 设置为只读，如下所示：

```
<telerik:RadDatePicker runat="server" ID="rdp">
    <DateInput ReadOnly="true"/>
</telerik:RadDatePicker> 
```

# java - Astyanax 客户端中的 setMaxConns 和 setMaxConnsPerHost

> ID：16206515
> 
> 赞同：0
> 
> 时间：2013-04-25T04:41:24.737
> 
> 标签：java, cassandra, astyanax

我`Astyanax client`用来从`Cassandra database`. 我有一个`single cluster`. `four nodes`我有`replication factor of 2`。我试图了解两者之间有什么区别

```
setMaxConns and setMaxConnsPerHost 
```

Astyanax 客户端中的方法？我找不到关于此的适当文档。

我有一个多线程代码，它产生多个线程，然后只创建一次到 Cassandra 数据库的连接（因为它是一个单例），然后继续重用其他请求。

现在我想了解以上两种方法对读取性能有何影响？应该如何设置这些值？

如果我将上述两种方法设置为-

```
setMaxConns(-1) and setMaxConnsPerHost(20) 
```

那是什么意思呢？任何解释都会有很大帮助。

**更新代码：-**

下面是代码，我用来建立连接 -

```
private CassandraAstyanaxConnection() {

    context = new AstyanaxContext.Builder()
    .forCluster(ModelConstants.CLUSTER)
    .forKeyspace(ModelConstants.KEYSPACE)
    .withAstyanaxConfiguration(new AstyanaxConfigurationImpl()      
        .setDiscoveryType(NodeDiscoveryType.RING_DESCRIBE)
    )
    .withConnectionPoolConfiguration(new ConnectionPoolConfigurationImpl("MyConnectionPool")
        .setPort(9160)
        .setMaxConnsPerHost(20)
        .setMaxConns(-1)
        .setSeeds("host1:9160,host2:9160,host3:9160,host4:9160")
    )
    .withAstyanaxConfiguration(new AstyanaxConfigurationImpl()      
        .setCqlVersion("3.0.0")
        .setTargetCassandraVersion("1.2"))
    .withConnectionPoolMonitor(new CountingConnectionPoolMonitor())
    .buildKeyspace(ThriftFamilyFactory.getInstance());

    context.start();
    keyspace = context.getEntity();

    emp_cf = ColumnFamily.newColumnFamily(
        ModelConstants.COLUMN_FAMILY, 
        StringSerializer.get(), 
        StringSerializer.get());
} 
```

如果我正在调试这段代码，它甚至都没有进入`BagOfConnectionsConnectionPoolImpl`课堂。我在同一个类中放置了很多断点，以查看它是如何使用连接和其他默认参数的。但不知道为什么它没有击中那个类。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-26T08:28:29.617

有关这些配置属性的行为可能取决于实现。

## BagOfConnectionsConnectionPoolImpl

`BagOfConnectionsConnectionPoolImpl`是目前唯一同时满足这两个属性的实现。它的行为如下：

在每次 cassandra 操作（查询或突变）时从池中借用连接，并在操作完成后返回池。

`maxConnsPerHost`- 每个 cassandra 主机的最大连接数。

`maxConns`- 池中的最大连接数。

这两个数字都必须是正数，所以`setMaxConns(-1)`不会起作用。

在尝试从池中借用连接时，池会检查活动连接号`maxConns`。如果超出限制，它会等待直到某个连接被释放。如果在指定的超时时间内没有可用的连接，则池抛出`PoolTimeoutException`.

如果`maxConns`未超过限制，则池将尝试查找它知道的 cassandra 主机（指定为种子或在发现期间找到），其活动连接数低于`maxConnsPerHost`并连接到它。如果所有主机都达到连接限制，则池抛出`NoAvailableHostsException`.

例如，让我们以连接到 4 个节点的集群的客户端为例：

`setMaxConns(100); setMaxConnsPerHost(10)`：有效的最大连接数为 40（每个节点 10 个连接，将不再进行连接尝试）。`NoAvailableHostsException`将被抛出。

`setMaxConns(20); setMaxConnsPerHost(10)`：有效的最大连接数为20。不同主机的连接将均匀分布，但不一定要均匀分布。 `PoolTimeoutException`将被抛出。

如果节点加入或离开集群，事情会变得更加复杂，但总体思路是相同的。

## TokenAwareConnectionPoolImpl & RoundRobinConnectionPoolImpl

两者都`TokenAwareConnectionPoolImpl`&`RoundRobinConnectionPoolImpl`忽略`maxConns`配置属性。他们只是选择一个主机（取决于行令牌或随机）并尝试连接到它。

如果与该主机的活动连接数超过`maxConnsPerHost`，则池将等待直到某个连接被释放。如果在指定的超时期间没有可用的连接，则作为故障转移的一部分执行（可能）另一个主机的另一个连接尝试。

# java - Android：删除所有布局动画

> ID：16206522
> 
> 赞同：3
> 
> 时间：2013-04-25T04:42:13.417
> 
> 标签：java, android

所以我注意到 Android 会在活动之间产生轻微的褪色，这真的让我很烦恼，我想知道是否有任何方法可以摆脱它，让它在没有动画的情况下“捕捉”到下一个屏幕？

我环顾四周，但找不到任何能真正回答我问题的东西。我假设它将是基于 XML 的，但我看到这个人在这里试图以编程方式进行操作： [我如何消除 LayoutTransition 动画之前的延迟](https://stackoverflow.com/questions/5225367/how-do-i-eliminate-the-delay-before-an-layouttransition-animation)但做他所做的事情（应用“空白”动画）似乎没有改变任何东西。

有什么能指出我正确的方向吗？塔！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-25T04:56:56.083

最优雅的控制是使用样式和主题实现的。通过这种方式，您可以逐个`Application`和`Activity`逐个地控制它。

styles.xml（`WhateverTheme`作为您为应用程序隐式或显式选择的 Android 主题）：

```
<resources
    xmlns:android="http://schemas.android.com/apk/res/android" >

    <style
        name="MyWhateverTheme"
        parent="@android:style/WhateverTheme">
        <item name="android:windowAnimationStyle">@style/MyActivityAnim</item>
    </style>

    <style
        name="MyActivityAnim">
        <item name="android:windowEnterAnimation">@null</item>
        <item name="android:windowExitAnimation">@null</item>
    </style>
</resources> 
```

当然，你也可以`@animation`这样指定custom。

在您的 Manifest.xml 中：

```
 <application
        android:theme="@style/MyWhateverTheme" > 
```

并将其更改为特定的`Activity`：

```
 <activity
            android:theme="@style/SomeOtherTheme" > 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-25T04:49:43.380

使用`FLAG_ACTIVITY_NO_ANIMATION`

```
Intent i = new Intent(this, nextActivity.class);
i.addFlags(Intent.FLAG_ACTIVITY_NO_ANIMATION);
startActivity(i); 
```

# android - Android 键盘未显示在 webview 的文本框 onfocus 上

> ID：16206549
> 
> 赞同：0
> 
> 时间：2013-04-25T04:44:59.390
> 
> 标签：android, android-webview, android-keypad

在我的应用程序中，android**键盘未显示在 webview 的文本框 onfocus**中。这有什么限制吗？我在 webview touchlistener 中尝试**了 webview.requestFocus()**方法。但是文本框始终是焦点，根本没有显示键盘。

```
 @Override
public boolean onTouch(View v, MotionEvent event) {
    // TODO Auto-generated method stub
    switch (event.getAction()) {
    case MotionEvent.ACTION_DOWN:
    case MotionEvent.ACTION_UP:
        if (!v.hasFocus()) {
            v.requestFocus();
        }
        break;
}
return false; 
```

}

我已在 oncreate 方法中将此侦听器设置为**webview.setOnTouchListener(this);**

我该如何解决这个问题。？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T05:23:01.953

I have implemented it like this in my onCreate and this seems to fix it. It's basically the same code you have but with the `_webView.requestFocus(View.FOCUS_DOWN);` call added before setting the onTouchListener.

```
 _webView.requestFocus(View.FOCUS_DOWN);
    _webView.setOnTouchListener(new View.OnTouchListener() {
        @Override
        public boolean onTouch(View v, MotionEvent event) {
            switch (event.getAction()) {
                case MotionEvent.ACTION_DOWN:
                case MotionEvent.ACTION_UP:
                    if (!v.hasFocus()) {
                        v.requestFocus();
                    }
                    break;
            }
            return false;
        }
    }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T05:25:12.840

Try this to open the keyboard.

```
InputMethodManager inputMethodManager = (InputMethodManager) cntx
                .getSystemService(cntx.INPUT_METHOD_SERVICE);
        inputMethodManager.toggleSoftInputFromWindow(
                view.getApplicationWindowToken(),
                InputMethodManager.SHOW_FORCED, 0);
        view.requestFocus(); 
```

# java - 将 2d 数组转换为 Java 中的列表列表

> ID：16206551
> 
> 赞同：1
> 
> 时间：2013-04-25T04:45:05.907
> 
> 标签：java, list, data-structures, multidimensional-array

所以，这可能是一个简单的问题，但我找不到任何简单或优雅的方法来做到这一点。在 Java 中将数组转换为列表是微不足道的

```
Double[] old = new Double[size];
List<Double> cast = Arrays.asList(old); 
```

但我目前正在处理图像，我希望能够将此功能扩展到二维数组，而不必遍历附加到列表的数组的一维。

```
Double[][] -> List<List<Double>> 
```

基本上是我想要实现的。我有一个解决方案：

```
Double[][] old= new Double[width][height];
List<List<Double>> new= new ArrayList<List<Double>>();
for (int i=0;i<old.length();i++){
    new.add(Arrays.asList(old[i]));
} 
```

我想要比这更好并且可能更快的东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T05:03:20.607

要做到这一点，唯一更快的方法是用更漂亮的视图。你可以像这样用[Guava](http://guava-libraries.googlecode.com)做到这一点：

```
Double[][] array;
List<List<Double>> list = Lists.transform(Arrays.asList(array),
  new Function<Double[], List<Double>>() {
    @Override public List<Double> apply(Double[] row) {
      return Arrays.asList(row);
    }
  }
} 
```

这会在恒定时间内返回一个视图。

除此之外，您已经有了最好的解决方案。

（FWIW，如果你最终使用 Guava，你可以使用`Doubles.asList(double[])`这样你就可以使用原语`double[][]`而不是 boxed `Double[][]`。）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2021-05-20T02:10:30.700

就像 Java8 一样`Arrays.stream(array).map(Arrays::asList).collect(Collectors.toList())`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-09-11T18:18:51.077

之后`JAVA 8 stream APIs`我们可以以更快、更简洁的方式从二维数组中获取列表列表。

```
Double[][] old= new Double[width][height];
List<List<Double>> listOfLists = Arrays.stream(Objects.requireNonNull(old)).map(row -> {
        return Arrays.asList((row != null) ? row : new Double[0]);
    }).collect(Collectors.toList()); 
```

# java - 替换单个字符串中的字符

> ID：16206557
> 
> 赞同：2
> 
> 时间：2013-04-25T04:45:41.363
> 
> 标签：java, string

使用java如何仅在单个字符出现时替换字符串中的字符？

例如：
将 single 替换`*`为 a`#`

输入字符串：

```
a*b**c*d***e 
```

输出字符串：

```
a#b**c#d***e 
```

`inputString.replaceAll("*", "#");` 替换所有`*s`并返回`a#b##c#d###e`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-25T04:54:21.613

您可以使用[负前瞻和后视](http://www.regular-expressions.info/lookaround.html)：

```
String s = "a*b**c*d***e";
String r = s.replaceAll("(?<!\\*)\\*(?!\\*)", "#"); // a#b**c#d***e 
```

这读为：“一个 * 前面没有 * 并且后面没有 *”（注意`*`必须在正则表达式中转义，因为它是一个元字符）。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-25T04:50:57.950

尝试使用 charAt(n) 方法，将数字 n（参数）设置为 * 单个的数量，然后将字符串设置为“#”，看看是否有帮助。

# ruby - 嵌套键的 Ruby 编码问题

> ID：16206558
> 
> 赞同：5
> 
> 时间：2013-04-25T04:45:43.143
> 
> 标签：ruby

为了解决[YAML 不兼容](https://stackoverflow.com/questions/16199392/how-to-parse-rubys-yaml-in-php-sfyaml-and-spyc-wont-do-it-right)的问题，我正在尝试用 Ruby 编写命令行脚本。问题在于我对 Ruby 完全不熟悉。

所以我制作了以下脚本：

```
require 'json'
require 'yaml'

thing = YAML.load('--- 
author_id: 
- 0
- 1
subject: 
- ""
- !binary |
  0KHQtNC10LvQsNGC0Ywg0LPRgNCw0LzQvtGC0L3Ri9C5INCy0L3QtdGI0L3Q
  uNC5INCy0LjQtCDQtNC70Y8g0LjQvNC10Y7RidC10LPQvtGB0Y8=
')

puts thing.to_json
# puts thing['subject'][1].to_json # Issues the same error 
```

现在我得到了`yaml2json.rb:15:in`encode': "\xD0" from ASCII-8BIT to UTF-8 (Encoding::UndefinedConversionError)`

如何让它认为解码的 base64 是 UTF-8？通常我不知道一个键的确切名称，`subject`只是一个例子。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-25T07:58:22.313

```
thing['subject'][1].force_encoding('utf-8')
puts thing.to_json 
```

产生：

```
{"author_id":[0,1],"subject":["","Сделать грамотный внешний вид для имеющегося"]}

```

由于您不知道字符串将在哪里，因此目前想到的最佳选择是递归遍历哈希，强制编码所有字符串。可能有更优雅的解决方案。

# python - 姜戈。不将外键传递给模板

> ID：16206559
> 
> 赞同：0
> 
> 时间：2013-04-25T04:45:49.363
> 
> 标签：python, django, django-views

在 Django 中，我过滤了数据并显示了类似的结果。例如

```
Alabama(20)
Iowa(12) 
```

这里“*阿拉巴马州，爱荷华州*”是州名，括号内的“20,12”是否。特定州提供的工作机会。单击阿拉巴马州或爱荷华州时，它会显示该特定州的职位空缺。但我没有将 emp_id 传递给模板页面。给这个想法...

*模型.py*

```
class User(models.Model):
     first_name= forms.CharField(max_length=30,widget=forms.TextInput())
     last_name = forms.CharField(max_length=30,widget=forms.TextInput())
     username = forms.CharField(max_length=30,widget=forms.TextInput())
     email = forms.EmailField(widget=forms.TextInput())
     password = forms.CharField(widget=forms.PasswordInput())
     companyname = forms.CharField(max_length=30,widget=forms.TextInput())

class jobs(models.Model):
     emp = models.ForeignKey(User, unique=False)
     title = models.CharField(max_length=30)
     referencecode = models.CharField(max_length=30)
     jobsummary = models.TextField()
     jobdetails = models.TextField()
     key_skills = models.CharField(max_length=30)
     states = models.CharField(max_length=30) 
```

*视图.py*

```
def search_result(request):
     details3 = jobs.objects.values('state').annotate(count=Count('state')).order_by('-count')
     return render_to_response('searchresult.html', {'details3': details3}) 
```

*搜索结果.html*

```
{% for d2 in details3 %}
<li><a style="text-decoration:none;" href="/accounts/CompanyList/{{d2.emp}}/" >{{ d2.state}}({{ d2.count }})</a></li>
{% endfor %} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T04:55:14.140

```
jobs.objects.values('state') 
```

您只选择`state`字段，为什么您还期望`emp`在那里？

```
jobs.objects.values('state', 'emp_id') 
```

这是你想要的吗？

# jquery - Jquery--级联下拉菜单不绑定值？

> ID：16206567
> 
> 赞同：0
> 
> 时间：2013-04-25T04:46:28.943
> 
> 标签：jquery, asp.net, cascadingdropdown

嗨 iam 在 asp.net 中使用 Jquery 使用 Cascading Dropdown

我的 webMethod 被调用，我得到结果但值没有被绑定。

这是我的代码

```
 if ($(".ddlService").val() != "") {
                $.ajax({
                    type: "POST",
                    contentType: "application/json; charset=utf-8",
                    url: "Port.aspx/VCode_Get",
                    data: "{ServiceID:'" + $(".ddlService").val() + "'}",
                    dataType: "html",
                    success: function (html) {
                        try {                           
                            Success(html);
                        } catch (ex) {
                            alert("ErrCode:7");
                        }
                    },
                    error: function (msg) {
                        alert("ErrCode:8");
                    }
                })
                return false;
            }
            else {
                    $(".ddlVoyage").empty();
                    $(".ddlVoyage").append("<option value=''>Select </option>");
                }
        });
    });

    function Success(result) {
       alert("SUccess Called");
       $(".ddlVoyage").empty();
       $(".ddlVoyage").append("<option  value=''>Select </option>");

       $.each(data, function (index, result) {
           $(".ddlVoyage").append("<option value='" + result.VoyageMasterID + "'>" + result.VoyageCode + "</option>");

        });          
    } 
```

我收到警报

> **alert("调用成功");**

ALso to the targent Dropdown iam getting value Select bind to it, but values are not getting bind

我的数据库中也有值..，

我认为需要在 iam 打击的这两条线上进行更改

```
 $.each(data, function (index, result) {
           $(".ddlVoyage").append("<option value='" + result.VoyageMasterID + "'>" + result.VoyageCode + "</option>"); 
```

我不知道如何将这些值绑定到 Select ，我在这里感到震惊，任何人都可以帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T04:51:15.593

我认为您以错误的方式绑定 html..

```
 ..<option value='" + result.VoyageMasterID + "'>"...
                  //--^^^^^^^^^^^^^^^^---here looks like you have a response as JSON.. 
```

尝试这个

```
 $.ajax({
        type: "POST",
        ...
        dataType: "json",  //here get response as json
        .....  
       }); 
```

并确保您在控制器中将响应作为 JSON 发送（我认为您已经这样做了）.. 将 dataType 更改为 JSON 应该可以工作..

**更新**

你的 json

```
 { "Table": [ { "VoyageMasterID": 3, "VoyageCode": "9101" }, { "VoyageMasterID": 3, "VoyageCode": "9101" }]} 
```

尝试这个

```
function Success(result) {
   alert("SUccess Called");
   $(".ddlVoyage").empty();
   $(".ddlVoyage").append("<option  value=''>Select </option>");

   $.each(result.Table, function (index, value) {
       $(".ddlVoyage").append("<option value='" + value.VoyageMasterID + "'>" + value.VoyageCode + "</option>");

    });          
 } 
```

因为您的 json 在对象数组中.. 您必须遍历 result.Table（您的对象的名称是表）并获取其对应的 voyagemasterid 和 voyagecode

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-10-09T07:36:52.817

尝试这个

```
$(".ddlVoyage").append("<option value='" + value.Value + "'>" + value.Text + "</option>"); 
```

这就是我使用它的方式

```
 $('#offices').change(function () {
            $.ajax({
                url: '@Url.Action("FillDepartments", "Contact")',
                type: 'POST',
                cache: false,
                data: { id: $(this).val() },
                dataType: 'json',
                success: function (departments) {
                    $.each(departments, function (i, departments) {
                        $("#departments").append('<option value=' + departments.Value + '>' + departments.Text + '</option>')
                    });
                },

                error: function (error) {
                    alert(errorss);
                }
            });
        }); 
```

# sql - 我怎样才能透视这行

> ID：16206571
> 
> 赞同：0
> 
> 时间：2013-04-25T04:47:21.103
> 
> 标签：sql, sql-server-2008, tsql, pivot

我的基本查询

```
 ID           Days      Y   Type
3014    L;M;M;J;V;S;D   15  PDC
3014    L;M;M;J;V;S;D   16  PDC
3014    NULL            17  PDC
3014    NULL            18  PDC
3014    NULL            19  PDC
3014    NULL            20  Altern
3014    NULL            21  Altern 
```

我想要达到的目标

```
3014 L;M;M;J;V;S;D L;M;M;J;V;S;D NULL NULL NULL NULL 15 16 17 
```

我的 Sql

```
 select * from (select 
    FS.FieldStudyId,
    C.Day as Dayss,
    C.IDCourse,
    C.Type
from 
    FieldStudy FS,
    Course C  
where 
    Fs.FieldStudyId = C.FieldStudyId)d
pivot
(
  max(Dayss)
  for FieldStudyId in (select z.FieldStudyId from FieldStudy z) 
)x; 
```

但我不工作

```
Msg 156, Level 15, State 1, Line 14 Incorrect syntax near the keyword 'select'.
Msg 102, Level 15, State 1, Line 14 Incorrect syntax near ')' 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T04:48:41.170

SQL Server 不允许 PIVOT 子句中的子查询。您将不得不使用动态 SQL，或显式列出它们（静态列表）。

例如

```
declare @sql nvarchar(max);
select @sql = isnull(@sql + ',', '') + quotename(FieldStudyId)
from FieldStudy

set @sql = '
select *
from (
  select 
      FS.FieldStudyId,
      C.Day as Dayss,
      C.IDCourse,
      C.Type
  from 
      FieldStudy FS,
      Course C  
  where 
      Fs.FieldStudyId = C.FieldStudyId)d
pivot
(
  max(Dayss)
  for FieldStudyId in (' + @sql + ') 
)x;';
exec (@sql); 
```

尽管这向您展示了如何使用 PIVOT 列的动态列表，但它不会在您的问题中产生答案，因为问题根本不清楚。稍微改变一下以这些`IDCourse`值为中心：

```
declare @sql nvarchar(max);
select @sql = isnull(@sql + ',', '') + quotename(IdCourse)
from Course;

--select @sql;

set @sql = '
select *
from (
  select 
      FS.FieldStudyId,
      C.Day as Dayss,
      C.IDCourse
  from 
      FieldStudy FS,
      Course C  
  where 
      Fs.FieldStudyId = C.FieldStudyId)d
pivot
(
  max(Dayss)
  for IdCourse in (' + @sql + ') 
)x;';
exec (@sql); 
```

你可以得到类似下面的东西：

```
| FIELDSTUDYID |            15 |            16 |     17 |     18 |     19 |     20 |     21 |
---------------------------------------------------------------------------------------------
|         3014 | L;M;M;J;V;S;D | L;M;M;J;V;S;D | (null) | (null) | (null) | (null) | (null) | 
```

但它不会给你`15...16...17`问题的尾随。

# php - 仅当会话存在时才显示页面的 html

> ID：16206572
> 
> 赞同：-3
> 
> 时间：2013-04-25T04:47:21.587
> 
> 标签：php

```
 <?php

ini_set("log_errors", 1);
ini_set("error_log", "errorlog.log");

$recid= $_POST['recid'];
$username = $_POST['name'];
$email = $_POST['email'];
$ownername = $_POST['ownername'];

include ("connection.php");

$result = $db->query("UPDATE users SET verified='y' WHERE recid='$recid'"); 

$filename = str_replace(" ","_", trim($username) );
mkdir("Business_Pages/". $filename."/");

$jquery = "<script src='http://code.jquery.com/jquery-1.9.1.min.js'> </script>";
$jqueryui = "<script src='http://code.jquery.com/ui/1.10.2/jquery-ui.js'> </script>";
$jquerycss = "<link rel='stylesheet' href='http://code.jquery.com/ui/1.10.2/themes/smoothness/jquery-ui.css'>";
$postdata = "<script src='../../Scripts/postdata.js'> </script>";
$pagecss = "<link rel='stylesheet' href='../../CSS/businesspages.css'>";
$wclogo = "<img src='../../wc.png' id='wc'>";
$postinput = "<input type='text' id='post' placeholder='Post' name='post'>";
$postdate = "<input type='text' id='date' placeholder='Enter Date' name='date'>";
$accountinfo = "<table id='accountinfo'> <tr> <td> <img src='../../testresteraunt.png' id='testresteraunt'> </td> </tr> <tr>                     <td> $username </td> </tr> <tr> <td> $ownername </td> </tr> </table>";
$links = "<table id='links'> <tr> <td> </td> <td> </td> </tr> </table> <div id='header'>";

$fp = fopen("Business_Pages/". $filename . "/" . $filename . ".html", "w");

fwrite($fp,"<?php session_start()");

fwrite($fp,"if(isset($_SESSION['id'])) { ?>");

fwrite($fp,"<!DOCTYPE html> <html> <head>");

fwrite($fp,"</head>");

fwrite($fp,"<body>");

fwrite($fp,"</body> </html>");

fwrite($fp,"<?php } ?>");

fclose($fp);

$to = "$email";
$subject = "Account Creation";
$message = "Congratulations you have been accepted to Wolfeboro Connection";
$from = "info@wolfeboroconnection.com";
$headers = "From:" . $from;

mail($to, $subject, $message, $headers)

?> 
```

我试图仅在会话有效时显示 html，但 php 说它是意外的 if 语句和
**解析错误：语法错误，意外的 T_ENCAPSED_AND_WHITESPACE，期望****/home/content/96/10688096/html/**中的 T_STRING 或 T_VARIABLE 或 T_NUM_STRING **verify.php**在第**37**
行提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T04:59:10.543

如果您尝试在浏览器上显示页面，那么您应该执行以下操作而不是编写文件然后显示它。只需将以下代码写入您要检查会话的文件中。

```
<?php 
session_start();
if( isset($_SESSION['id'])) { 
?>

<!DOCTYPE html> 
<html> 
<head>
</head>
<body></body> </html>

<?php } ?> 
```

希望能帮助到你。

好的，我发现了错误..查看下面的行

```
fwrite($fp,"if(isset(".$_SESSION['id'].")) { ?>"); 
```

将其放在您的代码中，它应该可以正常工作。如果出现任何进一步的问题，请告诉我...

嘿，这是我在我的机器上尝试过的最新代码，它有效......看看它，让我知道结果..

```
<?php
ini_set("log_errors", 1);
ini_set("error_log", "errorlog.log");

$fp = fopen("newtest.php", "w");
fwrite($fp,"<?php session_start();");
fwrite($fp,"if(isset(\$_SESSION['id'])) { ?>");
fwrite($fp,"<!DOCTYPE html> <html> <head>");
fwrite($fp,"</head>");
fwrite($fp,"<body>");
fwrite($fp,"</body> </html>");
fwrite($fp,"<?php } ?>");
fclose($fp);
?> 
```

希望能帮助到你。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T04:49:02.940

这是错误的

```
if( isset($_SESSION=['id')) { 
```

你有不想要的 = 符号

尝试这个

```
if( isset($_SESSION['id'])) { 
```

# javascript - AJAX Fave 按钮不起作用 Rails

> ID：16206573
> 
> 赞同：0
> 
> 时间：2013-04-25T04:47:22.777
> 
> 标签：javascript, ruby-on-rails, ajax

我试图让用户收藏帖子，然后通过 AJAX 向他们展示某种交互，但它不起作用。

我在控制台中遇到的错误是：

```
ActionView::Template::Error (undefined local variable or method `post_item' for #<#<Class:0x007fecb2a3d5f8>:0x007fecb2a357e0>): 
```

该按钮正在通过部分呈现：

```
<%= render "shared/fave_form", post_item: post_item %> 
```

这是按钮的代码 (shared/_fave_form.html.erb)：

```
<% if current_user.voted_on?(Post.find(post_item)) %>
     <%= link_to "unlike", vote_against_post_path(post_item.id), :remote => true, :method => :post, :class => "btn") %>
<% else %>
     <%= link_to "like", vote_up_post_path(post_item.id), :remote => true, :method => :post, :class => "btn") %>
<% end %> 
```

这是 toggle.js.erb 文件：

```
 $("#fave").html("<%= escape_javascript render('fave_form') %>"); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T05:30:29.553

当您使用`toggle.js.erb`它渲染部分没有得到`locals`价值`post_item`时，您还必须提供它。所以，您的 js 代码应该类似于以下内容

```
$("#fave").html("<%= escape_javascript(render :partial=>"fave_form", locals: {post_item: post_item}).html_safe %>); 
```

我猜您正在使用一些 ajax 调用，然后`toggle.js.erb`在您的`toggle`操作中您必须指定值`post_item`，让我们将其设为实例变量`@post_item`，以便我们可以在`toggle.js.erb`.

```
$("#fave").html("<%= escape_javascript(render :partial=>"fave_form", locals: {post_item: @post_item}).html_safe %>); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T05:09:33.247

部分使用局部变量，因此`post_item`作为局部变量传递：

```
<%= render :partial => "shared/fave_form", :locals => {post_item: post_item} %> 
```

# php - php注册表无法正常工作

> ID：16206577
> 
> 赞同：-2
> 
> 时间：2013-04-25T04:48:04.780
> 
> 标签：php, webforms, registration

我正在使用 Apache 2.4.3、MySQL 5.5.27、PHP 5.4.7、phpMyAdmin 3.5.2.2。请帮助我，我不知道这一点就无法走得更远。在我下面的代码中`$errors[]='All fields required';`，这对我不起作用。在我将其更改为`echo 'All fields required';`. 但这段代码取自一个视频教程，对他有用。谁能告诉我它不适合我的原因？

这是我的代码：

```
<?php
include 'ini.php';
?>

<form action="register.php" method="post">
   <p>Username:<br/><input type="text" name="reg_u_name" maxlength="20" ></p> 
   <p>Password:<br/><input type="password" name="reg_password" maxlength="20" ></p>
   <p><input type ="submit" value="Register" ></p>
</form>

<?php
if (isset( $_POST['reg_u_name'], $_POST['reg_password'] )) {
   $reg_u_name = $_POST['reg_u_name'];
   $reg_password = $_POST['reg_password'];

   $errors = array();

   if (empty($reg_u_name) || empty($reg_password)) {
      $errors[] = 'All fields required';
   } else {
      if (strlen($reg_u_name) > 50 || strlen($reg_password) > 50) {
         $errors[] = 'One or more fields contains too many characters';
      }
   }
}
?> 
```

如果有人投反对票，请说明原因

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T04:54:07.663

在您的 if-conidtion 尝试输入以下代码后：

```
foreach($errors as $error) {
  echo "$error<br/>\n";
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-23T04:41:45.777

```
if ( isset( $_POST['reg_u_name']) && isset($_POST['reg_password']) ) { 
```

请尝试使用这个

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-25T04:51:17.310

如果代码在同一页面中，则表单操作将为空白

```
<form action="" method="post"> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-25T04:51:54.673

您正在尝试将错误消息“所需的所有字段”放入数组中，您需要打印该数组

像这样

```
 print_r($errors); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-25T04:58:22.867

```
if( isset ( $_POST['reg_u_name']) && isset($_POST['reg_password'])) {
echo $reg_u_name = $_POST['reg_u_name'];
echo $reg_password = $_POST['reg_password'];

$errors = array();

if (empty($reg_u_name) || empty($reg_password)) {
    $errors[0]= 'All fields required';
}else{
    if (strlen($reg_u_name) > 50 || strlen($reg_password) > 50){
        $errors[0]= 'One or more fields contains too many characters';
    }
}

echo '<pre>';print_r($errors); echo '<pre>';
} 
```

现在工作

# javascript - CoffeeScript for 循环不能执行多个操作？

> ID：16206578
> 
> 赞同：0
> 
> 时间：2013-04-25T04:48:26.223
> 
> 标签：javascript, coffeescript

第一个和第二个有什么不同？第一个按预期工作，但第二个没有达到我的预期。在第一个中，我通过 callToPhotos 间接进行调用，但在第二个中，我立即调用 getPhotos 并传入相册。为什么以及如何不同？

```
$.ajax
    method:'get'
    url: '/slides/facebook-albums'
    success: (albums) ->
        renderAlbums(albums)
        callToPhotos(albums)

renderAlbums = (albums) ->
    for album in albums
        $('#facebook .main').append("<div id='#{ album['id'] }' class='album-info'><a class='#{album['id']} fb-album' href='#'>#{album['name']}</a>
        <img src=#{album['cover_photo']} width='100' height= '100' class='#{album['id']} fb-album'></div>")

callToPhotos = (albums) ->
    for album in albums
        getPhotos(album)

getPhotos = (album) ->
      $.ajax
        method: "get"
        url: "/slides/#{album['id']}/photos"
        success: (photos) ->
          renderPhotos(photos, album['id']) 
```

--

```
$.ajax
    method:'get'
    url: '/slides/facebook-albums'
    success: (albums) ->
        renderAlbums(albums)
        # callToPhotos(albums)
        getPhotos(albums)

renderAlbums = (albums) ->
    for album in albums
        $('#facebook .main').append("<div id='#{ album['id'] }' class='album-info'><a class='#{album['id']} fb-album' href='#'>#{album['name']}</a>
        <img src=#{album['cover_photo']} width='100' height= '100' class='#{album['id']} fb-album'></div>")

callToPhotos = (albums) ->
    for album in albums
        getPhotos(album)

getPhotos = (albums) ->
    for album in albums
      $.ajax
        method: "get"
        url: "/slides/#{album['id']}/photos"
        success: (photos) ->
          renderPhotos(photos, album['id']) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T05:36:08.327

它与第二个片段循环中的变量范围有关。您可以引入一个立即调用函数 (IIF) 来解决它（阅读[http://coffeescript.org/#loops](http://coffeescript.org/#loops)`do`部分底部的关键字=D）：

```
getPhotos = (albums) ->
  for album in albums
    do (album) ->
      $.ajax
        method: "get"
        url: "/slides/#{album['id']}/photos"
        success: (photos) ->
          renderPhotos(photos, album['id'])
  return 
```

不过，我确实建议您使用第一种方法，因为它与 IIF 相同，但我认为更清楚，因为额外函数现在具有描述性变量名称；也许在函数内部声明`getPhotos`函数：

```
getPhotos = (albums) ->
  getAlbum = (album) ->
    $.ajax
      method: "get"
      url: "/slides/#{album['id']}/photos"
      success: (photos) ->
        renderPhotos(photos, album['id'])

  getAlbum album for album in albums

  return 
```

（请注意，在这两种情况下，我都添加了一个空`return`，这样它就不会生成并返回数组理解作为其最后一个表达式 =P）

# javascript - ajax 请求后再次收听`$(window).load`

> ID：16206581
> 
> 赞同：5
> 
> 时间：2013-04-25T04:48:34.373
> 
> 标签：javascript, html, ajax

我正在加载另一个 HTML 页面的 AJAX 请求，然后将其插入到当前页面的 DOM 元素中。

我通过 AJAX 获得的页面包括`link`对样式表的引用，以及必须从服务器加载的多个图像。

我想在***加载来自 AJAX 调用的所有资源***（*包括引用的样式表和图像*）之后执行代码。
请注意，这些样式表和图像不是直接从 AJAX 加载的，而是作为从 AJAX 调用插入 HTML 的结果加载的。

因此，我不是在寻找`success:`回调，而是`$(window).load(function () { ... });`在 AJAX 调用之后寻找另一个回调（我尝试再次收听`$(window).load`但没有成功。

如果您需要更多代码，请告诉我。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-25T05:10:25.967

检查样式表是否已经加载是很困难的——尤其是跨浏览器。 [本文](http://blog.rjzaworski.com/2011/08/firing-events-when-a-stylesheet-finishes-loading/)建议在加载的样式表中有一个将被已知规则更改的元素并轮询以检查其样式是否已更改以检测加载。

图像更容易，我希望它们需要更长的时间来加载，所以你可能只检查图像加载就可以了。

```
success: function (html) {
    var imageloads = [];
    $(html).find("img").each(function () {
        var dfd = $.Deferred();
        $(this).on('load', function () {
            dfd.resolve();
        });
        //Image was cached?
        if (this.complete) {
            $(this).trigger('load');
        }
        imageloads.push(dfd);
    });
    $.when.apply(undefined, imageloads).done(function () {
        //images finished loading
    });
} 
```

# iphone - 如何使用文本字段在 iPhone 应用程序中进行签名

> ID：16206587
> 
> 赞同：-2
> 
> 时间：2013-04-25T04:48:52.807
> 
> 标签：iphone, ios, touch

我有一个应用程序，我希望用户签署合同签名，因为我们通常在纸上签名，所以有什么方法可以实现签名用户可以像我们通常在文档中那样用手指做的事情。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T04:53:02.627

您应该使用 iOS 中可用的基本绘图功能

```
CGContextAddQuadCurveToPoint 
```

然后拍摄图像，然后添加到字段中。在您要签名的地方有一个 ImageView 很好。

# c# - DataGridView 无效的转换异常

> ID：16206588
> 
> 赞同：1
> 
> 时间：2013-04-25T04:48:56.173
> 
> 标签：c#, datagridview, casting

我正在尝试根据一个单元格的值与另一个单元格的值计算百分比。数据看起来是这样的，只是更大一些，但思路是一样的：

```
 c1    c2    c3   tot

r1    1     0     3     4

r2    1     2     1     4  

r3    0     0     1     1

tot   2     2     5 
```

任何单元格中的所有值都只是整数。我正在尝试创建一个如下所示的表：

```
 c1    c2    c3

r1    0.25  0     0.75

r2    0.25  0.50  0.25

r3    0     0     1 
```

我不需要帮助来创建表格——我实际上可以创建表格——我只是无法正确地进行转换，以便用正确的（百分比）数据填充表格。我有以下代码：

```
for (int i = 7; i < 12; i++)
{
  for (int j = 0; j < 7; j++)
  {
    double hold1 = (double)gridHolder.Rows[i - 7].Cells[j + 1].Value;
    double hold2 = (double)gridHolder.Rows[i - 7].Cells[8].Value;
    gridHolder.Rows[i].Cells[j + 1].Value = hold1 / hold2;
  }
} 
```

`gridHolder`是表的名称，以防不明显。

当我运行它时，我得到了这个异常：

```
An unhandled exception of type 'System.InvalidCastException' occurred in PCHG Simulator.exe

Additional information: Specified cast is not valid. 
```

如何将单元格的内容转换为`decimal`or`double`以便除法将是十进制结果？如果您还可以解释如何将结果格式化为小数点后 2 位，那就太好了，但我相信我可以通过其他方式解决这个问题。

**编辑：**我不知道这是否值得注意，但是，如果我`int`为每一个：

```
int hold1 = (int)gridHolder.Rows[i - 7].Cells[j + 1].Value;
int hold2 = (int)gridHolder.Rows[i - 7].Cells[8].Value; 
```

它工作得很好，除了除法变成整数除法而不是小数除法的明显问题。所以问题显然出在我试图转换成双倍的方式上。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T04:55:28.567

尝试使用 Convert.ToDouble(value)

# mercurial - 如何在 Mercurial 中获取提交的摘要

> ID：16206590
> 
> 赞同：5
> 
> 时间：2013-04-25T04:49:01.047
> 
> 标签：mercurial

我想获得包含以下信息的提交摘要

*   工作天数，开始日和结束日。
*   每天的活动摘要 - 只是提交次数和更改的行数。

有没有这样做的扩展？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-25T08:28:11.070

`hg help log`+ `hg help diff`+ `hg help revsets`+ `hg help templating` `hg help dates`+ 重击

*   第一次提交的日期|最后一次提交

初始提交总是 rev 0，最新的总是提示

`hg log -r 0 --template "{date|date}\n"`

`hg log -r tip --template "{date|date}\n"`

*   工作天数：提交次数非零的天数

`hg log --template "{date(date,'%d%m%y')}\n" | sort -u | wc -l`

*   每日活动摘要 - 仅提交次数

`hg log -r "date('YYYY-MM-DD')" --template "{.}\n" | wc -l`

更改的行数（第一个丑陋的草稿迭代：“feci quod potui, faciant meliora potentes”）

`hg diff --stat -r "first(date('YYYY-MM-DD'))" -r "last(date('YYYY-MM-DD'))"`

这种差异的样本输出

```
 404.php        |    4 +-
 comments.php   |   14 +-----
 footer.php     |    2 +-
 functions.php  |   24 +++++++++-
 header.php     |    2 +-
 readme.txt     |   38 +++++++++++++++++
 screenshot.png |  Bin
 search.php     |   12 +++-
 sidebar.php    |   45 ++------------------
 style.css      |  121 +++++++++++++++++++++++++++----------------------------
 10 files changed, 139 insertions(+), 123 deletions(-) 
```

**注意：** YYYY-MM-DD 是占位符，你必须将这种格式的真实日期写入命令

**注2：**准备和测试结果不到一小时！！！

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-04-26T12:32:34.610

[LazyBadger 的回答](https://stackoverflow.com/a/16209901/351301)为您提供了一种查找第一次和最后一次提交日期的方法。如需了解每日提交的变更集数量和更改的代码行数，请启用Mercurial 附带的[流失扩展。](http://mercurial.selenic.com/wiki/ChurnExtension)在全局或存储库配置中：

```
[extensions]
churn= 
```

然后按时间顺序细分每天的*变更集数量：*

```
$ hg churn --template "{date|shortdate}" --sort --changesets 
```

或代码行：

```
$ hg churn --template "{date|shortdate}" --sort 
```

可选择`diffstat`单独显示添加/删除的行：

```
$ hg churn --template "{date|shortdate}" --sort --diffstat 
```

检查`hg help churn`更多选项，例如限制日期范围或考虑的变更集。

# django - Django - 查询所有具有公共字段的模型

> ID：16206597
> 
> 赞同：0
> 
> 时间：2013-04-25T04:49:31.910
> 
> 标签：django, django-queryset

如果我有很多 Django 模型 - 都具有以下公共字段： -

```
created_by = models.ForeignKey(User)
modified_by = models.ForeignKey(User) 
```

我想查询所有模型以找出特定用户创建或修改了哪些对象，有没有一种理智的方法可以实现这一目标？

还是我必须退回到做`ModelA.objects.filter(created_by=userone)` `ModelB.objects.filter(created_by=userone)`等等？

我应该提到，实际上这些字段位于一个抽象基类中，所有其他模型都从该基类继承它们。但是让我们假装我没有告诉你我刚刚告诉你的关于抽象基类的事情，还有办法做我想做的事吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T05:24:41.437

You will have to operate on one model at a time. Djano ORM managers internally make use of a class called `Queyset` which talks with database and this class `QuerySet` instances have a `model` attribute on them which is synonymous to a single table. So, they can only talk with one table, though join operations are possible. But for your scenario you will have to make multiple calls to db.

orm is just an abstraction over database, think if you can do this directly with sql.

At sql:

```
select val from test union select val from test2 union......; 
```

So there will be a lot of unions since you say you have a lot of models so doesn't make much sense to accomplish this with a single db call.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T05:32:22.950

to expand on what akshar raaj is saying, you can simplify the code by having an array of models.

```
query_models = [ModelA, ModelB, ModelC, ModelD]
for query_model in query_models:
    results = query_model.objects.filter(created_by=userone)
    if len(results) > 0:
        print '%s has it!!!' % query_model.__name__ 
```

# vba - 使用 .Controls.add 函数创建的组合框的 Combobox_Change 函数*

> ID：16206601
> 
> 赞同：1
> 
> 时间：2013-04-25T04:49:54.630
> 
> 标签：vba, excel, user-controls, combobox, userform

首先让我说，在回答这个问题之前，我已经搜索了好几个小时。

情况（所有工作） -

用户指定篮子里的苹果数量

示例 - 用户指定 2 个苹果。这将在带有组合框和文本框的多页中创建两个页面。

组合框填充了苹果名称的数据库。用户选择一个。

期望：

当用户从组合框中选择一个苹果时，我希望该多页上的文本框填充苹果特征。换句话说，只要用户从此组合框中选择一个苹果，我就需要我的代码触发。这不是从工具栏创建的组合框，所以我似乎无法使用“私人子 Combobox_Change”。

下面是我用来创建组合框的代码：

```
Set ComboBoxL = MultiPage1.Pages(pgCount).Controls.Add("Forms.combobox.1", _
"ComboBoxL" & pgCount)

With ComboBoxL

.Top = 1 * FromTop
.Left = LeftDist
.List = Sheets("TestLightList").Range("A1:A100").Value 
```

这是我用来将值拉入文本框的代码，它在测试中工作（只是在代码的另一部分中运行它）但在需要时不起作用，因为我不知道如何告诉 VBA 在用户时将其关闭从上面的组合框中选择一个项目

```
userform2!textboxC1.Value = Application.index(Range("'TestLightList'!$A$2:$E$500"), _
Application.Match(userform2!ComboBoxL1.Value, Range( _
"'TestLightList'!$A$2:$A$500"), 0), 2) 
```

*   请注意，在此代码片段中，我正在使用第一个组合框。该公式按数字顺序创建一系列它们。

谢谢！

# php - PHP sftp + fopen 与 ssh2_scp_send 相比

> ID：16206602
> 
> 赞同：2
> 
> 时间：2013-04-25T04:49:57.350
> 
> 标签：php, sftp, scp

我想如果使用 PHP sftp 打开文件有任何真正的区别，[如图所示](http://php.net/manual/en/function.ssh2-sftp.php)，使用[ssh2_scp_send](http://php.net/manual/en/function.ssh2-scp-send.php)我计划在每个 php 会话上上传多个文件，并且不想花太多时间上传文件。如果有人知道这些函数是如何在 PHP 中实现的，那么我会很高兴知道这样我就可以选择正确的。

再次感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-25T13:55:34.950

SFTP 和 SCP 是不同的协议。两者都通过 SSH 运行。

SCP 只能复制（上传/下载）文件。它不能执行任何其他操作，例如列出目录内容、删除文件等。

SFTP 是一个成熟的远程文件系统协议。

SCP 通常可能更快，因为它能够更好地利用 SSH 虚拟连接通道。但两者都值得测试。

另请注意，SCP 通常仅适用于 *nix SSH 服务器。SFTP 更通用。

有关 SFTP + SCP 的详细信息，请参阅：
[https ://en.wikipedia.org/wiki/SSH_File_Transfer_Protocol](https://en.wikipedia.org/wiki/SSH_File_Transfer_Protocol)
[https://en.wikipedia.org/wiki/Secure_copy_protocol](https://en.wikipedia.org/wiki/Secure_copy_protocol)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-25T05:12:52.543

`ssh2_sftp()`在现有连接上使用，然后您使用`fopen()`，但是，这也被大多数人认为是“不安全的”。这是`ssh2_scp_recv()`使用基于 BSD RCP 协议的安全副本的地方。SCP 使用 Secure Shell (SSH) 进行数据传输，并使用相同的身份验证机制，从而确保传输中数据的真实性和机密性。客户端可以将文件发送（上传）到服务器，可选地包括它们的基本属性（权限、时间戳）。客户端还可以从服务器请求文件或目录（下载）。SCP 默认通过 TCP 端口 22 运行。与 RCP 一样，没有定义协议细节的 RFC。

[http://www.php.net/manual/en/function.ssh2-scp-recv.php](http://www.php.net/manual/en/function.ssh2-scp-recv.php)

[http://en.wikipedia.org/wiki/Secure_copy](http://en.wikipedia.org/wiki/Secure_copy)

# c# - 在 MS Outlook 2003 中未触发 NewMailEx 事件

> ID：16206606
> 
> 赞同：0
> 
> 时间：2013-04-25T04:50:40.770
> 
> 标签：c#, outlook, outlook-2003

我正在尝试阅读 Outlook 2003 中的新邮件正文。为此，我使用的是 Microsoft.Office.Interop.Outlook.dll(11.0.0.0)。下面是我使用的代码，用于触发**NewMailEx**事件

```
// Create an Outlook application object. 
Microsoft.Office.Interop.Outlook.Application outLookApp = new Microsoft.Office.Interop.Outlook.Application();

// Ring up the new message event.
outLookApp.NewMailEx += new ApplicationEvents_11_NewMailExEventHandler(outLookApp_NewMailEx); 
```

但是，每当有新邮件到来时，此代码都不会触发事件。我正在使用 Visual Studio 2010、MS Outlook 2003 和 Windows XP 专业操作系统。

但是当我在 Windows 7 的 MS Outlook 2010 中运行相同的代码时，它工作正常。在 MS Outlook 2003中未触发**NewMailEx**事件的可能原因是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T05:26:47.940

outLookApp 是声明为局部变量（几乎会立即被垃圾收集）还是声明为在应用程序的生命周期内保持活动状态的全局/类变量？

# asp.net - alignmnet 在单选按钮列表 asp.net vb

> ID：16206620
> 
> 赞同：0
> 
> 时间：2013-04-25T04:51:39.923
> 
> 标签：asp.net, vb.net, alignment, radiobuttonlist, text-alignment

我对 asp.net 中单选按钮列表的对齐设置感到困惑，它在 Visual Basic 中显示如下。

![](https://i.stack.imgur.com/ZdBEM.png)

但是如果我编译它，它会像这样在我的浏览器中显示。

![](https://i.stack.imgur.com/HBpeN.png)

我的这个单选按钮列表的代码。

```
<td align="right" colspan="2">
                        <asp:RadioButtonList TextAlign="left" ID="RadioButtonList1" runat="server">
                            <asp:ListItem Text="Fixed Cost" Selected="true" Value="1"></asp:ListItem>
                            <asp:ListItem Text="Per Guest Charge" Value="2"></asp:ListItem>
                            <asp:ListItem Text="Percentage" Value="3"></asp:ListItem>
                        </asp:RadioButtonList>
                    </td> 
```

这是怎么发生的？我想获得像visual basic中的视图，请帮忙。

- - 更新 - -

如果我将对齐方式更改为“正确”，这就是结果。

![](https://i.stack.imgur.com/l36cR.png)

这是HTML。

```
<tr>
                    <td align="right" colspan="2">
                        <table id="ctl00_MainContent_RadioButtonList1" border="0">
        <tr>
            <td><input id="ctl00_MainContent_RadioButtonList1_0" type="radio" name="ctl00$MainContent$RadioButtonList1" value="1" checked="checked" /><label for="ctl00_MainContent_RadioButtonList1_0">Fixed Cost</label></td>
        </tr><tr>
            <td><input id="ctl00_MainContent_RadioButtonList1_1" type="radio" name="ctl00$MainContent$RadioButtonList1" value="2" /><label for="ctl00_MainContent_RadioButtonList1_1">Per Guest Charge</label></td>
        </tr><tr>
            <td><input id="ctl00_MainContent_RadioButtonList1_2" type="radio" name="ctl00$MainContent$RadioButtonList1" value="3" /><label for="ctl00_MainContent_RadioButtonList1_2">Percentage</label></td>
        </tr> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T05:10:11.543

~~你试过设置`<asp:RadioButtonList TextAlign="right"`- 你有`TextAlign="left"`吗？~~

我认为`<table>`不能保证您的结果 HTML（在您上面添加的内容中） - ASP.NET 可能会`<span>`在其他情况/浏览器中发出。

您最好的选择似乎是`<asp:RadioButtonList ... CssClass="yourClass">`结合一些 jQuery 或可能元素的直接样式来分配 CssClass。

请参阅[此更广泛的讨论](https://stackoverflow.com/questions/997342/why-does-asp-net-radiobutton-and-checkbox-render-inside-a-span)以及[此线程中已接受的答案](http://forums.asp.net/t/1089664.aspx/1)。

# c++ - 使用元编程的私有成员存在测试，GCC vs clang，哪个是正确的？

> ID：16206626
> 
> 赞同：5
> 
> 时间：2013-04-25T04:51:56.027
> 
> 标签：c++, gcc, clang

这更像是一个 c++ 标准问题。考虑以下代码：

```
template <typename T>
class has_Data
{
   typedef char one;
   typedef long two;

   template <typename C> static one test( typeof(&C::Data) ) ;
   template <typename C> static two test(...);

public:
   enum { value = sizeof(test<T>(0)) == sizeof(char) };
};

class MyClass {
private:
   struct Data {
   };
};

void function(bool val = has_Data<MyClass>::value) {} 
```

上面的代码适用于`gcc (GCC) 4.4.3`

然而随着`clang version 3.3 (2545b1d99942080bac4a74cda92c620123d0d6e9) (2ff97832e593926ea8dbdd5fc5bcf367475638a9)`

它给出了这个错误：

```
test_private_data.cpp:7:54: error: 'Data' is a private member of 'MyClass'
   template <typename C> static one test( typeof(&C::Data) ) ;
                                                     ^
/devshared/home/rhanda/test_private_data.cpp:7:37: note: while substituting explicitly-specified template arguments into function template 'test'
   template <typename C> static one test( typeof(&C::Data) ) ;
                                    ^
/devshared/home/rhanda/test_private_data.cpp:21:26: note: in instantiation of template class 'has_Data<MyClass>' requested here
void function(bool val = has_Data<MyClass>::value) {}
                         ^
1 error generated. 
```

哪一个是对的？

从标准文档（[n3485](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2012/n3485.pdf)）中，我发现了一个似乎比 gcc 更同意 clang 的声明。

> 访问控制统一应用于所有名称，无论名称是从声明还是表达式中引用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-25T08:47:50.263

我认为 GCC 是正确的。

首先要注意的是，没有非`friend`代码应该能够肯定地报告给定私有成员的存在。因此，如果这是您尝试做的事情，则必须修改您的设计。一个类可以用它的私有成员做任何事情，其他代码（除了朋友）应该没有办法知道它。这是设计使然。

但是，有[SFINAE](http://en.wikipedia.org/wiki/Substitution_failure_is_not_an_error)原则：替换失败不是错误。由于`MyClass::Data`是私有的，所以`has_Data`在我看来，代码应该表现得好像根本没有`C::Data`成员一样。因此，第一个函数会导致替换失败，它会被默默地忽略，而第二个函数就是使用的那个。添加更多代码，我的 GCC 4.7.2 编译它没有问题并且`has_Data<MyClass>::value`评估为`false`. 我认为正确的 SFINAE。

试图用[您提到的文件](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2012/n3485.pdf)中的引用来支持这一观点，我在第 14.8.2 节第 8 段中找到了以下内容：

> 注意：访问检查是替换过程的一部分。

这是标准中的非规范性注释，但对我来说似乎是一个非常易读和明确的指示，表明 SFINAE 实际上应该适用于这种情况，就像 GCC 处理它的方式一样。

*编辑：*正如[@hvd在](https://stackoverflow.com/users/743382/hvd)[评论](https://stackoverflow.com/questions/16206626/private-member-existence-test-using-meta-programming-gcc-vs-clang-which-is-rig/16210319?noredirect=1#comment23182432_16210319)中指出的那样，以上仅适用于 C++11。在旧版本的标准中，情况过去有所不同。[问题 1170：模板参数推导期间的访问检查](http://wg21.cmeerw.net/cwg/issue1170)包含有关该更改的详细信息。

由于是 GNU 扩展`-std=c++03`，GCC 不会编译此代码。仍然编译代码的事实可能被认为是不合适的，但由于前进的方向是使用 C++11 语义，我不会费心提交有关此的报告。`-std=c++11``typeof``-std=gnu++03`

# hadoop - MapReduce 内连接？

> ID：16206628
> 
> 赞同：0
> 
> 时间：2013-04-25T04:52:07.523
> 
> 标签：hadoop, mapreduce

我想将日志条目加入 GeoIP 数据库。这就是我所拥有的。

1.  在我的日志文件中，我将 IP 地址（外键）提取为密钥。并将其余条目作为值。

2.  在 GeoIP 数据库中，我有一系列 IP 映射到特定国家（IPFROM、IPTO、国家）。

现在我不确定如何加入这两个字段以及使用哪个加入。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T05:53:05.617

如果我理解正确，您想获取给定 IP 地址 inlog 文件的国家/地区名称。

您可以通过导出数据库表来创建一些 csv。

然后您可以使用分布式缓存概念来读取该文件

# java - 在java中对VO的多个动态字段使用Comparable

> ID：16206629
> 
> 赞同：10
> 
> 时间：2013-04-25T04:52:13.837
> 
> 标签：java, comparator, comparable

我有一堂课

```
public class StudentVO {
   int age;
   String name;  
} 
```

我在两个不同的领域使用了相同的课程。在一个地方，我需要根据年龄进行排序。在另一个地方，我需要根据姓名进行排序，而在另一个地方，我可能需要根据年龄和姓名进行排序。我怎样才能做到这一点？如果一个字段我可以覆盖`compareTo()`.

是否有可能做到这一点？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-04-25T04:54:15.023

1）您应该分别编写两个[Comparator](http://docs.oracle.com/javase/6/docs/api/java/util/Comparator.html)用于按年龄和姓名排序，然后使用[Collections.sort(List,Comparator)](http://docs.oracle.com/javase/6/docs/api/java/util/Collections.html#sort%28java.util.List,java.util.Comparator%29)。像这样的东西：

```
class StudentVO {
  private String name;
  private int age;
  public String getName() {
      return name;
  }
  public void setName(String name) {
      this.name = name;
  }
  public int getAge() {
      return age;
  }
  public void setAge(int age) {
      this.age = age;
  }
}

class AgeComparator implements Comparator<StudentVO> {

@Override
public int compare(StudentVO o1, StudentVO o2) {
    Integer age1 = o1.getAge();
    Integer age2 = o2.getAge();
    return age1.compareTo(age2);
  }

}

class NameComparator implements Comparator<StudentVO> {

  @Override
  public int compare(StudentVO o1, StudentVO o2) {
      return o1.getName().compareTo(o2.getName());
  }

} 
```

然后使用它们，基于`age`：

```
Collections.sort(list,new AgeComparator()); 
```

排序依据`name`：

```
Collections.sort(list,new NameComparator()); 
```

2) 如果你认为`List`of`StudentVO`有某种自然的排序顺序，假设 sort by `age`。然后，使用[Comparable](http://docs.oracle.com/javase/6/docs/api/java/lang/Comparable.html) for`age`和`Comparator`for `name`。

```
 class StudentVO implements Comparable<StudentVO>{
    private String name;
    private int age;
    public String getName() {
        return name;
    }
    public void setName(String name) {
        this.name = name;
    }
    public int getAge() {
        return age;
    }
    public void setAge(int age) {
        this.age = age;
    }
    @Override
    public int compareTo(StudentVO o) {
        return ((Integer)getAge()).compareTo(o.getAge());
    }
}

class NameComparator implements Comparator<StudentVO> {

    @Override
    public int compare(StudentVO o1, StudentVO o2) {
        return o1.getName().compareTo(o2.getName());
    }

 } 
```

然后使用它们，基于`age`：

```
Collections.sort(list); 
```

排序依据`name`：

```
Collections.sort(list,new NameComparator()); 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2017-08-08T17:30:59.390

`java-8` 参见[Comparator#comparing](https://docs.oracle.com/javase/8/docs/api/java/util/Comparator.html#comparing-java.util.function.Function-) 和[Comparator#thenComparing](https://docs.oracle.com/javase/8/docs/api/java/util/Comparator.html#thenComparing-java.util.Comparator-)有新的方法。您所需要的只是为`Stream#sorted()`或`List#sort()`方法提供 lamda 表达式/方法引用。

例如按一个字段排序：

```
List<StudentVO> students = Arrays.asList(
        new StudentVO(20,"Bob"),
        new StudentVO(19, "Jane")
);
// sort by age
students.stream()
        .sorted(Comparator.comparing(StudentVO::getAge))
        .forEach(System.out::println);
// [StudentVO{age=19, name='Jane'},StudentVO{age=20, name='Bob'}]
// sort by name
students.stream()
        .sorted(Comparator.comparing(StudentVO::getName))
        .forEach(System.out::println);
// [StudentVO{age=20, name='Bob'}, StudentVO{age=19, name='Jane'}] 
```

按几个字段排序：

```
List<StudentVO> students = Arrays.asList(
        new StudentVO(20,"Bob"),
        new StudentVO(19, "Jane"),
        new StudentVO(21,"Bob")
);
// by age and then by name
students.stream()
        .sorted(Comparator
                .comparing(StudentVO::getAge)
                .thenComparing(StudentVO::getName)
        ).forEach(System.out::println);
// [StudentVO{age=19, name='Jane'}, StudentVO{age=20, name='Bob'}, StudentVO{age=21, name='Bob'}]
// by name an then by age
students.stream()
        .sorted(Comparator
                .comparing(StudentVO::getName)
                .thenComparing(StudentVO::getAge)
        ).forEach(System.out::println);
// [StudentVO{age=20, name='Bob'}, StudentVO{age=21, name='Bob'}, StudentVO{age=19, name='Jane'}] 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-09-30T19:21:35.650

我最近也不得不解决这个问题。不确定这是否与您的情况完全相同，但我不得不为网格的零列或多列编写内存排序，在 OOM 条件下进行手动操作等，因为我的问题范围非常有限。

我为每一列编写了一个比较器，并为一个比较器编写了一个比较器列表。当我确定需要对哪些列进行排序以及按什么顺序排序时，我将相应比较器的一个实例添加到比较器列表中。然后，使用链式比较器执行实际排序。

```
public class MyObject
{
    private String name;
    private int age;
    private Date registered;
} 
```

所以，每个比较器都是这样的：

```
public class NameComparator
    implements Comparator<MyObject>
{
    public int compare(MyObject o1, MyObject o2)
    {
        return o1.getName().compareTo(o2.getName);
    }
} 
```

这对于链式比较器：

```
public class ChainedComparator
    implements Comparator<MyObject>
{
    public int compare(MyObject o1, MyObject o2) {
        for(Comparator<MyObject> comparator : comparators) {
            int result = comparator.compare(o1,o2);
            if(result != 0) {
                return result;
            }
        }
        return 0;
    }
}
    private List<Comparator<MyObject>> comparators = new ArrayList<>();
} 
```

留给您的想象力是解析排序并构建链式比较器。实际上，我使这变得更复杂一些，因为我还合并了一个方向，我通过根据需要交换对链式比较器中的子比较器的调用中的参数顺序来实现该方向。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-25T05:06:55.153

这是代码片段：

```
public class StudentNameComparator implements Comparator<StudentVO>{

@Override
public int compare(StudentVO s1, StudentVO s2) {

        //ascending order
        return s1.getName().compareTo(s2.getName());

        //descending order
        //return s2.getName().compareTo(s1.getName());
       }
} 
```

根据您的问题，当指定字段的值发生变化时，它也将起作用。你只需要记住`sort`用这个比较器调用方法。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-25T05:12:57.840

在 java 中，您有两种主要的方法来比较对象。第一个是类本身实现[Comparable](http://docs.oracle.com/javase/6/docs/api/java/lang/Comparable.html)接口，这意味着只有一个实现。第二个是让类实现[Comparator](http://docs.oracle.com/javase/6/docs/api/java/util/Comparator.html)接口。这样，您可以为同一个类拥有多个比较器。

这意味着您可以在 StudentVo 类上定义例如 3 个不同的比较器：一个只比较名称，另一个比较年龄，最后一个比较两个属性。

在您的应用程序中，您可以根据要比较的内容使用适合您需要的实现。在一个地方，您将在年龄 Collections.sort(myStudents , new CompareStudentOnAge()) 上比较学生。在另一个地方，您使用另一个实现。

您可以在这篇博文中找到一些解释：http: [//javarevisited.blogspot.fr/2011/06/comparator-and-comparable-in-java.html](http://javarevisited.blogspot.fr/2011/06/comparator-and-comparable-in-java.html)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-12-16T23:26:22.260

安东的方法非常好。我用这个：

1-仅按年龄排序：

```
Collections.sort( studentList, Comparator.comparingInt( student -> student.getAge() ) ); 
```

2- 姓名：

```
Collections.sort( studentList, Comparator.comparing( student -> student.getName() ) ); 
```

3-组合：

```
Collections.sort( studentList, Comparator.comparing( student -> student.getName() ).thenComparingInt( student -> student.getAge() ) ); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-04-22T08:30:01.060

您可以使用 thenComparing 级联比较器：

```
List<File> files = new ArrayList();
Collections.sort(files,

        new Comparator<File>() {
            public int compare(File file1, File file2) {
                return file2.getName()
                        .compareTo(file1.getName());
            }
        }.thenComparing(
                new Comparator<File>() {
                    public int compare(File file1, File file2) {
                        return Long.valueOf(file2.getPath().length())
                                .compareTo(Long.valueOf(file1.getPath().length()));
                    }
                }
        )

);
// Collections.reverse(list); 
```

[https://www.eovao.com/en/a/sort%20elements%20java/4/how-to-sort-objects-in-java---multiple-comparison-sort-list](https://www.eovao.com/en/a/sort%20elements%20java/4/how-to-sort-objects-in-java---multiple-comparison-sort-list)

# c# - 如何从 .net C# exe 或 dll 中获取引用和导入模块的列表？

> ID：16206634
> 
> 赞同：0
> 
> 时间：2013-04-25T04:52:57.803
> 
> 标签：c#, .net, module, .net-assembly

给定任何 C# exe 或 dll，我想获取它引用的所有程序集以及所有导入模块的列表。这样做最简单的方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T07:50:05.970

其他人已经给出了以编程方式执行此操作的答案。但是，如果您只想查看列表，则可以使用 Telerik 的[JustDecompile 之](http://www.telerik.com/products/decompiler.aspx)类的反编译器。用它打开 .dll，您将能够在左侧导航参考列表等。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T04:56:54.483

您可以使用反射来了解如何获取参考程序集。请参阅下面的链接。我不确定您关于导入模块的问题，请提供更多详细信息。

[http://msdn.microsoft.com/en-us/library/system.reflection.assembly.getreferencedassemblies.aspx](http://msdn.microsoft.com/en-us/library/system.reflection.assembly.getreferencedassemblies.aspx)

或者

[http://msdn.microsoft.com/en-us/library/system.reflection.assembly.getreferencedassemblies%28v=vs.100%29.aspx](http://msdn.microsoft.com/en-us/library/system.reflection.assembly.getreferencedassemblies%28v=vs.100%29.aspx)

希望这有帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-25T04:58:51.910

使用`GetDependentAssemblies`如下：

```
private IEnumerable<Assembly> GetDependentAssemblies(Assembly analyzedAssembly)
{
    return AppDomain.CurrentDomain.GetAssemblies()
        .Where(a => GetNamesOfAssembliesReferencedBy(a)
                            .Contains(analyzedAssembly.FullName));
}

public IEnumerable<string> GetNamesOfAssembliesReferencedBy(Assembly assembly)
{
    return assembly.GetReferencedAssemblies()
        .Select(assemblyName => assemblyName.FullName);
} 
```

该`analyzedAssembly`参数表示您要为其查找所有依赖项的程序集。

# c++ - 是否可以混合使用 QTextStream 和 QDataStream？

> ID：16206642
> 
> 赞同：4
> 
> 时间：2013-04-25T04:53:51.090
> 
> 标签：c++, qt, file-io

需要读取混合文本/二进制文件，我认为两者`QTextStream`并`QDataStream`用是最有效的。

该文件如下所示：

> 某行文本
> 另一行文本
> 42
> <100 字节的二进制数据>
> 12
> <100 字节的二进制数据>
> ...等（一行中的一个 int，然后一行中的 100 字节二进制数据，依此类推）

这是初始化，变量等：

```
// a QFile named in is already opened successfully as binary (without QIODevice::Text)
QTextStream stream(&in);
QDataStream data(&in);
int nr;
int nr_bytes;
char buffer[200]; 
```

首先，我测试了从一个流中读取是否会推进另一个流。如果我从文件中读取 10 个字节`data.readRawData()`，那么`stream.readLine()`将读取“文本”，所以它可以工作！

但是，如果我从示例文件的开头执行以下操作：

```
stream.readLine();
stream.readLine();
for (/*...*/)
{
    stream >> nr;
    stream.readLine();
    nr_bytes = data.readRawData(buffer, 100);
    stream.readLine();
} 
```

它不起作用，缓冲区仍然是空的。`nr`奇怪的是，无论我用 . 读取多少字节，数字（42、12 等）都会正确读入`data.readRawData()`. 它可以是 1000 字节，它似乎仍然没有读取任何内容。但是， 中的值`nr_bytes`表示字节已成功读取！仍然很奇怪，循环中的最后一个 readLine 实际上读取了二进制数据（至少在它遇到零、换行符或其他特殊字符之前）。这意味着，它`data.readRawData()`根本没有读取任何内容，但它的返回值中仍然包含所需的字节数。

这是否意味着我不能一起使用`QTextStream`and `QDataStream`，或者我做错了什么？

# php - 会话不会通过 eval() 从一个页面传递到另一个页面

> ID：16206643
> 
> 赞同：0
> 
> 时间：2013-04-25T04:53:55.843
> 
> 标签：php, session, eval, sessionid

我试图让会话在使用时从一个页面传递到另一个页面`eval()`。基本上我有一个页面来处理所有其他请求，并且只是通过`eval()`调用获取页面输出。

一切正常，但由于某种原因，会话信息会在每次刷新时不断重置。不过，同样使用会话的登录系统不会在每次页面刷新时重置。

如果你去[http://fretfast.com](http://fretfast.com)查看源码，可以看到`$_SESSION`221行开始的内容。

我的问题是，登录系统如何仍然工作，但其他会话信息不断重置？`firstActivity`和变量在配置页面上设置，该`lastActivity`页面包含在处理所有请求的主文件中。这些只有在会话尚未开始时才会设置，如下所示：

```
if ( session_id() == '' ) {
    session_start();
    // set other $_SESSION['trail'] variables
} 
```

`requests`和`requestTimes`变量设置在通过 检索给定页面内容的对象内`eval()`。

如果有人知道问题可能是什么或需要任何信息，我很乐意提供。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T05:09:41.667

您的检查永远不会评估为真，因此 session_start() 永远不会执行。除非您特别更改（或清空）会话 ID（通过代码或在您的 php.ini 中），否则它默认为`PHPSESSID`（并且快速检查您的 url 的萤火虫确认）。

完全跳过检查，只需在文件开头发出 session_start() 。

PS你为什么使用 eval() ？永远不要使用 eval() ！

# visual-studio-2010 - Visual Studio 的 Rally 连接器中刷新列表时出错

> ID：16206644
> 
> 赞同：1
> 
> 时间：2013-04-25T04:53:57.363
> 
> 标签：visual-studio-2010, rally

我正在尝试使用 Visual Studio 的[Rally 连接器](http://visualstudiogallery.msdn.microsoft.com/8346D3B6-63F1-4F2F-9C2E-02580B384FC7)（使用 Visual Studio 2010 Pro SP1）并在连接器尝试刷新列表 1）成功登录后或 2）单击刷新列表时收到以下错误：

> 由于最近的错误，无法为迭代过滤器下拉列表加载数据。请点击“刷新列表”重新加载列表。

同样，单击刷新列表只会产生相同的错误。

我正在使用 1.6.5 版的连接器。

一旦有机会，我会在必要时寻求 Rally 的支持；与此同时，[搜索](https://prod.help.rallydev.com/search/site/visual%20studio%20connector%20error)[Rally 知识库](https://prod.help.rallydev.com/rally-support-knowledge-base)似乎没有发现任何与该错误相关的信息；网络[搜索](http://www.bing.com/search?setmkt=en-US&q=Error%20Refreshing%20List%20in%20Rally%20Connector%20for%20Visual%20Studio)没有任何用处；我已经在上面链接的 Visual Studio 库页面中回答了一个相关问题（关于连接器早期版本的错误）。基本上我试图从所有合理的角度来解决这个问题。

这是我在连接器活动日志中看到的内容（出于明显的原因，在记录的 URL 中替换了工作区值）：

```
4/24/2013 8:23:35 PM  Sent request to load Tasks
4/24/2013 8:23:36 PM  Got response to load Tasks
4/24/2013 8:23:36 PM  Sent request to get all iterations in workspace https://rally1.rallydev.com/slm/webservice/1.15/workspace/9876543210
4/24/2013 8:23:36 PM  Got response to get all iterations in workspace https://rally1.rallydev.com/slm/webservice/1.15/workspace/9876543210
4/24/2013 8:23:37 PM  Warning: Following exception was thrown during getting distinct Iterations:
System.OverflowException: Value was either too large or too small for an Int32.
   at System.Number.ParseInt32(String s, NumberStyles style, NumberFormatInfo info)
   at RallyConnector.RallyLoader.GetDistinctIterations(DataSet ds)
Code resumed with duplicate Iterations. 
```

当我通过浏览器登录 Rally 时，我确实看到了具有相同名称的迭代；但是这些迭代是针对不同的项目的；而且我当然看不到溢出 32 位整数的迭代计数。我希望通过浏览器输入 Rally 的任何内容都可以在连接器上正常工作。

重复的迭代名称真的是问题所在，还是其他原因？有没有人遇到并设法解决此错误？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T21:26:10.253

很抱歉的困难。

此错误“由于最近的错误，无法为迭代过滤器下拉列表加载数据。请点击刷新列表重新加载列表”。通常“刷新列表”操作不会解决问题。这是一个已知问题，插件的版本 >= 1.6.4 应该解决。如果您运行的是以前版本的加载项，您可能需要重新安装（卸载当前实例后）以克服此错误。

干净的重新安装是关键——根据我的经验，干净的重新安装 1.6.4 或更高版本总是可以解决这个问题。

在重新安装之前，请按照以下步骤卸载当前实例：

1.  关闭 Visual Studio
2.  卸载当前的 Visual Studio 插件
3.  （控制面板>>添加-删除程序）
4.  在 Windows 资源管理器窗口中，导航到（以 Windows 7 为例）：“C:\Users\username\Documents\”（或您的 Windows 版本的等效文件夹）
5.  从“Documents”文件夹中删除名为“RallyPlugin”的文件夹。

如果这无法解决问题，请跟进。

# assembly - Linux x86-64 汇编中的日志库 bx

> ID：16206648
> 
> 赞同：1
> 
> 时间：2013-04-25T04:54:10.053
> 
> 标签：assembly

我正在尝试在 Assembly 中编写一个对数函数，它接受两个参数：基数（32 位整数）和值 x（64 位浮点数）。

我目前必须这样做的想法是通过使用对数的属性来使用 FYL2X 和 FDIVP。

既然 log (base a) b = (log (base 10) b / log (base 10) a)，那么我相信我可以实现一个对数函数。我应该如何在 FPU 的寄存器中设置它，因为我不能使用 XMM？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T05:00:32.717

只需使用 FPU 指令和寄存器，XMM 指令和寄存器与这些无关。

使用`FLD`and`FILD`指令将浮点值和整数值加载到 FPU 寄存器堆栈中。

如果您没有 CPU 参考资料，现在是访问 intel.com 并下载它的好时机。免费。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T15:12:05.307

FDIVP 除以`st(0)`，`st(1)`这意味着，您必须先加载除数，然后计算对数，最后用 FDIVP 确定。

OTOH，函数`FYL2X`是 ST(1) = ST(1) * Log2(ST(0)); 其次是弹出st（0）；

因此可以计算 log2(base) 的倒数并将其用作 FYL2X 的乘数。
此外，将其中一些值制成表格并使用以下内容可能是有意义的：

```
 shl bx, 3
  fld inv_log_base[bx]
  fld argument
  fyl2x 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-25T06:39:26.823

因此，这里有一个注释示例，它计算二进制整数（带`bsr`）的 log2，并通过 FPU 将其转换为十进制基数。代码在 x86 (i386) 中，但可以轻松转换为 x86-64 (amd64)。

最棘手的部分是关于 CW（FPU 控制字）的操作。除此之外，如果您习惯了“我的寄存器用作堆栈”的事情，那或多或少是不言自明的。

```
 .text
    .globl  main
    .type   main, @function
main:
    movl    $1024, %eax ;; pushing the integer (1024) to analyze
    bsrl    %eax, %eax  ;; bit scan reverse (give the smallest non zero index)
    inc     %eax        ;; taking the 0th index into account

    pushl   %eax        ;; saving the previous result on the stack

    fildl   (%esp)      ;; loading the previous result to the FPU stack (st(0))
    fldlg2              ;; loading log10(2) on the FPU stack
    fmulp   %st, %st(1) ;; multiplying %st(0) and %st(1) and storing result in %st(0)

    ;; We need to set the FPU control word to 'round-up' 
    ;; (and not 'round-down' which is the default)
    fstcw  -2(%esp)      ;; saving the old FPU control word
    movw   -2(%esp), %ax ;; storing the FPU control word in %ax
    andw   $0xf3ff, %ax  ;; removing everything else
    orw    $0x0800, %ax  ;; setting the proper bit to '1'
    movw   %ax, -4(%esp) ;; getting the value back to memory
    fldcw  -4(%esp)      ;; setting the FPU control word to the proper value

    frndint              ;; rounding-up st(0)

    fldcw  -2(%esp)      ;; restoring the original FPU control word

    fistpl (%esp)        ;; loading the final result to the stack
    popl   %eax          ;; setting the return value to be our result

    leave
    ret 
```

希望这有帮助。

# google-app-engine - 有没有办法为 Google OAuth2 测试编写 GAE JUnit

> ID：16206657
> 
> 赞同：1
> 
> 时间：2013-04-25T04:54:35.673
> 
> 标签：google-app-engine, junit, google-oauth

我在谷歌上搜索，而不是我所知道的......我什至没有看到任何可用的开发库。请问有什么意见吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T17:43:50.527

您无法在单元测试中测试 Google OAuth 流程，因为它需要第三方应用程序 (Google) 来完成。所以这是不可能的。

# java - 单击“确定”后，“创建新的 Android 虚拟设备 (AVD)”挂起

> ID：16206660
> 
> 赞同：1
> 
> 时间：2013-04-25T04:54:39.887
> 
> 标签：java, android, eclipse, avd

这是它挂起的地方：

![在此处输入图像描述](https://i.stack.imgur.com/8S3nr.png)

我已经安装了 Android 4.0 API 14 ARM EABI v7a 系统映像（以及 'Android 4.0 (API14) 下的所有其他内容），这似乎是最常见的问题，但似乎并不是导致我的问题的问题。

过了一会儿，它停止挂起，但它也没有添加虚拟设备。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T05:00:49.130

尝试使用“adb kill-server”，然后在命令提示符下从您的平台工具可用的路径使用“adb start-server”命令，
例如 ..\Android\android-sdk_r21-windows\android-sdk-windows\platform-tools \

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T05:26:55.037

好的，我想通了，创建 avd 的默认目录是我的主硬盘驱动器，它是一个相当小的 ssd，它根本没有空间存储 avd。

我遵循了这一点：[可以更改 Android 虚拟设备的保存位置？](https://stackoverflow.com/questions/2841766/possible-to-change-where-android-virtual-devices-are-saved)更改默认目录以制作实际工作驱动器并修复它。

# joomla - 如何使用组件中的 cookie？

> ID：16206662
> 
> 赞同：8
> 
> 时间：2013-04-25T04:54:51.713
> 
> 标签：joomla, joomla2.5, joomla3.0, joomla3.1

如何在 Joomla 组件中使用 cookie？

```
setcookie( JUtility::getHash('JLOGIN_REMEMBER'), false, time() - 86400, '/' ); 
```

任何人都可以描述这是如何工作的吗？

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2013-04-26T07:15:05.943

```
// Get input cookie object
$inputCookie  = JFactory::getApplication()->input->cookie;

// Get cookie data
$value        = $inputCookie->get($name = 'myCookie', $defaultValue = null);

// Check that cookie exists
$cookieExists = ($value !== null);

// Set cookie data
$inputCookie->set($name = 'myCookie', $value = '123', $expire = 0);

// Remove cookie
$inputCookie->set('myCookie', null, time() - 1); 
```

## `$expire`关于价值的一些规则

*   它以秒为单位的[Unix tinestamp](http://en.wikipedia.org/wiki/Unix_timestamp)`time()` ，如.
*   `$expire == 0`: cookie 生命周期是浏览器会话的。
*   `$expire < time()`: cookie 正在被删除（过期设置为过去）。您可以通过将其值设置为 null 来删除 cookie，但显然 IE 无法这样做。

## 笔记

*请记住，应在发送标头之前设置 cookie（通常在回显输出之前）。*

*Cookie 键和值应正确转义*

## 非字符串值

序列化 set 上的值（如`json_encode($dataNode)`）时，请记住使用适当的过滤器稍后检索它。默认为`cmd`，它过滤掉除 aZ、0-9 之外的几乎所有内容，并破坏 JSON 结构。

```
// Get cookie data
$encodedString = $inputCookie->get('myCookie', null, $filter = 'string');

// Decode
$values = json_decode($encodedString);

// Encode and Set
$inputCookie->set('myCookie', json_encode($values)); 
```

## 参考文献

*   Joomla CMS github 存储库：[JInputCookie::set](https://github.com/joomla/joomla-cms/blob/master/libraries/joomla/input/cookie.php#L47)（非常有据可查）
*   php 文档：[php.net/setcookie](http://www.php.net/setcookie)（开发者体验）
*   维基百科：[HTTP Cookies](http://en.wikipedia.org/wiki/HTTP_cookie)（理论）

# javascript - Extjs源码中定义var Ext

> ID：16206663
> 
> 赞同：0
> 
> 时间：2013-04-25T04:55:07.430
> 
> 标签：javascript, extjs

我发现全局变量 Ext 在源代码中是这样定义的：

```
var Ext = Ext || {}; 
```

我想知道是否有必要这样做，而且，我认为如果将其定义为

```
var Ext = {}; 
```

有人可以告诉我原因吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-25T05:00:48.823

原因是 - 第一个定义新对象以防它尚不存在。

第二个 - 总是创建新对象。

# javascript - 对于通过函数添加的项目，jQuery 不会使用 .on() 将点击绑定到下划线模板

> ID：16206668
> 
> 赞同：3
> 
> 时间：2013-04-25T04:55:23.873
> 
> 标签：javascript, jquery, underscore.js

我使用下划线来创建一些元素并将它们附加到带有 jQ​​uery 的 div 中。

在页面底部，我使用 jQuery`.on()`来响应对元素的点击。

```
$('.pickup').on('click',
    function(e) {
        alert("hello");
    }
); 
```

通过一些用户交互（在谷歌地图中），我必须向 div 添加更多元素并希望它们也响应点击。出于某种原因，他们没有。我已经在 jsfiddle 上削减了所有内容：

[http://jsfiddle.net/thunderrabbit/3GvPX/](http://jsfiddle.net/thunderrabbit/3GvPX/)

当页面加载时，请注意单击输出中的行将`alert('hello')`通过 jQuery。

但是点击【添加】按钮，新行不响应点击。

我的 HTML

```
<div id="unit_2225" class="pickup">
    <span>Click me; I was here first</span>
</div>
<script type="text/template" id="unit-template">
    <div class="unit-item">
        <span class="pickup">
            <span>click us (<%= unit_id %>) via underscore</span>
        </span>
    </div>
</script>
<div id="divID">
</div>
<button>add</button> 
```

我的 Javascript

```
var addUnitToDiv = function(key,val) {
    console.log(val);
    var template = _.template($('#unit-template').html(),val);
    $('#divID').append(template);
}

var unit_ids = [{unit_id:'hello'},
                {unit_id:'click'},
                {unit_id:'us'},
                {unit_id:'too'},
                {unit_id:112}];

$.each(unit_ids, addUnitToDiv);

var unit_pids = [{unit_id:'we'},
                 {unit_id:'wont'},
                 {unit_id:'respond'},
                 {unit_id:'to'},
                 {unit_id:'clicks'},
                 {unit_id:358}];

createMore = function() {
    $.each(unit_pids, addUnitToDiv);
}

$('.pickup').on('click','span',function() {
    alert("hello");
});

$('button').click(createMore); 
```

我发现了一个[措辞相似的问题](https://stackoverflow.com/questions/7521731/events-called-from-inside-another-function-jquery-with-underscore-template-doesn)，但不知道如何在这里应用它的答案。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-25T05:00:37.120

与其将事件直接绑定到元素，不如将一个事件绑定到其容器元素并**委托**它：

```
$("#divID").on("click", ".pickup", function () {
    // Your event handler code
}); 
```

**演示：http:** [//jsfiddle.net/3GvPX/3/](http://jsfiddle.net/3GvPX/3/)

* * *

在这种情况下，事件处理程序**仅对容器内`#divID`具有“pickup”类**的元素执行。

在您的场景中，元素被添加到具有`id`“divID”的元素中。因此，这两个选择器来自哪里。

这很方便，因为正如您所发现的，动态添加元素并不会神奇地绑定事件处理程序。通常绑定的事件处理程序仅在绑定时存在**的**`.on()`那些上执行（绑定）。

 **`"span.pickup"`如果您将委托选择器更改为（如果您知道模板中的元素将始终是类似的），它甚至会有所帮助`<span>`，以便首先按标签名称过滤 DOM。

* * *

**参考：**

*   [http://api.jquery.com/on/#direct-and-delegated-events](http://api.jquery.com/on/#direct-and-delegated-events)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-25T05:02:03.230

**工作演示** [http://jsfiddle.net/u2KjJ/](http://jsfiddle.net/u2KjJ/)

[http://api.jquery.com/on/](http://api.jquery.com/on/)

.on() 方法将事件处理程序附加到 jQuery 对象中当前选定的元素集。您可以在文档级别附加处理程序。

希望能满足需求`:)`

**代码**尝试下面更改的代码

```
$(document).on('click','.pickup',function() {
    alert("hello");
}); 
```**

# objective-c - 使用 NSAppleEventManager 和 kInternetEventClass/kAEGetURL 的 Cocoa 协议处理程序

> ID：16206671
> 
> 赞同：14
> 
> 时间：2013-04-25T04:55:30.933
> 
> 标签：objective-c, cocoa, url, protocols, handler

这是这个问题的 Cocoa 版本：

[启动时未调用 AEInstallEventHandler 处理程序](https://stackoverflow.com/questions/8265487/aeinstalleventhandler-handler-not-being-called-on-startup)

这是我的 Info.plist 协议注册：

```
 ...
    <key>CFBundleURLTypes</key>
    <array>
        <dict>
            <key>CFBundleURLName</key>
            <string>My Protocol</string>
            <key>CFBundleURLIconFile</key>
            <string>myicon</string>
            <key>CFBundleTypeRole</key>
            <string>Viewer</string>
            <key>CFBundleURLSchemes</key>
            <array>
                <string>myapp</string>
            </array>
        </dict>
    </array> 
```

在这里，我设置方法以在使用链接“myapp://unused/?a=123&b=456”单击浏览器链接时侦听 kInternetEventClass/kAEGetURL 事件：

```
- (void)applicationDidFinishLaunching:(NSNotification *)notification
{
    [[NSAppleEventManager sharedAppleEventManager] setEventHandler:self andSelector:@selector(getURL:withReplyEvent:) forEventClass:kInternetEventClass andEventID:kAEGetURL];
    ...
} 
```

这是处理程序方法：

```
- (void)getURL:(NSAppleEventDescriptor *)event withReplyEvent:(NSAppleEventDescriptor *)reply
{
    [[[event paramDescriptorForKeyword:keyDirectObject] stringValue] writeToFile:@"/testbed/complete_url.txt" atomically:YES];
} 
```

这是测试网络链接：

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN">
<html lang="en">
<head>
</head>
<body>
    <a href="myapp://open/?a=123&b=456">Open My App</a>
</body>
</html> 
```

如果应用程序已经在运行，这一切都很好。

调用处理程序方法并捕获完整的 url。

但是，如果应用程序尚未运行，则相同的链接将启动应用程序，但不会调用处理程序——这是有道理的，因为处理程序尚未绑定到事件。

URL 中的这些参数对于我们的应用程序与 webapp 协调很重要。尽管大多数情况下我们的应用程序在单击发生时已经在运行，但可以合理地预期在某些情况下它不会。

我已尝试检查环境和进程调用参数，但在其中任何一个中都看不到 URL。

任何人都知道我们如何可靠地捕获此 URL，即使在发生浏览器点击时我们的应用程序尚未运行？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-09-26T14:53:45.250

Apple 的*SimpleScriptingPlugin*示例将处理程序注册在 中`applicationWillFinishLaunching:`，这可能比使用更干净`init`。（就像 mikker 所说，处理程序在之前被调用`applicationDidFinishLaunching:`。）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-07-10T07:49:54.533

我刚刚遇到了这个确切的问题。我不知道这是否是正确的解决方案，但您可以在应用程序委托的`init`- 方法中注册事件处理程序。

```
// in AppDelegate.m

- (id)init
{
  self = [super init];

  if (self) {
    [[NSAppleEventManager sharedAppleEventManager] setEventHandler:self andSelector:@selector(handleURLEvent:withReplyEvent:) forEventClass:kInternetEventClass andEventID:kAEGetURL];
  }

  return self;
} 
```

不过要注意的一件事是，如果应用程序是由 URL 方案启动的，那么*之前*`handleURLEvent:withReplyEvent`会调用 get 。 *`applicationDidFinishLaunching:`*

# vbscript - 为 VBS 自定义操作 InstallShield 使用文件和目录键

> ID：16206673
> 
> 赞同：0
> 
> 时间：2013-04-25T04:55:45.833
> 
> 标签：vbscript, installshield

我想确认这个方法。在 InstallShield 中创建 EXE 自定义操作时，您可以使用 [DIRKey] 调用项目目录并使用 [#FILEKey] 调用文件。现在我正在尝试对 VBS 自定义操作做同样的事情。我在系统上下文中设置了不同的自定义操作，但不幸的是这不起作用。我可以知道是否有办法在 VBS 自定义操作中执行相同的机制？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T14:37:33.660

1.  VBScript / JScript 自定义动作是脆弱的。我建议[阅读](http://blogs.msdn.com/b/robmen/archive/2004/05/20/136530.aspx)此内容并选择 InstallScript、C++ 或 C#/DTF。

2.  将 [dirprop] [#filekey] 转换为完整路径需要具有完全访问权限的 MSI 会话句柄。延迟的自定义操作缺少这一点。要克服这个问题，您必须立即自定义操作进行评估，然后将其作为 CustomActionData 传递给延迟的自定义操作。

3.  EXE 自定义操作解决了这个问题，因为自定义操作被隐式调用了两次。一次安排操作（立即），在这种情况下，翻译是自动的，然后在实际执行的地方延迟一次。

4.  调用 EXE 时[可能会出现](http://blogs.msdn.com/b/heaths/archive/2007/10/24/exe-custom-actions-are-bad.aspx)许多问题。这可以通过使用[WiX QuietExecCA](http://wix.sourceforge.net/manual-wix3/qtexec.htm)来缓解（即使在 InstallShield 中），方法是“窃取” DLL 或将其封装在合并模块项目中并在 InstallShield 中使用它。

5.  意识到自定义操作不应该重新发明轮子。我不知道您的 EXE 是什么，但如果有任何方法可以将其分解为 Windows Installer 可以表达的部分，那么您的复杂性和风险将大大降低。

6.  请记住，应编写更改机器配置的自定义操作以支持回滚。这意味着更多的自定义操作。

# angularjs - 没有 ng-incude 的 angularjs 特定页面

> ID：16206674
> 
> 赞同：1
> 
> 时间：2013-04-25T04:56:03.383
> 
> 标签：angularjs

我用 angularjs 设计我的页面，如下所示

```
<html>
 <head></head>
 <body>
  <ng-view></ng-view>
  <ng-include="'footer-tpl.html'">
 </body>
</html> 
```

因此，无论何时导航到任何页面都会更改 ng-view，但现在我想要一个没有 < `ng-include="'footer-tpl.html'"`> 的页面。怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T15:01:56.153

我刚刚意识到您可以将[ngHide](http://docs.angularjs.org/api/ng.directive%3angHide)与[ngInclude](http://docs.angularjs.org/api/ng.directive%3angInclude)一起使用：

[http://plnkr.co/edit/BBpfQBRgtr7tAK6iFRTR?p=preview](http://plnkr.co/edit/BBpfQBRgtr7tAK6iFRTR?p=preview)

**HTML**

```
<div ng-include="'footer.html'" ng-hide="hideFooter"></div> 
```

**JavaScript**

```
angular.module('test', []).controller('test', function ($scope) {
    // TODO set this to true to hide the footer, if you don't set it, it stays visible
    //$scope.hideFooter = true;
}); 
```

当[这个 ngIf 补丁](https://github.com/angular/angular.js/pull/2312)发布后，您可以使用它来代替 ngHide。如果您点击正确的视图，它似乎会阻止 footer.html 甚至被加载，但我对此并不完全确定。

# pinterest - 从 pinterest 获取指定主题标签的帖子

> ID：16206676
> 
> 赞同：2
> 
> 时间：2013-04-25T04:56:39.360
> 
> 标签：pinterest, hashtag

如何从 pinterest 获取带有图片指定标签的图片。我需要从 pinterest 获取带有特定哈希标签的固定图片。有什么办法可以得到。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-11-09T09:43:02.430

如果你只有一个标签，那么没有。如果您知道它在哪个板上，或者它来自哪个用户，那么我只需获取属于该板/用户的所有引脚并循环遍历它们以查看标签是否出现在便笺中。

正如 JP Hellemons 指出的那样，Pinterest API 中还没有搜索端点。

# iphone - 通过 iPhone facebook Graph API 在 drupal 站点登录

> ID：16206682
> 
> 赞同：2
> 
> 时间：2013-04-25T04:57:09.480
> 
> 标签：iphone, ios, facebook-graph-api, drupal, drupal-7

我正在为 iPhone 开发一个应用程序，后端是 drupal，现在 drupal 7 facebook sdk 允许他们从 facebook api 直接登录到 drupal 站点，iPhone facebook graph API 中是否有任何机制？，意味着假设我正在向 facebook graph api 提供我的 FB 凭据，它会自动登录到 drupal 站点，现在我正在获取访问令牌，但是，我想按照 drupal 7 facebook sdk 提供的方式直接登录，请帮帮我，提前致谢。

# php - 来自json文件的jquery ui自动完成源

> ID：16206685
> 
> 赞同：0
> 
> 时间：2013-04-25T04:57:22.110
> 
> 标签：php, jquery

我可以将 jquery ui 自动完成与数据库中的源合并。如何，我试图从准备好的 json 文件中获取源代码，内容是这样的：-

```
{"data":[{"id":"1","country_name_en":"USA","country_name_hk":"\u7f8e\u570b"},{"id":"2","country_name_en":"China","country_name_hk":"\u4e2d\u570b"},{"id":"3","country_name_en":"British","country_name_hk":"\u82f1\u570b"}]} 
```

我试图修改jquery代码如下： -

```
<script>
$( "#country" ).autocomplete({
    source: function(request,response) {
      $.getJSON('../../database/country.json',{id: data.id},function(data){
            alert(data);
      })
    }
});
</script> 
```

但我认为我没有正确编写格式。我应该如何改进从 json 文件中提取数据的方式？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T05:04:07.070

`response`除非您通过使用允许的自动完成值调用传递给源方法的函数来告诉它这样做，否则自动完成不会显示任何内容。所以你应该做这样的事情：

```
$( "#country" ).autocomplete({
    source: function(request,response) {
        $.getJSON('../../database/country.json',{id: data.id},function(data){
            var choices = [];
            for(var i=0;i<data.data.length;i++) {
                choices.push(data.data[i].country_name_en);
            }
            response(choices);
        })
    }
}); 
```

也只是一个提示，您将通过将所有内容命名为“数据”来混淆自己。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T05:05:13.307

Ajax 可用于此参考这篇[文章](http://jqueryui.com/autocomplete/#remote-jsonp)，其中列出了 geonames.org 中的国家（包含巨大的国家、州、地区列表）。这会以某种方式帮助你。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-25T05:12:31.507

要从 json 获取数据，试试这个..

```
$("#country").autocomplete({
   source: function(request, response) {
       $.getJSON('../../database/country.json', { id: data.id }, function(data) {
          $.each(data, function(key, value) {
               alert(value.country_name_en); // json data
          });
       });
    }
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-25T05:26:23.250

问题是，您需要从 ajax 成功处理程序调用自动完成回调。

```
$(function() {
    $("#country").autocomplete({
        source : function(request, response) {
            $.getJSON('country.json', {
                id : 1
            }, function(data) {
                var list = $.map(data.data, function(item, index) {
                    return {
                        id : item.id,
                        label : item.country_name_en
                    };
                });
                response(list);
            })
        }
    });
}) 
```

演示：[Plunker](http://plnkr.co/edit/nzsFW6nCyt4d7JWVe82w?p=preview)

# android - 如何在Android中获取照片或SD卡后的图像名称

> ID：16206686
> 
> 赞同：1
> 
> 时间：2013-04-25T04:57:55.593
> 
> 标签：android, camera

从相机（当前点击图像）或 sd 卡（已经点击或在 sd 卡图像中）拍照时，我对如何获取图像名称有点困惑。请你帮我解决如何获取图像名称。

```
if (requestCode == CAMERA_REQUEST) {
ImageView profImage;
Bitmap photo = (Bitmap) data.getExtras().get("data");
Bitmap scaledphoto = Bitmap.createScaledBitmap(photo, height, width,
                        true);
profImage.setImageBitmap(scaledphoto);
//How to get name here
} 
```

现在，这里如何获取**ImageName**以建议将图像保存在数据库中。

或者

```
Imageview test=(Imageview) findViewById(R.id.testimage);
test.setImageResource(R.drawable.androidimage); 
```

所以，我想获取图像的名称，这里的图像名称是 androidimage.SO 如何获取图像名称。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T05:24:37.747

Updated Code

**Gallery :**

```
 Intent photoPickerIntent = new Intent(
            Intent.ACTION_GET_CONTENT);
    photoPickerIntent.setType("image/*");
    startActivityForResult(photoPickerIntent, CAMERA_PIC_REQUEST); 
```

**onActivityResult**

```
@Override
protected void onActivityResult(int requestCode, int resultCode, Intent data) {
    // TODO Auto-generated method stub
    super.onActivityResult(requestCode, resultCode, data);
    if (requestCode == CAMERA_PIC_REQUEST) {

        Uri selectedImage = data.getData();

        String filePath = getRealPathFromURI(selectedImage);
        // used in show HD images
        BitmapFactory.Options bounds = new BitmapFactory.Options();
        // divide bitmap to 4 sample size it can be 2rest(2,4,8 etc)
        bounds.inSampleSize = 4;
        // get bitmap from bounds and file path
        Bitmap bmp = BitmapFactory.decodeFile(filePath, bounds);

        imageView.setImageBitmap(bmp);
        Uri selectedImageUri1 = data.getData();
        String path = getRealPathFromURI(selectedImageUri1);
        File file = new File(path);
        textView.setText(file.getName());

    }
}

public String getRealPathFromURI(Uri contentUri) {
    String[] proj = { MediaStore.Images.Media.DATA };
    Cursor cursor = managedQuery(contentUri, proj, null, null, null);
    int column_index = cursor
            .getColumnIndexOrThrow(MediaStore.Images.Media.DATA);
    cursor.moveToFirst();
    return cursor.getString(column_index);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T05:56:49.673

请使用以下代码。

```
public class UploadImageActivity extends Activity {
private final int CAMERA_PICTURE = 1;
private final int GALLERY_PICTURE = 2;
private ImageView userPictureImageView;
private Intent pictureActionIntent = null;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main1);

    userPictureImageView = (ImageView) findViewById(R.id.imageView1);
    userPictureImageView.setOnClickListener(new OnClickListener() {
        public void onClick(View v) {
            startDialog();
        }

    });
}

protected void onActivityResult(int requestCode, int resultCode, Intent data) {
    super.onActivityResult(requestCode, resultCode, data);
    if (requestCode == GALLERY_PICTURE) {
        Uri uri = data.getData();
        if (uri != null) {
            // User had pick an image.
            Cursor cursor = getContentResolver().query(uri, new String[] { android.provider.MediaStore.Images.ImageColumns.DATA }, null, null, null);
            cursor.moveToFirst();
            // Link to the image
            final String imageFilePath = cursor.getString(0);
            File photos = new File(imageFilePath);
            Bitmap b = decodeFile(photos);
            b = Bitmap.createScaledBitmap(b, 150, 150, true);
            userPictureImageView.setImageBitmap(b);
            cursor.close();
        }
        else {
            Toast toast = Toast.makeText(this, "No Image is selected.", Toast.LENGTH_LONG);
            toast.show();
        }
    }
    else if (requestCode == CAMERA_PICTURE) {
        if (data.getExtras() != null) {
            // here is the image from camera
            Bitmap bitmap = (Bitmap) data.getExtras().get("data");
            userPictureImageView.setImageBitmap(bitmap);
        }
    }
}

private Bitmap decodeFile(File f) {
    try {
        // decode image size
        BitmapFactory.Options o = new BitmapFactory.Options();
        o.inJustDecodeBounds = true;
        BitmapFactory.decodeStream(new FileInputStream(f), null, o);

        // Find the correct scale value. It should be the power of 2.
        final int REQUIRED_SIZE = 70;
        int width_tmp = o.outWidth, height_tmp = o.outHeight;
        int scale = 1;
        while (true) {
            if (width_tmp / 2 < REQUIRED_SIZE || height_tmp / 2 < REQUIRED_SIZE)
                break;
            width_tmp /= 2;
            height_tmp /= 2;
            scale++;
        }

        // decode with inSampleSize
        BitmapFactory.Options o2 = new BitmapFactory.Options();
        o2.inSampleSize = scale;
        return BitmapFactory.decodeStream(new FileInputStream(f), null, o2);
    }
    catch (FileNotFoundException e) {
    }
    return null;
}

private void startDialog() {
    AlertDialog.Builder myAlertDialog = new AlertDialog.Builder(this);
    myAlertDialog.setTitle("Upload Pictures Option");
    myAlertDialog.setMessage("How do you want to set your picture?");

    myAlertDialog.setPositiveButton("Gallery", new DialogInterface.OnClickListener() {
        public void onClick(DialogInterface arg0, int arg1) {
            pictureActionIntent = new Intent(Intent.ACTION_GET_CONTENT, null);
            pictureActionIntent.setType("image/*");
            pictureActionIntent.putExtra("return-data", true);
            startActivityForResult(pictureActionIntent, GALLERY_PICTURE);
        }
    });

    myAlertDialog.setNegativeButton("Camera", new DialogInterface.OnClickListener() {
        public void onClick(DialogInterface arg0, int arg1) {
            pictureActionIntent = new Intent(android.provider.MediaStore.ACTION_IMAGE_CAPTURE);
            startActivityForResult(pictureActionIntent, CAMERA_PICTURE);
        }
    });
    myAlertDialog.show();
}
} 
```

不要忘记在清单文件中添加相机权限。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-25T05:22:06.997

您可以将 Bitmap 传递给此方法以获取 Image Uri。

```
public Uri getImageUri(Context inContext, Bitmap inImage) {
        ByteArrayOutputStream bytes = new ByteArrayOutputStream();
        inImage.compress(Bitmap.CompressFormat.JPEG, 100, bytes);
        String path = Images.Media.insertImage(inContext.getContentResolver(),
                inImage, "Title", null);
        return Uri.parse(path);
    } 
```

最后，您可以将图像设置为图像视图

```
imageView.setImageUri(mUri); 
```

# html - 修复 A-tag 高度/宽度？

> ID：16206689
> 
> 赞同：0
> 
> 时间：2013-04-25T04:58:29.363
> 
> 标签：html, css, hyperlink

所以我在这里有一些简单的代码：

```
<div id="nav">
    <ul>
        <li><a href="#">Home</a></li>
        <li><a href="#">Home</a></li>
        <li><a href="#">Home</a></li>
        <li><a href="#">Home</a></li>
        <li><a href="#">Home</a></li>
        <li><a href="#">Home</a></li>
    </ul>
</div> 
```

CSS-

```
ul
{
list-style-type:none;
width:700px;
height:44px;
padding:0;
}

li
{
float:left;
margin:0;
padding:0;
width:80px;
height:auto;
}

a
{
height:40px;
text-decoration:none;
border:2px solid black;
background:blue;
}

-#nav
{
width:786px;
height:66px;
border:2px solid black;
background:#C4BD97;
margin:5px;
} 
```

这段代码*应该*强制我的 a 标签水平对齐并给它们一个明确的高度/宽度。它们完美对齐，但无论我做什么，它们的高度和宽度都不会改变。以前从来没有遇到过这个问题，我的 HTML 是不是坏了？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T05:00:32.943

`display: inline`元素不尊重`height`。将它们更改为`display: inline-block`（或可能`block`）或用于`line-height`更改高度。

[http://jsfiddle.net/kHkyh/](http://jsfiddle.net/kHkyh/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T05:00:27.043

尝试在 li 中的锚标签上设置高度和/或宽度。也就是说，使用锚标签推出 li。您可以使用填充以相当统一的方式执行此操作，以确保锚的整个区域都是可点击的。此外，这种方法可以追溯到我相信 ie6（不确定 ie5，尚未测试过）。以下是我所说的大致内容：

```
<!DOCTYPE html>
<html>
    <head>
        <title></title>
        <style type="text/css">
            body, #menu, #menu li
            {
                position: relative; 
                display: block;
                padding:0px;
                margin: 0px;
            }

            #menu
            {
                list-style-type:none;
                width:100%;
            }

            #menu a
            {
                position:relative;
                display:block;
                float:left;
                width:25%;
                padding:10px 0px 10px 0px;
                text-align:center;
            }
        </style>
    </head>
    <body>
        <ul id="menu">
            <li><a href="#">One item</a></li>
            <li><a href="#">Another item</a></li>
            <li><a href="#">hola</a></li>
            <li><a href="#">Hi</a></li>
        </ul>
    </body>
</html> 
```

# c# - DataGridViewTextBoxColumn 和 DataGridViewComboBoxColumn 事件处理

> ID：16206692
> 
> 赞同：0
> 
> 时间：2013-04-25T04:58:51.473
> 
> 标签：c#, winforms

我有一个带有选项卡控件的 Windows 窗体。每个选项卡都有一个数据网格视图。我会从数据库中获取组合框值（字符串数组）或文本框值（单个字符串）。基于我正在创建`DataGridViewTextBoxColumn` 或`DataGridViewComboBoxColumn`动态创建并将其添加到 datagridview 的值。

现在我想处理每个选项卡中数据网格视图中的所有`DataGridViewTextBoxColumn`事件`DataGridViewComboBoxColumn`。我想知道如何处理这种情况，任何示例代码都将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T07:53:46.047

See

[How to bind DataGridViewComboBoxColumn to a OnChange event (C#)](https://stackoverflow.com/questions/4827182/how-to-bind-datagridviewcomboboxcolumn-to-a-onchange-event-c)

Handle the DataGridView's EditControlShowing event

```
gridview.EditingControlShowing += DataGridViewEditingControlShowingEventHandler(eventHandlerMethod) 
```

then in the eventHandlerMethod handle the object according to it's type, whether that be combobox or text box:

```
 void eventHandlerMethod(object sender, DataGridViewEditingControlShowingEventArgs e)
    {
        if (e.Control is ComboBox)
        {

        }
        else if (e.Control is TextBox)
        {

        }
    } 
```

# angularjs - Select2 AngularJS - 我如何动态添加标签项？

> ID：16206698
> 
> 赞同：2
> 
> 时间：2013-04-25T04:59:44.443
> 
> 标签：angularjs, jquery-select2, angular-ui

我有一个 select2 输入框，定义如下：

```
<input id="searchbox" ui-select2="autoCompleteSearch" ng-model="searchedLeafs" style="width:80%;height:36px;" class="searchbox"/> 
```

基本上，虽然用户可以在输入框中键入文本（并从建议的自动完成列表中选择），但我还希望用户能够单击“注入”一个基于角度的按钮（在同一范围内）标记到此输入框中（而不是用户键入它）。

有谁可以告诉我如何在 angularjs 中实现它的属性？我知道如何在旧的普通 select2 中执行此操作，但找不到如何手动/动态地将项目（键/值）添加到标签列表中。

如果您想获得一个简单的示例，假设您无需键入要与 stackoverflow 问题相关联的标签，您只需单击一个链接/按钮，即可将其添加到您自己的标签列表中。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-04T08:43:02.883

只需将一个新对象推送到 ng-model 的数组中，并假设它是鸭子类型的其余对象，它应该可以正常显示。

# java - Java 字符串拆分：“忽略”拆分参数

> ID：16206700
> 
> 赞同：1
> 
> 时间：2013-04-25T04:59:45.307
> 
> 标签：java

每次有逗号时，我都会尝试拆分字符串。

```
 String myString = "\"Shire, Middle Earth\",Hobbits, J.R.R Tolkien"; 
```

我的字符串，打印出来时是：“Shire, Middle Earth”,Hobbits, JRR Tolkien

请注意，在 Shire 和 Middle Earth 之间有一个空间

当我执行以下操作时...

```
 String[] myString = line.split(","); 
```

它将 Shire 和 Middle Earth 之间的逗号计算为逗号来拆分数据 a（应该如此）。我怎样才能让它“忽略”那个逗号？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-25T05:05:58.313

试试这个：

```
line.split(",(?!\\s)") 
```

这是正则表达式中的前瞻。[你可以在这里](http://www.regular-expressions.info/lookaround.html)看到这个链接

# sql - 前十名及更新

> ID：16206702
> 
> 赞同：0
> 
> 时间：2013-04-25T04:59:56.703
> 
> 标签：sql, sql-server, vb.net, visual-studio-2012

如何使用 VB 运行查询，该查询将根据列 appClickCount 返回 TOP 10 结果并将列 appFAIList 更新为 1，并且低于 TOP 10 的任何内容都会给列 appFAIList 的值为 0？

```
Using sqlCon = New SqlConnection("Data Source=(LocalDB)\v11.0;AttachDbFilename=|DataDirectory|\ITCSDatabase.mdf;Integrated Security=True")
        sqlCon.Open()
        Dim sqlText = "SELECT top 10 appClickCount " & _
            "FROM appTable" & _
        "UPDATE appTable SET appFAIList = 1"
        Dim cmd = New SqlCommand(sqlText, sqlCon)
        cmd.ExecuteScalar()
    End Using 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-25T05:05:08.990

改为运行此 SQL 语句

```
with t as (
  select *, rn=row_number() over (order by 1/0)
  from appTable)
update t set
  appFAIList = case when rn<=10 then 1 else 0 end 
```

不过，您的*vb.net*代码有很多错误。您正在使用**ExecuteScalar**，它旨在返回单行单列结果。如所写，它将为您提供第一个 appClickCount 值。

另一个问题是，`TOP 10`在没有相应 ORDER BY 的情况下在 SQL Server 中使用意味着它将***非常任意***（也称为“随机”）从表中返回任何 10 条记录。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T05:05:42.947

```
UPDATE a
SET a.appFAIList = 1
  FROM appTable AS a
  INNER JOIN 
  (SELECT top 10 appClickCount FROM appTable) AS b ON a.SomeField = b.SomeField

SomeField - may be primary key of your table 
```

# node.js - 如何编写 nodejs 模块并将参数传递给它？

> ID：16206706
> 
> 赞同：1
> 
> 时间：2013-04-25T05:00:23.577
> 
> 标签：node.js

我正在使我的 nodejs 代码模块化，我有点困惑。我有一个工作示例只是想知道这样做是否有效。我需要做的是在加载模块时将参数传递给模块，以便这些模块可以使用其他一些模块。我使用 module.exports 来提供一个返回对象的函数。这是编写模块的正确方法吗？

```
var params = {//obj with other modules return};
var api_helper = require('./library/api_helper')(params); 
```

我的 api_helper 模块

```
module.exports = function (params){
 var app = params.app
 , express = params.express
 , dbConnection = params.dbConnection
 , crypto = params.crypto
 , return_obj = {};
  //validate request
  return_obj.validate_request = function(req, res, next){
    //req validation here
  };
  //check req
  return_obj.checkReq = function (req, res, next){
   //req check here
  }
  return return_obj;
} 
```

# php - 如何在 Joomla 模板中包含 PHP 函数文件

> ID：16206708
> 
> 赞同：2
> 
> 时间：2013-04-25T05:00:30.973
> 
> 标签：php, function, joomla, include, joomla2.5

我一直试图在我的模板中包含一个文件，其中包含一些我打算用于验证成员访问级别的功能，以便在 Joomla 2.5 中为不同类型的用户定制内容。问题是即使我使用了标准的 PHP include 语句，模板中似乎没有一个函数可用。相反，调用函数会导致使用模板的任何页面崩溃。我可以对正在运行的模板顶部的函数进行硬编码，但我也计划在我的 Web 应用程序的其他地方使用一些函数，因此将它们存储在包含文件中是有意义的。有没有人了解为什么这些功能不能从包含中工作，但在添加到模板顶部时会起作用？以下是包含语句的模板的前几行：

```
<?php 
defined( '_JEXEC' ) or die( 'Restricted access' );
JHtml::_('behavior.framework', true);

include ("/includes/checkAccess.php"); 
```

请注意，当硬编码到模板中时，所有功能都可以正常工作，因此绝对是包含问题。此外，上面的包含路径似乎是正确的，因为如果添加了上面的包含行，则模板仍然可以正常工作，除非对其包含的函数之一进行调用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T05:42:23.213

我已经想通了。我上面的包含路径不正确，即使它没有引发错误（除非我从包含中调用了一个函数）。以下是正确的，并成功地将函数拉入模板：

```
include ("./includes/checkAccess.php"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-08-10T15:54:34.287

如果文件夹“包含”在同一目录中，这当然有效

```
include(dirname(__FILE__)."/includes/checkAccess.php"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-25T05:03:48.667

您可以将功能包含在 Joomla 文件中，该文件已经在每个页面上都处于活动状态，而不是通常读取某些内容并排除其他内容的模板。

Joomla 是否已经使用了函数文件？您可以将它包含在它的底部。还要确保您的变量或全局变量都不会与 Joomla 冲突，确保它们都非常独特。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-26T14:48:21.227

对于访问检查，我会使用内置 ACL（访问控制列表）。

阅读有关[ACL](http://docs.joomla.org/Access_Control_List)的更多信息。

# c++ - 由非常量成员函数更改的可变变量

> ID：16206712
> 
> 赞同：1
> 
> 时间：2013-04-25T05:00:37.980
> 
> 标签：c++, mutable

我正在研究 C++，我读到：***如果一个数据成员被声明为可变的，那么从一个 const 成员函数为这个数据成员赋值是合法的。*** 但是以下代码编译时没有任何错误或 gcc 警告。（这不是真实世界的代码示例，我只是为了测试 mutable 关键字而编写的）

```
class M
{
public:
  M(){x=10;};
  int getX() {x++; return x;};
private:
  mutable int x;
};

int main()
{
  M xx;
  std::cout << xx.getX() << std::endl;
} 
```

我不应该将 getX 声明为 const 吗？

**编辑1（ForEver的回答让事情更清楚了），以下代码将不会被编译**：

```
class M
{
public:
  M(){x=10;};
  int getX() const {x++; return x;};
private:
  int x;
};

int main()
{
  M xx;
  std::cout << xx.getX() << std::endl;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-25T05:01:52.660

在函数中修改可变变量`const`是合法的，当然在函数中修改可变变量也是合法的`non-const`（如 each `non-const member-variable`）。`mutable`关键字允许在`const`函数中修改变量，但对函数中的修改没有任何限制`non-const`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T05:22:32.387

`mutable` is typically used to allow `const` qualified member functions to modify cached data. You can declare `getX()` as `const` and happily modify `x`, that's what mutable is for. However it's generally considered a bad idea to modify the internal state of an object in a member function that by it's declaration says it doesn't.

For example, you have a const member function that calculates a value based on the contents of a container. If the container has a lot of elements it might take a long time to get the result. If the result only changes when you add or remove elements from the container you could cache it for later use. Since the member function is const qualified you would need to declare the result variable as `mutable`. Since the result can be calculated from the existing data in the container the cached value isn't considered part of the internal state of the object and it's considered OK to modify it since of a const function.

```
int Foo::CalcResult() const
{
    if(hasValidCache_ == false)
    {

        // ... recalc value ...

        // Cache the result
        hasValidCache = true;
        cachedValue_ result;
    }

    return cachedValue_;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-25T05:28:50.920

声明就是这个意思。

```
class M
{
public:
   M(){x=10;};
   int getX() const
 //           ^^^^^ If a member function is const...

                   {x++; return x;};
 //                 ^^^ ...and it modifies a member variable...
private:
   mutable int x;
// ^^^^^^^ ...then that variable must be mutable.
}; 
```

# android - 如何读写ArrayList 在android中包裹

> ID：16206718
> 
> 赞同：7
> 
> 时间：2013-04-25T05:01:13.030
> 
> 标签：android

在我的项目中，我必须写入和读取`ArrayList<String>`包裹，我尝试使用 writeList 和 writeStringList 但没有用，我在读取列表时遇到异常。

任何人都可以帮助我吗？

提前致谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-25T05:09:49.810

来自@JeremyRoman: `writeStringList`，`readStringList`并且从 API 1 开始`createStringArrayList`就存在。`Parcel`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-06-02T11:11:36.217

用这个来写：

```
bundle.putStringArrayList(KEY, stringArrayList); 
```

这要读：

```
ArrayList<String> stringArrayList = bundle.getStringArrayList(KEY); 
```

# android - 如何获取缓存目录的确切大小：android

> ID：16206722
> 
> 赞同：11
> 
> 时间：2013-04-25T05:01:23.880
> 
> 标签：android, caching

需要：我只是想获取安装在手机中的每个应用程序的占用缓存大小。

我的方法：

```
PackageManager packageManager = getPackageManager();
List<ApplicationInfo> packages = packageManager.getInstalledApplications(PackageManager.GET_META_DATA);

for (ApplicationInfo packageInfo : packages) 
{
    try 
    {
        Context mContext = createPackageContext(packageInfo.packageName, CONTEXT_IGNORE_SECURITY);
        File cacheDirectory = mContext.getCacheDir();
        if(cacheDirectory==null)
        {
            cacheArrayList.add("0");
        }
        else
        {
            cacheArrayList.add(String.valueOf(cacheDirectory.length()/1024));
        }
    }
    catch (NameNotFoundException e)
    {
        e.printStackTrace();
    }
} 
```

结果：如果目录为空，则返回 0（作为条件）。但是如果目录存在，它总是返回 4 Kb。我按照以下过程检查了我的应用程序的缓存：

设置：-> 应用程序：-> 应用程序名称

但我在那里找到了它的0B。

为什么它会发生有人可以解释？以及如何获得缓存的确切大小？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2016-02-18T17:10:41.647

这对我来说更准确：

```
private void initializeCache() {
    long size = 0;
    size += getDirSize(this.getCacheDir());
    size += getDirSize(this.getExternalCacheDir());
    ((TextView) findViewById(R.id.yourTextView)).setText(readableFileSize(size));
}

public long getDirSize(File dir){
    long size = 0;
    for (File file : dir.listFiles()) {
        if (file != null && file.isDirectory()) {
            size += getDirSize(file);
        } else if (file != null && file.isFile()) {
            size += file.length();
        }
    }
    return size;
}

public static String readableFileSize(long size) {
    if (size <= 0) return "0 Bytes";
    final String[] units = new String[]{"Bytes", "kB", "MB", "GB", "TB"};
    int digitGroups = (int) (Math.log10(size) / Math.log10(1024));
    return new DecimalFormat("#,##0.#").format(size / Math.pow(1024, digitGroups)) + " " + units[digitGroups];
} 
```

[字符串到字节格式代码的原始帖子](https://stackoverflow.com/questions/3263892/format-file-size-as-mb-gb-etc)

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2013-04-25T05:20:01.097

在目录上调用长度并不总是返回正确的大小。您可以尝试遍历文件列表并将所有文件大小相加以获得总目录大小。

像这样：

```
long size = 0;
File[] files = cacheDirectory.listFiles();
for (File f:files) {
    size = size+f.length();
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-01-13T10:06:26.173

你将从这个函数中获得缓存大小

```
 public void clearCache() {
   //clear memory cache

   long size = 0;
   cache.clear();

  //clear SD cache
   File[] files = cacheDir.listFiles();
    for (File f:files) {
      size = size+f.length();
     // f.delete();
  }
} 
```

# iphone - iphone sdk 中的 ASIHTTP 请求取消错误

> ID：16206723
> 
> 赞同：1
> 
> 时间：2013-04-25T05:01:34.437
> 
> 标签：iphone, ios, asihttprequest, image-uploading

我正在使用`ASIHTTP request`方法上传多个图像数据。所有图像都成功上传，但只有最后一个图像`ASIHttp`请求失败。我尝试了很多，但我不能再得到了。

有人能帮我吗？

我的代码如下：

```
for(int i=0;i<[arySteps count];i++)
{
     NSMutableArray *StepDetail=[[NSMutableArray alloc] initWithArray:[DatabaseAccess getAddSteps:str]];
     if([[[StepDetail objectAtIndex:0] valueForKey:@"s_image"] length]!=0)
     {
          NSMutableArray *imgary=[[[[StepDetail objectAtIndex:0] valueForKey:@"s_image"] componentsSeparatedByString:@","] mutableCopy];

                    imagedata1=[[NSData alloc] init];
                    imagedata2=[[NSData alloc] init];
                    imagedata3=[[NSData alloc] init];

                    for (int i=0; i<[imgary count]; i++)
                    {
                        if(i==0)
                        {
                            NSString *filename=[NSString stringWithFormat:@"%@.jpeg",[imgary objectAtIndex:0]];
                            NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
                            NSString *documentsDirectory = [paths objectAtIndex:0];
                            NSString *filePath = [documentsDirectory stringByAppendingPathComponent:filename];
                            NSURL *movieURL = [NSURL fileURLWithPath:filePath];
                            imagedata1=[NSData dataWithContentsOfURL:movieURL];
                            NSLog(@"%@",imagedata1);
                        }
                        else if(i==1)
                        {
                            NSString *filename=[NSString stringWithFormat:@"%@.jpeg",[imgary objectAtIndex:1]];
                            NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
                            NSString *documentsDirectory = [paths objectAtIndex:0];
                            NSString *filePath = [documentsDirectory stringByAppendingPathComponent:filename];
                            NSURL *movieURL = [NSURL fileURLWithPath:filePath];
                            imagedata2=[NSData dataWithContentsOfURL:movieURL];
                            NSLog(@"%@",imagedata2);
                        }
                        else if(i==2)
                        {
                            NSString *filename=[NSString stringWithFormat:@"%@.jpeg",[imgary objectAtIndex:2]];
                            NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
                            NSString *documentsDirectory = [paths objectAtIndex:0];
                            NSString *filePath = [documentsDirectory stringByAppendingPathComponent:filename];
                            NSURL *movieURL = [NSURL fileURLWithPath:filePath];
                            imagedata3=[NSData dataWithContentsOfURL:movieURL];
                            NSLog(@"%@",imagedata3);
                        }
                    }

                    NSString *strurl=[NSString stringWithFormat:@"http://inst.niftysol.com/app/webroot/webservices/test.php?said=%d&stepid=%@", appdel.idPARENTID,s_id_live];

                    [self setHttprequest:[ASIFormDataRequest requestWithURL:[NSURL URLWithString:strurl]]];
                    //NSString *userid=[NSString stringWithFormat:@"%d",appdel.idUID];
                    // [httprequest setPostValue:userid forKey:@"s_user_id"];
                    [httprequest setShouldContinueWhenAppEntersBackground:YES];
                    [httprequest setDelegate:self];
                    [httprequest setDidFinishSelector:@selector(uploadFinished:)];
                    [httprequest setDidFailSelector:@selector(uploadFailed:)];
                    [httprequest setData:imagedata1 withFileName:@"1.jpeg" andContentType:@"image/jpeg" forKey:@"userfile1"];
                    [httprequest setData:imagedata2 withFileName:@"2.jpeg" andContentType:@"image/jpeg" forKey:@"userfile2"];
                    [httprequest setData:imagedata3 withFileName:@"3.jpeg" andContentType:@"image/jpeg" forKey:@"userfile3"];
                    countupload=countupload+1;
                    [httprequest startAsynchronous];

                }
} 
```

在上面的代码中，我已经正确获取了所有图像数据，但是最后一个图像请求失败了。我得到错误：

> 错误域=ASIHTTPRequestErrorDomain 代码=4“请求已取消” UserInfo=0x96fbfe0 {NSLocalizedDescription=请求已取消}

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-25T05:50:36.907

如果可能的话你应该切换到[`AFNetworking`](https://github.com/AFNetworking/AFNetworking)，很容易集成。虽然回答了您的问题，但您应该切换到 ASIHTTPRequest 的网络队列。

在头文件中声明，在实现文件`ASINetworkQueue *networkQueue;`中声明属性`@property (retain) ASINetworkQueue *networkQueue;`并综合它。

```
-(void)doUploadOperation //You can call this method for your upload operation.
{
    [[self networkQueue] cancelAllOperations];
    // Creating a new queue each time we use it means we don't have to worry about clearing delegates or resetting progress tracking
    [self setNetworkQueue:[ASINetworkQueue queue]];
    [[self networkQueue] setDelegate:self];
    [[self networkQueue] setRequestDidFinishSelector:@selector(requestFinished:)];
    [[self networkQueue] setRequestDidFailSelector:@selector(requestFailed:)];
    [[self networkQueue] setQueueDidFinishSelector:@selector(queueFinished:)];

    int i;
    for (i=0; i<[arySteps count]; i++)
    {
        //First create image data
        NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
        NSString *documentsDirectory = [paths objectAtIndex:0];
        NSString *filename=[NSString stringWithFormat:@"%@.jpeg",[imgary objectAtIndex:i]];
        NSString *filePath = [documentsDirectory stringByAppendingPathComponent:filename];
        NSURL *movieURL = [NSURL fileURLWithPath:filePath];
        NSData *imagedata=[NSData dataWithContentsOfURL:movieURL];

        //Create request and add to network queue
        NSString *strurl=[NSString stringWithFormat:@"http://inst.niftysol.com/app/webroot/webservices/test.php?said=%d&stepid=%@", appdel.idPARENTID,s_id_live];
        ASIFormDataRequest *request = [ASIFormDataRequest requestWithURL:[NSURL URLWithString:strurl]];
        [request setShouldContinueWhenAppEntersBackground:YES];
        [request setData:imagedata withFileName:[NSString stringWithFormat:@"%d.jpeg",i+1] andContentType:@"image/jpeg" forKey:[NSString stringWithFormat:@"userfile%d",i+1]];
        request.tag = i;
        [[self networkQueue] addOperation:request];
    }
    [[self networkQueue] go];
}

- (void)requestFinished:(ASIHTTPRequest *)request
{
    if ([[self networkQueue] requestsCount] == 0) {
        [self setNetworkQueue:nil];
    }
    //... Handle success
    NSLog(@"Individual Request finished");
}

- (void)requestFailed:(ASIHTTPRequest *)request
{
    if ([[self networkQueue] requestsCount] == 0) {
        [self setNetworkQueue:nil];
    }
    NSLog(@"Individual Request failed");
}

- (void)queueFinished:(ASINetworkQueue *)queue
{
    if ([[self networkQueue] requestsCount] == 0) {
        [self setNetworkQueue:nil];
    }
    NSLog(@"Whole Queue finished");
} 
```

希望这可以帮助。如果您需要更多帮助，请随时留言。

# android - (Android)如何使用DynamicLinkLibrary构建原生c helloworld？

> ID：16206724
> 
> 赞同：0
> 
> 时间：2013-04-25T05:01:45.133
> 
> 标签：android, native, dynamic-linking

## 我想用动态链接库做一个原生c程序，所以我把这些文件放在Android/development/hello/：hello.c，myprint.h，myprint.c，main()在hello.c，和Android.mk 是：

```
LOCAL_PATH := $(call my-dir)

include $(CLEAR_VARS)
LOCAL_MODULE := myprint
LOCAL_SRC_FILES := myprint.c
include $(BUILD_SHARED_LIBRARY)

include $(CLEAR_VARS)
LOCAL_MODULE := helloworld
LOCAL_SRC_FILES := hello.c
LOCAL_SHARED_LIBRARIES := myprint
include $(BUILD_EXECUTABLE) 
```

* * *

## 然后我做helloworld，输出信息是：

```
target thumb C: helloworld <= development/hello/hello.c
target thumb C: myprint <= development/hello/myprint.c
target SharedLib: myprint (out/target/product/generic/obj/SHARED_LIBRARIES/myprint_intermediates/LINKED/myprint.so)
target Symbolic: myprint (out/target/product/generic/symbols/system/lib/myprint.so)
target Strip: myprint (out/target/product/generic/obj/lib/myprint.so)
target Executable: helloworld (out/target/product/generic/obj/EXECUTABLES/helloworld_intermediates/LINKED/helloworld)
/home/neil/dev/google_422/prebuilts/gcc/linux-x86/arm/arm-linux-androideabi-4.7/bin/../lib/gcc/arm-linux-androideabi/4.7/../../../../arm-linux-androideabi/bin/ld: error: cannot find -lmyprint.so
development/hello/hello.c:5: error: undefined reference to 'myprint'
collect2: error: ld returned 1 exit status 
```

* * *

请帮我...

我的本机代码是：

```
// hello.c
#include "myprint.h"
int main()
{
    myprint();
    return 0;
}

// myprint.h
void myprint();

// myprint.c
#include <stdio.h>
void myprint()
{
    printf("myprint...\n");
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T05:24:27.823

This is happening because you might not be compiling both files so it is unable to locate/link the declaration of that function.

try this

gcc headerfile.c mainfile.c

# asp.net-mvc - 发送表单数据 xmlhttprequest

> ID：16206731
> 
> 赞同：0
> 
> 时间：2013-04-25T05:02:48.900
> 
> 标签：asp.net-mvc

在下面的代码中，首先允许用户从下拉列表中选择选项，然后允许浏览文件。代码：

```
 function choice() {
   var box = dhtmlx.modalbox({
       text: "<div id='form_in_box'><div>Choose a File to Convert <hr/><label>Filename: <input type='file' name='file' id='file' style='width: 400px; height: 27px;'></label><br></div><div><span class='dhtmlx_button'><input type='submit' value='Create PDF' style='width: 86px' onclick='Convert(this)'></span><span class='dhtmlx_button'><input type='button' value='Cancel' onclick='close_file(this)' style='width:80px;'></span></label></div></div>",
       width: "300px"
   }); 
```

}

```
 function Convert(box) {
   var ch = document.getElementById('choice');
   var file = document.getElementById('file');
   if (file.value == "") {
       alert("Choose a file to convert");
       return false;
   }

   dhtmlx.modalbox.hide(box);
   var fd = new FormData();
   fd.append('file', file.files[0]);
   var xhr = new XMLHttpRequest();
   xhr.open('POST', '/FileUpload/Convert', true);
   xhr.onreadystatechange = function () {
       if (xhr.readyState == 4 && xhr.status == 200) {
           alert('File successfully conveted to PDF');
       }
   };
   xhr.send(fd); 
```

在 ch 中，下拉选项被保存。我想将 ch 值发送到控制器控制器代码：

```
public ActionResult Convert(HttpPostedFileBase file, FormCollection data)
    {
        string choice = data["choice"]; 
```

我怎样才能发送它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T06:28:59.723

您可以将其添加到`FormData`：

```
var fd = new FormData();
fd.append('file', file.files[0]);
fd.append('choice', ch.value); 
```

您的控制器操作现在可能如下所示：

```
public ActionResult Convert(HttpPostedFileBase file, string choice)
{
    ...
} 
```

# android - 使用多个标记自定义 Android 地图气球

> ID：16206733
> 
> 赞同：0
> 
> 时间：2013-04-25T05:02:55.217
> 
> 标签：android, android-mapview

在下面的 CustomMap.java 类中，我想自定义代码，以便我可以添加地理点数组、多个 itemisedOvelay，如 CustomMap 第 2 部分。

```
public class CustomMap extends MapActivity {
    MapView mapView;
    List<Overlay> mapOverlays;
    Drawable drawable;
    Drawable drawable2;
    CustomItemizedOverlay<CustomOverlayItem> itemizedOverlay;
    CustomItemizedOverlay<CustomOverlayItem> itemizedOverlay2;

    @Override
    public void onCreate(Bundle savedInstanceState) {

        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        mapView = (MapView) findViewById(R.id.mapview);
        mapView.setBuiltInZoomControls(true);

        mapOverlays = mapView.getOverlays();

        // first overlay
        drawable = getResources().getDrawable(R.drawable.marker);
        itemizedOverlay = new CustomItemizedOverlay<CustomOverlayItem>(drawable, mapView);

        GeoPoint point = new GeoPoint((int)(51.5174723*1E6),(int)(-0.0899537*1E6));
        CustomOverlayItem overlayItem = new CustomOverlayItem(point, "Tomorrow Never Dies (1997)", 
                "(M gives Bond his mission in Daimler car)", 
                "http://ia.media-imdb.com/images/M/MV5BMTM1MTk2ODQxNV5BMl5BanBnXkFtZTcwOTY5MDg0NA@@._V1._SX40_CR0,0,40,54_.jpg");
        itemizedOverlay.addOverlay(overlayItem);

        GeoPoint point2 = new GeoPoint((int)(51.515259*1E6),(int)(-0.086623*1E6));
        CustomOverlayItem overlayItem2 = new CustomOverlayItem(point2, "GoldenEye (1995)", 
                "(Interiors Russian defence ministry council chambers in St Petersburg)", 
                "http://ia.media-imdb.com/images/M/MV5BMzk2OTg4MTk1NF5BMl5BanBnXkFtZTcwNjExNTgzNA@@._V1._SX40_CR0,0,40,54_.jpg");       
        itemizedOverlay.addOverlay(overlayItem2);
        mapOverlays.add(itemizedOverlay);
        // second overlay
        drawable2 = getResources().getDrawable(R.drawable.marker2);
        itemizedOverlay2 = new CustomItemizedOverlay<CustomOverlayItem>(drawable2, mapView);

        GeoPoint point3 = new GeoPoint((int)(51.513329*1E6),(int)(-0.08896*1E6));
        CustomOverlayItem overlayItem3 = new CustomOverlayItem(point3, "Sliding Doors (1998)", 
                "(interiors)", null);
        itemizedOverlay2.addOverlay(overlayItem3);

        GeoPoint point4 = new GeoPoint((int)(51.51738*1E6),(int)(-0.08186*1E6));
        CustomOverlayItem overlayItem4 = new CustomOverlayItem(point4, "Mission: Impossible (1996)", 
                "(Ethan & Jim cafe meeting)", 
                "http://ia.media-imdb.com/images/M/MV5BMjAyNjk5Njk0MV5BMl5BanBnXkFtZTcwOTA4MjIyMQ@@._V1._SX40_CR0,0,40,54_.jpg");       
        itemizedOverlay2.addOverlay(overlayItem4);
        mapOverlays.add(itemizedOverlay2);
        final MapController mc = mapView.getController();
        mc.animateTo(point2);
        mc.setZoom(16);
    }

    @Override
    protected boolean isRouteDisplayed() {
        return false;
    }

} 
```

**代码第 2 部分：**

这不是代码，而是我希望如何进行更改的一些逻辑。总而言之，我尝试使 CustomMap.java 灵活，以便我可以通过数组向它添加多个点和信息。

```
public class CustomMap extends MapActivity {

    MapView mapView;
    List<Overlay> mapOverlays;
    Drawable drawable;
    Drawable drawable2;
    CustomItemizedOverlay<CustomOverlayItem> itemizedOverlay[];
    CustomItemizedOverlay<CustomOverlayItem> itemizedOverlay2[];
    double[]lat,lon;

    @Override
    public void onCreate(Bundle savedInstanceState) {

        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        mapView = (MapView) findViewById(R.id.mapview);
        mapView.setBuiltInZoomControls(true);

        mapOverlays = mapView.getOverlays();

        // first overlay
        drawable = getResources().getDrawable(R.drawable.marker);
        itemizedOverlay = new CustomItemizedOverlay<CustomOverlayItem>(drawable, mapView);

        GeoPoint point[] = new GeoPoint((int)(lat*1E6),(int)(lon*1E6));
        CustomOverlayItem overlayItem = new CustomOverlayItem(point, "Tomorrow Never Dies (1997)", 
                "(M gives Bond his mission in Daimler car)", 
                "http://ia.media-imdb.com/images/M/MV5BMTM1MTk2ODQxNV5BMl5BanBnXkFtZTcwOTY5MDg0NA@@._V1._SX40_CR0,0,40,54_.jpg");
        itemizedOverlay.addOverlay(overlayItem);

        mapOverlays.add(itemizedOverlay);

        final MapController mc = mapView.getController();
        mc.animateTo(point2);
        mc.setZoom(16);

    }

    @Override
    protected boolean isRouteDisplayed() {
        return false;
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T05:16:49.420

设置叠加 mapview.getOverlays().add(new SitesOverlay());

用于自定义弹出
**SitesOverlay.class**

```
private class SitesOverlay extends ItemizedOverlay<CustomItem> {
            private List<CustomItem> items;
            private View view = null;

            public SitesOverlay() {
                super(null);
                items = new ArrayList<CustomItem>();
                items.add(new CustomItem(pt, busName, "Bendigo", marker));
                boundCenter(marker);
                populate();
            }

            @Override
            protected CustomItem createItem(int i) {
                return (items.get(i));
            }

            @Override
            public void draw(Canvas canvas, MapView mapView, boolean shadow) {
                if (!shadow) {
                    super.draw(canvas, mapView, false);
                }

            }

            @Override
            public int size() {
                return (items.size());
            }

            public void refresh() {
                populate();
            }

            public void clear() {
                items.clear();
                resetLastFocuesIndex();
            }

            public void resetLastFocuesIndex() {
                setLastFocusedIndex(-1);
            }

            @Override
            protected boolean onTap(final int index) {
                if (view != null) {
                    view.setVisibility(View.GONE);
                    getMapView().removeView(view);
                    getMapView().invalidate();
                    view = null;
                }
                view = getLayoutInflater().inflate(R.layout.balloon_overlay, null);
                LinearLayout layout = (LinearLayout) view
                        .findViewById(R.id.balloon_main_layout);
                layout.setLayoutParams(new LayoutParams(LayoutParams.WRAP_CONTENT,
                        LayoutParams.WRAP_CONTENT));
                view.setLayoutParams(new LayoutParams(LayoutParams.WRAP_CONTENT,
                        LayoutParams.WRAP_CONTENT));
                view.setBackgroundResource(R.drawable.balloon_overlay_bg_selector);
                ImageView image = (ImageView) view
                        .findViewById(R.id.balloon_disclosure);
                TextView text = (TextView) view
                        .findViewById(R.id.balloon_item_title);
                text.setText(items.get(index).getTitle());

                Projection projection = getMapView().getProjection();
                Point point = new Point();
                projection.toPixels(items.get(index).getPoint(), point);

                int x = (int) (view.getWidth() / 2f);
                int y = -marker.getIntrinsicHeight() - 3;

                MapView.LayoutParams lp = new MapView.LayoutParams(
                        ViewGroup.LayoutParams.WRAP_CONTENT,
                        ViewGroup.LayoutParams.WRAP_CONTENT, items.get(index)
                                .getPoint(), x, y + 50,
                        MapView.LayoutParams.BOTTOM_CENTER);
                getMapView().removeView(view);
                getMapView().invalidate();
                getMapView().addView(view, lp);
                getMapView().invalidate();

                view.setOnClickListener(new OnClickListener() {
                    @Override
                    public void onClick(View view) {
                        if (!items.isEmpty()) {
                            if (view != null) {
                                view.setVisibility(View.GONE);
                                getMapView().invalidate();
    //                          Intent intent=new Intent(MapLocationActivity.this,);

                            }
                        }
                        getMapView().invalidate();
                    }
                });
                return true;
            }
        }

        class CustomItem extends OverlayItem {
            Drawable marker = null;

            CustomItem(GeoPoint pt, String name, String snippet, Drawable marker) {
                super(pt, name, snippet);
                this.marker = marker;
            }

            @Override
            public Drawable getMarker(int stateBitset) {
                Drawable result = marker;
                setState(result, stateBitset);
                return (result);
            }

        } 
```

如果有多个标记，那么

```
for (int i = 0; i < arrayList.size(); i++) {
                    slat = Double.parseDouble(arrayList.get(i).getLat());
                    vlong = Double.parseDouble(arrayList.get(i).getvLong());
                    pt = new GeoPoint((int) (slat * 1E6), (int) (vlong * 1E6));
                    Log.e("lat long", "--- "+slat);
                    MapviewActivity.this.mc.animateTo(pt);
                    items.add(new CustomItem(pt, arrayList.get(i).getBuissnessName(), "Bendigo", marker));
                    boundCenter(marker);
                } 
```

在 SitesOverlay() 构造函数中执行此操作。

# sql - 分组依据：ORA-00937：不是单组分组函数

> ID：16206740
> 
> 赞同：1
> 
> 时间：2013-04-25T05:04:14.423
> 
> 标签：sql, oracle, group-by, having

为什么这个查询不能正常工作？

```
SELECT e.* 
FROM enrolled e 
FULL OUTER JOIN student s ON e.studentid = s.sid 
WHERE ((e.quarter = 'Fall') OR (e.quarter = 'Spring')) 
GROUP BY e.studentid 
HAVING count(e.studentid) == 1; 
```

发生的错误：

> ORA-00937: 不是单组组函数 00937\. 00000 - “不是单组组函数” *原因：*操作：行错误：1 列：8

谢谢，

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-25T06:02:35.950

正如 Rene 所说，您不能选择不在 group by 子句中的列。

如果您想选择这些列，但仅适用于`studentid`具有某些标准的 s，`count(*) = 2`您可以这样做：

```
select *
from
(SELECT e.*, count(*) over (partition by e.studentid)  cnt
FROM enrolled e 
FULL OUTER JOIN student s ON e.studentid = s.sid 
WHERE ((e.quarter = 'Fall') OR (e.quarter = 'Spring')) 
)
where cnt = 2 
```

或者

```
SELECT e.*, count(*) over (partition by e.studentid)  cnt
FROM enrolled e 
FULL OUTER JOIN student s ON e.studentid = s.sid 
WHERE ((e.quarter = 'Fall') OR (e.quarter = 'Spring')) 
  AND (select count(*) from enrolled i where i.studentid = e.studentid) = 2 
```

无论如何，你不能`==`只做`=`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T05:46:57.013

当您使用“分组依据”时，您只能选择“分组依据”中使用的列。

您正在选择 e.*。将其更改为 e.studentid。

而它的`having count(*) = 1`. 不是`having count(*) ==1`。

# php - 使用foreach php的多个数组数据发布和mysql插入

> ID：16206741
> 
> 赞同：1
> 
> 时间：2013-04-25T05:04:15.970
> 
> 标签：php

我的表单如下，具有相同名称的文本字段列，我想使用下面的表单将多个数组数据插入 mysql。请告诉我如何在 php mysql 中使用 foreach

第一栏

```
<input  name="date[]" type="text" class="datepicker">
<input type="text" name="local[]" />
<input type="text" name="desc[]" />
<input type="text" name="ta[]" />
<input type="text" name="car[]" /> 
```

第二栏

```
<input  name="date[]" type="text" class="datepicker">
<input type="text" name="local[]" />
<input type="text" name="desc[]" />
<input type="text" name="ta[]" />
<input type="text" name="car[]" /> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T05:14:29.610

首先，我将重命名您的表单字段以使其更容易：

```
<?php
$number_of_columns = 2;
for($i=0;$i<$number_of_columns;$i++) :?>
    <input  name="col[<?=$i?>][date]" type="text" class="datepicker">
    <input type="text" name="col[<?=$i?>][local]" />
    <input type="text" name="col[<?=$i?>][desc]" />
    <input type="text" name="col[<?=$i?>][ta]" />
    <input type="text" name="col[<?=$i?>][car]" />
<?php endfor;?> 
```

然后，一旦您获得数据，您就可以遍历`$_POST['col']`数组并将每个数组单独插入数据库。我在这里假设您已经连接到数据库并且正在使用 mysql 库。

```
$cols = $_POST['col'];
$table = 'table_name';
foreach($cols as $col) {
    $local = mysql_real_escape_string($col['local']);
    $desc = mysql_real_escape_string($col['desc']);
    $ta = mysql_real_escape_string($col['ta']);
    $car = mysql_real_escape_string($col['car']);
    mysql_query("INSERT INTO `{$table}` (`local`, `desc`, `ta`, `car`) VALUES('{$local}', '{$desc}', '{$ta}', '{$car}')") or die(mysql_error());
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T05:14:13.717

试试这个代码：

```
extract($_POST);
$n = count($date);
for ($i = 0; $i < n; $i++) {
    $query = 'INSERT INTO `table` (`c1`, `c2`, `c3`, `c4`, `c5`) VALUES (\'' . $date[$i] . '\', \'' . $local[$i] . '\', \'' . $desc[$i] . '\', \'' . $ta[$i] . '\', \'' . $car[$i] . '\')';
    // Here you must execute your query
} 
```

# c# - 用于控制中继器的 asp.net Web 应用程序和 c# 代码。

> ID：16206744
> 
> 赞同：1
> 
> 时间：2013-04-25T05:04:30.860
> 
> 标签：c#, asp.net, web-applications, controller

我一直在尝试在 .cs 文件中编写 c# 代码来控制中继器。我不知道如何使用实体模型从表中获取数据并使用转发器执行到类别到子类别...

这是 HTML 代码：

```
 <asp:Repeater ID="Repeater1" runat="server" DataSourceID="SqlDataSource1" >
               <ItemTemplate>
               <table>
          <tr>  
          <td style="height:50px">
                    <a href="Home.aspx?id=1"> <asp:Label ID="lbl1" runat="server"> <%#Eval("ForumName") %> </asp:Label></a></td> 
         <td>  By : <asp:Label ID="lbl2" runat="server"> <%#Eval("CeatedBy") %></asp:Label></td>
         <td>  on  <asp:Label ID="lbl3" runat="server"> <%#Eval("DateCreated") %></asp:Label></td> <br /> <br /> </tr>
                      </table></ItemTemplate>
           </asp:Repeater>

           <asp:Repeater ID="Repeater2" runat="server" DataSourceID="SqlDataSource2" >
               <ItemTemplate>
                   <table>
                       <tr>
                           <td> <asp:Label ID="lbl4" runat="server" selectcommand="SELECT [ThreadName] FROM [Threads]" > <%#Eval("ThreadName") %></asp:Label></td>
                       </tr>
                   </table>
               </ItemTemplate>
           </asp:Repeater>

           <asp:SqlDataSource ID="SqlDataSource2" runat="server" ConnectionString="<%$ ConnectionStrings:ForumConnectionString %>" SelectCommand="SELECT [ThreadName] FROM [Threads]" ></asp:SqlDataSource>
           <asp:SqlDataSource ID="SqlDataSource1" runat="server" ConnectionString="<%$ ConnectionStrings:ForumConnectionString %>" SelectCommand="SELECT [ForumName], [CeatedBy], [DateCreated], [IsActive] FROM [Forum1]"></asp:SqlDataSource> 
```

我必须将主题名称放在特定论坛下方...！所以我无法通过使用实体模型来找出它的 c# 代码..！

等待解决方案。。

谢谢，杰

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-26T07:09:39.767

您想使用实体框架将您的数据与代码隐藏文件中的那些转发器绑定吗？

# java - Java 中用于 Web 应用程序编程的不同技术如何协同工作？

> ID：16206746
> 
> 赞同：4
> 
> 时间：2013-04-25T05:04:38.780
> 
> 标签：java, web-applications

我想使用 Java 开发一个 web 应用程序。但我很困惑所有这些不同的技术是什么以及它们如何协同工作：

*   HTTP
*   HTML
*   CSS
*   Javascript
*   jQuery
*   网络容器
*   小服务程序
*   JSP
*   JSTL
*   表达语言（EL）

在网络上可以找到关于这些主题的大量资源，而且每个资源看起来都需要阅读几本书才能理解它们。您能否解释一下这些技术，以便我在开始开发 Web 应用程序时对它们有一个基本的了解？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-25T05:04:38.780

请注意，此解释的目的是提供一般理解，而不是检查每个主题的所有细节。有经验的用户肯定会发现“太笼统”的点，但我们不要混淆新用户。每个主题都提供了进一步阅读的链接。

让我们从基本的基础开始。您需要了解网页是如何进入您的计算机的，以便了解以下所有技术。

# HTTP

HTTP 代表[*超文本传输​​协议*](http://en.wikipedia.org/wiki/Hypertext_Transfer_Protocol)。它描述了浏览器如何与网络服务器通信以检索其内容（网页）。网页存储在服务器上，浏览器需要一种方法来告诉服务器它想要获取哪个网页。另一方面，服务器需要告诉浏览器是否找到了请求的资源，并将此信息发送给浏览器。

1.  浏览器向服务器发送**请求**。请求由几个部分组成：
    *   URL，例如“ [https://stackoverflow.com/questions/ask](https://stackoverflow.com/questions/ask) ”，因此服务器知道要传递哪个页面。
    *   [HTTP](https://en.wikipedia.org/wiki/HTTP#Request_methods)方法。最常见的是**get**，它表示浏览器想要检索信息（例如，单个页面，或 web 搜索），而**post**，它表示浏览器将一些信息推送到 web 服务器，例如论坛帖子。Post 通常会更改服务器上的某些内容（例如论坛中的新帖子），而 get 不会。
    *   请求正文，例如可以包含文本框的文本、要上传的图像等。
2.  服务器发回一个**response**，这是浏览器请求的答案。它包括：
    *   [HTTP 状态](http://en.wikipedia.org/wiki/List_of_HTTP_status_codes)码。这是一个显示请求结果的三位数字。最常见的是 OK (2xx)、REDIRECTION (3xx)、CLIENT ERROR (4xx) 和 SERVER ERROR (5xx)。重定向状态代码是将浏览器重定向到另一个页面的最佳方式。
    *   响应正文，其中包含网页（如果有）。

# HTML

HTML 代表[*超文本标记语言*](http://en.wikipedia.org/wiki/HTML)并呈现**内容**。HTML 文本从服务器发送到客户端（即浏览器），并由浏览器呈现以显示给用户。示例 HTML：

```
<!DOCTYPE HTML>
<html>
    <head>
        <title>My first webpage</title>
    </head>
    <body>
        <p>Hello World!</p>
    </body>
</html> 
```

由于 HTML 多年来一直在改进，因此每个 HTML 页面的第一行包含**DOCTYPE**声明**非常重要。**它告诉浏览器应该如何呈现不同的**标签**（如）。渲染过程由浏览器完成。由本地计算机上的浏览器完成的所有操作都称为**客户端**。记住那个词！****`<p>`****

 ******# CSS

表示*[层叠样式表](http://en.wikipedia.org/wiki/Cascading_Style_Sheets)*。这会为网页添加**样式**，例如颜色、字体大小、元素位置等。CSS 定义通常保存在单独的文件中以提高可维护性。样式的渲染也是在**客户端**完成的。

# JavaScript

不，这与 Java 无关。重复：**没有**。它是一种[完全不同的编程语言，由](https://stackoverflow.com/questions/245062/whats-the-difference-between-javascript-and-java/5184356#5184356)**客户端**的浏览器执行。使用[JavaScript](http://en.wikipedia.org/wiki/Javascript)，您可以在网页中包含**编程逻辑并执行以下操作：**

*   验证用户输入
*   花式幻灯片
*   甚至编程游戏！

您需要注意，可以在浏览器中关闭 JavaScript，然后不会执行任何 JavaScript 代码。所以你不应该依赖于你的 web 应用程序的 JavaScript 可用性（除非你必须这样做，比如游戏）。JavaScript 可能会被滥用于重定向（应该使用 HTTP 状态代码）或元素样式（使用 CSS）。因此，在使用 Javascript 做某事之前，请检查是否有可能以其他方式进行。[甚至下拉菜单也可以仅使用 HTML 和 CSS！](http://line25.com/tutorials/how-to-create-a-pure-css-dropdown-menu)

# jQuery

[jQuery](http://jquery.com/)只不过是一个用 JavaScript 编写的库。当你想让你的 JavaScript 跨浏览器兼容时，它会变得很方便，因为不同的浏览器在它们的 JavaScript 实现上有一些细微的差异。它对于[选择页面的某些元素](http://api.jquery.com/category/selectors/)、[效果](http://api.jquery.com/category/effects/)等也很有用。它仍然是 JavaScript，因此它在**客户端**运行。

# 网络容器

这是一个位于您的服务器上并在**服务器端**运行的软件。您的 Web 应用程序通常放置在[Web 容器中](http://en.wikipedia.org/wiki/Web_container)。它是客户端请求和您的 web 应用程序之间的接口，并做了几件事来使编程 web 应用程序更舒适。例如，[Apache Tomcat](http://tomcat.apache.org/)是一个 Web 容器。

# 小服务程序

现在我们进入 Java 世界。[Servlet](http://en.wikipedia.org/wiki/Servlet)是 Web 应用程序的一部分，它位于 Web 容器内的服务器上，它们在**server-side**上运行。Servlet 是处理来自客户端的**请求**并返回**响应**的 Java 类。一个典型的 HTTP Servlet 如下所示：

```
public class HelloWorld extends HttpServlet {
    public void doGet(HttpServletRequest request,
                      HttpServletResponse response)
                      throws ServletException, IOException {
        PrintWriter out = response.getWriter();
        out.println("<!DOCTYPE HTML>");
        out.println("<html>");
        out.println("<head>");
        out.println("<title>Hi</title>");
        out.println("</head>");
        out.println("<body>");
        out.println("<p>Hello World!</p>");
        out.println("</body>");
        out.println("</html>");
    }
} 
```

`HttpServlet`类有几个`doXxx`方法，每个 HTTP 方法一个，开发人员可以覆盖这些方法。在这里，`doGet`被覆盖，这意味着当一个 GET 请求被发送到这个 servlet 时，这个代码被执行。此方法获取请求和响应作为参数，`HttpServletRequest`并且`HttpServletResponse`.

要通过 URL 访问这个 Servlet，必须配置[web.xml ：](http://en.wikipedia.org/wiki/Web.xml)

```
<servlet>
    <servlet-name>HelloWorld</servlet-name>
    <servlet-class>com.example.HelloWorld</servlet-class>
</servlet>
<servlet-mapping>
    <servlet-name>HelloWorld</servlet-name>
    <url-pattern>/hello</url-pattern>
</servlet-mapping> 
```

现在，客户端可以使用 GET 和`/hello`URL 向我们的 servlet 发出请求。例如，如果我们的 web 应用程序在 www.example.com 上运行，则要使用的正确 URL 将`http://www.example.com/hello`使用 GET。

# JSP

代表[*Java 服务器页面*](http://en.wikipedia.org/wiki/JavaServer_Pages)。如您所见，使用 Servlet 向客户端发送响应是相当不方便的。一些聪明人有这样的想法：“如果我们可以将 Java 代码添加到 HTML 页面会怎样？” 嗯，这就是 JSP：

```
<!DOCTYPE HTML>
<html>
    <head>
        <title>Hello JSP</title>
    </head>
    <body>
        <%
            for(int i=0; i<10; i++){
                out.print("Loop number " + i);
            }
        %>          
    </body>
</html> 
```

事实上，[JSP 被翻译成 Java Servlet 代码](https://stackoverflow.com/questions/15459832/jsp-tranlation-to-servlet)（由 Web 容器）并编译。真的！这不是魔法。这意味着，它们只不过是 Servlet！这是上述 JSP 的等效 Servlet 代码：

```
public class ServletAbc extends GenericServlet {
    public void service(ServletRequest req,ServletResponse res)
                        throws ServletException, IOException{
        PrintWriter out = res.getWriter();

        out.println("<!DOCTYPE HTML>");
        out.println("<html>");
        out.println("<head>");
        out.println("<title>Hello JSP</title>");
        out.println("</head>");
        out.println("<body>");
        for(int i=0; i<10; i++){
            out.print("Loop number " + i);
        }
        out.println("</body>");
        out.println("</html>");
    }
} 
```

您会看到，在将响应发送到客户端之前，所有 Java 代码都在**服务器端进行处理。**

# JSTL

代表[*Java 标准标记库*](https://stackoverflow.com/tags/jstl/info)。顾名思义，它是一个库，您[需要先包含](https://stackoverflow.com/questions/292914/where-can-i-download-jstl-jar)它才能使用它。

带有 Java 代码的 JSP 仍然不是最好的解决方案。随着页面大小的增加，它变得非常不可读，降低了可维护性并且难以阅读。那么，如果我们可以只使用额外的**标签**来实现页面流、循环等，并让 Java 类来完成编程逻辑呢？欢迎使用标签库！

那里有很多标签库，而 JSTL 是“基本”标签库，提供核心功能。这包括 if/else 结构、循环等。它包含在 JSP 中，被翻译和编译为 Servlet，因此在**服务器端**运行。

# 埃尔

表示[*表达式语言*](https://stackoverflow.com/tags/el/info)，用于评估表达式和访问您在 Java 类中创建的 Java 对象的值。通常，您将 Servlet、JSP、JSTL 和表达式语言结合起来：

*   客户端请求到达 Servlet。Servlet 执行一些编程逻辑（例如从数据库中读取数据）并在请求中存储一些 Java 对象。之后，它将请求转发到服务器上的另一个资源，例如 JSP。**转发** [发生在 Web 应用程序内部，](https://stackoverflow.com/questions/6068891/difference-between-jsp-forward-and-redirect)而**不是**重定向。
*   JSP 使用 EL 访问请求中的 Java 对象，显示它们并将响应发送给客户端。

例如，这是您的 Servlet：

```
public class HelloWorld extends HttpServlet {
   public void doGet(HttpServletRequest request,
                     HttpServletResponse response)
                     throws ServletException, IOException {
      // access databases, do calculations etc. here
      String hello = "Hello world!";
      String someBoolean = true;
      request.setAttribute("helloObject", hello);
      request.setAttribute("myBoolean", hello);
      RequestDispatcher dispatcher = request.getRequestDispatcher("/result.jsp);
      dispatcher.forward(request, response);
   }
} 
```

和`result.jsp`：

```
<!DOCTYPE HTML>
<html xmlns:c="http://java.sun.com/jsp/jstl/core">
    <head>
        <title>Hello EL</title>
    </head>
    <body>
        ${helloObject}
        <c:if test="${myBoolean}">
            The expression is true.
        </c:if>
    </body>
</html> 
```

这将输出`Hello world! The expression is true.`.

# 要记住的事情

*   我想我已经足够清楚地展示了在服务器端运行什么以及在客户端运行什么。不要把它们混在一起。
*   始终为正确的工作使用正确的工具。HTML 用于内容，CSS 用于布局和样式，Javascript 用于客户端编程逻辑。如果您不需要它，请不要依赖 Javascript，有些用户已将其关闭。
*   大多数其他技术，如 JSF，都是建立在现有技术之上的。了解它们的构建基础，以了解它们在哪里运行（客户端、服务器）以及它们应该做什么。******

# javascript - 如何在javascript中获取spring mvc控制器模型键值？

> ID：16206754
> 
> 赞同：9
> 
> 时间：2013-04-25T05:05:16.090
> 
> 标签：javascript, spring, jsp, jquery, spring-mvc

我正在使用弹簧 mvc 控制器。在控制器内部，我输入了一些值让我们说模型内部的字符串。现在我想检索该值，或者说在 javascript 中打印该值。我该怎么做？这是我的控制器类。我正在添加“电影”作为键。现在我想在 java 脚本中显示电影的名称（不在 JSP 中。但是在 JavaScript 中）

```
@Controller
@RequestMapping("/movie")
public class MovieController {

    @RequestMapping(value="/{name}", method = RequestMethod.GET)
    public String getMovie(@PathVariable String name, ModelMap model) {

        model.addAttribute("movie", name);
        return "list";

    }

} 
```

这是我的 JSP

```
<html>
<head>
//I want to print movie name inside java script not inside jSP body tag.
<script type="text/javascript">
var movie_name = ${movie};
alert("movies name"+ movie_name);
</script>
</head>
<body>
    <h3>Movie Name : ${movie}</h3>//When i print here its working fine. 
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-04-25T05:11:26.533

用这个：

```
var movie_name = "${movie}"; 
```

代替：

```
var movie_name = ${movie}; 
```

使用 时`${movie}`，该值被放置在页面上，不带引号。因为我猜它是一个字符串，所以 Javascript 要求字符串用引号引起来。

如果您检查浏览器的控制台，您可能会看到类似`Unexpected identifier`or的错误`___ is not defined`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-02-25T13:56:23.810

尝试这个...

如果您已将对象添加到模型中：

```
model.addAttribute("someObject", new Login("uname","pass")) 
```

然后你得到模型对象的属性为

```
var user_name = ${someObject.uname}; // This is assuming that the Login class has getter as getUname();
var user_pass = ${someObject.pass}; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-09-23T09:54:04.573

```
<html>
jsp code ...

<script>

some js code ..
..
var formProperty = <c:out value="${fromBean.property}" />

</script>

..

</html> 
```

这对我有用，其中 formBean 是表单支持对象的名称，属性是表单类的字段

# php - SQL Query join 与另一个表的计数和平均值

> ID：16206758
> 
> 赞同：-3
> 
> 时间：2013-04-25T05:05:51.347
> 
> 标签：php, mysql, sql, codeigniter

实际上，数学似乎并没有加起来。

这是我正在使用的查询和我正在尝试访问的 2 个表（包含所有真实数据）。

SQL 中的此查询将`Steve Smith`获得 27 个 sum 和 27 个`amount`. 它应该是 17。在同一个查询中，它显示`John Smith`有 4 个总和和 2 个计数`amount`。

```
SELECT
user.*,
IFNULL(SUM(collection.amount), 0) AS usertotal,
COUNT(collection.amount) AS userunique
FROM user
LEFT JOIN collection
ON user.id = collection.userid
GROUP BY collection.amount` 
```

表1（命名`user`）：

```
id | firstname | lastname | username | email
1  | Steve     | Smith    | SteveS   | Steve@Smith.com
2  | John      | Smith    | JohnSmith| John@Smith.com 
```

表2（命名`collection`）：

```
id|userid|carid |amount
1   1   74  1
10  2   130 1
11  2   48  1
12  2   414 1
13  2   415 1
14  2   66  1
15  2   404 1
16  2   57  2
17  2   331 1
18  2   264 1
19  2   325 1
20  2   51  2
21  2   185 1
24  1   168 1
25  1   11  1
26  1   315 1
27  1   51  1
28  1   210 1
29  1   433 1
30  1   434 1
31  1   460 1
32  1   75  1
33  1   238 1
34  1   226 1
35  1   396 1
36  1   174 1
37  1   12  1
38  1   328 1
39  1   4   1

id| UN | Amount
1 | 4  | 457
2 | 4  | 28
3 | 2  | 234
4 | 1  | 235
5 | 2  | 1 
```

我需要一个查询来获取用户名的整个列表，以及 user.id 和 collection.UN 之间的内部连接（在数量列上使用 sum 和 count）

我不知道 SQL 查询，一辈子都搞不清楚。帮助？

谢谢，

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-25T05:18:20.437

```
SELECT 
  user.UN as username, 
  IFNULL(SUM(collection.Amount), 0) AS sum,
  COUNT(collection.Amount) AS count
FROM user
LEFT JOIN collection
  ON user.id = collection.UN
GROUP BY user.id 
```

您说要使用`INNER JOIN`，但不会显示那些在集合表中没有记录的用户。因此，我使用`LEFT JOIN`了这样的方式，以便返回整个用户列表，如果他们没有，他们的金额`COUNT`和金额将为 0。`SUM`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T05:20:44.167

用这个：

```
 select u.* , c.total_amount from users as u 
inner join (select un, sum(amount) total_amount 
from collection group by un)  c on u.id = c.un 
```

PHP 查询：

```
 $q = "select u.* , c.total_amount from users as u 
inner join (select un, sum(amount) total_amount 
from collection group by un)  c on u.id = c.un";    
    $result = $this->db->query($q);
    //echo $this->db->last_query(); 
```

# java - Java-Enums-如何使用默认值创建并访问它们

> ID：16206759
> 
> 赞同：0
> 
> 时间：2013-04-25T05:05:51.937
> 
> 标签：java, enums, primitive-types

我有一个 java 枚举，它必须有一些默认值，比如

```
for the 

String some default values
int some degault values

etc 
```

我创建了一个如下的枚举

```
package com.hexgen.tools;

    public enum DefaultParamsValues {
       STRING ("HEXGEN"),
INTEGER(2013),
DATE(new org.joda.time.LocalDate()),
BOOLEAN(true),
BIGINTEGER(BigInteger.valueOf(Long.MAX_VALUE)),
LONG("1898.48");
private  String defaultString;
private  int defaultInteger;
private  LocalDate defaultDate;
private  boolean defaultBoolean;
private  long defaultLong;
private  BigInteger defaultBigInteger;
public DefaultParamsValues(String strValue,int intValue,LocalDate date,boolean booleanValue,long longValue,BigInteger bigintVlaue){
    this.defaultString = strValue;
    this.defaultInteger = intValue;
    this.defaultDate = date;
    this.defaultBoolean = booleanValue;
    this.defaultLong=longValue;
    this.defaultBigInteger = bigintVlaue;
}
    } 
```

但它给出了这么多问题，有人会帮助我创建一个具有基本类型基本值的枚举吗？

编辑：这就是我解决它的方法：

```
package com.test.poc;

import java.math.BigInteger;
import org.joda.time.LocalDate;

public enum DefaultParamValues {
    STRING("HEXGEN"),
    INTEGER(123),
    DATE(new LocalDate()),
    BOOLEAN(true),
    LONGVALUE(123123),
    BIGINTEGER(BigInteger.valueOf(Long.MAX_VALUE));

    private  String defaultString;
    private  int defaultInteger;
    private  LocalDate defaultDate;
    private  boolean defaultBoolean;
    private  long defaultLong;
    private  BigInteger defaultBigInteger;

    private DefaultParamValues(String strDefaultValue) {
        defaultString = strDefaultValue;
    }
    private DefaultParamValues(int intDefaultValue) {
        defaultInteger = intDefaultValue;
    }
    private DefaultParamValues(LocalDate dateDefaultValue) {
        defaultDate = dateDefaultValue;
    }
    private DefaultParamValues(boolean booleanDefaultValue) {
        defaultBoolean = booleanDefaultValue;
    }
    private DefaultParamValues(long longDefaultValue) {
        defaultLong = longDefaultValue;
    }
    private DefaultParamValues(BigInteger bigIntegerDefaultValue) {
        defaultBigInteger = bigIntegerDefaultValue;
    }
    public String getDefaultString() {
        return defaultString;
    }
    public int getDefaultInt() {
        return defaultInteger;
    }
    public LocalDate getDefaultDate() {
        return defaultDate;
    }

    public boolean getDefaultBoolean() {
        return defaultBoolean;
    }
    public long getDefaultLong() {
        return defaultLong;
    }
    public BigInteger getDefaultBigInteger() {
        return defaultBigInteger;
    }

} 
```

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T06:23:47.573

首先，枚举可能不适合您的目的。您应该使用带有常量的最终类。

但是，如果您希望它低效且麻烦，您可以这样做：

```
public enum GenericEnum {
    STRING("HEXGEN"), 
    INTEGER(2013), 
    DATE(new Date()), 
    BOOLEAN(true), 
    BIGINTEGER(BigInteger.valueOf(Long.MAX_VALUE)), 
    LONG("1898.48");

    private String defaultString;
    private int defaultInteger;
    private Date defaultDate;
    private boolean defaultBoolean;
    private long defaultLong;
    private BigInteger defaultBigInteger;

    GenericEnum(Object value) {
        if(String.class.isAssignableFrom(value.getClass())) {
            this.defaultString = (String) value;
        } else if (Integer.class.isAssignableFrom(value.getClass())) {
            this.defaultInteger = (Integer) value;
        }
            [...]
    }
} 
```

或重载构造函数：

```
private GenericEnum(String val) {
    this.defaultString = val;
}

private GenericEnum(int val) {
    this.defaultInteger = val;
}
[...] 
```

# html - 使用css将任何大小的图像居中并调整为div包装器？

> ID：16206760
> 
> 赞同：0
> 
> 时间：2013-04-25T05:05:53.557
> 
> 标签：html, css

假设我有一个持有 img 元素的方形 div。

方形 div 为 40 x 40。图像为 160 x 80。

如果我只是将 div 上的大小设置为 40 x 40，则图像将调整为 40 x 20。我希望将其调整为最短长度（80）的长度，调整大小（80 x 40）然后居中（即在 40x40 div 内，您将有一个调整大小的 img（80x40），其中 x 坐标显示为 20 到 60）

当然，如果图像是 80 x 160，那么新图像将是 40 x 80。以 y = [20, 60] 为中心。

注意：就我而言，我知道我的 div 的尺寸，它是正方形的。我不知道图像的尺寸。如果该解决方案也适用于 div 的任何维度（非正方形和未知），那就太棒了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T05:28:09.387

你可以使用背景技术来显示你想要的图像

```
<div class="cropped img1"></div>
<style>
.img1 {background-image: url('http://megasite.net/yourimage.jpg');}
.cropped {width: 40px;height: 40px;background-position: center; background-size: cover;}
</style> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T13:17:33.017

这可以通过 CSS3 实现`background-size: cover;`

图像被渲染，保持其固有比例，以包含或覆盖背景定位区域的最大尺寸。如果图像没有固有比例，则以背景定位区域的大小进行渲染。

[https://developer.mozilla.org/en-US/docs/CSS/background-size](https://developer.mozilla.org/en-US/docs/CSS/background-size)

# javascript - 在javascript中，如何使用正则表达式匹配字符串中多次出现的子字符串？

> ID：16206762
> 
> 赞同：0
> 
> 时间：2013-04-25T05:06:00.993
> 
> 标签：javascript, regex

我尝试使用`'/bkickstarter/b'`但它无法与这样的文本匹配：`I backed this: http://kickstarter.com`

更新：

```
var regex = new RegExp("/\bkickstarter\b/g");
console.log("zach braff's new movie is now being backed on kickstarter: http://www.kickstarter.com/projects/1869987317/wish-i-was-here-1 … also, a documentary on a swartz:  http://www.kickstarter.com/projects/26788492/aaron-swartz-documentary-the-internets-o".match(regex)); 
```

那打印一个空值。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-25T05:09:29.293

您可能想使用`\b`not `b`。

```
"I backed this: http://kickstarter.com".match(/\bkickstarter\b/); 
```

如果要匹配所有出现的正则表达式，请添加`/g`修饰符。

```
"I backed this: http://kickstarter.com kickstarter".match(/\bkickstarter\b/g); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T16:28:47.137

原因`var regex = new RegExp("/\bkickstarter\b/g");`不起作用是因为`\`在字符串文字语法中作为转义序列的开头具有特殊含义，因此`\`最终被删除。

要`\`在字符串中使用字符，您需要对其进行转义，这意味着它看起来像`\\`，所以您的最终正则表达式

```
var regex = new RegExp("/\\bkickstarter\\b/g"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-25T05:08:50.263

remove`/b /b`它只会搜索单独的单词，在这里你需要任何包含“kickstarter”的字符串。

而是`/kickstarter/i`用于不区分大小写的搜索

# java - java找不到符号错误：初学者

> ID：16206773
> 
> 赞同：0
> 
> 时间：2013-04-25T05:07:55.337
> 
> 标签：java, methods, static, symbols

编译此静态方法时出现无法找到 int 数组变量 coord 的错误。我在方法中声明了它，它是 int[] 类型的，我不知道为什么它不起作用。我有一种感觉，它与静态方法有关，但是将其更改为静态是我发现首先使该方法起作用的唯一方法。

我觉得这对任何人来说都可能真的很简单，尤其是当我在这个主题上所能找到的只是更复杂的编码问题时。

如果这有帮助.. 此方法应该返回移动位置的 (x,y) 坐标。抱歉可能没有正确输入代码。第一次这样做。提前感谢您的帮助

代码：

```
public static int[] getMove(String player)
{
    boolean done = false;
    while(!done)
    {
        Scanner in = new Scanner(System.in);
        System.out.println("Input row for " + player);
        int x = in.nextInt() - 1;
        System.out.println("Input column for " + player);
        int y = in.nextInt() - 1;
        int[] coord = {x,y};
        if(getLoc(coord[0], coord[1]).equals("x") || getLoc(coord[0], coord[1]).equals("o") || coord[0] < 0 || coord[0] > ROWS || coord[1] < 0 || coord[1] > COLUMNS)

        {
            System.out.println("Invalid coordinates... please retry");
        }
        else
        {
            done = true;
        }
    } 
    return coord;   
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T05:10:55.300

您缺少的是变量的*范围*。在父块中声明的变量可以在子块中访问，但反之则不行。

```
public void someMethod()
{
int x=1;

while(x<10)
{
x++; //x is accessible here, as it is defined in parent block.
int j = 0; //This variable is local to while loop and will cause error if used inside method
j++;
}
System.out.println(j);// The outer block does not know about the variable j!!
} 
```

现在在你的情况下，

*   注意你在哪里定义了坐标，以及你在什么地方使用它。
*   试着弄清楚你应该在哪里*定义*coors 变量。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T05:10:15.017

那是因为数组`coord`是`while`循环本地的。因此它在其范围之外是不可见的。将声明移到`coord`外部`while`，它应该可以工作。

```
int[] coord = new int[2];
while(!done){
    ...
    ...
    coord[0] = x;
    coord[1] = y;
    ...
} 
```

# android - 带有错误处理和进度对话框的通用 AsyncTask

> ID：16206775
> 
> 赞同：1
> 
> 时间：2013-04-25T05:08:46.520
> 
> 标签：android, generics, android-asynctask, handlers

请告诉我写这个的最好方法。

我需要一个通用的 AsyncTask 用于 web 服务调用，并处理所有可能的错误。也是用于更新 UI/显示错误消息的回调。

我发现了一些方法：

1.  通过将通用参数添加到异步任务
2.  将 asynctask 设为抽象
3.  用于处理错误给处理程序对象。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T05:32:44.637

This is actually very easy to do with an `AsyncTask`.

`AsyncTask` has 4 functions. 3 of them run on the UI Thread so you can update the UI as much as you like. 1 of the functions runs in the background so you can do things that take as long as is necessary, such as calling your webservice.

You do not need a formal callback function. `AsyncTask.onPostExecute()` handles this for you.

There is a great [example in the Android documentation](http://developer.android.com/reference/android/os/AsyncTask.html) that shows how to download a file exactly as you are trying to do with the webservices connection. You will `extend AsyncTask` and create your own `DownloadFilesTask` just like in the example.

The whole thing is started with a single line of code:

```
new DownloadFilesTask().execute(...) 
```

The four functions are:

*   [onPreExecute()](http://developer.android.com/reference/android/os/AsyncTask.html#onPreExecute%28%29) - Useful for displaying a `ProgressBar` or other UI elements.
*   [doInBackground()](http://developer.android.com/reference/android/os/AsyncTask.html#doInBackground%28Params...%29) - Take as long as you want, but don't update the UI from here. Instead, call `publishProgress()` as often as you like. That will internally call `onProgressUpdate()` where you can incrementally update the UI, or your `ProgressBar`, if you want.
*   [onProgressUpdate()](http://developer.android.com/reference/android/os/AsyncTask.html#onProgressUpdate%28Progress...%29) - Optional show progress updates or increment a `ProgressBar`. This function only gets called in response to calling `publishProgress()` from `doInBackground()`.
*   [onPostExecute()](http://developer.android.com/reference/android/os/AsyncTask.html#onPostExecute%28Result%29) - Done, `dismiss()` your `ProgressBar`, update the UI, process any errors saved in `doInBackground()`, and jump to the next section of your code.

**Error Handling**:

All errors are trapped in `doInBackground()`. You should save an `int errorCode` and/or `String errorMessage` in your `DownloadFilesTask` class, and `return;` from `doInBackground()` when an error occurs. Then, process and report the error in `onPostExecute()`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T22:38:19.563

See [this question](https://stackoverflow.com/questions/7133003/how-to-handle-asynctask-failure) for several answers. They all involve storing any exception thrown by `doInBackground` in a field and checking it in `onPostExecute`. I like [this answer](https://stackoverflow.com/a/7139173/2212420) posted by @dongshengcn, which encapsulates this into a subclass of `AsyncTask`, then you can override `onResult` and/or `onException` as necessary.

# jakarta-ee - 无法创建远程连接

> ID：16206787
> 
> 赞同：0
> 
> 时间：2013-04-25T05:09:52.890
> 
> 标签：jakarta-ee, ejb, ejb-3.0, jboss7.x

再会！

我正在从 glassfish 迁移到 JBoss 7.1.3 。我的 .ear 应用程序无法创建远程连接。我猜我的 EJB 有问题。

下面是我部署的 EJB（来自服务器日志）

```
*10:10:56,226 INFO  [org.jboss.as.ejb3.deployment.processors.EjbJndiBindingsDeploymentUnitProcessor] (MSC service thread 1-2) JNDI bindings for session bean named GGICache in deployment unit subdeployment "GGI-ejb.jar" of deployment "GGI.ear" are as follows:

    java:global/GGI/GGI-ejb/GGICache!ge.nbsm.weGGI.ejb.cache.GGICacheHome
    java:app/GGI-ejb/GGICache!ge.nbsm.weGGI.ejb.cache.GGICacheHome
    java:module/GGICache!ge.nbsm.weGGI.ejb.cache.GGICacheHome
    java:jboss/exported/GGI/GGI-ejb/GGICache!ge.nbsm.weGGI.ejb.cache.GGICacheHome
    java:global/GGI/GGI-ejb/GGICache!ge.nbsm.weGGI.ejb.cache.GGICacheRemote
    java:app/GGI-ejb/GGICache!ge.nbsm.weGGI.ejb.cache.GGICacheRemote
    java:module/GGICache!ge.nbsm.weGGI.ejb.cache.GGICacheRemote
    java:jboss/exported/GGI/GGI-ejb/GGICache!ge.nbsm.weGGI.ejb.cache.GGICacheRemote

10:10:56,268 INFO  [org.jboss.as.ejb3.deployment.processors.EjbJndiBindingsDeploymentUnitProcessor] (MSC service thread 1-2) JNDI bindings for session bean named GGIDBOperation in deployment unit subdeployment "GGI-ejb.jar" of deployment "GGI.ear" are as follows:

    java:global/GGI/GGI-ejb/GGIDBOperation!ge.nbsm.weGGI.ejb.DBOperation.GGIDBOperationHome
    java:app/GGI-ejb/GGIDBOperation!ge.nbsm.weGGI.ejb.DBOperation.GGIDBOperationHome
    java:module/GGIDBOperation!ge.nbsm.weGGI.ejb.DBOperation.GGIDBOperationHome
    java:jboss/exported/GGI/GGI-ejb/GGIDBOperation!ge.nbsm.weGGI.ejb.DBOperation.GGIDBOperationHome
    java:global/GGI/GGI-ejb/GGIDBOperation!ge.nbsm.weGGI.ejb.DBOperation.GGIDBOperationRemote
    java:app/GGI-ejb/GGIDBOperation!ge.nbsm.weGGI.ejb.DBOperation.GGIDBOperationRemote
    java:module/GGIDBOperation!ge.nbsm.weGGI.ejb.DBOperation.GGIDBOperationRemote
    java:jboss/exported/GGI/GGI-ejb/GGIDBOperation!ge.nbsm.weGGI.ejb.DBOperation.GGIDBOperationRemote* 
```

下面是我从 ResoureLocator.java 代码中查找的上下文

```
 *Properties jndiProps = new Properties();
              jndiProps.put(Context.INITIAL_CONTEXT_FACTORY, "org.jboss.naming.remote.client.InitialContextFactory");
            jndiProps.put(Context.SECURITY_PRINCIPAL, "admin");
            jndiProps.put(Context.SECURITY_CREDENTIALS, "adminadmin");
            jndiProps.put(Context.URL_PKG_PREFIXES, "org.jboss.ejb.client.naming");
            jndiProps.put(Context.PROVIDER_URL, "remote://localhost:4447");
      jndiProps.put("jboss.naming.client.ejb.context", true);
    try{
    ctx = new InitialContext(jndiProps);
    String strDSName = "java:jboss/datasources/Functional_GGI_CONNECTION_POOL";
                 ctx = new InitialContext();

                DataSource ds = (DataSource) ctx.lookup(strDSName);
                System.out.println("Context Look Up success>>" + ds.getClass());
                return ds;
            } catch (NamingException namingException) {

                log.error(namingException.getMessage(), namingException);
    }* 
```

下面我粘贴了我的 server.log 和我的应用程序日志供您参考。我收到错误，例如无法创建远程连接。我在使用上述属性加载初始上下文时遇到问题 ...ctx = new InitialContext(jndiProps);

```
10:11:07,998 ERROR [stderr] (MSC service thread 1-2)    at org.jboss.msc.service.ServiceControllerImpl$StartTask.startService(ServiceControllerImpl.java:1811)

10:11:08,004 ERROR [stderr] (MSC service thread 1-2)    at org.jboss.msc.service.ServiceControllerImpl$StartTask.run(ServiceControllerImpl.java:1746)

10:11:08,010 ERROR [stderr] (MSC service thread 1-2)    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1145)

10:11:08,015 ERROR [stderr] (MSC service thread 1-2)    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:615)

10:11:08,020 ERROR [stderr] (MSC service thread 1-2)    at java.lang.Thread.run(Thread.java:722)

10:11:08,066 ERROR [stderr] (MSC service thread 1-2) Caused by: java.lang.RuntimeException: Failed to setup EJB remote context

10:11:08,071 ERROR [stderr] (MSC service thread 1-2)    at org.jboss.naming.remote.client.InitialContextFactory.setupEjbContext(InitialContextFactory.java:468)

10:11:08,077 ERROR [stderr] (MSC service thread 1-2)    at org.jboss.naming.remote.client.InitialContextFactory.getInitialContext(InitialContextFactory.java:145)

10:11:08,086 ERROR [stderr] (MSC service thread 1-2)    ... 17 more

10:11:08,089 ERROR [stderr] (MSC service thread 1-2) Caused by: java.lang.reflect.InvocationTargetException

10:11:08,095 ERROR [stderr] (MSC service thread 1-2)    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)

10:11:08,100 ERROR [stderr] (MSC service thread 1-2)    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)

10:11:08,106 ERROR [stderr] (MSC service thread 1-2)    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)

10:11:08,112 ERROR [stderr] (MSC service thread 1-2)    at java.lang.reflect.Method.invoke(Method.java:601)

10:11:08,118 ERROR [stderr] (MSC service thread 1-2)    at org.jboss.naming.remote.client.InitialContextFactory.setupEjbContext(InitialContextFactory.java:448)

10:11:08,124 ERROR [stderr] (MSC service thread 1-2)    ... 18 more

10:11:08,128 ERROR [stderr] (MSC service thread 1-2) Caused by: java.lang.SecurityException: EJBCLIENT000021: EJB client context selector may not be changed

10:11:08,134 ERROR [stderr] (MSC service thread 1-2)    at org.jboss.ejb.client.EJBClientContext.setSelector(EJBClientContext.java:186)

10:11:08,139 ERROR [stderr] (MSC service thread 1-2)    at org.jboss.naming.remote.client.ejb.RemoteNamingEjbClientContextSelector.setupSelector(RemoteNamingEjbClientContextSelector.java:28)

10:11:08,148 ERROR [stderr] (MSC service thread 1-2)    ... 23 more

10:11:08,191 ERROR [org.apache.catalina.core.ContainerBase.[jboss.web].[default-host].[/GGI]] (MSC service thread 1-2) Exception sending context initialized event to listener instance of class ge.ifm.common.utility.IFMCacheListener: ge.ifm.common.exception.GenericInterfaceException: Throwable-->Occured while loading Interface Configuration information. Exception Message is -->null
    at ge.ifm.common.utility.IFMCacheListener.contextInitialized(IFMCacheListener.java:110) [classes:]
    at org.apache.catalina.core.StandardContext.contextListenerStart(StandardContext.java:3392) [jbossweb-7.0.17.Final-redhat-1.jar:]
    at org.apache.catalina.core.StandardContext.start(StandardContext.java:3850) [jbossweb-7.0.17.Final-redhat-1.jar:]
    at org.jboss.as.web.deployment.WebDeploymentService.start(WebDeploymentService.java:89) [jboss-as-web-7.1.3.Final-redhat-4.jar:7.1.3.Final-redhat-4]
    at org.jboss.msc.service.ServiceControllerImpl$StartTask.startService(ServiceControllerImpl.java:1811)
    at org.jboss.msc.service.ServiceControllerImpl$StartTask.run(ServiceControllerImpl.java:1746)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1145) [rt.jar:1.7.0_17]
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:615) [rt.jar:1.7.0_17]
    at java.lang.Thread.run(Thread.java:722) [rt.jar:1.7.0_17]
Caused by: java.lang.NullPointerException
    at ge.nbsm.weGGI.DAO.GGIDAO.getDBConnection(GGIDAO.java:62) [GGI-ejb.jar:]
    at ge.ifm.dao.GenericInterfaceDAO.initialize(GenericInterfaceDAO.java:33) [classes:]
    at ge.ifm.dao.InterfaceDao.initialize(InterfaceDao.java:239) [classes:]
    at ge.ifm.common.utility.IFMCacheListener.contextInitialized(IFMCacheListener.java:75) [classes:]
    ... 8 more

10:11:08,291 ERROR [org.apache.catalina.core.StandardContext] (MSC service thread 1-2) Error listenerStart
10:11:08,297 ERROR [org.apache.catalina.core.StandardContext] (MSC service thread 1-2) Context [/GGI] startup failed due to previous errors
10:11:08,304 ERROR [stderr] (MSC service thread 1-2) log4j:WARN No appenders could be found for logger (ge.nbsm.weGGI.common.utility.GGILifeCycleListener).

10:11:08,318 ERROR [stderr] (MSC service thread 1-2) log4j:WARN Please initialize the log4j system properly.

10:11:08,324 ERROR [stderr] (MSC service thread 1-2) log4j:WARN See http://logging.apache.org/log4j/1.2/faq.html#noconfig for more info.

10:11:08,331 ERROR [org.jboss.msc.service.fail] (MSC service thread 1-2) MSC000001: Failed to start service jboss.web.deployment.default-host./GGI: org.jboss.msc.service.StartException in service jboss.web.deployment.default-host./GGI: JBAS018040: Failed to start context
    at org.jboss.as.web.deployment.WebDeploymentService.start(WebDeploymentService.java:94)
    at org.jboss.msc.service.ServiceControllerImpl$StartTask.startService(ServiceControllerImpl.java:1811) [jboss-msc-1.0.2.GA-redhat-2.jar:1.0.2.GA-redhat-2]
    at org.jboss.msc.service.ServiceControllerImpl$StartTask.run(ServiceControllerImpl.java:1746) [jboss-msc-1.0.2.GA-redhat-2.jar:1.0.2.GA-redhat-2]
    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1145) [rt.jar:1.7.0_17]
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:615) [rt.jar:1.7.0_17]
    at java.lang.Thread.run(Thread.java:722) [rt.jar:1.7.0_17]

10:11:08,579 INFO  [org.jboss.as.server] (HttpManagementService-threads - 6) JBAS015870: Deploy of deployment "GGI.ear" was rolled back with failure message {"JBAS014671: Failed services" => {"jboss.web.deployment.default-host./GGI" => "org.jboss.msc.service.StartException in service jboss.web.deployment.default-host./GGI: JBAS018040: Failed to start context"},"JBAS014771: Services with missing/unavailable dependencies" => ["jboss.deployment.subunit.\"GGI.ear\".\"GGI-ejb.jar\".jndiDependencyService Missing[JBAS014861: <one or more transitive dependencies>]","jboss.deployment.subunit.\"GGI.ear\".\"GGI-war.war\".jboss.security.jacc Missing[JBAS014861: <one or more transitive dependencies>]","jboss.naming.context.java.comp.GGI.GGI-ejb.GGIDBOperation.env.Functional_GGI_CONNECTION_POOL Missing[jboss.naming.context.java.jboss.resources.Functional_GGI_CONNECTION_POOL]","jboss.naming.context.java.comp.GGI.GGI-ejb.GGICache.env.Functional_GGI_CONNECTION_POOL Missing[jboss.naming.context.java.jboss.resources.Functional_GGI_CONNECTION_POOL]","jboss.deployment.subunit.\"GGI.ear\".\"GGI-ejb.jar\".component.GGICache.START Missing[JBAS014861: <one or more transitive dependencies>]","jboss.deployment.subunit.\"GGI.ear\".\"GGI-ejb.jar\".component.GGIDBOperation.START Missing[JBAS014861: <one or more transitive dependencies>]"]}
10:11:08,581 INFO  [org.jboss.as.osgi] (MSC service thread 1-1) JBAS011908: Unregister module: Module "deployment.GGI.ear.GGI-war.war:main" from Service Module Loader

Below is my application log 

2013-04-25 10:11:02,503 DEBUG ge.nbsm.weGGI.common.utility.GGILifeCycleListener - Path for FunctionalLog4j ---- jar:file:/C:/jboss-eap-6.0/modules/com/company/test/main/test.jar!/FunctionalLog4j.xml
2013-04-25 10:11:02,512 DEBUG ge.nbsm.weGGI.common.utility.GGILifeCycleListener - in log testing propertiesnull
2013-04-25 10:11:02,512 INFO  ge.nbsm.weGGI.common.utility.GGILifeCycleListener - LOG4J Configuration [OK]..
2013-04-25 10:11:02,532 DEBUG ge.nbsm.weGGI.common.utility.StartupCacher - At the Start of loadCache
2013-04-25 10:11:02,544 DEBUG ge.nbsm.weGGI.common.utility.StartupCacher - At the End of loadCache 2
2013-04-25 10:11:02,552 DEBUG ge.nbsm.weGGI.common.utility.StartupCacher - At the End of loadCache 3
2013-04-25 10:11:02,552 DEBUG ge.nbsm.weGGI.Delegate.CacherDelegate - getCacheValues:1
2013-04-25 10:11:02,553 DEBUG ge.nbsm.weGGI.Delegate.CacherDelegate - getGGICacheManagerRemote:1
2013-04-25 10:11:02,560 DEBUG ge.nbsm.weGGI.common.utility.GGIReader - String Value from Properties file:Start of Value||End of Value
2013-04-25 10:11:02,560 DEBUG ge.nbsm.weGGI.common.utility.GGIReader - Numeric Value from Properties file:Start of Value|-1|End of Value
2013-04-25 10:11:02,570 DEBUG ge.nbsm.weGGI.common.utility.GGIReader - Date Value from Properties file:Start of Value|99991231|End of Value
2013-04-25 10:11:02,570 DEBUG ge.nbsm.weGGI.Delegate.CacherDelegate - GGIConstants.STR_GGICACHEHOME >>> ejb:app/GGI/GGI-ejb/GGICache!ge.nbsm.weGGI.ejb.cache.GGICacheHome
2013-04-25 10:11:02,574 DEBUG ge.nbsm.weGGI.Delegate.CacherDelegate - getGGICacheManagerRemote:1a
2013-04-25 10:11:02,574 DEBUG ge.nbsm.weGGI.Delegate.CacherDelegate - getGGICacheManagerRemote:2
2013-04-25 10:11:07,710 INFO  ge.ifm.common.utility.IFMCacheListener - IFM initialize() started
2013-04-25 10:11:08,152 ERROR ge.nbsm.weGGI.common.utility.ResourceLocator - Failed to create remoting connection
javax.naming.NamingException: Failed to create remoting connection [Root exception is java.lang.RuntimeException: Failed to setup EJB remote context]
    at org.jboss.naming.remote.client.ClientUtil.namingException(ClientUtil.java:51)
    at org.jboss.naming.remote.client.InitialContextFactory.getInitialContext(InitialContextFactory.java:151)
    at javax.naming.spi.NamingManager.getInitialContext(NamingManager.java:684)
    at javax.naming.InitialContext.getDefaultInitCtx(InitialContext.java:307)
    at javax.naming.InitialContext.init(InitialContext.java:242)
    at javax.naming.InitialContext.<init>(InitialContext.java:216)
    at ge.nbsm.weGGI.common.utility.ResourceLocator.lookUP(ResourceLocator.java:68)
    at ge.nbsm.weGGI.DAO.GGIDAO.getDBConnection(GGIDAO.java:56)
    at ge.ifm.dao.GenericInterfaceDAO.initialize(GenericInterfaceDAO.java:33)
    at ge.ifm.dao.InterfaceDao.initialize(InterfaceDao.java:239)
    at ge.ifm.common.utility.IFMCacheListener.contextInitialized(IFMCacheListener.java:75)
    at org.apache.catalina.core.StandardContext.contextListenerStart(StandardContext.java:3392)
    at org.apache.catalina.core.StandardContext.start(StandardContext.java:3850)
    at org.jboss.as.web.deployment.WebDeploymentService.start(WebDeploymentService.java:89)
    at org.jboss.msc.service.ServiceControllerImpl$StartTask.startService(ServiceControllerImpl.java:1811)
    at org.jboss.msc.service.ServiceControllerImpl$StartTask.run(ServiceControllerImpl.java:1746)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1145)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:615)
    at java.lang.Thread.run(Thread.java:722)
Caused by: java.lang.RuntimeException: Failed to setup EJB remote context
    at org.jboss.naming.remote.client.InitialContextFactory.setupEjbContext(InitialContextFactory.java:468)
    at org.jboss.naming.remote.client.InitialContextFactory.getInitialContext(InitialContextFactory.java:145)
    ... 17 more
Caused by: java.lang.reflect.InvocationTargetException
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at org.jboss.naming.remote.client.InitialContextFactory.setupEjbContext(InitialContextFactory.java:448)
    ... 18 more
Caused by: java.lang.SecurityException: EJBCLIENT000021: EJB client context selector may not be changed
    at org.jboss.ejb.client.EJBClientContext.setSelector(EJBClientContext.java:186)
    at org.jboss.naming.remote.client.ejb.RemoteNamingEjbClientContextSelector.setupSelector(RemoteNamingEjbClientContextSelector.java:28)
    ... 23 more
2013-04-25 10:11:08,191 ERROR ge.ifm.common.exception.GenericInterfaceException - GenericInterfaceException: Throwable-->Occured while loading Interface Configuration information. Exception Message is -->null
2013-04-25 10:11:08,191 DEBUG ge.ifm.dao.GenericInterfaceDAO - closeConnection method called
2013-04-25 10:11:08,191 DEBUG ge.ifm.dao.GenericInterfaceDAO - closeConnection cConn=null
2013-04-25 10:11:08,191 DEBUG ge.ifm.dao.GenericInterfaceDAO - out of if loop
2013-04-25 10:11:08,303 INFO  ge.ifm.common.utility.IFMCacheListener - Enterted into contextDestroyed() method
2013-04-25 10:11:08,304 DEBUG ge.ifm.common.utility.IFMCacheListener - contextDestroyed ()--> Context Destroyed Method Called Successfully
2013-04-25 10:11:08,304 INFO  ge.ifm.common.utility.IFMCacheListener - Enterted into release() method
2013-04-25 10:11:08,304 DEBUG ge.ifm.common.utility.IFMCacheListener - release()--> Releasing Thread Pool
2013-04-25 10:11:08,304 DEBUG ge.ifm.common.utility.IFMCacheListener - release()--> Closed the Thread Pool [OK]
2013-04-25 10:11:08,304 DEBUG ge.ifm.common.utility.IFMCacheListener - Http Client Connection Pool Releasing
2013-04-25 10:11:08,304 DEBUG ge.ifm.common.utility.IFMCacheListener - Closed the Http Client Connection Pool [OK]
2013-04-25 10:11:08,304 INFO  ge.ifm.common.utility.IFMCacheListener - Exit from release() method
2013-04-25 10:11:08,304 INFO  ge.ifm.common.utility.IFMCacheListener - Exit from contextDestroyed() method 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T12:28:43.340

我已经通过在进行数据源查找时删除初始化上下文的属性来解决这个问题。在进行 EJB 缓存远程查找时添加的属性。由于 JBoss javax.rmi.PortableRemoteObject 中的类转换异常，我在 EJB 会话 bean 和 EJB Remote 中添加了注释，并更改了上面的代码。

非常感谢大家。。

下面是我的数据源查找

```
try {

ctx = new InitialContext();

              String strDSName = "java:jboss/datasources/Functional_GGI_CONNECTION_POOL";
             ctx = new InitialContext();

            DataSource ds = (DataSource) ctx.lookup(strDSName);
             return ds;

}catch (NamingException e){

} 
```

下面是我的 EJB 远程上下文查找

```
 Properties prop =new Properties();
                prop.put("java.naming.factory.url.pkgs", "org.jboss.ejb.client.naming");
               Context ctx = new InitialContext(prop);
                String cacheHome="ejb:GGI/GGI-ejb/GGICacheBean!ge.nbsm.weGGI.ejb.cache.GGICacheRemote";

                    ggiManager = (GGICacheRemote)ctx.lookup( cacheHome); 
```

下面是我的 CacheBean.java（包括注释）

```
@Stateless
@Remote(GGICacheRemote.class)
@TransactionManagement(TransactionManagementType.BEAN)
public class GGICacheBean implements GGICacheRemote, SessionBean { 
```

下面是我的 CacheRemote.java（包括注释）

```
@Remote
public interface GGICacheRemote extends EJBObject {

public GGICacheVO getCacheValues() throws Exception, RemoteException;

} 
```

我已经删除了我的 jboss-ejb3.xml 和 ejb-jar.xml 。

我的应用程序运行良好..

# android - 加密/解密公共/私有android

> ID：16206788
> 
> 赞同：0
> 
> 时间：2013-04-25T05:09:54.997
> 
> 标签：android, encryption, public-key-encryption

如何加密/解密 public/private 。

我假设这意味着密钥是动态的，并且对于字符串来说永远不会相同。

我想知道是否有任何库可以这样做或分步教程让初学者理解和在应用程序中实现。

我想在 http 示例中保护密码：

```
http://www.example.com/username="ENCRYPTED1"+Password="ENCRYPTED2" 
```

加密的 1 和 2 是动态的并且永远不会相同。

通过上述方法，密钥应始终更改，因此即使您在浏览器中键入加密密钥也不应允许，因为密钥已更改。

我希望这是正确的道路。

我看着海绵城堡，我不明白如何实现它。

请帮助我并指导我。

提前致谢。

代码 ：

```
public class CustomizedListView extends Activity {
    // All static variables
    static final String URL = "http://example.com/getmsgs/userno=123";
    // XML node keys
    static final String KEY_SONG = "song"; // parent node
    static final String KEY_ID = "id";
    static final String KEY_TITLE = "title";
    static final String KEY_ARTIST = "artist";
    static final String KEY_DURATION = "duration";
    static final String KEY_THUMB_URL = "thumb_url";

    ListView list;
    LazyAdapter adapter;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        ArrayList<HashMap<String, String>> songsList = new ArrayList<HashMap<String, String>>();

        JSONObject json = JSONfunctions.getJSONfromURL(URL);

        try {
            JSONObject arr2 = json.getJSONObject("feed");
            JSONArray arr = arr2.getJSONArray("entry");

            for (int i = 0; i < arr.length(); i++) {
                JSONObject e1 = arr.getJSONObject(i);

                JSONArray arr3 = e1.getJSONArray("im:image");

                JSONObject arr8 = e1.getJSONObject("im:name");

                JSONObject arr10 = e1.getJSONObject("im:artist");

                    JSONObject e12 = arr3.getJSONObject(0);

            // creating new HashMap
            HashMap<String, String> map = new HashMap<String, String>();

            map.put(KEY_THUMB_URL,  e12.getString("label"));

            map.put(KEY_ARTIST, arr8.getString("label"));
            map.put(KEY_TITLE, arr10.getString("label"));
            // adding HashList to ArrayList
            songsList.add(map);
            }

        } catch (JSONException e) {
            // Log.e("log_tag", "Error parsing data "+e.toString());
            Toast.makeText(getBaseContext(),
                    "Network communication error!", 5).show();
        }

        list=(ListView)findViewById(R.id.list);

        // Getting adapter by passing xml data ArrayList
        adapter=new LazyAdapter(this, songsList);        
        list.setAdapter(adapter);

        // Click event for single list row
        list.setOnItemClickListener(new OnItemClickListener() {

            @SuppressWarnings("unchecked")
            @Override
            public void onItemClick(AdapterView<?> parent, View view,
                    int position, long id) {

                HashMap<String, String> o = (HashMap<String, String>) list.getItemAtPosition(position);
                Toast.makeText(CustomizedListView.this, "ID '" + o.get("KEY_TITLE") + "' was clicked.", Toast.LENGTH_SHORT).show(); 

            }
        });     
    }   
} 
```

PHP代码：

```
<?php

$strno=$_GET['strno'];

if (isset($strno))
{
        $connect=mysql_connect("localhost","test","test") or die ('Connection error!!!');
        mysql_select_db("test") or die ('Database error!!!');

    $query=mysql_query("select sno FROM users  where strno='$strno';");
    while($row = mysql_fetch_assoc($query))

    {
        $jsonoutput='{"json":{
            "msg_sub":"'.$row['msg_sub'].'",
            }}';
    }

}

echo trim($jsonoutput);
mysql_close($connect) or die ('Unable to close connection-error!!!');
}

?> 
```

JSONfunctions.java

```
public class JSONfunctions {

    public static JSONObject getJSONfromURL(String url){
        InputStream is = null;
        String result = "";
        JSONObject jArray = null;

        //http post
        try{
                HttpClient httpclient = new DefaultHttpClient();
                HttpPost httppost = new HttpPost(url);
                HttpResponse response = httpclient.execute(httppost);
                HttpEntity entity = response.getEntity();
                is = entity.getContent();

        }catch(Exception e){
                Log.e("log_tag", "Error in http connection "+e.toString());
        }

      //convert response to string
        try{
            BufferedReader reader = new BufferedReader(new InputStreamReader(is,"iso-8859-1"),8);
            StringBuilder sb = new StringBuilder();
            String line = null;
            while ((line = reader.readLine()) != null) {
                    sb.append(line + "\n");
            }
            is.close();
            result=sb.toString();
    }catch(Exception e){
            Log.w("log_tag", "Error converting result "+e.toString());
    }

    try{

        jArray = new JSONObject(result);            
    }catch(JSONException e){
            Log.w("log_tag", "Error parsing data "+e.toString());
    }

    return jArray;
} 
```

}

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-25T05:25:24.247

> 我希望这是正确的道路。

你偏离了轨道。

客户端可以像往常一样通过 POST 请求发送用户名和密码，而不是创建自己的协议，而是使用 SSL/HTTPS（通过 HTTPS 完成的除外）。

或者，您可以进行“相互身份验证”。这意味着客户端和服务器都使用他们的公钥进行身份验证（使用 HTTPS，只有服务器使用他们的证书/公钥进行身份验证）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T06:13:47.560

不要发明新的安全协议。使用 HTTPS，然后您不需要自己加密密码。使用 HTTP，您加密和交换密钥的任何方式都可能不是很有效，除非您执行与 HTTPS 基本相同的操作。它只会是默默无闻的安全（谷歌）。

**编辑：** 不要将密码作为 GET 参数发送，而是始终作为 POST 数据发送，即使使用 HTTPS 也是如此。即使使用 https 时无法在线捕获 GET 参数，它们也可能被浏览器缓存或转到未加密的服务器日志，有关更多信息，请参见此处：[http ://www.w3schools.com/tags/ref_httpmethods.asp](http://www.w3schools.com/tags/ref_httpmethods.asp)

# php - 如何从查询中获取插入的数据作为成功消息？

> ID：16206790
> 
> 赞同：1
> 
> 时间：2013-04-25T05:10:02.640
> 
> 标签：php, mysql, database, phpmyadmin

我正在为一个项目工作，这个问题遇到了我，因为我不是 php 和 mysql 的大师。这是示例。

桌子

id(AI)-fname-lname

```
<php
include 'db.php';
$query=mysql_query("INSERT INTO table(`fname`, `lname`) VALUES('some', 'one')");
if($query==1)
{
     //some code
} 
```

这工作正常，我可以知道查询是否成功。我想知道的是，如何获取我刚刚插入的行的数据，以便我可以在另一个相关表中使用“id”......希望得到积极的回应......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T05:12:12.807

使用此功能

```
mysql_insert_id() 
```

这将返回您最后插入的具有特定数据库连接的 ID。此外，您不希望插入除 id 之外的数据，因为您在插入行时已经拥有它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T05:14:52.460

您可以使用该 id 获取最近插入记录`mysql_insert_id()` 的 id 您可以使用选择查询获取记录

```
<?php
include 'db.php';
$query=mysql_query("INSERT INTO table(`fname`, `lname`) VALUES('some', 'one')");
$id=mysql_insert_id();

$select_query=mysql_query("SELECT * FROM table where id=".$id."");

?> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-25T05:15:22.763

这将为您提供该行的键 ID

```
$id = mysql_insert_id(); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-25T05:10:55.800

你可以使用这个功能

```
$id = mysql_insert_id(); 
```

这将给出插入数据的 id，您可以使用该 id 以供进一步使用。

# r - R - 可敬的错误

> ID：16206791
> 
> 赞同：0
> 
> 时间：2013-04-25T05:10:09.597
> 
> 标签：r, venn-diagram

尝试使用 Vennerable 制作维恩图时出现以下错误。

```
library(Vennerable)
A <- c("123","234")
B <- c("567","234")
C <- c("987","234")
l1 <- list(aa = A, bb = B, cc = C)
v1 <- Venn(l1)

Error in rep(1, nrow(Indicator)) : invalid 'times' argument 
```

任何帮助将不胜感激。

谢谢，维维克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-29T19:53:42.130

事实证明，这段代码在我的 Mac 上运行良好，但在我的运行 Windows7 的家用电脑上却不行……很奇怪。

# c++ - 应用程序何时绝对需要以管理员身份运行？

> ID：16206793
> 
> 赞同：1
> 
> 时间：2013-04-25T05:10:11.420
> 
> 标签：c++, windows, elevated-privileges

一段时间以来，我一直在尝试与 UAC 很好地合作，我发现了一些事情：

1.  启用 UAC 后，需要以管理员身份运行（例如通过嵌入式清单）的 Startup 文件夹中的程序无法根据[此 Stack Overflow 线程](https://stackoverflow.com/questions/8652246/why-application-that-require-administrative-privileges-cannot-run-automatically)运行。
2.  `HKLM or HKCU\SOFTWARE\Microsoft\Windows\CurrentVersion\Run`在启动时运行程序的另一种方法是在 64 位机器或64 位机器中创建包含该应用程序路径的密钥`HKLM or HKCU\SOFTWARE\Wow6432Node\Microsoft\Windows\CurrentVersion\Run`。
3.  另一种方法是使用任务计划程序设置**以最高权限运行**选项。这是绕过第 1 点所述问题的唯一方法。

来自 Linux 背景，我对所有这些与管理员权限相关的问题一无所知。如果有人可以列出*绝对需要*管理员权限的场景，那将有很大帮助！

我问这个是因为当我开发一些应用程序时，我在实现过程中一直遇到一些问题，主要是因为我的应用程序需要管理员权限，而它不应该。

如果我在设计时知道所有可能需要管理员权限的场景，我可能会为我的所有应用程序设计一个通用服务来处理所有管理员任务（我认为服务是 Windows 的处理方式）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T06:25:53.803

确实没有需要提升的场景或 API 函数调用列表。您最好的选择可能是关注哪些 API 调用需要提升。这样做的原因是，只有在将某些值传递给函数时才可能需要它。例如`CreateFile`，可以在您的主目录中创建一个文件而无需提升，但需要它在 C:\Windows 中创建文件。如果目录是通过用户输入提供的，那么您可以知道是否需要提升的唯一方法是在调用失败时检查错误代码。如果需要提升，该函数会将错误状态设置为`ERROR_ACCESS_DENIED`并返回一个指示失败的值。

# sql - 条件单 SQL 查询插入

> ID：16206795
> 
> 赞同：1
> 
> 时间：2013-04-25T05:10:13.733
> 
> 标签：sql

假设我有一个名为：

```
 EMP(Eid,Ename,ESalary) 
```

现在我必须编写一个将更新的查询：

```
if employee's salary >= 20000 then increment 25% else update 15% salary 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-25T05:12:49.023

```
update EMP
   set ESalary = CASE WHEN salary >= 20000
                      THEN salary * 1.25
                      ELSE salary * 1.15
                      END; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T05:14:39.757

尝试这个：

```
update emp a set esalrary = 
(select (case when esalary >=20000 then esalary+(esalary*25/100) 
else  esalary+(esalary*25/100) end) from emp b where a.eid=b.eid); 
```

# java - 如何根据“\\”或“\”拆分字符串？

> ID：16206798
> 
> 赞同：1
> 
> 时间：2013-04-25T05:10:16.823
> 
> 标签：java, string

我想拆分一个字符串`"ABC\DEF"`？我努力了

```
String str = "ABC\DEF";
String[] values1 = str.split("\\");
String[] values2 = str.split("\"); 
```

但似乎没有一个工作。请帮忙。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T05:17:47.610

String.split() 需要一个正则表达式。您需要转义每个`\`，因为它位于 java 字符串中（顺便说一下，您也应该转义`String str = "ABC\DEF";`），并且您需要为正则表达式转义。最后，您将以这一行结束：

```
String[] values = str.split("\\\\"); 
```

将`"\\\\"`是`\\`字符串，正则表达式将解释为`\`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-25T05:20:20.457

请注意，`String.split`通过正则表达式拆分字符串。

在 RAW 正则表达式中指定为分隔符的一种正确方法^(1是：)`\`

```
\\ 
```

由于`\`是正则表达式中的特殊字符，因此您需要对其进行转义以指定文字`\`.

将正则表达式放入字符串文字中，您需要再次转义，因为`\`在字符串文字中也是转义字符。因此，您最终得到：

```
"\\\\" 
```

所以你的代码应该是：

```
str.split("\\\\") 
```

`\`请注意，这会在字符串中的每个实例上拆分。

### 脚注

¹其他方式（在 RAW 正则表达式中）是：

```
\x5C
\0134
\u005C 
```

在字符串文字中（甚至比四重转义还要糟糕）：

```
"\\x5C"
"\\0134"
"\\u005C" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-25T05:21:49.213

使用它： String str = "ABC\\DEF"; String[] values1 = str.split("\\\\");

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-04-25T05:29:17.637

```
final String HAY = "_0_";
String str = "ABC\\DEF".replace("\\", HAY);
System.out.println(Arrays.asList(str.split(HAY))); 
```

# c# - C#重写虚函数而不必实现另一个类

> ID：16206801
> 
> 赞同：0
> 
> 时间：2013-04-25T05:10:50.847
> 
> 标签：c#, class, overriding, virtual, inheritance

我试图只为单个定义的元素覆盖一个虚函数（不必创建另一个实现它的类，然后添加一个函数来覆盖它..）。

例子：

```
public class MyClass
{
    public virtual bool ChangeStatus(String status)
    {
        return false;
    }
}

void test()
{
    //The following is written as an example of what I am trying to achieve & does not work
    MyClass blah = new MyClass()
    {
        public override bool ChangeStatus(String status)
        {
            return true;
        }
    };
} 
```

知道如何实现这一目标吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T05:14:35.110

“虚拟”和“覆盖”都与继承有关。

1.[可以重新定义虚方法。virtual 关键字指定在派生类中被覆盖的方法。我们可以在不修改程序其余部分的情况下添加派生类型。因此，对象的运行时类型决定了行为。](http://www.dotnetperls.com/virtual)

2.[当要允许派生类覆盖基类的方法时，基类内的方法必须创建为虚方法，派生类内的方法必须使用关键字override创建。](http://www.programcall.com/26/csnet/virtual-methods-in-csnet-with-example.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T05:18:14.697

C# 严格建立在类的概念之上。没有类就不能创建函数/方法。
此外，`virtual/override`意味着继承，因此您必须从此类派生。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-25T05:20:58.693

你不能没有`override`一个函数`inheriting the class`，a 的全部意义`virtual function`在于它可以`overridden`在`child class`.

如果您在同一个类中进行操作，您最终不会为该类编写一个简单的方法/函数吗？

因此，**遵循 OOP 编程概念，它旨在简化和易于编程**。`Instead simply inherit the class and override the function`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-25T05:22:05.580

如果您可以控制`MyClass`，您可以让所需的方法调用一个委托，该委托可以在运行时为每个对象替换...

```
class MyClass
{
    public void Func<SomeParameterType,SomeReturnType> myDelegate {get;set;}
    public SomeReturnType myFunction(SomeParameterType parameter)
    {
        if(myDelegate==null)
            throw new Exception();
        return myDelegate(parameter);
    }
}

...

MyClass obj = new MyClass();
SomeParameterType p = new SomeParameterType();
obj.myDelegate = (x)=>new SomeReturnType(x);
SomeReturnType result = obj.myFunction(p); 
```

# java - 我应该同步我的方法吗？

> ID：16206804
> 
> 赞同：1
> 
> 时间：2013-04-25T05:10:55.873
> 
> 标签：java, multithreading, list, thread-safety

我已经定义了一个 Synchronized ArrayList，它将被多线程访问。

`List<Object> objList = Collections.synchronizedList(new ArrayList<Object>());`

我想为上面的列表定义一些自定义操作，如`add`, `remove`, `edit`, 。`delete`

我的操作需要`synchronized`吗？
由于我已经制作了 List `synchronizedList`，这还不足以确保原子操作吗？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T05:21:29.217

如果您定义自定义操作，这些操作将*不会*从其中继承同步`Collections.synchronizedList()`（当前同步的方法将保持同步）。

可以这样想：如果你有一个线程安全的类，然后你扩展它，线程安全不会也扩展到新类的新方法中。线程安全和同步仅适用于继承的方法，不适用于自定义定义。

因此，是的，如果您希望新方法同步，则​​必须显式声明它们`synchronized`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T07:42:22.207

问的问题没有意义。您问的是向对象添加方法，而不是向类添加方法——您不能在 Java 中这样做。`Collections.synchronizedList`选择 List 的类——它是`java.util.Collections.SynchronizedRandomAccessList`or `...SynchronizedList`。此外，它们中的每一个都是包私有的，因此您无法扩展它们。

但是，假设您确实有一个类似于那些提供的实现：

```
public class SyncedList<E> implements List<E> {
    private final List<E> delegate;

    public SyncedList(List<E> delegate) { this.delegate = delegate; }

    @Override
    public synchronized boolean add(E e) {
        return delegate.add(e);
    }

    @Override
    public synchronized void clear() {
        delegate.clear();
    }

    // ... etc 
```

现在你扩展这个类：

```
public class MySyncedList<E> extends SyncedList<E> {
    ... 
```

您现在的问题是：我们与覆盖的方法有什么关系？答案是……这取决于！

要记住的一般规则是，被覆盖的方法*不会*继承其 super 的`synchronized`修饰符。但你可能不需要它。以下是一些场景：

**场景 1：根本不调用`super`方法**

例子：

```
@Override
public void clear() {
    throw new UnsupportedOperationException();
} 
```

在这种情况下，应该清楚（双关语警告！）您不需要任何同步，因为没有什么要同步的。（简单的例子，但很容易摆脱。）

**场景 2：调用一个`super`方法而不触及其他可变状态**

例子：

```
private final E dontAllow; // assume this is set in the constructor
@Override
public boolean add(E e) {
    if (Objects.equals(e, dontAllow))
        throw new IllegalArgumentException("can't add element: " + e);
    super.add(e);
} 
```

在这种情况下，您实际上不需要 synchronize `add`。调用`super.add(e)`将保留其同步，并且您没有触及任何其他可变状态，因此没有任何额外的同步。

**场景 3：调用一种`super`方法但也触及可变状态**

例子：

```
private E lastAdded = null;

@Override
public synchronized boolean add(E e) {
    boolean result = super.add(e); // do this first in case it throws an exception
    lastAdded = e;
    return result;
}

public synchronized E getLastAdded() {
    return lastAdded;
} 
```

这里我们添加了额外的状态，所以我们必须同步它！请注意，在这种特殊情况下，您也可以设置`lastAdded`volatile 并且不使任一方法同步——但在其他情况下，这可能是不可能的。

**场景4：调用不止一种方法`super`**

例子：

```
public synchronized void add(E e) {
    if (indexOf(e) >= 0)
        return false;
    return super.add(e);
} 
```

假设您关心原子性，那么您确实需要同步。它不是继承自`super.add`. `indexOf`方法 (和) 中的每个调用`super.add`都是同步的，但您需要额外的原子性。

（更准确地说，您需要在监视器上同步时调用这两个方法，这也应该是每个方法使用的监视器。在这种情况下，这两个方法是同步的，因此监视器只是`this`，这是同步方法同步的内容。）

**最后的想法**

即使您不必同步覆盖的方法，如果它读取或写入状态（例如上面的场景 2，如果您采用该`volatile lastAdded`方法，则为 3）可能是一个好主意。所有其他的 mutator/accessor 方法都是同步的，所以如果一个方法不同步，你的 API 会看起来很奇怪。人们会问，“哎，不`add`应该同步吗？” 你必须说服他们不需要这样。更重要的是，您实际上不会获得任何东西，因为该方法最终会在`super`调用时进行同步。

我没有在上面介绍所有可能的情况，但希望这能让你了解事情是如何运作的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-25T08:16:02.153

看看[java.util.concurrent.CopyOnWriteArrayList](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/CopyOnWriteArrayList.html)。在不需要进行大量突变的情况下，它提供了可靠的开箱即用同步。

# linux - Sigalrm (linux 信号)

> ID：16206808
> 
> 赞同：1
> 
> 时间：2013-04-25T05:11:14.240
> 
> 标签：linux, posix, boost-signals2

我是 Linux 信号的新手。如果一个进程初始化了多个定时器，那么一个进程怎么知道哪个`SIGALRM`属于哪个定时器呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T05:27:17.743

这取决于您如何设置`SIGALRM`处理程序。

也可以考虑不使用`alarm`timer_create[甚至](http://man7.org/linux/man-pages/man2/timer_create.2.html)timerfd_create [(2)](http://man7.org/linux/man-pages/man2/timerfd_create.2.html) (with `poll`)。

如果您使用[sigaction(2)](http://man7.org/linux/man-pages/man2/sigaction.2.html)调用，`SA_SIGINFO`您将获得`siginfo_t`间接为您提供计时器信息的 sigaction(2)。

另请阅读[有关 linux 信号](http://www.linuxprogrammingblog.com/all-about-linux-signals)和[高级 Linux 编程的所有内容](http://advancedlinuxprogramming.com/)

# java - 输入完成后如何终止扫描仪？

> ID：16206813
> 
> 赞同：19
> 
> 时间：2013-04-25T05:12:03.870
> 
> 标签：java

```
public static void main(String[] args) {

        Scanner scan = new Scanner(System.in);
        try {
            while (scan.hasNextLine()){

                String line = scan.nextLine().toLowerCase();
                System.out.println(line);   
            }

        } finally {
            scan.close();
        }
    } 
```

只是想知道在完成输入后如何终止程序？由于假设我要继续输入输入，几次“Enter”后扫描仪仍会继续......我试过：

```
if (scan.nextLine() == null) System.exit(0); 
```

和

```
if (scan.nextLine() == "") System.exit(0); 
```

他们没有工作....程序继续并与初衷相悖，

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2013-04-25T05:18:05.820

问题是一个程序（像你的程序）不知道用户已经完成输入，除非用户......不知何故......告诉它。

用户可以通过两种方式执行此操作：

*   输入“文件结束”标记。在（通常）为`CTRL`+的 UNIX 和 Mac OS 上`D`，以及在 Windows `CTRL`+上`Z`。这将导致`hasNextLine()`返回`false`。

*   输入一些被程序识别为意思是“我完成了”的特殊输入。例如，它可能是一个空行，也可能是一些特殊值，例如“exit”。该程序需要专门对此进行测试。

^(（您也可以使用计时器，如果用户在 N 秒或 N 分钟内没有输入任何输入，则*假设*用户已经完成。但这不是一种用户友好的方式，而且在许多情况下会很危险.))

* * *

您当前版本失败的原因是您`==`用于测试空字符串。您应该使用`equals`or`isEmpty`方法。（请参阅[如何在 Java 中比较字符串？](https://stackoverflow.com/questions/513832)）

其他要考虑的事情是区分大小写（例如“exit”与“Exit”）以及前导或尾随空格的影响（例如“exit”与“exit”）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-25T05:17:39.530

字符串比较是使用`.equals()`and not完成的`==`。

所以，试试`scan.nextLine().equals("")`。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-25T05:21:46.007

您将不得不寻找指示输入结束的特定模式，例如“##”

```
// TODO Auto-generated method stub
    Scanner scan = new Scanner(System.in);
    try {
        while (scan.hasNextLine()){

            String line = scan.nextLine().toLowerCase();
            System.out.println(line);
            if (line.equals("##")) {
                System.exit(0);
                scan.close();
            }
        }

    } finally {
        if (scan != null)
        scan.close();
    } 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-25T05:23:49.943

在这种情况下，我建议您使用 do、while 循环而不是 while。

```
 Scanner sc = new Scanner(System.in);
    String input = "";
    do{
        input = sc.nextLine();
        System.out.println(input);
    } while(!input.equals("exit"));
sc.close(); 
```

为了退出程序，你只需要分配一个字符串头，例如exit。如果输入等于退出，则程序将退出。此外，用户可以按 control + c 退出程序。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-25T05:48:28.113

您可以从控制台检查下一行输入，并检查您的终止条目（如果有）。

假设您的终止条目是“退出”，那么您应该尝试以下代码：-

```
Scanner scanner = new Scanner(System.in);
    try {
        while (scanner.hasNextLine()){

            // do  your task here
            if (scanner.nextLine().equals("quit")) {
                scanner.close();
            }
        }

    }catch(Exception e){
       System.out.println("Error ::"+e.getMessage());
       e.printStackTrace();
 }finally {
        if (scanner!= null)
        scanner.close();
    } 
```

试试这个代码。当您想关闭/终止扫描仪时，您应该输入终止行。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-25T05:17:10.730

使用这种方法，您必须显式创建退出命令或退出条件。例如：

```
String str = "";
while(scan.hasNextLine() && !((str = scan.nextLine()).equals("exit")) {
    //Handle string
} 
```

`.equals()`此外，您必须使用not处理字符串等于情况`==`。`==`比较两个字符串的地址，除非它们实际上是同一个对象，否则永远不会为真。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-02-17T17:03:54.387

这就是我将如何做到的。说明了使用常量来限制数组大小和条目数，并且 double 除以 an`int`会`double`产生`double`结果，因此您可以通过仔细声明来避免一些强制转换。同样将 an 分配`int`给声明的东西`double`也意味着您要将其存储为双精度，因此也无需强制转换。

```
import java.util.Scanner;

public class TemperatureStats {

    final static int MAX_DAYS = 31;

    public static void main(String[] args){

        int[] dayTemps = new int[MAX_DAYS];
        double cumulativeTemp = 0.0;
        int minTemp = 1000, maxTemp = -1000;  

        Scanner input = new Scanner(System.in);

        System.out.println("Enter temperatures for up to one month of days (end with CTRL/D:");        
        int entryCount = 0;
        while (input.hasNextInt() && entryCount < MAX_DAYS)
            dayTemps[entryCount++] = input.nextInt();

        /* Find min, max, cumulative total */
        for (int i = 0; i < entryCount; i++) {
            int temp = dayTemps[i];
            if (temp < minTemp)
                minTemp = temp;
            if (temp > maxTemp)
                maxTemp = temp;
            cumulativeTemp += temp;
        }

        System.out.println("Hi temp.   = " + maxTemp);
        System.out.println("Low temp.  = " + minTemp);
        System.out.println("Difference = " + (maxTemp - minTemp));
        System.out.println("Avg temp.  = " + cumulativeTemp / entryCount);
    }
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2020-11-25T01:17:13.383

您可以通过检查长度是否为 来检查用户是否输入了空，此外，您可以通过在**[try-with-resources](https://docs.oracle.com/javase/tutorial/essential/exceptions/tryResourceClose.html)**语句`0`中使用它来隐式关闭扫描仪：

```
import java.util.Scanner;

class Main {
    public static void main(String[] args) {
        System.out.println("Enter input:");
        String line = "";
        try (Scanner scan = new Scanner(System.in)) {
            while (scan.hasNextLine()
                    && (line = scan.nextLine().toLowerCase()).length() != 0) {
                System.out.println(line);
            }
        }
        System.out.println("Goodbye!");
    }
} 
```

**示例用法：**

```
Enter input: 
A
a
B
b
C
c

Goodbye! 
```

# asp.net - 在 ASP.NET 中的 AjaxFileUplaod 中禁用上传按钮

> ID：16206817
> 
> 赞同：0
> 
> 时间：2013-04-25T05:12:22.393
> 
> 标签：asp.net, ajax

我正在使用 AjaxFileUpload 控件。我想在上传文件时禁用上传按钮。我再次选择文件或将文件拖放到 Dropzone，然后显示上传按钮。请告诉我解决此问题的解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T05:32:54.713

You can do that by using a HiddenField variable.One the file is uploaded set the value to true.And in Aspx page have a simple `setInterval(function () { var IsExpand = $('#hdnIsUploaded').val() == "1" ? true : false; $("input[type=file]").attr("disabled", "disabled"); }, 10000);`

or The second one you can call from c#,which is more efficient. In the disable JavaScript function simple disable the control. `ScriptManager.RegisterStartupScript(this, GetType(), "Disable", "Disable();", true);`

# java - 从 Android 的非活动类中的资源中读取文本

> ID：16206819
> 
> 赞同：2
> 
> 时间：2013-04-25T05:12:36.833
> 
> 标签：java, android

我想从 Android 应用程序中的一个原始文本文件中读取一些文本，并在应用程序中显示该文本文件中的一行。小部件。

对于 MainActivity，我编写了一个使用以下代码获取 InputStream 的方法：

```
getBaseContext().getResources().openRawResource(R.raw.tips); 
```

我的问题是如何在 AppwidgetProvider 中获取对 Context 的引用，因为当用户使用小部件而不是应用程序时，不会调用 MainActivity 的 onCreate 方法。本身。上面的代码导致 widgetprovider 类中的编译器错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T05:21:41.697

您可以从 onUpdate 获取它。请检查代码

```
@Override
public void onUpdate(Context context, AppWidgetManager appWidgetManager,
        int[] appWidgetIds) {
    // TODO Auto-generated method stub
    super.onUpdate(context, appWidgetManager, appWidgetIds);
    context.getResources().openRawResource(id);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T05:16:18.360

如果您仅对 Context 有疑问

```
public void onUpdate(Context context, AppWidgetManager appWidgetManager,
      int[] appWidgetIds) {..} 
```

of`AppWidgetProvider`将上下文对象放入 params..

***你能分享你的实现吗？***

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-25T05:18:06.993

最好的方法是将 a 传递给`Context`需要访问应用程序资源的所有类和函数。

做到这一点的第二个最佳方法是将 a 存储`static Context`在您的`Application`类中。这是一个准确描述如何执行此操作的示例：[Static way to get 'Context' on Android?](https://stackoverflow.com/questions/2002288/static-way-to-get-context-on-android)

# c# - 如何将 async/await 与使用基于事件的异步模式的库一起使用？

> ID：16206820
> 
> 赞同：3
> 
> 时间：2013-04-25T05:12:46.713
> 
> 标签：c#, task-parallel-library, .net-4.5, async-await, c#-5.0

我使用一个库，它有一个名为 DoWork(...) 的异步方法，该方法将在操作完成时引发 WorkDone 事件。

我想编写一个调用这个库的方法，但我不想保持相同的模式，而是希望我的方法`async`可以使用`await`.

本质上，我想做的是：

```
public async Task<Result> SomeMethod()
{
    var result = new Task<Result>();

    library.WorkDone += (data) =>
    {
        result.Result = data;
    }
    library.DoWork();

    return await result;
} 
```

（不工作，因为 Result 是只读的）

这可以做到吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-25T06:27:46.273

我将以 ws0205 的回答为基础：

首先，您表明您希望您的方法*“被调用`await`”*。您可以通过返回一个`Task`.

我也认为最好对ws0205的回答做如下调整：

```
public Task<Result> SomeMethod() //no async, since we're not awaiting anything
{
   var result = new TaskCompletionSource<Result>();

   library.WorkDone += (data) =>
                                {
                                    result.TrySetResult(data); //just in case 
                                };
   library.DoWork();

   return result.Task; //no need to await - we're returning a Task - let the caller await (or not)
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-25T05:38:19.767

您可以使用[TaskCompletionSource](http://msdn.microsoft.com/en-us/library/dd449174.aspx)：

```
public async Task<Result> SomeMethod()
{
   var result = new TaskCompletionSource<Result>();

   library.WorkDone += (data) =>
                                {
                                    result.SetResult(data);
                                };
   library.DoWork();

   return await result.Task;
} 
```

# javascript - 显示属性问题

> ID：16206826
> 
> 赞同：-1
> 
> 时间：2013-04-25T05:13:04.613
> 
> 标签：javascript, jquery, html

我在样式属性中将 div 标签的显示设置为无，稍后我将其设置为基于点击功能显示。问题是当我点击点击功能时，它会显示一秒钟，然后它又会关闭。请通过并告诉我哪里出错了。

```
 <?php error_reporting(0); 
 $val1=0;
 $irate=0;
 $node=0;

 ?>
<html>
<head>

<link href="style.css" />
<style type="text/css">
#inputdiv
{
-webkit-box-shadow: 3px 3px 14px 7px #d1dcf7;
box-shadow: 3px 3px 14px 7px #d1dcf7;
}
#master
{
-webkit-box-shadow: 3px 3px 14px 7px #d1dcf7;
box-shadow: 3px 3px 14px 7px #d1dcf7;
}
#node
{
-webkit-box-shadow: 3px 3px 14px 7px #d1dcf7;
box-shadow: 3px 3px 14px 7px #d1dcf7;
}
html
{
overflow:hidden;
}

body
{
height:100%;
width:100%;
overflow:hidden;
background:url(images/bg.png);
}

#logo
{
width:100%;
height:20%;
border:0px solid black;
}

</style>
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>

</head>
<body>
<div id="logo">
<img src="images/white.png" style="width:100px;height:100px;position:relative; left:35em"/>
</div>
<hr style="width:100%; height:1px"></hr>
<form action="byte.php" method="post">
<div id="inputdiv" style="position:absolute; left:29em;top:10em">
<select>
<option value="1">Daily</option>
<option value="2">Yearly</option>
</select>
<table>
<tr><td>Total data</td><td><input type="text" name="tdata"></td></tr>
<tr><td>Growth rate</td><td><input type="text" name="growth"></td></tr>
<tr><td>Duration</td><td><select name="duration">
                            <option  value="1">1 year</option>
                            <option  value="2">2 years</option>
                            <option  value="3">3 years</option>
                            <option  value="4">4 years</option>
                            <option  value="5">5 years</option>
                        </select>
                                   </td></tr>
<tr><td>Ingestion data</td><td><?php $total=$_POST['tdata'];
                                     $growth=$_POST['growth'];
                                     $duration=$_POST['duration'];
                                     $irate=($total)+($growth*$duration);
                                     echo $irate;
                                     ?>
                                                      </td></tr>
<tr><td>Raw consumption:</td><td><?php echo $irate*3; ?></td></tr>
<tr><td>Node raw storage:</td><td>24TB</td></tr>
<tr><td>MapReduce temporary space reserve</td><td>25%</td></tr>
<tr><td>Node-usable raw storage</td><td>18TB</td></tr>
<tr><td>1year(flat growth)</td><td><?php $val1=$_POST['irate'];$node=(round(($irate*3)/24)); echo (round(($irate*3)/24))." nodes";?></td></tr>
</table>
    <div id="master" style="width:300px;position:absolute; left:15em;top:25em;display:none">
   <table border="1" width="100%">
    <tr><td>CPU</td><td width="100%"> 2*6 Core 2.9 Ghz/15 MB cache</td></tr>
    <tr><td>Memory</td><td width="100%"> 64GB DDR3-1600 ECC</td></tr>
    <tr><td>Disk Controller</td><td width="100%"> SAS 6Gb/s</td></tr>
    <tr><td>Disks</td><td width="100%"> 12*2/3 TB LFF SATA II 7200 RPM</td></tr>
    <tr><td>Network Controller</td><td> 2*1Gb Ethernet</td></tr>
    </table>
    </div>
    <div id="node" style="width:300px;position:absolute; left:35em;top:25em;display:none">
    <table border="1" width="100%">
    <tr><td>CPU</td><td width="100%"> 2*6 Core 2.9 Ghz/15 MB cache</td></tr>
    <tr><td>Memory</td><td width="100%"> 64GB DDR3-1600 ECC</td></tr>
    <tr><td>Disk Controller</td><td width="100%"> SAS 6Gb/s</td></tr>
    <tr><td>Disks</td><td width="100%"> 12*2/3 TB LFF SATA II 7200 RPM</td></tr>
    <tr><td>Network Controller</td><td> 2*1Gb Ethernet</td></tr>
    </table>
    </div>
<input type="submit" onclick="hideshow()" value="submit">
</div>

</form>
<br>

</body>
<script>
function check(){
var node=<?php echo $node; ?>;
console.log(node);
//document.getElementbyId("master").style.display="";
setTimeout(check,1000);

}
check();

 function hideshow()
 {
 //if(document.getElementById("master").style.display='none')
 //{
  //$('#master').show();
//}
$("#master").css("display", "block");
  var node=<?php echo $node; ?>;
  if(node >20)
  {
  $('#node').show();
  }

 }

</script>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T05:20:00.960

好吧，我的直觉在向我尖叫。

**第一点：**

我假设您在某处有一个`hideshow()`直接调用的 onclick 处理程序？即使没有，也没关系，关键是您已将其放在`submit`按钮上。

我的猜测是您正在单击提交按钮，您的 div 出现，然后页面刷新并且您的元素似乎再次消失了。

在您的事件函数中，假设现在是这样`hideshow()`，将事件信息作为参数传递，并且`preventDefault`. 这将阻止`submit`按钮执行其默认行为（提交表单）。

```
function hideshow(e)
{
    e.preventDefault();

    ///other stuff

} 
```

**第二点：**

如果你有一个名为“hideshow()”的函数，也就是说，它*隐藏和显示*一个元素（同时查看你的注释代码作为更多证据），我假设你会想要使用 jQuery `toggle()`。`toggle`将隐藏可见的内容 ( `display:none`)，或显示不可见的内容 ( `display:block`)。

所以，改变：

```
$("#master").css("display", "block"); 
```

至：

```
$("#master").toggle(); 
```

jQuery 切换：[http ://api.jquery.com/toggle/](http://api.jquery.com/toggle/)

**第三点：**

我做了很多预感挖掘、灵魂搜索和侦探工作来提供这个答案。如果这是正确的，那完全取决于运气和精心制作的假设。我相信你可以在你的问题中做其他事情，让我们在未来的问题中更容易一些。

# php - WordPress 元框

> ID：16206834
> 
> 赞同：0
> 
> 时间：2013-04-25T05:14:01.873
> 
> 标签：php, wordpress, meta

我希望你们中的一个可以帮助清理一下这段代码。我正在做的工作正常，但我确信有更有效的方法。我正在 Wordpress 中创建一个主题，在自定义帖子类型中我正在创建一些元选项。我正在使用 an`<ul>`来显示作者可以包含的选项列表。现在我使用这种格式显示选项列表：

```
<ul>
    <?php if(isset($meta['tour_detail1'][0])) { 
        echo "<li>{$meta['tour_detail1'][0]}</li>";
    } ?>
    <?php if(isset($meta['tour_detail2'][0])) { 
        echo "<li>{$meta['tour_detail2'][0]}</li>";
    } ?>
    <?php if(isset($meta['tour_detail3'][0])) { 
        echo "<li>{$meta['tour_detail3'][0]}</li>";
    } ?>
</ul> 
```

在这个例子中，我只使用了 3 个选项，但在我目前使用的主题中，我使用了 5 个。我还是 php 的新手，但我猜 foreach 循环在这里很适合？我将每个选项保存为它自己的变量，但我觉得我可以将它保存到一个数组中？我浏览了互联网，但找不到太多关于我要寻找的东西。如果这个问题似乎无处不在，我深表歉意，但我不确定如何措辞。

# javascript - 在 AngularJS 中调用变量函数

> ID：16206840
> 
> 赞同：0
> 
> 时间：2013-04-25T05:14:17.343
> 
> 标签：javascript, jquery, angularjs

在我的`app.js`我定义了这样的函数：

```
var func1 = function(v1,v2,v3) {
  .
  .
}

var func2 = function(v1,v2,v3) {
  .
  .
} 
```

在我的`controller.js`：

```
var action = "";

if(..) { action = 'func1';}
else {action = 'func2'}

action(a1,a2,a3); 
```

但是，我收到一个错误，说动作不是函数。我怎样才能像这样访问`func1`和 func2``？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-25T05:16:20.837

尝试删除引号，例如，更改：

```
if(..) { action = 'func1';}
else {action = 'func2'} 
```

到

```
if(..) { action = func1;}
else {action = func2;} 
```

补充：当您为 . 添加引号时，您正在为您的操作变量分配字符串`func1`，您可以检查它：

```
var func1 = function(v1,v2,v3) {
  alert("first");
};
var test_this = func1;
console.log( typeof test_this); //gives you function 
```

然而

```
var test_this = 'func1'; //with quotes added
console.log( typeof test_this); //gives you string 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T05:16:59.097

您正在尝试从字符串访问该函数。我不是专家，但你可以试试

```
if (..) {
    func1(a1, a2, a3);
} else {
    func2(a1, a2, a3);
} 
```

# sql - 在PostgreSQL中你如何连接两个表选择单独的信息

> ID：16206841
> 
> 赞同：2
> 
> 时间：2013-04-25T05:14:19.233
> 
> 标签：sql, postgresql, join

连接有问题。

我有一张桌子叫`subjects`

```
subno   subname
30006   Math
31445   Science
31567   Business 
```

我还有一张叫`enrollment`

```
subno sno   
30009 980008
4134  988880 
```

ETC..

如何列出学生 9800007 的科目编号和科目名称？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-25T05:24:14.623

If you want to return zero rows for students without an enrolment, use a `LEFT [OUTER] JOIN`, eg:

```
SELECT e.sno, s.subno, s.subname
FROM enrollment e LEFT OUTER JOIN subjects s ON s.subno = e.subno
WHERE e.sno=988880; 
```

To return no rows for students without enrolments, use an `INNER JOIN`:

```
SELECT e.sno, s.subno, s.subname
FROM enrollment e INNER JOIN subjects s ON s.subno = e.subno
WHERE e.sno=988880; 
```

Note that join order is important for outer joins (`RIGHT [OUTER] JOIN` and `LEFT [OUTER] JOIN` - the `OUTER` keyword is optional) but not for `INNER JOIN`. For that reason, @swetha's answer has a problem: the join order is reversed if you're looking for information about a student.

See [this SQLFiddle](http://sqlfiddle.com/#!12/dcd01/2)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T05:17:35.857

尝试这个

```
 select * 
 from subjects s 
   left join enrollment e on s.subno = e.subno  
 where sno=9800007 
```

# haskell - Haskell - 也许算术

> ID：16206852
> 
> 赞同：4
> 
> 时间：2013-04-25T05:15:31.093
> 
> 标签：haskell, functional-programming, case-statement, maybe

我被要求实现一个使用以下配置文件的功能：

```
maybe_divide :: Maybe Integer -> Maybe Integer -> Maybe Integer 
```

并以下列方式响应：

```
> maybe_divide (Just 5) (Just 2) 
Just 2
> maybe_divide (Just (-5)) (Just 2) 
Just (-3)
> maybe_divide (Just (-5)) (Just 0) 
Nothing
> maybe_divide Nothing (Just 1) 
Nothing
> maybe_divide (Just 1) Nothing
Nothing 
```

我已经写了以下内容，但它不会编译。你们有什么建议吗？

```
maybe_divide :: Maybe Integer -> Maybe Integer -> Maybe Integer
maybe_divide x y = case x of
    Just x' -> case y of 
        Just y'
            | y' == 0 -> Nothing  
            | otherwise -> x' `div` y'
    Nothing -> Nothing 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-25T05:42:15.670

除了输出类型之外，我想指出一些您可能更喜欢编写此类代码的替代样式：

首先，您可以`case`通过将它们放在一个元组中来处理多个表达式：

```
case (x,y) of
    (_      , Just 0) -> Nothing
    (Just x', Just y') -> Just (x' `div` y')
    _ -> Nothing 
```

有几种不同的方法可以使用守卫甚至函数来编写它`Control.Monad.guard`。

```
case (x,y) of
  (Just x', Just y') -> (x' `div` y') <$ guard (y' /= 0)
  _ -> Nothing 
```

第二种方法将从一个函数开始：

```
safeDiv :: Integer -> Integer -> Maybe Integer
safeDiv x 0 = Nothing
safeDiv x y = Just (x `div` y) 
```

现在您有了`safeDiv`，您可以将其提升为 Maybe 包装的参数。它非常接近`Applicative`样式代码，除了输出中的额外层`Maybe`。幸运的是嵌套的单子（例如`Maybe (Maybe t)`）很容易崩溃：

```
maybe_divide x y = join $ safeDiv <$> x <*> y 
```

甚至

```
maybe_divide = (join .) . liftM2 safeDiv 
```

如果你精通无点。

就个人而言，我会使用两个元组大小写变体之一。但是已经有一个类似的函数是相当普遍的`safeDiv`，在这种情况下，第二种形式可能很有用。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-04-25T05:24:29.323

You should post the error you are getting, but

```
x' `div` y' 
```

has type `Integer` and not `Maybe Integer`. Perhaps you need to wrap this in a `Just`.

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-04-25T05:24:20.603

You need to wrap the successful result in `Just` here:

```
... | otherwise -> Just (x' `div` y') 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-04-25T13:44:23.400

我认为这样做的一个好方法是将 Monad 实例用于`Maybe`：

```
maybe_divide x y = do
   a <- x
   b <- y
   if b == 0 
     then fail "Division by zero" 
     else return (a/b) 
```

这摆脱了大多数繁琐的`Nothing`s 检查，并开始检查除以零的主要业务。

在 Maybe monad 中，`fail "error message"`实际上结果是`Nothing`; 错误消息被丢弃，所以我不必说`"Division by zero"`，`""`也会这样做。

在 Maybe monad 中，`return`意思是“包裹在 Just 中”。

* * *

如果你不需要做任何错误检查，你可以使用应用实例：

```
import Control.Applicative -- at the top of your code

maybe_multiply x y = (*) <$> x <*> y 
```

我认为这在美学上是令人愉悦的。

这是因为对于匹配 Monad 的 Applicative 实例，`f <$> x <*> y <*> z`相当于

```
do 
  a <- x
  b <- y
  c <- z
  return $ f a b c 
```

# php - 为什么我们不在 php 中使用 exec() 做点什么？

> ID：16206856
> 
> 赞同：0
> 
> 时间：2013-04-25T05:15:56.233
> 
> 标签：php, exec

众所周知，php有一些函数，如exec()、system()等。

我用它来打开一些程序，比如openvpn。

我也可以`du -skh`通过替换一些递归函数来获取所有目录的大小。

但是， exec() 在大多数情况下是默认禁用的。

所以我想知道为什么？

因为什么安全问题或其他原因？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T05:21:33.857

通常，这些功能在共享主机环境中被禁用，在这种环境中，向用户授予 shell 访问权限可能会导致安全问题。您不希望其他人共享您的服务器能够弄乱您的文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T05:18:01.257

PHP 有很多功能，如果使用不当，可以用来破解您的服务器。您可以使用 disable_functions 指令在 php.ini 中设置函数列表。该指令允许您禁用`security reasons`. 它采用逗号分隔的函数名称列表。disable_functions 不受安全模式的影响。该指令必须在 php.ini 中设置 例如，这是列表

```
exec,passthru,shell_exec,system,proc_open,popen,curl_exec,curl_multi_exec,
parse_ini_file,show_source 
```

# c# - c# 类型对象到类型参数

> ID：16206865
> 
> 赞同：0
> 
> 时间：2013-04-25T05:16:53.910
> 
> 标签：c#, types

如何使用 Type 对象作为 Type 参数？

例如：

```
byte[] Data;
Type objectType;
public T MyFunction<T>()
{
     return OtherClass.Deserialize <objectType> (Data);
} 
```

换句话说，如何在 Type 参数中使用 Type 对象`<typehere>`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T05:47:41.550

您的通用方法需要在*编译时*已知的*类型标识符*。同时，您正在尝试将此类类型的*实例传递给您的方法，但直到**runtime*才知道此类实例。

 ***改用反射：

```
var method = typeof (OtherClass).GetMethods()
                                .Single(x => "Deserialize".Equals(x.Name) 
                                              && x.IsGenericMethodDefinition);
method = method.MakeGenericMethod(new[] { objectType });
method.Invoke(null, new object[] { Data }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T05:36:07.290

您应该编写 MyFunction 方法，例如：

```
public T MyFunction<T>(byte[] data)
{
     return OtherClass.Deserialize<T>(data);
} 
```

客户端代码如下所示：

```
byte[] Data = new byte[];
Type objectType;
objectType = MyFunction<Type>(Data); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-25T05:21:54.563

像这样（递归，为简洁起见）：

```
Type myType;
public void MyFunction<T>(T instance) {
  MyFunction<Type>(myType);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-25T05:21:57.953

这`myType`是一个`Type`对象。所以你应该打电话`MyFunction<Type>( myType);`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-25T05:51:54.937

泛型实际上是为使用在调用端编译时已知的类型而设计的。（当然，就调用者而言，类型参数本身可以是类型参数。）

否则，你会被泛型困住——你会得到`MethodInfo`关联的 with `OtherClass.Deserialize`，调用[`MakeGenericMethod`](http://msdn.microsoft.com/en-GB/library/system.reflection.methodinfo.makegenericmethod.aspx)using`objectType`作为参数，然后调用结果方法。

```
var method = typeof(OtherClass).GetMethod("Deserialize");
var genericMethod = method.MakeGenericMethod(objectType);
object result = genericMethod.Invoke(null, Data); 
```

请注意，这不会返回`T`。`MyFunction`如果您实际上不打算使用类型参数，则不清楚为什么您的方法是通用的。***

# c# - 水晶报表中报表标题的条件重复

> ID：16206871
> 
> 赞同：1
> 
> 时间：2013-04-25T05:17:37.443
> 
> 标签：c#, visual-studio-2010, crystal-reports, crystal-reports-2008, crystal-reports-2010

我有一个水晶报告，我试图在多列中显示数据。

为此，我使用多列方法完成了**格式化**

我的报告结构如下

**第 1 页**

```
Val1  Val2      Val1  Val2      Val1  Val2 
 A1     A2       D1    D2        G1    G2
 B1     B2       E1    E2        H1    H2
 C1     C2       F1    F2        I1    I2 
```

在**第 2 页**

```
Val1  Val2      Val1  Val2      Val1  Val2 
 J1     J2       
 K1     K2       
 L1     L2 
```

我手动添加了标题，即（Val1，Val2）

我的问题是当下面没有显示数据时如何避免列 Val1 和 Val2 （如**page2**）

我正在使用 VS 2010 和 CR

谢谢大家

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-03T13:06:36.987

虽然之前有人问过这个问题，但是不久的将来有人可能也会有这个疑问：当我们通过右键单击来选择“格式化对象”时，在文本对象上有一个抑制选项，针对该选项，有一个符号来指定公式，其中您可以指定隐藏和显示的条件等。

```
if(condition...) then true 
else false 
```

# java - 找出字符串中两个特定单词之间的距离

> ID：16206882
> 
> 赞同：-8
> 
> 时间：2013-04-25T05:18:16.423
> 
> 标签：java

我想编写一个 Java 程序来确定字符串中两个给定单词之间有多少个单词（距离）。

例如在字符串“这台相机的图像质量很棒”中。“质量”和“伟大”之间的距离是一。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T05:22:07.393

1.  也许从 String.split(...) 开始来获取所有单词的数组。
2.  然后您可以在数组中搜索这两个单词。一个你知道两个词的索引你就可以确定距离。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T05:27:44.367

只需一个指针，就可以优化代码：

```
public static void main(String[] args) {
    String str = "The picture quality is great of this camera";
    StringTokenizer st = new StringTokenizer(str);
    int numberOfWords = 0;
    boolean start = false;
    while(st.hasMoreTokens()){
        String token = st.nextToken();
        if(token.equals("quality")){
            start = true;
            continue;
        }
        if(start) {
            if(token.equals("great")){
                start = false;
            }
            else {
                numberOfWords++;
            }
        }

    }
    System.out.println(numberOfWords);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-25T08:08:00.880

这是我的解决方案：

```
 public static void main(String[] args) {

        String input = "The picture quality is great of this camera";

        // happy flows
        System.out.println(findDistance(input, "quality", "great"));
        System.out.println(findDistance(input, "picture", "of"));

        // words in reversed order
        System.out.println(findDistance(input, "camera", "great"));

        // non occurring words
        try {
            System.out.println(findDistance(input, "picture", "camcorder"));
        }
        catch(IllegalArgumentException e) {
            System.out.println("Expected exception caught, message was: " + e.getMessage());
        }
    }

    private static int findDistance(String input, String word1, String word2) {
        // check input
        if (input == null) {
            throw new IllegalArgumentException("Input cannot be null");
        }
        if (word1 == null || word2 == null) {
            throw new IllegalArgumentException("Two words should be provided");
        }

        // determine boundaries
        int pos1 = input.indexOf(word1);
        int pos2 = input.indexOf(word2);

        // check boundaries
        if (pos1 < 0 || pos2 < 0) {
            throw new IllegalArgumentException("Both words should occur in the input");
        }

        // swap boundaries if necessary to allow words in reversed order
        if (pos1 > pos2) {
            int tmp = pos1;
            pos1 = pos2;
            pos2 = tmp;
        }

        // obtain the range between the boundaries, including the first word
        String range = input.substring(pos1, pos2);

        // split the range on whitespace
        // minus one to not count the first word
        return range.split("\\s").length - 1;
    } 
```

祝你有美好的一天（画质很棒）！

# mysql - 匹配两个表中的数据并返回匹配的结果

> ID：16206884
> 
> 赞同：1
> 
> 时间：2013-04-25T05:18:25.370
> 
> 标签：mysql, select, join, where

2013 年 4 月 25 日上午 6:25 更新：我正在使用 MyISAM

我进行了很多搜索，但不确定最好的方法。我有两个表在不同的列中有匹配的值，需要返回所有适用于 where 子句的表。

表 1 名称`agent` 相关列名称`agent_name`和`team`

表 2 名称`poll_data` 相关的列名称`agent`和`duid`

`team`所以我想计算我从每个团队获得多少投票结果，但我需要`agent`通过`poll_data`匹配`agent`. `agent_name`到`poll_data`. `name`所以我只能返回那个团队的数据。如何匹配记录，然后在单个查询中搜索它们。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T05:50:33.517

试试这个 ...

```
$query1="SELECT COUNT(*) FROM poll_data JOIN agent ON (poll_data.agent = agent.agent_name) GROUP BY agent.team"; 
```

您应该使用外键规范化数据库。

# android - 处理菜单项单击时的触摸事件

> ID：16206889
> 
> 赞同：1
> 
> 时间：2013-04-25T05:19:33.533
> 
> 标签：android, android-layout, android-widget

我想在单击菜单中的菜单项、单击微调器中的微调器文本以及选择日期或单击日期控件中的确定按钮时处理触摸事件。单击上述这些项目时不会触发 OnUserInteraction() 方法。

**注意：**为了澄清，我*知道***onClick 事件**。但就像**onUserInteraction()**一样，每当用户触摸屏幕时，我都会收到通知并做一些事情。但是，当用户触摸额外的**菜单项**（作为下拉菜单项）、**微调器下拉菜单**和/或**对话框中的按钮单击时，****不会调用此事件**。

 ******那么有什么方法可以得到同样的通知。我知道我们有一些事件（我可以说当离开一段时间并且用户触摸上述任何项目时，因为屏幕亮度会增加）。

谁能告诉我，是否有任何其他触摸事件可用于处理此问题？

谢谢明杜斯******

# ruby - 安装 linecache19 时出错

> ID：16206890
> 
> 赞同：2
> 
> 时间：2013-04-25T05:19:34.907
> 
> 标签：ruby, gem, rvm, linecache

我一直在努力奔跑`bundle install`。以下是我输入的一系列命令和错误消息的相关片段。

```
bundle update 
```

安装 linecache (0.46) 时出错，Bundler 无法继续。在捆绑之前
确保成功。`gem install linecache -v '0.46'`

```
gem install linecache -v '0.46' 
```

还不能处理 1.9.x

```
gem install linecache19 
```

检查 vm_core.h... 否

最后：

```
gem install linecache19 -- --with-ruby-include=/opt/t/rvm/src/ruby-1.9.3-p194

ERROR:  Error installing linecache19:
    ERROR: Failed to build gem native extension.

    /opt/t/rvm/rubies/ruby-2.0.0-p0/bin/ruby extconf.rb --with-ruby-include=/opt/t/rvm/src/ruby-1.9.3-p194
checking for vm_core.h... yes
checking for version.h... yes
creating Makefile

make
compiling trace_nums.c
In file included from trace_nums.c:21:
/opt/t/rvm/src/ruby-1.9.3-p194/vm_core.h:311:5: error: unknown type name 'rb_event_hook_t'; did you mean 'rb_event_flag_t'?
    rb_event_hook_t *event_hooks;
    ^~~~~~~~~~~~~~~
    rb_event_flag_t
/opt/t/rvm/rubies/ruby-2.0.0-p0/include/ruby-2.0.0/ruby/ruby.h:1602:23: note: 'rb_event_flag_t' declared here
typedef unsigned long rb_event_flag_t;
                      ^
In file included from trace_nums.c:21:
/opt/t/rvm/src/ruby-1.9.3-p194/vm_core.h:477:5: error: unknown type name 'rb_event_hook_t'; did you mean 'rb_event_flag_t'?
    rb_event_hook_t *event_hooks;
    ^~~~~~~~~~~~~~~
    rb_event_flag_t
/opt/t/rvm/rubies/ruby-2.0.0-p0/include/ruby-2.0.0/ruby/ruby.h:1602:23: note: 'rb_event_flag_t' declared here
typedef unsigned long rb_event_flag_t;
                      ^
trace_nums.c:61:25: warning: implicit conversion loses integer precision: 'unsigned long' to 'int' [-Wshorten-64-to-32]
    len = strlen(token) - 1;
        ~ ~~~~~~~~~~~~~~^~~
1 warning and 2 errors generated.
make: *** [trace_nums.o] Error 1

Gem files will remain installed in /opt/t/rvm/gems/ruby-2.0.0-p0/gems/linecache19-0.5.12 for inspection.
Results logged to /opt/t/rvm/gems/ruby-2.0.0-p0/gems/linecache19-0.5.12/ext/trace_nums/gem_make.out 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-25T05:40:49.643

强制 Gemfile 使用这些版本

```
gem 'linecache19', '0.5.13', :path => "~/.rvm/gems/ruby-1.9.3-p0/gems/linecache19-0.5.13/" 
```

进而`bundle install`

# ios - 在 AVplayer 准备播放音乐时添加活动指示器

> ID：16206893
> 
> 赞同：6
> 
> 时间：2013-04-25T05:19:58.813
> 
> 标签：ios, audio-streaming, avplayer

我为收音机开发了一个应用程序，它正在工作。

我想放置一个活动指示器视图，以便当您触摸播放时它会启动活动指示器视图，而当音频开始时，活动指示器会停止。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-25T05:46:55.190

这会将活动视图添加到视图的中心。**将此代码添加到您处理播放按钮**的“IBAction”中。

 **```
UIActivityIndicatorView *activityView=[[UIActivityIndicatorView alloc] initWithActivityIndicatorStyle:UIActivityIndicatorViewStyleWhiteLarge];

    activityView.center=self.view.center;

    [activityView startAnimating];

    [self.view addSubview:activityView];
    [self.view userInteractionEnabled:NO];   //to avoid touch events when activity is on 
```

并停止使用活动指示器

```
[activityView stopAnimating];    
[activityView removeFromSuperview];
[self.view userInteractionEnabled:YES]; 
```

这是来自[这个关于 AV Foundation 的链接](http://developer.apple.com/library/ios/#documentation/AudioVideo/Conceptual/AVFoundationPG/Articles/02_Playback.html)。[这个答案](https://stackoverflow.com/a/5403162/1383704)- >

使用 KVO，可以通知播放器状态的变化：

```
player = [AVPlayer playerWithURL:fileURL];
[player addObserver:self forKeyPath:@"status" options:0 context:nil]; 
```

在**PLAY 按钮的**事件中添加代码以启动`UIActivityIndicator`

当状态改变时会调用这个方法：

```
- (void)observeValueForKeyPath:(NSString *)keyPath ofObject:(id)object
                        change:(NSDictionary *)change context:(void *)context {
    if (object == player && [keyPath isEqualToString:@"status"]) {
        if (player.status == AVPlayerStatusReadyToPlay) {
            //DISABLE THE UIACTIVITY INDICATOR HERE
        } else if (player.status == AVPlayerStatusFailed) {
            // something went wrong. player.error should contain some information
        }
    }
} 
```**

# node.js - '#' 在 Mocha 中是否有特殊含义？

> ID：16206894
> 
> 赞同：7
> 
> 时间：2013-04-25T05:20:01.017
> 
> 标签：node.js, mocha.js

```
describe('#indexOf()'....
it('#doSth()'); 
```

'#' 在 Mocha 中是否有特殊含义？做什么`describe`和`it`实际做什么？抱歉没有找到`describe`和的文件`it`

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-25T05:28:34.903

`describe`并`it`遵循一种称为 的模式`BDD`，意思是“行为驱动开发”。它只是定义了一个接口，使您对编写测试的方式有所不同，至少应该如此。嵌套`describe`还可以对测试进行功能分组，生成的报告给人一种“可读”的感觉。

引用[Mocha 文档](http://visionmedia.github.io/mocha/#getting-started)中的示例：

```
describe('Array', function(){
    describe('#indexOf()', function(){
        it('should return -1 when the value is not present', function(){
            assert.equal(-1, [1,2,3].indexOf(5));
            assert.equal(-1, [1,2,3].indexOf(0));
        })
    })
}) 
```

上面写着：

> 当值不存在时，Array#indexOf() 应该返回 -1

前两个描述只是设置（描述/分组）范围，并且`it`是实际运行的测试。`#`没有特别的意义。在这种情况下，它只是使输出文本/报告看起来更像 API 文档。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2014-02-08T15:18:04.457

'#' 没有特殊含义。在某个类的方法前加上 # 前缀是一种通用标准。例如`Array#indexOf()`。

`describe()`我对and有完全相同的问题`it()`，文档没有解释太多。

因此，我写了[一篇关于 mocha 指南](http://samwize.com/2014/02/08/a-guide-to-mochas-describe-it-and-setup-hooks/)的博文。简而言之：

*   `describe()`仅用于分组，您可以嵌套尽可能深。也称为测试套件。

*   `it()`是一个测试用例

# shell - while循环中sed表达式中的变量引用

> ID：16206898
> 
> 赞同：0
> 
> 时间：2013-04-25T05:20:12.663
> 
> 标签：shell, unix, scripting, ksh

我一直在研究一个 KornShell (ksh) 脚本，我对 sed 表达式的错误感到震惊。我有一个名为 abc 的文件，其中包含 100 个条目，我想将 abc 文件每一行中的每个第 8 个参数分配给一个变量。

我用过这样的东西。

```
#!/bin/ksh
typeset -i x=1
while read line ; do
    var1=$(sed -n '$xp' abc.txt | awk '{print $8}')
    print $var1
    x="$x+1"
done < abc.txt
exit 
```

我想将变量 x 引用为行号，但在引用 x 变量时出现 sed 表达式错误。请帮帮我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T05:33:05.013

你的报价是错误的。单引号中的任何内容都是逐字字符串；如果你想要变量插值，你需要使用双引号（或者，在非常特殊的情况下，根本不用引号）。

您也可以将所有内容重构为 Awk。微不足道，

```
var1=$(awk -v n="$x" 'NR==n{ print $8 }' abc.txt) 
```

然而，主循环再次读取整个文件只是为了从中取出一行是非常低效的。也许你想要类似的东西

```
awk '{ print NR, $8 }' abc.txt |
while read x var1; do
    print "$var1"
    # presumably do something with $x too?
done 
```

# cocoa-touch - 如何使用 RestKit 序列化多态对多核心数据关系？

> ID：16206905
> 
> 赞同：0
> 
> 时间：2013-04-25T05:20:42.107
> 
> 标签：cocoa-touch, cocoa, serialization, restkit, polymorphic-associations

我需要序列化一个 Core Data 类 ( )，它与抽象实体 ( )`Questionnaire`具有一对多关系 ( )。`questions``Question`

`Question`是许多具体子类 ( `BooleanQuestion`, `ClosedQuestion`...) 的父实体，每个子类都有一个`RKManagedObjectMapping`.

如何设置问卷映射来序列化这种多态关系？

如果它不是多态的，我会这样做：

```
[questionnaireMapping mapRelationShip:@"questions" withMapping:[questionMapping inverseMapping]]; 
```

但我不能这样做：问题不会属于任何单一类别，因此没有单一的映射可以通过。

此外，问题是抽象的，甚至没有映射（尽管我可以定义一个）。

我如何使用 RestKit 0.10.3 版来处理这个问题？

请注意，我非常接近发布我的产品，我真的不愿意在我的产品周期后期迁移到 RestKit 0.20。

我想我可以将所有具体的`Question`子类聚合成`Question`，使其具体和单态（和整体）。那将是丑陋的（尽管我相信这正是 Core Data 在幕后对 SQLite 所做的）。

还有更优雅的吗？

谢谢

京东

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T07:48:34.627

无论如何升级到 0.20 也无济于事，因为我不相信这种情况也包括在内。

我建议您`KVC`在层次结构中的每个类上实现一个方法（或仅使用），该方法返回键和值的字典。这可以使用`KVC` `-dictionaryWithValuesForKeys:`. 键列表应该是所有类的所有键的并集。现在您可以构建一个可以映射的字典数组。您还需要实施`KVC` `-valueForUndefinedKey:`以防止在此过程中出现异常。

现在，在您的`Questionnaire`类上，您可以实现一个方法来循环`questions`关系内容并构建字典列表。假设该方法被调用`encodedQuestions`，您的映射将类似于：

```
[questionnaireMapping mapRelationShip:@"encodedQuestions" withMapping:questionDictMapping]; 
```

我实际上并没有尝试过这样做，所以有一个关于 RestKit 在 Core Data 对象上使用的反射以及它对你的关系映射有多高兴的问题。

# php - 从电子邮件地址获取大学

> ID：16206906
> 
> 赞同：0
> 
> 时间：2013-04-25T05:20:43.107
> 
> 标签：php, web-services, web-applications

基本上，我想要完成的是试图说出一个人的电子邮件地址`JoeRandom@harvard.edu`并尝试从中获取他们去的学校（在这种情况下，哈佛大学将被退回）。我想知道某处是否有某种数据库可用于检查域。基本上只是交叉检查域以查看它属于哪个学校。

最坏的情况是，我可以检查我的数据库中具有该域的其他用户以及他们去哪所学校，但这需要第一个注册该域的用户进入他们的大学。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T05:33:58.600

如果您愿意，可以尝试将数据从[http://www.topuniversities.com/](http://www.topuniversities.com/)之类的网站中取出。它包含世界上所有大学的所有联系信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T05:51:34.223

干得好。一切正常，准备出发。验证您的电子邮件。

```
<?php

$email = 'someone@harvard.edu';
$domain = substr( $email, strpos( $email, '@' )+1, strlen( $email ) );
$school = substr ( $domain, 0, strpos( $domain, '.' ) );

echo '<p>' . $domain . ': <b>' . ucwords( $school ) . '</b></p>';

preg_match_all( '/\((.*)\)/', strip_tags( file_get_contents( 'http://doors.stanford.edu/universities.html' ) ), $unilist );
$unilist = $unilist[1];

if ( in_array( $domain, $unilist ) ) {

    echo '<p>This is a verified domain!</p>';

}

?> 
```

[http://jordan.rave5.com/email.php](http://jordan.rave5.com/email.php)

# facebook-graph-api - 响应与挑战不匹配，预期值 = '727874710'，收到 ='727874710'

> ID：16206911
> 
> 赞同：0
> 
> 时间：2013-04-25T05:20:59.310
> 
> 标签：facebook-graph-api, real-time-updates

我尝试为实时更新 facebook api fanpage 添加订阅。我收到以下错误：

```
Response does not match challenge, expected value = '727874710', received='727874710' 
```

我不明白它有什么问题。任何人都可以建议我？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T05:52:40.447

您在响应开始时发送了两个（！）[UTF-8 字节顺序标记](http://en.wikipedia.org/wiki/Byte_order_mark#UTF-8)。（十六进制`EF BB BF`）

Facebook 至少将第二个 BOM 视为垃圾。（可能两者兼有，因为您的标头未将 UTF-8 指定为字符集）

删除 BOM，以便您仅将集线器挑战发回，并且一切正常。

# wordpress - 强制发布 ID 为 slug

> ID：16206913
> 
> 赞同：0
> 
> 时间：2013-04-25T05:21:18.960
> 
> 标签：wordpress, slug

我正在使用**一个高度自定义的主题，该主题需要自定义永久链接采用**这种格式：

```
 /%category/%postname%/ 
```

但是，我希望我的永久链接在这个

```
 /%category/%post_id%/ 
```

有没有办法在不更改永久链接设置中的任何内容的情况下强制将 %post_id% 设置为 slug？

** 为了进一步解释这一点，我的客户希望将帖子的标题保留在管理员中，但他希望它仅在管理员中可见。所以我需要的是保留帖子的标题并强制 post_id 成为 slug

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T05:26:56.880

转到仪表板->设置->固定链接

在自定义结构中使用`/%post_id%/`

并保存

# javascript - 如何将主干初始数据加载到另一个js文件

> ID：16206925
> 
> 赞同：0
> 
> 时间：2013-04-25T05:22:09.360
> 
> 标签：javascript, django, backbone.js, external

这是我的 django 渲染测试页面

```
<!doctype html>
<html lang="en">
<head>
</head>
<body>
<div id="todo">
</div>
<script type="text/template" id="item-template">
<div>
  <input id="todo_complete" type="checkbox" <%= completed ? 'checked="checked"' : '' %>>
  <%- title %>
</div>
</script>
<script src="jquery.js"></script>
<script src="underscore.js"></script>
<script src="backbone.js"></script>

<script src="app.js"></script>
    //the app.js is my backbone app
<script >
    var foo_models = new fooCollection({{django_rendered_json_vaiable}})
    //this is how I get backbone collection initial data
</script>

</body>
</html> 
```

上面的代码是我到目前为止得到的，我将主干引导模型作为 foo_models，但是**在我的 app.js 文件中无法访问这个变量**，然后我发现[了这个问题](https://stackoverflow.com/questions/9916073/how-to-load-bootstrapped-models-in-backbone-js-while-using-amd-require-js)，它使用 AMD 方法，但我的应用程序相当小，我只需要在另一个js文件中获取初始数据，所以我不想添加require.js，我不想让这个foo_models变量成为全局变量。</p>

那我该怎么做呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T16:24:00.643

*** EDITED ***

Just change these lines:

```
<script src="app.js"></script>
    //the app.js is my backbone app
<script >
    var foo_models = new fooCollection({{django_rendered_json_vaiable}})
    //this is how I get backbone collection initial data
</script> 
```

to:

```
<script >
    var raw_foo_models = {{django_rendered_json_vaiable}};
</script>
<script src="app.js"></script> 
```

Then, add this line:

```
var foo_models = new fooCollection(raw_foo_models); 
```

somewhere in your app (after `fooCollection` has been defined).

# joomla - 如何更改 Joomla 中错误的布局？

> ID：16206932
> 
> 赞同：1
> 
> 时间：2013-04-25T05:23:02.020
> 
> 标签：joomla, joomla2.5, joomla3.0, joomla3.1

我在这样的控制器中抛出异常

```
 throw new Exception("Could not save user. Error: " . $user->getError()); 
```

但是显示消息的 html 的布局与我的网站布局无关。所以我需要动手改变那个布局的html。 ![在此处输入图像描述](https://i.stack.imgur.com/eIX1j.png)

如何？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-25T16:21:00.293

如果您需要告诉用户某些事情，您确实应该捕获异常，然后使用 setMessage 将其转换为消息，否则记录并继续。

另请注意，不推荐使用 getError 和 setError 。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-25T11:14:11.070

阅读：[http ://docs.joomla.org/Custom_error_pages](http://docs.joomla.org/Custom_error_pages)

这是：将 error.php 放入 /templates/your_template/error.php 并根据您的意愿设置样式。

# java - Java 中的 Stack Overflow 与 Collections-Java 中的 Stack 实现

> ID：16206934
> 
> 赞同：0
> 
> 时间：2013-04-25T05:23:03.257
> 
> 标签：java, algorithm, collections

我有一个与 Java 中的 Collections 框架中的 Stack 实现有关的问题。

1.  我可以从实现中看到 Stack 的大小可以增长。这是否意味着 a`StackOverflowError`永远不会发生并且最终 Stack 达到一个大小并`OutOfMemoryError`发生 an？
2.  通过谷歌搜索，我发现`Vector`该类已被弃用，因为它同步了 Jon Skeet 在此处指出的每个操作：[Java Vector 是否已弃用？](https://stackoverflow.com/questions/1386275/why-is-java-vector-class-considered-obsolete-or-deprecated)

那么，在此之后是否有任何现实生活场景中我会使用这个 Java 类？我不想在每个操作上同步，而是想在一堆操作上同步。有人可以给出一个真实的生活情况/例子。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-25T05:38:14.937

首先，你不应该使用`java.util.Stack`，就像你不应该使用一样- 它们都是遗留的集合类，`Vector`被Java 1.2 版本取代。请注意，它的 API 文档说：`Deque``ArrayList``Stack`

> Deque 接口及其实现提供了一组更完整和一致的 LIFO 堆栈操作，应优先使用此类。

请注意，`StackOverflowError`扩展`Error`，而不是`Exception`或`RuntimeException`。仅当 JVM 中存在一些内部错误时才会引发错误——它们通常不会由 Java 类引发。

`StackOverflowError`仅在方法调用堆栈溢出时抛出；它与 没有任何关系`java.util.Stack`。

正如您在以下 API 文档中看到的`StackOverflowError`：

> 当由于应用程序递归太深而发生堆栈溢出时引发。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-25T05:30:49.290

堆栈，即数据结构，经过`java.util.Stack`，可以增长。但是，Java 中的方法调用堆栈不能。因此它可能会溢出，调用`StackOverflowError`. 这主要发生在处理递归时，但如果您不太小心，可能会发生在其他地方。

这里`java.util.Stack`和 java 方法调用栈有一个重要的区别。一个拥有一组泛型，另一个是 JVM 固有的。当方法退出以返回前一个方法时使用后者。

我从来没有听说过有人无意中溢出了 JVM 的堆栈，除非他们正在处理递归。

不要使用`Vector`. 那里有更好的课程。您也可以只使用 an`ArrayList`并[保持其访问同步](https://stackoverflow.com/questions/3814325/how-to-create-synchronized-arraylist)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-25T06:09:23.603

`StackOverflowError`无关`java.util.Stack`。`java.util.Stack`只要有空闲内存或被`OutOfMemoryError`抛出，就会增长。

在新应用程序中，无需使用`Vector`或`Stack`。使用`ArrayList`或`ArrayDeque`。您很少需要 提供的线程安全`Vector`，如果需要，请使用`Collections.synchronizedList`or `LinkedBlockingDeque`。但是，从 HotSpot JVM 1.6 开始，这不再是问题，请参见此处的示例：http: [//www.ibm.com/developerworks/java/library/j-jtp10185/](http://www.ibm.com/developerworks/java/library/j-jtp10185/)

# android - Adding infoWindow on top of marker Google Map

> ID：16206936
> 
> 赞同：0
> 
> 时间：2013-04-25T05:23:26.413
> 
> 标签：android, android-mapview

I want to add an info window on top of Each marker set when user tap on a marker. Here is my code. The marker is fine i need only the infowindow appears on top of it. how can i achieve this, here is my code

```
public class MainActivity extends MapActivity {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        MapView mapView = (MapView) findViewById(R.id.mapview);
        mapView.setBuiltInZoomControls(true);
        mapView.setSatellite(true);

        Drawable makerDefault = this.getResources().getDrawable(R.drawable.marker_default);
        MyItemizedOverlay itemizedOverlay = new MyItemizedOverlay(makerDefault);

        Drawable windmill = getResources().getDrawable(R.drawable.windmill);
        Drawable bigBen = getResources().getDrawable(R.drawable.big_ben);
        Drawable eiffelTower = getResources().getDrawable(R.drawable.eiffel_tower);

        itemizedOverlay.addOverlayItem(52372991, 4892655, "Amsterdam", windmill);
        itemizedOverlay.addOverlayItem(51501851, -140623, "London", bigBen);
        itemizedOverlay.addOverlayItem(48857522, 2294496, "Paris", eiffelTower);

        mapView.getOverlays().add(itemizedOverlay);

        MapController mc = mapView.getController();
        mc.setCenter(new GeoPoint(51035349, 2370987)); // Dunkerque, Belgium
        mc.zoomToSpan(itemizedOverlay.getLatSpanE6(), itemizedOverlay.getLonSpanE6());

    }

    @Override
    protected boolean isRouteDisplayed() {
        return false;
    }

    private class MyItemizedOverlay extends ItemizedOverlay<OverlayItem> {

        private List<OverlayItem> mOverlays = new ArrayList<OverlayItem>();

        public MyItemizedOverlay(Drawable defaultMarker) {
            super(boundCenterBottom(defaultMarker));
        }

        public void addOverlayItem(int lat, int lon, String title, Drawable altMarker) {
            GeoPoint point = new GeoPoint(lat, lon);
            OverlayItem overlayItem = new OverlayItem(point, title, null);
            addOverlayItem(overlayItem, altMarker);
        }

        public void addOverlayItem(OverlayItem overlayItem) {
            mOverlays.add(overlayItem);
            populate();
        }

        public void addOverlayItem(OverlayItem overlayItem, Drawable altMarker) {
            overlayItem.setMarker(boundCenterBottom(altMarker));
            addOverlayItem(overlayItem);
        }

        @Override
        protected OverlayItem createItem(int i) {
            return mOverlays.get(i);
        }

        @Override
        public int size() {
            return mOverlays.size();
        }

        @Override
        protected boolean onTap(int index) {
            Toast.makeText(MainActivity.this, getItem(index).getTitle(), Toast.LENGTH_LONG).show();
            return true;
        }

    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T05:28:12.320

**SitesOverlay.class**

```
private class SitesOverlay extends ItemizedOverlay<CustomItem> {
            private List<CustomItem> items;
            private View view = null;

            public SitesOverlay() {
                super(null);
                items = new ArrayList<CustomItem>();
                items.add(new CustomItem(pt, busName, "Bendigo", marker));
                boundCenter(marker);
                populate();
            }

            @Override
            protected CustomItem createItem(int i) {
                return (items.get(i));
            }

            @Override
            public void draw(Canvas canvas, MapView mapView, boolean shadow) {
                if (!shadow) {
                    super.draw(canvas, mapView, false);
                }

            }

            @Override
            public int size() {
                return (items.size());
            }

            public void refresh() {
                populate();
            }

            public void clear() {
                items.clear();
                resetLastFocuesIndex();
            }

            public void resetLastFocuesIndex() {
                setLastFocusedIndex(-1);
            }

            @Override
            protected boolean onTap(final int index) {
                if (view != null) {
                    view.setVisibility(View.GONE);
                    getMapView().removeView(view);
                    getMapView().invalidate();
                    view = null;
                }
                view = getLayoutInflater().inflate(R.layout.balloon_overlay, null);
                LinearLayout layout = (LinearLayout) view
                        .findViewById(R.id.balloon_main_layout);
                layout.setLayoutParams(new LayoutParams(LayoutParams.WRAP_CONTENT,
                        LayoutParams.WRAP_CONTENT));
                view.setLayoutParams(new LayoutParams(LayoutParams.WRAP_CONTENT,
                        LayoutParams.WRAP_CONTENT));
                view.setBackgroundResource(R.drawable.balloon_overlay_bg_selector);
                ImageView image = (ImageView) view
                        .findViewById(R.id.balloon_disclosure);
                TextView text = (TextView) view
                        .findViewById(R.id.balloon_item_title);
                text.setText(items.get(index).getTitle());

                Projection projection = getMapView().getProjection();
                Point point = new Point();
                projection.toPixels(items.get(index).getPoint(), point);

                int x = (int) (view.getWidth() / 2f);
                int y = -marker.getIntrinsicHeight() - 3;

                MapView.LayoutParams lp = new MapView.LayoutParams(
                        ViewGroup.LayoutParams.WRAP_CONTENT,
                        ViewGroup.LayoutParams.WRAP_CONTENT, items.get(index)
                                .getPoint(), x, y + 50,
                        MapView.LayoutParams.BOTTOM_CENTER);
                getMapView().removeView(view);
                getMapView().invalidate();
                getMapView().addView(view, lp);
                getMapView().invalidate();

                view.setOnClickListener(new OnClickListener() {
                    @Override
                    public void onClick(View view) {
                        if (!items.isEmpty()) {
                            if (view != null) {
                                view.setVisibility(View.GONE);
                                getMapView().invalidate();
    //                          Intent intent=new Intent(MapLocationActivity.this,);

                            }
                        }
                        getMapView().invalidate();
                    }
                });
                return true;
            }
        }

        class CustomItem extends OverlayItem {
            Drawable marker = null;

            CustomItem(GeoPoint pt, String name, String snippet, Drawable marker) {
                super(pt, name, snippet);
                this.marker = marker;
            }

            @Override
            public Drawable getMarker(int stateBitset) {
                Drawable result = marker;
                setState(result, stateBitset);
                return (result);
            }

        } 
```

设置叠加 mapview.getOverlays().add(new SitesOverlay());

如果有多个标记，那么

```
for (int i = 0; i < arrayList.size(); i++) {
                    slat = Double.parseDouble(arrayList.get(i).getLat());
                    vlong = Double.parseDouble(arrayList.get(i).getvLong());
                    pt = new GeoPoint((int) (slat * 1E6), (int) (vlong * 1E6));
                    Log.e("lat long", "--- "+slat);
                    MapviewActivity.this.mc.animateTo(pt);
                    items.add(new CustomItem(pt, arrayList.get(i).getBuissnessName(), "Bendigo", marker));
                    boundCenter(marker);
                } 
```

# javascript - zRSSFeed adjusting JS output

> ID：16206941
> 
> 赞同：0
> 
> 时间：2013-04-25T05:24:02.240
> 
> 标签：javascript, jquery, rss

I'm using zRSSFeed to display a feed with images and it works great, only I'm having some trouble amending the order of the HTML that is output. I want the image to come first. The HTML output is:

```
<h4>
    <a title="View this feed at" href="http://someurl.com/image.jpg" target="_self">This is an image</a>
</h4>
<div class="date">04/16/2013 01:49:15</div>
<p class="image">
    <img src="http://someurl.com/image.jpg">
</p> 
```

I located the JavaScript which is outputting this and have tried playing around with the order, but things break quite easily.

```
e.linkredirect && (k = encodeURIComponent(k));
j[d].html = '<' + e.titletag + '><a href="' + e.linkredirect + k + '" title="View this feed at ' + b.title + '">' + g.title + '</a></' + e.titletag + '>';
e.date && a && (j[d].html += '<div class="date">' + a + '</div>');
e.content && (g = e.snippet && '' != g.contentSnippet ? g.contentSnippet : g.content, e.linkcontent && (g = '<a href="' + e.linkredirect + k + '" title="View this feed at ' + b.title + '">' + g + '</a>'), j[d].html += '<p class="image">' + g + '</p>'); 
```

I could effectively put the image at the beginning of the j[d].html in it's first instance and use the e.linkredirect to get the src, however if I reuse this as a feed without images, this will not work properly. The image is added in the paragraph with the class "image". Any suggestions on how I work this?

# ios - 如何在 Google Drive 中获取 My Drive 的子文件夹

> ID：16206942
> 
> 赞同：3
> 
> 时间：2013-04-25T05:24:05.163
> 
> 标签：ios, objective-c, cocoa-touch, google-drive-api, google-api-objc-client

使用以下方法，我能够获取子文件夹，但此代码从根目录检索所有文件夹。例如，如果垃圾箱中有一个文件夹，它也会检索该文件夹以及“我的驱动器”中的文件夹。

我的要求是，如果我的驱动器中没有该文件夹，那么首先我应该创建一个然后插入文件。我的问题是，当我检查文件夹名称时，由于文件夹存在于垃圾箱中但不在我的云端硬盘中，因此我在文件夹存在时收到响应。

这是我检索文件夹的方法。

如果有人有任何想法，请告诉我。

```
-(void)getFileListFromSpecifiedParentFolder {
    GTLQueryDrive *query2 = [GTLQueryDrive queryForFilesList];
//    GTLQueryDrive *query2 = [GTLQueryDrive queryForChildrenListWithFolderId:@"My Drive"];

    query2.q = @"";
    //or i also use this code

    query2.q = @"mimeType = 'application/vnd.google-apps.folder'";

    // queryTicket can be used to track the status of the request.
    [self.driveService executeQuery:query2
                  completionHandler:^(GTLServiceTicket *ticket,
                                      GTLDriveChildList *children, NSError *error) {
                      NSLog(@"\nGoogle Drive: file count in the folder: %d", children.items.count);
                      //incase there is no files under this folder then we can avoid the fetching process
                      if (!children.items.count) {
                          return ;
                      }

                      if (error == nil) {
                          for (GTLDriveChildReference *child in children) {

                              GTLQuery *query = [GTLQueryDrive queryForFilesGetWithFileId:child.identifier];

                              // queryTicket can be used to track the status of the request.
                              [self.driveService executeQuery:query
                                            completionHandler:^(GTLServiceTicket *ticket,
                                                                GTLDriveFile *file,
                                                                NSError *error) {

                                                NSLog(@"\nfile name = %@ \n file kind %@ \n file identifier %@", file.title,file.kind,file.identifier);
                                            }];
                          }
                      }
                      else
                          [self createFolderForGoogleDriveWithName:@"Music"];
                  }];
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-30T09:13:27.227

您可以使用以下查询过滤掉垃圾目录：`application/vnd.google-apps.folder' and trashed = false`

# text - How to manipulate text with awk?

> ID：16206950
> 
> 赞同：0
> 
> 时间：2013-04-25T05:24:43.903
> 
> 标签：text, awk, grep, text-manipulation

How would I be able to manipulate the output text of grep.

Right now I am using the command:

```
grep -i "<url>" $file  >> ./txtFiles/$file.txt 
```

This would output something like this:

```
<url>http://www.simplyrecipes.com/recipes/chicken_curry_salad/</url> 
```

and then the next text will go to the next line.

How would I be able to get rid of the `<url>` and `</url>` and stop it from going to the next line at the end.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T05:49:21.180

```
sed '/<\/*url>/!d;s///g' 
```

*   `<\/*url>`匹配开始和结束标签
*   删除没有这个的行
*   然后删除此模式的所有案例

以您的示例为例，它可能看起来像这样

```
sed '/<\/*url>/!d;s///g' $file >> ./txtFiles/$file.txt 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T07:30:39.027

单个命令：

```
sed -in '/<url>/ { s|<url>\(.*\)</url>|\1| ; p ; }' INPUT > OUTPUT 
```

或者使用 awk：

```
awk -F "</?url>" '/<url>/ { print $2 }' INPUT > OUTPUT 
```

*注意*`<url>...</url>`：如果单行上出现多个模式，两者都可能给您无效的输出。如果包含任何管道 ( ) 字符，`sed`则版本可能会失败。`<url>...</url>``|`

# php - How to access plugin from other plugins?

> ID：16206951
> 
> 赞同：0
> 
> 时间：2013-04-25T05:24:50.840
> 
> 标签：php, oop, plugins

this question is strongly related to yesterdays one.

What I want to achieve: One perfectly object-oriented plugin-system in php where I can access the plugins this way:

```
$plugins->testplugin->dosomethingcool(); 
```

What I've got: With some help, I managed to solve first basic problems. The first problem, I thought about was, that with this structure, a non existant plugin would blow the whole system with a fatal error. So I have to handle these errors. So actually, I have this class:

```
<?php

    class pluginmanager {

        // Simplyfied everything here... 
        // Basically this class catches the fatal error for calling an object, that has not been defined

        public function __get($name) {
           if (!isset($this->$name)) {
               try{
                   throw new Exception(...);
               }
               catch(Exception $e){
                   // Do something with the exception
               }

               // Make sure to handle a "Call to member function a non-object"-error.
               // The object beneath will use __call() for the error catch.
               $this->$name= new DummyPlugin();
           }
           return $this->$name;
        }
    }

?> 
```

Until now, that will work and allow me to have the object-based plugin-manager. I now realized, that for instance the possible plugin "blog" will have to use the other plugin "database-layer". Are there ways, to make this possible?

I already thought of:

1.  make the plugin-object globally available. Two concerns - 1) bad practice (not for no reasons...) and 2) not really safe and performance-oriented.
2.  make the plugin call a sub-plugin. This really is performance kill - but could it work?
3.  hooking-system or else: not sweet enough... ;-)

Couldn't I make a dependency-check after all the plugins are loaded and give each plugin a reference of all the plugins it relys on? Would this reference be a complete copy or would it stay a reference in the sense of the word?

Thanks for your thoughts!

# c++ - Luabridge：返回 C++ 生命周期托管对象

> ID：16206952
> 
> 赞同：1
> 
> 时间：2013-04-25T05:24:51.513
> 
> 标签：c++, binding, lua, luabridge

此剪辑适用于基本类型：

```
int CreateBasicObject(lua_State *L)
{
    int ret0;

    lua_pushinteger(L, ret0);

    return 1;
} 
```

在 lua 中它看起来像这样：

```
local NewObject=CreateBasicObject() 
```

我将如何**返回类而不是 ints**？

```
push(L,&MyObject);
return 1; 
```

似乎无法正常工作，lua 部分如下所示：

```
self.MyObject=Screen.MyObject(); 
```

错误是：

```
attempt to index field 'MyObject' (a number value) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T08:43:25.543

在[最新的 LuaBridge](https://github.com/vinniefalco/LuaBridge)版本中，您可以使用`RefCountedPtr`例如：

一些 C++ 定义

```
struct A {};

static RefCountedPtr<A> SomeA() {
 return RefCountedPtr<A>(new A);
} 
```

和绑定：

```
luabridge::getGlobalNamespace(L)
  .beginClass<A>("A")
   .addConstructor< void (*) (), RefCountedPtr<A> >()
  .endClass()

  .addFunction("SomeA",&SomeA); 
```

现在您可以`A`安全地返回对象并将它们传递给其他 Lua 绑定函数`RefCountedPtr<A>`

在 lua 中，您可以像这样使用它：

```
local a=A()
--do something with a...

local b=SomeA()
--do something with b... 
```

# ruby-on-rails - Rails如何从一个查询数据中计算多个总和

> ID：16206957
> 
> 赞同：0
> 
> 时间：2013-04-25T05:25:22.380
> 
> 标签：ruby-on-rails, ruby, activerecord, sum

使用以下两个模型`Company`和`Response`，我正在查询每家公司的总回复，如下所示：

```
@allResponses = Company.find(current_user_company_id).responses 
```

这给了我这样的数据：

```
[#<Response id: 1, company_id: 1, created_at: "2013-04-24 02:36:54", feedback_score: 10, feedback_explanation: "I really like the way you guys do xyz.", additional_data: "", updated_at: "2013-04-24 02:36:54">, #<Response id: 2, company_id: 1, created_at: "2013-04-25 03:51:07", feedback_score: 5, feedback_explanation: "customer service is spotty.", additional_data: "", updated_at: "2013-04-25 03:51:07">, #<Response id: 3, company_id: 1, created_at: "2013-04-25 03:52:04", feedback_score: 7, feedback_explanation: "You've got potential.", additional_data: "", updated_at: "2013-04-25 03:52:04">, #<Response id: 4, company_id: 1, created_at: "2013-04-25 03:52:18", feedback_score: 9, feedback_explanation: "Almost perfect.", additional_data: "", updated_at: "2013-04-25 03:52:18">] 
```

我想从这些数据中得到以下两个变量：

```
@sumOfHighScores = some.thing.here       #sum of feedback_scores that are greater than 8
@sumOfLowScores = some.thing.here.too    #sum of feedback_scores that are less than 7 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T05:50:27.970

你可以试试这个

```
@sumOfHighScores = @allResponses.select{ |response| response.feedback_score > 8 }.map(&:feedback_score).sum
@sumOfLowScores = @allResponses.select{ |response| response.feedback_score < 7 }.map(&:feedback_score).sum 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T06:40:41.940

我将在数据库中执行整个计算。

```
company = Company.find(current_user_company_id)
totals =  company.responses.sum(
            :feedback_score,
            :group => "CASE WHEN feedback_score < 7 THEN 'low' ELSE 'high' END")
low, high = (totals['low'] || 0), (totals['high'] || 0 ) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-25T05:47:35.787

尝试这个..

```
 @sumOfHighScores = @allResponses.select{ |response| response.feedback_score > 8 }.sum
 @sumOfLowScores = @allResponses.select{ |response| response.feedback_score < 7 }.sum 
```

# java - jpcap 的数据包嗅探

> ID：16206959
> 
> 赞同：0
> 
> 时间：2013-04-25T05:25:25.733
> 
> 标签：java, libpcap, tcpdump, packet-sniffers, jpcap

我在 jpcap 库的帮助下在 java 中的以太网（eth0）上嗅探数据包......所以，在我的项目中，我有一个 JpcapCaptor ......

```
 //Open an interface with openDevice(NetworkInterface intrface, int snaplen, boolean promics, int to_ms)
        JpcapCaptor captor=JpcapCaptor.openDevice(devices[index], 65535, false, 20);
        captor.setFilter("icmp", true);
        captor.loopPacket(-1, new PacketPrinter()); 
```

然后我有数据包打印机，它打印嗅探数据包的主体......

```
 public class PacketPrinter implements PacketReceiver {
@Override
public void receivePacket(Packet packet) {
    InputStream is = new ByteArrayInputStream(packet.data);
    try {
        String sstr = IOUtils.toString(is, "UTF-8");
        System.out.println("STRING " + sstr);
    } catch (IOException e1) {
        // TODO Auto-generated catch block
        e1.printStackTrace();
    }
       String ss;
    try {
        ss = new String(packet.data, "UTF-8");
        System.out.println("STRING " + ss);
    } catch (UnsupportedEncodingException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } 
} 
```

但是有一个问题...... **packet.data**是一个字节[]......并且控制台将其打印为

```
 STRING W�xQ��       !"#$%&'()*+,-./01234567
    STRING W�xQ��       !"#$%&'()*+,-./01234567
    STRING W�xQ��       !"#$%&'()*+,-./01234567 
```

据我了解，这是因为编码问题？？？决定这个问题的解决方案是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T05:31:28.993

> As I understand it is because of problem with encoding?

That may be correct. It also may be that the stuff you are trying to turn into a String is not text at all. In fact, if that is a raw network packet that you have sniffed, it is pretty much *guaranteed* that some of the packet (the IP/ICMP packet headers) *won't* be text.

> What is the solution to this problem?

The solution is to understand what it is you are trying to decode and whether or not it is *appropriate* to decode it as if it was encoded text. If not, you need to decode / display it differently ... depending on what the relevant RFC says about the packets you are trying to display.

# c# - 如何将数据保存为以后可以调用的格式

> ID：16206960
> 
> 赞同：0
> 
> 时间：2013-04-25T05:25:32.233
> 
> 标签：c#, datagridview, datatable, save, rows

我一直在努力阅读一个文本文件并将文本组织成每个项目的块。我需要帮助找出在程序使用过程中可以保存和调用数据的方法。我正在尝试将输出作为数据网格视图。我不知道如何解决这个问题。我想我可以为每个新块创建一个数据表，但我不知道该怎么做。

到目前为止我的代码：

```
public void findBlocks()
    {
        String fileName = "Drops.de";
        StreamReader streamReader = new StreamReader(fileName);
        String npcName;
        string npcID;
        string itemID;
        string itemAmount;
        string itemRarity;
        string itemName;

        while(!streamReader.EndOfStream){
            string line = streamReader.ReadLine();
            //start of block
            if(line.StartsWith("[")){
                npcName = line.TrimStart('[');
                npcName = npcName.TrimEnd(']');
                while(!line.StartsWith("[/")){
                    line = streamReader.ReadLine();
                    String[] s = line.Split(' ');
                    npcID = (s[0]);
                    itemName = (s[1]);
                    itemID = (s[2]);
                    itemAmount = (s[3]);
                    itemRarity = (s[4]);
                    DataTable dt = new DataTable();
                    DataGridViewRow dgv = new DataGridViewRow();

                    DataGridViewRow row = (DataGridViewRow)dataGridView1.Rows[0].Clone();
                    row.Cells[0].Value = itemName;
                    row.Cells[1].Value = itemID;
                    row.Cells[2].Value = itemAmount;
                    row.Cells[3].Value = itemRarity;
                    dataGridView1.Rows.Add(row);
                    dataGridView1.Refresh();
                    line = streamReader.ReadLine();
               //MessageBox.Show(npcName);
                }
            }
        }
    }

    private void button2_Click(object sender, EventArgs e)
    {
        search();
    }

    public void loadItemList(string file)
    {
        String fileName = file;
        StreamReader streamReader = new StreamReader(fileName);

        while (!streamReader.EndOfStream)
        {
            string currentLine = streamReader.ReadLine();
            string s;
            String id;
            String itemName = "";

            if (currentLine.Contains("item"))
            {
                s = currentLine.TrimStart('i', 't', 'e', 'm', ' ', '=', ' ');
                id = s.Split('.')[0];
                itemName = id.Split('\t')[1];
                id = id.Split('\t')[0];

                listBox1.Items.Add(itemName + " " + id);

            }
            else
            {
                streamReader.ReadLine();
            }

        }
        streamReader.Close();
    } 
```

这是我尝试排序的文本文件的示例：

```
[item1]
2550 coins 995 200000 7
2550 coins 995 200000 7
2550 coins 995 200000 7
2550 coins 995 200000 7
2550 coins 995 200000 7
[/item1]
[item2]
2550 coins 995 200000 7
2550 coins 995 200000 7
2550 coins 995 200000 7
2550 coins 995 200000 7
2550 coins 995 200000 7
[/item2]
[item3]
2550 coins 995 200000 7
2550 coins 995 200000 7
2550 coins 995 200000 7
2550 coins 995 200000 7
2550 coins 995 200000 7
[/item3] 
```

ETC..

任何和所有的帮助将不胜感激:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T05:29:22.893

可以在[此处](http://xinyustudio.wordpress.com/2009/01/17/readwrite-data-to-xml-files/)找到示例帖子，下面概述了关键步骤：

1.  使用 xml 保存数据
2.  从 xml 读取数据到列表中
3.  然后将其绑定到您的网格视图。

示例代码可能是：

```
[Serializable]
class SomeProperty
{
    public int Count1 {get;set;}   //2550
    public int Count2 {get;set;}   //995
    public int Count3 {get;set;}   //200000
    public int Count4 {get;set;}   //7
}

List<SomeProperty> objects=new List<SomeProperty>();
objects.Add(...)

//Saving
XmlSerializer x = new XmlSerializer(objects.GetType());
using (FileStream stream = System.IO.File.Create(FilePath))
{
    XmlWriter writer = XmlWriter.Create(stream);
    x.Serialize(writer, objects);
}

//Reading
XmlSerializer x = new XmlSerializer(typeof(List<SomeProperty>));
using (FileStream fs = new FileStream(FilePath, FileMode.Open))
{
    XmlReader reader = new XmlTextReader(fs);
    var objects= (List<SomeProperty>)x.Deserialize(reader);
} 
```

# c - C程序在执行execlp函数时退出

> ID：16206961
> 
> 赞同：1
> 
> 时间：2013-04-25T05:25:49.390
> 
> 标签：c

我知道 execlp 替换了当前进程。我正在尝试运行

```
execlp("mpg123", "mpg123", "-q", "1.mp3", 0); 
```

有什么方法可以在 execlp 执行时保持程序运行？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-25T05:29:42.893

您[`fork`](http://pubs.opengroup.org/onlinepubs/009695399/functions/fork.html)是一个新进程，并`exec`在子进程中进行调用：

```
pid_t child_pid = fork();
if (child_pid == -1)
    perror("fork");
else if (child_pid == 0)
{
    /* In child process, call `exec*` */
}
else
{
    /* In parent process, continue doing... things... */
} 
```

# jquery - 如何使用 jQuery 设置 DHTMLX Scheduler Timeline 视图的 Dx 属性

> ID：16206964
> 
> 赞同：0
> 
> 时间：2013-04-25T05:26:01.690
> 
> 标签：jquery, scheduler, dhtmlx, dhtmlx-scheduler

在 C# 中，我使用此代码设置时间轴视图的*Dx属性*

```
var timeline = new TimelineView("timeline", "EmployeeId");
timeline.Dx = 174; 
```

但是我怎样才能使用 jQuery 来实现呢？我想设置**现有**调度程序的 Dx 属性。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-02T11:50:09.250

At the client-side timeline configs are stored in **scheduler.matrix** property. You can access certain config in following way:

```
scheduler.matrix["viewName"] 
```

for example:

```
scheduler.matrix["timeline"].dx = 174;
scheduler.updateView();//apply changes 
```

# ios - 识别的选择器给了我“发送到实例的无法识别的选择器”

> ID：16206968
> 
> 赞同：0
> 
> 时间：2013-04-25T05:26:30.863
> 
> 标签：ios, objective-c, cocoa-touch, cocoa, gmail

我正在使用 Gdata 从 Gmail 帐户中获取联系人。我能够获取用户的一些详细信息（姓名等），但是当我尝试获取电子邮件时，我收到了这个错误：

```
-[GDataEntryBase emailAddresses]: unrecognized selector sent to instance 
```

从我读过的内容来看，我正在以正确的方式做这件事。我错过了什么？

代码：

```
 -(void)getGoogleContacts {

        GDataServiceGoogleContact *service =
        [[GDataServiceGoogleContact alloc] init];

        NSString *username = @"username@gmail.com";
        NSString *password = @"pass";

        service = [[GDataServiceGoogleContact alloc] init];

        [service setUserAgent:@"McGraggerSoft-GoogleContactUtility-1.0"];
        [service setUserCredentialsWithUsername:username password:password];

        ticket = [service fetchContactFeedForUsername:username delegate:self didFinishSelector:@selector(ticket:finishedWithFeed:error:)];
    }

- (void)ticket:(GDataServiceTicket *)ticket finishedWithFeed:(GDataFeedContact *)feed error:(NSError *)error
    {

        if ([[feed entries] count] > 0) {

            GDataEntryContact *firstContact = [[feed entries] objectAtIndex:0];
            GDataTextConstruct *titleTextConstruct = [firstContact title];
            NSString *title = [titleTextConstruct stringValue];    
            NSLog(@"first contact's title:%@", title);
           GDataEmail *email = [[firstContact emailAddresses] objectAtIndex:0]; //<-- Crash
          //NSString *ContactEmail = [email address];
          //NSLog(@"ContactEmail: %@",ContactEmail);
        }
    } 
```

这是我正在使用的项目：[https](https://github.com/819419423/GDataWithGTMOauth2Example) ://github.com/819419423/GDataWithGTMOauth2Example 您可以删除主控制器中的所有内容并添加上述方法以获取错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T06:08:49.537

您基本上是在没有它的对象中调用方法。在这种情况下，：

```
GDataEntryContact *firstContact = [[feed entries] objectAtIndex:0]; 
```

假定有方法`emailAddresses`。所以我想问题在这里发生：

```
GDataEmail *email = [[firstContact emailAddresses] objectAtIndex:0]; //<-- Crash 
```

**如何解决？**

`emailAddresses`在您的对象中实现该方法。

可能发生的另一件事是您的 emailAddresses 实际上是一个 ivar，您只需要综合他的 getter/setter 方法，因此只需将其添加到您的 GDataEmail.h 文件中：

```
@property(nonatomic,strong)NSMutableArray *emailAddresses; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T06:09:00.277

在尝试获取您的实例时，`GDataEntryContact`您似乎得到`GDataEntryBase`了错误消息中的实例。而且这个类不提供方法`emailAddresses`。请注意，Objective-C 编译器不会阻止将“类型”id 分配给 - 在这种情况下 - `firstContact`。所以你可能想有一个`GDataEntryContact`对象，但实际上它是一个`GDataEntryBase`对象`[[feed entries] objectAtIndex:0]`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-28T05:41:48.860

显然我有一个旧版本的 GData。我已经从下载部分下载了它，而不是进行**svn checkout**。之后一切正常。

# javascript - 将base64图像数据输出到新窗口而不会被阻止？

> ID：16206973
> 
> 赞同：1
> 
> 时间：2013-04-25T05:26:54.113
> 
> 标签：javascript, jquery, base64

目前有点 Javascript 的噩梦。

我正在使用 html2canvas 将 div 转换为画布，然后`.toDataURL`将画布转换为 base64 数据流。

我想在新窗口中打开 base64 图像数据，但它会被我测试过的每个弹出窗口阻止程序阻止。

这是我的功能示例

```
function generateImage(xarg){
    var divid= document.getElementById(xarg);
    html2canvas(divid, {
        onrendered: function(canvas) {
            var imgdata = canvas.toDataURL("image/png");
            window.open(imgdata);
        }
    });
} 
```

知道为什么我`window.open`的被阻止了吗？

编辑：我的另一个想法是启动图像的下载，但是我发现的每个解决方案都需要更改数据，`image/octet-stream`这会弄乱文件类型，而且我的用户将无法处理（尤其是那些在移动设备上的）。我最初有一个更长的帖子来解释我的情况，但为了简洁起见，我将其截断了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-12-02T13:52:20.463

由于异步打开方式（甚至来自单击事件的回调），有关弹出窗口被阻止的其他直接响应。我通过以下方式解决了这个问题： - 直接在点击处理程序上打开一个空白弹出窗口 - 启动 html 内容的“canva-ification” - 创建一个临时表单，在弹出窗口中发布 canva base64 数据

这种方法的缺点是用户在生成画布时有一个空白弹出窗口。我希望这有帮助。

```
function clickHandler(elementId /*the id of the element to convert to an image */) {
    // opens the popup directly -> not blocked by browsers
    var popup = window.open('about:blank', 'screenshotWindow', 'width=950,height=635');

    // creates the form
    var form = window.document.createElement('form');
    form.setAttribute('method', 'post');
    form.setAttribute('target', 'screenshotWindow');
    window.document.body.appendChild(form);

    html2canvas(window.document.getElementById(elementId), {
        onrendered: function(canvas) {
            // posts the base64 content in the popup with the form and removes it
            form.setAttribute('action', canvas.toDataURL('image/png'));
            popup.focus();
            form.submit();
            window.document.body.removeChild(form);
        }
    });
} 
```

# java - 是否可以为登录页面集成一个简单的登录？

> ID：16206982
> 
> 赞同：-1
> 
> 时间：2013-04-25T05:27:28.973
> 
> 标签：java, jsf, login, primefaces

我编写了一个带有后端的登录页面。因此，我可以获得客户的姓名和电子邮件地址，然后可以将其显示在后端并将其导出为 excel。

但是，我想“保护”这个网站。因此，我需要一个快速的解决方案来为我的网站创建一个登录名，以使该网站“保护”该网站。（快速 -> 因为我也在生产系统中工作并且即将推出）这还应该包括重定向到我的登陆页面。通过“安全”，我的意思是它不必是诺克斯堡，但一个简单的锁应该没问题。

因此，我的问题是：

> 在 jsf、primefaces 3.5 和 java 中实现登录解决方案以重定向到我的登录页面管理面板有哪些简单快速的方法？

真的很感谢你的回答！！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T06:07:32.580

我认为最简单的方法是使用基本形式的身份验证。更多信息可以在这里找到[http://docs.oracle.com/cd/E19798-01/821-1841/bncby/index.html](http://docs.oracle.com/cd/E19798-01/821-1841/bncby/index.html)。

将此添加到 web.xml

```
<security-constraint>
    <display-name>Admin area</display-name>
    <web-resource-collection>
        <web-resource-name>Admin area</web-resource-name>
        <description>Admin area</description>
        <url-pattern>/admin/*</url-pattern>
        <url-pattern>/login</url-pattern>
    </web-resource-collection>
    <auth-constraint>
        <description/>
        <role-name>admin</role-name>
    </auth-constraint>
</security-constraint>
<login-config>
    <auth-method>FORM</auth-method>
    <form-login-config>
        <form-login-page>/login.xhtml</form-login-page>
        <form-error-page>/login.xhtml</form-error-page>
    </form-login-config>
</login-config>
<security-role>
    <description/>
    <role-name>admin</role-name>
</security-role> 
```

创建登录页面

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:p="http://primefaces.org/ui">

    <h:head>
    </h:head>
    <h:body>
        <form method="POST" action="j_security_check" class="content-container admin-container">
            <table>
                <tr>
                    <td>Login:</td>
                    <td><input type="text" name="j_username" /></td>
                </tr>
                <tr>
                    <td>Password: </td>
                    <td><input type="password" name="j_password" /></td>
                </tr>
                <tr>
                    <td><input value="Login" /></td>
                </tr>
            </table>
        </form>
    </h:body>
</html> 
```

# python - 具有多个参数的值的python字典

> ID：16206983
> 
> 赞同：-1
> 
> 时间：2013-04-25T05:27:32.337
> 
> 标签：python, dictionary

我在从字典中获取值时遇到问题。di 是字典。

```
for key in di.keys()
    print("key is = %s" %key)
for value in di.values()
    print("value is = %s" %value) 
```

它给出的输出为

```
key is = 1 
```

和

```
value is = xyz=0 | pqr=70 | abc=300 
```

我希望以上所有 3 个值（0,70,300）在单独的变量中。我做不到

```
di['xyz'] 
```

因为 xyz 本身就是一个值。如何获取所有这些值？它是嵌套字典吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T05:39:10.533

从外观上看，这是你的字典

```
>>> di = {'1': 'xyz=0 | pqr=70 | abc=300'} 
```

或者也许`{1: 'xyz=0 | pqr=70 | abc=300'}`，但你的问题不是很清楚，所以我假设第一个。

奇怪的是你会把它当作字典，所以我不会费心去思考为什么会这样，相反，我只会告诉你如何从字符串中构建你想要的东西`'xyz=0 | pqr=70 | abc=300'`

```
>>> di['1'].split(' | ')
['xyz=0', 'pqr=70', 'abc=300'] 
```

由竖线分割

```
>>> [x.split('=') for x in di['1'].split(' | ')]
[['xyz', '0'], ['pqr', '70'], ['abc', '300']] 
```

按等号拆分以生成密钥对列表

```
>>> dict(x.split('=') for x in di['1'].split(' | '))
{'xyz': '0', 'abc': '300', 'pqr': '70'} 
```

建立`dict`一个

```
>>> di = dict(x.split('=') for x in di['1'].split(' | '))
>>> di['xyz']
'0' 
```

现在你可以像访问它一样`di['xyz']`

# memory-management - 使用 UIWebview 添加 UIPageviewController 在 iPad3 中创建意外的内存崩溃，但在 iPad2 中完美运行

> ID：16206985
> 
> 赞同：0
> 
> 时间：2013-04-25T05:27:35.583
> 
> 标签：memory-management, uiwebview, uipageviewcontroller, ipad-3

我正在开发 iPad 电子书类型的应用程序。我必须从 Web 服务获取数据并在应用程序启动时将其显示在 webView 中。因此，在应用程序开始时，我正在使用 UIWebview 创建一个 UIViewController 数组。当我开始在 38-42 页从一个页面遍历到另一个页面时，它会收到内存警告并仅在 iPad3 中崩溃，但在 iPad2 中工作正常。

下面是代码。

```
 - (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
 pageContent = [[NSMutableArray alloc] init];
 for (int i=0;i<60; i++)
 {

  [self addwebviewINCode];
 }
NSDictionary *options = [NSDictionary dictionaryWithObject:[NSNumber numberWithInteger:UIPageViewControllerSpineLocationMin] forKey: UIPageViewControllerOptionSpineLocationKey];
    self.pageController = [[UIPageViewController alloc] 
                           initWithTransitionStyle:UIPageViewControllerTransitionStylePageCurl
                           navigationOrientation:UIPageViewControllerNavigationOrientationHorizontal
                           options: options];
    pageController.dataSource = self;
    pageController.delegate=self;
    [[pageController view] setFrame:[[self.window.rootViewController view] bounds]];
    UIViewController *viewC = [self viewControllerAtIndex:0];

```
NSArray *viewControllers =  [NSArray arrayWithObject:viewC];
[pageController setViewControllers:viewControllers  
                         direction:UIPageViewControllerNavigationDirectionForward 
                          animated:NO 
                        completion:nil];

[self.window.rootViewController addChildViewController:pageController];
[[self.window.rootViewController view] addSubview:[pageController view]];
[pageController didMoveToParentViewController:self.window.rootViewController];

[self.window makeKeyAndVisible];

return YES; 
```

} 
```

我正在使用 UIViewController 添加 Webview

```
 -(void)addwebviewINCode
{
 UIViewController *viewC = [[UIViewController  alloc] initWithNibName:nil bundle:nil];

```
self.webVCustom = [[UIWebView alloc] initWithFrame:CGRectMake(0, 0, _window.bounds.size.width, 1004)];//20

self.webVCustom.suppressesIncrementalRendering=YES;
self.webVCustom.delegate=self;
self.webVCustom.scrollView.scrollEnabled=NO;

viewC.view=self.webVCustom;

[pageContent addObject:viewC]; 
```

} 
```

UIPageController 委托方法

```
 - (void)pageViewController:(UIPageViewController *)pageViewController willTransitionToViewControllers:(NSArray *)pendingViewControllers {
    pageAnimationFinished = YES;
}
- (UIViewController *)pageViewController:(UIPageViewController *)pageViewController viewControllerBeforeViewController:(UIViewController *)viewController
{
   if (flag == FALSE) {
        NSUInteger index = [self indexOfViewController:viewController];
        if ((index == 0) || (index == NSNotFound)) {
            return nil;
        }
        index--;
        return [self viewControllerAtIndex:index];
    }else {
        flag=FALSE;
    }
    return 0;
}
-(UIViewController *)pageViewController:(UIPageViewController *)pageViewController viewControllerAfterViewController:(UIViewController *)viewController
{
   if (flag == FALSE) {
        NSUInteger index = [self indexOfViewController:viewController];
        if (index == NSNotFound) {
            return nil;
        }
        index++;
        if (index == [self.pageContent count]) {
            return nil;
        }
        return [self viewControllerAtIndex:index];
    }else {
        flag=FALSE;
    }
    return 0;
}

-(void)pageViewController:(UIPageViewController *)pageViewController didFinishAnimating:(BOOL)finished previousViewControllers:(NSArray *)previousViewControllers transitionCompleted:(BOOL)completed
{
    UIViewController *viewC = [previousViewControllers objectAtIndex:0];
    NSInteger ind = [self getVCIndex:viewC];
    NSInteger indCur = [self getVCIndex:[pageViewController.viewControllers objectAtIndex:0]];
    if (ind == indCur) {
        indCurrentView=ind;
    }else {
        indCurrentView=indCur;
    }
    if (completed || finished)   // Turn is either finished or aborted
        pageAnimationFinished = NO;
}

-(UIViewController *)viewControllerAtIndex:(NSUInteger)index
{
    // Return the data view controller for the given index.
    if ((index >= [self.pageContent count])) {
        return nil;
    }
    // Create a new view controller and pass suitable data.
    UIViewController *viewC = (UIViewController*)[pageContent objectAtIndex:index];

```
return viewC; 
```

}

-(NSUInteger)indexOfViewController:(UIViewController *)viewController
{
    return [self.pageContent indexOfObject:viewController];
}

-(NSInteger)getVCIndex:(UIViewController*)viewCon
{
    if ([pageContent containsObject:viewCon]) {
        return [pageContent indexOfObject:viewCon];
    }
    return 0;
} 
```

为什么这件事会发生，因为它在 iPad2 中工作正常，但只在 iPad3 中给出内存警告和崩溃

谁能帮我解决这个问题？我花了太多天来解决这个问题..

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-06T19:30:21.807

看起来引用的代码会预先生成所有视图控制器。您应该考虑仅在 UIPageViewController 请求它们时创建视图控制器。

对于初始 setViewControllers:direction:animated:completion: 调用，向其发送一个数组，其中仅包含最初应显示的视图控制器（第一页）。

在 pageViewController:viewControllerBeforeViewController: 和 pageViewController:viewControllerAfterViewController: 中，它将创建一个新的视图控制器，表示应该在传递参数的视图控制器中包含的内容之前或之后显示的内容，而不是将索引引用到数组中。

这样您就不需要一次加载所有可能导致问题的页面（尤其是 UIWebViews）。

# jquery - jQuery if/else with :not 不起作用

> ID：16206987
> 
> 赞同：0
> 
> 时间：2013-04-25T05:27:44.353
> 
> 标签：jquery

[http://jsfiddle.net/ySLkQ/16/](http://jsfiddle.net/ySLkQ/16/)

jQuery

```
if ($("h1.change:contains('-')")) {
    $("h1.change").append(" it's negative");
} else if ($("h1.change:not(contains('-'))")) {
    $("h1.change").append(" it's positive");
} 
```

HTML：

```
<h1 class="change">-30</h1>
<h1 class="change">30</h1> 
```

基本上不管我做什么，最后`<h1>`总是显示负面

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-25T05:40:06.530

你`if`只执行一次。

它检查 $("h1.change:contains('-')") 的计算结果是否为真 - 它返回一个元素，所以它是真的。

之后，它将“它是负面的”应用于所有 h1.change 元素。

else 部分永远不会执行。

```
$("h1.change").not(":contains('-')").append(" it's positive");
$("h1.change:contains('-')").append(" it's negative"); 
```

将按您的预期工作 - 每个选择器将评估为一个元素列表，并且 append() 将在所有元素上执行。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-25T05:40:49.783

Arun 指出了缺失`:`，但[您可以使用 jQuery 更有效地执行此操作](http://jsfiddle.net/ySLkQ/19/)：

```
var change = $("h1.change"),
    negative = change.filter(":contains('-')"),
    positive = change.not(negative);

// you can do the appends above, but I prefer the clarity
negative.append(" it's negative");
positive.append(" it's positive"); 
```

此外，第一个 if 总是会影响其他`change`元素。使用上述方法将保留两个互斥组。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-25T05:36:26.653

用这个

```
$('h1.change').html(function(val, html){
    return html + ( html.indexOf('-') == -1 ? " it's positive" : " it's negative" )
}); 
```

演示：[小提琴](http://jsfiddle.net/arunpjohny/np7Q7/2/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-25T05:50:12.040

`$.each()`您也可以通过函数来​​实现这一点。这更好，因为您希望将字符串附加到`h1`具有相同选择器条件的多个元素。如果您尝试编写单个语句，则可能会导致一些问题，例如在不需要时将相同的值写入多个元素。虽然`$.each()`可能效率不够。出于效率考虑，@DThought 的答案要好得多，您已经接受了它作为答案。

```
$("h1.change").each(function(index){
    if ($(this).text().indexOf("-")!=-1) {
        $(this).append(" it's negative");
    }else{
        $(this).append(" it's positive");
    }
}); 
```

# c# - C# WCF 返回带/不带 REF/OUT 的参数

> ID：16206990
> 
> 赞同：1
> 
> 时间：2013-04-25T05:27:52.890
> 
> 标签：c#, wcf, out, ref

以下是我的 WCF 服务代码的简化版本。此代码工作正常并返回我的数据。

我的问题是，这仅在我通过 ref 或 out 传递客户对象时才有效。如果我修改整个代码以便在没有 ref 或 out 的情况下传递客户对象，则 i 变量中的计数为 0。

如果 List 是一个引用变量，为什么它适用于 ref/out 而没有 ref/out 则不起作用。

另请注意，我将无法从该方法返回一个值，因为我必须返回多个值。

**客户代码：**

```
List<Customer> customers = null;
ClientProxy proxy = new ClientProxy();
proxy.GetCustomers(ref customers);
int i = customers.Count; 
```

**服务代理：**

```
public class ClientProxy
{
    public void GetCustomers(ref List<Customer> customers)
    {
        INWGetCustomers proxy = new ChannelFactory<INWGetCustomers>("netNamedPipeBinding").CreateChannel();
        proxy.GetCustomers(ref customers);
    }
} 
```

**服务合同和数据合同：**

```
[DataContract]
public class Customer
{
    [DataMember]
    public System.String CustomerId;

    [DataMember]
    public System.String CompanyName;
}

[ServiceContract(Namespace = "http://www.temp.com")]
public interface INWGetCustomers
{
    [OperationContract()]
    void GetCustomers(ref List<Customer> customers);
} 
```

**服务代码：**

```
public class NWGetCustomersService : INWGetCustomers
{
    public void GetCustomers(ref List<Customer> customers)
    {
        customers = new List<Customer>();
        customers.Add(new Customer() { CustomerId = "1", CompanyName = "A" });
        customers.Add(new Customer() { CustomerId = "2", CompanyName = "B" });
        customers.Add(new Customer() { CustomerId = "3", CompanyName = "C" });
        customers.Add(new Customer() { CustomerId = "4", CompanyName = "D" });
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T05:36:05.860

这是因为在这种情况下使用 ref 或 out 会强制将 list 视为输出参数。它不是真正的通过引用传递，因为对象是在服务器和客户端之间发送的。如果您查看 WSDL，您将看到 .NET 如何生成此代码

总结一下：它在客户端和服务器上不是同一个对象，所以列表是一个引用变量并不重要

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T09:38:11.320

我们必须始终牢记，对对象的引用是按值传递的。调用方法时，它将拥有自己的引用值副本。如果参考值在方法内部发生变化，它不会反映在外部变量中。（我的意思是如果创建了新实例并将相关的参考值分配给方法变量，那么它将不会更新到外部变量）。这就是为什么你必须在你的方法中添加 ref 的原因。执行下面的代码片段。然后在方法签名和调用者中添加 ref 关键字修改代码。你可以意识到差异。

```
namespace ParameterSample
{
    class Program
    {
        static void Main(string[] args)
        {
            Customer customer = null;
            GetValue(customer);
            Console.WriteLine("In Main Method : Is customer Null? >>  " + (customer == null));
            Console.Read();
        }
        public static void GetValue(Customer customer)
        {
            customer = new Customer();
            Console.WriteLine("Inside GetValue Method : Is customer Null ? >>  " + (customer == null));
        }
    }
    class Customer
    { }
} 
```

# c# - 将 3 个值绑定到下拉列表

> ID：16206993
> 
> 赞同：3
> 
> 时间：2013-04-25T05:28:07.257
> 
> 标签：c#, asp.net

我有一个绑定到数据表的下拉列表，如下所示：

```
MatID  MatName   MatGroupID
1       Mat1       11
2       Mat2       22
3       Mat3       33
 <asp:DropDownList ID="DropDownList_MAT" runat="server" AutoPostBack="true" OnSelectedIndexChanged="UpdateDetails" DataTextField="MatGroupID" DataValueField="Matname"  />
 <asp:Label ID="Label_StaticMatName" runat="server" /> 
```

代码：

```
protected void UpdateDetails(object sender, EventArgs e)
{
 Label_StaticLockGroupName.Text = DropDownList_MAT.SelectedItem.Value;
} 
```

我指定为 DataTextField 的 MatGroupID 和 DataValueField 是 MatName。当我在下拉列表中选择一个值时，我想要文本字段值字段以及 MatID。当用户每次选择下拉值时，我如何维护 MatID

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T05:32:20.220

create a class for Mat (that also includes the MatGroupId and MatId), so you can just save the unique ID from the class as DataValue and later you will get the class out of the unique id and then you get all your stored data in your class, because you cant store multiples DataValueFields.

other option would be to build a string, something like:

```
 string value = "1" + "#" + "Mat1" + "#" + "11"; 
```

so later on you can split it using:

```
 string MatId = value.Split('#')[0];
 string MatName = value.Split('#')[1];
 string MatGroupId = value.Split('#')[2]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-07-02T07:50:47.170

最简单的解决方案是：

**在 Value 属性中填充多个列，由 | 分隔 （管道）**

```
string SQL="SELECT ID +' | '+ Field3 as ValField, Field2 as DispField FROM Table1";

ddl.DataSource = GetDataTable(SQL);
ddl.DataTextField = "DispField";
ddl.DataValueField = "ValueField";
ddl.DataBind(); 
```

**现在处理回发时的值**

```
string[] values = ddl.SelectedValue.Split('|');
Response.Write ( values[0] );
Response.Write ( values[1] ); 
```

# php - 解析器仅抓取 csv 列标题问题

> ID：16206998
> 
> 赞同：0
> 
> 时间：2013-04-25T05:28:23.543
> 
> 标签：php

所以我有一个表单和成功上传 csv 文件并对其进行解析的解析器，但是我只想获取 csv 文件中的列标题。我如何只抓住所有列标题的第一行？

```
function ShowForm()
{

print"<form method='post' action='$_SERVER[PHP_SELF]' enctype='multipart/form-data'>\n";
print"<p>enter csv file:\n".
    "<input type='file' name ='csv' value=''/>\n"."</p>".
    "<p><input type='submit' name ='submit'  />".
    "</p>".
    "</form>";

 }
//////////////////////////////////////////////////////////////////////////////////  
  function Processform()
{
$csv = array();
// check there are no errors
if($_FILES['csv']['error'] == 0){
$name = $_FILES['csv']['name'];
$ext = strtolower(end(explode('.', $_FILES['csv']['name'])));
$type = $_FILES['csv']['type'];
$tmpName = $_FILES['csv']['tmp_name'];

print "name : $name<br >";
print "extenstion : $ext<br >";
print "type : $type<br >";
print "name : $tmpName<br >";

 if($ext === 'csv'){
    if(($handle = fopen($tmpName, 'r')) !== FALSE) {
        // necessary if a large csv file
        set_time_limit(0);

        $row = 0;

        while(($data = fgetcsv($handle, 1000, ',')) !== FALSE) {
            // number of fields in the csv
            $num = count($data);

            // get the values from the csv
            $csv[$row]['row1'] = $data[0];
            $csv[$row]['row2'] = $data[1];

            // inc the row
            $row++;
        }
        fclose($handle);
    }
  }
 }
 } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T05:34:03.890

该`fgetcsv`方法从 CSV 文件中获取一行，因此要获取第一行，只需调用一次：

```
 if(($data = fgetcsv($handle, 1000, ',')) !== FALSE) {
        // handle first row
    }

    $row = 1;

    // Now handle all the rest
    while(($data = fgetcsv($handle, 1000, ',')) !== FALSE) {
        // number of fields in the csv
        $num = count($data);

        // get the values from the csv
        $csv[$row]['row1'] = $data[0];
        $csv[$row]['row2'] = $data[1];

        // inc the row
        $row++;
    } 
```

# php - 如何在php上获得价值127.0.0.1而不是::1

> ID：16206999
> 
> 赞同：0
> 
> 时间：2013-04-25T05:28:28.297
> 
> 标签：php, phpmyadmin, localhost

我想在 $_SERVER['REMOTE_ADDR'] 时获得价值 127.0.0.1。而是得到 127.0.0.1。我得到价值::1。任何人都可以帮助我如何获得该价值？将其用于日志活动。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-25T05:30:57.090

::1 is an IPv6 address and an abbreviation for 0:0:0:0:0:0:0:1 that is the loopback address to the local machine. So ::1 is the same as 127.0.0.1 only via IPv6 instead of IPv4.

If you really just want IPv4, try to disable IPv6 connections in your apache configuration:

```
Listen 0.0.0.0:80
Listen 192.170.2.1:80 
```

You can find detailed solution [here](https://stackoverflow.com/questions/3699454/should-ip-serverremote-addr-return-1-on-a-mamp-localhost)