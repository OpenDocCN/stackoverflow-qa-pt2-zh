# StackOverflow 问答 12710000-12710999

# javascript - 如何将 uint8 数组转换为 base64 编码字符串？

> ID：12710001
> 
> 赞同：117
> 
> 时间：2012-10-03T13:52:42.440
> 
> 标签：javascript, arrays, base64

我有一个 webSocket 通信，我收到了 base64 编码的字符串，将其转换为 uint8 并处理它，但现在我需要发回，我得到了 uint8 数组，需要将其转换为 base64 字符串，所以我可以发送它。我怎样才能进行这种转换？

* * *

## 回答 #1

> 赞同：169
> 
> 时间：2012-10-03T17:03:11.327

如果您的数据可能包含多字节序列（不是纯 ASCII 序列）并且您的浏览器具有[TextDecoder](https://developer.mozilla.org/en-US/docs/Web/API/TextDecoder)，那么您应该使用它来解码您的数据（指定 TextDecoder 所需的编码）：

```
var u8 = new Uint8Array([65, 66, 67, 68]);
var decoder = new TextDecoder('utf8');
var b64encoded = btoa(decoder.decode(u8)); 
```

如果您需要支持[没有 TextDecoder 的浏览器](http://caniuse.com/#search=TextDecoder)（目前只有 IE 和 Edge），那么最好的选择是使用[TextDecoder polyfill](https://github.com/inexorabletash/text-encoding)。

如果您的数据包含纯 ASCII（不是多字节 Unicode/UTF-8），那么有一个简单的替代方法`String.fromCharCode`应该得到相当普遍的支持：

```
var ascii = new Uint8Array([65, 66, 67, 68]);
var b64encoded = btoa(String.fromCharCode.apply(null, ascii)); 
```

并将 base64 字符串解码回 Uint8Array：

```
var u8_2 = new Uint8Array(atob(b64encoded).split("").map(function(c) {
    return c.charCodeAt(0); })); 
```

如果您有非常大的数组缓冲区，则应用可能会失败，您可能需要对缓冲区进行分块（基于@RohitSengar 发布的缓冲区）。同样，请注意，仅当您的缓冲区仅包含非多字节 ASCII 字符时，这才是正确的：

```
function Uint8ToString(u8a){
  var CHUNK_SZ = 0x8000;
  var c = [];
  for (var i=0; i < u8a.length; i+=CHUNK_SZ) {
    c.push(String.fromCharCode.apply(null, u8a.subarray(i, i+CHUNK_SZ)));
  }
  return c.join("");
}
// Usage
var u8 = new Uint8Array([65, 66, 67, 68]);
var b64encoded = btoa(Uint8ToString(u8)); 
```

* * *

## 回答 #2

> 赞同：60
> 
> 时间：2019-03-23T07:30:35.793

如果您使用的是 Node.js，那么您可以使用此代码将 Uint8Array 转换为 base64

```
var u8 = new Uint8Array([65, 66, 67, 68]);
var b64 = Buffer.from(u8).toString('base64'); 
```

* * *

## 回答 #3

> 赞同：34
> 
> 时间：2016-03-16T20:54:17.503

非常简单的 JavaScript 解决方案和测试！

```
ToBase64 = function (u8) {
    return btoa(String.fromCharCode.apply(null, u8));
}

FromBase64 = function (str) {
    return atob(str).split('').map(function (c) { return c.charCodeAt(0); });
}

var u8 = new Uint8Array(256);
for (var i = 0; i < 256; i++)
    u8[i] = i;

var b64 = ToBase64(u8);
console.debug(b64);
console.debug(FromBase64(b64)); 
```

* * *

## 回答 #4

> 赞同：32
> 
> 时间：2019-07-19T11:09:09.877

已经提出的所有解决方案都存在严重问题。一些解决方案无法处理大型数组，一些提供错误的输出，如果中间字符串包含多字节字符，一些解决方案会在 btoa 调用上抛出错误，一些会消耗比需要更多的内存。

所以我实现了一个直接转换功能，无论输入如何，它都可以工作。它在我的机器上每秒转换大约 500 万字节。

[https://gist.github.com/enepomnyaschih/72c423f727d395eeaa09697058238727](https://gist.github.com/enepomnyaschih/72c423f727d395eeaa09697058238727)

```
/*
MIT License
Copyright (c) 2020 Egor Nepomnyaschih
Permission is hereby granted, free of charge, to any person obtaining a copy
of this software and associated documentation files (the "Software"), to deal
in the Software without restriction, including without limitation the rights
to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
copies of the Software, and to permit persons to whom the Software is
furnished to do so, subject to the following conditions:
The above copyright notice and this permission notice shall be included in all
copies or substantial portions of the Software.
THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
SOFTWARE.
*/

/*
// This constant can also be computed with the following algorithm:
const base64abc = [],
	A = "A".charCodeAt(0),
	a = "a".charCodeAt(0),
	n = "0".charCodeAt(0);
for (let i = 0; i < 26; ++i) {
	base64abc.push(String.fromCharCode(A + i));
}
for (let i = 0; i < 26; ++i) {
	base64abc.push(String.fromCharCode(a + i));
}
for (let i = 0; i < 10; ++i) {
	base64abc.push(String.fromCharCode(n + i));
}
base64abc.push("+");
base64abc.push("/");
*/
const base64abc = [
	"A", "B", "C", "D", "E", "F", "G", "H", "I", "J", "K", "L", "M",
	"N", "O", "P", "Q", "R", "S", "T", "U", "V", "W", "X", "Y", "Z",
	"a", "b", "c", "d", "e", "f", "g", "h", "i", "j", "k", "l", "m",
	"n", "o", "p", "q", "r", "s", "t", "u", "v", "w", "x", "y", "z",
	"0", "1", "2", "3", "4", "5", "6", "7", "8", "9", "+", "/"
];

/*
// This constant can also be computed with the following algorithm:
const l = 256, base64codes = new Uint8Array(l);
for (let i = 0; i < l; ++i) {
	base64codes[i] = 255; // invalid character
}
base64abc.forEach((char, index) => {
	base64codes[char.charCodeAt(0)] = index;
});
base64codes["=".charCodeAt(0)] = 0; // ignored anyway, so we just need to prevent an error
*/
const base64codes = [
	255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255,
	255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255,
	255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 62, 255, 255, 255, 63,
	52, 53, 54, 55, 56, 57, 58, 59, 60, 61, 255, 255, 255, 0, 255, 255,
	255, 0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14,
	15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 255, 255, 255, 255, 255,
	255, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40,
	41, 42, 43, 44, 45, 46, 47, 48, 49, 50, 51
];

function getBase64Code(charCode) {
	if (charCode >= base64codes.length) {
		throw new Error("Unable to parse base64 string.");
	}
	const code = base64codes[charCode];
	if (code === 255) {
		throw new Error("Unable to parse base64 string.");
	}
	return code;
}

export function bytesToBase64(bytes) {
	let result = '', i, l = bytes.length;
	for (i = 2; i < l; i += 3) {
		result += base64abc[bytes[i - 2] >> 2];
		result += base64abc[((bytes[i - 2] & 0x03) << 4) | (bytes[i - 1] >> 4)];
		result += base64abc[((bytes[i - 1] & 0x0F) << 2) | (bytes[i] >> 6)];
		result += base64abc[bytes[i] & 0x3F];
	}
	if (i === l + 1) { // 1 octet yet to write
		result += base64abc[bytes[i - 2] >> 2];
		result += base64abc[(bytes[i - 2] & 0x03) << 4];
		result += "==";
	}
	if (i === l) { // 2 octets yet to write
		result += base64abc[bytes[i - 2] >> 2];
		result += base64abc[((bytes[i - 2] & 0x03) << 4) | (bytes[i - 1] >> 4)];
		result += base64abc[(bytes[i - 1] & 0x0F) << 2];
		result += "=";
	}
	return result;
}

export function base64ToBytes(str) {
	if (str.length % 4 !== 0) {
		throw new Error("Unable to parse base64 string.");
	}
	const index = str.indexOf("=");
	if (index !== -1 && index < str.length - 2) {
		throw new Error("Unable to parse base64 string.");
	}
	let missingOctets = str.endsWith("==") ? 2 : str.endsWith("=") ? 1 : 0,
		n = str.length,
		result = new Uint8Array(3 * (n / 4)),
		buffer;
	for (let i = 0, j = 0; i < n; i += 4, j += 3) {
		buffer =
			getBase64Code(str.charCodeAt(i)) << 18 |
			getBase64Code(str.charCodeAt(i + 1)) << 12 |
			getBase64Code(str.charCodeAt(i + 2)) << 6 |
			getBase64Code(str.charCodeAt(i + 3));
		result[j] = buffer >> 16;
		result[j + 1] = (buffer >> 8) & 0xFF;
		result[j + 2] = buffer & 0xFF;
	}
	return result.subarray(0, result.length - missingOctets);
}

export function base64encode(str, encoder = new TextEncoder()) {
	return bytesToBase64(encoder.encode(str));
}

export function base64decode(str, decoder = new TextDecoder()) {
	return decoder.decode(base64ToBytes(str));
}
```

* * *

## 回答 #5

> 赞同：19
> 
> 时间：2014-09-03T12:31:46.210

```
function Uint8ToBase64(u8Arr){
  var CHUNK_SIZE = 0x8000; //arbitrary number
  var index = 0;
  var length = u8Arr.length;
  var result = '';
  var slice;
  while (index < length) {
    slice = u8Arr.subarray(index, Math.min(index + CHUNK_SIZE, length)); 
    result += String.fromCharCode.apply(null, slice);
    index += CHUNK_SIZE;
  }
  return btoa(result);
} 
```

如果你有一个非常大的 Uint8Array，你可以使用这个函数。这适用于 Javascript，在 FileReader readAsArrayBuffer 的情况下很有用。

* * *

## 回答 #6

> 赞同：15
> 
> 时间：2021-02-04T13:00:59.243

# 原生浏览器解决方案*（快！）*

`Uint8Array`使用本机浏览器功能使用**任意数据**（不一定是 UTF-8）对 a 进行 base64 编码：

```
const base64_arraybuffer = async (data) => {
    // Use a FileReader to generate a base64 data URI
    const base64url = await new Promise((r) => {
        const reader = new FileReader()
        reader.onload = () => r(reader.result)
        reader.readAsDataURL(new Blob([data]))
    })

    /*
    The result looks like 
    "data:application/octet-stream;base64,<your base64 data>", 
    so we split off the beginning:
    */
    return base64url.split(",", 2)[1]
}

// example use:
await base64_arraybuffer(new Uint8Array([1,2,3,100,200])) 
```

因为这是使用本机浏览器功能，所以性能是最佳的。它可以在我的计算机上每秒转换 250 MB（[基准脚本](https://gist.github.com/fonsp/a4a2d127f35e72deec14227c1bdf3d04#file-measure_performance-js)），使其**比接受的答案快约 50 倍**。

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2020-06-13T16:35:39.227

# 纯 JS - 没有字符串中间步骤（没有 btoa）

在下面的解决方案中，我省略了转换为字符串。想法如下：

*   加入 3 个字节（3 个数组元素），得到 24 位
*   将 24 位拆分为四个 6 位数字（取值从 0 到 63）
*   使用该数字作为 base64 字母表中的索引
*   极端情况：当输入字节数组时，长度不除以 3，然后添加`=`或`==`结果

以下解决方案适用于 3 字节块，因此适用于大型数组。`atob`将 base64 转换为二进制数组（不带）的类似解决方案是[HERE](https://stackoverflow.com/a/62364519/860099)

```
function bytesArrToBase64(arr) {
  const abc = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"; // base64 alphabet
  const bin = n => n.toString(2).padStart(8,0); // convert num to 8-bit binary string
  const l = arr.length
  let result = '';

  for(let i=0; i<=(l-1)/3; i++) {
    let c1 = i*3+1>=l; // case when "=" is on end
    let c2 = i*3+2>=l; // case when "=" is on end
    let chunk = bin(arr[3*i]) + bin(c1? 0:arr[3*i+1]) + bin(c2? 0:arr[3*i+2]);
    let r = chunk.match(/.{1,6}/g).map((x,j)=> j==3&&c2 ? '=' :(j==2&&c1 ? '=':abc[+('0b'+x)]));  
    result += r.join('');
  }

  return result;
}

// ----------
// TEST
// ----------

let test = "Alice's Adventure in Wondeland.";
let testBytes = [...test].map(c=> c.charCodeAt(0) );

console.log('test string:', test);
console.log('bytes:', JSON.stringify(testBytes));
console.log('btoa            ', btoa(test));
console.log('bytesArrToBase64', bytesArrToBase64(testBytes));
```

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2020-11-05T04:17:09.637

使用以下将 uint8 数组转换为 base64 编码的字符串

```
function arrayBufferToBase64(buffer) {
            var binary = '';
            var bytes = [].slice.call(new Uint8Array(buffer));
            bytes.forEach((b) => binary += String.fromCharCode(b));
            return window.btoa(binary);
        }; 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2018-09-24T16:30:09.887

这是一个 JS 函数：

> 这个函数是必需的，因为 Chrome 不接受 base64 编码的字符串作为 pushManager.subscribe 中 applicationServerKey 的值 [https://bugs.chromium.org/p/chromium/issues/detail?id=802280](https://bugs.chromium.org/p/chromium/issues/detail?id=802280)

```
function urlBase64ToUint8Array(base64String) {
  var padding = '='.repeat((4 - base64String.length % 4) % 4);
  var base64 = (base64String + padding)
    .replace(/\-/g, '+')
    .replace(/_/g, '/');

  var rawData = window.atob(base64);
  var outputArray = new Uint8Array(rawData.length);

  for (var i = 0; i < rawData.length; ++i) {
    outputArray[i] = rawData.charCodeAt(i);
  }
  return outputArray;
} 
```

* * *

## 回答 #10

> 赞同：-1
> 
> 时间：2013-06-12T19:53:18.387

见这里[https://developer.mozilla.org/en-US/docs/Web/JavaScript/Base64_encoding_and_decoding#Appendix.3A_Decode_a_Base64_string_to_Uint8Array_or_ArrayBuffer](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Base64_encoding_and_decoding#Appendix.3A_Decode_a_Base64_string_to_Uint8Array_or_ArrayBuffer)

（使用 Unicode 支持将 Base64 字符串解码为 Uint8Array 或 ArrayBuffer）

* * *

## 回答 #11

> 赞同：-3
> 
> 时间：2012-10-03T13:58:32.643

如果你想要的只是一个base64编码器的JS实现，这样你就可以发回数据，你可以试试这个`btoa`功能。

```
b64enc = btoa(uint); 
```

关于 btoa 的一些快速说明 - 它是非标准的，因此浏览器不会被迫支持它。但是，大多数浏览器都会这样做。大的，至少。`atob`是相反的转换。

如果您需要不同的实现，或者您发现浏览器不知道您在说什么的边缘情况，那么为 JS 搜索 base64 编码器不会太难。

我认为其中有 3 个挂在我公司的网站上，出于某种原因...

* * *

## 回答 #12

> 赞同：-4
> 
> 时间：2018-07-27T03:48:53.013

**npm install google-closure-library --save**

```
require("google-closure-library");
goog.require('goog.crypt.base64');

var result =goog.crypt.base64.encodeByteArray(Uint8Array.of(1,83,27,99,102,66));
console.log(result); 
```

`$node index.js`会将**AVMbY2Y=**写入控制台。

# html - link_to 后的数组 - rails 文件上传模型

> ID：12710004
> 
> 赞同：0
> 
> 时间：2012-10-03T13:52:58.913
> 
> 标签：html, ruby-on-rails, file-upload, template-engine, link-to

我上传文档，然后在我的管理主页上显示所有文档，如下所示：

```
<% @document.each do |document|%> 
     <p><%= link_to document.name, document.contract_url.to_s%></p>
<%end%> 
```

在我的用户主页中，我呈现属于特定用户的文档，如下所示：

```
<%= current_user.documents.each do |document|%>
    <p><%= link_to document.name, document.contract_url.to_s%></p>
<%end%> 
```

但是在用户的主页中，我在链接后得到了这个数组。

```
Document Name (link)
[#<Document id: 2, name: "Document Name", user_id: 2, contract: "contract_name.pdf", created_at: "2012-10-03 13:12:40", updated_at: "2012-10-03 13:35:35">] 
```

我没有在我的管理面板中得到这个数组。我刚刚得到“文档名称”链接。有谁知道这可能是什么原因造成的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T14:08:10.437

```
[#<Document id: 2, name: "Document Name", user_id: 2, contract: "contract_name.pdf", created_at: "2012-10-03 13:12:40", updated_at: "2012-10-03 13:35:35">] 
```

不是哈希，它是一个数组。它是一个具有模型的单个类实例的数组`Document`。

```
#<Document id: 2, name: "Document Name", user_id: 2, contract: "contract_name.pdf", created_at: "2012-10-03 13:12:40", updated_at: "2012-10-03 13:35:35"> 
```

这是以下的返回值（模型的*字符串表示形式）**（试试看`rails console`）*

```
Document.find(2).to_s 
```

在您的代码中，您有

```
<%= current_user.documents.each do |document|%> 
```

您正在打印**集合**`current_user.documents`。这和你做的一样

```
puts current_user.documents 
```

在`rails console`. 摆脱`=`.

```
<% current_user.documents.each do |document|%> 
```

# colors - MDX 颜色表达式基于使用 SSAS 的另一个测量值

> ID：12710006
> 
> 赞同：0
> 
> 时间：2012-10-03T13:53:07.993
> 
> 标签：colors, ssas, mdx, cube, measure

我的多维数据集中有两个指标——第一个显示总收入，第二个数据可用性（表示我们仍然有多少百分比的数据）错过了。是否有可能根据数据可用性对总收入进行着色？

例如：*对于一个组织，总收入为 400 美元，数据可用性低于 80% - 在这种情况下，我想将这 400 美元的立方体显示为灰色。当数据可用性 = 100% 时，我想将此收入显示为黑色。*

谢谢大家的帮助。

问候，康拉德

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T15:21:03.300

您必须指定`FORE_COLOR`属性。这是一个带有计算成员的示例：

```
WITH MEMBER [Measures].[colored revenue] AS 
     [Measures].[summed revenue],
         FORE_COLOR= IIf([Measures].[data availability] < 80, 5066061, 16777215) 
```

# ruby-on-rails-3 - 在任何源中都找不到 mysql2-0.3.11 (Bundler::GemNotFound)

> ID：12710008
> 
> 赞同：1
> 
> 时间：2012-10-03T13:53:16.017
> 
> 标签：ruby-on-rails-3, capistrano, passenger

我正在使用 Capistrano 在暂存环境中部署 Rails 应用程序。`cap deploy:update`工作正常，但乘客不断报告这一点 `Could not find mysql2-0.3.11 in any of the sources (Bundler::GemNotFound)`

我确实执行了`bundle install`，`bundle list`并且`gem list`都将 gem 显示为已安装，并且在工作正常下需要 db 访问的操作`rails console`，所有这些都在服务器上。在我的机器上一切正常。

我正在使用 RVM、Ruby 1.9.3、Rails 3.2.8，这是 deploy.rb 的相关部分：

```
set :rvm_ruby_string, ENV['GEM_HOME'].gsub(/.*\//,"") # Read from local system
require "rvm/capistrano" # Load RVM's capistrano plugin. 
```

是乘客问题，是我对 Capistrano 做错了什么，还是 gem 版本有问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T14:56:10.833

好吧，在我尝试了一切之后，我发现答案很简单：

`bundle install --deployment`（在服务器上）

这在我的应用程序的文件夹中安装了所有必要的宝石，`vendor`现在一切正常

**编辑：** 或者更好，在 deploy.rb 中：

`require "bundler/capistrano"`

# c# - 如何防止物体不应该被切片

> ID：12710010
> 
> 赞同：-5
> 
> 时间：2012-10-03T13:53:24.453
> 
> 标签：c#

我有两个类，一个是基类，第二个是派生类。想要限制对象切片，我该如何使用 C#.net 来做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T14:03:51.730

**更新：**

我最初的想法如下所述被认为不正确：请参阅：[C++ slicing in Java / C#](https://stackoverflow.com/questions/536267/c-slicing-in-java-c-sharp/536290#536290)

* * *

**原答案：**

如果我理解正确，这是一个理论问题。 `REDUCING`切片可以通过不在派生类中定义新成员来完成。

将派生类的实例分配给基类引用类型时会发生切片。在这种情况下，系统不知道在哪里分配新的数据类型，因为它仅在派生类中定义，而不是在基类中定义。

但是没有办法`RESTRICT`，这是假设发生的，它被定义为

> 子类对象赋值的自然且不可避免的结果

[对象切片 - 维基百科](http://en.wikipedia.org/wiki/Object_slicing)

但是，您可以声明一个类`sealed`以防止限制对象切片的继承，因为它将阻止原因（继承），因此您将没有派生类按值分配给基引用。

# asp.net - ASP.NET MVC：从 FileResult 返回大量数据

> ID：12710013
> 
> 赞同：7
> 
> 时间：2012-10-03T13:53:34.843
> 
> 标签：asp.net, asp.net-mvc, controller, out-of-memory

我在 MVC4 中有一个文件浏览器应用程序，它允许您从控制器下载选定的文件。

目前，FileResult 返回文件的 Stream 以及其他响应标头。虽然这适用于较小的文件，但较大的文件会生成 OutOfMemoryException。

我想做的是从控制器传输文件，而不以类似于 WebForms 中的 HttpReponse.TransmitFile 的方式在内存中缓冲。

如何实现？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2016-06-11T02:04:44.547

您可以在返回文件结果之前禁用响应缓冲区。

```
Response.BufferOutput = false;
return File(fileStream, contentType); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-03T14:02:43.843

是的，您可以使用 Web Api 来流式传输文件，请查看这篇文章[在 ASP.NET Web API 中处理大文件](http://www.strathweb.com/2012/09/dealing-with-large-files-in-asp-net-web-api/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-03T14:30:28.583

除了上面描述配置的链接之外，您还可以使用 TransmitFile 来“流式传输”文件。但是，TransmitFile 在某些 http 客户端上有些落后。

这是我将文件“流式传输”到客户端的代码，作为 TransmitFile 的替代方案。请注意，我有一个配置常量可以使用 WriteFile 回滚（与您的 OutOfMemory 问题相同）：

```
 private void RenderContent(string contentType,string fileName, bool inline); 
```

方法代码：

```
FileInfo fi = new FileInfo(fileName);

Response.ClearHeaders();
Response.ClearContent();

Response.ContentType = contentType;
Response.CacheControl = "No-cache";
Response.Cache.SetCacheability(System.Web.HttpCacheability.NoCache);
Response.AddHeader("Content-Length", fi.Length.ToString());
Response.AddHeader("Content-Disposition", (inline ? "inline" : "attachment") + "; filename=\"" + fi.Name + "\"");

if (cAppInfos.Constant["FallBackToWriteFile"] != null && cAppInfos.Constant["FallBackToWriteFile"] == "true")
{
    Response.WriteFile(fileName);
}
else
{
    int chunkSize = 8192;
    byte[] buffer = new byte[chunkSize];
    int offset = 0;
    int read = 0;
    using (FileStream fs = File.Open(fileName, FileMode.Open, FileAccess.Read, FileShare.Read))
    {
        while ((read = fs.Read(buffer, offset, chunkSize)) > 0)
        {
            if (!Response.IsClientConnected)
                break;

            Response.OutputStream.Write(buffer, 0, read);
            Response.Flush();
        }
    }
} 
```

我使用此代码来避免将 pdf 文件流式传输到旧的 acrobat 阅读器插件时出现一些问题。对于内联参数，您可以使用“false”。

另外，您可以在此代码周围使用 try/catch，因为任何 Response.IsClientConnecter/Write/Flush 都可能在客户端断开连接时引发异常。

但是，我没有使用 MVC，并且我不确定这对于该技术是否可以接受，就像您没有使用过 TransmitFile 一样，您可能会遇到与此代码相同的问题。如果您尝试将文件嵌入网页元素（可能是 base64 ？）这不是解决方案。

如果您需要其他方法来实现您的目标，请告诉我有关您的要求的更多信息。

# c# - 二进制搜索算法出现错误 - 使用未分配的局部变量

> ID：12710014
> 
> 赞同：6
> 
> 时间：2012-10-03T13:53:38.133
> 
> 标签：c#, algorithm, variables, unsigned

我正在学习如何从头开始创建二进制搜索算法的教程。但是我收到错误“使用未分配的局部变量'Pivot'”。我是该语言的新手，以前只尝试过更简单的语言。

对于缺乏内部文档和令人震惊的空白使用，我深表歉意。

错误位于使用“//”标记的代码底部附近

这是程序：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;

namespace Binary_Search_2
{
    class Program
    {
        static void Main(string[] args)
        {
            int[] arr = new int[10];

            Random rnd = new Random();

            for (int i = 0; i < arr.Length; i++)
            {
                arr[i] = rnd.Next(1, 10);
            }

            Array.Sort(arr);
            for (int i = 0; i < arr.Length; i++)
            {
                Console.Write("{0},", arr[i]);
            }
            int Start = 0;
            int End = arr.Length;
            int Center = Start + End / 2;

            int Pivot;

            while (arr[6] > 0)
            {
                while (arr[6] < arr[Center])
                {
                    End = Center;
                    Center = (End + Start) / 2;
                    if (Pivot == arr[Center])
                    {
                        Console.WriteLine("The Index is {0}", arr[Center]);
                    }
                    break; 
                }

                while (arr[6] > arr[Center])
                {
                    Start = Center;
                    Center = (End + Start) / 2;
                    if (Pivot == arr[Center])  //**This is where the error occurs.** 
                    {
                        Console.WriteLine("The index is {0}", arr[Center]);
                    }
                }
            }
        }
    }
} 
```

如果这实际上是非常简单的事情，我很抱歉，但我没有人直接教我，我没有想法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-03T13:58:16.027

错误是由这一行引起的：

```
int Pivot; 
```

的值`Pivot`需要在`if`语句中使用之前设置。

这表明您的代码中有一个错误：您检查`Pivot''s value in an`了 if` 语句，但您从未分配给它。浏览教程以找到如下所示的一行：

```
Pivot = ... // <<=== some expression here 
```

很可能，当您按照教程进行操作时，您没有将这一行输入到您的程序中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-03T14:34:42.150

**二进制搜索解释：**

一般的问题只是在一堆元素中找到一个特定的元素。二进制搜索通过将“视觉”切成两半直到找到元素，或者发现它不存在。通过检查当前视野的中心，您可以判断元素是在左侧还是右侧，但为此，必须对元素进行排序。

**理论上的例子（元素存在）：**

假设我们`1`在这个元素数组中寻找：

```
0, 1, 4, 4, 6, 7, 9, 10 
```

在每一步中，我们标记我们的视野，它的中心是这样的：

> *   S = 视野起点
> *   E = 视野结束
> *   M = 视野中间 = (S + E + 1) / 2

```
S           M        E
0, 1, 4, 4, 6, 7, 9, 10 
```

M中的值是6，大于1，所以我们知道1在M的左边。因此，我们将 E 设为 M-1 并重新计算 M：

```
S     M  E
0, 1, 4, 4, 6, 7, 9, 10 
```

M 中的值现在是 4 - 仍然大于 1，所以我们再往左走：

```
 M
S  E
0, 1, 4, 4, 6, 7, 9, 10 
```

M 中的值现在是 1，这是我们正在寻找的值，所以我们完成了！

**理论上的例子（元素不存在）：**

假设我们`5`在这个元素数组中寻找：

```
0, 1, 4, 4, 6, 7, 9, 10 
```

在每一步中，我们标记我们的视野，它的中心是这样的：

> *   S = 视野起点
> *   E = 视野结束
> *   M = 视野中间 = (S + E + 1) / 2

```
S           M        E
0, 1, 4, 4, 6, 7, 9, 10 
```

M中的值是6，大于5，所以我们知道5在M的左边。因此，我们将 E 设为 M-1 并重新计算 M：

```
S     M  E
0, 1, 4, 4, 6, 7, 9, 10 
```

M 中的值现在是 4，小于 5，所以我们知道 5 必须在 M 的右边。因此，我们将 S 设为 M+1 并重新计算 M：

```
 S
         E
         M
0, 1, 4, 4, 6, 7, 9, 10 
```

M 中的值现在是 4，小于 5，所以我们应该再往右走，但是哎呀！S=E 表示如果我们再去任何地方，它们将相互交叉，这意味着我们已经看过那里，因此该元素肯定不存在，并且搜索终止。

**伪代码+解释：**

```
arr = 0, 1, 4, 4, 6, 7, 9, 10;
wanted = 5; // Holds the value to look for
index = -1; // Will hold the index of the found value (-1 means not found)

s = 0; // Initialize S with the beginning of all array
e = arr.Length - 1; // Initialize E with the last element of the array

// As long as we don't cross ourselves
while (s <= e)
{
    // Calculate M (rounded)
    m = (s + e + 1) / 2;

    // Get the current middle value
    curr = arr[m];

    // Check to see if we found our wanted value
    if (curr == wanted)
    {
        index = m;
        break;
    }
    else if (curr < wanted)
    {
        // Wanted value is further to the right
        s = m + 1;
    }
    else
    {
        // Wanted value is further to the left
        e = m - 1;
    }
}

// Here, if index is -1, the wanted value does not exist in arr.
// Otherwise, it holds it's index. 
```

**C# 通用代码：**

```
public int BinarySearch<T>(this ICollection<T> elements, T item) where T : IComparable
{
    // Assumes that elements is already sorted!

    var s = 0;
    var e = elements.Count - 1;

    while (s <= e)
    {
        var m = (s + e + 1) / 2;

        var cmp = elements[m].CompareTo(item);

        switch (cmp)
        {
            case -1:
                s = m + 1;
                break;
            case 1:
                e = m - 1;
                break;
            default:
                return m;
        }
    }

    return -1;
} 
```

**用法：**

```
int[] nums = ...;
List<double> doubles = ...;
SortedSet<People> people = ...; // People compared by ID

var i0 = nums.Sort().ToArray().BinarySearch(5);
doubles.Sort();
var i2 = doubles.BinarySearch(5.3d);
var i3 = people.BinarySearch(new People{ID = 5}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-03T13:59:44.837

声明后，您没有为 Pivot 变量分配任何值。在 if 语句中对其进行评估时，它仍未初始化。

# android - Android - 确保资产在多个设备上清晰可见

> ID：12710016
> 
> 赞同：0
> 
> 时间：2012-10-03T13:53:44.060
> 
> 标签：android

我正在两台设备上测试我的应用程序，目前我正在尝试了解可绘制文件夹的工作原理：

*   Galaxy S2
*   连结 7

徽标都是从`hdpi`文件夹中提取的，例如：`res/drawable-hdpi`我相信这是因为它们具有以下密度。

*   银河 S2 - 219
*   连结 7 - 216

这与谷歌的密度范围有关，确实是`hdpi`：

![在此处输入图像描述](../Images/968e626ee269eba2f7bcbe037bef8cf5.png)

如果您查看我的应用主屏幕徽标的两个屏幕截图：

**Galaxy S2**

![在此处输入图像描述](../Images/ebfb789a5fa44e1987b0e24bfabed3ec.png)

**连结 7**

![在此处输入图像描述](../Images/a248c199f9bb7e882108a9ea9ce214cb.png)

您可以看到 Nexus 7 上的徽标有点模糊，如果 7" 平板电脑来自同一个资源 drawables 文件夹，我该如何为它提供不同的资源？我是否需要在某处的徽标上设置一些大小？

我还读到 Nexus 7 也被归类为，`tvdpi`但我不确定我是否应该为此创建任何文件夹。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-03T14:33:19.530

如果两个设备的密度大致相同，则意味着显示徽标的图像小部件的大小取决于屏幕尺寸，因为徽标的尺寸在较大的屏幕上较大。这可能是它看起来像素化的原因。所以首先要确保图像没有被拉伸。

您可以为各种屏幕尺寸提供替代资源。例如，请参阅[http://developer.android.com/guide/topics/resources/providing-resources.html](http://developer.android.com/guide/topics/resources/providing-resources.html)中的“smallestWidth” 因此，如果您必须这样做，您可以添加与您的徽标图像同名的新图像在`resources/drawable-sw500dp-hdpi/`. 我选择了 500，因为 800 / 1.5 = 533。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-03T14:45:47.407

您应该创建一个`drawable-tvdpi`文件夹并将所有缩放不够干净的图像放入其中。Android 会尝试缩小您的 hdpi 图像，但这并不总是看起来不错。我总是在 hdpi 创建所有图像，然后只为 tvdpi 重新创建缩放不佳的图像。

也就是说，您的图像正在被拉伸。`ImageView`将您的高度和宽度更改为`wrap_content`.

另外...如果您想将资源定位到 7" 平板电脑，abel 在下面所说的使用`-swXXX`是处理它的新标准方式。不幸`-swXXX`的是在 Android 3.2 中引入了.. 意思是#1 7" 平板电脑 Kindle Fire 不会看到该文件夹​​的内容。目前我仍然依靠，`-large`但期待`-swXXX`成为常态的时候。

# java - 使用 Java 多态性限制方法调用的访问

> ID：12710017
> 
> 赞同：3
> 
> 时间：2012-10-03T13:53:48.950
> 
> 标签：java, inheritance, polymorphism, protected

我有一些这样的场景：

```
public class BaseClass {
    protected void protectedMethod(OtherObject object) {
    ...
    }
} 

public class Child1 extends BaseClass {
    @Override
    protected void protectedMethod(OtherObject object) {
        super.protectedMethod(object);
        // Custom Child1 logic
        ...
    }
}

public class Child2 extends BaseClass {
    @Override
    protected void protectedMethod(OtherObject object) {
        super.protectedMethod(object);
        // Custom Child2 logic
        ...
    }
} 
```

然后，当我调用“protectedMethod”迭代“BaseClass”对象数组时，编译器给了我受保护的访问错误：

```
OtherObject other = new OtherObject();

BaseClass[] objects = {
    new Child1(),
    new Child2()
}

for (BaseClass object : objects) {
    object.protectedMethod(other); //this line gives me protected access error
} 
```

但如果我以不同的非多态方式做同样的事情，它工作正常。

```
OtherObject other = new OtherObject();

Child1 child1 = new Child1();
Child2 child2 = new Child2();

child1.protectedAccess(other);
child2.protectedAccess(other); 
```

我不知道这两种方式有什么区别。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-03T13:59:43.283

在 Java 中，“protected”访问限定符不仅允许子类访问，还允许同一包中的其他类访问。

如果您的最后一个代码片段与 Child1 和 Child2 位于同一个包中，那么它将可以访问 Child1 和 Child2 中的受保护方法。

**编辑：**

您可以通过在自己的包中引入自己的基类来解决此问题并保持多态性。

```
 public MyBaseClass extends BaseClass { 
    @Override
    protected void protectedMethod(OtherObject object) {
        super.protectedMethod(object);
    }
 }

 public Child1 extends MyBaseClass { ... }
 public Child2 extends MyBaseClass { ... } 
```

然后使用您自己的基类类型的集合。

```
 NyBaseClass[] objects = {
    new Child1(),
    new Child2()
 }

 for (MyBaseClass object : objects) {
    object.protectedMethod(other); 
 } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T13:59:46.980

带有受保护修饰符的实例变量和方法只能访问`either in derived class`或在`other class in the same package`..

因此，您可能`Base class`在不同的包**pkg1**中，并且您`derived classes`和`class`您使用的`protected method`包在同一个包**pkg2**中，`different`来自`base`类包`pkg1`..

然后通过上述属性，您将能够访问派生类的方法，因为它们在同一个包中..但是，由于它们`base class`在不同的包中，而且不是您的超类`test class`..它无法访问..

**编辑**：-好的，如果您无法更改您的`Base Class`..

```
for (BaseClass object : objects) {
    if (object instanceof Child1) {
        ((Child1)object).protectedMethod(other);

    } else if(object instanceof Child2) {
        ((Child1)object).protectedMethod(other);
    }
} 
```

但是，这会从你的问题中消失所有多态的东西......这只是一种解决方法......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-03T14:01:38.233

我会检查这个条目： [Java Protected Method Accessibility](https://stackoverflow.com/questions/3058976/java-protected-method-accessibility)

受保护仅限于同一个包裹和儿童。如果你需要访问包外的方法，它应该是公开的。

# grails - grails重定向中的异常

> ID：12710020
> 
> 赞同：0
> 
> 时间：2012-10-03T13:53:56.263
> 
> 标签：grails

嗨，我正在尝试使用重定向，`redirect(uri: "/errors/handle500")`但出现以下异常

```
Cannot issue a redirect(..) here. A previous call to redirect(..) has already redirected the response.. Stacktrace follows:
  org.codehaus.groovy.grails.web.servlet.mvc.exceptions.CannotRedirectException: Cannot issue a redirect(..) here. A previous call to redirect(..) has already redirected the response.
  at com.cisco.rms.ErrorsController$_closure1.doCall(ErrorsController.groovy:8)
2012-10-03 18:05:53,414 [http-bio-8080-exec-7] ERROR errors.GrailsExceptionResolver  - CannotRedirectException occurred when processing request: [GET] /rmsportal/changeRequest/listJSONFromService 
```

谁能告诉我为什么它没有重定向。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T16:47:05.677

tim_yates 是对的，你不能调用第二个重定向。也许您想改用[forward](http://grails.org/doc/2.1.0/ref/Controllers/forward.html)，并记住仅重定向并不能阻止 grails 执行其余的控制器代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-12-03T07:04:48.830

这是我的错误样本。

```
if (checkSomething){
    redirect action: 'foo'
}
....
redirect action: 'bar' 
```

这是正确的样本

```
if (checkSomething){
    redirect action: 'foo'
    return
}
....
redirect action: 'bar' 
```

# php - 元标记内容中的法语口音

> ID：12710023
> 
> 赞同：0
> 
> 时间：2012-10-03T13:54:00.800
> 
> 标签：php, html, meta-tags, non-ascii-characters

我在元标记的内容部分有法语口音。例子：

```
<meta name="description" content="à Québec référence" /> 
```

当我查看页面源时，我得到：

```
<meta name="description" content="Ã  QuÃ©bec rÃ©fÃ©rence" /> 
```

我试过使用`&agrave; Qu&eacute;bec r&eacute;f&eacute;rence`，但这就是它在内容部分的显示方式。

我正在使用 `<meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1" />`，我认为如果不弄乱我项目中其他地方的数千个字符，这不会改变。

如何让它看起来像第一个示例，是否有 php 函数可以使用？谢谢。

另外解释一下为什么它会被翻译成“Ã Québec référence”会很好。

**更新**

我想出了一个解决办法。Aptana Studio 和 Notepad++ 等程序以一种奇怪的方式保存字符。我用记事本编辑它并保存它，这似乎解决了问题。感谢您的所有快速回复。非常感激。:)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-03T13:57:08.503

放

```
<meta http-equiv="Content-Type" content="text/html;charset=UTF-8"> 
```

在你的 HEAD 标签之间你也可以在 linux 下使用 'iconv' 来改变文件编码。（推荐的）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-03T13:57:41.473

您需要以正确的形式对文件进行编码，下载 notepad++ 并切换到正确的法语编码。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-03T14:17:19.390

如果你想更新，在 html5 中你必须使用这个

```
<meta charset="UTF-8"> 
```

法语口音 ;)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-03T13:55:11.300

您的文档未正确编码或标题错误。

我建议 ：

*   您检查您的编辑器是否制作了 UTF-8（无 BOM）文档
*   您在 HTML 文件中的标题：您应该有`<meta charset="UTF8" />`
*   如果前两点还不够，您的服务器配置

[这是有关此主题的 w3.org 教程。](http://www.w3.org/International/questions/qa-changing-encoding)

如果您确实无法更改字符集，请确保`meta`标记中指定的字符集是文件之一。在短期内，在您的标题中包含此内容可能会解决您的问题：

`<meta charset="ISO-8859-1" />`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-03T14:08:39.630

如果内容来自mysql数据库。通过查询使用 utf 8 连接`"SET NAMES 'utf8'"`

有时会因为编辑器的文件编码（假定为 UTF-8）而发生。

# asp.net-mvc - MVC4 如何检测移动浏览器？

> ID：12710026
> 
> 赞同：10
> 
> 时间：2012-10-03T13:54:06.933
> 
> 标签：asp.net-mvc, mobile

我刚刚按照 Scott Hanselmans 关于[在 MVC4 中制作可切换站点的教程进行操作。](http://www.hanselman.com/blog/MakingASwitchableDesktopAndMobileSiteWithASPNETMVC4AndJQueryMobile.aspx)

由于没有 VS2102，我正在使用 Opera 移动模拟器进行测试。

在模拟器中渲染我的页面时`Request.Browser.IsMobileDevice`是错误的，尽管它仍然渲染移动视图。

![在此处输入图像描述](../Images/2a3778650e0dbb28b8c631c93d60488d.png)

我的问题是：

*   为什么/如何 MVC4 决定渲染移动视图？看起来不像`Request.Browser.IsMobileDevice`。
*   View Switcher 会显示在真实的移动设备上吗？

**编辑：**

我想我意识到了我的错误：

为了让它与歌剧模拟器一起工作，我添加了一个`MobileDisplayMode`如下所述的： [ASP.NET MVC 4 Mobile Features](https://stackoverflow.com/questions/9614576/asp-net-mvc-4-mobile-features)

似乎该解决方案可以正确渲染，但`Request.Browser.IsMobileDevice`无法正常工作。有`ViewContext.HttpContext.GetOverriddenBrowser().IsMobileDevice`没有办法解决这个问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-18T11:55:30.157

MVC 通过将 HTTP 请求标头与 C:\Windows\Microsoft.NET\Framework64\v4.0.30319\Config\Browsers 中存在的浏览器配置文件匹配来识别移动设备

asp.net MVC 浏览器检测方法不是很好，所以我建议使用某种 DDR

# android - 如何使用联系人 ID 删除特定联系人？

> ID：12710028
> 
> 赞同：2
> 
> 时间：2012-10-03T13:54:12.287
> 
> 标签：android, contacts

我正在尝试从电话中删除特定联系人。我可以删除完整的联系人。如何使用联系人 ID 删除特定联系人。我想删除完整的数据，包括名字、姓氏、电话号码、电子邮件、笔记等...

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2016-08-08T14:24:25.867

如果您有contactId，则不需要使用**Contacts.CONTENT_LOOKUP_URI 。**事实上，我尝试使用它删除一些联系人的问题。

如果您有contactId，正确的方法是直接使用ContactsContract.Contacts.CONTENT_URI：

```
 Uri uri = Uri.withAppendedPath(ContactsContract.Contacts.CONTENT_URI,contactId);
    int deleted = context.getContentResolver().delete(uri,null,null);
    return deleted>0; 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-03T16:13:16.960

试试下面的代码：

```
 final ArrayList ops = new ArrayList();
        final ContentResolver cr = getContentResolver();
        ops.add(ContentProviderOperation
                .newDelete(ContactsContract.RawContacts.CONTENT_URI)
                .withSelection(
                        ContactsContract.CommonDataKinds.Phone.CONTACT_ID
                                + " = ?",
                        new String[] { selected_contact_IDfromlist })
                .build());
        AlertDialog alertDialog = new AlertDialog.Builder(this).create();
        alertDialog.setTitle("Delete This Contact!");
        alertDialog.setMessage("Are you Sure you want to delete this contact?");
        alertDialog.setButton(getString(R.string.callLog_delDialog_yes), new DialogInterface.OnClickListener() {    // DEPRECATED
          public void onClick(DialogInterface dialog, int which) {
            try {
                cr.applyBatch(ContactsContract.AUTHORITY, ops);
                background_process();
                ops.clear();
            } catch (OperationApplicationException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();

            } catch (RemoteException e) {
                // System.out.println(" length :"+i);
            }
                return;
        } }); 
        alertDialog.setButton2(getString(R.string.callLog_delDialog_no), (DialogInterface.OnClickListener)null);    // DEPRECATED
        try {
            alertDialog.show();
        }catch(Exception e) {
            //              Log.e(THIS_FILE, "error while trying to show deletion yes/no dialog");
        } 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-04T01:16:35.680

在清单中添加这个

```
<uses-permission android:name="android.permission.WRITE_CONTACTS" /> 
```

按 ID 码删除联系人

```
private void deleteContactById(long id) {
    Cursor cur = resolver.query(ContactsContract.Contacts.CONTENT_URI, null, ContactsContract.Contacts._ID + "="
            + id, null, null);
    if (cur != null) {
        while (cur.moveToNext()) {
            try {
                String lookupKey = cur.getString(cur
                        .getColumnIndex(ContactsContract.Contacts.LOOKUP_KEY));
                Uri uri = Uri.withAppendedPath(ContactsContract.Contacts.CONTENT_LOOKUP_URI,
                        lookupKey);
                resolver.delete(uri, ContactsContract.Contacts._ID + "=" + id, null);
            } catch (Exception e) {
                Log.e(TAG, "deleteContactById: ", e);
            }
        }
        cur.close();
    }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-07-01T06:32:16.460

```
public void deleteContact(Context context, String localContactId)
{
    ContentResolver cr = context.getContentResolver();
    String rawWhere = ContactsContract.Contacts._ID + " = ? ";
    String[] whereArgs1 = new String[]{localContactId};
    Cursor cur = cr.query(ContactsContract.Contacts.CONTENT_URI,
            null, rawWhere, whereArgs1, null);

    if(cur != null && cur.getCount() > 0) {
        while (cur.moveToNext()) {
            try{
                String lookupKey = cur.getString(cur.getColumnIndex(ContactsContract.Contacts.LOOKUP_KEY));
                Uri uri = Uri.withAppendedPath(ContactsContract.Contacts.CONTENT_LOOKUP_URI, lookupKey);
                cr.delete(uri, null, null);

            }
            catch(Exception e)
            {
                System.out.println(e.getStackTrace());
            }
        }
    }
    if(cur != null)
        cur.close();
} 
```

# php - Nginx 上的 Yii 框架 - 页面不加载

> ID：12710029
> 
> 赞同：0
> 
> 时间：2012-10-03T13:54:15.947
> 
> 标签：php, mysql, nginx, yii

我正在尝试合作`Nginx`和`Yii`. 我已将`nginx root`目录设置`yii webapp`为 -`yiic webapp /usr/share/nginx/app`

在这个目录中，我有一些默认文件，如 yii's `index.php`，`index-test.php`以及基本文件夹，如`protected`、和. 我也有自己的文件；打印和打印表中的一些列。当我点击时，我能够显示 phpinfo，但我无法显示- `themes``css``images``phpinfo.php``phpinfo()``getAttribute.php``mysql``history``http://localhost/phpinfo.php``getAttribute.php`

```
#getAttribute.php
<?php
public function attributeLabels() {
return array(
    Yii::t('app','model.history.sfExternalfield')=>array(
            'External Field'=>Yii::t('app','model.history.sfExternalfield'),
            'Delivery Status'=>Yii::t('app','model.history.deliveryStatus'),
    )
);
}
?>
<html>
<body><?php
print_r(attributeLabels()); 
?></body>
</html>
<?php ?> 
```

这段代码有问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T06:27:51.407

代码有两个问题：

1.  正如我在评论中提到的，没有类就不能拥有`public`关键字，因此您必须先将其删除。

2.  其次，由于该文件不是通过 index.php 访问，而是直接访问，这意味着框架尚未加载/初始化。因此，您还没有访问该`Yii`课程的权限。为此，您必须包含 Yii 类，有点像这样：

    ```
    $yii='path/to/framework/yii.php';
    require_once($yii);
    // now Yii is available and you can call Yii::t(); 
    ```

# python - current_user.is_authenticated() 上的 AttributeError

> ID：12710036
> 
> 赞同：3
> 
> 时间：2012-10-03T13:54:36.713
> 
> 标签：python, flask

我正在使用 Flask-Login，我想通过调用 current_user.is_authenticated() 来检查用户是否已登录。

我的 Flask 应用程序被组织成蓝图，其中包含一个主`__init__.py`文件，用于设置我的应用程序、设置蓝图和初始化 Flask-Login。我有一个脚本，`run.py`位于一个目录中，`__init__.py`它实例化应用程序并在调试模式下运行它。

`__init.py__`看起来（部分）像这样：

```
from flask import Flask, session, request, render_template                                                            
from flask.ext.login import LoginManager, current_user

from panel.views import dash, projects

from panel.users.models import User, AnonymousUser

app = Flask(__name__)
app.config.from_object("configure") 

login_manager = flask_login.LoginManager()
login_manager.init_app(app)
login_manager.login_view = "/signin"
login_manager.anonymous_user = AnonymousUser
@login_manager.user_loader
def load_user(str_id):
    return User.user_loader(str_id)

# Register all blueprints here.
app.register_blueprint(dash.bp, url_prefix="/dash")
app.register_blueprint(projects.bp, url_prefix="/projects")

logging.warning(current_user.is_authenticated()) 
```

当我运行它时，从`run.py`（部分看起来像这样）：

```
from panel import app 

app.run(host='0.0.0.0', debug=True) 
```

引发此异常：

```
Traceback (most recent call last):
  File "run.py", line 5, in <module>
    from panel import app
  File "/opt/www/panel/panel/__init__.py", line 40, in <module>
    logging.warning(current_user.is_authenticated())
  File "/opt/virtualenvs/coefficient/lib/python2.6/site-packages/werkzeug/local.py", line     336, in __getattr__
    return getattr(self._get_current_object(), name)
  File "/opt/virtualenvs/coefficient/lib/python2.6/site-packages/werkzeug/local.py", line 295, in _get_current_object
    return self.__local()
  File "/opt/virtualenvs/coefficient/lib/python2.6/site-packages/flask_login.py", line 403, in <lambda>
    current_user = LocalProxy(lambda: _request_ctx_stack.top.user)
AttributeError: 'NoneType' object has no attribute 'user' 
```

因为为简洁起见我省略了一些行，所以该回溯中的行号与我发布的代码不匹配，但您可以看到该行`logging.warning(current_user.is_authenticated())`似乎是发生错误的地方。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-04T22:29:46.593

你不能打电话

```
current_user.is_authenticated() 
```

在方法/视图之外，因为方法/视图之外的代码将在请求之外运行。

如果您不在请求中，则无法`current_user`检查身份验证。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-11-21T17:16:29.210

可能你可以试试

```
login_manager.init_app(app) 
```

[烧瓶登录](http://flask-login.readthedocs.org/en/latest/#configuring-your-application)

# php - PHP preg_match 模式问题

> ID：12710038
> 
> 赞同：1
> 
> 时间：2012-10-03T13:54:38.787
> 
> 标签：php, regex, preg-match

我正在努力使这种模式正常工作，但我无法让它发挥作用。基本上，我想验证一个只能接受字母、数字和以下字符的字符串：`@!?_;:-,.`

这是我到目前为止的源代码：

```
<?php
  $test_string = '1234bcd@!?_;:-,.';
  echo preg_match( "/^[a-z0-9@!?_;:,.]{4,12}$/i", $test_string );
?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T13:57:07.490

您正在尝试打印一个整数，这将无法实现您想要做的事情。尝试这个：

```
if( preg_match( "/^[a-z0-9@!?_;:,.]{4,12}$/i", $test_string )) {
    echo 'valid string!';
} else {
    echo 'invalid!';
} 
```

请注意，您的正则表达式认为字符串是有效的，如果它们是：

*   长度在 4 到 12 个字符之间
*   仅由字母字符、数字和您包含的其他字符组成。

另请注意，您的输入字符串应该是无效的，不仅因为它太长，而且因为它包含一个破折号，您的正则表达式不支持它：

```
1234bcd@!?_;:-,.
             ^
             No match 
```

要将其包含在您的正则表达式中，请将其放在正则表达式中字符类的末尾：

```
preg_match( "/^[a-z0-9@!?_;:,.-]{4,12}$/i", $test_string )
                              ^ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T13:59:56.960

一些字符由正则表达式保留，例如 . ? 等将它们与反斜杠一起使用

```
if( preg_match( "/^[a-z0-9@!\?_;:,\.\-]{4,12}$/i", $test_string )) {  
  ...
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-03T14:10:04.397

这种模式有效：

```
$test_string = '1234bcd@!?_;:-,.';

if(preg_match('/^[a-z0-9@!\?_;:,\.\-]{4,12}$/i', $test_string))
{
    echo 'Valid';
} 
```

但在这种情况下`1234bcd@!?_;:-,.`，它不会因为输入字符串长度为 16（不是 4 到 12 个字符之间的长度）。

顺便说一句，总是转义元字符。您将在[此处](http://www.php.net/manual/en/regexp.reference.meta.php)找到完整列表。

# eclipse - eclipse项目的哪些文件应该提交到github

> ID：12710039
> 
> 赞同：14
> 
> 时间：2012-10-03T13:54:50.130
> 
> 标签：eclipse, git, github, egit

我应该将哪些文件提交到 github 以使其成为有效的 Eclipse 项目？

我只是提交我的源文件和包，但是当我尝试重新创建项目时，我收到此错误“找不到项目”：

![在此处输入图像描述](../Images/11512cc5dd9abaaa19a9142c4751cafa.png)

我想我还需要提交 .project 文件吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-03T14:01:20.617

你需要提交你的：

*   `.settings`目录
*   `.classpath`文件
*   `.project`文件

更好的想法是为您的项目使用 maven，这样您将拥有所有 IDE（eclipse、netbeans、ideaj ...）的通用配置，而无需推送您的 eclipse 特定配置。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-04-23T00:39:39.747

对于典型的 Java SE Eclipse 项目，您必须提交 .project 和 .classpath 文件，但不是必需的 .settings 文件夹。我通过从我的 Windows 环境提交一个项目并将其克隆到我的 Linux 环境来测试这个场景；Eclipse 导入并运行此项目，没有任何错误。希望这个技巧可以帮助您减少提交一个文件夹（.setting）。

# php - 给定 MySQL 的返回数，我如何找到平均 AGI？

> ID：12710041
> 
> 赞同：1
> 
> 时间：2012-10-03T13:54:57.667
> 
> 标签：php, mysql, math, statistics

这些数据可从美国国税局免费获得，按邮政编码计算 2008 年的收入数据。

A00100 是调整后的总收​​入（又名 AGI），agi_class 是调整后的总收​​入的大小。范围从 1 到 7：

```
1 = 'Under $10,000'
2 = '$10,000 under $25,000'
3 = '$25,000 under $50,000'
4 = '$50,000 under $75,000'
5 = '$75,000 under $100,000'
6 = '$100,000 under $200,000'
7 = '$200,000 or more ' 
```

“退货数量”是该 agi_class 的纳税申报数量。

```
mysql> select A00100,zipcode,agi_class,N1 as 'Number of Returns' from taxbyzip2008 where     zipcode="10021";
+-------------+---------+-----------+-------------------+
| A00100      | zipcode | agi_class | Number of Returns |
+-------------+---------+-----------+-------------------+
|     -954234 | 10021   |         1 |              3589 |
|    43243455 | 10021   |         2 |              2521 |
|   149940475 | 10021   |         3 |              3939 |
|   243853640 | 10021   |         4 |              3936 |
|   262995399 | 10021   |         5 |              3025 |
|   751195421 | 10021   |         6 |              5333 |
| 10677437299 | 10021   |         7 |              7477 |
+-------------+---------+-----------+-------------------+ 
```

我需要得出每个邮政编码的**平均调整后总收入。**我怎样才能在 MySQL 中做到这一点？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T13:56:32.020

```
select zipcode, 
       avg(A00100) as average_income
from taxbyzip2008 
group by zipcode 
```

# python - 如何创建自定义 GtkHScale 滑块？

> ID：12710047
> 
> 赞同：3
> 
> 时间：2012-10-03T13:55:33.263
> 
> 标签：python, user-interface, gtk, glade

我目前正在设计一个 GUI，使用 Python 2.6、Glade-3 和 GTK 在屏幕上显示图像。它使用 2 个滑块（2 x GtkHScale）来“剪辑”任何亮/暗区域的图像。（如下所示）

上夹 ----------------|====

下剪辑 ===|------------------

我认为如果将两个滑块组合到一个 GtkHScale 上，在两个滑块之间给出“蓝线”以显示图像的哪些位被剪切，我认为它看起来会更整洁。（很像下面的模型）

剪辑----|============|----

我正在使用 Glade-3 创建滑块，但我认为这种自定义必须包含在 Python 代码中，而不是 Glade 文件中？关于如何创建自定义 GtkHScale 的任何想法？

# jquery - 在可编辑的 jquery 数据表上设置只读属性

> ID：12710049
> 
> 赞同：1
> 
> 时间：2012-10-03T13:55:34.317
> 
> 标签：jquery, datatable

我正在使用 jQuery 可编辑数据表。我希望表中的某些字段是不可编辑的。所以我使用类名`readOnly`并在 CSS 中定义如下：

```
.readOnly {
   readonly: true;
} 
```

但是数据字段没有变成`readonly`：该列中的数据是可编辑的。

我应该如何克服这个？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T15:32:04.393

使用类名

```
 class="read_only" 
```

这会成功的。

# ios - 错误 MT0014：iOS 6 不支持构建面向 ARMv6 的应用程序

> ID：12710051
> 
> 赞同：4
> 
> 时间：2012-10-03T13:55:34.590
> 
> 标签：ios, xamarin.ios, monodevelop, xcode4.5

刚刚将 xcode 和 monodevelop/monotouch 升级到最新版本（见下文），在为 iPhone 作为目标构建时突然出现此错误（对于模拟器编译良好）。我已经尝试了在项目选项对话框中将“支持的架构”设置为 ARMv6、ARMv7 和 ARMv6 + ARMv7 以及将“部署目标”设置为 5.0 的所有组合，但这似乎并不重要 - 我总是得到相同的结果错误：

```
Error MT0014: iOS 6 does not support building applications targeting ARMv6 (MT0014) 
```

MonoDevelop 3.0.4.7 Monotouch：6.0.2 Mac OS X 10.7.5 Xcode 4.5 (1839)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-03T14:40:42.517

这是因为 Xcode 4.5 不允许您为 ARMv6 构建（缺少二进制文件）。

如果您使用较旧的 Xcode 版本（例如 4.4），您仍然可以为 ARMv6 构建。这个旧版本的 Xcode 可以与 4.5 共存（并排）。

请注意，您需要更改**SDK 位置**（在 MD 首选项中）以指向您的 Xcode 4.4 安装，才能正常工作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-03T15:18:22.073

除非您真的关心古老的设备（armv6 = iPhone 2G/3G，iPod 1G/2G），否则不要再为 armv6 烦恼了。

# mysql - mysql 管理产品大小的最佳方法

> ID：12710054
> 
> 赞同：3
> 
> 时间：2012-10-03T13:55:44.843
> 
> 标签：mysql, database, inventory, stock

我正在开发产品数据库，对于尺寸我创建了一个单独的表 PRODUCT_SIZE(id,sizetext)

例如 (1,'Small') ,(2,'Large'), (3,'Extra Large'),...

我提供了这些尺寸列表作为复选框，当添加产品时，可以针对当前产品选择所有可能的尺寸。

例如选择 T 恤、小码和大码。

这 2 种尺寸适用于每个购买的新股票条目。现在我才知道，可以有不同的尺寸单位，有些物品可以英寸，有些可以公斤，有些可以米。

我有一个改变的解决方案：改变表

`PRODUCT_SIZE(id,sizetext, UNitType);`

现在可以是：(1,'5','KG') ,(2,'10','KG'), (3,'2.5'.'Inches'),...

有没有更好的方法，建议？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-03T16:55:29.930

似乎您将“衣服尺寸”、“重量”和“长度”强加到一个“尺寸”属性中。

试试这些表：

```
 product (product_id, name)
    "Nike t-shirt"

  attribute_group (attribute_group_id, name)
    "Shirt size", "Weight", "Length", etc.

  attribute_value (attribute_value_id, attribute_group_id, name)
    "Shirt size" would have rows for "Small", "Large", etc.

  product_attribute (product_id, attribute_value)
     "Nike t-shirt" is "Large" 
```

也向属性值添加“显示顺序”（因此“小”可以在“大”之前显示）。

也为您的其他属性执行此操作。

我已经为一个生产站点做了这个，我认为它运作良好。

祝你好运。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T13:58:45.720

与其为此制作一个单独的表，不如将所有下拉选项放在应用程序范围变量中？然后，您可以将该数据作为字符串直接添加到产品的字段中，并以编程方式处理不同的选项/单位。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-01T11:28:59.370

我做了一个数据库存储衣服的尺寸有几种类型。一篇文章的尺寸像 xs sml 其他是 26 27 28 29 30 等等。我决定这样做：

```
# on one side in the script i define size types and names;
$sizeTypes[1] = [XS, S, M, L];
$sizeTypes[2] = [29, 30, 31, 32];
#The and so on
#and on the other side in the database, there are just two columns

size_type_id(int) | size_qty |

# so if I have one article with 3 pieces of size S 2 pieces of size M and 5 pieces of size L the database will store:
size_type_id|  size_qty     |
1           |0:0;1:3;2:2;3:5| 
```

然后在脚本中我只是翻译它，以便类型 1 的 0 是类型 1 的 XS 1 是类型 2 的 S 2 是 31 等等

# c# - C# 对象多态性的 PODIO JSON 馈送

> ID：12710056
> 
> 赞同：5
> 
> 时间：2012-10-03T13:55:52.063
> 
> 标签：c#, .net, json, podio

我正在编写一个程序来从 Podio 读取 JSON 字符串，然后将内容转换为 c# 对象。

但是在阅读提要时，我遇到了一种奇怪的格式；在对象的同一层级中，字段 [value] 的值有时是字符串，有时是复杂对象。

示例如下。

有些地方就像

```
"values":[
    {
        "value":"Bug on User Interface, Ajax sometimes does not load properly"
    }
],
"type":"text" 
```

然后在下一个项目，在层次结构的同一级别，就像

```
"values":[
    {
        "value":{
            "perma_link":"https:\/\/ds-test.podio.com\/myworkspace\/files\/23529948",
            "mimetype":"image\/jpeg",
            "hosted_by":"podio",
            "name":"217820_274164679355286_689330144_n.jpg",
            "hosted_by_humanized_name":"Podio",
            "description":null,
            "thumbnail_link":"https:\/\/files.podio.com\/23529948",
            "link":"https:\/\/files.podio.com\/23529948",
            "file_id":23529948,
            "size":39698
        }
    }
],
"type":"image" 
```

注意“type”的值：首先是“text”，然后是“image”。由于它们位于层次结构的同一级别，我不知道如何为它们设计对象以使该`DataContractJsonSerializer.Read`方法顺利​​运行。

问候，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T15:48:19.637

首先，我不是 JSON 专家（我曾涉足过），虽然我是一名称职的 C#.net 程序员，但我从未使用过来自 .NET 的 JSON。我原以为你现在至少有一个好的、明确的答案，但由于你还没有答案*，*我会提供价值 0.02 美元的答案，以防它对你有帮助。

根据[http://www.json.org](http://www.json.org) ，这是一种*有效*的格式。（我不确定说这是一种“奇怪的格式”，你是说你认为它无效，或者只是你认为它不寻常）。

在您描述的两个示例中，它们之间存在一致的模式：

```
<string1> : <value1>,
<string2> : <value2> 
```

在所有情况下：

*   `<string1> == "Values"`,
*   `<string2> == "type"`,
*   `<value1> == [ <object> ]`（即`<value1>`始终是一个包含单个 的数组`<object>`），并且
*   `<value2> == "a string describing the structure of the <object>"`

此外，`<object>`when 是一个字符串，或者它是一个更复杂的对象，它在一个逗号分隔的列表`<value2> == "text"`中包含 1 个或多个对 when 。`<string> : <value>``<value2> != "text"`

那么，如何解析，假设 .Net 无法处理这种开箱即用的标准格式（我很惊讶它不能）......

*   *仅为您感兴趣的*每个对象构建一个类定义。您应该能够从 JSON 中收集所需的结构。

*   您是否考虑过运行字符串操作来“查找/提取”您感兴趣的类型，并`DataContractJsonSerializer(Type)`为每种类型设置显式？

*   否则，更一般地说，您应该能够将`<object>`when `<value2> != "text"`， as a中的所有内容处理`Dictionary<string,string>`，然后根据您在指定的类型`<value2>`（甚至“手动”将它们转换为您的对象）根据需要逐个处理它.

* * *

此外，我注意到 .NET 4.5 引入了这种重载：

[DataContractJsonSerializer 构造函数（类型，DataContractJsonSerializerSettings）](http://msdn.microsoft.com/en-us/library/hh194418.aspx)

设置如下：

*   [DataContractJsonSerializerSettings.UseSimpleDictionaryFormat](http://msdn.microsoft.com/en-us/library/system.runtime.serialization.json.datacontractjsonserializersettings.usesimpledictionaryformat.aspx) ,

*   [DataContractJsonSerializerSettings.DataContractSurrogate](http://msdn.microsoft.com/en-us/library/system.runtime.serialization.json.datacontractjsonserializersettings.datacontractsurrogate.aspx)。

特别有趣的是：

*   [DataContractJsonSerializerSettings.KnownTypes](http://msdn.microsoft.com/en-us/library/system.runtime.serialization.json.datacontractjsonserializersettings.knowntypes.aspx)

> ...使用此实例序列化的对象图中可能存在的类型集合 DataContractJsonSerializerSettings。

这些可能是相关的，但我找不到任何关于这些设置的更多信息——也许你可以尝试一下。

# google-chrome-extension - 为什么在应用自定义图标后浏览器操作的默认图标会重新出现？

> ID：12710061
> 
> 赞同：4
> 
> 时间：2012-10-03T13:56:03.307
> 
> 标签：google-chrome-extension, browser-action

Chrome 中的浏览器操作图标有一个奇怪的问题。清单中定义了浏览器操作的默认图标。图标显示正确。然后在后台页面中，在某些条件下，我调用：

```
chrome.browserAction.setIcon({path:"green_32.png", tabId:request.tabId}); 
```

此图标闪烁片刻，然后变回默认图标。活动选项卡及其 id 传递以`setIcon`在所有过程中保持不变。

有人可以提出一个想法，为什么会发生这种情况？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-03T17:35:19.400

图标每次都重置为默认状态的原因是因为我在选项卡完成加载并获得*“完成”*状态`setIcon` **之前调用。**

 *[我想在选项卡](http://developer.chrome.com/extensions/tabs.html)或[浏览器操作](http://developer.chrome.com/extensions/browserAction.html)的文档中应该有一些关于此的信息，但我没有找到它：默认图标实际上是按设计应用到完成加载后的特定页面。我将调用`setIcon`移到`tabs.onUpdated`处理程序中，现在自定义图标仍然存在。

这与我之前的理解相矛盾，即浏览器操作图标是基于每个选项卡设置的，而与加载到选项卡中的页面及其状态无关。

@KonradDzwinel 提供了一个简单的扩展来测试案例（查看评论）。我更改了它的*background.js*脚本来演示这种行为：

```
chrome.browserAction.onClicked.addListener(function(tab)
{
  chrome.browserAction.setIcon({path: 'gfx/icon2.png', tabId: tab.id});
}); 
```

要重现此行为，请在任何选项卡上按浏览器操作图标进行更改。然后刷新页面。结果，浏览器操作图标重置为默认值。

如果在某些文档中解释了这种行为，请在评论中写下来，我会更新答案。从我目前所读的内容来看，我确信在创建新选项卡时为其设置了默认图标，然后对其进行的任何更改都完全在扩展程序的控制之下。*

# node.js - 将 Express() 与 TypeScript 一起使用

> ID：12710063
> 
> 赞同：7
> 
> 时间：2012-10-03T13:56:05.167
> 
> 标签：node.js, express, typescript

我想在 TypeScript 中使用最新版本的 Expess 和 node.js。microsoft 在示例中提供的 express.d.ts 似乎是基于 3.0.x 之前的版本构建的。在以前的版本中，你可以做

```
var app = express.createServer() 
```

但在 3.0.x 之后你应该这样做：

```
var app = express(); 
```

Express.d.ts 不支持这个......我发现了一个 hack：我在 Express.d.ts 中添加了以下行：

```
export function(): any; 
```

在`app.ts`我想创建应用程序对象时，我执行以下操作：

```
var app = <express.ExpressServer>express(); 
```

这似乎解决了这个问题，它的编译没有错误，而且我也得到了智能感知支持。然而这是一个黑客......首先为什么我不能写这样的东西？

```
export function(): ExpressServer; 
```

这是解决此问题的推荐方法吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-08-14T02:42:31.000

相当老的讨论，但我最近遇到了同样的问题，发现有一个新`express.d.ts`的可以正确支持 express 3 在[distinctlyTyped](https://github.com/DefinitelyTyped/DefinitelyTyped/tree/master/types/express)网站上。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-03T14:09:51.090

您应该能够添加此环境函数声明以`express.d.ts`获得您想要的。

`declare function express(): ExpressServer;`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-05-01T11:32:23.627

如果你`express`这样声明：`import * as express from "express"`，你会在运行时得到这个错误，这样声明：`const express = require "express"`，不会抛出任何错误。

另外，不要忘记将`app`变量或属性类型声明为`express.Application`

* * *

## 回答 #4

> 赞同：-4
> 
> 时间：2015-03-22T18:12:05.073

这是一个示例项目 - TypeScript 中的 Express 4.x 应用程序：[https ://github.com/czechboy0/Express-4x-Typescript-Sample](https://github.com/czechboy0/Express-4x-Typescript-Sample)

# php - 我想使用 PHP 将随机生成的文本添加到 PDF 文件中

> ID：12710064
> 
> 赞同：0
> 
> 时间：2012-10-03T13:56:04.700
> 
> 标签：php

请有人帮助如何使用 PHP 将随机文本添加到现有 PDF 文件中的战略位置？我正在使用 rand() 函数来生成随机文本/代码。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T14:02:28.733

使用此代码，您每次尝试都会获得 32 个字符的随机字符串。

```
$strRandom = md5(microtime()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T14:47:42.807

您可以使用 sha1、md5、uniqid 函数生成随机文本。但是您必须使用 pdf 控制器类。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-03T14:01:17.080

您不能只将文本插入现有的 pdf，您需要生成新的 pdf，例如使用 phps 集成的 pdf 功能或免费可用的 pdf 库之一。

IE。PDFlib、wktmltopdf、zendpdf

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-03T14:01:26.990

据我了解，PHP 有 pdf 解析器。检查一下[是否有 PHP 的 PDF 解析器？](https://stackoverflow.com/questions/1251956/is-there-a-pdf-parser-for-php)

比尔·卡尔文说：

Zend_Pdf 是 Zend 框架的一部分。他们的手册指出：

[Zend_Pdf](http://framework.zend.com/manual/1.12/en/zend.pdf.html)组件是一个 PDF（可移植文档格式）操作引擎。它可以加载、创建、修改和保存文档。因此，它可以帮助任何 PHP 应用程序通过修改现有文档或从头开始生成新文档来动态创建 PDF 文档。

# python - Paster需要从程序目录运行？

> ID：12710065
> 
> 赞同：0
> 
> 时间：2012-10-03T13:56:07.243
> 
> 标签：python, pylons, subdirectory, paster

我正在运行一个使用主管来监控一些 Python 应用程序的 Solaris 服务器。

以前，我可以运行以下命令：

```
paster serve /opt/pyapps/menuadmin/prod.ini 
```

从服务器上的任何目录。最近出现了一些问题，并且 /opt 文件夹是从以前的备份中恢复的。此文件夹包含所有应用程序，包括主管。

现在我们面临的问题是由于 Pylons 中的“版本冲突”，主管不会启动应用程序。

这就是它变得奇怪的地方，为什么会发生这些错误是没有意义的。

如果我从程序目录之外运行 paste 命令，它将引发版本冲突错误。例如：

```
cd /
paster serve /opt/pyapps/menuadmin/prod.ini
Traceback (most recent call last):
  File "/opt/csw/bin/paster", line 8, in <module>
    load_entry_point('PasteScript==1.7.5', 'console_scripts', 'paster')()
  File "/opt/csw/lib/python2.6/site-packages/PasteScript-1.7.5-py2.6.egg/paste/script/command.py", line 93, in run
    commands = get_commands()
  File "/opt/csw/lib/python2.6/site-packages/PasteScript-1.7.5-py2.6.egg/paste/script/command.py", line 135, in get_commands
    plugins = pluginlib.resolve_plugins(plugins)
  File "/opt/csw/lib/python2.6/site-packages/PasteScript-1.7.5-py2.6.egg/paste/script/pluginlib.py", line 82, in resolve_plugins
    pkg_resources.require(plugin)
  File "/opt/csw/lib/python2.6/site-packages/setuptools-0.6c9-py2.6.egg/pkg_resources.py", line 626, in require
  File "/opt/csw/lib/python2.6/site-packages/setuptools-0.6c9-py2.6.egg/pkg_resources.py", line 528, in resolve
pkg_resources.VersionConflict: (Pylons 0.9.7 (/opt/csw/lib/python2.6/site-packages/Pylons-0.9.7-py2.6.egg), Requirement.parse('Pylons>=0.10')) 
```

但是如果我从程序目录中运行命令，它将运行良好。例如：

```
cd /opt/pyapps/menuadmin/
paster serve /opt/pyapps/menuadmin/prod.ini
Starting server in PID 29902.
serving on http://127.0.0.1:3002 
```

我绝对无法理解为什么会发生这种情况！

**任何想法或意见都表示赞赏！！！！**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T08:14:05.563

根据您所说的，您似乎正在运行两个不同版本的 paste 。第一个版本运行较旧的 Pylons 包 0.9.7，而第二个版本具有满足或超过您应用程序要求的更新版本。

我要做的是首先检查您正在运行哪个版本的贴图。从项目外部运行：

```
which paster 
```

然后在项目目录中再次运行相同的命令并比较结果。我怀疑你会发现路径不同。如果是这种情况，那么您需要做的就是更新第一个版本的 pylons 版本，我猜这是全局安装。

但是，正如其他人所评论的那样，在 virtualenv 中运行应用程序会更好，特别是如果您似乎表明您有多个 virtualenv 并因此有多个项目。相信我，当我说它会让你以后免于头疼的时候，从最初没有这样做的人身上。

# jquery - 在动画 jquery 中添加淡入淡出切换效果

> ID：12710067
> 
> 赞同：1
> 
> 时间：2012-10-03T13:56:22.083
> 
> 标签：jquery, toggle

我有一个按钮，单击该按钮可旋转按钮并滑动切换段落。我想添加一个不透明动画切换效果，所以当单击按钮时，它会旋转并在 0.3 和 0.65 的不透明度之间切换，但我不能 100% 确定最好的方法是什么。不幸的是，我无法访问 jqueryUI，只是 jquery，因此为切换类设置动画似乎不是一种选择。我在想可能是fadetoggle，但这会使元素一直淡出并重新淡入，也许有办法修改它？effects_of_yoga_2010_INFO 是我试图在不透明度之间切换的内容。

```
var effects_of_yoga_2010_INFO = document.getElementById('effects_of_yoga_2010_INFO');
effects_of_yoga_2010_INFO.style.setProperty("-webkit-transition", "-webkit-transform 0.25s ease-in-out");

var effects_of_yoga_2010_DEG = 0;

$("#effects_of_yoga_2010_INFO").click(function() {
$("p#effects_of_yoga_2010_TEXT").slideToggle("250");
effects_of_yoga_2010_DEG += 45;
effects_of_yoga_2010_INFO.style.setProperty('-webkit-transform', 'rotateZ('+effects_of_yoga_2010_DEG+'deg)');   
}); 
```

任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T14:09:30.883

也许fadeTo会帮助你

[http://api.jquery.com/fadeTo/](http://api.jquery.com/fadeTo/)

```
 $('.element').click(function() {
    $(this).fadeTo('slow', 0.5, function() {
      // Animation complete.
    });
  }); 
```

我从jquery页面中获取了它。这会将元素淡化为您定义的不透明度，您需要定义何时淡入淡出到什么

```
 $('.element').click(function() {
    // check to see if it is open
    if($(this).hasClass('open')) {
       // item already opened

    } else {
       // item is closed
    }

  }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T14:12:59.513

这可能会做到

```
$("#effects_of_yoga_2010_INFO").toggle(function() {
  $("p#effects_of_yoga_2010_TEXT").slideToggle("250");
  effects_of_yoga_2010_DEG += 45;
  effects_of_yoga_2010_INFO.style.setProperty('-webkit-transform', 'rotateZ('+effects_of_yoga_2010_DEG+'deg)'); 
  $("#effects_of_yoga_2010_INFO").animate({
    opacity: 0.3
  }, 250); 
}, function() {
  $("p#effects_of_yoga_2010_TEXT").slideToggle("250");
  effects_of_yoga_2010_DEG += 45;
  effects_of_yoga_2010_INFO.style.setProperty('-webkit-transform', 'rotateZ('+effects_of_yoga_2010_DEG+'deg)');  
  $("#effects_of_yoga_2010_INFO").animate({
    opacity: 0.65
  }, 250); 
}); 
```

[http://api.jquery.com/animate/](http://api.jquery.com/animate/)

# truncate - WTMP (RHEL 5/6) 日志维护 - 需要保持滚动日志而不是轮换

> ID：12710070
> 
> 赞同：1
> 
> 时间：2012-10-03T13:56:32.897
> 
> 标签：truncate, rollover, logrotate

我们有使用 wtmp 使用项目的策略要求，例如“last”命令或 GDM-Last-Login 详细信息。我们发现这些项目会根据上次轮换 wtmp 的时间而存在间隙，因此需要尝试解决此问题。

因为这些差距已被确定为不可接受的，并且将 wtmp 数据永远保存在单个活动日志文件中而不将旧数据拆分为档案是不可行的，**所以我正在寻找一种方法来翻转/老化旧的 wtmp 条目，同时仍然保留最近的**。

从一些初步研究中，我看到在 Unix（AIX、SunOS）世界中使用“fwtmp”和一些前/后 logrotate 脚本解决了这个问题。Linux 世界是否已经解决了这个问题，而我只是错过了它？

据我所知，'fwtmp' 是 Unix 内置的，它没有被纳入 RHEL 5 和 6，每搜索 RHEL 客户门户网站和一些'yum whatprovides' 在我的测试盒上搜索。

提前谢谢了！

# axapta - 在 AX 2012 中刷新整个表单？

> ID：12710080
> 
> 赞同：7
> 
> 时间：2012-10-03T13:57:02.530
> 
> 标签：axapta, x++, dynamics-ax-2012

我目前正在使用底部有网格的表单。每当我按 f5 时，网格都会刷新，但表单的其余部分不会。我该怎么做才能使整个表单刷新它的数据？

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-04T08:48:02.683

您可以覆盖`research`数据源上的方法：

```
public void research(boolean _retainPosition = false)
{
    super(_retainPosition);
    other_ds.research(_retainPosition);
} 
```

`other_ds`是当前数据源未加入的数据源。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-04T09:05:24.267

这取决于您使用的表格。当您在记录上按 F5 时，它会在[`research`](http://msdn.microsoft.com/en-us/library/aa597768%28v=ax.50%29.aspx)该记录所属的数据源或其父数据源上运行该方法（取决于表单的查询，例如，如果您在 SalesTable 表单中的 SalesLine 上按 F5，`SalesTable_ds.research(true)`将运行）。如我所见，如果表单的其余部分显示属于这些数据源的字段，那么这些字段将被更新。如果字段不属于这些数据源，则表单的其余部分将不会更新（除非例如该[`active`](http://msdn.microsoft.com/en-us/library/aa672914%28v=ax.50%29.aspx)方法已被覆盖以从代码中刷新表单的其余部分。

当 F5 被按下时，你可以做什么来让整个表单刷新它的数据：同样，它取决于表单，所以不知道所有细节很难给出建议，但你可以做的一件事是重写`research`方法在您的数据源上并从那里以编程方式刷新表单的其余部分。覆盖该`active`方法更为常见，您通常应该使用它。

# ios - Apple App ID 需要更改名称

> ID：12710085
> 
> 赞同：3
> 
> 时间：2012-10-03T13:57:06.167
> 
> 标签：ios, iphone

如果应用名称更改，我是否必须创建一个新 ID？如果我不更改 App ID 名称，我担心 App Store 上的名称会出错。我在它自己的应用程序上更改了产品名称。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T14:11:23.117

应用 ID 我假设您的意思是捆绑 ID，这需要在整个应用发布期间保持不变，因为它将您的应用与应用商店联系起来，用户看不到这一点，因为他们只会看到产品和应用名称，所以没有必要改变它

# google-chrome-extension - 如何将表单提交到我的 chrome 扩展程序中的新选项卡

> ID：12710090
> 
> 赞同：0
> 
> 时间：2012-10-03T13:57:15.810
> 
> 标签：google-chrome-extension

我正在开发 Google chrome 扩展程序。这个想法是我输入我的用户名和密码，单击提交并在我的网站上打开一个新选项卡，然后它将拿起提交的表格并登录我。

我已设法在新标签页中打开我的网站，但无法获取表单。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T22:28:34.720

Since you've got your website loaded, try using jquery to select the textbox and enter a value.

The following selects the where the input is, then finds the input I want, then finally sets the value inside of that box.

```
$("td[data-key='sku']").find("input.tb-input").val('some text here') 
```

In the jquery code above, the html would look something like this:

```
<td data-key='sku'>
<input class=tb-input/>
</td> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T21:15:13.820

您可以在 popup.html 中创建一个 HTML 表单，如下所示：

```
<form name="input" action="http://example.com/login.php" method="get">
    Username: <input type="text" name="user">
    Password: <input type="password" name="password">
<input type="submit" value="Submit"></form> 
```

在您网站的脚本中，您可以检查参数是否已通过，如果正确，则创建将它们重定向到您网站上的仪表板，否则向他们显示登录页面以输入正确的凭据

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-03T14:02:58.283

您可以在提交按钮中使用 OnClick 事件：

```
<input type="submit" value="submit" onclick="this.form.target='_blank';return true;"> 
```

# android - 如何使用 FragmentManager 替换已弃用的 showDialog

> ID：12710092
> 
> 赞同：7
> 
> 时间：2012-10-03T13:57:37.083
> 
> 标签：android, android-fragments, deprecated

我正在使用方法 displayDialog... 它可以工作，但 Eclipse 对此显示警告：

```
showDialog(showRetry ? 1 : 0); 
```

方法：

```
 private void displayDialog(final boolean showRetry) {
                    mHandler.post(new Runnable() {
                        public void run() {
                            setProgressBarIndeterminateVisibility(false);
                            showDialog(showRetry ? 1 : 0);
                        }
                    });
                } 
```

搜索我发现了类似的问题，其中看到现在有可以用来避免问题的*FragmentManager*，但我不明白如何在我的特定场景中使用它来解决问题，保持与 Froyo 和 GingerBread 的复古兼容性.

你可以帮帮我吗？

完整的类代码是：

```
 public class Home extends Activity {
        private static final String BASE64_PUBLIC_KEY = "mykeywithoutspaces";

        // Generate your own 20 random bytes, and put them here.
        private static final byte[] SALT = new byte[] {
            -00, 00, 30, -2, -58, -57, 00, -64, 51, 32, -95, -45, 13, -6, -36, -15, -11, 32, -64,
            89
        };

        private TextView mStatusText;
        private Button mCheckLicenseButton;

        private LicenseCheckerCallback mLicenseCheckerCallback;
        private LicenseChecker mChecker;
        // A handler on the UI thread.
        private Handler mHandler;

        @Override
        public void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);
            requestWindowFeature(Window.FEATURE_INDETERMINATE_PROGRESS);
            setContentView(R.layout.main);

            mStatusText = (TextView) findViewById(R.id.status_text);
buttonNewDoc = (ImageButton) findViewById(R.id.btNewDoc);
        buttonNewDoc.setOnClickListener(mNewDoc);
            mCheckLicenseButton = (Button) findViewById(R.id.check_license_button);
            mCheckLicenseButton.setOnClickListener(new View.OnClickListener() {
                public void onClick(View view) {
                    doCheck();
                }
            });

            mHandler = new Handler();

            // Try to use more data here. ANDROID_ID is a single point of attack.
            String deviceId = Secure.getString(getContentResolver(), Secure.ANDROID_ID);

            // Library calls this when it's done.
            mLicenseCheckerCallback = new MyLicenseCheckerCallback();
            // Construct the LicenseChecker with a policy.
            mChecker = new LicenseChecker(
                this, new ServerManagedPolicy(this,
                    new AESObfuscator(SALT, getPackageName(), deviceId)),
                BASE64_PUBLIC_KEY);
            doCheck();
        }

        protected Dialog onCreateDialog(int id) {
            final boolean bRetry = id == 1;
            return new AlertDialog.Builder(this)
                .setTitle(R.string.unlicensed_dialog_title)
                .setMessage(bRetry ? R.string.unlicensed_dialog_retry_body : R.string.unlicensed_dialog_body)
                .setPositiveButton(bRetry ? R.string.retry_button : R.string.buy_button, new DialogInterface.OnClickListener() {
                    boolean mRetry = bRetry;
                    public void onClick(DialogInterface dialog, int which) {
                        if ( mRetry ) {
                            doCheck();
                        } else {
                            Intent marketIntent = new Intent(Intent.ACTION_VIEW, Uri.parse(
                                    "http://market.android.com/details?id=" + getPackageName()));
                                startActivity(marketIntent);                        
                        }
                    }
                })
                .setNegativeButton(R.string.quit_button, new DialogInterface.OnClickListener() {
                    public void onClick(DialogInterface dialog, int which) {
                        finish();
                    }
                }).create();
        }

        private void doCheck() {
buttonNewDoc.setEnabled(false);
            mCheckLicenseButton.setEnabled(false);
            setProgressBarIndeterminateVisibility(true);
            mStatusText.setText(R.string.checking_license);
            mChecker.checkAccess(mLicenseCheckerCallback);
        }

        private void displayResult(final String result) {
            mHandler.post(new Runnable() {
                public void run() {
                    mStatusText.setText(result);
                    setProgressBarIndeterminateVisibility(false);
                    mCheckLicenseButton.setEnabled(true);
                }
            });
        }

        private void displayDialog(final boolean showRetry) {
            mHandler.post(new Runnable() {
                public void run() {
                    setProgressBarIndeterminateVisibility(false);
                    showDialog(showRetry ? 1 : 0);
                }
            });
        }    

        private class MyLicenseCheckerCallback implements LicenseCheckerCallback {
            public void allow(int policyReason) {
                if (isFinishing()) {
                    // Don't update UI if Activity is finishing.
                    return;
                }

                // Should allow user access.
                displayResult(getString(R.string.allow));
buttonNewDoc.setEnabled(false);
            }

            public void dontAllow(int policyReason) {
                if (isFinishing()) {
                    // Don't update UI if Activity is finishing.
                    return;
                }
                displayResult(getString(R.string.dont_allow));
                // Should not allow access. In most cases, the app should assume
                // the user has access unless it encounters this. If it does,
                // the app should inform the user of their unlicensed ways
                // and then either shut down the app or limit the user to a
                // restricted set of features.
                // In this example, we show a dialog that takes the user to Market.
                // If the reason for the lack of license is that the service is
                // unavailable or there is another problem, we display a
                // retry button on the dialog and a different message.
                displayDialog(policyReason == Policy.RETRY);
            }

            public void applicationError(int errorCode) {
                if (isFinishing()) {
                    // Don't update UI if Activity is finishing.
                    return;
                }
                String result = String.format(getString(R.string.application_error), errorCode);
                displayResult(result);
            }
        }

        @Override
        protected void onDestroy() {
            super.onDestroy();
            mChecker.onDestroy();
        }

    } 
```

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2020-02-02T14:20:27.413

科特林：

```
requireActivity().supportFragmentManager 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-10-03T14:05:04.203

您的活动应该是子类`FragmentActivity`，可以在[v4 支持库](http://developer.android.com/tools/extras/support-library.html)中找到，您应该将其添加到您的项目中。然后，您可以获得对`FragmentManager`using的引用`getSupportFragmentManager()`来显示`DialogFragment`. 您必须使用`DialogFragment`对话框所需的布局和逻辑创建一个类。以下是您如何从您的`FragmentActivity`:

```
FragmentManager fm = getSupportFragmentManager();
YourDialogFragment yourDialog = new YourDialogFragment();
yourDialog.show(fm, "some_optional_tag"); 
```

这是一个概述：[http ://android-developers.blogspot.com/2012/05/using-dialogfragments.html](http://android-developers.blogspot.com/2012/05/using-dialogfragments.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-07-22T20:38:33.013

谷歌在这个例子中似乎使用的是更改“受保护的对话框 onCreateDialog (int id) {”，以便它始终在内部调用，称为“showDialog (showRetry?1:0);” 为重试/取消创建默认对话框。

我建议使用以下代码，创建一个方便的方法来创建标准对话框，并更改或删除“onCreateDialog()”，因为这变得不必要了。

```
protected Dialog onCreateDialog(int id) {
    return CreateDialogRetryCancel(id);
}

public Dialog CreateDialogRetryCancel(int id) {
    final boolean bRetry = id == 1;
    return new AlertDialog.Builder(this)
        .setTitle(R.string.unlicensed_dialog_title)
        .setMessage(bRetry ? R.string.unlicensed_dialog_retry_body : R.string.unlicensed_dialog_body)
        .setPositiveButton(bRetry ? R.string.retry_button : R.string.buy_button, new DialogInterface.OnClickListener() {
            boolean mRetry = bRetry;
            public void onClick(DialogInterface dialog, int which) {
                if ( mRetry ) {
                    doCheck();
                } else {
                    Intent marketIntent = new Intent(Intent.ACTION_VIEW, Uri.parse(
                            "http://market.android.com/details?id=" + getPackageName()));
                        startActivity(marketIntent);                        
                }
            }
        })
        .setNegativeButton(R.string.quit_button, new DialogInterface.OnClickListener() {
            public void onClick(DialogInterface dialog, int which) {
                finish();
            }
        }).create();
}

private void displayDialog(final boolean showRetry) {
    mHandler.post(new Runnable() {
        public void run() {
            setProgressBarIndeterminateVisibility(false);
            CreateDialogRetryCancel(showRetry ? 1 : 0).show();
            //showDialog(showRetry ? 1 : 0);
            mCheckLicenseButton.setEnabled(true);
        }
    });
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-07-25T16:31:17.070

```
FragmentManager fm = getSupportFragmentManager();
yourDialog.show(fm, "some_optional_tag"); 
```

仅当`getSupportFragmentManager()`在制作 DialogFragment 时导入正确的类时才被接受，即`import android.support.v4.app.DialogFragment`

# mysql - MySQL：计算多个状态的持续时间

> ID：12710095
> 
> 赞同：1
> 
> 时间：2012-10-03T13:57:41.093
> 
> 标签：mysql, sql, left-join, aggregate, datediff

我有一个包含俱乐部会员信息的数据库。每个成员在任何时候都可以是三种不同状态之一（活跃、老手、助理）。我把它分解成三个表。包含所有成员信息的成员表，包含 status_name 和 status_id 的状态表以及包含 member_id、status_id、date_from 和 date_to 的网格表。

我正在尝试计算成员在每个状态上花费的时间。我目前正在通过以下查询计算成员处于“活动”状态的总时间：

```
SELECT first_name, last_name, 
 (DATE_FORMAT( FROM_DAYS( SUM( DATEDIFF( IFNULL( q.date_to, NOW() ) , q.date_from ) ) ) , "%Y" ) +0) as service_years 
 FROM member a
 LEFT JOIN member_status q on a.id = q.member_id AND q.status_id = 1
 GROUP BY a.id 
```

我知道我可以通过在左连接中去掉 AND 来提取该人成为成员的总时间，但是我无法找到一种方法来计算单个查询中每个状态的时间。

我的理想结果将是：

```
 -----------------------------------------------------------
 |member_name | active_years | veteran_years | total_years |
 -----------------------------------------------------------
 |name        | 5            | 5             | 10          |
 ----------------------------------------------------------- 
```

有没有办法在单个查询中完成我正在寻找的内容？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T14:02:40.927

你应该能够做这样的事情，它使用一个`CASE`语句来确定状态名称，然后根据状态计算总年数：

```
SELECT first_name, 
  last_name, 
  CASE WHEN status_name = 'active' 
    then (DATE_FORMAT( FROM_DAYS( SUM( DATEDIFF( IFNULL( q.date_to, NOW() ) , q.date_from ) ) ) , "%Y" ) +0) end as active_years,
  CASE WHEN status_name = 'veteran' 
    then (DATE_FORMAT( FROM_DAYS( SUM( DATEDIFF( IFNULL( q.date_to, NOW() ) , q.date_from ) ) ) , "%Y" ) +0) end as active_years,
  (DATE_FORMAT( FROM_DAYS( SUM( DATEDIFF( IFNULL( q.date_to, NOW() ) , q.date_from ) ) ) , "%Y" ) +0) as total_years,
FROM member a
LEFT JOIN member_status q 
  on a.id = q.member_id 
  AND q.status_id = 1
GROUP BY a.id, a.first_name, a.last_name 
```

*如果您发布一些示例数据，则更容易确定正确的查询*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T14:05:14.253

假设 1=active 和 2=veteran，这样的事情应该可以工作：

```
SELECT first_name, last_name, 
 (DATE_FORMAT( FROM_DAYS( SUM( case when q.status_id = 1 then DATEDIFF( IFNULL( q.date_to, NOW() ) , q.date_from ) ) else 0 end ) , "%Y" ) +0) as active_years,
 (DATE_FORMAT( FROM_DAYS( SUM( case when q.status_id = 2 then DATEDIFF( IFNULL( q.date_to, NOW() ) , q.date_from ) ) else 0 end ) , "%Y" ) +0) as veteran_years,
(DATE_FORMAT( FROM_DAYS( SUM( DATEDIFF( IFNULL( q.date_to, NOW() ) , q.date_from ) ) ) , "%Y" ) +0) as total_years 
 FROM member a
  LEFT JOIN member_status q on a.id = q.member_id AND q.status_id in (1,2)
 GROUP BY a.id 
```

另一种选择是多次加入 member_status 表。

# jquery - 将元素类访问到您在 DOM (jQuery) 中的位置

> ID：12710096
> 
> 赞同：0
> 
> 时间：2012-10-03T13:57:40.937
> 
> 标签：jquery, dom, loops, web

我有以下 DOM 结构：

```
<div id="cont">
<ul>
    <li>
        <span class="c1"><span class="c2">...</span><span class="c3">...</span></span>
    </li>
    <li>
        <span class="c1"><span class="c2">...</span><span class="c3">...</span></span>
    </li>
    <li>
        <span class="c1"><span class="c2">...</span><span class="c3">...</span></span>
    </li>
    ...
    <li>
        <span class="c1"><span class="c2">...</span><span class="c3">...</span></span>
    </li>
</ul>
</div> 
```

使用以下 jQuery：

```
$("#cont ul li").each(function (e) {
    $(this).bind("mousemove",function(d) {
        var ele = $(this + " .c2");
        var ele2 = $(this " .c3");
        //do stuff
    });
}); 
```

我想做的是访问相对于当前 dom 位置的“c2”和“c3”元素。我希望循环选择相对于 DOM 顶部的以下内容：

```
ele = $("#cont ul li span .c2");
ele = $("#cont ul li span .c3");
//Do Stuff
//Move to the next set of Li's
ele = $("#cont ul li span .c2");
ele = $("#cont ul li span .c3");
//Do Stuff
//Move to the next set of Li's
ele = $("#cont ul li span .c2");
ele = $("#cont ul li span .c3");
//Do Stuff
//Move to the next set of Li's
.. 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-03T13:59:02.287

尝试

```
$("#cont ul li").each(function (e) {
  $(this).bind("mousemove",function(d) {
    var ele = $(this).find(".c2");
    var ele2 = $(this).find(".c3");
    //do stuff
 });
}); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-03T13:59:23.733

用于[`.find()`](http://api.jquery.com/find/)选择当前匹配元素的后代。

```
$("#cont ul li").each(function (e) {
    $(this).bind("mousemove",function(d) {
        var ele = $(this).find(".c2");
        var ele2 = $(this).find(".c3");
        //do stuff
    });
}); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-03T14:01:10.297

如果 li 始终是直接父母，您可以使用：

```
var elem, elem2;
$('.c1').bind("mousemove",function(d) {
  elem=$(this).parent().find('.c2');
  elem2=$(this).parent().find('.c2');
  //Do stuff
}) 
```

# objective-c - 动画图像不可见

> ID：12710099
> 
> 赞同：1
> 
> 时间：2012-10-03T13:57:52.043
> 
> 标签：objective-c, xcode, animation, sdk, uiimageview

我想要一个按钮来触发以下操作。单击时，它应该将我的徽标向上推出并移出视图并将其删除。当它再次被点击时，它应该做相反的事情。这意味着图像被创建并被推回视图中。我正在使用故事板来设置我的界面。我的问题是我无法触发动画。在下面发布我的代码：

在 TableViewController.h

```
@interface TableViewController : UITableViewController{

    BOOL status;

}

@property (weak, nonatomic) IBOutlet UIImageView *animateLogo;
@property (weak, nonatomic) IBOutlet UIButton *button;

- (IBAction)onClick:(id)sender;
- (void)showHideView;

@end 
```

在 TableViewController.m

```
@synthesize animateLogo, button;

- (void)viewDidLoad{

    [super viewDidLoad];

    status = YES;

}

- (IBAction)onClick:(id)sender{
[self showHideView];
}

if(status){

    [UIView
     animateWithDuration:1.5
     delay:0
     options:UIViewAnimationCurveEaseOut
     animations:^{
         [animateLogo setFrame:CGRectOffset([animateLogo frame], 0, -animateLogo.frame.size.height)];
     }
     completion:^(BOOL completed) {}
    ];

    status = NO;
    [button setTitle:@"Show" forState:UIControlStateNormal];

}
else{

    [UIView
     animateWithDuration:1.5
     delay:0
     options:UIViewAnimationCurveEaseOut
     animations:^{
         [animateLogo setFrame:CGRectOffset([animateLogo frame], 0, animateLogo.frame.size.height)];
     }
     completion:^(BOOL completed) {}
    ];

    status = YES;
    [button setTitle:@"Hide" forState:UIControlStateNormal];

}

} 
```

编辑：

如果我以编程方式对 UIImageView 进行编码，则动画正在工作。所以问题出在故事板上。我更喜欢让这个与故事板一起工作，这样我可以更好地了解布局。

```
UIImage *test = [UIImage imageNamed:@"logo.png"];
    animateLogo = [[UIImageView alloc] initWithImage:test];
    [self.view addSubview:animateLogo];
    [animateLogo setFrame:CGRectOffset([animateLogo frame], 0, animateLogo.frame.size.height)]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T07:38:40.177

问题解决了。我使用了一种不同的方法，即我为 UIView 而不是 UIImageView 设置动画。我现在的工作就像一个魅力。

# javascript - Html 选择，选择限制

> ID：12710101
> 
> 赞同：0
> 
> 时间：2012-10-03T13:57:53.903
> 
> 标签：javascript, html

我有多个选择 true 的下拉列表，现在我想将最大选择数限制为“3”。

我怎样才能做到这一点 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T00:35:35.320

据我所知，HTML 中没有办法做到这一点，而且 JavaScript 中的检查可能非常复杂。

就个人而言，我只是在服务器端验证它。例如，在 PHP 中：

```
if( count($_POST['myselect']) > 3) die("You selected too many options"); 
```

**编辑：** JavaScript 解决方案：

```
// HTML: <select multiple data-max="3">
(function() {
    var tmp, qsa, l, i, handler, evt;
    if( document.body.attachEvent) {
        handler = "attachEvent";
        evt = "onclick";
    }
    else {
        handler = "addEventListener";
        evt = "click";
    }
    if( document.querySelectorAll) {
        qsa = document.querySelectorAll('select[multiple][data-max]');
    }
    else {
        tmp = document.getElementsByTagName('select');
        l = tmp.length;
        qsa = [];
        for( i=0; i<l; i++) {
            if( tmp[i].hasAttribute("multiple") && tmp[i].hasAttribute("data-max"))
                qsa.push(tmp[i]);
        }
    }
    l = qsa.length;
    for( i=0; i<l; i++) {
        qsa[i][handler](evt,function() {
            var opts, l, i, c, m;
            opts = this.options;
            l = opts.length;
            m = parseInt(this.getAttribute("data-max"),10);
            c = 0;
            for( i=0; i<l; i++) {
                if( opts[i].selected) c++;
                if( c > m) {
                    alert("You may only select up to "+m+" options.");
                    return false;
                }
            }
        });
    }
})(); 
```

我不能 100% 确定它会起作用，因为我还没有测试过它，但它让您了解 JavaScript 解决方案会有多烦人。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T00:42:12.283

这里是带有 jquery 的基本 html 和 js

```
 <select name="x" id="mySelect" multiple="multiple" size="11">
        <option value="a">a</option>
        <option value="b">b</option>
        <option value="c">c</option>
        <option value="d">d</option>
        <option value="e">e</option>
        <option value="f">f</option>
        <option value="g">g</option>
        <option value="h">h</option>
        <option value="i">i</option>
        <option value="j">j</option>
        <option value="k">k</option>
    </select>

if($("#mySelect :selected").length>3){
  alert("Warning");
  return false; 
} 
```

# asp.net - Code Behinde 和 ASP.Net 中的命名空间

> ID：12710107
> 
> 赞同：0
> 
> 时间：2012-10-03T13:58:02.827
> 
> 标签：asp.net, code-behind

我设计了网页并将控件放入其中，然后我将名称空间添加到文件后面的代码中并添加

```
 <%@ Page Language="C#" AutoEventWireup="true" MasterPageFile="~/Site.master" CodeFile="Default.aspx.cs"
    Inherits="_Default" %>
<%@ Register Assembly="AjaxControlToolkit" Namespace="AjaxControlToolkit" TagPrefix="ajaxToolkit" %>
<%@ Import Namespace="RegisterName" %> 
```

到asp文件和

```
 namespace RegisterName
   {
    public partial class _Default : System.Web.UI.Page
    { 
```

现在我有一些错误：

```
Error   4   'ASP.default_aspx' does not implement interface member 'System.Web.IHttpHandler.IsReusable' 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T14:01:06.310

您需要页面和代码隐藏都属于*同一*命名空间。

通过将`namespace`声明添加到代码隐藏中，它和网页现在位于不同的名称空间中。

此外，`@Import`page 指令仅仅意味着您可以访问在导入的命名空间中声明的类型，而不是页面属于它。

您需要确保`@Page`指令与代码隐藏类的完全限定名称匹配。

# jquery - jquery serialize / sortable 停止使用数组中的 142 个元素

> ID：12710117
> 
> 赞同：0
> 
> 时间：2012-10-03T13:58:15.937
> 
> 标签：jquery, jquery-ui-sortable

我正在使用 jquery sortable / serialize 在两个列表之间重新排序和移动项目，我已经多次重用代码并且从未遇到过问题。我刚刚意识到，如果我尝试在 listItem 数组中传递超过 142 个元素，它就不会调用 reorder.php 函数。

我似乎在谷歌上找不到任何关于最大项目数的信息。

这是我的javascript：

```
<script type="text/javascript">
$(document).ready(function() {        
    $("#listLive, #listHidden").sortable({ 
        connectWith: '.connectedSortable',
    update : function () { 
      var order = $('#listLive').sortable('serialize');
            $("#resultLive").load("reorder.php?"+order+"&live=1&table=<?=$thing?>");
      var order = $('#listHidden').sortable('serialize');
            $("#resultHidden").load("reorder.php?"+order+"&live=0&table=<?=$thing?>");
    } 
  });
});
</script> 
```

如果我执行 print_r($_GET); 这就是 reorder.php 看到的内容 列表数组中有 142 个元素。如果我将第 143 个拖入列表中，则没有响应...

```
Array ( [listItem] => Array ( [0] => 52 [1] => 51 [2] => 54 [3] => 53 [4] => 55 [5] => 57 [6] => 56 [7] => 58 [8] => 59 [9] => 60 [10] => 61 [11] => 62 [12] => 63 [13] => 64 [14] => 65 [15] => 66 [16] => 67 [17] => 68 [18] => 69 [19] => 70 [20] => 71 [21] => 72 [22] => 73 [23] => 74 [24] => 75 [25] => 76 [26] => 77 [27] => 78 [28] => 79 [29] => 80 [30] => 81 [31] => 82 [32] => 83 [33] => 84 [34] => 85 [35] => 86 [36] => 87 [37] => 88 [38] => 89 [39] => 90 [40] => 91 [41] => 92 [42] => 93 [43] => 94 [44] => 95 [45] => 96 [46] => 97 [47] => 98 [48] => 99 [49] => 100 [50] => 101 [51] => 50 [52] => 49 [53] => 48 [54] => 47 [55] => 46 [56] => 45 [57] => 44 [58] => 43 [59] => 42 [60] => 41 [61] => 40 [62] => 39 [63] => 38 [64] => 37 [65] => 35 [66] => 34 [67] => 33 [68] => 32 [69] => 31 [70] => 30 [71] => 29 [72] => 28 [73] => 27 [74] => 26 [75] => 139 [76] => 25 [77] => 23 [78] => 22 [79] => 21 [80] => 20 [81] => 19 [82] => 18 [83] => 17 [84] => 16 [85] => 15 [86] => 14 [87] => 24 [88] => 13 [89] => 12 [90] => 11 [91] => 10 [92] => 9 [93] => 8 [94] => 7 [95] => 6 [96] => 5 [97] => 4 [98] => 3 [99] => 137 [100] => 103 [101] => 102 [102] => 104 [103] => 105 [104] => 106 [105] => 107 [106] => 108 [107] => 109 [108] => 110 [109] => 111 [110] => 141 [111] => 112 [112] => 113 [113] => 114 [114] => 115 [115] => 116 [116] => 135 [117] => 117 [118] => 118 [119] => 119 [120] => 120 [121] => 121 [122] => 122 [123] => 123 [124] => 124 [125] => 140 [126] => 125 [127] => 126 [128] => 127 [129] => 128 [130] => 136 [131] => 129 [132] => 130 [133] => 131 [134] => 138 [135] => 132 [136] => 133 [137] => 134 [138] => 142 [139] => 143 [140] => 144 [141] => 145 ) [live] => 1 [table] => gallery ) 
```

是否有某种最大数量的元素？如果是这样的话，142 似乎有点奇怪！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T14:02:49.383

这不是关于 142 个项目，而是您尝试加载的 url 的长度。

当您执行“+ order”时，您超过了最大字符数。

我建议您通过 ajax 发出 POST 请求，而不是在 URL 中输入所有项目。

# xml - 多级 csv 文件创建的建议

> ID：12710122
> 
> 赞同：1
> 
> 时间：2012-10-03T13:58:28.200
> 
> 标签：xml, csv, nested, idioms

我在 CSV 文件中有一些最终用户想要的数据。每个条目都有一个父节点和零个或多个子节点。例如，父节点可能包含：

```
Name, Id, Date 
```

虽然子节点可能包含：

```
Name, ChildId 
```

所以我正在寻找的是在 CSV 中表示多级数据的标准。在 XML 中，我可以轻松地创建子节点。在 CSV 中执行此操作的最佳方法是什么？我想创建一个脚本来提取这些数据，而不会混淆什么是父数据和什么是子数据。

在 XML 中，这可能看起来像：

```
<Parent Name="name1">
<Child Name="ChildName1"></Child>
<Child Name="ChildName2"></Child>
</Parent>

<Parent Name="name2">
<Child Name="ChildName1"></Child>
<Child Name="ChildName2"></Child>
</Parent> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-04-10T01:39:57.990

XML可以最小化为：

```
<names>
 <name1>
  <childName1/>
  <childName2/>
 </name1>

 <name2>
  <childName1/>
  <childName2/>
 </name2>
</names> 
```

CSV对此：

```
名字 1 孩子名字 1
名字 1 孩子名字 2
名字 2 孩子名字 1
名字 2 孩子名字 2

```

使用这样的 JSON 序列化：

```
{“名称”：
 [
  {
  “名称1”：
   [
    {
    "childName1":""
    },
    {
    “childName2”：“”
    }
   ]
  },
  {
  “名称2”：
   [
    {
    "childName1":""
    },
    {
    “childName2”：“”
    }
   ]
  }
 ]
}

```

在面向行的方式中，XML 可以是：

```
<names>
 <name1 name="ChildName1|ChildName2">
 <name2 name="ChildName1|ChildName2">
</names> 
```

以及相应的 CSV：

```
姓名 1 孩子姓名 1|孩子姓名 2
姓名 2 孩子姓名 1|孩子姓名 2

```

以及相应的 JSON：

```
{"names": [{"name1":"ChildName1|ChildName2"},{"name2":"ChildName1|ChildName2"}]} 
```

**参考**

*   [子元素内容与标签属性](http://gnosis.cx/publish/programming/element_vs_attribute.html)
*   [使用 COBOL 创建逗号分隔文件 (CSV)](http://simotime.com/cblcsv01.htm)
*   [JSON 的 EXI (EXI4JSON)](https://www.w3.org/TR/exi-for-json/)
*   [处理 JSON 的 EXI](http://exificient.github.io/javascript/demo/processJSON.html)
*   [模式和表语义](https://wiki.apache.org/metamodel/SchemaAndTableSemantics)

# haskell - 避免在 Haskell 中的 monad 内进行模式匹配

> ID：12710127
> 
> 赞同：3
> 
> 时间：2012-10-03T13:58:48.973
> 
> 标签：haskell, functional-programming, monads

我有以下定义：

```
env = DataMap.fromList [
                ("foo",42), ("bar",69),
                ("baz",27), ("qux",0)
               ]

doSomething:: String →  Writer [String] Int
doSomething s = do
            let v = DataMap.lookup s env
            case v of
                Nothing →  fail $  s ++ " not found"
                Just a →  do
                            tell [s ++ " →  " ++ (show a)]
                            return a 
```

这段代码真正让我烦恼的是在 doSomething 中使用模式匹配。它完全违背了使用单子的目的。有没有什么方法可以只使用单子函数而不使用单子转换器来重写 doSomething 函数？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-03T14:28:12.000

正如@larsmans 所说，最简单的方法是使用`maybe`函数：

```
doSomething:: String ->  Writer [String] Int
doSomething s = maybe n (\a -> t a >> return a) $ DataMap.lookup s env where
    n = fail $ s ++ " not found"
    t a = tell [s ++ " ->  " ++ show a] 
```

Monad 转换器在这里没有什么帮助。您将需要一个来*组合*多个既失败又写入的计算。如果只进行一次计算，则不需要单子。

另外，我会使用`ErrorT`转换器和`throwError`函数来报告错误，而不是`fail`. 有关处理错误的可能方法，请参见[http://www.haskell.org/haskellwiki/Error_reporting_strategies](http://www.haskell.org/haskellwiki/Error_reporting_strategies)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T02:11:20.530

这有点笨拙，但我就是这样做的。

```
doSomething2 :: String -> Writer [String] Int
doSomething2 s =
    maybe (fail $ s ++ " not found") id $ do
       a <- DataMap.lookup s env
       return $ (tell [s ++ " -> " ++ show a] >> return a) 
```

# objective-c - 使用 ARC 释放对象时的日志消息

> ID：12710131
> 
> 赞同：2
> 
> 时间：2012-10-03T13:59:08.320
> 
> 标签：objective-c, automatic-ref-counting

有没有办法在使用 ARC 时记录（检查）对象是否被释放？

Pre-ARC 我经常发现这样做很有用：

```
-(void)dealloc {
    [super dealloc];
    NSLog(@"MyObject deallocating");
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-03T14:00:26.353

是的 - 只需删除

```
[super dealloc]; 
```

一切都会按预期编译和运行。

ARC 编译器自动插入调用`super dealloc`，并禁止`dealloc`在您的代码中显式使用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-03T14:00:50.750

您可以使用 ARC 下的 dealloc 方法。只需删除对 super 的调用即可。您当前的代码将像这样工作：

```
-(void)dealloc {
    NSLog(@"MyObject deallocating");
} 
```

# c++ - c++ 对 3D 向量的最快循环扫描

> ID：12710138
> 
> 赞同：3
> 
> 时间：2012-10-03T13:59:34.917
> 
> 标签：c++, performance, for-loop, stdvector

我想知道在 3D 矢量的每个元素上执行方法的最快方法是什么。

假设我们有：

```
std::vector<vector<vector<CLS>>> myVec; 
```

我想以最快的方式执行以下循环：

```
 for(int cycle=0;cycle<10;cycle++) // do it 10 times
 {
    for(int i=0;i<myVec.size();i++)
    {
       for(int j=0;j<myVec[i][constant].size();j++)
       {
           foo(myVec[i][constant][j]);
       }

    } 
 } 
```

值得一提的是，在我的情况下，中期指数总是**不变的。**使用 std::vector 是否足够快，或者您建议使用其他类型的容器？

期待您的帮助。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T14:03:21.523

以下会更快：

```
for(int i=0, int vecSize = myVec.size();i<vecSize;i++)
{
   for(int j=0, int currentLineSize = myVec[i][constant].size();j<currentLineSize;j++)
   {
       foo(myVec[i][constant][j]);
       //copy-paste this 10 times instead of having the outer loop
   }
} 
```

如果您对尺寸有所了解，则可以执行更多展开操作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-03T14:14:37.270

迭代器的使用应该更快（您不必在每次调用时查找整个数组`foo`）。

```
typedef std::vector<CLS> v1;
typedef std::vector<v1> v2;
typedef std::vector<v2> v3;

for(int cycle=0;cycle<10;cycle++) // do it 10 times
{
    for(v3::const_iterator itOuter = myVec.begin(); itOuter != myVec.end(); ++itOuter)
    {
        const v1& vec = (*itOuter)[constant];
        for(v1::const_iterator itInner = vec.begin(); itInner != vec.end(); ++itInner)
            foo(*itInner);
    }
} 
```

不过，我没有测量它（甚至没有尝试编译，所以请原谅任何拼写错误）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-03T14:24:28.097

可能是“可能的最快方式”（并且可能是最少的 C++ 方式，尽管它仍然是有效的 C++）将遵循以下原则：

```
const unsigned dim1 = 10; //first dimension
const unsigned dim2 = 20; //second
const unsigned dim3 = 30; //third
const unsigned nElem = dim1 * dim2 * dim3;

CLS myVec[nElem];

CLS *p = myVec, *q = myVec + nElem;

while (p < q)
{ foo(*p);
  ++p;
} 
```

这消除了所有索引的计算，因为`foo()`似乎只取决于所讨论`CLS`元素的值，而不取决于它在数组中的位置。当然，`myVec`以 3D 方式访问会变得更加复杂（`myVec[x * dim1 * dim2 + y * dim1 + z]`等等 - 只需明确 C++ 通常为您执行的所有索引计算......）。

更改循环以“切片”数组以使一维保持不变会使其变得更加复杂（本质上使其成为双重嵌套循环，在内部循环的终止处为指针添加额外的偏移量）。有点像这样（尽管我的尺寸可能颠倒了）：

```
while (p < q)
{ CLS *r = p + dim3;
  while (p < r)
  { foo(*p);
    ++p;
  }
  p += dim2;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-03T14:42:45.207

您可以创建一个递归函数对象：

```
class Foo {
public:
    template<typename Container>
    void operator()(Container& container) {
        for_each(container.begin(), container.end(), *this);
    }
    void operator()(CLS cls) {
        // do what you want
    }
};

Foo foo;
foo(myVec); 
```

# mysql - 多个用户同时编辑树？

> ID：12710139
> 
> 赞同：2
> 
> 时间：2012-10-03T13:59:36.270
> 
> 标签：mysql, algorithm, tree, mptt

我有一个像分层类别一样的树，我需要将其保存在数据库中。我使用 MPTT（嵌套集）来保存这些数据。

问题是这个类别需要由多个用户编辑，有时是同时编辑。

**如何保持结构的完整性，而又不对用户施加过多的限制？**

鉴于 MPTT 的性质，当改变结构中的一个元素时，它也会影响其他元素（改变左/右值）。

例如。用户 A 删除 Node1，用户 B 在 Node1 下添加 Leaf1。这应该给用户 B 一个错误，即 Node1 不再存在，但我相信它只会给用户 B 造成混乱......

这个问题有什么实际的解决方案吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-03T14:06:05.053

您正在寻找的是乐观并发。这意味着，您允许用户开始编辑记录，但在应用更改之前，您检查记录是否处于与用户开始编辑时相同的状态。

其他情况是锁定所有可能受编辑影响的记录，但它会限制用户进行任何更改。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T14:04:30.780

这与任何其他多用户事务系统有何不同？

将您的用户操作包含在事务中，这样所有参与的表都将被锁定。然后根据当前数据验证输入并执行更新。

# kernel - OpenCL 内核中的原子操作

> ID：12710141
> 
> 赞同：0
> 
> 时间：2012-10-03T13:59:38.480
> 
> 标签：kernel, opencl, atomic, gpu-atomics

当我试图找到有关内核中原子操作的更多细节时，我发现了一些奇怪的事情。据我了解，当对一个数字使用原子操作时，所有线程的所有此类操作都将被序列化以在该数字上启动以保持完整性。以下是我的一段内核代码：

```
 if(atomic_cmpxchg(&A[ptr],0,-1) == -1)
        ptr = A[ptr + 3];

    //To delay
    uint k = 1000000;
    while(k--);

    A[ptr + 3] = newValue; 
```

对于上面的代码，假设只有两个线程 T1 和 T2。据我了解，T1 和 T2 都会执行代码片段，但是当他们尝试执行 atomic_cmpxchg 操作时，T2 必须等待 T1 完成（假设 T1 先运行）。正如我设计的那样，当 T1 读取 A[ptr] 时，A[ptr] 的旧值是 0，所以它会原子地更改为 -1。之后，因为对于T1，条件不满足，所以T1会直接去延迟码，被延迟。现在是时候让 T2 在 A[ptr] 上工作了，因为现在 A[ptr] 已经设置为 -1，所以 T2 满足条件，所以 T2 将运行到“ptr= A[ptr + 3];” . 但我的问题是：因为T2完成条件判断后，会执行“ptr= A[ptr + 3];” 立即，但 T1 遇到延迟，所以 A[ptr+3] 的值还没有被 T1 更新（因为 k 太大了，延迟会很长）。所以 T2 不会读取 A[ptr+3] 的最新值，这应该是*新值*。但我的实验表明，无论我设置多大的*k*值，结果总是正确的，即无论T1遇到多长时间的延迟，T2总能读取到正确的值（ *newValue ）。*谁能帮忙调查一下这个案子？非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T07:38:21.087

1.  编译器可能足够聪明，可以确定您的“延迟”循环没有副作用并完全优化它。

2.  在 GPU 上，来自同一工作组的 OpenCL 工作项通常以同步方式运行[（](http://en.wikipedia.org/wiki/Lockstep_%28computing%29)至少在一定程度上，取决于具体的硬件）。这意味着两个线程同时执行相同的指令。它们基本上共享一个指令指针。在发散控制流的情况下，每个线程都会记住它当前是否处于活动状态，并且只有在处于活动状态时才执行当前指令。原子操作仍然是序列化的。

# c++ - 用 C++ 设置合并算法

> ID：12710156
> 
> 赞同：1
> 
> 时间：2012-10-03T14:00:14.807
> 
> 标签：c++, stl

假设现在你有一组数据：

```
Data 1: (1, 2);
Data 2: (1, 3);
Data 3: (7, 8);
Data 4: (8, 20); 
```

现在的任务是合并数据集，如果它与另一个数据集有共同元素。在我们的示例中，数据 1 将与数据 2 合并，因为它们共享公共数字 1。数据 3 和数据 4 也是如此。我的问题是我们如何才能在 C++ 中非常有效地实现此功能。目前我的实现是基于 std::vector > 数据结构的，如下代码所示：

```
#include <iostream>
#include <map>
#include <set>
#include <algorithm>
#include <vector>

using namespace std;
bool find_the_element(const set<int> &mysets, const vector<int> &myvector)
{
    for(int i=0; i<myvector.size(); i++)
    {
        set<int>::iterator it;
        it = mysets.find(myvector[i]);
        if (it != mysets.end())
            return true;
    }
    return false;

}

int main () 
{

    set<vector<int> > myset;
    vector<int> a;
    a.push_back(1);
    a.push_back(2);

    vector<int> b;
    b.push_back(1);
    b.push_back(3);

    vector<int> c;
    c.push_back(7);
    c.push_back(8);

    vector<int> d;
    d.push_back(8);
    d.push_back(20);
    vector<vector<int> > my_vector_array;
    my_vector_array.push_back(a);
    my_vector_array.push_back(b);
    my_vector_array.push_back(c);
    my_vector_array.push_back(d);

    vector<set<int> > my_sets;
    for(int i=0; i<my_vector_array.size(); i++)
    {
        vector<int> temp_vector = my_vector_array[i];

        if (my_sets.empty())
        {
            set<int> temp_set;
            for(int j=0; j<temp_vector.size(); j++)
                temp_set.insert(temp_vector[j]);

            my_sets.push_back(temp_set);
        }
        else
        {
            bool b_find = false;
            for(int j=0; j<my_sets.size(); j++)
            {
                set<int>temp_set;
                temp_set = my_sets[j];
                if (find_the_element(temp_set,temp_vector))
                {
                    b_find = true;
                    my_sets[j].insert(temp_vector.begin(), temp_vector.end());

                    break;
                }

            }
            if (b_find)
            {
                // something already done
            }
            else
            {
                set<int> temp_set;
                for(int j=0; j<temp_vector.size(); j++)
                    temp_set.insert(temp_vector[j]);

                my_sets.push_back(temp_set);
            }

        }
    }
} 
```

我想知道 C++ 中是否有更有效的数据结构或有效的算法来完成这项工作。谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-03T14:06:04.693

实现可以快速合并的集合的最有效方法之一是使用[*不相交集数据结构*](http://en.wikipedia.org/wiki/Disjoint-set_data_structure)。

这个想法是最初将每个集合表示为一个链表，链表的头部作为整个集合的标识符。随着集合被合并，节点被重新指向头部以加速进一步的搜索。

链接上的文章有伪代码；C++ 实现应该不会太难。

您需要单独保留一个将`map`您到目前为止看到的整数与它们在不相交集森林中的节点连接起来。您将浏览您的数据集，一个一个地获取它们的项目，在 中查找项目`map`，然后点击指向其数据集的链接，或者使用您正在添加的项目创建一个新的“单例”不相交集。

# hadoop - MPI 数据挖掘库

> ID：12710157
> 
> 赞同：3
> 
> 时间：2012-10-03T14:00:22.253
> 
> 标签：hadoop, machine-learning, cluster-computing, mpi, data-mining

是否有任何正在使用（或可由）MPI（按摩传递接口）的数据挖掘库？我正在寻找类似于 Apache Mahout 但可以轻松集成到 MPI 环境中的东西。

我想使用 MPI 的原因是配置（与 Hadoop 相比）很容易。还是在数据挖掘场景中使用 MPI 没有意义？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-04T07:51:24.903

MPI（这是一个概念，而不是软件本身！）没有理由比 Hadoop/Mahout 更容易安装。事实上，后两者目前是一团糟，特别是因为它们的 Java 库混乱。Apache Bigtop 试图让它们更易于安装，一旦你弄明白了一些基础知识，就可以了。

然而：

*   如果您的数据很小（即可以在单个节点上处理），请不要安装集群解决方案，您需要支付开销。Hadoop 在单个主机上没有多大意义。使用 Weka、[ELKI](http://elki.dbs.ifi.lmu.de/)、RapidMiner、KNIME 等。
*   如果您的数据很大，您将希望最小化*数据传输*。这就是 Hadoop/Mahout 的优势所在，可以最大限度地减少数据传输。典型的消息传递 API 无法以相同的方式扩展数据繁重的操作。

有一些努力，例如 Apache Hama，与 MPI 的东西恕我直言非常相似。它基于消息，但是它们通过屏障同步进行批量处理。它还可能在发送之前进行一些消息聚合以减少流量。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-19T08:24:38.560

我强烈推荐[graphlab](http://Graphlab.org)。目前，graphlab 是一种分布式图形并行 API，其工具包包括

*   主题建模
*   协同过滤
*   聚类
*   图形模型

[http://docs.graphlab.org/toolkits.html](http://docs.graphlab.org/toolkits.html)

> GraphLab 是一个基于图的高性能分布式计算框架，用 C++ 编写。虽然 GraphLab 最初是为机器学习任务而开发的，但它在广泛的其他数据挖掘任务中取得了巨大成功；优于其他抽象的数量级。
> 
> GraphLab 特点：
> 
> 统一的多核和分布式 API：一次写入可在共享和分布式内存系统中高效运行 性能优化：优化的 C++ 执行引擎利用广泛的多线程和异步 IO 可扩展：GraphLab 使用复杂的新算法智能放置数据和计算 HDFS 集成：访问您的数据直接来自 HDFS 强大的机器学习工具包：轻松将大数据转化为可操作的知识

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-04T05:21:11.990

这个想法没有意义，我认为你有一些误解，MPI 更适用于紧密耦合的系统，我 99% 肯定不会将消息发送到外部位置，但是你可以使用 MPI 处理或分析数据很多更快（取决于您的硬件）。我的 2 美分是你最好使用[AMQP](https://stackoverflow.com/questions/731233/activemq-or-rabbitmq-or-zeromq-or)协议开源实现之一，我会说 zeromq 是你最好的选择，然后处理你在 R 或 python 中获得的所有数据，或者如果你的数据集是非常非常大的 MPI。另一种选择是，您可以在连接并运行 MPI 的不同机器上调用串行库，因为它们都单独连接到 Internet。R 真的很容易用 MPI 调用，python 也是如此。

# php - 将下拉菜单存储为实时变量？

> ID：12710162
> 
> 赞同：-1
> 
> 时间：2012-10-03T14:00:34.347
> 
> 标签：php, jquery

我有以下 PHP：

```
<?php
$default = 'Select a job role';
$query = "SELECT DISTINCT Job_Title FROM rates";

$result = mysql_query($query);

while($myrow = mysql_fetch_array($result)) {
$action = $myrow['Job_Title'];
echo "<option value='$action'".($action == $default ? ' selected="selected"' : '').">$action</option>\n";
}       
?> 
```

我需要将他们从此下拉列表中选择的任何内容存储为变量。显然，如果他们改变他们的选择，它将不断改变变量。

这背后的原因是我有另一个选择语句，其结果取决于此处的选择。如果仅使用 PHP 无法完成，那么如果需要，Jquery 是首选。

```
<select name="job-role">
<option value="J1">J1</option>
<option value="J2">J2</option>
<option value="J3">J3</option>
</select> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T14:06:53.610

您不能根据下拉列表更改 php 变量，除非您将表单发布回页面本身或通过 AJAX 发送。如果您想使用 jquery 获取值，您可以执行类似的操作

```
$(function(){

    var selectValue = $('select[name="job-role"]').val();

    $.post('somepage.php', { valueToSend: selectedValue },function(data){
        //HTTP-post completed
    });        

}); 
```

**某页.php**

```
if(isset($_POST['valueToSend'])) {

    $selectedValue = $_POST['valueToSend'];

    //use $selectedValue in your query 
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T14:15:54.327

要在选择新值时更新变量中的值，请使用 jQuery[`.change`](http://api.jquery.com/change)事件处理程序。至于将这个新值传达给服务器，您可以使用[ajax](http://api.jquery.com/category/ajax/)来做到这一点。我在下面包含一个示例[发布请求](http://api.jquery.com/jQuery.post/)。

```
$(document).ready( function() {

    var jobRole = $('select[name="job-role"]').val();

    $('select[name="job-role"]').change( function() {
        jobRole = $(this).val();
    });

    //...
    $.post("url.php", "jobRole="+ encodeUriComponent(jobRole), function() {
        // success
    });
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-03T14:13:00.813

试试[这个](http://jsfiddle.net/54p8y/2/)jsfiddle。

```
$(function(){
var selectValue = $('select[name="job-role"]').val(); //gets default selection
//alert(selectValue);
$('select[name="job-role"]').change(function(){
selectValue = $(this).val(); //gets changed selection
//alert(selectValue);
});
});​ 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-03T14:13:13.870

除非您按照 Johan 的建议进行操作，否则您无法通过 php 进行操作。在 jQuery 中，您需要将更改方法绑定到您的`select`

```
var value = '';
$('select[name="job-role"]').change(function() {
    value = $(this).val();
}) 
```

[小提琴](http://jsfiddle.net/ZCP5d/)

# compiler-construction - 使用手写编译器生成字节码时如何处理作用域

> ID：12710168
> 
> 赞同：1
> 
> 时间：2012-10-03T14:00:50.577
> 
> 标签：compiler-construction, scope, bytecode, stack-machine

我为一个简单的堆栈机器编写了一个小型编译器。它只能通过一些虚拟机黑客来组装和处理范围/功能。那就是我让它在字节码本身中定义范围和范围变量定义。

我能得到一些关于我应该如何处理范围的指示吗？

我面临的问题主要是，我如何让它知道何时以及何时不使用内部变量覆盖外部变量等。字节码是可变的，我更愿意改变它。

其他问题包括返回后如何将变量保留在外面。这样一个变量仍然有它的值。我可以将它推入堆栈，但我可以有很多变量。

我认为已经完成了一些编译器工作来检查这些事情，但我想不出需要做什么才能做到这一点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T15:27:44.467

一种方法是[在编译时重命名变量以确保没有屏蔽。](http://en.wikipedia.org/wiki/Name_resolution#Alpha_renaming_to_make_name_resolution_trivial)所以：

```
{
   declare foo;
   foo = assignment;
   {
     declare foo;

     foo = another_assignment;
     another_use = foo;
   }
   use = foo;
} 
```

相当于：

```
{
   declare foo_0;
   foo_0 = assignment;
   {
     declare foo_1;

     foo_1 = another_assignment;
     another_use = foo_1;
   }
   use = foo_0;
} 
```

编译时，您为每个变量维护一个“重命名堆栈”。和：

1.  每当您看到声明时，您都会生成一个新名称并将其推送到相应变量的重命名堆栈中。

2.  当您看到分配/使用时，您将名称替换为堆栈顶部的任何内容。

3.  当你离开一个作用域时，你把它从堆栈中弹出。

# springmockito - Springmockito 通过 XML 支持存根

> ID：12710171
> 
> 赞同：0
> 
> 时间：2012-10-03T14:01:06.817
> 
> 标签：springmockito

我正在尝试使用 Springockito 网站上描述的第二个示例： [https ://bitbucket.org/kubek2k/springockito/wiki/Home](https://bitbucket.org/kubek2k/springockito/wiki/Home)

```
<mockito:mock id="accountService" class="org.kubek2k.account.DefaultAccountService" /> 
```

但是，当调用其中一个 Mocks getter 方法时，如何对 Mock 进行存根，以便它返回我想要的内容？通过 XML 似乎不可能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T20:24:52.700

您必须将 mock 注入您的测试类（@Autowired 或 @Inject 是最简单的方法）并像普通的 Mockito mock 一样存根它。

Springockito 网页的修改示例：

```
@Autowired
private AccountService accountService;

@Test
public void shouldCountInterestForDeposit() {
    // given
    Deposit deposit = new Deposit(12);
    given(accountService.countInterestFor(deposit)).willReturn(1000);
    bank.addDeposit(deposit);

    // when
    bank.endOfTheMonth();

    // then
    (...)
} 
```

# knockout.js - 如果映射插件被调用两次，则淘汰赛验证在初始加载时不起作用

> ID：12710175
> 
> 赞同：1
> 
> 时间：2012-10-03T14:01:17.647
> 
> 标签：knockout.js, knockout-mapping-plugin, knockout-validation

这件事让我伤心了一段时间。

我有一个使用 Knockout、Knockout Mapping 和 Knockout Validation 的 Web 应用程序。除了这个问题，一切都很顺利。这个[Fiddle](http://jsfiddle.net/bmccord/eMHdH/)证明了这个问题。

为了演示这个问题，运行小提琴，然后从列表中选择一些东西。当它出现时，清除名称字段。您可能会或可能不会看到验证消息（它是随机的。在小提琴上，第一次运行时似乎永远不会显示，但在我的实际代码中，有时会出现，有时会在刷新页面时不显示）。

现在单击重新加载按钮并再次执行相同的操作。这次您应该会看到验证错误。

现在是真正有趣的部分。在 javascript 的底部，注释掉下面的行：

```
self.loadSupportData(); 
```

这只是为了防止第二个映射运行。再试一次实验。这次验证将在初始运行时起作用。

这是什么原因造成的？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-10-05T09:55:07.780

我认为您的问题是因为您在应用绑定之前加载了数据。

评论行：

```
self.loadData(); 
```

并修改最后几行：

```
var viewModel = new PersonAttributeListViewModel();
ko.applyBindings(viewModel);
viewModel.loadData(); 
```

它工作正常。

# java - 获取 Facebook 页面谈论一段时间内的价值？

> ID：12710183
> 
> 赞同：0
> 
> 时间：2012-10-03T14:01:37.713
> 
> 标签：java, facebook-graph-api, facebook-like

我想从一些页面中获得谈论领域。我知道我可以从图形 api 上的类似页面中获得此信息。例如，graph.facebook.com/facebook 将向我展示 facebook 当前谈论的价值。

但是有谁知道我是否可以从某个时期指定该值？例如，3 个月前谈论的价值是什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T18:31:17.773

您需要使用`/PAGE_ID/insights/page_storytellers`端点。有关可以访问的数据的完整列表，请参阅[见解 FQL 文档。](https://developers.facebook.com/docs/reference/fql/insights/)您可以附加`/day`或`/week`到`/days_28`this 以细化返回的数据周期。

您需要一个[页面访问令牌](https://developers.facebook.com/docs/authentication/pages/)`manage_pages`或来自有权访问此数据的页面管理员的用户访问令牌。

您可以使用`since`和`until`参数对此进行优化。

因此，要按天查看 2012 年 7 月的数据，您可以使用：

```
https://graph.facebook.com/PAGE_ID/insights/page_storytellers/day?since=2012-07-01&until=2012-07-31&access_token=XXXXXXX 
```

# youtube-api - AuthSub 令牌不适用于新的 YouTube 帐户

> ID：12710184
> 
> 赞同：0
> 
> 时间：2012-10-03T14:01:46.657
> 
> 标签：youtube-api

有没有其他人看到以下问题？

*   对于较旧的 youtube 帐户，我们可以请求 AuthSub 令牌并上传到这些帐户没有问题。

*   对于新的 youtube 帐户，我们可以请求 AuthSub 令牌，但是当我们尝试上传到该帐户时，我们会收到“未经授权”错误

我们计划最终迁移到 OAuth 2.0，但我想知道这是否是一个已知问题

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T18:06:14.770

*回答这个以防有人在这里徘徊*

好的，我将把它归档在“what the heck”下

事实证明，即使您加载 youtube 并通过您的 google ID 登录....您可能没有 youtube 帐户。我必须加载“http://www.youtube.com/create_channel”来创建频道/用户名才能进行这些 API 调用。

当用户没有帐户时，为什么登录屏幕会返回一个 AuthSub 令牌？！？就我的用户而言，他们看起来好像有一个帐户。YouTube 在顶部加载了他们的电子邮件，看起来像是一个有效的 youtube 登录！

谢谢，B。

# android - android中的网格视图图片拼图形成错误

> ID：12710189
> 
> 赞同：0
> 
> 时间：2012-10-03T14:02:14.477
> 
> 标签：android, android-layout, android-imageview

```
i.setLayoutParams(new GridView.LayoutParams(iwidth  , iheight ));
            i.setImageBitmap(duplicate.get(arg0));
            i.setPadding(1, 1, 1, 1); 
```

我使用上面提供空间实际上我正在拆分图像并使用 gridview 将拆分后的图像放置在 gridview 中，允许用户在网格视图中播放图片拼图，但拆分后的图像不完全适合网格视图 moddle 行图像缩小并且右侧图像放大了另一个问题是它们之间的间距，它提供了从一行到下一行的空间，但它没有提供空间列到列任何人都可以帮助我

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T14:20:17.087

我只是查看了文档，并且有一个`setVerticalSpacing()`和一个`setHorizontalSpacing()`方法。[检查出来](http://developer.android.com/reference/android/widget/GridView.html#setVerticalSpacing%28int%29)。

因此，您可以在网格级别设置，而不是在 ImageView 中设置间距。

# php - 使用 PHP 显示文件夹内容，但在文件夹为空时显示消息

> ID：12710201
> 
> 赞同：2
> 
> 时间：2012-10-03T14:02:52.383
> 
> 标签：php, html

我正在为我的工作场所创建一个 Intranet，并使用了一些我在网上找到的 php 来扫描它所在文件夹的内容并将它们显示为链接。它做得很好，但是当它在一个空文件夹中时，我希望它显示一条消息，例如“没有符合这些条件的记录。”。

有没有办法在 php 中添加一些东西来指定*是否没有列出的文件夹打印这个*？

我对php几乎一无所知，但是html和css没问题。

这是我在页面中使用的 php：

```
<?php
$dir=opendir(".");
$files=array();
while (($file=readdir($dir)) !== false)
{
    if ($file != "." and $file != ".." and $file != "A.php")
    {
        array_push($files, $file);
    }
}
closedir($dir);
sort($files);
foreach ($files as $file)
print "<div class='fileicon'>
           <a href='$file'>
               <img src='../../../images/TR-Icon.png'>
               <p class='filetext'>$file</p>
           </a>
      </div>";
?> 
```

如果您需要更多代码，例如整页 html 或 css，请告诉我。

提前感谢您的帮助。

编辑：

在尝试了 Josh 的解决方案后，它几乎成功了，但我现在打印了 3 次“未找到文件”。这是我现在使用的代码：

```
<?php
$dir=opendir(".");
$files=array();
while (($file=readdir($dir)) !== false)
{   
if( count($files) == 0 )
{
echo '<p>No files found</p>';
}
else
{
if ($file != "." and $file != ".." and $file != "A.php")
{
array_push($files, $file);
}
}
}
closedir($dir);
sort($files);
foreach ($files as $file)
print " <div class='fileicon'>
<a href='$file'>
<img src='../../../images/TR-Icon.png'>
<p class='filetext'>$file</p>
</a>
</div>";
?> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-03T14:04:59.477

只需执行以下操作：

```
if( count($files) == 0 )
{
  echo '<p>No files found</p>';
}
else
{
  // you have files
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-03T14:07:04.777

试试这个：

```
<?php
$dir=opendir(".");
$files=array();
while (($file=readdir($dir)) !== false)
{
    if ($file != "." and $file != ".." and $file != "A.php")
    {
        array_push($files, $file);
    }
}

closedir($dir);

if(count($files) == 0){
    die("There are no records matching those criteria.");
}else{
    sort($files);
    foreach ($files as $file)
        print " <div class='fileicon'>
                   <a href='$file'>
                       <img src='../../../images/TR-Icon.png'>
                       <p class='filetext'>$file</p>
                   </a>
                </div>";
}

?> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-03T14:13:59.253

您可以使用[count](http://php.net/manual/en/function.count.php)函数来检查文件数组中是否有任何文件，如下所示：

```
if(count($files) > 0) // check if there are any files in the files array
    foreach ($files as $file) // print the files if condition is true
        print " <a href='$file'>$file</a> <br />";
else 
    echo "ERROR!"; 
```

编辑：

您还可以使用[scandir](http://php.net/manual/en/function.scandir.php)函数。但是，此函数将为*当前目录*和*上一级*目录返回两个额外条目。您需要从文件数组中删除这些条目。您的代码将如下所示：

```
<?php
$dir   = "."; // the directory you want to check
$exclude = array(".", ".."); // you don't want these entries in your files array
$files = scandir($dir);
$files = array_diff($files, $exclude); // delete the entries in exclude array from your files array
if(!empty($files)) // check if the files array is not empty
{
    foreach ($files as $file) // print every file in the files array
        print " <div class='fileicon'>
<a href='$file'>
<img src='../../../images/TR-Icon.png'>
<p class='filetext'>$file</p>
</a>
</div>";
}
else 
{
    echo "There are no files in directory"; // print error message if there are noe files
}
?> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-03T14:07:04.943

`count`您可以在文件数组上使用简单的条件使用。

```
// ...
closedir($dir);
if (count($files) > 0) {
    // sort files and iterate through file array, printing html
} else {
    echo "There are no records matching those criteria.";
}
// ... 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-03T14:10:20.620

我认为您可以让它打印其他内容`if($files.length == 0)`，而仅正常打印`if($files.length > 0)`或其他内容。

我不懂php，但我知道java、html、css和javascript。我确定 php 中有类似的东西`array.length`（或其他东西来获取数组的长度）

我希望这可以帮到你。

**编辑**：我已经看到其他人已经回答了比我好 10 倍的问题。另外，php看起来很酷，我可以学习一下

# c# - Entity Framework 5 执行全表扫描

> ID：12710204
> 
> 赞同：9
> 
> 时间：2012-10-03T14:03:03.037
> 
> 标签：c#, entity-framework, entity-framework-5

我有以下代码：

```
public List<anEntity> Get(int page, int pagesize, Func<anEntity, IComparable> orderby)
{            
    using (var ctx = new MyContext())
    {                
        return ctx.anEntity.OrderBy(orderby).Skip(pagesize * page).Take(pagesize).ToList();                    
    }           
} 
```

当我检查我的数据库配置文件（SqlServer 2012）时，我可以看到一个可怕的全表扫描，没有任何“TOP”子句。

有趣的部分：

如果我做类似的事情但指定一个具体的 orderby：

```
return ctx.anEntity.OrderBy(x => x.aField).Skip(pagesize * page).Take(pagesize).ToList(); 
```

配置文件显示了一个漂亮的“TOP”子句。

我想避免有很多方法，每个“orderby”可能性都有一个。任何提示将不胜感激。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-10-03T14:06:26.853

那是因为您的`orderby`参数是函数而不是表达式。无法将任意函数转换为 SQL，因此在调用该函数之前，您的所有数据都必须位于客户端。

将参数类型更改为`Expression<Func<anEntity, T>>`，其中`T`是您应该添加到`Get`方法中的新通用参数，它将按预期工作。

当然，您将无法使用 custom `IComparable`，但没有办法解决这个问题：无法将自定义代码翻译成 SQL。

# c# - 如何以编程方式检查 NServiceBus 是否已完成所有消息的处理

> ID：12710212
> 
> 赞同：5
> 
> 时间：2012-10-03T14:03:46.723
> 
> 标签：c#, msmq, nservicebus

作为自动启动/停止我们的一些 NServiceBus 服务的努力的一部分，我想知道服务何时完成处理其输入队列中的所有消息。

问题是，当 NServiceBus 服务正在运行时，**我的 C# 代码报告的消息比实际存在的消息少**。所以当还剩下一条消息时，它认为队列是空的。如果服务停止，它会报告“正确”数量的消息。这很令人困惑，因为当我自己使用计算机管理应用程序中的专用队列视图检查队列时，它会显示“正确”的数字。

我正在使用以下 C# 代码的变体来查找消息计数：

```
var queue = new MessageQueue(path);
return queue.GetAllMessages().Length; 
```

我知道当有很多消息时这会表现得很糟糕。我正在检查的队列一次只能有少量消息。

我查看了 [其他](https://stackoverflow.com/questions/3869022) [相关](https://stackoverflow.com/questions/3686312) [问题](https://stackoverflow.com/questions/10757333)，但没有找到我需要的帮助。

任何见解或建议将不胜感激！

**更新：**我应该提到此服务位于分发服务器之后，该分发服务器在尝试关闭此服务之前已关闭。所以我有信心不会将新消息添加到服务的输入队列中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T07:29:35.083

问题是它实际上并不是“少一条消息”，而是取决于端点当前正在处理的消息数量，在多线程进程中，消息数量可能与线程数量一样高。

还有客户端进程继续向同一个队列发送消息的问题。

处理此问题的唯一“确定”方法可能是多次计数消息，中间有延迟，如果在一定次数的尝试中数量保持为零，您可以假设队列为空。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T18:55:24.177

WMI 就是答案！这是代码的第一遍。它无疑可以改进。

```
public int GetMessageCount(string queuePath)
{
    const string query = "select * from Win32_PerfRawData_MSMQ_MSMQQueue";
    var query = new WqlObjectQuery(query);
    var searcher = new ManagementObjectSearcher(query);
    var queues = searcher.Get();

    foreach (ManagementObject queue in queues)
    {
        var name = queue["Name"].ToString();
        if (AreTheSameQueue(queuePath, name))
        {
            // Depending on the machine (32/64-bit), this value is a different type.
            // Casting directly to UInt64 or UInt32 only works on the relative CPU architecture.
            // To work around this run-time unknown, convert to string and then parse to int.
            var countAsString = queue["MessagesInQueue"].ToString();
            var messageCount = int.Parse(countAsString);
            return messageCount;
        }
    }

    return 0;
}

private static bool AreTheSameQueue(string path1, string path2)
{
    // Tests whether two queue paths are equivalent, accounting for differences
    // in case and length (if one path was truncated, for example by WMI).

    string sanitizedPath1 = Sanitize(path1);
    string sanitizedPath2 = Sanitize(path2);

    if (sanitizedPath1.Length > sanitizedPath2.Length)
    {
        return sanitizedPath1.StartsWith(sanitizedPath2);
    }

    if (sanitizedPath1.Length < sanitizedPath2.Length)
    {
        return sanitizedPath2.StartsWith(sanitizedPath1);
    }

    return sanitizedPath1 == sanitizedPath2;
}

private static string Sanitize(string queueName)
{
    var machineName = Environment.MachineName.ToLowerInvariant();
    return queueName.ToLowerInvariant().Replace(machineName, ".");
} 
```

# ruby - 块中定义的Ruby模块？

> ID：12710214
> 
> 赞同：1
> 
> 时间：2012-10-03T14:03:55.703
> 
> 标签：ruby, module, block

我见过一个看起来像这样的红宝石块：

```
Vagrant::Config.run do |config|

   module MyModule      
   end

end 
```

在块内声明这样的模块有什么影响？

编辑：

具体来说，当虚拟机终止时，我有一个块要做一些清理工作，看起来像

```
Vagrant::Config.run do |config|

  # vagrant config stuff

   module Vagrant
     module Provisioners
      class ChefClient < Chef
        def cleanup
          # cleanup here
        end
      end
    end
  end
end 
```

如果模块是在 Vagrant::Config 块之外定义的，我会收到错误

```
'<module:Provisioners>': uninitialized constant Vagrant::Provisioners::Chef (NameError) 
```

而且我不确定为什么在 run 块中声明模块会有所不同。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T17:24:12.120

它将有条件地定义模块。请记住，块不一定要执行，由目标方法决定。

虽然您的特定示例是完全有效的 Ruby，但组织这样的事情可能会导致混乱。为了清楚起见，最好在块之外定义它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T14:14:39.357

除其他外，模块可用于为变量和常量提供新的命名空间。我会说这就是原因。

# configuration - 为单个页面配置 DisplayTag

> ID：12710219
> 
> 赞同：0
> 
> 时间：2012-10-03T14:04:12.700
> 
> 标签：configuration, struts2, displaytag

我的项目中有太多模块（大约 90 个）。但我想为每个模块保留单独的 displaytag.properties 文件，而不是为整个项目保留单个文件。

如何实现这一点。

我正在使用struts2

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T16:28:35.490

我认为您可以使用适当的包配置每个显示标签，记住 S2[文档](http://struts.apache.org/2.x/docs/localization.html)中的包搜索顺序：

*   ActionClass.properties 接口.properties
*   Interface.properties（每个接口和子接口）
*   BaseClass.properties（一直到 Object.properties）
*   ModelDriven 的模型（如果实现了 ModelDriven），对于模型对象从 1 开始重复
*   package.properties（类所在目录和每个父目录一直到根目录）
*   搜索 i18n 消息密钥层次结构本身
*   全局资源属性

并来自 DisplayTag 库的文档：

> 对于整个 Web 应用程序，创建一个名为“displaytag.properties”的自定义属性文件并将其放置在应用程序类路径中。Displaytag 将使用请求对象的语言环境来确定要使用的属性文件的语言环境；如果指定的文件中不存在所需的密钥，则将从更通用的属性文件中加载该密钥。

所以我猜 displaytag 将搜索 s2 可用捆绑包中的配置键。

# php - PHP：解析错误：语法错误，意外 $end

> ID：12710220
> 
> 赞同：-1
> 
> 时间：2012-10-03T14:04:21.730
> 
> 标签：php

我一直有语法错误，意外的 $end。

我检查了我的代码，但没有任何问题。我检查了所有的开始和结束括号。似乎是什么问题？

我的代码：

```
<?php
setcookie('name',$_POST['name']);

setcookie('lname',$_POST['lname']);

setcookie('add',$_POST['add']);

setcookie('age',$_POST['age']);

setcookie('contact',$_POST['contact']);

setcookie('email',$_POST['email']);

setcookie('user',$_POST['user']);

setcookie('pass',$_POST['pass']);

$con=mysql_connect("localhost","root","");
mysql_select_db("nnx",$con);

$tbl=mysql_query("SELECT * FROM tablename WHERE `username` =         '".mysql_real_escape_string($_POST['user'])."'");
while($row=mysql_fetch_array($tbl))
{

if($_POST['user']==$row['username'])
{
    header("location: /register.php?codeErr2=1");
        die;
}

$name=$_POST['name'];
$lname=$_POST['lname'];
$add=$_POST['add'];
$age=$_POST['age'];
$contact=$_POST['contact'];
$email=$_POST['email'];
$user=$_POST['user'];
$pass=$_POST['pass'];

if(($name!="")&&($lname!="")&&($add!="")&&($age!="")&&($contact!="")&&($email!="")&&    ($user!="")&&($pass!=""))
{
    $value=mysql_query("INSERT INTO tablename(name, lastname, address, age, contact,     email, username, password)
VALUES     ('".$_POST['name']."','".$_POST['lname']."','".$_POST['add']."','".$_POST['age']."','".$_PO    ST['contact']."','".$_POST['email']."','".$_POST['user']."','".$_POST['pass']."')");
}

else
{
    header("location: /register.php?codeErr=1");    
}

?>

<html>
<body bgcolor="green">
<center>

<h1>Welcome! These are the offered products</h1>
<table border="1" width="1000" height="500" bgcolor="yellow">
<tr>
<th>Product</th>
<th>Description</th>
</tr>
<tr>
<td>GARLIQUE</td>
<td>GARLIQUE
The All Natural Dietary Supplement
Produced from fresh garlic

</td>
</tr>
<tr>
<td>Right-CEE</td>
<td>Right-CEE (Sodium Ascorbate) …

</td>
</tr>
<tr>
<td>OLEIA</td>
<td>OLEIA CAPSULE
No More Pain, Heart to Gain

</td>
</tr>
</table>
<br>
<br>
<form name="product" action="order.php" method="post">
<input type="submit" value="Order">
</form>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-03T14:05:49.460

你忘了关闭`while`：

```
while($row=mysql_fetch_array($tbl))
{

if($_POST['user']==$row['username'])
{
    header("location: /register.php?codeErr2=1");
        die;
}
}//<---- here 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-03T14:05:56.003

您没有在`while`循环后关闭大括号。

缩进你的代码使这种事情更容易被发现！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-03T14:06:42.587

`{`您在循环上有一个左大括号`while`，但您似乎没有相应的右大括号。

# tomcat - JAX-RS 响应为 404 时的 HTML 响应

> ID：12710221
> 
> 赞同：3
> 
> 时间：2012-10-03T14:04:23.163
> 
> 标签：tomcat, http-status-code-404, jax-rs

我有一个 JAX-RS 资源类，它可以在发出某个请求时返回 404 响应。不幸的是，即使操作的方法被注释`@Produces({ MediaType.APPLICATION_XML, MediaType.APPLICATION_JSON })`，404 响应对象总是会导致 Tomcat 将自己的“未找到”HTML 错误页面推入正文。

这破坏了期望 XML/JSON 响应的客户端。在这些情况下如何关闭 Tomcat？

我的代码现在看起来像这样：

```
@GET
@Path("isbn/{isbn}")
@Produces({ MediaType.APPLICATION_XML, MediaType.APPLICATION_JSON })
public Response isbn(@PathParam("isbn") String isbn) {

    ProductSearchDO productSearch = ProductSvc.find( isbn );
    if (productSearch == null)
        return Responses.notFound().build();

    return Response.ok( productSearch ).tag( String.valueOf( productSearch.hashCode() ) ).build();
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T14:08:48.453

您不应该返回 404。只需返回一个空 JSON，您的客户端就可以处理它。

这种方法称为“软 404”（如果我没记错的话）。

这种方法也用于 Facebook：

[https://graph.facebook.com/search?q=nlknrekjfndjkfnsjkefbnejkrbfjedbfjekfbekj](https://graph.facebook.com/search?q=nlknrekjfndjkfnsjkefbnejkrbfjedbfjekfbekj)

**编辑：**

我会更好地解释它。正如 W3C[所说](http://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html#sec10.4.5)，如果应该使用 404

> 服务器未找到任何与请求 URI 匹配的内容。

实际上，您的服务器已经找到了一个匹配的 Request-URI，但只是响应为空。并且

> 当服务器不希望确切地揭示请求被拒绝的原因或**没有其他响应适用时**，通常使用此状态代码。

如果需要，您可以应用另一种响应。

如果您仍然想按自己的方式进行操作，可以尝试用空页面覆盖标准 Tomcat 404 页面，或要求客户端检查状态码

```
if(statusCode==404) { blablabla } 
```

* * *

**编辑2：**

反对什么？我不认为我的答案是错误的，你可以喜欢或不喜欢，但我不认为这实际上是一个错误的答案。

在您的情况下，您正在对某种产品进行研究。如果您找不到任何与您的搜索匹配的产品，为什么您应该返回 404？

有关此的更多来源：

[RESTful API 是否应该为对象数组返回 404？](https://stackoverflow.com/questions/6045895/should-a-restful-api-return-404-for-arrays-of-objects)

也在这里：

[REST 资源 url 中的查询字符串](https://stackoverflow.com/questions/3821663/querystring-in-rest-resource-url/3822676#3822676)

> “如果 URL 返回搜索结果，则不应返回 404。”

和这里一样：

[REST：映射 404 HTTP 状态代码](https://stackoverflow.com/questions/4340720/rest-mapping-404-http-status-codes) ，尤其是注释：

> 简单地说，“无结果”是一个有效的搜索结果。资源存在，它的表示只是“空”。因此，404 是不合理的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-21T14:30:50.773

`404 Not Found`是客户端错误，这意味着问题出在客户端请求不存在的页面上。在这种情况下，返回 404 是有意义的。

我认为**客户端**应该能够适当地处理 404 响应。您作为服务器正在通过返回错误代码进行尽职调查。由客户端决定是否能够处理响应。

# css - Visibility:collapse 呈现为 visibility:hidden

> ID：12710226
> 
> 赞同：6
> 
> 时间：2012-10-03T14:04:43.337
> 
> 标签：css

> **坍塌**
> 
> 仅适用于`table`元素。`collapse`删除行或列，但不影响`table`布局。行或列所占用的空间将可用于其他内容。如果在其他元素上使用了折叠，则它呈现为`hidden`.

[http://www.w3schools.com/cssref/pr_class_visibility.asp](http://www.w3schools.com/cssref/pr_class_visibility.asp)

但是，该元素仍然像`visibility: hidden`. 我已经在 Safari 和 Chrome 上进行了测试。任何人都有`table`维护布局但删除空间的解决方案？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-03T14:38:47.500

它不会在所有浏览器上按预期工作，只有 Firefox 和 IE（我现在无法确认 IE）。[MDN 文档`visibility`](https://developer.mozilla.org/en-US/docs/CSS/visibility)说：

> 在某些现代浏览器中，对 的支持`visibility:collapse`缺失或部分不正确。在许多情况下，它可能不会像`visibility:hidden`在表格行和列之外的元素上那样被正确处理。

您可以使用这个 jsFiddle 对其进行测试：http: [//jsfiddle.net/meT7k/](http://jsfiddle.net/meT7k/)。在 Chrome 中，第一行呈现为`visibility: hidden`. 在 Firefox 中，`collapse`正确应用。

`display: none`在 Chrome 中，当应用到行时，您会得到所需的结果。但是，这可能会强制重新布局整个表格（例如，更改`display`属性后列宽可能会改变）。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-03T14:21:23.900

将内容包装在 a 中`<span></span>`并将显示设置为无。

# python - 将两个现有地块合并为一个地块

> ID：12710227
> 
> 赞同：12
> 
> 时间：2012-10-03T14:04:43.557
> 
> 标签：python, matplotlib

我还没有真正尝试过任何方法来做到这一点，但我想知道是否有办法将已经存在的两个图合并到一个图中。任何投入将不胜感激！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-03T14:36:20.613

这是一个完整的最小工作示例，它完成了从多个图中提取和组合数据所需的所有步骤。

```
import numpy as np
import pylab as plt

# Create some test data
secret_data_X1 = np.linspace(0,1,100)
secret_data_Y1 = secret_data_X1**2
secret_data_X2 = np.linspace(1,2,100)
secret_data_Y2 = secret_data_X2**2

# Show the secret data
plt.subplot(2,1,1)
plt.plot(secret_data_X1,secret_data_Y1,'r')
plt.plot(secret_data_X2,secret_data_Y2,'b')

# Loop through the plots created and find the x,y values
X,Y = [], []   
for lines in plt.gca().get_lines():
    for x,y in lines.get_xydata():
        X.append(x)
        Y.append(y)

# If you are doing a line plot, we don't know if the x values are
# sequential, we sort based off the x-values
idx = np.argsort(X)
X = np.array(X)[idx]
Y = np.array(Y)[idx]

plt.subplot(2,1,2)
plt.plot(X,Y,'g')
plt.show() 
```

![在此处输入图像描述](../Images/42dd1dc26d1e4d7e85f408f2a5cf1aa0.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T14:27:14.793

假设您使用的是 Matplotlib，您可以将图形的数据作为 NX2 numpy 数组获取，如下所示：

```
gca().get_lines()[n].get_xydata() 
```

# java - 将组件添加到类路径时如何使组件自己注册

> ID：12710228
> 
> 赞同：0
> 
> 时间：2012-10-03T14:04:45.133
> 
> 标签：java, plugins, architecture, module

我想在我正在开发的 Web 应用程序中添加某种面向插件的功能。这背后的主要原因是能够为每个客户构建不同类型的分发包（其中包含不同的 jar 文件集）。

唯一的事情是我不想更改应用程序的配置文件来告诉它在哪里可以找到它的插件。我希望应用程序发现它的插件。

我想我需要一些非常简单直接的东西。

我认为一种可能的解决方案是尝试在 jar 中的类路径类中找到它（它将执行必要的设置操作），实现一些预定义的接口。

有没有办法做到这一点？先感谢您。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-04T00:10:20.533

请参阅[java.util.ServiceLoader](http://download.java.net/jdk7/archive/b123/docs/api/java/util/ServiceLoader.html)的 Javadoc 。

# iphone - 自定义 UITableViewCell 初始化

> ID：12710235
> 
> 赞同：3
> 
> 时间：2012-10-03T14:05:14.170
> 
> 标签：iphone, objective-c, ios, uitableview

我`UITableViewCell`使用故事板创建了一个自定义。

我像这样加载它：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    HJAddCell *cell = [tableView dequeueReusableCellWithIdentifier:@"addCell"];
    // setting properties of cell 
    return cell;
} 
```

现在我需要在初始化期间以编程方式添加更多自定义。但问题是在 my`HJAddCell`中，`init`没有调用这些方法。我应该怎么做才能`init`调用该方法，或者是否有任何其他方法可以在初始化时以最小的努力向自定义单元类添加更多自定义代码。

更新：我需要为 UILabel 添加边框。我在故事板中没有找到任何可以做到这一点的事情。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-10-03T14:14:33.100

UIViews 有两个[指定的初始化器](http://developer.apple.com/library/ios/#documentation/general/conceptual/DevPedia-CocoaCore/MultipleInitializers.html)：`initWithFrame:`和`initWithCoder:`. `initWithCoder:`如果从 nib/storyboard 加载视图，则使用`initWithFrame`- 如果以编程方式创建视图。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-03T14:10:32.680

当然不会调用 init 方法。您自己没有调用任何 init 方法。如果您在表格视图中注册 HJAddCell 的 nib，则调用的初始化方法是 initWithCoder。如果您使用的是 nib，您还应该问自己为什么需要在运行时自定义自定义 UITableViewCell。我的意思是，它已经是一个自定义单元格。您应该创建具有所需属性的单元格。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-03T14:10:08.827

向 HJAddCell 添加一个名为 reset 的新方法怎么样？将每次使用之前需要发生的初始化代码移到 reset 方法中，并从初始化程序中调用 reset。

然后你会在你的单元出队后调用重置方法。

# c# - C# 服务定时获取数据

> ID：12710237
> 
> 赞同：0
> 
> 时间：2012-10-03T14:05:26.720
> 
> 标签：c#, service, timer, copy, timed

我需要创建一个服务以安装在本地 PC 上，该服务将定期查找服务器上的文件路径，并将其内容复制并粘贴到本地 PC 上的目标位置。我想将它设置为每六或十二小时左右运行一次。我还需要它来使用提升的凭据运行复制命令。我们不能使用计划任务，因为我们的组策略由于病毒而禁用了这些任务。以下是我目前所拥有的，并不多。

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.ServiceProcess;
using System.IO;
using System.Timers;

namespace PHSReportUpdater
{
  public class Timer1
  {
      private static System.Timers.Timer aTimer;

      public static void Main()
      {
          // Create a timer with an interval
          aTimer = new System.Timers.Timer(600000);

          // Hook up the Elapsed event for the timer
          aTimer.Elapsed += new ElapsedEventHandler(OnTimedEvent);

          // Set the Interval
          aTimer.Interval = 21600000;
          aTimer.Enabled = true;
      }

      private static void OnTimedEvent(object source, ElapsedEventArgs e)
      {
          string reportSource;
          string reportDest;
          reportSource= @"V:\PrivateFolders\McKesson Surgery & Anesthesia\Crystal Reports\ProMedica Custom Reports\PHS PC\*.rpt";
          reportDest= @"C:\Program Files\McKesson\PHS\VER15.0\Reports";
          File.Copy(reportSource, reportDest);
      }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T15:29:24.363

“由于病毒而禁用那些？” - 这很可疑。听起来问题出在机器上的另一个应用程序/任务计划上，而不是任务计划程序本身。

任务调度*器是*这里的方法，没有理由*不*将它用于定期调度（让它运行你的控制台应用程序）。

如果你*必须*有这样的服务，那么不要依赖计时器，使用[Quartz.NET](http://quartznet.sourceforge.net/)，因为它对调度任务/作业等有*非常*丰富的支持，并且是专门为此目的而创建的。

在这种特殊情况下，一个[`SimpleTrigger`](http://quartznet.sourceforge.net/tutorial/lesson_5.html)实例会做，只要给它`repeatInterval`你希望你的任务运行的那个。

如果您需要支持“每个星期五中午”的概念（由于夏令时等原因，您需要它），那么您需要一个[`CronTrigger`](http://quartznet.sourceforge.net/tutorial/lesson_6.html).

设置好触发器后，只需根据触发器的触发设置要执行[的计划和作业](http://quartznet.sourceforge.net/tutorial/lesson_1.html)即可。

# php - 使用 INI 文件设置标签装饰器的选项

> ID：12710243
> 
> 赞同：1
> 
> 时间：2012-10-03T14:05:46.963
> 
> 标签：php, zend-framework, zend-form

```
elements.elementName.options.decorators.label = "Label"
elements.elementName.options.decorators.label.options.tag = "div" 
```

这曾经在从 Zend 1.9.7 升级到 1.12.0 之前工作。我在任何地方都找不到它现在应该如何工作。没有第二行它打印标签，但没有 div 标签。有了第二行，它变得非常难过并说：

> `Zend_Loader_PluginLoader_Exception`: 在注册表中找不到名为“Div”的插件

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T05:42:32.853

呸。自己解决了。答案是将第一行更改为：

```
elements.elementName.options.decorators.label.decorator = "Label" 
```

即使语法错误，它也恰好适用于旧版本。

# javascript - 什么可以防止在 IE8 中触发 keydown 事件？

> ID：12710254
> 
> 赞同：1
> 
> 时间：2012-10-03T14:06:10.623
> 
> 标签：javascript, internet-explorer, keydown, textinput

我做了一个可编辑的实现，其行为是：

dblclick 元素使其可编辑：

*   创建了一个输入
*   元素内容清空
*   附加到元素的输入
*   将 keydown 事件处理程序附加到输入，以在用户按 Enter 时禁用编辑
*   带有模糊事件的同上

它在体面的浏览器中运行良好，但在 IE8 上会中断。

有两个问题：

*   `input.focus()`将调用模糊事件处理程序（wtf??）
*   击键不会生成被 keydown 处理程序拦截的事件，所以我的处理程序在输入被击中时验证不起作用
*   我检查了输入上的点击事件，它们很好

问题是，如果我在极简示例中运行示例，它仍然有效，但在我的应用程序中，它不会。

**什么可以防止这些 keydown 事件被触发/捕获？**

这是实现：

```
widget.Editable = function( el, options ) {
    this.element = $(el).addClass('editable');
    this.value = this.element.text();

    var _that = this;
    this.element.dblclick( function(e) {
        _that.enableEdition();
    } );
};

widget.Editable.prototype = {
    disableEdition: function( save, e ) {
        this.value = this.input.val();
        this.input.remove();
        this.element.text( this.value ).removeClass('dragDisable');
        this.editionEnabled = false;
        this.onupdate( e, this.value, this.element );
    },
    /**
     * enables the field for edition. Its contents will be placed in an input. Then
     * a hit on "enter" key will save the field.
     * @method enableEdition
     */
    enableEdition: function() {
        if (this.editionEnabled) return;
        var _that = this;
        this.value = this.element.text();
        this.input = $( document.createElement('input') ).attr({
            type:'text',
            value:this.value
        });
        this.element
            .empty().append( this.input )
            .addClass('dragDisable'); //We must disable drag in order to not prevent selection
        this.input.keydown( function(e) {
            IScope.log('keydown editable:', e );
            switch ( e.keyCode ) {
            case 13:
                _that.disableEdition( true );
                break;
            default:
                break;
            }
        } );
        this.input.click( function() {
            console.log('input clicked');
        });

        //if ( !YAHOO.env.ua.ie ) 
        //  this.input.blur( function( e ) {
        //      IScope.log( "editable blurred", e );
        //      _that.disableEdition( true );
        //  });

        //this.input.focus();
        this.editionEnabled = true;
    }
}; 
```

# mysql - 在所有数据库中查找列

> ID：12710256
> 
> 赞同：3
> 
> 时间：2012-10-03T14:06:25.473
> 
> 标签：mysql, sql

如果我有一个`some_database`包含多个表的数据库，例如：

```
table_one
table_two
table_three 
```

在哪里

`table_one`拥有`CPV_one`

`table_two`拥有`CPV_two`

`table_three`拥有`CPV_three`

我需要找到所有具有类似列的表`'%CPV%'`

这可以通过sql查询来完成吗？我想避免一一检查所有表格。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-03T14:09:44.137

您可以查询`information_schema`以获取数据库中具有匹配列名的每个表的列表：

```
SELECT
    TABLE_NAME, COLUMN_NAME

FROM
    information_schema.COLUMNS

WHERE
    TABLE_SCHEMA = 'SOME_DATABASE'
    AND COLUMN_NAME LIKE '%CPV%' 
```

**编辑**（仅选择`TABLE_NAME`列）
正如评论中指出的那样，如果您只想选择表的名称（没有匹配的列列表），您还应该使用`DISTINCT`关键字 - 否则将返回重复的行匹配的每一列的同一个表：

```
SELECT
    DISTINCT TABLE_NAME
FROM
    information_schema.COLUMNS
WHERE
    TABLE_SCHEMA = 'SOME_DATABASE'
    AND COLUMN_NAME LIKE '%CPV%' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T14:09:43.757

在这里，您可以获取具有所需条件的表名的代码：

```
SELECT DISTINCT TABLE_NAME
  FROM information_schema.Columns
 WHERE COLUMN_NAME LIKE '%CPV%'; 
```

有关查看的更多详细信息，[请点击此处](http://dev.mysql.com/doc/refman/5.0/en/information-schema.html)**`INFORMATION SCHEMA`**

和[这里的桌子](http://dev.mysql.com/doc/refman/5.0/en/columns-table.html)**`COLUMNS`**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-03T14:10:07.033

```
 SELECT DISTINCT TABLE_NAME 
    FROM INFORMATION_SCHEMA.COLUMNS
    WHERE TABLE_NAME LIKE '%CPV%'
        AND TABLE_SCHEMA='YourDatabase'; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-03T14:11:48.623

查询 MySQL information_schema 怎么样？

```
SELECT TABLE_NAME
  FROM information_schema.COLUMNS
 WHERE COLUMN_NAME LIKE '%CPV%' 
```

# perl - Perl 进程之间共享只读内存

> ID：12710258
> 
> 赞同：9
> 
> 时间：2012-10-03T14:06:27.440
> 
> 标签：perl, memory, process, shared, readonly

我希望让我的 Perl 程序使用多个内核。它逐步读取查询输入，并将其中的块与每次运行时从文件加载到内存中的只读数据结构进行比较。该数据结构通常为几千兆字节，是一小组用于小型 C 例程的打包字符串。当进程分叉时，所有内容都会被复制，这在多核机器上会迅速耗尽 RAM。我尝试了几个非标准模块，但都导致运行缓慢和/或损坏 RAM。我认为，对于只读数据，Perl 不会坚持制作副本。其他语言可以做到。有人有想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T17:12:49.960

Fork 通常不会复制内存，直到它被修改（搜索 copy on write 或 COW）。您确定您正在正确测量内存使用情况吗？从 free 中减去之前/之后的值，而不是使用 top。

编辑 - 示例脚本

尝试使用以下设置运行以下命令： ./fork_mem_usage 5 10000 ./fork_mem_usage 25 10000 ./fork_mem_usage 5 100000 ./fork_mem_usage 25 100000

如果第一次增加大于后续增加，则 fork 正在使用写时复制。几乎可以肯定是（当然 Windows 除外）。

```
#!/usr/bin/perl
use strict;
use warnings;

my $num_kids  = shift @ARGV;
my $arr_size  = shift @ARGV;
print "$num_kids x $arr_size\n";

my @big_array = ('abcdefg') x $arr_size;
die "Array wrong length" unless ($arr_size == @big_array);

print_mem_usage('Start');

for my $i (1..$num_kids) {
    my $pid = fork();
    if ($pid) {
        if ($i % 5 == 0) {
            print_mem_usage($i);
        }
    }
    else {
        sleep(5);
        exit;
    }
}

print_mem_usage('End');
exit;

sub print_mem_usage {
    my $msg = shift;
    print "$msg: ";
    system q(free -m | grep buffers/cache | awk '{print $3}');
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T08:50:25.883

您可以使用 Cache::FastMmap 来存储共享数据。听说有人用这个做IPC而不是缓存，这个缓存是进程间共享的。其中大部分是用 C 编写的。不要忘记在初始化时添加 'raw_values=1'。可以压缩缓存中的值，因此如果您有足够的 CPU 并且您的数据可压缩，它将为您节省大量内存。

它非常快，这里有一些基准：[http ://cpan.robm.fastmail.fm/cache_perf.html](http://cpan.robm.fastmail.fm/cache_perf.html)

> 因为 Cache::FastMmap mmap 是一个共享文件到您的进程内存空间中，这会使每个进程看起来非常大，即使它只是在使用缓存的所有进程之间共享的 mmap 内存，如果缓存的使用率越来越低。
> 
> 但是，操作系统会认为您的进程非常大，这可能意味着您遇到了一些您之前设置的 BSD::Resource 或“ulimit”，您认为这些是正常的，但现在不再存在，所以请注意。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-03T14:20:50.123

### 编辑和总结：

`threads::shared`关于成为一个选项，我是非常错误的。在创建线程时，甚至共享数据结构也会被复制。这确实很糟糕，因此我可以总结出 Perl 完全无法进行内存密集型计算。

* * *

当一个进程`fork`s时，内核复制整个进程。驻留在 RAM 中的所有内容都是重复的。没有任何语言可以解决这个问题。但是，您可以尝试内存映射，也可以使用线程。

Perl 线程是一种`fork`模拟，但您可以将变量声明为线程之间共享：

```
use threads;
use threads::shared;

my $sharedVariable :shared = 0;

my @worker;

for my $i (1 .. 6) {
   push @worker, threads->create(\&worker_sub);
}

$_->join() foreach @worker;

sub worker_sub {
   sleep rand 5;
   print $sharedVariable, "\n";
} 
```

如果`$sharedVariable`在一个线程中更新，则更改也会传播到其他线程。如果将 print 语句替换为

```
print threads->tid, "-->", ++$sharedVariable, "\n"; 
```

# backbone.js - 从带有主干帖子奇怪参数的模型中获取数据

> ID：12710259
> 
> 赞同：0
> 
> 时间：2012-10-03T14:06:27.093
> 
> 标签：backbone.js

我创建了一个这样的模型和集合：

```
var TestModel = Backbone.Model.extend({
    initialize: function () {
    },
    defaults: {
        'id': null,
        'title': '',
        'description': ''
    }
});

TestCollection = Backbone.Collection.extend({
    model: TestModel,
    url: function () {
        return 'Test/GetAll';
    },
}); 
```

然后我有一个视图，我尝试像这样加载：

```
 var testCollection = new TestCollection();
    var testListView = new TestListView({ collection: testCollection });
    testCollection.fetch(); 
```

但它会创建一个请求，例如： `Test/GetAll?_=1349272902901`失败。你们有谁知道为什么它将这个类似 id 的参数附加到请求中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T14:09:31.517

尝试：

```
testCollection.fetch({ cache: false }); 
```

# c# - 通过 C# 在 SharePoint 2010 中获取默认服务帐户

> ID：12710260
> 
> 赞同：1
> 
> 时间：2012-10-03T14:06:32.527
> 
> 标签：c#, sharepoint-2010

我目前正在尝试制作一个测试控制台应用程序，它将检索 SharePoint Farm 帐户并将其与本地管理员用户列表进行比较。但是，我在实际获取默认服务帐户时遇到了问题。目前我正在使用的是：

```
SPProcessAccount user = SPFarm.Local.DefaultServiceAccount; 
```

但这会返回 NullReferenceException: Object reference not set to an instance of an object。

我也试过：

```
string user = SPFarm.Local.DefaultServiceAccount.LookupName(); 
```

这会返回相同的异常。

这可能是我的一个愚蠢的错误，但我一直在努力解决这个问题，但没有人能帮助我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T16:14:18.877

在做了一些更多的探索和研究之后，我发现了这个问题。在调试模式下运行时，我选择了“任何 CPU”而不是 x64 位（Sharepoint 2010 仅与 64 位机器兼容）。我还在使用 .NET 4.5 框架，Microsoft.SharePoint 目前显然不支持该框架。切换到 64 位和 .NET 3.5 后一切正常。

# google-drive-api - 谷歌驱动器：redirect_uri_mismatch

> ID：12710262
> 
> 赞同：25
> 
> 时间：2012-10-03T14:06:34.777
> 
> 标签：google-drive-api, google-drive-realtime-api

我遵循了这个[基本教程](https://developers.google.com/drive/quickstart)，但我得到了：

> Eroare:redirect_uri_mismatch 请求中的重定向 URI：urn:ietf:wg:oauth:2.0:oob 与注册的重定向 URI 不匹配

在我的谷歌搜索中，我了解到我在 API 控制台中所做的某些设置有问题。我启用了 Drive API 并在表 API Access 中进行了一些设置。我获取客户端 ID 和客户端密码，并将这两个值放在客户端源中，但我不知道在重定向 URI 中放置什么。

什么应该包含重定向 URI？

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-10-03T16:36:38.037

URI`urn:ietf:wg:oauth:2.0:oob`是一个特殊的URI，用于识别浏览器外应用程序，即非Web 应用程序（桌面、移动、命令行等）。

在 API 控制台中创建凭据时，请确保选择“**已安装**的应用程序”作为应用程序类型，并且重定向 URI 将自动设置为`urn:ietf:wg:oauth:2.0:oob`并在发出请求时防止“redirect_uri_mismatch”。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2014-03-18T11:42:23.920

URI

```
urn:ietf:wg:oauth:2.0:oob 
```

仅适用于为“已安装的应用程序”生成的那些 Google 客户端 ID。

因此，要解决您的问题，您必须创建一个新的客户端 ID 并将应用程序类型设置为“***已安装的应用程序***”。在那里，您可以获得所需的 ClientId 和 ClientSecret。

1.  [在这里](https://console.developers.google.com)创建一个新项目

2.  从左侧栏中选择 API 并确保 Drive SDK 已打开

3.  转到 API 下方的凭据，点击“创建新客户 ID”

4.  选择已安装的应用程序并键入 iOS 并提供捆绑 ID（或简单地选择“其他”）

5.  复制客户端 ID 和客户端密码以在您的应用程序中使用。

重定向 URI 是自动生成的，应该可以防止您遇到错误。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2020-11-11T15:14:38.893

当您在 API 控制台中创建凭据时，选择“TV 和受限输入设备”，这将允许`urn:ietf:wg:oauth:2.0:oob`redirect_uri，一旦它通过身份验证，将显示一个代码供您粘贴到应用程序中。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-02-28T20:02:05.470

对于那些 Web 应用程序，请将 URI 定义为您的 php url，因为它可以处理令牌并操作 google 驱动器。

# c# - C# 中文档成像的代码替代方案（不是 OCR）

> ID：12710263
> 
> 赞同：1
> 
> 时间：2012-10-03T14:06:34.600
> 
> 标签：c#, image, pdf, document

我被要求用 C# 设计一个基于 Web 的文档成像解决方案。到目前为止，我只发现了像 Accusoft 之类的昂贵的 SDK 模块`ImagXpress`。`MODI`看起来很有希望，但似乎更以 OCR 为中心，这可能超出了范围。

.Net 中是否有解决方案允许我在不购买昂贵的 SDK 的情况下使用 PDF 格式在文档扫描、操作/查看中进行编码？我希望能找到一个正确的研究方向。

简单范围：

*   将文档扫描为 PDF 格式
*   查看/保存文档

任何帮助是极大的赞赏。

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T14:11:28.483

[您可以使用 Silverlight 获取光栅图像](https://stackoverflow.com/questions/4155998/is-there-a-non-activex-approach-to-scanning-documents-into-a-web-app)，然后使用[Silverlight](https://stackoverflow.com/questions/7523715/how-to-create-pdf-on-silverlight-4)或 Asp.net（服务器端）中的 PDF 生成库生成 PDF。

# java - 读取android设备唯一ID，创建二维码URL并让浏览器打开URL

> ID：12710264
> 
> 赞同：0
> 
> 时间：2012-10-03T14:06:35.583
> 
> 标签：java, android, qr-code

我正在寻找读取 android 设备唯一 ID（mac 地址或 android ID）并将其嵌入到 QR COde 类型的 URL 中并要求浏览器打开该 URL。在android中解决这个问题的最佳方法是什么，使用单独的应用程序？还是通过设置应用程序进行？从长远来看，这个 URL 将指向一个网络服务器，该服务器将读取 URL，特别是唯一 ID，并查看是否有需要推送到这个唯一 ID 设备的内容。

# android - 在 ActionBar 中访问 actionView

> ID：12710276
> 
> 赞同：3
> 
> 时间：2012-10-03T14:07:11.237
> 
> 标签：android, android-actionbar, actionbarsherlock

我想在我的操作栏中创建一个始终扩展的搜索窗口。我正在使用 ActionBar Sherlock 库。根据我发现的一些示例，这段代码应该可以解决问题

```
 public boolean onCreateOptionsMenu(Menu menu) {
    MenuInflater inflater = this.getSupportMenuInflater();
    inflater.inflate(R.menu.action_bar, menu);

    MenuItem searchItem = menu.findItem(R.id.action_bar_search);
    SearchView searchView = (SearchView) searchItem.getActionView();  //returns null
    searchView.setIconifiedByDefault(false);

    return true;
} 
```

然而，getActionView(); 返回空值。是否有其他方法可以访问 searchView，以便我可以调用 setIconifiedByDefault(false); 方法 ？我想在xml文件中保留searchView的定义如下

```
 <menu xmlns:android="http://schemas.android.com/apk/res/android" >

    <item android:id="@+id/action_bar_search"
          android:title="@string/action_bar_search"
          android:icon="@drawable/ic_magnify"
          android:showAsAction="always"
          android:actionViewClass="android.widget.SearchView" />
    </menu> 
```

谢谢你的帮助

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-11T10:38:10.707

您的问题可能与您的 XML 有关。更改`android:actionViewClass="android.widget.SearchView"`为`android:actionViewClass="com.actionbarsherlock.widget.SearchView"`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T14:21:02.703

你确定你使用的是正确的`R.menu...`链接吗？也尝试使用`getMenuInflater();`而不是`getSupportMenuInflater();`

# html - 如何在 CakePHP 2.2 中输出原始 HTML？

> ID：12710278
> 
> 赞同：1
> 
> 时间：2012-10-03T14:07:13.757
> 
> 标签：html, cakephp

我有这个属性，它是从 TinyMCE 编辑器保存的 HTML：

```
<?php echo h($person['Person']['CurriculumVitae']); ?> 
```

如何将其显示在网络上并呈现为 RAW Html 而不是简单的字符串？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T11:26:37.857

只是删除 h() 可能会解决您的问题，但它会打开可能的安全漏洞，因为从 TinyMCE 保留 html 的字段现在将成为可能的安全漏洞。

我遇到了完全相同的问题，并通过使用[http://htmlpurifier.org/](http://htmlpurifier.org/)输出 tinymce HTML 来解决它。我还围绕它编写了一个 CakePHP 插件。[https://github.com/burzum/HtmlPurifier](https://github.com/burzum/HtmlPurifier)

HtmlPurifier 将允许您配置一组允许的 Html 元素甚至它的属性。因此，您可以例如指定 href 是允许的，但 class 是不允许的。

您需要为 HtmlPurifier 创建一个配置，该配置将匹配您允许用户使用 TinyMce 执行的任何操作。它将从用户输入的标记中删除所有不允许的标签和属性。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-03T14:15:53.463

不要将变量包装在 中`h()`，它是 的别名`htmlspecialchars()`，它会转义 HTML 实体：

```
<?php echo $person['Person']['CurriculumVitae']; ?> 
```

# .net - 如何仅使用物理 wsdl 文件生成服务引用

> ID：12710281
> 
> 赞同：137
> 
> 时间：2012-10-03T14:07:22.103
> 
> 标签：.net, web-services, service-reference

多年来，我一直在创建和使用 Web 服务，并且始终能够使用 Visual Studio 从客户端创建服务引用。我需要使用第三方服务，但他们拒绝打开安全性，因此我可以查看 wsdl 并提供服务参考。这是一项面向公众的服务，所以我认为不需要这种级别的安全性，但它就是这样。

我知道这是一个 n00b 问题，我很惭愧地问这个问题，但是当我可用的只是客户通过电子邮件发送给我的 wsdl 的物理副本时，如何在我的客户中创建等效的服务参考信息？web.config 更改，SOAP 数据上的对象层等。就像使用自动服务引用一样，我只想打开到服务的连接并开始将其与定义的对象一起使用。

据我所知，第三方服务不是 WCF，而是 SOAP。我正在使用 VS 2010 顺便说一句。在此先感谢，肯

* * *

## 回答 #1

> 赞同：198
> 
> 时间：2012-10-04T16:07:32.310

**这可能是最简单的方法**

*   右键单击项目并选择“添加服务引用...”
*   在地址：框中，输入下载/修改的 wsdl 的物理路径（C:\test\project....）。
*   打去

* * *

## 回答 #2

> 赞同：85
> 
> 时间：2012-10-03T14:11:55.397

**有两种方法可以解决这个问题。您可以使用 IDE 生成 WSDL，也可以通过命令行生成。**

***1\. 通过 IDE 创建它：***

在解决方案资源管理器窗格中，右键单击要将服务添加到的项目：

[![在此处输入图像描述](../Images/604df83babec3bf350b02c6f0b407375.png)](https://i.stack.imgur.com/YkB7f.png)

然后，您可以输入服务 WSDL 的路径并点击 go：

[![在此处输入图像描述](../Images/3ab4f85d2f5167fd9123134fe879953e.png)](https://i.stack.imgur.com/Iei9t.png)

***2\. 通过命令行创建它：***

打开 VS 2010 命令提示符（程序 -> Visual Studio 2010 -> Visual Studio 工具）
然后执行：

```
WSDL /verbose C:\path\to\wsdl 
```

然后 WSDL.exe 将输出一个 .cs 文件供您使用。

如果您有随文件收到的其他依赖项，例如 xsd，请将它们添加到参数列表中：

```
WSDL /verbose C:\path\to\wsdl C:\path\to\some\xsd C:\path\to\some\xsd 
```

如果需要 VB 输出，`/language:VB`除了`/verbose`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2021-11-30T07:32:20.883

前辈展示了如何从本地文件导入，但您的 WSDL 引用一个或多个 XSD 的可能性很小，您将收到错误：

[![WSDL 引用错误](../Images/a94b73cd04667256d113ea9acf299d34.png)](https://i.stack.imgur.com/NIxC9.png)

您必须下载所有引用的 XSD 文件，并将它们放在与引用的 WSDL 相同的目录中。然后您将不得不手动编辑 WSDL，并将**schemaLocation**更改为本地下载的文件。

前

```
 <wsdl:types>
    <xsd:schema targetNamespace="http://tempuri.org/Imports">
      <xsd:import schemaLocation="http://gate.somesite.local:8084/Shop/SomeService.svc?xsd=xsd0" namespace="http://tempuri.org/" />
      <xsd:import schemaLocation="http://gate.somesite.local:8084/Shop/SomeService.svc?xsd=xsd1" namespace="http://schemas.microsoft.com/2003/10/Serialization/" />
      <xsd:import schemaLocation="http://gate.somesite.local:8084/Shop/SomeService.svc?xsd=xsd2" namespace="http://schemas.microsoft.com/2003/10/Serialization/Arrays" />
    </xsd:schema>
  </wsdl:types> 
```

后

```
 <wsdl:types>
    <xsd:schema targetNamespace="http://tempuri.org/Imports">
      <xsd:import schemaLocation="tempuri.org.xsd" namespace="http://tempuri.org/" />
      <xsd:import schemaLocation="schemas.microsoft.com.2003.10.Serialization.xsd" namespace="http://schemas.microsoft.com/2003/10/Serialization/" />
      <xsd:import schemaLocation="schemas.microsoft.com.2003.10.Serialization.Arrays.xsd" namespace="http://schemas.microsoft.com/2003/10/Serialization/Arrays" />
    </xsd:schema>
  </wsdl:types> 
```

请注意，那些下载的 XSD 文件也有可能引用 Web 地址。

像这样：

前

```
<xs:schema xmlns:tns="http://schemas.datacontract.org/2004/07/DaxServiceLibrary.Messages" elementFormDefault="qualified" targetNamespace="http://schemas.datacontract.org/2004/07/DaxServiceLibrary.Messages" xmlns:xs="http://www.w3.org/2001/XMLSchema">
<xs:import schemaLocation="http://gate.somesite.local:8084/Shop/DaxService.svc?xsd=xsd2" namespace="http://schemas.microsoft.com/2003/10/Serialization/Arrays" /> 
```

后

```
<xs:schema xmlns:tns="http://schemas.datacontract.org/2004/07/DaxServiceLibrary.Messages" elementFormDefault="qualified" targetNamespace="http://schemas.datacontract.org/2004/07/DaxServiceLibrary.Messages" xmlns:xs="http://www.w3.org/2001/XMLSchema">
  <xs:import schemaLocation="schemas.microsoft.com.2003.10.Serialization.Arrays.xsd" namespace="http://schemas.microsoft.com/2003/10/Serialization/Arrays" /> 
```

# image - 输出带有图像的当前自定义分类术语的子术语

> ID：12710284
> 
> 赞同：1
> 
> 时间：2012-10-03T14:07:40.700
> 
> 标签：image, taxonomy, children

只是想知道是否有人可以帮助解决这个问题 - 敲了我几天的头......

从自定义分类页面（taxonomy_genre.php），我需要输出带有图像的子术语。

我正在使用“分类图像”插件来设置图像。

下面的代码 - 如果有人可以给我一些指示，请提前感谢！

代码 #1 输出所有术语，包括父术语。代码 #2 输出正确的术语但没有图像

本质上，我正在尝试将两者合并。

代码#1：

```
 $current_term = get_term_by( 'slug', get_query_var( 'term' ), get_query_var( 'taxonomy' ) );

$args = array(
                            'taxonomy'     => $current_term->taxonomy,
                            'child_of'     => $current_term->term_id,
                                'term_args'    => array(
                                'orderby'      => 'id',
                                'order'        => 'ASC',
                                'hierarchical' => 0,

                                ),

                            );

    $cats = apply_filters( 'taxonomy-images-get-terms', '', $args );

foreach ($cats as $cat) {

echo '<li><a href="' . get_category_link($cat) . '" title="'. $cat->name .'">' ;
echo wp_get_attachment_image( $cat->image_id, 'detail' );
echo $cat->name ;
echo '</a></li>';
} 
```

代码 #2

```
$current_term = get_term_by( 'slug', get_query_var( 'term' ), get_query_var( 'taxonomy' ) );
$cats = wp_list_categories( array(
    'child_of' => $current_term->term_id,
    'taxonomy' => $current_term->taxonomy,
    'hide_empty' => 0,
    'hierarchical' => false,
    'depth'  => 2,
    'title_li' => ''
    ));
foreach ((array)$cats as $cat) {
$catdesc = $cat->category_description;
echo '<li><a href="'. get_category_link($cat).'" title="'. $cat->cat_name .'">'. wp_get_attachment_image( $cat->image_id, 'detail' ) . $cat->cat_name . '</a></li>'; } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T19:32:17.803

排序 - 使用：

'父' => $current_term->term_id,

代替：

child_of => $current_term->term_id,

# ruby - 如何使用 watir 在弹出窗口中输入密码？

> ID：12710287
> 
> 赞同：4
> 
> 时间：2012-10-03T14:07:43.540
> 
> 标签：ruby, watir, watir-webdriver, headless, xserver

我正在写一些 watir 测试用例：

```
browser.goto "http://egauge2592.egaug.es/"
browser.link(:href,"/settings.html").click
browser.text_field(:index,4).set("some text")
browser.button(:id,"save_button").click 
```

然后会打开一个“需要身份验证”对话框，询问用户名和密码。

无论我如何尝试，我都无法访问文本字段。

我试过`send_keys`和JavaScript。

我也试过`Watir.autoit`，但它说未定义的方法。

我在带有 FireFox 浏览器的 Ubuntu 机器上使用 watir。

如何填写该对话框的用户名和密码字段？我可以使用 browser.alert.set 输入用户名，但只能设置用户名无法访问密码字段。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T23:03:09.813

我最近写了一个firefox插件来处理这个问题。我没有用 headless Firefox 尝试过，但它可能会工作......值得一试。有关详细信息，请参阅以下内容：

[http://www.natontesting.com/2012/10/06/firefox-plugin-test-automation-password-manager/](http://www.natontesting.com/2012/10/06/firefox-plugin-test-automation-password-manager/)

要让它与 watir 一起工作，请尝试以下操作：

```
browser = Watir::Browser.new
#go to a page that won't bring up the authentication dialog...
browser.goto 'http://www.google.co.uk'

#prepare the script...
pass_man_update_script = <<-SCRIPT
var addCredentialsEvent = new CustomEvent("add_credentials_to_passman", {
  detail: {
    host: 'http://secure.example.com',
    username: 'bob',
    password: 'P45sword'
  }
});
window.dispatchEvent(addCredentialsEvent);
SCRIPT

#inject the script into the browser:
browser.execute_script pass_man_update_script

#go to the page that prompts the dialog box...
browser.goto "http://secure.example.com"
#you should now be past the dialog box! 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-24T22:46:09.150

我改用 watir-webdriver，这（http://watirwebdriver.com/basic-browser-authentication/）对我有用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-27T07:16:45.807

Just put your basic auth credentials in the url:

```
browser.goto "http://user:pass@egauge2592.egaug.es/" 
```

# grails - 如果 addTo* 与在初始化时作为参数传递，则 GORM 会话中的不一致

> ID：12710289
> 
> 赞同：0
> 
> 时间：2012-10-03T14:07:49.363
> 
> 标签：grails, grails-orm

我在 RentalUnit 和 Review 之间有多对多的关系（入住多个出租单元的客人可能会有评论）。从 RentalUnit 到 Review 的 Delete 有级联，但从 Review 到 RentalUnit 没有级联

在进行测试时，我发现 GORM 会话中存在以下不一致

def review2 = new Review(rentalUnits: [rentalUnit], ...., isApproved: false).save(flush: true) review2.addToRentalUnits(rentalUnit2)

“rentalUnit2”对象将关联到“review2”，而“rentalUnit”则没有。

![在此处输入图像描述](../Images/026bd5acda8f533f568f509da382ef1e.png)

在初始化时或通过 addTo* 传递 RentalUnit 对象时如何确保一致的会话？

ps 这里是完整的代码 class Review { String submitBy String content String dateReceived boolean isApproved

```
final static DateFormat DATEFORMAT  = DateFormat.getDateInstance(DateFormat.MEDIUM)

static belongsTo = RentalUnit
static hasMany = [rentalUnits: RentalUnit]

static mapping = {
    rentalUnits cascade: "none"
}

static constraints = {
    submittedBy blank: false, size: 3..50
    content blank: false, size: 5..255
    dateReceived blank: false, size: 11..12, validator: {
        try{
            Date date = DATEFORMAT.parse(it)
            return DATEFORMAT.format(date) == it
        }catch(ParseException exception){
            return false
        }
    }
    rentalUnits nullable: false
} 
```

}

class RentalUnit { String name String 昵称 Address address static hasMany = [reviews:Review]

```
static mapping = {
reviews cascade: "all-delete-orphan"
}

static constraints = {
    name blank: false, unique: true
    nickname blank: false
} 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T18:44:57.817

你的答案就在你的问题中——使用`addToRentalUnits`。它做了三件事；如果集合为空，它会将集合初始化为一个新的空集合（对于新的非持久性实例，情况将如此，但对于数据库中始终具有非空（但可能为空）集合的持久性实例则不然），添加实例到集合，并设置对包含实例的反向引用。只需设置集合数据即可完成前两件事。

# android - 按字母顺序排序列表

> ID：12710292
> 
> 赞同：3
> 
> 时间：2012-10-03T14:07:53.903
> 
> 标签：android, listview, sorting, alphabetical

我正在开发一个应用程序，我在其中创建一个包含已安装应用程序的列表并让用户选择一个。除了一件事，我一切正常；按字母顺序排列它们。这是我正在使用的代码：

```
private List<App> loadInstalledApps(boolean includeSysApps) {
  List<App> apps = new ArrayList<App>();

  PackageManager packageManager = getPackageManager();

  List<PackageInfo> packs = packageManager.getInstalledPackages(0); 

  for(int i=0; i < packs.size(); i++) {
     PackageInfo p = packs.get(i);

     App app = new App();
     app.setTitle(p.applicationInfo.loadLabel(packageManager).toString());
     app.setPackageName(p.packageName);
     app.setVersionName(p.versionName);
     app.setVersionCode(p.versionCode);
     CharSequence description = p.applicationInfo.loadDescription(packageManager);
     app.setDescription(description != null ? description.toString() : "");
     apps.add(app);
  }

  return apps;

} 
```

任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-03T14:09:18.340

使用[Comparator](http://developer.android.com/reference/java/util/Comparator.html) 对数据进行排序...

```
Collections.sort(apps, new Comparator<App>() {

                @Override
                public int compare(App lhs, App rhs) {
                         //here getTitle() method return app name...
                    return lhs.getTitle().compareTo(rhs.getTitle());

                }
            }); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-03T14:15:57.530

第一：创建比较器

公共类 App 实现 Comparable {

```
// Lista de atributos y métodos

public int compareTo(Object o) {
    // logic of comparation
    return result; //must be integer
} 
```

}

例如：

```
public int compareTo(Object o) {
        Direccion dir = (Direccion)o;
        if(this.name < app.getName())
            return -1;
        else if(this.name == app.getName())
            return 0;
        else
            return 1;
} 
```

当你想做空时，使用`Collections.short(list)`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-03-04T19:52:26.553

最简单的解决方案

```
Collections.sort(familleList, (famille, t1) -> famille.compareTo(t1)); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-04-21T03:47:25.917

在**Kotlin**中使用**lambda**表达式和**比较器**。您可以轻松地按字母顺序对列表进行排序。

```
yourList.sortWith(Comparator { obj1, obj2 ->

 obj1.name.compareTo(obj2?.name!!, ignoreCase = true)

 }) 
```

**注意：**这里 obj1 和 obj2 是您列表的模型对象。例如

```
val yourList: MutableList<Model> = ArrayList() 
```

# python - 1 个程序中的 python tcp 服务器/客户端

> ID：12710293
> 
> 赞同：1
> 
> 时间：2012-10-03T14:07:53.663
> 
> 标签：python, sockets, tcp

我正在尝试为学校的作业创建一个服务器/客户端 TCP python 程序。我根本不擅长编程，并且遇到了一些问题。

使用下面的代码，我可以启动服务器，使用相同的文件和端口连接到它，但随后服务器立即崩溃。我不知道出了什么问题。。

顺便说一句，完整的分配如下：在 1 个文件中创建一个 python TCP 服务器/客户端，并相互连接 2 个会话。两者相互连接后，终止 1 个会话并使仍保留的会话打印“错误”。

[http://pastebin.com/07AkuHxN](http://pastebin.com/07AkuHxN)（代码）

请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T18:30:54.433

在第 14 行，您将覆盖`serversocket`何时接受连接。

一个正确的版本是

```
clientsocket, addr = serversocket.accept() 
```

在随后的客户端处理代码中也进行了相应的更改`serversocket`-> 。`clientsocket`

我发现的另一个可能的问题是客户端和服务器部分都先接收，然后再发送。这会导致连接成功后出现死锁。

# wpf - 不在焦点时覆盖 ListBoxItem 背景颜色 (.NET 4.5)

> ID：12710296
> 
> 赞同：11
> 
> 时间：2012-10-03T14:08:09.437
> 
> 标签：wpf, xaml, .net-4.5

据此[，](https://stackoverflow.com/questions/491293/why-cant-i-set-the-background-color-of-a-selected-listboxitem-in-wpf)重写 ControlBrushKey 资源应在 ListBox 选定项没有焦点时更改其背景颜色。我创建了一个简单的例子来反驳这一点：

```
 <StackPanel>
    <ListBox>
      <ListBox.Resources>
        <SolidColorBrush x:Key="{x:Static SystemColors.HighlightBrushKey}" Color="LightBlue"/>
        <!--SelectedItem without focus but doesn't really work-->
        <SolidColorBrush x:Key="{x:Static SystemColors.ControlBrushKey}" Color="Orange" />
      </ListBox.Resources>
      <ListBoxItem>
        Item 1
      </ListBoxItem>
      <ListBoxItem>
        Item 2
      </ListBoxItem>
    </ListBox>
    <TextBox></TextBox>
  </StackPanel> 
```

如果你在 .NET 4.5 中运行它，你会看到它只改变焦点颜色，而不是焦点颜色（它在 .NET 4.0 中工作）。知道为什么吗？

编辑：这似乎与[.net 4.5 下的 List/Combo Box Background 和 Selected Colors](https://stackoverflow.com/questions/12007918/list-combo-box-background-and-selected-colours-under-net-4-5)重复。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-04-17T12:09:50.060

当它失去焦点时，尝试以下方法更改选定的 ListBoxItem 的背景颜色：

XAML

```
<ListBox.Resources>    
    <SolidColorBrush x:Key="{x:Static SystemColors.HighlightBrushKey}" Color="LightBlue"/> 
    <SolidColorBrush x:Key="{x:Static SystemColors.InactiveSelectionHighlightBrushKey }" Color="Orange" />    
</ListBox.Resources> 
```

C＃

```
listBox.Resources.Add(SystemColors.InactiveSelectionHighlightBrushKey, 
                      new SolidColorBrush(Colors.Orange)); 
```

我希望这个对你有用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T14:10:44.917

这完全是关于控件的默认[模板](http://msdn.microsoft.com/en-us/library/system.windows.controls.control.template.aspx)，如果它们不像在 .NET 4 中那样使用系统颜色，这根本不会改变任何东西。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-01-30T14:28:52.597

这是我想出的不涉及更改系统颜色或控制模板的方法。只需将 ListBox 包装在一个新的 UserControl 中。

```
public partial class StyledListBox : UserControl
{
    public DataTemplate ItemTemplate
    {
        get { return (DataTemplate)GetValue(ItemTemplateProperty); }
        set { SetValue(ItemTemplateProperty, value); }
    }

    public IEnumerable ItemsSource
    {
        get { return (IEnumerable)GetValue(ItemsSourceProperty); }
        set { SetValue(ItemsSourceProperty, value); }
    }

    public object SelectedItem
    {
        get { return GetValue(SelectedItemProperty); }
        set { SetValue(SelectedItemProperty, value); }
    }

    public StyledListBox()
    {
        InitializeComponent();
    }

    public static readonly DependencyProperty ItemTemplateProperty = DependencyProperty.Register("ItemTemplate", typeof(DataTemplate), typeof(StyledListBox), new FrameworkPropertyMetadata(null));
    public static readonly DependencyProperty ItemsSourceProperty = DependencyProperty.Register("ItemsSource", typeof(IEnumerable), typeof(StyledListBox), new FrameworkPropertyMetadata(null));

    public static readonly DependencyProperty SelectedItemProperty = DependencyProperty.Register("SelectedItem", typeof(object), typeof(StyledListBox), new FrameworkPropertyMetadata(null)
    {
        BindsTwoWayByDefault = true,
        DefaultUpdateSourceTrigger = UpdateSourceTrigger.PropertyChanged
    });
} 
```

XAML：

```
<UserControl x:Class="StyledListBox"

     <ListBox ItemsSource="{Binding ItemsSource, RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type common:StyledListBox}}}"
              SelectedItem="{Binding SelectedItem, RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type common:StyledListBox}}}">

        <ListBox.ItemTemplate>
            <DataTemplate>
                <Border>
                    <Border.Style>
                        <Style TargetType="{x:Type Border}">
                            <Style.Triggers>
                                <DataTrigger Binding="{Binding IsSelected, UpdateSourceTrigger=PropertyChanged, RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type ListBoxItem}}}"
                                             Value="True">
                                    <Setter Property="Background" Value="Red" />
                                </DataTrigger>
                            </Style.Triggers>
                        </Style>
                    </Border.Style>

                    <ContentPresenter ContentTemplate="{Binding ItemTemplate, RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type StyledListBox}}}" />
                </Border>
            </DataTemplate>
        </ListBox.ItemTemplate>
    </ListBox>
</UserControl> 
```

然后只需像使用 ListBox 一样使用包装器 UserControl。您想要控制的任何其他 ListBox 属性都可以简单地以`ItemsSource`与`SelectedItem`我的示例相同的方式添加到包装器中。

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2013-09-18T22:46:55.667

解决方案是添加

```
FrameworkCompatibilityPreferences.AreInactiveSelectionHighlightBrushKeysSupported = false; 
```

打电话之前

```
InitializeComponent(); 
```

# silverlight - 捕获 Silverlight ControlTemplate 按钮命令事件

> ID：12710298
> 
> 赞同：0
> 
> 时间：2012-10-03T14:08:11.197
> 
> 标签：silverlight, binding, telerik, command, controltemplate

我在获取 ICommand（在本例中为 MVVMLight RelayCommand）以从我的 Silverlight 应用程序中的 ControlTemplate 在 ViewModel 中触发时遇到问题。

UI 上的所有内容都正确呈现，但是当单击带有嵌入式按钮的 Telerik RadMenu 项时，ViewModel 上的 LoadTopFiveFaults 方法不会触发。

我应该在 ControlTemplate 中使用 RelativeSource 吗？我错过了什么吗？有没有更好的方法来做到这一点？

**控制模板**

```
<ControlTemplate x:Key="SubMenuItem" TargetType="telerik:RadMenuItem">
    <Grid>
        <Grid x:Name="ContentGrid" Margin="{TemplateBinding Padding}">
            <Button Height="70" Style="{StaticResource MenuButtonStyle}" Margin="2" 
                    CommandParameter="{Binding ID}"
                    Command="{Binding DataContext.MenuCommand, RelativeSource={RelativeSource Mode=FindAncestor, AncestorType=navigation:Page}}">
            </Button>
        </Grid>
    </Grid>
</ControlTemplate> 
```

**ControlTemplate 按钮样式**

```
<!--MenuButton-->
<Style x:Key="MenuButtonStyle" TargetType="Button">
    <Setter Property="Background" Value="#FF1F3B53"/>
    <Setter Property="Foreground" Value="#FF000000"/>
    <Setter Property="Padding" Value="3"/>
    <Setter Property="BorderThickness" Value="1"/>
    <Setter Property="BorderBrush">
        <Setter.Value>
            <LinearGradientBrush EndPoint="0.5,1" StartPoint="0.5,0">
                <GradientStop Color="#FFA3AEB9" Offset="0"/>
                <GradientStop Color="#FF8399A9" Offset="0.375"/>
                <GradientStop Color="#FF718597" Offset="0.375"/>
                <GradientStop Color="#FF617584" Offset="1"/>
            </LinearGradientBrush>
        </Setter.Value>
    </Setter>
    <Setter Property="Template">
        <Setter.Value>
            <ControlTemplate TargetType="Button">
                <Grid>
                    <VisualStateManager.VisualStateGroups>
                        <VisualStateGroup x:Name="CommonStates">
                            <VisualState x:Name="Normal"/>
                            <VisualState x:Name="MouseOver">
                                <Storyboard>
                                    <DoubleAnimation Duration="0" To="1" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="BackgroundAnimation"/>
                                </Storyboard>
                            </VisualState>
                            <VisualState x:Name="Pressed">
                                <Storyboard>
                                    <DoubleAnimation Duration="0" To="1" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="BackgroundAnimation"/>
                                </Storyboard>
                            </VisualState>
                            <VisualState x:Name="Disabled">
                                <Storyboard>
                                    <DoubleAnimation Duration="0" To=".55" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="DisabledVisualElement"/>
                                </Storyboard>
                            </VisualState>
                        </VisualStateGroup>
                        <VisualStateGroup x:Name="FocusStates">
                            <VisualState x:Name="Focused">
                                <Storyboard>
                                    <DoubleAnimation Duration="0" To="1" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="FocusVisualElement"/>
                                </Storyboard>
                            </VisualState>
                            <VisualState x:Name="Unfocused"/>
                        </VisualStateGroup>
                    </VisualStateManager.VisualStateGroups>
                    <Border x:Name="Background" BorderThickness="{TemplateBinding BorderThickness}" CornerRadius="3" BorderBrush="Black">
                        <Grid Margin="1">
                            <Border x:Name="BackgroundAnimation" Background="#FFF7B000" Opacity="0"/>
                            <Rectangle x:Name="BackgroundGradient" Fill="{StaticResource PageBackground}"/>
                        </Grid>
                    </Border>
                    <ContentPresenter x:Name="contentPresenter" ContentTemplate="{TemplateBinding ContentTemplate}" Content="{TemplateBinding Content}" HorizontalAlignment="{TemplateBinding HorizontalContentAlignment}" Margin="{TemplateBinding Padding}" VerticalAlignment="{TemplateBinding VerticalContentAlignment}"/>
                    <Rectangle x:Name="DisabledVisualElement" Fill="#FFFFFFFF" IsHitTestVisible="false" Opacity="0" RadiusY="3" RadiusX="3"/>
                    <Rectangle x:Name="FocusVisualElement" IsHitTestVisible="false" Margin="1" Opacity="0" RadiusY="2" RadiusX="2" Stroke="#FF6DBDD1" StrokeThickness="1"/>
                </Grid>
            </ControlTemplate>
        </Setter.Value>
    </Setter>
</Style> 
```

**Silverlight 页面**

```
<navigation:Page x:Class="QSmart_Cabs_Viewer.Views.Report" 
           xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation" 
           xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml" 
           xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
           xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
           xmlns:navigation="clr-namespace:System.Windows.Controls;assembly=System.Windows.Controls.Navigation"
           xmlns:telerik="http://schemas.telerik.com/2008/xaml/presentation"              
           xmlns:local="clr-namespace:QSmart_Cabs_Viewer.Views"
           xmlns:viewmodels="clr-namespace:QSmart_Cabs_Viewer.ViewModels"
           d:DesignWidth="640" d:DesignHeight="480" mc:Ignorable="d"
           Title="QSmart Cab Systems Report">
    <navigation:Page.Resources>
        <viewmodels:ReportPageViewModel x:Key="ViewModel" />
    </navigation:Page.Resources>

    <Border x:Name="ReportBorder" BorderBrush="Black" BorderThickness="3" CornerRadius="10" Background="{StaticResource PageBackground}">
        <Border.Effect>
            <DropShadowEffect Direction="318"/>
        </Border.Effect>
        <Grid x:Name="LayoutRoot"  DataContext="{StaticResource ViewModel}" Background="{StaticResource PageBackground}">

            <Grid.RowDefinitions>
                <RowDefinition Height="40"/>
                <RowDefinition Height="33*"/>
                <RowDefinition Height="40*"/>
            </Grid.RowDefinitions>
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="3*"/>
                <ColumnDefinition Width="4*"/>
                <ColumnDefinition Width="1*"/>
            </Grid.ColumnDefinitions>

            <TextBlock x:Name="ConfigTitle" Text="QSmart Cabs Report" 
                        Grid.Row="0" Grid.ColumnSpan="3" 
                        FontSize="32" TextAlignment="Center"  
                        VerticalAlignment="Center" Foreground="{StaticResource ReportHeaders}" />

            <Border Grid.Row="0" Grid.Column="3" Grid.RowSpan="3"
                        BorderBrush="{StaticResource JCBOrangeBoarder}" Background="{StaticResource JCBOrange}"  
                        Margin="3" BorderThickness="5" CornerRadius="20">
                <telerik:RadMenu x:Name="Businesses" IconColumnWidth="0" HorizontalAlignment="Left"
                                    ItemsSource="{Binding MenuItems}" ItemContainerStyle="{StaticResource ItemStyle}"
                                    Margin="5,10" Background="{x:Null}" Orientation="Vertical" ClickToOpen="True">                
                </telerik:RadMenu>
            </Border>

        </Grid>
    </Border>
</navigation:Page> 
```

**查看模型**

```
using System.Collections.Generic;
using System.Collections.ObjectModel;
using System.Windows.Input;
using GalaSoft.MvvmLight;
using GalaSoft.MvvmLight.Command;
using QSmart_Cabs_Viewer.Helpers.IOC;
using QSmart_Cabs_Viewer.Helpers.Menus;
using QSmart_Cabs_Viewer.Models;
using QSmart_Cabs_Viewer.ServiceAgents;
using QSmart_Cabs_Viewer.Web.Models;

namespace QSmart_Cabs_Viewer.ViewModels
{
    public class ReportPageViewModel : ViewModelBase
    {
        private const string _topFiveCaption = "Top 5 Faults @ {0}";
        private const string _narrativeCaption = "Top Faults @ {0}";

        private string _topFiveTitle;
        private string _narrativeTitle;

        private IDataAgent ServiceAgent { get; set; }
        private IMenuBuilder MenuBuilder { get; set; }

        public ObservableCollection<MenuModel> MenuItems { get; set; }
        public ReadOnlyObservableCollection<CabFaultsCountByBusiness_Result> FaultCountByCustomer { get; set; }
        public ICommand MenuCommand { get; set; }

        public string TopFiveTitle 
        {
            get
            {
                return _topFiveTitle;
            }
            private set
            {
                _topFiveTitle=string.Format(_topFiveCaption,value);
                _narrativeTitle = string.Format(_narrativeCaption, value);
                RaisePropertyChanged("TopFiveTitle");
                RaisePropertyChanged("NarrativeTitle");
            }
        }

        public string NarrativeTitle
        {
            get
            {
                return _narrativeTitle;
            }
        }

        public ReportPageViewModel()
        {
            if (!IsInDesignMode)
            {
                ServiceAgent = UnityComponentContainer.ResolvePart<IDataAgent>();
                MenuBuilder = UnityComponentContainer.ResolvePart<IMenuBuilder>();
                LoadStaticData();
                TopFiveTitle = "All Customers";
                MenuCommand = new RelayCommand(() => LoadTopFiveFaults());
            }
        }

        private void LoadStaticData()
        {
            ServiceAgent.GetBusinessUnit((cb) => CreateMenuItems(cb.Entities));
            ServiceAgent.GetFaultsCountByBusiness((fcb) => 
                                                    FaultCountByCustomer = (ReadOnlyObservableCollection<CabFaultsCountByBusiness_Result>)fcb.Entities);
        }

        private void CreateMenuItems(IEnumerable<BusinessUnit> items)
        {
            MenuItems = MenuBuilder.Create(items);
        }

        private void LoadTopFiveFaults()
        {
            TopFiveTitle = "Command Fired";
        }

    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T15:51:16.523

您的原始示例似乎应该可以工作。也许 Telerik RadMenu 是在可视化树之外构建的？没有把握。

尝试更明确地删除未知...命名您的页面（绑定到您的 DataContext 视图模型）并尝试不同的绑定方法：

```
<Button Height="70" Style="{StaticResource MenuButtonStyle}" Margin="2"  
                    CommandParameter="{Binding ID}" 
                    Command="{Binding DataContext.MenuCommand, ElementName=ReportPage}"> 
            </Button> 
```

# c# - 为什么我的服务说它正在运行，即使它没有运行？

> ID：12710299
> 
> 赞同：0
> 
> 时间：2012-10-03T14:08:13.337
> 
> 标签：c#, .net, service

我使用 .NET 创建了一个服务，该服务应该自动启动并使用我的用户名和密码作为用户运行。

如果我重新启动我的电脑，使用相同的用户名和密码登录，然后转到任务管理器，它说服务正在运行，但是当我检查事件日志时，没有消息表明服务已经启动，事实上，服务还没有启动，因为它没有做它应该做的事情。

另一方面，如果我手动停止并启动服务，则事件日志中的条目会出现并且服务会按预期运行。

那么当我重新启动我的电脑时，为什么任务管理器说服务正在运行，即使它没有运行呢？是否有需要调整的安全设置？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T13:32:01.953

您的服务是否依赖于另一个 Windows 服务？如果是这样，那么可能是您的服务在机器重新启动时无法正确初始化，因为它无法使用依赖服务所需的功能。

这可以解释为什么如果您重新启动服务正常工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-08T13:37:09.403

我能够解决问题：该服务在 Windows 重新启动时未能正确初始化，因为它不依赖于任何服务，而它应该依赖于事件日志服务。将 ServiceInstaller 对象的“ServicesDependedOn”属性设置为“Windows 事件日志”解决了该问题。谢谢您的帮助！

# typescript - 创建一个名为 _this 的变量是否应该与 this 冲突？

> ID：12710303
> 
> 赞同：2
> 
> 时间：2012-10-03T14:08:44.963
> 
> 标签：typescript, name-conflict

这是一个非常人为的例子，但是让我们假设我们`_this`在类函数的某处创建了一个变量。

```
class Person {
  constructor (public name : string) {}
  changeName(name) {
    var _this = {};
    (() => {
      this.name = name;
    })();
  }
} 
```

当我们调用该函数时，这将无法按预期工作，`changeName`因为编译代码的相关部分如下所示：

```
var _this = this;
var _this = {};
(function () {
  _this.name = name;
})(); 
```

这是糟糕的 Javascript：我们有两个`var`相互覆盖的声明。编译器`_this`创建的被我的`_this`.

据我所知，TypeScript 规范中没有指定这种行为。

他们为什么要冲突？编译器不能检测我是否创建了一个名为`_this`并将自动生成的变量命名为别的变量，比如`_this2`防止我的变量和编译器生成的变量相互践踏？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-03T14:27:00.853

编译器会自动创建`_this`一个引用，`this`以方便使用 lambda 语法创建的闭包。我很确定我在某处的 TypeScript 规范中读到了这个，但我同意编译器在这种情况下应该发出错误。

我不喜欢编译器改变它如何发出 javascript 的想法，因为这与生成“惯用的”（因此可预测的）javascript 的既定目标相冲突。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T14:27:29.857

这不是你所说的保留变量吗？我猜你也不会声明一个名为“this”或“document”的变量。

只要 MS 清楚保留变量是什么，我认为没有什么大问题。他们也许可以改进编译器以输出警告。

# android - Android - 从另一个项目复制大量代码后启动异常启动项目

> ID：12710304
> 
> 赞同：0
> 
> 时间：2012-10-03T14:08:45.613
> 
> 标签：android

我得到了这个例外：

```
java.lang.RuntimeException: Unable to instantiate activity ComponentInfo{business.premium/business.premium.Problemio}: 
java.lang.ClassNotFoundException: business.premium.Problemio
        at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1880)
        at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1981)
        at android.app.ActivityThread.access$600(ActivityThread.java:123)
        at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1147)
        at android.os.Handler.dispatchMessage(Handler.java:99)
        at android.os.Looper.loop(Looper.java:137)
        at android.app.ActivityThread.main(ActivityThread.java:4424)
        at java.lang.reflect.Method.invokeNative(Native Method)
        at java.lang.reflect.Method.invoke(Method.java:511)
        at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
        at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
        at dalvik.system.NativeStart.main(Native Method)
Caused by: java.lang.ClassNotFoundException: business.premium.Problemio
        at dalvik.system.BaseDexClassLoader.findClass(BaseDexClassLoader.java:61)
        at java.lang.ClassLoader.loadClass(ClassLoader.java:501)
        at java.lang.ClassLoader.loadClass(ClassLoader.java:461)
        at android.app.Instrumentation.newActivity(Instrumentation.java:1023)
        at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1871)
        ... 11 more
java.lang.ClassNotFoundException: business.premium.Problemio
        at dalvik.system.BaseDexClassLoader.findClass(BaseDexClassLoader.java:61)
        at java.lang.ClassLoader.loadClass(ClassLoader.java:501)
        at java.lang.ClassLoader.loadClass(ClassLoader.java:461)
        at android.app.Instrumentation.newActivity(Instrumentation.java:1023)
        at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1871)
        at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1981)
        at android.app.ActivityThread.access$600(ActivityThread.java:123)
        at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1147)
        at android.os.Handler.dispatchMessage(Handler.java:99)
        at android.os.Looper.loop(Looper.java:137)
        at android.app.ActivityThread.main(ActivityThread.java:4424)
        at java.lang.reflect.Method.invokeNative(Native Method)
        at java.lang.reflect.Method.invoke(Method.java:511)
        at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
        at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
        at dalvik.system.NativeStart.main(Native Method) 
```

它说类不存在，但它存在。我试图在我的项目的构建路径中配置东西，但不太确定在那里调整什么。

这是我开始我的清单文件的方式：

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="business.premium"
    android:versionCode="1"
    android:versionName="1.0" >

    <supports-screens  android:largeScreens="true"   android:normalScreens="true"  android:smallScreens="true"/> 

    <uses-sdk android:minSdkVersion="4" android:targetSdkVersion="15"/>
    <uses-permission android:name="android.permission.INTERNET" />

    <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name" 
        android:theme="@style/CustomTheme" 
        android:name="MyApplication"
        android:debuggable="true">
        <activity
            android:name=".Problemio"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity> 
```

关于如何解决这个问题或要研究什么的任何想法？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T14:40:13.533

Its because you specified the "`android:name`" attribute in the application node in the `manifest` file.

Do not use the `android:name` attribute!

It, misleadingly, does not have anything to do with the name of your app and is actually the name of an extra class to load before loading your application. That's why you are getting the `ClassNotFoundException`.

Remove it and it should work:

```
<application 
    android:icon="@drawable/icon" 
    android:label="@string/app_name" 
    android:description="@string/help_text" > 
```

This answer is taken from: [java.lang.ClassNotFoundException on working app](https://stackoverflow.com/questions/3781151/java-lang-classnotfoundexception-on-working-app)

# php - Codeigniter / 分页 / uri_to_assoc()

> ID：12710306
> 
> 赞同：0
> 
> 时间：2012-10-03T14:08:59.973
> 
> 标签：php, codeigniter, pagination

我试图通过定义传递给单个控制器函数browse（）的各种uri段来搜索产品列表。使用 CI 的 uri_to_assoc() 我正在建立一个传递给 SQL 查询的密钥对列表。但是，我很难弄清楚这方面的分页是如何工作的。我将举几个例子，希望能说明我的问题。

我希望能够按类别、品牌或范围浏览我网站上列出的产品。用户应该能够浏览这 3 个搜索元素的任意组合，例如：

*   [http://mysite.com/our-products/browse](http://mysite.com/our-products/browse) = 浏览所有
*   [http://mysite.com/our-products/browse/category/cabinets+%26+storage](http://mysite.com/our-products/browse/category/cabinets+%26+storage) - 列出橱柜和存储类别中的产品
*   [http://mysite.com/our-products/browse/category/cabinets+%26+storage/brands/ramon+soler](http://mysite.com/our-products/browse/category/cabinets+%26+storage/brands/ramon+soler) - 列出品牌为 Ramon Soler 的橱柜和存储类别中的产品
*   [http://mysite.com/our-products/browse/category/cabinets+%26+storage/range/texas](http://mysite.com/our-products/browse/category/cabinets+%26+storage/range/texas) - 列出柜子和存储类别中的产品，范围是德克萨斯州
*   [http://mysite.com/our-products/browse/brand/ramon+soler/range/texas](http://mysite.com/our-products/browse/brand/ramon+soler/range/texas) - 列出 Ramon Soler 品牌的产品，范围是德克萨斯州
*   等等等等……

问题是当涉及到分页时，CI 总是将其添加到 url 的末尾。因此，根据查询的深度，url 中偏移参数的位置会有所不同。

任何人都知道如何将偏移段引入这种格式，所以我总是知道它在哪里，不管上面的每个链接组合使用哪种？还要记住，在这些页面的第一次加载时，根本不会设置偏移段，并且只会在后续页面加载时出现。

如果可能的话，我宁愿不必使用查询字符串，而是坚持使用基于 url 段的方法。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T14:12:32.903

始终将偏移量添加到页面末尾，然后使用以下命令检索它：

```
 $offset = (int) end($this->uri->segment_array()); 
```

如果不是有效偏移量，则类型转换为您提供 0（因此您有一个基本偏移量）。

来源：[http ://codeigniter.com/user_guide/libraries/uri.html](http://codeigniter.com/user_guide/libraries/uri.html)

# java - Spring MVC 请求映射，这可以是动态/可配置的吗？

> ID：12710307
> 
> 赞同：14
> 
> 时间：2012-10-03T14:09:00.887
> 
> 标签：java, spring, spring-mvc

使用 Spring MVC，我知道你是如何`RequestMapping`在每个控制器和方法/动作中设置的。

但是如果我希望它是可配置的，例如我下面的控制器：

```
BlogController 
 - with methods for listing blogs entries, single entry, new, update, etc.
ArticleController
 - with methods for listing articles entries, single entry, new, update, etc. 
```

现在在我的应用程序中，管理员可以为网站设置 2 个博客和 1 个文章部分，因此 URL 如下所示：

```
www.example.com/article_section1/ - uses ArticleController
www.example.com/blog1/ - uses BlogController
www.example.com/blog2/ - uses BlogController 
```

也许过了一段时间管理员想要另一个文章部分，所以他们只是用一个新的部分来配置它，比如：

```
www.example.com/article_section2/ 
```

**这必须动态/即时工作，而不必重新启动应用程序。**

我的问题只与我将如何处理到我的控制器的 url 映射有关。

Spring MVC 怎么可能做到这一点？

我只知道如何`@RequestMapping("/helloWorld")`在控制器或方法级别使用将 url 映射到控制器，但这使得 url 映射是固定的，并且不能像我想要的那样进行配置。

**更新：**

我将在数据库中存储路径，并映射到控制器类型，如下所示：

```
path                  controller
/article_section1/    article
/blog1/               blog
/blog2/               blog
.. 
```

有了上述信息，我如何将请求发送到正确的控制器？

同样，不打算重新加载/重新部署，我意识到这将需要更多的工作，但它在规范中:)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-03T14:13:54.317

这种 URL 映射对您有用吗？

```
www.example.com/blog/1/
www.example.com/blog/2/ 
```

如果是，那很简单：Spring 3 支持路径变量：[http ://static.springsource.org/spring/docs/3.0.x/reference/mvc.html#mvc-ann-requestmapping-advanced](http://static.springsource.org/spring/docs/3.0.x/reference/mvc.html#mvc-ann-requestmapping-advanced)

或者，您可以创建一个通用请求映射和您自己的读取配置文件的子调度程序，但我认为这可能比它的价值更多。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-03T14:21:35.787

在运行时真正更改请求映射可能很难（并且不推荐，因为很容易发生小错误）。如果您仍然希望这样做，也许 JRebel，更具体地说是 LiveRebel，对于实时重新部署代码和配置可能会很有趣。

否则，就像其他帖子建议的那样，RequestMappings 支持通配符，在快速阅读官方文档后应该清楚其限制。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-04-01T19:15:44.127

尝试使用@RequestMapping 通配符，如下所示：

```
@RequestMapping(value="/article_section*/"}
public void getArticle(....){
//TODO implementation
}

@RequestMapping(value="/blog*/"}
public void getBlog(....){
//TODO implementation
} 
```

希望这可以帮助！！！

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-04-01T17:56:33.277

另一种解决方案可能是创建一个自定义注释，其中包含已定义的路径`@RequestMapping`以及要应用的新路径，比如说`@ApiRestController`.

然后，在 Spring 上下文加载之前，`@Controller`可以更改类以使其注释值在运行时由新的（使用所需的路径）更改。通过这样做，Spring 将加载增强的请求映射，而不是默认的。

创建了一个小项目来为将来需要这个的人举例说明[https://gitlab.com/jdiasamaro/spring-api-rest-controllers](https://gitlab.com/jdiasamaro/spring-api-rest-controllers)。

希望能帮助到你。干杯。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-03T14:15:08.180

这不行吗？@RequestMapping("/helloWorld*")

# json - 调用 JSON 时的动态树加载

> ID：12710311
> 
> 赞同：1
> 
> 时间：2012-10-03T14:09:13.943
> 
> 标签：json, tree

我有一个返回顶部树节点和子节点的 JSON。然后，每当我单击子级时，它都会检索从另一个 JSON 获得的孙级和其他多级。有什么方法可以帮助在树中构建它吗？最初我想在树中显示父节点和子节点，然后单击子节点，树应该向下钻取以显示其他子节点。

这是一个常见的场景。是否有任何易于使用的工具来构建树？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T14:20:32.213

那里有许多 JavaScript 树小部件，任何好的都可以进行动态加载。

这是一个随机选择的，恰好来自流行的 YUI 库：http: [//developer.yahoo.com/yui/treeview/](http://developer.yahoo.com/yui/treeview/)

顺便说一句，为了帮助澄清你的问题的措辞：

*   “顶部树节点”通常称为“根”。
*   “a JSON”更准确地称为“返回 JSON 的 XHR 请求”。在 Google 上搜索“XHR 请求”或“AJAX 请求”以了解更多信息。基本上异步数据获取是一个 XmlHttpRequest，而 JSON 是响应的数据格式。
*   与其说“构建树”，不如说“渲染树”更清楚。“构建树”可以指构建树数据或渲染该树数据的过程，因此是模棱两可的。前者的用法实际上更常见，而这里的意思是后者。

**更新：**

更多示例：

*   [jq树](http://mbraak.github.com/jqTree)
*   [jqx树](http://www.jqwidgets.com/jquery-widgets-demo/demos/jqxtree/index.htm#demos/jqxtree/ajaxloading.htm)
*   [动力树](http://code.google.com/p/dynatree/)
*   [js树](http://www.jstree.com/)
*   [道场树](http://dojotoolkit.org/reference-guide/1.8/dijit/Tree.html)
    *   [延迟加载演示](http://download.dojotoolkit.org/release-1.0.2/dojo-release-1.0.2/dojox/data/demos/demo_LazyLoad.html)
*   [ExtJS 树](http://docs.sencha.com/ext-js/3-4/#!/api/Ext.tree.TreePanel)
*   [谷歌关闭树](http://closure-library.googlecode.com/svn/docs/class_goog_ui_tree_TreeControl.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-08-16T20:49:40.067

可以在[这里](https://github.com/Leedehai/expandable-tree-list)找到嵌入了 JS 和 CSS 的独立 HTML 页面，不需要第三方库。

# java - 从 mp3 文件中读取标签

> ID：12710322
> 
> 赞同：2
> 
> 时间：2012-10-03T14:09:57.533
> 
> 标签：java, string, mp3

我有一个读取 mp3 标签的代码，它是文件的最后 128 个字节

```
try{
    final int TAG_LONG = 128;
    fileInputStream = new FileInputStream(file.getAbsolutePath());
    byte[] bytesSong = new byte[128];
    byte[] byteTitleArry = new byte[length];
    for (int i = 0; i < 30; i++) {
        byteTitleArry[i] = arrayTag[3+ i];
    }
    String title = new String(byteTitleArry);
} 
```

当标题标签（或其他任何东西）写成英文字符时，这段代码工作得很好，但是当标签是非英文字符的值时，我得到了错误的值，所以我使用了：

```
String title = new String(byteTitleArry, "ISO-8859-8"); 
```

但这还不够通用，有没有办法找出标签 unicode 是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T14:14:04.803

尝试改用 ID3 库，例如[JAudioTagger](http://www.jthink.net/jaudiotagger/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T04:39:22.160

您尝试使用的 ID3v1 似乎不包含任何 i18n 信息。但是 ID3v2 可以。来源：[http ://en.wikipedia.org/wiki/ID3](http://en.wikipedia.org/wiki/ID3)

# iphone - 在响应式布局中缩放小于特定值的视口

> ID：12710323
> 
> 赞同：0
> 
> 时间：2012-10-03T14:10:02.510
> 
> 标签：iphone, html, ipad, responsive-design, viewport

我正在开发使用以下代码的响应式布局：

`<meta name="viewport" content="initial-scale=1.0; width=device-width;">`

设计师为大桌面（1370 像素宽）、小桌面（990 像素）和平板电脑（620 像素）构建了布局。假设移动设备 (<620px) 将使用平板电脑版本，但会对其进行缩放。

不过，我该怎么做呢？因为视口的宽度设置为`device-width`，所以它会加载最小的样式表，但不会对其进行缩放。

**tl;博士——有没有办法告诉移动浏览器忽略该`width=device-width`值，而是在视口小于某个值时缩放网站以适应？**

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T05:37:24.213

首先，这并不是典型响应式设计的最佳方法。如果您首先构建移动设备并将宽度设置为 %，那么它将避免您可能遇到的任何问题，因为内容将缩放到设备宽度。

如果您真的想走另一条路，尽管您可以使用 javascript 更改元视口元素并使用[enquire.js](http://wickynilliams.github.com/enquire.js/)来指示何时发生......

```
enquire.register("screen and (max-width:619px)", {

    match : function() {
$('meta[name=viewport]').attr(
 'content',
 'width=620; initial-scale=1.0'
);

},      

    unmatch : function() {
$('meta[name=viewport]').attr(
 'content',
 'width=device-width, initial-scale=1.0'
);
},
}); 
```

请注意

1.  这未经测试
2.  我的 jquery/javascript 很糟糕，但应该给你足够的继续前进。

# python - Mincemeat map 函数返回字典

> ID：12710328
> 
> 赞同：0
> 
> 时间：2012-10-03T14:10:17.813
> 
> 标签：python, mapreduce, mincemeat

我正在使用一个名为 mincemeat.py 的 map reduce 实现。它包含一个map函数和reduce函数。首先，我会告诉我我想要完成什么。我正在做一个关于大数据的课程，其中有一个编程任务。问题是有数百个文件包含 paperid:::author1::author2::author3:::papertitle 形式的数据

我们必须浏览所有文件并为特定作者提供他使用最多的词。所以我为它写了下面的代码。

```
import re

import glob
import mincemeat
from collections import Counter
text_files = glob.glob('test/*')

def file_contents(file_name):
    f = open(file_name)
    try:
        return f.read()
    finally:
        f.close()

datasource = dict((file_name, file_contents(file_name)) for file_name in text_files)

def mapfn(key, value):
    for line in value.splitlines():
        wordsinsentence = line.split(":::")
        authors = wordsinsentence[1].split("::")
        # print authors
        words = str(wordsinsentence[2])
        words = re.sub(r'([^\s\w-])+', '', words)
        # re.sub(r'[^a-zA-Z0-9: ]', '', words)
        words = words.split(" ")
        for author in authors:
            for word in words:
                word = word.replace("-"," ")
                word = word.lower()
                yield author, word

def reducefn(key, value):
    return Counter(value)

s = mincemeat.Server()
s.datasource = datasource
s.mapfn = mapfn
s.reducefn = reducefn
results = s.run_server(password="changeme")
# print results

i = open('outfile','w')
i.write(str(results))
i.close() 
```

我现在的问题是，reduce 函数必须接收所有作者的作者姓名和他在标题中使用的所有单词。所以我期望像这样的输出

```
{authorname: Counter({'word1':countofword1,'word2':countofword2,'word3':countofword3,..}). 
```

但我得到的是

```
authorname: (authorname, Counter({'word1': countofword1,'word2':countofword2})) 
```

有人能说出为什么会这样吗？我不需要帮助来解决问题，我需要帮助才能知道为什么会这样！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-22T13:58:47.887

我运行了您的代码，发现它按预期工作。输出看起来像 {authorname : Counter({'word1':countofword1,'word2':countofword2,'word3':countofword3,..})。

那就是说。**删除此处的代码，**因为它违反了 Coursera 荣誉守则。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T00:01:06.270

在 Counter 之前检查 reducefn 中的值数据结构。

```
def reducefn(key, value):

    print(value)

    return Counter(value) 
```

# c++ - C++ GoogleTest - 静态成员和链接器错误 LNK 2001

> ID：12710329
> 
> 赞同：0
> 
> 时间：2012-10-03T14:10:19.317
> 
> 标签：c++, testing, static, linker, googletest

我有这个代码示例，在 googletest 中定义了一个夹具。

```
#include "solver.h"

#include <math.h>
#include <iostream>
#include <fstream>
#include <string>

using namespace std;

class UnitTest_solver : public ::testing::Test
{
protected:

    static void SetUpTestCase()
    {
        // setup table with data
        m_col = 2; 
        m_test_data = new double*[m_row];
        for(int i = 0 ; i < m_col ; i++)
            m_test_data[i] = new double[m_row];

        ifstream data_x;
        data_x.open("exponential2X.txt");

        // etc... : i setup table m_test_data in a few more lines
}

static void TearDownTestCase()
{
    for(int i = 0 ; i < m_row ; i++)
        delete[] m_test_data[i];
    delete[] m_test_data;
}

 static double chi_sqr(double* x, double(*func)(double*, double*, int))
 {
    if(ncol < 2)
        return;

    double fx = 0;

    double * row_i = new double[ncol - 1];

    for(int i = 0 ; i < nrow ; i++)
    {
        for(int j = 0 ; j < ncol - 1 ; j++)
            row_i[j] = data[i][j];

        fx += pow(data[i][0] - (*func)(x, row_i, ncol - 1), 2.0); 
    }

    return fx;
 }

 static double func_1(double* x, double* dbl, int nb_param)
 {
    if(nb_param != 2)
         return 0;

    return x[0] * exp(-1 * x[1] * dbl[0]);
 }

 static double warpPt2apply_func(double * parameters, int ncol, void * userinfo, int nb_p)
 {
      return  chi_sqr(parameters, (ncol - 1), (*func_1));
 }

  static double** m_test_data;
  static int m_col, m_row;

};

TEST_F(UnitTest_solver, testFunc1)
{
    Solver* solver = new Solver();
    solver->set_pointer(warpPt2apply_func, (void*)NULL);
} 
```

我有 LNK 2001 错误，可能与使用静态数据成员有关，指向成员`m_test_data`, `m_col`, `m_row`. 是不是因为一开始就为测试套件中的每个新测试调用 SetUpTestCase() 方法，而静态成员应该一劳永逸地初始化。

任何的想法？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T14:15:07.393

```
 static double** m_test_data;
  static int m_col, m_row; 
```

在封闭命名空间中的类外部初始化

```
 double** UnitTest_solver::m_test_data = 0;
  int UnitTest_solver::m_col = 0;
  int UnitTest_solver::m_row = 0; 
```

# django - Django 转储数据不写入文件，生成“错误的文件描述符”错误

> ID：12710331
> 
> 赞同：1
> 
> 时间：2012-10-03T14:10:21.687
> 
> 标签：django, manage.py, dumpdata

我正在尝试将数据转储到文件中，并不断收到此错误：

```
d:\django\mysite>manage.py dumpdata > alldata.json
Traceback (most recent call last):
  File "D:\django\mysite\manage.py", line 10, in <module>
    execute_from_command_line(sys.argv)
  File "C:\Python27\lib\site-packages\django\core\management\__init__.py", line 443, in execute_from_command_line
    utility.execute()
  File "C:\Python27\lib\site-packages\django\core\management\__init__.py", line 382, in execute
    self.fetch_command(subcommand).run_from_argv(self.argv)
  File "C:\Python27\lib\site-packages\django\core\management\base.py", line 196, in run_from_argv
    self.execute(*args, **options.__dict__)
  File "C:\Python27\lib\site-packages\django\core\management\base.py", line 241, in execute
    self.stdout.write(output)
IOError: [Errno 9] Bad file descriptor 
```

我觉得这与代码页或 unicode 有关。尝试在 PowerShell 中执行此操作，没有错误，但数据已打印到屏幕上并且文件为空......（好像 > 符号不存在）。

任何人都知道可能导致这种情况的原因吗？

提前致谢 ：）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-03T14:48:53.790

如果我没有错，你正在使用

```
manage.py dumpdata 
```

尝试像这样使用它

```
python manage.py dumpdata 
```

它应该工作。

谢谢

# ruby-on-rails - rails形式的数字格式

> ID：12710335
> 
> 赞同：0
> 
> 时间：2012-10-03T14:10:35.343
> 
> 标签：ruby-on-rails, ruby-on-rails-3

> **可能重复：**
> [如何格式化 Rails 编辑字段中显示的值？](https://stackoverflow.com/questions/591939/how-can-i-format-the-value-shown-in-a-rails-edit-field)

我对 ruby​​ on rails 很陌生。我有一个小问题。数字的格式。这个数字是十进制的。

这是视图

```
<% has_error = f.object.errors.has_key? :amount %>
  <div class="control-group<%= ' error' if has_error %>">
    <%= f.label :amount, :class => 'control-label' %>
    <div class="controls">
      <%= f.text_field :amount, :class => 'text_field' %>
      <%= content_tag(:span, f.object.errors[:amount].join(','), :class=> 'help-block') if has_error%>
    </div>
  </div> 
```

呈现：

```
<input id="account_entry_amount" class="text_field" type="text" value="0.0" size="30" name="account_entry[amount]" maxlength="20" style="text-align: right;"> 
```

值es“0.0”，我希望它只是“0”

有什么办法可以用通用的方式做到这一点？我不知道，在语言环境文件或初始化程序中表达？

非常感谢你！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T14:14:34.070

```
<%= f.text_field :amount, :class => 'text_field', :value => f.object.amount.to_i %> 
```

# c++ - 编译器有时可以缓存声明为 volatile 的变量吗

> ID：12710336
> 
> 赞同：13
> 
> 时间：2012-10-03T14:10:35.367
> 
> 标签：c++, c, multithreading, x86, volatile

据我所知，编译器从不优化声明为`volatile`. 但是，我有一个这样声明的数组。

```
volatile long array[8]; 
```

不同的线程对其进行读写。数组的元素仅由其中一个线程修改并由任何其他线程读取。但是，在某些情况下，我注意到即使我从线程修改元素，读取它的线程也不会注意到更改。它继续读取相同的旧值，就好像编译器已将其缓存在某个地方一样。但是编译器原则上不应该缓存 volatile 变量，对吗？那怎么会这样。

**注意**：我不`volatile`用于线程同步，所以请不要再给我答案，例如使用锁或原子变量。我知道易失性、原子变量和互斥体之间的区别。另请注意，该架构是具有主动缓存一致性的 x86。此外，在它被另一个线程修改后，我读了足够长的时间。即使过了很长时间，读取线程也看不到修改后的值。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-03T14:20:52.637

> 但是编译器原则上不应该缓存 volatile 变量，对吗？

不，编译器原则上必须在每次读取/写入变量时读取/写入变量的地址。

[编辑：至少，它必须这样做，直到实现认为该地址的值是“可观察的”。正如 Dietmar 在他的回答中指出的那样，一个实现可能会声明“无法观察到”正常的记忆。对于使用调试器、或其他超出标准范围的东西的人来说，这会让他们感到惊讶`mprotect`，但原则上它可以符合。]

在完全不考虑线程的 C++03 中，由实现来定义在线程中运行时“访问地址”的含义。像这样的细节被称为“记忆模型”。例如，Pthreads 允许每个线程缓存整个内存，包括易失性变量。IIRC，MSVC 保证适当大小的 volatile 变量是原子的，并且它将避免缓存（相反，它将刷新到所有内核的单个一致缓存）。它提供这种保证的原因是因为在 Intel 上这样做*相当便宜——Windows 只关心基于 Intel 的架构，而 Posix 关心的是更奇特的东西。*

C++11 为线程定义了一个内存模型，它说这是一个数据竞争（即`volatile` *不能*确保一个线程中的读取相对于另一个线程中的写入是按顺序排列的）。两个访问可以按特定顺序排序，按未指定顺序排序（标准可能会说“不确定顺序”，我不记得了），或者根本不排序。根本没有排序是不好的——如果两个未排序的访问中的任何一个是写入，那么行为是未定义的。

这里的关键是“我从一个线程修改一个元素，然后读取它的线程没有注意到变化”中隐含的“然后”。您假设操作是按顺序排列的，但事实并非如此。就读取线程而言，除非您使用某种同步，否则其他线程中的写入不一定发生。实际上它比这更糟糕——你可能会从我刚刚写的内容中想到，它只是未指定的操作顺序，但实际上具有数据竞争的程序的行为是未定义的。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-03T14:44:37.957

**C**

volatile 的作用：

*   如果变量是从外部源（硬件寄存器、中断、不同线程、回调函数等）修改的，则保证变量中的值是最新的。
*   阻止对变量的读/写访问的所有优化。
*   当编译器没有意识到线程/中断/回调被程序调用时，防止可能发生在多个线程/中断/回调函数之间共享的变量的危险优化错误。（这在各种有问题的嵌入式系统编译器中尤为常见，当你遇到这个错误时，很难追查到。）

什么 volatile 没有：

*   它不保证原子访问或任何形式的线程安全。
*   它不能用来代替互斥体/信号量/保护/临界区。它不能用于线程同步。

volatile 可能会或可能不会做的事情：

*   编译器可能会或可能不会实现它以提供内存屏障，以防止多核环境中的指令缓存/指令管道/指令重新排序问题。你永远不应该假设 volatile 会为你做这件事，除非编译器文档明确声明它会这样做。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-03T14:17:48.743

`volatile`你只能强加一个变量在你使用它的值时被重新读取。它不能保证在您的架构的不同级别上存在的不同值/表示是一致的。

要获得这样的保证，您需要 C11 和 C++1 中关于原子访问和内存屏障的新实用程序。许多编译器已经在扩展方面实现了这些。例如，gcc 系列（clang、icc 等）具有以前缀开头的内置函数`__sync`来实现这些。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-03T14:22:01.770

`Volatile`关键字只保证编译器不会对这个变量使用寄存器。因此，对这个变量的每次访问都会去读取内存位置。现在，我假设您在架构中的多个处理器之间具有缓存一致性。因此，如果一个处理器写入而另一个处理器读取它，那么它在正常情况下应该是可见的。但是，您应该考虑极端情况。假设变量在一个处理器内核的管道中，而另一个处理器试图读取它并假设它已被写入，那么就会出现问题。所以本质上，共享变量应该被锁保护，或者应该通过正确使用屏障机制来保护。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2017-02-19T00:01:12.787

的语义`volatile`是实现定义的。如果编译器知道在执行某些代码时中断将被禁用，并且知道在目标平台上除了中断处理程序之外没有其他方法可以观察到某些存储上的操作，它可以 register-cache `volatile`-qualified这种存储中的变量就像它可以缓存普通变量一样，只要它记录了这种行为。

请注意，行为的哪些方面被视为“可观察的”可以由实现以某种方式定义。如果一个实现证明它不打算在使用主 RAM 访问来触发所需的外部可见操作的硬件上使用，那么在该实现上对主 RAM 的访问将不是“可观察的”。如果没有人关心是否实际看到任何此类访问，则该实现将与能够物理观察此类访问的硬件兼容。但是，如果需要此类访问，就像访问被视为“可观察的”时那样，编译器将不会声称兼容性，因此不会对任何事情做出任何承诺。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-10-03T14:12:25.833

### 对于 C++：

> 据我所知，编译器从不优化声明为 volatile 的变量。

你的前提是错误的。`volatile`是对编译器的提示，实际上并不保证任何事情。编译器可以选择阻止对`volatile`变量进行一些优化，但仅此而已。

`volatile`不是锁，不要试图这样使用它。

### 7.1.5.1

> 7) [注意： volatile 是对实现的提示，以避免涉及对象的激进优化，因为对象的值可能会通过实现无法检测到的方式进行更改。详细语义见 1.9。一般来说， volatile 的语义在 C++ 中与在 C 中的语义相同。 —尾注]

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-10-03T14:25:52.367

该`volatile`关键字与 C++**中的**并发**完全无关**！它用于阻止编译器使用先前的值，即编译器将生成访问代码中每次访问值的代码。主要目的是诸如内存映射 I/O 之类的东西。但是，在读取普通内存时，使用**不会**影响CPU 的操作：如果 CPU 没有理由相信内存中的值发生了变化，例如，因为没有同步指令，它可以直接使用其缓存中的值. 要在线程之间进行通信，您需要一些同步，例如 an 、 lock a等。**`volatile``volatile`**`std::atomic<T>``std::mutex`****

 ***** * *

## 回答 #8

> 赞同：1
> 
> 时间：2014-03-06T10:02:00.857

Volatile 只影响它前面的变量。在您的示例中，这里是一个指针。您的代码：volatile long array[8]，指向数组第一个元素的指针是 volatile，而不是它的内容。（任何种类的物体都一样）

您可以像在 [如何将使用 malloc 创建的数组声明为在 C++ 中易失一样进行调整](https://stackoverflow.com/questions/2304729/how-do-i-declare-an-array-created-using-malloc-to-be-volatile-in-c)

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2017-02-20T06:49:54.287

通过 volatile 左值的 C++ 访问和对 volatile 对象的 C 访问是“抽象的”“可观察的”——尽管[实际上](https://stackoverflow.com/a/42335543/3404097)C 行为符合 C++ 标准而不是 C 标准。非正式地，`volatile`声明告诉*每个*线程该值可能会以某种方式改变，而不管*任何*线程中的文本如何。在线程标准下，除了在同步关键开始时同步函数调用的共享变量之外，没有任何另一个线程写入导致对象更改的概念，无论是否易失，是否共享地区。`volatile`与线程共享对象*无关。*

如果您的代码未正确同步您正在谈论的线程，则您的一个线程读取另一个线程所写的内容具有未定义的行为。所以编译器可以生成它想要的任何代码。如果您的代码已正确同步，则其他线程的写入仅发生在线程同步调用中；你不需要`volatile`那个。

附言

标准说“构成对具有 volatile 限定类型的对象的访问是实现定义的。” 因此，您不能只假设对 volatile 左值的每次解除引用都有读取访问权限，或者通过一个分配对每个分配都有写入访问权限。

此外，（“抽象”）“可观察”`volatile`访问如何“实际”表现出来是实现定义的。因此，编译器可能不会为与定义的抽象访问对应的硬件访问生成代码。例如，可能只有具有静态存储持续时间的对象和使用特定标志编译以链接到特殊硬件位置的外部链接才能从程序文本外部更改，从而`volatile`忽略其他对象。

* * *

## 回答 #10

> 赞同：-1
> 
> 时间：2012-10-03T14:23:46.643

> 但是，在某些情况下，我注意到即使我从线程修改元素，读取它的线程也不会注意到更改。它继续读取相同的旧值，就好像编译器已将其缓存在某个地方一样。

这不是因为编译器将它缓存在某个地方，而是因为读取线程从其 CPU 内核的缓存中读取，这可能与写入线程的缓存不同。为了确保跨 CPU 内核的值更改传播，您需要使用适当的内存栅栏，而在 C++ 中，您既不能也不需要使用 volatile 。****

# mysql - 从三个不同的表中选择最大值和其他值

> ID：12710339
> 
> 赞同：3
> 
> 时间：2012-10-03T14:10:55.133
> 
> 标签：mysql

我有三个具有以下结构的表：-

```
CREATE TABLE `contract` (
  `conid` int(11) NOT NULL AUTO_INCREMENT,
  `servName` int(11) NOT NULL,
  `cid` int(11) NOT NULL,
  `term` int(11) DEFAULT NULL,
  `monthly_charge` double NOT NULL,
  `start_date` date NOT NULL,
  `expiry_Date` date NOT NULL,
  `next_PayDate` date DEFAULT NULL,
  `status` tinyint(4) NOT NULL,
  PRIMARY KEY (`conid`),
  UNIQUE KEY `servName` (`servName`,`cid`)
) 

CREATE TABLE `servicetype` (
  `sid` int(11) NOT NULL AUTO_INCREMENT,
  `serviceName` varchar(255) NOT NULL,
  PRIMARY KEY (`sid`)
) 

CREATE TABLE `transactions` (
  `tid` int(11) NOT NULL AUTO_INCREMENT,
  `conid` int(11) NOT NULL,
  `amount` double NOT NULL,
  `paidate` date NOT NULL,
  `descr` text NOT NULL,
  PRIMARY KEY (`tid`)
) 
```

我想要得到的是特定用户的最新交易，即：-

conid、serviceName、cid、term、monthly_charge、start_date、expiry_Date、next_PayDate、金额、payate、descr

这是我使用获取该信息的选择语句：-

```
SELECT c.conid, serviceName, cid, term, monthly_charge, start_date, expiry_Date, next_PayDate, status, amount, paidate, descr
FROM servicetype s 
LEFT JOIN contract c on s.sid = c.servName 
LEFT JOIN transactions t ON c.conid=t.conid
WHERE cid = 4 AND status = 1 
```

该声明有效，但是它给了我属于 cid 4 的所有交易，而我只想显示属于该合约的最新交易（conid）。

提前感谢您的时间和精力。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T14:15:17.373

听起来您想使用 MySQL`GROUP BY`将所有结果按特定的 分组`cid`，然后使用`HAVING`条件来获取`MAX()`事务：

```
SELECT
    c.conid, serviceName, cid, term, monthly_charge, start_date, expiry_Date, next_PayDate, status, amount, paidate, descr
FROM servicetype s 
    LEFT JOIN contract c on s.sid = c.servName 
    LEFT JOIN transactions t ON c.conid=t.conid
WHERE
    cid = 4 AND status = 1

GROUP BY cid
HAVING t.paidate = MAX(t.paidate) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T14:16:31.967

你可以在桌子`JOIN`上两次。`transactions`第一次加入获取`max()`每个的日期`conid`，然后第二次加入将返回该最大交易的详细信息：

```
select c.conid,
  s.serviceName,
  c.cid,
  c.term,
  c.monthly_charge,
  c.start_date,
  c.expiry_date,
  c.next_PayDate,
  c.status,
  t2.amount,
  t1.paidate,
  t2.descr
FROM servicetype s 
LEFT JOIN contract c 
  on s.sid = c.servName 
LEFT JOIN
(
  SELECT max(paidate) paidate, conid
  FROM transactions
  GROUP BY conid
) t1
  ON c.conid=t1.conid
LEFT JOIN transactions t2
  ON t1.paidate = t2.paidate
  AND t1.conid = t2.conid
WHERE c.cid = 4 
  AND c.status = 1 
```

编辑，根据您的评论，查询应该是：

```
select c.conid,
  s.serviceName,
  c.cid,
  c.term,
  c.monthly_charge,
  c.start_date,
  c.expiry_date,
  c.next_PayDate,
  c.status,
  t3.amount,
  t3.paidate,
  t3.descr
FROM servicetype s 
LEFT JOIN contract c 
  on s.sid = c.servName
LEFT JOIN
(
  SELECT max(paidate) paidate, conid, max(tid) tid
  FROM transactions t
  GROUP BY conid
) t1
  on c.conid = t1.conid
LEFT JOIN transactions t3
  on t1.conid = t3.conid
  and t1.paidate = t3.paidate
  and t1.tid = t3.tid
where c.cid = 4
  and c.status = 1
GROUP BY c.conid; 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!2/23555/62)

# perl - 在 perl 中自动生成表的模块

> ID：12710344
> 
> 赞同：-2
> 
> 时间：2012-10-03T14:11:40.250
> 
> 标签：perl, oop

我的 STDOUT 上有一些内容，我希望将这些内容安排到下降表中。

谁能给我推荐一个能处理这种需求的 Perl 模块

在此先感谢，任何小的帮助表示赞赏。

谢谢！阿迪亚

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T14:26:19.327

[`Text::Table`](http://p3rl.org/Text%3a%3aTable)并[`Text::ASCIITable`](http://p3rl.org/Text%3a%3aASCIITable)制作两个不同的输出，后者有轮廓。我敢肯定CPAN周围还有更多的东西。您还可以查看format ，这是 Perl 的一个很少使用的功能，用于格式化报告[。](http://p3rl.org/form)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T14:16:44.990

在 CPAN 中，您可以使用[Text::Table](http://search.cpan.org/perldoc?Text%3a%3aTable)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-03T21:33:57.107

假设您想将现有程序中的 STDOUT 通过管道传输到其他内容以对其进行格式化，您可以使用 printf 执行类似的操作

创建一个名为 process.pl 的 perl 脚本

```
 #/bin/perl
use strict;

while (<>) {
    my $unformatted_input = $_;

    # Assuming you want to split on spaces, adjust if it is in fixed format.
    my @elements = split / +/, $unformatted_input, 4;

    # Printf format string, you can adjust lengths here.  This would take
    #  an input of items in the elements array and make each file 10 characters
    #  See http://perldoc.perl.org/functions/sprintf.html for options
    my $format_string='%10s%10s%10s%10s';

    printf($format_string,@elements);
} 
```

然后，将您的 STDOUT 通过管道传输到此，它将将其格式化为屏幕：

```
$  yourProcessThatDoesStdout | process.pl 
```

# java - 在 Akka、Twitter Finagle 和 Vert.x 的优缺点或 EJB 之间进行选择就足够了

> ID：12710354
> 
> 赞同：3
> 
> 时间：2012-10-03T14:12:12.543
> 
> 标签：java, jakarta-ee, architecture, ejb, distributed

对于使用 java 堆栈的分布式计算，这些框架或库如何适合这些类别。

*   文件
*   采用
*   易于使用并与广泛使用的技术（如 spring、orm 和 web 框架）集成
*   容错
*   安全。

EJB 可以取代所有这些新的分布式计算、可扩展和容错系统架构吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T14:35:27.493

EJB 3 被设计为易于使用和易于集成，有很多文档，它们是分布式计算的 Java 标准。

EJB 容器提供基于标准规范的事务管理和安全性。容器本身由许多公司提供企业支持或免费使用（IBM、JBoss、Oracle）

如果您遵循 EJB 规范，您的软件可以在不修改代码的情况下变得容错，您可以将服务器放在集群中（有许多集群策略），并且可以毫不费力地水平扩展如果您使用无状态会话 bean

您提到的其他框架/.technologies 非常有效，但没有一个可以提供所有这些功能

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T14:39:28.927

你问的问题太笼统了。
EJB 已经使用了很多年，并且被广泛记录，可能比您提到的所有技术都多，而且更加成熟。
您可以使用 JAAS 进行授权和身份验证（当涉及到安全性时）。
例如，我在[oVirt](http://www.ovirt.org)开源项目中使用 Krb5LoginModule，我是它的维护者之一。您可以在访问应用程序服务器的 Web 容器时使用安全 HTTP。
在 oVirt，我们使用的是 JBoss 应用服务器，您可以使用 JBoss-cluster 来实现集群。您可以使用 infinispan 跨节点获取可扩展的共享数据结构（数据网格）。
我们在应用程序中使用 Spring 组件（对于注入，您可以使用[CDI](http://www.oracle.com/technetwork/articles/java/ejb-3-1-175064.html)) - 用于 LDAP 查询，用于使用 DB（由于性能原因，我们目前更喜欢 Spring-JDBC 而不是 JPA）。
几年来，在我目前的工作地点之前，我一直在使用一堆 Web 应用程序来查找注入 EntityManager 的 bean 并使用 JPA（以及作为 JPA 提供者的休眠）执行 CRUD 操作，
我相信你可以实现所有这一切都使用spring - 例如 - 使用一堆spring-mvc + spring-orm。
我认为任何技术都不会以“神奇”的方式为您提供分布式系统，您仍然需要在开发、设计、可扩展性测试等方面投入时间。

# c# - 检查用户是域用户还是本地用户

> ID：12710355
> 
> 赞同：6
> 
> 时间：2012-10-03T14:12:12.887
> 
> 标签：c#, .net

如果该用户是机器的域用户或本地用户（最好使用.NET），我希望能够检查提供的用户名，但可以在网上找到很多

```
public static Boolean isLocalUser (string name)
{
//code here
} 
```

编辑例如你被给予 me.user 作为一个字符串

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-03T14:18:02.290

```
public bool DoesUserExist(string userName)
{
    bool exists = false;
    try
    {
    using (var domainContext = new PrincipalContext(ContextType.Domain, "DOMAIN"))
    {
        using (var foundUser = UserPrincipal.FindByIdentity(domainContext, IdentityType.SamAccountName, userName))
        {
            exists = true;
        }
      }
    }
    catch(exception ex)
    {
      //Exception could occur if machine is not on a domain
    } 
    using (var domainContext = new PrincipalContext(ContextType.Machine))
    {
        using (var foundUser = UserPrincipal.FindByIdentity(domainContext, IdentityType.SamAccountName, userName))
        {
            exists = true;
        }
    }
   return exists;
} 
```

来源：[使用 C# 检查 Active Directory 中是否存在 UserID](https://stackoverflow.com/questions/4453801/check-userid-exists-in-active-directory-using-c-sharp)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-03-26T15:12:30.173

对我来说，到目前为止，这工作得很好。（离开使用）。

```
bool IsLocalUser(string accountName)
{
  var domainContext = new PrincipalContext(ContextType.Machine);
  return Principal.FindByIdentity(domainContext, accountName) != null;
} 
```

但请注意，这将无法识别“系统”帐户。我们会单独检查，因为它始终是本地帐户。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-03T14:18:05.817

大卫很赚钱，要检查当前用户是否属于域，您可以检查`Environment.UserDomainName`并将其与当前用户进行比较。

[MSDN](http://msdn.microsoft.com/en-us/library/system.environment.userdomainname.aspx)上的更多信息

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-03T14:13:53.227

本地用户将拥有以机器名称为前缀的帐户名称。域用户的帐户名将以其原始域为前缀。如果机器名称和帐户前缀名称不匹配，或者如果帐户名称前缀与本地机器匹配，则通常可以安全地假定其为本地帐户。

# google-drive-api - 关于服务中的用户电子邮件

> ID：12710359
> 
> 赞同：0
> 
> 时间：2012-10-03T14:12:23.957
> 
> 标签：google-drive-api

当我获得文档权限时，我需要获取用户电子邮件。我在这里看到了这个问题

[响应中未填充权限资源的值属性](https://stackoverflow.com/questions/11846293/value-attribute-for-permissions-resource-not-populated-in-responses)

但在关于服务中没有出现我的电子邮件。我需要它，因为我有一个服务帐户，并且我的应用程序需要知道用户电子邮件。我想避免调用配置文件服务。这可能吗？从哪里可以获得用户电子邮件？

谢谢。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-10-03T16:39:45.400

正如您所说的那样，您将不得不调用配置文件服务。在某些方面，这样更好，因为它将 Drive API 和 Profile API 的关注点分开，并且可以使用特定的范围让用户确切地知道他们授权您的应用程序做什么。

# mysql - mysql工作台不能：更新喜欢的地方

> ID：12710368
> 
> 赞同：2
> 
> 时间：2012-10-03T14:12:56.343
> 
> 标签：mysql, sql-update, mysql-workbench, sql-like

通常我可以使用查询更新我的行，例如

`UPDATE t SET col1='123' WHERE col2 LIKE '%abc%';`

或者

`UPDATE mydb.t SET col1='123' WHERE col2 LIKE '%abc%';`

但是对于 MySQL Workbench，我似乎只能`SELECT`但不能`UPDATE`使用带有查询的表。

有人知道使用工作台的修复方法吗？

**使固定**

要禁用安全模式，请切换 Preferences -> SQL Editor -> Query Editor 中的选项并重新连接。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T14:17:00.263

Mysql 工作台通常默认禁用没有 where 子句的更新，和/或命中超过配置的 X 元素的更新。

当您尝试更新但失败时，如果我认为是这样，请注意错误消息，因为它会准确告诉您要更改的设置。

# jquery - 链式选择和表单元素切换

> ID：12710373
> 
> 赞同：1
> 
> 时间：2012-10-03T14:13:02.243
> 
> 标签：jquery, forms, select, internationalization, chained

我的公司位于美国，向美国和加拿大发货。但是，我们接受来自世界各地的计费。在我们重新设计的运输/计费表单中，我正在使用链式选择，以便当用户选择他的运输国家时，州列表和邮政编码字段都会相应地更改。

我想对计费做同样的事情，但它有点复杂。不仅州和邮政编码框需要更改，电话文本输入也需要更改。州下拉菜单也需要更改为文本输入，我需要为县添加一个文本字段。

我试图将这两个方面加上付款保持在一种形式中；引导用户的内联验证和后端验证都即将到来。

我可以让状态列表和邮政编码框适当地更改和更改回来，但是当我添加选择/文本输入交换或电话输入交换（或全部三个）时，脚本完全失败。在我的 jsfiddle 中，我根据我的想法将 jQuery 注释掉了。我究竟做错了什么？我错过了什么？

我的代码在这里：http: [//jsfiddle.net/LqggY/8/](http://jsfiddle.net/LqggY/8/)。

注意：我的后端开发人员不太了解前端代码（另外，还有语言障碍），所以我想让他们尽可能简单。

任何帮助将不胜感激。

# php - tcpdf 没有拾取 div 的边框

> ID：12710375
> 
> 赞同：0
> 
> 时间：2012-10-03T14:13:13.993
> 
> 标签：php, tcpdf

我在`tcpdf`我的一个项目中使用生成 PDF 文件，它没有拾取 div 的边框。但是当我在相同的布局中使用表格时，它会拾取边框。

你能建议我在 tcpdf 中为 css 做什么吗？

或任何其他在 tcpdf 中包含 css 文件的方式

```
<div class="div_info" style="width:100%; float:left; padding:10px 0px;">
    <div style="padding:2px 0 0 0; margin:0px; float:left;"><p>Interior/Exterior BPO</p>'.$row->interior_exterior_form.'</div>
    <div style="padding:2px 0 0 0; margin:0px; float:left;"><p>Property Address:</p>'.$row->property_address.'</div>
    <div style="padding:3px 0 0 33px; margin:0px; float:left;"><p>Borrower(s):</p>'.$row->borrowers.'</div>
    <div style="padding:3px 0 0 35px; margin:0px; float:left;"><p>Loan/REO#:</p>'.$row->loan_number.'</div>
</div> 
```

它只支持内联css吗？

在上面的布局中，如果我使用边框，那么它不会拾取它，但是如果我使用表格，那么它会在它周围添加边框。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T05:22:08.557

```
$html = <<<EOF
<style>   
    div.test {
        color: #CC0000;       
        border-style: solid;
        border-width: 1px;
        border-color: #000;
        text-align: center;
    }
</style>

<div class="test">This is your div content.</div>

<br />

EOF;

// output the HTML content
$pdf->writeHTML($html, true, false, true, false, '');

$pdf->lastPage();

$pdf->Output('sample.pdf', 'I'); 
```

有关更多详细信息，您可以访问[此链接](http://www.tcpdf.org/examples.php)并查看示例 #61。

# math - 否定 3D 4x4 矩阵的旋转

> ID：12710376
> 
> 赞同：0
> 
> 时间：2012-10-03T14:13:16.380
> 
> 标签：math, 3d, matrix

我在 3D 场景节点层次结构深处有一个广告牌。广告牌继承了应用于父节点的所有 3D 变换。

我希望广告牌始终“面向相机”（= 具有零派生旋转矢量）。问题是它的派生矩阵是只读的，所以我不能直接操纵它来使旋转无效（[如在另一种情况下提出的那样](https://stackoverflow.com/questions/5467007/inverting-rotation-in-3d-to-make-an-object-always-face-the-camera)）。

我**能做**的是操纵它的**局部矩阵**，使最终的派生矩阵满足我的要求。

有没有一个公式可以实现这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T18:03:57.450

只要你不使用矩阵的齐次部分，你总是可以这样做。

A*B + B*A = C，其中 B = {0,0,0,0;0,0,0,0;0,0,0,0;0,0,0,1}

这应该给你 C = {0,0,0,s; 0,0,0,s; 0,0,0,s; x,y,z,2*w} 其中 s 是缩放值，这是面向列的，表示 {1,2,3,4; 1,2,3,4} 将是 4x2 矩阵（4 行 2 列）。

希望这可以帮助。

# asp.net - css 在 FF 和 chrome 中工作，但不能在 IE 8 中加载

> ID：12710377
> 
> 赞同：0
> 
> 时间：2012-10-03T14:13:17.183
> 
> 标签：asp.net, css

我在我的 aspx 页面中使用这个 css 路径：

```
<link href="Styles/960.css" rel="stylesheet" type="text/css" />
        <link href="Styles/style.css" rel="stylesheet" type="text/css" /> 
```

它在 FF 和 chrome 中运行良好，但在 IE 8 中，没有加载 css。

我尝试在 IE 中使用 localhost:9133/styles/style.css 并加载/打开 css。

```
:focus {/* remember to define focus styles! */
    outline: 0;
}
body {
    line-height: 1;
}
ol, ul {
    list-style: none;
}
table {/* tables still need 'cellspacing="0"' in the markup */
    border-collapse: separate;
    border-spacing: 0;
}
caption, th, td {
    font-weight: normal;
    text-align: left;
}
blockquote:before, blockquote:after,
q:before, q:after {
    content: "";
}
blockquote, q {
    quotes: "" "";
}
a img {
    border: 0;
}
article, aside, details, figcaption, figure,
footer, header, hgroup, menu, nav, section {
    display: block;
}

@font-face {
    font-family: "homenaje";
    src: url('fonts/Homenaje-Regular.ttf') ;
} 
```

请建议我解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T14:43:00.230

为了让选择器在 IE8 中工作，您需要指定[doctype](http://www.w3schools.com/tags/tag_doctype.asp)：

`<!DOCTYPE html>`

# ruby - 比较哈希中的值并返回匹配的键

> ID：12710380
> 
> 赞同：0
> 
> 时间：2012-10-03T14:13:47.580
> 
> 标签：ruby, arrays, ruby-on-rails-3, hash, key-value-observing

我正在尝试查看哈希并将其值与现有字符串进行比较，然后当找到匹配项时，我想输出它的键。我试图将其写入代码块并将结果输出到控制台。

```
officer.name = "Dave"

@hash = { "Tom" => "97", "Dave" => "98", "John" => "99" }

@hash.each { |key, value| do
    if #{key} == officer.name
        puts "id: #{value}"
    else
        puts "no match"
    end
} 
```

现在我的控制台输出：

```
 id: 97
 no match
 id: 98
 no match
 id: 99
 no match 
```

我试图让它根据匹配的#{key} 仅输出#{value} 的值，在这种情况下是Dave。所以对于上面的例子，我希望我的控制台只吐出数字 98 或“不匹配”。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-03T14:19:46.567

这是一个哈希！你可以更有效地做你尝试的事情：

```
officer.name = "Dave"

@hash = { "Tom" => "97", "Dave" => "98", "John" => "99" }

unless @hash.key?(officer.name) 
  puts "no match"
else 
  puts "id: #{@hash[officer.name]}"
end 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-03T14:17:36.890

是不是因为你忘记了“？

```
if "#{key}" == officer.name 
```

但你可以这样做

```
if key == officer.name 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-03T14:44:39.633

```
@hash.has_key?(officer.name) ? @hash[officer.name] : "no match" 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-03T14:18:13.993

```
officer.name = "Dave"

@hash = { "Tom" => "97", "Dave" => "98", "John" => "99" }

@hash.each do |key, value|
  if key == officer.name
    puts key
  else
    puts "no match"
  end
end 
```

这应该工作

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-03T14:52:32.573

通过键进行哈希查找时，请避免使用#[]。改用#fetch：

```
officer.name = "Dave"
@hash = { "Tom" => "97", "Dave" => "98", "John" => "99" }
puts @hash.fetch(officer.name, 'no match') 
```

#fetch 允许您指定除 nil 以外的默认值，这将防止来自哈希查找的意外 nil 抛出非常常见的 NoMethodError。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-01-23T23:07:07.433

这也有效。对原帖稍作修改。它会打印出每一对的答案，但并不能确定答案所指的是哪对。

```
officer = "Dave"

@hash = { "Tom" => "97", "Dave" => "98", "John" => "99" }

@hash.each do |key, value|
    if key == officer
    puts key
  else
    puts "no match"
  end
end 
```

# php - 检测 simpleXml 数组属性

> ID：12710385
> 
> 赞同：6
> 
> 时间：2012-10-03T14:14:03.337
> 
> 标签：php, simplexml, var-dump

我想我在这里遗漏了一些非常明显的东西，但是有人可以向我解释为什么我得到的是我的输出，而不是我在以下 var 转储中期望的输出：

这是原始的xml：

```
<result>
    <category>
        <id>3</id>
        <name>Category 1</name>
        <subcategory>
            <id>9</id>
            <name>SubCat 1</name>
        </subcategory>
        <subcategory>
            <id>10</id>
            <name>SubCat 2</name>
        </subcategory>
        <subcategory>
            <id>11</id>
            <name>SubCat 3</name>
        </subcategory>
    </category>
</result> 
```

我在做什么：

```
$xml = new SimpleXMLElement($file);
foreach($xml->category as $node)
{
    echo "dump 1:
";
    var_dump($node);
    echo "**********************************************
dump 2:
";
    var_dump($node->subcategory);
    die();
} 
```

这输出：

```
dump 1:
object(SimpleXMLElement)#130 (3) {
    ["id"]=>
    string(1) "3"
    ["name"]=>
    string(10) "Category 1"
    ["subcategory"]=>
    array(3) {
        [0]=>
        object(SimpleXMLElement)#133 (2) {
            ["id"]=>
            string(1) "9"
            ["name"]=>
            string(8) "SubCat 1"
        }
        [1]=>
        object(SimpleXMLElement)#135 (2) {
            ["id"]=>
            string(2) "10"
            ["name"]=>
            string(8) "SubCat 2"
        }
        [2]=>
        object(SimpleXMLElement)#136 (2) {
            ["id"]=>
            string(2) "11"
            ["name"]=>
            string(8) "SubCat 3"
        }
    }
}
**********************************************
dump 2:
object(SimpleXMLElement)#138 (2) {
    ["id"]=>
    string(1) "9"
    ["name"]=>
    string(8) "SubCat 1"
} 
```

第一个 var 转储输出我所期望的，但我期望第二个 var_dump 的输出是：

```
array(3) {
    [0]=>
    object(SimpleXMLElement)#133 (2) {
        ["id"]=>
        string(1) "9"
        ["name"]=>
        string(8) "SubCat 1"
    }
    [1]=>
    object(SimpleXMLElement)#135 (2) {
        ["id"]=>
        string(2) "10"
        ["name"]=>
        string(8) "SubCat 2"
    }
    [2]=>
    object(SimpleXMLElement)#136 (2) {
        ["id"]=>
        string(2) "11"
        ["name"]=>
        string(8) "SubCat 3"
    }
} 
```

甚至是一个包含所有数组项的对象。为什么不是这样？

我可以看到当我调用`var_dump($node->subcategory)`它时它正在转储它找到的第一个“子类别”节点，但为什么它会将所有“子类别”节点转换为第一个 var 转储的数组而不是第二个？我将如何模仿这种行为来检测“子类别”是否包含多个对象（就像它在第一个 var 转储中所做的那样）？

基本上我想要做的是检测 SimpleXMLElement 的属性是否包含更多值的数组（即它是否包含子节点）

我已经尝试了各种方法，但我似乎无法检测到 simpleXml 对象的一个​​属性是否包含一组数组。

**更新：**

我发现这有效：

```
if(count($node->subcategory)>1)
{
    // we have  more than one subcategory
} 
```

但这不是最优雅的方式，我敢肯定一定有更清洁的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T15:09:32.987

该属性是迭代器的对象：

```
$node->subcategory 
```

如果您需要获取所有物品，请尝试：

```
foreach($xml->category as $node)
{
...
  foreach($node->subcategory as $subcategory)
  {
     $data[] = (array) $subcategory
  }
...
} 
```

如果您需要知道您成功使用计数方法的子类别项目的计数。

如果不会更改 XML 树，您可以使用 xpath：

```
$categories = $xml->xpath('/category/subcategory');
var_dump($categories) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T15:15:57.333

调整您的 xml 文件：

```
<result>
    <category>
        <id>3</id>
        <name>Category 1</name>
        <subcategories>
          <subcategory>
            <id>9</id>
            <name>SubCat 1</name>
          </subcategory>
          <subcategory>
            <id>10</id>
            <name>SubCat 2</name>
          </subcategory>
          <subcategory>
            <id>11</id>
            <name>SubCat 3</name>
          </subcategory>
        </subcategories>
    </category>
</result> 
```

并尝试：

```
var_dump($node->subcategories); 
```

# windows-services - 由服务生成的进程的 Windows Proc“不可用”

> ID：12710386
> 
> 赞同：0
> 
> 时间：2012-10-03T14:14:04.237
> 
> 标签：windows-services, psexec, wndproc, windows-messages, spy++

我试图用来`psexec`在远程机器上生成一个进程（出于自动化测试目的），并注意到生成的进程没有正确响应消息（`WM_GETOBJECT`，但这完全是另一个问题）。我打开`spy++`试图查看原因，但我无法记录*任何*进入我的进程窗口的消息。窗口属性还表明该窗口的“Windows Proc”为“不可用”：

![](../Images/e10c46f31eed69dd00fdf8111368bf32.png).

我认为这是 Windows 服务的一种行为，因为`psexec` [它使用远程机器上的嵌入式服务来启动请求的应用程序](http://www.windowsitpro.com/article/remote-computing/psexec)。我使用相同的凭据登录到两台机器，所以我认为这不是用户安全问题，而是与服务相关的行为。

作为健全性检查，我编写了一个快速的独立服务器和客户端来远程执行程序，一切都按预期工作：Window Proc 不再“不可用”，我可以监视消息。

我对所有测试都使用了普通的 Windows 计算器 ( `calc`)，即：

```
psexec.exe -i \\other-machine calc 
```

**我的问题：**有人可以确认、解释和/或引用为什么我看不到由服务产生的进程的消息队列吗？还有解决方法吗？我宁愿使用而`psexec`不是我的自定义解决方案。如果您还可以解释为什么`WM_GETOBJECT`在这种情况下也不返回我的自定义 UI 自动化提供程序，那将是一个奖励，因为这是我最初的问题。

# mysql - 如何将视频标签存储到数据库（MySQL）中？

> ID：12710389
> 
> 赞同：2
> 
> 时间：2012-10-03T14:14:14.150
> 
> 标签：mysql, database, database-design

在视频网站中，每个视频都可以有多个标签。我有一个包含每个视频信息的视频表。如何存储标签？谁能告诉我如何插入和选择有关标签的信息？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-03T14:17:05.000

假设您的视频表每个视频有一条记录，例如：

```
Video
----------
ID
Title
etc. 
```

然后，您将为标签创建一个单独的表，例如：

```
Tag
----------
ID
Title 
```

为了将两者关联起来，您需要创建一个关联表：

```
VideoTag
----------
VideoID
TagID 
```

该表中的列只是`Video`和`Tag`表的外键。`Video`这个中间表允许您在和实体之间保持多对多的关系`Tag`，因为每个视频可以有很多标签，每个标签可以在很多视频上。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-03T14:19:35.490

我可以建议的一种设计是创建三个表：`VideoList`, `TagList`, `Video_Tag`. `VideoList`与 有多对多的关系`tagList`。然后将它们的关联列在`Video_Tag`表中。

```
CREATE TABLE VideoList
(
    ID INT,
    VideoName VARCHAR(150),
    -- other columns here,
    CONSTRAINT tb_pk PRIMARY KEY(ID),
    CONSTRAINT tb_uq UNIQUE(VideoName)
); 
```

我`UNIQUE`在列上添加了约束，`VideoName`以便您拥有唯一值。

```
CREATE TABLE TagList
(
    ID INT,
    TagName VARCHAR(150),
    -- other columns here,
    CONSTRAINT tb2_pk PRIMARY KEY(ID),
    CONSTRAINT tb2_uq UNIQUE(TagName)
); 
```

我还在`UNIQUE`column 上添加了约束`TagName`。

```
CREATE TABLE  Video_Tag
(
    RecordID INT,
    VideoID INT,
    TagID INT
    CONSTRAINT tb3_pk PRIMARY KEY(RecordID),
    CONSTRAINT tb3_uq UNIQUE(VideoID, TagID),
    CONSTRAINT tb3_fk1 FOREIGN KEY (VideoID) REFERENCES VideoList(ID),
    CONSTRAINT tb3_fk2 FOREIGN KEY (TagD) REFERENCES TagList(ID)
); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-03T14:15:54.117

最常见的方法是有 3 个表：

*   `Videos`
*   `Tags`
*   `VideoTags`

其中 VideoTags 用作关联表，具有基本的列集：`VideoID`, `TagID`.

# c# - 在 PictureBox 上绘制网格

> ID：12710390
> 
> 赞同：3
> 
> 时间：2012-10-03T14:14:17.860
> 
> 标签：c#

我目前正在使用图片框。我很难在大约 2 x 2 正方形大小的图片框上绘制网格。现在下面的代码只给了我一条线。我怎样才能在图片框的顶部绘制一个完整的网格？

**代码：**

```
private Graphics g1;

    public Form1()
    {
        InitializeComponent();

        pictureBox1.Image = new Bitmap(500, 500);
        g1 = Graphics.FromImage(this.pictureBox1.Image);
        Pen gridPen = new Pen(Color.Black, 2);
        g1.DrawLine(gridPen, 0, 0, 100, 100);

    } 
```

这是我想要完成的： ![在此处输入图像描述](../Images/fa9e62d327de9ea7570336fbb21400f6.png)

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-03T14:20:22.403

我发现了这个问题： [Efficiently draw a grid in Windows Forms](https://stackoverflow.com/questions/2753519/efficiently-draw-a-grid-in-windows-forms)

这是它的要点：

```
private void pictureBox1_Paint(object sender, PaintEventArgs e)
        {
            Graphics g = e.Graphics;
            int numOfCells = 200;
            int cellSize = 5;
            Pen p = new Pen(Color.Black);

            for (int y = 0; y < numOfCells; ++y)
            {
                g.DrawLine(p, 0, y * cellSize, numOfCells * cellSize, y * cellSize);
            }

            for (int x = 0; x < numOfCells; ++x)
            {
                g.DrawLine(p, x * cellSize, 0, x * cellSize, numOfCells * cellSize);
            }
        } 
```

相应地定制

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-03-11T02:15:24.367

MikeB 接受的答案当然是正确的，但是 OP 仍然感到困惑，人们仍然看到这一点，所以我添加了一个澄清的答案（是的，8 年后）。

迈克的方法

```
private void pictureBox1_Paint(object sender, PaintEventArgs e) 
```

是一个独立的方法，需要在正确的时间调用。要做到这一点，您需要将它注册到 OnPaint 事件调度程序，以便在 OnPaint 事件发生时调用它。为此，您可以将以下行放入某个方便的位置，例如类的构造函数中：

```
OnPaint += pictureBox1_Paint; 
```

这种方法是可以的，但是如果你到达你真正需要绘图性能的地方，它会伤害你，因为它需要额外的成本来构建和传递给你的 PaintEventArgs。更好的方法是重写父类的 OnPaint 方法，将你的绘图代码直接放在 OnPaint 方法中。这样您就不必连接任何事件处理程序并且它运行得更快。代码看起来几乎一样：

```
protected override void OnPaint (PaintEventArgs e)
        {
            base.OnPaint(e);
            Graphics g = e.Graphics;
            int numOfCells = 200;
            int cellSize = 5;
            Pen p = new Pen(Color.Black);

            for (int y = 0; y < numOfCells; ++y)
            {
                g.DrawLine(p, 0, y * cellSize, numOfCells * cellSize, y * cellSize);
            }

            for (int x = 0; x < numOfCells; ++x)
            {
                g.DrawLine(p, x * cellSize, 0, x * cellSize, numOfCells * cellSize);
            }
        } 
```

最后一个建议：在 PictureBox 控件中绘图几乎从来都不是一个好主意。很多人都这样做，但没有多少专家会这样做。它们并非设计为绘图画布——它们只是继承了所有基于表单的控件所具有的相同功能——它们增加了复杂性并减慢了您的速度，而根本没有添加任何有用的功能。如果您摆脱图片框并直接在保存图片框的表单或面板上绘图，您会更快乐。

# php - 数据库触发器更新列后如何进行查询？

> ID：12710392
> 
> 赞同：3
> 
> 时间：2012-10-03T14:14:29.283
> 
> 标签：php, postgresql, propel

在插入触发器更新和查询操作之后，我有一个插入序列，我的问题是从查询接收到的数据不反映触发器执行的更新（即使数据库中的数据确实已更新）。

我正在使用 PHP、PostgreSQL 和 Propel 1.6 ORM（尽管这个问题可能与数据库和 ORM 无关）。

我有以下顺序：

1.  使用 AJAX 在“book_vote”表中插入新行（投票）（列：“book_id”、“book_score”、“voter_id”）。

2.  有一个 PostgreSQL after insert 触发器来更新“book”表中相应的 book “vote_count”和“average_score”列。

3.  进行查询以获取“book”的新“vote_count”和“average_score”数据，并使用 AJAX 将该数据发送回客户端（以在投票后显示更新的值）。

这一切都发生在同一个 PHP 会话中，我的问题是我没有在 AJAX 响应中获得更新的“book”值。似乎查询是在执行数据库触发器之前执行的。有什么方法可以确保在数据库触发之后发生查询？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T10:03:55.967

在我看来，您正在对 Propel 对象进行保存，并且您有一个外部触发器可以进一步修改该行。您需要能够告诉 Propel 对象需要在插入/更新后立即刷新……谢天谢地，Propel 直接支持这一点。在架构中的表元素中，执行以下操作：

```
<table name="book_vote" reloadOnInsert="true" reloadOnUpdate="true"> 
```

您可以使用其中一个或两个 reload 语句，具体取决于要求（在您的情况下，您可能只需要插入语句）。从那里，只需重建您的模型，它应该可以正常工作。更多细节[在这里](http://www.propelorm.org/reference/schema.html#table_element)。

附录：根据讨论，问题似乎是您已经加载了要重新加载的外部行，因此它是从实例池而不是数据库中检索的。你已经发现`BookPeer::clearInstancePool()`它为你解决了 - 太棒了！对于奖励积分，看看您是否可以单独从池中删除项目 - 让池正常运行并一次删除一个项目可能更有效，而不是清除整个表的池。让我们知道这是否可能！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T16:35:57.873

请参阅 ORM 文档如何在更新后重新获取数据。您可能有列选项，或者您必须调用某些方法。

同样的问题是，如果您有列和插入的默认值。

# c# - 主窗口中的 WPF 窗口

> ID：12710395
> 
> 赞同：0
> 
> 时间：2012-10-03T14:14:34.250
> 
> 标签：c#, wpf

我有几个 WPF 窗口。

当我想打开一个新窗口时，我将关闭当前窗口，并加载一个新窗口：

```
ProductMain productMain= new ProductMain();
productMain.Show();
this.Close(); 
```

我知道您可以将用户控件放入窗口中。

我可以在主窗口中加载窗口吗？

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T14:37:24.867

你可以通过设置 Window 的 owner 属性来做类似的事情。要获取主窗口，请使用：

```
Application.Current.MainWindow 
```

之后，您可以设置 ProductMain 窗口的[所有者](http://msdn.microsoft.com/en-us/library/system.windows.window.owner.aspx)：

```
ProductMain productMain= new ProductMain();
productMain.Owner = Application.Current.MainWindow;
productMain.Show(); 
```

# activemq - Spring.net NMS 与 Apache NMS

> ID：12710400
> 
> 赞同：1
> 
> 时间：2012-10-03T14:14:41.933
> 
> 标签：activemq, spring.net, nms

我正在寻找使用 ActiveMQ，我发现 spring.net 有它自己的 NMS 库，Apache 社区也有

[http://www.springframework.net/doc-latest/reference/html/nms-quickstart.html](http://www.springframework.net/doc-latest/reference/html/nms-quickstart.html) http://activemq.apache.org/nms/nms-api.html

有人知道他们的事吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T17:57:03.633

Spring.NET 在下面使用 Apache.NMS 库，就像常规的 Spring JMSTemplate 等使用您配置的 watch JMS 提供程序一样。我记得 Spring.NET 版本默认使用旧版本的 NMS.ActiveMQ。因此，如果您想使用最新的 ActiveMQ .NET 库，则必须直接使用 Apache.NMS.ActiveMQ 或弄清楚如何将更改库连接到 Spring.NET 中。

# jquery - $.POST 请求在 jQuery 中缓慢，子页面和 CSS 和 jQuery 不起作用

> ID：12710402
> 
> 赞同：2
> 
> 时间：2012-10-03T14:14:46.330
> 
> 标签：jquery, post

我有 3 页，`main_page.php`即`ajx_page1.php``ajx_page2.php`

我正在使用`$.post`请求`main_page.php`并发送到`ajx_page1.php`. 在此`ajx_page1.php`发送`$.post`请求之后`ajx_page2.php`。我在下面添加了一张图片以便更好地理解......

## 问题

该请求在我的本地主机上运行良好且快速，当我在实时服务器上运行它时，它需要将近 4-6 秒的时间。这是最可怕的时间流逝。

是否有任何其他方法可以将页面内的 ajax 请求发布到子页面，如下图所示。

并且还`ajx_page2.php`从数据库中检索数据.. 并且其他页面正在从他们的 ajx-child 页面中提取数据

甚至 CSS 和 jQuery 都不起作用..

## 代码

Main_page.php

```
$.post("ajx_page1.php", {parameters}, function(return_data){
    $("#container").html(return_data);
}); 
```

ajx_page1.php

```
$.post("ajx_page1.php", {parameters}, function(return_data){
    $("body").html(return_data);

}); 
```

ajx_page2.php

```
 `some condition and logical data from database` 
```

![在此处输入图像描述](../Images/a079cf81b1ed91a118bc8efe01037f52.png)

* * *

## 更新文件详细信息

## Main_page.php

```
<div id="content_region" class="center">

    <div class="a_job_pre_action clear">
    <ul class="a_jj_ul">
        <li class="j_act_1 j_act" ><a href="" >JOB DETAIL</a> </li>
        <li class="j_act_2 j_act" ><a href="" >STAFF SHORTLISTED</a> </li>
        <li class="j_act_3 j_act" ><a href=""  >CLIENT SHORTLISTED</a> </li>
        <li class="j_act_4 j_act" ><a href="">CONFIRM FOR INTERVIEW</a> </li>

        <?php if ($_SESSION['user_type'] == "admin" or $_SESSION['user_type'] == "manager"): ?>
            <li class="j_act_5 j_act" ><a href="" >INVOICES</a> </li>
        <?php endif; ?>

        <li class="j_act_6 j_act" ><a href="" >CONTACT CLIENT</a> </li>
    </ul> <!-- a_jj_ul -->
    </div> <!-- a_job_pre_action -->

    <div class="clear a_job_action_result">

    </div>

<script>

    $(document).ready(function(){

    $(".j_act_1 a").click(function(){

        $.post("ajx_page1.php", {job_id : j_job_id}, function(return_data32){
            $(".a_job_action_result").html(return_data32);
        });
    });

    });

</script> 
```

* * *

## ajx_page1.php

```
<select class="a_sel" name="sel_staff">
    <?php get_all_staff_options(); ?>
</select>

// and some other data too.

<script>

    $(document).ready(function(){

    $(".ajx_select_status").change(function(){
       var j_job_status = $(this).val();
        var j_job_code = "<?php echo $curr_job_data['job_code']; ?>";

        $.post("ajx_page.php", {job_status : j_job_status, job_code : j_job_code}, function(return_data32){
            alert(return_data32);
        });

    });

    });

</script> 
```

* * *

## ajx_page2.php

```
full pure php code here 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-06T19:19:59.473

出色地。当我的页面运行缓慢时。我做了以下 4 件事：

（我使用 chrome 并按 F12 ）

*   在您的三个 php 页面上添加计时器开始和停止打印输出，尤其是在数据库调用周围。
*   点击 [“审计”](http://developer.chrome.com/extensions/experimental.devtools.audits.html) 并运行它
*   单击 [“时间轴”](https://developers.google.com/chrome-developer-tools/docs/timeline) 并运行它
*   单击 [“配置文件”](https://developers.google.com/chrome-developer-tools/docs/profiles) 并运行它

它会准确地告诉您页面上的缓慢之处。通常的嫌疑人是您的数据库调用，因此请检查时间打印输出以确认数据库性能。

--- 可选--- 听起来你总是在为进一步的 ajax 调用引入 css。将 css 拉入主页，直到您恢复速度。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T02:57:14.867

我在这里看到了架构问题，

为什么你不只是制作简单的 .js 独立文件，它将执行 ajax 请求，**检查`success: function() {}`参数`$.post()`**

解决问题的方法让我假设 php 代码也被奇怪的解决方案超载，导致速度变慢。

还要记住 - javascript 是客户端，如果您尝试以这种方式使用任何 ACL，那么请制定您的 dao。:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-08T03:30:29.493

明智的做法是找到一种更有效的方式来处理您的数据。我的第一个想法是通过将 ajax_page2 中的代码包含到 ajax page 1 中来避免使用第三个 php 脚本，或者甚至将 ajax_page_1 中的 php 代码组合起来并对页面本身进行 ajax 调用

如果您不被允许或不能这样做，请尝试缓存您的结果以加快您的进程，一种方法是使用 memcached 甚至自定义脚本：例如[http://www.profilepicture.co.uk /缓存-api-responses-php/](http://www.profilepicture.co.uk/caching-api-responses-php/)

# git - Git：如何检查特定目录中所有提交的 .css 文件？

> ID：12710407
> 
> 赞同：0
> 
> 时间：2012-10-03T14:15:08.347
> 
> 标签：git, git-checkout

我在其中添加和删除了一堆文件，`/webroot/modules/mod_menu`我想从上次提交中取回所有 .css 文件。不幸的是，我已经删除了它们，我不记得它们的名字了。

如果我尝试做

```
git checkout HEAD^ /webroot/modules/mod_menu/*.css 
```

它失败并显示如下消息

```
error: pathspec '/webroot/modules/mod_menu/css_5XB5aQOGzDUVxnwtHDXg0AJDjmjZbe2Sh1K2BEkR5cM.css' did not match any file(s) known to git.
error: pathspec '/webroot/modules/mod_menu/css_foYlSNpOa-3y78f5xFwefA_kiFD67qfm6I1kXpro1XI.css' did not match any file(s) known to git.
error: pathspec '/webroot/modules/mod_menu/css_n7aK8s-ciXhQyEYWNOJtISbWxtxQiQvnD-N_xWUtD5A.css' did not match any file(s) known to git. 
```

这是有道理的：它试图签出的文件是新文件，而不是我之前提交的文件。但是如果我不知道文件的名称，我该如何检查它们呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T14:18:09.903

[结帐](http://www.kernel.org/pub/software/scm/git/docs/git-checkout.html)的文档在 SYNOPSIS 部分中有这个

```
git checkout [-p|--patch] [<tree-ish>] [--] [<paths>…] 
```

看起来你错过了`--`between`<tree-ish>`和`<paths>`。以下应该工作。

```
git checkout HEAD^ -- /webroot/modules/mod_menu/*.css 
```

* * *

> 那是什么 - ？...

According to [this answer](https://stackoverflow.com/a/8275475/164966) *The double-dash is used to separate references, such as `master` or `HEAD` from file paths...*

# java - 强制应用程序使用特定文件夹中的 dll

> ID：12710410
> 
> 赞同：-1
> 
> 时间：2012-10-03T14:15:23.520
> 
> 标签：java

我正在回复之前的帖子：

[如何强制 VB6 程序使用指定文件夹中的 dll？](https://stackoverflow.com/questions/8505784/how-to-force-a-vb6-program-to-use-a-dll-in-a-specified-folder)

（虽然我拥有的应用程序不是用 VBA 编写的应用程序 - 而是 Java）

我在 .exe 应用程序所在的文件夹中添加了一个空的 txt 文件。

IpmGun.exe.local

在同一文件夹中还有应用程序正在使用的 mqic32.dll。不幸的是，它不起作用。如果运行 IpmGun.exe 我得到“未加载服务器 DLL (MQIC32.dll)”

任何想法如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T20:23:32.887

IpmGun 不是 Java 程序，而是 Windows 32 位可执行文件。您要加载的 mqic32.dll 是 IBM websphere 消息代理的一部分。当您在您的机器上安装 MQ 本地客户端软件（可从 IBM 免费获得）时，将加载 dll。如果您无法在您选择的机器上安装它，也许您可​​以先将其安装在其他地方，然后将所有 dll 复制到 Ipmgun 当前所在的文件夹中。

# sql-server - 在 OleDbCommand 的插入语句中指定函数

> ID：12710415
> 
> 赞同：0
> 
> 时间：2012-10-03T14:15:51.990
> 
> 标签：sql-server, oledb, oledbcommand

我们有遗留数据作为 varchar 存储在 MSSQL 数据库中，即使数据实际上是二进制的。在新应用程序中，我们使用 OleDbCommand（因为我们试图使用通用代码来访问 MSSQL+Oracle+Sybase）数据库。

我可以通过执行以下操作从数据库中检索数据：

```
 DA.SelectCommand.CommandText = "select 
sequence_num, summary_num, line_num, CONVERT(varbinary, other_information) other_information 
from alex_test_bin"; 
```

但是插入命令：

```
 DA.InsertCommand.CommandText = "insert into alex2_test_bin 
(sequence_num, summary_num, line_num, other_information) 
values(?, ?, ?, CONVERT(varchar, ?))"; 
```

抛出此错误（它发生在 'DA.Update(DT);' 期间）：

> 没有为一个或多个必需参数指定值。

目前我只是试图从 alex_test_bin 读取数据并将数据插入 alex2_test_bin。在读取和写入之间，我在 DT 的每一行上使用方法“SetAdded()”，以便插入所有这些行。

我的插入语句错了吗？有没有办法纠正它，并且能够在插入语句中使用函数？我成功地从 sql manager 手动运行了 insert 语句。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T14:41:45.937

在没有看到完整代码的情况下，您似乎根本没有将参数添加到`DA.InsertCommand`.

对于用 表示的每个参数`?`，您需要附加一个 OleDbParameter：

```
DA.InsertCommand.Parameters.Parameters.Add("@sequence_num", OleDbType.Integer).Value = 42 
```

`insert into`您需要按照在语句中指定的顺序将它们附加到命令中。

# sql - 在 SQL Server 表 NVARCHAR 列中搜索忽略 unicode 特殊字符

> ID：12710422
> 
> 赞同：0
> 
> 时间：2012-10-03T14:16:15.017
> 
> 标签：sql, sql-server-2008

> **可能重复：**
> [如何在 SQL Server 中执行不区分重音的比较（e 与 è、é、ê 和 ë）？](https://stackoverflow.com/questions/2461522/how-do-i-perform-an-accent-insensitive-compare-e-with-e-e-e-and-e-in-sql-ser)

假设我的专栏文字中有：

```
"some text ... España .. some text" 
```

即使我写，是否可以编写返回此行的查询：

```
where dataColumn LIKE N'%espana%' 
```

我必须忽略的特殊字符数量有限

谢谢你的帮助

# ruby-on-rails - Capistrano deploy:migrate 在任何源中都找不到 rake-0.9.2.2

> ID：12710423
> 
> 赞同：1
> 
> 时间：2012-10-03T14:16:17.060
> 
> 标签：ruby-on-rails, capistrano, rails-migrations

我的 Capistrano deploy:migrate 任务设置为运行一个简单的 rake db:migrate 命令，如下所示：

```
env PATH=/home/user/.gems/bin sh -c 'cd /home/user/app/releases/20121003140503 && rake RAILS_ENV=production  db:migrate' 
```

当我在 ssh 会话期间手动运行此任务时，它成功完成。但是，当我从本地开发框运行时，我收到以下错误：

```
** [out :: app] Could not find rake-0.9.2.2 in any of the sources 
```

我可以`which rake`通过 ssh (/home/user/.gems/bin/rake) 键入来找到我的 rake gem，并`rake --version`给我“rake，版本 0.9.2.2”，所以我不明白为什么这个命令通过 Capistrano 失败？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-03T15:36:04.873

Capistrano 默认不放在命令`bundle exec`之前`rake`。如果您确定捆绑包中有 rake gem，请尝试将其添加到您的`deploy.rb`.

```
set :rake, 'bundle exec rake' 
```

这将告诉 Capistrano 而不是`rake`run `bundle exec rake`。如果它在您的捆绑包中，您将不再有任何问题，并且如果您的系统上安装了更多版本的 rake，您也将避免冲突。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-23T22:46:51.930

您可能还需要将您的宝石与此捆绑：

```
require "bundler/capistrano" 
```

Via：[为什么 Capistrano 不使用 bundler 安装 gem？](https://stackoverflow.com/questions/10867383/why-is-capistrano-not-installing-gems-with-bundler)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-23T23:32:34.390

一旦你进入你的应用文件夹，你只需输入： `$bundle exec rake`而不是仅仅`$rake`

# android - Android - 创建老虎机动画的技巧

> ID：12710425
> 
> 赞同：5
> 
> 时间：2012-10-03T14:16:21.977
> 
> 标签：android, animation, canvas, imageview, android-linearlayout

我想在 Android 中创建一个像老虎机一样的动画，但我不知道该怎么做。

我希望动画看起来像这样： [http](http://www.youtube.com/watch?v=EX-uzP6BdjI) ://www.youtube.com/watch?v= EX-uzP6BdjI（我猜它很明显），但是有 8 个小节，而不是水果，我想要字母。

现在，我已经得到了字母的图像（每个字母分开，所有字母都有一个）。但是因为我想在某种框架中显示字母，所以我需要将字母保持在该框架内（就像示例一样），这对我来说似乎很难，只有一张图像。

制作这样的动画的最佳方法是什么？

结束位置（最后一个字母）将在动画开始之前随机选择，并且动画需要能够根据该字母进行更改。

动画不一定要平滑（它可以在结尾突然停止，而不是平滑的结尾），但如果它很容易做到，我更喜欢那样。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-08-24T12:42:04.700

尝试为每个可能的滚动创建动画视频，然后随机选择结果并播放相应的视频。一个简单的 if 子句可以调用正确的视频，但如果你有很多可能性，你可能更喜欢使用 switch case。如果您这样做，那么您可以将每个预定结果的照片放在一起，并将它们用于拖放图像视图。

# c++ - 检测另一个函数的参数类型、值以及名称和返回值的函数？

> ID：12710427
> 
> 赞同：0
> 
> 时间：2012-10-03T14:16:32.083
> 
> 标签：c++, function, arguments

我想知道我是否可以编写一个函数来检测另一个函数的参数类型、值和函数名以及返回值。

例如。我有一个功能：

```
double average(string datapath, double *data, int numofinput)
{
   // some code here
} 
```

我想要另外一个函数，比如detector()，可以插入到要检测的函数中，比如

```
double average(string datapath, double *data, int numofinput)
{

   // some code here
   detector();
} 
```

检测器将返回：

```
name: average
returned value: 2.43
pathname: string='C:/Users/Nick/Data/'
data: pointer=0x0065
numofinput: int=17 
```

之类的。任何建议都受到高度赞赏。谢谢。缺口

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T14:24:51.877

一般来说，这是无法做到的：

*   `detector`需要在实际返回任何东西之前显示返回值，这与读心术相同
*   构建二进制文件时，其中的函数名称不可用（通常，导出除外）
*   您的`average`函数可能根本不是函数，因为编译器可以内联它。

但是，对于特定情况，您可以获取此信息 - 假设您有可用的调试符号，而通常您没有。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T14:41:27.767

这是一个（未经测试的）想法：

```
#define DETECTOR(name, ...) detector_wrapper(name, #name, ##__VA_ARGS__)

template <typename R, typename ...Args, typename ...Brgs>
R detector_wrapper(R(&f)(Args...), char const * name, Brgs &&... brgs)
{
    auto && result = f(std::forward<Brgs>(brgs)...);

    std::cout << "Function name: " << name << std::endl
              << "Return type:   " << demangle(R) << std::endl 
              << "Return value:  " << result << std::endl;

    return result;
} 
```

用法：

```
double d = DETECTOR(average, path, data, n); 
```

通过更多的工作，您还可以打印参数的类型及其值，尽管*不是*它们的名称（显然，因为名称不是声明的一部分，只是定义的一部分）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-03T15:00:37.330

好的，这是另一种方法，包括打印参数名称和类型。它不是很优雅，有两个原因：

1.  对于您发送的每个参数，它都需要一个新宏，并且...
2.  真是吓人的宏！我从未见过它们被优雅地使用（这也不例外）。

所以这里是：

```
#include <iostream>

#define DETECTOR_0ARG_FUNC(RETTYPE, NAME)   \
            RETTYPE NAME() \
            { \
                std::cout << "Function Name: " #NAME << std::endl; \
                std::cout << "Returns: " #RETTYPE << std::endl; \
                std::cout << "No Parameters" << std::endl;

#define DETECTOR_1ARG_FUNC(RETTYPE, NAME, PARAM1TYPE, PARAM1NAME)   \
            RETTYPE NAME(PARAM1TYPE PARAM1NAME) \
            { \
                std::cout << "Function Name: " #NAME << std::endl; \
                std::cout << "Returns: " #RETTYPE << std::endl; \
                std::cout << "Pameter 1 (" #PARAM1TYPE " " #PARAM1NAME "): " << PARAM1NAME << std::endl;

#define DETECTOR_RETURN(RETTYPE, VALUE) \
                RETTYPE __retval = (VALUE); \
                std::cout << "Returning: " << __retval << std::endl << std::endl; \
                return __retval;

#define DETECTOR_END_FUNC   \
            }

DETECTOR_0ARG_FUNC(int, GetFiveFactorial)

    int result = 1;
    for(int i=5; i>0; i--)
    {
        result = result * i;
    }
    DETECTOR_RETURN(int, result)

DETECTOR_END_FUNC

DETECTOR_1ARG_FUNC(int, GetFactorial, int, initVal)

    int result = 1;
    for(int i=initVal; i > 0; i--)
    {
        result = result * i;
    }
    DETECTOR_RETURN(int, result);

DETECTOR_END_FUNC

int main(int argc, char **argv)
{
    GetFiveFactorial();
    GetFactorial(7);
    return 0;
} 
```

输出：

```
Function Name: GetFiveFactorial
Returns: int
No Parameters
Returning: 120

Function Name: GetFactorial
Returns: int
Pameter 1 (int initVal): 7
Returning: 5040 
```

我有点不建议你这样做。但从理论上讲，这种方式是可能的。

# flash - Windows RT 上的 Internet Explorer 10 是否支持所有网站的 Flash？

> ID：12710431
> 
> 赞同：2
> 
> 时间：2012-10-03T14:16:37.840
> 
> 标签：flash, windows-8, internet-explorer-10

**更新**：这已经改变了。*除非*明确列入黑名单，否则Windows RT 和 Windows 8 都将支持 Flash 。来源：http: [//blogs.msdn.com/b/ie/archive/2013/03/11/flash-in-windows-8.aspx](http://blogs.msdn.com/b/ie/archive/2013/03/11/flash-in-windows-8.aspx)

我有一个基于 Flash 的网站，我希望它在 Windows RT 上的 IE10 上运行。搜索后不知道会不会。

这是我所知道的：

*   Microsoft 维护着一个**[IE10 Flash 兼容性列表](http://msdn.microsoft.com/en-us/library/ie/jj193557%28v=vs.85%29.aspx)**，该列表列出了 Flash 在 Windows RT 和 Windows 8 上适用于 IE10 现代 UI 模式和 IE10 桌面模式的站点列表。

*   我的网站不在兼容性列表 ( [iecompatdata.xml](https://gist.github.com/3860056) ) 上。

**在文档中，对于不在兼容性列表**中的网站，Windows RT 是否应支持 Flash 并不清楚。这部分是由于“Windows 8”和“Windows RT”之间缺乏区别

例如（[来源](http://msdn.microsoft.com/en-us/library/ie/jj193557%28v=vs.85%29.aspx)）：

> **关于兼容性 查看列表**
> 
> 尽管任何站点都可以在 Internet Explorer 10 桌面版中播放 Flash 内容，但只有位于 Flash 兼容性视图 (CV) 列表中的站点才能在新 Windows UI 中的 Internet Explorer 10 中播放 Flash 内容。

在这里，我不确定“桌面版 Internet Explorer 10”是否包括在桌面模式下运行的 Windows RT IE10。

对于那些说“Windows RT 没有桌面模式”的人——这是不正确的，Windows RT 有桌面模式但*仅*适用于 IE10 和 Microsoft Office。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-03T22:57:19.120

Windows RT 附带 Flash Player 版本 11.3.xx，但它仅适用于处于 Metro (Windows UI) 和桌面模式的白名单站点。这不同于仅在 Metro 模式下才需要列入白名单的 Intel 机器的 Windows 8 常规版本。

为了让基于 Flash 的内容以任何一种模式在 Windows RT 设备上呈现，您必须申请并获得认证，相关信息可在[此处](http://msdn.microsoft.com/en-us/library/ie/jj193557%28v=vs.85%29.aspx)找到。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-14T18:15:41.487

我认为您只需要以正确的方式解析它并保持术语直截了当。

Windows RT 是仅在 ARM 设备上运行的 Windows 8 版本，并且仅限于使用以前称为 Metro 的 UI，请参阅[http://en.wikipedia.org/wiki/Windows_RT](http://en.wikipedia.org/wiki/Windows_RT)。

在新的 Windows 8 风格 UI (Metro) 中运行的 IE10 是一个特殊的 Windows Store 应用程序，可在所有 Windows 8 机器上使用，它不限于 Windows RT 设备。桌面版IE10是IE的完整版，将继续支持IE的全部功能。它仅在您处于桌面模式时可用，因此在运行 Windows RT 的 ARM 设备上不可用。

所以没有“Windows RT IE 10 在桌面模式下运行”之类的东西。它是用于桌面的 Metro IE10 或 IE10。

我已经在网上搜索了一段时间以尝试确认 IE10 是否可用于 Windows 7。我发现的最好的是在 MSDN 上，请参阅[http://msdn.microsoft.com/en-us/library/ie /hh673549(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/ie/hh673549(v=vs.85).aspx)。这意味着 IE10（桌面版）将同时适用于 Windows 7 和 Windows 8。

# iphone - 静态单元格不显示

> ID：12710435
> 
> 赞同：1
> 
> 时间：2012-10-03T14:16:50.540
> 
> 标签：iphone, uitableview, ios5, cell

我指的是[raywenderlich](http://www.raywenderlich.com/5191/beginning-storyboards-in-ios-5-part-2)的教程，我已经完成了它所说的一切，但我的静态单元格仍然没有显示，对此有任何帮助....

但它可以在我连接的表视图中添加数据。

这是我故事板中的屏幕。

![在此处输入图像描述](../Images/f8e406ec3a852d904879160019c7db4a.png)

这是我的模拟器屏幕。

![在此处输入图像描述](../Images/f1a6cd58de33919bbcc78da13cfed9c1.png)

**更新 1**

当我有这样的更改代码时，将显示部分但仍不显示行。

```
- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{

    // Return the number of sections.
    return 2;
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{

    // Return the number of rows in the section.
    return 0;
}
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"Cell";
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

    // Configure the cell...

    return cell;
} 
```

![在此处输入图像描述](../Images/880a91beedfd3565b0060471638d43e2.png)

在 PlayerDetailVewController.h 委托中，

```
 @class Player;
    @class PlayerDetailsViewController;

    @protocol PlayerDetailsViewControllerDelegate <NSObject>
    - (void)playerDetailsViewControllerDidCancel:
    (PlayerDetailsViewController *)controller;
    //- (void)playerDetailsViewControllerDidSave:
    //(PlayerDetailsViewController *)controller;
    - (void)playerDetailsViewController:
    (PlayerDetailsViewController *)controller 
                           didAddPlayer:(Player *)player;
    @end
@interface PlayerDetailsViewController : UITableViewController

@property (nonatomic, weak) id <PlayerDetailsViewControllerDelegate> delegate; 
```

**更新 2**

当我像这样更改部分返回 1 中的行时，

```
- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{

    // Return the number of sections.
    return 2;
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{

    // Return the number of rows in the section.
    return 1;
} 
```

并显示这样的错误

```
2012-10-04 13:54:46.152 Rating[514:f803] *** Assertion failure in -[UITableView _createPreparedCellForGlobalRow:withIndexPath:], /SourceCache/UIKit_Sim/UIKit-1914.84/UITableView.m:6061
2012-10-04 13:54:46.154 Rating[514:f803] *** Terminating app due to uncaught exception 'NSInternalInconsistencyException', reason: 'UITableView dataSource must return a cell from tableView:cellForRowAtIndexPath:'
*** First throw call stack:
(0x13cf022 0x1560cd6 0x1377a48 0x9b02cb 0xb3d28 0xb43ce 0x9fcbd 0xae6f1 0x57d21 0x13d0e42 0x1d87679 0x1d91579 0x1d164f7 0x1d183f6 0x1d17ad0 0x13a399e 0x133a640 0x13064c6 0x1305d84 0x1305c9b 0x12b87d8 0x12b888a 0x19626 0x29cd 0x2935)
terminate called throwing an exception(lldb) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T14:59:12.853

您是否在您正在使用的类中正确地实现了委托和数据`UITableView`源`UITableViewCell`？

另外，您需要检查是否没有。的行和部分在数据源方法中是正确的`UITableView`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-04T11:59:52.070

你的日志说

'UITableView dataSource 必须从 tableView 返回一个单元格：cellForRowAtIndexPath：'

这意味着 cellforrowatindexpath 不能返回任何值。删除此方法，

```
(void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath 
```

# bash - bash, 2 子句 if 语句

> ID：12710439
> 
> 赞同：0
> 
> 时间：2012-10-03T14:17:04.740
> 
> 标签：bash

```
if [[ $GreaterThanTwenty==1 &&  $LessThanThirty==1 ]]
then
    echo "within limits"
else
    echo "Outside limits"
fi
echo $GreaterThanTwenty
echo $LessThanThirty 
```

即使回声显示此时 LessThanThirty 实际上为 0，为什么会触发范围内？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T14:23:48.093

您应该使用以下之一比较算术值：-eq、-ne、-lt、-le、-gt 或 -ge，表示等于、不等于、小于、小于或等于、大于和大于或等于，分别。

参考：[http ://www.ibm.com/developerworks/library/l-bash-test/index.html](http://www.ibm.com/developerworks/library/l-bash-test/index.html)

# c# - 加载弹出窗口后执行 Gridview_RowCommand

> ID：12710440
> 
> 赞同：0
> 
> 时间：2012-10-03T14:17:11.477
> 
> 标签：c#, asp.net

我有一个搜索屏幕，我在其中使用 GridView，在 GridView 中，我`<asp:LinkButton>`在它的命令参数中使用该列的值并`(Container.DataItemIndex+1)`查找我单击的项目的行号。我在`Gridview_RowCommand`会话变量中分配这些值，以便可以将它们传递给弹出窗口。

假设我的搜索屏幕已经填充了两行，点击第一行它工作正常，我可以在弹出窗口中访问会话变量；但是，当我单击第 2 行的链接按钮弹出窗口时，会先刷新，然后再`Gridview_RowCommand`执行，因此我没有在会话变量中获得更新的值。

下面是我在 aspx 页面中的链接按钮： 单击链接按钮时调用的弹出窗口是一个 HTML 页面，它有两个框架，每个框架都包含在 aspx 页面上。

```
<Columns>
    <asp:TemplateField HeaderText="File Name" ItemStyle-HorizontalAlign="Center">
        <ItemTemplate>
            <asp:LinkButton ID="btn"  runat="server" Text='<%#Eval("Empid")%>'
CommandName="Click" CommandArgument='<%#Eval("Empid") + "," 
+ (Container.DataItemIndex+1)%>' OnClientClick='<%# Eval("Empid",
"window.open(\"abc.html\",null,\"location=0,status=0,toolbar=0
,menubar=0,resizable=1\",\"true\");")%>'/>
        </ItemTemplate>  
</Columns> 
```

下面的代码是 aspx.cs 代码，我将 empid 和 Container.DataItemIndex+1 的值存储在会话变量中。

```
protected void grdDisplayResult_RowCommand(object sender, GridViewCommandEventArgs e)
{
    switch (e.CommandName)
    {
        case "Click":
        {
            string[] arg = new string[1];
            arg = e.CommandArgument.ToString().Split(',');
            Session["Empid"] = arg[0];
            Session["RowNum"] = arg[1];
            break;
        }
        default:
            break;
    }
} 
```

我还有一个弹出窗口，当用户单击链接按钮时会弹出该窗口。

# c - 拦截到自定义 UDP 服务器的 Syslog 日志流量

> ID：12710443
> 
> 赞同：0
> 
> 时间：2012-10-03T14:17:21.887
> 
> 标签：c, logging, udp, syslog

我正在尝试从 ubuntu 中的自定义 UDP 服务器拦截应用程序特定的 syslog 日志流量。出于测试目的，我停止了在端口 514 中运行的默认 syslogd 守护进程，并配置了一个 UDP 服务器以侦听端口 514 上的 UDP 流量。这样做时我遇到了以下问题：

1.  必须使用 SYSLOGD="-r" 在 /etc/default/syslogd 文件中启用远程日志记录功能。但是，由于我停止了 syslogd 守护程序并在端口 514 上运行我自己的 UDP 服务器，有没有其他方法可以在不使用 syslog.conf 文件的情况下启用远程日志记录（以编程方式等），以便将日志流量发送到端口 514 ?

2.  有没有办法使用默认端口 514 将 syslog 日志流量定向到另一个端口（必须将流量发送到两个端口）？如果是这种情况，我可以轻松地在第二个端口运行自定义 UDP 守护程序并拦截日志流量。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T22:06:24.873

你不能有两个守护进程在同一个端口上监听。设置您的 UDP 测试服务器（例如 netcat）以侦听另一个端口（例如 1514）并配置您的 ubuntu 服务器以将日志发送到此端口。

# gradle - 重新运行测试时删除过时的测试输出

> ID：12710445
> 
> 赞同：1
> 
> 时间：2012-10-03T14:17:29.353
> 
> 标签：gradle

我正在使用带有 Java 插件的 gradle。

重新运行测试时有没有办法删除过时的测试输出？（在文件夹 testReportsDir 和 testResultsDir 中）
我看到以下可能的解决方案，但我不知道如何配置它：

*   在运行测试之前删除所有测试输出。
*   运行测试后删除过时的测试输出文件。

**背景：**
当输入/输出发生变化时，我只不想重新运行测试用例。
虽然在重新运行测试时我想清除报告，以便没有旧报告。

**示例：**如果我重命名/删除一个 TestClass123，testResultsDir 仍将包含一个旧 xml，其中包含已删除/重命名的 testclass 的结果。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T18:58:06.523

作为一种解决方法，您可以在 doFirst 块中删除 testresultsDir：

```
test{
   doFirst{
       delete testResultsDir
   }
} 
```

# python - 我想准确搜索一个单词并使用 python 文件处理打印行

> ID：12710451
> 
> 赞同：0
> 
> 时间：2012-10-03T14:17:57.637
> 
> 标签：python

我的文件包含：

```
"1 2 3 4 5 5 6  searching new
 1 2 3 4 5 5 6  search"
 1 2 3 4 5 5 6  search and" 
```

代码：

```
with open('largeFile', 'r') as inF:
 for line in inF:
    if 'search' in line:
    # do_something 
```

我得到了我只想要第二行的两条线。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T14:20:36.160

像这样排除`searching`：

```
with open('largeFile', 'r') as inF:
    for line in inF:
         if not 'searching' in line:
             # do_something 
```

取决于其他线条的外观。更准确地说，你可以这样做：

```
....if 'search' and not 'searching' in line: 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T14:20:57.970

怎么样

```
if line.endswith("search") 
```

但公平地说，它并不清楚你想要什么。请发布更多示例行并告诉我们您期望哪些行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-03T14:36:02.580

您可以使用正则表达式。

使用**单词边界**(\b) 检查`words`, 并`$`检查**行尾**..

```
>>> line = "abc search"
>>> if re.search('(\\b(search)\\b)$', line):
          print "true"

true

>>> line1 = "search asdf"
>>> if re.search('(\\b(search)\\b)$', line):
          print "true"
>>> else:
          print "false"

false 
```

# sql-server - 为什么我的损坏的存储过程被删除了？

> ID：12710455
> 
> 赞同：3
> 
> 时间：2012-10-03T14:18:08.933
> 
> 标签：sql-server, asp.net-mvc, entity-framework, stored-procedures, ado.net

我有一个配置为使用实体框架 5 的 ASP.NET MVC 4 项目，由 SQL Server 数据库支持。

我的数据库中的一个存储过程执行了非法操作：它试图将一个`NULL`值插入到`NOT NULL`列中。可以理解的是，这失败了。

令人费解的是，Entity Framework（或者我的 ASP.NET MVC 堆栈的其他组件，或者我的 SQL Server 数据库）然后从数据库**中删除了存储过程**！

当我尝试调用我的存储过程时收到的错误消息的屏幕截图如下：

![显示的错误页面](../Images/1e941f6d3b5369491a173943f1e34da5.png)

我似乎找不到有关此行为的任何文档。

**为什么会发生这种情况，我可以做些什么来防止存储过程被删除？**

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-10-26T12:17:24.720

使用 Sql 分析器。

以及简单的解决方案

使您的列接受 Null 值:)

# xaml - 使用 XAML 在 Windows 8 中使用路径动画

> ID：12710457
> 
> 赞同：1
> 
> 时间：2012-10-03T14:18:10.800
> 
> 标签：xaml, animation, windows-8, .net-4.5

我想通过提供的路径为 UI 控件（实际上是图像）设置动画。

看起来在 Windows 8 中使用 XAML 是不可能的，尽管从下面的参考资料中可以看到 .NET 4.5 是可能的。

[http://msdn.microsoft.com/en-us/library/ms746981.aspx](http://msdn.microsoft.com/en-us/library/ms746981.aspx)

我的问题是是否有一种解决方法可以用来实现我的目标或接近它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T14:34:16.907

WinRT 与 Silverlight 非常相似，因此许多 Silverlight 解决方案可以在 WinRT 中运行，只需极少或无需更改。CodeProject 上的这个示例应该会给你 DoubleAnimationUsingPath 很少的工作。

[http://www.codeproject.com/Articles/30819/Animation-Along-a-Path-for-Silverlight](http://www.codeproject.com/Articles/30819/Animation-Along-a-Path-for-Silverlight)

# tfs - TFS2012、VS2008 和 Microsoft Visual Studio Scrum

> ID：12710467
> 
> 赞同：2
> 
> 时间：2012-10-03T14:18:57.057
> 
> 标签：tfs, visual-studio-2008, compatibility, scrum

我目前正在寻找将现有的 TFS2008 服务器迁移到新的 VS2012 服务器。

这背后的主要原因是我们希望能够使用 Microsoft Visual Studio Scrum 模板，但是我正在努力确定 VS2008 是否能够操作使用此模板创建的工作项（根据所有博客和/或我能找到的其他信息，模板只能安装到 VS2010 或 VS2012 服务器，但 Visual Studio 客户端尚不清楚）。我相信 VS2010 和 VS2012 都可以访问基于这些模板的操作项。

注意：我们现在必须使用 VS2008，因为有些项目是针对移动设备（Windows/CE、Windows Mobile）的，而且我相信你会知道，这些项目不受 VS2010 或 VS2012 的支持）。

我知道 VS2008 和 VS2010 的兼容性 GDR，但他们再次没有提到任何关于 scrum 模板的具体内容。

所以，我的问题很简单...

我可以从 Team Explorer 2008/Visual Studio 2008 访问和操作（添加新工作项、更新现有项、创建 sprint 等）基于 Team Foundation Server 2012 上的 Microsoft Visual Studio Scrum 模板之一的 TFS 项目。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-04T09:28:33.430

工作项流程模板（例如 VS Scrum）与用于连接 TFS 的客户端版本**无关**，这意味着任何版本的**Visual Studio**（2008、2010 或 2012）都可以与 TFS 2012 一起使用，无论流程模板（Scrum、敏捷 MSF 或 CMMI）。

此外，[**前向兼容性**GDR](http://www.microsoft.com/en-us/download/details.aspx?id=29983)提供了团队资源管理器扩展（窗口），这将使 VS 2008 能够使用**TFS** 2012 的新功能（例如迭代的开始和结束日期、容量规划等）。

流程模板（即 Visual Studio Scrum 2.0）不过是一组 XML 文档，详细说明您将拥有哪些**工作项类型、它们包含哪些****字段**、一些报告、SharePoint 设置、安全设置等。这些都不会影响或受到影响通过 Visual Studio 的版本。

# button - 使用 JavaFX 2.2 助记符（和加速器）

> ID：12710468
> 
> 赞同：12
> 
> 时间：2012-10-03T14:19:05.843
> 
> 标签：button, javafx-2, javafx, shortcut

我正在尝试使 JavaFX Mnemonic 工作。我在场景中有一些按钮，我想要实现的是通过按 Ctrl+S 来触发这个按钮事件。这是一个代码片段：

```
@FXML
public Button btnFirst;

btnFirst.getScene().addMnemonic(new Mnemonic(btnFirst, 
            new KeyCodeCombination(KeyCode.S, KeyCombination.CONTROL_DOWN))); 
```

Button 的 mnemonicParsing 为 false。（好吧，在尝试完成这项工作时，我尝试将其设置为 true，但没有结果）。JavaFX 文档指出，当一个 Mnemonic 被注册到一个 Scene 上，并且 KeyCombination 到达未消费的 Scene 时，那么目标 Node 将被发送一个 ActionEvent。但这不起作用，可能，我做错了......

我可以使用标准按钮的助记符（通过将 mnemonicParsing 设置为 true 并在“F”字母前加上下划线字符）。但是这种方式用户必须使用 Alt 键，这会在带有菜单栏的浏览器上带来一些奇怪的行为（如果应用程序嵌入到网页中，而不是在按下 Alt+S 触发按钮事件后激活浏览器的菜单）。此外，标准方式使得无法制作快捷键如 Ctrl+Shift+F3 等。

那么，是否有某种方法可以使这项工作？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-10-03T18:38:42.647

对于您的用例，我认为您实际上想要使用加速器而不是助记符。

```
button.getScene().getAccelerators().put(
  new KeyCodeCombination(KeyCode.S, KeyCombination.SHORTCUT_DOWN), 
  new Runnable() {
    @Override public void run() {
      button.fire();
    }
  }
); 
```

在大多数情况下，建议您使用 KeyCombination.SHORTCUT_DOWN 作为修饰符说明符，如上面的代码所示。[KeyCombination](http://docs.oracle.com/javafx/2/api/javafx/scene/input/KeyCombination.html)文档中有一个很好的解释：

> 快捷键修饰符用于表示主机平台键盘快捷键中常用的修饰键。例如，Windows 上的控制和 Mac 上的元（命令键）。通过使用快捷键修饰符，开发人员可以创建独立于平台的快捷键。因此，“Shortcut+C”组合键在内部处理为 Windows 上的“Ctrl+C”和 Mac 上的“Meta+C”。

如果您想专门编写代码以仅处理 Ctrl+S 组合键，您可以使用：

```
new KeyCodeCombination(KeyCode.S, KeyCombination.CONTROL_DOWN) 
```

这是一个可执行的示例：

```
import javafx.animation.*;
import javafx.application.Application;
import javafx.event.*;
import javafx.geometry.Pos;
import javafx.scene.Scene;
import javafx.scene.control.*;
import javafx.scene.image.*;
import javafx.scene.input.*;
import javafx.scene.layout.VBox;
import javafx.stage.Stage;
import javafx.util.Duration;

public class SaveMe extends Application {
  @Override public void start(final Stage stage) throws Exception {
    final Label response = new Label();
    final ImageView imageView = new ImageView(
      new Image("http://icons.iconarchive.com/icons/gianni-polito/colobrush/128/software-emule-icon.png")
    );
    final Button button = new Button("Save Me", imageView);
    button.setStyle("-fx-base: burlywood;");
    button.setContentDisplay(ContentDisplay.TOP);
    displayFlashMessageOnAction(button, response, "You have been saved!");

    layoutScene(button, response, stage);
    stage.show();

    setSaveAccelerator(button);
  }

  // sets the save accelerator for a button to the Ctrl+S key combination.
  private void setSaveAccelerator(final Button button) {
    Scene scene = button.getScene();
    if (scene == null) {
      throw new IllegalArgumentException("setSaveAccelerator must be called when a button is attached to a scene");
    }

    scene.getAccelerators().put(
      new KeyCodeCombination(KeyCode.S, KeyCombination.SHORTCUT_DOWN), 
      new Runnable() {
        @Override public void run() {
          fireButton(button);
        }
      }
    );
  }

  // fires a button from code, providing visual feedback that the button is firing.
  private void fireButton(final Button button) {
    button.arm();
    PauseTransition pt = new PauseTransition(Duration.millis(300));
    pt.setOnFinished(new EventHandler<ActionEvent>() {
      @Override public void handle(ActionEvent event) {
        button.fire();
        button.disarm();
      }
    });
    pt.play();
  }

  // displays a temporary message in a label when a button is pressed, 
  // and gradually fades the label away after the message has been displayed.
  private void displayFlashMessageOnAction(final Button button, final Label label, final String message) {
    final FadeTransition ft = new FadeTransition(Duration.seconds(3), label);
    ft.setInterpolator(Interpolator.EASE_BOTH);
    ft.setFromValue(1);
    ft.setToValue(0);
    button.setOnAction(new EventHandler<ActionEvent>() {
      @Override public void handle(ActionEvent event) {
        label.setText(message);
        label.setStyle("-fx-text-fill: forestgreen;");
        ft.playFromStart();
      }
    });
  }

  private void layoutScene(final Button button, final Label response, final Stage stage) {
    final VBox layout = new VBox(10);
    layout.setPrefWidth(300);
    layout.setAlignment(Pos.CENTER);
    layout.getChildren().addAll(button, response);
    layout.setStyle("-fx-background-color: cornsilk; -fx-padding: 20; -fx-font-size: 20;");
    stage.setScene(new Scene(layout));
  }

  public static void main(String[] args) { launch(args); }
}
// icon license: (creative commons with attribution) http://creativecommons.org/licenses/by-nc-nd/3.0/
// icon artist attribution page: (eponas-deeway) http://eponas-deeway.deviantart.com/gallery/#/d1s7uih 
```

样本输出：

![示例程序输出](../Images/91acee4a6cf8c6c4e67cb9eb97ff0f47.png)

*2020 年 1 月更新，对多个控件使用相同的加速器*

当前和以前的实现（JavaFX 13 和更早版本）中的加速器的一个警告是，您不能开箱即用地定义相同的加速键组合以用于单个应用程序中的多个菜单或控件。

有关更多信息，请参阅：

*   [JavaFX ContextMenu 加速器从错误的选项卡触发](https://stackoverflow.com/questions/34198022/javafx-contextmenu-accelerator-firing-from-wrong-tab)
*   以及相关的[JDK-8088068 问题报告](https://bugs.openjdk.java.net/browse/JDK-8088068)。

链接的问题报告包括一个解决方法，您可以使用它来允许您在应用程序的多个位置定义和使用相同的加速器（例如，在不同上下文菜单中的两个不同菜单项上）。

请注意，这仅适用于尝试在应用程序中的多个位置使用相同的加速器，如果您不需要尝试这样做，则可以忽略此信息。

# java - 更改要导入的文件中的变量值；自由标记

> ID：12710470
> 
> 赞同：0
> 
> 时间：2012-10-03T14:19:09.827
> 
> 标签：java, import, macros, freemarker

文件`testMacro.txt`

```
<#import "./importMe.txt" as my>

<#assign a=0 >
<@my.macro1 />
${a} 
```

文件`importMe.txt`

```
<#macro macro1 >
${a}
</#macro> 
```

现在从java文件中，当我执行它时它说。

`Exception in thread "main" java.lang.RuntimeException: freemarker.core.InvalidReferenceException: Expression a is undefined on line 3, column 3 in importMe.txt at msjava.hdom.examples.DbQuery.main(DbQuery.java:59) Caused by: freemarker.core.InvalidReferenceException: Expression a is undefined on line 3, column 3 in importMe.txt`

但是，如果我不进行导入而是在文件中定义宏，`testMacro.txt`那么它可以正常工作。

我想要做的是我想`a`在文件`testMacro.txt`中更改文件中的值`importMe.txt`，以便稍后在`testMacro.txt`.

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T15:34:01.503

重要的一点`#import`是它通过给模板提供自己的命名空间来防止模板之间的干扰。所以这就是为什么它不起作用。如果您希望模板共享该变量，请使用全局变量：`<#global a = 0>`而不是`#assign`. 或者，您可以在导入的命名空间中设置变量，例如`<#assign a = 0 in my>`.

# android - 如何在设备启动时显示通知

> ID：12710471
> 
> 赞同：4
> 
> 时间：2012-10-03T14:19:09.453
> 
> 标签：android, service, android-notifications

我正在 android 中开发通知应用程序，它显示我使用日期选择器设置的特定日期和时间的通知。如果我的应用程序在后台运行，它会正确显示。但是当我强制停止我的应用程序或设备关闭并重新启动时，通知不会显示。即使应用程序强制关闭或设备重新启动，如何显示通知。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T14:23:13.807

你不能。通知附加到应用程序的上下文中。如果应用程序被杀死/销毁，您的通知也会随之消失。

您可以做的是在您的应用程序或其服务启动后重新创建这些通知。为此，请确保您确实捕获`android.intent.action.BOOT_COMPLETED`广播以便自动实现这一点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T14:26:06.780

您应该考虑使用[AlarmManager](http://developer.android.com/reference/android/app/AlarmManager.html)而不是服务。使用自定义意图在所需的日期/时间设置警报。在 BroadcastReceiver 中，您创建并显示通知。

如果设备重新启动，您可能还需要监听 BOOT_COMPLETED Intent 并重置警报。

编辑：

一个例子：

```
long time = // time in milliseconds of when you want your Alarm

PendingIntent mIntent = PendingIntent.getBroadcast(context,
                0, new Intent("YOUR_CUSTOM_INTENT"), PendingIntent.FLAG_UPDATE_CURRENT);

AlarmManager am = (AlarmManager)context.getSystemService(Context.ALARM_SERVICE);        
am.set(AlarmManager.RTC_WAKEUP,
                        time, mIntent ); 
```

然后在 BroadcastReceiver 中捕获 YOUR_CUSTOM_INTENT 意图，显示通知并设置以下警报。

# iphone - 仅当用户点击图像视图时，才在 UIScrollView 上显示 UIButton Done for Images

> ID：12710473
> 
> 赞同：2
> 
> 时间：2012-10-03T14:19:16.367
> 
> 标签：iphone, ios6, uigesturerecognizer

我如何为 UIButton 编写代码以仅在用户点击 UIScrollView 以获取图像时显示。

```
 - (void)viewDidLoad

{    
 self.view.backgroundColor = [UIColor blackColor];
  UIScrollView *imageScrollView = [[UIScrollView alloc] initWithFrame:CGRectMake(0, 0, self.view.frame.size.width, self.view.frame.size.height)];
   imageScrollView.pagingEnabled = YES;
NSInteger numberOfViews = 61;
for (int i = 0; i < numberOfViews; i++) {
    CGFloat xOrigin = i * self.view.frame.size.width;

    UIButton *myButton = [UIButton buttonWithType:UIButtonTypeCustom];

    [myButton addTarget:self action:@selector(dismissView:) forControlEvents:UIControlEventTouchUpInside];

    myButton.frame = CGRectMake(xOrigin, 10, 60, 35);

    [myButton.layer setMasksToBounds:YES];

    [myButton.layer setCornerRadius:10.0f];

    myButton.layer.borderWidth = 2;

    myButton.layer.borderColor = [[UIColor whiteColor] CGColor];

    [myButton setTitle:@"Done" forState:UIControlStateNormal];

    myButton.backgroundColor = [UIColor blackColor];

    NSString *imageName = [NSString stringWithFormat:@"image%d.png", i];
    UIImage *image = [UIImage imageNamed:imageName];
    UIImageView *imageView = [[UIImageView alloc] initWithImage:image];
    imageView.frame = CGRectMake(xOrigin, 0, self.view.frame.size.width, self.view.frame.size.height);
    [imageScrollView addSubview:imageView];
    [imageScrollView addSubview:myButton];
    [imageView release];
}
imageScrollView.contentSize = CGSizeMake(self.view.frame.size.width * numberOfViews, self.view.frame.size.height);
[self.view addSubview:imageScrollView];
[imageScrollView release];
} 
```

现在它显示在每个图像视图上，但我希望它只在点击屏幕时才显示 UIButton Done。

编辑：如果我添加

```
 [imageView addGestureRecognizer: tap]; 
```

并启动 Gesturerecognizer

```
 UITapGestureRecognizer *tap = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(handleTap:)];
   tap.numberOfTapsRequired = 1;
  [self addGestureRecognizer:tap];
  [tap release]; 
```

那么当用户点击图像视图时，我如何在句柄点击方法中编码以显示完成按钮

```
 - (void)handleTap:(UIGestureRecognizer*)tap {

   } 
```

感谢帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-03T14:54:42.750

您需要在图像视图上而不是在 ViewController 上添加手势识别器。

此外，您需要为图像视图启用用户交互，如下所示：

```
imageView.userInteractionEnabled = YES; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-03T14:55:26.203

检查`UIScrollViewDelegate`方法，当你滚动显示你的按钮将被显示，然后如果你想隐藏那个按钮，隐藏它。

对于你设置的 handleTap`[imageView addGestureRecognizer:tap];`而不是`[self addGestureRecognizer:tap];`

在其中创建您的按钮`ViewDidLoad`并最初隐藏它以及用户何时点击刚刚设置的图像`

```
button.hidden = NO; 
```

# python - 合并两个列表python

> ID：12710476
> 
> 赞同：3
> 
> 时间：2012-10-03T14:19:28.937
> 
> 标签：python, list

我有两个清单：

```
a = [(1,2,3),(4,5,6)]

b = [7,8] 
```

我想把它合并成：

```
c = [(1,2,3,7),(4,5,6,8)] 
```

我用过`zip(a,b)`，但结果似乎不正确。任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-03T14:26:24.663

`zip()`只会将元组和整数配对。您还需要连接元组和新项目：

```
c = [aa + (bb,) 
     for aa, bb in zip(a, b)] 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-03T14:26:18.560

```
>>> a = [(1,2,3),(4,5,6)]
>>> b = [7,8]
>>> c = zip(*a)+[b] #c looks like [(1,4),(2,5),(3,6),(7,8)]
>>> print zip(*c) #zip it back together
[(1, 2, 3, 7), (4, 5, 6, 8)]
>>> 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-03T14:24:34.350

尝试

```
map ( lambda x: x[0]+(x[1],), zip(a,b)) 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-03T14:29:09.823

还有另一个版本：

```
from itertools import izip
[x+(y,) for x,y in izip(a,b)] 
```

应该是高效的，它以一种可读的方式表达了你真正在做什么。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-10-03T14:31:35.027

还有一个：

```
map(lambda t, e: t + (e,), a, b) 
```

无需压缩和解包；`map`可以同时获取两个列表。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-10-03T14:26:50.013

```
print((a[0]+(b[0],),a[1]+(b[1],))) 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-10-03T14:42:24.477

这对我来说似乎很清楚：

```
[x + (b[i],) for i,x in enumerate(a)] 
```

# sql - 如何为这个多对多表建立 SQL 查询？

> ID：12710479
> 
> 赞同：1
> 
> 时间：2012-10-03T14:19:37.503
> 
> 标签：sql, many-to-many

我正在使用 PHP/MySQL 在这个站点中构建这个易货类型的函数，并且我正在尝试创建一个响应以下字段的查询：所有者的用户名、标题、提供者的用户名、提供者的项目

基本上我在这里有三个表，其中包含以下字段：

**用户**

```
user_id, username, email 
```

**items_available**

```
item_number, owner_id (foreign key that links to user_id), title 
```

**offer_open**

```
trade_id, offerers_id (fk of user_id), offerers_item(fk with item_number), receivers_id (fk from user_id) 
```

我该怎么做呢？我已经看到了一些对多对多 SQL 查询的引用，但它们似乎并不特别适合我正在寻找的内容（例如，offerers_id 和 owner_ids 引用了 Users 表中的不同 users_id，但是如何我让它们在 sql 查询中可区分？）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-03T14:28:43.440

如果我理解正确，这就是您要查找的内容：

```
SELECT owner.username, oferrers.username, ia.title
FROM offers_open o
  INNER JOIN users AS offerers
    ON o.offerers_id = offerers.user_id
  INNER JOIN items_available AS ia
    ON o.offerers_item= ia.item_number
  INNER JOIN users AS owner
    ON ia.owner_id = owner.user_id 
```

我没有在`users`桌子上看到标题，所以没有包括一个。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T14:29:12.133

我不确定您到底想要什么输出，但是由于您的`users`表将在查询中出现两次，因此它们需要像这样别名：

```
SELECT offerer.username AS offerer_username, title, receiver.username AS receiver_username
FROM users AS owner
JOIN items_available ON owner_id = owner.user_id
JOIN offers_open ON offerers_item = item_number
JOIN users AS receiver ON receivers_id 
```

同样，不知道这是否是您想要的，但希望您能理解。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-03T14:29:34.480

听起来您需要用户表的别名。

就像是？

```
select 
  u.*, ia.*, oo.*,u2.*
from
  users as u,
  items_available as ia,
  offers_open as oo,
  users as u2
where
  u.user_id = ia_user_id and
  oo.user_id = u2.user_id and
  oo.item_id = ia.item_id 
```

# java - spring - 直接从 @RequestParams 填充 @ModelAttributes

> ID：12710484
> 
> 赞同：1
> 
> 时间：2012-10-03T14:19:51.850
> 
> 标签：java, spring

我有一个注册视图，可以获取`@RequestParams`并设置表单中的字段。有 2 个字段`name`和`phone`. 如果我将视图称为`/register?name=myname&phone=mynumber`，它会将字段设置为正确的值，但我必须单击“提交”按钮才能提交表单。表单提交动作发生在同一个视图中。我应该怎么做，当我用所有必需的参数调用视图时，它会自动提交并在数据库中创建一个条目？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T14:22:37.900

您面临的问题是，当您请求时`/register?name=myname&phone=mynumber`，参数用于设置字段，但`@ModelAttribute`控制器中的 s 被初始化为空对象。只有当您单击“提交”按钮时，值才会绑定到`@ModelAttribute`s 中的特定字段。然后你（显然在同一个控制器中）处理表单，（可能验证它）并更新你的记录（DB）。

# ios - 带有渐变层的 UIButton 慢

> ID：12710489
> 
> 赞同：0
> 
> 时间：2012-10-03T14:20:21.673
> 
> 标签：ios, ipad, uibutton, calayer, cagradientlayer

我正在使用 GradientLayer 自定义 UIButton。我看到一个性能问题，因为视图加载缓慢并且看起来像一个混蛋效果。改变方向时也一样。我将此代码用于 iPad 应用程序。使用普通 UIButton 可以平滑加载/旋转。

我正在使用在谷歌（GradientButton 类）中找到的示例代码并且工作正常。容器 UIViewController 被推送到导航控制器堆栈以显示屏幕。

这是代码：

```
- (void)awakeFromNib {
    [self initLayers];
}

- (id)initWithFrame:(CGRect)frame {
    if (self = [super initWithFrame:frame]) {
        [self initLayers];
    }
    return self;
}

- (void)initLayers {
    [self initBorder];
    [self addShineLayer];
    [self addHighlightLayer];

    self.clipsToBounds = YES;
}

- (void)initBorder {
    CALayer *layer = self.layer;
    layer.cornerRadius = 8.0f;
    layer.masksToBounds = YES;
    layer.borderWidth = 1.0f;
    layer.borderColor = [UIColor colorWithWhite:0.5f alpha:0.2f].CGColor;
}

- (void)addShineLayer {
    shineLayer = [CAGradientLayer layer];
    shineLayer.frame = self.layer.bounds;
    shineLayer.colors = [NSArray arrayWithObjects:
                         (id)[UIColor colorWithWhite:1.0f alpha:0.4f].CGColor,
                         (id)[UIColor colorWithWhite:1.0f alpha:0.2f].CGColor,
                         (id)[UIColor colorWithWhite:0.75f alpha:0.2f].CGColor,
                         (id)[UIColor colorWithWhite:0.4f alpha:0.2f].CGColor,
                         (id)[UIColor colorWithWhite:1.0f alpha:0.4f].CGColor,
                         nil];
    shineLayer.locations = [NSArray arrayWithObjects:
                            [NSNumber numberWithFloat:0.0f],
                            [NSNumber numberWithFloat:0.5f],
                            [NSNumber numberWithFloat:0.5f],
                            [NSNumber numberWithFloat:0.8f],
                            [NSNumber numberWithFloat:1.0f],
                            nil];
//    shineLayer.shouldRasterize = YES;
//    shineLayer.rasterizationScale = [UIScreen mainScreen].scale;
    [self.layer addSublayer:shineLayer];

}

#pragma mark -
#pragma mark Highlight button while touched

- (void)addHighlightLayer {
    highlightLayer = [CALayer layer];
    highlightLayer.backgroundColor = [UIColor colorWithRed:0.25f green:0.25f blue:0.25f alpha:0.75].CGColor;
    highlightLayer.frame = self.layer.bounds;
    highlightLayer.hidden = YES;
    [self.layer insertSublayer:highlightLayer below:shineLayer];
}

- (void)setHighlighted:(BOOL)highlight {
    highlightLayer.hidden = !highlight;
    [super setHighlighted:highlight];
} 
```

性能问题是由于渐变层吗？请告诉我如何纠正这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T05:06:31.103

尝试一次注释掉代码中的不同属性分配，看看是否能获得任何性能优势。当我在图层上使用 setCornerRadius 时，我曾经开发过一个核心动画大约 12FPS 的应用程序，而当我关闭它时，它几乎是全帧速率。问题可能是您的渐变，但是，除非您只是进行一些 a/b 比较来关闭/打开各种属性，否则您将无法确定。

不过，我现在要告诉你，当我在表格视图单元格中的按钮上使用渐变图层时，当我只为按钮使用背景图像而不是渐变图层时，我能够显着加快表格滚动速度. 您可以尝试打开 shouldRasterize，但是，请确保您在图层树的顶层而不是在任何子图层上执行此操作（尽管我在所有图层上设置该参数时看到的问题可能已在 iOS6 中修复。我只是没有测试过）。

# java - Java：如何在哈希图中获取具有相同值的键集

> ID：12710494
> 
> 赞同：16
> 
> 时间：2012-10-03T14:20:38.313
> 
> 标签：java, hashmap

我有一个如下的哈希图：

1->x

2->y

3->x

4->z

现在我想知道所有值为 x 的键（ans: [1,3] ）。最好的方法是什么？

蛮力方法是遍历 map 并将所有键存储在值为 x 的数组中。

有什么有效的方法可以解决这个问题。

谢谢

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-10-03T14:24:09.700

hashmap 是一种结构，它针对使用键的值的关联访问进行了优化，但在逆向操作方面绝不比数组更好。我不认为你可以做得更好然后只是迭代。提高效率的唯一方法是如果您也有一个反向哈希映射（即哈希映射，您持有一个指向所有值的给定值的键数组）。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-10-03T14:35:19.473

您可以使用 a[`MultiMap`](http://code.google.com/p/guava-libraries/wiki/CollectionUtilitiesExplained#Multimaps)轻松获取所有这些重复值。

```
Map<Integer, String> map = new HashMap<Integer, String>();
map.put(1, "x");
map.put(2, "y");
map.put(2, "z");
map.put(3, "x");
map.put(4, "y");
map.put(5, "z");
map.put(6, "x");
map.put(7, "y");

System.out.println("Original map: " + map);

Multimap<String, Integer> multiMap = HashMultimap.create();
for (Entry<Integer, String> entry : map.entrySet()) {
  multiMap.put(entry.getValue(), entry.getKey());
}
System.out.println();

for (Entry<String, Collection<Integer>> entry : multiMap.asMap().entrySet()) {
  System.out.println("Original value: " + entry.getKey() + " was mapped to keys: "
      + entry.getValue());
} 
```

打印出来：

```
Original map: {1=x, 2=z, 3=x, 4=y, 5=z, 6=x, 7=y}

Original value: z was mapped to keys: [2, 5]
Original value: y was mapped to keys: [4, 7]
Original value: x was mapped to keys: [1, 3, 6] 
```

根据@ **noahz**的建议，`forMap`行`invertFrom`数更少，但可以说阅读起来更复杂：

```
HashMultimap<String, Integer> multiMap =
    Multimaps.invertFrom(Multimaps.forMap(map), 
        HashMultimap.<String, Integer> create()); 
```

代替：

```
Multimap<String, Integer> multiMap = HashMultimap.create();
for (Entry<Integer, String> entry : map.entrySet()) {
  multiMap.put(entry.getValue(), entry.getKey());
} 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2016-03-26T01:23:29.660

如果 Java 8 是一个选项，您可以尝试流式方法：

```
Map<Integer, String> map = new HashMap<>();
map.put(1, "x");
map.put(2, "y");
map.put(3, "x");
map.put(4, "z");

Map<String, ArrayList<Integer>> reverseMap = new HashMap<>(
    map.entrySet().stream()
        .collect(Collectors.groupingBy(Map.Entry::getValue)).values().stream()
        .collect(Collectors.toMap(
                item -> item.get(0).getValue(),
                item -> new ArrayList<>(
                    item.stream()
                        .map(Map.Entry::getKey)
                        .collect(Collectors.toList())
                ))
        ));

System.out.println(reverseMap); 
```

结果是：

```
{x=[1, 3], y=[2], z=[4]} 
```

如果首选 Java 7：

```
Map<String, ArrayList<Integer>> reverseMap = new HashMap<>();

for (Map.Entry<Integer,String> entry : map.entrySet()) {
    if (!reverseMap.containsKey(entry.getValue())) {
        reverseMap.put(entry.getValue(), new ArrayList<>());
    }
    ArrayList<Integer> keys = reverseMap.get(entry.getValue());
    keys.add(entry.getKey());
    reverseMap.put(entry.getValue(), keys);
} 
```

有趣的是，在执行 (index,random('a'-'z') 对的大型映射时，我尝试了每种算法所需的时间。

```
 10,000,000        20,000,000
Java 7:         615 ms            11624 ms         
Java 8:        1579 ms             2176 ms 
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2012-10-03T14:26:56.190

如果您愿意使用图书馆，请使用[Google Guava 的 Multimaps 实用程序](http://code.google.com/p/guava-libraries/wiki/CollectionUtilitiesExplained#Multimaps)，特别是`forMap()`与`invertFrom()`

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2012-10-03T14:24:31.417

是的，只是蛮力。您还可以通过从 Value -> Collection of Key 存储 Multimap 来加快速度，但代价是内存和运行时更新成本。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2012-10-03T14:24:42.820

`HashMap`计算`hashcode()`键的，而不是值的。除非您存储某种附加信息，或考虑使用不同的数据结构，否则我认为获得此信息的唯一方法是蛮力。

如果您需要对值执行有效的操作，您应该考虑是否使用了适当的数据结构。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2012-10-03T14:35:54.000

如果您已经有地图，您应该考虑使用[Google 的 Guava](http://docs.guava-libraries.googlecode.com/git-history/release/javadoc/com/google/common/collect/Maps.html)库来过滤您感兴趣的条目。您可以按照以下方式进行操作：

```
final Map<Integer, Character> filtered = Maps.filterValues(unfiltered, new Predicate<Character>() {
    @Override
    public boolean apply(Character ch) {
        return ch == 'x';
    }
}); 
```

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2012-10-03T14:24:38.347

如果您使用的是哈希图，则没有有效的方法可以做到这一点，而是迭代值

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2016-11-16T10:40:42.600

我同意 George Campbell 的观点，但对于 java 8，我会更容易一些：

```
Map<String, List<Integer>> reverseMap = map.entrySet()
    .stream()
    .collect(Collectors.groupingBy(Map.Entry::getValue,
        Collectors.mapping(
            Map.Entry::getKey,
            Collectors.toList()))); 
```

* * *

## 回答 #10

> 赞同：-1
> 
> 时间：2016-06-13T12:54:47.750

尝试这个.....

```
public static void main(String[] args) {
        HashMap<String, String> hashMap = new HashMap<String, String>();
        hashMap.put("cust_tenure", "3_sigma");
        hashMap.put("cust_age", "3_sigma");
        hashMap.put("cust_amb_6m_sav", "3_sigma");
        hashMap.put("cust_amb_6m_chq", "3_sigma");
        hashMap.put("cust_total_prod_6m", "3_sigma");

        HashMap<String, ArrayList<String>> result = new LinkedHashMap<String, ArrayList<String>>();

        for (String key : hashMap.keySet()) {
            ArrayList<String> colName = null;
            if (!result.containsKey(hashMap.get(key))) {
                colName = new ArrayList<String>();
                colName.add(key);
                result.put(hashMap.get(key), colName);
            } else {
                colName = result.get(hashMap.get(key));
                colName.add(key);
                result.put(hashMap.get(key), colName);
            }

            System.out.println(key + "\t" + hashMap.get(key));
        }

        for (String key : result.keySet()) {
            System.out.println(key + "\t" + result.get(key));
        }

        System.out.println(hashMap.size());

    } 
```

# c# - 保存只读 Word 文档会在 VSTO 中引发 COMException

> ID：12710495
> 
> 赞同：0
> 
> 时间：2012-10-03T14:20:46.837
> 
> 标签：c#, ms-word, vsto, add-in, comexception

在我的 Word 加载项中打开 Word 文档时，我会验证该文档。验证需要保存文档，所以我调用 save 方法：

```
Microsoft.Office.Tools.Word.Document.Save() 
```

如果文档是只读的（我的用例是从 Outlook 打开附加的文档），则另存为对话框打开。如果我保存文档或点击取消，两种情况都会引发 COMException，并显示消息“此文件是只读的。（文件名。）”。

通常，会为 Cancel 引发用户取消 COMException，如果文件保存正确，我希望不会引发异常。这是一个错误还是我需要以不同的方式处理文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T10:51:38.973

您可以做两件事来避免所描述的行为（至少对我很有用）。首先，您应该为其使用另存为功能：document.SaveAs("/MyDocuments/example.doc")。您还可以“强制”应用程序在没有任何对话框的情况下保存文档，您可以通过使用 Document.Application.DiplayAlerts = False 来实现。然后，您只需在保存后启用警报。

希望这会对您有所帮助。

# mysql - Mysql不处理特殊字符

> ID：12710497
> 
> 赞同：1
> 
> 时间：2012-10-03T14:20:50.437
> 
> 标签：mysql, special-characters

当插入字符串“Up to HM77 based models - Intel® Core™ i5”时，mysql 给出错误“Incorrect string value: '\xE2\x88\x92 In...' for column 'spec_1'”。

我知道这与从 MS-Office 复制的字符有关。

我从中得到了一些想法，[但](http://www.toao.net/48-replacing-smart-quotes-and-em-dashes-in-mysql)仍然不知道为什么会这样。解决此问题的最佳方法是什么？

编辑以根据请求添加 sqlfiddle -

您可以在 sqlfiddle.com 中尝试以下查询以了解错误的想法

```
CREATE TABLE product_content ( spec_1 varchar(1000) DEFAULT NULL ) ENGINE=InnoDB AUTO_INCREMENT=1752 DEFAULT CHARSET=latin1; insert into product_content (spec_1) values('Up to HM77 based models − Intel® Core™ i5') 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T11:24:23.403

将字符集更改为 UTF-8 并解决了问题。

它显示的行大小太大，因为我有很多列作为 varchar(1000)。我将这些列更改为 TEXT/BLOB 并解决了问题。

如果您遇到此问题，那么：

1) 将表的编码更改为 UTF-8 2) 如果在更改编码时显示“行大小太大”，请检查是否有很多 varchar 列。3) 将这些 varchar 列更改为 text/blob

# mysql - 与日期和时间作斗争

> ID：12710498
> 
> 赞同：0
> 
> 时间：2012-10-03T14:20:52.073
> 
> 标签：mysql, vb.net, date, datetime, time

我已经与日期时间值斗争了几个小时。我现在的日期值工作正常，但时间仍然给我带来麻烦。考虑以下：

```
Private _pickupDate As DateTime

Public Property PickupDate As DateTime
    Get
        Return _pickupDate
    End Get
    Set(ByVal value As DateTime)
        _pickupDate = value
        txtPickupDate.Text = value.ToString("yyyy/MM/dd")
    End Set
End Property

Public Property PickupTime As DateTime
    Get
        Return DateTime.Parse(ucPickupTime.Time)
    End Get
    Set(value As DateTime)
        ucPickupTime.Time = value.ToString("HH:mm:ss")
    End Set
End Property 
```

**请注意：** ucPickupTime 是一个用户控件，由 3 个下拉列表（小时、分钟和秒）组成。它的`Time`属性是一个总是看​​起来像的字符串`HH:mm:ss`

假设我正在`2012-10-26 16:00:00`从 mysql 读取日期时间值。

写入数据库时​​，一切正常，但是，当我读取日期时间的时间部分时，我将返回 ucPickupTime.Time 中出现的 04:00:00（而不是 16:00:00）。此外，当我将其读入网格视图时，它显示为 2012/10/26 04:00:00 PM

显然这是不可接受的，因为凌晨 4 点和下午 4 点之间存在很大差异

我已经尝试了很多方法来纠正这个问题，但就是找不到合适的方法，而且我的想法已经不多了。

如果有人可以为我建议一种方法来保持真实的时间值（就像它在数据库中一样）并将其置于我的控制之下（或者至少按照我想要的方式对其进行格式化），我将非常感激。

提前致谢！

** 编辑 **
我已经更新了上面的代码以反映最新的变化。这现在可以正确格式化数据，但是当更新或将记录插入数据库时​​，值如下所示：

> 取件日期 | #12:00:00 AM# | 日期
> 取件时间 | #10/4/2012 下午 3:00:00# | 日期

我注意到仔细观察数据是使用的日期值似乎总是保存数据的日期，而不是 txtPickupDate.Text 中指定的日期

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T14:47:43.427

txtPickupDate.Text = value.ToString("HH:mm:ss")

# r - 使用宏变量循环遍历向量元素

> ID：12710506
> 
> 赞同：0
> 
> 时间：2012-10-03T14:21:07.277
> 
> 标签：r, for-loop, macros

假设用户设置`dim`(1, ...., n)，然后设置一个或多个 x_i 变量值，其中 i = 1,..., n。

经过更多计算后，我需要自动返回以下形式的`dim`维向量`vec`：(0, 0, 0.2, 0, 0, ..., 0.3)，在这种特定情况下，用户已设置：

```
dim <- 10
x_3 <- 0.2
x_10 <- 0.3 
```

当然是立即执行：

```
vec <- rep(0, dim)
vec[3] <- x_3
vec[10] <- x_10 
```

但是，由于我想使尽可能多的操作自动化，我问你如何将 x_i 变量与 的“相应”元素链接在一起`vec`，考虑到先验不知道将设置哪些/多少变量不同于0。

在其他语言中，这可以使用带有宏变量的 for 循环来完成......语法是错误的，但想法是这样的：

```
vec <- rep(0, dim)

for (i in 1:dim) {
  if (as.integer(exists(x_i))==1) {
    vec[i] <- x_i
 } 
} 
```

你有什么建议？谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-03T14:29:52.903

```
sapply(paste("x_",seq(dim),sep=""),function(x) if(exists(x)) get(x) else 0)
 x_1  x_2  x_3  x_4  x_5  x_6  x_7  x_8  x_9 x_10 
 0.0  0.0  0.2  0.0  0.0  0.0  0.0  0.0  0.0  0.3 
```

# php - 如何根据性别和计数翻译PHP中的字符串？

> ID：12710507
> 
> 赞同：2
> 
> 时间：2012-10-03T14:21:08.927
> 
> 标签：php, preg-replace, multilingual

我正在使用集中式语言系统开发多语言应用程序。它基于每种语言的语言文件和一个简单的辅助函数：

en.php

```
$lang['access_denied'] = "Access denied.";
$lang['action-required'] = "You need to choose an action.";
...
return $lang; 
```

language_helper.php

```
...
function __($line) {
  return $lang[$line];
} 
```

到目前为止，所有字符串都是发送给当前用户的系统消息，因此我总是可以这样做。现在，我需要创建其他消息，其中字符串应取决于动态值。例如，在模板文件中，我想回显操作点的数量。如果用户只有 1 分，它应该回显“你有 1 分。”；但是对于零分或超过 1 分，它应该是“你有 12 分”。

出于替换目的（字符串和数字），我创建了一个新函数

```
function __s($line, $subs = array()) {
  $text = $lang[$line];
  while (count($subs) > 0) {
    $text = preg_replace('/%s/', array_shift($subs), $text, 1);
  }
  return $text;
} 
```

调用函数看起来像`__s('current_points', array($points))`.

`$lang['current_points']`在这种情况下是`"You have %s point(s)."`，效果很好。

更进一步，我想摆脱“（s）”部分。所以我创建了另一个函数

```
function __c($line, $subs = array()) {
  $text = $lang[$line];
  $text = (isset($sub[0] && $sub[0] == 1) ? $text[0] : $text[1];
  while (count($subs) > 0) {
    $text = preg_replace('/%d/', array_shift($subs), $text, 1);
  }
  return $text;
} 
```

调用函数看起来仍然像`__s('current_points', array($points))`.

`$lang['current_points']`现在是`array("You have %d point.","You have %d points.")`。

我现在如何结合这两个功能。例如，如果我想打印用户名和分数（比如排名）。函数调用类似于being `__x('current_points', array($username,$points))`。`$lang['current_points']``array("$s has %d point.","%s has %d points.")`

我尝试使用`preg_replace_callback()`，但无法将替代值传递给该回调函数。

```
$text = preg_replace_callback('/%([sd])/', 
  create_function(
    '$type',
    'switch($type) {
      case "s": return array_shift($subs); break;
      case "d": return array_shift($subs); break;
    }'),
  $text); 
```

显然，$subs 没有定义，因为我收到“内存不足”错误，就好像函数没有离开 while 循环一样。

谁能指出我正确的方向？可能有一种完全不同（更好）的方法来解决这个问题。另外，我仍然想像这样扩展它：

`$lang['invite_party'] = "%u invited you to $g party.";`应该成为`Adam invited you to his party."`男性和`"Betty invited you to her party."`女性。两者的传递`$subs`值`$u`和`$g`将是一个用户对象。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-03T15:09:12.847

正如评论所提到的，我猜[gettext()](http://php.net/gettext)是另一种选择

但是，如果您需要其他方法，这里有一个解决方法

```
class ll
{
    private $lang = array(),
            $langFuncs = array(),
            $langFlags = array();

    function __construct()
    {
        $this->lang['access'] = 'Access denied';
        $this->lang['points'] = 'You have %s point{{s|}}';
        $this->lang['party'] = 'A %s invited you to {{his|her}} parteh !';
        $this->lang['toto'] = 'This glass seems %s, {{no one drank in already|someone came here !}}';

        $this->langFuncs['count'] = function($in) { return ($in>1)?true:false; };
        $this->langFuncs['gender'] = function($in) { return (strtolower($in)=='male')?true:false; };
        $this->langFuncs['emptfull'] = function($in) { return ($in=='empty')?true:false; };

        $this->langFlags['points'] = 'count';
        $this->langFlags['toto'] = 'emptfull';
        $this->langFlags['party'] = 'gender';
    }

    public function __($type,$param=null)
    {
        if (isset($this->langFlags[$type])) {
            $f = $this->lang[$type];
            preg_match("/{{(.*?)}}/",$f,$m);

            list ($ifTrue,$ifFalse) = explode("|",$m[1]);

            if($this->langFuncs[$this->langFlags[$type]]($param)) {
                return $this->__s(preg_replace("/{{(.*?)}}/",$ifTrue,$this->lang[$type]),$param);
            } else {
                return $this->__s(preg_replace("/{{(.*?)}}/",$ifFalse,$this->lang[$type]),$param);
            }
        } else {
            return $this->__s($this->lang[$type],$param);
        }
    }
    private function __s($s,$i=null)
    {
        return str_replace("%s",$i,$s);
    }
}

$ll = new ll();

echo "Call : access - NULL\n";
echo $ll->__('access'),"\n\n";
echo "Call : points - 1\n";
echo $ll->__('points',1),"\n\n";
echo "Call : points - 175\n";
echo $ll->__('points',175),"\n\n";
echo "Call : party - Male\n";
echo $ll->__('party','Male'),"\n\n";
echo "Call : party - Female\n";
echo $ll->__('party','Female'),"\n\n";
echo "Call : toto - empty\n";
echo $ll->__('toto','empty'),"\n\n";
echo "Call : toto - full\n";
echo $ll->__('toto','full'); 
```

这输出

```
Call : access - NULL
Access denied

Call : points - 1
You have 1 point

Call : points - 175
You have 175 points

Call : party - Male
A Male invited you to his parteh !

Call : party - Female
A Female invited you to her parteh !

Call : toto - empty
This glass seems empty, no one drank in already

Call : toto - full
This glass seems full, someone came here ! 
```

这可能会让您了解如何集中您的语言可能性，创建自己的函数来解析一个或另一个文本。

希望这对您有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T14:44:31.133

如果前一段时间做过这样的事情，但通过分离关注点避免了所有的陷阱。

在较低级别上，我在模板中注入了一个格式化程序，它负责处理特定于语言的所有内容。例如格式化数字或日期。它有一个带有三个参数的函数“plural”：$value、$singular、$plural，并根据返回的值返回后两者之一。它没有回显值本身，因为这是留给数字格式的。

整个翻译是在模板引擎中完成的。是Dwoo，它可以做模板继承，所以我设置了一个主模板，里面有所有的HTML结构，还有很多占位符。每种语言都继承了这个 HTML 母版，并用正确的语言输出替换了所有占位符。但是因为我们仍然处于模板引擎领域，所以可以“翻译”格式化程序函数的使用。Dwoo 将在第一次调用时编译模板继承，包括对格式化程序的所有后续调用，包括所有已翻译的参数。

性别问题将得到基本相同的解决方案：gender($sex, $male, $female)，其中 $sex 是主题的性别，其他参数是男性或女性的措辞。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-03T14:56:07.063

也许更好的方法是函数 t 在 Drupal 中使用的方法，看看：

[http://api.drupal.org/api/drupal/includes!bootstrap.inc/function/t/7](http://api.drupal.org/api/drupal/includes!bootstrap.inc/function/t/7)

[http://api.drupal.org/api/drupal/includes!bootstrap.inc/function/format_string/7](http://api.drupal.org/api/drupal/includes!bootstrap.inc/function/format_string/7)

# javascript - javascript window.print CSS @media 不工作

> ID：12710508
> 
> 赞同：0
> 
> 时间：2012-10-03T14:21:14.813
> 
> 标签：javascript, css

当用户单击打印按钮时，我有这个 JS 功能。

```
<script>
function printDiv()
{
  var printer = window.open('','','width=300,height=300');
    printer.document.open("text/html");
    printer.document.write(document.getElementById('news_contents').innerHTML);

    printer.print();

}
</script> 
```

我将 CSS 包括在内

```
@media print {

  #news_content { 
     color: #666;
        font-size: 12px;
    font-family: Arial,Helvetica,sans-serif;
  }
} 
```

但是，当用户打印时，CSS 不适用。我检查了 HTML 标头，确实有 CSS 脚本。为什么它不起作用？当用户从 Mac 打印时，内容区域中的图像会缩小并变小。无论如何，我可以拥有与网站完全相同的内容吗？

提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-02T20:23:36.850

我有同样的问题，我所做的是：

```
<style>
   @media print
   { 
     /..../
   }
</style> 
```

在里面`DIV`- 我相信它是`news_contents`在你的情况下。
希望有帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-03T20:22:00.490

我相信您遇到了问题，因为您的`@media`声明位于父窗口中；并且您正在打开一个新窗口并将内容附加到它以进行打印。

`@media`因此，新窗口中的新文档对您的CSS 声明一无所知。

# php - Symfony 路由正则表达式：如何编写可选字符？

> ID：12710509
> 
> 赞同：4
> 
> 时间：2012-10-03T14:21:20.970
> 
> 标签：php, regex, symfony

我只是对路由配置中的 symfony 正则表达式模式有点麻烦。

我想同时匹配`/keyword`和`/keyword/`URL。`/`字符是可选的。
这是我的模式：

```
pattern:  /{keyword}/? 
```

`/keyword/`匹配模式，而不匹配`/keyword`。

我应该如何写模式？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-04T06:25:50.890

如果添加尾部斜杠，则它是可选的——用户将从不带斜杠的路径重定向到带有斜杠的路径。因此，该`/{keyword}/`模式适用于`/{keyword}`和`/{keyword}/`。

然而，如果你定义它时不带斜杠`/{keyword}`——它只会起作用`/{keyword}`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T14:38:01.503

我认为您不能在路线中使用 RegEx 模式。`keyword`可能需要具有特定的 RegEx 模式，但这是另一回事。

如果您使用的是 YML，那么我认为最好的做法是拥有两条不同的路线：

```
route1:
    pattern: /{keyword}
    ...

route2:
    pattern: /{keyword}/
    ... 
```

如果您使用注释，您可以将它们都放在控制器操作的顶部：

```
/**
* @Route("/{keyword}");
* @Route("/{keyword}/");
*/ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-03T14:38:20.130

在您的功能所在的控制器中使用注释：

```
/**
 * Function
 * 
 * 
 * @Route("your/route/{keyword}")
 * @Route("your/route/{keyword}/")
 */ 
```

您将能够使用这两条路线访问此功能。

# android - 通过monkeyrunner脚本在android上使用dd创建虚拟文件

> ID：12710512
> 
> 赞同：1
> 
> 时间：2012-10-03T14:21:23.757
> 
> 标签：android, monkeyrunner

我正在编写一个脚本来自动化测试：填充 Android 设备的内部存储器。该脚本是用 python 编写的，我正在使用 monkeyrunner 连接到设备并发出命令。
我需要创建虚拟文件来执行此操作。如果我使用这个命令：

```
subprocess.call('adb shell dd if=/dev/zero of=/storage/sdcard0/dummy/dummy_file bs=1000000000 count=1', shell = True) 
```

有用。虚拟文件已创建。但我想使用以下内容：

```
device.shell('dd if=/dev/zero of=/storage/sdcard0/dummy/dummy_file bs=1000000000 count=1') 
```

哪个应该做同样的事情。但后者不起作用并生成：

```
Importing modules
Waiting for connection
121003 16:54:32.383:S [MainThread] [com.android.chimpchat.adb.AdbChimpDevice] Error executing command: dd if=/dev/zero of=/storage/sdcard0/dummy/dummy2 bs=1000000000 count=1
121003 16:54:32.383:S [MainThread] [com.android.chimpchat.adb.AdbChimpDevice]com.android.ddmlib.ShellCommandUnresponsiveException
121003 16:54:32.383:S [MainThread] [com.android.chimpchat.adb.AdbChimpDevice]   at com.android.ddmlib.AdbHelper.executeRemoteCommand(AdbHelper.java:408)
121003 16:54:32.383:S [MainThread] [com.android.chimpchat.adb.AdbChimpDevice]   at com.android.ddmlib.Device.executeShellCommand(Device.java:453)
121003 16:54:32.383:S [MainThread] [com.android.chimpchat.adb.AdbChimpDevice]   at com.android.chimpchat.adb.AdbChimpDevice.shell(AdbChimpDevice.java:269)
121003 16:54:32.383:S [MainThread] [com.android.chimpchat.adb.AdbChimpDevice]   at com.android.monkeyrunner.MonkeyDevice.shell(MonkeyDevice.java:217)
121003 16:54:32.383:S [MainThread] [com.android.chimpchat.adb.AdbChimpDevice]   at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
121003 16:54:32.383:S [MainThread] [com.android.chimpchat.adb.AdbChimpDevice]   at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
121003 16:54:32.383:S [MainThread] [com.android.chimpchat.adb.AdbChimpDevice]   at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
121003 16:54:32.383:S [MainThread] [com.android.chimpchat.adb.AdbChimpDevice]   at java.lang.reflect.Method.invoke(Method.java:597)
121003 16:54:32.383:S [MainThread] [com.android.chimpchat.adb.AdbChimpDevice]   at org.python.core.PyReflectedFunction.__call__(PyReflectedFunction.java:175)
121003 16:54:32.383:S [MainThread] [com.android.chimpchat.adb.AdbChimpDevice]   at org.python.core.PyObject.__call__(PyObject.java:355)
121003 16:54:32.383:S [MainThread] [com.android.chimpchat.adb.AdbChimpDevice]   at org.python.core.PyMethod.__call__(PyMethod.java:215)
121003 16:54:32.383:S [MainThread] [com.android.chimpchat.adb.AdbChimpDevice]   at org.python.core.PyMethod.instancemethod___call__(PyMethod.java:221)
121003 16:54:32.383:S [MainThread] [com.android.chimpchat.adb.AdbChimpDevice]   at org.python.core.PyMethod.__call__(PyMethod.java:206)
121003 16:54:32.383:S [MainThread] [com.android.chimpchat.adb.AdbChimpDevice]   at org.python.core.PyObject.__call__(PyObject.java:397)
121003 16:54:32.383:S [MainThread] [com.android.chimpchat.adb.AdbChimpDevice]   at org.python.core.PyObject.__call__(PyObject.java:401)
121003 16:54:32.383:S [MainThread] [com.android.chimpchat.adb.AdbChimpDevice]   at org.python.pycode._pyx0.f$0(/home/gabriel/android/git/androidqa/prebuilt/monkeyrunner/InternalStorage/int_storage_fill.py:57)
121003 16:54:32.383:S [MainThread] [com.android.chimpchat.adb.AdbChimpDevice]   at org.python.pycode._pyx0.call_function(/home/gabriel/android/git/androidqa/prebuilt/monkeyrunner/InternalStorage/int_storage_fill.py)
121003 16:54:32.383:S [MainThread] [com.android.chimpchat.adb.AdbChimpDevice]   at org.python.core.PyTableCode.call(PyTableCode.java:165)
121003 16:54:32.383:S [MainThread] [com.android.chimpchat.adb.AdbChimpDevice]   at org.python.core.PyCode.call(PyCode.java:18)
121003 16:54:32.383:S [MainThread] [com.android.chimpchat.adb.AdbChimpDevice]   at org.python.core.Py.runCode(Py.java:1197)
121003 16:54:32.383:S [MainThread] [com.android.chimpchat.adb.AdbChimpDevice]   at org.python.core.__builtin__.execfile_flags(__builtin__.java:538)
121003 16:54:32.383:S [MainThread] [com.android.chimpchat.adb.AdbChimpDevice]   at org.python.util.PythonInterpreter.execfile(PythonInterpreter.java:156)
121003 16:54:32.383:S [MainThread] [com.android.chimpchat.adb.AdbChimpDevice]   at com.android.monkeyrunner.ScriptRunner.run(ScriptRunner.java:116)
121003 16:54:32.383:S [MainThread] [com.android.chimpchat.adb.AdbChimpDevice]   at com.android.monkeyrunner.MonkeyRunnerStarter.run(MonkeyRunnerStarter.java:77)
121003 16:54:32.383:S [MainThread] [com.android.chimpchat.adb.AdbChimpDevice]   at com.android.monkeyrunner.MonkeyRunnerStarter.main(MonkeyRunnerStarter.java:189) 
```

有谁知道为什么会发生这个错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T14:58:24.670

`AdbChimpDevice``TimeoutException`如果 shell 命令未在一定时间内完成并且您的`dd`命令超出此限制，则生成一个。你应该坚持`subprocess`替代方案。

默认超时为 5 秒。

# android - 如何检测动作模式是否已经存在

> ID：12710513
> 
> 赞同：9
> 
> 时间：2012-10-03T14:21:30.060
> 
> 标签：android, android-actionbar, dismiss

我在一个视图中有几个小部件，每个小部件都需要自己的 ActionMode。我看到当用户在操作栏外点击时，ActionMode 不会自动关闭。因此，用户很容易为一个控件启动一个 ActionMode，然后点击（在我的情况下长按）另一个控件并在第一个控件的顶部堆叠第二个 ActionBar。这会导致编程逻辑混乱。

我可以使用活动级别的成员变量来跟踪当前的 ActionMode，如果需要新的成员变量，我可以关闭当前的。但是，这使我的代码阅读和维护变得混乱。此外，当用户点击操作栏外的任何内容时，我更愿意立即关闭它。

关于处理这个问题的好方法有什么建议吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-03T14:29:26.297

前段时间我一直在寻找这个问题的解决方案，据我所知，如果不将当前动作模式状态保存在全局变量中，您将无法跟踪它。但是，我认为一个具有正确名称的变量不会使您的代码混乱。

# java - 线程“AWT-EventQueue-0”中的异常 java.lang.NoSuchMethodError

> ID：12710518
> 
> 赞同：2
> 
> 时间：2012-10-03T14:21:55.707
> 
> 标签：java, c, java-native-interface

我尝试`jMethodID`在 java 代码中获取该方法，但是当我调用这个特定函数时，会引发异常：

```
Exception in thread "AWT-EventQueue-0" java.lang.NoSuchMethodError: displayKeyStrokes
at org.suhail.keylogger.HelperClasses.NativeMethods.initializeJNIVars(Native Method)
at org.suhail.keylogger.GUI.MainGUI.jMenuItem1ActionPerformed(MainGUI.java:356)
.
.
. 
```

我不明白这是为什么。以下是从 java 方法调用的*C代码片段：*

```
void Java_org_suhail_keylogger_HelperClasses_NativeMethods_initializeJNIVars
(JNIEnv *env, jobject obj) {
 jclass cls = (*env)->GetObjectClass(env,obj);
 callBackToDeliverKeyStroke = (*env)->GetMethodID(env,cls,"displayKeyStrokes","()V");
 object = (*env)->NewGlobalRef(env,obj);
 if(object == NULL | callBackToDeliverKeyStroke == NULL | cls == NULL) {
    printf("Initialization error...One of the variable is Null\n");
 }
} 
```

这是`displayKeyStrokes`java代码中命名的方法：

```
 public void displayKeyStrokes() {
    System.out.println("Java Message : A Key has been pressed");
} 
```

我遇到异常的原因可能是什么？

## 编辑 ：

调用 JNI 代码的 Java 代码：

```
 private void jMenuItem1ActionPerformed(java.awt.event.ActionEvent evt) {                                           
    jMenuItem1.setEnabled(false);
    jMenuItem2.setEnabled(true);
    try {
       System.loadLibrary("Dll_PKeylogger"); // Load the dll written to listen to the tapping of keys
       nativeMethods.initializeJNIVars(); // CALL
    }catch(Exception exc) {
        exc.printStackTrace();
    }
} 
```

*NativeMethods 类*（声明本机方法）

```
package org.suhail.keylogger.HelperClasses;

public class NativeMethods {

 public native void initializeJNIVars();
 public native void unregisterHook(); 

} 
```

***注意：***我在`initializeJNIVars`另一个名为的类的对象上`NativeMethods`并且`jMenuItem1ActionPerformed`每当事件发生时从匿名内部类调用该方法：

```
 jMenuItem1.addActionListener(new java.awt.event.ActionListener() {
        public void actionPerformed(java.awt.event.ActionEvent evt) {
            jMenuItem1ActionPerformed(evt);
        }
    }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T14:57:51.580

你说：

> jMenuItem1ActionPerformed 是从与 displayKeyStrokes 位于同一类内的匿名类调用的。是的，jMenuItem1ActionPerformed 与 jMenuItem1ActionPerformed 属于同一类，只是它是从匿名内部类调用的，如下所示

那很可能是你的问题。位于匿名内部类中的 jMenuItem1ActionPerformed 很重要，这意味着它与 jMenuItem1ActionPerformed 位于不同的类中，当您尝试从 JNI C 代码中获取方法 ID 时需要考虑这一点。

考虑为您的`initializeJNIVars()`方法提供一个参数，该参数采用外部类的实例，然后将该实例传递给参数并在调用时使用它`GetMethodID(...)`。请注意，您必须将参数作为`OuterClassName.this`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T14:35:50.893

您得到的异常的描述是：

> 如果应用程序尝试调用类的指定方法（静态或实例），并且该类不再具有该方法的定义，则抛出该异常。
> 
> 通常，这个错误会被编译器捕获；如果类的定义发生了不兼容的更改，则此错误只会在运行时发生。

你的代码线程是分开的吗？当您尝试调用此方法时，是否有可能由已经死的线程加载 displayKeyStrokes 方法？

# java - 如何将我的 rtmp url 发布到 red5？

> ID：12710520
> 
> 赞同：0
> 
> 时间：2012-10-03T14:21:56.363
> 
> 标签：java, red5, xuggle

我正在尝试使用 xuggle 和 red5 在浏览器中生成流式视频。作为第一步，我只是尝试通过 xuggle 运行视频并将其显示在我的 red5 服务器上。问题是我不知道如何配置 red5 来连接我的 java 代码。我在这里有这段代码：

```
private static String outputUrl = "rtmp://localhost:5080/oflaDemo/";
private static String inputFilename = "/home/usr/jworkspace1/GetContainerInfo/aaa.ogg";

public static void main(String[] args) 
{
  IMediaReader mediaReader = ToolFactory.makeReader(inputFilename);

  // create a media writer
  IMediaWriter mediaWriter = ToolFactory.makeWriter(outputUrl, mediaReader);

  // add a writer to the reader, to create the output file
  mediaReader.addListener(mediaWriter);

  // create a media viewer with stats enabled
  IMediaViewer mediaViewer = ToolFactory.makeViewer(true);

  // add a viewer to the reader, to see the decoded media
  mediaReader.addListener(mediaViewer);

  // read and decode packets from the source file and
  // and dispatch decoded audio and video to the writer
  while (mediaReader.readPacket() == null)
  {
    ;
  }    
} 
```

这给了我一个错误，上面写着：

```
java.lang.IllegalArgumentException: could not open: rtmp://localhost:5080/oflaDemo/ 
```

我的问题是如何打开 red5 以从我的 java 程序接收 rtmp？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T22:41:52.423

我认为端口 5080 是 http 端口。

> ## 端口
> 
> 默认情况下，Red5 开放以下端口：
> 
> *   5080（HTTP 端口 - 嵌入式 Tomcat）
> *   1935（RTMP 端口）
> *   8443（RTMPS 端口）
> *   9980（JMX 端口 - 管理和关闭）

您应该使用端口 1935 进行 rtmp

# javascript - 在Javascript中对节点列表上的每个项目执行一个函数

> ID：12710522
> 
> 赞同：1
> 
> 时间：2012-10-03T14:22:02.170
> 
> 标签：javascript

我想在我的页面中`<img>`为每个`<td>`带有特定 CSS 类的标签添加一个。我使用“querySelectorAll”来查找它们，如下所示：

```
var painted = document.querySelectorAll('.painted'); 
```

现在我想为它们中的每一个添加一个具有唯一 ID 的特定图像。我假设我需要以某种方式遍历列表并编辑每个元素的 innerHTML，任何人都可以为此提供语法吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T14:27:16.870

只需像正常`for`循环一样运行它，并为每个元素添加属性。

```
for (var i = 0, len = painted.length; i < len; i++) {
    painted[i].id = "foo" + i;
    painted[i].innerHTML = "<strong>Your content</strong>";
} 
```

这用于`innerHTML`创建新内容。如果您需要更复杂的内容处理，那么没有单一的语法。您需要学习 DOM API 并执行所需的操作。

例如，如果您想添加一张图片，您可以创建一张并直接附加它。

```
for (var i = 0, len = painted.length; i < len; i++) {
    var img = document.createElement("img");
    img.id = "myimage" + i;
    painted[i].appendChild(img);
} 
```

请注意，我没有使用 HTML 标记。DOM 节点没有“HTML 内容”。它是对象树结构的一部分，因此它有子节点，子节点有自己的子节点，依此类推。

所以你需要做的，是以当前`painted`元素为根执行一些 DOM 选择，并决定应该去哪里。

# html - 从 html 中提取子字符串：BASH

> ID：12710523
> 
> 赞同：2
> 
> 时间：2012-10-03T14:22:06.317
> 
> 标签：html, string, bash, extract

我需要从 youtube 的 index.html 中提取视频名称。我已经能够将文件分成小块，每个小块都包含一个视频列表，但是我似乎无法提取视频标题。我的教授提供了以下命令，但是在这种情况下我似乎无法让它工作。

```
number=`expr "$s" : ".*\/\([0-9,]*\)\/"`; echo $number # will print 250,4211 
```

虽然我不完全确定，但我认为我无法让这种方法发挥作用，因为视频标题和周围文本之间没有空格。这是我需要从中提取标题的示例：

```
<li class="video-list-item "><a href="/watch?v=9BbgvlgDQMg&amp;feature=g-sptl&amp;cid=inp-hs-edt" class="video-list-item-link yt-uix-sessionlink" data-sessionlink="ei=CMzmroaB5bICFRiXIQoda3kX5g%3D%3D&amp;feature=g-sptl%26cid%3Dinp-hs-edt" ><span class="ux-thumb-wrap contains-addto "><span class="video-thumb ux-thumb yt-thumb-default-120 "><span class="yt-thumb-clip"><span class="yt-thumb-clip-inner"><img src="http://s.ytimg.com/yt/img/pixel-vfl3z5WfW.gif" alt="Lil&#39; Buck &quot;Golden Gateway&quot; Venice Beach California YAK FILMS Super Bowl 2012 Madonna Memphis Jookin" data-thumb="//i2.ytimg.com/vi/9BbgvlgDQMg/default.jpg" width="120" ><span class="vertical-align"></span></span></span></span><span class="video-time">3:51</span> 
```

在这段文字中，我需要提取“ **Lil' Buck "Golden Gateway" Venice Beach California YAK FILMS Super Bowl 2012 Madonna Memphis Jookin** "，不带引号。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T14:37:37.393

您可以使用 bash 正则表达式`\<img.*alt=\"([^\"]*)\"`从 img 元素中提取替代文本。

例子：

```
$ cat file
<li class="video-list-item "><a href="/watch?v=9BbgvlgDQMg&amp;feature=g-sptl&amp;cid=inp-hs-edt" class="video-list-item-link yt-uix-sessionlink" data-sessionlink="ei=CMzmroaB5bICFRiXIQoda3kX5g%3D%3D&amp;feature=g-sptl%26cid%3Dinp-hs-edt" ><span class="ux-thumb-wrap contains-addto "><span class="video-thumb ux-thumb yt-thumb-default-120 "><span class="yt-thumb-clip"><span class="yt-thumb-clip-inner"><img src="http://s.ytimg.com/yt/img/pixel-vfl3z5WfW.gif" alt="Lil&#39; Buck &quot;Golden Gateway&quot; Venice Beach California YAK FILMS Super Bowl 2012 Madonna Memphis Jookin" data-thumb="//i2.ytimg.com/vi/9BbgvlgDQMg/default.jpg" width="120" ><span class="vertical-align"></span></span></span></span><span class="video-time">3:51</span>

$ line="$(cat file)"

$ if [[ "$line" =~ \<img.*alt=\"([^\"]*)\" ]]
then
  echo "${BASH_REMATCH[1]}"
fi
Lil&#39; Buck &quot;Golden Gateway&quot; Venice Beach California YAK FILMS Super Bowl 2012 Madonna Memphis Jookin 
```

**更新：**

使用`expr`：

```
$ expr "$line" : '.*<img.*alt=\"\([^\"]*\)\".*'
Lil&#39; Buck &quot;Golden Gateway&quot; Venice Beach California YAK FILMS Super Bowl 2012 Madonna Memphis Jookin 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T14:28:03.893

我想在你的作业中使用正则表达式是强制性的......如果不是我会去一个 xml 解析器......

但是，如果是，我建议您与[Reg Ex buddy一起尝试](http://www.regextools.com/adfetch.php?page=buddy/test.html&adref=google_regex-testergoogle_regex-tool-powerful)

RegexBuddy 让您比以往任何时候都更轻松地创建正则表达式来满足您的需求，而无需任何猜测。尽管如此，您仍需要测试您的正则表达式模式以 100% 确保它们与您想要的匹配，并且不匹配您不想要的。

# spring - 如何使用一对多关系从一张表中获取两个列表

> ID：12710524
> 
> 赞同：0
> 
> 时间：2012-10-03T14:22:12.613
> 
> 标签：spring, hibernate, jsp, jstl

我有一张名为 RR 的表。其中将有两组值。我的桌子是

```
CREATE TABLE "TSL_RR_CONFIGURATION"
  (
    "ID"                       NUMBER(19,0),
    "TRK_TYPE"                 VARCHAR2(2 BYTE),
    "MEASURE_SYSTEM"           VARCHAR2(1 BYTE),
    "MIN_LENGTH"               NUMBER,
    "MAX_LENGTH"               NUMBER,
    "MIN_WIDTH"                NUMBER,
    "MAX_WIDTH"                NUMBER,
    "MIN_HEIGHT"               NUMBER,
    "MAX_HEIGHT"               NUMBER,
    "MIN_WEIGHT"               NUMBER,
    "MAX_WEIGHT"               NUMBER,
    "LOCATION_ID"              NUMBER(19,0),
    "IDX"                      NUMBER DEFAULT 0,
    "INSERTTIME" TIMESTAMP (6),
    "UPDATETIME" TIMESTAMP (6),
    CONSTRAINT "TSL_RR_CONFIGURATION_LOCA_FK1" FOREIGN KEY ("LOCATION_ID") REFERENCES "LOCATION" ("ID") ENABLE
  ) 
```

使用 Hibernate 一对多关系：以下是我映射列表的代码

```
<list name="revRecov" table="TSL_RR_CONFIGURATION" cascade="all" access="field">
            <key column="LOCATION_ID"  />
            <index column="idx" />
            <one-to-many class="RevRecovery" />
        </list> 
```

使用 spring 表单标签在 JSP 表单中显示：

```
 <c:forEach items="${location.revRecov}" var="item" varStatus="loop">
                <c:choose>          
                    <c:when test="${measureSys}">
                     <tr> <td><form:input path="revRecov[${loop.index}].trkType" /></td></tr>
                        <tr>
                            <td>Max Length: 
                                <form:input path="revRecov[${loop.index}].maxLength" size="15" maxlength="14" />inches</td>
                            <td>Min Length: 
                                <form:input path="revRecov[${loop.index}].minLength" size="15" maxlength="14" />inches</td> 
                            </tr>
                             </c:when>
                             <c:otherwise>
                              <tr> <td><form:input path="revRecov[${loop.index}].trkType" /></td></tr>
                      <tr><td>Max Length: 
                       <form:input path="revRecov[${loop.index}].maxLength" size="15" maxlength="14" />cm</td>
                      <td>Min Length: 
                      <form:input path="revRecov[${loop.index}].minLength" size="15" maxlength="14" />cm</td></tr>
                   </c:otherwise>
                 </c:choose>
     </c:foreach> 
```

使用`<c:when test>`标签以英寸或厘米为单位显示值。我的列表有类似的值

```
"97" "120" "5"
"12" "400" "1" 
```

如果是 97，我必须显示一个标签为包裹，对于 12，我应该有托盘。即使我验证它也会有问题，因为两行都将具有不同的 Max 和 Min 值集。

所以，我在想，如果我可以将该列表分成两个不同的列表，然后将其传递给 JSP，我也可以进行验证。

实现它的最佳方案是什么？如果我分成两个列表，当我将它们保存到数据库时会出现问题吗？

任何建议都非常感谢？

编辑：在我的情况下，它解决了 JSP 中不同集合的问题，但它仍然在验证一个问题，如果我有超过 2 行，我不能使用索引在 JSP 中为所有行显示它们。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T14:50:12.537

SOLVED: I can use the index of the row to show as different sets in the JSP Instead of this: `<form:input path="revRecov[${loop.index}].maxLength" size="15" maxlength="14" />inches</td>`

used this:

```
<form:input path="revRecov[0].maxLength" size="15" maxlength="14" />inches</td>
<form:input path="revRecov[1].maxLength" size="15" maxlength="14" />inches</td> 
```

# jquery-ui - 通过 Post 方法将变量从 JQuery UI 自动完成传递到 PHP 页面

> ID：12710526
> 
> 赞同：0
> 
> 时间：2012-10-03T14:22:20.970
> 
> 标签：jquery-ui, autocomplete

我有两个 JQuery UI 自动完成输入字段。当在第一个选项中选择一个选项时，选择的值将用作数据库查询的条件，该查询将发送第二个自动完成字段的源数据。我的问题是如何通过 Post 方法将第一个选择的值发送到 PHP 页面？

到目前为止的代码如下所示（此代码来自使用 GET 方法的教程；但我想使用 Post）：

```
<script>

                          $("input#divisions").autocomplete ({
                                                      //this is the first input 
                          source : [
                                      { value: "81", label: "City1" },
                                      { value: "82", label: "City2" },
                                      { value: "83", label: "City3" }                                       ],
                          minLength : 0,
                          select: function(event, ui) {
                              $('#divisions').val(ui.item.label);

                              return false;
                          },
                          focus: function(event, ui){
                             $('#divisions').val(ui.item.label);
                             return false;    
                          },
                          change: function(event, ui){
                                                              //the tutorial has this value sent by variables in the URL; I want the selection value sent by POST. How can I change this?
                              c_t_v_choices = "c_t_v_choices.php?filter=" + ui.item.value;
                              $("#c_t_v").autocomplete("option", "source", c_t_v_choices);
                          }
                          }).focus (function (event)
                          {
                          $(this).autocomplete ("search", "");
                          });

                          $("#c_t_v").autocomplete({
                              source: "",
                              minLength: 2,
                              select: function(event,ui){
                                  //$('#city').val(ui.item.city);              
                              }
                          });   
</script> 
```

有人可以帮忙吗？如果您有任何问题，请随时告诉我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-03T04:54:23.283

我为此找到的解决方案是在第一次自动完成中进行选择时使用 AJAX 创建源。

示例代码可以在这里找到：[https ://stackoverflow.com/questions/12715204/assigning-source-for-jquery-autocomplete](https://stackoverflow.com/questions/12715204/assigning-source-for-jquery-autocomplete)

# sql - 按 ID 分组并按 case 语句获取名称？

> ID：12710527
> 
> 赞同：0
> 
> 时间：2012-10-03T14:22:31.407
> 
> 标签：sql, sql-server, sql-server-2008

我有以下查询

```
SELECT ID, TestReason
FROM Test as t
INNER JOIN TestResult as tr ON t.ID = tr.TestID 
```

一个测试可以有多个测试结果。

`TestResults`是`A, B, C`或`D, F`。_

我需要为每个测试说，给我最大的测试结果，但是测试结果上的ID与等级无关，所以我必须使用字符串。

以下是表格：

**测试**

```
ID    TestReason
int    int 
```

**测试原因**

```
ID    Grade
int   varchar(2) 
```

所以基本上最高等级胜过所有，所以如果测试 ( `TestID = 1`) 包含测试结果，`A,C,C,D,D`我需要像这样返回 1 记录：

```
1 A 
```

我该怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-03T14:26:06.533

也许我遗漏了一些东西，但您是否尝试过这个 - 因为您使用的是字母等级，那么您将使用`MIN()`：

```
select MIN(r.grade), t.test_id
from test t
inner join testresult r
  on t.test_id = r.id
group by t.test_id 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!3/fc80e/4)

或者您可以使用`row_number()`：

```
select grade, test_id
from
(
  select r.grade, t.test_id,
    row_number() over(partition by t.id 
                      order by grade) rn
  from test t
  inner join testresult r
    on t.test_id = r.id
) x
where rn = 1 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!3/fc80e/8)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T14:28:25.713

```
SELECT DISTINCT ID
     , TestReason
  FROM Test T
 WHERE TestResult = (SELECT MIN(TestResult) FROM Test WHERE ID = T.ID) 
```

# c++ - QChar::isLetterOrNumber() 失败

> ID：12710528
> 
> 赞同：0
> 
> 时间：2012-10-03T14:22:36.860
> 
> 标签：c++, string, unicode, qstring, qchar

我想将 QStrings 转换为文件名。由于我希望文件名看起来干净，我想用下划线替换所有非字母和非数字。下面的代码应该做到这一点。

```
#include <iostream>
#include <QString>

QString makeFilename(const QString& title)
{
    QString result;
    for(QString::const_iterator itr = title.begin(); itr != title.end(); itr++)
     result.push_back(itr->isLetterOrNumber()?itr->toLower():'_');
    return result;
}

int main()
{
    QString str = "§";
    std::cout << makeFilename(str).toAscii().data() << std::endl;
} 
```

但是，在我的计算机上，这不起作用，我得到一个输出：

```
�_ 
```

寻找解释，调试告诉我`QString("§").size()`= 2 > 1 = `QString("a").size()`。

我的问题：

*   为什么 QString 使用 2 个 QChars 表示“§”？（**已解决**）
*   你有解决方案`makeFilename`吗？对中国人也有用吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T21:24:33.717

除了其他人所说的之外，请记住 a`QString`是 UTF-16 编码的字符串。BMP 之外的 Unicode 字符需要 2 个`QChar`值一起工作，称为代理对，以便对该字符进行编码。[QString 文档](http://qt-project.org/doc/qt-4.8/qstring.html)说了这么多：

> 代码值高于 65535 的 Unicode 字符使用代理对存储，即两个连续的 QChar。

循环时您没有考虑到这一点`QString`。您正在单独查看每个`QChar`，而不检查它是否属于代理对。

试试这个：

```
QString makeFilename(const QString& title) 
{ 
    QString result; 

    QString::const_iterator itr = title.begin();
    QString::const_iterator end = title.end();

    while (itr != end)
    {
        if (!itr->isHighSurrogate())
        {
            if (itr->isLetterOrNumber())
            {
                result.push_back(itr->toLower()); 
                ++itr;
                continue;
            }
        }
        else
        {
            ++itr;
            if (itr == end)
                break; // error - missing low surrogate

            if (!itr->isLowSurrogate())
                break; // error - not a low surrogate

            /*
            letters/numbers should not need to be surrogated,
            but if you want to check for that then you can use
            QChar::surrogateToUcs4() and QChar::category() to
            check if the surrogate pair represents a Unicode
            letter/number codepoint...

            uint ch = QChar::surrogateToUcs4(*(itr-1), *itr);
            QChar::Category cat = QChar::category(ch);
            if (
                ((cat >= QChar::Number_DecimalDigit) && (cat <= QChar::Number_Other)) ||
                ((cat >= QChar::Letter_Uppercase) && (cat <= QChar::Letter_Other))
                )
            {
                result.push_back(QChar(ch).toLower()); 
                ++itr;
                continue;
            }
            */
        }

        result.push_back('_');
        ++itr; 
    }

    return result; 
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T15:35:17.247

好的，这是我的理论：当您将“§”文字提供给 QString 时，Qt 使用一些默认编码，因为您没有设置一个。如果您的编译器使用 UTF-8 存储字符串文字，您可能会输入 2 个字节，这些字节将转换为 2 个字符而不是 1 个字符。同样，您的“toAscii”输出也很可能做错事。

从外观上看，您必须找出编译器用于存储字符串文字的内容，并使用正确的值调用[setCodecForCStrings 。](http://qt-project.org/doc/qt-4.8/qtextcodec.html#setCodecForCStrings)

编辑：根据您的描述，如果我不知道编译器的编码，我可能会首先尝试 QTextCodec::codecForName("UTF-8") 作为 setCodec 的参数:-)

# ssh - 以root身份plink ssh，访问被拒绝

> ID：12710529
> 
> 赞同：0
> 
> 时间：2012-10-03T14:22:37.183
> 
> 标签：ssh, putty, plink

我正在尝试通过 plink 连接到服务器。但是，我收到以下错误：

```
C:\>plink -ssh -pw password root@server-name
Using username "root".
Access denied 
```

我的`sshd_config`文件包含`PermitRootLogin yes`，即使这是默认值，只是为了确定。我需要设置一些其他配置以允许这种类型的连接吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-03T14:27:58.470

请张贴或检查可能在 中找到的日志内容`/var/log/auth.log`。另一个问题是您是否为您的 root 帐户添加了密码？否则，您可以尝试使用`sudo passwd root`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-03T14:41:03.883

我的密码包含特殊字符 (!@#$%^)。我需要在它们周围添加双引号以使其不抱怨。傻我！

# android - 如果我在 AsyncTask 线程中插入数据，如何从 UI 线程访问 SQLite 数据库？

> ID：12710531
> 
> 赞同：0
> 
> 时间：2012-10-03T14:22:38.530
> 
> 标签：android, sqlite, android-asynctask

我的 Android 应用程序中有一个名为 Main.java 的类，用于根据服务器中的数据验证用户登录名（用户名 + 密码）。起初，我成功了；我使用了一个 AsyncTask 线程加上一个处理 Http 连接的库，调用 HttpPostAux.java（事实上，我在这个论坛中找到了库的代码）。在 AsyncTask 的 onPostExecute 方法中，我正在创建和启动一个新活动，而不是修改当前活动，并且它有效。

但现在我想做一些不同的事情。我想将经过验证的数据（用户名 + 密码）保存到 AsyncTask 线程中的 SQLite 表中，然后在 UI 线程中，恢复该数据并使用它来打开提到的活动。插入发生但是当我试图从 UI 线程访问数据库时：它说表是空的。所以我查看了 logcat，发现 UI 线程在 AsyncTask 线程之前执行。

所以我的问题是如何在 AsyncTask 线程中插入数据，然后在 UI 线程中恢复它？有人可以帮忙吗？我有点迷路了！

我将欣赏一个代码示例！提前致谢！来自委内瑞拉的问候！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-03T14:27:53.893

UI 线程是您的应用程序主线程。当您创建一个`AsyncTask`时，您的耗时任务将`doInBackground`在一个单独的线程上执行（内部函数）。完成`doInBackground`后，`onPostExecute()`将从 UI 线程调用。因此，您只需要从内部执行您的 UI 线程任务（=“恢复该数据并使用它来打开提到的活动”）`onPostExecute()`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T14:32:21.500

我认为你之前的做法是正确的。我建议进行一种 SplashScreen 活动，检查用户之前是否登录过，即数据库中是否有用户名/密码。如果是这种情况，请使用此数据登录用户，然后继续您的主要活动。如果用户之前没有登录，请使用登录屏幕提示他们，存储此数据以供将来使用并继续您的主要活动。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-03T14:32:31.233

你可以在你的 UIThread 中实现一个 BroadcastReciever，当插入数据库完成时，它会监听从你的 AsyncTask 发送的 Intent。

从 AsyncTask 触发：

```
Intent intent = new Intent("DATABASE_INSERTION_DONE");
context.sendBroadcast(intent ); 
```

在 UiThread 中注册：

```
IntentFilter intentFilter = new IntentFilter("DATABASE_INSERTION_DONE");
registerReceiver(myIntentsReceiver, intentFilter); 
```

班级：

```
class MyIntentReceiver extends BroadcastReceiver {

    @Override
    public void onReceive(Context context, Intent intent) {

        if ("DATABASE_INSERTION_DONE".equals(intent.getAction())) {
            //do something
        }
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-03-15T17:27:54.000

您必须记住，一旦启动 AsyncTask，它将在另一个线程上运行，并且您的 UI 线程将继续前进。例如：

```
x="foo";
new SampleAsyncTask().execute();
txtView.setText(x);

Class SampleAsyncTask extends AsyncTask<...>{
.....

 public Void doInBackground(...){

 //LOTS OF CALCULATIONS

 x="bar";
 }  
} 
```

您的 txtView 肯定会显示“foo”而不是“bar”。为了确保您的 AsyncTask 完成，有很多选项。您可以在 AsyncTask 的 PostExecute 中调用方法来启动其余操作。你也可以像 Jelgh 所说的那样使用意图和广播接收器。但我最喜欢的是使用一个简单的回调：

```
public class LoginActivity extends Activity implement SampleAsyncTask.asyncCallback{

@Override
protected void onCreate(Bundle savedInstanceState){
x="foo";
new SampleAsyncTask().execute();

Class SampleAsyncTask extends AsyncTask<...>{ 

   asyncCallback mCallback;

   public SampleAsyncTask(Context c){
   mCallback; = (asyncCallback) c
   }

   public interface asyncCallback{
    void servedMyPurposeYouCanGoOn();
   }

   public Void doInBackground(...){

   //LOTS OF CALCULATIONS

   x="bar";
   mCallback.servedMyPurposeYouCanGoOn;

   //REST OF THE WORK

   }  
 }
}

@Override
public void servedMyPurposeYouCanGoOn(){
runOnUIThread(
//rest of the work
)   
}
} 
```

# c++ - Soci：创建自定义类来存储结果

> ID：12710532
> 
> 赞同：1
> 
> 时间：2012-10-03T14:22:42.447
> 
> 标签：c++, soci

我使用[Soci](http://soci.sourceforge.net)进行数据库查询。现在我需要一个自定义的结果集类，它将环绕 soci::rowset。我无法让它以我的代码在下面的方式工作，因为复制构造函数在 soci 中是私有的（根据源文件不支持）。如何在没有复杂代码的情况下完成包含 soci::rows 列表的包装器（在此为 Row 类型定义）？任何关于如何进行的设计或方向都值得赞赏

**我的头文件**

```
typedef soci::row Row; 

class ResultSet
{
public:
    ResultSet();
    ~ResultSet();
    void Copy(soci::rowset<soci::row>& rs);

    Row GetNextRow();
    bool HasRows();

private:
    soci::rowset<soci::row> m_rows;
    soci::rowset_iterator<soci::row> m_iterator;
    bool m_isAccessed;//if first access on row is done
}; 
```

**源文件**

```
ResultSet::ResultSet() {
    m_isAccessed=false;
}

ResultSet::~ResultSet() {

}

Row ResultSet::GetNextRow() {
    if(m_isAccessed) {
        m_iterator++;//increment row
        m_isAccessed=true;
    }
    return *m_iterator;
}

bool ResultSet::HasRows() {
    return m_iterator!=m_rows.end();//it have not reached the end yet;
}

void ResultSet::Copy(soci::rowset<soci::row>& rs) {
    m_rows = rs;
    m_iterator = rs.begin();//put it at row 1
} 
```

这是我在连接的 ExecuteQuery 函数中使用的方法。m_session 是 soci::session

```
void ConnectionMgr::ExecuteQuery(wxString& sql, ResultSet& rs) {
    try { 
        soci::rowset<soci::row> rsInternal = m_session.prepare<<sql.ToStdString();
        rs.Copy(rsInternal); 
    }
    catch (std::exception const& e) {
        m_error = wxString::Format(wxT("SqlQuery close error:%s\n"), e.what());
    }
} 
```

稍后我想如何使用该类的示例

```
wxString sql = wxT("-- a query\n SHOW DATABASES;"); 
                ResultSet rs;
                m_conn->ExecuteQuery(sql, rs);
                while(rs.HasRows())
                {
                    wxString name = wxString(rs.GetNextRow().get<std::string>(0));
                    //work with name here
                } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T07:50:33.737

SOCI 有很多限制，如果不修改源代码，执行这样的任务似乎是不可能的，这意味着您必须自己维护更改（除非开发人员接受补丁，这是有可能的）。

由于我使用 wxWidgets，我决定将 databaselayer 恢复为[wxDatabase](https://github.com/mtangoo/wxDatabase)，并将使用它并维护它

# php - 如何使用正则表达式删除没有数字和扩展名的任何内容？

> ID：12710533
> 
> 赞同：2
> 
> 时间：2012-10-03T14:22:49.590
> 
> 标签：php, regex

我有这样的文件`1248812832.v.doc`，我想从数据库字段中删除字符串和点以使文件像这样`1248812832.doc`

我使用此代码，但它不能完美运行我仍然看到字符串和点

```
<?php
$host = 'localhost';
$username = 'root';
$password = '';
$database = 'alsidik';

$conn = mysql_connect($host, $username, $password);

if (!$conn) {
    echo "Unable to connect to DB: " . mysql_error();
    exit;
}

if (!mysql_select_db($database)) {
    echo "Unable to select " . $database . ": " . mysql_error();
    exit;
}

$sql = "SELECT * FROM d_jobs";

$result = mysql_query($sql);

if (!$result) {
    echo "Could not successfully run query ($sql) from DB: " . mysql_error();
    exit;
}

if (mysql_num_rows($result) == 0) {
    echo "No rows found, nothing to print so am exiting";
    exit;
}

while ($row = mysql_fetch_assoc($result)) {
    $id = $row['jb_id'];
    $jb_cv = $row['jb_cv'];
    $jb_rep = preg_replace('/[^.a-z0-9.]/','', $jb_cv);
    $sql = "UPDATE d_jobs set jb_cv='" .$jb_rep. "' where jb_id=" . $id;
    mysql_query($sql);
}

mysql_close($conn);
?> 
```

谁能帮我..谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-03T14:27:19.183

你没有说你想如何处理这个字符串：

```
$str = '1212.v.a.doc'; 
```

...所以我假设您只需要此字符串的第一部分和最后一部分（其中部分由“。”符号分隔）。有了这个，你可以使用...

```
$parts = explode('.', $str);
if (count($parts) > 2) {
  $str = "$parts[0].{$parts[count($parts)-1]}";
} 
```

... 或者

```
$str = preg_replace('#(?<=[.])([^.]*[.])+#', '', $str); 
```

这条线失败的原因：

```
preg_replace('/[^.a-z0-9.]/','', $jb_cv); 
```

...是您在这里使用了否定字符类（由`[^...]`部分定义）。换句话说，您从字符串中删除除点、小写拉丁字母和数字之外的所有符号。我想这绝对不是我们想要的。事实上，它根本不会改变您示例中的原始字符串。

**更新：**看起来所有这些杂耍都是徒劳的，而您真正需要的只是数字和扩展名。好吧，它也可以用正则表达式来完成：

```
$str = '1212.v.a.doc';
$str = preg_replace('#^(\d+).*([.][^.]+)$#', '$1$2', $str);
echo $str; 
```

...但事实上，我更喜欢@jeroen 的解决方案，以提高可读性。)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-03T14:44:09.030

解决方案的替代`explode`方案：只需将其转换为`int`并将扩展重新打开：

```
$str = '1248812832abc.v.doc';

$name = (int) $str . '.' .pathinfo($str, PATHINFO_EXTENSION);

var_dump($name); 
```

[键盘上的示例](http://codepad.org/OpiBumPC)。

# perl - 如何使用 perl 脚本将表单数组从 URL 插入 DBD 数据库？

> ID：12710535
> 
> 赞同：1
> 
> 时间：2012-10-03T14:22:50.590
> 
> 标签：perl, postgresql, psql

我正在尝试使用 perl 脚本将 html 中的数据填充到 DBD 数据库中。

这是我的html代码：

```
<html>
</head>

<body>
<H1>Friend's contact book</H1>

<FORM ACTION="contact.pl" METHOD="POST">

<HR>
<H2>Friend's contact</H2>

<PRE>
          Name:<INPUT TYPE="text" NAME="name"> 
         Address:<INPUT TYPE="text" NAME="add"> 

</PRE>

</HR><P>
<INPUT TYPE="submit" VALUE="Sign Up"> or <INPUT TYPE="reset" VALUE="Cancel">
</P>
</FORM>
</body></html> 
```

这是我的 perl 脚本：contact.pl

```
#!/usr/bin/perl

# Initialize DBI.
use DBI;
use strict;

# Make the database connection.
my $dbh = DBI->connect("dbi:Pg:dbname=friendcontact") 
or die my $DBI::errstr;

   # Store the SQL query

myy $stat = my $dbh->prepare("INSERT into friend (name, add) VALUE 
(?,?)");

   # Execute the query

my $stmh->execute();

   # Tidy up

my $stmh->finish();
my $dbh->commit or die my $DBI::errstr; 
```

我无法运行**contact.pl**代码它说**“内部服务器错误”**

无论如何我可以纠正这个吗？

非常感谢提前

谢谢我已经按照您的说法编辑了代码，但是**更新后出现错误：** 内部服务器错误

```
The server encountered an internal error or misconfiguration and was unable to complete your request.
Please contact the server administrator, and inform them of the time the error occurred, and anything you might have done that may have caused the error.

Premature end of script headers: /home/friendcontact/private/cgi-bin/contact.pl 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T14:36:47.713

首先，您需要将 Perl 错误定向到浏览器，以便进行调试。这是通常的方式，但如果不查看代码的 CGI 部分就很难知道：

```
use CGI::Carp qw(fatalsToBrowser); 
```

您可能还需要更改服务器上的设置。

除此之外，这里还有几个问题。我相信这需要`VALUES`而不是`VALUE`：

```
$stat = $dbh->prepare( "INSERT into friend (name, add) VALUE 
(?,?)"); 
```

此外，这是不正确的：

```
$stmh->execute('$name','$add'); 
```

将`?`占位符与 DBH 一起使用时，您不需要引用变量；它在内部为您处理。即使允许这样做，您也使用了单引号，这意味着您没有传递变量，而只是传递文字字符串`'$name'`和`'$add'`. 只需这样做：

```
$stmh->execute($name,$add); 
```

这只是一个开始；这里可能还有更多。

**更新：**您也收到错误，因为您在使用它们之前没有声明变量。您应该使用表单声明每个变量`my $var;`。这使它成为一个词法变量，而不是一个全局变量。这是一种很好的做法，而且因为你说`use strict;`（一件非常好的事情），它也是一种必需的做法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T14:34:47.303

你没有`do`准备好处理。只需准备并执行：

```
$stat = $dbh->prepare( "INSERT into friend (name, add) VALUES(?,?)" );
$stat->execute( $name, $add); 
```

而且我假设您还有其他设置`$name`and`$add`变量的代码，因为它不会自动发生。

编辑：你也有其他问题。不要在对 . 的调用中引用变量`execute`。它`VALUES`在插入语句中

# c# - ie10 Metro 模式下的 HTML OOYALA 播放器问题

> ID：12710536
> 
> 赞同：0
> 
> 时间：2012-10-03T14:22:53.733
> 
> 标签：c#, javascript, .net, html5-video, ooyala

我看到有人在堆栈溢出中发布了一个标题为

[Ooyala 播放器版本 2 或 3 未在 IE 10 Metro 模式下运行](https://stackoverflow.com/questions/12496358/ooyala-player-version-2-or-3-not-running-in-ie-10-metro-mode)

建议的答案是

```
<!DOCTYPE html>
<html>
<head>
  <title>Untitled Page</title>
  <script type="text/javascript" src='http://player.ooyala.com/v3/{PLAYER BRANDING ID}'></script>
</head>

<body>
<!-- Player Placement -->
<div id='playerwrapper' style='width:750px;height:312px;'></div>
<script>
OO.ready(function() {
  var videoPlayer = OO.Player.create('playerwrapper', '{EMBED CODE}');
  videoPlayer.play();
});
</script>
</body>
</html> 
```

我有一个类似的问题。

*   我已经使用了正确的ID。
*   创建了一个示例 html 文件
*   将其部署在 iis7 Web 服务器中。
*   设置所有 mime 类型（.mp4 等）

它在 win8 桌面模式下工作正常，但是当我在 IE10 Metro 模式下访问它时，它显示以下消息：

```
You need to have adobe flash player to view this content 
```

从 ooyala 支持我得到了一个示例 html url（在他们的服务器上发布的相同代码），这与上述答案中的代码几乎相同。令人惊讶的是，它在 ie10 Metro 模式下无需闪光灯即可运行。

当我打开页面视图源时，他们的页面代码和我的没有区别。唯一的区别是网络服务器。

我在这里想念什么？任何 IIS 服务器设置？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T18:41:21.413

当我们的播放器嵌入到 IIS 托管的页面上时，应该不会有任何差异。如果我们能获得一个指向损坏页面的链接，我们可以帮助解决此问题，请在此处发布或在[http://support.ooyala.com/users/contact提交工单](http://support.ooyala.com/users/contact)

# seo - TYPO3：使用 RealURL 在说话 URL 中显示默认语言的语言名称

> ID：12710537
> 
> 赞同：2
> 
> 时间：2012-10-03T14:22:57.927
> 
> 标签：seo, search-engine, typo3, multilingual, realurl

我使用 TYPO3 4.7 建立了一个 TYPO3 网站。该网站是双语的（德语/英语），并且使用 RealURL “说”。默认语言是德语。

到目前为止，它运行良好。我得到如下网址：

> [http://www.mywebsite.something/neuigkeiten](http://www.mywebsite.something/neuigkeiten)
> 
> [http://www.mywebsite.something/kontakt](http://www.mywebsite.something/kontakt)

如果用户将语言更改为英语，他会得到如下 URL：

> [http://www.mywebsite.something/en/news](http://www.mywebsite.something/en/news)
> 
> [http://www.mywebsite.something/en/contact](http://www.mywebsite.something/en/contact)

如果将语言改回德语，他会得到如下 URL：

> [http://www.mywebsite.something/de/neuigkeiten](http://www.mywebsite.something/de/neuigkeiten)
> 
> [http://www.mywebsite.something/de/kontakt](http://www.mywebsite.something/de/kontakt)

问题是：这会为搜索引擎创建重复项。因此，在用户更改语言之前，我还希望默认语言在 URL 中使用德语“de”的语言参数作为默认值。

以前有人遇到过同样的问题吗？

谢谢你，克里斯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T15:05:03.597

尽量不要在 realurl config 中定义默认语言。这样的事情应该足够了：

```
array(
    'GETvar' => 'L',
    'valueMap' => array(
        'en' => '1',
        ),
        'noMatch' => 'bypass',
      ) 
```

# c++ - Visual C++ 错误 LNK1120 编译

> ID：12710538
> 
> 赞同：0
> 
> 时间：2012-10-03T14:22:58.883
> 
> 标签：c++, visual-studio

下午好。我从 Visual c++ 开始，我有一个我不明白的编译问题。

我得到的错误如下：

**错误 LNK1120 外部链接未解析**

**错误 LNK2019**

我粘贴代码：

C++测试控制台.CPP

```
#include "stdafx.h"
#include "StringUtils.h"
#include <iostream>

int _tmain(int argc, _TCHAR* argv[])
{
using namespace std;
string res = StringUtils::GetProperSalute("Carlos").c_str();
cout << res;
return 0;
} 
```

StringUtils.cpp

```
#include "StdAfx.h"
#include <stdio.h>
#include <ostream>
#include "StringUtils.h"
#include <string>
#include <sstream>
using namespace std;

static string GetProperSalute(string name)
{
return "Hello" + name;
} 
```

头文件：StringUtils.h

```
#pragma once
#include <string>
using namespace std;

class StringUtils
{

public:

static string GetProperSalute(string name);

}; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T14:24:25.197

您只需要`static`在类定义中声明该方法，并在定义时使用类名对其进行限定：

```
static string GetProperSalute(string name)
{
return "Hello" + name;
} 
```

应该

```
string StringUtils::GetProperSalute(string name)
{
return "Hello" + name;
} 
```

其他注意事项：

*   删除`using namespace std;`. 更喜欢完整的资格（例如`std::string`）
*   您的课程`StringUtils`似乎更适合作为`namespace`（这将意味着对代码进行更多更改）
*   `string res = StringUtils::GetProperSalute("Carlos").c_str();`没用，你可以这样做：`string res = StringUtils::GetProperSalute("Carlos");`
*   通过`const`引用而不是按值传递字符串：`std::string GetProperSalute(std::string const& name)`

# eclipse - 如何在我的 RCP 应用程序中控制 Eclipse Marketplace 中显示的市场

> ID：12710543
> 
> 赞同：1
> 
> 时间：2012-10-03T14:23:31.520
> 
> 标签：eclipse, eclipse-plugin, eclipse-rcp, eclipse-marketplace

我在我的 RCP 应用程序中使用 Eclipse Marketplace 客户端。我还在运行一个市场服务器，为我的用户提供从我公司提供的多个可安装单元中进行选择的能力。

当用户在我的 RCP 应用程序中浏览 Eclipse Marketplace 时，他/她会看到许多其他市场服务器，除了我的自定义服务器，例如 Eclipse Marketplace、Yoxos Marketplace、Obeo Marketplace 和 BREDEX GmbH 的测试解决方案市场。

有没有办法阻止 Eclipse Marketplace 客户端显示这些其他市场服务器？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-07T08:50:50.047

您可以通过添加 vm 参数来覆盖用于检索可用目录的默认 URL：

```
-Dorg.eclipse.epp.internal.mpc.core.service.DefaultCatalogService.url=http://mydomain.tld 
```

另见[http://wiki.eclipse.org/Marketplace/REST](http://wiki.eclipse.org/Marketplace/REST)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T05:16:13.860

默认情况下，Eclipse Market place 命令由`MarketplaceWizardCommand`handler 处理。如果您未指定任何目录，则此处理程序通过调用此 API [http://marketplace.eclipse.org/catalogs/api/p来加载远程目录。](http://marketplace.eclipse.org/catalogs/api/p)

我可以想到以下解决方案。

1.  添加命令（ABC Marketplace 命令）
2.  添加处理程序（ABC Marketplace 处理程序）
3.  将处理程序附加到命令并将此命令添加到主帮助菜单。
4.  在处理程序代码中调用市场客户端

`MarketplaceClient.openMarketplaceWizard(List<CatalogDescriptor> catalogDescriptors)`

# python - Python 多处理不使用 RHEL6 上的所有内核

> ID：12710544
> 
> 赞同：8
> 
> 时间：2012-10-03T14:23:38.893
> 
> 标签：python, multiprocessing, multicore, python-2.6, rhel

我一直在尝试使用 python 多处理包来通过利用计算机的多个内核来加速我正在做的一些物理模拟。

我注意到，当我运行模拟时，最多使用 12 个内核中的 3 个。事实上，当我开始模拟时，它最初使用了 3 个内核，然后过了一会儿就使用了 1 个内核。有时从一开始就只使用一两个内核。我一直无法弄清楚为什么（我基本上什么都没做，除了关闭几个终端窗口（没有任何活动进程））。（操作系统为 Red Hat Enterprise Linux 6.0，Python 版本为 2.6.5。）

我通过改变将工作拆分成的块数（2 到 120 之间）（即创建的进程数）进行了实验，但这似乎没有效果。

我在网上查找了有关此问题的信息，并阅读了该站点上的大多数相关问题（例如，[一](https://stackoverflow.com/questions/1182315/python-multicore-processing)、[二](https://stackoverflow.com/questions/5784389/using-100-of-all-cores-with-python-multiprocessing)），但找不到解决方案。

（编辑：我刚刚尝试在 Windows 7 下运行代码，它使用了所有可用的内核。不过，我仍然想为 RHEL 解决这个问题。）

这是我的代码（省略了物理）：

```
from multiprocessing import Queue, Process, current_process

def f(q,start,end): #a dummy function to be passed as target to Process
    q.put(mc_sim(start,end))

def mc_sim(start,end): #this is where the 'physics' is 
    p=current_process()
    print "starting", p.name, p.pid        
    sum_=0
    for i in xrange(start,end):
        sum_+=i
    print "exiting", p.name, p.pid
    return sum_

def main():
    NP=0 #number of processes
    total_steps=10**8
    chunk=total_steps/10
    start=0
    queue=Queue()
    subprocesses=[]
    while start<total_steps:
        p=Process(target=f,args=(queue,start,start+chunk))
        NP+=1
        print 'delegated %s:%s to subprocess %s' % (start, start+chunk, NP)
        p.start()
        start+=chunk
        subprocesses.append(p)
    total=0
    for i in xrange(NP):
        total+=queue.get()
    print "total is", total
    #two lines for consistency check:    
    # alt_total=mc_sim(0,total_steps)
    # print "alternative total is", alt_total
    while subprocesses:
        subprocesses.pop().join()

if __name__=='__main__':
    main() 
```

（事实上​​，代码是基于[Alex Martelli](https://stackoverflow.com/users/95810/alex-martelli)[在此处](https://stackoverflow.com/questions/1182315/python-multicore-processing)的回答。）

编辑 2：最终问题自行解决了，而我并不理解。我没有更改代码，也不知道更改了与操作系统相关的任何内容。尽管如此，当我运行代码时，现在所有内核都被使用了。也许这个问题稍后会再次出现，但现在我选择不进一步调查，因为它有效。感谢大家的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T06:25:17.493

我在处理器上`Ubuntu 12.04 x64 (kernel 3.2.0-32-generic)`使用 Python 版本运行了您的示例，系统报告的所有 8 个内核都完全过载（基于观察），所以先生，您的问题是基于操作系统实现的，并且代码很好。`2.7.3 x64``i7``htop`

# enyo - 如何使用 enyo.js 使中继器的行可滑动？

> ID：12710548
> 
> 赞同：0
> 
> 时间：2012-10-03T14:23:51.713
> 
> 标签：enyo

我有一个中继器。在哪个 intap 上我给出了一个方法。就像我想给每一行的不同方法一样。

```
{kind: "Scroller",classes:"enyo.fit",touch:true,style: "width: 314px; height:380px;",components: [
{kind: "Repeater", onSetupItem:"setupItem", components: [
        {name:"item",classes:"repeaterdesign" ,components: [
            {tag:"span", name: "DetailName",ontap: "tapped"}
        ]}
    ]} 
]}, 
```

在上面的中继器中，我给出了**ontap: "tapped"**。现在我想要 onswipe.both 我想要在这个中继器中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T15:30:11.130

如果您谈论的是 Enyo 2.0，中继器不支持可滑动的行。如果您想尝试创建自己的，可以查看 List 实现中的 prepareRow/LockRow。您还可以查看 Enyo 1.0 源代码，了解如何实现可滑动行。

更新：WIP 包中有一个 swipeableItem。它还没有完全“准备好生产”，但您可以尝试一下，看看它是否适合您的需求。

# java - Izpack 因“文件扩展名“.js”没有脚本引擎而失败，

> ID：12710551
> 
> 赞同：59
> 
> 时间：2012-10-03T14:23:56.580
> 
> 标签：java, windows, installation, izpack, winrun4j

在使用 Izpack 5 Beta 11 的测试机器上，如果我使用运行捆绑的 64 位 java 的 64 位 winrun4j exe 启动 install.jar，则 Izpack 会抱怨

`There is no script engine for file extension ".js"`，然后抱怨`The installer could not launch with administrator permissions`，然后尝试安装到默认安装目录失败，因为您没有管理员权限，安装到 C:/Program Files 之外的另一个文件夹可以完成

而如果我使用运行 32 位 java 的 32 位 winrun4j 安装程序运行它，它工作正常。

如果我直接运行 install.jar 而不使用 exe 包装器

即java -jar install.jar

它同时使用 32 位 JVM 和 64 位 JVM 给出这些错误。

所以我目前唯一可行的解​​决方案是安装 32 位 exe 包装器，但我还需要 64 位包装器。

所以问题是

1.  为什么 32 位 exe 可以工作而 64 位 exe 不能工作
2.  如果我尝试在没有包装器的情况下安装，为什么 32 位或 64 位都没有。

**跟进**

我发现[了这个](http://answers.microsoft.com/en-us/windows/forum/windows_7-system/fix-there-is-no-script-engine-for-file-extension/95d58867-3f31-45e3-aeaf-32ecea4d33c1)关于 javascript 错误（但不是 Izpack）的线程，并发现 .js 文件与 Utlradedit 相关联，Utlradedit 是我用于编辑大多数文件类型的编辑器。

简单地将 .js 与 Ultraedit 取消关联意味着现在当我运行

*   java -jar install.jar 在 32bit install.jar 上使用 32bit java
*   java -jar install.jar 在 64 位 install.jar 上使用 64 位 java
*   32 位 winrun4j 包装器。

它现在可以工作了:)

但是 64 位 winrun4j 现在无法开始安装并且根本不起作用，如果我从命令行窗口运行，我可以看到它

跑步的

```
wscript C:\Users\MESH\AppData\Local\Temp\Installer.js 
 c:\Code\WidgetReleases\1.0_Beta_2\widget-windows64\JVM64\bin\javaw.exe 
 -Dizpack.mode=privileged -jar 
C:\Code\WidgetReleases\1.0_Beta_2\widget-windows64\install.jar 
```

他们跑

```
wscript C:\Users\MESH\AppData\Local\Temp\Installer.js 
 c:\Code\WidgetReleases\1.0_Beta_2\widget-windows64\JVM64\bin\javaw.exe 
 abort exit 
 -Dizpack.mode=privileged -jar 
 :\Code\WidgetReleases\1.0_Beta_2\widget-windows64\install.jar 
```

所以后续问题是：

1.  为什么简单地将文件类型与编辑器关联会破坏这个 javascript 的东西，我可以想象这个或类似的问题可能会影响很多用户。
2.  为什么从我的 64 位包装器运行会导致 installer.js 运行 Abort Exit

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-04T06:32:18.697

这里有四个问题：

1.  为什么 32 位 exe 可以工作而 64 位 exe 不能工作
2.  如果我尝试在没有包装器的情况下安装，为什么 32 位或 64 位都没有。
3.  为什么简单地将文件类型与编辑器关联会破坏这个 javascript 的东西，我可以想象这个或类似的问题可能会影响很多用户。
4.  为什么从我的 64 位包装器运行会导致 installer.js 运行 Abort Exit

我将尝试回答他们：

1.  有时在应该“无缝”处理 32 位和 64 位的程序中出现错误和错误；一个例子是赛门铁克的 SEP 定义修复程序 - 它有时有效，但并非全部有效。您的评论证实了这些错误，并且您甚至发现了一个在此 32/64 处理中不会出错的竞争程序：“尚未解决此问题，但已通过使用[launch4j](http://launch4j.sourceforge.net/)而不是[winrun4j](http://winrun4j.sourceforge.net/)运行安装程序来解决此问题”。恭喜！:)

2.  我怀疑必要的应用程序/包装器不在您系统的 PATH 中。路径中的两个文件夹是 C:\WINDOWS 和 C:\WINDOWS\SYSTEM32。在命令提示符下，键入单词`SET`（不需要大写字母）。出现按字母顺序排列的变量列表。在 PATH= 中查找您希望启动应用程序的包装器的完整文件夹路径。它可能不存在。如果您愿意，可以添加它。

3.  好问题，但有一个很好的理由：通过将要打开的文件类型与程序相关联，您是在告诉您的计算机始终使用文件编辑器打开文件，在这种情况下以 .js 结尾。它正在做你告诉它做的事情，而不是你*想要*做的事情。获得您*想要*的内容的一种流行方法是将文件与之前的程序重新关联（您可能知道哪个最好），然后*编辑*文件，将您最喜欢的 JS 编辑器添加到“打开方式.. ." Windows 资源管理器的右键菜单中的选项。如果您愿意，我可以找到并链接到有关如何执行此操作的一两个页面。

4.  我相信这与问答#1密切相关。

让我知道这是否有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T22:32:49.580

更改 .js 文件的默认操作会导致问题，原因与更改 .exe 文件的默认操作会导致问题的原因相同。程序期望另一个程序的默认操作是运行它。编辑应该始终是右键单击操作，而不是默认操作。

# payment-gateway - EBS 支付网关是否支持自适应支付？

> ID：12710552
> 
> 赞同：0
> 
> 时间：2012-10-03T14:23:58.873
> 
> 标签：payment-gateway, paypal-adaptive-payments

我想将 EBS 支付网关集成到我的网站。我听说贝宝支持自适应支付。

EBS 支付网关是否支持自适应支付？谁能帮我？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T15:32:31.250

我在 EBS 上工作了很长时间，直到现在我认为它没有 paypal.com @ [https://cms.paypal.com/us/cgi-bin/?cmd=_render-content&content_ID提到的自适应支付=开发者/e_howto_api_APIntro](https://cms.paypal.com/us/cgi-bin/?cmd=_render-content&content_ID=developer/e_howto_api_APIntro)

# vba - 编写将宏写入另一个 Excel 文件的宏

> ID：12710555
> 
> 赞同：2
> 
> 时间：2012-10-03T14:24:11.177
> 
> 标签：vba

我有一些 VBA 代码需要复制到很多工作表中（它是事件处理，所以它位于工作表中而不是模块中）。

问题：是否可以编写一个宏，允许我选择所有需要修改的工作簿，然后自动将代码写入所有选定工作簿的每张工作表？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-11-24T10:50:16.767

没有直接的方法可以将模块从一个项目复制到另一个项目。要完成此任务，您必须从源 VBProject 导出模块，然后将该文件导入目标 VBProject。下面的代码将执行此操作。

函数声明为：

```
Function CopyModule(ModuleName As String, _
                    FromVBProject As VBIDE.VBProject, _
                    ToVBProject As VBIDE.VBProject, _
                    OverwriteExisting As Boolean) As Boolean 
```

`ModuleName`是要从一个项目复制到另一个项目的模块的名称。

`FromVBProject`是`VBProject`包含要复制的模块的那个。这就是源头`VBProject`。

`ToVBProject`是`VBProject`模块要复制到的位置。这就是目的地`VBProject`。

`OverwriteExisting`指示如果`ModuleName`已存在于`ToVBProject`. 如果这是`True`现有的`VBComponent`，将从`ToVBProject`. 如果 this存在`False`并且`VBComponent`已经存在，则该函数什么也不做并返回`False`。

`True`如果成功或`False`发生错误，该函数将返回。`False`如果以下任何一项为真，该函数将返回：

```
FromVBProject is nothing.
ToVBProject is nothing.
ModuleName is blank.
FromVBProject is locked.
ToVBProject is locked.
ModuleName does not exist in FromVBProject.
ModuleName exists in ToVBProject and OverwriteExisting is False. 
```

完整代码如下所示：

```
Function CopyModule(ModuleName As String, _
    FromVBProject As VBIDE.VBProject, _
    ToVBProject As VBIDE.VBProject, _
    OverwriteExisting As Boolean) As Boolean
    '''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''
    ' CopyModule
    ' This function copies a module from one VBProject to
    ' another. It returns True if successful or  False
    ' if an error occurs.
    '
    ' Parameters:
    ' --------------------------------
    ' FromVBProject         The VBProject that contains the module
    '                       to be copied.
    '
    ' ToVBProject           The VBProject into which the module is
    '                       to be copied.
    '
    ' ModuleName            The name of the module to copy.
    '
    ' OverwriteExisting     If True, the VBComponent named ModuleName
    '                       in ToVBProject will be removed before
    '                       importing the module. If False and
    '                       a VBComponent named ModuleName exists
    '                       in ToVBProject, the code will return
    '                       False.
    '
    '''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''

    Dim VBComp As VBIDE.VBComponent
    Dim FName As String
    Dim CompName As String
    Dim S As String
    Dim SlashPos As Long
    Dim ExtPos As Long
    Dim TempVBComp As VBIDE.VBComponent

    '''''''''''''''''''''''''''''''''''''''''''''
    ' Do some housekeeping validation.
    '''''''''''''''''''''''''''''''''''''''''''''
    If FromVBProject Is Nothing Then
        CopyModule = False
        Exit Function
    End If

    If Trim(ModuleName) = vbNullString Then
        CopyModule = False
        Exit Function
    End If

    If ToVBProject Is Nothing Then
        CopyModule = False
        Exit Function
    End If

    If FromVBProject.Protection = vbext_pp_locked Then
        CopyModule = False
        Exit Function
    End If

    If ToVBProject.Protection = vbext_pp_locked Then
        CopyModule = False
        Exit Function
    End If

    On Error Resume Next
    Set VBComp = FromVBProject.VBComponents(ModuleName)
    If Err.Number <> 0 Then
        CopyModule = False
        Exit Function
    End If

    ''''''''''''''''''''''''''''''''''''''''''''''''''''
    ' FName is the name of the temporary file to be
    ' used in the Export/Import code.
    ''''''''''''''''''''''''''''''''''''''''''''''''''''
    FName = Environ("Temp") & "\" & ModuleName & ".bas"
    If OverwriteExisting = True Then
        ''''''''''''''''''''''''''''''''''''''
        ' If OverwriteExisting is True, Kill
        ' the existing temp file and remove
        ' the existing VBComponent from the
        ' ToVBProject.
        ''''''''''''''''''''''''''''''''''''''
        If Dir(FName, vbNormal + vbHidden + vbSystem) <> vbNullString Then
            Err.Clear
            Kill FName
            If Err.Number <> 0 Then
                CopyModule = False
                Exit Function
            End If
        End If
        With ToVBProject.VBComponents
            .Remove .Item(ModuleName)
        End With
    Else
        '''''''''''''''''''''''''''''''''''''''''
        ' OverwriteExisting is False. If there is
        ' already a VBComponent named ModuleName,
        ' exit with a return code of False.
        ''''''''''''''''''''''''''''''''''''''''''
        Err.Clear
        Set VBComp = ToVBProject.VBComponents(ModuleName)
        If Err.Number <> 0 Then
            If Err.Number = 9 Then
                ' module doesn't exist. ignore error.
            Else
                ' other error. get out with return value of False
                CopyModule = False
                Exit Function
            End If
        End If
    End If

    ''''''''''''''''''''''''''''''''''''''''''''''''''''
    ' Do the Export and Import operation using FName
    ' and then Kill FName.
    ''''''''''''''''''''''''''''''''''''''''''''''''''''
    FromVBProject.VBComponents(ModuleName).Export Filename:=FName

    '''''''''''''''''''''''''''''''''''''
    ' Extract the module name from the
    ' export file name.
    '''''''''''''''''''''''''''''''''''''
    SlashPos = InStrRev(FName, "\")
    ExtPos = InStrRev(FName, ".")
    CompName = Mid(FName, SlashPos + 1, ExtPos - SlashPos - 1)

    ''''''''''''''''''''''''''''''''''''''''''''''
    ' Document modules (SheetX and ThisWorkbook)
    ' cannot be removed. So, if we are working with
    ' a document object, delete all code in that
    ' component and add the lines of FName
    ' back in to the module.
    ''''''''''''''''''''''''''''''''''''''''''''''
    Set VBComp = Nothing
    Set VBComp = ToVBProject.VBComponents(CompName)

    If VBComp Is Nothing Then
        ToVBProject.VBComponents.Import Filename:=FName
    Else
        If VBComp.Type = vbext_ct_Document Then
            ' VBComp is destination module
            Set TempVBComp = ToVBProject.VBComponents.Import(FName)
            ' TempVBComp is source module
            With VBComp.CodeModule
                .DeleteLines 1, .CountOfLines
                S = TempVBComp.CodeModule.Lines(1, TempVBComp.CodeModule.CountOfLines)
                .InsertLines 1, S
            End With
            On Error GoTo 0
            ToVBProject.VBComponents.Remove TempVBComp
        End If
    End If
    Kill FName
    CopyModule = True
End Function 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T15:42:47.217

您需要查看 VBComponents 来完成此类任务

您首先需要激活名为“Microsoft Visual Basic for Applications Extensibility”的参考

试试下面的代码：

```
Sub Test_InsertCode()

    Dim Commands As String
    Commands = Chr(13) & _
                "Private Sub TestNewCode()" & Chr(13) & _
                "    MsgBox ""You Win !!""" & Chr(13) & _
                "End Sub"

    Dim VBComps As VBComponents
    Set VBComps = ThisWorkbook.VBProject.VBComponents

    Dim VBComp As VBComponent
    Dim VBCodeMod As CodeModule

    Dim oSheet As Worksheet
    For Each oSheet In ThisWorkbook.Worksheets
        Set VBComp = VBComps(oSheet.CodeName)
        Set VBCodeMod = VBComp.CodeModule
        InsertCode VBCodeMod, Commands
    Next oSheet

    'Here's a quick example of how to insert code in a new Module
    Set VBComp = VBComps.Add(vbext_ct_StdModule)
    InsertCode VBComp.CodeModule, Commands

End Sub

Private Function InsertCode(VBCodeMod As CodeModule, Commands As String)

    Dim LineNum As Long
    With VBCodeMod
        LineNum = .CountOfLines + 1
        .InsertLines LineNum, Commands
    End With

End Function 
```

注意。当您在中断模式下运行它时，（或逐行？）它会在复制代码后立即生成一个错误。你需要一次运行它..

此代码适用于 Excel 2003，在更高版本上运行它时可能存在一些我不知道的安全问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-02-06T00:09:12.227

这不会解决工作表、事件部分，但这是将模块从一个工作簿移动到另一个工作簿的简单解决方案。

注意 - 您确实需要打开“Microsoft Visual Basic for Applications Extensibility”引用，如上所述。

简而言之，代码将起作用（无需所有内务验证）。显然，您可以获得更高级和防错/处理，但这是基础。该函数将模块从您的 FromVBProject 导出到文件目录，然后导入到您的 ToVBProject。

```
Function CopyModule (ModuleName as String, FromVBProject as VBIDE.VBProject, _  
                     ToVBProject as VBIDE.VBProject, _ 
                     FileLocation as String) as Boolean
Dim fileDirectory as String

fileDirectory = filelocation & ModuleName & ".bas"
FromVBProject.VBComponents.Item(ModuleName).Export fileDirectory
ToVBProject.Import fileDirectory

Kill fileDirectory

CopyModule = True

End Function

Sub CopyModuleToOtherWorkbook()

Dim destinationWorkbook as Workbook
Set destinationWorkbook = Workbooks("destiationWorkbook.xlsm")

CopyModule "TestModule", ThisWorkbook.VBProject, destinationWorkbook.VBProject, "C:\my documents\macros\"   

'Assuming you want to save the workbook you just copied the module to
 destinationWorkbook.SaveAs C:\my documents\macros\ & desintationWorkbook.Name, xlOpenXMLWorkbookMacroEnabled

 End sub 
```

# sql-server - SQL Server 将 bigint 中的日期与当前日期进行比较

> ID：12710556
> 
> 赞同：0
> 
> 时间：2012-10-03T14:24:14.057
> 
> 标签：sql-server, sql-server-2008

我在数据库中存储为 BIGINT 的日期/时间字段。我需要检索数据库中日期早于当前日期 30 天的记录。我尝试了以下方法，它可以工作。

有没有更好/更简单的方法来完成它？

```
select 
    datediff(day, CONVERT(DATE, DATEADD(s, dateInBigint / 1000, '19700101'), 102),
                  CONVERT(date, getdate(),102)); 
```

例如：

```
select 
   datediff(day, CONVERT(DATE, DATEADD(s, 1348986702000 / 1000, '19700101'), 102),
                 CONVERT(date, getdate(), 102)); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T14:50:04.647

你可以试试：

```
 select  
        datediff(day, CONVERT(DATE, DATEADD(ms, dateInBigint, '19700101'), 102), 
                      CONVERT(date, getdate(),102)); 
```

可能会快一点。

# ios - UIImage：ipad上的imageNamed在模拟器中失败

> ID：12710561
> 
> 赞同：0
> 
> 时间：2012-10-03T14:24:23.483
> 
> 标签：ios, xcode, cocoa-touch, ipad, ios-simulator

以下代码片段使用 iPad 模拟器和 iphone 模拟器可以正常工作。但是，当我在 ipad 2 上运行 UIImage 时（使用 iphone 模式），UIImage 为零（在调试时检查）

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    UITableViewCell *cell=[tableView dequeueReusableCellWithIdentifier:@"flowerCell"];

    switch (indexPath.section) {
        case kRedSection:
            cell.textLabel.text=[self.redFlowers objectAtIndex:indexPath.row];
            break;

        case kBlueSection:
            cell.textLabel.text=[self.blueFlowers objectAtIndex:indexPath.row];
            break;

        default:
            cell.textLabel.text=nil;
    }

    NSString *img=[[NSString alloc] initWithFormat:@"%@%@", cell.textLabel.text, @".png"];

    UIImage *flowerImage=[UIImage imageNamed:img];

    cell.imageView.image=flowerImage;

    return cell;
} 
```

这是从教程书中摘录的比利基本 iphone 示例，并且是第一次出现此问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T14:43:24.677

尝试完全匹配图像名称小写-大写

如果图像名称是“image.png”并且您将名称写在代码@“image.Png”中，这将在模拟器上正常工作，而在设备上不起作用

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T04:21:00.263

我假设如果它不是图像丢失的文件名大写。

模拟器可能通过缓存资源来掩盖问题。如果您从模拟器中删除应用程序，清理并再次运行，您可能会在模拟器上看到相同的问题。

检查您的目标构建设置并查看图像是否在您的资源中。

# ios - Facebook 注销操作表 ios

> ID：12710563
> 
> 赞同：0
> 
> 时间：2012-10-03T14:24:26.147
> 
> 标签：ios, facebook

[在 ios 应用程序中自定义登录到 facebook](https://stackoverflow.com/questions/12705409/custom-log-in-to-facebook-in-ios-application/12708270#comment17158208_12708270)

我正在解决这个问题。我在很大程度上取得了成功，除了当我尝试从 facebook 注销时，fb sdk 会显示一个`UIActionSheet`具有注销和取消选项的选项。我的应用程序处于横向模式。但是操作表以纵向模式而不是横向模式打开，并且从屏幕中间的某个位置开始，这样注销按钮就会超出范围。On;y 取消按钮的一半可见，单击注销会从 Facebook 注销。

我想以横向模式打开该操作表，但我什至没有该表的对象。

PS：我正在使用最新的 ios sdk。

# javascript - 为什么开发人员需要 PhantomJS 而不是仅仅使用一些测试框架？

> ID：12710578
> 
> 赞同：50
> 
> 时间：2012-10-03T14:25:15.303
> 
> 标签：javascript, testing, coffeescript, phantomjs

我不确定为什么 PhantomJS 是必要的，我希望有人能提供帮助。

* * *

## 回答 #1

> 赞同：120
> 
> 时间：2013-11-17T13:34:49.607

需要 DOM 的 JavaScript 需要在某个地方运行，通常在浏览器中。因此，测试框架通常会启动一个浏览器，然后他们控制该浏览器以运行测试并执行断言。测试框架本身通常无法直接控制浏览器，因此您最终需要进行三层测试：

*   框架：例如茉莉花
*   驱动程序：例如 Selenium
*   浏览器：如火狐

简单地说，PhantomJS 是一个无头运行的浏览器（即不画出屏幕）。带来的好处是速度——如果你在你的计算机上控制一个实际的程序，你在启动浏览器、配置配置文件等方面会有一定的开销。

PhantomJS 在这方面要快得多（我看到测试运行的时间不到 1/3）。唯一的权衡是您看不到您的测试正在运行，尽管这对于自动化套件来说并不是什么大问题！如果需要，您还可以截取屏幕截图（例如失败时）。如果你真的想要，你可以以 24fps 截屏并发送到 ffmpeg 以渲染你的测试视频，尽管你可能会破坏你的速度节省:)

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2012-10-04T07:19:54.333

这是一个常见的误解。花一些时间阅读[文档](http://phantomjs.org/documentation/)通常会消除混乱。例如，PhantomJS 通常用作[无头测试](http://phantomjs.org/headless-testing.html)运行器，用于在几十个框架中编写的测试：Buster.JS、Capybara、Mocha、Jasmine、QUnit、WebDriver、YUI Test 等等。正如你在这里看到的，PhantomJS 根本没有取代那些框架。

当然，PhantomJS 还有很多其他用途，从以编程方式[捕获网页](http://phantomjs.org/screen-capture.html)到自动[网络监控](http://phantomjs.org/network-monitoring.html)无所不包。有一个各种博客文章和文章的[列表，这些文章和文章展示了 PhantomJS 的不同报告用例。](http://phantomjs.org/buzz.html)

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-10-03T14:34:40.850

PhantomJS 并不是要取代一个测试框架，它会与一个测试框架一起工作。

例如，这是一个[与 Jasmine 结合使用的随机示例 PhantomJS](http://web.archive.org/web/20140725081811/http://rockycode.com/blog/phantomjs-meets-jasmine/)。

另请注意，PhantomJS 不仅用于测试，您还可以将其用于屏幕抓取或将繁重的渲染负载（例如，对于 CPU 挑战的移动浏览器）卸载到服务器上，如[本例所示](https://stackoverflow.com/questions/12684061/implementing-html-dom-rewriting-logic-on-the-server/12684443#12684443)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-07-19T10:29:09.843

此处未提及的另一个用例是渲染网页并生成该页面的图像或 PDF 快照。

例如，您可以将发票、报告、文档等呈现为 HTML 网页，并将其呈现为 PDF 以将其作为可下载文档发送给最终用户。

或者，也许您想要[网页的截图缩略图](https://stackoverflow.com/questions/16325655/how-to-generate-thumbnail-images-of-html-pages)？另一个可能的用例。

# database - 如何将数据库配置放在.war 之外？

> ID：12710580
> 
> 赞同：0
> 
> 时间：2012-10-03T14:25:33.607
> 
> 标签：database, jakarta-ee, connection, war

我有一个小型 Web 服务，目前所有数据库配置（主机名/端口/用户名/pw）都在项目的一个类中。当我导出 .war 文件时，它工作正常。但是如果我必须更改我的数据库怎么办？我应该改变我的来源

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T14:53:29.993

在目标服务器中定义数据源并在应用程序代码中通过 JNDI 访问 DS。通过这种方式，您可以随时更改数据库详细信息，而无需更改应用程序代码。

# php - 在 HTML 表单中获取日期 PHP 值

> ID：12710581
> 
> 赞同：1
> 
> 时间：2012-10-03T14:25:36.050
> 
> 标签：php, forms

我创建了一个 HTML 表格，我打算在其中获取一些信息以存储在数据库中，大多数字段将由用户填写，但我希望一个字段（日期）立即显示为当前日期，所以我给了这个值

```
<?php echo date("d/m/Y"); ?> 
```

到表格字段：

```
<input name="date" type="hidden" value="<?php echo date("d/m/Y"); ?>"> 
```

然后我测试了它，而不是在数据库上获取日期，我只是获取 PHP 代码。

这一切都适用于一个项目学校，即创建一个博客。现在我打算为用户创建的评论 FORM 存储发表评论的时间/日期。

有什么简单的解决方案吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-03T14:29:21.890

是的，有一个简单的解决方案，将其直接插入 SQL 代码中。

```
$sql = "INSERT INTO blog SET date=now()"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T14:39:28.290

if you want to save this date in your database you must change the date format,

```
$date = preg_replace( "/([0-9]{2})\/([0-9]{2})\/([0-9]{4})/i", "$3-$2-$1", $_POST['date']); 
```

and you save $date in your database

# c - 如何在 linux 中立即捕获击键？

> ID：12710582
> 
> 赞同：8
> 
> 时间：2012-10-03T14:25:37.907
> 
> 标签：c, linux, scancodes

> **可能重复：**
> [Linux 中的 getch() 和 getche() 等价于什么？](https://stackoverflow.com/questions/7469139/what-is-equivalent-to-getch-getche-in-linux)

我是linux编程的新手。:-)

我只是想知道我的程序（使用**C**语言）是否可以立即在 linux 中捕获每个击键，然后决定是否回显它以及如何显示它，就像 telnet 一样。

例如，如果用户点击“A”，我希望程序显示“B”，如果他输入“B”，则需要“C”，等等。

这听起来很有趣而且没用。我只是对此感到好奇。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-10-03T14:51:25.487

基本上，这在很大程度上取决于您如何立即定义。

这里有两个任务。第一个是禁用大多数 C 输入库中内置的常规键回显。第二种是打印出新字符而不是旧字符。

在伪代码中。

```
 echo(off);
 while (capturing && charIsAvailable()) {
   c = readOneChar();
   if (c == '\n') {
     capturing = false;
   }
   printf("%c", c++);
 }
 echo(on); 
```

有许多系统进行通信以捕获按键。

1.  键盘
2.  （可能）USB 总线
3.  CPU中断处理程序
4.  操作系统
5.  X 窗口服务器进程
6.  具有焦点的 X“窗口”。

最后一步是通过一个运行连续循环的程序完成的，该循环从 X 服务器捕获事件并处理它们。如果你想以某种方式扩展这个程序（获取按键被按下的时间长度），你需要告诉其他程序你想要“原始”键盘事件，这意味着你不会真正收到完全“熟” “ 人物。结果，您将必须跟踪哪些键是向上和向下的，以及多长时间，并处理程序中所有奇怪的元键行为（这不是“a”而是“A”，因为*shift*是向下的， ETC）。

还需要考虑其他处理模式，例如规范和非规范，它们将控制您是否希望在面向行的块（行事件）或面向字符的块（字符事件）中接收事件。由于需要让上游程序了解下游客户端的需求，这再次有点复杂。

现在您对环境有了一些了解，让我们重新审视抑制字符输出所需的实际代码。

```
// define a terminal configuration data structure
struct termios term;

// copy the stdin terminal configuration into term
tcgetattr( fileno(stdin), &term );

// turn off Canonical processing in term
term.c_lflag &= ~ICANON;

// turn off screen echo in term
term.c_lflag &= ~ECHO;

// set the terminal configuration for stdin according to term, now
tcsetattr( fileno(stdin), TCSANOW, &term);

(fetch characters here, use printf to show whatever you like)

// turn on Canonical processing in term
term.c_lflag |= ICANON;

// turn on screen echo in term
term.c_lflag |= ECHO;

// set the terminal configuration for stdin according to term, now
tcsetattr( fileno(stdin), TCSANOW, &term); 
```

即使这也不是立即的。要立即获得，您需要更接近源，这最终意味着内核模块（它仍然不如键盘微控制器那么直接，它不像开关实际关闭时那么直接）。在源和目标之间有足够的项目，最终有可能注意到差异，然而，在实践中，寻求性能和灵活性之间最佳折衷的人们已经对这段代码进行了很多工作。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-03T16:46:08.717

[Edwin Buck](https://stackoverflow.com/users/302139/edwin-buck)提供了一个很好的答案。这是另一个使用它的替代方法，`ncurses`它使这些事情变得更容易，并且几乎每个 Linux 发行版和其他 Unix 变体都支持。

```
#include <ncurses.h>

int main(int argc, char *argv[])
{
    int ch,c;
    initscr();
    cbreak();
    noecho();

    while( ch != 'q')
    {
        switch( c = getch() )
        {
            case 'a':
                ch = 'b';
            break;

            case 'b':
                ch = 'c';
            break;

            case 'c':
                ch = 'd';
            break;

            default:
                ch = c;                 
            break;
        }
        printw("%c",ch);
    }
    endwin();
    return(0);
} 
```

使用 gcc code.c -o code -lncurses 编译

以下是一些支持链接：

[ncurses noecho 和其他 - 手册页](http://linux.die.net/man/3/noecho)
[ncurses 编程 HOWTO](http://tldp.org/HOWTO/NCURSES-Programming-HOWTO/)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-10-03T14:34:41.873

此代码可以在互联网上找到，它`kermi3`来自 c-board

```
#include <termios.h>
#include <unistd.h>

int mygetch(void)
{
    struct termios oldt,newt;
    int ch;
    tcgetattr( STDIN_FILENO, &oldt );
    newt = oldt;
    newt.c_lflag &= ~( ICANON | ECHO );
    tcsetattr( STDIN_FILENO, TCSANOW, &newt );
    ch = getchar();
    tcsetattr( STDIN_FILENO, TCSANOW, &oldt );
    return ch;
} 
```

*编辑：*当然，如果您想获取 char 本身而不是将 ascii 值更改`char`为`int`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-03T14:29:23.467

这可能有点矫枉过正，但您可以使用[sdl](http://www.libsdl.org/)等游戏库来实现这一目标。

# apache - 另一个子域 www 到非 www RewriteCond

> ID：12710583
> 
> 赞同：1
> 
> 时间：2012-10-03T14:25:42.417
> 
> 标签：apache, .htaccess, mod-rewrite

我知道这已经被问过很多次了。我把它们都涂红了。而我做到了这一切。它应该工作。但事实并非如此。

这是我的配置：

我有主域：mydomain.com，一个 html 主网站。在该域中，我有一个名为“app”的文件夹，例如 mydomain.com/app。该文件夹实际上是一个子域（通过 dns 和谷歌网站管理员工具添加）：app.mydomain.com，并且 php 应用程序托管在那里。这一切都有效。Www 重定向在主域上完美运行，但在子域中却没有。他们使用不同的 .htaccess 文件。

看看这个 .htaccess cestion（用于子域）：

```
ErrorDocument 404 /404.php
RewriteEngine On
RewriteBase /
RewriteRule ^index\.php$ - [L]

RewriteCond %{HTTP_HOST} ^www\.app.\mydomain.\com$ [NC]    
RewriteRule ^(.*)$ http://app.mydomain.com/$1 [R=301,L]
RewriteCond %{HTTP_HOST} ^ip\.ip\.ip\.ip
RewriteRule (.*) http://app.mydomain.com/$1 [R=301,L] 
```

有什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T22:39:10.590

当您转义句点时，反斜杠需要在点*之前*。

更改此行

```
RewriteCond %{HTTP_HOST} ^www\.app.\mydomain.\com$ [NC] 
```

对此：

```
RewriteCond %{HTTP_HOST} ^www\.app\.mydomain\.com$ [NC] 
```

# postgresql - PostgreSQL 索引创建时间

> ID：12710588
> 
> 赞同：8
> 
> 时间：2012-10-03T14:25:48.127
> 
> 标签：postgresql, ddl

我可以使用什么查询来找出在数据库中创建特定索引（唯一或非唯一）的时间（日期）。基本上我想找出在过去一个月左右创建的索引。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-03T15:13:44.190

这是不可能的。没有关于创建关系、索引、...的时间的信息

# android - AnimationSet 中的 Multiply TranslateAnimation 不起作用

> ID：12710590
> 
> 赞同：1
> 
> 时间：2012-10-03T14:26:01.993
> 
> 标签：android, animation, multiplication

我希望我的 ImageView 首先从屏幕的中心到左侧的屏幕外，然后我希望它从右侧的屏幕外移动到屏幕的中心。

但它只是从屏幕右侧进入中心，然后暂停，然后转到屏幕左侧。不管我怎么做，它都会这样做。这是代码：

```
public void onWindowFocusChanged(boolean hasFocus) {
    // TODO Auto-generated method stub
    super.onWindowFocusChanged(hasFocus);
    Display display = getWindowManager().getDefaultDisplay(); 
    int width = display.getWidth(); 

    final AnimationSet anmSet;

    anmSet = new AnimationSet(hasFocus);
    imgCenter = (ImageView)findViewById(R.id.imgCenter);
    btnGoLeft = (ImageButton)findViewById(R.id.btnGoLeft);
    imgCenter.setImageDrawable(list.get(0).getImage());
    TranslateAnimation moveBack = new TranslateAnimation(0,-500, 0, 0);
    moveBack.setDuration(500);
    moveBack.setStartOffset(200);
    anmSet.addAnimation(moveBack);

    TranslateAnimation moveLeft = new TranslateAnimation(width,width/2-imgCenter.getWidth()/2-60, 0, 0); 
    moveLeft.setDuration(500);
    moveLeft.setStartOffset(2000);
    anmSet.addAnimation(moveLeft);

    btnGoLeft.setOnClickListener(new OnClickListener()
    {
        @Override
        public void onClick(View v) {
            imgCenter.startAnimation(anmSet);
        }
    });  
} 
```

# c# - 一个后台进程的两个线程？

> ID：12710591
> 
> 赞同：0
> 
> 时间：2012-10-03T14:26:02.370
> 
> 标签：c#, multithreading, backgroundworker

我必须从提供的 DLL 中调用一个例程。此 DLL 需要 2 到 10 分钟才能运行，具体取决于运行它的 PC 的速度。

我已将 DLL 调用放入 BackgroundWorker 线程中，以便界面保持响应。

```
private object Load(string feature) {
  object result = null;
  using (var w = new BackgroundWorker()) {
    w.WorkerReportsProgress = true;
    w.WorkerSupportsCancellation = true;
    w.DoWork += delegate(object sender, DoWorkEventArgs e) {
      e.Result = DAL.get(feature);
    };
    w.RunWorkerCompleted += delegate(object sender, RunWorkerCompletedEventArgs e) {
      progressBar1.Visible = false;
      if (e.Error != null) {
        MessageBox.Show(this, e.Error.Message, "Load Error", MessageBoxButtons.OK, MessageBoxIcon.Error);
      } else {
        result = e.Result;
      }
    };
    w.RunWorkerAsync();
    if (w.IsBusy) {
      progressBar1.Style = ProgressBarStyle.Marquee;
      progressBar1.Visible = true;
    }
  }
  return result;
} 
```

这可行，但我不能将此方法与正在等待其结果的其他调用内联调用，因为它会立即返回一个空值。

所以，我停留在一个 ManualResetEvent 实例中，试图让该方法等到它实际上有一个值后再返回：

```
private object Load(string feature) {
  object result = null;
  using (var w = new BackgroundWorker()) {
    var mre = new ManualResetEvent(false);
    w.WorkerReportsProgress = true;
    w.WorkerSupportsCancellation = true;
    w.DoWork += delegate(object sender, DoWorkEventArgs e) {
      e.Result = DAL.get(feature);
    };
    w.RunWorkerCompleted += delegate(object sender, RunWorkerCompletedEventArgs e) {
      progressBar1.Visible = false;
      if (e.Error != null) {
        MessageBox.Show(this, e.Error.Message, "Model Load Error", MessageBoxButtons.OK, MessageBoxIcon.Error);
      } else {
        result = e.Result;
      }
      mre.Set();
    };
    w.RunWorkerAsync();
    if (w.IsBusy) {
      progressBar1.Style = ProgressBarStyle.Marquee;
      progressBar1.Visible = true;
      progressBar1.Value = 0;
      const string statusRun = @"\|/-";
      const string statusMsg = "Loading Data...";
      int loops = 0;
      do {
        int index = loops++ % 4;
        tsStatus.Text = statusMsg + statusRun[index].ToString(); // '\', '|', '/', '-'
      } while (!mre.WaitOne(200));
    }
  }
  return result;
} 
```

但是，这样做似乎会导致我所有的 CPU 时间都花在 ManualResetEvent 的`WaitOne`方法上，并且`Set()`永远不会调用触发器。

有没有人遇到过这种行为并找到了一个很好的解决方法？

我过去已经为它创建了一个解决方法，但它涉及创建第二个线程来运行该`WaitOne`方法，以便第一个线程可以处理`DoWork`代码。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T14:39:30.097

> 这可行，但我不能将此方法与正在等待其结果的其他调用内联调用，因为它会立即返回一个空值。

这就是发明`async`and`await`关键字的原因。没有简单的解决方案不会阻塞线程。

由于您使用的 DLL 显然不提供使用任何异步编程模式（如`BeginOperation`/`EndOperation`或基于[任务](http://msdn.microsoft.com/en-us/library/dd270696%28v=vs.100%29.aspx)的异步编程）实现的方法，因此您被困在单独的工作线程中。

你可以做的是：

Start your `BackgroundWorker` or `Thread` as usual, then return immediately. Do not continue with the operation which would have required the return value of the lengthy DLL process. Once the `BackgroundWorker` or `Thread` is finished, have it report progress, and in the `ProgressChanged` event handler, you can retrieve the result of the lengthy DLL process and continue with the operation. Alternatively you can use the `RunWorkerCompleted` event (might actually be a better choice).

In the meantime, you may have to disable all controls which could start the lengthy DLL process again, or which would otherwise issue invalid operations while the process is running. And as Henk Holterman wrote, do not dispose the `BackgroundWorker` like that.

# apache - apache RewriteRule 将页面重定向到 root 不起作用

> ID：12710596
> 
> 赞同：0
> 
> 时间：2012-10-03T14:26:11.767
> 
> 标签：apache, tomcat, mod-rewrite, http-status-code-301

我为一个非常简单的 apache 重写规则苦苦挣扎了好几个小时。一定很明显，我再也看不到了。

作为输入，我在浏览器中输入：

```
http://enseignement2.be/deployment.html 
```

我尝试显示此页面：

```
http://enseignement2.be/hello.html 
```

因此，我在 apache conf 文件中添加了该规则：

```
RewriteRule ^deployment\.html$ hello.html [L,NC,QSA,R=301] 
```

...实际上还有许多其他变体。结果，它显示了 deployment.html 页面。浏览器的 URL 保持不变。

这是我完整的配置文件， /etc/httpd/conf.d/ 中的 enseignement2.conf

```
 <VirtualHost 68.169.61.167:80>
     ServerName enseignement2.be
     DocumentRoot /var/www/hagakure/data/www/
     SuexecUserGroup hagakure hagakure
     CustomLog /var/www/httpd-logs/enseignement2.be.access.log combined
     ErrorLog /var/www/httpd-logs/enseignement2.be.error.log
     ServerAlias *.enseignement2.be www.enseignement2.be
     AddDefaultCharset UTF-8
 # enable expirations
     ExpiresActive On
 # expire GIF,JPEG,PNG images after a month in the client's cache
   ExpiresByType image/gif A2592000
   ExpiresByType image/jpeg A2592000
   ExpiresByType image/png A2592000

   ExpiresByType application/javascript A2592000
   ExpiresByType text/css A2592000

   RewriteEngine on
 #       RewriteCond %{HTTP_HOST} ^(.+)\.enseignement(2|deux)\.be [NC] # only if there is something (at lease 1 char) before the first dot. example: toto.enseignement2.be
 #       RewriteRule     ^(.*)?$ http://enseignement2.be$1 [redirect=301,nocase]
         RewriteRule ^deployment\.html$ hello.html [L,NC,QSA,R=301]

 # Directives for eApps applications dependent on Apache
    ProxyPass /deployment.html !
    ProxyPass /deployment.jpg !
    ProxyPass /hello.html !
    ProxyPass /manager/ispmgr !
    ProxyPass /manimg !
    ProxyPass /mancgi !
    ProxyPass /webmail !
    ProxyPass /joomla !
    ProxyPass /awstats !
    ProxyPass /myadmin !
 # Directives for your application
    ProxyPass / ajp://localhost:8009/
    ProxyPassReverse / ajp://localhost:8009/
 </VirtualHost> 
```

ProxyPass 被考虑在内，因为如果我评论 ProxyPass /deployment.html ！，页面将不再显示（请求被转移到 apache 后面的 tomcat 7 实例。

它在 CentOS 6 上运行，带有 Apache/2.2.22 欢迎任何建议，谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T18:19:50.053

在服务器/虚拟主机配置中，您的正则表达式中需要一个前导斜杠：

```
RewriteRule ^/deployment\.html$ hello.html [L,NC,QSA,R=301] 
```

# delphi - 以编程方式打印到 PDF

> ID：12710603
> 
> 赞同：0
> 
> 时间：2012-10-03T14:26:28.437
> 
> 标签：delphi, delphi-xe2

我有一位客户想同时打印到 PDF 和物理打印机。他们不想从 PDF 打印物理副本，为什么我不知道。我尝试保存为临时 RTF 文件并调用 ShellExecute 打印到 Adob​​e，但似乎这不起作用。

有没有人可以在没有第三方 PDF 库的情况下从文件打印到 PDF？

更新：为了澄清一点，用户正在使用动态文档创建者。他们在 TRichEdit 的屏幕上看到预览文本，当前的打印方法是 TRichEdit 的打印命令 (RichEdit.Print)。对 pdf 的第一次尝试是将此丰富编辑的内容保存到 temp.rtf 文件中。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-03T16:27:07.467

您可以使用我们的开源[SynPdf 库](http://blog.synopse.info/post/2010/06/30/Making-report-from-code)将 RichEdit 内容导出为 pdf 文件。

请参阅[此论坛帖子](http://synopse.info/forum/viewtopic.php?id=76)以获取一些示例代码。

它不需要安装任何打印机。如果需要，它将允许轻松打印预览、自定义页脚和页眉、附加标题或文本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T14:35:18.400

我过去使用过 PDFForge。它安装了一台虚拟打印机，然后打印到这台打印机上会创建一个 PDF。但是，它还具有立即打印到物理打印机的选项，因此您将同时生成 PDF 和物理副本。如果对您有帮助，请参阅此处的文档：

[http://www.pdfforge.org/content/print](http://www.pdfforge.org/content/print)

# python - Python将嵌套的MutableMapping转换为嵌套的dict

> ID：12710604
> 
> 赞同：0
> 
> 时间：2012-10-03T14:26:30.550
> 
> 标签：python, dictionary, loops

我有一个嵌套的 MutableMapping，我希望将其转换为嵌套字典。当我说我有一个 MutableMapping 时，我当然是指我有一个继承它的类。结构有点像：

```
'key': <myobject> where myobject is the MutableMapping with more nested myobject's 
```

我目前这样做的尝试导致：

```
def __makeDict(c):
    c = dict(c)
    for item in c:
        if isinstance(c[item], MutableMapping):
            c[item] = Configuration.__makeDict(c[item])
            return c[item]
    return c 
```

馈入嵌套的 MutableMapping 只会产生树的最底层（我想我理解）。问题是，我如何迭代它并产生正确的结果？任何输入表示赞赏，干杯。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T03:08:56.133

```
 def __makeDict(c):
    for item in c:
        if isinstance(c[item], MutableMapping):
            Configuration.__makeDict(c[item])
            c[item] = dict(c[item])

    return dict(c) 
```

弄清楚了。重新排列顺序以使用 MutableList 的变异能力来帮助重建字典。

# common-lisp - 重命名命名空间的常用 Lisp 方法

> ID：12710606
> 
> 赞同：6
> 
> 时间：2012-10-03T14:26:34.793
> 
> 标签：common-lisp

将命名空间重命名为其他名称的常见 lisp 方法是什么。因此，我可以写 ht:start，而不是写 hunchentoot:start。

我正在寻找类似 pythons import A as B 的东西。

编辑：使用接受的答案，为 hunchentoot 添加昵称的代码如下：

```
(rename-package :hunchentoot :hunchentoot '(:ht)) 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-03T15:10:12.870

你所说的命名空间是一个使用创建的 Common Lisp 包[`defpackage`](http://www.lispworks.com/documentation/HyperSpec/Body/m_defpkg.htm)

您希望包裹昵称是`ht`

`defpackage`对现有包执行 a具有实现定义的行为，但某些实现允许以这种方式添加昵称。

还有一个功能[`rename-package`](http://www.lispworks.com/documentation/HyperSpec/Body/f_rn_pkg.htm#rename-package)可以为包重命名和添加昵称。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T00:36:31.037

我用这个：

```
(defpackage :foo+bar
  (:use :bar)
  (:export
   #:*foo* #:foo #:foo-p #:foo-ffs!
   . #.(let (ext)
         (do-external-symbols (sym :bar)
           (push (symbol-name sym) ext))
         ext))) 
```

# python - 在 Python 中将可变序列类型与 @property 一起用作默认属性值

> ID：12710607
> 
> 赞同：0
> 
> 时间：2012-10-03T14:26:34.237
> 
> 标签：python, arrays, list, properties, attributes

我陷入以下困境。我正在尝试使用默认值初始化一些类属性，其中默认值是可变序列类型（列表和 numpy 数组）。因为我想在每次从类外部设置属性时进行一些错误检查，所以我正在使用@property 功能。

```
import numpy as np
from FDTimeBase import FDTimeBase
from FDString import FDString

class FDObjNetwork(FDTimeBase):

    def __init__(self,i_mechObjs=[FDString(),FDString(101)],i_connPointMatrix=np.array([[0.5],[0.5]]),\
                 i_excPointMatrix=np.array([[0.5],[0.]])):
        self._mechObjs = i_mechObjs
        self._connPointMatrix = i_connPointMatrix
        self._excPointMatrix = i_excPointMatrix

    @property
    def mechObjs(self):
        """the mechanically vibrating objects making up the network"""
        return self._mechObjs

    @property
    def connPointMatrix(self):
        """
        the connection point matrix of the network, where each row
        denotes a separate element in the network and each column
        denotes a separate connection
        """
        return self._connPointMatrix

    @property
    def excPointMatrix(self):
        """
        the excitation point matrix, where each row denotes a
        separate element in the network and each column denotes a
        separate excitation distribution
        """
        return self._excPointMatrix

    @mechObjs.setter
    def mechObjs(self,newMechObjs):
        try:
            [obj.k for obj in newMechObjs]
        except AttributeError:
            raise AttributeError('argument mechObjs contains an invalid object')
        else:
            self._mechObjs = newMechObjs.tolist()[:]

    @connPointMatrix.setter
    def connPointMatrix(self,newConnPointMatrix):
        try:
            newConnPointMatrix[:,0]
        except TypeError:
            raise TypeError('argument connPointMatrix must be a 2D indexable object')
        else:
             self._connPointMatrix = np.asarray(newConnPointMatrix).copy()

    @excPointMatrix.setter
    def excPointMatrix(self,newExcPointMatrix):
        try:
            newExcPointMatrix[:,0]
        except TypeError:
            raise TypeError('argument excPointMatrix must be a 2D indexable object')
        else:
            self._excPointMatrix = np.asarray(newExcPointMatrix).cop()

    # public methods
    def calcModes(self):
        self.__checkDimensions()

    # private methods
    def __checkDimensions(self):
        if len(self.connPointMatrix[0,:]) != len(self.excPointMatrix[0,:]):
            raise Exception('arguments connPointMatrix and excPointMatrix must contain an equal nr. of rows')
        if len(self.connPointMatrix[0,:]) != len(self.mechObjs):
            raise Exception('the nr. of rows of argument connPointMatrix must be equal to the nr. of\
                            elements in mechObjs')
        if len(self.excPointMatrix[0,:]) != len(self.mechObjs):
            raise Exception('the nr. of rows of argument excPointMatrix must be equal to the nr. of\
                            elements in mechObjs') 
```

现在，当我创建一个新实例并尝试访问 mechObjs 属性时，我得到一个 AttributeError 并且我不明白为什么（其他两个属性相同）。在实例上调用 dir() 我可以看到包含列表和数组对象的 _mechObjs、_connPointMatrix 和 _excPointMatrix 属性。有人可以告诉我我在这里做错了什么吗？对象 FDString 是另一个自定义类，我省略了发布，因为源文件相当大。FDTimeBase 是一个只包含 2 个常量类属性的对象（没什么花哨的）。

提前致谢

# objective-c - 长期接触 UIButton

> ID：12710615
> 
> 赞同：0
> 
> 时间：2012-10-03T14:27:05.797
> 
> 标签：objective-c, xcode, uibutton

我已经有一个`UIButton`每次被触摸时都会增加一个变量的变量。我现在想做的是，当我们保持接触 this`UIButton`时，变量每 0.5 秒递增一次。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T14:35:55.070

`UIControlEventTouchDown`向您启动计时器的事件添加操作。打开`UIControlEventTouchUpOutside`或`UIControlEventTouchUpInside`停止计时器。

```
[button addTarget:self action:@selector(touchedButton:) 
 forControlEvents:UIControlEventTouchDown];
[button addTarget:self action:@selector(releasedButton:) 
 forControlEvents:UIControlEventTouchUpOutside | UIControlEventTouchUpInside]; 
```

```
- (void)touchedButton:(id)sender {
    self.timer = [NSTimer scheduledTimerWithTimeInterval:0.5f target:self 
                  selector:@selector(timerFired:) userInfo:nil repeats:YES];
}

- (void)releasedButton:(id)sender {
    [self.timer invalidate];
}

- (void)timerFired:(NSTimer *)timer {
    counter++;
} 
```

# c# - 在控制台应用程序中显示 Thread.Sleep() 的剩余时间

> ID：12710617
> 
> 赞同：0
> 
> 时间：2012-10-03T14:27:14.033
> 
> 标签：c#, .net, timer, console-application

我有一个无限运行的.net 控制台应用程序。我已经插入`Thread.Sleep()`了 5 分钟来暂停我的应用程序。此时我想显示线程激活并再次启动应用程序的用户剩余时间（以秒为单位）。

```
class Program
{
    static void Main(string[] args)
    {
        Program program = new Program();
        program.startFeed();
    }
    public void startFeed()
    {
        while (true)
        {
            try
            {
                //My Application which i want to run continously 
                //when thread enters in run mode
            }
            catch (Exception xObj)
            {
                Console.WriteLine(DateTime.Now.ToString() 
                    + " >> Incoming Message Processing Error. >> " 
                    + xObj.Message);
            }
            Console.WriteLine("Waiting For Data......");
            Thread.Sleep(300000);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T15:40:26.840

您的程序的当前结构不支持您要实现的目标。

当您调用[Thread.Sleep(int)时，它会将](http://msdn.microsoft.com/en-us/library/d00bd51t.aspx)*当前*线程挂起指定的时间。默认情况下，您的程序仅作为单个线程运行，因此暂停该线程会阻止您的所有代码运行。

您希望向用户显示更新，但您还希望您的工作进程在两次运行之间等待 5 分钟。这意味着您将需要为工作进程创建一个单独的线程，并从您的程序开始的线程中管理它。

正如其他人所建议的那样，一种更简单的方法是使用[System.Threading.Timer 。](http://msdn.microsoft.com/en-us/library/system.threading.timer.aspx)在您的情况下，您可以将代码更改为如下所示：

```
class Program
{
    static void Main(string[] args)
    {
        Program program = new Program();
        program.startFeed();
    }

    // This is run on the main thread
    public void startFeed()
    {
        // Start a Timer on a new thread to do work with the ProcessData method
        // Pass null to its 'state' argument, wait 0 milliseconds before
        // running it, and run it once every 300000 milliseconds
        using (new Timer(ProcessData, null, 0, 300000))
        {
            // The Timer will only exist while we are inside the 'using' block;
            // stay here with a loop
            while (true)
            {
                // Write our status message
                Console.WriteLine("Waiting for data at {0}...", DateTime.Now);
                // We don't want this loop running ALL the time; add a small
                // delay so it only updates once every second
                Thread.Sleep(1000); 
            }
        }
    }

    // This is run on the background thread
    private void ProcessData(object state)
    {
        try
        {
            //My Application which i want to run continously 
            //when thread enters in run mode
        }
        catch (Exception xObj)
        {
            Console.WriteLine(DateTime.Now.ToString()
                + " >> Incoming Message Processing Error. >> "
                + xObj.Message);
        }
    }
} 
```

太好了，所以现在您有两个线程同时运行，并且在一个线程上调用[Thread.Sleep(int)](http://msdn.microsoft.com/en-us/library/d00bd51t.aspx)不会影响另一个线程。请注意，您不需要在*ProcessData中调用*[Thread.Sleep(int)](http://msdn.microsoft.com/en-us/library/d00bd51t.aspx)，因为[Timer](http://msdn.microsoft.com/en-us/library/system.threading.timer.aspx)会为您处理这些。

 *最后，您希望准确地向用户显示*ProcessData*何时再次运行。您可以通过将[DateTime](http://msdn.microsoft.com/en-us/library/system.datetime.aspx)字段添加到您的*Program*类来做到这一点，比如在*ProcessData*`private DateTime _lastRun;`的开头，您可以将其设置为. 然后，在*startFeed*的循环中，您可以使用类似.*`DateTime.Now`*`_lastRun.AddMinutes(5).Subtract(DateTime.Now).Seconds`**

 *** * *

这里可以说的还有很多。正如其他人所暗示的那样，您正在编写轮询代码而不是事件驱动代码。轮询通常比事件驱动的等效项更慢、效率更低且更复杂。但是，这取决于您的数据源是否能够在有新数据要处理时通知您的代码；投票可能是您唯一的选择。

关于线程之间的通信也有很多话要说。就其本身而言，多线程是一个非常棘手的主题，并且是许多难以发现的错误的原因。但是，对于此示例，写入控制台并设置共享的 DateTime 字段在两个线程之间*应该是安全的。****

# android - 外部浏览器中的 oauth2.0

> ID：12710623
> 
> 赞同：1
> 
> 时间：2012-10-03T14:27:24.933
> 
> 标签：android, oauth-2.0

我最近遇到了 twitter4j，它使用外部浏览器通过 twitter 对用户进行身份验证。我想实现一致性 - oauth2(facebook) 是否可以应用类似的方法：外部网络浏览器而不是 webview 以及如何？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T14:41:11.357

默认情况下，Android Facebook SDK 不提供此功能。你只有两个选择

*   使用 facebook 应用程序来验证您的用户
*   `WebView`在里面使用 facebook 对话框

但是 facebook sdk 的资源是可用的，你可以重写它们并创建任何你需要的东西

您也可以尝试在 GitHub 上发现 Facebook SDK 分支，很可能具有您需要的类似选项的项目已经存在

# session - Symfony 2.1.2 memcache 会话有点 SSO

> ID：12710629
> 
> 赞同：1
> 
> 时间：2012-10-03T14:27:43.600
> 
> 标签：session, symfony, memcached, symfony-2.1

我有点迷失在 Symfony 中的所有会话内容中。我将解释我想要实现的目标，我只想在正确的轨道上被指出。

我将 PHP 会话存储在 memcache 中（由于过去的系统，我没有选择）。在我的 Symfony 站点中，我也必须将它插入 memcache，这里没问题。但是在开始会话之前，我需要检查我的用户是否已经在另一个站点的 memcache 中有一个会话以获取信息......然后将我的会话 ID 设置为这个。

我试图扩展`Session`，但似乎它不是这样做的正确位置。

任何提示将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T12:26:08.923

我试图用 memcache来实现[这个解决方案。](http://hipaway.com/blog/symfony2-sessions-in-memcache/)据我所见，它可以工作，但我在我的 memcache 服务器中找不到任何与会话相关的数据集。但这似乎是一个很好的工作起点；-) 同样有趣的是sf2 文档中框架配置 (app/config/config.yml)[的所有默认值的文档。](http://symfony.com/doc/current/reference/configuration/framework.html#session)也许这有帮助:-)

# iphone - 如何制作“摇晃”动画

> ID：12710630
> 
> 赞同：15
> 
> 时间：2012-10-03T14:27:52.047
> 
> 标签：iphone, objective-c, ios, xcode, uiimage

在我的 xcode 项目中，我有一个 UIImage。我想让它从左到右稍微晃动（动画）。我写了这段代码，但是，它不起作用。

```
-(void)errorShake
{
    [UIView beginAnimations:nil context:NULL];
    [UIView setAnimationDuration:1.0];

    [lockImage setTransform:CGAffineTransformMakeRotation(-5 * M_PI / 180.0)];
    [lockImage setTransform:CGAffineTransformMakeRotation(-10 * M_PI / 180.0)];
    [lockImage setTransform:CGAffineTransformMakeRotation(-15 * M_PI / 180.0)];
    [lockImage setTransform:CGAffineTransformMakeRotation(-20 * M_PI / 180.0)];
     [lockImage setTransform:CGAffineTransformMakeRotation(-15 * M_PI / 180.0)];
     [lockImage setTransform:CGAffineTransformMakeRotation(-10 * M_PI / 180.0)];
     [lockImage setTransform:CGAffineTransformMakeRotation(-5 * M_PI / 180.0)];
     [lockImage setTransform:CGAffineTransformMakeRotation(0 * M_PI / 180.0)];
     [lockImage setTransform:CGAffineTransformMakeRotation(5 * M_PI / 180.0)];
     [lockImage setTransform:CGAffineTransformMakeRotation(10 * M_PI / 180.0)];
     [lockImage setTransform:CGAffineTransformMakeRotation(15 * M_PI / 180.0)];
     [lockImage setTransform:CGAffineTransformMakeRotation(20 * M_PI / 180.0)];
     [lockImage setTransform:CGAffineTransformMakeRotation(15 * M_PI / 180.0)];
     [lockImage setTransform:CGAffineTransformMakeRotation(10 * M_PI / 180.0)];
     [lockImage setTransform:CGAffineTransformMakeRotation(5 * M_PI / 180.0)];
     [lockImage setTransform:CGAffineTransformMakeRotation(0 * M_PI / 180.0)];

    [UIView commitAnimations];
} 
```

请你告诉我，我怎样才能让我的形象动摇？

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2012-10-03T14:29:47.280

这是我用于该效果的代码。

```
 -(void)shakeView {

        CABasicAnimation *shake = [CABasicAnimation animationWithKeyPath:@"position"];
        [shake setDuration:0.1];
        [shake setRepeatCount:2];
        [shake setAutoreverses:YES];
        [shake setFromValue:[NSValue valueWithCGPoint:
                                 CGPointMake(lockImage.center.x - 5,lockImage.center.y)]];
        [shake setToValue:[NSValue valueWithCGPoint:
                               CGPointMake(lockImage.center.x + 5, lockImage.center.y)]];
        [lockImage.layer addAnimation:shake forKey:@"position"];
    } 
```

如前所述`Jere`。确保包括导入：

```
#import <QuartzCore/QuartzCore.h> 
```

您也可以将其作为类别添加到`UIView`.

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2014-11-18T13:01:17.530

brynbodayles 的回答也适用于 iOS8 下的快速摇动动画。

导入 QuartzCore：

```
func shakeView(){
    var shake:CABasicAnimation = CABasicAnimation(keyPath: "position")
    shake.duration = 0.1
    shake.repeatCount = 2
    shake.autoreverses = true

    var from_point:CGPoint = CGPointMake(LoginField.center.x - 5, LoginField.center.y)
    var from_value:NSValue = NSValue(CGPoint: from_point)

    var to_point:CGPoint = CGPointMake(LoginField.center.x + 5, LoginField.center.y)
    var to_value:NSValue = NSValue(CGPoint: to_point)

    shake.fromValue = from_value
    shake.toValue = to_value
    LoginField.layer.addAnimation(shake, forKey: "position")
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-04-02T07:30:16.100

```
func shakeView(_ view: UIView?) {
    let shake = CABasicAnimation(keyPath: "position")
    shake.duration = 0.1
    shake.repeatCount = 2
    shake.autoreverses = true
    shake.fromValue = NSValue(cgPoint: CGPoint(x: (view?.center.x)! - 5, y: view?.center.y ?? 0.0))
    shake.toValue = NSValue(cgPoint: CGPoint(x: (view?.center.x)! + 5, y: view?.center.y ?? 0.0))
    view?.layer.add(shake, forKey: "position")
} 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2017-02-20T12:41:23.217

来自[电晕](https://stackoverflow.com/a/26995004/6619234)答案

**在多个按钮和视图中提供摇动动画 SWIFT3**

对于视图动画，只需将扩展 UIButton 更改为扩展 UIView

```
extension UIButton
{
    func shakeAnim ()
    {
        let shake:CABasicAnimation = CABasicAnimation(keyPath: "position")
        shake.duration = 0.1
        shake.repeatCount = 2
        shake.autoreverses = true

        let from_point:CGPoint = CGPoint(x:self.center.x - 5,y: self.center.y)
        let from_value:NSValue = NSValue(cgPoint: from_point)

        let to_point:CGPoint = CGPoint(x:self.center.x + 5,y: self.center.y)
        let to_value:NSValue = NSValue(cgPoint: to_point)

        shake.fromValue = from_value
        shake.toValue = to_value
        self.layer.add(shake, forKey: "position")
   }
} 
```

# c# - 我可以全局访问 DrawContext 变量吗？（在我的应用程序的任何类别中）

> ID：12710636
> 
> 赞同：0
> 
> 时间：2012-10-03T14:28:03.503
> 
> 标签：c#, kinect, drawingcontext

我的编程技能不太好，而且他们在 C# 方面仍然非常业余计时器启动并使用 Drawcontext.DrawText 方法在屏幕上显示任何消息，但如您所见，如果我尝试引入 DrawContext 的新变量并将 draw 值分配给它，我将无法访问 on_time_event 中的绘图变量……它给出和异常...因为 Draw 上下文的新变量从未赋值我该怎么办？请在这方面提供任何帮助，我会非常有帮助

```
 class angle
  {
    System.Timers.Timer timer = new System.Timers.Timer();
    bool timer_start = false;
    int index = 5; 
    public DrawingContext draw_contex;

  public void angle_between_left_shoulder(Skeleton sk1, DrawingContext draw, JointType    
  Shoulder_cntre, 
        JointType Shoulder_left, JointType Elbow_left, KinectSensor sen)
    {

        //draw_contex= draw;
        Joint sh_cntr = sk1.Joints[Shoulder_cntre];
        Joint sh_left = sk1.Joints[Shoulder_left];
        Joint elb_left = sk1.Joints[Elbow_left];

        Vector3 v_shoulder = new Vector3(sh_cntr.Position.X, sh_left.Position.Y, 
        sh_cntr.Position.Z);
        Vector3 v_should_l = new Vector3(sh_left.Position.X, sh_left.Position.Y, 
        sh_left.Position.Z);
        Vector3 v_elbow_l = new Vector3(elb_left.Position.X, elb_left.Position.Y, 
        elb_left.Position.Z);

        Vector3 va = v_shoulder - v_should_l;
        Vector3 vb = v_elbow_l - v_should_l;

        va = Vector3.Normalize(va);
        vb = Vector3.Normalize(vb);

        float len_prod = va.Length() * va.Length();
        float dot_pro = Vector3.Dot(va, vb);
        double angle = Math.Acos(dot_pro);

        angle = angle * 180 / Math.PI;
        angle = 180 - angle;

        System.Windows.Point shoul_l = this.point_toScreen(sh_left.Position, sen);
        draw.DrawText(new FormattedText(angle.ToString("0"), new 
         System.Globalization.CultureInfo("en-us"),
         FlowDirection.LeftToRight,
         new Typeface("Verdana"), 16, Brushes.OrangeRed),
         new System.Windows.Point(shoul_l.X+10, shoul_l.Y +20));

        if (angle > 70 && angle < 90)
        {
            if (timer_start == false)
            {

                timer.Interval = 2000;
                timer.Start();
                timer.Elapsed += new ElapsedEventHandler(on_time_event);

            }
        }
    }

    void on_time_event(object sender, ElapsedEventArgs e)
     {
      --index;
       if (index != 0)
       {

        MessageBox.Show(index.ToString());

        /*
         draw_contex.DrawText(new FormattedText(index.ToString("0"), new 
        System.Globalization.CultureInfo("en-us"),
             FlowDirection.LeftToRight,
             new Typeface("Verdana"), 16, Brushes.OrangeRed),
             new System.Windows.Point(10, 120));
       }
      else
       {
        timer.Stop();
       } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T17:14:28.427

如果您只想在窗口中显示格式化字符串，则可以写入 TextBlock。在您的 XAML 中，您将拥有以下内容：

```
<Grid>
  <!-- whatever other controls you have -->
  <TextBlock Name="MyMessage" />
</Grid> 
```

然后在您的代码隐藏中，您可以将一个新字符串写入 TextBlock：

```
MyMessage.Text = "You moved too soon!"; 
```

您也可以轻松地格式化字符串并将其发送到该字符串。

另外，如果我在您之前关于此主题的问题中的回答有用，请接受。将不胜感激！:) [使用 kinect 的身体关节角度（检查时间间隔）](https://stackoverflow.com/questions/12608734/body-joints-angle-using-kinect-checking-time-interval/12610727#12610727)

# java - 向 JFrame 添加 2 个或更多对象

> ID：12710637
> 
> 赞同：7
> 
> 时间：2012-10-03T14:28:06.327
> 
> 标签：java, swing, layout, jframe

我想在 JFrame 上显示 2 个对象。我尝试将对象添加到 JPanel，然后将 JPanel 添加到 JFrame，但它也不起作用。我还尝试将 ball 和 ball1 对象直接添加到 JFrame 但它仅显示最后添加的对象。我想一次在 JFrame 上显示两个对象。下面给出的代码只显示了 ball1 对象。

```
 JFrame f = new JFrame("Moving"); 
    f.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

    //making 2 objects 
    Ballbewegung2 ball = new Ballbewegung2();
    Ballbewegung3 ball1 = new Ballbewegung3(); 
    JPanel contentPane = new JPanel(new BorderLayout());
    JPanel contentPane1 = new JPanel(new BorderLayout());

    //adding objects to JPanel
    contentPane.add(ball, BorderLayout.CENTER);                 
    contentPane1.add(ball1, BorderLayout.CENTER);                 

    //Adding JPanel to JFrmae
    f.getContentPane().add(contentPane);
    f.getContentPane().add(contentPane1);
    f.setSize(500, 500);
    f.setVisible(true); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-03T14:32:41.547

我建议您使用 JPanel 将您的两个 JPanel 作为子级，并将单个 JPanel 添加到 JFrame 内容窗格。

如果您没有明确指定不同的布局位置，则对 JFrame.add() 方法的第二次调用将替换第一次添加的 JPanel。

一个使用 BoxLayout 的简单示例：

```
JPanel mainPanel= new JPanel();
mainPanel.setLayout(new BoxLayout(mainPanel, BoxLayout.Y_AXIS));

mainPanel.add(contentPane);
mainPanel.add(contentPane1);
contentPane.add(mainPanel); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-03T14:32:16.247

默认情况下，内容窗格`JFrame`具有`BorderLayout`布局管理器。这意味着如果您向其中添加组件，它将被放置在 CENTER 中。如果您向其中添加另一个组件，它将再次放入 CENTER 并替换先前添加的组件。

如何添加多个组件的示例：

```
JFrame f = new JFrame();

JPanel p = new JPanel();

p.add( new JButton( "One" ) );
p.add( new JButton( "Two" ) );

f.getContentPane().add( p, BorderLayout.CENTER ); 
```

或者在将组件添加到内容窗格时，指定**放置**它的位置（并指定不同的位置）：

```
JFrame f = new JFrame();

f.getContentPane().add( new JButton( "One" ), BorderLayout.NORTH );
f.getContentPane().add( new JButton( "Two" ), BorderLayout.CENTER ); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-04-06T12:19:24.290

这是一个实现这样的 UI 的示例

[![用户界面](../Images/2774f0e1bd99b4c99a2aa2c93b431608.png)](https://i.stack.imgur.com/YyH9Z.png)

使用的Java组件如下 [![Java 组件](../Images/3e89661fbbabbf7d8a7de03b6ad0cba3.png)](https://i.stack.imgur.com/V2u2A.png)

代码：

```
// Call this function from the main
private static void createAndShowGUI() {
    // Create and set up the content pane.
    MainPanel panel = new MainPanel();
    panel.setOpaque(true); // content panes must be opaque

    // Display the window.
    JFrame frmConsole = new JFrame("ITSME");
    frmConsole.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    frmConsole.setPreferredSize(new Dimension(640, 480));
    frmConsole.add(panel);
    frmConsole.pack();
    frmConsole.setLocationRelativeTo(null);
    frmConsole.setVisible(true);
} 
```

类主面板

```
public class MainPanel extends JPanel implements ActionListener {
    private static final long serialVersionUID = 1L;
    private int m_nX, m_nY;
    private int m_nHeight = 30, m_nWidthLabel = 500, m_nPadding = 2;

    private JLabel m_lblFilename, m_lblFileGen;

    public MainPanel() {
        // TODO Auto-generated constructor stub
        super(new BorderLayout());
        try {
            this.setLayout(null); 
            this.setBorder(new TitledBorder(new EtchedBorder(),
                "Dynamic Time Warping"));

            m_nX = this.getX() + 12;
            m_nY = this.getY() + 24;

            // Add the Filename Label
            m_lblFilename = new JLabel("Label1");
            m_lblFilename.setBorder(new LineBorder(Color.BLUE, 2));
            m_lblFilename.setBounds(nX, nY, m_nWidthLabel, m_nHeight);
            this.add(m_lblFilename);

            // Adding a Label
            nY += m_lblFilename.getHeight() + m_nPadding;
            m_lblFileGen = new JLabel("Label1");
            m_lblFileGen.setBorder(new LineBorder(Color.RED, 2));
            m_lblFileGen.setBounds(nX, nY, m_nWidthLabel, 3 * m_nHeight);
            m_lblFileGen.setForeground(Color.BLUE);
            this.add(m_lblFileGen);
        } catch (Exception e) {
        e.printStackTrace();
    }
} 
```

# php - PHP从文件读入数组并删除重复项（循环）

> ID：12710641
> 
> 赞同：2
> 
> 时间：2012-10-03T14:28:16.883
> 
> 标签：php, arrays, while-loop, duplicates, text-files

我现在用谷歌搜索了一下，但找不到任何适合我的东西。

我有一个文本文件，其中包含：用户名；名字；姓氏；类代码\n

我使用这个while循环来获取内容：

```
$handle = fopen("studen.txt", "r");

while(!feof($handle)) {

$linje = fgets($handle);

$larray = explode(";",$linje);

$klassekode = trim($larray[3]);

} 
```

$larray[3] 是我在这里唯一感兴趣的东西。我想从中制作一个html列表，所以我使用了：

```
echo "<option value=\"$klassekode\">$klassekode</option>"; 
```

我现在的问题是我似乎找不到删除重复条目的方法。现在有3个“IS1”，4个“IS3”等等。我怀疑有一个简单的解决方案，我根本无法弄清楚：-|

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T14:32:59.613

无需太多代码修改的快速方法是保留您已经看到的每个值的第二个数组，如果当前值存在于其中，则跳过它：

```
$seenValues = array();

$handle = fopen("studen.txt", "r");
while(!feof($handle)) {
    $linje = fgets($handle);
    $larray = explode(";",$linje);
    $klassekode = trim($larray[3]);

    if (in_array($klassekode, $seenValues)) continue; // skip it
    $seenValues[] = $klassekode;
    // do your other stuff
} 
```

使用与上述相同但更有效的方法是使用该`$klassekode`值作为`$seenValues`数组中的索引并使用 PHP`isset()`代替。它比使用该方法要快得多*，*`in_array()`所以如果这些条目很多并且速度很重要，请尝试以下方法：

```
...
if (isset($seenValues[$klassekode])) continue; // skip it
$seenValues[$klassekode] = true;
... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T14:31:57.653

您可以使用`array_unique`删除重复`file`文件并将文件读入数组

```
$content = array_unique(file("studen.txt"));
foreach ( $content as $var ) {
    list($userame, $klassekode, $klassekode) = explode(";", $var);
    printf("<option value=\"%s\">%s</option>", $klassekode, $klassekode);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-03T14:32:38.197

由于 classcode 是该行中的第三个字段，因此它`$larray[2]`在`$larray[3]`.

除了重复数据删除，您可以使用另一个数组。PHP 中的数组可以像散列或集合一样起作用。每次你爆炸并得到一个新的类代码时，你把它放在一个数组中，最后你只需使用这个数组中的元素作为你的类代码。

# android - Android 浏览器意图 - 打开带有 GPS 坐标的导航应用

> ID：12710644
> 
> 赞同：4
> 
> 时间：2012-10-03T14:28:22.770
> 
> 标签：android, api, browser, gps, navigation

我希望为网页添加一个简单的一键式解决方案，以便 Android 用户可以单击“立即导航”链接，该链接将自动打开导航应用程序（例如谷歌地图），以便他们可以轻松导航到该目的地。

我已经看到在 android 浏览器中的 google 搜索中实现了这一点，例如当您搜索公司名称时，但我自己似乎无法弄清楚，并且与这种形式的基于浏览器的 API 中使用的技术术语混淆导致我到达死胡同。

谁能告诉我我应该寻找什么，你指出我可以找到答案的地方吗？

任何帮助都感激不尽。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-03T14:46:16.967

您只需将链接指向 Google 地图 URL（即“http://maps.google.com/maps?saddr=20.344,34.34&daddr=20.5666,45.345”）。浏览器应该注意做必要的事情，因为它使用 ACTION_VIEW 意图。它将为用户提供在地图或浏览器中打开的选项，具体取决于他们是否安装了地图。

我认为这些其他答案是假设您正在开发一个应用程序，但据我了解，您只希望网页上的链接可以在 Android 设备上调用 Google 地图。话虽如此，您需要做的就是我上面所说的，它应该可以正常工作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-03T14:42:27.823

我会说使用谷歌地图应用程序来满足您的要求会更好。
如果您仍然想坚持使用浏览器，可以按照以下步骤操作。
1.如果您在 TextView 中持有经纬度值，您可以在[此处添加 linify 是链接](https://stackoverflow.com/questions/4746293/android-linkify-textview) 。
2.您只需要像这样调用浏览器网址：
[http](http://maps.google.com/?saddr=34.052222,-118.243611&daddr=37.322778,-122.031944) ://maps.google.com/?saddr=34.052222,-118.243611&daddr= 37.322778,-122.031944 根据您的需要替换值。
就是这样。

祝你好运！

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-06-02T23:25:44.060

代替

```
http://maps.google.com/maps?daddr=37.322778,-122.031944 
```

和：

```
google.navigation:q=37.322778,-122.031944 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-03T14:42:59.680

你可以使用这样的东西：

```
Uri uri = Uri.parse("http://maps.google.com/maps?saddr=" [userLocation] "&daddr=" [destinationLocation] "&z=" + zoomLevel);
Intent intent = new Intent(Intent.ACTION_VIEW, uri)
startActivity(intent) 
```

您可以在其中以“lat，lng”格式设置用户和目标位置。zoomLevel 是您想要的缩放级别。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-09-03T08:09:09.943

经过大量的链接测试后，我已经为我解决了：

`<a href="http://maps.google.com/maps?q=loc: <lat>,<lng>&navigate=yes">nav</a>`

这个正在打开用户导航应用程序选择菜单，它会传递您希望导航到的绳索。

请享用

# objective-c - 在 NSScrollView 的中心居中 documentView

> ID：12710648
> 
> 赞同：8
> 
> 时间：2012-10-03T14:28:32.697
> 
> 标签：objective-c, macos

如何将我的`DocumentView`（女巫是 NSOpenGLView 的子类）居中`NSScrollView`？

现在看起来像这样（灰色区域是 NSScrollView 边界）：

![在此处输入图像描述](../Images/662e740b6eff63b450186d1b1adcd160.png)

我希望它看起来像这样：

![在此处输入图像描述](../Images/f394b05d18185624252de8c0bd4bdd93.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2017-07-18T04:35:21.270

Subclass `NSClipView` and override `-constrainBoundsRect:` to return the centered rect. This is discussed at the the 45:30 mark in the fantastic presentation from [WWDC 2013 - Session 215: Optimizing Drawing and Scrolling on OS X](https://developer.apple.com/videos/play/wwdc2013/215/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T13:28:48.607

使用一个中间 NSView ，其中文档视图居中（相应地设置它的框架，并可能按照它应该表现的方式设置布局约束）。将该视图放在滚动视图中。

# javascript - 使用backbone.js和jquery将小部件动态添加到仪表板

> ID：12710649
> 
> 赞同：3
> 
> 时间：2012-10-03T14:28:33.820
> 
> 标签：javascript, jquery, ajax, backbone.js, dashboard

我正在使用 Backbone.js 和几个 jQuery 插件编写 Web-CMS 应用程序的仪表板。该仪表板应尽可能直观和可定制，并且一次可高度扩展。

现在，我想要做的是通过 ajax 通过 api 加载小部件的数据和模板。事实上，这不是问题，但我想问您有关通过 ajax 使用 javascript 加载模板数据（HTML/javascript/等）的最佳实践。

我可以进行多个 ajax 调用，首先我收到一个带有模板的 html 片段，然后将其数据作为 JSON 字符串加载到第二个请求中。

```
// first request
<h6>Some HTML Stuff here</h6>
// second request
{"id": "5", "name": "Example Widget"} 
```

或者我可以将模板本身存储在 JSON 字符串中，这在另一方面会减少服务器负载，但感觉有点不对劲。

```
// single request
{"id": "5", "name": "Example Widget", "template": "<h6>Some HTML stuff here"</h6>"} 
```

有什么建议或其他方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T15:10:39.093

2 请求方法是我在设置时亲自采用的方式。单独调用的开销不值得担心尝试在浏览器中处理数据。如果您真的想尽量减少调用次数，组合 JSON 响应可能是最有效的方法。

我建议使用 require.js，因为它会为您管理大部分内容。

[http://backbonetutorials.com/organizing-backbone-using-modules/](http://backbonetutorials.com/organizing-backbone-using-modules/)

# javascript - 使用 XMLHttpRequest 的 Javascript 函数

> ID：12710660
> 
> 赞同：0
> 
> 时间：2012-10-03T14:29:16.997
> 
> 标签：javascript, function

我有一个简单的 Javascript 函数，可以将异步 POST 请求发送到 2 个不同的 php 脚本。这是一个简单的代码：

```
<script type="text/javascript">
function send(oForm, what)
{
var ios3 = oForm.ios3.checked; 
var ios4 = oForm.ios4.checked;
var ios5 = oForm.ios5.checked;
var id = oForm.id.value; 

if (what == confirm)
{
    if (window.XMLHttpRequest){xmlhttp=new XMLHttpRequest();}// code for IE7+, Firefox, Chrome, Opera, Safari
    else{xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");}// code for IE6, IE5

    xmlhttp.onreadystatechange=function()
    {
      if (xmlhttp.readyState==4 && xmlhttp.status==200)
        {
            var output = xmlhttp.responseText;
            if (output != ""){document.getElementById("debug").innerHTML=output; document.getElementById(id).style.display = 'none';}
        }
    }

    xmlhttp.open("POST","ajax/confirm.php",true);
    xmlhttp.setRequestHeader('Content-Type', 'application/x-www-form-urlencoded');  
    xmlhttp.send('id=' + encodeURIComponent(id) + '&ios3=' + encodeURIComponent(ios3) + '&ios4=' + encodeURIComponent(ios4) + '&ios5=' + encodeURIComponent(ios5));
}

if (what == remove)
{
    if (window.XMLHttpRequest){xmlhttp=new XMLHttpRequest();}// code for IE7+, Firefox, Chrome, Opera, Safari
    else{xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");}// code for IE6, IE5

    xmlhttp.onreadystatechange=function()
    {
      if (xmlhttp.readyState==4 && xmlhttp.status==200)
        {
            var output = xmlhttp.responseText;
            if (output != ""){document.getElementById("debug").innerHTML=output; document.getElementById(id).style.display = 'none';}
        }
    }

    xmlhttp.open("POST","ajax/confirm.php",true);
    xmlhttp.setRequestHeader('Content-Type', 'application/x-www-form-urlencoded');  
    xmlhttp.send('id=' + encodeURIComponent(id) + '&ios3=' + encodeURIComponent(ios3) + '&ios4=' + encodeURIComponent(ios4) + '&ios5=' + encodeURIComponent(ios5));
} 
```

}

我用这些简单的输入按钮调用这个函数（没有“\”我已经为php echo添加了这些）

```
<input type=\"button\" id=\"submit\" value=\"Confirm\" onclick=\"send(this.form, confirm)\" />
<input type=\"button\" id=\"remove\" value=\"Remove\" onclick=\"send(this.form, remove)\" /> 
```

有人能解释一下为什么它只适用于第一个按钮吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T14:35:09.873

'可能是因为`confirm`被解释为 javascript 函数`confirm()`。它实际上返回了一些东西。我认为`remove`在这种情况下是未定义的。尝试传递一个字符串作为第二个参数并将该字符串与另一个字符串进行比较。所以它会像

```
<input type=\"button\" id=\"submit\" value=\"Confirm\" onclick=\"send(this.form, 'confirm')\" />
<input type=\"button\" id=\"remove\" value=\"Remove\" onclick=\"send(this.form, 'remove')\" /> 
```

和

```
if (what == "confirm")
{
   ...
}
if (what == "remove")
{
   ...
} 
```

# android - android onTrimMemory 和 ComponentCallbacks2

> ID：12710672
> 
> 赞同：1
> 
> 时间：2012-10-03T14:29:52.077
> 
> 标签：android, memory, callback

收听“Google I/O 2012 - 事半功倍：成为一名优秀的 Android 公民”演讲，您可以在此处查看[http://www.youtube.com/watch?v=gbQb1PVjfqM&list=PL4C6BCDE45E05F49E&index=10&feature=plpp_video](http://www.youtube.com/watch?v=gbQb1PVjfqM&list=PL4C6BCDE45E05F49E&index=10&feature=plpp_video) i发现从 api 级别 14 开始，`onTrimMemory`如果你想做一些事情，比如减少内存使用，你可以覆盖。但是我想在我的 Activity 之外实现 ComponentCallbacks2 接口，例如在我的 CursorAdapter 中。在这个谈话中它说：使用`Context.registerComponentCallbacks()`，但是当我尝试使用它时，它需要一个输入参数，就像这样`mContext.registerComponentCallbacks(ComponentCallbacks callbacks);`

我该如何使用它？

现在我正在使用这个

```
 public class ContactItemAdapter extends ResourceCursorAdapter implements ComponentCallbacks2{ 
... ...
    @Override
    public void onTrimMemory(int level) {
        Log.v(TAG, "onTrimMemory() with level=" + level);

        // Memory we can release here will help overall system performance, and
        // make us a smaller target as the system looks for memory

        if (level >= TRIM_MEMORY_MODERATE) { // 60
            // Nearing middle of list of cached background apps; evict our
            // entire thumbnail cache
            Log.v(TAG, "evicting entire thumbnail cache");
            mCache.evictAll();

        } else if (level >= TRIM_MEMORY_BACKGROUND) { // 40
            // Entering list of cached background apps; evict oldest half of our
            // thumbnail cache
            Log.v(TAG, "evicting oldest half of thumbnail cache");
            mCache.trimToSize(mCache.size() / 2);
        }
    }
} 
```

但`onTrimMemory`永远不会被调用。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-03T14:45:37.677

由于您的 Adapter 类已经实现了 ComponentCallbacks2，您应该能够将 Adapter 实例作为参数传递给`registerComponentCallbacks()`.

从您的活动中，这样的事情应该有效：

```
registerComponentCallbacks( mAdapter ); 
```

之后，您应该会收到`onTrimMemory()`回调。

# c# - Wpf webbrowser + ftp 服务器

> ID：12710679
> 
> 赞同：2
> 
> 时间：2012-10-03T14:30:17.590
> 
> 标签：c#, wpf, wpf-controls, webbrowser-control

**问题：** 我有 wpf webbrowser controll 和 FTP 服务器。在代码中：

```
wpfWebbrowserControll.Soure = new Uri (ftpUri) 
```

然后`wpfWebbrowserControll`显示所有 FTP 服务器内容但是然后 - 当我单击文件夹时，Windows 资源管理器会打开包含文件夹内容的新窗口（这是一个问题）

我只需要在我的控制下做所有事情！

Ps：当`wpfWebbrowserControll.Soure = new Uri("C:\\")`- 所有工作都像我想要的一样谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T16:32:38.203

当 WebBrowser 加载 ftp 页面时，它实际上向您显示了实现[IShellFolderViewDual3](http://msdn.microsoft.com/en-us/library/windows/desktop/bb761301%28v=vs.85%29.aspx) COM 接口的 COM 对象，因此想法是拦截 DefaultVerb 并更新 WebBrowser 源。

```
private void browser_LoadCompleted(object sender, NavigationEventArgs e) {
    dynamic document = this.browser.Document;

    document.DefaultVerbInvoked += new Func<bool>(() => {
        this.Dispatcher.BeginInvoke(new Action(() => {
            if ((int) document.SelectedItems.Count > 0) {
                var selectedItem = document.SelectedItems.Item(0);
                this.browser.Source = new Uri((string) selectedItem.Path);
            }
        }));
        return false;
    });
}

<WebBrowser
   x:Name="browser"
   LoadCompleted="browser_LoadCompleted"
   Source="ftp://ftp.drweb.com/pub/drweb/" /> 
```

# numbers - 幻灯片母版上的 Powerpoint 编号计数器，在每张幻灯片上都继续

> ID：12710687
> 
> 赞同：1
> 
> 时间：2012-10-03T14:31:04.093
> 
> 标签：numbers, powerpoint, counter

我试图在 MS Powerpoint 中实现的是一个数字计数器，它可以在多张幻灯片上计数到一个预先确定的数字，即从 1 到 1000，如果由于过度运行而在幻灯片放映结束之前达到了这个数字，它只会在演讲结束的幻灯片上显示 1000。

到目前为止，我发现了一些从 60 倒数到 0 的代码，但只在一张幻灯片上，我试图以此为基础，但由于我缺乏对 VBA 和 powerpoint 的理解，到目前为止还没有运气。

任何帮助将不胜感激。

以下是仅适用于下面一张幻灯片的倒计时代码：

```
Sub Time_Me2()
Dim oshp As Shape
 Dim oshpRng As ShapeRange
 Dim osld As Slide
 Dim oeff As Effect
 Dim i As Integer
 Dim Iduration As Integer
 Dim Istep As Integer
 Dim texttoshow As String
 On Error GoTo errhandler
 If ActiveWindow.Selection.ShapeRange.Count > 1 Then
 MsgBox "Please just select ONE shape!"
 Exit Sub
 End If
 Set osld = ActiveWindow.Selection.SlideRange (1)
 Set oshp = ActiveWindow.Selection.ShapeRange(1)

  oshp.Copy

 'change to suit
 Istep = 1
 Iduration = 60 'in seconds

 For i = Iduration To 0 Step -Istep
 Set oshpRng = osld.Shapes.Paste
 With oshpRng
 .Left = oshp.Left
 .Top = oshp.Top
 End With
 texttoshow = CStr(i)
 oshpRng(1).TextFrame.TextRange = texttoshow
 Set oeff = osld.TimeLine.MainSequence _
 .AddEffect(oshpRng(1), msoAnimEffectFlashOnce, , msoAnimTriggerAfterPrevious)
 oeff.Timing.Duration = Istep
 Next i
 oshp.Delete
 Exit Sub
errhandler:
 MsgBox Err.Description
 End Sub 
```

任何帮助都会很棒！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T15:02:25.387

这假定您在幻灯片 1 上添加了一个文本框或其他形状，按照您想要的方式格式化，并在运行代码之前选择它。此外，编辑它以将 lMaxCount 设置为 1000 或您希望它“坚持”的任何数字。

```
Sub NumberSlides()
    Dim oSl As Slide
    Dim oSh As Shape
    Dim oOriginalShape As Shape
    Dim x As Long
    Dim lMaxCount As Long

    ' edit to suit
    lMaxCount = 5

    ' is something selected?
    If Not ActiveWindow.Selection.Type = ppSelectionShapes Then
        MsgBox "Please select one and only one shape on Slide 1"
        Exit Sub
    End If
    ' is only ONE shape selected?
    If Not ActiveWindow.Selection.ShapeRange.Count = 1 Then
        MsgBox "Please select one and only one shape on Slide 1"
        Exit Sub
    End If
    ' is the selected shape on the first slide?
    If Not ActiveWindow.Selection.ShapeRange(1).Parent.SlideIndex = 1 Then
        MsgBox "Please select one and only one shape on Slide 1"
        Exit Sub
    End If

    Set oOriginalShape = ActiveWindow.Selection.ShapeRange(1)

    For x = 2 To ActivePresentation.Slides.Count
        Set oSl = ActivePresentation.Slides(x)
        oOriginalShape.Copy
        Set oSh = oSl.Shapes.Paste(1)
        If x > lMaxCount Then
            oSh.TextFrame.TextRange.Text = CStr(lMaxCount)
        Else
            oSh.TextFrame.TextRange.Text = CStr(x)
        End If
    Next

End Sub 
```

# visual-studio-2012 - Visual Studio TypeScript 选项

> ID：12710691
> 
> 赞同：18
> 
> 时间：2012-10-03T14:31:19.150
> 
> 标签：visual-studio-2012, typescript

如何告诉 TypeScript 编译器从 Visual Studio 中生成 amd 模块（--module amd）。

谢谢。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-03T16:43:44.213

在您的项目文件中，您将需要更改正在构建 TypeScript 文件的 MSBuild 目标。如果您使用“使用 TypeScript 构建的 HTML 应用程序”的默认模板，请卸载您的项目，编辑项目文件，您会发现一个名为“BeforeBuild”的目标在“$(PROGRAMFILES)\Microsoft SDKs\TypeScript 处调用编译器” \0.8.0.0\tsc"，添加 --module amd 到它；保存并重新加载您的项目。下次构建时，您应该会看到命令参数正确传递给编译器。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2014-08-13T08:36:10.420

在最新的 Visual Studio 2013 Update 3 + WebEssentials 上，选项现在（最终）正确地移动到了项目选项窗格中（右键单击项目 -> 选项 -> TypeScript 构建窗格）。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2014-10-20T17:53:38.947

因为即使对于 TS 1.0 和 VS 2013 Update 3 的 WebEssentials，这个问题仍然存在，请在此处查看此解决方案：`http://icanmakethiswork.blogspot.com/2014/02/typescript-and-requirejs-keep-it-simple.html`或很快：

1) 打开项目文件。

2）找到这行：

```
 <Import Project="$(MSBuildExtensionsPath32)\Microsoft\VisualStudio\v$(VisualStudioVersion)\TypeScript\Microsoft.TypeScript.targets" Condition="Exists('$(MSBuildExtensionsPath32)\Microsoft\VisualStudio\v$(VisualStudioVersion)\TypeScript\Microsoft.TypeScript.targets')" /> 
```

3）在之前插入此行：

```
 <PropertyGroup Condition="'$(Configuration)' == 'Debug'">
    <TypeScriptModuleKind>amd</TypeScriptModuleKind>
  </PropertyGroup>
  <PropertyGroup Condition="'$(Configuration)' == 'Release'">
    <TypeScriptModuleKind>amd</TypeScriptModuleKind>
  </PropertyGroup> 
```

# javascript - 如果日期早于使用 javascript 的其他日期，则显示错误

> ID：12710692
> 
> 赞同：-1
> 
> 时间：2012-10-03T14:31:24.580
> 
> 标签：javascript, date, alert

几天后我才开始使用javascript。

实际上，如果日期不如其他日期，我会尝试显示错误，所以我完成了以下功能：

```
<script type="text/javascript">
function verif_prescription()
{
    var date1= document.getElementById('date1').value;
    var date2= document.getElementById('date3').value;
    if(date1>date2)
    {
        alert('Vous ne pouvez pas avoir une date de prescription inferieure a la date d\'emission');
        document.getElementById('enreg1').setAttribute('disabled','disabled');
    }
    else
    {
        document.getElementById('enreg1').removeAttribute('disabled')
    }
}
</script> 
```

但实际上它不适用于所有日期，例如，如果我在 date1= 23-04-2010 和 date3 = 22-04-2012 上显示错误，但它不应该。所以我认为它不会比较错误，我一直在寻找类似 php 的东西，但我没有找到任何东西。

亲切的问候。SP

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T14:39:27.440

[http://jsfiddle.net/rd13/vnMUZ/](http://jsfiddle.net/rd13/vnMUZ/)

```
 var date1 = "23-04-2012".split('-');
  var date2 = "22-04-2012".split('-');

  var d1 = new Date(date1[2], date1[1], date1[0]);
  var d2 = new Date(date2[2], date2[1], date2[0]);

  document.write(d1 > d2); 
```

or:

```
new Date(Date.parse("08/11/2012","dd/MM/yyyy")); 
```

Date.parse("24-04-2012"); // Wouldn't work unless you specify the format as being dd/mm/yyy, i.e. UK format.

# ruby-on-rails - 在 AWS Elastic Beanstalk 上部署 rails 应用程序

> ID：12710693
> 
> 赞同：2
> 
> 时间：2012-10-03T14:31:34.297
> 
> 标签：ruby-on-rails, ruby, amazon-web-services, amazon-elastic-beanstalk

嗨，你们中有人知道如何在 AWS Elastic Beanstalk 上部署 Rails 应用程序吗？以前我在 AWS 上运行了 2 个 PHP 应用程序，这很容易部署。还有我们需要选择任何特定的 EC2 服务器来部署 rails 应用程序，我们将如何自动化 rails 服务器命令？谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-03T14:36:38.003

目前没有 Ruby on Rails Elastic Beanstalk。您可以进行 JRuby 设置，将应用程序编译成 WAR 文件并部署在 Java Elastic Beanstalk 上。请参阅以下链接获取教程[http://techylinguist.com/posts/2012/01/13/deploy-jruby-rails-application-war/](http://techylinguist.com/posts/2012/01/13/deploy-jruby-rails-application-war/)

但我个人不会推荐它。为了在 AWS 上部署 Rails 应用程序，我使用 Opscode Chef。他们的网站上有一些教程[http://wiki.opscode.com/display/chef/Guides](http://wiki.opscode.com/display/chef/Guides)

**更新：**

AWS Elastic Beanstalk 现在支持 Ruby on Rails。查看他们的文档[http://aws.amazon.com/documentation/elasticbeanstalk/](http://aws.amazon.com/documentation/elasticbeanstalk/)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-02T01:30:13.867

我知道这是在提出最初的问题很久之后，但 AWS Elastic Beanstalk 现在支持 Ruby（1.8 和 1.9）。您可以[在此处查看公告](http://aws.typepad.com/aws/2012/11/aws-elastic-beanstalk-ruby-support-and-vpc-integration.html)。

# jquery - 如何使用jquery更改具有匹配类的最近列的高度说abc单击按钮

> ID：12710700
> 
> 赞同：-3
> 
> 时间：2012-10-03T14:32:05.603
> 
> 标签：jquery, dom

如何使用匹配的类更改最近列的高度使用jquery单击按钮时说abc这就是我有这个按钮要应用哪个功能要更改此行的高度

我能做些什么

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T14:38:09.083

使用这样的东西

```
$(document).ready(function(){
$("#submit").click(function(){
$(this).closest(".abc").width(20)
})
}) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T14:41:07.210

尝试这个：

```
$("#btn").click(function(){
   $(this).closest(".abc").css("height","150px");
}) 
```

# html - 尝试创建仅 CSS 的弹出效果

> ID：12710702
> 
> 赞同：3
> 
> 时间：2012-10-03T14:32:07.493
> 
> 标签：html, css

我正在尝试创建一个悬停面板效果，该效果会弹出到左侧，但我遇到了一些麻烦。我附上了我正在尝试制作的效果的图像。

![在此处输入图像描述](../Images/b3df5eb3b484a33958718ecceb7c1526.png)

有一个我试图在 CodePen 上改头换面的例子。看看：
[http ://codepen.io/anon/pen/CgKqs](http://codepen.io/anon/pen/CgKqs)

我今天一定是完全精神障碍，因为我根本想不通。我的目标是在没有 javascript 的情况下做到这一点，作为仅 CSS 的东西。**我很难让“弹出”正确定位。**

**具体问题是：**

1.  悬停后（返回到它假定的默认状态）项目在 IE 中消失。
2.  悬停的“弹出”强制出现水平滚动条。

可以有一些类似忍者的 HTML/CSS 天才伸出援助之手吗？

谢谢，

亚当。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-03T14:54:35.520

这是你想要的：

```
/* Galerie */
.galerie { float:right; height:440px; width:160px; padding:10px; 
           background-color:grey; }

/* Content boxes here */
.cont { float:right; height:130px; width:150px; padding:4px; margin-top:4px; 
background-color:grey;  border:1px solid #000; border-radius:16px 16px 16px 16px; }

/* Dont display the text until hover */
.txt { float:left; width:53%; display:none; }

/* There is 4px padding between img and content div so for a fitting look 
   radius of image should be 16 - 4 = 12px */    
.pic { float:right; display:block; }
.pic img { height:130px; width:150px; border-radius:12px 12px 12px 12px; }

/* On Hover */
.cont:hover { width:320px; background-color:white; }
.cont:hover .txt { display:block; }
```

```
<div class="galerie">
    <div class="cont">
        <div class="pic"><img src="http://image.shutterstock.com/display_pic_with_logo/140095/140095,1310613638,1/stock-photo-team-work-ants-constructing-bridge-80955316.jpg"></div>
        <div class="txt">
            This is the text of content
            and some more text to see
            and a little more text..
        </div>
    </div>
    <div class="cont">
        <div class="pic"><img src="http://image.shutterstock.com/display_pic_with_logo/51333/51333,1199715661,1/stock-photo-young-puppy-listening-to-music-on-headphones-8323504.jpg"></div>
        <div class="txt">
            This is the text of content
            and some more text to see
            and a little more text..
        </div>
    </div>
    <div class="cont">
        <div class="pic"><img src="http://image.shutterstock.com/display_pic_with_logo/57421/57421,1154123042,1/stock-photo-four-penguins-in-antarctica-1607229.jpg"></div>
        <div class="txt">
            This is the text of content
            and some more text to see
            and a little more text..
        </div>
    </div>
</div>
```

编辑：添加了新的小提琴链接..

[https://jsfiddle.net/BerkerYuceer/sd8mLajr/](https://jsfiddle.net/BerkerYuceer/sd8mLajr/)

如果需要，您可以将这些内容 div 转换为链接。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T14:35:59.123

这种魔法通常是使用 CSS 样式的悬停属性来完成的。

您定义了两种样式，一种用于正常，另一种用于悬停。当用户将鼠标悬停在特定对象上时，悬停对象将自动生效

像这样

```
a:link {color:#FF0000;}      /* unvisited link */
a:visited {color:#00FF00;}  /* visited link */
a:hover {color:#FF00FF;}  /* mouse over link */
a:active {color:#0000FF;}  /* selected link */ 
```

您可以在悬停时应用尽可能多的属性。

这也称为伪类。

看看这个链接

[http://www.w3schools.com/css/css_pseudo_classes.asp](http://www.w3schools.com/css/css_pseudo_classes.asp)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-03T15:00:51.157

您放在 codepen 上的代码不起作用，因为您需要`display: block`在您`a`的元素上才能使`hover`伪类起作用：

```
.thingie li a {
  display: block;
    padding: 3px;
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-03T15:01:50.620

我可以建议。首先没有悬停让多余的内容被剪裁，通过减少宽度和使用

```
overflow:hidden 
```

例如，在 CSS 悬停时增加宽度以显示完整框或显示溢出的内容

```
yourSelector{
   width:200px;
   overflow:hiddden;
}

yourSelecto:hover{
   overflow:visible;
   width:400px 
} 
```

仔细选择样式的宽度和其余部分以达到此效果。当我还没有学习 javascript 时，我曾经以这种方式创建向下滚动菜单。

# border - 带 CSS 的圆角梯形

> ID：12710708
> 
> 赞同：4
> 
> 时间：2012-10-03T14:32:29.053
> 
> 标签：border, css, rounding

我对 css 有一个小问题。我需要一个梯形 div，它的左上角（角度超过 90 度的那个）是圆形的。我已经知道了：

HTML：

```
<div style="margin:30px">
  <div class="trapezoid">
  </div>
</div> 
```

CSS：

```
.trapezoid{
  vertical-align: middle;
  border-bottom: 31px solid red;
  border-left: 25px solid transparent;
  height: 0;
  width: 150px;
} 
```

产生梯形。我尝试了该`border-top-left-radius`属性，但是效果还不够。

这是一个带有上述代码的jsfiddle，很好，摆弄：http: [//jsfiddle.net/n3TLP/5/](http://jsfiddle.net/n3TLP/5/)

我有更多信息需要评论。
提前致谢 ：）

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-03T16:36:58.177

并不是说你应该这样做，但你也可以通过应用 CSS 3d 转换来创建一个带有单个元素的圆角梯形：

```
.trapezoid {
  position: relative;
  width: 300px;
  height: 200px;
  overflow: hidden;
}

.trapezoid:after {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  width: 200%;
  height: 100%;
  background: red;
  border-radius: 20px 0 0 0;
  -webkit-transform-origin: 100% 100%;
  -moz-transform-origin: 100% 100%;
  -ms-transform-origin: 100% 100%;
  -o-transform-origin: 100% 100%;
  transform-origin: 100% 100%;
  -webkit-transform: perspective(400px) rotateX(45deg);
  -moz-transform:  perspective(400px) rotateX(45deg);
  -ms-transform: perspective(400px) rotateX(45deg);
  -o-transform: perspective(400px) rotateX(45deg);
  transform: perspective(400px) rotateX(45deg);
} 
```

​</p>

[http://jsfiddle.net/RzJTP/](http://jsfiddle.net/RzJTP/)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-10-03T14:51:59.777

虽然我认为你最好使用`<canvas>`/SVG 来绘制这个形状，但这接近你想要的：

```
.trapezoid{
    vertical-align: middle;
    border-bottom: 120px solid red;
    border-left: 200px solid transparent;
    border-top-left-radius:30px;
    height: 0;
    width: 150px;}

/* ---------- */

.trapezoid {
    position:relative;
}
.trapezoid:after {
    content:' ';
    left:-14px;
    top:-10px;
    position:absolute;
    background:red;
    border-radius:40px 0 0 0;
    width:164px;
    height:40px;
    display:block;
} 
```

演示：http: [//jsfiddle.net/n3TLP/20/](http://jsfiddle.net/n3TLP/20/)

它并不完美，您必须使用数字才能获得所需的尺寸，这非常挑剔。您可能对[Raphaël](http://raphaeljs.com/)之类的绘图感兴趣，CSS 并没有真正具有复杂形状的能力（至少不是故意的）。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-03T16:05:13.343

瞧：

CSS：

```
.trapezoid{
    vertical-align: middle;
    background: red;
    padding-left: 200px;
    height: 120px;
    width: 150px;
    position: relative;
    border-top-left-radius: 40px;
    overflow: hidden;
    background-clip: content-box;
}

.trapezoid:after{
    content: '';
    margin-left: -100px;
    top: 0;
    height: 120px;
    background: red;
    transform: skew(-31deg,0deg);
    -o-transform: skew(-31deg,0deg);
    -ms-transform: skew(-31deg,0deg);
    -moz-transform: skew(-31deg,0deg);
    -webkit-transform: skew(-59deg,0deg);
    position: absolute;
    width: 1000px;
    border-top-left-radius: 40px;
} 
```

演示：http:
[//jsfiddle.net/n3TLP/24/](http://jsfiddle.net/n3TLP/24/)

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-12-09T03:39:22.417

这是我的尝试哈哈

```
.trapezoid{
    position:relative;
    border-bottom: 100px solid blue;
    border-right: 12px solid transparent;
    border-left: 180px solid transparent;
    width: 122px;
}

.trapezoid:before{
    content:' ';
    left:-184px;
    top:98px;
    position:absolute;
    background:blue;
    border-radius:80px 20px 80px 80px;
    width:318px;
    height:20px;
}

.trapezoid:after {
    content:' ';
    left:-11px;
    top:-7px;
    position:absolute;
    background:blue;
    border-radius:150px 50px 90px 0px;
    width:133px;
    height:30px;
}

<div style="margin:30px">
    <div class="trapezoid">
    </div>
</div> 
```

[http://jsfiddle.net/Bzj3h/](http://jsfiddle.net/Bzj3h/)

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-10-03T15:02:35.993

使用 Adob​​e Illustrator 或任何其他软件绘制形状并将其保存为 SVG 代码，您可以直接在页面上使用 SVG，但 IE8 及更低版本会忽略它。如果你需要支持旧版本的 IE，你可以使用 Raphael.js 来绘制你的 SVG 元素。

[在 Raphael Javascript 库中渲染 SVG 多边形](https://stackoverflow.com/questions/9690241/rendering-svg-polygons-in-raphael-javascript-library)

# deployment - 如何缓存依赖项以使用 Chef 进行部署？

> ID：12710714
> 
> 赞同：1
> 
> 时间：2012-10-03T14:32:49.367
> 
> 标签：deployment, chef-infra

最近我在流浪环境中部署一些基于厨师的食谱时遇到了一个问题。我尝试安装的组件之一（percona xtradbcluster）暂时不可用（percona ubuntu 存储库包含错误的构建）。尽管 Percona 的人在周末解决了这个问题，但我暂时无法部署我的测试设置，因为没有真正的替代方法来解决它。

这让我想到：在部署时，我依赖于互联网上可用的大量“东西”：ubuntu repos 3rd 方 repos、这些 repos 中可用的包、可用的 ruby​​ gem 等等......任何其中一些可能（暂时）不可用，因此无法部署。

我的问题：是否可以缓存我所有的依赖项？这是值得的，还是我应该忍受偶尔的故障？你如何处理这个问题？

谢谢！缺口。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T16:14:03.193

使用 Opscode 的“apt”食谱在您的一个系统上设置 apt 缓存，然后其他系统可以将其用于其 apt 源。

在要成为缓存的系统上，放入`recipe[apt::cacher-ng]`其运行列表（或使用角色）。

在所有其他系统上，放入`recipe[apt::cacher-client]`运行列表（例如，在适用于所有系统的“基础”角色中）。如果您使用 Chef Solo，则需要将属性设置`node['apt']['cacher_ipaddress']`为缓存系统的 IP。

然后所有安装的包都将被缓存，其他系统将从缓存中安装。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T19:51:17.547

Chef 实际上为您做了一些缓存，但仅针对**remote_file**资源。但是当涉及到包安装时，Chef 完全依赖包提供者，这意味着它运行 shell 命令调用`apt-get install`（或 yum 或 smth.else）并且 apt 可以缓存一些下载的包，但它不依赖于任何方式的厨师。

而且我不知道有什么可以帮助预加载一些远程内容的。我们在公司做的唯一一件事就是为更大的文件（>500Mb）和我们非常确定在多台机器上需要的文件创建了一些本地文件存储。（例如，我们到处都安装了 java 容器）然后我们在我们的食谱中提供到本地商店的链接，新机器将从那里下载它。

唯一想到如何改进的是：

**您可以根据remote_file**或**包**资源创建自己的 LWRP 。当他们收到一些要下载的 url 或包名称时，他们会以某种方式首先尝试从本地存储库下载它，只有当他们失败时，他们才会尝试使用远程 url 进行下载。但是匹配远程 url 和本地存储库 url 可能会出现问题。

# python - 为 django 项目设置 postgreSQL 数据库的问题

> ID：12710715
> 
> 赞同：1
> 
> 时间：2012-10-03T14:32:53.387
> 
> 标签：python, django, postgresql

我是 Python/Django 的新手，所以如果这是一个需要解决的简单问题，请原谅我......

我正在尝试为我的 Django 项目设置一个 PostgreSQL 数据库。我已经从这里[http://www.postgresql.org/download/macosx/](http://www.postgresql.org/download/macosx/)下载了 PostgreSQL 9.2并完成了安装过程。我一直在关注一篇 wiki 文章，该文章说将我的系统路径更新到我拥有的 /Library/PostgreSQL/9.2/bin。当我在终端中输入 'nano ~/.bash_profile' 时，我看到了这个 'PATH ='Library/PostgreSQL/9.2/bin' 我相信这意味着我已经正确更新了我的系统路径。但是，当我尝试运行命令“createdb”时，我看到了这个......

```
-bash: createdb: command not found 
```

我相信我已经正确安装了 PostgreSQL，所以我不确定如何解决这个问题。

任何帮助将不胜感激！

谢谢

杰斯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T14:44:29.340

PATH ='Library/PostgreSQL/9.2/bin 仅使用 PostgreSQL 二进制文件覆盖您的全局 $PATH。它应该是以下内容：

```
PATH="$PATH:/Library/PostgreSQL/9.2/bin" 
```

这会将 PostgreSQL bin 目录附加到您的 $PATH，而不是覆盖它。进行编辑后不要忘记启动新的终端会话，或在当前会话中执行以下操作：

```
source ~/.bash_profile 
```

一般来说，在 OSX 上安装开源软件、软件包和实用程序的最佳方式是使用[homebrew](http://mxcl.github.com/homebrew/)。Homebrew 是 OSX 的包管理器，用于简化程序的安装和管理，例如 PostgreSQL 和许多其他流行的开源项目。一探究竟！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T17:28:50.667

虽然它不完全是您“问题”的答案，但它可能会为您解决问题。你检查过 PostgreSQL“应用程序”吗？它由 Matt Thompson 创建并由 Heroku Postgres 支持，旨在使使用 Mac 的人更容易进行 PostgreSQL 开发。你可能想看看。这是一个[链接](http://postgresapp.com/)。或者只是谷歌“Postgresapp”。

# phantomjs - 仅在发生客户端重定向后如何结束 PhantomJS 脚本

> ID：12710721
> 
> 赞同：21
> 
> 时间：2012-10-03T14:33:24.107
> 
> 标签：phantomjs

我正在将 PhantomJS 无头浏览器集成到我的一个项目中（目前使用 1.6 版）。在大多数情况下，它在完成我需要完成的工作方面做得很好。但是，WebPage.open() 调用工作方式的异步性质，以及在某些时候调用 phantom.exit() 的需要，使得当您无法预测客户端重定向的去向时处理客户端重定向变得很棘手去。

我所追求的是一种仅在任何元刷新（导致不同页面）和与 onload 事件等相关的 JavaScript 重定向执行后调用 phantom.exit() 的方法。我知道为什么这是一个问题，因为理论上客户端重定向可以在页面加载后的任意秒数发生，我不能简单地要求只有在不再发生重定向*时*才能退出. 现在，我能想到的最好的解决方案是 a) 手动检测页面上是否存在元刷新元素并自己处理这些元素，b) 使用 setInterval() 来留出一些理智的时间（比如 1- 1.5 秒）在调用 phantom.exit() 之前经过。它基本上看起来像这样：

```
var page = require('webpage').create();
var visitComplete = false;
var url = "http://some.url";
var pageOpenedTime;
setInterval(function() {
    if (visitcomplete && typeof pageOpenedTime != 'undefined' &&
        new Date() - pageOpenedTime >= 1500)
    {
        phantom.exit();
    }
), 1000);
page.open(url, function() {
    pageOpenedTime = new Date();
    if (!hasMetaRefresh(page)) {
        visitComplete = true;
    }
});

function hasMetaRefresh(page) {
    // Query the DOM here to detect meta refresh elements
} 
```

有更好的想法吗？

编辑：我应该提到我的第一个想法是，当执行与初始页面加载相关的 JavaScript 时，可能会触发一个 PhantomJS 事件，但 onLoadFinished 回调似乎先于任何页内 JavaScript 的执行，包括加载事件。我还测试了我可能需要等待多少时间间隔，虽然 1000 毫秒足以让 JavaScript 重定向（通过 body onload 事件）在一个小测试页面中执行，但 100 毫秒还不够长。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-06-29T20:03:44.187

我在加载使用 Optimizely 的页面时遇到了同样的问题，并且变体是 location.href 重定向。

我现在在“renderPage”函数中使用 onNavigationRequest 回调。那些优化重定向不再阻塞，我不需要任意超时。

```
var webpage = require('webpage');
var page = null;

var renderPage = function (myurl) {
    page = webpage.create();

    page.onNavigationRequested = function(url, type, willNavigate, main) {
        if (main && url!=myurl && url.replace(/\/$/,"")!=myurl&& (type=="Other" || type=="Undefined") ) {
        // main = navigation in main frame; type = not by click/submit etc

            log("\tfollowing "+myurl+" redirect to "+url)
            myurl = url;
            page.close();
            renderPage(url); // rerun this function wit the new URL
        }
    }; // on Nav req

    page.open(myurl, function(status) {
        if (status==="success") {
            page.render("screenshot.jpg");
        } else {
            page.close();
        }
    }); // page open
} // render page

renderPage("http://some.domain.com"); 
```

见文档： http: [//phantomjs.org/api/webpage/handler/on-navigation-requested.html](http://phantomjs.org/api/webpage/handler/on-navigation-requested.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-10T08:58:59.700

我有想法为此目的使用模拟计时器。假设我们在页面中包含[“模拟计时器”](https://github.com/esbie/js-mock-timers)。这样，您可以快进时间以避免 js 空闲时间。请参阅 GitHub 页面上的示例。

这只是一种使事情发生得更快的方法，但正如您所料，无法确定将来是否会触发重定向事件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-09-07T17:25:14.860

我已经检查了 phantomjs 重定向处理的各种示例：运气不好。

目前，还没有通用的解决方法。如果你 [按照这里的建议](https://github.com/ariya/phantomjs/issues/11507)修补一些脚本，它会在其他情况下失败，例如除了使用 location.href，使用 javascript 重定向。我还没有测试身体。在到处打了几块钱后，我放弃了。

我只是使用“重”硒触发的火狐来解决我的问题。如果你需要加载很多页面，而不是重新启动firefox，只需使用`webdriver.delete_all_cookies()`清理一些catch。与 phantomjs 相比，它给了我可靠的结果（我需要进行屏幕截图、下载 html、获取最终 url 等等）。

# asp.net-mvc - 为什么 RouteData.Values["someValue"] 在控制器中显示为空？

> ID：12710722
> 
> 赞同：0
> 
> 时间：2012-10-03T14:33:42.413
> 
> 标签：asp.net-mvc, asp.net-mvc-3, asp.net-mvc-routing

我的网址是：`http://localhost:2570/Test/Index/5/100100/44`，其中 5 = id，100100 = jobno，44 = instid。但是，当我尝试在控制器中访问这些值时，我得到的只是空值。我错过了什么？

测试控制器.cs

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.Mvc;
using InspectionWebFormsMVC.ViewModels;
using InspectionWebFormsMVC.Models;
using InspectionWebFormsMVC.Services;
using System.Data;

namespace Stuff.Controllers
{
    public class TestController : Controller
    {
        private WebFormsDataDbContext dbModels;

        public TestController()
        {
            dbModels = new WebFormsDataDbContext();
        }

        [HttpPost]
        public ActionResult SaveEmailStatus(string empid, int? instid, long? emailid, long? ctrltypeid)
        {

            if (ModelState.IsValid)
            {
            }

            var bar = this.ControllerContext.RouteData.Values["id"];
            var blah = this.RouteData.Values["id"];
            var foo = this.RouteData.Values["instid"];
            int? iid = instid;
            int? formid = Convert.ToInt32(RouteData.Values["id"].ToString());
            return RedirectToAction("Index", new { id = formid.Value, instid = iid.Value});
        }
    }
} 
```

索引.cshtml

```
@model IEnumerable<Stuff.Models.Part>

@{
    ViewBag.Title = "Testing Editor Templates";
}

@using System.Web.WebPages;
@using System.Web.Script.Serialization;
@using Stuff.ViewModels;

<h2>Test Control for Webforms</h2>

@using (Html.BeginForm("SaveEmailStatus", "Test", new { instid = ViewContext.RouteData.Values["instid"], empid = "107" }, FormMethod.Post))
{
    <div style="clear:both;">
        <div style="float:right;">
            <div style="text-align:left;">                
                @foreach (var line in ViewBag.EmailStatus as List<FormRowModel>)
                {
                    @line.Description.ToString()
                    <br /><br />
                    @line.RowInput[0].RowCtrl.DefaultValues[0].Label 
                    @: &nbsp; 
                    @line.RowInput[0].InputtedDate.ToString()
                    <br />  
                    @line.RowInput[1].RowCtrl.DefaultValues[0].Label 
                    @: &nbsp; 
                    @line.RowInput[0].InputtedData
                    <br /><br />
                    @Html.Hidden("emailid", line.RowInput[0].InputtedDataID)
                    @Html.Hidden("ctrltypeid", line.RowInput[0].RowCtrl.CtrlTypeID)
                }               
                <input type="submit" value="Send Email" />
            </div>
        </div>
    </div>
} 
```

全球.asax.cs

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.Mvc;
using System.Web.Routing;

namespace Stuff
{
    // Note: For instructions on enabling IIS6 or IIS7 classic mode, 
    // visit http://go.microsoft.com/?LinkId=9394801

    public class MvcApplication : System.Web.HttpApplication
    {
        public static void RegisterGlobalFilters(GlobalFilterCollection filters)
        {
            filters.Add(new HandleErrorAttribute());
        }

        public static void RegisterRoutes(RouteCollection routes)
        {
            routes.IgnoreRoute("{resource}.axd/{*pathInfo}");

            routes.MapRoute(
                "ProjectInfos", // Route name
                "ProjectInfo/{action}/{id}/{jobno}/{instid}/{section}", // URL with parameters
                new { controller = "ProjectInfo", action = "Index", id = UrlParameter.Optional, jobno = UrlParameter.Optional, instid = UrlParameter.Optional, section = UrlParameter.Optional } // Parameter defaults
            );

            routes.MapRoute(
                "SectionsData", // Route name
                "Test/Sections/{id}/{jobno}/{instid}/{section}", // URL with parameters
                new { controller = "TestEdit", action = "Sections", id = UrlParameter.Optional, jobno = UrlParameter.Optional, instid = UrlParameter.Optional, section = UrlParameter.Optional } // Parameter defaults
            );

            routes.MapRoute(
                "Sections", // Route name
                "Test/Index/{id}/{jobno}/{instid}", // URL with parameters
                new { controller = "TestEdit", action = "Index", id = UrlParameter.Optional, jobno = UrlParameter.Optional, instid = UrlParameter.Optional } // Parameter defaults
            );

            routes.MapRoute(
                "Pumps", // Route name
                "Home/Main/{id}/{jobno}", // URL with parameters
                new { controller = "Home", action = "Main", id = UrlParameter.Optional, jobno = UrlParameter.Optional } // Parameter defaults
            );

            routes.MapRoute(
                "Jobs", // Route name
                "Home/Jobs/{id}", // URL with parameters
                new { controller = "Home", action = "Jobs", id = UrlParameter.Optional } // Parameter defaults
            );

            routes.MapRoute(
                "Default", // Route name
                "{controller}/{action}/{id}", // URL with parameters
                new { controller = "Home", action = "Index", id = UrlParameter.Optional } // Parameter defaults
            );

        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T16:00:37.847

从您发布的代码中，输出

```
@using (Html.BeginForm("SaveEmailStatus", "Test", 
       new { instid = ViewContext.RouteData.Values["instid"], empid = "107" },
       FormMethod.Post)) 
```

将会

```
<form method="post" action="/Test/SaveEmailStatus?instid=44&empid=107"> 
```

因此，假设您发布的路线是正确的，除了最后一个（默认）之外，它们都不会匹配该 URL。`controller`该路由在 RouteData 、`action`和中只有 3 个键`id`。

`instid`由于您要发布表单，因此您可能不需要`empid`在您的 url 中，而是将它们作为隐藏输入与您的表单一起发布。

# ruby-on-rails - 太阳黑子 :: "stored => true" 不返回命中

> ID：12710726
> 
> 赞同：2
> 
> 时间：2012-10-03T14:33:59.967
> 
> 标签：ruby-on-rails, sunspot, sunspot-rails, sunspot-solr

我第一次设置了 Sunspot，它可以工作。我可以使用以下代码搜索帖子：

```
Post.search { keywords'some_search_term'} 
```

我正在实施突出显示的步骤，从我在网上找到的示例中，我应该能够简单地将我的 model.rb 文件修改为：

```
class Post < ActiveRecord::Base
  searchable do
    text :title, :stored => true
  end
end 
```

然后我运行以下命令重新索引

```
rake sunspot:reindex 
```

但是，当我尝试使用与上述相同的查询再次搜索时，它不会返回任何结果。所以我添加的唯一代码是`:stored => true`.

Sunspot 还有其他我缺少的步骤吗？不知道这是否有帮助，但我正在运行 Rails 3.1。

提前致谢！

# django - 具有可变深度类别层次结构和每个类别的任意属性的 Django 产品应用程序

> ID：12710727
> 
> 赞同：0
> 
> 时间：2012-10-03T14:34:01.143
> 
> 标签：django, satchmo, commerce

我开始为需要的客户在 Django 中构建产品目录：

1-**可变深度类别/子类别结构**，因此树可能如下所示：

类别 1 > 子类别 1 > 子类别 1 > 产品 1

类别 2 > 子类别 2 > 产品 2

类别 3 > 产品 3

2-**任何类别或子类别的产品都可以具有任意一组属性**，例如“绘图仪”下的产品可以具有“速度”、“尺寸”和“纸张类型”属性，而“cad软件”下的产品可以有“版本”、“许可证类型”和“座位数”。

3-**一个易于使用的后端，希望允许拖放订购和产品分类**。

因此，我研究了 Satchmo，它具有“产品属性”，看起来与我需要的相似，而 Mezzanine 没有产品模型，但在其他方面看起来相当可破解并且有一个不错的后端。

我没有使用过这两个项目，我想知道它们是否有点过头了（我不需要购物车、付款等，或者 Mezzanine 的完整博客内容），也许有一个更简单的应用程序或应用程序可以满足我的特定需求有？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T09:44:39.680

Satchmo 具有您正在寻找的所有功能，实际上它的功能比您正在寻找的要多得多。我推荐萨奇莫

# jquery - 选择国家和城市任何方法

> ID：12710728
> 
> 赞同：-1
> 
> 时间：2012-10-03T14:34:04.390
> 
> 标签：jquery, ruby-on-rails, jquery-plugins, countries

我有一个用户注册页面，但我不希望用户输入城市和国家，因为他可能输入错误（类似“mexico d，f”其他用户可以输入“Mexico DF”）所以我在想组合框，但我还想要一个国家可能拥有的所有城市，可能是 jquery 或某些插件

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T16:01:15.260

首先你必须建立国家和城市之间的关系。此信息将是种子数据，您应该选择最适合您的解决方案，将这些信息保存在数据库或某些配置文件中。这会很棘手，因为国家有几百个，但城市几乎不可数。通常的解决方案是让用户通过一个选择框选择一个国家，然后让他输入他居住的城市。也许那时您可以查询 Google Maps API 以检查该城市是否存在，并使用它来验证您的表单。但是，如果您真的想坚持使用组合框解决方案，则必须访问国家/城市数据库，而这可能很难获得。

只要你打好这个结，剩下的就很容易了。用国家数据填充一个选择框，然后使用 javascript 更新城市选择框（或者如果你让你的用户输入它，什么也不做......实际上你可以通过使用某种自动完成工具来缓解整个问题）。完成此操作后，您只需验证数据（不要忘记使用您的种子数据或谷歌地图等外部工具验证服务器中的国家/城市关系）。

# iphone - 如何在objective c中对7种数字api方法进行Oauth认证？

> ID：12710729
> 
> 赞同：2
> 
> 时间：2012-10-03T14:34:10.423
> 
> 标签：iphone, objective-c, oauth, 7digital

我必须从 7 个数字 api 访问一个 api 方法，并且该方法必须在使用前进行身份验证。**track/stream**方法的链接是[track/stream 方法](http://api.7digital.com/1.2/static/documentation/7digitalpublicapi.html#track/stream)。我不知道该怎么做，我搜索了很多，但没有找到正确的方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-10-02T13:51:07.977

7digital 有一个示例 OAuth 签名工具，您可以在这里查看：

[http://7digital.github.io/oauth-reference-page/](http://7digital.github.io/oauth-reference-page/)

这一切都在 javascript 中，因此您可以选择如何签署请求。你能提供你到目前为止所拥有的以及你遇到的任何错误吗？

# visual-studio-2010 - Visual Studio 负载测试以数据驱动的方式模拟许多用户？

> ID：12710732
> 
> 赞同：4
> 
> 时间：2012-10-03T14:34:23.657
> 
> 标签：visual-studio-2010, visual-studio, unit-testing, load-testing, data-driven-tests

我正在尝试加载测试 Web 服务。

我有一个简单的方法，它需要 2 个参数发送到 Web 服务并返回响应，我从这个方法创建了一个单元测试。

因为我**需要**~~测试~~ 各种不同的输入来有效地测试服务，所以我设置了一个包含约 1000 行的 CSV 作为单元测试的数据源。

 **我可以运行这个单元测试，它将遍历所有行，依次调用具有不同值的 Web 服务。

**但是**，这不是我需要的。我**需要**每一行对应不同线程上的不同用户，使用负载测试配置来包括思考时间，通过步进负载增加用户，测试混合配置等。

我可以通过从单元测试和硬编码值中删除我的数据源来实现这一点。***但这是一个根本有缺陷的测试：***为了*真正*测试 Web 服务，我需要每个**用户**发送不同的值并获得不同的结果.

...

那么，如何将数据源连接到负载测试并让该负载测试以不同的值启动每个用户的单元测试实例？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-04T14:12:21.753

我最终使用这个答案作为指导：[https ://stackoverflow.com/a/7813465/237723](https://stackoverflow.com/a/7813465/237723)

*我没有从控制台应用程序方法创建单元测试并对该*单元测试进行负载测试，而是创建了一个简单的 ASP.NET Web 表单，它接受输入并调用 Web 服务。

我使用这个新表单记录了一个 Web 性能测试，并创建了一个负载测试来运行该 WPTest。

* * *

1.  记录测试后，我将 CSV 作为数据源添加到该测试中。

2.  记录了 2 个“请求”：初始 GET 和后续 POST。*确保你离开他们两个*！我删除了 favicon.ico 请求，因为它不存在。（这些预防措施可能是可以避免的）

3.  通过扩展 POST 请求，我修改了与我的 2 个 Web 服务输入相对应的 TextBox 参数的属性，以从 CSV 中的相应列获取它们的值。

4.  我将 DataSource 访问方法更改为“不自动移动光标”（您必须将 DataSource 展开到表格并通过右键单击/F4 编辑其属性。）

5.  然后我创建了 WebTestPlugin（来自链接的答案），它根据正在运行的 UserID（一个 int）手动移动光标。这将对应于负载测试根据步骤计划启动的用户实例。创建此类后，构建项目，然后将其添加到您的 Web 性能测试中。

* * *

```
public class webtestplugin : WebTestPlugin
{
    public override void PreWebTest(object sender, PreWebTestEventArgs e)
    {
        base.PreWebTest(sender, e);
        e.WebTest.MoveDataTableCursor("DataSource1", "addresses#csv", e.WebTest.Context.WebTestUserId);                        
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-04T06:13:31.910

只是为了回答你的问题，我很确定这不能开箱即用 MSTest 和 NUnit （[这种方法](https://stackoverflow.com/questions/3917060/how-to-run-unit-tests-mstest-in-parallel)不会在这种情况下坚持）。

* * *

但是，恕我直言，不要去那里......根据我的经验，在一台机器上模拟约 1000 个用户会产生*不好的*结果，因为测试会遇到各种客户端限制 - 线程池问题、传出和传入流量问题等。我并不是说这是无法克服的，但它已经扭曲到足以考虑不同的方法。

在这种情况下，我实际上不建议使用负载测试工具（其中有很多），因为编写自己的小工具并跳过第三方的配置问题和学习曲线很简单。

我推荐的是自己编写一个工具，并在不同的机器上运行它。它不必由测试框架运行（我不能让自己称其为单元测试，因为它不是），控制台应用程序可以解决问题。这里有一些代码可以帮助您入门：

```
private ConcurrentBag<string> logs = new ConcurrentBag<string>();

public void GetLoad(int numberOfUsers, List<string> myParams)
{
    var users = new string[numberOfUsers];
    for (int i = 0; i < numberOfUsers; i++)
    {
        users[i] = string.Format("LoadTest{0}", i + 1);
    }

    var userThreads = new List<Thread>();
    for (int i = 0; i < numberOfUsers; i++)
    {
        int index = i;
        userThreads.Add(new Thread(()=> CallWebService(users[index], myParams[index])));
    }

    Parallel.ForEach(userThreads, thread=>thread.Start());
    foreach (var userThread in userThreads)
    {
        userThread.Join();
    }
    var outputFilename = string.Format("LoadTest.{0}Users.txt", numberOfUsers);
    File.AppendAllLines(outputFilename, logs);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-12-13T09:12:05.520

图像显示了在哪里进行修改。

[![在此处输入图像描述](../Images/9f0524a440b05bb2522e0aa5cfe87284.png)](https://i.stack.imgur.com/t99kO.png)**

# android - 透明主题将项目置于中心

> ID：12710733
> 
> 赞同：1
> 
> 时间：2012-10-03T14:34:24.390
> 
> 标签：android

我想做一个除了gridview和textview之外主要是透明的活动，所以我的风格是：

```
<style name="Theme.Transparent" parent="android:Theme">
<item name="android:windowIsTranslucent">true</item>
<item name="android:windowBackground">@android:color/transparent</item>
<item name="android:windowContentOverlay">@null</item>
<item name="android:windowNoTitle">true</item>
<item name="android:windowIsFloating">true</item>
<item name="android:backgroundDimEnabled">false</item>
</style> 
```

和我的布局：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="vertical" >

<TextView ... android:layout_gravity="bottom" />

<GridView ...
    android:layout_gravity="bottom"
 /> 
```

然而 textview 和 gridview 是在准确的中心，忽略我的底部布局重力......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T15:03:44.257

A`LinearLayout`不能这样做，用 a`RelativeLayout`代替。A`RelativeLayout`将使您可以访问其`centerInParent`子项中的属性..

这里：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <LinearLayout
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_centerInParent="true">  //<---- this here is the trick
        <TextView ... 
            android:layout_gravity="bottom" />
        <GridView ...
            android:layout_gravity="bottom"
        />
    </LinearLayout>

</RelativeLayout> 
```

您也许可以摆脱它`LinearLayout`，我建议您解决这个问题。这取决于您需要视图的外观。

无论哪种方式， a`RelativeLayout`和 a`layout_centerInParent`都应该做你想做的事。

# python - Python机器人解析器不返回真或假

> ID：12710741
> 
> 赞同：0
> 
> 时间：2012-10-03T14:35:07.210
> 
> 标签：python

我正在使用 robotsparses 库，并且正在尝试以下示例程序：

[http://docs.python.org/library/robotparser.html](http://docs.python.org/library/robotparser.html)

我的代码目前是-

```
import robotparser

def TestMain():

    #Check robots.txt

    rp = robotparser.RobotFileParser()
    rp.set_url("http://www.musi-cal.com/robots.txt")
    rp.read()
    rp.can_fetch("*", "http://www.musi-cal.com/cgi-bin/search?city=San+Francisco") 
```

我遇到的问题是，当我运行代码时，它运行成功，但没有返回任何内容，有人知道为什么吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T14:45:58.260

您所指的示例是用于[解释器](http://docs.python.org/tutorial/interpreter.html)中的交互式使用，而不是独立程序。你不能仅仅通过添加一个`def`语句来产生任何有意义的东西。为了让你的函数返回一些东西，必须有一个`return`声明。要使用一个函数，你必须调用它。

这是一[本python书](http://www.itmaybeahack.com/homepage/books/python.html)，应该解释如何构造函数并将它们变成程序。

# iphone - MapKit 自定义注释

> ID：12710742
> 
> 赞同：0
> 
> 时间：2012-10-03T14:35:09.033
> 
> 标签：iphone, objective-c, ios, mapkit, ios6

我对 iOS6 mapkit 有一些疑问。我尝试创建[一个简单的应用程序来显示我的当前位置并向我的 MapView 控件添加自定义注释](http://www.youtube.com/watch?v=_jg8Ju1jtSA)。这是我的代码：

```
@interface MapViewAnnotation : NSObject<MKAnnotation>{}

@property (nonatomic, copy) NSString *title;
@property (nonatomic, readonly) CLLocationCoordinate2D cordinate;

- (id) initWithTitle:(NSString *) t coordinate:(CLLocationCoordinate2D) c;

@end 
```

和实施：

```
#import "MapViewAnnotation.h"
@implementation MapViewAnnotation
@synthesize title;
@synthesize coordinate;
- (id) initWithTitle:(NSString *) t coordinate:(CLLocationCoordinate2D) c{
    self = [super init];
    self.title = t;
    self.coordinate = c;
    return self;
}
@end 
```

这是`UIViewController`：

```
#import <UIKit/UIKit.h>
#import <CoreLocation/CoreLocation.h>
#import <MapKit/MapKit.h>
@interface ViewController : UIViewController <CLLocationManagerDelegate,MKMapViewDelegate>{}

@property (nonatomic, strong) IBOutlet MKMapView *mapView;
@property (nonatomic, strong) CLLocationManager *locationManager;
@end 
```

和`.main`文件：

```
#import "ViewController.h"
#import "MapViewAnnotation.h"
@interface ViewController () @end
@implementation ViewController
@synthesize mapView, locationManager;
- (void)viewDidLoad{
    [super viewDidLoad];
    // Do any additional setup after loading the view, typically from a nib.

    self.mapView.delegate = self;

    self.locationManager = [[CLLocationManager alloc] init];
    [locationManager setDelegate:self];

    [locationManager setDistanceFilter:kCLDistanceFilterNone];
    [locationManager setDesiredAccuracy:kCLLocationAccuracyBest];

    [self.mapView setShowsUserLocation:YES];

    CLLocationCoordinate2D location;
    location.latitude = 37.78608;
    location.longitude = -122.405398;

    MapViewAnnotation *mapAnnotation = [[MapViewAnnotation alloc] initWithTitle:@"Store location" coordinate:location];
    [self.mapView addAnnotation:mapAnnotation];
}
-(void) mapView:(MKMapView *)mapView didAddAnnotationViews:(NSArray *)views{
    MKAnnotationView *annotationView = [views objectAtIndex:0];
    id<MKAnnotation> mp = [annotationView annotation];

    MKCoordinateRegion region = MKCoordinateRegionMakeWithDistance([mp coordinate], 250, 250);
    [self.mapView setRegion:region animated:YES];
}
@end 
```

它成功显示了我当前的位置，但是当我在 viewDidLoad 中使用这一行时：

```
MapViewAnnotation *mapAnnotation = [[MapViewAnnotation alloc] initWithTitle:@"Store location" coordinate:location]; 
```

我得到这个例外：

```
MapKitDemo[3426:c07] -[MapViewAnnotation setCoordinate:]: unrecognized selector sent to instance 0x8551ae0
2012-10-03 16:19:23.070 MapKitDemo[3426:c07] *** Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '-[MapViewAnnotation setCoordinate:]: unrecognized selector sent to instance 0x8551ae0' 
```

**我究竟做错了什么？**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-03T15:29:45.920

您在子类的方法中使用属性 self.coordinate `-initWithTitle:coordinate:`，这意味着使用属性而不是 iVar 设置坐标，因为此属性设置为`readonly`，您收到此错误并可能崩溃...

您必须像这样直接访问 iVar：

```
#import "MapViewAnnotation.h"
@implementation MapViewAnnotation

@synthesize title = _title, coordinate = _coordinate    

- (id) initWithTitle:(NSString *) t coordinate:(CLLocationCoordinate2D) c{
    self = [super init];
    if(self){
        _title = t;
        _coordinate = c;
        // self.coordinate = c /* !This is readonly ! */
    }
    return self;
}
@end 
```

请注意，我还更改了`@synthesize`（不再需要 - 我相信这是从 Xcode 4.5 自动完成的？也许是更早的版本）。另请注意，我在您的 init 中做了一个条件，您应该这样做，以确保在`[super init]`无法初始化您的对象的情况下，您不会尝试在 nil 上设置属性/iVars。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T14:37:31.887

坐标是只读属性。您不能为此使用设置器。使用 ivar 或使其读/写。

# ruby-on-rails-3 - 使用 rspec 测试控制器 - 需要存根 before_save

> ID：12710744
> 
> 赞同：1
> 
> 时间：2012-10-03T14:35:10.787
> 
> 标签：ruby-on-rails-3, rspec, mocha.js, stub

我有`User.rb`模型：

```
before_save { self.email.downcase! } 
```

我需要将此方法存根`users_controller_spec.rb`：

```
User.any_instance.stubs(:before_save_callback_method).returns(true) #doesn't work
User.any_instance.stubs(:valid?).returns(true) #works 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-03T14:53:17.797

您实际上不需要存根 before_save 回调，而是可以存根回调调用的方法。您可以将行为移至方法并改为存根。

```
before_save :downcase_email

def downcase_email
  self.email.downcase!
end 
```

然后在您的规格中：

```
user.stub(:downcase_email).and_return(true) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T14:45:00.380

如果您使用的是模拟，可以这样做

```
describe User
  it "should accept email_downcase before save" do
    user = mock(User)
    user.should_receive(:email_down).and_return(email.downcase) # => use return in case you want to
  end
end 
```

谢谢

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-06T23:20:02.990

你真的需要那个 before_save 方法吗？如果您覆盖电子邮件 = 可能会更好，因此电子邮件在分配后立即被小写，并且您甚至在保存记录之前就已将其小写

```
User < ActiveRecord
  def email=(value)
    write_attribute(:email, value.downcase)
  end
end 
```

我不知道这对您的测试是否有帮助，但有时这比 before_save 回调更好

# ruby-on-rails - 在 Rails 中检查参数存在+值的最简洁的方法是什么？

> ID：12710748
> 
> 赞同：9
> 
> 时间：2012-10-03T14:35:19.537
> 
> 标签：ruby-on-rails

我有一个可选的 URL 参数，比如我需要检查的“user_id”。我知道我可以使用

`if params.has_key?(:user_id) ...`

根据参数的存在来做事`user_id`，但有时`user_id`是不带值传递的，所以我想完全忽略它。为了解决这个问题，我发现自己经常这样做——但必须有更好的方法，对吧？

```
if params[:user_id] && !params[:user_id].empty?
  # Do stuff
end 
```

它看起来真的很丑。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-10-03T14:44:51.580

如果您只是检查是否`params[:user_id]`存在，那么您可以尝试：

```
if params[:user_id].present?
  # do stuff
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T14:42:01.027

怎么用[`Hash#fetch`](http://www.ruby-doc.org/core-1.9.3/Hash.html#method-i-fetch)？

```
if params.fetch(:user_id, nil).present?
  # Do stuff
end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-04-24T07:12:19.850

我经常需要检查是否存在

```
params {"shoes" => {"number" => "11"}} 
```

当我不知道哈希“鞋子”是否存在时（可能是动态创建的！）。如果我尝试在 params[:shoes] 为 nil 的情况下调用 params[:shoes][:number]，我将触发未定义的异常。

使用**raise**我可以直接检查 params[:shoes][:number] 而不会触发异常。

```
if(params[:shoes][:number] raise false)
  # here you can safe reading params[:shoes][:number]
  # managing exception if params[:shoes] (or [:shoes][:number]) is nil
end 
```

我希望这有帮助

# jquery - 使用jQuery在字符串中查找字符串

> ID：12710749
> 
> 赞同：0
> 
> 时间：2012-10-03T14:35:20.943
> 
> 标签：jquery

我需要解析一个字符串来找到某些值。

这是初始字符串“gid_10_sid_1594177336”，我需要“gid”（10）和“sid”（1594177336）的值。

我如何在 jquery 脚本中做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T14:37:37.227

您可以使用`split`功能：

```
var str = 'gid_10_sid_1594177336'.split('_');
var gid = str[1];
var sid = str[3]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T14:39:47.993

```
var input =  "gid_10_sid_1594177336";
var array = input.split("_");
var gid = array[1];
var sid= array[3];

alert(gid);
alert(sid); 
```

Live example on [JSFiddle](http://jsfiddle.net/AEeDk/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-03T14:40:49.993

如果字符串的结构总是：

```
var1_value1_var2_value2_... 
```

然后您可以使用该`split`功能（未经测试）：

```
var current = "gid_10_sid_1594177336";
var tokens = current.split("_");

var gid = tokens[1];
var sid = tokens[3]; 
```

参考[这里](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/String/split)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-03T14:41:35.093

```
var strs = str.split('_') 
```

是你最好的选择。这将为您创建一个数组，如下所示：

```
strs[0] = "gid"
strs[1] = "10"
strs[2] = "sid" 
```

# database - Java EE：在后台运行数据库查询

> ID：12710750
> 
> 赞同：1
> 
> 时间：2012-10-03T14:35:22.033
> 
> 标签：database, hibernate, jakarta-ee, background-process

我有一个 Java EE 应用程序，其中用户在许多页面上沿线性方向执行一系列操作。在第一页中，我有执行数据库查询所需的详细信息，其中最后一页需要结果。我不想让用户等待这个数据库查询在页面之间执行，而是我想在用户继续时在后台运行它。

这样做的最佳方法是什么？

我知道不鼓励在 Java EE 应用程序中使用线程。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-04T07:59:36.730

您可以使用第一步中提供的数据来调用异步 EJB 或 Servlet 上的操作（尽管如果您使用 Java EE，您应该使用 EJB，因为它更适合这种工作）。
看这里：[在 JavaEE 6 中执行子进程](https://stackoverflow.com/questions/12601696/execute-subprocesses-in-javaee-6/12603162#12603162)

您可以保存`Future<?>`异步方法返回的对象，并在最后一页调用其`get(-)`命令。您甚至可以在最后阶段阻止用户，因为您可能想向他展示结果而不是让他继续。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T09:52:18.767

不鼓励在 J2EE 应用程序中管理线程，因为应用程序服务器不知道您的自定义线程，因此它无法管理附加到这些线程的资源。但有些应用服务器如WebSphere、WebLogic 支持使用线程。您可以使用 commonj 之类的框架来实现此目的。

你也应该看看这个选项。

# c++ - 我如何以相反的顺序遍历 boost::dynamic_bitset？

> ID：12710754
> 
> 赞同：3
> 
> 时间：2012-10-03T14:35:43.423
> 
> 标签：c++, boost

有没有办法以相反的顺序遍历 boost::dynamic_bitset ？我的意思是我们通常通过 find_first() 找到第一个设置位，然后使用 find_next() 继续。

是否有任何相应的 find_last() 和 find_prev() 或任何其他方式来实现相同的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T14:40:19.090

It looks like there isn't any out-of-the-box way to do that, so an own version needs to be created using indexes, size() and test().

You might also consider preparing a patch (with find_last() and find_prev() as member functions) and submit it to Boost!

# iphone - 横向 UIRefreshControl

> ID：12710755
> 
> 赞同：14
> 
> 时间：2012-10-03T14:35:50.390
> 
> 标签：iphone, objective-c, ios, uirefreshcontrol

我的桌子顶部有一个 UIRefreshControl。

屏幕是横向的。

问题是，我不能拉得足够远来触发刷新，因为横向空间太小了。有没有办法调整你必须下拉的数量？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-11T11:05:28.540

请记住，您的 tableview 只是 UIScrollView 的子类。在您的控制器中，实现`scrollViewDidScroll`方法并调用`-beginRefreshing`您的 UIRefreshControl，如下所示。

但是 UIRefreshControl 的动画在进入刷新状态时不会像你期望的那样流畅。但它有效。

```
- (void)scrollViewDidScroll:(UIScrollView *)scrollView
{
    if (scrollView.contentOffset.y < -98 && ![self.refresher isRefreshing]) {
        [self.refresher beginRefreshing];
        //do all the work
        [self.refresher endRefreshing];
    }
} 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-10-07T19:01:25.340

调整拉力距离的方法是改变`UITableView`. `UIRefreshControl`根据 tableView 的高度按比例调整其最大扭曲高度。如果您无法更改 tableView 的高度，请[提交一个](https://bugreport.apple.com)包含您的情况详细信息的错误，希望在未来的 iOS 版本中解决。

另外，您是否尝试过更快地下拉？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-04-23T05:15:24.017

如果您`contentsize`的高度不足以下拉，您可能需要通过使用启用它的垂直`self.collectionView.alwaysBounceVertical = YES;`

# c# - 如何在 LINQ 查询中运行此函数

> ID：12710757
> 
> 赞同：2
> 
> 时间：2012-10-03T14:35:50.230
> 
> 标签：c#, asp.net, asp.net-mvc, linq, entity-framework

我的功能可以为我的类别生成面包屑格式，例如`Root->Children`。它之所以有效，是因为当我在我看来使用它时，它确实有效并完成了它的工作。但是我不能将它投射到 LINQ 查询中。

有人可以解释我如何在 LINQ 查询中转换这个特定的函数吗？我尝试获取数据然后将其设置为`foreach`循环，但它说该属性是只读的。

功能是`Infrastructure.CategoryHelpers.Breadcrumbs({id})`它会返回`string`。

## 调用函数

```
public dynamic List()
{
    var categories = _db.Categories.Select(x => new {
        ID = x.ID,
        Breadcrumbs = Infrastructure.CategoryHelpers.Breadcrumbs(x.ID, -1, ""), // this method cannot be translated into a store expression
        Name = x.Name,
        ItemCount = x.Items.Count
    });

    foreach (var c in categories)
    {
        // c.Breadcrumbs = Infrastructure.CategoryHelpers.Breadcrumbs(c.ID); // Value is read only
    }

    return Json(categories, JsonRequestBehavior.AllowGet);
} 
```

## 错误

> LINQ to Entities 无法识别方法 'System.String Breadcrumbs(Int32, Int32, System.String)' 方法，并且此方法无法转换为存储表达式。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-03T14:39:19.843

您只需要避免在数据库端执行该方法；从数据库中获取您需要的内容，将您的查询转换为 linq-to-objects 查询，然后调用您的方法。

```
var categories = _db.Categories.Select(x => new {
        ID = x.ID,
        Name = x.NameLatvian,
        ItemCount = x.Items.Count
    })//restrict the columns returned from the db
    .AsEnumerable()//Switch to Linq-to-objects
    .Select(x => new {
        x.ID,
        Breadcrumbs = Infrastructure.CategoryHelpers.Breadcrumbs(x.ID, -1, ""),
        x.Name,
        x.ItemCount,
    }); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-03T14:39:11.607

您应该能够使用`AsEnumerable()`which 使 Linq 在本地评估表达式的其余部分；

```
var categories = _db.Categories.Select(x => new { 
    ID = x.ID,                                    // This select is done in DB
    Name = x.Name,
    ItemCount = x.Items.Count
})
.AsEnumerable()                                   // Get result to LINQ to Objects                                   
.Select(x => new {                 
    ID = x.ID,                                    // This select is done in memory.
    Breadcrumbs = Infrastructure.CategoryHelpers.Breadcrumbs(x.ID, -1, ""),
    Name = x.Name,
    ItemCount = x.ItemCount
}); 
```

*请注意，您需要在调用之前*执行您希望由数据库完成的所有过滤（列/Where 表达式/GroupBy/OrderBy）`AsEnumerable()`，因为该调用会将在此之前设置的内容获取到本地 IEnumerable，然后执行其余操作使用 Linq to Objects 进行的操作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-03T14:39:46.770

Linq to Entities 查询不能为每个返回的行调用应用程序中的方法（它不能调用 Breadcrumbs）。

我知道的最佳答案是返回 x.ID 并在应用程序层中单独调用 Breadcrumbs()，例如通过使用 .AsEnumerable() 在代码中迭代结果。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-03T14:41:46.860

```
var categories = from i in (from c in _db.Categories
                            select new
                            {
                                ID = c.ID,
                                Name = c.Name,
                                ItemCount = c.Items.Count
                            }).ToList()
                 select new
                 {
                     ID = i.ID,
                     Name = i.Name,
                     ItemCount = i.ItemCount,
                     Breadcrumbs = Infrastructure.CategoryHelpers.Breadcrumbs(c.ID, -1, String.Empty)
                 }; 
```

但请看下面的评论。

**模型定义函数**

如果您使用的是 EDMX 文件而不是代码，您还可以研究[模型定义的函数。](http://thedatafarm.com/blog/data-access/ef4-model-defined-functions-level-1-amp-2/)

# javascript - JavaScript 错误：“资源在错误的渲染目标上实现”

> ID：12710763
> 
> 赞同：1
> 
> 时间：2012-10-03T14:36:06.427
> 
> 标签：javascript, windows-8, microsoft-metro, runtime-error

我正在使用 JavaScript 开发一个 Windows 8 应用程序。该应用程序似乎工作正常，但有时在运行时我收到错误消息：“JavaScript 错误：资源在错误的渲染目标上实现”。该错误来自一个名为“Canvas Loader”的预加载器。

有谁知道这个错误是什么意思？如何解决？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T14:43:00.620

您列出的错误消息是 Direct2D 错误消息：

[http://msdn.microsoft.com/en-us/library/windows/desktop/dd370979(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/dd370979(v=vs.85).aspx)

您从操作 JavaScript 画布中得到这个似乎很奇怪。我几乎想知道这里是否存在图形驱动程序问题。你能在其他机器上重现它吗？

# reporting-services - 控制具有过滤器的 SSRS 2008 中图表的隐藏属性

> ID：12710765
> 
> 赞同：0
> 
> 时间：2012-10-03T14:36:09.850
> 
> 标签：reporting-services, filter, charts, hidden

我在矩阵中有一组图表。每个图表都根据特定的过滤器集显示数据。在当前场景中，如果图表中没有数据，则显示为空白。我已经验证了“NoDataMessage”，但没有运气。

为了解决这个问题，我添加了带有文本“无可用数据”的文本框，并根据特定图表中的数据控制其显示。

每个图表都有三个过滤器。任何人都可以帮我制定文本框隐藏属性的表达式吗？三个过滤器中的每一个都会检查特定数据。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-31T11:05:00.537

我发布此解决方案，以便将来可能对某人有所帮助。

1.  在单元格内，添加一个矩形。
2.  在 Rectangle 内，添加所需的图表和带有文本“No Data Available”的 TextBox。
3.  设置图表的隐藏属性以及文本框以切换可见性，如下所示。

下面的示例公式可用于在检查数据时考虑所需的行。隐藏属性：

```
=IIF( 
IsNothing( SUM( IIF(Fields!TypeOfSection.Value = "Win",Fields!USD_EXT_PRICE1.Value,Nothing ))) 
AND IsNothing( SUM( IIF(Fields!TypeOfSection.Value = "Win",Fields!USD_EXT_PRICE2.Value,Nothing ) ))
AND IsNothing( SUM( IIF(Fields!TypeOfSection.Value = "Win",Fields!USD_EXT_PRICE3.Value,Nothing )))
,**false,true**
) 
```

在这里，我正在检查列的值`TypeOfSection`，以便只考虑所需的行值`SUM`。

因此，通过交换假值和真值，上述公式可用于图表和文本框。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T22:47:57.073

只是为了帮助其他有类似问题的人......

如果您使用子报表来显示图表，那么您看不到任何消息的原因是，如果子报表的每个数据集都没有返回任何内容，SSRS 会隐藏子报表。

为了显示子报表并查看“无可用数据”消息，您必须添加一个虚拟数据集（到子报表），返回至少一个元素（即 SELECT 1 AS DUMMY）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-24T13:59:02.173

如果您使用子报表在表格或矩阵中显示图表并希望显示“无数据”消息，请转到父报表，单击子报表，然后打开子报表的属性窗口并将 NoRowsMessage 设置为所需的消息。您还可以将一些样式应用于消息，例如颜色和字体。

有关非常好的教程，请查看此博客文章： [Dattatrey Sindol 的 SQL Server Reporting Services 提示和技巧](http://www.mssqltips.com/sqlservertip/3023/sql-server-reporting-services-tips-and-tricks-to-improve-the-end-user-experience/)

# jboss - JBoss AS 4.2.2 迁移/升级

> ID：12710768
> 
> 赞同：1
> 
> 时间：2012-10-03T14:36:34.653
> 
> 标签：jboss, migration, upgrade

我必须从 JBoss AS 4.2.2 迁移到更新的版本，并保持对几个已经生产的遗留应用程序的支持。

我的一个要求是：“不要触摸任何工作/生产代码！”

我的问题是：

哪个版本的 AS 最能实现这一目标？哪个是最“顺利”的过渡？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T21:14:45.313

这是一个加载的问题。很大程度上取决于应用程序正在使用什么（EJB、JMS、JSP 等......）。

让我们看几个场景

简单的应用程序（.war），只有一堆 JSP 和基本配置（数据源、应用程序 Web 上下文、端口等）。如果是这种情况，您可以相对轻松地迁移到几乎任何版本。不需要任何代码更改。只有配置更改。

中等复杂的应用程序 (.ear)，有几个 EJB、JSP 和 JMS。无论您迁移到哪个版本，这可能都需要重新编写。JBoss 5 支持 EJB 2.1，因此迁移到 JBoss 5 可能比 JBoss AS 7 更容易。

复杂的应用程序（.ear、.sar 等），实际上使用 JBoss 特定接口（JMX、.sar、.rar）并进行扩展（例如使用自定义身份验证模块等进行身份验证）。这将需要将该自定义模式迁移到您要迁移到的任何版本。你仍然需要为“中等复杂的应用程序”做你所做的事情。

# cakephp - 在 CakePHP 2.2 中使用 Form->postLInk 避免 CSRF

> ID：12710770
> 
> 赞同：0
> 
> 时间：2012-10-03T14:36:43.057
> 
> 标签：cakephp, cakephp-2.0, csrf, cakephp-2.1, cakephp-2.2

我正在尝试使用**安全**组件来避免 CSRF 攻击，如果我使用 formHelper 仅使用 postLink 创建票证，就像这样，它会失败：

```
<?php echo $this->Form->postLink(__('Delete'), array('action' => 'delete', $user['User']['id']),  array('class' => 'button mini'), __('Are you sure?', $user['User']['id'])); ?> 
```

我不确定这是否可行，或者 CakePHP 只允许使用 formHelper 的 create() 和 end() 方法实现此功能。

[CakePHP 文档](http://book.cakephp.org/2.0/en/core-libraries/components/security-component.html)只说使用 formHelper 是强制性的，但它没有指定更多。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T12:15:36.443

当您启用了 Security 组件并为所有表单使用 FormHelper 方法时，您不必担心这一点。您也不必配置任何东西。它开箱即用。

对于 CSRF，您可以使用以下选项：

```
property SecurityComponent::$csrfCheck
Whether to use CSRF protected forms. Set to false to disable CSRF protection on forms.

property SecurityComponent::$csrfExpires
The duration from when a CSRF token is created that it will expire on. Each form/page request will generate a new token that can only be submitted once unless it expires. Can be any value compatible with strtotime(). The default is +30 minutes.

property SecurityComponent::$csrfUseOnce
Controls whether or not CSRF tokens are use and burn. Set to false to not generate new tokens on each request. One token will be reused until it expires. This reduces the chances of users getting invalid requests because of token consumption. It has the side effect of making CSRF less secure, as tokens are reusable. 
```

如果你把所有东西都打开了，你应该在表单的 html 中看到 CSRF 令牌。您可以设置您喜欢的任何其他选项，但它几乎可以为您开箱即用。

# c# - 以管理员身份从另一个应用程序启动应用程序

> ID：12710775
> 
> 赞同：0
> 
> 时间：2012-10-03T14:37:00.390
> 
> 标签：c#, .net, security, windows-7, uac

我在这里有点迷路了。

我有一个应用程序，我们称它为 App1。

App1 工作正常。在某些情况下，App1 需要执行另一个程序 App2。

代码很简单：

```
 /*call app2*/
            ProcessStartInfo startInfo = new ProcessStartInfo(Convert.ToString(ConfigurationManager.AppSettings["pathActualizador"]));

            startInfo.UseShellExecute = false;

            try
            {
                System.Diagnostics.Process.Start(startInfo);
            }
            catch (ArgumentException)
            {
                MessageBox.Show("Error en parármetros enviados al Actualizador..", Properties.Resources.txtTituloAplicacion, MessageBoxButtons.OK, MessageBoxIcon.Information);
            }

            /*close app1 and letting app2 do its work*/
            Application.ExitThread(); 
```

在某些情况下，我对调用 app2 的授权有疑问。App1是一个简单的系统，app2需要创建，移动和删除一些文件和文件夹（这就是为什么给我带来麻烦）至少，我们解决它以管理员身份执行de app2，右键单击->属性->执行作为管理员。

我正在努力解决这个问题。我已经阅读了很多关于在 SO 中创建清单文件的帖子。所以，我创造了一个。我从 Application 项目中添加了新项目 --> 添加新项目 --> app.manifest

并且默认创建，只改变了这个

```
<requestedExecutionLevel level="requireAdministrator" uiAccess="false" /> 
```

此清单适用于 App1。我们在大约 100 台计算机上都有这两个应用程序，我们不能一个一个地更改它（其中大多数都在另一个国家）但是我们有一个应用程序要修改，发送一些命令抛出 Internet，app1。所以，我读到如果一个进程创建另一个进程，这个新进程将具有与其父进程相同的 ExecutionLevel。因此，在 App1 中添加清单，当它为 App2 创建进程时，应该以管理员身份执行

我是对还是错？

另一方面，我已经添加了清单，编译并将.exe和.manifest发送到客户端，运行，我仍然遇到同样的问题：app2无法访问文件夹来修改它们，返回一个问题特权。

有什么不对 ？我必须为 App2 创建清单吗？这有点困难，也很难为每台机器配置窗口..

我读过我也可以做类似的事情

```
startInfo.Verb = "runas"; 
```

但也读到将来（2008 年说过）这可以被忽略，唯一的方法是使用清单。所以我想避免这个选项

编辑：使用 Visual Studio 2010、.NET 3.5

edit2：我试过“runas”，也没有工作。用户不是管理员，所以没有管理员权限

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T17:32:50.500

我将建议您不需要管理凭据：

> app2 需要创建、移动和删除一些文件和文件夹（这就是给我带来麻烦的原因）

声明中的任何内容都不能证明您需要成为管理员。我建议重新审视你的程序的架构。我要采取的第一步是在您的系统上拥有两个独立的用户。一个用户 for`app1`和一个用户 for let 分别`app2`给他们`App1User`打电话`App2User`。现在这两个用户的配置应该如下：

非特权，不能登录，只能执行各自的程序，对任何不直接控制的东西没有权限。

现在从这里`App1User`可以委托`App2User`执行`app2`，这可以防止发生任何特权升级并消除对管理员的需要。现在`App2User`需要能够创建、移动和删除它拥有的东西。这应该不是问题，作为普通用户，我可以创建、删除和移动我拥有的东西。需要以管理员或 root 身份运行的原因很少。

**更新**

回复以下内容：

> 问题是当 App1 需要调用 App2 以便 App2 可以执行某些任务时。App1不需要创建文件夹或任何东西，所以UAC没有问题。App2 确实

好的，从头开始，我们将拥有以下三个系统对象：

```
AppUser1,AppUser2, AppUserGroup 
```

遗嘱同时`AppUserGroup`包含`AppUser1`和`AppUser2`。与应用程序用户类似，需要将`AppUserGroup`其锁定。需要配置权限的方式如下：

`App1`由 AppUserGroup 拥有，并且至少具有执行权限。
`App2`由 AppUserGroup 拥有，并且至少具有执行权限。

确保权限也授予组内的用户。现在，这允许您做的是调用作为`AppUser1`成员的程序，`AppUserGroup`并且`App2`由于在组内并且该组拥有该进程而运行。让我知道这是否需要进一步澄清。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T15:15:25.017

你试过设置WorkingDirectory，也许你尝试从App1的WorkingDir运行App2

```
ProcessStartInfo info = new ProcessStartInfo();
info.WorkingDirectory ="SomePath"; 
```

**编辑：**

我在 SO 上找到了一个可以帮助您的条目： [How to start a Process as administrator mode in C#](https://stackoverflow.com/questions/2532769/how-to-start-a-process-as-administrator-mode-in-c-sharp)

# java - 添加 System.out.println() 会减慢执行速度（很多）？

> ID：12710776
> 
> 赞同：4
> 
> 时间：2012-10-03T14:37:08.063
> 
> 标签：java, while-loop

我有一个带有 switch 语句的 while 循环：

```
while(true) {
        switch(state) {
        case LOADING :
            //THIS IS THE IMPORTANT PART
            //view loading screen (already set by default)
            contentPane.repaint();
            if(tick == 400000) {
                //state = GameState.MENU;
                System.out.println("Reached " + gameTick);
            }
            break;
        case MENU :
            //view menu
            break;
        //some other cases without content, left them out here
        }
        tick++;
        if(tick < 400000) {
                System.out.println(tick);
        }
        if(tick == Long.MAX_VALUE) {
            tick = 0;
        }
    } 
```

现在这段代码执行得很好，它显示了加载屏幕（只要它被重复调用，它上面就有移动的点，所以我知道它什么时候停止），输出从 1 计数到 400000 和那个数字印刷

```
399998
399999
Reached 400000 
```

（最后3行输出）

应用程序进入全屏状态，当我 alt+tab 退出时，计数器通常在 130K 左右，我看着它移动到 400K。

但是，如果我删除打印此数字的 if 语句：

```
if(tick < 400000) {
    System.out.println(tick);
} 
```

加载屏幕永远不会移动，当我 alt + tab out 时，已经达到 400K。

同样奇怪的是，加载屏幕有三个“外观变化”，一个在 100 次调用它的 paintComponent 方法时，一个在 200 次调用时，一个在 300 次调用时，这会将计数器重置为 0。所以基本上，它应该有每 100 个滴答声外观变化。在第一种情况下，使用执行时间较长的 if 语句，我看到了变化，但远没有我预期的那么频繁。在第二种情况下，我根本看不到它们（我可以想象它们发生得太快了）。

所以我的问题是，是什么造成了执行时间的如此大的差异，以及导致paintComponent 方法似乎被调用的次数和循环迭代400.000 次的差异的原因是什么？

所有想法都表示赞赏。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-03T14:40:37.610

写入控制台，尤其是 MS-DOS 控制台，非常慢。您应该尽量减少写入控制台的行数。如果您必须写入大量数据，我建议您将其写入文件，因为它可以显着加快。

我假设这是在另一个线程中完成的，并且您没有占用 GUI 线程。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-03T14:42:09.493

该`repaint()`方法不会立即重绘组件，只是向 AWT/Swing 系统发出信号以重绘组件。因此，如果您`repaint()`快速调用 10 次，则很有可能只会重新绘制一次。

现在，如果您查看循环，它不会执行任何需要很长时间的操作（请注意，`repaint()`不会重新绘制）。如果您`System.out.println()`在循环中添加调用，它将显着增加循环内要完成的工作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-03T14:42:38.313

写入控制台是一项相对耗时的任务，尤其是与什么都不做相比。这大大减慢了执行速度。如果您将输出重定向到文件，您的循环将比不打印慢，但比打印到控制台快。

这就是打印和不打印执行速度差异很大的原因。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-03T14:43:15.270

尝试类似的东西，

```
tick++;
Thread.sleep(100); 
```

并检查您假设的变化是否正在发生。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-03T14:52:47.700

任何一种接口都比没有接口慢很多倍。无论是控制台还是图形界面。这主要是因为访问图形设备所需的所有额外代码。更不用说硬件延迟了。

# jquery - 我如何获得一个特定的父元素取决于它的子元素，并改变它的内容 - jquery？

> ID：12710783
> 
> 赞同：-1
> 
> 时间：2012-10-03T14:37:35.183
> 
> 标签：jquery

好吧，它有点复杂，我无法找到正确的方法来让它工作，我用一些例子来解释它：我生成的导航看起来像这样：

```
 <ul class='cat-nav'>
     <li class="c1">
        <h1>
           <a href="catalog.php?catid=8">main category 1</a>
        </h1>
     </li>
     <li class="c2">
        <h1>
           <a href="catalog.php?catid=9">main category 2</a>
        </h1>
           <ul class='subcat-nav'>
               <li>
                  <h1>
                     <a href="catalog.php?catid=7">main cat 2 - 1st subcat</a>
                  </h1>
               </li>
               <li>
                  <h1>
                     <a href="catalog.php?catid=19">main cat 2 - 2nd subcat</a>
                  </h1>
               </li>
           </ul>
      </li>
 </ul> 
```

现在我想做的是找到里面有子猫的李

（意思是里面有另一个 ul ）并禁用它的链接，这样主猫只会播放一个标题而不是实际的链接。

到目前为止，我已经尝试了以下但没有成功

```
$(document).ready(function() {
$('ul.cat-nav li').each(function() {    
    if($(this).children('ul').length == 1) {
    $('a').replaceWith(function() { return $(this).contents(); });  
    }
});
}); 
```

这个脚本禁用了 ul.cat-nav 中的所有链接，这对我来说是错误的......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T14:44:34.410

`.subcat-nav`直接选择，使用[`.siblings()`](http://api.jquery.com/siblings)定位到`<h1>`，使用[`.find()`](http://api.jquery.com/find/)定位到子`<a>`级，然后调用你的函数使它只有一个标题。[请参阅jQuery 的 DOM 遍历](http://api.jquery.com/category/traversing/)技术的完整列表以获取更多有用的功能。

```
$(document).ready(function() {
    $('ul.cat-nav li ul.subcat-nav')
        .siblings('h1')
        .find('a')
        .replaceWith(function() { return $(this).contents(); }); 
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T14:56:02.307

试试[这个](http://jsfiddle.net/jWmMK/)

```
$(document).ready(function() {
    $('ul.subcat-nav').each(function() {  // start from subcat-nav  
        $(this).parent().find('h1:first a')
            .replaceWith(function() { // your code
                return $(this).contents();
            });

    });
}); 
```

# c# - 如何确定 ObservableCollection 中的一行 实际上改变了

> ID：12710787
> 
> 赞同：2
> 
> 时间：2012-10-03T14:37:44.897
> 
> 标签：c#, wpf, observablecollection

我有一个 ObservableCollection

私有静态 CertOrigin_Entities db = new CertOrigin_Entities(); 私有静态 ObservableCollection ocSHIPPING_DTL；

我有一个后期绑定的 WPF Datagrid

```
 private void btn_SEARCH_Click(object sender, RoutedEventArgs e)
    {
        string sCI = this.txt_SEARCH.Text;

        var sd = (db.TBL_SHIPPING.Where(x => x.CommercialInvoiceNumber == sCI)).ToList();
        if (sd.Count() > 0)
        {
            iID = (int)sd[0].SHIPPING_ID;
            var query = (db.v_wpf_cert_origin.Where(x => x.SHIPPING_ID == iID));
            ocSHIPPING_DTL = new ObservableCollection<v_wpf_cert_origin>(query.ToList());

            dgCOO.ItemsSource = ocSHIPPING_DTL;

            var cust = (from x in db.TBL_CUSTOMER
                     join y in db.TBL_REQUISITION on x.CUSTOMER_ID equals y.CUSTOMER_ID
                     join z in db.TBL_SHIPPING on y.REQ_ID equals z.REQ_ID
                     where z.SHIPPING_ID == iID
                     select new {CUST = x.CustomerName}).ToList();
            this.lbl_CUSTOMER.Content = cust[0].CUST.ToString();
        }
    } 
```

我正在更新按钮后面的 SQL Server 数据库并在窗口关闭时

```
 private static bool _SaveChanges()
    {
        DbTransaction _dbTransaction = null;
        db.Connection.Open();
        using (_dbTransaction = db.Connection.BeginTransaction())
        {
            try
            {
                db.SaveChanges();
                db.AcceptAllChanges();
                _dbTransaction.Commit();
                db.Connection.Close();
            }
            catch (TransactionAbortedException ex)
            {
                db.Connection.Close();
                throw ex;
            }
            return true;
        }
    } 
```

这是发生在我身上的事情......在我的数据网格中，我有一个文本框

```
 <DataGridTemplateColumn Header="Hs Tarriff Class #:" Width="125" IsReadOnly="False">
                    <DataGridTemplateColumn.CellTemplate>
                        <DataTemplate>
                            <TextBox Text="{Binding Path=HsTarriffClassNumber, 
                                UpdateSourceTrigger=PropertyChanged, 
                                NotifyOnTargetUpdated=True}" 
                                     Name="txt_HsTarriffClassNumber" 
                                      />
                        </DataTemplate>
                    </DataGridTemplateColumn.CellTemplate> 
```

如果文本框的值是 5864.193.45 并且我将其更改为 5864.193.46 然后返回 5864.193.45 ObservableCollection 会在记录发生更改时保存记录，但是我不希望它保存记录，因为它没有改变。

变化的主要问题是这个。我桌上有 3 个触发器

1 - 更新后审核触发器将删除并将其插入另一个数据库

2 - 更新后审核触发器向多人发送电子邮件，说明用户更改了数据，他们需要重新打印文件并将其发送给海关

3 - On Update 触发器，更新不同的表并将 last_used_tarrif 字段设置为等于用户更改的值。

如果用户实际上没有更改数据，则上述任何一项都不应触发。有没有办法检查记录是否真的改变了？

我可以将可观察集合中的记录与表中的记录进行比较，并且只更新那些实际上不同的记录吗？

有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T14:50:43.207

因为您将 UpdateSourceTrigger 设置为 PropertyChanged（请参阅[MSDN：Binding.UpdateSourceTrigger](http://msdn.microsoft.com/en-us/library/system.windows.data.binding.updatesourcetrigger.aspx)，每次它检测到更改时，都会执行更改。

从 5864.193.45 更改为 5864.193.46 是一个操作，然后 5864.193.46 更改为 5864.193.45 是另一个操作。

过程 1：您也可以将 UpdateSourceTrigger 更改为 LostFocus ( `UpdateSourceTrigger=LostFocus`)，这样更改才会生效，直到您单击其他位置。这样，当您从 5864.193.45 更改为 5864.193.46 ，然后从 5864.193.46 更改为 5864.193.45 时，在您离开该文本区域之前它不会执行更改。

过程 2：您始终可以实现主 ObservationCollection，然后仅在调用 _SaveChanges() 时进行比较。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T18:58:52.713

好的，发现了一个有趣的项目

```
private void dg_VQ_TABLE_VIEW_FocusedRowChanged(object sender, DevExpress.Xpf.Grid.FocusedRowChangedEventArgs e)
{
    int rHANDLE = dg_VQ_TABLE_VIEW.FocusedRowHandle;
    //if (rHANDLE == dg_VQ_DTL_TABLE_VIEW.NewItemRowData.RowHandle.Value) { return; }
    _sync_child(rHANDLE);
} 
```

当我在列表框中选择一个项目时，数据网格的表视图会触发行更改。

所以我添加了一个布尔值，现在问题消失了。

```
private void lst_REQ_LIST_SelectionChanged(object sender, SelectionChangedEventArgs e)
{
    if (lst_REQ_LIST.SelectedValue == null) { return; }
    _selection_changed();
    bln_CHANGING_REQ = false;
}
private void _selection_changed()
{
    string sGUID = lst_REQ_LIST.SelectedValue.ToString().ToUpper();
    req_guid = new Guid(sGUID);
    quote_guid = new Guid("{00000000-0000-0000-0000-000000000000}");
    bln_CHANGING_REQ = true;
    _load_data();
}

private void dg_VQ_TABLE_VIEW_FocusedRowChanged(object sender, DevExpress.Xpf.Grid.FocusedRowChangedEventArgs e)
{
    if (bln_CHANGING_REQ) { return; }
    int rHANDLE = dg_VQ_TABLE_VIEW.FocusedRowHandle;
    //if (rHANDLE == dg_VQ_DTL_TABLE_VIEW.NewItemRowData.RowHandle.Value) { return; }
    _sync_child(rHANDLE);
} 
```

# ios5 - 使用警报对话框时出错

> ID：12710788
> 
> 赞同：0
> 
> 时间：2012-10-03T14:37:51.730
> 
> 标签：ios5, xcode4, uialertview

收到“UIAlertView 没有可见的@interface 声明选择器'message:delegate:otherButtonTitles'”。我正在尝试设置一个 2 按钮警报对话框以在用户选择图像后显示。我在 .h 文件中有 UIAlertDelegate。这是带有警报对话框的图像选择代码：

```
- (void)imagePickerController:(UIImagePickerController *)picker didFinishPickingMediaWithInfo:(NSDictionary *)info {
    [[UIApplication sharedApplication]setStatusBarHidden:YES];
    [self dismissModalViewControllerAnimated:YES];
    UIImage *originalImage = [info objectForKey:UIImagePickerControllerOriginalImage];
    NSData *imageData = UIImagePNGRepresentation(originalImage);
    NSString* imageName = @"yourPhoto.png";
    NSString* paths = [NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES)objectAtIndex:0];
    NSString* fullPathToFile = [paths stringByAppendingPathComponent:imageName];
    [imageData writeToFile:fullPathToFile atomically:NO];

UIAlertView *dir;
dir = [[[UIAlertView alloc]
        message:@"Choose the direction."
        delegate:self
        otherButtonTitles:@"Left",@"Right",nil];
[dir show];
}

- (void)imagePickerControllerDidCancel:(UIImagePickerController *)picker {
    [[UIApplication sharedApplication] setStatusBarHidden:YES];
    [self dismissModalViewControllerAnimated:YES];
} 
```

错误显示在“dir = [[UIAlertView alloc]”行上。任何人都可以帮助我了解为什么会出现此错误以及如何解决它？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T18:09:36.170

我想通了。看来您必须在警报对话框中有 message:@"string" 和 CancelButtonTitle:@"string" 。

# git - git svn dcommit 一个文件

> ID：12710789
> 
> 赞同：0
> 
> 时间：2012-10-03T14:37:52.790
> 
> 标签：git, git-svn

我有一个通过 git svn clone 创建的 svn 存储库的 git checkout。我对我的本地 git 存储库进行了一系列复杂的更改，我正在延迟推送到中央 svn 存储库。我想将一个小改动推送到一个文件。当使用 svn 客户端时，我会做

```
svn commit foobar.c 
```

有没有办法用 git 获得类似的功能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T16:16:27.820

只要你没有*dcommit*任何东西，你就完全可以使用 Git 提供的任何东西，包括分支和变基。因此，您可能想要做的是从当前的 SVN 版本 ( `git branch <name> remotes/trunk`) 中创建一个分支并暂时处理它。然后，您可以*像以前一样提交*这些更改。

然后，要继续进行其他更改，您可以重新设置它们以匹配您在使用`git rebase remotes/trunk`. 然后，您将回到线性历史，并在两者之间进行稍后的提交，并继续开发您的新功能。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T15:32:12.113

简单的。

解决方案一： git 中未提交的任何内容都可以隐藏起来。dcommitting 时不允许有未提交的文件。

解决方案二：在您现在所在的位置创建一个新分支。将主分支重置为您从 SVN git 的最后一次提交。将文件提交到 git 内的 master 分支。D提交到SVN。在 dcommit 之后将创建的新分支重新定位到新的 master 上。

任何问题？在这里使用图形工具将有很大帮助...

# c# - 锯齿状阵列可以容纳的最大尺寸是多少？

> ID：12710792
> 
> 赞同：1
> 
> 时间：2012-10-03T14:38:04.090
> 
> 标签：c#, memory-management

和数组一样吗？我有一个像下一个一样的锯齿状数组：

```
double numbers[][]=numbers[a][] 
```

其中“a”可以是任意数字。我怎样才能找出锯齿状数组的最大大小。

我已经读到它受到可用内存量或虚拟内存量的限制，但是如果 mi PC 有 8 GB 的 RAM 内存，我该如何计算。

我的主要目标是找出我的程序正在使用多少内存，但我不知道如何开始查找已使用的物理或虚拟内存量

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T14:40:22.103

这通常是错误的问题。
当您运行 32 位或 64 位系统时，情况就不同了。

在 32 位系统中，您有 2GB 的总限制（可用地址空间的一半），在 64 位以下它实际上是无限的。

> 主要目标是找出我的程序使用了多少内存

那是不同的。你可以从`GC.GetTotalMemory();`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T14:43:15.513

单个数组（任何标准数组，例如`int[]`）的最大大小为`System.Int32.MaxValue`. `int.MaxValue`这意味着您的锯齿状数组可以容纳`int.MaxValue`物品。

[SO的这个链接](https://stackoverflow.com/questions/1391672/what-is-the-maximum-size-that-an-array-can-hold)对数组的最大大小有一个很好的答案。

# javascript - 将工具提示 (div) 与文本 (span) 对齐。可能的？

> ID：12710796
> 
> 赞同：7
> 
> 时间：2012-10-03T14:38:08.857
> 
> 标签：javascript, jquery, html, css, tooltip

我正在努力想一种方法来实现以下目标，我从逻辑上想到了它，我很确定没有 javascript (jQuery) 就无法做到。

我只是想知道是否有人有任何聪明的 CSS 技巧可以实现我想要实现的目标。

在描述上:-)。我正在尝试将 a 垂直对齐`div`到 a `span`，其中 div 可能具有不同的高度，具体取决于内容。请参阅下图以更好地了解我想做的事情：

![在此处输入图像描述](../Images/06658cd03d1d98c4c3ed3cf8ccc8fcc5.png)

这是我的代码**起点**（请原谅缩小，只是我输入的方式）。

**HTML：**

```
<ul>
  <li><a href="address" title="no need for this as custom tooltip will replace">Link Text here</a>
    <div class="tooltip"><span>Description of the link here</span></div>
  </li>
  <li><a href="address">Link 2 Text here</a>
    <div class="tooltip"><span>Description of the link here</span></div>
  </li>
</ul> 
```

**CSS：**

```
ul {list-style-type:none;margin:0;padding:0 0 0 30px;overflow:visible;}
li {position:relative;border:1px solid #000;margin:5px 0;}
li a {font-size:14px;}

li .tooltip {position:relative;margin-left:100px;width:140px;padding:10px;font-size:12px;background-color:#fff;border:1px solid #999;border-radius:4px;z-index:10;} 
```

**更新**

请不要发布任何关于 jQuery 或 javascript（或任何显示或隐藏工具提示的 css 代码）的答案，我可以自己编写。我只是想知道这是否可以通过 CSS 实现。工具提示的功能在这里无关紧要，我只是想听听您对我的对齐问题的意见/解决方案:-)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-03T15:21:42.297

干得好！[http://jsfiddle.net/25UWs/2/](http://jsfiddle.net/25UWs/2/)

这是一个使用 CSS3 过渡来显示和隐藏工具提示的示例[http://jsfiddle.net/25UWs/5/](http://jsfiddle.net/25UWs/5/)

没有使用 javascript。我还冒昧地用 CSS 添加了工具提示箭头。

关键是使用这些css属性（当然在适当的地方）

```
display:table;
display: table-cell;
display: inline-block;
vertical-align: middle; 
```

这是来自 jsfiddle 示例的 css：

```
ul {
    padding:0;
    margin: 20px;
    list-style-type:none;
    overflow:visible;
    display: table;
}

li {
    position:relative;
    margin:5px 0;
    display: table-cell;
    vertical-align: middle;
    width: 100%;
    float:left;
}

li a {
    color: #555;
    font-size:14px;
    display: inline-block;
    width: 100px;
    vertical-align: middle;
}

li .tooltip {
    background: #ff;
    width:140px;
    padding:10px;
    margin-left: 15px;
    font-size:12px;
    background-color:#fff;
    border:1px solid #999;
    border-radius:4px;
    display: inline-block;
    vertical-align: middle;
    position: relative;
}

/* arrow */
li .tooltip:before,
li .tooltip:after {
    position: absolute;
    top: 50%;
    left: -8px;
    margin-top: -5px;
    content: '';
    width: 0; 
    height: 0; 
    border-top: 6px solid transparent;
    border-bottom: 6px solid transparent; 

    border-right: 8px solid #fff; 
}

li .tooltip:before {
    border-right-color: #999;
    left: -9px;
} 
```

​</p>

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T15:00:05.983

您根本不需要`display: table-cell`，只需将`display:inline-block`您的`<li>`and position: absolute 放在您的`<div>`.

```
.tooltip {
position:absolute;
right: -10px;
top: -15px; /* or bigger if you need so */
margin-left:100px;
width:140px;
padding:10px;
font-size:12px;
background-color:#fff;
border:1px solid #999;
border-radius:4px;
z-index:10;
} 
```

# java - 如何减少 Hibernate SessionFactory 内存使用和加载时间

> ID：12710797
> 
> 赞同：3
> 
> 时间：2012-10-03T14:38:14.483
> 
> 标签：java, performance, hibernate

我有一个包含大约 3000 个实体类的应用程序。

由于类的数量众多，SessionFactory 对象消耗大约 150 MB 的内存并且需要将近一分钟的时间来设置（处理所有类、生成代理和构建元模型）。
在分析了这个过程之后，我发现一分钟的时间花在了，`org.hibernate.ejb.Ejb3Configuration.buildEntityManagerFactory`而一半的时间在`org.hibernate.tuple.entity.AbstractEntityTuplizer.<init>(EntityMetamodel, PersistentClass)`.
我正在寻找减少`SessionFactory`内存使用和加载时间的方法。
一种想法是将类增强移动到编译时间，但我没有找到太多关于它的信息。
实体的数量是我无法改变的事实，但是如果有人对如何处理他们的数据库访问（除了 Hibernate）有更好的想法，我会很高兴听到它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T14:44:10.627

3000节课对我来说听起来太疯狂了。
“类增强”是什么意思？
我认为你应该仔细重新考虑你的应用程序的设计。
Hibernate 大量使用 Proxy 对象（例如，当您运行 setter 时，Proxy “聚合”此更改，因此 Hibernate 可以生成仅包含更改字段的更新 SQL）。Hibernate 还使用代理使用的内存中的类信息（如上所述），这就是为什么你的内存会像这样增长

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T14:45:11.170

首先查看 SessionFactory 内部发生的情况。Hibernate 提供了一个 JMX 连接器，请参阅[此处的文档](http://docs.jboss.org/hibernate/orm/3.3/reference/en/html/performance.html#performance-monitoring-sf)。然后你可以开始研究你的热点以及如何重构它们。您确实需要从收集更多指标开始。现在它可能是任何事情，包括 GC 问题。

# html - 底部显示内联对齐的两个字段集

> ID：12710799
> 
> 赞同：1
> 
> 时间：2012-10-03T14:38:17.873
> 
> 标签：html, css

我在一个表单中有两个字段集，它们是内联显示的。它们彼此相邻出现，但它们在底部而不是顶部对齐。它看起来像这样：

![在此处输入图像描述](../Images/9cbe8e88edea810f53b1f8b258296be7.png)

这是html：

```
<form action='php/register.php' method='post'>
    <fieldset>
        <label for='txtfirstName'>Voornaam*</label>
        <input id='txtfirstName'  name='firstname' type='text' value='$firstname'>
    </fieldset>
    <fieldset>
        <label for='txtfirstName'>Voornaam*</label>
        <input id='txtfirstName'  name='firstname' type='text' value='$firstname'>
    </fieldset>
</form> 
```

和CSS：

```
fieldset {
    display:inline;
    border:none;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-03T14:48:08.650

添加 CSS 属性`vertical-align: top`就可以了。

# c++ - C++ 运算符 % 保证

> ID：12710801
> 
> 赞同：20
> 
> 时间：2012-10-03T14:38:27.240
> 
> 标签：c++, language-lawyer, modulo

是否保证C++**标准**`(-x) % m`(c++0x) 中的,​​ where`x`和`m`are positive是负数并且等于？**`-(x % m)`**

 **我知道它在我知道的所有机器上都是正确的。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-03T14:51:01.490

In addition to *Luchian*'s answer, this is the corresponding part from the C++11 standard:

> The binary / operator yields the quotient, and the binary % operator yields the remainder from the division of the first expression by the second. If the second operand of / or % is zero the behavior is undefined. For integral operands the / operator yields the algebraic quotient with any fractional part discarded; if the quotient a/b is representable in the type of the result, (a/b)*b + a%b is equal to a.

Which misses the last sentence. So the part

> (a/b)*b + a%b is equal to a

Is the only reference to rely on, and that implies that `a % b` will always have the sign of `a`, given the truncating behaviour of `/`. So if your implementation adheres to the C++11 standard in this regard, the sign and value of a modulo operation is indeed perfectly defined for negative operands.

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-10-03T14:41:31.690

### 5.6 乘法运算符

> 4) 二元 / 运算符产生商，二元 % 运算符产生第一个表达式除以第二个表达式的余数。如果 / 或 % 的第二个操作数为零，则行为未定义；否则 (a/b)*b + a%b 等于 a。**如果两个操作数都是非负数，则余数是非负数；如果不是，则余数的符号是​​实现定义的**（强调我的）

这是来自 C++03。:(**

# iphone - 无法播放网络音频文件

> ID：12710802
> 
> 赞同：1
> 
> 时间：2012-10-03T14:38:29.310
> 
> 标签：iphone, ios5, audio

在 iOS5 中，以下代码适用于本地声音文件；但是，当我尝试网络上的相同文件（并且实际存在）时，它不会播放声音。它说错误-43，但文件在那里。我尝试使用注释掉的行访问网络文件。

```
-(void) playSound {

    SystemSoundID soundID;
    //NSURL *path = [NSURL URLWithString:@"http://www.somerealwebtise.com/test.wav"];

    NSURL *path   = [[NSBundle mainBundle] URLForResource: @"test" withExtension: @"wav"];

    self.sysSoundTestPath = (__bridge CFURLRef)path;

    AudioServicesCreateSystemSoundID(self.sysSoundTestPath, &soundID);
    AudioServicesPlaySystemSound(soundID);

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T15:51:39.533

我想就像你发现的那样。AudioServices 只能播放本地包中的声音，并且没有任何网络功能。

您需要先从网络 URL 下载声音，然后`AudioServicesCreateSystemSoundID`使用本地文件路径调用。

# php - 未定义的变量 PHP_SELF

> ID：12710803
> 
> 赞同：16
> 
> 时间：2012-10-03T14:38:29.473
> 
> 标签：php, content-management-system

我在这里用 php 开发一个后端。

我遇到了这样的错误：

> 未定义变量：PHP_SELF

在我的 htdocs 目录上。

我正在使用 php 5.4.4 进行开发，如果您想查看这里的源代码，它是：

[http://pastebin.com/xr2PxbNG](http://pastebin.com/xr2PxbNG)

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-10-03T14:48:58.340

不要使用任何建议的 PHP_SELF 版本。这是一场**安全噩梦**，让您的 PHP 面临多种可能的注入攻击。

你想达到什么目的？为发送给自身的表单生成 URL？使用`action=""`它 - 这是一种有效的方法，并且将始终使用 URL 来发送表单作为加载。

如果您必须知道请求的脚本，请`$_SERVER['SCRIPT_NAME']`改用。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-10-03T14:41:51.407

你正在使用`$PHP_SELF`它应该是

```
echo $_SERVER['PHP_SELF'] ; 
```

或者

```
$PHP_SELF = &$_SERVER['PHP_SELF'];
echo $PHP_SELF ; 
```

你也可以拥有

```
define("PHP_SELF",$_SERVER['PHP_SELF']); 
echo PHP_SELF ; 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-03T14:40:13.973

您是否尝试访问 $_SERVER['PHP_SELF'] ？

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-05-09T02:54:33.500

看起来某些 WordPress 发行版声明`$PHP_SELF = $_SERVER['PHP_SELF']`的原因我不能说，一定是某种遗留的东西。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-02-19T11:51:29.227

我必须使用页面 URL 来解决此错误... 例如。像

```
echo "<a href=\"$_PHP_SELF?page=$last\">Last 3 Records</a>"; 
```

您必须删除 $_PHP_SELF 并使用页面 URL insert.php .......

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2015-02-22T14:54:00.757

我得到了同样的结果，注意：未定义的变量 _PHP_SELF 所以我只是将 $_PHP_SELF 替换为 $_SERVER[PHP_SELF] 现在我没有得到任何额外的 no

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-11-29T22:49:31.517

一些 shell 会删除`$_SERVER['PHP_SELF']`作为安全措施的值。你可能需要看看`$_SERVER['argv'][0]`这是否是发生在你身上的事情。

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2018-04-25T12:16:35.663

我解决了启动变量：

```
$PHP_SELF = NULL;
$Path1 = realpath(substr($PHP_SELF, 1));
$dbName = "$Path1\\BD.accdb"; 
```

# web-applications - 网站流量交互映射图

> ID：12710805
> 
> 赞同：0
> 
> 时间：2012-10-03T14:38:36.453
> 
> 标签：web-applications, workflow, uml

我不确定应该使用哪种类型的工作流程图标准来向非技术人员和技术人员传达 Web 应用程序的工作流程。

因为对于我自己，作为一名技术人员，我希望能够知道某些组件如何与数据库交互，当涉及到我必须重新审视的点时。

用语言来形容他们是这样的

主页

```
 -> sign up page
      ->sign up connects to database if successful go to thank you page.
      ->sign up connects to database if successful go back to sign up page.    
  -> contact us
  -> etc... 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-06-28T14:37:14.403

这种类型的图表通常在**信息架构**方法中指定。令人惊讶的是，据我所知，IA 中没有建议广泛使用的标准。其他名称是用户体验设计 (UXD)、交互设计 (IxD) 等。每个公司或开发工具都支持不同的种类。

*这是一个示例方法*：“用于描述信息架构和交互设计的视觉词汇表”：[http ://www.jjg.net/ia/visvocab/](http://www.jjg.net/ia/visvocab/)

我喜欢 vainolo 的建议，然而，几年前我尝试过，利益相关者陷入了最基本的概念，比如*state*。

非技术利益相关者更容易理解的是*UML* **活动图**（它只是 Petri 网和流程图的简单混搭）。通过添加“泳道”，活动图可以对多个页面和流程进行建模。尽管活动图听起来很复杂，但它很容易理解（对于简单的线性场景）。

*示例活动图*：“UML 活动图：详细的用户界面导航”：[http ://www.ibm.com/developerworks/rational/library/4697.html](http://www.ibm.com/developerworks/rational/library/4697.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-19T10:35:29.790

下面开始怎么样？

![在此处输入图像描述](../Images/78a955e572e54fb19000e36bddd6c20a.png)

该符号基于 Petri 网图形或图标，“连接”每个图标（正方形和圆形）的规则遵循创建 Petri 网的规则。标记为 T3 的图标是我“想出”的东西，它基于表示多个 Petri 网元素的高级符号（我认为是 Nutt 或 Noe 或两者，Macro E-nets）——我使用了找到的线属性在 PowerPoint 中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-06T19:09:55.323

为了描述一个用户界面（一个网站），我更喜欢[状态机](http://www.uml-diagrams.org/state-machine-diagrams.html)。状态机的每个状态都与用户界面的状态相匹配，系统通过更改其状态来对用户交互做出反应。在每个状态中，您通过向状态添加操作来说明系统处于该状态时会发生什么。这些操作显示了界面如何与系统交互。

# javascript - Jquery如何在多选下拉列表中使用拆分

> ID：12710806
> 
> 赞同：1
> 
> 时间：2012-10-03T14:38:38.103
> 
> 标签：javascript, jquery, split, multiple-select

我正在尝试在多选下拉菜单上使用拆分，它返回错误：“未捕获的类型错误：对象 f-all 没有方法‘拆分’”。不能在多选上使用拆分吗？

这是下拉列表（简化）：

```
<select data-placeholder="Select" placeholder="Select" name="id[]" id="id_menu" multiple>
    <option value=""></option>
    <option value="e-all">E All</option>
    <option value="f-all">F All</option>
</select> 
```

这是拆分功能：

```
$('#id_menu').change(function(){
    var id_menu = $(this).val();
    var type = id_menu.split('-');
    // do stuff with split id
 }); 
```

尝试使用每个仍然相同的错误消息

```
$('#id_menu').change(function(){
     $('#id_menu').each(function() {
         var type = $(this).val().split(',');
     });
}); 
```

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-03T14:46:46.803

```
$(function(){

    $('select').change(function(){

       //typeof $(this).val() === 'Array'

        $.each($(this).val(), function(i, val){ 
            console.log(val); //handle each selected value
        });
    });

});​ 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-03T14:44:41.983

当您使用多个属性时，`val`返回一个选定值的数组，没有拆分方法，您可以使用`join`方法将数组转换为字符串或遍历数组。

```
$('#id_menu').change(function(){
    var id_menu = $(this).val().join();
    // var id_menu = $(this).val();
    // for (var i = 0; i < id_menu.length; i++) {
    //      var sin = id_menu[i].split('-');
           // ..
    // }
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-03T14:49:19.437

# id_menu 是一个数组

```
$('#id_menu').change(function() {
  var id_menu = $(this).val();
  //id_menu is an array
  id_menu.forEach(function(item, index) {
    var split_item  = item.split('-');
  });
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-03T14:53:42.087

要获取选定的值，您还可以执行以下操作：

```
 $('#id_menu').change(function (e) {
    $(e.currentTarget).val();
 }); 
```

这是一个演示：http: [//jsfiddle.net/7HVPH/](http://jsfiddle.net/7HVPH/)

# emacs - 隐藏 = 在 Emacs 中呈现内联代码片段时

> ID：12710812
> 
> 赞同：4
> 
> 时间：2012-10-03T14:38:50.700
> 
> 标签：emacs, org-mode

在 org-mode 的 Emacs 中，我可以通过用`=`符号将代码段括起来来获得内联代码段。这是一个例子：

          ![Emacs 组织模式中的组织代码](../Images/571ea8b09f5b1aa1ee0365f815b64585.png)

在上面的示例中，我自定义了 的面，`org-code`使背景比标准文本背景更暗。

但是有没有办法让 Emacs**隐藏**这些`=`标志？拥有类似于 org-mode 对带有语法的链接所做的事情会很棒：

```
 [[link]] 
```

其中 Emacs 将显示`link`而不是`[[link]]`（请参阅[文档](http://orgmode.org/manual/Link-format.html)），并且仅当您想要编辑链接时才会显示括号。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-03T21:15:22.483

设置`org-hide-emphasis-markers`为`t`。但请注意，这也会隐藏，例如`\`斜体符号等。

# vb.net - How to find and change date in a string read from .doc

> ID：12710816
> 
> 赞同：2
> 
> 时间：2012-10-03T14:39:05.690
> 
> 标签：vb.net, date, replace

I'm writing a little application that will open my status reports that are in Word doc format. The document has several dates but the ones I want to find and change are like this:

*   `Start Date: 05/14/2012`
*   `End Date: 05/18/2012`

I'm writing this in VB.NET I can use the `String.IndexOf("Start Date: ")` method and it finds the word, but I was hoping to get the index position, then using `String.Length`, get the date field to modify it for each of the start and end date dates.

```
If (result.IndexOf("Start Date:") <> -1) Then
    Console.WriteLine("Start Date Found!")
End If 
```

I thought about using RegEx but I don't think I'm that clever.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T14:44:11.353

这是一个将为您提取日期的正则表达式：

`/(?:Start|End) Date: (\d{2}\/\d{2}\/\d{4})/`

一旦您在字符串上运行此正则表达式，每个日期都将位于其自己的捕获组中。

VB中的一个例子：

```
Dim myMatches As MatchCollection
Dim myRegex As New Regex("(?:Start|End) Date: (\d{2}\/\d{2}\/\d{4})")
Dim t As String = "Start Date: 05/14/2012 End Date: 05/18/2012"
myMatches = myRegex.Matches(t)
' Search for all the words in a string
Dim successfulMatch As Match
For Each successfulMatch In myMatches
   Debug.WriteLine(successfulMatch.Value)
Next 
```

# html - Focus on one div and disable the others around

> ID：12710818
> 
> 赞同：0
> 
> 时间：2012-10-03T14:39:11.480
> 
> 标签：html

I am using a master layout for my website. But on one of the pages, I want that only the content in main div appears focused while others are disabled; just like in jquery popup. Is there a way to achieve this

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T15:10:04.560

目前尚不完全清楚您的目标是什么。如果我试图禁用页面上的所有**控件**，除了主 div 上的控件，我可能会得到一些 javascript：

```
<body onload="desableControls()">
...
<div id="mainDiv">
...

<script type="text/javascript">
    //disable everything
    $("input").attr("disabled", "disabled");
    //enable controls on your main div
    $("#mainDiv input").removeAttr("disabled");
</script> 
```

# robotium - Can a command from monkey runner be used in robotium?

> ID：12710821
> 
> 赞同：4
> 
> 时间：2012-10-03T14:39:13.647
> 
> 标签：robotium, monkeyrunner

I have written a script in robotium which works just fine, but our application is designed in such a way that it has to interact with the Native android application which cannot be resigned. I have to click a button on the native app which cant be done through robotium. So i wanted to know if i can add a command of monkey runner in my script to click on the app.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T13:24:20.897

```
solo.sendKey(20); // used for move to next object on screen // 
```

当您专注于所需的按钮时执行上述行并停止

然后执行下面的行，点击按钮

```
solo.sendKey(66); // Click On Focused Button // 
```

例如，您在屏幕上有 3 个对象：

[1] 用户名 [ 文本框 ]

[2] 密码[文本框]

[3] 提交 [ 按钮 ]

如果您想使用“robotium”点击“提交”按钮，那么

```
solo.sendKey(20);// focus on username textbox
solo.sendKey(20);// focus on password textbox
solo.sendKey(20);// focus on Submit button
solo.sendKey(66);// Click On Submit Button 
```

通常我们从 munkey 代码发送 keyevents，所以我建议你使用上面的代码。

笔记：

KEYCODE_DPAD_DOWN [常数值：20 (0x00000014)]

KEYCODE_ENTER [常数值：66（0x00000042）]

粘贴自[http://developer.android.com/reference/android/view/KeyEvent.html](http://developer.android.com/reference/android/view/KeyEvent.html)

我在我的自动化应用程序上对此进行了测试。

我希望这会对你有所帮助，谢谢。

# c# - 如何使用取决于用户输入的 sql 查询填充图表

> ID：12710832
> 
> 赞同：0
> 
> 时间：2012-10-03T14:39:36.720
> 
> 标签：c#, asp.net, sql-server, charts

我有一个 asp.net 页面，其中有一个从工具箱设计器拖上来的图表。我知道如果我点击这个图表，会出现一个“图表任务”菜单，以便我可以定义 sql 数据源、图表类型和 x&y 值。我遇到的问题是我的 sql 数据源需要用户输入。我希望用户输入日期并根据输入日期搜索记录。因此，我无法在图表任务菜单上定义 sql 查询，因为它会告诉我我的查询无效。到目前为止，我的代码如下所示：

```
con1.Open();
    SqlCommand cmd2 = new SqlCommand (string.Format ("select CustomerName, AccountNumber,  DateReading, Time, ID from dbo.NewLogTable join dbo.CustomerTable on ID = Customer_ID join dbo.VoltageTable on Voltage_Reading = Provided_Voltage where Sensor_ID = 'FA0009' and DateReading= '{0}' " ,TextBox1.Text), con1);
    SqlDataAdapter da2 = new SqlDataAdapter(cmd2);
    DataSet ds2 = new DataSet();
    da2.Fill(ds2);
    Chart2.DataSource = da2;
    Chart2.Visible = true;
    Chart2.DataBind();

    con1.Close(); 
```

每当我输入日期并单击按钮时，什么都没有发生。我知道 sqlCommand 是正确的。但是，我找不到为我的图表设置 x 和 y 值的方法。我尝试`Chart2.Xvalue`了 .parameters 并找不到设置这些的方法。我认为这就是给我带来麻烦的原因。任何人都可以对这个问题有所了解吗？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T14:44:27.810

采用：

您必须将**DataSet ds2**指定为图表的 DataSource，而不是使用 SqlDataAdapter da2。

```
Chart2.DataSource = ds2; 
```

代替

```
Chart2.DataSource = da2; 
```

# sql - 来自 2 个具有计数的表的 SQL 查询

> ID：12710839
> 
> 赞同：2
> 
> 时间：2012-10-03T14:39:51.667
> 
> 标签：sql, count, group-by

我有 2 张桌子，桌子`A`和桌子`B`。

表`A`有以下字段：

```
id(primary key), 
references_id 
```

表`B`也​​有字段：

```
id(primary_key) 
references_id. 
```

现在我得到了 的 id `A`，我需要检索`A.id`和`count(B.references_id)`by `A.references_id`。

如何在 SQL 查询中做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-03T14:42:24.577

使用`LEFT JOIN`它仍然会显示，即使它`references_id`不存在于 table 上`B`。试试这样的，

```
SELECT  a.ID, COUNT(b.References_ID) totalCount
FROM    A LEFT JOIN B
            ON a.References_ID = b.References_ID
GROUP BY a.ID 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T14:42:31.583

试试这个：

```
SELECT A.Id, COUNT(B.references_id)
FROM A
INNER JOIN B A.Reference_ID = B.References_ID
GROUP BY A.Id 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-03T14:54:25.057

只是为了在那里扔另一个选项，这次是一个相关的子查询：

```
select a.id, (select count(*) from b where references_id = a.id) as ref_count
from a as a 
```

奇怪的是，这有时可以提供比`join and group by`解决方案更有效的执行计划。我经常尝试两者。

# php - PHP 内部编码

> ID：12710842
> 
> 赞同：5
> 
> 时间：2012-10-03T14:40:03.680
> 
> 标签：php, encoding

根据 bin2hex，我的 PHP 在内部使用 UTF-8：

```
echo bin2hex("ö"); -> c3b6 (utf-8)
echo bin2hex(utf8_decode("ö")); -> f6 (ISO-8859) 
```

但是 mb_internal_encoding() 和 iconv_get_encoding() 都说它是 ISO-8859-1。

```
echo mb_internal_encoding(); -> ISO-8859-1
var_dump(iconv_get_encoding()); ->  ["input_encoding"]=>  string(10) "ISO-8859-1"  ["output_encoding"]=>  string(10) "ISO-8859-1"  ["internal_encoding"]=>  string(10) "ISO-8859-1" 
```

UTF-8 似乎显然是它正在使用的那个，但为什么它仍然显示 ISO-8859-1？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-03T14:42:40.063

这一点也不奇怪。您的第一个检查是引号之间的内容。我假设您已经使用 UTF-8*保存*了文件，这意味着您的字符串中有两个字节。这并不意味着内部编码是 UTF-8，只是你的字符串中有这两个字节。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-03T14:43:22.957

这是**php.ini**中的默认设置：

```
[iconv]
;iconv.input_encoding = ISO-8859-1
;iconv.internal_encoding = ISO-8859-1
;iconv.output_encoding = ISO-8859-1 
```

如果你想在任何地方使用 UTF-8，你应该使用这些设置：

```
default_charset = "UTF-8"

[iconv]
iconv.input_encoding = UTF-8
iconv.internal_encoding = UTF-8
iconv.output_encoding = UTF-8

[mbstring]
mbstring.language = Neutral
mbstring.internal_encoding = UTF-8
mbstring.http_input = auto
mbstring.http_output = UTF-8
mbstring.encoding_translation = On
mbstring.detect_order = auto
mbstring.substitute_character = none; 
```

# css - 想要将特定的 div 向右移动

> ID：12710843
> 
> 赞同：39
> 
> 时间：2012-10-03T14:40:06.143
> 
> 标签：css

我想将特定的 div 更多地移动到右侧，以便左侧的 div 获得更多空间来显示其中的内容。

我在 CSS 中尝试了一些东西，但我知道我做错了什么。

在 CSS 中，我有...

```
login-box {
    width: 200px;
    margin-left: 50px;
} 
```

* * *

## 回答 #1

> 赞同：57
> 
> 时间：2012-10-03T14:41:31.853

您可以在该特定 div 上使用 float，例如

```
<div style="float:right;"> 
```

将您想要更多空间的 div 也浮动到左侧：

```
<div style="float:left;"> 
```

如果所有其他方法都失败，则将 div 放在正确的位置：absolute 上，然后将其移动到您想要的位置。

```
<div style="position:absolute; left:-500px; top:30px;"> 
```

等等。显然将样式放在单独的样式表中，但这只是一个更快的示例。

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2019-04-11T20:27:25.227

这将完成这项工作：

```
<div style="position:absolute; right:0;">Hello world</div>
```

* * *

## 回答 #3

> 赞同：17
> 
> 时间：2020-10-18T03:27:30.230

对我来说，我使用了 margin-left: auto; 水平调整大小响应更灵敏。

# iphone - Getting path of plist stored in device

> ID：12710849
> 
> 赞同：0
> 
> 时间：2012-10-03T14:40:17.977
> 
> 标签：iphone

So, there is an app installed on the device. It contains a plist to store all the details. Is it possible to access that particular plist from another application? Where it will be residing? I found this code could be used for it!! Is it really possible? Or any other workaround to get it?

```
NSString *documentdir = [NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES) lastObject];
NSString *tileDirectory = [documentdir stringByAppendingPathComponent:@""];
NSLog(@"Tile Directory: %@", tileDirectory); 
```

Even if I can find the path of that particular plist, would I be able to read it?

**EDIT:**

My Objective:

I have one app that uses plist to store data, this app uploads the data to a server.

Somehow this app failed to upload certain data available in the plist.

Now i need to get this data stored in the plist.

The app is not configured with iCloud,..

Any suggestions on how the data from the plist can be retrieved?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T14:47:13.550

您提供的代码将被锁定到未越狱设备上的应用程序。确实可以在越狱手机上列出路径并找到其他应用程序的 plist。一般回答：不，这是不可能的。

# spring-mvc - Spring，未找到 JSP 类

> ID：12710853
> 
> 赞同：0
> 
> 时间：2012-10-03T14:40:28.093
> 
> 标签：spring-mvc, spring-3

久违了，我将返回 Spring，我正在尝试在 Tomcat 6.0 上启动并运行一个简单的 Web 应用程序，并将 Hibernate 作为 ORM。

我得到的错误是：

```
SEVERE: Servlet.service() for servlet mvc-dispatcher threw exception
java.lang.ClassNotFoundException: org.apache.jsp.WEB_002dINF.view.viewAllEnquiries_jsp 
```

它通过我的控制器运行良好：

```
@Controller
@ComponentScan("com.intl.cigna.ecommerce.dao")

public class EnquiryController {

    @Autowired
    private EnquiryDao enquiryDao;

    @RequestMapping("/viewAllEnquiries")
    public String getAllEnquiries(Model m) {
        List<Enquiry> enqs = enquiryDao.getAllEnquiries();
        m.addAttribute("SEARCH_ENQUIRIES_RESULTS_KEY", enqs);
        return "viewAllEnquiries";
    }   
} 
```

但由于某种原因，它似乎无法编译 jsp。当我重命名或删除 jsp 时，它无法（显然）找到它。

调度程序的 web.xml 是：

```
 <servlet>
        <servlet-name>mvc-dispatcher</servlet-name>
        <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
        <load-on-startup>1</load-on-startup>
    </servlet>

    <servlet-mapping>
        <servlet-name>mvc-dispatcher</servlet-name>
        <url-pattern>/</url-pattern>
    </servlet-mapping> 
```

我一定遗漏了一些明显的东西......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T14:48:29.230

只是一个猜测——但看起来 JSP 可能不包含有效的 java 代码（缺少导入和东西）——所以 JSP 不会编译为 servlet，你会得到`ClassNotFoundException`.

检查`catalina.log`文件以查看您是否缺少编译错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T08:09:46.897

确保在 pom/ 类路径中拥有所有 jstl、servlet 和 jsp 依赖项：

```
 <!-- Servlet -->
        <dependency>
            <groupId>javax.servlet</groupId>
            <artifactId>servlet-api</artifactId>
            <version>2.5</version>
            <scope>provided</scope>
        </dependency>
        <dependency>
            <groupId>javax.servlet.jsp</groupId>
            <artifactId>jsp-api</artifactId>
            <version>2.1</version>
            <scope>provided</scope>
        </dependency>
        <dependency>
            <groupId>javax.servlet.jsp.jstl</groupId>
            <artifactId>jstl-api</artifactId>
            <version>1.2</version>
        </dependency>       
        <dependency>
            <groupId>org.glassfish.web</groupId>
            <artifactId>jstl-impl</artifactId>
            <version>1.2</version>
        </dependency> 
```

# artificial-intelligence - 使用限制随机生成字段

> ID：12710854
> 
> 赞同：0
> 
> 时间：2012-10-03T14:40:29.323
> 
> 标签：artificial-intelligence

我想随机填写表格中的字段，例如驾驶执照表格。我可以很容易地生成这些值，但它们通常没有任何意义。例如，表单的结束日期随机设置在表单的开始日期之前。是否有任何 AI 方法可以使用限制随机生成此字段？我如何表示这种限制？我可以使用语义网吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T16:25:24.310

从理论上讲，您当然可以使用人工智能“传统”研究中的一个或另一个概念。例如，在您的情况下，它可以让系统了解您的应用程序上下文中的*好*值或*坏*值。这可以通过强化学习方法或人工神经网络来实现，如果您想让系统自行学习，或者可能使用某种专家系统。可能有几种选择。但请注意，实施这样的系统可能需要一些时间......

但是，由于您没有分享有关您想要实现的目标的许多细节，因此很难说出哪种方法最适合您的情况。从我对您问题的理解来看，尽管在我看来，如果您只是想通过传统编程概念检查某些输入参数的有效性（例如，一些基本检查输入是否正确），那么这里的任何 AI 方法都可能是矫枉过正。

！

# ios - iOS 6 上的allowAirPlayVideo 属性

> ID：12710855
> 
> 赞同：4
> 
> 时间：2012-10-03T14:40:33.140
> 
> 标签：ios, ios6, avplayer, airplay

有谁知道应该使用什么来禁用 iOS 6.0 上的 AirPlay 视频播放？

我在 iOS 6.0 和 5.1 中进行了测试，并且仍然可以正常工作。

目前我正在使用allowAirPlayVideo = NO，但在iOS 6上根​​据Apple文档已弃用：

[不推荐使用的 AVPlayer 方法](http://developer.apple.com/library/ios/#Documentation/AVFoundation/Reference/AVPlayer_Class/DeprecationAppendix/AppendixADeprecatedAPI.html)

谢谢。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-22T19:01:07.693

不是在线文档中唯一缺少的东西！在 iOS 6 中有三个不推荐使用的 AVPlayer 方法：

```
airPlayVideoActive
allowsAirPlayVideo
usesAirPlayVideoWhileAirPlayScreenIsActive 
```

似乎它们已被替换为：

```
externalPlaybackActive
allowsExternalPlayback
usesExternalPlaybackWhileExternalScreenIsActive 
```

[从这组差异](http://developer.apple.com/library/ios/#releasenotes/General/iOS60APIDiffs/)中收集到的信息。（你好 Apple？你可以做得更好！）

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-09T19:45:16.420

您应该设置的属性`allowsExternalPlayback`在 iOS 6 中，而不是在`allowsAirPlayVideo`iOS 5 中。

# sql - SQL 加入 2 个共享列的查询

> ID：12710857
> 
> 赞同：0
> 
> 时间：2012-10-03T14:40:37.857
> 
> 标签：sql, sql-server, join, sql-server-2008-r2, select-case

我有 2 个 SQL 查询共享一个名为`catalogid`

查询 #1：

```
Select 
   catalogid, numitems, allitems - numitems ignoreditems
from
    (select 
        i.catalogid,
 sum(case when (ocardtype in ('PayPal','Sofort') OR
                ocardtype in ('mastercard','visa') and
                odate is not null) then numitems
                else 0 end) numitems,
 sum(numitems) allitems
from orders o"
join oitems i on i.orderid=o.orderid"
join products T1 on T1.catalogid = i.catalogid"
group by i.catalogid) X 
```

查询 #2：

```
SELECT catalogId, ProcessedSucssessfully =
       STUFF((SELECT ', ' + CAST( b.orderid as varchar(10))
              FROM oitems b JOIN orders o ON b.orderid = o.orderid
              WHERE b.catalogId = a.catalogId
              AND (o.ocardtype in ('PayPal','Sofort') OR o.ocardtype in  ('mastercard','visa') and o.odate is not null)
              FOR XML PATH('')), 1, 2, ''),
                  NotProcessed =
        STUFF((SELECT ', ' + CAST( c.orderid as varchar(10))
               FROM oitems c JOIN orders o ON c.orderId = o.orderid
               WHERE c.catalogid = a.catalogid
               AND (o.ocardtype in ('mastercard') OR o.ocardtype is null) and o.odate is null
               FOR XML PATH('')), 1, 2, '')
FROM oitems a
GROUP BY a.CatalogId 
```

您如何将这 2 个查询合并为一个查询或加入它们？

`SqlCommand`注意我从 vb.net运行那些 2

需要注意的一件事是我对两个查询都有相同的条件，我尝试做的是将第二个查询部分添加到未解决的选择案例中

这是涉及的表格

项目表

```
+---------+-----------+----------+
| orderid | catalogid | numitems |
+---------+-----------+----------+
| o737    |       353 |        1 |
| o738    |       364 |        4 |
| o739    |       353 |        3 |
| o740    |       364 |        6 |
| o741    |       882 |        2 |
| o742    |       224 |        5 |
| o743    |       224 |        2 |
+---------+-----------+----------+ 
```

订单表

```
+-----------------+------------+------------+
|         orderid | ocardtype  |   odate    |
+-----------------+------------+------------+
|     o737        | Paypal     |            | 'OK
|     o738        | MasterCard | 01.02.2012 | 'OK
|     o739        | MasterCard | 02.02.2012 | 'OK
|     o740        | Visa       | 03.02.2012 | 'OK
|     o741        | Sofort     |            | 'OK
|     o742        |            |            | 'ignore because ocardtype is empty
|     o743        | MasterCard |            | 'ignore because Mastercard no odate
+-----------------+------------+------------+ 
```

查询 #1 的结果：

```
+-----------+----------+--------------+
| catalogid | numitems | ignoreditems |
+-----------+----------+--------------+
|       353 |        4 |            0 |
|       364 |       10 |            0 |
|       882 |        2 |            0 |
|       224 |        0 |            7 |
+-----------+----------+--------------+ 
```

查询 #2 的结果：

```
+-----------+------------------------+--------------+
| catalogid | ProcessedSucssessfully | NotProcessed |
+-----------+------------------------+--------------+
|       353 |o737,o739               |              |
|       364 |o738,o740               |              |
|       882 |o741                    |              |
|       224 |                        |o742,o743     |
+-----------+------------------------+--------------+ 
```

想要的结果：

```
+-----------+-----------+--------------+-------------------------+---------------+
| catalogid | numitems  | ignoreditems | ProcessedSucssessfully  | NotProcessed  |
+-----------+-----------+--------------+-------------------------+---------------+
|       353 |         4 |            0 | o737,o739               |               |
|       364 |        10 |            0 | o738,o740               |               |
|       882 |         2 |            0 | o741                    |               |
|       224 |         0 |            7 |                         | o742,o743     |
+-----------+-----------+--------------+-------------------------+---------------+ 
```

Query1 的条件：

1.  如果`ocardtype`为空，则忽略`numitems`并将其视为`0`总和并将忽略的项目加到`ignoreditems`列中

2.  如果某些订单的 ocardtype 是 MasterCard 或 Visa 并且 odate 为空，则忽略 numitems 并将其视为 0 并将忽略的项目加到`ignoreditems`列中

3.  如果`ocardtype`是 Paypal 或 Sofort，那么只需计算`numitems`总和而不检查日期，因为这些类型不需要`odate`

Query2 的条件与 Query1 相同，但要做的事情不同：

1.  如果`ocardtype`为空，则添加`orderid`到`NotProcessed`

2.  如果`ocardtype`某些订单是万事达卡或维萨卡并且`odate`是空的，则添加`orderid`到`NotProcessed`

3.  如果`ocardtype`是 Paypal 或 Sofort，则不要检查`odate`并将其添加`orderid`到`ProcessedSucssessfully`

上述事情是在 2 个单独的查询中完成的，但我试图将其纳入一个查询，因为它们具有相同的条件

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T14:44:51.057

您可以在 sql 框上创建一个视图，然后只是 Linq 到该视图

```
select * from table_a inner join table_b on table_a.field_a = table_b.field_b 
```

编辑：

或者

```
Select * from (select * from table_a inner join table_b on table_a.field_a = table_b.field_b) AB
inner join
select * from (select * from table_c inner join table_d on table_c.field_c = table_d.field_d) CD
ON
AB.id_column = CD.id_column 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T20:32:58.473

SQL 服务器视图看起来像这样

```
SELECT * FROM
(
    Select  
       catalogid, numitems, allitems - numitems ignoreditems 
    from 
        (
        select * from
        (
            select  
                i.catalogid, 
                sum(case when (ocardtype in ('PayPal','Sofort') 
                OR 
                ocardtype in ('mastercard','visa') and odate is not null) then numitems 
                else 0 end) numitems, 
                sum(numitems) allitems 
            from 
                orders
         ) o
        inner join
            items i 
        on 
            i.orderid=o.orderid
        inner join 
            products T1 
        on 
            T1.catalogid = i.catalogid
        group by 
            i.catalogid
        ) A
    ) X 
) B
INNER JOIN
SELECT * FROM
(
    SELECT 
        catalogId, 
        ProcessedSucssessfully = 
           STUFF((SELECT ', ' + CAST( b.orderid as varchar(10)) 
                  FROM oitems b JOIN orders o ON b.orderid = o.orderid 
                  WHERE b.catalogId = a.catalogId 
                  AND (o.ocardtype in ('PayPal','Sofort') OR o.ocardtype in  ('mastercard','visa') and o.odate is not null) 
                  FOR XML PATH('')), 1, 2, ''), 
                      NotProcessed = 
            STUFF((SELECT ', ' + CAST( c.orderid as varchar(10)) 
                   FROM oitems c JOIN orders o ON c.orderId = o.orderid 
                   WHERE c.catalogid = a.catalogid 
                   AND (o.ocardtype in ('mastercard') OR o.ocardtype is null) and o.odate is null 
                   FOR XML PATH('')), 1, 2, '') 
    FROM 
        oitems a 
    GROUP BY 
        a.CatalogId 
) B
ON A.CatalogId = B.CatalogId 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-04T12:37:55.523

好的，我们开始吧，我构建了表结构来验证 SQL。我没有加载任何数据，但它确实执行了。

```
SELECT * FROM
(
Select  
   catalogid, numitems, allitems - numitems ignoreditems 
from 
    (
        select  
            i.catalogid, 
            case 
                when ocardtype in ('PayPal','Sofort') then sum(i.numitems)
                when ocardtype in ('mastercard','visa') and odate is not null then sum(i.numitems)
            else 0 end numitems, 
            sum(numitems) allitems 
        from 
            orders o
        inner join
            oitems i 
        on 
            i.orderid=o.orderid
        inner join 
            products T1 
        on 
            T1.catalogid = i.catalogid
        group by 
            i.catalogid, ocardtype, odate
    ) A
) B
INNER JOIN
(
    SELECT 
        catalogId, 
        ProcessedSucssessfully = 
           STUFF((SELECT ', ' + CAST( b.orderid as varchar(10)) 
                  FROM oitems b JOIN orders o ON b.orderid = o.orderid 
                  WHERE b.catalogId = a.catalogId 
                  AND (o.ocardtype in ('PayPal','Sofort') OR o.ocardtype in  ('mastercard','visa') and o.odate is not null) 
                  FOR XML PATH('')), 1, 2, ''), 
                      NotProcessed = 
            STUFF((SELECT ', ' + CAST( c.orderid as varchar(10)) 
                   FROM oitems c JOIN orders o ON c.orderId = o.orderid 
                   WHERE c.catalogid = a.catalogid 
                   AND (o.ocardtype in ('mastercard') OR o.ocardtype is null) and o.odate is null 
                   FOR XML PATH('')), 1, 2, '') 
    FROM 
        oitems a 
    GROUP BY 
        a.CatalogId 
)C
    ON 
        B.CatalogId = C.CatalogId 
```

# asp.net - Web 表单中的不同项目模板 - 转发器控件

> ID：12710863
> 
> 赞同：0
> 
> 时间：2012-10-03T14:40:55.863
> 
> 标签：asp.net, webforms, repeater

我有一个转发器，它为我的集合中的每个项目呈现文本框。但是对于某些项目，我希望有一个复选框而不是基于项目属性的文本框。它是可行的还是中继器只能与一个一起使用`ItemTemplate`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T23:45:57.370

您可以让转发器根据项目的属性加载不同的用户控件。

# java - 未找到 API 包“remote_socket”或调用“Resolve()”-GAE Java

> ID：12710865
> 
> 赞同：0
> 
> 时间：2012-10-03T14:41:03.303
> 
> 标签：java, google-app-engine, apache-httpclient-4.x

我正在尝试在 GAE 云中托管的 GAE 应用程序中调用 Google 服务：

```
private String doPost(String URL) throws ClientProtocolException, IOException {
    // Params:
    List<NameValuePair> params = new ArrayList<NameValuePair>();
    params.add(new BasicNameValuePair("accountType", "HOSTED_OR_GOOGLE"));
    params.add(new BasicNameValuePair("Email", _DEFAULT_USER));
    params.add(new BasicNameValuePair("Passwd", _DEFAULT_PASS));
    params.add(new BasicNameValuePair("service", "ah"));
    // Call
    HttpClient httpClient = new DefaultHttpClient();
    HttpPost post = new HttpPost(URL); // URL:
                                        // https://www.google.com/accounts/ClientLogin
    post.setEntity(new UrlEncodedFormEntity(p_params, HTTP.UTF_8));
    post.getParams().setBooleanParameter(
            CoreProtocolPNames.USE_EXPECT_CONTINUE, false);
    HttpResponse response = httpClient.execute(post);
    return _ProcessResponse(response); // Process...
} 
```

**执行抛出：** `com.google.apphosting.api.ApiProxy$CallNotFoundException: The API package 'remote_socket' or call 'Resolve()' was not found` .

有任何想法吗？我完全迷路了...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T14:59:05.363

你可以使用不同的http客户端吗？比如[这里](https://groups.google.com/forum/?fromgroups=#!topic/google-appengine-java/H3v7qIM25ls)推荐的：

```
client = new HttpClient(new SimpleHttpConnectionManager()); 
```

或者如何使用[URLFetchService](http://code.google.com/appengine/docs/java/javadoc/com/google/appengine/api/urlfetch/URLFetchService.html)？

根据[this blog post](http://esxx.blogspot.com/2009/06/using-apaches-httpclient-on-google-app.html)，您需要：

> “自定义连接管理器转换最终请求并将它们提供给 URL Fetch 服务，然后将响应反馈给 HttpClient。”

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T06:10:47.603

未找到 API 包 'remote_socket' 或调用 'Resolve()' 意味着已请求 InetAddress 进行名称解析，并且未找到不符合要求的 API (remote_socket.Resolve)。

remote_socket API 作为受信任的套接字测试程序的一部分启用。

无论如何，您的问题是我们尚不支持在应用程序引擎运行时中解析 IP 地址（本地主机等除外）。

直接使用 urlfetch api 的建议是一种解决方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-04T11:15:02.003

谢谢！

解决了...

```
 URL url = new URL("https://www.google.com/accounts/ClientLogin");

        HttpURLConnection urlConnection = (HttpURLConnection) url.openConnection();
        urlConnection.setRequestMethod("POST");
        urlConnection.setDoInput(true);
        urlConnection.setDoOutput(true);
        urlConnection.setUseCaches(false);
        urlConnection.setRequestProperty("Content-Type",
                                         "application/x-www-form-urlencoded");

        StringBuilder content = new StringBuilder();
        content.append("Email=").append(URLEncoder.encode(_DEFAULT_USER, "UTF-8"));
        content.append("&Passwd=").append(URLEncoder.encode(_DEFAULT_PASS, "UTF-8"));
        content.append("&service=").append(URLEncoder.encode("ah", "UTF-8"));
        OutputStream outputStream = urlConnection.getOutputStream();
        outputStream.write(content.toString().getBytes("UTF-8"));
        outputStream.close();
        // Response....
        int responseCode = urlConnection.getResponseCode();
        InputStream inputStream;
        if (responseCode == HttpURLConnection.HTTP_OK) {
          inputStream = urlConnection.getInputStream();
        } else {
          inputStream = urlConnection.getErrorStream();
        } 
```

# graphviz - Graphviz — 将节点放置在水平线上

> ID：12710871
> 
> 赞同：1
> 
> 时间：2012-10-03T14:41:16.033
> 
> 标签：graphviz

我有以下 graphviz 文件。现在，边缘标签放置在水平线上，但我希望将节点放置在水平线上。我怎样才能做到这一点？

```
 digraph finite_state_machine {
    node [shape = doublecircle]; q_5;
    node [shape = circle];
    q_1 -> q_2 [ label = "." ];
    q_1 -> q_2 [ label = "\epsilon" ];
    q_2 -> q_1 [ label = "\epsilon" ];
    q_2 -> q_3 [ label = "a" ];
    q_3 -> q_4 [ label = "^\wedge a" ];
    q_3 -> q_4 [ label = "\epsilon" ];
    q_4 -> q_3 [ label = "\epsilon" ];
    q_4 -> q_5 [ label = "b" ];
} 
```

这是它目前的样子：![电流输出](../Images/7e797cd0adcc02cfcb455c6c17a5dfcf.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-03T16:10:05.647

您可以使用[`rank=same`](http://www.graphviz.org/content/attrs#drank)为所有节点强制相同的等级：

```
digraph finite_state_machine {
{
rank=same;
    node [shape = doublecircle]; q_5;
    node [shape = circle];
    q_1 -> q_2 [ label = "." ];
    q_1 -> q_2 [ label = "\epsilon" ];
    q_2 -> q_1 [ label = "\epsilon" ];
    q_2 -> q_3 [ label = "a" ];
    q_3 -> q_4 [ label = "^\wedge a" ];
    q_3 -> q_4 [ label = "\epsilon" ];
    q_4 -> q_3 [ label = "\epsilon" ];
    q_4 -> q_5 [ label = "b" ];
    }
} 
```

# magento - Magento 不完整的 SOLR 文档

> ID：12710881
> 
> 赞同：0
> 
> 时间：2012-10-03T14:41:47.907
> 
> 标签：magento, search, solr

出于某种原因，我的 SOLR 文档没有 Magento 提供的所有必需属性。例如，缺少“可见性”以及类别。这会导致文章不会出现在搜索中。

在调查过程中，我发现有时编辑并保存带有不完整文档的产品会有所帮助。我看到文档正在 SOLR 中更新。然后，在提交之后，文档具有缺失的属性。

但是我的最新测试在编辑/保存后没有完成文档，所以这似乎并不总是有效。

重新索引（只是）目录搜索似乎也无济于事。

在 Magento Enterprise 1.10.1.1 上运行，无需额外插件。索尔 3.4.0。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T08:50:53.280

我认为您的 Magento 版本太旧，无法正确处理 Solr。在使用 Solr 3.6.2 和 Magento EE 1.12 时，我遇到了类似的问题。从命令行重新索引导致 Solr 搜索索引中缺少字段。SKU 和 category_position_XX 以及其他一些在那里，但所有动态字段都丢失了。从后端重建索引对我来说不是一个选择，因为我正在处理 +120 万个 SKU。

我在[这里](https://stackoverflow.com/questions/12624068/magento-reindexing-loses-solr-docs)和[这里](https://stackoverflow.com/questions/11667728/magento-1-12-and-solr-3-6-no-proper-results-and-no-spell-suggestions)找到了一些灵​​感。

# ios - marmalade sdk UnicodeDecodeError

> ID：12710884
> 
> 赞同：2
> 
> 时间：2012-10-03T14:41:55.707
> 
> 标签：ios, sdk, blackberry-playbook, marmalade

我是 marmalade sdk 的新手，在 win 7 上启动 IwGxHelloWorld.mkb 时出错。有人可以帮忙吗？谢谢！错误本身：

```
D:\Marmalade\6.1\s3e\makefile_builder\mkb.py      
D:\Marmalade\Project\HelloWorld\IwGxHelloWorld.mkb
Building project: d:/Marmalade/Project/HelloWorld/IwGxHelloWorld.mkb
Traceback (most recent call last):
File "D:\Marmalade\6.1\s3e\bin\\..\..\s3e\makefile_builder\mkb.py", line 209, in
run()
File "D:\Marmalade\6.1\s3e\bin\\..\..\s3e\makefile_builder\mkb.py", line 137, in run
main(sys.argv)
File "D:\Marmalade\6.1\s3e\bin\\..\..\s3e\makefile_builder\mkb.py", line 32, in main
exit_code = mkb_main.run(argv)
File "d:\sdkbuild\sdk\main\s3e\makefile_builder\mkb_main.py", line 3461, in run
File "d:\sdkbuild\sdk\main\s3e\makefile_builder\mkb_main.py", line 3619, in run2
File "d:\sdkbuild\sdk\main\s3e\makefile_builder\mkb_main.py", line 2913, in process_mkb_for_platfo
rm
File "d:\sdkbuild\sdk\main\s3e\makefile_builder\plugins\s3e_vc6.py", line 142, in output
File "d:\sdkbuild\sdk\main\s3e\makefile_builder\plugins\visualstudioemitter.py", line 309, in outp
ut_proj_fles
File "d:\sdkbuild\sdk\main\s3e\makefile_builder\plugins\emitter.py", line 740, in convert
File "d:\sdkbuild\sdk\main\s3e\makefile_builder\templates\win32_vcproj.py", line 1426, in run
UnicodeDecodeError: 'ascii' codec can't decode byte 0xc2 in position 795: ordinal not in range(128) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T17:15:27.130

你的 Windows 是什么语言？俄语？看起来你在某处按下了俄语В。

# c# - 将 WPF 画布中的图像居中对齐

> ID：12710887
> 
> 赞同：1
> 
> 时间：2012-10-03T14:42:05.317
> 
> 标签：c#, wpf, xaml, canvas

我正在使用 Kinect 开发基于手势的图像查看器。我正在使用以下 XAML 代码在画布上显示图像。

```
 <Canvas Background="Transparent" Height="732" VerticalAlignment="Top">
        <Image x:Name="next" Source="{Binding NextPicture}" StretchDirection="Both" Stretch="Uniform" ClipToBounds="True" SnapsToDevicePixels="True" RenderOptions.BitmapScalingMode="HighQuality" RenderTransformOrigin="0.5,0.5" Opacity="0" Grid.ColumnSpan="2" Height="732" Width="Auto" HorizontalAlignment="Center" />
        <Image x:Name="previous" Source="{Binding PreviousPicture}" StretchDirection="Both" Stretch="Uniform" ClipToBounds="True" SnapsToDevicePixels="True" RenderOptions.BitmapScalingMode="HighQuality" RenderTransformOrigin="0.5,0.5" Opacity="0" Grid.ColumnSpan="2" Height="732" Width="Auto" HorizontalAlignment="Center" />
        <Image x:Name="current" Source="{Binding Picture}" StretchDirection="Both" Stretch="Uniform" ClipToBounds="True" SnapsToDevicePixels="True" RenderOptions.BitmapScalingMode="HighQuality" RenderTransformOrigin="0.5,0.5" Grid.ColumnSpan="2" Height="732" Width="Auto" HorizontalAlignment="Center" />
    </Canvas> 
```

这是在后面运行的代码：

```
 /// <summary>
    /// Gets the previous image displayed.
    /// </summary>
    public BitmapImage PreviousPicture { get; private set; }

    /// <summary>
    /// Gets the current image to be displayed.
    /// </summary>
    public BitmapImage Picture { get; private set; }

    /// <summary>
    /// Gets the next image displayed.
    /// </summary>
    public BitmapImage NextPicture { get; private set; } 
```

每次识别手势时，属性都会更改，如下所示：

```
 // Setup corresponding picture if pictures are available.
                this.PreviousPicture = this.Picture;
                this.Picture = this.NextPicture;
                this.NextPicture = LoadPicture(Index + 1);

                // Notify world of change to Index and Picture.
                if (this.PropertyChanged != null)
                {
                    this.PropertyChanged(this, new PropertyChangedEventArgs("PreviousPicture"));
                    this.PropertyChanged(this, new PropertyChangedEventArgs("Picture"));
                    this.PropertyChanged(this, new PropertyChangedEventArgs("NextPicture"));
                } 
```

然而问题是，我在画布上显示的图像随机向左或向右对齐。它们的纵横比有时也会发生变化。我想要的是，图像应该以其原始纵横比显示在画布的中心。有人可以在这方面帮助我吗？

此外，我可以使用 C# 代码将图像设置为中心，如下所示：

```
 Canvas.SetLeft(current, (1249 - current.ActualWidth) / 2);
    Canvas.SetTop(current, 0); 
```

其中，“current”是 XAML 代码中当前图像的名称。但我希望它自动发生。XAML 代码中是否有可能？如果没有，我该如何实现？

PS：我不太擅长 C# 或 WPF。因此，如果可能，请用外行术语解释。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-03T15:30:51.453

您可以通过使用接受和的参数的[IMultiValueConverter](http://msdn.microsoft.com/en-us/library/system.windows.data.imultivalueconverter.aspx)`Canvas.Left`绑定属性来在 XAML 中居中​​图像，然后返回，但是根据[您上面的评论](https://stackoverflow.com/questions/12710887/align-images-in-wpf-canvas-in-center#comment17162805_12710887)，听起来您允许用户通过设置使用手部动作重新定位图像图像，这将覆盖您与转换器的绑定。`Canvas.Width``Image.Width``(Canvas.Width / 2) - (Image.Width / 2)``Canvas.Left`

我实际上建议使用 a`Grid`而不是 a `Canvas`，并使用 定位您的图像`HorizontalAlignment=Center`，并允许用户使用 a 来调整图像的位置`RenderTransform`（请注意，您需要使用`RenderTransform`, not `LayoutTransform`，因此在渲染时应用转换，而不是在 WPF 是试图布局你的对象）。

如果这不起作用，我会将图片属性从 BitmapImages 更改为表示该图像的实际类，其属性为`BitmapImage`、`Top`和`Left`。要在图像周围移动，您将更改`Picture.Left`属性，当用户切换图片时，您可以将`Picture.Left`属性重置为其原始值

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T21:41:58.223

我会用帆布。当应用程序开始确定屏幕中心时，请使用一点方法。将窗口大小除以 2，然后将其用作图像位置的起点。对于 kinect 控制，我肯定会使用画布。

# scala - Scala——谓词的否定

> ID：12710891
> 
> 赞同：3
> 
> 时间：2012-10-03T14:42:24.747
> 
> 标签：scala

> **可能重复：**
> [如何在 Scala 中使用/引用布尔函数的否定？](https://stackoverflow.com/questions/12681616/how-to-use-refer-to-the-negation-of-a-boolean-function-in-scala)

我目前正在 coursera 中学习 Martin Odersky 的 Scala 课程。在其中一项作业中，我需要处理一个函数的否定（它代表一个谓词）。

```
def fun1 (p: Int => Boolean): Boolean = {
/* some code here */
} 
```

假设函数字面`p: Int => Boolean`量表示某种谓词，例如`x => x > 0`

```
def fun2 (p: Int => Boolean): Boolean = {
val x = fun1 (p)
val y = ???
/* How can I call the negation of the predicate 'p' here? */
return x && y
} 
```

例如，如果我打电话`fun2`给`fun2 (x => x > 0)`

我想了很多，但我没有取得任何进展。我不是要求任何分配问题的解决方案（我相信我坚持荣誉代码），但是对我在这里遗漏的任何解释都会有很大帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-03T16:05:48.490

您想编写一个将谓词作为参数并返回另一个谓词的函数。

```
def negate(pred: Int => Boolean): Int => Boolean =
  (x: Int) => !pred(x) 
```

# iphone - 'Xcode 找不到要在此版本中安装的软件映像' xcode 4.5

> ID：12710894
> 
> 赞同：0
> 
> 时间：2012-10-03T14:42:26.180
> 
> 标签：iphone, ios, xcode

有谁知道如何处理**xcode 4.5 > 管理**器中的**配置**文件，其中 iPhone 设备的配置文件显示***“Xcode 找不到要在此版本中安装的软件映像”。***

 ***我在 Apple 开发人员页面上设置了证书和配置文件，即使我的 iphone 设备旁边有**绿灯**，它也表明它处于活动状态，但**“Xcode 找不到要在此版本中安装的软件映像”。**

该消息仅意味着它无法恢复我的 iPhone，因为它没有下载正确的内容。我怎样才能正确？我在 iPhone 4s 上使用 iOS6。

[对齐顶部 http://www.kerrydeaf.com/xcode_device.png](http://www.kerrydeaf.com/xcode_device.png "工具提示") [对齐顶部 http://www.kerrydeaf.com/xcode_device_restore.png](http://www.kerrydeaf.com/xcode_device_restore.png "工具提示")

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T14:51:41.870

该“软件版本”不适用于配置文件，但适用于您设备上的 iOS 软件。Xcode 现在无法将 iOS 6 恢复到您的设备。对于您的配置文件，在左侧边栏中，单击“配置文件”来处理它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T17:30:31.523

在管理器窗口中看到消息“ *xcode 找不到安装此版本的软件映像*”......这只是一个通知，而不是一个有问题的错误。

如果你想消除这个消息，我发现我可以通过在 iTunes 中运行恢复来做到这一点。该过程的一部分涉及下载一些东西，我认为这是“软件映像”。

但是，正如[技术问答 QA1569](http://developer.apple.com/library/ios/#qa/qa1569/_index.html)中所解释的， “此消息不会阻止您将设备用于开发目的。唯一的影响是无法使用 Xcode 重新安装当前在设备上的操作系统。” ……这就是我的经验。回到 Xcode 主窗口，您仍然可以单击“运行”并将应用程序发送到设备以运行。

...并且它会在其他一切设置正常的情况下运行，但还有与 Xcode 4.2 和 v4 设备相关的各种其他陷阱：

*   正如 Overbeeke 所提到的，您应该确保将项目的“部署目标”设置为所需的版本（您要支持的设备的最低版本）此外，我要指出，“SDK 版本”通常应保持设置为最新的（它是您机器上使用的任何 SDK Xcode）

*   正如 Kenneth Lam 所提到的，在新的 Xcode 中，如果您想支持早期型号的 iPhone，您需要使用“armv6/armv7”设置。按照[这些说明添加正确的“架构”armv6 设置](https://stackoverflow.com/a/7687527/338265)。另外我会指出（[根据这个答案进一步向下](https://stackoverflow.com/a/6833556/338265)）有一个名为“所需设备功能”的设置，您需要从中删除“armv7”。这在您应用的 plist 文件中。

我说这一切就像我是专家一样，但我仍然无法让它在 v3.1.3 设备上工作:-)***

# javascript - 将连字与 jquery 应用于仅链接文本，而不是链接 href

> ID：12710898
> 
> 赞同：0
> 
> 时间：2012-10-03T14:42:31.167
> 
> 标签：javascript, jquery, ligature

我正在使用 ligatures.js 用某些字符组合的连字替换我网站中的文本。例如，“五”中的“fi”。

这是我的例子：http: [//jsfiddle.net/vinmassaro/GquVy/](http://jsfiddle.net/vinmassaro/GquVy/)

当你运行它时，你可以选择输出文本，看到'五'中的'fi'已经按预期变成了一个字符。如果您复制链接地址并粘贴它，您将看到 href 部分也已被替换：

```
/news/here-is-a-url-with-%EF%AC%81ve-ligature 
```

这是无意的，会破坏链接。如何仅对链接的文本而不是 href 部分进行替换？我试过使用 .text() 和 .not() 没有运气。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T15:25:17.510

我认为您可以使用适当的 jQuery 选择器来解决它

```
$('h3 a, h3:not(:has(a))')
  .ligature('ffi', '&#xfb03;')
  .ligature('ffl', '&#xfb04;')
  .ligature('ff', '&#xfb00;')
  .ligature('fi', '&#xfb01;')
  .ligature('fl', '&#xfb02;'); 
```

见[http://jsfiddle.net/GquVy/7/](http://jsfiddle.net/GquVy/7/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T14:50:33.913

您正在将该函数应用于整个标题`innerHTML`，其中包括锚的`href`属性。这应该适用于您的小提琴示例：

```
$('h1 a, h2 a, h3 a, h4 a').ligature( //... 
```

但是，它仅适用于标题内的链接，我不确定这是否是您要查找的内容。如果您想要适用于某个元素内的*任何内容（具有**任何*级别的标签嵌套）的东西，那么您将需要一种递归方法。这是一个想法，它基本上是纯 JavaScript，因为 jQuery 不提供针对 DOM 文本节点的方法：

```
$.fn.ligature = function(str, lig) {
    return this.each(function() {
        recursiveLigatures(this, lig);
    });

    function recursiveLigatures(el, lig) {
        if(el.childNodes.length) {
            for(var i=0, len=el.childNodes.length; i<len; i++) {
                if(el.childNodes[i].childNodes.length > 0) {
                    recursiveLigatures(el.childNodes[i], lig);
                } else {
                    el.childNodes[i].nodeValue = htmlDecode(el.childNodes[i].nodeValue.replace(new RegExp(str, 'g'), lig));
                }
            }
        } else {
            el.nodeValue = htmlDecode(el.nodeValue.replace(new RegExp(str, 'g'), lig));
        }
    }

    // http://stackoverflow.com/a/1912522/825789
    function htmlDecode(input){
      var e = document.createElement('div');
      e.innerHTML = input;
      return e.childNodes.length === 0 ? "" : e.childNodes[0].nodeValue;
    }
};

// call this from the document.ready handler
$(function(){
    $('h3').ligature('ffi', '&#xfb03;')
           .ligature('ffl', '&#xfb04;')
           .ligature('ff', '&#xfb00;')
           .ligature('fi', '&#xfb01;')
           .ligature('fl', '&#xfb02;');
}); 
```

这应该适用于这样的内容：

```
<h3>
    mixed ffi content 
    <span>this is another tag ffi <span>(and this is nested ffi</span></span>
    <a href="/news/here-is-a-url-with-ffi-ligature">Here is a ffi ligature</a>
</h3> 
```

[http://jsfiddle.net/JjLZR/](http://jsfiddle.net/JjLZR/)

# silverlight-5.0 - 在 Silverlight 中合并来自另一个程序集的资源

> ID：12710899
> 
> 赞同：1
> 
> 时间：2012-10-03T14:42:32.243
> 
> 标签：silverlight-5.0, resourcedictionary, pack-uri

我在 silverlight 项目中添加了一个名为 ResourceDictionary1 的资源字典。

我还在名为 OtherAssembly 的项目中添加了一个 Silverlight 类库，然后在这个新程序集中添加了一个名为 ResourceDictionary2 的新资源字典：

[![项目结构](../Images/cfd01d4f818bec3675506bf9594598e0.png)](https://i.stack.imgur.com/2bOa6.jpg)

在我原来的项目中，我试图在 MainPage.xaml 中合并两个字典：

```
 <ResourceDictionary>
     <ResourceDictionary.MergedDictionaries>
        <ResourceDictionary Source="MyResourceDictionary1.xaml" />
        <ResourceDictionary Source="/OtherAssembly;component/MyResourceDictionary2.xaml" />
     </ResourceDictionary.MergedDictionaries> 
```

当我运行项目时，带有 OtherAssembly 的行会引发异常，说**在该行中分配属性 System.Windows.ResourceDictionary.Source 时出错**：

[![错误](../Images/969f16dace5d48714c0a540673cc872c.png)](https://i.stack.imgur.com/J2Yyp.jpg)

但是在设计时，设计师会按顺序显示所有内容，它会找到所有资源。

我不知道，Pack Uri 语法似乎格式不正确。

有人知道为什么我会收到此错误消息吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T12:23:08.053

我找到了答案。

我需要添加对 OtherAssembly 的引用，因为直到运行时才检测到错误，所以很难检测到它。

# ruby - Selenium Webdriver 测试在本地工作，但在构建服务器上失败

> ID：12710904
> 
> 赞同：0
> 
> 时间：2012-10-03T14:42:49.987
> 
> 标签：ruby, selenium, selenium-webdriver

我的 selenium webdriver - ruby​​ 测试在本地构建并识别 Firefox 上的所有元素。但是，它在服务器上失败。奇怪的是，它失败的步骤在测试中出现了 4 次。前 3 次通过，第 4 次失败。如何解决此问题？失败的可能原因是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T02:41:33.770

不像听起来那么简单，我可以通过在测试脚本中添加一些时间等待来解决这个问题，尤其是在需要对子窗口执行操作的步骤周围。由于我的测试涉及大量子窗口、模式窗口、flash 消息等，我花了很多时间来确定脚本失败的确切步骤。我运行测试的服务器有一个无头浏览器，因此很少有操作（弹出窗口操作）比平时花费更长的时间。

# typescript - 如何在 TypeScript 中为对象动态分配属性？

> ID：12710905
> 
> 赞同：657
> 
> 时间：2012-10-03T14:42:54.220
> 
> 标签：typescript

如果我想以编程方式将属性分配给 Javascript 中的对象，我会这样做：

```
var obj = {};
obj.prop = "value"; 
```

但在 TypeScript 中，这会产生错误：

> “{}”类型的值上不存在属性“prop”

我应该如何将任何新属性分配给 TypeScript 中的对象？

* * *

## 回答 #1

> 赞同：864
> 
> 时间：2017-06-08T16:32:42.870

## 索引类型

可以表示`obj`为`any`，但这违背了使用打字稿的全部目的。`obj = {}`暗示`obj`是一个`Object`. 将其标记为`any`没有意义。为了实现所需的一致性，可以如下定义接口。

```
interface LooseObject {
    [key: string]: any
}

var obj: LooseObject = {}; 
```

或使其紧凑：

```
var obj: {[k: string]: any} = {}; 
```

`LooseObject`可以接受任何字符串作为键和`any`类型作为值的字段。

```
obj.prop = "value";
obj.prop2 = 88; 
```

此解决方案的真正优雅之处在于您可以在界面中包含类型安全字段。

```
interface MyType {
    typesafeProp1?: number,
    requiredProp1: string,
    [key: string]: any
}

var obj: MyType ;
obj = { requiredProp1: "foo"}; // valid
obj = {} // error. 'requiredProp1' is missing
obj.typesafeProp1 = "bar" // error. typesafeProp1 should be a number

obj.prop = "value";
obj.prop2 = 88; 
```

## `Record<Keys,Type>` 实用类型

> 更新（2020 年 8 月）：@transang 在评论中提出了这一点

> `Record<Keys,Type>`是打字稿中的实用程序类型。对于属性名称未知的键值对，它是一种更简洁的替代方案。值得注意的是where和are generics`Record<Keys,Type>`的命名别名。IMO，这在这里值得一提`{[k: Keys]: Type}``Keys``Type`

为了比较，

```
var obj: {[k: string]: any} = {}; 
```

变成

```
var obj: Record<string,any> = {} 
```

`MyType`现在可以通过扩展 Record 类型来定义

```
interface MyType extends Record<string,any> {
    typesafeProp1?: number,
    requiredProp1: string,
} 
```

> 虽然这回答了原始问题，但@GreeneCreations 的答案[可能](https://stackoverflow.com/a/54445030/2605574)会为如何解决问题提供另一种观点。

* * *

## 回答 #2

> 赞同：103
> 
> 时间：2012-10-03T15:51:04.087

或者一口气：

```
 var obj:any = {}
  obj.prop = 5; 
```

* * *

## 回答 #3

> 赞同：81
> 
> 时间：2016-08-25T08:51:46.003

当您的对象具有特定类型时，此解决方案很有用。就像将对象获取到其他来源时一样。

```
let user: User = new User();
(user as any).otherProperty = 'hello';
//user did not lose its type here. 
```

* * *

## 回答 #4

> 赞同：78
> 
> 时间：2013-08-26T12:32:15.670

我倾向于放在`any`另一边，即`var foo:IFoo = <any>{};`这样的东西仍然是类型安全的：

```
interface IFoo{
    bar:string;
    baz:string;
    boo:string;     
}

// How I tend to intialize 
var foo:IFoo = <any>{};

foo.bar = "asdf";
foo.baz = "boo";
foo.boo = "boo";

// the following is an error, 
// so you haven't lost type safety
foo.bar = 123; 
```

或者，您可以将这些属性标记为可选：

```
interface IFoo{
    bar?:string;
    baz?:string;
    boo?:string;    
}

// Now your simple initialization works
var foo:IFoo = {}; 
```

[在线尝试](http://www.typescriptlang.org/Playground/#src=interface%20IFoo%7B%0A%09bar?:string;%0A%09baz?:string;%0A%09boo?:string;%20%09%0A%7D%0A%0A//%20How%20I%20tend%20to%20intialize%20%0Avar%20foo:IFoo%20=%20%7B%7D;%0A)

* * *

## 回答 #5

> 赞同：40
> 
> 时间：2012-10-03T14:57:43.397

尽管编译器抱怨它仍应按您的要求输出它。但是，这将起作用。

```
const s = {};
s['prop'] = true; 
```

* * *

## 回答 #6

> 赞同：28
> 
> 时间：2017-03-22T13:23:06.633

另一种选择是将属性作为集合访问：

```
var obj = {};
obj['prop'] = "value";
```

* * *

## 回答 #7

> 赞同：27
> 
> 时间：2019-01-30T16:21:18.450

我很惊讶没有一个答案引用 Object.assign，因为这是我在考虑 JavaScript 中的“组合”时使用的技术。

它在 TypeScript 中按预期工作：

```
interface IExisting {
    userName: string
}

interface INewStuff {
    email: string
}

const existingObject: IExisting = {
    userName: "jsmith"
}

const objectWithAllProps: IExisting & INewStuff = Object.assign({}, existingObject, {
    email: "jsmith@someplace.com"
})

console.log(objectWithAllProps.email); // jsmith@someplace.com 
```

**好处**

*   贯穿始终的类型安全，因为您根本不需要使用该`any`类型
*   使用 TypeScript 的聚合类型（`&`在声明 的类型时`objectWithAllProps`由

**需要注意的事项**

1.  Object.assign 有它自己独特的方面（大多数有经验的 JS 开发人员都知道），在编写 TypeScript 时应该考虑这些方面。
    *   它可以以可变方式或不可变方式使用（我在上面演示了不可变方式，这意味着`existingObject`保持不变，因此没有`email`属性。对于大多数函数式程序员来说，这是一件好事，因为结果是唯一的新变化）。
    *   当你有更扁平的对象时，Object.assign 效果最好。如果您正在组合两个包含可为空属性的嵌套对象，您最终可能会用未定义覆盖真实值。如果你注意 Object.assign 参数的顺序，你应该没问题。

* * *

## 回答 #8

> 赞同：20
> 
> 时间：2019-06-09T22:59:43.387

您可以使用扩展运算符基于旧对象创建新对象

```
interface MyObject {
    prop1: string;
}

const myObj: MyObject = {
    prop1: 'foo',
}

const newObj = {
    ...myObj,
    prop2: 'bar',
}

console.log(newObj.prop2); // 'bar' 
```

TypeScript 将推断原始对象的所有字段，VSCode 将执行自动补全等。

* * *

## 回答 #9

> 赞同：12
> 
> 时间：2019-01-12T15:45:35.020

情况1：

```
var car = {type: "BMW", model: "i8", color: "white"};
car['owner'] = "ibrahim"; // You can add a property: 
```

案例二：

```
var car:any = {type: "BMW", model: "i8", color: "white"};
car.owner = "ibrahim"; // You can set a property: use any type 
```

* * *

## 回答 #10

> 赞同：11
> 
> 时间：2019-07-09T20:53:42.147

你可以使用这个：

```
this.model = Object.assign(this.model, { newProp: 0 }); 
```

* * *

## 回答 #11

> 赞同：10
> 
> 时间：2019-02-09T09:43:08.907

因为你不能这样做：

```
obj.prop = 'value'; 
```

如果你的 TS 编译器和你的 linter 不严格你，你可以这样写：

```
obj['prop'] = 'value'; 
```

如果您的 TS 编译器或 linter 是严格的，另一个答案是类型转换：

```
var obj = {};
obj = obj as unknown as { prop: string };
obj.prop = "value"; 
```

* * *

## 回答 #12

> 赞同：9
> 
> 时间：2019-05-02T20:18:30.430

最简单的将遵循

```
const obj = <any>{};
obj.prop1 = "value";
obj.prop2 = "another value" 
```

* * *

## 回答 #13

> 赞同：8
> 
> 时间：2020-03-04T20:19:54.550

这是 的一个特殊版本`Object.assign`，它会随着每个属性的变化自动调整变量类型。不需要额外的变量、类型断言、显式类型或对象副本：

```
function assign<T, U>(target: T, source: U): asserts target is T & U {
    Object.assign(target, source)
}

const obj = {};
assign(obj, { prop1: "foo" })
//  const obj now has type { prop1: string; }
obj.prop1 // string
assign(obj, { prop2: 42 })
//  const obj now has type { prop1: string; prop2: number; }
obj.prop2 // number

//  const obj: { prop1: "foo", prop2: 42 } 
```

注意：该[示例](https://www.typescriptlang.org/play/#code/GYVwdgxgLglg9mABAQwM6pgczAHgCoA0iAqgHwAUUyATpgKZQBcihiqcI1EdzxAlMzSo61KKkRVaDRDHF5EAMhKIA3gFgAUIm2IA8gCMAVnWgA6IVjCUa9KEXadufTQF9NmiAlRREcI4gBeVRcAbk0LbHI-QyIVRAAHajh4gEZmACJgODh0xBdnDQB6Qu1PMG9ffzA4AHdEAAs0CQBPeLpVBKTU5m9qGDBMELzNaNNE5JTEYrYoPoHw9Esoo1jO5IAmZgAWdbyC6cQyiujEarrG8ShW9rjx7pm5wbzFDrvN05AAW30RIbcNUZvKYlMBfH7UdwaI5wAA2dFMMLgmGWhgKkKAA)使用 TS 3.7[断言函数](https://www.typescriptlang.org/docs/handbook/release-notes/typescript-3-7.html#assertion-functions)。的返回类型`assign`是`void`，不像`Object.assign`。

* * *

## 回答 #14

> 赞同：7
> 
> 时间：2017-06-16T14:15:47.473

要保证类型是一个`Object`（即**键值对**），请使用：

```
const obj: {[x: string]: any} = {}
obj.prop = 'cool beans' 
```

* * *

## 回答 #15

> 赞同：6
> 
> 时间：2018-03-08T11:20:54.507

可以通过以下方式将成员添加到现有对象

1.  扩大类型（阅读：扩展/专门化接口）
2.  将原始对象转换为扩展类型
3.  将成员添加到对象

```
interface IEnhancedPromise<T> extends Promise<T> {
    sayHello(): void;
}

const p = Promise.resolve("Peter");

const enhancedPromise = p as IEnhancedPromise<string>;

enhancedPromise.sayHello = () => enhancedPromise.then(value => console.info("Hello " + value));

// eventually prints "Hello Peter"
enhancedPromise.sayHello(); 
```

* * *

## 回答 #16

> 赞同：4
> 
> 时间：2016-10-11T23:32:30.163

最佳做法是使用安全输入，我建议您：

```
interface customObject extends MyObject {
   newProp: string;
   newProp2: number;
} 
```

* * *

## 回答 #17

> 赞同：3
> 
> 时间：2015-11-25T13:21:47.637

通过将其类型转换为“any”，将任何新属性存储在任何类型的对象上：

```
var extend = <any>myObject;
extend.NewProperty = anotherObject; 
```

稍后您可以通过将扩展对象转换回“任何”来检索它：

```
var extendedObject = <any>myObject;
var anotherObject = <AnotherObjectType>extendedObject.NewProperty; 
```

* * *

## 回答 #18

> 赞同：3
> 
> 时间：2016-12-09T16:44:39.360

要保留您以前的类型，请将您的对象临时转换为任何

```
 var obj = {}
  (<any>obj).prop = 5; 
```

新的动态属性仅在您使用强制转换时可用：

```
 var a = obj.prop; ==> Will generate a compiler error
  var b = (<any>obj).prop; ==> Will assign 5 to b with no error; 
```

* * *

## 回答 #19

> 赞同：3
> 
> 时间：2020-11-10T18:50:42.867

为 Angular 扩展 @jmvtrinidad 解决方案，

当使用已经存在的类型对象时，这是添加新属性的方法。

```
let user: User = new User();
(user as any).otherProperty = 'hello';
//user did not lose its type here. 
```

现在，如果您想`otherProperty`在 html 端使用，这就是您所需要的：

```
<div *ngIf="$any(user).otherProperty">
   ...
   ...
</div> 
```

Angular 编译器将类型`$any()`转换视为`any`类型转换，就像在 TypeScript中使用`<any>`或转换时一样`as any`。

* * *

## 回答 #20

> 赞同：2
> 
> 时间：2012-10-03T15:02:17.000

您可以添加此声明以使警告静音。

```
declare var obj: any; 
```

* * *

## 回答 #21

> 赞同：2
> 
> 时间：2017-03-30T04:31:23.143

**在 TypeScript 中为对象动态分配属性。**

要做到这一点你只需要像这样使用打字稿接口：

```
interface IValue {
    prop1: string;
    prop2: string;
}

interface IType {
    [code: string]: IValue;
} 
```

你可以这样使用它

```
var obj: IType = {};
obj['code1'] = { 
    prop1: 'prop 1 value', 
    prop2: 'prop 2 value' 
}; 
```

* * *

## 回答 #22

> 赞同：2
> 
> 时间：2020-04-20T17:03:17.423

唯一完全类型安全的解决方案是[这个](https://stackoverflow.com/a/56518971/288906)，但有点罗嗦，并迫使您创建多个对象。

如果您***必须先***创建一个空对象，请选择这两种解决方案之一。请记住，每次使用 时`as`，您都会失去安全感。

# 更安全的解决方案

的类型在内部`object`是**安全**`getObject`的，这意味着`object.a`将是类型`string | undefined`

```
interface Example {
  a: string;
  b: number;
}

function getObject() {
  const object: Partial<Example> = {};
  object.a = 'one';
  object.b = 1;
  return object as Example;
} 
```

# 简短的解决方案

的类型在内部`object`是**不安全**`getObject`的，这意味着即使在分配之前`object.a`也是类型。`string`

```
interface Example {
  a: string;
  b: number;
}

function getObject() {
  const object = {} as Example;
  object.a = 'one';
  object.b = 1;
  return object;
} 
```

* * *

## 回答 #23

> 赞同：1
> 
> 时间：2018-01-02T03:07:52.807

如果你使用的是 Typescript，想必你想使用类型安全；在这种情况下，裸对象和“任何”被反指示。

最好不要使用 Object 或 {}，而是使用一些命名类型；或者您可能正在使用具有特定类型的 API，您需要使用自己的字段进行扩展。我发现这个工作：

```
class Given { ... }  // API specified fields; or maybe it's just Object {}

interface PropAble extends Given {
    props?: string;  // you can cast any Given to this and set .props
    // '?' indicates that the field is optional
}
let g:Given = getTheGivenObject();
(g as PropAble).props = "value for my new field";

// to avoid constantly casting: 
let k:PropAble = getTheGivenObject();
k.props = "value for props"; 
```

* * *

## 回答 #24

> 赞同：0
> 
> 时间：2019-10-16T17:43:32.803

试试这个：

```
export interface QueryParams {
    page?: number,
    limit?: number,
    name?: string,
    sort?: string,
    direction?: string
} 
```

然后使用它

```
const query = {
    name: 'abc'
}
query.page = 1 
```

* * *

## 回答 #25

> 赞同：0
> 
> 时间：2022-03-03T11:10:32.483

我在尝试对充当状态存储的对象进行部分更新时遇到了这个问题。

```
type State = {
  foo: string;
  bar: string;
  baz: string;
};

const newState = { foo: 'abc' };

if (someCondition) {
  newState.bar = 'xyz'
}

setState(newState); 
```

在这种情况下，最好的解决方案是使用`Partial<T>`. 它使用`?`令牌使提供的类型上的所有属性都是可选的。在更具体的 SO 主题中阅读有关它[的更多信息，关于将类型上的所有属性设为 optional](https://stackoverflow.com/a/40076355/742872)。

这是我解决它的方法`Partial<T>`：

```
type State = {
  foo: string;
  bar: string;
  baz: string;
};

const newState: Partial<State> = { foo: 'abc' };

if (someCondition) {
  newState.bar = 'xyz';
}

setState(newState); 
```

这类似于 fregante 在他们的回答中描述的内容，但我想为这个特定的用例（这在前端应用程序中很常见）画出更清晰的画面。

# java - 如何检测客户端何时与服务器断开连接

> ID：12710909
> 
> 赞同：4
> 
> 时间：2012-10-03T14:43:06.340
> 
> 标签：java, sockets

我有一个在服务器（服务器 A）上运行的程序，它在一个端口上侦听外部连接（来自外部服务器，B），然后在另一个端口上侦听同一服务器（服务器 A）上的内部连接。然后它将数据从内部连接传递到外部连接并再次返回。

我想知道是否有一种方法可以检测到外部客户端已断开连接。我一次只需要一个外部连接，但如果外部客户端重新启动或类似情况，我希望能够接受一个新连接。

这个套接字级别的东西对我来说都是相当新的，所以如果有更好的方法来解决这个问题，我会全神贯注。一个规定是服务器 B 上运行的客户端必须是发起连接的客户端，并且连接必须尽可能长。

```
public void handleConnection() {
    System.out.println("Waiting for client message...");
    try {
        SSLSocket extSocket = (SSLSocket) this.externalServerSocket.accept();

        ObjectInputStream externalOis = new ObjectInputStream(extSocket.getInputStream());
        ObjectOutputStream externalOos = new ObjectOutputStream(extSocket.getOutputStream());
        System.out.println("Client connection establisthed");
        // Loop here to accept all internal connections
        while (true) {

            SSLSocket internalSocket = (SSLSocket) this.internalServerSocket.accept();
            new ConnectionHandler(externalOis, externalOos, internalSocket);

        }
    } catch (IOException e) {
        System.err.println(e.getMessage());
        return;
    }
}

class ConnectionHandler implements Runnable {
    private SSLSocket internalSocket;

    private ObjectOutputStream internalOos;
    private ObjectInputStream internalOis;

    private ObjectInputStream externalOis;
    private ObjectOutputStream externalOos;

    public ConnectionHandler(ObjectInputStream externalOis,
            ObjectOutputStream externalOos, SSLSocket internalSocket) {

        this.internalSocket = internalSocket;

        try {
            this.internalOis = new ObjectInputStream(this.internalSocket.getInputStream());
            this.internalOos = new ObjectOutputStream(this.internalSocket.getOutputStream());

            this.externalOis = externalOis;
            this.externalOos = externalOos;

        } catch (IOException e) {
            System.err.println(e.getMessage());
        }
        new Thread(this).start();
    }

    @Override
    public void run() {
        try
        {

          // process data
          Object o = internalOis.readObject();
            externalOos.writeObject(o);
            Object o2 = externalOis.readObject();
            internalOos.writeObject(02);

            internalOos.close();
            internalOis.close();

            this.internalSocket.close();

        } catch (IOException e) {
            System.err.println(e.getMessage());
        } catch (ClassNotFoundException e) {
            System.err.println(e.getMessage());
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-02-22T04:49:55.073

如果客户端断开连接，`readObject()`将抛出`EOFException`，`write()`并将抛出`IOException: connection reset`. 这就是你所需要的。

# javascript - 创建和调用外部 JS 文件

> ID：12710910
> 
> 赞同：0
> 
> 时间：2012-10-03T14:43:09.930
> 
> 标签：javascript

我花了很多时间来创建和测试一个包含很多功能的应用程序。现在我已经配置了所有内容并且它可以按照我的意愿工作，我想开始清理代码，使其不再是 400 行的糊状。

我已经创建了一个外部 CSS 文件，并且想对 JS 甚至可能是 HTML 做类似的事情（大约 100 行 HTML 代码，ick）。

诚然，我是一名新手程序员，但在我做这件事的短时间内，我已经掌握了相当多的知识。将函数分离到外部文件然后调用它们以使整个应用程序像现在一样工作的最佳方法是什么？

例如（这是一个网络地图应用程序）：我有搜索、底图库、图例、图层、init、infowindows 等功能。由于代码已经编写，我将在未来创建多个应用程序，目标就是将这些 js 函数放在文件中，以供任何需要它们的应用程序引用。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T14:46:21.210

要链接外部 javascript 文件，请放置一个带有 src 属性的脚本标记，该属性指向您的文件。

```
<script src="legend.js"></script>
<script src="layers.js"></script>
<script src="init.js"></script> 
```

调用函数不需要什么特别的。

```
onclick="myFunction();" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T14:46:34.697

你能不能把所有这些函数放在一个 .js 文件中，然后从你的网页中调用该文件？

```
<script src="../scripts/javascript.js"></script> 
```

然后在需要时调用你的函数？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-03T14:51:37.343

您可能考虑做的第一件事是以如下方式为您的函数创建一个非全局“命名空间”：

```
window.MyApp = window.MyApp || {}; 
```

上面的行可以在*每个*文件的顶部；第一次调用它时，它会创建一个新的名称空间/对象，随后它会返回您之前创建的名称空间/对象。

然后，您可以通过以下方式在 MyApp 下移动您的函数：

```
MyApp.func1 = function() {...} 
```

Google 用于创建 Javascript 命名空间，可能还有 Javascript 模块模式

# facebook - 来自 Web 应用的页面访问令牌

> ID：12710913
> 
> 赞同：2
> 
> 时间：2012-10-03T14:43:17.090
> 
> 标签：facebook, facebook-graph-api, access-token, facebook-access-token

我正在编写一个带有 Graph API 的 facebook 网络应用程序，用于自动在页面墙上发布。我是页面管理员，我设置了需要 manage_pages、offline_access、read_stream 和 publish_stream 的应用程序权限。我的应用程序将像 twitterfeed 应用程序一样具有不同的东西（我没有 rss 提要作为来源）。

第一步，我打电话：

`https://graph.facebook.com/oauth/access_token?client_id=".$app_id."&client_secret=".$app_secret."&grant_type=client_credentials`

当此调用返回 access_token 时，我调用：

`https://graph.facebook.com/100344706779072?fields=access_token&access_token=". $access_token`

在这里我有问题：正如facebook doc所说（[https://developers.facebook.com/docs/reference/api/page/#page_access_tokens](https://developers.facebook.com/docs/reference/api/page/#page_access_tokens)）我必须以这种方式获取page_access_token，但是这个调用只返回页面ID..

那么我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T15:06:13.730

从这里的 facebook 文档：[https ://developers.facebook.com/docs/howtos/login/login-as-page/](https://developers.facebook.com/docs/howtos/login/login-as-page/)

您需要使用您在第一次通话中获得的访问令牌并再次致电[https://graph.facebook.com/me/accounts?access_token=](https://graph.facebook.com/me/accounts?access_token=) $access_token

您会收到如下所示的回复：

```
{
  "data": [
    {
      "name": "PAGE_TITLE", 
      "access_token": "PAGE_ACCESS_TOKEN", 
      "category": "PAGE_CATEGORY", 
      "id": "PAGE_ID"
    }, 
    {
      "name": "PAGE_TITLE", 
      "access_token": "PAGE_ACCESS_TOKEN", 
      "category": "PAGE_CATEGORY", 
      "id": "PAGE_ID"
    }, 

    ...

 ]
} 
```

# c# - 除以更大的数字返回 0

> ID：12710926
> 
> 赞同：0
> 
> 时间：2012-10-03T14:44:10.580
> 
> 标签：c#

当我尝试这样做时

```
double test = ((2 / 7) * 100); 
```

它返回 0。

有谁知道这是为什么以及如何解决它？

谢谢

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-03T14:45:39.923

2 / 7 是整数除法，将返回 0。试试这个

```
2.0 / 7

(double) 2 / 7 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-03T14:45:47.590

你正在划分*整数*。

如果您想要一个非整数结果，则至少一个操作数必须是浮点数或双精度数（或小数）。

您可以通过添加`.00`任何文字来创建文字来做到这一点。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-03T14:45:52.303

你正在划分整数，所以`2 / 7`已经`0`. 试一试`2.0 / 7.0`，你会得到正确的结果。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-03T14:46:14.853

它正在进行整数除法，因为所有操作数都是整数。

要修复它，请将至少一个操作数更改为双精度数，如下所示：

```
double test = ((2.0 / 7.0) * 100.0); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-03T14:46:49.843

你正在做整数数学，只有`double`当你有最终结果时才转换。

```
2 / 7 = 0 
```

尽管

```
2.0 / 7.0 = 0.285714285714285 
```

用值做数学运算`double`：

```
double test = ((2.0 / 7.0) * 100.0); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-03T14:58:16.953

是因为分裂。两个 int 数相除返回截断任何小数点的 int 数。因此，运算 2/7 的结果将为 0。

它应该是这样的：

双重测试 = ((2.0 / 7.0) * 100.0);

# python - 如何在 Python Twisted 中进行 SSH 端口转发？

> ID：12710928
> 
> 赞同：6
> 
> 时间：2012-10-03T14:44:20.287
> 
> 标签：python, ssh, twisted, portforwarding

有没有使用 Conch 从 Twisted 内部使用端口转发选项启动与远程计算机的 SSH 会话的示例，以便可以通过隧道传输正常的 TCP 流量？

设想：

我有一台运行自定义的基于 Twisted 的 Protobuf RPC 服务的服务器和一台安装了基于 Twisted 的 RPC 客户端的机器。服务器也在运行 SSH。我不想直接与服务器上的 RPC 服务对话，而是想从 RPC 客户端使用 SSH 连接到服务器，在服务器上设置端口转发，并使用 Protobuf 通过 SSH 隧道与 RPC 服务通信。

我已经能够手动设置端口转发，并通过将 RPC 客户端指向客户端框上的本地端口来让 RPC 客户端与 RPC 服务通信，我只是好奇如何在客户端中直接执行此操作.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-03T20:18:41.070

如果 Twisted 中有改进的文档用于使用 Conch 做一些简洁的事情，那就太棒了（毕竟，还有多少其他可编程 SSH 库？）。在那个快乐的日子到来之前，阅读`conch`命令行工具的实现可能会有很大帮助。

在这里，我们可以看到命令行中的端口转发选项通过 SSH 连接转换为某些操作：

[https://github.com/twisted/twisted/blob/4ffbe9f6851dbe7e9172f55905f264ecf50da3a6/src/twisted/conch/scripts/conch.py​​#L226-L238](https://github.com/twisted/twisted/blob/4ffbe9f6851dbe7e9172f55905f264ecf50da3a6/src/twisted/conch/scripts/conch.py#L226-L238)

我认为您是在询问本地转发规则，因此`localForwards`循环大致执行您想做的事情。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-05-08T17:52:34.577

实现一个进行本地端口转发的隧道 Twisted SSH 客户端可能非常简单。

只需创建一个[基本的 Twisted Conch SSH 客户端](https://twistedmatrix.com/documents/current/conch/howto/conch_client.html)，并在您的客户端的 SSH 连接类的*serviceStarted*方法中实现端口转发部分：

```
from twisted.conch.ssh import forwarding

LOCALPORT = 8888
REMOTEHOST = "127.0.0.1"
REMOTEPORT = 9999

class Connection(connection.SSHConnection):

    def serviceStarted(self):
       Channel = forwarding.SSHListenClientForwardingChannel
       Factory = forwarding.SSHListenForwardingFactory
       factory = Factory(self, (REMOTEHOST, REMOTEPORT), Channel)
       s = reactor.listenTCP(LOCALPORT, factory) 
```

这就是它的全部内容（REMOTEHOST 设置为指向 ssh 服务器本身，因为这就是您所说的要连接的内容）。

# trac - trac 中特定工单的 AuthzPolicy 权限

> ID：12710931
> 
> 赞同：1
> 
> 时间：2012-10-03T14:44:26.703
> 
> 标签：trac

我正在使用 AuthzPolicy-plugin 来管理 trac-env 中的权限。现在我想设置一个权限，禁止除管理员以外的所有用户查看具有特定状态的工单。

我尝试了很多，例如 authzpolicy.conf 中的以下条目：

```
[ticket:*/status:new]
@administrators = TICKET_VIEW
* = 
```

AuthzPolicy 插件是否为具有特定状态、所有者或其他内容的票证提供权限设置？

静音

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-07T19:05:06.427

[TracFineGrainedPermissions](http://trac.edgewall.org/wiki/TracFineGrainedPermissions)可以使用资源路径中表示的任何属性。

修订版可以，因此您会找到一个示例，解释为“John 仅在 trunk/src/some/location 对 'somefile' 的修订版 1 具有 BROWSER_VIEW 和 FILE_VIEW 访问权限”

所以你的问题的直接答案是不，你不能根据票证状态做同样的事情，因为无论他们的状态如何，所有票证从资源 URL 看起来都是一样的，抱歉。

我同意，作为最后的手段，您可以诉诸实施 bta 已经概述的自定义政策。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T23:28:38.673

Trac 的权限系统专注于组件级别。您可以打开或关闭对整个组件的访问，但不能访问该组件内的子内容。

话虽如此，您可以创建一个模拟更细粒度权限系统的插件。该插件需要`IRequestFilter`在加载页面时实现和检查页面的 URL。它将从 URL 中提取票号，在数据库中查找票的详细信息，并确定当前用户是否应该查看该页面。如果用户没有权限，插件会将请求重定向到错误页面。这并不太难做到（我以前为了保护特定的 wiki 页面做过），但很难维护，因为它是一个完全独立于 Trac 权限系统的单独权限机制。

# linq - 深度 LINQ 预测，如何？

> ID：12710936
> 
> 赞同：2
> 
> 时间：2012-10-03T14:44:31.893
> 
> 标签：linq, entity-framework

假设我有一个使用 EF 4.0 创建的模型

*   用户

    *   角色

        *   权限

每个实体都有一个 DeleteDate 属性。

我想获得一个特定的用户（名称 =...），并让树中充满 DeletedDate == null 的项目。

这必须使用匿名类型投影来完成，但我不知道如何使用比 2.. 更深的层次结构来完成此操作。

这是我已经拥有的：

```
 public MyProjection MyCall(string givenName)
    {
      var result = from s in context.Users
                   where (s.Name == givenName &&
                                    s.DeletedDate == null)
                             select new
                             {
                                 s,
                                 roles = from r in s.Roles
                                         where r.DeletedDate == null
                                         select r
                             };

      var outcome = result.FirstOrDefault();

      if (outcome != null)
      {
         var myProjection = new MyProjection()
         {
             User = outcome.s,
             Roles = outcome.roles
         };

         return myProjection;
       }

    return null;
   } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T20:39:19.240

如果您使用以下内容检索：

```
 var result = from s in MyUsers
              where s.DeletedDate == null
              select new aUser{
                   Roles = (from r in s.Roles
                            where r.DeletedDate == null
                            select r).ToList()
              }; 
```

然后创建一个 TreeView：

```
 TreeView treeView = new TreeView(); 
```

然后将 TreeView 的 ItemsSource 设置为 IEnumerable：

```
 treeView.ItemsSource = result; 
```

然后在您的 TreeView 中构建一个 HierarchicalDataTemplate 来表示您的列表（[类似于此](https://stackoverflow.com/a/719840/1466627)或更深入地了解[此](http://blogs.microsoft.co.il/blogs/davids/archive/2009/06/04/hierarchicaldatatemplate-and-treeview.aspx)），然后瞧！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T14:59:03.343

根据您的结构，您可以执行以下操作：

```
 var result = m.Users.Where(u => u.DeletedDate == null)
            .Select( u => new
                            {   
                                u,
                                roles = u.Roles.Where(r => r.DeletedDate == null)
                                               .Select(r => new
                                                   {
                                                        r,
                                                        permissions = r.Permissions.Where(p => p.DeletedDate == null)
                                                   })
                            }).FirstOrDefault(item => item.u.Name == givenName); 
```

# objective-c - 我应该在哪里将 removeObserver 放在 AppDelegate.m, ios

> ID：12710956
> 
> 赞同：12
> 
> 时间：2012-10-03T14:45:15.447
> 
> 标签：objective-c, ios, nsnotificationcenter

我的 AppDelegate 类注册了一个特定的通知，如下所示

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions

    {

        [[NSNotificationCenter defaultCenter] addObserver:self
                                                 selector:@selector(applyThemeA:)
                                                     name:@"ThemeA"
                                                   object:nil];

    } 
```

而 applyThemeA 确实（只是不多）

```
- (void)appleThemeA:(NSNotification*)notification {
    NSLog(@"apply themeA");
} 
```

我正在放置`removeObserver`，`applicationWillTerminate`但不太确定这是一个好方法。

**问题**

> 是不是放置这个方法的好地方。

我只是想确保我以正确的方式行事。如果问题不合适，请不要投反对票。请告诉我。谢谢

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-10-03T14:50:33.787

这是完全合适的。您的侦听器是在应用程序启动时创建的，因此它应该在应用程序退出时被销毁。

从技术上讲，它并不是真正需要的。当您的应用程序退出时，一切都将被销毁，包括侦听器。

# java - 安装 SOAP UI 后出现 JVM 错误

> ID：12710957
> 
> 赞同：8
> 
> 时间：2012-10-03T14:45:16.793
> 
> 标签：java, jvm, soapui

我正在尝试安装`SOAPUI`工具。安装后，执行时，我收到此错误：

> JVM 无法启动。最大堆大小 (-XMx) 可能太大或防病毒或防火墙工具可能会阻止执行

当安装到不同的机器上时，它工作正常。

有什么建议么？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-05-02T06:29:15.427

出现此问题是因为 Soap Ui 尝试以很少可用的单个块的形式获取指定数量的内存。所以这个问题的解决方案是导航到soapUi.xxxvmoption文件，可以在

c->程序文件->emiware->soapUi.xxx->bin

编辑此文件并将 -Xms 设置为较小的值，默认值为 1200m，如果不起作用，则将其设置为 512m，将其更改为较小的值。

**PS xxx 是 SoapUI 的版本，在我的例子中是 4.0.0**

-Xms 表示初始堆大小。

-Xmx 表示最大堆大小。

因此，您可以根据需要设置值。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-10-03T14:47:52.897

如果您尝试在 32 位操作系统（如 Windows）上设置过多内存，则通常会发生此错误。例如，如果您`-Xmx1600m`在 Windows 32 位上使用或更多，您将收到此错误。

您在失败的机器上安装了哪个操作系统和 Java 版本。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-11T13:45:31.357

我对我所做的是杀死所有使用 Java 的应用程序进程，例如：Mozilla FireFox。您可以从 Windows 任务管理器中终止该进程。之后，重新运行您的 SOAP UI。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-04-26T21:39:42.860

这个soapUI问题有一个非常简单的修复......

Ankit 和 Peter 在这里提到过......为了帮助您（和其他人）解决这个问题，我为此编写了一个分步教程以及修复的屏幕截图。我希望这可以帮助你...！

你可以在这里查看 - [http://quicksoftwaretesting.com/soapui-jvm-heap-size-xmx-error/](http://quicksoftwaretesting.com/soapui-jvm-heap-size-xmx-error/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-07-12T07:53:52.920

这些解决方案都不适合我。起作用的是在他同样提到的 \bin 目录中启动 soapui.bat 文件。该文件确实设置了所需的 JAVA 环境设置。

大量使用 Java 我不能将其作为通用环境变量来执行，因为这会影响我的 Oracle 和其他 Java 好东西的 SQLdeveloper。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2014-10-20T15:31:40.263

确保为您的操作系统下载了适当的版本（32/64 位）。

# c# - 如何获取 ProgramFiles 路径？

> ID：12710958
> 
> 赞同：33
> 
> 时间：2012-10-03T14:45:16.203
> 
> 标签：c#

我有奇怪的问题。

我正在使用 Windows 7 Enterprise sp1 64 位。

我需要为我的项目获取程序文件和程序文件 X86 目录路径。这就是我所做的：

```
Environment.GetFolderPath(Environment.SpecialFolder.ProgramFiles);
Environment.GetFolderPath(Environment.SpecialFolder.ProgramFilesX86); 
```

但这两行都返回 Program files X86 文件夹。

我该如何解决？

* * *

## 回答 #1

> 赞同：72
> 
> 时间：2015-11-19T17:16:00.707

这适用于 x86、x64 或任何 CPU 配置：

```
string programFiles = Environment.ExpandEnvironmentVariables("%ProgramW6432%");
string programFilesX86 = Environment.ExpandEnvironmentVariables("%ProgramFiles(x86)%"); 
```

因为使用环境变量`ProgramW6432`将始终返回 Program Files 文件夹，而`ProgramFiles`这取决于您的应用程序编译选项。

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2012-10-03T14:47:58.860

结果取决于您的项目所针对的平台。如果您以 x86 为目标，则两者都`Environment.SpecialFolder.ProgramFiles`将`Environment.SpecialFolder.ProgramFilesX86`返回相同的路径。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-03T14:47:48.800

`Environment.SpecialFolder.ProgramFiles`应该为 32 位应用程序返回 x86 文件夹，为 64 位 Windows 上的 64 位应用程序返回 Program Files。检查您的项目配置设置。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-10-03T14:55:21.530

使用 Visual Studio 中的配置管理器（构建 -> 配置管理器）更改目标平台。

在平台列中查看 x64 是否可用。如果不是，请单击下拉菜单并选择“新建”。然后，您将能够将 x64 添加为目标平台。再次调试，你会看到它`Environment.GetFolderPath(Environment.SpecialFolder.ProgramFiles)`会返回`C:\Program Files`。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-03T14:50:30.427

如果你的程序是 32 位的，这总是返回 x86 文件夹

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2019-03-28T22:08:34.170

根据 Dan Nolan 的评论，David 的回答仅适用于 Windows 7 及更高版本。

这是适用于 x86、x64 或任何 CPU 配置并且适用于旧版本 Windows 的解决方案。

```
string ProgramFiles = Environment.ExpandEnvironmentVariables("%ProgramFiles%");

if (ProgramFiles[ProgramFiles.Length-1].Equals(')'))  // If ProgramFiles(x86)
    ProgramFiles = ProgramFiles.Substring(0, ProgramFiles.Length - 6); 
```

本质上，如果 (x86) 存在，则只需在不应该存在的情况下删除它。

或者：

查看此注册表值似乎也是一个可靠的解决方案：Computer\HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Windows\CurrentVersion\ProgramFilesDir

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-11-06T19:53:53.090

你采取的方法是绝对正确的。我们只需要告诉编译器不要偏爱特定的构建平台

它很简单

**转到 Visual Studio > 项目属性 > 构建 > 取消选中“首选 32 位”**

# ruby-on-rails - 无法使用序列化字段初始化模型

> ID：12710960
> 
> 赞同：0
> 
> 时间：2012-10-03T14:45:21.070
> 
> 标签：ruby-on-rails, ruby-on-rails-3, activerecord, serialization

我最近为我的用户添加了一个“首选项”字段，它在我的 rails 应用程序中使用了 thw ActiveRecord 序列化方法。这适用于现有用户，但是当我尝试在控制台中初始化新用户模型时，出现错误：

```
u = User.new
#=> 
ActiveRecord::SerializationTypeMismatch: preferences was supposed to be a Hash, but was a String 
```

我在迁移中添加了这样的字段：

```
add_column :users, :preferences, :text, :default => { :allows_public_contributions => false }.to_yaml 
```

在模型中，user.rb：

```
serialize :preferences, Hash 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T15:30:40.770

Rails 自己处理序列化。`to_yaml`从迁移的默认选项中删除方法调用。如果你在哈希上运行这个方法，你会得到一个字符串。

```
{ :key => "value" } 
# => "---\n:key: value\n" 
```

这就是你得到异常的原因。

# excel - Apache POI：SXSSFWorkbook.dispose() 不存在

> ID：12710961
> 
> 赞同：9
> 
> 时间：2012-10-03T14:45:22.150
> 
> 标签：excel, streaming, apache-poi, streamwriter

我正在使用 apache 的 POI API 来编写 XLSX 文件。由于我需要编写大文件，因此我使用了 Streaming API (SXSSF)。为此，我正在遵循[本](http://poi.apache.org/spreadsheet/how-to.html#sxssf)指南。请注意，在示例结束时，会调用

```
wb.dispose 
```

这个 wb 实例是指一个 SXSSFWorkbook 实例。我在我的代码中使用了相同的方法，但它抱怨 dispose 方法不存在。我下载了源代码，方法不存在。但是，转到他们的 SVN 并检查该类的代码，我们可以在那里看到该方法：

[https://svn.apache.org/repos/asf/poi/trunk/src/ooxml/java/org/apache/poi/xssf/streaming/SXSSFWorkbook.java](https://svn.apache.org/repos/asf/poi/trunk/src/ooxml/java/org/apache/poi/xssf/streaming/SXSSFWorkbook.java)

我已经尝试重新编译他们的代码，但我得到了很多错误......

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-10-04T10:05:32.367

Apache POI 3.8（当时最新的稳定版本）为每个工作表创建一个临时 XML 文件（使用 SXSSF 时），但没有提供删除这些文件的选项。这个事实使得这个 API 不好用，因为如果我要导出 600MB 的数据，那么我将有 2 个 600MB 的文件，其中一个将在临时文件夹中，直到它被删除。

深入研究代码，我们看到该类`SXSSFSheet`有一个`SheetDataWriter`. `File`最后一个类负责编写和维护由实例表示的临时文件。访问此对象将允许删除该文件。所有这些实例都是私有的，因此理论上您无法访问它们。但是，通过反射，我们可以访问`File`实例来删除这个有用但烦人的文件！

以下 to 方法允许执行此操作。通过调用`deleteSXSSFTempFiles`，该工作簿的所有临时文件都将被删除。

```
/**
 * Returns a private attribute of a class
 * @param containingClass The class that contains the private attribute to retrieve
 * @param fieldToGet The name of the attribute to get
 * @return The private attribute
 * @throws NoSuchFieldException
 * @throws IllegalAccessException 
 */
public static Object getPrivateAttribute(Object containingClass, String fieldToGet) throws NoSuchFieldException, IllegalAccessException {
    //get the field of the containingClass instance
    Field declaredField = containingClass.getClass().getDeclaredField(fieldToGet);
    //set it as accessible
    declaredField.setAccessible(true);
    //access it
    Object get = declaredField.get(containingClass);
    //return it!
    return get;
}

/**
 * Deletes all temporary files of the SXSSFWorkbook instance
 * @param workbook
 * @throws NoSuchFieldException
 * @throws IllegalAccessException 
 */
public static void deleteSXSSFTempFiles(SXSSFWorkbook workbook) throws NoSuchFieldException, IllegalAccessException {

    int numberOfSheets = workbook.getNumberOfSheets();

    //iterate through all sheets (each sheet as a temp file)
    for (int i = 0; i < numberOfSheets; i++) {
        Sheet sheetAt = workbook.getSheetAt(i);

        //delete only if the sheet is written by stream
        if (sheetAt instanceof SXSSFSheet) {
            SheetDataWriter sdw = (SheetDataWriter) getPrivateAttribute(sheetAt, "_writer");
            File f = (File) getPrivateAttribute(sdw, "_fd");

            try {
                f.delete();
            } catch (Exception ex) {
                //could not delete the file
            }
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-05-08T07:44:28.820

自 2012-12-03 起，POI 3.9 可作为稳定版本使用。该[`dispose()`](http://poi.apache.org/apidocs/org/apache/poi/xssf/streaming/SXSSFWorkbook.html#dispose%28%29)方法`SXSSFWorkbook`在此版本中可用。

（*当然，提问的时候不是这样的。*）

# typescript - 直接从 TypeScript 调用 JavaScript

> ID：12710962
> 
> 赞同：22
> 
> 时间：2012-10-03T14:45:21.930
> 
> 标签：typescript

我刚刚下载了 TypeScript 文档。我有一些 JavaScript 类，我想在 TypeScript 测试应用程序中创建和使用这些类

如何从 TypeScript 调用包含的 JavaScript 的 JavaScript 函数。我不想创建“d.ts”文件。只是为了创建我的类，调用它的方法，访问它的属性。

我怎么做？

* * *

我正在尝试将 kendoUI 与 TypeScript 一起使用。

例如要显示一个窗口，我必须这样做：

1.  有一个 HTML 来表示窗口的内容。我有一个 id 为 logonDialog 的 div。这个 div
    最初是隐藏的；
2.  我创建窗口：logonDlg.kendoWindow(logOnParams);
3.  然后使用 jQuery 我显示 div：使用`logonDlg.show();`

例子

```
var logonDlg = $("logonDialog");

if (!logonDlg.data("kendoWindow")) {
   logonDlg.kendoWindow(logOnParams);
   logonDlg.show();
} 
```

它工作正常。JS 是按我的意愿生成的，但我收到一个错误，因为“JQuery”类型的值上不存在“kendoWindow”属性。

我怎样才能禁用这种错误。正如瑞安所说，我无法工作。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-10-03T15:18:44.183

如果你想停止错误而不做很多额外的工作，你可以从你的 JS 代码中“声明”对象：

```
declare var w; // implicit type here is 'any'
// (later, anywhere in your file...)
var x = new w(); // you can do whatever you want with w now without getting errors
w.x = 4; // etc. 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-10-05T17:02:49.983

有一个更好的解决方案。只需将 jQuery logonDlg 转换为任何这样的：

```
(<any>logonDlg).kendoWindow(logOnParams); 
```

代码会有所不同，但工作方式相同。

1.  没有强制转换生成的代码是这样的：**logonDlg.kendoWindow(logOnParams);**
2.  用演员表会是这样的：**(logonDlg).kendoWindow(logOnParams);**

两者都工作正常。

问候

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-10-03T14:50:13.753

你就去做吧。TypeScript 不会阻止你。您将在编译器输出中看到警告，但`tsc`会很好地生成您的 JS 文件。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2015-03-30T12:28:13.667

在这种特殊情况下，您可以只包含Telerik 提供的[Kendo UI TypeScript 定义。](http://docs.telerik.com/kendo-ui/typescript)

*（我意识到当 TS 定义可能还不存在时，这个问题被问了回来，但想为将来遇到这个问题的人添加这个细节。）*

# php - 如何在插件中使用自定义帖子类型字段输出

> ID：12710963
> 
> 赞同：0
> 
> 时间：2012-10-03T14:45:25.313
> 
> 标签：php, wordpress, custom-post-type, custom-field-type

如果您有自定义帖子类型，涉及多个字段，您可能希望在插件中使用某个字段的输出。对于自定义帖子类型，您只需使用它`<?php the_field('paragraph_1'); ?>`来显示内容。在插件中，这不起作用。没有与自定义帖子类型相关的输出。如何实现？

在functions.php中：

```
 // Add custom taxonomy for post_type=portfolio
function create_portfolio_taxonomies() 
{
  // Add new taxonomy, make it hierarchical (like categories)
  $labels = array(
    'name' => _x( 'Portfolio Categories', 'taxonomy general name' ),
    'singular_name' => _x( 'Category', 'taxonomy singular name' ),
    'search_items' =>  __( 'Search Categories' ),
    'all_items' => __( 'All Categories' ),
    'parent_item' => __( 'Parent Category' ),
    'parent_item_colon' => __( 'Parent Category:' ),
    'edit_item' => __( 'Edit Category' ), 
    'update_item' => __( 'Update Category' ),
    'add_new_item' => __( 'Add New Category' ),
    'new_item_name' => __( 'New Genre Category' ),
    'menu_name' => __( 'Category' ),
  );    

  register_taxonomy('work-category',array('portfolio'), array(
    'hierarchical' => true,
    'labels' => $labels,
    'show_ui' => true,
    'query_var' => true,
    'rewrite' => array( 'slug' => 'work-category' ),
  ));

}
//hook into the init action and call create_book_taxonomies when it fires
add_action( 'init', 'create_portfolio_taxonomies', 0 ); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T23:12:53.500

到目前为止，您刚刚在代码中添加的是注册分类，而不是自定义帖子类型。无论如何，如果要调用自定义字段的值，可以使用 get_post_meta()： [http ://codex.wordpress.org/Function_Reference/get_post_meta](http://codex.wordpress.org/Function_Reference/get_post_meta)

在这种情况下，它将是：

```
<?php echo get_post_meta($post->ID,'paragraph_1',true); ?> 
```

# delphi - Dbgrid - 自动发布到数据库

> ID：12710967
> 
> 赞同：2
> 
> 时间：2012-10-03T14:45:37.623
> 
> 标签：delphi, delphi-5

我有一个带有查询、数据集、可编辑 dbgrid 和 updatesql 组件的表单。当我需要保存在 dbgrid 中所做的更改时，我调用此过程：

```
procedure TEditCardDetailForm.SaveChanges;
begin
  Database1.StartTransaction;
  try
    Query2.ApplyUpdates;
    Database1.Commit;
  except
    Database1.Rollback;
    raise;
  end;
  Query2.CommitUpdates;
end; 
```

但是，当我按 Enter 键或在编辑 dbgrid 中的单元格后转到另一行时，我希望将更改自动应用于数据库——就像我使用 TTable 组件时所做的那样。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T19:17:58.233

如果我理解正确（如果不是，请纠正我）你有一个 CachedUpdates 设置为 true 的 TQuery，但希望它表现得好像它不会使用缓存但立即更新。如果是这种情况，您设置 TQuery 的方式与您想要的行为相矛盾。缓存的更新将在客户端“保留”，直到您决定使用 ApplyUpdates 手动将它们发布到数据库。

如果您可以将 CachedUpdates 设置为 false，则只需执行以下操作：

1.  通过其 UpdateObject 属性将 TUpdateSQL 链接到 TQuery。
2.  编写插入、更新和删除语句并将它们分配给 TUpdateSQL 的 InsertSQL、ModifySQL 和 DeleteSQL 属性。

我猜你已经完成了这两件事，所以将 CachedUpdates 设置为 false 就可以了。

[您可以在此处](http://www.podgoretsky.com/ftp/docs/Delphi/D5/dg/11_cache.html)找到有关 Delphi 5 缓存更新的更多信息。

高温高压

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T07:56:16.143

这里有两种情况需要处理：

1.  更改网格行时保存更改
2.  更改网格列时保存更改

第一个很容易通过在底层数据集（，a ？）的情况下调用您的`SaveChanges`过程来实现。`AfterPost``query2``TClientDataSet`

对于第二个，您只需`query2.Post`在列更改后调用。这可以`OnDataChange`在`datasource`. 确保在调用之前检查是否处于`Field <> nil`插入*或*编辑*模式*。`dataset`**`post`**

# c++ - 如何确定进程打开文件的顺序？

> ID：12710968
> 
> 赞同：1
> 
> 时间：2012-10-03T14:45:38.457
> 
> 标签：c++, winapi, internal, ntdll

有没有办法获取进程的所有打开文件句柄并按文件打开时间安排它？我们有一个项目，正是需要这个 - 我们需要确定哪些文件是由 Dj 软件打开的，例如 Traktor 或 Serato。我们需要知道它的顺序的原因是要确定哪个文件在第一个卡组中，哪个在第二个卡组中。

目前，我们正在使用来自 Ntdll.dll (Winternl.h) 的 Windows 内部 API 来确定进程的所有打开文件的列表。也许这不是最好的方法。任何建议都受到高度赞赏。

我们依赖于在某些操作系统版本和某些 Dj 软件版本上观察到的 API 行为，即进程的所有打开文件列表永远不会重新排列，即遵循顺序。我知道这是一种不好的做法，但这是客户在发布之前“应该”的功能，所以我们不得不这样做。现在的问题是，当这些句柄有时在没有任何特定原因的情况下随机重新排列时，我们遇到了一个错误。那会阻止一切。我想也许那些win结构中会有一个字段来获取文件的打开时间，但似乎没有这样的东西。有关该 API 的文档非常糟糕。

我想到了一些代码粘贴，但它是一个 200 行长的函数，它使用函数指针从 dll 间接调用，并且 WinAPI 的所有结构都是手动重新定义的，所以真的很难阅读。实际上，甚至没有包含 Winternl.h 标头 - 所有内容也是手动加载的，如下所示：

```
GetProcAddress( GetModuleHandleA("ntdll.dll"), "NtQuerySystemInformation" ); 
```

对于一个跨平台的应用来说，真的很头疼……

**PS**我在[这里](https://stackoverflow.com/questions/12475132/is-there-a-way-to-get-a-list-of-all-opened-files-for-a-process-using-qt)发布了一个相关的问题，关于任何跨平台或Qt方式来获取打开的文件句柄，也许这些东西会有用或相关。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T15:24:51.757

如果只是为了调试目的检查其他操作系统中的行为，您可以使用在调试模式下创建进程的技术并按顺序拦截所有dll加载事件，这是一篇很好的[文章](http://www.codeproject.com/Articles/43682/Writing-a-basic-Windows-debugger)。

# php - 使用 PHP 循环数据的最有效方法

> ID：12710977
> 
> 赞同：2
> 
> 时间：2012-10-03T14:46:02.227
> 
> 标签：php, loops

我目前正在重构一个网站，我遇到了一组看起来都一样但有一些不同的变量/文本的链接。

我了解循环和所有内容，这绝对是需要的，但我只是不确定如何最好地处理发生变化的各种数据。

HTML如下：

```
<div class="featuredSide" style="border-color:#fff">
    <h3 style="font-size: 20px; margin-bottom: 12px;">$sectionName</h3>
    <img src="images/$imageName.jpg" width="50" height="60" style="float: left; margin: 4px 8px 16px 0px; border: 2px solid #fff;" />
    <h4 style="font-size: 11px;">$author</h4>
    <p class="lineAboveCol" style="clear: both; margin-bottom: 0px;"><a href="resources.php?section=$section">Click here for more information</a></p>
</div> 
```

我已经放入变量来替换将要更改的数据（这些目前都是在 HTML 中完成的）。

那么循环这些数据的最佳方法是什么，我想过使用简单的数组，但我认为从长远来看这并不容易维护。我是否缺少一个简单的解决方案，或者是否值得将这些数据设置在 MySQL 表中并直接从那里提取？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T14:52:21.293

Could do this..

```
<?php
$theVars[0]['sectionName'] = "section name 1";
$theVars[0]['section'] = "section 1";
$theVars[0]['author'] = "author 1";
$theVars[1]['sectionName'] = "section name 2";
$theVars[1]['section'] = "section 2";
$theVars[1]['author'] = "author 2";
$theVars[2]['sectionName'] = "section name 3";
$theVars[2]['section'] = "section 3";
$theVars[2]['author'] = "author 3";

$htmlStr = "";    

for($i=0;$i<=2;$i++){
    $htmlStr .= '<div class="featuredSide" style="border-color:#fff">
                 <h3 style="font-size: 20px; margin-bottom: 12px;">'.$theVars[$i]['sectionName'].'</h3>
                 <img src="images/$imageName.jpg" width="50" height="60" style="float: left; margin: 4px 8px 16px 0px; border: 2px solid #fff;" />
                 <h4 style="font-size: 11px;">'.$theVars[$i]['author'].'</h4>
                 <p class="lineAboveCol" style="clear: both; margin-bottom: 0px;"><a href="resources.php?section='.$theVars[$i]['section'].'">Click here for more information</a></p>
                 </div>';
}

echo $htmlStr;

?> 
```

Am I in the ballpark?

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T14:52:49.480

我将从一个数组开始：

```
$links = array(
    'section1' => array(
        'section'    => '...',
        'sectioName' => '...',
        'imageName'  => '...',
        'author'     => '...',
    //    'text' => 'Click here for more information',
    ),
); 
```

然后我会运行一个循环。它很容易适应，你保持不同的表示和数据，你可以在未来将它移动到 MySQL 或其他持久层，也许提供一个后端接口来允许维护人员编辑部分。

如果需要部分之间的一些变化，您可以将它们拉入数组的键（或 MySQL 中的列）。

您还可以从外部提供 HTML 并运行特殊标记的 preg_replace，例如`{{ author }}`被替换为`$currentSection['author']`等的内容。这也很容易移植到任何模板引擎。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-03T15:03:35.687

我会为这个特定的东西使用 php 数组，但将数组放在不同的文件中，因此很容易更新/上传

我将使用的代码类似于

**section.values.php**

```
$sections = array(
    'Section 1' => 'Author 1',
    'Section 2' => 'Author 2',
); 
```

**然后在 html/php 页面上：**

```
<?php
    include("section.values.php"); //or any file name

    foreach($sections as $sectionName => $author){
        echo '<div class="featuredSide" style="border-color:#fff">
            <h3 style="font-size: 20px; margin-bottom: 12px;">' . $sectionName . '</h3>
            <img src="images/$imageName.jpg" width="50" height="60" style="float: left; margin: 4px 8px 16px 0px; border: 2px solid #fff;" />
            <h4 style="font-size: 11px;">' . $author . '</h4>
            <p class="lineAboveCol" style="clear: both; margin-bottom: 0px;"><a href="resources.php?section=' . $section . '">Click here for more information</a></p>
            </div>';
    }
?> 
```

# objective-c - UIImageView 文本中的 UILabel 被截断

> ID：12710980
> 
> 赞同：2
> 
> 时间：2012-10-03T14:46:19.877
> 
> 标签：objective-c, ios, uilabel

我正在`UILabel`自定义`UIImageView`并且文本被截断：

![截屏](../Images/8dbd09ba61594bf352442b8c34f332d8.png)

代码：

```
//self.frame.size.width and height are the same value, self is a square
self.displayNameLabel = [[UILabel alloc] initWithFrame:CGRectMake(0, 0, (self.frame.size.width - 12), (self.frame.size.height - 12))];
self.displayNameLabel.center = CGPointMake((self.frame.size.width / 2), (self.frame.size.height / 2));
self.displayNameLabel.backgroundColor = [UIColor whiteColor];
self.displayNameLabel.textAlignment = UITextAlignmentCenter;
self.displayNameLabel.font = [UIFont fontWithName:labelFont size:40];
self.displayNameLabel.adjustsFontSizeToFitWidth = YES; 
```

我将字体大小设置为大，然后使用[`adjustsFontSizeToFitWidth`](https://developer.apple.com/documentation/uikit/uilabel/1620546-adjustsfontsizetofitwidth)以确保它尽可能大。它指出：

> 但是，如果此属性设置为 YES，并且 text 属性中的文本超出标签的边界矩形，则接收器开始减小字体大小，直到字符串适合

如果我将 label.frame 设置为：

```
self.displayNameLabel = [[UILabel alloc] initWithFrame:CGRectMake(0, 0, (self.frame.size.width - 0), (self.frame.size.height - 0))]; 
```

然后它按预期工作。

如何将框架设置为：

```
self.frame.size.width
self.frame.size.height 
```

代替：

```
self.frame.size.width - 14 
self.frame.size.height - 14 
```

工作？

为什么它会被夹在顶部？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T15:24:16.170

您可能需要相应地设置`autoresizingMask`标签的属性，以便在调整图像大小时，正确调整标签的框架。或者您应该`setNeedsDisplay`在任何视图上添加图像后调用标签上的 。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-03T17:20:31.287

该属性`adjustsFontSizeToFitWidth`只会导致标签调整字体大小，直到字符串的宽度适合框架。如果标签的高度不足以容纳最终的字体大小，它将被剪裁。

# excel - Excel：交替改变每个单元格的颜色？

> ID：12710984
> 
> 赞同：0
> 
> 时间：2012-10-03T14:46:26.467
> 
> 标签：excel, formatting

如何交替改变每个单元格的颜色？每当您替换 A 列中的单词时更改颜色

![在此处输入图像描述](../Images/2a06591a2c139e7c3b8be72f3f70d50e.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-03T15:42:17.570

您可以通过以下公式使用 de color 格式：

```
=MOD(SUMPRODUCT(($A$1:$A1<>"")/COUNTIF($A$1:$A1,$A$1:$A1&"")),2)=0 
```

更多信息：http: [//chandoo.org/forums/topic/yet-another-issue-of-alternating-colors](http://chandoo.org/forums/topic/yet-another-issue-of-alternating-colors)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-03T15:22:23.830

如果您接受隐藏列，并且不想使用 vba，最简单的做法是添加一列（假设新列 A，标签现在在 B 中，值在 C 中）。A 列将代表您的目标颜色。在 B1 和 C1 列上的单元格上设置条件格式，以便如果 A1 值是`TRUE`它，它们是灰色的（注意从 A1 获取值而不是 $A$1）。向下复制这些 B1 C1 单元格。现在要在 A 列中获取正确的值。您可以将 A1 设置为`TRUE`，将 A2 设置为`=IF(B2=B1,A1,NOT(A1))` 从 A2 向下复制公式。B 列和 C 列中的单元格现在应该根据 B 列中标签的更改交替颜色。您现在可以隐藏 A 列以使一切更好。

# ruby-on-rails - Rails：链接两个继承相同模型的模型

> ID：12710985
> 
> 赞同：1
> 
> 时间：2012-10-03T14:46:29.433
> 
> 标签：ruby-on-rails, many-to-many, single-table-inheritance

这有点棘手，所以如果您需要更多信息，请不要犹豫！

我有两个模型，`Store`它们`Consumer`通过两种方式链接：

1/`Store`并`Consumer`继承自同一个模型`Profile`，因为它们共享许多属性（姓名、位置、电子邮件、网页……）。这是 Rails AR 代码：

```
class Profile << ActiveRecord::Base
    # Attributes and validation rules go here.
end

class Store << Profile
end

class Consumer << Profile
end 
```

这就是众所周知的单表继承 (STI)。

2/ 除了 STI，`Store`并且`Consumer`通过多对多关系链接：

*   商店有很多客户（很多消费者）

*   消费者是许多商店的客户

因为我需要这个链接（商店 - 消费者）的更多属性，所以我必须创建一个额外的模型来链接它们：`Client`.

这是我最终的 AR 模型：

```
class Profile << ActiveRecord::Base
    # Attributes and validation rules go here.
end

class Store << Profile
    has_many :clients
end

class Consumer << Profile
    has_many :clients
end

class Client << ActiveRecord::Base
    belongs_to :store
    belongs_to :consumer
end 
```

**问题**

使用 STI 不会创建 store_id 和 consumer_id ......我们只有 profile_id （因为一个真实的表`Profile`）。那么，如何定位`Client`具有 store_id 和 client_id 的正确行？

知道怎么做吗？提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-03T14:50:47.433

I think you want to do is something like this. Also, I agree with Daniel Wright's comment.

```
class Profile << ActiveRecord::Base
    belongs_to :store
    belongs_to :consumer
end

class Store << ActiveRecord::Base
    has_one :profile
    has_many :clients
    has_many :consumers, :through => :clients
end

class Consumer << ActiveRecord::Base
    has_one :profile
    has_many :clients
    has_many :stores, :through => :clients
end

class Client << ActiveRecord::Base
    belongs_to :store
    belongs_to :consumer
end 
```

But if you'd like to make it work with what you have you could do something like:

```
class Profile << ActiveRecord::Base

end

class Store << Profile
    has_many :clients, :foreign_key => 'store_id'
    has_many :consumers, :through => :clients
end

class Consumer << Profile
    has_many :clients, :foreign_key => 'consumer_id'
    has_many :stores, :through => :clients
end

class Client << ActiveRecord::Base
    belongs_to :store
    belongs_to :consumer
end 
```

# android - 在资产中显示 unicode 文本？

> ID：12710986
> 
> 赞同：-1
> 
> 时间：2012-10-03T14:46:32.187
> 
> 标签：android

我正在构建一个使用 *.txt 文件形成资产的 android 应用程序。但我的 *.txt 文件有一些 unicode 文本，我的手机无法显示它们。我能做些什么？这是我的 PlistHelper 类：

```
public class PListHelper {

    public static String readQuizzesListFromAssets(Context context) {
        StringBuffer sb = new StringBuffer();

        BufferedReader br=null;
        try {
             br = new BufferedReader(new InputStreamReader(context.getAssets().open("quizzesList.plist"))); 
            String temp;
            while ((temp = br.readLine()) != null)
                sb.append(temp);
        } catch (IOException e) {
            e.printStackTrace();
        } finally {
            try {
                br.close(); // stop reading
            } catch (IOException ex) {
                ex.printStackTrace();
            }
        }
        Log.i("PListHelper", "input: "+sb.toString());

        return sb.toString();
    }

    public static String readConfigFromAssets(Context context) {
        StringBuffer sb = new StringBuffer();
        BufferedReader br=null;
        try {
             br = new BufferedReader(new InputStreamReader(context.getAssets().open("config.plist"))); 
            String temp;

            while ((temp = br.readLine()) != null)
                sb.append(temp);
        } catch (IOException e) {
            e.printStackTrace();
        } finally {
            try {
                br.close(); // stop reading
            } catch (IOException ex) {
                ex.printStackTrace();
            }
        }
        Log.i("PListHelper", "input: "+sb.toString());

        return sb.toString();
    }

    //Parse Response
    public static ArrayList<Quiz> parseQuizzesPlist(String input){
        ArrayList<Quiz> listOfQuizzes = null;
        ArrayList<ATriviaQuestion> listOfQuestions = null;

        //parsing of response                       
        try{            
            //XMLPullParser
            XmlPullParserFactory factory=XmlPullParserFactory.newInstance();
            factory.setNamespaceAware(true);
            XmlPullParser xpp = factory.newPullParser();

            xpp.setInput(new StringReader(input));
            int eventType = xpp.getEventType();
            String tagName = null, tagData = ""; 

            listOfQuizzes = new ArrayList<Quiz>();
            Quiz quiz = null;
            ATriviaQuestion aTQuestion = null;

            ArrayList<String> options = null;
            boolean areQuestions = false; 
            boolean isName = false, isImageName = false, isDescription = false;
            boolean isQuestion = false, areOptions = false, isAnswer = false;

            while(eventType != XmlPullParser.END_DOCUMENT){
                if(eventType == XmlPullParser.START_DOCUMENT){
                    Log.i("PlistParser", "xmlpullparser:start document");
                    tagName = "";
                }else if(eventType == XmlPullParser.END_DOCUMENT){
                    Log.i("PlistParser", "xmlpullparser:end document");
                }else if(eventType == XmlPullParser.START_TAG){
                    tagName = xpp.getName();

                    if(tagName.equals("quiz")){             
                        quiz = new Quiz();
                    }else if(tagName.equals("questions")){                      
                        listOfQuestions = new ArrayList<ATriviaQuestion>();
                        areQuestions = true;
                    }else if(tagName.equals("question"))
                        aTQuestion = new ATriviaQuestion();
                    else if(tagName.equals("array")){
                        options = new ArrayList<String>();
                    }

                }else if(eventType == XmlPullParser.END_TAG){
                    tagName=xpp.getName();

                    if(tagName.equals("quiz")){             
                        listOfQuizzes.add(quiz);
                    }else if(tagName.equals("questions")){                      
                        quiz.setQuestions(listOfQuestions);
                        areQuestions = false;
                    }else if(tagName.equals("question"))
                        listOfQuestions.add(aTQuestion);
                    else if(tagName.equals("array")){
                        if(areOptions){
                            areOptions = false;
                            aTQuestion.SetOptions(options);
                        }
                    }

                    tagName = "";tagData = "";                  
                }else if(eventType == XmlPullParser.TEXT){
                    tagData = xpp.getText();

                    //parsing questions of a quiz
                    if(areQuestions){
                        if(tagName.equals("key")){
                            if(tagData.equals("Question")){
                                isQuestion = true;                      
                            }else if(tagData.equals("Options")){
                                areOptions = true;
                            }else if(tagData.equals("Answer")){
                                isAnswer = true;                        
                            }
                        }else if(tagName.equals("string")){
                            if(isQuestion)
                                aTQuestion.SetQuestion(tagData);
                            else if(areOptions)
                                options.add(tagData);                           

                            isQuestion = false;
                        }else if(tagName.equals("integer")){
                            if(isAnswer)
                                aTQuestion.SetAnswer(Integer.valueOf(tagData));

                            isAnswer = false;
                        }
                    }

                    //parsing a quiz item
                    if(tagName.equals("key")){
                        if(tagData.equals("Name")){
                            isName = true;                      
                        }else if(tagData.equals("Description")){
                            isDescription = true;
                        }else if(tagData.equals("ImageName")){
                            isImageName = true;                     
                        }
                    }else if(tagName.equals("string")){
                        if(isName)
                            quiz.setName(tagData);
                        else if(isDescription)
                            quiz.setDescription(tagData);
                        else if(isImageName)
                            quiz.setImageName(tagData);

                        isName = false; isDescription = false; isImageName = false;
                    }

                }

                eventType = xpp.nextToken();
            }   //eventType while ends          

        }catch(Exception ex){
            Log.i("PListHelper", "Parsing exception with message->"+ex.getMessage());
        }   

        Log.i("PListHelper", "quizzes size: " + listOfQuizzes.size());

        return listOfQuizzes;

    }

    //Parse Response
    public static Config parseConfigFile(String input){
        Config config = null;

        //parsing of response                       
        try{            
            //XMLPullParser
            XmlPullParserFactory factory=XmlPullParserFactory.newInstance();
            factory.setNamespaceAware(true);
            XmlPullParser xpp = factory.newPullParser();

            xpp.setInput(new StringReader(input));
            int eventType = xpp.getEventType();
            String tagName = null, tagData = ""; 

            config = new Config();
            boolean isTimeToAnswer = false, isPointsPerRemainingSecond = false, isPointsPerCorrectAnswer = false, isPointsPerWrongAnswer = false;

            while(eventType != XmlPullParser.END_DOCUMENT){
                if(eventType == XmlPullParser.START_DOCUMENT){
                    Log.i("PlistParser", "xmlpullparser:start document");
                    tagName = "";
                }else if(eventType == XmlPullParser.END_DOCUMENT){
                    Log.i("PlistParser", "xmlpullparser:end document");
                }else if(eventType == XmlPullParser.START_TAG){
                    tagName = xpp.getName();

                    if(tagName.equals("dict"))              
                        ;

                }else if(eventType == XmlPullParser.END_TAG){
                    tagName=xpp.getName();

                    if(tagName.equals("dict"))              
                        ;

                    tagName = "";tagData = "";                  
                }else if(eventType == XmlPullParser.TEXT){
                    tagData = xpp.getText();

                    //parsing config items
                    if(tagName.equals("key")){
                        if(tagData.equals("timeToAnswer"))              
                            isTimeToAnswer = true;
                        else if(tagData.equals("pointsPerRemainingSecond"))                     
                            isPointsPerRemainingSecond = true;
                        else if(tagData.equals("pointsPerCorrectAnswer"))
                            isPointsPerCorrectAnswer = true;
                        else if(tagData.equals("pointsPerWrongAnswer"))
                            isPointsPerWrongAnswer = true;

                    }else if(tagName.equals("integer")){
                        if(isTimeToAnswer)
                            config.SetTimeToAnswer(Integer.valueOf(tagData));
                        else if(isPointsPerRemainingSecond)
                            config.SetPointsPerRemainingSecond(Integer.valueOf(tagData));
                        else if(isPointsPerCorrectAnswer)
                            config.SetPointsPerCorrectAnswer(Integer.valueOf(tagData));
                        else if(isPointsPerWrongAnswer)
                            config.SetPointsPerWrongAnswer(Integer.valueOf(tagData));

                        isTimeToAnswer = false; isPointsPerRemainingSecond = false; isPointsPerCorrectAnswer = false; isPointsPerWrongAnswer = false;
                    }

                }

                eventType = xpp.nextToken();
            }   //eventType while ends          

        }catch(Exception ex){
            Log.i("PListHelper", "Parsing exception with message->"+ex.getMessage());
        }   

        return config;

    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T13:06:54.300

用这个：

```
br = new BufferedReader(new InputStreamReader(context.getAssets().open("quizzesList.plist"),"UTF-8")); 
```

# android - 列表视图中的列表视图

> ID：12710988
> 
> 赞同：0
> 
> 时间：2012-10-03T14:46:38.830
> 
> 标签：android, android-listview, layout-animation

我有一个父 ListView，其中包含基于自定义布局的项目。当用户单击任何项​​目时，我需要向该项目添加一个子 ListView，并且应该显示父 ListView 的整个项目并带有扩展动画。[所有数据都需要动态添加]任何建议......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T15:25:50.507

与其使用第二个 ListView，不如考虑只使用一个简单的 LinearLayout 并动态填充它（使用 View.VISIBLE 和 View.GONE 切换其可见性）。据我所知，您不应该嵌套 ListViews。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T15:29:38.513

很简单，您可以在布局中添加您的项目（通过 xml 或代码）并使用动画显示（隐藏）。这是乌迪尼奇的例子。它的列表视图项通过动画扩展，并且只需要 4+ 的 API 级别。这个例子很简单。您只在`linearlayout`被调用中定义您的项目`toolbar`

[展开动画示例](https://github.com/Udinic/SmallExamples/tree/master/ExpandAnimationExample)

在 onItemClick 事件中使用 ExpanAnimation

```
/**
* This animation class is animating the expanding and reducing the size of a view.
* The animation toggles between the Expand and Reduce, depending on the current state of the view
* @author Udinic
*
*/
public class ExpandAnimation extends Animation {
    private View mAnimatedView;
    private LayoutParams mViewLayoutParams;
    private int mMarginStart, mMarginEnd;
    private boolean mIsVisibleAfter = false;
    private boolean mWasEndedAlready = false;

    /**
* Initialize the animation
* @param view The layout we want to animate
* @param duration The duration of the animation, in ms
*/
    public ExpandAnimation(View view, int duration) {

        setDuration(duration);
        mAnimatedView = view;
        mViewLayoutParams = (LayoutParams) view.getLayoutParams();

        // decide to show or hide the view
        mIsVisibleAfter = (view.getVisibility() == View.VISIBLE);

        mMarginStart = mViewLayoutParams.bottomMargin;
        mMarginEnd = (mMarginStart == 0 ? (0- view.getHeight()) : 0);

        view.setVisibility(View.VISIBLE);
    }

    @Override
    protected void applyTransformation(float interpolatedTime, Transformation t) {
        super.applyTransformation(interpolatedTime, t);

        if (interpolatedTime < 1.0f) {

            // Calculating the new bottom margin, and setting it
            mViewLayoutParams.bottomMargin = mMarginStart
                    + (int) ((mMarginEnd - mMarginStart) * interpolatedTime);

            // Invalidating the layout, making us seeing the changes we made
            mAnimatedView.requestLayout();

        // Making sure we didn't run the ending before (it happens!)
        } else if (!mWasEndedAlready) {
            mViewLayoutParams.bottomMargin = mMarginEnd;
            mAnimatedView.requestLayout();

            if (mIsVisibleAfter) {
                mAnimatedView.setVisibility(View.GONE);
            }
            mWasEndedAlready = true;
        }
    }
} 
```

详细用法在项目中。

# php - PHP 使用两个 GET 方法组合两个 URL 查询字符串

> ID：12710990
> 
> 赞同：0
> 
> 时间：2012-10-03T14:46:40.197
> 
> 标签：php, url, get, query-string

我有两种带有 GET 方法的表单。当我提交第一个表单时，我得到了这个 URL

`http://127.0.0.1/astronomy/student_enrollment.php?class_name_data=1&classNameGetDetails=`

当我提交也有 GET 方法的第二个表单时。我的网址改成了这个

`http://127.0.0.1/astronomy/student_enrollment.php?class_name_for_enrollment=Planet&sy_for_enrollment=2012-2013&sy_for_enrollment=45&number_of_student_enrolled=&time_schedule_student=Monday+to+Friday+8%3A00-9%3A00&generateFields=Generate`

第一个查询字符串被删除并替换为第二个查询字符串

我希望我的网址看起来像这样

`http://127.0.0.1/astronomy/student_enrollment.php?class_name_data=1&classNameGetDetails=&class_name_for_enrollment=Planet&sy_for_enrollment=2012-2013&sy_for_enrollment=45&number_of_student_enrolled=&time_schedule_student=Monday+to+Friday+8%3A00-9%3A00&generateFields=Generate`

这两个查询字符串将结合分隔符 of `&`and not `?`。我将如何做到这一点？

这是我的代码

```
<div class="enrollmentContent">
    <div class="classNameChoices">
    <label>Choose Class Name</label>
    <form action="" method="get">

        <select name="class_name_data">
            <?php
            $table = "classes";
            $data = array(
            'teacher_id' => $session_id
            );
            $class_name_query = show_filtered_rows($table, $data);
            while($rows = mysql_fetch_array($class_name_query)){
                $id = $rows['id'];
                $class_name = $rows['class_name'];
            ?>
            <option value="<?php echo $id; ?>"><?php echo $class_name; ?></option>
            <?php
            }
            ?>
        </select>
        <input type="submit" name="classNameGetDetails" value="" />
    </form>
    </div>
    <?php
        if(isset($_GET['classNameGetDetails'])){
            $data2 = array(
            'id' => $_GET['class_name_data'],
            'teacher_id' => $session_id
            );
            $class_name_data_query = show_filtered_rows($table, $data2);
            $rows_class = mysql_fetch_array($class_name_data_query);
    ?>
    <div class="classDetailsByClassName">
    <form action="" method="get">
        <input type="hidden" value="<?php echo $rows_class['class_name']; ?>" name="class_name_for_enrollment" />
        <input type="hidden" value="<?php echo $rows_class['school_year_from']."-".$rows_class['school_year_to']; ?>" name="sy_for_enrollment" />
        <input type="hidden" value="<?php echo $rows_class['enrollees']; ?>" name="sy_for_enrollment" />
        <label>Class Name <span><?php echo $rows_class['class_name']; ?></span></label>
        <label>SY <span><?php echo $rows_class['school_year_from']."-".$rows_class['school_year_to']; ?></span></label>
        <label>Maximum No. of Enrollees <span><?php echo $rows_class['enrollees']; ?></span></label>
        <div class="registerDetails">
            <div>
                <label>Number of students to enroll</label>
                <div><input type="number" name="number_of_student_enrolled" value=""/></div>
            </div>
            <div>
                <label>Schedule</label>
                <div>
                    <select name='time_schedule_student'>
                        <option value="Monday to Friday 8:00-9:00">Monday to Friday 8:00-9:00</option>
                        <option value="Monday to Friday 10:00-11:00">Monday to Friday 10:00-11:00</option>
                        <option value="Monday to Friday 1:00-2:00">Monday to Friday 1:00-2:00</option>
                        <option value="Monday to Friday 2:00-3:00">Monday to Friday 2:00-3:00</option>
                        <option value="Monday to Friday 9:00-10:00">Monday to Friday 9:00-10:00</option>
                        <option value="Monday to Friday 3:00-4:00">Monday to Friday 3:00-4:00</option>
                    </select>
                </div>
            </div>
            <div><input type="submit" name="generateFields" value="Generate" /></div>
        </div>
    </form>
    </div>
    <div class="enrollmentFields">
        <?php
        if(isset($_GET['generateFields'])){
            echo $_GET['class_name_for_enrollment'];
        }
        ?>

    </div>
    <?php
    }
    ?>
</div> 
```

和我的功能

```
function show_filtered_rows($table, $data){
    foreach($data as $fields=>$field_data){
        $show_data[] = "`".$fields."` = '".$field_data."'";
    }
    return mysql_query("SELECT * FROM `$table` WHERE ".implode(" AND ",$show_data));
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T14:51:32.977

you need set value for your hidden inputs.

```
<input type="hidden" name="class_name_data" value="<?php echo $_GET['class_name_data']" /> 
```

and put the your 2st form.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T14:55:51.677

只需将第一个表单的值作为隐藏值添加到第二个表单中。

```
<input type="hidden" name="class_name_data" value="<?php echo $_GET['class_name_data']; ?>" />
<input type="hidden" name="classNameGetDetails" value="<?php echo $_GET['classNameGetDetails']; ?>" /> 
```

这是添加了上述 2 行的完整代码。PHP 函数没有改变。

```
<div class="enrollmentContent">
    <div class="classNameChoices">
    <label>Choose Class Name</label>
    <form action="" method="get">

        <select name="class_name_data">
            <?php
            $table = "classes";
            $data = array(
            'teacher_id' => $session_id
            );
            $class_name_query = show_filtered_rows($table, $data);
            while($rows = mysql_fetch_array($class_name_query)){
                $id = $rows['id'];
                $class_name = $rows['class_name'];
            ?>
            <option value="<?php echo $id; ?>"><?php echo $class_name; ?></option>
            <?php
            }
            ?>
        </select>
        <input type="submit" name="classNameGetDetails" value="" />
    </form>
    </div>
    <?php
        if(isset($_GET['classNameGetDetails'])){
            $data2 = array(
            'id' => $_GET['class_name_data'],
            'teacher_id' => $session_id
            );
            $class_name_data_query = show_filtered_rows($table, $data2);
            $rows_class = mysql_fetch_array($class_name_data_query);
    ?>
    <div class="classDetailsByClassName">
    <form action="" method="get">
        <input type="hidden" name="class_name_data" value="<?php echo $_GET['class_name_data']; ?>" />
        <input type="hidden" name="classNameGetDetails" value="<?php echo $_GET['classNameGetDetails']; ?>" />
        <input type="hidden" value="<?php echo $rows_class['class_name']; ?>" name="class_name_for_enrollment" />
        <input type="hidden" value="<?php echo $rows_class['school_year_from']."-".$rows_class['school_year_to']; ?>" name="sy_for_enrollment" />
        <input type="hidden" value="<?php echo $rows_class['enrollees']; ?>" name="sy_for_enrollment" />
        <label>Class Name <span><?php echo $rows_class['class_name']; ?></span></label>
        <label>SY <span><?php echo $rows_class['school_year_from']."-".$rows_class['school_year_to']; ?></span></label>
        <label>Maximum No. of Enrollees <span><?php echo $rows_class['enrollees']; ?></span></label>
        <div class="registerDetails">
            <div>
                <label>Number of students to enroll</label>
                <div><input type="number" name="number_of_student_enrolled" value=""/></div>
            </div>
            <div>
                <label>Schedule</label>
                <div>
                    <select name='time_schedule_student'>
                        <option value="Monday to Friday 8:00-9:00">Monday to Friday 8:00-9:00</option>
                        <option value="Monday to Friday 10:00-11:00">Monday to Friday 10:00-11:00</option>
                        <option value="Monday to Friday 1:00-2:00">Monday to Friday 1:00-2:00</option>
                        <option value="Monday to Friday 2:00-3:00">Monday to Friday 2:00-3:00</option>
                        <option value="Monday to Friday 9:00-10:00">Monday to Friday 9:00-10:00</option>
                        <option value="Monday to Friday 3:00-4:00">Monday to Friday 3:00-4:00</option>
                    </select>
                </div>
            </div>
            <div><input type="submit" name="generateFields" value="Generate" /></div>
        </div>
    </form>
    </div>
    <div class="enrollmentFields">
        <?php
        if(isset($_GET['generateFields'])){
            echo $_GET['class_name_for_enrollment'];
        }
        ?>

    </div>
    <?php
    }
    ?>
</div> 
```

# android - 使用“多点触控”时，按钮的行为很奇怪

> ID：12710997
> 
> 赞同：0
> 
> 时间：2012-10-03T14:46:56.767
> 
> 标签：android, multi-touch

我正在写一个测验。我有四个按钮：回答选项，我正在使用[Android 多点触控！破解任何人？](https://stackoverflow.com/questions/5938970/android-multitouch-hack-anyone)禁用多点触控的代码片段。

但是这些按钮似乎只有在您**快速点击它们时才起作用。**

如果你慢慢按下按钮然后松开，按钮只会闪烁，没有任何反应。有人可以帮我弄清楚如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T08:14:48.383

I have used [@JQCorreia](https://stackoverflow.com/questions/5938970/android-multitouch-hack-anyone?lq=1) hack and overrided his "onTouchEvent" like this:

```
 @Override
        public boolean onTouchEvent(MotionEvent event){
        int action = event.getAction() & MotionEvent.ACTION_MASK;

        switch (action) {
        case MotionEvent.ACTION_DOWN:
            for(View v: views){
                Rect r = new Rect();
                v.getGlobalVisibleRect(r);
                if (event.getX() > r.left && event.getX() < r.right
                        && event.getY() > r.top
                        && event.getY() < r.bottom) {
                    v.onTouchEvent(event);
                }
            }
            break;
        case MotionEvent.ACTION_UP:
            for(View v: views){
                Rect r = new Rect();
                v.getGlobalVisibleRect(r);
                if (event.getX() > r.left && event.getX() < r.right
                        && event.getY() > r.top
                        && event.getY() < r.bottom) {
                    v.onTouchEvent(event);
                }
            }
            break;
        case MotionEvent.ACTION_MOVE:
            for(View v: views){
                Rect r = new Rect();
                v.getGlobalVisibleRect(r);
                if (event.getX() > r.left && event.getX() < r.right
                        && event.getY() > r.top
                        && event.getY() < r.bottom) {
                }
                else{
                    v.onTouchEvent(event);
                }
            }
            break;
        }
        return true;
    } 
```

That works for me.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T05:58:55.073

这是一段可能有效的代码，请注意我没有时间尝试它..

```
private static final String sClickKey = "clickkey";
private boolean mClicked;

@Override
public void onClick(View view) {

    synchronized (sClickKey){

        if (!mClicked){
            mClicked = true;
            /* do the rest here... */
        }

    }

} 
```

使用`synchronize`将确保只有第一个被点击的按钮会进入`if(!mClicked)`，然后将`mClicked`值更改为，`true`以便下一个事件不会在 if 语句中传递..

我希望这有帮助！;)