# StackOverflow 问答 13314000-13314999

# java - java中的哈希表覆盖问题

> ID：13314004
> 
> 赞同：0
> 
> 时间：2012-11-09T18:40:34.263
> 
> 标签：java, arraylist, hashtable, overwrite

我正在学习 Java，但无法`put`将数据添加到 Java 哈希表中。

我有这个代码

```
double finalIDF = 0.0;
double finalIDF = 0.0;
double finalBM = 0.0;

ArrayList<Double> finalTMlist = new ArrayList<Double>();
 Hashtable<String, ArrayList<Double>> BM25TFIDF = new Hashtable<String, ArrayList<Double>>();
 String[] bm25QueryList // this is the array to store strings like {hey , good , by}

 for(int finalindex = 0; finalindex < bm25QueryList.length ; finalindex++)
{
actualTFvalueforEachDoc.clear();
finalTMlist.clear();
finalIDF = 0.0;
finalIDF = htBM25IDF.get(bm25QueryList[finalindex]);
finalTMlist = tfForAlldoc.get(bm25QueryList[finalindex]);

 for(int innerfinal = 0 ; innerfinal < finalTMlist.size() ; innerfinal++ ){
 finalTM =finalTMlist.get(innerfinal);
finalBM =  finalIDF * finalTM;
actualTFvalueforEachDoc.add(finalBM); 
finalTM = 0.0;
finalBM = 0.0;   }
 BM25TFIDF.put(bm25QueryList[finalindex], actualTFvalueforEachDoc);
 System.out.println("Right before final step after BM25TFIDF " + BM25TFIDF);  } 
```

我想`ArrayList<Double>`使用一个`String`键将其放入哈希表中。

第一次通过循环我得到了钥匙`"orange"`

> ```
> Right before final step after BM25TFIDF {orange=[1.1698113207547172, 1.0508474576271187, 0.8682367918523235, 1.6330439988027539, 0.8938401048492793, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 1.0133729569093612, 0.0]} 
> ```

这很好

但是，当我用第二个字符串键插入第二个数组列表时，`"bye"`我得到

> 在 BM25TFIDF {orange=[0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 4.238037326690413, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.] 之后的最后一步之前, bye=[0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 4.238037326690413, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0]}

它正在覆盖第一个数组列表。我每次都使用字符串数组来更改密钥，所以它不应该发生。

我不太确定它一直在写的原因。

有人知道原因吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-09T18:43:29.537

不要`finalTmList.clear()`在你的 for 循环中做。这将清除 指向的列表`finalTmList`，然后清除指向该列表的所有引用。

因为，当您向 中添加列表时，您并没有添加指向同一个.`Map`的副本`List`，而是`copy`您的. 因此，您对该引用所做的任何更改，或指向列表的任何引用，都将反映在所有引用中。`List Reference``List``list`

您应该在 for 循环中为 Map 的每个条目创建一个新列表：-

```
finalTMlist = new ArrayList<Double>(); 
```

将上述语句移动到您的第一个 for 循环中。

```
for(int finalindex = 0; finalindex < bm25QueryList.length ; finalindex++) {
    finalTMlist = new ArrayList<Double>();
    // Your rest code. 
```

并且不管它是什么，都遵循同样的`actualTFvalueforEachDoc.clear()`方法，因为我在代码中看不到声明。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T18:46:08.470

您应该`ArrayList`为地图中的每个条目创建一个新条目。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-09T18:50:24.047

您必须在开始新的迭代之前创建一个新的数组列表

```
actualTFvalueforEachDoc = new ArraList<Double>(); 
```

# grails - 使用带有 inlist 约束和动态查找器的动态脚手架

> ID：13314009
> 
> 赞同：3
> 
> 时间：2012-11-09T18:40:44.480
> 
> 标签：grails, dns, constraints, scaffolding

Grails 2.0.4 - 使用带有 inlist 约束和动态查找器的动态脚手架。

我正在尝试在域对象的 inList 约束中使用动态查找器。如果我在应用程序处于活动状态时通过 run-app 更改约束以 sample 2 = Aidy.findAll()*.code 它可以很好地从引导的示例数据中创建对象表单的下拉列表。但是，随后使用 grails run-app 引导应用程序失败并出现 MissingMethodException。

```
//1- aidyear(blank:false, maxSize:4, inList:{ [] << '0203' << '0304' << '0405' << '0506'}())
//2- aidyear(blank:false, maxSize:4, inList:{ Aidy.findAll()*.code}()) 
```

在域的 inlist 约束中使用 findAll 是个坏主意吗？有什么建议/建议吗？

缩写错误是

```
$ grails run-app
| Running Grails application
| Error 2012-11-09 12:54:16,589 [pool-5-thread-1] ERROR context.GrailsContextLoader  - Error executing bootstraps: Error creating bean with name 'transactionManagerPostProcessor': Initialization of bean failed; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'transactionManager': Cannot resolve reference to bean 'sessionFactory' while setting bean property 'sessionFactory'; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'sessionFactory': Invocation of init method failed; nested exception is org.codehaus.groovy.runtime.InvokerInvocationException: groovy.lang.MissingMethodException: No signature of method: edu.uvm.Aidy.findAll() is applicable for argument types: () values: []
Possible solutions: findAll(), findAll(), findAll(groovy.lang.Closure), findAll(java.lang.Object), findAll(java.lang.String), findAll(groovy.lang.Closure)
Message: Error creating bean with name 'transactionManagerPostProcessor': Initialization of bean failed; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'transactionManager': Cannot resolve reference to bean 'sessionFactory' while setting bean property 'sessionFactory'; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'sessionFactory': Invocation of init method failed; nested exception is org.codehaus.groovy.runtime.InvokerInvocationException: groovy.lang.MissingMethodException: No signature of method: edu.uvm.Aidy.findAll() is applicable for argument types: () values: []
Possible solutions: findAll(), findAll(), findAll(groovy.lang.Closure), findAll(java.lang.Object), findAll(java.lang.String), findAll(groovy.lang.Closure)
   Line | Method
->> 303 | innerRun in java.util.concurrent.FutureTask$Sync
- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - 
|   138 | run      in java.util.concurrent.FutureTask
|   886 | runTask  in java.util.concurrent.ThreadPoolExecutor$Worker
|   908 | run      in     ''
^   680 | run . .  in java.lang.Thread

Caused by BeanCreationException: Error creating bean with name 'transactionManager': Cannot resolve reference to bean 'sessionFactory' while setting bean property 'sessionFactory'; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'sessionFactory': Invocation of init method failed; nested exception is org.codehaus.groovy.runtime.InvokerInvocationException: groovy.lang.MissingMethodException: No signature of method: edu.uvm.Aidy.findAll() is applicable for argument types: () values: []
Possible solutions: findAll(), findAll(), findAll(groovy.lang.Closure), findAll(java.lang.Object), findAll(java.lang.String), findAll(groovy.lang.Closure)
->> 303 | innerRun in java.util.concurrent.FutureTask$Sync
....
....
... 
```

我有一个简单的示例项目：[https](https://github.com/mlmclaug/scaffold_inlist.git) ://github.com/mlmclaug/scaffold_inlist.git 但它只是以下 2 个域对象、一个控制器和一个 bootstrap.groovy

```
package edu.uvm
class Aidy {
    String code
    String desc
    Date startDate
    Date endDate
    String statusInd

    static constraints = {
        code(unique:true,blank:false, maxSize:4)
        desc(blank:false, maxSize:30)
        startDate(blank:false)
        endDate(blank:false)
        statusInd(blank:false, inList:["A","I"])
    }

}

package edu.uvm
class TreqMap {
        String aidyear
        String treq
        Integer seqno

        static constraints = {
            aidyear(blank:false, maxSize:4, inList:{ [] << '0203' << '0304' << '0405' << '0506'}())
            //aidyear(blank:false, maxSize:4, inList:{ Aidy.findAll()*.code}())
            treq(blank:false, maxSize:6, inList:["BNOTE","SCERT","PERKIN","PNOTE","LNOTE","SNOTE"])
            seqno(blank:true, range:0..99)
       }
}

package edu.uvm
class TreqMapController {
    def scaffold = edu.uvm.TreqMap
}

import edu.uvm.Aidy
class BootStrap {

    def init = { servletContext ->
        new Aidy(code:'0910', desc:'July 2009 - June 2010', startDate:'07/01/2009', endDate:'06/30/2010', statusInd:'A').save(failOnError:true)
        new Aidy(code:'1011', desc:'July 2010 - June 2011', startDate:'07/01/2010', endDate:'06/30/2011', statusInd:'A').save(failOnError:true)
        new Aidy(code:'1112', desc:'July 2011 - June 2012', startDate:'07/01/2011', endDate:'06/30/2012', statusInd:'A').save(flush:true,failOnError:true)
        println "Loaded " + Aidy.count() + " Aid Years"
    }
    def destroy = {
    }
} 
```

# pcap.net - C# Pcap.Net 发送 TCP、HTTP 数据包不起作用

> ID：13314012
> 
> 赞同：1
> 
> 时间：2012-11-09T18:41:02.000
> 
> 标签：pcap.net

我将使用 Pcap.Net 0.10.0 (67076) 发送 TCP 或 HTTP 数据包但不起作用，只能使用 UDP 数据包？我可以看到 TCPViewer 中显示 UDP 数据包，但现在显示 TCP 或 HTTP 数据包。

我使用的是 Windows 7 64 位，但我确实构建了应用程序 x86 平台。

这是我的代码。

```
using System;
using System.Collections.Generic;
using System.Linq;
using PcapDotNet.Base;
using PcapDotNet.Core;
using PcapDotNet.Packets;
using PcapDotNet.Packets.Arp;
using PcapDotNet.Packets.Dns;
using PcapDotNet.Packets.Ethernet;
using PcapDotNet.Packets.Gre;
using PcapDotNet.Packets.Http;
using PcapDotNet.Packets.Icmp;
using PcapDotNet.Packets.Igmp;
using PcapDotNet.Packets.IpV4;
using PcapDotNet.Packets.Transport;
using System.Text;

namespace PcapTest
{
class Program
{
    static void Main(string[] args)
    {
        // Retrieve the device list from the local machine
        IList<LivePacketDevice> allDevices = LivePacketDevice.AllLocalMachine;

        if (allDevices.Count == 0)
        {
            Console.WriteLine("No interfaces found! Make sure WinPcap is installed.");
            return;
        }

        // Print the list
        for (int i = 0; i != allDevices.Count; ++i)
        {
            LivePacketDevice device = allDevices[i];
            Console.Write(String.Format("{0}. {1}", (i + 1), device.Name));
            Console.WriteLine(device.Description != null ? String.Format(" ({0})", device.Description) : " (No description available)");
        }

        int deviceIndex = 0;
        do
        {
            Console.WriteLine(String.Format("Enter the interface number (1-{0}):", allDevices.Count));
            string deviceIndexString = Console.ReadLine();
            if (!int.TryParse(deviceIndexString, out deviceIndex) ||
                deviceIndex < 1 || deviceIndex > allDevices.Count)
            {
                deviceIndex = 0;
            }
        } while (deviceIndex == 0);

        // Take the selected adapter
        PacketDevice selectedDevice = allDevices[deviceIndex - 1];

        // Open the output device
        using (PacketCommunicator communicator = selectedDevice.Open(69559, PacketDeviceOpenAttributes.Promiscuous, 1000)) // read timeout
        {
            communicator.SendPacket(BuildHttpPacket());
        }
        Console.ReadKey();
    }

    private static Packet BuildHttpPacket()
    {
        EthernetLayer ethernetLayer =
            new EthernetLayer
            {
                Source = new MacAddress("01:01:01:01:01:01"),
                Destination = new MacAddress("02:02:02:02:02:02"),
                EtherType = EthernetType.None, // Will be filled automatically.
            };

        IpV4Layer ipV4Layer =
            new IpV4Layer
            {
                Source = new IpV4Address("99.99.99.99"),
                CurrentDestination = new IpV4Address("111.90.147.168"),
                Fragmentation = IpV4Fragmentation.None,
                HeaderChecksum = null, // Will be filled automatically.
                Identification = 123,
                Options = IpV4Options.None,
                Protocol = null, // Will be filled automatically.
                Ttl = 100,
                TypeOfService = 0,
            };

        TcpLayer tcpLayer =
            new TcpLayer
            {
                SourcePort = 4050,
                DestinationPort = 80,
                Checksum = null, // Will be filled automatically.
                SequenceNumber = 100,
                AcknowledgmentNumber = 50,
                ControlBits = TcpControlBits.Acknowledgment,
                Window = 100,
                UrgentPointer = 0,
                Options = TcpOptions.None,
            };

        HttpRequestLayer httpLayer =
            new HttpRequestLayer
            {
                Version = HttpVersion.Version11,
                Header = new HttpHeader(new HttpContentLengthField(11)),
                Body = new Datagram(Encoding.ASCII.GetBytes("hello world")),
                Method = new HttpRequestMethod(HttpRequestKnownMethod.Get),
                Uri = @"http://pcapdot.net/",
            };

        PacketBuilder builder = new PacketBuilder(ethernetLayer, ipV4Layer, tcpLayer, httpLayer);

        return builder.Build(DateTime.Now);
    }
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T19:12:30.687

如果你想在服务器中看到请求，你应该创建一个有效的 TCP 连接。这包括 TCP 3 次握手 (SYN,SYN-ACK,ACK)。

如果您只是发送一个 HTTP 请求，服务器将忽略它，因为它忽略了超出有效 TCP 连接的数据包。

[在http://en.wikipedia.org/wiki/Transmission_Control_Protocol](http://en.wikipedia.org/wiki/Transmission_Control_Protocol)中查看更多信息

# git - 测试不同客户端和服务器版本的最佳 Git 策略

> ID：13314017
> 
> 赞同：6
> 
> 时间：2012-11-09T18:41:24.153
> 
> 标签：git, testing, maven, versioning

我希望能够为 Java 客户端/服务器（使用嵌入式码头）运行集成测试。此外，我希望能够在集成测试期间混合匹配不同的服务器和客户端源代码版本。

我想知道完成此任务的最佳 git 或 maven 版本策略是什么：

1.  客户端和服务器使用相同的 git 存储库，很难检查各种服务器版本的代码并针对各种客户端版本的代码对其进行测试。

2.  使用单独的 git 存储库（具有客户端 src 和集成测试的第一个存储库，具有服务器 src 的第二个存储库） - 它还需要检出两个存储库以运行集成测试，并假设它们之间的相对路径。

3.  仅针对 maven-version 服务器 WAR 测试客户端 src 代码，可能会导致开发人员针对与签出的服务器源代码不匹配的服务器 WAR 运行测试时出现诚实错误。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-11T21:21:56.373

我将指出第三个挑战：集成测试可能存在错误，因此您可能还希望独立控制测试版本。

我使用 git 的子模块功能来协调多个存储库。创建一个新的存储库，其中将包含对客户端存储库和服务器存储库的引用。你也可以在这个父仓库中放置一个基本的测试驱动程序。

当新的开发人员加入团队时，他们可以克隆这个父 repo，然后运行`git submodule update --init`克隆客户端和服务器子模块。这样他们就可以像其他人一样设置任何相对路径。

但是，我不喜欢让客户端 repo 假设服务器位于`../server/`. 所以我处理这个问题的方式是让父 repo 将任何需要的路径传递给子模块。例如，您可以`test.sh`在运行的父存储库中有一个

```
make -C client SERVER_PATH=$(pwd)/server test 
```

在您的情况下，您还可以将所有测试代码放在父仓库中。然后它可以安全地假设子模块的相对路径。

这种安排的一个有趣的附带好处是：您可以创建记录特定版本组合的 git 提交，因为在子模块中签出的版本会在您提交到父 ​​repo 时记录。您可以使用它为已通过测试的版本组合创建一个分支或一组标签。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-17T15:39:59.663

I suggest keeping the process simple, as you have enough variables going on already without introducing potential git management issues. To that end, I would avoid submodules. I would instead give the developers clear pairings of branches/tags to test for both the client and server repos in your testing matrix.

Use tags so you can more easily reuse and repeat the same tests in your matrix again in the future, especially after bugs have been fixed from the first round.

In short, I recommend your solution #2\. The relative paths assumption is preferable to the potential confusion introduced by submodules.

# iphone - 如何自动调整图像大小，但在 ImageView 的顶部（在 Xcode 中以编程方式）？

> ID：13314018
> 
> 赞同：1
> 
> 时间：2012-11-09T18:41:32.347
> 
> 标签：iphone, uiimageview, scaling, contentmode

我有一个 imageView（比如 100x100），我想用一个（较小的）图像（比如 50x10）填充，我希望图像位于**视图的顶部**，而不是视图的中间。

如果我使用

```
imageView.contentMode = UIViewContentModeScaleAspectFit; 
```

它使用缩放为 100x20（如预期）但位于视图中间的图像填充视图。

像这样：

```
+---------+
|         |
|i m a g e| <---my image (scaled)
|         |
+---------+ <---my UIImageView 
```

如果我设置

```
imageView.contentMode = UIViewContentModeTop | UIViewContentModeScaleAspectFit; 
```

我明白了：

```
+---------+
|  image  | <---my image (not scaled)
|         |
|         |
+---------+ 
```

图像**没有**缩放，它在 imageView 的中间保持 50x10（按照 UIViewContentModeTop 的指示，但它忽略了 UIViewContentModeScaleAspectFit）。

我如何让它接受**两者**？像这样：

```
+---------+
|i m a g e|
|         |
|         |
+---------+ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T06:48:39.920

这可能是最糟糕的解决方案，但它有效，您应该先设置图像视图的框架，然后调用此方法。

```
-(void)adjustImageViewWithImageDimension:(CGRect)frame{
    UIImageView *tempView = [[UIImageView alloc] initWithFrame:frame];
    tempView.image = self.image;
    tempView.contentMode = UIViewContentModeScaleAspectFill;
    tempView.clipsToBounds = false;
    CGFloat oldAlpha = self.alpha;
    self.alpha = 1;
    UIGraphicsBeginImageContext(tempView.bounds.size);
    [tempView.layer renderInContext:UIGraphicsGetCurrentContext()];
    UIImage *resultingImage = UIGraphicsGetImageFromCurrentImageContext();
    UIGraphicsEndImageContext();
    self.alpha = oldAlpha;
    self.image = resultingImage;
    self.contentMode = UIViewContentModeTop;
    self.clipsToBounds = YES;
} 
```

# debugging - Lithium：我们可以看到执行的查询，如 CakePHP 所示

> ID：13314022
> 
> 赞同：0
> 
> 时间：2012-11-09T18:42:02.313
> 
> 标签：debugging, logging, lithium

你知道有什么方法可以像在 CakePHP 中一样显示在 Lithium 中执行的查询吗？我可能会更容易找到执行的内容。在页面底部，它显示了执行的查询。

![截图] [http://imgur.com/ffNfQ](http://imgur.com/ffNfQ)

收到答案后，我将代码添加到我的控制器中：

```
Volumes::applyFilter('find', function($self, $params, $chain) {
      echo '<pre>===== self ======<br>';
      var_dump($self);
      echo '===== params ======<br>';
      var_dump($params);
      echo '===== chain ======<br>';
      var_dump($chain);
      echo '</pre>';
      $next = $chain->next($self, $params, $chain);

      return $next;

}); 
```

它为我提供了关于 self 和 params 的所有 var_dump 的输出，但我需要执行的 SQL 查询。

请查看屏幕截图[http://imgur.com/ffNfQ](http://imgur.com/ffNfQ)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-10T10:24:01.887

您可以通过向您希望记录的查询类型添加过滤器来做到这一点。您可以在引导文件中全局定义它们，也可以在控制器中“本地化”定义它们。下面的示例不会很好地打印查询，但是当您拥有数据时这很容易做到。

下面的代码显示了如何获取信息，它并没有以漂亮的方式输出它。

```
 Connections::get('default')->applyFilter('read', function($self, $params, $chain) {

        echo "===========</br>\n"; 
        if (is_object($params['query'])){
            var_dump($params['query']->conditions());
        }
        else{
            echo 'Query: '; var_dump($params['query']); echo "</br>\n";
        }
        $time = microtime(true);

        $next = $chain->next($self, $params, $chain);

        $time = microtime(true) - $time;            
        echo "Results: " . count((array)$next) . "</br>\n";
        echo "Time: " . $time . "</br>\n";

        return $next;

    }); 
```

请注意，直接从过滤器中回显数据将使您的页面无用，因为这将在标题之前打印。但是，如果您将过滤器中的数据保存到数组而不是输出它，您可以稍后在视图中使用它。例如，您可以制作一个模板来将此信息添加到页面中。

编辑：更新的代码

Edit2：添加了一种始终获取执行的确切 SQL 的方法。要获得

```
Connections::get('default')->applyFilter('_execute', function($self, $params, $chain) {
    echo "SQL: " . $params['sql'] . "</br>\n";
    $time = microtime(true);

    $next =  $chain->next($self, $params, $chain);

    $time = microtime(true) - $time;
    $count = 0;
    while ($next->next())
     $count++;
    $next->rewind();
    echo "Count: " . $count . "</br>\n";        
    echo "Time: " . $time . "</br>\n";
    echo "=====================</br>\n";

    return $next;
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-10T10:47:16.997

正如@Nils 建议的那样，您可以利用锂过滤器并编写一个简单的查询记录器。
我在[这里](https://gist.github.com/4050668)做了一个。它将`read`查询记录到环境中的文件中`production`。
您应该能够自定义和添加过滤器`create`，`update`以及`delete`满足您的需求的操作。

如果您正在寻找像 Cake 的调试工具栏这样的开箱即用解决方案，请检查`li3_perf`项目：[https ://github.com/tmaiaroto/li3_perf](https://github.com/tmaiaroto/li3_perf)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-12T20:38:40.133

根据 Nils 和 Mehdi 的所有建议，我创建了一个新插件，它只会显示查询结果，而不是 vardump 或 print_r() 用于使用 MongoDB 在 Lithium 中执行的查询。

我现在真的很容易找到它正在执行的内容。

你可以看看 Github 上的项目：

[https://github.com/nilamdoc/li3_show](https://github.com/nilamdoc/li3_show)

![li3_show 的输出](../Images/89a75f067b9ae8fbd19bf938f03caddb.png)

# objective-c - 测量线程等待锁所花费的时间（由 coredata 锁定）

> ID：13314024
> 
> 赞同：2
> 
> 时间：2012-11-09T18:42:04.510
> 
> 标签：objective-c, xcode, core-data, instruments

我们在某些线程中使用 coredata ......（太多并发上下文不好 - 我知道，我经历过）

现在围绕每个获取/保存核心数据包装一个锁。

我现在想测量一个线程在等待获取该锁时被阻塞所花费的时间。

* * *

我想我可以只使用时间分析器甚至线程状态仪器或采样器。但是： - 时间分析器只是忽略等待（可能是因为它不是 CPU 调用） - 采样器也是如此（即使他不在 cpu 模式下） - 线程状态仪器也没有向我显示正确的调用堆栈 :( [但也许（这总是可能性）我确实忽略了一个简单的解决方案]

* * *

在这里，我有一个非常简单的应用程序，它也有一个锁，我也无法获得等待时间......也许你可以帮助我在这个例子中获得主线程等待的时间——使用一些分析技术，我可以然后转移到coredata案例：

```
@implementation DDAppDelegate

- (void)applicationDidFinishLaunching:(NSNotification *)aNotification
{
    NSLock *l = [[NSLock alloc] init];
    NSLog(@"made");
    [NSThread detachNewThreadSelector:@selector(hogTheLog:) toTarget:self withObject:l];
    NSLog(@"wait");
    [l lock];
    NSLog(@"got");
    [l unlock];
    NSLog(@"terminate");
    [NSApp terminate:nil];
}

- (void)hogTheLog:(NSLock*)l {
    [l lock];
    sleep(3);
    [l unlock];
}
@end 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-03-20T11:42:38.000

我不确定 Xcode 有这个功能多久，我只在 5.1 中注意到它。在“时间分析器”仪器配置中，现在有一个复选框“记录等待线程”。在这种模式下，它会记录应用程序在每个方法/函数等上花费了多少时间（而不是仅仅测量 CPU 时间）。

![在此处输入图像描述](../Images/2d4e58dd7b1f4f7726b22064e363ec8d.png)

我将采样间隔设置为 20 毫秒，否则整体会太慢。

UPD：另外，将“Sample Perspective”（在屏幕截图的左下角）设置为“Running Sample Times”以在线程刚刚从图片中空闲时丢弃样本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T14:17:43.137

使用 Instruments 中的“系统调用”工具。如果您在启动 Instruments 时选择“系统跟踪”模板，您将获得此仪器。这将为您提供各种日程安排信息，让您找到答案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-10-10T19:07:16.077

我最近遇到了一个问题，即我的应用程序由于太多 CoreData 上下文而挂起。我通过使用 @synchronized 关键字包装代码来修复它，如下所示：

```
NSManagedObjectContext *context = [[DataStore sharedStore] managedObjectContext];
@synchronized(context) {
   ... do some database stuff
} 
```

DataStore 是我的单例，它返回一个上下文。显然该应用程序现在运行速度有点慢，但我稍后会对其进行优化。如果有人抱怨，我会说“你宁愿有一个稍微慢一点的应用程序还是一个经常崩溃的应用程序？”。我的理念始终是“让它发挥作用，然后让它变得更快”。

# batch-file - cassandra批量增量计数器？

> ID：13314028
> 
> 赞同：0
> 
> 时间：2012-11-09T18:42:21.910
> 
> 标签：batch-file, cassandra, counter, increment

我有一个电话表，电话号码是关键，有 4 列（总计、通话、短信、已接收，...）。每次拨打电话时，我都需要增加总数，然后打电话，......短信也是如此。现在我通过增加总数来更新行，然后增加呼叫/短信。我只是想知道是否有批量增量，所以我可以一次更新它们？所有的计数器（总数、通话、短信、收到……）都需要准确，我可能在 0.5 秒内有 2 个事件进入同一部手机。我使用“增量计数器”以获得准确的计数器。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T19:11:05.983

是的，您可以使用[batch_mutate](http://wiki.apache.org/cassandra/API#batch_mutate)一次更新多个列。请注意，batch_mutate 不是原子的，因此，如果某些列更新失败，则不会发出回滚。

# wordpress - 具有自定义帖子类型的 Wordpress 评论

> ID：13314034
> 
> 赞同：1
> 
> 时间：2012-11-09T18:42:41.877
> 
> 标签：wordpress, comments, custom-post-type

只是想知道是否可以在自定义帖子组合中包含评论表单？现在正在发生的是投资组合按预期显示，但每个投资组合的评论表单都显示在投资组合之外。我使用放置在页面中的短代码调用投资组合，然后查询该页面以显示投资组合。我试过放置 .comments_template()。在投资组合内的 div 内，但 wordpress 忽略该 div 并将其放置在其他地方。有任何想法吗？

# c# - WebMethod 不活动/不可见？

> ID：13314035
> 
> 赞同：1
> 
> 时间：2012-11-09T18:42:47.817
> 
> 标签：c#, web-services, webmethod

好的，我的 Web 服务中有一个 WebMethod，它工作正常。然后我想添加另一个我想发送整个对象的地方，但是当我试图从 Windows 窗体调用这个方法时，它说方法丢失了？

网络服务代码：

```
{ 
[WebMethod]
public int getNumber(int n)
    {
        return n * n * 100;

    }

[WebMethod]
public string GetValues(string value)
        {

            return "OK";
        }
    } 
```

客户端代码：

```
private void button1_Click_1(object sender, EventArgs e)
        {
localhost.Service1 service2 = new localhost.Service1();
            metadata detective = new metadata();
            detective.CrimeID = txtCrimeID.Text;
            detective.InvestigatorID = txtInvestID.Text;
            detective.DataArtefactID = txtDataID.Text;

            service2\.  **<== when I type here GetValues = "Menu.localhost.Service1 does not contain definition for GetValues"** 
} 
```

但如果直接在“service2”之后。我将开始输入 get，然后方法 getNumber 将显示为可能的选择。我不明白为什么一种方法运行良好但另一种方法看起来不存在？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T18:57:42.280

修改 web 服务后，更改不会传播到您的 winforms 应用程序，直到您更新对它的引用。创建引用时，可用方法存储在服务的元数据中。

更新您的服务参考。

# google-chrome-extension - 从注入的 javascript 代码执行 contentscript.js.function()

> ID：13314046
> 
> 赞同：0
> 
> 时间：2012-11-09T18:43:57.333
> 
> 标签：google-chrome-extension, content-pages

我想在 chrome 扩展（类型：content_page）中执行一个函数，从在选项卡加载的网页中注入的 javascript。

我能怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T18:59:43.773

如果您的意思是“注入”作为扩展的一部分，那么请查看[开发人员文档以了解消息传递](http://developer.chrome.com/extensions/messaging.html)。

如果注入的是网页本身的一部分，或者是另一个非扩展 javascript 文件，我不相信有任何方法可以做到这一点，或者任何理由它甚至是安全的。

如果它是驻留在全局级别的函数，只需像调用任何其他函数一样调用它（但要注意冲突；如果它是通用名称）。

# c - 警告 - 初始化使指针从整数而不进行强制转换

> ID：13314049
> 
> 赞同：4
> 
> 时间：2012-11-09T18:44:12.297
> 
> 标签：c, compiler-warnings

我发现了类似的问题，但我认为它们不适用于我的具体问题，所以如果有，我很抱歉！

我作为一年级 CS 学生正在学习 C，并试图用 C 进行测验，但我无处可去，因为每次我尝试编译以查看它是否工作时，我都会收到消息“警告：初始化使指针来自没有强制转换的整数。”

我已经解决了所有的语法错误（我认为），但我只是一辈子都想不通。我已经浏览了我所有的演讲幻灯片，但没有一个涵盖这一点。

```
#include <stdio.h>
#include <scc110.h>

int player1score, player2score;
char* answer1, answer11, answer111, answer2, answer22, answer222;

int geography()
{
  printf ("The first category is geography. Note: Player 1 always goes first.\n");

  char* answer1 = AskForStringAndWait("Player 1: What is the capital of India?");
  if (strcmp(answer1,"New Delhi")==0)
    player1score++;

  char* answer2 = AskForStringAndWait("Player 2: What is the capital of Iran?");
  if (strcmp(answer2,"Tehran")==0)
    player2score++;

  char* answer11 = AskForStringAndWait("Player 1: Name a country that borders France that  isn't Germany, Italy or Spain.");
  if (strcmp(answer11,"Luzembourgh")==0 ||
      strcmp(answer11,"Switzerland")==0 ||
      strcmp(answer11,"Belgium")==0)
    player1score++;

  char* answer22 = AskForStringAndWait("Player 2: Name one of the main British Channel Islands.");
  if (strcmp(answer22,"Guernsey")==0 ||
      strcmp(answer22,"Jersey")==0)
    player2score++;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-09T18:56:15.467

你忘了声明`AskForStringAndWait`函数。

在现代 C（过去的 C99）中，这将是一个错误，因为 C99 不允许调用未声明的函数。

在 C89/90 中，这不是错误。当调用未声明的函数时，假定它返回一个`int`值。所以，你的

```
char* answer1 = AskForStringAndWait("Player 1: What is the capital of India?"); 
```

被解释为尝试用一个值初始化一个`char *`指针。`int`因此发出警告。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T18:53:08.303

您正在获取一个整数值并将其转换为指针。源代码是干什么用的`AskForStringAndWait`？我相信您的函数返回一个字符，但您将该结果存储在一个字符指针 ( `char *`) 中。另外，您应该注意`char answer11`和`char * answer11`不是等效的。虽然它们同名，但一个是全局变量，另一个是函数内部的局部变量。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-09T18:53:20.503

```
char* answer1, answer11, answer111, answer2, answer22, answer222; 
```

在这个声明`answer1`中是`char*`和其他的只是`char`类型

但据我认为你已经在内部再次声明了相同的全局变量

```
int geography() {}  function 
```

因此，当您尝试获取这些指针的值时，您可能会收到警告或错误

所以像这样声明

`char* answer1, *answer11, *answer111, *answer2, *answer22, *answer222;`

并且内部函数不要使用`char *`before`answer1`等等

只需使用这些变量

还有返回类型的问题，`geography()`但是`int`你正在投入`char*`

# javascript - Enyo 应用程序混合插件工作错误

> ID：13314052
> 
> 赞同：0
> 
> 时间：2012-11-09T18:44:15.943
> 
> 标签：javascript, c++, webos, enyo, pdk

我创建了这样的 PDK 插件：

```
#include <iostream>
#include <fstream>

#include "PDL.h"
#include "SDL.h"

#define forever for(;;)

using namespace std;

PDL_bool changeUserAgent(PDL_JSParameters * params)
{
    ofstream s("/media/internal/myfile.txt");
    s << "Some content";
    s.close();
    return PDL_TRUE;
}

int main(int argc, char** argv) 
{
    int err = SDL_Init(SDL_INIT_VIDEO);
    if ( err )
    {
        cerr << "Could not init SDL: " << SDL_GetError();
        return 1;
    }

    PDL_Init(0);

    PDL_RegisterJSHandler("changeUserAgent", changeUserAgent);
    PDL_JSRegistrationComplete();
    PDL_CallJS("ready", NULL, 0); //for enyo

    atexit(SDL_Quit);
    atexit(PDL_Quit);

    SDL_Event Event;
    bool paused = false, gotEvent;

    forever
    {
        if (paused) 
        {
            SDL_WaitEvent(&Event);
            gotEvent = true;
        }
        else 
        {
            gotEvent = SDL_PollEvent(&Event);
        }

        while (gotEvent)
        {
            switch (Event.type)
            {
                case SDL_ACTIVEEVENT:
                    if (Event.active.state == SDL_APPACTIVE) {
                        paused = !Event.active.gain;
                    }
                    break;

                case SDL_QUIT:
                    // We exit anytime we get a request to quit the app
                    // all shutdown code is registered via atexit() so this is clean.
                    exit(0);
                    break;

                default:
                    break;
            }
        }

        gotEvent = SDL_PollEvent(&Event);
    }

    return 0;
} 
```

在 Enyo 我打电话

```
enyo.kind(
{
    name: "UserAgentTool",
    kind: enyo.VFlexBox,
    components: 
    [
        // UI components
        {
            kind: enyo.Hybrid,
            name: "plugin",
            executable: "UserAgentTool-plugin"
        }
    ],
    uaclick: function(inSender)
    { 
        this.$.plugin.callPluginMethodDeferred(null, "changeUserAgent")
        enyo.windows.addBannerMessage("User agent changed to " + inSender.getUserAgent(), '{}') 
    }
}); 
```

UI 按钮是一种新类型

```
enyo.kind(
{
    name: "DeviceButton",
    kind: "Button",
    // some other properties
    onclick: "uaclick",
}) 
```

当我单击 DeviceButton 时，横幅会成功升起。这表明执行了uaclick“槽”。但是没有创建文件“/media/internal/myfile.txt”。我究竟做错了什么？

谢谢，马辛

编辑：我应该如何使用回调？我真的是 Enyo 新手 :( 这和“onclick”一样吗？

我的 Enyo 应用程序的 appinfo.json 是：

```
{
"id": "com.palm.marmistrz.useragenttool",
"version": "1.0.0",
"vendor": "Marcin Mielniczuk",
"type": "web",
"main": "index.html",
"title": "User Agent Tool",
"icon": "icon.png",
"uiRevision":2
} 
```

我没有插件的 appinfo.json。它只是一个可执行文件。目录上的 ls -l 是：

```
rw-r--r-- 1 marcin marcin  215 Nov  2 13:09 appinfo.json
drwx------ 3 marcin marcin 4096 Nov  7 15:10 build
-rw-r--r-- 1 marcin marcin  100 Oct 31 18:57 depends.js
-rw-r--r-- 1 marcin marcin   21 Oct 13 14:45 framework_config.json
drwxr-xr-x 2 marcin marcin 4096 Oct 13 14:44 images
-rw-r--r-- 1 marcin marcin  295 Oct 13 14:44 index.html
drwx------ 2 marcin marcin 4096 Nov  7 15:08 plugin
drwxr-xr-x 2 marcin marcin 4096 Nov  7 15:06 source
-rw-r--r-- 1 marcin marcin 8884 Nov  6 17:41 UserAgentTool-plugin 
```

build 是构建插件的目录 images 为空 plugin 是插件源 source 是 Enyo 源

我做错了吗？

谢谢！

# python - 维护签名、允许修改文档字符串并允许可选参数的 Python 装饰器

> ID：13314054
> 
> 赞同：3
> 
> 时间：2012-11-09T18:44:24.477
> 
> 标签：python, decorator

所以我已经坚持了一段时间，我想我会寻求一些建议。我正在尝试创建一个装饰器，它可以修改函数文档字符串，允许可选参数或无参数，并且保留签名。这些可以单独进行。甚至得到三个中的两个。

下面的示例似乎修改了文档字符串并允许可选参数或没有参数。但是，此方法不保留签名。

```
from functools import wraps
def thisDecorator(*targs, **tkwargs):
    def internalFunc(func):
        func.__doc__ = "Added this... {0}".format(func.__doc__)
        @wraps(func)
        def wrapper(*args, **kwargs):
            return func(*args, **kwargs)
        return wrapper
    if len(targs) == 1 and callable(targs[0]):
        return internalFunc(targs[0])
    else:
        return internalFunc 
```

我已经阅读了确实保留签名的装饰器模块，但我似乎无法修改文档字符串。

非常感谢所有帮助

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-09T21:53:04.757

通过向内部包装器添加装饰器，这将保留函数签名。

```
from functools import wraps
from decorator import decorator

def thisDecorator(*targs, **tkwargs):
    def internalFunc(func):
        func.__doc__ = "Added this... {0}".format(func.__doc__)
        @wraps(func)
        def wrapper(func, *args, **kwargs):
            return func(*args, **kwargs)
        return decorator(wrapper, func)
    if len(targs) == 1 and callable(targs[0]):
        return internalFunc(targs[0])
    else:
        return internalFunc 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T19:41:32.733

也许我不完全理解您的要求，但这似乎对我有用：

```
class myDeco:
    def __init__(self, f):
        self.f = f
        if f.__doc__:
            self.__doc__ = 'great doc: ' + f.__doc__
        else:
            self.__doc__ = 'ooohh, no doc'
    def __call__(self, *args, **kwargs):
        print "decorator args and kwargs: {0}, {1}".format(args, kwargs)
        self.f(*args, **kwargs)

@myDeco
def test1():
    """test1 doc"""
    print 'test1'

@myDeco
def test2(a, b):
    print 'test2: {0}, {1}'.format(a,b)

@myDeco
def test3(a, *args):
    print "test3: {0}, {1}".format(a, args)

@myDeco
def test4(a, *args, **kwargs):
    print "test4: {0}, {1}, {2}".format(a, args, kwargs)

print test1.__doc__
print test2.__doc__
print test3.__doc__
print test4.__doc__

test1()
test2(1,2)
test3(1,2,3)
test4(1,2,3, foo=4, bar=5) 
```

保留签名，修改文档，允许可选参数。输出是：

```
great doc: test1 doc
ooohh, no doc
ooohh, no doc
ooohh, no doc
decorator args and kwargs: (), {}
test1
decorator args and kwargs: (1, 2), {}
test2: 1, 2
decorator args and kwargs: (1, 2, 3), {}
test3: 1, (2, 3)
decorator args and kwargs: (1, 2, 3), {'foo': 4, 'bar': 5}
test4: 1, (2, 3), {'foo': 4, 'bar': 5} 
```

# php - PHP替换数组中的字符

> ID：13314056
> 
> 赞同：6
> 
> 时间：2012-11-09T18:44:44.853
> 
> 标签：php, arrays, replace

我的数组 first_name、last_name、...中有这样的数据

我正在寻找一个用空格替换 _ 的数组。这可能吗？

我查看了[http://php.net/manual/en/function.array-replace.php](http://php.net/manual/en/function.array-replace.php)但我不确定这是否是我想要的。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-11-09T18:50:13.093

仅使用`str_replace`，它在所有重要的参数中都采用字符串或数组：

```
var_dump(str_replace('_',' ',array('foo_bar','lorem_ipsum')));

array(2) {
  [0]=>
  string(7) "foo bar"
  [1]=>
  string(11) "lorem ipsum"
} 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-11-09T18:46:39.747

```
foreach($array as $key=>$value){
  $array[$key]=str_replace("_"," ",$value);
} 
```

应该这样做，对吧？

# ruby - 使用 Heroku 和 Ruby 连接到 VPN 后面的服务器

> ID：13314057
> 
> 赞同：6
> 
> 时间：2012-11-09T18:44:48.580
> 
> 标签：ruby, heroku, vpn

我正在用 Ruby/RoR 编写一个将托管在 Heroku 上的应用程序。

它的要求之一是它连接到位于 Sonicwall VPN 后面的（Active Directory）身份验证服务器。

如何使用 Ruby 建立此 VPN 身份验证来访问此服务器？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-09T19:26:06.130

Heroku is just a service built on top of EC2 that manages deployment using a linux env. You don't have root access on on which means you can connect out to any service using any TCP protocol. But you can only listen for HTTP connections. Unfortunately this rules out setting up VPNs and SSH tunnels. You can do this on Amazon EC2.

# javascript - Jquery.height() 使用 F5 或 CTRL+F5 返回不同的结果

> ID：13314058
> 
> 赞同：2
> 
> 时间：2012-11-09T18:44:49.617
> 
> 标签：javascript, jquery

所以我试图找到我的图像的高度，然后添加一个上边距，这使我能够强加一个垂直中心。

我正在运行这段代码，在**F5 刷新**时我得到了正确的高度，但在**CTRL+F5 刷新**时它给了我一个小得多的高度。我有点假设这是一个加载/延迟的事情，但我正在使用准备好的文档，所以不确定发生了什么。我尝试使用 php 函数，但它极大地减慢了网站速度，因此必须坚持使用 jquery。

你可以看到它在这里工作。[www.mzillustration.com](http://www.mzillustration.com)

```
 jQuery(document).ready(function() {

 if (jQuery('.imagedisplay').length != 0) {
                jQuery('.imagedisplay').each(function(){ 

                var imgheight = jQuery(this).find('img').height();

                var topmarg = ((240 - imgheight) / 2) ; 

                jQuery(this).find('img').css({'margin-top':topmarg+'px'});

            });

}); 
```

非常感谢任何想法/帮助/解释。谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-09T18:48:34.330

onload 和 onread 之间是有区别的。

ready 将等到实际的 DOM 树完成，而 onload 将等到页面上显示的所有内容都完成加载。所以一个解释是，在清除缓存和刷新时，dom 树的完成速度比图像快得多，因此给出了错误的高度。

尝试改用 onload-event 并查看是否得到不同的结果。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-09T18:49:30.493

在向浏览器询问其高度之前，您需要确保图像已加载。如果该图像路径存在于 html 中，那么不幸的是，您需要一个 jquery 插件来以跨浏览器的方式处理它。

[https://github.com/alexanderdickson/waitForImages](https://github.com/alexanderdickson/waitForImages)

[http://desandro.github.com/imagesloaded/](http://desandro.github.com/imagesloaded/)

或者你将不得不等待在 jquery 中看起来像这样的 window.onload 事件：

```
 $(window).on('load', function(){.... 
```

但是，如果您使用窗口加载事件，它将等到所有资源都加载完毕，并且取决于您的站点，与仅测量图像本身相比，这可能是一个严重的延迟。

或者，如果您对从 javascript 加载图像感到满意，只需正确订购代码即可处理此问题：

```
 var loadTester = new Image(),
     imgH;
 $(loadTest).on('load',function(){
     imgH = $('#image').attr('src',loadTester.src).height();
 }
 loadTester.src = "paht/to/image.jpg"; 
```

您看到重新加载页面的方式有所不同的原因是简单的刷新不会清除缓存，因此图像已经加载。当您按 ctrl+f5 时，它会清除缓存，因此当您向浏览器询问高度时，图像尚未加载。

对于开发期间的缓存控制，请考虑获取 firefox web-developer 工具栏。

![在此处输入图像描述](../Images/1ca43e5060dcc6bea84ac0573d02a99b.png)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-09T18:56:05.857

试试这个方法：

```
jQuery(function() {
    jQuery('.imagedisplay img').each(function() {
        var $this   = jQuery(this),
            height  = $this.height();
        if (height) {
            $this.css('margin-top', ((240 - height) / 2) + 'px');
        } else {
            $this.on('load', function() {
                $this.css('margin-top', ((240 - $this.height()) / 2) + 'px');
            });
        }
    });
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-09T18:49:47.310

图像/可以与实际页面内容分开缓存/加载。准备好的文档可以（根据我的经验通常）发生在所有内容加载之前。

尝试将事件侦听器添加到正在加载的实际元素。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-09T19:20:22.947

在提取高度之前，您需要确保图像已加载。`complete`您可以使用图像上的属性轻松检查这一点。试试这个：

```
var setH = function() {
    $(this).css('margin-top', (240 - this.height) / 2);
}
$('.imagedisplay img').each(function() {
    if( this.complete ) {
        setH.call(this); // apply height straight away
        return;
    }
    $(this).load(setH); // apply height when the image has loaded
}); 
```

# php - 在动态 jquery 滑块之外调用函数

> ID：13314065
> 
> 赞同：0
> 
> 时间：2012-11-09T18:45:22.680
> 
> 标签：php, jquery, html, jquery-ui

我正在动态创建我的滑块，并且在“Slide”事件和“Stop”事件中我想调用一个在非动态内容中定义的函数。如果我每次都使用滑块创建它们，我可以让这些功能正常工作，但这似乎有很多冗余代码？

非动态函数

```
 $(document).ready(function() {
var converSecondsToMinutes;

convertSecondsToMinutes = function(secondsEntered){
    var secondsEntered = secondsEntered;

    var time = parseInt(secondsEntered,10);
    time = time < 0 ? 0 : time;

    var minutes = Math.floor(time / 60);
    var seconds = time % 60;

    minutes = minutes < 9 ? "0"+minutes : minutes;
    seconds = seconds < 9 ? "0"+seconds : seconds;
    var newTime = minutes+":"+seconds
    console.log(newTime);
    return newTime
}
}); 
```

动态 jQuery 滑块

```
 <?php
query...
result...
for(...){
?>
<Script>
$( "#slider"+<?php echo $id; ?> ).slider({ 
            animate: true ,
            value: 0,
            min: 0,
            //dynamic grab this
            max: <?php echo $playtime_seconds; ?>,
            step: 0.01,
            start: function( event, ui ) {
                ....
            },
            slide: function( event, ui ) {
                audio = ....
                audio.currentTime = ui.value;
                progress_seconds = parseFloat(audio.currentTime.toFixed(2));
                progress_seconds = $(function(){convertSecondsToMinutes(progress_seconds);});

                $('#progress_seconds'+<?php echo $id; ?>).html(progress_seconds);

            },
            stop: function( event, ui ) {
                ....
                }
            }

        });

    });

} 
```

我剪切并粘贴了对问题很重要的代码部分。

这是不起作用的行： $('#progress_seconds'+).html(progress_seconds);

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T18:55:46.910

您在我发表评论后进行了编辑，因此我的评论不再有意义，您的代码的 $(function(){ 部分不是必需的，请尝试使用：

```
progress_seconds = converSecondsToMinutes(progress_seconds); 
```

代码中的拼写错误对我来说是一个真正的问题，conver 在最后。

也不需要将你的函数包装在 $(document).ready() 中，像这样声明它：

```
function convertSecondsToMinutes(secondsEntered)
{
    var time = ...
    ...
} 
```

# c# - 编辑不是来自 MainPage 类的 XAML 文本框

> ID：13314066
> 
> 赞同：0
> 
> 时间：2012-11-09T18:45:32.807
> 
> 标签：c#, xaml, textbox, windows-phone

我有 MainPage 类，我可以使用此代码编辑 XAML 文本框的内容

```
box1.Text = ""; 
```

但是尝试从另一个类编辑文本框，以下代码将不起作用

```
MainPage.box1.Text = ""; 
```

错误是“非静态字段、方法或属性‘class.MainPage.box1’需要对象引用我已经尝试了所有方法，比如制作静态函数和在另一个类中创建新的 MainPage 对象，但没有任何效果

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T19:08:01.030

XAML 文本框位于 MainPage.xaml/.cs

文本框的值设置器在某个 X 类中。

您在以下语句中出现错误的原因是 box1 不是静态的，您需要 MainPage 的一个实例。

```
MainPage.box1.Text = ""; 
```

但不只是任何实例。您需要当前实例。所以类 X 中的方法需要接收 MainPage.xaml.cs 类的“THIS”实例，然后更改 box1 的值。

函数调用：

```
X xobj=new X();
xobj.ChangeboxValue(this); 
```

功能：

```
void ChangeboxValue(MainPage obj)
{
obj.box1.Text=""
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T18:50:22.770

您正在尝试访问`MainPage`没有对象实例的类的静态字段。

您需要一个`MainPage`类的实例才能像这样访问它：

```
MainPage myPage = new MainPage();
myPage.box1.Text = ""; 
```

# xml - 发送信息 Main swf 到加载到 swf

> ID：13314068
> 
> 赞同：0
> 
> 时间：2012-11-09T18:45:40.073
> 
> 标签：xml, actionscript-3, flash

我已经在我的主 fla 文件中正确加载了一个 swf。我正在加载的 swf 具有交互作用，并且具有自己的代码级别。加载的 swf 使用一些 XML 来运行不同的对象。我想将 xml 的文件路径从我的主 FLA 文件传递​​到加载的 swf 中。

关于如何做到这一点的任何建议？

# android - 完成时注册实体修改器

> ID：13314078
> 
> 赞同：1
> 
> 时间：2012-11-09T18:46:34.053
> 
> 标签：android, andengine

我刚开始使用AndEngine，

我正在移动这样的精灵：

```
if(pValueY < 0 && !jumping) {

                        jumping = true;

                        // User is currently holding the UP direction
                        // get the player entity (used to apply entity modifier, and get the current X position
                        final Entity playerEntity = (Entity) physicsHandler.getEntity();

                        // set the jump duration, set the starting x position, and how high the jump will be
                        final float jumpDuration = 8;
                        final float startX = playerEntity.getX();
                        final float jumpHeight = 40;

                        // set the move modifiers and set it as a sequence
                        final MoveYModifier moveUpModifier = new MoveYModifier(jumpDuration / 2, startX, startX - jumpHeight); 
                        final MoveYModifier moveDownModifier = new MoveYModifier(jumpDuration / 2, startX + jumpHeight, startX);
                        final SequenceEntityModifier modifier = new SequenceEntityModifier(moveUpModifier, moveDownModifier);

                        // apply modifier
                        playerEntity.registerEntityModifier(modifier);

                    }
                    else {

                        // basically if the user presses left or right this should occur
                        physicsHandler.setVelocityX(pValueX * 10);
                        distance += pValueX;
                    } 
```

我的问题是如何在 registerEntityModifier 函数完成后将跳转设置为 false ？（玩家完成跳跃后）

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T18:54:09.813

使用andengine的onModifierFinished()方法

```
 @Override
    protected void onModifierFinished(IEntity pItem)
    {
            super.onModifierFinished(pItem);
            // Your action after finishing modifier
    } 
```

使用此[链接](https://sites.google.com/site/matimdevelopment/entity-modifiers)了解更多详细信息..,.

# signalr - SignalR 打字稿声明文件

> ID：13314083
> 
> 赞同：12
> 
> 时间：2012-11-09T18:46:43.833
> 
> 标签：signalr, typescript

我已经开始使用 typescript，很容易找到 angular.js 和 jquery 的声明 (d.ts) 文件。虽然找不到 SignalR jquery 的。

你们能帮帮我吗。我可以创建一个界面，`extends JQuery`但不知何故它不起作用......

```
var hub = $.connection.myHub 
```

它在抱怨`connection`事情......说“'JQueryStatic'类型的值不存在属性'连接'”

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-11-13T09:44:52.560

[DefinitiveTyped 为SignalR](https://github.com/borisyankov/DefinitelyTyped)提供了完整的 TypeScript 定义。

*刚刚更新了链接，谢谢斯图尔特*

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-11-09T22:44:02.217

这是我能够以一种快速而肮脏的方式准备的。请注意，它可能几乎不正确，但现在对我来说已经足够了，而且它似乎按预期工作。

开始可能是件好事。让我们称之为“jquery.signalR-0.5.3.d.ts”：

```
/// <reference path="jquery.d.ts" />
interface Hub {
    id: string;
    state: any;
    start(options?: any, callback?: () => any): JQueryPromise;
}

interface SignalR {    
    log(msg: string, logging: bool): void;
    isCrossDomain(url: string): bool;
    changeState(connection: any, expectedState: number, newState: number): bool;
    isDisconnecting(connection: any): bool;

    hub: Hub;
    connection: HubConnection;

    init(url, qs, logging): void;
    ajaxDataType: string;
    logging: bool;
    reconnectDelay: number;
    state: any;
    start(options?: any, callback?: () => any): JQueryPromise;
    starting(callback?: () => any): SignalR;
    send (data): SignalR;
    sending (callback?: () => any): SignalR;
    received (callback?: (data) => any): SignalR;
    stateChanged (callback?: (data) => any): SignalR;
    error (callback?: (data) => any): SignalR;
    disconnected (callback?: () => any): SignalR;
    reconnected (callback?: () => any): SignalR;
    stop (async? : bool): SignalR;
}

interface HubConnection extends SignalR {
    hub: Hub;
}

// extend JQuery interface
interface JQueryStatic {
    signalR: SignalR;
    connection: SignalR;
} 
```

那么您可能想为您的集线器定义合同：

```
/// <reference path="./jquery.signalR-0.5.3.d.ts" />

interface IMyHub extends HubConnection {
    // your methods definition here
}

// extend SignalR interface
interface SignalR {
    myHub: IMyHub;
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-11-13T06:12:21.190

[自插]

我创建了一个工具来为您的集线器、方法以及您在客户端和服务器之间传递的类型生成 TypeScript 声明文件。它还包括最新的definitelyTyped signalr.d.ts 文件。我以 nuget 包的形式发布了 alpha 版本：SignalR.TypeScript。要安装此包，请在包管理器控制台中运行以下命令：

```
Install-Package SignalR.TypeScript -Pre 
```

我的博客上的更多信息和操作方法：http: [//murat.girg.in/2013/11/introducing-signalr-typescript/](http://murat.girg.in/2013/11/introducing-signalr-typescript/)

[/自插]

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-09T19:03:51.517

是不是这样：

```
interface signalR extends JQueryStatic {
     connection;
}

var hub = (<signalR>$).connection.myHub 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-08-31T13:51:25.230

这并不理想，但如果您需要将纯 signalR javascript 快速移动到 Typescript，您可以使用这样的接口（您仍然需要包含 signalr.d.ts 类型定义）。

```
interface SignalR {
    messageHub: any;
}

var chat = $.connection.messageHub;
chat.client.actionMessage = function (data) {
    console.info("actionMessage: received: message: " + data.message);
}; 
```

# vba - 为报表输入重复的查询参数

> ID：13314088
> 
> 赞同：3
> 
> 时间：2012-11-09T18:46:59.650
> 
> 标签：vba, ms-access

我目前正在构建一个需要多个聚合查询的报告（主要是不同事物的总和和计数）。

我构建了一个主报表，并有包含每个单独查询的子报表。所有这些查询都有一个日期范围的参数（这将是相同的）。

因此，当我拉起我的报告时，它会询问大约 12 次相同的参数（开始和结束日期）。什么是解决这个问题的有效方法？

我计划使用的丑陋解决方法（因为缺乏更好的解决方案）是让查询引用表单值。例子 ：

```
SELECT count(*) FROM tblTests 
WHERE testdate >= [Forms]![formReportParams]![startDate] 
    AND testDate <= [Forms]![frmReportParams]![EndDate] 
```

是否有一个不那么草率的解决方案，可以让我的单独子报表的所有查询共享相同的查询参数？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T19:42:18.463

您可以为开始日期和结束日期创建单独的函数，并在查询`WHERE`子句中使用这些函数。

```
Function GetStartDate(Optional ByVal pReset As Variant) As Date
    Static dteStart As Date
    If Not IsMissing(pReset) Then
        dteStart = pReset
    End If
    GetStartDate = dteStart
End Function 
```

初始化函数的静态日期值，它将作为返回值持续存在，直到您再次更改它。（但是它只在当前的 Access 应用程序会话中持续存在。）

```
GetStartDate #2012-01-01# 
```

然后在您的查询中使用该函数。

```
SELECT count(*) FROM tblTests 
WHERE testdate >= GetStartDate(); 
```

对 做同样的事情`GetEndDate()`。

# php - 做一些晦涩难懂的开放巫术工作

> ID：13314093
> 
> 赞同：1
> 
> 时间：2012-11-09T18:47:23.960
> 
> 标签：php, sql, drupal

我正在尝试使用[https://github.com/erikroos/BIS](https://github.com/erikroos/BIS)上的划艇俱乐部船预订系统，但我的才能已经到了尽头。

登录到我安装的系统似乎是问题所在。据我了解这个问题，开箱即用，它被设置为从原始创建者服务器上的 Drupal 数据库中借用用户登录详细信息。

显然，这对我不起作用。

我怀疑必须在以下方面进行更改：

```
函数验证登录（$user，$pass，$database_host，$login_database_user，$login_database_pass，$login_database）{

    // Drupal-DB 选择器
    $link_drupal = mysql_connect($database_host, $login_database_user, $login_database_pass);
    if (!mysql_select_db($login_database, $link_drupal)) {
        回显 mysql_error()." 
";
    }

    $query = "SELECT pass FROM users WHERE name='" 。$用户。"';";
    $result = mysql_query($query);
    如果（！$结果）{
        回显 mysql_error()." 
";
    }
    $row = mysql_fetch_assoc($result);
    $pass_db = $row['pass'];
    mysql_close($link_drupal);
    $pass_given = md5($pass);
    如果（$pass_db == $pass_given）{
        返回真；
    }
    返回假；
}

```

尝试登录会产生以下错误：（所有行引用都在上面的代码段中）

```
警告：mysql_connect() [function.mysql-connect]：第 95 行 /home/whatl675/public_html/boats/include_helperMethods.php 中用户 'whatl675_boat'@'localhost' 的访问被拒绝（使用密码：YES）

警告：mysql_select_db() 期望参数 2 是资源，布尔值在第 96 行的 /home/whatl675/public_html/boats/include_helperMethods.php 中给出
用户 'whatl675_boat'@'localhost' 的访问被拒绝（使用密码：YES）

警告：mysql_query() [function.mysql-query]：第 101 行 /home/whatl675/public_html/boats/include_helperMethods.php 中用户 'root'@'localhost' 的访问被拒绝（使用密码：NO）

警告：mysql_query() [function.mysql-query]：无法在第 101 行的 /home/whatl675/public_html/boats/include_helperMethods.php 中建立到服务器的链接
用户 'root'@'localhost' 的访问被拒绝（使用密码：否）

警告：mysql_fetch_assoc() 期望参数 1 是资源，在第 105 行的 /home/whatl675/public_html/boats/include_helperMethods.php 中给出的布尔值

警告：mysql_close() 期望参数 1 是资源，布尔值在第 107 行的 /home/whatl675/public_html/boats/include_helperMethods.php 中给出

```

所以我需要它做的是指向主数据库中的一个表（我们可以用表'users'调用'boat'）。

感谢您阅读本文（请不要觉得有义务提供帮助），

周刊

（哦，差点忘了，它完全是用荷兰语写的，很方便。）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T20:10:00.133

在我看来，您需要做的就是创建一个 MySQL 数据库，其中包含应用程序所需的所有表和列，并编辑配置变量（$database_host、$login_database_user、$login_database_pass）。那时，您可以更改 $link_drupal 以说出诸如 $link_mysql 之类的较少误导性的内容，然后从那里进行调试。

仅通过查看错误就可以看出它并不太复杂。完成所有这些并发布结果（剩余错误）。

您知道数据库需要的所有字段/值吗？让我知道我是否偏离轨道。

# xcode - xcode presentModalViewController 使用 AVCam 使旧的 ViewController 在后台仍然处于活动状态

> ID：13314095
> 
> 赞同：0
> 
> 时间：2012-11-09T18:47:36.677
> 
> 标签：xcode, nstimer, presentmodalviewcontroller

使用 AVCam 的应用程序出现问题。该应用程序拍摄照片并将它们保存到胶卷。打开应用程序后，它会完美地拍摄照片并以应有的方式保存它们。但是，一旦我离开该视图控制器转到另一个视图控制器然后返回，它会保存图像旋转 90 度的正常肖像图像。确实很奇怪的活动。

在拉了很多头发之后，我想也许我正在尝试运行太多会话，所以我确保我在 viewdidload 中结束会话并且 viewdiddisappear：

```
-(void)viewDidUnload{
if([[self captureManager] session ]){
    [[[self captureManager] session] stopRunning];
    self.captureManager = nil;
}
}

-(void)viewDidDisappear:(BOOL)animated{
if([[self captureManager] session ]&&rollCancel==NO){
    [[[self captureManager] session] stopRunning];
     self.captureManager = nil;
}
} 
```

还是行不通。离开后仍然保存不正确。

我像这样更改视图： -(void)openMenu{
MenuViewController * vc = [[MenuViewController alloc] initWithNibName:@"MenuViewController" bundle:nil]; [自我presentModalViewController：vc动画：YES]；[自我dismissViewControllerAnimated：没有完成：无]；}

也试过：

```
-(void)openMenu{

[self dismissViewControllerAnimated:NO completion:^{
    MenuViewController * vc = [[MenuViewController alloc] initWithNibName:@"MenuViewController" bundle:nil];
    [self presentModalViewController:vc animated:YES];
    [self dismissViewControllerAnimated:NO completion:nil];
}];    
} 
```

我不需要释放，因为我在弧上运行。这也不起作用，我什至无法使用此选项更改屏幕。所以，我添加了一个计时器来查看在我离开视图控制器后操作是否会继续执行：

```
updateTimer = [NSTimer timerWithTimeInterval: 5.0
                                      target: self selector: @selector(autoTimer)
                                    userInfo: nil repeats: YES];
[[NSRunLoop mainRunLoop] addTimer: updateTimer forMode: NSDefaultRunLoopMode];

-(void)autoTimer{
NSLog(@"blablabla");
} 
```

毫不奇怪，即使在离开视图控制器之后，blablabla 也会继续打印到我的控制台中。如果我来回走动，它会不断创建新的重复计时器并在我的控制台日志中发送垃圾邮件。

这与我的应用程序在返回屏幕后没有正确保存有关。这意味着执行 presentmodalviewcontroller 实际上并没有从运行中删除所有内容。

有没有其他人遇到过类似的问题，或者知道如何在视图控制器之间切换时实际清除它们？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T19:16:58.493

没有解决仍在后台运行的 NSTimer，但确实修复了与在后台打开的东西无关的景观问题

在这里找到解决方案：[https ://stackoverflow.com/a/6335992/1688727](https://stackoverflow.com/a/6335992/1688727)

# sql - 如何使用 VBA 从数据库中保存数百万条记录？

> ID：13314096
> 
> 赞同：1
> 
> 时间：2012-11-09T18:47:55.160
> 
> 标签：sql, oracle, excel, vba, ms-access-2010

我需要查询一个数据库并保存超过 600 万条记录，以便以后使用 excel VBA 进行分析和报告。最好的方法是什么？我需要能够稍后访问数据，分析它并生成分析数据的报告（我应该能够在我的系统中本地访问整个数据并且应该能够快速处理它）MS访问保存数据有多好如果记录数量达到数百万？我没有很多同时使用 oracle 和 VBA 的经验。如果与 excel VBA 一起使用，这是一个好方法吗？如果有人可以提供一些可能有助于我完成任务的链接，我将不胜感激。

注意：由于我无法控制的原因，我无法选择使用其他语言。我在 Java 方面相当不错，但不能使用它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T19:16:28.937

> 我需要查询一个数据库并保存超过 600 万条记录，以便以后使用 excel VBA 进行分析和报告。

我希望对这些记录的子集进行分析，因为即使使用 Excel 2010，您也被限制为 1,048,576 行。

> 我需要能够稍后访问数据，分析它并生成分析数据的报告（我应该能够在我的系统中本地访问整个数据并且应该能够快速处理它）MS访问保存数据有多好如果记录数量达到数百万？

它会做到的。我已经做到了（包括很多年前，通过直接连接到 Oracle 数据库），尽管其中一个问题是其中有多少列，正如评论中提到的那样。在处理海量数据集时，很容易开始对 Access 中的 2GB 文件大小限制感到头疼。

“快”是另一回事。我已经基本停止使用 Access，因为我认为在处理大量数据时速度慢得令人无法接受。无论“JET”这个名字是从哪里来的[1]，哈迪斯肯定不是它速度的隐喻。

Access 确实具有的一个优点是，它可以让您非常轻松（如果不是很快）生成 Excel 样式的分析报告（包括一些图形报告），还允许您在创建它们时使用 VBA。另一方面，我的数据处理工具 SQL Server 速度更快，但几乎没有任何前端。可能理想的情况是（也提到过）使用 Access 或 Excel 来做前端，而 SQL Server 来做繁重的工作，除非（更好）你可以在 Oracle 中做这个工作，而不是在本地保存数据，然后让 Excel/VBA 为您直接从 Oracle 提取的汇总查询创建报告。

如果报表运行到数百万行，我会回避使用 Excel，但实际上，运行这么长时间的报表无论如何都不值得。这是数据转储，而不是报告。

* * *

[1] 是的，是的，我知道，联合引擎技术。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-09T20:11:34.033

如果您想在 Excel 中处理超过 100 万行数据，您应该查看[PowerPivot](http://www.microsoft.com/en-us/bi/powerpivot.aspx)，它是 Excel 2010 的加载项（它内置于 Excel 2013 中）。除了每行上的计算字段外，它还允许 1 亿行数据，尽管这些计算可能会比其他人推荐的 SQL 后端/Excel 前端解决方案慢。

# c++ - 通过仿函数和STL算法得到两个向量的点积

> ID：13314098
> 
> 赞同：-7
> 
> 时间：2012-11-09T18:48:04.383
> 
> 标签：c++, stl, functor

我正在学习如何将仿函数与 STL 算法一起使用来计算两个向量的点积。这是我的代码：

```
template<size_t DIM>
double Vector<DIM>::operator*(const Vector<DIM>& rhs) const {
    double dotPro = 0;
    std::for_each(vec, vec + DIM, std::bind2nd(dot_product<double>(rhs.get()), dotPro));
    return dotPro;
}
/*vec is a double array and the data member of Vector class. I want to get the 
dot product of rhs and *this by using std::for_each(). 
rhs.get()returns a const double* which is the start address of rhs's vec*/

/*The codes below define the functor.  dotPro is passed as a reference so as to 
it could be save the last result.*/  
template<typename T>
struct dot_product: public std::binary_function<T, T, void> {
    const T* arg;
    sum(const T* dbl) : arg(dbl){};
     void operator() (const T dbl, T& dotPro) {
        dotPro += *arg++ * dbl;
    }
}; 
```

抱歉，我忘记了我的问题...问题是我的代码无法编译。这是编译错误：

```
error: no match for call to '(const dot_product<double>) (const double&, const double&)'|
note: candidates are: void dot_product<T>::operator()(T, T&) [with T = double]| 
```

这是 binders.h 中发生的错误

```
c:\program files\codeblocks\mingw\bin\..\lib\gcc\mingw32\4.4.1\include\c++\backward\binders.h|147|error: return-statement with a value, in function returning 'void'| 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-09T19:26:37.977

只需使用[std::inner_product](http://www.sgi.com/tech/stl/inner_product.html)：

[现场演示](http://ideone.com/c6B4Ci)

```
#include <algorithm>
#include <iostream>
#include <iterator>
#include <ostream>
#include <numeric>
#include <cstdlib>
#include <vector>

using namespace std;

int main()
{
    vector<int> v1,v2;
    generate_n( back_inserter(v1), 256, rand );
    generate_n( back_inserter(v2), v1.size(), rand );
    cout << inner_product( v1.begin(), v1.end(), v2.begin(), 0 ) << endl;
} 
```

* * *

> 是的，这是一个很好的解决方案。但我不想使用 numeric.h 中提供的任何方法。

只需定义您自己的 dot_product：

[现场演示](http://ideone.com/evIZZ7)

```
template<typename InputIterator1,typename InputIterator2,typename ValueType>
ValueType dot_product( InputIterator1 first, InputIterator1 last, InputIterator2 another, ValueType init)
{
    while(first!=last)
    {
        init += (*first) * (*another) ;
        ++first;
        ++another;
    }
    return init;
} 
```

# regex - 为什么加载 Test::More 会消除我的错误？

> ID：13314108
> 
> 赞同：8
> 
> 时间：2012-11-09T18:49:15.517
> 
> 标签：regex, perl, unit-testing

我正在尝试[为此错误](https://rt.cpan.org/Ticket/Display.html?id=81061)编写测试。我已经找到了该错误的解决方案；我无法理解的是为什么我的测试在发布之前没有发现错误。

问题归结为`Ver: 0`应该打印的命令行打印`Ver: 1.00`：

```
perl -Mversion -e 'printf "Ver: %s\n", ("v1.00" =~ /v(.+)/ ? version->parse($1) : "no");' 
```

但是，如果您在`-MTest::More`之前插入`-Mversion`，则会打印`Ver: 1.00`.

所以我的问题是为什么加载[Test::More](https://metacpan.org/module/Test::More)会改变我的代码的行为？（对于奖励积分，为什么使用`"$1"`而不是`$1`消除错误？）

我正在使用 Perl 5.14.2、Test::More 0.98 和 0.88 版。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-09T19:38:11.917

这是版本中的错误。`$1`是魔法变量，并且版本在检查 arg 是否已定义之前无法处理魔法。如果`$1`没有人从`$1`. 如果有人读过`$1`（例如 Test::More），那么它似乎已定义为版本。

```
$ perl -Mversion -E'
    "v1.00" =~ /v(.+)/ or die;
    $x=$1 if $ARGV[0];
    say version->parse($1);
' 0
0

$ perl -Mversion -E'
    "v1.00" =~ /v(.+)/ or die;
    $x=$1 if $ARGV[0];
    say version->parse($1);
' 1
1.00 
```

我提交了一个错误报告：[Perl RT#115660](https://rt.perl.org/rt3/Public/Bug/Display.html?id=115660)

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-11-09T19:10:29.893

```
perl -Mversion -E 'sub TIESCALAR { bless {} }; sub FETCH { die "HERE" }; tie $foo, __PACKAGE__; say version->new($foo)' 
```

版本有问题，它不能正确调用 get magic，因此永远不会填充 1 美元。如果它在首先加载 Test::More 时有效，那只是因为 $1 中还有一个旧值

# python - 如何在辅助函数中访问请求

> ID：13314118
> 
> 赞同：3
> 
> 时间：2012-11-09T18:49:48.853
> 
> 标签：python, flask

假设您想重定向未登录的用户。目前我有这个：

```
def my_account():
    if "user" not in session or not session["user"]:
        return redirect('/')

    ...

def my_favourites():
    if "user" not in session or not session["user"]:
        return redirect('/')

    ... 
```

但现在我想重用检查用户是否登录的代码。但这需要`session`对象。

我不确定我是否可以或应该在辅助函数中显式传递`request`or对象。`session`或者如果还有另一种更优选的方式？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T19:04:44.780

你试过[http://packages.python.org/Flask-Login/](http://packages.python.org/Flask-Login/)吗？我相信这是一个可以更轻松地提供您正在寻找的东西的软件包。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T19:57:57.100

如果你想编写可重用的代码来验证用户是否登录，一种推荐的方法是在视图函数上使用装饰器。例如，

```
@login_required
def do_something():
*    pass 
```

然后，您可以在下面定义这个装饰器。然后你可以使用你的`request`和`session`对象。此外，如果用户尚未登录，这将重定向到登录 url，然后在登录后转发到下一页。

```
def login_required(f):
*    @wraps(f)
*    def decorated_function(*args, **kwargs):
*        if "user" not in session or not session["user"]:
*            return redirect(url_for('login', next=request.url))
*        return f(*args, **kwargs)
*    return decorated_function 
```

# php - CURL 和 DDOS 问题

> ID：13314123
> 
> 赞同：3
> 
> 时间：2012-11-09T18:50:15.483
> 
> 标签：php, curl, sleep, ddos

我需要从远程 http 服务器获取一些数据。我使用 Curl 类进行多请求。我的问题是远程服务器的防火墙。我在 10000 个 GET 和 POST 请求之间发送 1000 个。服务器禁止我使用 DDOS。

我使用了这个措施。

*   包仍然包含标题信息

    curl_setopt($this->ch, CURLOPT_HTTPHEADER, $header);

*   包仍然包含随机引用信息

    curl_setopt($this->ch, CURLOPT_REFERER, $refs[rand(0,count($refs))]);

*   软件包仍然包含随机用户代理

    curl_setopt($this->ch, CURLOPT_USERAGENT, $agents[rand(0,count($agents))]);

*   我通过使用睡眠功能以随机间隔发送包裹。

    睡眠（兰德（0,10））；

但每次1小时禁止访问服务器。

对不起我的英语不好:) 谢谢大家。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-10T21:13:58.333

在短时间内向服务器发送大量请求可能会产生与 DOS 攻击相同的影响，无论这是否是您的意图。一个快速的解决方法是更改​​睡眠线，`sleep(rand(0,10));`这意味着有 11 分之一的机会立即发送下一个请求，`sleep(3);`这意味着请求之间总是有 3 秒（大约）。3 秒应该足以让大多数服务器满意。一旦你验证了这个工作，你可以将值减少到 2 或 1，看看你是否可以加快速度。

一个更好的解决方案是在服务器上创建一个 API，允许您在 1 个或至少几个请求中获取所需的数据。显然，这只有在您能够对服务器进行更改（或者可以说服那些可以代表您进行更改的人）的情况下才有可能。

# vb6 - 如何在VB6的文件夹中获取最近日期的文件

> ID：13314131
> 
> 赞同：0
> 
> 时间：2012-11-09T18:50:37.323
> 
> 标签：vb6

我正在使用一些遗留的 VB6 代码，我对此感到很害怕。下面的代码“认为”它通过使用文件名来获取最新的文件。但是这种方法不再有效，因为它使用数字 0 - 9 来确定这一点。它认为 6 比 2 新，其中那个数字是年份。例如。需要排序的文件格式如下。

```
FORMZZ6.eln is a 2006 file
FORMZZ2.eln is a 2012 file 
```

下面的代码按字母顺序排序。是否可以选择上次修改日期的文件？

```
Private Function ResolveFormVersion(sForm As String) As String
Dim sFile  As String
Dim sFile2 As String

sFile = Dir(BaseDirectory & sForm, vbNormal)

Do
    sFile2 = Dir
    If sFile2 > sFile Then sFile = sFile2 
Loop Until sFile2 = "" 

ResolveFormVersion = sFile

End Function 
```

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-09T18:54:56.150

是的，您应该能够重写循环以使用 FileDateTime 函数：

[http://msdn.microsoft.com/en-us/library/aa262740%28VS.60%29.aspx](http://msdn.microsoft.com/en-us/library/aa262740%28VS.60%29.aspx)

# r - 基本 R 散点图

> ID：13314132
> 
> 赞同：1
> 
> 时间：2012-11-09T18:50:47.870
> 
> 标签：r, plot

我想绘制 X 与 Y 的散点图，但 X 现在是字符类型。

IE，

```
x = c("a", "b", "b", "c", "a")
y = c(9,2,4,5,1) 
```

如果我做，

```
plot(c(1,2,3,4,5), c(9,2,4,5,1)) 
```

![x 与 y 的散点图与 y 数值](../Images/a0cf5d47243af89922580fdab9d12bda.png)

我展示的图有从 1 到 5 的 X 轴。

相反，我希望 x 轴是特定的字符系列，即“a”、“b”、“b”、“c”、“a”。出于某种原因，当我尝试使用字符进行绘图时，它会将它们分组，所以我在 x 轴上只得到 a、b、c，a 有两个值，b 有两个值，c 有一个值。

欢迎提出建议。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T18:53:21.153

这应该做的工作

```
plot(y, xaxt="n")
axis(1, at=1:length(x), labels=x) 
```

本质上，您绘制 y 隐藏 x 轴，然后将自定义 x 轴添加到绘图中。

请参阅`?par`和`?axis`了解更多信息。

# ios - NSRunLoop 的 runMode:beforeDate: - 设置“beforeDate”的正确方法

> ID：13314135
> 
> 赞同：2
> 
> 时间：2012-11-09T18:51:11.390
> 
> 标签：ios, multithreading, cocoa, concurrency, nsrunloop

我对 NSRunLoop 方法的正确用法有疑问`runMode:beforeDate`。

我有一个辅助后台线程，用于处理收到的委托消息。

基本上，我有需要在后台线程上执行的进程密集型逻辑。

所以，我有 2 个对象，`ObjectA`并且`AnotherObjectB`.

`ObjectA`初始化`AnotherObjectB`并告诉`AnotherObjectB`开始做这件事。`AnotherObjectB`异步工作，因此`ObjectA`充当`AnotherObjectB`的代表。现在，需要在委托消息中执行的代码需要在后台线程上完成。所以，对于`ObjectA`，我创建了一个 NSRunLoop，并做了这样的事情来设置运行循环：

```
do {
 [[NSRunLoop currentRunLoop] runMode:NSDefaultRunLoopMode beforeDate:[NSDate distantFuture]];
} while (aCondition); 
```

在`aCondition`“完成委托消息”中的某处设置的位置。

我正在收到我所有的委托消息，并且正在该后台线程上处理它们。

**我的问题是：这是正确的方法吗？**

我问这个的原因是因为这`[NSDate distantFuture]`是一个跨越几个世纪的日期。所以基本上，runLoop 直到“distantFuture”才会超时——在那之前我绝对不会使用我的 Mac 或这个版本的 iOS。>_<

但是，我不希望运行循环运行那么久。我希望在调用最后一个委托消息后立即完成运行循环，以便它可以正确退出。

另外，我知道我可以设置重复计时器，间隔更短，但这不是最有效的方式，因为它类似于轮询。相反，我希望线程仅在委托消息到达时工作，并在没有消息时休眠。那么，我采用的方法是正确的方法，还是有其他方法。我阅读了文档和指南，并根据我对它们的理解进行了设置。

但是，如果不能完全确定，最好向这个很棒的社区征求意见和确认。

所以，提前感谢您的所有帮助！

干杯!

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T20:54:51.017

代码[在文档中](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/Foundation/Classes/NSRunLoop_Class/Reference/Reference.html)：

> 如果您希望运行循环终止，则不应使用此方法。相反，请使用其他运行方法之一，并在循环中检查您自己的其他任意条件。一个简单的例子是：
> 
> ```
> BOOL shouldKeepRunning = YES;        // global
> NSRunLoop *theRL = [NSRunLoop currentRunLoop];
> while (shouldKeepRunning && [theRL runMode:NSDefaultRunLoopMode beforeDate:[NSDate distantFuture]]); 
> ```
> 
> where`shouldKeepRunning`设置为`NO`程序中的其他位置。

在您的最后一条“消息”之后，取消设置`shouldKeepRunning`（在与运行循环相同的线程上！）它应该完成。这里的关键思想是您需要向运行循环发送一个事件，以便它知道停止。

（还要注意 NSRunLoop 不是线程安全的；我认为你应该使用`-[NSObject performSelector:onThread:...]`.）

或者，如果它适用于您的目的，请使用后台调度队列/NOOperationQueue（但请注意，执行此操作的代码不应触及运行循环；诸如从调度队列/NSOperationQueue 工作线程启动 NSURLConnection 之类的事情可能会导致问题）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2021-04-30T00:58:18.027

> 我问这个的原因是因为 [NSDate distinctFuture] 是一个跨越几个世纪的日期。

该方法`runMode:beforeDate:`将

*   `NO`如果在 上没有预定来源，则立即返回`RunLoop`。

*   `YES`每当处理完事件时返回。

*   `YES`达到时返回`limitDate`。

因此，即使`limitDate`非常高，它也会在每个处理过的事件后返回，直到`limitDate`被击中才会继续运行。如果没有处理任何事件，它只会等待那么长时间。`limitDate`因此就像超时之后该方法将放弃等待事件发生。但是如果你想连续处理多个事件，你必须一遍又一遍地调用这个方法，因此循环。

考虑从网络套接字获取超时的数据包。当数据包到达或超时时，fetch 调用返回。但是，如果要处理下一个数据包，则必须再次调用 fetch 方法。

不幸的是，以下是非常糟糕的代码，原因有两个：

```
// BAD CODE! DON'T USE!
NSDate * distFuture = NSDate.distantFuture;
NSRunLoop * runLoop = NSRunLoop.currentRunLoop;
while (keepRunning) {
    [runLoop runMode:NSDefaultRunLoopMode beforDate:distFuture];
} 
```

1.  如果`RunLoopSource`尚未在 上安排no `RunLoop`，它将浪费 100% 的 CPU 时间，因为该方法将立即返回以再次调用，并且 CPU 能够以最快的速度执行此操作。

2.  `AutoreleasePool`永远不会更新。自动释放的对象（甚至 ARC 也会这样做）被添加到当前池中，但永远不会释放，因为池永远不会被清除，因此只要此循环运行，内存消耗就会增加。多少取决于您`RunLoopSources`实际在做什么以及他们是如何做的。

更好的版本是：

```
// USE THIS INSTEAD
NSDate * distFuture = NSDate.distantFuture;
NSRunLoop * runLoop = NSRunLoop.currentRunLoop;
while (keepRunning) @autoreleasepool {
    BOOL didRun = [runLoop runMode:NSDefaultRunLoopMode beforDate:distFuture];
    if (!didRun) usleep(1000);
} 
```

它解决了两个问题：

*   An`AutoreleasePool`在循环第一次运行时创建，每次运行后都会被清除，因此内存消耗不会随着时间的推移而增加。

*   如果`RunLoop`根本没有真正运行，则当前线程会休眠一毫秒，然后再试一次。这样 CPU 负载将非常低，因为`RunLoopSource`设置为 no，此代码仅每毫秒运行一次。

要可靠地终止循环，您需要做两件事：

1.  设置`keepRunning`为`NO`。请注意，您必须声明`keepRunning`为`volatile`！如果您不这样做，编译器可能会优化检查并将您的循环变成无限循环，因为它在当前执行上下文中看不到任何会更改变量的代码，并且它无法知道其他地方的其他代码（也许在另一个线程上）可能会在后台更改它。这就是为什么您通常需要在这些情况下使用内存屏障（锁、互斥体、信号量或原子操作），因为编译器不会跨这些屏障进行优化。但是，在那种简单的情况下，使用`volatile`就足够了，因为`BOOL`在 Obj-C 中始终是原子的，并`volatile`告诉编译器“*始终检查此变量的值，因为它可能会在您背后发生变化，而您在编译时却没有看到该变化*“。

2.  如果变量已从另一个线程而不是从事件处理程序中更改，则您的`RunLoop`线程可能在`runMode:beforeDate:`调用内休眠，等待`RunLoopSource`事件发生，这可能需要任何时间或根本不再发生。要强制此调用立即返回，只需在更改变量后安排一个事件。这可以通过`performSelector:onThread:withObject:waitUntilDone:`如下所示来完成。执行此选择器算作一个`RunLoop`事件，并且该方法将在选择器被调用后返回，看到变量已更改并跳出循环。

```
volatile BOOL keepRunning;

- (void)wakeMeUpBeforeYouGoGo {
    // Jitterbug
}

// ... In a Galaxy Far, Far Away ...
    keepRunning = NO;
    [self performSelector:@selector(wakeMeUpBeforeYouGoGo) 
        onThread:runLoopThread withObject:nil waitUntilDone:NO]; 
```

# iphone - UIView 动画中的 Alpha 变化没有效果，在 UIView 动画之外很好

> ID：13314136
> 
> 赞同：1
> 
> 时间：2012-11-09T18:51:15.853
> 
> 标签：iphone, ios, uiview, uiviewanimation

我发现至少 5 个其他“UIView 动画不起作用”问题，我不想再添加一个。:(。我确定这不是特定于`alpha`. 的问题。与 . 相同的问题`backgroundColor`。所以它是基本的。

这有效：

```
 [self.view viewWithTag:kPlayView].alpha = 0.75;
        [self.view viewWithTag:kCancelView].alpha = 0.75;
        [self.view viewWithTag:kTapViewTag].backgroundColor = [UIColor whiteColor]; 
```

这没有（它什么都不做）：

```
 //kPlayView and kCancelView are subviews of kTapViewTag  
 [UIView animateWithDuration:2.0  animations:^{
        [self.view viewWithTag:kPlayView].alpha = 0.75;
        [self.view viewWithTag:kCancelView].alpha = 0.75;
        [self.view viewWithTag:kTapViewTag].backgroundColor = [UIColor whiteColor];

    } ]; 
```

为什么？这在`kTapViewTag`视图的手势处理程序中调用。`backgorundColor = [UIColor clearColor]`我想淡化为白色并将子视图的 alpha 更改为 0.75 以响应点击手势。

**更新：**

反向工作。这有效：

```
 [UIView animateWithDuration:2.0 animations:^{
          [self.view viewWithTag:kPlayView].alpha = 0;
          [self.view viewWithTag:kCancelView].alpha = 0;
          [self.view viewWithTag:kTapViewTag].backgroundColor = [UIColor clearColor];
        }]; 
```

我能够在没有动画的情况下显示充当“暂停/恢复”的视图，然后为淡出设置动画。只要我不尝试为淡入设置动画，这就会来回工作。

**更新 2**

这是整个实现以供参考。这里有什么？（我看了太多次了）。

```
- (void)didTap:(id)selector
{

    isPaused = (isPaused) ? NO: YES;

    [self.view viewWithTag:kPlayView].userInteractionEnabled = isPaused;
    [self.view viewWithTag:kCancelView].userInteractionEnabled = isPaused;

    if (isPaused)
    {

        [self pauseLayer:self.view.layer];
        [timer1 invalidate];
        [timer2 invalidate];

       [UIView animateWithDuration:2.0  animations:^{
            [self.view viewWithTag:kPlayView].alpha = 0.75;
            [self.view viewWithTag:kCancelView].alpha = 0.75;
            [self.view viewWithTag:kTapViewTag].backgroundColor = [UIColor whiteColor];
        } ];
    }
    else
    {
        isPaused = NO;

        [UIView animateWithDuration:2.0 animations:^{
            [self.view viewWithTag:kPlayView].alpha = 0;
            [self.view viewWithTag:kCancelView].alpha = 0;
            [self.view viewWithTag:kTapViewTag].backgroundColor = [UIColor clearColor];
        }];

        [self resumeLayer:self.view.layer];
        [self animateNotification];
    }         
} 
```

**更新 3**

```
- (void)pauseLayer:(CALayer*)layer
{
    CFTimeInterval pausedTime = [layer convertTime:CACurrentMediaTime() fromLayer:nil];
    layer.speed = 0.0;
    layer.timeOffset = pausedTime;
}

- (void)resumeLayer:(CALayer*)layer
{
    CFTimeInterval pausedTime = [layer timeOffset];
    layer.speed = 1.0;
    layer.timeOffset = 0.0;
    layer.beginTime = 0.0;
    CFTimeInterval timeSincePause = [layer convertTime:CACurrentMediaTime() fromLayer:nil] - pausedTime;
    layer.beginTime = timeSincePause;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T22:03:59.743

UIView 动画是核心动画的一个很好的高级包装器，它使用你的视图层来渲染它的动画。通过将图层速度设置为 0，您可以有效地停止 uiview 动画的启动。

当您再次启动图层时，您将从停止的位置开始。暂停之前和之后的动画合并，没有任何反应。

当您不制作动画时，动画在另一个方向工作的原因是动画的设置和触发方式。你打电话时`[UIView animate...`它时，它会在图层上设置一个低级动画，其中包含开始时间和结束时间等。您编写的代码立即完成，动画将在下一次运行循环时开始。但是，在您让一切都返回之前，您还可以恢复图层的时间和速度，因此在制作动画时，一切都会正常进行。

我的猜测是您并不是要像这样暂停图层。必须有更好的方法来删除和停止动画。例如，`UIView`您只需再次为该属性设置动画，它就会停止，您`CALayer`可以查看使用，以找出特定图层在动画中特定点在屏幕上的位置，然后调整实际图层值以匹配。`removeAllAnimations``removeAnimationForKey:``-[CALayer presentationLayer]`

# javascript - PhoneGap 相机在构建后无法正常工作 - Android

> ID：13314138
> 
> 赞同：0
> 
> 时间：2012-11-09T18:51:20.537
> 
> 标签：javascript, android, jquery, cordova, jquery-mobile

我一直在制作一个使用 phonegap 使用相机的应用程序。当我通过我的设备通过 eclipse 测试应用程序时，应用程序启动并且在我的手机上一切正常。

一旦我运行 phoneGap 构建服务并下载和测试应用程序，一切都很好，除了单击捕获照片或从库中获取没有任何作用。任何想法为什么它会在构建之前工作，但不是在构建之后？

代码已删除

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T10:27:03.413

克林特，

首先，为什么：我怀疑您看到 Phonegap 的实际构建包与 Eclipse 的结果之间存在差异的原因是您的本地构建会“更慢”（由于包中的调试信息，或者额外的重量） android 设备，因为来自 eclipse 的 adb 进程...等），因此在 JS 线程尝试通过 jQuery 寻找这些元素之前，这给了 DOM 时间来完成。

正如您所制定的那样，处理此问题的“正确方法”是将您的外部 var 定义保留在它们所在的位置......

```
// buttons for capturing and browsing for photo and uploading
        var capture_btn;   //     = $('#capture');     \
        var getImg_btn;    //     = $('#getImg');       >  do these later.
        var uploadImg_btn; //     = $('#uploadImg');   / 
```

进而...

```
function onDeviceReady() {
    // now allocate DOM to buttons
        capture_btn    = $('#capture');    //
        getImg_btn     = $('#getImg');     // 'var'less, to keep in global scope
        uploadImg_btn  = $('#uploadImg');  //
    // rest of deviceReady as already written 
```

你显然“让它工作了”（耶！）但希望这能解释（更详细一点）为什么你在实时 APK 和本地调试构建之间看到不同的结果，这个更完整的答案将在未来帮助其他人......： )

-TTFN 和快乐的黑客，

DX :)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T16:43:40.970

原来答案很简单。我的相机函数变量在 DOM 加载它们之前被调用。

```
// buttons for capturing and browsing for photo and uploading
        var capture_btn    = $('#capture');
        var getImg_btn     = $('#getImg');
        var uploadImg_btn  = $('#uploadImg'); 
```

所以它甚至从未注册过点击。奇怪的是它在通过 Eclipse 进行测试时起作用。

我将所有相机控件添加到 deviceready 事件和 viola 中。它可以正常工作。

# php - 需要帮助从 PHP fwrite 中驱除奇怪的 gremlin

> ID：13314143
> 
> 赞同：2
> 
> 时间：2012-11-09T18:51:37.977
> 
> 标签：php, fwrite

在下面的代码中，$output 是一串行，每行长度为 804 个字符，包括每行末尾的换行符。在每行的位置 454 处有一个“Y”。它只是一个普通的旧“Y”，如“是”。

```
$fh = fopen($filename_with_path,"w");
fwrite($fh,$output);
fclose($fh); 
```

出于某种原因，在查看创建的文件时，整个输出似乎完好无损，但位置 454 是空白，并且找不到“Y”。

我可以在上述代码之前或之后有一个 die($output)，并且输出包含“Y”。我让脚本通过电子邮件将 $output 的内容发送给我，其中包含“Y”。但是当我查看创建的文件时（并且我已经确认每次运行脚本时都会重新创建它），而不是“Y”有一个空格。（我已经使用“cat”查看了文件系统上的文件，也查看了在记事本中打开的网络下载文件，但“Y”不存在。

当创建的文件中有两行时，它是 1608 字节长，这是有道理的，因为每行都有 804。所以这真的使它看起来像一个 Y 正在与一个空白交换。输出中还有其他 Y 在文件中显示得很好。

我对此完全感到困惑。有任何想法吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T19:15:12.320

哎呀。我想到了。总是有奇怪的原因，总是。只好想办法了。

在这种情况下，在将文件复制到 Web 可访问目录之前，它是在 tmp 目录中创建的。每次脚本运行时，web-directory 文件都有一个唯一的文件名，但 tmp 目录文件名没有。

由于我手动运行脚本，因此 tmp 目录中的文件归我所有。然后，当我从网络（创建文件的那个）运行脚本时，它没有覆盖文件的权限，而且我在代码中缺乏错误检查让我很受伤。每次都将相同的（旧）文件复制到 web 目录中，并且由于该文件具有新的时间戳，我认为它是新内容。

一些经验教训（重新）学习：始终进行适当的错误检查！并且要知道，当某些事情变得奇怪时，是你，而不是服务器，也不是编程语言，也不是 gremlims！

感谢 StackOverflow 社区！

# ios - 限制 NSURLConnection 数据速率？（带宽限制）

> ID：13314144
> 
> 赞同：2
> 
> 时间：2012-11-09T18:51:45.207
> 
> 标签：ios, macos, cocoa, nsurlconnection, bandwidth-throttling

有没有办法限制 NSURLConnection 使用的带宽，或者我被迫使用 CFNetwork 方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T19:10:46.427

是的，但它并不漂亮（它根据[这个邮件列表帖子工作](http://www.cocoabuilder.com/archive/cocoa/137445-limit-data-rate-with-an-nsurlconnection.html)）：

*   在后台线程上启动 NSURLConnection（你必须设置一个运行循环）。
*   睡在`-connection:didReceiveData:`。
*   以线程安全的方式将数据转发到主线程。

如果委托是 a ，则第三个要点有点棘手，但如果是or `UIViewController`，这样的事情应该可以工作：`delegate``__weak``__unsafe_unretained`

```
- (void)connection:(NSURLConnection *)connection didReceiveData:(NSData *)data
{
  [NSThread sleepForTimeInterval:...];
  [self performSelectorOnMainThread:@selector(notifyDelegateDidReceiveData:) withObject:data waitUntilDone:NO];
}

-(void)notifyDelegateDidReceiveData:(NSData*)data
{
  assert([NSThread isMainThread]);
  [delegate myConnectionWrapper:self didReceiveData:data];
} 
```

计算睡眠时间很重要，因为您可能希望考虑 TCP/IP 开销，但`[data length]+100`可能是正确的。

如果您有多个连接并且想要限制组合带宽，请将它们全部放在*同一个*后台线程/运行循环中（请参阅 参考资料`-performSelector:onThread:withObject:waitUntilDone:`）。

对于 CFNetwork 版本，我猜你已经阅读过[这篇关于 Cocoa with Love 的文章](http://www.cocoawithlove.com/2010/04/network-data-requirements-on-iphone-os.html)。

# android - 在从服务调用的线程内使用处理程序

> ID：13314146
> 
> 赞同：2
> 
> 时间：2012-11-09T18:51:46.333
> 
> 标签：android, android-service, android-handler

我有一个创建处理程序的线程。从服务调用线程。问题是因为它是从服务调用的，所以我不能使用 Activity.runOnUiThread()。我只能访问上下文而不是活动。

创建处理程序时出现此错误，

```
11-09 13:34:52.355: W/System.err(20974): java.lang.RuntimeException: Can't create handler inside thread that has not called Looper.prepare()
11-09 13:34:52.359: W/System.err(20974):    at android.os.Handler.<init>(Handler.java:121) 
```

这是代码：

```
public void runTask() {

        Handler handler = new Handler() {
            public void handleMessage(Message msg) {
                //HANDLER CODE
            }
        };

        handler.sendEmptyMessage(0);

    } 
```

代码可能看起来很奇怪，因为我删除了一堆语句。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T18:54:41.530

处理程序在其线程中需要一个[Looper 。](http://developer.android.com/reference/android/os/Looper.html)只需`Looper.prepare()`在初始化 Thread 时调用，并在您准备好启动 Looper 时使用`Looper.loop()`.

```
public void runTask() {
    Looper.prepare();

    Handler handler = new Handler() {
        public void handleMessage(Message msg) {
            //HANDLER CODE
        }
    };

    Looper.loop();
    handler.sendEmptyMessage(0);
} 
```

或者，您也可以使用[HandlerThread](http://developer.android.com/reference/android/os/HandlerThread.html)为您初始化 Looper。

# jquery - 2个JQuery Click函数之间的重叠

> ID：13314149
> 
> 赞同：2
> 
> 时间：2012-11-09T18:51:58.300
> 
> 标签：jquery

```
<input id="btnPost" type="button" value="Post" style="width: 79px" />
<input id="btnAssign" type="button" value="Assign" style="width: 79px" />
<div id="div1">
    <textarea rows="10" cols="2" style="width: 401px"></textarea><br />
    <input id="btnPost2" type="submit" name="btnPost" value="Post" style="width: 60px" />
</div>
<div id="div2">
    <textarea rows="10" cols="2" style="width: 401px"></textarea><br />
    <input id="btnAssign2" type="submit" name="btnAssign" value="Assign" style="width: 60px" />    
</div> 
```

# JavaScript：

```
$(document).ready(function () {
        $('#div1').hide();            

        $('#btnPost').click(function () {
            $('#div1').toggle('fast');                
        });                           
});

$(document).ready(function () {

        $('#div2').hide();           

        $('#btnAssign').click(function () {               
            $('#div2').toggle('fast');               
        });                            
}); 
```

## 我的查询如下：

当我单击“发布”按钮时，会出现“#div1”。但是当我单击“分配”按钮而不最小化“div1”时，“#div1”和“#div2”会同时显示。

我在 www.jsFiddle.com 尝试了更多详细信息，请点击此链接：http: [//jsfiddle.net/RfgkU/69/](http://jsfiddle.net/RfgkU/69/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T18:58:32.620

如果您当时只希望其中一个 div 可见，您可以为您的 JavaScript 试试这个：

```
$(document).ready(function () {
        $('#div1, #div2').hide();            

        $('#btnPost').click(function () {
            $('#div1').toggle('fast');
            $('#div2').hide();
        });                                                  

        $('#btnAssign').click(function () {               
            $('#div2').toggle('fast');
            $('#div1').hide();
        });                            
}); 
```

正如你在[这个 jsfiddle上看到的](http://jsfiddle.net/darkajax/RfgkU/72/)

# javascript - 倒数计时器 - 所选文本在时间更改时被取消选择

> ID：13314150
> 
> 赞同：0
> 
> 时间：2012-11-09T18:51:59.990
> 
> 标签：javascript, selection, countdowntimer

我在多个浏览器中使用大量 JavaScript 倒数计时器观察到这一点，并且一直想知道屏幕后面发生了什么。

选择计时器文本。

![1](../Images/0cc4927099d08e57ec9bc68c61cd0ae1.png)

并且，它会在时间变化时被取消选择。

![2](../Images/7fda2024a8223dae1a896aba262929ed.png)

但是，双击并选择计时器文本，

![3](../Images/2c170b10dd0c95516ef503bccffe5722.png)

魔法！它不会在时间变化时被取消选择。

![4](../Images/d7cbc4529bb5553bc970f26618750bb3.png)

那么，到底发生了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T18:57:23.517

当您拖动选择时，文本节点会被选中，并会定期替换。当您双击时，它可能是被选中的容器元素。这不会去任何地方，所以你的选择仍然存在。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T18:58:21.777

在第一种情况下，您正在选择更改的文本节点。在第二种情况下，您选择的是不改变的包含元素。例如，如果您有 0:12，当时间更新时，0:12 可能是 0:11。因此，如果您选择了该文本，那么您选择的内容就会消失。但是，如果您选择了它并没有更改为跨度，那么它仍然存在并且可以保持选中状态。

# youtube-api - 在网站上嵌入多个 YouTube 视频

> ID：13314154
> 
> 赞同：0
> 
> 时间：2012-11-09T18:52:14.387
> 
> 标签：youtube-api

我有一个网站，里面有几张图片，点击图片会加载相应的 YouTube 视频。

最好和最有效的方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T21:48:08.913

我的建议是使缩略图成为普通`<img>`标签，然后当它们（或容器`<div>`）被点击时，动态加载 YouTube iframe 播放器。

我有几个项目就是这样的例子。您可以查看[YouTube 主题资源管理器](https://gdata-samples.googlecode.com/svn/trunk/gdata/topic-explorer/dist/index.html)（搜索主题）或[YouTube Direct Lite](http://ytdirectlite.appspot.com/static-min/submit.html)（登录后转到`My YouTube Videos`选项卡），它们都是开源的。

在主题资源管理器示例中处理此问题的特定代码在[此处](https://code.google.com/p/gdata-samples/source/browse/trunk/gdata/topic-explorer/app/scripts/controllers/main.js#239)。

# java - 使用 Java 7 的 NIO 的文件系统 JTree

> ID：13314174
> 
> 赞同：1
> 
> 时间：2012-11-09T18:53:49.530
> 
> 标签：java, swing, java-7, jtree, treemodel

我已经看到很多使用标准 Java API[`JTrees`](http://docs.oracle.com/javase/7/docs/api/javax/swing/JTree.html)显示文件系统的示例。[`File`](http://docs.oracle.com/javase/7/docs/api/java/io/File.html)是否有[`TreeModel`](http://docs.oracle.com/javase/7/docs/api/javax/swing/tree/TreeModel.html)使用来自 Java 7 的新 NIO api 的 JTree 的示例实现（可能使用自定义）？我很想看到一个演示正确使用的示例：

1.  [`WatchServices`](http://docs.oracle.com/javase/7/docs/api/java/nio/file/WatchService.html)当文件系统被另一个程序或用户修改时更新 JTree
2.  [`FileVisitors`](http://docs.oracle.com/javase/7/docs/api/java/nio/file/FileVisitor.html)获取节点的内容
3.  在操作需要很长时间的情况下异步加载树节点内容

# c# - 大 O 分析。非负数组中的最大整数

> ID：13314177
> 
> 赞同：0
> 
> 时间：2012-11-09T18:54:07.520
> 
> 标签：c#, c, arrays, algorithm

尝试进行大 O 分析-该程序的平均情况是什么？O(n/2(n/2)) = O(n^2) ?..

```
 /* Returns the largest integer in the array */
 int CompareToAll(int array[], int n)
 {

   int  i, j;
   bool isMax;/* Make sure that there is at least one element in the array.*/                        

   if (n <= 0) return -1;

   for (i = n-1; i > 0; i--) 
   {
      isMax = true;
      for (j = 0; j < n; j++) {

        /* See if any value is greater.*/
         if (array[j] > array[i]){
             isMax = false;  /* array[i] is not the largest value. */
             break;
          }
      } /* If isMax is true, no larger valueexists; array[i] is max. */

      if (isMax)
        break;
   }
   return array[i];
} 
```

谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-09T18:56:15.280

是的，假设元素是随机选择的，平均为O(n ^(2 )。)在最坏的情况下，您将每个元素与其他元素进行比较。

该算法不是最优的。可以使用简单的 O(n) 算法找到数组中的最大元素：迭代数组一次，同时跟踪迄今为止看到的最大元素。

# java - Java for 循环 - (i * 16) 对于 i 的所有值计算为 0

> ID：13314183
> 
> 赞同：0
> 
> 时间：2012-11-09T18:54:31.960
> 
> 标签：java, for-loop, slick2d

可能缺少一些基本的东西，但我的程序中有一个 for 循环，它应该遍历数组 ( `lines[]`) 并将它们绘制在屏幕上（使用 LWJGL/Slick）。
而不是在单独的行 (at `(i*16 + 7, 5)`) 上显示这些行，它们都出现在`(7, 5)`.

```
for(int i = 0; i < lines.length; i++) {
  if(lines[i] != null) {
    f.drawString((i * 16) + 7, 5, lines[i]);
  }
} 
```

我已经看到其他问题的答案，建议在循环中定义一个最终变量，以避免在被调用函数使用它之前更改值。所以我将代码更改为：

```
for(int i = 0; i < lines.length; i++) {
  if(lines[i] != null) {
    final int i2 = i;
    f.drawString((i2 * 16) + 7, 5, lines[i]);
  }
} 
```

但它并没有解决它（真的没想到它会这样，因为我没有陷入 i 的最后一个值，而 Slick 不应该存储 i 的值，但尝试了它以确保）。

* * *

drawString 的头部如下：

```
public void drawString(float x, float y, String whatchars) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T19:06:29.877

我想我的评论提供了答案，所以我会为其他人提供帮助。

*正确*的调用是将偏移量放在函数的*y*参数中：

```
f.drawString(7, (i * 16)+5, lines[i]); 
```

因为函数定义是：

```
public void drawString(float x, float y, String whatchars) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T19:09:26.033

我认为您需要更改`y`坐标而不是`x`如下：

```
for(int i = 0; i < lines.length; i++) {
  if(lines[i] != null) {
   f.drawString(7, (i * 16) +5, lines[i]);
  }
 } 
```

这将打印来自`x = 7`和的行`y varying from 5 to 20`。

# javascript - JavaScript 中的不可变哈希和数组实现？

> ID：13314187
> 
> 赞同：7
> 
> 时间：2012-11-09T18:54:45.893
> 
> 标签：javascript, arrays, data-structures, hash, immutability

javascript中是否有简单的**不可变**哈希和数组实现？我不需要最好的速度，比克隆更好的合理速度就可以了。

此外，如果有Java 或其他一些**易于理解并移植到 JavaScript 的语言的****简单**实现，那也很好。

 ****更新：**

目标不仅仅是冻结散列（或数组），而是要有效地执行更新操作 - 不可变散列的更新应该返回一个新的不可变散列。它应该比“克隆原始并更新它”更有效。

原生 JS 类型的更新复杂度类似于 O(1)，克隆复杂度将是 O(n)，使用特殊的不可变数据结构（我要求的）它将是 0(log(n))

**UPDATE2：** JavaScript 已经有 Array / Hash ：

是的，但它们是可变的，我需要类似但不可变的东西，基本上可以通过克隆非常简单地完成，`hash2 = hash1.clone(); hash2[key] = value`但效率非常低，有些算法使其非常有效，无需使用`clone`.

```
hash1 = {}
hash2 = hash1.set('key', 'value2')
hash3 = hash1.set('key', 'value3)

console.log(hash1) // => {}
console.log(hash2) // => {key: 'value2'}
console.log(hash3) // => {key: 'value3'} 
```

**解决方案：**

它不是不可变哈希的实现，但更像是我当前问题的破解，也许它也可以帮助某人。

关于为什么我需要不可变数据结构的更多信息——我使用 Node.js 和某种内存数据库。一个请求可以读取数据库，另一个更新它 - 更新可能需要很多时间（调用远程服务） - 所以我不能阻止所有读取进程并等到更新完成，更新可能会失败并且数据库应该回滚. 所以我需要以某种方式隔离（ACID）对内存数据库的读写操作。

这就是为什么我需要不可变数组和散列 - 来实现某种 MVCC。但似乎有一种更简单的方法可以做到这一点。而不是直接更新数据库 - 更新操作只记录对数据库的更改（但不直接执行） - 以“将 42 添加到数组 db.someArray”的形式。

最后 - 更新操作的产物将是一组这样的更改命令，并且因为它可以非常快速地应用 - 我们可以阻止数据库应用它。

但是，看看 javascript 中是否有不可变数据结构的实现仍然会很有趣，所以我将把这个问题留着。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2015-01-23T22:06:10.463

我知道这个问题很老，但我认为像我一样搜索的人应该指向 Facebook 的[Immutable.js](http://facebook.github.io/immutable-js/)，它以非常有效的方式提供了许多不同类型的不可变数据结构。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-10T13:15:56.923

我对 JS 的持久数据结构有相同的要求，所以前段时间我实现了一个持久映射.. [https://github.com/josef-jelinek/cofy/blob/master/lang/feat.js](https://github.com/josef-jelinek/cofy/blob/master/lang/feat.js)

它包含一个基于平衡树（排序）的映射和一个简单的写时复制映射（和未完成的持久向量/数组）的实现。

```
var map = FEAT.map();
var map1 = map.assoc('key', 'value');
var value = map1.get('key');
var map2 = map1.dissoc('key');
... 
```

它支持其他方法，如`count()`, `contains(key)`, `keys(into = [])`, `values(into = [])`, `toObject(into = {})`,`toString()`

实现不是太复杂，它是在公共领域。我也接受建议和贡献者:)。

**更新：您可以在**[https://github.com/josef-jelinek/cofy/blob/master/tests/test-feat.html](https://github.com/josef-jelinek/cofy/blob/master/tests/test-feat.html)找到单元测试（使用示例）

**更新 2**：持久向量实现现在也有以下操作：`count()`, `get(i)`, `set(i, value)`, `push(value)`, `pop()`, `toArray(into = [])`,`toString()`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-09T19:21:50.353

我知道在 Javascript 中克隆对象的最佳方法是包含在[underscore.js中的方法](http://underscorejs.org/#clone)

不久：

```
_.clone = function(obj) {
  if (!_.isObject(obj)) return obj;
  return _.isArray(obj) ? obj.slice() : _.extend({}, obj);
};

_.extend = function(obj) {
  each(slice.call(arguments, 1), function(source) {
    for (var prop in source) {
      obj[prop] = source[prop];
    }
  });
  return obj;
}; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-09T19:16:08.077

使对象不可变的唯一方法是将其隐藏在函数中。然后，您可以使用该函数返回默认哈希或更新版本，但您实际上不能在全局范围内存储不可变哈希。

```
function my_hash(delta) {
    var default = {mykey: myvalue};
    if (delta) {
        for (var key, value in delta) {
            if (default.hasOwnProperty(key)) default[key] = value;
        }
    }
    return default;
} 
```

我不认为这是一个好主意。**

# ruby-on-rails - 如何在 Rails 中将多维数组的值保存到 db

> ID：13314188
> 
> 赞同：1
> 
> 时间：2012-11-09T18:54:48.637
> 
> 标签：ruby-on-rails, multidimensional-array

我有一个像这样的多维数组：

```
[[2, 1], [751, 159], [793, 195], [978, 527], [938, 783], [977, 881], [713, 592, 101], [337, 248, 143], [444, 647, 196], [913, 763, 211], [752, 746, 225], [862, 878, 373], [876, 900, 597], [719, 904, 236, 11], [448, 836, 883, 59], [486, 723, 241, 150], [864, 611, 619, 167], [558, 796, 707, 353], [915, 683, 738, 534], [641, 777, 892, 107, 78], [264, 310, 161, 574, 114], [549, 849, 596, 181, 160], [633, 471, 497, 438, 262], [351, 485, 544, 772, 348], [890, 941, 572, 418, 374], [776, 972, 1001, 729, 379], [595, 898, 989, 771, 454], [84, 514, 914, 571, 442, 19], [335, 97, 689, 314, 879, 20], [869, 828, 802, 859, 553, 34], [298, 134, 564, 614, 411, 62], [175, 579, 490, 399, 479, 72], [382, 830, 215, 691, 624, 85], [922, 840, 657, 917, 436, 95]] 
```

如您所见，每个子数组有 2 到 6 个值。

我有一个名为“Sub”的模型，带有 db 列“sub1”、“sub2”、“sub3”、“sub4”、“sub5”、“sub6”。（如果子数组只有 2 个值，则 sub3-6 的值将为空）

将每个子数组保存到数据库行的正确方法是什么？

我试过这个：@m = [我上面提到的大数组]

```
 @m.each do |t|
        Pair.create(:sub1 => t[0], :sub2 => t[1], :sub3 => t[2], :sub4 => t[3], :sub5 => t[4], :sub6 => t[5])
      end 
```

但由于某种原因，它创建了一个执行此操作的表：（“sub1”列的示例）

2 2 751 2 751 793 2 751 793 978 2 751 793 978 938

看看那里发生了什么？它重复每个但每次增加一行。

这是我的模型：

```
class Pair < ActiveRecord::Base
  attr_accessible :id, :sub1, :sub2, :sub3, :sub4, :sub5, :sub6
end 
```

更新：我发现了这个问题......我在脚本的错误部分使用了 create 方法，这导致它以一种奇怪的方式连续运行多次。谢谢大家！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-09T18:58:33.553

一种方法是序列化列。请参阅此处：[http](http://api.rubyonrails.org/classes/ActiveRecord/Base.html#method-c-serialize) ://api.rubyonrails.org/classes/ActiveRecord/Base.html#method-c-serialize 在文本列中**保存数组、哈希和其他不可映射的对象**部分。

# c++ - 使用 async_read 和 async_write 的 Boost ASIO TCP 很难理解一些概念

> ID：13314192
> 
> 赞同：4
> 
> 时间：2012-11-09T18:54:58.597
> 
> 标签：c++, networking, boost, tcp, boost-asio

在使用 async_read 和 async_write 时，我很难理解构建 tcp 客户端的正确方法。这些[示例](http://www.boost.org/doc/libs/1_38_0/doc/html/boost_asio/example/echo/async_tcp_echo_server.cpp)似乎在连接后执行了 async_read，然后在处理程序中有 async_write。

对于我的客户端和服务器，当客户端连接时，它需要检查要写入的消息队列并检查是否需要读取任何内容。我遇到困难的一件事是理解这将如何异步工作。

我的设想是在 async_connect 处理程序中，如果 sendQueue 中有任何内容，线程将调用 async_write 并一遍又一遍地调用 async_read。还是应该在执行 async_read 之前检查是否有任何内容可供读取？下面是我所说的一个例子。

```
void BoostTCPConnection::connectHandler()
{
    setRunning(true);
    while (isRunning())
    {
        //If send Queue has messages
        if ( sendSize > 0)
        {
            //Calls to async_write
            send();
        }

        boost::shared_ptr<std::vector<char> > sizeBuffer(new std::vector<char>(4));
        boost::asio::async_read(socket_, boost::asio::buffer(data, size), boost::bind(&BoostTCPConnection::handleReceive, shared_from_this(), boost::asio::placeholders::error, sizeBuffer));

   }    
}

void BoostTCPConnection::handleReceive(const boost::system::error_code& error, boost::shared_ptr<std::vector<char> > sizeBuffer)
{

    if (error)
    {
        //Handle Error
        return;
    }

    size_t messageSize(0);
    memcpy((void*)(&messageSize),(void*)sizeBuffer.data(),4);

    boost::shared_ptr<std::vector<char> > message(new std::vector<char>(messageSize) );

    //Will this create a race condition with other reads?
    //Should a regular read happen here
    boost::asio::async_read(socket_, boost::asio::buffer(data, size), 
                    boost::bind(&BoostTCPConnection::handleReceiveMessage, shared_from_this(),
                    boost::asio::placeholders::error, message));

}

void BoostTCPConnection::handleReceiveMessage(const boost::system::error_code& error, boost::shared_ptr<std::vector<char> > rcvBuffer)
{
    if (error)
    {
        //Handle Error
        return;
    }

    boost::shared_ptr<std::string> message(new std::string(rcvBuffer.begin(),rcvBuffer.end())); 
    receivedMsgs_.push_back(message);
}

void BoostTCPConnection::handleWrite(const boost::system::error_code& error,size_t bytes_transferred)
{
    //Success
    if (error.value() == 0) 
        return;
    //else handleError

} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-09T19:06:13.390

从概念上讲，`async_read`等待接收数据。每当您希望在收到数据并且读取尚未挂起时发生某些事情时，您都应该调用它。同样，`async_write`等待数据写入。您应该在需要写入数据并且写入尚未挂起的任何时候调用它。

您应该`async_read`在完成连接后调用。在您的`async_read`处理程序返回之前，它可能应该`async_read`再次调用。

当您需要写入连接时，您应该调用`async_write`（如果写入尚未挂起）。在您的`async_write`处理程序中，如果您仍需要编写更多内容，则应`async_write`再次调用。

如果没有读取已挂起，您可以调用`async_read`您的写入处理程序，如果您希望在完成写入后继续读取。您也可以只保持阅读始终处于待处理状态。随你（由你决定。

您不应该在调用`async_read`. 的重点`async_read`是当有东西要读的时候它就完成了。这是一种等待和同时做其他事情的聪明方式。

# objective-c - Push segue 在加载视图之前短暂显示空白屏幕

> ID：13314193
> 
> 赞同：1
> 
> 时间：2012-11-09T18:55:09.900
> 
> 标签：objective-c, ios, uitableview, storyboard, segue

在情节提要中，我有一个 TableViewController 和一个 DetailViewController 的 push segue。TableVC 嵌套在导航控制器中。我在情节提要中将 DetailViewController 视图设置为黑色背景色。DetailVC 还包含一个加载到其 viewDidLoad 中的 webview。我在 TableVC 的 prepareForSegue 中将 webview 的 URL 传递给 DetailVC。

在点击单元格时执行 push segue 时，我会遇到一些奇怪的行为。紧接着执行 segue 后，DetailVC 的视图背景颜色会短暂显示为白色（导航栏显示正常）。然后视图的背景颜色变为黑色（在情节提要中设置为黑色）。然后 webview 加载。我不确定是什么导致了 DetailVC 的视图背景颜色延迟。

这是我的 prepareForSegue 方法：

```
- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender
{
    if ([segue.identifier isEqualToString:@"Radio Show Playback"])
    {
        RadioShowPlaybackVC *radioShowPlaybackVC = segue.destinationViewController;
        NSIndexPath *indexPath = [self.tableView indexPathForSelectedRow];
        radioShowPlaybackVC.radioShowData = self.radioShows[indexPath.row];
    }
} 
```

**编辑：**它与网络视图有关。当我删除 webview 时，segue 会根据需要进行转换。

**编辑：**我目前的解决方法是隐藏 webview 直到它加载。未加载时，bg 颜色显示为白色，无法修改。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-24T15:54:04.443

如果您从未解决过问题，您绝对应该听 Vito 关于主线程的回答。但还要将以下内容添加到您的代码中：

```
[webView setBackgroundColor:[UIColor clearColor]];
[webView setOpaque:NO]; 
```

如果它仍然显示白色，只需将 clearColor 更改为 blackColor。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T23:11:27.703

我猜你为 viewDidLoad 中的 UIWebView 执行了 loadRequest、loadHTMLString:baseURL: 或 loadData:MIMEType:textEncodingName:baseURL:

segue 转换和 UIWebView 都将使用相同的主线程来完成它们的任务，因此“白色”背景暂时显示为将默认“白色”背景更改为黑色背景的步骤由于 UIWebView 中的活动而暂时暂停。

尝试在**viewDidAppear**中加载 UIWebView，因此当 segue 转换完成时 UIWebView 将开始消耗主线程。

# asp.net - 从数据库列填充 DropDownList，使用 DropDownList 值填充表？

> ID：13314194
> 
> 赞同：1
> 
> 时间：2012-11-09T18:55:09.830
> 
> 标签：asp.net, asp.net-ajax

我刚开始使用 ASP.NET 和 Visual Studio 2008。我想创建一些相当简单的东西，但我还不知道如何处理它。

我可以访问一个我想用来创建报告界面的 Oracle 表。为简单起见，我们假设该表只有三列：

1.  报告日期
2.  成功案例
3.  失败

现在，提议的 ASP.NET 接口将只有两个组件：

1.  下拉列表
2.  GridView（或表格，以更简单者为准）

DropDownList 将允许用户选择一个日期（例如 11/8/2012）。然后 GridView 将根据用户选择进行填充。它将显示除“REPORT_DATE”之外的所有列。在这个假设场景中，GridView 将显示“SUCCESSES”和“FAILURES”。本质上，它将遵循以下 SQL 语句：

```
SELECT * FROM MyTable WHERE REPORT_DATE=insertSelectedReportDateHere; 
```

到目前为止，我已经使用 Visual Studio 的 GUI 成功填充了带有 REPORT_DATE 的 DropDownList，以连接到我的数据库和表。但是，我不确定如何根据我的选择来实现 GridView 的填充。我认为这需要硬编码 AJAX，但我不确定 Visual Studio 的 GUI 有多强大。

有没有办法使用 GUI 来做到这一点？还是我必须以编程方式进行？我应该参考的任何建议或资源？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T19:01:00.057

1）确保您的下拉菜单的 AutoPostBack 属性设置为 true

2) 将 dropdownlist1_selectedindexchanged 事件添加到您的代码中，然后根据下拉列表选择添加代码以填充 DataGrid

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-10T16:57:45.507

这当然可以在不诉诸编程方式的情况下完成：

```
 <asp:SqlDataSource
            ID="dropDownDS"
            runat="server"
            ConnectionString="<%$ ConnectionStrings:connectionString %>"
            SelectCommand="select distinct reportdate from reports"></asp:SqlDataSource>
        <asp:DropDownList ID="ddlReports" runat="server"
            AutoPostBack="True"
            DataSourceID="dropDownDS"
            DataTextField="reportdate"
            DataValueField="reportdate" />
        <asp:SqlDataSource ID="gridDS"
            runat="server"
            ConnectionString="<%$ ConnectionStrings:connectionString %>"
            SelectCommand="SELECT * FROM Reports WHERE ReportDate = @ReportDate">
            <SelectParameters>
                <asp:ControlParameter ControlID="ddlReports" Name="reportdate" PropertyName="SelectedValue" />
            </SelectParameters>
        </asp:SqlDataSource>
        <asp:GridView ID="gvReports"
            runat="server"
            AutoGenerateColumns="False"
            DataKeyNames="ReportId"
            DataSourceID="gridDS">
            <Columns>
                <asp:BoundField DataField="ReportId" HeaderText="ReportId" Visible="False" />
                <asp:BoundField DataField="ReportDate" HeaderText="ReportDate" />
                <asp:BoundField DataField="Successes" HeaderText="Successes" />
                <asp:BoundField DataField="Failures" HeaderText="Failures" />
            </Columns>
        </asp:GridView> 
```

欢迎来到 ASP.NET 的世界和 stackoverflow！

# javascript - Javascript 变量不会在 ajax 调用中作用于窗口

> ID：13314195
> 
> 赞同：0
> 
> 时间：2012-11-09T18:55:11.960
> 
> 标签：javascript, jquery, sharepoint, soap

> **可能重复：**
> [jQuery：ajax调用成功后返回数据](https://stackoverflow.com/questions/5316697/jquery-return-data-after-ajax-call-success)

因此，我正在调用 Sharepoint 服务并尝试返回一些值以供其他地方使用，并且我正在尝试声明一个窗口变量来执行此操作。看起来很简单，但是在 responseXML 函数之外未定义窗口变量。

```
userName = "";

var soapEnv =
"<soap:Envelope xmlns:soap='http://schemas.xmlsoap.org/soap/envelope/' xmlns:xsi='http://www.w3.org/2001/XMLSchema-instance' xmlns:xsd='http://www.w3.org/2001/XMLSchema' xmlns:tns='http://schemas.microsoft.com/sharepoint/soap/'> \
    <soap:Body> \
        <GetUserProfileByName xmlns='http://microsoft.com/webservices/SharePointPortalServer/UserProfileService'> \
            <AccountName></AccountName> \
        </GetUserProfileByName> \
    </soap:Body> \
</soap:Envelope>";

$.ajax({
    url: "/_vti_bin/userprofileservice.asmx",
    type: "POST",
    dataType: "xml",
    data: soapEnv,
    complete: processResult,
    contentType: "text/xml; charset='utf-8'"    
});

function processResult(xData, status) {
    $(xData.responseXML).find("PropertyData > Name:contains('FirstName')").each(function() {
        window.FirstName = $(this).parent().find("Values").text();
    });

    $(xData.responseXML).find("PropertyData > Name:contains('LastName')").each(function() {
        window.LastName = $(this).parent().find("Values").text();
    });

}

    userName += window.FirstName;
    userName += " " + window.LastName;
    console.log(userName); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T19:09:09.170

异步调用改变了执行的顺序。`processResult will be called after window.FirstName; and window.LastName; is assigned to userName,`我试图通过调用将显示窗口的警报来描述序列。如果在 processResult 正文执行之前定义，FirstName 可用。

```
window.FirstName = "First Name: Assigned before ajax call";
window.LastName = "Last Name: Assigned before ajax call";

function processResult(xData, status) {
    $(xData.responseXML).find("PropertyData > Name:contains('FirstName')").each(function() {
        window.FirstName = $(this).parent().find("Values").text();
    });

    $(xData.responseXML).find("PropertyData > Name:contains('LastName')").each(function() {
        window.LastName = $(this).parent().find("Values").text();
    });

   userName += window.FirstName;
   userName += " " + window.LastName;
   alert("After ajax response UserName: " + userName);    
}

userName += window.FirstName;
userName += " " + window.LastName;
alert("Before ajax response UserName: " + userName); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T19:01:42.643

您正试图在 AJAX 调用完成之前`window.FirstName`访问。`window.LastName`你需要把它放在你的回调函数中：

```
function processResult(xData, status) {
    $(xData.responseXML).find("PropertyData > Name:contains('FirstName')").each(function() {
        window.FirstName = $(this).parent().find("Values").text();
    });

    $(xData.responseXML).find("PropertyData > Name:contains('LastName')").each(function() {
        window.LastName = $(this).parent().find("Values").text();
    });

    userName += window.FirstName;
    userName += " " + window.LastName;
    console.log(userName);

} 
```

# virtual-memory - 以下哪个答案最能描述页面错误？

> ID：13314196
> 
> 赞同：0
> 
> 时间：2012-11-09T18:55:37.137
> 
> 标签：virtual-memory, page-fault

所以这不是一个家庭作业问题。这是我的教授在之前的考试中发布的一个问题，作为帮助我们为期中学习的资源。但是，有两个答案（对我来说）似乎是正确的答案。

A.) 页面错误意味着要替换的物理页面必须保存到硬盘上。B.) 请求的虚拟不在物理内存中。

现在，我的理解是页面错误是指存储在物理内存页面中的数据不是您需要的数据，因此，您需要访问硬盘驱动器并加载正确的数据。此外，如果脏标志为1，则表示物理内存中的先前数据已被修改，因此您需要将其重新保存到磁盘。

因此，在我看来，A 和 B 都是正确的，但我想知道是否有人可以告诉我他们认为更好的选择是什么。

如果我被迫选择，我会说A。

**旁注** 我已经通过电子邮件向教授发送了答案，但他的回复真的很糟糕，还没有给我发电子邮件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T19:27:44.290

Neither of these is correct.

> A.) A page fault means the physical page to be replaced must be saved to the hard disk.

This is not correct because it could also mean the page needs to be read from the hard disk.

> B.) The requested virtual is not in the physical memory.

This is not correct because in a soft page fault, the page is resident in physical memory. For example, the operation may just be the first write to a resident, unshared page, so the page has to be marked dirty. Or the page may be shared and need to be unshared. In these cases, the requested virtual page is resident in physical memory, it just needs some massaging by the memory management system.

A page fault means some help from the kernel is needed in order to permit the access to that page of virtual memory. The help needed could vary from reading the page in to disk to just marking the page accessed so the kernel knows not to evict it.

Of those two, B is probably closer to correct because A is almost never right. The "classic" page fault would be if the page had to be read in from hard disk, which B would apply to but not A.

> Now, it is my understanding that a page fault is when the data stored in the physical memory page is not the data you need, therefore, you need to access the hard drive and load the correct data. Also, if the dirty flag is 1, then that means the previous data in physical memory has been modified, therefore you need to re-save that to the disk.

How could the page both be dirty and not hold the data you need? If it's dirty, that means you dirtied it. Which means it's holding the data you're working with.

# android - 如何在android项目的res文件夹中获取图像的像素

> ID：13314198
> 
> 赞同：1
> 
> 时间：2012-11-09T18:55:45.570
> 
> 标签：android, getpixel

安卓新手。我不认为这里的任何问题与我的相同。

我已将图像加载到我的 res 文件夹中。我把它们放在一个可绘制的文件夹中。如何在 res.drawable 文件夹中获取名为 bb.png 的图像的像素？

我需要简单解释一下如何将图像文件放入变量中，以及我需要使用什么“getPixel(...)”命令。我不需要显示图像，只需从中获取像素数组，然后检查像素是黑色还是白色。任何帮助表示赞赏，谢谢！

麦克风

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-09T19:12:51.123

其实真的很简单！

`Bitmap bm = BitmapFactory.decodeResource(getResources(), R.drawable.image);`

一旦，你有一个`Bitmap`对象，有几个选项。

`bm.getPixel(x,y)`将返回与类中的an`int`对应的 an ，例如or 。`int``Color``Color.BLACK``Color.WHITE`

此外，`bm.copyPixelsToBuffer(Buffer destination)`会将所有像素复制到一个`Buffer`对象中，您可以逐个像素地搜索该对象。

查看文档以获取更多详细信息。

[位图文档](http://developer.android.com/reference/android/graphics/Bitmap.html)

[颜色文档](http://developer.android.com/reference/android/graphics/Color.html)

这是一个示例代码片段，假设您的 /res/drawable 文件夹中有一个名为“image”的图像。

```
Bitmap bm = BitmapFactory.decodeResource(getResources(), R.drawable.image);
int pixelColor = bm.getPixel(10,10); //Get the pixel at coordinates 10,10

if(pixelColor == Color.BLACK) {
  //The pixel is black
}

else if(pixelColor == Color.WHITE) {
  //The pixel was white
} 
```

显然，您应该小心获取像素。确保像素存在，并且坐标不大于图像。要获得 a 的尺寸`Bitmap`，只需分别使用`bm.getHeight()`和`bm.getWidth()`。

# android - 如何从键盘获取edittext视图

> ID：13314199
> 
> 赞同：0
> 
> 时间：2012-11-09T18:55:51.950
> 
> 标签：android

我正在设计自己的键盘，并且我有一个额外的按钮，我想用它来调出“编辑文本”上下文菜单。由于此按钮位于键盘中，因此该菜单应在任何应用程序中弹出。

我搜索了两个方法，registerContextMenu(view) 和 showContextMenu(view)

所以我的问题是：如何获取我的键盘当前正在输入的视图（edittext 视图），以便我可以将方法附加到适当的视图？

# objective-c - 如何在目标 c 中实现缓存管理器？

> ID：13314200
> 
> 赞同：-2
> 
> 时间：2012-11-09T18:55:52.387
> 
> 标签：objective-c, nsdate, nscalendar

我想实现缓存管理器，因为我想在 15 天后清除缓存，如何实现？我将如何知道 15 天完成与否，我怎样才能实现这个想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T19:07:09.877

大致思路：存储您想要的缓存到期日期，设置一个在该日期关闭的计时器，并在启动时检查您是否超过该日期。如果计时器关闭或启动检查是肯定的，请清除缓存。

# java - 在 assert someBoolean(); 之间禁用断言的编译 Java 是否有区别？和 verifySomeBoolean(); 后者在哪里包含断言？

> ID：13314203
> 
> 赞同：1
> 
> 时间：2012-11-09T18:56:09.937
> 
> 标签：java, design-patterns, assert, assertions

我有一个后置条件，我想通过多种方法定期检查。我相当有信心我[正确地](https://stackoverflow.com/questions/368750/some-anti-patterns-on-using-assert-java-and-others)使用了断言，即只检查一些东西以确保我的代码没有做任何愚蠢的事情，并且我打算在一段时间后关闭断言。但我不确定我现在写的后置条件是否正是我一直想要的条件。所以我把它变成了一个方法。但是后来我遇到了以下问题：

```
public class Foo
{
    public void doSomethingRisky()
    {
        //...
        assert someBoolean();
    }

    private boolean someBoolean()
    {
        return bar && baz;
    }
} 
```

对比

```
public class Foo
{
    public void doSomethingRisky()
    {
        //...
        verifySomeBoolean();
    }

    private void verifySomeBoolean()
    {
        assert bar && baz;
    }
} 
```

我知道如果我用禁用的断言编译，以前的代码不会有性能影响，因为`someBoolean()`永远不会被调用。但是，Java 是否足够“智能”，以至于在禁用断言的情况下，第二种形式在禁用断言的情况下也不会对性能造成影响？

显然，更重要的问题是哪种做法更好？

我喜欢它，`assert someBoolean()`因为它是明确的，不受重新或误解的影响，但似乎另一种形式可能更适合未来证明，因为`verifySomeBoolean()`除了断言相同的基础之外，我可能还想扩展做某事的行为布尔值。虽然我的直觉说如果是这样的话，我最好重新编码而不是试图弄脏旧代码以适应。智者的话将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T19:00:12.630

我以为你没有编译出断言？我以为它们是编译过的，只能由 JVM 启用`java -ea`。

在这种情况下，将由 JVM 在`-ea`不使用时优化空调用。但是您正在过早地进行优化。使代码易于理解和编写。然后进行第二次优化。调用空方法不会导致性能问题。

*更新：*

就风格而言，我会使用尽可能接近问题的断言。我不喜欢仅用于检查的方法中的断言。

其次，assert() 和 Guava Preconditions 有两个不同的应用。`assert`应该用于检查您的世界是否仍然是您认为的世界。它更像是一种`assert (1+1 == 2)`东西。您不要在被调用参数上使用 assert()。您使用 assert 来检查您知道必须为真的东西，但无论如何都要检查它。

Guava Preconditions 看起来是你应该使用的。这是输入验证，用于检查合同合规性。诸如：检查空参数、仅应使用自然数时的负数、格式正确的字符串等。

总而言之，assert() 是“让我确保重力仍然在这里，即使我知道它是”，前提条件是“让我确保我试图以比警察允许的速度更快的速度行驶”

# php - 无法检索 Facebook 用户发送和接收的消息

> ID：13314209
> 
> 赞同：0
> 
> 时间：2012-11-09T18:56:39.983
> 
> 标签：php, facebook, facebook-fql

我执行了以下查询，但我无法检索任何结果：

```
$fql_query = 'select message_id from message where message_id IN (SELECT message_id FROM message WHERE viewer_id='.$fbuser.')'; 
```

我得到了这个查询的结果：

```
$fql_query = 'select gid, name from group where gid IN (SELECT gid FROM group_member WHERE uid='.$fbuser.')'; 
```

该应用程序具有组和消息读取权限。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-10T19:26:34.200

表`viewer_id`中[`message`](https://developers.facebook.com/docs/reference/fql/message/)的 不可索引，因此您可能需要对表进行子查询[`thread`](https://developers.facebook.com/docs/reference/fql/thread/)，如下所示将获得`message_id`收件箱文件夹（文件夹 nb.0 ）的**形式**：

```
SELECT message_id FROM message WHERE thread_id IN (SELECT thread_id FROM thread WHERE folder_id = 0) 
```

您还可以使用 Graph API，例如：

```
/USER_ID?fields=inbox.until(1348523520).limit(25).fields(comments.fields(from,message)) 
```

# php - PHP 5.3 升级后 Zend Framework 324 ERR_EMPTY_RESPONSE

> ID：13314213
> 
> 赞同：1
> 
> 时间：2012-11-09T18:57:06.567
> 
> 标签：php, zend-framework, zend-form

当我升级到 PHP 5.3 时，我开始在我的 Zend 应用程序中收到 324 错误，其中视图试图传递不是 Zend_Form 对象的 stripDecorators 方法对象。我能够解决这个问题，但我无法弄清楚为什么错误只在升级到 5.3 后才发生（Zend 在 5.3+ 中更“严格”吗？），更重要的是，为什么我看不到任何错误输出到错误日志或屏幕上。

我看到的只是`324 ERR_EMPTY_RESPONSE`屏幕。有没有办法在日志记录中捕获这些错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T15:13:53.090

事实证明是 Zend Guard 导致了我遇到的问题。它是在我们安装 PHP 5.3 时安装的。

似乎 Zend Guard 正在将 Deprecated 错误转换为“未知”错误，并在遇到它们时停止系统。我不太确定发生了什么，但是当我禁用 Zend Guard 时，一切都恢复正常了。

# facebook - 如何使用 Facebook Graph API 获取用户位置

> ID：13314214
> 
> 赞同：3
> 
> 时间：2012-11-09T18:57:07.867
> 
> 标签：facebook, facebook-graph-api

我正在使用我的帐户在图形资源管理器中尝试此操作：[https ://developers.facebook.com/tools/explorer/?method=GET&path=me](https://developers.facebook.com/tools/explorer/?method=GET&path=me)

我向令牌添加了所有可能相关的权限。它向我显示了许多信息，但显示了任何位置。在我的 Facebook 个人资料上，我没有家乡，但我有当前位置，我的朋友也可以看到它。它说我住在***。我找不到任何可以设置为不向任何应用程序显示的隐私设置。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T18:18:23.333

这有点棘手，直到我发现*家乡*和*位置*在响应数据中存储为一维数组。试试下面的代码：

```
FB.api('/me', function(response) {
console.log(response.hometown.name);
console.log(response.location.name);
}); 
```

这应该有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T17:15:26.297

确保获得许可，您可以使用此检查位置。

```
https://developers.facebook.com/tools/explorer/?method=GET&path=me%3Flocation 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-14T10:25:06.623

[一段时间以来， https:](https://graph.facebook.com/me) //graph.facebook.com/me 中似乎缺少用户位置。不确定周围是否有任何获取位置的信息。所以，我希望这一切都清楚了。FB很奇怪。

# java - Java如何从来自多个来源的数据中推断类型

> ID：13314215
> 
> 赞同：1
> 
> 时间：2012-11-09T18:57:18.533
> 
> 标签：java, string, types, inference

我正在开发一个从多个传感器收集数据的 java 服务器。这些传感器通常将查询的值作为字符串值返回。在标头中，它指示了服务器必须用来转换接收到的值的数据类型。这些值可以是整数、布尔值、双精度、浮点数和长整数。

传感器可能不提供值的“数据类型描述”，因此：我想找到一种方法来理解它分析接收到的字符串的数据类型。

我正在考虑使用 REGEX，但也许还有其他一些方法可以做得更好。有什么建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T19:20:03.447

有几种方法可以做到这一点。一种是尝试以正确的顺序通过不同的标准java类型解析值，即

```
Boolean.parseBoolean(s)
Integer.parseInteger(s)
Long.parseLong(s)
... 
(and so on) 
```

并在每一步都捕获异常第二种方法-使用apache commons库，检测类型即

```
BooleanUtils.isBoolean(s)    
StringUtils.IsNumeric(s)
StringUtils.IsAlpha(s) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T19:11:35.260

我将创建一个数据验证器责任链，其每个元素都会尝试将输入数据从最严格的类型排序为最不严格的类型：

```
boolean
integer
long
float
double
String 
```

如果无法解析数据，则链会将其传播到下一个解析器，如果一切都失败，则抛出异常或将其用作字符串。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-03-06T12:07:16.677

我受到这篇文章的启发，写了自己的文章。它真的很容易使用。[String#trim()](https://docs.oracle.com/javase/9/docs/api/java/lang/String.html#trim--)用于删除前导和尾随空格，因此以下工作正常：

```
jshell> Typifier.typify(" 23  \t\n")
$206 ==> String[2] { "Byte", "23" }

jshell> Typifier.typify("\r\n 3.4")
$207 ==> String[2] { "Float", "3.4" } 
```

但是如果用户*只*输入空格，那也没关系：

```
jshell> Typifier.typify(" ")
$298 ==> String[2] { "String", " " } 
```

真/假的各种表示用于确定布尔值：

```
jshell> Typifier.typify(" F ")
$208 ==> String[2] { "Boolean", "false" }

jshell> Typifier.typify(" 1 ")
$209 ==> String[2] { "Boolean", "true" }

jshell> Typifier.typify(" TRUE ")
$210 ==> String[2] { "Boolean", "true" } 
```

Byte、Short 和 Float 的范围用于将值装箱为可用的最窄类型：

```
jshell> Typifier.typify(" 2 ")
$212 ==> String[2] { "Byte", "2" }

jshell> Typifier.typify(" 200 ")
$213 ==> String[2] { "Short", "200" }

jshell> Typifier.typify(" 2e9 ")
$214 ==> String[2] { "Float", "2.0E9" }

jshell> Typifier.typify(" 2e99 ")
$215 ==> String[2] { "Double", "2.0E99" } 
```

默认类型是字符串，但如果方程可以[被 JavaScript ScriptEngine](https://docs.oracle.com/javase/9/docs/api/javax/script/ScriptEngine.html)解析，if 将被解析并返回结果

```
jshell> Typifier.typify("var a = 3; var b = 6; a*b")
$230 ==> String[2] { "Float", "18.0" }

jshell> Typifier.typify("2*(2.4e2 + 34.8)")
$231 ==> String[2] { "Float", "549.6" } 
```

如果输入字符串的长度为 1 并且不是 Boolean 或 Byte，则将为其分配 Character 类型：

```
jshell> Typifier.typify("4")
$232 ==> String[2] { "Byte", "4" }

jshell> Typifier.typify("-")
$233 ==> String[2] { "Character", "-" }

jshell> Typifier.typify("a")
$234 ==> String[2] { "Character", "a" } 
```

可能的扩展可能包括为公式评估放置一个标志，或者一个将返回类型限制为“常见”类型（布尔、整数、双精度、字符串）的标志。此代码也可以在[gist.github](https://gist.github.com/awwsmm/56b8164410c89c719ebfca7b3d85870b)找到。无论如何，这里是：

# 代码

```
import javax.script.ScriptEngineManager;
import javax.script.ScriptEngine;
import javax.script.ScriptException;

import java.util.Arrays;
import java.util.regex.Pattern;
import java.util.regex.Matcher;

public class Typifier {

  public Typifier() {
    // nothing special to do here
  }

  public static String[] typify (String data) {

    String s = data.trim();

    // -1\. if the input data is only whitespace, return String
    if (s.length() == 0) return new String[]{"String", data};

    // 0\. check if the data is Boolean (true or false)
    if (Arrays.asList("0", "f", "F", "false", "False", "FALSE").contains(s))
      return new String[]{"Boolean", "false"};
    else if (Arrays.asList("1", "t", "T", "true",  "True",  "TRUE" ).contains(s))
      return new String[]{"Boolean", "true"};

    // 1\. check if data is a Byte (1-byte integer with range [-(2e7) = -128, ((2e7)-1) = 127])
    try {
      Byte b = Byte.parseByte(s);
      return new String[]{"Byte", b.toString()}; // if we make it to this line, the data parsed fine as a Byte
    } catch (java.lang.NumberFormatException ex) {
      // okay, guess it's not a Byte
    }

    // 2\. check if data is a Short (2-byte integer with range [-(2e15) = -32768, ((2e15)-1) = 32767])
    try {
      Short h = Short.parseShort(s);
      return new String[]{"Short", h.toString()}; // if we make it to this line, the data parsed fine as a Short
    } catch (java.lang.NumberFormatException ex) {
      // okay, guess it's not a Short
    }

    // 3\. check if data is an Integer (4-byte integer with range [-(2e31), (2e31)-1])
    try {
      Integer i = Integer.parseInt(s);
      return new String[]{"Integer", i.toString()}; // if we make it to this line, the data parsed fine as an Integer
    } catch (java.lang.NumberFormatException ex) {
      // okay, guess it's not an Integer
    }

    String s_L_trimmed = s;

    // 4\. check if data is a Long (8-byte integer with range [-(2e63), (2e63)-1])

    //    ...first, see if the last character of the string is "L" or "l"
    if (Arrays.asList("L", "l").contains(s.substring(s.length() - 1)) && s.length() > 1)
      s_L_trimmed = s.substring(0, s.length() - 1);

    try {
      Long l = Long.parseLong(s_L_trimmed);
      return new String[]{"Long", l.toString()}; // if we make it to this line, the data parsed fine as a Long
    } catch (java.lang.NumberFormatException ex) {
      // okay, guess it's not a Long
    }

    // 5\. check if data is a Float (32-bit IEEE 754 floating point with approximate extents +/- 3.4028235e38)
    try {
      Float f = Float.parseFloat(s);

      if (!f.isInfinite()) // if it's beyond the range of Float, maybe it's not beyond the range of Double
        return new String[]{"Float", f.toString()}; // if we make it to this line, the data parsed fine as a Float and is finite

    } catch (java.lang.NumberFormatException ex) {
      // okay, guess it's not a Float
    }

    // 6\. check if data is a Double (64-bit IEEE 754 floating point with approximate extents +/- 1.797693134862315e308 )
    try {
      Double d = Double.parseDouble(s);

      if (!d.isInfinite())
        return new String[]{"Double", d.toString()}; // if we make it to this line, the data parsed fine as a Double
      else // if it's beyond the range of Double, just return a String and let the user decide what to do
        return new String[]{"String", s};

    } catch (java.lang.NumberFormatException ex) {
      // okay, guess it's not a Double
    }

    // 7\. revert to String by default, with caveats...

    //   a. if string has length 1, it is a single character
    if (s.length() == 1) return new String[]{"Character", s};

    //   b. if string contains any of {+, -, /, *, =}, attempt to parse equation
    Pattern pattern = Pattern.compile("[+-/*=]");
    Matcher matcher = pattern.matcher(s);

    //   ...evaluate the equation and send the result back to typify() to get the type
    if (matcher.find()) {
      ScriptEngineManager manager = new ScriptEngineManager();
      ScriptEngine engine = manager.getEngineByName("JavaScript");

      try {
        String evaluated = engine.eval(s).toString();
        return typify(evaluated);
      } catch (javax.script.ScriptException ex) {
        // okay, guess it's not an equation
      }
    }

    // ...if we've made it all the way to here without returning, give up and return "String"

    return new String[]{"String", s};

  }

} 
```

# php - 如果页面已被访问，则重定向

> ID：13314218
> 
> 赞同：1
> 
> 时间：2012-11-09T18:57:27.757
> 
> 标签：php, javascript

我想我被困住了，我真的希望有人能在这里帮助我。

因此，我正在尝试使用 PHP 和 JS 制作类似于测验应用程序的东西。这个想法是给用户一张包含 4 个可能答案的图片，他必须猜测那张图片中有什么。用户根据他单击的答案获得 x 分，并被重定向到下一页，包括图片和答案，等等。用户也有机会跳到下一页。事情是这样的：

我如何检查用户是否已经回答了特定问题，所以如果这个问题已经被回答，我可以将他重定向到下一页？基本上，这就像防止作弊一样，使用户无法从同一个问题中获得越来越多的分数。

我目前坚持使用 MySQL 解决方案，为每个页面创建列，在那里存储值，然后在用户尝试访问特定页面时比较它们，根据存储的值重定向他。它是唯一的解决方案吗？

如果我的英语不是那么好，我很抱歉，我希望你们能理解我的问题。:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T19:04:25.917

将每个问题的唯一值存储到会话变量中。如果该会话变量存在，则重定向到下一页。

```
// init.php
session_start();

// question1.php
require 'init.php';
if (isset($_SESSION['question1'])
    header('location: http://mysite.com/question2.php');
else
    $_SESSION['question1'] = TRUE;

// put the question code here 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T19:12:24.497

您可能需要使用 MySQL db，因此它是一个永久解决方案，但您不需要为每个页面创建新列。你可以只有 1 列和行数据是一个 JSON 对象，你可以继续引用它

```
{page1:'done'} 
```

那么当你要保存时，它可能看起来像这样

```
{page1:'done',page2:'done'} 
```

您可以为此使用 json_encode 和 json_decode php 函数。

[http://php.net/manual/en/function.json-decode.php](http://php.net/manual/en/function.json-decode.php)

[http://php.net/manual/en/function.json-encode.php](http://php.net/manual/en/function.json-encode.php)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-09T19:23:03.247

您提到，该用户可以登录和注销。因此，我假设您已经有一个用户数据库，并且您希望以某种方式存储特定用户已经回答了哪些问题，但是您不知道将这些信息存储到 MySQL 数据库中的正确方法是什么。

现在，如果我错了，我很抱歉，你的意思，但如果我的假设是正确的，那么有几种方法，如何存储你想要保存的数据。例如，您可以在包含用户的表中添加另一列，该列将包含用户回答的最后一个问题。每次用户回答下一个问题时，您都可以更新该值。

因此，即如果您有 4 个问题，则该列将为空。当您进入有问题的页面时，您会查看数据库，该用户回答的最后一个问题是什么。由于该用户没有回答任何问题，因此该列仍然是空的，您可以问他第一个问题。如果他回答，您现在可以更新值为 1 的列。下次同一用户访问带有问题的页面时，您再次查看数据库到同一列，您将获得值 1。所以现在您已经问第一个问题，你可以问用户下一个问题。

如果问题没有按特定顺序提出并且可以随机呈现，您还有其他可能的解决方案：创建参考表。您可以创建新表，其中将包含三列：user_id、question_id 和该问题的答案（如果您也需要保存答案）。现在，每次用户打开生成问题的页面时，您都可以查看带有问题的表格并选择用户未回答的所有问题。所以你做这样的事情：

```
SELECT * 
FROM questions_table 
WHERE question_id NOT IN 
(SELECT question_id 
FROM questions_answered_by_users 
WHERE user_id=$currentUserId) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-09T19:25:33.700

一个永久的解决方案，我相信唯一的解决方案是某种数据库（mysql、xml、文件等）服务器端。另一种可能被欺骗的方法是使用 cookie，使用 json_encode 创建一个 json，使用该 json_encode 访问过哪些页面，并将它们保存在一个有效期为 30 天的 cookie 中。虽然这可以通过删除 cookie 或打开不同的浏览器来欺骗。

# r - 如何重塑这个数据框？

> ID：13314219
> 
> 赞同：0
> 
> 时间：2012-11-09T18:57:29.310
> 
> 标签：r, dataframe, transpose

**输入 df：**

```
user attr val       date
100    a  10      2012-11-09
100    b  20      2012-11-08
101    a  11      2012-11-09 
```

**输出df：**

```
user attr_a val_a date_a     attr_b  val_b date_b
100    a  10      2012-11-09    b     20      2012-11-08 
101    a  11      2012-11-09 
```

在 R 中需要帮助将输入数据帧重塑为所需的输出数据帧。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-10T01:24:40.330

这是一个简短的函数，它
根据具有指定值 (byVal) 的给定列 (byCol)拼接您的数据框

```
spliceDF <- function(df, byVal, byCol="attr", preserveField="user")  {
# returns spliced df with renamed columns

  # identify which rows will be returned
  rows <- df[byCol]==byVal

  # append the suffix
  nm <- names(df)!=preserveField
  names(df)[nm] <- 
     paste(names(df)[nm], byVal, sep="_")

  return(df[rows,])
} 
```

然后可以在merge中调用如下

```
# merge the two spliced data frames
merge(spliceDF(mydf, "a"), spliceDF(mydf, "b"), by="user", all=TRUE) 
```

为清楚起见，最后一行可以分为三个单独的行

```
# Splice the df into two separate dfs
df_a <- spliceDF(mydf, byVal="a", byCol="attr")
df_b <- spliceDF(mydf, byVal="b", byCol="attr")

# mrege the two into one
merge(df_a, df_b, by="user", all=TRUE) 
```

* * *

*上面示例的代码*

```
# build the data frame from your example
mydf <- data.frame(user=c(100,100,101), 
                   attr=c("a","b","a"), 
                   val =c(10, 20, 11), 
                   date=c(2012-11-09,2012-11-08,2012-11-09)
                  ) 
```

* * *

## 更新：

看着`?merge()`，它有一个后缀参数。
尝试 suffixes=c("_a", "_b") 效果很好。

```
 merge(df[df$attr=="a", ], df[df$attr=="b", ],
           by="user", suffixes=c("_a", "_b"), all=TRUE)

# OUTPUT
  user attr_a val_a date_a attr_b val_b date_b
1  100      a    10   1992      b    20   1993
2  101      a    11   1992   <NA>    NA     NA 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T19:21:08.150

尝试

```
merge( df[ df$attr == "a", ], df[ df$attr == "b", ], by= "user" ) 
```

# xaml - 使用 SharpDX 在 WinRT 中将图像生成为字节 []

> ID：13314221
> 
> 赞同：0
> 
> 时间：2012-11-09T18:57:39.947
> 
> 标签：xaml, windows-runtime, sharpdx

我正在尝试生成一个简单的图像并将其显示在 WinRT/XAML 中。为此，我想要使用 SharpDX 绘制的图像的字节 []。到目前为止，我的方法似乎很好，但结果缓冲区是空的。

我也尝试了 CopyPixels，但它也只产生零。

有人可以指出我正确的方向吗？

* * *

```
 private static byte[] Draw(TexRenderer trnder, int width, int height)
    {
        var wicFactory = new ImagingFactory();
        var dddFactory = new SharpDX.Direct2D1.Factory();
        var dwFactory = new SharpDX.DirectWrite.Factory();

        var wicBitmap = new Bitmap(
            wicFactory,
            width,
            height,
            SharpDX.WIC.PixelFormat.Format32bppBGR,
            BitmapCreateCacheOption.CacheOnLoad);

        var renderTargetProperties = new RenderTargetProperties(
            RenderTargetType.Default,
            new SharpDX.Direct2D1.PixelFormat(Format.Unknown, AlphaMode.Unknown),
            dddFactory.DesktopDpi.Width,
            dddFactory.DesktopDpi.Height,
            RenderTargetUsage.None,
            FeatureLevel.Level_DEFAULT);
        var renderTarget = new WicRenderTarget(
            dddFactory,
            wicBitmap,
            renderTargetProperties)
            {
                TextAntialiasMode = TextAntialiasMode.Cleartype
            };

        renderTarget.BeginDraw();

        var textFormat = new TextFormat(dwFactory, "Consolas", 48)
            {
                TextAlignment = TextAlignment.Center,
                ParagraphAlignment = ParagraphAlignment.Center
            };
        var textBrush = new SolidColorBrush(
            renderTarget,
            Color.Blue);

        renderTarget.Clear(Color.White);
        renderTarget.DrawText(
            "Hi, mom!",
            textFormat,
            new RectangleF(0, 0, width, height),
            textBrush);
        var bitmapRenderTarget = new BitmapRenderTarget(renderTarget, CompatibleRenderTargetOptions.None);
        trnder.Render(bitmapRenderTarget, 0, 0);

        renderTarget.EndDraw();

        var bitmaplock = wicBitmap.Lock(null, BitmapLockFlags.Read);
        var dStream = new DataStream(bitmaplock.Data.DataPointer, bitmaplock.Stride * bitmaplock.Size.Height, true, true);
        var buffer = new byte[bitmaplock.Stride * bitmaplock.Size.Height];
        dStream.Write(buffer, 0, buffer.Length);

        return buffer;
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T03:54:00.357

我遇到了同样的问题，我需要访问原始纹理数据以进行 phisics

```
DataStream dataStream = new DataStream(source.Size.Height * source.Size.Width, true, true);
bitmapSource.CopyPixels( source.Size.Width * sizeof(uint), dataStream);
var data = dataStream.ReadRange<uint>(source.Size.Width * source.Size.Height); 
```

在论坛上[SharpDX forumsformore details](http://www.sharpdx.com/forum/5-api-usage/650-uint-data-for-farseerphysics-texture-to-polygon)

# sql - 使用 T-SQL 从具有特定模式的段落中删除句子

> ID：13314226
> 
> 赞同：3
> 
> 时间：2012-11-09T18:57:52.377
> 
> 标签：sql, sql-server, sql-server-2008, tsql

我有大量的描述，每个描述可以是 5 到 20 个句子。我正在尝试将一个脚本放在一起，该脚本将定位并删除一个包含在其前后带有数字的单词的句子。

前面的例子：你好世界。今天的部门有345名员工。祝你有美好的一天。在示例之后：你好世界。祝你有美好的一天。

我现在的主要问题是识别违规行为。
这里的“345 名员工”是导致该句子被删除的原因。但是，每个描述都有不同的数字，并且可能有不同的员工一词变体。我想避免必须创建一个包含所有不同员工变化的表格。

JTB

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-09T20:10:36.253

这将是一个很好的 SQL 谜题。

**免责声明：可能有大量的边缘情况会炸毁它**

这将获取一个字符串，将其拆分为一个表，每个句子都有一行，然后删除与条件匹配的行，最后将它们全部连接成一个字符串。

```
CREATE FUNCTION dbo.fn_SplitRemoveJoin(@Val VARCHAR(2000), @FilterCond VARCHAR(100))
RETURNS VARCHAR(2000)
AS 
BEGIN
    DECLARE @tbl TABLE (rid INT IDENTITY(1,1), val VARCHAR(2000))
    DECLARE @t VARCHAR(2000)

    -- Split into table @tbl
    WHILE CHARINDEX('.',@Val) > 0
    BEGIN
        SET @t = LEFT(@Val, CHARINDEX('.', @Val))
        INSERT @tbl (val) VALUES (@t)
        SET @Val = RIGHT(@Val, LEN(@Val) - LEN(@t))
    END

    IF (LEN(@Val) > 0)
        INSERT @tbl VALUES (@Val)

    -- Filter out condition 
    DELETE FROM @tbl WHERE val LIKE @FilterCond

    -- Join back into 1 string
    DECLARE @i INT, @rv VARCHAR(2000)
    SET @i = 1
    WHILE @i <= (SELECT MAX(rid) FROM @tbl)
    BEGIN
        SELECT @rv = IsNull(@rv,'') + IsNull(val,'') FROM @tbl WHERE rid = @i
        SET @i = @i + 1
    END
    RETURN @rv

END
go

CREATE TABLE #TMP (rid INT IDENTITY(1,1), sentence VARCHAR(2000))
INSERT #tmp (sentence) VALUES ('Hello world. Todays department has 345 employees. Have a good day.')
INSERT #tmp (sentence) VALUES ('Hello world. Todays department has 15 emps. Have a good day. Oh and by the way there are 12 employees somewhere else')

SELECT 
    rid, sentence, dbo.fn_SplitRemoveJoin(sentence, '%[0-9] Emp%')
FROM #tmp t 
```

返回

```
rid | sentence |  |
1 | Hello world. Todays department has 345 employees. Have a good day. | Hello world. Have a good day.|
2 | Hello world. Todays department has 15 emps. Have a good day. Oh and by the way there are 12 employees somewhere else | Hello world. Have a good day. | 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-09T20:50:30.650

我也使用了拆分/删除/加入技术。

要点是：

*   这使用一对[递归 CTE](http://msdn.microsoft.com/en-us/library/ms186243.aspx)，而不是 UDF。
*   这适用于所有英语句子结尾：`.`或`!`或`?`
*   这将删除空格以进行“数字然后员工”的比较，因此您不必担心多个空格等。

这是[SqlFiddle 演示](http://sqlfiddle.com/#!3/ffe60/1)和代码：

```
-- Split descriptions into sentences (could use period, exclamation point, or question mark)
-- Delete any sentences that, without whitespace, are like '%[0-9]employ%'
-- Join sentences back into descriptions
;with Splitter as (
    select ID
        , ltrim(rtrim(Data)) as Data
        , cast(null as varchar(max)) as Sentence
        , 0 as SentenceNumber
    from Descriptions -- Your table here
    union all
    select ID
        , case when Data like '%[.!?]%' then right(Data, len(Data) - patindex('%[.!?]%', Data)) else null end
        , case when Data like '%[.!?]%' then left(Data, patindex('%[.!?]%', Data)) else Data end
        , SentenceNumber + 1
    from Splitter
    where Data is not null
), Joiner as (
    select ID
        , cast('' as varchar(max)) as Data
        , 0 as SentenceNumber
    from Splitter
    group by ID
    union all
    select j.ID
        , j.Data +
            -- Don't want "digit+employ" sentences, remove whitespace to search
            case when replace(replace(replace(replace(s.Sentence, char(9), ''), char(10), ''), char(13), ''), char(32), '') like '%[0-9]employ%' then '' else s.Sentence end
        , s.SentenceNumber
    from Joiner j
        join Splitter s on j.ID = s.ID and s.SentenceNumber = j.SentenceNumber + 1
)
-- Final Select
select a.ID, a.Data
from Joiner a
    join (
        -- Only get max SentenceNumber
        select ID, max(SentenceNumber) as SentenceNumber
        from Joiner
        group by ID
    ) b on a.ID = b.ID and a.SentenceNumber = b.SentenceNumber
order by a.ID, a.SentenceNumber 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-09T19:29:59.340

一种方法来做到这一点。请注意，仅当您在所有句子中都有一个数字时，它才有效。

```
declare @d VARCHAR(1000) = 'Hello world. Todays department has 345 employees. Have a good day.'
declare @dr VARCHAR(1000)

set @dr = REVERSE(@d)

SELECT   REVERSE(RIGHT(@dr,LEN(@dr) - CHARINDEX('.',@dr,PATINDEX('%[0-9]%',@dr))))

 + RIGHT(@d,LEN(@d) - CHARINDEX('.',@d,PATINDEX('%[0-9]%',@d)) + 1) 
```

# wpf - AvalonDock DocumentPane 无法正确恢复

> ID：13314227
> 
> 赞同：0
> 
> 时间：2012-11-09T18:57:57.440
> 
> 标签：wpf, avalondock

我有以下 AvalonDock（我使用的是 1.3 版）布局：

```
<AvalonDock:DockingManager Grid.Row="1"
                               x:Name="MainDockingManager"
                               Loaded="MainDockingManager_Loaded">
        <AvalonDock:ResizingPanel Orientation="Vertical">
            <AvalonDock:ResizingPanel Orientation="Horizontal">
                <AvalonDock:DockablePane x:Name="LeftDockablePane"
                                         AvalonDock:ResizingPanel.ResizeWidth="250" />
                <AvalonDock:ResizingPanel Orientation="Vertical">
                    <AvalonDock:DocumentPaneResizingPanel>
                        <AvalonDock:DocumentPane x:Name="documentPane"/>
                    </AvalonDock:DocumentPaneResizingPanel>
                    <AvalonDock:DockablePane x:Name="BottomDockablePane"
                                             AvalonDock:ResizingPanel.ResizeHeight="200" />
                </AvalonDock:ResizingPanel>
            </AvalonDock:ResizingPanel>
        </AvalonDock:ResizingPanel>
    </AvalonDock:DockingManager> 
```

这是 DockingManager 的 Loaded 事件的事件处理程序：

```
 void MainDockingManager_Loaded( object sender, RoutedEventArgs e )
    {
        _layoutStateFilePath = Path.Combine( ApplicationSettingsService.UserSettingsDirectory, LayoutStateFileName );

        if ( File.Exists( _layoutStateFilePath ) )
        {
            MainDockingManager.RestoreLayout( _layoutStateFilePath );
        }
    } 
```

和窗口关闭事件处理程序：

```
 private void ApplicationViewsWindow_Closing( object sender, CancelEventArgs e )
    {
        MainDockingManager.SaveLayout( _layoutStateFilePath );
    } 
```

保存和恢复所有 DockablePanes 工作正常，但问题是 DocumentPane 没有正确恢复。当我尝试打开新文档时，它们不会显示。

我使用 Visual Studio 中的即时窗口进行以下查询

打电话之前`MainDockingManager.RestoreLayout()`：

```
documentPane.IsMainDocumentPane
true 
```

调用后`RestoreLayout()`：

```
documentPane.IsMainDocumentPane
null
MainDockingManager.MainDocumentPane.GetHashCode()
16306004
documentPane.GetHashCode()
15125992 
```

调用后执行此`RestoreLayout()`操作也不起作用：

```
MainDockingManager.MainDocumentPane = documentPane; 
```

有什么想法我做错了什么，或者我在这里遗漏了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T11:22:43.433

我通过在添加新文档时不使用命名的 DocumentPane（“documentPane”）来解决此问题。相反，我使用 DockingManager.MainDocumentPane 属性来操作 DocumentPane。

# security - Windows 8 Phone - 访问 NFC 阅读器？

> ID：13314228
> 
> 赞同：1
> 
> 时间：2012-11-09T18:57:57.287
> 
> 标签：security, nfc, credit-card, windows-phone-8

简短的问题：我可以使用支持 NFC 的 Windows Phone 8 读取信用卡信息吗？

长问题：信用卡 NFC 是如何工作的？卡（或具有钱包功能的手机）通过 NFC 接收请求并以某种标准化格式回复明文信用卡信息？在广播信用卡信息之前，钱包选项是否还支持一些确认对话框？

还是事先进行了一些握手加密？或者是否有一些信用卡特定的密码来保护通信？或者NFC上有一些用于支付的覆盖协议吗？据了解，NFC 只是在空中推动一根绳子？

如果它有效，我认为它有效，我是否可以通过最好的 C# 告诉 Windows 8 Phone 读取信用卡信息并将其显示给我（如果信用卡里面有芯片）？或者可能是 Windows Phone 8 不允许访问 NFC 阅读器，或者一些神秘的支付协议（如果存在这样的事情）。我的简短网络搜索对技术细节非常模糊，尤其是在一些网站谈论运营商对钱包系统的支持时，好像会从网络的某个地方获取一些密钥以确保交易安全？我无法想象在所有信用卡发行商中都标准化了类似的东西。

有人可以提供信用卡数据传输方式的技术见解，以及您是否可以对手机进行编程以读取此类数据。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2015-01-16T02:50:45.870

非接触式信用卡/借记卡确实使用 NFC（主要是 ISO 14443-A，一些主要在法国是 ISO 14443-B），并且它们的通信协议遵循称为 EMV 的行业标准，该标准在此处提供公共规范：[http://www. emvco.com/specifications.aspx?id=223](http://www.emvco.com/specifications.aspx?id=223)这些卡通过 NFC/非接触式以及通过接触式芯片（例如，您插入读卡器的黄金物品）使用相同的 EMV，尽管支付网络的做法往往略有不同，具体取决于在哪个接口上使用（例如，有时通过非接触式的少量不需要 PIN，而接触可能总是需要 PIN）。此外，协议的某些方面是支付网络专有的，因此 EMV 规范并未完全描述所有内容。

如果您四处搜索，有很多网站提供了一些示例，说明如何通过 NFC 与信用卡/借记卡进行通信，而另一些则通过插入芯片卡进行通信，但通常无论界面如何，命令的工作方式都相同。您可以为 http://blog.saush.com/2006/09/08/getting-information-from-an-emv-chip-card/ 购买可以同时执行 NFC 和插入/接触的 USB 智能卡读卡器

对于 Windows Phone，只要您有 Lumia 830/730/735 等，您也可以与信用卡通话，因为较旧的设备（甚至是 Lumia 930）具有较旧的 NFC 芯片，驱动程序不支持智能卡 API。您可以在此处使用示例代码：[https](https://nfcsmartcardreader.codeplex.com/) ://nfcsmartcardreader.codeplex.com/来了解如何向 NFC 卡发送/接收 APDU 命令/响应，尽管该项目没有专门提供信用卡所需的命令（尽管该其他链接确实具有您需要的 APDU）。

信用卡通常都可以让你阅读他们的 PAN（印在正面的帐号）、有效期，在某些国家甚至是持卡人姓名（尽管在美国，出于隐私考虑，大多数银行倾向于不公开它，而是退回东西像“VALUED/CARDHOLDER”作为名称）没有任何加密或密钥。但是，它不会返回印在卡背面的 CVV2 代码，这通常是商户能够在互联网上下订单所要求的，并且由于存在动态/加密数据，它通常也不允许您克隆卡需要在实体商户进行刷卡交易。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-11T19:43:21.337

简短的回答：不。信用卡不太可能与 WP8 一起使用。

长答案：

1.  **RFID 与 NFC：**据我所知，大多数信用卡都没有 NFC。他们有RFID。可以说它是 NFC 的“前身”技术。RFID 大多是非标准化的，比 NFC 具有更远的范围，并且只支持单向通信。而 NFC 是一个不断发展的标准，可以在 2cm-4cm 范围内使用并支持双向通信。因此，WP8 不支持 RFID，但支持 NFC。
2.  **WP8 上的 RFID：**话虽如此，WP8 有可能识别*一些*RFID 标签。您可能能够从特定 WP8 手机中的特定 RFID 标签中读取字节 []。显然，不建议这样做。
3.  **安全 NFC：**最后一件事是，一些非常特定地区的一些非常独家的合作伙伴将可以使用“安全 NFC”。安全 NFC 是 NFC 的超集，并添加了通过 WP8 的 NFC 存储和传输安全信息的功能。例如，安全 NFC 可以存储信用卡号或银行帐号作为 WP8 钱包的一部分。但是，这仅适用于移动运营商发布“智能 SIM”（能够运行小程序的 SIM）的地区，开发人员可以编写基于 Java 的智能 SIM 小程序，开发人员与移动运营商达成协议部署这些小程序无线小程序，这些 WP8 应用程序已与 Microsoft 一起被清除用于 WP8 商店，并且有专用的零售硬件终端可以读取它们。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-09-06T05:59:49.657

整理一下 JustinAngel 的上述答案：

*   RFID不是NFC的前身技术
*   RFID覆盖射频通信的各种频段（例如HF和UHF）
*   NFC 是近场通信，通常覆盖 HF (13.56 MHz)
*   许多标准都属于 HF NFC：ISO14443-4、ISO15693、FeliCa、ISO18092、......
*   NFC 论坛正在尝试统一事物并使用 NDEF 消息来交换语义消息
*   信用卡的非接触式支付基于非接触式智能卡层。
*   WP8 只允许交换 NDEF 消息
*   WP8 不允许在非接触式智能卡层进行交换（ISODEP==L4==(T=CL)）
*   有关详细信息，请参阅 windows 接近 api 或[http://developer.nokia.com/Community/Wiki/Use_NFC_tags_with_Windows_Phone_8](http://developer.nokia.com/Community/Wiki/Use_NFC_tags_with_Windows_Phone_8)
*   然而，Android 允许访问此 ISODEP 层
*   我不知道可以从应用程序中检索到哪些信用卡信息。涉及处理密码学和东西的安全元素。我不认为 Mastercard payPass 或 VISA payWave 的详细信息是免费提供的

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-10T16:59:32.210

> 我可以使用支持 NFC 的 Windows Phone 8 读取信用卡信息吗？

不，你不能那样做。Windows Phone 8 上的 NFC API 非常有限。

可能是 Wallet API 可以以某种方式帮助您完成项目，但这与 NFC 无关。您也可以尝试使用带有 NFC 的 Android 设备，它们具有比 WP8 更强大的 NFC API。

# cucumber - 如何生成包含@manual 标记的所有场景的文件？

> ID：13314230
> 
> 赞同：0
> 
> 时间：2012-11-09T18:57:59.283
> 
> 标签：cucumber, gherkin

我有一堆功能文件。一些场景和功能用 标记`@manual`。我想生成一个文件，该文件将包含使用此标签标记的所有场景和功能，以便更容易找到它们。显然我可以自己编写特征文件的解析器。但是是否有现有的图书馆或内置的方式可以做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T20:52:36.620

我不知道任何现有的图书馆可以做到这一点，但我可能会运行

```
cucumber --tags @manual > manual.feature 
```

然后打开“manual.feature”并删除多余的内容！

# java - 有什么方法可以将 JPanel 添加到 JTable 的标题中？

> ID：13314233
> 
> 赞同：0
> 
> 时间：2012-11-09T18:58:28.810
> 
> 标签：java, swing, jtable, jtableheader

我想将 JPanel 添加到 JTable 的列标题中。搜索了很多，但找不到任何答案。请帮助我。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T19:02:32.953

不是直接的。

如果要更改单元格的外观，则需要编写自定义单元格渲染器：

*   [http://docs.oracle.com/javase/tutorial/uiswing/components/table.html](http://docs.oracle.com/javase/tutorial/uiswing/components/table.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T19:12:24.540

[http://www.coderanch.com/t/339979/GUI/java/Adding-JComboBox-JTable-header](http://www.coderanch.com/t/339979/GUI/java/Adding-JComboBox-JTable-header)。这是与您的要求类似的链接。Jtable 标头中的 JComboBox 插入了 jpanel。这应该可以帮助你。同意 paulsm4。

# web-applications - Struts 2 迁移到 spring mvc

> ID：13314240
> 
> 赞同：2
> 
> 时间：2012-11-09T18:58:46.513
> 
> 标签：web-applications, spring-mvc, struts2, migration

我正处于将 Struts 2 应用程序迁移到 spring mvc 框架的早期阶段。我已经在项目中添加了几个 spring 模块，包括 spring core、spring security，现在我将尝试摆脱 struts 以支持 spring mvc。

不过，我遇到了困难 - 我正在尝试将我的一些 struts 动作重新映射到 bean。这是一个例子：

我在我的 struts.xml 文件中配置了一个操作：

```
<package name="default" extends="struts-default">
    <result-types>
            <result-type name="json" class="org.apache.struts2.json.JSONResult" />
    </result-types>
    ...
    <action name="tools" class="com.carfax.pb.dashboard.processing.action.RerunEventsAction" method="getAllRerunEvents">
        <result name="success">/WEB-INF/jsp/tools/home.jsp</result>
    </action>
    ...
</package> 
```

所以基本上我有一个 tools.home jsp 页面，它是上面定义的操作的视图。我已经为这个视图创建了一个控制器类（基本上只是将实现从操作中取出并将其移到了一个 groovy 控制器类中）：

```
@Controller
@RequestMapping("/tools")
class RerunEventsController {

...

    public String getAllRerunEvents() {

        ...
        return ActionSupport.SUCCESS;
    }    

...
} 
```

现在我正试图弄清楚如何连接这两个，这就是我遇到困难的地方。

1.  我不知道如何使 struts 延迟我在 struts.xml 中定义的映射（我仍然希望支持剩余的 struts 操作，因为我将把这些操作一一移动到控制器中。

2.  我不知道如何正确配置从命名空间到控制器以查看的映射。

这是我尝试过的 -

网页.xml：

```
<servlet>
    <servlet-name>mvc-dispatcher</servlet-name>
    <servlet-class>
        org.springframework.web.servlet.DispatcherServlet
    </servlet-class>
    <load-on-startup>1</load-on-startup>
</servlet>

<servlet-mapping>
    <servlet-name>mvc-dispatcher</servlet-name>
    <url-pattern>/PBDashboard/*</url-pattern>
</servlet-mapping> 
```

servlet.xml：

// Spring 应该自动找到我的控制器，因为它存在于这个包中

```
<context:component-scan base-package="com.carfax.pb.dashboard.processing.action" />

<bean class="org.springframework.web.servlet.view.InternalResourceViewResolver">
    <property name="prefix">
        <value>/WEB-INF/jsp/</value>
    </property>
    <property name="suffix">
        <value>.jsp</value>
    </property>
</bean> 
```

我的 web.xml 有一个 Struts2 过滤器和过滤器映射设置如下：

```
<filter>
    <filter-name>struts2</filter-name>
    <filter-class>org.apache.struts2.dispatcher.FilterDispatcher</filter-class>
</filter>

<filter-mapping>
  <filter-name>struts2</filter-name>
  <url-pattern>/*</url-pattern>
</filter-mapping> 
```

当我导航到 appname/tools 时，我收到一个 struts 错误，提示“没有为命名空间/和动作名称工具映射的动作”

这显然是正确的，但我觉得我已经设置了 spring mvc 应该获取的映射。

谁能给我指出一些关于如何正确地做到这一点/更好并指出我的错误的信息？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-09T19:34:28.633

如果我是正确的，您的 web.xml 也应该在 /* 上有 Struts 过滤器。然后，您可以将 DispatcherServlet 映射为默认 servlet (/)，并使用以下内容排除 struts.xml 中迁移的操作：

```
<constant name="struts.action.excludePattern" value="/tools"/> 
```

然后，Struts 应该处理除 /tools 之外的每个请求，并将 /tools URL 留给 Spring。

# javascript - Typescript 中的闭包（依赖注入）

> ID：13314241
> 
> 赞同：3
> 
> 时间：2012-11-09T18:58:59.653
> 
> 标签：javascript, dependency-injection, functional-programming, typescript

尝试以具有依赖关系的功能样式使用 TypeScript，我感到很受打击。假设我想制作一个依赖于另一个模块的模块。

如果我没有使用依赖注入，它看起来像这样（在节点中）。

```
SomeOtherModule = require("SomeOtherModule")
exports.doSomething = function() {
  SomeOtherModule.blah()
} 
```

这就是我使用依赖注入的方式

```
module.exports = function(SomeOtherModule) {
  function doSomething() {
    SomeOtherModule.blah()
  }

  return {doSomething: doSomething};
} 
```

在打字稿中，如果您定义了一个具体的类或模块，您可以在导出函数时键入函数或将它们包含在类中。都在旁边。

但是由于我无法在 DI 函数中定义模块*，*所以我能看到的唯一方法是为我单独返回的对象定义一个接口，这很烦人，因为我想要类型符合定义的注释。

有什么更好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T20:58:41.293

这可能会给你一个好的开始：[http ://blorkfish.wordpress.com/2012/10/23/typescript-organizing-your-code-with-amd-modules-and-require-js/](http://blorkfish.wordpress.com/2012/10/23/typescript-organizing-your-code-with-amd-modules-and-require-js/)

我不知道这是否是最好的设置方法。但我得到了它的工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T14:25:28.373

我最终在我的项目中放弃了 AMD，因为我也在使用 AngularJS，而且他们互相踩到了对方的脚趾。我确实一直使用相同的 DI 模式，所以最终看起来像这样。

我很满意。我尝试使用类来代替（如果您保持模块无状态并将构造函数作为注入器函数，您可以非常接近），但我不喜欢必须使用`this`所有依赖项。

此外，类实际上并没有给我买任何东西，因为如果我要对接口进行编码，无论如何我都必须定义两次类型。

```
interface IMyService {
  doSomething();
}

module.exports = function(SomeOtherModule) {

  return {doSomething: doSomething}

  function doSomething() {
    SomeOtherModule.blah()
  }
} 
```

# web-scraping - 挖掘众包数据的合法性

> ID：13314243
> 
> 赞同：-3
> 
> 时间：2012-11-09T18:58:59.763
> 
> 标签：web-scraping, web-crawler, mining, crowdsourcing

我有一个项目构想，我想在另一个网站上挖掘通过众包收到的公开可用数据。这样我就有了自己项目的初始数据。重申一下，我想编写一个机器人来抓取显示在另一个网站上的数据并将其用于我自己的网站。有谁知道这种事情的合法性吗？原始网站是否拥有人群提供给它的数据？即使是这样，我可以使用它吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T19:03:52.263

网络抓取是一个法律上复杂的问题。法律诉讼和可执行性的麻烦常常使爬虫程序免于陷入困境。尽管法院裁定“事实的重复”是允许的（美国），但完全重复被认为是可起诉的。

我建议你在这里阅读：[http ://en.wikipedia.org/wiki/Web_scraping#Legal_issues](http://en.wikipedia.org/wiki/Web_scraping#Legal_issues)

最好的，

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T19:06:44.777

从法律上讲，你应该没问题。只要提供数据并且得到人们的同意；您没有进行黑客攻击，并且其他站点有权共享。检查另一个站点上的许可证，如果没有一个查询或准备在某个时候拒绝访问。即使它是公开可用的，也不意味着其他站点希望它是。

此外，请仔细检查并确保您不会无意中发布私人数据。

# php - extjs 文件上传无效的 JSON 响应

> ID：13314245
> 
> 赞同：1
> 
> 时间：2012-11-09T18:59:10.693
> 
> 标签：php, extjs

我正在尝试从 extjs 将文件上传到 PHP。该文件正在正确上传，但 UI 卡住并引发以下错误：未捕获您正在尝试解码和无效的 JSON 字符串：

我已经搜索并找到了将 Content-type 标头设置为 text/html 的建议，但这不起作用。这是我的代码：

```
xtype:'form',
width:300,
bodyPadding:5,
frame:false,
items: [{
    xtype: 'filefield',
    name: 'csv',
    msgTarget: 'side',
    allowBlank: false,
    buttonOnly:true,
    anchor: '100%',
    buttonText: 'Import CSV',
    listeners: {
        'change': function(fb,v){
            var form = this.up('form').getForm();
            form.submit({
                url:'/Portal/parsecsv.php',
                standardSubmit:false,
                method:'PUT'
            })
        }
    }
}] 
```

在 parsecsv.php 中，我只有：

```
<?php header('Content-type:text/html');?> 
```

请协助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T19:40:23.520

您正在传递一个无效的 Json 字符串。我在一开始就留下了问题，因为您可能只是没有将完整的 Json 字符串添加到您的问题中，我只在您粘贴的内容中突出显示：

```
'change': function(fb,v){ 
```

这不是有效的 Json。从您工作中的响应中删除 javascript 以获取有效的 Json 字符串。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T19:03:28.140

JSON 的正确标头是

```
Content-type: application/json 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-19T14:47:40.997

问题已解决。问题是在文件上传时，ExtJS 默认需要 JSON 响应，但出于某种原因，ExtJS 将 JSON 响应包装在标签内。所以我必须做的是在 PHP 中将响应的内容类型设置为 text/html，然后在 ExtJS 中，将响应解析为字符串，而不是 JSON。此外，我发现在成功上传时，ExtJS 在表单提交时触发“失败”事件而不是“成功”事件。

# c - 如何使用设备的文件描述符获取设备的 devnode

> ID：13314246
> 
> 赞同：0
> 
> 时间：2012-11-09T18:59:26.050
> 
> 标签：c, linux

例如，我在设备阵列中打开了 2 个设备..

节点是 /dev/ttyUSB0、/dev/ttyUSB1 等。

```
#define MAXDEV 4
devlist[MAXDEV];
const char *devices[] = {"/dev/ttyUSB0","/dev/ttyUSB1");

for(loop =0; loop<sizeof(devices); loop++){

    fd= open(devices[loop]);

} 
```

现在我将它们添加到 fds 列表中；

```
for(i=0; i<MAXDEV; i++){

if(devlist[i] != 0){
devlist[i] = fd;
fd = -1;
}

} 
```

现在我在设备上阅读数据。

```
 for(iter=0; iter<MAXDEV; iter++){

if(FD_ISSET(devlist[iter],&fds)){

if ((nbytes = read(devlist[iter], buf, sizeof(buf)-1)) > 0 && nbytes != 0)
                    {

                 buf[nbytes] = '\0';

                     printf("Data Received on Node ???");

                    }
                if(nbytes < 0){
                            printf("connection reset\n");
                            FD_CLR(devlist[iter], &fds);
                            close(devlist[iter]);
                            devlist[iter] = 0;

                        }
                        if(nbytes ==0){
                            printf("Device Removed on Node ???\n");

                        FD_CLR(devlist[iter], &fds);
                            close(devlist[iter]);
                            devlist[iter] = 0;

                        }
    }
} 
```

现在我如何使用它的 fd 获取设备节点？...谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T21:24:29.827

做到这一点的*正确方法是自己记账。*这将允许您完全按照用户提供的方式记录设备节点名称，而不是提供等效但令人困惑的不同名称。

例如，您可以使用[哈希表](http://en.wikipedia.org/wiki/Hash_table)，将文件描述符编号`char`与用于相应`open()`调用的设备名称关联到数组。

一个更简单但更脆弱且绝对*不*推荐的解决方案可能涉及使用一个简单的指针数组，该数组`char`具有非常大的大小，希望您可能遇到的任何文件描述符值都可以用作适当字符串的索引不超出数组范围。这比哈希表更容易编码，但如果文件描述符值超过字符串数组中允许的最大索引，*它将导致您的程序可怕地死掉。*

如果您的程序无论如何都绑定到 Linux 平台，那么您也许可以，呃，通过使用目录或文件系统（更具体地说，通常是符号链接的目录）*作弊。*两者都包含将文件描述符值与用于打开相应文件的路径的规范版本相关联的符号链接。例如，考虑以下成绩单：`/dev/fd``/proc``/proc/self/fd``/dev/fd`

```
$ ls -l /proc/self/fd
total 0
lrwx------ 1 user user 64 Nov  9 23:21 0 -> /dev/pts/10
l-wx------ 1 user user 64 Nov  9 23:21 1 -> /dev/pts/10
lrwx------ 1 user user 64 Nov  9 23:21 2 -> /dev/pts/10
lr-x------ 1 user user 64 Nov  9 23:21 3 -> /proc/16437/fd/ 
```

您可以使用[`readlink()`](http://linux.die.net/man/2/readlink)系统调用来检索与感兴趣的文件描述符相对应的链接目标。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-08T15:13:34.080

好吧，我可以看到这个问题大约有 1 年的历史。但是现在我正在寻找一种方法来做到这一点。我找到了。要使用文件描述符获取设备节点，您可以组合`stat`，`libudev`这是一个示例：

```
#include <sys/types.h>
#include <sys/stat.h>
#include <stdio.h>
#include <stdlib.h>
#include <libudev.h>
#include <iostream>
#include <fcntl.h>

int main(int argc, char *argv[])
{
    struct stat sb;

    // Get a file descriptor to the file.
    int fd = open(argv[1], O_RDWR);

    // Get stats for that file descriptor.
    if (fstat(fd, &sb) == -1) {
        perror("stat");
        exit(EXIT_FAILURE);
    }

    // Create the udev context.
    struct udev *udev;
    udev = udev_new();

    // Create de udev_device from the dev_t obtained from stat.
    struct udev_device *dev;
    dev = udev_device_new_from_devnum(udev, 'b', sb.st_dev);

    // Finally obtain the node.
    const char* node  = udev_device_get_devnode(dev);

    udev_unref(udev);

    std::cout << "The file is in:    " << node << std::endl;

    return 0;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-09T19:24:06.417

您需要[fstat(2)](http://www.kernel.org/doc/man-pages/online/pages/man2/fstat.2.html)系统调用，也许还[需要 fstatfs(2)](http://www.kernel.org/doc/man-pages/online/pages/man2/fstatfs.2.html)。检查它是否成功。

```
 struct stat st;
  memset (&st, 0, sizeof(st));
  if (fstat (fd, &st))
    perror("fstat");
  else {
    // use st, notably st.st_rdev
  } 
```

请记住，您可以在`/dev`. 如果您确定您的设备在其中，您可以[stat(2)](http://www.kernel.org/doc/man-pages/online/pages/man2/stat.2.html)其中的每个条目，并比较它们`st_rdev`

另请阅读[高级 Linux 编程](http://advancedlinuxprogramming.com/)（它在免费许可下在线，但您可能想购买这本书）。

# java - 我无法解析 SOAP 服务的响应。XML 有什么问题？

> ID：13314249
> 
> 赞同：0
> 
> 时间：2012-11-09T18:59:44.067
> 
> 标签：java, xml, soap, xml-parsing, xsd

我已经尝试了一堆 SOAP、XML 和 xsd 解析器，包括 SAAJ 和 EasyWSDL 等，但它们似乎都不太工作。我可以在没有解析器的情况下解析它，但我也必须处理更复杂的响应。

出于某种原因，解析器返回一个空文档或一个空的元素列表。
这是我试图解析的响应：

```
<soap:Envelope xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
    <soap:Body>
        <ns1:createDataResponse xmlns:ns1="http://3e.pl/ADInterface">
            <StandardResponse xmlns="http://3e.pl/ADInterface" IsError="true">
                <Error>Cannot save record in C_BPartner: ERROR: llave duplicada viola restricción de unicidad «c_bpartner_value»</Error>
            </StandardResponse>
        </ns1:createDataResponse>
    </soap:Body>
</soap:Envelope> 
```

知道出了什么问题吗？

谢谢。

# perl - 基类中的 Moose 方法修饰符不会被调用

> ID：13314257
> 
> 赞同：3
> 
> 时间：2012-11-09T19:00:23.837
> 
> 标签：perl, oop, moose, method-modifier

可以将它们添加到子类中或将它们混合在角色中，这很酷。我的问题是，当子类重新定义方法本身（而不是修饰符）时，基类中的方法修饰符似乎被停用。也许我理解方法修饰符是错误的。例子：

```
use feature 'say';

package Foo;
use Moose;

has called => (is => 'rw', isa => 'Bool', default => 0);
sub call { 'Foo called' }
after call => sub { shift->called(1) };

my  $foo = Foo->new();
say $foo->called;   # 0
say $foo->call;     # Foo called
say $foo->called;   # 1

package Bar;
use Moose;
extends 'Foo';

sub call { 'Bar called' }

my  $bar = Bar->new();
say $bar->called;   # 0
say $bar->call;     # Bar called
say $bar->called;   # 0 
```

我希望最后一个输出`1`与`$foo`. 我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T19:36:48.753

发生的事情是这样的

*   你定义了一个 Foo::call
*   你用 after 修改它
*   你定义了一个不调用 Foo::Call 的 Bar::call

修饰符不是神奇的运行时东西，而是类定义时间的东西。要在此处执行您尝试执行的操作，您必须以不同的方式构建代码

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-10T10:52:31.593

@RobEarl 发布了一个[非常相似问题](https://stackoverflow.com/q/4965197/1184510)的链接。那里发布的解决方案是使用[`augment`](http://p3rl.org/Moose::Cookbook::Basics::Document_AugmentAndInner)，虽然它看起来有点奇怪并且它的使用是有争议的，但它可以解决我的问题：

```
package Foo;
use Moose;

has called => (is => 'rw', isa => 'Bool', default => 0);
sub call { inner(); shift->called(1); 'Foo called' }

package Bar;
use Moose;
extends 'Foo';

augment call => sub { 'Bar called' };

my  $bar = Bar->new();
say $bar->called;   # 0
say $bar->call;     # Bar called
say $bar->called;   # 1 
```

# c# - 异步任务没有结束

> ID：13314259
> 
> 赞同：6
> 
> 时间：2012-11-09T19:00:28.340
> 
> 标签：c#, asynchronous, windows-8, .net-4.5

我正在尝试启动下载网页内容的异步任务（在 .NET 4.5 上），但不知何故，这个任务永远不会完成。

我的`PageDownloader`班级：

```
using System.Net;
using System.Text;
using System.IO;
using System.Net.Http;
using System.Threading.Tasks;
using System;

namespace ParserConsole.WebClient
{
public class PageDownloader
{
    private System.Net.Http.HttpClient _client;

    public PageDownloader()
        : this(Encoding.UTF8) { }

    private Encoding _encoding;

    public PageDownloader(Encoding encoding)
    {
        _encoding = encoding;
        _client = new HttpClient() { Timeout = TimeSpan.FromSeconds(10)};
    }

    private HttpRequestMessage _request;
    private HttpResponseMessage _response;
    private string _responseString;

    public string GetPageData(string link)
    {
        _request = new HttpRequestMessage(HttpMethod.Get, link);
        _request.Headers.Add("User-Agent", "Chrome/21.0.1180.89");
        _request.Headers.Add("Accept", "text/html");

        GetResponse().Wait();
        GetStringFromResponse().Wait();
        return _responseString;            
    }

    private async Task<HttpResponseMessage> GetResponse() {
        return _response = await _client.GetAsync(_request.RequestUri);
    }

    private async Task<string> GetStringFromResponse() {
        return _responseString = await _response.Content.ReadAsStringAsync();
    }

}
} 
```

我通过调用开始下载页面

```
new PageDownloader().GetPageData(url); 
```

当我尝试调试代码时，一切都很好，直到`GetResponse().Wait()`. 但不知何故 `GetResponse()`，任务永远不会完成 - 下一行的断点永远不会到达。我没有例外，应用程序继续运行。有什么建议么？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-09T19:10:57.260

这是您在启动`async`操作然后阻塞返回的任务时遇到的标准死锁条件。

[这](http://blogs.msdn.com/b/pfxteam/archive/2011/01/13/10115163.aspx)是讨论该主题的博客文章。

基本上，`await`调用确保它连接的任务的延续将在您最初所在的上下文中运行（这非常有帮助）但是因为您`Wait`在相同的上下文中调用它是阻塞的，所以延续永远不会运行，并且延续需要运行等待结束。经典的僵局。

至于修复；通常这意味着您不应该对异步操作进行阻塞等待；这与整个系统的设计背道而驰。您应该“一直异步”。在这种情况下，这意味着`GetPageData`应该返回 a`Task<string>`而不是 a `string`，而不是等待其他返回任务的操作，你应该`await`对它们进行操作。

现在，话虽如此，有*一些*方法可以在异步操作上进行阻塞等待而不会死锁。虽然可以做到，但它首先违背了使用 async/await 的目的。使用该系统的主要优点是不会阻塞主要上下文；当你阻塞它时，整个优势就消失了，你不妨一直使用阻塞代码。 `async`/`await`实际上更像是一个全有或全无的范例。

以下是我将如何构建该类：

```
public class PageDownloader
{
    private System.Net.Http.HttpClient _client;
    private Encoding _encoding;

    public PageDownloader()
        : this(Encoding.UTF8) { }

    public PageDownloader(Encoding encoding)
    {
        _encoding = encoding;
        _client = new HttpClient() { Timeout = TimeSpan.FromSeconds(10) };
    }

    public async Task<string> GetPageData(string link)
    {
        HttpRequestMessage request = new HttpRequestMessage(HttpMethod.Get, link);
        request.Headers.Add("User-Agent", "Chrome/21.0.1180.89");
        request.Headers.Add("Accept", "text/html");

        HttpResponseMessage response = await _client.GetAsync(request.RequestUri);

        return await response.Content.ReadAsStringAsync(); ;
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T19:19:49.187

如果您想拥有这样的功能，为什么不这样做。

```
public string GetPageData(string link)
{
    _request = new HttpRequestMessage(HttpMethod.Get, link);
    _request.Headers.Add("User-Agent", "Chrome/21.0.1180.89");
    _request.Headers.Add("Accept", "text/html");

    var readTask = _client.GetStringAsync(link);
    readTask.Wait();
    return readTask.Result;
} 
```

最好将 Task 一直返回并在调用代码中使用 async/await 处理它。

```
public Task<string> GetPageData(string link)
{
    _request = new HttpRequestMessage(HttpMethod.Get, link);
    _request.Headers.Add("User-Agent", "Chrome/21.0.1180.89");
    _request.Headers.Add("Accept", "text/html");

    return _client.GetStringAsync(link);
} 
```

# api - DOM 后加载 Google Maps Api

> ID：13314261
> 
> 赞同：1
> 
> 时间：2012-11-09T19:00:29.870
> 
> 标签：api, google-maps, dom, loading

我遇到了在 DOM 之后加载的 google maps api 的问题，因此当地图加载时，该 api 尚未加载并且它们没有显示。我已经尝试过使用 getScript() jquery 函数和异步方法。有人知道我可以为这些地图做些什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T19:06:37.050

将其加载到`<head>`

```
<head>
  <script src="http://maps.googleapis.com/maps/api/js?libraries=places&sensor=false&language=pt-BR"></script>
</head> 
```

# conditional-statements - 在 VimScript 中检查当前文件中是否存在 %Y

> ID：13314264
> 
> 赞同：2
> 
> 时间：2012-11-09T19:00:32.117
> 
> 标签：conditional-statements, vim

正如标题所说。

我很想知道如何使用 VimScript 执行 if 语句来检查当前文件中是否存在 %Y（用于状态行）。这是我到目前为止所拥有的：

```
if expand('%:Y') != ""
    let filetype=extend('%:Y')
    let filetype+= ",\ "
else
    let filetype=""
endif 
```

当然，这是我的状态行，如果文件类型不存在，我不想显示文件类型逗号和空格。

感谢你的帮助！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-09T21:21:37.443

您不能使用`expand()`或类似方法来解决 ; 中的选项`'statusline'`。它们仅在设置内部进行解释。

如果您不喜欢选项返回的格式或想要将选项组合到自定义指标中，则必须在`%{...}`Vimscript 表达式中模拟该选项。大多数选项可以完全或大部分模拟。对于您的`%Y`，这将包含在`'statusline'`：

```
let &statusline .= '%{empty(&filetype) ? "" : "," . toupper(&filetype) . ", "}' 
```

除了将大型表达式内联，您还可以将其移动到单独的`:function`.

# java - SimpleXML 问题

> ID：13314269
> 
> 赞同：2
> 
> 时间：2012-11-09T19:01:02.420
> 
> 标签：java, xml, rss, mapping, simple-framework

我正在使用 SimpleXML 库。我需要获取 rss 提要并将其转换为 java 对象。这里是我需要映射到对象的 XML

```
<rss xmlns:lj="http://www.livejournal.org/rss/lj/1.0/" xmlns:media="http://search.yahoo.com/mrss/" xmlns:atom10="http://www.w3.org/2005/Atom" version="2.0">
<channel>
<title>Всегда! Везде! Со всеми! и ни с кем!</title>
<link>http://xuma.livejournal.com/</link>
<description>
Всегда! Везде! Со всеми! и ни с кем! - LiveJournal.com
</description>
<lastBuildDate>Thu, 17 Mar 2011 10:08:33 GMT</lastBuildDate>
<generator>LiveJournal / LiveJournal.com</generator>
<lj:journal>xuma</lj:journal>
<lj:journalid>5295048</lj:journalid>
<lj:journaltype>personal</lj:journaltype>
<copyright>NOINDEX</copyright>
<image>
<url>http://l-userpic.livejournal.com/104864030/5295048</url>
<title>Всегда! Везде! Со всеми! и ни с кем!</title>
<link>http://xuma.livejournal.com/</link>
<width>66</width>
<height>100</height>
</image>
<item>
<guid isPermaLink="true">http://xuma.livejournal.com/7831.html</guid>
<pubDate>Thu, 17 Mar 2011 10:08:33 GMT</pubDate>
<title>Япония. Поможем пострадавшим.</title>
<link>http://xuma.livejournal.com/7831.html</link>
<description>...</description>
<comments>http://xuma.livejournal.com/7831.html</comments>
<lj:security>public</lj:security>
<lj:reply-count>0</lj:reply-count>
</item>
<item>
<guid isPermaLink="true">http://xuma.livejournal.com/7575.html</guid>
<pubDate>Sat, 16 Oct 2010 12:36:48 GMT</pubDate>
<link>http://xuma.livejournal.com/7575.html</link>
<description>
<h1>Тест личности</h1><br /><a href="http://teh-nomad.livejournal.com/667478.html"><img border="0" src="http://www.ljplus.ru/img4/a/s/astro_nomad/chtree_6.jpg" alt="" /></a><br /><br /><a href="http://teh-nomad.livejournal.com/667478.html">Выбрать себе дерево</a>
</description>
<comments>http://xuma.livejournal.com/7575.html</comments>
<lj:music>I chase the Devil</lj:music>
<media:title type="plain">I chase the Devil</media:title>
<lj:mood>опаздываю...</lj:mood>
<lj:security>public</lj:security>
<lj:reply-count>0</lj:reply-count>
</item>
</channel>
</rss> 
```

这是我定义的bean：

```
@Root
public class RssType {

    @Element(name="channel")
    private ChannelType channel;

    @Attribute
    private String version;

    public ChannelType getChannel() {
        return channel;
    }

    public void setChannel(ChannelType channel) {
        this.channel = channel;
    }

    public String getVersion() {
        return version;
    }

    public void setVersion(String version) {
        this.version = version;
    }

}

@Element(name="channel")
public class ChannelType {

    @Element
    private String title;

    @Element
    private String link;

    @Element
    private String description;

    @Element
    private String lastBuildDate;

    @Element
    private String generator;

    @Element
    @Namespace(reference="http://www.livejournal.org/rss/lj/1.0/", prefix="lj")
    private String journal;

    @Element
    @Namespace(reference="http://www.livejournal.org/rss/lj/1.0/", prefix="lj")
    private String journalid;

    @Element
    @Namespace(reference="http://www.livejournal.org/rss/lj/1.0/", prefix="lj")
    private String journaltype;

    @Element
    private ImageType image;

    @ElementList(inline=false)
    private List<ItemType> item;

    public String getTitle() {
        return title;
    }

    public void setTitle(String title) {
        this.title = title;
    }

    public String getLink() {
        return link;
    }

    public void setLink(String link) {
        this.link = link;
    }

    public String getDescription() {
        return description;
    }

    public void setDescription(String description) {
        this.description = description;
    }

    public String getLastBuildDate() {
        return lastBuildDate;
    }

    public void setLastBuildDate(String lastBuildDate) {
        this.lastBuildDate = lastBuildDate;
    }

    public String getGenerator() {
        return generator;
    }

    public void setGenerator(String generator) {
        this.generator = generator;
    }

    public String getJournal() {
        return journal;
    }

    public void setJournal(String journal) {
        this.journal = journal;
    }

    public String getJournalid() {
        return journalid;
    }

    public void setJournalid(String journalid) {
        this.journalid = journalid;
    }

    public String getJournaltype() {
        return journaltype;
    }

    public void setJournaltype(String journaltype) {
        this.journaltype = journaltype;
    }

    public ImageType getImage() {
        return image;
    }

    public void setImage(ImageType image) {
        this.image = image;
    }

    public List<ItemType> getItem() {
        return item;
    }

    public void setItem(List<ItemType> item) {
        this.item = item;
    }

}

@Element(name="image")
public class ImageType {

    @Element
    private String url;

    @Element
    private String title;

    @Element
    private String link;

    @Element
    private String width;

    @Element
    private String height;

    public String getUrl() {
        return url;
    }

    public void setUrl(String url) {
        this.url = url;
    }

    public String getTitle() {
        return title;
    }

    public void setTitle(String title) {
        this.title = title;
    }

    public String getLink() {
        return link;
    }

    public void setLink(String link) {
        this.link = link;
    }

    public String getWidth() {
        return width;
    }

    public void setWidth(String width) {
        this.width = width;
    }

    public String getHeight() {
        return height;
    }

    public void setHeight(String height) {
        this.height = height;
    }

}

@Element(name="item")
public class ItemType {

    @Element
    private GuidType guid;

    @Element
    private String pubDate;

    @Element
    private String title;

    @Element
    private String link;

    @Element
    private String description;

    @Element
    private String comments;

    @ElementList(inline=false)
    private List<String> category;

    @Element
    @Namespace(reference="http://www.livejournal.org/rss/lj/1.0/", prefix="lj")
    private String security;

    @Element
    @Namespace(reference="http://www.livejournal.org/rss/lj/1.0/", prefix="lj")
    private String replyCount;

    public GuidType getGuid() {
        return guid;
    }

    public void setGuid(GuidType guid) {
        this.guid = guid;
    }

    public String getPubDate() {
        return pubDate;
    }

    public void setPubDate(String pubDate) {
        this.pubDate = pubDate;
    }

    public String getTitle() {
        return title;
    }

    public void setTitle(String title) {
        this.title = title;
    }

    public String getLink() {
        return link;
    }

    public void setLink(String link) {
        this.link = link;
    }

    public String getDescription() {
        return description;
    }

    public void setDescription(String description) {
        this.description = description;
    }

    public String getComments() {
        return comments;
    }

    public void setComments(String comments) {
        this.comments = comments;
    }

    public List<String> getCategory() {
        return category;
    }

    public void setCategory(List<String> category) {
        this.category = category;
    }

    public String getSecurity() {
        return security;
    }

    public void setSecurity(String security) {
        this.security = security;
    }

    public String getReplyCount() {
        return replyCount;
    }

    public void setReplyCount(String replyCount) {
        this.replyCount = replyCount;
    }

}

@Element(name="guid")
public class GuidType {

    @Attribute
    public String isPermaLink;    

    public String text;   

    @Text
    public String getText() {
        return text;
    }

    @Text
    public void setText(String text) {
        this.text = text;
    }

    public String getIsPermaLink() {
        return isPermaLink;
    }

    public void setIsPermaLink(String isPermaLink) {
        this.isPermaLink = isPermaLink;
    }

} 
```

执行此代码：

```
 String xmlData = retrieve("http://zuma.livejournal.com/data/rss");

        Serializer serializer = new Persister();            

        RssType example = serializer.read(RssType.class, xmlData); 
```

得到这样的异常

```
org.simpleframework.xml.core.AttributeException: Attribute 'isPermaLink' does not have a match in class com.ljclient.xml.beans.ItemType at line 22 
```

但是`isPermaLink`不是节点的属性`<item>`而是`<guid>`节点。

如果我`isPermaLink`成为一个属性，`<item>`在这种情况下，我会遇到以下异常：

```
org.simpleframework.xml.core.ValueRequiredException: Unable to satisfy @org.simpleframework.xml.ElementList(data=false, empty=true, entry=, inline=false, name=, required=true, type=void) on field 'category' private java.util.List com.ljclient.xml.beans.ItemType.category for class com.ljclient.xml.beans.ItemType at line 22 
```

这很奇怪，因为每个类别节点都存在该值。有任何想法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-09T19:32:46.127

这不是您问题的直接答案，但您是否尝试过创建`RssType`实例并将其写入 XML。这个练习的重点是，您可以看到您的标记如何针对任何明显的问题转换为 XML。

```
public static void main(String[] args) {
    RssType rss = new RssType();
    rss.setVersion("1.0");
    ChannelType channel = new ChannelType();
    channel.setTitle("Test title");
    // Set the rest of the variables
    rss.setChannel(channel);

    //do the same for you other types then
    //convert it to xml

    Serializer serializer = new Persister();
    File result = new File("rss.xml");

    serializer.write(rss, result);
} 
```

我知道这并不能立即解决问题，但它应该引导您确定问题所在。

* * *

好的，我刚试过：

```
public static void main(String[] args) throws Exception {
    ItemType item = new ItemType();

    GuidType guid = new GuidType();
    guid.setIsPermaLink("true");
    guid.setText("http://zuma.livejournal.com/147000.html");    
    item.setGuid(guid);
    item.setPubDate("Sun, 07 Oct 2012 06:43:24 GMT");
    item.setTitle("tao machine");
    item.setLink("http://zuma.livejournal.com/147000.html");
    item.setDescription(">&lt;div class=&quot;qpp3&quot;&gt;&lt;div class=&quot;qpp4&quot;&gt;&lt;div class=&quot;qrbrdr1&quot;&gt;&lt;div class=&quot;qrbrdr2&quot;&gt;&lt;center&gt;&lt;img src=&quot;http://zuma.vip.warped.com/transparent_8x8.png&quot;&gt;&lt;br&gt;&lt;a title=&quot;http://stonedmotors.blogspot.com/2012/10/tao-machine.html&quot; href=&quot;http://stonedmotors.blogspot.com/2012/10/tao-machine.html&quot;&gt;&lt;img src=&quot;http://zuma.vip.warped.com/stonedmotors2.png&quot; border=&quot;0&quot;&gt;&lt;/a&gt;&lt;br&gt;&lt;img src=&quot;http://zuma.vip.warped.com/transparent_8x8.png&quot;&gt;&lt;/center&gt;&lt;/div&gt;&lt;/div&gt;&lt;img src=&quot;http://zuma.vip.warped.com/transparent_8x8.png&quot;&gt;&lt;br&gt;&lt;div class=&quot;a720&quot;&gt;&lt;div class=&quot;b720&quot;&gt;&lt;span class=&quot;tnr&quot;&gt;midnight&lt;/span&gt;&lt;br /&gt;&lt;i&gt;&quot;dirt-tired, greased &amp; wired, but the job&apos;s done, hey.&quot;&lt;/i&gt;&lt;br /&gt;&lt;br /&gt;the scattered tools upon the table, all in disarray. the wrenches, sockets, screwdrivers, extensions &amp; adaptors, nuts &amp; bolts &amp; washers scrounged from the floor and about all (mostly) gathered in coffee cans... the piles of parts; case halves, studs, con rods &amp; cranks, camshafts &amp; shims, heads, manifolds, oil radiators, fan housings, distributors, coils, voltage regulators, generators &amp; alternators, carbs &amp; pistons, fuel pumps, filters, trannies, CV joints, axles, brake shoes, fuses, spark plugs, batteries, mufflers, belts, pulleys, flywheels... the cans of mineral spirits, carb cleaner, oil &amp; gas; brake fluid... cleaning a set of wheel bearings w/ an air hose sets it spinning at umpteen hundred RPM. buckets of grease. pressure plates &amp; throw-out bearings. clamps &amp; hoses. breaker bars &amp; torgue wrenches. plastigauge. pedal clusters. cables. shifter plates &amp; bushings. tires, wheels, brake drums clanging, struck by a 5 pound sledge hammer. smoke from the ashtray curls up to the rafters. the coffee pot ticks. we laugh like mad children w/ dirt (like black soot) on our faces &amp; elbows &amp; old worn clothing in the midnight garage.&lt;/div&gt;&lt;/div&gt;&lt;img src=&quot;http://zuma.vip.warped.com/transparent_8x8.png&quot;&gt;&lt;div class=&quot;zim&quot;&gt;&lt;div class=&quot;im1&quot;&gt;&lt;div class=&quot;im2&quot;&gt;&lt;a title=&quot;960x640 version&quot; href=&quot;http://zuma.vip.warped.com/stomo8.png&quot;&gt;&lt;img src=&quot;http://zuma.vip.warped.com/stomo8_716x476.png&quot; border=&quot;0&quot;&gt;&lt;/a&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;img src=&quot;http://zuma.vip.warped.com/transparent_8x8.png&quot;&gt;&lt;div class=&quot;a720&quot;&gt;&lt;div class=&quot;b720&quot;&gt;the eternal engine that moves us. forward.&lt;br /&gt;&lt;br /&gt;&lt;i&gt;&quot;i could carve one from a rock...&quot;&lt;/i&gt;&lt;br /&gt;&lt;br /&gt;crank it over. snick it in gear. let out the clutch. foot on the gas in Wide Open Throttle.&lt;br /&gt;&lt;br /&gt;stand on it.&lt;br /&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;");
    item.setComments("http://zuma.livejournal.com/147000.html");
    item.setSecurity("public");
    item.setReplyCount("8");
    item.setCategory(new ArrayList<String>());

    Serializer serializer = new Persister();
    File result = new File("rss.xml");

    serializer.write(item, result);
} 
```

并得到：

```
<itemType>
   <guid isPermaLink="true">http://zuma.livejournal.com/147000.html</guid>
   <pubDate>Sun, 07 Oct 2012 06:43:24 GMT</pubDate>
   <title>tao machine</title>
   <link>http://zuma.livejournal.com/147000.html</link>
   <description>&gt;&amp;lt;div class=&amp;quot;qpp3&amp;quot;&amp;gt;&amp;lt;div class=&amp;quot;qpp4&amp;quot;&amp;gt;&amp;lt;div class=&amp;quot;qrbrdr1&amp;quot;&amp;gt;&amp;lt;div class=&amp;quot;qrbrdr2&amp;quot;&amp;gt;&amp;lt;center&amp;gt;&amp;lt;img src=&amp;quot;http://zuma.vip.warped.com/transparent_8x8.png&amp;quot;&amp;gt;&amp;lt;br&amp;gt;&amp;lt;a title=&amp;quot;http://stonedmotors.blogspot.com/2012/10/tao-machine.html&amp;quot; href=&amp;quot;http://stonedmotors.blogspot.com/2012/10/tao-machine.html&amp;quot;&amp;gt;&amp;lt;img src=&amp;quot;http://zuma.vip.warped.com/stonedmotors2.png&amp;quot; border=&amp;quot;0&amp;quot;&amp;gt;&amp;lt;/a&amp;gt;&amp;lt;br&amp;gt;&amp;lt;img src=&amp;quot;http://zuma.vip.warped.com/transparent_8x8.png&amp;quot;&amp;gt;&amp;lt;/center&amp;gt;&amp;lt;/div&amp;gt;&amp;lt;/div&amp;gt;&amp;lt;img src=&amp;quot;http://zuma.vip.warped.com/transparent_8x8.png&amp;quot;&amp;gt;&amp;lt;br&amp;gt;&amp;lt;div class=&amp;quot;a720&amp;quot;&amp;gt;&amp;lt;div class=&amp;quot;b720&amp;quot;&amp;gt;&amp;lt;span class=&amp;quot;tnr&amp;quot;&amp;gt;midnight&amp;lt;/span&amp;gt;&amp;lt;br /&amp;gt;&amp;lt;i&amp;gt;&amp;quot;dirt-tired, greased &amp;amp; wired, but the job&amp;apos;s done, hey.&amp;quot;&amp;lt;/i&amp;gt;&amp;lt;br /&amp;gt;&amp;lt;br /&amp;gt;the scattered tools upon the table, all in disarray. the wrenches, sockets, screwdrivers, extensions &amp;amp; adaptors, nuts &amp;amp; bolts &amp;amp; washers scrounged from the floor and about all (mostly) gathered in coffee cans... the piles of parts; case halves, studs, con rods &amp;amp; cranks, camshafts &amp;amp; shims, heads, manifolds, oil radiators, fan housings, distributors, coils, voltage regulators, generators &amp;amp; alternators, carbs &amp;amp; pistons, fuel pumps, filters, trannies, CV joints, axles, brake shoes, fuses, spark plugs, batteries, mufflers, belts, pulleys, flywheels... the cans of mineral spirits, carb cleaner, oil &amp;amp; gas; brake fluid... cleaning a set of wheel bearings w/ an air hose sets it spinning at umpteen hundred RPM. buckets of grease. pressure plates &amp;amp; throw-out bearings. clamps &amp;amp; hoses. breaker bars &amp;amp; torgue wrenches. plastigauge. pedal clusters. cables. shifter plates &amp;amp; bushings. tires, wheels, brake drums clanging, struck by a 5 pound sledge hammer. smoke from the ashtray curls up to the rafters. the coffee pot ticks. we laugh like mad children w/ dirt (like black soot) on our faces &amp;amp; elbows &amp;amp; old worn clothing in the midnight garage.&amp;lt;/div&amp;gt;&amp;lt;/div&amp;gt;&amp;lt;img src=&amp;quot;http://zuma.vip.warped.com/transparent_8x8.png&amp;quot;&amp;gt;&amp;lt;div class=&amp;quot;zim&amp;quot;&amp;gt;&amp;lt;div class=&amp;quot;im1&amp;quot;&amp;gt;&amp;lt;div class=&amp;quot;im2&amp;quot;&amp;gt;&amp;lt;a title=&amp;quot;960x640 version&amp;quot; href=&amp;quot;http://zuma.vip.warped.com/stomo8.png&amp;quot;&amp;gt;&amp;lt;img src=&amp;quot;http://zuma.vip.warped.com/stomo8_716x476.png&amp;quot; border=&amp;quot;0&amp;quot;&amp;gt;&amp;lt;/a&amp;gt;&amp;lt;/div&amp;gt;&amp;lt;/div&amp;gt;&amp;lt;/div&amp;gt;&amp;lt;img src=&amp;quot;http://zuma.vip.warped.com/transparent_8x8.png&amp;quot;&amp;gt;&amp;lt;div class=&amp;quot;a720&amp;quot;&amp;gt;&amp;lt;div class=&amp;quot;b720&amp;quot;&amp;gt;the eternal engine that moves us. forward.&amp;lt;br /&amp;gt;&amp;lt;br /&amp;gt;&amp;lt;i&amp;gt;&amp;quot;i could carve one from a rock...&amp;quot;&amp;lt;/i&amp;gt;&amp;lt;br /&amp;gt;&amp;lt;br /&amp;gt;crank it over. snick it in gear. let out the clutch. foot on the gas in Wide Open Throttle.&amp;lt;br /&amp;gt;&amp;lt;br /&amp;gt;stand on it.&amp;lt;br /&amp;gt;&amp;lt;/div&amp;gt;&amp;lt;/div&amp;gt;&amp;lt;/div&amp;gt;&amp;lt;/div&amp;gt;</description>
   <comments>http://zuma.livejournal.com/147000.html</comments>
   <category class="java.util.ArrayList"/>
   <lj:security xmlns:lj="http://www.livejournal.org/rss/lj/1.0/">public</lj:security>
   <lj:replyCount xmlns:lj="http://www.livejournal.org/rss/lj/1.0/">8</lj:replyCount>
</itemType> 
```

我注意到，如果未设置字段，我会遇到异常。所以我简单地设置了一切。然后我将 xml 编辑为如下所示：

```
<itemType>
   <guid isPermaLink="true">http://zuma.livejournal.com/147000.html</guid>
   <pubDate>Sun, 07 Oct 2012 06:43:24 GMT</pubDate>
   <title>tao machine</title>
   <link>http://zuma.livejournal.com/147000.html</link>
   <description>&gt;&amp;lt;div class=&amp;quot;qpp3&amp;quot;&amp;gt;&amp;lt;div class=&amp;quot;qpp4&amp;quot;&amp;gt;&amp;lt;div class=&amp;quot;qrbrdr1&amp;quot;&amp;gt;&amp;lt;div class=&amp;quot;qrbrdr2&amp;quot;&amp;gt;&amp;lt;center&amp;gt;&amp;lt;img src=&amp;quot;http://zuma.vip.warped.com/transparent_8x8.png&amp;quot;&amp;gt;&amp;lt;br&amp;gt;&amp;lt;a title=&amp;quot;http://stonedmotors.blogspot.com/2012/10/tao-machine.html&amp;quot; href=&amp;quot;http://stonedmotors.blogspot.com/2012/10/tao-machine.html&amp;quot;&amp;gt;&amp;lt;img src=&amp;quot;http://zuma.vip.warped.com/stonedmotors2.png&amp;quot; border=&amp;quot;0&amp;quot;&amp;gt;&amp;lt;/a&amp;gt;&amp;lt;br&amp;gt;&amp;lt;img src=&amp;quot;http://zuma.vip.warped.com/transparent_8x8.png&amp;quot;&amp;gt;&amp;lt;/center&amp;gt;&amp;lt;/div&amp;gt;&amp;lt;/div&amp;gt;&amp;lt;img src=&amp;quot;http://zuma.vip.warped.com/transparent_8x8.png&amp;quot;&amp;gt;&amp;lt;br&amp;gt;&amp;lt;div class=&amp;quot;a720&amp;quot;&amp;gt;&amp;lt;div class=&amp;quot;b720&amp;quot;&amp;gt;&amp;lt;span class=&amp;quot;tnr&amp;quot;&amp;gt;midnight&amp;lt;/span&amp;gt;&amp;lt;br /&amp;gt;&amp;lt;i&amp;gt;&amp;quot;dirt-tired, greased &amp;amp; wired, but the job&amp;apos;s done, hey.&amp;quot;&amp;lt;/i&amp;gt;&amp;lt;br /&amp;gt;&amp;lt;br /&amp;gt;the scattered tools upon the table, all in disarray. the wrenches, sockets, screwdrivers, extensions &amp;amp; adaptors, nuts &amp;amp; bolts &amp;amp; washers scrounged from the floor and about all (mostly) gathered in coffee cans... the piles of parts; case halves, studs, con rods &amp;amp; cranks, camshafts &amp;amp; shims, heads, manifolds, oil radiators, fan housings, distributors, coils, voltage regulators, generators &amp;amp; alternators, carbs &amp;amp; pistons, fuel pumps, filters, trannies, CV joints, axles, brake shoes, fuses, spark plugs, batteries, mufflers, belts, pulleys, flywheels... the cans of mineral spirits, carb cleaner, oil &amp;amp; gas; brake fluid... cleaning a set of wheel bearings w/ an air hose sets it spinning at umpteen hundred RPM. buckets of grease. pressure plates &amp;amp; throw-out bearings. clamps &amp;amp; hoses. breaker bars &amp;amp; torgue wrenches. plastigauge. pedal clusters. cables. shifter plates &amp;amp; bushings. tires, wheels, brake drums clanging, struck by a 5 pound sledge hammer. smoke from the ashtray curls up to the rafters. the coffee pot ticks. we laugh like mad children w/ dirt (like black soot) on our faces &amp;amp; elbows &amp;amp; old worn clothing in the midnight garage.&amp;lt;/div&amp;gt;&amp;lt;/div&amp;gt;&amp;lt;img src=&amp;quot;http://zuma.vip.warped.com/transparent_8x8.png&amp;quot;&amp;gt;&amp;lt;div class=&amp;quot;zim&amp;quot;&amp;gt;&amp;lt;div class=&amp;quot;im1&amp;quot;&amp;gt;&amp;lt;div class=&amp;quot;im2&amp;quot;&amp;gt;&amp;lt;a title=&amp;quot;960x640 version&amp;quot; href=&amp;quot;http://zuma.vip.warped.com/stomo8.png&amp;quot;&amp;gt;&amp;lt;img src=&amp;quot;http://zuma.vip.warped.com/stomo8_716x476.png&amp;quot; border=&amp;quot;0&amp;quot;&amp;gt;&amp;lt;/a&amp;gt;&amp;lt;/div&amp;gt;&amp;lt;/div&amp;gt;&amp;lt;/div&amp;gt;&amp;lt;img src=&amp;quot;http://zuma.vip.warped.com/transparent_8x8.png&amp;quot;&amp;gt;&amp;lt;div class=&amp;quot;a720&amp;quot;&amp;gt;&amp;lt;div class=&amp;quot;b720&amp;quot;&amp;gt;the eternal engine that moves us. forward.&amp;lt;br /&amp;gt;&amp;lt;br /&amp;gt;&amp;lt;i&amp;gt;&amp;quot;i could carve one from a rock...&amp;quot;&amp;lt;/i&amp;gt;&amp;lt;br /&amp;gt;&amp;lt;br /&amp;gt;crank it over. snick it in gear. let out the clutch. foot on the gas in Wide Open Throttle.&amp;lt;br /&amp;gt;&amp;lt;br /&amp;gt;stand on it.&amp;lt;br /&amp;gt;&amp;lt;/div&amp;gt;&amp;lt;/div&amp;gt;&amp;lt;/div&amp;gt;&amp;lt;/div&amp;gt;</description>
   <comments>http://zuma.livejournal.com/147000.html</comments>
   <lj:security xmlns:lj="http://www.livejournal.org/rss/lj/1.0/">public</lj:security>
   <lj:replyCount xmlns:lj="http://www.livejournal.org/rss/lj/1.0/">8</lj:replyCount>
</itemType> 
```

删除 ChannelType 值。当我试图读回它时：

```
ItemType read = serializer.read(ItemType.class, new File("rss.xml")); 
```

我得到：

```
Exception in thread "main" org.simpleframework.xml.core.ValueRequiredException: Unable to satisfy @org.simpleframework.xml.ElementList(entry=, name=, inline=false, data=false, empty=true, type=void, required=true) on field 'category' private java.util.List ItemType.category for class ItemType at line 1
    at org.simpleframework.xml.core.Composite.validate(Composite.java:644)
    at org.simpleframework.xml.core.Composite.readElements(Composite.java:449)
    at org.simpleframework.xml.core.Composite.access$400(Composite.java:59)
    at org.simpleframework.xml.core.Composite$Builder.read(Composite.java:1383)
    at org.simpleframework.xml.core.Composite.read(Composite.java:201)
    at org.simpleframework.xml.core.Composite.read(Composite.java:148)
    at org.simpleframework.xml.core.Traverser.read(Traverser.java:92)
    at org.simpleframework.xml.core.Persister.read(Persister.java:625)
    at org.simpleframework.xml.core.Persister.read(Persister.java:606)
    at org.simpleframework.xml.core.Persister.read(Persister.java:584)
    at org.simpleframework.xml.core.Persister.read(Persister.java:543)
    at org.simpleframework.xml.core.Persister.read(Persister.java:521)
    at org.simpleframework.xml.core.Persister.read(Persister.java:426)
    at Test.main(Test.java:31) 
```

所以基本上它要求所有字段都在那里。因此，您需要将`@Element`和`@ElementList(inline=false)`注释更改`@Element(required=false)`为`@ElementList(inline=false, required=false)`任何可选字段。

# objective-c - 如何在注册的点击次数后删除或停止表格视图中的按钮工作

> ID：13314270
> 
> 赞同：0
> 
> 时间：2012-11-09T19:01:09.870
> 
> 标签：objective-c, ios, uitableview

我在表格视图中有一个添加行的按钮。最多五行后，我想停止用户添加。目前，我在按钮收到 5 次点击后显示警报。

如何阻止用户在此之后使用按钮？设置为隐藏不会作为它的自定义子类工作，并且`property hidden`在类中找不到

```
- (void)viewDidLoad
{

[super viewDidLoad];

UILabel *titleLabel = [[UILabel alloc] initWithFrame:CGRectZero];
titleLabel.backgroundColor = [UIColor clearColor];
titleLabel.textColor = [UIColor whiteColor];
titleLabel.shadowColor = [UIColor darkGrayColor];
titleLabel.text = self.distributionBoard.dbRef;
titleLabel.font = [UIFont boldSystemFontOfSize:15.0f];
[titleLabel sizeToFit];
self.navigationItem.titleView = titleLabel;

self.navigationItem.rightBarButtonItem = [[UIBarButtonItem alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemDone target:self action:@selector(doneButtonPressed:)];

// Add new appliance button to the table view's footer view
UIView *footerView = [[UIView alloc] initWithFrame:CGRectMake(10.0f, 0, 300.0f, 100.0f)];  
footerView.backgroundColor = [UIColor clearColor];
UIButton *newBoardButton = [UIButton buttonWithType:UIButtonTypeContactAdd];
CGRect buttonFrame = newBoardButton.frame;
buttonFrame.origin.x = footerView.frame.size.width - buttonFrame.size.width;
newBoardButton.frame = buttonFrame;
[newBoardButton addTarget:self action:@selector(addCircuitButtonPressed:)    forControlEvents:UIControlEventTouchUpInside];
[footerView addSubview:newBoardButton];
self.tableView.tableFooterView = footerView;

} 
```

......

```
 ////limit to five appliances

 - (void)addCircuitButtonPressed:(id)sender {
LogCmd();
Circuit *circuit = [[ICCircuitManager manager] newCircuit];
circuit.distributionBoard = self.distributionBoard;
circuit.circuitReference = [NSString stringWithFormat:@"%d", [self.circuits count] + 1];
circuit.createdAt = [NSDate date];
circuit.modifiedAt = [NSDate date];
[self.distributionBoard addCircuitsObject:circuit];
[self loadData];
[self.tableView reloadData];

{
    m_buttonTouchCount++;
    if ( m_buttonTouchCount == 4)

    {
       UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"iCertifi"
                                                        message:@"Maximum number of appliances reached"
                                                       delegate:nil
                                              cancelButtonTitle:@"Ok"
                                              otherButtonTitles:nil];
       [alert show];
       // m_buttonTouchCount = 0; // reset to 0 here if required.
    }

  }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T19:13:57.473

在您拥有 AlertView 的地方，您可以键入以下代码来禁用按钮：

```
[(UIButton *)sender setEnabled:NO]; 
```

或隐藏按钮：

```
 [(UIButton *)sender setHidden:YES]; 
```

# list - 无法让 scala 演员在一定范围内并行工作

> ID：13314278
> 
> 赞同：0
> 
> 时间：2012-11-09T19:02:00.337
> 
> 标签：list, scala, parallel-processing, actor

计算机网络软件开发课程的家庭作业，教授让我们为端口 1-1024 构建一个端口扫描器，以便在本地主机上运行。练习的重点是使用参与者演示任务级别的并行性。教授提供了按顺序扫描每个端口的代码。我们将创建一个并行执行此操作的版本，其中每个处理器或系统可用的超线程都有一个参与者。目标是获得时间来完成对所有端口 1-1024 的完整扫描，并将并行扫描的结果与串行扫描的结果进行比较。这是我的并行扫描代码：

```
import java.net.Socket
import scala.actors._
import Actor._
import scala.collection.mutable.ArrayBuffer

object LowPortScanner {

  var lastPort = 0
  var openPorts = ArrayBuffer[Int]()
  var longestRunTime = 00.00
  var results = List[Tuple3[Int, Range, Double]]()

  val host = "localhost"
  val numProcs = 1 to Runtime.getRuntime().availableProcessors()
  val portsPerProc = 1024 / numProcs.size
  val caller = self

  def main(args: Array[String]): Unit = {

    //spawn an actor for each processor that scans a given port range
    numProcs.foreach { proc =>
      actor {
        val portRange: Range = (lastPort + 1) to (lastPort + portsPerProc)
        lastPort = lastPort + portsPerProc
        caller ! scan(proc, portRange)
      }
    }

    //catch results from the processor actors above
    def act {
      loop {
        reactWithin(100) {
          //update the list of results returned from scan
          case scanResult: Tuple3[Int, Range, Double] =>
            results = results ::: List(scanResult)

          //check if all results have been returned for each actor
          case TIMEOUT =>
            if (results.size == numProcs.size) wrapUp

          case _ =>
            println("got back something weird from one of the port scan actors!")
            wrapUp
        }
      }
    }

    //Attempt to open a socket on each port in the given range
    //returns a Tuple3[procID: Int, ports: Range, time: Double
    def scan(proc: Int, ports: Range) {
      val startTime = System.nanoTime()
      ports.foreach { n =>
        try {
          println("Processor " + proc + "is checking port " + n)

          val socket = new Socket(host, n)

          //println("Found open port: " + n)
          openPorts += n

          socket.close
        } catch {
          case e: Exception =>
          //println("While scanning port " + n + " caught Exception: " + e)
        }
      }
      (proc, ports, startTime - System.nanoTime())
    }

    //output results and kill the main actor
    def wrapUp {
      println("These are the open ports in the range 1-1024:")
      openPorts.foreach { port => println(port) }
      results.foreach { result => if (result._3 > longestRunTime) { longestRunTime = result._3} }
      println("Time to scan ports 1 through 1024 is: %3.3f".format(longestRunTime / 1000))
      caller ! exit
    }
  }
} 
```

我有一个四核 i7，所以我的 numProcs = 8。在这个硬件平台上，每个 proc actor 应该扫描 128 个端口（1024/8 = 128）。我的意图是让 proc1 演员扫描 0 - 128，proc2 应该扫描 129-256，等等......但是，这不是正在发生的事情。一些演员最终与其他演员在同一范围内工作。下面的输出示例说明了这个问题：

处理器 2 正在检查端口 1
处理器 7 正在检查端口 385
处理器 1 正在检查端口 1
处理器 5 正在检查端口 1
处理器 4 正在检查端口 1
处理器 8 正在检查端口 129
处理器 3 正在检查端口 1
处理器 6 正在检查端口 257
处理器 1正在检查端口 2
处理器 5 正在检查端口 2
处理器 1 正在检查端口 3
处理器 3 正在检查端口 2
处理器 5 正在检查端口 3
处理器 1 正在检查端口 4

**编辑**

最终“工作”代码：

```
import java.net.Socket
import scala.actors._
import Actor._
import scala.collection.mutable.ArrayBuffer

object LowPortScanner {

  var lastPort = 0
  var openPorts = ArrayBuffer[Int]()
  var longestRunTime = 00.00
  var results = List[Tuple3[Int, Range, Double]]()

  val host = "localhost"
  val numProcs = 1 to Runtime.getRuntime().availableProcessors()
  val portsPerProc = 1024 / numProcs.size
  val caller = self
  val procPortRanges = numProcs.foldLeft(List[Tuple2[Int, Range]]()) { (portRanges, proc) =>
    val tuple2 = (proc.toInt, (lastPort + 1) to (lastPort + portsPerProc))
    lastPort += portsPerProc
    tuple2 :: portRanges
  }

  def main(args: Array[String]): Unit = {

    //spawn an actor for each processor that scans a given port range
    procPortRanges.foreach { proc =>
      actor {
        caller ! scan(proc._1, proc._2)
      }
    }

//catch results from the processor actors above
def act {
  loop {
    reactWithin(100) {
      //update the list of results returned from scan
      case scanResult: Tuple3[Int, Range, Double] =>
        results = results ::: List(scanResult)

      //check if results have been returned for each actor
      case TIMEOUT =>
        if (results.size == numProcs.size) wrapUp

      case _ =>
        println("got back something weird from one of the port scan actors!")
        wrapUp
    }
  }
}

    //Attempt to open a socket on each port in the given range
    //returns a Tuple3[procID: Int, ports: Range, time: Double
    def scan(proc: Int, ports: Range) {
      val startTime = System.nanoTime()
      ports.foreach { n =>
        try {
          println("Processor " + proc + "is checking port " + n)

          val socket = new Socket(host, n)

          //println("Found open port: " + n)
          openPorts += n

          socket.close
        } catch {
          case e: Exception =>
          //println("While scanning port " + n + " caught Exception: " + e)
        }
      }
      (proc, ports, startTime - System.nanoTime())
    }

    //output results and kill the main actor
    def wrapUp {
      println("These are the open ports in the range 1-1024:")
      openPorts.foreach { port => println(port) }
      results.foreach { result => if (result._3 > longestRunTime) { longestRunTime = result._3} }
      println("Time to scan ports 1 through 1024 is: %3.3f".format(longestRunTime / 1000))
      caller ! exit
    }
  }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-09T19:13:26.833

> 在这个硬件平台上，每个 proc actor 应该扫描 128 个端口（1024/8 = 128）。

除了你有

> ```
> val portsPerProc = numProcs.size / 1024 
> ```

并且 8/1024 为 0。请注意，您还有一个非一的错误，这会导致每个参与者扫描的端口比 多 1 个`portsPerProc`，它应该扫描`lastPort to (lastPort + portsPerProc) - 1`或`(lastPort + 1) to (lastPort + portsPerProc)`。

对于未来，如果您有不同的问题，您应该单独提出 :) 但是这里有一个非常明显的竞争条件：所有参与者都在尝试执行

```
 val portRange: Range = (lastPort + 1) to (lastPort + portsPerProc)
    lastPort = lastPort + portsPerProc 
```

同时。想想当（例如）演员 1 和 2 在任何演员到达第二行之前执行第一行时会发生什么。

# c# - 禁用键盘快捷键

> ID：13314280
> 
> 赞同：0
> 
> 时间：2012-11-09T19:02:12.487
> 
> 标签：c#, winforms, keyboard-shortcuts

使用 C#，我在不显示工具栏的情况下最大化了一个表单，但我需要禁用所有键盘快捷键（`Alt`+ `F4`、`Ctrl`+ `Shift`+`Esc`等），包括`Ctrl`+ `Alt`+ `Del`。我可以这样做吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T19:43:45.157

您可能想要使用 OnPreviewKeyDown（在 WPF 中）事件。您可以在其中根据组合键识别用户输入和控制的内容。

# html - 在 Chrome PDF 查看器中加载时 PDF 链接卡住

> ID：13314281
> 
> 赞同：3
> 
> 时间：2012-11-09T19:02:17.417
> 
> 标签：html, django, google-chrome, anchor, httpresponse

在我们正在构建[http://ovsd.nutrislice.com/wellness/](http://ovsd.nutrislice.com/wellness/)的网站页面上，pdf 下载链接（“下载问题”）在 Chrome 的 PDF 查看器中加载时卡住，但在所有其他浏览器中通过触发下载。右键单击+“另存为”在 Chrome 中有效。我意识到 Chrome 是唯一具有内置默认 pdf 查看器的浏览器。

我想我们可以指示人们右键单击然后“另存为”，但我想看看是否有人可以看到 html 或服务器响应中的问题，这会导致 chrome 像那样失败。

它不是位于某处服务器上的传统直通文件下载。我们使用 Heroku，我目前正在将 pdf 存储在数据库中（我意识到这样做的缺点，但它是一个比目前在 S3 上管理异地文件更简单的系统）。我正在通过 Django View 动态生成响应，所以我想知道响应标头中是否缺少某些内容。

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-09T19:24:17.747

看起来像一个糟糕的内容类型：

```
Content-Type:('application/pdf', None) 
```

检查您为响应分配内容类型的代码。看起来你正在发送一个 tuple 而不是 just `application/pdf`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-09T19:28:37.163

就像提到的@dgel 一样，您的内容类型不正确：

```
$ curl -I http://ovsd.nutrislice.com/dbfiles/cms/resources/Vol5_Issue1_5_Dos_and_Donts_for_Supermarket_Survival.pdf
HTTP/1.1 200 OK
Access-Control-Allow-Methods: POST,GET,OPTIONS,PUT,DELETE
Access-Control-Allow-Origin: *
Cache-Control: max-age=90000
Content-Type: ('application/pdf', None)       # <- Incorrect
Date: Fri, 09 Nov 2012 19:25:06 GMT
Expires: Fri, 09 Nov 2012 23:20:28 GMT
Last-Modified: Thu, 08 Nov 2012 22:20:28 GMT
Server: gunicorn/0.14.6
Connection: keep-alive 
```

`Content-Length`此外，添加标题可能是个好主意。

# heuristics - Reversi（奥赛罗）想法需要启发式函数

> ID：13314288
> 
> 赞同：9
> 
> 时间：2012-11-09T19:02:36.450
> 
> 标签：heuristics, reversi

我刚刚研究了[启发式函数](http://en.wikipedia.org/wiki/Heuristic_function)，但我找不到用于 reversi（奥赛罗）的启发式函数的想法，我只需要一个好主意来对棋盘的某些状态进行分级

我想过：

1.  计算移动次数
2.  计算光盘的数量
3.  并计算角落中的光盘数量并给他们更好的分数，

不知道好不好。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-10T13:20:05.243

不，这还不够好。磁盘的数量特别无用 - 尽管游戏的目标是收集尽可能多的磁盘，但除了最后一个之外的任何移动的计数都是毫无意义的。以下是您应该考虑的更多事项：

*   计算移动的数量可以让您衡量*即时移动性*；在其他条件相同的情况下，您可以采取能够开辟更多其他举措的举措的情况应该受到青睐。您还需要测量*潜在的移动性*- 靠近开放空间的对手磁盘的数量。
*   X 方块 - B2、B7、G2 和 G7。将你的圆盘提前放在那里几乎肯定会放弃相邻的角落，所以你的启发式应该给他们高负权重，至少在前 40 步中
*   C 方格 - A2、A7、B1、G1、H2、H7、B8 和 G8。它们让对手可以进入角落，因此它们的值应该不同于其他方格的值，至少当边上的圆盘少于五个时

[您可以在此处](http://home.datacomm.ch/t_wolf/tw/misc/reversi/html/index.html)阅读有关构建相对强大（在其能够击败人类新手的能力）黑白棋小程序中使用的策略的相对简短描述。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-11-10T12:12:04.130

一个好的黑白棋/黑白棋启发式函数需要捕捉位置的更多方面，包括：

*   硬币平价
*   移动性（可能移动的数量）
*   弯道囚禁（弯道稳定/不能转弯，特别重要）
*   稳定性（测量圆盘免于转动）

我已经讨论了这些方面并在这里提供了一个很好的启发式函数的实现：http: [//kartikkukreja.wordpress.com/2013/03/30/heuristic-function-for-reversiothello/](http://kartikkukreja.wordpress.com/2013/03/30/heuristic-function-for-reversiothello/)

* * *

## 回答 #3

> 赞同：-7
> 
> 时间：2012-11-09T20:50:54.273

你可以试试。没有什么比得到答案的数据更重要了。

假设您使用合理的软件工程实践并抽象启发式，您可以很快检查它。

# qt - 覆盖文本文件与追加

> ID：13314289
> 
> 赞同：7
> 
> 时间：2012-11-09T19:02:36.687
> 
> 标签：qt, qfile

我正在寻找覆盖文本文件中的数据，但我似乎所能做的就是附加到它

```
mFile.open(QFile::ReadWrite)

QTextStream in(&mFile);
QString first = in.readLine(); //discard the headers
QString dataLine = in.readLine(); //headers
QStringList sql_row = dataLine.split("\t"); //first row (sake of proj only 1 row)

if(sql_row[1].isEmpty()) //no user name registered
{
    QByteArray user= getenv("USERNAME"); //for windows
    if(user.isEmpty())
        {
                user = getenv("USER"); ///for MAc or Linux
            }
    dataLine = dataLine.insert(dataLine.indexOf("\t")+ 1,user);

    in << first << endl << dataLine << endl;
    mFile.flush();
    mFile.close(); 
```

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-11-10T00:13:23.370

改变

```
mFile.open(QFile::ReadWrite); 
```

到

```
mFile.open(QIODevice::ReadWrite | QIODevice::Truncate | QIODevice::Text); 
```

QIODevice 与 QFile 的区别不是必需的，但我个人更喜欢使用基类。该`Truncate`标志将覆盖（即删除）现有文件。

或者，您可以按照[其他建议](https://stackoverflow.com/a/13314370/1666676)直接使用 QTextStream 的构造函数之一打开您的文本文件。相同的[`QIODevice::OpenMode`](https://doc.qt.io/qt-5/qiodevice.html#OpenModeFlag-enum)约定适用。这仅在`mFile`is a `FILE`object 而不是 a时才有效`QFile`，在您的示例中并非如此。

* * *

给初学者的一些附加说明。

**相关注释1**

您没有问过这个问题，但我还添加了`QIODevice::Text`标志以确保`\n`在`\r\n`您使用[`endl`](http://doc.qt.io/qt-5/qtextstream.html#endl).

一个非常常见的错误是使用`\r\n`AND ，这会导致文本文件在 Windows 上`QIODevice::Text`具有双返回。`\r\r\n`只需`QIODevice::Text`在打开时使用，`\n`或者`endl`，您将永远不会遇到这个问题。

**相关注释2**

使用[QTextStream::endl](http://doc.qt.io/qt-5/qtextstream.html#endl)`flush()`每次都会自动调用。如果您的循环很大，请`"\n"`改为使用以防止减速，除非您确实需要刷新每一行。当缓冲区已满或关闭时，流将自动写入磁盘。

[QFile::close()](https://doc.qt.io/qt-5/qfiledevice.html#close)也调用`flush()`，这使您`mFile.flush()`最终变得多余。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-11-09T19:08:30.983

使用 QTextStream 的重载构造函数：

```
QTextStream in(&mFile, QIODevice::ReadWrite | QIODevice::Truncate); 
```

将`QIODevice::Truncate`删除文件的所有先前内容，`QIODevice::ReadWrite`并将打开它以进行读写访问。

# c# - 获取当前类名，包括父类名？

> ID：13314290
> 
> 赞同：4
> 
> 时间：2012-11-09T19:02:37.290
> 
> 标签：c#, .net

如果我有一个从 A 继承的 B 类和 C 类，有没有比使用 StackFrame 的 GetFileName() 更简单的方法（然后解析出 ClassName.cs 字符串）？

如果我使用 this.GetType().Name，当代码在父类中执行时它不会返回“A”。

**示例代码**

```
namespace StackOverflow.Demos
{
    class Program
    {
        public static void Main(string[] args)
        {
            B myClass = new C();
            string containingClassName = myClass.GetContainingClassName();
            Console.WriteLine(containingClassName); //should output StackOverflow.Demos.B
            Console.ReadKey();
        }
    }

    public class A { public A() { } }
    public class B : A { public B() { } }
    public class C : B { public C() { } }

} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-09T19:05:05.247

```
var yourType = GetType();
var baseType = yourType.BaseType; 
```

或者：

```
var currentTypeName = new StackFrame(1, false).GetMethod().DeclaringType.Name; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T19:07:56.720

我使用`myObject.GetType().FullName`which 返回类的完全限定名称。对于您的场景，您可以使用`myObject.GetType().BaseType.FullName`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-09T21:18:50.370

当您说`GetType()`或等效`this.GetType()`时，您将获得该类的实际类型。例如

```
class A
{
  public void Test()
  {
    Console.WriteLine(GetType().Name);
  }
}

class B : A
{
} 
```

然后：

```
var myB = new B();
myB.Test();   // writes B to the console 
```

我想这就是[多态性](http://en.wikipedia.org/wiki/Polymorphism_%28computer_science%29)的全部意义所在。

如果你想要 always `A`，没有多态性，只需说：

```
class A
{
  public void Test()
  {
    Console.WriteLine(typeof(A).Name);
  }
}

class B : A
{
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-09T19:08:52.097

**选项 1 :: 获取“容器”类：**

```
/**CODE**/

    public static void Main(string[] args)
    {
        B c = new C();
        Test(c);
        Console.ReadKey();
    }
    public static void Test(A a) { Console.WriteLine(typeof(A).ToString()); }
    public static void Test(B b) { Console.WriteLine(typeof(B).ToString()); }
    public static void Test(C c) { Console.WriteLine(typeof(C).ToString()); }

/**OUTPUT**/

    StackOverflow.Demos.B 
```

**选项 2 :: 获取“容器”类：**

```
/**CODE**/

    class Program
    {
        public static void Main(string[] args)
        {
            B myClass = new C();
            Console.WriteLine(myClass.GetContainerType()); //should output StackOverflow.Demos.B
            Console.ReadKey();
        }
    }

    public interface IGetContainerType
    {
        Type GetContainerType();
    }

    public class A: IGetContainerType 
    { 
        public A() { }
        public Type GetContainerType()
        {
            return typeof(A);
        }
    }
    public class B : A
    {
        public B() { }
        public new Type GetContainerType()
        {
            return typeof(B);
        }
    }
    public class C : B
    {
        public C() { }
        public new Type GetContainerType()
        {
            return typeof(C);
        }
    }

/**OUTPUT**/

    StackOverflow.Demos.B 
```

**回答相似但不同的问题；获取实例类/完整层次结构：**

```
/**CODE**/

    class Program
    {

        public static void Main(string[] args)
        {
            C c = new C();
            Type myType = c.GetType();
            while(myType != null)
            {
                Console.WriteLine(myType);
                myType = myType.BaseType;
            }
            Console.ReadKey();
        }
    }

/**OUTPUT**/

    StackOverflow.Demos.C
    StackOverflow.Demos.B
    StackOverflow.Demos.A
    System.Object 
```

# wcf - Linq 与实体

> ID：13314292
> 
> 赞同：1
> 
> 时间：2012-11-09T19:02:44.007
> 
> 标签：wcf, linq, silverlight, entities

我开始使用silverlight 5 和wcf ria 开发一个系统。我使用 Visual Studio 2010，代码在 Visual Basic 中。在我的应用程序中，我有一张桌子`guiasidiomas`。这是一个非常简单的表格：

*   ID
*   伊德吉亚
*   成语

在应用程序中，我更改`getguiasidiomas`了域服务生成的查询

```
Public Function GetGuiasIdiomas(ByVal idProcurado As String) AsIQueryable(Of GuiasIdioma)
    Return Me.ObjectContext.GuiasIdiomas.Where(Function(c) (c.idGuia).ToString = idProcurado)
End Function 
```

我插入了一个 where 以便按给定的 idguia 进行过滤。那就是有问题的查询。如果你能帮助我，我将不胜感激。当我运行查询时，我得到：

> SCRIPT5022：Silverlight 应用程序代码中未处理的错误：4004
> 类别：ManagedRuntimeError
> 消息：System.ServiceModel.DomainServices.Client.DomainOperationException：查询“GetGuiasIdiomas”的加载操作失败。LINQ to Entities 无法识别方法“System.String ToString()”方法，并且该方法无法转换为存储表达式。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T19:12:18.410

Linq-to-Entities 不能`.ToString()`直接转换为 SQL，因此您不能在`WHERE`子句中使用它。这里有两个选项：

1.  转换`idProcurado`为相同的数据类型`idGuia`并直接比较
2.  从数据库中提取所有实体（例如通过调用`.AsEnumerable()`）并与对象列表进行比较。

我猜 1) 将通过仅拉回一个或少数实体来为您提供更好的性能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T19:07:13.073

正如您的错误消息所述，linq to entity 不支持`ToString`. 您可以在将其与 linq to 实体一起使用之前准备字符串列表。

# c++ - ZeroMQs 路由器-经销商模式。如何处理客户地址？

> ID：13314295
> 
> 赞同：0
> 
> 时间：2012-11-09T19:02:54.843
> 
> 标签：c++, c, network-programming, zeromq

我使用 0MQ 的路由器经销商模式。现在我想存储客户的地址。我知道来自客户端的第一条消息是地址，我猜是 IP + portno。或者更确切地说`recv()`，来自路由器套接字的地址放在接收到的数据包的前面。但是我如何处理这个地址，例如打印出来或存储它以供进一步传出消息？它是什么类型的？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-21T07:18:06.330

这是对此的指南解释：http: [//zguide.zeromq.org/page :all#The-Request-Reply-Mechanisms](http://zguide.zeromq.org/page:all#The-Request-Reply-Mechanisms)

ROUTER 管理一组连接，并为每个连接保留一个“身份”，它是一个随机数，就像一个句柄。它在每条消息上告诉你这个身份，作为第一帧。这是一个二进制值，因此您不能按原样打印它。

DEALER 可以通过在连接时告诉它“使用此 ID”来覆盖 ROUTER 的内部身份。这就是 zmq_setsockopt ZMQ_IDENTITY 选项的作用。当节点有一些唯一的、通常是字符串的、对应用程序有意义的 ID 时，我们会使用它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-10T01:21:37.120

消息的第一部分是发送者（经销商）的身份，您可以使用[zmq_setsockopt](http://api.zeromq.org/2-2%3azmq-setsockopt)功能在经销商端设置（在连接到路由器之前）。这是一个最大 255 字符长的字符串。如果你不设置它，会有一些随机的独特的东西，从#0 char 开始。

所以默认情况下它不是您的经销商的 ip+port，但如果您愿意，您可以将这些信息放在那里。

# php - 文件被 cURL 截断

> ID：13314298
> 
> 赞同：1
> 
> 时间：2012-11-09T19:03:08.667
> 
> 标签：php, curl

我正在使用以下方法从 url 获取 JSON。当我在 php shell 中输出 json 时它可以工作，但在网站上，输出被截断。有没有解释。这是我要检索的网址：[http ://energylens.sfsprod.is4server.com:8080/proc/slope_intercept_tester](http://energylens.sfsprod.is4server.com:8080/proc/slope_intercept_tester)

```
function get($url){     
  $curl_handle=curl_init();           
  curl_setopt($curl_handle,CURLOPT_URL,$url);     
  curl_setopt($curl_handle,CURLOPT_HTTPGET,1);     
  curl_setopt($curl_handle,CURLOPT_CONNECTTIMEOUT,0);          
  curl_setopt($curl_handle,CURLOPT_RETURNTRANSFER,1);          
  $reply = curl_exec($curl_handle);     
  curl_close($curl_handle);                                                               
  return $reply;                                             
} 
```

这是我截断的输出：

值-p1.value)/(p2.ts-p1.ts); } return '错误：未定义的数据点参数'; }; state.intercept = function(slope,p1){ if(typeof p1 != 'undefined' && typeof p1.value != 'undefined' && typeof p1.ts != 'undefined'){ return p1.value - (slope* p1.ts); } return '错误：未定义的数据点参数'; }; } if(typeof state.multibuf == 'undefined'){ state.multibuf = new Object(); } outObj.inputs = new Array(); 变量注释=新对象（）；for(i=0; i=2){ for(j=0; j 未定义的数据点参数'; }; } if(typeof state.multibuf == 'undefined'){ state.multibuf = new Object(); } outObj.inputs = new Array(); 变量注释=新对象（）；for(i=0; i=2){ for(j=0; j 未定义的数据点参数'; }; } if(typeof state.multibuf == 'undefined'){ state.multibuf = new Object(); } outObj.inputs = new Array(); 变量注释=新对象（）；for(i=0; i=2){ for(j=0; j

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T19:20:11.540

那是一个带有 Javascript 的 JSON，你用 php json_decode 解码了 JSON 吗？

查看浏览器源文件，它可能都在那里，但被浏览器隐藏了。

# knockout.js - Knockout KoGrid：如何在网格行中使用选择选项？

> ID：13314299
> 
> 赞同：1
> 
> 时间：2012-11-09T19:03:10.710
> 
> 标签：knockout.js, kogrid

我已经使用下面的模板成功地将一行上的一个单元格设置为一个选择选项：

```
<div data-bind="kgCell: $cell"> 
<select data-mini="true" data-bind="options: $cellValue, event : { change : function(data, event) { mymodel.gridCallBack(data, event, $cell, $cellValue); } } "> <option value="undefined">Selecione...</option> 
</select> 
</div> 
```

但是我一直无法找出选择框的值。有没有办法可以设置一些东西，以便我能够知道特定单元格的每行选择的值绑定？

奥古斯托

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-10T01:56:19.283

通常你想要的是'options'是一些数组，并且你使用'value'绑定来保持你的viewmodel与选择框同步。然后，当用户选择不同的选项时，您可以从您放入“值”绑定的同一个可观察对象中获取更新的值。

至于事件处理程序 - 第一个“数据”参数将是 koGrid 行的“视图模型”，从那里很容易访问该行的 VM 数据（例如`data.name()`）。

这是一个简单的例子：（这里的JSFiddle：http: [//jsfiddle.net/qjNUQ/1/](http://jsfiddle.net/qjNUQ/1/)）

**HTML：**

```
<script type="text/html" id="tmpl">
    <div data-bind="kgCell: $cell"> 
        <select data-mini="true" data-bind="options: $root.availableTypes, 
            value: $cellValue, 
            optionsCaption: 'Selecione...', 
            event: { change: $root.typeChanged }"></select> 
    </div>
</script>

<div id="grid" data-bind="koGrid: { 
    data: items,
    columnDefs: 
        [{field: 'name', width: 120}, 
         {field: 'type', cellTemplate: 'tmpl', width: 120}],
    autogenerateColumns: false
}"></div> 
```

**JS：**

```
function Item(item)
{
    var self = this;
    this.name = ko.observable(item.name);
    this.type = ko.observable(item.type);
}

function VM() {
    var self=this;

    this.availableTypes = ['weapon', 'armour', 'food', 'document', 'potion'];

    this.items = ko.observableArray([
        new Item({ name: 'sword', type: 'weapon' }), 
        new Item({ name: 'city map', type: 'document' }),
        new Item({ name: 'healing cider', type: 'potion' }),
        new Item({ name: 'new item' })
    ]);    

    this.typeChanged = function(itemRow, event) {        

        console.log( 'type changed to ', itemRow.type(), 
                     ', for item: ', itemRow.name() );

    }
};

ko.applyBindings( new VM() );​ 
```

# jquery - 努力使用 jQuery“on”事件来应用角

> ID：13314302
> 
> 赞同：0
> 
> 时间：2012-11-09T19:03:49.233
> 
> 标签：jquery, coffeescript

我将 jQuery 角插件应用于这样的类：

```
$(".corner").corner() 
```

在我用 Ajax 刷新屏幕之前效果很好。我正在尝试使用新`.on()`函数来应用它，以便具有该类的元素始终具有圆角。所以我尝试了这个（CoffeeScript）：

```
$("body").on "load", ".corner", ->
  $(this).corner() 
```

失败。尝试了它的几种变体。所有的失败。不可能这么难，我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T19:20:00.820

我的建议是使用[livequery](http://docs.jquery.com/Plugins/livequery)

```
$(".corner").livequery ->
  $(this).corner() 
```

这将在页面加载以及任何新创建的元素时触发corner()。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T19:08:22.977

我认为该`load`事件不会`body`在成功的 ajax 调用上触发。

我不知道coffeescript，但你可以使用调用的全局ajax事件[`.ajaxSuccess()`](http://api.jquery.com/ajaxSuccess/) 来监听成功的ajax调用，然后重新应用插件：

```
$('body').ajaxSuccess(function() {
    $(this).find('.corner').corner();
}); 
```

请注意，这可能会导致多次初始化，请确保插件可以处理或自行检查。

# ios - AFNetworking的AFHTTPClient如何调试http请求？

> ID：13314305
> 
> 赞同：4
> 
> 时间：2012-11-09T19:03:52.620
> 
> 标签：ios, logging, httpwebrequest, sinatra, afnetworking

我无法让 AFNetworking 与 Web 服务成功通信。有没有办法注销（或以其他方式查看）它正在发送的确切 http 请求？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-10T00:00:46.650

您应该查看[AFHTTPRequestOperationLogger](https://github.com/AFNetworking/AFHTTPRequestOperationLogger)，它侦听操作开始和结束时发送的通知，并以可配置的详细程度将它们注销。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-09T20:27:43.017

我真的很喜欢[Charles](http://www.charlesproxy.com)在使用模拟器时观察网络流量。

# android - MapView 如何检测点击覆盖并禁用另一个覆盖

> ID：13314306
> 
> 赞同：0
> 
> 时间：2012-11-09T19:03:59.390
> 
> 标签：android, overlay, android-mapview

我在 MapView 中有两个叠加层

overlay 1 - 它是 Overlay 的子类，它使用 onTouchEvent 方法绘制用户点击手指的点。

Overlay 2 - 它是 ItemizedOverlay 的子类，它有很多项。如果用户点击一个项目，它会改变颜色（使用 onTap 方法）

如果用户点击有 Overlay 2 的 item 的点，它也会绘制覆盖 1。

我想要做的是，如果在覆盖 2 的项目上有点击，它不应该影响覆盖 1。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T20:20:01.857

> 我想要做的是，如果在覆盖 2 的项目上有点击，它不应该影响覆盖 1。

您无法控制何时告诉您的叠加层进行绘制。确保您所绘制的始终是您想要的，这取决于您。

# html - 仅使用 css 的内联样式

> ID：13314308
> 
> 赞同：0
> 
> 时间：2012-11-09T19:04:08.547
> 
> 标签：html, css

我有一些代码是一个简单的 div，带有一个 CSS 样式表，它具有：

```
#upgrade-message {
   margin: 15px 0px;
   padding: 15px 10px 15px 50px;
   background-repeat: no-repeat;
   background-position: 10px center; 
   color: #00529B; 
   background-color: #BDE5F8;
   background-image: url('../../../../templates/yoo_vanilla/images/typography/box_info.png');
   display: block;
   clear: left;
   float: right;
}

#upgrade-message a:link {
   color: black;
} 
```

代码是（在 php 中，但你明白了）：

```
echo "<div id=\"upgrade-message\">A message: <a href=\"ppay\">Upgrade</a> now!</div>"; 
```

我的 css 的 a:link 部分没有被应用。基本上我只想将“升级”文本更改为黑色。如果我放置一个内联样式，它会很好用。

当我使用 Firebug 进行检查时，我的网站上看不到任何冲突，并且 css 的其他部分`upgrade-message`正在应用。我也在萤火虫中看到了css，但它似乎并不适用。我什至尝试过这个[小提琴](http://jsfiddle.net/DDp5r/)以确保它是正确的语法。

任何人都可以解释为什么`a:link`没有应用 css 吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-09T19:09:25.207

也许您已经访问过该链接？所以没有应用CSS。利用

```
#upgrade-message a { } 
```

或用于现代浏览器或更兼容性：

```
#upgrade-message a:link,
#upgrade-message a:hover,
#upgrade-message a:visited,
#upgrade-message a:active {
    /* ... */
} 
```

# version-control - 我需要向 Mercurial 添加一个文件，但不跟踪它的更改

> ID：13314309
> 
> 赞同：0
> 
> 时间：2012-11-09T19:04:13.967
> 
> 标签：version-control, mercurial, powerbuilder

我知道模板。我知道这已经被问过（[这里](https://stackoverflow.com/questions/2856571/mercurial-how-to-ignore-changes-to-a-tracked-file "Mercurial：如何忽略对跟踪文件的更改")和[这里](https://stackoverflow.com/questions/6614978/ignore-future-changes-to-a-file-in-mercurial-but-still-track-it "忽略 Mercurial 中文件的未来更改，但仍跟踪它")）。请让我详细解释一下我的情况，希望您能理解我为什么再次问这个问题。

我使用名为[PowerBuilder](http://www.sybase.com/products/modelingdevelopment/powerbuilder "Sybase PowerBuilder 主页")的 IDE（和语言） 。PowerBuilder (PB) 将源代码和二进制目标代码一起存储在 PBL (pibble) 文件中。一个 PBL 可以包含多个类的源代码。因此，将 PBL 置于版本控制之下是不切实际的。应该独立修订每个单独的类。但是，由于 IDE 使用的是 PBL 文件本身，并且由于 PBL 中存在目标代码，因此在克隆存储库时需要将这些文件推出。如果需要，我可以对此进行更详细的说明。

PB IDE 为 MSSCCAPI 接口提供挂钩，以便它可以支持源代码控制提供程序。它适用于 Visual Source Safe 6！但是 Mercurial 没有可用的 MSSCCAPI 提供程序。（我之前[问](https://stackoverflow.com/questions/8593832/mercurial-mssccapi-provider "Mercurial MSSCCAPI 提供程序？")过。）是的，我正试图让创建 PB 的人支持更新的 API，但不知道这需要多长时间。IDE*确实*但是，它提供了自己的基本 SCC 功能。这不是一个“真正的”解决方案；它更像是“这会让你度过难关，你这个便宜的 b*****d，直到你可以购买真正的 SCC 程序”类型的东西。但是，它的工作原理是将每个类的源导出到单独的文本文件中，并为每个类创建一个相应的“状态”文件（PRP 文件）。文本文件？Mercurial可以追踪这些！仅供参考，这个基本的“通过”SCC 选项不会保留历史记录或处理合并。

让我详细介绍一下这些 PRP 文件。PB 的内置 SCC 解决方案是围绕排他锁构建的。退房，入住，所有这些旧东西。它通过 PRP 文件管理这些签出和签入。它还可以通过相应的 PRP 文件的存在来了解哪些内容在修订控制之下*，*哪些*内容不受修订控制。*

所以首先使用 PRP 文件。我需要将这些推出（并为新类添加），以便 IDE 可以看到应该跟踪相应的类。如果没有 PRP 文件，IDE 不会导出语法，并且在 Mercurial 中无法跟踪任何内容。但是，如果我继续跟踪 PRP 文件的更改，那么这意味着我也在推出类的排他锁，而没有人想要这样。所以我需要添加 PRP 文件，但不跟踪对它们的任何后续更改。

我需要相同的二进制 PBL 文件。如前所述，我需要它们存在以便 IDE 知道哪些 PBL 构成了代码库，但是目标代码、编译和类相互依赖的复杂性意味着动态重新创建它们是不可行的。所以我需要将 PBL 添加到 Mercurial，但我真的不想跟踪对这些 PBL 的更改。虽然我*可能*能够使用 PRP 文件的模板，但我不能为这些二进制 PBL 文件做到这一点。

希望这能充分解释我的情况。我很抱歉这个问题太长了，但我想确保你清楚地了解我所面临的问题，这样我就不会得到一堆即兴的“这是 X 的副本”回应。感谢您的耐心等待以及您可以提供的任何指导。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T20:44:28.457

即使我无法理解这一点

> 如果我继续跟踪 PRP 文件的更改，那么这意味着我也在推出类的排他锁，而没有人想要这样。所以我需要添加 PRP 文件，但不跟踪对它们的任何后续更改。

即：“...没有人想要那个...”和“...添加 PRP 文件但不跟踪对它们的任何后续更改...” - 如果您不版本控制*可更改*（和已**更改**）的源我在将文件更改为 Mercurial 后，看不到添加过时的理由

您可以在 Mercurial 中添加、存储和忽略以后的文件。[这个答案](https://stackoverflow.com/a/13301713/960558)只需少量更改即可很好地玩游戏：因为您想要 .hgignore 完整工作副本（真的想要吗？）您可以使用`hg up -r N`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T21:46:22.700

**替代解决方案**

*   [PB 11.5 的 SourceControl 集成](http://www.sybasedevelopernetwork.com/conversation/825149/)- TortoiseSVN (SVN)
*   [WizSource](http://www.topwizprogramming.com/wizsource.html) - RDBMS 之上的 SCM
*   [PushOk Git 或 SVN SCC 插件](http://www.pushok.com/software/scc-compat.html?type=svn)- 分别为 Git 或 SVN

# asp.net - 根据内容设置GridView DateItem的宽度

> ID：13314314
> 
> 赞同：0
> 
> 时间：2012-11-09T19:04:29.177
> 
> 标签：asp.net

我正在使用`AutoGenerateColumns="true"`属性绑定数据源的所有列。的宽度`header cell`是 GridView 列的默认宽度。

目的是创建一个体面的表格布局，而标记工作最少。因此试图显式地跳过绑定每一列。

有没有办法实现这一点，`GridView`即根据单元格的内容设置列的宽度。IE

```
<tr><th>DummyHeaderContainingMoreLength</tr></th>
<tr><td>cellContent</tr></td> 
```

我可以获得单元格的宽度`lengthof(cellContent)`，让标题浮动或截断。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T09:24:25.163

设置宽度=“100%”。这会做。

# java - 为什么方法的返回类型不包含在方法签名中？

> ID：13314316
> 
> 赞同：25
> 
> 时间：2012-11-09T19:04:33.327
> 
> 标签：java

为什么返回类型的方法不包含在签名中？

一个例子

```
public void method1(String arg){...}

public String method1(String arg){...} 
```

它会导致错误。

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2012-11-09T19:05:53.920

这样做是因为编译器无法找出**所有上下文中**的重载。

例如，如果您调用

```
String x = method1("aaa"); 
```

编译器知道您正在寻找第二个重载。但是，如果你打电话

```
method1("aaa"); 
```

像这样，编译器不知道你想调用这两个方法中的哪一个，因为调用返回`String`并丢弃结果的方法是可以的。为了避免这样的歧义，Java 禁止仅在返回类型上有所不同的重载。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2015-01-22T00:30:27.280

由于您的问题没有针对标题中的任何特定编程语言（我知道它在标签中），我将分享我最近使用**Swift**的经验。在**Swift**函数/方法签名实际上包括返回类型。因此，仅当您在未明确指定返回类型的情况下调用此函数/方法时，编译器才会抛出错误，例如：

```
func some() -> Bool {
    return true;
}

func some() -> Int {
    return 1;
}

let valBool: Bool = some()
let valInt: Int = some()

// this doesn't work: Ambiguous use of 'some'
some() 
```

在这个 Swift 之上甚至让它变得更有趣。它允许您拥有 2 个具有相同参数的函数/方法，并且仅当参数名称不同时才返回类型，例如：

```
func some(#foo: Bool) -> Bool {
    return foo;
}

func some(#bar: Bool) -> Bool {
    return bar;
}

some(foo: true)
some(bar: false) 
```

因此，它为您提供了方法签名中的**语义差异**

UPD。由于 Swift 2.0 外部参数名称已更改，现在您必须提供两次外部和本地名称，即使它们相同

```
func some(foo foo: Bool) -> Bool {
    return foo;
}

func some(bar bar: Bool) -> Bool {
    return bar;
}

some(foo: true)
some(bar: false) 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-09T19:05:21.843

您不能仅在其返回类型上重载方法。这简直是​​非法的。让我们暂时假设使用返回类型重载方法是合法的，并且您定义了两个`method1`方法。现在我们要调用返回`String object`：

`String string = method1(sth);`

JVM 理论上可以识别你想要调用的方法，但是这样的调用呢：

`method1(sth);`

正如你所看到的，这两种方法都可以被调用，并且这样的操作是明确的。JVM 不知道它应该调用哪个方法。这就是禁止这种超载的原因。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-09T19:10:51.447

因为在这样的情况下，不可能解决应该调用哪个重载方法：

```
public static void main(String... args) {
    method1("aaa");
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-03-13T11:53:16.203

在设计诸如重载决议之类的东西时，有几点需要考虑。

省略返回类型重载的原因：

1.  简化忽略函数返回值（就像人们经常对错误代码做的那样）。
2.  使程序更容易被人类读者消化。特别是，这就是在 Python 中它们根本没有函数重载的原因。（口味问题）
3.  C 遗产。当语言来自 C 系列并且设计师不认为某事有什么大不了的时候，它就会像往常一样......

在返回类型上添加重载的原因：

1.  使忽略返回值变得困难。这可能很方便并且可以节省一些打字时间，但总有一天会咬你一口。
2.  表现力（当然与易于消化相反:)）。你有没有想过写这样的东西`int x = json.get("int_value"); float y = json.get("float_value");`？在某些语言（如 C++）中，仍然可以使用代理和强制转换运算符来实现，但返回类型的重载会容易得多。
3.  表现力。每次您将 retun 值作为对函数的引用只是为了重用其资源时，这可能是返回类型的重载（带有隐藏参数）。考虑`string s; getline(cin, s);`vs `string s = getline(cin);`。这就是表达性与引用透明性以及最终易于代码消化的结合。

现在回到你的问题“为什么？”。既然您问的是 Java，答案显然是因为 James 重视忽略返回类型重载的原因，而不是将它们包含在语言中的原因。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2020-02-22T04:47:30.830

我自己曾经有过同样的问题，虽然我可以看到当您不将返回值分配给适当类型的变量时编译器如何不知道要调用哪个函数，但为什么在功能级别？为什么不在调用函数的时候呢？基本上，一旦您承诺签名仅在返回值上有所不同，您就可以确保以这种方式使用它们，然后，只有这样，编译器才会抱怨。当然，要让它与严格的一次性编译器一起工作可能需要一些额外的工作，但我认为它可以飞起来。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-11-09T19:10:07.347

您可以将函数作为过程调用：`method1("arg");`其中 method1 是列表中的第二个方法 ( `String method1(String arg){}`)。然后编译器将无法将其与第一个 ( `void method1(String arg){}`) 区分开来。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2019-10-11T13:28:09.687

编译器负责方法绑定。当它遇到 methodName() 时，它必须绑定到某个方法定义，此时它可能不知道方法的返回类型。所以方法返回类型不包含在方法签名中。编译器根据方法签名绑定方法。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2021-07-05T04:22:59.530

当编译器遇到方法调用时。它将方法调用静态绑定到定义的方法之一。让我们看看如果返回类型包含在方法签名中会发生什么

```
class Example{
    public void method1(String arg){ return arg} 
    public String method1(String arg){}
    public static void main(String[] args){
        Example e = new Example();
        e.method1("abc");   
     }  
} 
```

**e.method1("abc")** 如果方法签名中包含返回类型，编译器将不知道要绑定到哪个方法。

* * *

## 回答 #10

> 赞同：-1
> 
> 时间：2012-11-09T19:14:51.340

方法重载是根据参数的数量和类型而不是返回类型来检查的。这就是您收到错误的原因。

# visual-studio - Windows 驱动程序开发：Visual Studio 2012 中缺少部署选项

> ID：13314319
> 
> 赞同：7
> 
> 时间：2012-11-09T19:05:00.083
> 
> 标签：visual-studio, device-driver, wdk, wfp

我试图编译和部署[从 MSDN 获得的 WFP 示例，](http://code.msdn.microsoft.com/windowshardware/Windows-Filtering-Platform-ae42c8d7)但`msnmntr`同样的问题适用于所有示例。

此示例和所有示例都无法部署，因为Visual Studio 2012 Ultimate 中缺少[文档中的一个步骤。](http://msdn.microsoft.com/en-us/library/windows/hardware/hh454834%28v=vs.85%29.aspx)

它说：

> 1) 打开驱动程序包的属性页。在解决方案资源管理器中右键单击驱动程序包项目，然后选择属性。
> 
> 2) 在驱动程序包的属性页中，单击配置属性，单击驱动程序安装，然后单击部署。

但是，您可以在下面的屏幕中看到 Visual Studio 2012 中没有这样的选项：

![在此处输入图像描述](../Images/a29e88d6cde9594bd725ff6ee8ce95fc.png)

我想知道我做错了什么。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-29T07:54:54.193

这是我从 Microsoft 支持部门收到的答案。

`msnmntr.sln`在 Visual Studio 中打开。

在解决方案资源管理器中，右键单击解决方案`msnmntr`（2 个项目），然后选择`Add > New Project`. 导航到`Windows Driver > Package`。添加一个名为`msnmntr`Package 的新驱动程序安装包。

在解决方案资源管理器中，右键单击解决方案`msnmntr`（2 个项目），然后选择配置管理器。选择所需的配置和平台（例如：Win8 Debug、x64）。

在解决方案资源管理器中，右键单击`msnmntr`包，然后选择属性。导航到`Configuration Properties > Driver Install > Deployment`。检查`Enable deployment`。检查`Remove previous driver versions before deployment`。输入目标计算机的名称。选择`Do Not Install`。

在解决方案资源管理器中，找到并打开`msnmntr.inf`. 在该`[Version]`部分中，添加以下行：

```
Class = ActivityMonitor
CatalogFile = msnmntr.cat 
```

在该部分的正上方`[Strings]`，添加以下部分：

```
[SourceDisksNames]
1 = %DiskId1%,,,""

[SourceDisksFiles]
msnmntr.sys = 1,, 
```

在生成菜单上，选择生成解决方案。

在目标计算机上找到 INF 文件（示例：`C:\DriverTest\DriverFiles\msnmntr.inf`）。右键单击 INF 文件，然后选择`Install`.

在目标计算机上，以管理员身份打开命令提示符窗口，然后输入`net start msnmntr`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-15T02:09:10.497

所以我对我正在使用的样本有同样的问题。这一切都源于对他们真正希望我编辑的项目感到困惑。原来它不是驱动程序项目，而是一个叫做“包”的项目。不知道你是否有这样的包裹，但这就是我的问题。 ![在此处输入图像描述](../Images/dabe937aee9dccc79d4ea69b53a73c11.png)

# mysql - SQL：加入两个表，其中列为空

> ID：13314323
> 
> 赞同：4
> 
> 时间：2012-11-09T19:05:19.567
> 
> 标签：mysql, sql

我正在使用mysql数据库。我有两个表错误和配置文件。Bugs 表有两列（assigned_to、qa_contact），通过多对一关系指向配置文件。这些是我的查询的简化版本。

首先，我试图这样做，但它返回错误表中 qa_contact 为空的重复行

```
select 
  bug_id, 
  desc, 
  dev.assigned_to, 
  qa.qa_contact 
from 
 bugs, 
 profiles as dev, 
 profiles as qa
where 
  assigned_to = dev.userid 
  and (qa_contact = qa.userid or qa_contact is null) 
```

其次，我的新方法是：

```
select bug_id, desc, dev.assigned_to, qa.qa_contact 
from 
 bugs, 
 profiles as dev, 
 profiles as qa
where 
  assigned_to = dev.userid 
  and qa_contact = qa.userid

 UNION

select bug_id, desc, dev.assigned_to, null 
from 
 bugs, 
 profiles as dev, 
 profiles as qa
where 
  assigned_to = dev.userid 
  and qa_contact is null 
```

但在第二种方法中，它排除了 qa_contact 为空的结果。任何人都可以提出一种有效的方法来执行此操作，因为我正在处理数百万的记录，并且希望在结果集上添加更多过滤器。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-09T19:09:30.463

这就是 LEFT JOIN 的用途：

```
SELECT bug_id, `desc`, dev.assigned_to, qa.qa_contact 
FROM bugs
INNER JOIN profiles as dev ON bugs.assigned_to = dev.userid
LEFT OUTER JOIN profiles as qa ON bugs.qa_contact = qa.userid 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-09T19:09:49.513

我想你想使用一个`LEFT JOIN`：

```
select bug_id, desc, dev.assigned_to, qa.qa_contact 
from bugs b
left join profiles dev
  b.assigned_to dev.userid
left join profiles qa
  on b.qa_contact = qa.userid 
```

如果您在学习`JOIN`语法方面需要帮助，那么这里有一个很好[的连接可视化解释](http://www.codinghorror.com/blog/2007/10/a-visual-explanation-of-sql-joins.html)

即使 id 在表中不存在，A`LEFT JOIN`也会从表中返回数据。`bugs``profiles`

# python - 以最小的方式将整数写入 XML 节点

> ID：13314330
> 
> 赞同：0
> 
> 时间：2012-11-09T19:05:37.883
> 
> 标签：python, xml, minidom

我在 Python 中使用 minidom 为已完成的任务创建 XML 格式的日志文件。该过程的一部分是将文件的最后修改时间与该文件数据记录到日志中的时间进行比较。我计划通过以下方式做到这一点：

```
if modTime < recTime:
  do_something() 
```

例如，`foo.pdf`在上午 10 点 40 分进行了修改，然后在上午 10 点 46 分日志记录了 foo.pdf 的修改时间。所以日志的一部分*应该*是这样的：

```
<Printed Orders>
  <foo.pdf>
    <Date Recorded>
      1352486780
    </Date Recorded>
  </foo.pdf> 
```

但是，当我尝试将整数格式的时间写入 XML 文件时，出现错误：

```
TypeError: node contents must be a string 
```

所以，我的问题是：
有没有办法将整数写入 XML 文件？（最好使用 minidom 以免我的脚本因更多的导入而混乱）

如果没有，有没有更好的方法来比较我从文件本身提取的修改时间和我从 XML 文件中提取的记录时间，而不是转换记录的时间到一个字符串，写入 XML 文件，稍后从 XML 文件中提取记录时间，然后将该字符串转换回整数？

`foo.pdf`此外，如果您想知道，计划是根据自己的 mod/rec 时间的比较，每天清除一次目录、删除和其他文件。如果`foo.pdf`自录入日志后未修改，则将其删除。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T19:25:54.513

只需查看您期望的输出即可。XML 如何知道它是整数还是字符串。一般来说，对于 XML，您必须使用标签来说明一切。因此，所有内容都被视为字符串。

您不需要将字符串转换为 int，除非另一个时间是 int，因为时间字符串在很长一段时间内（超过 3,000 年）不会变得比现在长。但是，我不确定您为什么如此不喜欢进行这种转换。如果真的很重要，请使用 JSON。

# java - JLabel 仅显示是否删除了 initComponents()

> ID：13314336
> 
> 赞同：0
> 
> 时间：2012-11-09T19:06:22.297
> 
> 标签：java, swing, jframe, jpanel, jlabel

```
MainFrame.java -JFrame

public MainFrame() {
        initComponents();
        Letters pl = new Letters(this);
        this.setContentPane(pl);
        this.setTitle("Preset Lessons");
        this.pack();
}

Letters.java  -JPanel

public Letters(JFrame frame) {
        initComponents(); 
        JLabel label = new JLabel();
        label.setText("Sample");
        this.add(label);
} 
```

如果 Letters.java 中的 initComponents() 被删除，那是 JLabel 唯一出现的时间。如何将新的 JLabel 放入现有的 JPanel？

Letters.java 的 initComponents() 的内容；如果我在构造函数中删除了 iniComponents，它将创建 JLabel。

```
private void initComponents() {

        jLabelLetters = new javax.swing.JLabel();
        jLabelNumbers = new javax.swing.JLabel();
        jLabelFlashcards = new javax.swing.JLabel();
        jLabelStories = new javax.swing.JLabel();
        jComboBox1 = new javax.swing.JComboBox();

        setMaximumSize(new java.awt.Dimension(333333, 333333));
        setMinimumSize(new java.awt.Dimension(800, 600));
        setPreferredSize(new java.awt.Dimension(800, 600));

        jLabelLetters.setFont(new java.awt.Font("Tahoma", 1, 18));
        jLabelLetters.setText("Letters");

        jLabelNumbers.setFont(new java.awt.Font("Tahoma", 0, 14));
        jLabelNumbers.setText("Numbers");
        jLabelNumbers.addMouseListener(new java.awt.event.MouseAdapter() {
            public void mouseClicked(java.awt.event.MouseEvent evt) {
                jLabelNumbersMouseClicked(evt);
            }
        });

        jLabelFlashcards.setFont(new java.awt.Font("Tahoma", 0, 14));
        jLabelFlashcards.setText("Flashcards");
        jLabelFlashcards.addMouseListener(new java.awt.event.MouseAdapter() {
            public void mouseClicked(java.awt.event.MouseEvent evt) {
                jLabelFlashcardsMouseClicked(evt);
            }
        });

        jLabelStories.setFont(new java.awt.Font("Tahoma", 0, 14));
        jLabelStories.setText("Stories");
        jLabelStories.addMouseListener(new java.awt.event.MouseAdapter() {
            public void mouseClicked(java.awt.event.MouseEvent evt) {
                jLabelStoriesMouseClicked(evt);
            }
        });

        javax.swing.GroupLayout layout = new javax.swing.GroupLayout(this);
        this.setLayout(layout);
        layout.setHorizontalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(layout.createSequentialGroup()
                .addGap(25, 25, 25)
                .addComponent(jLabelLetters)
                .addGap(75, 75, 75)
                .addComponent(jLabelNumbers)
                .addGap(76, 76, 76)
                .addComponent(jLabelFlashcards)
                .addGap(75, 75, 75)
                .addComponent(jLabelStories)
                .addGap(89, 89, 89)
                .addComponent(jComboBox1, javax.swing.GroupLayout.PREFERRED_SIZE, 206, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addContainerGap(32, Short.MAX_VALUE))
        );
        layout.setVerticalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(layout.createSequentialGroup()
                .addContainerGap()
                .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.TRAILING)
                    .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                        .addComponent(jLabelFlashcards)
                        .addComponent(jLabelStories))
                    .addGroup(javax.swing.GroupLayout.Alignment.LEADING, layout.createSequentialGroup()
                        .addGap(4, 4, 4)
                        .addComponent(jComboBox1, javax.swing.GroupLayout.DEFAULT_SIZE, 20, Short.MAX_VALUE))
                    .addGroup(javax.swing.GroupLayout.Alignment.LEADING, layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                        .addComponent(jLabelLetters)
                        .addComponent(jLabelNumbers)))
                .addGap(565, 565, 565))
        );
    }// </editor-fold> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-09T20:36:50.947

问题是当使用[GroupLayout](http://docs.oracle.com/javase/tutorial/uiswing/layout/group.html)时，容器上的所有组件都必须添加到布局的水平和垂直平行组中：

在`Letters.java`中，您已将 添加`JLabel`到容器中，但尚未将其附加到 2 组布局中，因此结果不会显示任何内容。

要修复，您可以将标签创建移动到`initComponents`方法并添加到组中：

```
layout.setHorizontalGroup(
    layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
    .addGroup(layout.createSequentialGroup()
    .addGap(25, 25, 25)
    .addComponent(jLabelLetters)
    .addGap(75, 75, 75)
    .addComponent(jLabelNumbers)
    .addGap(76, 76, 76)
    .addComponent(jLabelFlashcards)
    .addGap(75, 75, 75)
    .addComponent(jLabelStories)
    .addGap(89, 89, 89)
    .addComponent(jComboBox1, javax.swing.GroupLayout.PREFERRED_SIZE, 206, javax.swing.GroupLayout.PREFERRED_SIZE)
    .addContainerGap(32, Short.MAX_VALUE))
    .addComponent(label)
);

layout.setVerticalGroup(
    layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
    .addGroup(layout.createSequentialGroup()
    .addContainerGap()
    .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.TRAILING)
    .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
    .addComponent(jLabelFlashcards)
    .addComponent(jLabelStories))
    .addGroup(javax.swing.GroupLayout.Alignment.LEADING, layout.createSequentialGroup()
    .addGap(4, 4, 4)
    .addComponent(jComboBox1, javax.swing.GroupLayout.DEFAULT_SIZE, 20, Short.MAX_VALUE))
    .addGroup(javax.swing.GroupLayout.Alignment.LEADING, layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
    .addComponent(jLabelLetters)
    .addComponent(jLabelNumbers)))
    .addComponent(label)
    .addGap(565, 565, 565))
); 
```

# javascript - JavaScript 无法在 Internet Explorer 10 上运行

> ID：13314340
> 
> 赞同：0
> 
> 时间：2012-11-09T19:06:34.340
> 
> 标签：javascript, html, internet-explorer

我有一些 JavaScript 将在我的注册表单上进行一些基本的错误检查（确保所有字段都已填写，密码匹配等），并且在正确输入字段之前，提交按钮被禁用。表单上方还有一个 div，它将显示表单的哪些位需要更正。

该代码在 Google Chrome 上运行良好，但使用 IE10 似乎只运行了一半的 JavaScript。它会打印除安全问题答案之外的所有内容的错误消息，即使所有字段都正确（这是 JavaScript 函数的最后 2 部分），提交按钮也会保持禁用状态。

该页面可在[此处](http://redsquirrelsoftware.co.uk/loginreg/register.html)找到，JavaScript 函数包含以下代码：

```
function timerFunc() {
    var success = 1;
    errors.innerHTML = "";
    if (fname.value == "") {
        errors.innerHTML = errors.innerHTML + "<p>Forename Required.</p>";
        success = 0;
    }
    if (sname.value == "") {
        errors.innerHTML = errors.innerHTML + "<p>Surname Required.</p>";
        success = 0;
    }
    if (email.value == "") {
        errors.innerHTML = errors.innerHTML + "<p>Email Required.</p>";
        success = 0;
    } else {
        success = verifyEmail(email.value);
    }
    if (uname.value == "") {
        errors.innerHTML = errors.innerHTML + "<p>Username Required.</p>";
        success = 0;
    }
    if (pword.value == "") {
        errors.innerHTML = errors.innerHTML + "<p>Password Required.</p>";
        success = 0;
    } else if (pword.value.length < 8) {
        errors.innerHTML = errors.innerHTML + "<p>Password Must Have 8 Characters.</p>";
        success = 0;
    }
    if ((pword1.value != "") && (pword1.value != pword.value)) {
        errors.innerHTML = errors.innerHTML + "<p>Passwords Don't Match.</p>";
        success = 0;
    }
    if (seca.value == "") {
        errors.innerHTML = errors.innerHTML + "<p>Security Answer Required.</p>";
        success = 0;
    }
    if (success == 1) {
        submit.disabled = false;
    } else {
        submit.disabled = true;
    }
} 
```

修复它可能非常简单，但我不明白为什么它在 Chrome 而不是 IE 中完美运行。提前感谢，杰克。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T19:14:26.740

在 RegFunc 中尝试添加这一行：

```
pword1 = document.getElementById("pword1"); 
```

pword1 未定义 - 在控制台上无限打印 - F12 是您在 IE9+ 中的朋友

# javascript - Google Maps V3 方向面板 - 一种关闭步进方向功能的方法？

> ID：13314345
> 
> 赞同：0
> 
> 时间：2012-11-09T19:06:44.583
> 
> 标签：javascript, google-maps, google-maps-api-3, directions

基本上，当您单击“方向面板”步骤时，我想关闭使地图在每个转弯处居中的功能。

有没有办法禁用该功能？

PS：我试过：

```
suppressMarkers: true,
suppressInfoWindows: true, 
```

但那些只取出标记和信息窗口 - 当它点击时，它仍然将地图集中在转折点上。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T19:27:34.210

您可以自己渲染 DirectionsPanel（而不是使用 DirectionsRenderer）。这使您可以完全控制。

[例子](http://www.geocodezip.com/v3_directions_custom_iconsC.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T22:18:47.697

所以这就是我最终做的事情：

```
function getDirections()
{   
    var request = 
    {
        origin: start,
        destination: end,
        travelMode: google.maps.TravelMode.DRIVING
    };

    var summaryPanel = document.getElementById('directions_steps');

    directionsService.route(request, function(response, status) 
    {
        if (status == google.maps.DirectionsStatus.OK) 
        {

            directionsDisplay.setMap(map);
            directionsDisplay.setDirections(response);      

            var legs = response.routes[0].legs; 

            for (var leg = 0; leg < legs.length; leg++) {
                for (var step = 0; step < legs[leg].steps.length;
                step++) {
                    if (legs[leg].steps[step].lat_lngs) {                       
                        summaryPanel.innerHTML += legs[leg].steps[step].instructions+"<br/><br/>";                                                      
                    }
                }
            }

        }
    });
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-06-29T14:08:24.310

完全迟到了，但对于未来的参考，对我有用的是评论这些行：

```
var directionsRenderer = new google.maps.DirectionsRenderer({
            draggable: true,
            map: map//,
            //panel: document.getElementById('right-panel') step directions instructions here
        }); 
```

# php - Magento 产品如何 pr-check 值

> ID：13314346
> 
> 赞同：1
> 
> 时间：2012-11-09T19:06:57.970
> 
> 标签：php, sql, magento

我正在使用 magento 1.4.1.1，并使用常规 API 通过外部 ERP 程序生成产品。我有一些理由手动检查产品后端中的 3 个值，而这个 ERP 程序无法通过 magento API 为我完成。这意味着我必须进入每个产品以检查这 3 个复选框，然后才可以购买产品。

我如何预先检查这些值，这样我就不必再这样做了？它位于产品页面的库存区域。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T20:06:21.033

您可以尝试使用观察者创建一个自定义模块，以观察新添加的产品

有关产品观察者的列表，请参阅 [Magento 添加新产品事件观察者](https://stackoverflow.com/questions/12839097/magento-add-new-product-event-observer)

有关如何创建自定义模块[更改重复产品的 Magento 默认状态](https://stackoverflow.com/questions/12677971/change-magento-default-status-for-duplicated-products/12696681)（将 catalog_model_product_duplicate 更改为链接 #1 中的值）

有关如何设置库存，请参阅[在 Magento 1.7 中添加新产品时设置默认产品值](https://stackoverflow.com/questions/13289371/set-default-product-values-when-adding-new-product-in-magento-1-7)

（我的大部分示例都是 magento v1.7 的基础，因此您可能需要查看它是否与 v1.4.1 相同）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T19:59:47.533

至少在 Magento 1.6 及更高版本中，可以在后端的单独页面上设置产品属性的默认值。

目录 -> 属性 -> 管理属性 (/admin/catalog_product_attribute/)

如果您无法编辑特定属性，则需要在数据库中将该属性标记为“用户定义”。将所需属性的列设置`eav_attribute.is_user_defined`为“1”以在后端启用编辑。

# excel - 如何使用 SSIS 包将 Excel 文件数据加载到多个表中？

> ID：13314347
> 
> 赞同：0
> 
> 时间：2012-11-09T19:06:58.003
> 
> 标签：excel, ssis

我正在以下格式和顺序的 Excel 文件中获取订单信息。我需要将这些加载到下表中。

```
OrderHeader
-----------
OrderNumber
CustomerID

Customer
--------
CustomerID
CustomerFirstName
CustomerLastName

OrderDetail
-----------
Product Information 
```

在 C# 中，我曾经通过一次读取一行数据并检查 ordernumber 并循环遍历其余信息（如果与前一行保持相同）来加载它。现在我正在尝试迁移到 SSIS，并且想知道是否有更好的方法可以使用，或者我应该使用脚本任务。

```
OrderNumber CustomerID CustomerFirstName CustomerLastName Product ID Model No Serial No Date of Purchase
----------- ---------- ----------------- ---------------- ---------- -------- --------- ----------------
000001          A1           John              Doe           111      1x1x1x   1s1s1s     11/1/2012
000001          A1           John              Doe           112      1x1x2x   1s1s2s     11/1/2012
000001          A1           John              Doe           113      1x1x3x   1s1s3s     11/1/2012
000001          A1           John              Doe           114      1x1x4x   1s1s4s     11/1/2012
000001          A1           John              Doe           115      1x1x5x   1s1s5s     11/1/2012
000001          A1           John              Doe           116      1x1x6x   1s1s6s     11/1/2012
000002          A2           John1             Doe1          111      1x1x1x   1s1s1s     11/1/2012
000002          A2           John1             Doe1          112      1x1x2x   1s1s2s     11/1/2012
000002          A2           John1             Doe1          113      1x1x3x   1s1s3s     11/1/2012
000002          A2           John1             Doe1          114      1x1x4x   1s1s4s     11/1/2012
000002          A2           John1             Doe1          115      1x1x5x   1s1s5s     11/1/2012
000002          A2           John1             Doe1          116      1x1x6x   1s1s6s     11/1/2012 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T20:02:01.567

只需将三个数据泵与使用 DISTINCT 的 SQL SELECT 语句一起使用，并仅返回每个目标所需的字段。您可能还需要一些逻辑来处理数据冲突，但您并没有具体询问这个问题，所以我假设您没有这个问题。

希望您的 OrderDetail 表包含 OrderNumber 字段，否则您不会走得太远。

对于 orderHeader 提要：

```
Select DISTINCT OrderNumber, CustomerID from XLSsource 
```

# c++ - 带有映射迭代器的错误访问内存

> ID：13314349
> 
> 赞同：2
> 
> 时间：2012-11-09T19:06:59.660
> 
> 标签：c++, map, iterator

> **可能重复：**
> [调用 erase() 后 std::map::iterator 出现问题](https://stackoverflow.com/questions/4636182/problem-with-stdmapiterator-after-calling-erase)

也许你可以用我目前遇到的问题来启发我。所以问题是当我试图擦除地图中的一些元素时，我得到了一个糟糕的访问内存。我们假设以下 typedef ：

```
typedef std::map < std::string *, Document *, pStringCompare > Map; 
```

我们假设在执行以下所有代码之前，我们已经实例化了一个包含两个元素（例如）的映射。此代码运行良好：

```
Map::iterator it = documents.begin();

std::string *s = it->first;
Document *d = it->second;

documents.erase(it);

delete d;
delete s; 
```

但是当我试图用迭代器循环时，我得到了错误。

```
for (Map::iterator it = documents.begin() ; it != documents.end() ; it++)
{
    std::string s = * ( it->first);
    Document dd = * (it->second);
    std::cout << s << " || " << dd;
    documents.erase(it);  // This line causes the bad access memory error.
} 
```

谢谢你的帮助 ！真的很感激！

阿列克斯

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-09T19:11:28.040

您正在访问无效的迭代器。一旦你将它传递给`erase()`它就不再有效，所以你不能在你的`for`循环中增加它。有关详细信息，请参阅[迭代器无效规则。](https://stackoverflow.com/questions/6438086/iterator-invalidation-rules)

您的循环应该像这样构造以避免访问无效的迭代器：

```
for (Map::iterator it = documents.begin() ; it != documents.end() ; )
{
    std::string s = * ( it->first);
    Document dd = * (it->second);
    std::cout << s << " || " << dd;
    documents.erase(it++);
} 
```

虽然我真的建议您阅读更多文档并了解这里发生了什么。例如，看到[这个](http://www.angelikalanger.com/Conferences/Slides/CppInvalidIterators-DevConnections-2002.pdf)。

祝你好运！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T19:27:32.257

Alternatively:

```
while ((Map::iterator iter = documents.begin()) != documents.end())
{
   std::string s = * ( iter->first);
   Document dd = * (iter->second);
   std::cout << s << " || " << dd;
   documents.erase(iter);
} 
```

# vb.net - 包含多个解决方案的 Visual Studio 解决方案

> ID：13314357
> 
> 赞同：-3
> 
> 时间：2012-11-09T19:07:22.100
> 
> 标签：vb.net, visual-studio-2008

Visual Studio 解决方案和 Visual Studio 项目之间有什么区别。我读过这样的问题：[Visual Studio Project vs. Solution](https://stackoverflow.com/questions/2389226/visual-studio-project-vs-solution)

我对包含多个解决方案的解决方案特别感兴趣。为什么要使用包含许多解决方案的解决方案而不是包含许多项目的解决方案？

我支持和开发包含多个项目的解决方案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-09T19:09:13.960

您不能让解决方案包含解决方案。时期。

解决方案是项目和项目之间共享的项目的容器。他们还跟踪项目之间的依赖关系。

# wpf - 在 Silverlight 中访问网络摄像头返回错误

> ID：13314359
> 
> 赞同：0
> 
> 时间：2012-11-09T19:07:31.867
> 
> 标签：wpf, silverlight

我已经完成了一个访问我的网络摄像头的 Silverlight 应用程序。

**代码：**

```
public MainPage()
{
  InitializeComponent();      

  if (CaptureDeviceConfiguration.AllowedDeviceAccess || CaptureDeviceConfiguration.RequestDeviceAccess())
  {
      snapshot.Visibility = Visibility.Collapsed;
      src.Start();
  }
  // Event Wiring
  //cameraButton.Click += new RoutedEventHandler(cameraButton_Click);
  photoButton.Click += new RoutedEventHandler(photoButton_Click);
  saveButton.Click += new RoutedEventHandler(saveButton_Click);

  // Setup Capture Source
  cameraBrush.SetSource(src);
} 
```

**问题：**

下面的函数总是返回 false。我尝试在调试模式和发布模式下运行，但没有成功。

```
if (CaptureDeviceConfiguration.AllowedDeviceAccess || CaptureDeviceConfiguration.RequestDeviceAccess())
  {
      snapshot.Visibility = Visibility.Collapsed;
      src.Start();
  } 
```

有人能帮我吗 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-10T05:59:47.363

您需要处于发布模式，这是必须的。没有附加调试器。 [https://stackoverflow.com/a/9258569/413032](https://stackoverflow.com/a/9258569/413032)

什么 CaptureDeviceConfiguration.GetAvailableVideoCaptureDevices(); 回报？

# android - 带有多个片段的 Android 应用程序设计

> ID：13314360
> 
> 赞同：0
> 
> 时间：2012-11-09T19:07:38.347
> 
> 标签：android, android-fragments

我正在尝试创建一个带有片段的平板电脑应用程序。屏幕左侧将有四个按钮，屏幕右侧将根据单击的按钮而变化。我创建了主要活动和四个片段。每个片段都有自己的布局，带有几个 TextView 字段。当应用程序启动时，它将所有片段加载到 RAM - 这样它可以保持片段状态，以便当用户从一个片段切换到另一个片段时，所有文本字段都会保留其文本值，直到他单击最终提交按钮。该应用程序基于 SDK 4.1。该应用程序有点慢，尤其是在启动时。我想知道它是否设计得当，是否有一些方法可以改进它？

以下是主要活动类：

```
import android.app.Activity;
import android.app.Fragment;
import android.app.FragmentTransaction;
import android.os.Bundle;
import android.view.Menu;
import android.view.View;
import android.widget.Button;

public class MainActivity extends Activity {

    private Button buttonOne;
    private Button buttonTwo;
    private Button buttonThree;
    private Button buttonFour;

    private Fragment fragmentOne;
    private Fragment fragmentTwo;
    private Fragment fragmentThree;
    private Fragment fragmentFour;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        buttonOne = (Button) findViewById(R.id.button_one);
        buttonTwo = (Button) findViewById(R.id.button_two);
        buttonThree = (Button) findViewById(R.id.button_three);
        buttonFour = (Button) findViewById(R.id.button_four);

        fragmentOne = new FragmentOne();
        fragmentTwo = new FragmentTwo();
        fragmentThree = new FragmentThree();
        fragmentFour = new FragmentFour();

        FragmentTransaction fragmentTransaction = getFragmentManager()
                .beginTransaction();

        fragmentTransaction.add(R.id.frameLayout_one, fragmentOne);
        fragmentTransaction.add(R.id.frameLayout_one, fragmentTwo);
        fragmentTransaction.add(R.id.frameLayout_one, fragmentThree);
        fragmentTransaction.add(R.id.frameLayout_one, fragmentFour);

        fragmentTransaction.commit();

        buttonOne.setOnClickListener(new View.OnClickListener() {
            public void onClick(View view) {

                FragmentTransaction fragmentTransaction = getFragmentManager()
                        .beginTransaction();
                fragmentTransaction.show(fragmentOne);
                fragmentTransaction.hide(fragmentTwo);
                fragmentTransaction.hide(fragmentThree);
                fragmentTransaction.hide(fragmentFour);

                fragmentTransaction.commit();

            }
        });

        buttonTwo.setOnClickListener(new View.OnClickListener() {
            public void onClick(View view) {

                FragmentTransaction fragmentTransaction = getFragmentManager()
                        .beginTransaction();
                fragmentTransaction.hide(fragmentOne);
                fragmentTransaction.show(fragmentTwo);
                fragmentTransaction.hide(fragmentThree);
                fragmentTransaction.hide(fragmentFour);

                fragmentTransaction.commit();

            }
        });
        buttonThree.setOnClickListener(new View.OnClickListener() {
            public void onClick(View view) {

                FragmentTransaction fragmentTransaction = getFragmentManager()
                        .beginTransaction();
                fragmentTransaction.hide(fragmentOne);
                fragmentTransaction.hide(fragmentTwo);
                fragmentTransaction.show(fragmentThree);
                fragmentTransaction.hide(fragmentFour);

                fragmentTransaction.commit();

            }
        });
        buttonFour.setOnClickListener(new View.OnClickListener() {
            public void onClick(View view) {

                FragmentTransaction fragmentTransaction = getFragmentManager()
                        .beginTransaction();
                fragmentTransaction.hide(fragmentOne);
                fragmentTransaction.hide(fragmentTwo);
                fragmentTransaction.hide(fragmentThree);
                fragmentTransaction.show(fragmentFour);

                fragmentTransaction.commit();

            }
        });

    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-09T19:40:54.113

考虑使用 FragmentStateViewPager。

在一个理想的世界中，如果你有几个片段要在你的情况之间切换，你可能不希望将它们保留在 RAM 中。2或3个碎片可能还可以，4个或更多开始推送它。

FragmentStateViewPager 将自动分离并保存 Fragment 的状态，因为它们“离开屏幕”

您必须在每个片段中实现 onSaveInstanceState 以保存任何非 UI 成员变量的任何状态（UI 视图自动保存其状态）。然后在 onCreate 或 onCreateView 中恢复它们。

*当然，如果您的 Fragments 的 onCreate/onCreateViews 很慢，那么这将无济于事。首先确保您的 Fragments 的创建速度很快...首先寻找可以从 onCreate/onCreate 视图移动到 onResume 的代码。

# c++ - 我该怎么做——mod 2 的幂，就像一个 ++ 2 的幂一样快速？

> ID：13314365
> 
> 赞同：0
> 
> 时间：2012-11-09T19:08:01.123
> 
> 标签：c++, performance, optimization, bit-manipulation, bitwise-operators

我正在为应该表现得像一个圆形数组的东西保留一个索引计数器。我强制大小为 2 的幂，因此`size_t MASK = size_ - 1`在像这样遍历时用于替换模数：

```
index_ = (++index_) & MASK; 
```

但问题是，在我的情况下，我有时会意识到我可以重用我下次在这里分发的那个索引，所以当这种情况发生时，我有这样的事情：

```
if (canReuseLastUsedIndex())
    --index_; 
```

但是当最后一次抛出`index_`为零时，这会崩溃，因为这不会环绕到`size_`（即`MASK+1`）。有没有办法让这种情况发生？或者非常快的东西？（即最好不必说`if (index_) --index_; else index_ = size_`：）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-09T19:10:26.700

您可以做同样的事情并对其进行位掩码：

```
index_ = (index_ - 1) & MASK; 
```

这是因为无符号下溢在 C 和 C++ 中定义良好。

请注意，这行代码是*未定义的行为*：

```
index_ = (++index_) & MASK; 
```

因为您`index_`在序列点之间多次修改变量（在预增量和赋值中）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T19:10:40.163

你已经在做。只需应用`MASK`与添加相同的方法：

```
index_ = (index_ - 1) & MASK; 
```

# matlab - 缩放 MATLAB/Octave 绘图，以便正确打印所有标签

> ID：13314368
> 
> 赞同：6
> 
> 时间：2012-11-09T19:08:24.990
> 
> 标签：matlab, plot, label, scale, heatmap

我正在尝试使用 MATLAB/Octave 创建一个简单的热图： ![热图](../Images/9e2a79b57a2d2bb2a52b1a77c6bc3cdf.png)
如您所见，我有很多行，每行代表一个单独的类别。

我正在使用该`imagesc`功能，我希望能够缩放图像/绘图，以便可以正确打印每个 y 轴标签（而不是下图中可以看到的混乱）。

这是我想修改的示例代码：

```
A = randi(100, 200, 3);
imagesc(A, limit = [0, 100]);
set(gca, 'xtick', [1:3]);
set(gca, 'xticklabel', { "1,000", "2,000", "3,000" });
set(gca, 'ytick', [1:200]); 
```

编辑：我附上了所提出问题的解决方案，感谢 EitanT 的建议以及[http://nibot-lab.livejournal.com/73290.html?nojs=1](http://nibot-lab.livejournal.com/73290.html?nojs=1)上的有用信息：

```
paperWidth = 16.5;
paperHeight = 11.7;

set(gcf, 'Position', get(0,'Screensize'));
set(gcf, 'PaperUnits', 'inches');
set(gcf, 'PaperSize', [paperHeight paperWidth]);
set(gcf, 'PaperPositionMode', 'manual');
set(gcf, 'PaperPosition', [0 0 paperWidth paperHeight]);
set(gcf, 'renderer', 'painters'); figure(gcf);

A = randi(100, 200, 3);
imagesc(A, limit = [0, 100]);
set(gca, 'FontSize', 5);
set(gca, 'FontWeight', 'light');
set(gca, 'xtick', [1:3]);
set(gca, 'xticklabel', { "1,000", "2,000", "3,000" });
set(gca, 'ytick', [1:200]); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-09T19:11:37.557

对此有几种可能的解决方案：

### 调整图形窗口的大小

如果图形尚未最大化，您可以使用：

```
set(gcf, 'Position', get(0, 'ScreenSize')) 
```

当然，`get(0, 'ScreenSize')`您也可以使用自定义向量指定任何所需的尺寸（如此[处](http://www.mathworks.com/help/matlab/creating_plots/positioning-figures.html?s_tid=doc_12b)所述）。

### 减小字体大小

您还可以通过减小字体大小来缩小标签文本：

```
set(gca, 'FontSize', 5) 
```

但是请注意，这会影响当前坐标区中的*所有*文本。

### 减少显示的刻度数

作为最后的手段，您可以减少在 y 轴上显示的刻度数，*即*增加刻度间隔。代替`1:200`，尝试使用其他间隔，例如：

```
set(gca, 'YTick', [1:20:200]) 
```

尝试组合上述解决方案，以获得更好的可视化效果。

[您可以在官方文档](http://www.mathworks.com/help/matlab/creating_plots/individual-axis-control.html)中阅读有关轴控制的更多信息。此外，正如您在其中一条评论中所建议的那样，[此页面](http://nibot-lab.livejournal.com/73290.html?nojs=1)包含许多其他有用的技巧，用于在 MATLAB 中显示绘图。

# c# - 按值对两列进行排序已编辑

> ID：13314375
> 
> 赞同：0
> 
> 时间：2012-11-09T19:09:07.613
> 
> 标签：c#

```
form.myDataTable.Rows[i][2 * cs] = corr;                
form.myDataTable.Rows[i][2 * cs + 1] = "p" + Convert.ToString(col1) 
                                        + " p" + Convert.ToString(col2); 
```

我需要`2*cs`按值和列中的相应名称对列进行排序`2*cs+1`。

我正在尝试这样：

```
var corrvalues = new Dictionary(); 
correlationvalues["p" + Convert.ToString(col1) 
                      + " p" + Convert.ToString(col2)] = corr;
sortedvalues = correlationvalues.Values.OrderByDescending; 
```

我不清楚如何使用 orderbydescending，我是 C# 新手。感谢帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T19:24:51.240

OrderByDescending 是一个函数，而不是一个属性。它有一个必需的参数，该参数是一个函数，它在集合中获取一个值（在您的情况下为`correctionvalues.Values`）并返回一个“键”以用于比较目的。如果您只想直接比较值本身，您可以传入一个标识 lambda 函数（例如`x => x`）。

```
var corrvalues = new Dictionary(); 
correlationvalues["p" + Convert.ToString(col1) 
                      + " p" + Convert.ToString(col2)] = corr;
sortedvalues = correlationvalues.Values.OrderByDescending(val => val); 
```

如果您的值是更复杂的类型（例如`Person`类）并且您想对特定字段（例如`Name`）进行排序，那么您可以传入如下内容：

```
sorted = personDict.Values.OrderByDescending(person => person.Name); 
```

有关 OrderByDescending 的更多详细信息，请参阅[http://msdn.microsoft.com/en-us/library/system.linq.enumerable.orderbydescending.aspx](http://msdn.microsoft.com/en-us/library/system.linq.enumerable.orderbydescending.aspx)。

您还可以在此处了解有关 lambda 表达式的更多信息（如果您是 C# 新手，这很有用）：http: [//msdn.microsoft.com/en-us/library/bb397687.aspx](http://msdn.microsoft.com/en-us/library/bb397687.aspx)

# actionscript-3 - 拖动操作时闪烁符号/影片剪辑动画丢失

> ID：13314382
> 
> 赞同：0
> 
> 时间：2012-11-09T19:09:49.263
> 
> 标签：actionscript-3, flash, flash-cs6

我的场景有一个补间动画符号，它只是一些文本。我通过代码片段向符号添加了拖放功能，效果很好。

但是，当拖动操作开始时，符号的动画会停止并且永远不会恢复。

无论如何要解决这个问题？

如果没有，那么是否有可能在拖动时让任何动画仍然动画？IE。动画 GIF、图像序列、.avi 文件等

# vba - 在 VBA 中设置无线电的默认值

> ID：13314387
> 
> 赞同：0
> 
> 时间：2012-11-09T19:09:54.410
> 
> 标签：vba

我在 Excel VBA 中有一组收音机（OptionButton），`priority_y`在`priority_n`框架内调用`fr_Priority`。我如何将 priority_y 设置为检查的默认收音机。我知道它必须在下面完成，`Private Sub UserForm_Initialize()`但不知道如何做。我将不胜感激对此事的任何见解。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T19:13:16.647

您可以像这样将其值设置为 1：

```
 priority_y.Value = 1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-08-10T15:57:11.530

试试这个

`priority_y.Value = True`

归功于@AhmedAU

资料来源：[如何在 Visual Basic 应用程序 (VBA) 中制作默认单选按钮](https://stackoverflow.com/questions/57438985/how-to-make-a-default-radio-button-in-visual-basic-application-vba?noredirect=1#comment101355524_57438985)

# python - python，字符串方法

> ID：13314388
> 
> 赞同：0
> 
> 时间：2012-11-09T19:09:58.217
> 
> 标签：python, string, split

> **可能重复：**
> [在字符串中插入每 2 个元素的 Pythonic 方式](https://stackoverflow.com/questions/3258573/pythonic-way-to-insert-every-2-elements-in-a-string)

如果有人可以帮助使用python代码，我会很高兴））例如，我如何将空格放入字符串中，

如果有字符串`'akhfkahgdsds'` 我想把它变成`'ak hf ka hg ds ds'`

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-09T19:13:03.683

```
>>> s = 'akhfkahgdsds'
>>> range(0, len(s), 2) # gives you the start indexes of your substrings
[0, 2, 4, 6, 8, 10]
>>> [s[i:i+2] for i in range(0, len(s), 2)] # gives you the substrings
['ak', 'hf', 'ka', 'hg', 'ds', 'ds']
>>> ' '.join(s[i:i+2] for i in range(0, len(s), 2)) # join the substrings with spaces between them
'ak hf ka hg ds ds' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T19:23:23.050

我真的不认为这是要走的路，但无论如何我认为这个答案很有趣。如果字符串的长度总是偶数，你可以巧妙地使用`iter`-- 如果它是奇数，最后一个字符将被截断：

```
s = '11223344'
i_s = iter(s)
' '.join(x+next(i_s) for x in i_s) 
```

当然，你总是可以填充它：

```
i_s = iter(s+len(s)%2*' ') 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-09T21:10:13.993

你可以试试这个简单的代码：

```
try:
    for i in range(0,len(s)+1,2):
        print s[i]+s[i+1],
except IndexError:
    pass 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-09T19:18:12.597

```
def isection(itr, size):
    while itr:
        yield itr[:size]
        itr = itr[size:]

' '.join(isection('akhfkahgdsds', 2)) 
```

# java - 使用 ProcessBuilder 启动 Jar

> ID：13314391
> 
> 赞同：3
> 
> 时间：2012-11-09T19:10:22.940
> 
> 标签：java, processbuilder

我有一个批处理文件：

```
@echo off
cd %AppData%\.minecraft
start javaw -Xms1024m -Xmx1024m -Djava.library.path="\bin\natives" -classpath "bin\minecraft.jar;bin\jinput.jar;bin\lwjgl.jar;bin\lwjgl_util.jar" net.minecraft.client.Minecraft Flood2d 
```

我如何编写它以从 ProcessBuilder 开始？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T07:42:55.053

如果你真的想要 ProcessBuilder 这里是：

```
File workdir = new File(System.getenv("AppData"));
Process p = new ProcessBuilder().directory(workdir).command("cmd", "/c", "start", "javaw", "-Xms1024M", ......).start(); 
```

但 Runtime.exec() 也适合这项工作：

```
Process p = Runtime.getRuntime().exec("cmd /c start ......", null, workdir); 
```

注意：我们需要 "cmd /c start" 因为 start 不是一个应用程序，它是一个 cmd 的命令

# java - java web 服务客户端超时

> ID：13314395
> 
> 赞同：1
> 
> 时间：2012-11-09T19:10:32.147
> 
> 标签：java, web-services, jax-ws

我们的工作团队选择使用 NetBeans 7.1.2 提供的所有工具来开发 Web 服务。

不幸的是，我们的网络服务太不稳定而且经常离线。这是我们现在无法解决的问题。我们的决定是在我们的客户中实施超时。但是我们没有找到任何关于它的选项或文档。

有没有办法让客户端在服务需要（例如，5 秒）返回答案时抛出异常？所以我们无法捕捉到这个异常并处理视图的流程。

我问是因为有办法用线程和时间计数器来实现它，但很明显其他程序员已经遇到了同样的问题。

顺便说一句，我们正在使用 JAX-WS。

非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T19:33:41.960

Use java.util.concurrent package classes. For example, you can execute Future instance with timeout: `future.get(5, TimeUnit.SECONDS)`, and if it excepts with TimeoutException, you can react as you want:

```
Future<String> future = executor.submit(new Callable<String>() {
    public String call() {
        return webService.executeServiceMethod();
    }
});
try {
    String result = future.get(5, TimeUnit.SECONDS);
    processResult(result);
} catch (TimeoutException ex) {
    displayMessageToUserOrExecuteAgain();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-10T03:35:20.263

Web 服务客户端可以配置超时，请参阅此[https://community.jboss.org/thread/156015](https://community.jboss.org/thread/156015) [如何在 jboss 上以编程方式设置 jax-ws 客户端请求超时？](https://stackoverflow.com/questions/2592303/how-do-i-set-the-jax-ws-client-request-timeout-programatically-on-jboss)

# java - 如何在Android中正确排序数组中的大写和小写字符串？

> ID：13314398
> 
> 赞同：4
> 
> 时间：2012-11-09T19:10:42.643
> 
> 标签：java, arrays, sorting

> **可能重复：**
> [在Android中按字母顺序排序arraylist（不区分大小写）](https://stackoverflow.com/questions/5815423/sorting-arraylist-in-android-in-alphabetical-order-case-insensitive)

大家好，我在排序时遇到了一个小问题。

我正在收集一个字符串类型的集合。当我排序时，它给了我我期望的错误结果

这是我的代码：

```
List <String> caps = new ArrayList<String>();  
caps.add("Alpha");  
caps.add("Beta");  
caps.add("alpha1");  
caps.add("Delta");  
caps.add("theta");  

Collections.sort(caps); 
```

它的排序如下：

Alpha Beta Delta alpha1 theta。

在这里它可以采用任何类型的字符串，甚至是大写/小写。但小写单词稍后会出现。

我想要这样的输出：

Alpha alpha1 Beta Delta theta

有一个简单的内置方法吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-11-09T19:13:52.387

`Collections.sort();`让您通过自定义比较器进行排序。对于不区分大小写的排序`String`类提供了一个名为 的静态最终比较器`CASE_INSENSITIVE_ORDER`。

所以在你的情况下，所有需要的是：

`Collections.sort(caps, String.CASE_INSENSITIVE_ORDER);`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T19:16:33.893

使用`Comparator`：

```
Collections.sort(caps, new Comparator<String>{
    public int compare(String s1, String s2){
        return s1.toLowerCase().compareTo(s2.toLowerCase());
    }
}); 
```

# excel-2007 - Excel 连接月份

> ID：13314404
> 
> 赞同：0
> 
> 时间：2012-11-09T19:10:57.273
> 
> 标签：excel-2007, excel-formula

我正在尝试采用以下值并将其转换为 dd-MMM-yy 的日期格式

例如：`110412`变成`04-NOV-12`

我现在的公式是：

```
(CONCATENATE(MID(E14,3,2),"-",(TEXT(LEFT(E14,2),"MMM")),"-",RIGHT(E14,2))) 
```

它给了我`04-Jan-12`。

请注意，我希望月份全部大写。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T19:16:48.517

尝试使用“UPPER(foo)”函数作为包装器，使结果全部大写。

```
UPPER((CONCATENATE(MID(E14,3,2),"-",(TEXT(LEFT(E14,2),"MMM")),"-",RIGHT(E14,2)))) 
```

或者更好：

```
=MID(E14,3,2)&"-"&UPPER(TEXT(DATE(MID(E14,5,2),MID(E14,1,2),MID(E14,3,2)),"MMM"))&"-"&RIGHT(E14,2) 
```

# jquery - 动画“src”属性

> ID：13314405
> 
> 赞同：4
> 
> 时间：2012-11-09T19:11:02.660
> 
> 标签：jquery, html, css, hover

我有一个 HTML 文档。它看起来像这样：

![原来的](../Images/0fd37a93d97d853d8cffb4c4578e8580.png)

当用户悬停“stackinfo”图像时，我希望它看起来像这样：

![悬停](../Images/99c371ed27e0283786e085ffc61a575e.png)

我的图像代码：

```
<img src="/Resources/Images/MainMenu/logo.png" name="Logo" width="100" height="30" class="MainMenu" id="Logo" /> 
```

我知道如何更改`src`悬停时的图像，但我怎样才能为它设置动画呢？

（我想用 jQuery 来做）

我已经尝试过的：

```
$(document).ready(function(){
       $('img[name="Logo"]').hover(function(event){
         $(this).fadeIn(function(event){
             $(this).attr("src","/Resources/Images/MainMenu/logoHover.png");
         });
       },
       function(event){
         $(this).fadeToggle(function(event){
             $(this).attr("src","/Resources/Images/MainMenu/logo.png");
         });  
       });
}); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-09T19:14:13.340

您不能`.src`直接使用 jQuery 为值设置动画。

您将需要使用两张图像，它们相互叠放，这样一张就可以淡入另一张。

两个图像都应该被预加载或预缓存，这样在设置后加载图像就没有延迟`.src`。

工作示例：http: [//jsfiddle.net/jfriend00/n52Fr/](http://jsfiddle.net/jfriend00/n52Fr/)

```
$(".container").hover(function() {
    $(this).find(".fadeTop").fadeOut(1000);
}, function() {
    $(this).find(".fadeTop").fadeIn(1000);
});​

<div class="container">
    <img src="http://photos.smugmug.com/photos/344291068_HdnTo-Th.jpg">
    <img class="fadeTop" src="http://photos.smugmug.com/photos/344290962_h6JjS-Th.jpg">
</div>​ 

.container {
    position: relative;
    height: 100px;
    width: 150px;
}

.container img {
    position: absolute;
    top: 0;
    left: 0;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-03-07T12:45:02.930

```
function troca_imagem(url) {
    $('#foto_grande').animate({ opacity: 0 }, 500, function () { document.getElementById('foto_grande').src = url; });
    $('#foto_grande').animate({ opacity: 1 }, 500);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-09T19:12:41.370

根据 OP 所做的编辑编辑了我的答案。下面使用 css sprite 并使用 css3 为不透明度设置动画。请注意，这不适用于任何 IE9<。

**[现场演示](http://jsfiddle.net/loktar/rahEJ/3/)**

**[更深入的解释](http://css-tricks.com/fade-image-within-sprite/)**

```
.sprite{
    width:100px;
    height:100px;
    background:url(http://www.somethinghitme.com/Post%20Images/sprite.png);
    display:inline-block;
    position:relative;
}
.sprite span{
    position: absolute;
    top: 0; left: 0; bottom: 0; right: 0;
    background:url(http://www.somethinghitme.com/Post%20Images/sprite.png);
    background-position: left -100px;
    opacity: 0;
    -webkit-transition: opacity 0.5s;
    -moz-transition:    opacity 0.5s;
    -o-transition:      opacity 0.5s;   
}

.sprite:hover span{
 opacity: 1;   
} 
```

​ ​</p>

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-09T19:15:29.047

您可以将不透明度设置为零，使用回调来更改图像源并绑定事件处理程序，以便在图像加载时将不透明度设置为动画。

```
$('.sprite').on("mouseover",function(e){
    $(this).animate({
        opacity: 0
    },1000, function(){
        setTimeout(function(){
            $('.sprite').animate({
                opacity: 1
            },1000);
        },50);
        $('.sprite').css("background","url(someurl)");
    });
}) 
```

见这个例子：http: [//jsfiddle.net/nHC9U/](http://jsfiddle.net/nHC9U/)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-09T19:28:28.570

您不能真正为`src`属性设置动画，但是

如果您的目标是从一张图像淡入到另一张图像，请将它们放在彼此上方并为顶部的不透明度设置动画：

[http://jsfiddle.net/RPYGv/1/](http://jsfiddle.net/RPYGv/1/)

HTML：

```
<div class="wrapper">
  <img src="...">
  <img src="..." class="on-hover">
</div>​ 
```

CSS：

```
.wrapper {
  position: relative;
}
.wrapper img{
  position: absolute;
  top:0; left:0;
}
.on-hover{
  opacity: 0;
}​ 
```

JS：

```
$(".wrapper").hover(function(){
  $(".on-hover", this).animate({opacity:1},"slow");
},function(){
  $(".on-hover", this).animate({opacity:0},"slow");
}); 
```

​</p>

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-09T20:45:32.527

JQuery 颜色插件将允许您为颜色设置动画。

[https://github.com/jquery/jquery-color](https://github.com/jquery/jquery-color)

因此，您可以拥有一个具有透明背景的 png，并为持有该 png 的容器的背景设置动画。如果您可以使用网络安全字体制作文本，那么您也可以对其进行动画处理...

或者您可以制作 SVG 图像，将 svg xml 直接嵌入到您的 html 中（可能无法在旧版本的 IE 中工作，因为它们具有糟糕的 SVG 支持而没有 svg 插件）

使用 jquery.color.js，我们只需添加一个钩子以允许 svg 填充属性，然后创建一个悬停函数，如：

```
jQuery.Color.hook('fill');

var animationSpeed = 200;

$('#svgwrapper svg').hover(    
    function(){    
        $(this).animate({backgroundColor:'#000000'}, animationSpeed)
        .find('path').animate({fill:'#ffffff'}, animationSpeed);
    },                         
    function(){
         $(this).animate({backgroundColor:'#ffffff'}, animationSpeed)
        .find('path').animate({fill:'#000000'}, animationSpeed);
    }
); 
```

这是 SVG 方法的工作小提琴。适用于 IE9 和当前版本的 firefox、opera、chrome 和 safari

[http://jsfiddle.net/webchemist/hBHBn/11/](http://jsfiddle.net/webchemist/hBHBn/11/)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-11-09T19:32:22.383

Thank you for all your replies, but I found a method that works great!

This is the CSS code:

```
#Logo.MainMenu{
    margin-left: 0px;
    margin-right: 6px;
    margin-top: 0px;
    margin-bottom: 0px;
    width: 100px;
    height: 30px;
    background: url(/Resources/Images/MainMenu/logo.png);
    -webkit-transition: all 200ms ease;
    -moz-transition: all 200ms ease;
    -ms-transition: all 200ms ease;
    -o-transition: all 200ms ease;
    transition: all 200ms ease;
}

#Logo.MainMenu:hover { 
    background-image: url(/Resources/Images/MainMenu/logoHover.png); 
} 
```

and on the HTML page:

```
<div id="Logo" class="MainMenu"> &nbsp; </div> 
```

# ios - NSFetchedResultsController fetchedObjects 添加新对象后排序错误

> ID：13314413
> 
> 赞同：2
> 
> 时间：2012-11-09T19:11:28.040
> 
> 标签：ios, uitableview, nsfetchedresultscontroller

我有一个非常标准的应用程序，它带有一个 UITableViewController，它从 CS193P stanford 类扩展了 CoreDataTableViewController（它只是 UITableViewController 的一个扩展，它实现了 NSFetchedResultsControllerDelegate 以及 NSFetchedResultsControllerDelegate 文档中的所有样板代码）。

无论如何，我的表格显示了一个项目列表。这些项目有一个称为`position`整数的属性（Core Data 中的 NSNumber），并且 NSFetchedResultsController 设置有 NSSortDescriptor 以按位置排序。

这通常有效：当我的表打开时， performFetch 完成并且项目以正确的顺序出现。我添加了一些日志消息进行调试。

```
fetching Item with pedicate: parentList.guid == "123" and sort: (position, ascending, BLOCK(0x6bf1ca0))
fetched item: aaaaa has array:pos = 0 : 0
fetched item: bbbb has array:pos = 1 : 1
fetched item: cccc has array:pos = 2 : 2
fetched item: dddddd has array:pos = 3 : 3 
```

第一行所说的是 performFetch 发生在 GUID 上的谓词过滤和位置上的排序描述符排序。在 fetch 之后从 NSFetchedResultsController 循环 fetchedObjects 时会记录下一行。首先显示项目名称（aaaa、bbbb 等），然后显示 fetchedObjects 数组中的数组位置，然后是 position 属性的值。你可以看到它们是如何排列的。

当我添加一个新项目，然后返回父视图，然后再次转发到列表时，麻烦就来了。新项目被添加到正确的位置（结束）。但是当我来回前进时，有几个项目出了问题。

起初我以为可能没有再次执行提取或 sortDescriptor 丢失，但日志显示提取*正在*发生，您可以看到事情发生了故障。

```
 fetching Item with pedicate: parentList.guid == "123" and sort: (position, ascending, BLOCK(0x6bf1ca0))
 fetched item: bbbb has array:pos = 0 : 1     <= BAD
 fetched item: cccc has array:pos = 1 : 2     <= BAD
 fetched item: aaaaa has array:pos = 2 : 0    <= BAD
 fetched item: dddddd has array:pos = 3 : 3
 fetched item: eeee has array:pos = 4 : 4 
```

见那里：注意数组项 0 的位置为 1，数组项 2 的位置为 0，而 1 的位置为 2！由于这实际上是在 fetch 之后立即获取的对象，并且由于 fetchRequestcontroller 的 sortDescriptor 和 predicate 显然是正确的，这怎么可能呢？

起初我认为这可能是表视图中的一个问题，但后来我在 fetchObjects 之后添加了这个调试日志，所以我知道它是 fetch 的结果。

我还考虑到可能 NSNumbers 不能自动排序，所以我添加了自己的比较器来对整数值进行排序。但没有区别。

请注意，如果我再次来回前进，下一次 fetch 会将事情按正确的顺序放回原处。所有后续提取也是如此。加载后只会发生这种情况。

有任何想法吗？

**[更新]**

在评论中进行了一些有益的讨论之后（感谢@MartinR 和@tc 感兴趣），我稍微简化了一些事情并添加了一些代码来演示正在发生的事情。简化：

*   我现在对项目“标题”进行排序，因为它是一个简单的 NSString。
*   我不再使用子 NSManagedObjectContext 来创建新项目 - 它们直接在与列表相同的 MOC 中创建并立即保存（并且同步）

添加一些代码来演示： 基本设置是项目列表的列表。标准待办事项应用程序的东西。所以我的 CoreData 模型包含列表和项目。每个列表都有一组项目（1-many），每个项目都有对其父列表的引用。

UI 是 2 个 TVC：ListOfListsTVC，单击列表名称，它会转到 ListOfItemsTVC

现在，由于项目列表用于不同的列表，因此每次设置新列表时都会设置一个全新的 FRC。这发生在这里：

```
- (void)setupFetchedResultsController
{
    NSFetchRequest *request = [NSFetchRequest fetchRequestWithEntityName:@"item"];

    NSPredicate *predicate = [NSPredicate predicateWithFormat:@"parentList.guid = %@", self.list.guid];
    request.predicate = predicate;

    NSSortDescriptor *sortDescriptor = [NSSortDescriptor sortDescriptorWithKey:@"title" ascending:YES];
    request.sortDescriptors = [NSArray arrayWithObject:sortDescriptor];

    self.fetchedResultsController = [[NSFetchedResultsController alloc] initWithFetchRequest:request                                                                    managedObjectContext:self.list.managedObjectContext sectionNameKeyPath:nil
                                                cacheName:nil];
    self.debug = YES;

} 
```

这`self.fetchedResultsController`调用了来自 cs193p 斯坦福课程的 CoreDataTableViewController 超类：

```
- (void)setFetchedResultsController:(NSFetchedResultsController *)newfrc
{
self.debug = YES;
NSFetchedResultsController *oldfrc = _fetchedResultsController;
if (newfrc != oldfrc) {
    _fetchedResultsController = newfrc;
    newfrc.delegate = self;
    if ((!self.title || [self.title isEqualToString:oldfrc.fetchRequest.entity.name]) && (!self.navigationController || !self.navigationItem.title)) {
        self.title = newfrc.fetchRequest.entity.name;
    }
    if (newfrc) {
        if (self.debug) NSLog(@"[%@ %@] %@", NSStringFromClass([self class]), NSStringFromSelector(_cmd), oldfrc ? @"updated" : @"set");
        [self performFetch]; 
    } else {
        if (self.debug) NSLog(@"[%@ %@] reset to nil", NSStringFromClass([self class]), NSStringFromSelector(_cmd));
        [self.tableView reloadData];
    }
}
} 
```

它主要是调试信息，但其中的关键语句是： 1\. 设置属性；2\. 将`delegate`FRC 设置为此 TVC (self) 和 3\. 立即获取。

`performFetch`位于同一个 CoreDataTableViewController 类中，并转储我上面列出的所有调试信息：项目的名称、在 fetchedObjects 数组中的位置和位置的值。（它实际上也是一个获取列表的通用方法，但我对 Item 类进行了测试以获取额外的调试信息）我不会在这里列出它，但关键语句是：

```
NSError *error;
[self.fetchedResultsController performFetch:&error];

// Debug:
NSArray *obs = [self.fetchedResultsController fetchedObjects];
// log all the debug info about the items in the fetched array to prove they're not sorted
// ...

[self.tableView reloadData]; 
```

所以基本上，获取并重新加载表。

如果数据中有项目列表，这似乎在我第一次启动应用程序时起作用。在我添加一个新项目之后，它似乎失败了。我在一个名为 NewItemTVC 的单独静态 TVC 中执行此操作，而不是委托，我在块中使用回调来保存项目。但效果是一样的：都是同步的。这是我保存在 ListOfItemsTCV 中的块

```
newItemTVC.saveCancelBlock2 = ^ (BOOL save, NSDictionary *descriptor) {
    if (save) {

        NSManagedObjectContext *moc = self.fetchedResultsController.managedObjectContext;
        Item *newItem = [Item itemWithDescriptor:itemDescriptor inManagedObjectContext:moc];

        // here's where I set the position but ignore this for now because
        // I'm sorting on "title" to debug and it has the same problem
        NSInteger newPosition = self.list.lastPosition + 1;
        newItem.position = [NSNumber numberWithInteger:newPosition];

        // and finally add it to the list
        [self.list addItemsObject:newItem];

        NSError *error = nil;
        BOOL saved = [moc save:&error];
        if (!saved) {
            NSLog(@"Unresolved error saving after adding item to parent %@, %@", error, [error userInfo]);
        }
    } 
```

现在，在我保存项目后，NewItemTVC 弹出并且 ListOfItems 重新加载，执行提取，有时具有正确的顺序，通常不是。在这种情况下，获取是在 viewWillAppear 中执行的。（以前没有，但我在调试时也添加了这个。现在 viewWillDisappear 将委托设置为 nil，弹出 NewItemTVC 会导致此代码在将 FRC 的委托设置回 TVC 后进行新的提取）另请注意从列表列表中*前进*时，这不会设置委托或执行提取，因为设置列表属性已经做到了（设置委托并执行提取）。所以事实上，从弹出 NewItemTVC 并在 viewWillAppear 中执行 fetch 返回是排序出现错误的第一个实例。

```
- (void)viewWillAppear:(BOOL)animated
{
    [super viewWillAppear:animated];
    if (self.fetchedResultsController != nil && self.fetchedResultsController.delegate !=  self) {
        self.fetchedResultsController.delegate = self;
        [self performFetch];
        [self.tableView reloadData];
  }
} 
```

*真正*出错的地方是当我点击返回查看我的 ListOfListsTVC，然后再次点击列表以返回到相同的 ListOfItemsTVC（我有 1 个列表还是十几个列表都没有关系）。我第一次这样做时，这些物品*总是*乱七八糟的。有时我可以重复 4 或 5 次，它们仍然会出现故障，但最终经过多次来回后，它们会恢复正常并保持这种状态。

这是（经过清理的）调试信息，因为我使用的是我的项目的“标题”，而不是位置。

```
[808:fb03] [ListOfItemsTVC performFetch] fetching Item with pedicate: parentList.guid ==    "DD1E1F25-BFC9-46B9-A637-109C0D6F0D1D" and sort: (title, ascending, compare:)
[808:fb03] fetched item: ccccc in array at index 0 
[808:fb03] fetched item: aaaaa in arrat at index 1
[808:fb03] fetched item: bbbbb in array at index 2 
```

几次后退后，它稳定为 aaaa、bbbb、ccccc - 正确的顺序。在我看来，排序只是坏了，或者 FRC 是。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T20:01:22.350

我在这里发布我的“解决方案”，但我暂时不会接受这个作为*答案*，以防我使用 NSFetchedResultController 导致排序错误，而不仅仅是一个错误。（见问题下的评论）

最后，我通过获取所有获取的对象并在我想要的位置查找对象来作弊。这不适用于所有情况：对我来说很容易，因为我正在对整数进行排序，而且我知道列表是最新的（它没有在后台填充）而且很小，所以没有很大的性能查看所有对象的问题。

具体来说：我替换了 cellForRowAtIndexPath 中的典型行，如下所示：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    ....
    Item *item = [self.fetchedResultsController objectAtIndexPath:indexPath];
    ... 
```

有了这个

```
{
    ...
    Item *item = [self _lookupItemAtIndexPath:indexPath];
    ... 
```

这是在这里实现的

```
- (Item *)_lookupItemAtIndexPath:(NSIndexPath *)indexPath
{
    // Since the FRC is sorted on position, _theoretically_ this next call should just
    // return the right item, but the damn sorting doesnt always work (esp not after
    // a new addition), so we check if it's the one we expect and look it up if not
    Item *item = [self.fetchedResultsController objectAtIndexPath:indexPath];

    if (item.position.integerValue != indexPath.row) {
        // the sorting failed! so do a lookup to find the item with the right position
        // (Note that its crucial that the positions remain contiguous and up-to-date)
        NSArray *items = self.fetchedResultsController.fetchedObjects;
        NSUInteger index = [items indexOfObjectPassingTest:^BOOL(id obj, NSUInteger idx, BOOL *stop) {
            if (((Item *)obj).position.integerValue == indexPath.row) {
                // found it - stop looking and return YES
                *stop = YES;
                return YES;
            }
            else {
                return NO;
            }
        }];

        NSAssert1(index != NSNotFound, @"Failed to find the item with the right position: %d", indexPath.row); 

        item = (Item *)[items objectAtIndex:index];

        // Temporary log for debugging: tells me how often the sort is actually failing
        NSLog(@"Warning: Item %@ was out of place, found it at %d instead of %d", item.title, index, indexPath.row);
    }
    return item;
} 
```

请注意，我首先尝试原始查找并测试其是否正确，因此如果不必要，我不会进行“慢速”查找。大多数时候它*是*_un_necessary - 它似乎只是在添加一些东西之后才出现问题。（我可以从那里的 NSLog 消息中看出这一点）

同样，这并不是对排序失败的真正*答案*-只是我针对特定情况的解决方法-所以我没有将其作为答案进行检查（还）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-28T13:21:29.367

我对 CS193P 示例代码有同样的问题。我的解决方案也是保存父上下文（在对象创建/修改之后）：

```
NSError* err;
if ([txt.managedObjectContext save:&err]) {
    if ([txt.managedObjectContext.parentContext hasChanges]) {
        if ([txt.managedObjectContext.parentContext save:&err]) {
            NSLog(@"parent context save ok");
        } else {
            NSLog(@"can't save parent context; error: %@", err);
        }
    }
} else {
    NSLog(@"can't save text; error: %@", err);
} 
```

如果您使用新`UIDocument`方法而不是旧的 Core Data 模板手动设置`NSManagedObjectContext`,`NSPersistentStoreCoordinator`和`NSManagedObjectModel`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-25T08:48:56.197

好的，所以我做了一些工具。我试图在一个虚拟项目中重现该问题，但不能。我认为这可能意味着错误存在于我的代码中，而不是核心数据中。简直太他妈难找了。

因此，由于我知道实际保存更新时问题“消失”，因此我研究了如何强制保存。Apple 文档说您不应该保存它`NSManagedObjectContext`或其父级，因为“您回避了文档执行的其他重要操作”。但是，这是我发现强制保存的唯一方法（只是保存 moc 或使用 updateChangeCount 实际上不会导致 SQL 现在正在执行）。我不想赞成 zxcat 的回应，因为我不知道什么是“回避”，但它似乎有效。

更新：一夜之间我进一步考虑并决定无论我在做什么“错误”，在`NSFetchedResultsController`. 这是因为它可能最终处于不合逻辑的状态 - 即。的内容`fetchedObjects`与 的内容不匹配`sections`。在所有情况下，`fetchedObjects`总是正确的。在某些情况下，例如我的和 OP，`sections`反映的是当前的持久状态，而不是内存中的状态。

# syntax-highlighting - 如何在不编辑的情况下向 Sublime Text 中的语法定义添加功能？

> ID：13314417
> 
> 赞同：11
> 
> 时间：2012-11-09T19:11:31.333
> 
> 标签：syntax-highlighting, sublimetext2

例如，我想在我的 Python 文档字符串中突出显示`@param`、`@type`和`@return`（即 epytext 声明）。我已经想出了如何通过简单的编辑来做到这一点`Python/Python.tmLanguage`；但是，出于以下几个原因，我真的很想把它放在自己的文件中：

1.  我并不*总是*想应用此突出显示。它仅适用于使用[epydoc](http://epydoc.sf.net/)作为文档工具的项目；在其他项目中，我想突出显示[reStructuredText](http://docutils.sourceforge.net/rst.html)。
2.  当 Sublime Text 更新时，我希望将自己的语法覆盖到包含的功能上。Sublime 的作者可能会选择在未来的版本中包含 Python 的几个特性，我不想在每次更新修改基本 Python 语法定义时手动找出我更改了​​什么。
3.  我在版本控制中保留了自己的编辑器配置，但我希望那是我自己的原创；我不想背负着必须携带 Sublime 附带的语法定义的副本（可能是专有的？我不知道，它似乎没有独立的许可证）。

有没有办法将突出显示规则放入单独的文件中，也许只适用于特定范围？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-09T23:18:45.360

在我看来，您想创建自己的语法文件，从 Python 语法文件 ( `source.python`) 继承，并在那里进行更改和自定义。Sublime Text 2 使用[.tmLanguage 格式的语法文件](http://docs.sublimetext.info/en/latest/reference/syntaxdefs.html#the-patterns-array)，这有点复杂，但幸运的是大部分工作已经为你完成，只是继承自`source.python`.

您要做的是设置一个正则表达式模式来匹配您要突出显示的子字符串，并为该模式命名；之类`punctuation.definition.comment.epydoc`的，要遵循中设置的约定`Java/JavaDoc.tmLanguage`。然后，检查您的配色方案文件（以 结尾`.tmTheme`）并确保您选择的范围有设置 - 或其父级之一，因为 ST2 应该为这类事情使用适当的范围规则。

要使用您创建的语法文件，请将其粘贴`Packages/User`（以便 ST2 在升级时不会覆盖它），在编辑器中打开一个 Python 文件，然后从右下角的下拉列表中选择您的新语法窗户。如果您已正确设置所有内容，则 epydoc 字符串应更改为您在配色方案中设置的任何颜色。

祝你好运！当你有一个有效的语法文件时，在某个地方发布一个链接，这样其他人也可以看到和使用它！

# c++ - 使用 C 预处理器迭代结构字段

> ID：13314422
> 
> 赞同：3
> 
> 时间：2012-11-09T19:11:45.217
> 
> 标签：c++, templates, macros, c-preprocessor

我有几个不同的 C++ 结构和类具有相同名称的字段，我必须经常在它们之间复制。我想做类似的事情：（在 bashy 伪代码中）

```
struct S{double a;
         double b;
         double c;};
class C{public: void set_a(double a);
                void set_b(double b);
                void set_c(double c); };
S s; C c;
#FOR F in FIELDSOF(S)
c.set_${F}(${F});
#ENDFOR 
```

无论这是否是一个好主意，有没有办法滥用 C++ 预处理器或 C++ 模板来实现这一点？我使用 g++ 和 clang++。

我已经知道像 MAKO 这样的模板引擎，而且我也知道我可以编写一个程序来进行代码生成。如果您必须知道，我想使用它的一件事是从 C++ 结构填充 Google protobufs。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-09T19:14:57.813

如果您已经有 Boost 依赖项，则可以使用[BOOST_FUSION_ADAPT_STRUCT](http://www.boost.org/doc/libs/1_52_0/libs/fusion/doc/html/fusion/adapted/adapt_struct.html)并使用 Fusion 迭代成员。这也允许您使用类型，这在纯预处理器方法中是不可能的。

您还需要将成员函数映射到融合序列以使其更加自动化。

总而言之：只需编写一个构造函数。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-14T06:09:16.613

请参阅[此答案](https://stackoverflow.com/a/11744832/375343)，它显示了如何迭代类的成员。然后使用这些宏，这两个类可以像这样反映：

```
struct S
{
    REFLECTABLE
    (
        (double) a,
        (double) b,
        (double) c
    )
};
class C
{
private:
    REFLECTABLE
    (
        (double) a,
        (double) b,
        (double) c
    )
public: 
    void set_a(double a);
    void set_b(double b);
    void set_c(double c); 
}; 
```

然后根据成员变量的名称创建一个通用赋值：

```
struct assign_fields_visitor
{
    template<class FieldData1, class FieldData2>
    void operator()(FieldData1 fd1, FieldData2 fd2)
    {
        if (strcmp(fd1.name(), fd2.name()) == 0)
        {
            fd1.get() = fd2.get();
        }
    }
};

struct assign_fields
{
    template<class X, class FieldData>
    void operator()(X & x, FieldData f)
    {
        visit_each(x, boost::bind(assign_fields_visitor(), f, _1));
    }
};

template<class L, class R>
void assign(L & lhs, const R& rhs)
{
    visit_each(rhs, boost::bind(assign_fields(), boost::ref(lhs), _1));
} 
```

最后，可以这样调用：

```
S s; C c;
assign(c, s); 
```

# sql - 将 execute(@QueryString) 的结果插入表中，同时添加额外的列

> ID：13314423
> 
> 赞同：3
> 
> 时间：2012-11-09T19:11:46.323
> 
> 标签：sql, sql-server

我正在编写一个动态创建 SQL 字符串 @SQLQuery 的存储过程。创建此查询后，我需要执行该查询并将其插入到数据库中的表中，同时添加另一列指定此特定插入的唯一 ID。（上下文：在此应用程序中，可能会将多个数据分组插入此表中，我需要能够在以后区分分组。）

这个问题与这个[问题](https://stackoverflow.com/questions/5584588/adding-an-extra-column-value-with-insert-select-in-mysql)类似，只是我使用的是 Microsoft SQL Server 2008 而不是 mysql。我已经尝试了那里的解决方案：

```
INSERT INTO data_table_name
EXECUTE(@SQLQuery), @SomeID 
```

但 MS SQL Server 2008 不喜欢这种语法。

有关如何在 SQL Server 2008 中执行此操作的任何想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-09T19:14:19.797

您可以将查询结果存储在表变量中，然后使用额外的列从该变量中读取并写入最终表

```
DECLARE @temp table (col1 int, col2 varchar(10), ....)

INSERT INTO @temp
EXEC(@SQLQuery)

INSERT INTO data_table_name
SELECT *, @SomeID FROM @temp 
```

您还可以在动态 sql 字符串中附加 @SomeID。

例子：

```
SET @SQLQuery = 'SELECT *,' + @SomeID + ' FROM ' + @tableNameVar 
```

然后这样做

```
INSERT INTO data_table_name
EXECUTE(@SQLQuery) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T19:23:44.230

既然您提到您在存储过程中执行此操作，我建议您：

1.  先执行@SQLQuery；
2.  成功执行@SQLQuery 后，将@SQLQuery 插入到具有唯一ID 的表中。

IE

```
EXEC sp_executesql @SQLQuery, @Param 

IF @@ERROR <> 0
  BEGIN
    INSERT INTO TableA(Query)
    VALUES(@SQLQuery)
  END 
```

您最好将 TableA 设计为 ID 将是一个身份，以便在您将记录插入该表时生成唯一的顺序 ID。

# optimization - 为什么 GCC 坚持非叶被调用者将 CBV 结构复制到堆栈？

> ID：13314429
> 
> 赞同：0
> 
> 时间：2012-11-09T19:11:57.057
> 
> 标签：optimization, gcc, call, cpu-registers

考虑以下 C99 代码：

```
#include <stdio.h>
#include <stdint.h>

struct baz { uint64_t x, y; };

uint64_t foo(uint64_t a, uint64_t b, struct baz c)
{
    return a + b + c.x + c.y;
}

void bar(uint64_t a, uint64_t b, struct baz c)
{
    printf("%lu\n", a);
} 
```

当使用 编译时`gcc -O3`，我期望的行为`c`是在寄存器中传递给`foo`和`bar`，使用 中的寄存器访问`foo`，并在 中完全忽略`bar`。GCC 生成的代码用于`foo`. 但是， in `bar`，`c`从寄存器复制到堆栈，然后立即被忽略：

```
 .file   "pbv.c"
    .text
    .p2align 4,,15
.globl foo
    .type   foo, @function
foo:
.LFB22:
    .cfi_startproc
    leaq    (%rcx,%rdx), %rdx
    leaq    (%rdx,%rdi), %rdi
    leaq    (%rdi,%rsi), %rax
    ret
    .cfi_endproc
.LFE22:
    .size   foo, .-foo
    .section    .rodata.str1.1,"aMS",@progbits,1
.LC0:
    .string "%lu\n"
    .text
    .p2align 4,,15
.globl bar
    .type   bar, @function
bar:
.LFB23:
    .cfi_startproc
    movq    %rdx, -24(%rsp)
    movl    $.LC0, %esi
    movq    %rdi, %rdx
    xorl    %eax, %eax
    movl    $1, %edi
    movq    %rcx, -16(%rsp)
    jmp __printf_chk
    .cfi_endproc
.LFE23:
    .size   bar, .-bar
    .ident  "GCC: (Ubuntu/Linaro 4.4.6-11ubuntu2) 4.4.6"
    .section    .note.GNU-stack,"",@progbits 
```

（注意`a`and`b`被传入`%rsi`and `%rdi`, and`c`被传入`%rcx`and `%rdx`。）

我可以推测的唯一原因是某种 ABI 要求（例如与 longjmp 交互）。我找不到 GCC 的任何优化 ( `-f`) 选项，也找不到抑制这种行为的 GCC 特定注释。`c`用注释`register`没有帮助。

这也发生在不同的目标上。（值得注意的是，在 TileGX`foo`上，堆栈上已分配和释放空间，但没有存储任何内容。）我测试了 GCC 4.4.6 和 4.6.1。

这是预期的行为还是 GCC 中的错误？无论哪种方式，有没有办法解决它（除了使用引用调用或确保`bar`可以是一片叶子）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-10T03:14:53.720

[这个缺点与错误44194](http://gcc.gnu.org/bugzilla/show_bug.cgi?id=44194)中提到的相同，该补丁存在于最新版本的 GCC (4.7.2) 中。

原因大致是对`printf`（或任何函数）的调用被认为能够访问内存中的任何内容，包括基于堆栈的局部变量。该补丁导致被调用者认为基于堆栈的本地变量不可访问。

# batch-file - 批处理文件以递归方式复制目录

> ID：13314433
> 
> 赞同：142
> 
> 时间：2012-11-09T19:12:19.257
> 
> 标签：batch-file, copy

有没有办法在 .bat 文件中递归复制目录？有这样的例子吗？

* * *

## 回答 #1

> 赞同：204
> 
> 时间：2012-11-09T19:13:41.767

查看[xcopy](https://docs.microsoft.com/en-us/windows-server/administration/windows-commands/xcopy)，它将递归复制文件和子目录。

有示例，页面下方的 2/3。特别有用的是：

> 要将所有文件和子目录（包括任何空子目录）从驱动器 A 复制到驱动器 B，请键入：
> 
> `xcopy a: b: /s /e`

* * *

## 回答 #2

> 赞同：89
> 
> 时间：2015-06-23T23:09:10.820

在阅读了接受的答案的评论后，我尝试了对我有用的[robocopy](http://ss64.com/nt/robocopy.html)命令（使用 Windows 7 64 位 SP 1 中的标准命令提示符）：

```
robocopy source_dir dest_dir /s /e 
```

* * *

## 回答 #3

> 赞同：17
> 
> 时间：2012-11-09T21:14:41.563

您可以在 Batch 中编写递归算法，使您可以精确控制在每个嵌套子目录中执行的操作：

```
@echo off
call :treeProcess
goto :eof

:treeProcess
rem Do whatever you want here over the files of this subdir, for example:
copy *.* C:\dest\dir
for /D %%d in (*) do (
    cd %%d
    call :treeProcess
    cd ..
)
exit /b 
```

[Windows 批处理文件通过目录循环处理文件？](https://stackoverflow.com/questions/8397674/windows-batch-file-looping-through-directories-to-process-files/8398621#8398621)

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2020-11-13T17:49:24.840

我想尽可能地复制 Unix/Linux `cp -r`。我想出了以下内容：

`xcopy /e /k /h /i srcdir destdir`

标志说明：

`/e`复制目录和子目录，包括空目录。
`/k`复制属性。普通 Xcopy 将重置只读属性。
`/h`也复制隐藏文件和系统文件。
`/i`如果destination 不存在并且复制多个文件，则假定destination 是一个目录。

* * *

我将以下内容放入批处理文件 ( `cpr.bat`) 中，这样我就不必记住这些标志：

`xcopy /e /k /h /i %*`

用法：cpr srcdir destdir

* * *

您可能还想使用以下标志，但我没有：
`/q`安静。复制时不要显示文件名。
`/b`复制符号链接本身与链接的目标。（需要 UAC 管理员）
`/o`复制目录和文件 ACL。（需要 UAC 管理员）

# android - 如何在模拟器上测试触摸事件

> ID：13314437
> 
> 赞同：4
> 
> 时间：2012-11-09T19:12:25.573
> 
> 标签：android, touch-event

我有一些代码可以检查 ImageView 上的 onTouchEvent

```
public boolean onTouchEvent(MotionEvent event) {
        if(event.getAction() == MotionEvent.ACTION_DOWN) {
            Log.d("M", "down");
        }
        if(event.getAction() == MotionEvent.ACTION_MOVE) {
            Log.d("M", "moved");
        }
        return super.onTouchEvent(event);
    } 
```

但我无法在模拟器上对此进行测试。有人可以帮我吗

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T19:20:06.873

触摸事件应该已经用鼠标模拟（没有双关语）。尝试像这样设置你的监听器：

```
 yourImageView.setOnTouchListener(new OnTouchListener()
        {
            @Override
            public boolean onTouch(View v, MotionEvent event)
            {
                return false;
            }
       }); 
```

取自[上](https://stackoverflow.com/questions/4207067/how-to-implement-touch-listener-on-image)一个问题。

# render - 我的代码有什么问题？我的意图是将立方体放置在整个视图空间中

> ID：13314442
> 
> 赞同：-2
> 
> 时间：2012-11-09T19:12:45.637
> 
> 标签：render, webgl, three.js

```
var container, stats;
            var camera, scene, renderer;
            var arr = new Array();
            var windowHalfX = window.innerWidth / 2;
            var windowHalfY = window.innerHeight / 2;
            init();
            animate();

            function init() {

                container = document.createElement( 'div' );
                document.body.appendChild( container );

                camera = new THREE.PerspectiveCamera( 70, window.innerWidth / window.innerHeight, 1, 10000 );
                camera.position.z = 1000;

                scene = new THREE.Scene();

                var geometry = new THREE.CubeGeometry( 10, 10, 10 );

                for ( var i = 0; i < geometry.faces.length; i ++ ) 
                {

                    geometry.faces[ i ].color.setHex( Math.random() * 0xffffff );

                }

                var material = new THREE.MeshBasicMaterial( { vertexColors: THREE.FaceColors } );

                for ( var i = 0; i < 20; i ++ )
                {

                    arr[i] = new THREE.Mesh( geometry, material );

                    arr[i].position.set( Math.random() * scale, Math.random() * scale, Math.random() * scale ); 
                    scene.add( arr[i] );

                }

                renderer = new THREE.CanvasRenderer();
                renderer.setSize( window.innerWidth, window.innerHeight );

                container.appendChild( renderer.domElement );

                stats = new Stats();
                stats.domElement.style.position = 'absolute';
                stats.domElement.style.top = '0px';
                container.appendChild( stats.domElement );              
                window.addEventListener( 'resize', onWindowResize, false );

            }

            function onWindowResize() 
            {

                windowHalfX = window.innerWidth / 2;
                windowHalfY = window.innerHeight / 2;

                camera.aspect = window.innerWidth / window.innerHeight;
                camera.updateProjectionMatrix();

                renderer.setSize( window.innerWidth, window.innerHeight );

            }

            function animate() {

                requestAnimationFrame( animate );

                render();
                stats.update();

            }

            function render() 
            {               
                renderer.render( scene, camera );

            } 
```

我的意图是根据 for 循环中提供的数量来定位整个视图空间中的立方体数量。但这似乎在这里不起作用，事实上我看到整个空白屏幕。我什至看不到左上角的fps。请有人帮助我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T19:38:20.193

您需要学习如何使用调试器和/或检查控制台是否有错误。

您必须声明变量`scale`并为其赋值。

```
var scale = 500; 
```

您还必须包括 Stats 库，如：

```
<script src="Stats.js"></script> 
```

请不要太快寻求帮助。有很多例子供你学习。

# c# - 如何更新已编译的文本资源文件？

> ID：13314447
> 
> 赞同：0
> 
> 时间：2012-11-09T19:13:04.043
> 
> 标签：c#, security, embedded-resource

我有一个文本资源文件，其中填充了散列用户名 + 密码及其相关权限。当他们启动应用程序时，他们会登录并根据他们的凭据访问应用程序的不同部分。

这一切都很好，但问题是那些拥有管理员帐户的人应该能够从程序中将新用户添加到列表中。我环顾四周，似乎您不打算编辑已编译的资源文件。

但是，我无法将此用户列表保存到计算机，因为有人可以删除、编辑或损坏它。此外，我无法查询在线服务，因为该应用程序经常在没有互联网连接的地方使用。

我喜欢使用资源文件，因为它们嵌入在可执行文件中，并且不会经常创建新用户。有没有办法在应用程序运行时编辑和重新编译资源文件？有谁知道我可以用来为该应用程序提供离线安全性的任何其他替代方案？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T19:27:28.407

可以更新可执行文件中的字符串资源[。](http://msdn.microsoft.com/en-us/library/windows/desktop/ms648008%28v=vs.85%29.aspx#_win32_Updating_Resources)Microsoft 有一个[Stablupd](http://support.microsoft.com/kb/196774)示例来说明如何做到这一点。还有围绕 WinAPI 资源函数构建的 C# 库，例如[ResourceLib](https://github.com/dblock/resourcelib). 但是，我不建议在运行时尝试更改可执行文件的资源。它可能不会导致任何问题，但它不是一个好的设计实践。我认为您最好的选择是将信息存储在加密文件中或在注册表中加密。您可以在程序关闭时将文件标记为只读，并在程序运行时将其锁定。是的，用户仍然可以删除它，但是如果您在程序中编辑资源，他们也可以删除或卸载您的程序，那么您最终也会丢失所有数据。至少将其存储在注册表中被删除的可能性较小。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T19:23:35.483

您可以使用 SQL Server Compact 来存储和更新所需的信息。

但是在本地存储密码绝对是个坏主意： - 出于安全原因。任何人都可以轻松访问 - 以实现可扩展性。您不能使用超过一份应用程序的副本。否则两个不同的管理员将创建两个不同的帐户，并且无法同步两个数据库

# uitableview - 从 NIB 加载 TableViewCell 时出现异常

> ID：13314448
> 
> 赞同：0
> 
> 时间：2012-11-09T19:13:13.497
> 
> 标签：uitableview, xcode4.2

我想从 NIB 加载 TableViewCell 所以 IssueTableCell.xib 和我的代码在这里：

```
static NSString *issueTableCellId = @"IssueTableCell";

 - (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {

UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:issueTableCellId];
NSInteger index = indexPath.row;

NSDictionary *d = [data objectAtIndex:indexPath.row];

UILabel *titleLabel = (UILabel *)[cell viewWithTag:101];
titleLabel.text= [d objectForKey:@"Name"];

UIImageView *imageView = (UIImageView *)[cell viewWithTag:100];
imageView.image=nil;

[self setCoverOfIssueAtIndex:index completionBlock:^(UIImage *img) {
    dispatch_async(dispatch_get_main_queue(), ^{
        UITableViewCell *cell = [table_ cellForRowAtIndexPath:[NSIndexPath indexPathForRow:indexPath.row inSection:0]];
        UIImageView *imageView = (UIImageView *)[cell viewWithTag:100];
        imageView.image=img;
    });
}];

NKLibrary *nkLib = [NKLibrary sharedLibrary];
NKIssue *nkIssue = [nkLib issueWithName:[self nameOfIssueAtIndex:index]];
UIProgressView *downloadProgress = (UIProgressView *)[cell viewWithTag:102];
UILabel *tapLabel = (UILabel *)[cell viewWithTag:103];
if(nkIssue.status==NKIssueContentStatusAvailable) {
    tapLabel.text=@"TAP TO READ";
    tapLabel.alpha=1.0;
    downloadProgress.alpha=0.0;
} else {
    if(nkIssue.status==NKIssueContentStatusDownloading) {
        downloadProgress.alpha=1.0;
        tapLabel.alpha=0.0;
    } else {
        downloadProgress.alpha=0.0;
        tapLabel.alpha=1.0;
        tapLabel.text=@"TAP TO DOWNLOAD";
    }

}
return cell; } 
```

我的例外是

> UITableView dataSource 必须从 tableView:cellForRowAtIndexPath 返回一个单元格

错误在哪里？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-10T13:19:03.267

出现错误是因为编译器找不到重用标识符，这意味着您的单元格为零

还要正确维护reuseidentifier，以便编译器可以重用它。

你应该在 dequeueReusableCellWithIdentifier 之后试试这个：

您必须检查 nil，如果单元格为 nil，则创建新单元格，如下所示：

如果（细胞 == 零）

{

//在这里创建新单元格...

}

# javascript - 在一个条件下定位多个表单元素

> ID：13314450
> 
> 赞同：0
> 
> 时间：2012-11-09T19:13:20.907
> 
> 标签：javascript, jquery

我正在制作一个长注册表单，它的字段需要验证。大多数输入只是文本，但有一个用于条件的复选框和两个用于性别的单选按钮。

**因此，如果**任何输入为空、未检查条件或选择性别，我将尝试触发验证，这对我不起作用：

```
if(((Nimi&&Osoite&&Postinumero&&Postitoimipaikka&&Postinumero&&Puhelin&&Sahkoposti&&Kurssi&&Kurssilaiset&&Koiranimi&&Koiraika&&Koirarotu)=="") || ((Sukupuoli)=="Valitse")) || ((Ehdot):not(:checked))){
//Input validation

//Gender Validation

//Conditions?
} 
```

我认为还有一个语法错误，但我该如何让它工作呢？

**要清楚：**

我希望仅在任何输入为空、未选中复选框或选中单选时触发验证。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T19:20:55.407

圣母玛利亚。这就是[jQuery Validate](http://bassistance.de/jquery-plugins/jquery-plugin-validation/)存在的原因。使用它，它是惊人的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T19:20:37.937

```
(Nimi&&Osoite&&Postinumero&&Postitoimipaikka&&Postinumero&&Puhelin&&Sahkoposti&&Kurssi&&Kurssilaiset&&Koiranimi&&Koiraika&&Koirarotu) 
```

结果是一个布尔值，`true`如果所有这些变量都是非“假”值并且`false`如果有的话是“假”。然后，您将获取该布尔值并将其与空字符串进行比较以获得相等性。阿卡，总是`false`。

您需要将所有这些都与 emtpy 字符串进行显式比较。此外，您需要使用`||`（或）运算符。因为如果有空，您希望它*运行*。不只是如果所有都是。

```
(Nimi==="")||(Osoite==="")||... 
```

编辑：我已将相等运算符更改为`===`这意味着比较是严格的，因此非类型转换。例如，以下是“虚假”值 using`==`和严格比较之间的一些区别`===`：

```
"" ==  false // true
"" === false // false 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-09T19:35:35.403

&& 条件应该有效。如果你 && 一堆字符串在一起，一个是“”，那么整个求值就变成“”，否则就变成最后一个字符串的值。

我认为问题在于如何检查复选框是否被选中。如果 $ 是 jQuery，那么正确的语法是：

```
!$j("selector").is(":checked") 
```

# php - 使用php将单独的列表插入mysql

> ID：13314454
> 
> 赞同：1
> 
> 时间：2012-11-09T19:13:52.043
> 
> 标签：php, mysql

我需要运行 amazon aws alexa api 脚本来获得域列表的排名。

这就是我所拥有的

```
 public static function parseResponse($response) {
    $xml = new SimpleXMLElement($response,null,false,
                                'http://awis.amazonaws.com/doc/2005-07-11');
    if($xml->count() && $xml->Response->TrafficHistoryResult->Alexa->count()) {
        $info = $xml->Response->TrafficHistoryResult->Alexa;
        $nice_array = array(
                'Date'          => $info->TrafficHistory->HistoricalData->Data->Date,
                'Rank'          => $info->TrafficHistory->HistoricalData->Data->Rank,
        );
    }
    foreach($nice_array as $k => $v) {
        echo $_GET['domain']. $k . ': ' . $v ."\n <br>";
          {INSERT QUERY WILL GO HERE}
    }
} 
```

我有一个包含 20 个域的列表。我需要创建一个脚本来获取过去 3 个月内每个域的排名。所以日期将从 2012-09-01 开始，然后是 2012-10-01，然后是 2012-11-01。日期是在此 aws 脚本中较早定义的。

我的问题。如何让脚本确定日期然后使用域名列表获取排名然后插入 mysql 表

# wolfram-mathematica - 根据特定条件从 Mathematica 数组中删除数据点

> ID：13314459
> 
> 赞同：2
> 
> 时间：2012-11-09T19:14:11.747
> 
> 标签：wolfram-mathematica

我有一个由点数定义的线数组：

```
{{{340.754, 681.}, {361.889, 0.}}, {{760.286, 681.}, {775.156,0.}},
 {{398.028, 681.}, {420.73, 0.}}, {{0, 681.}, {239.46, 0.}},
 {{175.78, 681.}, {190.651, 0.}}} 
```

我想删除第一个 x 点等于零的线。尝试过这样的事情：

```
 For[i = Length[lines], i > 0, i--, 
 If [lines[[i]][[1]][[1]] = 0, Delete[lines, i], 0]] 
```

...但它不工作。帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T19:25:51.937

让

```
mylist = {{{340.754, 681.}, {361.889, 0.}}, {{760.286, 681.}, {775.156,0.}},
 {{398.028, 681.}, {420.73, 0.}}, {{0, 681.}, {239.46, 0.}},
 {{175.78, 681.}, {190.651, 0.}}}; 
```

然后

```
mylist /. {{0, _}, {_, _}} -> Sequence[] 
```

返回

```
{{{340.754, 681.}, {361.889, 0.}}, {{760.286, 681.}, {775.156, 
   0.}}, {{398.028, 681.}, {420.73, 0.}}, {{175.78, 681.}, {190.651, 
   0.}}} 
```

如果你想覆盖现有的定义，你可以写

```
 mylist = mylist /. {{0, _}, {_, _}} -> Sequence[] 
```

如果您发现自己在 Mathematica 中编写循环，特别是对于简单的操作，那么您几乎可以肯定没有有效地使用该语言。尽可能多地忘记 C（或任何您最熟悉的命令式编程语言）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T19:17:29.537

`Delete`不触及原论点。Mathematica 是函数式的，所以对象大多是不可变的。`Delete`返回修改后的列表，因此你应该这样做

```
lines=Delete[lines,i] 
```

您也忘记了这`=`是分配，而不是比较。所以，`==`用来比较，你的最终代码是

```
For[
 i = Length[lines], i > 0, i--,
 If[
  lines[[i]][[1]][[1]] == 0, lines = Delete[lines, i]
  ]
 ] 
```

# asp.net - 如何将网格视图值中的选定行 ID 传递给重定向 url

> ID：13314472
> 
> 赞同：0
> 
> 时间：2012-11-09T19:15:23.290
> 
> 标签：asp.net

我有一个网格视图来显示表格中的请求信息。我添加了一个按钮模板字段，点击后应将用户带到适当的请求 url

如何捕获选定的 requestid 并将其作为变量传递给我的重定向 url

**我的网格视图**

```
<asp:GridView ID="GridView1" runat="server" AutoGenerateColumns="False" 
    CellPadding="4" DataKeyNames="roc_id" DataSourceID="analystdefaultview" 
    ForeColor="#333333" GridLines="None" AllowPaging="True"  
    AllowSorting="True" Visible="False" 
        onselectedindexchanged="GridView1_SelectedIndexChanged"> 
    <AlternatingRowStyle BackColor="White" />
    <Columns>

               <asp:CommandField ShowDeleteButton = "true"  />
        <asp:TemplateField HeaderText="RequestId" SortExpression="roc_id">
            <EditItemTemplate>
                <asp:HyperLink ID="HyperLink1" runat="server" Text='<%# Bind("roc_id") %>'></asp:HyperLink>
            </EditItemTemplate>
            <ItemTemplate>
               <asp:Button ID = "button2" runat = "server" Text='<%# Bind("roc_id") %>' />
            </ItemTemplate>
        </asp:TemplateField>
        <asp:BoundField DataField="fundtype" HeaderText="fundtype" 
            SortExpression="fundtype" />
        <asp:BoundField DataField="productionmth" HeaderText="productionmth" 
            SortExpression="productionmth" />
        <asp:BoundField DataField="targetdt" HeaderText="targetdt" 
            SortExpression="targetdt" ReadOnly="True" />
        <asp:BoundField DataField="actualdt" HeaderText="actualdt" 
            SortExpression="actualdt" ReadOnly="True" />
        <asp:BoundField DataField="freqcd" HeaderText="freqcd" 
            SortExpression="freqcd" />
        <asp:BoundField DataField="entereddt" HeaderText="entereddt" 
            SortExpression="entereddt" ReadOnly="True" />
        <asp:BoundField DataField="groupcnt" HeaderText="groupcnt" 
            SortExpression="groupcnt" />
        <asp:BoundField DataField="rptrsrcetxt" HeaderText="rptrsrcetxt" 
            SortExpression="rptrsrcetxt" />
        <asp:BoundField DataField="dateavailable" HeaderText="dateavailable" 
            SortExpression="dateavailable" ReadOnly="True" />
        <asp:BoundField DataField="groupname" HeaderText="groupname" 
            SortExpression="groupname" />
        <asp:BoundField DataField="groupnbr" HeaderText="groupnbr" 
            SortExpression="groupnbr" />
        <asp:BoundField DataField="datarecpdet" HeaderText="datarecpdet" 
            SortExpression="datarecpdet" />
    </Columns>
    <EditRowStyle BackColor="#2461BF" />
    <FooterStyle BackColor="#507CD1" Font-Bold="True" ForeColor="White" />
    <HeaderStyle BackColor="#507CD1" Font-Bold="True" ForeColor="White" />
    <PagerStyle BackColor="#2461BF" ForeColor="White" HorizontalAlign="Center" />
    <RowStyle BackColor="#EFF3FB" />
    <SelectedRowStyle BackColor="#D1DDF1" Font-Bold="True" ForeColor="#333333" />
    <SortedAscendingCellStyle BackColor="#F5F7FB" />
    <SortedAscendingHeaderStyle BackColor="#6D95E1" />
    <SortedDescendingCellStyle BackColor="#E9EBEF" />
    <SortedDescendingHeaderStyle BackColor="#4870BE" />
</asp:GridView>

<asp:SqlDataSource ID="analystdefaultview" runat="server" 
    ConnectionString="<%$ ConnectionStrings:Underwriting %>" 
    SelectCommand="SELECT
       [roc_id]
       ,[fundtype]
       ,Convert(varchar(20),[prodmth],111) as productionmth
       ,Convert(varchar(20),[targetdt],111) as targetdt
       ,Convert(varchar(20),[actualdt],111) as actualdt
       ,[freqcd]
       ,Convert(varchar(20),[entereddt],111) as entereddt
       ,[groupcnt]
       ,[rptrsrcetxt]     
       ,Convert(varchar(20),[date_available],111) as dateavailable
       ,[groupname]
       ,[groupnbr]
       ,[datarecpdet]

        from renoffcyc where opa_id = @opaid and YEAR(prodmth) = YEAR(getdate()) AND MONTH(prodmth) = MONTH(getdate())"

     DeleteCommand = "DElete from renoffcyc where  roc_id = @roc_id" >

    <SelectParameters>
        <asp:ControlParameter ControlID="chooseanalyst" DefaultValue="1" Name="opaid" 
            PropertyName="SelectedValue" />
    </SelectParameters>

</asp:SqlDataSource>

</div> 
```

**.cs 文件**- roc_id 是我需要传递给 url 的变量

```
 protected void GridView1_SelectedIndexChanged(object sender, EventArgs e)
    {
        Response.Redirect("http://xxx.yahoo.com/testing/adhoc/Edit.asp?ROCID=roc_id");

    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T19:24:08.587

试试这个

```
protected void CustomersGridView_SelectedIndexChanged(Object sender, EventArgs e)
{    
     GridViewRow row = GridView1.SelectedRow;   
     string roc_id = GridView1.DataKeys[row.RowIndex].ToString();

     string url = String.Format("http://xxx.yahoo.com/testing/adhoc/Edit.asp?ROCID={0}", roc_id);
     Response.Redirect(url);   
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T19:17:26.287

您需要[**RowCommand**](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.gridview.rowcommand.aspx)事件以及用于在 RowCommmand 事件中传递值的**[CommandArgument](http://msdn.microsoft.com/en-us/library/bb907626%28v=vs.100%29.aspx)**。

**html**

```
<ItemTemplate>
           <asp:Button ID = "button2" runat = "server" CommandName="cmdYourButtonPurpose" CommandArgument='<%# Bind("roc_id") %>'
                Text='<%# Bind("roc_id") %>' />
</ItemTemplate> 
```

**代码背后**

```
void ContactsGridView_RowCommand(Object sender, GridViewCommandEventArgs e)
{
     if(e.CommandName=="cmdYourButtonPurpose")
     {   
         Response.Redirect("http://xxx.yahoo.com/testing/adhoc/Edit.asp?ROCID=" + e.CommandArgument.ToString(););
     }
} 
```

# visual-studio-2010 - 在 Visual Studio 中设置输出路径

> ID：13314475
> 
> 赞同：1
> 
> 时间：2012-11-09T19:15:46.223
> 
> 标签：visual-studio-2010

我将有一个相当大的解决方案，其中包含许多项目，并且我的包含源代码的文件夹在任何时候都必须没有 .obj 或 .exe 或 .dll 文件是有原因的。所以，我想出了这个结构：

```
SolutionDirectory
 |- MainProject
     |- MainProject.csproj
     |- Main.cs
     ...
 |- FirstSlaveProject
     |- FirstSlaveProject.csproj
     ...
 |- SecondSlaveProject
     |- SecondSlaveProject.csproj
 ...
 |- BuildFolder
     |- MainProject
         |- bin
         |- obj
     |- FirstSlaveProject
         |- bin
         |- obj
     |- SecondSlaveProject
         |- bin
         |- obj
     ... 
```

这个想法是所有源文件都在项目的文件夹中，所有二进制文件都转到“BuildFolder”，按项目名称排序。看起来很合理，对吧？

所以，我认为当我在我的解决方案中创建一个新项目时，我必须在某处写这样的东西：`%SolutionFolder%\BuildFolder\%ProjectName%\%ProjectConfigName%\bin" and "%SolutionFolder%\BuildFolder\%ProjectName%\%ProjectConfigName%\obj`.

那么，我到底在哪里写这个（我希望我不必为每个 Debug、Release、UnstableSpeedup 等配置分别写它！），具体如何？我怀疑 Visual Studio 会识别`%SolutionFolder`.

是否有某种 shell 脚本、Visual Studio 插件或其他什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T19:18:39.073

创建项目后，右键单击该项目，然后单击*Properties*。在构建选项卡上是一个用于输出路径的框。

我不知道是否有办法为每个项目自动化它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T20:50:21.367

我打开 .csproj 文件并插入：

```
<PropertyGroup>
  <OutputPath>$(SolutionDir)BuildFolder\$(MSBuildProjectName)\$(Configuration)-$(Platform)\bin\</OutputPath>
  <IntermediateOutputPath>$(SolutionDir)BuildFolder\$(MSBuildProjectName)\$(Configuration)-$(Platform)\obj\</IntermediateOutputPath>
</PropertyGroup> 
```

在**最后一个** `PropertyGroup`标签之后。

我测试了一下，里面确实出现了EXE文件`"SolutionDirectory\BuildFolder\MainProject\Debug-x86\bin"`，中间的东西都到了`"SolutionDirectory\BuildFolder\MainProject\Debug-x86\obj"`。Visual Studio 仍然在我的源代码树中创建一个空的“obj”目录……无论如何，因为它是空的，所以没什么大不了的。

# winforms - Visual Studio 2012 查看触发事件

> ID：13314482
> 
> 赞同：1
> 
> 时间：2012-11-09T19:16:47.297
> 
> 标签：winforms, events, visual-studio-2012

在`Visual Studio 2012`，如何在调试过程中查看所有触发的事件？

例如，从一个控件移动到另一个控件会[触发五个事件](http://msdn.microsoft.com/en-us/library/86faxx0d.aspx)。我想在调试时查看所有这些。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T22:00:05.400

我认为你唯一能做的就是为他们编写代码。

没有一种简单的方法可以做到这一点，因为应用程序没有考虑“从一个控件移动到另一个控件”。相反，用户激活一个控件（这会导致一些事件），它具有（可能）停用另一个控件（导致一些事件）的副作用。

引发事件是因为某些单独的对象有话要说——它们不是因为更高层次的想法而引发的，比如从一个控件移动到另一个控件。事实上，每个对象都负责引发自己的事件，这使得仅查看所有发生的事件变得有问题。

可能有一个开发人员工具可以观察您的表单，为表单的每个事件及其上的每个控件添加事件处理程序，并在事件被触发时向您显示这些事件，但我认为您将参与其中那时有很多信息。

# html - 不工作 stringByEvaluatingJavaScriptFromString object-c

> ID：13314487
> 
> 赞同：0
> 
> 时间：2012-11-09T19:17:06.903
> 
> 标签：html, objective-c, extract, stringbyevaluatingjavascr

我的代码：

```
[Web loadRequest:[NSURLRequest requestWithURL:[NSURL URLWithString:filePath]]];
    NSString *html = [Web stringByEvaluatingJavaScriptFromString: @"document.getElementsByClassName('bottomwideborder')[1].innerHTML;"];
    NSLog(@"%@", html); 
```

不适用于此 html 文件 - [http://www.mosgortrans.org/pass3/shedule.php?type=avto&way=0&date=0000011&direction=AB&waypoint=1](http://www.mosgortrans.org/pass3/shedule.php?type=avto&way=0&date=0000011&direction=AB&waypoint=1)（我尝试从 html 中提取表格）

请帮我！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T21:57:36.507

我假设您使用的是 Cocoa Touch (iOS)，对于 Cocoa (Mac OS X)，它有点不同。
loadRequest 启动异步客户端请求。
您应该为实现`UIWebViewDelegate`协议的 Web 视图分配一个委托，并将您的代码移动到`webViewDidFinishLoading`方法中：

```
- (void)webViewDidFinishLoad:(UIWebView *)webView
{
    NSString *html = [webView stringByEvaluatingJavaScriptFromString: @"document.body.getElementsByClassName('bottomwideborder')[1].innerHTML;"];
    NSLog(@"%@", html);
} 
```

# bash - 具有浮点值和 bc 的类似 C 的 for 循环，意外的“;”

> ID：13314495
> 
> 赞同：0
> 
> 时间：2012-11-09T19:17:46.197
> 
> 标签：bash

我是一个 bash 初学者，我无法在这个循环中发现错误，而 bash 只是给了我`syntax error: ';' unexpected`，并不是很有用......

```
# log2(x) = ln(x) / ln(2)
for (( j=$(echo "l($i) / l(2)" | bc -l) ;
    $(echo "scale=$SCALE; j < (2*$i)" | bc) == 1 ;
    j=$(echo "scale=$SCALE; $j + 1/$step" | bc) ))
do
        foo...
done 
```

我想做的是这样的，使用类似 C 的伪代码：

```
integer i

for ( float j = log2(i) ; j < 2*i ; j += 1/8 )
    ... 
```

也许有更好的方法可以做到这一点，我不知道。在这里或谷歌上找不到任何东西......好吧，很难找到搜索“语法错误”的解决方案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-09T19:25:01.733

该`for (( ... ))`符号需要 shell 算术符号，而不是常规的 Bash 命令。（我的意思是，shell 算术确实支持诸如 之类的扩展`$(...)`，但这是一个完全混淆的秘诀。）由于 shell 算术对你不起作用（它只适用于整数），你最好使用`while`-loop，像这样：

```
j=$(bc -l <<< "l($i) / l(2)")
while [[ $( bc <<< "scale=$SCALE; $j < 2 * $i" ) = 1 ]] ; do
    ...
    j=$(bc <<< "scale=$SCALE; $j + 0.125")
done 
```

# .net - 为什么 VB.NET 退出这个正则表达式线程？“线程已退出，代码为 0”

> ID：13314496
> 
> 赞同：2
> 
> 时间：2012-11-09T19:17:47.360
> 
> 标签：.net, regex

我有一个子字符串，它可能存在也可能不存在于较大的字符串中，如果存在，它应该包含一些我想用正则表达式获取的联系信息。

由于我无法控制消息参数，这个子字符串有时可能会被截断，所以我编写了几个不同的正则表达式来适应每种情况。

我遇到的问题是更复杂的表达式在我身上消失了。这些表达式在我尝试过的每个正则表达式测试网站上都运行良好。

这是一个供参考的代码片段。

```
' Look for contact information using regular expressions.  Data we're looking for is in the format below
' "-- Contact: [name] [email] [phone]"
Dim ContactPattern As String
Dim ContactMatch As Match

If SomeStuff Then
' Only look for the [name] block
ContactPattern = "((?:-- Contact: \[)((\w*|\W*|\s*|\S*)*)\])"
' This match attempt works fine.
ContactMatch = Regex.Match(FullString, ContactPattern, RegexOptions.None)

' Do stuff with the results

ElseIf SomeOtherStuff Then
' Look for [name] and [email]
ContactPattern = "((?:-- Contact: \[)((\w*|\W*|\s*|\S*)*)\] \[((\w*|\W*|\s*|\S*)*)\])"
' This match attempt does not get processed.  I receive the message below in the output window.
'The thread '<No Name>' (0x1f58) has exited with code 0 (0x0).
ContactMatch = Regex.Match(FullString, ContactPattern, RegexOptions.IgnoreCase)

' Do stuff with the results

ElseIf SomeOtherOtherStuff Then
' Look for [name] [email] and [phone]
ContactPattern = "((?:-- Contact: \[)((\w*|\W*|\s*|\S*)*)\] \[((\w*|\W*|\s*|\S*)*)\] \[((\w*|\W*|\s*|\S*)*)\])"
' This match attempt does not get processed.  I receive the message below in the output window.
' "The thread '<No Name>' (0x1f58) has exited with code 0 (0x0)."
ContactMatch = Regex.Match(FullString, ContactPattern, RegexOptions.None)

' Do stuff with the results

End If 
```

不幸的是，谷歌让我失望了（或者我失败了）。有人有想法吗？同样，正则表达式本身在 Regex 测试站点上成功评估。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-09T19:22:40.907

您可能遇到了[灾难性的回溯](http://www.regular-expressions.info/catastrophic.html)。您的正则表达式包含不互斥的嵌套重复模式。尤其`(\w*|\W*|\s*|\S*)*`是没有任何意义。`\w`并`\W`组合包含**所有**字符。这样做`\s`和`\S`。此外，内部星号不会完成任何事情，因为外部重复也可以解决这个问题。

如果您真正想要完成的是匹配那里的**任何**字符，您可以简单地将 every 替换`(\w*|\W*|\s*|\S*)*`为`[\s\S]*`. 或者`.*`与 组合使用`RegexOptions.Singleline`相同。

# button - 鼠标中键宏不起作用

> ID：13314497
> 
> 赞同：1
> 
> 时间：2012-11-09T19:17:49.083
> 
> 标签：button, browser, tabs, mouse, autohotkey

我是 AutoHotKey 的新手，我正在尝试制作一个宏来关闭选项卡式页面上的浏览器窗口。我在 Windows 7 Home Edition for x64 上使用 Pale Moon（一种 Firefox 类型的浏览器）。

我想通过按住鼠标右键，然后单击鼠标滚轮来关闭选项卡窗口。我已经尝试了几个我下载的脚本（它们只需单击鼠标中键即可工作），但它们什么也没做；整个浏览器被最小化（我相信这是鼠标滚轮的默认行为）。

脚本驻留在我的桌面上。也许它们不起作用，因为它们没有起作用，尽管我在尝试它们之前右键单击它们并选择了运行。

这是不起作用的脚本之一：

```
#NoEnv  ; Recommended for performance and compatibility with future AutoHotkey releases.
#Warn  ; Recommended for catching common errors.
SendMode Input  ; Recommended for new scripts due to its superior speed and reliability.
SetWorkingDir %A_ScriptDir%  ; Ensures a consistent starting directory.

MButton::
    CoordMode, Mouse, Screen
    MouseGetPos, x, y, WinUnderMouseID

    ;Get y position relative to the bottom of the screen.
    yBottom := A_ScreenHeight - y

    ; close tab in active window
    if (yBottom <= 40)
    {

        IfWinActive, ahk_class MozillaUIWindowClass
        {
        Send ^w
        return
        } else IfWinActive, ahk_class IEFrame
        {
        Send ^w
        }

    ; else send normal middle click
    } else {
        If GetKeyState("MButton") { ;The middle button is physically down
            MouseClick, Middle,,,0,D        ;middle button down
            KeyWait, MButton                ;to allow dragging
            MouseClick, Middle,,,,0,U       ;release middle button up
        } Else {
            MouseClick, Middle,,
        }

     }

return 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-10T10:53:51.857

出于实际原因（保留右键菜单功能），我建议颠倒顺序。先按中间键，再按右键。

```
MButton & RButton::
Send, ^{F4}
return 
```

# postgresql - RTPostgis 库在进行检查时失败

> ID：13314499
> 
> 赞同：1
> 
> 时间：2012-11-09T19:18:05.260
> 
> 标签：postgresql, postgis, libxml2, gdal, geos

我正在尝试编译最新的稳定 PostGis 版本或 SVN 版本，并且在添加光栅支持时都在**Make Check失败。**

在错误日志中，我看到了这条消息，我在互联网上什么也没找到。

```
psql:/usr/src/postgis-sources/postgis-2.0.1/regress/00-regress-install/share/contrib/postgis/rtpostgis.sql:48: 
ERROR:  could not load library "/usr/src/postgis-sources/postgis-2.0.1/regress/00-regress-install/lib/rtpostgis-2.0.so": /usr/src/postgis-sources/postgis-2.0.1/regress/00-regress-install/lib/rtpostgis-2.0.so: undefined symbol: _ZNK11xercesc_2_710XMLRefInfo14isSerializableEv 
```

我确实编译过：

### ./configure --with-pgconfig=/usr/pgsql-9.2/bin/pg_config && make && make install

我的配置是：--OS：Centos 5.8 2.6.18-238.9.1.el5 32 bits

--PostgreSQL 9.2.1 on i686-pc-linux-gnu，由 gcc (GCC) 4.1.2 编译 20080704

--Postgis 2.0.1 - r9979 - 2012-11-09 18:40:01

--GEOS：3.3.5-CAPI-1.7.5

--PROJ：相对。4.8.0，2012 年 3 月 6 日

--GDAL：1.9.2**

任何帮助将不胜感激。

非常感谢。

问候。

安德烈·卡塞米罗

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T06:15:14.367

为什么不直接从预构建的二进制文件安装？请参阅使用 YUM 从[PGDG RPM](http://trac.osgeo.org/postgis/wiki/UsersWikiPostGIS20CentOS6pgdg)安装的说明。

# java - 对两个相同但具有两种不同功能的对象进行建模的好方法是什么？

> ID：13314502
> 
> 赞同：0
> 
> 时间：2012-11-09T19:18:19.817
> 
> 标签：java, design-patterns, object-oriented-analysis

我正在寻找一种在棋盘游戏中为“移动”建模的好方法。我希望能够询问玩家他们的动作是什么并让他们做出回应，然后能够根据他们的动作在棋盘上执行正确的动作。问题是，有几种类型的移动，每一种都有自己的数据集。例如，在 Scrabble 中，您可以播放一个单词，它应该返回该单词、它的位置和方向（或一组带有位置或其他内容的图块），但您也可以交换图块（这将涉及返回您想要的图块交换）或通过。

类似地，在国际象棋中，您通常移动一个棋子，这应该返回一个棋子的移动以及它的去向，但您也可以城堡，这涉及指示两个棋子及其位置，或一方（国王/王后）或其他一些件/位置以外的信息。

我假设 Player 返回 Move 对象是最好的方法，但我也愿意接受任何其他建模选择或建议。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T19:48:00.823

这些可能不是您正在寻找的东西，但是在这篇旧帖子中似乎有很多很棒的想法：

[建模棋盘游戏的任何模式？](https://stackoverflow.com/questions/361002/any-patterns-for-modelling-board-games)

一些答案包括对 Move 实施的建议，希望能给你一些新的想法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-10T08:57:49.363

根据经验，如果您希望某事物具有通用类型但不同的行为（此处为 Move），则需要让该事物实现该行为。因此，与其问棋盘如何以不同的方式解释两个不同的动作，您应该考虑如何让两个不同的动作在执行它们的动作时以不同的方式使用棋盘。

所以：基类（应该是接口）是一个Move，它有一个perform()方法，两种move对perform()方法有不同的实现。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-09T19:45:33.653

如果不同的实现除了它们如何向外界展示自己之外没有任何共同点，这从你的解释中可以看出，Move 应该是一个松散定义的接口，不同游戏中的每个实现都做自己的事情。

但我的主要问题是，是否真的有理由让这个界面在不同的游戏中广为人知。如果没有某种类型的共享处理程序，它期望不同游戏中的某些动作格式，我不会打扰并简单地定义不同的游戏特定的移动类。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-09T19:23:56.603

一个好的模型总是基于对需求、数据流、控制流、整体系统架构等的详细了解。通过挥手和哲学论证来设计应用程序并不是很有成效。

关于您的特定问题，通常合法的模型之一是让*Player*返回*Move*，但根据完整的细节，它的实际价值可能从完全成功到完全灾难不等。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-09T19:35:39.410

游戏中的移动并不是真正的对象。这是一个事件。

您的国际象棋示例是最简单的。移动会返回棋子和棋盘上的新位置，但它也可能返回城堡事件、捕获事件和/或棋子提升事件。

类似地，在拼字游戏中，移动可能会返回文字游戏事件、交换牌事件或传球事件。

将事件视为对游戏其余部分的信息。您可以像编写课程一样编写事件。该事件类必须有权访问各种游戏类，以便模型可以创建消息。

事件处理程序类处理所有游戏事件。这个类将是操纵其他游戏类的类。这些事件都必须采用事件处理程序可以处理的格式。

# java - 为什么捕获 EOFException 不足以知道输入已完成？

> ID：13314503
> 
> 赞同：2
> 
> 时间：2012-11-09T19:18:20.513
> 
> 标签：java

几天前，我问了一个关于从文件读取直到输入完成的问题。我收到了一些我研究过的回复，但我有一个与该主题相关的问题：为什么我必须使用一些额外的测试、“finally”子句和另一个 try-catch ，而不仅仅是：

```
DataInputStream reading = null;
try{
        reading = new DataInputStream(new FileInputStream("tes.t"));
        while(true)
        {
            System.out.println(reading.readInt());
            System.out.println(reading.readDouble());
        }
        }catch(IOException xxx){System.err.println("Error: " + reading.getMessage());}
         catch(EOFException xxx){reading.close();} 
```

为什么这还不够？我的意思是 - 一旦我们到达 EOF，我们就会有一个例外。否则，我们捕获异常并打印错误消息。为什么我们需要额外的测试？这种方法有什么问题？

编辑：好的，我现在明白为什么这是一件坏事。但是，如果我编写这样的代码呢：

```
DataInputStream reading = null;
try{
        reading = new DataInputStream(new FileInputStream("tes.t"));
        while(reading.available()!=0)
        {
            System.out.println(reading.readInt());
            System.out.println(reading.readDouble());
        }
        }catch(EOFException xxx){}
         catch(IOException xxx){System.err.println("Error: " + reading.getMessage());} 
```

检查 reading.available() 的值是对输入端更好的测试还是同样糟糕？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-09T19:19:36.190

用异常控制执行流程并不优雅。EOF 是读取文件时的正常情况，因此应以其他方式处理。

更优雅的代码是：

```
byte[] buf = new byte[8192];
int nread;
while ((nread = is.read(buf)) >= 0) {
  // process the first `nread` bytes of `buf`
} 
```

来源：[要从 java 中的 DataInputStream 读取的未知缓冲区大小](https://stackoverflow.com/questions/7475611/unknown-buffer-size-to-be-read-from-a-datainputstream-in-java)

在这里你可以找到很好的解释为什么你不应该用异常来控制流：[Why not use exceptions as regular flow of control？](https://stackoverflow.com/questions/729379/why-not-use-exceptions-as-regular-flow-of-control)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T19:20:41.757

您需要 finally 子句来关闭资源。有可能没有命中`EOF`并且 finally 块仍然需要执行。此外，上面的代码很糟糕，永远不应该在生产系统中使用，特别是因为您知道文件结束时的情况。理想情况下，其他对此进行评论的人也发表了相同的声明。将异常视为“正常”程序执行流程是解决软件工程问题的最不利方法。

# analytics - Piwik - 跟踪电子学习系统的用户进度

> ID：13314504
> 
> 赞同：0
> 
> 时间：2012-11-09T19:18:24.193
> 
> 标签：analytics, matomo, reward-system

我们正在设计一个简单的电子学习网站，我们的注册用户和网站管理员可以在其中看到有关用户进度的宝贵统计信息。

我们想跟踪他们访问最多的主题、“喜欢”的内容、访问的其他用户个人资料，甚至可能在此之上添加奖励系统（积分、徽章、解锁内容）以完成课程、观看视频、参与讨论，或帮助他人。

现在我一直在研究 Piwik 作为我们网站的潜在分析包，我知道可以通过向 API 调用添加唯一的“visitor_id”来跟踪个人用户。我是否可以使用 Piwik 开箱即用地跟踪和**检索我上面描述的信息？**我应该创建自己的插件吗？我应该看看不同的东西吗？

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T20:19:25.673

您可以使用 Piwik 自定义变量和分段功能构建大部分内容。但是，它可能需要一个自定义插件来满足您的某些要求。

# javascript - 当玩家到达边界时，如何使 rpg 地图扩展？Javascript HTML5

> ID：13314506
> 
> 赞同：4
> 
> 时间：2012-11-09T19:18:30.293
> 
> 标签：javascript, html, map

我正在努力在谷歌上找到我的问题的答案，所以认为 id post。

我只使用 html5、javascript 和 jquery 构建了一个自上而下的基于瓷砖的 rpg 游戏。

我已经在数组中设置了图像。我已经在一个数组中设置了我的地图，然后循环遍历它以在屏幕上显示图块。

我希望在画布上显示一个 750px x 600px 的大地图部分，当玩家移动到 4 个边界之一时，地图将更新并显示地图的下一部分，或者如果没有可用的地图保持原样。

我将如何实现这个？

如果您不明白我在问什么，请尝试更好地解释：p，但这是我的代码：

```
$(document).ready(function(){

var canvas = $("#TBG");
var context = canvas.get(0).getContext("2d");

var canvasWidth = canvas.width();
var canvasHeight = canvas.height();

//Player Controls -------------------------------------------------------------------------
$(window).keydown(function(e){
   var keyCode = e.keyCode;
    if (keyCode == arrowRight){
        Player.moveRight = true;
    }
    else if (keyCode == arrowLeft){
        Player.moveLeft = true;
    }
    else if (keyCode == arrowUp){
        Player.moveUp = true;
    }
    else if (keyCode == arrowDown) {
        Player.moveDown = true;
    }
});
$(window).keyup(function(e){
    var keyCode = e.keyCode;
    if (keyCode == arrowRight){
        Player.moveRight = false;
    }
    else if (keyCode == arrowLeft){
        Player.moveLeft = false;
    }
    else if (keyCode == arrowUp){
        Player.moveUp = false;
    }
    else if (keyCode == arrowDown) {
        Player.moveDown = false;
    }
});

function player() {

    this.x = 100;
    this.y = 100;
    this.vX = 0;
    this.vY = 0;

    var moveRight = false;
    var moveLeft = false;
    var moveUp = false;
    var moveDown = false;
}

var Player = new player();

var arrowLeft = 37;
var arrowUp = 38;
var arrowRight = 39;
var arrowDown = 40;

//End Player controls ------------------------------------------------------------------------------

//Map initialisation -------------------------------------------------------------------------------------

var images = new Array(3);

images[0] = new Image();
images[0].src = "images/player.png";

images[1] = new Image();
images[1].src = "images/wall.png";

images[2] = new Image();
images[2].src = "images/grass.png";

images[3] = new Image();
images[3].src = "images/floor.png";

var tileMap = [
    [3,1,3,3,3,3,3,3,3,3],
    [3,1,1,2,2,2,2,2,2,3],
    [3,1,1,1,2,2,2,2,2,3],
    [3,2,1,1,1,2,2,2,2,3],
    [3,2,2,1,1,1,2,2,2,3],
    [3,2,2,2,1,1,1,1,1,3],
    [3,2,2,2,2,1,1,1,1,3],
    [3,2,2,2,2,1,1,1,1,3],
    [3,2,2,2,2,1,1,1,1,3],
    [3,3,3,3,3,3,3,3,3,3]
];

//Animate Loop -------------------------------------------------------------------------------------------
function animate () {

    context.clearRect(0,0,canvasWidth,canvasHeight);

    Player.vX = 0;
    Player.vY = 0;

    //Player Animation
    if (Player.moveRight) {
        Player.vX =2;
    };
    if (Player.moveUp) {
        Player.vY = -2;
    };
    if (Player.moveDown) {
        Player.vY = 2;
    };
    if (Player.moveLeft) {
        Player.vX = -2;
    };

    Player.x += Player.vX;
    Player.y += Player.vY;

    if (Player.x < 0){
        Player.x = 0;
        Player.vX *= -2;
    }
    else if (Player.x + 64 > canvasWidth) {
        Player.x = canvasWidth - 64;
        Player.vX *= -2;
    };
    if (Player.y < 0){
        Player.y = 0;
        Player.vY *= -2;
    }
    else if (Player.y + 64 > canvasHeight) {
        Player.y = canvasWidth - 64;
        Player.vY *= -2;
    };

    for (var i = 0; i < 10; i++) {
        for (var j = 0; j < 10; j++){

            var tileId = tileMap[i][j];
            var tileWidth = 32;
            var tileHeight = 32;

            context.drawImage(images[tileId],i * tileWidth, j * tileHeight);
        }

    }
    context.drawImage(images[0], Player.x, Player.y);

    setTimeout(animate, 0);
}
// End Loop ------------------------------------------------------------------------------------------------

animate(); 
```

});

我不擅长 Javascript，但学习并了解有关编程的大量知识。

提前谢谢汤姆

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T19:24:18.480

好吧，实际上并没有特定的方法来做到这一点（就像活动开发中的任何事情一样），但也许我可以提供一些帮助，因为我也在创建一个以地板为中心的活动。地板层并没有真正的独特之处。这只是给图表的一个短语，可以相互填充。你甚至可以在你的整个活动中参与其中，但你可以看到它是如何执行的。如果有一个 5X5 的草坪位置，并且您想在上面放一个灌木，那么在分区之间您只会看到资格是什么颜色，因为您更改了之前的草坪地板。有些人通过包括另一部分来定位灌木来处理这个问题。这样第一部分上面就有草坪，灌木看起来就像在上面。您可能必须对几个实际的植物使用多个级别才能获得您想要的影响。就个人而言，我的活动中可能只有一层楼。这将是主要风景的东西草坪，灰尘等。然后我将有一个项目部分，我将有预先制作的对象（可以是植物，花朵，坏人，房屋等），我的电机将带他们角色并弄清楚如何描绘它们。

对于初学者来说，你可以让你的个性与显示器的侧面发生冲突。例如，为了与显示的其余部分发生冲突，您将检查表演者的 x 位置是否小于 0，如果是，则将其设置为 0。

接下来，您将希望能够在显示屏上绘制地板。您可以使用整数范围来表示平面图。不同的图形表示您必须绘制不同的地板设计。所以一个 3X3 范围的 '0' 将是一张象征 3X3 线草坪地板的地图，而 '1' 可能是水或其他东西。您可以从文本/二进制计算机文件或 XML 计算机文件或其他东西中获取这些数字。由于您正在考虑 XML，因此它通常只是一种用于购买详细信息的人类可读的方式。XML 细节实际上并没有做任何事情（在某种意义上），这取决于您的系统来理解它。

另一个建议是，由于您使用的是 SFML，您可以使用“视图”来移动摄影机。查看 SFML 网页了解如何使用它们。

现在为我最好的建议。我的发布相对无法解释，但我描述的所有内容都受到 Chip Gravelyn 的地板电机指南的保护。它以 C# 发布，他在开发楼层经理方面做了很多事情，但您仍然可以将他的事情实施到您的 C++/SFML 活动中。在线查找“NIckGravelyn”。com。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-09T19:28:15.670

你快到了！我最近在我自己的游戏的平铺渲染器中实现了类似的东西。

在这个循环中：

```
for (var i = 0; i < 10; i++) {
    for (var j = 0; j < 10; j++) {
        var tileId = tileMap[i][j];
        var tileWidth = 32;
        var tileHeight = 32;

        context.drawImage(images[tileId],i * tileWidth, j * tileHeight);
    }
} 
```

您需要将相机“居中”。在我的游戏中，每次玩家移动时，我都会以他们的位置为中心，但你可以随心所欲地这样做。您可以在绘图时通过对*世界坐标*应用偏移来使相机居中：

```
for (var i = 0; i < 10; i++) {
    for (var j = 0; j < 10; j++) {
        var tileId = tileMap[i + yOffset][j + xOffset] || tileIdForEmptyCell;
        var tileWidth = 32;
        var tileHeight = 32;

        context.drawImage(images[tileId],i * tileWidth, j * tileHeight);
    }
} 
```

在您的代码中， i 和 j 代表您的*屏幕*平铺坐标，它们永远不会改变。要“移动”世界，您只需对*世界*坐标应用偏移量，该坐标用于执行对瓦片地图的查找。

您必须考虑地图何时结束，这就是该`|| tileIdForEmptyCell`位的作用。

# c# - 单独返回项目而不是在列表中

> ID：13314507
> 
> 赞同：0
> 
> 时间：2012-11-09T19:18:31.697
> 
> 标签：c#, asp.net-mvc

我有这种方法可以返回某个案例的所有党员，并且他们都返回以显示在一行中。我想把它分解，这样每一方都会有自己的一排。我并不是所有的各方都返回到一个列表然后显示该列表 - 我希望每一方都返回并继续循环，直到该案例的所有各方都返回一个单独的行。

当前方法返回列表中的所有各方：

```
public IList<Party> GetAssignedPartiesForThisAndAssociatedCases(Guid caseId, int officeId)
    {
        IQueryable<AssociatedCase> associatedCases = _associatedCaseService.GetAll(caseId, officeId);
        IQueryable<Case> cases = (associatedCases != null && associatedCases.Count() > 0)
                                     ? associatedCases.Select(a => a.Case)
                                     : _caseRepository.FindAll().Where(c => c.CaseId == caseId);
        var parties = new List<Party>();
        foreach (Case c in cases)
        {
            foreach (Appointment a in c.Appointments.Where(a => a.OfficeId == officeId))
            {
                foreach (AppointmentParty p in a.AppointmentParties.Where(ap=>ap.DateOff == null || ap.DateOff > DateTime.Today))
                {
                    AppointmentParty p1 = p;
                    if (!parties.Contains(p1.Party)) parties.Add(p1.Party);
                }
            }
        }
        return parties;
    } 
```

目前，该方法将显示答案为：

案例#——案例名称——party1、party2、party3、party4、party5

我希望它显示为：

case # -- caseName -- party1
case # -- caseName -- party2
case # -- caseName -- party3
case # -- caseName -- party4
case # -- caseName -- party5

这是我的控制器中显示与各方的案例列表的部分：

```
 IEnumerable<AssociatedCase> associatedCases = _caseCompositeService.GetAssociatedCases(viewModel.CaseId,
                                                                                               _currentUser.OfficeId).Where(a=>a.CaseId != viewModel.CaseId);
        viewModel.AssociatedCases = associatedCases; 
```

上面控制器中的 GetAssociatedCases 是从 CaseCompositeService 文件中调用的：

```
public IEnumerable<AssociatedCase> GetAssociatedCases(Guid caseId, int officeId)
    {
        IQueryable<AssociatedCase> associatedCases = _associatedCaseService.GetAll(caseId, officeId);
        return associatedCases;
    } 
```

然后从 AssociatedCaseService 调用 GetAll 方法：

```
public IQueryable<AssociatedCase> GetAll(Guid caseId, int officeId)
    {
        AssociatedCase associatedCase =
            _associatedCaseRepository.FindAll().SingleOrDefault(a => a.OfficeId == officeId && a.CaseId == caseId);
        if (associatedCase == null) 
            return new List<AssociatedCase>().AsQueryable();
        return _associatedCaseRepository.FindAll().Where(a => a.AssociatedCaseId == associatedCase.AssociatedCaseId);
    } 
```

# ruby-on-rails - Ruby I18n 替代品

> ID：13314517
> 
> 赞同：3
> 
> 时间：2012-11-09T19:19:35.063
> 
> 标签：ruby-on-rails, ruby, magento, internationalization, translation

世界上还有其他`I18n`选择吗？

我只是不喜欢 I18n 存储翻译键的方式。我想像 Magento 一样存储和使用它们 - 例如，密钥只是我想使用英语语言环境显示的字符串。

因此，当我想翻译它时，我只需`nl_NL.csv`使用简单的键值格式为文件提供正确的`nl_NL`语言环境名称（是我的短语的荷兰语类似物。如果 Magento 没有找到翻译文件或翻译键 - 它会显示键本身。虽然关键是英文短语，但我的 HTMl 将“退回”到英文语言环境。

我已经看到了一些覆盖默认 I18n 行为（`fast-gettext`gem 或自定义 I18n 后端）的方法，但是没有我上面描述的 gems 吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-09T19:28:35.773

Ruby i18n 提供[了一堆](https://github.com/svenfuchs/i18n/tree/master/lib/i18n/backend)开箱即用的后端，包括一个 gettext 实现。应该很简单。

```
I18n::Backend::Simple.include(I18n::Backend::Gettext) 
```

如果您不喜欢默认的 gettext 实现，它至少应该提供一个起点来编写您自己的实现。如果您想扩展或替换`Simple`后端以存储密钥或执行不同的查找，那也应该是可行的。简单的后端实际上非常简单，不到 100 loc。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-10T11:06:22.243

`fast_gettext`你可以这样翻译：_("Hello world!") 它有一个可选的网络界面http://github.com/grosser/translation_db_engine [（](http://github.com/grosser/translation_db_engine)截图：[http ://renderedtext.com/images/blog/2012- 10-02/welcome_translations.png](http://renderedtext.com/images/blog/2012-10-02/welcome_translations.png)）并支持多个后端，因此可能可以添加一个 .csv 后端。

高级选项：

*   [http://tr8n.github.io/](http://tr8n.github.io/) 对复数等提供了一些自动帮助
*   [https://github.com/nijel/weblate](https://github.com/nijel/weblate) 与 git 集成

其他一些想法在[http://ruby-i18n.org/wiki](http://ruby-i18n.org/wiki)

# actionscript-3 - 我的对象没有在数组中被删除

> ID：13314520
> 
> 赞同：0
> 
> 时间：2012-11-09T19:19:44.570
> 
> 标签：actionscript-3, flash

问题是当我击落我的敌人时，他会不断重生。可能是我忽略的东西。

我可以拍摄它，它会从舞台上移除，但会重新渲染，因为它仍然存在于我的阵列中。

谢谢

```
private function enemySpawnen():void
    {           
        for(var i:uint = 0; i < hoeveelheidEnemy;i++){
            var enemyShip:SpaceShip = new SpaceShip();
            Enemy[i] = enemyShip;
        }
    }

private function renderEnemy(e:Event):void
    {           
        for(var i:uint = 0; i < hoeveelheidEnemy;i++){              
            if(Enemy[i] != null){
                viewContainer.addChild(Enemy[i]);

                Enemy[i].scaleX = 0.5;
                Enemy[i].scaleY = 0.5;

                Enemy[i].x = 500;
                Enemy[i].y = 400 - i*100;
        }
        }
    }

function shoot(e:Event):void
            {
                kogel.x +=10;

                try{
                    for(var i:uint = 0; i < hoeveelheidEnemy;i++){
                        if(kogel.hitTestObject(Enemy[i])){

                            Enemy.splice(i,0);==>problem when i set it to 1 or i then nothing happens
                            viewContainer.removeChild(Enemy[i]);
                            //trace("hit");
                        }
                    }
                }
                catch(e:Error){

                }
            } 
```

我的源代码可以在这里找到：http: [//dl.dropbox.com/u/50815831/Nieuwe%20map.zip](http://dl.dropbox.com/u/50815831/Nieuwe%20map.zip)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T21:16:01.220

在拼接数组之前，您需要移除子元素。您还需要向后迭代，这样您的索引就不会在循环中改变。

尝试将您的 for 循环更改为以下内容：

```
for(var i:uint = Enemy.length-1; i >= 0;i--){
    if(kogel.hitTestObject(Enemy[i])){
        viewContainer.removeChild(Enemy[i]);
        Enemy.splice(i,1); //do this after the above line, otherwise you're actually removing doing removeChild on the next item in the array
        kogel.removeEventListener(Event.ENTER_FRAME, shoot); //stop the frame handler
        break; //abandon the rest of this loop
    }
} 
```

如果`Kogel`是一颗子弹并且你希望它只影响一个敌人，那么一旦它破坏了某些东西，你就需要打破循环。

作为良好实践的提示。您应该将拍摄功能/输入帧处理程序封装到您的 Kogel 类中，然后传入敌人数组。

我注意到的其他事情，你让你的`renderEnemy`函数运行每一帧，这是完全不必要的，并导致不希望的定位。一起删除该函数并将代码放入您的enemySpawned() 方法中：

```
private function enemySpawnen():void
    {
        for(var i:uint = 0; i < hoeveelheidEnemy;i++){
            var enemyShip:SpaceShip = new SpaceShip();
            Enemy[i] = enemyShip;
            viewContainer.addChild(Enemy[i]);

                Enemy[i].scaleX = 0.5;
                Enemy[i].scaleY = 0.5;

                Enemy[i].x = 500;
                Enemy[i].y = 400 - i*100;
        }
    } 
```

# scheme - 在方案中获取反向列表“奇定位元素”

> ID：13314521
> 
> 赞同：3
> 
> 时间：2012-11-09T19:19:45.023
> 
> 标签：scheme

我是方案的初学者，有人可以给我一些关于如何获得“列表中奇数位置的元素”的想法吗？所以`( A B C D G )`返回`( G C A)`。我得到了相反的列表，我现在需要提取其他所有数字。请帮忙。到目前为止，这是我的代码：

```
(define (list-rev lis)
  (COND
   ((NULL? lis ) '())
   ((LIST? lis)
    (append (oddrev (CDR lis)) ( list (CAR LIS))))
   (ELSE (show " USAGE: (oddrev [LIST])")))) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T19:45:59.330

使用累加器存储答案 - 这将产生反向创建列表的效果（无需使用`append`！）并产生尾递归解决方案。因为这看起来像家庭作业，所以我会给你一些提示，以便你填空：

```
(define (odd-reverse lst acc)
  (cond ((null? lst)        ; if the list is null
         <???>)             ; return the empty list
        (<???>              ; if there's only one element left in the list
         (cons <???> acc))  ; cons that element with the accumulator
        (else               ; otherwise advance the recursion
         (odd-reverse <???> ; advance two positions over the list
                      (cons <???> acc))))) ; cons current element with the acc 
```

像这样称呼它：

```
(odd-reverse '(A B C D G) '())
=> '(G C A) 
```

如果过程必须只接收一个参数（列表），那么编写另一个调用`odd-reverse`总是将 a`'()`作为累加器的初始值的过程是微不足道的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T19:35:00.207

一种方法是使用带有两个参数的函数对列表进行单次传递：列表和布尔值。

如果布尔值为真，那么您希望`cons`将当前元素与其余的列表一起处理。否则，您可以跳过当前元素并继续。您需要每次都翻转布尔值，因为您正在获取所有其他元素。

这有帮助吗？

* * *

如果您愿意，这是代码，但我建议您先自己尝试一下：

> `(define l '(A B C D G)) (define (orev lst acc) (if (null? lst) '() (if acc (cons (car lst) (orev (cdr lst) #f)) (orev (cdr lst) #t)))) (write (orev (reverse l) #t))`

# mongodb - 按条件更新数组中的多个对象

> ID：13314523
> 
> 赞同：1
> 
> 时间：2012-11-09T19:19:59.937
> 
> 标签：mongodb

假设数据库中有这样的对象：

```
{
    _id: <...>,
    arrayOfObjects: [
        {
            criteria: "one",
            value: 5
        },
        {
            criteria: "two",
            value: 5
        },
        {
            criteria: "three",
            value: 5
        },
        {
            criteria: "four",
            value: 5
        },

    ]
} 
```

我想做的是运行类似于以下内容的更新：

```
{
    $inc: {
        "arrayOfObjects.2.value" : -1
    }
} 
```

但是我需要它只影响某些元素，例如 {$or: [{criteria: "one"}, {criteria: "three"}]} 我不能依赖数组索引，因为我拥有的对象副本可能在执行更新（可以在数组中插入、删除、重新排列对象）。

有可能做到这一点吗？这样做的最佳方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T20:46:00.550

您必须将其作为两个单独`update`的命令执行，因为[`$`位置运算符](http://docs.mongodb.org/manual/reference/operator/positional/)仅标识匹配的第一个数组元素：

```
db.coll.update({_id: <...>, 'arrayOfObjects.criteria': 'one'},
    {'arrayOfObjects.$.value': {$inc: -1}})
db.coll.update({_id: <...>, 'arrayOfObjects.criteria': 'three'},
    {'arrayOfObjects.$.value': {$inc: -1}}) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T19:45:38.243

使用此查询

```
{$or: [{arrayOfObjects.criteria: "one"}, {arrayOfObjects.criteria: "three"}]} 
```

为了您的***更新***

编辑：

尝试这个

```
collectionName.update({arrayOfObjects.criteria: "one"}, {$inc: {"arrayOfObjects.$.value" : -1}}, false, true);

collectionName.update({arrayOfObjects.criteria: "three"}, {$inc: {"arrayOfObjects.$.value" : -1}}, false, true); 
```

另外，请查看此链接以获取有关***mongodb 更新*** [的更多信息http://www.mongodb.org/display/DOCS/Updating#Updating-update%28%29](http://www.mongodb.org/display/DOCS/Updating#Updating-update%28%29)

编辑了我的答案。

@JohnnyHK 是对的。它需要 2 个查询。我的错。太晚了，我累了：）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-10T01:13:04.063

我不知道为什么你不能运行 Michai 的查询，因为在我看来它是正确的。所以我发布我的答案。首先，您不能在一个查询中执行此操作。是的，听起来很荒谬，但事情是这样的：[https ://jira.mongodb.org/browse/SERVER-1243](https://jira.mongodb.org/browse/SERVER-1243)

可能这是一个好主意，在那里写或支持这个问题，并且可能在接下来的几个月内他们会解决它。但从 2010 年后的创建时间来看，我非常怀疑:-(

所以这里有一些解决方法，你可以如何做到这一点：首先，如果没有很多标准，你可以使用多个查询来做到这一点：

```
db.coll.update({
  _id: <...>,
  'arrayOfObjects.criteria': 'Criteria 1'
}, {
  'arrayOfObjects.$.value': {
     $inc: -1
   }
}) 
```

并根据不同的标准多次执行此操作。

但是如果有太多的标准，你可能会浪费太多的查询。因此，无论如何您都可以在两个查询中执行此操作。

1.  根据您的标准读取对象。`db.coll.find( {'arrayOfObjects.criteria' : { $in: ['one', 'three'] }})`
2.  在您的应用程序级别修改它
3.  将其保存在 mongo

# javascript - 重新构造javascript数组

> ID：13314527
> 
> 赞同：0
> 
> 时间：2012-11-09T19:20:07.773
> 
> 标签：javascript

我有一个简单的函数来检查选定的 div id，并在存在特定 div 时执行操作：

```
function checkContent_m(){
var mItems = [document.getElementById('m_round1'),document.getElementById('m_round2'),document.getElementById('m_round3'),document.getElementById('m_round4'),
document.getElementById('m_round5'),document.getElementById('m_round6'),document.getElementById('m_round7'),document.getElementById('m_round8')];

if (mItems.length > 0){
        document.getElementById('m_div').style.display = "block";       
}
else{
    document.getElementById('m_div').style.display = "none";
} 
```

}

在我看来，我可能有一种方法可以更有效地构建我的数组。我将如何构造一个等效于的正则表达式：

```
document.getElementById('m_round'+ '*') 
```

这样的声明将允许我添加无限数量的“m_round”div，而无需修改我的 js 函数。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-09T19:26:54.877

考虑使用 jQuery。然后选择具有相似名称的 ID 是微不足道的......

```
$('[id^="m_round"]') 
```

当然，你也可以给你想要的所有元素选择同一个类，然后以这种方式选择它们......

```
$('.m_round') 
```

# visual-studio-2010 - 是否有具有可视分支的 Team Foundation Server GUI 客户端？

> ID：13314532
> 
> 赞同：19
> 
> 时间：2012-11-09T19:20:28.033
> 
> 标签：visual-studio-2010, visual-studio, tfs

我想找到一个显示 TFS 分支历史的 GUI 客户端，就像我习惯在一些流行的 git 客户端中查看的那样。[这是SourceTree](http://www.sourcetreeapp.com/)的一张很棒的图片，尽管[SmartGit](http://www.syntevo.com/smartgit/index.html)也能做到这一点。

![Mac 上 git 的 SourceTree](../Images/a7cbafe72052b1d3c69a7bfb8d5abbb3.png)

看看你的签到历史有多棒？更好的是，您可以选择两个签入并查看任何两个之间更改的差异（您可以选择以查看所选文件的差异的文件列表）。

TFS 是否存在类似的应用程序？

**注意：**我确实找到了这个问题，其标题听起来很接近： [Standalone GUI client for TFS 2010 Source Control](https://stackoverflow.com/questions/2882636)

我很确定“GUI”的答案只是意味着“如果您正在运行 VS2010，您可能已经拥有的 GUI”又名“*不是*命令行”。我没有看到获得这种分支映射和快速更改比较的好解决方案。

或者也许我错过了它，而这样的地图/GUI 已经在 VS 的 TFS 中了？

**编辑：**将文件菜单的图片添加到分支和合并。我似乎没有 M.Radwan 提到的选项。

![在此处输入图像描述](../Images/982387ca010fe61bc51c9d33a43530d3.png)

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2018-03-07T22:58:16.033

布尔容。适用于 Visual Studio 2013、2015、2017、2019。

[https://marketplace.visualstudio.com/items?itemName=StefanLober.Bourgeon](https://marketplace.visualstudio.com/items?itemName=StefanLober.Bourgeon)

[![布尔容截图](../Images/3ded897fc720de2d92410a1ac24cc6b9.png)](https://i.stack.imgur.com/XE7hO.png)

显然作者是一个被强制使用TFS的git用户。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-10T04:00:57.393

您可以使用分支和“跟踪更改”可视化。有关详细信息，请参阅下面的博客文章：

[http://www.edsquared.com/2010/03/17/Branching+And+Track+Changes+Visualization+In+TFS+2010+Is+Awesome.aspx](http://www.edsquared.com/2010/03/17/Branching+And+Track+Changes+Visualization+In+TFS+2010+Is+Awesome.aspx)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-10T15:07:45.550

您可以通过转到源代码管理资源管理器来查看团队项目的分支层次结构，然后单击要开始探索分支结构的分支，单击文件菜单，指向源代码管理，指向分支和合并，然后单击查看层次结构。

[查看团队项目的分支层次结构](http://msdn.microsoft.com/en-us/library/dd465202.aspx)

[![在此处输入图像描述](../Images/322ae4f79e5fe024f52283c725e46142.png)](https://i.stack.imgur.com/EieK9.png)

# jsf-2 - a4j:commandButton onbegin 表单加载时触发事件

> ID：13314533
> 
> 赞同：1
> 
> 时间：2012-11-09T19:20:30.833
> 
> 标签：jsf-2, richfaces

我在使用 a4j:commandButton 时遇到问题。我想要完成的是：

我有一个带有提交和取消按钮的表单。当用户单击提交按钮时，我希望禁用这两个按钮，并弹出一个要求用户确认的弹出窗口。一旦用户确认，如果存在验证错误，我希望重新启用提交和取消按钮。我尝试了很多解决方案，但似乎没有一个有效。如果您有比以下更好的解决方案，请发布。我的问题与下面的代码有关

```
 <h:panelGrid id="submitPanel" columns="2">
                        <a4j:commandButton id="addRequestButton" render="addRequestButton,cancelButton" onbegin="#{addRequestBean.disableSubmitButton()}" styleClass="LoginButtonStyle" value="Submit" 
                                            disabled="#{addRequestBean.submitEnabled}" oncomplete="#{addRequestBean.enableSubmitButton()}"> 
                            <rich:componentControl target="popup" operation="show" />
                        </a4j:commandButton>
                        <h:commandButton  id="cancelButton" styleClass="LoginButtonStyle" value="Cancel" action="main" disabled="#{addRequestBean.submitEnabled}"> 
                        </h:commandButton>
                    </h:panelGrid>
                    <rich:popupPanel id="popup" modal="true" autosized="true" resizeable="false">
                        <f:facet name="header">
                            <h:outputText value="Verify"></h:outputText>
                        </f:facet>
                        <h:panelGrid id="popupgrid" columns="1">
                            <h:outputText styleClass="labelFontStyle" escape="false" value="All changes are final. &lt;br /&gt;Do you wish to continue?"></h:outputText>
                            <h:outputLabel styleClass="labelFontStyle" value="" for="">  
                            </h:outputLabel>
                        </h:panelGrid>
                        <h:panelGrid columns="2">
                            <h:commandButton  styleClass="LoginButtonStyle" value="Ok"  action="#{addRequestBean.saveRequest}"  onclick="#{rich:component('popup')}.hide()"> 
                            </h:commandButton>
                            <h:commandButton  styleClass="LoginButtonStyle" value="Cancel" onclick="#{rich:component('popup')}.hide()"> 
                            </h:commandButton>
                        </h:panelGrid>
                    </rich:popupPanel> 
```

ViewScoped Bean。

我希望 onbegin 事件将支持 bean 变量设置为禁用，并使用 oncomplete 方法重新启用它。麻烦是在表单加载时触发 onbegin 事件，因此禁用了提交和取消按钮。一定是我做错了什么，如果没有，是否有解决方法？如果有比这更好的解决方案，请再次发布。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-10T02:38:59.247

虽然我认为在显示模式弹出窗口后不需要禁用这两个按钮（根据定义，模式弹出窗口意味着在关闭弹出窗口或刷新页面之前，该页面上没有其他操作是可能的），而且您还没有'没有说明您是否希望默认禁用提交按钮（这是您的代码所指示的），您可以通过以下方式实现它

1.  将两个按钮包装在一个`<a4j:outputPanel/>`. 这样，两个按钮都会被该页面上的任何 ajax 操作重新呈现。还有`action="main"`取消按钮在做什么？那是**行不通**的。此外，您选择`<h:commandButton/>`there 意味着它不会触发 ajax 请求来更新视图中的任何内容

    ```
    <a4j:outputPanel ajaxRendered="true" layout="block">
    <a4j:commandButton id="addRequestButton" styleClass="LoginButtonStyle" action = "#{addRequestBean.toggleSubmitButtonState}"  value="Submit" disabled="#{addRequestBean.submitEnabled}" oncomplete="#{rich:component('popup')}.show()"/> 
    <h:commandButton id="cancelButton" styleClass="LoginButtonStyle" value="Cancel" action="main" disabled="#{addRequestBean.submitEnabled}"/> 
    </a4j:outputPanel> 
    ```

2.  为您的按钮添加一个用于切换按钮状态的方法表达式

    ```
     public void toggleSubmitButtonState(){
        this.submitEnabled = !submitEnabled;     

      } 
    ```

    你真的不应该将两个按钮的状态绑定到同一个布尔值，因为从语义上讲，它们在做不同的事情，但我会坚持你在这里已经拥有的

3.  我建议您将该弹出窗口从它当前与所有其他组件共享的表单中删除，但同样，让我们​​使用您所拥有的。同样，您在`<h:commandButton/>`这里选择的单独将确保您没有执行任何 ajax。添加`<f:ajax/>`或将这些按钮转换为`<a4j:commandButton/>`

    ```
     <h:commandButton  styleClass="LoginButtonStyle" value="Ok"  action="#{addRequestBean.saveRequest}"  oncomplete="#{rich:component('popup')}.hide()"/>
      <h:commandButton  styleClass="LoginButtonStyle" value="Cancel" onclick="#{rich:component('popup')}.hide()"/> <!-- This won't work as is, it will refresh the entire page instead of just firing the javascript event. Change to a4j--> 
    ```

4.  向该页面添加`<f:event/>`事件处理程序以检查验证失败。

    在您的支持 bean 中，我们添加了检查验证失败的方法

    ```
    public void checkValidationFailures(){

    FacesContext context = FacesContext.getCurrentInstance();
    if (context.isPostback() && context.isValidationFailed()){ //if the request is a postback and validation failed

       this.submitEnabled = true;             

      }
    } 
    ```

    这仅在您在方法中抛出 a 时才`ValidatorException`有效`saveRequest`。否则，您将不得不在方法中自己处理故障并显式设置`submitEnabled`值`true`，然后重新渲染按钮。这就是为什么您可能应该将弹出窗口中的这些按钮转换为`a4j`.

# php - FTP 删除和 FTP 取消链接不起作用

> ID：13314538
> 
> 赞同：1
> 
> 时间：2012-11-09T19:20:43.130
> 
> 标签：php, file, ftp, delete-file

我想使用 PHP 删除 FTP 文件夹中的特定文件。

这是我到目前为止所做的工作：这是我用来回显图像视图和复选框的代码，以便用户可以选择图像然后单击删除按钮。

```
for ($i = 0; $i < $r; $i++)
{   
    echo "<form action='somephpfile.php' method='post' enctype='multipart/form-data'>"
        . "<img src='$images[$i]' width='50' height='50' />"
        . "<input type='checkbox' name='$i' value='Restaurant' />"
        . $images[$i]
        . "<input type='submit' name='submit' value='Delete' />"
        . "</form>";
} 
```

这就是我尝试删除用户想要删除的文件的方式：

```
$images = ftp_nlist($conn_id, "somefolder");
$r = count($images);

for ($i = 0; $i < $r; $i++)
{
    if ($selected_checkbox = $_POST['$i'])
    {   
        $myFile = "$images[$i]";
        $fop = fopen($myFile, "w") or die("can not open file");
        $fclose($fop); 
        unlink($fop); 

        if (ftp_delete($conn, $myFile))
        {
            echo "$file deleted successful\n";
        }
        else
        {
            echo "could not delete $file\n";
        }
    }
}

ftp_close($conn); 
```

为什么这个例子不起作用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T19:59:16.130

以下代码行没有正确比较`$selected_checkbox`，`$_POST['$i']`而是分配了发布的值，它总是评估为`true`：

```
if ($selected_checkbox = $_POST['$i']) 
```

您想使用**比较运算符`==`**而不是赋值运算符`=`。请查看本[PHP 运算符概述中的](http://www.w3schools.com/php/php_operators.asp)*比较运算符*部分。

# javascript - 如何在循环中使用 Javascript 在图像上添加 ondblclick？

> ID：13314539
> 
> 赞同：-1
> 
> 时间：2012-11-09T19:20:42.720
> 
> 标签：javascript, dom

> **可能重复：**
> [Javascript 循环中的事件处理程序 - 需要闭包吗？](https://stackoverflow.com/questions/341723/event-handlers-inside-a-javascript-loop-need-a-closure)

```
for i = 1 to 5
{
 var el = document.createElement('img');
 el.ondblclick = somefunction();
 mydiv.appendChild(el);
} 
```

似乎 el.ondblclick = somefunction('test'); 不做任何插入。

我知道我能做到。。

```
el.ondblclick= function() { somefunction('test') }; 
```

..但这在循环中不起作用！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-09T19:24:10.880

你的语法是错误的。

```
for (var i = 1; i <= 5; i++) // initialization, condition, loop step
{
    var el = document.createElement('img');
    // you do not want to call `somefunction`, but refer to it:
    el.ondblclick = somefunction;
    mydiv.appendChild(el);
} 
```

如果您的问题是，您想`i`在回调函数中使用：

```
for (var i = 1; i <= 5; i++)
{
    var el = document.createElement('img');
    el.ondblclick = (function(i) { // bind i
        return function() { // return closure
            toggleClass('svg_container_' + i);
        };
    })(i);
    mydiv.appendChild(el);
} 
```

比照

*   [如何在 JavaScript 中构建循环？](https://stackoverflow.com/questions/52080/how-do-i-build-a-loop-in-javascript)
*   [JavaScript：什么是 addEventListener？](https://stackoverflow.com/questions/2695793/javascript-what-is-addeventlistener)
*   [JavaScript 闭包是如何工作的？](https://stackoverflow.com/questions/111102/how-do-javascript-closures-work)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T20:03:08.067

这是最终的代码。我个人讨厌人们不发布工作示例

```
 var sCurMonthId = sMonthId.substr(4, 2);
        var cellRight = oCurRow.insertCell(-1);
        cellRight.colSpan = iNumCells;
        for (svg = 1; svg < iNumCells; svg++)
        {
            var div = document.createElement('div');
            div.className = 'svg_container';
            div.id = 'svg_container_'+svg+'_'+sMonthId;
            cellRight.appendChild(div);
            var el = document.createElement('img');
            el.style.width = svg == 5 ? '99.5%' : '49%';
            el.className = 'svg_chart';
            el.style.cssFloat = svg%2 == 0 ? 'right' : 'left';
            el.ondblclick = (function(svg) {
                return function() {
                    toggleClass('svg_container_'+svg+'_'+sMonthId, 'svg_container', 'svg_expanded');
            };
    })(svg);
            el.src = 'mySite.tld';
            div.appendChild(el);
        } 
```

# android - Android TextView 将文本显示为链接

> ID：13314540
> 
> 赞同：4
> 
> 时间：2012-11-09T19:20:44.210
> 
> 标签：android, hyperlink, textview

我的应用中有 TextView，我想将文本显示为链接。

我有“查看地图”字符串，我想将其显示为超链接（蓝色和下划线）。

我正在尝试这个：

```
tvSeeMap.setText(getResources().getString(R.string.see_map));
    Linkify.addLinks(tvSeeMap, Linkify.ALL); 
```

但它不会工作。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-09T20:12:58.510

我找到了解决方法

```
 String tempString = new String(getResources().getString(R.string.see_map));
 SpannableString content = new SpannableString(tempString);
 content.setSpan(new UnderlineSpan(), 0, tempString.length(), 0);
 tvSeeMap.setText(content);
 tvSeeMap.setTextColor(getResources().getColor(R.color.blue)); 
```

就那么简单。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-09T19:30:37.440

采用

```
Linkify.addLinks(tvSeeMap,Linkify.WEB_URLS); 
```

代替

```
Linkify.addLinks(tvSeeMap, Linkify.ALL); 
```

在 textView 中显示超链接或 web url 作为链接

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-09T19:27:25.733

链接是否有“http://”前缀？如果没有，请尝试添加它。或者可能是链接前后没有空格

# java - 通过方法和 GUI 获取输入

> ID：13314544
> 
> 赞同：1
> 
> 时间：2012-11-09T19:20:58.773
> 
> 标签：java, swing, user-interface, file-io, methods

所以，我有一个涵盖很多内容的任务。我需要：

*   有一个底部有两个按钮的 GUI。两个按钮都从我的临时文件夹中获取一个单独的文件。
*   我必须使用我们过去使用的方法（collectGrades 和averageGrade），并在单击第二个按钮时将该数据输出到中间的文本字段框

**我需要从studentscores.txt（这是一个int字段和一个double字段）中获取数据并将它们放入StringBuilder中，然后将stringBuilder输出到jTextframe上。**

```
private void jbtReadFileActionPerformed2(ActionEvent evt) {
    try {
        File inFile = new File("c:/temp/studentscores.txt");
        Scanner input = new Scanner(inFile);
        String fileContents = "";
        while(input.hasNext()) {
        students.add(new Student(input.nextInt(),input.nextLine()));

    } // end while

    for(int o = 0;o < students.size();o++) {
    students.get(o).setGrades(collectGrades(students.get(o).getStuId()));   

    jtxtAfileContents.setText("%-10d %-20s %.2f\n", students.get(o).getStuId(),     students.get(o).getStuName(), averageGrade(students.get(o).getGrades()));); 
```

我怎样才能让它工作？

```
import java.awt.*        
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.io.*;     
import javax.swing.*;
import java.util.*;
import java.util.logging.Level;
import java.util.logging.Logger;

    public class P_Supplemental_11 extends JFrame {

    JPanel jpnl1 = new JPanel();
    JPanel southPanel = new JPanel();
    JButton jbtReadFile1 = new JButton("Get Student Names");
    JButton jbtReadFile2 = new JButton("Get Student Grades");
    JTextField jtxtFilePath = new JTextField();
    JLabel jlblDesc = new JLabel("Click a button to open each file!");
    JTextArea jtxtAfileContents = new JTextArea();

    P_Supplemental_11() {
    this.setLayout(new BorderLayout(5, 10));
    jpnl1.setLayout(new GridLayout(2, 2));
    jpnl1.add(jlblDesc);
    //jpnl1.add(jtxtFilePath);
    southPanel.add(jbtReadFile1);
    southPanel.add(jbtReadFile2);
    add(southPanel, BorderLayout.SOUTH);
    add(jpnl1, BorderLayout.NORTH);
    add(jtxtAfileContents, BorderLayout.CENTER);

    jbtReadFile1.addActionListener(new ActionListener() {
     public void actionPerformed(ActionEvent evt) {

         jbtReadFileActionPerformed(evt);
     }

    });

    jbtReadFile2.addActionListener(new ActionListener() {
     public void actionPerformed(ActionEvent evt) {

         jbtReadFileActionPerformed2(evt);
     }

    });

    } // end constructor

    class Student {
    private int stuId;
    private String stuName;
    private ArrayList<Double> grades;

    Student(int idIn, String nameIn) {

        this.stuId = idIn;
        this.stuName = nameIn;
       } // end student class

        public int getStuId() {
            return stuId;
        }

        public void setStuId(int stuId) {
            this.stuId = stuId;
        }

         String getStuName() {
            return stuName;
        }

        public void setStuName(String stuName) {
            this.stuName = stuName;
        }

        public ArrayList<Double> getGrades() {
            return grades;
        }

        public void setGrades(ArrayList grades) {
            this.grades = grades;
        }

   } // end class Student

    ArrayList<Student> students = new ArrayList();

    private void jbtReadFileActionPerformed(ActionEvent evt) {
    try {
        File inFile = new File("c:/temp/studentnames.txt");
        Scanner input = new Scanner(inFile);
        String fileContents = "";
        while(input.hasNext()) {
            fileContents+= input.nextLine() + "\n";
        } // end while

        jtxtAfileContents.setText(fileContents);
        input.close();

    } // end action method for jbtReadFile button
    catch (FileNotFoundException ex) {
        Logger.getLogger(P_Supplemental_11.class.getName()).log(Level.SEVERE, null, ex);
    }
   }

   private void jbtReadFileActionPerformed2(ActionEvent evt) {
    try {
        File inFile = new File("c:/temp/studentscores.txt");
        Scanner input = new Scanner(inFile);
        String fileContents = "";
        while(input.hasNext()) {
        students.add(new Student(input.nextInt(),input.nextLine()));

    } // end while

    for(int o = 0;o < students.size();o++) {
    students.get(o).setGrades(collectGrades(students.get(o).getStuId()));   

    jtxtAfileContents.setText("%-10d %-20s %.2f\n", students.get(o).getStuId(),     students.get(o).getStuName(), averageGrade(students.get(o).getGrades())););

        /*String fileContents = "";
        while(input.hasNext()) {
            fileContents+= input.nextLine() + "\n";
        } // end while
        input.close();
        jtxtAfileContents.setText(collectGrades.getStuName);
        */

    }
    } // end action method for jbtReadFile button
    catch (FileNotFoundException ex) {
        Logger.getLogger(P_Supplemental_11.class.getName()).log(Level.SEVERE, null, ex);
    }
}

public static ArrayList <Double> collectGrades(int inId) {

    ArrayList <Double> outGrade = new ArrayList();
    try {
        File inFile = new File("c:/temp/studentScores.txt");
           Scanner input = new Scanner(inFile);
           while(input.hasNext()) {
           int tmpInt = input.nextInt();
           double tmpDbl = input.nextDouble();
           if(tmpInt == inId) {
               outGrade.add(tmpDbl);
           } // end if
           } // end while

    } catch (FileNotFoundException ex) {
        Logger.getLogger(P_Supplemental_11.class.getName()).log(Level.SEVERE, null, ex);
    } // end catch

    return outGrade;
} // end method

public static double averageGrade(ArrayList <Double> gradeIn) {
    double outAvg = 0.0;

    for(int y = 0; y < gradeIn.size();y++) {
    outAvg+= gradeIn.get(y);
} // end for

return outAvg/gradeIn.size();

}

public static void main(String[] args) {
    P_Supplemental_11 frame = new P_Supplemental_11();
    frame.setTitle("P_Supplemenetal_10");
    frame.setSize(410, 520);
    frame.setLocationRelativeTo(null);
    frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    frame.setVisible(true);

} // end main
} // end public class P_Supp_11 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T20:44:33.650

我把你的代码让它运行，这是你的意思吗？

![按下按钮](../Images/552359d06248e59c409d101b958254fd.png)

代码：

```
import java.awt.*;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;

import javax.swing.*;

public class Student extends JFrame {

    public static void main(String[] args) {
        SwingUtilities.invokeLater(new Runnable() {
            @Override
            public void run() {
                JFrame frame = new JFrame("Splashing");
                StudentView view = new StudentView();
                frame.getContentPane().add(view);
                frame.setDefaultCloseOperation(WindowConstants.EXIT_ON_CLOSE);
                frame.setMinimumSize(new Dimension(800, 450));
                frame.setLocationRelativeTo(null); // Center
                frame.pack();
                frame.setVisible(true);
            }
        });
    }

    static class StudentView extends JPanel {
        JPanel jpnl1 = new JPanel();
        JPanel southPanel = new JPanel();
        JButton jbtReadFile1 = new JButton("Get Student Names");
        JButton jbtReadFile2 = new JButton("Get Student Grades");
        JTextField jtxtFilePath = new JTextField();
        JLabel jlblDesc = new JLabel("Click a button to open each file!");
        JTextArea jtxtAfileContents = new JTextArea();

        StudentView() {
            this.setLayout(new BorderLayout(5, 10));
            jpnl1.setLayout(new GridLayout(2, 2));
            jpnl1.add(jlblDesc);
            //jpnl1.add(jtxtFilePath);
            jbtReadFile2.addActionListener(new ActionListener() {
                @Override
                public void actionPerformed(ActionEvent e) {
                    SwingUtilities.invokeLater(new Runnable() {
                        @Override
                        public void run() {
                            jtxtAfileContents.setText(collectGrades());
                        }
                    });
                }
            });
            southPanel.add(jbtReadFile1);
            southPanel.add(jbtReadFile2);
            add(southPanel, BorderLayout.SOUTH);
            add(jpnl1, BorderLayout.NORTH);
            add(jtxtAfileContents, BorderLayout.CENTER);
        }

        private String collectGrades() {
            StringBuilder builder = new StringBuilder("Hello World");
            builder.append("More info");
            return builder.toString();
        }
    }
} 
```

# c# - 如何在与 POST 一起使用的输入中设置文本？

> ID：13314546
> 
> 赞同：0
> 
> 时间：2012-11-09T19:21:06.840
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-3, razor

当我点击提交时，我有以下内容要发布以创建。只是，当我点击提交时，我会收到一个对象引用错误，它指的是我的 id = debugTxt 输入值。我怀疑因为我丢失了对象状态，所以我收到了这个错误。

所以我的问题是如何使用来自模型的初始视图设置文本并允许用户在 POST 上更新？

```
@using (Html.BeginForm("Create", "PhysDoc"))
{
    <table>
        <tr>
           <td class="title">Debug Mode</td>
           <td>
                This input does the initial GET correctly.  On POST I get object ref error related to the value inside @Model.
                <input type="text" id="debugTxt" name="debugModeTxt" value="@Model.DebugMode" />
            </td>  
        </tr>
        <tr>
            <td>
                <input type="submit" value="Submit" />
            </td>
        </tr>
    </table>                
} 
```

创建方法（注意这里没有抛出异常）。

```
 [HttpPost]
    public ActionResult Create(string debugModeTxt)
    {
        PhysdocSettings settings = new PhysdocSettings();
        settings.DebugMode = bool.Parse(debugModeTxt);
        PhysDocSettingsBL settingBL = new PhysDocSettingsBL();
        settingBL.UpdateSettings(settings);
        return View("Index");
    } 
```

异常发生在这里：

`value="@Model.DebugMode"` 如果我改变`value="True"`我的代码工作正常。但这并没有给我一个等于 Model.DebugMode 的初始值。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-09T19:43:42.177

试试这个...使用 HTML 帮助器并为字段指定默认值，如下所示：

```
@Html.TextBox("[name]", @Model.DebugMode) 
```

如果这不起作用，您能否详细说明结果？

* * *

当您调用`return View("Index");`. 您只是在调用视图，因此您确实会得到一个空引用异常。

# objective-c - 纯文本中的 dateFromString 日月年

> ID：13314548
> 
> 赞同：0
> 
> 时间：2012-11-09T19:21:23.130
> 
> 标签：objective-c

```
 NSDateFormatter *dateFormat = [[NSDateFormatter alloc] init];
[dateFormat setDateFormat:@"dd-MM-yyyy"];
NSDate *dateInitial = [dateFormat dateFromString:self.labelDateInitial.text];
NSDate *dateEnd = [dateFormat dateFromString:self.labelDateEnd.text];
NSLog(@"%@", dateInitial);
NSLog(@"%@", dateEnd); 
```

为什么我收到 dateInitial 和 dateEnd 的空值？

在标签日期是纯文本

2012 年 11 月 9 日

dd-MM-yyyy 是否正确？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T19:25:46.853

If your date string value is `nine november 2012` then using `dd-MM-yyyy` will not help as its expecting date string as `09-11-2012`.

For month as `november`, I think you can use `MMMMM`, not sure about `nine`.

i.e. if `09 November 2012` then `dd MMMM yyyy` can be used.

**Edit:**

To get the date formatted in specific timezone, set the timezone to the format as below:

```
 [dateFormat setTimeZone:[NSTimeZone timeZoneWithName:@"UTC"]]; 
```

Use appropriated Timezone string e.g. `EST`, `PTC` etc.

# php - 使用选项构建查询

> ID：13314550
> 
> 赞同：1
> 
> 时间：2012-11-09T19:21:28.743
> 
> 标签：php, mysql

我需要在 MySQL 中进行查询。但是需要使用用户选择的选项动态地进行查询。

选项是*Day*、*Month*、*Year*和*SellerID*。

用户将选择是否要按天、月和年查看卖家的销售历史。

但是，假设他想查看**2012 年 3 月**的所有销售额。他将把*Day*留空，并收到从 3 月 1 日到 3 月 31 日的所有销售额...

也许他将选项*Month 保留*为空白，并设置*Day=15*和*Year=2012*，他将获得 2012 年全年的销售历史，仅每月的第 15 天。

我的程序需要构建一个完全涵盖他想要查看的内容的查询。

问题是：
**我真的需要`IF`在我的代码上使用数千个吗？难道没有更好的方法来做到这一点吗？**

```
if( ($day==0) && ($month==0) && ($year>0) ){

    $query.="`date`>='{$year}-01-01' AND `date`<='{$year}-12-31'";

}elseif( ($day==0) && ($month>0) && ($year>0) ){

    $query.="`date`>='{$year}-{$month}-01' AND `date`<='{$year}-{$month}-31'";

}elseif{

etc... 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-09T19:25:10.000

您可以在使用它们之前预处理这些值：

```
$year  = $year  > 0 ? (int) $year  : 2012;
$month = $month > 0 ? (int) $month : 1;
$day   = $day   > 0 ? (int) $day   : 1;

$query .= sprintf("`date` BETWEEN '%4d-%2d-%2d' AND '%4d-%2d-%2d'",
    $year, $month, $day,
    $year, $month, 31
); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T19:33:51.753

RESTRICT SORTING ON YEAR, MONTH, DATE 格式或 MONTH、Year Month 格式或 Year 格式，意味着在层次结构中对您的排序进行分级，为此您需要在此处处理 3 个案例，这些案例仅适用于两个 WHERE 子句 DATE>=DYNAMIC_START_DATE 和 DATE< =DYNAMIC_END_DATE（您也可以在此处使用 BETWEEN）

*   如果只给出年份，那么您应该将开始日期设置为 1 月 1 日，结束日期设置为 12 月 31 日
*   如果给出了月份和年份，那么您应该将开始日期设置为第一个月，结束日期设置为 [2830/31] 月份年份
*   如果只给出日期和月份和年份，那么您应该将开始日期设置为日期月份年份，并将结束日期设置为日期月份年份。

# matlab - 在 matlab + 夹克中使用 regionprops 获得加权质心

> ID：13314551
> 
> 赞同：4
> 
> 时间：2012-11-09T19:21:31.023
> 
> 标签：matlab, image-processing, gpu, jacket

使用 Matlab 的图像处理工具箱，我可以使用[`regionprops`函数](http://www.mathworks.com/help/images/ref/regionprops.html)找到加权质心。这是因为该函数可以返回 `WeightedCentroid`图像的每个标记部分的像素索引或像素索引列表，`PixelList`然后很容易计算加权质心。然而，[夹克在 regionprops 中的支持](http://wiki.accelereyes.com/wiki/index.php/Regionprops)只返回一个未加权的质心（或`bwlabel`之前使用获得的二元“岛”的质心）。这意味着以某种方式使用有关像素位置的信息来找到这些质心。

如何访问夹克的 regionprops 信息，了解它用于计算未加权质心的像素列表，以便我可以使用它来计算加权质心？（这样做的一个重要原因是因为该函数`find`不能在`gfor`循环中使用，否则可以`find`输出...的不同值`bwlabel`）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-19T17:03:48.757

我没有测试过性能，但这里有一个算法来获得加权质心和面积。这应该适用于夹克和 matlab（取决于输入的类型）。

```
function [WC, WA] = WeightedMoments(L, I);
  [m, n] = size(L);
  [keys, idx] = sort(L(:));

  % Get weights and locations in sorted order
  w = I(idx);
  idx = idx - 1; % Convert to 0-index for simplicity
  x = floor(idx / m);
  y = idx - x * m;

  % Location of the starting point of each region.
  locs = find([diff(keys); 1]);

  % Weighted area and locations
  Msum = cumsum([w, x.*w, y.*w]);
  Mloc = diff(Msum(locs,:));
  M00 = Mloc(:, 1);
  M10 = Mloc(:, 2);
  M01 = Mloc(:, 3);

  % Weighted centroids and areas
  WC = [M10 ./ M00, M01 ./ M00] + 1; % Convert back to 1-index
  WA = M00;
end 
```

PS 我是 AccelerEyes 的开发人员。抱歉耽搁了。

**编辑**：稍微清理一下代码。

# ruby-on-rails - 为什么通过方法保存对象时嵌套字段的顺序相反

> ID：13314554
> 
> 赞同：0
> 
> 时间：2012-11-09T19:21:57.593
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我在问答模型之间建立了一个嵌套资源。这是我用来创建问题的表格，我只是包装相关信息：

```
<fieldset>
  <legend>Question</legend>
    <%= render 'new_question_fields', question_form: question_form %>

  <legend>Answer</legend>
    <%= question_form.simple_fields_for :answers do |answer_form| %>
      <%= render 'answer', f: answer_form %>
    <% end %>
</fieldset> 
```

这是我的`answer`部分：

```
<div class="answer_fields well fields">
  <%= f.input :correct, label: 'This answer is correct.' %>
  <%= f.input :content, input_html: { rows: 3, class: 'span6' } %>
</div> 
```

这是我的索引页面，显示问题：

```
<ul class="questions">
  <% @questions.each do |question| %>
    <li><%= question.content %></li>
    <ol class="answers">
      <% question.answers.each do |answer| %>
        <li><%= answer.content %></li>
     <% end %>  
    </ol>
  <% end %>
</ul> 
```

在创建新问题的页面上，我为 4 个问题的答案构建了 4 个字段。这是 4 个文本区域的 html 代码，当它们在 html 中呈现时：

```
<textarea cols="40" id="question_answers_attributes_0_content" name="question[answers_attributes][0][content]" rows="3"></textarea>
<textarea cols="40" id="question_answers_attributes_1_content" name="question[answers_attributes][1][content]" rows="3"></textarea>
<textarea cols="40" id="question_answers_attributes_2_content" name="question[answers_attributes][2][content]" rows="3"></textarea>
<textarea cols="40" id="question_answers_attributes_3_content" name="question[answers_attributes][3][content]" rows="3"></textarea> 
```

比如说，我的字段顺序是 0,1,2,3，但是当我保存问题时，答案的顺序是相反的，例如：

如果我输入了 4 个答案`A,B,C,D`，对应表单上 textarea 的顺序是`0,1,2,3`，当问题被保存时，它会显示：`D,C,B,A`，这意味着它首先保存了 textarea 的值`question[answers_attributes][3][content]`，然后`question[answers_attributes][2][content]`...

**更新：**这是我的索引并在问题控制器中创建操作：

```
def index
  @questions = Question.where("user_id = ?", current_user.id).paginate(page: params[:page], per_page: 10)
end

def create
  @question = Question.new(params[:question])
  @question.question_type_id = params[:question_type_id]
  @question.user_id = current_user.id

  if @question.save
    flash[:success] = "Successfully created question."
    redirect_to questions_url
  else
    render 'new'
  end
end 
```

我的`answer`模型：

```
class Answer < ActiveRecord::Base
  attr_accessible :content, :question_id, :correct
  belongs_to :question
end 
```

保存问题时会发生什么？这是因为`save`rails的方法还是我的显示形式？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T20:06:19.640

*   `question.answers.order("created_at ASC")...`或者;
*   `question.answers.order("created_at DESC")...`

其中之一应该颠倒顺序。

--

但更多关于该主题 - 我想这是关于如何处理堆栈。您通过在创建每个答案时将其作为问题的属性传递来创建每个答案，这可能就是混合的地方。来自 Rails 和带有 log_level 的数据库的日志`:debug`应该有助于查看它是如何进入数据库的。

也`id ASC`可能对您有用，因为您的 id 无论如何都会随着时间而增加，然后它与`created_at ASC`- 但依赖 id 可能并不总是一个好方法，因为有时 id 可能是随机的。

# ssl - 通过路由器设置的基本 SSL

> ID：13314556
> 
> 赞同：0
> 
> 时间：2012-11-09T19:22:18.723
> 
> 标签：ssl, certificate, router, nat

如果可以的话，一个关于 SSL 的基本问题......

我有一个亚音速服务器，可以在 NAT 路由器后面使用 SSL 证书。假设 NAT 路由器的名称为 gateway.mydomain.com，而我的亚音速服务器的名称为 subsonic.mydomain.com。如果我想让 subosnic 服务器使用证书，我是使用 subsonic 服务器的名称还是 NAT 路由器的名称？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T19:32:45.767

If you want clients to connect with SSL to your subsonic server, the certificate needs to match the domain of the server so you will want to use subsonic.mydomain.com and have the router port forward whatever ports are needed for subsonic. Also the IP of subsonic.mydomain.com would need to be the routers IP (unless you setup the router to allow the subsonic server to have a WAN IP address.)

# java - 在同一张表上的同一事务中绑定springjdbc和hibernate会话工厂

> ID：13314562
> 
> 赞同：1
> 
> 时间：2012-11-09T19:22:53.963
> 
> 标签：java, spring, hibernate, transactions, sessionfactory

我有一个 Spring 服务方法，它在同一个表上执行两个数据库操作。一个使用 Hibernate Session Factory，另一个使用纯 Spring JDBC。但是，我希望两者都绑定到一个事务中。使用下面的代码，似乎创建了 2 个不同的事务，第一个事务为第二个事务锁定表。

我如何确保两个操作都在一个事务下。?

**我的服务等级**

```
@Service
public class MyService{

@Autowired
IMyDao mydao;

@Transactional
public void myMethod(){
 ...    
 mydao.save(entity);  //This uses hibernate 
 ...
 mydao.saveBulk(List<Entity> entities>;  //This uses spring jdbc for performance reasons.
}

...
} 
```

**MyDAOImpl.class**

```
public class MyDAOImpl extends SimpleJDBCSupport implements IMyDao{
   private SessionFactory sessionFactory;

@Autowired
public MyDAOImpl (
        @Qualifier("sessionFactory") final SessionFactory sessionFactory,
        @Qualifier("dataSource") final DataSource dataSource) {
    this.sessionFactory = sessionFactory;
    this.setDataSource(dataSource);
}
  public void save(Entity entity){
      sessionFactory.getCurrentSession().createQuery("insert into tableA... " ).executeUpdate() ;

  }
  public void saveBulk(List<Entity> entites){
       ...// prepare batch insert data. 
      this.getJdbcTemplate().batchUpdate("insert into tableA... " , batchPreparedStmtSetter)

  }
} 
```

**弹簧配置**

```
<bean id="dataSource" class="com.atomikos.jdbc.AtomikosDataSourceBean">
    <property name="xaDataSourceClassName" value="${advdb.jdbc.dataSourceClassName}" />
    <property name="xaProperties" ref="dataSourceProperties" />
    <property name="uniqueResourceName" value="${advdb.jdbc.uniqueResourceName}" />
    <property name="testQuery" value="${advdb.jdbc.testQuery}" />
    <property name="minPoolSize" value="${advdb.jdbc.minPoolSize}" />
    <property name="maxPoolSize" value="${advdb.jdbc.maxPoolSize}" />
    <property name="maxIdleTime" value="${advdb.jdbc.maxIdleTime}" />
    <property name="borrowConnectionTimeout"     value="${advdb.jdbc.borrowConnectionTimeout}" />
    <property name="reapTimeout" value="${advdb.jdbc.reapTimeout}" />
    <property name="maintenanceInterval" value="${advdb.jdbc.maintenanceInterval}" />
</bean>

<!-- Session Factory --> 

<bean id="sessionFactory"    class="org.springframework.orm.hibernate3.annotation.AnnotationSessionFactoryBean" p:dataSource- ref="dataSource">
    <property name="hibernateProperties">
        <props>
            <prop key="hibernate.dialect">${hibernate.dialect}</prop>
            <prop key="hibernate.show_sql">${hibernate.show_sql}</prop>
            ...
                            ...
</bean> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-10T03:26:09.270

事务边界由使用的连接控制。只要你使用的是同一个连接（可以是同一个 Hibernate Session 实例，同一个 JPA 实体管理器实例或者同一个 Spring JdbcTemplate），在当前连接上的事务之前，被独占锁定在这个连接中的表将不可供其他人使用要么已提交，要么已回滚。

在您的情况下，由于您使用不同的连接（通过`HibernateSession`和`SimpleJdbcTemplate`）进行正常保存和批量保存，因此它们不能成为同一事务的一部分。这两个动作必须一个接一个地序列化。

# macos - mac osx 上的 exec() 命令返回 5

> ID：13314564
> 
> 赞同：1
> 
> 时间：2012-11-09T19:23:00.520
> 
> 标签：macos, command, exec

我正在尝试执行缩略图转换器脚本 phantomjs。在我的终端上它工作正常，但在我的网页中返回 5 个代码。是权限的问题吗？我正在使用 php 5.3 + MAMP

```
 $output = array();
            $command = "./bundles/MainBundle/js/phantomjs /bundles/MainBundle/js/convert.js";
            $return_var=0;
            exec($command,$output,$return_var); 
```

帮助！请

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T13:24:57.753

`DYLD_LIBRARY_PATH`我遇到了同样的问题，并通过取消设置似乎由 MAMP 设置但会混淆 PhantomJS的变量来修复它。

```
$command = "unset DYLD_LIBRARY_PATH ; ./bundles/MainBundle/js/phantomjs"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-13T13:40:15.930

您也可以使用此方法：

在 /Applications/MAMP/Library/bin/envvars 文件中并注释以下行，如下所示：

```
#DYLD_LIBRARY_PATH="/Applications/MAMP/Library/lib:$DYLD_LIBRARY_PATH"
#export DYLD_LIBRARY_PATH 
```

并重新启动 Apache。

*复制自[https://stackoverflow.com/a/10125539/291573](https://stackoverflow.com/a/10125539/291573)*

# vb.net - vb.net 中的 2 个线程 - 无法同时访问同一个类

> ID：13314565
> 
> 赞同：0
> 
> 时间：2012-11-09T19:23:02.457
> 
> 标签：vb.net, multithreading

新手程序员在这里 - 我有一个应用程序，我启动了两个线程，然后它们运行两个不同的循环。沿着循环线的某个地方，两个线程都访问同一个类。在一个循环中，我在该类的构造函数中实例化一个对象，然后在方法中使用该对象 - 然后当第二个循环尝试实例化同一个类时，它基本上只是位于构造函数上并且不执行那行代码.

我是否足够清楚地解释我的问题？有谁知道为什么会发生这种情况，或者更重要的是为什么？

我一直在研究 SyncLock，但我不知道如何在这里实现它。我应该只同步锁定我的整个班级，所以一次只能访问一个循环吗？我觉得这种方式违背了线程的目的。任何人都可以提供的任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T12:28:49.437

私有共享变量最终成为了答案。

# java - 运行大量数据时使用 playOrm 重置连接

> ID：13314567
> 
> 赞同：2
> 
> 时间：2012-11-09T19:23:10.673
> 
> 标签：java, cassandra, playorm, astyanax

我有一个 hadoop 进程，它连接到 reduce 部分中的 cassandra 键空间。数据由 playORM 保存。发生的情况是：我在同一台机器上运行这个 hadoop 进程和 cassandra，所以 playORM 只是连接到 localhost 上的 cassandra。当我处理少量数据时，该过程运行得很好，但是当我处理大量数据（在这种情况下只有 500 000 条记录）时，我得到了下面的异常。我想知道这是否可能是 astyanax 池配置中的问题（由 playORM 完成，所以我不知道如何更改这些设置），或者是否可能是 playORM 本身甚至我的 Cassandra 配置中的问题。现在一切都在一个主机上运行，​​我认为当我们配置集群时情况可能会变得更糟，因为许多 hadoop 机器将连接到许多 cassandra 机器。

有什么可能出错的提示吗？

```
CF=[tablename=Localization] persist rowkey=1bd9b46a-5b66-41ae-9756-dd91f44194ea
CF=User index persist(cf=[tablename=User])=[rowkey=/User/id] (table found, colmeta not found)
CF=[tablename=User] persist rowkey=1bd9b46a-5b66-41ae-9756-dd91f44194ea
java.lang.RuntimeException: com.netflix.astyanax.connectionpool.exceptions.ConnectionAbortedException: ConnectionAbortedException: [host=localhost(127.0.0.1):9160, latency=611(611), attempts=1] org.apache.thrift.t
ransport.TTransportException: java.net.SocketException: Connection reset
        at com.alvazan.orm.layer9z.spi.db.cassandra.CassandraSession.sendChanges(CassandraSession.java:110)
        at com.alvazan.orm.logging.NoSqlRawLogger.sendChanges(NoSqlRawLogger.java:50)
        at com.alvazan.orm.layer5.nosql.cache.NoSqlWriteCacheImpl.flush(NoSqlWriteCacheImpl.java:125)
        at com.alvazan.orm.layer5.nosql.cache.NoSqlReadCacheImpl.flush(NoSqlReadCacheImpl.java:178)
        at com.alvazan.orm.layer0.base.BaseEntityManagerImpl.flush(BaseEntityManagerImpl.java:182)
        at com.s1mbi0se.dmp.da.dao.UserDao.insertOrUpdateUser(UserDao.java:24)
        at com.s1mbi0se.dmp.da.dao.UserDao.insertOrUpdateUserLocalization(UserDao.java:75)
        at com.s1mbi0se.dmp.da.service.DataAccessService.insertLocalizationForUser(DataAccessService.java:44)
        at com.s1mbi0se.dmp.module.LocalizationModule.persistData(LocalizationModule.java:218)
        at com.s1mbi0se.dmp.processor.mapred.SelectorReducer.reduce(SelectorReducer.java:60)
        at com.s1mbi0se.dmp.processor.mapred.SelectorReducer.reduce(SelectorReducer.java:1)
        at org.apache.hadoop.mapreduce.Reducer.run(Reducer.java:176)
        at org.apache.hadoop.mapred.ReduceTask.runNewReducer(ReduceTask.java:649)
        at org.apache.hadoop.mapred.ReduceTask.run(ReduceTask.java:417)
        at org.apache.hadoop.mapred.LocalJobRunner$Job.run(LocalJobRunner.java:260)
Caused by: com.netflix.astyanax.connectionpool.exceptions.ConnectionAbortedException: ConnectionAbortedException: [host=localhost(127.0.0.1):9160, latency=611(611), attempts=1] org.apache.thrift.transport.TTranspo
rtException: java.net.SocketException: Connection reset
        at com.netflix.astyanax.thrift.ThriftConverter.ToConnectionPoolException(ThriftConverter.java:193)
        at com.netflix.astyanax.thrift.AbstractOperationImpl.execute(AbstractOperationImpl.java:60)
        at com.netflix.astyanax.thrift.AbstractOperationImpl.execute(AbstractOperationImpl.java:27)
        at com.netflix.astyanax.thrift.ThriftSyncConnectionFactoryImpl$1.execute(ThriftSyncConnectionFactoryImpl.java:131)
        at com.netflix.astyanax.connectionpool.impl.AbstractExecuteWithFailoverImpl.tryOperation(AbstractExecuteWithFailoverImpl.java:52)
        at com.netflix.astyanax.connectionpool.impl.AbstractHostPartitionConnectionPool.executeWithFailover(AbstractHostPartitionConnectionPool.java:229)
        at com.netflix.astyanax.thrift.ThriftKeyspaceImpl.executeOperation(ThriftKeyspaceImpl.java:455)
        at com.netflix.astyanax.thrift.ThriftKeyspaceImpl.access$400(ThriftKeyspaceImpl.java:62)
        at com.netflix.astyanax.thrift.ThriftKeyspaceImpl$1.execute(ThriftKeyspaceImpl.java:115)
        at com.alvazan.orm.layer9z.spi.db.cassandra.CassandraSession.sendChangesImpl(CassandraSession.java:131)
        at com.alvazan.orm.layer9z.spi.db.cassandra.CassandraSession.sendChanges(CassandraSession.java:108)
        ... 14 more
Caused by: org.apache.thrift.transport.TTransportException: java.net.SocketException: Connection reset
        at org.apache.thrift.transport.TIOStreamTransport.read(TIOStreamTransport.java:129)
        at org.apache.thrift.transport.TTransport.readAll(TTransport.java:84)
        at org.apache.thrift.transport.TFramedTransport.readFrame(TFramedTransport.java:129)
        at org.apache.thrift.transport.TFramedTransport.read(TFramedTransport.java:101)
        at org.apache.thrift.transport.TTransport.readAll(TTransport.java:84)
        at org.apache.thrift.protocol.TBinaryProtocol.readAll(TBinaryProtocol.java:378)
        at org.apache.thrift.protocol.TBinaryProtocol.readI32(TBinaryProtocol.java:297)
        at org.apache.thrift.protocol.TBinaryProtocol.readMessageBegin(TBinaryProtocol.java:204)
        at org.apache.thrift.TServiceClient.receiveBase(TServiceClient.java:69)
        at org.apache.cassandra.thrift.Cassandra$Client.recv_batch_mutate(Cassandra.java:913)
        at org.apache.cassandra.thrift.Cassandra$Client.batch_mutate(Cassandra.java:899)
        at com.netflix.astyanax.thrift.ThriftKeyspaceImpl$1$1.internalExecute(ThriftKeyspaceImpl.java:121)
        at com.netflix.astyanax.thrift.ThriftKeyspaceImpl$1$1.internalExecute(ThriftKeyspaceImpl.java:118)
        at com.netflix.astyanax.thrift.AbstractOperationImpl.execute(AbstractOperationImpl.java:55)
        ... 23 more
Caused by: java.net.SocketException: Connection reset
        at java.net.SocketInputStream.read(Unknown Source)
        at java.net.SocketInputStream.read(Unknown Source)
        at org.apache.thrift.transport.TIOStreamTransport.read(TIOStreamTransport.java:127)
        ... 36 more 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T20:14:05.217

注意：我想我也遇到过一次，并增加了 astyanax 中的超时或连接池大小，它消失了，所以也尝试一下（尽管连接重置通常是远端服务器的故障......即 cassandra）。

确定连接重置通常是因为另一端（cassandra）关闭了您的连接。100% 确定，如果你做一个wireshark，你应该看到哪一端正在关闭套接字。

小心你在这里读到的这篇文章......

[java.net.SocketException：连接重置](https://stackoverflow.com/questions/62929/java-net-socketexception-connection-reset)

但基本上，在 mina、netty 等存在之前，我在 sourceforge 上编写了 channelmanager。大多数情况下，当另一端正确关闭套接字时，您会得到-1 ......即。他们需要发送一些数据包。如果它们只是消失，则可能会导致诸如连接重置之类的简洁异常。

我建议摆弄 astyanax 连接池。看看wireshark 和google tcp 拆除是如何发生的，看看cassandra 是否没有正确拆除它。

如果您使用的是 linux，请尝试 netstat -anp | grep {pid} 这样您就可以看到您的客户端进程正在使用的端口，并在wireshark 中查找这些端口上的数据包。另外，做一个测试以确保 astyanax 正确地保持它的池，这意味着在这个过程中运行 netstat 命令几次，以确保 astyanax 没有创建套接字，然后删除它们并再次创建它们（好像它删除了一个并且然后你写信给它，你可能会得到上面的错误）

java nio 的东西在幕后从来都不是完全可靠的......直到今天，我仍然有单元测试来展示不同操作系统上的 nio 库中的错误。

出于好奇，当我注意到您正在执行写入操作时，您还要冲洗多少管道，而如果写入成功与否，读取基本上无法获得状态。

在接下来的几个月里，我们希望有一个通用的 map/reduce 将 map/reduce 代码提供给实际的实体。我们终于找到并正在向一位新开发人员发送报价，该开发人员将很快加入我们以帮助完成工作量。

另一个值得阅读的好帖子是这个

[http://kb.realvnc.com/questions/75/I%27m+receiving+the+error+%22Connection+reset+by+peer+%2810054%29%22.+](http://kb.realvnc.com/questions/75/I%27m+receiving+the+error+%22Connection+reset+by+peer+%2810054%29%22.+)

wireshark 真的可以告诉你在 tcp 层发生了什么的细节。我一直想更详细地研究是 astyanax 还是 cassandra 的错，但没有时间。

院长

# css - Visual Studio 2012 - 设计视图错误

> ID：13314568
> 
> 赞同：1
> 
> 时间：2012-11-09T19:23:13.813
> 
> 标签：css, visual-studio

我使用的是 VS 2012，我有一些 div 的样式设置为 3 列布局。当我运行项目时，布局是准确的，但是当我在设计布局中预览它时，div 是堆叠的，而不是显示在列布局中。有没有办法让我改变布局设计师的偏好？这是一些屏幕截图...

**不正确：**

![布局不正确](../Images/45f5fd48c649ec4e73aeca874ebf5d76.png)

* * *

**正确（当我运行我的项目时）：**

![在此处输入图像描述](../Images/41d7194945996a9519e592229c7016a2.png)

# r - R 中的优化 - 具有非线性约束的非线性效用函数

> ID：13314572
> 
> 赞同：2
> 
> 时间：2012-11-09T19:23:24.810
> 
> 标签：r, optimization, nonlinear-optimization

我试图找到向量`β`以最大化功能

![在此处输入图像描述](../Images/2df694b96ca2a05ac12a06b1e3588a69.png)

受限于 (a)

![在此处输入图像描述](../Images/7b23134cb29cd0fb3a9ae18074bbb0c7.png)

(b) 的所有元素都 `β`应该是非负的，

with`β, μ`是长度为 15 的向量，并且`M`是一个 15x15 的协方差矩阵（`μ`和`M`是给定的）。

[关于Stefan Theussl 的 CRAN 页面](http://cran.r-project.org/web/views/Optimization.html)上列出的哪些优化器最适合我的情况的任何建议？

# java - 用 Java 创建大文件 (2gb+)

> ID：13314574
> 
> 赞同：1
> 
> 时间：2012-11-09T19:23:33.933
> 
> 标签：java, file-io, randomaccessfile

我目前正在开发一个创建大型随机二进制文件（2gb 到 10gb）的项目，但我无所适从。显然，写出 10gb 的数据需要很长时间，我需要一个及时的方法。我最新的想法是创建一个随机访问文件并将大小设置为 2+ gb，但似乎 .setLength 函数无法处理那么大的大小。我还考虑过将一个文件附加到另一个文件以获得足够大的文件，但似乎也没有真正好的方法可以快速做到这一点。有什么想法吗？

# asp.net-mvc-4 - 新 SPA MVC 4 应用程序中的 OpenID 抛出 VerficationException - 操作可能会破坏运行时的稳定性

> ID：13314575
> 
> 赞同：0
> 
> 时间：2012-11-09T19:23:33.860
> 
> 标签：asp.net-mvc-4, openid, intellitrace, verificationexception

通过 SPA 模板从一个新项目开始。按照说明书使用 Google OpenID。UI 现在显示一个带有指向 Google 的链接的按钮...单击该链接调用 VerfiyAuthentication 会引发验证异常。操作可能会破坏运行时的稳定性。

寻找这个例外让我陷入了许多不同的死胡同。

=============================== 来自asp.net的错误============== ====================

操作可能会破坏运行时的稳定性。

说明：执行当前 Web 请求期间发生未处理的异常。请查看堆栈跟踪以获取有关错误及其源自代码的位置的更多信息。

异常详细信息：System.Security.VerificationException：操作可能会破坏运行时的稳定性。

源错误：

第 226 行：public ActionResult ExternalLoginCallback(string returnUrl) 第 227 行：{ 第 228 行：AuthenticationResult 结果 = OAuthWebSecurity.VerifyAuthentication(Url.Action("ExternalLoginCallback", new { ReturnUrl = returnUrl })); 第 229 行：如果 (!result.IsSuccessful) 第 230 行：{

源文件：c:\Users\weidson\Documents\Visual Studio 2012\Projects\MvcApplication5\MvcApplication5\Controllers\AccountController.cs 行：228

堆栈跟踪：

[VerificationException：操作可能会破坏运行时。] DotNetOpenAuth.OpenId.Messages.IndirectSignedResponse.GetSignedMessageParts(Channel channel) +991 DotNetOpenAuth.OpenId.ChannelElements.ExtensionsBindingElement.GetExtensionsDictionary(IProtocolMessage message, Boolean ignoreUnsigned) +313 DotNetOpenAuth.OpenId.ChannelElements.d__a .MoveNext() +274 DotNetOpenAuth.OpenId.ChannelElements.ExtensionsBindingElement.ProcessIncomingMessage(IProtocolMessage 消息) +598 DotNetOpenAuth.Messaging.Channel.ProcessIncomingMessage(IProtocolMessage 消息) +1119 DotNetOpenAuth.OpenId.ChannelElements.OpenIdChannel.ProcessIncomingMessage(IProtocolMessage 消息) +398 DotNetOpenAuth .Messaging.Channel.ReadFromRequest(HttpRequestBase httpRequest) +705 DotNetOpenAuth.OpenId.RelyingParty.OpenIdRelyingParty。GetResponse(HttpRequestBase httpRequestInfo) +299 DotNetOpenAuth.OpenId.RelyingParty.OpenIdRelyingParty.GetResponse() +379 DotNetOpenAuth.AspNet.Clients.OpenIdClient.VerifyAuthentication(HttpContextBase context) +183 DotNetOpenAuth.AspNet.OpenAuthSecurityManager.VerifyAuthentication(String returnUrl) +1243 Microsoft。 Web.WebPages.OAuth.OAuthWebSecurity.VerifyAuthenticationCore(HttpContextBase context, String returnUrl) +174 Microsoft.Web.WebPages.OAuth.OAuthWebSecurity.VerifyAuthentication(String returnUrl) +139 MvcApplication5.Controllers.AccountController.ExternalLoginCallback(String returnUrl) 在 c:\ Users\weidson\Documents\Visual Studio 2012\Projects\MvcApplication5\MvcApplication5\Controllers\AccountController.cs:228 lambda_method(Closure, ControllerBase, Object[]) +181 System.Web.Mvc.ActionMethodDispatcher。执行（ControllerBase 控制器，Object[] 参数）+59 System.Web.Mvc.ReflectedActionDescriptor.Execute（ControllerContext controllerContext，IDictionary`2 parameters) +437 System.Web.Mvc.ControllerActionInvoker.InvokeActionMethod(ControllerContext controllerContext, ActionDescriptor actionDescriptor, IDictionary`2个参数) +60 System.Web.Mvc.Async.AsyncControllerActionInvoker.InvokeSynchronousActionMethod(ControllerContext controllerContext, ActionDescriptor actionDescriptor, IDictionary `2 parameters) +50 System.Web.Mvc.Async.<>c__DisplayClass42.<BeginInvokeSynchronousActionMethod>b__41() +75 System.Web.Mvc.Async.<>c__DisplayClass8`1.b__7(IAsyncResult *) +44 System.Web.Mvc.Async.WrappedAsyncResult `1.End() +140 System.Web.Mvc.Async.AsyncResultWrapper.End(IAsyncResult asyncResult, Object tag) +102 System.Web.Mvc.Async.AsyncControllerActionInvoker.EndInvokeActionMethod(IAsyncResult asyncResult) +49 System.Web.Mvc.Async.<>c__DisplayClass39.<BeginInvokeActionMethodWithFilters>b__33() +126 System.Web.Mvc.Async.<>c__DisplayClass4f.<InvokeActionMethodFilterAsynchronously>b__49() +323 System.Web.Mvc.Async.<>c__DisplayClass4f.<InvokeActionMethodFilterAsynchronously>b__49() +323 System.Web.Mvc.Async.<>c__DisplayClass37.<BeginInvokeActionMethodWithFilters>b__36(IAsyncResult asyncResult) +44 System.Web.Mvc.Async.WrappedAsyncResult`1.End() +140 System. Web.Mvc.Async.AsyncResultWrapper.End(IAsyncResult asyncResult, Object tag) +102 System.Web.Mvc.Async.AsyncControllerActionInvoker.EndInvokeActionMethodWithFilters(IAsyncResult asyncResult) +50 System.Web.Mvc.Async.<>c* _DisplayClass2a.b_ *20 () +68 System.Web.Mvc.Async.<>c* _DisplayClass25.b_ *22(IAsyncResult asyncResult) +184 System.Web.Mvc.Async.WrappedAsyncResult`1.End() +137 System.Web.Mvc.Async.AsyncResultWrapper.End(IAsyncResult asyncResult, Object tag) +56 System.Web.Mvc.Async.AsyncControllerActionInvoker.EndInvokeAction(IAsyncResult asyncResult) +40 System.Web.Mvc.<>c__DisplayClass1d.<BeginExecuteCore>b__18(IAsyncResult asyncResult) +40 System.Web.Mvc.Async.<>c__DisplayClass4.<MakeVoidDelegate>b__3(IAsyncResult ar) +47 System.Web.Mvc.Async.WrappedAsyncResult`1.End() +152 System.Web.Mvc.Async.AsyncResultWrapper.End(IAsyncResult asyncResult, 对象标签) +59 System.Web.Mvc.Async.AsyncResultWrapper.End(IAsyncResult asyncResult, 对象标签) +40 System.Web .Mvc.Controller.EndExecuteCore(IAsyncResult asyncResult) +44 System.Web.Mvc.Async.<>c* _DisplayClass4.b__3(IAsyncResult ar) +47 System.Web.Mvc.Async.WrappedAsyncResult`1.End() +152 System.Web.Mvc.Async.AsyncResultWrapper.End(IAsyncResult asyncResult, Object tag) +59 System.Web.Mvc.Async.AsyncResultWrapper.End(IAsyncResult asyncResult, Object tag) +40 System.Web.Mvc.Controller.EndExecute(IAsyncResult asyncResult) +39 System.Web.Mvc.Controller.System.Web.Mvc.Async.IAsyncController.EndExecute(IAsyncResult asyncResult) +39 System.Web.Mvc.<>c__DisplayClass8.<BeginProcessRequest>b__3(IAsyncResult asyncResult) +45 System.Web.Mvc.Async.<>c__DisplayClass4.<MakeVoidDelegate>b__3(IAsyncResult ar) +47 System.Web.Mvc.Async.WrappedAsyncResult`1.End() +152 System.Web.Mvc.Async.AsyncResultWrapper.End(IAsyncResult asyncResult, 对象标签) +59 System.Web.Mvc.Async.AsyncResultWrapper.End(IAsyncResult asyncResult, 对象标签) +40 System.Web .Mvc.MvcHandler.EndProcessRequest(IAsyncResult asyncResult) +40 System.Web.Mvc.MvcHandler.System.Web.IHttpAsyncHandler.EndProcessRequest(IAsyncResult 结果) +38 System.Web.CallHandlerExecutionStep.System.Web.HttpApplication.IExecutionStep.Execute() +930 System.Web.HttpApplication.ExecuteStep(IExecutionStep step, Boolean& completedSynchronously) +188

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T15:41:38.940

找到了答案。关闭 Intellitrace 可以使其正常工作。使用这种形式的调试器时看起来像一个时间问题。

# php - 如何更改控制器输入的样式？CakePHP

> ID：13314578
> 
> 赞同：-1
> 
> 时间：2012-11-09T19:23:42.823
> 
> 标签：php, cakephp

我想在 CONTROLLER 视图中更改表单中字段的类。

我在 example.ctp 中有一些字段

```
echo $form->input(foo',array('label'=>'foo:')); 
```

我想从 exampleController.php 更改这个“foo”的类。

我怎样才能做到这一点 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T19:35:18.227

这会破坏 MVC 结构；因为所有的表示逻辑都应该在视图中。

但是，您可以这样做：

```
// controller
$this->set('foo', 'some_class');

// view
$this->Form->input('foo', array('class' => $foo)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T19:43:57.683

首先你需要从控制器设置类

**控制器**

```
$this->set('class_name', 'is_td'); 
```

**看法**

```
echo $this->Form->input('foo.name', array('div' => $class_name)); 
```

这将产生

```
<div class="is_td">
    <label for="FooName">Name</label>
    <input name="data[foo][name]" type="text" value="" id="UserName" />
</div> 
```

# mongodb - CDN如何访问数据库？

> ID：13314579
> 
> 赞同：1
> 
> 时间：2012-11-09T19:23:46.947
> 
> 标签：mongodb, cdn

具体来说，我将使用的数据库是 mongodb，有问题的文件是图像。

我的问题是…………如果您将图片存储在数据库中而不是常规的静态文件结构中……这是如何工作的？

我想您可以将 CDN 文件的链接与图片一起存储在数据库中。所以`{"image": "cdnurl/fakefilelocation"}`

因此，当用户请求图像时，他们只会获得 CDN url，但是“拉”请求如何从 CDN 工作？他们如何获得图像？您是否必须手动将他们对特定图像的获取请求路由到实际图片而不是链接？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-10T01:19:15.220

我从来没有在大型生产服务器上自己尝试或测试过这样的事情，但我需要做出这样的决定，我会阅读有此问题经验的人一直在做什么。

以下是我发现非常有趣的几个线程：

*   [https://groups.google.com/forum/?fromgroups=#!topic/mongodb-user/-iljwXX-Ml8](https://groups.google.com/forum/?fromgroups=#!topic/mongodb-user/-iljwXX-Ml8)
*   [在 DB 中存储图像 - 是还是不是？](https://stackoverflow.com/questions/3748/storing-images-in-db-yea-or-nay/3751#3751)
*   [https://groups.google.com/forum/?fromgroups=#!topic/mongodb-user/CxhawCS8yZw](https://groups.google.com/forum/?fromgroups=#!topic/mongodb-user/CxhawCS8yZw)

# python - 渲染模板时如何从 sqlalchemy 引用自定义字段？

> ID：13314587
> 
> 赞同：1
> 
> 时间：2012-11-09T19:24:16.997
> 
> 标签：python, sqlalchemy, pyramid, mako

我正在尝试打印 func.count() 调用的值，但是一旦我进入我的 mako 模板，我就无法弄清楚它是如何命名的。我试图在调试器行 pprint 和 dict 变量，但它们作为对象返回，所以我不确定从这里去哪里。

这是我正在执行的视图的代码：

```
 TodayList = DBSession.query(
    func.count(ExtendedCDR.uniqueid),ExtendedCDR,ExtensionMap)
    .filter(or_(
         ExtensionMap.exten == ExtendedCDR.extension,
         ExtensionMap.prev_exten == ExtendedCDR.extension))
    .filter(ExtendedCDR.start > func.curdate())
    .group_by(ExtendedCDR.extension)
    .order_by(func.count(ExtendedCDR.uniqueid).desc())
    .all() 
```

当此代码运行时，sql 查询的调试返回：

`2012-11-09 19:16:10,392 INFO [sqlalchemy.engine.base.Engine][Dummy-3] SELECT count(cdr_extended.uniqueid) AS count_1, cdr_extended.uniqueid AS cdr_extended_uniqueid, cdr_extended.start AS cdr_extended_start, cdr_extended.end AS cdr_extended_end, cdr_extended.clid AS cdr_extended_clid, cdr_extended.src AS cdr_extended_src, cdr_extended.dst AS cdr_extended_dst, cdr_extended.dcontext AS cdr_extended_dcontext, cdr_extended.channel AS cdr_extended_channel, cdr_extended.dstchannel AS cdr_extended_dstchannel, cdr_extended.lastapp AS cdr_extended_lastapp, cdr_extended.lastdata AS cdr_extended_lastdata, cdr_extended.duration AS cdr_extended_duration, cdr_extended.billsec AS cdr_extended_billsec, cdr_extended.disposition AS cdr_extended_disposition, cdr_extended.amaflags AS cdr_extended_amaflags, cdr_extended.accountcode AS cdr_extended_accountcode, cdr_extended.userfield AS cdr_extended_userfield, cdr_extended.extension AS cdr_extended_extension, concat(concat(ext_map.`FName`, %s), ext_map.`LName`) AS anon_1, ext_map.exten AS ext_map_exten, ext_map.`FName` AS `ext_map_FName`, ext_map.`LName` AS `ext_map_LName`, ext_map.login_name AS ext_map_login_name, ext_map.`isManager` AS `ext_map_isManager`, ext_map.prev_exten AS ext_map_prev_exten FROM cdr_extended, ext_map WHERE (ext_map.exten = cdr_extended.extension OR ext_map.prev_exten = cdr_extended.extension) AND cdr_extended.start > curdate() GROUP BY cdr_extended.extension ORDER BY count(cdr_extended.uniqueid) DESC`

这是我的 mako 模板代码：

```
 % for topentry in TopToday:

                        ${topentry.ExtensionMap.AssociateName}
                        ${topentry.count_1}

        % endfor 
```

但是，Mako 会抛出 ${topentry.count_1} 不存在的异常，尽管人们会假设它会给出上面的 DEBUG 输出。

有谁知道我将如何根据 python/Mako 找到 count_1 的名称？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T19:56:47.583

您应该能够使用 命名查询的返回值`.label()`。例如，`DBSession.query(func.count(ExtendedCDR.unique_id).label('count'), ...)`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T19:38:58.200

`count_1`不是您的对象的一部分，它是为 count 提取的`func.count()`，这不是您的对象的一行。您需要找出 SQLAlchemy 对该值的真正作用。

# javascript - 使用 jsc3d.js 旋转 3d .obj 文件

> ID：13314588
> 
> 赞同：0
> 
> 时间：2012-11-09T19:24:29.820
> 
> 标签：javascript, html, canvas

我正在使用 jsc3d.js javascript 库在画布上绘制一个 .obj 文件（参见：[http](http://heliconbooks.com/article/heartdemo&lang=en) ://heliconbooks.com/article/heartdemo&lang=en ）

我想在它周围绘制 4 个按钮来旋转是使用鼠标点击。我试过了

```
<input type="button" value="Rotate left" onClick="viewer.rotMatrix.rotateAboutXAxis(-10)" /> 
```

但它没有旋转。

有谁知道如何旋转它？我的 JavaScript 知识不太好。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T18:11:04.343

您需要在旋转后使用 viewer.update() 更新视图；

您可以将以下代码用于旋转按钮。

```
 <input type="button" value="Rotate down" onClick="viewer.rotate(-10,0,0);viewer.update();"/> 
<input type="button" value="Rotate up" onClick="viewer.rotate(10,0,0);viewer.update();"/> 
<input type="button" value="Rotate left" onClick="viewer.rotate(0,-10,0);viewer.update();"/> 
<input type="button" value="Rotate right" onClick="viewer.rotate(0,10,0);viewer.update();"/> 
```

# c - 如何从文本文件中读取字符串并将其存储在数组中

> ID：13314590
> 
> 赞同：3
> 
> 时间：2012-11-09T19:24:41.660
> 
> 标签：c, arrays, string

我正在做一个班级项目，我真的需要帮助。我需要实现的是从一个文本文件或两个单独的文件中读取两个字符串，并将它们分别存储在两个数组中。字符串可以是任意长度，但不必很长。每个数组的大小可以根据对应字符串的长度自动调整。

我在 Stack Overflow 上搜索并得到了一些代码，我正在尝试使用`malloc()`. 但是当我尝试获取数组的大小时遇到​​了麻烦。

```
int main(){
int i = 0;

int BUFSIZE = 1000;
char* string[20];
FILE *fp = fopen("input.txt", "r");
if (fp == 0){
    fprintf(stderr, "Error while opening");
    return 0;
}

string[i] = (char *)malloc(BUFSIZE);
while (fgets(string[i], BUFSIZE, fp)) {
    i++;
    string[i] = (char *)malloc(BUFSIZE);
} 

float len=sizeof(string);
printf("%f", len);  

int x;
for(x = 0; x<i; x++)
   free(string[x]);
scanf("%d", x);
fclose(fp);
return 0;
} 
```

我试图输出 len，但无论字符串有多长，我都得到一个常数值 80。此外，我不知道如何读取两个字符串，并将它们存储在两个单独的数组中。尝试将另一个字符串添加到代码中时出现错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T19:31:07.250

这：

```
float len=sizeof(string); 
```

只是给你数组的*静态*大小，`string`它是一个由 20 个指针组成的数组，每个指针是 4 个字节，20 * 4 个字节 = 80 这就是为什么它总是 80。你已经有了数组的大小，因为你`i`为每个字符串递增，这是数组的大小，只是按大小打印`i`我的意思是你在数组中分配的字符串数，或者文件中的行数。

编辑：如果要获取数组中字符串的长度，请使用`strlen`

```
while (fgets(string[i], BUFSIZE, fp)) {
    i++;
    len+=strlen(string[i]);
    string[i] = (char *)malloc(BUFSIZE);    
} 
```

注意：应该`int`不是`float`，但这不是重点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T19:52:12.797

如果你想要字符串的长度，那么你需要使用

```
strlen(string[i]); 
```

您所做的将简单地返回字符串的大小，实际上是 80 (20*4)。

# css - CSS3 匹配 3d 中的形状（立方体顶部）

> ID：13314596
> 
> 赞同：0
> 
> 时间：2012-11-09T19:25:05.230
> 
> 标签：css, 3d, shape

我不擅长数学和几何，所以如果有人可以帮助我创建以下形状，我会很高兴：

![形状](../Images/57252d90a8a45887041bd50ea69f2ebd.png)

所以基本上形状存在于 3 个矩形中，我让前两个与变换矩阵完美配合，但我无法让最后一个与形状匹配（参见上面的链接以获取 img）

[JSFiddle，到目前为止我尝试过的或查看下面的代码](http://jsfiddle.net/5hGtP/)

HTML

```
<div class="shape">
  <div class="shape-rect-one"></div>
  <div class="shape-rect-two"></div>
  <div class="shape-rect-three"></div>
</div>​ 
```

CSS

```
.shape {
  perspective: 1000px;
}

.shape div {
  width: 100px;
  height: 100px;
  opacity: 0.4;
  background-color: #333;
}

.shape-rect-one {
  z-index: 100;

  transform: matrix(1, -0.40, 0, 1, 0, 0);
  -webkit-transform: matrix(1, -0.40, 0, 1, 0, 0);
}

.shape-rect-two {
  z-index: 200;

  transform: matrix(1, -0.40, 0, 1, 0, 0);
  -webkit-transform: matrix(1, 0.40, 0, 1, 0, 0);
}

.shape-rect-three {
  z-index: 300;
}​ 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-15T09:39:47.097

你可以用一种更简单的方式来完成它，只需要一个元素。

# [***演示***](http://codepen.io/thebabydino/pen/DmklE)

**结果**：

![6分星](../Images/b0c79e73561f37e53d47837539d6a804.png)

**HTML**：

```
<div class='piece'></div> 
```

相关**CSS**：

```
.piece {
  width: 10em; height: 8.66em; /* 10*sqrt(3)/2 = 8.66 */
  background: rgba(0,0,0,.5);
}
.piece {
  position: relative;
  transform: rotate(-30deg) skewX(30deg);
}
.piece:before, .piece:after {
  position: absolute;
  width: inherit; height: inherit;
  background: inherit;
  content: '';
}
.piece:before { transform: skewX(-30deg) skewX(-30deg); }
.piece:after { transform: skewX(-30deg) rotate(-60deg) skewX(-30deg); } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T19:36:45.807

这应该创建钻石形状。

```
transform: matrix(-0.965, 0.45, -0.965, -0.45, 0, 0);
-webkit-transform: matrix(-0.965, 0.45, -0.965, -0.45, 0, 0); 
```

# java - How do I detect "End of File" in Kryo?

> ID：13314599
> 
> 赞同：4
> 
> 时间：2012-11-09T19:25:11.140
> 
> 标签：java, kryo

I'm reading an unknown number of objects from a gzipped file in Kryo:

```
Input input = new Input(new GZIPInputStream(Files.newInputStream(inputFile))); 
```

The problem is: How do I detect when I've read the last object from the file? When I'm writing the objects I don't know in advance how many I will be writing, so I can't include a count of the objects at the start of the file.

I could have some kind of "dummy" object that I write at the end of the file to indicate that it's the last one, but that seems ugly.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-06-19T21:58:13.157

读取每个对象后使用 Input#eof() 检查是否到达流的末尾。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-18T20:17:00.830

由于某种原因，input.eof() 无法有效检测 EOF，例如，此代码导致`com.esotericsoftware.kryo.KryoException: Buffer underflow`.

```
while (!input.eof())
{
    SomeClass someObject = kryo.readObject(input, SomeClass.class);
    // ...
} 
```

作为一种解决方法，我做了这样的事情：

```
while (true)
{
    try
    {
        SomeClass someObject = kryo.readObject(input, SomeClass.class);
        // ...
    }
    catch(KryoException ke)
    {
        break;
    }
} 
```

编辑：我使用的是 jar 版本 2.21，但 eof 与 2.22.cloudera.1 一起使用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-10-16T06:22:03.037

对于最新的 (3.0.3) kryo 库，您可以使用 input.eof()。对于较旧的用户，使用 input.available() 会降低性能（几乎慢 8 倍）。

```
while(input.available() > 0){
  someObject = kryo.readObject(input, SomeClass.class);
  i++;
} 
```

# xcode - Xcode Tab Bar Application

> ID：13314603
> 
> 赞同：-1
> 
> 时间：2012-11-09T19:25:34.343
> 
> 标签：xcode

I want to ask Some questions about tabbar bar application in xcode.

1) When I Change a the tab by taping it , how to i detect the change ? 2) view did load only runs once .. how do i make it run every time i come to that tab? 3) if i run a timer on first tab and move to the second tab will it continue to run? 4) how to change the tagvalue of the second tab when in first tab ?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T19:48:45.610

(1) 您是否尝试阅读文档？

[http://developer.apple.com/library/ios/#documentation/UIKit/Reference/UITabBarController_Class/Reference/Reference.html](http://developer.apple.com/library/ios/#documentation/UIKit/Reference/UITabBarController_Class/Reference/Reference.html)

> 当用户与标签栏界面交互时，标签栏控制器对象向其委托发送有关交互的通知

（2）如果你需要`viewDidLoad`运行多次，你不明白`viewDidLoad`是为了什么。通过让框架使用你来使用框架。当你得到事件时你得到它们；你的工作是知道它们是什么以及它们意味着什么。不要滥用`viewDidLoad`；决定您需要做什么，并找到适合您需要的活动。

(3) 当然，为什么不呢？

(4) 我不知道什么是“标签值”。你能用准确的术语表达这个问题吗？

# sql - 卡在 SQL 查询上（不同的？）

> ID：13314604
> 
> 赞同：0
> 
> 时间：2012-11-09T19:25:40.170
> 
> 标签：sql, ms-access

我正在为图书馆制作一个网页，我需要制作一个列表，显示过去一年内未出租的所有书籍。

目前我有一个查询 Rent 表，其中所有记录都是租借的书籍。但可以多次租用，因此一本书可以多次出现在桌子上。问题是，当一本书没有租给一个人超过一年，但同一本书在过去一年内租给另一个人时，它仍然显示那本书，因为它看到了一个满足条件的记录。但是我需要知道在过去的一年里哪本书根本没有被租过。任何人都可以帮助我吗？

我将真正的查询更改为更易于理解的查询（语言差异），因此不要检查拼写错误或简单的语法问题。

我的查询自动取款机：

```
SELECT
  Book.BookID,
  Book.BoekTitle, 
  Writer.WriterName 
FROM (
    (Book INNER JOIN BookWriter ON Book.BookID=BookWriter.BookID) 
    INNER JOIN Writer ON BookWriter.WriterID=Writer.WriterID
  )
  INNER JOIN BookRenting ON Book.BookID=BookRenting.BookID
WHERE
  BookRenting.RentDate < DATEADD('yyyy', -1, NOW()); 
```

我使用 MS Access 数据库！

提前感谢您帮助我！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T19:34:46.587

我认为这归结为以更好的方式构建您的查询。

尝试使用`NOT IN <subquery>`而不是加入。这使您的查询更加模块化且更易于理解：

```
SELECT Book.*, Writer.*
FROM
Book 
INNER JOIN BookWriter ON Book.BookID=BookWriter.BookID
INNER JOIN Writer ON BookWriter.WriterID=Writer.WriterID
WHERE
Book.BookID NOT IN (
    SELECT BookRenting.BookID
    FROM BookRenting 
    WHERE BookRenting.RentDate >= DATEADD('yyyy', -1, NOW())
); 
```

我没有访问权限，所以我还没有测试过这个

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T19:35:14.763

首先，您可能需要注意这本书*从未*被租过的情况。这需要外部连接。

这应该可以得到你想要的：

```
select b.BookID, b.BookTitle, w.WriterName
from book b left outer join
     (select BookId, max(RentDate) as MaxRentDate
      from BookRenting br
      group by BookId
     ) br
     on b.BookId = br.BookId left outer join
     BookWriter bw
     on b.BookId = bw.BookId left outer join
     Writer w
     on bw.WriterId = w.WriterId
where br.MaxRentDate < DATEADD('yyyy', -1, NOW()); 
```

而且，我的意思是补充说书籍可以有多个作家。您仍然会在输出中得到重复项。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-11-09T19:31:11.040

看来你不见了`<sometablehere> INNER JOIN Writer ON BookWriter.WriterID=Writer.WriterID`

所以它可能看起来像：

```
SELECT
  Book.BookID,
  Book.BoekTitle, 
  Writer.WriterName 
FROM (
    (Book INNER JOIN BookWriter ON Book.BookID=BookWriter.BookID) 
    **CODETALKSTABLE** INNER JOIN Writer ON BookWriter.WriterID=Writer.WriterID
  )
  INNER JOIN BookRenting ON Book.BookID=BookRenting.BookID
WHERE
  BookRenting.RentDate < DATEADD('yyyy', -1, NOW()); 
```

# javascript - 在 CKEditor 中使用 Jquery 确定元素是否为图像

> ID：13314608
> 
> 赞同：0
> 
> 时间：2012-11-09T19:25:50.997
> 
> 标签：javascript, jquery, html

我正在尝试确定一个元素是否是图像或不使用 jQuery。使用这应该很简单`$('selector').is('img')`，但这不起作用。这是来自 Chrome 的手表表达式控制台的屏幕截图。我不明白为什么 is() 函数失败了。调试器说该元素是一个 HTMLImageElement。有什么建议么？

```
var selectedElement = ckEditor.getSelection().getSelectedElement();
var $element = $(selectedElement);
var isImage = $element.is('img'); 
```

![在此处输入图像描述](../Images/dfc082466b619fa03d8145853303a27a.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-09T19:30:05.753

[文档](http://docs.cksource.com/ckeditor_api/symbols/CKEDITOR.dom.selection.html#getSelectedElement)说返回的`.getSelectedElement()`是一个实例`CKEDITOR.dom.element`而不是本机 DOM 元素。因此，当调用 jQuery 时，您正在包装另一个包装器，它不能很好地发挥作用 - jQuery 不知道如何处理那些 CKEditor 对象。文档还说该`$`属性是本机 DOM 元素，因此：

```
var $element = $(selectedElement.$); 
```

# java - store variable value for 24 hrs only

> ID：13314614
> 
> 赞同：0
> 
> 时间：2012-11-09T19:26:07.680
> 
> 标签：java, google-app-engine, servlets, jdo

I need a way ,so i keep value of variable store in a database of Google appengine for 24 hrs and then it is destroy automatically . Is there any way,and some other way please.i need code explanation in java. thanks

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-09T19:42:19.107

您可以将数据存储在 Google App Engine Datastore 中的实体中，并拥有一个每 24 小时将其删除的 cron 脚本。

有关数据存储的更多信息，请查看[Storing data in Java](https://developers.google.com/appengine/docs/java/datastore/)，而有关 App Engine 上的 cron 作业的详细信息，请查看[Scheduled Tasks With Cron for Java](https://developers.google.com/appengine/docs/java/config/cron?hl=en)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T21:59:22.137

添加实体，然后立即创建一个任务队列任务，该任务将以 24 小时的 eta 执行并使用其 ID（作为 TQ 参数传递）删除该实体。这将确保至少 24 小时才能删除。但是，如果任务队列调度程序没有立即获取 eta 调度的任务，您的删除可能会在 24 小时后发生。（这可以通过使用专门的、非常高速率的 TQ 来缓解这个问题。）非常简单的方法被“模糊 24 小时以上直到删除”问题降级——尽管 cron 作业方法也会有一些模糊性，具体取决于关于 cron 运行的频率。-史蒂夫

回复：代码示例尝试文档... [https://developers.google.com/appengine/docs/java/taskqueue/](https://developers.google.com/appengine/docs/java/taskqueue/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-10T14:58:55.353

您还可以在 Memcache 中存储 24 小时超时的实体。这将是一个非常及时准确的删除，由内存缓存本身自动完成。如果您存储的值对用例至关重要，则不推荐使用。检查内存缓存的 SLA！

如果数据很关键，但 24 小时延迟的精度不是，我会正常将实体保存到数据存储区，但在实体构造中填充时间戳 (java.util.Date) 字段。然后每小时运行一次后端任务以搜索要删除的实体。这将是资源消耗较少的变体，但如果您的实体是 24:00:00.0000-24:59:59:9999 旧的（取决于您的任务运行的时间），它们将被删除。

要精确删除实体，您需要每分钟或每秒运行一次脚本，但是如果在删除的情况下必须更新许多索引，它可能会变得非常繁重。它可能会导致其他问题，并且根据您的数据模型，您可能需要开始使用事务。

# xfce - Xfce Compiz 未在首次登录时启动

> ID：13314616
> 
> 赞同：0
> 
> 时间：2012-11-09T19:26:31.760
> 
> 标签：xfce, compiz

我在运行 openSUSE 12.1 的台式计算机上安装了 Xfce4、Compiz 和 lxdm。要将 Compiz 作为默认 WM 启动，我编辑了*~/.config/xfce4/xfconf/xfce-perchannel-xml/xfce4-session.xml*并设置

```
<property name="Client0_Command" type="array">
    <value type="string" value="compiz"/>
    <value type="string" value="ccp"/>
</property> 
```

但是当我启动后第一次登录时，什么也没有发生。我必须通过控制台重新登录或启动 compiz，一切都很好。当我将`--debug`标志与 Compiz 一起使用并记录输出时，我**总是（即使启动失败）**得到

```
compiz (core) - 调试：无法 stat() 文件 /home/peep/.compiz-1/plugins/libcore.so：没有这样的文件或目录
compiz (core) - 调试：无法 stat() 文件 /usr/lib/compiz/libcore.so：没有这样的文件或目录
compiz（核心） - 调试：无法 stat() 文件 /home/peep/.compiz-1/plugins/libccp.so ：没有这样的文件或目录
后端：ini
整合：真
配置文件：默认
添加插件
初始化核心选项...完成
compiz (core) - 调试：无法 stat() 文件 /home/peep/.compiz-1/plugins/libcomposite.so：没有这样的文件或目录
初始化复合选项...完成
compiz（核心） - 调试：无法 stat() 文件 /home/peep/.compiz-1/plugins/libopengl.so ：没有这样的文件或目录
初始化 opengl 选项...完成
compiz（核心） - 调试：无法 stat() 文件 /home/peep/.compiz-1/plugins/libdecor.so ：没有这样的文件或目录
初始化装饰选项...完成
compiz（核心） - 调试：无法 stat() 文件 /home/peep/.compiz-1/plugins/libcommands.so ：没有这样的文件或目录
初始化命令选项...完成
compiz（核心） - 调试：无法 stat() 文件 /home/peep/.compiz-1/plugins/libresize.so ：没有这样的文件或目录
初始化调整大小选项...完成
compiz（核心） - 调试：无法 stat() 文件 /home/peep/.compiz-1/plugins/libmove.so ：没有这样的文件或目录
初始化移动选项...完成
compiz（核心） - 调试：无法 stat() 文件 /home/peep/.compiz-1/plugins/libregex.so ：没有这样的文件或目录
compiz（核心） - 调试：无法 stat() 文件 /home/peep/.compiz-1/plugins/libgrid.so ：没有这样的文件或目录
初始化网格选项...完成
compiz（核心） - 调试：无法 stat() 文件 /home/peep/.compiz-1/plugins/libshift.so ：没有这样的文件或目录
compiz (core) - 错误：未加载插件“文本”。
compiz (shift) - 警告：未加载兼容的文本插件
初始化班次选项...完成
compiz（核心） - 调试：无法 stat() 文件 /home/peep/.compiz-1/plugins/libwobbly.so ：没有这样的文件或目录
初始化摇摆不定的选项...完成
compiz（核心） - 调试：无法 stat() 文件 /home/peep/.compiz-1/plugins/libmousepoll.so ：没有这样的文件或目录
初始化 mousepoll 选项...完成
compiz（核心） - 调试：无法 stat() 文件 /home/peep/.compiz-1/plugins/libcube.so ：没有这样的文件或目录
初始化多维数据集选项...完成
compiz（核心） - 调试：无法 stat() 文件 /home/peep/.compiz-1/plugins/libthumbnail.so ：没有这样的文件或目录
compiz (core) - 错误：未加载插件“文本”。
初始化缩略图选项...完成
compiz（核心） - 调试：无法 stat() 文件 /home/peep/.compiz-1/plugins/librotate.so ：没有这样的文件或目录
初始化旋转选项...完成
compiz（核心） - 调试：无法 stat() 文件 /home/peep/.compiz-1/plugins/libanimation.so ：没有这样的文件或目录
初始化动画选项...完成
compiz (core) - 调试：拒绝管理窗口 0xe00071
```

顺便说一句，xfwm4 运行没有任何问题，compiz 也可以在 LXDE 下运行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T16:13:46.183

它现在正在工作。我刚刚创建了一个新用户，配置了整个东西并且它以某种方式工作。：奇怪的：

# c# - Replace characters in between string?

> ID：13314617
> 
> 赞同：-3
> 
> 时间：2012-11-09T19:26:35.940
> 
> 标签：c#, .net-4.0

I have the following string:

```
string input = "  2  1"; 
```

It is `2 spaces` followed by a `2` and then `2 more spaces` followed by a `1`. I want to do a replace on it, but I only want to replace the spaces between the `2` and the `1` with 0's and I do not want to use RegEx if possible?

The end result should look like this:

```
string result = "  2001"; 
```

`20 340400 1` - `20-34-04-00-00001.0-0000.00`

`20 340400 500` - `20-34-04-00-00500.0-0000.00`

`20 340900 C` - `20-34-09-00-0000C.0-0000.00`

`20 3435OG 1 1` - `20-34-35-OG-00001.0-0001.00`

`20 3435OG 2 10` - `20-34-35-OG-00002.0-0010.00`

`20 3435OG A` - `20-34-35-OG-0000A.0-0000.00`

`20 3436AA 1 4A` - `20-34-36-AA-00001.0-0004.A`

`20 3436AA 2 10B` - `20-34-36-AA-00002.0-0010.B`

`20 353100 268` - `20-35-31-00-00268.0-0000.00`

`20G3402AI 1 401` - `20G-34-02-AI-00001.0-0004.01`

`20G3403AI 7 1` - `20G-34-03-AI-00007.0-0001.00`

`20G3416MK 1701` - `20G-34-16-MK-00000.0-0017.01`

`21 3410OM 148` - `21-34-10-OM-00000.0-0147.00`

A few things I have noticed is that the first 4 parts are put together, most of the spaces and decimals are removed. I have had success without regex in most cases, but it fails for some.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T19:34:35.327

怎么样：

```
static string ReplaceSpacesWithZerosExceptLeading(string s)
{
    return s.TrimStart(' ').Replace(' ', '0').PadLeft(s.Length);
} 
```

这将删除前导空格，然后用零替换其余空格，然后重新放置前导空格。

编辑：没关系，这个答案已经存在......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T19:40:51.087

```
string input = "  2  1";
string result = string.Format("  {2}00{4}", input.Split(' ')); //Gives "  2001" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-09T19:54:49.477

只是为了好玩，您可以使用 Linq：

```
string result = string.Format("{0}{1}{2}",
                   new string(input.Take(3).ToArray()), //get first three values
                   "00", //insert 00
                   new string(input.Skip(5).ToArray())); //get last value 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-09T19:30:57.643

```
var result = input.TrimStart().Replace(' ', '0'); // "2001" 
```

如果前导空格很重要，那么：

```
var result = input.TrimStart().Replace(' ', '0').PadLeft(input.Length, ' '); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-09T19:30:59.497

尝试`(Input.Trim()).Replace(" ", "0");`

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-09T19:32:40.383

You really should use RegEx for this, but you could also try:

```
input.Replace(input.Trim(), input.Trim().Replace(" ", "0")); 
```

Obviously it's not optimal, but it should do the trick.

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-11-09T19:35:55.480

```
string txt = "  2  1";
string txt1 = txt.Substring(0, (txt.Length - txt.TrimStart().Length)) + txt.TrimStart().Replace(" ", "0");
Debug.WriteLine(txt1); 
```

或者如果数字在范围内

```
long num = long.Parse(txt.Replace(" ", "0"));
txt1 = num.ToString().PadLeft(txt.Length);
Debug.WriteLine(txt1); 
```

# html - Linking a CSS Folder rather than individual Files?

> ID：13314618
> 
> 赞同：1
> 
> 时间：2012-11-09T19:26:36.223
> 
> 标签：html, css

Just curious, couldn't really find any specific stuff on this topic but would it be acceptable rather than linking 10-20 css files to a page individually you could link a folder and it would encompass all the css files that are in that folder?Trying to cut back on the amount of code on my pages.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-09T19:28:11.500

合并您的 CSS 文件。广泛链接到整个目录实际上并不可行。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-09T19:29:38.173

不幸的是，您不能在标记中使用文件夹引用，但是使用 CSS 预处理器（例如 LESS、SASS），您绝对可以通过将它们编译在一起来消除加载过多文件的麻烦。

**看看这些：**

[http://lesscss.org/](http://lesscss.org/)

[http://sass-lang.com/](http://sass-lang.com/)

**真正令人敬畏的是：**

[http://compass-style.org/](http://compass-style.org/)

**还有非常容易设置的工具，例如 Scout：**

[http://mhs.github.com/scout-app/](http://mhs.github.com/scout-app/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-09T19:33:23.610

Use @import to link to a single css that has a list of all the CSS files.

However, this is not good from a performance stand point.

[http://www.stevesouders.com/blog/2009/04/09/dont-use-import/](http://www.stevesouders.com/blog/2009/04/09/dont-use-import/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-09T19:29:23.480

您可以制作一个导入所有其他文档的 css 文档（使用`@import url("import1.css");`），因此您只需调用基本 css 文档。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-09T19:56:50.813

[将它们组合起来并用 YUI 压缩器http://developer.yahoo.com/yui/compressor/](http://developer.yahoo.com/yui/compressor/)之类的东西缩小它们。尽管如果您经常修改 CSS，这可能会很痛苦。

或者，如果您在 .NET 环境中，您可以使用 Microsoft.Web.Optimization 自动捆绑和缩小整个 js 和 css 文件夹。

页面上的代码量不是问题，更多的是 HTTP 请求的数量。

# android - lift-json, proguard and android

> ID：13314622
> 
> 赞同：1
> 
> 时间：2012-11-09T19:27:05.063
> 
> 标签：android, scala, serialization, proguard, lift-json

I'm working on a multiplatform game (desktop and Android) and I'm currently working on serialization. I use lift-json. It works great on desktop but on Android it's a nightmare:

By exemple, if I write

```
case class A(int:Int)

implicit val formats = Serialization.formats(ShortTypeHints(List(classOf[A])))

println(write(A(1))) 
```

On desktop I would have:

```
{jsonClass: "A",int:1} 
```

and on Android:

```
{jsonClass : "A"} 
```

(I cannot deserialize this since it lacks it members). The reason I suspect is proguard 4.8 that the android version use.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T19:56:52.780

proguard 所做的一件事是更改类和成员名称。如果您正在使用任何使用 Java 反射的东西，那么 proguard 可能会搞砸。

如果是这种情况，您必须告诉 Proguard 不要混淆存储 JSON 数据所需的类

# c# - What is causing a C++ function called from C# in a unit test (NUnit or MSTest) to produce a different result from the same code run in a console app?

> ID：13314624
> 
> 赞同：1
> 
> 时间：2012-11-09T19:27:11.220
> 
> 标签：c#, c++, dllimport

I'm calling a C++ DLL from C# via P/Invoke using DllImport. The DLL is produced by a third party and is x86 only (so our C# code is built as x86 as well).

If I call a certain function on the DLL from a console application, I always get one result which is correct. The function takes a file path and extracts some information from the file.

The signature of the function is:

```
private static extern int Function(
    string str1,
    int bool1,
    ref uint outUint1,
    ref uint outUint2,
    ref uint outUint3,
    ref double outDouble1,
    ref double outDouble2,
    StringBuilder outStr1); 
```

And the unexpected result is in one of the `ref uint` parameters.

If I create a unit test and call the exact same code (with all parameters and such hardcoded), I get an entirely different result, which is incorrect. The incorrect result is always the same. I've tried both MSTest and NUnit tests using various different runners with the same result.

Cases producing correct results:

*   Console app
*   Winforms app
*   Console app running the code but launched from a Unit Test (NUnit)

Cases producing incorrect results:

*   Test run from Resharper Test Runner (NUnit)
*   Test run from Visual Studio Test Runner (MSTest)
*   Test run from NUnit GUI Test Runner
*   Test run from NUnit Console Test Runner

My test environment is Windows 8 and the C# is built for x86 targeting .NET framework 4.

Do any of you have any ideas about what's causing this issue or what I can do to debug it further?

I will definitely be attempting to contact the third party that created the DLL, but having a good idea about exactly what's causing this issue would substantially increase the chance of it getting resolved.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T20:15:41.363

听起来它期望的“文件路径”可能与工作目录相关，或者工作目录甚至应用程序目录对 dll 很重要。

该 dll 也可能尝试引用其目录中的其他 dll，但找不到它们，因为它是从自己的文件夹加载的，而不是在其目录中运行的 exe。

[大约在此页面](http://msdn.microsoft.com/en-us/library/windows/desktop/ms682586%28v=vs.85%29.aspx#search_order_for_desktop_applications)的一半处，它描述了 dll 解析的搜索顺序：

> 1.  加载应用程序的目录。
>     
>     
> 2.  当前目录。
>     
>     
> 3.  系统目录。使用 GetSystemDirectory 函数获取该目录的路径。
>     
>     
> 4.  16 位系统目录。没有函数获取这个目录的路径，但是被搜索了。
>     
>     
> 5.  Windows 目录。使用 GetWindowsDirectory 函数获取该目录的路径。
>     
>     
> 6.  PATH 环境变量中列出的目录。请注意，这不包括 App Paths 注册表项指定的每个应用程序路径。计算 DLL 搜索路径时不使用 App Paths 键。

希望有帮助。

编辑：另一个想法......您可以为该 DLL 编写一个包装器，以便它返回正确的值，并制作一个与您的单元测试器一起工作的接口，该接口内置到您的包装器中。

# python - Local solar time function from UTC and longitude

> ID：13314626
> 
> 赞同：11
> 
> 时间：2012-11-09T19:27:17.240
> 
> 标签：python, astronomy

I'm wondering if there is a python function/module that calculates the local time after midnight (or local solar time) given the UTC time and longitude? It doesn't need to take into account daylight saving time.

Thanks in advance.

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-11-16T22:41:35.387

使用`ephem`'s`sidereal_time()`方法：

```
import ephem # pip install pyephem (on Python 2)
             # pip install ephem   (on Python 3)

def solartime(observer, sun=ephem.Sun()):
    sun.compute(observer)
    # sidereal time == ra (right ascension) is the highest point (noon)
    hour_angle = observer.sidereal_time() - sun.ra
    return ephem.hours(hour_angle + ephem.hours('12:00')).norm  # norm for 24h 
```

注意：`ephem.hours`是一个浮点数，表示以弧度表示的角度，并转换为/从字符串转换为“hh:mm:ss.ff”。

为了比较，这里是“UTC + 经度”公式：

```
import math
from datetime import timedelta

def ul_time(observer):
    utc_dt = observer.date.datetime()
    longitude = observer.long
    return utc_dt + timedelta(hours=longitude / math.pi * 12) 
```

### 例子

```
from datetime import datetime

# "solar time" for some other cities
for name in ['Los Angeles', 'New York', 'London',
             'Paris', 'Moscow', 'Beijing', 'Tokyo']:
    city = ephem.city(name)
    print("%-11s %11s %s" % (name, solartime(city),
                             ul_time(city).strftime('%T')))

# set date, longitude manually
o = ephem.Observer()
o.date = datetime(2012, 4, 15, 1, 0, 2) # some utc time
o.long = '00:00:00.0' # longitude (you could also use a float (radians) here)
print("%s %s" % (solartime(o), ul_time(o).strftime('%T'))) 
```

### 输出

```
Los Angeles 14:59:34.11 14:44:30
New York    17:56:31.27 17:41:27
London      22:52:02.04 22:36:58
Paris       23:01:56.56 22:46:53
Moscow       1:23:00.33 01:07:57
Beijing      6:38:09.53 06:23:06
Tokyo        8:11:17.81 07:56:15
1:00:00.10 01:00:01 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-11-16T21:17:03.633

或者，如果您想更短，您可以使用[NOAA 的低精度方程](http://www.esrl.noaa.gov/gmd/grad/solcalc/solareqns.PDF)：

```
#!/usr/local/bin/python

import sys
from datetime import datetime, time, timedelta
from math import pi, cos, sin

def solar_time(dt, longit):
    return ha

def main():
    if len(sys.argv) != 4:
        print 'Usage: hour_angle.py [YYYY/MM/DD] [HH:MM:SS] [longitude]'
        sys.exit()
    else:
        dt = datetime.strptime(sys.argv[1] + ' ' + sys.argv[2], '%Y/%m/%d %H:%M:%S')
        longit = float(sys.argv[3])

    gamma = 2 * pi / 365 * (dt.timetuple().tm_yday - 1 + float(dt.hour - 12) / 24)
    eqtime = 229.18 * (0.000075 + 0.001868 * cos(gamma) - 0.032077 * sin(gamma) \
             - 0.014615 * cos(2 * gamma) - 0.040849 * sin(2 * gamma))
    decl = 0.006918 - 0.399912 * cos(gamma) + 0.070257 * sin(gamma) \
           - 0.006758 * cos(2 * gamma) + 0.000907 * sin(2 * gamma) \
           - 0.002697 * cos(3 * gamma) + 0.00148 * sin(3 * gamma)
    time_offset = eqtime + 4 * longit
    tst = dt.hour * 60 + dt.minute + dt.second / 60 + time_offset
    solar_time = datetime.combine(dt.date(), time(0)) + timedelta(minutes=tst)
    print solar_time

if __name__ == '__main__':
    main() 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-11-15T04:44:36.380

我看了一下 Jean Meeus 的天文算法。我想你可能会问当地的小时角，它可以用时间（0-24hr）、度（0-360）或弧度（0-2pi）来表示。

我猜你可以用[ehem](http://pypi.python.org/pypi/pyephem/)做到这一点。但只是为了它，这里有一些python：

```
#!/usr/local/bin/python

import sys
from datetime import datetime, time, timedelta
from math import pi, sin, cos, atan2, asin

# helpful constant
DEG_TO_RAD = pi / 180

# hardcode difference between Dynamical Time and Universal Time
# delta_T = TD - UT
# This comes from IERS Bulletin A
# ftp://maia.usno.navy.mil/ser7/ser7.dat
DELTA = 35.0

def coords(yr, mon, day):
    # @input year (int)
    # @input month (int)
    # @input day (float)
    # @output right ascention, in radians (float)
    # @output declination, in radians (float)

    # get julian day (AA ch7)
    day += DELTA / 60 / 60 / 24 # use dynamical time
    if mon <= 2:
        yr -= 1
        mon += 12
    a = yr / 100
    b = 2 - a + a / 4
    jd = int(365.25 * (yr + 4716)) + int(30.6 * (mon + 1)) + day + b - 1524.5

    # get sidereal time at greenwich (AA ch12)
    t = (jd - 2451545.0) / 36525

    # Calculate mean equinox of date (degrees)
    l = 280.46646 + 36000.76983 * t + 0.0003032 * t**2
    while (l > 360):
        l -= 360
    while (l < 0):
        l += 360

    # Calculate mean anomoly of sun (degrees)
    m = 357.52911 + 35999.05029 * t - 0.0001537 * t**2

    # Calculate eccentricity of Earth's orbit
    e = 0.016708634 - 0.000042037 * t - 0.0000001267 * t**2

    # Calculate sun's equation of center (degrees)
    c = (1.914602 - 0.004817 * t - .000014 * t**2) * sin(m * DEG_TO_RAD) \
        + (0.019993 - .000101 * t) * sin(2 * m * DEG_TO_RAD) \
        + 0.000289 * sin(3 * m * DEG_TO_RAD)

    # Calculate the sun's radius vector (AU)
    o = l + c # sun's true longitude (degrees)
    v = m + c # sun's true anomoly (degrees)

    r = (1.000001018 * (1 - e**2)) / (1 + e * cos(v * DEG_TO_RAD))

    # Calculate right ascension & declination
    seconds = 21.448 - t * (46.8150 + t * (0.00059 - t * 0.001813))
    e0 = 23 + (26 + (seconds / 60)) / 60

    ra = atan2(cos(e0 * DEG_TO_RAD) * sin(o * DEG_TO_RAD), cos(o * DEG_TO_RAD)) # (radians)
    decl = asin(sin(e0 * DEG_TO_RAD) * sin(o * DEG_TO_RAD)) # (radians)

    return ra, decl

def hour_angle(dt, longit):
    # @input UTC time (datetime)
    # @input longitude (float, negative west of Greenwich)
    # @output hour angle, in degrees (float)

    # get gregorian time including fractional day
    y = dt.year
    m = dt.month
    d = dt.day + ((dt.second / 60.0 + dt.minute) / 60 + dt.hour) / 24.0 

    # get right ascention
    ra, _ = coords(y, m, d)

    # get julian day (AA ch7)
    if m <= 2:
        y -= 1
        m += 12
    a = y / 100
    b = 2 - a + a / 4
    jd = int(365.25 * (y + 4716)) + int(30.6 * (m + 1)) + d + b - 1524.5

    # get sidereal time at greenwich (AA ch12)
    t = (jd - 2451545.0) / 36525
    theta = 280.46061837 + 360.98564736629 * (jd - 2451545) \
            + .000387933 * t**2 - t**3 / 38710000

    # hour angle (AA ch13)
    ha = (theta + longit - ra / DEG_TO_RAD) % 360

    return ha

def main():
    if len(sys.argv) != 4:
        print 'Usage: hour_angle.py [YYYY/MM/DD] [HH:MM:SS] [longitude]'
        sys.exit()
    else:
        dt = datetime.strptime(sys.argv[1] + ' ' + sys.argv[2], '%Y/%m/%d %H:%M:%S')
        longit = float(sys.argv[3])
    ha = hour_angle(dt, longit)
    # convert hour angle to timedelta from noon
    days = ha / 360
    if days > 0.5:
        days -= 0.5
    td = timedelta(days=days)
    # make solar time
    solar_time = datetime.combine(dt.date(), time(12)) + td
    print solar_time

if __name__ == '__main__':
    main() 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2014-07-09T23:02:23.123

对于一个非常简单的函数和非常近似的本地时间：时间变化从 -12h 到 +12h，经度从 -180 到 180。然后：

* * *

```
import datetime as dt

def localTimeApprox(myDateTime, longitude):
   """Returns local hour approximation"""
   return myDateTime+dt.timedelta(hours=(longitude*12/180)) 
```

* * *

示例调用：`localTimeApprox(dt.datetime(2014, 7, 9, 20, 00, 00), -75)`

回报：`datetime.datetime(2014, 7, 9, 15, 0)`

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-11-16T20:29:22.477

再试一次，用[ehem](http://pypi.python.org/pypi/pyephem/)。我将纬度和海拔高度作为参数，但当然不需要它们。您可以`0`出于您的目的调用它们。

```
#!/usr/local/bin/python

import sys
from datetime import datetime, time, timedelta
import ephem

def hour_angle(dt, longit, latit, elev):
    obs = ephem.Observer()
    obs.date = dt.strftime('%Y/%m/%d %H:%M:%S')
    obs.lon = longit
    obs.lat = latit
    obs.elevation = elev
    sun = ephem.Sun()
    sun.compute(obs)
    # get right ascention
    ra = ephem.degrees(sun.g_ra) - 2 * ephem.pi

    # get sidereal time at greenwich (AA ch12)
    jd = ephem.julian_date(dt)
    t = (jd - 2451545.0) / 36525
    theta = 280.46061837 + 360.98564736629 * (jd - 2451545) \
            + .000387933 * t**2 - t**3 / 38710000

    # hour angle (AA ch13)
    ha = (theta + longit - ra * 180 / ephem.pi) % 360
    return ha

def main():
    if len(sys.argv) != 6:
        print 'Usage: hour_angle.py [YYYY/MM/DD] [HH:MM:SS] [longitude] [latitude] [elev]'
        sys.exit()
    else:
        dt = datetime.strptime(sys.argv[1] + ' ' + sys.argv[2], '%Y/%m/%d %H:%M:%S')
        longit = float(sys.argv[3])
        latit = float(sys.argv[4])
        elev = float(sys.argv[5])

    # get hour angle
    ha = hour_angle(dt, longit, latit, elev)

    # convert hour angle to timedelta from noon
    days = ha / 360
    if days > 0.5:
        days -= 0.5
    td = timedelta(days=days)

    # make solar time
    solar_time = datetime.combine(dt.date(), time(12)) + td
    print solar_time

if __name__ == '__main__':
    main() 
```

# python - 带有 SQLite 编码问题的烧瓶

> ID：13314630
> 
> 赞同：0
> 
> 时间：2012-11-09T19:27:30.067
> 
> 标签：python, sqlite, encoding, flask

我有以下代码将 JSON 数据插入 SQLite 数据库：

```
# POST request here
if request.headers['Content-Type'] == 'application/json':
    db = get_db()
    db.execute('insert into places (lat, long, address, name) values (?, ?, ?, ?)', [request.data[0], request.data[1], request.data[2], request.data[3]])
    db.commit() 
```

并检索该数据：

```
# GET request here
if request.method == 'GET':
    db = get_db()
    cur = db.execute('select * from places order by id')
    entries = [dict(id=row[0], lat=row[1], long=row[2], address=row[3], name=row[4]) for row in cur.fetchall()]
    return repr(entries) 
```

和我`get_db()`上面使用的方法：

```
def get_db():
    op = _app_ctx_stack.top
    if not hasattr(top, 'sqlite_db'):
        top.sqlite_db = sqlite3.connect(app.config['DATABASE'])
    return top.sqlite_db 
```

这是我正在执行的示例 cURL 请求：

```
curl -H "Content-type: application/json" -X POST http://127.0.0.1:5000/location -d '{'lat':5, 'long':10, 'address':'street', 'name':'work'}' 
```

当尝试执行`GET`如下操作时：`curl -X GET http://127.0.0.1:5000/location`，我得到：

```
[{'lat': u'{', 'address': u'a', 'id': 1, 'long': u'l', 'name': u't'}] 
```

我相信这是一个编码问题。关于我应该如何存储数据以避免这种情况的任何建议？这里的问题到底是什么？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T19:48:26.157

你可以试试

```
repr(x).decode("utf-8") where x is your value 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T22:04:05.593

下面的代码是您要实现的功能的完整版本。有很多地方引起了问题。它们如下：

**卷曲问题**

您使用单引号的 json 字符串，这是无效的 json。json 字符串必须使用双引号。正确的调用应该是：

```
curl -H "Content-type: application/json" -X POST http://localhost:5000/location -d '{"lat":5, "long":10, "address":"street", "name":"work"}' 
```

当我尝试解码 json 数据时，我在代码中遇到了这个问题，因为它是无效的 json，解码最初失败。

**插入数据问题**

在您的代码中，您引用`request.data[0]`的实际上是 json 数据的第一个字符，恰好是`{`字符，这就是为什么您一直将其视为 lat 字段的值的原因。在下面的代码中`request.data`被引用并反序列化为 python 字典。然后我们可以通过访问每个必填字段来插入数据库行。要创建此代码中使用的数据库，您可以运行以下命令：

```
echo "CREATE TABLE places (id INTEGER PRIMARY KEY, lat text, long text, address text, name  text);" | sqlite3 places.db 
```

您访问时将得到的响应`http://127.0.0.1:5000/location`是：

```
[(1, u'5', u'10', u'street', u'work')] 
```

**代码**

```
from flask import Flask, request
import json, sqlite3

app = Flask(__name__)
@app.route('/location', methods=['GET', 'POST'])
def hello_world():
    conn = sqlite3.connect("places.db")
    cur = conn.cursor()
    if request.method == 'GET':
        cur.execute('SELECT * FROM places ORDER BY id')
        return repr(cur.fetchall())
    else:
        d = json.loads(request.data)
        row = (d['lat'], d['long'], d['address'], d['name'])
        cur.execute("""INSERT INTO places (lat, long, address, name)
                VALUES (?,?,?,?)""", row)
        conn.commit()
        return 'done\n'

app.run(debug=True) 
```

# jquery - jQuery Image Slider - Automatically adds extra pixels on height?

> ID：13314632
> 
> 赞同：1
> 
> 时间：2012-11-09T19:27:33.393
> 
> 标签：jquery, image, add, slide, pixels

Alright, I'm trying to make my application (image slider) dynamic. By doing this I only set an max-width on "#application" and not an height. The only time I set the height is when I append the first slide to "#application" and take the height of the "$current_slide" (first slide), then I set the height on the ".content_container" (which contains the slides) by using the parent height (the height on "#application").

Now here comes the (for me unlogic) problem: When I set the height from the current_slide height it adds an extra 6 pixels and I can't understand why..

(If more code is needed, let me know)

HTML-structure (As you can see application height says 476px, but the slide img height is 470px..)

```
<div id="application" class="application" style="height: 476px;">
    <div class="application-content-container" style="height: 476px;">
        <div id="slide-0" class="application-content" style="width: 700px;">
            <img alt="01" src="images/01.jpg"> 
```

JavaScript

```
// Get first slide & add
var current_slide = getSlide(current_id);
content_container.append(current_slide);

// Set application height based on loaded slide
application.css('height', current_slide.height());

// Set content container height based on parent height
content_container.height(parseInt(application.height())); 
```

CSS

```
.application {
    position: relative;
    background: #CCC;
    margin: 0 auto;
    max-width: 700px;
}

.application-content-container {
    position: relative;
    overflow: hidden;
}

.application-content {
    position: absolute;
    top: 0;
    left: 0;
}

.slide img {
    width: 100%;
} 
```

# python - Modify path of execution of a python script running as a windows service

> ID：13314636
> 
> 赞同：3
> 
> 时间：2012-11-09T19:28:05.210
> 
> 标签：python, windows-services, py2exe, configparser

I have a Python application that uses `ConfigParser.ConfigParser()` to access a configuration file. I have created a windows service of the Python application using `py2exe`. The problem that I have is that the service can only find the configuration file if I place it in `windows/system32` folder. I would like to have the configuration file in the same folder where the service was installed. For example, after using `py2exe` I have the following folder:

```
c:/temp/dist/winservice.exe
c:/temp/dist/configfile.cfg 
```

Then I do:

```
winservice.exe install 
```

But the service does not look for the `configfile.cfg` in path: `c:/temp/dist/` but in path: `c:/windows/system32/`

Is there any way to change that?

Thanks!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T11:21:48.440

您可以使用 Inspect 模块获取创建此代码对象的文件的名称。因此，要获取您将使用的文件的路径：inspect.currentframe().f_code.co_filename

因此，要获取 winservice.exe 所在的目录名称：

dirPath = os.path.dirname(inspect.currentframe().f_code.co_filename)

希望能帮助到你

# java - JAVA & MYSQL unreachable code

> ID：13314637
> 
> 赞同：-1
> 
> 时间：2012-11-09T19:28:06.380
> 
> 标签：java

Hey I have small problem but I can't fix it :( I use mysql + bukkit libraries, and when I want use one of the methods I get error of unreachable code

**Main.java**

```
package Hester.CrafMe;

import java.util.logging.Logger;

import org.bukkit.ChatColor;
import org.bukkit.command.Command;
import org.bukkit.command.CommandSender;
import org.bukkit.configuration.file.FileConfiguration;
import org.bukkit.entity.Player;
import org.bukkit.plugin.java.JavaPlugin;

public class Main extends JavaPlugin {

    protected static final Logger log=Logger.getLogger("Minecraft");
    private static final String ALPHA_NUM = "0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ";
    public Colorizer colorize = new Colorizer();
    public MySQL sql = new MySQL();
    public static Main plugin;

public boolean onCommand(CommandSender sender, Command command, String commandLabel, String[] args) {
            final FileConfiguration config = this.getConfig();
            Player player = (Player) sender;
            int LANG = config.getInt("PlayerConfig."+player.getName()+".language");

        //uKEY(unikalny kod)
        if (command.getName().equalsIgnoreCase("ukey")){
            String Private_uKEY = uKEY(7);

            if(LANG == 1){
                player.sendMessage(ChatColor.RED + "Twoj unikalny kod to: "+ ChatColor.YELLOW + Private_uKEY);
                player.sendMessage(ChatColor.RED + "Podany kod wpisz na stronie "+ ChatColor.YELLOW + "www.crafme.net");        
                return true;
            } else {
                player.sendMessage(ChatColor.RED + "Your unique code is: "+ ChatColor.YELLOW + Private_uKEY);
                player.sendMessage(ChatColor.RED + "Enter the code on the page "+ ChatColor.YELLOW + "www.crafme.net");
                return true;
            }

            sql.uKEY(Private_uKEY, player.getName());
        }

        return false;
    }

} 
```

**MySQL.java** and here i connect to sql but i have problem with unreachable code

```
import java.sql.Connection;
import java.sql.DriverManager;
import java.sql.PreparedStatement;
import java.sql.ResultSet;
import java.sql.SQLException;
import java.sql.Statement;
import java.util.Date;

import org.bukkit.event.Listener;

public class MySQL implements Listener {
    private Connection connect = null;
    private Statement statement = null;
    private PreparedStatement preparedStatement = null;
    private ResultSet resultSet = null;

  public void connect() throws Exception {
      try {
          Class.forName("com.mysql.jdbc.Driver");
          connect = DriverManager.getConnection("jdbc:mysql://localhost....?"+ "user=test&password=whatever");
          statement = connect.createStatement();

          ... more code

      } catch (Exception e) {
          throw e;
      } finally {
          close();
      }
  } 
```

what is wrong ?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T20:02:54.857

你真的需要指出你在哪里得到*无法访问的代码*消息。根据目前的信息，我们所能做的就是猜测。

尽管如此，一些常见的死代码案例是

```
public String getProperty() {
    return "property";
    System.out.println("Dead code"); //Code after a return statement
} 
```

或者

```
//Method...
throw new Exception();
//Unreachable code from now on, after an exception is thrown. 
```

在这种情况下，你有一个`if`和它`else`都返回一个值，因此这些语句之后的代码将不会被执行。

```
if (command.getName().equalsIgnoreCase("ukey")){
    String Private_uKEY = uKEY(7);
    if(LANG == 1){
        player.sendMessage(ChatColor.RED + "Twoj unikalny kod to: "+ ChatColor.YELLOW + Private_uKEY);
        player.sendMessage(ChatColor.RED + "Podany kod wpisz na stronie "+ ChatColor.YELLOW + "www.crafme.net");        
        return true; //Returning a value
    } else {
        player.sendMessage(ChatColor.RED + "Your unique code is: "+ ChatColor.YELLOW + Private_uKEY);
        player.sendMessage(ChatColor.RED + "Enter the code on the page "+ ChatColor.YELLOW + "www.crafme.net");
        return true; //Returning a value on the else too
    }
    //Since both the if and the else return something, the code below won't be executed.
    sql.uKEY(Private_uKEY, player.getName()); 

}

return false; 
```

你需要做你想在那里做的事情。

# c++ - 容器中的大小大于 max_size

> ID：13314638
> 
> 赞同：3
> 
> 时间：2012-11-09T19:28:08.720
> 
> 标签：c++

什么标准说明了容器大小大于 max_size 的情况？

UB、std::bad_alloc 还是别的什么？

MSVC 引发异常。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T21:35:11.060

我假设您的意思是“如果我尝试将容器推过去会发生什么`max_size`？” 因为容器`size`不能超过`max_size`. 如果是，则`max_size`返回不正确的值。

究竟会发生什么取决于容器以及尝试调整容器大小的操作，但在大多数可重新调整大小的容器（即 ）的情况下`string`，`vector`标准要求`length_error`抛出 a。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T21:59:48.347

该标准要求`std::length_error`在大多数情况下抛出 a ，但在某些情况下分配器可能会抛出不同的异常。

从 C++03 §21.3/4a（类模板`basic_string`）：

> 对于任何字符串操作，如果作为操作的结果，`size()`将超过`max_size()`，则操作将抛出`length_error`。

§21.3.3/10-12（`basic_string`容量）：

> `void reserve(size_type res_arg=0)`;
> [...]
> **抛出：** `length_error`如果`res_arg > max_size()`. ^(218))
> 
> 218)`reserve()`使用`Allocator::allocate()`可能会引发适当的异常。

§23.2.4.2/2-4（`vector`容量）：

> `void reserve(size_type n)`
> [...]
> **抛出：** `length_error`如果`n > max_size()`. ^(248)
> 
> 248)`reserve()`使用`Allocator::allocate()`可能会引发适当的异常。

`deque`对于其他标准容器（ 、`list`、`priority_queue`、`map`、`multimap`、`set`、`multiset`和`bitset`） ，该标准没有明确提及这一点。但是，在表 65（容器要求）中，它说这`max_size`是“`size()`可能的最大容器”。

# gwt - GWT 继承

> ID：13314639
> 
> 赞同：0
> 
> 时间：2012-11-09T19:28:11.410
> 
> 标签：gwt, inheritance

GWT 中如何处理继承？如果我有 3 个模块 A -> B -> C 并且我声明 B 继承自 A，C 继承自 B，假设 C 使用 A，我是否必须显式声明 C 也继承自 A 或者它就足够了以前的宣言？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T19:52:11.547

正如文档在[https://developers.google.com/web-toolkit/doc/2.4/DevGuideOrganizingProjects#DevGuideModuleXml](https://developers.google.com/web-toolkit/doc/2.4/DevGuideOrganizingProjects#DevGuideModuleXml)中所说：

> <inherits name="logical-module-name" /> ：继承指定模块的所有设置，就好像继承模块的 XML 的内容被逐字复制一样。

这意味着 C 将自动从 A 继承。但是，您必须确保 C 在 GWT 编译路径上具有可用的 A 源（但对于 B 也是如此）。

# c - 嵌入 Io 语言：从 C 调用 Io 方法

> ID：13314641
> 
> 赞同：2
> 
> 时间：2012-11-09T19:28:11.187
> 
> 标签：c, game-engine, iolanguage

我正在编写一个游戏引擎，我想使用[Io](http://iolanguage.org/)来编写脚本。该引擎是用纯 C99 编写的，而不是 C++。我已经成功地将 Io 绑定到了游戏的一些 C 函数，并且效果很好。
但是，我想在 C 游戏循环中调用 Io 方法。本质上，我想加载一个脚本（可能带有`IoState_doFile_()`），其中包含以下内容

```
Game init := method(...)
Game keypress := method(key, ...)
// and update, render, etc 
```

然后，在 C 游戏循环中，我想调用这些函数，其中一些我需要传递参数。不幸的是，Io 的文档很好但非常稀少。我已经深入研究了 IoVM 代码，但没有发现任何有用的东西（我可能还不够努力）。最好的方法是什么？就像是

```
sprintf(buf, "Game update(%u)", &deltaTime);
IoState_doCString_(buf); 
```

看起来相当老套（假设它甚至可以工作；我没有尝试过），更不用说可能真的效率低下。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T21:45:53.300

根据[这个邮件列表线程](http://tech.groups.yahoo.com/group/iolanguage/message/4471)，可以使用`IoObject_rawDoString_label_()`和`IoState_retain_()`编译来自源的消息并将其应用到`IoMessage_locals_performOn_()`.

`IoMessage_newWithName_()`或者，可以通过和函数手动构造消息`IoMessage_setCachedArg_*()`。

我没有找到任何文档，但是可以在[IoMessage.h](https://github.com/stevedekorte/io/blob/master/libs/iovm/source/IoMessage.h)中找到相关函数的列表。

适用于这种特殊情况的代码是

```
/* When you initialize everything */
renderMessage = IoObject_rawDoString_label_(IoState_lobby(state),
    IoState_symbolWithCString_(state, "message(Game render())"),
    IoState_symbolWithCString_(state, "[Game render]"));
IoState_retain_(state, renderMessage);

/* In the game loop's render function */
IoMessage_locals_performOn_(renderMessage, IoState_lobby(state), IoState_lobby(state)); 
```

对于您需要传递参数的消息，您需要这个：

```
/* When you initialize everything */
updateMessage = IoMessage_newWithName_(state, IoState_symbolWithCString_(state, "update"));
IoState_retain_(state, updateMessage);

/* In the game loop's update function */
IoMessage_setCachedArg_toInt_(updateMessage, 0, deltaTime);
IoMessage_locals_performOn_(updateMessage, IoState_lobby(state),
    IoObject_getSlot_(IoState_lobby(state), IoState_symbolWithCString_(state, "Game"))); 
```

# visual-studio-lightswitch - 如何在调试模式下更改灯开关应用程序的连接字符串

> ID：13314643
> 
> 赞同：5
> 
> 时间：2012-11-09T19:28:20.663
> 
> 标签：visual-studio-lightswitch

请我如何更改灯开关应用程序的连接字符串以进行调试。我关注了这篇文章 [http://dougseven.com/2010/08/23/data-storage-in-visual-studio-lightswitch-2/](http://dougseven.com/2010/08/23/data-storage-in-visual-studio-lightswitch-2/)

但我似乎可以让它工作。每当我在调试模式下运行应用程序时更改 applicationroot/bin/debug 中的 web.config 时，都会使用文件中的原始值重新创建文件。

发布应用程序时更改它没有问题。

当我在 applicationdefinition.lsml 文件中实现更改时，它没有效果

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T20:57:33.177

来自[Andy Kung 灯开关团队](http://visualstudio.uservoice.com/forums/121579-visual-studio/suggestions/2404471-ability-to-change-connection-string-in-designer)：

> 如果您附加到外部数据源，您可以在解决方案资源管理器中右键单击该节点并选择“更新数据源”以修改服务器信息，而无需重新创建屏幕。

**已编辑**

......但不是真的。

你应该`applicationroot/ServerGenerated/Web.config`改变`applicationroot/bin/debug/web.config`。

**解释：**

如果您转向文件视图，在 Data/ApplicationDefinition.lslm 中它们是对您的连接字符串的引用：

然后在`project\ServerGenerated\Web.config`找到连接字符串：

```
<connectionStrings>
    <add name="_IntrinsicData" ... />
    <add name="e8f0cfed-653d-42fc-9617-bcaee11eed91" connectionString="HERE!!!!!! 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-12-09T18:10:30.007

有点晚但以防万一...如果您右键单击数据源然后选择“更新数据源”然后等待连接失败（如果原始服务器不可用）然后点击“返回”您将被带到连接设置。只需更新连接设置并照常继续。

# javascript - 循环遍历编号类并附加缩短的 url

> ID：13314645
> 
> 赞同：0
> 
> 时间：2012-11-09T19:28:28.207
> 
> 标签：javascript, jquery

我正在使用一个 bitly 脚本来缩短 url 并将结果插入到 span 标签中。

使用 jquery，我将如何遍历以下列表 id 并将长 url 替换为缩短的 url。

```
<ul class="vertical-list list-parent">
    <li id="license_key_0">
      <div class="primary two-quarter unit-link">
          <span>http://localhost:3000/projects/313f7f5586b39cd9bf7a894894564036</span>
      </div>
    </li>
    <li id="license_key_1">
    <div class="primary two-quarter unit-link">
         <span>http://localhost:3000/projects/287a990d17b680fe410329cb95af89b9</span>
   </div>
  </li>
<li id="license_key_2">
  <div class="primary two-quarter unit-link">
       <span>http://localhost:3000/projects/ff381cdb94070e1903c5f6fddc31b148</span>
  </div> 
</li>
  </ul> 
```

jQuery：

```
(function ($j) {
      function get_short_url(long_url, login, api_key, func) {
        $j.getJSON(
          "http://api.bitly.com/v3/shorten?callback=?", {
          "format": "json",
          "apiKey": api_key,
          "login": login,
          "longUrl": long_url
        },
        function (response) {
          func(response.data.url);
        });
      }

      var login = "my_login";
      var api_key = "my_api_key";
      var long_url = "m";

      get_short_url(long_url, login, api_key, function (short_url) {
        console.log(short_url);
      });

    })(jQuery); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T19:44:43.927

测试这个：

```
 (function ($) {
    function get_short_url(long_url, login, api_key, func) {
        $.getJSON(
            "http://api.bitly.com/v3/shorten?callback=?", {
            "format": "json",
            "apiKey": api_key,
            "login": login,
            "longUrl": long_url
        },
        function (response) {
            func(response.data.url);
        });
    }

    var login = "my_login";
    var api_key = "my_api_key";

    $("ul.list-parent li").each(function()
                                {
                                   var long_url = $(this).find("span").text();

                                    get_short_url(long_url, login, api_key, function (short_url) {
                                                console.log(short_url);
                                              }); 
                                }
                               );

})(jQuery); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T19:46:43.027

```
$j.each($j("li div.primary"), function() {
    var long_url = $j(this).find("span").html();

    get_short_url(long_url, login, api_key, 
        function(short_url) { console.log(short_url) }
    );
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-09T19:49:07.367

你必须使用`.ajax`with `dataType: "jsonp"`。并进行迭代，`.each`像这样使用：http: [//jsfiddle.net/37Zv4/](http://jsfiddle.net/37Zv4/)。

```
(function ($j) {
  function get_short_url(long_url, login, api_key, func) {
      $j.ajax({
        url: "http://api.bitly.com/v3/shorten",
        data: {
          "format": "json",
          "apiKey": api_key,
          "login": login,
          "longUrl": long_url
        },
        dataType: "jsonp",
        success: function (response) {
          func(response.data.url);
        }
    });
  }

  var login = "bitlyapioauthdemo";
  var api_key = "R_f6397a37e765574f2e198dba5bb59522";

    $(".unit-link span").each(function() {
      var $this = $(this);
      get_short_url($this.text(), login, api_key, function (short_url) {
        $this.text(short_url);
      });
    });

})(jQuery); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-09T19:50:29.117

使用`.each()`jquery 函数遍历选择器：

```
$('ul .unit-link span').each(
    function(index){
      var long_url = $(this).text();
      get_short_url(long_url, login, api_key, function (short_url) {
          console.log(short_url);
      });
    }); 
```

# java - 如何在循环或递归中使用 AsynchronousSocketChannel#read？

> ID：13314650
> 
> 赞同：3
> 
> 时间：2012-11-09T19:28:43.043
> 
> 标签：java, nio2

我找到了一个[相关的问题](https://stackoverflow.com/questions/10698689/how-to-read-a-request-using-completionhandlers-and-a-bytebuffer-smaller-than-the)，但它并不是特别有用，因为它没有提供完整的示例。

问题：如何使用[AsynchronousSocketChannel](http://docs.oracle.com/javase/7/docs/api/java/nio/channels/AsynchronousSocketChannel.html)使用固定大小的缓冲区读取未知长度的数据

第一次尝试（读取一次）：

```
final int bufferSize = 1024;
final SocketAddress address = /*ip:port*/;
final ThreadFactory threadFactory = Executors.defaultThreadFactory();
final ExecutorService executor = Executors.newCachedThreadPool(threadFactory);
final AsynchronousChannelGroup asyncChannelGroup = AsynchronousChannelGroup.withCachedThreadPool(executor, 5);
final AsynchronousSocketChannel client = AsynchronousSocketChannel.open(asyncChannelGroup);
client.connect(address).get(5, TimeUnit.SECONDS);//block until the connection is established

//write the request
Integer bytesWritten = client.write(StandardCharsets.US_ASCII.encode("a custom request in a binary format")).get();

//read the response
final ByteBuffer readTo = ByteBuffer.allocate(bufferSize);
final StringBuilder responseBuilder = new StringBuilder();
client.read(readTo, readTo, new CompletionHandler<Integer, ByteBuffer>() {
        public void completed(Integer bytesRead, ByteBuffer buffer) {
            buffer.flip();
            responseBuilder.append(StandardCharsets.US_ASCII.decode(buffer).toString());
            try {
                client.close();
            } catch (IOException e) {
                e.printStackTrace();
            }
        }

        public void failed(Throwable exc, ByteBuffer attachment) {
            try {
                client.close();
            } catch (IOException e) {
                e.printStackTrace();
            }
        }
    }
);
asyncChannelGroup.awaitTermination(5, TimeUnit.SECONDS);
asyncChannelGroup.shutdown();
System.out.println(responseBuilder.toString()); 
```

我需要进行哪些更改才能在（即到达流的末尾）时**干净地**实现连续读取缓冲区？`bytesRead != -1`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T20:13:58.433

这是我最终所做的简化版本（使用[Guava](http://code.google.com/p/guava-libraries/)的[ListenableFuture](http://code.google.com/p/guava-libraries/wiki/ListenableFutureExplained)）：

```
class SomeUtilClass {
public interface Processor<T> {
    boolean process(Integer byteCount, ByteBuffer buffer);
    T result();
}
public static <T> ListenableFuture<T> read(
    final AsynchronousSocketChannel delegate,
    final Processor<T> processor,
    ByteBuffer buffer
) {
    final SettableFuture<T> resultFuture = SettableFuture.create();
    delegate.read(buffer, buffer, new Handler<T, Integer, ByteBuffer>(resultFuture) {
        public void completed(Integer bytesRead, ByteBuffer buffer) {
            buffer.flip();
            if(processor.process(bytesRead, buffer)) {
                buffer.clear();
                delegate.read(buffer, buffer, this);
            } else {
                resultFuture.set(processor.result());
            }
        }
    });
    return resultFuture;
}
} 
```

进一步的改进包括使用[ByteBuffer](http://docs.oracle.com/javase/7/docs/api/java/nio/ByteBuffer.html)的[Commons Pool](http://commons.apache.org/pool/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-10T22:35:34.923

在我看来，最简单的方法是将此代码拆分为自己的方法，然后让 CompletionHandler 在`bytesRead != -1`. 这样，您可以分离出代码的职责，并避免在异步读取运行时“忙等待”或使用 Thread.sleep() 的必要性。当然，您也可以添加一个案例，何时`bytesRead == -1`对已读入的数据执行某些操作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-10T23:12:37.063

我不会做任何延长回调方法的事情`failed`，`completed`因为它们在不受您控制的线程上运行。

我了解您想继续侦听套接字中的新字节，即使流已到达其末尾（`bytesRead == -1`）。将`read`方法放在一个`while(true)`循环中。在其中，监听由and方法`synchronized`设置的字段。让我们称之为。`failed``completed``myBytesRead`

为了能够停止无限读取，请将 替换为`while(true)`其他`synchronized`条件。

```
private static final BYTES_READ_INIT_VALUE = Integer.MIN_VALUE;
private static final BYTES_READ_COMPLETED_VALUE = -1;
private static final BYTES_READ_FAILED_VALUE = -2;
private Integer myBytesRead = BYTES_READ_INIT_VALUE;

private void setMyBytesRead(final Integer bytesRead) {
    synchronized(myBytesRead) {
        this.myBytesRead = bytesRead;
    }
}

private Integer getMyBytesRead() {
    synchronized(myBytesRead) {
        return myBytesRead;
    }
}

...

// in your method
while (true) {
    final int lastBytesRead = getMyBytesRead();
    if (lastBytesRead == BYTES_READ_FAILED_VALUE) {
        // log failure and retry?
    } else if (lastBytesRead != BYTES_READ_COMPLETED_VALUE) {
        // Thread.sleep( a while ); to avoid exhausting CPU
        continue;
    }

    // else lastBytesRead == BYTES_READ_COMPLETED_VALUE and you can start a new read operation
    client.read(readTo, readTo, new CompletionHandler<Integer, ByteBuffer>() {
            public void completed(Integer bytesRead, ByteBuffer buffer) {
                setMyBytesRead(bytesRead);
                buffer.flip();
                responseBuilder.append(StandardCharsets.US_ASCII.decode(buffer).toString());
                try {
                    client.close();
                } catch (IOException e) {
                    e.printStackTrace();
                }
            }

            public void failed(Throwable exc, ByteBuffer attachment) {
                try {
                    setMyBytesRead(BYTES_READ_FAILED_VALUE);
                    client.close();
                } catch (IOException e) {
                    e.printStackTrace();
                }
            }
        }
    );
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-14T00:53:04.473

我最初的尝试：

```
package com.example;

import java.nio.ByteBuffer;
import java.nio.channels.AsynchronousSocketChannel;
import java.nio.charset.StandardCharsets;
import java.util.concurrent.Callable;
import java.util.concurrent.ExecutionException;

public class LoopingReader implements Callable<String> {
    final AsynchronousSocketChannel client;
    final String responseTerminator;
    final StringBuilder responseBuilder;

    LoopingReader(
        AsynchronousSocketChannel client,
        String responseTerminator
    ) {
        this.client = client;
        this.responseTerminator = responseTerminator;

        responseBuilder = new StringBuilder();
    }

    public String call() {
        boolean doLoop;
        do {
            int bytesRead = executeIteration();//blocking
            boolean didReachEndOfStream = bytesRead == -1;
            boolean didEncounterResponseTerminator = responseBuilder.indexOf(responseTerminator) != -1;

            doLoop =  !didReachEndOfStream && !didEncounterResponseTerminator;
        } while(doLoop);
        return responseBuilder.toString();
    }

    int executeIteration() {
        final ByteBuffer buffer = ByteBuffer.allocate(256);//use pool here
        final int bytesRead;
        try {
            bytesRead = client.read(buffer).get();
        } catch (InterruptedException | ExecutionException e) {
            throw new IllegalStateException("Failed to read", e);
        }
        decodeAndAppend(buffer);
        return bytesRead;
    }

    void decodeAndAppend(ByteBuffer buffer) {
        buffer.flip();
        responseBuilder.append(StandardCharsets.US_ASCII.decode(buffer));
    }
} 
```

# spring - 如何使用 Spring MVC 标签库确定某个属性是否无效？

> ID：13314651
> 
> 赞同：2
> 
> 时间：2012-11-09T19:28:44.217
> 
> 标签：spring, spring-mvc, jsp-tags, bean-validation

我使用 JSR 303 来验证发送到我的应用程序的数据。我有一个控制器

```
@Controller
@RequestMapping("/users")
public class UserController {

    private UserService userService;

    @RequestMapping(value = "/users", method = GET)
    public String index(Model model) {
        // ...
        return "users.index";
    }

    @RequestMapping(value = "/users/create", method = POST)
    public String create(@Valid @ModelAttribute("userForm") UserForm userForm, BindingResult bindingResult, Model model) {
        if (bindingResult.hasErrors()) {
            return "users.form";
        }
        userService.addUser(userForm);
        return "redirect:users";
    }   
} 
```

一个`UserForm`班

```
public class UserForm {   
    private String email;

    // ...

    @Email
    public String getEmail() { return email; }

    // ...
} 
```

最后是一个`users.form.jsp`使用 Spring 表单标记库来呈现表单的程序。

```
<form:form action="users" method="post" commandName="userForm">
    <fieldset>
        <legend>Create User</legend>

        <div class="control-group">
            <form:label path="email">Email</form:label>
            <div class="controls">
                <form:input path="email"/>
                <form:errors path="email" cssClass="help-inline" />
            </div>
        </div>

        <%-- More Fields, Buttons --%>
    </fieldset>
</form:form> 
```

我想将 CSS 类添加到`div.control-group`. 这可以使用 Spring MVC 表单标记库吗？如何确定 bean 的属性在视图中是否无效？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-10T11:55:10.367

解决方案是使用 Spring`bind`标签。可以通过 访问绑定状态`${status}`，也可以通过 查询是否有错误`${status.error}`。这导致以下代码段：

```
<form:form action="users" method="post" commandName="userForm">
    <fieldset>
        <legend>Create User</legend>

        <spring:bind path="email">
            <c:if test="${status.error}"><c:set var="classes">error</c:set></c:if>
            <div class="control-group ${classes}">
                <form:label path="email">Email</form:label>
                <div class="controls">
                    <form:input path="email"/>
                    <form:errors path="email" cssClass="help-inline" />
                </div>
            </div>
        </spring:bind>

        <%-- More Fields, Buttons --%>
    </fieldset>
</form:form> 
```

# ruby-on-rails - Rails 不接受模型中的命名空间

> ID：13314652
> 
> 赞同：0
> 
> 时间：2012-11-09T19:28:46.117
> 
> 标签：ruby-on-rails, rails-engines

我正在按照社交流 github wiki 上的说明使用社交流引擎将新模型添加到应用程序中。说明在这里： [https ://github.com/ging/social_stream/wiki/How-to-add-new-activity-types](https://github.com/ging/social_stream/wiki/How-to-add-new-activity-types)

当我尝试将此行添加到我的模型时：

```
include SocialStream::Modules::Object 
```

我收到一个错误：

```
uninitialized constant SocialStream::Modules 
```

我想我在这里遗漏了一些基本的东西。

我的模型代码是：

```
class MediaCatagory < ActiveRecord::Base
  include SocialStream::Modules::Object
  attr_accessible :activity_object_id, :description, :media_cat, :seq, :version
end 
```

**编辑** 我想我应该问在包含错误时应该从哪里开始寻找？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-10T11:51:04.037

令我惊讶的是，我发现重启机器后问题就消失了。我之前曾多次重新启动网络服务器，但没有重新启动。

我不明白这里发生了什么：某种奇怪的缓存？

# php - 可靠安全地保存来自外部服务器的图像

> ID：13314654
> 
> 赞同：2
> 
> 时间：2012-11-09T19:28:57.397
> 
> 标签：php, codeigniter

我正在开发一个用户提交链接的网站，他们指定该链接中的图像用作缩略图。图片将从网页中保存，而不是由用户上传。

似乎我有两种选择可以做到这一点，它们`file_get_contents`是`cURL`

file_get_contents 示例：

```
$url = 'http://example.com/file_name.jpg';
$img = '/path/file_name.jpg';
file_put_contents($image, file_get_contents($url)); 
```

卷曲示例：

```
$ch = curl_init('http://example.com/file_name.jpg');
$fp = fopen('/path/file_name.jpg', 'wb');
curl_setopt($ch, CURLOPT_FILE, $fp);
curl_setopt($ch, CURLOPT_HEADER, 0);
curl_exec($ch);
curl_close($ch);
fclose($fp); 
```

在可靠性和安全性方面，哪个是首选？使用现有方法获取远程文件有哪些安全问题，我该如何防范？

如果有任何有助于解决此问题的类或函数，我正在使用 Codeigniter。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T19:54:10.727

> 在可靠性和安全性方面，哪个是首选？使用现有方法获取远程文件有哪些安全问题，我该如何防范？

好吧，对于初学者来说，这并不比允许人们上传更安全。如果你不是很小心，jimmyB 可以将恶意.js 上传到他的服务器，然后你的任何一种方法都会在你的网站上提供他的文件。

我建议考虑 CI 的 File Upload 类，而不是尝试使用这些方法。无论哪种方式，最终结果都是您最终在服务器上得到一个文件；使用 CI 的文件上传，至少有一些内置的文件类型检查等。您还可以利用 CI 的 XSS 过滤和东西。

[http://ellislab.com/codeigniter/user_guide/libraries/file_uploading.html](http://ellislab.com/codeigniter/user_guide/libraries/file_uploading.html)

# visual-studio-2008 - 生成 'resgen.exe' VS 2008 时出错

> ID：13314657
> 
> 赞同：0
> 
> 时间：2012-11-09T19:29:09.147
> 
> 标签：visual-studio-2008, c++-cli

我刚刚安装`Windows SDK (7.0A)`，现在每次尝试创建 C++/CLI 项目或编译任何现有的 C++ 项目时，我都会得到：

```
Error spawning 'resgen.exe'. 
```

我已添加 `C:\Program Files (x86)\Microsoft SDKs\Windows\v7.0A\Bin`到“其他包含目录”

在我安装 Windows SDK Visual Studio 2008 之前工作正常......有什么建议吗？我正在使用为 Win32 构建的项目运行 Windows 7 x64

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T21:50:47.490

我希望我等着看汉斯的建议是否可行，但这是我所做的：

原始问题：安装 MS Windows SDK 7.0A VS 2008 后出现编译错误：Error spawning 'resgen.exe'

我在网上到处寻找帮助，没有任何效果，所以我尝试卸载 VS 2008

我遇到了阻止卸载的组件问题，因此我使用了此处发布的 MS fixit 工具：

[Visual Studio 设置问题 - '加载设置组件时遇到问题。取消设置。](https://stackoverflow.com/questions/114332/visual-studio-setup-problem-a-problem-has-been-encountered-while-loading-the)

然后我重新安装了 VS 2008，现在没有出现上述错误的问题......我希望我有更多的时间来调试以提供答案......

# android - Gridview 图像下载并在 imageswitcher 活动中显示

> ID：13314658
> 
> 赞同：0
> 
> 时间：2012-11-09T19:29:09.110
> 
> 标签：android, gridview, android-asynctask

您好，我正在开发一个应用程序，它从互联网异步下载图像，然后在 Gridview 中显示它们。我正在使用存储图像的 HashMap，并且我不将它们存储在 sd 卡或除 hashmap 之外的其他地方，因为我想将此选项留给用户。我有两个问题。
1）我想在点击后全屏显示图像，最好在新的全屏活动中传递所有图像，这是一个图像切换器，开始显示所选图像中的图像并在其他图像之间切换。我怎样才能做到这一点？使用 hashmap 方法在新活动中获取 hashmap 是一个好的解决方案还是对内存是致命的？
2）我如何下载所有图像并将它们与gridview中的每个imageview绑定？我的意思是我希望所有图像都在开始时下载，而不仅仅是在调用 getview 时。
对不起我的英语不好！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T20:14:14.750

您需要将图像保存到磁盘缓存中。

您没有大量内存可在 Android 设备上使用位图。您的应用在某些设备上可能只有 16MB。因此，如果您将它们全部存储在内存中，您将很快耗尽内存。

保存到磁盘后，根据需要将它们解码到内存中。您可以使用内存中的 LRU 缓存对内存中的最后 10 个左右进行预解码。

首先阅读：http: [//developer.android.com/training/displaying-bitmaps/index.html](http://developer.android.com/training/displaying-bitmaps/index.html)

# powershell - PowerShell 中的管道输入问题

> ID：13314661
> 
> 赞同：3
> 
> 时间：2012-11-09T19:29:16.270
> 
> 标签：powershell, parameters, pipeline

所以，希望有人可以在这里帮助我。我过去一直在寻找解决方案，并且以前总能找到一些东西。但这似乎太奇怪了。

我有一个 PowerShell 函数可以有效地复制 New-ADUser Cmdlet，并且它接受多个参数以便执行此操作。此函数的大多数参数都将“ValueFromPipelineByPropertyName”参数属性设置为 True，这样我就可以将 CSV 和其他管道数据输入函数，而无需编写大量“if”和赋值语句。或者至少是这样的想法。

这是我的函数的一个示例（为了更好地说明这一点而缩小）：

```
[CmdletBinding()]
Param(
    [Parameter(ValueFromPipelineByPropertyName=$true)]
    [string]$FirstName,
    [Parameter(ValueFromPipelineByPropertyName=$true)]
    [string]$LastName,
    [Parameter(ValueFromPipelineByPropertyName=$true)]
    [string]$FullName
)

Process {
    if(-not $FullName) {
        $FullName = "$FirstName $LastName"
    }

    $user = "" | select FirstName,LastName,FullName
    $user.FirstName = $FirstName
    $user.LastName = $LastName
    $user.FullName = $FullName
    return $user
} 
```

所以当我对 CSV 数据运行它时：

```
FirstName,LastName
Bob,Smith
Dick,Jones
Sami,Davis
Ray,Charles
Jane,Doe
Keith,Johnson
Ruth,Willson
Genni,Gartner 
```

我得到：

```
FirstName                       LastName                        FullName
---------                       --------                        --------
Bob                             Smith                           Bob Smith
Dick                            Jones                           Bob Smith
Sami                            Davis                           Bob Smith
Ray                             Charles                         Bob Smith
Jane                            Doe                             Bob Smith
Keith                           Johnson                         Bob Smith
Ruth                            Willson                         Bob Smith
Genni                           Gartner                         Bob Smith 
```

现在，我明白这里发生了什么。在管道输入或函数参数中没有指定 FullName 的值，因此我在流程语句中设置一个值以在该迭代中使用。问题是，它没有将 $FullName 变量“重置”回下一次循环迭代的**空值**或**未定义**值，而是保留值集。

如果我更改 CSV 数据以明确定义 FullName 的“”值，问题就会消失。但是当管道数据没有定义属性时，这对我没有帮助。

我试图避免重新编码整个函数以使用不同的变量名或使用**$_**因为为了增加函数的复杂性，我还定义了参数别名，以便我们可以直接从 HR 程序的数据库中获取数据并通过管道传输它进入新的用户功能，而无需手动按摩数据。这也让我回到了无法在管道数据中添加空值参数的问题。

我知道我的解释有点啰嗦，但这种情况似乎是独一无二的（至少根据我在互联网上可以挖掘的内容）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T19:48:02.593

也许这里的[变量范围](http://blogs.msdn.com/b/powershell/archive/2007/04/14/controlling-the-scope-of-variables.aspx)发生了一些棘手的事情？

您可以尝试`Remove-Variable FullName`在函数末尾添加 a ，看看是否有帮助。

我知道您不想使用不同的变量名，但这可能会使使用不同的变量在函数内存储“生成的”全名更清楚；希望范围不会那么混乱。

```
if(-not $FullName) {
    $GeneratedName = "$FirstName $LastName"
} else {
    $GeneratedName = $FullName
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-10T13:22:25.147

您需要设置 FullName 的默认值，所以下面的代码可以正常工作：

```
[CmdletBinding()]
Param(
    [Parameter(ValueFromPipelineByPropertyName=$true)]
    [string]$FirstName,
    [Parameter(ValueFromPipelineByPropertyName=$true)]
    [string]$LastName,
    [Parameter(ValueFromPipelineByPropertyName=$true)]
    [string]$FullName=$null
)

Process {
    if(-not $FullName) {
        $FullName = "$FirstName $LastName"
    }

    $user = "" | select FirstName,LastName,FullName
    $user.FirstName = $FirstName
    $user.LastName = $LastName
    $user.FullName = $FullName
    return $user
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-09T20:34:21.840

为什么不简单地“重置”`$fullname`变量？

```
[CmdletBinding()]
Param(
    [Parameter(ValueFromPipelineByPropertyName=$true)]
    [string]$FirstName,
    [Parameter(ValueFromPipelineByPropertyName=$true)]
    [string]$LastName,
    [Parameter(ValueFromPipelineByPropertyName=$true)]
    [string]$FullName
)

Process {  
            if([string]::IsNullOrEmpty($FullName))
                {
                    $script:Fullname =  "$FirstName $LastName"
                }        

    $user = "" | select FirstName,LastName,FullName
    $user.FirstName = $FirstName
    $user.LastName = $LastName
    $user.FullName = $FullName
    $FullName= [string]::Empty
    $user
} 
```

# python - python os.system() 没有以我的权限运行？

> ID：13314664
> 
> 赞同：1
> 
> 时间：2012-11-09T19:29:35.137
> 
> 标签：python, security, permissions, grep, os.system

我正在尝试使用 grep 通过文件`os.system("grep 'regex' /path/to/file.log")`。我知道正则表达式是正确的，并且从 shell 运行时该命令有效，但是一旦我尝试运行脚本，我就会收到以下错误：

```
sh: /path/to/file.log: Permission denied 
```

os 模块是否没有以我的权限运行？另外，有没有更好的方法来做到这一点？我需要在超过 40,000 行的文件中找到特定的行。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-09T19:43:47.217

使用 Python 的内置 regex 模块可能更容易做到这一点`re`，而不是使用`grep`.

```
import re

with open(filename, 'r') as f:
    for line in f:
        if re.search(regex, line):
            print line, 
```

我知道这并不能直接回答问题，但它可能是解决潜在问题的正确方法。我认为这属于“有没有更好的方法来做到这一点？” 你问题的一部分。

# asp.net-mvc - 使用 Automapper 更新现有实体 POCO

> ID：13314666
> 
> 赞同：19
> 
> 时间：2012-11-09T19:29:37.727
> 
> 标签：asp.net-mvc, entity-framework-4, viewmodel, automapper, dbcontext

我正在使用 EF4 DbContext 为 ASP.NET MVC 应用程序提供模型。我使用 ViewModel 向视图提供数据，并使用 Automapper 来执行 EF POCO 和 ViewModel 之间的映射。Automapper 做得很好，但我不清楚在 ViewModel 被发送回控制器以执行更新后使用它的最佳方式。

我的想法是使用 ViewModel 中包含的键获取 POCO 对象。然后我想使用 Automapper 使用 ViewModel 中的数据更新 POCO：

```
[HttpPost]
public ActionResult Edit(PatientView viewModel)
{
    Patient patient = db.Patients.Find(viewModel.Id); 
    patient = Mapper.Map<ViewModel, Patient>(viewModel, patient);
    ...
    db.SaveChanges();
    return RedirectToAction("Index");
} 
```

两个问题：

1.  Find() 方法返回一个代理而不是一个导致 Automapper 抱怨的 POCO。如何获取 POCO 而不是 Proxy？
2.  这是执行更新的最佳做法吗？

* * *

## 回答 #1

> 赞同：63
> 
> 时间：2014-08-11T11:34:12.450

如果您像这样使用 Automapper，它会返回一个新的 Patient 对象，并且不会保留对实体框架图的引用。你必须像这样使用它：

```
[HttpPost]
public ActionResult Edit(PatientView viewModel)
{
    Patient patient = db.Patients.Find(viewModel.Id); 
    Mapper.Map(viewModel, patient);
    ...
    db.SaveChanges();
    return RedirectToAction("Index");
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-12T09:44:53.733

似乎有两种方法可以处理 EF 代理问题：

1.  关闭`ObjectContext.ContextOptions.ProxyCreationEnabled`，对于整个应用程序（在 EF 上下文构造函数或 EDMX 中），或者对于需要保证获取实际实体对象而不是代理的查询。
2.  使用 Automapper 的扩展，记录在这里：[https](https://gist.github.com/935461) ://gist.github.com/935461 。

笔记。后者被评论为“有改进的空间。请参阅：[Automapper：使用 Entity Framework 4 Proxy Pocos 在集合上继承和抽象基类的映射问题](https://stackoverflow.com/questions/3441916/automapper-mapping-issue-with-inheritance-and-abstr)”。

# html - CSS定位

> ID：13314667
> 
> 赞同：0
> 
> 时间：2012-11-09T19:29:40.340
> 
> 标签：html, css

在我的 HTML 文档中，我有一个消息和单选框。我希望两者并排显示。消息左，上对齐，单选框右，上对齐。我尝试对容器使用 CSS“display:inline”，但这不起作用。这是代码：

HTML：

```
<div id="test-div">
  <p>Current time:  <span id="current-time"></span></p>
  <fieldset id="fieldset-options">
  <legend>My Options</legend>
  <input id="opt1" type="radio" name="grp-options" value="1">
  <label id="label-opt1" for="opt1">First Option</label><br/>
  <input id="opt2" type="radio" name="grp-options" value="2">
  <label id="label-opt2" for="opt2">Second Option</label><br/>
  <input id="opt3" type="radio" name="grp-options" value="3">
  <label id="label-opt3" for="opt3">Third Option</label><br/>
  </fieldset>
</div> 
```

CSS：

```
#test-div {
    font-size : 18px;
    font-weight: bold;
    margin-bottom: 20px;
    position: relative;
    //display: inline;        
}

#test-div #fieldset-options legend {
    font-size: 16px;
    font-weight : bold;
}

#test-div #fieldset-options {
    font-size : 14px;
    font-weight: normal;
    width: 350px;
    position: absolute;
    right: 0px;
} 
```

这是[jsfiddle 链接](http://jsfiddle.net/R6HHK/)。请告诉我如何正确安排。​</p>

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T19:47:00.123

有点不清楚你到底想要达到什么目的。是这样的吗？

[http://jsfiddle.net/R6HHK/19/](http://jsfiddle.net/R6HHK/19/)

我只是给了`p`和radiobox容器一个宽度，然后浮动了元素。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T19:47:45.143

怎么做：

将此代码添加到您的CSS：

```
#test-div > p{float:left;} 
```

然后从#test-div #fieldset-options 选择器中删除位置和宽度。

那是你想要的吗？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-09T19:49:25.717

将时间向左浮动，字段集向右浮动。

```
#test-div p {
    float:left;
    margin:0;
}
#test-div fieldset {
    float:right;
}​ 
```

**[jsFiddle 示例](http://jsfiddle.net/j08691/R6HHK/35/)**

您需要清除 ( `clear:both`) 紧随其后的内容，否则其他元素可能会浮在其下。

# c# - 从一种模式到另一种模式的工具？

> ID：13314668
> 
> 赞同：0
> 
> 时间：2012-11-09T19:29:40.720
> 
> 标签：c#, .net-4.0, pattern-matching

有没有一种工具，如果你给它一组已经转换成另一种模式的字符串，它可以告诉你如何到达每个模式。例如，我有字符串：

`20G-34-41-01-00004.G-0020.01`它已被转换为`20G344101 4G 2001`

我想知道如何从一个到另一个，反之亦然。还有更多的模式，这就是为什么我想知道是否有一个工具。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T20:34:57.207

如果您只使用字符串，在我看来，创建 .ConvertTo(pattern) 扩展方法是可行的方法。

```
public enum ConversionTypesEnum
{
    LongDate,
    ShortDate,
    FatDate,
    SkinnyDate
}

public static string ConvertTo(this string stringtoConvert, ConversionTypesEnum type)
{
    ...
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T20:40:26.587

听起来你在问机器学习。[在mathoverflow.com](https://mathoverflow.net/questions/98013)上有简短的讨论。

> 在机器学习中，这是一种常见情况（给定函数的这些有限多例，“学习”其余无限多例中的函数）。您应该查看机器学习文献，因为这就是您正在做的事情。例如，您可能会问，匹配给定测试用例的最简单的正则表达式是什么？
> 
> ... Henning Fernau，[学习正则表达式的算法](http://www.informatik.uni-trier.de/%7Efernau/papers/Fer05c.pdf)（扩展摘要）。

# php - Wordpress 当前分类页面

> ID：13314672
> 
> 赞同：1
> 
> 时间：2012-11-09T19:30:02.807
> 
> 标签：php, wordpress, taxonomy

我有一个导航菜单，在其中显示具有特殊分类的页面，但我不知道如何将其标记为“当前页面”我的代码：

```
 <div id="nav">

    <?php $query = new WP_Query( array('post_type' => 'page', 'kalba' => 'Lietuviu') );?>   
        <ul>

        <?php while ( $query->have_posts() ) : $query->the_post();?>
        <li><a href="<?php the_permalink() ?>" rel="bookmark" title="Permanent Link to <?php the_title(); ?>"><?php the_title(); ?></a></li>
    <?php endwhile;?>

       </ul>

   </div> 
```

# asp.net-mvc - 具有单例 DbContext 的自定义 RoleProvider 可能与 MVC3 网站中的 PerRequest DbContext 冲突

> ID：13314675
> 
> 赞同：2
> 
> 时间：2012-11-09T19:30:07.657
> 
> 标签：asp.net-mvc, entity-framework-4, database-connection, dbcontext, roleprovider

我有一个使用 Entity Framework 4.1 和 Ninject 的 MVC3 应用程序。它使用标准存储库模式，该模式在 PerRequest 的基础上接受 IUnitOfWork/DbContext（来自 Ninject）。

该网站在单用户测试中运行良好。我们最近开始对 2 个以上的用户进行一些并发负载测试，并开始在某些请求中出现此错误：

**连接未关闭。连接的当前状态是正在连接。**

```
System.Data.EntityException: The underlying provider failed on Open. --->   
System.InvalidOperationException: The connection was not closed. The connection's current state is connecting.
at System.Data.ProviderBase.DbConnectionBusy.OpenConnection(DbConnection outerConnection, DbConnectionFactory connectionFactory)
at System.Data.SqlClient.SqlConnection.Open()
at System.Data.EntityClient.EntityConnection.OpenStoreConnectionIf(Boolean openCondition, DbConnection storeConnectionToOpen, DbConnection originalConnection, String exceptionCode, String attemptedOperation, Boolean& closeStoreConnectionOnFailure)
--- End of inner exception stack trace ---
at System.Data.EntityClient.EntityConnection.OpenStoreConnectionIf(Boolean openCondition, DbConnection storeConnectionToOpen, DbConnection originalConnection, String exceptionCode, String attemptedOperation, Boolean& closeStoreConnectionOnFailure)
at System.Data.EntityClient.EntityConnection.Open()
at System.Data.Objects.ObjectContext.EnsureConnection()
at System.Data.Objects.ObjectQuery`1.GetResults(Nullable`1 forMergeOption)
at System.Data.Objects.ObjectQuery`1.System.Collections.Generic.IEnumerable<T>.GetEnumerator()
at System.Collections.Generic.List`1..ctor(IEnumerable`1 collection)
at System.Linq.Enumerable.ToList[TSource](IEnumerable`1 source)
at Store.Security.StoreSecurityService.GetUserGroupRoles(String username) in C:\Dev\Store2\Trunk\Store.Security\StoreSecurityService.cs:line 57
at Store.Security.StoreSecurityService.GetRolesForUser(String username) in C:\Dev\Store2\Trunk\Store.Security\StoreSecurityService.cs:line 23
at Store.Security.StoreRoleProvider.GetRolesForUser(String username) in C:\Dev\Store2\Trunk\Store.Security\StoreRoleProvider.cs:line 37
at System.Web.Security.RolePrincipal.IsInRole(String role)
at System.Linq.Enumerable.Any[TSource](IEnumerable`1 source, Func`2 predicate)
at System.Web.Mvc.AuthorizeAttribute.AuthorizeCore(HttpContextBase httpContext)
at System.Web.Mvc.AuthorizeAttribute.OnAuthorization(AuthorizationContext filterContext)
at System.Web.Mvc.ControllerActionInvoker.InvokeAuthorizationFilters(ControllerContext controllerContext, IList`1 filters, ActionDescriptor actionDescriptor)
at System.Web.Mvc.ControllerActionInvoker.InvokeAction(ControllerContext controllerContext, String actionName)
at System.Web.Mvc.Controller.ExecuteCore()
at System.Web.Mvc.ControllerBase.Execute(RequestContext requestContext)
at System.Web.Mvc.MvcHandler.<>c__DisplayClass6.<>c__DisplayClassb.<BeginProcessRequest>b__5()
at System.Web.Mvc.Async.AsyncResultWrapper.<>c__DisplayClass1.<MakeVoidDelegate>b__0()
at System.Web.Mvc.MvcHandler.<>c__DisplayClasse.<EndProcessRequest>b__d()
at System.Web.HttpApplication.CallHandlerExecutionStep.System.Web.HttpApplication.IExecutionStep.Execute()
at System.Web.HttpApplication.ExecuteStep(IExecutionStep step, Boolean& completedSynchronously) 
```

我想知道这个问题是否是由实现 MVC RoleProvider 类的自定义 RoleProvider 引起的，该类需要访问 DbContext 才能调用数据库。

```
public class StoreRoleProvider : RoleProvider
{
    public IStoreSecurityService StoreSecurityService { get; set; }

    public StoreRoleProvider()
    {
        StoreSecurityService = DependencyResolver.Current.GetService(typeof(IStoreSecurityService));
    }

    public override string[] GetRolesForUser(string username)
    {
        return StoreSecurityService.GetRolesForUser(username);
    }
} 
```

最初，我们解析了一个 IStoreSecurityService 实例，该实例中注入了一个 DbContext (PerRequest)，但我知道 RoleProvider 仅在应用程序启动时创建一次，因此 DbContext 将在请求结束时被处理掉。

我在构造函数中尝试了一个特定的实例，如下所示：

```
public StoreRoleProvider()
{
   StoreSecurityService = new StoreSecurityService(new DbContext());
} 
```

但这会产生类似的错误。

抛出错误的 linq 查询并不是特别困难......

```
public IEnumerable<string> GetRolesForUser(string username)
{
    var roles = (from user in _dbContext.Set<User>()
                 join userRole in _dbContext.Set<UserRole>() 
                     on user.Id equals userRole.IserId
                 join role in _dbContext.Set<Role>() 
                     on userRole.RoleId equals role.Id
                 where user.UserName == username && !userRole.IsDeleted 
                 select role.Name).ToList<string>();
    return roles;
} 
```

我不明白为什么连接状态变化如此之大。

任何想法将不胜感激:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-12T10:47:08.417

经过多次测试，我想我已经解决了这个问题。

由于某种原因，RoleProvider 不喜欢使用 Singleton DbContext。

因此，作为一个不整洁的修复，我在 StoreSecurityService 上有两个构造函数。一个构造函数接收 IUnitOfWork（其中包含 DbContext），这是使用 Ninject 以正常方式解析的。

第二个构造函数没有参数。在代码内部，每次 linq 查询需要 DbContext 时，它都会直接调用 ninject 来解析当前的 IUnitOfWork 实例（即 PerRequest）。它为此上下文创建一个局部变量，然后照常使用它。

在类中包含 DependencyResolver 会使单元测试变得更加困难，因此我可以将此 GetDbContext 方法重构为一个单独的类以使其更加透明。

```
public class SolvencySecurityService : ISolvencySecurityService
{
    private readonly IUnitOfWork _privateContext;

    private DbContext GetDbContext()
    {
        if (_privateContext != null)
        return _privateContext;

        return DependencyResolver.Current.GetService<IUnitOfWork>();
    }

    public StoreSecurityService()
    {

    }

    public StoreSecurityService(IUnitOfWork unitOfWork)
    {
        _privateContext = unitOfWork;
    }
} 
```

# ruby-on-rails - 在 jst.haml 和 .html.hamlc 文件之间传递变量

> ID：13314676
> 
> 赞同：1
> 
> 时间：2012-11-09T19:30:13.387
> 
> 标签：ruby-on-rails, backbone.js

我对 RoR 很陌生，现在我正在尝试弄清楚如何将变量从`.jst.hamlc`to 传递给`.html.hamlc`.

我在一个`.jst.hamlc`文件中有这样的东西

```
- @myvar = 'myvalue' 
```

我需要`@myvar`在`.html.hamlc`文件中进行操作，但它看起来`@myvar`总是空白的。

任何帮助或线索都会很棒！

# java - 列表中的 Java 并发访问，只有 1 个编写器和许多对象

> ID：13314677
> 
> 赞同：1
> 
> 时间：2012-11-09T19:30:24.820
> 
> 标签：java, list, concurrency

我有以下情况：

我需要一个列表或任何东西来存储许多对象。

它们都是由一个包含列表本身的类生成的。

现在我在其他线程中至少有一个（但可能更多）类，它们总是想从列表中的第一个对象开始，并定期（20ms-100ms）获取下一个对象。

该列表随着时间的推移而增长。最后可以有多达 300k 个对象。（其中一个对象最多可以包含 50 个整数或类似的东西）

具有自己的迭代器实现的 ConcurrentLinkedQueue 是正确的方法吗？需要自己的迭代器来拒绝删除选项？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T19:49:47.137

如果您有 1 位作者和多个读者在列表增长时对其进行迭代，那么是的，我绝对建议使用`ConcurrentLinkedQueue`. 它是为队列上的多个并发操作而设计的。

您*不能*使用`Collections.synchronizedList`，因为[Javadocs 特别警告](http://docs.oracle.com/javase/6/docs/api/java/util/Collections.html#synchronizedList%28java.util.List%29)在修改列表时迭代：

> 用户在迭代返回的列表时必须手动同步它：

显然，`ConcurrentLinkedQueue`随着队列变得庞大（300k 个项目），迭代器是一种可行的方法。小心`Queue`导致程序运行整个队列以查找条目等的方法。

另一个需要考虑的选项是[`ConcurrentSkipListMap`](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/ConcurrentSkipListMap.html)在 Java 6+ 中可用。虽然它是一个 log2 查找映射，但它也有有序条目，因此迭代与队列相同。这允许您同时对集合执行映射和队列操作。跳过列表++。

*编辑：*

> 需要自己的迭代器来拒绝删除选项？

如果您询问是否需要覆盖迭代器以不允许删除，那么可以。您可能会考虑扩展整个`Queue`以返回您自己的自定义委托迭代器并阻止`Queue.remove(...)`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T19:55:03.677

由于只有一位作者和许多读者，您可以考虑使用[`CopyOnWriteArrayList`](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/CopyOnWriteArrayList.html). 从文档中：

> 一种线程安全的变体，`ArrayList`其中所有可变操作（添加、设置等）都是通过制作底层数组的新副本来实现的。
> 
> 这通常成本太高，但是当遍历操作的数量大大超过突变时，它可能比替代方法更有效，并且在您不能或不想同步遍历但需要排除并发线程之间的干扰时很有用。“快照”风格的迭代器方法使用对创建迭代器时数组状态的引用。这个数组在迭代器的生命周期内永远不会改变，所以干扰是不可能的，并且迭代器保证不会抛出 `ConcurrentModificationException`。

**编辑：**正如格雷指出的那样，插入的绝对数量使得这个解决方案令人望而却步——我会选择他的解决方案。

# mongodb - MongoDB：仅获取过去 24 小时内创建的文档？

> ID：13314678
> 
> 赞同：36
> 
> 时间：2012-11-09T19:30:26.190
> 
> 标签：mongodb

我想限制我正在做的查询只查看过去 24 小时内创建的文档。

构建此查询的最佳方法是什么？如何根据日期进行限制？

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2015-10-27T05:25:14.430

添加`createdAt`字段，索引它，然后查询

```
db.getCollection("COLLECTION_NAME").find({"createdAt":{$gt:new Date(Date.now() - 24*60*60 * 1000)}}) 
```

这将返回所有早于 86400 秒的记录。

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2012-11-10T00:45:21.213

如果您没有使用任何其他索引并且使用默认的 ObjectID 作为您的 _id，您可以执行以下操作：

```
var ObjectID = require('mongodb').ObjectID

db.collection.find({
  _id: {
    $gt: ObjectID.createFromTime(Date.now() / 1000 - 24*60*60)
  }
}, callback) 
```

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2013-12-13T17:12:37.057

对于通过 google 登陆的其他人，您可以在 mongo shell 中执行此操作，如下所示：

```
db.collection.find({ $where: function () { return Date.now() - this._id.getTimestamp() < (24 * 60 * 60 * 1000)  }  }) 
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2017-01-13T13:02:05.563

在猫鼬中使用它

```
let ObjectId    = require('mongodb').ObjectID;

Property.find({
    _id: {
        $gt: ObjectId.createFromTime(Date.now() / 1000 - 24 * 60 * 60)
    }
}, (err, result) => {
    console.log(err || result);
}); 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-11-09T23:36:34.313

首先，如果您向人们提供您的收藏模式，那将真的很有帮助。

但仅仅因为它已经过去了 3 个小时而且没有人回复我会尝试：

假设您有条目，并且它有一个 createdAt 字段，它是一个 ISODate：

```
{
somefield: "test",
createdAt: ISODate("2012-08-13T04:00:00Z")
} 
```

所以你需要做的是在这个字段上放一个索引

```
db.yourColl.ensureIndex({createdAt:1}); 
```

然后你在 node.js 中得到你当前的时间来代替你的 24 小时并得到你的 start 值。（据我所知，mongdb 中没有 NOW 的类似物。如果我错了，请纠正我。）

```
db.yourColl.find({
   createdAt: {
     $gte: start
   }
}); 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2019-12-17T17:20:43.580

希望这可以帮助某人。我正在使用 pymongo 查询最近 24 小时的数据。就我而言，我必须将当前时间转换为 BSON 时间戳。

首先我必须导入 Bson 时间戳：

```
from bson.timestamp import Timestamp 
```

然后在我的搜索查询中，我执行了以下操作：

```
yesterday  = datetime.datetime.now() - datetime.timedelta(days=1)

findQuery = {
    "unix": {
        "$gte": Timestamp(int(yesterday.strftime("%s")),0)
     }
} 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2021-06-15T19:58:43.397

从 开始，这是新聚合运算符`Mongo 5.0`的一个很好的用例：[`$dateDiff`](https://docs.mongodb.com/v5.0/reference/operator/aggregation/dateDiff/#mongodb-expression-exp.-dateDiff)

```
// { "_id" : ObjectId("60c8f804fb832fe2f2011657") }
db.collection.aggregate([
  { $match: { $expr:
    { $lt: [{ $dateDiff: { startDate: "$_id", endDate: "$$NOW", unit: "hour" } }, 24 ]}
  }}
])
// { "_id" : ObjectId("60c8f804fb832fe2f2011657") } // if document created within the last 24 hours 
```

* * *

需要注意的几点：

*   基本上，我们正在创建项目，它们的创建日期（由它们表示）和现在（ ）之间`$match`的持续时间（ ）小于（）。`$dateDiff``_id``$$NOW``$lt``24` `hours`

*   开始日期为`$_id`( [`ObjectId`](https://docs.mongodb.com/v5.0/reference/bson-types/#objectid))：

    *   实际上，an`ObjectId`包含其创建的时间戳
    *   并且`$dateDiff`可以接受一个`ObjectId`作为时间表示
*   结束日期是[`$$NOW`](https://docs.mongodb.com/manual/reference/aggregation-variables/#system-variables)，它是一个返回当前日期时间值的变量。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2016-09-02T06:21:10.313

“TIME”是存储时间戳的字段

```
db.your_collection_name.find({"TIME":{'$lt': new Date(),'$gte':new Date(new Date().setDate(new Date().getDate()-1))}},{}).count(); 
```

* * *

## 回答 #9

> 赞同：-1
> 
> 时间：2021-05-24T10:33:59.227

我遇到了同样的问题，经过大量搜索，我发现从过去 X 天获取数据的最佳解决方案是这样的：

```
let date_obj = new Date();
let requestedTime = new Date(new Date().setDate(date_obj.getDate() - day));

    db.collection.find({
      createdAt: {$gt: requestedTime}
    }); 
```

day 变量必须是您想要的天数的数值，例如：1 表示一天前（过去 24 小时），2 表示两天前（过去 48 小时），30 表示上个月，60 表示最后两个月，以此类推。..

```
let date_obj = new Date();
let requestedTime = new Date(new Date().setDate(date_obj.getDate() - 1));

document.querySelector("#current_date").innerHTML = `current date: ${date_obj}`
document.querySelector("#last_24H_date").innerHTML = `last 24 hours: ${requestedTime}`
```

```
<div id="current_date"></div>
<div id="last_24H_date"></div>
```

* * *

## 回答 #10

> 赞同：-1
> 
> 时间：2021-07-20T11:56:20.167

```
db.video.find({"timestamp":{$lt: new Date(),$gte: new Date(new Date().setDate(new Date().getDate()-1))}}) 
```

# graph-algorithm - 没有三角剖分的欧几里得最小生成树

> ID：13314681
> 
> 赞同：0
> 
> 时间：2012-11-09T19:30:34.520
> 
> 标签：graph-algorithm, minimum-spanning-tree, euclidean-distance

我正在浏览一些关于使用 Delaunay 三角测量技术找到 EMST（欧几里得 MST）的文本，但也在某处读到可以通过扫描线算法找到 EMST。由于这更容易实现，我想实现它而不是使用现有的库。任何人都可以指导我/指导我到一个（可能是免费的）论文/资源的链接，该论文/资源解释了这个算法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T22:01:30.007

从[这个](https://encrypted.google.com/#hl=en&q=euclidean+MST+sweepline+algorithm&oq=euclidean+MST+sweepline+algorithm)和摘要来看，[这个](http://users.eecs.northwestern.edu/~haizhou/publications/zhou02ipl.pdf)和[这个](http://www.jucs.org/jucs_13_11/analysis_of_two_sweep)应该让你开始。他们都使用扫描线算法来获得 MST

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-04-29T16:23:23.400

I think the simplest technique for finding Euclidean minimum spanning tree is Delaunay trinangulation, use [Bowyer-Watson](https://en.wikipedia.org/wiki/Bowyer%E2%80%93Watson_algorithm) algorithm. It is very easy to implement, once you have that, you can just use something like [Kruskal's algorithm](https://en.wikipedia.org/wiki/Kruskal's_algorithm), using the distance as the edge weight.

# jquery - 在 jQuery 上启用多选，单击时可选择

> ID：13314684
> 
> 赞同：1
> 
> 时间：2012-11-09T19:30:48.030
> 
> 标签：jquery

是否可以在 jQuery selectable 上启用多选？

通过多选，我的意思是只需单击它（类似于复选框）就可以选择多个选项，如果再次单击它，它将取消选择该选项。

这是我到目前为止的代码：http: [//jsfiddle.net/vw9jL/1/](http://jsfiddle.net/vw9jL/1/)

**HTML**

```
<ol id="selectable">
    <li class="ui-state-default">1</li>
    <li class="ui-state-default">2</li>
    <li class="ui-state-default">3</li>
    <li class="ui-state-default">4</li>
    <li class="ui-state-default">5</li>
    <li class="ui-state-default">6</li>
    <li class="ui-state-default">7</li>
    <li class="ui-state-default">8</li>
    <li class="ui-state-default">9</li>
    <li class="ui-state-default">10</li>
    <li class="ui-state-default">11</li>
    <li class="ui-state-default">12</li>
    <li class="ui-state-default">13</li>
    <li class="ui-state-default">14</li>
    <li class="ui-state-default">15</li>
</ol>​ 
```

**CSS**

```
#feedback { font-size: 1.4em; }
#selectable .ui-selecting { background: #C41C7B; }
#selectable .ui-selected { background: #C41C7B; color: white; }
#selectable { list-style-type: none; margin: 0; padding: 0; width: 450px; }
#selectable li { margin: 3px; padding: 3px; float: left; width: 20px; height: 20px; font-size: 14px; font-family: Arial; text-align: center; }​ 
```

**jQuery**

```
 $(function() {
        $( "#selectable" ).selectable();
    });​ 
```

提前谢谢了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T19:37:49.530

向下绑定鼠标：

```
$(function() {
    $("#selectable").bind('mousedown', function (e) {
        e.metaKey = true;
    }).selectable();
});​ 
```

[jSFiddle 演示](http://jsfiddle.net/vw9jL/2/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T19:36:13.370

控制+单击小提琴中的按钮；）

# web-services - 版本控制 SOAP 主体与整个服务？

> ID：13314685
> 
> 赞同：2
> 
> 时间：2012-11-09T19:30:49.483
> 
> 标签：web-services, soap, versioning

试图理解 SOAP 和 Web 服务的版本控制。根据我的发现，用 URL 做这样的事情似乎是可以接受的：

www.company.com/service/01-12-10/ 和 www.company.com/service/03-08-10/ 和 www.company.com/service/ 支持最新版本。

我知道这是要走的路，而不是像这样对 SOAP 主体/有效负载进行版本控制：

```
[client]

someRequest = newRequest(){ ClientVersion = "1.0.0" };
webService.Go(someRequest);

[web service]

if request.ClientVersion == "1.0.0"
  do this code
else
  do this code 
```

我可以看到随着更改的发生所有条件将如何失控，并且当 Web 方法的签名被删除时，这并不能处理这种情况。然而，最重要的是，这并不是对整个服务进行版本控制，而只是对正文进行版本控制。

所以，我的问题是我是否只是通过更改 URL 以包含版本来做对了？这是否涵盖了所有必要的领域？似乎我会有一些命名空间冲突？是否也需要更改命名空间？试图理解对服务进行版本控制意味着什么。请展开。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-10T15:14:54.500

让客户端发送版本参数通常不是首选，因为您不能指望客户端发送正确的版本号（如果您有多个版本的 Web 服务，您最终可能会收到版本 X 的有效负载，但标有版本参数值 Y)。

出于这个原因，最好使用合约模式的命名空间来强制执行版本，例如：

```
...
<types>
      <xs:schema xmlns="http://tempuri.org/v1"
                targetNamespace="http://tempuri.org/v1">
... 
```

当您[对合同进行可破坏的更改](https://stackoverflow.com/questions/8786935/what-are-considered-non-breaking-or-backwards-compatible-changes-to-a-wsdl-contr)（例如删除操作）时，您会破坏所有现有的客户端，这是一个很大的 NO NO，因为您基本上使您的 Web 服务不可调用，因此无用。

因此，当您进行主要版本更改时，您会公开一个您现在定义的新合同，例如：

```
...
<types>
      <xs:schema xmlns="http://tempuri.org/v2"
                targetNamespace="http://tempuri.org/v2">
... 
```

您继续支持`v1`现有客户，同时使用`v2`所有新客户（幸运的是，随着时间的推移，您的`v1`客户可以迁移到`v2`）。

当您需要支持多个版本时，您基本上需要管理端点。在这一点上，你可以走两条路。

您要么维护一个`www.company.com/service/`接收所有消息（`v1`和`v2`）的端点，并充当一个门面，以根据消息命名空间重定向到正确的实现，要么......

...您直接将版本公开为单独的端点，现有客户端将使用接收`v1`消息的旧端点（也许`www.company.com/v1/service/`），而新客户端使用另一个仅接收`v2`消息的新端点（也许`www.company.com/v2/service/`）。

上面的设置在您的（只有一个）业务实现上更容易，它通过您的 Web 服务的不同框架实现向客户公开。用于业务层的框架`v1`并将`v2`其特定的有效负载参数转换为适当的参数。通过这种方式，所有调用都汇聚到业务层，此时业务层通常不关心客户端是哪个版本。

希望现在更清楚...

# windows - 通过 LLVM 或 GCC 定位 WinRT

> ID：13314686
> 
> 赞同：6
> 
> 时间：2012-11-09T19:30:51.743
> 
> 标签：windows, gcc, windows-8, windows-runtime, llvm

LLVM 和 GCC 都支持 Objective-C，我喜欢这种语言。因此，我有兴趣使用 LLVM 或 GCC 来定位 WinRT 本机代码，可能使用 MinGW。

虽然我感兴趣的问题应该很容易用谷歌搜索，但我找不到任何重要信息：LLV​​M 或 GCC 是否支持针对 WinRT？

* * *

英特尔有一篇关于在[Visual Studio 2012 中使用英特尔 C++ 编译器 13.0](http://software.intel.com/en-us/articles/experimenting-with-intel-c-compiler-130-and-windows-8-store-apps)的文章，其中可能包含有用的提示。

另外，一个[几乎重复的问题](https://stackoverflow.com/questions/12909139/can-windows-store-applications-be-built-with-mingw)。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-05-31T07:54:05.147

Clang 现在完全支持 Windows 上的原生 C 和 C++，以及原生 ABI 等。如果有用于 WinRT 的 C 或 C++ API，您应该可以轻松地使用 Windows 上使用 Clang 编译的代码调用它。

这不会*直接*将 ObjC 连接到 WinRT，但如果您愿意，您可以编写代码来建立这样的连接。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-11T18:00:55.737

目前，你被 MSVC 困住了。虽然访问 API 本身并非不可能（它基本上是带有一些花里胡哨的 COM），但如果不跳过一些钩子，将它与 Objective-C 接口就不会很有趣。

我最初看到的一个问题是，Objective C 不支持命名空间，并且在 Objective C 中使用 WinRT API 可能不会很有趣。[PPL](http://msdn.microsoft.com/en-us/library/dd492418.aspx)可用于 C++，在 C# 中有`await`关键字，但`...Async`在 Objective-C 中使用所有这些方法......你可能不想要那个；）

# c++ - 模板类型扣除失败

> ID：13314692
> 
> 赞同：0
> 
> 时间：2012-11-09T19:31:03.117
> 
> 标签：c++, templates, boost, template-meta-programming

我正在使用 MSVC 9.0 并具有此功能：

```
class RecipientList
{
public:
    template<class T>
    void fillMessageWithRecipients( typename boost::is_base_of<MsgContent, T>::type* msg );
};

template< class T >
void RecipientList::fillMessageWithRecipients( typename boost::is_base_of<MsgContent, T>::type* msg )
{
 // do stuff
} 
```

我希望模板类型推导在这里工作，所以我可以这样使用它：

```
class SomeMsg : public MsgContent {};

std::auto_ptr<SomeMsg> msg( new SomeMsg );

RecipientList recipients;
recipients.fillMessageWithRecipients( msg.get() ); 
```

但是我得到编译器错误：

> 错误 C2783：“void RecipientList::fillMessageWithRecipients(boost::is_base_of::type *)”：无法推断“T”的模板参数

我感觉这与实际传入的类型是指针类型而不是类型本身有关。知道如何在这里正确地进行类型推导吗？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T19:33:34.110

我感觉你在滥用`boost::is_base_of`。嵌套的`type`将是`true_type`或`false_type`。这两个都没有意义作为参数，你的指针将不能转换为那些。

你真正想要的：

```
#include <boost/type_traits/is_base_of.hpp>
#include <boost/utility/enable_if.hpp>

class MsgContent {};

class RecipientList
{
public:
    template<class T>
    typename boost::enable_if<
        typename boost::is_base_of<MsgContent, T>::type
      , void>::type
    fillMessageWithRecipients(T* t) { }
};

class SomeMsg : public MsgContent {};

int main()
{
  RecipientList recipients;
  SomeMsg m;
  recipients.fillMessageWithRecipients( &m );

  return 0;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-09T19:43:01.823

您应该将 is_base_of 与[enable_if](http://www.boost.org/doc/libs/1_52_0/libs/utility/enable_if.html)一起使用。

is_base_of 本身只是谓词。

[现场演示](http://ideone.com/KGnBia)

```
#include <boost/type_traits.hpp>
#include <boost/utility.hpp>
#include <iostream>
#include <ostream>

using namespace std;

struct Base1 {};
struct Derived1 : Base1 {};

struct Base2 {};
struct Derived2 : Base2 {};

template<typename T>
typename boost::enable_if< boost::is_base_of<Base1, T>, void >::type f(T* p)
{
    cout << "Base1" << endl;
}

template<typename T>
typename boost::enable_if< boost::is_base_of<Base2, T>, void >::type f(T* p)
{
    cout << "Base2" << endl;
}

int main()
{
    Derived1 d1;
    Derived2 d2;
    f(&d1);
    f(&d2);
} 
```

输出是：

```
Base1
Base2 
```

# android - OMAP4 相机参数

> ID：13314693
> 
> 赞同：1
> 
> 时间：2012-11-09T19:31:04.210
> 
> 标签：android, compilation, camera, android-4.0-ice-cream-sandwich, hal

IM 试图在此处找到[http://code.metager.de/source/xref/android/4.0.3/hardware-ti-omap4xxx/camera/CameraParameters.cpp的 CameraParameters 中输入默认 OMAP 4 相机参数](http://code.metager.de/source/xref/android/4.0.3/hardware-ti-omap4xxx/camera/CameraParameters.cpp)

```
const char CameraProperties::CAMERA_NAME[]="prop-camera-name";
const char CameraProperties::CAMERA_SENSOR_INDEX[]="prop-sensor-index";
const char CameraProperties::CAMERA_SENSOR_ID[] = "prop-sensor-id"; 
```

不知道我应该如何输入这些

比如像这样

```
const char CameraProperties::CAMERA_SENSOR_INDEX[2]="prop-sensor-index"; 
```

或者

```
const char CameraProperties::CAMERA_SENSOR_INDEX[]="prop-sensor-index,2"; 
```

或者

const char CameraProperties::CAMERA_SENSOR_INDEX[]="prop-sensor-index"{2};

原版的Logcat是这样的

> CameraHal [D] (1ccbs18) 硬件/ti/omap4xxx/camera/CameraParameters.cpp:202 转储-prop-sensor-index = 2

# powershell - 禁用 IE8 弹出窗口阻止程序 CLI 无注册表

> ID：13314697
> 
> 赞同：0
> 
> 时间：2012-11-09T19:31:24.037
> 
> 标签：powershell, windows-7, internet-explorer-8, popup-blocker

有没有办法使用某种命令行禁用 IE8s 弹出窗口阻止程序应用程序？最好是Powershell？我不想使用任何命令来触摸注册表。出于所有意图和目的，假设我只有本地用户访问权限，没有管理权限，我只想影响本地用户配置文件。这用于为用户的新 PC 进行初始配置文件设置。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T08:56:26.800

弹出窗口阻止程序在注册表中配置。它可以通过组策略、注册表编辑和点击 IE 菜单来设置。没有记录[相关的启动参数](http://msdn.microsoft.com/en-us/library/hh826025%28v=vs.85%29.aspx "IE命令行")。注册表设置分为计算机和用户上下文；前者不需要特殊权限。[组策略](http://support.microsoft.com/kb/843016 "GPO 和注册密钥")不需要用户的特殊权限。

最后的手段是使用像 Autoit 这样的工具来模拟点击 IE 菜单。这是最容易出错的一种方式，我会尽可能避免它。

# linux - 将输入事件注入 Linux GUI 程序

> ID：13314698
> 
> 赞同：2
> 
> 时间：2012-11-09T19:31:26.033
> 
> 标签：linux, user-interface, inject

有没有办法将输入事件（例如，键盘输入）注入 Linux GUI 程序？此功能的一个应用是实现系统范围的快捷方式。例如，我正在使用我的浏览器播放音乐，当我在做其他事情（例如，在 vim 中编写代码）时，我想跳到下一个项目。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T19:33:39.883

In theory you might use [XSendEvent](http://tronche.com/gui/x/xlib/event-handling/XSendEvent.html), but the receiving application might notice that it is fake, because the [XKeyEvent](http://tronche.com/gui/x/xlib/events/keyboard-pointer/keyboard-pointer.html#XKeyEvent) data type has a `send_event` field which is set by the [X11 server](http://en.wikipedia.org/wiki/X_Window_System), and the X11 clients (notably the Qt or GTK toolkits) may test it (and probably do test it).

See also [freedesktop](http://www.freedesktop.org/wiki/).

# python - scipy optimize.curve_fit 无法拟合返回值取决于条件的函数

> ID：13314699
> 
> 赞同：6
> 
> 时间：2012-11-09T19:31:33.743
> 
> 标签：python, python-2.7, scipy

我想将定义如下的函数拟合到时间序列数据：

```
def func(t, a0, a1, a2, T, tau1, tau2):
    if t < T:
        return a0 + a1 * np.exp(-t/tau1) + a2 * np.exp(-t/tau2)
    else:
        return a0 + a1 * np.exp(-T/tau1) * (1 - t/tau1 + T/tau1) + a2 * np.exp(-T/tau2) * (1 - t/tau2 + T/tau2) 
```

这里，t 表示进行测量的时间，其余参数是函数的参数。问题是当我将它输入curve_fit 时，Python 抱怨t < T 比较中的歧义。我相信会发生这种情况，因为当在 curve_fit 中调用 func 时 t 变成了数据点列表，而 T 是一个数字（不是列表）：

```
popt, pcov = curve_fit(func, t1, d1) 
```

其中 t1 是时间列表，d1 是在相应时间测量的数据值列表。我尝试了多种方法来解决这个问题，但无济于事。有什么建议吗？非常感谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-09T19:50:58.523

没错，`t < T`就是一个布尔数组。NumPy 拒绝为布尔数组分配真值，因为有很多可能的选择——如果*所有*元素都为真，它应该为真，还是*任何*元素为真？

但没关系。在这种情况下，NumPy 提供了一个很好的函数来替换`if ... else ...`块，即[np.where](http://docs.scipy.org/doc/numpy/reference/generated/numpy.where.html)：

```
def func(t, a0, a1, a2, T, tau1, tau2):
    return np.where(
        t < T,
        a0 + a1 * np.exp(-t/tau1) + a2 * np.exp(-t/tau2),
        a0 + a1 * np.exp(-T/tau1) * (1 - t/tau1 + T/tau1) + a2 * np.exp(-T/tau2) * (1 - t/tau2 + T/tau2) ) 
```

# c# - 将列表转换为字符串列表

> ID：13314701
> 
> 赞同：1
> 
> 时间：2012-11-09T19:31:56.453
> 
> 标签：c#, linq, entity-framework, c#-4.0

请看代码：

```
// get column list from entity framework
var listID = from Ines in ineContext.IneDetailRecords
             select Ines.InePIN.ToString().ToList();
string PIN = something;
if(!listID.Contains(PIN))
    // save it to DB 
```

InePIN 是 SQL Server DB 中的一个 cloumn，类型是 varchar(20)。

例外是：

```
Instance argument: cannot convert from 'System.Linq.IQueryable<System.Collections.Generic.List<char>>' to 'System.Linq.ParallelQuery<string>' 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-09T19:33:52.333

您需要在查询结果上应用 ToList 方法，而不是在所选列上，即`Ines.InePIN.ToString().ToList()`

**改变**

```
var listID = from Ines in ineContext.IneDetailRecords
                                       select Ines.InePIN.ToString().ToList(); 
```

**到**

```
var listID = (from Ines in ineContext.IneDetailRecords
                                       select Ines.InePIN.ToString()).ToList(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T19:35:03.720

您必须将整个列表转换为 ToString()

```
var listID = (from Ines in ineContext.IneDetailRecords
             select Ines.InePIN.ToString()).ToList(); 
```

并查看此链接以更好地理解类型协方差[http://blogs.msdn.com/b/csharpfaq/archive/2010/02/16/covariance-and-contravariance-faq.aspx](http://blogs.msdn.com/b/csharpfaq/archive/2010/02/16/covariance-and-contravariance-faq.aspx)

# mysql - Heroku db:Push - 未找到续集适配器

> ID：13314703
> 
> 赞同：0
> 
> 时间：2012-11-09T19:32:04.253
> 
> 标签：mysql, ruby-on-rails, heroku

我知道有许多类似的帖子，但我似乎仍然无法解决我的问题。因此，如果我遗漏了什么，请随时向孩子解释。:)

我正在尝试将数据从使用 Mysql 的本地计算机推送到使用 Postgres 的 Heroku。

该命令`heroku db:push sometable -t`生成以下错误消息：

```
Failed to connect to database Sequel::AdapterNotFound -> LoadError cannot load such file 
```

我也试过：

```
heroku db:push -t sometable mysql://user:password@localhost/db_name 
```

添加信息：

1.  使用 Windows 7
2.  使用 Rails 3.2.8
3.  使用 Ruby 1.9.3
4.  Mysql gem 已安装并与 Rails 一起使用
5.  Heroku 客户端是最新的
6.  数据库正在运行
7.  Heroku 数据库模式正在运行。
8.  Rails 使用 RailsInstaller 1.92 安装

任何建议都会非常受欢迎。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T18:35:25.693

我遇到了类似的问题，并且能够使用标准的 heroku gem 让它工作。

我通过他们的站点下载器安装了 Heroku - 用于 Windows 的“Heroku Toolbelt”包。那没有*用，所以另外*我还安装了

`Heroku gem`和所有依赖项。（忽略弃用警告）

`sqlite3 gem`用于水龙头（我不使用 sqlite，但 heroku 需要它）

然后它起作用了！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-02T07:51:16.010

Heroku 使用 PostgreSQL 作为数据库。如果你安装 pg，你不应该得到这个错误。

尝试运行：`gem install pg`

# tablesorter - tablesorter Update a value in a column

> ID：13314710
> 
> 赞同：1
> 
> 时间：2012-11-09T19:32:42.863
> 
> 标签：tablesorter

I have a TableSorter object with 5 columns. The forth one is a checkbox and the fifth one is a total, so numbers.

What I want to do is to change the value of my Total when I click on the checkbox on the same row. So how can I access the value of a specific column of the row I'm clicking on the checkbox ? I'm sure there is a simple way of doing it ! ;-)

Thanks !

FoG

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-04-24T06:32:49.600

我建议使用 updateCell 方法来更新单个表格单元格...我不建议使用“updateAll”，除非您要更改 .

```
var $cell = $('#myTarget');
$cell.html('some new data');
$('table').trigger('updateCell', [ this, resort, callback ] 
```

# ruby - ruby中判断两个url是否满足同源策略的内置方法

> ID：13314714
> 
> 赞同：0
> 
> 时间：2012-11-09T19:32:51.587
> 
> 标签：ruby, rubygems, same-origin-policy

我编写了一个有缺陷的实现来检测两个 url 是否在同一个域上。我意识到这不是火箭科学，但似乎会有一个内置的标准库。我的 google-fu 让我失望了。有没有我可以要求或归因于货物崇拜代码的库？

SOP 表示方案，端口相同且主机匹配，并且子域是源的子集

所以

```
google.com matches google.com
a.google.com matches google.com 
```

原来

```
a.b.google.com matches [b.google.com, google.com] but not [c.b.google.com, a.google.com] 
```

仅当您可以操作 document.domain 时才适用，这对我来说不是这样。需要直接主机匹配。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T20:07:13.600

从这篇 Wikipedia 文章看来，方案、主机和端口必须相同才能满足同源策略。

[http://en.wikipedia.org/wiki/Same_origin_policy](http://en.wikipedia.org/wiki/Same_origin_policy)

```
require 'uri'

class SameOrigin
  def self.test(str1, str2)
    uri1 = URI.parse(str1)
    uri2 = URI.parse(str2)
    uri1.scheme == uri2.scheme && uri1.host == uri2.host && uri1.port == uri2.port
  end
end

SameOrigin.test "http://google.com", "http://google.com"     # => true
SameOrigin.test "http://google.com:80", "http://google.com"  # => true
SameOrigin.test "http://google.com", "http://www.google.com" # => false
SameOrigin.test "https://google.com", "http://google.com"    # => false 
```

如果您使用[Domainatrix](https://github.com/pauldix/domainatrix)库，我发现您可以将代码更改为类似这样的代码来进行测试，但对我来说运行速度有点慢。另一种选择是使用这个 RegEx 来查找 url 的域。RegEx 速度更快，但可能并非在所有情况下都有效。顺便说一句，我在这里找到了 RegEx。

[从 ruby​​ 中的字符串中删除子域](https://stackoverflow.com/a/983558/107797)

```
require 'rubygems'
require 'domainatrix'
require 'uri'

class SameOrigin
  def self.relaxed_test(str1, str2)
    d1 = Domainatrix.parse(str1)
    d1 = Domainatrix.parse(str2)

    uri1 = URI.parse(str1)
    uri2 = URI.parse(str2)

    uri1.scheme == uri2.scheme && 
    d1.domain == d1.domain && 
    d1.public_suffix == d1.public_suffix && 
    uri1.port == uri2.port
  end

  def self.relaxed_test2(str1, str2)
    uri1 = URI.parse(str1)
    uri2 = URI.parse(str2)

    re = /^(?:(?>[a-z0-9-]*\.)+?|)([a-z0-9-]+\.(?>[a-z]*(?>\.[a-z]{2})?))$/i
    domain1 = uri1.host.gsub(re, '\1').strip
    domain2 = uri2.host.gsub(re, '\1').strip

    uri1.scheme == uri2.scheme && domain1 == domain2 && uri1.port == uri2.port
  end
end

SameOrigin.relaxed_test "http://google.com", "http://google.com"     # => true
SameOrigin.relaxed_test "http://google.com:80", "http://google.com"  # => true
SameOrigin.relaxed_test "http://google.com", "http://www.google.com" # => false
SameOrigin.relaxed_test "https://google.com", "http://google.com"    # => false

SameOrigin.relaxed_test2 "http://google.com", "http://google.com"     # => true
SameOrigin.relaxed_test2 "http://google.com:80", "http://google.com"  # => true
SameOrigin.relaxed_test2 "http://google.com", "http://www.google.com" # => false
SameOrigin.relaxed_test2 "https://google.com", "http://google.com"    # => false 
```

# imagemagick - How to rotate the image frame?

> ID：13314718
> 
> 赞同：0
> 
> 时间：2012-11-09T19:33:14.613
> 
> 标签：imagemagick, imagemagick-convert

```
convert 'a.png' \
\( -background none -geometry 100x100+150+50! -rotate 5 'b.png' \) \
-composite 'a.png'; 
```

This is a simple script to rotate and place an image `b` on top of image `a`. My problem is that image `b` is being rotated within the defined area (100x100):

![bad](../Images/d1f12e1ecf9cfedd69d8c67f47f613cd.png)

How do I rotate the whole image frame as such:

![good](../Images/929144d832d2d77214ee38da81d605b8.png)

Or, put it simple:

![enter image description here](../Images/41daa582802bd1d060dd29fd2b9509ed.png)

1.  is the original picture (a) with (b) picture on top of it
2.  picture two is how im rotates the (b) picture
3.  is how I need the picture rotated

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T20:20:24.303

在 Freenode 社区的帮助下，答案如下：

```
convert 'a.png' \( 'b.png' -resize 100x100 -rotate 50 \) -geometry +100+50 -composite 'a.png'; 
```

问题是`-geometry`将旋转的元素限制在指定的尺寸。

# objective-c - Need to post to facebook and twitter from an ios app

> ID：13314719
> 
> 赞同：0
> 
> 时间：2012-11-09T19:33:19.680
> 
> 标签：objective-c, ios, facebook, twitter

I've been doing some research on how to post to fb and to twitter... I know there is a library called Sharekit and I also know I can post using the new iOS6 feature SLComposeViewController... I just need to post a text, that's all... It's not necessary that the user can edit the message...

I need some advice, what would you use?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T19:38:37.103

如果您可以只支持 iOS6，那`SLComposeViewController`可能是最简单的。在 Facebook 方面，您失去了通过 iOS 版 Facebook SDK 提供的一些不错的小功能（例如，让 Facebook 帖子带有一些迹象表明它来自您的应用程序的能力，[优雅地包含图像和 URL](https://stackoverflow.com/questions/12867135/facebook-slcomposeviewcontroller-url-shows-up-in-body-if-both-url-and-image-pres/12880063#12880063)等）。

最重要的是，如果您对仅 iOS6 没问题并且想要保持简单，那么[`SLComposeViewController`](http://developer.apple.com/library/ios/#documentation/NetworkingInternet/Reference/SLComposeViewController_Class/Reference/Reference.html)可能是最简单的并且可以同时使用 Twitter 和 Facebook。如果你想充分利用 Facebook，或者如果你必须支持 iOS 5，你真的必须追求[Facebook SDK](https://developers.facebook.com/docs/howtos/publish-to-feed-ios-sdk/)，但它需要更多的代码。在 Twitter 方面，如果你需要支持 iOS 5，那么你需要使用[`TWTweetComposeViewController`](http://developer.apple.com/library/ios/#documentation/Twitter/Reference/TWTweetSheetViewControllerClassRef/Reference/Reference.html).

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T21:29:17.553

试试这个：

```
- (IBAction)share:(id)sender
{
    NSString *text = @"Your message";
    UIImage *image = [UIImage imageNamed:@"yourimage.png"];
    NSArray *items = [NSArray arrayWithObjects:text,image , nil];
    UIActivityViewController *avc = [[avcClass alloc] initWithActivityItems:items applicationActivities:nil];
    avc.excludedActivityTypes = @[UIActivityTypePrint, UIActivityTypeCopyToPasteboard, UIActivityTypeAssignToContact,UIActivityTypeSaveToCameraRoll, UIActivityTypeMessage, UIActivityTypeMail];
    [self presentViewController:avc animated:YES completion:nil];
} 
```

这应该适合你。只需设置 NSString ，如果你想要一个图像。

无需框架！

# c# - 协作环境中实体框架中的迁移

> ID：13314725
> 
> 赞同：50
> 
> 时间：2012-11-09T19:33:46.387
> 
> 标签：c#, entity-framework, migration, collaboration, entity-framework-migrations

我们有多个开发人员正在开发一个使用 Entity Framework 5.0 的项目。每个开发人员都使用自己的本地 SQL 2012 数据库，因此他可以在不妨碍他人的情况下进行开发和测试。

起初，我们混合使用了自动迁移和基于代码的迁移。这根本不起作用，所以我们决定禁用自动迁移并只允许基于代码的迁移。我应该补充一点，我们从一个干净的数据库重新开始，而`_MigrationsHistory`所有自动迁移都没有“损坏”。

所以现在的工作流程是：

1.  开发人员更改他的数据模型
2.  使用.`add-migration <Name>`将其应用于他的数据库`update-database`。
3.  检查数据模型更改并迁移到 Git。
4.  另一个开发人员提取、接收更改并将其应用到他的数据库。

到目前为止，这运作良好。然而在今天之前，通常只有我进行迁移，其他人应用它们。但是今天有来自三个开发人员的迁移。我刚刚取消了那些迁移，做得`update-database`很好。

我也对自己的数据模型进行了更改，但是在最后`update-database`它给了我一个警告，说我仍然不是最新的，所以我做了`add-migration <my migration>`。但是，当它为迁移搭建脚手架时，它给了我已经应用到数据库的所有迁移的更改。所以：它试图删除已经被删除的列，试图创建一个已经存在的表，等等。

这个怎么可能？我的假设是 EF 只会检查`_MigrationsHistory`表并找出表中尚不存在哪些迁移，并按名称中的时间戳顺序逐一应用这些迁移。但显然不是，因为即使我撤消自己的更改并且我有一个干净的环境，它仍然会抱怨我的数据库与模型不同步。但我只是提取了这些更改并将它们应用到我的数据库中。它*是*同步的。我也可以看到我刚刚在`_MigrationsHistory`表格中应用的迁移。

我唯一能想到的是我向数据模型添加了一个不会导致数据库更改的属性（我`List<X>`向数据模型 Y 添加了一个，其中 X 是一对多关系中的多个。这不会导致数据库更改，因为 X 已经有 Y 的外键）。会是这样吗？如果是这样，那真的很脆弱，因为没有办法为此添加迁移，因为没有数据库更改，我也不知道如何解决这个问题。

我不确定如何处理这个问题，因为我当然可以编辑它所搭建的内容并删除已经应用于我的数据库的所有内容。但是然后呢？我签入它，然后其他一些开发人员收到相同的消息，即使在应用我的新更改后，他的数据库也不是最新的，搭建他自己的更改，获得相同的废话脚手架，编辑它，签入，然后*下一个*开发商明白了。它变成了一个恶性循环，与我们使用自动迁移时的情况类似，我认为我们已经通过切换到仅基于代码的方式解决了这个问题。我现在不能相信它会做正确的事情，像这样工作简直是一场噩梦。

我还尝试过添加我从同事那里提取的迁移，`update-database -t:201211091112102_<migrationname>`但无济于事。它仍然给了我错误的脚手架。

那么我们在这里做错了什么，或者 EF 根本不是为这样的协作而构建的？

**更新**

我创建了一个可重现的测试用例，但为了模拟这种多用户/多数据库场景，这有点冗长。

[https://github.com/JulianR/EfMigrationsTest/](https://github.com/JulianR/EfMigrationsTest/)

当您拥有上述项目时重现的步骤（这些步骤也存在于代码中）：

1.  添加迁移初始化
2.  更新数据库（在数据库“TestDb”上）
3.  更改连接字符串以指向 TestDb1
4.  TestDb1 上的更新数据库
5.  取消注释类 Test 上的属性 Foo
6.  add-migration M1 将属性 Foo 添加到 TestDb1
7.  再次注释掉 Test.Foo
8.  更改连接字符串以指向 TestDb2
9.  从项目中排除迁移 M1，使其不会应用于 TestDb2
10.  取消注释类 Test 上的属性 Bar
11.  更新数据库以将初始化迁移应用到 TestDb2
12.  add-migration M2 将属性 Bar 添加到 TestDb2
13.  更改连接字符串以再次指向原始 TestDb
14.  再次将迁移 M1 包含到项目中
15.  取消注释类 Test 上的属性 Foo
16.  取消注释类 Test 上的属性 SomeInt
17.  更新数据库
18.  添加迁移 M3
19.  更新数据库，因为 M3 尝试将 Foo 列添加到数据库 TestDb 中，该列已经由迁移 M1 添加。

以上是模拟三个用户，其中用户1初始化他的数据库，另外两个使用他的初始化来创建他们的数据库。然后用户 2 和用户 3 都对数据模型进行了自己的更改，并将其与应用更改所需的迁移一起添加到源代码管理中。然后用户 1 拉取用户 2 和 3 的更改，而用户 1 自己也对数据库进行了更改。然后用户 1 调用`update-database`以应用用户 2 和 3 的更改。然后他构建自己的迁移，然后错误地将用户 2 或 3 的更改添加到脚手架迁移中，这在应用于用户 1 的数据库时会导致错误。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2014-04-01T21:47:14.277

您需要添加一个空白的“合并”迁移，它将重置 .resx 文件中最新迁移的快照。使用 IgnoreChanges 开关执行此操作：

`Add-Migration <migration name> -IgnoreChanges`

请参阅[此处](http://msdn.microsoft.com/en-us/data/dn481501)以获取说明

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-12T18:13:48.237

您需要像处理代码冲突一样手动解决迁移冲突。如果您更新并且有新的迁移，则需要确保上次迁移背后的元数据与当前模型匹配。要更新迁移的元数据，请为其重新发出 Add-Migration 命令。

例如，在您的场景中的第 17 步（更新数据库）之前，您应该发出以下命令

```
Add-Migration M2 
```

这将更新元数据以使其与您当前的模型同步。现在，当您尝试添加 M3 时，它应该是空白的，因为您还没有进行任何进一步的模型更改。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2017-08-07T10:38:48.380

> **选项 1：添加一个空白的“合并”迁移**
> 
> 1.  确保本地代码库中的任何待定模型更改都已写入迁移。此步骤可确保您在生成空白迁移时不会错过任何合法更改。
> 2.  与源代码管理同步。
> 3.  运行 Update-Database 以应用其他开发人员签入的任何新迁移。**注意：****如果您没有从 Update-Database 命令中收到任何警告，则其他开发人员没有新的迁移，并且有无需执行任何进一步的合并。
> 4.  运行 Add-Migration –IgnoreChanges（例如 Add-Migration Merge –IgnoreChanges）。这会生成包含所有元数据（包括当前模型的快照）的迁移，但在将当前模型与上次迁移中的快照进行比较时会忽略它检测到的任何更改（这意味着您会得到一个空白的 Up 和 Down 方法）。
> 5.  继续开发，或提交到源代码控制（当然是在运行单元测试之后）。
> 
> **选项 2：更新上次迁移中的模型快照**
> 
> 1.  确保本地代码库中的任何待定模型更改都已写入迁移。此步骤可确保您在生成空白迁移时不会错过任何合法更改。
> 2.  与源代码管理同步。
> 3.  运行 Update-Database 以应用其他开发人员签入的任何新迁移。**注意：****如果您没有从 Update-Database 命令中收到任何警告，则其他开发人员没有新的迁移，并且有无需执行任何进一步的合并。
> 4.  运行 Update-Database –TargetMigration（在我们一直遵循的示例中，这将是 Update-Database –TargetMigration AddRating）。这使数据库恢复到最后一次迁移的状态——有效地从数据库中“取消应用”最后一次迁移。** 注意：****此步骤是确保编辑迁移的元数据安全所必需的，因为元数据也存储在数据库的 __MigrationsHistoryTable 中。这就是为什么您应该仅在最后一次迁移仅在您的本地代码库中时才使用此选项的原因。如果其他数据库应用了最后一次迁移，您还必须回滚它们并重新应用最后一次迁移以更新元数据。
> 5.  运行 Add-Migration（在我们一直遵循的示例中，这类似于 Add-Migration 201311062215252_AddReaders）。** 注意：**** 您需要包含时间戳，以便迁移知道您要编辑现有迁移而不是构建新迁移。这将更新上次迁移的元数据以匹配当前模型。当命令完成时，您将收到以下警告，但这正是您想要的。“只有用于迁移 '201311062215252_AddReaders' 的设计器代码被重新搭建。要重新构建整个迁移，请使用 -Force 参数。”
> 6.  运行 Update-Database 以使用更新的元数据重新应用最新迁移。
> 7.  继续开发，或提交到源代码控制（当然是在运行单元测试之后）。

MSDN 对此有一篇很棒的文章。请通过它。

[团队环境中的实体框架代码优先迁移](https://msdn.microsoft.com/en-us/library/dn481501(v=vs.113).aspx)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-13T04:37:46.103

我们在我们的环境中遇到了类似的问题，以下是我们迄今为止发现的问题以及我们如何解决它：

当您有已应用的更改（更新数据库）但未签入时，然后您从另一个没有您更改的开发人员那里收到更改，这就是事情似乎不同步的地方。根据我们的经验，当您执行更新数据库过程时，为您自己的更改保存的元数据似乎被其他开发人员的元数据覆盖。其他开发人员没有您的更改，因此保存的元数据不再是您数据库的真实反映。当 EF 在那之后进行比较时，它“认为”您的更改实际上又是新的，因为元数据发生了变化。

一个简单但丑陋的解决方法是进行另一次迁移，并清除它的内容，这样您就有了 empty up() 和 empty down() 方法。应用该迁移并将其签入源代码控制，并让每个人都同步到它。这只是同步了所有元数据，因此每个人都可以考虑所有更改。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-09-18T14:07:45.570

我在 codeplex 上添加了一个问题，这个问题也在我们的团队中引起了很多人的头疼。

链接是[https://entityframework.codeplex.com/workitem/1670](https://entityframework.codeplex.com/workitem/1670)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-12-12T10:00:40.983

我对此进行了一些思考，我希望我能为这里提出的不同观点和实践做出贡献。

考虑一下您的本地迁移实际代表什么。在本地使用开发数据库时，我在向表中添加列等、添加新实体等时，使用迁移以最方便的方式更新数据库。

因此，Add-Migration 将我当前的模型（我们称之为模型 b）与我之前的模型（模型 a）进行对比，并生成从数据库中的 a => b 开始的迁移。

对我来说，尝试将我的迁移与其他任何人的迁移合并是没有意义的，如果每个人都确实拥有自己的数据库，并且组织中存在某种阶段/测试/开发/生产数据库服务器。这一切都取决于团队是如何设置的，但是如果您想真正以分布式方式工作，那么将彼此与其他人所做的更改隔离开来是有意义的。

好吧，如果你在分布式工作并且有一些实体，例如，你工作的人。出于某种原因，许多其他人也在研究它。因此，您可以根据 sprint 中特定故事的需要在 Person 上添加和删除属性（我们在这里都在灵活地工作，不是吗？），例如您首先将社会安全号码设为整数，因为您不是那个明亮，然后到一个字符串等。

您添加名字和姓氏。

然后你就完成了，你有十个奇怪的上下迁移（你可能在工作时删除了其中一些，因为它们只是垃圾），你从中央 Git 存储库获取一些更改。哇。你的同事鲍勃也需要一些名字，也许你们应该互相谈谈？

无论如何，他已经添加了 NameFirst 和 NameLast，我猜……那你怎么办？好吧，您合并、重构、更改，使其具有更合理的名称……例如 FirstName 和 LastName，您运行测试并检查他的代码，然后推送到中央。

但是迁移呢？好吧，现在是时候进行迁移中央仓库了，或者更具体地说，分支“测试”包含从其模型 a => 模型 b 的一个不错的小迁移。这次迁移将是一次且只有一次迁移，而不是十次奇怪的迁移。

你明白我在说什么吗？我们正在使用漂亮的小 pocos，它们的比较构成了实际的迁移。所以，我们根本不应该合并迁移，在我看来，我们应该有每个分支的迁移或类似的东西。

事实上，我们甚至需要在合并之后在分支中创建迁移吗？是的，如果这个数据库是自动更新的，我们需要。

要考虑的另一件事是，在从中央仓库拉取数据之前，永远不要真正创建迁移。这意味着在创建迁移之前，您将同时获得其他团队成员的迁移代码**及其**对模型的更改。

必须再努力一些，至少这些是我对此的想法。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-11-07T17:26:25.997

The solution I was able to come up with (at least for 2 users, haven't tested for 3) is:

1.  merging migrations to sync up the meta-data run update-database (this should fail), then
2.  add-database and then
3.  delete all of the generated code in `up()` and `down()` methods

this will still be run by update database but won't do anything, just bringing the metadata up to sync.

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2014-02-24T19:02:56.067

我同意@LavaEater。看来，问题的核心是移民脚手架应该集中化。每次推送发生时，也许作为一些自动化/集成构建过程的一部分？此后，团队成员可以从服务器中提取结果迁移。

这意味着不应将他们自己的迁移脚本推送到服务器。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2021-02-11T11:00:47.543

有一种简单的方法可以避免与迁移**发生合并冲突/错误。**

1.  随时在您的分支上工作。
2.  如果您合并到 master 并出现合并错误，则：
3.  从文件夹中删除所有 *.cs 文件`migrations`。
4.  做`git checkout master ./*`里面的`migrations`文件夹。
5.  重新创建迁移。
6.  您的快照是 up2date 并且没有合并冲突。
7.  同样，在将拉取请求合并到 master 之前，您需要与 master 合并并始终执行步骤 3-6。

下面是执行步骤 3-6 的简单 Powershell 脚本：

```
function Write-Info($text)
{
    Write-Color "$pwd", "> ", "$text" -Colour "Yellow", "Blue", "White"
}
function Create-Migration($project, $migrationName, $referenceBranch)
{
    Set-Location "$SolutionPath\$project"
    Write-Info "Going to migrations"
    Set-Location "Migrations"
    Write-Info "Removing ./*.cs"
    Remove-Item ./*.cs
    Write-Info "git fetch --all"
    git fetch --all
    Write-Info "git checkout origin/$referenceBranch ./*"
    git checkout origin/$referenceBranch ./*
    Set-Location ..
    Write-Info "Creating migration $migrationName "
    dotnet ef migrations add "$migrationName"
} 
```

在过去的半年里，我一直在使用这种方法。0 迁移时要解决的合并冲突 8).

# php - 订阅在 zen cart 1.3.8 中无法正常工作

> ID：13314729
> 
> 赞同：0
> 
> 时间：2012-11-09T19:33:51.647
> 
> 标签：php, newsletter, zen-cart

我在 zen cart 1.3.8a 中遇到错误。对于注册用户，当用户取消选中后再次检查时，他/她会收到错误

```
1062 Duplicate entry 'navido82@hotmail.com' for key 'email_address'
in:
[INSERT INTO subscribers (customers_id, email_address, email_format) VALUES ('2102', 'navido82@hotmail.com', 'HTML')] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T03:12:23.600

Zen Cart v1.3.8 中没有“订阅者”表。
因此，这是您自己的自定义和/或插件中的错误。

此外，您确实需要升级到 Zen Cart 的安全版本。您的旧版本不仅过时，而且存在已知的安全问题。

# java - Mac 上的 Swing 应用程序窗口没有响应

> ID：13314731
> 
> 赞同：1
> 
> 时间：2012-11-09T19:33:51.583
> 
> 标签：java, macos, swing, windowbuilder, swt-awt

我试图让一个基本的*Swing 应用程序*在我的*Mac OS X 10.8.2*（Java 版本 1.6.0_37）机器上运行，每次我尝试从*Eclipse*运行它时，都会出现框架，但我无法交互用它。

我试图从一个基本的、干净的开始，在*Eclipse中创建一个新的**Swing Application Window*项目。这将生成以下骨架代码： *`(WindowBuilder->Swing Designer->Application Window)`*

 *```
import java.awt.EventQueue;

import javax.swing.JFrame;
import javax.swing.JButton;
import java.awt.BorderLayout;

public class Test {

private JFrame frame;

/**
 * Launch the application.
 */
public static void main(String[] args) {
    EventQueue.invokeLater(new Runnable() {
        public void run() {
            try {
                Test window = new Test();
                window.frame.setVisible(true);
                window.frame.pack();
            } catch (Exception e) {
                e.printStackTrace();
            }
        }
    });
}

/**
 * Create the application.
 */
public Test() {
    initialize();
}

/**
 * Initialize the contents of the frame.
 */
private void initialize() {
    frame = new JFrame();
    frame.setBounds(100, 100, 450, 300);
    frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

    JButton btnPress = new JButton("Press");
    frame.getContentPane().add(btnPress, BorderLayout.CENTER);
}

} 
```

一切似乎都很好，但是当我从 Eclipse 运行它时，框架不允许我与任何组件交互（在我的非示例代码中，有按钮和选项卡）。

此外，在控制台中，我看到如下内容：

`2012-11-09 14:30:27.624 java[8107:707] [Java CocoaComponent compatibility mode]: Enabled`

`2012-11-09 14:30:27.626 java[8107:707] [Java CocoaComponent compatibility mode]: Setting timeout for SWT to 0.100000`

是否有一些我必须更改的特定于 Mac 的设置？（我使用的是最新的默认 Mac JRE）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T21:49:30.930

在我的应用程序中使用 DJ Swing 库（它使用 SWT）时，我遇到了同样的问题。有趣的是，即使我没有明确地初始化 DJ Swing，问题还是出现了。它现在可以工作了，因为我添加了 DJ Swing 初始化：

```
public class SwingAppTest {

    public static void main(String[] args) {

        NativeInterface.open();
        UIUtils.setPreferredLookAndFeel();

        SwingUtilities.invokeLater(new Runnable() {

            public void run() {
                JFrame frame = new JFrame("Example");
                frame.getContentPane().setLayout(new BorderLayout());
                frame.setPreferredSize(new Dimension(400, 200));
                frame.setBounds(0,0,200,200);
                frame.setTitle("blah");
                JButton blah = new JButton("blah");
                blah.addActionListener(new ActionListener() {

                    public void actionPerformed(ActionEvent e) {
                        System.out.println("button clicked");
                    }
                });
                frame.getContentPane().add(blah, BorderLayout.CENTER);
                frame.setVisible(true);
            }
        });

        NativeInterface.runEventPump();
    }

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T19:54:40.727

该程序在我的机器上运行良好，在 OSX 下，但它可能是丢失的

```
window.frame.pack(); 
```

你试过这个吗？

```
Test window = new Test();
window.frame.pack();
window.frame.setVisible(true); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-09T19:45:56.647

这很奇怪。我尝试了您的示例（没有 linux），但没有发现任何问题。正如韦恩所说，可能是macos问题。

顺便说一句，您使用的 java 版本是什么？

另一方面，问题可能出在您没有与我们分享的代码中 => 难以猜测 :)

**编辑**：好的，看来您正在和我们一起玩“猜猜我的代码中有什么”游戏:) 因为我的假设是未显示的代码会导致问题。

它让我想起了一些 Poiroit/Agatha Christie 的侦探故事，其中的一个小细节可能会对现实产生重大影响。

这就是我的理论的原因：

*   显示的代码使用 Java swing 库 ( `import javax.swing. ...`) + Awt ( `import java.awt. ...`) - 这种组合是常见的用例，但是
*   您共享的错误消息显示 SWT 库错误 ( `Setting timeout for SWT to 0.100000`)

所以对我来说，你似乎在混合不应该混合的东西。与`Swing`构建在`Awt`. 然而`SWT`，完全不同的 java UI 库是本地调用与 java 的混合（最初是 IBM 制造的）。

因此，我建议仔细检查您的代码，并确保如果您使用`JFrame`，那么您拥有的唯一库组件来自`Swing`( `javax.swing....`) / `Awt` ( `java.awt. ...`)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-16T11:22:36.983

几天来，我一直在把头撞在墙上，试图让它工作，终于找到了答案：

“现在已经解决了——这只是从项目依赖项中删除 swt.jar 的一个例子。”

嘿，快！！！！

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-09T19:42:18.390

Apple 在 10.6 之后的操作系统中不再支持 Java：
[Apple 不承诺在 Mac OS X 10.7 中支持 Java](http://news.cnet.com/8301-31021_3-20020338-260.htmlhttp://news.cnet.com/8301-31021_3-20020338-260.html)

JRE 中似乎缺少或不兼容的库文件。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-10-14T06:19:40.730

就我而言，我试图编写一个使用 jPanel 的游戏。我需要重写paint方法并添加`pack();`到main中，它最终向我展示了我想要绘制的内容。*

# css - Firefox 中的 CSS3 @font-face 根据 URL 前缀更改

> ID：13314732
> 
> 赞同：2
> 
> 时间：2012-11-09T19:34:03.703
> 
> 标签：css, url, firefox, fonts

在使用 Firefox (v16) 时，我注意到根据 URL 前缀，CSS 字体将或不会加载...

前缀是指三个字母“www”。

这是一个例子：

[http://www.purplemartinpress.com/](http://www.purplemartinpress.com/)

比...

[http://purplemartinpress.com/](http://purplemartinpress.com/)

在 Firefox 中使用“www”前缀时，不会加载字体。为什么是这样？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T19:36:41.390

Firefox（实际上是大多数其他浏览器）将 www 子域视为任何其他子域 - 也就是说，具有 www 子域的 URL 与没有子域的 URL 不同，即使它们的二级域和顶级域相同，不匹配也是如此。如果您有不匹配的域，那么您的`@font-face`字体将不会在 Firefox 中加载。有关详细信息，请参阅[此答案](https://stackoverflow.com/questions/2892691/font-face-fonts-only-work-on-their-own-domain/2892697#2892697)。

解决此问题的简单方法是在链接到同一域下的资源时使用域相对 URL（删除 URL 的`http://purplemartinpress.com`一部分），或者将 URL 规范化为始终具有 www 或从不具有。

# mysql - Mysql根据列输入动态更新行

> ID：13314738
> 
> 赞同：2
> 
> 时间：2012-11-09T19:34:24.873
> 
> 标签：mysql, string, sql-update

我有以下问题。我有一个名为`titles`以下结构的表：

```
id int(10),
name varchar(100), 
```

稍后我们添加了一个名为 的新列`modified_name`。它的定义与它相同，`name`只是它是小写的，并且所有空格都替换为`-`. 我们添加了这一列，因此我们现在需要在该列的每条记录中获取正确的修改名称值。为此，我们编写了一个 PHP 脚本，该脚本通过从数据库中加载值并处理它们来处理该问题，但这非常低效。是否可以编写一个`UPDATE`查询，将正确的值添加到`titles`表中的每条记录。我可以想办法用一个存储过程和一个while循环来做到这一点，但我想知道是否有可能更有效。它有任何方法可以实现以下目标：

```
UPDATE `titles` 
    SET 
`modified_name` = LOWER(REPLACE(SELECT `name` FROM `titles` WHERE id = PRESENT_VALUE), ' ', '-'); 
```

目标是将表`modified_title`中每条记录的列设置`titles`为由该记录的列产生的唯一值，`name`如下所示：

```
# Before modification update query
name = "Hello Goodbye" 
modified_name = ""    

# After modification update
name = "Hello Goodbye" 
modified_name = "hello-goodbye" 
```

感谢您的帮助，任何有关如何最好地做到这一点的建议将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T19:40:15.877

```
UPDATE `titles` SET `modified_name` = LOWER(REPLACE(`name`, ' ', '-')) 
```

# c - 尝试在 freebsd 中编译系统调用 .c 文件时发生冲突错误

> ID：13314742
> 
> 赞同：1
> 
> 时间：2012-11-09T19:34:39.303
> 
> 标签：c, kernel, freebsd, bsd

我正在尝试向 freebsd 8 添加一个新的系统调用。我在 VMplayer 上使用 freebsd。当我尝试编译模块时，我给出了这个错误：

![在此处输入图像描述](../Images/499df514ffd8448cab0ffc9b362996cf.png)

我的代码是（我也有一个 Makefile 文件）：

```
#include <sys/param.h>
#include <sys/types.h>
#include <sys/proc.h>
#include <sys/module.h>
#include <sys/sysent.h>
#include <sys/kernel.h>
#include <sys/systm.h>
#include <sys/sysproto.h>
struct user_datas{

};

static char* rot13func(struct thread* td , void* args)
{
    struct user_datas* upp=args;
    char* myarray=(upp->input);
    return myarray;
}

static struct sysent rot13func_sysent={
    1,
    rot13func
};

static int offset=NO_SYSCALL;

static int load (struct module *module , int cmd, void *arg)
{
    int error=0;
    switch(cmd){
       case MOD_LOAD:
          break;
       case MOD_UNLOAD:
          break;
       default:
          error=EOPNOTSUPP;
          break;
    }
    return(error);
}

SYSCALL_MODULE(rot13func, &offset , & rot13func_sysent , load, NULL); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-12T14:49:26.953

看起来您的 Makefile 不正确并且使用了错误的包含路径。尝试使用`/usr/share/examples/kld/syscall/module/`示例中的一个，如下所示：

```
# Makefile for building the sample syscall module
# $FreeBSD: src/share/examples/kld/syscall/module/Makefile,v 1.2 2001/09/18 12:03:42 ru Exp $

KMOD=   syscall
SRCS=   syscall.c

.include <bsd.kmod.mk> 
```

它将采取适当的步骤为您设置适当的模块构建环境。

# jquery - 来自 JSON 的 Mustache.js 数据

> ID：13314743
> 
> 赞同：1
> 
> 时间：2012-11-09T19:34:45.527
> 
> 标签：jquery, ajax, mustache

我目前正在开发 jQuery Mobile 网站，该网站将使用来自 JSON 源的数据。要生成 HTML，我使用 Mustache.js - javascript 模板引擎。

我有一个问题，`AJAX -> JSON -> MUSTACHE`因为 JSON 数据没有正确呈现。

一切正常，所有长 JSON 数据都在同一个文件中，我根本没有使用 AJAX。
请看一下这个**[演示](http://piotr.site44.com/index.html)**。

JSON：

```
[{
    "users": [{
        "userName": "Billy Bob",
            "userId": "2AE5F6D0-5A70-4EBF-BBAA-C0A11E74BFD8",
            "securityLevel": "Admin",
            "createdDate": "9/12/2012"
    }]
}] 
```

模板：

```
var template = "{{#users}}\
            <li class='userRow'>\
            <span class='userField'><a href='#' class='userLink' userId='{{userId}}'>{{userName}}</a></span>\
            <span class='userField'>{{securityLevel}}</span>\
            <span class='userField'>{{createdDate}}</span>\
            </li>\
            {{/users}}"; 
```

AJAX（AJAX 调用正常，返回 JSON 代码 200。）

```
$.ajax({
                url: 'http://piotr.site44.com/json.js',
                type: 'post',
                data: "json",
                success: function(data) {
                                    var html = Mustache.to_html(template, data); 
                    $(html).appendTo('#cnt');

                }

            }); 
```

**当我这样做`console.log(html)`时，它实际上在控制台中显示空字符串。很奇怪。任何想法我做错了什么？**

# scala - Can you define a value (in a if) in a for comprehension in Scala for use in yield

> ID：13314759
> 
> 赞同：5
> 
> 时间：2012-11-09T19:35:43.480
> 
> 标签：scala, functional-programming, for-comprehension

Is it possible to define a value (in a if) in a for comprehension in Scala for use in yield.

I want to do this to avoid a potential expensive evaluation two times.

An example to illustrate.

```
for {
 bar <- bars if expensive(bar) > 5
} yield (bar, expensive(bar)) 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-09T19:39:17.937

How about this:

```
for {
 bar <- bars
 exp = expensive(bar)
 if exp > 5
} yield (bar, exp) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-09T19:39:03.540

Yes, you can:

```
scala> List(1,2,3,4,5)
res0: List[Int] = List(1, 2, 3, 4, 5)

scala> for(n <- res0; val b = n % 2; if b==1) yield b
res2: List[Int] = List(1, 1, 1) 
```

# actionscript-3 - actionscript 处理时间延迟？

> ID：13314761
> 
> 赞同：1
> 
> 时间：2012-11-09T19:35:46.277
> 
> 标签：actionscript-3, flash, flash-cs5

我想知道如何让补间在执行前多等几秒钟？我的代码如下：

```
 btn_1.addEventListener(MouseEvent.CLICK, about_navigate);

    function about_navigate(event:MouseEvent):void
        {
        topbarTween.yoyo();
        //how to make the below tween wait 2 seconds before it is carried out   
        btmTween.yoyo();
        } 
```

我是 AS3 的新手，所以任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T19:41:10.877

我不认为 N​​ative`Tween`类有内置的延迟方法（就像大多数第三方解决方案一样 - 虽然如果我弄错了，请有人纠正我）。

您可以做的是使用`flash.utils.setTimeout`或`Timer`.

```
function about_navigate(event:MouseEvent):void
{
    topbarTween.yoyo();
    setTimeout(btmTween.yoyo,2000);
} 
```

# android - 处理具有不同图像大小的 ImageButton

> ID：13314762
> 
> 赞同：-1
> 
> 时间：2012-11-09T19:35:48.740
> 
> 标签：android, android-layout, imagebutton

我的布局包含 3 个 ImageButton，垂直排列在`LinearLayout`.

现在我希望它们每个都具有相同的高度并一起填充设备的屏幕高度。

与属性一起工作正常`android:layout_weight="1"`。但是如果一个图像`ImageButton`太大，它就不起作用（这个按钮比其他按钮高），尽管设置`android:scaleType="center_inside"`.

有什么建议/技巧吗？如果您需要任何代码，请告诉我。但是没有什么特别的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-10T11:28:55.377

如果您正确地给出了权重，那么这应该有效。图像的大小并不重要。使用权重时要记住的一件事是，您为其赋予权重（高度/宽度）的属性应在 xml 中分配值“0dp”，只有这样权重才能正常工作。这是示例代码。

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="vertical" 
android:gravity="center"
android:weightSum="3">

<ImageView
    android:id="@+id/imageView1"
    android:layout_width="wrap_content"
    android:layout_height="0dp"
    android:src="@drawable/drawable1"
    android:layout_weight="1" 
    android:scaleType="centerInside"
    />

<ImageView
    android:id="@+id/imageView2"
    android:layout_width="wrap_content"
    android:layout_height="0dp"
    android:layout_weight="1"
    android:src="@drawable/drawable2"
    android:scaleType="fitXY" />

<ImageView
    android:id="@+id/imageView3"
    android:layout_width="wrap_content"
    android:layout_height="0dp"
    android:layout_weight="1"
    android:src="@drawable/drawable3"
    android:scaleType="fitXY" />

</LinearLayout> 
```

只需使用此 xml 并根据您的需要替换可绘制对象。让我知道是否有任何问题。

# java - 用于可执行 JAR 的 C++ GUI

> ID：13314766
> 
> 赞同：4
> 
> 时间：2012-11-09T19:36:10.520
> 
> 标签：java, c++, windows, visual-c++

我有一个在命令行中运行的可执行 JAR。我想使用 VC++ for windows 为这个程序创建一个 GUI。有没有办法从本机 C++ 中“挂钩”Java 线程，或者从 C++ 线程中启动 JAR？我查看了 JNI，但似乎需要编写 Java 以考虑此功能。目前，我没有能力修改预编译的 JAR。我想要做的甚至可能吗？

提前感谢您提供的任何建议。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-09T19:50:48.630

如果您想从 Java 调用 C++，则只需使用 JNI 功能编写 java。如果您想从 C++ 调用 Java，它可以正常工作而无需对 JAR 进行任何更改。如果您查看 java.exe 的源代码，您会看到一个示例。

查看[java.exe 源代码中的第 540-610 行](http://hg.openjdk.java.net/jdk7/hotspot/hotspot/file/9b0ca45cd756/src/share/tools/launcher/java.c)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T19:44:24.660

你想用它做什么？简单启动的简单方法是使用 system() 调用，它可以调用任何可执行文件，包括 .bat 文件。一种更复杂的方法是让它们成为客户端-服务器应用程序并通过 localhost 进行通信（例如很多基于网络的守护进程，如 IRCd）

# android - 图像在取景器中居中

> ID：13314767
> 
> 赞同：1
> 
> 时间：2012-11-09T19:36:11.860
> 
> 标签：android, android-layout, android-imageview, viewflipper

我在 ViewFlipper 中有很多 ImageView。每个 ImageView 都将 ScaleType 设置为 FIT_START，因此图像“粘”在顶部。现在我遇到了垂直图像的问题-它们向左移动，我想将它们居中。我不能将 FIT_START 和 CENTER 结合起来，所以我正在寻找另一种解决方案。有任何想法吗？

谢谢！

```
ImageView iv = new ImageView(getApplicationContext());
                iv.setImageBitmap(bm);
                iv.setAdjustViewBounds(true);
                iv.setScaleType(ScaleType.CENTER_INSIDE);
                flipper.addView(
                        iv,
                        new          LayoutParams(LayoutParams.MATCH_PARENT,
                                (int)      Utils.dp2px(256,
                                        getApplicationContext())));

<ViewFlipper
                android:id="@+id/view_flipper"
                android:layout_width="match_parent"
                android:layout_height="256dp"
                android:autoStart="false"
                android:flipInterval="0" >
</ViewFlipper> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T19:47:47.393

我怀疑您的 ImageView 的宽度设置为`wrap_content`. 您可以尝试将其设置`fill_parent`为

# php - 查询未通过 Codeigniter 中的视图传递

> ID：13314770
> 
> 赞同：0
> 
> 时间：2012-11-09T19:36:19.690
> 
> 标签：php, codeigniter, view

我有以下控制器（supernavigationloggedin）：

```
<?php

class Supernavigationloggedin extends CI_Controller {  
    function index(){
        #get current session id
            $currentSessionID = $this->session->userdata('session_id'); 
        #get all the account row for the given sessionID
            $data['info'] = $this->db->get_where('Client', array('session_id'=>$currentSessionID))->row(); 
        #views
            $this->load->view('supernavigationloggedin',$data);
    } 
}

?> 
```

以及名为（supernavigationloggedin）的以下视图：

```
<div id="superNavigation">
    <h5><strong>Welcome</strong>, <?php $info->fname; ?>&nbsp;<a href="#">Account Settings</a></h5>
    <div class="clearL"> </div>
</div 
```

>

它不断在线抛出错误：`<h5><strong>Welcome</strong>, <?php echo $info['fname']; ?>&nbsp;<a href="#">Account`该消息：>>> `Trying to get property of non-object`

我试过了：`<?php echo $info['fname']; ?> <?php echo $info->fname; ?>` 但似乎都不管用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T19:43:16.233

这是因为`$info`  是空的并且没有进行数据库请求。如果您希望查询返回一个对象，则必须这样做：

```
$data['info'] = $this->db->get_where('Client', array('session_id'=>$currentSessionID))->row(); 
```

或者这样，如果您更喜欢将其放入数组中：

```
$data['info'] = $this->db->get_where('Client', array('session_id'=>$currentSessionID))->row_array(); 
```

这样它应该可以工作。`row()`或者`row_array()`是执行查询所必需的。

# php - php 在新选项卡中执行一系列脚本

> ID：13314771
> 
> 赞同：1
> 
> 时间：2012-11-09T19:36:25.463
> 
> 标签：php

我想创建一个 php 文件（我们称之为*master.php*），它在新选项卡中自动执行一系列脚本。列出的每个脚本都应在不同的选项卡中执行。我尝试使用标头（位置），但是它只能用于重定向一次。任何的想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T19:41:50.370

你想要的超出了 php 的范围。您必须使用 javascript 来控制要启动的浏览器选项卡之间的逻辑。

从 php，您应该生成正确的 javascript 代码来执行此操作，特别是查看 javascript 函数 window.open

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T19:46:48.457

您可以创建一个超链接，如下所示：

```
<body onload="document.getElementById('runScripts').click()">
<a id="runScripts" href="script1.php" target="_blank" onclick="window.open('script2.php');window.open('script3.php')">Click Here</a> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-09T19:51:39.843

如果 master.php 返回第一页，那么您可以使用 javascript 打开其他页面。请注意，这没有 100% 的浏览器支持。

```
<html>
<head>
<script type="text/javascript">
window.open('page2.php','_newtab1');
window.open('page3.php','_newtab2');
window.open('page4.php','_newtab3');
window.open('page5.php','_newtab4');
</script>
</head>
<body>content of first page</body>
</html> 
```

你也可以使用 '_blank' 而不是 ''newtab'

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-09T20:01:20.217

我建议使用 Javascript 在不同的选项卡中执行脚本。但是，必须禁用此打开的新窗口和弹出选项。除非用户明确单击锚元素，否则不会打开新选项卡。以下代码是使用 PHP for 循环的示例。

window.open("脚本" + `<?php echo`$i `;?>`+ ".php", '_blank');

# powershell - 升级到 PS3，System.Net.WebClient 无法在某些机器上运行

> ID：13314772
> 
> 赞同：0
> 
> 时间：2012-11-09T19:36:27.927
> 
> 标签：powershell, powershell-remoting, powershell-3.0

我在实验室环境中运行，需要自动化大约 50 台机器。我正在尝试从服务器恢复 .xml 无线网络配置文件，然后安装它。此命令从 1 个服务器发送到 50 个客户端。

我最近重新映像了我的一些客户端并从 PS2 升级到 PS3，现在我的下载脚本不再工作了。

它在我的 PS2 工作站上运行良好。我假设这可能是一个许可的事情，但我不确定。ThrustedHosts 设置为 *，脚本执行策略设置为 Unrestricted。

这是一个片段和错误：

```
function InstallProfile(){

clear

$fonction = 
@'
param($profileName)
$File = "c:\profiles\profile.xml"
$webclient = New-Object System.Net.WebClient
$webclient.Proxy = $NULL
$ftp = "ftp://anonymous:anonymous@192.168.2.200/profiles/$profileName"
$uri = New-Object System.Uri($ftp)
Write-Host (hostname)
$webclient.DownloadFile($uri, $File)
write-host (hostname) (netsh wlan add profile filename="c:\profiles\profile.xml")
'@

$profileName = Read-Host "Enter the profile name(XML file must be present in c:\share\profiles\)"

ExecCmd -fonction $fonction -argument $profileName

func_done
} 
```

#

```
function ExecCmd
{
param(
$fonction, 
$argument
)

$PingTest = RetrieveStatus
$results = @{}
$results = $PingTest.up
$results | sort -uniq | out-Null

$fonctionSB = ConvertTo-ScriptBlock($fonction)

    foreach($result in $results)
    {
        $os = "Windows"
            try{
                $session = New-PSSession -ComputerName $result.address -Credential $credentials -EA stop
                }
            catch{
            $os = "Not Windows"
            }
        if($os -eq "Windows"){
        Invoke-Command $result.address -ScriptBlock $fonctionSB -Arg $argument -Credential $credentials
        Get-PSSession | Remove-PSSession
        }
        else{
        Write-Host $result.address "does not support Powershell commands"
        }
    }

} 
```

和错误：

> 使用“2”参数调用“DownloadFile”的异常：“WebClient 请求期间发生异常。” + CategoryInfo : NotSpecified: (:) [], MethodInvocationException + FullyQualifiedErrorId : WebException + PSComputerName : 192.168.2.110

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T20:20:16.080

我找到了解决方法，

我为 webclient.Download 添加了一个 try/catch，它适用于 PS2。在 catch 部分，我将命令替换为 Invoke-WebRequest $uri -OutFile $File

这种方式适用于 PS2 和 PS3！

# c# - 打印任何文件类型

> ID：13314773
> 
> 赞同：5
> 
> 时间：2012-11-09T19:36:30.297
> 
> 标签：c#, windows, printing

我正在创建一个服务，它将监视特定文件夹并打印放在该文件夹中的任何文件。我对可以发送到要打印的文件夹的各种文件类型有困难。

我的第一次尝试是使用 Microsoft Office 文件。我想做的是启动办公室打印文件。这更像是一个陷阱，我并没有真正使用图书馆或类似的东西。

到目前为止，这种方法是可行的，但是当计算机上没有任何 Office 应用程序启动时，Office 会要求用户输入姓名首字母。因此，在这种情况下，我的应用程序将无法正常工作，因为我是以编程方式执行此操作的。

```
 ProcessStartInfo info = new ProcessStartInfo(myDocumentsPath);
        info.Verb = "Print";
        info.CreateNoWindow = true;
        info.WindowStyle = ProcessWindowStyle.Hidden;
        Process.Start(info); 
```

现在我正在尝试使用 Microsoft Office 文件，但我也会对其他类型应用相同的方法。

无论如何要绕过第一次 Office 运行所需的缩写？

或者有什么更好的方法来解决我的问题？

任何帮助表示赞赏，在此先感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T22:01:57.260

你真的无能为力。对于将打印您要支持的每种文件类型的应用程序，您需要确保应用程序配置正确。

这意味着对于 Office（因为它作为进程外 COM 服务器运行），您应该在执行打印的帐户下运行它，这样您就可以输入首字母，并且在服务器尝试时不会提示您输入打印它。

对于所有其他应用程序都是如此（假设执行该应用程序以打印它），它需要作为进程将在其下运行并正确配置的帐户运行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T22:05:48.403

使用 Winternals 的 regmon 注册表活动监视器来确定 Office 在 Windows 注册表中存储首字母的位置，然后在打印之前写入这些键。

# objective-c - 使用 UIPinchGestureRecognizer 更改圆的大小

> ID：13314779
> 
> 赞同：0
> 
> 时间：2012-11-09T19:36:53.127
> 
> 标签：objective-c, ios, cashapelayer, uipinchgesturerecognizer

我在屏幕中央画了一个简单的圆圈：

```
int radius = 100;

- (void)addCircle {
    self.circle = [CAShapeLayer layer];
    self.circle.path = [UIBezierPath bezierPathWithRoundedRect:CGRectMake(0, 0, 2.0*radius, 2.0*radius)
                                             cornerRadius:radius].CGPath;
    self.circle.position = CGPointMake(CGRectGetMidX(self.view.frame)-radius,
                                  CGRectGetMidY(self.view.frame)-radius);

    self.circle.fillColor = [UIColor clearColor].CGColor;
    self.circle.strokeColor = [UIColor blackColor].CGColor;
    self.circle.lineWidth = 5;

    [self.view.layer addSublayer:self.circle];
} 
```

使用捏合手势，我允许用户增加/减少形状的半径：

```
- (void)scale:(UIPinchGestureRecognizer *)gestureRecognizer {    
    if (gestureRecognizer.state != UIGestureRecognizerStateBegan) {
        if (gestureRecognizer.scale < lastScale) {
            --radius;
        }
        else if (gestureRecognizer.scale > lastScale) {
            ++radius;
        }
        // Center the shape in self.view
        self.circle.position = CGPointMake(CGRectGetMidX(self.view.frame)-radius, CGRectGetMidY(self.view.frame)-radius);

        self.circle.path = [UIBezierPath bezierPathWithRoundedRect:CGRectMake(0, 0, 2.0*radius, 2.0*radius) cornerRadius:radius].CGPath;
    }

    lastScale = gestureRecognizer.scale;
} 
```

但是，圆圈​​不会停留在死点。相反，它会在中间反弹，直到手势完成才稳定下来。

有谁知道为什么会发生这种情况，如果是这样，我该如何预防？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-10T02:37:21.443

您的代码中存在一些问题。作为@tc。说，你没有设置形状层的框架（或边界）。默认图层大小是`CGSizeZero`，这就是为什么每次更改半径时都必须将图层位置偏移半径的原因。

此外，形状图层的`position`和`path`属性是可动画的。因此，默认情况下，当您更改它们时，Core Animation 会将它们设置为新值。路径动画会导致您不想要的行为。

另外，您应该根据`self.view.bounds`，而不是来设置图层的位置或框架`self.view.frame`，因为图层的位置/框架是 的坐标系`self.view`，而不是 的坐标系`self.view.superview`。如果`self.view`是顶级视图并且您支持界面自动旋转，这将很重要。

我建议修改您的实施方式。创建`radius`一个`CGFloat`属性，并设置属性更新图层的`bounds`和`path`：

```
@interface ViewController ()

@property (nonatomic, strong) CAShapeLayer *circle;
@property (nonatomic) CGFloat radius;

@end

@implementation ViewController

- (void)setRadius:(CGFloat)radius {
    _radius = radius;
    self.circle.bounds = CGRectMake(0, 0, 2 * radius, 2 * radius);
    self.circle.path = [UIBezierPath bezierPathWithOvalInRect:self.circle.bounds].CGPath;
} 
```

如果您真的想强制半径为整数，我建议在内部将其作为浮点数进行跟踪，因为如果它是浮点数，用户交互会更顺畅。`CGRect`在创建边界和路径之前，只需将其四舍五入到一个临时变量中：

```
 CGFloat intRadius = roundf(radius);
    self.circle.bounds = CGRectMake(0, 0, 2 * intRadius, 2 * intRadius);
    self.circle.path = [UIBezierPath bezierPathWithOvalInRect:self.circle.bounds].CGPath; 
```

在`addCircle`中，只需设置`radius`属性并让该设置器负责设置图层的边界和路径。还要推迟设置层的位置，直到系统的布局阶段。这样，您将在界面旋转后再次将圆重新定位在中心。

```
- (void)viewDidLoad {
    [super viewDidLoad];
    [self addCircle];
}

- (void)addCircle {
    self.circle = [CAShapeLayer layer];
    self.circle.fillColor = nil;
    self.circle.strokeColor = [UIColor blackColor].CGColor;
    self.circle.lineWidth = 5;
    self.radius = 100;
    [self.view.layer addSublayer:self.circle];
    [self.view setNeedsLayout];
}

- (void)viewDidLayoutSubviews {
    [super viewDidLayoutSubviews];
    self.circle.position = CGPointMake(CGRectGetMidX(self.view.bounds), CGRectGetMidY(self.view.bounds));
} 
```

Finally, to handle a pinch gesture, just set the new radius to the old radius times the gesture's scale. The `radius` setter will take care of updating the layer's path and bounds. Then reset the gesture's scale to 1\. This is simpler than tracking the gesture's prior scale. Also, use `CATransaction` to disable animation of the `path` property.

```
- (IBAction)pinchGestureWasRecognized:(UIPinchGestureRecognizer *)recognizer {
    [CATransaction begin]; {
        [CATransaction setDisableActions:YES];
        self.radius *= recognizer.scale;
        recognizer.scale = 1;
    } [CATransaction commit];
} 
```

# php - 从多维数组php中删除项目

> ID：13314781
> 
> 赞同：0
> 
> 时间：2012-11-09T19:37:02.203
> 
> 标签：php

这是数组：

```
 [cart] => Array
        (
            [ProductId] => Array
                (
                    [0] => P121100001
                    [1] => P121100002
                )

            [SellerId] => Array
                (
                    [0] => S12110001
                    [1] => S12110001
                )

            [SpecifyId] => Array
                (
                    [0] => 1
                    [1] => 2
                )

            [Quantity] => Array
                (
                    [0] => 1
                    [1] => 1
                )

            [Price] => Array
                (
                    [0] => 12
                    [1] => 29
                )

            [TotalPrice] => 41
        ) 
```

我有 ProductId，我想删除与 P121100002 的密钥匹配的所有其他项目。

有没有一种简单的方法可以做到这一点，我似乎无法想出一个？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-09T19:41:38.853

您可以遍历整个数组并使用`unset()`“取消设置”指定的索引：

```
$index = array_search($cart['ProductId'], 'P121100002');
if ($index !== false) {
    foreach ($cart as $key => $arr) {
        unset($cart[$key][$index]);
    }
} 
```

这种方法的轻微警告是它可能会破坏您的指数订单。例如，假设您有：

```
[ProductId] => Array (
    [0] => P121100001
    [1] => P121100002
    [2] => P121100003
) 
```

而您要删除`P121100002`，它的对应索引为`1`。使用`unset($cart['ProductId'][1])`将导致您的数组变为：

```
[ProductId] => Array (
    [0] => P121100001
    [2] => P121100003
) 
```

`for`如果您将来要使用循环进行迭代，这可能是需要关注的问题。如果是，您可以使用从上面`array_values()`“重置”`unset()`循环中的索引：

```
foreach ($cart as $key => $arr) {
    unset($cart[$key][$index]);
    $cart[$key] = array_values($cart[$key]);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-09T19:40:51.783

```
foreach($yourArray['ProductId'] as $key => $value) {
    if ($value == $productIdToRemove) {
        foreach($yourArray as $deleteKey => $deleteValue) {
            unset($yourArray[$deleteKey][$key]);
        }
        break;
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-09T19:42:39.513

将 array_key_exists 与 unset() 函数一起使用

# r - 使用 ldply 处理不同长度的输出

> ID：13314783
> 
> 赞同：0
> 
> 时间：2012-11-09T19:37:12.370
> 
> 标签：r, plyr

只是一个关于如何使用 plyr 包中的 ldply 处理不同长度输出的快速问题。这是我正在使用的代码的简单版本以及我得到的错误：

```
# function to collect the coefficients from the regression models:
> SecreatWeapon <- dlply(merged1,~country.x, function(df) {
+     lm(log(child_mortality) ~ log(IHME_usd_gdppc)+ hiv_prev,data=df)
+ })
> 
# functions to extract the output of interest
> extract.coefs <- function(mod) c(extract.coefs = summary(mod)$coefficients[,1])
> extract.se.coefs <- function(mod) c(extract.se.coefs = summary(mod)$coefficients[,2])
> 
# function to combine the extracted output
> res <- ldply(SecreatWeapon, extract.coefs)
Error in list_to_dataframe(res, attr(.data, "split_labels")) : 
 Results do not have equal lengths 
```

这里的错误是由于某些模型将包含 NA 值，因此：

```
> SecreatWeapon[[1]]

Call:
lm(formula = log(child_mortality) ~ log(IHME_usd_gdppc) + hiv_prev, 
    data = df)

Coefficients:
       (Intercept)  log(IHME_usd_gdppc)             hiv_prev  
           -4.6811               0.5195                   NA 
```

因此以下输出的长度不会相同；例如：

```
> summary(SecreatWeapon[[1]])$coefficients
                  Estimate Std. Error   t value     Pr(>|t|)
(Intercept)         -4.6811000  0.6954918 -6.730633 6.494799e-08
log(IHME_usd_gdppc)  0.5194643  0.1224292  4.242977 1.417349e-04 
```

但对于另一个我得到

```
> summary(SecreatWeapon[[10]])$coefficients
                   Estimate  Std. Error    t value     Pr(>|t|)
(Intercept)           18.612698   1.7505236  10.632646 1.176347e-12
log(IHME_usd_gdppc)   -2.256465   0.1773498 -12.723244 6.919009e-15
hiv_prev            -272.558951 160.3704493  -1.699558 9.784053e-02 
```

有什么简单的修复方法吗？非常感谢你，

安东尼奥·佩德罗。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T20:38:35.930

访问的`summary.lm( . )`函数`$coefficients`提供的输出`coef`与带有`lm`参数的任何具有 NA“系数”的 lm 对象的输出不同。你对使用这样的东西感到满意吗：

```
coef.se <- function(mod) {
      extract.coefs <- function(mod) coef(mod) # lengths all the same
      extract.se.coefs <- function(mod) { summary(mod)$coefficients[,2]}
return( merge( extract.coefs(mod), extract.se.coefs(mod), by='row.names', all=TRUE) ) 
             } 
```

以罗兰的例子，它给出了：

```
> coef.se(fit)
    Row.names          x         y
1 (Intercept) -0.3606557 0.1602034
2          x1  2.2131148 0.1419714
3          x2         NA        NA 
```

您可以将 x 重命名为`coef`，将 y 重命名为`se.coef`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T20:22:47.503

```
y <- c(1,2,3)
x1 <- c(0.6,1.1,1.5)
x2 <- c(1,1,1)
fit <- lm(y~x1+x2)

summary(fit)$coef
#              Estimate Std. Error   t value   Pr(>|t|)
#(Intercept) -0.3606557  0.1602034 -2.251236 0.26612016
#x1           2.2131148  0.1419714 15.588457 0.04078329

#function for full matrix, adjusted from getAnywhere(print.summary.lm)
full_coeffs <- function (fit) {
     fit_sum <- summary(fit)    
     cn <- names(fit_sum$aliased)
     coefs <- matrix(NA, length(fit_sum$aliased), 4, 
                     dimnames = list(cn, colnames(fit_sum$coefficients)))
     coefs[!fit_sum$aliased, ] <- fit_sum$coefficients
     coefs
}

full_coeffs(fit)
#              Estimate Std. Error   t value   Pr(>|t|)
#(Intercept) -0.3606557  0.1602034 -2.251236 0.26612016
#x1           2.2131148  0.1419714 15.588457 0.04078329
#x2                  NA         NA        NA         NA 
```

# python - Python使用通配符在字符串中搜索值

> ID：13314784
> 
> 赞同：1
> 
> 时间：2012-11-09T19:37:13.713
> 
> 标签：python, search, python-2.7

我正在尝试为学校项目制作通讯录，但是当查询部分值时，我无法集中精力搜索值。

这是我坚持的代码块：

```
self.ui.tableWidget.setRowCount(0)
with open("data.csv") as file:
    for rowdata in csv.reader(file):
        row = self.ui.tableWidget.rowCount()
        if query in rowdata:
            self.ui.tableWidget.insertRow(row)
            for column, data in enumerate(rowdata):
                item = QtGui.QTableWidgetItem(data)
                self.ui.tableWidget.setItem(row, column, item) 
```

如您所见，我使用 PyQt TableWidget 来显示来自 csv 文件的搜索结果。上面的代码确实有效，但仅在给出完整查询时才显示结果。检查匹配的代码行是：

```
 if query in rowdata: 
```

例如，如果我想找到一个叫 John 的人，我就必须准确地搜索“John”。如果我搜索“Joh”或“john”或“hn”等，它不会出现......

如果您需要更多信息，请询问：P

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T20:21:47.407

我认为您想要做的是`query`在行的字段中搜索，而不是一次搜索整行。

您遇到的问题是`string in obj`根据类型的不同做不同的事情`obj`。如果它是一个字符串，它会进行子字符串搜索（如您所愿）。但是，如果它是一个非字符串容器，它会定期进行成员资格检查（这就是它现在只找到完全匹配的原因）。

因此，要修复它，请将您的测试从 更改`if query in rowdata`为`if any(query in field for field in rowdata)`. 如果您只想在特定字段（如联系人姓名）中搜索匹配项，那么它可能会更简单：（`if query in rowdata[name_column]`该字段`name_column`的列号`name`在您的 CSV 文件中）。

# ruby-on-rails - 在所有黄瓜测试中对 Web 服务的虚假调用

> ID：13314789
> 
> 赞同：1
> 
> 时间：2012-11-09T19:37:41.937
> 
> 标签：ruby-on-rails, cucumber

我的 Rails 应用程序调用 Web 服务。

我在一些测试中使用**FakeWeb** gem 通过注册这样的 URI 来伪造这些调用：

```
FakeWeb.register_uri(:get, "http://webservice.com/param?value=a", :response => fake_response) 
```

如何为整个测试环境设置这个虚假注册，而不是为每个测试手动设置？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T19:39:57.077

最有可能的是，把它放在你的 spec/spec_helper.rb 文件中就可以了。我自己没有使用过 FakeWeb，但那是你放置任何全局初始化的地方。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T21:50:04.160

看看[VCR](https://github.com/myronmarston/vcr) ruby​​gem。

它记录您的测试套件的 HTTP 交互并在测试运行期间重放它们。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-09T21:42:07.917

在 in 的文件中`spec/support/`，调用块`register_uri`内部`Before`：

```
Before do
  FakeWeb.register_uri(:get, "http://webservice.com/param?value=a", :response => fake_response)
end 
```

[我使用这个技巧来使用webmock](https://github.com/bblimke/webmock)设置模拟响应，它就像一个魅力。

# windows-8 - 我在 SimpleBlogReader Windows 8 教程中无法解决的问题

> ID：13314790
> 
> 赞同：3
> 
> 时间：2012-11-09T19:37:42.597
> 
> 标签：windows-8, windows-store-apps, winrt-xaml

我正在关注位于此处的教程：http: [//msdn.microsoft.com/en-us/library/windows/apps/hh465045.aspx](http://msdn.microsoft.com/en-us/library/windows/apps/hh465045.aspx)

在有关设置应用程序样式的部分中，他们希望您在 ResourceDictionary 中插入一些 Xaml

```
<SolidColorBrush x:Key="WindowsBlogBackgroundBrush" Color="#FF0A2562"/>
<Style x:Key = "WindowsBlogLayoutRootStyle" TargetType = "Panel" BasedOn = "{StaticResource LayoutRootStyle}">
    <Setter Property="Background" Value="{StaticResource WindowsBlogBackgroundBrush}"/>
</Style> 
```

但是，编译器给了我这些错误：

错误 WMC0035：对“ResourceDictionary”对象的“_Items”属性的重复分配

属性元素不能位于元素内容的中间。它们必须在内容之前或之后。

有人对这里发生的事情有任何想法吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-01T06:07:12.107

```
 <Application.Resources>
    <ResourceDictionary>

        <ResourceDictionary.MergedDictionaries>
            <ResourceDictionary>
                <SolidColorBrush x:Key="WindowsBlogBackgroundBrush" Color="#FF0A2562" />
                <Style x:Key="WindowsBlogLayoutRootStyle" TargetType="Panel" >
                    <Setter Property="Background" Value="{StaticResource WindowsBlogBackgroundBrush}"/>
                </Style>
            </ResourceDictionary>
            <!-- 
                Styles that define common aspects of the platform look and feel
                Required by Visual Studio project and item templates
             -->
            <ResourceDictionary Source="Common/StandardStyles.xaml">

            </ResourceDictionary>
        </ResourceDictionary.MergedDictionaries>

    </ResourceDictionary>
</Application.Resources> 
```

这工作正常我已经测试了它的布局网格。

# minimum-spanning-tree - Prim 和 Kruskal 算法

> ID：13314796
> 
> 赞同：4
> 
> 时间：2012-11-09T19:37:58.330
> 
> 标签：minimum-spanning-tree, prims-algorithm, kruskals-algorithm

Prim 和 Kruskal 的算法都产生最小生成树。根据割属性，对于这些算法，树的总成本将是相同的，但是这两种算法是否有可能以相同的总成本给出不同的 MST，因为我们在面临多个选择时按字母顺序选择它. 例如，我们比较 max(source,dest)，对于边 A->B 和 B->C，我们比较 A->B 中的 A 和 B->C 中的 B。

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-13T02:43:15.687

假设您的比较器处理两条边的成本相等并且具有相同的 max(source, dest) 字符的情况，它永远不会声明任何两条边相等。为了存在多个 MST 的可能性，图中至少两条边必须相等。因此，MST 是唯一的，Prim 和 Kruskal 的算法都将返回相同的结果。

另一方面，如果您的比较器声明边缘 A->B（成本 1）和 A->C（成本 1）相等，则算法可能会生成不同的 MST，具体取决于它们首先考虑的边缘（A->B 或 A->C）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-11-09T18:17:11.930

一个图肯定有可能有多个 MST，只要这些 MST 的不同表示具有相同的总权重。否则，总重量较低的将是真正的 MST，而另一个将不再是 MST。

由于 Prim 和 Kruskal 的算法有不同的步骤，因此在实际遍历过程中，它们可能会选择相同权重的不同边，但仍以相同的总权重结束。

但是，如果您添加您在问题中陈述的限制（选择字母表中第一个节点），Prim 和 Kruskal 的 MST 应该是相同的树，对于每个决策，即使它们是相同的权重，更喜欢 Kruskal 和 Prim 的相同优势。

# javascript - jquery/Javascript 序列检查

> ID：13314797
> 
> 赞同：1
> 
> 时间：2012-11-09T19:37:58.703
> 
> 标签：javascript, jquery, jquery-mobile

我正在制作一个 Javascript 游戏，其中一个序列显示在一个网格上（8 个动作，网格总共有 12 个按钮）。用户必须重复该序列，最后我想比较两个序列并给出分数。目前我可以检测到哪个按钮被按下，但我不知道还能做什么

PS：我想要实现的是将用户的选择保存在一个数组中，然后如果选择正确，则与“控制数组”进行比较，给出一个分数。

```
 <!-- Game -->
    <div data-role="page" id="page2">
        <div id="header" data-theme="a" data-role="header">
            <a id="back" data-role="button" data-transition="flip" href="#page1" data-icon="back" data-iconpos="left" class="ui-btn-left">
                Back
            </a>
            <a data-role="button" href="#page1" data-icon="star" data-iconpos="left" class="ui-btn-right">
                Score
            </a>
            <h3 id="title">
                Salsa-App
            </h3>
        </div>
        <div data-role="content">
            <div id="grid" class="ui-grid-c">
                <div class="ui-block-a">
                    <a id="a1" data-role="button" data-transition="flow" href="#page1" data-icon="star" data-iconpos="bottom">
                        A1
                    </a>
                </div>
                <div class="ui-block-b">
                    <a id="a2" data-role="button" data-transition="flow" href="#page1" data-icon="star" data-iconpos="bottom">
                        A2
                    </a>
                </div>
                <div class="ui-block-c">
                    <a id="a3" data-role="button" data-transition="flow" href="#page1" data-icon="star" data-iconpos="bottom">
                        A3
                    </a>
                </div>
                <div class="ui-block-d">
                    <a id="a4" data-role="button" data-transition="flow" href="#page1" data-icon="star" data-iconpos="bottom">
                        A4
                    </a>
                </div>
                <div class="ui-block-a">
                    <a id="b1" data-role="button" data-transition="flow" href="#page1" data-icon="star" data-iconpos="bottom">
                        B1
                    </a>
                </div>
                <div class="ui-block-b">
                    <a id="b2" data-role="button" data-transition="flow" href="#page1" data-icon="star" data-iconpos="bottom">
                        B2
                    </a>
                </div>
                <div class="ui-block-c">
                    <a id="b3" data-role="button" data-transition="flow" href="#page1" data-icon="star" data-iconpos="bottom">
                        B3
                    </a>
                </div>
                <div class="ui-block-d">
                    <a id="b4" data-role="button" data-transition="flow" href="#page1" data-icon="star" data-iconpos="bottom">
                        B4
                    </a>
                </div>
                <div class="ui-block-a">
                    <a id="c1" data-role="button" data-transition="flow" href="#page1" data-icon="star" data-iconpos="bottom">
                        C1
                    </a>
                </div>
                <div class="ui-block-b">
                    <a id="c2" data-role="button" data-transition="flow" href="#page1" data-icon="star" data-iconpos="bottom">
                        C2
                    </a>
                </div>
                <div class="ui-block-c">
                    <a id="c3" data-role="button" data-transition="flow" href="#page1" data-icon="star" data-iconpos="bottom">
                        C3
                    </a>
                </div>
                <div class="ui-block-d">
                    <a id="c4" data-role="button" href="#page1" data-icon="star" data-iconpos="bottom">
                        C4
                    </a>
                </div>
            </div>
        </div>
    </div>
    <script>        
        //App custom javascript                             
            $(document).ready(function() {                  
                $('a[data-role="button"]').click(function(){
                var whichButton;
                whichButton = $(this).attr("id");

                alert(whichButton);
                    });         
                });

    </script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T19:59:22.260

您需要在变量中拥有两件事：

*   用户尝试匹配的序列。
*   用户执行的点击次数

然后你只需要比较这些。我将假设您有某种方式知道用户何时完成（可能是特定数量的点击，或者他们可能点击特定按钮），并且这是作为一个名为 timeToStop() 的函数实现的，它返回一个布尔真/假值。

本质上，您只需继续收集点击次数，直到到达 timeToStop()，然后您遍历并比较两个数组。

```
sequence = ['a1','a4','c1','a1','a3','b1','b4','c4'];     //in the real game, you'd do this dynamically somehow
userClicks = [];

$('a[data-role="button"]').click(function(){
    var whichButton = $(this).attr("id");
    userClicks.push(whichButton);

    if (timeToStop()) {                
        var errorStep = -1;
        for(int i = 0; i < sequence.length; i++) {
            if (sequence[i] != userClicks[i]) {
                errorStep = i;
                break;
            }
        }
        if (errorStep >= 0) {
            alert("Sorry, you messed up at step " + (errorStep + 1) + "!");
        } else {
            alert("Congratulations - you nailed it!");
        }   
        //Reset for the next round (if you're not reloading the page)
        sequence = [];      //define new sequence (somehow?)
        userClicks = [];
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T19:46:52.133

如果您只是想跟踪点击历史，我建议您只需一个很棒的数组并开始在那里推送 ID。

例如：

```
var history = [];
$('a').click(function(){
  history.push($(this).id

}): 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-09T21:09:15.617

我不知道它有多大帮助，但我试着做一个你描述的演示。这是草稿...

# [jsFiddle](http://jsfiddle.net/SpYk3/zDhZB/)

> 请记住，当您查看小提琴时，请使用浏览器控制台获取有关正在录制的内容的更多信息。

```
var blox = $(".ui-block-a, .ui-block-b, .ui-block-c, .ui-block-d"),
    tmrGame,
    curPattern = new Array(),
    usrPattern = new Array(),
    aniTime = 1000,
    clkCount = 0,
    total=0;

function gameOn(i) {
    if (i == 0) {
        curPattern = new Array();
        usrPattern = new Array();
    };
    if (i < 8) {
        var randI = Math.floor(Math.random()*12);
            block = $(blox[randI]);
        curPattern.push(block.children("a").prop("id"));
        block.addClass("highlight")
            .animate({ opacity: 0 }, aniTime, 'linear', function(e) {
            $(this).removeClass("highlight").css("opacity", 1);
        });
        i++;
        tmrGame = setTimeout(function() { gameOn(i); }, aniTime+100);
    }
    else {
        $(document).css("cursor", "default");
        blox.css("cursor", "pointer");
        console.log(curPattern);
        blox.on("click", btnClickEvent);
        clearTimeout(tmrGame);
    };
};

tmrGame = setTimeout(function() { $(document).css("cursor", "wait"); blox.css("cursor", "wait"); gameOn(0); });

function btnClickEvent() {
    var block = $(this);
    if (clkCount < 8) {
        usrPattern.push(block.children("a").prop("id"));
        clkCount++;
    };

    if (clkCount == 8) {
        blox.off("click", btnClickEvent);
        total=0;
        for(x in curPattern) {
            if (curPattern[x] == usrPattern[x]) total++;
        };
        var perc = ((total/8)*100)+"%";
        console.log(usrPattern, perc);
        $("#score").text(perc);
    };
};

$("#restart").click(function(e) {
    clkCount = 0;
    clearTimeout(tmrGame);
    blox.stop().css("opacity", 1);
    $("#score").text("00%");
    tmrGame = setTimeout(function() { $(document).css("cursor", "wait"); blox.css("cursor", "wait"); gameOn(0); }, 1000);
}); 
```

# .net - .Net XML Schema Validation 是否应该在到达第一个无效元素时停止？

> ID：13314799
> 
> 赞同：2
> 
> 时间：2012-11-09T19:37:59.073
> 
> 标签：.net, c#-4.0, xsd, xml-validation

我有一个 XML 字符串和一个 Schema 加载并传递给一个函数。我让它正确地根据模式验证 XML，但是它总是在第一个无效元素的范围内停止验证。无效数据，它继续，无效/缺少属性，继续，但无效元素，它停止并且不会在该范围内进一步验证。

架构如下：

```
<?xml version="1.0" encoding="utf-16"?>
<xs:schema xmlns:b="http://schemas.microsoft.com/BizTalk/2003" xmlns:xs="http://www.w3.org/2001/XMLSchema">
  <xs:element name="root">
    <xs:complexType>
      <xs:sequence>
        <xs:element name="items">
          <xs:complexType>
            <xs:sequence maxOccurs="unbounded">
              <xs:element name="foo">
                <xs:complexType>
                  <xs:sequence>
                    <xs:element name="bar" type="xs:integer" />
                    <xs:element name="bat" type="xs:integer" />
                  </xs:sequence>
                  <xs:attribute name="attr1" type="xs:integer" use="required" />
                </xs:complexType>
              </xs:element>
            </xs:sequence>
          </xs:complexType>
        </xs:element>
      </xs:sequence>
    </xs:complexType>
  </xs:element>
</xs:schema> 
```

xml如下：

```
<root>
  <items>
    <foo attr1='1'>
      <invalid0>1</invalid0>
      <invalid1>b</invalid1>
    </foo>
    <foo attr1='1'>
      <invalid2>b</invalid2>
      <bat>b</bat>
    </foo>
    <foo attr1='1'>
      <bar>3</bar>
    </foo>
    <invalidFoo attr1='1'>
      <bar>d</bar>
      <bat>2</bat>
    </invalidFoo>
    <foo>
      <bar>3</bar>
      <bat>q</bat>
    </foo>
  </items>
</root> 
```

所以，在这个例子中发生了什么，验证器到达第一个`<foo>`并且看到`<invalid0>`并且没有在`<foo>`任何进一步验证，因此错过了`<invalid1>`. Validator 移动到下一个`<foo>`.

接下来`<foo>`它看到有一个`<invalid2>`不属于那里并且不费心去捕捉`<bat>`元素的无效数据（字符串而不是整数）。直接进入下一个`<foo>`

它进入下一个`<foo>`元素并抛出一个关于缺失的错误，`<bat>`然后继续下一个`<foo>`，很酷。

现在它到达了`<invalidFoo>`并且理所当然地，在里面没有做任何验证，`<invalidFoo>`因为当然，什么是`<invalidFoo>`？

**对我来说，症结在于，此时验证器停止验证所有以下`<foo>`同级元素**，因此最后的无效数据`<bat>`不会被捕获。所以现在，我问的原因是因为我使用验证的方式是尝试捕获所有错误（或至少尽可能多）并将它们传递回用户。我在实际代码中所做的第一个测试与此等价：

```
<root>
  <items>
    <invalidFoo attr1='1'>
      <invalid0>1</invalid0>
      <invalid1>b</invalid1>
    </invalidFoo>
    <foo attr1='1'>
      <invalid2>b</invalid2>
      <bat>b</bat>
    </foo>
    <foo attr1='1'>
      <bar>3</bar>
    </foo>
    <invalidFoo attr1='1'>
      <bar>d</bar>
      <bat>2</bat>
    </invalidFoo>
    <foo>
      <bar>3</bar>
      <bat>q</bat>
    </foo>
  </items>
</root> 
```

因此，验证者首先看到了这一点`<invalidFoo>`并停止了死亡。在很长一段时间里，我一直假设由于某种原因验证总是在第一个错误时停止。直到我添加了一个有效的`<foo>`返回，它才开始连续捕获和累积其他无效数据错误。但是一旦遇到无效的元素标记名，就会跳过所有同级/子级验证。它只发生在无效元素上，而不是属性或数据上。

现在，我不是说这是对还是错……我是在问这是对还是错？**验证器是否应该继续运行，尤其是在兄弟元素的情况下？还是应该停止并根据前一个元素无效而基本上调用整个元素列表无效？在这种情况下 Xml Schema Validator 的预期行为是什么？**

这一切都是使用以下 C# 代码完成的（按我的预期工作）：

```
 public static void ValidateAgainstSchema(string XMLSourceDocument, XmlSchemaSet validatingSchemas)
 {
    if (validatingSchemas == null)
    {
        throw new ArgumentNullException("In ValidateAgainstSchema: No schema loaded.");
    }

    string errorHolder = string.Empty;
    ValidationHandler handler = new ValidationHandler();

    XmlReaderSettings settings = new XmlReaderSettings();
    settings.CloseInput = true;
    settings.ValidationType = ValidationType.Schema;
    settings.ValidationEventHandler += new ValidationEventHandler(handler.HandleValidationError);
    settings.Schemas.Add(validatingSchemas);
    settings.ValidationFlags =
        XmlSchemaValidationFlags.ReportValidationWarnings |
        XmlSchemaValidationFlags.ProcessIdentityConstraints |
        XmlSchemaValidationFlags.ProcessInlineSchema |
        XmlSchemaValidationFlags.ProcessSchemaLocation;

    StringReader srStringReader = new StringReader(XMLSourceDocument);

    using (XmlReader validatingReader = XmlReader.Create(srStringReader, settings))
    {
        while (validatingReader.Read()) { }
    }

    if (handler.MyValidationErrors.Count > 0)
    {
        foreach (String messageItem in handler.MyValidationErrors)
        {
            errorHolder += messageItem;
        }
        throw new XmlSchemaValidationException(errorHolder);
    }
} 
```

验证事件处理程序只是捕获错误并将它们添加到`IList<string>`稍后一起显示。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T22:31:46.363

它通过遍历树来处理元素，所以一旦它得到一个不适合的节点，它就会丢失。然而，属性不是分层的，它们是一个列表，所以它是直接去/不去，它可以继续，类型检查也很简单。

您可以查看您的示例并认为它可以处理这个问题。

```
<root>
  <items>
    <invalidFoo attr1='1'>
      <invalid0>1</invalid0>
      <invalid1>b</invalid1>
      <foo attr1='1'>
        <bar>b</bar>
        <bat>b</bat>
      </foo>    
    </invalidFoo>
  <items>
<root> 
```

是否应该将 foo 视为项目的子项。foo 真的是 foo 吗？

如果您想要一个真正的折头机，请想象`xsd:choice`在其中有一两个并选择不符合架构的有效节点。这是其中一种情况，尝试并继续是“危险的”，所以它提示并说你需要先解决这个问题，这样我才能明智地验证接下来会发生什么。

# powershell - 使用 PowerShell 的 ActiveDirectory 模块设置 ADUser：更改用户的 OU

> ID：13314800
> 
> 赞同：8
> 
> 时间：2012-11-09T19:38:03.603
> 
> 标签：powershell, active-directory

我想知道是否可以使用 PowerShell 在 ActiveDirectory 中更改用户的 OU（组织单位）。我有一个应该更新许多字段的脚本。我正在使用 Set-ADUser 命令进行更新，但似乎找不到允许我更新 OU 的标志。下面是我目前使用的 Set-ADUser 命令。变量在脚本的前面设置，不应该与问题相关。

```
set-ADUser -identity $samName -GivenName $firstName -Surname $lastName -Department $department -Description $description -Manager $manager -AccountExpirationDate $acctExp -Organization $org 
```

我还有一个创建用户的脚本。该脚本允许我设置 OU。这让我相信我可以在创建后更改 OU。下面是我用来创建用户的命令。同样，变量是在脚本的前面设置的。

```
New-ADUser -Name $dName -SamAccountName $sam -GivenName $firstName -Surname $lastName -Path $OU -AccountPassword $passwd -ChangePasswordAtLogon $true -Department $department -Description $description -Manager $manager -Organization $org 
```

如果 Set-ADUser 命令有一个很好的标志，否则，感谢任何帮助。谢谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-09T20:05:26.860

您可以使用移动广告对象：

```
Move-ADObject 'CN=myuser,CN=Users,DC=mydomain,DC=com' -TargetPath 'OU=mynewou,DC=mydomain,DC=com' 
```

或者

```
Get-ADUser $name| Move-ADObject -TargetPath 'OU=mynewou,DC=mydomain,DC=com' 
```

# google-app-engine - 是否可以在同一个实体组中拥有一个 db 模型和一个 ndb 模型？

> ID：13314804
> 
> 赞同：2
> 
> 时间：2012-11-09T19:38:17.833
> 
> 标签：google-app-engine, app-engine-ndb

我们有一个 db 模型，`Vote`我们已经使用了一段时间，最近添加了一个 ndb 模型，`Score`它代表一个实体的累积分数，基于它的投票。当前`Score`是其投票的父节点，因为我们希望它们都在同一个实体组中（因此它们可以在同一个事务中更新）。我一直在尝试使交易能够同时更新`Vote`，`Score`但它始终失败。这是一些示例代码：

```
 def transaction():
        score = self.key_score.get()
        vote = db.get(self.key_vote)

        # do stuff

        score.put()
        vote.put()
    db.run_in_transaction(transaction) 
```

据我所知（仅限开发服务器），这总是重试四次：

```
WARNING:root:Transaction collision. Retrying...
WARNING:root:Transaction collision. Retrying...
WARNING:root:Transaction collision. Retrying...
WARNING:root:Transaction collision. Retrying...
ERROR 
```

然后我得到“TransactionFailedError：无法提交事务。请重试。”。

我尝试了一些方法来解决这个问题：

1.  更改获取和放置的顺序 - 我认为可能存在我不理解的实体组锁定问题，但切换获取或放置的顺序并没有改变行为。

2.  异步放置。这实际上是我开始的 - 我所知道的同时放置一个 db 和一个 ndb 模型的唯一方法（我认为这本质上是在幕后放置多个键所做的）。结果相同。

    ```
    score_future = score.put_async()
    vote_future = db.put_async(vote)
    score_future.get_result()
    vote_future.get_result() 
    ```

3.  替换`db.run_in_transaction`为`ndb.transaction`. 这会在`db.get`. 我不确定这里发生了什么 - 看起来一些幕后代码正在`db.Key`达到预期的效果`ndb.Key`。

有趣的是，如果我删除关系，我可以运行与上面相同的代码`parent`，这意味着实体不在同一个实体组中。

那么，是否可以在同一个实体组中同时拥有 db 和 ndb 模型？也许有一种简单的方法可以将 db 模型作为 ndb 或反之亦然？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-09T20:56:00.247

所有实体在数据存储中看起来都是一样的，无论它们是使用 DB 还是 NDB 创建的。这里的问题是您试图在 API 调用中混合两者；db 在传递 ndb 模型实例时不知道该怎么做。

您需要为 Vote 创建一个与您的 db 模型相同的 NDB 模型 - 或者更好的是，将 Vote 迁移到 NDB 模型 - 并在需要为两种实体类型进行事务的任何代码中使用它。

# php - HTML 表未正确显示 MySQL 数据

> ID：13314816
> 
> 赞同：-2
> 
> 时间：2012-11-09T19:39:10.110
> 
> 标签：php, html, mysql, mysqli, html-table

当我尝试从 MySQL 表中检索数据时，表未正确呈现。基本上，我使用 if 语句来查看是否存在任何内容（如果用户已发布信息），如果存在，我会转到在 HTML 表中显示数据的 else 条件。这是我为 else 语句开始的代码。

```
else{
//BEGIN JOB POSTING
echo "<table border=1 width=200 height=200>";
while($row_job = mysqli_fetch_array($result_job))
{
echo "<tr>".$row_job['subject']."</tr>";
}
mysqli_free_result($result_job);
echo "</table>";
} 
```

我放置宽度和高度以及边框的原因是您可以看到表格在哪里呈现以及实际信息在哪里呈现。正在显示信息，它只是并排显示，没有空格，而不是`<tr>`. 这是一个屏幕截图：

![数据未在表中呈现](../Images/b1fdfd8caa313fef93a85de6575be67e.png)

疯狂的是，如果你检查这个页面的源代码，它看起来像这样：

```
<table border=1 width=200 height=200><tr>twkjljl</tr><tr>lkjljl</tr></table> 
```

但是，如果您在 Google Chrome 中检查该元素，它看起来像这样：

![检查元素](../Images/1cf7005276944212b45350f410d9dc4b.png)

所以我尝试了几件事，我更改了代码以使其显示`<td>`并正确呈现。这是该代码和屏幕截图：

```
else{
//BEGIN JOB POSTING
echo "<table border=1 width=200 height=200><tr>";
while($row_job = mysqli_fetch_array($result_job))
{
echo "<td>".$row_job['subject']."</td><br />";
}
mysqli_free_result($result_job);
echo "</tr></table>";
} 
```

![正确渲染数据](../Images/f991e9d2b543b5280bd1e3328762637e.png)

虽然这很好，但我希望数据显示在不同的行而不是不同的列中，并且看不到代码中的错误在哪里。世界上到底发生了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-09T19:42:38.007

之后`<tr>`需要将所有数据封装在`<td>`.

```
else{
//BEGIN JOB POSTING
echo "<table border=1 width=200 height=200>";
while($row_job = mysqli_fetch_array($result_job))
{
echo "<tr><td>".$row_job['subject']."</td></tr>";
}
mysqli_free_result($result_job);
echo "</table>";
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T19:42:53.273

您需要 tr 和 td 来显示表格中的元素：

```
 else{
         //BEGIN JOB POSTING
         echo "<table border=1 width=200 height=200>";
        while($row_job = mysqli_fetch_array($result_job))
        {
           echo "<tr><td>".$row_job['subject']."</td></tr>";
        }
          mysqli_free_result($result_job);
        echo "</table>";
     } 
```

以下是表格的一行。

```
 <tr><td>row1</td></tr> 
```

如果要添加更多列，请添加更多两个 td。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-09T19:42:07.637

尝试`<tr><td>`成对使用：

```
else{
//BEGIN JOB POSTING
echo "<table border=1 width=200 height=200>";
while($row_job = mysqli_fetch_array($result_job))
{
echo "<tr><td>".$row_job['subject']."</td></tr>";
}
mysqli_free_result($result_job);
echo "</table>";
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-09T19:42:41.340

`TR`是一个表格行，由许多表格单元格组成`TD`。

因此，一个 HTML 表格如下所示：

```
<table>
    <tbody>
        <tr>
            <td></td>
            <td></td>
            <td></td>
        </tr>
    </tbody>
</table> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-09T19:49:33.953

我强烈建议您使用 PHP 5.4 来[支持 Mysqli 结果的迭代器](http://www.php.net/manual/en/class.mysqli-result.php)：

```
foreach ($result_job as $row)
{
    echo "<tr><td>$row_job[subject]</td></tr>";
} 
```

如果你不能使用那个 PHP 版本——我假设你没有做任何`mysqli_*`特定的事情，因为你需要那个扩展——`PDO`而是使用扩展。它拥有这种支持的时间要长得多。

# c# - XSLT 将 xml 转换为 csv 并为每条记录重复同级

> ID：13314820
> 
> 赞同：2
> 
> 时间：2012-11-09T19:39:32.440
> 
> 标签：c#, xml, xslt

以下是用作源的 XML 文件：

```
<?xml version="1.0" encoding="UTF-8" ?>
<billing-log>
  <log-start-date>2012-08-17T00:00:00-05:00</log-start-date>
  <player-name>Player1</player-name>
  <schema-version>1</schema-version>
  <player-uuid>12345</player-uuid>
  <log-end-date>2012-08-17T23:59:59.999-05:00</log-end-date>
  <entry>
     <page>Page1</page>
     <path>Path1</path>
     <in>2012-08-16T23:59:52.170-05:00</in>
     <out>2012-08-17T00:00:00.186-05:00</out>
  </entry>
  <entry>
     <page>Page2</page>
     <path>Path2</path>
     <in>2012-08-17T00:00:00.186-05:00</in>
     <out>2012-08-17T00:00:08.561-05:00</out>
  </entry>
</billing-log> 
```

我正在使用的 xsl 文件是这样的：

```
<?xml version="1.0"?>
<xsl:stylesheet version = "1.0" xmlns:xsl = "http://www.w3.org/1999/XSL/Transform">
<xsl:output method="text"/>
    <xsl:template match="log-start-date"></xsl:template>
    <xsl:template match="player-name"></xsl:template>
    <xsl:template match="schema-version"></xsl:template>
    <xsl:template match="player-uuid"></xsl:template>
    <xsl:template match="log-end-date"></xsl:template>
    <xsl:template match="//entry">
        <xsl:text>"</xsl:text>
        <xsl:value-of select="normalize-space(page)"/><xsl:text/>
        <xsl:text>","</xsl:text>
        <xsl:value-of select="normalize-space(path)"/><xsl:text/>
        <xsl:text>","</xsl:text>
        <xsl:value-of select="normalize-space(in)"/><xsl:text/>
        <xsl:text>","</xsl:text>
        <xsl:value-of select="normalize-space(out)"/><xsl:text/>
        <xsl:text>"&#10;&#13;</xsl:text>
<xsl:text disable-output-escaping = "yes" >
</xsl:text>
</xsl:template>
</xsl:stylesheet> 
```

我将这些输入到以下 c# 控制台应用程序中，以将其转换为 CSV 并将其写入文件。：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.IO;
using System.Xml;
using System.Xml.Xsl;

namespace xml2csv
{
    class Program
    {
        static int Main(string[] args)
        {
            if (args.Length != 3)
            {
                System.Console.WriteLine("Wrong number of aruguments");
                return -1;
            }

            string xmlFile = args[0];
            string xslFile = args[1];
            string outputFile = args[2];

            //Create a new XML document and load the XML file
            XmlDocument xmlDoc = new XmlDocument();
            xmlDoc.Load(xmlFile);
            //Create an XSLT object and load the XSLT file            
            XslCompiledTransform xslTran = new XslCompiledTransform();
            xslTran.Load(xslFile);
            // This is for generating the output
            XmlTextWriter writer = new XmlTextWriter(outputFile, System.Text.Encoding.ASCII);
            //Apply the transformation and write disk
            xslTran.Transform(xmlDoc, null, writer);
            //Close the writer
            writer.Close();

            return 1;

        }
    }
} 
```

它产生的结果是：

```
"Page1","Path1","2012-08 16T23:59:52.170-05:00","2012-08-17T00:00:00.186-05:00"
"Page2","Path2","2012-08-17T00:00:00.186-05:00","2012-08-17T00:00:08.561-05:00" 
```

我想要的是预先为 log-end-date 的兄弟节点值记录入口节点。所以输出看起来像这样：

```
"2012-08-17T23:59:59.999-05:00","Page1","Path1","2012-08 16T23:59:52.170-05:00","2012-08-17T00:00:00.186-05:00"
"2012-08-17T23:59:59.999-05:00","Page2","Path2","2012-08-17T00:00:00.186-05:00","2012-08-17T00:00:08.561-05:00" 
```

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T20:04:14.913

只需添加：

```
<xsl:value-of select="concat('&quot;',normalize-space(../log-end-date),'&quot;')"/> 
```

作为`entry`.

# sql-server-2008 - SQL Server 分区和文件组

> ID：13314822
> 
> 赞同：4
> 
> 时间：2012-11-09T19:39:41.260
> 
> 标签：sql-server-2008, partitioning

我有一个要分区的非常大的表（数百万行）。以一对一的方式放置文件和文件组是标准（或良好）做法吗（例如，FG_2012 将仅包含 FILE_2012，FG_2011 将仅包含 FILE_2011 等）。网络上的大多数示例都以这种方式显示，但我不确定这不是为了简化解释，而是为了提供好的建议。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-09T22:28:22.460

您在评论中回答您打算将旧分区放在廉价存储上并更改其备份方案。这些都是分区的很好理由。

这些原因迫使您使用多个文件组。您不必每个分区有一个文件组，因此您可以按天分区并每年使用文件组。如果您想拥有多个分区（例如 15.000 是最大值），这可能是一个好主意。在这种情况下，您不希望磁盘上有那么多文件，并且不将分区与文件组同步是有意义的。

我认为将这两个概念保持一致是有意义的，因为它可以简化管理。在您的情况下（存储考虑），我会使用对齐的分区和文件组。也许每个月一个左右。

# eclipse - Eclipse CDT 在构建项目之前显示错误

> ID：13314825
> 
> 赞同：0
> 
> 时间：2012-11-09T19:39:50.660
> 
> 标签：eclipse, eclipse-cdt, codan

我在使用 Eclipse CDT Juno 时遇到了一个小问题。

当我第一次打开 Eclipse 时，它​​会显示许多 C/C++ 问题错误，这些错误在我所有的项目中都出现了红色 x。其中许多错误是#include'd 头文件的“没有这样的文件或目录”错误。但是，在我清理并重建我的项目后，所有错误都消失了。

我已经仔细检查了所有索引器设置，并且索引路径指向正确的位置。我还相信索引器设置正确，因为在构建之后，所有“没有这样的文件或目录”错误都消失了，我可以在没有任何红色 x 的情况下浏览源代码。

我也尝试过索引->重建和索引->刷新所有文件，但唯一能清除错误的是清理/构建。

我觉得我不应该每次打开 Eclipse 时都重新构建我的所有项目。有什么想法吗？？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T16:00:37.827

我终于能够通过删除 .metadata 文件夹并从头开始重建工作区来解决此问题。多么痛苦，但至少当我启动 Eclipse 时，我的项目加载时没有错误。

# blackberry - 使用 BlackBerry WebWorks 添加子菜单项？

> ID：13314828
> 
> 赞同：0
> 
> 时间：2012-11-09T19:39:58.133
> 
> 标签：blackberry, blackberry-webworks

使用 BlackBerry WebWorks SDK 添加菜单项有很好的文档记录。

[http://supportforums.blackberry.com/t5/Web-and-WebWorks-Development/Adding-Menu-Items-using-the-BlackBerry-WebWorks-SDK/ta-p/516885](http://supportforums.blackberry.com/t5/Web-and-WebWorks-Development/Adding-Menu-Items-using-the-BlackBerry-WebWorks-SDK/ta-p/516885)

我的问题如何添加子菜单项？

创建子菜单仅用于开发 UIApplication

[http://docs.blackberry.com/en/developers/deliverables/17971/Submenus_6_0_1133451_11.jsp#BP_Implementing_submenus_6_0_1133452_11](http://docs.blackberry.com/en/developers/deliverables/17971/Submenus_6_0_1133451_11.jsp#BP_Implementing_submenus_6_0_1133452_11)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T17:12:39.803

- -

这在 WebWorks 中无法使用可用的 API 完成，但是，如果您的应用程序确实需要它，您总是可以创建自定义扩展。

如果您有兴趣，请查看此文档：[https ://developer.blackberry.com/html5/documentation/using_javascript_extensions_1866976_11.html](https://developer.blackberry.com/html5/documentation/using_javascript_extensions_1866976_11.html)

# ios - ios sendAsynchronousRequest 重定向基本身份验证

> ID：13314833
> 
> 赞同：0
> 
> 时间：2012-11-09T19:40:19.443
> 
> 标签：ios, authentication, redirect, nsurlconnection

是否可以使用**sendAsynchronousRequest**知道所请求的`NSURLConnection`url 将具有重定向并且所有请求也必须使用基本身份验证？

我收到以下错误：**错误域 = NSURLErrorDomain 代码 = -1012“操作无法完成。（NSURLErrorDomain 错误 -1012。）**

我确实使用 编写了一些代码`NSURLConnectionDelegate`并修改了重定向请求以在标头中添加基本身份验证并且有效。

所以我猜这与第二个请求没有设置身份验证有关。与委托相同，如果我没有在重定向请求上设置基本身份验证，则由于**HTTP 401**未经授权而失败

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T17:25:34.990

我可能相信我目前正在这样做，这是我的代码，诀窍是使用“基本 base64encodedmethod（用户名：密码）”设置“授权”的标题

```
//SETUP URL
NSURL *url = [NSURL URLWithString:[NSString stringWithFormat:@"https://YOURURLHERE"];
NSMutableURLRequest *request = [NSMutableURLRequest requestWithURL:url
                                                       cachePolicy:NSURLRequestReloadIgnoringCacheData
                                                   timeoutInterval:90.0];

//Get the username & password - then encode the values with Base64 (i googled for a library)
 NSString *userAndPassword = [NSString stringWithFormat:@"%@:%@",userName,password];
    NSString *encodedString = [userAndPassword base64EncodedString];

//Set the Authorization header which will now let your service calls pass basic authentication
    [request addValue:[NSString stringWithFormat:@"Basic %@",encodedString] forHTTPHeaderField:@"Authorization"];

//Setup a queue and call the async request - remember to do items in your block on the 
//main thread if it's for things like showing/hiding items as other threads will not run that code when you're expecting it

NSOperationQueue *queue = [[NSOperationQueue alloc] init];
[NSURLConnection sendAsynchronousRequest:request queue:queue completionHandler:^(NSURLResponse *response, NSData *data, NSError *error) {
//your code block here 
}]; 
```

我相信这回答了你的问题，现在我只需要找出如何删除该身份验证，以便在我为安全的合法网站构建它时注销用户。任何帮助将不胜感激

# java - 如何在 JSplitPane 中对齐 RadioButtons？

> ID：13314834
> 
> 赞同：0
> 
> 时间：2012-11-09T19:40:20.207
> 
> 标签：java, swing, layout-manager, jradiobutton, jsplitpane

我正在尝试在这里对齐我的程序中的 RadioButtons。有人可以帮助我吗？我不确定该怎么做。我在这里和其他地方搜索过，似乎找不到适用的例子。这就是我相信我的代码的相关部分的内容。如果需要更多，我会编辑。

```
final class SplitPanel extends JFrame {
    private FlowLayout flowLayout = new FlowLayout();
    private GridLayout gridLayout = new GridLayout(4, 1);
    private DiagLayout diagLayout = new DiagLayout();

    private JRadioButton jrbFlowLayout = new JRadioButton("Horizontal");
    private JRadioButton jrbGridLayout = new JRadioButton("Verticle");
    private JRadioButton jrbDiagLayout = new JRadioButton("Diagonal");

    private JButton jbt1 = new JButton("Button 1");
    private JButton jbt2 = new JButton("Button 2");
    private JButton jbt3 = new JButton("Button 3");
    private JButton jbt4 = new JButton("Button 4");

    private JSplitPane jSplitPane;
    private JPanel jPanel1, jPanel2;

    public SplitPanel() {
        this.setTitle("Split Panel with Diagonalization");
        this.setSize(600, 400);
        this.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

        createPanel1();
        createPanel2();

        jSplitPane = new JSplitPane(JSplitPane.HORIZONTAL_SPLIT,
                jPanel1, jPanel2);
        jSplitPane.setOneTouchExpandable(true);
        jSplitPane.setContinuousLayout(true);
        jSplitPane.setDividerLocation(150);

        getContentPane().add(jSplitPane);
    }

    public void createPanel1() {
        jPanel1 = new JPanel();
        jPanel1.setBorder(new TitledBorder("Select a Layout Manger"));
        jPanel1.add(jrbFlowLayout);
        jPanel1.add(jrbGridLayout);
        jPanel1.add(jrbDiagLayout);

        ButtonGroup buttonGroup1 = new ButtonGroup();
        buttonGroup1.add(jrbFlowLayout);
        buttonGroup1.add(jrbGridLayout);
        buttonGroup1.add(jrbDiagLayout);

    }

    public void createPanel2() {
        jPanel2 = new JPanel();
        jPanel2.setLayout(diagLayout);
        jPanel2.add(jbt1);
        jPanel2.add(jbt2);
        jPanel2.add(jbt3);
        jPanel2.add(jbt4);

        jrbFlowLayout.addActionListener (new ActionListener() {
            @Override
            public void actionPerformed(ActionEvent e) {
                jPanel2.setLayout(flowLayout);
                jPanel2.validate();
            }
        });

        jrbGridLayout.addActionListener (new ActionListener() {
            @Override
            public void actionPerformed(ActionEvent e) {
                jPanel2.setLayout(gridLayout);
                jPanel2.validate();
            }
        });

        jrbDiagLayout.addActionListener (new ActionListener() {
            @Override
            public void actionPerformed(ActionEvent e) {
                jPanel2.setLayout(diagLayout);
                jPanel2.validate();
            }
        });

    } 
```

感谢您的帮助！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-09T20:04:59.697

为您尝试不同的布局管理器`jPanel1`

```
public void createPanel1() {
    jPanel1 = new JPanel();
    //jPanel1.setLayout(new GridLayout(0, 1);
    jPanel1.setLayout(new BoxLayout(jPanel1, BoxLayout.Y_AXIS));
    jPanel1.setBorder(new TitledBorder("Select a Layout Manger"));
    jPanel1.add(jrbFlowLayout);
    jPanel1.add(jrbGridLayout);
    jPanel1.add(jrbDiagLayout);

    ButtonGroup buttonGroup1 = new ButtonGroup();
    buttonGroup1.add(jrbFlowLayout);
    buttonGroup1.add(jrbGridLayout);
    buttonGroup1.add(jrbDiagLayout);

} 
```

`GridLayout`...

![在此处输入图像描述](../Images/92c3e260f3838a43756c3bac1a586dba.png)

`BoxLayout`...

![在此处输入图像描述](../Images/3a05a5c6e57b3cbef5c6c54fcbfefc18.png)

我几乎建议`GridBagLayout`，但在这种情况下，这可能是矫枉过正......

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-09T19:49:41.203

JPanel 的默认布局是 FlowLayout。 [http://docs.oracle.com/javase/tutorial/uiswing/layout/using.html](http://docs.oracle.com/javase/tutorial/uiswing/layout/using.html)

您可能希望将面板布局设置为 GridLayout 甚至是 BoxLayout。

在

```
createPanel1(){
// create panel.
jPanel1.setLayout(new GridLayout(0,1)); 
```

# entity-framework - 我的 Seed() 方法从未在 Code First EF 5 中调用

> ID：13314848
> 
> 赞同：14
> 
> 时间：2012-11-09T19:41:34.797
> 
> 标签：entity-framework, ef-code-first, code-first

我的`Seed()`方法永远不会被调用。当我`Update-Database`从包管理器控制台执行操作时会调用它，但从代码运行时不会调用它。如果我删除我的数据库，则会创建所有表（因此我的迁移类被执行），但我的 Seed() 代码永远不会被调用。MVC 4，实体框架 5 代码优先。

全球.asax：

```
protected void Application_Start()
{
  Database.SetInitializer<MyContext>(new DbInitializer());
} 
```

数据库初始化：

```
internal class DbInitializer : MigrateDatabaseToLatestVersion<MyContext, Migrations.Configuration>
{
} 
```

数据库上下文：

```
public partial class MyContext : DbContext
{
  public MyContext() : base("DefaultConnection")
  {
  }
  // public DBSets....
} 
```

配置：

```
internal sealed class Configuration : DbMigrationsConfiguration<MyContext>
{
public Configuration()
{
  // The constructor is actually called
  AutomaticMigrationsEnabled = false;
}

protected override void Seed(MyContext context)
{
   // My seed code, never called
} 
```

有什么问题？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-02-03T15:22:17.513

所以原因是我需要在配置文件中指定我的自定义初始化器：

```
 <entityFramework>
      <contexts>
        <context type="EFTest2.MyContext, EFTest2">
          <databaseInitializer type="EFTest2.Initializers.DbInitializer, EFTest2" />
        </context>
      </contexts>
      <defaultConnectionFactory type="System.Data.Entity.Infrastructure.SqlConnectionFactory, EntityFramework" />
  </entityFramework> 
```

之后，我的`Seed`方法被调用。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2015-11-23T07:57:35.340

请首先参考接受的答案。
我只想为这个问题添加一个非常重要的说明。

我面临着**这个**问题所描述的完全相同的问题（这导致我来到这里）。但是我使用的是**CreateDatabaseIfNotExists**而不是**MigrateDatabaseToLatestVersion**并且即使在应用接受的答案后我的种子方法也没有执行。

我的问题如下：根据[种子方法的文档](https://msdn.microsoft.com/en-us/library/hh829453(v=vs.113).aspx)：如果数据库初始化程序是以下之一，则不会执行该`Seed`方法`DbMigrationsConfiguration`

*   [DropCreateDatabaseAlways](https://msdn.microsoft.com/en-us/library/gg679506(v=vs.113).aspx)
*   [DropCreateDatabaseIfModelChanges](https://msdn.microsoft.com/en-us/library/gg679604(v=vs.113).aspx)
*   [CreateDatabaseIfNotExists](https://msdn.microsoft.com/en-us/library/gg679221(v=vs.113).aspx)

如果您使用其中一种类型，则应创建自己的类，该类继承自其中一种类型，然后在您自己的类中覆盖种子方法。

就我而言，添加以下类解决了这个问题。

```
public class CreateNotifierDatabaseIfNotExists : CreateDatabaseIfNotExists<NotifierContext>
{
    protected override void Seed(NotifierContext context)
    {
        // the code of the seeding is go here
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-11-08T16:04:46.867

根据我的经验，当您停止尝试访问 DataContext 时，可能会发生这种情况。我们有一个在 DataContext 完成创建数据库时抛出错误的方法。我们将其注释掉以解决创建数据库的问题。

问题是，这是在初始加载时实际使用 DataContext 的唯一方法。这意味着没有执行 DbInitialization 逻辑，因为还不需要实例。

当我们添加一个问题较少的数据检索逻辑而不是注释掉的逻辑时，DbCreation 和 Seeding 逻辑正常进行。

# c# - 转换为十六进制时的 HecaDecimal X 值？

> ID：13314859
> 
> 赞同：0
> 
> 时间：2012-11-09T19:42:23.817
> 
> 标签：c#, .net

所以我正在将字符串转换为十六进制值表示并且错误地而不是写作 `ToString("X0")`

我写

`ToString("X100")`

```
var t="123";
for (int i=0;i<t.Length;i++)
{
     Console.WriteLine( ((int)t[i]).ToString("X100"));
} 
```

值为：

```
X149
X150
X151 
```

ps：

`ToString("X10")`产量：

```
0000000031
0000000032
0000000033 
```

`ToString("X99")`产量：（与许多零相同）

但是当像 100 , 1000 , 10000 .... 一样跳跃时，它会产生 somwthing`X`

这个 X 表示是什么？`X149`例如...？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-09T19:50:37.743

对于`x`和`X`格式说明符，与所有[标准数字格式](http://msdn.microsoft.com/en-us/library/dwhawy9k.aspx)一样，您最多只能请求 99 位数字。一旦您尝试要求更多，您将不再拥有标准格式说明符，而是自定义格式说明符。

在自定义格式说明符中，“0”表示在原始数字中包含一个数字，其他所有内容都保持不变。

所以：

```
19.ToString("X8") = "00000013"
19.ToString("X99") = "0000...0013" // 99 digits
19.ToString("X100") = "X119"; // "X1" + 19.ToString("00")
19.ToString("X101") = "X1191" // "X1" + 19.ToString("0") + "1"
29.ToString("X1010") = "X1219" // "X1" + 2.ToString("0") + "1" + 9.ToString("0") 
```

等等

（解释最后一个：每个 0 代表正在格式化的*数字中的下一个数字*；第一个 0 被 2 替换，第二个 0 被 9 替换。这些很快就变得非常棘手。）

# primes - 在 Forth 中检查素数

> ID：13314861
> 
> 赞同：2
> 
> 时间：2012-11-09T19:42:25.837
> 
> 标签：primes, forth, gforth

如何在 Forth 中检查[素数？](http://en.wikipedia.org/wiki/Primality_test)

这是我现在使用的，但是随着数字的增加它会变慢：

```
: prime ( n - f )
  DUP 2 < IF 
    DROP 0 EXIT
  THEN
  DUP 2 ?DO
    DUP I I * < IF
      DROP -1 LEAVE
    THEN
    DUP I MOD 0= IF
      DROP 0 LEAVE
    THEN
  LOOP ; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-22T04:40:40.020

一个简单的概率方法是使用 Fermat 测试，您可以在 Wikipedia 中查找：

```
: *mod ( a b n -- n2 )
    */mod drop ;

: expmod { x e n -- n2 } \ compute x^e mod n by repeated squaring
    e 0= if 1 exit
    else
        x e 2/ n recurse dup n *mod
        e 1 and if x n *mod then 
    then ;

: prime ( n -- f )
    3 swap dup expmod 3 = ; 
```

如果这个测试说这个数字是复合的，那么它肯定是复合的。如果它说这个数字是素数，那么它很可能是素数，但是一些合数会漏掉（这样的数字被称为“伪素数”）。对于某些目的，该测试非常快速且足够。

您发布的代码测试除数 2,3,4,5,... 直到 n 的平方根，如果它测试 2,3,5,7... 的速度大约是 2 倍...因为不需要测试大于 2 的偶数除数。

# spring - Spring验证默认消息

> ID：13314862
> 
> 赞同：1
> 
> 时间：2012-11-09T19:42:32.727
> 
> 标签：spring, validation, spring-mvc, error-handling, messages

我需要在控制器中以编程方式获取已解决的错误消息。typeMismatch 错误的默认验证消息未从我的 messages.properties 文件中填充。我有一个表单支持对象，其中一个字段是一个整数。如果我为该字段提交一个字符串，我会得到：

```
Failed to convert property value of type 'java.lang.String' to required type 'java.lang.Integer' for property 'establishedYear'; nested exception is java.lang.NumberFormatException: For input string: "1995a" 
```

作为 ObjectError 中的默认消息。这是我的控制器输出它：

```
 @RequestMapping(method = RequestMethod.POST)
  public @ResponseBody FormJSONResponse postForm(@Valid ProfileEditCompanyForm profileEditCompanyForm, BindingResult result) throws Exception {    
    if (result.hasErrors()) {
      for (ObjectError objectError : result.getAllErrors()) {
        System.out.println(objectError.getDefaultMessage());  // THIS IS NOT MY MESSAGE, BUT SHOULD BE
      }
    }
    ... other stuff ...
  } 
```

所以我向 WEB-INF/classes 添加了一个带有一些测试消息的 messages.properties，看看我是否可以覆盖该默认消息：

```
typeMismatch.profileEditCompanyForm.establishedYear=test 1
typeMismatch.establishedYear=test 2
typeMismatch.java.lang.Integer=test 3
typeMismatch=test 4
profileEditCompanyForm.establishedYear=test 5
establishedYear=test 6 
```

在我的 app-servlet.xml 文件中，我有：

```
<mvc:annotation-driven conversion-service="conversionService" validator="validator"/>

<bean id="messageSource" class="org.springframework.context.support.ResourceBundleMessageSource">
  <property name="basename" value="messages" />
</bean>

<bean id="validator" class="org.springframework.validation.beanvalidation.LocalValidatorFactoryBean">
  <property name="validationMessageSource" ref="messageSource"/>
</bean> 
```

为什么它没有从我的 messages.properties 文件中获取我的任何消息？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-14T20:36:34.863

在你的 Spring 上下文中尝试这个：

```
<bean id="messageSource"
    class="org.springframework.context.support.ReloadableResourceBundleMessageSource">
    <property name="basename" value="WEB-INF/classes/messages" />
</bean> 
```

然后在“WEB-INF/classes”文件夹中创建一个文件调用：“messages.properties”

请注意“messages.properties”的内容，您必须像这样提供它：

```
typeMismatch.pathValueInsideYourJSPform:input= Your Message 
```

希望这对你有帮助！

这里也是一个[样本](http://www.raistudies.com/spring/spring-mvc/form-processing-spring-mvc-3-annotation/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T20:40:35.123

尝试指定完整路径并尝试

```
 <bean id="messageSource" class="org.springframework.context.support.ResourceBundleMessageSource">
      <property name="basename" value="WEB-INF/messages" />
    </bean> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-09T22:46:59.660

显然我必须通过 Spring MessageSource 运行 FieldError 对象。我希望这是自动完成的。我在这里找到了答案：

[如何从 BindingResult 获取控制器中的错误文本](https://stackoverflow.com/questions/2751603/how-to-get-error-text-in-controller-from-bindingresult)

# sql - Oracle LIMIT 和 1000 列限制

> ID：13314868
> 
> 赞同：3
> 
> 时间：2012-11-09T19:42:51.120
> 
> 标签：sql, oracle, pagination

我有一个如下所示的 SQL 查询：

```
SELECT foo "c0",
       bar "c1",
       baz "c2",
       ...
FROM   some_table
WHERE  ... 
```

为了应用限制，并且只返回来自该查询的记录子集，我使用以下包装 SQL：

```
SELECT *
FROM   (
    SELECT t.*,
           ROW_NUMBER() OVER (ORDER BY ...) rnum
    FROM   (
        ... original SQL goes here ...
    ) t
)
WHERE rnum BETWEEN 1 AND 10 
```

我的问题是原始查询在与其他表的大量连接中选择了超过 1000 列。Oracle 对每个表或视图有 1000 列的内部限制，显然我用来限制结果集的包装 SQL 正在创建一个应用此限制的临时视图，导致整个事情失败。

是否有另一种分页方法不会创建这样的视图，或者不会受到 1000 列限制的影响？

我对将工作分解成块的建议不感兴趣，而不是选择 > 1000 列等，因为我已经完全了解所有这些方法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-09T20:31:22.880

好的，这会比你计划的更糟糕，但我的意思是你可以这样尝试分页：

```
WITH CTE AS
(
    ... original SQL goes here ...
)

SELECT A.*
FROM CTE A
INNER JOIN (SELECT  YourKey,
                    ROW_NUMBER() OVER (ORDER BY ...) rnum
            FROM CTE) B
ON A.YourKey = B.YourKey
WHERE rnum BETWEEN 1 AND 10; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-09T20:50:13.693

你不能有超过 1000 列的视图，所以稍微作弊。

```
select *
  from foo f, foo2 f2
 where (f.rowid, f2.rowid) in (select r, r2
                                 from (select r, r2, rownum rn
                                         from (select /*+ first_rows */ f.rowid r, f2.rowid r2
                                                 from foo f, foo2 f2
                                                where f.c1 = f2.a1 
                                                  and f.c2 = '1'
                                                order by f.c1))
                                where rn >= AAA
                                  and rownum <= BBB)

order by whatever; 
```

现在将任何 where 子句放在最里面的位（例如我放 f.c1 = '1'）。

BBB = 页面大小。AAA = 起点

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-11-09T19:52:53.523

问题是分页还是只返回前 10 行？如果是后者，你可以这样做：

```
SELECT foo "c0",
       bar "c1",
       baz "c2",
       ...
FROM   some_table
WHERE  ... and
       rownum <= 10 
```

# jquery-mobile - jQuery Mobile 更改页面，显示图像

> ID：13314871
> 
> 赞同：0
> 
> 时间：2012-11-09T19:42:59.717
> 
> 标签：jquery-mobile

我正在编写一个 jQuery Mobile 单页应用程序。在我的一个 div（data-role="page"）中，我有一些图像（img 元素），我在“pagebeforeshow”中加载：

```
$('#a1').attr("src", "images/smile.png"); 
```

当我第一次导航到此页面时（使用 changepage），图像显示正确，但如果我单击返回并再次按此页面的链接，图像不会显示。

如果我使用 window.location（而不是 changepage），一切正常，但我无法控制转换（滑动、翻转等）。

任何想法为什么会发生这种情况？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T19:52:54.180

尝试使用 pagebeforechange 而不是 pagebeforeshow

# eventbrite - 获取有关经过身份验证的用户的信息

> ID：13314873
> 
> 赞同：0
> 
> 时间：2012-11-09T19:43:04.467
> 
> 标签：eventbrite

我可能遗漏了一些简单的东西，但是我很难获取有关已登录用户的信息。我已使用 OAuth 成功进行身份验证并获得了 access_token。我了解需要 user_key 才能访问私人数据。我似乎无法弄清楚如何得到这个。我刚刚开始使用 EventBrite 集成，所以我并不完全熟悉它。我过去曾与 Facebook 整合过。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-10T18:34:34.970

在此处查看有关 access_tokens 和请求标头的信息：http: [//developer.eventbrite.com/doc/authentication/](http://developer.eventbrite.com/doc/authentication/)

或者，使用 API 客户端库之一为您发出请求：http: [//developer.eventbrite.com/doc/libraries/](http://developer.eventbrite.com/doc/libraries/)

# mysql - 为什么 MySQL 需要更多时间来获取以更高数字开头的记录？

> ID：13314886
> 
> 赞同：0
> 
> 时间：2012-11-09T19:44:17.400
> 
> 标签：mysql, sql, database

> **可能重复：**
> [如何加快 LIMIT 子句中偏移量较大的 MySQL 查询？](https://stackoverflow.com/questions/1243952/how-can-i-speed-up-a-mysql-query-with-a-large-offset-in-the-limit-clause)

在我们的应用程序中，我们在网页上显示来自 MySQL 的记录。像在大多数此类应用程序中一样，我们使用分页。所以查询看起来像这样：

```
select * from sms_message 
where account_group_name = 'scott' 
and received_on > '2012-10-11' and 
received_on < '2012-11-30' 
order by received_on desc 
limit 200 offset 3000000; 
```

此查询需要 104 秒。如果我只将偏移量更改为低或完全​​删除它，则只需半秒。这是为什么？

只有一个复合索引，它是 account_group_name、received_on 和另外两列。表是 InnoDB。

更新：

解释回报：

```
1   SIMPLE  sms_message ref all_filters_index   all_filters_index   258 const   2190030 Using where 
```

all_filters_index 是上面提到的 4 列过滤器。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T19:57:40.530

是的，这是真的，时间随着偏移值的增加而增加，原因是因为偏移作用于表中未索引的行的物理位置。因此，要找到偏移量 x 处的行，数据库引擎必须遍历从 0 到 x 的所有行。

# java - Glassfish 充斥着日志记录

> ID：13314887
> 
> 赞同：2
> 
> 时间：2012-11-09T19:44:21.973
> 
> 标签：java, jakarta-ee, glassfish

我正在使用 DBUnit，我想知道如何阻止 Glassfish 记录它所发生的所有事情。似乎同时打印了信息级别日志和调试级别日志。为什么会这样，如何将 dbunit 设置为 WARN

> [#|2012-11-09T20:43:08.579+0100|INFO|glassfish3.1.2|javax.enterprise.system.std.com.sun.enterprise.server.logging|_ThreadID=42;_ThreadName=Thread-2;| 20:43:08.579 [http-thread-pool-8080(1)] 调试 org.dbunit.util.xml.XmlWriter - close() - 开始

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T14:30:38.923

日志级别不是由 Glassfish 控制，而是由 DBUnit 控制。请参阅相关问题：[DBUnit 中的日志输出](https://stackoverflow.com/questions/5980630/log-output-in-dbunit)。

# c# - 10000 多个 UI 元素，绑定还是绘制？

> ID：13314889
> 
> 赞同：5
> 
> 时间：2012-11-09T19:44:27.203
> 
> 标签：c#, wpf, data-binding

我正在为时间线控件绘制标题。它看起来像这样： ![在此处输入图像描述](../Images/d31fe3bd2276d1baa947c208d96469d5.png)

我每行 0.01 毫秒，所以对于 10 分钟的时间线，我正在查看绘制 60000 行 + 6000 个标签。这需要一段时间，大约 10 秒。我想从 UI 线程中卸载它。我的代码目前是：

```
private void drawHeader()
{
  Header.Children.Clear();
  switch (viewLevel)
  {
    case ViewLevel.MilliSeconds100:
        double hWidth = Header.Width;
        this.drawHeaderLines(new TimeSpan(0, 0, 0, 0, 10), 100, 5, hWidth);

        //Was looking into background worker to off load UI

        //backgroundWorker = new BackgroundWorker();

        //backgroundWorker.DoWork += delegate(object sender, DoWorkEventArgs args)
        //                               {
        //                                   this.drawHeaderLines(new TimeSpan(0, 0, 0, 0, 10), 100, 5, hWidth);
        //                               };
        //backgroundWorker.RunWorkerAsync();
        break;
    }
}

private void drawHeaderLines(TimeSpan timeStep, int majorEveryXLine, int distanceBetweenLines, double headerWidth)
{
var currentTime = new TimeSpan(0, 0, 0, 0, 0);
const int everyXLine100 = 10;
double currentX = 0;
var currentLine = 0;
while (currentX < headerWidth)
{
    var l = new Line
                {
                    ToolTip = currentTime.ToString(@"hh\:mm\:ss\.fff"),
                    StrokeThickness = 1,
                    X1 = 0,
                    X2 = 0,
                    Y1 = 30,
                    Y2 = 25
                };
    if (((currentLine % majorEveryXLine) == 0) && currentLine != 0)
    {
        l.StrokeThickness = 2;
        l.Y2 = 15;
        var textBlock = new TextBlock
                            {
                                Text = l.ToolTip.ToString(),
                                FontSize = 8,
                                FontFamily = new FontFamily("Tahoma"),
                                Foreground = new SolidColorBrush(Color.FromRgb(255, 255, 255))
                            };

        Canvas.SetLeft(textBlock, (currentX - 22));
        Canvas.SetTop(textBlock, 0);
        Header.Children.Add(textBlock);
    }

    if ((((currentLine % everyXLine100) == 0) && currentLine != 0)
        && (currentLine % majorEveryXLine) != 0)
    {
        l.Y2 = 20;
        var textBlock = new TextBlock
                            {
                                Text = string.Format(".{0}", TimeSpan.Parse(l.ToolTip.ToString()).Milliseconds),
                                                            FontSize = 8,
                                                            FontFamily = new FontFamily("Tahoma"),
                                                            Foreground = new SolidColorBrush(Color.FromRgb(192, 192, 192))
                            };

        Canvas.SetLeft(textBlock, (currentX - 8));
        Canvas.SetTop(textBlock, 8);
        Header.Children.Add(textBlock);
    }
    l.Stroke = new SolidColorBrush(Color.FromRgb(255, 255, 255));
    Header.Children.Add(l);
    Canvas.SetLeft(l, currentX);

    currentX += distanceBetweenLines;
    currentLine++;
    currentTime += timeStep;
}
} 
```

我研究了 BackgroundWorker，除了你不能在非 UI 线程上创建 UI 元素。

是否可以在非 UI 线程中执行 drawHeaderLines？

我可以使用数据绑定来绘制线条吗？这对 UI 响应有帮助吗？

我想我可以使用数据绑定，但样式可能超出了我目前的 WPF 能力（来自 winforms 并试图了解所有这些样式对象是什么并绑定它们）。

谁能提供一个引诱这个的起点？或者谷歌一个能让我开始的教程？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T20:07:03.787

因此，正如您所说，所有这些工作都需要在 UI 线程中完成；您不能只在后台线程中执行此操作。

但是，在 UI 线程中运行一个非常长的循环来执行大量 UI 修改会阻塞 UI 线程，所以显然我们不能这样做。

这里的关键是你需要将你正在做的事情分解成许多更小的工作单元，然后在 UI 线程中完成所有这些小单元的工作。UI 线程所做的工作与以前一样多（可能甚至更多，因为管理所有这些的开销），但它允许其他事情（例如鼠标移动/单击事件、按键等）发生在这些任务之间。

这是一个简单的例子：

```
private void button1_Click(object sender, EventArgs e)
{
    TaskScheduler uiContext = TaskScheduler.FromCurrentSynchronizationContext();
    Task.Run(async () =>
    {
        for (int i = 0; i < 1000; i++)
        {
            await Task.Factory.StartNew(() =>
            {
                Controls.Add(new Label() { Text = i.ToString() });
            }, CancellationToken.None, TaskCreationOptions.None, uiContext);
        }
    });
} 
```

首先，我们在 UI 线程中获取 UI 上下文，然后我们在后台启动一个新线程，负责启动我们所有的小任务。在这里，您将开始循环。（您可能希望将其提取到另一种方法，因为您的方法并不那么简单。）然后，立即在循环内部启动一个新任务，并在 UI 的上下文中启动该任务。然后，您可以在该任务内部放置循环中的整个内容。通过`await`执行该任务，您可以确保每个任务都被安排为前一个任务的延续，因此它们都按顺序运行。如果订单无关紧要（这不太可能，但可能），那么您根本不需要等待。

如果您需要一个 C# 4.0 版本，您可以将其保留`Task`在循环之外，并在每次迭代中连接一个新任务作为前一个任务的延续，然后将“自身”设置为该任务。不过会更乱。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T21:49:46.053

这只是一个概念证明，但我认为您可以使用 ListView 虚拟化。而不是文本只有一组图像（每 10 行一个图像）。通过虚拟化，它只呈现显示的内容。

```
<Grid>
    <Grid.ColumnDefinitions>
        <ColumnDefinition Width="*"/>
    </Grid.ColumnDefinitions>
    <Grid.RowDefinitions>
        <RowDefinition Height="*"/>
    </Grid.RowDefinitions>
    <ListView Grid.Row="0" Grid.Column="0" ItemsSource="{Binding Path=Numbers}" Width="100" Height="500">
        <ListView.RenderTransform>
            <RotateTransform Angle="90" CenterX="150" CenterY="150"/>
        </ListView.RenderTransform> 
    </ListView>
</Grid>

public List<string> Numbers
{
    get
    {
        List<string> numbers = new List<string>();
        for (UInt16 i=1; i < 60000; i++)
        {
            numbers.Add(i.ToString());
        }
        return numbers;
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-04T17:00:22.300

好吧，我已经把它放在次要位置了，但是。

但我想我已经想出了一个解决方案。

使用 DrawingVisual 和 DrawingContext。

这篇博文对我帮助很大：[简单的 WPF 2D 图形：DrawingVisual](http://blogs.msdn.com/b/dsimmons/archive/2010/11/28/simple-wpf-2d-graphics-drawingvisual.aspx)

首先，我们需要获取我们的 Visual 类（注意这段代码已经拼凑在一起，清理是个好主意）：

```
public class MyVisualHost : FrameworkElement
{
private readonly VisualCollection children;

public MyVisualHost(int width)
{
    children = new VisualCollection(this);

    var visual = new DrawingVisual();
    children.Add(visual);

    var currentTime = new TimeSpan(0, 0, 0, 0, 0);
    const int everyXLine100 = 10;
    double currentX = 0;
    var currentLine = 0;
    double distanceBetweenLines = 5;
    TimeSpan timeStep = new TimeSpan(0, 0, 0, 0, 10);
    int majorEveryXLine = 100;

    var grayBrush = new SolidColorBrush(Color.FromRgb(192, 192, 192));
    grayBrush.Freeze();
    var grayPen = new Pen(grayBrush, 2);
    var whitePen = new Pen(Brushes.White, 2);
    grayPen.Freeze();
    whitePen.Freeze();

    using (var dc = visual.RenderOpen())
    {
        while (currentX < width)
        {
            if (((currentLine % majorEveryXLine) == 0) && currentLine != 0)
            {
                dc.DrawLine(whitePen, new Point(currentX, 30), new Point(currentX, 15));

                var text = new FormattedText(
                    currentTime.ToString(@"hh\:mm\:ss\.fff"),
                    CultureInfo.CurrentCulture,
                    FlowDirection.LeftToRight,
                    new Typeface("Tahoma"),
                    8,
                    grayBrush);

                dc.DrawText(text, new Point((currentX - 22), 0));
            }
            else if ((((currentLine % everyXLine100) == 0) && currentLine != 0)
                        && (currentLine % majorEveryXLine) != 0)
            {
                dc.DrawLine(grayPen, new Point(currentX, 30), new Point(currentX, 20));

                var text = new FormattedText(
                    string.Format(".{0}", currentTime.Milliseconds),
                    CultureInfo.CurrentCulture,
                    FlowDirection.LeftToRight,
                    new Typeface("Tahoma"),
                    8,
                    grayBrush);
                dc.DrawText(text, new Point((currentX - 8), 8));
            }
            else
            {
                dc.DrawLine(grayPen, new Point(currentX, 30), new Point(currentX, 25));
            }

            currentX += distanceBetweenLines;
            currentLine++;
            currentTime += timeStep;
        }
    }
}

// Provide a required override for the VisualChildrenCount property.
protected override int VisualChildrenCount { get { return children.Count; } }

// Provide a required override for the GetVisualChild method.
protected override Visual GetVisualChild(int index)
{
    if (index < 0 || index >= children.Count)
    {
        throw new ArgumentOutOfRangeException();
    }

    return children[index];
}
} 
```

接下来我们需要我们的绑定：

```
public static readonly DependencyProperty HeaderDrawingVisualProperty = DependencyProperty.Register("HeaderDrawingVisual", typeof(MyVisualHost), typeof(MainWindow));

public MyVisualHost VisualHost
{
    get { return (MyVisualHost)GetValue(HeaderDrawingVisualProperty); }
    set { SetValue(HeaderDrawingVisualProperty, value); }
} 
```

XAML：

```
<Canvas x:Name="Header" Background="#FF2D2D30" Grid.Row="0">
    <ContentPresenter Content="{Binding HeaderDrawingVisual}" />
</Canvas> 
```

然后只需在代码中设置：

```
Header.Width = 50000;
VisualHost = new MyVisualHost(50000); 
```

我的测试表明，使用这种新方法使用 50000 的宽度，我看到了很大的增加！

```
Old way Total Milliseconds: 277.061
New way Total Milliseconds: 13.9982
Old way Total Milliseconds: 518.4632
New way Total Milliseconds: 12.9423
Old way Total Milliseconds: 479.1846
New way Total Milliseconds: 23.4987
Old way Total Milliseconds: 477.1366
New way Total Milliseconds: 12.6469
Old way Total Milliseconds: 481.3118
New way Total Milliseconds: 12.9678 
```

第一次时间较少，因为重建时必须清除项目。

# java - 使用jackson将ebean映射到json时如何避免无限循环引用？

> ID：13314891
> 
> 赞同：0
> 
> 时间：2012-11-09T19:44:29.727
> 
> 标签：java, json, playframework-2.0, ebean

我目前正在使用 Play！2.0.4 与 Ebean 和杰克逊。我在用户和联系人之间有 OneToMany 关系。我正在使用 Jacksons ObjectMapper 将对象转换为 json，但是在转换过程中我遇到了循环引用的问题。

```
class User extends Model {
    List<Contact> contacts;
}

class Contact extends Model {
    User user;
} 
```

我想获取所有联系人的列表，并将此列表转换为 json，包括将其链接到用户的外键，但不需要用户表本身的任何数据。

目前我在使用 ObjectMapper 创建此列表时遇到 StackOverflowError 。我明白为什么，但不知道如何最好地解决它。

我省略了任何我认为不相关的注释和代码，但如果需要更多代码，请告诉我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T22:05:37.577

我没有使用 Play 框架，但是 JPA 允许您将 OneToMany 或 ManyToMany 关系从一个实体映射到另一个实体。然后在第二个实体中，它向后读取相同的关系，所以只有一个关系。您的问题听起来像您有两种关系，一种是双向的。

为您的 User 类中的联系人成员查找与 @OneToMany(mappedBy="user") 等效的 Play eBean。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T22:18:34.777

也许您需要获取 List o 结果，对其进行迭代并创建仅包含所需数据的新 List。我不确定 ObjectMapper，但是我有[类似的问题](https://groups.google.com/forum/?fromgroups=#!searchin/play-framework/json%2420biesior/play-framework/xVDmm4hQqfY/5tojzgRWCggJ)，似乎 toJson() 方法强制构建具有所有关系的整个对象。

从那个问题开始，我构建了一些 JSON API，并记住了那段经历，我决定为每一行手动构建新对象。我的一些 API 可以（应该）返回大型数据集，因此仔细选择数据对我来说很重要，没有多余的（未使用的）字段等。即。像这样

```
public static Result jsonAll(){

    // initiate empty result List
    List results = new ArrayList();

    List<Marker> tasks = Marker.find.select("id, name").findList();
    for (Marker task : tasks) {

        // build 'item'
        Map<String, Object> item = new HashMap<String, Object>();
        item.put("id", task.id);
        item.put("name", task.name);

        // add the 'item' to 'results'
        results.add(item);

    }

    // return all as JSON
    return ok(Json.toJson(results));
} 
```

当然，您需要获取关系，因此您需要向查找器添加[`fetch()`语句](http://www.avaje.org/ebean/introquery_join.html)并指向要选择的确切关系和字段。

# java - 为什么代码“while (true) new Object()”不会导致OutOfMemoryException？

> ID：13314894
> 
> 赞同：2
> 
> 时间：2012-11-09T19:44:49.033
> 
> 标签：java, exception

为什么要编码

```
while(true)
  new Object(); 
```

会不会导致OutOfMemoryException？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-09T19:45:21.820

因为一旦完成每个循环迭代，对象就有资格进行 GC（因此不会填充 HEAP）。当 JVM 需要更多内存时，它可以清理符合条件的对象。

我建议阅读**关于垃圾收集的真相**（我无法在此处发布链接，因为它有 IP，只需 google 即可）。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-09T19:46:11.280

您没有将新对象分配给任何持久变量，因此您不会耗尽内存，因为 Java 虚拟机会在您有机会耗尽内存之前对每个对象进行垃圾收集。

另一方面，如果你说

```
List<Object> xs = new LinkedList<Object>();
while (true) {
    xs.add(new Object());
} 
```

然后他们不会自动收集垃圾，你最终会耗尽内存。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-09T19:45:56.273

因为您没有保存对您创建的新对象的任何引用，所以[垃圾收集器](http://en.wikipedia.org/wiki/Garbage_collection_%28computer_science%29)可以在内存不足时简单地删除它们。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-09T19:48:39.557

JVM 保证，无论您创建多少垃圾，`OutOfMemoryError`如果还有可回收的堆，您都不会收到。唯一的例外是当 GC 性能开销超过定义的阈值时。然而，在你的情况下，GC-ing 实际上是完全微不足道的并且闪电般快速：在每个次要收集周期中，所有对象都被收集为线程局部区域中的一个巨大块。

# vb6 - VB6中的字节数组到有符号整数

> ID：13314896
> 
> 赞同：3
> 
> 时间：2012-11-09T19:45:03.380
> 
> 标签：vb6, bytearray

我无法在 VB6 中从字节数组转换为有符号整数。这在.NET 中使用 BitConverter 很简单，但我不确定如何使用 VB6。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T20:58:19.900

不幸的是没有内置函数，你需要写一个。这是一个快速示例，可帮助您入门。

```
Private Function BArrayToInt(ByRef bArray() As Byte) As Integer
    Dim iReturn As Integer
    Dim i As Integer

    For i = 0 To UBound(bArray) - LBound(bArray)
        iReturn = iReturn + bArray(i) * 2 ^ i
    Next i

    BArrayToInt = iReturn

End Function 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T22:39:17.850

[复制内存](http://www.devx.com/vb2themax/Tip/18519)

空气代码（可能会使您的 PC 崩溃，导致恐龙攻击等）。

```
Declare Sub CopyMemory Lib "kernel32" Alias "RtlMoveMemory" (dest As Any, _ source As Any, ByVal bytes As Long)  

Dim a() As Byte 
Dim n As Integer 
 'get the bytes somehow into a()
CopyMemory n, a(0), 2 
```

# php - 使用php替换文本文件中的特定行？

> ID：13314898
> 
> 赞同：0
> 
> 时间：2012-11-09T19:45:15.963
> 
> 标签：php, file, replace, line, fwrite

我有一个文本文件，它存储`lastname, first name, address, state, etc`为带有`|`分隔符的字符串，每条记录都在单独的行上。

我有需要将每条记录存储在新行上的部分，并且工作正常；但是，现在我需要能够返回并更新特定行上的名称或地址，但我无法让它工作。

这[如何使用 php 替换文本文件中的特定行？](https://stackoverflow.com/questions/3004041/how-to-replace-a-particular-line-in-a-text-file-using-php)在这里帮助了我，但我还没有到那里。这会覆盖整个文件，我会丢失记录。任何帮助表示赞赏！

经过一些编辑似乎现在正在工作。我正在调试以查看是否有任何错误。

```
$string= implode('|',$contact);   

$reading = fopen('contacts.txt', 'r');
$writing = fopen('contacts.tmp', 'w');

$replaced = false;

while (!feof($reading)) {
 $line = fgets($reading);

  if(stripos($line, $lname) !== FALSE)  {           
if(stripos($line, $fname) !== FALSE) {  
    $line = "$string";
    $replaced = true;
}       
   }

  fwrite($writing, "$line");
  //fputs($writing, $line);
 }
fclose($reading); fclose($writing);

// might as well not overwrite the file if we didn't replace anything
if ($replaced) 
{
  rename('contacts.tmp', 'contacts.txt');
} else {
 unlink('contacts.tmp');
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T19:53:25.350

您似乎有一个 csv 格式的文件。PHP 可以用 fgetcsv() [http://php.net/manual/de/function.fgetcsv.php处理这个](http://php.net/manual/de/function.fgetcsv.php)

```
if (($handle = fopen("contacts.txt", "r")) !== FALSE) {
    $data = fgetcsv($handle, 1000, '|')
    /* manipulate $data array here */
}

fclose($handle); 
```

所以你得到了一个可以操作的数组。在此之后，您可以使用 fputcsv [http://www.php.net/manual/de/function.fputcsv.php保存文件](http://www.php.net/manual/de/function.fputcsv.php)

```
$fp = fopen('contacts.tmp', 'w');

foreach ($data as $fields) {
    fputcsv($fp, $fields);
}

fclose($fp); 
```

好吧，在阿萨德的评论之后，还有另一个简单的答案。[只需在附加模式http://de3.php.net/manual/en/function.fopen.php](http://de3.php.net/manual/en/function.fopen.php)中打开文件：

```
$writing = fopen('contacts.tmp', 'a'); 
```

# java - 具有两种 O(1) 查找的数据结构。哈希表？

> ID：13314905
> 
> 赞同：6
> 
> 时间：2012-11-09T19:45:38.330
> 
> 标签：java, data-structures, hashtable, lookup

我正在实施一个系统，其中我有一个姓名列表，每个人都有 1 个电话号码。我需要能够获取姓名并查找电话号码，或者获取电话号码并查找姓名。

我知道我可以通过拥有两个哈希表来做到这一点——一个从名字到电话号码，一个从电话号码到名字。然后我可以在 O(1) 时间内朝​​任一方向查找。然而，这似乎我存储了太多数据——每个名字和每个电话号码都存储了两次。

有没有办法更有效地做到这一点？我应该使用什么数据结构来存储姓名和电话号码？

如果相关的话，我正在用 Java 编码。

非常感谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-09T19:48:38.637

Java 不提供开箱即用的双向哈希表。依赖于两个哈希表的解决方案是最好的，除非您愿意使用第三方库（它会为您隐藏两个哈希表）或重新实现`HashMap<K,V>`.

> 然后我可以在 O(1) 时间内朝​​任一方向查找。然而，这似乎我存储了太多数据——每个名字和每个电话号码都存储了两次。

不一定：您可以使用表示电话号码的相同对象，在这种情况下，电话号码将只有一个对象，其中两个引用存储在两个哈希表中。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-09T19:48:14.047

考虑使用 Guava's [`HashBiMap`](http://docs.guava-libraries.googlecode.com/git/javadoc/com/google/common/collect/HashBiMap.html)，它基本上`HashMap`是在幕后链接在一起的两个 s。另请参阅[`BiMap`](http://docs.guava-libraries.googlecode.com/git/javadoc/com/google/common/collect/BiMap.html)界面及其[相关文章](http://code.google.com/p/guava-libraries/wiki/NewCollectionTypesExplained#BiMap)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-09T19:48:24.727

1.  请记住，对象本身只存储一次，而不是在两个映射中。您只需要双倍的引用 - 所以它可能没那么糟糕。
2.  您可以使用提供该功能的 Gauva [BiMap](http://docs.guava-libraries.googlecode.com/git/javadoc/com/google/common/collect/BiMap.html)（及其接口[HashBiMap](http://docs.guava-libraries.googlecode.com/git/javadoc/com/google/common/collect/HashBiMap.html)）

# winforms - 如何以编程方式将列对象和单元格编辑器添加到 Winforms Telerik RadGridView

> ID：13314913
> 
> 赞同：0
> 
> 时间：2012-11-09T19:46:10.020
> 
> 标签：winforms, telerik, radgridview

我想以编程方式为 WinForms Telerik RadGridView 创建列和单元格编辑器（即不是通过将网格指向 DataSet 对象）。

我想创建列，为每个列分配一个字段名称，创建单元格编辑器并将它们附加到各自的列，然后将 DataTable 分配为网格的数据源，并让网格使用字段名称从中提取值DataTable 的 DefaultView 并填充列..

一个简短的例子会有所帮助。网格将包含许多时间值（不是日期时间，而是 SQL Server 2012 中的 Time(0)）。这就像一个日期无关紧要的巴士时刻表应用程序。我只需要跟踪映射到 System.TimeSpan 结构的时间。因此，如果该示例使用 TimePicker 作为单元格编辑器，那就太好了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T22:07:09.583

找到了！*MasterTemplate*是关键：[http ://www.telerik.com/help/winforms/gridview-columns-generating-columns.html](http://www.telerik.com/help/winforms/gridview-columns-generating-columns.html)

# java - Reusing the SOAP client with Axis

> ID：13314915
> 
> 赞同：3
> 
> 时间：2012-11-09T19:46:16.490
> 
> 标签：java, soap, axis

I'm using Apache Axis to make a SOAP request to a service. I noticed that sometimes, it take a couple of seconds to get a response even though the service is a simple echo for now. So I'm wondering if establishing the connection is what takes the time, even though the server does HTTP/1.1 connection keep alive.

Should somehow reuse the client between requests or if it's ok to get a new one for every request?

This is my code. Should I keep `locator` and/or `client` around between requests or is it okay to forget it?

```
MyExampleServiceLocator locator = new MyExampleServiceLocator();
MyExampleServicePort client = locator.getMyExampleServicePort(url);
MyExampleRequest request = buildMyExampleRequest();
MyExampleResponse response = client.send(request);   // This takes time sometimes 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-15T18:34:49.550

*   For complex services the cost of instantiating the locator may be high. Therefore you should always try to reuse it as much as possible. Locators are expected to be thread safe, so you can use them as singletons. Note however that in Axis 1.4 there is at least one thread safety issue regarding locators: [AXIS-2498](https://issues.apache.org/jira/browse/AXIS-2498).
*   Creating a new stub (client) is less expensive, but reusing a stub is unproblematic. They are also expected to be thread safe (at least in Axis 1.4), except for scenarios that use the stub in a stateful way (e.g. HTTP sessions).
*   Axis' default HTTP transport only supports HTTP 1.0 and creates a new connection for every request.

# android - Android错误：使用*#9900#获取日志

> ID：13314917
> 
> 赞同：5
> 
> 时间：2012-11-09T19:46:38.033
> 
> 标签：android

我面临一个有趣的问题。我的 android 应用程序在三星 Galaxy SII 或 HTC Desire 上运行良好，但在三星 Galaxy Pocket 上运行却是个大问题。有人告诉我，每次启动时，几分钟后都会显示：

对不起！- 使用 *#9900# 记录日志 - 应用程序意外关闭，请重试。

我找不到有关可能导致此问题的令人满意的答案，因此我将不胜感激！谢谢，迈克。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T19:57:28.210

据我所知，通常是内存问题，也许是缓存。你可能会发现你的星系或欲望有更多的内存或以不同的方式处理缓存、内存等。尝试清理系统，重置或重新启动，看看会发生什么

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-03T06:36:41.900

该消息很奇怪，但它只是未处理的空指针异常。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-06-19T09:08:39.117

我有同样的问题，我的笔记本电脑检测到我的手机缺少驱动程序，这就是它无法正常工作的原因，因此下载该缺少的驱动程序将解决您的问题。

# open-source - 如何更新 OJS

> ID：13314923
> 
> 赞同：3
> 
> 时间：2012-11-09T19:46:51.800
> 
> 标签：open-source, web, journal

请告诉我如何更新 OJS（开放期刊系统）。我已将它安装在共享服务器上，我无法访问 shell，只允许使用 Web 界面和控制面板（直接管理员）。我想网上肯定有一些更新按钮，但我找不到。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T21:06:21.007

最简单的方法是使用最新版本在共享主机上创建一个新文件夹。复制 config.ing.php、cache 和 public 文件夹。如果您的文件也在您的 OJS 文件夹中，请也复制它（不过，您应该将其移到 Web 可访问位置之外）。

然后，您会在管理页面中找到升级数据库的选项。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-08T14:49:25.123

*   从 OJS 网站下载并解压包
*   复制新包中提供的 config.inc.php
*   从当前的 OJS 安装中移动或复制以下文件和目录：
    *   配置文件
    *   上市/
    *   您上传的文件目录（config.inc.php 中的“files_dir”），如果它位于您的 OJS 目录中
*   将当前的 OJS 目录替换为新的 OJS 目录，将旧目录移动到安全位置作为备份
*   请务必查看 docs/release-notes/README-(version) 中发行说明的配置更改部分，了解原始版本和新版本之间的所有版本。您可能需要手动将新项目添加到 config.inc.php 文件中。

# java - org.hibernate.QueryException：预期的位置参数

> ID：13314927
> 
> 赞同：0
> 
> 时间：2012-11-09T19:47:08.203
> 
> 标签：java, hibernate, struts, hibernate-mapping, named-query

我有一个 namedQuery 通过它传递 2 个参数，如下所示，

```
ArrayList idName= new ArrayList();
     idName.add(id); --int
     idName.add(ABC); --String 
```

我将这个对象传递给namedQuery，如下所示：

```
return getHibernateTemplate().findByNamedQuery("findIDAndName", idName); 
```

我的 hbm.xml 有这个查询，

```
 <sql-query name="findIDAndName">
      <return alias="IdNamePmt" class="com.app.Grp.model.IdNamePmt"/>
      <![CDATA[select * from PMT.CSE_NME_VW where PMT_ID=? and PMT_NAME=?]]>
    </sql-query> 
```

当我运行应用程序时，出现以下错误：

```
org.hibernate.QueryException: Expected positional parameter count: 2, actual parameters: [[7, ABC]] [select * from PMT.CSE_NME_VW where PMT_ID=? and PMT_NAME=?]
    at org.hibernate.impl.AbstractQueryImpl.verifyParameters(AbstractQueryImpl.java:367)
    at org.hibernate.impl.SQLQueryImpl.verifyParameters(SQLQueryImpl.java:228)
    at org.hibernate.impl.SQLQueryImpl.list(SQLQueryImpl.java:172) 
```

我已经传递了 2 个参数，我的 'where' 子句也需要 2 个参数。怎么了？任何例子高度赞赏？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T20:39:59.447

我相信应该是

```
return getHibernateTemplate().findByNamedQuery("findIDAndName", idName.toArray()); 
```

# linux - 如果 UDP 端口在一定时间内未处于活动状态，如何解决让我的服务器自动关闭的问题？

> ID：13314938
> 
> 赞同：0
> 
> 时间：2012-11-09T19:48:08.833
> 
> 标签：linux, bash, bandwidth

我想这可能是一个奇怪的问题，但我有一个小的 EC2 实例，每个月要花一大笔钱。不过它是按小时收费的，所以我只在需要时打开这个特定实例，并在完成后关闭它。

这个实例的目的是托管一个反恐精英：全球攻势专用服务器，我只有在我有训练赛要玩时才打开它。

我没有忘记关闭它并被收取很多费用，或者有一个不智能的启动脚本要求实例在 3 小时后关闭电源，而是在考虑更智能的设计。

这是我的想法；当实例不再使用时，它会智能地自行关闭电源，方法是确定过去 10 分钟内是否没有记录 UDP 27015 上的一定数量的网络活动，在关闭电源前尝试 3 次。

这样我就可以开机，玩比赛，而不必担心关闭服务器:-)

在我脑海里听起来很酷。问题是我如何着手解决任务。我想象在 cron 的帮助下每 10 分钟执行一次 bash 脚本。

如果我在这里不是完全疯了，是否可以提供 bash-script 建议？或者也许是一个更好的解决方案，如何解决我正在进行的这个任务，通过在感应到服务器不再使用时关闭服务器电源来节省 $$！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-10T00:00:20.437

我对 EC2 实例不太熟悉，但如果它们运行某种形式的 linux... 在 Fedora 下，我可以使用**ifconfig**查看通过网络接口接收/传输了多少数据。它不仅仅是单个端口，而是该接口上的所有端口......这个数字对你来说足够了吗？每隔几分钟监控一次并查看负载何时下降应该是非常简单的......

当 EC2 实例启动并仅记录数据时，可能会启动一个简单的脚本。游戏结束一小时后，您可以获取日志，手动关闭，然后在闲暇时查看它，看看这是否有效。（令人惊讶的是有时有多少东西使用网络......）

事后思考：也许**tcpdump**会更好？它可以与 UDP 端口 27015 一起使用吗？您可能需要一些方法来使其超时，例如将其作为后台进程运行，可能使用 -c 选项，休眠一段时间，然后在 tcpdump 进程仍在运行时终止它。您可能需要通过**wc -l**进行管道传输，或者只需**grep***抓取*的最终数据包行。警告： **tcpdump**可能需要以 root 身份运行。

```
E.g. /usr/sbin/tcpdump -n -nn -q -c 100 -i eth0 port 27015 
```

进一步的事后思考：

```
#!/bin/bash --norc                             

/usr/sbin/tcpdump -n -nn -q -i eth0 port 27015 2>./logfile 1>/dev/null &
TCPDUMP_PID=$!

echo "sleeping...  pid=$TCPDUMP_PID"
sleep 30
echo "wake up"
kill $TCPDUMP_PID
sleep 2
cat ./logfile 
```

# wix - 如何使用 WiX Burn 智能安装 .NET 4.x

> ID：13314944
> 
> 赞同：18
> 
> 时间：2012-11-09T19:48:27.913
> 
> 标签：wix, windows-installer, wix3.6, bootstrapping, burn

安装可以使用 .NET 4.0 或 4.5 的应用程序时，安装必备 .NET 框架时的最佳做法是什么？以及如何在 WiX 中使用 Burn 来实现它？

这些是我知道的选项和权衡：

**选项 1：安装 .NET 4.0（正是您所需要的）**

*   优点：未知（Windows XP 除外，这是唯一的选择）

**选项 2：如果 .NET 4.5 不存在，则安装 .NET 4.5**

*   优点：用户以后不必为将来的应用安装 .NET 4.5。当用户稍后升级到 .NET 4.5 时，应用程序不会遇到 .NET 版本更改。应用程序立即获得 .NET 4.5 的性能改进。

**选项 3：仅当 .NET 4.x 都不存在时才安装 .NET 4.5**

*   优点：如果已安装 .NET 4.0，则部署速度比选项 2 快得多。如果不是，则选项 2 的优点适用。

据我所知，如果性能改进很重要，最佳实践是选项 2，如果平均部署速度很重要，最佳实践是选项 3。这听起来对吗？我错过了选项 1 的任何优势吗？最重要的是，如果选项 3 确实有意义，那么在从 Web 安装 .NET 时如何使用 Burn 来实现它？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-11-12T11:41:49.303

下面是我如何在我的包中检测 .NET。注意 DetectConditions 和 InstallConditions 的使用。DetectCondition 将检查是否安装了特定的包，而 InstallCondition 可用于覆盖 DetectCondition 以指定应安装包的时间。例如，在 XP 上您无法安装 .NET 4.5，因此我的 InstallCondition 会阻止在这种情况下进行安装。

```
<util:RegistrySearch Root="HKLM" Key="SOFTWARE\Microsoft\Net Framework Setup\NDP\v4\Full" Value="Version" Variable="Netfx4FullVersion" />
<util:RegistrySearch Root="HKLM" Key="SOFTWARE\Microsoft\Net Framework Setup\NDP\v4\Full" Value="Version" Variable="Netfx4x64FullVersion" Win64="yes" />

<!-- .NET 4.5 only installed if Vista or higher AND it's not already installed-->
<PackageGroup Id="Netfx45">
  <ExePackage Id="Netfx45" Cache="no" Compressed="yes" PerMachine="yes" Permanent="yes" Vital="yes" InstallCommand="/q"
              SourceFile="C:\Program Files\Microsoft SDKs\Windows\v7.0A\Bootstrapper\Packages\DotNetFX45Full\dotnetfx45_full_x86_x64.exe"
              DetectCondition="(Netfx4FullVersion=&quot;4.5.50709&quot;) AND (NOT VersionNT64 OR (Netfx4x64FullVersion=&quot;4.5.50709&quot;))"
              InstallCondition="(VersionNT >= v6.0 OR VersionNT64 >= v6.0) AND (NOT (Netfx4FullVersion=&quot;4.5.50709&quot; OR Netfx4x64FullVersion=&quot;4.5.50709&quot;))"/>
</PackageGroup>
<!-- .NET 4.0 only installed if XP AND it's not already installed -->
<PackageGroup Id="Netfx4Full">
  <ExePackage Id="Netfx4Full" Cache="no" Compressed="yes" PerMachine="yes" Permanent="yes" Vital="yes" InstallCommand="/q"
              SourceFile="C:\Program Files\Microsoft SDKs\Windows\v7.0A\Bootstrapper\Packages\DotNetFX40\dotNetFx40_Full_x86_x64.exe"
              DetectCondition="Netfx4FullVersion AND (NOT VersionNT64 OR Netfx4x64FullVersion)"
              InstallCondition="(VersionNT &lt; v6.0 OR VersionNT64 &lt; v6.0) AND (NOT (Netfx4FullVersion OR Netfx4x64FullVersion))"/>
</PackageGroup> 
```

然后，如果您想安装其中一个软件包，只需在您的链中引用它：

```
<Chain>
  <PackageGroupRef Id='Netfx45'/>
</Chain> 
```

关于您的具体问题，我将安装应用程序测试过的任何框架版本。如果同时针对 .NET 4.0 和 .NET 4.5 进行测试，我想这是一个判断调用，但是我会尽量简化设置体验。因此，如果 .NET 4.0 已经安装并且应用程序不需要 .NET 4.5，我不会安装它。

此外，如果您使用的是自定义托管引导程序应用程序，选项 2 也有一个缺点。假设您安装了 .NET 4.0，并且您的托管引导程序需要 .NET 4.0（或更高版本）。当您运行安装程序时，它将安装替换 .NET 4.0 的 .NET 4.5，强制安装程序在中途重新启动，因为它在更新的同时使用 .NET 框架。同样，如果您使用自己的自定义托管引导程序，这只是一个问题。

# c# - 当应用程序使用对 Environment.FailFast 的调用退出时，会显示未知的硬错误消息

> ID：13314945
> 
> 赞同：2
> 
> 时间：2012-11-09T19:48:29.183
> 
> 标签：c#, .net, termination

我们有一个 C# 应用程序，它连接到 AppDomain.UnhandlerExceptions 并侦听应用程序中任何未处理的异常。一旦出现未处理的异常，它就会向用户显示一条错误消息，并通过调用 Environment.FailFast 来终止应用程序。

问题是在某些机器上，这会导致向用户显示“未知硬错误”消息，并且应用程序在我们单击“确定”之前不会退出。

操作系统是带有 .NET 4 应用程序的 Windows 7 x64。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-09T19:48:29.183

我们联系了微软，结果发现这是因为Windows 机器上的**Windows 错误报告服务**被禁用。

调用流程是这样的：

1.  应用程序通过调用 Environment.FailFast 自行终止。
2.  CLR 检查是否有任何调试器已注册来处理异常。如果注册了调试器，则异常由调试器处理。
3.  如果没有调试器，CLR 会尝试将异常传递给操作系统。它尝试启动*Windows 错误报告服务*并将异常传递给它。
4.  万一它无法启动*Windows 错误报告服务*，它会在内核中排队一个未知的硬错误，并向用户显示未知的硬错误消息。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2020-02-06T09:50:36.840

进行这些更改后为我解决了问题！可能是 DLL 问题，在开始编译之前一定要检查。1.check platform target 应该是 x64 的 debug 或者 Release 模式。2.然后保存并开始调试，最好在代码中尝试和捕获，这是一个很好的做法

# java - Hibernate JDBCConnection 无法打开与 H2 数据库的连接错误

> ID：13314950
> 
> 赞同：2
> 
> 时间：2012-11-09T19:48:39.637
> 
> 标签：java, hibernate, jdbc, junit

我是 Java 和企业开发的新手，目前我正在尝试通过使用 H2 创建内存数据库来实现一些包含*Hibernate的 JUnit 测试。*

我在[网上](http://blog.schauderhaft.de/2011/03/13/testing-databases-with-junit-and-hibernate-part-1-one-to-rule-them/)找到了一个处理这个的教程，并集成了一些代码。我感觉以下代码可能是我看到的特定错误的原因：

> org.hibernate.exception.JDBCConnectionException：无法打开连接

```
 private SessionFactory createSessionFactory() 
    {
        AnnotationConfiguration configuration = new AnnotationConfiguration();
        configuration.addAnnotatedClass(Facility.class);
        configuration.setProperty("hibernate.dialect", "org.hibernate.dialect.H2Dialect");
        configuration.setProperty("hibernate.connection.driver_class", "org.h2.Driver");
        configuration.setProperty("hibernate.connection.url", "jdbc:h2:mem");
        configuration.setProperty("hibernate.hbm2ddl.auto", "create");

        SessionFactory sessionFactory = configuration.buildSessionFactory();
        return sessionFactory;  
    } 
```

我已经下载了 H2 并将 JAR 添加到我的构建路径中，并且我知道 Hibernate 配置正确，因为当我使用我们已经设置的开发数据库运行 Junit 测试时，测试成功执行而没有任何连接错误。其配置文件位于名为 hibernate.properties 的单独文件中，包括以下内容：

```
 hibernate.connection.datasource=java:/jdbc/mysql
 hibernate.dialect=org.hibernate.dialect.MySQLDialect
 hibernate.cache.use_second_level_cache=false
 hibernate.cache.use_query_cache=false 
```

有谁知道可能导致此错误的原因是什么？

这是我的第一篇文章，所以如果有人需要更多信息或澄清，请告诉我。

谢谢！

**编辑：**

这是堆栈跟踪

```
 java.sql.SQLException: No suitable driver found for jdbc:h2:mem
    at java.sql.DriverManager.getConnection(Unknown Source)
    at java.sql.DriverManager.getConnection(Unknown Source)
    at org.hibernate.connection.DriverManagerConnectionProvider.getConnection(DriverManagerConnectionProvider.java:133)
    at org.hibernate.tool.hbm2ddl.SuppliedConnectionProviderConnectionHelper.prepare(SuppliedConnectionProviderConnectionHelper.java:51)
    at org.hibernate.tool.hbm2ddl.SchemaExport.execute(SchemaExport.java:252)
    at org.hibernate.tool.hbm2ddl.SchemaExport.create(SchemaExport.java:211)
    at org.hibernate.impl.SessionFactoryImpl.<init>(SessionFactoryImpl.java:343)
    at org.hibernate.cfg.Configuration.buildSessionFactory(Configuration.java:1327)
    at org.hibernate.cfg.AnnotationConfiguration.buildSessionFactory(AnnotationConfiguration.java:867)
    at com.cmt.test.SessionFactoryRule.createSessionFactory(SessionFactoryRule.java:73)
    at com.cmt.test.SessionFactoryRule.access$0(SessionFactoryRule.java:64)
    at com.cmt.test.SessionFactoryRule$1.evaluate(SessionFactoryRule.java:26)
    at org.junit.runners.BlockJUnit4ClassRunner.runNotIgnored(BlockJUnit4ClassRunner.java:79)
    at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:71)
    at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:49)
    at org.junit.runners.ParentRunner$3.run(ParentRunner.java:193)
    at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:52)
    at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:191)
    at org.junit.runners.ParentRunner.access$000(ParentRunner.java:42)
    at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:184)
    at org.junit.runners.ParentRunner.run(ParentRunner.java:236)
    at org.junit.runners.Suite.runChild(Suite.java:128)
    at org.junit.runners.Suite.runChild(Suite.java:24)
    at org.junit.runners.ParentRunner$3.run(ParentRunner.java:193)
    at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:52)
    at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:191)
    at org.junit.runners.ParentRunner.access$000(ParentRunner.java:42)
    at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:184)
    at org.junit.runners.ParentRunner.run(ParentRunner.java:236)
    at org.junit.runners.Suite.runChild(Suite.java:128)
    at org.junit.runners.Suite.runChild(Suite.java:24)
    at org.junit.runners.ParentRunner$3.run(ParentRunner.java:193)
    at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:52)
    at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:191)
    at org.junit.runners.ParentRunner.access$000(ParentRunner.java:42)
    at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:184)
    at org.junit.runners.ParentRunner.run(ParentRunner.java:236)
    at org.junit.runner.JUnitCore.run(JUnitCore.java:157)
    at org.junit.runner.JUnitCore.run(JUnitCore.java:136)
    at org.junit.runner.JUnitCore.run(JUnitCore.java:117)
    at com.cmt.test.TestRunner.runTest(TestRunner.java:57)
    at com.cmt.test.bean.TestBean.runTestCase(TestBean.java:73)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
    at org.apache.el.parser.AstValue.invoke(AstValue.java:170)
    at org.apache.el.MethodExpressionImpl.invoke(MethodExpressionImpl.java:276)
    at javax.faces.event.MethodExpressionActionListener.processAction(MethodExpressionActionListener.java:153)
    at javax.faces.event.ActionEvent.processListener(ActionEvent.java:88)
    at javax.faces.component.UIComponentBase.broadcast(UIComponentBase.java:769)
    at javax.faces.component.UICommand.broadcast(UICommand.java:300)
    at javax.faces.component.UIData.broadcast(UIData.java:1092)
    at javax.faces.component.UIViewRoot.broadcastEvents(UIViewRoot.java:791)
    at javax.faces.component.UIViewRoot.processApplication(UIViewRoot.java:1256)
    at com.sun.faces.lifecycle.InvokeApplicationPhase.execute(InvokeApplicationPhase.java:81)
    at com.sun.faces.lifecycle.Phase.doPhase(Phase.java:101)
    at com.sun.faces.lifecycle.LifecycleImpl.execute(LifecycleImpl.java:118)
    at javax.faces.webapp.FacesServlet.service(FacesServlet.java:593)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:290)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
    at org.jboss.web.tomcat.filters.ReplyHeaderFilter.doFilter(ReplyHeaderFilter.java:96)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:235)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:191)
    at org.jboss.web.tomcat.security.SecurityAssociationValve.invoke(SecurityAssociationValve.java:190)
    at org.jboss.web.tomcat.security.JaccContextValve.invoke(JaccContextValve.java:92)
    at org.jboss.web.tomcat.security.SecurityContextEstablishmentValve.process(SecurityContextEstablishmentValve.java:126)
    at org.jboss.web.tomcat.security.SecurityContextEstablishmentValve.invoke(SecurityContextEstablishmentValve.java:70)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:127)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102)
    at org.jboss.web.tomcat.service.jca.CachedConnectionValve.invoke(CachedConnectionValve.java:158)
    at org.apache.catalina.authenticator.SingleSignOn.invoke(SingleSignOn.java:383)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:330)
    at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:829)
    at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:598)
    at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:447)
    at java.lang.Thread.run(Unknown Source)
14:12:12,044 WARN  [JDBCExceptionReporter] SQL Error: 0, SQLState: 08001
14:12:12,044 ERROR [JDBCExceptionReporter] No suitable driver found for jdbc:h2:mem
14:12:12,046 INFO  [STDOUT] DEBUG - Failure :  
    Cannot open connection 
    CreateFacility(com.cmt.test.memory.InMemoryTest) 
    org.hibernate.exception.JDBCConnectionException: Cannot open connection
    at org.hibernate.exception.SQLStateConverter.convert(SQLStateConverter.java:97)
    at org.hibernate.exception.JDBCExceptionHelper.convert(JDBCExceptionHelper.java:66)
    at org.hibernate.exception.JDBCExceptionHelper.convert(JDBCExceptionHelper.java:52)
    at org.hibernate.jdbc.ConnectionManager.openConnection(ConnectionManager.java:449)
    at org.hibernate.jdbc.ConnectionManager.getConnection(ConnectionManager.java:167)
    at org.hibernate.jdbc.JDBCContext.connection(JDBCContext.java:142)
    at org.hibernate.transaction.JDBCTransaction.begin(JDBCTransaction.java:85)
    at org.hibernate.impl.SessionImpl.beginTransaction(SessionImpl.java:1353)
    at com.cmt.test.SessionFactoryRule.beginTransaction(SessionFactoryRule.java:89)
    at com.cmt.test.SessionFactoryRule$1.evaluate(SessionFactoryRule.java:28)
    at org.junit.runners.BlockJUnit4ClassRunner.runNotIgnored(BlockJUnit4ClassRunner.java:79)
    at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:71)
    at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:49)
    at org.junit.runners.ParentRunner$3.run(ParentRunner.java:193)
    at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:52)
    at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:191)
    at org.junit.runners.ParentRunner.access$000(ParentRunner.java:42)
    at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:184)
    at org.junit.runners.ParentRunner.run(ParentRunner.java:236)
    at org.junit.runners.Suite.runChild(Suite.java:128)
    at org.junit.runners.Suite.runChild(Suite.java:24)
    at org.junit.runners.ParentRunner$3.run(ParentRunner.java:193)
    at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:52)
    at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:191)
    at org.junit.runners.ParentRunner.access$000(ParentRunner.java:42)
    at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:184)
    at org.junit.runners.ParentRunner.run(ParentRunner.java:236)
    at org.junit.runners.Suite.runChild(Suite.java:128)
    at org.junit.runners.Suite.runChild(Suite.java:24)
    at org.junit.runners.ParentRunner$3.run(ParentRunner.java:193)
    at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:52)
    at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:191)
    at org.junit.runners.ParentRunner.access$000(ParentRunner.java:42)
    at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:184)
    at org.junit.runners.ParentRunner.run(ParentRunner.java:236)
    at org.junit.runner.JUnitCore.run(JUnitCore.java:157)
    at org.junit.runner.JUnitCore.run(JUnitCore.java:136)
    at org.junit.runner.JUnitCore.run(JUnitCore.java:117)
    at com.cmt.test.TestRunner.runTest(TestRunner.java:57)
    at com.cmt.test.bean.TestBean.runTestCase(TestBean.java:73)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
    at org.apache.el.parser.AstValue.invoke(AstValue.java:170)
    at org.apache.el.MethodExpressionImpl.invoke(MethodExpressionImpl.java:276)
    at javax.faces.event.MethodExpressionActionListener.processAction(MethodExpressionActionListener.java:153)
    at javax.faces.event.ActionEvent.processListener(ActionEvent.java:88)
    at javax.faces.component.UIComponentBase.broadcast(UIComponentBase.java:769)
    at javax.faces.component.UICommand.broadcast(UICommand.java:300)
    at javax.faces.component.UIData.broadcast(UIData.java:1092)
    at javax.faces.component.UIViewRoot.broadcastEvents(UIViewRoot.java:791)
    at javax.faces.component.UIViewRoot.processApplication(UIViewRoot.java:1256)
    at com.sun.faces.lifecycle.InvokeApplicationPhase.execute(InvokeApplicationPhase.java:81)
    at com.sun.faces.lifecycle.Phase.doPhase(Phase.java:101)
    at com.sun.faces.lifecycle.LifecycleImpl.execute(LifecycleImpl.java:118)
    at javax.faces.webapp.FacesServlet.service(FacesServlet.java:593)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:290)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
    at org.jboss.web.tomcat.filters.ReplyHeaderFilter.doFilter(ReplyHeaderFilter.java:96)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:235)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:191)
    at org.jboss.web.tomcat.security.SecurityAssociationValve.invoke(SecurityAssociationValve.java:190)
    at org.jboss.web.tomcat.security.JaccContextValve.invoke(JaccContextValve.java:92)
    at org.jboss.web.tomcat.security.SecurityContextEstablishmentValve.process(SecurityContextEstablishmentValve.java:126)
    at org.jboss.web.tomcat.security.SecurityContextEstablishmentValve.invoke(SecurityContextEstablishmentValve.java:70)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:127)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102)
    at org.jboss.web.tomcat.service.jca.CachedConnectionValve.invoke(CachedConnectionValve.java:158)
    at org.apache.catalina.authenticator.SingleSignOn.invoke(SingleSignOn.java:383)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:330)
    at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:829)
    at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:598)
    at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:447)
    at java.lang.Thread.run(Unknown Source)
Caused by: java.sql.SQLException: No suitable driver found for jdbc:h2:mem
    at java.sql.DriverManager.getConnection(Unknown Source)
    at java.sql.DriverManager.getConnection(Unknown Source)
    at org.hibernate.connection.DriverManagerConnectionProvider.getConnection(DriverManagerConnectionProvider.java:133)
    at org.hibernate.jdbc.ConnectionManager.openConnection(ConnectionManager.java:446)
    ... 74 more

    CreateFacility(com.cmt.test.memory.InMemoryTest) 
    Cannot open connection 
    org.hibernate.exception.JDBCConnectionException: Cannot open connection 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T21:51:37.613

看起来驱动程序没有正确注册。尝试在创建会话工厂方法的开头调用它：

```
Class.forName("org.h2.Driver"); 
```

或者

```
DriverManager.getConnection("jdbc:h2:mem:", "sa", ""); 
```

我们也在使用 H2 进行单元测试，并做一些调用后者的预初始化工作——这会（隐式地）注册驱动程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T21:39:46.420

既然你刚刚开始，我建议从简单开始。使用如下所示的 main 方法创建一个类。如果你运行它并且你没有看到系统输出，那么 H2 驱动程序不在你的类路径中。如果可行，请了解如何将连接参数应用于 Hibernate 配置。

```
public static void main(String[] a) throws Exception {
    Class.forName("org.h2.Driver");
    Connection conn = DriverManager.getConnection("jdbc:h2:mem:", "sa", "");
    System.out.println("woohoo!  connected.");
    conn.close();
} 
```

# c# - 从键值对插入数据库表

> ID：13314955
> 
> 赞同：0
> 
> 时间：2012-11-09T19:48:58.020
> 
> 标签：c#, key-value

尝试将列表中的值与键值对中的键匹配，并从键值对中检索相应的值并用作 sql 参数，在我的示例中是 @ValueDE。

```
foreach (KeyValuePair<int,string> kvp in Valuedescripts)
{
    int val = kvp.Key;
    string descrip = kvp.Value;

    foreach (DataUds data in DataUds)
    {
        using (DB2Connection sqlconn = new DB2Connection())
        {
            sqlconn.Open();

            DB2Command cmdtx = new DB2Command();

            string insert = @"INSERT into LNPY (LN_NR, ITEM_NAME, MR_NR, VALUE)
                            VALUES (@LN, @Nbr, @Val, @ValueDE)";
            cmdtx.Parameters.Add("@Nbr", data.MN);
            cmdtx.Parameters.Add("@Ln", data.LN);
            cmdtx.Parameters.Add("@Val",data.item); 
```

我如何获得这个参数？Cmdtx.Parameters.Add("@valueDE", ????

Data.item 来自一个列表，我需要使用此值将其设置为等于 val (kvp.key) 并检索相应的描述并将其作为参数填充

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T20:12:54.973

我不确定您到底在做什么，除了您需要 keyvaluepair 中的值用作插入查询中的参数这一点。我猜你很接近了。

```
foreach (KeyValuePair<int,string> kvp in Valuedescripts)
{
    int val = kvp.Key;
    string descrip = kvp.Value;

    foreach (DataUds data in DataUds)
    {
        //something like
        if (descrip == data.item) //only u know it
        {
            using (DB2Connection sqlconn = new DB2Connection())
            {
                sqlconn.Open();

                DB2Command cmdtx = new DB2Command();

                string insert = @"INSERT into LNPY (LN_NR, ITEM_NAME, MR_NR, VALUE)
                                  VALUES (@LN, @Nbr, @Val, @ValueDE)";
                cmdtx.Parameters.Add("@Nbr", data.MN);
                cmdtx.Parameters.Add("@Ln", data.LN);
                cmdtx.Parameters.Add("@Val",data.item);
                cmdtx.Parameters.Add("@ValueDE", val);
             }

             break; //again only u know it. Will be good if you have only item to match
        }  
    }
} 
```

此外，不要以这种方式将对象列表插入到 db 中，这比使用`VALUES (...), (....), (......`语法的批量插入要慢得多。您应该遍历 foreachs 以实际构建查询..

# wordpress - 使用 jQuery Masonry 设置 Wordpress（显示类型错误）

> ID：13314957
> 
> 赞同：1
> 
> 时间：2012-11-09T19:49:25.123
> 
> 标签：wordpress, jquery-plugins, jquery-masonry

我正在使用一个子 Wordpress 主题（Blanco）并尝试使用 jQuery Masonry 制作一个图片库页面，除了 masonry 功能似乎不起作用，一切看起来就像它是浮动的。列有垂直间隙。FireBug 还检测到一个错误。`TypeError: $("#pincontainer").masonry is not a function` 画廊位于：[www.christaalexandra.com/gallerie/](http://www.christaalexandra.com/gallerie/)

我的标题中有以下代码：

```
<?php wp_enqueue_script('jquery'); ?>
<?php wp_head(); ?>

<script src="//ajax.googleapis.com/ajax/libs/jquery/1.6.1/jquery.min.js"></script>
<script src="/js/jquery.masonry.min.js"></script>

<script language="javascript" type="text/javascript">  
// This line tells the script to run after the page is loaded,
// As well as allows you to use the `$` function within the script
jQuery(function($) {  
    $('#pincontainer').masonry({
        itemSelector: '.pin-gallery', 
    });
});
</script> 
```

我的样式表中有以下 CSS：

```
#pincontainer{
margin:0 auto;
margin-top:50px;

}
.pin-gallery{
  width: 220px;
  margin: 10px;
  float: left;
} 
```

我的图库页面具有以下 HTML：

```
<div id="pincontainer">
<div class="pin-gallery"><img src="/wp-content/uploads/2012/11/baby_shower_invitation_rocket_baby_spaceship_thank_you_card_stars_1.jpg" alt="" /></div>
<div class="pin-gallery"><img src="/wp-content/uploads/2012/11/black_and_white_inspiration_wedding_invitations.jpg" alt="" /></div>
<div class="pin-gallery"><img src="/wp-content/uploads/2012/11/blue_rope_ship__ocean_nautical_baby_shower_invitation_thank_you_card_4.jpg"  alt="" /></div>
...(more div's here)...

</div>
<!--End Container--> 
```

为什么我的画廊堆叠不正确？JS 文件存在于我的子模板的 JS 文件夹中，它应该在其他地方吗？我花了几个小时研究这个，感觉好像我已经检查并仔细检查了潜在的问题，但我处于初学者水平，所以它可能是非常明显的。非常感谢您的帮助，在此先感谢您！

# algorithm - 在图像上寻找十字架

> ID：13314968
> 
> 赞同：7
> 
> 时间：2012-11-09T19:50:12.953
> 
> 标签：algorithm, image-processing, opencv

我有一组二进制图像，我需要在其上找到十字架（附上示例）。我使用 findcontours 从二进制图像中提取边框。但我不明白如何确定这个形状（边界）是否交叉？也许opencv有一些内置的方法，可以帮助解决这个问题。我想用机器学习来解决这个问题，但我认为有一种更简单的方法可以做到这一点。谢谢！

![在二值图像上交叉](../Images/c6a7085959e8943e34c87ca1cb01b48b.png)

![在二值图像上交叉 2](../Images/37841afbb381f7a183a951ee9b6ff8ab.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T21:00:53.130

[Viola-Jones 对象检测](http://en.wikipedia.org/wiki/Viola%E2%80%93Jones_object_detection_framework)可能是一个好的开始。尽管该算法 (AFAIK) 的主要用途是人脸检测，但它实际上是为任何对象检测而设计的，例如你的十字架。

该算法是基于机器学习的算法（因此，您将需要一组分类的“交叉”和一组分类的“非交叉”），并且您需要识别有助于识别的重要“特征”（模式）算法识别十字架。

该算法在 OpenCV 中实现为`cvHaarDetectObjects()`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-12T14:20:20.467

从原始图像中，假设您已经提取了可能成为您的十字架的多边形集。假设所有的十字架都是可见的，在某种程度上所有的边都可以被区分为有长度，你可以尝试以下方法。

*   拒绝所有没有形成多边形所需的恰好 12 个顶点的多边形。

*   重新排序顶点，使最短的边长在前。

*   创建一个最适合的[透视变换](http://en.wikipedia.org/wiki/3D_projection)，将你的顶点映射到一个统一大小的十字上

*   检查使用此变换生成的残差，将您的十字投影回均匀十字上，其中任何给定点的残差是投影点与相应均匀点之间的距离。

*   如果所有残差都在您定义的容差范围内，则您已找到交叉。

请注意，这主要是由于您正在搜索的几何形状的简单性。您的轮廓还需要去除噪声才能使其正常工作，例如，十字内的每条线都需要转换为一条简单的线。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-10T02:23:05.030

根据您的要求，您可以尝试一些本地特征检测器，如[SIFT](http://en.wikipedia.org/wiki/Scale-invariant_feature_transform)或[SURF](http://en.wikipedia.org/wiki/SURF)。检查[OpenSURF](http://www.chrisevansdev.com/computer-vision-opensurf.html)，这是后者的一个有趣实现。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-12T13:38:07.477

经过几天的努力，我得出一个结论，这里唯一可靠的方法是使用 SVM + HOG。就这样。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-15T05:57:24.540

您可以侵蚀每个斑点并分析它们的像素数量正在下降。无论十字的旋转缩放比例如何，它们都应该始终以相同的比例下降，除非您关闭剩余的中心。同样，当 blob 足够小时，您应该期望它位于原始 blob 的中心。您不需要任何机器学习算法或训练数据来解决这个问题。

# android - Android的主要活动仍然是旧的。怎么设置新的？

> ID：13314969
> 
> 赞同：1
> 
> 时间：2012-11-09T19:50:16.323
> 
> 标签：android, android-activity, android-manifest, main

我正在努力学习安卓。

我只有 Splash.Java 和 MainActivity.Java 类。

在 Splash.Java 之前是我的应用程序的启动操作。现在我想把它改成 MainActivity.Java。

这是我所做的：

```
<application android:icon="@drawable/ic_launcher" android:label="@string/app_name" android:theme="@style/AppTheme">
<activity android:name=".MainActivity" android:label="@string/title_activity_main">            
        <intent-filter>
          <action android:name="android.intent.action.MAIN" />
          <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
    <activity android:name=".Splash" android:label="@string/title_activity_main">
        <intent-filter>
            <action android:name="com.example.anddappp.SPLASH" />
            <category android:name="com.example.anddappp.DEFAULT" />
        </intent-filter>
    </activity>
</application> 
```

我清理了我的项目，我没有在 Eclipse 中使用“运行以前启动的应用程序”。但应用程序仍然以 Splash.JAVA 开头。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T20:57:44.830

“在运行配置中检查选择了哪个活动。” 这样 android，或者在这种情况下，eclipse 知道你从哪个活动开始。

将来，如果您知道其中一个问题的答案，请随时自行回答。您将能够在八小时内接受自己的答案。

感谢 shashank Kane 提供答案

# teamcity - TeamCity 数据库为空或不存在。信息。数据库确实存在

> ID：13314974
> 
> 赞同：3
> 
> 时间：2012-11-09T19:50:43.530
> 
> 标签：teamcity

在服务器用完磁盘空间后，因为 TeamCity 在系统/消息文件夹的 CH 子文件夹中创建了一个 > 5GB 的巨大文件，我删除了整个 CH 子文件夹以释放磁盘空间

重启TC服务后，网页出现如下信息。

> TeamCity 数据库为空或不存在。如果继续，将创建一个新的空数据库。

该文件夹中的所有文件，除了已删除的 CH 文件夹外，均完好无损。

有没有办法让 TeamCity 在不丢失当前数据库的情况下工作？

# jquery - jFeed 同源策略

> ID：13314975
> 
> 赞同：2
> 
> 时间：2012-11-09T19:50:46.230
> 
> 标签：jquery, ajax, json, same-origin-policy, jfeed

我正在尝试为我使用 jQuery jFeed 和同源策略找到一种解决方法。我正在尝试使用 jFeed 解析托管在同一域上的 wordpress xml 提要。这就是我的代码的设置方式：

```
jQuery.getFeed({
url: 'http://mydomain.com/blog/feed',
    success: function(feed) {
        alert('success');
        }
        jQuery('#News').append(html);
    }
}); 
```

尽管我无法找到解决相同来源策略的方法，但我的代码是有效的。这是我第一次遇到和听说这个&我没有使用 JSON 和 Ajax 的经验，如果有人可以帮助我解决这个问题，我会非常感激。

杰克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T20:09:38.703

您可以使用[jsonp](http://json-p.org/)或非常酷的库[easyxdm绕过相同的源策略](http://easyxdm.net/wp/)

# javascript - 隐藏时将窗口宽度传递给 iosSlider

> ID：13314978
> 
> 赞同：0
> 
> 时间：2012-11-09T19:50:51.970
> 
> 标签：javascript, jquery, html

我正在制作一个使用 iosSlider 插件的网站。我在 jquery 手风琴内有一些滑块，因此其中一些在页面首次加载时开始显示“显示：无”。结果，手风琴内的滑块没有获得正确的屏幕宽度。当您打开其中一个隐藏的手风琴时，里面的滑块很小。

我很好奇是否有比我目前使用的更好的方法来解决这个问题。现在我只是破坏滑块并召回它，但这看起来很难看，我相信可能有更好的方法来解决这个问题。

任何输入都会很棒，谢谢

当前代码：

```
 $(".acheader").click(function(e) {
            //e.preventDefault();
            e.stopPropagation();
            acords.slideUp();
            $(".menuarrow").attr('src','/themes/images/arrow_down.png');

            var image = $(this).find(".menuarrow");

            if(image.attr('src') === "/themes/images/arrow_down.png"){
                image.attr('src','/themes/images/arrow_up.png');
            }

            if ($(this).next().is(":hidden")) {
                $(this).siblings(".accontent").slideToggle(100);
                $('.iosSlider2').iosSlider('destroy');
                $('.iosSlider2').iosSlider({
                    snapToChildren: true,
                    desktopClickDrag: true,
                    keyboardControls: true,
                    navNextSelector: $('.next'),
                    navPrevSelector: $('.prev'),
                    onSlideChange: slideChange2
                });
            }
            else image.attr('src','/themes/images/arrow_down.png');
        }); 
```

编辑：这是针对移动网站的，因此我没有可以参考的静态宽度。滑块父母从他们的父母那里继承他们的宽度......等等。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T19:58:56.927

查看 iosSlider 文档，在公共方法下，看起来有一个更新命令应该调整它的大小。使用`$('.iosSlider2').iosSlider('update');`而不是破坏。这有帮助吗？

# java - Java中高效实用的洪水填充算法？

> ID：13314980
> 
> 赞同：0
> 
> 时间：2012-11-09T19:51:04.387
> 
> 标签：java, algorithm, graphics, flood-fill

我需要一个在 Java中使用`BufferedImage`和使用的洪水填充算法。`Graphics2D`我不需要该算法的简单递归（DFS）或队列（BFS）版本，因为它们不切实际。我需要使用扫描线法或任何其他方法的该算法的高效、实用且可销售的版本。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T20:11:58.483

似乎您不是第一个：[使用堆栈进行洪水填充，](https://stackoverflow.com/questions/2783204/flood-fill-using-a-stack) 但是他们的解决方案适用于队列。但是标记为正确的，应该可以工作，以防您找不到更有效的方法。

# c# - 从用户控件访问公共方法

> ID：13314982
> 
> 赞同：0
> 
> 时间：2012-11-09T19:51:08.617
> 
> 标签：c#, asp.net, user-controls

我有一个使用这个简单公共方法的用户控件：

```
public void appendHtml(string html)
{
    txtTinyMce.InnerText += html;
} 
```

在包含此控件的页面中，我在页面的标记中指定了它，如下所示：

```
<QuickBuck:TinyMCE runat="server" ID="tinyMCE" /> 
```

当我打电话时`tinyMCE.appendHtml`，它没有找到它。我究竟做错了什么？

# windows - GWT 导致 Eclipse 无法在 Windows XP 上启动

> ID：13314984
> 
> 赞同：2
> 
> 时间：2012-11-09T19:51:14.340
> 
> 标签：windows, eclipse, gwt

单击 eclipse 会导致启动屏幕显示，然后应用程序被静默杀死，没有错误消息。.log 文件包含以下信息（汇总）

```
!ENTRY org.eclipse.ui 4 4 2012-11-09 11:33:45.323
!MESSAGE Class load Failure: 'com.google.gdt.eclipse.login.ui.LoginTrimContribution'

!ENTRY org.eclipse.ui 4 0 2012-11-09 11:33:45.323
!MESSAGE Class load Failure: 'com.google.gdt.eclipse.login.ui.LoginTrimContribution'
!STACK 1
org.eclipse.core.runtime.CoreException: Plug-in "com.google.gdt.eclipse.login" was 

unable to instantiate class "com.google.gdt.eclipse.login.ui.LoginTrimContribution".

Caused by: java.lang.ExceptionInInitializerError
    at com.google.gdt.eclipse.login.ui.LoginTrimContribution.<init>(LoginTrimContribution.java:129)
    ...
org.eclipse.core.internal.registry.osgi.RegistryStrategyOSGI.createExecutableExtension(RegistryStrategyOSGI.java:184)
    ... 51 more
Caused by: java.lang.NullPointerException
    at com.google.common.base.Preconditions.checkNotNull(Preconditions.java:187)
    at com.google.api.client.auth.oauth2.draft10.AccessProtectedResource.<init>(AccessProtectedResource.java:184)
    at com.google.api.client.googleapis.auth.oauth2.draft10.GoogleAccessProtectedResource.<init>(GoogleAccessProtectedResource.java:87)
    at com.google.gdt.eclipse.login.GoogleLogin.loadLogin(GoogleLogin.java:628)
    at com.google.gdt.eclipse.login.GoogleLogin.<clinit>(GoogleLogin.java:98) 
```

以及围绕 com.google.gdt.eclipse.login 的一堆其他错误消息

谷歌搜索没有任何关于 eclipse.login 的信息。该包不在 .metadata/.plugins 目录中，删除其他谷歌包或 .properties 什么也没做。

希望有人以前遇到过这种情况并且可以解决。除了我在几周内没有启动之外，在此错误发生之前，系统、eclipse 或 Java 没有任何重大变化。

Eclipse EE 靛蓝

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-12T18:02:49.373

在 Eclipse 软件插件文件夹中，我发现 com.google.gdt.eclipse.login 包文件的文件名末尾附加了一个版本号，例如 3.03_v1 等。我将其重命名为 com.google.gdt。 eclipse.login.jar 和 eclipse 启动。

我不确定文件名是如何更改的，以及为什么它突然停止工作，但这解决了问题。

# c# - 应用程序正在发送 mm/dd/yyyy 但 SQL Server 期待 dd/mm/yyyy 问题

> ID：13314985
> 
> 赞同：1
> 
> 时间：2012-11-09T19:51:22.670
> 
> 标签：c#, asp.net, sql-server

我在一个旧的 .NET 2.0 网站上工作，该网站在日期搜索方面存在问题。

经过几个小时的故障排除后，我得出的结论是，正在发送的搜索参数是一种`MM/DD/YYYY`格式，并且 SQL Server 正在等待`DD/MM/YYYY`

我不知道如何解决这个问题。

我尝试使用 ( `.ToString("dd/MM/yyyy")`) 将其转换为字符串，然后再转换为`DateTime`. 这不起作用，因为它必须是可空的`DateTime`

> CS1502：最佳重载方法匹配 'TableAdapters.Artist_ListTableAdapter.GetData(int, System.DateTime?, System.DateTime?, int?, int?, bool?, string, string, string, int?, int?, int? , int?, int?, out int?)' 有一些无效参数

现在我对 SQL Server 存储过程不太了解，所以我不知道如何查看该`GetData`函数......当我右键单击并转到定义时，我得到一个生成的 c# 页面。

有什么帮助吗？

编辑：@BigM 不确定这是否会有所帮助，但是：

变量声明：

```
public DataTable dtArtist = new DataTable();
public string cp_basePath;
public int pagecount;
int CultureId ;
DateTime? startDate;
DateTime? endDate;
int? disciplineId = null;
int? minimumGradelevel = null;
int? maximumGradelevel = null;
int? languageId = null;
bool? isFeatured = null;
int? educationalInitiativeId = null;
string EducationalInitiativeIds = string.Empty;
string sortColumnName = string.Empty;
string searchCriteria = string.Empty; 
```

从查询字符串中获取：

```
private void GetQueryStrings()
{
    CultureId = objGeneralLayer.plCultureId;
    if (Request.QueryString["StartDate"] != null)
        startDate = Convert.ToDateTime(Request.QueryString["StartDate"].ToString(), CultureInfo.InvariantCulture);
    if (Request.QueryString["EndDate"] != null)
        endDate = Convert.ToDateTime(Request.QueryString["EndDate"].ToString(), CultureInfo.InvariantCulture);
    if (Request.QueryString["DisciplineId"] != null)
        disciplineId = Convert.ToInt32(Request.QueryString["DisciplineId"].ToString());
    if (Request.QueryString["MinGrade"] != null)
        minimumGradelevel = Convert.ToInt32(Request.QueryString["MinGrade"].ToString());
    if (Request.QueryString["MaxGrade"] != null)
        maximumGradelevel = Convert.ToInt32(Request.QueryString["MaxGrade"].ToString());
    if (Request.QueryString["LanguageId"] != null)
        languageId = Convert.ToInt32(Request.QueryString["LanguageId"].ToString());
    if (Request.QueryString["Featured"] != null)
        isFeatured = Convert.ToBoolean(Request.QueryString["Featured"].ToString());
    if (Request.QueryString["EducatIds"] != null)
        EducationalInitiativeIds = Request.QueryString["EducatIds"].ToString();
    if (Request.QueryString["Criteria"] != null)
        searchCriteria = Request.QueryString["Criteria"].ToString();
} 
```

然后在代码中：

```
dtArtist = objArtistLayer.getArtistList(CultureId,startDate, endDate, disciplineId, languageId, minimumGradelevel, maximumGradelevel, isFeatured, sortColumnName, searchCriteria, EducationalInitiativeIds, Stakeholder, currPage, pageSize, out rowCount); 
```

然后稍后：

```
public DataTable getArtistList( int CultureId ,
                                DateTime? StartDate
                                ,DateTime? EndDate
                                ,int? DisciplineId
                                ,int? LanguageId
                                ,int? MinimumGradeLevel
                                ,int? MaximumGradeLevel
                                ,bool? IsFeature
                                ,string ColumnName
                                ,string Criteria
                                ,string EducationalInitiativeIds
                                ,int ? StakeholderId
                                ,int StartPage   
                                ,int PageSize   
                                ,out int RowCount   
                                )
{
    int? count = 0;
    StartDate = Convert.ToDateTime(StartDate);
    DataTable dt = new DataTable();
    TableAdapters.Artist_ListTableAdapter ada = new TableAdapters.Artist_ListTableAdapter();
    dt = ada.GetData(CultureId
                    , StartDate
                    , EndDate
                    , MinimumGradeLevel
                    , MaximumGradeLevel
                    , IsFeature
                    , ColumnName
                    , Criteria
                    , EducationalInitiativeIds
                    , StakeholderId
                    , DisciplineId
                    , LanguageId
                    , StartPage
                    , PageSize
                    , out count
                    );
    RowCount = (int)count;
    return dt; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-09T20:24:43.130

`DateTime`没有格式 - 它只是一个日期/时间值。将其转换为字符串然后将其转换回日期是没有用的 - 您将获得相同的值。

当您将`QueryString`参数从字符串转换为日期时，您的问题更有可能出现。这是您发布的代码中唯一将日期表示为字符串的地方。您需要有某种方法来强制执行特定格式，否则`Convert.ToDateTime`会尝试*推断*格式，当月份和日期不明确时，这可能是错误的。例如 2/3/2013 是 2 月 3 日还是 3 月 2 日？

如果您的查询字符串变量始终采用格式，`mm/dd/yyyy`则使用`ParseExact`将其转换为`DateTime`：

```
CultureInfo provider = CultureInfo.InvariantCulture;

if (Request.QueryString["StartDate"] != null)
    startDate = DateTime.ParseExact(Request.QueryString["StartDate"], "MM/dd/yyyy", provider);
if (Request.QueryString["EndDate"] != null)
    endDate = DateTime.ParseExact(Request.QueryString["EndDate"], "MM/dd/yyyy", provider); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T20:09:51.257

你的例外说你的方法的签名应该是：

```
TableAdapters.Artist_ListTableAdapter.GetData(int, System.DateTime?, System.DateTime?, int?, int?, bool?, string, string, string, int?, int?, int?, int?, int?, out int?) 
```

但你称它为：

```
ada.GetData(CultureId,
                    ArtistId
                    , StakeholderId
                    , StartDate
                    , EndDate
                    , DisciplineId
                    , MinimumGradeLevel
                    , MaximumGradeLevel
                    , LanguageId
                    , IsFeature
                    , ShowId
                    ); 
```

您可以看到参数中存在不匹配 - 在异常中它表示 DateTime 参数应该是 2nd 和 3 rd。但你称它为第四和第五。

# php - foreach 循环会完成这个吗？如何？

> ID：13314986
> 
> 赞同：-1
> 
> 时间：2012-11-09T19:51:29.707
> 
> 标签：php, arrays, forms, foreach

我正在尝试创建一个表单页面，使最终用户能够更新表中的多个条目。用户由 ID_NUM 标记，条目由 RECORD 标记。我想显示表单中的每一行，每一行在单独的实例中堆叠在页面上。如下：

```
School Name:
School Type:
Degree:
Major:
Graduate:

School Name:
School Type:
Degree:
Major:
Graduate: 
```

我希望提交触发对任何行中的任何更改的更新。这是我为基本表单提供的代码。如果这是解决问题的最佳方法，我需要做什么来集成 foreach 循环？

```
<?php

// Start the session
require_once('startsession.php');

// Insert Page Header
$page_title = 'Edit Profile';
require_once('header.php');

// Make sure the user is logged in before going any further.
if (!isset($_SESSION['email'])) {
echo '<p class="login">Please <a href="login.php">log in</a> to access this page.</p>';
exit();
}

// Insert navmenu
require_once('navmenu.php');

require_once('vary.php');
require_once('appvars.php');
require_once('connectvars.php');

// Connect to the database using vary.php

if (isset($_POST['submit'])) 
{
// Grab the profile data from the POST
$record2 = $_POST['record'];
$school2 = $_POST['school'];
$type2 = $_POST['school_code'];
$degree2 = $_POST['degree_code'];
$desc2 = $_POST['desc'];
$grad2 = $_POST['grad']; 
$another2 = $_POST['another']; 

// Update the profile data in the database
if (!empty($school2)) {
$query3 = "UPDATE EDUCATION SET SCHOOL = '$school2' WHERE ID_NUM = '" . $_SESSION['IDNUM'] . "' AND RECORD = '" . $record2 . "'";
mysqli_query($dbc, $query3);
}
if (!empty($type2)) {
$query4 = "UPDATE EDUCATION SET TYPE = '$type2' WHERE ID_NUM = '" . $_SESSION['IDNUM'] . "' AND RECORD = '" . $record2 . "'";
mysqli_query($dbc, $query4);
}
if (!empty($degree2)) {
$query5 = "UPDATE EDUCATION SET DEGREE = '$degree2' WHERE ID_NUM = '" . $_SESSION['IDNUM'] . "' AND RECORD = '" . $record2 . "'";
mysqli_query($dbc, $query5);
}
if (!empty($desc2)) {
$query6 = "UPDATE EDUCATION SET MAJOR = '$desc2' WHERE ID_NUM = '" . $_SESSION['IDNUM'] . "' AND RECORD = '" . $record2 . "'";
mysqli_query($dbc, $query6);
}
if (!empty($grad2)) {
$query7 = "UPDATE EDUCATION SET GRAD = '$grad2' WHERE ID_NUM = '" . $_SESSION['IDNUM'] . "' AND RECORD = '" . $record2 ."'";
mysqli_query($dbc, $query7);
}
// Confirm success with the user
if ($another2=="Y")
{
// Clear the variables and reload the page for new submit
$record2 = "";
$school2 = "";
$type2 = "";
$degree2 = "";
$major2 = "";
$grad2 = ""; 
$another2 = ""; 
echo '<meta HTTP-EQUIV="REFRESH" content="0; url=http://www.avant.jobs/portal/addeducation.php">';
}
else
{
echo '<p>The education section of your profile has been successfully updated. Would you like to <a href="workcheck.php">continue?</a>?</p>';   
echo '<meta HTTP-EQUIV="REFRESH" content="0; url=http://www.avant.jobs/portal/workcheck.php">';
}
mysqli_close($dbc);
exit();
}
else 
{
echo '<p class="error">You must enter all of the profile data.</p>';
}

// End of check for form submission

// Grab the profile data from the database
$query8 = "SELECT * FROM EDUCATION WHERE ID_NUM = '" . $_SESSION['IDNUM'] . "'";
$data = mysqli_query($dbc, $query8);
$row = mysqli_fetch_array($data);
if ($row != NULL) 
{
$record = $row['RECORD'];
$school = $row['SCHOOL'];
$type = $row['TYPE'];
$degree = $row['DEGREE'];
$desc = $row['MAJOR'];
$grad = $row['GRAD'];
}
else 
{
echo '<p class="error">There was a problem accessing your profile.</p>';
}
;

?>
<form enctype="multipart/form-data" method="post" action="<?php echo $_SERVER['PHP_SELF']; ?>">

<fieldset>
<legend>Education History </legend>
<?php
echo '<input type="hidden" id="record" name="record" value="' . $record . '">';

// Insert Listbox here
$queryschool = "SELECT * FROM SCHOOL";
$list = mysqli_query($dbc, $queryschool);
if($list) 
{
echo 'School Type? ';
echo '<select name="school_code">';
while($row = mysqli_fetch_assoc($list))
{
echo "<option value={$row['CODE']}>{$row['TYPE']}" ;
echo '</option>';
}
echo '</select>';
}

echo '<br />';
echo '<label for="school">School Name:</label>';
echo '<input type="text" id="school" name="school" size="40" maxlength="40" value="' . ((!empty($school)) ? $school : "") . '" /><br />';

// Insert Listbox here
$querydegree = "SELECT * FROM DEGREE";
$list = mysqli_query($dbc, $querydegree);
if($list) 
{
echo 'Degree Type? ';
echo '<select name="degree_code">';
while($row = mysqli_fetch_assoc($list))
{
echo "<option value={$row['CODE']}>{$row['DEGREE']}";
echo '</option>';
}
echo '</select>';
}
echo '<br />';
echo '<label for="desc">Field of study:</label>';
echo '<input type="text" id="desc" name="desc" size="40" maxlength="40" value="' . ( (!empty($desc)) ? $desc : "") . '" /><br />';
echo '<label for="grad">Did you graduate?:</label>';
echo '<input type="radio" id="grad" name="grad" value="Y" ' . ($grad == "Y" ? 'checked="checked"':'') . '/>Yes ';
echo '<input type="radio" id="grad" name="grad" value="N" ' . ($grad == "N" ? 'checked="checked"':'') . '/>No<br />';
?>
</fieldset>
<?php
echo '<label for="another">Do you need to enter more educational experience?:</label>';
echo '<input type="radio" id="another" name="another" value="Y" ' . ($another     == "Y" ? 'checked="checked"':'') . '/>Yes ';
echo '<input type="radio" id="another" name="another" value="N" ' . ($another     == "N" ? 'checked="checked"':'') . '/>No<br />';
?>

<input type="submit" value="Save Profile" name="submit" />
</form>

<?php
// Insert Page Footer
require_once('footer.php');
?> 
```

由于我是新手并试图自学，因此感谢您提供任何帮助！谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T20:04:17.283

您可以将它们集成到 1 个查询中，而不是多个`UPDATE`查询，

```
 $comma = FALSE;
 $query = "UPDATE EDUCATION SET ";
// Update the profile data in the database
if (!empty($school2)) {
  $query .= "SCHOOL = '$school2'";
  $comma = TRUE;  
 }

if (!empty($type2)) {
  if($comma === TRUE)
   $query .= ", ";
   $query .= "TYPE = '$type2' ";
   $comma = TRUE;
 }

 if (!empty($degree2)) {
    if($comma === TRUE)
     $query .= ", ";
     $query5 = "DEGREE = '$degree2'";
     $comma = TRUE;
   }
 if (!empty($desc2)) {
  if($comma === TRUE)
   $query .= ", ";
   $query .= "MAJOR = '$desc2'";
   $comma = TRUE;
  }

  if (!empty($grad2)) {
    if($comma === TRUE)
      $query .= ", ";
     $query .= "GRAD = '$grad2'";
   }

 $query .= "WHERE ID_NUM = '" . $_SESSION['IDNUM'] . "' AND RECORD = '" . $record2 ."'";
 if (!empty($school2) || !empty($type2) || !empty($degree2) || !empty($desc2) || !empty($grad2)) {
   mysqli_query($dbc, $query); 
```

# javascript - 通过cfhttp执行js

> ID：13314990
> 
> 赞同：0
> 
> 时间：2012-11-09T19:51:40.690
> 
> 标签：javascript, coldfusion, listener, background-process

我试图通过后台任务执行一些 JS 代码。

我使用的网关与贝宝类似，即一旦获取付款详细信息，就会将响应发送回我服务器上的侦听器（这可能是立即的或几分钟后）

一旦侦听器 (listener.cfm) 收到响应，使用 cfhttp im 调用具有一些触发代码的文件 (runPixCode.cfm)。因为浏览器没有渲染 runPixCode.cfm，所以 JS 没有执行。

另外为了证明这是否有效，我让 JS 调用另一个文件（provethisis called.cfm），该文件将日志写入 txt 文件。

如果我在 cfhttp 调用之后直接输入以下内容，我可以在日志文件中看到一个条目。这向我保证，提供浏览器呈现的 JS 没有问题。

```
<cfoutput>#cfhttp.FileContent#</cfoutput><cfabort> 
```

但是，不适用于后台任务。我不知道如何处理这个，任何建议表示赞赏。

监听器.cfm

```
--Does a bunch of logic--
<cfif paymentsuccessful>
    <CFHTTP URL="www.mysite.com/runPixCode.cfm" METHOD="post" timeout="12" resolveurl="true">
      <CFHTTPPARAM NAME="TrackingId" VALUE="#trackingId#" TYPE="FormField">
    </CFHTTP>
</cfif> 
```

运行PixCode.cfm

```
<SCRIPT language="JavaScript">
    var axel = Math.random()+""; 
    var a = axel * 1000; 
    document.write('<IFRAME SRC="http://www.mysite.com/provethisiscalled.cfm?codearea=landing&num='+ a + '?" WIDTH=1 HEIGHT=1 FRAMEBORDER=0></IFRAME>'); 
</SCRIPT>
<NOSCRIPT><IFRAME SRC="http://www.mysite.com/provethisiscalled.cfm?codearea=landing&num=1" WIDTH=1 HEIGHT=1 FRAMEBORDER=0></IFRAME> </NOSCRIPT> 
```

证明thisis called.cfm

```
<cfloop collection=#ARGUMENTS.triggerParams# item="key"> 
        <cfset docLogging = docLogging & chr(13) & "#key# = " & ARGUMENTS.triggerParams[key]> 
</cfloop>
<cffile action="append" file="c:\serverlocation\someDir\triggerlog.txt" output="#docLogging#" addnewline="YES" > 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T21:08:06.977

编写 iframe 是行不通的，javascript 也行不通，因为所有这些进程都是由应用程序调用的，而不是由浏览器调用的。

因此，您必须发挥创造力。首先，你真正想要做什么？

如果您的目的是确定文件是否已被调用或执行，请使用`<cflog>`或将条目写入数据库。

如果您尝试将 HTTP 调用从 listener.cfm 传递到 runPixCode.cfm，请使用`<cfhttp>`而不是 iframe。

如果您的目的实际上是执行 JavaScript 作为此自动化过程的一部分（不是，但这很酷），您可以通过 Rhino 在您的 CF/Java 服务器中执行 JavaScript，这不是非常简单，但是您可以获得代码谷歌搜索的片段。Rhino 包含在 ColdFusion 中`js.jar`，因此无需下载特殊文件即可使其工作。

# expressionengine - 更新 ExpressionEngine 时出现服务器错误

> ID：13314992
> 
> 赞同：2
> 
> 时间：2012-11-09T19:51:57.287
> 
> 标签：expressionengine

将 ExpressionEngine 从 2.3.1 更新到 2.5.3 后，单击 Add-ons > Fieldtypes 会返回服务器错误。我使用 Updater 插件来运行更新。以前有人遇到过这个问题吗？如果是这样，你是如何补救的？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-09T20:43:33.697

我刚刚遇到这个问题。自 2.4 起，一些第三方字段类型模块所依赖的字段类型库已被移动。您需要扫描任何第三方字段类型插件并手动更新它们。这是我必须更新的模块的快速列表

Matrix Wygwam Google Mx Solspace 日历收藏夹 (solspace)

# java - 是否可以从 JTextField 读取各种不同的语言？

> ID：13314997
> 
> 赞同：0
> 
> 时间：2012-11-09T19:52:20.563
> 
> 标签：java, swing, localization, jtextfield

我正在尝试从 JTextField 读取字符串，只要字符串是英文的，一切正常。但是，如果我将其更改为韩文或日文，我会在字符串中得到所有一些模糊字符。有没有办法可以用给定的语言读取这些字符串？

例如 JTextField 包含：할로윈 빅 세일 마지막날입니다！字符串读取是：??? ? ?? ？？？？？？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-09T20:26:44.483

确保您拥有正确的编码和适当的 IDE。

![在此处输入图像描述](../Images/045ecca89e446b8089114be330f3a53f.png)

在 IntelliJ 中使用 UTF-8 编码进行调试时：

![在 IntelliJ 中调试](../Images/8cf4d35356552bbd4fc44f1a0689511e.png)

我使用的代码片段：

```
import java.awt.*;

import javax.swing.*;

public class I18n {

    public static void main(String[] args) {

        SwingUtilities.invokeLater(new Runnable() {
            @Override
            public void run() {
                JFrame frame = new JFrame("i18n");
                I18nView view = new I18nView();
                frame.getContentPane().add(view);
                frame.setDefaultCloseOperation(WindowConstants.EXIT_ON_CLOSE);
                frame.setMinimumSize(new Dimension(200, 150));
                frame.setLocationRelativeTo(null); // Center
                frame.pack();
                frame.setVisible(true);
            }
        });
    }

    static class I18nView extends JPanel {
        private String i18n = " 할로윈 빅 세일 마지막날입니다!";
        private JTextField i18nTextField;

        I18nView() {
            createComponents();
            makeLayout();
            test();
        }

        private void createComponents() {
            i18nTextField = new JTextField(i18n);
        }
        private void makeLayout() {
            add(i18nTextField);
        }

        private void test() {
            String another = i18nTextField.getText();
            System.out.println("another = " + another);
        }

    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T19:55:34.360

您是否检查过用于调试字符串内容的字体是否确实支持这些字符？大多数编码或 UI 字体仅支持欧洲字符。

您可以尝试将字符串编码为 UTF-8，以使用“getBytes”或将字符串写入 UTF-8 文件来实际检查调试器中的字节。